# StackOverflow 问答 11619000-11619999

# c# - douglas-peucker 算法：理解使用 polgyons

> ID：11619004
> 
> 赞同：3
> 
> 时间：2012-07-23T19:17:11.637
> 
> 标签：c#, algorithm, math

我一直在研究这个算法，它看起来非常简单。但是，我对如何在封闭的多边形中使用它感到困惑。我见过的所有示例都处理带有开口端的线/曲线。如果我正在可视化该过程正确地绘制一条线，然后对其进行迭代以重新捕获多边形的细节将不起作用，因为它总是至少在多边形的一侧保持打开状态。

我正在考虑编写一个实现，首先制作 4 个点（最远的 topLeft、TopRight、Bottomright 和 BottomLeft 点），然后在这些到点索引之间的顶点上运行算法。

因此，如果底线在原始路径数组中的索引为 40 和 80，那么我将在那里迭代并在点 40-80 上捕获该线的相似性，然后它们移动到下一条边，直到所有边都完成。

众所周知，我自己也很傻，而且事情过于复杂，所以我想知道这是否是一个合理的实现？

**我基本上是在尝试复制下面看到的 GPX 数据缩减实施：**

![在此处输入图像描述](../Images/5a12d3359854fb11ea769c62c906e1ba.png) ![在此处输入图像描述](../Images/1ab5e3e2cef1ac6120952fe4712f8611.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T21:20:48.543

在[Wikipedia](http://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm)上快速阅读算法后，您似乎可以通过简单的方式捕获封闭循环的简化形状。

调用起点'A'和终点'Z'相同的方法。

修改算法，如果'A'和'Z'是同一个点，而不是找到**垂直**于线AZ的最远点，它只是根据距起点/终点的**欧几里得距离寻找最远的点。**

现在算法在 A->M 和 M->Z 上递归，其中 M 是离 A 最远的点（也是 Z）。现在算法可以正常运行了。

# android - Android 和自动更新的数据库

> ID：11619006
> 
> 赞同：2
> 
> 时间：2012-07-23T19:17:32.373
> 
> 标签：android, database

我在 android 上编写应用程序，它将使用 android SQLite 数据库。我有一个表，它将包含具有唯一 ID 的数据行。有时我需要添加新行或更新旧行。现在，当我想添加/更新数据时，我必须检查表中是否有具有指定 ID 的行。如果我有我更新合适的行。如果我不使用新的唯一键创建新行。我的问题是：Android中有什么东西可以自动检查数据库中是否有指定id的行，然后更新它，如果没有这样的行添加新的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T19:24:16.160

查看[插入语句](http://www.sqlite.org/lang_insert.html)的 SQLite 文档。您可以使用`insert or replace`语句（或仅使用`replace`，这是一种快捷方式）。

您可以像使用传统`insert`语句一样使用它。这在您的情况下可能很有用，因为您已经知道密钥。

# sql - 重写 SQL 查询以接受 where 子句中的日期差异条件

> ID：11619008
> 
> 赞同：1
> 
> 时间：2012-07-23T19:17:34.070
> 
> 标签：sql, join, group-by, hive

下面是TestingTable1中的数据

```
BUYER_ID   |   ITEM_ID         |    CREATED_TIME
-----------+-------------------+------------------------
1345653        110909316904         2012-07-09 21:29:06
1345653        151851771618         2012-07-09 19:57:33
1345653        221065796761         2012-07-09 19:31:48
1345653        400307563710         2012-07-09 18:57:33
1345653        310411560125         2012-07-09 16:09:49
1345653        120945302103         2012-07-09 13:40:23
1345653        261060982989         2012-07-09 09:02:21 
```

下面是TestingTable2中的数据

```
USER_ID   |   PRODUCT_ID           |    LAST_TIME
-----------+-------------------+-------------------
1345653       110909316904         2012-07-09 21:30:06
1345653       152851771618         2012-07-09 19:57:33
1345653       221065796761         2012-07-09 19:31:48
1345653       400307563710         2012-07-09 18:57:33 
```

我需要`TestingTable2`比较`TestingTable1`on`BUYER_ID`和`USER_ID`。我需要`TestingTable2`在比较 from 之后找到所有（基本上是计数）丢失和不匹配的条目`TestingTable1`。我为此创建了 SQL 小提琴 -

[http://sqlfiddle.com/#!3/d87b2/1](http://sqlfiddle.com/#!3/d87b2/1)

如果你在 SQL Fiddle 中运行我的查询，你会得到输出——

```
BUYER_ID    ERROR
1345653       5 
```

这是正确的，因为从on和比较后的最后`three`一行`TestingTable1`缺失`TestingTable2`，其余行`two`不匹配。`TestingTable1``BUYER_ID``USER_ID`

现在复杂的事情开始了。

**问题陈述-**

在我当前的输出中，我得到 ERROR count as `5`。因此，如果您在两个表中看到第一行`ITEM_ID`并且`PRODUCT_ID`相同但不相同，`CREATED_TIME`并且`LAST_TIME`这两次之间的差异仅为`1 minute`. 所以目前我将其报告为不匹配，但我需要的是，如果它们之间的差异在 范围内`15 minutes range`，那么我不想报告为错误。因此，在我当前的查询中实现此功能后，我将获得错误计数，`4`因为差异在`15 minutes range`第一行之内。

因此，在从 Stack Overflow 获得帮助后，我找到了解决方案，下面是在 SQL Server 中运行良好的 sql 查询（错误计数为 4），但在 Hive 中却不行，`Hive supports only equality JOINS`我无法在 Hive 中运行以下查询. 所以我需要一些其他的方法来解决这个问题。是否可以在 where 子句中以某种方式执行日期差异条件？`Basically how I can rewrite the below SQL query`以其他方式满足我上述所有要求。

```
SELECT  TT.BUYER_ID,
        COUNT(*)
FROM    (
          SELECT    testingtable1.buyer_id,
                    testingtable1.item_id,
                    testingtable1.created_time
          FROM      testingtable2
                    RIGHT JOIN testingtable1
                        ON (
                             testingtable1.item_id = testingtable2.product_id
                             AND testingtable1.BUYER_ID = testingtable2.USER_ID
                             AND ABS(DATEDIFF(mi, testingtable1.created_time, testingtable2.last_time)) <= 15
                           )
          WHERE     testingtable2.product_id IS NULL
        ) TT
GROUP BY TT.BUYER_ID; 
```

实现上述功能后我需要的预期输出 -

```
BUYER_ID    ERROR
1345653       4 
```

**更新：-**

根据下面的 WEST 评论，输出仅显示错误计数为 1，但它应该显示为 4。而且在删除他在他的 SQL 小提琴中添加的最后一行之后，它不起作用，我得到零错误，这不是是的，因为时差已经有一个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:39:19.203

如果您进行 equijoin，并将您的时间比较逻辑放在带有 SUM 而不是 COUNT 的 CASE 表达式中怎么办？

```
SELECT  TT1.BUYER_ID,
        SUM(CASE WHEN ABS(DATEDIFF(mi, TT1.created_time, TT2.last_time)) <= 15 THEN 0
                 ELSE 1
            END) AS ERROR
FROM    testingtable1 TT1
        LEFT JOIN testingtable2 TT2
            ON (
                 TT1.item_id = TT2.product_id
                 AND TT1.BUYER_ID = TT2.USER_ID
               )
GROUP BY TT1.BUYER_ID; 
```

您需要将日期算术转换为任何蜂巢使用...

这是一个[MS Sql 服务器 SQLFiddle](http://sqlfiddle.com/#!3/99d23/11)，它返回了 4 个错误。

# php - 使用 htaccess 清空 POST

> ID：11619012
> 
> 赞同：2
> 
> 时间：2012-07-23T19:17:42.413
> 
> 标签：php, .htaccess, post, rewrite

我尝试了该论坛帖子的所有答案，但没有任何帮助。我在 html 中有一个公式，它应该将文件传输到 php 脚本，并且答案应该显示在 IFrame 中。但是当我查看 $_POST 或 $_REQUEST 变量时，它几乎是空的。而且因为我在公式中有一个文件类型的输入字段，所以我没想到会找到一个空的 $_FILES 变量。只有 action 标签中给出的参数可用。我有一个重写的 htaccess 文件，我认为这个文件中存在错误。但我找不到我犯的错误。

htaccess 看起来像这样：

```
RewriteEngine on
RewriteCond %{REQUEST_METHOD}  !=POST
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)\.htm$ index.php?targetFile=$1.php [QSA]
RewriteRule ^applicat/(.*)\.jpg$ ../application/$1.jpg
RewriteRule ^applicat/(.*)\.gif$ ../application/$1.gif 
```

公式如下：

```
<form id="-UPLOADER-_form" class="form" style="width:549px" action="test.php?par=ram" target="upload_target" method="POST" enctype="multipart/form-data">
   <input id="targetComponent" type="hidden" value="">
   <input id="method" type="hidden" value="processInput">
   <input id="toUpload_file" type="file" accept="image/*" style="cursor:pointer;">
   <iframe id="upload_target" style="width:200;height:300;border:0px solid #fff;" src="" name="upload_target">
   <input id="unique" type="hidden" value="500da15dc03a6">
</form> 
```

最后的 php 文件是：

```
<?php
    print_r($_REQUEST);
?> 
```

我已经打开了 apache 的重写日志，但我想那里没有任何帮助：

```
127.0.0.1 - - [23/Jul/2012:21:14:20 +0200] [localhost/sid#453140][rid#9e9faa0/initial] (1) [perdir C:/xampp/htdocs/fritz/] pass through C:/xampp/htdocs/fritz/index.php
127.0.0.1 - - [23/Jul/2012:21:14:27 +0200] [localhost/sid#453140][rid#399ef80/initial] (1) [perdir C:/xampp/htdocs/fritz/] pass through C:/xampp/htdocs/fritz/test.php 
```

有人对我的代码有问题有帮助吗？

此致

斯蒂芬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:20:34.210

您的输入都没有 name="field_name" 属性，您需要它。

例如：

```
<input name="bleh" id="some_id"> 
```

要获得此值，您需要*name*属性而不是*id*

```
<?php echo $_POST['bleh']; ?> 
```

# c# - .NET C# 版本的 Core Data

> ID：11619020
> 
> 赞同：6
> 
> 时间：2012-07-23T19:18:12.260
> 
> 标签：c#, .net, core-data

是否有 OS X/iOS CoreData 的 .NET C# 版本？我正在阅读[这篇文章](https://stackoverflow.com/q/2997154/703161)，但它需要用于 C# .NET。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T19:29:18.107

你可以试试[mono](http://xamarin.com/monotouch)，一个为 iOS 创建应用程序的框架

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-06T00:34:43.740

在写这个问题的时候，[Nhiberate](https://nhibernate.info/)是我们最终使用的 ORM。目前，对于大多数项目，我们正在使用[Dapper](https://github.com/StackExchange/Dapper)

**2022 年更新：**

自从提出这个问题以来，[实体框架](https://docs.microsoft.com/en-us/ef/)已经发展了很多，并且肯定可以填补我在提出问题时正在寻找的角色。

# php - 如何使用 PHP 将目录中的文件名作为选项填充下拉菜单？

> ID：11619023
> 
> 赞同：1
> 
> 时间：2012-07-23T19:18:17.357
> 
> 标签：php, html, file, drop-down-menu, directory

我正在尝试创建一个指向目录的下拉菜单，并使用 PHP 使用该目录中某些文件的名称填充下拉菜单。

这是我正在使用的：

```
<?php

$path = "pages/"; //change this if the script is in a different dir that the files you want
$show = array( '.php', '.html' ); //Type of files to show

$select = "<select name=\"content\" id=\"content\">";

$dh = @opendir( $path );

while( false !== ( $file = readdir( $dh ) ) ){
    $ext=substr($file,-4,4);
        if(in_array( $ext, $show )){       
            $select .= "<option value='$path/$file'>$file</option>\n";
    }
}  

$select .= "</select>";
closedir( $dh );

echo "$select";
?> 
```

这段代码给了我一个错误，如果有更好的方法来尝试完成我正在尝试做的事情，我什至不会真正依赖它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:25:24.133

[使用glob()](http://us.php.net/glob)会更容易，因为它可以处理通配符。

```
// match all files that have either .html or .php extension
$file_matcher = realpath(dirname(__FILE__)) . '/../pages/*.{php,html}';

foreach( glob($file_matcher, GLOB_BRACE) as $file ) {
  $file_name = basename($file);
  $select .= "<option value='$file'>$file_name</option>\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T19:25:14.920

您需要完整的路径参考（即/var/www/pages/）而不仅仅是“页面”。

您也可以考虑使用 DirectoryIterator 对象来轻松获取目录信息（如果您使用的是 PHP 5）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T19:25:33.217

我不知道，你得到了哪些错误。但我认为它不适用于`$show`数组，因为您正在将文件的最后 4 个字符与数组的内容进行比较。而不是`$ext=substr($file,-4,4);`你可以写`$ext=substr($file, strrpos( $file, "."));`which 给你从“。”最后一次出现的位置开始的字符串。

另外，出于测试原因，我建议您省略 @ 打开目录，因为我认为找不到路径。

# android - 带有 SherlockActionBar 的 WebView 在旋转时重新加载

> ID：11619026
> 
> 赞同：0
> 
> 时间：2012-07-23T19:18:38.733
> 
> 标签：android, webview, android-webview, actionbarsherlock, screen-rotation

我知道有很多类似的问题，相信我，我尝试了很多，但对我来说没有任何效果。我有一个使用 Webview 的 Android 应用程序。您可以在 Play 商店中找到我的应用程序：

[https://play.google.com/store/apps/details?id=at.rk.rps&feature=search_result#?t=W251bGwsMSwxLDEsImF0LnJrLnJwcyJd](https://play.google.com/store/apps/details?id=at.rk.rps&feature=search_result#?t=W251bGwsMSwxLDEsImF0LnJrLnJwcyJd)

在 Play 商店呆了几个月后，我决定进行更新，并为我的新设计使用 Android 设计指南，因此操作栏是必要的。我选择了 ActionbarSherlock，一切都很好，除了 Webview 现在每次我旋转手机时都会重新加载。在我的上一个版本中，我用这个答案处理了这个问题并且它有效：

[当我从纵向更改为横向时，我的 Webview 会重新加载](https://stackoverflow.com/questions/5628924/my-webview-reloads-when-i-change-from-portrait-to-lanscape)

但现在它不会再工作了。我也尝试过该解决方案：（我还在网站末尾留下了评论）

[http://www.devahead.com/blog/2012/01/preserving-the-state-of-an-android-webview-on-screen-orientation-change/](http://www.devahead.com/blog/2012/01/preserving-the-state-of-an-android-webview-on-screen-orientation-change/)

同样令人失望的结果。我什至不确定 ActionbarSherlock 是否是问题所在，因为我已经更改了很多，但是无法重新创建旧状态！

这是应用程序的外观（仅在新版本中实现，您无法在 Play Store 上发布的版本中找到它）：

![载入画面](../Images/d96fc35967cd62088852b5cd4347f65e.png)

![贝宝网站](../Images/0b8ecab901fe94952257fd3cc900a0b9.png)

这是我的代码的一部分，首先是清单，然后是布局，然后是 java 代码：

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="at.rk.rps"
    android:versionCode="8"
    android:versionName="0.4" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.CALL_PHONE" />

    <application
        android:icon="@drawable/rps"
        android:label="@string/app_name"
        android:theme="@style/Theme.Sherlock.Light.DarkActionBar" >
        <activity
            android:name=".RPSActivity"
            android:configChanges="orientation"
            android:label="@string/app_name" >
        </activity>
        <activity
            android:name=".SettingsActivity"
            android:label="@string/app_name"
            android:windowSoftInputMode="stateHidden" >
        </activity>
        <activity
            android:name=".DonateActivity"
            android:label="@string/app_name" >
        </activity>
        <activity
            android:name=".PayPalActivity"
            android:configChanges="orientation"
            android:label="@string/app_name" >
        </activity>
        <activity
            android:name=".LoadingScreen"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/paypal_loadingtext"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="90dp"
        android:gravity="center"
        android:text="@string/paypal_loadingtext"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="@color/rk_red" />

    <ProgressBar
        android:id="@+id/paypal_progressbar"
        style="?android:attr/progressBarStyleHorizontal"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/paypal_loadingtext"
        android:layout_marginLeft="40dp"
        android:layout_marginRight="40dp"
        android:layout_marginTop="10dp" />

         <WebView
        android:id="@+id/paypal_webview"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:visibility="gone" />

</RelativeLayout> 
```

Java代码：

```
package at.rk.rps;

import org.apache.http.util.EncodingUtils;

import android.content.res.Configuration;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.MotionEvent;
import android.view.View;
import android.view.WindowManager;
import android.webkit.WebChromeClient;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.LinearLayout;
import android.widget.ProgressBar;
import android.widget.TextView;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.SherlockActivity;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuInflater;
import com.actionbarsherlock.view.MenuItem;

public class PayPalActivity extends SherlockActivity {

private ActionBar actionbar;
    private WebView webview;
    private TextView loadingtxt;
    private ProgressBar progressbar;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        if(getSharedPreferences(RPSActivity.PREFS_NAME, 0).getBoolean(RPSActivity.FULLSCREEN, true)) this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.paypal);

        initUI();
    }

    private void  initUI() {

        actionbar = getSupportActionBar();
        actionbar.setTitle(R.string.paypal_actionbar_headline);
        actionbar.setHomeButtonEnabled(true);
        this.actionbar.setDisplayHomeAsUpEnabled(true);

        loadingtxt = (TextView) findViewById(R.id.paypal_loadingtext);
        progressbar = (ProgressBar) findViewById(R.id.paypal_progressbar);

        webview = (WebView) findViewById(R.id.paypal_webview);

        webview.requestFocus(View.FOCUS_DOWN); // Enables the keyboard in landscape mode
        webview.setOnTouchListener(new View.OnTouchListener() {             
            @Override
            public boolean onTouch(View v, MotionEvent event) {

                switch (event.getAction()) { 
                case MotionEvent.ACTION_DOWN: 
                case MotionEvent.ACTION_UP:
                    if (!v.hasFocus()) { 
                        v.requestFocus(); 
                    } 
                    break; 
                }

                return false; 
            }
        });

        webview.getSettings().setJavaScriptEnabled(true); // Enables JavaScript
        webview.getSettings().setBuiltInZoomControls(true); // Enables zoom

        webview.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY); // Displays scrollbars outside the view
        webview.setScrollbarFadingEnabled(false);       

        webview.getSettings().setLoadWithOverviewMode(true);
        webview.getSettings().setUseWideViewPort(true);

        webview.setWebChromeClient(new WebChromeClient() {
            public void onProgressChanged(WebView view, int progress) {

                loadingtxt.setVisibility(TextView.VISIBLE);
                progressbar.setVisibility(ProgressBar.VISIBLE);
                webview.setVisibility(WebView.GONE);

                progressbar.setProgress(progress);
                if(progress == 100) {
                    loadingtxt.setVisibility(LinearLayout.GONE);
                    progressbar.setVisibility(LinearLayout.GONE);
                    webview.setVisibility(WebView.VISIBLE);
                }
            }
        });

        webview.setWebViewClient(new WebViewClient());

        byte[] post = EncodingUtils.getBytes("cmd=_s-xclick&hosted_button_id=VRM63MEY4J936", "BASE64");
        webview.postUrl("https://www.paypal.com/cgi-bin/webscr", post);         

    }

    @Override
    public void onConfigurationChanged(Configuration newConfig){        
        super.onConfigurationChanged(newConfig);
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if(event.getAction() == KeyEvent.ACTION_DOWN){
            switch(keyCode)
            {
            case KeyEvent.KEYCODE_BACK:
                if(webview.canGoBack() == true){
                    webview.goBack();
                } else {
                    finish();
                }
                return true;
            }
        }
        return super.onKeyDown(keyCode, event);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater i = getSupportMenuInflater();
        i.inflate(R.menu.paypal_menu, menu);
        return super.onCreateOptionsMenu(menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // Handle item selection
        switch (item.getItemId()) {
        case android.R.id.home:
            finish();
            return(true);

        case R.id.paypal_actionbar_reload:
            webview.reload();
            return(true);
        default:
            return super.onOptionsItemSelected(item);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T18:25:42.350

我在这里找到了答案：

[https://stackoverflow.com/a/9550231/1254514](https://stackoverflow.com/a/9550231/1254514) “从 Android 3.2（API 级别 13）开始，当设备在纵向和横向之间切换时，“屏幕尺寸”也会发生变化。”

所以我不得不做以下事情：

将您的 Android 清单添加到您喜欢的活动中：

```
android:configChanges="keyboardHidden|orientation|screenSize" 
```

然后覆盖您的活动中的功能：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T00:31:51.523

也许如果你尝试这样的事情：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if(getSharedPreferences(RPSActivity.PREFS_NAME, 0).getBoolean(RPSActivity.FULLSCREEN, true)) this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

    setContentView(R.layout.paypal);

    initUI();

     if(savedInstanceState != null)
     {
      /** Restoring the web Ui state. */
       webView.restoreState(savedInstanceState);
     }

}

@Override
public void onSaveInstanceState(Bundle outState)
{
  /** Saving the webview state. */
  webView.saveState(outState);
} 
```

这是未经测试的，但似乎您没有保存 webview 的状态。我在片段中使用此代码，它似乎保存了 webview 的状态。

# ruby-on-rails - 如何为 Rails Slim HTML 电子邮件模板设置最大行长？

> ID：11619029
> 
> 赞同：4
> 
> 时间：2012-07-23T19:18:45.017
> 
> 标签：ruby-on-rails, sendgrid, slim-lang

我正在`Slim`用作我的 HTML 电子邮件的模板语言。当在生产环境中关闭漂亮模式时，它会将所有 HTML 放在一行中。当电子邮件通过 时`Sendgrid`，会在第 998 个字符处引入换行符，从而破坏 HTML。`Sendgrid`这样做是为了遵守电子邮件 RFC。

如何在呈现电子邮件时关闭漂亮模式，告诉`Slim`尊重最大行长，或引入硬换行符？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T19:30:57.287

添加其中一些

```
= "\r\n" 
```

整个电子邮件模板解决了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-26T01:07:05.120

只需将`data-force-encoding="✓"`属性添加到`body`标签。这将使 Rails 以引用的可打印形式发送电子邮件（诀窍实际上是使用 UTF8 字符）。见：[https ://github.com/slim-template/slim/issues/123](https://github.com/slim-template/slim/issues/123)

# r - 从r中的大矩阵创建小矩阵

> ID：11619032
> 
> 赞同：1
> 
> 时间：2012-07-23T19:18:50.670
> 
> 标签：r, matrix, subset

我有 nxn 类型的矩阵 where`n = 100`左右。

```
mat <- matrix (1:10000, nrow=100)
rownames (mat) <- paste ("I", 1:100, sep = "")
colnames (mat)  <- paste ("I", 1:100, sep = "") 
```

我想选择特定的行（或列）并创建一个小的 nxn 矩阵。

```
# for example rows selected:
c(1, 20, 33, 44, 64). 
```

因此生成的矩阵将像这样循环：

```
 I1   I20   I33   I44  I64
I1
I20
I33
I44
I64 
```

有没有办法这样做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T19:21:19.040

只需通过直接选择它们`[row,col]`

```
indices <- c(1, 20, 33, 44, 64)

mat[indices,indices]

> mat[indices,indices]
    I1  I20  I33  I44  I64
I1   1 1901 3201 4301 6301
I20 20 1920 3220 4320 6320
I33 33 1933 3233 4333 6333
I44 44 1944 3244 4344 6344
I64 64 1964 3264 4364 6364 
```

# android - 无法识别 Beats Solo 上的 MEDIA_BUTTON 触发器

> ID：11619033
> 
> 赞同：0
> 
> 时间：2012-07-23T19:18:51.997
> 
> 标签：android, media

我尝试了 Intent-receiver 和 onKeyDown 方法。两者都适用于大多数按钮，但 Beats Solo 耳机有多个按钮，并且仅检测到播放按钮，+ / - 按钮不会触发接收器，也不会触发 onKeyDown()。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:29:35.397

好的，我在 AOSP 技术规范中发现了问题。有很多没有为 Android 定义的 HID 交互。所以我会尝试用范围读出 HID 代码，并将这个 Key 映射到 Android。

[Android AOSP // 键盘](http://source.android.com/tech/input/keyboard-devices.html)

编辑：我将它们连接到示波器，同时按下菜单按钮清晰可见，+ 幅度非常小并且 - 几乎无法检测到。我附上了两个范围的屏幕截图。如果有人找到解决方案，请与我联系。

注意：屏幕截图显示菜单按钮按下了 3 次！

![+ 按钮按下](../Images/58a48485a5db9a4e44ef91148d911bb1.png)

![菜单按钮按下 - 3 次](../Images/6c21e1f22154710909928919fb91bcf6.png)

# java - Android AndEngine：java.lang.IllegalArgumentException：未找到 EGLConfig

> ID：11619038
> 
> 赞同：5
> 
> 时间：2012-07-23T19:19:20.280
> 
> 标签：java, android, andengine

我正在做一个非常简单的应用程序，一个基本的 hello world 来测试 AndEngine，我目前在运行它时遇到了一些问题：我按照 RealMayo 在他的视频中的建议设置了我的模拟器属性，它应该可以工作，但我得到了这个错误

```
07-23 13:10:23.014: E/AndroidRuntime(1485): java.lang.IllegalArgumentException: No        EGLConfig found! 
```

有谁遇到过同样的情况，或者知道怎么解决？

我几乎不想不使用我们的 AndEngine……因为一个简单的应用程序真的很难运行。

注意：我发现了一些帖子，但它们至少有 3 个月大，并且不久前修复了模拟器的使用。

总之谢谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T20:02:19.620

确保您的 AVD 至少为 Android 版本 4.0.3

看到这个线程[http://www.andengine.org/forums/gles2/api-level-t8230.html](http://www.andengine.org/forums/gles2/api-level-t8230.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-13T22:02:47.247

只是在上面的答案（答案＃1）中添加一个小补充：确保在创建**API 级别 15**（Android 4.0.3）的 AVD 时，导入的**AndEngine**库的项目目标也是使用 Android 4.0.3 构建的。验证：在eclipse项目中右键**AndEngine**库，选择“**属性**”，在打开的窗口左侧点击“ **Android** ”标签；在右窗格中验证是否选中了“Android 4.0.3”复选框。如果此处未列出“Android 4.0.3”选项，只需使用 Android SDK Manager 将其导入即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-29T18:49:53.793

Ravikumar11 关于 GPU 的评论帮助我解决了这个问题。

此外，我必须：

1.  使用我当前的 API (17) 和通用工具（非 API 特定的二进制下载）的所有选项更新 SDK

2.  正如 eclipse 在 SDK 更新后建议的那样，在 eclipse 中运行 Check for Updates 并且随后会加载一堆东西

从那里，我能够在模拟器中运行我的 AndEngine 应用程序

# image - Which configuration for "dynamic" images in GWT/GAE (cache, public folder...)?

> ID：11619049
> 
> 赞同：0
> 
> 时间：2012-07-23T19:20:21.910
> 
> 标签：image, google-app-engine, gwt, caching

First, I do not know what I should understand when we talk about "dynamic images"... but in my website (talk about movies - www.mananaseguro.com) I have to display the poster of each movie. So I think these images are considered dynamic images.

I do not know:

1.  If these images should be in the cache, and if yes what expiration date (GAE)?

2.  If these images should be in the public folder (GWT)?

3.  How to correctly refer to these images, I use `setUrl("./MananaSeguro/posters/p1.gif")` (GWT)?

4.  If my APPLICATION_SPRITE (that have all UI images) be in the cache (GAE)?

5.  I do not like to have all these images in `./client/resources/` directory. Is it possible to have them in the WAR directory to be more conformtable (if yes, how to configure it)?

6.  After that, I will use OBJECTIFY for my database, but the same kind of question occurs : Do you know in wich directory would I need to store these images (I will need to refer to their path inside the database)?

7.  I do not know GAE, but do you know if there is an interesting feature to store these images (Blobstore)?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T01:11:20.173

1.  Not sure if you're talking about Google memcache service or browser cache. The images should be stored in the browser cache (the required headers will be set by the image service when the images are served). The images should not be stored in the memcache service, that's for storing data that is fetched regularly and/or is expensive to fetch or calculate.

2.  The public (I assume you mean "war"?) folder is for static content, not dynamic. You'd need to re-deploy your application each time a movie was added if you stored movie images here.

3.  The [Images service](https://developers.google.com/appengine/docs/java/images/) generates serving URLs from blobstore keys. These are the URLs you pass to setUrl on the client.

4.  The application sprite image should go in the public folder as it's static.

5.  [This page](https://developers.google.com/appengine/docs/java/config/appconfig) describes how to specify which files/paths should be served statically from the WAR

6.  The dynamic images will be stored in the blobstore, so you just need to keep the blobstore key to retrieve them

7.  Yes the blobstore is what you're after. With the Images API doing a lot of the "heavy lifting" for you.

# java - Java：如何使用 compareTo 方法检查 2 个节点的顺序

> ID：11619056
> 
> 赞同：1
> 
> 时间：2012-07-23T19:20:42.730
> 
> 标签：java, list, comparable, compareto

我正在做一个编程任务，我可以使用一些帮助来理解 compareTo 方法。

作业的问题之一是将传入元素添加到列表中。如果列表已排序，我应该将新节点放在正确的位置。该列表可以按升序或降序排序。我想我可以通过将头节点与 (node.getNext()) 之后的节点进行比较来检查哪个是顺序，但我不确定。我不确定的代码行如下：

```
if(head.getContent().compareTo(tp.getContent())==1) 
```

head 是第一个节点，是一个泛型数据类型 T，它已经被添加了。tp 是 head.getNext() 只是为了节省空间，也是一个通用数据类型 T，因为我确信我会再次输入它。我没有在程序上写 compareTo 方法，因为教授告诉我只需调用 compareTo 方法来比较另一种泛型数据类型。另外，我不确定以下之间的区别：

```
extends Comparable<T> 
```

和

```
implements Comparable<T> 
```

但任务要求我使用第一个。

如果头节点元素是 1，下一个是 3，if 语句的输出是什么？对或错？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-23T19:24:43.343

基本上考虑 compareTo 的方法是*总是*在它的另一边放一个零，然后想象运算符位于两个参数之间。

```
A.compareTo(B) == 0; // A == B
A.compareTo(B) > 0; // A > B
A.compareTo(B) >= 0; // A >= B

//etc etc etc 
```

`>-1`这使您更容易阅读，并节省您在两年内试图弄清楚您的实际意思或某事的时间

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T19:29:52.573

要回答您问题的第二部分，`Comparable<T>`是一个定义单个方法的接口：`compareTo()`.

*   用于`extends Comparable<T>`创建向 Comparable 添加更多方法的子接口。

*   用于实现接口`implements Comparable<T>`的具体*类。*

如果教授希望您使用，`extends Comparable`那么也许他希望您为节点创建一个接口，如下所示：

```
public interface Node<T> extends Comparable<Node<?>> {

    T getContent();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T19:32:48.683

**1.**使用`java.lang.Comparable` **界面**。

```
public interface Comparable<T>{
    public int compareTo(){
    }
} 
```

**2.**您的**类需要实现 Comparable**，然后**每个元素将相互调用** `compareTo()` **以**对自己进行排序。

**3.**如果你**想以一种以上的方式排序**..然后使用`java.util.Comparator`, which use`compare()`方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T19:33:22.930

Comparable 接口只是说您必须有一种方法来比较两个对象 A 和 B，两者都是 T 类型，并且正如 Affe 所指出的，如果 A > B，您应该返回 1，如果 A 和 B 相等，则返回 0，并且 - 1 如果 A < B。请注意，equal 并不意味着 ==，就像 Java 中的 == 表示“这两个对象引用是否引用同一事物”，而不是“这两个对象是否本质上相同”。

但是，它没有定义您必须如何比较它们。无论哪个类实现它都必须这样做。您可以根据类型 T 中某个字段的值说 A 大于 B，或者您可以做一些更复杂的事情。例如，由于较小的整数值表示较高的优先级（1 < 2，但优先级一的问题高于优先级二的问题），因此比较的基础并不总是显而易见的，但在您的情况下，如果您有一系列内容为整数的节点，可以像比较它们的整数值一样比较两个节点；例如，如果存储在 A 中的整数值大于存储在 B 中的整数值，则 A > B 所以 A.compareTo(B) 返回 1。

至于使用扩展而不是实现的方向 - 好吧，当您使用泛型类型（例如 T）时，您使用扩展而不是实现。当你定义一个类时，implements 意味着你正在使用一个接口的方法头，而当你定义一个接口时，extends 意味着你正在使用这个接口作为一个超接口，很像一个类的超类。因此，如果您说 A 类实现了 Comparable，那么您是在说 A 必须有一个方法来将自己与实现 Comparable 的类进行比较。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-16T03:23:48.453

包装示例；

导入 java.util.*；

/** * * @author pradeep */ public class ComparableDemo {

```
public static void main(String args[]) {
    User u = new User();
    u.setName("pradeep");
    User u1 = new User();
    u1.setName("Ajeet");
    User u2 = new User();
    u2.setName("sameer");
    List<User> list = new ArrayList<User>();
    list.add(u);
    list.add(u1);
    list.add(u2);
    Collections.sort(list);
    for (User user : list) {
        System.out.println(user.getName());
    }
} 
```

}

类用户实现 Comparable {

```
private String name;

/**
 * @return the name
 */
public String getName() {
    return name;
}

/**
 * @param name the name to set
 */
public void setName(String name) {
    this.name = name;
}

@Override
public int compareTo(User n) {
    if (this.getName().compareTo(n.getName()) > 0) {
        return 1;
    }
    if (this.getName().compareTo(n.getName()) < 0) {
        return -1;
    }
    return 0;
} 
```

你[可以在这里了解更多关于java的信息！！](http://pkjavacode.wordpress.com)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T19:25:42.370

您应该查看定义 compareTo 方法的[可比较接口的文档。](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Comparable.html#compareTo%28java.lang.Object%29)然后您将知道返回值在列表排序顺序方面的含义。

Comparable 是一个接口。一个接口可以扩展另一个接口。一个类可以实现一个接口。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-19T03:47:52.113

```
public class UseComparetoMethod{

    static String arr[] = {"Ram", "Bharat", "Laxman", "Satrughna"};

    public static void main(String ar[]) {

        for (int i = 0; i < arr.length; i++) {
            for (int j = i + 1; j < arr.length; j++) {
                if (arr[j].compareTo(arr[i]) < 0) {
                    String t = arr[i];
                    arr[i] = arr[j];
                    arr[j] = t;
                }
            }
            System.out.println(arr[i]);
        }
    }
} 
```

[更完整的描述在这里](http://stringpool.com)

# actionscript-3 - AS3 - 使用 RTMFP / UDP 的 NetConnection 调用的可靠性？

> ID：11619057
> 
> 赞同：1
> 
> 时间：2012-07-23T19:20:55.283
> 
> 标签：actionscript-3, apache-flex, rtmfp

我的小程序使用 RTMFP 连接到 FMS4.5。我打开一个 NetConnection 并使用 NetStream 将视频从服务器流式传输到小程序。当我想在小程序或服务器上执行功能时，我使用 NetConnection.call();

我的问题是，AS3 是否在内部做任何事情来确保通过 UDP 进行调用，或者是否存在 UDP 丢失的风险，并且该函数在被调用时永远不会发生？

假设有时可能会丢失 UDP 流量，我让响应者重试 onStatus。这段代码看起来像是真的可以完成这项工作还是矫枉过正？

```
// This is code on FMS to call a function in the applet.

var networkRetryMax = 30;
if (something == true) doSomethingInApplet(client, 0);

function doSomethingInApplet (client, retryCount) {
    if (retryCount < networkRetryMax) {
        retryCount++;
        client.call("funcNameInApplet", new doSomethingInAppletResponder(client, retryCount), "foobar");
    }
    return;
}

function doSomethingInAppletResponder (client, retryCount) {
    this.onResult = function() {...}
    this.onStatus = function() {doSomethingInApplet(client, retryCount);}
    return;
} 
```

和...

```
// This is code in the applet.
// I return true to give it something to onResult or onStatus.

public static function funcNameInApplet(result:String):Boolean {
    trace("Result: " + result);
    return true;
} 
```

那么这会确保通过 UDP / RTMFP 调用该函数吗？

还是 .call() 可靠性在内部处理，这是不必要的？

# jquery - 通过滚动触发 div 动画

> ID：11619060
> 
> 赞同：0
> 
> 时间：2012-07-23T19:21:03.117
> 
> 标签：jquery, html, scroll, jquery-animate

我在一个水平滚动的网站上工作。该网站有一个大的背景图片（5000 像素宽）。现在，我的 div 包含当前显示的内容：隐藏。我知道如何将它们淡入，但是当我向右滚动时，我需要它们动态地进入视图，并且我想使用百分比来触发这些 div。

示例：用户开始向右滚动，一旦他们达到 20% 宽度，第一个 div 进入视图（从右侧）。然后用户继续滚动，直到他们达到 40% 的宽度，第一个 div 动画离开（向左），下一个 div 进入视图（从右侧）。

知道如何使用 jQuery 完成此任务吗？

这是一些代码......目前我有触发一些基本动画的链接。但没有手动滚动。哦，我正在使用这个名为 ScrollTo 的伟大插件来获取百分比。

HTML

```
<div id="eat" class="sections">
 <div class="content">
 </div>
</div>

<div id="see" class="sections">
 <div class="content">
 </div>
</div>

<div id="meet" class="sections">
 <div class="content">
 </div>
</div>

<div id="find" class="sections">
 <div class="content">
 </div>
</div>

<div id="background">
 <img src="images/test.jpg" alt="" id="bg" />
</div> 
```

CSS

```
.sections {position:absolute; right: 0; width:700px; height: 100%; min-height: 650px; z-index: 10; background-color: rgb(0,0,0);}
#drink, #eat, #see, #meet, #find {margin: 0px; padding: 0px;}
.content {margin: 20px; padding: 0px; outline: 1px solid red;}
h1 {color:#FFF; margin: 10em auto 0px auto;}
#background {height:103%; min-height: 670px; overflow-x: scroll; overflow-y: hidden; z-index: 9;}
#background img#bg {height: 100%; min-height: 650px; margin: 0px; padding: 0px;} 
```

JS

```
$("document").ready(function() {

$('#link1').click(function(){
    $('#background').scrollTo('20%', 1500);
        var div = $('#drink');
        div.animate({right: $(window).width()/2 - div.outerWidth()/2}, {duration: 1500, queue: false}, function() {
        });
        $('#logo, #eat, #see, #meet, #find').fadeOut(500);          
        $('#drink').fadeIn(500);
});

$('#link2').click(function(){
    $('#background').scrollTo('40%', 1500);
        var div = $('#eat');
        div.animate({right: $(window).width()/2 - div.outerWidth()/2}, {duration: 1500, queue: false}, function() {
        });
        $('#logo, #drink, #see, #meet, #find').fadeOut(500);
        $('#eat').fadeIn(500);
});

$('#link3').click(function(){
    $('#background').scrollTo('60%', 1500);
        var div = $('#see');
        div.animate({right: $(window).width()/2 - div.outerWidth()/2}, {duration: 1500, queue: false}, function() {
        });
        $('#logo, #drink, #eat, #meet, #find').fadeOut(500);                
        $('#see').fadeIn(500);
});

$('#link4').click(function(){
    $('#background').scrollTo('80%', 1500);
        var div = $('#meet');
        div.animate({right: $(window).width()/2 - div.outerWidth()/2}, {duration: 1500, queue: false}, function() {
        });
        $('#logo, #drink, #eat, #see, #find').fadeOut(500);
        $('#meet').fadeIn(500);
});

$('#link5').click(function(){
    $('#background').scrollTo('100%', 1500);
        var div = $('#find');
        div.animate({right: $(window).width()/2 - div.outerWidth()/2}, {duration: 1500, queue: false}, function() {
        });
        $('#logo, #drink, #eat, #see, #meet').fadeOut(500);
        $('#find').fadeIn(500);
});

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:40:27.887

您可以收听滚动事件，然后根据以下方式进行计算`scrollLeft()`：

```
$(document).on('scroll', function() {
  //do the math
  console.log( $(this).scrollLeft() );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:39:53.927

您可以在 jQuery 中监控[`scroll`](http://api.jquery.com/scroll/)事件。这是另一个答案，可让您了解如何跟踪左右滚动。[https://stackoverflow.com/a/4308435/53007](https://stackoverflow.com/a/4308435/53007)

# .net - 如何使用 PIMPL 从 C++/CLI 使用 C# 类

> ID：11619061
> 
> 赞同：0
> 
> 时间：2012-07-23T19:21:03.993
> 
> 标签：.net, interop, c++-cli, pimpl-idiom

我需要使用非托管应用程序中的 C# 类。假设我有以下 C# 类：

```
public class Managed
{
    public void Subcribe(int handler)
    {
        ....
    }
} 
```

然后我创建以下 C++/CLI 类：

```
/// Header
class Mixed
{
public:
    void Subscribe(int handler);
private:
    class MixedImp;
    MixedImp* m_implementation;
}

/// CPP
ref class MixedImp
{
public:
    void Subscribe(int handler)
    {
        m_accessor->Subscribe(handler);
    }
private:
    Managed^ m_accessor;
}

Mixed::Subcribe(int handler)
{
    m_implementation->Subcribe(handler)
} 
```

这样做时，我得到一个指向不完整类类型的指针是不允许的，所以我没有得到任何东西。我不是一个天生的非托管开发人员，所以如果问题有点愚蠢，请原谅我：\

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:26:40.180

```
#include <vcclr.h>

class Mixed
{
public:
  void Subscribe(int handler)
  {
    m_accessor->Subscribe(handler);
  }
private:
  gcroot<Managed^> m_accessor;
}; 
```

# python - Selenium Firefox webdriver 抛出 URLError

> ID：11619063
> 
> 赞同：1
> 
> 时间：2012-07-23T19:21:22.470
> 
> 标签：python, django, firefox, selenium, webdriver

我正在使用 selenium 的 python 版本对 django 进行一些测试，但是 firefox webdriver 在尝试启动新会话时抛出 URLError 异常。我要做的是：

```
browser = webdriver.Firefox() 
```

更新：然后我做了一些测试，然后我需要关闭它，因为当前测试已经完成，但是对于下一个我需要一个新的会话，所以我尝试打开一个新的

```
browser.close()
capabilities = webdriver.DesiredCapabilities()
browser.start_session(capabilities.FIREFOX) 
```

但随后它抛出了这个：

```
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/home/user/projects/myproject/local/lib/python2.7/site-packages/selenium/webdriver/remote/webdriver.py", line 104, in start_session
    'desiredCapabilities': desired_capabilities,
  File "/home/user/projects/myproject/local/lib/python2.7/site-packages/selenium/webdriver/remote/webdriver.py", line 153, in execute
    response = self.command_executor.execute(driver_command, params)
  File "/home/user/projects/myproject/local/lib/python2.7/site-packages/selenium/webdriver/remote/remote_connection.py", line 285, in execute
    return self._request(url, method=command_info[0], data=data)
  File "/home/user/projects/myproject/local/lib/python2.7/site-packages/selenium/webdriver/remote/remote_connection.py", line 326, in _request
    response = opener.open(request)
  File "/usr/lib/python2.7/urllib2.py", line 400, in open
    response = self._open(req, data)
  File "/usr/lib/python2.7/urllib2.py", line 418, in _open
    '_open', req)
  File "/usr/lib/python2.7/urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "/usr/lib/python2.7/urllib2.py", line 1207, in http_open
    return self.do_open(httplib.HTTPConnection, req)
  File "/usr/lib/python2.7/urllib2.py", line 1177, in do_open
    raise URLError(err)
URLError: <urlopen error [Errno 111] Connection refused> 
```

奇怪的是，同样的步骤在 Chrome 网络驱动程序上运行得很好。

有谁知道为什么会这样？提前感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T04:44:01.097

你不应该为此使用 start_session 。在第一行，您正在创建本地 firefox 浏览器的新实例。start_session 是远程 webdriver 的方法。所有你需要的是：

```
driver = webdriver.Firefox() #opens new Firefox browser locally
driver.quit() #kills the session
driver = webdriver.Firefox() #opens new Firefox browser locally 
```

由于您在这里重复代码，因此您的测试类中应该有类似的内容

```
class Test(unittest.Testcase):
    def setUp(self):
        self.driver = webdriver.Firefox()
    def tearDown(self):
        self.driver.quit()
    def test_something(self):
        #do some magic test here
    def test_something_else(self):
        #do some other stuff 
```

这样，浏览器将在每次测试开始时启动并在每次测试结束时关闭。

# c# - 针对相同版本的 .NET 框架的随机数种子

> ID：11619074
> 
> 赞同：3
> 
> 时间：2012-07-23T19:22:19.163
> 
> 标签：c#, random

如果我的应用程序以 .NET 框架 3.5 为目标，每个 CPU 是否会基于相同的种子返回相同的随机序列？我正在检查您是否得到与我相同的结果。我也希望我分发我的应用程序的每个人都能得到相同的结果。谢谢！

```
Random a = new Random(44448);
int i1 = a.Next(65, 90);
MessageBox.Show(i1.ToString()); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T19:26:14.400

对于特定的框架版本，由于固定的种子，您的程序每次运行时都应该给出相同的结果。

**但它可以在不同版本的 .NET 框架上给出不同的结果。**

例如，在 .NET 4.0 上，我得到`77`. 但是将代码放入[ideone](http://ideone.com/2HxoG)（使用 Mono）会给出`67`.

这种差异的原因是因为使用的精确算法`Random`不是规范的一部分。该[文档](http://msdn.microsoft.com/en-us/library/system.random.aspx)包含有关该算法的以下信息：

> Random 类的**当前**实现基于 Donald E. Knuth 的减法随机数生成器算法的修改版本。有关详细信息，请参阅 DE Knuth。“计算机编程的艺术，第 2 卷：半数值算法”。Addison-Wesley，马萨诸塞州雷丁，第二版，1981 年。
> 
> ...
> 
> 不保证Random 类中的随机数生成器的实现**在 .NET Framework 的主要版本中保持不变**。因此，您的应用程序代码不应假定相同的种子会在不同版本的 .NET Framework 中产生相同的伪随机序列。

强调我的。不能保证未来的实现将使用相同的算法。

# jsf-2 - 您如何在 PrimeFaces 中从 Javascript 调用 bean 方法

> ID：11619079
> 
> 赞同：1
> 
> 时间：2012-07-23T19:22:30.617
> 
> 标签：jsf-2, primefaces

您如何在 PrimeFaces 中从 Javascript 调用 bean 方法？

我有以下菜单项：

```
<p:menuitem id="toggleAlarms" icon="ui-icon-cancel" rendered="#{navigationBean.admin}" value="Cancel Alert" update=":alarmMessages"  action="#{alarmsBean.toggleAlertOff()}"/> 
```

当我在 UI 中单击该项目时，将调用该方法。

但是当我有这个元素时：

```
<p:messages id="alarmMessages">
    <script>
    jQuery('#alarmMessages').effect("pulsate", {times:5}, 1000 );
    jQuery('#alarmMessages').show();
    $('#alarmMessages').click(function() {
        jQuery('#toggleAlarms').click();
        alert('fool');
    })
    </script>
</p:messages> 
```

如果我单击 UI 上的消息对象，我可以看到带有傻瓜的警报消息。

但是，我从来没有看到 toggleAlarms.click() 方法调用了 alarmsBean.toggleAlertOff() 调用。

难道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:02:19.293

有机会`#{navigationBean.admin}`回来`false`吗？

因为如果是这样，您将无法在 DOM 中找到它...（也许更好地使用`style=display:none`）

此外，如果菜单项在表单内，您的选择器可能是错误的，请尝试在`jQuery('#someFormID\\:toggleAlarms').click();`您的网页上*查看源代码以查看菜单项的正确 id*

最后尝试使用 commandButton 进行相同的操作（不确定 menuitem 是否会按预期响应`.click()`）

**更新**

为了检查您的 jquery 选择器是否正确使用`alert($('#toggleAlarms').length)`而不是`alert('fool');`

# c++ - Eclipse C++ 项目不解析 LD_LIBRARY_PATH 包含变量

> ID：11619080
> 
> 赞同：0
> 
> 时间：2012-07-23T19:22:32.573
> 
> 标签：c++, eclipse, build, activemq, library-path

我有一个要导入的 C++ 项目，它正在使用 activemq 库。导入项目后，我将环境下的 LD_LIBRARY_PATH 变量设置为指向

```
/usr/local/include/activemq-cpp-3.4.2 
```

这允许项目查看 activemq 的所有库，并且我可以看到它显示在项目资源管理器的包含文件夹中。当我去构建项目时，我收到大量错误，以引用 /usr/local/include/activemq-cpp-3.4.2 中的包含/对象。有趣的是，二进制文件仍在生成中，但由于找不到库文件，大约有 80 个错误。二进制是如何制作的？另外，我必须对 LD_LIBRARY_PATH 环境变量做什么才能使项目正确包含这些文件？

我试过用

```
./eclipse -clean 
```

但这似乎没有帮助。欢迎任何想法，并提前感谢您！

编辑：

我在 Redhat 4.X 上使用带有 C++ 版本 4.1.2 的 Eclipse Juno

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:35:49.593

`LD_LIBRARY_PATH`不用于定位包含目录。它用于通知系统搜索*共享库*的目录列表：已编译的支持库，而不是用于 Eclipse 的 SDK。

您应该使用项目的属性添加到搜索的位置包括：[C++ General->Paths and Symbols->Includes](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.cdt.doc.user/tasks/cdt_t_proj_paths.htm)

如果您确实需要链接到其他库，也可以使用属性 - 不是`LD_LIBRARY_PATH`- ：[C++ General->Paths and Symbols->Library Paths](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.cdt.doc.user/reference/cdt_u_prop_general_pns_libpath.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T19:35:32.530

查找头文件不是 LD_LIBRARY_PATH 的目的。该环境变量是告诉操作系统从哪里开始寻找共享库 - * *.so*文件。*操作系统在准备执行*程序时会寻找那些。当*编译器*在源代码中遇到语句时，它会使用*包含路径*来搜索标头。`#include`

不要修改 LD_LIBRARY_PATH 以影响程序的编译。

[Eclipse 允许您在项目选项中设置包含路径。](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.cdt.doc.user/tasks/cdt_t_proj_paths.htm)

# jsf - Richfaces ModalPanel - 标题背景图片

> ID：11619084
> 
> 赞同：0
> 
> 时间：2012-07-23T19:23:09.707
> 
> 标签：jsf, richfaces

我需要在 modalPanel 标题中使用图像作为背景。我正在使用 JSF + Richfaces。

有可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:10:25.240

这应该可以通过将标题构面插入到模式面板中，其中包含您希望出现在面板中的内容。

```
<f:facet name="header">
   <div style="background: url("/bla/foo.png") repeat-x scroll 50% 50% #F36D21;" />
</f:facet> 
```

在内部，您可以声明一个带有重复背景图像的 div，作为构面标题中其他内容的背景。

# perl - 使用 Net::SSH::Perl 模块执行多个命令

> ID：11619088
> 
> 赞同：2
> 
> 时间：2012-07-23T19:23:18.663
> 
> 标签：perl, ssh, perl-module

我是这个模块的新手。我尝试了一个示例程序，它运行良好。但是，现在我想知道如何在这个程序中执行多个命令：

```
use Net::SSH::Perl;
my $hostname = "<<hostname>>";
my $username = "<<username>>";
my $password = "<<password>>";

my $cmd = 'mkdir script; cd script';

my $ssh = Net::SSH::Perl->new("$hostname", debug=>0);
$ssh->login("$username","$password");

my ($stdout,$stderr,$exit) = $ssh->cmd("$cmd");
print $stdout; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T07:36:52.280

您可以重复调用`cmd`。

您面临的问题可能是每个命令都在不同的 shell 中运行，并且由于副作用而运行的命令`cd`或`export`变得无用。

作为一种变通方法，您可以在所有命令前加上该`cd $dir`命令。例如：

```
my ($stdout1, $stderr1, $exit1) = $ssh->cmd("cd /$dir && $cmd1");
my ($stdout2, $stderr2, $exit2) = $ssh->cmd("cd /$dir && $cmd2");
... 
```

另一种选择是在远程主机上运行一个 shell 并与之对话，但这更困难且容易出错。

最后，Net::SSH::Perl 陈旧且无人维护，如今，[Net::SSH2](https://metacpan.org/module/Net%3a%3aSSH2)或[Net::OpenSSH](https://metacpan.org/module/Net%3a%3aOpenSSH)通常是更好的选择。

# c# - 查询无法执行

> ID：11619097
> 
> 赞同：1
> 
> 时间：2012-07-23T19:24:03.027
> 
> 标签：c#, entity-framework, linq-to-entities, repository

我有一种感觉，答案将是非常简单的，但由于某种原因，我一直遇到心理障碍。我正在处理一个项目，该项目使用 MVVM 模式，其中包括实体框架并实现了存储库。我创建了一个 DTO，它只包含 3 个属性，代表我拥有的某个实体中的字段。DTO 被命名`ParticularGroupDto`并且看起来超级简单：

```
public class ParticularGroupDto : BasicModelBase
{
    private string _groupName;
    private Guid _groupId;
    private Guid? _managerUserId;

    public string GroupName
    {
        get { return _groupName; }
        set { SetValueAndNotify(() => GroupName, ref _groupName, value); }
    }

    [Key]
    public Guid GroupId
    {
        get { return _groupId; }
        set { SetValueAndNotify(() => GroupId, ref _groupId, value); }
    }
    public Guid? ManagerUserId
    {
        get { return _managerUserId; }
        set { SetValueAndNotify(() => ManagerUserId, ref _managerUserId, value); }
    }
} 
```

在我的`Repository.Group`文件中，我有一个方法：

```
public ParticularGroupDto GetParticularGroup(Guid id)
{
    var manager = DevForce.CreatePrimeEntities();
    IEntityQuery<ParticularGroupDto> query = from k in manager.Groups
                                               where k.GroupId == id
                                               select new ParticularGroupDto
                                               {
                                                   GroupName = k.GroupName,
                                                   GroupId = k.GroupId,
                                                   ManagerUserId = k.ManagerUserId
                                               };

    IEnumerable<ParticularGroupDto> list = query.Execute();
    ParticularGroupDto firstParticularGroupDto = query.FirstOrDefault();
    return firstParticularGroupDto;
} 
```

我想简单地执行我得到的这个查询但是当它命中时`query.Execute();`我得到`Exception has been thrown by the target of an invocation.`

关于这里的问题有什么想法吗？非常感谢您看一看！

***UPDATE*** 我还需要提一下，这里传递“id”参数的方法如下：

```
 ParticularGroup = Repository.GetParticularGroup(CurrentEntity.GroupId); 
```

它只是简单地为已加载的 CurrentEntity 获取一个类似于 GroupId 的 guid（在本例中，它是来自 Group 实体的 GroupId）。我确实通过调试它来验证它是否被正确传递。

# ruby-on-rails - 无法通过 RVM 使用所需的 Ruby 版本启动 Rails 应用程序？

> ID：11619111
> 
> 赞同：0
> 
> 时间：2012-07-23T19:25:00.690
> 
> 标签：ruby-on-rails, ruby, passenger

我尝试在我的 VPS 上部署我的第一个 Rails 3.x 应用程序，但并没有真正成功。在我的 VPS 上，我使用 Apache 和 Passenger，但是当我启动应用程序时，我收到如下错误：

```
/var/www/my_domain_name/sample_app/config/initializers/wrap_parameters.rb:8: syntax error, unexpected ':', expecting kEND wrap_parameters format: [:json] ^ 
```

带有回溯：

```
0   /usr/lib64/ruby/gems/1.8/gems/activesupport-3.2.6/lib/active_support/dependencies.rb    245 in `load'
1   /usr/lib64/ruby/gems/1.8/gems/activesupport-3.2.6/lib/active_support/dependencies.rb    245 in `load'
2   /usr/lib64/ruby/gems/1.8/gems/activesupport-3.2.6/lib/active_support/dependencies.rb    236 in `load_dependency'
3   /usr/lib64/ruby/gems/1.8/gems/activesupport-3.2.6/lib/active_support/dependencies.rb    245 in `load'
4   /usr/lib64/ruby/gems/1.8/gems/railties-3.2.6/lib/rails/engine.rb    588 
5   /usr/lib64/ruby/gems/1.8/gems/railties-3.2.6/lib/rails/engine.rb    587 in `each'
6   /usr/lib64/ruby/gems/1.8/gems/railties-3.2.6/lib/rails/engine.rb    587 
7   /usr/lib64/ruby/gems/1.8/gems/railties-3.2.6/lib/rails/initializable.rb 30  in `instance_exec'
8   /usr/lib64/ruby/gems/1.8/gems/railties-3.2.6/lib/rails/initializable.rb 30  in `run'
9   /usr/lib64/ruby/gems/1.8/gems/railties-3.2.6/lib/rails/initializable.rb 55  in `run_initializers'
10  /usr/lib64/ruby/gems/1.8/gems/railties-3.2.6/lib/rails/initializable.rb 54  in `each'
11  /usr/lib64/ruby/gems/1.8/gems/railties-3.2.6/lib/rails/initializable.rb 54  in `run_initializers'
12  /usr/lib64/ruby/gems/1.8/gems/railties-3.2.6/lib/rails/application.rb   136 in `initialize!'
13  /usr/lib64/ruby/gems/1.8/gems/railties-3.2.6/lib/rails/railtie/configurable.rb  30  in `send'
14  /usr/lib64/ruby/gems/1.8/gems/railties-3.2.6/lib/rails/railtie/configurable.rb  30  in `method_missing'
15  /var/www/slovnyky.com/sample_app/config/environment.rb  5   
16  config.ru   3   in `require'
17  config.ru   3   
18  /usr/lib64/ruby/gems/1.8/gems/rack-1.4.1/lib/rack/builder.rb    51  in `instance_eval'
19  /usr/lib64/ruby/gems/1.8/gems/rack-1.4.1/lib/rack/builder.rb    51  in `initialize'
20  config.ru   1   in `new'
21  config.ru   1 
```

我发现问题可能出在错误的 Ruby 版本中，因为 1.8.7 无法正确识别某些哈希语法。但这很奇怪，因为它不应该使用预装的 Ruby 1.8.7，而是 1.9.3。在我的 CentOS 6.2 上，我安装了 RVM 和 Ruby 1.9.3，所以我有这个：

```
ruby -v
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux]
rvm list
rvm rubies
=* ruby-1.9.3-p194 [ x86_64 ]
# => - current
# =* - current && default
#  * - default 
```

所以很奇怪我得到：

```
sudo ruby -v
ruby 1.8.7 (2011-06-30 patchlevel 352) [x86_64-linux] 
```

这就是为什么我认为出于某种原因，Passenger 选择了错误的 Ruby 版本。当我尝试像这样启动服务器时：

```
rails server 
```

它可以工作，我可以通过 MY_IP:3000 访问我的应用程序而没有任何问题。

所以问题是：如何让Passenger 加载所需的Ruby 版本，而不是预装的？

这是重启后 Apache error_log 的尾部：

```
[Thu Jul 26 20:29:10 2012] [notice] caught SIGTERM, shutting down
[Thu Jul 26 20:29:11 2012] [notice] suEXEC mechanism enabled (wrapper: /usr/sbin/suexec)
[Thu Jul 26 20:29:11 2012] [notice] Digest: generating secret for digest authentication ...
[Thu Jul 26 20:29:11 2012] [notice] Digest: done
[Thu Jul 26 20:29:11 2012] [notice] Apache/2.2.15 (Unix) DAV/2 Phusion_Passenger/3.0.12 PHP/5.3.3 configured -- resuming normal operations 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:30:14.487

检查 apache 配置中的“ **PassengerRuby** ”选项。此选项允许指定要使用的 Ruby 解释器。来源：[配置 Phusion 乘客](http://www.modrails.com/documentation/Users%20guide%20Apache.html#_configuring_phusion_passenger)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:42:55.933

尝试启动生产服务器

```
bundle exec [command] 
```

它应该处理依赖关系。

# jsf - 如果用户未在 JSF 中登录，则重定向到登录页面

> ID：11619112
> 
> 赞同：3
> 
> 时间：2012-07-23T19:25:07.823
> 
> 标签：jsf, redirect, login

我正在开发一个 JSF 应用程序。这仅适用于授权用户。

因此，每当有人试图通过 URL 访问任何页面时，它都应该重定向到 Login 。

我使用 XHTML 作为前端。并使用 JSF 框架。

我将登录 Bean 存储在 Session 范围内。

不幸的是，我使用了 Servlet 和静态页面“response.sendRedirect()”。

提前致谢。

我认为一种解决方案是将所有页面放在 WEB-INF 中，但一个问题是我正在使用 resonse.sendRedirect() 并且我正在使用带有 facelets 的模板。

请给我建议。

* * *

文件夹中的我的登录页面

`"/Common/Login.xhtml"` 和一些页面

```
"/Admin/*.xhtml" 
```

和一些页面

```
`"Employee/*.ahtml"` 
```

如何为这 2 个文件夹 Admin 和 Employee 设置过滤器

我给了这样的但请求没有进入Filter Servlet

```
<filter-mapping>    
     <filter-name>LoginFilter</filter-name>   
      <url-pattern>/faces/Admin/*</url-pattern>    
     <url-pattern>/faces/Employee/*</url-pattern>           
<dispatcher>REQUEST</dispatcher>
       <dispatcher>FORWARD</dispatcher>  
   </filter-mapping>` 
```

如果我这样给

```
 <url-pattern>/*</url-pattern> 
```

它进入无限循环请为此问题提供解决方案

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T08:12:00.597

我解决了这个问题。我的过滤器映射

```
 <filter-mapping>
    <filter-name>LoginFilter</filter-name>
    <url-pattern>/*</url-pattern>

    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
</filter-mapping> 
```

和我的过滤器类

```
 public void doFilter(ServletRequest request, ServletResponse response,
        FilterChain chain)
        throws IOException, ServletException {
    System.out.println("Entered intop Login Filter");
    HttpServletRequest req = (HttpServletRequest) request;
    LoginBean login = (LoginBean) req.getSession().getAttribute("login");
    String path = req.getRequestURI().substring(req.getContextPath().length());
    System.out.println("path:" + path);

    if (path.contains("/Admin/") || path.contains("/Employee/")) {
        if (login != null) {
            if (login.getUsername() != null && !login.getUsername().equals("")) {
                chain.doFilter(request, response);
            } else {
                HttpServletResponse res = (HttpServletResponse) response;
                res.sendRedirect("/EMS2/faces/Html/Common/Login.xhtml");
            }
        } else {
            HttpServletResponse res = (HttpServletResponse) response;
            res.sendRedirect("/EMS2/faces/Html/Common/Login.xhtml");
        }

    } else {
        chain.doFilter(request, response);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T19:57:17.137

我决定处理同样问题的方法是使用与 Spring 和 Spring Security 3 集成的 JSF2。一个很好的教程和示例项目可以在这里找到如何适当地做到这一点。

[http://technology-for-human.blogspot.com/2010/12/jsf-2-with-spring-3-basics-part-1-of-2.html](http://technology-for-human.blogspot.com/2010/12/jsf-2-with-spring-3-basics-part-1-of-2.html)

如果您不希望将 Spring 集成到您的项目中，那么我认为最好的方法是实现一个 servlet 过滤器，该过滤器将在 HTTP 请求到达 FacesServlet 之前对其进行授权或拒绝。

```
 <filter>
    <filter-name>securityFilter</filter-name>
    <filter-class>org.company.filters.SecurityFilter</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>securityFilter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
  </filter-mapping> 
```

任何存在的 SessionScoped bean 都可以作为 HttpSession 的属性找到，因此您将能够以这种方式从 SessionScoped 托管 bean 中检索登录用户。

此时授权应该很简单。如果登录的用户不应查看此页面，则将用户重定向到未经授权的页面。

# svn - svn冲突指向空目录/文件

> ID：11619118
> 
> 赞同：0
> 
> 时间：2012-07-23T19:25:24.447
> 
> 标签：svn, tree-conflict

我摧毁了我的颠覆树，我不知道是什么原因造成的。前段时间我`svn ignore`在一些文件上使用过，但随着项目的重新审视，我决定`svn ignore`通过使用`svn propdel svn:ignore -R`. 这消除了我所做的所有忽略，但我认为这不会是一个问题。

但是，当我现在尝试更新时，我收到以下消息：

`Conflict for property 'svn:ignore' discovered on ''.`

空单引号是什么意思？此外，subversion 似乎很难找到我的工作目录，因为`!M .`当我运行 svn up 时，我在输出的顶部。最后，对我来说没有意义的是 svn 如果找不到我的目录，它如何准确显示我修改过的文件？（也许我误解了这`!M`条消息，这不意味着路径丢失了吗？）

# android - Android：天文台计数真的很快

> ID：11619119
> 
> 赞同：0
> 
> 时间：2012-07-23T19:25:25.357
> 
> 标签：android, chronometer

这是我的代码：

```
public class BFragment extends SherlockFragment {

private Button start;
private View v;
private Button reset;
private Button pause;
private TextView hourTextView;
private TextView minTextView;
private TextView secTextView;
private int secondCounter;
private int minuteCounter;
private int hourCounter;
private Thread timerThread;
private boolean continueThread = false;
private boolean isRunning = false;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // Inflate the layout for this fragment

    v = inflater.inflate(R.layout.activity_bfragment, container, false);
    start = (Button) v.findViewById(R.id.start); 
    pause = (Button) v.findViewById(R.id.pause);
    reset = (Button) v.findViewById(R.id.reset);
    hourTextView = (TextView) v.findViewById(R.id.hh);
    minTextView = (TextView) v.findViewById(R.id.mm);
    secTextView = (TextView) v.findViewById(R.id.ss);

    start.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            if (isRunning) {

            } else {
                continueThread = true;
                timeUpdate();   
                isRunning = true;
                isRunning = true;
            }
        }
    });

    pause.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            continueThread = false;
            isRunning = false;
            start.setText("Resume");
            isRunning = false;
        }
    });

    reset.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            hourTextView.setText("00");
            minTextView.setText("00");
            secTextView.setText("00");
            hourCounter = 0;
            secondCounter = 0;
            minuteCounter = 0;
            continueThread = false;
            isRunning = false;
        }
    });

    return v;

}

final Handler mHandlerUpdateSec = new Handler();
final Runnable mUpdateSec = new Runnable() {
    public void run() {
        String temp = "" + secondCounter;
        System.out.println("Temp second counter length: " + temp.length());
        if(temp.length() == 1)
            secTextView.setText("0" + secondCounter);
        else
            secTextView.setText("" + secondCounter);
    }
};
final Handler mHandlerUpdateMinute = new Handler();
final Runnable mUpdateMinute= new Runnable() {
    public void run() {
        String temp = "" + minuteCounter;
        System.out.println("Temp second counter length: " + temp.length());
        if(temp.length() == 1)
            minTextView.setText("0" + minuteCounter);
        else
            minTextView.setText("" + minuteCounter);
    }
};
final Handler mHandlerUpdateHour = new Handler();
final Runnable mUpdateHour = new Runnable() {
    public void run() {
        String temp = "" + hourCounter;
        System.out.println("Temp second counter length: " + temp.length());
        if(temp.length() == 1)
            hourTextView.setText("0" + hourCounter);
        else
            hourTextView.setText("" + hourCounter);
    }
};

public void timeUpdate()
{
    timerThread = new Thread(new Runnable() {

        public void run() {
            while(continueThread){
                Date newDate = new Date();
                Date date = new Date();
                System.out.println(newDate.getTime() - date.getTime());
                if(true){
                    secondCounter = secondCounter+1;
                    mHandlerUpdateSec.post(mUpdateSec);
                    System.out.println("Inside the Theread ..."+secondCounter);
                    if(secondCounter > 59){
                        minuteCounter = minuteCounter + 1;
                        mHandlerUpdateMinute.post(mUpdateMinute);
                        secondCounter = 0;
                        if(minuteCounter > 59){
                            hourCounter = hourCounter + 1;
                            mHandlerUpdateHour.post(mUpdateHour);
                            minuteCounter = 0;
                        }
                    }
            }
        }
    });
    timerThread.start();
}
} 
```

如果用户真的很快（几乎一起）按下开始/暂停，那么计时码表会快速计数并跳过几秒钟......它不会停止，直到按下暂停然后它再次正常工作？为什么会这样以及如何预防？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:47:08.940

对于初学者来说，您的代码没有任何延迟。你`timeUpdate()`基本上是这样做的：

```
while(continueThread){
    secondCounter = secondCounter+1;
    // ... display the counter ...
} 
```

您需要做一些事情来将您的应用程序与实时时钟联系起来。一种简单的方法是计算每次通过循环的经过时间并显示出来。一个简单的优化是在你的代码中进行一些检查，看看事情是否发生了变化。为了更高效，您可以让您的线程 sleep 而不是[spin](http://en.wikipedia.org/wiki/Spinlock)。

不过，我想建议，不要专注于每次计数器更改时重新绘制显示，而是将其转过来。等待并且什么也不做，直到从人类的角度来说，是时候让您的用户看到更新了。（这可能是每秒，每十分之一秒，等等。）当是时候向您的用户展示新的更新时，请查看您的时间戳，测量经过的时间，并将其写入您的显示器。

# c# - 在ashx页面中分配隐藏字段值？

> ID：11619120
> 
> 赞同：2
> 
> 时间：2012-07-23T19:25:25.707
> 
> 标签：c#, filehandler

我需要将文件名变量分配给 ashx 页面中的隐藏字段值，如何将值分配给 ashx 页面中的隐藏字段？

.ashx 页面

```
public void ProcessRequest(HttpContext context)
{
    var file = context.Request.Files[0];
  //here i need to pass this file name in hidden field value
} 
```

这是存在隐藏文件的 aspx 页面

```
 <asp:HiddenField ID="hdnFileName" runat="server"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:32:05.337

（除非我错了..） ASHX 是一个网络服务，而不是一些代码隐藏。如果要获取该字段的值，则需要将表单发布到 .ASHX 文件的相应 URL，或者使用 AJAX。

如果你想返回数据，我建议你使用 AJAX。

编辑：根据[MSDN](http://msdn.microsoft.com/en-us/library/bb398986.aspx)，我的说法是正确的。.ASHX 适用于没有 UI 的 HttpHandler。

> 通用 Web 处理程序 (*.ashx) 所有没有 UI 且包含 @WebHandler 指令的 Web 处理程序的默认 HTTP 处理程序。

如何使用 AJAX 发布的示例：

```
$(function(){
    $.ajax({
            url:'location of your ashx goes here',
            type: 'post',
            success: function(data){
            $("#hdnFileName").val(data);
     }
}; 
```

您的 ASHX 将返回数据：

```
public string ProcessRequest(HttpContext context)
{
    var file = context.Request.Files[0];
  //here i need to pass this file name in hidden field value
    return fileName;
} 
```

注意：有关使用 AJAX 上传文件的信息，另请参阅[https://stackoverflow.com/a/8758614/690178](https://stackoverflow.com/a/8758614/690178)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:58:06.547

ASHX 只是一个原始的 ASP.NET Web 处理程序文件。这意味着您实现了一个 IHttpHandler 接口，该接口定义了一个属性`IsReusable`和一个方法`ProcessRequest`，该方法可以获取在 HttpContext 参数中传递的 HttpRequest 和 HttpReponse。一个典型的 ASHX 实现看起来像这样：

```
public class Handler : IHttpHandler
{
    public void ProcessRequest (HttpContext context) 
    {
        // Access the raw HttpRequest and HttpResponse via context
    }

    public bool IsReusable 
    {
        get 
        {
            return false; // Define if ASP.NET may reuse instance for subsequent requests
        }
    }
} 
```

因此，您不会在丢失任何 HTML 或视图抽象的处理程序文件中创建隐藏字段。您可以做的是将原始 HTML 输出作为字符串写入响应，并通过以下方式声明隐藏字段

```
<input type="hidden" name="somename" /> 
```

我不建议在 ASHX 处理程序中执行此操作。如果您需要 HTML 输出，请查看 ASPX Pages 或 ASCX Controls。

# c# - 函数中的返回值

> ID：11619121
> 
> 赞同：3
> 
> 时间：2012-07-23T19:25:26.603
> 
> 标签：c#, linq, function, return-value

我有 2 张桌子：`Customer`和`Customer_Address`

我有一个功能：

```
public IEnumerable<Customer_Address> ReadAddressForCustomer(int CustomerID)
{
    ProjectServiceForCustomerDataContext DB = new ProjectServiceForCustomerDataContext();
    var CA = (from C in DB.Customer_Addresses
              join cust in DB.Customers
              on C.CustomerID equals cust.ID
              where C.CustomerID == CustomerID
              select new
              {
                  CustomerName=cust.Name,
                  CustomerAddress=C.Address,
                  CustomerTel=C.Telephone
              }).ToList();
    return CA;
} 
```

但是 CA 不是 a`IEnumerable(Customer_Address)`因为它有`Customer`字段 ( `cust.Name`)

我怎么解决这个问题 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T19:30:10.417

你返回一个匿名类型，这就是为什么它不是`IEnumerable<Customer_Address>`

尝试使用类似的东西

```
var CA = (from C in DB.Customer_Addresses
                  join cust in DB.Customers
                  on C.CustomerID equals cust.ID
                  where C.CustomerID == CustomerID
                  select new Customer_Address( // <--- HERE
                      cust.Name,
                      C.Address,
                      C.Telephone
                  ).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T19:29:06.430

创建一个封装所需数据的新具体类型：

```
class CustomerInfo   // new class
{
    private string CustomerName;
    private string CustomerAddress;
    private string CustomerTel;
}

public IEnumerable<CustomerInfo> ReadAddressForCustomer(int CustomerID)  //return new class
{
    ProjectServiceForCustomerDataContext DB = new ProjectServiceForCustomerDataContext();
    var CA =  from C in DB.Customer_Addresses
              join cust in DB.Customers
              on C.CustomerID equals cust.ID
              where C.CustomerID == CustomerID
              select new CustomerInfo    // instantiate new concrete type
              {
                  CustomerName=cust.Name,
                  CustomerAddress=C.Address,
                  CustomerTel=C.Telephone
              }   // don't call ToList anymore
    return CA;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T07:58:44.023

@Daniel DiPaolo 建议的解决方案很好，他在其中声明了一个轻量级来保存您想要的唯一属性，但我认为使用属性而不是字段更好，如下所示：

```
class CustomerInfo   // new class
{
    public string CustomerName{get;set;}
    public string CustomerAddress{get;set;}
    public string CustomerTel{get;set;}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T19:30:57.567

你也可以投

```
Enumerable<CustomerInfo> CA =
                fruits.Cast<CustomerInfo>().(from C in DB.Customer_Addresses
                  join cust in DB.Customers
                  on C.CustomerID equals cust.ID
                  where C.CustomerID == CustomerID
                  select new
                  {
                      CustomerName=cust.Name,
                      CustomerAddress=C.Address,
                      CustomerTel=C.Telephone
                  }
                  );
return CA; 
```

# c++ - 通过模板类的基础进行依赖于参数的查找

> ID：11619122
> 
> 赞同：8
> 
> 时间：2012-07-23T19:25:29.827
> 
> 标签：c++, templates, gcc, clang, argument-dependent-lookup

我有一个从命名空间中`NB::B<T>`的非模板类派生的模板类`NA::A`。是在其模板参数的实例上`act<T>`调用函数的模板函数。`add_ref`具体来说，`act<NB::B<int>>`想使用 ADL查找`add_ref`定义在 's base 的命名空间中。`NB::B`完整的例子如下：

```
template<class T>
void act() {
  T* p = 0;
  add_ref(p); // the failing line
}

namespace NA
{
  struct A { };

  // I want ADL to find this:
  void add_ref(A* p) {
  }
}

namespace NB
{
  // template class with non-template base
  template <class T>
  struct B: NA::A { };

  typedef B<int> Bi;

  // using NA::add_ref; // fixes the problem
}

int main()
{
  act<NB::Bi>();
} 
```

`gcc`这在（4.7.0）中编译得很好。并且在`Comeau`网上。但是`clang`（3.1）失败了：

```
a.cpp:4:3: error: use of undeclared identifier 'add_ref' 
```

同时，标准中写道：

> 3.4.2/2 …</p>
> 
> — 如果 T 是模板 ID，则其关联的命名空间和类是定义模板的命名空间；对于成员模板，成员模板的类；与为模板类型参数（不包括模板模板参数）提供的模板参数的类型相关联的命名空间和类；定义任何模板模板参数的命名空间；以及定义用作模板模板参数的任何成员模板的类。

令人惊讶的是，模板的基础并未列为关联命名空间的路径。因此`clang`的行为似乎是正确的。并且正在接受不正确的程序`Comeau`。`gcc`

同时，参数命名空间中的 '`3.4.2/3`声明`using`无效：

> 在考虑关联命名空间时，查找与将关联命名空间用作限定符 (3.4.3.2) 时执行的查找相同，除了：
> 
> — 相关命名空间中的任何 using 指令都将被忽略。

但是当我取消注释时，该`using NA::add_ref`行`clang`很高兴编译测试。

把我的例子放到实际的角度来看，你可以认为那`act`是一个方法`boost::intrusive_ptr`，`add_ref(A*)`曾经`intrusive_ptr_add_ref(CBase*)`和`B`曾经是一些模板，从 base 派生`CBase`。

关于这个我有几个问题：

1.  拒绝我`clang`的测试程序`gcc`并且`Comeau`不遵循标准是正确的吗？

2.  标准指定这种不切实际的行为（不允许模板类基作为关联的命名空间）是否有原因？

3.  `clang`基于以下原因接受我的测试程序与`using NA::add_ref`指令是错误的`3.4.2/3`吗？

4.  我应该报告错误吗？:)

PS 我已阅读[clang Language Compatibility FAQ](http://clang.llvm.org/compatibility.html)并没有在那里找到答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T19:37:52.447

从 n3337 开始，它基本上是 C++11，有少量编辑更改，3.4.2/2 内容如下：

> 对于函数调用中的每个参数类型 T [...] 命名空间和类的集合按以下方式确定：[...]
> 
> *   如果 T 是类类型（包括联合），则其关联的类是：类本身；它所属的类别(如有的话)；及其**直接和间接基类**。其关联名称空间是其关联类是其成员的名称空间。**此外**，如果 T 是类模板特化，...

然后它继续使用您在问题中发布的基本相同的报价。这里的重要区别是**此外**，这意味着您引用的列表（我省略了）是除了已经提到的命名空间之外，还包括基类所属的命名空间。

1.  gcc和comeau是对的，clang++拒绝代码是错的。

2.  < 不适用 >

3.  Clang++ 在没有`using NA::add_ref`.

4.  ~~是的，您可能应该报告一个错误。~~它似乎已经被报告和修复。

# cakephp - 我在安装 cakephp 时遇到问题

> ID：11619127
> 
> 赞同：0
> 
> 时间：2012-07-23T19:25:37.197
> 
> 标签：cakephp

我刚刚在本地主机上安装了 CakePHP 2.2.10。我在文档中进行了所有必要的更改。我创建了数据库文件，更改了安全盐和密码种子等。但是当我通过 WAMP 访问 CakePhp 文件夹时，我收到以下消息：

您的服务器上未正确配置 URL 重写。

我从文档中做了一些创建博客教程，当我转到 localhost/cakephp2/Posts/ 时，浏览器显示：“在此服务器上找不到请求的 URL /cakephp2/Posts/。”

对我应该做什么有任何见解吗？我真的习惯了 codeIgniter，但是我听说过很多关于 cake 的好东西，并想尝试一下。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:50:28.407

这很可能是因为您没有`mod_rewrite`启用。通过检查下图确保它已启用。

![在此处输入图像描述](../Images/7f2adf759f5588ef2d0c3aae313c5c76.png)

[来源](http://www.tutorialjinni.com/2011/08/wamp-server-localhost-url-rewriting.html)

# scala - 在 Scala 中，当内部对象扩展封闭类时会发生什么？

> ID：11619128
> 
> 赞同：5
> 
> 时间：2012-07-23T19:25:37.550
> 
> 标签：scala

我在 Scala 中编写了一个矩阵类，我认为实现转置操作的最佳方法是只返回一个包含所有“转置”操作的接口。因此，如果`matrix.apply(i, j)`返回第 (i, j) 个元素，则 matrix.transpose 返回一个接口（但不是数据的副本），其中包含一个返回 matrix(j, i) 的 apply 方法。我写的界面有点像这样（我真正写的更混乱）：

```
abstract class Matrix {
   def apply(i : Int, j : Int) : Double
   //other matrixy operations
   private def outer = this //so the inner can see the enclosing instance
   object TransposedInterface extends Matrix {
      def apply(i :Int, j : Int) = outer(j, i)
   }
} 
```

我猜这很可爱，但现在`TransposedInterface`它里面还有一个对象，叫做`TransposedInterface`，等等，递归地，这一切都在哪里结束？

我在解释器中尝试了以下内容：

```
class Outer(val i : Int) {
   object Inner extends Outer(i + 1)
}

val o = new Outer(1)
o.Inner.Inner.Inner.Inner.i 
```

我猜它应该运行并评估为5。

那么究竟发生了什么？内部对象是否懒惰地评估？不立即使用时是否会进行垃圾收集，然后在下次调用 external.Inner 时再次实例化？是我没想到的巫毒吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T19:36:46.910

它是惰性实例化的，并且在收集外部类之前不会被垃圾收集，因为外部类包含对它的引用。

一般来说，`object Foo { ... }`行为非常像`lazy val Foo = { ... }`. 由于对象在有效时不能为空，但肯定是对象，因此在这种情况下它们更有效（更快地检查是否存在——只查看字段是否为空），但存在需要第二个`.class`文件的缺点。（你通常不关心有多少类文件，所以这可能没什么大不了的。）

# node.js - 使用 Node fs.createWriteStream 生成日志，但它正在写入重复项

> ID：11619130
> 
> 赞同：1
> 
> 时间：2012-07-23T19:25:38.273
> 
> 标签：node.js, express

我正在使用带有 express 框架的 Node 0.6.19。我在日志记录中看到了一些奇怪的事情。`createWriteStream`首先，我为 ( ) 传入请求创建了一个日志。我使用 express 语法通过以下方式将请求通过管道传输到日志中：

```
var logFile = fs.createWriteStream('log.log', {
    "flags": "a"
});

app.configure(function() {
    app.use(express.logger({
      stream: logFile
    }));
    app.use(express.bodyParser());
    app.use(express.cookieParser());
    app.use(express.methodOverride());
    return app.use(app.router);
}); 
```

当我点击快速路线时，似乎有传入请求的重复，例如：

```
app.get('/', routes.index); 
```

其次，在我的一些路线上，我在数据库中进行用户查找，并通过相同的`createWriteStream`方法将用户 ID 记录到另一个文件中。当我做一个

```
logFile.write(user_id + 'n'); 
```

我得到重复的user_id。查询本身没有问题，它告诉我该`createWriteStream`方法正在发生一些事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:32:48.887

如果使用浏览器调用您的应用程序，您可能会因为`favicon`请求而获得重复的输出。[您可以通过使用fiddler](http://www.fiddler2.com/fiddler2/)或其他 HTTP 调试代理拦截请求来轻松验证这一点，具体取决于您的操作系统。

# c# - C# 错误帮助 - “ExecuteNonQuery：CommandText 属性尚未初始化”

> ID：11619133
> 
> 赞同：1
> 
> 时间：2012-07-23T19:25:45.620
> 
> 标签：c#, visual-studio-2010

我无法调用我的非查询。当我运行它时，我收到以下错误 - “ExecuteNonQuery：CommandText 属性尚未初始化”

```
 //delete from the database
        OdbcCommand cmdCommand = new OdbcCommand(tSQL, Global.gADOConnection);
        tSQL = "Delete from SEARCH_CRITERIA where CRITERIA_ID = " + iCriteriaID;
        Global.gADOConnection.Open();
        cmdCommand.ExecuteNonQuery();
        Global.gADOConnection.Close(); 
```

我不确定为什么我会继续收到此错误。任何人都可以帮助我吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T19:27:28.513

在将其传递给构造函数`tSQL` *之后*，您正在设置值。`OdbcCommand`我怀疑这不是你想要的。尝试：

```
string tSQL = "Delete from SEARCH_CRITERIA where CRITERIA_ID = " + iCriteriaID;
using (OdbcCommand cmdCommand = new OdbcCommand(tSQL, Global.gADOConnection))
{
    Global.gADOConnection.Open();
    cmdCommand.ExecuteNonQuery();
    Global.gADOConnection.Close();
} 
```

然而：

*   我强烈建议您使用参数化 SQL，而不是将值嵌入 SQL 本身
*   请注意我是如何在`using`最后使用语句来处理命令的
*   我还强烈建议您*不要*将全局变量用于数据库连接。每次需要数据库操作时创建一个新连接，并在最后处理它：

    ```
     using (OdbcConnection connection = new OdbcConnection(...))
     {
         connection.Open();
         using (OdbcCommand command = ...)
         {
             command.ExecuteNonQuery();
         }
     } 
    ```

    让连接池处理在底层网络连接方面提高效率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T19:27:46.523

tSQL 需要放在 cmdCommand 前面：

```
tSQL = "Delete from SEARCH_CRITERIA where CRITERIA_ID = " + iCriteriaID;
OdbcCommand cmdCommand = new OdbcCommand(tSQL, Global.gADOConnection); 
```

你真的应该使用参数来避免sql注入。

```
tSQL = "Delete from SEARCH_CRITERIA where CRITERIA_ID = @CriteriaID";
OdbcCommand cmdCommand = new OdbcCommand(tSQL, Global.gADOConnection);
cmdCommand.Parameters.AddWithValue("@CriteriaID", iCriteriaID); 
```

接下来要考虑的是`using`自动关闭资源的括号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T19:27:53.797

您正在使用`null`命令文本初始化命令。在创建命令之前尝试分配 tSQL。

```
var tSQL = "Delete from SEARCH_CRITERIA where CRITERIA_ID = " + iCriteriaID;
OdbcCommand cmdCommand = new OdbcCommand(tSQL, Global.gADOConnection);
Global.gADOConnection.Open();
cmdCommand.ExecuteNonQuery();
Global.gADOConnection.Close(); 
```

# python - 有没有办法在python中使用字典来打印2个输出：一个作为整个令牌的字符串，一个作为数字

> ID：11619135
> 
> 赞同：2
> 
> 时间：2012-07-23T19:26:05.293
> 
> 标签：python, dictionary, token

所以我有大约一千行的文件，如下所示：

```
COADREAD    ZNF271  Missense_Mutation   TCGA-AA-3947    Q14591  A177T 
COADREAD    ZNF271  Missense_Mutation   TCGA-AA-A00N    Q14591  I26T  
COADREAD    ZNF271  Missense_Mutation   TCGA-AG-A002    Q14591  M418T 
```

我有代码查找 id 的第 5 列并获取两个字母之间的数字。

有没有办法我也可以在第 5 列（或第 6 列标记）中的 id 之后获取整个标记。

我想抓住那个令牌，这样我就可以把它写到另一个文件上。

这是我到目前为止所拥有的（这段代码会给我数字，但是有没有办法让数字和该令牌的整个字符串打印到输出文件）：例如，如果我调用lookup [Q14591]它给了我 ['177','26',418] 但我也想要 A177T I26T 和 M418T

```
lookup = defaultdict(list)
mydata = open('summaryfile.txt')
for line in csv.reader(mydata, delimiter='\t'):
    code = re.match('[a-z](\d+)[a-z]', line[-1], re.I)
    if code: 
        lookup[line[-2]].append(code.group(1)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:30:39.580

使用正则表达式时，`group(0)`应包含整个匹配的字符串。所以在你的情况下：

```
code.group(0) 
```

应该包含整个令牌。因此，如果您将代码修改为如下所示：

```
lookup = defaultdict(list)
wholelookup = defaultdict(list)

mydata = open('summaryfile.txt')
for line in csv.reader(mydata, delimiter='\t'):
    code = re.match('[a-z](\d+)[a-z]', line[-1], re.I)
    if code: 
        lookup[line[-2]].append(code.group(1))
        wholelookup[line[-2]].append(code.group(0)) 
```

然后你可以像这样访问整个令牌：

```
wholelookup['Q14591'] 
```

或像这样的子令牌：

```
lookup['Q14591'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:32:25.487

当然。像这样：替换这一行：

```
lookup[line[-2]].append(code.group(1)) 
```

有了这个：

```
lookup[line[-2]].append((code.group(1),line[-1])) 
```

[你已经有了你要问的部分......你正在正则表达式中使用它！]

至于您现在如何访问它：在您拥有之前：

```
lookup[Q14591] == ['177','26',418] 
```

现在：查找[Q14591] == [('177', 'A177T'), ('26', 'I26T'), ('418',' 'A177T')]

...所以查找[Q14591][0] == '177'，并且查找[Q14591][1] == 'A177T'

# uitableview - 从 UITableView 加载单元格的问题

> ID：11619136
> 
> 赞同：0
> 
> 时间：2012-07-23T19:26:05.597
> 
> 标签：uitableview, view, split, autosize

我正在开发一个包含 UITableView 中对象列表的应用程序。当我处于使用拆分视图（左侧的 TableView，右侧的 View）的横向模式下时会出现问题。当我选择一个对象时，它会加载视图的中间而不是顶部。当我从表格视图中选择一个新对象时，我希望视图从顶部显示。

似乎它与自动调整大小有关。当我在我的视图中删除文本视图上的自动调整大小（顶部的 l---l）时，它可以工作，但随后我的窗口变得一团糟。有人知道解决方案吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T08:31:54.550

我认为您应该设置`UIViewAutoresizingFlexibleTopMargin`为该视图并设置`view.frame.origin.y = 10`. 它必须解决问题

# cocos2d-iphone - cocos2d 中的小插图

> ID：11619137
> 
> 赞同：0
> 
> 时间：2012-07-23T19:26:06.040
> 
> 标签：cocos2d-iphone, textures, vignette

我想在 cocos2d 中创建晕影效果。我不确定我该怎么做。我想过只使用一张图片，但高分辨率的全屏图片（适用于 iPad）会占用大量内存。接下来，我想到了使用 CCRenderTexture。我以前从未使用过它，但我目前正在研究它。您对实现这一目标有什么建议？

我想要类似的东西（注意图像角落和边缘附近的黑色）

![在此处输入图像描述](../Images/8a711a59d8f15d903e305fbe1b6aac6a.png)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:27:06.237

您可以找到或编写像素着色器来执行此操作，但我没有经验可以为您提供建议。谷歌搜索*渐晕像素着色器*会产生一些样本，这些样本可能会给您一个起点。

或者，为 2048 x 1536 制作晕影效果所需的图像不会占用太多内存，以至于我无法控制它。试一试。

# iphone - 切换智能保护套的 iPad 保护套锁定/解锁设置

> ID：11619139
> 
> 赞同：0
> 
> 时间：2012-07-23T19:26:14.960
> 
> 标签：iphone, objective-c, ios, cocoa, ipad

有谁知道以编程方式设置 iPad 保护套锁定/解锁切换的方法，当智能保护套连接到 iPad 时会显示该开关？

我的目标是让 iPad 在应用程序运行时不会进入待机模式。我发现我可以使用禁用自动锁定功能

`[[ UIApplication sharedApplication ] setIdleTimerDisabled: YES ]`

但是，如果 iPad 配备了智能保护盖，关闭保护盖将使 iPad 进入待机模式。

这是针对企业应用程序的，因此无需担心应用商店的批准（未记录的 API 很好）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:31:26.547

AppStore 应用程序无权更改操作系统的用户设置，至少通过 Apple 允许/公开的任何方法。如果您提交到 AppStore，我猜该应用程序将被拒绝。

# html - 是否可以在 Twitter Bootstrap 中没有左侧边栏的流体宽度页面？

> ID：11619141
> 
> 赞同：0
> 
> 时间：2012-07-23T19:26:18.757
> 
> 标签：html, css, twitter-bootstrap

我正在使用 Twitter Bootstrap 做一个简历页面，我希望它同时具有流畅的布局和响应式布局。这是[页面](http://www.fabriziobianchi.it)。

这是代码：

```
<div class="container-fluid">
<div class="row-fluid">
    <div class="row-fluid span7">
        <div class="span2">
            <img src="assets/img/scelta1.jpg" class="thumbnail pull-left"/>
        </div>
        <div class="hero-unit span5">
            <h1>Fabrizio Bianchi</h1>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer non urna ut nisl rhoncus gravida. 
            Morbi placerat libero at lectus gravida suscipit. Nam hendrerit dolor ut lacus euismod scelerisque. 
            Etiam vitae congue risus. Quisque vitae mattis mi. Nulla sed tristique felis. Mauris scelerisque augue a nunc aliquet consequat.
            </p>
        </div>
    </div>
        <div class="span5">
            <span class="label label-inverse">Skill</span>
            <div class="progress progress-striped active">
                <div class="bar" style="width: 80%"></div>
            </div>
            <span class="label label-inverse">Skill</span>
            <div class="progress progress-striped active">
                <div class="bar" style="width: 50%"></div>
            </div>
            <span class="label label-inverse">Skill</span>
            <div class="progress progress-striped active">
                <div class="bar" style="width: 60%"></div>
            </div>
            <span class="label label-inverse">Skill</span>
            <div class="progress progress-striped active">
                <div class="bar" style="width: 90%"></div>
            </div>
            <span class="label label-inverse">Skill</span>
            <div class="progress">
                <div class="bar" style="width: 70%"></div>
            </div>
        </div>

    </div>
</div> 
```

如您所见，问题是当我尝试为前 2 个元素制作嵌套的流体网格时，它们都向左移动，并且在它们与行的第三个元素（技能部分）之间留有很大的空间.

查看文档，我认为这可能是因为流体布局默认包含左侧边栏，并且我的嵌套网格被视为这样。是这样吗？在那种情况下，我该如何摆脱它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:38:38.833

流体网格基于百分比，这意味着它占用第一个“*相对*”父级的 XX% 宽度。

换句话说，每个`.row-fluid`嵌套都会创建一个新`.span12`行，您可以根据需要将其分成 12 个跨度。

因此，您必须将跨度加起来为 12 才能填充该行：

```
 <div class="row-fluid span7">
     <div class="span2">
        <!-- ... -->
     </div>
    <div class="hero-unit span10">
        <!-- ... -->
    </div>
</div> 
```

这是普通网格和流体网格之间的主要区别。

# ios - iOS - 如何重置到新状态

> ID：11619142
> 
> 赞同：1
> 
> 时间：2012-07-23T19:26:26.583
> 
> 标签：ios, cocoa-touch, ipad, reset, ipod

我将如何通过代码将 iOS 项目设置回其默认状态？例如，假设我在情节提要中有一个 UITableView 和大量代码来指示表格的行为方式。我将如何将所有变量、tableview 等设置回应用程序打开时的状态（不是从后台恢复）？调用`[self viewDidLoad];`不会这样做。

非常感谢您的帮助。

-碎纸机

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:29:21.250

你可以做一些事情来解除分配，然后重新分配你的控制器。然后你会确定你正在重新分配的对象状态是初始的。

# python - Pandas xaxis 自动格式化问题

> ID：11619144
> 
> 赞同：0
> 
> 时间：2012-07-23T19:26:32.637
> 
> 标签：python, matplotlib, pandas

```
from pandas import *
import datetime
DataFrame([1,1], index =  [ datetime.datetime(2012,1,1), datetime.datetime(2012,9,1) ] ).plot() 
```

给出 xaxis 不可读的图. 我认为原因是在`tools\plotting.py`（`condition`决定autofmt）是假的。

```
condition = (not self._use_dynamic_x
             and df.index.is_all_dates
             and not self.subplots
             or (self.subplots and self.sharex)) 
```

第一行不应该`self._use_dynamic_x()`代替吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T05:53:10.753

我认为这是熊猫的一个错误，应该是`self._use_dynamic_x()`，请向熊猫发布问题，以解决这个问题：

```
import pylab as pl
from pandas import *
import datetime
df = DataFrame([1,1], index =  [ datetime.datetime(2012,1,1), datetime.datetime(2012,9,1) ] )
df.plot()
pl.xticks(rotation=90) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T20:18:54.720

你用的是什么版本的熊猫？

我刚刚尝试过，轴看起来很好：

[http://imgur.com/FpoR7](http://imgur.com/FpoR7)

我在 pandas 0.8.1 和 matplotlib 1.1.0

# wpf - LINQ to SQL DBML：拖放更改表名

> ID：11619147
> 
> 赞同：2
> 
> 时间：2012-07-23T19:26:34.933
> 
> 标签：wpf, linq, linq-to-sql

目前我们通过删除所有表手动更新 DBML，然后通过服务器资源管理器重新添加所有表。我们以前这样做没有问题。最近在删除然后重新添加所有表之后，其中一两个表将更改它们的名称，这需要我们返回并修复后面代码中的 DBML 或 LINQ 对象。

例如，假设我们有一个名为 TABLES_MINORS 的表。按照惯例，它应该被命名为 TABLES_MINORs。但有时它会以 TABLEs_MINORs、TABLEs_MINORS 或 TABLES_MINORS 的形式出现。这变得非常烦人，我不知道为什么要这样做。同样，这并不是每次都发生，当它发生时，它只会影响一两个表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:24:54.593

简短回答：在 VS 中，打开工具 --> 选项 --> O/R 设计器，将名称的复数设置为 false。

类似于问题：

[仅对单个类禁用 Linq to SQL 类中的自动复数](https://stackoverflow.com/questions/7245105/disabling-automatic-pluralization-in-linq-to-sql-classes-for-a-single-class-only)

[Linq to SQL：如何阻止自动生成的对象名称被重命名？](https://stackoverflow.com/questions/335792/linq-to-sql-how-do-i-stop-the-auto-generated-object-name-from-being-renamed)

# ruby-on-rails - 有没有人知道 Rails gem 对显示和分页图像集合很有用？

> ID：11619148
> 
> 赞同：0
> 
> 时间：2012-07-23T19:26:40.440
> 
> 标签：ruby-on-rails, image

我在搜索引擎上找到的结果几乎属于 Paperclip、Rmagick 和其他图像处理宝石。我的存储空间很好，但我想找到一种可以以网格格式显示图像的方法，最好是逐页显示。

我想我可以做一个 jQuery DataTable，我只是想看看是否有人知道特别适合图像的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:39:50.400

通过图像集进行分页确实没有什么特别之处。

Kaminari 非常适合分页，然后由您来定义特定于您的要求的布局，我认为任何 gem 都不会为您做。

[https://github.com/amatsuda/kaminari](https://github.com/amatsuda/kaminari)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T19:39:52.010

不只是图像，而是...

我相信 github.com/amatsuda/kaminari 或 github.com/mislav/will_paginate 都可以解决问题。

如果您要返回 activerecord 对象，那么 kaminari 很容易实现，但仅适用于 activerecord，因此这取决于您返回图像的方式。我相信 will_paginate 更灵活

# jquery - 从未调用过 JQuery Ajax 错误函数

> ID：11619149
> 
> 赞同：1
> 
> 时间：2012-07-23T19:26:42.153
> 
> 标签：jquery, error-handling, jsonp

我正在向 Twitter 发送一个简单的 Ajax 请求。

```
$.ajax({
            type: "GET",
            url: "https://api.twitter.com/1/users/show.json?screen_name=twitterAPI&include_entities=true",
            dataType: "jsonp",
            success: function(data, textStatus, jqXHR){
                console.log("success");
            },
            error : function(XMLHttpRequest, textStatus, errorThrown){
                console.log("error");
            }
    }); 
```

当我存在 screen_name 时，将调用成功函数。但是当 screen_name 不存在时，我的控制台上会出现 Javascript 错误，但永远不会调用错误函数。

错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T13:14:43.300

看起来您遇到了以下错误：[http ://bugs.jquery.com/ticket/11680](http://bugs.jquery.com/ticket/11680)

# facebook - IE Back Button 重新加载 Facebook Page App 而不是返回粉丝页面

> ID：11619150
> 
> 赞同：0
> 
> 时间：2012-07-23T19:26:51.950
> 
> 标签：facebook, internet-explorer-9, facebook-page

当我转到 facebook 粉丝选项卡并使用 IE 并单击返回时，它什么也没做，因为 static.ak.facebook.com/platform 总是会妨碍我。后退按钮适用于所有其他浏览器。显然有一个代理页面可以重定向回粉丝选项卡。大约两年前在同一问题上有一个 facebook 问题，但显然还没有人解决它。

[http://developers.facebook.com/bugs/488616664498524/?browse=search_5005f9633ba073b61930185](http://developers.facebook.com/bugs/488616664498524/?browse=search_5005f9633ba073b61930185)

我注意到一些粉丝标签有同样的问题，你必须点击 15 到 20 次才能真正回到粉丝页面，而其他人只需要 2 次返回。我想知道是否有人知道这个特定问题的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T02:46:39.013

好吧，我想我明白了。。

无论如何都必须至少有 2 个支持，但页面标签 URL 不能只是

example.com/stuff/

它一定要是

example.com/stuff/index.php 或 index.html 等。

或者您可以执行 example.com/stuff，但您将无法获得签名的请求。

# git - 无法在 Git 中推送到远程存储库

> ID：11619156
> 
> 赞同：0
> 
> 时间：2012-07-23T19:27:29.750
> 
> 标签：git, push, msysgit

我正在尝试实现一个简单的场景，其中我在一台服务器上有一个 git repo，并且我能够将此 repo 推送到远程服务器。在解决了许多其他问题后，我陷入了以下阶段：

在 server1 上，我有一个 git repo。现在我按照[http://thelucid.com/2008/12/02/git-setting-up-a-remote-repository-and-doing-an-initial-push/中列出的步骤进行操作](http://thelucid.com/2008/12/02/git-setting-up-a-remote-repository-and-doing-an-initial-push/)

即 1) ssh 到远程服务器 2) 创建目录 3) 裸初始化 repo 4) 退出并在本地服务器上使用以下语句添加远程

```
 git remote add api User@example.com:/Myproj.git 
```

5）推送到远程。（git push -u api 大师）

我得到的错误是

```
git: '/Myproj.git' is not a git command. See 'git --help'.
fatal: The remote end hung up unexpectedly 
```

如何解决这个问题？我正在使用 MsysGit 1.7.10，并且两台服务器上的 ssh 服务器都是 Cygwin。

========================

添加 GIT_TRACE=2 git push -u api master 的输出

```
$ GIT_TRACE=2 git push -u api master
trace: built-in: git 'push' '-u' 'api' 'master'
trace: run_command: 'ssh' 'Administrator@api.example.com' 'git-receive-pack '\''
/Myproj.git'\'''
git: '/Myproj.git' is not a git command. See 'git --help'.
fatal: The remote end hung up unexpectedly 
```

=======================

GIT_TRACE=2 git push -u api master 的输出（在进行全局 git 配置更改之后）

$ GIT_TRACE=2 git push -u api master trace: 内置: git 'push' '-u' 'api' 'master' trace: run_command: 'ssh' 'Administrator@api.example.com' 'git receive- pack '\'' /MyProj.git'\''' 致命：'/MyProj.git' 似乎不是 git 存储库 致命：远程端意外挂断

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:32:18.513

我认为您只需要删除斜线并运行：

```
git remote add api User@example.com:Myproj.git 
```

# c# - Linq FindAll 和 Where 返回不同的结果

> ID：11619158
> 
> 赞同：1
> 
> 时间：2012-07-23T19:27:30.673
> 
> 标签：c#, linq

我有两种不同类型的对象，它们的 ID 字段具有可能匹配的 ID。FindAll 操作返回正确的非匹配对象，而 Where 操作返回所有对象。有人可以帮我理解为什么吗？

```
var _kenticoIDs = new HashSet<string>(_kenticoSessions.Select(p => p.AttendeeInteractiveSessionID));
var list = _aiSessionIDList.FindAll(p => !_kenticoIDs.Contains(p.SessionID));
var ienum = _aiSessionIDList.Where(p => !_kenticoIDs.Contains(p.SessionID)); 
```

编辑：如果我对 resultA 变量执行 .ToList() ，则结果列表与结果变量相同。但是，当我在 .ToList() 之前检查两个变量（result/resultA）时，一个有 6 个值，一个有 63 个值。我觉得我错过了一些明显的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T19:43:20.313

`Where`和`FindAll`是等价的，除了在执行方面，`Where`是延迟的，但是`FindAll`是立即的。

资料来源：[这个](https://stackoverflow.com/questions/1938204/linq-where-vs-findall)SO 线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T19:43:12.163

我认为您遇到的问题是了解 Linq。 [Linq 扩展方法在哪里，](https://stackoverflow.com/questions/1938204/linq-where-vs-findall)而 FindAll 是 List 方法。Linq 表达式在被枚举或转换为列表/数组之前不会被评估。

# linux - 'make' 期间的 config.status 错误

> ID：11619159
> 
> 赞同：0
> 
> 时间：2012-07-23T19:27:33.510
> 
> 标签：linux, makefile

我正在尝试安装一个工具，当我进行制作时，我在 config.status 文件中收到错误，如下所示：

```
 /bin/sh ./config.status
: command not foundne 6: 
: command not foundne 10: 
': not a valid identifier export: `SHELL
: command not foundne 16: 
./config.status: line 31: syntax error near unexpected token `newline'
'/config.status: line 31: `     ;;
make[1]: *** [Makefile] Error 2 
```

我的前 35 行 config.status 如下：

```
#! /bin/sh
# Generated by configure.
# Run this file to recreate the current configuration.
# Compiler output produced by configure, useful for debugging
# configure, is in config.log if it exists.

debug=false
ac_cs_recheck=false
ac_cs_silent=false

SHELL=${CONFIG_SHELL-bin/sh}
export SHELL
## -------------------- ##
## M4sh Initialization. ##
## -------------------- ##

# Be more Bourne compatible
DUALCASE=1; export DUALCASE # for MKS sh
if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then :
  emulate sh
  NULLCMD=:
  # Pre-4.2 versions of Zsh do word splitting on ${1+"$@"}, which
  # is contrary to our usage.  Disable this feature.
  alias -g '${1+"$@"}'='"$@"'
  setopt NO_GLOB_SUBST
else
  case `(set -o) 2>/dev/null` in #(
  *posix*) :
    set -o posix ;; #(
  *) :
     ;;
esac
fi 
```

有人可以帮我吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:40:38.027

我认为您从 DOS (Windows) 机器下载了配置文件并具有 CRLF 行结尾。错误消息试图告诉您有关行号的信息，但 CR 混淆了输出。因此，例如：

```
: command not foundne 6: 
```

真的是这样的：

```
./configure xxxx line 6: CR
: command not found 
```

其中 CR 是回车符。

如果您在不使用文本模式 FTP（或其他将 CRLF 行结尾转换为换行符（仅限 LF）结尾的东西）的情况下复制了所有内容，那么重做传输可能是最简单的。如果您将其从文件中提取出来`tar`并且处于错误的模式，那么您可能必须翻译所有内容。有一些工具（仅举两例）可以安装并有助于 DOS 到 Unix 的转换`dos2unix`。`dtou`

如果只是配置脚本，可以使用`vim`编辑文件，使用：

```
:set fileformat=unix 
```

更改行尾，然后强制保存文件

# shell - 将 SCP 的标准输出发送到屏幕并将 STDERR 发送到文件

> ID：11619165
> 
> 赞同：3
> 
> 时间：2012-07-23T19:27:52.857
> 
> 标签：shell, stdout, scp, stderr

有很多关于使用 SCP 时如何重定向 out 和 err 的讨论，或者只是 stdout 本身，但我很好奇是否有人知道如何在 stdout 继续打印到屏幕时将 stderr 重定向到文件。

目前，如果我们像这样重定向stderr：

```
scp user@XXXX:*.txt  . 2>errfile.txt 
```

stdout 上不显示任何内容，在 errfile.txt 中只捕获错误和回显。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T03:41:21.293

这是它的工作原理

```
MPBAB:work anj$ cat test.sh
echo "Hello there"
echo "This is a test script"

badcommand
MPBAB:work anj$ ./test.sh 2> err.log
Hello there
This is a test script
MPBAB:work anj$ cat err.log
./test.sh: line 4: badcommand: command not found 
```

如您所见，当`test.sh`尝试调用`badcommand`它时会引发错误。但是，这两个`echo`语句工作得很好，并显示在`STDOUT`和`STDERR`登录到`err.log`。

现在实施您尝试的方式-

```
MPBAB:work anj$ ./test.sh . 2>err.log
Hello there
This is a test script
MPBAB:work anj$ cat err.log
./test.sh: line 4: badcommand: command not found 
```

以同样的方式工作。在您的情况下，我被迫认为`scp`您发出的命令不正确。`scp`需要一个`source`和`destination`。像这样的东西（我想`scp`test.txt 到远程服务器）

```
MPBAB:work anj$ scp ./test.txt user@secure.server.com:/home/data 2>scperr.txt
user@secure.server.com's password: #<this is because I dont have the public key installed>
test.txt              100%  291     0.3KB/s   00:00    
MPBAB:work an$ cat scperr.txt
MPBAB:work anj$ 
```

所以你看，该文件被复制并显示`test.txt 100% 291 0.3KB/s 00:00`在`STDOUT`并且因为没有错误`scperr.txt`是空的。

# ruby-on-rails - 我可以让 DataMapper 和 ActiveRecord 在 Rails 应用程序中使用不同的数据库适配器吗？

> ID：11619168
> 
> 赞同：0
> 
> 时间：2012-07-23T19:28:04.230
> 
> 标签：ruby-on-rails, activerecord, datamapper

我有一个一直在使用 DataMapper 的 Rails 应用程序。我即将将其转换为使用 ActiveRecord。如果可能的话，我想一次做一个模型（或一组模型）。

现在，我什至无法启动应用程序，因为这两个 ORM 似乎需要不同的适配器。

如果`database.yml`指定适配器`mysql`，则`bundler/rubygems_integration.rb`引发：

```
Please install the mysql adapter: `gem install activerecord-mysql-adapter` (mysql is not part of the bundle. Add it to Gemfile.) 
```

如果它指定`mysql2`，则`activesupport/dependencies`引发：

```
cannot load such file -- dm-mysql2-adapter (LoadError) 
```

`mysql2`我尝试使用适配器为 ActiveRecord 创建一个单独的环境，然后`establish_connection`从我想首先转换的单个模型中使用，但应用程序仍然无法启动。

有没有人成功做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:19:22.543

你可以试试这个。此代码需要在加载 ActiveRecord 模型后运行。

```
db_settings = YAML::load_file("#{ROOT_PATH}/config/database_settings_for_active_record.yml")
db_config = db_settings[Rails.env]
spec = Hash.new
[:adapter, :host, :username, :password, :pool, :database].each { |x| spec.merge!(x => db_config[x.to_s]) }
YourModel.establish_connection(spec) 
```

database_settings_for_active_record.yml 将包含以下内容：

```
production:
  adapter: mysql2
  encoding: utf8
  host: localhost
  username: root
  password:
  pool: 5
  database: my_db 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T16:35:55.290

这个特定问题的解决方案似乎是为 DataMapper 提供其数据库连接信息作为`uri`选项，而 ActiveRecord 将使用适配器、用户名、root 和主机选项指定的连接。

```
defaults: &defaults
  adapter: mysql2
  username: root
  password: somePassword
  host: localhost

development: &development
  database: myapp_dev
  uri: mysql://localhost/myapp_dev?user=root&password=somePassword
  <<: *defaults

test:
  database: myapp_test
  uri: mysql://localhost/myapp_test?user=root&password=somePassword
  <<: *defaults
production:
  database: myapp_dev
  <<: *defaults 
```

但是，让两个 ORM 很好地协同工作将涉及许多其他问题。就我个人而言，我已经放弃了，只是直接撕掉了 DataMapper。

# python - 如何在 python 中将 datetime.date 对象转换为 datetime.datetime？

> ID：11619169
> 
> 赞同：11
> 
> 时间：2012-07-23T19:28:09.813
> 
> 标签：python, datetime, date

> **可能重复：**
> [将 datetime.date 对象转换为 datetime.datetime 对象，其中任何缺少的时间属性为零](https://stackoverflow.com/questions/11192814/convert-a-datetime-date-object-into-a-datetime-datetime-object-with-zeros-for-an)

如何将`datetime.date`obj转换为`datetime.datetime`obj，默认为午夜？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-23T19:30:03.027

使用空[实例的](http://docs.python.org/library/datetime.html#datetime.time)[`datetime.combine`方法](http://docs.python.org/library/datetime.html#datetime.datetime.combine)：[`time`](http://docs.python.org/library/datetime.html#datetime.time)

```
dateobject = datetime.date.today()
datetime.datetime.combine(dateobject, datetime.time()) 
```

或者，您可以使用[`datetime.time.min`常量](http://docs.python.org/library/datetime.html#datetime.time.min)：

```
datetime.datetime.combine(dateobject, datetime.time.min) 
```

两者都`datetime.time()`代表`datetime.time.min`午夜 (00:00:00)。

# sql - case 条件然后使用两个表

> ID：11619170
> 
> 赞同：1
> 
> 时间：2012-07-23T19:28:10.097
> 
> 标签：sql, sql-server, sql-server-2008, tsql

```
select firstname,lastname 
from table1 (nolock) 
left outer join table2 
    on table1.ID=table2.ID
where table1.billingaddress like 'Lake street'' 
```

我正在尝试使用当 table1.billingaddress isnull 我需要将其替换为

table2.shippingaddress

```
select firstname,lastname 
from table1 (nolock) 
left outer join table2 
    on table1.ID=table2.ID
where case billingaddress isnull then shippingaddress like 'Lake street' 
```

我没有得到想要的结果，请分享您的想法如何使用 sql 查询来实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:32:54.367

```
select firstname,lastname 
from table1 (nolock) 
left outer join table2 on table1.ID=table2.ID
where isnull(billingaddress, shippingaddress) like 'Lake street' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T19:34:35.380

来自评论：当帐单地址为空时，这将检查送货地址是否像湖街，并将返回所有帐单地址不为空的行，如果送货地址类似于“湖街”，则返回为空的行

```
SELECT firstname,lastname 
FROM table1 (nolock) 
LEFT OUTER JOIN table2 on table1.ID=table2.ID
WHERE billingaddress IS NOT NULL OR (billingaddress IS NULL AND shippingaddress LIKE 'Lake street') 
```

仅基于问题的第一次尝试：

此查询将获取帐单地址类似于“湖街”的任何内容，但如果帐单地址为空，则将获取送货地址类似于“湖街”的任何内容。

```
SELECT firstname,lastname 
FROM table1 (nolock) 
LEFT OUTER JOIN table2 on table1.ID=table2.ID
WHERE COALESCE(billingaddress, shippingaddress) LIKE 'Lake street' 
```

编辑：就像“湖街”有点毫无意义，请告诉我你至少在那里使用通配符？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T19:33:48.840

所以你想要的，只是为了让我说清楚，是：

如果 Table1.billingaddress 不为空，“LIKE billingaddress”

其他“喜欢送货地址”？

如果我理解正确，我会将其编辑为答案。

```
select firstname,lastname 
from table1 (nolock) 
left outer join table2 on table1.ID=table2.ID
where CASE WHEN billingAddress IS NULL THEN shippingAddress ELSE billingAddress END LIKE     'Whatever' 
```

# java - 休眠过滤子项

> ID：11619174
> 
> 赞同：1
> 
> 时间：2012-07-23T19:28:14.930
> 
> 标签：java, hibernate

我有两张桌子，一张是另一张的父母。子表具有确定其有效性的开始日期和结束日期列。以下过滤器设置仅适用于加载有效子项：

```
@Entity
@Table(name = "child")
@FilterDef(name = "dateFilter", parameters = @ParamDef( name = "targetDate", type = "string" ))
@Filter(name = "dateFilter", condition = "(:targetDate between to_char(startDate, 'yyyyMMdd') and to_char(endDate, 'yyyyMMdd')")
public class Child {} 
```

我想要的是加载所有父母，并且只加载以父实体定义开头的有效孩子。以下代码加载所有孩子，而不仅仅是有效的孩子：

```
@Entity
@Table(name = "parent")
public class Parent {
    @OneToMany(mappedBy = "parent")
    private Collection<Child> childCollection = new HashSet<Child>();
} 
```

如何为作用于子实体的父实体类指定过滤器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:17:46.267

```
@Entity
@Table(name = "parent")
@FilterDef(name = "dateFilter", parameters = @ParamDef( name = "targetDate", type = "string" ))
public class Parent {
    @OneToMany(mappedBy = "parent")
    @Filter(name = "dateFilter", condition = "(:targetDate between to_char(startDate, 'yyyyMMdd') and to_char(endDate, 'yyyyMMdd')")
    private Collection<Child> childCollection = new HashSet<Child>();
} 
```

并确保启用过滤器...

# php - PHP正则表达式捕获包含两个字母状态和三个字母城市的服务器名称？

> ID：11619175
> 
> 赞同：1
> 
> 时间：2012-07-23T19:28:15.350
> 
> 标签：php, regex

我有一长串服务器主机名，我需要提取包含两个字母缩写状态后跟三个字母缩写城市的服务器主机名。

例如：

服务器主机名：ohdubgh01sp、nyobg38djek、123ohdub123as、oh2kjd

这个正则表达式应该提取前 3 个而不是最后一个。

我试过的：

`$pattern = "/.*(al|ak|az|ar|ca|co|ct|de|fl|ga|hi|id|il|in|ia|ks|ky|la|me|md|ma|mi|mn|ms|mo|mt|ne|nv|nh|nj|nm|ny|nc|nd|oh|ok|or|pa|pr|ri|sc|sd|tn|tx|ut|vt|vi|va|wa|wv|wi|wy)([a-z]{3}).*/";`

这会将我的列表减半，但仍会检索“barker”等项目。什么是可以给我最准确结果的好的正则表达式？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:41:29.520

您所要求的远远超出了正则表达式的范围。

过滤任何有意义的条目的基本问题是“有意义”这个词。对于计算机来说，这样的事情是不存在的——一切对他们来说都是有意义的（或无意义的，取决于你如何看待它）。给定（看起来是）一组自由样式的条目，我们能做的最好的事情就是将其缩小到更易于管理的大小，然后手动检查和修剪数据，因为普通程序根本没有人类这样做所必需的水平的智力和理解力。

以你的情况为例：你想找到一个两个字母的州，然后是一个三个字母的城市。因为您的输入列表没有直接可识别的模式（除了城市跟随州），除了为每个有效州指定每个可能的五个字母缩写/城市组合，即使那样，仍然会有垃圾通过。例如，如果有效的州/城市组合是“arche”，那么名为“archer”的服务器主机将通过。这对计算机来说都是希腊语。

为了满足您更紧迫的需求：由于指定每个州/城市组合将花费您比手动修剪更长的时间，因此我建议您仅使用当前的正则表达式，尽量确定服务器主机共享的任何其他模式（并将它们应用于正则表达式），然后手动完成其余的工作。

# c# - 如何更改 PdfPTable 中的字体大小？

> ID：11619176
> 
> 赞同：13
> 
> 时间：2012-07-23T19:28:20.673
> 
> 标签：c#, asp.net, itext

我正在使用 itextsharp 在 pdf 上动态书写。我正在 pdf 文档中创建一个表，其中包含数据库中的值。有人可以告诉如何修改表中值的字体大小。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-23T19:41:51.893

尝试这个：

```
Font fontH1 = new Font(Currier, 16, Font.NORMAL);

PdfPTable table = new PdfPTable(1);

table.AddCell(new PdfPCell(new Phrase(yourDatabaseValue,fontH1))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T19:36:57.197

请尝试将字体设置为`PdfPTable.DefaultCell property`

例子：

```
pdfTable.DefaultCell.Phrase = new Phrase() { Font = fontNormal }; 
```

我之前已经回答过这个问题：[使用 Itextsharp 为 Pdfptable 中的所有文本设置字体](https://stackoverflow.com/questions/11577465/set-font-for-all-text-from-pdfptable-with-itextsharp/11577770#11577770)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-19T11:45:36.317

@Pabloker我不确定，但在使用您的解决方案时出现错误。我无法决定使用哪种字体（**com.itextpdf.text.Font 或 com.lowagie.text.Font 或 java.awt.Font 或 org.apache.poi.ss.usermodel.Font**）。当我尝试将它放入单元格时，无论我使用哪个，它都会给出不存在这样的构造函数的错误。对不起，我是 iText 的新手。

幸运的是，我找到了以下对我有用的代码。

```
BaseFont bf = BaseFont.createFont(
                        BaseFont.TIMES_ROMAN,
                        BaseFont.CP1252,
                        BaseFont.EMBEDDED);
                Font font = new Font(bf, 12);
                PdfPCell pdfCell = new PdfPCell(new Phrase(sCellVal,font)); 
```

注意使用的字体是 com.itextpdf.text.Font 类型**，** basefont 是**com.itextpdf.text.pdf.BaseFont** 这解决了编译问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T19:35:54.927

您不应该使用创建文本时传递的 Font 对象来更改字体大小吗？

如果您还没有读过，这本 iText 书非常出色，几乎可以回答您的任何问题：http: [//itextpdf.com/book/index.php](http://itextpdf.com/book/index.php)

# mysql - SQL Server 2008 R2 到 MySQL 的迁移

> ID：11619177
> 
> 赞同：1
> 
> 时间：2012-07-23T19:28:23.240
> 
> 标签：mysql, sql-server, sql-server-2008, sql-server-2008-r2, mysql-workbench

是否有一个 GUI 工具可以让我将整个 SQL Server 2008 R2 数据库迁移到 MySQL？我安装了 MySQL Workbench，但它似乎没有像 SSIS 这样的功能来从 SQL Server 复制和粘贴整个数据库。我下载了 MySQL 迁移工具包，但它不再受支持，并且在运行它时出现 Java 错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T17:03:16.073

新版本的 MySQL Workbench 合并了旧的 Migration Toolkit。您现在可以在 MySQL Workbench 内的不同数据库之间进行直接导入/导出。

要进入迁移向导，请单击选项卡菜单上的“数据库”。然后选择“迁移”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T21:48:19.567

哪个版本的 Workbench 带回了迁移工具包？我在 5.2.45 CE 中没有看到它，所以也许这是一个完整版功能？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T19:31:05.523

你可能想试试[Navicat Premium](http://www.navicat.com)

# jpanel - 在 Java 面板上绘制 2d 对象

> ID：11619181
> 
> 赞同：0
> 
> 时间：2012-07-23T19:28:41.977
> 
> 标签：jpanel

我是java新手，只是为了好玩，我想在面板上画画。我有 1 个面板，我已经为背景着色，以便我可以看到它们在哪里。我正在尝试绘制圆形、椭圆等，但结果是面板上什么都没有出现在 java 面板上。

我会很感激任何帮助！

所以我的代码在这里：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class app extends JFrame implements ActionListener{
 boolean rectangle1=false;
 boolean circle1=false;
 boolean polygon1=false;
 boolean ellipse1=false;

 String x,y;

 JTextField input1;
 JTextField input2;
 JButton rectangle;
 JButton circle;
 JButton polygon;
 JButton ellipse;
 JLabel label1,label2,label3;
 Mypanel mypanel;

public app(){
setSize(1000,1000);
setLayout(new FlowLayout());
setVisible(true);

JPanel mypanel =new JPanel();
mypanel.setPreferredSize(new Dimension(600,600));
mypanel.setBackground(Color.blue);

rectangle=new JButton("rectangle"); 
circle=new JButton("circle");
polygon=new JButton("polygon"); 
ellipse=new JButton("ellipse");

rectangle.addActionListener(this);
circle.addActionListener(this);
polygon.addActionListener(this);
ellipse.addActionListener(this);

JLabel label1=new JLabel("my paint application");
JLabel label2=new JLabel("select line color");
JLabel label3=new JLabel("select fill color");

input1=new JTextField(4);  
input2=new JTextField(4);

add(label1);
add(rectangle);
add(circle);
add(ellipse);
add(polygon);
add(label2);
add(input1);
add(label3);
add(input2);
add(mypanel, BorderLayout.CENTER);
} 
public void actionPerformed(ActionEvent e){
x=input1.getText();
y=input2.getText();

if(e.getSource()==rectangle)
{
 rectangle1= true;
 repaint(); 
}
if(e.getSource()==circle)
{
 circle1= true;
 repaint(); 
}
if(e.getSource()==polygon)
{
 polygon1= true;
 repaint(); 
}
if(e.getSource()==ellipse)
{
 ellipse1= true;
 repaint(); 
}

}

public static void main(String args[]){
new app();
}
class Mypanel extends JPanel{
public void paint(Graphics g){
if(rectangle1==true){
  rectangle1=false;
  g.setColor(Color.red);
  g.drawRect(10, 10,20,20);
  g.setColor(Color.black);
  g.fillRect(11, 11,20,20);  
}

if(circle1==true){
 circle1=false;
 g.setColor(Color.red);
 g.drawOval(250, 20, 40,40);
 g.setColor(Color.black);
 g.fillOval(249, 19,40,40);
}

if(polygon1==true){
 polygon1=false;
 int xpoints[]={10,20,170,10};
 int ypoints[]={20,40,140,20};
 g.setColor(Color.red);
 g.fillPolygon(xpoints,ypoints,4);
}
if(ellipse1==true){
 ellipse1=false;
 g.setColor(Color.red);
 g.drawOval(250, 20, 40,40);
 g.setColor(Color.black);
 g.fillOval(249, 19,40,40);
}

}
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T05:09:54.957

在最后的公共应用程序构造函数调用`pack();`中。

# java - 创建 JTextArea

> ID：11619183
> 
> 赞同：0
> 
> 时间：2012-07-23T19:28:50.547
> 
> 标签：java, netbeans-7

我正在使用一些代码来获取文件名并将其存储在数据库中，一切正常，但我想显示它存储在 TextArea 上的文件，我该怎么做？

这是用于存储文件名的代码。顺便说一句，我在 NetBeans 中这样做。

```
private void ActualizerBDActionPerformed(java.awt.event.ActionEvent evt) {                                             
        Conectar();
        File folder = null;
    try {
        String ppp = new File(".").getCanonicalPath();            
        folder = new File(ppp + "\\ImagensDB");
    } catch (IOException iOException) {
    }
        File[] listOfFiles = folder.listFiles();
        String query = "insert into dados (Num, Nome, Autor, Data, Preco, Categoria)" +"values(?,?,?,?,?,?)";
        PreparedStatement prepStmt=null;
    try {
        prepStmt = con.prepareStatement(query);
    } catch (SQLException ex) {
        Logger.getLogger(JanelaPrincipal.class.getName()).log(Level.SEVERE, null, ex);
    }
        for (int j = 0; j < listOfFiles.length; j++) {
                 if (listOfFiles[j].isFile()) {
            try {
                String text = listOfFiles[j].getName();
                String txsp[] = text.split("-");
                      prepStmt.setString(1, txsp[0]);
                      prepStmt.setString(2, txsp[1]);
                      prepStmt.setString(3, txsp[2]);
                      prepStmt.setString(4, txsp[3]);
                      prepStmt.setString(5, txsp[4]);
                      prepStmt.setString(6, txsp[5]);
                      prepStmt.execute(); // executa o INSERT
            } catch (SQLException ex) {
                Logger.getLogger(JanelaPrincipal.class.getName()).log(Level.SEVERE, null, ex);
            }
      }
}
        JOptionPane.showMessageDialog(null, "Dados Introduzidos com Sucesso!");
        try {
            con.close();
        } catch (SQLException ex) {
            Logger.getLogger(JanelaPrincipal.class.getName()).log(Level.SEVERE, null, ex);
        }

} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:38:09.630

*   从数据库中读取文件名：

> “从 YourTable 中选择文件名”

*   在 for-each 中将名称添加到 textarea

> textArea.append(fileName + "\n");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:37:48.417

你可以在这里的某个地方

```
String text = listOfFiles[j].getName();
String txsp[] = text.split("-");
prepStmt.setString(1, txsp[0]);
prepStmt.setString(2, txsp[1]);
prepStmt.setString(3, txsp[2]);
prepStmt.setString(4, txsp[3]);
prepStmt.setString(5, txsp[4]);
prepStmt.setString(6, txsp[5]);
prepStmt.execute(); // executa o INSERT

myTextArea.append(text + "\n"); 
```

当然，您需要先构建用户界面！查看[此](http://docs.oracle.com/javase/tutorial/uiswing/)以获取更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T19:38:05.923

你可以加：

```
textarea.append(text + " stored successfully\n"); 
```

在您的执行语句之后立即。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T19:38:50.770

**1.**像这样创建一个 JTextArea...

```
 JTextArea txt = new JTextArea(); 
```

**2.**从数据库中读取包含数据的文件。

**3.**然后**将其写入JTextArea**

```
 File f = new File("d:\\My.txt");
   FileReader fr = new  FileReader(f);
   BufferedReader br = new BufferedReader(fr);

   StringBuilder sb = new StringBuilder();
   String s = null;

   while ((br.readLine())!=null){

       sb.append(br.readLine());

     }

  s = sb.toString();

 txt.setText(s); 
```

# android - 使用数组时出现 JSON 异常

> ID：11619184
> 
> 赞同：0
> 
> 时间：2012-07-23T19:28:59.660
> 
> 标签：android, json

我正在解析 android 上的 json 元素数组。以下行生成以下异常。我已经在一些验证页面上验证了 json 文件，一切似乎都是正确的。怎么了？

```
JSONObject object = new JSONObject(content); 
```

例外：

```
org.json.JSONException: Unterminated array at character 21 of {
    "info":[
       {
          "category":"Cocktail",
          "text":"Long Island Ice Tea",
          "info":"nur am 19. Juni",
          "imageUrl":"http://www.google.at/google.png",
          "thumbnailUrl":"http://www.google.at/google.png"
       },
       {
          "category":"Grill-Wochen",
          "text":"Steak vom Grill 350g",
          "info":"AB 16.09.2012",
          "imageUrl":"http://www.example.com/example.jpg",
          "thumbnailUrl":"http://www.example.com/example_thumb.jpg"
       }
    ]
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:41:56.790

我[在线使用了 JSON 解析器](http://json.parser.online.fr/)并检查了您的字符串。它确实有语法错误。

[在JSON.org](http://www.json.org/)分析 JSON 语法， 我们可以验证每个对象都必须以曲括号 ("{") 开始和结束。“信息”是一个对象 - 所以应该这样说。我将您的代码更改为

```
{ "info":[        
     {
       "category":"Cocktail",
      "text":"Long Island Ice Tea",
      "info":"nur am 19 Juni",
      "imageUrl":"http://www.google.at/google.png",
      "thumbnailUrl":"http://www.google.at/google.png"
     },                    
     {
       "category":"Grill-Wochen",
       "text":"Steak vom Grill 350g",
       "info":"AB 16.09.2012",
       "imageUrl":"http://www.example.com/example.jpg",           
       "thumbnailUrl":"http://www.example.com/example_thumb.jpg"        
     }     
  ] 
} 
```

解析器对此很满意。

我希望它有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:23:02.363

我解决了这个问题。我检查了文件是否存在一些编码问题。使用输入流从 apache 服务器下载文件后，它包含一些损坏的字符。

# c++ - 由 lambda 初始化的函数局部静态函数对象，线程安全与否？

> ID：11619201
> 
> 赞同：6
> 
> 时间：2012-07-23T19:30:02.790
> 
> 标签：c++, static, lambda, c++11, thread-safety

以下函数是线程安全的吗？如果它不是线程安全的，那么使 funImpl 非静态真的有任何开销吗？还是编译器实际上内联了该函数对象函数并完全跳过创建函数对象？

```
int myfun(std::array<int, 10> values)
{
    static const auto funImpl = [&]() -> int
    {
        int sum = 0;

        for (int i = 0; i < 10; ++i)
        {
            sum += values[i];
        }
        return sum;
    };

    return funImpl();
} 
```

编辑：我从以下位置编辑了函数签名：

```
int myfun(const std::array<int, 10>& values) 
```

到：

```
int myfun(std::array<int, 10> values) 
```

所以很明显，我不是在问值的安全性，而是函数局部静态变量 funImpl 的线程安全性。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-23T19:46:04.643

它不仅不是线程安全的，而且不能做你想做的事。

通过将 lambda 定义为静态，它捕获（通过引用）第一次调用时传入的数组。进一步的调用继续引用原始数组，无论传入哪个数组。

当第一个数组超出范围时，进一步的调用将调用 UB，因为它现在有一个悬空引用。

编辑：一个例子[http://ideone.com/KCcav](http://ideone.com/KCcav)

请注意，即使您按值捕获，您仍然会遇到问题，因为它仍然只会在您第一次调用该函数时捕获。你不会有悬空指针，但它仍然只会在第一次初始化副本。

# php - Symfony2 中的安全性：自定义用户提供程序如何管理验证密码？

> ID：11619206
> 
> 赞同：0
> 
> 时间：2012-07-23T19:30:18.817
> 
> 标签：php, symfony

我正在关注关于创建[自定义用户提供程序](http://symfony.com/doc/master/cookbook/security/custom_provider.html)的 Symfony 食谱，但我不知道如何验证用户密码。这是用户提供者的任务吗？或者这应该在其他情况下发生？我如何确保他通过表单提交的密码等于数据库中的密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T20:08:10.993

用户提供者不是处理身份验证的那个。这是身份验证提供者的任务。

看看旁边的文章[How to create a custom Authentication Provider](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html)以获得一些想法。

你也可以看看 Symfony\Component\Security\Core\Authentication\Provider\DaoAuthenticationProvider。看看它的构造函数如何接受 userProvider 的实例，然后在retrieveUser() 中使用它从数据库中获取用户的数据？此外，在 UserAuthenticationProvider 抽象类中，即 DaoAuthenticationProvider，此数据被传递给 checkAuthentication() 方法（由 DaoAuthenticationProvider 实现）。它使用与 User 类关联的编码器首先对从 UsernamePasswordToken 检索到的 UserInterface 实例的密码进行编码，然后将其与从数据库检索到的已编码版本进行比较。

**编辑：**关于您的评论：不久前我做了类似的事情（只是我使用了标准表单登录和非常非标准的身份验证管理器（:），但不幸的是我不太记得实现了。我记得是我必须阅读大量 Symfony2 源代码...您可以尝试从自定义 AuthenticationProvider 的实现开始。您可以尝试将它基于 UserAuthenticationProvider 抽象类并使用 DaoAuthenticationProvider 作为一种参考...也就是说，您可以实现retrieveUser()，使其使用您的用户提供程序来检索相关数据，然后*也*以利用检索到的用户数据的方式实现 checkAuthentication() 方法。然后，如果您的用户凭据以某种方式编码，我认为您需要在 secruty.encoders 配置中为您的自定义用户类指定适当的编码器。哦，不要忘记身份验证提供程序工厂和自定义安全令牌。

真的很抱歉，我提供的一些信息不正确。只是我现在没有我的实现（而且，坦率地说，我现在懒得再去挖掘 Symfony 2 代码）。

**另一个编辑**：关于配置部分。再一次，我不确定我是否记得正确，但我认为您肯定需要在配置中指定您的自定义身份验证提供程序的工厂。然后，它将使您能够在防火墙的配置中包含密钥（您在工厂的 getKey() 方法中指定的），这将启用此防火墙的自定义身份验证提供程序。

# php - 使用 array_intersect

> ID：11619208
> 
> 赞同：1
> 
> 时间：2012-07-23T19:30:34.067
> 
> 标签：php, mysql, while-loop, array-intersect

我有 2 张桌子。一个带有企业列表及其地址，另一个带有邮政编码列表及其经度和纬度。我有一个接受邮政编码和英里数来检查半径的表格。

所有半径的东西都来自我在网上找到的脚本。我需要的是呼应半径内的企业条目。

到目前为止，我有 2 个查询。一个获取数据库内的所有条目邮政编码，另一个获取我输入表格范围内的所有邮政编码

我正在使用 array_intersect 来查找匹配的。我的问题是它只返回找到的第一个条目。我确定我需要一个while循环来做到这一点，但我不知道该怎么做。

代码片段：

```
 $insideRadius = array_intersect($data, $zipArray); 
```

$data 是业务表中的所有邮政编码。$zip 数组是范围内的所有邮政编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:37:29.383

您不能只选择在 $zipArray 中列出邮政编码的企业吗？

`"SELECT * FROM business WHERE zipcode IN (" . implode(",", $zipArray) . ")"`

在 PHP 中，你可以像这样运行它：

```
$result = mysql_query("SELECT * FROM business WHERE zipcode IN (" . implode(",", $zipArray) . ")");
while ($row = mysql_fetch_assoc($result))
{
    echo $row["name"] . "<br />";
    echo $row["zipcode"] . "<br />";
} 
```

# ios - 为子视图使用视图控制器

> ID：11619215
> 
> 赞同：1
> 
> 时间：2012-07-23T19:30:56.820
> 
> 标签：ios, tabbar, viewcontroller

背景：

我有一个应用程序，它的界面中有一个标签栏，但是我没有使用标签栏控制器......我出于多种原因故意这样做，所以请不要回答我将应用程序重写为标签栏控制器，因为那不会有帮助。

视图控制器可以很好地控制屏幕和选项卡等，但现在我想为应用程序添加一个完全不同的视图。现在，是的，我可以将视图放在现有的 .XIB 中，然后将其所有控件放在现有的视图控制器类中，但它已经做了很多事情，所以我想将此视图绑定到它自己的视图控制器并在按下按钮时有效地启动。

现在，在标签栏控制器模型中，添加一个绑定到标签的新视图控制器没有问题，但由于我没有使用标签栏控制器，所以我有点迷茫。我知道这是基本的，我只是没有看到它，但是在 XIB 中无法将视图控制器添加到选项卡或选项卡项，因为它不是选项卡控制器 IB 似乎不允许这样做。我可以轻松地将视图添加到 IB，但是我没有将控制器绑定到它，并且需要该视图的所有控制代码也成为主控制器的一部分，我可以这样做，但更愿意隔离，因为此视图与与其他用户交互和视图相关的所有其他功能完全不同。

那么，实现这一目标的最佳方法是什么？实例化标签栏上的 ViewController 按下，并将其视图作为子视图添加到主窗口？我认为这会起作用，但这似乎有点笨拙。有没有其他方法可以显示视图并将其绑定到 veiw 控制器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T23:20:20.333

如果您使用 iOS 5 的[视图控制器容器](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW81)，`viewDidLoad`您将安装第一个视图控制器。我通常`childView`在我的父控制器的 NIB/storyboard 中定义一个视图，它将指示子视图的放置位置（如果您想要动画转换并将动画限制到子视图，这尤其有用）：

```
OneViewController *controller = [[OneViewController  alloc] initWithNibName:@"OneViewController"  bundle:nil];

[self addChildViewController:controller];
[controller didMoveToParentViewController:self];
[childView addSubview:controller.view]; 
```

然后，例如，当您单击第二个选项卡时，您想转到下一个控制器，只需调用`transitionFromViewController`：

```
[self addChildViewController:newController];

[self transitionFromViewController:oldController 
                  toViewController:newController
                          duration:0.5
                           options:UIViewAnimationOptionTransitionCrossDissolve
                        animations:^{
                            // do any other animation of the parent view that you want coordinated with the transition, e.g., I'm going to replace the nav bar title
                            [self updateTitles:newController];
                        }
                        completion:^(BOOL finished){
                            [oldController willMoveToParentViewController:nil];
                            [oldController removeFromParentViewController];
                            [newController didMoveToParentViewController:self];
                        }]; 
```

显然，做这一切，你做了很多工作来重现标准的标签栏控制器功能，但我认为你有令人信服的理由这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:14:42.283

您在最后一段中提出的建议将起作用……主要是。:-) 视图控制器实际上是为了管理“一屏内容”，所以如果你尝试这样做，请为卸载或重新加载视图、自动旋转和其他细微之处的怪癖做好准备。您可能明智地遵循 Apple 的视图控制器编程指南中的建议：

> 注意：如果要将视图层次结构划分为多个子区域并分别管理每个子区域，请使用通用控制器对象（从 NSObject 降级的自定义对象）而不是视图控制器对象来管理每个子区域。然后使用单个视图控制器对象来管理通用控制器对象。

# iphone - iphone应用程序中的C++对象

> ID：11619216
> 
> 赞同：0
> 
> 时间：2012-07-23T19:30:57.193
> 
> 标签：iphone, c++, objective-c

我开始为我探索一个全新的世界，那就是游戏的世界。我已经开始使用 cocos2d 框架来完成界面。游戏的大脑是一个 c++ 类，当界面中发生某些事情时会调用它。由于这个大脑应该跟踪所有事情并跟踪游戏中发生的事情，我认为正确的设计模式是单例模式。现在我的问题是：“有没有人有在 C++ 中创建单例并将其添加到 iphone 应用程序的经验”显然我已经用谷歌搜索了一天并阅读了很多文档，但我得到的信息不是很清楚链接是欢迎！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:58:51.627

以下内容还不足以满足您的目的吗？

```
Singleton& instance()
{
     static Singleton singleton;
     return singleton;
} 
```

# php - PHP调用shell脚本来处理多个用户

> ID：11619225
> 
> 赞同：1
> 
> 时间：2012-07-23T19:31:46.040
> 
> 标签：php, shell, multiple-instances

我有一个 C 模拟，我正在为其创建一个图形 Web 界面。我使用带有 ajax 的 HTML 来调用 PHP，而 PHP 又调用 shell 来运行模拟。然后将输出传递回网页。

该脚本生成一个输出文件（带有输出到网页的链接）以及一个图形（使用对 gnu plot 的调用并引用输出文件）。该网页还允许用户上传用于 C 语言仿真的输入文件。所有这些文件都是用户特定的。

如果网页上一次只有一个用户，则没有任何问题。但是，如果 5 个人想同时运行模拟，用户特定的文件（输出、图形、输入）都会被覆盖和弄乱。

我没有任何 MySQL 经验，我也不打算为给定用户保存输出或输入（如果他/她愿意，用户可以下载它们），所以我希望可能有一个相当简单的解决方案，比如，例如，在服务器上生成一个临时目录，该目录根据用户的 IP 地址或其他名称在名称中带有某种识别标签。然后可以在模拟运行几分钟后删除此文件夹。有人对这样的事情有任何想法吗？

还是我必须求助于 MySQL？

编辑：也可以允许最多 5 个用户同时运行，然后为其他用户创建一个队列，但这可能会更加困难。

谢谢，乔什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:43:55.763

*如果不将输出保存在某处*，您将无法做到这一点，因此您的临时目录计划很好。

*   通过 md5() 或 sha1() 或其他方式为每个新用户分配一个唯一的 ID。
*   将 id 传递给模拟器并让它在由该 id 命名的子目录中创建其输出文件。
*   根据该 ID 渲染链接和图像 HREF。
*   编写一个 cron 来定期清除陈旧的子目录。

每个人都会在一个不可猜测的 URL 上获得自己的输出集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T19:38:56.650

也许你可以在你的 C 模拟中使用[线程。](http://www.youtube.com/watch?v=mY__o6mq0uI)或者，您可以设置 MySQL 数据库并使用[PHP 数据库对象 (PDO)](http://php.net/manual/en/book.pdo.php)将数据存储在那里。如果您可以使用 C 并且能够使用 PHP 进行 ajax，则 mysql 可能是最省时的解决方案，而不是 C 中的线程（假设 C 模拟相对复杂）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T19:44:24.203

您可以为访问用户创建会话标识符，并将该 id 作为参数传递给您的 c 程序。

当您的 c 程序创建文件供用户显示时，它应该使用您的会话标识符为该用户生成名称。

从网页让用户查看与其会话标识符匹配的文件。这样他们可以看到他们生成的文件，如果他们有一个带有会话标识符的文件，您也可以为用户设置一个控件，您不需要对您的 c 程序进行不必要的调用。

只需服务已经创建的那个。根据需要控制该标识符的生命周期。

# ruby-on-rails - 乘客错误：无法加载此类文件 -- ruby gems/path_support

> ID：11619227
> 
> 赞同：2
> 
> 时间：2012-07-23T19:32:06.300
> 
> 标签：ruby-on-rails, apache2, passenger, mod-rails

我在获得 VPS - Ubuntu 10.10 / Apache2 / Passenger 环境时遇到了很多麻烦。

我已经使用以下文件设置了一个虚拟主机“rails.mydomain.com”：

```
<VirtualHost *:80>
    ServerName rails.mydomain.com
    DocumentRoot /var/www/vhosts/rails.mydomain.com/appname/public
    <Directory /var/www/vhosts/rails.mydomain.com/appname/public>
            Allow from all
            Options -MultiViews -Indexes
    </Directory>

    Include /etc/apache2/production-expires.conf
    CustomLog /var/log/apache2/rails.mydomain.com-access_log common
    ErrorLog /var/log/apache2/rails.mydomain.com-error_log
</VirtualHost> 
```

当我尝试在服务器上加载应用程序时，我得到：

```
Error message:
    cannot load such file -- rubygems/path_support

Exception class:
    LoadError

Application root:
    /var/www/vhosts/rails.mydomain.com/appname 
```

另外，如果我尝试去里面的任何路径，我会得到同样的错误......所以就像 rails.mydomain.com/testpath、rails.mydomain.com/blog 等

我已经阅读了一些关于 ruby​​ 文件夹权限的内容，我如何检查这些权限（我是一名试图成为服务器管理员的开发人员，所以任何建议都值得赞赏！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:03:33.303

我的问题都围绕着我的 ruby​​ 安装不是系统范围的。它是为 root 安装的，apache 无法访问 Ruby。

我按照 RVM 的系统范围安装指南使用 sudo 重新安装了 Ruby，一切都很好。

# playframework - 在游戏框架 2 中创建视图

> ID：11619230
> 
> 赞同：5
> 
> 时间：2012-07-23T19:32:14.273
> 
> 标签：playframework, playframework-2.0

我`view.input`在播放框架中创建了包，然后`form.scala.html`在它下面归档。现在我想在类中使用重定向，如下所示：

```
return ok(form.render(somevalue)); 
```

在这里，我无法获得`form`我在其中创建的内容`views`，因此出现错误。为什么会这样？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T19:41:15.083

你应该试试：

```
return ok(views.html.input.form.render(someValue)); 
```

甚至：

```
import views.html.input.form;

...
    return ok(form.render(someValue));
... 
```

但在这种情况下，最好使用包前缀构建视图的名称，以便在视觉上将它们与来自`views`包的视图区分开来`/app/views/input/inputForm.scala.html`：

```
import views.html.input.inputForm;

...
return ok(inputForm.render(someValue)); 
```

# php - Symfony2 中的 WSSE 身份验证，如何生成正确的标头？

> ID：11619231
> 
> 赞同：4
> 
> 时间：2012-07-23T19:32:15.447
> 
> 标签：php, symfony

我正在关注Symfony 2的[自定义身份验证提供程序说明书，但我不知道如何生成登录表单或具有适当所需 WSSE 标头的内容，因此我可以将其传递给我的自定义用户提供程序。](http://symfony.com/doc/master/cookbook/security/custom_authentication_provider.html)

有这方面的文档或教程吗？也许有一些例子？该文档缺少此类信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T19:27:26.603

实际上，您不应该使用登录表单将 WSSE 标头发送到您的服务器：登录表单将发送 HTTP POST 请求（带有 POST 参数），但不会像 WSSE 连接所期望的那样修改 HTTP 标头。

我正在将 WSSE 与 javascript 和/或某些客户端（如 Android 应用程序）一起使用。

为了测试，我在命令行中使用 curl，在请求中添加 wsse-headers。

这是[另一个可以帮助您操作 curl 的问题/答案](https://stackoverflow.com/questions/356705/how-to-send-a-header-using-a-http-request-through-a-curl-call)，以及一个[有用的 javascript wsse 生成器](http://www.teria.com/~koseki/tools/wssegen/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-28T15:27:54.167

Hee 是一个带有 Symfony 的 PHP 客户端 WSSE 生成器示例

```
function hashPassword($password, $salt)
{
    $salted = $password . '{' . $salt . '}';
    $digest = hash('sha512', $salted, true);

    //5000 iterations: the sysmfony default iterations
    for ($i = 1; $i < 5000; $i++) {
        $digest = hash('sha512', $digest . $salted, true);
    }

    return base64_encode($digest);
}

function wsse_header($username, $hashedPassword)
{
    $nonce = hash_hmac('sha512', uniqid(null, true), uniqid(), true);
    $created = new DateTime('now', new DateTimezone('UTC'));
    $created = $created->format(DateTime::ISO8601);
    $digest = hash('sha512', $nonce . $created . $hashedPassword, true);

    return sprintf(
            'X-WSSE: UsernameToken Username="%s", PasswordDigest="%s", Nonce="%s", Created="%s"',
            $username, base64_encode($digest), base64_encode($nonce), $created
    );
}

echo wsse_header('someUsername',
                 hashPassword('somePassword', 'someSalt')); 
```

您可以将此示例应用于其他客户端（Android、Ios、Javascript...）

# c# - 将文件发送到打印机，不打印任何内容

> ID：11619232
> 
> 赞同：2
> 
> 时间：2012-07-23T19:32:16.503
> 
> 标签：c#, asp.net, printing

我有这个要求，我必须从 Web 应用程序打印收据。我找到了在字符串中获取数据、生成临时文本文件、将其发送到打印机并删除文件的方法。一切都很好，除了打印部分，它什么也没产生，一个白色的文档！我在发送临时文件进行打印之前检查了我的临时文件并且那里有数据，也许我以错误的方式发送文件或忘记添加一个`PrintPageEventHandler`（我不太确定最后一个，或者我只是不知道）。

这就是我所做的：

```
private void printTextfile(String strFileName)
{
    //there is this standar that makes programmers declare variables at the 
    //beginning of the method and this "obj" and "str" things...
    PrintDocument objPrintDocument =null;
    String strPrinterName = string.Empty;
    //getting the printer name from web.config
    strPrinterName= ConfigurationManager.AppSettings["NOMBRE_IMPRESORA"];
    objPrintDocument = new PrintDocument();
    objPrintDocument.PrinterSettings.PrinterName = strPrinterName;
    //the temp text file created and with data
    objPrintDocument.DocumentName = strFileName;
    //I guess don't need this because I've setted up the file name (it is reachable)
    //objPrintDocument.PrintPage += new PrintPageEventHandler(this.printTextFileHandler);
    //send the file to the printer (this works)
    objPrintDocument.Print();
    //ok, now I've check my physic file and it has nothing in it!
} 
```

请告诉我是否有其他方法可以做到，我只需要查看打印的数据。注意：我没有使用白色前景色或类似的东西，打印机可以接收 1 MB 的文本，只打印 1 页，其中没有任何内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T19:43:08.443

您需要添加一个打印页面事件处理程序，将您的数据输出到打印机。
如果`strFileName`是包含数据的文件名，那么

*   在上面的代码中打开文件，将流读取器保存在全局实例 var 中。
*   添加页面事件处理程序
*   在退出时关闭流

我认为[MSDN 中的这个例子](http://msdn.microsoft.com/en-us/library/system.drawing.printing.printdocument.aspx)完全符合

如果您查看 MSDN 中有关[DocumentName](http://msdn.microsoft.com/en-us/library/system.drawing.printing.printdocument.documentname.aspx)属性的文档，您会发现此语句

```
The DocumentName property does not specify the file to print.  
Rather, you specify the output to print by handling the PrintPage event.  
For an example, see the PrintDocument class overview. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T16:58:36.543

试试这个：

```
 private void button1_Click(object sender, EventArgs e)
        {
            System.IO.StreamReader filetoprint;
              filetoprint = new System.IO.StreamReader(@"D:\\m.txt");
              printDocument1.Print();
              filetoprint.Close();
        } 
```

# javascript - OS X 上的 WebKit：如何在 WebView 中检测对 pushState() 的 JS 调用？

> ID：11619235
> 
> 赞同：0
> 
> 时间：2012-07-23T19:32:32.640
> 
> 标签：javascript, objective-c, macos, cocoa, webkit

假设我有一个 Mac OS X 应用程序，它链接到 WebKit 并使用 WebView 来显示 Web 内容。

如果此 webview 中的 JavaScript 调用该`window.history.pushState()`方法，我如何在 Objective-C 中检测到这一点？

理想情况下，我正在寻找类似于 ObjC 委托回调的东西，它会通知我的应用程序：**“pushState() 是使用这些参数调用的：XXX”。**

* * *

*注意*：我真的在寻找 ObjC 中的解决方案。假设我不能接受页面上的 JS 并替换/调整`pushState()`JS 中的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T21:16:03.073

我在 WebKit 源代码树中找到了这些私有 API。这正是我正在寻找的，除了它们是私有的，这可能会给我的特定用例带来问题。

```
@interface NSObject (WebFrameLoadDelegatePrivate)
...
- (void)webView:(WebView *)wv didPushStateWithinPageForFrame:(WebFrame *)frame ;
- (void)webView:(WebView *)wv didReplaceStateWithinPageForFrame:(WebFrame *)frame;
- (void)webView:(WebView *)wv didPopStateWithinPageForFrame:(WebFrame *)frame;
@end 
```

# c - 如何typedef一个常量变量

> ID：11619236
> 
> 赞同：4
> 
> 时间：2012-07-23T19:32:47.630
> 
> 标签：c, typedef

```
 typedef char* ptr;
  const ptr p; 
```

这是真的：

*   `p`指向一个常量字符；或者
*   `p`是一个常数，指向一个字符。

请说明原因

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T19:35:28.120

```
typedef char* ptr;
const ptr p; 
```

后一行相当于

```
char * const p; 
```

ie`p`是一个`const`指向`char`. 为`typedef`类型引入了一个新名称，它不是文本替换。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-23T19:41:56.370

首先，让我们暂时将 typedef 排除在等式之外。

`const char *p`并且`char const *p`都声明`p`为指向 const 数据的非常*量*指针*；*您可以指定指向不同的事物，但不能修改所指向的事物。*`p`*

 *`char * const p`声明`p`为指向*非 const*数据的*const*指针；您不能更改为指向不同的对象，但您可以修改所指向的对象。*`p``p`*

 *`const char * const p`并且`char const * const p`都声明`p`为指向*const*数据的*const*指针。这应该是不言自明的。

 *`typedef`有点不直观。`ptr`是 的同义词`char *`，因此`const ptr`充当`char * const`; `const`限定符应用于指针类型，而不是类型`char`。***

# regex - 使用正则表达式获取列表中的每个项目

> ID：11619240
> 
> 赞同：0
> 
> 时间：2012-07-23T19:33:02.183
> 
> 标签：regex, qregexp

如何使用 QRegExps 查找列表中的每个项目？我想做的是将每个团队都列在一个列表中。它们必须用逗号或逗号和空格分隔。例如，我想得到这个列表中的每个团队：

```
    爱国者队、凯尔特人队、红袜队

```

我最初的正则表达式是：

```
    [^, ]+

```

这有一个问题，因为允许球队在其中使用空格字符，例如红袜队。我试过的另一个是这样的：

```
    [^,] +

```

但这引起了问题，因为它抓住了逗号后的空格，并将其附加到列表中以下项目名称的开头。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:37:02.870

```
list = str.split(QRegExp(",\\s+")); 
```

或者，当空格是可选的：

```
list = str.split(QRegExp(",\\s*")); 
```

# c# - Lambda 表达式减去两个字符串数组

> ID：11619241
> 
> 赞同：0
> 
> 时间：2012-07-23T19:33:07.670
> 
> 标签：c#, lambda

我正在尝试在两个字符串数组上执行 SQL MINUS 的等效操作。这是我试图复制的代码：

```
 string returnValue = "";
        foreach (string eachWord in allWords)
        {
            foreach (string ignoreWord in ignoreWords)
            {
                if (eachWord != ignoreWord)
                {
                    returnValue += eachWord;
                }
            }
        } 
```

我想将其重写为：

```
returnValue = allWords.Minus(ignoreWords); 
```

或同样简洁的东西。我意识到在幕后我会得到相同的代码，但我只是在迂腐！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T19:34:52.887

```
returnValue = allWords.Except(ignoreWords); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:06:44.147

如果您只想拥有字符串而不是`IEnumerable<string>`，则可以这样做：

```
var res = allWords.Except(ignoreWords); 
```

接着 ，

```
StringBuilder sb = new StringBuilder();
       res.ForEach(item => sb.Append(item));
        string ss = sb.ToString(); 
```

或者如果你想要一些分隔符，你可以这样做：

```
string concatenatedStr =  string.Join(",", res.ToArray()); 
```

# xml - 仅对某些模板使用外部 XSLT

> ID：11619242
> 
> 赞同：0
> 
> 时间：2012-07-23T19:33:07.707
> 
> 标签：xml, xslt, stylesheet, docbook

我想导入一个 XSLT 样式表，但本质上是默认忽略它，并且只在调用时使用它的模板。

我们的内容包含自定义 XML + DocBook 样式表，因此它目前由两个 XSLT 转换：XML => my.xsl => docbook.xsl => XHTML。是否可以从 my.xsl 完成这一切？

```
<!-- My XML -->
<xsl:template match="a"/>
<xsl:template match="b"/>
<xsl:template match="c"/>

<!-- DocBook XML -->
<xsl:template match="table">
  <xsl:apply-templates select="." mode="docbook"/>
</xsl:template> 
```

导入 docbook.xsl 样式表的问题在于它包含许多其他模板，这些模板会干扰现有模板。理想情况下，有一种方法可以将 docbook.xsl 导入指定模式，但这是不可能的。有没有办法在不修改 docbook.xsl 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T01:16:13.880

主样式表中的模板总是比导入样式表中的模板具有更高的优先级。为了避免调用导入的模板，只需在需要的情况下覆盖它们。

这应该是首选技术。另一种选择是：

1.  识别存在潜在冲突的匹配模式。
2.  使用模式来区分两者。
3.  当您使用 <xsl:apply-templates> 在适合您识别的重叠模式之一的选择上调用模板时，请使用适当的模式（或无模式）来实现您的预​​期结果（主模板与导入的模板）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T02:45:23.750

**使用[模式](http://www.w3.org/TR/1999/REC-xslt-19991116#modes)**。

在导入的样式表中，所有模板都处于没有人使用的唯一名称的模式。例如，使用`prefix:mymode`并将前缀`prefix`绑定到属于您的命名空间。

**要从导入的样式表调用处理，请使用**：

```
<xsl:apply-templates select="$vNodesToBeProcessed" mode="prefix:mymode"/> 
```

# facebook - FOSFacebookBundle 有效，但 FOSUserBundle 似乎不起作用

> ID：11619245
> 
> 赞同：1
> 
> 时间：2012-07-23T19:33:29.797
> 
> 标签：facebook, symfony, fosuserbundle

我可以使用 FOSFacebookBundle 登录，一切正常。但是，FOSUserBundle 似乎不起作用，因为分析器显示用户名：匿名和角色：{}。而且，数据库中没有关于登录用户的用户数据。也许，我不明白它是如何工作的。请帮忙。

这是我的 config.yml

```
fos_user:
 db_driver: orm # other valid values are 'mongodb', 'couchdb' and 'propel'
 firewall_name: public
 user_class: Trade\TradeBundle\Entity\User

fos_facebook:
  file:   %kernel.root_dir%/../vendor/facebook/src/base_facebook.php
  alias:  facebook
  app_id: my_app_id
  secret: app_secret_key
  cookie: true
  permissions: [user_about_me]

services:
 fos_facebook.auth:
    class: Trade\TradeBundle\Security\User\Provider\FacebookProvider
    arguments:
        facebook: "@fos_facebook.api"
        userManager: "@fos_user.user_manager"
        validator: "@validator"
        container: "@service_container" 
```

这是我的 security.yml

```
security:
factories:
    - "%kernel.root_dir%/../vendor/bundles/FOS/FacebookBundle/Resources/config/security_factories.xml"

role_hierarchy:
    ROLE_ADMIN:       ROLE_FACEBOOK
    ROLE_SUPER_ADMIN: ROLE_ADMIN

providers:
    my_fos_facebook:
        id: fos_facebook.auth

firewalls:
    public:
        pattern:   ^/.*
        fos_facebook:
            app_url: "app_url"
            server_url: "server_url"
            login_path: /user/login
            check_path: /user/login_check
            default_target_path: /
            provider: my_fos_facebook
        anonymous: true
        logout:
            handlers: ["fos_facebook.logout_handler"] 
```

下面的代码似乎不起作用，因为当我使用 facebook setTimeout(goLogIn, 500) 函数登录时，如果没有调用。

```
function goLogIn(){
    window.location.href = "{{ path('user_login_check') }}";
}

function onFbInit() {
    if (typeof(FB) != 'undefined' && FB != null ) {
        FB.Event.subscribe('auth.statusChange', function(response) {
            if (response.session || response.authResponse) {
                setTimeout(goLogIn, 500);
            } else {
                window.location.href = "{{ path('_security_logout') }}";
            }
       });
    }
} 
```

这些是我的控制器操作：

```
/**
 * @Route("/user/login", name = "user_login")
 */
public function loginAction()
{

}

/**
 * @Route("/user/login_check", name = "user_login_check")
 */
public function loginCheckAction()
{

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T12:28:32.760

为了让 FOSUserBundle 与 FOSFacebookBundle 一起工作，您需要为 facebook 登录指定一个特定的登录路径`security.yml`：

```
 public:
    fos_facebook:
        check_path: /loginFacebook 
```

当然，您需要在以下位置正确指出该路线`routing.yml`：

```
_security_check:
pattern: /loginFacebook 
```

然后您需要更改 facebook javascript 上的检查 URL：

```
function goLogIn(){
    window.location.href = "{{ path('_security_check') }}";
} 
```

最后一件事是为新路由创建控制器和操作（这非常重要，否则它将不起作用）并将其留空：

```
public function loginFacebookAction()
{
    return array();
} 
```

当然，您需要根据自己的需要进行调整，例如我使用 . 的地方`DefaultController`，您显然使用`UserController`.

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T01:50:52.217

由于您的权限请求，我猜您正在存储空数据：

```
permissions: [user_about_me] 
```

我建议更改为推荐的教程：

```
permissions: [email, user_birthday, user_location] 
```

# ruby-on-rails - Rails 3.1 Ransack HABTM

> ID：11619246
> 
> 赞同：9
> 
> 时间：2012-07-23T19:33:31.023
> 
> 标签：ruby-on-rails, search, has-and-belongs-to-many, ransack

Ransack 是否支持 HABTM？

拥有模型：

*   选购 HABTM 类别
*   类别 HABTM 商店

我可以使用 ransack 按单个类别搜索商店吗？表格是什么样子的？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-17T15:32:21.797

我认为您尝试使用的领域是

```
:categories_id_eq 
```

用法会是这样的

```
<%= f.label :categories_id_eq, "Category" %>
<%= f.collection_select :categories_id_eq, Category.order(:title), :id, :title %> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-01T11:50:48.273

你应该知道有一些陷阱：虽然这很好用

```
:categories_id_eq 
```

如果您想查找任何类别的产品，您可以选择

```
:categories_id_in 
```

但是，如果您需要选择属于所有类别的产品，它将无法按预期工作：

```
:categories_id_all 
```

返回零结果见讨论：

[Rails，Ransack：如何在 HABTM 关系中搜索“所有”匹配项而不是“任何”匹配项](https://stackoverflow.com/questions/13409627/rails-ransack-how-to-search-habtm-relationship-for-all-matches-instead-of-a)

[将 ActiveRecord habtm 查询转换为 Arel](https://stackoverflow.com/questions/13420773/convert-activerecord-habtm-query-to-arel/13445889#13445889) 。

# cuda - cudaMemcpy & 阻塞

> ID：11619247
> 
> 赞同：5
> 
> 时间：2012-07-23T19:33:33.613
> 
> 标签：cuda

我对一些关于阻塞和 cudaMemcpy 的评论感到困惑。据我了解，Fermi HW 可以同时执行内核并执行 cudaMemcpy。

我读到 Lib func cudaMemcpy() 是一个阻塞函数。这是否意味着 func 将阻止进一步执行，直到副本完全完成？或者这是否意味着在先前的内核完成之前不会开始复制？

例如，此代码是否提供相同的阻塞操作？

```
SomeCudaCall<<<25,34>>>(someData);
cudaThreadSynchronize(); 
```

对比

```
SomeCudaCall<<<25,34>>>(someParam);
cudaMemcpy(toHere, fromHere, sizeof(int), cudaMemcpyHostToDevice); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T19:49:07.900

你的例子是等价的。如果您想要异步执行，您可以使用流或上下文和[cudaMemcpyAsync](http://developer.download.nvidia.com/compute/cuda/4_1/rel/toolkit/docs/online/group__CUDART__MEMORY_g732efed5ab5cb184c920a21eb36e8ce4.html)，以便您可以将执行与复制重叠。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-12T09:21:04.113

根据 NVIDIA 编程指南：

> 为了便于主机和设备之间的并发执行，一些函数调用是异步的：在设备完成请求的任务之前，控制权被返回给主机线程。这些是：
> 
> *   内核启动；
> *   两个地址之间的内存复制到同一个设备内存；
> *   从主机到设备的内存复制 64 KB 或更少的内存块；
> *   由以 Async 为后缀的函数执行的内存拷贝；
> *   内存设置函数调用。

因此，只要您的传输大小大于 64KB，您的示例就是等效的。

# facebook - cakephp 2.1 Facebook 使用 Auth 连接

> ID：11619251
> 
> 赞同：0
> 
> 时间：2012-07-23T19:33:51.623
> 
> 标签：facebook, authentication, cakephp-2.1

任何人都可以帮助我让我的 cakephp 2.1 应用程序中的 facebook 连接工作。现在我可以使用 Auth 进行用户身份验证，我需要将 facebook 连接添加到相同的位置。用户可以通过填写用户表格进行注册，也可以通过 facebook 注册。谷歌搜索了很多，但无法让它工作。

教程链接或带有完整代码的示例将非常有用，我是 cakephp 新手。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:39:22.470

我正在使用这个插件，它与我的 Cake 2.1 配合得很好

[https://github.com/webtechnick/CakePHP-Facebook-Plugin](https://github.com/webtechnick/CakePHP-Facebook-Plugin)

该页面上有一个自述文件；）

# sql-server - 累计和百分比

> ID：11619252
> 
> 赞同：3
> 
> 时间：2012-07-23T19:33:57.903
> 
> 标签：sql-server, sql-server-2005, sum

我有一张名为 Sales 的表：

```
id_sale  id_ticket  total  state
-------  ---------  -----  -----
100      100        30     inactive    
101      101        30     active    
102      101        60     active    
103      102        30     active    
104      102        30     active    
105      103        10     active    
106      103        5      active 
```

我需要的是`total`在状态处于活动状态时获取列的总和 sum(total) 并将其乘以 x 百分比（我可以这样做），因此我必须选择所有票的总和（全部票总和）是`<= sum(total) * x percentage`并将其复制到另一个表（相同的值）

因此，如果我有票 101 = 90 和票 102 = 60 和票 103 = 15 的总和，并且总和（总）*x 百分比 = 160，查询将只返回来自票 101 和 102。

整个早上阅读我发现了一个代码，它以某种方式完成了我需要的事情，但使用 id_Sales 而不是 id_ticket：

```
 select t1.id_sale, t1.total, SUM(t2.total) as sum
    from sales t1
    inner join sales t2 on t1.id_sale >= t2.id_sale
    where t2.state='active'
    group by t1.id_sale, t1.total
    having sum(t2.total)<=(
                           select sum(total)*.65
                           from sales
                           where state='active')
    order by t1.id_sale 
```

我希望收到的是：

```
id_sale  id_ticket  total  state
-------  ---------  -----  ----- 
101      101        30     active    
102      101        60     active    
103      102        30     active    
104      102        30     active 
```

其中票 101 和票 102 的总和为 <= sum(total)*x

所以 101 和 102 之和 = 150 和 sum(total)*x = 160 （例如）

我怎样才能做我需要的事情，或者我怎样才能编辑这个代码，让它做我正在寻找的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T22:47:40.220

你可以从这样的事情开始：

```
WITH grouped_and_ranked AS (
  SELECT
    id_ticket,
    ticket_total = SUM(total),
    grand_total = SUM(SUM(total)) OVER (),
    ticket_rnk = ROW_NUMBER() OVER (ORDER BY id_ticket)
  FROM sales
  WHERE state = 'active'
  GROUP BY id_ticket
),
cumulative AS (
  SELECT
    id_ticket,
    ticket_total,
    grand_total,
    ticket_rnk,
    total_so_far = ticket_total
  FROM grouped_and_ranked
  WHERE ticket_rnk = 1
  UNION ALL
  SELECT
    r.id_ticket,
    r.ticket_total,
    r.grand_total,
    r.ticket_rnk,
    total_so_far = c.total_so_far + r.ticket_total 
  FROM grouped_and_ranked r
    INNER JOIN cumulative c ON r.ticket_rnk = c.ticket_rnk + 1
  WHERE r.ticket_total columns
)
SELECT
  s.id_sale,
  s.id_ticket,
  s.total,
  s.state
FROM sales s
INNER JOIN cumulative c ON s.id_ticket = c.id_ticket
; 
```

第一个[CTE](http://msdn.microsoft.com/en-us/library/ms175972%28v=sql.90%29.aspx "WITH common_table_expression (Transact-SQL)")检索有效销售并按票证计算总计以及`grouped_and_ranked`总计（使用[windowed](http://msdn.microsoft.com/en-us/library/ms189461%28v=sql.90%29.aspx "OVER 子句 (Transact-SQL)") `SUM()`）。它还为门票分配排名编号，以便稍后在计算运行总数时使用。

下一个 CTE`cumulative`是递归 CTE。只要运行总计不大于总计的指定`@percent`年龄，它就会从前一个结果集中检索行。

主 SELECT 使用最终工单列表通过将列表连接回`sales`表来获取详细信息行。

这个查询可以[在 SQL Fiddle](http://sqlfiddle.com/#!3/33bec/9)进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-14T15:45:20.800

这可以相对容易地仅使用窗口函数完成，无需递归。

```
select id_sale, id_ticket, total, state
from (
  select
    id_sale, id_ticket, total, state,

    -- Now we can calculate the cumulative percentage easily
    sum(sum_per_ticket) over (order by id_sale) / sum(sum_per_ticket) over () percentage
  from (
    select
      id_sale, id_ticket, total, state,

      -- Calculate the sum per ticket and place it only on the first row per id_ticket
      -- Fill the other rows with nulls.
      case when id_sale = 
                first_value(id_sale) over (partition by id_ticket order by id_sale) 
           then sum(total) over (partition by id_ticket) end sum_per_ticket
    from sales
    where state = 'active'
  ) t
) t
where percentage <= 0.65
order by id_sale 
```

[我在博客中详细介绍了计算累积百分比](https://blog.jooq.org/2019/02/14/how-to-calculate-a-cumulative-percentage-in-sql/)。

# java - 从 SignedObject 获取时出现 InvalidObjectException

> ID：11619254
> 
> 赞同：1
> 
> 时间：2012-07-23T19:33:59.297
> 
> 标签：java, sockets, deserialization, objectinputstream, siena

我正在使用 ObjectInputStream 通过 TCP 连接发送封装在 SignedObject 中的 Message 对象中的对象。这是基本代码：

发送

```
Object data = someObject;
ObjectOutputStream = new ObjectOutputStream(socket.getOutputStream());
Message newMsg = new Message(data);
out.writeObject(security.signObject(newMsg,privKey)); 
```

收到

```
ObjectInputStream in = new ObjectInputStream(socket.getInputStream());
Object line = in.readObject();
SignedObject messageIn = (SignedObject) line;
Message msg = (Message) messageIn.getObject(); 
```

Message 类是一个基本类，只有字段，没有方法。其中一个字段是 Object Message.data，在本例中包含 siena.Filter 或 siena.Notification。当我调用 SignedObject.getObject() 时，我得到一个 InvalidObjectException。堆栈跟踪如下。

```
java.io.InvalidObjectException: siena.SENPInvalidFormat
at siena.Filter.readObject(Filter.java:127)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at java.io.ObjectStreamClass.invokeReadObject(Unknown Source)
at java.io.ObjectInputStream.readSerialData(Unknown Source)
at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
at java.io.ObjectInputStream.readSerialData(Unknown Source)
at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
at java.io.ObjectInputStream.readObject0(Unknown Source)
at java.io.ObjectInputStream.readObject(Unknown Source)
at java.security.SignedObject.getObject(Unknown Source) 
```

消息传输的代码是正确的。它适用于其他类的许多其他情况，甚至适用于同一类的其他版本。它不适用于特定版本的 siena.Filter 和 siena.Notification。

我可以看到正在发送的类的 readObject() 方法（siena.Filter 或 siena.Notification）正在被调用，但我不知道这是否应该发生。我知道在 siena 方法中抛出了一个异常，我猜这会导致 InvalidObjectException。

所以问题是，是 siena.class.readObject() 抛出异常并且没有正确写入的问题，还是 siena.class.readObject() 被调用的问题？如果是后者，我将如何解决这个问题？

谢谢，大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T18:51:28.177

为什么你只是将你从 InputObjectStream 中得到的东西类型转换为你传递的对象类型？获得 readObject 后，只需将其类型转换为 SingledObject，应该可以吗？再次抱歉，我无法完全理解。最好在这里输入一些代码。

# php - PHP Filesize 直接路径

> ID：11619255
> 
> 赞同：0
> 
> 时间：2012-07-23T19:34:05.343
> 
> 标签：php, filesize

我创建了一个动态站点，我们的首席 IT 人员移动了它的目录，弄乱了我的编码。我已经修复了减去文件大小的所有内容。我已经尝试了多个我研究过的技巧，但它仍然没有显示任何内容。

原来是

```
$download = $row['PDF'] 
```

然后后来我会这样称呼它

```
<?php
<span class = \"filesize\">(".filesize($download)." bytes)</span>";
?> 
```

我试过以下

```
 <?php
<span class = \"filesize\">(".filesize("/folder/".$download)." bytes)</span>";
?> 
```

依然没有！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:35:58.393

你可能想要一个相对路径。试试这个：

```
filesize("./folder/".$download) 
```

或这个：

```
filesize("folder/".$download) 
```

两者都将开始在当前工作目录中查找，然后尝试查找`folder`文件名，而不是相对于文件系统根目录进行访问。

# php - 维护 HTML 页面和 PHP 服务器页面之间的状态

> ID：11619256
> 
> 赞同：0
> 
> 时间：2012-07-23T19:34:15.830
> 
> 标签：php, javascript, html

我正在设计一个简单的拖放测验。对于每个框/答案，我们将尝试获得正确答案的次数限制为两次。但是，我想将测验的功能和状态与显示/视图分开。目前，当用户试图通过在问题框顶部放置一个答案框来获得正确答案时，将对一个返回“真”或“假”值的 PHP 页面进行 ajax 调用。我们一直在评估是否要在 PHP 页面上使用 Session 变量、cookie 或更简单的东西来跟踪每个盒子消耗了多少次尝试。最好（为了良好的形式）以某种方式在服务器上维护此数据的状态 - 所以客户端不知道发生了什么。会话变量对我来说似乎很有意义 - 当用户继续尝试使用不同的问题/答案组合时，服务器会跟踪尝试次数并返回（在 ajax 响应中）用户问题的结果（正确/错误，以及如果有的话，这个答案还剩下多少次尝试）但我想知道是否有更好的解决方案。有输入吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:36:07.737

Session 似乎很适合我。Cookie 可能会被篡改，因此如果您需要准确的错误计数，我会避免这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:37:09.153

Sessions 可能是你最好的选择。也可以使用 Cookie，或者如果您可以保证浏览器中 HTML5 localStorage 的可用性，您也可以使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T19:37:26.737

不幸的是，为了保持功能分开，没有。您可以使用会话变量，或与存储在 cookie 中的会话 ID 配对的数据库存储。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T19:45:20.337

将当前用户状态存储到会话中（临时存储）并跟踪他回答了什么，最后一步将数据存储到数据库或文件中（永久存储）。会话对于每个用户都是单独的。用户无法更改您的站点会话。

[会话使用](http://www.php.net/manual/en/session.examples.basic.php)

# regex - 正则表达式出现格式正确，但未在 grep 中输出预期结果

> ID：11619259
> 
> 赞同：1
> 
> 时间：2012-07-23T19:34:34.470
> 
> 标签：regex, grep

我正在尝试在我的代码库中搜索以下模式的实例：

```
m_vParts[foo] = 
```

以及具有不同空格的类似实例。所以我可以使用这个正则表达式：

```
m_vParts\[.*\]\s*=[^=]\s* 
```

当我在[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)和其他 regex-tester 类型的网站上测试它时，它找到了我想要的。但是，当我实际上`grep`（或`egrep`）我没有得到任何结果时。我的猜测是我的正则表达式对于正则表达式`grep`的方言格式不正确，但我不确定我到底在哪里。

这是我给出的实际命令：

```
[e]grep -Irn "m_vParts\[.*\]\s*=[^=]\s*" . 
```

我试过单引号和双引号。

这是代码库的示例代码的一小部分示例：

```
pcTab->m_vParts[iLastPart] = pcPart;
if ( m_pcCurrentTab->m_vParts[i]== pcPart ) 
```

我希望第一行是匹配的，而第二行不是。

另外，我应该注意我在 Windows 7 x64 上使用 GnuWin32 grep。

在此先感谢您的任何指导；非常想避免非自动搜索:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:43:19.293

只需在 re 周围添加引号：

```
$ vim 1.txt
$ egrep 'm_vParts\[.*\]\s*=[^=]\s*' 1.txt
pcTab->m_vParts[iLastPart] = pcPart; 
```

如您所见，一切正常。

# c# - 一个长字符串 => 数组/列表 来自引号内的文本

> ID：11619261
> 
> 赞同：0
> 
> 时间：2012-07-23T19:34:34.430
> 
> 标签：c#, string

> 3>>asdf3424"此文本".,.<<<>>3asfdf"THISTOO"6575tsdfbxbxcv"ANDTHIS",,p-01fa

到一个数组或列表`{ "THIS TEXT", "THISTOO, "ANDTHIS" }`

有谁知道如何*有效地*做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T19:39:47.673

```
var result = Regex.Matches(input, @"\"".+?\""")
             .Cast<Match>()
             .Select(m => m.Value)
             .ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T19:39:44.693

如果一次读取每个字符并查找引号，然后将以下内容读入一个 char 数组，直到找到另一个引号，然后继续查找一个，您可以轻松转换为 char 数组列表细绳。

它应该只是一个简单的时间（仍然要读取的字符）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T19:42:11.213

如果你有一些大字符串可能是这样的：

```
string str = "hello,hi,bye"; 
```

你可以用逗号分隔它，如下所示：

```
string[] breakups = str.Split(new[] {',' }); 
```

# regex - 正则表达式匹配所有但不为空

> ID：11619265
> 
> 赞同：19
> 
> 时间：2012-07-23T19:35:09.000
> 
> 标签：regex

必须通过正则表达式验证行，

1.  行可以包含任何字符、空格、数字、浮点数。

2.  行不应为空

我试过这个：

```
[A-Za-z0-9~`!#$%^&*()_+-]+ //thinking of all the characters 
```

任何替代解决方案都会有所帮助

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-03-27T10:32:52.300

试试这个来匹配包含不仅仅是空格的行

```
/.*\S.*/ 
```

这表示

`/`= 分隔符
`.*`= 零个或多个除换行符之外的任何内容
`\S`= 除空格之外的任何内容（换行符、制表符、空格）

所以你得到
匹配除了换行符之外的任何东西+不是空格的东西+除了换行符之外的任何东西

如果仅空白行算作非空白，则将规则替换为`/.+/`，这将匹配 1 个或多个任何内容。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-23T19:37:55.420

尝试：

```
.+ 
```

这 。匹配任何字符，加号至少需要一个。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-23T20:12:10.120

尝试 ：`[^()]`

在 python 中`re.match()`：

```
 >>> re.match( r"[^()]", '' )
  >>> re.match( r"[^()]", ' ' )
  <_sre.SRE_Match object at 0x100486168> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-23T19:39:03.243

您可以检查该行是否匹配`^$`，如果匹配则它为空白，您可以将其用作失败，否则它将通过。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-08-10T13:11:50.733

尝试这个：

```
^.+$ 
```

在尝试查找不具有空属性的标签时，我在 python BeautifulSoup 中使用了它。它运作良好。示例如下：

```
# get first 'a' tag in the html content where 'href' attribute is not empty
parsed_content.find("a", {"href":re.compile("^.+$")}) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-03-30T05:37:31.280

尝试

```
^[A-Za-z0-9,-_.\s]+$ 
```

对于字母、数字，此字符串将返回 true，`,-_.`但不接受空字符串。

`+`-> 量词，匹配 1 到无限制。

`*`-> 量词，匹配 0 到无限制。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-04T17:12:00.463

```
^\S+[^ ]$ 
```

`^`- 行首

`\S` - 任何非空白字符

`+`- 一次或多次发生

`[^ ]`- 不在集合中的字符（在这种情况下只有空格），^ 和 ] 之间有一个空格，这将匹配 dsadasd^adsadas

`$`- 行结束

[![有什么可以帮助你的](../Images/a49dc4a2f0bdc4a0f2e4a5b9647ef331.png)](https://i.stack.imgur.com/4Z8KA.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-02-06T16:52:45.410

这将匹配至少 1 个字符的每一行：

```
(.*?(\n)) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-08T16:37:15.407

`.*`- 匹配零到无限次任何字符（行终止符除外）

`\S`- 匹配任何非空白字符

回答：`.*[\S].*`

`'aaaaa'`匹配

`'aaaaa '`匹配

`' aaaaa'`匹配

`' aaaaa '`匹配

`'aaaaa aaaaa aaaaa'`匹配

`' aaaaa aaaaa aaaaa'`匹配

`'aaaaa aaaaa aaaaa '`匹配

`' aaaaa aaaaa aaaaa '`匹配

`' '`不匹配

您可以在以下位置测试此正则表达式：**[https ://regex101.com](https://regex101.com)**

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-11-04T17:25:00.203

这一个将匹配所有内容，但不是空白字符串：

```
^(\s|\S)*(\S)+(\s|\S)*$ 
```

空白字符串是那些仅包含空字符（制表符、空格等）的字符串。

# python - 动态决定使用哪个浏览器

> ID：11619266
> 
> 赞同：2
> 
> 时间：2012-07-23T19:35:12.307
> 
> 标签：python, browser

我正在尝试找到一种方法来动态决定哪个网络浏览器将打开我单击的链接。我访问的一些网站在 Iexplore 和其他我更喜欢用 chrome 打开的网站上效果最好。如果我将我的默认浏览器设置为其中之一，我会经常发现自己用一个浏览器打开一个网站，而不是复制 URL 并在新的浏览器中打开它。当人们向我发送链接时，这种情况经常发生。

我曾想过将 python 脚本作为默认浏览器，并创建一个函数来决定哪个浏览器应该打开页面。我尝试通过更改一些注册表项将脚本设置为我的默认浏览器。它似乎有效，但是当我尝试打开一个站点（例如在运行窗口中写入“ [http://stackoverflow.com](http://stackoverflow.com) ”）时，该 url 不会显示在 sys.argv 中。

还有另一种方法可以找到发送给程序的参数吗？

我更改的注册表项是：

```
HKEY_CURRENT_USER\Software\Classes\http\shell\open\command
HKEY_CURRENT_USER\Software\Classes\https\shell\open\command
HKEY_LOCAL_MACHINE\SOFTWARE\Classes\http\shell\open\command
HKEY_LOCAL_MACHINE\SOFTWARE\Classes\https\shell\open\command 
```

它似乎可以在 windows XP 上运行，但在 7 上不起作用（默认浏览器仍然相同......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T19:24:24.760

您可以尝试在现有软件之上构建一些自动化浏览器-网页交互的软件，[看看 Selenium](https://stackoverflow.com/questions/11619266/dynamically-decide-which-browser-to-use)，也许您可​​以以某种方式对其进行调整以满足您的需求。

但是请注意，您要解决的问题相当复杂，例如考虑一下：您将如何将自己对网站的主观体验转化为代码？有一些客观指标，一些页面简单地损坏了，但是很多事情，比如糟糕的 CSS 样式很难评估和量化。

编辑：[这是一个 Web 测试框架，您可以在其中使用 Python 生成自己的测试。](http://testutils.org/sst/)从 Selenium 开始可能更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:42:11.083

您是否考虑过使用模拟 IE 渲染的浏览器扩展而不是本地解决方案？我相信 chrome/firefox 有一个称为“ie tab”的选项卡。[http://www.ietab.net/](http://www.ietab.net/)

# iphone - 在 UILabel 中显示表情符号？

> ID：11619267
> 
> 赞同：18
> 
> 时间：2012-07-23T19:35:13.207
> 
> 标签：iphone, objective-c, emoji

不知道我在这里错过了什么，搜索并没有帮助我。我想在 UILabel 中显示表情符号字符，但这不是这样做的：

```
UILabel *label = [[UILabel alloc] init];
label.font = [UIFont fontWithName:@"AppleColorEmoji" size:16.0];
label.text = [NSString stringWithFormat:@"%C", 0x1F431];
// ... etc. 
```

适用于其他非字母 unicode 字符，例如棋子，但不适用于我尝试过的任何表情符号字符。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2015-03-27T06:32:20.660

要使用表情符号，只需按`Control`+ `command`+ `space`(⌃⌘空格)。表情符号无需使用 unicode。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-23T19:47:19.930

您可能没有为表情符号字符使用正确的编码。例如，在您的示例中，我认为您正在寻找这样的东西：

```
label.text = [NSString stringWithFormat:@"%C", 0xe04f]; 
```

查看[此](http://arashnorouzi.wordpress.com/2011/08/31/adding-graphics-and-emoji-characters-to-apple-push-notifications/)表以获取您需要的编码。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-06-03T01:05:45.967

在 xcode 中，只需转到顶部栏并单击 EDIT > EMOJIS & SYMBOLS，就会弹出一个表情符号框，您可以将其添加到应用程序中的任何文本中，如果您需要将其添加到文本中，甚至可以在界面构建器中使用有一个uilabel。

![在此处输入图像描述](../Images/d713e152c48a63eb9722902c6cd39631.png)

![在此处输入图像描述](../Images/14873ccdd439751a730e42e4d36eea61.png)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-05-26T02:29:20.830

在斯威夫特你可以这样做：

```
label.text = "" 
```

一定要包括引号。否则，您会将文本设置为变量中的任何内容。以下将显示为“猫”：

```
let  = "cat"
label.text = 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-18T21:39:31.517

unicode 6.1 编码也可以工作，但您必须像这样指定它们：

```
label.text = @"\U0001F431"; 
```

# jquery - 隐藏/删除从选择选项列表中选择的具有相同列表的多个选择标签

> ID：11619268
> 
> 赞同：0
> 
> 时间：2012-07-23T19:35:16.143
> 
> 标签：jquery

假设我有 4 个使用相同选项的选择标签。我想从选择中删除选定的选项。目前我尝试了这段代码：

```
 function connect(val)
{
    $(".option").show();
    $(".selectbox").each(function(i) { 
        var obj = $("option[value='" + $(this).val() + "']");
        alert(obj);
        if($(this).val() != "") obj.remove();

    });
} 
```

我有这个用于选择标签：

```
for()
{
<select id = "sc" name = "connect_array[]" class="input-select" onchange = "connect(this.value)">
for()
{
<option></option>
}
</select>
} 
```

但实际发生的是，它只删除了第一个选择的选项，当其他选择标签选择了所有选择时，第一个选择最终没有选择，您仍然可以在其他选择标签中看到完整的选择。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:44:58.193

试试这个，你所有的选择都需要有 class="selectbox"

```
$(".selectbox").change(function(){
    var selectedIndex = $(this).index();
    var myVal = $(this).val();
    $(".selectbox").each(function(i){
        if (selectedIndex != i){
            $("option", this).each(function(){
                if (myVal == $(this).val()) $(this).remove();
            });
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:49:19.673

```
$('.selectbox').change(function(){
        var selected_val = $(this+"option:selected").val();
        $(".selectbox").each(function(i) { 
            $(this+'option[value="'+selected_val+'"]').remove();
        });
    } 
```

# vba - Excel 2007 - 使用 VBA 更改透视筛选器

> ID：11619280
> 
> 赞同：1
> 
> 时间：2012-07-23T19:36:08.277
> 
> 标签：vba, excel, excel-2007

我在 Excel 中有多个数据透视表。使用控制表我希望能够通过按下按钮来更改所有数据透视表的过滤器。因此，最后应该有一个“删除所有过滤器”按钮和一个“设置过滤器”按钮。然后“设置过滤器”应在数据透视表1、数据透视表2 和数据透视表3 上设置“多个过滤器”（即只显示类别1、2 和3，而不是4 和5）。

我知道如何添加按钮以及如何为它们分配代码，但我真的不知道如何在 VBA 中解决这个问题 - 有什么想法吗？

预先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:48:14.473

正常情况下，当我知道如何在 Excel 中做某事而不是 VBA 时，我会记录一个执行任务的宏，然后查看宏生成的代码。您可以录制两个宏，一个用于设置，另一个用于取消设置过滤器。然后，您可以复制按钮的代码或直接调用宏。

# objective-c - 在 iOS 中使用自定义导航栏

> ID：11619289
> 
> 赞同：1
> 
> 时间：2012-07-23T19:36:50.933
> 
> 标签：objective-c, ios, ios5

我在 .xib 中添加了一个导航栏。我这样做是因为我想定制它的很多东西。我希望我的导航控制器在该屏幕中使用该导航栏。

我创建了名为 navBar 的出口并做了：

```
[self.navigationController.navigationBar = navBar; 
```

但它说 navigationBar 是只读的。是否可以将我现有的导航控制器与我添加到屏幕的导航栏链接起来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:51:47.363

在我看来，您可能实际上并不想使用[UINavigationBar](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationBar_Class/Reference/UINavigationBar.html)。正如参考文档中所述：

> UINavigationBar 类实现用于导航分层内容的控件。它是一个栏，通常显示在屏幕顶部，包含用于在层次结构中上下导航的按钮。主要属性是左（后）按钮、中心标题和可选的右按钮。您可以为其中的每一个指定自定义视图。

因此，如果您计划的自定义不仅仅是添加按钮、更改其颜色/背景、不透明度、隐藏等。您最好创建一个模仿导航栏外观的[UIView 。](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)

这是一个示例，说明如何为[您的 UIView 提供导航栏的渐变外观](https://stackoverflow.com/a/1931498/1036)。

它更灵活，实际上很容易做到，但是你有很多阅读和测试在你面前:)。

以防万一如果它只是你想添加的按钮，你最好使用[UIToolbar](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIToolbar_Class/Reference/Reference.html)代替

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:41:37.463

你不能那样做。由于导航控制器的导航栏嵌入了*很多*设置，因此它是只读属性，您不应该更改它。

您到底想通过界面构建​​器实现什么目标。我的意思是，使用最新的 API，通过自定义原始 navcontroller 的导航栏，只需几行代码即可轻松完成所有操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T19:44:45.987

您不会在界面生成器中管理导航栏。此外，您不会尝试设置导航控制器的 navigationBar 属性。

要进行更改，您需要更改 navigationBar 的 navigationItem 属性

```
[self.navigationController.navigationBar setItems:newNavItems]; 
```

您还可以对导航栏进行其他更改，例如设置背景图像或使其半透明

```
self.navigationController.navigationBar.translucent = true;
[self.navigationController.navigationBar setBackgroundImage:img forBarMetrics:barMetrics]; 
```

# xml - 如何将xml重新打包到cab中？

> ID：11619291
> 
> 赞同：0
> 
> 时间：2012-07-23T19:36:54.107
> 
> 标签：xml, visual-studio, sharepoint, cab

我正在尝试使用本教程 [http://sharepointjim.wordpress.com/2012/05/10/how-to-enable-list-item-re-order-in-any-在 sharepoint 2010 中实现列表项重新排序功能sharepoint-2010-自定义列表/](http://sharepointjim.wordpress.com/2012/05/10/how-to-enable-list-item-re-order-in-any-sharepoint-2010-custom-list/)

但我被困在这一步：

将manfest.xml重新打包成.cab文件（可以使用visual studio 2010生成.CAB）

我怎样才能做到这一点？顺便说一句，我有视觉工作室 2010。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:33:10.297

看到这里，就像另一种类型的项目 [http://msdn.microsoft.com/en-us/library/1b8fd8ss(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/1b8fd8ss(v=vs.80).aspx)

# sql-server - 如何使 SET XACT_ABORT ON 回滚事务？

> ID：11619292
> 
> 赞同：8
> 
> 时间：2012-07-23T19:36:54.013
> 
> 标签：sql-server, sql-server-2008-r2, xact-abort

根据[Books Online 的文档`SET XACT_ABORT ON`](http://msdn.microsoft.com/en-us/library/ms188792.aspx)，我得到的印象是，如果 T-SQL 语句引发运行时错误，则整个事务将终止并回滚：

> ## 评论
> 
> 当 SET XACT_ABORT 为 ON 时，如果 Transact-SQL 语句引发运行时错误，则整个事务将终止并回滚。

在 SQL Server 2008 R2 中对此进行测试：

```
SET XACT_ABORT ON;
BEGIN TRANSACTION;
PRINT 'TranCount befor an error = '+CAST(@@Trancount AS varchar(50))

DROP TABLE QuertyAsdf

PRINT 'TranCount after an error = '+CAST(@@Trancount AS varchar(50)) 
```

给出输出：

```
TranCount befor an error = 1
Msg 3701, Level 11, State 5, Line 6
Cannot drop the table 'QwertyAsdf', because it does not exist or you do not have permission.
TranCount after an error = 1 
```

[`SET XACT_ABORT ON`如果出现错误](https://stackoverflow.com/a/1150069/12597)，我也认为终止批处理：

> SET XACT_ABORT ON 指示 SQL Server 回滚整个事务并在发生运行时错误时中止批处理。

听起来很方便。我怎样才能让它也这样做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T16:58:50.603

SQL Server 仅在 Severity 级别大于或等于 16 时回滚事务。

参见示例：

```
Msg 544, Level 16, State 1, Line 1
Cannot insert explicit value for identity column in table 'ORC_ORCAMENTO' whenIDENTITY_INSERT is set to OFF. 
```

在 SQL Server 2008 R2 上测试

```
SET XACT_ABORT ON;
BEGIN TRANSACTION;
PRINT 'TranCount befor an error = '+CAST(@@Trancount AS varchar(50))
insert into ORC_ORCAMENTO (ORCID, ORCNOME, ORCATIVO) VALUES (1, 'TESTE_ALEXP', 0);
PRINT 'TranCount after an error = '+CAST(@@Trancount AS varchar(50)) 
```

退货

```
TranCount befor an error = 1
Msg 544, Level 16, State 1, Line 5
Cannot insert explicit value for identity column in table 'ORC_ORCAMENTO' when IDENTITY_INSERT is set to OFF.
TranCount after an error = 0 
```

请参阅 Microsoft 错误消息级别

[https://docs.microsoft.com/en-us/sql/relational-databases/errors-events/database-engine-events-and-errors](https://docs.microsoft.com/en-us/sql/relational-databases/errors-events/database-engine-events-and-errors)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T17:16:36.080

当您使用 xact abort on 时，在`try` `catch`语句中，您可以手动引发错误以使事务回滚。

```
set xact_abort on;

begin try
    ...dml statements here....

if conditions here...
    raiseerror(....);

end try
begin catch

end catch 
```

# android - 在位置更新期间获取时间值的问题

> ID：11619295
> 
> 赞同：0
> 
> 时间：2012-07-23T19:37:06.400
> 
> 标签：android, timer, location

我在使用传统`onLocationChanged`调用获取位置更新的正确时间时遇到了一些问题。我已经设置了`GPS`参数，`requestLocationUpdates`并且我的`getLatitude();` `getLongitude();`和`getAltitude();`值在适当的时间间隔内更新得很好，但是我的时间值似乎落后于一个读数。我曾尝试使用`getTime()`并`System.currentTimeMillis();`在我打电话时调用时间`getLatitude();` `getLongitude();`，`getAltitude();`但两种方式都有相同的延迟。由于我使用时间和位置进行计算，显然这种滞后是一个问题。
我想实现一个[计时器](http://steve.odyfamily.com/?p=12)，然后实现一个位置调用，但真的不知道如何实现它。

```
@Override
    public void onLocationChanged(Location loc) {
    /* Get current speed */
        loc.getSpeed();

    /* Assign speed value to double variable in meter/sec, convert to miles/hr, and convert to string*/
        float currentSpeedInMeterPerSecond = loc.getSpeed();
        float currentSpeed = currentSpeedInMeterPerSecond * 2.237f;

        currentSpeedMPHInt = Math.round(currentSpeed);
        currentSpeedString = Integer.toString(currentSpeedMPHInt);

    /* Print out current speed */
        TextView currentSpeedText = (TextView) findViewById(R.id.speed);
        currentSpeedText.setText(currentSpeedString);

    /* Get headwind, frontal area, drag coefficent (Cd), rolling coeffiecent (Cr) */
        mySharedPreferences = getSharedPreferences(MY_PREFS, prefMode);
        headWindString = mySharedPreferences.getString("keyheadWindString", "0");
        headWind = new Float(headWindString);

        frontalAreaString = mySharedPreferences.getString("keyfrontalAreaString", "6.6");
        frontalArea = new Float(frontalAreaString);

        dragCoefficentString = mySharedPreferences.getString("keydragCoefficentString", "1.15");
        dragCoefficent = new Float(dragCoefficentString);

        riderWeightString = mySharedPreferences.getString("keyriderWeightString", "205");
        riderWeight = new Float(riderWeightString);

        bikeWeightString = mySharedPreferences.getString("keybikeWeightString", "30");
        bikeWeight = new Float(bikeWeightString);

        rollingCoefficentString = mySharedPreferences.getString("keyrollingCoefficentString", "0.0075");
        rollingCoefficent = new Float(rollingCoefficentString); 

    /* get current time and location and speed and altitude*/
        System.currentTimeMillis();
        loc.getLatitude();
        loc.getLongitude();
        loc.getAltitude();

    /* Set start time and location */
        if (i < j) {
            i = i + 1;
            time1 = System.currentTimeMillis();
            altitudeStart = loc.getAltitude();
            altitudeA = loc.getAltitude();
            latA = loc.getLatitude();
            logA = loc.getLongitude();
            Location.distanceBetween(latA, logA, latB, logB, distance);
        } else { 

        /* Get new location and time*/
            timeNew = System.currentTimeMillis();
            latB = loc.getLatitude();
            logB = loc.getLongitude();
            altitudeB = loc.getAltitude();

        /* Get distance between point A and point B*/
            Location.distanceBetween(latA, logA, latB, logB, distance);
            distanceTraveledMeters = distance[0];           /* distance between A and B in meters*/
            distanceTraveledMiles = distanceTraveledMeters * 0.0006213712f;
            if (distanceTraveledMiles < 0.02f) {
                distanceTraveledMiles = 0f;
            }
         /* Get and find time, total distance, average power , average speed, total Kcal, total elevation diff*/
            timeinterval = timeNew - time1;
            timeintervalSec = timeinterval / 1000f;
            tripTimeTotalmin = tripTimeTotalmin + (timeintervalSec / 60f);
            totalDistance = totalDistance + distanceTraveledMiles;
            averageSpeed = totalDistance / (tripTimeTotalmin / 60f);
            elevChange = (((altitudeB + altitudeA) / 2) - altitudeStart) * 3.2808d;
            elevChangeFloat = (float) elevChange;
            powerElevationChangeWattsAve = ((((riderWeight + bikeWeight) * 32.174f) * elevChangeFloat) / tripTimeTotalmin) * 0.00070234f;
            intervalSpeedMPH = distanceTraveledMiles / (timeintervalSec / 3600f);
            powerAirResistanceWattsAve = (0.5f * dragCoefficent * 0.075f * ((averageSpeed + headWind) * (averageSpeed + headWind)) * frontalArea * (averageSpeed + headWind)) * 0.13295f;
            powerRollingResistanceWattsAve = rollingCoefficent * (riderWeight + bikeWeight) * 32.174f * averageSpeed * 0.062f;
            powerTotalWattsAve = powerElevationChangeWattsAve + powerAirResistanceWattsAve + powerRollingResistanceWattsAve;
            totalKcalBurned = (powerTotalWattsAve * tripTimeTotalmin * 0.01433f) / 0.24f;
            mechBtuUsed = powerTotalWattsAve * tripTimeTotalmin * 0.056869f;

         /*Round off values*/
            totalDistance = totalDistance * 10f;
            totalDistance = Math.round(totalDistance);
            totalDistance = totalDistance / 10f;

            tripTimeMin = Math.round(tripTimeTotalmin);
            timeintervalSec = Math.round(timeintervalSec);
            averageSpeedInt = Math.round(averageSpeed);
            powerTotalWattsInt = Math.round(powerTotalWattsAve);
            totalKcalBurnedInt = Math.round(totalKcalBurned);
            intervalSpeedMPHInt = Math.round(intervalSpeedMPH);
            mechBtuUsedInt = Math.round(mechBtuUsed);
            elevChangeInt = Math.round(elevChangeFloat);

         /*convert to stings*/
            totalDistanceString = Float.toString(totalDistance);
            tripTimeTotalminString = Integer.toString(tripTimeMin);
            averageSpeedString = Integer.toString(averageSpeedInt);
            powerTotalWattsString = Integer.toString(powerTotalWattsInt);
            totalKcalBurnedString = Integer.toString(totalKcalBurnedInt);
            mechBtuUsedString = Integer.toString(mechBtuUsedInt);
            elevChangeString = Integer.toString(elevChangeInt);

         /* Print out */
            TextView totalDistanceText = (TextView) findViewById(R.id.distance);
            totalDistanceText.setText(totalDistanceString);
            TextView tripTimeTotalminText = (TextView) findViewById(R.id.triptime);
            tripTimeTotalminText.setText(tripTimeTotalminString);
            TextView averageSpeedText = (TextView) findViewById(R.id.avespeed);
            averageSpeedText.setText(averageSpeedString);
            TextView powerTotalWattsText = (TextView) findViewById(R.id.watts);
            powerTotalWattsText.setText(powerTotalWattsString);
            TextView totalKcalBurnedText = (TextView) findViewById(R.id.burnedkcal);
            totalKcalBurnedText.setText(totalKcalBurnedString);
            TextView mechBtuUsedText = (TextView) findViewById(R.id.mechbtu);
            mechBtuUsedText.setText(mechBtuUsedString);
            TextView elevChangeText = (TextView) findViewById(R.id.elevchange);
            elevChangeText.setText(elevChangeString);

         /*reset start time and location and interval elevation */
            time1 = timeNew;
            latA = latB;
            logA = logB;
            altitudeA = altitudeB;

         /* check iterations*/
            k = k + 1;
            kString = Integer.toString(k);
            TextView kStringText = (TextView) findViewById(R.id.k);
            kStringText.setText(kString);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:46:42.483

这可能不是最好的方法，但在我的应用程序中，我通过添加以下行来调用位置更新时间：

```
public final LocationListener locationListener = new LocationListener() {
    public void onLocationChanged(Location location) {
        SimpleDateFormat s = new SimpleDateFormat("hh:mm:ss");
        String timeStamp = s.format(new Date()); 
```

**编辑：**
*我只用时间来记录*

```
07-23 15:50:58.110: I/LocationListener(27513): Time of location change: 03:50:58\. Latitude: 35.3597361 Longitude: -76.4046144 
```

# iphone - 不是基于 Cordova 的应用程序和 newProject 的选项

> ID：11619296
> 
> 赞同：3
> 
> 时间：2012-07-23T19:37:06.597
> 
> 标签：iphone, ios, cordova

我制作了命令行 helloworld 项目，它工作正常。当我尝试从 XCode 构建时，没有构建“基于 Cordova”的应用程序的选项。这张照片是它应该显示的。我没有图标。我像wiki说的那样完成了安装，Xcode已关闭，然后我尝试了helloworld，成功:)，以及基于Cordova的新项目......废话，真的......

我应该看到的 ![在此处输入图像描述](../Images/9b8fee47f670ba2393c5acac50ba991f.png)

以及我所看到的。 ![在此处输入图像描述](../Images/162c189a44e7aa89c092093c5b9e0225.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T10:40:59.117

此选项已在 Cordova 2.xx 中删除，
您必须使用命令行 [http://docs.phonegap.com/en/edge/guide_command-line_index.md.html#Command-Line%20Usage](http://docs.phonegap.com/en/edge/guide_command-line_index.md.html#Command-Line%20Usage)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T12:18:57.350

我运行了 1.9 安装程序，它出现在 Xcode 中。

# apache-flex - 在 Flash Builder 中设置悬停（未选中）列表项

> ID：11619298
> 
> 赞同：0
> 
> 时间：2012-07-23T19:37:08.870
> 
> 标签：apache-flex, hover, flash-builder, flex-spark

我在 Flex 中有三个水平粘在一起的列表，我希望它们像同一个列表的列一样。当在任何列表中选择一个项目时，我已经设置了一种方法`change`来使所有三个列表上的相同索引彼此同步。我想对悬停做同样的事情；也就是说，当您将鼠标悬停在某个项目上并出现浅蓝色背景时，我希望其他两个列表上的相同索引也显示该浅蓝色背景。

有没有办法在列表中获取和设置“悬停项目”，或者创建视觉上类似的效果？

# javascript - 使用javascript从表中删除行时如何防止页面刷新？

> ID：11619300
> 
> 赞同：1
> 
> 时间：2012-07-23T19:37:13.950
> 
> 标签：javascript

我有一个带有表格的网页，表格的每一行都有一个“删除行”链接。

问题是，当我单击删除一行时，浏览器会刷新页面。我如何防止他的发生？

这是一个功能齐全的 HTML 页面。试试看，向下滚动到行，单击链接会导致滚动条跳回顶部：

注意：我使用的是 Firefox 11。

```
<SCRIPT language="javascript">

function deleteRow(rowID) {
  try {
    var table = document.getElementById("mytable");
    var iRowIndex = 0;
    while (iRowIndex < table.rows.length) {
      var row = table.rows[iRowIndex];
      if (row.id == rowID) {
        table.deleteRow(iRowIndex);
      } else {
        iRowIndex++;
      }
    }
  } catch (e) {
    alert(e);
  }
}

</SCRIPT>

<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>

<table id="mytable">
  <tr id="foo" >
    <td>FOO</td>
    <td>
       <a href="#" onclick="deleteRow('foo')">remove</a>
    </td>
  </tr>
  <tr id="bar" >
    <td>BAR</td>
    <td>
       <a onclick="deleteRow('bar')">remove</a>
    </td>
  </tr>
</table> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:46:21.093

您的页面刷新的原因是`href="#"`在您的锚标记中。删除它应该使您的示例工作。

删除`href="#"`片段也会在锚元素悬停时删除选择器光标。如果您希望保持这种样式，只需一点 css 即可轻松修复。

```
.myAnchor:hover {
    cursor: pointer;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:47:56.507

你为什么使用href？您不需要捕获 onclick 事件吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T19:56:38.640

这是因为您使用了`<a>`链接并为其赋予了`href="#"`属性，因此它将链接（如此刷新）到页面。

您可以删除该`href="#"`属性，或阻止函数中链接的默认操作（请参见下面的代码），或使用其他类型的控件，例如按钮。您始终可以使用 CSS 更改外观。

```
<!doctype html>
<html>
   <head>
      <script type="text/javascript">
         function displayResult(e) {
            e.preventDefault();
            document.getElementById("myTable").deleteRow(0);
         }
      </script>
   </head>

   <body>
      <table id="myTable" border="1">
         <tr>
            <td>cell 1</td>
            <td>cell 2</td>
         </tr>
         <tr>
            <td>cell 3</td>
            <td>cell 4</td>
         </tr>
      </table>

      <a href="#" onclick="displayResult(event)">Delete first row</a>
   </body>

</html> 
```

# hibernate - 绕过 cakephp 中的命名约定

> ID：11619305
> 
> 赞同：0
> 
> 时间：2012-07-23T19:37:32.320
> 
> 标签：hibernate, cakephp, find

1.  我已经有一个包含许多表的现有项目，所以我无法更改它们的名称。我想将 cake php 设置为使用表格“休眠” - 所以假设我有一个名为：“stock_realtime”的表格我已经在 Model->“StockRealtime.php”中建立了一个模型：

    类 StockRealtime 扩展 AppModel{

    ```
    var $name = 'stock_realtime'; 
    ```

    }

控制器位于 Controller->"StocksRealtimeController.php"

```
class StocksRealtimeController extends AppController {

    var $name       = 'stock_realtime'; 

    function index() {
        $this->set('stocks', $this->StockRealtime->find('all'));

    }
} 
```

以及 View->stocks_realtime->index.ctp 中的视图

我转到视图文件并收到错误消息：

```
Error: Call to a member function find() on a non-object 
File: C:\xampp\htdocs\s-maof-vb\stocksRT\app\Controller\StocksRealtimeController.php 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T19:48:49.750

对于您的模型，添加`var $useTable = 'stock_realtime';`

为您的控制器添加`var $uses = 'StockRealtime';`

# fft - 为自定义 xaudio2 效果指定样本数

> ID：11619306
> 
> 赞同：0
> 
> 时间：2012-07-23T19:37:38.427
> 
> 标签：fft, xaudio2

我正在尝试编写一个涉及傅立叶变换的自定义 xaudio2 效果。但是，每次调用过程方法的样本数不是 2 的幂（我拥有的傅立叶变换实现的前提条件）。

有没有办法强制 2 个大小的样本的功率？有没有一种技术可以使用 2 种尺寸的非功率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:47:25.223

如果您的实现要求您具有 2 的样本大小的幂，那么您可以填充样本以强制它接受。零填充似乎是最简单/最直接的。

这是一篇文章，解释了另一种方法：

**[Chirp z变换算法及其应用](http://www.alcatel-lucent.com/bstj/vol48-1969/articles/bstj48-5-1249.pdf)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T00:28:14.220

不要在每次为您提供样本的呼叫时将样本发送到 FFT。缓冲（保存）它们，直到您至少有 2 次方或更多样本，然后处理来自中间缓冲区的 2 次方数量的样本。冲洗并重复。

此外，较新的 FFT 通常允许素因数大于 2 的大小。

# xcode - Xcode 故事板序列循环回到相同的视图

> ID：11619311
> 
> 赞同：0
> 
> 时间：2012-07-23T19:37:53.117
> 
> 标签：xcode, loops, view, error-handling, storyboard

我正在使用故事板序列来更改应用程序其他部分的视图，但是当我将主视图链接到下一个视图并在我的输入按钮内调用函数中的序列时，它只会循环回到我的主视图并刷新应用程序。

这是我的函数调用：

```
[self performSegueWithIdentifier:@"Enter" sender:self]; 
```

在情节提要中，我的主视图使用标识符“Enter”链接到下一个视图，但我仍然会被发送回同一视图。有没有办法指定下一个视图的目的地？我是否需要其他视图控制器中的某个变量需要导入到主视图控制器的代码中？

如果需要，我可以提供更多代码或信息。

图片：http: [//i1180.photobucket.com/albums/x411/Ryute88/screen.jpg](http://i1180.photobucket.com/albums/x411/Ryute88/screen.jpg)

身份检查员图片：http: [//i1180.photobucket.com/albums/x411/Ryute88/screen2.jpg](http://i1180.photobucket.com/albums/x411/Ryute88/screen2.jpg)

图3：http: [//i1180.photobucket.com/albums/x411/Ryute88/screen3.jpg](http://i1180.photobucket.com/albums/x411/Ryute88/screen3.jpg)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:47:06.363

请查看此网站：[关于故事板的所有信息](http://www.techotopia.com/index.php/Using_Xcode_Storyboarding_%28iPhone_iOS_5%29#Configuring_Storyboard_Segues)

您将找到有关您的工作的详细信息。尝试并检查问题是否仍然存在！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:53:39.623

您是否使用 write segue 来调用下一个视图，例如 pop 只能在导航控制器的情况下使用。在任何情况下，问题都是微不足道的，因为情节提要为您完成了一切。

# c# - EF Code First 提高自引用、一对多关系的性能

> ID：11619315
> 
> 赞同：5
> 
> 时间：2012-07-23T19:38:05.600
> 
> 标签：c#, entity-framework, recursion, query-optimization

我有`AccountGroup`一个自引用实体。一片叶子`AccountGroup`可以包含 1 个或多个`Accounts`. 两个实体都有`Balance`财产。每个`AccountGroup`都有一个`Balance`，它是`Balance`子组中`Balance`s 的总和或所有帐户的总和（在叶组的情况下）。

为了构建所有`AccountGroup`s 和`Account`s 的树列表，我必须递归遍历这个对象图，这会导致很多（我的意思是很多！！！）对 DB 的调用......

有什么方法可以改善这一点，从而减少数据库调用的数量？

谢谢

这是精简后的代码

## 账户（只属于1个AccountGroup）

```
public class Account
{
    public int Id { get; set; }
    public int GroupId { get; set; }
    public string Name { get; set; }
    public decimal Balance { get; set; }
    public string AccountType { get; set; }

    public virtual AccountGroup Group { get; set; }
} 
```

## AccountGroup（有 0 个或多个 AccountGroups，如果是叶子则有 1 个或多个 Accounts）

```
public class AccountGroup
{
    public AccountGroup()
    {
        Accounts = new HashSet<Account>();
        Groups = new HashSet<AccountGroup>();
    }

    public int Id { get; set; }
    public bool IsRoot { get { return Parent == null; } }
    public bool IsLeaf { get { return !Groups.Any(); } }
    public decimal Balance { get { return IsLeaf ? Accounts.Sum(a => a.Balance) : Groups.Sum(g => g.Balance); } } // if leaf group, get sum of all account balances, otherwise get sum of all subgroups
    public int? ParentId { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public virtual ISet<Account> Accounts { get; private set; }
    public virtual ISet<AccountGroup> Groups { get; private set; }
    public virtual AccountGroup Parent { get; set; }
} 
```

## 调用代码

```
// start processing root groups (ones without parent)
foreach (var rootGroup in db.AccountGroups.Include(g=>g.Groups).Where(g => g.ParentId == null))
{
    TraverseAccountGroup(rootGroup, 0);
}

// recursive method
private static void TraverseAccountGroup(AccountGroup accountGroup, int level)
{
    //
    // process account group
    //
    Console.WriteLine("{0}{1} ({2})", String.Empty.PadRight(level * 2, '.'), accountGroup.Name, level);
    //
    // if subgroups exist, process recursivelly
    //
    if (accountGroup.Groups.Any())
    {
        foreach (var subGroup in accountGroup.Groups)
        {
            TraverseAccountGroup(subGroup, level + 1);
        }
    }
    //
    // otherwise, process accounts belonging to leaf subgroup
    //
    else
    {
        foreach (var account in accountGroup.Accounts)
        {
            Console.WriteLine("ACCOUNT [{0}]", account.Name);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:43:54.637

**CTE 方法**

有两种方法可以提高对树数据类型的查询速度。第一个（可能是最简单的）是使用存储过程和 EF 的执行 sql 功能来加载树。SProc 将缓存，结果集执行速度将提高。我对 sproc 中的查询的建议是递归 CTE。

[http://msdn.microsoft.com/en-us/library/ms186243(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms186243(v=sql.105).aspx)

```
with <CTEName> as
(
     SELECT
         <Root Query>
     FROM <TABLE>

     UNION ALL

     SELECT
         <Child Query>
     FROM <TABLE>
     INNER JOIN <CTEName>
         ON <CTEJoinCondition>
     WHERE 
          <TERMINATION CONDITION>

) 
```

**编辑**

内联执行您的 sproc 或 CTE：

```
DbContext ctx = new SampleContext();
ctx.Database.SqlQuery<YourEntityType>(@"SQL OR SPROC COMMAND HERE", new[] { "Param1", "Param2", "Etc" }); 
```

**展平你的树结构**

第二种方法是构建树的平面表示。您可以将树扁平化为扁平结构以进行快速查询，然后使用扁平结构与实际树节点之间的链接来剪切自引用实体。您可以使用上述递归 CTE 查询构建平面结构。

这只是一种方法，但有很多关于这个主题的论文：

[http://www.governor.co.uk/news-plus-views/2010/5/17/depth-first-tree-flattening-with-the-yield-keyword-in-c-sharp/](http://www.governor.co.uk/news-plus-views/2010/5/17/depth-first-tree-flattening-with-the-yield-keyword-in-c-sharp/)

**编辑：添加额外说明** 请注意，递归 CTE 缓存是在迭代结构之前用于查询的符号。这是编写查询以解决您的问题的最快和最简单的方法。但是，这必须是 SQL 查询。您可以直接使用执行 sql，也可以执行 SProc。Sprocs 在运行后缓存执行图，因此它们比必须在运行之前构建执行计划的本机查询执行得更好。这完全取决于你。

树的平面表示的问题是您必须定期重建或不断维护平面结构。根据您的查询路径将确定您应该使用哪种展平算法，但最终结果保持不变。扁平结构是“完成”您想要在 EF 中执行的操作而无需通过 DBConnection 欺骗和执行原始 SQL 的唯一方法。

# jquery - 是什么让我的简单 if 语句无法正常工作？

> ID：11619317
> 
> 赞同：0
> 
> 时间：2012-07-23T19:38:26.830
> 
> 标签：jquery, if-statement, document-ready

有没有人看到任何问题或知道为什么它不起作用？

```
<script type="text/javascript">
$(document).ready(function(){
   if (location.href=="http://www.example.com") {alert("test test test");
   } else {
   document.location = "http://www.example.com/test";
   }
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:41:32.173

尝试：

```
 <script type="text/javascript">
    $(document).ready(function(){
       if (window.location.href =="http://www.example.com") {alert("test test test");
       } else {
           window.location = "http://www.example.com/test";
       }
    });
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:48:47.210

为什么要等待文档就绪事件来更改当前位置？

我建议您跳过该部分并通过使用`console.log()`或简单的输出来验证属性值`alert`。

这样的事情会做；

```
console.log('Current location =', window.location.href, window.location.href == 'http://www.example.com'); // DEBUG

if (window.location.href != 'http://www.example.com') {
  // redirect
  window.location.href = 'http://www.example.com/test';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T19:45:05.773

如果您访问网站（例如使用 Chrome）并打开控制台 (F12) 并输入“location.href”，您会注意到该位置以斜杠结尾，因为它是您被重定向的位置大多数 http 网络服务器。因此，检查带有斜杠的 url

```
 <script type="text/javascript">
    $(document).ready(function(){
       if (location.href=="http://www.example.com/") {alert("test test test");
       } else {
       document.location = "http://www.example.com/test";
       }
    });
    </script> 
```

![在此处输入图像描述](../Images/6e5ef974adb99ae5b93cacc4ce92562d.png)

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-07-23T19:42:21.557

你为什么不尝试一个自我唤起的匿名函数：

```
(function(){
 if (location.href=="http://www.example.com") {
    alert("test test test");
 } else {
     document.location = "http://www.example.com/test";
 }
})(); 
```

# nginx - nginx <=> php-fpm: unix socket 给出错误，tcp 连接很慢

> ID：11619324
> 
> 赞同：4
> 
> 时间：2012-07-23T19:39:02.027
> 
> 标签：nginx, php

我在高流量站点上使用 php-fpm 运行 nginx。我让 nginx 通过 tcp/ip 与 php-fpm 通信，nginx 和 php-fpm 池都在同一台服务器上运行。

当我使用 tcp/ip 让 nginx 和 php-fpm 池相互通信时，页面加载需要几（5-10）秒才能完成任何操作，当它最终开始时，它不需要时间一切都是为了完成加载。由于 php-fpm 的 statuspage 显示listen backlog 已满，我假设处理请求需要一些时间。Netstat 在 TIME_WAIT 状态下显示了很多（20k+）个连接，不知道这是否相关，但似乎相关。

当我尝试让 nginx 和 php-fpm 通过 UNIX 套接字进行通信时，页面实际加载之前的时间减少到几乎没有，完成页面在我的浏览器中之前的时间减少了 1000 倍。UNIX 套接字的唯一问题是它在日志中给了我很多错误：

```
*3377 connect() to unix:/dev/shm/.php-fpm1.sock failed (11: Resource temporarily unavailable) while connecting to upstream, client: 122.173.178.150, server: nottherealserver.fake, request: "GET somerandomphpfile HTTP/1.1", upstream: "fastcgi://unix:/dev/shm/.php-fpm1.sock:", host: "nottherealserver.fake", referrer: "nottherealserver.fake" 
```

我的两个问题是：

有人知道为什么 tcp/ip 方法在实际上似乎连接到 php-fpm 后端之前要等待这么长时间吗？

为什么在使用它而不是 tcp/ip 时 UNIX 套接字会导致问题？

我尝试了什么：

尝试减少 TIME_WAIT 连接数时设置`net.ipv4.tcp_tw_recycle`为`net.ipv4.tcp_tw_reuse`1（从 30k+ 下降到 20k+）

将`net.core.somaxconn`值从默认的 128 增加到 1024（也尝试了更高的值，但在使用 UNIX 套接字时仍然出现相同的错误）

增加了打开文件的最大数量

可能也很相关：尝试使用 lighttpd + fastcgi，在连接最终得到处理之前很长一段时间也有同样的问题。MySQL 不是太忙，不应该是等待时间长的原因。磁盘等待时间为 0%（SSD 磁盘），因此繁忙的磁盘似乎也不是罪魁祸首。

希望有人找到解决此问题的方法，并愿意分享:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T21:53:58.357

在问题解决后回答我自己的问题（不确定这是否是正确的方法）。

我的问题是 APC 缓存根本不起作用。它已安装、配置和启用，但没有向其缓存中添加任何内容。从 APC 切换到 Xcache 后，加载和加载时间大幅下降。仍然不知道为什么 APC 什么也没做，但目前我很高兴问题解决了 :)

感谢你们的所有投入！

# assembly - 使用 OllyDbg 找到所有可能导致特定指令的跳转？

> ID：11619326
> 
> 赞同：1
> 
> 时间：2012-07-23T19:39:06.653
> 
> 标签：assembly, ollydbg

有没有办法，比如有一条指令将一个值压入堆栈，有没有办法找到所有可能导致该指令被 OllyDbg 执行的跳转？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:30:12.307

Ollydbg 默认显示可能跳转到操作码，通常如果它没有混淆代码，它会显示所有引用的跳转。

现在，如果您的意思是将一个值跟踪到堆栈中并检查所有可能使用它的操作码，那几乎是不可能的，我可以想到一些解决方案，但不是很实用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T06:48:37.160

通常单击指令，如果您要求，则按 ctrl+R 即可。如果您的指令是某个功能的中间，则单击功能的开始（push ebp，mov ebp，esp...）并执行 ctrl+R（在上下文菜单中查找引用选择的命令）。

# apache-flex - Actionscript 字典：TypeError：错误 #1006：getValue 不是函数

> ID：11619328
> 
> 赞同：0
> 
> 时间：2012-07-23T19:39:15.863
> 
> 标签：apache-flex, dictionary, actionscript, flex3

我有一个 Flex 3 应用程序，我在其中使用了对 Dictionary.getValue 的调用。但是，现在在编译时，我在该调用中收到此错误：

> TypeError：错误 #1006：getValue 不是函数。

我可以做错什么吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:47:41.643

我没有看到 API 中定义的 getValue 方法... [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/Dictionary.html#methodSummary](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/Dictionary.html#methodSummary)

尝试使用

```
dictionary[key] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T19:07:47.603

Dictionary 对象没有 getValue() 函数，这就是您收到该错误的原因。你可能是想写 valueOf() 吗？

# python - Python SciPy FFT 函数 - 输入？

> ID：11619340
> 
> 赞同：0
> 
> 时间：2012-07-23T19:40:04.867
> 
> 标签：python, scipy, fft

我目前正在编写一些应该对一组数据执行 FFT 的代码。我有一个 python 点列表，我可以轻松创建一个时间列表。当我运行 fft(datalist) 时，我收到“TypeError: 'numpy.ndarray' object is not callable”错误。我认为（但请纠正我）问题在于该列表是一维的，并且通过使用上面的那一行代码，它们根本与时间无关。我的问题是，我是否必须输入带有时间和数据点的二维数组？还是我完全错了，必须重新考虑？谢谢，迈克编辑 - 忘了添加一些代码。t=时间。可能是因为数组中的条目数不等于 2^n 其中 N 是整数？

```
sample_rate=10.00
t=r_[0:191.6:1/sample_rate]
S = fft([mylist])
print S 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-07T20:03:04.180

Numpy 和 SciPy fft 函数希望将 numpy 数组作为输入，而不是原生 python 列表。此外，它们在不是 2 次方的长度下也能正常工作。您可能只需要在将列表传递给 fft 之前将其转换为数组。

从上面的示例代码中尝试：

```
from numpy.fftpack import fft
from numpy import array

""" However you generate your list goes here """

S = fft(array([mylist])) 
```

# javascript - 检测通过 animationName 触发了哪个 AnimationEnd

> ID：11619341
> 
> 赞同：9
> 
> 时间：2012-07-23T19:40:14.833
> 
> 标签：javascript, css, detect, css-animations, keyframe

我有几个 CSS3 动画链接到一个 div，但我只希望在最后一个动画结束时调用一个函数。

我已经使用了 animationEnd 事件，以便我可以触发所述功能，但正如我所说，我只希望它在最后一个动画上运行。

有没有办法通过检查触发 animationEnd 事件的动画名称来检测动画是否结束？

因此允许我使用 if 语句来挑出最后一个动画。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T16:38:13.963

定义函数时需要该参数。这些中的任何一个都应该起作用；

```
var $element = $('.eye').bind("webkitAnimationEnd oAnimationEnd msAnimationEnd animationend", function(event){
     if (event.originalEvent.animationName === "three") {
         console.log('the event happened');
     }
} 
```

或者，

```
var $element = $('.eye').bind("webkitAnimationEnd oAnimationEnd msAnimationEnd animationend", function(e){
     if (e.originalEvent.animationName === "three") {
         console.log('the event happened');
     }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-07T14:14:42.350

我不知道为什么......但我可以抓住`animationName`唯一的**`e.originalEvent.animationName`**

所以最好的选择是：

```
function getAnimationName(e) {
  if(e.animationName != undefined) return e.animationName;
  if(e.originalEvent.animationName != undefined) return e.originalEvent.animationName;
  else return undefined;
} 
```

# iphone - Keeping FMDB thread safe

> ID：11619343
> 
> 赞同：5
> 
> 时间：2012-07-23T19:40:16.073
> 
> 标签：iphone, fmdb

I see in FMDB 2.0, the author added FMDatabaseQueue for threads. The example is:

```
// First, make your queue.

FMDatabaseQueue *queue = [FMDatabaseQueue databaseQueueWithPath:aPath];
Then use it like so:

[queue inDatabase:^(FMDatabase *db) {
    [db executeUpdate:@"INSERT INTO myTable VALUES (?)", [NSNumber numberWithInt:1]];
    [db executeUpdate:@"INSERT INTO myTable VALUES (?)", [NSNumber numberWithInt:2]];
    [db executeUpdate:@"INSERT INTO myTable VALUES (?)", [NSNumber numberWithInt:3]];

    FMResultSet *rs = [db executeQuery:@"select * from foo"];
    while ([rs next]) {
        …
    }
}];
// An easy way to wrap things up in a transaction can be done like this:

[queue inTransaction:^(FMDatabase *db, BOOL *rollback) {
    [db executeUpdate:@"INSERT INTO myTable VALUES (?)", [NSNumber numberWithInt:1]];
    [db executeUpdate:@"INSERT INTO myTable VALUES (?)", [NSNumber numberWithInt:2]];
    [db executeUpdate:@"INSERT INTO myTable VALUES (?)", [NSNumber numberWithInt:3]];

    if (whoopsSomethingWrongHappened) {
        *rollback = YES;
        return;
    }
    // etc…
    [db executeUpdate:@"INSERT INTO myTable VALUES (?)", [NSNumber numberWithInt:4]];
}]; 
```

Two questions, what is the databaseQueueWithPath parameter supposed to be? Is that the path of where my database lies?

Second question, I can see how this would work if you have multiple updates and you don't want them trampling on top of each other. But what about if you are inserting data into the database, but also want to access other data in the database so the user can still play with your app while their data is being inserting. Is that possible? Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T23:20:38.723

Yes, databaseQueueWithPath: takes a path to the database.

For your second question, if you're inserting your data in a background thread and you can break it up in chunks (so the time spent in [queue inDatabase:] ins't very long), then yes, you can still play with the app while that's going on. You won't be able to the various queue methods while one is already in use.

# magento - 在运输方法步骤 Magento 上显示有条件的消息

> ID：11619351
> 
> 赞同：2
> 
> 时间：2012-07-23T19:41:03.967
> 
> 标签：magento

我正在尝试在 Magento 单页结帐的运输方式阶段向其送货地址位于加拿大的用户添加免责声明消息。我的商店位于美国，但确实运送到加拿大，但我希望加拿大的用户知道他们对任何关税和税款负责。如果他们的收货地址是加拿大的，有没有办法添加该消息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T21:06:15.100

快速的方法（虽然不是最漂亮的）是修改您的`app/design/frontend/YOUR_INTERFACE/YOUR_THEME/template/checkout/onepage/shipping_method.phtml`文件并在最顶部添加以下代码：

```
<?php if($this->getQuote()->getShippingAddress()->getCountry() == 'CA' ||
         ($this->getQuote()->getShippingAddress()->getSameAsBilling() && $this->getQuote()->getBillingAddress()->getCountry() == 'CA')): ?>

    BLAME CANADA !!!
<?php endif; ?> 
```

# visual-studio-2010 - Qt 4.8.2 QString toStdString 未处理异常

> ID：11619356
> 
> 赞同：0
> 
> 时间：2012-07-23T19:41:11.940
> 
> 标签：visual-studio-2010, qt, windows-7, 64-bit

```
void QuinielaApuesta::funcion(QString & str)
{
    std::string cadenita = str.toStdString();
    std::cout << cadenita << std::endl;
} 
```

我在 VS2010、Windows 7 N 64 位、Visual Studio 2010 的 Qt 4.8.2 上使用 QString 方法“toStdString()”（或一些相关的东西）会导致未处理的异常。

我在哪里使用这条线并不重要

```
std::string cadenita = str.toStdString(); 
```

这将导致未处理的异常。在这种特殊情况下，它发生在我离开方法“函数”的范围之后。但是它发生在当前范围转义的上下文中（也就是说，如果您将此行放在对象的构造函数中，它将按预期进行，直到构造函数结束，然后当它应该进行到更高的范围级别时，它将发送一个未处理的异常错误）。

我通过反复试验将问题隔离到 .toStdString ，我不能说其他方法是否可能（或可能）有同样的问题。但是，我可以说，只要该行被评论，一切正常。事实上，如果我用一个简单的替换所说的行

```
std::cout << "Some Funny Test Text" std::endl; 
```

这一切都很好，花花公子。

错误是

> C_plus_plus_QT_project.exe 中 0x53b8ad7a (msvcp100d.dll) 处的未处理异常：0xC0000005：访问冲突读取位置 0xccccccd0。

然后在文件 xutility 中，第 201 行

```
 #if _ITERATOR_DEBUG_LEVEL == 2
if (_Myproxy != 0)
    {   // proxy allocated, drain it
    _Lockit _Lock(_LOCK_DEBUG);

    for (_Iterator_base12 **_Pnext = &_Myproxy->_Myfirstiter;
        *_Pnext != 0; *_Pnext = (*_Pnext)->_Mynextiter) // HERE IS THE LINE WHERE THE BREAK KICKS IN
        (*_Pnext)->_Myproxy = 0;
    _Myproxy->_Myfirstiter = 0;
    } 
```

Visual Studio 的输出是：

> 'C_plus_plus_QT_project.exe'：已加载 'C:\Users\aravasio\Desktop\C_plus_plus_QT_project\Debug\C_plus_plus_QT_project.exe'，已加载符号。“C_plus_plus_QT_project.exe”：已加载“C:\Windows\SysWOW64\ntdll.dll”，找不到或打开 PDB 文件“C_plus_plus_QT_project.exe”：已加载“C:\Windows\SysWOW64\kernel32.dll”，找不到或打开 PDB 文件“C_plus_plus_QT_project.exe”：已加载“C:\Windows\SysWOW64\KernelBase.dll”，找不到或打开 PDB 文件“C_plus_plus_QT_project.exe”：已加载“C:\Users\aravasio\Desktop\C_plus_plus_QT_project\ Debug\QtGui4.dll'，二进制文件未使用调试信息构建。“C_plus_plus_QT_project.exe”：已加载“C:\Windows\SysWOW64\gdi32.dll”，找不到或打开 PDB 文件“C_plus_plus_QT_project.exe”：\Windows\SysWOW64\oleaut32.dll', 找不到或打开 PDB 文件 'C_plus_plus_QT_project.exe': 已加载 'C:\Windows\SysWOW64\ole32.dll', 找不到或打开 PDB 文件'C_plus_plus_QT_project.exe':已加载“C:\Windows\SysWOW64\imm32.dll”，找不到或打开 PDB 文件“C_plus_plus_QT_project.exe”：已加载“C:\Windows\SysWOW64\msctf.dll”，找不到或打开 PDB 文件“C_plus_plus_QT_project” .exe': 加载 'C:\Windows\SysWOW64\winmm.dll', 找不到或打开 PDB 文件 'C_plus_plus_QT_project.exe': 加载'C:\Windows\SysWOW64\winspool.drv', 找不到或打开PDB 文件“C_plus_plus_QT_project.exe”：已加载“C:\Users\aravasio\Desktop\C_plus_plus_QT_project\Debug\QtCore4.dll”，二进制文件未使用调试信息构建。' C_plus_plus_QT_project.exe'：加载'C:\Windows\SysWOW64\ws2_32.dll'，找不到或打开PDB文件'C_plus_plus_QT_project.exe'：加载'C:\Windows\SysWOW64\nsi.dll'，找不到或打开PDB 文件“C_plus_plus_QT_project.exe”：已加载“C:\Windows\winsxs\x86_microsoft.vc90.crt_1fc8b3b9a1e18e3b_9.0.30729.6161_none_50934f2ebcb7eb57\msvcp90.dll”，找不到或打开 PDB 文件“C_plus_plusC:QT_project”。 \Windows\winsxs\x86_microsoft.vc90.crt_1fc8b3b9a1e18e3b_9.0.30729.6161_none_50934f2ebcb7eb57\msvcr90.dll'，找不到或打开PDB文件'C_plus_plus_QT_project.exe'：加载'C:\Windows\SysWOW64\msvcp100d.dll' “C_plus_plus_QT_project.exe”：已加载“C:\Windows\SysWOW64\msvcr100d.dll”，已加载符号。' C_plus_plus_QT_project.exe': 加载 'C:\Windows\SysWOW64\uxtheme.dll', 找不到或打开 PDB 文件'C_plus_plus_QT_project.exe': 加载'C:\Windows\SysWOW64\dwmapi.dll', 找不到或打开C_plus_plus_QT_project.exe 中 0x53b8ad7a (msvcp100d.dll) 处的 PDB 文件第一次机会异常：0xC0000005：访问冲突读取位置 0xccccccd0。C_plus_plus_QT_project.exe 中 0x53b8ad7a (msvcp100d.dll) 处的未处理异常：0xC0000005：访问冲突读取位置 0xccccccd0。访问冲突读取位置 0xccccccd0。C_plus_plus_QT_project.exe 中 0x53b8ad7a (msvcp100d.dll) 处的未处理异常：0xC0000005：访问冲突读取位置 0xccccccd0。访问冲突读取位置 0xccccccd0。C_plus_plus_QT_project.exe 中 0x53b8ad7a (msvcp100d.dll) 处的未处理异常：0xC0000005：访问冲突读取位置 0xccccccd0。

如果我可以提供有关我的系统的任何其他信息，我将很高兴。

我只能做出某种有根据的猜测，这不是 Qt 错误，因为在家里我完全没有问题（但在家里我使用的是 x86 W7，所以它可能不是一个很好的例子）。

有人知道吗？我用谷歌搜索了很多，但似乎每个错误都已在旧的修补程序中得到解决。

我应该放弃船舶并尝试VS2008吗？它适用于 x64 环境吗？（版本将用于 x86，顺便说一句，而不是 x64）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T21:07:54.983

您编译了调试目标，但您将它与 Qt dll 的发布变体链接（`QtCore4.dll`和`QtGui4.dll`而不是`QtCored4.dll`和`QtGuid4.dll`）。

# php - php线路输出

> ID：11619362
> 
> 赞同：0
> 
> 时间：2012-07-23T19:41:35.257
> 
> 标签：php, paragraph

我有一个名为 file.txt 的文件，如下所示：

1.  1号线
2.  2号线
3.  3号线
4.  4号线

使用命令：

```
$content = file_get_contents(file.txt);
echo $content 
```

我在一行上得到输出：

1号线 2号线 3号线 4号线

如何让输出打印超过 4 行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T19:44:27.290

您实际上将其打印为 4 行，但由于解析为 html，您无法在浏览器中看到它。

用于[`nl2br()`](http://php.net/nl2br)添加`<br/>`_

```
$content = file_get_contents(file.txt);
echo nl2br($content); 
```

您也可以发送[标头](http://php.net/header)，表明它不是 html：

```
header('Content-type: text/plain');
$content = file_get_contents(file.txt);
echo $content; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T19:44:30.237

```
<?php echo nl2br($content); ?> 
```

将所有常规换行符 ("\n") 替换为 "< br >" 标记。

如果您只想显示纯文本文件，则应将内容类型更改为 text/plain

```
<?php header("Content-type: text/plain"); ?> 
```

然后所有换行符都将在文档中出现。

# c# - C# Silverlight Lync API

> ID：11619370
> 
> 赞同：0
> 
> 时间：2012-07-23T19:42:03.390
> 
> 标签：c#, silverlight, lync

我们正在考虑在我们的 .net 网站上创建一个自定义的 silverlight lync 存在指示器。

该控件将显示在线课程中的所有用户。

问题是用户可能不在会话用户的联系人中。

我该如何解决这个问题，或者有没有办法将联系人添加到某人的联系人列表中？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:42:22.217

您可以使用联系人列表控件。

# pdf-generation - Confluence 导出动态 PDF 标题

> ID：11619376
> 
> 赞同：1
> 
> 时间：2012-07-23T19:42:11.957
> 
> 标签：pdf-generation, confluence

我正在使用 Confluence 4.0.3，我正在尝试创建一个 PDF 布局/样式表，以便它从页面内容中获取主标题并将其移动到标题页。

到目前为止我已经尝试过：

1.  使用 confluence 建议的方式 - 它根本无法正常工作，因为它带有额外的目录（np，我可以隐藏它）和额外的页面内容，因为它需要我从父级别导出才能工作

2.  我定义了一个包含页面标题的宏，我可以使用 css 使它落在标题页上。这可行，但是如果我要导出多个文档，这可能会造成问题

3.  设置 h1:first-child 的样式，这可行，但在多个文档上再次出现这将是一个问题。

问题：有没有在多个文档导出上执行此操作的好方法？如果没有，页面标题是否有我可以定位的自己的类而不是 h1:first-child？我试过 h1.pagetitle （在他们的文档中）但它不起作用，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T20:05:59.627

我使用用户定义的宏将标题放入并使用 PDF 导出 css 将其定位在标题页上。只要您在导出级别仅导出 1 个文档，此方法就可以使用。如果您要从同一导出级别导出 2 个或更多文档，那么您只能定义 1 个宏，否则它们都将位于标题页上的相同位置。

这似乎是我发现实现这样的事情的最简单方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T16:09:44.110

我会尝试使用一个小的解决方法。您可以使用位于 confluence 之外的 .asp 页面来拉取​​ pdf 标题并以您喜欢的方式显示它。然后你可以使用 html-include 宏来显示 .asp 页面，以及它显示的 pdf 标题，无论你喜欢在 confluence 中的什么位置。

# django - Django-registration 0.8 错误：register() 至少需要 2 个参数（给定 2 个）

> ID：11619380
> 
> 赞同：1
> 
> 时间：2012-07-23T19:42:39.380
> 
> 标签：django, django-registration

我正在尝试在 django-registration 0.8 中使用“简单”后端，但是当我转到 /accounts/register （以及在/注册）

我的代码如下。

```
from django.conf.urls import patterns, include, url
from registration.views import register

urlpatterns = patterns('',
    url(r'^$', 'app.views.home'),
    url(r'/accounts', include('registration.backends.simple.urls')),    
    url(r'register', 'registration.views.register', {'success_url':''}),
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T21:35:34.573

您没有传递*正确*的两个参数。该`register`视图需要两个参数：`request`和`backend`. 其他所有内容（所有 kwargs）都是可选的。Django 自动通过`request`并且你通过了`success_url`kwarg，所以这是 2，但你缺少`backend`.

# c# - 是否选择了查找 DataGrid Row 的方法？

> ID：11619381
> 
> 赞同：0
> 
> 时间：2012-07-23T19:42:53.453
> 
> 标签：c#, wpf

我是 C# 和 WPF 的新手。我遇到的问题是在数据网格上我正在显示数据表数据。我需要根据所选行更新数据。我能够做到这一点。

但是，当我没有在 datagrid 上选择任何行时，它确实将默认行选择为“0”，并且我不希望我想要结果为 -1 或错误，因为我没有在那里选择任何行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:05:20.857

`dataGrid.SelectedIndex`您可以使用;确定是否选择了行 如果值为`>= 0`，则您选择了一行。

要访问选定的行：

```
if (dataGrid.SelectedIndex != -1) {
    YourDataType row = (YourDataType)dataGrid.SelectedItem;
    // process stuff
} 
```

如果您允许在数据网格中进行多项选择，这是一个非常合理的假设，您可以使用该`dataGrid.SelectedItems`属性访问集合。

在这里也可以看到显示示例 XAML 的类似答案：[Get selected row item in DataGrid WPF](https://stackoverflow.com/questions/3913580/get-selected-row-item-in-datagrid-wpf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T19:57:08.843

不太清楚您实际上想要做什么。只需`yourdatagrid.SelectedIndex=-1;`在代码的某种初始化部分中进行设置。

# php - Wordpress：列出类别并列出活动类别中的所有帖子

> ID：11619382
> 
> 赞同：0
> 
> 时间：2012-07-23T19:42:54.230
> 
> 标签：php, wordpress

我希望我能在这方面得到一些帮助！我正在尝试在侧边栏中实现一些 PHP，以显示类别列表（作为指向类别本身的链接）。如果单击，我当然希望它转到类别页面，然后该类别中的帖子作为链接出现在其下方的列表中。

主页示例：A 类 B 类 C 类

类别 A 中的主页示例：类别 A - 帖子一 - 帖子二 - 帖子三 类别 B 类别 C

如果这是显而易见的事情，我很抱歉。我正在尝试找到自己的解决方案，但到目前为止一直无法。

再次感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T23:21:10.687

我写了一个小部件，其中包含类似的代码可能会让你开始创建你的小部件：[http ://wp.leau.co/2010/12/01/sidebar-feed-widget-showing-tweets-stumbles-视频和更多/](http://wp.leau.co/2010/12/01/sidebar-feed-widget-showing-tweets-stumbles-vids-and-more/)

只需循环上述类别

然后使用[http://codex.wordpress.org/Function_Reference/is_category](http://codex.wordpress.org/Function_Reference/is_category)您可以检查您是否在类别页面上，然后使用[http://codex.wordpress.org/Function_Reference/single_cat_title](http://codex.wordpress.org/Function_Reference/single_cat_title)检查它是否是活动页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:25:49.540

您可以使用此代码按层次顺序显示类别和帖子列表：

```
<?php
/*
Template Name: Archives with Content
*/
?>
<?php get_header(); ?>
<div id="content" class="widecolumn">
<?php if (have_posts()) : while (have_posts()) : the_post();?>
<div class="post">
<h2 id="post-<?php the_ID(); ?>"><?php the_title();?></h2>
<div class="entrytext">
<?php the_content('<p class="serif">Read the rest of this page &raquo;</p>'); ?>
</div>
</div>
<?php endwhile; endif; ?>
<?php edit_post_link('Edit this entry.', '<p>', '</p>'); ?>
</div>
<div id="main">
<?php //include (TEMPLATEPATH . '/searchform.php'); ?>
<h2>Archives by Month:</h2>
<ul>
<?php wp_get_archives('type=daily&limit=1&show_post_count=1'); ?>

</ul>
<h2>Archives by Subject:</h2>
<ul>

<?php wp_list_categories('orderby=name&show_count=1'); ?>
</ul>
<?php get_footer(); ?> 
```

1.只需将上述代码复制到一个名为archieve_page.php的文件中，然后转到admin->pages->add page并将标题作为archieve page，然后在右侧角落，单击下拉模板并选择“Archieve with内容”，然后单击发布，然后在顶部单击“查看页面”以查看该页面。

# php - 从 mySQL 数据库中选择行并显示为列

> ID：11619386
> 
> 赞同：1
> 
> 时间：2012-07-23T19:43:02.383
> 
> 标签：php, mysql

所有，我有以下 mySQL 表结构：

```
表 dj_feedback_answers：answer_id、gig_id、question_id、answer_id
表 dj_feedback_summary：summary_id、user_id、gig_date、tip、summary、why_poor、why_fair
表 dj_feedback_questions：question_id、question_value、question_display
表 dj_feedback_ratings：rating_id、rating_value、rating_display

```

我基本上是在向用户提问，这些问题存储在 dj_feedback_questions 表中，并允许他们对每个问题进行评分。评分存储在 dj_feedback_ratings 中。

每个表单都可以有不同的问题，所以当我提交问题时，我会将答案存储在 dj_feedback_answers 中。表单上还有其他更多静态字段，这些字段被放入 dj_feedback_summary。summary_id 和 gig_id 是连接两个表以获取用户提交的答案的键。

这意味着对于 dj_feedback_summary 表中的单行，dj_feedback_answers 中可以有多行。

我想做的基本上是能够利用 PHP 表中的结果。所以我希望我的结果看起来像这样（假设 dj_feedback_questions 表中有三个问题）：

```
summary_id、user_id、gig_date、小费、总结、why_poor、why_fair、question_1、question_2、question_3
1, 2, 07/23/2012, 5, 这是一个总结, 很差, 很公平, 3, 4, 5

```

为问题存储的值将是来自 dj_feedback_answers 的 answer_id。

我尝试创建以下查询来获得我的结果。这工作正常，但它只能显示一个问题而不是所有问题。

```
Select dj_feedback_summary.summary_id, 
       dj_feedback_summary.user_id, 
       dj_feedback_summary.gig_date, 
       dj_feedback_summary.tip, 
       dj_feedback_summary.summary,  
       dj_feedback_answers.question_id, 
       dj_feedback_answers.rating_id, 
       dj_feedback_questions.question_value, 
       users.first_name, users.last_name, 
       dj_feedback_ratings.rating_value
from dj_feedback_summary
join dj_feedback_answers on dj_feedback_summary.summary_id=dj_feedback_answers.gig_id
join dj_feedback_questions on dj_feedback_answers.question_id=dj_feedback_questions.question_id 
join users on dj_feedback_summary.user_id=users.user_id
join dj_feedback_ratings on dj_feedback_ratings.rating_id=dj_feedback_answers.rating_id
where dj_feedback_questions.question_value='Overall Gig'
order by dj_feedback_summary.summary_id DESC 
```

有没有办法修改我的查询，以便它可以返回我想要的结果？

任何意见是极大的赞赏！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:53:21.963

如果您需要显示来自多行的值，并且它们不是必须位于单独的列中，那么 MySQL [GROUP CONCAT 函数](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat "组连接")可能适合您的目的。

这将使您`question_1`,`question_2`和`question_3`值连接到一个列中（如果我正确理解您的输出意图）。

**更新：**要进行更“真正”的支点（将不同问题的答案分成不同的列），您可以使用以下方法之一：

**1) 使用多个表别名：**为每个问题加入`dj_feedback_questions`表一次，例如以下几行：

```
SELECT [...] FROM [...]
LEFT JOIN dj_feedback_questions q1 on q1.question_id = 1
LEFT JOIN dj_feedback_questions q2 on q2.question_id = 2
LEFT JOIN dj_feedback_questions q3 on q2.question_id = 3 
```

然后，您需要 a) 以`dj_feedback_answers`类似方式加入（多次使用别名），因为您通过 获得它`question_id`，并且您希望将不同的问题分成不同的列，并且 b) 汇总结果并决定如何处理空值，因为执行常规`JOIN`而不是 a`LEFT JOIN`将导致您丢失任何缺少一个或多个问题答案的摘要的行。

**2）用`IF`块分成列：**参见这个SO问题（特别是接受的答案）以获得说明：[Transpose mysql query rows into columns](https://stackoverflow.com/questions/9685601/transpose-mysql-query-rows-into-columns)

# ruby-on-rails - Rails 3 设计确认过滤器

> ID：11619388
> 
> 赞同：1
> 
> 时间：2012-07-23T19:43:07.087
> 
> 标签：ruby-on-rails, devise, devise-confirmable

我想知道是否可以使用 Devise 有选择地要求确认某些控制器操作。

基本上：我希望用户注册一个帐户（这将触发一封确认电子邮件），自动登录，并**能够以已登录（但仍未确认）**用户的身份立即浏览网站的某些部分。访问**某些区域（例如，支付）需要用户首先确认他们的电子邮件**。

我希望有类似的东西`before_filter: user_is_confirmed, only: [payment_related_stuff]`

我搜索了一段时间，找不到开箱即用的方法，所以我想创建一个 hacky 解决方案，其中所有可能的保护区仍然需要`before_filter: authenticate!`，但我会覆盖 Devise SessionsController 的创建以允许访问某些确认前的区域。但是，我不确定这是否是正确的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T20:04:44.290

在设计中使用内置解决方案，您可以与之前的过滤器`allow_unconfirmed_access_for 1.year`结合使用`current_user.confirmed?`

# windows - libUSB / WinUSB 转 WinDDK 驱动程序端口

> ID：11619390
> 
> 赞同：0
> 
> 时间：2012-07-23T19:43:08.680
> 
> 标签：windows, device-driver, libusb, wdk, winusb

我想使用 WDK（在内核模式下）将 libUSB 驱动程序移植到 Windows 驱动程序。我发现 libUSB 在内部使用了 winUSB（来自 libUSB Sources）。

这就是我在 libusb 中所做的，

1.  我使用 libusb_open_device_with_vid_pid 获取句柄

    或 libusb 内部使用 pSetupDiGetClassDevsA 和其他 pSetupDi*** 函数

2.  我使用 libusb_control_transfer 或内部 WinUSB 的 WinUsb_WritePipe 发送数据

在内核模式下，WDK 中 this 的等效功能是什么？有没有我可以使用的样本？

**注意：** 我要求内核模式的原因是，我需要获取这些数据并将其重新路由为 HID 迷你驱动程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:23:10.280

您应该阅读有关 WDM 驱动程序的信息。在内核模式下这样做是完全不同的故事。winddk 中有一个名为 usbsamp 的示例。我建议你从那里开始。

为了更简单的方法，您可能需要查看 KMDF：阅读此[http://msdn.microsoft.com/en-us/library/windows/hardware/gg463311.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463311.aspx)

# tsql - 游标循环中的 TSQL 更快

> ID：11619395
> 
> 赞同：3
> 
> 时间：2012-07-23T19:43:45.113
> 
> 标签：tsql, cursor

建立一个查询。

单个查询如下所示，运行时间为 7.0 秒。它确实返回正确的答案。需要根据特定条件对行数进行计数，然后得到最大计数。我的问题是这种支持查询的性能。包裹在游标中的相同查询是 0.15 秒。在游标中，查询计划有很大不同。如何使独立查询运行得更快？

使用提示能够让独立计划看起来像光标计划，并解决了速度问题。

固定查询：（并非一直固定为 OPTION 失败）

```
select max(list.match) as 'max'
  from
  (
      SELECT 
       count(*) as 'match'  
      FROM [docSVenum1] with (nolock)   
      INNER LOOP JOIN  [FTSindexWordOnce] as w1 with (NOLOCK, FORCESEEK) 
        ON [docSVenum1].sID = w1.[sID] and [docSVenum1].[enumID] = '142'
      INNER HASH JOIN [FTSindexWordOnce] as w2 with (NOLOCK)
        ON  w1.wordID = w2.wordID and w2.[sID] = '2'      
      GROUP BY W1.[sID]
      -- OPTION (HASH GROUP)
  ) as list; 
```

问题查询：

```
select getdate();
go
  select max(list.match) as 'max'
  from
  (
      SELECT 
       count(*) as 'match'
      FROM [FTSindexWordOnce] as w1 with (nolock)
      INNER JOIN [docSVenum1] with (nolock)
        ON [docSVenum1].sID = w1.[sID] and [docSVenum1].[enumID] = '142'
      INNER JOIN [FTSindexWordOnce] as w2 with (nolock)
        ON  w1.wordID = w2.wordID AND w2.[sID] = '2'
      GROUP BY W1.[sID]
  ) as list;
go
select getdate();   -- 7.0 seconds 
```

我还需要针对多个值运行该单个查询并将其放入带有循环的游标中。我知道光标不好，但我不知道如何在没有光标的情况下做到这一点。

该查询独立且在循环内都返回相同的正确答案。

令我惊讶的是，游标循环中完全相同的查询要快 40 倍。

```
DECLARE @sid int

DECLARE sID_cursor CURSOR FOR 
SELECT top 80 sID
FROM docSVsys
WHERE sID = '2'  -- actually I want to not have this and let it loop through all
                 -- when i built the loop i saw performance improvement
ORDER BY sID

OPEN sID_cursor

FETCH NEXT FROM sID_cursor
INTO @sID

WHILE @@FETCH_STATUS = 0
BEGIN
    PRINT @sID

  select max(list.match) as 'max'
  from
  (
      SELECT 
       count(*) as 'match'
      FROM [FTSindexWordOnce] as w1 with (nolock)
      INNER JOIN [docSVenum1] with (nolock)
        ON [docSVenum1].sID = w1.[sID] and [docSVenum1].[enumID] = '142'
      INNER JOIN [FTSindexWordOnce] as w2 with (nolock)
        ON  w1.wordID = w2.wordID AND w2.[sID] = @sID
      GROUP BY W1.[sID]
  ) as list

    FETCH NEXT FROM sID_cursor
    INTO @sID

END 
CLOSE sID_cursor;
DEALLOCATE sID_cursor;
go
select getdate();  -- 0.15 seconds 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T17:37:50.337

使用提示能够让独立计划看起来像光标计划，并解决了速度问题。

固定查询：（并非一直固定为 OPTION 失败）

```
select max(list.match) as 'max'
  from
  (
      SELECT 
       count(*) as 'match'  
      FROM [docSVenum1] with (nolock)   
      INNER LOOP JOIN  [FTSindexWordOnce] as w1 with (NOLOCK, FORCESEEK) 
        ON [docSVenum1].sID = w1.[sID] and [docSVenum1].[enumID] = '142'
      INNER HASH JOIN [FTSindexWordOnce] as w2 with (NOLOCK)
        ON  w1.wordID = w2.wordID and w2.[sID] = '2'      
      GROUP BY W1.[sID]
      -- OPTION (HASH GROUP)
  ) as list; 
```

# solr - Solr 服务器安全

> ID：11619411
> 
> 赞同：1
> 
> 时间：2012-07-23T19:44:52.820
> 
> 标签：solr, solrj

我有一个 Solr 服务器，它通过 Ajax 请求将搜索结果返回给用户。请求看起来像这样：[http](http://abc.com/core1/select?q=) ://abc.com/core1/select?q= ...

现在我才意识到这会将我的搜索服务器暴露给潜在的“坏人”。我可以在 jetty Solr 服务器上进行基本身份验证，但它会阻止人们调用搜索服务器。

我的问题是解决此问题的常用策略是什么？我是否应该使用我的 Tomcat 网络服务器中的 Solrj java 客户端库先进行搜索，然后将结果返回给用户，同时完全防火墙访问搜索服务器？还有其他方法可以绕过它吗？

# c# - 针对相同版本的 .NET 框架的随机数种子

> ID：11619412
> 
> 赞同：1
> 
> 时间：2012-07-23T19:44:53.893
> 
> 标签：c#, random

> **可能重复：**
> [针对相同版本的 .NET 框架的随机数种子](https://stackoverflow.com/questions/11619074/random-number-seed-targeting-the-same-version-of-the-net-framework)

如果我的应用程序以 .NET 框架 3.5 为目标，每个 CPU 是否会基于相同的种子返回相同的随机序列？我想知道你是否得到和我一样的结果。我也希望我分发我的应用程序的每个人也能得到相同的结果。谢谢！

```
Random a = new Random(44448); 
int i1 = a.Next(65, 90); 
MessageBox.Show(i1.ToString()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:49:14.570

是的，如果你有相同的种子，你每次都会以相同的顺序获得相同的随机数。这是设计使然。您何时想要执行此操作的示例：

*   在测试程序时，您可以使用固定种子，以便获得相同的结果。
*   如果您记录程序中使用的种子并且遇到问题，那么您可以确定生成的随机数，以便尝试重现错误。
*   如果您想衡量性能，您可以使用固定种子，这样您就不会在不同的运行中获得不同的数据。

默认情况下（即当您不指定种子时）将使用系统时间。这里的一般想法是，你取一个“随机”数字，使用它，你可以制作更多的“随机”数字。如果您将当前时间降低到非常非常小的精度水平，那么它实际上是随机的。大多数情况下，这种默认行为对您来说是可以接受的，只要您确保不要创建`Random`太靠近的新实例（这样它们就没有相同的种子）。您还可以通过更安全的算法生成一个随机数，并将其作为种子传递。（我见过人们做的一个例子是创建一个新的 GUID 并将其作为种子传递。这实际上是一个不错的想法。）

# cygwin - 如何从 CygPort 构建 src？

> ID：11619415
> 
> 赞同：9
> 
> 时间：2012-07-23T19:45:14.170
> 
> 标签：cygwin, gedit, ports

我对 cygport 包中的源代码结构有疑问。

这是 Cygports 源文件的内容：

*   项目的实际源包（tar.gz、tar.bz2 等）
*   任意数量的 *.patch 文件。
*   .cygport 文件

我正在尝试从 cygports 存储库构建 gedit-3.4.2。

.cygport 文件如何帮助我在 ./configure 中运行正确的选项？

例如，在 gedit 中，如果我没有指定 --disable-spell，它不会因为错误而继续。如何获取构建 cygport 时用于构建项目的 ./configure 选项列表？

有什么方法可以使用 cygport 可执行文件来构建 cygport 并更改前缀吗？

以下是 的内容`gedit-3.4.2-1.cygport`：

```
inherit python gnome2

DESCRIPTION="GNOME text editor"

PATCH_URI="3.4.2-cygwin.patch"

DEPEND="gnome-common gtk-doc
    girepository(Gtk-3.0)
    pkgconfig(enchant)
    pkgconfig(gtksourceview-3.0)
    pkgconfig(libpeas-gtk-1.0)"

PKG_NAMES="${PN} ${PN}-devel"
PKG_HINTS="setup devel"
gedit_CONTENTS="--exclude=gtk-doc --exclude=libgedit* etc/ usr/bin/ usr/lib/gedit/ ${PYTHON_SITELIB#/} usr/share/"
gedit_devel_CONTENTS="usr/include/ usr/lib/gedit/libgedit* usr/lib/pkgconfig/ usr/share/gtk-doc/"

DIFF_EXCLUDES="*.desktop.in *.schemas.in *-marshal.h"

CYGCONF_ARGS="--libexecdir=/usr/lib --enable-python"

KEEP_LA_FILES="none" 
```

**编辑**Cygwin Ports 邮件列表中的某个人说：

“配置选项是

```
--libexecdir=/usr/lib --enable-python 
```

来自 CYGCONF_ARGS。”

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-26T22:18:58.260

> 这是 Cygports 源文件的内容：

您最好将其视为*Cygwin*包源文件。

`cygport`只是一个用于自动创建 Cygwin 二进制和源包的工具。它是可用的主要工具，但与其他一些打包系统不同，实际上没有任何东西强迫您使用它。完全手动构建 Cygwin 包是完全可能的，因为它实际上只不过是一个 tarball，Cygwin`setup.exe`可以盲目地解压到 Cygwin 根目录（通常是`c:\cygwin`.

在`cygport`存在之前，人们确实建立了自己的*临时*包装系统。许多 Cygwin 包维护者仍然使用他们创建的这些工具。（真正包括你的；我的三个包中的两个使用`cygport`，但第三个仍然使用自定义构建系统。）

最终，您想阅读`cygport`手册，在`/usr/share/doc/cygport/manual.html`.

（是的，我知道，“RTFM”的答案在这里不受欢迎。但是，作为目前`cygport`在官方 Cygwin 软件包存储库中维护两个基于软件包的人，当我告诉您该手册仍然是唯一可用的最佳资源时，请相信我这个话题。）

> .cygport 文件如何帮助我在 ./configure 中运行正确的选项？

正如您通过其他资源发现的那样，您首先需要编辑文件`CYGCONF_ARGS`中的值`.cygport`。

之后最简单的步骤是`cygport gedit-3.4.2-1.cygport all`。这试图在一个步骤中重建所有二进制包。它还构建了一个包含更新`.cygport`和补丁文件的新源包。

如果在`all`构建过程中出现问题，通常切换到使用包含的子命令`all`而不是完全重新启动过程会更快。该`all`步骤只是按顺序运行 `prep`, `compile`, `install`, `package`, and `finish`for you。例如，如果`all`在编译步骤中失败，则可能不需要重复该`prep`步骤。

`cygport`（对于一个健全的构建系统来说，破坏构建树，迫使您重新运行是非常罕见的。更常见的是，当您在尝试获取新包时手动破坏构建树时，*您*`prep`最终需要重新执行第一次构建，需要重新开始。）`prep`

 *> 例如，在 gedit 中，如果我没有指定 --disable-spell，它不会因为错误而继续。

您可以通过`libaspell-devel`从官方 Cygwin 软件包存储库安装软件包来解决这个问题[`setup.exe`](http://cygwin.com/setup.exe)。

就个人而言，我不会禁用任何功能，除非它意味着安装非官方软件包，例如来自[Cygwin Ports](http://sourceware.org/cygwinports/)项目的软件包。[*] 拥有 Cygwin Ports 存储库很好，但是因为它包含这么多软件包，所以安装一个可能会结束创建一个“安装世界”的情况：包 A 依赖于包 B、C 和 D，而 C 依赖于 E、F、G、H，而 G 依赖于 I、J、K 和... Cygwin 包回购往往比 Cygports 回购中的更扁平和更窄。

> 有什么方法可以使用 cygport 可执行文件来构建 cygport 并更改前缀吗？

你已经猜到你只是添加`--prefix=/my/private/program/tree`到`CYGCONF_ARGS`，我相信。

* * *

[*] 如果您对“Cygwin Ports”和 感到困惑`cygport`，命名相似并非巧合。`cygport`是 Yaakov Selkowitz 在创建 Cygwin Ports 包存储库时为自己创建的工具。后来，它在其他 Cygwin 包维护者中变得足够流行，以至于它推出了大多数竞争构建系统。*

# batch-processing - 识别批处理文件的运行实例

> ID：11619416
> 
> 赞同：3
> 
> 时间：2012-07-23T19:45:18.763
> 
> 标签：batch-processing, batch-file

这些对我不起作用。

任何帮助肯定纠正下面的四个例子？

示例01 只是回显“继续”，即使我打开了三个 CMD.exe。

---------- 示例 01 ------------

```
@echo off 
wmic process where name="cmd.exe" | find "cmd.exe" /c
SET ERRORLEVEL=value if "%value%" GTR 1 ( 
    ECHO This batch is not first  
    ECHO quitting ...
    )
if "%value%" LSS 2 ECHO continue 
```

我在示例 02 中收到“意外 i 错误”消息！

----------- 示例 02 -------

```
@echo off
FOR /F "usebackq tokens=2" %i IN (`tasklist ^| findstr /r /b "cmd.exe"`)
   DO taskkill /pid %%i 
```

即使打开了三个 CMD.exe，我也会在示例 03 中收到“是第一个”消息！

----------- 示例 03 -------

```
 @echo off
    wmic process where name="cmd.exe" | find "cmd.exe" /c
    if "%errorlevel%" LEQ 1 echo CMD is first
    if "%errorlevel%" GTR 1 echo CMD is already running 
```

也有可能我在工作时无法访问 Wmic 命令，因此，在示例 04 中找到了另一种可能性......但无济于事。

----------- 示例 04 --------

```
@echo off
Tasklist /FI "IMAGENAME eq cmd.exe" 2>NUL | find /I /N "cmd.exe">NUL
if "%ERRORLEVEL%"==0 do (goto Use) else (goto Cont)
:Cont
ECHO Only one instance running
pause

:Use
echo Application running already. Close this window 
```

* * *

亲切的问候，马莱克

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T00:54:45.277

wmz 发现了 OP 代码中的一些错误，并且还有一个很好的建议是使用锁定文件进行并发控制。

下面是一个强大的批处理解决方案，它使用锁定文件来防止批处理文件的多个实例同时运行。它使用临时锁定文件进行并发控制。锁定文件的存在并不会阻止脚本运行。仅当另一个进程对锁定文件具有排他锁时，该脚本才会失败。如果脚本在不删除锁定文件的情况下崩溃或被终止，这一点很重要。运行脚本的下一个进程仍然会成功，因为文件不再被锁定。

此脚本假定脚本安装在本地驱动器上。它只允许整台机器使用一个实例。有很多变化可以控制允许的并发量。例如，将 %USERNAME% 并入锁定文件名将允许网络环境中的每个用户一个实例。在名称中包含 %COMPUTERNAME% 将允许网络环境中的每台机器有一个实例。

```
@echo off
setlocal

:: save parameters to variables here as needed
set "param1=%~1"
:: etc.

:: Redirect an unused file handle for an entire code block to a lock file.
:: The batch file will maintain a lock on the file until the code block
:: ends or until the process is killed. The main code is called from
:: within the block. The first process to run this script will succeed.
:: Subsequent attempts will fail as long as the original is still running.
set "started="
9>"%~f0.lock" (
  set "started=1"
  call :start
)
if defined started (
    del "%~f0.lock" >nul 2>nul
) else (
    echo Process aborted: "%~f0" is already running
)
exit /b

:start
:: The main program appears below
:: All this script does is PAUSE so we can see what happens if
:: the script is run multiple times simultaneously.
pause
exit /b 
```

**编辑**

错误消息*“该进程无法访问该文件，因为它正被另一个进程使用。”* 可以通过将 stderr 输出重定向到外部块中的 nul 来抑制。

```
2>nul (
  9>"%~f0.lock" (
    set "started=1"
    call :start
  )
) 
```

上面的问题是主程序的所有错误消息也将被抑制。这可以通过以下方式解决：首先将 stderr 的当前定义保存到另一个未使用的文件句柄，然后添加另一个将 stderr 重定向回保存的文件句柄的内部块。

```
8>&2 2>nul (
  9>"%~f0.lock" (
    2>&8 (
      set "started=1"
      call :start
    )
  )
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T20:47:02.067

1.  你不设置`value`任何地方。即使你这样做了，它也不起作用，因为变量在解析时会被扩展。如果您需要针对设置的内容设置和测试变量，则需要使用延迟扩展。不需要比较报价（见 3）。`help set`将向您显示信息延迟扩展。
2.  %i 应该是 %%i。`DO taskkill /pid %%i`必须与`for`命令的其余部分在同一行。您还可以`findstr`在正则表达式模式下使用，这意味着它将搜索*cmd[ **any character** ]exe*
3.  您使用字符串（词法）比较： "1" leq 1**为真**（*因为 "4" leq 1 也是...*）。使用`errorlevel 1`which 相当于*errorlevel 等于或大于 1*。`help if`显示语法
4.  与 3 plus `do`in相同，`do (goto Use)`应删除。`%errorlevel%==0`会起作用，但通常建议使用`errorlevel number`.

如何检查是否只有 1 个 cmd 正在运行：

```
@echo off
for /f %%i in ('Tasklist /FI "IMAGENAME eq cmd.exe" 2^>NUL' ^| find /I /c  "cmd.exe"') do (
if %%i leq 2 (echo only one instance) else (echo More than one instance)
) 
```

注意：这只是一个例子。我不建议将此作为一种真正的并发控制方法。我宁愿为此使用锁定文件。

# vb.net - 从屏幕中心制作一个矩形截图

> ID：11619422
> 
> 赞同：0
> 
> 时间：2012-07-23T19:45:55.903
> 
> 标签：vb.net, screen, screenshot, center

我想知道如何从屏幕中心截取屏幕截图（尺寸为 180x100）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:56:38.583

这应该可以为您提供您正在寻找的图像。（已编辑）

```
Dim Img As New Bitmap(180, 100)
Dim g As Graphics = Graphics.FromImage(Img)
g.CopyFromScreen((Screen.PrimaryScreen.WorkingArea.Width / 2) - 90, _
    (Screen.PrimaryScreen.WorkingArea.Height / 2) - 50, _
    0, 0, Img.Size)
g.Dispose() 
```

# javascript - CSS和jQuery制作一个滑动面板，将另一个div水平推，而不是向下推，右侧面板必须填满所有页面

> ID：11619423
> 
> 赞同：2
> 
> 时间：2012-07-23T19:45:57.623
> 
> 标签：javascript, jquery, css, html

我有两个`div`元素，一个是隐藏的左侧面板，并根据需要折叠/展开。在右边，我有另一个`div`必须被推送，其中包含一个`iframe`，这`iframe`必须填满整个屏幕或屏幕的剩余部分。现在左 div 将我的右 div 向下推。

[这](http://jsfiddle.net/ddre54/cZjMR/3/)是我的代码，红色边框代表我的左面板（折叠/展开）。带 的`iframe`代表权利。

你能帮我吗，所以左边的面板水平推动另一个面板，右边的面板相应地调整以适应窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:18:24.860

首先，我不认为寡妇宽度依赖脚本是最好的解决办法。

其次，避免 CSS height:100% 像瘟疫一样......它不能很好地工作，你可以将 window.height() 传递给一个变量并用 jQuery 设置它们。

第三，您可能希望定位 iframe 以及外部 div。

[http://jsfiddle.net/eteich/cZjMR/8/](http://jsfiddle.net/eteich/cZjMR/8/)

# ruby-on-rails - Ruby on Rails 登录会话

> ID：11619425
> 
> 赞同：0
> 
> 时间：2012-07-23T19:46:04.590
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

似乎我搞砸了一些东西，我不确定它是什么！但它不工作，因为它应该工作

最初我试图实现一个记住我的框，但它需要一个旋转，现在如果我编辑客户详细信息并更新它，那么我会自动注销。不知道为什么会这样，但这里有一个片段

类客户控制器 < 应用控制器

```
def index
    @customers = Customer.all
end

def new
    @customer  = Customer.new
end

def show
    @customer = Customer.find(params[:id])
    @posts = @customer.posts
end

def create
        @customer = Customer.new(params[:customer])
        if @customer.save
        sign_in @customer
        flash[:success] = "Welcome to Where you Where!"
        redirect_to @customer

        else
            render 'new'
        end
end

def edit
    @customer = Customer.find(params[:id])
end

def update
    if @customer.update_attributes(params[:customer])
        flash[:success] = "Profile Updated"
        redirect_to @customer
    else
        render 'edit'
    end
end

def destroy
    Customer.find(params[:id]).destroy
    redirect_to root_path
end

private

    def current_customer?(customer)
        customer == current_customer
    end

    def correct_customer
        @customer = Customer.find(params[:id])
        redirect_to(root_path) unless current_customer?(@customer)
    end

    def admin_customer
        redirect_to(root_path) unless current_customer && current_customer.admin?
    end 
```

结尾

这是我的会话控制器

```
module SessionsHelper

 def sign_in(customer)
   cookies.permanent.signed[:remember_token] = [customer.id, customer.salt]
   self.current_customer = customer
 end
 def sign_out
    cookies.delete(:remember_token)
    self.current_customer = nil
  end

  def signed_in?
    !current_customer.nil?
  end

 def current_customer?(customer)
    return false unless current_customer
    current_customer.id == customer.id
  end
  def current_customer=(customer)
    @current_customer = customer
  end

  def current_customer
     @current_customer ||= customer_from_remember_token
  end
  def authenticate
    deny_access unless signed_in?
  end
  def deny_access
    store_location
    redirect_to signin_path, :notice => "Please sign in to access this page."
  end
  def redirect_back_or(default)
    redirect_to(session[:return_to] || default)
    clear_return_to
  end

  private

   def customer_from_remember_token
      Customer.authenticate_with_salt(*remember_token)
   end

   def remember_token
      cookies.signed[:remember_token] || [nil, nil]
   end
   def store_location
     session[:return_to] = request.fullpath
   end
   def clear_return_to
     session[:return_to] = nil
   end

end 
```

这里是帮助文件

```
module SessionsHelper

    def sign_in(customer)
            cookies.permanent[:remember_token] = customer.remember_token
            self.current_customer = customer
    end

    def signed_in?
        !current_customer.nil?
    end

    def sign_out
        self.current_customer = nil
        cookies.delete(:remember_token)
    end

    def current_customer=(customer)
        @current_customer = customer
    end

    def current_customer
        @current_customer ||= Customer.find_by_remember_token(cookies[:remember_token])
    end

    def current_customer?(customer)
        customer == current_customer
    end

    def redirect_back_or(default)
        redirect_to(session[:return_to] || default)
        session.delete(:return_to)
    end

    def store_location
        session[:return_to] = request.fullpath
    end
end 
```

我正在关注[http://ruby.railstutorial.org/chapters/](http://ruby.railstutorial.org/chapters/)上的教程，并且在第 10 章。但我也尝试通过 railcast 实现一个记住我的复选标记框，这似乎根本不起作用。（不同的代码）

再次感谢

我添加了这个以获得额外的支持

```
class ApplicationController < ActionController::Base
    protect_from_forgery
    before_filter :pages

    def pages
        @pages = Page.all
    end

private

    def current_customer
      @current_customer ||= Customer.find(session[:customer_id]) if session[:customer_id]
    end
    helper_method :current_customer

    def authorize
      redirect_to login_url, alert: "Not authorized" if current_customer.nil?
    end

    include SessionsHelper
end 
```

更新:: 在过滤之前尝试注释掉这里发生了什么。按照您的教程，我尝试使用您的方法来实现，以确保它不是一个小点或某种东西。但这就是我现在的新错误！

```
NameError in SessionsController#create
undefined local variable or method `encrypted_password' for #<Customer:0xb57f11c8> 
```

所以这是我最新的客户模型

```
class Customer < ActiveRecord::Base
# RELATIONS

    has_many :posts, dependent: :destroy

# Data Access

    attr_accessor :password
    attr_accessible :first_name, :last_name, :middle_name, :email, :password, :password_confirmation
    before_save :encrypt_password

# VALIDATION

    validates :first_name, presence: true, length: { maximum: 50 }
    validates :middle_name, length: { maximum: 50 }
    validates :last_name, presence: true, length: { maximum: 50 }
    VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
    validates :email, presence:   true,
                    format:     { with: VALID_EMAIL_REGEX },
                    uniqueness: { case_sensitive: false }
    validates_uniqueness_of :email
    validates :password, presence: true, length: { minimum: 6 }
    validates :password_confirmation, presence: true

# METHODS

    def has_password?(submitted_password)
        encrypted_password == encrypt(submitted_password)
    end

    def self.authenticate(email, submitted_password)
        customer = find_by_email(email)
        customer && customer.has_password?(submitted_password) ? customer : nil
    end

    def self.authenticate_with_salt(id, cookie_salt)
        customer = find_by_id(id)
        (customer && customer.salt == cookie_salt) ? customer : nil
    end

 private 
    def encrypt_password
      self.salt = make_salt if new_record?
      self.encrypted_password = encrypt(password)
    end
    def encrypt(string)
      secure_hash("#{salt}--#{string}")
    end  
    def make_salt
      secure_hash("#{Time.now.utc}--#{password}")
    end
    def secure_hash(string)
      Digest::SHA2.hexdigest(string)
    end 
end

# == Schema Information
#
# Table name: customers
#
#  id               :integer         not null, primary key
#  first_name       :string(255)
#  email            :string(255)
#  created_at       :datetime        not null
#  updated_at       :datetime        not null
#  password_digest  :string(255)
#  remember_token   :string(255)
#  last_name        :string(255)
#  middle_name      :string(255)
#  auth_token       :string(255)
#  login_count      :integer         default(0)
#  current_login_at :datetime
#  last_login_at    :datetime
#  current_login_ip :string(255)
#  last_login_ip    :string(255)
#  password_hash    :string(255)
#  password_salt    :string(255)
# 
```

我不明白为什么这些方法没有定义。他们是自指的！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T23:16:36.913

嗯，我已经查看了您的代码，但看不到任何会导致注销的内容。这是我的教程应用程序的链接：[https](https://github.com/htw-rails/TutorialSampleApp32) ://github.com/htw-rails/TutorialSampleApp32 - 所有方法看起来都差不多。和你的一样。我会尝试将 before_filters 注释掉，看看是否会有所作为。

# java - 替换 ZipOutputStream 中的文件

> ID：11619427
> 
> 赞同：0
> 
> 时间：2012-07-23T19:46:16.167
> 
> 标签：java, zip, serializable, zipoutputstream

我想创建 zip 文件。文件将包含导出`Preferences`和`Serializable`对象。但是当我尝试替换 zip 存档中的对象时，保存的首选项消失了。如何解决这个问题？

```
import java.io.BufferedOutputStream;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.util.prefs.BackingStoreException;
import java.util.prefs.InvalidPreferencesFormatException;
import java.util.prefs.Preferences;
import java.util.zip.Deflater;
import java.util.zip.ZipEntry;
import java.util.zip.ZipInputStream;
import java.util.zip.ZipOutputStream;

public class ToZip {

    /**
     * @param args
     */
    static Preferences exportPrefs = Preferences
            .userNodeForPackage(ToZip.class);

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        exportPrefs.put("Val", "MyVal");

        writeFile();
        readFile();
        System.out.println("Value:" + exportPrefs.get("Val", ""));

        // And Try replace object
        writeObject();
        readObject();
    }

    private static void writeFile() {

        String str = "ABCD";

        FileOutputStream fos = null;
        try {
            fos = new FileOutputStream("/home/user/profile.prof");
            BufferedOutputStream boS = new BufferedOutputStream(fos);
            ZipOutputStream zoS = new ZipOutputStream(boS);
            ObjectOutputStream ooS = null;

            zoS.setMethod(ZipOutputStream.DEFLATED);
            zoS.setLevel(Deflater.BEST_COMPRESSION);

            zoS.putNextEntry(new ZipEntry("Object"));

            ooS = new ObjectOutputStream(zoS);
            ooS.writeObject(str);

            zoS.putNextEntry(new ZipEntry("Profile"));
            exportPrefs.exportSubtree(zoS);

            try {
                ooS.close();
            } catch (NullPointerException ex) {
            }

            zoS.close();
            fos.close();
            boS.close();
        } catch (FileNotFoundException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (BackingStoreException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

    }

    private static void readFile() {

        FileInputStream fiN;
        try {
            fiN = new FileInputStream("/home/user/profile.prof");
            ZipInputStream ziS = new ZipInputStream(fiN);

            ziS.getNextEntry();

            ObjectInputStream oiS = new ObjectInputStream(ziS);
            System.out.println("Read String " + oiS.readObject());

            ziS.getNextEntry();

            exportPrefs.importPreferences(ziS);

        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InvalidPreferencesFormatException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    private static void writeObject() {// replace serialize object

        String str2 = "XYZ";

        FileOutputStream fos = null;
        try {
            fos = new FileOutputStream("/home/user/profile.prof");
            BufferedOutputStream boS = new BufferedOutputStream(fos);
            ZipOutputStream zoS = new ZipOutputStream(boS);
            ObjectOutputStream ooS = null;

            zoS.setMethod(ZipOutputStream.DEFLATED);
            zoS.setLevel(Deflater.BEST_COMPRESSION);

            zoS.putNextEntry(new ZipEntry("Object"));

            ooS = new ObjectOutputStream(zoS);
            ooS.writeObject(str2);

            try {
                ooS.close();
            } catch (NullPointerException ex) {
            }

            zoS.close();
            fos.close();
            boS.close();
        } catch (FileNotFoundException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

    }

    private static void readObject() {

        FileInputStream fiN;
        try {
            fiN = new FileInputStream("/home/user/profile.prof");
            ZipInputStream ziS = new ZipInputStream(fiN);
            ziS.getNextEntry();

            ObjectInputStream oiS = new ObjectInputStream(ziS);
            System.out.println("Read String " + oiS.readObject());

            oiS.close();

        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:08:11.557

您似乎没有在您的方法中导出偏好，也没有在您的方法`writeObject()`中阅读它们。`readObject()`

在`writeObject()`中，您缺少：

```
 exportPrefs.exportSubtree(zoS); 
```

而且你没有在你的`readObject()`

```
 exportPrefs.importPreferences(ziS); 
```

# scala - reader writer state monad - 如何运行这个scala代码

> ID：11619433
> 
> 赞同：18
> 
> 时间：2012-07-23T19:47:03.533
> 
> 标签：scala, monads, scalaz

[托尼莫里斯用这个片段](https://gist.github.com/2360532)发表了演讲。

他使用 ReaderWriterState monad 提供对隐式上下文的受控读/写访问。这就说得通了。

如何使用代码？我想看一个使用这个单子的示例“主”程序。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-19T21:09:17.113

[Scalaz 7](https://gist.github.com/2364137)现在提供了这个 monad，下面是一个完整的工作示例，对上面评论中链接[的 Michael Pilquist 的示例进行](https://gist.github.com/2364137)了少量修改。

```
package scalaz.example

import scalaz._, Scalaz._

object RWSExample extends App {
  case class Config(port: Int)

  def log[R, S](msg: String): ReaderWriterState[R, List[String], S, Unit] =
    ReaderWriterStateT {
      case (r, s) => (msg.format(r, s) :: Nil, (), s).point[Id]
    }

  def invokeService: ReaderWriterState[Config, List[String], Int, Int] =
    ReaderWriterStateT {
      case (cfg, invocationCount) => (
        List("Invoking service with port " + cfg.port),
        scala.util.Random.nextInt(100),
        invocationCount + 1).point[Id]
    }

  val program: RWS[Config, List[String], Int, Int] = for {
    _ <- log("Start - r: %s, s: %s")
    res <- invokeService
    _ <- log("Between - r: %s, s: %s")
    _ <- invokeService
    _ <- log("Done - r: %s, s: %s")
  } yield res

  val (logMessages, result, invocationCount) = program run (Config(443), 0)
  println("Result: " + result)
  println("Service invocations: " + invocationCount)
  println("Log: %n%s".format(logMessages.mkString("\t", "%n\t".format(), "")))
} 
```

这是针对 Scalaz 7.2.18 进行测试的，Scalaz 7.2.18[可以](http://mvnrepository.com/artifact/org.scalaz/scalaz-core_2.12/7.2.18)作为 Maven 或 SBT 依赖项从 Maven 的中央存储库轻松获得。

# c# - 应用程序插入/更新查询优化

> ID：11619435
> 
> 赞同：-1
> 
> 时间：2012-07-23T19:47:08.197
> 
> 标签：c#, .net, optimization

我正在创建运行大量插入/更新查询的 Windows 窗体应用程序。即使插入少量信息（700 行），您也必须等待几分钟。这是我正在使用的代码：

```
 foreach (DataRow row in dt.Rows)
    {
      for (int i = 0; i < dt.Columns.Count; i++)
      {
        listItems.Add( row[dt.Columns[i].ColumnName], ListOperator.Comma);
      }
    var insQry = "INSERT INTO table ( ";
    insQry = insQry + colList + " ) VALUES ( " + listItems.ToString() + " )";
    var tbl = server.RunQuery(insQry);

//at running time this query would look like this "INSERT INTO table (col1,col2) VALUES (value1, value2)" 
```

对我来说奇怪的是，当我恢复数据时（为了恢复数据，我正在使用更新/删除查询）我被插入，查询性能只需要几秒钟。

有什么可能缩短插入查询性能时间？也许有可以帮助的线程？（如果是这样，什么样的线程？异步？并行线程？）。

欢迎所有想法！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:53:08.140

也许是因为您使用字符串连接来构建查询。你应该使用参数。使用它们有很多优点，包括 SQL 注入的性能和安全性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:51:53.573

首先，您是否将插入包装在事务中？`using (var trans = new TransactionScope(){...}`

其次，为什么不使用 aa `DataAdapter`？

# properties - 属性不适用于 CATextLayer

> ID：11619452
> 
> 赞同：1
> 
> 时间：2012-07-23T19:48:45.023
> 
> 标签：properties, core-animation, catextlayer

我试图将我的`CATextLayer`文本（这是一个数字“1”）放在视图的中心，但我得到的是非常小的文本，而不是如图所示的[中心](http://tinypic.com/r/24docg9/6)。显示的红色圆圈是一个`CALayer`动画对象本身，所以我不想将文本作为子图层添加到它。相反，我添加为子层来查看。我为 CATextLayer 编写的代码是：

```
CATextLayer *numbers = [CATextLayer layer];

numbers.string = @"1";
numbers.font = [UIFont fontWithName:@"Arial" size:100.0];
numbers.foregroundColor = [UIColor blackColor].CGColor;
numbers.bounds = CGRectMake(0, 0, 200, 200);
numbers.position = self.view.center;
numbers.wrapped = NO;

[self.view.layer addSublayer:numbers]; 
```

我希望我的问题很清楚。请告诉我我错在哪里？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:16:41.377

## 编辑

该`font`属性采用 CGFontRef 而不是 UIFont。您可以使用`CGFontCreateWithFontName( (CFStringRef)@"ArialMT" )`. 使用该`fontSize`属性设置字体大小。

## 原始答案

正确的字体名称是`"ArialMT"`[^(**1**)](http://iosfonts.com/)。由于您使用的是不存在的字体名称，因此文本将获得默认字体和大小。

该层实际上是居中的，200 x 200 点^(**2**)。问题是文本不在文本层内居中，而是文本位于左上角。更大的字体可以使它看起来几乎居中，但它仍然不会。

您可以更改图层内容（在您的情况下为文本）相对于图层边界的绘制方式，方法是将图层更改为`contentsGravity`类似于`kCAGravityCenter`如果您希望文本在文本图层的框架内居中显示

* * *

1.  [iOS 字体](http://iosfonts.com/)是获取某些字体时应使用的名称的绝佳资源。
2.  这可以通过给文本层一个强烈的背景颜色来很容易地验证，比如清晰的蓝色（因为你的圆圈是红色的）

# javascript - JavaScript“外来字符”正则表达式无法捕捉模式

> ID：11619455
> 
> 赞同：0
> 
> 时间：2012-07-23T19:48:52.903
> 
> 标签：javascript, regex

尝试设置一个简单的 .jsp 来测试 JavaScript 正则表达式，并避免每次进行更改时都必须清理/构建/重新发布我的测试服务器。现有代码取自我正在努力添加对西班牙语字符的识别的项目，但这段代码似乎根本没有发现任何不匹配。

```
<html>
<head>
    <script language="JavaScript">
        function isValidTarget(target) {
            if (regexTarget.target.search(/^[a-zA-Z\#\@\!\&\.\*\-:;<>"',\?0-9 ]+$/) == -1) {
                alert("Your input contains one or more invalid characters.");
            }
        }
    </script>
</head>
<body>
    <form name="regexTarget" method="post" onSubmit="return isValidTarget(this)">
        Target: <input type="text" name="target"/>
        <input type="submit" value="Submit" />
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:51:48.577

您正在命名参数`target`，但您从不使用它。要么删除参数，要么使用它（例如。`if( target.target.search...`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:57:55.050

您正在尝试搜索 DOM 节点而不是其值。试试这个：

```
regexTarget.target.value.search(...) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T20:06:01.807

```
if (target.target.value.search(/^[a-zA-Z\#\@\!\&\.\*\-:;<>"',\?0-9 ]+$/) == -1) 
```

# c# - C# 终止实现 DispatcherTimer 的类库

> ID：11619459
> 
> 赞同：0
> 
> 时间：2012-07-23T19:49:00.507
> 
> 标签：c#, kill, class-library

我正在使用类库来模拟和处理数据并通过触发事件返回结果。

```
DataProcessor _dataProcessor 
```

在其中，我使用 DispatcherTimer 来模拟数据并在模拟数据可用并准备好推送到 GUI 时引发事件。

想知道如何最好地杀死 _dataProcessor？

我的经验是这样设置

```
_dataProcessor = null; 
```

不会杀死 DispatcherTimer。事件仍会引发并仍传递给 GUI。

在 GAC 处理类库之前，我是否必须停止/取消 DispatcherTimer？

感谢您的任何指导，因为我不确定一般来说处理此任务的最佳方法，但单独按需终止类库的实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:03:46.623

DispatcherTimer 在启用时会保持活动状态，即使您不保留对它的引用。相当重要的是，除非明确要求它停止（），否则没有人希望计时器停止引发事件。它通过将对自身的引用添加到由 Dispatcher 保存的私有 List<> 中来实现。并在 Stop() 中删除该引用。

如果 DataProcessor 具有非静态 Tick 事件处理程序，这反过来又可以确保您的 DataProcessor 不会被垃圾收集。将您保留的引用设置为 null 无效，Dispatcher 保留的引用和事件委托使对象保持活动状态。

您需要向 DataProcessor 添加一个停止计时器的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T19:54:03.273

你的`DataProcessor`类应该实现`IDisposable`接口 - [http://msdn.microsoft.com/en-us/library/system.idisposable.aspx](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)

然后，当您想杀死您的`DataProcessor`班级时，您可以调用 DispatchTimer.Stop() 。

```
public class DataProcessor : IDisposable
{
    private bool disposed = false; 
    DispatchTimer timer;

    protected virtual void Dispose(bool disposing)
    {
        if (!disposed)
        {
            if (disposing)
            {
                if(timer != null)
                   timer.Stop();
            }

            disposed = true;
        }
    }

    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }

    ~DataProcessor()
    {
        Dispose(false);
    }
} 
```

用它：

```
using(DataProcessor process = new DataProcessor)
{
     //etc...
} //stop timer 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T19:55:09.560

`DispatcherTimer`我在标准 .NET 类列表中找不到，所以我认为它是您自己的类。如果是这种情况，那么标准模式是让您的`DispatcherTimer`类实现`IDisposable`，然后`_dataProcessor.Dispose()`在您不再需要它时调用它，或者通过`using`关键字处理它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T20:10:55.940

galets 和 EkoostikMartin 已经回答了这个问题。让我`using`更详细地解释 - 语句。在 c# 中的两个不同语句中使用了相同的关键字。我不会`using <namesapce>;`在这里讨论。另一个可以在方法中使用。假设`DispatchTimer`实现`IDisposable`：

```
using (var timer = new DispatchTimer()) {
    timer.Start();
    // ... do something here.
} 
```

和

```
{
   var timer = new DispatchTimer();
   try {
       timer.Start();
       // ... do something here.
   } finally {
       if (timer != null) {
           ((IDisposable)timer).Dispose();
       }
   }
} 
```

它为您提供了一种安全的方式来关闭或终止您已打开或启动的内容。如果在 using 块中发生异常，或者如果 using 块被遗弃，则 Dispose 甚至会被调用`return`。

* * *

### 更新

正如 EkoostikMartin 在他的评论中所说，`DispatchTimer`没有实现`IDisposable`，但您可以轻松创建它的一次性版本

```
public class DisposableDispatchTimer : DispatchTimer, IDisposable
{
    public void Dispose()
    {
        Stop();
    }
} 
```

# python - 寻求惰性化 Python 数据的指南

> ID：11619464
> 
> 赞同：1
> 
> 时间：2012-07-23T19:49:16.103
> 
> 标签：python, lazy-evaluation

注意：我根据评论和答案编辑了原始问题。

我的问题是，如果将大量 Python 数据输入到程序中，如何使这些数据变得惰性，从而使内存不溢出？

例如，如果一个列表是通过读入一个文件并将每一行或每一行的一部分附加到一个列表中来构建的，那么这个列表是惰性的吗？换句话说，可以附加一个列表并且该列表是惰性的吗？是否附加到将整个文件读入内存的列表？

我知道如果我想浏览该列表，我会编写一个生成器函数来保持访问惰性。

触发这个问题的是最近[的 SO 帖子](https://stackoverflow.com/questions/11618782/possibility-of-memory-error#comment15385219_11618782)

如果这些数据来自具有 10M 行的数据库表，例如我们的 MySQL 每日水表读取表之一，我不会在不知道如何使数据变得惰性的情况下使用 mysqldb fetchall() 命令。相反，我会一次读一行。

但是如果我确实希望内存中的数据内容作为惰性序列呢？我将如何在 Python 中做到这一点？

鉴于我没有提供具有特定问题的源代码，我正在寻找的答案是指向 Python 文档中某个位置或解决此问题的其他位置的一个或多个指针。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:51:48.900

Python 中用于延迟呈现序列的机制是[生成器](http://wiki.python.org/moin/Generators)。

> 生成器 [原文如此] 函数允许您声明一个行为类似于迭代器的函数，即它可以在 for 循环中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T00:17:12.220

A list is almost the opposite of lazy. The best example would be the difference between `range` and `xrange`; `range` creates a list, while `xrange` lazily gives you each number as you need it, using a generator.

```
>>> total = 0
>>> for i in range(2**30):
    total += i

Traceback (most recent call last):
  File "<pyshell#18>", line 1, in <module>
    for i in range(2**30):
MemoryError
>>> print total
0
>>> for i in xrange(2**30):
    total += i
>>> print total
576460751766552576 
```

Many of the places that will take a list will also take a generator in its place. This is so true that Python 3 does away with `xrange` entirely, and uses it to replace the normal `range`.

```
>>> total2 = sum(xrange(2**30))
>>> print total2
576460751766552576 
```

It's easy to make your own generator:

```
>>> def myrange(n):
        i = 0
        while i < n:
            yield i
            i += 1
>>> sum(xrange(10))
45
>>> sum(myrange(10))
45
>>> myrange(10)
<generator object myrange at 0x02A2DDA0> 
```

And if you do really need a list, that's easy too. But then of course it's no longer lazy.

```
>>> list(myrange(10))
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T22:26:09.210

“惰性”代码的基本思想是代码在需要数据之前不会获取数据。

例如，假设我正在编写一个函数来复制一个文本文件。将整个文件读入内存，然后写入整个文件，这不会是偷懒。`.readlines()`使用该方法从所有输入行中构建一个列表也不会是懒惰的。但是一次读一行然后读完后写每一行会很懒惰。

```
# non-lazy
with open(input_fname) as in_f, open(output_fname, "w") as out_f:
    bytes = in_f.read()
    out_f.write(bytes)

# also non-lazy
with open(input_fname) as in_f, open(output_fname, "w") as out_f:
    lines = in_f.readlines()
    for line in lines:
        out_f.write(line)

# lazy
with open(input_fname) as in_f, open(output_fname, "w") as out_f:
    for line in in_f:  # only gets one line at a time
        out_f.write(line) # write each line as we get it 
```

为了帮助您的代码变得懒惰，Python 允许您使用“生成器”。`yield`使用该语句编写的函数是生成器。对于您的数据库示例，您可以编写一个生成器，该生成器一次从数据库中生成一行，然后您可以编写如下代码：

```
def db_rows(database_name):
    # code to open the database goes here
    # write a loop that reads rows
        # inside the loop, use yield on each row
        yield row
    # code to close the database goes here

for row in db_rows(database_name):
    # do something with the row 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T23:47:13.427

> 但是如果我确实希望内存中的数据内容作为惰性序列呢？

以下是创建惰性序列的方法：不是存储项目，而是根据请求动态生成它们，但将其隐藏在`[]`语法后面。我一直忘记SQL API是如何工作的，所以下面应该理解为伪代码。

```
class Table(object):
    def __init__(self, db_cursor):
        self._cursor = db_cursor

    def __getitem__(self, i):
        return self._cursor.fetch_row(i)

    def __iter__(self):
        for i in xrange(len(self)):
            yield self[i]

    def __len__(self):
        return self._cursor.number_of_rows() 
```

这可以在许多可以`list`使用 a 但实际上不存储任何内容的情况下使用。根据需要添加缓存（取决于访问模式）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T19:53:04.707

如果您只想要可以迭代的东西，我会研究生成器：

[PEP 255](http://www.python.org/dev/peps/pep-0255/)包含很多相关信息。

取决于文件类型的另一个选项是[linecache](http://docs.python.org/library/linecache.html?highlight=file%20cache#module-linecache)模块。

# c++ - 如何使用eclipse构建C++应用程序

> ID：11619471
> 
> 赞同：6
> 
> 时间：2012-07-23T19:50:30.360
> 
> 标签：c++, eclipse, g++, eclipse-cdt

我已经从[这里](http://www.eclipse.org/downloads/download.php?file=/technology/epp/downloads/release/juno/R/eclipse-cpp-juno-linux-gtk-x86_64.tar.gz)下载了 Eclipse Juno for C++ 。我正在尝试构建一个简单的 hello world 程序（主要是为了使用 eclipse 进行 C++ 测试），但我无法构建和运行它。这是我的代码：

```
#include <iostream>
using namespace std;

int main() {
    cout << "hello" << endl;
    return 0;
} 
```

问题选项卡显示

```
make: *** No rule to make target `all'. 
```

我只能假设发生这种情况是因为 eclipse 未配置为找到我的编译器（`g++`用于 archlinux），但我不知道如何修复它。理想情况下，我希望能够像在 Java 中一样轻松地使用 Eclipse 进行 C++ 编程（即编写代码、构建和运行）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T16:58:29.730

Makefile 是一个文件，用作从命令行构建项目的“映射”（或在您的情况下使用 IDE）。使用 Makefile 编译由许多文件组成的复杂项目是一种很好的做法，因为可以使用或不使用 IDE（在您的情况下为 Eclipse）进行编译。要在 Eclipse 之外编译您的项目，只需从命令行键入“make”。

在您的情况下，您以某种方式选择了使用 makefile 编译的选项（我认为这个选项是最好的）。

要从这一点解决您的问题（无需重新创建项目），只需在您的项目中添加一个空白文件：

文件->新建->其他
展开“常规”并选择“文件”

将其命名为“Makefile” **（输入此名称很重要）（我假设您的源代码存储在名为“main.cpp”的文件中，并且您的可执行文件将被称为“hello”）** （我还假设 g++已安装在您的系统上，因为某些 Linux 发行版仅预装了 gcc）

使用以下内容编辑文件“Makefile”（如果您愿意，可以在同一个 Eclipse 中）：（**尊重选项卡很重要！）**

```
all: main.o
     g++ -o hello main.o

main.o: main.cpp
     g++ -c main.cpp

clean:
     rm *.o 
```

现在，当您编译您的项目时，您应该会看到如下内容：（在“控制台”选项卡中）

```
make all
g++ -c main.cpp
g++ -o hello main.o 
```

这是您可以为您的项目创建的最简单的 Makefile。网上有很多关于 Makefile 语法的帮助，可用于更复杂的构建。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T22:05:03.213

按照这个：创建新的 C++ 项目。比在项目类型中选择 Executable -> Hello world。

# gwt - 从 GWT 元素中删除内联样式属性

> ID：11619472
> 
> 赞同：3
> 
> 时间：2012-07-23T19:50:41.763
> 
> 标签：gwt, styling

我继承了很多遗留的 GWT 代码，可以简洁地描述为“Web 开发人员最糟糕的噩梦”。开发人员使用了许多具有内联样式的元素——例如，GWT DeckPanel。

我想删除这些内联样式，以便可以应用外部样式表，但我似乎找不到任何方法。我知道可以通过 this:`DOM.setStyleAttribute(container1, "height", "100%");`或类似方式设置内联样式，但似乎没有任何对应的`removeStyleAttribute`. 有一个`DOM.removeElementAttribute`，但这不适用于样式。

**有没有办法从属性中显式删除所有内联样式？**我尝试了谷歌搜索，但我最终发现的只是与 UIBinder 相关的内容以及来自 GWT 开发人员的大量防御性帖子，例如“你为什么要这样做？” 而且我不能做太多的代码修改，因为这个应用程序很大，而且我在截止日期前。我们没有使用 UIBinder。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T20:05:40.717

像这样设置内联 CSS 样式：

```
Style style = widget.getElement().getStyle();
style.setPosition(Position.ABSOLUTE);
style.setTop(50, Unit.PX);
style.setLeft(0, Unit.PX);
// etc. 
```

要删除样式：

```
style.clearPosition();
style.clearTop();
style.clearLeft(); 
```

或者：

```
DOM.setStyleAttribute(element, "height", ""); 
```

要删除元素的*所有内联样式：*

```
DOM.setElementProperty(element, "style", ""); 
```

您还可以通过附加`!important`到样式定义来使用外部样式覆盖内联样式。例如

```
.my-gwt-widget {
    height: 150px !important;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T22:06:57.270

如果要清除元素的样式，可以使用以下代码：

```
DOM.setElementProperty(element, "style", ""); 
```

# jquery - jQuery订单 如果它被标记为特殊类，则在列表的开头

> ID：11619473
> 
> 赞同：0
> 
> 时间：2012-07-23T19:50:46.207
> 
> 标签：jquery

我有这个漂亮的 jquery 脚本，它包含`li`s 列表并将它们分组到`ul`4`li`个以下。

但是有些`li`s 有一个特殊的类：`<li class="prefslidefeatured">`

我希望这个特殊的 li 保持在列表的顶部，因此在第一个 ul 中作为第一个 li。可以有几个被标记为特色的列表，所以我希望它们都留在列表的开头，因此首先是 ul。

我是否可以轻松修改此脚本以适应此新功能？任何想法如何实现这一目标？

我还制作了 jsfiddle 进行快速肮脏测试:) [http://jsfiddle.net/sandrodz/5at2G/](http://jsfiddle.net/sandrodz/5at2G/)

```
//This is for footer slider, it rewrites 1 ul into several uls that contain 4 li max.
$(document).ready(function(){

    // get the container, useful for later too...
    var container = $(".prefooterslides");

    // get all available UL and LI elements...
    var li_elements = container.find("LI").clone();

    // remove the current content so that we can rebuild it for the slider...
    container.find("UL").remove();

    // build the slider container...
    var slide_container = $("<div />");
    slide_container.addClass("slides_container");

    // tricky part: looping through the LI's and building each of the slides...
    // first create some helpful variables...
    var li_elements_per_slide = 4;
    var li_counter = 0;
    // create the first slide, with a UL to hold the LI's...
    var current_li_div = $("<div />");
    current_li_div.append($("<ul />"));

    // loop through the LI's...
    li_elements.each(function(index, element){

        li_counter++;
        var current_li = $(element).clone();
        current_li_div.find("UL").append(current_li);

        if (li_counter % li_elements_per_slide == 0)
        {
            // we've hit 4 in this list, so add the slide and make
            // a new one, using same code as before...
            container.append(current_li_div);
            current_li_div = $("<div />");
            current_li_div.append($("<ul />"));
        }

    });

    // we might have an uneven number of LI's, so we need to check for this...
    if (li_counter % li_elements_per_slide != 0)
        container.append(current_li_div);

    // all that's left to do is to initialise the slider script...
    $("#prefooterindex").slides({
        container: 'prefooterslides',
        generatePagination: false
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T20:13:31.647

尝试这个：

改变：

```
var li_elements = container.find("LI").clone(); 
```

至：

```
var li_elements = container.find("LI.prefslidefeatured").clone();
li_elements = li_elements.add(container.find('LI:not(.prefslidefeatured)').clone()); 
```

它首先获取所有的特征`li`s，然后将所有非特征`li`s 添加到数组的末尾。现在`.each()`进一步向下迭代首先遍历特色项目，这意味着它们被添加到最顶部的`ul`s 中。

小提琴：http: [//jsfiddle.net/5at2G/1/](http://jsfiddle.net/5at2G/1/)

# actionscript-3 - 为什么我的 HTML 按钮在 IE8 中的 Flash 内容上方而不是在后面？

> ID：11619475
> 
> 赞同：0
> 
> 时间：2012-07-23T19:50:52.010
> 
> 标签：actionscript-3, flash, apache-flex, internet-explorer

我现在正在寻找解决方案几个小时，但没有成功。

我有一个简单的 Flex/Flash/SWF 对象，我想用它来读取本地文件并返回它的 base64 版本。

源文件可以在 GitHub 上找到：[https ://github.com/Country/FileToDataURI.as](https://github.com/Country/FileToDataURI.as)

在 Firefox（最新版本）和 IE9 中，当您将鼠标移到按钮上并单击时，会调用 Flash 对象并打开浏览文件窗口。IE8（和 IE7）除外：按钮显示在 Flash 内容的上方。所以如果你点击按钮，它不会调用 Flash 对象！如果您在按钮（右侧）之后移动鼠标，您会看到光标发生变化，因为它检测到 Flash 对象，您可以单击它。所以它表明Flash适用于IE8。

在任何地方我都能读到 Flash 总是在 HTML 之上，但对于 IE8 却不是……我尝试了几件事：

*   直接调用对象（没有 Google SWFObject）；
*   更改 CSS（我认为也许“显示”选项或“位置”会影响行为）；
*   通过 A 元素更改按钮；
*   在页面中的对象元素周围移动。

一些帮助将不胜感激。谢谢。

**编辑**

最后，我创建了自己的系统，它允许做几乎相同的事情，它现在可以工作了： http: [//aymkdn.github.com/FileToDataURI/](http://aymkdn.github.com/FileToDataURI/) 这个项目允许使用 Flash 或 Javascript 读取本地文件并返回文件的 base64 编码内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T02:35:31.803

您是否尝试过将 flash 元素的 css 中的 z-index 设置为 10？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:42:46.477

如果将 wmode 更改为“不透明”会怎样

# php - 用于 PHP 的 Yaml 扩展

> ID：11619478
> 
> 赞同：0
> 
> 时间：2012-07-23T19:50:58.967
> 
> 标签：php, linux, apache2

我已经通过 pecl 为 php 安装了 YAML 库。我将扩展名添加到 php.ini 文件中。我可以看到它已加载，并通过 phpinfo() 启用。

```
yaml

LibYAML Support enabled
Module Version  1.1.0-dev
LibYAML Version 0.1.3 
```

但是，当我在我的 php 代码中使用 yaml_parse() 时，它会出现一个未找到函数的致命错误。

有人对可能发生的事情有任何想法吗？

谢谢你，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:54:24.973

您是否在 CLI 中安装了扩展程序，而不是在 webserver 配置中，反之亦然？

# video - 通过 FTP 下载视频时无法播放

> ID：11619479
> 
> 赞同：-1
> 
> 时间：2012-07-23T19:50:59.607
> 
> 标签：video, upload, ftp

我的网站上有一个表格，用户可以在其中上传视频文件。当我对此进行测试时，我遇到了视频播放问题。

我在我的相机上录制了一段视频，然后把它带到我的电脑上。当我把视频带到我的电脑上时，它可以正常播放。在我的 Windows 资源管理器中，我可以选择视频并查看一些基本信息，例如帧大小等。

我去我网站上的表格并上传视频。视频上传完成后，我通过 FTP 登录我的服务器并下载视频。

我将视频保存到我的桌面并双击它来播放。执行此操作时，我收到类似“Windows Media Player 无法播放文件。播放器可能不支持文件类型或可能不支持用于压缩文件的编解码器”之类的错误。

我很困惑，因为这是我在上传之前可以正常播放的同一个视频文件。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:54:20.070

您可能没有使用二进制 FTP 模式，因此恰好包含换行符序列的二进制数据将被损坏。

有关详细信息，请参阅您的 FTP 客户端文档。例如... [http://www.coreftp.com/docs/web1/Ascii_vs_Binary_transfers.htm](http://www.coreftp.com/docs/web1/Ascii_vs_Binary_transfers.htm)

# c - c中的双数组语法

> ID：11619480
> 
> 赞同：0
> 
> 时间：2012-07-23T19:51:07.667
> 
> 标签：c, arrays

这个问题可能看起来非常简单，但是我如何在 c 中声明一个返回双精度数组的函数。例如

```
char myfunction(int a, int b)
{
...
char d[a][b];
...
return d;
} 
```

但这似乎不起作用（如果响应可以避免“malloc”和“free”的用法，那么理解这些基本用法可能会更有帮助）

最好的，纽本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T20:04:07.563

> 但这似乎不起作用（如果响应可以避免“malloc”和“free”的用法，那么理解这些基本用法可能会更有帮助）

好吧，你不能因为你提议返回一个一旦函数返回就无效的指针。该数组被声明为具有自动存储持续时间，因此，一旦函数返回，对它的所有引用都将无效。您不能从 C 中的函数返回数组。

如果您需要在函数中填充数据，则可以从函数中返回`char**`一个`malloc`。

```
char **foo(int cols, int rows) {
  char **ret = malloc(rows * sizeof(char*));
  if(!ret)
    return ret;

  for(int i = 0; i < rows; ++i) {
    ret[i] = malloc(cols);
    /* error checking again for malloc,
       call free() on pointers 0...i upon failure.
       memset to 0 if you like */
  }

  return ret;
} 
```

您现在可以对返回值使用多维数组语法。

```
char **p = foo(10, 20);

// p[j] returns a pointer to char, p[j][k] returns a char
char elem = p[j][k]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T20:06:44.147

在这种情况下，您无法避免 malloc 和 free。问题是通过声明

```
char d[a][b]; 
```

您直接在堆栈上分配一个数组，因此当您的函数返回时，数组被取消分配并且您返回的地址无效。

使用类似的东西：

```
char** myfunction(int a, int b) {
    char** d = (char**)malloc(a * sizeof(char*));

    if (d ! = NULL) {
        for (int i = 0; i < b; i++) {
            d[i] = (char*)malloc(sizeof(char));

            if (d[i] == NULL) {
                for (int j = 0; j < i; j++) {
                    free(d[j]);
                }

                free(d);
                d = NULL;

                break;
            }
        }
    }

    return d;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T20:15:44.660

在 C 中，如果您希望一个函数创建一个数组并将其返回给它的调用者，您*必须*使用`malloc`或另一个动态分配内存的函数（例如`calloc`or `realloc`）。然后，您可以返回指向该数组的指针。

```
char **make2dArray(int x, int y) {
    int i;
    char **array = calloc(x, sizeof(char*));
    for(i = 0; i < x; i++) {
        array[i] = calloc(y, sizeof(char));
    }
    return array;
} 
```

另一方面，如果您只是需要修改数组的值，最好将数组作为参数并在原地修改。

```
void modify2dArray(int x, int y, char **array) {
    int i, j;
    for(i = 0; i < x; i++) {
        for(j = 0; j < y; j++) {
            array[i][j] = 1;
        }
    }
} 
```

请记住，一旦您完成了动态分配的内存，请为每个分配调用 free ：

```
void dealloc2dArray(int x, int y, char **array) {
    int i;
    for(i = 0; i < x; i++) {
        free(array[i]);
    }
    free(array);
} 
```

以下是使用这些函数的样子：

```
char **array = NULL;
array = make2dArray(5,6);
modify2dArray(5,6,array);
dealloc2dArray(5,6);
array = NULL; 
```

请注意，动态分配函数（`malloc`、`calloc`和`realloc`）可能会失败，返回 NULL。我没有在每次分配后检查 NULL 以节省空间，但确保分配成功通常是一种好习惯。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T21:31:48.083

自 C99 以来，在 C 中，分配真实二维数组的正确方法，而不是其他答案中的仿真，是执行以下操作：

```
char (*array)[cols] = malloc(cols * rows); 
```

如果你必须在一个函数中这样做，对我来说最简单的方法似乎是

```
void * foo(int cols, int rows) {
  char (*ret)[cols] = malloc(rows * cols);
  // do something with it
  return ret;
} 
```

调用它时，您必须更加小心地将维度赋予新变量

```
char (*array)[cols] = foo(cols, rows); 
```

所有这些都具有一个优点，即一个简单`malloc`的用于分配一个连续的对象，并且您只需要`free`在最后进行一次调用即可释放内存。

# java - 将对象的 ArrayList 转换为 jasperreports 的对象数组

> ID：11619482
> 
> 赞同：0
> 
> 时间：2012-07-23T19:51:13.870
> 
> 标签：java, jasper-reports

行。这里有一个很大的新手问题，但我一直在徒劳地寻找解决方案。

使用我在[这里](http://jasperforge.org/uploads/publish/jasperreportswebsite/trunk/sample.reference/datasource/index.html#customdatasource)找到的示例，我能够在我的报告中获得一个自定义数据源。

但是......该示例将这段代码用于作为数据传递的实际对象

```
private Object[][] data =
  {
   {"Berne", new Integer(22), "Bill Ott", "250 - 20th Ave."},
   {"Berne", new Integer(9), "James Schneider", "277 Seventh Av."},
   {"Boston", new Integer(32), "Michael Ott", "339 College Av."},
   {"Boston", new Integer(23), "Julia Heiniger", "358 College Av."}, etc... 
```

不幸的是，java 不允许动态添加到该 Object 数组，并且由于报告数据总是动态的，因此它变得无用。

我已经尝试了一个自定义数据类，其中包含我添加到 ArrayList 之类的两个元素

```
ArrayList<myDataObject> a = new ArrayList<myDataObject>();

for(int x=0;x<5;x++){
    myDataObject myl = new myDataObject("asdasd",Integer.toString(x));
    a.add(myl);
} 
```

但是（这是 newbee 部分）我似乎无法弄清楚如何将其转换为 jasper 期望的简单 Object[][] 。

这是我正在使用的数据类

```
import java.util.ArrayList;
import net.sf.jasperreports.engine.JRDataSource;
import net.sf.jasperreports.engine.JRException;
import net.sf.jasperreports.engine.JRField;

public class CustomData implements JRDataSource {

    private Object data[][];
    private int index;

//    public CustomData(Object o[][]) {
//        index = -1;
//        this.data = o;
//    }
     public CustomData(ArrayList <Object> a) {
        index = -1;
        this.data = (Object)a.toArray();
    }

    public boolean next() throws JRException {
        index++;
        return (index < data.length);
        //throw new UnsupportedOperationException("Not supported yet.");
    }

    public Object getFieldValue(JRField field) throws JRException {
        Object value = null;
        String fieldName = field.getName();

        if ("aName".equals(fieldName)) {
            value = data[index][0];
        }
        else if ("aNumber".equals(fieldName)) {
            value = data[index][1];
        }

        return (String)value;
//        throw new UnsupportedOperationException("Not supported yet.");
    }

} 
```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:16:15.367

简单地遍历列表并将其添加到二维数组中就会想到：

```
public static void main(String[] args) {
    ArrayList<MyDataObject> a = new ArrayList<MyDataObject>();

    for(int x=0;x<5;x++){
        MyDataObject myl = new MyDataObject("asdasd", Integer.toString(x));
        a.add(myl);
    }

    int aSize = a.size();
    Object[][] thingy = new Object[aSize][2];
    for(int i = 0; i < aSize; i++) {
        MyDataObject mdo = a.get(i);
        thingy[i][0] = mdo.getS();
        thingy[i][1] = mdo.getI();
    }
} 
```

# c# - 将 ContentControl 设置为自定义图像

> ID：11619483
> 
> 赞同：0
> 
> 时间：2012-07-23T19:51:35.100
> 
> 标签：c#, wpf

f 我有一个 ContentControl... 并且其 Content 设置为自定义 Image... 并且自定义 Image 具有名为 Source 的字段，该字段包含位图数据...我需要哪些额外步骤来确保 ContentControl 显示该位图数据? 我在想我做错了这一步......因为 Source 只是一个字段？

此外，位图数据不断变化。

```
public class VideoRenderer : System.Windows.Controls.Image
{
    #region Fields
    protected DateTime lastFrameTimestamp;
    protected Rectangle rect;
    protected System.Timers.Timer timer;
    protected BitmapData bitmapData;
    protected Bitmap bitmap = null;
    private Video videoObject = null;
    private Participant participantObject = null;
    private bool isRunning = false;
    private int updateInterval = 50;
    private uint key = 0;
    private int videoWidth = 0;
    private int videoHeight = 0;
    private SkypeRoot skypeRef;
    private FrameTransport frameTransport;
    private double fps = 0;
    private System.Windows.Media.ImageSource source;
    object bitmapLock = new object();
    #endregion

    /// <summary>
    /// Gets and sets the source of the video renderer image.
    /// </summary>
    public new System.Windows.Media.ImageSource Source
    {
        get { return source; }
        set { source = value; }
    }

    #region Constructors
    /// <summary>
    /// Constructor.
    /// </summary>
    /// <param name="skype"></param>
    public VideoRenderer(SkypeRoot skype)
    {
        this.skypeRef = skype;
    }
    #endregion

    #region Internal Members
    /// <summary>
    /// Convert frame to a bitmap.
    /// </summary>
    /// <returns></returns>
    internal bool MoveFrameToBitmap()
    {
        lock (bitmapLock)
        {
            if (frameTransport.bitmapDataSize == 0)
            {
                return false;
            }

            bool ResolutionHasChanged = ((videoWidth != frameTransport.width) | (videoHeight != frameTransport.height));

            if ((bitmap == null) | ResolutionHasChanged)
            {
                if (bitmap != null)
                {
                    bitmap.Dispose();
                }

                videoHeight = frameTransport.height;
                videoWidth = frameTransport.width;
                bitmapData = null;
                bitmap = new Bitmap(videoWidth, videoHeight);
                bitmapData = new BitmapData();
                bitmapData.Width = videoWidth;
                bitmapData.Height = videoHeight;
                bitmapData.PixelFormat = System.Drawing.Imaging.PixelFormat.Format24bppRgb;
                rect = new Rectangle(0, 0, videoWidth, videoHeight);
            }

            bitmap.LockBits(rect, ImageLockMode.ReadWrite, System.Drawing.Imaging.PixelFormat.Format24bppRgb, bitmapData);
            IntPtr ptr = bitmapData.Scan0;
            Marshal.Copy(frameTransport.bitmapData, 0, ptr, frameTransport.bitmapDataSize);
            bitmap.UnlockBits(bitmapData);

            if (ResolutionHasChanged) skypeRef.events.FireOnVideoResolutionChanged(this, new RootEvents.OnVideoResolutionChangedArgs(videoWidth, videoHeight));

            return true;
        }
    }

    /// <summary>
    /// Draw the bitmap to the picturebox.
    /// </summary>
    internal void DrawBitmap()
    {
        lock (bitmapLock)
        {
            using (MemoryStream memory = new MemoryStream())
            {
                bitmap.Save(memory, ImageFormat.Png);
                memory.Position = 0;
                BitmapImage bitmapImage = new BitmapImage();
                bitmapImage.BeginInit();
                bitmapImage.StreamSource = memory;
                bitmapImage.CacheOption = BitmapCacheOption.OnLoad;
                bitmapImage.EndInit();

                source = bitmapImage;
            }
        }
    }
    #endregion

    #region External Members
    /// <summary>
    /// Start the video rendering.
    /// </summary>
    public void Start()
    {
        if (isRunning)
        {
            return;
        }

        if (videoObject == null)
        {
            throw new Exception("Error: cannot start rendering when the associated video object is null.");
        }

        isRunning = true;
        frameTransport = new FrameTransport();

        timer = new System.Timers.Timer();
        timer.Interval = updateInterval;
        timer.Enabled = false;
        timer.Elapsed += TimerTick;

        Int32[] preferences = new Int32[1];
        preferences[0] = MakeFourCC('B', 'I', '2', '4');
        frameTransport.SetPreferences(1, preferences);
        key = frameTransport.Key();
        videoObject.SetRemoteRendererID(key);
        lastFrameTimestamp = DateTime.Now;
        timer.Start();
    }
    #endregion

    #region Events
    /// <summary>
    /// Handle the timer when video is running.
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    private void TimerTick(object sender, EventArgs e)
    {
        if (frameTransport.IsNewFrameAvailable())
        {
            bool frameOk = frameTransport.GetFrame();

            if (frameOk)
            {
                bool bitmapOk = MoveFrameToBitmap();

                if (bitmapOk)
                {
                    AddCustomGraphics();
                    DrawBitmap();
                    double msSinceLastFrame = (Int32)DateTime.Now.Subtract(lastFrameTimestamp).TotalMilliseconds;
                    fps = 1000 / msSinceLastFrame;
                    lastFrameTimestamp = DateTime.Now;
                }
            }
        }
    }
    #endregion
} 
```

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T14:18:29.283

这个问题是 ImageSource 的设置方式......创建一个非重载的 Source 属性是问题......重命名这个然后将该属性设置为继承的源解决了这个问题。

干杯。

# wordpress - Javascript 文件未在 Wordpress 主题中正确排队

> ID：11619484
> 
> 赞同：-1
> 
> 时间：2012-07-23T19:51:35.597
> 
> 标签：wordpress, wordpress-theming

我正在将*TextPattern*网站转换为*Wordpress*主题。该站点刚刚开始，位于[http://ronvilwordpress.krd-design.net](http://ronvilwordpress.krd-design.net)。我在对*JavaScript*文件进行排队时遇到问题。我将以下代码放入了我的*functions.php*文件中：

* * *

```
<?php

// load javascript
add_action( 'wp_enqueue_scripts', 'load_js_files' );

function load_js_files() {
wp_register_script( 'modernizr', get_stylesheet_directory_uri() .     '/javascript/modernizr-1.7.min.js', array('jquery'), '1.0', true );
wp_register_script( 'plugins', get_stylesheet_directory_uri() . '/javascript/plugins.js', array('jquery'), '1.0', true );
wp_register_script( 'dd_belatedpng', get_stylesheet_directory_uri() . '/javascript/dd_belatedpng.js', array('jquery'), '1.0', true );
wp_register_script( 'script', get_stylesheet_directory_uri() . '/javascript/script.js',  array('jquery'), '1.0', true );
wp_register_script( 'xregex', get_stylesheet_directory_uri() . '/javascript/xregex.js', array('jquery'), '1.0', true );
wp_enqueue_script('modernizr');
wp_enqueue_script('dd_belatedpng');
wp_enqueue_script('plugins');
wp_enqueue_script('script');
wp_enqueue_script('xregex');
}

?> 
```

* * *

*JavaScript*文件位于主题文件夹根目录中标有**“javascript”**的文件夹中，因此我认为文件路径没有问题。

还有其他人遇到这个问题吗？任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:04:01.240

这不是文件路径，Wordpress 正在使用正确的路径将文件排入队列，JS 是可访问的。它将它们插入到而不是虽然。这不是你的问题，你在 dd_belatedpng.js 中有一个 JS 错误，暂时摆脱它，然后看看你在哪里处理其他文件。

# java - java中的通用地图

> ID：11619485
> 
> 赞同：2
> 
> 时间：2012-07-23T19:51:40.860
> 
> 标签：java, generics, map, hashmap

我有一个方法需要参数中的通用映射：

```
public void someMethod(Map<String,?> mapParameter){
    ...
} 
```

我调用此方法的实现对“？”有多个可能的值。通用参数。例如，有时“？”中的值 将是整数，其他将是字符串，布尔值。

是否存在某种方式来声明一个可以接受我的值并传递给“someMethod”方法的完全通用的 HashMap？

我试图将值提取到类“IntegerValueDTO”，接收字符串值中的值并转换为特定类型。创建的所有这些“valueDTO”类，我都从“defaultValue”扩展。有了这个，我实现了这张地图：

```
Map<String, ? extends DefaultValue> map = new HashMap<String, ? extends DefaultValue>(); 
```

**但是**，方法 someMethod 不是来自我的应用程序，它来自一个框架，那么我没有控制机会来实现。并以这种方式声明我的地图，他将生成 的地图`"Map<String, some instance of DefaultValue>"`，框架崩溃。

欢迎任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T20:17:10.347

```
Map<String, ? extends Object> map = new HashMap<String, ? extends Object>(); 
```

如果该方法返回一些您希望在应用程序中使用的值，您可以使用反射来查看它返回的值并强制转换为该特定对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:13:51.723

如果没有像 Def​​aultValue 这样的 Wrapper 类，您将无法做到这一点。

原因是 Integer、Character、Long 等的 Wrapper 类不扩展 Object。

# asp.net-mvc-4 - 默认登录表单上的 ASP.NET MVC 4 RC 不显眼的 javascript 验证不显示错误消息

> ID：11619486
> 
> 赞同：1
> 
> 时间：2012-07-23T19:51:44.703
> 
> 标签：asp.net-mvc-4

我创建了 ASP.NET MVC 4 Beta 互联网应用程序，运行它，打开登录表单，按下“登录”而不输入任何用户名或密码。我在登录名和密码文本框旁边收到验证消息。

我安装了 ASP.NET MVC 4 RC，做了同样的步骤，没有出现错误信息。文本框有红色边框，表示有问题，但没有错误消息。

我正在使用 VS 2010 SP1。

有人可以帮我了解从 beta 到 rc 的变化以及如何解决这个问题吗？

谢谢。

# ellipsis - 文本溢出问题：省略号

> ID：11619489
> 
> 赞同：2
> 
> 时间：2012-07-23T19:51:48.903
> 
> 标签：ellipsis, css

我对 text-overflow: ellipsis 有疑问 - 它不想与我的网站一起使用。我目前正在学习，并且我有这个项目，其中我有带有固定高度文本的 div。我尝试使用 text-overflow: ellipsis 但我似乎无法使其工作。现在我的代码如下：

```
<section class="comments">
    <p>
        Here is a short comment. 
    </p> 
```

我的CSS是：

```
.comments p {
    height: 40px;
    text-align: justify;
    text-overflow: ellipsis-word;
    line-height: 20px;
    word-wrap: break-word;
    overflow: hidden;
} 
```

它应该工作，但它没有。我曾尝试用 Firefox、Chrome、Opera 和 IE9 打开它，但它们都不适用。我试图在`<p>`包含文本的样式中添加一个样式，但没有帮助。我尝试将 更改`<p>`为`<div>`，然后尝试将样式设置为 ，`<div>`但没有成功。我尝试使用 text-overflow: ellipsis only - 它没有用。我尝试使用 text-overflow: clip - 它不起作用。显然我在某个地方犯了一个错误，但我想这对我来说太明显了。帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T15:28:32.757

[http://www.quirksmode.org/css/contents.html](http://www.quirksmode.org/css/contents.html)`white-space: nowrap`说，“这个属性只有在一个盒子有并且`overflow`不是.时才有意义`visible`。”

请注意，这`text-overflow`不在[CSS3 规范](http://www.w3.org/TR/css3-text/)中。

此外，`ellipsis-word`似乎没有实施。这种风格适合我（Win/Firefox 和 Chrome）：

```
.comments p {
    height: 60px;
    text-align: justify;
    text-overflow: ellipsis;
    line-height: 20px;
    word-wrap: break-word;
    white-space: nowrap;
    overflow: hidden;
    border: 1px solid #000000;
} 
```

# sql - SQL：减去两列

> ID：11619494
> 
> 赞同：5
> 
> 时间：2012-07-23T19:52:05.973
> 
> 标签：sql

```
select content_type_code_id 
    , ABS(price) AS price
    , SUM(case when price >= 0 THEN 1 ELSE 0 END) AS debits
    , SUM(case when price < 0 THEN 1 ELSE 0 END) AS credits
from dbo.transaction_unrated  
where transaction_date >= '2012/05/01'
      and transaction_date < '2012/06/01'
      and content_provider_code_id in (1)
group by content_type_code_id, ABS(price) 
ORDER BY ABS(price) ASC 
```

上述查询产生以下输出：

```
content_type_code_id    price   debits  credits
1                      0.00      317    0
1                      0.99      178    1
1                      1.99      786    1 
```

但我想要这样的东西：

```
content_type_code_id    price   debits  credits NetCount
    1                      0.00      317    0       317 
    1                      0.99      178    1       177 
    1                      1.99      786    1       785 
```

其中 NetCount =（借方 - 贷方）

当我尝试为此创建另一列时，出现错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T19:53:49.043

只需添加：

```
SUM(case when price >= 0 THEN 1 ELSE 0 END) - 
    SUM(case when price < 0 THEN 1 ELSE 0 END) AS NetCount 
```

作为你的最后一个陈述，所以你最终会得到这个：

```
select content_type_code_id 
    , ABS(price) AS price
    , SUM(case when price >= 0 THEN 1 ELSE 0 END) AS debits
    , SUM(case when price < 0 THEN 1 ELSE 0 END) AS credits
    , SUM(case when price >= 0 THEN 1 ELSE 0 END) - 
        SUM(case when price < 0 THEN 1 ELSE 0 END) AS NetCount
from dbo.transaction_unrated  
where transaction_date >= '2012/05/01'
      and transaction_date < '2012/06/01'
      and content_provider_code_id in (1)
group by content_type_code_id, ABS(price) 
ORDER BY ABS(price) ASC 
```

**Lamak 的派生表版本：**

您还可以使用派生表使代码更简洁：

```
select content_type_code_id,
    price, debits, credits, (debits - credits) as NetCount
from (
    select content_type_code_id 
        , ABS(price) AS price
        , SUM(case when price >= 0 THEN 1 ELSE 0 END) AS debits
        , SUM(case when price < 0 THEN 1 ELSE 0 END) AS credits
    from dbo.transaction_unrated  
    where transaction_date >= '2012/05/01'
          and transaction_date < '2012/06/01'
          and content_provider_code_id in (1)
    group by content_type_code_id, ABS(price) 
) YourDerivedTable
ORDER BY price ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-09T15:29:04.830

晚上好。我有一个类似的任务，发现它很短，只是添加一个列并更新它。

我认为这可以在您的代码生成数据库后完成。如果它不适合您的情况，我将不胜感激。

ALTER TABLE 表*名*ADD *NetCount* *integer* ;

*此处*更新表名称SET *NetCount=Debits-Credits* ;

笔记：

*   第一行添加一个名为 NetCount 的整数类型的列
*   第二行将其更新为借方和贷方之间的差异
*   sql 命令用大写字母表示，特定于您的信息用斜体表示

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T19:55:48.527

```
WITH tbl AS 
(
select content_type_code_id 
    , ABS(price) AS price
    , SUM(case when price >= 0 THEN 1 ELSE 0 END) AS debits
    , SUM(case when price < 0 THEN 1 ELSE 0 END) AS credits
from dbo.transaction_unrated  
where transaction_date >= '2012/05/01'
      and transaction_date < '2012/06/01'
      and content_provider_code_id in (1)
group by content_type_code_id, ABS(price) 
ORDER BY ABS(price) ASC  
)

SELECT content_type_code_id, proce, debits, credits, (debits - credits) netcount from tbl 
```

# sass - 在这种情况下，Sass/SCSS 混合参数的正确用法是什么？

> ID：11619498
> 
> 赞同：1
> 
> 时间：2012-07-23T19:52:40.933
> 
> 标签：sass, mixins

我在为属性使用`$image-width`and`$image-height`参数时遇到问题。`background-size`CSS 仅在我选择将参数编写到位时才有效（如下面代码示例中的注释行所示）。动态版不行。我做错了什么？

除此之外，此代码片段应仅在设备需要时加载视网膜版本。在此处阅读更多信息：[媒体查询资产下载](http://timkadlec.com/2012/04/media-query-asset-downloading-results/)

```
/* see: http://timkadlec.com/2012/04/media-query-asset-downloading-results/ */
@mixin retina-background($filename, $image-width, $image-height, $extension: ".png") {
    background-image: image-url($filename + $extension);
    height: $image-height;
    width: $image-width;
    @media only screen and (-webkit-min-device-pixel-ratio: 1.5),
    only screen and (min--moz-device-pixel-ratio: 1.5),
    only screen and (-o-min-device-pixel-ratio: 3/2),
    only screen and (min-device-pixel-ratio: 1.5) {
        background-image: image-url($filename + "2x" + $extension);
        //background-size: 213px 21px;
        background-size: $image-width $image-height;
        height: $image-height;
        width: $image-width;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:39:30.393

是的，代码工作正常。我忘记在调用函数的参数中分配“px”。所以生成的 CSS 是错误的（没有单位）。多么无用的错误。非常感谢！

# file - 如何从 Bash 中的文件列表中分类多个文件？

> ID：11619500
> 
> 赞同：11
> 
> 时间：2012-07-23T19:52:53.790
> 
> 标签：file, bash, loops

我有一个包含文件列表的文本文件。我想把`cat`它们的内容放在一起。做这个的最好方式是什么？我正在做这样的事情，但它似乎过于复杂：

```
let count=0
while read -r LINE
do
    [[ "$line" =~ ^#.*$ ]] && continue
    if [ $count -ne 0 ] ; then
        file="$LINE"
        while read PLINE
        do
            echo $PLINE | cat - myfilejs > /tmp/out && mv /tmp/out myfile.js
        done < $file
    fi
    let count++
done < tmp 
```

我跳过了注释行并遇到了问题。必须有更好的方法来做到这一点，没有两个循环。谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-23T19:59:23.990

或者在一个简单的命令中

```
cat $(grep -v '^#' files) > output 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-05-10T09:47:22.537

**`xargs cat < files`**

xargs 的优势在于`$(cat)`，`cat`由于 Linux 的最大命令行长度，它可以扩展到一个巨大的参数列表，如果列表中有很多文件，这些参数可能会失败。

不关心的例子`#`：

```
printf 'a\nb\nc\n' > files
printf '12\n3\n' > a
printf '4\n56\n' > b
printf  '8\n9\n' > c
xargs cat < files 
```

输出：

```
12
3
4
56
8
9 
```

`#`根据 OP 的要求忽略更具体的示例：

```
printf 'a\nb\n#c\n' > files
printf '12\n3\n' > a
printf '4\n56\n' > b
printf  '8\n9\n' > c
grep -v '^#' files | xargs cat 
```

输出：

```
12
3
4
56 
```

相关：[如何通过管道将 find 命令返回的文件列表传递给 cat 以查看所有文件](https://stackoverflow.com/questions/864316/how-to-pipe-list-of-files-returned-by-find-command-to-cat-to-view-all-the-files)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-23T20:04:50.430

```
#!/bin/bash

files=()
while read; do
    case "$REPLY" in
        \#*|'') continue;;
        *) files+=( "$REPLY" );;
    esac
done < input
cat "${files[@]}" 
```

这种方法的更好之处在于：

1.  唯一的外部命令，`cat`只执行一次。
2.  为任何给定的行/文件名维护重要的空白是非常小心的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-23T19:54:40.710

```
{
  while read file
  do
    #process comments here with continue
    cat "$file"
  done
} < tmp > newfile 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-23T19:56:10.070

怎么样`cat $(cat listoffiles) | grep -v "^#"`？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-20T15:12:40.777

我最终得到了这个：

```
sed '/^$/d;/^#/d;s/^/cat "/;s/$/";/' files | sh > output 
```

脚步：

1.  *sed从**文件*中删除空白行和注释掉的行。

2.  *sed*然后将每一行包装在`cat "`and中`";`。

3.  然后将脚本通过管道传送到*sh*并输入到*output*。

# .net - 强制 GC 变坏的例子？

> ID：11619501
> 
> 赞同：8
> 
> 时间：2012-07-23T19:52:58.623
> 
> 标签：.net, garbage-collection, clr

我正在做一个关于 .Net CLR GC 的介绍性演示，并拥有所有不同的部分，但我想要一个具体的例子来说明试图强制收集是如何危险或有害的。我知道你可以过早地将事情强加给更高的世代，但是（据我所知）这只会减慢速度。

我正在尝试考虑强制 GC 可能真正具有破坏性的情况，而我一直在想出效率较低的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T20:28:27.337

这是一个有趣的演示。请注意，您应该运行在发布模式下编译的这个演示，否则它可能无法像宣传的那样工作。

版本 1：

```
private void Button_Click(object sender, EventArgs e)
{
    Timer timer = new Timer(Print, null, 0, 1000);
}

private void Print(Object o)
{
    if (textBox1.InvokeRequired)
    {
        Action<object> action = Print;
        textBox1.Invoke(action, o);
        return;
    }

    textBox1.Text = DateTime.Now.ToString();
} 
```

版本 1 会愉快地将日期和时间每秒打印一次到文本框。

版本 2：

```
private void Button_Click(object sender, EventArgs e)
{
    Timer timer = new Timer(Print, null, 0, 1000);
}

private void Print(Object o)
{
    if (textBox1.InvokeRequired)
    {
        Action<object> action = Print;
        textBox1.Invoke(action, o);
        return;
    }

    textBox1.Text = DateTime.Now.ToString();

    GC.Collect(); // force a garbage collection
} 
```

现在在版本 2 中，日期和时间将只打印一次，因为在声明之后，不再有对计时器对象的引用，因此计时器对象被收集。

这是一个相当人为的例子，但可能是一个很好的演示。

我必须感谢杰弗里·里希特（Jeffery Richter）——这是在他的优秀著作`CLR via C#`中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T19:59:09.763

下面这个坏主意呢？“让我们在 ASP.NET 中的每个 HTTP 请求之后强制进行 GC，以清理肯定会成为孤立的请求状态！”

这是一个坏主意，因为并发 HTTP 请求会相互干扰。这会引入大量**延迟峰值**并破坏性能。所有这一切都从一个天真的“优化”开始。

这是我能想到的最糟糕的情况。

# facebook - 通过 api 在网站上拉 Facebook 评论？

> ID：11619502
> 
> 赞同：1
> 
> 时间：2012-07-23T19:53:02.353
> 
> 标签：facebook, facebook-graph-api, facebook-comments

我有 facebook 评论插件与我的网站集成。该网站有几个 1000 页和这些评论部分在每一页上。转到每一页并查看评论是一件痛苦的事。关注管理员电子邮件也没有成效。

有没有办法通过 facebook api 在一个脚本中提取所有 fb 评论（在我的网站上）？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T20:53:10.320

如果您已经[注册了您的域](https://developers.facebook.com/docs/insights/#claiming_a_domain)，您应该能够使用[评论审核工具](https://developers.facebook.com/tools/comments)查看该域的所有评论。

您也可以使用 FQL 来执行此操作[https://developers.facebook.com/docs/reference/fql/comment/](https://developers.facebook.com/docs/reference/fql/comment/)

# symfony - Symfony 2 + Doctrine 2：使用 DateTime 值根据日期字段查找记录

> ID：11619514
> 
> 赞同：0
> 
> 时间：2012-07-23T19:54:00.933
> 
> 标签：symfony, doctrine-orm

我有一个名为 的实体`Event`，有一个字段`startDate`(type="date")，另一个名为`slug`(type="string")。我创建了一个控制器操作来获取基于这些部分的特定事件。路由器以“Ymd”格式传递 eventDate 和 eventSlug。现在我已经成功创建了一个 DateTime 对象`$startDate = DateTime::createFromFormat('Y-m-d', $eventDate)`。现在如果我发出

```
$event = $eventRepo->findOneBy(array(
    'startDate' => $startDate,
    'slug'      => $eventSlug,
)); 
```

它什么也得不到（`$event`为NULL）。我是否遗漏了 Doctrine 文档中的某些内容，或者我发现了一个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:09:03.617

首先确保存在`Event`具有给定 slug 和开始日期的实际存在。是`slug`独特的领域吗？

无论如何，您可以让 Doctrine 为您进行参数转换，而无需使用 PHP`format`函数：

```
$repo = $this->getDoctrine()->getRepository('AcmeHelloBundle:Event');
$qb   = $repo->createQueryBuilder('e');

$event = $qb
    ->andwhere($qb->expr()->eq('e.slug', ':slug'))
    ->andWhere($qb->expr()->eq('e.start_date', ':start_date'))
    ->setParameter('slug', $eventSlug)
    ->setParameter('start_date', $startDate)
    ->getQuery()
        ->getOneOrNullResult(); 
```

或者，使用 Doctrine 参数转换器：

```
/**
 * @Route("/event/show/{slug}/{start_date}")
 * @Method("GET")
 * @ParamConverter("event", class="AcmeHelloBundle:Event")
 * @Template
 */
public function showAction(Event Event)
{
} 
```

在内部，Doctrine 参数转换器为您完成：它检查请求中的任何参数并使用 and 查找`slug`实体`start_date`。

# jquery - jquery AutoComplete 保存输入的搜索字符串

> ID：11619517
> 
> 赞同：0
> 
> 时间：2012-07-23T19:54:07.083
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

我是 jquery 的新手。我已经阅读并尝试了自动完成方法中的许多不同事件来做我想做的事但没有成功。

无论如何，我有一个自动完成功能如下

```
$(document).ready(function () {
        $("#SearchContactWorker")
        .each(function () {
            var urlloc = "/Worker/FindWorkers";

            $(this).autocomplete({
                 source: function (request, response) {
                    $.ajax({
                        url: urlloc, type: "POST", dataType: "json",
                        data: { searchString: request.term, maxResults: 10 },
                        success: function (data) {
                            response($.map(data, function (item) {
                                  return { label: item.name, value: item.name, id: item.id }
                            }))

                        }
                    })
                },
                select: function (event, ui) {
                    $("[id$='ContactID']").val(ui.item.id);
                }
            });
        });
    }); 
```

Curently when a item is selected I save the ID in a hidden input called ContactID Now if the user enters some text that does not return any results I want to save that text against a different hidden input type called ContactFullName .How do I do this? ?

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T20:18:18.507

我认为您正在寻找`change`活动：

```
$(this).autocomplete({
     source: function (request, response) {
        $.ajax({
            url: urlloc, type: "POST", dataType: "json",
            data: { searchString: request.term, maxResults: 10 },
            success: function (data) {
                response($.map(data, function (item) {
                      return { label: item.name, value: item.name, id: item.id }
                }))

            }
        })
    },
    change: function (event, ui) {
        if (ui.item) {
            $("[id$='ContactID']").val(ui.item.id);
        } else {
            $("#ContactFullName").val(this.value);
        }
    }
}); 
```

*   `ui.item`如果`null`用户没有选择一个项目。
*   请注意，`change` 当字段模糊时会触发该事件。

# asp.net - 如何更改已部署网站的成员角色？

> ID：11619520
> 
> 赞同：0
> 
> 时间：2012-07-23T19:54:18.383
> 
> 标签：asp.net, asp.net-mvc-3, configuration

我正在使用带有 MVC 3 和 MS SQL SERVER 2008 R2 的 Visual Studio 2010。我正在开发一个驻留在服务器上的网站，该服务器上也安装了 VS 2010。我使用股票会员提供商方法为网站创建我的注册用户和角色。我可以使用 asp.net 配置工具调整角色和成员资格，但是当我发布到服务器时，我创建的用户和角色并没有与网站的其余部分一起发布。我研究了这个问题，发现大多数人建议使用第三方工具进行会员更新，但我只是想检查一下技术是否已经更新，以实际允许更新注册用户角色而不使用第三方已部署/已发布网站上的派对工具？

我已经阅读了大多数与这个问题相关的帖子我只是想知道是否有人知道最近对 ASP.net 配置工具的任何更改，这将使我能够对站点进行所需的更改。

感谢您的输入！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:04:47.660

我认为您将网站文件与托管用户/角色的数据库混淆了。除非您将本地计算机指向实时数据库，否则仅部署您的网站将永远不会更新底层数据库。看看您是否可以从实时服务器获取数据库连接字符串并在您的机器上使用它......如果它是外部盒子，您可能会在防火墙或 SQL 服务器级别被阻止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T02:50:44.427

ASP.Net 配置工具并非真正用于生产，因为这意味着管理用户和角色的能力仅限于安装了 Visual Studio 的用户。

我不太确定人们是否真的会推荐“第三方”工具，但我认为它们实际上意味着您在 MVC 站点中构建自己的一组添加/编辑用户屏幕。

如果您的要求是只有添加/编辑用户的人将安装 Visual Studio，您可以使用 ASP.Net 配置工具进行生产使用 - 但您需要确保您的解决方案在您的开发机器上使用与生产机器上相同的成员资格数据库。

# java - Java服务器安卓客户端

> ID：11619527
> 
> 赞同：2
> 
> 时间：2012-07-23T19:54:46.707
> 
> 标签：java, android, client-server

我正在android上制作多人游戏，它将与Java服务器通信。（并且服务器与数据库通信）。会有很多客户端...
我从一个带有 glassfish 服务器的 web 应用程序开始，从数据库生成实体类，然后从实体生成 facadeREST 类。我尝试使用 HTTP 请求-响应通信，很简单。但！有一个问题：

只有客户端可以开始通信，服务器只能监视和响应请求。有几次，我需要服务器开始与某个客户端的通信。使用 HTTP 请求，我只能做类似的事情：客户端每 10 秒发送一次请求，如果有此客户端的消息，则服务器响应。但这不是我想要的方式。我确信有更好的解决方案。

我正在寻找一种方法，很简单。如果我可以使用 glassfish 或其他服务器来解决多线程问题，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T20:24:10.400

你需要我的朋友是[C2DM](https://developers.google.com/android/c2dm/)！

它将减少您的客户保持轮询的需要，而是让云通过推送通知启动通信。

关于应用程序服务器，如果您的应用程序遵循 Java EE 标准，那么您应该能够将其部署到任何旧的 Java EE 容器。我建议利用[CloudBees](http://www.cloudbees.com/run.cb/)提供的免费 Java 托管，只需像在 glassfish 上一样放入您的 WAR。

关于您的应用程序实际需要做什么，我无法提供建议，因为您没有提供任何细节：S

...不，我不为 Cloudbees 工作，我只是觉得他们很棒

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T20:42:08.517

WebView 中的 NodeJS 就是答案

# include-path - 尝试包含 phpseclib 时无法打开流错误消息

> ID：11619528
> 
> 赞同：2
> 
> 时间：2012-07-23T19:54:47.183
> 
> 标签：include-path, php, phpseclib

我正在尝试按照安装 phpseclib 的说明进行操作。

我将所有内容解包并`phpseclib`在`/usr/share/pear`. 所以我有以下结构：

```
/usr/share/pear/phpseclib/
                          Net
                          Crypt
                          File
                          Math 
```

我`/usr/share/pear`通过检查[`get_include_path`方法](http://php.net/get_include_path)确定了路径。

现在我正在尝试创建一个使用 phpsec 库的页面。

这是我正在玩的php页面：

```
<?php

set_include_path(get_include_path() . PATH_SEPARATOR . 'phpseclib');
include('Net/SSH2.php'); 
```

页面炸弹显示错误消息；

> 警告：include(Net/SSH2.php)：打开流失败：第 4 行的 /var/www/test/sshtest.php 中没有这样的文件或目录。警告 include()：打开“Net/SSH2.php”失败在第 4 行的 /var/www/test/sshtest.php 中包含 (include_path='.:/usr/share/pear:phpseclib')。

`/var/www/test`我的页面所在的网络文件夹。任何建议或指示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T18:09:26.373

我将代码更改为：

```
<?php 

set_include_path(get_include_path() . get_include_path().'/phpseclib');
include('Net/SSH2.php');
echo('if you are reading this, phpseclib has been included'); 
```

这解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:01:36.687

你没有忘记在设置路径后放置一个斜杠 / 吗？

所以，应该是这样的：

```
 <?php
          set_include_path(get_include_path() . PATH_SEPARATOR . 'phpseclib/');
          include('Net/SSH2.php');
      ?> 
```

或者

```
<?php
              set_include_path(get_include_path() . PATH_SEPARATOR . 'phpseclib' . PATH_SEPARATOR);
              include('Net/SSH2.php');
          ?> 
```

# javascript - 由于异步获取，backbone.js 视图不显示结果，不呈现

> ID：11619530
> 
> 赞同：0
> 
> 时间：2012-07-23T19:54:50.663
> 
> 标签：javascript, backbone.js, backbone.js-collections

我注意到我的视图的渲染函数被调用了 2 次。这是我的代码：

视图，它是一个集合：

```
define([
  'jquery',
  'underscore',
  'backbone',
  'mustache',
  'icanhaz',
  'views/spots/Spot',
  'collections/Spots',
  'text!../../../../templates/spots/spots.mustache!strip',
], function($,
            _,
            Backbone,
            mustache,
            ich,
            SpotView,
            Spots,
            SpotsTemplate){
  var SpotsView = Backbone.View.extend({

    initialize: function(){
       var ich = window['ich'],
          spots = ich.addTemplate('spots',SpotsTemplate);

          spots = ich['spots'];

          this.template = spots;

      _.bindAll(this,'render'); 
      var self = this;
      this.collection.bind("all", function() { self.render(); }, this);
      this.collection.fetch(); 
    },
    events: {
        "change": "render"
    },
    render: function(){
      window.counter = window.counter +1;
      console.log('inside render for the ' + window.counter + ' times!');

      this.el = this.template();

      this.collection.each(function (spot) {

        $(this.el).append(new SpotView({model:spot}).render().el);
      }, this);

      console.log($(this.el).children().length);

      return this;
    }
  });
  // Returning instantiated views can be quite useful for having "state"
  return SpotsView;
}); 
```

app.js 中的代码，当我尝试显示时

```
 var  spots = new Spots({model: Spot});

    window.counter = 0 + 0;

    var spots_view = new SpotsView({collection: spots});
    $('#spots').html(spots_view.render().el); 
```

我的输出是：

```
inside render for the 1 times! 
1 
inside render for the 2 times! 
6 
```

在玩不同的东西时，我注意到它甚至被调用了 3 次。我究竟做错了什么？显然，当结果从服务器带到渲染函数时，这一行：

```
$('#spots').html(spots_view.render().el); 
```

已经过去了

多谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:53:10.053

你的观点是`initialize`这样说的：

```
this.collection.bind("all", function() { self.render(); }, this);
this.collection.fetch(); 
```

并将[`fetch`](http://backbonejs.org/#Collection-fetch)重置集合：

> 当模型数据从服务器返回时，集合将重置。

[重置集合](http://backbonejs.org/#Collection-reset)将：

> [触发] 最后的单个“重置”事件

通过绑定到`"all"`，集合上的任何事件都将触发`render`调用。因此，当您明确表示时，您的视图将呈现一次，`spots_view.render()`并在`fetch`调用从服务器返回某些内容时再次呈现。

顺便说一句，你有这个：

```
_.bindAll(this,'render'); 
```

所以你不需要使用`self`和`self.render()`或提供上下文参数`bind`，你可以简单地说：

```
_.bindAll(this, 'render');
this.collection.bind("all", this.render); 
```

你也在你的`render`：

```
this.el = this.template(); 
```

这绝不是一个好主意。[`setElement`](http://backbonejs.org/#View-setElement)如果您需要更改视图，您应该使用`this.el`; 这将负责重新绑定事件和更新[`this.$el`](http://backbonejs.org/#View-%24el)。`this.el`但是，如果您已经放入DOM ，那将无济于事。而不是完全替换`el`，你应该把你需要的一切都放在里面`this.el`：

```
var $content = $(this.template());
this.collection.each(function (spot) {
    var spot = new SpotView({ model: spot });
    $content.append(spot.render().el);
});
this.$el.html($content); 
```

然后您可以清空它并重新渲染它以响应事件而不会出现任何问题。

# ruby-on-rails - 将哈希传递给带有额外参数的控制器

> ID：11619531
> 
> 赞同：1
> 
> 时间：2012-07-23T19:55:03.237
> 
> 标签：ruby-on-rails

我有一个用户填写的表格，其中包含标题和正文。我还想传递他们存储在 cookie 中的用户 ID 以及其他几个计算值。

在我的控制器的创建部分中，我有以下代码：

```
@ticket = Ticket.new(params[:ticket])
@ticket.save
redirect_to ticket_path(@ticket) 
```

我是否需要在 Ticket.new 调用之后分配这些计算值，或者我可以以某种方式将这些值与 params 散列一起传递？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T20:20:12.380

由于 params 的票证键只是一个哈希，您可以使用合并添加额外的键/值对

```
@ticket = Ticket.new(params[:ticket].merge({user_id: cookies[:user_id]}))
@ticket.save
redirect_to ticket_path(@ticket) 
```

假设您正在使用 Active Relation，并且`User` `has_many :tickets`您也可以执行类似的操作（此示例假设`current_user`由类似于 Devise 的内容定义）

```
@ticket = current_user.tickets.build(params[:ticket])
@ticket.save
redirect_to ticket_path(@ticket) 
```

第二种方法可以更清楚地说明您要做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:10:37.323

您可以`f.hidden_field`在表单中使用来传递一些额外的计算值。

如果要分配`current_user`票证，最好在单独分配中进行，并对其进行保护。

# php - 在面向对象的 PHP 中构建复杂的条件表

> ID：11619533
> 
> 赞同：2
> 
> 时间：2012-07-23T19:55:09.357
> 
> 标签：php, design-patterns

我目前正在开发一个 Zend Framework 项目，用户浏览应用程序的最终结果向他们展示了一个包含他们结果的大表。该表可以包含不同数量的行，其中大部分是作为计算结果生成的。到目前为止，一切都很好。

首先; 尽管障碍很小，但表格需要水平呈现。也就是说，标题在第 1 列中，每个附加列代表一个数据实体项。例如：

```
姓名 | 詹姆斯 | 理查德
姓氏 | 琼斯 | 梅菲尔

```

同样，这不是问题。当我来整齐地构建桌子时，问题就出现了。使用构建器模式，我有三个类：Table、Group 和 Row。它们可以这样使用：

```
$table = new Table($attribs);
$group = new Group(); // Nothing special about groups, they're just there for helping with presentation

$row = new Row();
$row->setTitle('Forename')
    ->setData(array('item1' => 'James', 'item2' => 'Richard'))

$row2 = new Row();
$row2->setTitle('Surname')
     ->setData(array('item1' => 'Jones', 'item2' => 'Mayfair'))

$group->addRow($row)
      ->addRow($row2);

$table->addGroup($group); 
```

上面的代码片段出现在控制器的操作中。然后将表对象传递给视图，并且我有一个视图助手，可以根据我自己的规范输出到表中。

然而，我面临的挑战是我最终得到了一个非常混乱的“结果”模型。例如，我有很多：

```
$group->addRow($this->_resultsModel->getSurnameRow()); 
```

'_resultsModel' 属性是一个包含许多方法的对象：

```
public function getSurnameRow()
{
    $row = new Row();
    $row->setTitle('Surname');
    $row->setData($this->_getAssociateArrayOfSurnames());
    return $row;
} 
```

此外，结果对象扩展了一个结果抽象类，其中包含原始数据的访问器、设置器和计算方法。这些“计算”方法中的每一个都返回可以分配给行对象的关联数据数组。结果对象和抽象类都很长，而且看起来很脱节。

总结一下……我最终得到了一个大型结果模型，它执行所有计算并返回所有行对象。虽然它确实有效，但我相信有更好的做事方式。我应该在控制器中构建行吗？我应该只从模型中调用计算吗？有没有人有任何抽象这样的东西的经验？

我很抱歉，这是一个糟糕的解释。如果有人有任何我可以提出的问题，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T22:15:33.873

首先，控制器内部不应该有太多的逻辑——控制器是用来处理模型的输入并将结果转发到输出（视图），而不是计算东西。

第二：你的结果还有很多其他的事情要做，为什么要处理表格表示？另外，为什么它必须有很多仅在字符串中不同的单独函数？

我想我会和声明性数组一起做一些事情：也就是说，我会收集一个这样的声明性数组：

```
$table_description = [
     'group1' => ['surname', 'firstname', 'whatever'],
     'group2' => ['other', 'rows', 'as', 'needed']
]; 
```

并构建一些东西来解析这个描述并用实际数据填充它（如果需要，使用反射）

主要问题是：形式遵循功能，算法遵循数据结构。

如果你有一个数据结构，它分为表、组和行，那么你很可能有一个同样的算法。

第二个问题是：变化可能发生在哪里？如果表格方案可以轻松更改，请将它们放入“配置”（描述符）中。如果行的格式可以轻松更改，请确保它们是自格式化的（或者有人知道如何要求格式化程序，但不知道行实际包含什么）

一个好主意是能够回退到默认值：也就是说，如果大多数行都是以默认方式构造的，那么请确保您能够使用默认方法，例如：

```
class Row {
   public $formatter;
   private $data_assoc;
   private $title;
   public function __construct($title, $data, RowFormatter $formatter=NULL){
       if ($formatter == NULL){
          $this->formatter = DefaultFormatter::getInstance();   
       }
       /*set title, data_assoc...*/
   }
   public function setFormatter(RowFormatter $formatter){/*obvious*/}
   public function format(){
       return $this->formatter->format($this->data_assoc);
   }
} 
```

现在，您的 resultsModel 似乎有太多责任，您有这些前缀名称 (getSurnameRow) - 为什么 resultsModel 应该知道行？此外，关联数组（映射）是非常好的结构，尤其是在 PHP 中。为什么 getData('Surname') 不够？为什么 Row 不能从标题和关联数据构建自己？

如果您想做同样的事情但具有不同的属性，请使用枚举或字符串。如果您有时需要能够插入一些东西，请使用工厂，它根据属性名称查找索引表，并回退到默认实现以防万一它不是异常。

```
$row = RowFactory::getRow('Surname');
$row->setData($this->data['Surname']); 
```

像这样的代码重复是可以的，只要它有两个属性和简单的正交性——比如，getX，getY。但是对于无限数量的属性，我想这只是重复。

# html - safari 中的页面高度错误，有很多空白空间

> ID：11619535
> 
> 赞同：1
> 
> 时间：2012-07-23T19:55:23.650
> 
> 标签：html, css, safari

[http://teothemes.com/wp](http://teothemes.com/wp)

我有一些高度为 100% 的元素，但在 safari 中，页面的高度在内容之后，它添加了许多没有任何内容的空行。

我尝试删除 height: 100%，尝试使用 height: auto 但没有成功。

如果有人有任何线索，我真的很感激！

谢谢你。

# php - 从 list.phtml 结果中排除产品（magento）

> ID：11619537
> 
> 赞同：0
> 
> 时间：2012-07-23T19:55:34.500
> 
> 标签：php, magento

有没有办法从 Magento 的 list.phtml 视图中强制排除项目（通过属性值）？我们的产品应该是可购物的、可单独查看的，但不应通过搜索或导航到其类别来找到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T21:17:30.347

您可以扩展该`getProductCollection`方法`Mage_Catalog_Model_Category`（然后创建自定义 Block 类来替换某些模板，如果您愿意）。

假设这是在一个名为 的模块中完成的`<YourNamespace>_<YourModule>`，它看起来像：

```
class <YourNamespace>_<YourModule>_Model_Category extends Mage_Catalog_Model_Category {
    public function getProductCollection() {
        $collection = parent::getProductCollection()
        foreach($collection as $key => $item) {
            if (<YOUR_REMOVE_CRITERIA_HERE>) {
                $collection->removeItemByKey($key);
            }
        }
    }
} 
```

`<YOUR_REMOVE_CRITERIA_HERE>`可以是任何东西，从配置选项到集合中项目（产品）的属性。

如果您只希望产品不在类别产品列表中列出，则更简单的解决方案是将它们从类别中删除。

希望能帮上忙

lg,

弗洛

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:59:10.347

我们最终在没有创建新模块的情况下解决了这个问题。我们在 /app/code/local/mage/catalog/block/product 中创建了对 list.php 的覆盖，并包含以下代码行：

```
$collection->clear()
->addAttributeToFilter('my_attribute_name', array('gteq'=> 524 )) //custom attrib ID
->addAttributeToFilter('visibility', array('eq'=> 4 )) // Visibility is equal to "Catalog/Search"
->load(); 
```

刚过：

```
protected function _beforeToHtml()
{
    $toolbar = $this->getToolbarBlock();

    // called prepare sortable parameters
    $collection = $this->_getProductCollection();

    // use sortable parameters
    if ($orders = $this->getAvailableOrders()) {
        $toolbar->setAvailableOrders($orders);
    }
    if ($sort = $this->getSortBy()) {
        $toolbar->setDefaultOrder($sort);
    }
    if ($dir = $this->getDefaultDirection()) {
        $toolbar->setDefaultDirection($dir);
    }
    if ($modes = $this->getModes()) {
        $toolbar->setModes($modes);
    } 
```

之前：

```
// set collection to toolbar and apply sort 
```

我们还在 new.php 中为新产品页面添加了相同的逻辑，以便过滤掉不应该显示的产品。

布拉德

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T13:10:49.637

我知道在表示层添加业务逻辑不是一个好习惯，但无论如何快速限制产品列表在 app\design\frontend\iln\default\template\catalog\product\list.php

```
<?php $_selling_type = $_product->getResource()->getAttribute('selling_type')->getFrontend()->getValue($_product); ?>

if ($_selling_type == 'No Price') 
{
  echo ('what ever you want');
} 
```

# database - 如何识别 ER 图中的实体

> ID：11619538
> 
> 赞同：1
> 
> 时间：2012-07-23T19:55:40.870
> 
> 标签：database, database-design

我有一个用例描述如下：“候选人注册他们的详细信息，如个人、学术、技能和经验。”

我选择了Candidate作为一个entity，那么注册表会成为一个entity吗？，或者所有这些细节都将成为候选人条目的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:04:37.077

不，您将拥有一个名为 RegistryaionEvent 的实体，其中将包含注册详细信息，例如日期和注册状态。如果候选人可以拥有多个注册，那么您将在物理模型中拥有另一个名为 Candidate_registration 的实体。在逻辑模型中，它只会显示为多对多关系。

# jpa - DISTINCT 的替代 EJB 查询

> ID：11619541
> 
> 赞同：0
> 
> 时间：2012-07-23T19:55:46.660
> 
> 标签：jpa, ejb

出于某种原因，我无法使用无法正确返回查询的软件包，例如：

```
SELECT DISTINCT c.name FROM EMPS p, IN (p.customerBean) c WHERE c.cost = '500' 
```

或带有导航的变体，例如：

```
SELECT p.customerBean.name FROM EMPS p WHERE p.customerBean.cost = '500' 
```

但是，这将起作用：

```
SELECT p FROM EMPS p, IN (p.customerBean) c WHERE c.cost = '500'. 
```

好吧，有没有一种方法可以操纵最后一个查询以严格使用前半部分返回类似于前两个的内容：

```
SELECT p FROM EMPS p, ... 
```

我可以稍后在语句中使用 DISTINCT、AND 或 GROUP BY，如果可以，如何使用？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-18T08:24:05.687

SELECT DISTINCT c.name FROM EMPS p join p.customerBean c WHERE c.cost = '500'

# python - 将 Python 生成的 SQLITE 文件读入 SQLITE

> ID：11619543
> 
> 赞同：0
> 
> 时间：2012-07-23T19:55:49.577
> 
> 标签：python, database, sqlite, import

所以我在 Python 中生成了一个名为 example.db 的简单 sqlite 数据库，其中包含一个名为 wasp 的表。

```
c.execute('''CREATE TABLE wasp
         (id INTEGER PRIMARY KEY AUTOINCREMENT, date TEXT, x INTEGER, y INTEGER, z INTEGER, temp INTEGER, bat INTEGER)''') 
```

我能够使用 Python 添加数据并读取数据。现在我想使用命令行在 SQLITE 中导入这个文件。我在 linux 上安装了 sqlite3 并尝试使用该`.import`功能但会`.import example.db wasp`产生错误。它说黄蜂不是桌子。它是`example.db`文件中的表，但不是 sqlite 中的表。所以我在sqlite中重新创建了表并再次运行命令，同样的问题。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:01:18.187

您不需要使用该`.import`命令来读取您从 python 创建的表。该`.import`命令旨在导入表格文本数据（[CSV 数据](https://en.wikipedia.org/wiki/Comma-separated_values)）。

然而，python`sqlite`模块编写本机 SQLite 数据库文件。只需`example.db`使用 sqlite3 命令打开文件：

```
$ sqlite3 example.db
SQLite version 3.7.13 2012-06-11 02:05:22
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite> .tables
wasp 
```

# javascript - jQuery 循环遍历子 div

> ID：11619545
> 
> 赞同：10
> 
> 时间：2012-07-23T19:55:59.167
> 
> 标签：javascript, jquery, loops, html, each

```
<div id="ChosenCategory" class="chosen">
   <div class="cat_ch" name="1">
   <div class="cat_ch" name="2">
   <div class="cat_ch" name="3">
   <div class="cat_ch" name="5">
   <div class="clear"> </div>
</div> 
```

我想循环虽然`div.cat_ch`如何？

这个失败了：

```
 $("div").each(function () {
       alert("FW");
       alert($(this).attr("name").val());
    }); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-23T19:57:57.487

```
$('#ChosenCategory').children('.cat_ch').each(function() {

}); 
```

或者

```
$('#ChosenCategory > .cat_ch').each(function() {

}); 
```

JQuery 的`.children`方法和 css3 子选择器`>`将仅返回与选择器匹配的直接子代，`.cat_ch`示例中为类。

如果要在 DOM 树中进行更深的搜索，即包含嵌套元素，请使用`.find`或省略子选择器：

```
$('#ChosenCategory').find('.cat_ch').each( function(){} ) 
```

或者

```
$('#ChosenCategory .cat_ch').each( function(){} ) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-23T20:04:57.857

```
$(function(){

    var items=$(".cat_ch")
     $.each(items,function (index,item) {

       alert($(item).attr("name"));
    });

}); 
```

工作样本：http: [//jsfiddle.net/GzKHA/](http://jsfiddle.net/GzKHA/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-23T20:10:48.000

[http://jsfiddle.net/2TRxh/](http://jsfiddle.net/2TRxh/)

我认为您的问题在于在获得属性后尝试从 div 中获取 val `$(this).attr("name").val()`。在 div 上使用`.val()`没有意义。如果您删除该属性，则会从 div中`$(this).attr("name")`返回该属性。`name`您可以通过在 each 而不仅仅是 div 中使用类选择器来进一步指定要循环的 div。`$(".cat_ch").each(function () {});`这已在该问题的各种其他答案中得到体现。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-23T20:00:08.433

如果您只想定位内部的 Divs，请尝试

```
$('#ChosenCategory div').each( function() {...} ); 
```

其他答案需要特定的类和/或还将处理您的父 div 中的非 div。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-23T20:24:45.623

```
    函数 loopOver(obj)
    {
        var chl=obj.firstChild;
        而(chl)
        {
            如果（chl.nodeType==1）
            {
                var isAttr=chl.getAttribute('name');
                如果（是属性）
                {
                    警报（isAttr）；
                }
            }
            chl=chl.nextSibling;
        }
    }

    //这是迄今为止执行速度最快的！！！
    var obj=document.getElementById("ChosenCategory");
    循环（对象）；

```

```
Make sure to enclose the each `<div>` tag at the end of each!! 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-23T19:57:05.623

```
$(".cat_ch").each(function () {
       alert("FW");
       alert($(this).attr("name").val());
    }); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-23T19:57:19.577

如果你想循环`div.cat_ch`，你应该使用 jQuery 选择器：

```
$("div.cat_ch").each(function () {
   alert("FW");
   alert($(this).attr("name").val());
}); 
```

您还可以使用 jQuery`children()`方法循环遍历子元素：

```
$("#ChosenCategory").children().each(function () {
   alert("FW");
   alert($(this).attr("name").val());
}); 
```

循环遍历所需元素的第三种方法如下：

```
$("#ChosenCategory > div").each(function () {
   alert("FW");
   alert($(this).attr("name").val());
}); 
```

使用任何你想要的方式，没有最好的方式。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-23T19:59:55.873

```
$('.cat_ch').each(function(i, e) {
    alert('FW');
    alert(e.attr('name').val());
}); 
```

# ruby - 将唯一键值添加到哈希并从中创建字典

> ID：11619546
> 
> 赞同：0
> 
> 时间：2012-07-23T19:56:06.910
> 
> 标签：ruby, ruby-on-rails-3.1, hash, ruby-1.9.3

我是一名尝试学习 ruby​​ 的初学者，我正在为以下问题陈述编写代码： - 创建一个最初为空的字典。- 添加条目..单词应该是键，含义应该是值。- 添加带有关键字和定义的整个条目（添加单词时，它应该检查它是否已经存在） - 添加没有定义的关键字（在这种情况下将定义设置为 nil） - 可以检查给定关键字是否存在 - 找到关键字条目并返回关键字 + 定义 - 从前缀中找到多个匹配项并返回整个条目（关键字 + 定义） - 即，如果我们搜索“fi”，那么它应该返回所有以“fi”开头的条目 - 按字母顺序列出关键字

到目前为止，我已经编写了以下代码，但是当我添加关键字和值时，它只存储最后添加的值。在以下情况下，输出为“@word_list={"great"=>"remarkable"}>"。丢失了第一组值。

我不知道如何解决这个问题。任何帮助都会很棒。在此先感谢！

```
class Dictionary

  def word_list
     @word_list = Hash.new
  end

  def add new_entry
    case new_entry
     when Hash
        word_list.merge!(new_entry)
     when String
         word_list[new_entry] = nil
    end
   end

d1 = Dictionary.new
d1.add ({"fish" => "aquatic animal", "fiend" => "bad person"})
d1.add ({"great" => "remarkable"})

puts d1.inspect 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:59:27.003

每次调用你都会创建一个新的哈希，用一个空的哈希`word_list`替换之前的任何内容。`@word_list`

```
def word_list
  @word_list = Hash.new
end 
```

试试吧`||=`，没有理由在`Hash.new`这里使用什么时候`{}`会很好。当然，其中`a ||= b`意味着`a = a || b`仅在该值尚未设置时才使用该值。

```
def word_list
  @word_list ||= {}
end 
```

或者也许最好不要懒惰地初始化`@word_list`，因为没有单词列表的字典根本就不是字典。而是在`initialize`方法中创建内部散列，以便每个实例始终有一个。

```
class Dictionary
  def initialize
    @word_list = {}
  end

  def word_list
    @word_list
  end

  # other methods...
end 
```

# c# - 如何通过反射调用基类的方法？

> ID：11619548
> 
> 赞同：2
> 
> 时间：2012-07-23T19:56:20.607
> 
> 标签：c#, reflection

> **可能重复：**
> [使用反射调用重写的基方法](https://stackoverflow.com/questions/4357729/use-reflection-to-invoke-an-overridden-base-method)

通常我可以从这样的重写方法中调用我的基类：

```
public override void Foo(Bar b)
{
    base.Foo(b);
} 
```

如何通过反射进行同样的调用？

**编辑：**稍微解释一下，我正在尝试使用 AOP 来保护我的库的入口点免受未初始化操作的影响（在我的情况下，在库使用之前没有“初始化”调用）。因此，相关调用在技术上最终会在类中结束（借助 AOP），但预编译的代码将编写在单独的类中。换句话说，我希望将以下建议应用于我的所有入口点：

```
if (!initialized)
    return base.<method>(<arguments>); 
```

我想[使用反射调用重写的基本方法](https://stackoverflow.com/questions/4357729/use-reflection-to-invoke-an-overridden-base-method)中显示的 IL 技巧对我有用 - 我只是希望在我的情况下有一些更干净的东西，因为它感觉更合法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:08:19.873

**编辑：**好的，所以有点澄清；您不会尝试从任一类外部调用基类的实现。相反，您希望从被覆盖的类中反射性地调用父方法的实现。

... 为什么？您的对象静态地知道它是什么，因此静态地知道它的基类是什么。您不能有两个基类，也不能动态地将基类“分配”给预先存在的子类。

要回答你的问题，你不能。任何使用当前实例反射性调用“Foo”的尝试都将无限递归，因为 MethodInfo 的调用使方法调用就好像它来自外部（因为它是），因此运行时将遵循继承/覆盖行为. 您将不得不使用相关问题中的 IL hack。

# xml - XML 频率计数

> ID：11619550
> 
> 赞同：1
> 
> 时间：2012-07-23T19:56:31.243
> 
> 标签：xml, xslt, xpath, count, frequency

```
<result name="test">
   <cpu_time>  45346.23 </cpu_time>
   <max_mem>      1104 MB</max_mem>
</result>
<result name="error_test">
   <cpu_time>   5300.80 </cpu_time>
   <max_mem>      1059 MB</max_mem>
</result> 
```

`<cpu_time>`我有一个上面的 XML 文件，我需要计算XSLT 中值小于 3600 的条目的次数。到目前为止，这是 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text" encoding="iso-8859-1" indent="no"/>
  <xsl:template match="/">
    <xsl:value-of select="count(result/cpu_time) &lt; 3600" />
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:16:43.003

这对我有用（在[www.xslfiddle.net](http://www.xslfiddle.net)上）

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text" encoding="iso-8859-1" indent="no"/>
    <xsl:template match="root">
        <xsl:value-of select="count(result/cpu_time[. &lt; 3600])" />
    </xsl:template>
</xsl:stylesheet> 
```

请注意，您需要一个用于 XML 的根元素，并且您的节点名称不匹配（我添加了一个名为“root”的根元素，并将所有子元素设置为“结果”以进行测试。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T20:02:58.420

尝试一些类似的东西

```
<xsl:value-of select="count(result[number(cpu_time) &lt; 3600])" /> 
```

# asp.net - MVC 请求验证关闭，访问 Request.Form 时仍然抛出异常

> ID：11619552
> 
> 赞同：0
> 
> 时间：2012-07-23T19:56:33.257
> 
> 标签：asp.net, .net, asp.net-mvc-3

默认情况下，ASP.net 将进行请求验证以确保用户提交的值没有潜在危险。请参阅有关如何禁用它的[流行问题。](https://stackoverflow.com/questions/81991/a-potentially-dangerous-request-form-value-was-detected-from-the-client?rq=1)

我已成功禁用它，以便在检测到潜在危险字符时控制器不会抛出异常。但是，如果我访问 Request.Forms 属性，它会尝试再次进行请求验证并抛出异常。具体来说，我正在做的是：`request.Form.ToString()`.

在访问该属性时，控制器已被装饰，`[ValidateInput(false)]`而模型则没有被装饰。我怎样才能做到这一点而不会引发异常？`[AllowHtml()]``Request.Forms`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T21:07:17.960

.Net 4.0 添加了额外的请求验证，您需要通过添加`requestValidationMode="2.0"`到`httpRuntime`web.config 的元素来禁用这些验证。

有关详细信息，请参阅[ASP.NET 重大更改](http://www.asp.net/whitepapers/aspnet4/breaking-changes#0.1__Toc256770147)。

# youtube - Fancybox 关闭按钮不在 youtube 视频之上

> ID：11619556
> 
> 赞同：2
> 
> 时间：2012-07-23T19:56:40.727
> 
> 标签：youtube, fancybox, fancybox-2

我在使用 youtube 视频时遇到的问题是右上角的“关闭 x”按钮不在 youtube 视频的顶部。由于某种原因，它卡在它们下面。我已经在所有浏览器中尝试过，看看它是否只是一个 IE 问题，但它似乎发生在所有 youtube 视频上。

我也进入了 .css 并将 z-indext 更改为如此疯狂的高数字，看看它是否会修复它但没有运气，有人遇到过这个问题吗？它似乎仅与 youtube 视频隔离。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:12:49.913

这是因为 youtube 使用的 flash 播放器不会在默认窗口模式下尊重 CSS 的 z-index 值（参数名称是 wmode）

嵌入 youtube iframe 时，将**wmode=opaque**参数添加到 URL（wmode=transparent 也可以），所以它看起来像这样：

```
<iframe width="420" height="315" src="http://www.youtube.com/embed/<youtbue_id>?wmode=opaque" frameborder="0" allowfullscreen></iframe> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T20:35:17.743

@complex857 是对的，您需要更改`wmode`设置（到`opaque`）。

最好的方法是：

1）。从这里获取最新版本的fancybox（和助手）[https://github.com/fancyapps/fancyBox/tree/master/source](https://github.com/fancyapps/fancyBox/tree/master/source)

2）。除了常规的 fancybox css 和 js 文件，添加 fancybox-media helper js 文件，例如（检查您自己的路径）：

```
<script type="text/javascript" src="fancybox2.0.6/helpers/jquery.fancybox-media.js"></script> 
```

3）。这个新版本允许您通过自定义脚本将特定参数传递给 youtube，例如：

```
 $(document).ready(function(){
    $(".fancybox").fancybox({
        // other API options here
        padding: 0, // optional
        // set helpers media
        helpers : {
         media : {}
        },
        // NEW youtube media settings
        youtube : {
         autoplay    : 0, // 1 = will enable autoplay
         wmode       : 'opaque'
        }
    }); // fancybox
   }); // ready 
```

**注意**：这是为 fancybox v2.0.6+

# sql - 奇怪的 SSIS 错误（进程退出代码 255）

> ID：11619564
> 
> 赞同：7
> 
> 时间：2012-07-23T19:57:30.777
> 
> 标签：sql, sql-server, sql-server-2008, ssis

我最近创建的 SSIS 作业遇到了一个问题，该作业因一个奇怪的错误而中断。

**背景信息**

这是一个 SSIS 包 (.dtsx)，它与 ​​SQL 作业（SQL Server 2008，使用 SSMS 创建的作业）一起运行，使用 SQL Server Integration Services 包类型，正如您所期望的那样。这项工作在我们的开发环境中运行良好，但在我们的测试环境中却不行。该包使用配置文件 (.dtsConfig) 来维护不同环境的连接字符串。这个包实际上在做什么很简单；它截断一些临时表，然后使用序列容器中的 8 个数据流任务从 Oracle 数据库中提取数据填充，每个任务分解为 Source (Oracle) -> Data Conversion (for unicode strings) -> Destination ( SQL 服务器）。由于需要建立 Oracle 连接，包中包含该连接的用户/通行证，因此保护级别为 ' EncryptSensitiveWithPassword'来维护它。运行此作业的服务器正在运行 Windows Server 2008 R2 SP1。我相信这就是背景信息，但如果我错过了任何事情，请告诉我。

**实际错误**

这是损坏的工作的工作历史中唯一有用的消息：

> 该步骤没有产生任何输出。返回值未知。进程退出代码为 255。步骤失败。

如您所见，不是很有帮助。真正的问题是，当我在服务器上使用 DTEXEC 手动运行此作业时，它运行良好。这让我相信这*可能*是 sqlagentadmin 的权限问题或其他问题，但我看到的一切似乎都很好。我检查了使用 procexplorer 发生的事情，它正在运行正确的 DTEXEC 命令。应用程序事件查看器确实会弹出这个（所以它可能是一个 oracle 驱动程序问题）：

```
Faulting application name: DTExec.exe, version: 2007.100.5500.0, time stamp: 0x4e7b1ed6
Faulting module name: OraClient11.Dll, version: 11.2.0.1, time stamp: 0x4bb1dcae
Exception code: 0xc0000005
Fault offset: 0x0000000000057106
Faulting process id: 0x2d94
Faulting application start time: 0x01cd66b0d360164d
Faulting application path: C:\Program Files\Microsoft SQL Server\100\DTS\Binn\DTExec.exe
Faulting module path: c:\app\product\11.2.0\client_1\bin\OraClient11.Dll
Report Id: 118a2173-d2a4-11e1-b1ec-001517955142 
```

我已经在互联网上浏览了几个小时，并且尝试了一些东西。我将所有数据流任务的延迟验证属性更改为“真”。我尝试使用集成的 SSIS GUI 设置作业，并使用操作系统选项来运行 dtexec，但都失败了。

有什么建议么？对不起，文字墙，但我只是想确保我涵盖了所有内容。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-10T13:24:11.893

我收到以下错误：'该步骤未生成任何输出。返回值未知。进程退出代码为 255。步骤失败。' 为了解决我的问题，我检查了读取源数据的权限。我没有正确的特权。获得正确的权限并重新启动我的工作解决了这个问题。我可以建议 SSIS 之间的 API 作为执行任务，在我的情况下，DB2 数据源提供者应该用更好的信息来分配错误:-) 通过获得对源数据的读取权限来解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T21:06:35.360

您的服务器是 64 位服务器吗？Oracle 服务器呢？在使用 SSIS 连接到 Oracle 服务器时，我们遇到了非常相似的问题。我们必须在 64 位服务器上安装 64 位和 32 位客户端工具。

此外，您可能必须在 SQL 代理作业中设置一个标志，告诉它不要使用 64 位。查看 Step 的属性。转到“配置”选项卡，然后单击“高级”选项卡（在 SQL 2008 中可能略有不同）并选中“32 位运行时”，然后再试一次。这可能就是为什么它在调试时工作但不能作为工作工作的原因。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2022-02-20T06:51:21.320

当我访问包含控制台程序的文件夹（访问所有服务器用户）时，它运行顺利。

# ubuntu-12.04 - CUDA-GDB：没有 CUDA 设备

> ID：11619565
> 
> 赞同：0
> 
> 时间：2012-07-23T19:57:44.817
> 
> 标签：ubuntu-12.04, cuda-gdb

我正在尝试调试一个运行良好并且在编译时没有给出错误或警告的源代码。问题是当我用 cuda-gdb 一步一步运行它时，根本没有启动任何 CUDA 内核（我从调试器得到的输出与 Nvidia cuda-gdb 指南中显示的完全不同），但是程序仍然可以正常工作，没有任何错误。在任何时候我都没有得到 CUDA 内核、设备或线程。显然，焦点也没有放在任何东西上。我正在使用 CUDA-GDB 的 4.2 版本。

这是我应该启动内核时从调试器得到的：

```
Breakpoint 1, matrixMulGPU (M=0x609160, N=0x609270, P=0x609490, Width=8)
    at matrixMul1.cu:141
141     MatrixMulKernel<<<dimGrid, dimBlock>>>(Md, Nd, Pd, Width);
(cuda-gdb) step
MatrixMulKernel (__cuda_0=0x210000, __cuda_1=0x210100, __cuda_2=0x210200, 
    __cuda_3=8) at matrixMul1.cu:103
103 __global__ void MatrixMulKernel(float *Md, float *Nd, float *Pd, int Width){
(cuda-gdb) step
__device_stub__Z15MatrixMulKernelPfS_S_i (__par0=0x210000, __par1=0x210100, 
    __par2=0x210200, __par3=8)
    at tmpxft_000016d4_00000000-1_matrixMul1.cudafe1.stub.c:5
5   tmpxft_000016d4_00000000-1_matrixMul1.cudafe1.stub.c: Arquivo ou diretório não encontrado.
    in tmpxft_000016d4_00000000-1_matrixMul1.cudafe1.stub.c
(cuda-gdb) step
cudaLaunch<char> (
    entry=0x4011ea "UH\211\345SH\203\354(H\211}\350H\211u\340H\211U؉MԋM\324H\213U\330H\213]\340H\213E\350H\211\336H\211\307\350\024\377\377\377H\203\304([\311\303UH\211\345SH\203\354(\277Pn@") at cuda_runtime.h:958
958   return cudaLaunch((const char*)entry);
(cuda-gdb) step
959 }
(cuda-gdb) step
MatrixMulKernel (__cuda_0=0x210000, __cuda_1=0x210100, __cuda_2=0x210200, 
    __cuda_3=8) at matrixMul1.cu:121
121 } 
```

我的 CUDA 设备是 GeForce 8400M GS，我对 deviceQuery 检查没有任何问题。我不知道如何解决这个问题，因为这些天 Nvidia 论坛处于离线状态！

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T06:30:19.650

查看 cuda-gdb 输出，您似乎在内核启动的主机组件上（即 <<< >>>）。CUDA 内核启动是异步的。主机调用准备启动并将在它完成之前返回（或者在某些情况下甚至在启动的工作开始之前）。因此，当您在主机上停止时，已启动的工作可能尚未分派到 GPU。

进入主机端内核启动调用不会进入设备上的内核启动。相反，尝试在内核内部设置一个断点，让应用程序自由运行。断点可以通过 file:linenumber (eg`break matrixMul1.cu:<line>`或 name (eg `break MatrixMulKernel`) 设置。当设备端断点被命中时，cuda-gdb 将返回提示并在适当的时候将焦点设置在设备上。

# linux - 如何将 TFS 构建延迟到签入完成后

> ID：11619571
> 
> 赞同：1
> 
> 时间：2012-07-23T19:58:02.943
> 
> 标签：linux, git, tfs

问题：使用预定脚本将 Git 同步到 TFS。我需要能够将 TFS 构建延迟到签入完成之后。TFS 通常希望在有签入时启动，但脚本将大量签入，直到所有其他签入完成。

我在找什么：

1.  如何在所有签入完成之前延迟 TFS 构建？
2.  如果 #1 无法解决，我该如何从 linux 开始构建？

如果实际有更改，我希望 git sync 脚本启动 TFS 构建。我知道我可以从 Winodws 做到这一点，但 git 为我们坐在 Linus 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T20:04:51.867

在您的构建定义中，选择名为**Rolling builds**的单选选项，确保指定构建之间应经过的最短时间长度。

编辑：对于某些人来说，这也可能被称为“安静期”

这将做的类似于**持续集成**选项，除了构建不会比*X*分钟更近地排队：

> **构建**：延迟设置为 10 分钟
> **开发 A**：在 13:00 提交
> **构建**：开始，在 13:05 完成
> **开发 B**：在 13:07 提交
> **构建**：...zzzzzz.....
> **开发 C**：在13:16
> **构建**：出发时间

# java - 片段添加或替换不起作用

> ID：11619573
> 
> 赞同：58
> 
> 时间：2012-07-23T19:58:05.360
> 
> 标签：java, android, android-fragments

我正在使用this [reference中的代码。](http://developer.android.com/guide/components/fragments.html)

当我在我的程序中输入该代码时，出现如下图所示的错误。 ![在此处输入图像描述](../Images/034838aa4e74a0b657cbe6bb780b80c6.png)

错误的任何原因？ `The method replace(int, Fragment) in the type FragmentTransaction is not applicable for the arguments (int, ExampleFragments)`

我的主要活动中的代码：

```
public void red(View view) {
        android.app.FragmentManager fragmentManager = getFragmentManager();
                android.app.FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
        ExampleFragments fragment = new ExampleFragments();
        fragmentTransaction.replace(R.id.frag, fragment);
        fragmentTransaction.commit();
    } 
```

ExampleFragments.java

```
package com.example.learn.fragments;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class ExampleFragments extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        return inflater.inflate(R.layout.blue_pill_frag, container, false);
    }
} 
```

这里：

```
package com.example.learn.fragments;

import android.app.Activity;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentTransaction;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.View;
import android.view.ViewGroup; 
```

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2012-07-23T20:06:00.150

这里的问题是你正在混合`android.support.v4.app.Fragment`和`android.app.Fragment`. 您需要将所有用途转换为使用支持库，这也意味着调用`getSupportFragmentManager()`.

像这样的东西，例如：

```
 android.support.v4.app.FragmentManager fragmentManager = getSupportFragmentManager();
    android.support.v4.app.FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
    ExampleFragments fragment = new ExampleFragments();
    fragmentTransaction.replace(R.id.frag, fragment);
    fragmentTransaction.commit(); 
```

重要的是要注意支持库`Fragment`和法线`Fragment`是不可互换的。它们达到相同的目的，但在代码中它们不能相互替换。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-08T22:34:49.273

尽管可能已经回答了这个问题，但应该注意的是，重叠片段的解决方案是使用新的“片段”实例获取片段 ID（实际上，在您的 xml 中声明的 FrameLayout id 会导致头痛）：

```
FragmentManager fragmentManager = getSupportFragmentManager();
FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
Fragment fragment = new ExampleFragments();
fragmentTransaction.replace(R.id.frag, fragment);
fragmentTransaction.commit(); 
```

我无法告诉你我花了多少小时在一个又一个帖子中没有解决方案。我阅读了您在上面评论中链接的另一篇文章，我也会在那里回答，以防有人首先发现。

对于那些正在获得的人，也可以`ClassCastException`试试这个。您可以使用`FragmentActivity`而不是添加所有正确的库`Fragment`，并在代码中使用 getActivity().getSupportFragmentManager 来阻止 ListFragment 中的错误，但您仍然会遇到片段问题。Google 文档不会向您展示所有内容，并且 Eclipse 代码完成不会总能拯救您……有时您只需要自己修复错误！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-08T13:27:01.180

无论我尝试了什么（包括这里写的），在看到这个答案之前我都无法解决这个问题

[https://stackoverflow.com/a/5907704/728312](https://stackoverflow.com/a/5907704/728312)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-19T13:45:55.227

这对我有用

`android.app.FragmentManager fragmentManager = getActivity().getFragmentManager();`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-06T11:10:05.613

**尝试一下**

```
FragmentTransaction fragmentTransaction = getSupportFragmentManager().beginTransaction();
  fragmentTransaction.replace(R.id.frag, new ExampleFragments()).commit(); 
```

# c++ - 从 MSVS2005 到 MSVS2010 的端口：我再也找不到 ReadProcessorPwrScheme()

> ID：11619575
> 
> 赞同：0
> 
> 时间：2012-07-23T19:58:06.437
> 
> 标签：c++, visual-studio, visual-c++

我目前正在将代码从 MSVS2005 移植到 MSVS2010。我对不再存在的函数 ReadProcessorPwrScheme()（以及 WriteProcessorPwrScheme()）有疑问。

我查看了文件 Powrprof.h 发现：

```
#if (NTDDI_VERSION >= NTDDI_WINXP)
//
// deprecated.
//
STDAPI_(BOOLEAN)
ReadProcessorPwrScheme(
    __in UINT uiID,
    __out PMACHINE_PROCESSOR_POWER_POLICY pMachineProcessorPowerPolicy
    );
#endif 
```

功能也是`write`如此。

1）它用MSVS2005正确编译，但我看到SDK发生了变化（只看一下文件Powrprof.h，我们发现它们有所不同。在MSVS2005的文件中，没有条件编译。）

**请注意，如果您想让我告诉您使用了哪个 SDK，您必须告诉我在哪里可以找到版本号！**

2）我在 Win7 SP1，64 位。

是否有解决方法、替换功能或任何可以帮助我的方法？

谢谢！
多米尼克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:07:45.440

[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa373190.aspx)告诉你发生了什么：

> [`ReadProcessorPwrScheme`可用于“要求”部分中指定的操作系统。在后续版本中可能会更改或不可用。见备注。]

评论：

> 从 Windows Vista 开始，系统处理器的电源管理配置通过 GUID_PROCESSOR_SETTINGS_SUBGROUP 电源设置子组进行控制。使用该[`PowerEnumerate`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372730.aspx)函数枚举各个设置。

# c# - 如何包装一个函数及其参数......有点像“超级委托”？

> ID：11619578
> 
> 赞同：4
> 
> 时间：2012-07-23T19:58:20.557
> 
> 标签：c#, delegates

我有一段代码在一个中等复杂的重试和尝试/捕获逻辑中执行“文件放置”操作。这工作正常，它看起来大致是这样的：

```
while (...) {
try {
    FilePut(source, destination)
    }
catch () {
   //Check exception type, possibly re-throw, possibly return, possibly increment
   //counters being checked by while loop
   }
} 
```

这个逻辑的细节不是问题。但我意识到我还有其他几个操作也需要在同一种逻辑中执行，我想避免在我的应用程序周围复制和粘贴这个逻辑。我想将它移到一个函数中并重用该函数。该函数必须对要调用的操作进行某种引用，并且 try 逻辑将执行该操作（文件放置、文件获取等）。

这似乎是一个委托的好地方，但问题是，这些操作中的每一个都有不同的签名，所以我不确定如何编写我的上述逻辑来调用“任何”操作。

有没有在 C# 中执行此操作的好方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T20:02:15.050

您需要一个[`Action`代表](http://msdn.microsoft.com/en-us/library/018hxwa8.aspx)来隐藏所有不同的签名。像这样的东西：

```
public void DoAction(Action action)
{
    // Make the boilerplate code whatever you need it to be. 
    // I've just used a try catch for simplicity.
    try
    {
        // Call the action at the appropriate time.
        action();
    }
    catch
    {
        // Handle any exceptions as you wish.
    }
} 
```

然后，为了能够处理具有不同签名的操作，您可以定义一些采用不同类型的泛型`Action<T>`委托和所有必要参数的重载。这些重载会将通用动作及其参数“curry”到普通的`Action`：

```
public void DoAction<T>(Action<T> action, T arg1)
{
    DoAction(() => action(arg1));
}

public void DoAction<T1, T2>(Action<T1, T2> action, T1 arg1, T2 arg2)
{
    DoAction(() => action(arg1, arg2));
}

public void DoAction<T1, T2, T3>(Action<T1, T2, T3> action, T1 arg1, T2 arg2, T3 arg3)
{
    DoAction(() => action(arg1, arg2, arg3));
}

// etc... 
```

要使用：

```
public void SomeOtherMethod()
{
    DoAction(MethodThatTakesTwoInts, 42, 23);
    DoAction(MethodThatTakesAString, "Don't Panic!");
} 
```

此外，如果您不熟悉它们，请查看相关的[`Func`代表](http://msdn.microsoft.com/en-us/library/bb534960)家族以获取良好的衡量标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:12:36.313

您可以使用递归：

```
protected void TryNTimes(int numberOfTries, Action action)
{
    try
    {
        if (numberOfTries == 0) return;
        action();
    }
    catch (Exception)
    {
        TryNTimes(numberOfTries - 1, action);
    }
} 
```

然后像这样使用它：

```
TryNTimes(10, () => Foo()); 
```

# html - 将文本框文本包装在类似按钮的 UI 元素中

> ID：11619580
> 
> 赞同：4
> 
> 时间：2012-07-23T19:58:23.663
> 
> 标签：html, user-interface

对不起这个奇怪的标题：因为我不知道这个效果叫什么我不知道如何通过谷歌或堆栈溢出搜索它......

我试图描述的一个例子可以在雅虎邮箱的“撰写消息屏幕”上找到。当您完成输入电子邮件地址（或选择自动完成建议）后，“收件人：”框中的电子邮件地址文本应用了一种样式，使其看起来像一个按钮：

![在此处输入图像描述](../Images/48d5bdb40e5d6c3270f1c106e52307bb.png)

1.  这种效果的名称是什么？

2.  我在哪里可以找到有关如何复制它的参考？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:10:09.437

这听起来对你有用。 [http://ivaynberg.github.com/select2/#tags](http://ivaynberg.github.com/select2/#tags)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:07:20.657

我不确定这种效果的正式名称是什么，但我最近做了类似的事情。

我把它写成一个 jquery 插件。

基本要点是创建一个 div 和一个填充它的文本框。侦听文本框上的字符事件，然后在 tab/return 上创建一个新的 div 到文本框的左侧，其中包含您要显示的文本。在 js 中，您可以测量呈现的 div 的宽度并将文本输入定位在右侧。

我也这样做了，所以转义键清除了所有标签/关键字 使用空文本输入按下回车会触发一个事件，例如提交并单击标签将 div 替换为文本输入，以允许用户在适当的位置修改标签

我在 Mo 使用 iPad，所以没有样本，但希望能指出你的写作方向。

# jquery - +1/Like/Share 按钮用于基于网络的移动应用程序

> ID：11619588
> 
> 赞同：3
> 
> 时间：2012-07-23T19:58:52.753
> 
> 标签：jquery, html, facebook, jquery-mobile, google-plus

我正在使用 jQuery Mobile 创建一个基于 Web 的移动应用程序。

我想在我的应用程序中添加“+1”和“分享”按钮（适用于 Google+）以及“喜欢”和“分享”按钮（适用于 Facebook）。但所有这些按钮都可能使用弹出窗口（例如用于登录）。

因为我的目标是创建一个移动 Web 应用程序，所以我不应该有任何弹出窗口。所以我不能使用这些默认按钮。

有没有办法让这四个按钮**没有任何弹出窗口**？（我不知道，可能是 iframe，或者我们服务器上的集成系统，或者其他什么的......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:03:05.893

这些都是 OAuth 服务。因此，如果除了使用典型的 javascript 小部件之外，您还想做一些事情，您将需要熟悉 OAuth 并自己将所有相应的浏览器重定向到登录页面。

# asp.net - 在 asp.net 中通过 html 代码设置前景色

> ID：11619592
> 
> 赞同：3
> 
> 时间：2012-07-23T19:59:18.433
> 
> 标签：asp.net

我有一个网格视图，我试图从包含 HTML 代码的数据库字符串中设置前景色。我试过这个：

```
<asp:TemplateField HeaderText="Validation">
                                <ItemTemplate>
                                    <asp:Label ID="lblValidationItem" runat="server" ToolTip="Type of validation."
                                        Text='<%# DataBinder.Eval(Container, "DataItem.ValidationItem") %>' Font-Bold="true" ForeColor='<%# System.Drawing.ColorTranslator.FromHtml(Eval("HTMLColor")) %>'></asp:Label>
                                </ItemTemplate>
                                 <FooterStyle HorizontalAlign="Center" />
                                 <HeaderStyle HorizontalAlign="Center" />
                                 <ItemStyle HorizontalAlign="Center" />
                            </asp:TemplateField> 
```

但它说 FromHtml 有一些无效参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:09:34.297

eval 返回一个“对象”。您需要将其转换为字符串：

```
<ItemTemplate>
   <asp:Label ID="lblValidationItem" runat="server" ToolTip="Type of validation."
                                        Text='<%# Eval("DataItem.ValidationItem") %>' Font-Bold="true" ForeColor='<%# System.Drawing.ColorTranslator.FromHtml((string)Eval("HTMLColor")) %>'></asp:Label>
</ItemTemplate> 
```

# git - 如何更改存储库链接到的 fork

> ID：11619593
> 
> 赞同：68
> 
> 时间：2012-07-23T19:59:22.743
> 
> 标签：git, github

我有一个回购电话`MAIN/repo.git`，我已经把它分叉到`FORK/repo.git`. 我将这两个存储库都克隆到了我的计算机上，用于不同的目的。

使用 Github for Windows，一个错误似乎已经切换`FORK/repo.git`到`MAIN/repo.git`，当我这样做时`git remote show origin`，Fetch URL 和 Push URL 被设置为主 repo。如何将其切换回来，以便本地计算机上的相应文件夹指向`FORK/repo.git`，而不是`MAIN/repo.git`？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-07-23T20:33:43.437

最简单的方法是[`git remote`](http://git-scm.com/docs/git-remote)在您的本地克隆中使用命令行`FORK`：

```
git remote rm origin
git remote add origin https://github.com/user/FORK.git 
```

或者，在一个命令中，如这篇[GitHub 文章](https://help.github.com/articles/changing-a-remote-s-url)所示：

```
git remote set-url origin https://github.com/user/FORK.git 
```

* * *

更好的做法是：

*   保持远程引用原始存储库
*   在新分支中工作（上游分支将跟踪您的分叉）

所以：

```
git remote rename origin upstream
git branch -avv # existing branches like master are linked to upstream/xxx

git remote add origin https://github.com/user/FORK.git
git checkout -b newFeatureBranch 
```

每当您需要根据原始存储库的最新演变来更新您的分叉时：

```
git checkout master
git pull # it pulls from upstream!
git checkout newFeatureBranch
git rebase master # safe if you are alone working on that branch
git push --force # ditto. It pushes to origin, which is your fork. 
```

# api - 使用 REST 语义在 GET 请求中传递附加信息

> ID：11619597
> 
> 赞同：1
> 
> 时间：2012-07-23T19:59:36.077
> 
> 标签：api, rest, get

我正在设计一个 REST API，我想知道允许数据从客户端传递到使用 REST 语义的 GET 请求的正确方法。

一个简单的用例是，当从服务器获取一些数据时，我希望客户端可以选择传递客户端中已经存在的数据的哈希列表，以便服务器可以排除该数据如果数据没有改变，它的响应。

快速搜索表明使用查询字符串是正确的方法。

例如，

GET /api/v1/Products?productsInClient?id1=MD5_HASH_1&id2=MD5_HASH_2 可能是一种设计。

但是，理想情况下，我希望在请求正文中传递查询字符串数据，因为查询字符串中的 id 数量可能会变得非常长。在 GET 请求的正文中传递此类信息并且仍然符合 REST 语义是否可以接受。

另一种选择是将此作为 POST 请求 - 但我不想这样做，因为该请求并没有真正在服务器上创建新资源。唯一的附加服务器操作是排除客户端中已经存在的某些资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:25:38.747

您可以为此使用自定义 http 标头。某些 Web 服务器（例如 iis 6，请参阅[此处](http://forums.iis.net/t/1105360.aspx)）也可能存在问题，这些服务器具有与 url 长度相关的限制，出于安全原因，长度可以设置为最大大小，[此处也有说明](http://www.iis.net/ConfigReference/system.webServer/security/requestFiltering/requestLimits)

# iphone - iphone 应用程序显示带有可点击单词的文本文件

> ID：11619601
> 
> 赞同：1
> 
> 时间：2012-07-23T19:59:52.990
> 
> 标签：iphone, objective-c, text, uiwebview

我正在编写一个用于学习同义词的 iphone 应用程序。某些具有同义词的单词将是可点击的。单击其中一个单词后，该单词应突出显示，并且弹出窗口应列出一堆同义词。单击其中一个同义词后，该词应被其同义词替换。

我有以下问题：

1.  说一篇几千字的文章，有哪些不同的展示方式？一种方法是 WebView。还有其他人吗？

2.  如何实现这种“突出显示单词并弹出同义词列表”的效果。当我在 iPhone 上的 safari 网页上单击一个单词时，我看到了类似的情况。突出显示一个单词并弹出一个带有“复制”选项的弹出窗口

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:12:26.443

您可以考虑使用[`NSAttributedString`](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSAttributedString_Class/Reference/Reference.html)with [`OHAttributedLabel`](https://github.com/AliSoftware/OHAttributedLabel)。另一种选择可能是[EgoTextView](https://github.com/enormego/EGOTextView)。

> 参考： [iphone/ipad: NSAttributedString 到底是如何使用的？](https://stackoverflow.com/questions/3786528/iphone-ipad-how-exactly-use-nsattributedstring)

# c++ - 字符串比较中的 C++ 字符

> ID：11619608
> 
> 赞同：2
> 
> 时间：2012-07-23T20:00:30.600
> 
> 标签：c++, string, indexing, comparison, character

我熟悉 c++，但不知道如何比较来自相同或不同字符串的索引字符。这是一个回文示例，它采用 int 并通过 stringstream 将其转换为字符串。

```
bool ispalindrome(int a) {
    stringstream stream;
    stream<<a;
    string str = stream.str();
    int length = str.length();
    int offset = length - 1;
    for (int i=0; i<=offset; i++ && offset--) {
        if (str[i] == str[i + offset]) {
            return false;
        }
        offset--;
    }
    return true;
} 
```

由于某种原因，这总是被评估为假。我认为空终止与它没有任何关系，因为它没有按长度报告，所以我想我一定使用了错误的比较方法。我似乎找不到类似 strncmp 但只有单个字符的东西。

[编辑：固定标题]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T20:02:42.210

我不知道你是怎么写那个循环的，但我很确定它应该是

```
for (int i=0; i<=offset; i++, offset--) {
    if (str[i] != str[offset]) {
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T20:10:38.433

可能是逗号的使用，

```
for (int i=0; i<=offset; i++ ,offset--) 
```

更常见吗？

别的，

```
if (str[i] == str[i + offset]) { 
```

使用 '!=' 而不是 '==' 会更好

但是，通过一个简单的示例，我看不到“总是错误”的行为

```
int main() {
  for ( int i = 0; i < 1000; ++i )
  cout << i << " = " << ispalindrome(i) << endl;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T20:13:48.993

您可以使用迭代器：

```
std::string::iterator start = str.begin();
std::string::reverse_iterator end = str.rbegin();

int halfWay = str.length() / 2;

for (int i = 0; i <= halfWay; i++, start++, end++)
{
    if (*start != *end)
        return false;
}

return true; 
```

免责声明：未经测试，但我也不太擅长 C++！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T20:04:55.580

您的检查条件应该是：

```
 if (str[i] != str[i + offset]) {
               ^--here 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-06T05:24:23.177

如果它只是检查回文，您也可以`reverse`从 STL使用

```
#include <algorithm>
#include <string>

bool isPalinDrome = false;

std::string mystr = "cnc";
std::string mystrcpy = mystr;
std::reverse(mystrcpy.begin(),mystrcpy.end());
if(mystr == mystrcpy)
isPalindrome =  true; 
```

但是，如果您只是比较单个字符，那么上面的答案已经告诉您如何去做。因此，重申一下，无论哪种方式，您都只需要遍历字符串的中途

# objective-c - 快速滚动时未调用 UIScrollView scrollViewDidEndDragging

> ID：11619610
> 
> 赞同：4
> 
> 时间：2012-07-23T20:00:38.617
> 
> 标签：objective-c, uiscrollview, uikit, uiscrollviewdelegate

我在 UIScrollViewDelegate 中实现了 scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate。该方法被调用没有问题，除非我滚动得非常快。例如，如果我快速滑动三次，即使滚动视图将（正确地）翻页三次，该方法也只会被调用一次。

有什么解决办法吗？我依靠这种方法来进行适当的延迟加载行为，当它没有被调用时，这意味着事情不会及时加载。如果这种方法没有解决方案，是否有另一种方法可以让我知道每次用户从滚动视图中抬起手指时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-14T15:45:24.240

哇，多么古老的问题，但无论如何这里是答案。

```
scrollView.delegate = self; // or some .m file 
```

然后在执行中

```
- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate {
    NSLog(@"Just a usual drag!");
}

- (void)scrollViewWillBeginDecelerating:(UIScrollView *)scrollView {
    // so when dragged quickly, this function will be called instead of didEndDragging
    // now lets trick it to stop the animation of decelerating
    [scrollView setContentOffset:[scrollView contentOffset] animated:NO];
    // and then call the dragging event like nothing even happened
    [scrollView.delegate scrollViewDidEndDragging:scrollView willDecelerate:NO];
} 
```

# objective-c - 异常 - 数组检查的界限有误？

> ID：11619611
> 
> 赞同：0
> 
> 时间：2012-07-23T20:00:41.617
> 
> 标签：objective-c, arrays, exception, bounds

关于为什么下面指示的行会引发异常的任何线索？

```
-(double)calibrationValueAtIndex:(int)index
{
    NSLog(@"count: %d   index: %d",[theTopValues count], index);
    return [[theTopValues objectAtIndex:index] doubleValue];  // exception happening here
}

2012-07-23 21:51:16.448 TestAppTimerAndHits[15130:f803] count: 9   index: 7
2012-07-23 21:51:22.339 TestAppTimerAndHits[15130:f803] *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSOrderedSetM objectAtIndex:]: index 7 beyond bounds [0 .. 4]' 
```

它如何在之前的行中 NSLog 计数为 9，然后在异常中报告边界是`[0 .. 4]`？

异常似乎是“随机”抛出的。在某些情况下，数组边界很好，这意味着我可以在索引 8 处获取对象......但其他时候，它会报告低至`[0 .. 2]`?

在视图控制器中（项目中只有 VC 一个）

theBufferManager = [[HitBufferManager alloc] init];

在 .h 文件中：@property NSMutableOrderedSet* theTopValues；

在 .m 文件中：@synthesize theTopValues；

-HitBufferManager 的 (id)init: theTopValues = [NSMutableOrderedSet orderedSetWithCapacity:numToStore]; // 返回一个自动发布的版本。

添加/编辑单个项目：

```
 [self sortTopValues];

        if([theTopValues count]<numToStore)
        {
            [theTopValues addObject:[NSNumber numberWithDouble:windowVal]];
        }
        else if(logVal> [[theTopValues objectAtIndex:0] doubleValue])
        {
            [theTopValues replaceObjectAtIndex:0 withObject:[NSNumber numberWithDouble:logVal]];
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:20:56.540

这确实是一个多线程问题。在我正在排序和修改 NSOrderedSet 的代码位周围放置一个很好的 @synchronized{} 似乎可以解决我正在读回它的部分的问题。我现在的问题是试图弄清楚我的其他线程来自哪里。是吗

```
CADisplayLink* gameTimer;
gameTimer = [CADisplayLink displayLinkWithTarget:self
                                        selector:@selector(updateDisplay:)];

[gameTimer addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode]; 
```

和/或这会启动一个线程吗？

```
 AudioUnitSetProperty(_effectState.rioUnit,
                      kAudioUnitProperty_SetRenderCallback,
                      kAudioUnitScope_Global, 
                      bus0, 
                      &callbackStruct, 
                      sizeof(callbackStruct);
 AudioOutputUnitStart(_effectState.rioUnit); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T21:00:51.863

尝试更改 :in .h 文件：@property NSMutableOrderedSet* theTopValues;

在 .h 文件中：@property (strong) NSMutableOrderedSet* theTopValues;

看看能不能解决。

# wpf - 绑定到 ViewModel.SubClass.Property（子属性）

> ID：11619612
> 
> 赞同：8
> 
> 时间：2012-07-23T20:00:49.150
> 
> 标签：wpf, mvvm, binding

假设我的屏幕上有一个部分正在编辑“当前记录”。所以我的视图模型有一个包含所有当前编辑属性的类，例如：

```
class Record { 
    public string Notes { get { return "Foo"; } set { _notes = value; Notify("Notes"); }
} 
```

我们将这个类添加到视图模型中：

```
class AdjustsmentViewModel {
    public Record CurrentRecord { get { return new Record(); }}
} 
```

如何在我的视图中绑定到 CurrentRecord 的 Notes 属性？我试过这个：

```
<TextBox Text="{Binding CurrentRecord.Notes, Mode=TwoWay}" VerticalScrollBarVisibility="Auto" TextWrapping="WrapWithOverflow" AcceptsReturn="True"  /> 
```

但是，这不起作用。我还尝试设置周围 StackPanel 的 DataContext：

```
<StackPanel DataContext="{Binding CurrentRecord}"> 
```

之后，我在我的 TextBox {Binding Notes} 和 {Binding Path=Notes} 中进行了尝试，但这些似乎都不起作用。

也许上面真的应该工作，我在别处搞砸了？

**更新**

这发生在用户控件中。这个用户控件有一个独立的视图模型，来自它的父窗口。

```
this.DataContext = UnityUtil.Resolve<AdjustmentsViewModel>(); 
```

我还看到一个绑定错误：*在'object'''MainViewModel'上找不到'Notes'属性*

该视图模型设置在主窗口上。

为了验证我是否绑定了正确的 ViewModel，我只是直接在 viewmodel 上添加了这个属性：

```
public string Notes2 { get { return "Bar"; } } 
```

和视图中的相应文本块：

```
<TextBlock Text="{Binding Path=Notes2}" /> 
```

这按预期工作。

**巨大的成功**

感谢瑞安，我能够找到问题所在。它不在属性本身，而是在设置 CurrentRecord 的方式。在我的设置器中，我调用了 INotifyPropertyChange 处理程序，但其中包含属性的旧名称。所以视图没有收到 CurrentRecord 通知，所以我猜 Notes 通知是不够的..

总之，这个符号是正确的：**{Binding Path=CurrentRecord.Notes}**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T20:11:35.583

以上应该有效，{Binding Path=CurrentRecord.Notes} 是正确的。您可以检查您的数据上下文是否设置为您的视图模型？

还要检查您的视图模型是否实现了 INotifyPropertyChanged。

编辑：我刚刚创建了一个示例项目来重新创建它。无需实现 INotifyPropertyChanged，它只在数据上下文设置为 VM 时工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T23:01:04.980

确保您的 CurrentRecord 属性是 1) 正在设置和 2) 通知 UI 层发生了更改。

# php - PHP 设置最大 CPU 利用率，或者，如何放弃 CPU 时间片

> ID：11619614
> 
> 赞同：1
> 
> 时间：2012-07-23T20:01:01.947
> 
> 标签：php, cpu-usage

我有一个用 PHP 编写的应用程序（不是网站，一个应用程序），它的逻辑有一个无限循环，直到应用程序关闭。我注意到的一个问题是我的 CPU 使用率非常高（显然），我尝试使用我过去做过的 C++ 方法来降低 CPU 使用率。他们中的许多人似乎都没有工作。

我试过了：

```
sleep(1); 
```

和：

```
time_sleep_until(microtime(true)+0.2); 
```

但似乎两者都没有降低利用率。

有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:14:46.853

您可以在需要执行作业时配置它们的执行。因此，如果这个无限脚本需要每分钟执行/检查某事，您可以在有变化时执行，否则休眠。

您的问题可能出在脚本本身以外的其他事情上。这是一个示例，希望对您有所帮助。

```
 set_time_limit(0);
    ignore_user_abort(true);
    $minutes = NULL;

    do {
        try {
            // Run jobs, only when the minute has changed
            $now = getdate();
            if ($now['minutes'] != $minutes) {
                $minutes = $now['minutes'];
            }       
        }
        catch (Exception $e) {
            // Catch here and handle
        }
        sleep(10);
    } while (TRUE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:05:37.653

据我所知，没有办法在 PHP 应用程序中执行此操作，但是在启动该进程时，您可以将其传递给名为`cpulimit`. 另一种选择是更改`nice`程序的级别，以便至少在它很忙时不会阻碍其他更重要的进程。

# ios - 当应用程序进入后台时关闭 NSStreams

> ID：11619615
> 
> 赞同：0
> 
> 时间：2012-07-23T20:01:03.037
> 
> 标签：ios, tcp, nsstream, nsinputstream, nsoutputstream

我是 Objective C 和 ios 开发的新手。我通常使用 Java 编写 Android 应用程序，并且总是使用 onPause 调用来关闭我的套接字。但是，当我在 applicationWillResignActive 下调用我的关闭套接字方法时，我与我的流侦听器失去了通信，并且无法关闭输入和输出流。事实上，即使应用程序连接到服务器，两个流的流状态都显示 NSStreamStatusNotOpen 或 0。有任何想法吗？

谢谢

**编辑**

SocketHandler.m 类中的连接方法：

```
 -(void)connect:(int *)port ipAddress:(NSString *)ipAddress
{
        CFReadStreamRef readStream;
        CFWriteStreamRef writeStream;
        CFStreamCreatePairWithSocketToHost(NULL, (CFStringRef)ipAddress, port, &readStream, &writeStream);
        inputStream = (NSInputStream *)readStream;
        outputStream = (NSOutputStream *)writeStream;
        [inputStream setDelegate:self];
        [outputStream setDelegate:self];
        [inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
        [outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
        [inputStream open];
        [outputStream open];
        NSLog(@"input stream id %i", inputStream);  
}

-(void)disconnect{

    NSLog(@"disconnect method called");

    socketStatus = [outputStream streamStatus];
    int status = socketStatus;
    NSLog(@"Stream Status is %i", status);

    if (status == 2) {
        [inputStream close];
        [outputStream close];
        NSLog(@"Socket Closed");
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T15:41:27.553

好的，这是我自己问题的答案。

我创建了 3 个类：

TCPSocketAppDelegate TCPSocketViewController 套接字处理程序

在 Socket 处理程序类中，我有一个名为 Connect 的方法和另一个名为 Disconnect 的方法。他们来了：

连接方法：

```
-(void)connect:(int *)port ipAddress:(NSString *)ipAddress
{
        NSLog(@"input stream id %i", inputStream);
        CFReadStreamRef readStream;
        CFWriteStreamRef writeStream;
        CFStreamCreatePairWithSocketToHost(NULL, (CFStringRef)ipAddress, port, &readStream, &writeStream);
        inputStream = (NSInputStream *)readStream;
        outputStream = (NSOutputStream *)writeStream;
        [inputStream setDelegate:self];
        [outputStream setDelegate:self];
        [inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
        [outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
        [inputStream open];
        [outputStream open];
        NSLog(@"input stream id %i", inputStream);  
} 
```

断开方法：

```
-(void)disconnect{

    NSLog(@"disconnect method called");
    NSLog(@"input stream id %i", inputStream);

    socketStatus = [outputStream streamStatus];
    int status = socketStatus;
    NSLog(@"Stream Status is %i", status);

    if (status == 2) {
        [inputStream close];
        [outputStream close];
        NSLog(@"Socket Closed");
    }

} 
```

然后，我在 TCPSocketAppDelegate 类和 TCPSocketView Controller 类中创建了对 Socket Handler 类的引用对象。但是，当我这样做时，它为每个套接字创建了一个新的 SocketHandler 类实例，因此它们没有寻址同一个套接字，因此一个可以连接套接字但另一个不能访问它。为了解决这个问题，我简单地使用 +(void) 使连接和断开连接方法全局可访问。现在我不必在其他类中创建引用对象来调用方法。我希望这些信息对以后的人有所帮助。

# string - 如何将字符串拆分为给定长度的子字符串？

> ID：11619616
> 
> 赞同：35
> 
> 时间：2012-07-23T20:01:04.940
> 
> 标签：string, r, split

我有一个字符串，例如：

`"aabbccccdd"`

我想将此字符串分解为长度为 2 的子字符串向量：

`"aa" "bb" "cc" "cc" "dd"`

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-07-23T20:05:12.650

这是一种方法

```
substring("aabbccccdd", seq(1, 9, 2), seq(2, 10, 2))
#[1] "aa" "bb" "cc" "cc" "dd" 
```

或更一般地说

```
text <- "aabbccccdd"
substring(text, seq(1, nchar(text)-1, 2), seq(2, nchar(text), 2))
#[1] "aa" "bb" "cc" "cc" "dd" 
```

**编辑：这要快得多**

```
sst <- strsplit(text, "")[[1]]
out <- paste0(sst[c(TRUE, FALSE)], sst[c(FALSE, TRUE)]) 
```

它首先将字符串拆分为字符。然后，它将偶数元素和奇数元素粘贴在一起。

**计时**

```
text <- paste(rep(paste0(letters, letters), 1000), collapse="")
g1 <- function(text) {
    substring(text, seq(1, nchar(text)-1, 2), seq(2, nchar(text), 2))
}
g2 <- function(text) {
    sst <- strsplit(text, "")[[1]]
    paste0(sst[c(TRUE, FALSE)], sst[c(FALSE, TRUE)])
}
identical(g1(text), g2(text))
#[1] TRUE
library(rbenchmark)
benchmark(g1=g1(text), g2=g2(text))
#  test replications elapsed relative user.self sys.self user.child sys.child
#1   g1          100  95.451 79.87531    95.438        0          0         0
#2   g2          100   1.195  1.00000     1.196        0          0         0 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-04-24T07:38:39.003

有两种简单的可能性：

```
s <- "aabbccccdd" 
```

1.  **`gregexpr`**和**`regmatches`**：

    ```
    regmatches(s, gregexpr(".{2}", s))[[1]]
    # [1] "aa" "bb" "cc" "cc" "dd" 
    ```

2.  **`strsplit`**：

    ```
    strsplit(s, "(?<=.{2})", perl = TRUE)[[1]]
    # [1] "aa" "bb" "cc" "cc" "dd" 
    ```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-07-23T20:09:11.177

```
string <- "aabbccccdd"
# total length of string
num.chars <- nchar(string)

# the indices where each substr will start
starts <- seq(1,num.chars, by=2)

# chop it up
sapply(starts, function(ii) {
  substr(string, ii, ii+1)
}) 
```

这使

```
[1] "aa" "bb" "cc" "cc" "dd" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-18T17:44:59.803

可以使用矩阵对字符进行分组：

```
s2 <- function(x) {
  m <- matrix(strsplit(x, '')[[1]], nrow=2)
  apply(m, 2, paste, collapse='')
}

s2('aabbccddeeff')
## [1] "aa" "bb" "cc" "dd" "ee" "ff" 
```

不幸的是，这对于奇数字符串长度的输入会中断，并发出警告：

```
s2('abc')
## [1] "ab" "ca"
## Warning message:
## In matrix(strsplit(x, "")[[1]], nrow = 2) :
##   data length [3] is not a sub-multiple or multiple of the number of rows [2] 
```

更不幸的是，`g1`@ `g2`GSee 默默地为奇数字符串长度的输入返回不正确的结果：

```
g1('abc')
## [1] "ab"

g2('abc')
## [1] "ab" "cb" 
```

这是 s2 精神的函数，它为每组中的字符数提供一个参数，并在必要时将最后一个条目留短：

```
s <- function(x, n) {
  sst <- strsplit(x, '')[[1]]
  m <- matrix('', nrow=n, ncol=(length(sst)+n-1)%/%n)
  m[seq_along(sst)] <- sst
  apply(m, 2, paste, collapse='')
}

s('hello world', 2)
## [1] "he" "ll" "o " "wo" "rl" "d" 
s('hello world', 3)
## [1] "hel" "lo " "wor" "ld" 
```

（它确实比 慢`g2`，但比`g1`约快 7 倍）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-24T07:28:27.363

丑陋但有效

```
sequenceString <- "ATGAATAAAG"

J=3#maximum sequence length in file
sequenceSmallVecStart <-
  substring(sequenceString, seq(1, nchar(sequenceString)-J+1, J), 
    seq(J,nchar(sequenceString), J))
sequenceSmallVecEnd <-
    substring(sequenceString, max(seq(J, nchar(sequenceString), J))+1)
sequenceSmallVec <-
    c(sequenceSmallVecStart,sequenceSmallVecEnd)
cat(sequenceSmallVec,sep = "\n") 
```

给 ATG AAT AAA G

# c# - 多次更换

> ID：11619617
> 
> 赞同：1
> 
> 时间：2012-07-23T20:01:07.470
> 
> 标签：c#, replace

有：

```
"a__b_c_____d__e_f__" 
```

需要：

```
"a_b_c_d_e_f_" 
```

即：将所有`"___"`子字符串（1 个或多个下划线）替换为`"_"`（单个下划线）*而不使用循环*。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-23T20:04:33.907

使用正则表达式，例如

```
var input = "a__b_c_____d__e_f__";
var output = Regex.Replace(input, "_+", "_"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T20:05:28.560

您可以通过使用正则表达式来实现这一点，如下所示

```
string str = "a__b_c_____d__e_f__";
string newStr = System.Text.RegularExpressions.Regex.Replace(str, "_{2,}", "_"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T20:06:50.103

```
 var cleanString = Regex.Replace("a__b_c_____d__e_f__", "(_)+", "$1"); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-23T20:17:49.783

有几种方法可以解决这个问题，但我有点不确定你所说的“没有循环”是什么意思......

显然你可以使用一个循环，例如：

```
while (myString.contains("__"))
    myString.replace("__", "_"); 
```

我认为虽然这就是你所说的你试图避免的......但问题是，我不相信有一个不涉及循环的解决方案。.contains 方法和 .replace 方法都在其实现中使用循环。为了澄清，以下代码也可以工作：

```
string outputStr = "";
bool underscore = false;
for(int i = 0; i < myString.length; ++i)
{
    if (myString[i] == '_')
    {
        if (underscore == false)
            outputStr += myString[i];
        underscore = true;
    }else outputStr += myString[i];
} 
```

如您所见，这只使用了一个循环。虽然这更有效，（如果效率是一个问题，您可能希望使用 StringBuilder 而不是字符串作为 outputStr 变量）关键是如果您需要查看字符串，您将不得不使用循环，无论是您编写循环还是调用其他为您执行此操作的方法。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-23T20:03:04.493

这应该让你开始。

```
cat file | perl -e "s/\_+/\_/g" 
```

# c# - PHP 文件未收到 $_POST

> ID：11619620
> 
> 赞同：0
> 
> 时间：2012-07-23T20:01:15.537
> 
> 标签：c#, php, validation

我的 C# 代码有问题，该代码从登录表单发布数据以在 PHP 页面上进行验证。

在我的开发页面上，它工作正常，但是当我切换到生产页面时，它停止工作。（两个网页位于同一台服务器上）。

我的登录页面（开发）如下所示：

```
$user = DB_Login($_POST["username"], $_POST["password"]);
if (!is_null($user))
{
SetLoginCookies($user["userID"], $user["sessionID"]);
echo "valid";
}
else
echo "invalid"; 
```

我的生产页面如下所示：

```
$responseArray = DB_Login($_POST["username"], $_POST["password"]);

if (is_null($responseArray))
{
    die("invalid");
} 
```

它非常相似，但我不明白为什么我的生产页面从不接收 POST 变量，它总是死掉。

我的 C# 代码（其中任一页面）如下所示：

```
private void Login_Click(object sender, RoutedEventArgs e)
    {
        string sendData = "";
        Uri site = new Uri("site");
        WebClient wc = new WebClient();
        wc.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded";
        sendData += "username=" + usrname.Text;
        sendData += "&password=" + pword.Password;
        wc.Headers[HttpRequestHeader.ContentLength] = sendData.Length.ToString();
        wc.UploadStringCompleted += new UploadStringCompletedEventHandler(wc_UploadStringCompleted);
        wc.UploadStringAsync(site, "POST", sendData);
    }

    private void wc_UploadStringCompleted(object sender, UploadStringCompletedEventArgs e)
    {
        if (e.Result.Equals("invalid"))
        {
            return;
        }
        else
        {
            MessageBox.Show(e.Result.ToString());

            //Navigate to next page
            NavigationService.Navigate(new Uri("/ControlPanel.xaml", UriKind.Relative));
        }
    } 
```

有任何想法吗？

更新：

DB_Login 函数如下所示：

```
function DB_Login($username, $password)
{
$password = md5($password);
$username = mysql_escape_string($username);

$request = DB_ExecuteQuery("SELECT userID, isAdmin
    FROM accounts
    WHERE username = '$username' AND password = '$password'");
if ($request->num_rows == 0)
    return NULL;

$requestArray = $request->fetch_array();

$response = array("userID" => $requestArray["userID"]);
$response["sessionID"] = mysql_escape_string(generateGuid());
$response["isAdmin"] = $requestArray["isAdmin"];

DB_ExecuteQuery("UPDATE accounts
    SET sessionID = '". $response['sessionID'] ."'
    WHERE userID = ". $response['userID']);

DB_SetLastLogin($requestArray['userID']);

return $response;
} 
```

var_dump($_POST["username"], $_POST["password"]) 的结果是 NULL 和 NULL。

更新2：

$print_r($_SERVER) 的结果：

```
Array (
  [SCRIPT_URL] => /phone/windowsphone/driverDetails.php
  [SCRIPT_URI] => https://www.xxxxx.com/phone/windowsphone/driverDetails.php 
  [MvCONFIG_FLAGS_SECURITY] => 15
  [MvCONFIG_DIR_MIVA] => /home/sites/home/miva
  [MvCONFIG_DIR_DATA] => /home/sites/home/mivadata
  [MvCONFIG_DIR_BUILTIN] => /home/miva/builtins
  [MvCONFIG_DIR_CA] => /home/miva/certs
  [MvCONFIG_DIR_BUILTIN] => /home/miva/builtins
  [MvCONFIG_DIR_CA] => /home/miva/certs
  [MvCONFIG_SSL_CRYPTO] => /lib/libcrypto.so.4
  [MvCONFIG_SSL_OPENSSL] => /lib/libssl.so.4
  [MvCONFIG_DATABASE_MivaSQL] => /home/miva/databases/mivasql.so
  [MvCONFIG_DATABASE_mysql] => /home/miva/databases/mysql.so
  [MvCONFIG_COMMERCE_AuthorizeNet] => /home/miva/commerce/authnet-v5.06-linux_glibc2.so
  [MvCONFIG_COMMERCE_CyberCash] => /home/miva/commerce/cybercash_de-v5.03-linux_glibc2.so
  [MvCONFIG_COMMERCE_ICS2] => /home/miva/commerce/ics2-v5.06-linux_glibc2.so
  [MvCONFIG_COMMERCE_LinkPoint] => /home/miva/commerce/linkpoint-v5.06-linux_glibc2.so
  [MvCONFIG_COMMERCE_UPSRSS] => /home/miva/commerce/upsrss-v5.03-linux_glibc2.so
  [MvCONFIG_LIBRARY] => /home/miva/config/env.so
  [HTTPS] => on
  [HTTP_HOST] => www.xxxxx.com
  [HTTP_CONNECTION] => keep-alive
  [HTTP_CACHE_CONTROL] => max-age=0
  [HTTP_USER_AGENT] => Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.57 Safari/536.11
  [HTTP_ACCEPT] => text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
  [HTTP_ACCEPT_ENCODING] => gzip,deflate,sdch
  [HTTP_ACCEPT_LANGUAGE] => en-GB,en-US;q=0.8,en;q=0.6
  [HTTP_ACCEPT_CHARSET] => ISO-8859-1,utf-8;q=0.7,*;q=0.3
  [HTTP_COOKIE] => ow-autologin=0; ow-loginname=whaxi; ow-default_logindomain=www.xxxxx.com; ow-httpcompress=1
  [PATH] => /sbin:/usr/sbin:/bin:/usr/bin:/usr/X11R6/bin
  [SERVER_SIGNATURE] => Apache Server at www.xxxxx.com Port 443
  [SERVER_SOFTWARE] => Apache
  [SERVER_NAME] => www.xxxxx.com
  [SERVER_ADDR] => 11.22.33.44
  [SERVER_PORT] => 443
  [REMOTE_ADDR] => 44.33.22.11
  [DOCUMENT_ROOT] => /home/.sites/28/site1/web
  [SERVER_ADMIN] => admin
  [SCRIPT_FILENAME] => /home/.sites/28/site1/web/phone/windowsphone/driverDetails.php
  [REMOTE_PORT] => 16199
  [GATEWAY_INTERFACE] => CGI/1.1
  [SERVER_PROTOCOL] => HTTP/1.1
  [REQUEST_METHOD] => GET
  [QUERY_STRING] =>
  [REQUEST_URI] => /phone/windowsphone/driverDetails.php
  [SCRIPT_NAME] => /phone/windowsphone/driverDetails.php
  [PHP_SELF] => /phone/windowsphone/driverDetails.php
  [REQUEST_TIME] => 1343076397
  [argv] => Array ( )
  [argc] => 0
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-25T11:27:00.330

```
UploadStringAsync 
```

函数将字符串作为 RAW 数据发送，在 $_POST 数组中看不到，php 代码使用

```
file_get_contents('php://input') 
```

接收它，或者在 C# 中使用

```
NameValueCollection reqparm = new NameValueCollection();
reqparm.Add("username", "asd");
reqparm.Add("pass", "smthg");
...
wc.UploadValues(this.url, "POST", this.reqparm); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T21:07:00.287

嗯，我认为您应该在标题中获取 POST 方法，而不是获取 GET 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-29T21:04:52.217

尝试寻找

```
method="post" 
```

在您的`<form>`标签或其他任何内容中。如果你看到类似...

```
method="get" 
```

... 那是你的问题。更改发布方式。

# javascript - 如何使画布中的对象无法选择？

> ID：11619626
> 
> 赞同：12
> 
> 时间：2012-07-23T20:01:37.903
> 
> 标签：javascript, canvas, fabricjs

我想让画布中的所有对象都无法选择。我找到了[可选择](http://fabricjs.com/docs/symbols/fabric.Object.html#selectable)的方法，但我没有找到将它实施到所有对象的方法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2019-04-09T17:45:58.963

我一直在寻找一个**不可移动**和**不可编辑**的Fabric Text，我终于找到了一个结合了几个 SO 的解决方案，希望我可以节省一些时间。

在我的情况下，使用*"selectable": false*是不够的：文本仍然是可编辑的，光标仍然是“可移动光标”（即使对象不可选择）。

我不得不添加**"evented": false**。这是一个例子：

```
this.canvas.add(new fabric.Text("Hello world !", {
            "selectable": false,
            "evented": false
})); 
```

您可以在此处使用不同的控制选项：http: [//fabricjs.com/controls-customization](http://fabricjs.com/controls-customization)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-02-17T09:46:11.167

您可以使用以下代码使所有元素无法选择

```
canvas.deactivateAll();
canvas.renderAll();
canvas.forEachObject(function(object){ 
       object.selectable = false; 
}); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-07-02T07:27:43.460

选项中有这样的方法-

```
selectable: false

      or 

object.set({selectable:false})

      or

 object.selectable = false; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-18T09:38:46.523

在父 HTML 元素上使用 css 属性`pointer-events`：

```
.locked {
    pointer-events: none;
} 
```

要从 javascript 设置此属性：

```
let canvasElement = document.getElementsByClassName("canvas-container")[0]
canvasElement.classList.add("locked") 
```

解锁画布：

```
canvasElement.classList.remove("locked") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-10T12:44:16.133

```
canvas._objects.forEach(obj => {obj.selectable = false;});
canvas.discardActiveObject(); 
```

这应该可以解决问题！`discardActiveObject`应该触发请求重新渲染的事件，因此您不需要手动调用`renderAll`. 通常，您应该始终使用`requestRenderAll`而不是`renderAll`.

# c# - 如何动态创建实体？

> ID：11619630
> 
> 赞同：0
> 
> 时间：2012-07-23T20:01:45.987
> 
> 标签：c#, asp.net, wpf, asp.net-mvc, silverlight

如何动态创建实体？（在 SQL Server 中有自己的表）与 Microsoft Dynamics CRM 相同或相似...

并且可由服务 oData 使用（例如）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T14:43:16.983

MS CRM（或类似的大型应用程序，如 Sharepoint）不使用“普通”数据层 - 实际 SQL 表，其字段对应于类和属性 1:1。他们总是使用某种“数据抽象层”，通过大量使用元数据来支持这种事情（比如新的用户创建的实体）——他们实际上使用的表更像是“描述”虚拟实体，这些虚拟实体被分解和非规范化等.

好的提示：不要尝试自己写这样的数据层，试着找一个。比如开源的CMS Orchard就有一个，你看看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:08:46.067

考虑查看[这篇关于 Entity Framework Code First 方法](http://msdn.microsoft.com/en-us/magazine/hh126815.aspx)的文章，这应该让你开始。我并不是在提倡您使用实体框架，但它会让您了解事情是如何发展的。

# java - 授予多个代码库的权限

> ID：11619631
> 
> 赞同：4
> 
> 时间：2012-07-23T20:01:59.337
> 
> 标签：java, security

是否可以为不相关的代码库授予相同的权限（例如，我不能使用通配符）？

例如我有以下权限配置：

```
grant codebase "file:/somepath1/code.jar" {
  permission my.class.Permission1;
  permission my.class.Permission2;
  permission my.class.Permission3;
}; 
```

我想将相同的权限集也授予`/somepath2/code2.jar`和 to `path3/code3.jar`。

是否可以与单一授权部分有关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:21:33.043

据我所知，有两种方法可以实现您的愿望：
1\. 用一些证书为您的罐子唱歌，然后使用：

```
grant signedBy "Duke" {
       permission my.class.Paermission1;
}; 
```

“Duke”是 tye 密钥库中证书的别名。

2.将你的罐子重新组织到文件夹中，然后使用：

```
grant codeBase "file:/somepath/subpath1/-" {
      permission my.class.Paermission1;
}; 
```

“/-” 匹配目录中的所有文件（类和 JAR 文件）并递归匹配该目录中包含的子目录中的所有文件

检查此以获取详细信息[PolicyFiles](http://docs.oracle.com/javase/6/docs/technotes/guides/security/PolicyFiles.html#FileSyntax)

# sql - 如何使用连接限制查询结果？

> ID：11619637
> 
> 赞同：2
> 
> 时间：2012-07-23T20:02:23.950
> 
> 标签：sql

我的数据库中有两个表：

*类别*

```
id
category
message 
```

*消息*

```
id
title
message 
```

我正在尝试使用它们的类别检索两条消息。每条消息都可以有多个类别。我尝试过以下查询：

```
SELECT categories.category, messages.id, messages.title, messages.message
FROM categories
RIGHT JOIN messages
ON messages.id = category.message
ORDER BY messages.id DESC
LIMIT 2
OFFSET 0 
```

输出类似于：

```
category   id   title        message
test-cat   1    Test title   This is the message body
category2  1    Test title   This is the message body 
```

但是，此查询仅产生两行（因为检索到的消息具有多个类别）。如何限制消息数量而不是类别数量？所以结果是这样的：

```
category   id   title        message
test-cat   1    Test title   This is the message body
category2  1    Test title   This is the message body
test-cat   2    Another msg  This is content
test-cat2  2    Another msg  This is content
something  2    Another msg  This is content 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T20:04:52.850

将限制放在子查询中：

```
SELECT categories.category, m.id, m.title, m.message
FROM categories RIGHT JOIN
     (select *
      from messages
      ORDER BY messages.id DESC
      limit 2
     ) m
     ON m.id = categories.message
ORDER BY m.id DESC 
```

# c# - 在静态方法和静态事件处理程序之间共享数据

> ID：11619638
> 
> 赞同：0
> 
> 时间：2012-07-23T20:02:30.383
> 
> 标签：c#, .net, event-handling

我有一个验证某些 XML 的静态方法。为了验证 XML 并且不停止错误，它需要有一个静态回调 ValidationEventHandler 来处理错误事件（如果您不注册回调，任何错误都会引发异常并停止验证）。

因此，在此 ValidationEventHandler 中，您可以处理任何验证错误。静态验证方法读取 XML，对于任何错误事件，都会调用事件处理程序。

我的问题是，静态验证方法需要返回一个 bool 标志来指示是否有任何错误，以及一个包含错误列表的输出参数字符串。但是由于错误处理是在 ValidationEventHandler 中完成的，它必须是静态的，因为验证方法是静态的，我如何保持事件处理程序中发生的错误的运行列表？

如果这些不是静态的，我只需创建一个实例变量来保存一个错误标志和一个错误字符串，但我不知道如何将数据从静态事件处理程序传递到一个静态方法，该方法执行导致该处理程序发生的事件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:17:38.850

如果我理解正确，您可以通过几种不同的方式来做到这一点

第一种方法是创建一个静态属性：

```
static bool HasErrors { get; set; }

void HandleErrorEvent(object sender, EventArgs e)
{
    HasErrors = true;
    // ... your logic here
} 
```

另一个选项（这取决于您是否有权访问事件代码）是创建一个自定义`EventArgs`类

```
public ExceptionEventArgs : EventArgs
{
    public bool HasErrors { get; private set; }
    // Anything you else you want, like a list of error strings etc...
}

void HandleError(object sender, ExceptionEventArgs e)
{
    e.HasErrors = true;
    // ... your logic here
}

void Validate()
{
    var eventArgs = new ExceptionEventArgs()
    OnHandleError(this, eventArgs);
    if(eventArgs.HasErrors)
        // do something special
} 
```

# ios - 写入 XCode 项目目录中的文件

> ID：11619639
> 
> 赞同：0
> 
> 时间：2012-07-23T20:02:39.177
> 
> 标签：ios, file, directory, save

我有一个包含在我的 XCode 项目中的文件，我想覆盖它。该文件在名为 book 的目录中名为 Introduction.html

在屏幕截图中，您可以看到它在目录中的位置以及我对它的各种写入尝试。

![在此处输入图像描述](../Images/1b7301f9154b7ac9789b8907ce344140.png)

任何帮助都会非常感谢！

*编辑*我的代码在图片中不是那么可读：

```
 //Atempt 1
NSString *myString = [mutableArray objectAtIndex:0];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *path = [documentsDirectory stringByAppendingPathComponent:@"/book/Introduction.html"];
[myString writeToFile:path atomically:YES encoding:NSUTF8StringEncoding error:&error];

//Attempt 2
[myString writeToFile:@"/book/Introduction.html" atomically:NO encoding:NSUTF8StringEncoding error:&error];

//Attempt 3
NSArray *paths2 = NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES);
NSString *docDir = [paths2 objectAtIndex: 0];
NSString *docFile = [docDir stringByAppendingPathComponent: @"book/Introduction.html"];    
[myString writeToFile: docFile atomically:NO encoding:NSUTF8StringEncoding error:&error];

//Attempt 4
NSFileHandle *file;
NSMutableData *data;
const char *bytestring = "black dog";    
data = [NSMutableData dataWithBytes:bytestring 
                             length:strlen(bytestring)];
file = [NSFileHandle fileHandleForUpdatingAtPath: 
        @"book/Introduction.html"];
if (file == nil)
    NSLog(@"Failed to open file");
[file seekToFileOffset: 10];
[file writeData: data];
[file closeFile];
[file release]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T05:42:22.557

伊贾瓦，

据我阅读文档，“在我的 XCode 项目中”的文件不能被覆盖，因为 iOS 中的沙盒机制不允许您的应用访问该空间。我记得读过指令“如果您需要覆盖应用程序附带的数据，请将它们复制到 Documents 目录并覆盖副本。”

所以我会说你的尝试 1 最接近，保存你需要先将文件从资源包复制到 Documents 目录的事实。

问候，诺比

# java - Java/Android：同步与队列实现

> ID：11619641
> 
> 赞同：1
> 
> 时间：2012-07-23T20:02:50.167
> 
> 标签：java, android, synchronization, queue, synchronized

我可以问一个菜鸟 Java 问题吗？

我正在从网上下载一些文件。此方法下载（网址位置）被多次调用。

```
public static void download(final String url) {
    Thread t = new Thread("download") {
        @Override
        public void run() {
            try {
                synchronized (object) {
                    // download & save
                }
            } catch(Exception e) {}
        }
    };
    t.start();
} 
```

我添加了“同步”，以便一个接一个地进行下载。（不会同时发生多个下载）。
我猜即使 download() 被多次调用，同步也会阻塞其他线程，直到第一个线程完成。

上面的代码会起作用吗？还是我必须实施队列？并一对一出队？
同步可以阻塞“足够”的线程吗？（30？50？）还是有限制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T09:52:38.960

这是如何做到的：

```
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public class QueueDownloader {
    private final ExecutorService executor = Executors.newSingleThreadExecutor();
    public void download(final String url) {
        executor.execute(new Runnable() {
            @Override
            public void run() {
                // download & save
            }
        });
    }
} 
```

这将在单个后台线程上排队所有可运行文件（即下载）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T20:04:46.810

> ***上面的代码会起作用吗？***

是的，只要`object`在所有线程中引用同一个对象，同步块中的代码一次只会被一个线程执行。

> ***[...] 还是我必须实施队列？并一对一出队？***

一般来说，我建议您尽可能使用高级构造（例如来自 java.util.concurrent 包）。例如，您可以考虑为这些类型的事情使用执行器服务。

> ***[...] 可以同步阻塞“足够”的线程吗？（30？50？）还是有限制？***

不，没有限制。至少不接近 30 或 50 :-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T20:24:57.200

如果可以避免创建额外的线程，通常应该这样做。据我了解，您永远不希望两个工作项（下载）并行，因此从性能角度来看，最好的想法是使用由单个工作线程轮询的并发队列实现。

# c# - 拆分容器，Panel2Collapsed = True，Tabbing 不起作用

> ID：11619646
> 
> 赞同：1
> 
> 时间：2012-07-23T20:03:14.667
> 
> 标签：c#, winforms, visual-studio-2008

当我将 panel2Collapsed 设置为 true 时，表单上的选项卡停止工作，并且它保持专注于作为拆分控件一部分的 panel2。

使用 ctrl+tab 可以通过相反的方式返回控件，但通常选项卡循环会在表单上的最后一个控件之后循环到第一个控件。

在查看 actve 控件时，它侧重于：

```
-----System.Windows.Forms.SplitterPanel, BorderStyle: System.Windows.Forms.BorderStyle.None NAME: 
```

并且选项卡不会移过这个，我一直在考虑通过使用强制选择下一个控件

`SelectNextControl`运气不好的方法！

# extjs - ext js 获取带有模型验证错误的修改记录

> ID：11619648
> 
> 赞同：1
> 
> 时间：2012-07-23T20:03:20.547
> 
> 标签：extjs, datastore

我想从 ext js 数据存储中获取修改的、新的或删除的记录，问题是无论记录被标记为幻影，在 getModifiedRecord 或 dataStore 的 getRemovedRecords 方法中都不会返回带有模型验证错误的记录。有什么方法可以返回这些记录吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:29:50.577

您可以添加自己的状态。例如，如果您创建、编辑、删除了一条记录，您可以设置一个新的记录属性。

```
myRecord.set('modified', true); 
```

您现在可以获取所有记录并检查该属性。

```
store.getRange(); 
```

如果需要，您可以添加单独的状态。

```
myRecord.set('state', 'new');
myRecord.set('state', 'modified'); 
```

对于已删除的记录，您可能希望将其推送到数组中，因为您无法将其放入存储中（我猜）。

```
var deletedRecords = [];

deletedRecords.push(myRecord); 
```

希望能帮助到你。

# jquery - 在 IE7 和 IE8 的 IE 兼容性视图中无法正确加载，在所有其他浏览器中正常

> ID：11619654
> 
> 赞同：1
> 
> 时间：2012-07-23T20:03:52.013
> 
> 标签：jquery, internet-explorer-8, internet-explorer-7, ie8-compatibility-mode

站点在包括 IE9 在内的所有浏览器中都能正确加载/显示，但当我打开 IE7 和 IE8 的兼容性视图时却没有。在主页 (http://www.adrtimes.com) 上，文章、新闻和媒体栏的顶部框没有加载到内容中（使用 jquery 从另一个页面加载内容）——我不知道可能是什么问题。如果有人能看到问题所在，我将不胜感激！

```
<script type="text/javascript">
<!--

$(function(){ 

/* Home */
/* load most recent article */
$("#modulePage11493926 #LoadRecentArticles").load("/articles/category/articles .list-journal-entry-wrapper .journal-entry-wrapper:first:not(.category-video)", function(){ 
  //callback...
  $("#LoadRecentArticles .journal-entry-wrapper").wrapAll('<div class="list-journal-entry-wrapper" />');
});

/* load most recent news */
$("#modulePage11493926 #LoadRecentHotlinks").load("/articles/category/hotlinks .list-journal-entry-wrapper .journal-entry-wrapper:first:not(.category-video)", function(){ 
  //callback...
  $("#LoadRecentHotlinks .journal-entry-wrapper").wrapAll('<div class="list-journal-entry-wrapper" />');
});

/* load most recent media */
$("#modulePage11493926 #LoadRecentVideos").load("/articles/category/media .list-journal-entry-wrapper .journal-entry-wrapper:first", function(){ 
  //callback...
  $("#LoadRecentVideos .journal-entry-wrapper").wrapAll('<div class="list-journal-entry-wrapper" />');
});

}); 
-->
</script> 
```

奇怪的是，内容没有加载到主页上，但是在这些加载功能之前和之后的所有 jquery 其余部分都可以正常工作。有时当我转到其中一个文章页面时，它需要永远加载，有时会说由于脚本运行时间长而无法加载。有时它不会说是什么脚本导致了问题，有时它说它是 jquery 库脚本 - 但是当我单击停止脚本按钮时，页面加载正常并且 jquery 加载正常。

# sql - 您如何从对查询的回复中检查条件？

> ID：11619655
> 
> 赞同：0
> 
> 时间：2012-07-23T20:03:52.320
> 
> 标签：sql, tsql, coldfusion

`agencyType_ID`如果表中是 2 ，我需要密件抄送某人`company`。我该怎么做？到目前为止我有

```
<cfquery name="checkAgencyType" datasource="#APPLICATION.primaryDSN#">
    SELECT * FROM company WHERE agencyType_ID=2
</cfquery> 
```

在里面`<cfmail>`我会有

```
<cfif query=”checkAgencyType”&gt;bcc=”joe@example.com”&gt;</cfmail> 
```

编辑：我应该提到我已经可以使用 to 和 cc 字段发送邮件，所以我宁愿不重构一堆代码。但大多数回复似乎不需要这个:-)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T21:02:53.943

我会使用属性集合参数。它允许您将属性作为结构传递给标记。通过这种方式，您可以定义静态属性，然后动态添加任何其他属性。只要属性键名称匹配，它们就会被传递给标签。

```
<cfset args = {
    from = "from@gmail.com",
    to = "to@gmail.com",
    subject = "My Subject",
    type = "HTML"
}>

<cfif checkAgencyType.agencyType_ID EQ 2>
    <cfset args.bcc = "joe@example.com">
</cfif>

<cfmail attributeCollection="#args#">
    content...
</cfmail> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T20:11:19.977

你在正确的轨道上，你只想将它设置为一个变量。

```
<cfset bccaddress = '' />
<cfif checkAgencyType.RecordCount>
  <cfset bccaddress = 'joe@example.com' />
</cfif> 
```

这假设通过在您的查询中返回一条记录，您想要添加一个密件抄送地址。

然后通过使用将其包含在您的标签中`<cfmail to="test@address.com" from="test2@address.com" subject="My subject" bcc="#bccaddress#">`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T20:11:46.703

您可以使用“inline if”来检查查询的结果，如果找到，则设置电子邮件地址。否则，它将 bcc 属性设置为空白。

```
<cfmail
  subject="Subject"
  from="you@example.com"
  to="customer@example.com"
  bcc="#iif(checkAgencyType.recordCount, de('joe@example.com'), de(''))#"
>
  This is a cool message.
</cfmail> 
```

# monomac - 在 monomac 中重新创建 NSApplication.Main

> ID：11619656
> 
> 赞同：1
> 
> 时间：2012-07-23T20:04:00.137
> 
> 标签：monomac, nsapplication

我正在尝试在我的应用程序中重新创建 nsapplication.main。我想让我的应用程序按照我的方式做很多事情，而不是自动做我不想要的事情。我想我是一个代码控制狂。可悲的是， NSEvent E 始终为空，我错过了什么？感谢您的帮助：D

```
NSApplication.Init ();
using (var p = new NSAutoreleasePool ()) {
NSApplication.SharedApplication.Delegate = new AppDelegate ();
NSApplication.SharedApplication.FinishLaunching();
NSEvent E
do{
        E=NSApplication.SharedApplication.NextEvent(NSEventMask.AnyEvent,NSDate.DistantFuture,NSRunLoop.NSDefaultRunLoopMode,true);
NSApplication.SharedApplication.SendEvent(E);
NSApplication.SharedApplication.UpdateWindows();
}while(true);
} 
```

# python - 用 Python 做音乐笔记

> ID：11619657
> 
> 赞同：3
> 
> 时间：2012-07-23T20:04:04.160
> 
> 标签：python

我有一个项目用 python3 制作一种音乐合成器。我必须使用股票数据中的数字，并使用我的音乐类创建一个播放器文件和一个文件，该文件将使用我的播放功能将音符输出到 .rra 文件。

m.play(D,3,2) 在第三个八度音阶中播放 D 2 拍。

我仍然很困惑我的播放功能将如何工作。为了以八度音阶演奏某个音符，我假设只要该音符应该演奏，我就会附加库存数据编号。我很困惑如何将其输入代码。

# 任何帮助或提示将不胜感激。

这是我的音乐类文件和播放器文件的骨架：

我会用命令播放它：“python3 player.py stock.dat | aplay”

## 音乐.py

课堂音乐：

```
def __init__(self, infile):

    self.infile = infile
    self.beats = 4
    self.list = []
    fp = open(infile, 'r')
    for line in fp:
        self.list.append(eval(line))
    pass

def set_beat(self, x):
    self.beats = x

def header(self):
    print("RRA\n%%\n")

def play(self, note, octave, beats):
    pass

def __str__(self):
    s = "infile" + self.infile + ", Beats:" + self.beats 
```

* * *

## 播放器.py

```
import sys
from music import Music

def main():

m = Music(sys.argv[1])

m.set_beat(0.25) # one beat is 0.25 seconds

m.header() #output the audio header

m.play("C",3,1) # play C in octave 3 for one beat

m.play("D",3,2) # play D in octave 3 for two beats

main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T16:12:12.247

为什么是 RRA 格式？

我做过类似的工作，但在内部主要使用 MIDI 格式。

播放 MIDI 文件的示例程序在[这里](https://github.com/albertz/learn-midi/blob/master/playmidi.py)。在函数`midievents_to_rawpcm`（定义[在这里](https://github.com/albertz/learn-midi/blob/master/decode.py)）中，我使用流体合成器进行合成。

[这里有一个接受键盘输入并将它们解释为钢琴键的](https://github.com/albertz/learn-midi/blob/master/keyboard-player.py)示例程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T22:32:05.910

命令：“python3 player.py stock.dat | aplay”表示您希望将文件流式传输到 aplay 实用程序，即 ALSA 声卡驱动程序的音频播放器。没有任何选项，输入默认为 U8 格式。

[aplay 手册页](http://linux.die.net/man/1/aplay)

我找不到有关此类文件格式的任何详细信息，但这就是您应该开始的地方。如果允许您为 aplay 选择一些选项（通过在命令行末尾添加 -options），那么您可能会找到一种更容易使用的格式。

您的项目的基本思想是采用一种您的教师毫无疑问指定的“MIDI”格式，其中给出了音符和节拍等，并以标准格式输出原始声音文件。您应该注意到类似 Midi 的压缩格式是一个小得多的文件。

# python - Python - 将字符串分成两列

> ID：11619660
> 
> 赞同：0
> 
> 时间：2012-07-23T20:04:14.437
> 
> 标签：python, string, collections

假设我有这个字符串：

```
"""line1
line2
line3
line4
line5
line6
line7
line8""" 
```

我想编写一个函数将其拆分为由单个字符串表示的两个大小相等的列，如下所示：

```
"""line1 line5
line2 line6
line3 line7
line4 line8""" 
```

我可以像这样将字符串分成两部分： s1,s2 = s[:len(s)//2], s[len(s)//2:]

但后来我不确定如何将它们结合起来......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T20:09:29.017

```
s='''line1
line2
line3
line4
line5
line6
line7
line8'''

lines=s.split()
halflen = len(lines)/2
columns = '\n'.join(' '.join((lines[x],lines[x+halflen])) for x in range(halflen)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T20:19:17.590

如果你先分成几行会更容易。

```
lines = s.splitlines()
s1, s2 = lines[:len(lines) // 2], lines[len(lines)//2:]
"\n".join(map(" ".join, zip(s1, s2))) 
```

这适用于偶数行。当行数为奇数时，使用`itertools.izip_longest`代替`zip`和

```
def join(s1, s2):
    return s1 if s2 is None else " ".join((s1, s2)) 
```

而不是`" ".join`（如果你喜欢神秘的oneliners，你可以内联它）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T20:08:33.397

拿走你所拥有的，然后：

```
>>> s ="""line1
line2
line3
line4
line5
line6
line7
line8"""
>>> s1, s2 = s[:len(s)//2], s[len(s)//2:]
>>> '\n'.join([' '.join(x) for x in zip(s1.split('\n'),s2[1:].split('\n'))])
'line1 line5\nline2 line6\nline3 line7\nline4 line8' 
```

讨厌的单线，但这是基本前提，只需`zip`将序列项目配对，然后您就可以`join`将它们重新组合在一起。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T20:08:38.093

这将使它们井然有序：

```
string= string.split('\n')
string2= ""
for line in string:
    string2= string2 + line + " " 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T20:11:54.437

假设您有偶数行并且两者`s1`的`s2`大小相同，您可以将它们组合如下：

```
lines = [s1[index] + ' ' + s2[index] for index, val in enumerate(s1)]
'\n'.join(lines) 
```

您也可以连接这两个步骤，但为了清楚起见，我将它们分开。

如果您的字符串长度不同，您将需要添加一些条件，它会变得有点混乱。

# makefile - 在 iOS 应用程序中嵌入 libclang

> ID：11619662
> 
> 赞同：17
> 
> 时间：2012-07-23T20:04:17.723
> 
> 标签：makefile, static-libraries, llvm, clang

我需要在 iOS 应用程序中使用[libclang](http://clang.llvm.org)（用于诊断和语法突出显示），但我似乎无法弄清楚如何按原样构建它，更不用说 iOS 了。使用 CMake 我为 LLVM 生成了一个 Xcode 项目，但是 Xcode 用完了用于交换的内存和磁盘空间（总共 25GB！）并且在打开项目时崩溃了。我需要从中获取一个静态库，然后我可以手动导入标题，这应该不是问题。我需要运行什么 configure/make/cmake 命令 [组合]？

注意：如果有任何区别，我只需要 Index.h 文件中的函数。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T03:34:58.133

我创建了一系列用于构建 clang 的文章。

*   [llvm / Clang hacking - 第 1 部分](http://aussiebloke.blogspot.com/2012/06/llvm-clang-hacking-part-1.html)
*   [llvm / Clang hacking - 第 2 部分](http://aussiebloke.blogspot.com/2012/06/llvm-clang-hacking-part-2.html)
*   [llvm / Clang hacking - 第 3 部分](http://aussiebloke.blogspot.com/2012/06/llvm-clang-hacking-part-3.html)

您将面临一些针对 iOS 的额外挑战，但这将是一个起点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T11:31:05.210

生成简单的makefile而不是os Xcode项目，然后使用make构建？

使用这个来配置 cmake/make build 为 iOS 构建： [如何让 Cmake 在最终编译阶段而不是检测时使用特定的编译器和标志？](https://stackoverflow.com/questions/6476203/how-can-i-make-cmake-use-specific-compiler-and-flags-when-final-compilation-stag)

# coding-style - if else 条件更好的写作方式

> ID：11619663
> 
> 赞同：1
> 
> 时间：2012-07-23T20:04:19.993
> 
> 标签：coding-style

代码是这样运行的，随着代码的增加它变得不可读

```
if(!cond1){
    //print error
}else{
        if(!cond2){
          // print error
        }else{
               //code goes on.....
             }
     } 
```

编写上述代码的替代方法将非常有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T20:13:40.183

根据复杂性，您可能会考虑将条件分解为它们自己的功能，然后重组为以下内容：

```
if (!f1() && !f2() ... ){
    ...
} 
```

然后让每个单独条件的函数处理该特定错误，而不是将顶级函数弄乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:12:02.373

这通常使用[保护子句](http://c2.com/cgi/wiki?GuardClause)而不是嵌套或链接`if`的 s 来处理：

```
if (! cond1)
    throw error 1;
if (! cond2)
    throw error 2;

perform action; 
```

请注意，这假定函数实际上在出错时*返回*，否则这将导致错误行为。但是，这是*推荐*的。一般来说，不要尝试在遇到错误时恢复操作，尽快将控制权交给应用程序逻辑中的更高级别。

特别是，“打印错误”方面应该几乎（？）*总是*与实际逻辑脱节——否则你就违反了[单一责任原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)。

因此，当检测到错误条件时，让执行逻辑的函数提前退出，并让其他函数负责打印这些错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T20:09:07.370

如果您使用块来执行真实条件，则更容易理解/调试。这是因为当*某事为真*时，其条件比某事*不*为真时更为狭窄。

```
if (cond1){

}else if (cond2){

}else{

} 
```

# c - 通过串口发送文件

> ID：11619664
> 
> 赞同：3
> 
> 时间：2012-07-23T20:04:22.460
> 
> 标签：c, linux, file, serial-port

我需要一些帮助来通过串行连接发送文件。我有两根 RS232 转 USB 电缆，我正在测试我的代码，使用一根发送数据，另一根接收数据。我让它们在物理上相互连接。

所以我写了一些改编自几个来源的代码，我可以成功传输一系列字符。一个程序接收数据，另一个程序发送数据。我在两个单独的终端中打开了这两个。找到下面的两个代码块：

**串行输出.c**

```
#include <stdio.h>   /* Standard input/output definitions */
#include <string.h>  /* String function definitions */
#include <unistd.h>  /* UNIX standard function definitions */
#include <fcntl.h>   /* File control definitions */
#include <errno.h>   /* Error number definitions */
#include <termios.h> /* POSIX terminal control definitions */

int main()
    {
            //writing
            int writeport = open_port("/dev/ttyUSB0");

            char str[] = "hello how are you?";
            int n = write(writeport, str, strlen(str));
            if (n < 0)
                    fputs("write() of bytes failed!\n", stderr);

            //closing ports
            close(writeport);
    }

    int open_port(char str[])
{
    int fd = open(str, O_RDWR | O_NOCTTY | O_NONBLOCK); // ?? NDELAY or NONBLOCK?

  if (fd == -1)
  {
                    perror("open_port: Unable to open /dev/ttyS0 - ");
  }
  else
                    fcntl(fd, F_SETFL, 0);

      struct termios options;
      tcgetattr(fd, &options); //this gets the current options set for the port

      // setting the options

      cfsetispeed(&options, B9600); //input baudrate
      cfsetospeed(&options, B9600); // output baudrate
      options.c_cflag |= (CLOCAL | CREAD); // ?? enable receicer and set local mode
      //options.c_cflag &= ~CSIZE; /* mask the character size bits */
      options.c_cflag |= CS8;    /* select 8 data bits */
      options.c_lflag &= ~(ICANON | ECHO | ECHOE | ISIG); // choosing raw input
      options.c_iflag &= ~INPCK; // disable parity check
      options.c_iflag &= ~(IXON | IXOFF | IXANY); // disable software flow control
      options.c_oflag |= OPOST; // ?? choosing processed output
      options.c_cc[VMIN] = 0; // Wait until x bytes read (blocks!)
      options.c_cc[VTIME] = 0; // Wait x * 0.1s for input (unblocks!)

      // settings for no parity bit
      options.c_cflag &= ~PARENB;
      options.c_cflag &= ~CSTOPB;
      options.c_cflag &= ~CSIZE;
      options.c_cflag |= CS8;

      tcsetattr(fd, TCSANOW, &options); //set the new options ... TCSANOW specifies all option changes to occur immediately

  return (fd);
} 
```

**序列号**

```
#include <stdio.h>   /* Standard input/output definitions */
#include <string.h>  /* String function definitions */
#include <unistd.h>  /* UNIX standard function definitions */
#include <fcntl.h>   /* File control definitions */
#include <errno.h>   /* Error number definitions */
#include <termios.h> /* POSIX terminal control definitions */

int main()
{
    //reading   
    int readport = open_port("/dev/ttyUSB1");

    //trying to read one character at a time
    char buff;
    int n = 1;

   while (n > 0)
   {
    n = read(readport, &buff, 1);
    printf("%c", buff, buff);
   }

    printf("\n");

    //closing ports
    close(readport);
}

int open_port(char str[])
{
    int fd = open(str, O_RDWR | O_NOCTTY | O_NONBLOCK); // ?? NDELAY or NONBLOCK?

  if (fd == -1)
  {
        perror("open_port: Unable to open /dev/ttyS0 - ");
  }
  else
        fcntl(fd, F_SETFL, 0);

  struct termios options;
  tcgetattr(fd, &options); //this gets the current options set for the port

  // setting the options

  cfsetispeed(&options, B9600); //input baudrate
  cfsetospeed(&options, B9600); // output baudrate
  options.c_cflag |= (CLOCAL | CREAD); // ?? enable receicer and set local mode
  //options.c_cflag &= ~CSIZE; /* mask the character size bits */
  options.c_cflag |= CS8;    /* select 8 data bits */
  options.c_lflag &= ~(ICANON | ECHO | ECHOE | ISIG); // choosing raw input
  options.c_iflag &= ~INPCK; // disable parity check
  options.c_iflag &= ~(IXON | IXOFF | IXANY); // disable software flow control
  options.c_oflag |= OPOST; // ?? choosing processed output
  options.c_cc[VMIN] = 0; // Wait until x bytes read (blocks!)
  options.c_cc[VTIME] = 0; // Wait x * 0.1s for input (unblocks!)

  // settings for no parity bit
  options.c_cflag &= ~PARENB;
  options.c_cflag &= ~CSTOPB;
  options.c_cflag &= ~CSIZE;
  options.c_cflag |= CS8;

  tcsetattr(fd, TCSANOW, &options); //set the new options ... TCSANOW specifies all option changes to occur immediately

  return (fd);
} 
```

所以我想做的是发送一个文件。例如，一个 jpeg 文件。有没有办法将其转换为字节码并将其重新组装为 jpeg？我四处搜索，但不幸的是几乎没有找到相关信息——也许我搜索的是错误的术语。

更好的是在压缩文件后发送文件。最终，我使用 gzip 压缩 jpeg 文件，然后通过串行连接发送它们。谢谢大家！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T20:21:20.330

如果要传输文件，则应将文件分成块，并在每个块上使用校验和；然后在您重新加入另一侧的块时验证校验和。

这不是一个新问题。其他人已经为你解决了。您应该获得一个现有的可靠文件传输程序并通过串行链接运行它。

首选是 rsync。那是 GPL，因此如果您从事专有工作，许可证可能会阻止您使用它。

另一个不错的选择是 XMODEM（或 YMODEM 或 ZMODEM）。我找到了一个带有 BSD 许可证的 XMODEM 的 C 实现，所以你可以肯定地使用它。这也比 rsync 更小更简单。

[http://www.menie.org/georges/embedded/#xmodem](http://www.menie.org/georges/embedded/#xmodem)

[http://en.wikipedia.org/wiki/XMODEM](http://en.wikipedia.org/wiki/XMODEM)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T21:36:06.180

我还打算建议 Z-Modem 或 X-Modem 用于文件传输。但是您必须了解的是，文件并没有什么特别之处。就传输计算机和接收终端而言，无论是jpeg图像，压缩文件还是文本文件，发送的文件都只是二进制数据流。

您所要做的就是将传入的流写入文件，并确保它具有正确的扩展名，以便可以正确处理。

上面提到的传输协议仅添加层以确保整个文件被发送并且它没有损坏，但是您可以在第一个实例上将它们关闭以理解这个概念。

# loops - 符号链接循环中丢失的点文件

> ID：11619668
> 
> 赞同：1
> 
> 时间：2012-07-23T20:04:43.193
> 
> 标签：loops, symlink, dotfiles

在符号链接我的点文件（.vimrc、.zshrc、.bashrc 等）的过程中，我编写了一个简单的 ruby​​ 脚本来为我执行此操作，因此我可以在两组不同的点文件之间切换......但是在这个过程中我做了一个愚蠢的错误，最终将我的备份文件链接为主文件夹副本的符号链接，反之亦然......使它们无法访问（vi说权限被拒绝）

所以我尝试取消链接备份，现在文件在我的主文件夹中读取'没有这样的文件或目录'，但'locate .zshrc'告诉我它在那里。我意识到首先将它们推向回购是谨慎的。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:10:35.420

`locate`使用缓存的数据库；您必须更新b（可能使用root）才能更新所述数据库。不幸的是，这意味着所述文件可能永远消失了。

# javascript - javascript中的自动填充表单完成

> ID：11619674
> 
> 赞同：1
> 
> 时间：2012-07-23T20:04:50.163
> 
> 标签：javascript, html, forms

我有一个调用 javascript 函数的复选框。选中此复选框时，将自动填写表单中的其他值。这些其他值的类型是另一个复选框和一个选项选择字段。我在html中有以下内容：

```
<div id="NA" >
<input type="checkbox" name="remove_cd" value="r_on" id="r_on_cd" />N/A:
<select name="reason" id="reason_list">
<option value="1">Option 1</option>
<option value="2">Option 2</option>
<option value="3">Option 3</option>
</select>
<font color="#cc0000">Reason Required</font><hr/></div> 
```

在javascript中，我在函数中有以下内容：

```
...
var y = document.getElementById("NA").children;
for(var i=0; i<y.length; y++){
    y[i].checked=true;
    y[i].options.selectedIndex=2;
}
... 
```

我有点困惑为什么这不起作用。当我单击表单中的复选框时，`<div id="NA">`会选中该复选框下的复选框，但下拉菜单中的选项不会更改。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:17:57.830

你有`y++`而不是`i++`在你的循环中。试试这个

```
for(var i=0; i<y.length; i++){
    y[i].checked=true;
    y[i].selectedIndex=2;

} 
```

呼吁投掷`.selectedIndex`_`options``Cannot set property 'selectedIndex' of undefined`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:11:07.157

```
y[i].options.selectedIndex=2; 
```

可能应该只是阅读：

```
y[i].selectedIndex=2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T20:36:51.390

我不确定你到底想做什么，但试试这个：

```
<div id="NA" >
<input type="checkbox" name="remove_cd" value="r_on" id="r_on_cd" />N/A:
<select name="reason" id="reason_list">
<option value="1">Option 1</option>
<option value="2">Option 2</option>
<option value="3">Option 3</option>
</select>
<font color="#cc0000">Reason Required</font><hr/></div>
<script>
    window.onload = function() {
        var y = document.getElementById("NA").children; // it's not a good idea to use children array, because if you add a new element in the begining your script will fail
        var checkbox = y[0]; // it is better here to use: document.getElementById('r_on_cd');
        var select = y[1]; // it is better here to use: document.getElementById('reason_list');
        checkbox.onclick = function() {
            select.options.selectedIndex = 2;
        };
    }
</script> 
```

# oop - 为什么要弃用观察者模式？

> ID：11619680
> 
> 赞同：48
> 
> 时间：2012-07-23T20:05:12.183
> 
> 标签：oop, design-patterns, observer-pattern

我注意到我的依赖注入、大量观察者模式的代码（使用 Guava 的[EventBus](http://code.google.com/p/guava-libraries/wiki/EventBusExplained)）通常比我过去编写的没有这些功能的代码更难调试。特别是在试图确定何时以及为何调用观察者代码时。

Martin Oderski 和他的朋友写了一篇长篇论文，标题特别吸引人，[“弃用观察者模式”](https://infoscience.epfl.ch/record/148043/files/DeprecatingObserversTR2010.pdf)，我还没有抽出时间阅读它。

我想知道观察者模式有什么问题，以及关于引导这些聪明人写这篇论文的（建议的或其他的）替代方案要好得多。

作为开始，我确实在[这里](https://web.archive.org/web/20111116204240/http://java.dzone.com/articles/few-thoughts-deprecating)找到了对这篇论文的一个（有趣的）批评。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-24T13:54:17.110

[直接从论文中](http://lampwww.epfl.ch/~imaier/pub/DeprecatingObserversTR2010.pdf)引用：

为了说明观察者模式的确切问题，我们从一个简单而普遍的例子开始：鼠标拖动。以下示例在`Path`对象中进行拖动操作期间跟踪鼠标的移动并将其显示在屏幕上。为了简单起见，我们使用 Scala 闭包作为观察者。

```
var path: Path = null
val moveObserver = { (event: MouseEvent) =>
   path.lineTo(event.position)
   draw(path)
}
control.addMouseDownObserver { event =>
   path = new Path(event.position)
   control.addMouseMoveObserver(moveObserver)
}
control.addMouseUpObserver { event =>
   control.removeMouseMoveObserver(moveObserver)
   path.close()
   draw(path)
} 
```

上面的例子，正如我们将争论的那样，通常在 [25] 中定义的观察者模式违反了一系列重要的软件工程原则：

**副作用**观察者促进副作用。由于观察者是无状态的，我们经常需要其中的几个来模拟一个状态机，就像在拖动示例中一样。我们必须保存所有相关观察者都可以访问的状态，例如`path`上面的变量。

**封装**随着状态变量`path`脱离观察者的范围，观察者模式打破了封装。

**可组合性**多个观察者形成一个松散的对象集合，这些对象处理一个关注点（或多个关注点，见下一点）。由于多个观察者在不同时间安装在不同点，例如，我们不能轻易地完全处置它们。

**关注点分离**上述观察者不仅跟踪鼠标路径，还调用绘图命令，或者更一般地，在同一代码位置包含两个不同的关注点。通常最好将构建路径和显示路径的关注点分开，例如在模型-视图-控制器 (MVC) [30] 模式中。

**可扩展**性 在我们的示例中，我们可以通过为路径创建一个类来实现关注点分离，该类本身在路径更改时发布事件。不幸的是，观察者模式不能保证数据的一致性。让我们假设我们将创建另一个事件发布对象，该对象依赖于我们原始路径的变化，例如，一个代表我们路径边界的矩形。还要考虑一个观察者监听路径及其边界的变化以绘制框架路径。该观察者需要手动确定边界是否已经更新，如果没有，则推迟绘图操作。否则，用户可能会在屏幕上看到尺寸错误的帧（故障）。

**一致性**安装不同观察器的不同方法会降低代码一致性。

**抽象**示例中有一个低级别的抽象。它依赖于控件类的重量级接口，该接口提供的不仅仅是安装鼠标事件观察器的特定方法。因此，我们不能抽象出精确的事件源。例如，我们可以让用户通过按下退出键或使用不同的指针设备（如触摸屏或图形输入板）来中止拖动操作。

**资源管理**观察者的生命周期需要由客户端管理。由于性能原因，我们只想在拖动操作期间观察鼠标移动事件。因此，我们需要显式地安装和卸载鼠标移动观察器，并且我们需要记住安装点（上面的控制）。

**语义距离**最终，这个例子很难理解，因为控制流是倒置的，导致过多的样板代码增加了程序员意图和实际代码之间的语义距离。

[25] E. Gamma、R. Helm、R. Johnson 和 J. Vlissides。设计模式：可重用的面向对象软件的元素。Addison-Wesley Longman Publishing Co., Inc.，美国马萨诸塞州波士顿，1995 年。ISBN 0-201-63361-2。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-24T07:28:39.593

我相信观察者模式具有解耦事物所带来的标准缺点。Subject 与 Observer 分离，但您不能只查看它的源代码并找出谁在观察它。硬编码的依赖项通常更容易阅读和思考，但它们更难修改和重用。这是一个权衡。

至于论文，它并没有解决观察者模式本身，而是它的特定用法。特别是：每个被观察的单个对象有多个无状态观察者对象。这有一个明显的缺点，即需要相互同步的独立观察者（*“由于观察者是无状态的，我们经常需要其中的几个来模拟状态机，就像在拖动示例中一样。我们必须将状态保存在可以访问的位置所有涉及的观察者，例如上面的变量路径。* ")

上述缺点是特定于这种用法，而不是观察者模式本身。您也可以创建一个（有状态的！）观察者对象来实现所有`OnThis`, `OnThat`,`OnWhatever`方法，并摆脱在许多无状态对象中模拟状态机的问题。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-13T09:47:05.403

我会很简短，因为我是这个话题的新手（并且还没有阅读那篇具体的文章）。

观察者模式在直觉上是错误的：被观察对象知道谁在观察（Subject<>--Observer）。这与现实生活背道而驰（在基于事件的场景中）。如果我尖叫，我不知道谁在听；如果闪电击中地板……闪电直到击中才知道有地板！只有观察者知道他们可以观察到什么。

当这种事情发生时，软件就会变得一团糟——因为违背了我们的思维方式——。就好像和对象知道其他对象可以调用他的方法一样。

IMO 诸如“环境”之类的层是负责处理事件并通知受影响者的层。（或混合事件和该事件的生成器）

事件源（主题）向环境生成事件。环境将事件传递给观察者。观察者可以注册影响他的事件类型，或者它实际上是在环境中定义的。这两种可能性都是有意义的（但我想简明扼要）。

据我了解，观察者模式将环境和主题放在一起。

PS。讨厌把抽象的想法放在段落里！:P

# ruby-on-rails - Rails 3.2.6 和 authlogic 3.1.3 的 Session Nil

> ID：11619683
> 
> 赞同：2
> 
> 时间：2012-07-23T20:05:21.337
> 
> 标签：ruby-on-rails, ruby, authlogic

在我们的生产站点上，我们使用的是 rails 3.2.3 和 authlogic 3.1.0。我可以使用任何浏览器登录我们的 rails 应用程序。我们目前正在迁移到 rails 3.2.6 以及升级以使用资产管道，因此我们还将 authlogic 升级到 3.1.3。

问题是，我能够登录到运行 rails 3.2.3 和 authlogic 3.1.0 的生产环境，但是当在功能分支上本地升级到 rails 3.2.6 和 authlogic 3.1.3 时，请同时登录 google chrome 和移动设备safari 不工作并且由于 nil 会话而重定向，而本地登录在 safari 和 firefox 中工作。我已检查并在所有测试设备上接受 cookie。唯一的问题似乎在 rails 3.2.3 / authlogic 3.1.0 和 rails 3.2.6 / authlogic 3.1.3 之间，因为除了 gem 版本之外，没有任何代码库发生变化。

更新：在本地服务器日志中，在谷歌浏览器和移动 safari 上我都得到：警告：无法验证 CSRF 令牌的真实性，但在 safari 上我不是。= csrf_meta_tag 在 application.haml

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T16:52:36.923

在返回代码提交后，错误源于我们的 session_store.rb 初始化程序中的更改。cookie 域未正确设置，因此导致会话被浏览器而不是应用程序本身重置为零。在 config/initializers/session_store.rb 中更改以下行后：

`Application.config.session_store :cookie_store, :key => "_troopswap_session", :domain => '*domain.tld*'`

至

`Application.config.session_store :cookie_store, :key => "_troopswap_session", :domain => :all`

cookie 没有被删除，我可以登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T16:00:13.577

Without diving into this too far, have you tried disabling the CSRF token verification feature.

With your Update you mentioned that the logs where warning about the CSRF, this would lead me to believe that rails of authlogic are flagging the request as forgery.

# android - 每次 GC for Android 后的内存使用量测量

> ID：11619684
> 
> 赞同：1
> 
> 时间：2012-07-23T20:05:23.117
> 
> 标签：android, memory-management, garbage-collection

在 Android 的每次垃圾收集后测量内存使用情况的最佳方法是什么？我知道logcat中有一些GC打印，但是在Android 2.2或之前的版本中似乎没有足够的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:29:20.743

我不知道这是否是最好的方法，但我正在使用来自 DDMS 的 Alocation Tracker 以及“Cause GC”按钮。这篇[博客文章](http://android-developers.blogspot.com/2011/03/memory-analysis-for-android.html)描述了使用堆转储进行内存分析。您还可以查看有关在 Android 上跟踪内存使用情况的[视频。](http://www.youtube.com/watch?v=_CruQY55HOk)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T19:09:24.420

我想出了一种方法来做到这一点：监听 logcat 打印，并在`dumpsys meminfo`每次发现 GC 消息时运行。

# ajax - Mongodb PHP更新文档通过ajax作为参数传递不保存

> ID：11619686
> 
> 赞同：1
> 
> 时间：2012-07-23T20:05:31.263
> 
> 标签：ajax, json, mongodb, save, parameter-passing

我在使用 PHP 和 Javascript 的 MongoDB 时遇到问题。

1）我写了一个文件到集合中并验证它在那里。

```
{
  "_id": ObjectId("500d9f072d854e2001000018"),
  "field1": "happenstance",
  "mydata": "balls  grinders",
  "desc": "johnsig" 
```

}

2) 使用 javascript 我通过调用 php 程序从集合中获取记录。

```
function fetch(){
    $.ajax({
        url: "sbugger.php",
    dataType: "json",
    data: "mode=fetch",
    success: function(data){        
        record = data;
    }
}); 
```

}

3）我修改“desc”元素并通过将文档传递回php程序来保存文档

```
function save(){
record.desc=" HELLO THERE FELLA";
jString = encodeURIComponent(JSON.stringify(record));
myData =  "mode=save&record="+jString;
url = "sbugger.php";

$.ajax({
    url: url,
    type: 'POST',
    data: myData,
    success: function(data){
        document.write(data);
        }   });

} 
```

在php方面，代码是：

```
 $stuff = json_decode($_REQUEST["record"],true);  
 $collection->save($stuff);

 var_dump($stuff);
 var_dump($db->lastError()); 
```

因为我没有修改 $id 我假设这会简单地更新记录。

相反，我得到了这个 var_dump：

```
 object(stdClass)[4]
  public '_id' => 
    object(stdClass)[5]
  public '$id' => string '500d9f072d854e2001000018' (length=24)
  public 'field1' => string 'happenstance' (length=12)
  public 'mydata' => string 'balls  grinders' (length=15)
  public 'desc' => string ' HELLO THERE FELLA' (length=18) 
```

还有这个 lastError 消息

array 'err' => string '无效操作符：$id' (length=21) 'code' => int 10068 'n' => int 0 'lastOp' => object(MongoTimestamp)[8] public 'sec' = > int 1343070014 public 'inc' => int 1 'connectionId' => int 56143 'ok' => float 1

1.5 天以来，我一直在用这个把头撞到墙上。

任何 MongoDB 专家可以帮助我吗？

PS 如果我只保留在一个 php 程序中，则查找和保存工作完美。似乎在来回传递 json 时出现问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:07:55.163

通过将 Mongo 文档从 PHP 转换为 JSON 并返回，您丢失了该`_id`字段的类型信息。在 MongoDB 的原生 BSON 中，这是一个[对象 ID](http://www.mongodb.org/display/DOCS/Object+IDs)。[PHP 表示与MongoId](http://php.net/manual/en/class.mongoid.php)对象相同的类型，而 Mongo 的 JS shell 使用 ObjectId 类。在纯 JSON 中，没有类信息，因此它表示为一个以字符串作为其唯一`$id`属性的对象。您看到的错误消息是因为`$id`被解释为查询运算符。

尽管这提出了 ID 字段，但在处理其他 BSON 类型（例如日期、时间戳、正则表达式模式）时，您可能会看到相同的类型信息丢失。要立即解决此问题，您可以手动将字段转换为 PHP 驱动程序提供的类。

或者，我会说真的没有理由将整个文档传回去写。我建议研究backbone.js，它为模型属性提供[变化检测](http://backbonejs.org/#Model-changedAttributes)。这将允许您在前端对文档进行建模，最小化发送回服务器的数据，并`$set`在更新 Mongo 中的文档时利用原子更新（操作）。

# html - 你如何测量绝对像素数？

> ID：11619687
> 
> 赞同：3
> 
> 时间：2012-07-23T20:05:35.473
> 
> 标签：html, css

我最近发现，由于浏览器特定的默认设置，我认为我知道的大多数测量结果实际上与我认为的不同。我评估我对视觉检查的所有知识都是相对的……项目 A 是 20 像素，所以我可以看到项目 B 是 22 像素。然而，由于浏览器隐藏的默认设置......这种方法效果不佳。我怎么知道绝对像素数是多少。

目前，我刚刚在带有刻度线的图形编辑器中创建了一个 20 像素 x 20 像素的标尺。

附在这里

![在此处输入图像描述](../Images/a7997d6a319eecbcb743e8d983b996e2.png)

现在我可以通过使用绝对定位来移动它并测量物体。但是，开发工具中是否有一些东西可以做到这一点。我现在正在使用 Firefox 10。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:13:43.220

您是否只是在寻找一种工具来轻松测量高度和宽度，而不会在 Firebug 中乱七八糟？

我建议 Firefox 使用这个插件（也适用于 Chrome）：[Web Developer](https://addons.mozilla.org/en-US/firefox/addon/web-developer/)

如果这不是你要找的，你能澄清一下吗？

*编辑：*如果您无法安装软件或附加组件，请使用免安装[Firebug Lite](http://getfirebug.com/firebuglite/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T20:15:47.620

Chrome 的检查器工具会显示您碰巧悬停的任何元素的尺寸。但是，如果您必须忠于 Firefox，Firebug 也可以在悬停时显示任何元素的确切尺寸。打开 Firebug 时，单击右侧边栏中的“布局”。然后，当您将鼠标悬停在元素上时，尺寸将出现在该框内（无需单击）。不像 Chrome 的检查器工具那样直观，但无论如何它都能正常工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T20:20:02.997

*   有一种甜蜜的测量工具叫做“测量它”。你可以在[这里](http://www.makeuseof.com/dir/measureit-simple-ruler-extension-firefox/)找到它。这是迄今为止我发现的最好的。

*   另一个想法...您可以检查并确保所有不同的浏览器都没有放大...查看实际大小等...

*   另外-您是否正在使用任何类型的“重置”？如果不是 - 你可以检查迈耶重置 - 或正常化......或 - 怪胎重置......（结合两者）。

# python - 为 Django 查询强制 INNER JOIN

> ID：11619693
> 
> 赞同：5
> 
> 时间：2012-07-23T20:05:41.850
> 
> 标签：python, sql, django, orm

这是我的架构：

城市 --> 摄影师

我正在尝试获取至少有一名摄影师的城市列表，并返回城市的摄影师人数。

这是我正在使用的查询集：

```
City.objects.annotate(photographer_count=aggregates.Count('photographers')).filter(photographer_count__gt=0).order_by('-photographer_count') 
```

这也完全符合我的预期，除了出于某种原因 Django 选择使用左外连接在城市/摄影师之间进行连接。如果我抓取 SQL 文本并简单地将“左外”更改为“内”，则查询从约 11 秒变为 200 毫秒，结果相同。

我尝试在注释前面放置一个过滤器，以向 Django 提示它应该是内部连接，但这没有用。

我可以对此执行任何 Django 查询伏都教以获得内部连接？我意识到我可以直接使用 SQL，但更愿意通过 ORM。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2017-08-08T01:21:17.310

默认情况下，`LEFT JOIN`生成 a 以便 Django 可以为您提供行，即使对于摄影师为零的城市也是如此。如果你*知道*你不想要这些，这里有一个强制 Django 生成的技巧`INNER JOIN`：

```
City.objects.filter(
    photographer__isnull=False
).annotate(
    photographer_count=aggregates.Count('photographers')
).filter(
    photographer_count__gt=0
).order_by(
    '-photographer_count'
) 
```

具体来说，第一个过滤器告诉 Django an`INNER JOIN`是安全的。它*必须*在`annotate()`调用之前出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T23:52:56.247

您通常无法对 Django 执行的查询和连接进行这种级别的控制。

Django 并没有做真正聪明的事情，比如注意到过滤条件意味着你可以在这一点上摆脱 INNER JOIN - 它必须产生在一般情况下正确的查询，在这种情况下意味着 LEFT OUTER JOIN 为据我所知。

因此，您可能需要原始 SQL。

# c# - 使用 c# 在 wp7 中读取 rss 提要

> ID：11619694
> 
> 赞同：0
> 
> 时间：2012-07-23T20:05:42.727
> 
> 标签：c#, windows-phone-7, xaml

如何使用 c# 在 wp7 应用程序中从此处读取 rss 提要：“ [http://www.nyc.gov/apps/311/311Today.rss](http://www.nyc.gov/apps/311/311Today.rss) ”？

我的 Xaml 代码：

```
<ListBox HorizontalAlignment="Left" Margin="10,10,0,0" Name="listBox1" VerticalAlignment="Top" >
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel VerticalAlignment="Top">
                        <TextBlock x:Name="titleTxt" Height="30" Text="{Binding Title}" VerticalAlignment="Bottom" />
                        <TextBlock x:Name="dateTxt" Height="30" Text="{Binding Date}" />
                        <TextBlock x:Name="descTxt" Height="30" Text="{Binding Desc}" />
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

我的 C# 代码：

```
private void PhoneApplicationPage_Loaded(object sender, RoutedEventArgs e)
    {
        XDocument xDoc = XDocument.Load("http://www.nyc.gov/apps/311/311Today.rss");
        XNamespace content = XNamespace.Get("http://purl.org/rss/1.0/modules/content/");
        var items = xDoc.Descendants("item")
               .Select(i => new
               {
                   Title = i.Element("title").Value,
                   Date = DateTime.Parse(i.Element("pubDate").Value),
                   Desc = i.Element(content + "encoded").Value,
               })
                .ToArray();
        listBox1.ItemsSource = items;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T20:14:45.203

```
using (var wc = new WebClient())
{
    XDocument xDoc = XDocument.Parse(wc.DownloadString("http://www.nyc.gov/apps/311/311Today.rss"));
    XNamespace content = XNamespace.Get("http://purl.org/rss/1.0/modules/content/");
    var items = xDoc.Descendants("item")
            .Select(i => new
            {
                Title = i.Element("title").Value,
                Date = DateTime.Parse(i.Element("pubDate").Value),
                Desc = i.Element(content + "encoded").Value,
            })
            .ToArray();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T23:13:43.950

不久前，我写了一个涵盖这个主题的完整教程。详情在这里：

*   [为 Windows Phone 7 构建 RSS 阅读器 – 设计结构](http://dotnet.dzone.com/articles/building-rss-reader-windows)
*   [为 Windows Phone 7 构建 RSS 阅读器 – 开发功能](http://dotnet.dzone.com/articles/building-rss-reader-windows-0)

# facebook - Facebook 图形 api 用户访问令牌

> ID：11619695
> 
> 赞同：1
> 
> 时间：2012-07-23T20:05:45.363
> 
> 标签：facebook, facebook-graph-api

我一直在开发一个使用公共 Facebook 信息（例如帖子）的网站。

我想强调几件重要的事情：

*   用户访问令牌绝对不同于应用访问令牌
*   我不是在构建一个 facebook 应用程序，而是一个使用 facebook 公共信息的网站。

当我使用某个用户访问令牌时出现问题，大约半小时后，我无法再使用此访问令牌，因为它已过期。

我想知道我如何才能获得永久或至少长期的用户访问令牌？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T20:12:30.697

我认为您无法设置到期时间。但是，当您需要它并且它已过期时，应该扩展身份验证令牌。它短的原因可能是出于安全考虑。

（我只使用过 iOS SDK，但我认为它遵循相同的原则）

# ios - 图像未在 iOS 中正确保存

> ID：11619696
> 
> 赞同：1
> 
> 时间：2012-07-23T20:05:49.493
> 
> 标签：ios

每当我将 .png 图像保存到我的 iOS 应用程序时，我都会遇到问题。

```
-(UIImage *) getImageFromURL:(NSString *)fileURL {
UIImage * result;

NSData * data = [NSData dataWithContentsOfURL:[NSURL URLWithString:fileURL]];
result = [UIImage imageWithData:data];

return result;
}

-(void) saveImage:(UIImage *)image withFileName:(NSString *)imageName ofType:(NSString *)extension inDirectory:(NSString *)directoryPath {
if ([[extension lowercaseString] isEqualToString:@"png"]) {
    [UIImagePNGRepresentation(image) writeToFile:[directoryPath stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.%@", imageName, @"png"]] options:NSAtomicWrite error:nil];
} else if ([[extension lowercaseString] isEqualToString:@"jpg"] || [[extension lowercaseString] isEqualToString:@"jpeg"]) {
    [UIImageJPEGRepresentation(image, 1.0) writeToFile:[directoryPath stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.%@", imageName, @"jpg"]] options:NSAtomicWrite error:nil];
} else {
    NSLog(@"Image Save Failed\nExtension: (%@) is not recognized, use (PNG/JPG)", extension);
}
} 
```

上面的代码是我用来下载图像的代码，将它的 url 传递给图像，然后将“png”作为文件类型。

出于某种原因，图像保存到设备上，但保存格式不正确。我已经通过拉起 iPhone Simulator 程序应用程序文件夹并直接查看图像来测试这一点。它们确实被保存了，但即使是 Mac OS X 也无法通过预览将它们打开为“图像”。

难道我做错了什么？这些图像是我刚刚下载到设备的实际 png 图像。这以前在一周前工作，现在不是。

# c# - 如何从 Sharepoint Web 服务的方法名称中获取 SOAP 请求

> ID：11619702
> 
> 赞同：0
> 
> 时间：2012-07-23T20:06:32.293
> 
> 标签：c#, web-services, sharepoint, soap

我想通过提供方法名称来获取 Sharepoint Web 服务的 SOAP 请求 XML。

例如，如果我想要`GetListCollection`方法的 SOAP 请求消息，我需要做什么？

# java - 使用 DAO 模式访问 Web 会话

> ID：11619712
> 
> 赞同：0
> 
> 时间：2012-07-23T20:07:06.440
> 
> 标签：java, design-patterns, session, servlets, dao

我想使用[Dao 模式](http://java.sun.com/blueprints/corej2eepatterns/Patterns/DataAccessObject.html)来控制对 Web Session 的访问。

我的想法是使用一个 DAO 控制 Session 中的所有元素，如果有人想获得例如他必须写这样的电子邮件的电子邮件：

```
 sessionDAO.getEmail(); 
```

或者

```
 UserData userData = sessionDAO.getUserData();
    userData.getEmail(); 
```

为了将电子邮件放入会话中，我想做：

```
 public void setEmail(String email){
           ServletRequestAttributes requestAttributes = (ServletRequestAttributes)RequestContextHolder.getRequestAttributes();
           HttpSession session = requestAttributes.getRequest().getSession();
           session.setAttribute(SessionDAO.EMAIL,email);
    } 
```

通过这种方式，我总是可以检查我的会话中的值。我不希望任何人都可以这样做：

```
 request.setAttribute("email", "example@gmail.com"); 
```

因为例如在我的代码的其他部分，有人可以重复代码，因为他不知道电子邮件已经在 Session 中。

**这里很好地使用了 DAO 模式吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:52:56.277

我宁愿称这种方法为 a`context`而不是`DAO`（*执行上下文*、*运行时上下文*、*HTTP 上下文*——你可以命名它）。

JNDI 是使用类似的方法实现的。春天有`ApplicationContext`。这样的例子可能还有很多。

DAO 更专注于将 POJO 与其检索分离，并且可能会混淆将来阅读您的代码的任何人，包括您自己。

但不管怎样，总体思路还不错，我用的挺多的。

# php - 将返回的 Twitter JSON 地理位置存储为变量

> ID：11619717
> 
> 赞同：1
> 
> 时间：2012-07-23T20:07:34.377
> 
> 标签：php, mysql, json, twitter, geolocation

我正在使用 PHP 向 Twitter 的 API 提交 JSON 查询（​​使用 POST 方法），并将地理位置坐标作为标准之一，以便取回地理位置数据。从返回的 JSON 结果中，我将特定值存储为变量以传递给 MySQL（首先转换为字符串）。我已经成功地获得了 JSON 结果，并且可以在我的浏览器中看到纬度/经度数据，但无法成功获取/存储它们。下面的代码适用于获取所有其他字段（文本、created_at 等）。任何帮助，将不胜感激。

这是我正在解码 JSON 结果/为每个字段分配变量/将变量发送到 MySQL 的代码部分。

```
$data = mysql_real_escape_string($tweet->{'status'}->{'geo'}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T23:30:20.437

[Twitter API doco](https://dev.twitter.com/docs/platform-objects/tweets)指出该字段`geo`已被弃用，因此您希望从现在开始查看该`coordinates`字段。

该字段是可选的，因此它可能为空。但是，由于您是在位置上进行过滤，所以这应该不太可能。如果它存在，你应该得到这样的东西：

```
var_dump($tweet->coordinates);

// Output:
object(stdClass)[5]
  public 'type' => string 'Point' (length=5)
  public 'coordinates' => 
    array
      0 => float -99.98741865
      1 => float 21.9250252 
```

如果没有，你只会得到`null`. 要获得推文的纬度/经度，您应该能够：

```
if ($tweet->coordinates != null) {
    $long = $tweet->coordinates->coordinates[0];
    $lat = $tweet->coordinates->coordinates[1];
} 
```

# java - Android MediaPlayer 不会在较新的 API 上播放声音

> ID：11619724
> 
> 赞同：0
> 
> 时间：2012-07-23T20:08:20.397
> 
> 标签：java, android, audio, android-mediaplayer

我一直在使用这段代码，它在 Froyo 和 Gingerbread 上播放的声音很好（我假设 Honeycomb 和我的朋友都使用过它）：

```
MediaPlayer mp = MediaPlayer.create(this, R.raw.click);

Button clicker = (Button) findViewById(R.id.clicker);

clicker.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v){

            mp.start();

        }
    }); 
```

我使用的音频是 WAV 格式的。我已经检查过它以确保它没有损坏并且很好。此代码和声音文件仍可在 Gingerbread 上正确运行。

在 Ice Cream Sandwich 和 JellyBean 设备（分别是 Galaxy nexus 和 nexus 7）上，此代码不起作用。不播放声音。logcat 中没有任何内容。我通过互联网搜索并询问我的朋友的想法，但我无法提出任何想法。

提前感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:20:42.643

将调用包装在 IllegalStateException 中，通过调试器运行它，看看你得到了什么。还设置一个布尔值 isPlaying=mp.isPlaying(); 并检查其值。还可以在开始之前尝试 mp.reset() 并查看它是否有效。

另请参阅[http://developer.android.com/reference/android/media/MediaPlayer.html#setOnErrorListener%28android.media.MediaPlayer.OnErrorListener%29](http://developer.android.com/reference/android/media/MediaPlayer.html#setOnErrorListener%28android.media.MediaPlayer.OnErrorListener%29)

继续并实现 MediaPlayer.OnErrorListener 并向媒体播放器注册该方法。看看你得到什么错误。

# php - 如何将 Qualys API v2 与 PHP 一起使用？

> ID：11619728
> 
> 赞同：1
> 
> 时间：2012-07-23T20:08:47.320
> 
> 标签：php, curl

我正在尝试使用 Qualys API v2 来获取返回的 xml 主机列表。我认为您必须使用 cURL，但我不熟悉它。这是我的代码：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLOPT_USERPWD, "$username:$password");
curl_setopt($ch, CURLOPT_URL, "https://qualysapi.qualys.com/api/2.0/fo/asset/host/?action=list&details=Basic");
curl_setopt($ch, CURLOPT_HTTPHEADER, array('X-Requested-With: Manitowoc Service Account'));
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);

$xml = curl_exec($ch);
curl_close();
$hostobj = simplexml_load_string($xml); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T02:08:48.127

实际上，QualysGuard API 调用不需要 curl。只要您可以进行 https 调用，您就可以使用任何您想要的方法。但是 curl 是一个很好的框架，因为一切都已经实现（使用 perl，另一种选择是 LWP）。

我无法找到您的代码的问题，但我发布了一个 perl 脚本，该脚本通过“使用 WWW::Curl::Easy”发出 API 请求来启动和下载 Qualys 报告：[https ://community.qualys.com /docs/DOC-3222](https://community.qualys.com/docs/DOC-3222)

我希望它可以帮助您使用 libcurl 编写自己的 perl API 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:56:18.517

I see nothing wrong with your code, but of course we can't see what values you are using for the username and password, and whether those credentials actually exist in QualysGuard.

To get status/error information from curl for a given request, use `curl_getinfo()`, `curl_error()`, and `curl_errno()` as described [in the cURL Manual](http://php.net/manual/en/book.curl.php).

# objective-c - Objective-C：iPhone 应用程序线程 1 信号 SIGABRT

> ID：11619729
> 
> 赞同：1
> 
> 时间：2012-07-23T20:08:49.643
> 
> 标签：objective-c, sigabrt

我是*Objective-c*的新手，我已经完成了一个为*iPhone构建***“小费计算器”**应用程序的教程。我正在使用*Xcode 4.3.3*并且我检查了所有代码，它与教程中的代码相同（我确信这是正确的）。我一直在浏览网站，试图找到有同样问题的人，但我无法解决它，所以我感谢任何帮助。这是每当我尝试运行应用程序时出现的消息。

 **> 2012-07-23 14:22:01.021 Tip_Calculator[554:f803] -[ViewController initWithCoder:]: 无法识别的选择器发送到实例 0x68a3130 2012-07-23 14:22:01.025 Tip_Calculator[554:f803] *** 由于应用程序终止未捕获的异常'NSInvalidArgumentException'，原因是： ' - [视图控制器的initWithCoder：]：无法识别的选择发送到实例0x68a3130' ***第一掷调用堆栈：（0x13c8022 0x1559cd6 0x13c9cbd 0x132eed0 0x132ecb2 0x234135 0x333c6e 0x333383 0x233cad 0x333c6e 0x33367b 0x333383 0x233105 0x43ceef 0x43d03e 0x11d7a 0x11ff8 0x1117f 0x20183 0x20c38 0x14634 0x12b2ef5 0x139c195 0x1300ff2 0x12ff8da 0x12fed84 0x12fec9b 0x10c65 0x12626 0x253d 0x24a5）终止调用抛出异常（lldb）

这是*main.m*中标记的区域：

```
#import <UIKit/UIKit.h>

#import "AppDelegate.h"

int main(int argc, char *argv[])
{
@autoreleasepool {        return UIApplicationMain(argc, argv, nil,     NSStringFromClass([AppDelegate class]));    }
} 
```

我检查了所有的接口连接，它们都很好。我还添加了一个异常断点，出现了这个错误：

> 2012-07-23 20:49:53.633 Tip_Calculator[2067:f803]-[ViewController initWithCoder:]: 无法识别的选择器发送到实例 0x68c09c0 (lldb)

这是显示的错误日志：

```
Tip_Calculator`start:
0x2470:  pushl  $0
0x2472:  movl   %esp, %ebp
0x2474:  andl   $-16, %esp
0x2477:  subl   $16, %esp
0x247a:  movl   4(%ebp), %ebx
0x247d:  movl   %ebx, (%esp)
0x2480:  leal   8(%ebp), %ecx
0x2483:  movl   %ecx, 4(%esp)
0x2487:  addl   $1, %ebx
0x248a:  shll   $2, %ebx
0x248d:  addl   %ecx, %ebx
0x248f:  movl   %ebx, 8(%esp)
0x2493:  movl   (%ebx), %eax
0x2495:  addl   $4, %ebx
0x2498:  testl  %eax, %eax
0x249a:  jne    0x00002493               ; start + 35
0x249c:  movl   %ebx, 12(%esp)
0x24a0:  calll  0x000024b0               ; main at main.m:14
**0x24a5:  movl   %eax, (%esp)**
0x24a8:  calll  0x000033ca               ; exit
0x24ad:  hlt    
0x24ae:  nop    
0x24af:  nop 
```

我在标记区域周围加上*星号。*无论是否存在异常断点，都会显示相同的错误。

我正在使用情节提要，这是*ViewController*`.h`的文件：

 *```
#import <UIKit/UIKit.h>

@interface ViewController : NSObject
{
//outlets
IBOutlet UITextField *billField;

IBOutlet UITextField *tipFieldTen;
IBOutlet UITextField *tipFieldFifteen;
IBOutlet UITextField *tipFieldTwenty;
IBOutlet UITextField *tipFieldCustom;
IBOutlet UITextField *totalFieldTen;
IBOutlet UITextField *totalFieldFifteen;
IBOutlet UITextField *totalFieldTwenty;
IBOutlet UITextField *totalFieldCustom;
IBOutlet UILabel *customPercentLabel;
IBOutlet UISlider *customPercentSlider;

NSString *billTotal;
}
-(IBAction)calculateTip:(id)sender;

@end 
```

这是*.m*文件：

```
#import "ViewController.h"

@implementation ViewController

- (void)awakeFromNib; 
{
[billField becomeFirstResponder]; //display keyboard for billField
}

-(IBAction)calculateTip:(id)sender
{
static BOOL toggle = YES;

if (toggle)
{
    toggle = NO;
    NSString *billFieldText = billField.text;

    float newTotal = [billFieldText floatValue];
    float customTipPercent = customPercentSlider.value;

    if(sender ==billField)
    {
        if (billFieldText.length <billTotal.length)
            billTotal = [NSString stringWithFormat:@"%.02f", 
                         newTotal / 10];
        else
            billTotal = [NSString stringWithFormat:@"%.02f",
                         newTotal * 10];

        billField.text = billTotal;

        newTotal = [billTotal floatValue];

        float tenTip = newTotal * 0.10;
        float fifteenTip = newTotal * 0.15;
        float twentyTip = newTotal * 0.20;

        tipFieldTen.text = [NSString stringWithFormat:@"%.02f", tenTip];
        tipFieldFifteen.text = [NSString stringWithFormat:@"%.02f", fifteenTip];
        tipFieldTwenty.text = [NSString stringWithFormat:@"%.02f", twentyTip];

        totalFieldTen.text = [NSString stringWithFormat:@"%.02f", newTotal + tenTip];
        totalFieldFifteen.text = [NSString stringWithFormat:@"%.02f", newTotal +   fifteenTip];
        totalFieldTwenty.text = [NSString stringWithFormat:@"%.02f", newTotal + twentyTip];
    }
    else if (sender == customPercentSlider)
    {
        int percentage = (int)(customTipPercent * 100);
        customPercentLabel.text = [NSString stringWithFormat:@"%i%%", percentage];
        float newSliderValue = ((float) percentage) / 100;
        customPercentSlider.value = newSliderValue;
        customTipPercent = newSliderValue;
    }
    float customTip = customTipPercent * newTotal;
    tipFieldCustom.text = [NSString stringWithFormat:@"%.02f", customTip];
    totalFieldCustom.text = [NSString stringWithFormat:@"%.02f", customTip + newTotal];
}
else
{
    toggle = YES;
}

}

@end 
```

任何帮助将不胜感激，因为我是*Objective-c 的*新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T20:20:26.327

你有

```
@interface ViewController : NSObject 
```

这应该是：

```
@interface ViewController : UIViewController 
```

**原因：**

所以你的`ViewController`类当前继承自`NSObject`，它没有实现`initWithCoder`。事实上，这个方法调用是`NSCoding`协议的一部分，它`UIViewController`采用。

**背景：**

您收到的错误基本上是说该类的对象`ViewController`被发送了一个选择器或“消息” `initWithCoder`，但它没有该方法的实现。因此，您通常会做两件事来追踪这一点：

1）检查您是否在代码中的任何地方发送该消息，然后检查接收它的对象是否属于应该识别该方法的类。您还必须考虑从 UIKit 等框架调用该方法，这使这变得更加困难。

2）如果上面看起来没问题，那么您必须考虑，也许当您的代码假定一个对象是一种类型时，它实际上可能是另一种类型，因此会发生此错误。

考虑这段代码：

```
NSArray *anArray = [[NSArray alloc] initWithObjects:@"aString", nil];
NSNumber *aNumber = [anArray objectAtIndex:0];
BOOL isEqual = [aNumber isEqualToNumber:[NSNumber numberWithInteger:42]]; 
```

这将在没有警告的情况下编译，但是在运行时会导致异常 - 因为它假定数组中的对象是`NSNumber`，但实际上它是`NSString`：

> ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFConstantString isEqualToNumber:]：无法识别的选择器发送到实例 0x6cbfc”***

# sql - Magento -> 判断用户是否使用直接 SQL 登录

> ID：11619734
> 
> 赞同：0
> 
> 时间：2012-07-23T20:09:11.817
> 
> 标签：sql, magento, expressionengine

如何根据用户的电子邮件地址判断用户是否使用直接 SQL 登录？

我们有一个与 ExpressionEngine 高度耦合的系统，并且无法在许多 EE 模板中使用 Magento API。

编辑以显示当前登录代码：

```
Mage::getSingleton('core/session', array('name'=>'frontend'));
$session = Mage::getSingleton('customer/session');
$session->login($ParticipantInfo['PreferedEmailAddress'],'default_password');
$session->setCustomerAsLoggedIn($session->getCustomer()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:55:56.153

**TL;DR**：据我所知，即使会话数据存储在数据库中，也没有明确的方法可以仅通过普通 SQL 进行判断。

问题也将是：哪个用户？客户、管理员还是 api 用户？假设您将会话数据存储在文件系统中，我可以想到一些选项：

### API

对于 API 用户，请查看该`api_session`表，您可以与`api_user`存储电子邮件地址的表进行连接。但是，没有办法，这两个表中的信息就足够了，因为只有会话 id 和 logdate 被保存为特定的用户 id，并且您无法判断会话是否仍然处于活动状态。

查询这些数据可能类似于以下内容：

```
SELECT * 
    FROM api_user 
INNER JOIN api_session ON api_user.user_id = api_session.user_id
WHERE api_user.email = "<known_email>" 
```

### 管理员和客户

管理员用户存储在 中`admin_user`，但是，与 for 一样`api_user`，不会存储任何信息用于会话管理。

客户存储在`customer_*`表中。`log_visitor`您可以在表格中查找它们：

```
SELECT * 
    FROM log_visitor_online
INNER JOIN customer_entity ON customer_entity.entity_id = log_visitor_online.customer_id
WHERE c.email = "<known_email>" 
```

同样，如果会话仍然有效，则无法检索到任何信息。**编辑**：蒂姆在他的回答中展示了如何正确地做到这一点。

### 总体而言，坏消息

如果用户当前登录，则不会直接存储任何信息，仅在会话创建日期时。使用开箱即用的功能，您应该无法通过 SQL 准确判断用户当前是否登录 - 这充其量是不明智的，因为 magento 会根据数据库中存储的会话数据检查用户会话的有效性/filesystem，因此如果没有用户的会话数据，您就无法 100% 准确地确定任何内容。

### 如果您可以编写模块，那是个好消息

通过一些工作，您可以连接到 Magento 的会话管理。核心附带的事件有一张[备忘单。](http://www.nicksays.co.uk/magento_events_cheat_sheet/)您还可以创建自己的自定义事件，您可以在这些事件上收听和执行代码。

这里的想法是编写一个模块，该模块可以存储有关客户（管理员或 api 用户反之亦然）或额外模块表中的额外信息。您可以挂钩登录过程并为 api_user/customer/admin 设置一个时间戳，并根据请求刷新该时间戳。如果一个用户的时间戳没有被刷新，比如说，X 秒，你假设用户已经登录了。您在注销事件时删除用户的时间戳。

但是，这也不是 100% 准确的，它在很大程度上取决于用户在您的系统中所做的事情。

无论如何，我希望我能提供一些见解。

lg,

弗洛

# android - 默认应用主题

> ID：11619736
> 
> 赞同：0
> 
> 时间：2012-07-23T20:09:15.970
> 
> 标签：android, android-theme

我有一个快速的问题。

有没有办法使用 eclipse 为我的应用程序定义一个默认主题，还是我必须配置每个活动和资产以匹配我想要的主题？

如果有办法，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T20:11:07.940

定义清单的`android:theme`in`application`元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T20:22:40.900

在 res\values 中创建一个 xml 文件。在其中创建这样的默认布局样式（您可以定义其他内容，这只是一个示例）：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<style name="CodeFont" parent="@android:style/TextAppearance.Medium">
    <item name="android:layout_width">fill_parent</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:textColor">#00FF00</item>
    <item name="android:typeface">monospace</item>
</style>
</resources> 
```

为您要创建的每个默认主题使用一种样式。然后在要使用此样式的 Widget 中输入如下（再次只是一个示例）：

```
<TextView
style="@style/CodeFont"
android:text="@string/hello" /> 
```

此 TextView 现在将继承样式中声明的设置。

# actionscript-3 - Flex/AS3：一个通用的点击和拖动缩放示例，除了一个问题外工作

> ID：11619738
> 
> 赞同：0
> 
> 时间：2012-07-23T20:09:21.760
> 
> 标签：actionscript-3, apache-flex, mxml

我采用了这个网站的代码，

[http://blog.ninjacaptain.com/2010/03/flex-chart-zoom-window/](http://blog.ninjacaptain.com/2010/03/flex-chart-zoom-window/)

请注意，网络博客中提到的有关显示数据提示的错误似乎已得到修复（至少从 4.5.1 SDK 开始）。我可以很好地看到数据提示。

该代码运行良好，除了一个问题。我在下面添加了完整的代码，因此您可以复制并粘贴为新的 Flex 应用程序并运行它。

问题只是当用户单击一次而不拖动时，会出现以下错误（确保在应用程序首次运行时单击它）：

`TypeError: Error #1009: Cannot access a property or method of a null object reference. at mx.charts.chartClasses::CartesianDataCanvas/localToData()[E:\dev\4.5.1\frameworks\projects\charts\src\mx\charts\chartClasses\CartesianDataCanvas.as:580]`

有没有办法捕捉用户点击而不像这样拖动并调用一些函数来处理它？或者，有什么方法可以避免这个错误？感谢您的任何意见/建议。

代码是：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx"
           initialize="init()" width="600" height="520">
<fx:Script>
    <![CDATA[
        [Bindable]
        private var profits:Array;
        private var dragStart:Point;
        private var dragEnd:Point;
        private var zooming:Boolean;

        // initializes the data provider with random data
        private function init():void{
            profits = new Array({month: 0, profit: 15});
            for(var i:int=1; i<40; i++)
                profits.push({month: i, profit: Math.round(Math.random()*25-10)+profits[i-1].profit});
        }

        // sets the start point of the zoom window
        private function startDraw(e:MouseEvent):void{
            zooming = true;
            dragStart = new Point(series1.mouseX, series1.mouseY);
        }

        // draws the zoom window as your mouse moves
        private function showDraw(e:MouseEvent):void{
            if(zooming){
                dragEnd = new Point(series1.mouseX, series1.mouseY);

                // finds the top-left and bottom-right ponits of the zoom window
                var TL:Point = new Point();  // top-left point
                var BR:Point = new Point();  // bottom-right point
                if(dragStart.x < dragEnd.x){
                    TL.x = dragStart.x;
                    BR.x = dragEnd.x;
                }
                else{
                    TL.x = dragEnd.x;
                    BR.x = dragStart.x;
                }
                if(dragStart.y < dragEnd.y){
                    TL.y = dragStart.y;
                    BR.y = dragEnd.y;
                }
                else{
                    TL.y = dragEnd.y;
                    BR.y = dragStart.y;
                }

                // prevents the zoom window from going off the canvas
                if(TL.x < 0) TL.x = 0;
                if(BR.x > chartCanvas.width-1) BR.x = chartCanvas.width-1;
                if(TL.y < 0) TL.y = 0;
                if(BR.y > chartCanvas.height-1) BR.y = chartCanvas.height-1;

                // draw the actual zoom window
                chartCanvas.graphics.clear();
                chartCanvas.graphics.lineStyle(1, 0x000000, 0.25);
                chartCanvas.graphics.beginFill(0xd4e3f0,0.5);
                chartCanvas.graphics.drawRect(TL.x, TL.y, BR.x-TL.x, BR.y-TL.y);
                chartCanvas.graphics.endFill();
            }   
        }

        // clears the drawing canvas and sets the new max/mins
        private function finishDraw(e:MouseEvent):void{
            zooming = false;
            chartCanvas.graphics.clear();

            // converts the drag coordinates into axis data points
            var chartValStart:Array = chartCanvas.localToData(dragStart);
            var chartValEnd:Array = chartCanvas.localToData(dragEnd);

            // sets the new maximum and minimum for both axes
            haxis.minimum = (chartValStart[0] < chartValEnd[0]) ? chartValStart[0] : chartValEnd[0];
            haxis.maximum = (chartValStart[0] < chartValEnd[0]) ? chartValEnd[0] : chartValStart[0];
            vaxis.minimum = (chartValStart[1] < chartValEnd[1]) ? chartValStart[1] : chartValEnd[1];
            vaxis.maximum = (chartValStart[1] < chartValEnd[1]) ? chartValEnd[1] : chartValStart[1];
        }

        // resets the axis max/mins
        private function resetZoom():void{
            haxis.minimum = NaN; 
            haxis.maximum = NaN; 
            vaxis.minimum = NaN; 
            vaxis.maximum = NaN;
        }   
]]>
</fx:Script>

<s:VGroup>

    <mx:Panel title="Line Chart">
        <mx:LineChart id="chart1" 
                      mouseDown="startDraw(event)" 
                      mouseMove="showDraw(event)" 
                      mouseUp="finishDraw(event)" 
                      width="510">

            <!-- zoom window is drawn here -->
            <mx:annotationElements>
                <mx:CartesianDataCanvas id="chartCanvas"/>
            </mx:annotationElements>

            <mx:horizontalAxis>
                <mx:LinearAxis id="haxis"/>
            </mx:horizontalAxis>

            <mx:verticalAxis>
                <mx:LinearAxis id="vaxis"/>
            </mx:verticalAxis>

            <mx:series>
                <mx:LineSeries filterData="false" id="series1" xField="month" yField="profit" 
                               displayName="Profit" dataProvider="{profits}"/>
            </mx:series>

        </mx:LineChart>
    </mx:Panel>

    <mx:Button label="Reset Zoom" click="resetZoom()" />

</s:VGroup>

</s:Application> 
```

更新：

这是解决方案，以防对其他人有用。我添加了一个 if 语句来检查空的 dragStart 和 dragEnd 值，如下面的答案中所述。此外，我已经删除了 flex 默认放置在线条系列上的阴影，因此如果用户选择的缩放区域太小，则不会出现警告。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx"
           initialize="init()" width="600" height="520">
<fx:Script>
    <![CDATA[
        [Bindable]
        private var profits:Array;
        private var dragStart:Point;
        private var dragEnd:Point;
        private var zooming:Boolean;

        // initializes the data provider with random data
        private function init():void{
            profits = new Array({month: 0, profit: 15});
            for(var i:int=1; i<40; i++)
                profits.push({month: i, profit: Math.round(Math.random()*25-10)+profits[i-1].profit});
        }

        // sets the start point of the zoom window
        private function startDraw(e:MouseEvent):void{
            zooming = true;
            dragStart = new Point(series1.mouseX, series1.mouseY);
        }

        // draws the zoom window as your mouse moves
        private function showDraw(e:MouseEvent):void{
            if(zooming){
                dragEnd = new Point(series1.mouseX, series1.mouseY);

                // finds the top-left and bottom-right ponits of the zoom window
                var TL:Point = new Point();  // top-left point
                var BR:Point = new Point();  // bottom-right point
                if(dragStart.x < dragEnd.x){
                    TL.x = dragStart.x;
                    BR.x = dragEnd.x;
                }
                else{
                    TL.x = dragEnd.x;
                    BR.x = dragStart.x;
                }
                if(dragStart.y < dragEnd.y){
                    TL.y = dragStart.y;
                    BR.y = dragEnd.y;
                }
                else{
                    TL.y = dragEnd.y;
                    BR.y = dragStart.y;
                }

                // prevents the zoom window from going off the canvas
                if(TL.x < 0) TL.x = 0;
                if(BR.x > chartCanvas.width-1) BR.x = chartCanvas.width-1;
                if(TL.y < 0) TL.y = 0;
                if(BR.y > chartCanvas.height-1) BR.y = chartCanvas.height-1;

                // draw the actual zoom window
                chartCanvas.graphics.clear();
                chartCanvas.graphics.lineStyle(1, 0x000000, 0.25);
                chartCanvas.graphics.beginFill(0xd4e3f0,0.5);
                chartCanvas.graphics.drawRect(TL.x, TL.y, BR.x-TL.x, BR.y-TL.y);
                chartCanvas.graphics.endFill();
            }   
        }

        // clears the drawing canvas and sets the new max/mins
        private function finishDraw(e:MouseEvent):void{
            zooming = false;
            chartCanvas.graphics.clear();
           if (dragStart && dragEnd) {  // Solution to original posted quesion
            // converts the drag coordinates into axis data points
            var chartValStart:Array = chartCanvas.localToData(dragStart);
            var chartValEnd:Array = chartCanvas.localToData(dragEnd);

            // sets the new maximum and minimum for both axes
            haxis.minimum = (chartValStart[0] < chartValEnd[0]) ? chartValStart[0] : chartValEnd[0];
            haxis.maximum = (chartValStart[0] < chartValEnd[0]) ? chartValEnd[0] : chartValStart[0];
            vaxis.minimum = (chartValStart[1] < chartValEnd[1]) ? chartValStart[1] : chartValEnd[1];
            vaxis.maximum = (chartValStart[1] < chartValEnd[1]) ? chartValEnd[1] : chartValStart[1];
                       }
                       // reset values for next time
                       dragStart=null;
                       dragEnd=null;
        }

        // resets the axis max/mins
        private function resetZoom():void{
            haxis.minimum = NaN; 
            haxis.maximum = NaN; 
            vaxis.minimum = NaN; 
            vaxis.maximum = NaN;
        }   
]]>
</fx:Script>

<s:VGroup>

    <mx:Panel title="Line Chart">
        <mx:LineChart id="chart1" 
                      mouseDown="startDraw(event)" 
                      mouseMove="showDraw(event)" 
                      mouseUp="finishDraw(event)" 
                      width="510">

            <!-- zoom window is drawn here -->
            <mx:annotationElements>
                <mx:CartesianDataCanvas id="chartCanvas"/>
            </mx:annotationElements>

            <mx:horizontalAxis>
                <mx:LinearAxis id="haxis"/>
            </mx:horizontalAxis>

            <mx:verticalAxis>
                <mx:LinearAxis id="vaxis"/>
            </mx:verticalAxis>

            <mx:series>
                <mx:LineSeries filterData="false" id="series1" xField="month" yField="profit" 
                               displayName="Profit" dataProvider="{profits}"/>
            </mx:series>

            <mx:seriesFilters>
                <fx:Array/>
            </mx:seriesFilters>

        </mx:LineChart>
    </mx:Panel>

    <mx:Button label="Reset Zoom" click="resetZoom()" />

</s:VGroup>

</s:Application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:38:49.940

您会收到此错误，因为`dragEnd`如果用户只是单击鼠标，则永远不会设置该变量。防止这种情况的最简单方法是检查函数`null`内的值`finishDraw`：

```
private function finishDraw(e:MouseEvent):void
{
  zooming = false;
  chartCanvas.clear();

  if(dragStart && dragEnd)
  {
    //your stuff here
    //...

  }

  //reset values for next time
  dragStart=null;
  dragEnd=null;
} 
```

这应该避免那里出现任何进一步的**1009 错误**。请注意，如果我拖动一个很小的缩放窗口然后释放鼠标，我会收到一些警告，因为 Flash 对 DisplayObject 的大小有限制，因此您还应该验证缩放窗口的尺寸。

希望这可以帮助！

# c# - 如果页面上存在 div，则将新的类和属性添加到 div

> ID：11619742
> 
> 赞同：-2
> 
> 时间：2012-07-23T20:09:55.860
> 
> 标签：c#, javascript, jquery

> **可能重复：**
> [如果页面上存在 div，如何向 div 添加新类和属性](https://stackoverflow.com/questions/11618822/how-to-add-new-class-and-attributes-to-div-if-it-exists-on-the-page)

我需要在我的母版页上尝试查找是否存在 div 的 JavaScript 代码。如果是这样，它应该添加一个新类并添加一个新的 id 属性。例如，如果页面有这个 div：

```
<div class="toplink">abc..</div> 
```

然后 JavaScript 代码应该完全像这样：

```
<div class="toplink adin" data-aid="114">abc..</div> 
```

div 内的代码应该保持不变。

我试过这段代码，但这不起作用

```
 <script src="http://ajax.microsoft.com/ajax/jquery/jquery-1.4.2.js" type="text/javascript">
    if ($('.toplink').exists()) {
        $('.toplink').addClass('adin').attr('data-aid', '114');
    }
</script> 
```

这段代码有什么问题？我把这段代码放在什么地方，在页脚的页眉中？我可以用javascript而不是jquery来做到这一点吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:12:25.093

代替

```
.attr('data-aid','114') 
```

使用`.data`方法：

```
.data('aid','114') 
```

[http://api.jquery.com/data](http://api.jquery.com/data)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T20:15:06.607

尝试使用 $().length 属性，并将此代码段放在页面的最底部，然后关闭 body 标记

```
<script src="http://ajax.microsoft.com/ajax/jquery/jquery-1.4.2.js" type="text/javascript"></script>
<script type="text/javascript">
jQuery(document).ready(function($) {
    if ($('.toplink').length > 0) {
        $('.toplink').addClass('adin').attr('data-aid', '114');
    }
});
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T20:15:15.063

您的代码可能只是在 DOM 准备好之前才运行。包装如下：

```
$(function() {
    $('.toplink').addClass('adin').attr('data-aid', '114');
}); 
```

# java - OSGi：Apache Felix Maven 捆绑插件和 Javadoc

> ID：11619744
> 
> 赞同：1
> 
> 时间：2012-07-23T20:10:06.213
> 
> 标签：java, osgi, javadoc, maven-bundle-plugin

我正在使用 Apache Felix Maven Bundle Plugin 来生成 OSGi 元数据。

```
<groupId>org.apache.felix</groupId>
<artifactId>maven-bundle-plugin</artifactId>
<extensions>true</extensions> 
```

您可以配置导出哪些包，也可以使用默认值，不包括 *.impl.* 和 *.internal.* 等包。

有没有办法只为导出的包生成 Javadoc 而不必复制这些信息？

**编辑：**

我目前的方法是手动设置 excludePackageNames 属性（一个 Maven Javadoc 插件属性），从而复制此信息：

```
<excludePackageNames>*.internal.*:*.impl.*</excludePackageNames> <!-- used by Javadoc plugin --><!-- TODO: get this from OSGi meta data--> 
```

[http://sourceforge.net/p/dromler/dromler-oss-parent/ci/default/tree/pom.xml#l64](http://sourceforge.net/p/drombler/drombler-oss-parent/ci/default/tree/pom.xml#l64)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T08:31:18.393

Apache Maven 捆绑插件基于[bndlib](https://github.com/bndtools/bnd)，它有自己的插件模型。如果 maven 插件模型对其他 maven 插件具有类可见性，那么很容易获得此信息。在 pom 的说明中注册一个插件：

```
<instructions>
  <_plugin>com.example.MyPlugin</_plugin>
</instruction> 
```

在这个 bnd 插件中，实现 AnalyzerPlugin 接口

```
boolean analyzeJar(Analyzer analyzer) throws Exception {
   doJavadoc( analyzer.getExportedPackages().keySet() );
} 
```

我对 maven 插件不是很熟悉，因为 bnd 会做动态类加载器（恶心），它必须能够看到你的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T09:37:05.617

我想最好的办法是，如果 Maven 捆绑插件能够提供生成所需信息的目标。

我提交了一个新问题：[https ://issues.apache.org/jira/browse/FELIX-4181](https://issues.apache.org/jira/browse/FELIX-4181)

# python - PyDev 离线安装

> ID：11619746
> 
> 赞同：11
> 
> 时间：2012-07-23T20:10:07.953
> 
> 标签：python, windows, eclipse, pydev

我有一台没有连接到互联网的 Windows 机器。由于安全原因，也无法将此机器连接到互联网。

如何在`PyDev`没有互联网连接的情况下安装？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T20:27:26.140

从[PyDev](http://pydev.org/manual_101_install.html)使用[SourceForge 下载](http://sourceforge.net/projects/pydev/files/)并通过以下说明手动安装：

```
Installing with the zip file

The available locations for the zip files are:

Sourceforge download
After downloading the zip file:

Eclipse 3.4 onwards

Extract the contents of the zip file in the eclipse/dropins folder and restart Eclipse.

Before Eclipse 3.4

Extract the contents of the zip file on top of Eclipse, making sure the plugins folder     is extracted on top of the 
eclipse/plugins folder and the features is on top of the eclipse/features folder.
After that, restart Eclipse with the '-clean' flag, so that Eclipse finds out about it. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-26T20:53:13.230

使用[http://www.liclipse.com](http://www.liclipse.com)。它具有 PyDev 内置并且易于安装。

# php - 用于整理图库中的下一张/上一张图片的 SQL

> ID：11619748
> 
> 赞同：2
> 
> 时间：2012-07-23T20:10:16.167
> 
> 标签：php, mysql, sql

我正在处理我网站的照片部分，但更准确地说是在带有排序选项的下一个/上一个链接上。

存在两种不同的排序选项，首先有一个过滤器（最新、趋势、收藏、用户等），其次是一些先前过滤器的排序选项（日期、视图、评级等）

我很难找到一个好的解决方案来轻松检索我的幻灯片的下一张/上一张图片。

这是我用来获取下一张图片的一点点 SQL`filter:latest`

```
if ($filter == "latest") {
        $sql = "SELECT   *
                FROM     photos
                WHERE    status = 0 AND id < ".$id."
                ORDER BY id DESC
                LIMIT    1
        ";
        $result = $db->sql_query($sql);
        $sql2 ="SELECT   *
                FROM     photos
                WHERE    id = (SELECT MAX(id) FROM photos WHERE status = '0')
                ORDER BY id DESC
                LIMIT    1
    ";
    } 
```

我想知道在我的项目中是否有更简单的方法来实现它？也许存在一个 php 类来做这样的事情？

如果我必须这样做，我觉得我将花费很长时间让所有这些 SQL 查询正常工作。

## 编辑

这是我的`photos`桌子的布局

```
`id`              -> unique ID, autoincremented
`title`         
`img_name`        -> contains the image file name 
`date_created`    -> when the picture was uploaded
`uploader`        -> id of the user that uploaded
`views`           -> number of views the picture has
`up_votes`        -> votes used to calculate the Wilson score interval
`down_votes`
`net_votes`       -> up vote minus down votes 
```

还有其他表格，例如将用户与他们拥有的朋友联系起来的表格，称为`users_friends`

```
`user_id`        -> contains id of the user that added the friend 
`friend_user_id` -> contains id of the friend in question 
```

使用这两个表，我可以使用此 sql 查询获取用户朋友发布的所有图片：

```
SELECT * 
FROM photos 
WHERE uploader IN 
            (
                SELECT friend_user_id 
                FROM users_friends 
                WHERE user_id = ':user_id' 
             ) 
ORDER BY id DESC 
```

然后，我有两个查询来获取下一张图片的链接，还有两个其他查询来获取前一张图片的链接。我有两个，因为一个用于当您在数据库末尾返回另一端时，另一个用于所有其他查询。它们看起来像这样（我只在这里发布下一个按钮）

```
$sql = "SELECT   *
                FROM     photos
                WHERE    status = 0 AND id < ".$id." AND Uploader IN (SELECT friend_user_id FROM users_friends WHERE user_id = ".$logedInUser['User_ID'].")
                ORDER BY id DESC
                LIMIT    1
        ";
$sql2 ="SELECT   *
                FROM     photos
                WHERE    id = (SELECT MAX(id) FROM photos WHERE status = '0' AND Uploader IN (SELECT friend_user_id FROM users_friends WHERE user_id = ".$logedInUser['User_ID']."))
                ORDER BY id DESC
                LIMIT    1
        ";
$result = $db->sql_query($sql);

if (mysql_num_rows($result)==1) { 
        $row = $db->sql_fetchrow($result);
        return "/photo/".$row["id"]."/".urlFriendly($row["Title"])."/".$filter.$sort;
} 
else 
{
        $result = $db->sql_query($sql2);
        $row = $db->sql_fetchrow($result);
        return "/photo/".$row["id"]."/".urlFriendly($row["Title"])."/".$filter.sort;
} 
```

我觉得有很多东西可以简化，但我还不知道该怎么做。

我也有威尔逊分数的下限sql代码来实现下一个/上一个按钮，而且要写4次是相当多的sql代码。也许我可以在`photos`表中插入威尔逊分数，这可以简化很多 sql 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T00:34:22.197

如果您可以发布表格的结构，这将很有帮助 - 即您拥有哪些列/类型以及每行代表什么。我假设您有一个表格，其中每行代表一张照片，并且每张照片都有一个 ID、文件名和其他各种帮助您过滤/排序的列（例如日期、收藏夹等）。

如果您的过滤和排序首选项是由用户定义的，那么您可以在单个 SQL 查询中使用它们，从而获得完整的有序结果集。例如：

```
$sort = date;
$filter = favorite;

$sql = "SELECT ID, filename, [other vars here]
        FROM photos
        WHERE " . $filter . " = TRUE
        ORDER BY ". $sort . " DESC";
$result = $db->sql_query($sql); 
```

现在，您可以使用诸如 mysql_fetch_array 之类的函数来遍历结果集中的每一行，并使用当前、上一张和下一张照片填充某种数据结构。

# c# - 从智能卡中获取相关的 Usb 字母

> ID：11619749
> 
> 赞同：0
> 
> 时间：2012-07-23T20:10:27.187
> 
> 标签：c#, smartcard

我有一个嵌入在可移动 USB 驱动器上的智能卡读卡器。

我能够获得许多有关智能卡读卡器的信息，但没有一个是为了获得相关的 USB 驱动器号。智能卡读卡器和 USB 驱动器之间似乎不存在任何关系。

有没有办法从智能卡读卡器信息中检索 USB 信？请注意，为此我也在使用 WMI 和 Net.Sf.Pkcs11 .Net dll。

# ios - 如何冻结iOS中所有正在运行的线程

> ID：11619750
> 
> 赞同：0
> 
> 时间：2012-07-23T20:10:31.923
> 
> 标签：ios, multithreading, user-interface, freeze, ui-thread

我想在某个时候释放所有正在运行的线程以从 UI 线程获取调用堆栈。有这个方法调用吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T23:44:13.173

如果我没记错的话，你可以在代码的某处设置一个断点，线程就会暂停。在控制台中，您可以执行以下操作： po [NSThread callStackSymbols] 在当前线程上打印堆栈跟踪。

# c# - 在 C# 控制台中嵌入 exe 文件？

> ID：11619752
> 
> 赞同：3
> 
> 时间：2012-07-23T20:10:35.857
> 
> 标签：c#, python, console, exe, embedding

我希望在我的 C# 控制台应用程序中嵌入一个 exe 文件（特别是“python.exe”，Python 2.7 的解释器），这意味着我希望用户输入命令，将解释器的输出接收到字符串变量中并使用 Console.WriteLine 来打印该输出。到目前为止，我的代码是：

```
ProcessStartInfo processStartInfo = new ProcessStartInfo("C:/Python27/python.exe");
processStartInfo.RedirectStandardInput = true;
processStartInfo.RedirectStandardOutput = true;
processStartInfo.UseShellExecute = false;

Process process = Process.Start(processStartInfo);

if (process != null)
{
    while (true)
    {
        process.StandardInput.WriteLine(Console.ReadLine());
        process.StandardInput.Close();

        string output = process.StandardOutput.ReadToEnd();
        Console.WriteLine(output);
    }
} 
```

我可以编写“print 5”并获得正确的输出，但是再次编写时出现以下错误：

> 无法写入已关闭的 TextWriter。

我相信这个错误是因为我关闭了 StandardInput，但是没有那行代码我根本没有得到任何输出。我可以使用什么来向 exe 发送多个命令？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:15:11.420

`process.StandardInput.Flush()`改为打电话。Flush 使任何缓冲的 TextWriter 将其所有输入写入目标，这就是这里发生的事情 - 您正在调用`Close()`它具有刷新缓冲区以及关闭流的副作用。

有关详细信息，请参阅[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.io.textwriter.flush.aspx)。

# javascript - Sencha Touch 2 推送通知

> ID：11619755
> 
> 赞同：4
> 
> 时间：2012-07-23T20:10:46.317
> 
> 标签：javascript, notifications, touch, extjs, sencha-touch-2

我有一个需要能够推送通知的 Sencha Touch 2 应用程序。

我有两个疑问：

1.  我应该使用 sencha 通知实现还是使用 phoneGap 更好？
2.  如何在设备后台运行应用程序，以便检查是否需要推送新通知？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T18:55:57.323

如果我们谈论的是原生 Apple 的推送通知，那么 Sencha 不支持它。您必须使用 PhoneGap + [Cordova PushNotification Plugin](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/PushNotification)。这个插件是由[Urban Airship](http://urbanairship.com/)实现的，所以我不确定这个插件的使用是否是免费的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T15:04:59.333

您可以使用 Sencha Touch 2.2 本地管理 IOS 推送通知 - [http://docs.sencha.com/touch/2.2.1/#!/api/Ext.device.Push](http://docs.sencha.com/touch/2.2.1/#!/api/Ext.device.Push)

我已经在我的博客上发布了如何为 IOS 推送通知配置和构建 Sencha Touch 应用程序 - http://isolaso [​​ftware.it/2013/09/17/ios-push-notifications-using-sencha-touch-2](http://isolasoftware.it/2013/09/17/ios-push-notifications-using-sencha-touch-2/) /。

最重要的步骤是：

*   在 package.json 中配置 applicationName、applicationId 和 bundleSeedId
*   对您的应用执行手动授权
*   正确构建推送服务器的 .pem 证书（或 .p12）

# ruby-on-rails - ruby on rails 索引操作默认不加载

> ID：11619757
> 
> 赞同：0
> 
> 时间：2012-07-23T20:10:52.493
> 
> 标签：ruby-on-rails, controller, indexing, action

控制器：

```
class SearchController < ApplicationController

  def index

  end

end 
```

路线.rb

```
get "search/index" 
```

从`rake routes`

```
search_index GET    /search/index(.:format)        search#index 
```

当我尝试访问时，`http://localhost:3000/search`出现 404 页面错误...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T20:20:44.143

您的路线应该是：

```
 search_index GET    /search(.:format)              search#index 
```

将您更改`get "search/index"`为：

```
resources :search, :only => [:index] 
```

# service - 使用 organization.svc 作为 Web 参考的 CRM 2011

> ID：11619759
> 
> 赞同：0
> 
> 时间：2012-07-23T20:10:57.067
> 
> 标签：service, dynamics-crm-2011, dynamics-crm, entities, web-reference

在 CRM 4 中，我曾经在我的 CRMService.asmx 的 Visual Studio 项目中添加 Web 引用，它会为我带来所有实体（包括自定义实体）和所有服务。

现在我已经转移到 CRM 2011 并且我不太了解它在这里的工作原理..当我添加 organization.svc 的 Web 引用时，它不会添加我的自定义实体，当我使用 crmSvcUtil.exe 时它会生成所有实体（包括自定义实体）的类，但没有服务。那么我如何在 CRM 2011 中使用 organization.svc？我只需要使用 crmSvcUtil 还是将其与 organization.svc 的 Web 参考结合使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T08:37:19.323

在 CRM 2011 中，您不会像在 CRM 4 中那样添加对 Web 服务的引用。如果您想要早期绑定的实体类，那么您必须使用 crmsvcutil.exe 生成它。如果您打算使用 LINQ 查询您的 CRM 数据，则添加 /serviceContextName:contextname 并且将在代码文件中生成一个 OrganizationServiceContext。

如果您不关心早期绑定的实体类，那么您可以使用实体类。在 2011 年，您使用 CRM 4 中称为 DynamicEntity 的实体类。

为了对 CRM 2011 进行任何操作，您必须向项目添加一些引用，您可以在包含 sdk 的 bin 文件夹中找到它们。

您将始终添加对 Microsoft.Xrm.Sdk 的引用。如果您将使用早期绑定，您还需要对 Microsoft.Crm.Sdk.Proxy 的引用。从标准的 .Net 库中，您必须添加对 System.ServiceModel 和 System.Runtime.Serialization 的引用

要连接到 CRM 2011，您将使用 OrganizationServiceProxy。

```
var organizationUri = new Uri("http://<servername>/<organizationname>/XRMServices/2011/Organization.svc");
var credentials = new ClientCredentials();

var serviceProxy = new OrganizationServiceProxy(organizationUri, null, credentials, null);
// If you use early bound entity classes, you have to include the line below. Not needed on late bound
serviceProxy.ServiceConfiguration.CurrentServiceEndpoint.Behaviors.Add(new ProxyTypesBehavior()); 
```

然后通过使用已经创建的 serviceproxy，我可以开始使用 CRM 数据。创建帐户：

```
var account = new Account();
account.Name = "Testing";
serviceProxy.Create(account); 
```

一些进一步阅读的链接：

[发现服务](http://msdn.microsoft.com/en-us/library/gg328127.aspx)

[使用 IOrganizationService](http://msdn.microsoft.com/en-us/library/gg309449.aspx)

[使用组织服务上下文](http://msdn.microsoft.com/en-us/library/gg334504)

# android - 等到 Toast 对话框消失

> ID：11619770
> 
> 赞同：0
> 
> 时间：2012-07-23T20:11:32.710
> 
> 标签：android, toast

我想知道是否有一种方法可以显示 Toast 消息，然后在 Toast 消息消失之前不执行以下任何代码。

# html5boilerplate - h5bp 构建脚本 - 自动更新 css 参考？

> ID：11619771
> 
> 赞同：0
> 
> 时间：2012-07-23T20:11:32.250
> 
> 标签：html5boilerplate

当我构建我的 h5bp 项目时，发布的 html 文件不包含对版本化 css 文件的更新引用（它们仍然指向“css/style.css”而不是新制作的 css 文件）。index.html 文件是一个例外。

创建站点或运行时是否缺少我的步骤`$ ant build`？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:17:40.313

似乎稳定的 h5bp 版本和他们的 ant-build 脚本的当前版本不匹配。ant-build 脚本假定 JS 文件的目录布局不同。

无论如何，他们在**"/build/config/project.properties"**中包含了一些兼容性选项。查找以**"# Compatibility with old versions of html5boilerplate"**开头的段落，取消注释以下行并重新构建。它现在应该可以工作了。

# javascript - onclick，我怎样才能隐藏一个 并展示其背后的内容？

> ID：11619774
> 
> 赞同：0
> 
> 时间：2012-07-23T20:11:36.903
> 
> 标签：javascript, jquery

当点击发生在它之外时，我怎样才能让它`<div>`隐藏起来？我希望能够隐藏它，然后显示它后面页面的其余内容。

```
<html>
<style>
.overlay
{
    position: fixed;
    top: 0;
    left: 0;
    height: 100%;
    width: 100%;
    background: #fff;
    opacity: 0.5;
    filter: alpha(opacity=50);
    z-index: 80;
}
.popupContent
{
    background: #fff;
    padding: 5px;
    border: 1px solid black;
    position: fixed;
    top: 100px;
    left: 400px;
    bottom: 365px;
    right: 300px;
    z-index: 81;
}​

</style>

<div id="initialPopup">
    <div class="overlay"></div>
    <div class="popupContent" onclick="hideInitialPopup()">
    Good Morning, Please Upload Your File Today!
    </div>

</div>
 ​

<script>
function hideInitialPopup() {
    document.getElementById("initialPopup").style.display = "block";
    $("popupContent").mouseup(function(){
    if(! mouse_is_inside) $
}​
</script>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T21:14:59.970

通常，当您使用带有弹出/对话框之类的遮罩时，最简单的方法是将单击处理程序附加到遮罩本身，以在单击时隐藏弹出/对话框。

这是一个 jfiddle：http: [//jsfiddle.net/peterdev001/SDNUj/](http://jsfiddle.net/peterdev001/SDNUj/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T20:17:19.130

使用 jQuery`event.target`确定您是否在框内单击：

```
 $(document).on('click',function(e) {
     if (!$(e.target).closest('#my_div_id').length) {
         $('#my_div_id').hide();
     } 
 });​ 
```

[http://jsfiddle.net/mblase75/PNYTX/](http://jsfiddle.net/mblase75/PNYTX/)

# python - 正则表达式匹配一个或两个组或两者

> ID：11619775
> 
> 赞同：2
> 
> 时间：2012-07-23T20:11:42.417
> 
> 标签：python, regex, regex-group

我想要一个可以匹配一个组或两个组的正则表达式。这是它的外观示例。要么像这样：

> （钥匙）

或者像这样：

> （核心价值”）

到目前为止，我已经想出了一个与后一个示例匹配的表达式。但我不知道如何修改它，使其匹配第一个或后一个。这里是：

```
\((?P<property_key>[^() ]+) "(?P<property_value>[^"]*)"\) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:20:20.670

我相信您正在寻找正则表达式模式

```
\((?P<property_key>\w+)(?:\s+"(?P<property_value>\w+)")?\) 
```

# c# - 当checkBox选择每个TabPage每个数据网格的所有选择时如何进行动态调用

> ID：11619777
> 
> 赞同：0
> 
> 时间：2012-07-23T20:11:45.877
> 
> 标签：c#, winforms, events, datagridview

我添加了动态选项卡，这些选项卡具有具有 DataGridCheckBoxColumn 的动态数据网格以及选项卡上的一个动态复选框，该选项卡触发选择所有数据网格复选框。

我正在尝试按照这些方式实现一些东西。

```
private void cbSelectAll_CheckedChanged(object sender, EventArgs e)
{

    if (cbSelectAll.Checked)
    {
        foreach (DataGridViewRow row in relatedPatientsDG.Rows)
        {
            row.Cells[0].Value = true;
        }
    }
    else
    {
        foreach (DataGridViewRow row in relatedPatientsDG.Rows)
        {
            row.Cells[0].Value = false;
        }
    }
} 
```

但是这种方法也是动态的，它需要验证选择了哪个选项卡/数据网格 DataGridCheckBoxColumn，因为我正在选项卡上动态创建所有内容。

例如，如果我有一个名为relatedDG 的dataGrid 有DataGridColumnCheckBox，那么触发全选和取消全选的事件方法就像。我需要进行类似的更改，但对于动态 datagridcheckbox，因此没有任何内容是硬编码的。

```
private void cbSelectAllSameVisits_CheckedChanged(object sender, EventArgs e)
{
    if (cbSelectAllSameVisits.Checked)
    {
        foreach (DataGridViewRow row in relatedDG.Rows)
        {
            row.Cells[0].Value = true;
        }

    }
    else
    {
        foreach (DataGridViewRow row in relatedDG.Rows)
        {
            row.Cells[0].Value = false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T22:23:30.997

您可以利用每一对网格和复选框都在同一个标​​签页上的事实——它们都是同一个容器控件的子控件。

这允许您拥有一个附加到`CheckedChanged`创建时所有复选框的事件的方法：

```
private void checkBox_CheckedChanged(object sender, EventArgs e)
{
    CheckBox cb = sender as CheckBox;
    DataGridView dg = cb.Parent.Controls.Cast<Control>()
                        .Where(c => c.GetType() == typeof(DataGridView))
                        .FirstOrDefault() as DataGridView;

    if (dg != null)
    {              
        if (cb.Checked)
        {
            foreach (DataGridViewRow row in dg.Rows)
            {
                row.Cells[0].Value = true;
            }
        }
        else
        {
            foreach (DataGridViewRow row in dg.Rows)
            {
                row.Cells[0].Value = false;
            }
        }           
    }            
} 
```

该代码使用事件处理程序的 sender 参数来识别被单击的复选框，然后搜索属于第一个 DataGridView 的复选框父级的控件。

# javascript - 使用 js 正则表达式的字符串的第 N 个单词

> ID：11619780
> 
> 赞同：1
> 
> 时间：2012-07-23T20:11:54.803
> 
> 标签：javascript, regex

为此，字符串是：

```
one two three four five six seven eight nine ten 
```

你如何选择这个字符串中的第 n 个单词？

在这种情况下，单词是一组一个或多个字符，可以在前面、后面或被空格包围。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T20:39:40.550

尽管答案建议不要使用正则表达式，但这里有一个正则表达式解决方案：

```
var nthWord = function(str, n) {
    var m = str.match(new RegExp('^(?:\\w+\\W+){' + --n + '}(\\w+)'));

    return m && m[1];
}; 
```

您可能需要调整表达式以满足您的需要。这里有一些测试用例[https://tinker.io/31fe7/1](https://tinker.io/31fe7/1)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T20:14:36.380

我会用`split`这个 -

```
var str = "one two three four five six seven eight nine ten";

nth = str.split(/\s+/)[n - 1]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T20:54:25.233

```
    函数 getWord(str,pos)
    {
        var get=str.match(/\S+\S/g);
        返回获取[pos-1]；
    }

    //这里是一个例子
    var str="一二三四五六七八九十";
    var get_5th_word=getWord(str,5);
    警报（get_5th_word）；

```

这很简单 ：）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T20:14:30.117

您可以只分割空格，然后抓取第 X 个元素。

```
var x = 'one two three four five six seven eight nine ten';
var words = x.split(' ');
console.log(words[5]); // 'six' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-24T01:44:14.003

这是一个仅限正则表达式的解决方案，但我敢说其他答案会有更好的性能。

```
/^(?:.+?[\s.,;]+){7}([^\s.,;]+)/.exec('one two three four five six seven eight nine ten') 
```

我将（运行）空格、句点、逗号和分号作为分词符。你可能想要适应它。`7`手段`Nth word - 1`。_

让它更“动态”：

```
var str = 'one two three four five six seven eight nine ten';
var nth = 8;
str.match('^(?:.+?[\\s.,;]+){' + (nth-1) + '}([^\\s.,;]+)'); // the backslashes escaped 
```

现场演示：http: [//jsfiddle.net/WCwFQ/2/](http://jsfiddle.net/WCwFQ/2/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T20:14:38.900

您可以在空格上拆分字符串，然后将其作为数组访问：

```
var sentence = 'one two three four five six seven eight nine ten';
var exploded = sentence.split(' ');

// the array starts at 0, so use "- 1" of the word
var word = 3;
alert(exploded[word - 1]); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-23T20:15:56.590

```
var words = "one two three four five six seven eight nine ten".split(" ");
var nthWord = words[n]; 
```

当然，您需要先检查第 n 个单词是否存在..

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-23T20:16:05.110

```
var nthWord = function(str, n) {
    return str.split(" ")[n - 1]; // really should have some error checking!
}

nthWord("one two three four five six seven eight nine ten", 4) // ==> "four" 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-23T20:19:33.830

计算事物并不是您应该使用正则表达式的真正目的，而是尝试根据您的分隔符（在您的特定情况下为空格）拆分字符串，然后访问数组的第 n-1 个索引。

Javascript代码：

```
 >"one two three four".split(" ");
 ["one", "two", "three", "four"]
 >"one two three four".split(" ")[2];
 >"three" 
```

# iphone - 计算 UILabel 和 UIButtons 大小来造句？

> ID：11619782
> 
> 赞同：0
> 
> 时间：2012-07-23T20:12:00.017
> 
> 标签：iphone, objective-c, ios, uibutton, uilabel

我试图在我的应用程序中显示如下内容：

> 被**@user1**、**@user2**和另外**3 人**点赞。

许多应用程序都有这种格式的评论，比如发布者和他们的评论，例如：**@me**是的，苹果很好

当您点击他们的名字时，它会将您带到应用程序的某个位置。

我希望 @user1 @user2 和另外 3 个可以点击并执行选择器。

我也希望它们大胆和某种颜色。

`UIWebView`可以对文本进行风格化，但我可以通过触摸属性字符串的一部分来执行选择器吗？

我一直在尝试找到最好的方法来做到这一点，而无需制作标签和按钮并通过每个用户名的长度动态计算它们，如下所示：

```
Label  = "Liked by "
Button = "@user1"

Label ", "
Button = "@user2"

Label "and "
Button "3 more"

Label "." 
```

一定会有更好的办法！提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:28:42.087

使用内联 UIWebView 会更好——前提是您不需要将其添加到滚动视图中。您可以通过为它们注册一些委托然后将假协议/URL 作为链接 URL 来检测 Web 视图中的操作/链接点击。像这样的东西：

```
UIWebView *wv = [[UIWebView alloc] initWithFrame:aFrame];
wv.delegate = self;
[wv loadHTMLString:@"<a href='userlike:user1'>@user1</a> hates this." baseURL:nil ]; // further parts of this method name omitted
// because it's long, look it up in UIWebView class reference.
[self.view addSubview:vw];
[wv release]; 
```

和委托方法：

```
- (BOOL)webView:(UIWebView *)wv shouldStartLoadWithRequest:(NSURLRequest *)rq navigationType:(UIWebViewNavigationType)type
{
    if ([[[rq URL] protocol] isEqualToString:@"userlike"])
    {
        NSString *userName = [[rq URL] host];
        // extract username from the URL, then
        return NO;
    }

    // else
    return YES;
} 
```

**编辑：**我找到[了这个](https://github.com/AliSoftware/OHAttributedLabel)，正是你要找的。（事实证明，@regan 也提出了完全相同的建议。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T20:27:51.673

您可以从 HTML 代码中调用选择器，请参见[此处](https://stackoverflow.com/questions/3442390/using-uiwebview-links-to-call-a-function)和[此处](http://davinccoder.wordpress.com/2011/06/28/call-ios-method-for-html-button-click/)的示例。

# java - 用于演示嵌套范围的 Scala 代码在 Java 中的行为不同

> ID：11619784
> 
> 赞同：1
> 
> 时间：2012-07-23T20:12:04.907
> 
> 标签：java, scala

我编写了一个 Scala 类`Sheltie`来了解作用域在 Scala 中是如何工作的。我编写了一个等效的 Java Sheltie 类作为交叉引用。这就是我遇到麻烦的地方。

在 Scala`Sheltie`类的主体中，有一个对被调用方法的方法调用`bark`，以及在调用`println`之后的语句`bark`。等效的方法调用`bark()`可以放在另一个方法内部的等效 Java 类中，但在任何方法之外，它可以理解地抱怨`Duplicate method bark()`.

我了解 Java 代码的工作原理，所以这种行为（在 Java 中）并不奇怪。令人困惑的是 Scala 的行为方式为何如此。

我希望解决的是：为什么 Scala 允许在类主体中“调用”以及为什么它允许在 if 块中创建另一个 val 定义，而 Java 不允许。

```
Foo.scala

class Sheltie {
  val barkNum = 10

  def bark() {
    //local barkNum of "bark" method
    val barkNum = 20

     if(true){
       //local "barkNum" of if-block
       val barkNum = 30 //why does Scala not complain of a duplicate local variable, when            Java does in the equivalent program Sheltie.java
       println("Inside if block: No of times Riley barked is " + barkNum)
     }

     println("Outside if block: No of times Riley barked is " + barkNum)
  }

  bark //Why does this work, when you can't do this in Java
  println("Outside bark: No of times Riley barked is " + barkNum)
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T20:24:22.930

当您说 Scala*允许在类主体中调用*时，主体实际上是构造函数，因此这相当于具有：

```
public Sheltie()
{
    bark();
    System.out.println("Outside bark: No of times Riley barked is " + barkNum);
} 
```

在爪哇。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-23T20:20:25.343

在 Scala 中，“类主体”中的语句（不包括声明）作为默认构造函数的一部分执行。当您实例化一个 class 对象时，您将能够观察到这一点`Sheltie`。额外的构造函数在 Scala中称为[*辅助构造函数。*](http://www.artima.com/scalazine/articles/steps.html)

```
class Test(a: Int) {
  println("a = " + a)
}

new Test(1) /* Prints a = 1 */ 
```

关于可变阴影，实际上没有正确或错误的事情要做。Scala 允许您隐藏变量，而其他语言则不允许。我的猜测是它是允许的，因为以函数式编程通常会导致大量局部变量存在于非常有限的范围内，例如，来自闭包声明。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T13:07:37.790

只是补充一下`barkNum`。Scala 有关于范围和声明的简单规则。简要地：

*   在顶层，只允许使用类、特征、对象和包对象。
    *   这是 JVM 强加的限制。
*   任何块（{} 分隔的代码）都接受任何类型的声明。
    *   这包括类、特征和对象的主体。
*   内部声明遮蔽外部声明。

# xml - 使用 VB.NET 2010 从 XML 文件数据插入和更新 SQL 表

> ID：11619786
> 
> 赞同：0
> 
> 时间：2012-07-23T20:12:13.017
> 
> 标签：xml, sql-server-2005, vb.net-2010

一个星期以来，我一直在研究和编写/重写一个程序来完成这项任务。我需要在这方面进行一些合作，也许会提出一些我以前没有想到的东西。具体来说，我们每天都会向我们发送一个自动生成的 XML 文件，其中包含约 7 万条记录（大小约 75MB）。我被要求在其中一个服务器 (SQL) 上创建一个包含此信息的表，以便可以对其进行查询。此外，该程序必须更新现有记录（如果数据已更改）并每天插入新记录。**不得从数据库中删除记录**

这是我尝试过的方法列表（到目前为止）以及它们不起作用的原因。

1.  SQLXMLBulkLoad - 这非常适合导入数据。但是，批量加载类的限制是它不能更新和/或插入。是时候重写了。

2.  SQL OpenRowSet（使用 SQLCommand 等） - 这不起作用，因为服务器、程序和 XML 文件都将 3 位于不同的计算机上。这些设备可以配置为允许彼此访问文件（特别是服务器），但是这种方法被认为“不现实，开销太大”需要重新写入。

3.  DataSet Merge，然后是 TableAdapter.Update - 这个方法最初看起来肯定会起作用。思路很简单，使用DataSet.XMLRead()方法将XML数据放入数据集中的一个表中，然后只需将SQL表添加到数据集中（使用SQLCommand等），合并两个表，然后使用Table将表更新/插入到现有 SQL 表中的适配器。此方法似乎不起作用，因为 XML 文件有两个包含日期的节点（列）。不幸的是，SQL 和 XML 之间没有统一的 Date 数据类型。我什至尝试将 XML 文件中的所有日期格式更改为 DateTime SQL 格式，该格式有效，但在运行时仍被视为数据类型不匹配异常。

在这一点上，我没有想法。这似乎是以前肯定做过的任务。我不一定要找人为我编写这段代码（我完全有能力），我只需要在这个主题上进行一些合作。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:24:57.193

我们对以 XML 格式接收的数据库导入做类似的事情，我所做的只是将 XML 直接传递给存储过程，然后使用 XQuery 和 OPENXML 分解 XML。

这两种技术都允许您在 SQL 中查询 XML，就好像它是数据库中的一个表一样。采用这种方法，您只需将 XML 传递给脚本或存储过程，在 SQL 中对其进行查询，然后将结果插入到您需要的任何位置。有趣的是，[OPENXML 更适合处理大型 XML 文件](http://beyondrelational.com/quiz/sqlserver/general/2010/questions/sqlserver-quiz-general-2010-jacob-sebastian-openxml-or-xquery-when-and-why.aspx)，但您可以同时尝试这两种方法，看看它们是如何为您工作的。下面是一个使用 OPENXML 和一个简单的合并语句的示例。

```
create procedure ImportXml
(
    @importXml xml
)
as
--with OPENXML you have to prepare the document before you use it
--this is unecessary with XQuery
DECLARE @idoc int
EXEC sp_xml_preparedocument @idoc OUTPUT, @importXml;

--this is just a typical Merge statement that will update data if it exists
--and insert it if it does not
merge NormalDataTable
using
(
     --here is where you are querying the XML document directly.  You can 
     --see, it works just like a SQL statement, with a special syntax for
     --specifying where to get data out of the XML document and how to map
     --it to a table structure
     select *
     from openxml(@idoc, '/Root/Element')
     with
     (
         ElementID int '@ElementID',
         ElementValueName varchar(50) '@ElementValueName'
     ) 
) source
on NormalDataTable.ElementID = source.ElementID
when not matched then
    insert ...
when matched then
    update ...

exec sp_xml_removedocument @idoc 
```

# r - R 中的 osmar 包（OpenStreetMap）

> ID：11619788
> 
> 赞同：0
> 
> 时间：2012-07-23T20:12:25.757
> 
> 标签：r, openstreetmap, osmar

R 中的`osmar`包有一个名为`demo("navigator")`. 提供它是为了说明包的能力和功能。当我十个脚本时，我遇到了以下行并出现错误：

```
R> muc <- get_osm(muc_bbox, src)
sh: osmosis: command not found
Error in file(con, "r") : cannot open the connection
In addition: Warning message:
In file(con, "r") :
  cannot open file '/var/folders/81/4k487q0969q1d8rfd1pyhyr40000gs/T//RtmpdgZSOy/file13a473cb904c': No such file or directory 
```

该命令旨在将`osmosis`数据对象转换为`osmar`对象。我已经为 MacOSX 正确安装了 osmosis，更新了 bash shell 中的路径定义以指向 osmosis 可执行文件。

我不确定错误消息的含义以及如何最好地响应。任何帮助感谢布拉德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T01:19:39.090

你重启了R吗？看起来渗透不在您的路径中，尽管您确实提到您设置了它。确保您可以在终端中运行渗透命令之一：

```
osmosis  --read-xml SloveniaGarmin.osm --tee 4 --bounding-box left=15 top=46 --write-xml SloveniaGarminSE.osm --bounding-box left=15 bottom=46 --write-xml SloveniaGarminNE.osm --bounding-box right=15 top=46 --write-xml SloveniaGarminSW.osm --bounding-box right=15 bottom=46 --write-xml SloveniaGarminNW.osm 
```

该示例无关紧要，只要它没有说`osmosis`找不到文件即可。

另外，请确保您有`gzip`自己的路径。我几乎可以肯定它是默认的，但`demo`包依赖它来运行。只需打开一个终端并输入`gzip`以确保它在那里。

最后，如果您需要调试它，请运行以下命令：

```
library(osmar)
download.file("http://osmar.r-forge.r-project.org/muenchen.osm.gz","muenchen.osm.gz")
system("gzip -d muenchen.osm.gz")
# At this point, check the directory listed by getwd(). It should contain muenchen.osm.
src <- osmsource_osmosis(file = "muenchen.osm",osmosis = "osmosis")
muc_bbox <- center_bbox(11.575278, 48.137222, 3000, 3000)
debug(osmar:::get_osm_data.osmosis)
get_osm(muc_bbox, src)
# Press Enter till you get to
# request <- osm_request(source, what, destination)
# Then type request to get the command it is sending. 
```

输入一次 Enter 后，`request`您将获得它发送到您的操作系统的字符串。它应该是这样的：

```
osmosis --read-xml enableDateParsing=no file=muenchen.osm --bounding-box top=48.1507120588903 left=11.5551240885889 bottom=48.1237319411097 right=11.5954319114111 --write-xml file=<your path> 
```

尝试将其粘贴到您的终端中。它应该适用于任何目录。

哦，然后键入`undebug(osmar:::get_osm_data.osmosis)`停止调试。键入`Q`以退出调试器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T15:51:26.097

嘿，我刚刚让这个东西工作了。问题不在于渗透的系统路径变量。它是通过脚本进行的系统调用，它使用“gzip”应用程序解压缩之前下载的 .gz 文件。所以当你的机器上没有安装 gzip 或者 gzip 不在系统路径变量中时会出现错误。因此安装 gzip 并将其添加到路径变量将减轻此错误。或者，您可以手动将文件解压缩到相同的路径并再次运行脚本。

# android - 如何在 Eclipse 中打开现有项目

> ID：11619790
> 
> 赞同：118
> 
> 时间：2012-07-23T20:12:26.047
> 
> 标签：android, eclipse

我有点傻，但我就是不能让它工作......

我有一个从我的另一台电脑复制的现有 Android 项目，位于文件夹中

```
c:\projects\trunk\android\emergency 
```

（我在另一台电脑上创建了该项目，将其复制到我的新电脑上，另一台电脑被送出）现在我想在 Eclipse 中打开该项目。所以我想我尝试了一切，但我似乎无法让它工作......

我寻找类似' `open project`'的东西，但没有找到。

然后我尝试了' `import`'，但这不会让我导入它，因为它是同一个工作区（我使用与另一台电脑相同的文件位置和工作区位置）

然后我尝试创建一个**新工作区并将其导入那里**。然后它抱怨没有项目，我首先必须创建一个。所以我确实在新工作区中创建了一个虚拟项目，导入项目，并将所有内容复制到新工作区，并将其放在虚拟项目下方。

我被困住了，你能帮帮我吗？

顺便说一句，这是我正在使用的 Eclipse：Eclipse SDK 版本：4.2.0 构建 ID：I20120608-1400

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-07-23T21:24:11.790

试试`File`> `New`> `Project...`> `Android Project From Existing Code`。不要将您的项目从 pc 复制到工作区，将其复制到其他地方并让 eclipse 通过上面的菜单命令将其复制到工作区并检查`copy in existing workspace`.

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-07-23T20:15:32.457

它是 Import->General 下的“Import existing project into workspace”选项。

请参阅： [http ://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Ftasks%2Ftasks-importproject.htm](http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Ftasks%2Ftasks-importproject.htm)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-05-19T18:46:43.647

Window->Show View->Navigator，应该会在左侧弹出导航面板，显示项目列表。

它可能已经在工作区中打开，但您可能已经关闭了导航面板，所以看起来您没有打开项目。

在 Linux 上使用 ADT Build v22.0.0-675183 的 Eclipse。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-03-27T17:05:08.080

`File`> `Import`> `General`> `Existing Projects into workspace`。选择包含您的项目的根文件夹。它列出了所选文件夹中可用的所有项目。选择您要导入的，然后单击`Finish`。这应该工作得很好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-24T21:00:19.740

我使用 Mac 并删除了 ADT 捆绑包源。遇到了同样的错误，所以我去了项目>清理并且adb正常运行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T20:15:32.427

在导航器中右键-导入-现有项目..-选择你项目的基目录

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-04-24T01:24:07.470

假设应用程序文件夹在您的笔式驱动器中。

打开eclipse，去导入，选择Android，在Android中选择“现有的android代码到工作区”

接下来完成。

拉曼南德·巴特

# javascript - 谷歌地图距离矩阵和融合表

> ID：11619791
> 
> 赞同：0
> 
> 时间：2012-07-23T20:12:27.133
> 
> 标签：javascript, google-maps, matrix, distance, google-fusion-tables

我刚刚设法在我的地图上可视化来自 Google Fusion Table 的标记。现在我想知道从用户指定点到存储在表中的那些标记的距离。我想为此使用距离矩阵。[https://developers.google.com/maps/documentation/javascript/distancematrix](https://developers.google.com/maps/documentation/javascript/distancematrix)中的代码示例对我来说很好，但是，我不知道如何将表中的标记定义为距离矩阵函数中的目的地。

如上所述，我现在需要我的变量，它将融合表中的标记调用为目标，而不是 destA 和 destB。

这是我的变量：

```
var schools = new google.maps.FusionTablesLayer({
  query: {
    select: 'geometry',
    from: '1mae334i-txYZFixePEiC7lgYYyi4w6qDN87XAyw'    
  },
}); 
```

这是来自谷歌文档的基本代码。

```
var origin1 = new google.maps.LatLng(55.930385, -3.118425);
var origin2 = "Greenwich, England";
var destinationA = "Stockholm, Sweden";
var destinationB = new google.maps.LatLng(50.087692, 14.421150);

var service = new google.maps.DistanceMatrixService();
service.getDistanceMatrix(
{
  origins: [origin1, origin2],
  destinations: [destinationA, destinationB],
  travelMode: google.maps.TravelMode.DRIVING,
  avoidHighways: false,
  avoidTolls: false
}, callback);

function callback(response, status) {
} 
```

如果有人能帮我解决这个问题，我会很高兴。我想应该有一些非常直接的解决方案，但我就是不明白：/

无论如何，非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T01:10:57.560

您需要在 FusionTable 中查询其中的位置，并将查询中的位置用于 DistanceMatrix。由于表中的行数少于 500，我可能会使用 google 可视化库，但新的 JSONP API 也应该可以工作。

DistanceMatrix 仅限于 25 个目的地。具有 94 行的表的概念证明，远远不止是有问题的（遇到查询限制和配额）

[http://www.geocodezip.com/v3_SO_FusionTables_DistanceMatrix.html](http://www.geocodezip.com/v3_SO_FusionTables_DistanceMatrix.html)

获取前 25 个结果的代码：

```
 // query the table for the destinations
  var queryString ="SELECT 'geometry' FROM "+FT_TableID;
  var queryText = encodeURIComponent(queryString);
  var query = new google.visualization.Query('http://www.google.com/fusiontables/gvizdata?tq='  + queryText);
  //set the callback function
  query.send(createDestinations);
}

function createDestinations(response) {
  if (!response) {
    alert('no response');
    return;
  }
  if (response.isError()) {
    alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
    return;
  } 
  FTresponse = response;
  //for more information on the response object, see the documentation
   //http://code.google.com/apis/visualization/documentation/reference.html#QueryResponse
  numRows = response.getDataTable().getNumberOfRows();
  numCols = response.getDataTable().getNumberOfColumns();
  var geoXml = new geoXML3.parser();
  var bounds = new google.maps.LatLngBounds();
  var request=0;
  destinations[0] = [];
  for (var i=0; ((i<numRows) && (i<25)); i++) {
    var kml = FTresponse.getDataTable().getValue(i,0);
    geoXml.parseKmlString("<Placemark>"+kml+"</Placemark>");
    destinations[request].push(geoXml.docs[i].markers[0].getPosition());
    bounds.extend(geoXml.docs[i].markers[0].getPosition());
  }
  map.fitBounds(bounds);
  calculateDistances(0);
}

function calculateDistances(request) {
   service.getDistanceMatrix({
        origins: [origin],
        destinations: destinations[request],
        travelMode: google.maps.TravelMode.DRIVING,
        unitSystem: google.maps.UnitSystem.IMPERIAL,
        avoidHighways: false,
        avoidTolls: false
      }, function (response, status) {
    if (status != google.maps.DistanceMatrixStatus.OK) {
      alert('Error was: ' + status);
    } else {
      var origins = response.originAddresses;
      var destinationAdds = response.destinationAddresses;
      htmlString = '<table border="1">';
      deleteOverlays();
      for (var i = 0; i < origins.length; i++) {
        var results = response.rows[i].elements;
        for (var j = 0; j < results.length; j++) {
          htmlString += '<tr><td>'+destinationAdds[j]+'</td><td>' + results[j].distance.text +'</td></tr>';
        }
      }
    }
    var outputDiv = document.getElementById('outputDiv');
    htmlString += '</table>';
    outputDiv.innerHTML = htmlString;
  });
} 
```

[获得前 25 个结果的工作示例](http://www.geocodezip.com/v3_SO_FusionTables_DistanceMatrix_25.html)

# html - 在 HTML 中每个后缩进一行

> ID：11619794
> 
> 赞同：2
> 
> 时间：2012-07-23T20:12:44.593
> 
> 标签：html, text-indent

我尝试将 PDF 书籍转换为移动书籍 (html)，并且我还想重新创建布局。在那里，每次中断后，文本都是一行。这应该是可行的

```
<body style="text-indent:20px each-line;"> 
```

但我做错了什么，因为它不起作用。

我不想对段落执行此操作，因为默认情况下它还包含一个空行，但这些中断并不总是意味着一个全新的段落......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:17:39.970

[`each-line`](http://dev.w3.org/csswg/css3-text/#each-line)浏览器尚不支持（参见[`text-indent`MDN](https://developer.mozilla.org/en/CSS/text-indent)）。但是，当它可用时，这*是*您想要使用的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T20:21:28.290

使用语义正确的段落标签`<p>`并根据需要使用 CSS 修改填充/边距。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T00:39:00.403

段落是标记级别的方式。您描述的空白行是 Web 浏览器默认添加的边距。由于您已经在编辑样式表以添加文本缩进，因此覆盖这些默认边距应该一点也不麻烦。实际上，以下内容就足够了：

```
p {
    margin: 0;
    text-indent: 2em
} 
```

为什么`2em`？这意味着段落设置字体的字母 m 的宽度的两倍。因此，无论读者如何使用他或她的个人设置（字体大小、分辨率等），缩进应该与文本成比例。这在某种程度上也是一种印刷约定。当然，您可以将此值设置为许多其他内容，例如`20px`或`1cm`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-08-12T18:10:29.987

当您运行代码片段时，它将为您提供示例 HTML 文本，您可以复制、粘贴和使用。

希望这可以帮助。因为这是一种以您认为合适的方式放置文本的方法。谢谢！

```
 <!DOCTYPE html>
    <html>

    <body>

    <style>
    	h3 {
    		text-indent: 25px;
    	   }

    	h3.small {
    			  line-height: 0.2;
    			  margin-top: 0em;
    			  margin-bottom: 0em
    			 }

    	h4.small {
    			  line-height: 0.2;
    			  margin-top: 1.5em;
    			  margin-bottom: 1em;
    		     }
    </style>

      <h1>Example</h1>

      <h3 class="small">Put text where you want</h3>

      <pre style="font-family:verdana">
    	    This text will keep spacing. 
    	        This this line too.</pre>

      <h4 class="small", style="text-indent: 50px">
    	This is how to make the above example, hope it helps:
      </h4>

    <pre>
    &lt;html&gt;

    &lt;body&gt;

      &lt;style&gt;
    	h3 {
    		text-indent: 25px;
    	   }

    	h3.small {
    			  line-height: 0.2;
    			  margin-top: 0em;
    			  margin-bottom: 0em
    			 }

    	h4.small {
    			  line-height: 0.2;
    			  margin-top: 1.5em;
    			  margin-bottom: 1em;
    		     }
    	&lt;/style&gt;

      &lt;h1&gt; Example &lt;/h1&gt;

      &lt;h3&gt; class="small">Put text where you want &lt;h3&gt;

      &lt;pre&gt; style="font-family:verdana"
    	    This text will keep spacing as formated in HTML file. 
    	        This line too.&lt;/pre&gt;
      &lt;/body&gt;
    &lt;/html&gt;</pre>
    REFERENCE:
    W3schools.com link to HTML <pre> Tag:
    https://www.w3schools.com/tags/tag_pre.asp

    W3schools.com link to HTML line height:
    https://www.w3schools.com/css/tryit.asp?filename=trycss_line-height

    W3schools.com link to HTML <p> tag default options:
    https://www.w3schools.com/tags/tryit.asp?filename=tryhtml_p_default_css</pre>
    </body>
    </html>
```

# c# - Double.Parse 使用特定的文化

> ID：11619796
> 
> 赞同：2
> 
> 时间：2012-07-23T20:13:00.373
> 
> 标签：c#, cultureinfo, currency-formatting

我在这里尝试使用加蓬货币格式解析一个数字。

格式使用“.” 用于组分隔且没有小数。

这是一个例子：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Globalization;
using System.Threading;

namespace ConsoleApplication4
{
    class Program
    {
        static void Main(string[] args)
        {
            CultureInfo ci = new CultureInfo("fr-FR");

            ci.NumberFormat.CurrencyGroupSeparator = ".";
            ci.NumberFormat.CurrencyDecimalDigits = 0;
            ci.NumberFormat.CurrencySymbol = "CFA";

            Thread.CurrentThread.CurrentCulture = ci;
            Thread.CurrentThread.CurrentUICulture = ci;

            double.Parse("300.000", ci).ToString("C"); 
                    // gives me a FormatException
        }
    }
} 
```

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T20:21:17.707

在您的情况下，您必须对 .NET 有所帮助 -`Parse`像这样简单地使用时，它假定您想要获得一个数字。法国文化`,`用作小数分隔符，这就是您的代码引发异常的原因。

试试这个，而不是：

```
double.Parse("300.000", NumberStyles.Currency, ci).ToString("C"); 
```

现在，字符串将被正确解析为货币，遵守您在`ci`文化中指定的货币规则。

而且 - 正如其他人所说，`decimal`在处理货币时你应该真正使用。Double 根本[不够精确](https://stackoverflow.com/questions/1165761/decimal-vs-double-which-one-should-i-use-and-when)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T20:23:01.973

添加这个：ci.NumberFormat.NumberGroupSeparator = ".";

# compilation - Objcopy，它如何进行二进制输出？

> ID：11619798
> 
> 赞同：4
> 
> 时间：2012-07-23T20:13:17.483
> 
> 标签：compilation, binaryfiles, binutils, objcopy

由于我是 binutils、gcc 和其他人的新手，所以我有一些一般性的问题，以及我在手册中没有找到的答案。

我正在使用 C 和程序集（nasm 语法），我需要输出原始二进制文件。首先，我将代码编译为带有参数的objec文件：

```
cc -nostartfiles -nostdlib -c -ffreestanding <input file(s)> ;cc or gcc no matter 
```

然后我使用简单的脚本链接所有文件，该脚本只将段按需要的顺序排列。

```
ld -T <script> -o <o.file> <in.file(s)>  ;nothing special here 
```

为了获得原始二进制文件，我使用 objcopy

```
objcopy -O binary <o.file> <in.file> ;can't be simplier 
```

总而言之，我**只**需要包含 .text 和 .data 段的二进制文件以及 32 位代码。

*1.我能以这种方式得到我想要的吗？*

*2.还有其他方法吗？（无论更简单或更复杂）*

* * *

谢谢你的帮助。

* * *

我没有编译 Asm 代码的问题，几乎所有的 C 代码问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-19T16:58:26.403

一旦我遇到一个`ld`手册页，并且`/DISCARD/`据说阻止从最终输出中排除其中列出的所有内容。

所以我在`.text`,`.data`和块之后插入了这个`.bss`块

```
/DISCARD/ : 
{
    *(.comment)
    *(.eh_frame)
    *(.note.GNU-stack)
} 
```

以及我的链接器脚本开头的这一行。

```
OUTPUT_FORMAT("binary") 
```

因此，我不需要再使用`objcopy`了。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-23T20:19:41.803

您需要使用此命令编译源文件

```
nasm -o bin <SOURCE FILES> 
```

这将产生纯二进制输出。

# jquery-selectors - jquery我应该使用bind还是live还是有其他方法可以做到这一点

> ID：11619802
> 
> 赞同：0
> 
> 时间：2012-07-23T20:13:40.133
> 
> 标签：jquery-selectors, jquery

在我的表单中，我有这样的按钮

```
<button id="mybutton" type="submit"></button> 
```

我正在使用查询提交来提交表单

```
 $('#mybutton').click(function()
    {
        $('form#myform').submit();
} 
```

它适用于大多数情况，除了当我点击输入时，它仍然通过点击捕获完全提交表单。我将按钮类型更改为按钮

```
<button id="mybutton" type="button"></button> 
```

但是当我按Enter键时它什么也没做。

我听说我可以使用 bind 或 on 但不确定在这种情况下这对我有什么帮助。任何帮助将不胜感激 **编辑**

如果我从提交 TO 按钮更改按钮类型，那么当我按下回车键时它不会做任何事情。然后我必须手动单击按钮。如果我留下要提交的类型，它会通过 jquery net 在输入时提交我的表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:24:00.857

它不会做任何事情，因为它是一个`button type`.

但是你可以尝试这个来“模拟”它并在按下回车时提交。

```
$(document).keypress(function(e) {
   if(e.which == 13) {
       $('form#myform').submit();
   }
}); 
```

* * *

只是为了补充一点，有些人声称您将编写 2 次这样的代码：

```
$(document).ready(function(){

   $(this).keypress(function(e) {
     if(e.which == 13) {
       $('form#myform').submit();
     }
   });

   $('#mybutton').click(function() {
     $('form#myform').submit();
   });  

});​ 
```

不多，但我会尝试做一个简短的方法:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T20:19:17.573

如果您希望在通过提交按钮或在最后一个输入上按 Enter 提交表单时触发它，您应该绑定到表单的提交事件。

表格：

```
<form id="myform">

... input fields here ...

<button type="submit">Submit</button>

</form> 
```

js：

```
$("#myform").submit(function(){
    alert("the form submit event happened!");
    // here you can either prevent the form 
    // from submitting and do an ajax request, 
    // or do nothing and let it submit naturally.
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T20:23:21.727

我不认为问题是实时与绑定。它可能与您仅为单击事件创建处理程序这一事实有关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T20:17:50.940

尝试将其作为输入标签而不是按钮？值得一试

您是否要这样做，所以如果他们按 Enter 键，它不会做任何事情吗？只有当他们真正点击它？

停止默认点击：

```
.click(function(e){
    e.preventDefault();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T20:20:05.873

要阻止表单在`click()`事件内提交，请`return false;`在回调结束时使用。

# google-drive-api - 使用 google drive API 下载 csv 格式的电子表格

> ID：11619805
> 
> 赞同：57
> 
> 时间：2012-07-23T20:13:49.837
> 
> 标签：google-drive-api

如果这是一个明显的问题，我很抱歉，我对 API 还是很陌生。我正在使用 python drive api 库，并尝试将 google 电子表格下载为 csv。
当我使用 files.get 时，它会吐出一个没有 downloadUrl 的文件，并且在导出链接字段中没有“text/csv”键。
如果不可能，我可以找到一种解决方法，但我希望它是，因为可以手动执行（文件->下载_as->csv）

我需要使用谷歌文档列表api吗？

谢谢，马特

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-09-20T07:26:45.577

**更新：**我发布了[另一个适用于电子表格 v4 API 的答案](https://stackoverflow.com/a/51235960/1021079)。

**老答案：**

Alain 的回答是正确的，但您还需要设置`gid=parameter`以指定要导出的工作表。

例如，如果您的“应用程序/pdf”导出链接是这样的：

```
docs.google.com/feeds/download/spreadsheets/Export?key=<FILE_ID>&exportFormat=pdf 
```

您可以将其更改为此以下载第一个工作表：

```
docs.google.com/feeds/download/spreadsheets/Export?key<FILE_ID>&exportFormat=csv&gid=0 
```

有一点问题，尽管没有可靠的方法通过 API 获取给定工作表的 gid，而且它们不是基于零的索引。如果您删除工作表，则该 gid 不会被重用。不过，您可以在浏览器的 URL 中看到 gid，因此如果您的工作表信息是不变的，您可以从那里获取。请参阅[http://code.google.com/a/google.com/p/apps-api-issues/issues/detail?id=1813](http://code.google.com/a/google.com/p/apps-api-issues/issues/detail?id=1813)和[http://code.google.com/a/google.com/p /apps-api-issues/issues/detail?id=3240](http://code.google.com/a/google.com/p/apps-api-issues/issues/detail?id=3240)以获取有关该问题的更多信息。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-07-08T21:00:18.027

正如许多其他人指出的那样，我原来的答案有些过时了。所以这是我为 Google 电子表格 API v4 更新的答案。现在有一种获取 gid 的方法，但我们不能使用驱动器[files.export](https://developers.google.com/drive/api/v3/reference/files/export) API，因为它只导出电子表格中的第一个工作表（即使您指定了 gid）。

[要将所有工作表导出为 CSV 文件，您需要使用电子表格](https://developers.google.com/sheets/api/reference/rest/v4/spreadsheets/get).get API 获取要导出的工作表的 gid 。该 API 调用返回一堆关于电子表格的信息，包括每个工作表。您可以从每个工作表的 properties.sheetId 属性中获取 gid。

一旦你有了它，你就可以在选择 File->Download As->CSV 时构建 Sheets 使用的相同 URL。您可以从电子表格中获取 data.spreadsheetUrl 值并替换`/edit`为`/export`，然后添加 gid 作为参数。您还需要包含`Authorization Bearer <auth token>`在请求的 HTTP 标头中。

这是一个基于他们的[快速入门](https://developers.google.com/sheets/api/quickstart/python)示例的 python 脚本，它下载具有指定 ID 的电子表格的所有工作表。您需要替换`<spreadsheet id>`为您有权访问的电子表格的 ID：

```
import apiclient.discovery
import httplib2
import oauth2client.file
import oauth2client.tools
import re
import requests
import shutil
import urllib.parse

SCOPES = 'https://www.googleapis.com/auth/drive.readonly'
SPREADSHEET_ID = '<spreadsheet id>'

store = oauth2client.file.Storage('credentials.json')
creds = store.get()
if not creds or creds.invalid:
  flow = oauth2client.client.flow_from_clientsecrets('client_secret.json', SCOPES)
  creds = oauth2client.tools.run_flow(flow, store)

service = apiclient.discovery.build('sheets', 'v4', http=creds.authorize(httplib2.Http()))

result = service.spreadsheets().get(spreadsheetId = SPREADSHEET_ID).execute()
urlParts = urllib.parse.urlparse(result['spreadsheetUrl'])
path = re.sub("\/edit$", '/export', urlParts.path)
urlParts = urlParts._replace(path=path)
headers = {
  'Authorization': 'Bearer ' + creds.access_token,
}
for sheet in result['sheets']:
  params = {
    'id': SPREADSHEET_ID,
    'format': 'csv',
    'gid': sheet['properties']['sheetId'],
  }
  queryParams = urllib.parse.urlencode(params)
  urlParts = urlParts._replace(query=queryParams)
  url = urllib.parse.urlunparse(urlParts)
  response = requests.get(url, headers = headers)
  filePath = '/tmp/foo-%s.csv' % (+ params['gid'])
  with open(filePath, 'wb') as csvFile:
    csvFile.write(response.content) 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-23T21:28:39.053

exportLinks 集合不公开 CSV 格式，因为这只会导出电子表格的第一个工作表。如果将第一个工作表作为 CSV 检索是您正在寻找的行为，您可以手动构建链接并将`?exportFormat=`查询参数设置为`?exportFormat=csv`.

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-08-17T18:10:06.050

这是对我有用的 Alain 建议的实现：

```
downloadUrl = entry.get('exportLinks')['application/pdf']
# Strip "=pdf" and replace with "=csv"
downloadUrl = downloadUrl[:-4] + "=csv"

resp, content = drive_service._http.request(downloadUrl) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-04-05T19:38:24.293

不确定这是否是 OP 需要的，但在新的 Google 表格版本中，热链接电子表格的 csv 版本似乎有点困难。

如果您对将电子表格中的所有工作表导出到单个`csv`文件（而不是单独下载每个文件）的 Google 应用程序脚本感兴趣，请执行以下操作：

```
function onOpen() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var csvMenuEntries = [{name: "export as csv files", functionName: "saveAsCSV"}];
  ss.addMenu("csv", csvMenuEntries);
};

function saveAsCSV() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheets = ss.getSheets();
  // create a folder from the name of the spreadsheet
  var folder = DocsList.createFolder(ss.getName().toLowerCase().replace(/ /g,'_') + '_csv_' + new Date().getTime());
  for (var i = 0 ; i < sheets.length ; i++) {
    var sheet = sheets[i];
    // append ".csv" extension to the sheet name
    fileName = sheet.getName() + ".csv";
    // convert all available sheet data to csv format
    var csvFile = convertRangeToCsvFile_(fileName, sheet);
    // create a file in the Docs List with the given name and the csv data
    folder.createFile(fileName, csvFile);
  }
  Browser.msgBox('Files are waiting in a folder named ' + folder.getName());
}

function convertRangeToCsvFile_(csvFileName, sheet) {
  // get available data range in the spreadsheet
  var activeRange = sheet.getDataRange();
  try {
    var data = activeRange.getValues();
    var csvFile = undefined;

    // loop through the data in the range and build a string with the csv data
    if (data.length > 1) {
      var csv = "";
      for (var row = 0; row < data.length; row++) {
        for (var col = 0; col < data[row].length; col++) {
          if (data[row][col].toString().indexOf(",") != -1) {
            data[row][col] = "\"" + data[row][col] + "\"";
          }
        }

        // join each row's columns
        // add a carriage return to end of each row, except for the last one
        if (row < data.length-1) {
          csv += data[row].join(",") + "\r\n";
        }
        else {
          csv += data[row];
        }
      }
      csvFile = csv;
    }
    return csvFile;
  }
  catch(err) {
    Logger.log(err);
    Browser.msgBox(err);
  }
} 
```

**注意**：此脚本使用 DocsList.createFile() 方法，该方法仅适用于 Google Apps 帐户。

如果您需要进一步解释，请访问此处：[http ://drzon.net/export-all-google-sheets-to-csv/](http://drzon.net/export-all-google-sheets-to-csv/)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-07-13T01:59:56.977

**（2016 年 7 月）**这个问题的措辞正确，但本质上是另一个线程的副本（[使用 Python 从 Google Docs 下载电子表格](https://stackoverflow.com/questions/3287651)）。*虽然下面这个*问题的一些先前答案可能仍然有效（尽管答案是在 JS/Apps 脚本而不是 Python 中），但新的[Drive API 版本（v3）](https://gsuite-developers.googleblog.com/2015/12/a-leaner-and-faster-google-drive-api.html)和新的[Sheets API 版本（v4）](https://gsuite-developers.googleblog.com/2016/05/apps-dev-sheets-api.html)使它们稍微过时了，尽管以前的版本两者都没有被弃用（还）。现代 Google API 访问使用 API 密钥或 OAuth2 授权，主要使用[Google API 客户端库](http://developers.google.com/discovery/libraries)，包括[用于 Python 的](http://developers.google.com/api-client-library/python)客户端库。

要执行 OP 中/请求的任务，您可能会查询要下载的特定表格，然后使用 Drive API 执行实际导出。由于这可能是一种常见的操作，我写了一篇[博文](http://wescpy.blogspot.com/2016/07/exporting-google-sheet--as-csv.html)，分享了一个代码片段，可以为您完成此操作。如果您希望进一步导出，我还有另外一对[帖子](http://wescpy.blogspot.com/2015/12/google-drive-uploading-downloading.html)以及一个视频，其中概述了如何将文件上传到 Google Drive 和从 Google Drive 下载文件。

请注意，还有一个[Google Sheets API](http://developers.google.com/sheets)，但它主要用于面向电子表格的操作，即插入数据、读取电子表格行、单元格格式设置、创建图表、添加数据透视表等，而不是基于文件的请求，例如导出位置Drive API 是正确使用的 API。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-04-26T11:12:58.403

请注意，截至 2015 年 4 月，DocsList 已贬值，并已被 DriveApp 取代。许多 DriveApp 方法与 DocsList 相同。因此，在许多情况下，您可以简单地将 DocsList 替换为 DriveApp。所以用 DriveApp.createFile() 替换 DocsList.createFile()

[如何在我的代码中将 DocsList 更新为 DriveApp](https://stackoverflow.com/questions/29777164/how-to-update-docslist-to-driveapp-in-my-code)

# java - .Net Web 应用程序问题中的 Java Applet

> ID：11619809
> 
> 赞同：1
> 
> 时间：2012-07-23T20:14:06.910
> 
> 标签：java, html, applet

如何将 Java Applet 放入我的 .Net Web 应用程序？

我正在尝试以下代码

```
 <applet code="com.griaule.fingerprintsdk.appletsample.FormMain" 
                        archive="C:\Users\lucas\workspace\applet-chave\bin\SignedFingerprintSDKJava.jar, C:\Users\lucas\workspace\applet-chave\bin\SignedFingerprintSDKJavaAppletSample.jar, C:\Users\lucas\workspace\applet-chave\bin\sqljdbc4.jar" height="550" width="550">
                    </applet> 
```

但我收到以下错误

```
 java.net.MalformedURLException: unknown protocol: c
    at java.net.URL.<init>(Unknown Source)
    at java.net.URL.<init>(Unknown Source)
    at sun.plugin.util.ProgressMonitorAdapter.setProgressFilter(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager.setupProgress(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
java.net.MalformedURLException: unknown protocol: c
    at java.net.URL.<init>(Unknown Source)
    at java.net.URL.<init>(Unknown Source)
    at sun.plugin.util.ProgressMonitorAdapter.setProgressFilter(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager.setupProgress(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
java.net.MalformedURLException: unknown protocol: c
    at java.net.URL.<init>(Unknown Source)
    at java.net.URL.<init>(Unknown Source)
    at sun.plugin.util.ProgressMonitorAdapter.setProgressFilter(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager.setupProgress(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

如果我将 .jar 插入到我的 .net 项目中，则会出现错误`IllegalArgumentException`，如果我在 jar 文件的路径之前插入 file:\，则会出现`SecurityException`我在评论中所说的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T20:34:57.680

Java 小程序是使用 HTML 标记配置的，因此此处对 .Net 的引用无关紧要。

我猜您的问题在于您配置属性存档中定义的类路径的方式。那里指定的 jar 引用必须与您的代码库相关。它们不能是您机器上的绝对文件路径。

你应该写类似

`first.jar,second.jar`

并将罐子放在可以通过 HTTP 访问的位置

# sql - 为表中的每个不同值创建列

> ID：11619810
> 
> 赞同：0
> 
> 时间：2012-07-23T20:14:08.447
> 
> 标签：sql, sql-server, pivot

假设我有一个结构如下的表（使用 SQL 服务器）：

```
empID INT
payment INT 
```

现在，每位员工只能获得 50.00 或 100.00 的报酬。有两名员工的收入为 50.00，三名员工的收入为 100.00。

我将如何做一个选择语句，以便结果集是这样的：

```
50.00   100
-----   -----
2       3 
```

其中 50.00 和 100.00 是列标题，下面的数字是实际值。我知道我能做到

```
SELECT payment, COUNT(*)
FROM Student
GROUP BY payment 
```

但这会在自己的列中返回付款。我希望每个不同的付款值都在自己的列中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:18:58.277

就是这样：

```
select sum(case when payment = 50.00 then 1 else 0 end) as num050,
       sum(case when payment = 100.00 then 1 else 0 end) as num100 
```

但是，对于浮点数，您永远不应该进行相等的比较。最好执行以下操作：

```
sum(case when abs(payment - 50) < 0.001 then 1 else 0 end) 
```

或类似的东西。

# facebook - Firefox iframe parent.location 不起作用？

> ID：11619813
> 
> 赞同：2
> 
> 时间：2012-07-23T20:14:17.160
> 
> 标签：facebook, firefox, iframe, facebook-apps

我似乎无法在 Firefox（MAC）中获得 iframe 以返回其父页面，我试过了

```
this.parent.location = 'page'+msg; 
```

每次我在 Firefox(MAC) 中触发上述内容时，我都会收到一条“NS_ERROR_ILLEGAL_VALUE”消息，除此之外，它在所有浏览器中都有效！

有任何想法吗？

# python - 没有数据库的 web2py 中的分页

> ID：11619815
> 
> 赞同：2
> 
> 时间：2012-07-23T20:14:24.903
> 
> 标签：python, pagination, web2py

我正在开发 web2py 中的 Web 应用程序。我想为其引入分页，但我的应用程序中没有数据库。它不是必需的。我将有一个最多 100 个项目的列表，但可能少至 50 个。我想生成所需的页数，并希望每页显示 10 个。谁能指出我正确的方向？无法理解关于它的 web2py 教程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T20:30:26.820

T = 总项目 I = 每页项目 P = 页

设T=100，I=10，page=0（初始页）

Pythonic 伪代码：

```
num_pages = Math.Ceil( T / I ) # ceil(100/10) = 10 pages
cur_page = P # 0

start = I*P # 10 * 0 = 0
end = start + ipp # 0 + 10 = 10
if end > total: # false
  end = total

items = allitems[start:end] # this page's items 
```

这应该让你开始。根据需要进行测试、调试和调整。

设 T=322, I=50, page=6

```
num_pages = Math.Ceil( T / I ) # ceil(322/50) = 7 pages
cur_page = P # 6

start = I*P # 50 * 6 = 300
end = start + ipp # 300 + 50 = 350
if end > total: # true 
  end = total # end = 322, not 350

items = allitems[start:end] # this page's items 
```

因此，这个逻辑都在控制器中，其中 Items_Per_page 在服务器上被硬编码，或者当您单击链接或提交按钮时作为 GET/POST 变量接收。如果您希望用户能够在每页中选择不同数量的项目，则需要执行后者。页面肯定是作为 GET/POST 变量从请求中接收的（我会推荐 GET，因为在这种情况下它更容易）。T，项目总数，很简单——只需说“len(data)”，其中数据是可迭代的。

控制器：

```
def show_items():
    T = len(data) # not sure where your data comes from, or if you have to process a query first...
    P = request.vars.page # e.g. http://blah.com/show_items?page=0
    I = request.vars.ipp # e.g. http://blah.com/show_items?page=0&ipp=50

    #now the code from before...
    num_pages = Math.Ceil( T / I ) # ceil(100/10) = 10 pages
    cur_page = P # 0

    start = I*P # 10 * 0 = 0
    end = start + ipp # 0 + 10 = 10
    if end > total: # false
      end = total

    items = allitems[start:end] # this page's items

    return dict(
      data=items,
      start=start,
      end=end,
      total=total,
      prev=page-1 if page > 0 else None, # set to None if page =0
      next=page+1 if page < num_pages else None, # set to None if page == num_pages
    ) 
```

这就是控制器。现在视图可以访问数据、开始、结束和总计，以及上一个和下一个。

我刚刚意识到这篇文章的标题和标签是 web2py ......所以请忽略有关您预期框架的任何陈述，这是一个 web2py 解决方案（未经测试，可能需要调整）。另外，我使用 x = value_if_true if 表达式 else value_if_false 我认为在 python 2.6 之前不可用，所以你可能需要重构。

```
{{ extend 'layout.html' }}

{{ if not total > 0: }}
  No results
{{ else: }}
  <div id='items-container'>
    <div id='items-nav'>
      <span class='header'>Showing {{=start}} to {{=end} of {{=total}}</span><br />
      {{ if prev != None: }}
      <a href='show_items?ipp={{=ipp}}&page={{=prev}}' class='prev p-nav' style='float: left'>&lt; Prev</a>
      {{ pass }}

      {{ if next != None: }}
      <a href='show_items?ipp={{=ipp}}&page={{=next}}' class='next p-nav' style='float: right'>Next &gt;</a>
      {{ pass }}
    </div>

    {{ for item in items: }}
    <div class='item'>
      {{=item.title}}<br />
      {{=item.description}}<br />
      Put whatever else about the item...
    </div>
    {{ pass }}

  </div>
{{ pass }} 
```

# regex - 防止将字符串解释为正则表达式

> ID：11619816
> 
> 赞同：2
> 
> 时间：2012-07-23T20:14:26.833
> 
> 标签：regex, emacs

我正在将一个字符串传递给一个函数，而该字符串*不是*一个正则表达式。在该函数内部，我正在调用另一个采用正则表达式的函数。

我遇到的问题是我正在通过，说：

```
"i.." 
```

它不代表*正*则表达式，然后我想将其“转换”为与该确切字符串匹配的正则表达式。

例如，我将我的非正则表达式*“i..”*转换为：

```
"i[.][.]" 
```

在我的情况下会起作用，因为那样正则表达式将匹配“i..”。

我正在寻找适用于大多数字符的东西，但如果我不能在输入字符串中使用 '[' 和 ']' 也没什么大不了的。

那么如何以编程方式将我的非正则表达式字符串自动“包装”到正则表达式中，以便该正则表达式与我的确切（非正则表达式）字符串匹配？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T20:17:11.530

您正在寻找`regexp-quote`功能。

# windows - Windows 中是否需要 CHR(10) 和 CHR(13)？

> ID：11619820
> 
> 赞同：3
> 
> 时间：2012-07-23T20:14:40.697
> 
> 标签：windows, forms, vbscript, plsql, cmd

我必须解决应用程序中的问题。该应用程序是部署到应用程序服务器的 Oracle 表单。最后的表格是按下按钮的过程，假设发送电子邮件。在按钮代码的末尾，它有一个 PL/SQL 代码，它调用 C:\ 内的 CMD 文件。当 PL/SQL 代码调用 CMD 文件时，它传递了 3 个字符串变量参数。我对第三个有问题。

这是第三个参数的示例：

'** 假期申请 **'||chr(10)||

```
 '**********************'||chr(10)||chr(10)||

        '** Notice: Forward this mail to example@example.com'||chr(10)||

      '           stating whether the request is approved or rejected'||chr(10)||chr(10)||

        'Request Number   : '||:peticiones_vacaciones.codigo||chr(10)||

        'Date of Request  : '||to_char(:peticiones_vacaciones.fecha_peticion,'dd/mm/yyyy')||chr(10)||chr(10)|| 
```

cmd 文件调用创建 Outlook 对象并将第三个变量作为 HTML 正文传递的 Vbscript。

所有这一切的问题是，当有人在电子邮件正文中收到这封电子邮件时，只会看到第一行是 ** VACATION REQUEST ** 正文的所有其他部分都丢失了。

我发现在带有 vbscript 的 Windows 中，您必须将 CHR(10) 和 CHR(13) 都放在行尾？？？

真的吗 ？这可能是我的问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T20:23:05.170

电子邮件标准 ( [RCF2822](https://www.rfc-editor.org/rfc/rfc2822) ) 规定`CRLF`，`chr(13)+chr(10)`无论源平台或目标平台如何[即。这不是 Windows 问题]。

通常 CRLF 在分隔标题时最重要，但它进一步将单行文本的长度限制为不超过 998 个字符，最好不超过 78 个字符（1000,80 没有 CRLF 字符）。

在 RFC2822 第 2.3 节中，它进一步指出正文只能包含`CRLF` *在一起*，它们不能独立出现，因此很可能邮件基础设施的某些部分首先被截断`chr(10)`。如果您只想在正文中包含此类字符，则需要使用不同形式的内容编码...`base64`例如（但这超出了您所要求的范围-我并不是建议将其作为解决方案 ;））

说了这么多……如果您上面的代码是 VBScript，您应该使用它`&`来将两个[字符串连接](http://www.codefixer.com/tutorials/concatenate_strings.asp)在一起（不是`||`）。如果是 plsql 脚本，您是否确认该语句的输出是大量文本而不仅仅是第一个字符串？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T20:20:33.823

电子邮件标准指定行应以 CR/LF (chr(13)/chr(10)) 结尾。见[https://www.rfc-editor.org/rfc/rfc2822#section-2.1](https://www.rfc-editor.org/rfc/rfc2822#section-2.1)

通常，Windows 文本文件遵循相同的格式。

# javascript - 什么刷引擎是玲珑林。建立在？

> ID：11619824
> 
> 赞同：0
> 
> 时间：2012-07-23T20:14:48.557
> 
> 标签：javascript, wacom

[http://www.exquisiteforest.com](http://www.exquisiteforest.com)有一个用纯 javascript 编写的很棒的绘画应用程序，有谁知道使用什么 JavaScript 画笔引擎来创建它（支持笔压）

# javascript - Internet Explorer 7/8 和窗口函数是空对象

> ID：11619826
> 
> 赞同：4
> 
> 时间：2012-07-23T20:14:51.597
> 
> 标签：javascript, internet-explorer

在 Internet Explorer 8 中（在 IE7/8 模式下也可以在 IE9 中工作）下面的代码警告`object`，`undefined`而不是预期的`function`和类似`function() { [native code] }`.

```
alert("typeof window.setTimeout = " + typeof window.setTimeout);  // object
alert("window.setTimeout.apply  = " + window.setTimeout.apply );  // undefined 
```

试试看：http: [//jsfiddle.net/BsvZw/5/](http://jsfiddle.net/BsvZw/5/)

为什么会这样？获得实际的解决方法是什么`setTimeout`？

**更新**

我正在尝试创建一个包装器`setTimeout`：

```
var _oldSetTimeout = window.setTimeout;
window.setTimeout = function ()
{
    // ...

    return _oldSetTimeout.apply(this, arguments);    // this is place where IE 7/8 says 'Object doesn't support this property or method'
                                                // and _oldSetTimeout looks like an empty object
}; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T20:57:28.133

> 为什么会这样？

基本上，因为 IE 讨厌 Web 开发人员并且在惹你。

更严重的是，浏览器实现提供的不属于核心 Javascript 语言的东西可能被归类为[宿主对象](http://github.com/#x4.3.8)。当涉及到宿主对象时，所有的赌注都被取消了，他们基本上可以做任何他们想做的事情^([1])而无需尊重通常的 Javascript 语义。

> 获得实际 setTimeout 的解决方法是什么？

我知道它真的很难看，但是您可以将 if-else-if 链接到预定义数量的参数。在 setTimeout 的情况下，这应该不是什么大问题，因为您不需要超过 2 或 3 个参数。

```
var _oldSetTimeout = window.setTimeout;
window.setTimeout = function (a1, a2, a3)
{
   switch(arguments.length){
       case 0:  return _oldSetTimeout();
       case 1:  return _oldSetTimeout(a1);
       case 2:  return _oldSetTimeout(a1, a2);
       default: return _oldSetTimeout(a1, a2, a3);
   }
}; 
```

虽然这是一个非常丑陋的解决方案，但有时它是唯一的方法。例如，也无法使用可变参数调用构造函数。

* * *

[1] 为了让您了解宿主对象的邪恶程度，前几天我不得不对 DOM 节点/文档中的 XPath 方法进行特征检测。`if(node.selectNodes)`而不是我必须使用的通常测试，`if("selectNodes" in node)`因为节点是 IE 中的主机对象，并且仅访问 selectNodes 属性实际上会调用它，给我一个“参数数量不正确”的异常！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-23T23:11:47.150

当你在函数上调用“apply”时，函数对象本身就是调用“apply”的“this”，所以你可以这样做：

```
function test(s) { alert(""+s); }
Function.prototype.apply.call(setTimeout, null, [test, 0, 'abc']);
// Note: same as "setTimeout.apply(null, [test, 0, 'abc']);" in supported browsers. 
```

基本上，我们是在强制使用 of`Function.prototype.apply`而不是试图寻找一个不存在的`setTimeout.apply`. 在 to 的参数中`call`，第一个参数是我们想要运行的函数`apply`（在这种情况下是对象上下文`setTimeout`）。接下来是传递给 的参数，其中第一个是函数将在其下运行`apply`的期望（在这种情况下为'null'，因为不允许上下文值），以下是参数数组传递给我们要运行的函数。`this``setTimeout``this`

这在 IE7+ 中有效，除了 IE7 不传递自定义参数（即本例中的“abc”，它将提示“未定义”）。

这是一个 TypeScript 实现：

```
/** Helps support cases where 'apply' is missing for a host function object (i.e. IE7 'setTimeout', etc.).  This function
* will attempt to call '.apply()' on the specified function, and fall back to a work around if missing.
* @param {Function} func The function to call '.apply()' on.
* @param {Object} _this The calling object, which is the 'this' reference in the called function (the 'func' argument).
* Note: This must be null for special host functions, such as 'setTimeout' in IE7.
* @param {any} args The arguments to apply to given function reference (the 'func' argument).
*/
function apply(func: Function, _this: Object, args: any[]): any {
    if (func.apply) {
        return func.apply(_this, args);
    } else {
        return Function.prototype.apply.call(func, _this, args);
    }
} 
```

...和一个基本的 JavaScript：

```
function apply(func, _this, args) {
    if (func.apply) {
        return func.apply(_this, args);
    } else {
        return Function.prototype.apply.call(func, _this, args);
    }
} 
```

# drupal-7 - 为 drupal 7 openlayers 添加更多功能

> ID：11619827
> 
> 赞同：1
> 
> 时间：2012-07-23T20:14:57.247
> 
> 标签：drupal-7, openlayers

我在 drupal 7 站点上设置了 openlayers。我看不到如何删除或移动地图图标。我必须编辑 openlayers JS 代码吗？如果有怎么办？

我遇到的另一个问题是，我想让一层内容（节点）成为基础层，然后让其他内容类型的其他节点成为基础层之上的层。到目前为止，我已经有了一个基于分类术语的带有图标/图层的多层地图，但我不知道如何设置基础图层（它将始终保持可见）。

我想要用于基础层的节点没有与之关联的分类法。我想我可以在相同的分类类别中给它们一个术语，以便它们出现，但我仍然需要这样做，以便它们始终在地图上充当基础层。（希望你能遵循）

非常感谢任何帮助。詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:08:20.810

您的问题的答案可能会变得非常复杂，因此我将回答其中的一部分。要移动图标，您可能需要更改[CSS 文件](http://docs.openlayers.org/library/controls.html)而不是 JS。我们开发了一个[Web GIS 门户](http://acedemo.itsc.uah.edu/map?projection=3857) ，其中图层存储为 Drupal 节点。这些节点有与之相关的分类术语。使用这些分类术语，图层被分类到不同的文件夹中。我们的前端是使用 ExtJS 开发的，节点/层是使用后台 AJAX 服务调用获取的。

此外，您不需要将底图存储为 Drupal 节点。如果您不打算支持不同的可自定义底图，您可以在创建 OpenLayer 对象时直接在 JavaScript 中硬编码底图。[请参阅此处](http://openlayers.org/dev/examples/google-v3.js)的示例。[并在这里](http://openlayers.org/dev/examples/google-v3.html)演示。

# c# - 跨多个 .NET 版本保持项目同步

> ID：11619828
> 
> 赞同：4
> 
> 时间：2012-07-23T20:14:59.007
> 
> 标签：c#, visual-studio-2010, visual-studio, build-process

我需要在我的应用程序中创建一些在 .NET 3.5 和 .NET 4.0 中都可用的核心库。我很高兴创建多个项目，创建所需的定义并使用`#ifdef`来控制哪些代码使其进入哪个输出程序集。

但是，我想知道是否有办法使这些项目保持同步？当我在 XNA 下进行开发时，我有一个 Windows 版本和一个 Windows Phone 版本 - XNA 将一个属性注入到名为`XnaCrossPlatformGroupID`. 它的作用是使 Visual Studio 能够自动确保将文件添加到项目中时，将其添加到相应的项目中。因此，例如，如果我将一个名为的文件`Foo.cs`添加到我的项目的 Windows 副本中，那么相同的文件将添加到项目的 Windows Phone 副本中。

有没有办法为 Visual Studio 中的一组普通项目复制这种行为？我不希望使用构建配置，因为我希望能够在一个步骤中编译所有目标平台，而无需借助 IDE 之外的工具（例如 TeamCity 之类的工具）。或者是否有另一种方法允许针对多个目标构建一个项目，而无需在解决方案中添加 20 种不同的构建配置？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T20:40:43.203

我要做的是：

*   有一个“常规” csproj，我在我的大部分开发中使用，添加文件等 - 但请记住，*实际上*所有文件都在“in”中
*   对于其他 csproj，使用类似：

    ```
    <ItemGroup>
      <Compile Include="..\Foo\**\*.cs" />
    </ItemGroup> 
    ```

（这与“添加为链接”基本相同，但不需要在每个文件的基础上完成）

这是所有 *.cs 文件的递归包含，所以一切都在里面。不需要文件维护。

* * *

如果您尝试针对多个**框架**（而不是多个*版本*），那么另一个选项可能是：使用[Portable Class Library](http://msdn.microsoft.com/en-us/library/gg597391.aspx)。这是一个适用于多个框架的单个项目，**但**仅限于您所针对的平台的功能的严格交叉。在 VS2010 中这是一个附加功能；它默认包含在 VS 11 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:42:10.943

我对跨平台项目所做的是拥有不同的 sln，每个用于一个平台。

共享代码位于一个公共位置，并“作为链接”添加到正确的 csproj 中。此 csproj 还包含任何特定于平台的文件。如果“通用代码”文件需要基于当前平台有条件，您可以选择将其替换为两个特定于平台的文件或在其中放置一个#ifdef（取决于它有多少不同）。

请注意，您还可以在 Visual Studio 中将一个解决方案添加到另一个解决方案。这种“组合”解决方案可用于所有平台的自动构建。

示例：[https ://github.com/ananthonline/graffiti](https://github.com/ananthonline/graffiti)

这对我很有用，YMMV。希望这可以帮助。

# iphone - Addsubview 不显示 uiimageview

> ID：11619839
> 
> 赞同：0
> 
> 时间：2012-07-23T20:15:47.993
> 
> 标签：iphone, uiscrollview

我正在尝试通过 addubiew 将 uiimageview 放在滚动视图上，但没有显示。这是 viewDidLoad 中的代码：

```
UIImage *buttonImage = [UIImage imageNamed:@"button"];
UIImageView *buttonImageview = [[UIImageView alloc] initWithImage:buttonImage];
buttonImageview.frame = (CGRect){.origin=CGPointMake(0.0f, 0.0f), .size=buttonImage.size};
[self.scrollView addSubview:buttonImageview]; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:17:36.650

我确定你的意思是

```
[UIImage imageNamed:@"button.png"] 
```

;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:59:28.110

我发现出了什么问题:(在我的 .h 文件中，带有滚动视图的 IBOutlet 的行已填充了圆圈，这意味着它已连接。我将光标放在它上面，看看在哪里，但什么也没出现。我上钩了它再次启动，它现在正在工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T21:35:47.660

Scrollview 要求您在其上设置许多属性。特别是 contentSize。您没有将代码包含在您分配和设置它的原始问题中，这很可能是问题所在。在没有看到它的情况下，我只能假设，但是您将不得不执行以下操作。例如：

```
aScrollView.contentSize = sizeOfImage; // Have to set a size here related to your content.
// You should set these.
aScrollView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;

[aScrollView addSubview:Your Image];

aScrollView.minimumZoomScale = .5;  // You will have to set some values for these
aScrollView.maximumZoomScale = 2.0;
aScrollView.zoomScale = 1;

[self.view addSubview:aScrollView]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T20:42:55.913

我的想法： - 确保文件确实在编译资源中。- 通过一些 NSLog 检查图像是否正确加载，打印图像的 CGSize。- 确保框架设置正确

您可以调用 [UIImage imageNamed:@"button"]，它会根据设备查找正确的视网膜或不查找图像

# java - Eclipse 中的 Maven 项目

> ID：11619841
> 
> 赞同：1
> 
> 时间：2012-07-23T20:16:00.727
> 
> 标签：java, eclipse, maven, eclipse-plugin

我有 Eclipse: `eclipse-jee-juno-win32`。我需要用它创建 Maven 项目，但问题是，我一直在寻找如何安装 maven 插件或其他东西，我可以创建 maven 项目。不幸的是我什么也找不到。

任何人都可以向我提供一些如何在 Eclipse 中创建 Maven 项目的信息吗？以前我一直在使用 IntelliJ，但现在我需要使用 Eclipse，这是我第一次运行它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T21:49:12.500

I have been using Maven for some time now and a very easy way to use it in Eclipse is:

1.  Open Eclipse and go to: Help / Eclipse Marketplace
2.  Insert on search: "Maven" and look for "Maven Integration for Eclipse WTP" and install it
3.  If the installation was successfully made you should see in Window/Preferences the Maven option in the left.
4.  After this I would advice you to download the last version from here: [http://maven.apache.org/download.html](http://maven.apache.org/download.html) and put it on a folder in C partition(or other partitions) - just remember that the path to the downloaded maven shouldn't contain spaces (you will have errors) - for example, my path is: "c:\Apache_Maven\apache-maven-3.0.4..."
5.  When you download it, go in Eclipse -> Window -> Preferences -> Maven (from left menu and expand it) -> Installations -> and add you path to the downloaded maven.
6.  To create the project: New -> Other -> Maven -> Maven Project -> and search on filter the archetype you would like to use (for example: use maven-archetype-webapp for web application etc.). Click Next and put your project details: Group Id, Artifact Id, Version etc.
7.  When you finished creating the project, the most important file is pom.xml. There you add your dependencies. Another important thing, your maven local repository will be created here: "c:\Users\YOUR_USERNAME\m2."
8.  If you want to run maven install/build/clean etc, you right click on project and click "Run as" -> Select option

I hope these steps will help you start working with Maven. :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T20:26:23.060

您有 2 个选项。

1.  在 Eclipse 中，打开 Help/Eclipse Marketplace，然后编写 maven。您将看到 Eclipse 的 maven 集成。我不喜欢它，因为在我的工作中，我们的项目太大了。但如果你有一些小东西，它可能是最好的选择。

2.  使用 WTP 插件手动构建。添加到您的 pom.xml：

pom.xml：

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-eclipse-plugin</artifactId>
    <configuration>
      <wtpapplicationxml>true</wtpapplicationxml>
      <wtpversion>2.0</wtpversion>
    </configuration>
  </plugin> 
```

然后在你的根目录中（pom.xml 存在的地方）

> mvn eclipse:clean eclipse:eclipse

它创建所有 Eclipse 结构（所有 jar 都包含在您的项目中）。然后您只需要将现有项目导入工作区：文件/导入/常规/现有项目到工作区，选择您的项目目录

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T20:34:20.020

我至少知道两种方法：
1.安装eclipse maven插件m2eclipse：Help->Intall new software：使用：http: [//download.eclipse.org/technology/m2e/releases](http://download.eclipse.org/technology/m2e/releases) [enter]
2.执行`mvn archetype:generate -DarchetypeGroupId=org.apache.maven.archetypes -DarchetypeArtifactId=maven-archetype-quickstart`。这将创建基本的 Maven 项目结构。然后，在生成 pom.xml 的文件夹中执行： mvn eclipse:eclipse
您还可以执行`mvn archetype:generate`并从数百个预定义的项目类型（archietypes）中选择一种

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T20:37:20.017

您可以下载[Springsource Tool Suite](http://www.springsource.com/developer/sts) (STS) 并创建模板 maven 项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T15:38:40.833

您还可以安装 JBoss Tools，它为 JSF、Seam、Spring 等各种原型设置了 Maven 插件。如果您使用的是 Indigo，请选择 JBoss Tools 3.3 Final；对于 Juno，请选择 JBoss Tools 3.7 或 4

# python - 如何使用请求模块诊断客户端证书错误？

> ID：11619842
> 
> 赞同：0
> 
> 时间：2012-07-23T20:16:03.443
> 
> 标签：python, client-certificates, python-requests

我正在编写验证我们的 JSONRPC 服务器的测试，并且我想使用[requests 模块](http://docs.python-requests.org/en/latest/index.html)来测试设置无效的 Content-Length 和 Content-Type 标头等内容。但是，我们的服务器需要有效的客户端证书，而我不能让 requests 模块正确使用我的客户证书[，如他们的 turorial 中所述](http://docs.python-requests.org/en/latest/user/advanced/#ssl-cert-verification)。

如果我只是打开一个套接字并手动发送数据，它就可以正常工作：

```
>>> import socket, ssl
>>> s = """\
... POST /jsonrpc HTTP/1.1
... Host: example.com
... Content-Length: 77
... 
... {"params": [{"example": "parameter"}], "id": 1, "method": "example.function"}\
... """.replace("\n", "\r\n")
>>> sock = socket.create_connection(("example.com", 443))
>>> sock = ssl.wrap_socket(sock, keyfile = "key.pem", certfile = "cert.pem")
>>> sock.sendall(s)
144
>>> print(sock.recv(4096) + sock.recv(4096))
HTTP/1.1 200 OK
Date: Mon, 23 Jul 2012 19:50:17 GMT
Server: CherryPy/3.2.0
Content-Length: 53
Content-Type: application/json
Set-Cookie: session_id=4ee3f4c435aee126c8042d4fba99962a48ca0a37; expires=Mon, 23 Jul 2012 20:20:17 GMT; Path=/; secure
Connection: close

{"jsonrpc": "2.0", "id": 1, "result": "Hello World!"} 
```

但是当我使用 requests 模块做同样的事情时，它失败了：

```
>>> import requests
>>> data = '{"params": [{"example": "parameter"}], "id": 1, "method": "example.function"}'
>>> r = requests.post("https://example.com/jsonrpc", data = data, headers = {"Content-Length": "77"}, timeout = 2, verify = False, cert = ("cert.pem", "key.pem"))
>>> print r.content
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>403 Forbidden</title>
</head><body>
<h1>Forbidden</h1>
<p>You don't have permission to access /jsonrpc
on this server.</p>
<hr>
<address>Apache/2.2.15 (Red Hat) Server at example.com Port 443</address>
</body></html> 
```

所以我不仅不知道为什么会失败，我什至不知道如何找出问题所在。我可以尝试获得更改我们的 Apache 服务器设置以提高日志记录的权限，这可能会对此有所了解。但是客户端有什么方法可以找出失败的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:58:28.663

当我升级到最新版本的请求模块时，这个问题就消失了。我仍然想知道如何诊断这些证书错误，所以如果有人知道，请发布答案！

# vb.net - 使用代码在 VisualBasic.NET 中创建 GUI

> ID：11619844
> 
> 赞同：1
> 
> 时间：2012-07-23T20:16:14.003
> 
> 标签：vb.net, visual-studio, user-interface

我曾经用 Java 编程，但我正在考虑转移到 VB.NET 做一些事情。我有 Visual Studio 2010 Express，我知道它有一个表单设计器，但我不喜欢将它们用于商业应用程序，因为组件有时看起来不像正确对齐，或者没有正确调整大小等。所以我真的我要问的是，有没有像在 Java 中那样创建一个 GUI（使用 LayoutManagers 和其他东西）？

另外，当我谈到这个话题时，我是否必须购买 Visual Studio 才能被允许开发和销售商业应用程序？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:19:05.303

创建像 Java 这样的 GUI 真的已经过时了……

看看WPF！

使用 WPF，您可以使用 XAML 创建您的 GUI。您会发现这与使用 layoutmanagers 等非常相似（几个月前我也做出了完全相同的选择）

不知道为什么要买VS，对不起。

参考：http: [//msdn.microsoft.com/en-us/library/aa970268.aspx](http://msdn.microsoft.com/en-us/library/aa970268.aspx)

奖励：如果您可以使用 WPF，则可以使用 Silverlight ^^

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T20:21:27.270

如果您愿意，您当然可以手动布置所有代码。事实上，在 Visual Studio 中，如果您创建一个表单，它将有一个相应的 Designer 类，其中包含所有这些代码。

例子：

*   Form1.vb
*   Form1.designer.vb

***注意 - 您需要单击解决方案资源管理器上方的“显示所有文件”按钮才能查看这些文件。**

如果您查看设计器类，您可以看到所有控件属性。（textBox1.Size、textBox1.Location 等）（见下面的截图）

然而，这确实是很难做到的。Visual Studio 确实具有自动对齐功能，以及可让您对齐控件并对齐顶部、中间、底部、左侧、右侧等的按钮，因此正确对齐不是问题。

您确实可以使用设计器获得绝对的控制权。这适用于免费版本以及昂贵的版本。

![在此处输入图像描述](../Images/93ac310101fbee3c991ab6e8eaffd0c7.png)

# javascript - Ustream 状态码坏了？

> ID：11619849
> 
> 赞同：0
> 
> 时间：2012-07-23T20:16:35.043
> 
> 标签：javascript, jquery, html, api

这是我在我的网站中使用的代码。出于某种原因，我什么也没得到。

```
<div style="position:absolute; left:0px; top:0px; width:1200px; height:63px; opacity: 0;" ondrag="return false"; ondragstart="return false"; oncontextmenu="return false;"">

    <img src="wpimages/wpa570f7e0.png" width="1200" height="63" border="0" id="statuslive" name="statuslive" title="" alt="" onload="OnLoadPngFix()" >
</div>

<script src="http://code.jquery.com/jquery-latest.js"></script>
<style>
    #statuslive {
        display: block;
        position: fixed;
        left: 0;
        top: 0;
        width: 100%;
        z-index: 100001;
        padding: 0;
    }
</style>
<script>
    var query = 'http://api.ustream.tv/json/channel/codtelevision/getValueOf/status?key=my key only';

    function run() {
        $.getJSON(query, function (data) {
            if (data['results'] == 'live') {
                document.getElementById("statuslive").style.opacity = "1";
                alert('Live');
            } else {
                document.getElementById("statuslive").style.opacity = "0";
                alert('Offline');
            }
        });
        clearTimeout(to);
        setTimeout(run, 1000);
    }
    run();
</script>​​​​​ 
```

即使我在现场，图像也不会显示。我尝试使用最新版本的 jquery，但仍然没有图像。

这就是我得到的：

```
{"results":"offline","msg":null,"error":null,"processTime":true,"version":"mashery-r10"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T20:49:14.860

尝试`run`在 dom 就绪时执行该函数。
而不是函数调用

```
run(); 
```

写这个：

```
$(document).ready(function(){
    run();
}); 
```

# javascript - 函数返回未定义

> ID：11619852
> 
> 赞同：-1
> 
> 时间：2012-07-23T20:16:41.517
> 
> 标签：javascript, arrays, undefined

在做一个项目时，我遇到了这个问题，我的数组“slicetable”每次都返回未定义，我不知道如何解决这个问题。我有一个函数可以生成加密密钥长度的可能性数组 - 然后我需要将文本拆分为第 n 个密钥的单个字符串，直到“密钥”的长度。我已经在这个问题上工作了 4 个小时，但不知道从哪里开始。如果有人可以推荐一个解决此类问题的好策略，并帮助我解决这个问题，那就太好了——我对这一切还是很陌生。

```
function vigenerekey(text, max) {
    // Standardize the text
    text = text.split(" ").join("").toUpperCase();
    // Obtain our list of key length probabilities
    var probabilities = vigenerekeylength(text, max);
    // Extend the Math.max to arrays
    Array.max = function(array){
        return Math.max.apply(Math, array);
    };

    // Find the position of the most probable key length
    for (var d = 0; d <=12; d++) {
        if (probabilities[d] === probabilities.max) {
            return;
        }
    }
    // Slice the text into [d] parts (the length of the key)
    var slicetable = ['','','','','','','','','','','','','','','','','','','','',''];
    var chiresults = [];
    for (var e = 0; e <= d; e++){
        for (f = 0; f <= text.length; f++) {
            if (f % e === 0) {
                slicetable[e] += text.charAt(f);        
            }
        }
    return slicetable;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:25:08.610

你不是这个意思吗：（break而不是return）

```
// Find the position of the most probable key length 
for (var d = 0; d <=12; d++) { 
    if (probabilities[d] === probabilities.max) { 
        break;
    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T20:40:28.103

您的问题是您的 for 循环中的 return 语句。你想放

```
break; 
```

代替

```
return; 
```

* * *

我的第一个答案有错字（我是第一个发布答案的人），版主删除了它。我修正了错字，但它说我无法取消删除它......所以我会再试一次。

# apache-flex - flex 弹出窗口未正确显示

> ID：11619854
> 
> 赞同：0
> 
> 时间：2012-07-23T20:16:49.267
> 
> 标签：apache-flex, actionscript, popup

在我的 flex 应用程序中，有一个随机行为的弹出窗口。大多数情况下，弹出窗口正常工作，但有时其内容无法正确呈现。只有一些标签显示在灰色背景上。截图：

正确的弹出：

![](../Images/63cbb6770182038612908d326d808625.png)

弹出错误：

![](../Images/5ea34fb05a21a7ed1dd2da9841a75fe3.png)

我使用函数 PopUpManager.createPopUp() 来创建弹出窗口。

有谁知道为什么会这样？谢谢阅读！

# sql - 在物化视图中刷新

> ID：11619855
> 
> 赞同：0
> 
> 时间：2012-07-23T20:16:58.030
> 
> 标签：sql, oracle10g, materialized-views

我一直在尝试理解物化视图的概念，但无法获得它的确切功能，除了它是不同服务器中表的物理表（副本）。

我试过以下

```
CREATE MATERIALIZED VIEW TEMP_MV
BUILD DEFERRED
REFRESH COMPLETE
ON DEMAND
AS
SELECT C1,C2,C3 FROM TAB; 
```

在这里我使用过`BUILD DEFERRED`，以便稍后我将只获得基表的结构我可以使用 REFRESH 获取记录，但是我如何执行 REFRESH

我什至尝试过`BUILD IMMEDIATE`让它显示记录，但是如果我在基表中插入了新记录，我将无法在 MV 中获取这些新记录。

```
CREATE MATERIALIZED VIEW TEMP_MV
BUILD IMMEDIATE
REFRESH COMPLETE
ON DEMAND
FOR UPDATE
AS
SELECT C1,C2,C3 FROM TAB; 
```

我正在使用 ORACLE 10G。请帮助我更好地理解MV。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:23:07.327

如果您没有在您的物化视图定义中指定一个时间表，并且物化视图未定义为在提交时刷新，则您需要调用[`DBMS_MVIEW.REFRESH`](http://docs.oracle.com/cd/B10500_01/server.920/a96568/rarmviea.htm#94135)以刷新物化视图中的数据。这就是`REFRESH COMPLETE ON DEMAND`所指的“需求”——您必须告诉物化视图何时刷新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-12T02:24:10.340

首先在基础关系上创建日志。
我使用 emp 表作为基础关系，并且我想在提交 1 秒后更新物化视图。
因此，使用此查询在基本关系上
**创建日志 在 emp 上创建物化视图日志；**
然后
**创建物化视图测试
刷新快速
启动 sysdate
next sysdate+(1/(24*60*60))
as
select * from emp;**

# php - 协同点火器；活动记录类

> ID：11619861
> 
> 赞同：0
> 
> 时间：2012-07-23T20:17:27.700
> 
> 标签：php, mysql, codeigniter, join, sql-order-by

您好，我的问题是我只想获取“last_...”的最后一个主题。一个简单的 order_by 将不起作用，因为它也会对论坛进行排序，这是我不想要的。我到目前为止的代码。我在 CodeIgniter 的内置 Active Records 中执行此操作。

```
return $this->db->select('forums.*,')
        ->select('Count(topics.id) threads, Count(replies.id) replies')
        ->select('topics.url last_post_url, topics.name last_post_name, topics.created last_post_date')
        ->select('users.url user_url, users.name user_name, ranks.name user_rank')
        ->from('forums')
        ->join('topics', 'topics.f_id = forums.id', 'left')
        ->join('replies', 'replies.t_id = topics.id', 'left')
        ->join('users', 'users.id = topics.a_id', 'left')
        ->join('ranks', 'users.status = ranks.id','left')
        ->group_by('forums.id')
        ->get()
        ->result(); 
```

如果不清楚我要做什么；我希望它获得论坛，我希望它在每一行中添加数量或主题（工作）、回复数量（工作）以及最后发帖的人。

原始查询

```
SELECT `forums`.*, Count(topics.id) threads, Count(replies.id) replies, `users`.`url` user_url, `users`.`name` user_name, `ranks`.`name` user_rank
FROM (`forums`)
LEFT JOIN `topics` ON `topics`.`f_id` = `forums`.`id`
LEFT JOIN `replies` ON `replies`.`t_id` = `topics`.`id`
LEFT JOIN `users` ON `users`.`id` = `topics`.`a_id`
LEFT JOIN `ranks` ON `users`.`status` = `ranks`.`id`
GROUP BY `forums`.`id` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:37:39.710

我认为您需要使用`result_array()`而不是`result()`. 我可能错了，但我就是这样做的。

此外，我建议您使用 PHPMyAdmin 或您使用的任何工具创建 SQL 请求，这样您就可以实际看到您从请求中得到了什么，然后将其“翻译”为 CodeIgniter 语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T04:22:35.193

您是否按照用户指南尝试过 $row = $query->last_row()：http: [//codeigniter.com/user_guide/database/results.html](http://codeigniter.com/user_guide/database/results.html)

# json - 将 BSON 返回到移动设备有任何问题吗？

> ID：11619871
> 
> 赞同：1
> 
> 时间：2012-07-23T20:17:54.253
> 
> 标签：json, http, mobile, bson

我目前正在编写一些用于移动设备 iphone 应用程序等消费的服务。所以对我来说非常重要的是从我的 http 服务返回到设备的有效负载，我需要它尽可能小。所以我为此选择了json。

但是，我遇到了另一种平均尺寸减少 25% 的类型 - [BSON](http://bsonspec.org/)

有没有人使用过这个，使用它而不是 JSON 有优缺点吗？从 http 服务返回的数据大多是具有许多复杂类型属性的简单对象，或者可能是对象列表。

还是我应该查看另一种可能会进一步减少有效负载的数据类型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T12:54:06.727

我用 JSON 和 BSON 在 Android 3.2 上做了一些性能测试。我使用的框架是 gson 和 bson4jackson。服务器是使用 Jersey 构建的 Java REST API。在该场景中，我将客户端上的 Java 对象编组为 JSON/BSON，通过 HTTP 将其发送到服务器，对其进行解组，如果解组过程成功，则以 200 OK 响应。

结果是，BSON 在较大的文件（约 120 kb 或更多）上更快，在小文件上 JSON 显然更快。

原因是 BSON 用一些额外的数据扩展了数据格式以加速解析，这导致文件更大，特别是对于小文档。

我在 iOS 上尝试了同样的方法，但我找不到（工作的）BSON 框架来解码 BSON。BSONKit 在 iOS 上为某些元素抛出错误。如果有人知道另一个工作框架，如果你能告诉我，我会很高兴。

顺便说一句：使用 JSON 的打包率也更好，最大约为 135 kb。恕我直言，如果你只需要处理大文件，你应该只使用 BSON，因为 120 kb 或更多对于移动设备和服务器之间的常规请求来说是一个非常大的大小。

# android - 如何在 BaseAdapter 上实现 getFilter？

> ID：11619874
> 
> 赞同：3
> 
> 时间：2012-07-23T20:18:00.213
> 
> 标签：android, listview, filter, baseadapter

我正在尝试在基本适配器上实现 getFilter() 以过滤掉列表上的搜索结果。有没有关于如何实现 getFilter() 的示例？

MainActivity.java

```
 final AppInfoAdapter adapter = new AppInfoAdapter(this, Utilities.getSystemFilteredApplication(this), getPackageManager());

        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
           adapter.getFilter().filter(s); //Filter from my adapter
           adapter.notifyDataSetChanged(); //Update my view
        } 
```

AppInfoAdapter.java

```
package com.example.permission;

import java.util.List;

import android.content.Context;
import android.content.pm.ApplicationInfo;
import android.content.pm.PackageManager;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.BaseAdapter;
import android.widget.Filter;
import android.widget.Filterable;
import android.widget.ImageView;
import android.widget.TextView;

public class AppInfoAdapter extends BaseAdapter implements Filterable{
    private Context mContext;
    private List mListAppInfo;
    PackageManager mPackManager;

    public AppInfoAdapter(Context c, List list, PackageManager pm) {
        mContext = c;
        mListAppInfo = list;
        mPackManager = pm;
    }

    public int getCount() {
        return mListAppInfo.size();
    }

    public Object getItem(int position) {
        return mListAppInfo.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        // get the selected entry
        ApplicationInfo entry = (ApplicationInfo) mListAppInfo.get(position);

        // reference to convertView
        View v = convertView;

        // inflate new layout if null
        if(v == null) {
            LayoutInflater inflater = LayoutInflater.from(mContext);
            v = inflater.inflate(R.layout.layout_appinfo, null);
        }

        // load controls from layout resources
        ImageView ivAppIcon = (ImageView)v.findViewById(R.id.ivIcon);
        TextView tvAppName = (TextView)v.findViewById(R.id.tvName);
        TextView tvPkgName = (TextView)v.findViewById(R.id.tvPack);

        // set data to display
        ivAppIcon.setImageDrawable(entry.loadIcon(mPackManager));
        tvAppName.setText(entry.loadLabel(mPackManager));
        tvPkgName.setText(entry.packageName);

        // return view
        return v;
    }

    public Filter getFilter() {
        // TODO Auto-generated method stub
        return null;
    }

} 
```

编辑：编辑代码并添加完整的 AppInfoAdapter.java

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T13:23:48.437

**在您的适配器中放置此类以在 getfilter 方法中使用它**

```
//this is a simple class that filtering the ArrayList of strings used in adapter

public class filter_here extends Filter{

        @Override
        protected FilterResults performFiltering(CharSequence constraint) {
            // TODO Auto-generated method stub

            FilterResults Result = new FilterResults();
            // if constraint is empty return the original names
            if(constraint.length() == 0 ){
                Result.values = Original_Names;
                Result.count = Original_Names.size();
                return Result;
            }

            ArrayList<String> Filtered_Names = new ArrayList<String>();
            String filterString = constraint.toString().toLowerCase();
            String filterableString;

            for(int i = 0; i<Original_Names.size(); i++){
                filterableString = Original_Names.get(i);
                if(filterableString.toLowerCase().contains(filterString)){
                    Filtered_Names.add(filterableString);
                }
            }
            Result.values = Filtered_Names;
            Result.count = Filtered_Names.size();

            return Result;
        }

        @Override
        protected void publishResults(CharSequence constraint,FilterResults results) {
            // TODO Auto-generated method stub
            Names = (ArrayList<String>) results.values;
            notifyDataSetChanged();
        }

    } 
```

**在 getfilter 中从它返回实例**

```
@Override
    public Filter getFilter() {
        // TODO Auto-generated method stub
        return filter;
    } 
```

[完整的例子](https://stackoverflow.com/questions/12456525/how-to-filter-listview-using-getfilter-in-baseadapter/14359161#14359161)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-31T01:54:42.897

这几乎让我死了:)

1.  像这样实现你的 BaseAdapter：
2.  在你的公共适配器类中定义一个 List 的 ArrayList，它将包含你原始列表的临时项目。

    ```
    public class MyAdapter extends BaseAdapter implements Filterable{

        public static ArrayList<String> temporarylist;
        public static ArrayList<String> OriginalList;
        private Activity activity;

        public MyAdapter(Activity activity, ArrayList<String> OriginalList) {
             super();
             this.activity=activity;
             this.OriginalList = OriginalList;
             temporarylist=OriginalList;

        }
        .
        .
        . 
    ```

3.  使用以下代码创建 getFilter() 方法[作为示例]：

    ```
    public Filter getFilter() {
        Filter filter = new Filter() {

        @SuppressWarnings("unchecked")
        @Override
        protected void publishResults(CharSequence constraint, FilterResults results) {
            temporarylist=(ArrayList<String>)results.values;
            notifyDataSetChanged();
        }

        @Override
        protected FilterResults performFiltering(CharSequence constraint) {
            FilterResults results = new FilterResults();
            ArrayList<String> FilteredList= new ArrayList<String>();
            if (constraint == null || constraint.length() == 0) {
                // No filter implemented we return all the list
                results.values = OriginalList;
                results.count = OriginalList.size();
            }
            else {
                for (int i = 0; i < OriginalList.size(); i++) {
                    String data = OriginalList.get(i);
                    if (data.toLowerCase().contains(constraint.toString()))  {
                        FilteredList.add(data);
                    }
                }
                results.values = FilteredList;
                results.count = FilteredList.size();
            }
            return results;
        }
    };
    return filter;
    } 
    ```

最后在您的 EditText 活动中：

```
MyAdapter adapter;
ArrayList<String> items;

ListView list = (ListView) findViewById(R.id.list);
items = new ArrayList<String>();
for (int i=0;i<30;i++){
     items.add("Hello world "+String.valueof(i));
}
adapter = new GameAdapter(this, items);
list.setAdapter(adapter);

EditText inputSearch = (EditText) findViewById(R.id.Search_txt);
     inputSearch.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
                // When user changed the Text
                MyActivity.this.adapter.getFilter().filter(cs);
            }

            @Override
            public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                    int arg3) {
                // TODO Auto-generated method stub

            }

            @Override
            public void afterTextChanged(Editable arg0) {
                // TODO Auto-generated method stub                          
            }
        }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T20:30:46.867

你能发布你的完整`AppInfoAdapter`吗？还有任何理由`BaseAdapter`从而不是延伸`ArrayAdapter`？如果您有`ArrayList`对象，请使用`ArrayAdapter`，它已经实现了`Filterable`接口。

实际上你正在使用一个`List`，你的适配器可以重写为`ArrayAdapter`已经是的扩展`Filterable`。

```
public class AppInfoAdapter extends ArrayAdapter<ApplicationInfo> {

    private Context mContext;
    PackageManager mPackManager;

    public AppInfoAdapter(Context c, List<ApplicationInfo> list, PackageManager pm) {
        super(c, 0, new ArrayList<ApplicationInfo>());
        mContext = c;
        mPackManager = pm;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // get the selected entry
        ApplicationInfo entry = (ApplicationInfo) getItem(position);

        // reference to convertView
        View v = convertView;

        // inflate new layout if null
        if(v == null) {
            LayoutInflater inflater = LayoutInflater.from(mContext);
            v = inflater.inflate(R.layout.layout_appinfo, null);
        }

        // load controls from layout resources
        ImageView ivAppIcon = (ImageView)v.findViewById(R.id.ivIcon);
        TextView tvAppName = (TextView)v.findViewById(R.id.tvName);
        TextView tvPkgName = (TextView)v.findViewById(R.id.tvPack);

        // set data to display
        ivAppIcon.setImageDrawable(entry.loadIcon(mPackManager));
        tvAppName.setText(entry.loadLabel(mPackManager));
        tvPkgName.setText(entry.packageName);

        // return view
        return v;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T20:26:29.583

您需要返回一个`Filter`. 编写过滤器、子类`Filter`并实现`performFiltering`and `publishResults`。请参阅[文档](http://developer.android.com/reference/android/widget/Filter.html)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-16T10:55:01.967

一般程序

1.  在 ListView 上启用文本过滤
2.  更改您的 baseadapter 以存储列表的**两份**副本，一份是原始的，一份是过滤的。
3.  更改 BaseAdapter 中的所有访问引用以引用**Filtered list**，而不是原始列表。
4.  在 BaseAdapter 中实现您的过滤器功能。

步骤1：
`listview.setTextFilterEnabled(true);`

第2步：

```
public class AppInfoAdapter extends BaseAdapter implements Filterable{
    private List mListAppInfo;
    private List mListAppInfoFiltered;

public AppInfoAdapter(Context c, List list, PackageManager pm) {
    mContext = c;
    mListAppInfo = list;
    mPackManager = pm;
    mPackManagerFiltered = pm; //added line
} 
```

第 3 步：

```
public int getCount() {
    return mListAppInfoFiltered.size();
}
public Object getItem(int position) {
    return mListAppInfoFiltered.get(position);
}
public View getView(int position, View convertView, ViewGroup parent) {
    // get the selected entry
    ApplicationInfo entry = (ApplicationInfo) mListAppInfoFiltered.get(position); 
```

}

第 4 步：我不确定您的列表是什么类型，所以假设一个字符串列表：

```
@Override
public Filter getFilter() {
    return new Filter() {
        @Override
        protected FilterResults performFiltering(CharSequence constraint) {
            FilterResults results = new FilterResults();
            if (constraint == null || constraint.length() == 0) {
                //no search, so just return all the data
                results.count = mListAppInfo.size();
                results.values = mListAppInfo;
            } else {//do the search
                List<String> resultsData = new ArrayList<>();
                String searchStr = constraint.toString().toUpperCase();
                for (String s : mListAppInfo)
                        if (s.toUpperCase().contains(searchStr)) resultsData.add(s);
                    results.count = resultsData.size();
                    results.values = resultsData;
                }
                return results;
            }

            @Override
            protected void publishResults(CharSequence constraint, FilterResults results) {
                mListAppInfoFiltered = (ArrayList<MyObject>) results.values;
                notifyDataSetChanged();
            }
        };
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-07T08:11:43.330

getFilter() 可以在适配器中被覆盖并返回包含过滤列表的过滤器对象。Filter() 类中有两个关键方法；**performFiltering**和**publishResults**。第一种方法在工作线程中执行过滤，后一种方法返回过滤后的对象列表。

您可以参考下面的示例代码

```
@Override
public Filter getFilter() {

        return new Filter() {

            @Override
            protected void publishResults(CharSequence constraint, FilterResults results) {
                // TODO Auto-generated method stub
                if (results.count == 0) {
                    notifyDataSetInvalidated();
                }else{
                    mListAppInfo = (ArrayList<SampleItem>) results.values;
                    notifyDataSetChanged();
                }
            }

            @Override
            protected FilterResults performFiltering(CharSequence constraint) {
                // TODO Auto-generated method stub
                FilterResults results = new FilterResults();

                if (constraint == null || constraint.length() == 0) {
                    results.values = mListAppInfo;
                    results.count = mListAppInfo.size();
                }else{
                    ArrayList<SampleItem> filter_items = new ArrayList<>(); 
                    for (SampleItem item : mListAppInfo) {
                        if (item.getItemName().toLowerCase().startsWith(constraint.toString().toLowerCase())) {
                            filter_items.add(item);
                        }
                    }
                    results.values =  filter_items ;
                    results.count = filter_items.size();
                }
                return results;
            }
        };
    } 
```

希望你觉得它有用 。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-09-26T04:23:40.917

使用 ArrayAdapter 扩展您的类，然后覆盖方法，并创建过滤器类的对象并返回。

# mongodb - PHP & MongoDB = 502 Nginx 响应并且没有错误日志条目

> ID：11619875
> 
> 赞同：3
> 
> 时间：2012-07-23T20:18:01.267
> 
> 标签：mongodb, nginx, php

每当我尝试从 PHP 内部连接到 MongoDB 时，我的 PHP 进程就会崩溃。

```
 $options = array(
        'replicaSet' => false,
        'persist' => false,
        'connect' => false,
        'username' => false,
        'password' => false
    );

    $mongo = new \Mongo('mongodb://localhost:27017', $options); 
```

以下`php-cli`代码可以正常工作：

```
$ php -a
php > $mongo = new \Mongo('mongodb://localhost:27017');
php > var_dump($mongo);
object(Mongo)#1 (4) {
  ["connected"]=>
  bool(true)
  ["status"]=>
  NULL
  ["server":protected]=>
  string(25) "mongodb://localhost:27017"
  ["persistent":protected]=>
  NULL
} 
```

但是，发生这种情况时，PHP 错误日志中没有任何内容（如果我在它之前抛出异常，则会记录*该*异常）。但是，FPM 和系统日志会捕获以下条目。就好像 PHP 在记录任何内容之前就发生了故障并崩溃了。

```
php5-fpm.log: WARNING: [pool www] child 9261 exited on signal 11 (SIGSEGV)
after 57.894803 seconds from start

syslog: localhost kernel: [12191.961070] php5-fpm[9261]: segfault at 8 ip 
00007f5329b1b371 sp 00007fff37343b68 error 4 in libc-2.13.so[7f5329a97000+197000] 
```

*   PHP 版本 5.3.6-13ubuntu3.8 (API 20090626)
*   MongoDB 1.2.10 扩展
*   苏豪新 v0.9.32.1

### 如何调试看似实际的错误？

## 更新：

我刚刚将我的操作系统升级到 ubuntu 12.04 LTS

*   PHP 版本 5.3.10-1ubuntu3.2 (API 20090626)
*   MongoDB 1.2.12 扩展
*   苏豪新 v0.9.33

但是我仍然有问题。

```
syslog: kernel: [ 6727.997940] php5-fpm[9012]: 
segfault at 8 ip 00007f1fdf8cab91 sp 00007fff7f07a4a8 error 4
in libc-2.15.so[7f1fdf842000+1b3000] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T20:26:21.587

尝试使用 Mongo 1.2.11。似乎 1.2.10 与 php-fpm 有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:42:57.190

似乎问题在于 Mongo 对我的`$options`数组的处理。

```
$options = array(
    'replicaSet' => false,
    'persist' => false,
    'connect' => false,
    'username' => false,
    'password' => false
);

$mongo = new \Mongo('mongodb://localhost:27017', $options); 
```

在以下工作时使进程崩溃

```
$options = array(
    'replicaSet' => false,
    'persist' => false,
    'connect' => false,
    //'username' => false,
    //'password' => false
);

$mongo = new \Mongo('mongodb://localhost:27017', $options); 
```

基本上，除非您也需要，否则不要传递用户名或密码。我想这真的是一个错误。

# linux - 在 Linux 上以批处理模式运行 R：输出问题

> ID：11619877
> 
> 赞同：4
> 
> 时间：2012-07-23T20:18:06.513
> 
> 标签：linux, r, pdf, batch-file, cluster-computing

我在 linux 集群上运行 R 程序，因为它对我的处理器要求很高。我的程序旨在将多个（大约 15 个）绘图作为 PDF 输出到程序收集其输入的文件夹中。

我希望我的程序在后台运行，并在我退出集群时继续运行。

首先，我试过这个：

```
cd /Users/The/Folder/With/My/RScript #changed working directory
nohup ./BatchProgram.R & 
```

但是，这不起作用，因为它将输出附加到一个名为 的文件`nohup.out`中，并且没有输出我需要的任何 PDF。

接下来我尝试了这个：

```
cd /Users/The/Folder/With/My/RScript #changed working directory
R #to run R
source(‘BatchProgram.R’) #to run my program 
```

这给了我想要的输出，但没有在后台运行程序（并且在我退出集群时会停止）。

有人可以告诉我如何获得第二个代码块的输出，同时在后台运行程序并导致它在我注销 linux 集群后继续运行（如第一个代码块）？

非常感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T00:21:45.863

`nohup`在后台运行命令，使其忽略告诉它停止的信号（例如，当您注销时），并将输出重定向到文件。但它必须是一个可执行命令：您可能有错误消息`nohup.out`告诉您`BatchProgram.R`无法运行。

以下应该有效：

```
nohup Rscript ./BatchProgram.R & 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T20:29:52.483

该解决方案已经过测试，您也可以尝试制作它的“nohup”版本，但是将呈现的内容非常适合我。制作 bash 脚本如下（例如 run_R.sh）：

```
#!/bin/sh
R CMD BATCH --slave ./_your_R_script_name.R &
exit 0 
```

然后，使其可运行

```
chmod +x run_R.sh 
```

并像运行文件一样，

```
./run_R.sh 
```

有时您只能看到闪烁的光标（取决于您正在使用的 linux 发行版），但只需按“enter”即可继续

# ruby - Test::Unit如何测试文件操作和文件内容

> ID：11619884
> 
> 赞同：0
> 
> 时间：2012-07-23T20:18:30.837
> 
> 标签：ruby, file, mocking, testunit

我正在寻找一种方法来测试使用带有 test_unit 的 File 类的方法。[这与 Rspec 的问题](https://stackoverflow.com/questions/4070422/rspec-how-to-test-file-operations-and-file-content)实际上是一样的，但如何使它与 test_unit 一起工作。

```
def foo
  File.open "filename", "w" do |file|
    file.write("text")
  end
end 
```

测试将是什么：

```
require 'test/unit'

def test_foo
...
end 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T22:35:47.497

您可以做与 RSpec 问题相同的事情：`foo`接受任何`IO`对象并`StringIO`在测试中使用 a。

```
def foo(io)
  io.write("text")
end 
```

然后

```
require "test/unit"

def test_foo
  testIO = StringIO.new
  foo testIO 
  assert_equal(testIO.string, "text")
end 
```

# bbpress - 登录/注册论坛

> ID：11619886
> 
> 赞同：2
> 
> 时间：2012-07-23T20:18:38.070
> 
> 标签：bbpress

我在子目录“new”的域上安装了带有 bbpress 2 插件的 worpdress。我在菜单中添加了指向我的私人论坛的链接。现在：如果我登录到管理面板，我可以在现场访问论坛、阅读主题、发布消息等。但是当我注销并单击论坛链接时，我收到错误：“/new/forums/forum/qa / 在此服务器中未找到”。

为什么当我登录时我可以使用论坛而当我退出时 - wp 找不到论坛？我想要私人论坛 - 和未登录的注册/登录表格。

# php - 当你对二进制系统有很多权限时该怎么办？

> ID：11619892
> 
> 赞同：3
> 
> 时间：2012-07-23T20:19:07.973
> 
> 标签：php, permissions, binary, bit-manipulation

我打算使用二进制系统来处理我的权限，如下所示：

```
<?php
const POST = 1;
const DELETE = 2;
const UPDATE = 4;
const READ = 8;
const ADMIN = 16;
const ADD_PRODUCT = 32;
const DELETE_PRODUCT = 64;
const ADD_BLOG = 128;

$permission = decbin('5');

if ($permission & POST) { echo "POST <br />"; }
if ($permission & DELETE) { echo "DELETE <br />"; }
if ($permission & UPDATE) { echo "UPDATE <br />"; }
if ($permission & READ) { echo "READ <br />"; }
if ($permission & ADMIN) { echo "ADMIN <br />"; }

?> 
```

有了一些权限，这将运行良好。但是如果我有 40 种不同的权限呢？然后我需要把一些非常大的数字加起来，这很麻烦。

还有其他方法吗？

任何信息或帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T14:32:21.510

1) 使用十六进制来定义常量——它更容易输入。

2) 将单独的权限分解为不同的用户角色。

例如

```
const BLOG_POST      = 0x01;
const BLOG_DELETE    = 0x02;
const BLOG_UPDATE    = 0x04;
const BLOG_READ      = 0x08;
const BLOG_SUBSCRIBE = 0x10;

const ADMIN_IS_ADMIN       = 0x01;
const ADMIN_ADD_PRODUCT    = 0x02;
const ADMIN_DELETE_PRODUCT = 0x04;
const ADMIN_ADD_BLOG       = 0x08; 
```

即使您处理大量数字，它们仍然很容易输入

```
const ADMIN_SOME_PERMISSION   = 0x1000;
const ADMIN_SOME_PERMISSION2  = 0x2000; 
```

# python - 使用 Tkinter 进行 Python GUI 编程

> ID：11619894
> 
> 赞同：0
> 
> 时间：2012-07-23T20:19:15.930
> 
> 标签：python, user-interface, button, tkinter

所以我正在创建一个游戏，现在我决定添加一个 GUI。GUI代码如下所示：

```
master = Tk()
master.wm_title("Main Menu")

a = Button.grid(master, text = "DOMINATE!", command = difficulty)
a.grid(row = 0, column = 0)
a.pack()
mainloop()

b = Button.grid(master, text = "Patch Notes", command = changelog)
b.grid(row = 0, column = 1)
b.pack()
mainloop()

c = Button.grid(master, text = "Credits", command = credit)
c.grid(row = 1, column = 0)
c.pack()
mainloop()

d = Button.grid(master, text = "Rules", command = rules)
d.grid(row = 1, column = 1)
d.pack()
mainloop()

e = Button.grid(master, text = "Quit", command = exit)
e.grid(row = 2, column = 0)
e.pack()
mainloop() 
```

我已经从 Tkinter 导入了函数 *，这只是我 1200 行代码的一个片段。当我尝试运行它时，我收到此错误：

类型错误：必须使用 Button 实例作为第一个参数调用未绑定的方法 grid_configure()（改为获取 Tk 实例）

（Python 对我来说是一种新语言，很抱歉遗漏了任何明显或愚蠢的东西。我对编程也很陌生）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:30:15.720

你想要这样的东西：

```
a = Button(master, text = "DOMINATE!", command = difficulty)
a.grid(row=...,column=...) 
```

还有，不要做

```
a.grid(...)
a.pack(...) 
```

在同一个小部件（甚至在同一个小部件内）上使用`pack`和可能会让您的计算机永远坐在那里，试图在两个几何管理器之间协商合理的布局。`grid`要么只使用包装，要么只使用网格。

最后，您只需要最后一个`mainloop()`. 你应该删除所有其他的——尽管如果你有 1200 行代码，我怀疑更正这些东西会引发其他错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-03T08:31:43.633

主要错误来自'master'，它不是 Button 实例：

```
a = Button.grid(master, text = "DOMINATE!", command = difficulty) 
```

改为：

```
a = Button(master, text = "DOMINATE!", command = difficulty)
Button.grid(master.a,row=0,column=0,rowspan=1,columnspan=1,sticky='wens') 
```

网格放置的线使用 Tkinter 旧样式类的 Button 超类网格方法。但你似乎不需要，所以你可以这样做：

```
a.grid(master.self,row=0,column=0,rowspan=1,columnspan=1,sticky='wens') 
```

正在做 ：

```
a = Button(master, text = "DOMINATE!", command = difficulty).grid(row=0,column=0,rowspan=1,columnspan=1,sticky='wens') 
```

“a”将不是以后可调用的 Button 实例，因为它将是一个等于 NoneType 的网格实例。拆分创建和放置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T21:16:59.047

错误“必须使用 Button 实例调用未绑定的方法 grid_configure()...”来自如下所示的行：

```
a = Button.grid(...) 
```

上面所做的是尝试`grid`在类上调用方法`Button`，而不是在`Button`类的实例上。一般来说，任何“未绑定方法”错误都意味着——你试图在类而不是实例上调用方法。

相反，您必须首先创建`Button`该类的实例，然后调用`grid`该实例。例如：

```
a = Button(...)
a.grid(...) 
```

此外，对同一个小部件同时使用`pack`和`grid`是没有意义的。使用其中一种。如果您使用`grid`，则无需调用`pack`.

最后，`mainloop`设计为在创建所有小部件后仅调用一次。

在相关说明中，根据我的经验，如果将所有布局代码（和）放在一起`grid`，则 GUI 代码更容易维护。对于整个应用程序，不一定全部放在一起，但至少按包含窗口分组。例如，而不是这个：`pack``place`

```
a = Button(...)
a.grid(...)
b = Button(...)
b.grid(...)
... 
```

...我建议这样做：

```
a = Button(...)
b = Button(...)
...
a.grid(...)
b.grid(...) 
```

这种代码组织可以更容易地发现布局问题，例如在同一行或同一列中有多个项目等。

# ruby - 而条件继续注入红宝石

> ID：11619897
> 
> 赞同：-1
> 
> 时间：2012-07-23T20:19:23.250
> 
> 标签：ruby

我想在 ruby​​ 中生成斐波那契数列，直到最大值达到最大值，比如 50000。我写了以下代码段：

```
high = 50000
arr = [0, 1]

while arr.last < high do
  arr.inject{|a, i| arr.push(arr[-2] + arr[-1])}
end

puts arr.last 
```

这会导致程序停止。我实际上是 ruby​​ 的新手，`inject`在 ruby​​ 的同一个语句中是否有一种解决 ifs 和 while 的好方法？对于我正在使用的上述方法，有什么更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:30:58.683

您`inject`没有明显原因使用，`while`+`<<`足以累积值：

```
fibs = [0, 1]
while fibs.last < 50_000
  fibs << fibs[-2] + fibs[-1]
end
fibs.last # 75025 
```

请记住，`inject`折叠一个集合，你在这里没有要折叠的集合，你正在生成一个，`inject`不会帮助你。

# java - hibernate + jtable + 和自动刷新

> ID：11619898
> 
> 赞同：0
> 
> 时间：2012-07-23T20:19:25.797
> 
> 标签：java, hibernate, swing, jtable, refresh

我有我用来呈现来自数据库的数据的应用程序。我正在使用休眠，这很棒。我所需要的只是建立自动刷新 JTable 的机制。

现在我每分钟都在重建表。我想在没有这个过程的情况下刷新单元格。我想出最好的方法是实现表模型。

在一个表格单元格中，我有我的对象（例如用户），问题是当我调用 SQL 查询时，我得到了新的对象列表，并且我从 JTable 中得到了错误。

我知道我可以逐个更新对象，但这不是最佳的。

任何帮助，教程等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T00:01:51.027

在. `doInBackground()`_ [`SwingWorker`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)该`process()`方法允许在 EDT 上更新模型。示例可以在[API](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)、[here](https://stackoverflow.com/a/4637725/230513)和[here](https://sites.google.com/site/drjohnbmatthews/randomdata)中找到。

# oracle11g - 服务器 APACHE 网桥 oracle 表单失败

> ID：11619903
> 
> 赞同：1
> 
> 时间：2012-07-23T20:19:50.233
> 
> 标签：oracle11g, oracleforms, weblogic11g

我在运行它给我的表单时安装了 weblogic 11R1 和 Forms developer 11g

如果我输入网址

```
http://home-PC:8090/forms/frmservlet 
```

> **服务器 APACHE 网桥故障**
> 
> 没有可用于连接的后端服务器：10 秒后超时或幂等设置为 OFF。构建日期/时间：2009 年 10 月 27 日 13:34:24 更改编号：1013

如果我把表单构建器运行时

```
http://home-PC:9001/forms/frmservlet 
```

有时如果我更改端口，http 侦听器可能没有启动或端口已在使用中

这是我的安装设置

> 类型：Oracle Portal、Forms、Reports 和 Discoverer 安装
> 配置选项 中间件主目录位置：C:\Oracle\fmw11g
> Oracle 主目录位置：C:\Oracle\fmw11g\dev11g
> 
> Oracle 实例位置：C:\Oracle\fmw11g\dev11ginst_1
> Oracle 实例： dev11ginst_1 域选项：创建域
> 
> 域名：ClassicDomain
> 域主页：C:\Oracle\fmw11g/user_projects/domains/ClassicDomain 域主机名：home-PC 域端口号：7001
> 用户名：weblogic 自动端口检测：true
> 管理员控制台：`http://home-PC:7001/console`
> EM控制台：`http://home-PC:7001/em`
> EMAgent URL：`http://home-PC:5155/emd/main`
> 表单 URL：`http://home-PC:8090/forms/frmservlet`
> 报告 URL：`http://home-PC:8090/reports/rwservlet`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T20:19:50.233

对于我的问题，我通过复制文件解决了它

**msvcr71.dll**到 windows\system 目录，它可能会因为 windows 更新而丢失，它在 winxp 和 win7 上遇到我看[问题的链接太相似了](http://forums.oracle.com/forums/thread.jspa?threadID=928362&start=0&tstart=60)

[参考1](https://forums.oracle.com/forums/thread.jspa?threadID=1091791)

[参考文献 2](https://cn.forums.oracle.com/forums/thread.jspa?threadID=933484)

> **服务器 APACHE 网桥故障**
> 
> 没有可用于连接的后端服务器：10 秒后超时或幂等设置为 OFF。构建日期/时间：2009 年 10 月 27 日 13:34:24 更改编号：1013

# cakephp - CakePHP：过滤器和外键！不工作

> ID：11619913
> 
> 赞同：-1
> 
> 时间：2012-07-23T20:20:34.157
> 
> 标签：cakephp, filter, foreign-key-relationship

我想在这里理解的是，这个错误是什么意思，我做错了什么？我一定是搞砸了命名约定。

我的模型是产品和类别。类别有hasMany，产品有belongsTo。

[http://webdesign4.georgianc.on.ca/~100141468/comp2084/todo/products/add](http://webdesign4.georgianc.on.ca/~100141468/comp2084/todo/products/add)

[http://webdesign4.georgianc.on.ca/~100141468/comp2084/todo/products/filter/9](http://webdesign4.georgianc.on.ca/~100141468/comp2084/todo/products/filter/9)

名字y

通过 y

**产品控制器**

```
function filter($category_id) {
            $this->set('Product',$this->Product->findAllByCategoryId($category_id));
        } 
```

**添加**

```
$this->loadModel('Category');
$this->set('Categorys',$this->Category->find('list',array('order'=> array('Category.name')))); 
```

**过滤器.ctp**

```
<? foreach($Product as $row): ?>
     <tr><td>
<?=$row['Product']['id']?>
</td><td>
<?=$row['Product']['name']?>
</td><td>
<?=$row['Product']['price']?>
</td><td>
<?=$row['Category']['name']?>
</td><td>
<a href="edit/<?=$row['Product']['id']?>">Edit</a>
    </td></tr>
<? endforeach; ?> 
```

**添加.ctp**

```
<?php
        echo $this ->Form->input('name');
        echo $this ->Form->input('description');
        echo $this ->Form->input('price');
        echo $this ->Form->input('file', array('type' => 'file'));
        echo $this ->Form->input('Category_id');
        echo $this ->Form->end('submit',true); 
        ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:26:05.800

首先做一个`debug($Product);`你看到`Category`钥匙了吗？如果没有，要么将递归设置得更高，甚至更好地使用`Containable`.

对于您的添加，将视图变量名称`categories`更改为并将表单输入字段更改为`category_id`（也就是说，如果您在数据库中遵循了约定，那只是一个错字）

如果类别与产品相关，则不需要`loadModel`.

简单地做`$this->Product->Category->find...`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T21:43:06.720

这很简单……你没有掌握蛋糕的基本原理。我建议再次阅读本书和教程，重点关注命名约定和关联。

您需要这些关联：

```
//product.php
var $belongsTo = array(
    'Category' => array(
        'className' => 'Category',
        'foreignKey' => 'category_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    ));

// category.php
var $hasMany = array(
    'Product' => array(
        'className' => 'Product',
        'foreignKey' => 'category_id'
    )
);

// products_controller.php
function filter($category_id) {
    $this->set('products', $this->Product->findAllByCategoryId($category_id));
}

function add() {
    if (!empty($this->data)) {
        $this->Product->create();
        if ($this->Product->save($this->data)) {
            $this->Session->setFlash(__('The Product has been saved', true));
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('The Product could not be saved. Please, try again.', true));
        }
    }
    $categories = $this->Product->Category->find('list');   
    $this->set(compact(array('categories')));
}

   // filter.ctp
   debug($products); // just to see what data has been returned

   // add.ctp
   echo $this->Form->create('Product');
   echo $this->Form->input('name');
   echo $this->Form->input('description');
   echo $this->Form->input('price');
   echo $this->Form->input('file', array('type' => 'file'));
   echo $this->Form->input('category_id'); // categories
   echo $this->Form->end('submit',true); 
```

清除缓存，这应该可以工作。

# javascript - 更改现有代码以根据接近度进行选择

> ID：11619914
> 
> 赞同：1
> 
> 时间：2012-07-23T20:20:41.507
> 
> 标签：javascript, html, adjustment

当前的 HTML 片段：

```
<ul class="ShippingProviderList">
  <li>
    <label id="shippingMethod_500dae76abe48_0">
      <input id="shippingCheck_500dae76abe48" type="radio" value="0" name="selectedShippingMethod[500dae76abe48]" />
      <span class="ShipperName">My Own Shipping Account (Please make sure that account number is specified within your account page or item will not ship!)</span>
      <em class="ShipperPrice ProductPrice">$0.00</em>
    </label>
  </li>
  <li> 2nd option may or may not be here </li>
</ul> 
```

当前的 Javascript 代码段：

```
<script>
var radio = document.getElementById('shippingCheck_500d6aa9a300e'),
var input1 = document.getElementById('FormField_25'),
input2 = document.getElementById('FormField_26'),
btn = document.getElementById('ML20').getElementsByTagName('input')[0];

btn.onclick = function(e) {
if( radio.checked && input1.value.length >= 20 && input2.value.length >= 20 ) {
    alert('Please provide a Shipping Account Number in either the Billing or Shipping sections in order to use your own Shipping Account.');
    e.preventDefault(); // we all stop the submit from happening.
    e.stopPropagation();
    return false;
}
// otherwise do something or nothing and let the submit happen.
};
</script> 
```

问题是 500d 运输支票是随机生成的，我无法控制。是否可以通过使用包含 My Own Shipping 术语的跨度类“ShipperName”来调整 Javascript 以提取正确的数据，然后在此之前拉出输入字段？或者有没有更好的方法来做到这一点，我错过了？我无法分配 ID、类或以任何方式更改那里生成的实际 html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:32:27.477

如果 jQuery 是可以接受的，你可以使用这个：

```
$("input[id^='shippingCheck']") 
```

使用普通的 Javascript，您可以使用此功能：

```
function wildcard(startingId){
  // get all inputs
  var inputs = document.getElementsByTagName("input");
  // iterate over them
  for ( var i = 0; i < inputs.length; i++ ) {

    if ( inputs[i].nodeType === 1 ) {
      // id start with 'shippingCheck' ?
      if (inputs[i].id.indexOf(startingId) == 0)
      {
         return inputs[i];
      }
    }
  }
} 
```

并这样称呼它：

```
wildcard("shippingCheck") 
```

* * *

你可以试试这个：

```
function fetchInput() {
    var input;
    $(".ShipperName").each(function() {
        if ($(this).text().indexOf("My Own Shipping Account") != -1)
        {
            input = $(this).prev().get(0);
            return;
        }
    });
    return input;
} 
```

并这样称呼它：

```
fetchInput(); 
```

该函数返回 DOM 元素，因此您可以访问该`id`属性，例如，如下所示：

```
var inputId = fetchInput().id; 
```

* * *

您基本上只是希望您的`radio`变量成为对 DOM 元素的引用，对吗？所以你会使用这个：

```
var radio = fetchInput(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:29:09.787

您可以使用 jQuery 进行尝试：

```
var radio = $('[id^="shippingCheck"]'); 
```

这将找到一个 id 以字符串“shippingCheck”开头的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T20:35:32.270

```
var spans = ​document.getElementsByTagName("span"),​​​​​​ span, i, len, node;

​for (i = 0, len = spans.length; i < len; i++) {
    span = spans[i];
    if (span.innerHTML.match(/My Own Shipping/)) {
        node = span;
        while (node && node.nodeName !== "INPUT") {
            node = node.previousSibling;
        }
        console.log(node);  // This is the input element before that SPAN.
        break;        
    }
} 
```

一个 DOM 遍历库会让这一切变得更简单。​​例如，使用 jQuery：

```
console.log($("span:contains(My Own Shipping)").prev("input")[0]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T20:35:32.827

试试这个：

```
var radio = $('.ShipperName:contains("My Own Shipping")').siblings(':radio'); 
```

`.ShipperName`它会在包含“我自己的运输”的旁边找到一个单选按钮 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T21:04:57.387

如果您想通过纯 javascript 获取上一个元素，您可以使用该`previousSibling`属性进行一些检查，如下面的函数。在您的情况下，参数 n 是 span 元素。

```
function getPreviousSibling(n) {
    var x = n.previousSibling;
    while (x.nodeType != 1) { // check if it's an element node
        x = x.previousSibling;
    }
    return x;
} 
```

但是，如果您使用类“ShipperName”获得跨度的前一个输入元素，您将获得多个无线电输入（因为列表中可能有多个项目）。你仍然需要做额外的事情来获得你想要的，但至少你可以使用无线电输入的 id 并用它做一些事情。

请参阅[此处的示例](http://jsfiddle.net/FXeZZ/1/)。

如果使用 jQuery，选择元素会更容易。

# django - 在 Django 中同时显示用户的个人和组视图

> ID：11619916
> 
> 赞同：1
> 
> 时间：2012-07-23T20:20:42.240
> 
> 标签：django, permissions, views, usergroups

我无法同时显示用户的个人和组条目。

我的组模型是这样写的：

```
class Group(models.Model):
    name = models.CharField(max_length=100)
    users = models.ManyToManyField(User, blank=True, null=True, related_name='entry_users') 
```

我的入门型号：

```
class Entry(models.Model):
    ###
    authorized_groups = models.ManyToManyField('Group', null=True, blank=True, related_name='entry_groups')
    objects = EntryManager() 
```

在`Entry`模型之前，我编写了一个带有用户过滤器的条目管理器。

如果我想显示用户的个人条目，我使用以下内容：

```
class EntryManager(models.Manager):
     def for_user(self, user):
        return super(EntryManager, self).get_query_set().filter(creator=user) 
```

如果我想显示用户的组条目，我使用以下内容：

```
class EntryManager(models.Manager):
     def for_user(self, user):
        return super(EntryManager, self).get_query_set().filter(authorized_groups=user) 
```

我想将`EntryManager`模型的两个版本合二为一。现在，我可以使用其中一个或，但不能同时使用。有小费吗？

如果有任何区别，在 中`views.py`，我有一行代码可以抓取用户有权访问的所有对象：

```
entries = Entry.objects.for_user(request.user) 
```

也许我应该保留两个条目管理器并编写两个不同的视图 - 一个用于单个对象，另一个用于组对象。不过那不会很干。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:22:13.000

我保留了第一个`EntryManager`：

```
class EntryManager(models.Manager):
    def for_user(self, user):
        return super(EntryManager, self).get_query_set().filter(creator=user) 
```

并写了一个`GroupManager`：

```
GroupManager(models.Manager):
    def for_user(self, user):
        return super(EntryManager, self).get_query_set().filter(authorized_groups=user) 
```

然后我将两者都放在我的`Entry`模型下：

```
class Entry(models.Model):
    ###
    objects = EntryManager()
    grpobjects = GroupManager() 
```

在`views.py`我有这个：

```
entries = Entry.objects.for_user(request.user) | Entry.grpobjects.for_user(request.user) 
```

似乎可以解决问题。如果有更好的方法，请告诉我。

# php - 如何获取文件的 DocComment？

> ID：11619918
> 
> 赞同：2
> 
> 时间：2012-07-23T20:20:48.573
> 
> 标签：php, string, parsing, documentation

该文件如下所示：

```
<?php
/**
 *  Title
 *
 *  Description
 *  bla bla..
 *
 *  @since 1.0
 *  @author lolcat
 */

/**
 *  Some class..
 *
 *  @since 1.0
 */
class BlaBla{

}
.. 
```

我想从中获得第一个 DocComment。用PHP可以吗？

反射似乎有这样的功能，但它只适用于类或函数，而不是文件:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T20:38:43.767

这种事情有一个基本的扩展。它被称为[Tokenizer](http://www.php.net/manual/en/book.tokenizer.php)。

使用[`token_get_all()`](http://www.php.net/manual/en/function.token-get-all.php)功能。

返回数组中的每个标记都有它的 id。有定义它们的全局常量：[http](http://www.php.net/manual/en/tokens.php) ://www.php.net/manual/en/tokens.php 。

如果您使用 PHP >= 5.3：

```
$s = file_get_contents('tokexample.php');

$docblock = reset(array_filter(token_get_all($s), 
                  function($item) { 
                      return $item[0] == T_DOC_COMMENT; 
                  }));

echo $docblock[1];

/**
 *  Title
 *
 *  Description
 *  bla bla..
 *
 *  @since 1.0
 *  @author lolcat
 */ 
```

别的：

```
function filter($item) {
    return $item[0] == T_DOC_COMMENT;
}

$docblock = reset(array_filter(token_get_all($s), "filter"));

echo $docblock[1]; 
```

# c# - i 整数的 cmd.ExecuteNonQuery 值从 0 变为 -1

> ID：11619919
> 
> 赞同：5
> 
> 时间：2012-07-23T20:20:52.497
> 
> 标签：c#, asp.net, sqlcmd

在这里，我在数据库中动态创建表。用户根据自己的意愿输入名称并选择语言单选按钮。所以问题是在执行 cmd.ExecuteNonQuery 之后，我整数的值从 0 变为 -1。并显示该表无法创建，但是当我转到数据库时，它已经成功创建。请让我知道我在哪里做错了。提前感谢！

```
protected void btnpaper_Click(object sender, EventArgs e)
    {
        try
        {                
                string conn = ConfigurationManager.ConnectionStrings["sqlconn"].ConnectionString;
                SqlConnection con = new SqlConnection(conn);
                con.Open();
                char[] arr = new char[] {'n','g','l','i','s','h'};
                string str = "CREATE TABLE " + Label1.Text.Trim() + 
                             txtpaperset.Text.Trim()+ rbtnEng.Text.TrimEnd(arr) +
                             "(" + "quesNo int NOT NULL PRIMARY KEY, " + 
                             "question varchar(1000) NOT NULL," + 
                             "ansA varchar(500) NOT NULL, " + 
                             "ansB varchar(500) NOT NULL, " + 
                             "ansC varchar(500) NOT NULL, " + 
                             "ansD varchar(500) NOT NULL, " + 
                             "rightAns varchar(50) NOT NULL " + ")";                    
                SqlCommand cmd = new SqlCommand(str, con);
                int i = cmd.ExecuteNonQuery();
                if (i > 0)
                {
                    lblerrormsg.Visible = true;
                    con.Close();
                }
                else
                {
                    lblerrormsg.Text = "Table Not Created Please Try with Different Name!";                        
                    con.Close();
                }                

        }
        catch (System.Exception excep)
        {
            MessageBox.Show(excep.Message);
        }      
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T20:24:31.123

取自 MSDN Remarks on [SqlCommand.ExecuteNonQuery](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)

> 对于 UPDATE、INSERT 和 DELETE 语句，返回值是受命令影响的行数。当正在插入或更新的表上存在触发器时，返回值包括受插入或更新操作影响的行数以及受一个或多个触发器影响的行数。对于所有其他类型的语句，返回值为 -1。如果发生回滚，则返回值也是 -1。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-23T20:24:04.060

[`SqlCommand.ExecuteNonQuery`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)来自（强调我的）的文档：

> 对于 UPDATE、INSERT 和 DELETE 语句，返回值是受命令影响的行数。当正在插入或更新的表上存在触发器时，返回值包括受插入或更新操作影响的行数以及受一个或多个触发器影响的行数。**对于所有其他类型的语句，返回值为 -1。**如果发生回滚，则返回值也是 -1。

您的语句是 UPDATE、INSERT 还是 DELETE 语句？没有。因此你得到-1。

不清楚`i`“从” 0 到 -1 的值是什么意思。它永远不是 0。它没有*值*，直到它从`ExecuteNonQuery`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T20:27:54.980

是设计使然吗？

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)

并且：

[cmd.executenonquery 在 vb.net windows 应用程序中返回 -1](https://stackoverflow.com/questions/6210826/cmd-executenonquery-is-returning-1-in-vb-net-windows-application)

你是说你得到-1，对吗？

编辑：要回答您问题的最后一部分，请参阅：

[检查 SQL Server 中是否存在表](https://stackoverflow.com/questions/167576/sql-server-check-if-table-exists)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-01T02:40:04.453

公共共享函数 Insert(ByVal SProcedure As String, ByVal parameters() As SqlParameter) As Boolean Using cnn As New SqlConnection(Emplooyes) 试试

```
 Dim cmd As SqlCommand = New SqlCommand(SProcedure, cnn)
            cmd.CommandType = CommandType.StoredProcedure
            cmd.Parameters.AddRange(parameters)

            If cnn.State = ConnectionState.Closed Then
                cnn.Open()
            End If

            Dim Ls As Integer
            Ls= cmd.ExecuteNonQuery()
            If Ls = -1 Then
                Return False
            Else
                Return True
            End If

        Catch ex As Exception
            Return False
        Finally
            cnn.Close()
        End Try
    End Using
End Function 
```

# jquery - 如果body class等于menu li class，则将class添加到li？

> ID：11619920
> 
> 赞同：0
> 
> 时间：2012-07-23T20:20:55.407
> 
> 标签：jquery, javascript, addclass

例如，如果 body 有类 dummy ......如果 li 有相同的类，则在菜单中......应该将新类添加到 li ..请告诉我如何在 jQuery 中做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:24:42.743

如果我正确理解了您的问题，方法如下：

```
$("body.dummy li.dummy").addClass("new"); 
```

选择器选择与 具有相同类的`body.dummy li.dummy`所有标签，然后将类添加到它们。`<li>``dummy``<body>``new`

[http://api.jquery.com/addClass/](http://api.jquery.com/addClass/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T20:24:27.847

```
if($("body").hasClass("dummy") && $("#menu li").hasClass("dummy")){
    $("#menu li").addClass("yourclass");
} 
```

不确定您的菜单 ID 名称是什么，但这应该可以帮助您

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T20:24:39.713

```
$("body.dummy li.dummy").addClass("newclass") 
```

# file - 短文件可以比长文件使用更多的 MFT 记录吗？

> ID：11619921
> 
> 赞同：1
> 
> 时间：2012-07-23T20:21:05.237
> 
> 标签：file, ntfs, ntfs-mft

众所周知，在 NTFS 中，我们将元数据存储在称为 MFT 记录的结构中（其中包含一些运行）。

这本书问下一个问题

> 短文件比长文件使用更多的 MFT 记录吗？

我认为答案是*否定*的——因为如果我们有一个文件，其元数据的大小超过一个 MFT 的大小，那么我们必须使用运行。还有其他建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T13:17:17.797

答案是肯定的。

MFT记录（NT4以前4KB，现在1KB）包含文件属性（如文件名、安全信息、小文件数据等）；其中一些属性可以是常驻的（= 属性头和属性数据都位于 MFT 记录中），或非常驻的（只有 attrbite 头在 MFT 中，属性数据存储在磁盘上的其他位置 - 例如，数据属性通常是非居民）。一些属性必须保持常驻——例如，文件名属性；一些属性可以是驻留的，也可以是非驻留的——例如，数据属性。

如果你有大文件，这意味着 MFT 记录只包含数据属性的属性头，但数据位于其他地方 - 所以即使文件很大，它也只使用一个 MFT 记录；另一方面，如果你有一个很小的文件，但是这个文件有更多的文件名（链接），NTFS 必须分配更多的 MFT 记录来容纳所有文件名属性，它可以跨越许多 MFT 记录（使用称为属性的特殊属性列表）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T02:38:53.213

通常，一个新创建的文件（还没有数据）将成为常驻文件。这意味着只要有足够的可用空间，任何新数据都将放在其 MFT 记录中。随着数据的增长并且不再适合可用的 MFT 记录空间，通过将数据移出 MFT 并进入集群块（并具有运行列表），数据将变为非驻留数据。一个文件是非常驻的，如果数据后来被缩小到一个或零字节，它将永远不会被恢复为常驻文件。

如果文件是`sparse`类型的并且尚未写入数据，则较大的数据并不总是非驻留的。只要写入的数据可以放入其可用的 MFT 记录空间，您就可以拥有 1MB 大小的稀疏文件并且仍然驻留。

如果一个零字节文件有多个硬链接，它甚至可以使用多个 MFT 记录。在这种情况下，它的其他 MFT 记录存储剩余的硬链接名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-17T10:31:10.233

**如果一个小文件的属性列表太大而无法容纳在单个记录中，**那么它可以使用更多的 MFT 记录。

 **> 当文件记录段中没有更多空间用于存储属性时，**将分配额外的文件记录段**并将其插入到称为属性列表的属性中的第一个（或基本）文件记录段中。属性列表指示可以找到与文件关联的每个属性的位置。这包括基本文件记录中的所有属性，但属性列表本身除外。有关详细信息，请参阅[`ATTRIBUTE_LIST_ENTRY`](https://docs.microsoft.com/en-us/windows/desktop/devnotes/attribute-list-entry)。
> 
> [https://docs.microsoft.com/en-us/windows/desktop/devnotes/master-file-table](https://docs.microsoft.com/en-us/windows/desktop/devnotes/master-file-table)

这方面的一个例子是当它有大量的[ADS](https://en.wikipedia.org/wiki/NTFS#Alternate_data_streams_(ADS))时。我创建了一个占用大部分 MFT 记录空间的文件（1000/1024 字节，如下所示）

```
PS D:\> fsutil file queryoptimizemetadata .\test.txt
File metadata optimization                  : None
Attribute list size                         : 0 (0)
File metadata space used                    : 1000 (0x3e8)
File metadata space allocated               : 1024 (0x400)
File metadata space usage                   : 97%
File records count(s)                       : 1
Number of resident attribute(s)             : 3
Number of nonresident attribute(s)          : 8
Total number of attributes                  : 11
Total active file metadata optimization(s)  : 0
Total pending file metadata optimization(s) : 0 
```

在我添加另一个流之后，您可以看到*分配的文件元数据空间*已翻倍至 2048 字节，即 2 条记录，并且`ATTRIBUTE_LIST`必须使用占用 448 字节

```
PS D:\> cat .\test.txt | Set-Content -path .\test.txt -Stream stream8
PS D:\> fsutil file queryoptimizemetadata .\test.txt
File metadata optimization                  : None
Attribute list size                         : 448 (0x1c0)
File metadata space used                    : 1624 (0x658)
File metadata space allocated               : 2048 (0x800)
File metadata space usage                   : 79%
File records count(s)                       : 2
Number of resident attribute(s)             : 4
Number of nonresident attribute(s)          : 9
Total number of attributes                  : 13
Total active file metadata optimization(s)  : 0
Total pending file metadata optimization(s) : 0 
```

如果文件**太碎片化**（或[稀疏文件](https://en.wikipedia.org/wiki/Sparse_file)中的孔太多）并且记录没有足够的空间来存储范围列表，也会发生这种情况。其他可能性是权限太复杂，或者像其他人提到的那样有多个硬链接

> `$ATTRIBUTE_LIST`如果文件：
> 
> *   有大量的硬链接（存在很多文件名属性）。
> *   变得非常碎片化，因此数据运行溢出 MFT 记录。
> *   具有复杂的安全描述符（不适用于 NTFS v3.0+）
> *   有许多命名流，例如数据流。
> 
> [https://flatcap.org/linux-ntfs/ntfs/attributes/attribute_list.html](https://flatcap.org/linux-ntfs/ntfs/attributes/attribute_list.html)

更多信息可以[在 NTFS $MFT 文件是否有子记录中找到？](https://stackoverflow.com/q/30424102/995714)**

# ember.js - 如何使用 Ember.js 和 ember-data 创建新记录？

> ID：11619926
> 
> 赞同：3
> 
> 时间：2012-07-23T20:21:20.253
> 
> 标签：ember.js, ember-data, ember-old-router

我已经从我找到的各种文档和示例中编译了这个示例，但是我还没有找到一个使用路由器和 ember-data 来简单地创建新记录的完整示例，所以这是我的重头戏。

# 这个例子

[http://jsfiddle.net/dmazza/Hb6BQ/4/](http://jsfiddle.net/dmazza/Hb6BQ/4/)

我有一个人 (DS.Model) 有名字和姓氏。

我有一个带有索引和创建路由的路由器，其中创建表单出现在 PeopleView 的出口中。

我使用 Ember.TextField 绑定到使用 App.Person.createRecord({}) 创建的新人员的属性，作为 PersonCreateController 的内容。

请注意，我有意按照@wycats 的建议为每个插座使用单独的控制器：[https ://github.com/emberjs/ember.js/issues/1050#issuecomment-6497907](https://github.com/emberjs/ember.js/issues/1050#issuecomment-6497907)

# 问题

我似乎一遍又一遍地遇到同样的问题。我尝试使用 App.Person.find() 之类的方法，它会告诉我：

```
Uncaught TypeError: Cannot read property 'find' of undefined 
```

这将发生在：

1.  App.Person.find()
2.  App.Person.createRecord({})
3.  App.Store.find(App.Person)
4.  其他几种方法（当我想到它们时，我会更新此列表）

# 问题

1.  我是否使用这些工具以正确的方式创建新记录？
2.  为什么我会在上面收到此错误？（如果你打开你的网络检查器，你会看到这个错误，暂停未捕获的异常并确保你在结果（fiddle.jshell.net）框架中，而不是）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T21:23:02.227

我提出了一些类似的建议，请参阅[http://jsfiddle.net/pangratz666/bb2wc/](http://jsfiddle.net/pangratz666/bb2wc/)：

**车把**：

```
<script type="text/x-handlebars" data-template-name="application">
    <div class='container' id='application'>
        <header>
            <h1>People</h1>
        </header>
        <article>
            {{outlet}}
        </article>
    </div>    
</script>

<script type="text/x-handlebars" data-template-name="people">
    <ul>
        {{#each person in controller}}
            <li>{{person.firstName}} {{person.lastName}}</li>
        {{/each}}
    </ul>
    <button {{action newPerson }}>Create New Person</button>
    <hr/>
    {{outlet}}
</script>

<script type="text/x-handlebars" data-template-name="person_create">
    First name: {{view Ember.TextField valueBinding="firstName"}} <br/>
    Last name: {{view Ember.TextField valueBinding="lastName"}} <br/>
    <button {{action submitForm }}>Save</button>
    <button {{action cancel }}>Cancel</button>
    <h3>Current values: {{firstName}} {{lastName}}</h3>
</script> 
```

**​JavaScript** :

```
App = Ember.Application.create();

App.Person = DS.Model.extend({
    firstName: DS.attr('string'),
    lastName: DS.attr('string')
});

// Note: these properties are expected to be dasherized
App.Person.FIXTURES = [
    {
    "id": 1,
    "first_name": "Joe",
    "last_name": "Smith"},
{
    "id": 2,
    "first_name": "James",
    "last_name": "Dolan"},
{
    "id": 3,
    "first_name": "Jim",
    "last_name": "Carry"}
];

App.Store = DS.Store.extend({
    revision: 4,
    adapter: DS.FixtureAdapter.create()
});

/*
 * Routing
 */
App.Router = Ember.Router.extend({

    enableLogging: true,

    root: Ember.Route.extend({
        index: Ember.Route.extend({
            route: '/',
            connectOutlets: function(router, people) {
                // set the content to all available persons
                router.get('peopleController').set('content', App.Person.find());
                router.get("applicationController").connectOutlet("people");
            },
            index: Ember.Route.extend({
                route: '/'
            }),
            create: Ember.Route.extend({
                route: '/create',
                connectOutlets: function(router, person) {
                    // set/clear the content for the personCreateController
                    router.get('personCreateController').set('content', {});
                    router.get("peopleController").connectOutlet("personCreate");
                },

                // as proposed in https://github.com/emberjs/ember.js/pull/1139
                exit: function(router) {
                    // called when we navigate away from this route: remove
                    // the connected outlet, which is the createPerson view
                    router.get('peopleController').set('view', null);
                },

                submitForm: function(router, event) {
                    // get the content of the personCreateController
                    var hash = router.getPath('personCreateController.content');
                    // create a new person
                    App.Person.createRecord(hash);
                    // navigate back to the index route
                    router.transitionTo('index');
                },

                // cancel button pressed
                cancel: Ember.Route.transitionTo('index')
            }),

            // show the "dialog" for creating a new person
            newPerson: Ember.Route.transitionTo('create')
        })
    })
});

App.ApplicationController = Ember.Controller.extend();
App.PeopleController = Ember.ArrayController.extend();
App.PersonCreateController = Ember.ObjectController.extend();

App.ApplicationView = Ember.View.extend({ templateName: 'application' });
App.PeopleView = Ember.View.extend({ templateName: 'people' });
App.PersonCreateView = Ember.View.extend({ templateName: 'person_create' });

App.initialize();​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T15:40:32.107

随着 pre4 中引入的新 Ember 路由器，我想我会稍微更新一下这个答案。这对我有用（警告：CoffeeScript）：

```
App.Router.map ->
    @resource "posts", ->
        @route "new"

App.PostsNewRoute = Ember.Route.extend
    setupController: (controller, model) ->
        controller.set 'content', {}

App.PostsNewController = Ember.ObjectController.extend
    submitForm: (event) ->
        App.Post.createRecord @content
        @transitionToRoute 'posts.index'

App.PostsNewView = Ember.View.extend
    controller: 'App.PostsNewController' 
```

我的模板看起来像这样：

```
 <script type="text/x-handlebars" data-template-name="posts/new">
      <div class="row">
        <div class="span12">
          <form class="create-post">
            <fieldset>
              <legend>{{_ "Post"}}</legend>
              <label>{{_ "Post Title"}}</label>
              {{view Ember.TextField valueBinding="postTitle"}}
              <!-- etc. etc. -->
            </fieldset>
          </form>
        </div>
      </div>
      <div class="row">
        <div class="span12 push-right">
          <a class="btn btn-primary" {{action "submitForm"}}>{{_ "Save"}}</a>
          {{#linkTo "posts.index" class="btn"}}{{_ "Cancel"}}{{/linkTo}}
        </div>
      </div>
    </script> 
```

我很想听听关于我的方法的评论。

# java - 如何使用 ASTRewrite 将特定的 SimpleType 替换为 PrimitiveType？

> ID：11619929
> 
> 赞同：1
> 
> 时间：2012-07-23T20:21:27.047
> 
> 标签：java, eclipse, abstract-syntax-tree, eclipse-jdt

在为基于 Java 的语言进行编译之前，我需要预处理一些代码 - 处理。在这种语言中，所有颜色类型的实例都需要用 int 替换。例如，这是一个代码片段：

```
color red = 0xffaabbcc;
color[][] primary = new color[10][10]; 
```

预处理后，上述代码应如下所示：

```
int red = 0xffaabbcc;
int[][] primary = new int[10][10]; 
```

我在非 Eclipse 环境中工作。我正在使用 Eclipse JDT ASTParser 来执行此操作。我已经实现了访问所有 SimpleType 节点的 ASTVisitor。以下是 ASTVisitor 实现的代码片段：

```
public boolean visit(SimpleType node) {
    if (node.toString().equals("color")) {
        System.out.println("ST color type detected: "
                + node.getStartPosition());
        // 1
        rewrite.replace(node,
                rewrite.getAST().newPrimitiveType(PrimitiveType.INT), null);
        // 2
        node.setStructuralProperty(SimpleType.NAME_PROPERTY, rewrite
                .getAST().newSimpleName("int")); // 2
    }
    return true;
} 
```

这里 rewrite 是 ASTRewrite 的一个实例。第 1 行无效（第 2 行已注释掉）。第 2 行导致抛出 IllegalArgumentException，因为 newSimpleName() 将不接受任何 java 关键字，如 int。

用正则表达式查找和替换所有颜色实例对我来说似乎不是正确的方法，因为它可能会导致不必要的更改。但我可能错了。

我怎样才能做到这一点？或者我可以采取任何替代解决方案或方法吗？

谢谢

更新编辑：这是执行 ASTRewrite 的片段：

```
 CompilationUnit cu = (CompilationUnit) parser.createAST(null);
    cu.recordModifications();
    rewrite = ASTRewrite.create(cu.getAST());
    cu.accept(new XQASTVisitor());

    TextEdit edits = cu.rewrite(doc, null);
    try {
        edits.apply(doc);
    } catch (MalformedTreeException e) {
        e.printStackTrace();
    } catch (BadLocationException e) {
        e.printStackTrace();
    } 
```

XQAstVisitor 是包含上述访问方法的访问者类。我正在执行的其他替换可以正确执行。只有这一个会导致问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-08T02:52:38.403

我发现了你的错误！本声明：</p>

```
TextEdit edits = cu.rewrite(doc, null); 
```

是不正确的。并应替换为以下语句：

```
TextEdit edits = rewrite.rewriteAST(doc, null); 
```

最后，再次将修改后的 doc 解析到 CompilationUnit 中，将应用更改。更重要的是，声明：

```
node.setStructuralProperty(SimpleType.NAME_PROPERTY, rewrite.getAST().newSimpleName("int")); 
```

不需要。

# html - 一个div中的跨度类？

> ID：11619932
> 
> 赞同：1
> 
> 时间：2012-07-23T20:21:37.933
> 
> 标签：html, css

我试图在同一行上获得两行文本，一个在左侧，另一行在右侧。

**CSS：**

```
.topbar {
    background-image:url(images/bar_bg.png);
    height:62px;
}

.topbar span{
    font-family:Arial;
    font-weight:bold;
    font-size:15px;
    color:#494963;
    margin: 0;
    padding-left:280px;
    padding-top:15px;
}

.topbar span.left{
    font-family:Arial;
    font-size:15px;
    color:#494963;
    margin: 0;
    padding-right:380px;
    padding-top:15px;
} 
```

**HTML：**

```
<div class="topbar">
    <span class="left">Contact Us or Come see us at our Branch</span>
    <span>11 HIGH  STREET, TOWN CENTER, Bristol, BA140IO </span>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:30:42.857

您可能必须将跨度 css 设置为：

```
display: inline-block !important; 
```

我遇到了跨度从父 div 继承块显示的问题，或者包含的 css 文件更改了跨度显示类型默认值的类似问题。

通过设置为 inline-block 跨度应该按预期显示而不使用浮点数。就我个人而言，我尽量避免浮动。

这是布局如何工作的一个很好的例子： [div 和 span: display = 'block', 'inline', or 'inline-block' ?](http://dustwell.com/div-span-inline-block.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T20:23:41.707

使用你的`float`属性！:]

```
span { 
 float: right;
}

span.left {
 float: left;
} 
```

（必要时不要忘记清除！）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T20:25:02.330

确实很简单。您需要利用 CSS`float`属性。

[http://jsfiddle.net/4cTFP/](http://jsfiddle.net/4cTFP/)

# jquery - 模态窗口中jPlayer的实例在关闭时不会停止

> ID：11619935
> 
> 赞同：0
> 
> 时间：2012-07-23T20:21:53.113
> 
> 标签：jquery, jplayer

我在 jQuery 模式窗口中有一个 jPlayer 实例。它很好用，除了当我关闭窗口时播放器继续播放。我能够捕获窗口的关闭事件，但由于某种原因不能捕获播放器本身。任何帮助将不胜感激。这是我的一些代码：

```
//Modal Dialog
$(function () {
    var dHeight = $("#dialog-modal").data("mdheight"),
        dWidth = $("#dialog-modal").data("mdwidth");
    $("#dialog-modal").dialog({
        autoOpen: false,
        height: dHeight,
        width: dWidth,
        resizable: false,
        modal: true
    });
    $("#modal-opener").click(function () {
        $("#dialog-modal").dialog("open");
        return false;
    });
    //Capture dialog closing
    $("#dialog-modal").live("dialogclose", function (event) {
        $("#jquery_jplayer_1'").jPlayer("destroy");
    });
});

$(document).ready(function () {
    new jPlayerPlaylist({
        jPlayer: "#jquery_jplayer_1",
        cssSelectorAncestor: "#jp_container_1"
    }, [{
        title: "Amazing Grace",
        mp3: "AmazingGrace.mp3",
        oga: "AmazingGrace.ogg"
    }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T11:39:21.497

我得到了它的工作，修复在另一个论坛上： [https ://groups.google.com/forum/#!topic/jplayer/NSzSXe5nPbE](https://groups.google.com/forum/#!topic/jplayer/NSzSXe5nPbE)

# java - 在 Grizzly 2 上运行 JAX-RS 2.0 / Jersey

> ID：11619936
> 
> 赞同：1
> 
> 时间：2012-07-23T20:22:06.873
> 
> 标签：java, jakarta-ee, jersey, jax-rs, grizzly

我想在 Grizzly 2 上运行 JAX-RS 2.0 / Jersey，但我现在不知道如何设置它。我发现了以下 Maven 依赖项：

```
<dependency>
  <groupId>org.glassfish.grizzly</groupId>
  <artifactId>grizzly-framework</artifactId>
  <version>2.2</version>
</dependency>
<dependency>
  <groupId>javax.ws.rs</groupId>
  <artifactId>javax.ws.rs-api</artifactId>
  <version>2.0-m09</version>
</dependency>
<dependency>
    <groupId>org.glassfish.jersey.core</groupId>
    <artifactId>jersey-common</artifactId>
    <version>2.0-m05-1</version>
</dependency>
<dependency>
    <groupId>org.glassfish.jersey.core</groupId>
    <artifactId>jersey-server</artifactId>
    <version>2.0-m05-1</version>
</dependency>
<dependency>
    <groupId>org.glassfish.jersey.containers</groupId>
    <artifactId>jersey-container-grizzly2-http</artifactId>
    <version>2.0-m05-1</version>
</dependency> 
```

在 Grizzly 上运行 Jersey 需要什么 Java 代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T08:31:03.650

这显示了如何从 maven 原型创建项目的骨架（它有一些基本代码）：http: [//jersey.java.net/nonav/documentation/snapshot/getting-started.html#new-from-archetype](http://jersey.java.net/nonav/documentation/snapshot/getting-started.html#new-from-archetype)

您还可以在此处浏览 Jersey 2 示例：[https ://github.com/jersey/jersey/tree/master/examples](https://github.com/jersey/jersey/tree/master/examples)

他们中的大多数都是基于灰熊的。

# android - 致命错误问题 - jhotovy 的 android-ffmpeg-x264 版本 - github.com/jhotovy/android-ffmpeg.git

> ID：11619937
> 
> 赞同：0
> 
> 时间：2012-07-23T20:22:11.327
> 
> 标签：android, github, ffmpeg

以下是发布的输出`init-submodules.sh`。我一直收到这个

```
error:fatal error:
    Unable to checkout '15e02184e136e47ecff01bf56aca
    The49d8e2646fb4' in submodule path 'Project/jni/ffmpeg'<br> 
```

到目前为止，有没有人成功运行 jhotovy 的 halfninja 代码版本？解决此问题的任何帮助将不胜感激

我的屏幕输出：

```
 gipsyblues@android-general:~/android-ffmpeg$ ./init-submodules.sh <br>
    ls: cannot access ./jni/ffmpeg/*: No such file or directory<br>
    Submodule 'ffmpeg' (git://git.videolan.org/ffmpeg.git) registered for path   Project/jni     /ffmpeg'<br>
    Submodule 'x264' (git://git.videolan.org/x264.git) registered for path 'Project/jni    /x264'<br>
    user.name=xxxxxxx <br>
    user.email=yyyyyyy <br>
    core.repositoryformatversion=0<br>
    core.filemode=true<br>
    core.bare=false<br>
    core.logallrefupdates=true<br>
    remote.origin.fetch=+refs/heads/*:refs/remotes/origin/*<br>
    remote.origin.url=git://github.com/jhotovy/android-ffmpeg.git
    branch.master.remote=origin<br>
    branch.master.merge=refs/heads/master<br>
    submodule.ffmpeg.url=git://git.videolan.org/ffmpeg.git<br>
    submodule.x264.url=git://git.videolan.org/x264.git<br>
    Initialized empty Git repository in /home/gipsyblues/android-ffmpeg/Project/jni/ffmpeg  /.git/<br>
    remote: Counting objects: 237417, done.<br>
    remote: Compressing objects: 100% (57251/57251), done.<br>
    remote: Total 237417 (delta 186957), reused 228690 (delta 179782)<br>
    Receiving objects: 100% (237417/237417), 59.89 MiB | 5.22 MiB/s, done.<br>
    Resolving deltas: 100% (186957/186957), done.<br>
    fatal: reference is not a tree: 15e02184e136e47ecff01bf56aca49d8e2646fb4<br>
    Unable to checkout '15e02184e136e47ecff01bf56aca49d8e2646fb4' in submodule path    'Project/jni/ffmpeg'<br>
   gipsyblues@android-general:~/android-ffmpeg$ <br> 
```

我已经成功运行了原始的 halfninja 版本，它也在`githuib.com/halfninja/android-ffmpeg-x264.<`br> 我已经在整个互联网上搜索过，我没有找到任何关于这个问题的参考。任何人都在该实施中取得了任何成功

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T04:55:40.850

那个项目对我有用。

我记得做的是：

git 克隆

阅读自述文件

cd 进入 root/Project/jni 并在那里阅读 INSTALL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:35:35.883

## 试试这个[版本](https://github.com/rowntreerob/android-ffmpeg)

我今天又做了一次（克隆了 jhotovy android-ffmpeg），并且 ffmpeg 子模块不包含在 init_submodule.sh 的拉取中。

转到 git 上的 orig 项目以获取“ffmpeg”目录（参见 halfninja）并删除其他所有内容，将“ffmpeg”合并到 jhotovy 文件结构中。

那应该可以

--构建细节--

*   确保您的构建环境适合使用跨工具链（NDK/ant/android SDK）
*   确保您已将 NDK 同步到 jni 目录中构建脚本中的相应 ENV var
*   克隆 'hotovy' 以添加 ogg/vorbis/theora
*   克隆“halfninja”以获取上面不再处理的中止的“ffmpeg”子模块
*   将 ./Project/jni/ffmpeg 从 'halfninja' 合并到 ./Proj/jni/ffmpeg 的 'hotovy' 版本
*   cd 到 'hotovy' ./Proj/jni 并运行 'config_make_everything.sh'
*   从上面检查输出，留在 jni 目录
*   并运行“$NDK/ndk-build V=1 -B”检查输出

您现在应该在 .Project/libs/arm 目录中为 'ffmpeg' 和 'videokit' 提供良好的原生库。

要获得 .apk ，我会通过发出类似的“更新”命令将 ant/android 连接到项目

```
android create project -n ffmpegtst -t 1 -p ffmpegtst -k com.b2bpo.media.ffmpeg.test -a RecordActivity 
```

您将不得不阅读 developer.android 中的命令行管理项目。

当你连接 ant 时，cd 到项目目录并运行

蚂蚁调试

您应该在 ./Project/bin 目录中获取 apk

# css - CSS在一个参数时有效，如果参数超过一个则无效

> ID：11619938
> 
> 赞同：0
> 
> 时间：2012-07-23T20:22:11.600
> 
> 标签：css, .htaccess

这是我的 .htaccess

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f [OR]
RewriteCond %{REQUEST_URI} \.(js|css|jpe?g|gif|png|bmp|ico)$ [NC]
RewriteRule ^(.*)$ index.php [L,QSA] 
```

如果我正在输入[http://mysite.com/login](http://mysite.com/login)它的效果很好，但如果例如[http://mysite.com/user/new](http://mysite.com/user/new) CSS 丢失:(

另外，我在 header.tpl 中使用 smarty，其中包含 js、img 和 css，也许这是问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T20:46:25.220

这是你的问题：

```
<html><head><link .... "css/style.css"></head><body> 
```

它应该是：

```
<html><head><link .... "/css/style.css"></head><body> 
```

# xcode - 如何使用 Xcode 4.X 或 lldb 查看缓冲区的内容

> ID：11619940
> 
> 赞同：2
> 
> 时间：2012-07-23T20:22:18.003
> 
> 标签：xcode, lldb

我有一个指向包含多个双精度值的缓冲区的指针。我可以使用 Xcode 或 lldb 查看存储在缓冲区中的双精度值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:49:04.533

如果您切换到 gdb 而不是 lldb 则更容易打印出数组的内容，例如在控制台中：

```
(gdb) p *my_double_ptr@16 
```

如果`my_double_ptr`是一个指向双精度的指针，那么上面的命令将在指向的地址打印前 16 个双精度`my_double_ptr`。

您也可以使用 lldb 执行此操作，但它不那么简单 - 请参阅 SO：[LLDB 等效于 Xcode 4.1 中的 GDB's '@' operator 的](https://stackoverflow.com/questions/7062173/lldb-equivalent-of-gdbs-operator-in-xcode-4-1)这个问题。

# ios - 导入 RNCryptor 后架构 armv7 的未定义符号

> ID：11619941
> 
> 赞同：5
> 
> 时间：2012-07-23T20:22:23.823
> 
> 标签：ios, objective-c, cocoa-touch, armv7, rncryptor

我将 RNCryptor 导入了我的应用程序，它可以在这里找到：[https](https://github.com/rnapier/RNCryptor) ://github.com/rnapier/RNCryptor 。但是，我在日志中遇到了三个错误。

```
Undefined symbols for architecture armv7:
  "_SecRandomCopyBytes", referenced from:
      +[RNCryptor randomDataOfLength:] in RNCryptor.o
  "_kSecRandomDefault", referenced from:
      +[RNCryptor randomDataOfLength:] in RNCryptor.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我看到这通常是当导入的类不包含在目标中时引起的，但是我已经检查了构建阶段，并且所有导入的类都在那里。我不知道是什么原因造成的，我没有接触任何这些类的代码。我也清洁了几次目标。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-23T20:58:50.867

确保添加安全框架：

```
#import <Security/SecRandom.h> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-27T16:42:11.823

即使包含安全框架，我也遇到了这个问题。我删除并重新包含了框架来修复它。

# python - 在python中打印一系列素数

> ID：11619942
> 
> 赞同：32
> 
> 时间：2012-07-23T20:22:35.297
> 
> 标签：python, primes, series

我在打印从一到一百的一系列素数时遇到了问题。我无法弄清楚我的代码有什么问题。

这是我写的；它打印所有奇数而不是素数：

```
for num in range(1, 101):
    for i in range(2, num):
        if num % i == 0:
            break
        else:
            print(num)
            break 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-07-23T20:31:02.860

您需要检查从 2 到 n-1 的所有数字（实际上到 sqrt(n)，但是可以，让它成为 n）。如果`n`能被任何一个数整除，它就不是素数。如果一个数字是素数，打印它。

```
for num in range(2,101):
    prime = True
    for i in range(2,num):
        if (num%i==0):
            prime = False
    if prime:
       print (num) 
```

你可以写同样的更短和更 Pythonic：

```
for num in range(2,101):
    if all(num%i!=0 for i in range(2,num)):
       print (num) 
```

正如我已经说过的，最好检查除数不是从 2 到 n-1，而是从 2 到 sqrt(n)：

```
import math
for num in range(2,101):
    if all(num%i!=0 for i in range(2,int(math.sqrt(num))+1)):
       print (num) 
```

对于像 101 这样的小数字，这并不重要，但对于 10**8，差异会非常大。

您可以通过将检查的范围增加 2 来进一步改进它，从而只检查奇数。像这样：

```
import math
print 2
for num in range(3,101,2):
    if all(num%i!=0 for i in range(2,int(math.sqrt(num))+1)):
       print (num) 
```

编辑：

> 由于在第一个循环中选择了奇数，在第二个循环中无需检查偶数，因此“i”值可以以 3 开头并跳过 2。

```
import math
print 2
for num in range(3,101,2):
    if all(num%i!=0 for i in range(3,int(math.sqrt(num))+1, 2)):
        print (num) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-23T20:57:29.580

两千多年前由希腊数学家埃拉托色尼发明的一种更好的方法不是试除法，而是通过反复抛出多个素数来进行筛选。

首先列出从 2 到最大所需素数 n 的所有数字。然后反复取最小的未交叉数并将其所有倍数划掉；未交叉的数字是素数。

例如，考虑小于 30 的数字。最初，2 被识别为素数，然后将 4、6、8、10、12、14、16、18、20、22、24、26、28 和 30 划掉。接下来的 3 被确定为素数，然后 6、9、12、15、18、21、24、27 和 30 被划掉。下一个素数是 5，因此 10、15、20、25 和 30 被划掉。等等。剩下的数是素数：2、3、5、7、11、13、17、19、23 和 29。

```
def primes(n):
  sieve = [True] * (n+1)
  for p in range(2, n+1):
    if (sieve[p]):
      print p
      for i in range(p, n+1, p):
        sieve[i] = False 
```

优化版的筛子分别处理 2 个并且只筛分奇数。此外，由于所有小于当前素数平方的复合都被较小的素数划掉，因此内循环可以从 p^2 开始，而不是从 p 开始，外循环可以在 n 的平方根处停止。我会把[优化的版本](http://programmingpraxis.com/2009/02/19/sieve-of-eratosthenes)留给你处理。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-07-23T20:25:16.623

`break`结束它当前所在的循环。所以，你只检查它是否能被 2 整除，给你所有奇数。

```
for num in range(2,101):
    for i in range(2,num):
        if (num%i==0):
            break
    else:
        print(num) 
```

话虽如此，在 python 中找到素数还有比这更好的方法。

```
for num in range(2,101):
    if is_prime(num):
        print(num)

def is_prime(n):
    for i in range(2, int(math.sqrt(n)) + 1):
        if n % i == 0:
            return False
    return True 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2016-08-23T16:18:52.980

我支持不假设最佳解决方案并对其进行测试。下面是我所做的一些修改，以通过@igor-chubin 和@user448810 创建简单的示例类。首先让我说这都是很好的信息，谢谢大家。但我必须感谢@user448810 的聪明解决方案，结果证明这是迄今为止最快的（在我测试过的解决方案中）。所以向你致敬，先生！在所有示例中，我使用 100 万 (1,000,000) 作为 n。

请随意尝试代码。

祝你好运！

**Igor Chubin 描述的**方法 1 ：****

 **```
def primes_method1(n):
    out = list()
    for num in range(1, n+1):
        prime = True
        for i in range(2, num):
            if (num % i == 0):
                prime = False
        if prime:
            out.append(num)
    return out 
```

**基准测试：**超过 272 秒以上

**Igor Chubin 描述的**方法 2 ：****

 **```
def primes_method2(n):
    out = list()
    for num in range(1, n+1):
        if all(num % i != 0 for i in range(2, num)):
            out.append(num)
    return out 
```

**基准：** 73.3420000076 秒

**Igor Chubin 描述的**方法 3 ：****

 **```
def primes_method3(n):
    out = list()
    for num in range(1, n+1):
        if all(num % i != 0 for i in range(2, int(num**.5 ) + 1)):
            out.append(num)
    return out 
```

**基准：** 11.3580000401 秒

**Igor Chubin 描述的**方法 4 ：****

 **```
def primes_method4(n):
    out = list()
    out.append(2)
    for num in range(3, n+1, 2):
        if all(num % i != 0 for i in range(2, int(num**.5 ) + 1)):
            out.append(num)
    return out 
```

**基准：** 8.7009999752 秒

**user448810 描述的方法5**（我认为这很聪明）：

```
def primes_method5(n):
    out = list()
    sieve = [True] * (n+1)
    for p in range(2, n+1):
        if (sieve[p]):
            out.append(p)
            for i in range(p, n+1, p):
                sieve[i] = False
    return out 
```

**基准：** 1.12000012398 秒

**注意：**上面列出的解决方案 5（由 user448810 提出）结果证明是最快、最安静的创意和聪明的。我喜欢它。多谢你们！！

**编辑：**哦，顺便说一句，我觉得没有必要为值的平方根导入数学库，因为等价的只是 (n**.5)。否则，我没有进行太多编辑，然后将值存储在输出数组中以由类返回。此外，将结果存储到文件中可能比详细存储更有效，并且如果一次只存储一个文件可以节省大量内存，但由于磁盘写入会花费更多时间。我认为总有改进的余地。所以希望代码有意义。

* * *

**2021 年编辑：**我知道这已经很长时间了，但我在将 Stackoverflow 链接到我的 Codewars 帐户后返回并查看了我最近累积的积分，这些积分与这篇文章相关联。我在原始海报中读到的东西引起了我对@user448810 的注意，因此我决定通过在附加输出数组之前过滤掉奇数值来对原始帖子中提到的进行轻微修改。结果是优化和最新版本的 Python 3.8 的性能要好得多，结果为 0.723 秒（之前的代码），而使用 1,000,000 的 n 为 0.504 秒。

```
def primes_method5(n):
    out = list()
    sieve = [True] * (n+1)
    for p in range(2, n+1):
        if (sieve[p] and sieve[p]%2==1):
            out.append(p)
            for i in range(p, n+1, p):
                sieve[i] = False
    return out 
```

将近五年后，我可能知道得更多，但我仍然喜欢 Python，想想它已经这么久了有点疯狂。老实说，这篇文章感觉就像是不久前发表的，当时我想我只使用 python 大约一年。它似乎仍然相关。疯狂的。美好时光。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-08-20T05:18:10.590

解决上述问题的最佳方法是使用“Miller Rabin Primality Test”算法。它使用概率方法来确定一个数字是否为素数。它是迄今为止我遇到过的最有效的算法。

同样的python实现如下所示：

```
def miller_rabin(n, k):

    # Implementation uses the Miller-Rabin Primality Test
    # The optimal number of rounds for this test is 40
    # See http://stackoverflow.com/questions/6325576/how-many-iterations-of-rabin-miller-should-i-use-for-cryptographic-safe-primes
    # for justification

    # If number is even, it's a composite number

    if n == 2:
        return True

    if n % 2 == 0:
        return False

    r, s = 0, n - 1
    while s % 2 == 0:
        r += 1
        s //= 2
    for _ in xrange(k):
        a = random.randrange(2, n - 1)
        x = pow(a, s, n)
        if x == 1 or x == n - 1:
            continue
        for _ in xrange(r - 1):
            x = pow(x, 2, n)
            if x == n - 1:
                break
        else:
            return False
    return True 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-07-31T03:31:54.613

**Igor Chubin**的回答可以改进。在测试 X 是否为素数时，算法不必检查直到 X 的平方根的每个数，它只需要检查直到 sqrt(X) 的素数。因此，如果它在创建质数列表时引用质数列表，则效率会更高。下面的函数输出 b 下所有素数的列表，作为列表方便有几个原因（例如，当您想知道素数 < b 的数量时）。通过只检查素数，它可以在更高的数字上节省时间（与大约 10,000 相比；差异非常明显）。

```
from math import sqrt
def lp(b)
    primes = [2]
    for c in range(3,b):
        e = round(sqrt(c)) + 1
        for d in primes:
            if d <= e and c%d == 0:
                break
        else:
            primes.extend([c])
    return primes 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-06-26T18:11:42.763

我将素数列出到一个条目数字而没有太多麻烦的方法是使用这个属性，您可以通过素数的总和获得任何不是素数的数字。

因此，如果你用它下面的所有素数来除条目数，并且它不能被它们中的任何一个整除，你就知道你有一个素数。

当然还有更快的获得素数的方法，但是这个已经表现得很好，特别是因为你没有将条目数除以任何数字，而只是将素数一直到那个数字。

使用此代码，我在计算机上设法在不到 4 秒的时间内列出了最多 100 000 个的所有素数。

```
import time as t

start = t.clock()

primes = [2,3,5,7]

for num in xrange(3,100000,2):
    if all(num%x != 0 for x in primes):
        primes.append(num)

print primes
print t.clock() - start
print sum(primes) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-12-19T14:34:45.103

解决这个问题的一种更简单、更有效的方法是存储之前找到的所有素数并检查下一个数字是否是任何较小素数的倍数。

```
n = 1000
primes = [2]

for i in range(3, n, 2):
    if not any(i % prime == 0 for prime in primes):
        primes.append(i)

print(primes) 
```

请注意，这`any`是一个短路功能，换句话说，一旦找到真值，它将立即中断循环。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-06-10T06:42:01.967

返回第一个 N 素数的 Python 程序函数模块：

```
def get_primes(count):
    """
        Return the 1st count prime integers.
    """
    result = []
    x=2
    while len(result) in range(count):
        i=2
        flag=0
        for i in range(2,x):
            if x%i == 0:
                flag+=1
                break
            i=i+1
        if flag == 0:
            result.append(x)
        x+=1
    pass
    return result 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-08-21T13:31:40.077

我们可以使用 sympy 库制作一个素数列表

```
import sympy
lower=int(input("lower value:"))          #let it be 30
upper=int(input("upper value:"))          #let it be 60
l=list(sympy.primerange(lower,upper+1))   #[31,37,41,43,47,53,59]
print(l) 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-03-17T20:34:45.370

```
# computes first n prime numbers
def primes(n=1):
    from math import sqrt
    count = 1
    plist = [2]
    c = 3
    if n <= 0 :
        return "Error : integer n not >= 0"
    while (count <= n - 1):    # n - 1 since 2 is already in plist
        pivot = int(sqrt(c))
        for i in plist:
            if i > pivot :    # check for primae factors 'till sqrt c
                count+= 1
                plist.append(c)
                break
            elif c % i == 0 :
                break    # not prime, no need to iterate anymore
            else :
                continue 
        c += 2    # skipping even numbers              
    return plist 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-10-15T10:43:11.097

这是一个简单直观的检查它是否是 RECURSIVE 函数中的素数的版本！:) （我是作为 MIT 课程的家庭作业完成的）在 python 中，它运行得非常快，直到 1900 年。如果你尝试超过 1900 年，你会得到一个有趣的错误 :) （你想检查你的数字有多少？电脑能管理吗？）

```
def is_prime(n, div=2):

    if div> n/2.0: return True

    if n% div == 0:
        return False
    else:
        div+=1
        return is_prime(n,div)

#The program:
until = 1000
for i in range(until):
    if is_prime(i):
        print i 
```

当然……如果你喜欢递归函数，这个小代码可以用字典来升级，以大大提高它的性能，并避免那个有趣的错误。这是带有 MEMORY 集成的简单 1 级升级：

```
import datetime
def is_prime(n, div=2):
    global primelist
    if div> n/2.0: return True
    if div < primelist[0]:
        div = primelist[0]
        for x in primelist:
            if x ==0 or x==1: continue
            if n % x == 0:
                return False
    if n% div == 0:
        return False
    else:
        div+=1
        return is_prime(n,div)

now = datetime.datetime.now()
print 'time and date:',now
until = 100000
primelist=[]
for i in range(until):
    if is_prime(i):
        primelist.insert(0,i)
print "There are", len(primelist),"prime numbers, until", until
print primelist[0:100], "..."

finish = datetime.datetime.now()
print "It took your computer", finish - now , " to calculate it" 
```

这是结果，我打印了找到的最后 100 个素数。

> > > 时间和日期：2013-10-15 13:32:11.674448

有 9594 个素数，直到 100000

[99991, 99989, 99971, 99961, 99929, 99923, 99907, 99901, 99881, 99877, 99871, 99859, 99839, 99833, 99829, 99823, 99817, 99809, 99793, 99787, 99767, 99761, 99733, 99721, 99719 , 99713, 99709, 99707, 99689, 99679, 99667, 99661, 99643, 99623, 99611, 99607, 99581, 99577, 99571, 99563, 99559, 99551, 99529, 99527, 99523, 99497, 99487, 99469, 99439, 99431 , 99409, 99401, 99397, 99391, 99377, 99371, 99367, 99349, 99347, 99317, 99289, 99277, 99259, 99257, 99251, 99241, 99233, 99223, 99191, 99181, 99173, 99149, 99139, 99137, 99133 , 99131, 99119, 99109, 99103, 99089, 99083, 99079, 99053, 99041, 99023, 99017, 99013, 98999, 98993, 98981, 98963, 98953, 98947, 98939, 98929, 98927, 98911, 98909, 98899, 98897 ] ...

你的电脑用了 0:00:40.871083 来计算它

所以我的 i7 笔记本电脑花了 40 秒来计算它。:)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-06-19T11:14:16.427

您过早地终止循环。在你测试了 for 循环体中的所有可能性并且没有中断之后，这个数字就是素数。由于一个不是素数，你必须从 2 开始：

```
for num in xrange(2, 101):
    for i in range(2,num):
        if not num % i:
            break
    else:
        print num 
```

在更快的解决方案中，您只尝试除以小于或等于您正在测试的数字的根的素数。这可以通过记住你已经找到的所有素数来实现。此外，您只需测试奇数（2 除外）。您可以将生成的算法放入生成器中，以便将其用于将素数存储在容器中或简单地将它们打印出来：

```
def primes(limit):
    if limit > 1:
        primes_found = [(2, 4)]
        yield 2
        for n in xrange(3, limit + 1, 2):
            for p, ps in primes_found:
                if ps > n:
                    primes_found.append((n, n * n))
                    yield n
                    break
                else:
                    if not n % p:
                        break

for i in primes(101):
    print i 
```

如您所见，无需计算平方根，存储每个素数的平方并将每个除数与该数字进行比较会更快。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-10-24T13:39:29.637

```
n = int(input())
is_prime = lambda n: all( n%i != 0 for i in range(2, int(n**.5)+1) )
def Prime_series(n):
    for i in range(2,n):
        if is_prime(i) == True:
            print(i,end = " ")
        else:
            pass
Prime_series(n) 
```

这是使用 lambda 函数的简化答案。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-02-10T10:05:04.357

除了已接受的答案之外，可以通过使用列表来存储素数并在生成后打印它们来实现进一步的优化。

```
import math
Primes_Upto = 101
Primes = [2]
for num in range(3,Primes_Upto,2):
    if all(num%i!=0 for i in Primes):
       Primes.append(num)
for i in Primes:
    print i 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2021-02-26T14:26:00.103

```
def function(number):
    for j in range(2, number+1):
        if all(j % i != 0 for i in range(2, j)):
            print(j)

function(13) 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2018-06-08T06:28:45.953

这是初学者获取素数的最简单逻辑：

```
p=[]
for n in range(2,50):
    for k in range(2,50):
        if n%k ==0 and n !=k:
            break
        else:
            for t in p:
                if  n%t ==0:
                    break
            else:
                p.append(n)

print p 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-09-30T09:52:17.787

这个怎么样？阅读我使用的所有建议：

```
prime=[2]+[num for num in xrange(3,m+1,2) if all(num%i!=0 for i in range(2,int(math.sqrt(num))+1))] 
```

质数高达 1000000

```
root@nfs:/pywork# time python prime.py 
```

> 78498
> 
> 真正的 0m6.600s
> 
> 用户 0m6.532s
> 
> 系统 0m0.036s

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2014-09-08T00:43:03.657

```
def prime_number(a):
    yes=[]
    for i in range (2,100):
        if (i==2 or i==3 or i==5 or i==7) or (i%2!=0 and i%3!=0 and i%5!=0 and i%7!=0 and i%(i**(float(0.5)))!=0):
            yes=yes+[i]
    print (yes) 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2013-07-04T16:07:49.023

使用 python 打印 n 个素数：

```
num = input('get the value:')
for i in range(2,num+1):
    count = 0
    for j in range(2,i):
        if i%j != 0:
            count += 1
    if count == i-2:
        print i, 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2015-06-19T07:04:02.627

```
min=int(input("min:"))
max=int(input("max:"))
for num in range(min,max):
    for x in range(2,num):
        if(num%x==0 and num!=1):
            break
        else:
            print(num,"is prime")
            break 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2015-06-22T19:06:54.213

这是我编写的一个示例程序，用于检查一个数字是否为素数。

```
def is_prime(x):
    y=0
    if x<=1:
        return False
    elif x == 2:
        return True
    elif x%2==0:
        return False
    else:
        root = int(x**.5)+2
        for i in xrange (2,root):
            if x%i==0:
                return False
                y=1
        if y==0:
            return True 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2018-07-14T16:00:21.340

```
a=int(input('enter the lower no.'))
b=int(input('enter the higher no.'))
print("Prime numbers between",a,"and",b,"are:")
for num in range(a,b):

    if num>1:
        for i in range(2,num):
            if (num%i)==0:
                break
        else:
            print(num) 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2017-10-17T21:11:56.970

这是一种不同的方法，可以用空间换取更快的搜索时间。这可能是最快的。

```
import math

def primes(n):
    if n < 2:
        return []
    numbers = [0]*(n+1)
    primes = [2]
    # Mark all odd numbers as maybe prime, leave evens marked composite.
    for i in xrange(3, n+1, 2):
        numbers[i] = 1

    sqn = int(math.sqrt(n))
    # Starting with 3, look at each odd number.
    for i in xrange(3, len(numbers), 2):
        # Skip if composite.
        if numbers[i] == 0:
            continue
        # Number is prime.  Would have been marked as composite if there were
        # any smaller prime factors already examined.
        primes.append(i)
        if i > sqn:
            # All remaining odd numbers not marked composite must be prime.
            primes.extend([i for i in xrange(i+2, len(numbers), 2)
                           if numbers[i]])
            break
        # Mark all multiples of the prime as composite.  Check odd multiples.
        for r in xrange(i*i, len(numbers), i*2):
            numbers[r] = 0

    return primes

n = 1000000
p = primes(n)
print "Found", len(p), "primes <=", n 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2016-08-09T17:53:32.907

使用过滤功能。

```
l=range(1,101)
for i in range(2,10): # for i in range(x,y), here y should be around or <= sqrt(101)
    l = filter(lambda x: x==i or x%i, l)

print l 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2018-01-26T11:46:39.587

我受到 Igor 的启发，制作了一个创建列表的代码块：

```
def prime_number():

for num in range(2, 101):
    prime = True
    for i in range(2, num):
        if (num % i == 0):
            prime = False
    if prime and num not in num_list:
        num_list.append(num)
    else:
        pass
return num_list

num_list = []
prime_number()
print(num_list) 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2016-07-28T08:02:04.010

```
n = int(raw_input('Enter the integer range to find prime no :'))
p = 2
while p<n:
  i = p
  cnt = 0
  while i>1:
    if p%i == 0:
        cnt+=1
    i-=1
  if cnt == 1:
     print "%s is Prime Number"%p
  else:
     print "%s is Not Prime Number"%p
  p+=1 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2017-10-08T05:57:19.907

省略素数的最快和最佳实现：

```
def PrimeRanges2(a, b):
    arr = range(a, b+1)
    up = int(math.sqrt(b)) + 1
    for d in range(2, up):
        arr = omit_multi(arr, d) 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2017-05-18T05:42:36.003

添加我自己的版本，只是为了展示一些 itertools 技巧 v2.7：

```
import itertools

def Primes():
    primes = []
    a = 2
    while True:
        if all(itertools.imap(lambda p : a % p, primes)):
            yield a
            primes.append(a)
        a += 1

# Print the first 100 primes
for _, p in itertools.izip(xrange(100), Primes()):
    print p 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2017-07-11T02:28:49.707

```
f=0
sum=0
for i in range(1,101):
    for j in range(1,i+1):
        if(i%j==0):
            f=f+1
    if(f==2):
        sum=sum+i
        print i        
    f=0
print sum 
```

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2021-07-13T04:50:17.890

```
for i in range(1, 100):
  for j in range(2, i):
    if i % j == 0:
      break 
  else:
    print(i) 
```

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2016-08-15T17:40:56.000

```
for num in range(1,101):
    prime = True
    for i in range(2,num/2):
        if (num%i==0):
            prime = False
    if prime:
       print num 
```

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2018-07-24T18:23:25.827

## 首先我们找到那个数字的因数

```
def fac(n):
  res = []
  for i in range(1,n+1):
    if n%i == 0:
res.append(i) 
```

## 检查素数的脚本

```
def prime(n):
return(fac(n) == [1,n]) 
```

## 打印所有素数到 n 的脚本

```
def prime_list(n):
  pri_list = []
  for i in range(1,n+1):
    if prime(i)
      pri_list.append(i)
return(pri_list) 
```

* * *

## 回答 #34

> 赞同：-1
> 
> 时间：2018-12-19T13:31:12.027

min = int(input("输入下限：")) max = int(input("输入上限："))

print("",min,"和",max,"之间的素数是："

for num in range(min,max + 1): if num > 1: for i in range(2,num): if (num % i) == 0: break else: print(num)

* * *

## 回答 #35

> 赞同：-1
> 
> 时间：2018-05-06T10:06:01.170

```
num= int(input("Enter the numbner"))
isDivisible= False
int=2

while i<num:
    if num%i==0
    isDivisible True
    print("The number {} is divisible by {}.".format(num,i))
    i +=1

if isDivisible:
    print("The number {} is not prime.".format(num))
else:
    print("The number {} is a prime number.".format(num)) 
```********

# javascript - 为什么以下 Javascript 排序代码不起作用？

> ID：11619944
> 
> 赞同：0
> 
> 时间：2012-07-23T20:22:45.343
> 
> 标签：javascript, sorting

我正在使用 jquery 将一组元素的文本提取到数组中，并希望在将元素插入数组后对它们进行排序。但是，排序不起作用（因为排序后数组保持相同的顺序）。怎么了？代码摘录如下：

```
var sortedList = [];
$("div.resource").each(function(i, item) {
    var resource = $(this).html().toLowerCase();
    sortedList.push(resource);
})

// Add the new item 
sortedList.push(resource_name.toLowerCase());

alert("before sort");
for (var i = 0; i < sortedList.length; i++) {
    alert(sortedList[i]);
}

// Sort the list
sorted = sortedList.sort();

alert("after sort");
for (var i = 0; i < sorted.length; i++) {
    alert(sorted[i]);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:35:54.153

你应该试试这个：

```
var sortedList = [];
$("div.resource").each(function(i, item) {
    var resource = $.trim($(this).text()).toLowerCase();
    sortedList.push(resource);
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T20:43:09.047

除了使用 text() 而不是 html() 和修剪字符串的建议之外，将所有内容包装在 jQuery Document Ready 函数中，这将使元素和 jQuery 库有时间加载（如果你还没有这样做的话） .

除此之外，它可能是浏览器问题。它适用于我在 chrome 中使用 html() 和 text()。虽然我确保元素中只有文本。

也可能不是一个大问题，但您的 .each() 方法缺少分号。

# sql-server - Microsoft Sync Framework Toolkit 非 MS 同步

> ID：11619945
> 
> 赞同：0
> 
> 时间：2012-07-23T20:22:50.323
> 
> 标签：sql-server, database, sqlite, synchronization

我正在考虑使用 MS Sync Framework Toolkit 将移动数据库数据子集同步到云。我将使用 Android 和 iOS，我只需要将它们各自的 SQLite DB 本地副本同步到云。

MS Sync Framework 处理过滤和数据子集的效果如何，它在非基于 Windows 的平台（主要是 Java/Android 和 iOS）上的运行效果如何？移动环境使用 SQLLite，而云基于 Microsoft。感谢您的洞察力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T08:45:52.383

Sync Framework Toolkit 有一个 iPhone 示例，您可以查看一下。不过，您可能必须为 SQLLite 构建自己的提供程序。

在配置范围时，您也应该能够过滤数据（范围是在同步会话中同步在一起的一组表）。

# javascript - 多维数组排序失败

> ID：11619959
> 
> 赞同：2
> 
> 时间：2012-07-23T20:23:35.947
> 
> 标签：javascript, multidimensional-array, sorting

我在这上面花了很长时间，但无法在这里发现这个错误。

`var test_arr = [['79',0],['8',1],['30', 2],['580',3],['59',4]]`本质上，我有一个从函数生成的类型的多元数组。它的行为不像普通数组，因为我的 sort fxn`var sort_arrays = function(a,b) {return a[0]-b[0]};`无法正确排序数组值。

我试图确保我有一个实际的数组，并且我没有调用替代排序方法。

因此：

```
console.log(arr_test.sort(sort_arrays)); 
```

给出：`[[8,1],[30,2],[59,4],[79,0],[580,3]]`

但是，在我的 fxn 上调用它，

```
console.log(input_kde.sort(sort_arrays)); 
```

，给出：`[...,[580, 0.002],[59,0.001]]`

在尝试生成一些可打印的输出时，我调用`.toString`了我的结果，并得到了正确排序的输出，这只会加深我的困惑。

我尝试过显式类型转换`parseFloat(a[0])`但无济于事。

我还尝试确认这确实是一个数组：

```
console.log(typeof(input_kde)); //#> object
console.log(input_kde.constructor); //#> function Array() { [native code] }
console.log(input_kde instanceof Array); //#> true 
```

此外， input_kde[0] 是一个数组， input_kde[0][0] 是一个数字

```
console.log(input_kde[0] instanceof Array); //#> true
console.log(typeof(input_kde[0][0])); //#> number 
```

我错过了什么？

**编辑2**

```
var input_kde = [[22,0.0017095221275204712],[24,0.001712291003699343],[28,0.001716821328044571],[307,0.0009792081392809542],[33,0.0017205981968323918],[34,0.0017211029300063302],[341,0.0010085669284820244],[35,0.0017215244128879188],[387,0.0010558490092862406],[4,0.0016696065108796395],[40,0.0017223891946762664],[448,0.0010667514507313397],[491,0.0010124434821844265],[519,0.0009480280002363708],[580,0.0007465298453339767],[59,0.0017073128314605394]] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:13:06.223

```
var input_kde = [[22,0.0017095221275204712],[24,0.001712291003699343],[28,0.001716821328044571],[307,0.0009792081392809542],[33,0.0017205981968323918],[34,0.0017211029300063302],[341,0.0010085669284820244],[35,0.0017215244128879188 ],[387,0.0010558490092862406],[4,0.0016696065108796395],[40,0.0017223891946762664],[448,0.0010667514507313397],[491,0.0010124434821844265],[519,0.0009480280002363708],[580,0.0007465298453339767],[59,0.0017073128314605394]]

    //测试运行
    var sorted=input_kde.sort(function(a,b){return a[0]-b[0]});
    警报（排序）；

```

我找不到任何问题！！！！

实际上，为什么您的代码在第二次运行中未能返回正确的值是因为您`sort_arrays`已经使用前一个变量设置了变量！因此，失败了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T20:39:09.593

它似乎工作正常 [http://jsfiddle.net/w8T32/](http://jsfiddle.net/w8T32/)

```
var test_arr = [['79',0],['8',1],['30', 2],['580',3],['59',4]];
test_arr.sort(function(a,b){
    return a[0] -b[0];
});
console.log(test_arr)​ 
```

输出类似于

```
[['8',1], ['30',2], ['59', 4], ['79',0], ['580', 3]] 
```

要考虑的一件事是 sort 没有记录的返回值（它修改了数组），但您似乎正在使用它。更改您的代码，使其不依赖于返回值，看看是否有任何区别

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T20:32:28.880

我可能只是在这里在黑暗中拍摄，但你那里有混合类型（字符串和整数）？

# scala - 重载构造函数中的重复参数

> ID：11619967
> 
> 赞同：1
> 
> 时间：2012-07-23T20:24:06.447
> 
> 标签：scala, constructor, variadic-functions

我想在 Scala 中编写一个类，它需要像这样的任意数量的字节或布尔值

```
class Bytes(data: Byte*) {
  def this(data: Boolean*) = this {
    val res: Array[Byte] = convBools2Bytes(data)

    res: _*
  }

  // […]
} 
```

where`convBools2Bytes`是将 an 转换`Array[Boolean]`为 an的函数`Array[Byte]`：

```
def convBools2Bytes(data: Array[Boolean]): Array[Byte] 
```

这给了我以下编译器错误：

```
[error] Bytes.scala:5: no `: _*' annotation allowed here
[error] (such annotations are only allowed in arguments to *-parameters)
[error]     res: _*
[error]        ^ 
```

据我了解，该`res: _*`语句将`Array[Byte]`转换为重复参数列表（如[“Scala 编程”第 2 版](http://www.artima.com/shop/programming_in_scala_2ed)第 8.8 节中所述）。

为什么会出现这样的错误，我该如何避免呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T20:48:30.390

正如编译器所说，您只能在可变参数参数的参数中使用它。您试图让块返回一个扩展的可变参数列表，这是不允许的。如果您想使用该块，则：

```
this({
  val res: Array[Byte] = convBools2Bytes(data)
  res
}: _*) 
```

否则这也应该没问题

```
this(convBools2Bytes(data): _*) 
```

但是您会遇到另一个问题，擦除将导致两者具有相同的签名并阻止编译。我认为无论如何你最好不要超载

# .htaccess - 挣扎于 .htaccess RewriteRule

> ID：11619972
> 
> 赞同：0
> 
> 时间：2012-07-23T20:24:29.580
> 
> 标签：.htaccess, mod-rewrite

我真的很感激一些帮助，因为在过去的几个小时里我一直在用头撞墙，试图创建一个`.htaccess RewriteRule`.

我有大约 300 个*URL*，我需要在重新构建站点后进行 301 重定向，它们位于类似 url 的组中，但幸运的是没有分解为文件夹。

以下是一些*URL*的示例：-

```
https://www.domain.co.uk/chamaecyparis-lawsoniana-ellwoodii_2.htm
https://www.domain.co.uk/chamaecyparis-lawsoniana-ellwoodii-200225cm-6670.htm
https://www.domain.co.uk/chamaecyparis-lawsoniana-ellwoodii.htm
https://www.domain.co.uk/chamaecyparis-lawsoniana-ellwoods-gold.htm
https://www.domain.co.uk/chamaecyparis-lawsoniana-lemon-queen.htm
https://www.domain.co.uk/chamaecyparis-lawsoniana-yvonne-200cm-66.htm 
```

上述所有*URL*都需要重定向到新*URL*：-

[http://www.domain.co.uk/chamaecyparis-lawsoniana](http://www.domain.co.uk/chamaecyparis-lawsoniana)

这是`RewriteRule`我目前拥有的但它不起作用：-

```
RewriteEngine On
RewriteRule ^(.*)_chamaecyparis-lawsoniana$ https://www.domain.co.uk/chamaecyparis-lawsoniana [R=301,L] 
```

有人有什么建议吗？

谢谢 ：-）

# ios - 括号内容的正则表达式

> ID：11619985
> 
> 赞同：1
> 
> 时间：2012-07-23T20:25:04.267
> 
> 标签：ios, regex

我正在尝试学习正则表达式，但我不明白如何将其正确设置为 NSRegularExpression。我需要获取字符串中任何括号的内容。

所以：Belmont (O'Hare Branch) (Forest Pk-bound)

会给我：'O'Hare Branch' 和 'Forest Pk-bound'

我真的很感激一个评论的例子。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T20:29:29.457

`\(.*?\)`会给你括号之间的一切。抱歉，我不知道如何在 NSRegularExpression 中执行此操作。您要么必须等待 IOS 开发人员出现，要么自己想办法。

```
\( #escaped opening bracket
  . #match anything
  * #match . 0 - unlimited times
  ? #make the * not greedy
\) #escaped closing bracket 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-23T07:26:59.587

```
@"\\(.*?\\)" 
```

会做这项工作。

**注意：****不**支持 这样的嵌套括号：

```
Hi duck (debug duck (now just a regular duck)) 
```

因此，整个解决方案将是：

```
NSString *string = @"Hi duck (debug duck), let's go to shower!";
NSRange range = NSMakeRange(0, [string length]);
NSString *pattern = @"\\(.*?\\)";
NSError  *error = nil;

NSRegularExpression* regex = [NSRegularExpression regularExpressionWithPattern:pattern options:0 error:&error];
NSTextCheckingResult *match = [regex firstMatchInString:string options:0 range:range]; 

NSLog(@"%@", [string substringWithRange:[match rangeAtIndex:0]]); 
```

# c# - Unity 的 C++ 插件“EntryPointNotFoundExeption”

> ID：11619986
> 
> 赞同：0
> 
> 时间：2012-07-23T20:25:05.140
> 
> 标签：c#, c++, plugins, unity3d

我需要一些认真的帮助......我正在尝试导出我的成员函数，以便我可以在 C# 中调用它们

**WMIWrapper.h**

```
#ifndef _WMIWRAPPER_H_
#define _WMIWRAPPER_H_

#include <Windows.h>  
#include <sstream>  
#include <iostream>
#include <WbemCli.h>  

using std::endl;
using std::wstring;
using std::wstringstream;

#pragma comment(lib, "wbemuuid.lib")  

static class WMIWrapper 
{  
public:
    __declspec(dllexport) WMIWrapper();
    __declspec(dllexport) ~WMIWrapper();

    __declspec(dllexport) wstring CreateCOM();
    __declspec(dllexport) wstring CreateService();
__declspec(dllexport) wstring GetMonitors();

private:
    IWbemLocator* _locator;
    IWbemServices* _service;
    IEnumWbemClassObject* _monitors;
};

#endif 
```

**WMIWrapper.cpp**

```
#include "WMIWrapper.h"

extern "C" {

    WMIWrapper::WMIWrapper()
    {
        _locator = NULL;
        _service = NULL;
    }

    WMIWrapper::~WMIWrapper()
    {
        if(_service != NULL)
            _service->Release();
        if(_locator != NULL)
            _locator->Release();
    }

    wstring WMIWrapper::CreateCOM()
    {
        wstringstream ERRStream (wstringstream::in | wstringstream::out);
        HRESULT hRes = CoInitializeEx(NULL, COINIT_MULTITHREADED);  
        if(FAILED(hRes))  
        {  
            ERRStream << "Unable to launch COM: 0x" << std::hex << hRes << endl;
            return L"";  
        }  

        hRes = CoInitializeSecurity(NULL, -1, NULL, NULL, RPC_C_AUTHN_LEVEL_CONNECT, RPC_C_IMP_LEVEL_IMPERSONATE, NULL, EOAC_NONE, 0);
        if(FAILED(hRes))
        {
            ERRStream << "Unable to set security level for COM: " << std::hex << hRes << endl;
            return L"";
        }

        if(FAILED(hRes = CoCreateInstance(CLSID_WbemLocator, NULL, CLSCTX_ALL, IID_PPV_ARGS(&_locator))))  
        {  
            ERRStream << "Unable to create a WbemLocator: " << std::hex << hRes << endl;  
            return L"";  
        }

        const std::wstring& myWString = ERRStream.str();
        const LPCWSTR p = myWString.c_str();
        return p;

    }

    wstring WMIWrapper::CreateService()
    {
        wstringstream ERRStream (wstringstream::in | wstringstream::out);
        HRESULT hRes;
        if(_locator == NULL || FAILED(hRes = _locator->ConnectServer(L"root\\CIMV2", NULL, NULL, NULL, WBEM_FLAG_CONNECT_USE_MAX_WAIT, NULL, NULL, &_service)))  
        {  
            ERRStream << "Unable to connect to \"CIMV2\": " << std::hex << hRes << endl;  
            return L"";  
        }  

        const std::wstring& myWString = ERRStream.str();
        const LPCWSTR p = myWString.c_str();
        return p;
    }

    wstring WMIWrapper::GetMonitors()
    {
        HRESULT hRes;
        wstringstream ssMonitorDescription;
        if(_locator == NULL 
            || _service == NULL
            || FAILED(hRes = _service->ExecQuery(L"WQL", L"SELECT * FROM Win32_DesktopMonitor", WBEM_FLAG_FORWARD_ONLY, NULL, &_monitors)))
        {
            //ERRStream << "Unable to retrieve desktop monitors: " << std::hex << hRes << endl;
            return L"";
        }

        IWbemClassObject* clsObj = NULL;
        int numElems;
        while((hRes = _monitors->Next(WBEM_INFINITE, 1, &clsObj, (ULONG*)&numElems)) != WBEM_S_FALSE)
        {
            if(FAILED(hRes))
                break;

            VARIANT vRet;
            VariantInit(&vRet);
            if(SUCCEEDED(clsObj->Get(L"Description", 0, &vRet, NULL, NULL)) && vRet.vt == VT_BSTR)
            {
                //std::wcout <<  L"Description: " << vRet.bstrVal << endl;
                ssMonitorDescription << "Description: " << vRet.bstrVal << endl;
                VariantClear(&vRet);
            }
        }

        clsObj->Release();

        return ssMonitorDescription.str();
    }
} 
```

**接口.cpp**

```
#include "WMIWrapper.h"

extern "C" 
{
    __declspec( dllexport ) wstring GetMonitor()
    {
        WMIWrapper* wmiWrapper = new WMIWrapper();
        wmiWrapper->CreateCOM();
        wmiWrapper->CreateServiceW();
        return wmiWrapper->GetMonitors();
    }
} 
```

**统一脚本**

```
using UnityEngine;
using System.Runtime.InteropServices;
using System;

public class HardwareDiagnostics : MonoBehaviour {

    //[DllImport("WMIWrapper", EntryPoint="CreateCOM", CharSet = CharSet.Unicode)]
    //static extern String CreateCOM();
    //
    //[DllImport("WMIWrapper", EntryPoint="CreateService", CharSet = CharSet.Unicode)]
    //static extern String CreateService();
    //
    //[DllImport("WMIWrapper", EntryPoint="GetMonitors", CharSet = CharSet.Unicode)]
    //static extern String GetMonitors();
    [DllImport("WMIWrapper", EntryPoint = "GetMonitor", CharSet = CharSet.Unicode)]
    static extern string GetMonitor();

    // Use this for initialization
    void Start () {
        Debug.Log(GetMonitor());
        Debug.Log ("Cock");

    }

    // Update is called once per frame
    void Update () {

    }

} 
```

所以我试图从 Unity 脚本中调用这些成员函数，我得到了*EntryPointNotFoundExeption*错误。我想可能是因为您无法导出成员函数，所以我尝试编写“Interface.cpp”来执行这些函数并返回结果，但返回相同的错误。

**更新**

根据建议，我已将 C++ 函数更改为这种格式

```
void WMIWrapper::CreateCOM(wchar_t* err, int errLength)
    {
        .../Determine wstringstream ERRStream

        wcscpy_s(err, errLength, ERRStream.str().c_str());

    } 
```

我的 C# 是这样的：

```
public class HardwareDiagnostics : MonoBehaviour {

    [DllImport( "WMIWrapper", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Unicode)]
    private static extern void CreateCOM(StringBuilder str, int length);

    [DllImport( "WMIWrapper", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Unicode)]
    private static extern void CreateService(StringBuilder str, int length);

    [DllImport( "WMIWrapper", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Unicode)]
    private static extern void GetMonitors(StringBuilder str, int length);

    // Use this for initialization
    void Start () {
        StringBuilder buffer = new StringBuilder(255);

        CreateCOM(buffer, buffer.Capacity);
        Debug.Log(buffer.ToString());

        CreateService(buffer, buffer.Capacity);
        Debug.Log(buffer.ToString());

        GetMonitors(buffer, buffer.Capacity);
        Debug.Log(buffer.ToString());

    }

    // Update is called once per frame
    void Update () {

    }

} 
```

但是，在调用第一个函数 CreateCOM() 时，我仍然收到“EntryPointNotFoundExeption”；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:29:13.193

这是窗户吗？因为你错过了你的

```
Bool WINAPI DllMain(HINSTANCE hinstDLL, DWORD fdwReason, LPVOID); 
```

如果是 windows 的定义。

请参阅 Charles Petzold 的“Programming Windows: Fifth Edition”第 21 章。

如果你没有它。得到它。所有 Windows 程序员都应该阅读它。

> DllMain 函数在库首次启动和终止时调用。DllMain 的第一个参数是库的实例句柄。如果您的库使用需要实例句柄的资源（例如 DialogBox），则应将 hInstance 保存为全局变量。DllMain 的最后一个参数由系统保留...
> 
> DLL_PROCESS_ATTACH 的 fdwReason 值表示动态链接库已映射到进程的地址空间。这是库执行任何初始化任务所需的提示，以便为来自进程的后续请求提供服务......
> 
> 如果初始化成功，DllMain 应该返回一个非零值。返回 0 将导致 Windows 不运行该程序。
> 
> 当 fdwReason 的值为 DLL_PROCESS_DETACH 时，表示进程不再需要该 DLL..清理...

Visual Studio 的更高版本可能会为您执行此操作——我不确定那部分。

此外，如果您的函数名称被破坏，您将收到一个 EntryPointNotFound 异常。即使使用 extern "C" 声明，您的函数名称也被破坏的原因是因为您在类方法周围放置了 extern "C"。为了让它在没有损坏名称的情况下工作，您必须进行 C 风格的函数声明。

IE

```
#ifdef _cplusplus
extern "C" {
#endif

__declspec(dllexport) wstring CreateCOM();

... 
```

在类的上下文之外。通过将这些声明为类成员，即使使用 extern "C" 声明，名称仍然会被破坏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T20:42:01.763

这会有帮助吗？

[将 std::wstring 的内容从 C++ 返回到 C#](https://stackoverflow.com/questions/7051097/return-a-stdwstring-from-c-into-c-sharp)

[如何：使用 C++ 互操作编组 Unicode 字符串](http://msdn.microsoft.com/en-us/library/42zy2z41.aspx)

[字符串的默认封送处理](http://msdn.microsoft.com/en-us/library/s9ts558h.aspx)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-24T18:14:07.380

错误是因为函数名被 C++ 编译器弄乱了。我认为用 extern "C" {} 将函数声明包装在 .cpp 中解决了这个问题，但我想不是。

```
[DllImport( "WMIWrapper", EntryPoint = "?CreateCOM@WMIWrapper@1@SAXPA_WH@Z", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Unicode)]
private static extern void CreateCOM(StringBuilder str, int length);

[DllImport( "WMIWrapper", EntryPoint = "?CreateServiceW@WMIWrapper@1@SAXPA_WH@Z", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Unicode)]
private static extern void CreateService(StringBuilder str, int length);

[DllImport( "WMIWrapper", EntryPoint = "?GetMonitors@WMIWrapper@1@SAXPA_WH@Z", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Unicode)]
private static extern void GetMonitors(StringBuilder str, int length); 
```

如果有人知道如何在这种情况下正确使用 extern "C"，那将非常有帮助。

# mysql - MySQL 触发器文件奇数请求

> ID：11619987
> 
> 赞同：0
> 
> 时间：2012-07-23T20:25:07.903
> 
> 标签：mysql, triggers

好吧，你可能以前从未听说过这个。

我想手动添加两个 MySQL 触发器文件“ins_trig.TRN”和“eventlog.TRG”，并在 MySQL 中使用它们。

现在，当我将它们添加到 /var/lib/mysql/databasename/ 目录时它可以工作，但它让我重新启动 MySQL 以使其识别触发器。

我想在没有 MySQL 的情况下做到这一点 - 有可能吗？

不，我无法登录 MySQL 并重新启动它或在 MySQL 中手动触发。只有写文件才能控制

我知道这很奇怪所有的帮助！哈哈 ;）

# azure - Azure 配置文件的自定义配置部分

> ID：11619992
> 
> 赞同：3
> 
> 时间：2012-07-23T20:25:25.877
> 
> 标签：azure

我看到 Azure 支持配置设置的基本 AppSettings 名称/值对样式。但是，我找不到任何提及自定义配置设置也受支持的内容。他们是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T20:31:30.197

不支持自定义配置设置。在此处查看我的答案：[CloudConfigurationManager 不会从 app.config 中获取 ApplicationSettings](https://stackoverflow.com/questions/11611404/cloudconfigurationmanager-does-not-pick-up-applicationsettings-from-app-config/11611651#11611651)