# StackOverflow 问答 10777000-10777999

# java - 根据 Spinner 值设置 EditText 可见性

> ID：10777002
> 
> 赞同：0
> 
> 时间：2012-05-27T20:25:32.250
> 
> 标签：java, android, android-edittext, android-spinner, android-event

我正在尝试创建此对话框：

![对话](../Images/40f39148f5a9b7f94083ce4313f5d4db.png).

当 Spinner 设置为*自定义*值时，TextEdit 应该会自动出现。我正在调用`View.setVisible()`，但**不会立即评估**`TextView`可见性，而是等待另一个更改 - 例如添加另一行或设置日期。

 **编码：

```
 ...
        customText = (EditText) v.findViewById(R.id.edit_custom_text);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        s.setAdapter(adapter);

        s.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> adapterView, View view, int i, long l) {
                SpinnerItem si = (SpinnerItem) adapterView.getItemAtPosition(i);
                evt.type = si.eventType;
                if (evt.type == EventType.CUSTOM) {
                    customText.setVisibility(View.VISIBLE);
                } else {
                    customText.setVisibility(View.GONE);
                }
            }

            @Override
            public void onNothingSelected(AdapterView<?> adapterView) {
                //do nothing
            }
        }); 
```

我试过`View.invalidate()`（在父母看来）`View.refreshDrawableState()`但没有运气：/

编辑：达到上面的代码（由调试器验证），我也尝试过`View.INVISIBLE`. 视图不会立即刷新，而只会在视图发生另一次更改后刷新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:51:25.157

例如看这个

```
 s.setOnItemSelectedListener(new OnItemSelectedListener() {
    @Override
    public void onItemSelected(AdapterView<?> parentView,View selectedItemView, int position, long id) {
    if ("YES".equals(s.getSelectedItem().toString().toUpperCase())) {
    youredittxt.setVisibility(View.VISIBLE);

    } else if ("NO".equals(s.getSelectedItem().toString().toUpperCase())) {
youredittxt.setVisibility(View.INVISIBLE);
}}
    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub
    }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T20:30:11.240

那应该可行，可能是您的布局以某种方式不允许/识别此更改吗？

尝试将其更改为，`INVISIBLE`而不是`GONE`，包括（重要！）在您的布局 xml 文件中。

如果由于某种原因可行，请尝试以下操作：

```
customText.getParent().requestLayout(); //possibly the parent of that etc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T09:18:58.107

作为后续问题，您是否在主 UI 线程中？因为 Android 有一些内置的特性和策略，所以只有拥有线程才能更改 UI。如果您不在同一个线程中，请尝试：

```
customText.getHandler().post(new Runnable() {
    public void run() {
        customText.setVisibility(View.VISIBLE);
    }
}); 
```

希望这可以帮助！:)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-27T20:37:17.120

验证您是否确实到达了您的代码块。

> ```
>  customText.setVisibility(View.GONE); 
> ```**

# time - 在 C++/CX 中实现异步延迟

> ID：10777003
> 
> 赞同：5
> 
> 时间：2012-05-27T20:25:32.983
> 
> 标签：time, callback, interop, native, c++-cx

我正在尝试编写一个函数，给定秒数和回调，在给定的秒数后运行回调。回调不必在同一个线程上。目标语言是 C++/CX。

我尝试使用 Windows::System::Threading::ThreadPoolTimer，但结果是内存访问异常。问题似乎是无法从计时器正在运行其回调的托管线程访问回调实现（在本机 C++ 中）。

```
ref class TimerDoneCallback {
private:
    function<void(void)> m_callback;
public:
    void EventCallback(ThreadPoolTimer^ timer) {
        m_callback(); // <-- memory exception here
    }
    TimerDoneCallback(function<void(void)> callback) : m_callback(callback) {}
};
void RealTimeDelayCall(const TimeSpan& duration, function<void(void)> callback) {
    auto t = ref new TimerDoneCallback(callback);
    auto e = ref new TimerElapsedHandler(t, &TimerDoneCallback::EventCallback);
    ThreadPoolTimer::CreateTimer(e, duration);
}
void Test() {
    RealTimeDelayCall(duration, [](){}); //after a delay, run 'do nothing'
} 
```

我不想创建一个线程并在其上休眠，因为可能会有很多并发延迟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T22:11:14.237

TimerDoneCallback 实例未保持活动状态 - C++/CX 中的委托对目标对象进行弱引用（以避免循环引用）。您可以通过使用委托构造函数的扩展重载来覆盖此行为：

```
auto e = ref new TimerElapsedHandler(t, &TimerDoneCallback::EventCallback, CallbackContext::Any, true); 
```

最后的 bool 参数对于强引用应该是 true，对于弱引用应该是 false。（False 是默认值。）

您还可以考虑在 PPL 代理中使用计时器类来进行延迟回调： http: [//msdn.microsoft.com/en-us/library/hh873170](http://msdn.microsoft.com/en-us/library/hh873170(v=vs.110).aspx) (v=vs.110).aspx以避免需要使用 ThreadPoolTimer。

# r - 如何将 cairo 设置为 R 中 x11() 的默认后端？

> ID：10777008
> 
> 赞同：16
> 
> 时间：2012-05-27T20:25:51.317
> 
> 标签：r, ggplot2, cairo

我在 ubuntu 12.04 上使用 ggplot2。默认情况下，我的 x11 类型设置为 Xlib。因此，当我在 qplot 中使用平滑器时，会出现如下错误：

“此设备不支持半透明：每页仅报告一次”。

但是，如果我调用 x11(type="cairo")，一切正常。

如何将 cairo 作为 x11 的默认后端？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-09T14:23:42.090

要使其永久化，您可以将以下行添加到您的 ~/.Rprofile 文件中：

```
setHook(packageEvent("grDevices", "onLoad"),
function(...) grDevices::X11.options(type='cairo'))
options(device='x11') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-28T16:30:05.650

定义另一个设置正确类型的函数'x11'：

```
x11 = function (...) grDevices::x11(...,type='cairo') 
```

# python - 必须指向二维图（x，y）坐标networkx python

> ID：10777009
> 
> 赞同：2
> 
> 时间：2012-05-27T20:25:59.853
> 
> 标签：python, matplotlib, networkx

我从空间数据库中获取信息，这些值类似于线串（空间）格式，我需要将此信息添加到 networkx 图形中，稍后需要在 matplot 库中绘制图形我已经编写了这段代码

```
cursor.execute("SELECT AsText(roadstring) FROM road1")
for row in cursor.fetchall():
    a=row[0][12:-2]
    a=str(a)
    a=a.split(",")
    for i in a:
        i=i.split(" ")
        i[0]=float(i[0])
        i[1]=float(i[1])
        weig=abs(i[0]-i[1])
        G.add_node((i[0],i[1])) 
```

我无法获得如何将道路 (x1,y1) 的二维边缘添加到 (x2,y2)，即使我需要为这些边缘添加权重以获得它们之间的距离有什么建议吗？

每条路的线串都是这样的`643715.202,2499149.0506 643752.61523545,2499089.86084203 643773.6038,2499056.6558 643773.73878609,2499056.44011079 643793.20162482,2499025.34111554 643813.55943268,2498992.81212045 643826.6563,2498971.8852`

我收到此错误我已安装 matplotlib 我尝试通过复制您的代码

> 回溯（最后一次调用）：文件“D:\python\gis\new.py”，第 2 行，从 matplotlib 导入 pyplot as plt 文件“C:\Python27\lib\site-packages\matplotlib__init__.py”，第 133 行，从 matplotlib.rcsetup 导入（defaultParams，文件“C:\Python27\lib\site-packages\matplotlib\rcsetup.py”，第 19 行，从 matplotlib.colors 导入 is_color_like 文件“C:\Python27\lib \site-packages\matplotlib\colors.py"，第 54 行，在 import matplotlib.cbook as cbook 文件中 "C:\Python27\lib\site-packages\matplotlib\cbook.py"，第 15 行，在 import new File 中D:\python\gis\new.py"，第 2 行，从 matplotlib 导入 pyplot 作为 plt 文件 "C:\Python27\lib\site-packages\matplotlib\pyplot.py"，第 20 行，in from matplotlib import _pylab_helpers, interactive ImportError: cannot import name interactive

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T09:56:22.657

我不完全确定你想要完成什么，但我是这样解释的。

您将道路定义为沿道路的坐标，并且您希望将这些坐标绘制为节点，并将它们之间的道路绘制为边。您还希望边权重是两个节点之间的距离。

这可以很容易地通过保存前一个节点并使用勾股定理来计算距离来完成。我是这样做的：

```
import networkx as nx
from matplotlib import pyplot as plt
import math

G = nx.Graph()

row = '643715.202,2499149.0506 643752.61523545,2499089.86084203 ' +\
    '643773.6038,2499056.6558 643773.73878609,2499056.44011079 ' +\
    '643793.20162482,2499025.34111554 643813.55943268,2498992.81212045 ' +\
    '643826.6563,2498971.8852'

a=row.split(" ")
# Saving the previous node to be able to calculate the distance
prev_point = None
# Save the positions in a dictionary to be able to draw 
# the nodes at the correct positions
pos = {}
for i in a:
    cur_point = tuple([float(x) for x in i.split(',')])
    assert len(cur_point) == 2
    if prev_point is not None:
        # Calculate the distance between the nodes with the Pythagorean
        # theorem
        b = cur_point[1] - prev_point[1]
        c = cur_point[0] - prev_point[0]
        a = math.sqrt(b ** 2 + c ** 2)
        G.add_edge(cur_point, prev_point, weight=a)
    G.add_node(cur_point)
    pos[cur_point] = cur_point
    prev_point = cur_point
nx.draw(G, pos=pos)
plt.savefig('roads.png') 
```

在这个例子中，我假设一个空格分隔节点位置，每个位置的 x 和 y 坐标用逗号分隔，但这很容易改变。上面的代码将输出如下内容：

![](../Images/b39d3f6a371bb0f737159fd4f5bafc77.png)

这会将节点置于其“正确”位置，尽管如果道路长度存在很大差异，它可能会导致一些问题。在上面的示例中，您可以看到两个节点或多或少位于彼此之上。但这是一个不同的问题。

# client - 能用最简单的方式解释什么是客户端-服务器模型吗？

> ID：10777010
> 
> 赞同：-1
> 
> 时间：2012-05-27T20:26:06.207
> 
> 标签：client, client-server, software-design

请像孩子一样解释。我试图向一名初级程序员解释这个概念，但我还没有做到他理解这个话题。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T20:37:31.293

客户端服务器：

您和您的朋友（客户）去冰淇淋店（服务器）并订购冰块。

点对点：

你和你所有的朋友聚在一起，为彼此制作冰块。

没有网络：

你没有冰（或自己做）。

# c# - 如何在 C# .NET 中计算 CPU 平均负载

> ID：10777013
> 
> 赞同：2
> 
> 时间：2012-05-27T20:26:34.677
> 
> 标签：c#, .net, windows, c#-4.0

我一直在到处寻找可以计算负载平均值的代码片段。

非常感谢任何想法、片段或链接！

谢谢！

杰弗里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T20:34:32.997

这个`Process`类有一些你可以使用的属性（`TotalProcessorTime`, `UserProcessorTime`, ...）。

Msdn：http: [//msdn.microsoft.com/en-us/library/system.diagnostics.process.totalprocessortime.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.totalprocessortime.aspx)

# php - json_encode“不工作”正常吗？

> ID：10777014
> 
> 赞同：2
> 
> 时间：2012-05-27T20:26:37.230
> 
> 标签：php, jquery, json

当然，这个主题有点棘手......我假设 json_encode php 函数可以完美运行。

但是我在做的事情一定有问题。

我的 PHP 程序中有一个实际包含数据的变量。结构化数据的排序，因为它是一个对象变量，其所有属性都已正确设置。

但是，神奇的是，当我将 json_encode 应用于该变量时，它并没有“填充” json 对象。

请看下面的案例：

1.  如您所见...变量 $test 包含数据。

![在此处输入图像描述](../Images/d74a6251649a9378cd4cda2ac502da08.png)

2.  现在，将重点放在整个 json_encoder($test) 上，它只是没有填充 json 对象的“test”{} 部分。 ![在此处输入图像描述](../Images/98956288ba22670183dd6dee06c5c28e.png)

肯定是我做错了什么。但是……什么？

提前非常感谢。

佩德罗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T20:32:32.817

`json_encode`仅适用于公共属性，它不能获取对象的私有或受保护属性并在没有任何帮助的情况下形成 JSON 表示。

要序列化具有**所有**属性的对象，您需要手动实现一个函数来执行此操作。PHP官方文档有一个很好的例子来说明如何做到这一点[here](http://www.php.net/manual/en/function.json-encode.php#96248)

# c++ - C++ 标准文档

> ID：10777017
> 
> 赞同：0
> 
> 时间：2012-05-27T20:26:46.987
> 
> 标签：c++

> **可能重复：**
> [在哪里可以找到当前的 C 或 C++ 标准文档？](https://stackoverflow.com/questions/81656/where-do-i-find-the-current-c-or-c-standard-documents)

在阅读了几个网站和书籍之后，我注意到经常引用 C++ 标准。在阅读 stackoverflow 和 c++ 论坛上的帖子时，社区鼓励遵循此标准。这鼓励我使用 Google c++ 标准来更详细地了解该语言。标准是一本书吗？发表的文件？一个通过某种看似疯狂的媒介说话的神秘精神？是否有供人们参考以进行验证的单一来源和最终版本？一些网站和书籍声称基于标准，但这与标准不同。

[到目前为止，我在http://gcc.gnu.org/onlinedocs/libstdc++/](http://gcc.gnu.org/onlinedocs/libstdc++/)上找到了查看 ISO 标准（似乎大多是不完整的草案）和 GNU c++ 文档的建议。我已经简要地使用这些来尝试回答一些想到的问题，但我想确保这些是在回答问题（我自己的或其他人的）时使用的正确参考，并且我按照正确的标准这样做而不是基于标准的东西（有区别）。

*需要注意的是：对我来说，我 99% 的编程都将在 Linux 环境中完成，因此对于不同的操作系统可能（或可能没有）不同的标准*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T20:31:18.833

标准只有一个版本。系统之间没有区别（这是一个标准）。您必须付费才能获得标准的完整版本（即使是 PDF 文件）。每个人都在使用：

[https://github.com/cplusplus/draft](https://github.com/cplusplus/draft) [编辑到最新版本]

免费，因为它是草稿版，而且是免费的。草案和已发布的版本之间存在一些差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T20:41:11.847

如果您想获得*该*标准的副本，您可以从 ISO 以少量费用购买它，这就是他们为自己提供资金的方式。

但是，如果您只是遵循C++11 的最新[草案](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3242.pdf)，它是当前最新的 C++ 标准，并且将保持一段时间，您将永远不会注意到与已发布标准的差异。

POSIX 的情况与此类似，POSIX 是用于该系列操作系统上的类 UNIX API 的标准。在那种情况下，你会想去[这里](http://pubs.opengroup.org/onlinepubs/007904975/toc.htm)。

然而，尽管无论你做什么都非常希望对 C++ 有一个完美的理解，但很可能你的可移植性需求会使 POSIX 与你无关；要么您可能只需要 Linux 兼容性，要么您可能将自己限制在即使在非 POSIX 操作系统上也能支持您的 API（例如标准 C++ 库或其他可移植库）。

# c++ - 多个定义，如何原型化 std::map？

> ID：10777023
> 
> 赞同：2
> 
> 时间：2012-05-27T20:27:46.433
> 
> 标签：c++, class, forward-declaration

我知道发生了什么，但我不知道如何解决这个问题：

主文件

```
#include "Win32.h"

int main () {
    return 0;
} 
```

Win32.h

```
#include <windows.h>
#include <map>

#ifndef WIN32_H_
#define WIN32_H_

namespace W32 {

class Win32;                        // Pre-Declaration
std::map<HWND, Win32 *> windowMap;  // Handle to Class instance mapping

class Win32 {
    public:

        Win32();
        virtual ~Win32();

    protected:

    private:

};  // Class Win32

} // namespace W32

#endif // WIN32_H_ 
```

Win32.cpp

```
#include "Win32.h"

namespace W32 {

Win32::Win32() {
}

Win32::~Win32() {
}

} /* namespace W32 */ 
```

错误信息：

```
 src\Win32.o: In function `Win32':
    D:\Dev\Projects\Eclipse\OpenGL3\Debug/../src/Win32.cpp:7: multiple definition of `W32::windowMap'
    src\main.o:D:\Dev\Projects\Eclipse\OpenGL3\Debug/../src/main.cpp:14: first defined here 
```

好的，我知道它`std::map<HWND, Win32 *> windowMap;`出现在多个文件中，并且因为它包含在多个文件（main.cpp/Win32.cpp）中，因此导致它被重新定义。我对 std::map 还是有点陌生​​。我需要做的是原型`windowMap`，但我不知道如何？我以为这是我抓住这段代码的时候。Win32 类需要能够使用它，但必须声明它才能这样做，但我所拥有的不是这样做的方法，我不知道要寻找什么来获得正确的如何正确转发申报信息`std::map<HWND, Win32 *> windowMap`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T20:31:13.670

```
std::map<HWND, Win32 *> windowMap; 
```

是一个定义，所以你打破了**一个定义规则**。您需要制作变量`extern`：

```
extern std::map<HWND, Win32 *> windowMap; 
```

并将其定义在单个实现文件中：

Win32.h

```
#include <windows.h>
#include <map>

#ifndef WIN32_H_
#define WIN32_H_

namespace W32 {
   class Win32;                        // Pre-Declaration
   extern std::map<HWND, Win32 *> windowMap;  // Handle to Class instance mapping
   //...
};  // Class Win32

} // namespace W32

#endif // WIN32_H_ 
```

Win32.cpp

```
#include "Win32.h"
namespace W32 {
   std::map<HWND, Win32 *> windowMap;  // Handle to Class instance mapping
   //...
} /* namespace W32 */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T20:31:36.277

以下是*定义*，而不是*声明*：

```
std::map<HWND, Win32 *> windowMap; 
```

定义在 cpp 文件中；在标题中，您需要一个*声明*，如下所示：

```
extern std::map<HWND, Win32 *> windowMap; 
```

定义

```
std::map<HWND, Win32 *> windowMap; 
```

应该放在cpp文件中。否则，每个包含带有定义的标头的 cpp 文件都将定义自己的`windowMap`，从而导致您看到的链接器错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T10:48:05.150

纯 C++ 方法是：

```
std::map<HWND, Win32 *> windowMap" 
```

Win32 类的`static`成员。此外，忘记`file.h`旁边的 with `file.cpp`，为了简单起见，几乎每个核心开发人员都已弃用它。您的代码很短，因此所有内容都应包含在标头中，尤其是在您似乎正在编程框架时。

您的问题弹出了 C++ 中存在静态成员的原因。此外，定义此地图`extern`不是一个好习惯，因为您还必须将真实定义隐藏在某个地方，也许是在一个不太相关的地方。

最后，我已经尝试过这种设计，Windows 处理程序的函数以异步方式调用......

1- 如果多个窗口同时处于活动状态，您将在竞态条件下运行。

2-事实上，只要你调用`CreateWindow`函数，你就会运行一个竞争条件，因为它会在你的背后调用你的 windows 消息泵处理程序，而你还不知道`HWND`值

3- 如果您同时尝试`insert/read/remove`在地图中运行，您将运行竞态条件，这实际上是一个很常见的操作。

# java - Android，等待活动在异步任务中完成

> ID：10777025
> 
> 赞同：1
> 
> 时间：2012-05-27T20:27:54.340
> 
> 标签：java, android, multithreading, android-asynctask

我有一个 AsyncTask，其中在 doInBackground 方法期间启动了一个活动：

```
private class startupTask extends AsyncTask<Void, Void, Void> {
    @Override
    protected Void doInBackground(Void... params) {
        Intent intent = new Intent(StartupActivity.this, LoginConnectorActivity.class);
        intent.putExtra("account", account);
        startActivity(intent);
        return null;
    }
} 
```

我想在让 AsyncTask 完成之前等待被调用的活动完成。最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T20:43:24.013

问题真的是*你为什么要这样做？*

的目的`AsyncTask`是提供一种简单的方法来执行可能很昂贵的任务，这样它就不会阻塞 UI 线程。从您的问题来看，听起来您无需使用多线程即可轻松完成任务。

你真正想要的是`Activity`用`startActivityWithResult()`. 然后在启动的活动返回控制权时启动新活动`onActivityResult()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T20:37:38.120

您要问的内容超出了 的目的`AsyncTask`，因为`AsyncTask`假设与应用程序的其他任务异步运行并在后台完成。因此，如果您想等待此任务完成，请不要将其设为 a `AsyncTask`，就这么简单。

# html - R xml遇到和处理xml文件中的html实体

> ID：10777026
> 
> 赞同：1
> 
> 时间：2012-05-27T20:27:57.370
> 
> 标签：html, xml, r, xml-parsing, html-entities

您好 R 的 XML 包用户，

我在解析 XML 时遇到了一个奇怪的错误。它与在解析 XML 文件时遇到诸如 mdash 和 ndash 之类的 HTML 实体有关。

这是我使用的代码：

```
InText = readLines(xmlFileName,n=-1)
Text = xmlValue(xmlRoot(xmlTreeParse(InText,trim=FALSE))) 
```

我目前正在使用以下方法消除这些实体，例如 mdash 和 ndash

```
InText = gsub("\\&mdash"," ",InText);
InText = gsub("\\&ndash"," ",InText); 
```

但这真的很乏味，因为我看到了可能的 HTML.4.0 实体列表。

关于如何在解析 XML 文件时消除这些问题的任何想法

非常感谢您的帮助和想法 Shivani

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:09:21.560

如果您只是想删除所有命名的 HTML 实体，请使用正则表达式：

```
library("XML")

InText <- "<html>\
<head>\
    <title>Test &amp; Test again</title>\
</head>\
    <body>Hello &nbsp; world</body>\
</html>"

InText <- gsub("\\&[^;]+;","",InText)

Text <-  xmlValue(xmlRoot(xmlTreeParse(InText,trim=FALSE))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T07:44:38.037

在 XML 包中尝试 readHTML；它有强大的方法可以处理很多这样的情况。另请参阅[使用 XML 包将 html 表抓取到 R 数据帧中](https://stackoverflow.com/questions/1395528/scraping-html-tables-into-r-data-frames-using-the-xml-package)。

# javascript - DocumentFragment 中不允许的某些元素？

> ID：10777034
> 
> 赞同：1
> 
> 时间：2012-05-27T20:28:53.857
> 
> 标签：javascript, dom, documentfragment, queryselectall

我想使用 DocumentFragment 和 querySelector 来制作和修改 DocumentFragments。我正在使用[将任意 HTML 插入 DocumentFragment](https://stackoverflow.com/questions/9284117/inserting-arbitrary-html-into-a-documentfragment)中的一些代码从 HTML 字符串创建片段：

```
stringToDocumentFragment = function(html_string) {
    var frag = document.createDocumentFragment();
    var holder = document.createElement("div")
    holder.innerHTML = html_string
    frag.appendChild(holder)
    return frag
} 
```

它有效：

```
test_one = stringToDocumentFragment('<one><two>test</two></one>')
#document-fragment

test_one.querySelector('one')
> <one>...</one> 
```

但是，如果我使用`<html>`or之类的元素`<body>`，它会失败：

```
test_two = stringToDocumentFragment('<html><body>test</body></html>')
#document-fragment

test_two.querySelector('html')
null 
```

Chrome 和 Firefox 中的行为是相同的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T20:44:26.223

文档片段是文档的一部分，而不是整个文档 - 因此您不应该在文档片段中拥有`<body>`和。`<html>`文档片段的要点在于它有一种方法可以创建或存储许多顶级元素（某个文档的一部分）。当插入到实际文档中时，只插入里面的元素，而不是顶级容器。

如果您想要一个包含 html 和正文部分的实际文档，请创建一个文档，而不是片段。

如果您只想能够使用选择器操作，那么您根本不需要使用片段。只需创建一个 div 并在 div 上设置 innerHTML 并在 div 上使用 querySelector 操作。您不需要文档片段。

# c# - C# Ping 不同的子网

> ID：10777052
> 
> 赞同：0
> 
> 时间：2012-05-27T20:31:26.383
> 
> 标签：c#, ip-address, ping, subnet

这里的第一个问题！

我编写并借用了代码来形成一个 IP 地址和 MAC 地址查找器控制台应用程序。它发送异步 Ping 请求，并针对它找到的每个 IP 地址和 ARP 请求来查找 MAC 地址。

如何将其配置为使用与 /24 (255.255.255.0) 不同的子掩码来查找 IP 地址？

这不适用于僵尸网络。这是给我的网络技术人员的朋友。

```
using System;
using System.Diagnostics;
using System.Net;
using System.Net.NetworkInformation;
using System.Net.Sockets;
using System.Runtime.InteropServices;
using System.Text;
using System.Threading;

namespace FindIpAndMacPro
{
    internal class Program
    {
        private static CountdownEvent _countdown;
        private static int _upCount;
        private static readonly object LockObj = new object();

        private static void Main()
        {
            _countdown = new CountdownEvent(1);
            var sw = new Stopwatch();
            sw.Start();
            Console.Write("Skriv in IP-Adress");
            string ipBase = Console.ReadLine();

            for (int i = 0; i < 255; i++)
            {
                string ip = ipBase + "." + i;
                //Console.WriteLine(ip);
                var p = new Ping();
                p.PingCompleted += PPingCompleted;
                _countdown.AddCount();
                p.SendAsync(ip, 100, ip);
            }

            _countdown.Signal();
            _countdown.Wait();
            sw.Stop();
            new TimeSpan(sw.ElapsedTicks);
            Console.WriteLine("Took {0} milliseconds. {1} hosts active.", sw.ElapsedMilliseconds, _upCount);
            Console.WriteLine("External IP (whatismyip.com): {0}", GetExternalIp());
            Console.ReadLine();
        }

        private static void PPingCompleted (object sender, PingCompletedEventArgs e)
        {
            var ip = (string) e.UserState;
            if (e.Reply != null && e.Reply.Status == IPStatus.Success)
            {

                {
                    string name;
                    string macAddress = "";

                    try
                    {
                        IPHostEntry hostEntry = Dns.GetHostEntry(ip);
                        name = hostEntry.HostName;
                        macAddress = GetMac(ip);
                    }
                    catch (SocketException)
                    {
                        name = "?";
                    }
                    Console.WriteLine("{0} | {1} ({2}) is up: ({3} ms)", ip, macAddress, name, e.Reply.RoundtripTime);
                }
                lock (LockObj)
                {
                    _upCount++;
                }
            }
            else if (e.Reply == null)
            {
                Console.WriteLine("Pinging {0} failed. (Null Reply object?)", ip);
            }
            _countdown.Signal();
        }

        [DllImport ("iphlpapi.dll")]
        public static extern int SendARP (int destIp, int srcIp, [Out] byte[] pMacAddr, ref int phyAddrLen);

        private static string GetMac (String ip)
        {
            IPAddress addr = IPAddress.Parse(ip);
            var mac = new byte[6];
            int len = mac.Length;
            SendARP(ConvertIpToInt32(addr), 0, mac, ref len);
            return BitConverter.ToString(mac, 0, len);
        }

        private static Int32 ConvertIpToInt32 (IPAddress apAddress)
        {
            byte[] bytes = apAddress.GetAddressBytes();
            return BitConverter.ToInt32(bytes, 0);
        }

        private static string GetExternalIp()
        {
            const string whatIsMyIp = "http://automation.whatismyip.com/n09230945.asp";
            var wc = new WebClient();
            var utf8 = new UTF8Encoding();
            string requestHtml = "";
            try
            {
                requestHtml = utf8.GetString(wc.DownloadData(whatIsMyIp));
            }
            catch (WebException we)
            {
                Console.WriteLine(we.ToString());
            }

            return requestHtml;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T21:13:28.953

首先，您必须从子网掩码计算网络。如果您的子网掩码是 255.255.248.0，那么您可以通过从 255 中减去子网掩码轻松计算。例如：192.168.32.0/21 (255.255.248.0)

```
 255.255.255.255
-255.255.248.0
 ---------------
  0 . 0 . 7 . 255 
```

网络范围是从 192.168.32.0 到 192.168.39.255 (32 + 7) 每 0 是你的 ipBase 这里 192.168。其余的都是用 for 循环完成的。因此，对于所有可能的网络，您最多需要 4 个 for 循环。一个 IP 地址的每个八位字节。也许您可以使用现有的类来计算子网，但我不知道这样的类

# ios - 如何在一个视图不应该自动旋转而一个视图应该自动旋转的 iOS 应用程序中处理自动旋转？

> ID：10777053
> 
> 赞同：2
> 
> 时间：2012-05-27T20:31:32.017
> 
> 标签：ios, ipad, uiview, uiviewcontroller

比如说，如果它是 iPad 上的一个简单的绘图程序，当用户在纵向模式下从 (0,0) 到 (730, 1000) 绘制一条线时，这条线会完整显示。但是如果用户将 iPad 旋转 90 度，如果我们允许自动旋转，那么底部的线将被切断。

所以包含画布的视图不应该自动旋转。

另一方面，如果屏幕上有撤消按钮，或者滑出面板，那么这部分实际上应该根据 iPad 的旋转状态自动旋转。

这如何最好地实施？因为通常我们对所有东西都有自动旋转，或者根本没有自动旋转，但这种情况需要一半一半。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:35:36.613

我同意你的观点，也许绘制的图像可能不应该旋转。当人们在纸上绘画时，他们经常旋转纸张以将图像的一部分倒置或以一定角度绘制——如果图像自动旋转，这种技术可能是不可能的。理想情况下，用户可以选择纵向或横向图像。例如，也许您应该在他们开始绘图时修复图像方向。

我首先要尝试的是在你的视图控制器中实现自定义方法来改变元素的位置和旋转：

```
-(void) updateLandscape; 
```

和

```
-(void) updatePortrait; 
```

并注册方向更改通知：

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(orientationChanged:) name:UIDeviceOrientationDidChangeNotification object:nil];

- (void)orientationChanged:(NSNotification *)notification {
    currentOrientation = [[UIDevice currentDevice] orientation];
    if ( currentOrientation == UIDeviceOrientationLandscapeLeft || currentOrientation == UIDeviceOrientationLandscapeRight ) {
        [self updateLandscape];
    } else {
          if ( currentOrientation == UIDeviceOrientationPortrait || currentOrientation == UIDeviceOrientationPortraitUpsideDown ) {
                [self updatePortrait];
          } else {
             if ([[UIApplication sharedApplication] statusBarOrientation] == UIInterfaceOrientationLandscapeLeft || [[UIApplication sharedApplication] statusBarOrientation] == UIInterfaceOrientationLandscapeRight) {
                 [self updateLandscape];
             } else {
                 [self updatePortrait];
             }   
         }
     }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T03:04:37.357

我必须同意 lnafziger 的观点，我很难想象用户在旋转设备时会希望他们的绘图不旋转。绘图时，图像的上下和左右方面对于创意绘图过程是如此不可或缺，以至于我会认为看到视图上的控件旋转，但图像没有旋转会很奇怪。底线，我认为即使用户旋转设备，您也确实希望保留图像的上下和左右。但我认为你是绝对正确的，如果用户在旋转设备时图像的纵横比发生变化（即，如果你压扁了图像），用户会发现它会迷失方向。

现在，您已经提到了一种防止纵横比受到干扰的解决方案，即保持绘图图像为正方形，例如 768x768，并且可能使用额外的空间来布置一些控件/工具。更好的是，您可能想要引入由用户可以在其上平移/滚动的页面组成的绘图的概念。这样，您可以将图像设置为用户想要的任何大小，并且当用户旋转设备时，图像的“页面”不会改变，只是 iPad 屏幕所代表的页面上的小视口。如果您确信用户想要旋转图像，那么就给他们一个旋转页面的功能，而不管设备方向如何。您可以轻松地将他们想要的所有东西的坐标映射到新空间中。该映射应该很容易。

但是，如果您决定在他们旋转设备时不旋转图像（尽管我们坚持认为这似乎不是一个好主意），似乎有两种方法（假设您不会考虑最简单的解决方案，在应用程序中只允许一个方向）：

首先，您可以重新映射用户绘制的对象的所有坐标，然后在旋转完成后重新绘制对象。同样，当您旋转 90 度时，所有 x,y 坐标的重新映射非常简单。

其次，您可以将绘图放在它自己的图层上，然后在设备旋转时执行[CGAffineTransformRotate](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGAffineTransform/Reference/reference.html)（例如，如果用户将设备旋转 90 度或 PI/2 弧度，顺时针，您将旋转图层 PI/2逆时针）。令我震惊的是，当您在转换后绘制新线或其他对象时，这可能会让人感到困惑，因为您可能必须将新坐标映射到转换后的图层，但我怀疑您可以让它工作。有关详细信息，请参阅[CGAffineTransformRotate](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGAffineTransform/Reference/reference.html)的文档。如果你用谷歌搜索，那里有很多例子。

# sql - 如何在没有在插入时选择 scope_identity 的情况下在实体框架中调用 SaveChanges？

> ID：10777054
> 
> 赞同：2
> 
> 时间：2012-05-27T20:31:35.387
> 
> 标签：sql, entity-framework

我们有一个表，由于插入和读取的数据量很大，调用 select scope_identity 超时。这导致插入成功，但调用应用程序失败。（我们确定它与表上的更新统计信息有关）。我们更改表的能力是有限的，作为解决方案，我创建了两个 Ado.net 调用：

1.  调用不带 select scope_identity 的插入（我们不需要 id）
2.  带有 select scope_identity 的可选插入（我们需要新 ID）

有没有办法可以用实体框架重现这个功能？有没有办法改变 SaveChanges 机制来执行插入（它总是一个插入）而不包括插入语句中的 Select SCOPE_IDENTITY？

谢谢

# c - 访问冲突读取位置 0x003134d4

> ID：10777057
> 
> 赞同：-2
> 
> 时间：2012-05-27T20:32:09.957
> 
> 标签：c, segmentation-fault

我有一个想要完成的小练习，但是我遇到了一个我以前从未见过的错误。在我看来，这甚至不合逻辑：

> oop244_a1.exe 中 0x0003191a 处的未处理异常：0xC0000005：访问冲突读取位置 0x003134d4。

这是程序代码： **函数位于按钮 (bit_to_ascii) 处，即出现问题的地方。**我试过调试程序，似乎变量“clen”由于某种原因被更改为一个不合理的高数字（100000+），而它应该是该循环的 950 个字符

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>
#include <math.h>

#define LINES 5

/* assignment #1 function prototype */
int bit_to_ascii(const char [ ], char [ ]);

int main( ) {

   const char *core_data[ ] = {
"0", /* should insert the null byte '\0' only */

"01010111 This sequence contains the letter 'W'       " /*  87 = 'W' */
"      r5 0 #! 1 1 gP 0 f66-:] 0 [ } 1 v4t^ 0 1 n>?:77" /* 101 = 'e' */
" junk ^*@&#^% 0110  more junk }{r;,<> 1100         2x" /* 108 = 'l' */
"                  0    1       1     0 0          011" /*  99 = 'c' */
"0  ^%jh  1 ]{) OVR 1 - 0 _! 9 + 1  118Y z(x pM1      " /* 111 = 'o' */
"This next group of 8 should be SKP skipped! 11111111 " /* skipped */
"*&^! 0  1  1  0 1     1 0     128673kjshd:L<    2938 " /* 109 = 'm' */
"      r5 0 #! 1 1 gP 0 f66-:] 0 [ } 1 v4t^ 0 1 n>?:77" /* 101 = 'e' */
"#!/bin/bash 00  1 00 00 0 g^b-ps 6@&^%               " /*  32 = ' ' */
"01010100 This sequence contains the letter 'T'       " /*  84 = 'T' */
"0  ^%jh  1 ]{) OVR 1 - 0 _! 9 + 1  118Y z(x pM1      " /* 111 = 'o' */
"#!/bin/bash 00  1 00 00 0 g^b-ps 6@&^%               " /*  32 = ' ' */
"---repeat--->0 1 0 0 1 1 1 1<------------RPT2--------" /*  79 = 'O' */
"0 1 0 1 0bbavac9872962  000&*************************" /*  80 = 'P' */
"a0b0c1d1e0f0g1h0ijklmnopqrstuvwxyz*******************" /*  50 = '2' */
"00fg333                                110100>>>>>>>>" /*  52 = '4' */
"00fg333                                110100>>>>>>>>" /*  52 = '4' */
"                     0000                            ",/*  0 = '\0' */

"00011110 This char should not be inserted!           " /*  30 cntrl */
" 00011111 This char should not be inserted!          " /*  31 cntrl */
"  00100000                                           " /*  32 = ' ' */
"   00100001                                          " /*  33 = '!' */
"    00100010                                         " /*  34 = '"' */
"     00100011                                        " /*  35 = '#' */
"      00100100                                       " /*  36 = '$' */
"       00100101                                      " /*  37 = '%' */
"        00100110                                     " /*  38 = '&' */
"         00100111                                    " /*  39 = ''' */
"          00101000                                   " /*  40 = '(' */
"           00101001                                  " /*  41 = ')' */
"            00101010                                 " /*  42 = '*' */
"             00101011                                " /*  43 = '+' */
"              00101100                               " /*  44 = ',' */
"               00101101                              " /*  45 = '-' */
"                00101110                             " /*  46 = '.' */
"                 00101111                            " /*  47 = '/' */
"                  00110000                           " /*  48 = '0' */
"                   00110001                          " /*  49 = '1' */
"                    00110010                         " /*  50 = '2' */
"                     00110011                        " /*  51 = '3' */
"                      00110100                       " /*  52 = '4' */
"                       00110101                      " /*  53 = '5' */
"                        00110110                     " /*  54 = '6' */
"                         00110111                    " /*  55 = '7' */
"                          00111000                   " /*  56 = '8' */
"                           00111001                  " /*  57 = '9' */
"                            00111010                 " /*  58 = ':' */
"                             00111011                " /*  59 = ';' */
"                              00111100               " /*  60 = '<' */
"                               00111101              " /*  61 = '=' */
"                                00111110             " /*  62 = '>' */
"                                 00111111            " /*  63 = '?' */
"                                  01000000           " /*  64 = '@' */
"                                   00000000          ",/*   0 = '\0'*/

"                                    01000001         " /*  65 = 'A' */
"                                     01000010        " /*  66 = 'B' */
"                                      01000011       " /*  67 = 'C' */
"                                       01000100      " /*  68 = 'D' */
"                                        01000101     " /*  69 = 'E' */
"                                         01000110    " /*  70 = 'F' */
"                                          01000111   " /*  71 = 'G' */
"                                           01001000  " /*  72 = 'H' */
"                                            01001001 " /*  73 = 'I' */
"                                             01001010" /*  74 = 'J' */
"                                            01001011 " /*  75 = 'K' */
"                                           01001100  " /*  76 = 'L' */
"                                          01001101   " /*  77 = 'M' */
"                                         01001110    " /*  78 = 'N' */
"                                        01001111     " /*  79 = 'O' */
"                                       01010000      " /*  80 = 'P' */
"                                      01010001       " /*  81 = 'Q' */
"                                     01010010        " /*  82 = 'R' */
"                                    01010011         " /*  83 = 'S' */
"                                   01010100          " /*  84 = 'T' */
"                                  01010101           " /*  85 = 'U' */
"                                 01010110            " /*  86 = 'V' */
"                                01010111             " /*  87 = 'W' */
"                               01011000              " /*  88 = 'X' */
"                              01011001               " /*  89 = 'Y' */
"                             01011010                " /*  90 = 'Z' */
"                            01011011                 " /*  91 = '[' */
"                           01011100                  " /*  92 = '/' */
"                          01011101                   " /*  93 = ']' */
"                         01011110                    " /*  94 = '^' */
"                        01011111                     " /*  95 = '_' */
"                       01100000                      " /*  96 = '`' */
"                      00000000                       ",/*   0 = '\0'*/

"                     01100001                        " /*  97 = 'a' */
"                    01100010                         " /*  98 = 'b' */
"                   01100011                          " /*  99 = 'c' */
"                  01100100                           " /* 100 = 'd' */
"                 01100101                            " /* 101 = 'e' */
"                01100110                             " /* 102 = 'f' */
"               01100111                              " /* 103 = 'g' */
"              01101000                               " /* 104 = 'h' */
"             01101001                                " /* 105 = 'i' */
"            01101010                                 " /* 106 = 'j' */
"           01101011                                  " /* 107 = 'k' */
"          01101100                                   " /* 108 = 'l' */
"         01101101                                    " /* 109 = 'm' */
"        01101110                                     " /* 110 = 'n' */
"       01101111                                      " /* 111 = 'o' */
"      01110000                                       " /* 112 = 'p' */
"     01110001                                        " /* 113 = 'q' */
"    01110010                                         " /* 114 = 'r' */
"   01110011                                          " /* 115 = 's' */
"  01110100                                           " /* 116 = 't' */
" 01110101                                            " /* 117 = 'u' */
"01110110                                             " /* 118 = 'v' */
" 01110111                                            " /* 119 = 'w' */
"  01111000                                           " /* 120 = 'x' */
"   01111001                                          " /* 121 = 'y' */
"    01111010                                         " /* 122 = 'z' */
"     01111011                                        " /* 123 = '{' */
"      011111RPT10                                    " /* 124 = '|' */
"       01111101                                      " /* 125 = '}' */
"        00000000                                     " /*   0 = '\0'*/
};

   char phrase[41];
   char correct[LINES][41] = {
      "",
      "Welcome To OOP244",
      " !\"#$%&'()*+,-./0123456789:;<=>?@",
      "ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`",
      "abcdefghijklmnopqrstuvwxyz{||||||||||}"
   };

   int rvalues[LINES] = { 1, 18, 34, 33, 39 }, i;
   int valid = 1, rc, err_code;

   for(i=0; i<LINES && valid; i++) {
      rc = bit_to_ascii(core_data[i], phrase);
      if(rc != rvalues[i] || strcmp(phrase, correct[i])) {
     printf("Failed on test... %d\n\n", i+1);
     valid = 0;
      }
      else {
     printf("Passed test %d...\n\n", i+1);
      }
      printf("Your string ----------> '%s'\n", phrase);
      printf("Actual string --------> '%s'\n", correct[i]);
      printf("Your return value ----> %d\n", rc);
      printf("Actual return value --> %d\n", rvalues[i]);
      printf("Press the ENTER key to continue...");
      getchar( );
   }
   if(valid) {
      printf("\nCongratualtions!!! You passed all tests.\n");
      printf("You may hand in your assignment.\n");
   }
   else {
      printf("\nYou correctly sequenced %d/5 data blocks...\n", i-1);
      printf("Your program still needs some work!\n");
      printf("Keep at it!\n\n");
   }
   getchar();
   return 0;
}

int bit_to_ascii(const char core[], char data[]) {
    int clen = strlen(core);
    int dlen = strlen(data);
    char bits[8] = {0,0,0,0,0,0,0,0};
    int bit_idx = 0;
    int i = 0;
    int dcount = 0;

    printf("clen: %d\n", clen);

    for (i = 0; i < clen; i++) {
        if (core[i] == '0' || core[i] == '1') {
            bits[bit_idx++] = core[i];

            //printf("bit_idx: %d\n", bit_idx);
            //printf("clen: %d\n", clen);
            //printf("i+1: %d\n", i+1);

            if (bit_idx == 8 || ((i+1) >= clen)) {

                int power = 7;
                double dec = 0.0;
                int j;

                // fill in with zeroes
                for (j = bit_idx; j < 8; j++) {
                    bits[j] = 0;
                }

                // binary to decimal
                for (j = 0; j < 8; j++) {
                    if (bits[j] == '1') {
                        dec += pow((double)2, power--);
                    }
                }

                data[dcount++] = (int)dec;
            }
        }
    }

    return dcount;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T20:36:43.860

我没有测试它，但可能你必须`bit_idx`在达到 '0' 后设置为`8`.

如果没有，您将写出`bits`数组并覆盖堆栈。可能`clen`变量恰好就在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T20:40:36.560

问题在这里：

```
if (bit_idx == 8 || ((i+1) >= clen)) {
    ...
    for (j = bit_idx; j < 8; j++) {
        bits[j] = 0;
    } 
```

当你到达 for 循环时`bit_idx`可能是 8。由于`8 < 8`是 false 循环将继续直到`j`环绕（经过数百万次迭代）。因此，在某些时候，`bits[j]`很可能会访问一些您无法访问（或无效）的内存地址，或者它会破坏程序的数据/堆栈。发生这种情况时，您的程序将被终止（正如您所经历的那样）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T20:43:20.390

你在那个节目里搞什么鬼？

哦，好吧，没关系。数字更改为不合理值的业务听起来像是数据已损坏。现在，这些数据将如何被破坏？它被自动分配，所以它在堆栈上。这使得查看的位置在调用它的调用参数中。

但这是两个指针，在那里做一些奇怪的事情的空间不大。

什么会使 strlen 产生非常高的价值？非空终止的字符串。

结论——寻找其中一个字符串没有以空值终止的情况。我很想看，`phrase`因为它的长度是恒定的——很容易从末端掉下来。但这也很容易

哦，重新编译包含调试符号的程序，这样您就可以以符号形式查看堆栈跟踪。它几乎肯定会告诉你答案。

# css - div正方形对齐问题内的css div

> ID：10777058
> 
> 赞同：0
> 
> 时间：2012-05-27T20:32:14.950
> 
> 标签：css, html, alignment

我正在尝试在 html 页面中创建一个 6 * 6 的正方形输入框。为了定位它们，我使用 div 和 css：

```
<div class="boxes">
    <div class="box_0_0"><input... ></div>
    <div class="box_0_1"><input... ></div>
    <div class="box_0_2"><input... ></div>
    <div class="box_0_3"><input... ></div>
    ...
    <div class="box_1_0"><input... ></div>
    <div class="box_1_1"><input... ></div>
    ...
</div> 
```

在哪里

```
.boxes { position: relative; }

.box_0_0 { position: relative; float: left; top: 0px; left: 0px; width: 40px; height: 50px; }
.box_0_1 { position: relative; float: left; top: 0px; left: 50px; width: 40px; height: 50px; }
...

.box_1_0 { position: relative; float: left; top: 60px; left: 0px; width: 40px; height: 50px; }
.box_1_1 { position: relative; float: left; top: 60px; left: 50px; width: 40px; height: 50px; } 
```

但结果不是方形对齐：

![在此处输入图像描述](../Images/8296699714d6211521061b647c97f87b.png)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T20:35:04.653

取出`float: left`并使用`position: absolute`，而不是`position: relative`打开`box_0_0`和其余部分。那样有用吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T20:49:48.500

我相信这就是你想要的：http: [//jsfiddle.net/KdRre/1/](http://jsfiddle.net/KdRre/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T20:38:14.943

您能告诉我们您希望它们看起来如何吗？像棋盘一样，所有方格都对齐到每一边？

给相对 div 内的元素一个相对位置是没有意义的——如果需要，给内部 div 一个绝对位置。

尽管如果您试图让这些框彼此相邻 - 使用无序列表来包含每个框 - 如果您知道每行中放置的框数，则可能是每行的无序列表。

否则，删除相对位置的浮动也可以工作。

如果您遇到问题，请告诉我 - 我一定会看到您得到解决方案 - 干杯！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T20:39:59.637

我会使用这样的布局：

```
<div class="boxes">
    <div class="left_0 top_0 box"><input... ></div>
    <div class="left_1 top_0 box"><input... ></div>
    <div class="left_2 top_0 box"><input... ></div>
    <div class="left_3 top_0 box"><input... ></div>
    <div class="left_0 top_1 box"><input... ></div>
    <div class="left_1 top_1 box"><input... ></div>
    ...
</div> 
```

和 CSS ：

```
.boxes { position: relative; }
.box   { position:absolute;width:40px;height:50px; }
.left_0 { margin-left:0px;}
.left_1 { margin-left:50px; }
...
.top_0 { margin-top:0px; }
.top_1 { margin-top:60px; } 
```

# c++ - 如何为 Windows 安装 libjpeg？

> ID：10777066
> 
> 赞同：6
> 
> 时间：2012-05-27T20:33:35.810
> 
> 标签：c++, dll, linker, jpeg

我下载了一些使用 libjpeg 的代码，但源文件中没有包含 dll，我正在尝试使其正确编译/执行。

我正在使用 VS2010：在我的源文件中，我拥有`#include "jpeglib.h"`和在`Linker > Input > Additional Dependencies`我拥有`jpeg.lib`，这两个文件都无法在我的计算机上找到。

我设法去了这里： http: [//gnuwin32.sourceforge.net/packages/jpeg.htm](http://gnuwin32.sourceforge.net/packages/jpeg.htm)并下载了“开发者文件”档案，其中确实包含标题和 .lib 文件。程序编译得很好，但是当我执行 .exe 时，我遇到了一个`jpeg62.dll missing`我不明白的错误。

我该怎么解决这个问题？

首先，我在以前的网站上找不到任何 jpeg62.dll 文件。

其次，我想知道为什么我需要一个 dll，因为我认为使用 .lib 文件作为链接意味着我不需要 dll 来运行我的程序。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T21:09:10.927

您还应该从 GnuWin32 站点下载“二进制文件”和“依赖项”包。jpeg62.dll 位于“二进制”档案的 bin 目录中。

.lib 文件并不总是一个完整的静态库，它也可以是 dll 的导入库，然后在程序运行时必须存在该库。

# wordpress - 如何在 wordpress 主页中显示特色页面？

> ID：10777068
> 
> 赞同：0
> 
> 时间：2012-05-27T20:33:45.027
> 
> 标签：wordpress, wordpress-theming, featured

我正在尝试在我的主题主页上显示特定页面。这个想法是显示页面、特色图片和摘录。用类别做到这一点相对容易。但是对于页面，我应该如何进行？

第二页示例：

[http://bit.ly/KO7uLa](http://bit.ly/KO7uLa) http://bit.ly/KwKB2d

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:55:23.660

为此，请按照以下步骤操作：

1.  为您的主页创建一个[页面模板](http://codex.wordpress.org/Pages#Page_Templates)。在此模板中，您可以添加任何您需要在主页上显示的内容。
2.  现在从 WordPress 仪表板为主页创建一个页面，并分配您现在为该页面创建的模板。
3.  转到设置->阅读->单击首页显示为静态页面，然后选择我们现在为主页创建的页面。

**模板页面的代码**

将以下代码放入您的模板文件中，以显示特定页面的标题、摘录和特色图片。

```
<?php
$post_id = 1;
$queried_post = get_post($post_id);
$title = $queried_post->post_title;
echo get_the_post_thumbnail($post_id);
echo "<h2>" . $title . "</h2>";
echo "<p>" . $queried_post->post_excerpt . "</p>";
?> 
```

确保更改 post_id。

希望这会帮助你。

干杯！！！

# google-maps-api-3 - 如何让 Google 地图在状态栏中显示地图标记链接？

> ID：10777071
> 
> 赞同：1
> 
> 时间：2012-05-27T20:34:08.333
> 
> 标签：google-maps-api-3, hyperlink, google-maps-markers, statusbar, onmouseover

我正在使用`Google Maps API v3`，并且有几个链接到不同页面的地图标记。当`onmouseover`状态栏**不**显示 url 时，但是当单击标记时，它**会**在状态栏中显示 url 加载文本。

似乎我的代码在某种程度上与状态栏冲突，或者您是否必须指定一个属性才能显示状态栏？这是我的代码：

```
function initialize(mapInfo)
{       
    // object literal for map options
    var myOptions =
    {
        center: new google.maps.LatLng(30, 3), // coordinates for center of map
        zoom: 2, // smaller number --> zoom out
        mapTypeId: google.maps.MapTypeId.HYBRID // ROADMAP, SATELLITE, TERRAIN, or HYBRID
    };

    // note: if the id has a dash in its' name, map instantiation doesn't work!
    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    // MAP MARKERS instantiated here
    for(var i = 0; i < mapInfo.length; i++)
    {
        var link = mapInfo[i].link;
        var name = mapInfo[i].name;
        var lat = mapInfo[i].lat;
        var lng = mapInfo[i].lng;

        // object literal for each map marker
        var marker = new google.maps.Marker(
        {
            url: link,
            title: name,
            position: new google.maps.LatLng(lat, lng),
            map: map
        });

        // setting the link to each map marker here
        setLink(marker);

        // setting each map marker here
        marker.setMap(map);
    }
} // end of function initialize()

function setLink(mapMarker)
{
    // event listener for marker links added to each marker
        google.maps.event.addListener(mapMarker, "click", function()
       {
             window.location.href = mapMarker.url; // obtaining the url from the object literal
       });
} 
```

...我从 Ajax 获取对象文字 mapInfo（传递到函数初始化），用 JSON 解析——只是为了澄清 mapInfo 属性。

***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ****编辑：******* *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ******

这是一个解决方案，只需将链接放入`infowindow`：** 

 **```
 // object literal for each map marker
        var marker = new google.maps.Marker(
        {
            //url: link,
            title: name,
            content: "<a href = " + link + ">" + name + "</a>",
            position: new google.maps.LatLng(lat, lng),
            map: map
        });

        setWindow(map, marker);
function setWindow(map, mapMarker)
{
    // event listener for marker links added to each marker
        google.maps.event.addListener(mapMarker, "click", function()
        {
        var infowindow = new google.maps.InfoWindow(
        {
            content: mapMarker.content
        });
                    infowindow.open(map, mapMarker);
        });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T23:07:13.990

**TL;DR:**做不到。

* * *

您的问题基本上是**“当我将鼠标悬停在标记上时，如何将状态栏的文本设置为链接？”**

因此，您需要一个 mouseover 处理程序来设置文本，并需要一个 mouseout 处理程序来再次将其放回原处。

```
function setLink(mapMarker)
{
    google.maps.event.addListener(mapMarker, "click", function() {
        window.location.href = mapMarker.url;
       });
    google.maps.event.addListener(mapMarker, "mouseover", function() {
        window.status = mapMarker.url;
        return true; // apparently this is necessary for window.status
       });
    google.maps.event.addListener(mapMarker, "mouseout", function() {
        window.status = '';
        return true;
       });
} 
```

但是请参阅[设置状态栏文本的可靠跨浏览器方式](https://stackoverflow.com/questions/876390/reliable-cross-browser-way-of-setting-status-bar-text)- 你不能这样做，因为浏览器禁用它。加载 url 后，浏览器本身会将其显示在状态栏中，作为正常功能的一部分。

一种可行的方法*是*使相关标记图像成为链接，因为浏览器的正常功能将接管并在状态栏中显示 url。不幸的是，API 也没有公开标记的各个部分以使这成为可能。**

# .net - 如何使用模型优先实体数据模型在 DataGridView 中显示外键表中的数据？

> ID：10777073
> 
> 赞同：0
> 
> 时间：2012-05-27T20:34:19.100
> 
> 标签：.net, entity-framework, datagridview, foreign-key-relationship

我生成了一个[从 (mysql) 数据库派生](http://dev.mysql.com/doc/refman/5.1/en/connector-net-tutorials-entity-framework-winform-data-source.html)的 Visual Studio 2010 实体数据模型。

```
Users
- UserID
- Username
- UserGroupID

Groups
- GroupID
- GroupName 
```

edmx 图正确显示了两个表之间的关系（一对多）。如果我将用户数据源拖放到表单上，则会出现一个 datagridview，并且在我运行应用程序时会正确填充用户名等。但是，它显示的列是（正确的）UserGroupID，而不是 GroupName。我尝试按照[这些说明](http://blogs.msdn.com/b/bethmassi/archive/2008/10/15/editing-data-from-two-tables-in-a-single-datagridview.aspx)显示 GroupName，但随后我收到一条错误消息

> 错误 3024：从 ### 行开始映射片段时出现问题：必须为所有关键属性指定映射...

似乎这适用于一对一关系，但[不适用于一对多](https://stackoverflow.com/a/3881410/68936)。

使用模型优先实体数据模型时，如果不手动添加类，是否无法在 datagridview 中显示带有组名的用户表？如果确实不可能，那么在 datagridview 中显示（和编辑）它的最简单方法是什么（即，可能不使用实体数据模型？）我认为这将是一个相当常见的场景，这使得 make 认为应该是一种基于视觉工具的方法来做到这一点。

作为一种可以容忍的方法，我尝试创建一个显示我喜欢的视图。我能够将该视图添加到模型中，并将实体添加为数据源。但是，当将该数据源拖到表单上时，datagridview 中没有显示任何内容。情节变厚了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T13:50:25.917

噗！我放弃了实体模型，只使用了旧的 MySqlAdapter、BindingSource、DataTable。

# iphone - SVProgressHUD - 禁用用户交互

> ID：10777085
> 
> 赞同：0
> 
> 时间：2012-05-27T20:36:04.463
> 
> 标签：iphone, objective-c, ios

我在我的应用程序中使用 SVProgressHUD。

调用后`[SVProgressHUD dismissWithSuccess:@"blabla"];`，我无法再与我的应用程序交互。我需要重新启动它才能解决用户交互问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:15:10.200

您必须在 HUD 上使用 ARC，添加`-fobjc-arc`

# c - 后台进程返回后再次提示用户输入

> ID：10777087
> 
> 赞同：2
> 
> 时间：2012-05-27T20:36:24.227
> 
> 标签：c, unix, process, background-process

我正在尝试构建一个作业控制外壳，目前正在处理后台进程。在这个程序中，我 fork 一个子进程来处理每个后台进程，并且在 fork 之后立即得到提示。但问题是，当后台进程返回时，又会打印出提示信息。有人可以帮我解决这个问题吗？谢谢 ＃＃

```
char prompt[] = "myShell";
set_sighandler_SIGCHLD();  //wait for background process return
while(1){
       char cmd[BUFFERSIZE] = "";
       write(1, prompt, sizeof(prompt));
       if(read(0, cmd, 1024) <= 1)){
              //parse command
              //and execute
       }
}
//Here is the background process.
int put_to_background(int (*func)(char** arg), char ** cmd){
     pid_t pid;
     if((pid = fork()) < 0){
         perror("fork");
         return -1;
     }
     else if(pid == 0){
         func(cmd);     //call the function the execute the command
         _exit(0);
     }
     else{
         if(setpgid(pid, 0)){
             perror("setpgid");
             return -1;
         }
         printf("running: %d\n", pid);

     } 
```

在我调用函数后，它立即打印出提示“myShell”（这是我所期望的），但在后台进程返回后又打印了一次。

我仍在研究信号处理...

```
 JobList list;
 void sighandler(int signum, siginfo_t *sip, void *ucp){
     if(signum == SIGCHLD){
        pid_t pid;
        while((pid = waitpid(-1, NULL, WNOHANG)) > 0){
           Job * job = (Job*)malloc(sizeof(Job));
           job->pid = pid;
           insert(&list, job);  
       }
     }
     else if(signum == SIGTTOU){
       printf("SIGTTOU: pid = %d\n", (int) sip->si_pid);
     }
     else if(signum == SIGTTIN){
      printf("SIGTTIN: pid = %d\n", (int) sip->si_pid);
     }
 }  

int set_sighandler_SIGCHLD(){

struct sigaction sa;
sigemptyset(&sa.sa_mask);

sigaddset(&sa.sa_mask, SIGCHLD); 
sigaddset(&sa.sa_mask, SIGTTIN);
sigaddset(&sa.sa_mask, SIGTTOU);
sa.sa_sigaction = sighandler;
sa.sa_flags = SA_SIGINFO;
//sigprocmask(SIG_BLOCK, &sa.sa_mask, NULL);

if(sigaction(SIGCHLD, &sa, NULL)){
    perror("sigaction");
    return -1;
}
if(sigaction(SIGTTOU, &sa, NULL)){
    perror("sigaction");
    return -1;
}
if(sigaction(SIGTTIN, &sa, NULL)){
    perror("sigaction");
    return -1;
}
return 0; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:00:18.653

The `read` loop is being interrupted by the signal, so you print the prompt. (That is, when the signal arrives, `read` immediately returns.) You can either check if read returns -1 and has returned due to `EINTR`, or try setting `SA_RESTART` to the signal handler. Note that `SA_RESTART` does not always work (implementation dependent, many bugs in various implementations) and is, IMO, best avoided.

# r - 在包 AER 中的 tobit() 之后运行 predict()

> ID：10777088
> 
> 赞同：3
> 
> 时间：2012-05-27T20:36:33.637
> 
> 标签：r, predict

我正在对一个数据集进行tobit分析，其中因变量（我们称之为y）被审查为0。所以这就是我所做的：

```
library(AER) 
fit <- tobit(data=mydata,formula=y ~ a + b + c) 
```

这可以。现在我想运行“预测”函数来获得拟合值。理想情况下，我对未观察到的潜在变量“y*”和观察到的删失变量“y”的预测值感兴趣 [参见参考资料 1]。

我检查了 predict.survreg [参考 2] 的文档，但我认为我不明白哪个选项给了我预测的删失变量（或潜在变量）。

我在网上找到的大多数示例都建议以下内容：

```
predict(fit,type="response"). 
```

同样，尚不清楚这些是哪种预测。

我的猜测是 predict 函数中的“type”选项是这里的关键，type="response" 用于审查变量预测，type="linear" 用于潜在变量预测。

在这里有一些经验的人可以为我解释一下吗？

非常感谢！

参考：

1.  [http://en.wikipedia.org/wiki/Tobit_model](http://en.wikipedia.org/wiki/Tobit_model)

2.  [http://astrostatistics.psu.edu/datasets/2006tutorial/html/survival/html/predict.survreg.html](http://astrostatistics.psu.edu/datasets/2006tutorial/html/survival/html/predict.survreg.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T18:53:38.480

通常，预测-“响应”结果已从回归中使用的任何建模转换反向转换为原始数据规模，而“线性”预测是链接转换规模上的线性预测变量。对于具有身份链接的tobit，它们应该是相同的。

你可以很容易地检查我的元预测。我刚刚用页面上的例子检查了它`?tobit`：

```
plot(predict(fm.tobit2, type="response"), predict(fm.tobit2,type="linear")) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-04T14:14:53.460

我在 stats.stackexchange 上发布了一个类似的问题，我得到了一个可能对您有用的答案：

[https://stats.stackexchange.com/questions/149091/censored-regression-in-r](https://stats.stackexchange.com/questions/149091/censored-regression-in-r)

该软件包的一位作者展示了如何计算 $Y$ 的平均值（即预测），其中 $Y = max(Y^*,0)$。使用这个包`AER`必须“手工”完成。

# dialog - 如何正确地将 DCL 链接到 AutoLisp？

> ID：10777093
> 
> 赞同：0
> 
> 时间：2012-05-27T20:37:02.660
> 
> 标签：dialog, lisp, autocad, autolisp

我正在尝试构建一个非常基本的 AutoLisp 界面。我是这方面的初学者，所以在未能从头开始编写代码后，我转向正确学习 DCL。我遵循了本教程：

[http://www.afralisp.net/dialog-control-language/tutorials/dialog-boxes-and-autolisp-part-1.php](http://www.afralisp.net/dialog-control-language/tutorials/dialog-boxes-and-autolisp-part-1.php)

我得到了同样的错误。AutoCAD 基本上退出执行该函数，就好像 dcl 文件甚至不存在一样。

我尝试将地址完全输入其中，但我认为它应该能够像将 HTML 链接到同一文件夹中的图像一样工作。

下面你有我的代码：

数据中心：

```
samp1 : dialog {
    label = "Structural Holes";

    ok_cancel;
} 
```

语言：

```
(defun C:samp1()
  (setq dcl_id (load_dialog "samp1.dcl"))
  (if (not (new_dialog "samp1" dcl_id))
    (exit)
    )

  (action_tile
       "cancel"
       "(done_dialog)(setq userclick nil)"
       )
  (action_tile
    "accept"
    "(done_dialog)(setq userclick T))"
    )

  (start_dialog)

  (unload_dialog dcl_id)

  (princ)

 )

(princ) 
```

感谢任何愿意花时间帮助我解决这个问题的人。我开始非常绝望，这是我的第一个也是唯一一个 autolisp 项目，所以我没有任何经验......

LE：请注意，dcl 文件和 lisp 文件都在同一个文件夹中，没有其他子文件夹或其他任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T21:22:44.853

1.  找不到*** *.DCL 文件
2.  错误：退出/退出中止
3.  错误：加载失败

    这通常意味着找不到 autolisp 文件或 DCL 文件。要解决此问题，请确保将 autolisp 和 DCL 文件放在 AutoCAD 搜索路径中。更具体地说，将它们放在属于“支持文件和搜索路径”的目录中。要查找 AutoCAD 支持文件和搜索路径列表，请执行以下操作：

4.  在 AutoCAD 中，单击工具下拉菜单。

5.  转到选项菜单项。
6.  单击文件选项卡。
7.  单击支持文件和搜索路径前面的加号 +。

    这是您的搜索路径位置。列出的目录按顺序从上到下搜索您尝试加载的任何 autolisp 程序。它还用于查找块和 DCL 文件。

    添加存储 autolisp 和 DCL 文件的目录，或者将 autolisp 和 DCL 文件移动到此处列出的目录之一。这应该结束上面列出的错误。

我在这里偶然发现了这条信息：

[http://www.jefferypsanders.com/autolisp_nodcl.html](http://www.jefferypsanders.com/autolisp_nodcl.html)

非常感谢 JefferyPSanders ......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T13:03:12.933

对于它的价值，您还可以在“已知目录”中动态创建一个对话框（例如 AutoCAD 所在的目录）。下面将证明这一点。

```
(defun _make-getstring-dialog-on-the-fly ( / fn f dcl dcl_id userclick str) 
  (setq fn (strcat
             (vl-filename-directory
               (findfile "acad.exe")) "\\$vld$.dcl")
        f (open fn "w")
        dcl
        '(
          "stringdlg : dialog {"
          "label = \"Charater Array\";"
          ": edit_box {"
          "label = \">>:\";"
          "edit_width = 20;"
          "key = \"stringdlg\";"
          "is_default = true;"
          "}"
          ": row {"
          "alignment   = centered;"
          "fixed_width = true;"
          " : button {"
          " label      = \"OK\";"
          " key        = \"dcl_accept\";"
          " width      = 10;"
          " allow_accept = true;"
          " }"
          "}"
          "}"
          )
        )
  (mapcar 
    (function
      (lambda ( x )
        (write-line x f)
        (write-line "\n" f)))
    dcl)
  (close f)
  (setq dcl_id (load_dialog fn))
  (new_dialog "stringdlg" dcl_id)
  (action_tile "stringdlg" "(setq str $value)(done_dialog)")
  (setq userclick (start_dialog))
  (unload_dialog dcl_id)
  str
  ) 
```

# opengl - Java3d - 使用 GeometryInfo 的坏法线

> ID：10777095
> 
> 赞同：0
> 
> 时间：2012-05-27T20:37:18.347
> 
> 标签：opengl, java-3d, lighting, normals

我在 windows 中的 eclipse Indigo 下使用 Java3d。在最终修改 StlLoader 示例和 ObjLoad 类以加载我的 STL 文件后，我得到如下所示的结果（我认为从其他问题来看这些绝对是错误的矢量法线）。有人知道我为什么会遇到这个问题吗？我正在使用 SolidWorks 将 STL 保存为 ASCII 文件，并使用修改代码来加载 java3d.org 上给出的 STL 文件。虽然我只更改了一些外观属性并修复了损坏的导入等。我已经确认放入下面的“normList”的刻面法线与文件中的法线完全匹配。

结果示例：

![在此处输入图像描述](../Images/610f8078ac1dd0003df73504e80429da.png)

[来自http://www.java3d.org](http://www.java3d.org)的 StlFile.java 片段：

```
private SceneBase makeScene()
{
// Create Scene to pass back
SceneBase scene = new SceneBase();
BranchGroup group = new BranchGroup();
scene.setSceneGroup(group);

// Store the scene info on a GeometryInfo
GeometryInfo gi = new GeometryInfo(GeometryInfo.TRIANGLE_STRIP_ARRAY);

// Convert ArrayLists to arrays: only needed if file was not binary
if(this.Ascii)
{
  coordArray = objectToPoint3Array(coordList);
  normArray = objectToVectorArray(normList);
}

gi.setCoordinates(coordArray);
gi.setNormals(normArray);
gi.setStripCounts(stripCounts);

// Setting the Material Appearance
Appearance app = new Appearance();

// Coloring Attributes
ColoringAttributes catt = new ColoringAttributes();
catt.setShadeModel( ColoringAttributes.NICEST );
app.setColoringAttributes(catt);

Material mat = new Material(new Color3f(0.6f, 0.6f, 0.6f),      // ambient
                            new Color3f(0, 0, 0),               // emissive
                            new Color3f(0.6f, 0.6f, 0.6f),      // diffuse
                            new Color3f(0.6f, 0.6f, 0.6f),      // specular
                            10);                                // shininess
app.setMaterial(mat);

// Put geometry into Shape3d
Shape3D shape = new Shape3D(gi.getGeometryArray(), app);

group.addChild(shape);
scene.addNamedObject(objectName, shape);

return scene;
} // end of makeScene 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T19:28:45.233

如果表面上的某些区域真的是黑色（0x000000），我猜一些法线实际上是指向模型内部而不是外部。

您可以检查所有三角形的顶点 v1,v2,v3 是否以右手顺序定义（只需测试是否 det(v1,v2,v3) > 0 ）并相应地重新排序点。或者，检测“相反的”法线并将它们乘以 -1

# c# - 处理多列数据的微型数据库 C# 库/代码？

> ID：10777102
> 
> 赞同：0
> 
> 时间：2012-05-27T20:38:16.440
> 
> 标签：c#, sql, database, linq

我正在寻找一个多列数据库，但即使是超过一兆字节的 SQLite 似乎也有点矫枉过正（除非你使用类似的东西，否则它不适用于 C# [）](http://sqlite.phxsoftware.com/)。我只想要最多 100-500k 的代码。这里最好的选择是什么？

C# 中的通用字典在一定程度上很有用，但默认情况下，它不允许您从给定值中检索键。同样，我可能有两列以上的数据，即使我使用[BiDictionary](https://stackoverflow.com/questions/255341/getting-key-of-value-of-a-generic-dictionary)并将值作为类/结构（对于多个值），我也需要找到 n 列值的键，然后找到键的新 o 列值。所以这有点不方便（加上那个链接是一个不完整的实现，甚至没有'set'命令）。

这是我可能创建的表的一个简单示例（但是我可能有十几列或一千行）：

```
name       type colour  length
orange     a    orange  5
apple      a    green   4
banana     c    yellow  7
strawberry b    red     3
blackberry b    black   2
gooseberry b    green   2 
```

我想从任何其他值中检索/设置表中的任何值，最好使用 LINQ 或类似 SQL 的查询以及快速检索/写入和大型数据集（如果可能）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T21:02:40.807

该类[`DataSet`](http://msdn.microsoft.com/en-us/library/system.data.dataset.aspx)可能非常适合您正在做的事情 - 您可以直接从 XML（`ReadXml`方法）将数据加载到其中，这将转换为内存表。

使用`DataTable`（或多个及其关系）表示您的数据，您可以使用 LINQ 查询它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T02:03:39.920

根据 Oded 的回答和这个[老问题](https://stackoverflow.com/questions/10855/linq-query-on-a-datatable)，我开始编写一些示例代码，它很有效：

```
//////////////////////////////////////////////
//// Setting up the table is as simple as this: 
DataTable table = new DataTable("fruit");

table.Columns.Add("name", typeof(string) );
table.Columns.Add("type", typeof(char));
table.Columns.Add("colour", typeof(string));
table.Columns.Add("length", typeof(int));

//////////////  name, type, colour, length
table.Rows.Add("orange", 'a',"orange", 5);
table.Rows.Add("apple", 'a',"green", 4);
table.Rows.Add("banana", 'c',"yellow", 7);
table.Rows.Add("strawberry", 'b',"red", 3);
table.Rows.Add("blueberry", 'b',"black", 1);
table.Rows.Add("gooseberry", 'b',"green", 2);
//////////////////////////////////////////////

////// Accessing the data via Linq!
var results = table.AsEnumerable()
    .Where(row => row.Field<char>("type") == 'b')
    .OrderBy(row => row.Field<int>("length"))
    .Select(row => row.Field<string>("name") +": "+row.Field<string>("colour"));                
foreach(string s in results) Console.WriteLine(s);
/////////////////////////////// 
```

输出是：

```
blueberry: black
gooseberry: green
strawberry: red 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T19:21:06.103

SQL Server 精简版可免费使用 .NET：[http ://en.wikipedia.org/wiki/SQL_Server_Compact](http://en.wikipedia.org/wiki/SQL_Server_Compact)

它使用平面 .sdf 文件存储数据，您可以针对它编写 SQL 查询。

# javascript - 在鼠标悬停时加载内容

> ID：10777103
> 
> 赞同：1
> 
> 时间：2012-05-27T20:38:27.617
> 
> 标签：javascript, jquery, onmouseover

我想在 div 内的图标鼠标悬停时加载 div 的内容。此外，鼠标悬停应该只触发一次，并且最好在加载内容后图标应该消失。

将在 de div 中加载的内容将是带有社交媒体按钮的外部文件。如果您想知道；我不希望它们与页面的其余部分一起加载，因为它们会减慢速度。此外，一些访问者可能不喜欢 FB 和 G+ 等网站跟踪他们的互联网活动。

所以，我收集了一些代码并复制粘贴了一些，这就是我想出的：

```
<div id="social_media">

<img src="icon.png" onmouseover="javascript:$('#social_media').load('external_file.php'); this.onmouseover=null;" alt="Show Social Media Buttons!" />

</div> 
```

问题是，它工作得非常好:) 但是因为它是我从 3 个不同的来源获得并粘贴在一起的代码，所以我的问题是它是否有用？例如，我从来没有试图找到一种方法来删除鼠标悬停时的图标，它只是这样做了:)

我几乎没有编写 Javscript/jQuery 的经验，所以请告诉我你的想法，以便我从中学习！

来自阿姆斯特丹的感谢和问候！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T20:43:58.413

避免内联代码尝试

```
<div id="social_media">

<img src="icon.png"  alt="Show Social Media Buttons!" />

</div> 
```

将`mouseenter`事件处理程序附加到`img`

```
$(function(){// short cut of $(document).ready(); read more on google
    $("#social_media>img").bind({
        mouseenter:function(e){
         $('#social_media').load('external_file.php');
        }
    });
}); 
```

PS选择器没有优化，也没有这个代码的结果只是为了给你一个想法

[**演示**](http://jsfiddle.net/UMBPt/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T20:44:27.487

需要注意的几点：

*   你真的应该避免 HTML 中的内联 JavaScript 代码，这根本不干净。将其移动到可能的外部 JavaScript 文件中，或者至少在单独的`<script>`标记中。这将是更容易维护的方式。

*   使用这种方法只触发一次事件似乎很奇怪。您应该使用 jQuery`one`方法，该方法正是为此而生的。

*   图标只是消失了，因为该`load`方法替换了图标所在的 div 的内容。

例如，IMO，代码应该是：

```
 $('#social_media').one('mouseover', function(){
   $(this).load('external_file.php');
 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T20:49:33.490

您真正问题的答案是“代码有点中等”。图标消失的原因是当你打电话时`load`你替换了它。在内部，您的文档是称为 DOM 的文档树，用于“文档对象模型”——滥用术语，因为该树实际上是模型的表达，而不是模型本身。

那棵树中有一个节点是你的`div`，它包含一个带有图标的节点`img`。当您执行 时`load()`，该节点将替换为您加载的内容。

正如@john 所说，将这样的代码内联是不可取的，因为当您想知道它稍后在做什么时，可能很难找到。

# jquery - jquery lavalamp菜单上的中心图像

> ID：10777106
> 
> 赞同：0
> 
> 时间：2012-05-27T20:38:49.460
> 
> 标签：jquery, css, image, center, lavalamp

我有一个问题居中的图像。地址是

[http://burger-laden.de/preview/](http://burger-laden.de/preview/)

如您所见，有一个箭头移动的菜单。我的问题是现在我需要箭头始终位于文本的中心。这里的代码：

CSS：

```
 .navigation .bottom {
    font-weight: bold;
    font-size:16px;
}

.lavaLampBottomStyle {
    position: relative;
    overflow: hidden;
    height: 46px;
}

.lavaLampBottomStyle li {
    float: left;
    list-style: none;
}

.lavaLampBottomStyle li.back {
    background: url(../images/menu_top_arrow.png) no-repeat;
    background-position: left 0px;
    margin-top: 33px;
    margin-left: 20px;
    height: 46px;
    width: auto;
    z-index: 8;
    position: absolute;
}

.lavaLampBottomStyle li a {
    text-decoration: none;
    color: white;
    outline: none;
    text-align: center;
    letter-spacing: 0;
    z-index: 10;
    display: block;
    position: relative;
    overflow: hidden;
    float: left;
    margin: auto 0px;
} 
```

这是html

```
 <ul class="lavaLampBottomStyle" id="1">
                        <li><a href="#">Startseite</a></li>
                        <li class="current"><a href="#">Speisekarte</a></li>
                        <li><a href="#">Anfahrt</a></li>
                        <li><a href="#">Kontakt</a></li>
                    </ul> 
```

这里是lavalamp js

```
(function($){$.fn.lavaLamp=function(o){o=$.extend({fx:"linear",speed:500,click:function(){}},o||{});return this.each(function(){var b=$(this),noop=function(){},$back=$('<li class="back"><div class="left"></div></li>').appendTo(b),$li=$("li",this),curr=$("li.current",this)[0]||$($li[0]).addClass("current")[0];$li.not(".back").hover(function(){move(this)},noop);$(this).hover(noop,function(){move(curr)});$li.click(function(e){setCurr(this);return o.click.apply(this,[e,this])});setCurr(curr);function setCurr(a){$back.css({"left":a.offsetLeft+"px","width":a.offsetWidth+"px"});curr=a};function move(a){$back.each(function(){$(this).dequeue()}).animate({width:a.offsetWidth,left:a.offsetLeft},o.speed,o.fx)}})}})(jQuery); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T03:25:38.277

我知道这已经很晚了，但是您的网站实际上帮助我找到了这个，我现在正在将它用于我正在开发的新投资组合网站。要实现“居中”外观，请更改以下内容。

.lavaLampBottomStyle li.back {
--- 背景：url(../images/menu_top_arrow.png) 不重复；
--- 背景位置：~~左~~ **中**0px；
--- 边距顶部：33px；
---~~左边距：20px；~~
--- 高度：46px；
--- 宽度：自动；
--- z-index: 8;
--- 位置：绝对；
}

因为宽度设置为自动，li 元素适合它悬停的 li 的相同宽度，因此一个简单的居中背景位置可以完成这项工作。

# sql - 即使在其他表中不知道哪个连接来获取条目

> ID：10777107
> 
> 赞同：0
> 
> 时间：2012-05-27T20:39:30.710
> 
> 标签：sql, join

我有 2 张桌子。用户和表 2。在 table2 中，它可以有一个类似的条目

```
id = 1
right_user_id = 1
left_user_id = 2 
```

在用户表中，可能没有 id 为 2 的用户。这意味着，以下 SQL 语句不会返回 id 为 1 的 table2-entry。

```
//php
$sql = 'SELECT t2.*, u.username AS u_name
        FROM users u, table2 t2
        WHERE t2.right_user_id = '.$user_id.'
              AND t2.left_user_id = u.user_id
        ORDER BY t2.time DESC'; 
```

但是我想获取 t2.* 条目的 id = 1 信息，并且 u_name 应该声明“（未知）”。

我需要什么样的 JOIN，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T20:41:57.380

```
SELECT t2.*, case 
               when u.username is null 
               then 'Unknown' 
               else u.username 
             end AS u_name      
FROM table2 t2
left outer join users u on t2.left_user_id = u.user_id 
where t2.right_user_id = '.$user_id.'     
ORDER BY t2.time DESC; 
```

# ios - NSXMLParser 问题：不要得到我所有的项目，也没有数据

> ID：10777116
> 
> 赞同：0
> 
> 时间：2012-05-27T20:41:55.667
> 
> 标签：ios, xml, nsmutablearray, nsxmlparser, nsxml

尽管我看过所有教程，但我很难理解如何使用 NSXMLParser ......

我有以下 XML 文件，例如：

```
<rss>
<channel>
<title>The Title</title>
<link>A URL</link>
<language>English</language>
<item>
    <name>John</name>
    <title>John4034</title>
    <city>LA</city>
    <country>USA</country>
</item>
....
<item>
    <name>Marc</name>
    <title>Marc2942</title>
    <city>London</city>
    <country>England</country>
</item>
</channel>
</rss> 
```

我的目标是将所有项目存储在 NSMutableArray 的项目中。我的类 Item 有 4 个 NSString（名称、标题、城市、国家）。

这是我的 XMLParser.m 文件：

```
- (id) loadXMLbyURL : (NSString *) urlString
{
    items = [[NSMutableArray alloc] init];
    NSURL *url = [NSURL URLWithString:urlString];
    NSData *data = [NSData dataWithContentsOfURL:url];
    parser = [[NSXMLParser alloc] initWithData:data];
    parser.delegate = self;
    [parser parse];
    return self;
}

- (void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    currentNodeContent = (NSMutableString *) [string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
}

- (void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if([elementName isEqualToString:@"item"]) currentItem = [Item alloc];
}

- (void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if([elementName isEqualToString:@"name"]) [currentItem setName:currentNodeContent];
    if([elementName isEqualToString:@"title"]) [currentItem setTitle:currentNodeContent];
    if([elementName isEqualToString:@"city"]) [currentItem setCity:currentNodeContent];
    if([elementName isEqualToString:@"country"]) [currentItem setCountry:currentNodeContent];
    }
    if([elementName isEqualToString:@"item"])
    {
        [self.items addObject:currentItem];
        currentItem = nil;
        currentNodeContent = nil;
    }
} 
```

但是有了这一切，我有两个问题：

*   我的项目数组只包含 108 个索引，而我的 XML 文件有 299 个。
*   我的项目属性中没有数据......当我尝试在日志中打印它时，一切都是（空的）。

请帮忙 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:56:06.710

如果有人有同样的问题，我终于找到了解决方案。

*   未检查所有 XML 文件的问题是由于 XML 文件中的 PCDATA 错误。
*   The problem of getting nothing in the NSStrings has been solved in this thread : [NSXMLParser issue : don't get all data?](https://stackoverflow.com/questions/10777568/nsxmlparser-issue-dont-get-all-data)

# c# - C# MessageBox 对话框结果

> ID：10777123
> 
> 赞同：58
> 
> 时间：2012-05-27T20:43:18.720
> 
> 标签：c#, dialog, messagebox

我想做一个 MessageBox 确认。这是消息框：

```
MessageBox.Show("Do you want to save changes?", "Confirmation", messageBoxButtons.YesNoCancel); 
```

我想做这样的事情（在伪代码中）：

```
if (MessageBox.Result == DialogResult.Yes)
    ;
else if (MessageBox.Result == DialogResult.No)
    ;
else
    ; 
```

我怎么能在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-05-27T20:44:56.583

```
DialogResult result = MessageBox.Show("Do you want to save changes?", "Confirmation", MessageBoxButtons.YesNoCancel);
if(result == DialogResult.Yes)
{ 
    //...
}
else if (result == DialogResult.No)
{ 
    //...
}
else
{
    //...
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-27T20:52:10.713

您也可以在一行中执行此操作：

```
if (MessageBox.Show("Text", "Title", MessageBoxButtons.YesNo) == DialogResult.Yes) 
```

如果你想在顶部显示一个消息框：

```
if (MessageBox.Show(new Form() { TopMost = true }, "Text", "Text", MessageBoxButtons.YesNo) == DialogResult.Yes) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-01-07T04:04:33.583

如果您使用的是[WPF](http://en.wikipedia.org/wiki/Windows_Presentation_Foundation)并且之前的答案没有帮助，您可以使用以下方法检索结果：

```
var result = MessageBox.Show("Message", "caption", MessageBoxButton.YesNo, MessageBoxImage.Question);

if (result == MessageBoxResult.Yes)
{
    // Do something
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-17T10:03:00.150

这个答案对我不起作用，所以我继续访问[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.messagebox(v=vs.110).aspx "转到示例")。在那里我发现现在代码应该是这样的：

```
//var is of MessageBoxResult type
var result = MessageBox.Show(message, caption,
                             MessageBoxButtons.YesNo,
                             MessageBoxIcon.Question);

// If the no button was pressed ... 
if (result == DialogResult.No)
{
    ...
} 
```

希望能帮助到你

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-07-23T20:30:25.627

我建议不要使用 if 语句，而是使用 switch，我尽量避免使用 if 语句。

```
var result = MessageBox.Show(@"Do you want to save the changes?", "Confirmation", MessageBoxButtons.YesNoCancel);
switch (result)
{
    case DialogResult.Yes:
        SaveChanges();
        break;
    case DialogResult.No:
        Rollback();
        break;
    default:
        break;
} 
```

# android - Android开发中有两个或多个库项目和主项目

> ID：10777127
> 
> 赞同：5
> 
> 时间：2012-05-27T20:43:39.740
> 
> 标签：android, android-library

我将 johannilsson-android-actionbar 作为库添加到我的项目中。它运作良好，一切都对我有好处。但最近，我将 uitableView 添加为库并收到此错误：

> /--mypath--/actionbar/res/values/attrs.xml:19: 错误: 属性“title”已经被定义

而且 R 是未知的，所以我不能引用我的 XML。我有 ADT 17 和 Eclipse 3.7。我试图删除uitableview，项目工作正常，没有错误，R 是好的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T20:48:33.910

库的作者需要采取措施避免资源 ID 的冲突。您的图书馆的作者显然没有。

一种可能性是从 johannilsson-android-actionbar 切换到[ActionBarSherlock](http://actionbarsherlock.com)，看看你是否有更好的运气。

# c# - .NET MVC 防止控制器变得非常不可读的最佳实践

> ID：10777128
> 
> 赞同：6
> 
> 时间：2012-05-27T20:43:47.347
> 
> 标签：c#, asp.net-mvc, controller, service-layer

几个月来，我一直在开发我的第一个大型（对我而言）MVC 项目，但事情变得非常难以驾驭。

我一直在重构方面有所懈怠，并且正在寻找“最佳实践”的现代示例，以保持您的控制器精简并将所有这些数据移动到您的模型中。

我阅读[了这篇](http://codebetter.com/iancooper/2008/12/03/the-fat-controller/)详细讨论事情的文章，但没有提供示例项目。

此处发布的大多数“最佳实践”主题倾向于链接到 MVC 音乐商店或 Nerd Dinner 项目，但同时评论倾向于说它们更像是“初学者指南”，而不是“最佳实践”的示例。

**有谁知道任何展示正确开发结构的最新开源 MVC 项目？**

注意：我想学习解决的一个典型问题：我的控制器很长，并且充满了驱动网站的代码 - 我需要将此代码移到仅由控制器引用的方法中。我在哪里扔所有这些方法？

这是我在控制器中的代码示例，正如对其中一个回复的评论所建议的那样。我如何将这些信息中的一些转移到我的 ViewModel 中？（我在下面包含了 ViewModel）：

控制器：

```
public ActionResult AttendanceView(int id)
{
    //
    // Generates list of Attendances specifically for current Course
    var attendanceItems = db.Attendance.Where(s => s.CourseID == id);
    List<Attendance> attendanceItemsList = attendanceItems.ToList();
    // End of generating list of Attendances

    //
    // Generates list of Students in alphabetical order sorted by LastName
    var student = attendanceItemsList.Select(a => a.Student).Distinct().OrderBy(s => s.LastName);
    List<Student> StudentList = student.ToList();
    // End of generating list of Students

    //
    // Generates list of AttendingDays specifically for current Course
    Course course = db.Courses.FirstOrDefault(p => p.CourseID == id);
    List<int> attDayList = new List<int>();
    for (int i = 0; i < course.AttendingDays; i++)
    {
        attDayList.Add(i + 1);
    };
    // End of generating list of AttendingDays

    AttendanceReportViewModel model = new AttendanceReportViewModel
    {
        AttendanceDays = attDayList,
        Students = StudentList,
        Attendances = attendanceItemsList,
        courseId = id
    };
    return View(model);
} 
```

视图模型：

```
namespace MyApp.ViewModels
{
    public class AttendanceReportViewModel
    {
        public List<int> AttendanceDays { get; set; }

        public List<Student> Students { get; set; }

        public List<Attendance> Attendances { get; set; }

        public int courseId { get; set; }

        public string IsPresent(Student student, int attendanceDay)
        {
            return Attendances.Single(a => a.StudentID == student.StudentID && a.AttendanceDay == attendanceDay).Present ? MyAppResource.Present_Text : MyAppResource.Absent_Text;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T20:48:12.507

您基本上要寻找的是分层架构。例如，服务层模式要求您在服务层而不是控制器中定义大量逻辑。

有这方面的例子，其中之一是来自微软模式和实践团队的 Silk：http: [//silk.codeplex.com/](http://silk.codeplex.com/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T20:50:55.143

当您说您的控制器“冗长且充满代码”时，这是否意味着您的所有代码都在控制器中？如果是这种情况，您需要将大部分逻辑分解为支持 ViewModel 类。

我通常将大部分（如果不是全部）代码放在 ViewModel 类中，每个 View/Controller 一个。所有逻辑都从 ViewModel 中浮现出来，因此每个 Controller 操作都运行一行，可能是两行代码（在合理范围内）。

**更新：**
我会从您的 Action 中取出所有逻辑并将其移动到一个 ViewModel 方法中，该方法采用一个 int 作为 ID。现在您的控制器操作方法是一行：

```
return View(MyViewModel.AttendanceView(id)); 
```

这是一个简单的例子，还有更高级的想法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-27T23:25:07.837

**有谁知道任何展示正确开发结构的最新开源 MVC 项目？**

很不幸的是，不行。到目前为止我看到的所有项目都不太适合初学者开始学习。不是因为它们包含糟糕的代码，而是因为它们的复杂性。

**我想学习解决的一个典型问题：我的控制器很长，并且充满了驱动网站的代码 - 我需要将此代码移到仅由控制器引用的方法中。我在哪里扔所有这些方法？**

如果您的控制器包含许多行，那么您做错了。您需要了解关注点分离以及如何编写干净的代码（以及它的含义）。例如，永远不要编写代码来从控制器中的数据库中检索某些内容。这样的动作属于数据库访问层，逻辑上进一步分为多个类。了解诸如“不要重复自己”等原则。

关于如何编写好的代码有很多讨论，我不确定是否可以在这里完成。有整本书都在讨论这个问题，但我希望我至少能给你一些有用的指导。

# jquery - 禁用div中的复制？

> ID：10777133
> 
> 赞同：6
> 
> 时间：2012-05-27T20:44:16.993
> 
> 标签：jquery, html, css

我想知道是否有办法禁用从 div 复制文本？

我去过网站，如果我试图突出或复制一些文本，我就做不到。我想知道是否有人知道我将如何实现这一目标？

```
<div id="description">However, this valorous visitation of a by-gone vexation,
 stands vivified and has vowed to vanquish these venal and virulent vermin
 vanguarding vice and vouchsafing the violently vicious and voracious violation
 of volition. </div> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-27T21:02:04.163

仅使用 CSS，您可以像这样使用用户选择：

```
-moz-user-select: none;  
-webkit-user-select: none;  
-ms-user-select: none;  
-o-user-select: none;  
user-select: none; 
```

这适用于 Firefox、Chrome 和 Safari、IE10 及更高版本，但不适用于 Opera。

这只会阻止用户选择文本，但这会阻止他们复制它。按钮上的文本也很好。

在较旧的 IE 和 Opera 中，您可以使用以下方法将其设置为不可选择：

```
var elem = document.getElementById("yourElement");
elem.unselectable = "on"; // For IE and Opera 
```

在 JS 中，或者只是添加`unselectable`属性并将其设置为 on。

这是一个例子：http: [//jsfiddle.net/B9yYt/](http://jsfiddle.net/B9yYt/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T20:57:22.447

您可以像这样在内容上方添加一个 div：

```
<html>
<head>
<style>
#content{
    z-index: 0;
    background: grey;
}

#overlay{
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    z-index: 9999;
}

</style>
</head>
<body>

    <div id="content">
        <p>Can't touch this</p>
    </div>

    <div id="overlay">

    </div>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T20:51:56.093

它不是 JavaScript - 但您可以使用 CSS 使某些东西“看起来”无法选择。

```
::-moz-selection { background: #000000; color: #ffffff; text-shadow: none; }
::selection { background: #000000; color: #ffffff; text-shadow: none; } 
```

请记住，这不是跨浏览器兼容的。

# ruby-on-rails-3 - 如何让注册用户注册其他用户到 Devise？

> ID：10777134
> 
> 赞同：0
> 
> 时间：2012-05-27T20:44:21.833
> 
> 标签：ruby-on-rails-3, devise, ancestry

我正在为我的一个朋友创建一个信息系统，（已经）注册的用户可以注册其他用户在系统内使用。已经注册的用户还必须充当新注册用户（即孩子）的“父母”。在索引页面上，注册用户可以看到他/她注册的用户信息。我已经写了一些代码。但是，当一个注册用户想要注册另一个用户时，我会从 Devise 收到以下消息：“您已经登录。” 另外，新注册的用户中当前没有保存parent_id。

我的问题是：

*   如何修改我的 RegistrationController#create 方法，以便将 parent_id 存储在新创建的用户中？
*   如何修改设计以便登录用户，可以注册新用户？

我正在使用 Devise 进行注册/确认等。我用于父子关系的 Ancestry gem。

我已经创建了自己的 RegistrationsController： class Devise::Registrations::RegistrationsController < Devise::RegistrationsController

```
 def new
    super
  end

  def create
    super
  end

  def update
    super
  end

  def index
    @user = current_user
  end
end 
```

Registrations#new.html.erb 文件：

```
<% title "Owner registreren" %>

<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
  <%= devise_error_messages! %>

  <%= f.hidden_field :parent_id %>

  <div><%= f.label :email, "Email adres" %><br />
  <%= f.email_field :email %></div>

  <div><%= f.label :password, "Wachtwoord" %><br />
  <%= f.password_field :password %></div>

  <div><%= f.label :password_confirmation, "Wachtwoord (bevestiging)" %><br />
  <%= f.password_field :password_confirmation %></div>

  <div><%= f.submit "Registreer" %></div>
<% end %>

<%= render :partial => "devise/shared/links" %> 
```

Registrations#index.html.erb 文件：

```
<% title "Geregistreerde owners" %>

<% if @user.blank? || !@user.has_children? %>
    <p>U heeft geen owners geregistreerd</p>
<% else %>
    <table>
        <tr>
            <th>Email adres</th>
        </tr>
        <% for user in @user.children %>
            <tr>
                <td><%= child.email %></td>
                <td><%= link_to "Weergeven", child %></td>
                <td><%= link_to "Bewerken", edit_user_registration_path(user) %></td>
                <td><%= link_to "Verwijderen", product, :confirm => 'Weet u het zeker?', :method => :delete %></td>
            </tr>
        <% end %>
    </table>
<% end %>

<p><%= link_to "Nieuwe owner registreren", new_user_registration_path %></p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T20:52:41.623

您不想将 parent_id 值从表单传递到控制器，因为这不是很安全（可以通过简单地编辑 html 来更改）。

在自定义控制器的创建操作中，在调用 super 之前，添加以下内容：

`params[:user][:parent_id] = current_user.id if current_user`

而且，假设您正确设置了关联，它应该可以工作。

# php - javascript + PHP - 将值从弹出窗口发送到另一个页面

> ID：10777140
> 
> 赞同：2
> 
> 时间：2012-05-27T20:44:45.427
> 
> 标签：php, javascript, parentid

我有一个工作脚本，将值从弹出页面传递到父页面。

处理流程为：ParentPage>ChildPage>ParentPage

我不得不更改我的小应用程序的流程，以便在子页面上有一个“类别选择”选项。现在的流程是：ParentPage>ChildPage1>ChildPage2>ParentPage

我的应用程序现在要求用户从弹出窗口中选择一个值。第一个弹出窗口将提供类别选择。选择类别后，类别产品将显示在下一页上。然后用户从选项中选择一个产品，并将值传递给原始父页面。

我希望我已经准确地解释了我的问题。如何将所选值传递回原始父页面。如果我的父母页面名为 parent.php，我可以将页面 parent.php 的 ID 硬编码到我的代码中：

```
window.opener.updateValue(parentId, value); 
```

任何帮助都将受到赞赏。

**我的工作代码和建议的代码如下所示：**

**工作代码**

**父.php**

```
<html>
<head>
<title>test</title>

<script type="text/javascript">  
function selectValue(id) 
{ 
    // open popup window and pass field id 
    window.open('child.php?id=' + encodeURIComponent(id),'popuppage', 
      'width=400,toolbar=1,resizable=1,scrollbars=yes,height=400,top=100,left=100'); 
} 

function updateValue(id, value) 
{ 
    // this gets called from the popup window and updates the field with a new value 
    document.getElementById(id).value = value; 
} 

</script> 
</head>

<body>

<table> 

<tr>
<th>PACK CODE</th>
</tr>

<tr>  
    <td>
        <input size=10  type=number id=sku1 name=sku1 ><img src=q.png  name="choice" onClick="selectValue('sku1')" value="?">
    </td>
</tr>
<tr> 
    <td>
        <input size=10  type=number id=sku2 name=sku2 ><img src=q.png  name="choice" onClick="selectValue('sku2')" value="?">
    </td>
</tr>
</table>

</body>
</html> 
```

**子.php**

```
<script type="text/javascript"> 
function sendValue(value) 
{ 
    var parentId = <?php echo json_encode($_GET['id']); ?>; 
    window.opener.updateValue(parentId, value); 
    window.close(); 
} 
</script> 
<table> 
    <tr> 
        <th>Pack Code</th>                       
    </tr> 
    <tr> 
        <td>1111</td> 
        <td><input type=button value="Select" onClick="sendValue('1111')" /></td>
    </tr>
    <tr> 
        <td>2222</td> 
        <td><input type=button value="Select" onClick="sendValue('2222')" /></td>
    </tr>
    <tr> 
        <td>3333</td> 
        <td><input type=button value="Select" onClick="sendValue('3333')" /></td>
    </tr>
</table> 
```

**提议的代码**

**父.php**

```
<html>
<head>
<title>test</title>

<script type="text/javascript">  
function selectValue(id) 
{ 
    // open popup window and pass field id 
    window.open('child1.php?id=' + encodeURIComponent(id),'popuppage', 
      'width=400,toolbar=1,resizable=1,scrollbars=yes,height=400,top=100,left=100'); 
} 

function updateValue(id, value) 
{ 
    // this gets called from the popup window and updates the field with a new value 
    document.getElementById(id).value = value; 
} 

</script> 
</head>

<body>

<table> 

<tr>
<th>PACK CODE</th>
</tr>

<tr>  
    <td>
        <input size=10  type=number id=sku1 name=sku1 ><img src=q.png  name="choice" onClick="selectValue('sku1')" value="?">
    </td>
</tr>
<tr> 
    <td>
        <input size=10  type=number id=sku2 name=sku2 ><img src=q.png  name="choice" onClick="selectValue('sku2')" value="?">
    </td>
</tr>

</table>

</body>
</html> 
```

**child1.php**

```
<script type="text/javascript"> 
function sendValue(value) 
{ 
    var parentId = <?php echo json_encode($_GET['id']); ?>; 
    window.opener.updateValue(parentId, value); 
    window.close(); 
} 
</script> 
 <form name="category" method="POST" action=child2.php>
<table> 
<tr> 
<td>Category</td>
</tr> 
<tr> 
<td>
<select name="category" id="category">
   <option value="1">1</option>
   <option value="2">2</option>
   <option value="3">3</option>
   <option value="4">4</option>
 </select> 
</td>  
</tr> 
<tr>
<td>
<input type=submit value=next>
</td>
</tr>
</table> 
```

**Child2.php**

```
<script type="text/javascript"> 
function sendValue(value) 
{ 
    var parentId = <?php echo json_encode($_GET['id']); ?>; 
    window.opener.updateValue(parentId, value); 
    window.close(); 
} 
</script> 

<?

$category=$_POST[category];

?>
 <form name="selectform"> 
 <table>
    <tr> 
    <tr> 
        <th>Pack Codes for Category <? echo $category; ?></th>                       
    </tr> 
    <tr> 
        <td>1111</td> 
        <td><input type=button value="Select" onClick="sendValue('1111')" /></td>
    </tr>
    <tr> 
        <td>2222</td> 
        <td><input type=button value="Select" onClick="sendValue('2222')" /></td>
    </tr>
    <tr> 
        <td>3333</td> 
        <td><input type=button value="Select" onClick="sendValue('3333')" /></td>
    </tr>
    </table> 
```

我知道在这种情况下弹出页面不是所需的选项，但这是我的应用程序所在的位置。请告知我如何更改子 2 上的代码以指向 parent.php 页面。我的想法是更改下面的代码

```
<script type="text/javascript"> 
function sendValue(value) 
{ 
    var parentId = <?php echo json_encode($_GET['id']); ?>; 
    window.opener.updateValue(parentId, value); 
    window.close(); 
} 
</script> 
```

到这个代码（硬编码父ID - 这对parent.php来说是什么）

```
<script type="text/javascript"> 
function sendValue(value) 
{ 
    var parentId = <?php echo json_encode($_GET['id']); ?>; 
    window.opener.updateValue('parent.php', value); 
    window.close(); 
} 
</script> 
```

非常感谢，瑞恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T21:17:05.363

好的，这是我的架构主张的总结：

主要的：

```
var oChild = window.popup('child1.php');
oChild.openerr = window; 
```

child1.php：

```
var oWin = window.popup('child2.php');
oWin.category = document.getElementById('category').value;
oWin.openerr = window;
//here use window.openerr to access the parent (main) 
```

child2.php：

```
var g_oXhr = new xmlHttpRequest();
    g_oXhr.onreadystatechange = function() {
        if (g_oXhr.readyState == 4 && (g_oXhr.status == 200)) {
            //use g_oXhr.responseText or g_oXhr.responseXML
        }
    }

    g_oXhr.open("POST", "mysql_query_elements_category.php", true);
    g_oXhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded; charset=utf-8");
    g_oXhr.send('0=' + encodeURIComponent(window.category));

    //here use window.openerr to access the parent (child1) 
```

开始了 ：-）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T20:50:14.370

只是粗暴地回答这个问题，是的，你可以这样做：

```
window.opener.updateValue(parentId, value); 
```

我个人使用这个系统： - 主窗口 MAIN - 打开一个弹出窗口以选择一个类别 POPUP - 从弹出窗口中选择一个值，以这种方式在 MAIN 中设置类别字段：

```
var oElem = window.opener.document.getElementById("myElementId");
oElem.value = '...'; 
```

希望能帮助到你！

ps：我没有尝试`window.opener.opener`，但我不明白为什么它不起作用......

编辑：child2发布了这个：

```
$category=$_POST[category]; 
```

您可以像这样简单地打开 child2：在 child1 中：

```
wherever.onclick = function(e) {
var ochild2 = window.open('child2.php');
ochild2.category = document.getElementById('category').value;
} 
```

并从 javascript 中的 child2 检索类别的值，`window.category`而不是从 php 获取它`$category`。请注意，在 child2.php 中您不使用 $category 变量。

希望能帮助到你

而不是通过表格。

# php - 使用 $.ajax 请求使用 PHP 到 MYSQL 数据库的 jQuery 表单处理

> ID：10777141
> 
> 赞同：0
> 
> 时间：2012-05-27T20:44:47.350
> 
> 标签：php, jquery, mysql, ajax

在我的表单中，如果用户输入为 O+，我正在使用选项血组 mydatastring 将是这样的

```
name=phani&age=13&sex=male&bloodgroup=**o+**&phone=7864987540&email=phaniandu4@gmail.com&city=akividu&area=donka street&pin=534235 
```

在我的数据库中，值存储为 O 而不是 O+

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T20:57:50.037

我假设这是一个网址。如果是这样，请使用 urlencode('O+') 并在 url 中输入其输出 (O%2B)。在将数据输入数据库之前，使用 urldecode() 将 'O%2B' 更改为 'O+。您可以做的另一件事是为每个血型分配一个数字（O+ -> 0，A+ -> 1，...，AB- -> 7），然后在您的 php 代码中使用一个开关，以便如果血型 == 1 输入 O+在数据库中等等。

# css - css 浮动还是 jquery masonry tumblr？

> ID：10777142
> 
> 赞同：1
> 
> 时间：2012-05-27T20:44:51.900
> 
> 标签：css, jquery-masonry

试图设计一个自定义的 tumblr 主题。我希望文本帖子在图像左侧浮动文本，并且我希望剩余的图像像在砌体中一样显示（[见图](http://i.stack.imgur.com/nyIKj.png)）。单柱砌体布局是否可行？

还想集成无尽的滚动。有什么帮助吗？谢谢。

# linux - 终止在 QThread 中运行的正在进行的 QProcess？

> ID：10777147
> 
> 赞同：1
> 
> 时间：2012-05-27T20:46:09.560
> 
> 标签：linux, multithreading, qt, qprocess

如何终止在 QThread 中运行并被另一个 QThread 删除的正在进行的 QProcess？我什至插入了一个 QMutex extCmdProcessLock，它应该避免在 extCmdProcess 完成或超时之前破坏 DbManager。如果另一个线程在 DbManager 上调用 delete，我会在“waitForStarted”上遇到分段错误。我不能使用信号（我认为），因为我在顺序数据过程中使用外部命令。非常感谢您的帮助！

```
DbManager::extCmd(){
    ...
    QMutexLocker locker(&extCmdProcessLock);
    extCmdProcess = new QProcess(this);
    QString argStr  += " --p1=1"
                    +  " --p2=3";
    extCmdProcess->start(cmd,argStr.split(QString(" ")));
    bool startedSuccessfully = extCmdProcess->waitForStarted();
    if (!startedSuccessfully) {
       extCmdProcess->close();
       extCmdProcess->kill();
       extCmdProcess->waitForFinished();
       delete extCmdProcess;
       extCmdProcess = NULL;
       return;
    }
    bool successfullyFinished = extCmdProcess->waitForFinished(-1);
    if (!successfullyFinished) {
       qDebug() << "finishing failed"; // Appendix C
       extCmdProcess->close();
       extCmdProcess->kill();
       extCmdProcess->waitForFinished(-1);
       delete extCmdProcess;
       extCmdProcess = NULL;
       return;
   }
   extCmdProcess->close();
   delete extCmdProcess;
   extCmdProcess = NULL;
}

DbManager::~DbManager(){
    qDebug() << "DB DbManager destructor called.";   
    QMutexLocker locker(&extCmdProcessLock);
    if (extCmdProcess!= NULL){
       this->extCmdProcess->kill(); // added after Appendix A
       this->extCmdProcess->waitForFinished();
    }
} 
```

**附录 A：**我还收到错误“QProcess: Destroyed while process is still running”。我读到这可能意味着我的另一个线程的“删除 dbmanager”调用在 waitForStarted() 命令尚未完成时执行。但我真的很想知道为什么我的析构函数中的 kill() 命令没有解决这个问题。

**附录 B：**根据评论，添加`waitForFinished()`. 可悲的是，QProcess 终止仍然没有正确关闭，分段错误本身发生在`waitForStarted()`或如下所示`start()`。

```
#0  0x00007f25e03a492a in QEventDispatcherUNIX::registerSocketNotifier () from /usr/local/Trolltech/Qt-4.7.4/lib/libQtCore.so.4
#1  0x00007f25e0392d0b in QSocketNotifier::QSocketNotifier () from /usr/local/Trolltech/Qt-4.7.4/lib/libQtCore.so.4
#2  0x00007f25e0350bf8 in ?? () from /usr/local/Trolltech/Qt-4.7.4/lib/libQtCore.so.4
#3  0x00007f25e03513ef in ?? () from /usr/local/Trolltech/Qt-4.7.4/lib/libQtCore.so.4
#4  0x00007f25e03115da in QProcess::start () from /usr/local/Trolltech/Qt-4.7.4/lib/libQtCore.so.4
#5  0x0000000000428628 in DbManager::extCmd()
#6  0x000000000042ca06 in DbManager::storePos ()
#7  0x000000000044f51c in DeviceConnection::incomingData ()
#8  0x00000000004600fb in DeviceConnection::qt_metacall ()
#9  0x00007f25e0388782 in QObject::event () from /usr/local/Trolltech/Qt-4.7.4/lib/libQtCore.so.4
#10 0x00007f25e0376e3f in QCoreApplicationPrivate::notify_helper () from /usr/local/Trolltech/Qt-4.7.4/lib/libQtCore.so.4
#11 0x00007f25e0376e86 in QCoreApplication::notify () from /usr/local/Trolltech/Qt-4.7.4/lib/libQtCore.so.4
#12 0x00007f25e0376ba4 in QCoreApplication::notifyInternal () from /usr/local/Trolltech/Qt-4.7.4/lib/libQtCore.so.4
#13 0x00007f25e0377901 in QCoreApplicationPrivate::sendPostedEvents () from /usr/local/Trolltech/Qt-4.7.4/lib/libQtCore.so.4
#14 0x00007f25e03a4500 in QEventDispatcherUNIX::processEvents () from /usr/local/Trolltech/Qt-4.7.4/lib/libQtCore.so.4
#15 0x00007f25e0375e15 in QEventLoop::processEvents () from /usr/local/Trolltech/Qt-4.7.4/lib/libQtCore.so.4
#16 0x00007f25e0376066 in QEventLoop::exec () from /usr/local/Trolltech/Qt-4.7.4/lib/libQtCore.so.4
#17 0x00007f25e0277715 in QThread::exec () from /usr/local/Trolltech/Qt-4.7.4/lib/libQtCore.so.4
#18 0x00007f25e027a596 in ?? () from /usr/local/Trolltech/Qt-4.7.4/lib/libQtCore.so.4
#19 0x00007f25df9b43f7 in start_thread () from /lib/libpthread.so.0
#20 0x00007f25def89b4d in clone () from /lib/libc.so.6
#21 0x0000000000000000 in ?? () 
```

**附录 C：**调试输出向我展示了错误消息：*QProcess: Destroyed while process is still running。*总是出现，当出现*完成失败*的输出时。这意味着我保护 QProcess 的锁定或/和终止尝试失败。我想知道的问题：

a）如果创建一个 QProcess 对象并启动它，我的`extCmdProcessLock`解锁了吗？我已经尝试使用普通`lock()`电话而不是`QMutexLoader`但没有运气。

b）文档说如果我以这种方式使用 QProcess ，*主线程*将被停止。它们真的是指*主线程*还是*启动 QProcess 的线程*？我假设第二个。

c) QProcess 不能在多线程环境中使用吗？如果两个线程创建一个 QProcess 对象并运行它，它们会干扰吗？也许对象是静态的？

感谢您在填补知识泄漏方面的任何帮助。我真的希望能解决这个难题。

**附录 D：**从任何线程中删除任何 delete 和 deleteLater() 后，我的 QProcess 仍然被破坏。

```
#0  0x00007fc94e9796b0 in QProcess::setProcessState () from /usr/local/Trolltech/Qt-4.7.4/lib/libQtCore.so.4
#1  0x00007fc94e97998b in QProcess::waitForStarted () from /usr/local/Trolltech/Qt-4.7.4/lib/libQtCore.so.4
#2  0x00007fc94e979a12 in QProcess::waitForFinished () from /usr/local/Trolltech/Qt-4.7.4/lib/libQtCore.so.4
#3  0x0000000000425681 in DbManager::extCmd()
#4  0x0000000000426fb6 in DbManager::storePos ()
#5  0x000000000044d51c in DeviceConnection::incomingData ()
#6  0x000000000045fb7b in DeviceConnection::qt_metacall ()
#7  0x00007fc94e9f4782 in QObject::event () from /usr/local/Trolltech/Qt-4.7.4/lib/libQtCore.so.4
#8  0x00007fc94e9e2e3f in QCoreApplicationPrivate::notify_helper () from /usr/local/Trolltech/Qt-4.7.4/lib/libQtCore.so.4
#9  0x00007fc94e9e2e86 in QCoreApplication::notify () from /usr/local/Trolltech/Qt-4.7.4/lib/libQtCore.so.4
#10 0x00007fc94e9e2ba4 in QCoreApplication::notifyInternal () from /usr/local/Trolltech/Qt-4.7.4/lib/libQtCore.so.4
#11 0x00007fc94e9e3901 in QCoreApplicationPrivate::sendPostedEvents () from /usr/local/Trolltech/Qt-4.7.4/lib/libQtCore.so.4
#12 0x00007fc94ea10500 in QEventDispatcherUNIX::processEvents () from /usr/local/Trolltech/Qt-4.7.4/lib/libQtCore.so.4
#13 0x00007fc94e9e1e15 in QEventLoop::processEvents () from /usr/local/Trolltech/Qt-4.7.4/lib/libQtCore.so.4
#14 0x00007fc94e9e2066 in QEventLoop::exec () from /usr/local/Trolltech/Qt-4.7.4/lib/libQtCore.so.4
#15 0x00007fc94e8e3715 in QThread::exec () from /usr/local/Trolltech/Qt-4.7.4/lib/libQtCore.so.4
#16 0x00007fc94e8e6596 in ?? () from /usr/local/Trolltech/Qt-4.7.4/lib/libQtCore.so.4
#17 0x00007fc94e0203f7 in start_thread () from /lib/libpthread.so.0
#18 0x00007fc94d5f5b4d in clone () from /lib/libc.so.6
#19 0x0000000000000000 in ?? () 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T22:06:50.760

使用 QThread 管理正在运行的进程真的很糟糕。我一次又一次地看到它，这是关于如何正确编写异步应用程序的一些基本误解。进程与您自己的应用程序是分开的。QProcess 提供了一组漂亮的信号，在它成功启动、启动失败和完成时通知您。只需将这些信号连接到您的 QObject 派生类的实例中的插槽，就可以完成所有设置。

如果您的应用程序中的线程数量可能大大超过平台上可用的内核/超线程数量，或者如果线程数量与一些不相关的运行时因素（如正在运行的子进程数量）相关联，那么这是一个糟糕的设计。

请参阅我的[其他答案](https://stackoverflow.com/questions/10799130/what-is-the-reason-for-qprocess-error-status-5/10840448#10840448)。

您可以在堆上创建 QProcess，作为监控 QObject 的子级。您可以将 QProcess 的 finished() 信号连接到它自己的 deleteLater() 槽，这样它就会在完成后自动删除自己。监控 QObject 应该在它自己被破坏时强制终止任何剩余的正在运行的进程，比如由于您的应用程序关闭。

进一步的问题是如何执行无法控制的长时间运行的函数，比如没有异步 API 的数据库查询，并且在穿插有良好异步 API 的事物（例如 QProcess）时影响最小。

一种规范的方式是：在必须的地方同步做事，否则异步做。您可以通过调用其插槽来停止控制对象和任何正在运行的进程`deleteLater()`——通过信号/插槽连接，或者`QMetaObject::invokeMethod()`如果您想在安全地越过线程边界的同时直接执行此操作，请使用它。这是使用尽可能少的阻塞调用的主要好处：您可以对处理进行一些控制，并且可以在某些时候停止它。对于纯粹的阻塞实现，没有办法阻止它，除非使用一些标志变量并为你的代码撒上测试。

`deleteLater()`只要事件循环可以在 QObject 所在的线程中旋转，就会得到处理。这意味着它将在数据库查询调用之间获得机会——事实上，在进程运行的任何时候。

未经测试的代码：

```
class Query : public QObject
{
  Q_OBJECT
public:
  Query(QObject * parent = 0) : QObject(parent) {
    connect(process, SIGNAL(error(QProcess::ProcessError)), SLOT(error()));
    connect(process, SIGNAL(finished(int,QProcess::ExitStatus)), SLOT(finished(int,QProcess::ExitStatus)));
  }
  ~Query() { process.kill(); }
  void start() {
    QTimer::singleShot(0, this, SLOT(slot1()));
  }
protected slots:
  void slot1() {
    // do a database query
    process.start(....);
    next = &Query::slot2;
  }
protected:
  // slot2 and slot3 don't have to be slots
  void slot2() {
    if (result == Error) {...}
    else {...}
    // another database query
    process.start(...); // yet another process gets fired
    next = &Query::slot3;
  }
  void slot3() {
    if (result == Error) {...}
    deleteLater();
  }

protected slots:
  void error() {
    result = Error;
    (this->*next)();
  }
  void finished(int code, QProcess::ExitStatus status) {
    result = Finished;
    exitCode = code;
    exitStatus = status;
    (this->*next)();
  }
private:
  QProcess process; 
  enum { Error, Finished } result;
  int exitCode;
  QProcess::ExitStatus exitStatus;
  void (Query::* next)();
}; 
```

就个人而言，我会检查您使用的数据库是否具有异步 API。如果没有，但如果客户端库有可用的源，那么我会做一个最小的端口来使用 Qt 的网络堆栈来使其异步。它会降低开销，因为每个数据库连接不再有一个线程，并且随着您接近 CPU 饱和，开销不会增加：通常，要使 CPU 饱和，您需要很多很多线程，因为它们大多是空闲的。使用异步接口，上下文切换的数量会减少，因为线程会处理来自数据库的一个数据包，并且可以立即处理来自不同连接的另一个数据包，而无需进行上下文切换：执行停留在该线程的事件循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T06:28:14.970

[QProcess::waitForStarted](http://doc.qt.nokia.com/4.7-snapshot/qprocess.html#waitForStarted)只是表示您的进程已经开始。extCmd() 方法中的互斥锁随后被解锁，因为您没有在此方法中等待[QProcess::waitForFinished 。](http://doc.qt.nokia.com/4.7-snapshot/qprocess.html#waitForFinished)您将在子进程仍在运行时**退出此方法。**

如果你想使用 fire&forget 类型的执行，我只是你使用[QProcess::startDetached](http://doc.qt.nokia.com/4.7-snapshot/qprocess.html#startDetached)

# xml - 为什么 XML 对数据文件有好处？

> ID：10777148
> 
> 赞同：9
> 
> 时间：2012-05-27T20:46:20.827
> 
> 标签：xml

最近我所在的研究小组一直在研究一些模拟代码。

对于代码，我们有包含代码的主要 C++ 文件，一个包含模拟输入参数的文本文件。每个时间步的模拟数据以柱状数据的形式吐出，每一列代表一些物理量位置、压力等，每一行代表一个网格点。

我的老板现在要求我将输入参数文件和输出数据文件的数据格式从目前的 key-value ， key-value 性质切换为 XML 格式。他的解释似乎很差，因为他的英语很烂。已经有两次，他在我一个字都听不懂的情况下大肆宣扬 XML 的优越性。

现在，让我说我只是对科学计算感兴趣的普通 C/C++/Python 程序员，而且我没有计算机工程学科的背景，比如数据库或 XML 似乎最常用的 Web 开发。

谁能给我一个简短的解释，或者给我一些资源，这些资源通过简单但不平凡的例子对概念进行了温和的解释，没有所有的瑜伽、诵经、焚香和丑陋的技术词汇（这一直需要我做无休止的谷歌搜索）所有的 XML 教程似乎都充满了。

如果有人可以给出一些明确的真实示例，说明 XML 数据格式在某些 **应用数学**代码中的使用位置和方式，那将非常有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T20:57:32.570

简而言之，XML 提供了与多种软件互操作的能力，因为可以使用 XML 语言交换 XML 数据。

例如，相同的数据可以包含在 HTML 页面中进行显示，或者可以由其他知道数据模式（XML 模式）的应用程序“按原样”读取，或者可以使用 XSLT 转换为任何文本格式。（即 XML 到 CSV）。

总之，XML 可以比任何其他数据格式更容易移植。

当然，这不是将 XML 用于数据的唯一好处：XML 可以根据其模式验证文档（为了正确性），可以使用声明语言 (XPath) 查询数据。

对于需要/产生大量数据的应用程序，XML 的一个缺点是 XML 很冗长（任何二进制数据格式）：想想如何以 XML 格式保存图像……那会很麻烦……当然，您可以在 XML 文档中包含二进制数据（通过使用 base64 编码），但在这种情况下（大部分数据存储在 base64 中），使用 XML 毫无意义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-27T21:32:39.263

此外，XML 是一种非常灵活的格式。借助 DTD、XSD 或 RelaxNG，可以轻松存储结构各异的数据，同时保持清晰、正式的定义。

例如，与表格相比，它允许您消除可能的空单元格，这（对于足够大的数据集）甚至可以弥补其冗长。

表格数据：

```
 ID  | attribute1 | attribute2 | attribute3 | attribute4 | attribute5 | etc.
 1   |     1      |     3      |      8     |    null    |    7       |  ...
 2   |     4      |    null    |     null   |    null    |    13      |  ...
 3   |     4      |    null    |      1     |     12     |   null     |  ... 
```

XML:

```
<rows>
  <row id="1">
    <attribute1>1</attribute1>
    <attribute2>3</attribute2>
    <attribute3>8</attribute3>
    <attribute5>7</attribute5>
  </row>
  <row id="2">
    <attribute1>4</attribute1>
    <attribute5>13</attribute5>
  </row>
  <row id="3">
    <attribute1>4</attribute1>
    <attribute3>1</attribute3>
    <attribute4>12</attribute4>
  </row>
</rows> 
```

更不用说每一行都可能有一个复杂的、单独的结构。你可以用这种方式描述一个很长的多项式表达式或任何其他函数。

我确信许多实现高等数学的应用程序都使用 XML。我知道 Mathematica 允许 XML 导出。Matlab 和 R 也是如此。

使用 XML 的另一个优点是它既易于机器解析，又易于人类阅读。您不需要对其进行解码（如二进制），并且可以清楚地看到数据的结构（与 csv 或许多其他格式不同）。

它的受欢迎程度和丰富的工具也不容忽视。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T07:40:48.687

使用 XML 可以最大限度地提高数据的长期价值，因为它以一种独立于您打算如何使用它并且独立于任何特定软件环境的形式表示。基本上就是这样。通常，当您将软件和数据视为长期资产时，您可能需要在满足近期短期目标方面进行一些“过度设计”，但您（或您的老板）正在采取计算出的赌注是投资将在长期内得到回报。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T21:11:01.250

想象一个任何软件或硬件都使用自己的格式的世界。Microsoft Word '.doc' 文件具有一定的结构（用于定义字体、尺寸、对齐方式、ecc），例如与'.pdf' 不同。

我可以无限地继续，告诉你一些格式与其他格式不同，但它们的结果（文本文件、视频、图像）与其他格式完全一样。互联网上充斥着人们询问“如何在该操作系统中打开该文件？”的问题。或“我如何在该应用程序中打开该文件”，ecc。

**软件公司从来没有真正想让他们的软件适应现有标准，而是**通过创建新标准（通常与其他标准不兼容）将这种痛苦留给您。**有一个例外：HTML。

任何浏览器开发人员都必须制作一个必须更好、更轻、更酷的应用程序才能做到这一点？只需读取并呈现现有格式：HTML 页面。

话虽如此，您可能会猜到为什么 XML 是一种好用的格式；) 理想情况下，所有内容都应仅采用 .txt 格式。现在告诉我，你能在没有 XML 编辑器的情况下编写一个 XML 文件吗（只使用记事本）？你能用pdf做同样的事情吗？还是有医生？

据我所知，没有“在某些应用数学代码中使用 XML 数据格式的位置和方式的明确现实示例”，但不幸的是，计算机科学不仅与“应用数学”有关，而且与一些小废话有关我们必须关心，比如格式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-08T16:28:20.457

XML*不适*用于数据结构或键值对。对这些使用 JSON 或 YAML。另一方面，XML 适用于文档标记。

# android - 我的 ListView 适配器给了我这个错误： UnsupportedOperationException: addView(View, LayoutParams) is not supported in AdapterView

> ID：10777152
> 
> 赞同：0
> 
> 时间：2012-05-27T20:46:55.533
> 
> 标签：android, android-adapterview

我试图找出原因，但我不确定。我看了又看，我很肯定我输入了我应该输入的所有内容。我将在下面发布我的代码。

适配器类：

```
public class MyAgendaAdapter extends BaseAdapter {
    ArrayList<Agenda> agendas = new ArrayList<Agenda>();

public MyAgendaAdapter() {
    agendas.add(new Agenda());
}

@Override
public int getCount() {
    return agendas.size();
}

@Override
public Object getItem(int position) {
    return agendas.get(position);
}

@Override
public long getItemId(int position) { 
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    if(convertView == null) {
        LayoutInflater inflater = LayoutInflater.from(parent.getContext());
        convertView = inflater.inflate(R.layout.agenda, parent, false);
    }

    Agenda agenda = agendas.get(position); //get the agenda from the ArrayList

    TextView nameTextView = (TextView) convertView.findViewById(R.id.agenda_name);
    nameTextView.setText(agenda.getEvent());

    TextView timeTextView = (TextView) convertView.findViewById(R.id.agenda_time);
    timeTextView.setText(agenda.getTime());

    TextView locationTextView = (TextView) convertView.findViewById(R.id.agenda_location);
    locationTextView.setText(agenda.getLocation());

    return convertView;
     }

} 
```

主要活动类：

```
public class MainDisplayActivity extends Activity {
    MyAgendaAdapter agendaAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ListView list = (ListView) findViewById(R.id.agenda_list); 
    agendaAdapter = new MyAgendaAdapter();
    list.setAdapter(agendaAdapter);
    }

} 
```

我省略了进口。假设我的布局和 ID 是正确的，有谁知道问题是什么？

编辑（logcat 上的确切错误）：

```
05-27 17:29:54.839: W/dalvikvm(1065): threadid=1: thread exiting with uncaught exception(group=0x409c01f8)
05-27 17:29:54.860: E/AndroidRuntime(1065): FATAL EXCEPTION: main
05-27 17:29:54.860: E/AndroidRuntime(1065): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.zeroe/com.zeroe.MainDisplayActivity}: java.lang.UnsupportedOperationException: addView(View, LayoutParams) is not supported in AdapterView
05-27 17:29:54.860: E/AndroidRuntime(1065):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
05-27 17:29:54.860: E/AndroidRuntime(1065):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-27 17:29:54.860: E/AndroidRuntime(1065):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-27 17:29:54.860: E/AndroidRuntime(1065):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-27 17:29:54.860: E/AndroidRuntime(1065):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-27 17:29:54.860: E/AndroidRuntime(1065):     at android.os.Looper.loop(Looper.java:137)
05-27 17:29:54.860: E/AndroidRuntime(1065):     at android.app.ActivityThread.main(ActivityThread.java:4424)
05-27 17:29:54.860: E/AndroidRuntime(1065):     at java.lang.reflect.Method.invokeNative(Native Method)
05-27 17:29:54.860: E/AndroidRuntime(1065):     at java.lang.reflect.Method.invoke(Method.java:511)
05-27 17:29:54.860: E/AndroidRuntime(1065):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-27 17:29:54.860: E/AndroidRuntime(1065):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-27 17:29:54.860: E/AndroidRuntime(1065):     at dalvik.system.NativeStart.main(Native Method)
05-27 17:29:54.860: E/AndroidRuntime(1065): Caused by: java.lang.UnsupportedOperationException: addView(View, LayoutParams) is not supported in AdapterView
05-27 17:29:54.860: E/AndroidRuntime(1065):     at android.widget.AdapterView.addView(AdapterView.java:471)
05-27 17:29:54.860: E/AndroidRuntime(1065):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:743)
05-27 17:29:54.860: E/AndroidRuntime(1065):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
05-27 17:29:54.860: E/AndroidRuntime(1065):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
05-27 17:29:54.860: E/AndroidRuntime(1065):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
05-27 17:29:54.860: E/AndroidRuntime(1065):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
05-27 17:29:54.860: E/AndroidRuntime(1065):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
05-27 17:29:54.860: E/AndroidRuntime(1065):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
05-27 17:29:54.860: E/AndroidRuntime(1065):     at android.app.Activity.setContentView(Activity.java:1835)
05-27 17:29:54.860: E/AndroidRuntime(1065):     at com.zeroe.MainDisplayActivity.onCreate(MainDisplayActivity.java:21)
05-27 17:29:54.860: E/AndroidRuntime(1065):     at android.app.Activity.performCreate(Activity.java:4465)
05-27 17:29:54.860: E/AndroidRuntime(1065):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-27 17:29:54.860: E/AndroidRuntime(1065):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
05-27 17:29:54.860: E/AndroidRuntime(1065):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T20:53:52.433

**编辑：**

所以在对话编辑`MyAgendaAdapter`类和编辑之后是`conctructor`这样的：

```
public MyAgendaAdapter(Context c) {
    this.context = c;
    agendas.add(new Agenda());
} 
```

所以你将拥有：

```
public class MyAgendaAdapter extends BaseAdapter {

    Context context;
    ArrayList<Agenda> agendas = new ArrayList<Agenda>();

public MyAgendaAdapter() {
    agendas.add(new Agenda());
}
... 
```

然后将此添加到您的`getView`方法中

```
LayoutInflater inflater = LayoutInflater.from(context);
if(convertView == null) {
        convertView = inflater.inflate(R.layout.agenda, null);
    } 
```

然后你会这样调用：

```
ListView list = (ListView) findViewById(R.id.agenda_list); 
    agendaAdapter = new MyAgendaAdapter(this);
    list.setAdapter(agendaAdapter); 
```

然后告诉我。

* * *

所以替代方式哪个内部类：

```
public class MainDisplayActivity extends Activity {
    MyAgendaAdapter agendaAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ListView list = (ListView) findViewById(R.id.agenda_list); 
    agendaAdapter = new MyAgendaAdapter();
    list.setAdapter(agendaAdapter);
    }

private class MyAgendaAdapter extends BaseAdapter {

    ArrayList<Agenda> agendas = new ArrayList<Agenda>();

public MyAgendaAdapter() {
    agendas.add(new Agenda());
}

@Override
public int getCount() {
    return agendas.size();
}

@Override
public Object getItem(int position) {
    return agendas.get(position);
}

@Override
public long getItemId(int position) { 
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    LayoutInflater inflater = getLayoutInflater();
    if(convertView == null) {
        convertView = inflater.inflate(R.layout.agenda, null);
    }

    Agenda agenda = agendas.get(position); //get the agenda from the ArrayList

    TextView nameTextView = (TextView) convertView.findViewById(R.id.agenda_name);
    nameTextView.setText(agenda.getEvent());

    TextView timeTextView = (TextView) convertView.findViewById(R.id.agenda_time);
    timeTextView.setText(agenda.getTime());

    TextView locationTextView = (TextView) convertView.findViewById(R.id.agenda_location);
    locationTextView.setText(agenda.getLocation());

    return convertView;
     }

}

} 
```

# javascript - 在兔子洞里——“res”在 express 和/或 nodejs 中来自哪里？

> ID：10777153
> 
> 赞同：0
> 
> 时间：2012-05-27T20:47:12.350
> 
> 标签：javascript, node.js, express

我试图了解更多的 express 和 nodejs 内部结构。查看 express`response.js`文件，它经常为 分配几个方法`res`，这似乎是一个原型。

具体来说，`res`被声明为`res = http.ServerResponse.prototype`。

好的，那是`http`什么？`http`被声明为`http = require('http')`。

所以查看 express`http.js`文件，我们看到`exports = module.exports = HTTPServer;`

似乎`HTTPServer`是这种方法：

```
function HTTPServer(middleware){
  connect.HTTPServer.call(this, []);
  this.init(middleware);
}; 
```

这就是我卡住的地方。根据我的逻辑，似乎`ServerResponse`正在调用该`HTTPServer`方法，这当然没有意义。因此，我一定遗漏了一些东西。

更新：

我刚刚意识到 express 创建了一个 HTTPServer 的实例：

```
exports.createServer = function(options){
  if ('object' == typeof options) {
    return new HTTPSServer(options, Array.prototype.slice.call(arguments, 1));
  } else {
    return new HTTPServer(Array.prototype.slice.call(arguments));
  }
}; 
```

所以我猜这`ServerResponse`是在那个实例上实际被调用的情况？但是我还是找不到`ServerResponse`...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T20:55:21.770

[我在express source files](https://github.com/visionmedia/express/tree/master/lib)中看不到任何 http.js文件。

根据[关于 http 的 node.js 文档](http://nodejs.org/api/http.html#http_http) `http = require('http')`将加载具有[`ServerResponse`object](http://nodejs.org/api/http.html#http_class_http_serverresponse)的 http 模块。

因此，express 代码使用附加方法增强了 ServerResponse 对象。

# android - OnActivityResult 在 TabActivityGroup 中不起作用？

> ID：10777154
> 
> 赞同：1
> 
> 时间：2012-05-27T20:47:47.653
> 
> 标签：android, android-activity, android-camera, android-tabhost, tabactivity

我使用选项卡活动作为主要活动，其中有 4 个选项卡。一个选项卡是具有三个按钮的活动组。每个按钮都是一个活动。我在其中一项活动中使用相机。我知道它的工作原理，因为我已在存储卡中签入图像已保存，但它没有调用 Onactivityresult() 方法。

这是为了显示 ContentView

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    View viewToLoad = LayoutInflater.from(this.getParent()).inflate(R.layout.enter_expenses, null);
    this.setContentView(viewToLoad); 
```

此代码用于拍摄图像

```
 dbimgguid = UUID.randomUUID();
             imagename =dbimgguid.toString();
             Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
             photo = new File(Environment.getExternalStorageDirectory(), "Expenses"+imagename+".jpg");
             intent.putExtra(MediaStore.EXTRA_OUTPUT,Uri.fromFile(photo));
             imageurl = Uri.fromFile(photo); 
             startActivityForResult(intent, CAMERA_RECEIPTREQUEST); 
```

这是活动结果

```
 @Override
     protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
     super.onActivityResult(requestCode, resultCode, data);  
     System.out.println(requestCode);
     System.out.println(resultCode);
     switch(requestCode)
     {
     case CAMERA_RECEIPTREQUEST:  
         if(resultCode== Activity.RESULT_OK)
         {
         //Toast.makeText(this, "Receipt Image Saved", Toast.LENGTH_SHORT).show();
         BitmapFactory.Options options = new BitmapFactory.Options();
         options.inSampleSize = 8;
         //ImageView jpgView = (ImageView)findViewById(R.id.imageView1);
         Bitmap receipt = BitmapFactory.decodeFile(photo.toString(),options);  
         String image = "Expenses"+imagename+".jpg"; 
         Intent imagepass = new Intent(ExpensesActivity.this,ReviewReceiptImage.class);
         imagepass.putExtra("receipt", receipt);
         imagepass.putExtra("imagename", image);
         startActivityForResult(imagepass, CAMERA_CONFIRMRECEIPT); 
         Toast.makeText(this, "Receipt Image Saved", Toast.LENGTH_SHORT).show();
         }

     case CAMERA_CONFIRMRECEIPT:

         Toast.makeText(this, "Receipt Image Saved", Toast.LENGTH_SHORT).show();
         if(resultCode == CAMERA_CONFIRMRECEIPT)
         {
             take_receipt.setEnabled(false);
             take_receipt.setVisibility(View.GONE);
             show_receipt.setEnabled(true);
             show_receipt.setVisibility(View.VISIBLE);
         } 
         break;
     }
 } 
```

谢谢你们的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T09:20:15.423

我已经解决了我的问题。请在下面查看我的答案，

我终于想通/记得这个问题是因为Android将只允许嵌套的子活动层......即子活动不能嵌套子活动。要解决这个问题：

从您的子活动调用`getParent().startActivityForResult()`您的父（活动组）将能够处理 onActivityResult。所以我创建了一个ActivityGroup的子类并处理了这个onActivityResult。如果需要，您可以将该结果重新路由回子活动。只需通过 获取当前活动`getLocalActivityManager().getCurrentActivity()`。我的子活动继承自自定义活动，因此我`handleActivityResult(requestCode, resultCode, data)`在该子类中添加了一个供 ActivityGroup 调用的。

用确切的代码回答上述问题

**ActivityGroup->SubActivity->onActivityResult->ActivityGroup(onActivityResult)->subActivity(onActivityResult)**

这是 ActivityGroup 类，您必须在其中为所有子活动定义 onActivityResult，

```
@Override
public void onActivityResult(int requestCode,int resultCode, Intent data)
{

         switch(requestCode)
            {

            case CAMERA_RECEIPTREQUEST:   
            if(resultCode == Activity.RESULT_OK)
            {
            ExpensesActivity activity = (ExpensesActivity) getLocalActivityManager().getCurrentActivity();
            activity.onActivityResult(requestCode, resultCode, data);
            }
            break;

            case CAMERA_CONFIRMRECEIPT:
            ExpensesActivity activity1 = (ExpensesActivity) getLocalActivityManager().getCurrentActivity();
            activity1.onActivityResult(requestCode, resultCode, data);   
            }

        } 
```

在子活动中，您必须将视图设置如下

```
 View viewToLoad = LayoutInflater.from(this.getParent()).inflate(R.layout.enter_time, null);
    this.setContentView(viewToLoad); 
```

然后在子Activity onActivityResulty()

```
 @Override
    public void onActivityResult(int requestCode,int resultCode, Intent data)
    {
     //Some Code
    } 
```

# java - java.io.IOException：系统找不到写入文本文件的指定路径

> ID：10777156
> 
> 赞同：9
> 
> 时间：2012-05-27T20:48:10.617
> 
> 标签：java, text-files, ioexception

我正在编写一个程序，我试图在当前目录中创建一个新的文本文件，然后向它写入一个字符串。但是，在尝试创建文件时，此代码块：

```
//Create the output text file.
File outputText = new File(filePath.getParentFile() + "\\Decrypted.txt");
try
{
    outputText.createNewFile();
}
catch (IOException e)
{
    e.printStackTrace();
} 
```

给我这个错误信息：

```
java.io.IOException: The system cannot find the path specified
    at java.io.WinNTFileSystem.createFileExclusively(Native Method)
    at java.io.File.createNewFile(Unknown Source)
    at code.Crypto.decrypt(Crypto.java:55)
    at code.Crypto.main(Crypto.java:27) 
```

因此，我无法写入文件，因为它自然不存在。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T21:14:53.617

如果您已经在使用 File 类，请考虑使用它的全部潜力，而不是自己做一半的工作：

```
File outputText = new File(filePath.getParentFile(), "Decrypted.txt"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T20:52:56.130

的价值是`filePath.getParentFile()`多少？您使用什么操作系统？以独立于系统的方式加入两条路径可能是一个更好的主意，如下所示：

```
filePath.getParentFile() + File.separator + "Decrypted.txt" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T21:12:58.970

它应该被创建为 filePath 指向的文件的兄弟。

例如，如果

```
File filePath = new File("C:\\\\Test\\\\a.txt"); 
```

然后它应该在测试目录下创建。

# database - 在 WP 应用的所有页面中访问本地数据库

> ID：10777162
> 
> 赞同：1
> 
> 时间：2012-05-27T20:48:46.423
> 
> 标签：database, windows-phone-7

我正在关注[Local Database for Windows Phone](http://msdn.microsoft.com/en-us/library/hh202865%28v=vs.92%29.aspx)中的示例。从中，我学会了如何在我的应用程序中创建本地数据库并将数据提取到页面。

我现在正在寻找的不是在我的应用程序的一页而是三页中显示数据。那么，我有什么方法可以做到这一点？我可以在 app.xaml 中创建一个对象并在页面中访问它吗？

请给我建议。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:25:04.947

这些方法都归结为您对架构的看法以及您希望应用程序的可测试性。

虽然您*可以*在应用程序对象上对数据上下文进行一些引用，但您可以增加视图模型和视图之间的链接；可以说，视图模型中的任何内容都不需要了解视图中的任何内容（而且我在营地中，所有 xaml 都算作视图的一部分）。考虑到这一点，另一种方法是在您的视图模型（甚至您的模型）中包含一些静态类，它公开应用程序级对象（以一种对单元测试友好的方式，甚至可能在平台之间共享） ) 并允许您的任何视图模型访问该数据上下文并构建您的任何模型等。

# bitmap - Inno 设置：TBitmapImage 未显示

> ID：10777164
> 
> 赞同：5
> 
> 时间：2012-05-27T20:49:41.187
> 
> 标签：bitmap, inno-setup, imagebutton

我想用`TBitmapImage`类将自定义设计的按钮添加到我的 Inno Script 中。

我的 Inno Setup 脚本编译得很好，但位图没有显示在表单中。我调查了任何可能性，但似乎找不到我犯的错误。这就是`TBitmapImage`零件看起来像 atm 的样子：

```
procedure CreateMuteButton(ParentForm: TSetupForm);
var
  MuteImage: TBitmapImage;
  BitmapFileName: String;
begin
  BitmapFileName := ExpandConstant('{tmp}\muteBtn.bmp');
  ExtractTemporaryFile(ExtractFileName(BitmapFileName));
  MuteImage := TBitmapImage.Create(ParentForm);
  MuteImage.Bitmap.LoadFromFile(BitmapFileName);
  MuteImage.Cursor := crHand;
  MuteImage.OnClick := @MuteButtonOnClick;
  MuteImage.Parent := ParentForm;
  MuteImage.Left := 45;
  MuteImage.Top := 80
  MuteImage.Width := 38;
  MuteImage.Height := 50;
end;

procedure InitializeWizard();
var
  val: Integer;
begin
  CreateMuteButton(WizardForm);
  (...)
end; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T10:32:38.057

客户区本身仅在`WizardForm`底部斜线下方可见。上面是`WizardForm.InnerPage`，并且中间的个人/当前向导页面包含在私有`InnerNotebook`.

这会将图像放在页面的左侧：

```
MuteImage := TBitmapImage.Create(WizardForm.InnerPage);
MuteImage.Parent := WizardForm.InnerPage;
MuteImage.Left := 0;
{ Uses the top of the wizard pages to line up }
MuteImage.Top := WizardForm.SelectDirPage.Parent.Top; 
```

而这将其放在底部：

```
MuteImage := TBitmapImage.Create(WizardForm);
MuteImage.Parent := WizardForm;
MuteImage.Left := 0;
{ Below the inner page }
MuteImage.Top := WizardForm.InnerPage.Height; 
```

# c# - 如何插入 | 和 || C# 中的运算符？

> ID：10777166
> 
> 赞同：0
> 
> 时间：2012-05-27T20:49:59.750
> 
> 标签：c#, .net

在 VB.NET 中，我可以在键盘上快速键入 And/AndAlso。在 C# 中，我目前正在打开字符映射并手动复制“或”垂直线字符。我是否缺少允许快速插入线符号的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T20:55:17.423

它也被称为`pipe`键，在许多键盘（英国/美国）上，它是一条断开的垂直线（有些键盘是一条完整的垂直线，但我大多认为它是一条断开的）。

图片来自[这里](http://support.free-conversant.com/docs/resources)。

![管道键](../Images/834d6ef5f6f136589391573cd0b5a72a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T20:59:17.547

无论您在哪里拥有 PIPE 键，您都可以在数字键盘上键入数字 124，并按住 ALT 键

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T20:53:15.893

取决于键盘布局，但`|`/`pipe`应该在 enter 键左侧的某个位置（美国布局），或在 or 的左侧`Z`（`1`第一个正常，另一个使用 AltGr，英国布局）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T20:54:56.583

我不知道你来自哪里，但假设你有一个非英文键盘。不幸的是，C 语言（这个和其他句法元素）的起源是在考虑英语标准键盘的情况下开发的。

我知道瑞典的一些人在编码时正在切换到英文键盘布局 - 以摆脱关键 C/C# 字符（如`| { [ ] } \`. （它们都是需要`AltGr`密钥的组合。必须做一些事情来为`ÅÄÖ`都有自己的密钥的瑞典字符腾出位置。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-27T20:53:42.340

我的“管道”符号为`altGr`+`1`

# entity-framework - 实体框架和乐观并发异常的一些一般疑问

> ID：10777169
> 
> 赞同：1
> 
> 时间：2012-05-27T20:50:34.510
> 
> 标签：entity-framework, optimistic-concurrency

我对乐观并发异常有些怀疑。

好吧，例如，我从数据库中检索一些数据，修改一些寄存器，然后提交更改。如果有人在我的请求和我的更新之间更新了寄存器的信息，我会得到一个乐观的异常。经典的并发问题。

我的第一个疑问如下。EF判断信息是否改变，从数据库中检索数据，并将我获得的原始数据与从数据库中检索的数据进行比较。如果存在差异，则抛出乐观并发异常。

如果当我捕捉到乐观并发异常时，我决定是客户赢还是商店赢。在此步骤中，EF 再次检索信息还是使用第一次检索的数据？因为如果再次检索数据，将是低效的。

第二个疑惑是如何控制乐观并发异常。在 catch 代码块中，我决定是客户获胜还是商店获胜。如果客户赢了，那么我再次调用 saveChanges。但是在我决定客户端获胜和保存更改之间，其他用户可以更改数据，所以我再次得到一个乐观并发异常。理论上，它可能是一个无限循环。

使用事务（范围）来确保客户端更新数据库中的信息是个好主意吗？其他解决方案可以使用循环尝试 N 次更新数据，如果不可能，退出并告诉用户。

交易会是个好主意吗？它会消耗大量数据库资源吗？虽然事务会暂时阻塞数据库，但它确保更新操作完成。循环N次尝试完成操作，调用数据库N次，可能需要更多的资源。

谢谢。戴姆洛克。

编辑：我忘了问。是否可以将上下文设置为默认使用客户端获胜而不是等待并发异常？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T09:44:27.333

> 我的第一个疑问如下。EF 决定是否更改信息，从数据库中检索数据...

它不会从数据库中检索任何其他数据。它获取用于并发处理的实体的原始值，并在更新命令的 where 条件下使用它们。更新命令之后是选择修改的行数。如果数字为 0，则表示该记录不存在或有人更改了它。

> 第二个疑惑是如何控制乐观并发异常。

您只需调用`Refresh`and `SaveChanges`。如果需要，您可以重复几次模式。如果您有如此多的高并发应用程序，以至于多个线程争先恐后地在几秒钟内更新相同的记录，那么您很可能需要以不同的方式构建您的数据存储。

> 使用事务（范围）来确保客户端更新数据库中的信息是个好主意吗？

`SaveChanges`总是使用数据库事务。TransactionScope 不会为您增加任何额外的价值，除非您想通过多次调用使用事务`SaveChanges`、分布式事务或更改事务的隔离级别等。

> 是否可以将上下文设置为默认使用客户端获胜而不是等待并发异常？

它是默认设置的。简单地不要标记您的任何属性，`ConcurrencyMode.Fixed`您将没有并发处理 = 客户获胜。

# jquery-mobile - 在 Cordova (PhoneGap) 的 JQuery Mobile 中使用 changePage

> ID：10777172
> 
> 赞同：0
> 
> 时间：2012-05-27T20:51:13.397
> 
> 标签：jquery-mobile, cordova

我已经下载了我的 JQuery Mobile 应用程序的文件结构。我这样做是为了测试从本地文件系统运行它。原因是我希望我的应用程序与 Cordova 一起运行。据我了解，cordova 在 file:// 下运行文件。目前，我的文件结构如下所示：

```
index.html
account
  register.html
  reset.html 
```

在 index.html 中，我有一个“注册”按钮。当有人点击它时，我使用以下代码：

```
$.mobile.changePage("account/register.html", { transition: "slide" }); 
```

如果我将完整路径放在浏览器 url 中，我已经验证 register.html 可以正常工作。奇怪的是，当我单击“注册”时，我看到“错误加载页面”。在 file:// 下使用 changePage 是否有问题？如果是这样，我该如何克服？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:32:00.300

这个答案特别适用于您在 iOS 上运行 PhoneGap 应用程序时遇到问题。

确保您设置了`$.mobile.allowCrossDomainPages = true;`AJAX 调用注入页面所需的参数。

在您的 PhoneGap`app`对象定义中：

```
var app = {
    initialize: function() {
        // setting required to use $.mobile.changePage()
        // http://jquerymobile.com/demos/1.2.0/docs/pages/phonegap.html
        $.mobile.allowCrossDomainPages = true;
    },
}; 
```

因此，当您调用`app.initialize()`时`index.html`，此属性将在任何`$.mobile.changePage()`函数调用之前设置。

这将节省您尝试找出问题的时间，因为 Safari Web Inspector 不会返回任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T04:56:28.250

尝试这个

```
$.mobile.changePage("../account/register.html", { transition: "slide" }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T08:27:31.763

您可以`<a href="">..</a>`在代码中留下链接，它会正常工作。除非你有理由显式调用 changePage。

# ogre - OGRE 构建错误——“找不到 -lOgreMain_d.dll”

> ID：10777180
> 
> 赞同：1
> 
> 时间：2012-05-27T20:52:01.727
> 
> 标签：ogre

我已经按照这里的指示： [http ://www.ogre3d.org/tikiwiki/tiki-index.php?page=Setting+Up+An+Application+-+CodeBlocks](http://www.ogre3d.org/tikiwiki/tiki-index.php?page=Setting+Up+An+Application+-+CodeBlocks)

然后我得到这个错误：

```
c:/program files/codeblocks/mingw/bin/../lib/gcc/mingw32/4.4.1/../../../../mingw32/bin/ld.exe: cannot find -lOgreMain_d.dll 
```

我在我的项目文件夹中放置了 OgreMain、OIS、OgreMain_d、OIS_d。我怎样才能解决这个问题？:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T02:37:35.310

发生这种情况主要有两个原因。

*   dll 尚未编译和创建。
*   在链接器设置中，要链接的 dll 搜索路径或 dll 名称错误。

请检查是否在 OGRE bin 文件夹中创建了 OgreMain_d.dll，如果是，请确认链接器搜索设置。还要确认项目不在发布构建配置中，因为创建的 dll 将是 OgreMain.dll。

# google-maps - 街景 API 3（添加自定义小地图）关闭按钮街景和街景小人

> ID：10777185
> 
> 赞同：4
> 
> 时间：2012-05-27T20:52:41.387
> 
> 标签：google-maps, google-maps-api-3, google-street-view

在我的脚本中，当您将街景小人放到地图上时，它会加载带有自定义小地图的街景视图。您可以看到带有街景小人的小地图并将其移动到街景中，并且效果很好。

但是，当您单击街景视图上的关闭按钮时，小地图和街景视图会正常关闭，但街景小人不会返回到其默认位置。它保留在地图上，不能重新丢弃。

我想在街景关闭时将街景小人移回默认位置，如果您再次将其放在地图上以像第一次一样加载街景。

**在线代码** [http://jsbin.com/ayejim/edit#preview](http://jsbin.com/ayejim/edit#preview)

这是我的功能`initialize`：

```
 function initialize() {
var lifestyle = [{}];
  var myOptions = {
    zoom: CITY_MAP_ZOOMING_FACT,
    center: new google.maps.LatLng(CITY_MAP_CENTER_LAT, CITY_MAP_CENTER_LNG),
    mapTypeId: google.maps.MapTypeId.<?php echo $maptype;?>

  }
   map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);
   map.setOptions({styles: lifestyle});

    /////////////////////////////
    var g = google.maps;
    var pano, mini;
    var mapdiv = document.getElementById("map_canvas");

    pano = map.getStreetView();

  /** Listen to panorama's visibility changes to detect
  * when pegman is dropped onto the map
  * and when Street view is closed
  */

  g.event.addListener(pano, "visible_changed", function() {
   // Street view activated by dropping pegman
   if (!mini && pano.getVisible()) {
    // Container for mini map and close button

    var c = document.createElement("div");
    c.id = "minimap";
    c.style.visibility = "visible";

    var d = document.createElement("div");
    d.id = "closebutton";
    d.onclick = function() {
    // Toggles button icon and moves copyright notice
     var terms = document.getElementById("note");
//    var terms = mapdiv.childNodes[1].childNodes[2];
      if (c.style.visibility == "visible") {
        c.style.visibility = "hidden";
        d.className = "closed";
        terms.style.marginRight = "24px";
      }
      else {
       c.style.visibility = "visible";
       d.className = "";
       terms.style.marginRight = "170px";
      }
    };

    c.appendChild(d);
    mapdiv.appendChild(c);
    mapdiv.appendChild(d);

    mini = new g.Map(c, {
      center: pano.getPosition(),
      zoom: 15,
      mapTypeId: "roadmap",
      disableDefaultUI: true,
      streetViewControl: true,
      streetView: pano,
      styles: lifestyle

    });

    /** Moves the 'Terms' notice to the left
    * to ensure it's not covered up.
    * There are two such notices in the document.
    * Make sure to catch the right ones.
    */
    g.event.addListener(mini, "tilesloaded", function() {
     var terms = mini.getDiv().firstChild.childNodes[2];
     terms.style.marginRight = "24px";
     var sv_terms = mapdiv.childNodes[1].childNodes[2];
     sv_terms.id = "note";
     sv_terms.style.marginRight = "170px";
     sv_terms.style.zIndex = "1";
   });
    // Binds mini map's center to pano position
    mini.bindTo("center", pano, "position");

    // Street view finished by click on Street view close button
   } else if (mini instanceof g.Map && !pano.getVisible()) {
     mapdiv.removeChild(document.getElementById("minimap"));
    **//initialize(); if try call initialize again pegman back default position but map back to default position too like the first time.and markers hide , i don't know why this happens**
   }
 });
 /////////////////////////
   mgr = new MarkerManager( map );
   google.maps.event.addListener(mgr, 'loaded', function() {
      if (markers) {
         for (var level in markers) {
            google.maps.event.addDomListener( document.getElementById( level ), 'click', function() {
               setCategoryVisiblity( this.id, this.checked );
            });
            for (var i = 0; i < markers[level].length; i++) {

               var details = markers[level][i];
               var image = new google.maps.MarkerImage(details.icons,new google.maps.Size(PIN_POINT_ICON_WIDTH, PIN_POINT_ICON_HEIGHT));
               var myLatLng = new google.maps.LatLng(details.location[0], details.location[1]);
               <?php if(get_current_city_set_zooming_opt() == '1') { ?>
                 multimarkerdata[i]  = new google.maps.LatLng(details.location[0], details.location[1]);
               <?php } ?>
               markers[level][i] = new google.maps.Marker({
                  title: details.name,
                  position: myLatLng,
                  icon: image,
                  clickable: true,
                  draggable: false,
                  flat: true,
                  animation: google.maps.Animation.DROP
               });

            attachMessage(markers[level][i], details.message);
            }
            mgr.addMarkers( markers[level], 0 );
         }
          <?php if(get_current_city_set_zooming_opt() == '1') { ?>
             var latlngbounds = new google.maps.LatLngBounds();

            for ( var j = 0; j < multimarkerdata.length; j++ )
                {
                 latlngbounds.extend( multimarkerdata[ j ] );
                }
               map.fitBounds( latlngbounds );
          <?php } ?>
         mgr.refresh();
      }
   });

    // but that message is not within the marker's instance data 
    function attachMessage(marker, msg) {
      var myEventListener = google.maps.event.addListener(marker, 'click', function() {
      if (pano.getVisible()) { 
        infowindow.open(pano, marker); 
      } else { 
      infowindow = new google.maps.InfoWindow(
          { content: String(msg) 
          });
        infowindow.open(map, marker); 
      } 
         if (infowindow) infowindow.close();
        infowindow = new google.maps.InfoWindow(
          { content: String(msg) 
          });
         infowindow.open(map,marker);
      });
    }

}

google.maps.event.addDomListener(window, 'load', initialize); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T04:08:47.567

不完全确定为什么当前代码不起作用，但我对您在当前代码中采用的方法也有点怀疑。为什么不为全景图（街景）制作一个单独的 div 并对 map_canvas div 做一些样式以复制您当前的方法（而不是使用小地图 div）。我已经在这个 jsfiddle（[http://jsfiddle.net/svigna/FnrbX/embedded/result/](http://jsfiddle.net/svigna/FnrbX/embedded/result/)和[http://jsfiddle.net/svigna/FnrbX/](http://jsfiddle.net/svigna/FnrbX/)源代码）中创建了一个基础，您可以查看并可能用作解决方案的基础。

请允许我向您介绍我的代码 - 稍微研究一下 streetView 类属性和 jquery，我相信您的问题可以解决。

```
<body onload="initialize()"> 
  <div id="container">
  <div id="map_canvas" class="bigmap"></div>
  <div id="pano" class="bigmap" style="display:none"></div>
</div> 
```

首先，在标记中，我们要为地图声明一个 div，为全景图声明一个 div，这将绑定到地图。我们在一个容器中声明它以用于样式目的（当我们想要将地图重叠在全景图上时）。请注意，全景图的样式最初设置为，`display:none`否则您将看到一个灰色区域（这是没有任何位置数据的全景图，因为没有设置街景小人）。

```
#container {
  width: 940px;
  height: 640px;
  position: relative;
}
#map_canvas, 
#pano {
  position: absolute;
  top: 0;
  left: 0;
}
#map_canvas {
  z-index: 10;
}
.bigmap{
  width:100%;
  height:100%;
}

.minimap{
  width:480px;
  height:320px;
} 
```

这里的样式设置基本上是为了让 map_canvas div 在 pegman 被放下时重叠在 pano div 上。我将此解决方案中的概念用于 div 重叠（[如何将一个 div 覆盖在另一个 div 上](https://stackoverflow.com/questions/2941189/how-to-overlay-one-div-over-another-div)）。.minimap 和 .bigmap 类可以轻松地将 map_canvas 从一个视图切换到另一个视图，这在下面的 javascript 部分中会更有意义。

```
function initialize() {
  var fenway = new google.maps.LatLng(42.345573,-71.098326);
  var panoramaOptions = {
    enableCloseButton : true,
    visible: false
  };
  var panorama = new  google.maps.StreetViewPanorama(document.getElementById("pano"), panoramaOptions);
  var mapOptions = {
    center: fenway,
    zoom: 14,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    streetView : panorama
  };
  var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions); 
```

到目前为止，我们在 javascript 中初始化了所有地图内容。这是非常不言自明的，要查看此处设置的属性，请查看 google maps api v3 参考 - 我发现它非常有用。

```
 google.maps.event.addListener(panorama, "visible_changed", function() {
    if (panorama.getVisible() && $("#pano").is(':visible')){
        //moving the pegman around the map
    }else if(panorama.getVisible() && $("#pano").is(':hidden')){
        $("#pano").show();          
        $("#map_canvas").removeClass('bigmap');
        $("#map_canvas").addClass('minimap');
    }
    google.maps.event.addListener(panorama, "closeclick", function() {
        $("#pano").hide();  
        $("#map_canvas").removeClass('minimap');
        $("#map_canvas").addClass('bigmap');        
    });
  });        
} 
```

注意：事件监听器仍然在 initialize() 函数中声明。但本质上，我们会监听全景可见性的变化，但仅凭这一点还不足以确定 pano div 元素中是否存在实际数据。请记住，当我们将 pano div display 设置为 none 时，我们可以使用 jquery 来检查可见性。如果它是可见的，这意味着它不是街景小人的初始下降 - 如果它是隐藏的，那么这就是我们将 map_canvas 的类更改为小地图的地方。另请注意，我们在“visible_changed”侦听器中侦听 closeclick。这是因为 visible_changed 还包括 closeclick 操作，因此通过将其放入其中，我们将侦听器绑定到另一个。一旦触发 closeclick，我们隐藏 pano div 并将 map_canvas 更改回正常大小。

这种方法的好处是streetView 上的本机“closeclick”操作从它设置的地图中删除了街景小人并将其恢复正常（这是您在问题中想要的）。此外，要回到原来的位置，您只需`map.panTo()`在“closeclick”事件侦听器上执行一个到初始位置的操作。

我希望这就是您要找的东西，如果距离太远，我深表歉意！我知道它本质上是要求您重新设计当前的代码结构 - 但只是认为这种方法要简单得多，并且似乎可以做您想做的事情。

# ruby-on-rails - 带有haml和sprites的三元运算符

> ID：10777187
> 
> 赞同：2
> 
> 时间：2012-05-27T20:52:47.910
> 
> 标签：ruby-on-rails, haml, ternary-operator

你怎么能在 Haml 中用三元运算符做到这一点？

```
 %td
        - if list.active 
          %i.icon-ok 
        - else
          %i.icon-remove 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T21:09:02.363

红宝石 1.9

```
%td
  %i{class: list.active ? 'icon-ok' : 'icon-remove'} 
```

红宝石 1.8

```
%td
  %i{:class => list.active ? 'icon-ok' : 'icon-remove'} 
```

# javascript - 如何在网页中显示模态对话框？

> ID：10777191
> 
> 赞同：0
> 
> 时间：2012-05-27T20:53:06.303
> 
> 标签：javascript, html, css, ajax, popup

所以，我正在开发第一个*严肃*的网站。我想实现以下场景，但我需要指导和建议。`<input type="submit">`我的网页上有一个按钮。当用户单击它时，我希望它打开一些 HTML 内容，这些内容将显示在所有页面内容的顶部（并位于中心，但我现在不关心那个细节）。它应该与在 Facebook 上查看照片的方式非常相似。当用户单击照片缩略图时，照片会在所有页面内容的顶部打开。

现在，我已经实现了这一点，但我认为我的方法不值得推荐，因为它看起来有点笨拙，尤其是当我考虑网站的维护时：
我在 ; 中添加了 a`<div>`作为最后一个元素`<body>`。它被绝对定位并折叠并用作容器。单击按钮时，该按钮将`<div>`被内容填充，并且状态从折叠变为可见。

如果有人愿意分享用于实现此效果的*标准方法和意见，我将不胜感激。*我猜测应该大量使用 AJAX 和 jQuery（我在前面描述的设计中使用了纯 JavaScript）。我正在寻找一些代码示例和资源。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T21:01:55.487

您正在寻找的是*模式对话框*而不是弹出窗口。弹出窗口是新窗口，而模态框是 HTML 元素，它们会阻止其后面的页面以强调转发内容。

一种方法是`<div>`附加到正文，通常附加到正文的末尾并使其绝对定位。该 div 将具有顶部、底部、左侧和右侧零以拉伸以适合视口。在该 div 中是另一个 div，它也相对于父级、视口拟合 div 定位为绝对值。定位取决于您，但通常使用公式居中：

```
center = (total length - modal length)/2 
```

内容由您决定。您可以将内容加载并隐藏在 DOM 中，稍后再显示。如果您愿意，也可以通过 AJAX 加载内容。

jQuery在 jQueryUI 套件中[已经有一个模态插件，您可以使用它包含许多添加和自定义的方法。](http://jqueryui.com/demos/dialog/#modal)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T20:59:38.000

有很多方法。您可以使用 jQuery UI (http://jqueryui.com)。但我喜欢 Twitter 的 Bootstrap 采用的方法：http: [//twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)

这是一个非常干净的设置，您可以通过 AJAX 加载内容，并带有一点自写功能。您不需要自己编写所有内容，因为那里有很多插件。bootstrap modal 插件是独立的，所以你可以使用这个。

我喜欢使用它并通过 AJAX 请求生成内容 div。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T21:02:41.693

您可以`position: absolute;`弹出框并将其设置在屏幕上您想要的位置。然后用`z-index`它来覆盖内容。

这是一个演示：http: [//jsfiddle.net/e6BEu/](http://jsfiddle.net/e6BEu/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T21:04:12.313

我相信您正在寻找的可能是[Lightbox](http://lokeshdhakar.com/projects/lightbox2/)之类的？它至少可以给你一些想法。

编辑：或者[这个支持文本等](http://www.gregphoto.net/lightbox/)的。

# java - Hibernate 标准 JOIN + 附加条件（with 子句）不适用于多对多关联

> ID：10777200
> 
> 赞同：4
> 
> 时间：2012-05-27T20:54:36.393
> 
> 标签：java, hibernate, criteria

我正在尝试使用休眠条件向 Join 子句添加附加条件。事实上，有一些方法可以做到这一点：

```
createCriteria(String associationPath, String alias, int joinType, Criterion withClause) 
```

和

```
createAlias(String associationPath, String alias, int joinType, Criterion withClause) 
```

它们在一对一和一对多的关系中正常工作。但是，当我尝试将它们与具有多对多关系的实体一起使用时，出现以下错误：

```
Caused by: org.postgresql.util.PSQLException: No value specified for parameter 1. 
```

有谁能够帮我？粗鲁的例子如下：

```
@Entity
public class Person {

@Id
@GeneratedValue
private Long id;

@ManyToMany
private Set<PersonName> names;

}

public class PersonName {

@Id
@GeneratedValue
private Long id;

@Column
private String name;

}
public class PersonDao extends HibernateDaoSupport {

public List<Person> findByName() {
    Criteria criteria = getSession().createCriteria(Person.class, "p");
    criteria.createCriteria("p.names", "names", JoinType.INNER_JOIN, Restrictions.eq("name", "John"));
    return criteria.list();
}
} 
```

正在生成的查询是

```
select this_.id as y0_ from person this_ 
    inner join debtor_info this_1_ on this_.id=this_1_.id 
    left outer join person_person_name personname3_ on this_.id=personname3_.person_id and ( name1_.name=? ) 
    left outer join person_name name1_ on personname3_.person_name_id=name1_.id and ( name1_.name=? ) 
```

如您所见，加入条件被添加了两次，显然是不正确的

提前致谢。

顺便说一句，我正在使用 postgresql 9，Hibernate 3.6.3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-24T16:53:54.883

这是一个错误[HHH-7355 Hibernate 标准 JOIN + 附加条件（with 子句）不适用于多对多关联](https://hibernate.atlassian.net/browse/HHH-7355)，并且不会修复，因为不推荐使用 Hibernate Criteria API，您应该使用 JPA Criterias。您可以尝试使用 HQL[`with`子句](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html)

```
from Cat as cat
left join cat.kittens as kitten
    with kitten.bodyWeight > 10.0 
```

# aptana - 向 Aptana 添加新软件

> ID：10777208
> 
> 赞同：0
> 
> 时间：2012-05-27T20:55:35.880
> 
> 标签：aptana

我正在使用类似于 (Eclipse) 的 Aptana IDE 我想使用 Help > install new software 安装新插件并添加以下链接

[http://www.spket.com/update/](http://www.spket.com/update/)

它查看以下错误：

联系软件站点时遇到问题[http://www.spket.com/update/上未找到存储库](http://www.spket.com/update/)

有什么问题>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T21:04:23.410

Here is the solution to my question

[http://drfits.com/2011/11/13/eclipse-contacting-software-sites-has-encountered-a-problem/](http://drfits.com/2011/11/13/eclipse-contacting-software-sites-has-encountered-a-problem/)

# azure - 保护在 azure 中运行的测试/beta 站点

> ID：10777210
> 
> 赞同：2
> 
> 时间：2012-05-27T20:55:51.697
> 
> 标签：azure

我们正在开发一个在 azure 中运行的新网站。我们目前正在针对本地 azure dev 环境进行开发。但现在我们需要在真实的 Azure 世界中发布和测试该站点。但是我们想在一个“封闭”的环境中运行，只有知道用户可以访问，因为该站点还没有上线。有什么建议可以做到这一点吗？

/拉斯穆斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:55:35.183

您可以删除实例配置的端点，因此不会通过负载均衡器进行转发。之后，您可以使用远程桌面登录到您的 azure 实例并测试您的 Web 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T20:58:16.783

Windows Azure 有一种叫做“暂存模式”的东西，请参阅这篇文章：[http ://sevans.info/2010/10/10/windows-azure-staging-model/](http://sevans.info/2010/10/10/windows-azure-staging-model/)

它非常强大，据我所知正是您所需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T01:08:14.253

上面的建议很棒，我还想在这个列表中再添加两个：

1.  使用生产部署并具有禁用目录浏览的虚拟索引/默认页面（已设置为默认值）因此，当有人来到您的站点时，他们将看不到任何内容。并且由于没有目录浏览，所以他们无法猜测页面*.aspx 来访问您的站点。这将使您的生产站点保持运行，您可以从外部对其进行测试。

2.  从负载均衡器中删除您的实例，同时保持您的实例健康。这将要求您通过 RDP 对您的实例测试 Azure 应用程序，然后在内部启动。如果你想这样做，这里是[基于 Powershell 的技巧。](http://blogs.msdn.com/b/avkashchauhan/archive/2012/01/27/windows-azure-troubleshooting-taking-specific-windows-azure-instance-offline.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-29T03:38:38.083

如果您有静态 IP 地址，您可以限制允许访问您的应用程序的 IP 地址。根据此链接：[https ://azure.microsoft.com/en-us/blog/ip-and-domain-restrictions-for-windows-azure-web-sites/](https://azure.microsoft.com/en-us/blog/ip-and-domain-restrictions-for-windows-azure-web-sites/)

开发人员可以使用 IP 和域限制来控制允许或拒绝访问其网站的 IP 地址集和地址范围。借助 Windows Azure 网站，开发人员可以使用其网站中的 web.config 文件启用/禁用该功能，并自定义其行为。

这是代码：

```
<system.webServer>
  <security>
    <ipSecurity allowUnlisted="false" denyAction="NotFound">
      <add allowed="true" ipAddress="123.456.0.0" subnetMask="255.255.0.0"/>
    </ipSecurity>
  </security>
</system.webServer> 
```

# ruby - mime body guess charset（并转换为 UTF-8）

> ID：10777212
> 
> 赞同：1
> 
> 时间：2012-05-27T20:55:57.377
> 
> 标签：ruby, utf-8, mime, quoted-printable

我正在尝试解析传入的电子邮件并希望将正文作为`UTF-8`编码字符串存储在数据库中，但是我很快注意到并非所有电子邮件都在`Content-Type`标题中发送字符集信息。在尝试了一些手动快速修复后`String.force_encoding`，`String.encode`我决定询问 SO 的友好人士。

老实说，我暗中希望`String.encoding`自动返回字符串中使用的编码，但是它总是`ASCII-8BIT`在我向它发送测试电子邮件后出现。当我作为一个选项实施时，我开始遇到这个问题，`quoted-printable`如果我也得到了一些`;charset=blabla`信息，这似乎可以工作。

```
input = input.gsub(/\r\n/, "\n").unpack("M*").first
if( charset )
  return input.force_encoding(charset).encode("utf-8")
end

# This is obviously wrong as the string is not always ISO-8859-1 encoded:
return input.force_encoding("ISO-8859-1").encode("utf-8") 
```

我一直在尝试我在互联网上找到的几种“解决方案”，但大多数似乎与文件读/写有关，并尝试了一些用于检测编码的 gem（但似乎没有一个真正能奏效或非常过时） . 这应该是可能的，感觉好像答案就在我眼前，希望这里的某个人能够对我的情况有所了解，并告诉我我做错了什么。

*   *使用红宝石 1.9.3*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:54:14.313

您可以使用[https://github.com/janx/chardet](https://github.com/janx/chardet)来检测您的电子邮件文本的原始编码。

这里的例子：

```
irb(main):001:0> require 'rubygems'
=> true
irb(main):002:0> require 'UniversalDetector'
=> false
irb(main):003:0> p UniversalDetector::chardet('hello')
{"encoding"=>"ascii", "confidence"=>1.0}
=> nil 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T19:12:24.640

你试过[**https://github.com/fac/cmess**](https://github.com/fac/cmess)吗？

> == 描述
> 
> CMess 在其底层捆绑了几个工具，旨在处理在字符集和编码的上下文中出现的各种问题。目前，有：
> 
> **guess_encoding::** 识别给定字符串编码的简单助手。包括自动检测输入编码的能力。
> 
> [...]

# delphi - TToolBar：如何摆脱竖线？

> ID：10777219
> 
> 赞同：1
> 
> 时间：2012-05-27T20:56:41.457
> 
> 标签：delphi, toolbar, delphi-xe

当我有一个 TToolbar 并在其上放置非工具按钮控件时，控件中有一个多余的垂直条。我怎样才能摆脱酒吧？

在下图中，工具栏只包含两个工具按钮和一个 TLabel，没有分隔符。注意穿过字母 V 的竖线。

![在此处输入图像描述](../Images/d683f6c5d755b1ed3a0a6fa2b4ebea6b.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T21:34:43.423

如果我没记错的话，这是由于放置在 TToolBar 中的其他非 TToolButton 控件的透明度句柄，因此，如果您将 TLabel 的“透明”属性设置为 false，则垂直条将消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T07:19:45.490

您可能想尝试 JVCL 组件套件（免费）[Delphi Jedi](http://www.delphi-jedi.org/)。它有很多视觉组件，包括各种面板和按钮。他们还具有渐变色面板和图像按钮，例如。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-31T08:26:33.673

Delphi XE2 Hot Update 4，仍然有这个错误，我通过以下方式解决这个错误：

1.  设置 TLabel.Autosize := False;
2.  TLabel.width := 50; --> 只要确保它比它的标题多，至少 10 像素
3.  TLabel.Alignment := taRightJustify

谢谢。

# linux - SSI 和 lighttpd

> ID：10777225
> 
> 赞同：0
> 
> 时间：2012-05-27T20:57:22.460
> 
> 标签：linux, ubuntu, lighttpd, ssi, mod-include

我在我的 Ubuntu 12.04 localhost 上使用 lighttpd 1.4.28，但我无法让它支持 SSI。测试页面中的 SSI 指令：

```
<!--#set var="ssi_ok" value="SSI OK" -->
<!--#echo var="ssi_ok" --> 
```

不起作用并在源代码视图中显示为注释。我听说在 'mod_compress' 之前必须包含 'mod_ssi' 的错误，所以我的模块部分是这样的：

```
server.modules = (
        "mod_access",
        "mod_alias",
        "mod_ssi",
        "mod_compress",
        "mod_redirect",
#       "mod_rewrite",
) 
```

我应该怎么做才能使 SSI 工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T16:51:07.320

好吧，事实证明问题出在文件权限上。据我所知，正确的包含顺序是必要的，但最后它只在我将所有 html 内容都添加到“www-data”时才起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-14T21:34:06.420

也许，您也应该将此行添加到[lighttpd 配置](http://redmine.lighttpd.net/projects/lighttpd/wiki/Docs_ModSSI)文件中：

```
ssi.extension = ( ".shtml" ) 
```

# macos - Mac 的开源文本编辑器

> ID：10777229
> 
> 赞同：0
> 
> 时间：2012-05-27T20:57:54.130
> 
> 标签：macos, open-source, editor

有人知道任何适用于 Mac 的实时开源文本编程（主要是 html/css）编辑器吗？似乎没有。

[Kod](https://github.com/rsms/kod) - 死
[Fraise](https://github.com/jfmoy/Fraise) - 死
Smultron - 不再开源
Coda - 不再开源

我想用 CSS 实时预览选项卡来扩展它，但为了做到这一点，它必须是开源的，而且我更喜欢在一个有一定视角的项目上工作。现在一切似乎都在 Mac App Store 上... :\

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T20:07:30.833

TextMate 2 现在在 github 上开源。 [https://github.com/textmate/textmate#readme](https://github.com/textmate/textmate#readme)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T00:07:40.640

老实说，学习 Vim。一开始你会花一些时间，但你不会后悔的。

# joomla - 从插件中使用 sh404SEF 路由器

> ID：10777235
> 
> 赞同：1
> 
> 时间：2012-05-27T20:58:38.513
> 
> 标签：joomla, joomla-extensions, joomla1.7, joomla2.5

我正在开发一个 Joomla 2.5 内容插件，需要在保存文章时以编程方式创建 SEF url。

当常规的 Joomla SEF 被激活时，我已经成功地完成了这项工作。我的插件使用的是常规的 Joomla JRoute::_(); 建立一个 SEF URL。这适用于原生 Joomla。例如网址

```
http://localhost/index.php?option=com_content&view=article&id=123 
```

被翻译成

```
http://localhost/index.php/mycategory/article-title-123.html 
```

我的代码如下所示：

```
private function joomlaSefUrl($article){
        require_once(JPATH_SITE.DS.'components'.DS.'com_content'.DS.'helpers'.DS.'route.php');
        $siteURL = substr(JURI::root(), 0, -1);
        if(JPATH_BASE == JPATH_ADMINISTRATOR) {
            // In the back end we need to set the application to the site app instead
            JFactory::$application = JApplication::getInstance('site');
        }
        $articleRoute = JRoute::_( ContentHelperRoute::getArticleRoute($article->id, $article->catid) );
        $sefURI = str_replace(JURI::base(true), '', $articleRoute);
        if(JPATH_BASE == JPATH_ADMINISTRATOR) {
            $siteURL = str_replace($siteURL.DS.'administrator', '', $siteURL);
            JFactory::$application = JApplication::getInstance('administrator');
        }
        $sefURL = $siteURL.$sefURI;
        return $sefURL;
    } 
```

问题是，当安装像 sh404SEF 这样的第三方扩展时，我使用 JRoute::_() 方法获得的 SEF URL 仍然是常规的 Joomla 路由 URL：

```
http://localhost/index.php/mycategory/article-123.html 
```

而不是预期的 sh404SEF 的 url

```
http://localhost/Mycategory/article-title.html 
```

Joomla 没有看到安装了 sh404SEF，所以通过使用 JRoute:: *()，我总是得到常规的 SEF Joomla url。所以我需要找到一种方法来*直接从我的插件中使用 sh404SEF JRoute:: () 类，而不是常规的 Joomla 路由器类。

有谁知道 sh404SEF 类是如何工作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T21:25:40.250

与 Joomla！要摆脱`index.php`URL 部分，您需要`mod_rewrite`在全局首选项中打开并启用`.htaccess`基本安装附带的文件。（当您第一次安装 Joomla! 时，它被称为`htaccess.txt`复制并将副本重命名为`.htaccess`

有关更完整的信息，请阅读[有关 SEF URL 的 Joomla 文档](http://docs.joomla.org/Search_Engine_Friendly_URLs)。

您可以尝试查看[JED 上的 sh404SEF 插件的来源](http://extensions.joomla.org/extensions/extension-specific/sh404sef-extensions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-27T16:23:26.700

在文件中使用函数 getSefFromNonSef

> 管理员\组件\com_sh404sef\helpers\general.php

例子：

```
$url = 'index.php?option=com_content&view=article&id=1:aaaaaaaaa&catid=2&Itemid=101'
$sef_url = Sh404sefHelperGeneral::getSefFromNonSef($url, true, false, null); 
```

记住，非 sef url，以 index.php 开头？...

# emacs - .emacs.d 和 site-lisp 目录

> ID：10777239
> 
> 赞同：5
> 
> 时间：2012-05-27T20:59:22.537
> 
> 标签：emacs, elisp

我有以下两个关于emacs的问题

1.  在我的 .emacs.d 目录中有一个名为 auto-save-list 的空目录。那是做什么用的 ？

2.  我在我放置 .el 文件的 linux 机器上的主目录中创建了一个 elisp 目录。在我的 .emacs`(add-to-list 'load-path "~/elisp")` 现在，我听说过 .emacs.d/site-lisp 目录。我对 site-lisp 和我自己的 elisp 目录之间的区别感到困惑。有人可以解释一下。

谢谢你

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-27T21:28:07.987

你可以在`auto-save-list`这里阅读：

`C-h``i``g` `(emacs) Recover` `RET`

> Emacs 在 `~/.emacs.d/auto-save-list/' 目录中名为 `.saves-PID-HOSTNAME' 的文件中记录有关中断会话的信息，以便以后恢复。该目录由变量“auto-save-list-file-prefix”确定。如果将 `auto-save-list-file-prefix' 设置为 `nil'，则不会记录会话以进行恢复。

你可能会有点困惑`site-lisp`——唯一的标准目录不打算存在于用户的主目录下（通常它存在于`/usr/local/share/emacs/site-lisp`），唯一特别的是 Emacs 将`load-path`默认将其包含在列表中.

顾名思义，其意图是将给定机器上的*所有*用户都可以使用的库放置在该目录中。

相比之下，`~/elisp`您创建的目录对其他人不可用。

在这里阅读更多：

`C-h``i``g` `(emacs) Init File` `RET`

# opencv - 使用什么方法（在 OpenCV 中）将标记与适当的骨骼结构相关联？

> ID：10777241
> 
> 赞同：1
> 
> 时间：2012-05-27T20:59:51.003
> 
> 标签：opencv, marker, capture, motion

我正在尝试使用 Opencv 库编写一个 C++ 程序，该程序将从放置在人体模型上的相应 2d 标记重建 3d 点。

但我有一个问题。商业动作捕捉（动作捕捉）行业如何确定哪些标记属于哪个骨骼结构？

我最后一个问题的意思是：假设在左上臂上放置了三个标记。他们使用什么方法将这三个标记与左上臂逐帧关联起来？

因为它可能属于右上臂，也可能属于任何骨骼，如前胸、股骨等。

那么他们实施什么过程来区分标记并将正确的标记放置到适当的骨骼结构上呢？

他们是否使用光流、SIFT 来跟踪标记，在第 1 帧中，标记被标记为正确的骨骼？但是即使动捕行业使用这种方法，这两种方法不是很耗时吗？我在you-tube上看到了一个视频。他们在那里实时关联和重建标记。

是否可以告诉我商业mocap行业遵循什么程序来对应骨架结构的各个部分？

毕竟您需要这样做，因为您必须在 .bvh 文件中编写骨骼的 xRot、yRot 和 zRot（围绕 xyz 轴旋转），以便您可以在 3d 中查看 2d 运动。

那么秘诀是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:45:36.760

对于具有标记的运动捕捉或跟踪对象，一般要走的路是在两帧之间跟踪标记本身并跟踪标记之间的距离。此信息的组合用于确定标记是否与前一帧中标记附近的标记相同。

此外，这些系统通常使用多个相机并具有标定对象，其中标记的位置已知并且可以确定相机之间的相关性。在这些商业动作捕捉解决方案中，执行此检测的算法非常先进。

# iphone - NSPredicate 复合在关系中使用 NOT

> ID：10777242
> 
> 赞同：0
> 
> 时间：2012-05-27T20:59:59.710
> 
> 标签：iphone, ios, cocoa, nspredicate

我有以下谓词没有按预期工作：

```
isHistoric == 0 AND (NOT ANY singleToMany.name ==[cd] "searchword") 
```

我期望在其 singleToMany 关系中具有 .name 的“searchword”的任何对象都不会出现在结果中......但它们会出现。

如果我将其翻转并删除 NOT - 我只返回一个我不想使用 NOT 的结果！[如果这有意义] 意思：

```
isHistoric == 0 AND (ANY singleToMany.name ==[cd] "searchword") 
```

返回我不想出现在第一个谓词示例中的一个结果。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T05:54:15.817

尝试：

```
isHistoric == 0 AND (NONE singleToMany.name ==[cd] "searchword") 
```

文档说这`NONE`相当于`NOT (ANY ...)`. 注意括号的位置。所以，上面应该等价于：

```
isHistoric == 0 AND NOT (ANY singleToMany.name ==[cd] "searchword") 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-27T21:26:01.033

```
isHistoric == 0 AND singleToMany.name NOT LIKE [cd] "searchword" 
```

# ios - 在没有符号的设备上调试 iOS 应用程序

> ID：10777244
> 
> 赞同：32
> 
> 时间：2012-05-27T21:00:11.553
> 
> 标签：ios, xcode, delphi, lldb

我需要在实际设备上调试 ios 应用程序的启动...启动是指当操作系统将控制权交给应用程序时执行的*第一条指令。*不是“主要”。此外，此应用程序没有任何符号（即调试信息不​​可用.. 尚未）。我不在乎是否必须在 CPU 指令级别进行调试。我知道该怎么做（做了 30 多年）。我希望调试器在控制权即将转移到应用程序时*停止。*当我使用 Attach|by Name 命令并运行时，它只会显示“已完成运行”。

哦，这个应用程序*不是在 XCode 中构建的*。但是，它*是*我构建、签名和配置并移动到设备的应用程序。该应用程序确实运行，因为我可以看到控制台输出。以防万一你认为我是一些试图调试某人应用程序的黑客。

这么高的订单怎么样？我敢打赌没有人能回答这个问题......我无法找到任何关于如何使用 XCode 构建的项目来做到这一点的信息。我想知道苹果霸主是否根本不可能或“允许”？

你说什么，堆栈溢出之神？

更新：我应该澄清一些事情。此应用程序*不是*使用任何商用或开源工具构建的。我与创建编译器、框架和 IDE 的工具供应商合作。IOW，你不能得到这个工具......但是。在引导新工具链的过程中，必须定期进行一些非常低级的原始调试。特别是如果工具生成的代码中存在错误。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-28T23:50:54.210

我要回答我自己的问题，因为我想我偶然发现了一个解决方案。如果有人有比这更优雅和简单的东西，也请回答。进入步骤：

从原始的整体 iOS 可执行文件开始（不是捆绑的 .app，而是作为机器代码的实际二进制 mach-o 文件）。

1.  创建一个新的同名空 Xcode 项目。在设备上构建并运行它。
2.  找到输出包的 .app 文件夹。
3.  将上述原始 iOS 可执行文件复制到 .app 包文件夹中的现有可执行文件上。
4.  该应用程序现在将具有无效签名，无法部署和运行。
5.  对应用程序包运行 codesign（您可以通过在上述 Xcode 项目上运行 xcodebuild 来找到命令行）。
6.  在包的 .app 文件夹中，对二进制映像运行 otool -h -l。找到 LC_UNIXTHREAD 加载命令并找到与“pc”寄存器关联的值。这是操作系统加载程序将跳转到您的应用程序的地址。如果这个地址是奇数，那么这些是 Thumb 指令，否则它将是 ARM（我认为这就是它的工作原理）。
7.  添加一个符号断点（我使用 GDB 而不是 LLDB）并输入地址为 '*0x00001234' 作为符号。
8.  选择产品|执行操作|运行而不构建。

假设 GDB 能够计算断点表达式并设置断点，并且您选择了 Product|Debug Workflow|Show Disassembly When Debugging，该进程应该在应用程序中执行的第一条指令处中断。

您现在可以单步执行指令并使用 GDB 控制台获取/设置寄存器值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T21:13:18.003

您的问题没有意义 - main 是应用程序的入口点。这是应该遇到的第一个代码，除非您可能已经为某些类重写了 initialize() （但即便如此，我认为 main 会在运行时之前被命中）。

我认为您在启动时看到了某种奇怪的错误，并且您认为您想在入口处设置一个断点来捕获它，但更有可能帮助您的是在启动时描述问题并让 4000 人中的一个已经看到并修复了相同的崩溃可以帮助您...

但是，如果您真的想使用 GDB 在没有符号的应用程序上中断（但是您从 XCode 启动），您可以按照以下方式在程序集地址上中断 GDB：

[如何在gdb中的给定地址中断汇编指令？](https://stackoverflow.com/questions/5459581/how-to-break-on-assembly-in-gdb)

要查找 main （或其他方法）的地址，您可以使用 tool 或 atos，此问题中的一些示例：

[将 iOS 崩溃转储中的偏移量匹配到反汇编的二进制文件](https://stackoverflow.com/questions/10578155/matching-up-offsets-in-ios-crash-dump-to-disassembled-binary)

添加：

如果由于某种原因 XCode 无法启动您的应用程序进行调试，您还可以越狱并在设备本身上安装 GDB，这将完全控制调试。如果 XCode 可以启动您的应用程序，我认为没有理由在任意内存地址处中断不会给您寻求的能力......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T16:53:00.877

具有 webviews 的应用程序的一种解决方案是在 iOS 模拟器中运行它们，并使用 macOS Safari 中的远程调试器连接到该模拟器。这是题外话，但也许其中一个或另一个可能会受益。

[http://hiediutley.com/2011/11/22/debugging-ios-apps-using-safari-web-inspector/](http://hiediutley.com/2011/11/22/debugging-ios-apps-using-safari-web-inspector/)

或者使用适用于 iOS 的 NetCat...不是最完美的解决方案，但至少您可以看到发生了什么。

# javascript - 在 <% 标签内交织 EJS 和 Javascript 变量

> ID：10777246
> 
> 赞同：20
> 
> 时间：2012-05-27T21:00:36.000
> 
> 标签：javascript, node.js, express, ejs

我需要在一些 EJS 代码中使用 Javascript 变量（在前端定义），如下：

```
var selected = 1;
<% for (var i=0; i < supplies.length; i++) { %>
    if (i == selected) {
        console.log(supplies);    
    }
<% } %> 
```

我正在使用 EJS、Express.js 和 socket.io。我可以通过向我的 Node.js 服务器实例发送消息来将 Javascript 变量转换为 EJS 变量，但这有点愚蠢……有没有办法在 EJS 中使用 Javascript 变量？

编辑：我想在用户从下拉菜单中选择一个项目后访问耗材，一个 javascript 数组。当他选择此项时，上面代码的javascript函数需要访问一些EJS。这就是为什么我需要在 EJS 中使用普通的 Javascript 变量。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-05-27T23:56:17.073

**我可以将 JavaScript 变量传递给模板吗？**：

可以在模板中获取更多数据并重新呈现它，但不是以您想的方式，并且无需向服务器发出另一个请求（除非它是获取更多数据，而不是获取更多 HTML）。

## **解决方案：**

如果没有更多细节，这个问题将很难回答，所以我将对*为什么*要将选定的值传递到 EJS 模板做一些假设。我会尽我所能用关于你目标的有限信息来回答这个问题。

您的用户似乎正在页面上执行一些操作，例如选择清洁用品，并且您希望根据用户选择的元素以不同的方式呈现数据。为此，您可以重新渲染模板并传入标识选定元素的数据，使用视图助手将特定类应用于选定元素：

这是修改后的 clean.ejs 模板，使用视图助手添加了类：

**清洁.ejs：**

```
<script>
// NOTE: even if uncommented, JavaScript inside a template will not run.
//    var selected = 1;
</script>
<h1><%= title %></h1>
<ul>
    <% for(var i=0; i<supplies.length; i++) { %>

        <li>
            <!-- apply a class to the selected element -->
            <a class='<%= supplies[i].selected %>' href='supplies/<%= supplies[i].value %>'>
                <%= supplies[i].value %>
            </a>
        </li>
    <% } %>
</ul> 
```

**呈现的 HTML 如下所示：**

```
<script>
    /** NOTE: Script blocks will not fire in rendered templates. They are ignored
    //    var selected = 1;
</script>
<h1>Cleaning Supplies</h1>
<ul>

        <li>
            <a class="" href="supplies/Broom">
                Broom
            </a>
        </li>

        <li>
            <!-- Note the selected element -->
            <a class="selected" href="supplies/mop">
                mop
            </a>
        </li>

        <li>
            <a class="" href="supplies/Hammer">
                Hammer
            </a>
        </li>

</ul> 
```

**此视图是使用以下 JavaScript 代码呈现的：**

```
// modified data structure so that array of supplies contains objects
 // with the name of the item and whether or not it's selected.
data = {
    "title":"Cleaning Supplies",
    "supplies":[
        {
            "value":"Broom",
            "selected":""
        },
        {
            "value":"mop",
            "selected":"selected"
        },
        {
            "value":"Hammer",
            "selected":""
        }
    ]
};

// pass data into template and render
var html = new EJS({url: 'cleaning.ejs'}).render(data);

// add HTML to the DOM using a <div id="container"></div> wrapper.
document.getElementById("container").innerHTML = html; 
```

如您所见，supplies[i].selected 将选定的类应用于在数据结构中标记为选定的元素。我修改了 href 值，以便它访问第 i 个数组项中的对象，而不是数组本身的值。

现在，当修改所选项目时，我们只需修改数据变量，重新渲染EJS模板，并将其添加到DOM。

在 HTML 文档的头部使用此 CSS，您将看到类似于下面显示的内容：

```
<style>
    .selected { color:red; }
</style> 
```

![红色选定元素的演示](../Images/362cf1bf9b91b8d4a84beb359d5bbaf1.png)

* * *

## **为什么模板中的 JavaScript 不运行：**

您尝试用于操作 JavaScript 值或在 EJS 模板中使用 JavaScript 值的方法将不起作用。这主要与JavaScript 执行*时的上下文有关。*

您认为 EJS 模板是在客户端编译的，这是对的。但是，视图助手中的 JavaScript 独立于全局上下文中的 JavaScript 执行。通过查看 ejs.js 源代码，似乎在该过程中使用了 eval。

此外，EJS 将呈现的 HTML 作为字符串返回，EJS 的文档指示我们使用 innerHTML 将呈现的模板字符串注入 DOM：

```
document.getElementById("container").innerHTML = html; 
```

无论您使用哪种视图技术，某些浏览器在涉及 JavaScript 时的基本事实之一是： **某些浏览器可能不会使用 innerHTML 评估`<script>`添加到 DOM 的块。**

换句话说，在我的测试模板中，当我尝试添加脚本标签以将所选值输出到控制台时，我可以看到添加了脚本块，但由于 innerHTML 的工作方式，它没有被执行：

**示例模板演示如果使用 innerHTML 添加 JavaScript 将不会运行：**

```
 <h1><%= title %></h1>
<ul>
    <% for(var i=0; i<supplies.length; i++) {  %>
       <span id="selected"></span><script>console.info('test <%= i %> = <%= supplies[i] %>');</script>            
        <li>
            <a href='supplies/<%= supplies[i] %>'>
                <%= supplies[i] %>
            </a>
        </li>
    <% } %>
</ul> 
```

**呈现的 HTML：**

正如您在下面看到的，console.log 语句存在于 HTML 中。但是，当使用 innerHTML 添加时，它们不会触发。

**使用视图技术的方法是将它们的使用限制在渲染视图上。**将您的逻辑保留在“常规 JavaScript”中。

```
<h1>Cleaning Supplies</h1>
<ul>

       <span id="selected"></span><script>console.info('test 0 = Brrom');</script>            
        <li>
            <a href='supplies/Brrom'>
                Brrom
            </a>
        </li>

       <span id="selected"></span><script>console.info('test 1 = mop');</script>            
        <li>
            <a href='supplies/mop'>
                mop
            </a>
        </li>

       <span id="selected"></span><script>console.info('test 2 = Hammer');</script>            
        <li>
            <a href='supplies/Hammer'>
                Hammer
            </a>
        </li>

</ul> 
```

更多示例和文档可以在[Google Code Embedded JavaScript](http://code.google.com/p/embeddedjavascript/)网站上的 EJS 模板中找到。

# c++ - 从 C++ 调用 Lua 函数，缺少参数

> ID：10777247
> 
> 赞同：1
> 
> 时间：2012-05-27T21:00:46.317
> 
> 标签：c++, lua, arguments, argument-passing

我有一个奇怪的问题，从 C++ 调用 Lua 函数。我在 Lua 中有：

```
Player = 
{
    Number = 0.43,
    Text = "SomeText",
}

function Player:Func(a, b)  
    return (a * b);
end 
```

在 lua_pcall 我的堆栈看起来：
table
function
3
4

我调用这个函数：

```
lua_pcall(L, 2, 1, 0) 
```

我从 Lua 得到错误：

> 尝试对局部 'b' 执行算术运算（一个 nil 值）

当我更改 Lua 脚本时

```
return (a * b); 
```

到

```
return a; 
```

没有错误，但是来自 lua_tonumber(L, -1); 我得到值 4（我在 C:/ 中的第二个参数），所以看起来我在 C 中的第二个参数在 Lua 中是第一个。你知道我在代码中做错了什么吗？
我如何构建堆栈：

```
lua_getglobal (L, "Player");
lua_pushstring(L, "Func");
lua_gettable(L, -2);
lua_pushnumber(L, 3.0);
lua_pushnumber(L, 4.0); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T21:35:24.937

Ben 的评论是关键 - 阅读第 150 页“Lua 编程”中的面向对象编程部分。

[http://www.lua.org/pil/16.html](http://www.lua.org/pil/16.html)

> 冒号的作用是在方法定义中添加一个额外的隐藏参数，并在方法调用中添加一个额外的参数。

因此，您需要将“帐户”对象作为第一个参数推送，或者（在这种情况下更容易）更改`function Player:Func(a, b)`为`function Player.Func(a, b)`

# python - BeautifulSoup - findAll 不在特定标签内

> ID：10777250
> 
> 赞同：7
> 
> 时间：2012-05-27T21:01:04.173
> 
> 标签：python, beautifulsoup

因此，我试图找到一种方法来查找 BeautifulSoup 对象中具有某个标签但不在某个其他标签内的所有项目。例如：

```
<td class="disabled first"> <div class="dayContainer">
      <p class="day"> 29
      </p> <p class="moreLink">
      </p> 
   </div>
</td> 
```

我想找到 的所有迭代`class="dayContainer"`，这很简单，但是我该如何找到所有不在其中的第一个迭代`class="diabled"`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-27T21:17:35.183

对 .parent 没有该类属性的标签运行过滤器。就像是

```
filteredDayContainers = [tag for tag in soup.find_all('div', 
    attrs = {'class': 'dayContainer'}) 
    if "disabled" not in tag.parent['class']] 
```

# php - 将 MySQL 数据从一个表移动到另一个 跳过重复（或覆盖）

> ID：10777252
> 
> 赞同：0
> 
> 时间：2012-05-27T21:01:12.983
> 
> 标签：php, mysql, duplicates, move, duplicate-removal

我需要将 csv 上传到 mysql 中。经常。

所以我打算将 csv 上传到一个临时表。比将数据从 移动`temporary_table`到`main_table`.

现在，我需要帮助：

1.  如何移动数据。并且 (a) 跳过重复项，或 (b) 覆盖重复项
2.  csv 当前包含 55566 行，并且会逐日增加。那么，如何处理执行时间。
3.  将 csv 导入 mysql 的最佳实践。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T21:28:23.767

1.  > 如何移动数据。

    使用[`INSERT ... SELECT`](http://dev.mysql.com/doc/en/insert-select.html).

    > 并且 (a) 跳过重复项，或 (b) 覆盖重复项

    [`UNIQUE`](http://dev.mysql.com/doc/en/constraint-primary-key.html)在确定记录是否重复的列上定义一个键约束；然后：

    (a) 使用[`INSERT IGNORE`](http://dev.mysql.com/doc/en/insert.html)；或者

    (b) 使用[`INSERT ... ON DUPLICATE KEY UPDATE`](http://dev.mysql.com/doc/en/insert-on-duplicate.html)或[`REPLACE`](http://dev.mysql.com/doc/en/replace.html)。

2.  > csv 当前包含 55566 行，并且会逐日增加。那么，如何处理执行时间。

    每次上传后轮换您的 CSV 文件，以免重复上传过去的记录。

3.  > 将 csv 导入 mysql 的最佳实践。

    使用*[`mysqlimport`](http://dev.mysql.com/doc/en/mysqlimport.html)*或[`LOAD DATA INFILE`](http://dev.mysql.com/doc/en/load-data.html)。

# ruby-on-rails - 对令牌输入的新令牌确实有困难（来自不同的模型）

> ID：10777254
> 
> 赞同：0
> 
> 时间：2012-05-27T21:01:17.200
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1, jquery-tokeninput

我使用 jquery-tokeninput，但是它的一个分支允许为每个`User`添加新的自定义令牌（`Tag`）`Resource`。

此处的示例（向下滚动到标签框并输入几个字母。您可以输入不存在的字母）：[http ://www.tomsguide.fr/solutions/nouveau_sujet.htm](http://www.tomsguide.fr/solutions/nouveau_sujet.htm)

[我正在使用](https://github.com/vdepizzol/jquery-tokeninput)的 fork 的当前返回值是这样的（引号中的新值）：

```
16,42,'Subway',37,'McDonald\'s',734 
```

我很难在 Rails 中处理这个问题。[这完美地总结了它](http://anongallery.org/img/4/1/i-have-no-idea-what-im-doing-dog.jpg)。

这是我到目前为止所拥有的，它不起作用，可能有很多我没有看到的原因，但主要原因是我需要创建新的 Tag 实例但不保存它们，这样我就可以以某种方式传递它们返回令牌输入，并在提交表单时将新标签与新资源一起保存。但是，当您使用 Tag.new 时，它不会创建 ID。

### 资源.rb

```
attr_accessor :tokens_list

# CUSTOM TOKENS                 
def tag_tokens=(tokens)
  self.tokens_list = tokens.split(",")

  if new_custom_tokens?
    self.tokens_list.each do |token|
      tokens_list << token if token.include? "'"
    end
  end

  self.tag_ids = self.tokens_list
end

def new_custom_tokens?
  self.tokens_list.each do |token|
    return true if token.include? "'"
  end
  false
end 
```

### 资源控制器.rb

```
def create
  @title = "Submit Resource"
  @resource = Resource.new(params[:resource])

  assign_to_global_user?

  # CUSTOM TOKENS
  if @resource.new_custom_tokens?
    custom_token_time_restriction
    # Create Tag.new
  end

  if @resource.valid?
    @resource.save
    flash[:notice] = "Your link has been successfully submitted."
    redirect_to root_url
  else
    render :action => :new
  end 
end

def assign_to_global_user?
  if user_signed_in?
    @resource.user_id = current_user.id
  else
    @resource.user_id = User.find_by_username("Global_User").id
  end
end

private

# CUSTOM TOKENS   
def custom_token_time_restriction
  limit = 7 # days
  if (@resource.user_id != User.global_user_id) and (Time.now - limit.days > User.find(@resource.user_id).created_at)
    # TODO: Check if they are anonymous or their account is newer than 7 days
  else
    flash[:notice] = "You be Logged in to add new tags, and your account must be older than #{limit} days."
    render :action => :new
  end
end 
```

### new.html.erb（用于资源#new）

```
<div class="field">
  <%= f.label :tags %>
  <%= f.text_field :tag_tokens, "data-pre" => @resource.tags.to_json(:only => [:id, :name]), :class => :tagbox %>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:09:47.597

我有同样的问题。这就是我所做的：

这是我以 json 格式返回搜索标记的函数。

```
tags = TagMaster.where("name LIKE ?", "%#{params[:q]}%").limit(10)
if tags == []
  list << {"id" => "0","name"=>new_tag.rstrip}
else
  tags.each { |tag| list << {"id" => tag.id.to_s, "name" => tag.name }}
end

respond_to do |format|
  format.json { render :json => list.to_json, :layout => false }
end 
```

现在，这将允许您显示您在自动完成下拉列表中输入的任何内容，点击后它将显示为令牌。

现在您不能再添加任何自定义令牌，因为任何不在数据库中的令牌都将返回 id 0，因此此时只允许一个自定义令牌。

对于那个问题我做了以下。

```
var k = jQuery.noConflict();
k("#project_tags").tokenInput("tag_list", {
  hintText: "Enter Tags for your Project",
  noResultsText: "No Such Tags",
  searchingText: "Looking for your Tags",
  preventDuplicates: true,
  theme: "facebook",
  onAdd: function (item) {
    if (item.id == '0') {
      k.ajax({
    url: '/add_project_tag',
        data: { name: item.name },
    success:function(data) {
          k("#project_tags").tokenInput("add", {id: data, name: item.name});
          k("#project_tags").tokenInput("remove", {id: '0' });
        }
  });
    }
  }
}); 
```

正如您在此处看到的，我调用 add_project_tag 将自定义标签存储到数据库中，并返回该插入标签的 id。所以现在你只需用它的 id 添加相同的令牌并用 0 删除令牌。

所以现在不会有任何带有 0 的令牌，您可以添加任意数量的新令牌。

希望这可以帮助。如果有更复杂的问题，请提出您的问题。

# html - 溢出：隐藏是确保浮动项目不会“泄漏”的正确方法吗？

> ID：10777258
> 
> 赞同：1
> 
> 时间：2012-05-27T21:01:43.897
> 
> 标签：html, css

假设你有一个文章列表，有些有一个右浮动的图像和很少的文字，所以图像漂浮在文章之外并进入下一篇文章，把事情搞砸了。

确保文章内的元素不会漂浮在文章之外的正确/首选/最佳方法是什么？

我知道这`overflow:hidden`行得通，但这是正确的用法吗？还是只是碰巧做我想做的事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T21:10:39.633

You have three ways to do it:

1.  you can have `overflow:hidden` which is a clean way to do it.

    *   Pros: It does not mess with semantics of the HTML, No "dead elements".
    *   Cons: clipping the content if the container has a defined dimension, *and clips shadows* from inner elements.

        ```
        div        <-- style="overflow:hidden"
            div    <-- floating children
            div    
        div        <-- style="overflow:hidden"
            div    <-- floating children
            div 
        ```

2.  You can have a blank element, usually a `<div>` after the container that has floats. Style this with `clear:both`.

    *   Cons: Having a "dead element" in the DOM.

        ```
        div
            div    <-- floating children
            div 
        div        <-- style="clear:both"
        div 
            div    <-- floating children
            div 
        ```

3.  You can add a "clearfix" class to the container and use `:after` pseudo-class to add a "clearing dynamic dot/space". Basically it works like the second, but uses the `:after` to insert a space that has "clear:both" [This article explains it](http://perishablepress.com/new-clearfix-hack/).

    *   Pros: It does not mess with semantics of the HTML, No "dead elements".
    *   Cons: "classitis" (overuse of classes), [`:after` is not supported in IE7](http://www.quirksmode.org/css/contents.html) and older, thus CSS hacks are used

        ```
        div        <-- :after
            div    <-- floating children
            div
        " "        <-- style="clear:both"
        div        <-- :after
            div    <-- floating children
            div 
        ```

You can use either of the three and they work great. I usually use 1 most of the time, and if I had shadows in the container, or if the container has a fixed dimension, I use 3\. Method 3 relies on `:after` which is new. To support this clearfix, youd use an old CSS hack as described in the article.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T21:03:20.147

对于每个文章元素，添加`clear: both;`. 这将确保图像不会在下一篇文章中“泄漏”，同时也确保它们不会被截断。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T21:12:07.103

[该链接准确地解释了您的要求。](http://www.impressivewebs.com/overflow-hidden-problem/)

overflow: hidden 或 overflow: auto 将是清除较小包含元素上的浮动的可接受的解决方案，例如包含浮动列表项的导航栏，或具有一堆浮动框的号召性用语区域。

并且链接还用demo解释了使用overflow:hidden清除的问题。

# java - 在 sdcard 上创建但在 PC 上无法访问的文件

> ID：10777262
> 
> 赞同：1
> 
> 时间：2012-05-27T21:01:56.363
> 
> 标签：java, android

> **可能重复：**
> [SDCard 内容存在但看不到它们](https://stackoverflow.com/questions/10643476/sdcard-content-exist-but-cant-see-them)

我正在学习在 Android 上开发应用程序。

我设法在 sdcard 上创建并写入文件。我可以通过文件管理器在我的手机上看到这个文件及其内容，但是，当我将手机连接到 PC 时，我看不到我刚刚创建的这个文件。

有没有人遇到过这个？我似乎找不到对此的解释。

提前致谢。

# javascript - 在jQuery中搜索许多div的属性

> ID：10777264
> 
> 赞同：1
> 
> 时间：2012-05-27T21:02:19.537
> 
> 标签：javascript, jquery

```
$('#div_search').keypress(function() {
    var search_term = $(this).val();
    $('.ticker_list').children('div').each(function() {
        var search_value = $(this).attr('search_term');
        if (search_value.indexOf(search_term) >= 0) {
            $(this).show();
        }
        else {
            $(this).hide();
        }
    });
});​ 
```

这真的很慢，这是有道理的，因为它运行了 500 个 div 并搜索每个“search_term”属性以查看输入的搜索词是否在 attr 中。有没有更好或更快的方法来做到这一点？我什至对更好的搜索机制感兴趣。

我也可以根据需要修改 DOM。

**编辑** 对不起我应该提到说搜索词是“你好今天约翰尼”，“你好”、“今天”和“约翰尼”这个词必须返回 true，这就是我在上面的脚本中使用 indexOf 的原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T21:04:53.687

这是一个简单的 CSS 选择器：

```
$(".ticker_list > div[search_term*="+search_term+"]") 
```

不过，您可能需要逃脱`search_term`，具体取决于它可能包含的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T21:05:01.427

```
var search_term = this.value;
$('.ticker_list > div[search-term*="' search_term + '"]').show(); 
```

**笔记：**

*   您最好使用`data-*`属性来存储 DOM 元素的“元数据”，而不是创建自己的属性。
*   不要过度使用 jQuery！`this.value`您可以使用而不是获取输入值`$(this).val()`。
*   如果这是一项昂贵的操作，您将获得从`keypress`事件转移到`change`或至少是`keyup`事件的性能提升。
*   如果您需要进一步改进代码，缓存`$(this)`，[它可以加快您的代码速度](https://stackoverflow.com/q/10433014/601179)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T21:33:29.183

我假设这更快？

```
$('#div_search').on('keypress', function(){
       var search_term = this.value,
           elems = document.getElementsByClassName('ticker_list')[0].children;
       for (i=0; i<elems.length; i++) {
           var search_value = elems[i].getAttribute('search_term');
           elems[i].style.display = (search_value.indexOf(search_term) != -1?'block':'none');
       }
});​ 
```

[小提琴](http://jsfiddle.net/adeneo/dZQhL/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T22:05:59.277

[我在这里](http://jsperf.com/queryselector-search-engine)做了一个jsperf

jsfiddle [http://jsfiddle.net/C9m2K/2/](http://jsfiddle.net/C9m2K/2/)

进行一些小的优化，例如不隐藏或显示循​​环中的元素，稍微提高了您的速度，但仍然将搜索词存储在 javascript 对象中要快得多。

你可以像这样构建它：

```
var searchArray = $('.ticker_list').children('div').map( function( elem ){
    return {
        value: $(this).attr( "search_term" ),
        elem: this
    };
}).toArray(); 
```

你也不应该在循环中切换隐藏和显示，如果一个搜索词只匹配一次，那么你调用了 hide 499 次，而你本来可以隐藏之前显示的元素。

```
$('#div_search').keyup( function() {
    var previouslyShown = [],
        i, len = searchArray.length;

    return function(e) {
        var cur,
            searchTerm = $(this).val();

        $( previouslyShown ).hide();
        previouslyShown = [];
        for( i = 0; i < len; ++i ) {
            cur = searchArray[i];

            if( cur.value.indexOf( searchTerm ) >= 0 ) {
                $( cur.elem ).show();
                previouslyShown.push( cur.elem );
            }
        }

    };
}()); 
```

# python - Python在列表理解中使用枚举

> ID：10777271
> 
> 赞同：136
> 
> 时间：2012-05-27T21:03:37.023
> 
> 标签：python, list, iteration, list-comprehension

假设我有一个这样的列表：

```
mylist = ["a","b","c","d"] 
```

要获取与索引一起打印的值，我可以使用 Python 的`enumerate`函数，如下所示

```
>>> for i,j in enumerate(mylist):
...     print i,j
...
0 a
1 b
2 c
3 d
>>> 
```

现在，当我尝试在 a 中使用它时，`list comprehension`它给了我这个错误

```
>>> [i,j for i,j in enumerate(mylist)]
  File "<stdin>", line 1
    [i,j for i,j in enumerate(mylist)]
           ^
SyntaxError: invalid syntax 
```

所以，我的问题是：在列表理解中使用枚举的正确方法是什么？

* * *

## 回答 #1

> 赞同：181
> 
> 时间：2012-05-27T21:05:15.080

试试这个：

```
[(i, j) for i, j in enumerate(mylist)] 
```

您需要放入`i,j`一个元组中才能使列表理解起作用。或者，假设`enumerate()` *已经*返回了一个元组，您可以直接返回它而无需先解包：

```
[pair for pair in enumerate(mylist)] 
```

无论哪种方式，返回的结果都符合预期：

```
> [(0, 'a'), (1, 'b'), (2, 'c'), (3, 'd')] 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-05-27T21:27:34.977

只是要非常清楚，这与列表理解语法无关，而是与`enumerate`一切有关。

这个列表推导返回一个元组列表：

```
[(i,j) for i in range(3) for j in 'abc'] 
```

这是一个字典列表：

```
[{i:j} for i in range(3) for j in 'abc'] 
```

列表列表：

```
[[i,j] for i in range(3) for j in 'abc'] 
```

语法错误：

```
[i,j for i in range(3) for j in 'abc'] 
```

这是不一致的（恕我直言）并且与字典理解语法混淆：

```
>>> {i:j for i,j in enumerate('abcdef')}
{0: 'a', 1: 'b', 2: 'c', 3: 'd', 4: 'e', 5: 'f'} 
```

还有一组元组：

```
>>> {(i,j) for i,j in enumerate('abcdef')}
set([(0, 'a'), (4, 'e'), (1, 'b'), (2, 'c'), (5, 'f'), (3, 'd')]) 
```

正如 Óscar López 所说，您可以直接传递枚举元组：

```
>>> [t for t in enumerate('abcdef') ] 
[(0, 'a'), (1, 'b'), (2, 'c'), (3, 'd'), (4, 'e'), (5, 'f')] 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2012-05-27T21:18:27.990

或者，如果您不坚持使用列表推导：

```
>>> mylist = ["a","b","c","d"]
>>> list(enumerate(mylist))
[(0, 'a'), (1, 'b'), (2, 'c'), (3, 'd')] 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-05-27T21:05:27.163

这是一种方法：

```
>>> mylist = ['a', 'b', 'c', 'd']
>>> [item for item in enumerate(mylist)]
[(0, 'a'), (1, 'b'), (2, 'c'), (3, 'd')] 
```

或者，您可以执行以下操作：

```
>>> [(i, j) for i, j in enumerate(mylist)]
[(0, 'a'), (1, 'b'), (2, 'c'), (3, 'd')] 
```

你得到一个错误的原因是你错过了 ()`i`并`j`使它成为一个元组。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2012-05-27T22:46:28.680

如果您使用的是长列表，则列表理解似乎更快，更不用说更具可读性了。

```
~$ python -mtimeit -s"mylist = ['a','b','c','d']" "list(enumerate(mylist))"
1000000 loops, best of 3: 1.61 usec per loop
~$ python -mtimeit -s"mylist = ['a','b','c','d']" "[(i, j) for i, j in enumerate(mylist)]"
1000000 loops, best of 3: 0.978 usec per loop
~$ python -mtimeit -s"mylist = ['a','b','c','d']" "[t for t in enumerate(mylist)]"
1000000 loops, best of 3: 0.767 usec per loop 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-05-27T21:05:32.090

明确说明元组。

```
[(i, j) for (i, j) in enumerate(mylist)] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-28T22:41:05.313

所有伟大的答案家伙。我知道这里的问题是针对枚举的，但是这样的事情怎么样，只是另一个角度

```
from itertools import izip, count
a = ["5", "6", "1", "2"]
tupleList = list( izip( count(), a ) )
print(tupleList) 
```

如果必须在性能方面并行迭代多个列表，它会变得更加强大。只是一个想法

```
a = ["5", "6", "1", "2"]
b = ["a", "b", "c", "d"]
tupleList = list( izip( count(), a, b ) )
print(tupleList) 
```

# php - 如果 php 5.3.10 中已弃用某些内容，是否可以使其正常工作？

> ID：10777272
> 
> 赞同：2
> 
> 时间：2012-05-27T21:03:37.713
> 
> 标签：php

我有一个运行我编写的 php 应用程序的站点。该站点刚刚升级，现在使用 php 5.3.10。我注意到的第一件事是它`$HTTP_POST_VARS`不再起作用。这使我发现这显然已被弃用。

**我需要保持这个应用程序运行**。有什么方法可以简单地告诉 php 忽略弃用错误和警告并继续使用弃用的变量和函数？

我已经搜索但找不到答案 - 也许是因为它是“否”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T10:47:06.930

在[`$HTTP_POST_VARS`](http://php.net/HTTP_POST_VARS)PHP 5.3.10 中仍然有效，只是已弃用。

默认情况下会忽略弃用错误，您的程序确实可以正常工作。它只会警告您正在使用将来可能不再可用的功能。

请将此与类似的问题**[Php 5.3 magick quotes gpc](https://stackoverflow.com/q/10628032/367456)**进行比较，该问题也是关于 PHP 5.3 的弃用。

它的新名称[`$_POST`](http://php.net/_POST)是完全相同的。因此，您只需将代码置于版本控制之下，替换用法（重构：重命名变量），您将来也应该很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T21:10:11.327

Although it's a bad idea you could append this line in a file that gets included in every page(something like config.php in most scripts) and $HTTP_POST_VARS should work

```
$HTTP_POST_VARS = $_POST; 
```

The fact that this is a bad idea and that you should update your script to replace deprecated variables needs to be stressed.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T21:11:25.430

您应该将其替换为`$_POST`. 它们包含相同的数据，差异`$_POST`是超全局的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-19T04:24:35.313

我有同样的问题！但这就像更改`$HTTP_POST_VARS`为一样简单`$_POST`- 这对我有用，我不明白为什么它不适合你。

# makefile - 缺少分隔符出错

> ID：10777273
> 
> 赞同：0
> 
> 时间：2012-05-27T21:03:41.757
> 
> 标签：makefile

```
$(foreach name, $(patsubst lib%.a,%,$(LIBS)), \
          $(eval lib$(name).a : lib$(name).a($$($(name)_OBJS)))) 
```

上述行中的 Make 失败，说缺少分隔符。

```
:68: *** missing separator.  Stop. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:52:49.557

从[GNUMake 手册](http://www.gnu.org/software/make/manual/make.html#Archive-Members)：

> 要在同一个存档中指定多个成员，您可以将所有成员名称一起写在括号之间。例如：
> 
> ```
>  foolib(hack.o kludge.o) 
> ```
> 
> 相当于：
> 
> ```
>  foolib(hack.o) foolib(kludge.o) 
> ```

但是，这似乎不适用于先决条件（GNUMake 3.8.2）：

```
# This works:
     flib: foolib(hack.o) foolib(kludge.o)

# This doesn't:
     flib: foolib(hack.o kludge.o) 
```

所以我们只需要一个小的修改（使用@Neil 的快捷方式和对括号的一些小心处理）：

```
# Change this:
$(foreach name, $(LIBS:lib%.a=%), \
  $(eval lib$(name).a : lib$(name).a($$($(name)_OBJS))))

# to this:
lparen := (
rparen := )

$(foreach name, $(LIBS:lib%.a=%), \
  $(eval lib$(name).a : $($(name)_OBJS:%=lib$(name).a$(lparen)%$(rparen)))) 
```

# java - Adding a video player to a JPanel in java using VLCJ

> ID：10777279
> 
> 赞同：1
> 
> 时间：2012-05-27T21:04:35.607
> 
> 标签：java, swing, video, vlcj

I am currently in the position of having 2 pieces of work I wish to combine. I have a simple media player running in a JFrame and a GUI I would like to add video playback to on a JPanel.

The code for the which creates video player window is as follows:

```
private final JFrame vidFrame;
private final EmbeddedMediaPlayerComponent vidComp;

//Creates JPanel for video player
public Video() {

    vidFrame = new JFrame("VLC video test");
    vidFrame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
    vidFrame.setLocation(100, 100);
    vidFrame.setSize(800, 800);

    vidComp = new EmbeddedMediaPlayerComponent();

    //This is the point where I am trying to add the video player to the GUI
    MainWindow.vidPanel.add(vidComp);

    vidFrame.add(vidComp);
    vidFrame.setVisible(true);
} 
```

And this is the panel I'm trying to add the player to:

```
 JPanel vidPanel = new JPanel();
    vidPanel.setBorder(new BevelBorder(BevelBorder.LOWERED, null, null, null, null));
    vidPanel.setBounds(10, 11, 532, 400);
    contentPane.add(vidPanel); 
```

I get the error message: "vidPanel cannot be resolved or is not a field"

Does anyone know how I can rectify this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T01:59:19.403

我也遇到了同样的问题，今天才解决。问题是您使用的是 JPanel，您将永远无法在那里观看视频，您应该改用 Canvas。这对我有用：

```
 Canvas canvas = new Canvas();
    MediaPlayerFactory mediaPlayerFactory = new MediaPlayerFactory();
    CanvasVideoSurface videoSurface = mediaPlayerFactory.newVideoSurface(canvas);
    EmbeddedMediaPlayer mediaPlayer = mediaPlayerFactory.newEmbeddedMediaPlayer();
    mediaPlayer.setVideoSurface(videoSurface);

    mediaPlayer.playMedia(String with the name of the file); 
```

我正在使用 JDK 1.6 和 VLCJ 2.1

如果您使用的是 IDE，只需按照您放置 JPanel 的方式放置 Canvas 并删除第一行。

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T16:14:47.853

首先，看起来您`vidPanel`是一个局部变量，如果您需要从其他方法访问它，它应该是一个字段。这是 Java 的一个非常基本的部分——任何初学者教程都应该涵盖这一点。VLCJ 不是最简单的使用方法，如果您不清楚基本原理，您可能会陷入困境。

其次，在你走得太远之前，嵌入式 VLCJ 播放器不能与 JPanel 一起使用，只能使用原生 AWT Canvas - 所以你需要使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T21:58:55.163

首先，在我看来，它`vidPanel`被定义为局部变量，通过在类范围内（而不是在方法中）定义使其成为成员字段。

这不是您在真正可维护的代码中所做的事情，而只是为了快速解决您的问题：`getVidPanel()`在 MainWindow 中定义一个返回`vidPanel`.

然后代替错误的行使用以下内容：

```
MainWindow aMainWindowInstance = new MainWindow();
aMainWindowInstance.getVidPanel().add(vidComp); 
```

# haskell - 类型线程的异构列表和类型族的默认（？）？

> ID：10777283
> 
> 赞同：3
> 
> 时间：2012-05-27T21:04:55.657
> 
> 标签：haskell, typeclass, type-families

我正在开发一个库，我想在其中定义一个递归类，在这里我将其简化为：

```
{-# LANGUAGE MultiParamTypeClasses 
           , FlexibleInstances #-}

data Snoc st b c = Snoc (st b) (c -> b) 
data Top a = Top

class StackTo a st c  where
     runStack :: st c -> (c -> a)
instance StackTo a Top a where
     runStack _ = id
instance (StackTo a st b) => StackTo a (Snoc st b) c where
     runStack (Snoc st' cb) = runStack st' . cb 
```

这让我做，例如

```
*Main Data.Label> let f = runStack $ Snoc (Snoc Top fst) head :: [(a,x)] -> a
*Main Data.Label> f [('a',undefined)] 
'a' 
```

但这似乎需要仔细使用类型注释，否则......

```
*Main Data.Label> let f = runStack $ Snoc (Snoc Top fst) head

<interactive>:1:1:
    No instance for (StackTo a0 Top b0)
      arising from a use of `runStack'
    Possible fix: add an instance declaration for (StackTo a0 Top b0)
    In the expression: runStack
    In the expression: runStack $ Snoc (Snoc Top fst) head
    In an equation for `it': it = runStack $ Snoc (Snoc Top fst) head 
```

我认为这些问题与[此问题](https://stackoverflow.com/questions/8031288/variadic-list-constructor-how-to-default-to-the-correct-type-and-get-type-safet)中解决的问题相同，但我无法在这里调整该解决方案。我可以使用类型族或其他方法来为我的递归延续堆栈提供更用户友好的解决方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T21:58:28.813

链接问题的答案隐藏了以下非常有用的技巧：概括实例头部，并专门研究实例上下文。

```
instance a ~ b => StackTo a Top b where
    runStack _ = id 
```

在选择要使用的实例时，GHC 只检查可用的实例头——而不是上下文——并选择与当前已知的类型相匹配的一个（如果有的话）。在做出这个选择之前它不会专门化一个类型，即使专门化会允许一个或多个可用的实例头匹配。因此，此处给出的实例与上述问题中的实例之间的区别在于，这个实例更通用：当中间类型为 时，此实例适用`Top`，而您的实例仅在中间类型为时适用，`Top` *并且*我们对其他两种类型了解足够多类型知道他们是平等的。

您的实例将与更少的其他潜在实例重叠，但这将更强烈地鼓励推理引擎。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-27T22:05:55.970

*Kleene 明星*GADT 不会做这项工作有什么特别的原因吗？

```
data Star r a b where
  Nil   :: Star r a a
  Cons  :: r a b -> Star r b c -> Star r a c

compose :: Star (->) a b -> a -> b
compose Nil          = id
compose (Cons f fs)  = compose fs . f 
```

但是，如果您需要类型类方法，我不会干涉。

# java - Spring MVC 3 和验证错误

> ID：10777286
> 
> 赞同：1
> 
> 时间：2012-05-27T21:05:05.517
> 
> 标签：java, spring, validation, spring-mvc, hibernate-validator

我正在尝试使用基于 Spring MVC 的 javax 创建简单的验证。我启用了注释驱动。我想在表单中显示错误，但出现 500 页错误：

**500 错误页面**

```
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.validation.BindException: org.springframework.validation.BeanPropertyBindingResult: 2 errors
Field error in object 'profile' on field 'email': rejected value [xx@ss]; codes [Pattern.profile.email,Pattern.email,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [profile.email,email]; arguments []; default message [email],[Ljavax.validation.constraints.Pattern$Flag;@718df055,^[_A-Za-z0-9-]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$]; default message [Nieprawidłowy e-mail]
Field error in object 'profile' on field 'login': rejected value [xx]; codes [Size.profile.login,Size.login,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [profile.login,login]; arguments []; default message [login],20,4]; default message [Login musi min. długość 4 znaków, max. 20 znaków]
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

**控制器**

```
@RequestMapping(value="/register", method=RequestMethod.POST)
    public String register(
            @Valid Profile profile,
            @RequestParam("recaptcha_challenge_field") String challenge,
            @RequestParam("recaptcha_response_field") String response, 
            BindingResult result, Model model, HttpServletRequest request) {

        ReCaptchaResponse cResponse = captcha.checkAnswer(request.getRemoteAddr(), challenge, response);
        if(result.hasErrors() || !cResponse.isValid()) {
            String message = cResponse.getErrorMessage();
            String html = captcha.createRecaptchaHtml(message, null);
            model.addAttribute("profile", profile);
            model.addAttribute(CAPTCHA_HTML, html);
            return "login/register";
        }
        return "ok";
    } 
```

**模型的一部分（仅此字段有效）**

```
@NotBlank
    @Size(min=4, max=20)
    @Pattern(regexp="^([\\w]+)$")
    private String login;

    @NotBlank
    @Pattern(regexp=("^[_A-Za-z0-9-]+(\\.[_A-Za-z0-9-]+)*@[A-Za-z0-9]+(\\.[A-Za-z0-9]+)*(\\.[A-Za-z]{2,})$"))
    private String email; 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T07:39:47.580

也许尝试做 maven clean 并安装到您的本地仓库中？

# php - PHP 到 Jquery 变量

> ID：10777293
> 
> 赞同：1
> 
> 时间：2012-05-27T21:05:53.250
> 
> 标签：php, jquery, variables

我的`config.php`文件中有这个

```
 $DOMAIN = 'http://domain.com';
 $DOMAIN_SSL = 'http://domain.com';
$DOMAIN_ROOT = 'var/domain/root/html'; 
```

`config.php`包含在第一行的每一页中

现在我有这个 jQuery 代码

```
var country = '<?php echo $_GET['country'];?>'; 
var category = 'Cat' ;
var category = '<?php echo $DOMAIN.'/link'; ?>'; 
```

如何使用 jQuery 代码从 php 获取变量以制作像这样的 jQuery 代码

```
var country = '$country'; 
var category = 'Cat' ;
var url= '$domain','/link'; 
```

我需要排除 PHP 的原始代码

```
var country = '<?php echo $_GET['country'];?>'; 
                var category = 'CAT1' ;               
                function loadData(page){
                    loading_show();                    
                    $.ajax
                    ({
                        type: "POST",
                        url: "<?php echo $DOMAIN ?>/post.php",
                        data: "page="+page +"&category="+category+"&country="+country,
                        success: function(msg)
                        {
                        loading_hide();
                        $("#content-large").html(msg);
                        }
                    });
                }
                loadData(1);  // For first time page load default results
                $('#content-large .pagination li.active').live('click',function(){
                    var page = $(this).attr('p');
                    loadData(page);

                });           
                $('#go_btn').live('click',function(){
                    var page = parseInt($('.goto').val());
                    var no_of_pages = parseInt($('.total').attr('a'));
                    if(page != 0 && page <= no_of_pages){
                        loadData(page);
                    }else{
                        alert('Enter a PAGE between 1 and '+no_of_pages);
                        $('.goto').val("").focus();
                        return false;
                    }

                });
            }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T21:18:26.400

### 更新的答案

如果您尝试从 URL 中获取值，就像您`$_GET`在 PHP 中使用的一样，我鼓励您使用 jQuery URL Parser 之类的东西：

```
var country = $.url().param("country"); // Gets the 'country' parameter 
```

下载 jQuery URL 解析器：[https ://github.com/allmarkedup/jQuery-URL-Parser](https://github.com/allmarkedup/jQuery-URL-Parser)

### 原始答案

我会鼓励你保持简单；只需使用格式化字符串和`json_encode`. 例如：

```
$country  = "United States";
$domain   = "http://stackoverflow.com";
$category = 5;

printf( "var country  = %s;", json_encode( $country ) );
printf( "var category = %s;", json_encode( $category ) );
printf( "var domain   = %s;", json_encode( $domain . "/link" ) ); 
```

哪个输出：

```
var country  = "United States";
var category = 5;
var domain   = "http:\/\/stackoverflow.com\/link"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T21:12:04.183

假设这是在页面上而不是在某个单独的 JS 文件中，您可以只用 PHP 编写整个语句。

```
<?php echo "var country = " . json_encode($_GET['country']) . ";"; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T21:51:23.307

坦率地说，我认为你不需要在这里把事情搞得太复杂。这可能不是最好的解决方案或任何东西，但它应该可以工作。

这个想法是，在实际页面（例如，`home.php`）上，您将回显一个包含您需要的值的 HTML 元素，例如：

```
//Fill this array with all the values that you want available in JS
$JSONarray = array('all'=>'the','values'=>'you','want'=>'in','JS');
//Later print it on the page
echo "<span class='hidden' id='transferred_values'>"
    .json_encode($JSONarray)."</span>"; 
```

（旁注：您可以将“隐藏”类设置为对用户不可见。）

现在您的外部 JS（例如，`scripts.js`）可以仅使用 JS 检索值，这将允许您使用压缩器：

```
$(function(){
    var transfer = $.parseJSON( $('#transferred_values').text() );
}); 
```

让我知道这是否违反了良好做法或我不知道的任何规则:)

# python - How to get a form input using Tkinter in Pygame?

> ID：10777295
> 
> 赞同：4
> 
> 时间：2012-05-27T21:06:17.710
> 
> 标签：python, tkinter, pygame, tk

I'm writing a game using `Pygame`, and parts of the game require data input that `Tk` seems to be good at.

I've got some things working, but I'm finding the implementation ugly and it is becoming clear I'm not using Tkinter the way it was intended to be used.

I have various methods that create `Tk` windows asking for input and then destroy them so that my `Pygame` program can make decisions about what the next input should be.

Am I missing something? Is there a better way to get form style input?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T08:07:36.793

Pygame doesn't have any included form input type stuff, and there's not really a way for Tkinter and Pygame to coexist peacefully in the same window, so you have two options, if you're going to stay within Pygame:

1.  **Use a third party library**

[Phil's Pygame utilities](http://www.pygame.org/project-PGU+-+Phil's+pyGame+Utilities-108-471.html) are a pretty good option and provide some good basic functionality like *file dialogs*, *popups*, etc. Take a look around the projects on Pygame's website, and see if anyone else's fits your specific needs better.

2.  **Code them yourself**

[Here](http://www.pygame.org/pcr/inputbox/index.php) is a pretty good example of how you'd put together your own input methods. Buttons, lists, and such would be similar as far as event handling is concerned, just check for mouse clicks in each UI element's borders.

# wpf - How to Launch External .exe application in WPF Window

> ID：10777296
> 
> 赞同：0
> 
> 时间：2012-05-27T21:06:18.430
> 
> 标签：wpf, winforms, windowsformshost, windowsformsintegration

Please help me, how to Launch External .exe application in the WPF Window.

Below code, I am able to open Notepad.exe and WinWord.exe applications in the WPF window but not other applications.. when i try to open other .exe applications it is opening in separate window.

```
public partial class Window1 : Window
{
    public IntPtr MainWindowHandle { get; set; }

    [DllImport("user32.dll", SetLastError = true)]
    private static extern long SetParent(IntPtr hWndChild, IntPtr hWndNewParent);

    //[DllImport("user32.dll", SetLastError = true)]
    //private static extern int GetWindowLong(IntPtr hWnd, int nIndex);

    public Window1()
    {
        InitializeComponent();

        try
        {
            //External exe inside WPF Window 
            System.Windows.Forms.Panel _pnlSched = new System.Windows.Forms.Panel();

            WindowsFormsHost windowsFormsHost1 = new WindowsFormsHost();

            windowsFormsHost1.Child = _pnlSched;

            _Grid.Children.Add(windowsFormsHost1);

            //_Grid.Children.Add(_pnlSched);

            ProcessStartInfo psi = new ProcessStartInfo(@"C:\Program Files\Atwin\Atwin2k2.exe");

            psi.WindowStyle = ProcessWindowStyle.Normal;

            Process PR = Process.Start(psi);

            PR.WaitForInputIdle(); // true if the associated process has reached an idle state.

            System.Threading.Thread.Sleep(3000);

            IntPtr hwd = PR.MainWindowHandle;
            SetParent(PR.MainWindowHandle, _pnlSched.Handle);  // loading exe to the wpf window.

        }
        catch (Exception ex)
        { 
            //Nothing...
        }
      }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T03:26:05.013

可能有一些事情可能导致这种行为，这是我刚才遇到的两件不同的事情：

当我尝试使用 vim.exe 并且第一次发生未注册类型库的异常时，因此我注册并成功加载了 VIM.EXE。这可能是您的应用程序的一种行为。

当我尝试加载 Eclipse 并且没有异常但 Eclipse.exe 在 WPF 窗口之外加载时。查看 Spy++ 我发现 WM_ACTIVATEAPP 消息导致 Windows 在 WPF 窗口之外打开，这里描述了原因：

[http://support.microsoft.com/kb/89563](http://support.microsoft.com/kb/89563)

因此，取决于您尝试在 WPF 中打开哪种应用程序，并非每个应用程序都会打开，因为存在特定于应用程序的某些限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T07:50:07.197

字符串 strReportPath = System.IO.Directory.GetCurrentDirectory();

```
 if (strReportPath.Substring(strReportPath.Length - 9) == "bin\\Debug")
        {
            strReportPath = strReportPath.Substring(0, strReportPath.Length - 10);
        }

        Process p = new Process();
        p.StartInfo = new ProcessStartInfo(strReportPath + @"\bin\Debug\drag.exe");
        p.Start(); 
```

//drag 是你的 sln 名称；

# javascript - 使用 TrackballControls 时重置相机位置/旋转

> ID：10777297
> 
> 赞同：3
> 
> 时间：2012-05-27T21:06:21.227
> 
> 标签：javascript, jquery, webgl, three.js

我有一个带有threejs 的webgl 应用程序。它使用 TrackballControls 来控制相机。我有一个按钮，我想用它来重置场景，所以，相机应该进入初始状态。我目前有这个（jquery）：

```
$('#reset').click(function() {
    camera.position.set(0, 0 , 400);
    camera.rotation.set(0, 0, 0);
}); 
```

但奇怪的是，当我记录位置和旋转时，它们不是应有的样子，并且相机不在正确的位置。我做错了什么，有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T22:15:04.047

~~在修复错误之前（请参阅对 Yuval Adam 的回答的评论），一个可行的（虽然很脏）的解决方案是从场景中移除相机，然后创建一个新相机，向其添加控件并将新相机添加到场景中。~~

**更新：** TrackballControls 现在有一个`reset()`方法。在补间完成后调用它，一切都很好！（[https://github.com/mrdoob/three.js/commit/4f800f61809560c434bbbf12e76c3931e8e8c0fb](https://github.com/mrdoob/three.js/commit/4f800f61809560c434bbbf12e76c3931e8e8c0fb)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T21:13:19.113

应该始终是最新的`camera.position`，确保您查看的是正确的`camera`并且它没有超出范围。理想情况下，它应该是窗口上的全局变量。

关于`camera.rotation`，您应该检查您的相机是否有：

```
camera.useQuaternion == true 
```

一些控件在相机上将此设置为先决条件。如果是这种情况，则摄像机角度由`camera.quaternion`而不是由 设置`camera.rotation`。当然，`TrackballControls`没有这种行为（至少从 r49 开始）。

* * *

**编辑：**从[https://github.com/mrdoob/three.js/issues/821](https://github.com/mrdoob/three.js/issues/821)看来，确实存在一个错误，手动调整`camera`会弄乱`TrackballControls`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-29T18:56:28.997

而不是将 camera.rotation 更改为 (0,0,0) 将 camera.up 更改为 (0,1,0)。您也可以使用 Tween 对其进行动画处理。

# ipad - Update detail view after deleting a record; UISplitViewController, UIStoryboard and CoreData

> ID：10777298
> 
> 赞同：1
> 
> 时间：2012-05-27T21:06:33.667
> 
> 标签：ipad, ios5, uisplitviewcontroller, uistoryboard

I'm building an iPad app with a UISplitViewController, Story Boards, and Core Data. I have my Master and Detail views working such that I can add records and view each by touching the table in the Master view.

I have a button on my Detail view that deletes the record by doing a CoreData [context deleteObject:myObject]. This works - the Master table view updates and removes the currently selected row. However, I don't know what to do in the detail view. I need to somehow clear it back to the unselected (blank) state but I don't know how to go "back".

I get to the detail view through a segue from the Master table so I was thinking I needed to go "back" through that segue but I'm not clear on how to do that.

Thanks for any guidance,

Tom

# android - Android: How do I make a video splash screen repeat until webview finishes loading the url?

> ID：10777300
> 
> 赞同：1
> 
> 时间：2012-05-27T21:06:50.483
> 
> 标签：android, eclipse, webview, android-videoview, splash-screen

I would like to make a small video (about 4 seconds) repeat until webview finishes loading the desired URL in the background. Right now the video plays once, then a blank black screen comes up until the page loads. I'm still pretty new to this... Thanks in advance for any help! Sorry for the EDITED stuff, but it was necessary.

Here is my splash java

```
package com.EDITED;

import android.app.Activity;
import android.content.Intent;
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnCompletionListener;
import android.os.Bundle;
import android.widget.VideoView;

public class Splash extends Activity implements OnCompletionListener
{
VideoView videoView;
@Override
public void onCreate(Bundle savedInstanceState)
{
super.onCreate(savedInstanceState);
setContentView(R.layout.splash);
VideoView video = (VideoView) findViewById(R.id.videoView);

videoView.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
    @Override
    public void onPrepared(MediaPlayer mp) {
        mp.setLooping(true);
    }
});

video.setVideoPath("android.resource://com.EDITED/raw/" + R.raw.splash);
video.start();
}

@Override
public void onCompletion(MediaPlayer mp)
{
    Intent intent = new Intent(this, EDITEDActivity.class);
    startActivity(intent);
    finish();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T21:29:42.333

基本上你创建一个[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)来做加载和 onPostExecute(Long 结果) 你停止视频。

还可以循环播放视频，您可以使用[它](https://stackoverflow.com/questions/4746075/seamless-video-loop-with-videoview)

```
public class Splash extends Activity implements OnCompletionListener
{
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);
    VideoView video = (VideoView) findViewById(R.id.videoView);

    videoView.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
        @Override
        public void onPrepared(MediaPlayer mp) {
            mp.setLooping(true);
        }
    });

    video.setVideoPath("android.resource://com.EDITED/raw/" + R.raw.splash);
    video.start();
}

} 
```

# javascript - GZIPping 和缓存我的 JS 和 CSS 文件

> ID：10777301
> 
> 赞同：0
> 
> 时间：2012-05-27T21:08:20.483
> 
> 标签：javascript, css, caching, gzip

我正在使用**SMARTY PHP TEMPLATE ENGINE**、**Apache 2**和**PHP 5.3.3**。这是我原来的 main.js 文件内容

```
// Functions
(function($){
    var url1 = /(^|&lt;|\s)(www\..+?\..+?)(\s|&gt;|$)/g,
    url2 = /(^|&lt;|\s)(((https?|ftp):\/\/|mailto:).+?)(\s|&gt;|$)/g,
    linkifyThis = function () {
        var childNodes = this.childNodes,
        i = childNodes.length;
        while(i--)
        {
            var n = childNodes[i];
            if (n.nodeType == 3) {
                var html = $.trim(n.nodeValue);
                if (html)
                {
                    html = html.replace(/&/g, '&amp;')
                    .replace(/</g, '&lt;')
                    .replace(/>/g, '&gt;')
                    .replace(url1, '$1<a href="http://$2" target="_blank">$2</a>$3')
                    .replace(url2, '$1<a href="$2" target="_blank">$2</a>$5');
                    $(n).after(html).remove();
                }
            }
            else if (n.nodeType == 1  &&  !/^(a|button|textarea)$/i.test(n.tagName)) {
                linkifyThis.call(n);
            }
        }
    };
    $.fn.linkify = function () {
        return this.each(linkifyThis);
    };
})(jQuery);

function openCenteredWindow(url, height, width, name, parms) {
   var left = Math.floor( (screen.width - width) / 2);
   var top = Math.floor( (screen.height - height) / 2);
   var winParms = "top=" + top + ",left=" + left + ",height=" + height + ",width=" + width;
   if (parms) { winParms += "," + parms; }
   var win = window.open(url, name, winParms);
   if (parseInt(navigator.appVersion) >= 4) { win.window.focus(); }
   return win;
} 
```

但是当我在浏览器上浏览我的 js 文件（*http://domain.com/js/main.js*）时，它是这样的：

```
(function($){var url1=/(^|&lt;|\s)(www\..+?\..+?)(\s|&gt;|$)/g,url2=/(^|&lt;|\s)(((https?|ftp):\/\/|mailto:).+?)(\s|&gt;|$)/g,linkifyThis=function(){var childNodes=this.childNodes,i=childNodes.length;while(i--)
{var n=childNodes[i];if(n.nodeType==3){var html=$.trim(n.nodeValue);if(html)
{html=html.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(url1,'$1<a href="http://$2" target="_blank">$2</a>$3').replace(url2,'$1<a href="$2" target="_blank">$2</a>$5');$(n).after(html).remove();}}
else if(n.nodeType==1&&!/^(a|button|textarea)$/i.test(n.tagName)){linkifyThis.call(n);}}};$.fn.linkify=function(){return this.each(linkifyThis);};})(jQuery);function openCenteredWindow(url,height,width,name,parms){var left=Math.floor((screen.width- width)/2);var top=Math.floor((screen.height- height)/2);var winParms="top="+ top+",left="+ left+",height="+ height+",width="+ width;if(parms){winParms+=","+ parms;}
var win=window.open(url,name,winParms);if(parseInt(navigator.appVersion)>=4){win.window.focus();}
return win;} 
```

这就像 GZIPPED，删除换行符和注释行。现在我在*main.js*文件中添加一些内容。现在*main.js*的原始内容是这样的：

```
// Functions
(function($){
    var url1 = /(^|&lt;|\s)(www\..+?\..+?)(\s|&gt;|$)/g,
    url2 = /(^|&lt;|\s)(((https?|ftp):\/\/|mailto:).+?)(\s|&gt;|$)/g,
    linkifyThis = function () {
        var childNodes = this.childNodes,
        i = childNodes.length;
        while(i--)
        {
            var n = childNodes[i];
            if (n.nodeType == 3) {
                var html = $.trim(n.nodeValue);
                if (html)
                {
                    html = html.replace(/&/g, '&amp;')
                    .replace(/</g, '&lt;')
                    .replace(/>/g, '&gt;')
                    .replace(url1, '$1<a href="http://$2" target="_blank">$2</a>$3')
                    .replace(url2, '$1<a href="$2" target="_blank">$2</a>$5');
                    $(n).after(html).remove();
                }
            }
            else if (n.nodeType == 1  &&  !/^(a|button|textarea)$/i.test(n.tagName)) {
                linkifyThis.call(n);
            }
        }
    };
    $.fn.linkify = function () {
        return this.each(linkifyThis);
    };
})(jQuery);

function openCenteredWindow(url, height, width, name, parms) {
   var left = Math.floor( (screen.width - width) / 2);
   var top = Math.floor( (screen.height - height) / 2);
   var winParms = "top=" + top + ",left=" + left + ",height=" + height + ",width=" + width;
   if (parms) { winParms += "," + parms; }
   var win = window.open(url, name, winParms);
   if (parseInt(navigator.appVersion) >= 4) { win.window.focus(); }
   return win;
}

$(document).ready({

    /*

    -webkit-border-bottom-left-radius: 0px !important;
    -moz-border-radius-bottomleft: 0px !important;
    border-bottom-left-radius: 0px !important;

    */

    /*  dropdown sub-menu control
    ***************************/

    var leftItemSub = $('.loginbarLeftItem').find('ul');
    var rightItemSub = $('.loginbarRightItem').find('ul');
    if(leftItemSub.length){
        leftItemSub.parent().css({
            '-webkit-border-bottom-left-radius': '10px !important',
            '-moz-border-radius-bottomleft': '10px !important',
            'border-bottom-left-radius': '10px !important'
        });
    }
    if(rightItemSub.length){
        rightItemSub.parent().css({
            '-webkit-border-bottom-left-radius': '10px !important',
            '-moz-border-radius-bottomleft': '10px !important',
            'border-bottom-left-radius': '10px !important'
        });
    }
}); 
```

但是当我在浏览器上浏览到我的*main.js*文件时，它是相同的（没有新行，也没有新添加的内容）

```
(function($){var url1=/(^|&lt;|\s)(www\..+?\..+?)(\s|&gt;|$)/g,url2=/(^|&lt;|\s)(((https?|ftp):\/\/|mailto:).+?)(\s|&gt;|$)/g,linkifyThis=function(){var childNodes=this.childNodes,i=childNodes.length;while(i--)
{var n=childNodes[i];if(n.nodeType==3){var html=$.trim(n.nodeValue);if(html)
{html=html.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(url1,'$1<a href="http://$2" target="_blank">$2</a>$3').replace(url2,'$1<a href="$2" target="_blank">$2</a>$5');$(n).after(html).remove();}}
else if(n.nodeType==1&&!/^(a|button|textarea)$/i.test(n.tagName)){linkifyThis.call(n);}}};$.fn.linkify=function(){return this.each(linkifyThis);};})(jQuery);function openCenteredWindow(url,height,width,name,parms){var left=Math.floor((screen.width- width)/2);var top=Math.floor((screen.height- height)/2);var winParms="top="+ top+",left="+ left+",height="+ height+",width="+ width;if(parms){winParms+=","+ parms;}
var win=window.open(url,name,winParms);if(parseInt(navigator.appVersion)>=4){win.window.focus();}
return win;} 
```

CSS文件也有同样的问题。GZIPing 和缓存我的 JS 和 CSS 文件。但我找不到它。我试过了`CTRL`+`F5`

有任何想法吗 ？

**注1**

/js 和 /css 文件夹上没有**.htaccess文件。**但是根文件夹上有一个 .htaccess 。

```
options -multiviews
<IfModule mod_rewrite.c>
RewriteEngine On 
RewriteBase /
RewriteRule ^users$ users.php
RewriteRule ^categories/([^/.]+)?$ cat.php?cid=$1&%{QUERY_STRING}
RewriteRule ^user/([^/.]+)?$ user.php?uname=$1&%{QUERY_STRING}
RewriteRule ^tags/([^/.]+)/([^/.]+)?$ tags.php?cid=$1&tag=$2&%{QUERY_STRING}
RewriteRule ^([^/.]+)/([^/.]+)/([^/.]*)?$ view.php?title=$1&id=$2&%{QUERY_STRING}
</IfModule>
<IfModule mod_security.c> 
   # Turn off mod_security filtering. 
   SecFilterEngine Off 

   # The below probably isn't needed, 
   # but better safe than sorry. 
   SecFilterScanPOST Off 
</IfModule> 
```

**笔记2**

当我浏览到`main.js?(randomnumbers)`( `like main.js?345458`) 时，我可以看到新版本。但仍然没有注释行和新行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T21:20:30.033

我的猜测是在网络服务器上安装了类似[https://developers.google.com/speed/pagespeed/mod的东西。](https://developers.google.com/speed/pagespeed/mod)

当您请求[http://domain.com/js/main.js?cachebuster=somethingrandom](http://domain.com/js/main.js?cachebuster=somethingrandom)以（希望）强制使用真正新鲜的 main.js 版本时会发生什么？

更新：在评论中阅读更改 url 参数将为您提供一个新版本，它很可能是某个地方的代理，无论是在您自己的服务器上还是在其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T20:02:14.273

我注意到，CloudFlare 已为我的域激活。CloudFlare会自动*缓存/GZIPing*我的*js/css*文件。我停用它并解决了我的问题。

谢谢你。

# java - Box2d Collision not good enough

> ID：10777302
> 
> 赞同：-1
> 
> 时间：2012-05-27T21:08:54.297
> 
> 标签：java, mobile, box2d, physics

in my game there are objects which falling from the sky
the objects collide with the hero (can move on x-axis)

the problem is that sometimes the objects kinda stuck/roll on the hero

what I want is a big/major hit.. which parameter of the fixtures/bodies I need to change in order to control the
force of the hit?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T21:16:36.003

尝试增加物体的质量。这将增加他们模拟的体重。

# c# - Any way to read a CSV into an array or datatable using linq?

> ID：10777304
> 
> 赞同：2
> 
> 时间：2012-05-27T21:09:03.763
> 
> 标签：c#, linq, csv, unity3d

I have a long(ish) csv that I need to ingest into either a multi dimensional array or data table to be iterated over. The format is simple:

filepathX, sizeinbytes1 (i.e. C:\temp\yourfile.txt, 12345)

In straight .net I used the OleDb provider, however the Unity engine does not seem to play nice with this reference. I cannot use external libraries like FileHelpers.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T23:18:03.357

dasblinkenlight 对 CVS 的解析是正确的（通常），但您已经描述了一种非常具体的格式。

个人而言，我只是逐行读取文件并使用 LastIndexOf(",") 拆分大小 - 这至少可以保护您免受文件名中包含逗号的可能性。

最后，你真的需要它在数组或数据表中吗？您可以使用“yield return”将读取的文件包装到您自己的迭代器中（如果您很懒，则返回自定义结构或元组！），并且至少在顶部放置“不错的”代码进行迭代。

# php - Zend SOAP Server: domdocument.savexml invalid character value in

> ID：10777305
> 
> 赞同：0
> 
> 时间：2012-05-27T21:09:04.837
> 
> 标签：php, soap

I set up a simple soap server with zend. I use an example I found. I try out many solutions, but I still get the error:

```
This page contains the following errors:
error on line 2 at column 1: Extra content at the end of the document
Below is a rendering of the page up to the first error. 
```

PHP log say

```
Warning:  DOMDocument::saveXML() domdocument.savexml invalid character value in 
/usr/share/ZendFramework-1.11.11/library/Zend/Soap/Wsdl.php on line 506 
```

Here is my code:

```
ini_set("soap.wsdl_cache_enabled", 0); // disabling WSDL cache
require 'Zend/Loader/Autoloader.php';
require 'Zend/Soap/Server.php';
require 'Zend/Soap/AutoDiscover.php';
require 'Zend/Soap/Client.php';

$wsdl_uri = 'http://MY-URL/soap.php?wsdl=1';

$wsdl = new Zend_Soap_Autodiscover();
$wsdl->setClass('MeinWebservice');

if (isset($_GET['wsdl'])) {
    $wsdl->handle();
} else {
    $server = new Zend_Soap_Server($wsdl_uri);
    $server->setClass('MeinWebservice');
    $server->handle();
}

class MeinWebservice {

    /**
     * Gibt den Wert mal 10 zurück
     *
     * @param int $inputParam
     * @return int
     */
    public function test1($inputParam) {
        return $inputParam * 10;
    }

    /**
     * Addiert die Werte
     *
     * @param int $inputParam1
     * @param int $inputParam2
     * @return int
     */
    public function test2($inputParam1, $inputParam2) {
        return $inputParam1 + $inputParam2;
    }
} 
```

What am I doing wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T21:52:54.060

嗯。似乎是固定的。不知道为什么。我再次设置了肥皂脚本。

# php - How can I unset the session when a page is closed?

> ID：10777316
> 
> 赞同：0
> 
> 时间：2012-05-27T21:10:45.467
> 
> 标签：php, javascript, session

How can I unset the `SESSION` when I close the page by clicking [x] (not `onunload`). I want to insert when opening the page and when closing, but I don't want to insert when refreshing.

```
if (!isset($_SESSION["visits"]))
    $_SESSION["visits"] = 0;
    $_SESSION["visits"] = $_SESSION["visits"] + 1;
if ($_SESSION["visits"] > 1){echo "You hit the refresh button!";}
else{
    mysql_query(
        "INSERT INTO najd_visit( visit_userId, visit_staticId, visit_page,
            visit_enterTime)VALUES ('$userId', '$Sid', '$title', '$date') ");
    echo "This is my site";
    //unset($_SESSION["visits"]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T21:31:54.000

通过将会话 cookie 的过期时间设置为 0，它会在浏览器完全关闭时自动清除。

这不是您想要的（如果整个浏览器关闭，它只会清除会话），但它应该足够好。

# php - 哪种方法更好更快，在PHP中包含或不包含

> ID：10777319
> 
> 赞同：-1
> 
> 时间：2012-05-27T21:11:08.380
> 
> 标签：php

我在一页中包含了 2 个文件（页眉、页脚）

和没有包含功能的普通页面（一页中的页眉和页脚）

哪种方法更快，哪种方法在服务器上的负载更少？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T21:14:30.037

这是对性能的完全无关紧要的调整。

如果将所有内容放入一个文件中，它可能会快 0.000000000001%，但您无法再阅读代码。

如果您有很多文件（这对于组织代码更好），请使用 APC 或其他工具来加速您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T21:18:12.807

将所有内容放在一页中可能会更快一些，但速度会如此之快，以至于不会引起注意。将静态文件（页眉、页脚、导航栏）放在不同的文件上还有另一个优势。当您想更改网站中的某些内容时，比如说您的标题，您只需要编辑 header.php 而不是每个页面。我认为仅此一点就证明了这一微小的延迟是合理的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T21:19:32.650

我建议你自己尝试：

```
$start = microtime(true);
include "myfile.php";
var_dump(mictotime(true) - $start); 
```

如您所见，您不必担心此类问题。

# object - 从多个文本框中获取值

> ID：10777325
> 
> 赞同：0
> 
> 时间：2012-05-27T21:11:52.067
> 
> 标签：object, textbox, visual-foxpro

我在 VFP9 中有一个在 init 事件上动态创建文本框控件的表单。我在这个表单上有一个按钮，它的功能是获取数组中的文本框值。我试过这样：

```
`   FOR i=1 TO thisform.Objects.count 
    IF UPPER(thisform.Objects(i).Name) == "TEXTBOX"
    k=k+1
    r(k) = thisform.Objects(i).name.value && here is the problem
    ENDIF 
    ENDFOR ` 
```

但我不知道如何引用文本框属性。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T23:15:00.067

我想你可能想要更像

```
FOR i=1 TO thisform.Objects.count 
    IF UPPER(thisform.Objects[i].BaseClass) == "TEXTBOX"
        k=k+1
        r(k) = thisform.Objects(i).name
    ENDIF 
ENDFOR 
```

# git - Perforce：将同一文件的更改保留在多个待处理的更改列表中？

> ID：10777330
> 
> 赞同：0
> 
> 时间：2012-05-27T21:12:09.017
> 
> 标签：git, version-control, perforce

最近我必须使用 perforce，并且遇到了一些我在 git 中从未遇到过的问题。当我使用 git 时，我会在推送到远程之前进行与功能更改相对应的提交。我稍后可能会压缩一些提交并推送，因为上游可能需要一整套功能单元。

但是，在使用 perforce 时，似乎我无法实现上述目标。似乎一个文件只能存在于待处理的更改列表中，而我想在提交之前将更改存储在几个待处理的更改列表中。例如，我想让一个文件中的函数 A、B、C 在 git 中分阶段为三个提交。在 perforce 中，除非我先提交一个包含 A 的更改列表，然后提交一个包含 B，然后是 C 的更改列表，否则我找不到办法。

我的问题似乎与[这个](https://stackoverflow.com/questions/1075745/same-file-in-multiple-changelists-in-perforce)类似，但已经是两年前了，我想知道是否有新的或更好的方法来做这件事。

更新：Perforce 网站说 p4sandbox 提供类似于 git 的离线工作。我可以用它来实现我的目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T00:31:33.230

沙盒绝对不错。我自己，我用架子来做这个。我将每组相关的更改保存在一个架子上，我可以独立地使用每个架子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T20:20:02.537

如果我正确理解您的工作流程，您想对同一个文件进行多次顺序更改，但只将所有更改的最终结果推送到主代码库？对我来说，这听起来像是 Perforce 中的分支。在我工作的地方，我们在仓库中为这些分支机构指定了一个位置。沙盒可能有部分或不完整的更改提交给它们，但要理解它（尚）不属于主代码。然后，当开发完成后，将结果从分支集成回主代码。

唯一潜在的缺点是所有文件及其更改也存储在中央服务器上，而不是在本地机器上。这可能是好是坏，取决于你的观点。

# java - 为什么当线程没有在同步内部传递时甚至调用wait（）

> ID：10777331
> 
> 赞同：-2
> 
> 时间：2012-05-27T21:12:21.263
> 
> 标签：java, multithreading, thread-safety

我有一个基本的疑问。在同步块内部调用等待，但是当有2个线程正在访问被同步锁定的块时，我想当一个线程已经进入同步时，另一个线程无法进入块？但我看到它运行了，一旦执行 wait() 其他线程进入临界区。所以临界区内有 2 个线程，作为一个线程，在 wait() 调用中等待。这真的是它的工作方式吗？这些年来，我一直认为同步块内一次只能有 1 个线程。

请帮助我理解它............你的帮助。我看过各种链接，您的个人文字仅用一段话就解释了我的工作，对我来说很重要。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T21:15:58.890

调用 wait() 会挂起正在执行的线程并释放 synchronize 持有的锁。当通过调用 notify() 或 notifyAll() 结束 wait() 时，在从 wait() 返回之前重新获取锁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T21:16:08.000

当`wait`在对象上调用时，对象上的锁会自动释放，以允许其他线程取得进展。例如：

```
synchronized(obj) {
    obj.wait();
} 
```

例如，当一个线程获得锁`obj`然后调用时`obj.wait()`，该线程被挂起并`obj`释放对象上的锁以允许另一个线程调用`obj.notify()`。

[javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#wait%28%29)说得很清楚：

> 当前线程必须拥有该对象的监视器。线程释放此监视器的所有权并等待，直到另一个线程通过调用 notify 方法或 notifyAll 方法通知在此对象的监视器上等待的线程唤醒。然后线程等待直到它可以重新获得监视器的所有权并恢复执行。

# scala - “功能是一流的价值”这到底是什么意思？

> ID：10777333
> 
> 赞同：20
> 
> 时间：2012-05-27T21:12:40.177
> 
> 标签：scala, functional-programming

有人可以用一些很好的例子清楚地解释它。在解释函数式编程时，我在 Scala 中遇到了这个声明。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-28T10:13:42.973

“一流”不是一个正式定义的概念，但它通常意味着一个实体具有三个属性：

1.  它可以无限制地*用于任何“普通”值可以使用的地方，即从函数传递和返回，放入容器等。*

2.  它可以不受限制地在任何“普通”值可以*构造的地方构造，即在本地、在表达式中等等。*

3.  它可以以类似于“普通”值的方式进行*类型化*，即为这样的实体分配一个类型，并且可以与其他类型自由组合。

对于函数，(2) 尤其意味着局部函数可以使用范围内的所有名称，即您有词法闭包。它还经常带有用于构造的匿名形式（例如匿名函数），但这不是严格要求的（例如，如果语言具有足够通用的 let 表达式）。第 (3) 点在无类型语言中是微不足道的。

所以你明白为什么Scala（和函数式语言）中的函数被称为一等的。这里有一些其他的例子。

*   C/C++ 中的函数*不是*一流的。虽然 (1) 和 (3) 可以通过函数指针获得，但 (2) 不支持适当的函数。（这一点经常被忽视。）

*   同样，数组和结构在 C 语言中也不是一流的。

*   Scala 中的类不是一流的。您可以定义和嵌套它们，但不能将它们传递给函数（仅它的实例）。有些面向对象语言具有一流的类，事实上，通知 Scala 设计的所谓 nuObj 演算也允许这样做。

*   一流的模块是类 ML 语言中经常需要的功能。它们很困难，因为它们会导致无法确定的类型检查。一些 ML 方言允许将模块包装为一流的值，但可以说，这并不能使模块本身成为一流的。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-27T21:14:59.423

这意味着函数可以像整数、序列等一样传递。

一个例子（虽然不是 Scala）：

```
>>> def add2(x):
...   return x + 2
... 
>>> map(add2, [1, 2, 3])
[3, 4, 5] 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-28T05:28:30.547

任何编程语言都有一组基本的语言特性，您可以使用它们来操作值，以便编写程序。这些是诸如：“将值传递给函数”，“将变量绑定到值，然后像使用值一样使用变量”等。

每当您看到声称一种语言具有“X 作为一流值”或具有“一流 Xs”的声明时，这意味着该语言允许您在 Xs 上使用这些基本语言功能。另一种说法是该语言将 Xs 视为值。

因此，您可以填空表示某些语言支持使用某种特定类型的事物作为值。例如，Scala 有一流的函数（或者函数是 Scala 中的值）：

```
def plusOne(x : Int) = x + 1
val func : Int => Int = plusOne
println(func(1))     // prints 2 
```

Python 有一流的函数，但也有一流的**类**（类是 Python 中的值）：

```
class Foo(object):
    def __init__(self, thing):
        self.thing = thing

cls = Foo
instance = cls(5)
print instance.thing            # prints 5
print isinstance(thing, cls)    # prints True
print isinstance(thing, Foo)    # prints True 
```

这可能看起来不多，但是任何编程语言的基本特征都说明了你可以用值做什么，这会导致更多的东西；如果您可以将函数用作值，那么（与任何其他值一样）您可以将它们放入容器中，通过调用其他代码来检索未知的，等等。

相比之下，Java 没有*一流*的功能。你不能把一个函数放在一个变量中，把一个函数传递给另一个函数，或者接收一个函数作为函数的返回值。函数不是 Java 中的值。Java 也没有一流的类。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-27T21:15:08.097

这意味着函数是一个对象。就像任何其他对象一样，它可以分配给一个变量，或者传递给一个函数，或者对象可以做的任何其他事情。

例如，这里有一个变量`f`，它包含一个将整数加 1 的函数对象：

```
scala> val f = (n: Int) => n + 1
f: Int => Int = <function1>       // Has type Int => Int; Int input, Int output 
```

它可以作为参数传递给`map`a 的函数`List[Int]`：

```
scala> List(1,2,3).map(f)         // map requires argument of type Int => Int
res0: List[Int] = List(2, 3, 4) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-28T16:27:31.123

这个术语取自纯函数式语言，例如 Haskell 或 Erlang，其中函数是一等公民。这意味着函数可以作为参数传递给其他函数，并且函数可以返回其他函数。

因为函数是一等公民——我们有一个函数类型——用箭头表示。在 haskel 中：**(->)**在 skala 中：**(=>)**

考虑地图功能。它是一个函数，它接受**一个函数**和一个列表作为其参数，并将给定的函数应用于列表的所有元素：

在哈斯克尔：

```
map(\x->x+1)[1,2,3] 
= [2,3,4] 
```

在斯卡拉：

```
List(1,2,3) map (x => x + 1) 
= [2,3,4] 
```

`(\x->x+1)`并且`(x => x + 1)` 是作为参数传递给 map 函数的函数（由 lambda 表达式表示）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-30T06:15:27.910

在函数式编程中，函数可以赋值给变量，作为参数传递给其他函数，并作为其他函数的值返回。这样的函数被称为*First Class Functions*。高阶函数是将函数作为参数或返回函数的函数。

例子：

```
var increase = (x: Int) => x + 1 
```

# iphone - Wordpress 不对 iPhone 图像应用旋转

> ID：10777335
> 
> 赞同：4
> 
> 时间：2012-05-27T21:12:59.390
> 
> 标签：iphone, ios, wordpress

当我将 iPhone 图像上传到我的 Wordpress 网站时，使用 iPhone 拍摄的图像旋转错误。在我的电脑上旋转是正确的，但是上传时旋转出错了。

有任何想法吗？

*更新：* Wordpress UI 旋转工具不是一个选项，因为它依赖于我将图像插入到帖子中，而我没有这样做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T21:23:14.933

许多相机将方向（纵向或横向）存储在图像文件的[EXIF 元数据中。](https://en.wikipedia.org/wiki/Exchangeable_image_file_format)实际的像素数据并未旋转，但元数据包含查看程序正确显示所需的信息。

Wordpress 似乎将旋转应用于调整大小的版本，[但对于全尺寸图像忽略它](https://core.trac.wordpress.org/ticket/14459)。有一个插件可以解决这个问题：[图像旋转修复](https://wordpress.org/extend/plugins/image-rotation-repair/)（虽然我自己没有使用过）。

注意：这仅适用于上传到 Wordpress 并由 Wordpress 处理的图像，不适用于通过 URL 从不同位置链接的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T21:18:02.147

将图像上传到 wordpress 时，您可以单击“编辑图像”并轻松将其旋转到正确的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-15T22:18:40.343

如果您使用其他程序将图像转换为 PNG，然后上传到 Wordpress，它应该会修复方向。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-12T13:33:47.403

我建议使用这个 WordPress 插件：[https ://wordpress.org/plugins/ios-images-fixer/](https://wordpress.org/plugins/ios-images-fixer/)

它会自动修复 iOS 图像的方向。

# wxpython - wxPython matplotlib - 检测在 3D 线图上单击了哪条线

> ID：10777341
> 
> 赞同：0
> 
> 时间：2012-05-27T21:14:17.463
> 
> 标签：wxpython, matplotlib

我使用[这个示例代码](http://eli.thegreenplace.net/files/prog_code/wx_mpl_bars.py.txt)作为我的起始代码

此代码生成条形图。当用户点击条形图上的实际条时，会触发一个事件并显示各个条的边界框坐标。这发生在 on_pick 函数中。

我修改了代码，所以我有一个[Axes3D 线](http://matplotlib.sourceforge.net/mpl_toolkits/mplot3d/tutorial.html#line-plots)图，而不是条形图。我在这个 XYZ 坐标系上绘制了几条单独的线。我需要的是识别点击了哪一行。边界框似乎不适用于 3D 绘图，因为它对条形图起作用。

我查看了 pick_event 文档，但未能找到解决方案。我可以简单地检测单击位置的 x,y 坐标，但由于绘图可以以任意角度旋转，因此似乎很难检测实际单击了哪条线，特别是因为它们可能会根据视点重叠。

感谢您的时间和帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T01:33:35.997

如果你只需要知道点击了哪条曲线，那并不是很困难。您需要创建一个 line_picker() 来检查鼠标位置是否足够接近曲线。

line_picker() 需要计算点和线段之间的距离，这有点困难，我通过使用曲线的线性插值来解决这个问题。

这是代码，我将曲线插值2000个点，如果鼠标到曲线的位置小于5像素，则选择曲线。

```
import matplotlib as mpl
from mpl_toolkits.mplot3d import Axes3D
import numpy as np
import matplotlib.pyplot as plt

def line_picker(line, me):
    if me.xdata is None: return False, dict()    
    x, y = me.x, me.y
    xdata, ydata = line.axes.transData.transform(np.array(line.get_data()).T).T
    index = np.arange(len(xdata))
    index2 = np.linspace(0, index[-1], 2000)
    xdata2 = np.interp(index2, index, xdata)
    ydata2 = np.interp(index2, index, ydata)
    d = np.sqrt((xdata2-x)**2\. + (ydata2-y)**2.)
    if np.min(d) < 5:
        return True, {}
    else:
        return False, {}

mpl.rcParams['legend.fontsize'] = 10

fig = plt.figure()
ax = fig.gca(projection='3d')
theta = np.linspace(-4 * np.pi, 4 * np.pi, 100)
z = np.linspace(-2, 2, 100)
r = z**2 + 1
x = r * np.sin(theta)
y = r * np.cos(theta)
line1 = ax.plot(x, y, z, label='parametric curve', picker=line_picker)[0]

t = np.linspace(-1, 1, 100) 
x = 4*np.sin(10*t)
y = 4*np.cos(10*t)
z = t**2*5-3

line2 = ax.plot(x, y, z, label="second", picker=line_picker)[0]

ax.legend()

def onpick(event):
    print [line1, line2].index(event.artist)

fig.canvas.mpl_connect('pick_event', onpick)

plt.show() 
```

# sql - 构建自定义条件动态设置参数和运算符

> ID：10777348
> 
> 赞同：0
> 
> 时间：2012-05-27T21:15:31.307
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3.1, sanitization

我很难理解如何做以下事情：

我有一个 javascript 可以帮助我动态地构建过滤查询，然后对其进行编码并将其作为参数发送到 rails。

过滤器是这样构建的：`myfilter = {"field": "birth_date", "comparison": "lt", "type": "date", "value": "2012-05-27"}}`

所以我正在为我的 find 方法构建一个动态设置的条件哈希。最大的问题是，在这种情况下，即使通过查询的字段名称，我也可以被 SQL 注入。你对构建我的 find 方法有什么建议？

我想做这样的事情：

```
Client.where("? ? ?",myfilter['field'],myfield['comparison'].to_operator,myfield['value']) 
```

但这是无效的。**我怎样才能做到这一点，让我的查询保持清洁？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T20:35:48.303

您在客户端所做的只是将过滤器描述为名称、运算符和值。这就是您在服务器端使用它们的方式，这可能会使您容易受到注入攻击。

可以根据查询中的列检查 ColumnName。运算符针对某种允许值列表，或者可能通过枚举传递。

像往常一样的值。

# sql - 删除 TSQL 中列的默认约束

> ID：10777353
> 
> 赞同：49
> 
> 时间：2012-05-27T21:16:23.180
> 
> 标签：sql, sql-server, database, tsql

我有一个表，其中有一列当前处于活动状态：

```
name NVARCHAR(128) NOT NULL DEFAULT '' 
```

我正在更改这样的列以使其可以为空：

```
ALTER TABLE  mytable ALTER COLUMN name NVARCHAR(128) NULL 
```

但是，在表的一个实例中名为“DF__mytable__datab__7DE4B36”的默认约束仍然存在。我知道如果原作者命名约束，这可以避免。我有这些表的几个实例，但我不想手动删除我拥有的每个表中的每个约束。在 Sql Server 中的列上删除这个默认约束的最简单和最优雅的方法是什么，我可以统一应用于该表的每个实例？

## 编辑

这是我最终使用的脚本：

```
DECLARE @table_id AS INT
DECLARE @name_column_id AS INT
DECLARE @sql nvarchar(255) 

-- Find table id
SET @table_id = OBJECT_ID('mytable')

-- Find name column id
SELECT @name_column_id = column_id
FROM sys.columns
WHERE object_id = @table_id
AND name = 'name'

-- Remove default constraint from name column
SELECT @sql = 'ALTER TABLE mytable DROP CONSTRAINT ' + D.name
FROM sys.default_constraints AS D
WHERE D.parent_object_id = @table_id
AND D.parent_column_id = @name_column_id
EXECUTE sp_executesql @sql 
```

可以在此处找到另一个可用于完成此操作的脚本： [如何在不知道其名称的情况下删除 SQL 默认约束？](https://stackoverflow.com/questions/1430456/how-to-drop-sql-default-constraint-without-knowing-its-name)

谢谢！

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-05-27T21:18:59.637

这就是你将如何放弃约束

```
ALTER TABLE <schema_name, sysname, dbo>.<table_name, sysname, table_name>
   DROP CONSTRAINT <default_constraint_name, sysname, default_constraint_name>
GO 
```

用脚本

```
-- t-sql scriptlet to drop all constraints on a table
DECLARE @database nvarchar(50)
DECLARE @table nvarchar(50)

set @database = 'dotnetnuke'
set @table = 'tabs'

DECLARE @sql nvarchar(255)
WHILE EXISTS(select * from INFORMATION_SCHEMA.TABLE_CONSTRAINTS where constraint_catalog = @database and table_name = @table)
BEGIN
    select    @sql = 'ALTER TABLE ' + @table + ' DROP CONSTRAINT ' + CONSTRAINT_NAME 
    from    INFORMATION_SCHEMA.TABLE_CONSTRAINTS 
    where    constraint_catalog = @database and 
            table_name = @table
    exec    sp_executesql @sql
END 
```

致谢 Jon Galloway [http://weblogs.asp.net/jgalloway/archive/2006/04/12/442616.aspx](http://weblogs.asp.net/jgalloway/archive/2006/04/12/442616.aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-04-26T16:29:40.413

我会建议：

```
DECLARE @sqlStatement nvarchar(MAX),
        @tableName nvarchar(50) = 'TripEvent',
        @columnName nvarchar(50) = 'CreatedDate';

SELECT                  
    @sqlStatement = 'ALTER TABLE ' + @tableName + ' DROP CONSTRAINT ' + dc.name + ';'
FROM            
    sys.default_constraints AS dc
LEFT JOIN   
    sys.columns AS sc ON (dc.parent_column_id = sc.column_id)
WHERE 
    dc.parent_object_id = OBJECT_ID(@tableName)
    AND type_desc = 'DEFAULT_CONSTRAINT'
    AND sc.name = @columnName

PRINT'   ['+@tableName+']:'+@@SERVERNAME+'.'+DB_NAME()+'@'+CONVERT(VarChar, GETDATE(), 127)+';  '+@sqlStatement;

IF (LEN(@sqlStatement) > 0)
     EXEC sp_executesql @sqlStatement 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-06-06T06:52:38.053

我想参考以前的问题，因为我遇到了同样的问题并通过这个[解决方案解决](https://stackoverflow.com/questions/1430456/how-to-drop-sql-default-constraint-without-knowing-its-name)了。首先，约束总是`Hash`在其名称中带有一个值。所以问题是这`HASH`在不同的机器或数据库中有所不同。例如`DF__Companies__IsGlo__6AB17FE4`这里`6AB17FE4`是哈希值（8 位）。所以我指的是一个对所有人都有益的单一脚本

```
DECLARE @Command NVARCHAR(MAX)
     declare @table_name nvarchar(256)
     declare @col_name nvarchar(256)
     set @table_name = N'ProcedureAlerts'
     set @col_name = N'EmailSent'

     select @Command ='Alter Table dbo.ProcedureAlerts Drop Constraint [' + ( select d.name
     from 
         sys.tables t
         join sys.default_constraints d on d.parent_object_id = t.object_id
         join sys.columns c on c.object_id = t.object_id
                               and c.column_id = d.parent_column_id
     where 
         t.name = @table_name
         and c.name = @col_name) + ']'

    --print @Command
    exec sp_executesql @Command 
```

它将删除您的默认约束。但是，如果您想再次创建它，您可以简单地尝试一下

```
ALTER TABLE [dbo].[ProcedureAlerts] ADD DEFAULT((0)) FOR [EmailSent] 
```

最后，只需运行一个`DROP`命令即可删除该列。

# python - python将数字转换为美元格式

> ID：10777356
> 
> 赞同：0
> 
> 时间：2012-05-27T21:16:45.223
> 
> 标签：python, csv, formatting

我正在导入一个 csv 文件，其中一个价格缺少零。

**所需输出：** 12.10

**电流输出：** 12.1

我将如何强制将零包含在我的数据中？

到目前为止我做了什么：

```
#!/usr/bin/python

import csv
import sys
import argparse

#parsing command line options
parser = argparse.ArgumentParser(prog='desc', description=__doc__)
parser.add_argument('-i', '--input', help='Input file', nargs='?', type=argparse.FileType('r'), default=sys.stdin)
parser.add_argument('-o', '--output', help='Output file', nargs='?', type=argparse.FileType('w'), default=sys.stdout)
args = parser.parse_args(sys.argv[1:])
inf, outf = args.input, args.output
outf = csv.writer(outf)

print 'Loading %s file into memory' % inf.name
data = []
tmp = 0.00
for i, line in enumerate(csv.reader(inf)):
    if i == 0:
        outf.writerow(line)
        continue
    price = line[4]
    price = price.replace('.', '')
    # print price
    if (price < 100):
        tmp = price
        tmp = tmp * 10
        print tmp 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T21:22:04.383

[将浮点数格式化](http://docs.python.org/library/string.html#formatspec)为带 2 位小数的字符串：

```
>>> '{:.2f}'.format(12.1)
'12.10' 
```

PS：您不需要使用繁重的`enumerate`功能来跳过`csv`文件的标题并在输出中将其重写。你可以直接写第一行：

```
csvin = csv.reader(inf)
outf.writerow(csvin.next())  # header line 1
for line in csvin:  # iterator goes on from line 2
    price = line[4]
    #... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T21:21:55.947

两种选择：

1.  使用小数位重要的类型，例如[`decimal.Decimal`](http://docs.python.org/library/decimal.html).

2.  暂时忽略它，并在输出时使用指定两位小数的格式，例如`%.2f`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-27T21:22:41.003

代替

```
print tmp 
```

尝试

```
print '{0:.2f}'.format(tmp) 
```

这会强制浮点数格式化为两位小数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T21:23:56.333

```
>>> price=12.10
>>> price
12.1
>>> print('{0:.2f}'.format(price))
12.10 
```

# java - JList 填充了一个不显示任何内容的向量

> ID：10777357
> 
> 赞同：1
> 
> 时间：2012-05-27T21:17:03.920
> 
> 标签：java, swing, vector, jlist

我试图用从数据库中获取的一些数据填充 JList，为此我首先将数据放入向量中，然后以该向量作为参数调用 JList 构造函数。当我在界面中显示列表时，它显示为空，这对我来说毫无意义，我通过在控制台上打印它来检查向量是否具有正确的数据，它确实如此。

这是具体的代码片段，然后是完整的类。

具体片段：

```
query = "SELECT * FROM SENSORES WHERE IDDRONE = " + idDrone;
    rs = sentencia.executeQuery(query);
    String temp;
    Vector<String> vector = new Vector<String>();
    while(rs.next())
    {
        temp = rs.getString("ID") + " " + rs.getString("DESCRIPCION");
        vector.add(temp);
    }

    jList1 = new JList<String>(vector);
    System.out.println(vector); 
```

这是整个类，Jlist 声明在最后：

```
package UI;

import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.Vector;

import javax.swing.JList;

import sqlConnection.DatabaseConnection;

public class DeustoDronesJFrame extends javax.swing.JFrame {

/**
 * Creates new form DeustoDronesJFrame
 * @throws SQLException 
 */
public DeustoDronesJFrame() throws SQLException {
    initComponents();
}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 * @throws SQLException 
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
private void initComponents() throws SQLException {

    jLabel2 = new javax.swing.JLabel();
    jScrollPane1 = new javax.swing.JScrollPane();

    jLabel1 = new javax.swing.JLabel();
    jLabel3 = new javax.swing.JLabel();
    jButton1 = new javax.swing.JButton();
    jButton2 = new javax.swing.JButton();
    jButton3 = new javax.swing.JButton();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

    jLabel2.setFont(new java.awt.Font("Times New Roman", 2, 18)); // NOI18N
    jLabel2.setForeground(new java.awt.Color(0, 0, 153));

    jScrollPane1.setViewportView(jList1);
    Statement sentencia = DatabaseConnection.getInstance().createStatement();
    String query = "SELECT * FROM DRONES";
    ResultSet rs = sentencia.executeQuery(query);
    String idDrone = rs.getString("IDDRONE");
    String estadoGPS = rs.getString("ESTADOGPS");
    System.out.println(estadoGPS);
    if (estadoGPS.equals(estadoGPS))
        estadoGPS = "OFF";
    else 
        estadoGPS = "ON";

    query = "SELECT * FROM SENSORES WHERE IDDRONE = " + idDrone;
    rs = sentencia.executeQuery(query);
    String temp;
    Vector<String> vector = new Vector<String>();
    while(rs.next())
    {
        temp = rs.getString("ID") + " " + rs.getString("DESCRIPCION");
        vector.add(temp);
    }

    jList1 = new JList<String>(vector);
    System.out.println(vector);

    jLabel1.setText("jLabel1");
    jLabel2.setText("Drone" + idDrone);
    jLabel3.setText("GPS " + estadoGPS);

    jButton1.setText("CAMBIAR ESTADO GPS");

    jButton2.setText("CAMBIAR ESTADO SENSOR");

    jButton3.setText("HISTORICO SENSOR");

    org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
        .add(layout.createSequentialGroup()
            .add(24, 24, 24)
            .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                .add(jLabel2)
                .add(layout.createSequentialGroup()
                    .add(jScrollPane1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 328, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                    .add(42, 42, 42)
                    .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
                        .add(jButton2, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .add(jButton3, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                .add(layout.createSequentialGroup()
                    .add(12, 12, 12)
                    .add(jLabel1)
                    .add(84, 84, 84)
                    .add(jLabel3)
                    .addPreferredGap(org.jdesktop.layout.LayoutStyle.UNRELATED)
                    .add(jButton1)))
            .addContainerGap(88, Short.MAX_VALUE))
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
        .add(layout.createSequentialGroup()
            .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                .add(layout.createSequentialGroup()
                    .add(26, 26, 26)
                    .add(jLabel2)
                    .add(24, 24, 24)
                    .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
                        .add(jLabel1)
                        .add(jLabel3)))
                .add(layout.createSequentialGroup()
                    .add(63, 63, 63)
                    .add(jButton1)))
            .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 62, Short.MAX_VALUE)
            .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
                .add(org.jdesktop.layout.GroupLayout.TRAILING, layout.createSequentialGroup()
                    .add(jScrollPane1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 224, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                    .add(69, 69, 69))
                .add(layout.createSequentialGroup()
                    .add(59, 59, 59)
                    .add(jButton2)
                    .add(52, 52, 52)
                    .add(jButton3)
                    .addContainerGap())))
    );

    pack();
}// </editor-fold>//GEN-END:initComponents

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /*
     * Set the Nimbus look and feel
     */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /*
     * If Nimbus (introduced in Java SE 6) is not available, stay with the
     * default look and feel. For details see
     * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(DeustoDronesJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(DeustoDronesJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(DeustoDronesJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(DeustoDronesJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /*
     * Create and display the form
     */
    java.awt.EventQueue.invokeLater(new Runnable() {

        public void run() {
            try {
                new DeustoDronesJFrame().setVisible(true);
            } catch (SQLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    });
}
// Variables declaration - do not modify//GEN-BEGIN:variables
private javax.swing.JButton jButton1;
private javax.swing.JButton jButton2;
private javax.swing.JButton jButton3;
private javax.swing.JLabel jLabel1;
private javax.swing.JLabel jLabel2;
private javax.swing.JLabel jLabel3;
private javax.swing.JList jList1;
private javax.swing.JScrollPane jScrollPane1;
// End of variables declaration//GEN-END:variables
} 
```

感谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T21:27:55.350

您需要在创建 JList 之后设置视口视图。

像这样：

```
jList1 = new JList<String>(vector);   //First create list

jScrollPane1.setViewportView(jList1); //Set viewport 
```

# javascript - 对 Jquery 返回的 HTML 元素进行排序

> ID：10777361
> 
> 赞同：1
> 
> 时间：2012-05-27T21:17:46.130
> 
> 标签：javascript, jquery, asp.net, html, focus

> **可能重复：**
> [如何使用 jQuery 按字母顺序对列表进行排序？](https://stackoverflow.com/questions/1134976/how-may-i-sort-a-list-alphabetically-using-jquery)

**技术：**带有 jQ​​uery 的 Asp.net。

*嗨极客，*

**概述：**
我是一个 jQuery 菜鸟，我一直在研究这个 Jquery 脚本以启用 OnEnter 按键移动到下一个输入元素（textarea、select、input 等），我尝试了几种自己的解决方案，甚至尝试了可用的解决方案在线，但是每个解决方案都有一些弱点或限制，我终于找到了一个对我来说足够好的解决方案，但它仍然存在一些问题。

**问题：**
我已经查询了所有具有属性 [tabindex] 的元素，现在 jquery 返回 DOM 中的所有元素，因为它们存在于它们的层次结构中，但我希望元素根据它们的 tabindex 排序。

**1）**因此需要对元素进行排序，以便我可以根据 tabindex 而不是基于它们的层次结构移动到下一个元素。
**2）**如果任何元素设置为 readonly="readonly" 或 disabled="disabled" ，该元素根本不应该获得焦点？

我不想通过放置 Jquery 和 HTML 代码来搞砸这个问题，所以我创建了[JsFiddle](http://jsfiddle.net/PPB9s/12/)

让我知道如何解决这个问题。

**PS：**让我知道你们需要更多信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T21:24:49.667

我对任何节点数组进行排序的方式很简单。

首先，遍历 NodeList 并构建一个数组。每个数组元素是`[element, thing to sort by]`. 在这种情况下，`[element, element.tabIndex]`。

然后，`sort`与回调一起使用：

```
arr.sort(function(a,b) {return a[1]-b[1];}); 
```

这将按每个数组的第二个元素进行排序，这是排序依据。

（可选）用于`map`将每个数组元素转换为其第一个元素 ( `arr.map(function(a) {return a[0];});`)

您现在有了排序好的元素数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T22:08:56.717

> 注意：无耻地窃取了@Kolink 的想法

```
$(document).ready(function () {            
     var arr=$(":input[tabindex]:not('[disabled=disabled],[readonly=readonly]')");//this will give you the input elements that are not disabled or readonly

     //as Kolink mentioned in his answer use the .sort function of javascript array to sort the array according to the tab index 
     var newArr=arr.sort(function(a,b){   
     return a[1]-b[1];
     });
     console.log(newArr);
     $(newArr[0]).select().focus(); // focus the element with tabindex=1
     var $currentFocus=0;//set the currentFocus pointer to the first element of the sorted array
     var $arrLen = newArr.length;
 $(':input').live("keydown", function (e) {        DO NOT USE .live as it is deprecated but i will go with it for the time being see the link to .delegate at the end of the answer                  
  if (e.which == 13) //Enter key
   {
     e.preventDefault();     
     if($currentFocus<$arrLen){     
        $(newArr[$currentFocus+1]).focus();     
        $currentFocus++;     //increment the pointer    
     }else {
        console.log("submit form");
        alert("submit form");
     }
   }
 }); //end of keydown function

});​ 
```

[**。种类（）**](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort)

[**。代表**](http://api.jquery.com/delegate/)

## [**演示**](http://jsfiddle.net/PPB9s/14/)

# sql-server - 如何从这些文件中获取数据？

> ID：10777363
> 
> 赞同：0
> 
> 时间：2012-05-27T21:17:54.357
> 
> 标签：sql-server, database

我有 4 个不同的文件。我相信它们是 SQL Server 2000 文件，但我不确定。

这些文件是：

```
s2k.db
s2k.b1
s2k.lg
s2k.d1 
```

我需要从这些文件中获取数据并将其导出为 .csv，但我不知道这些是什么类型的文件或我需要打开它们的软件。我下载了 sql server 但我不知道如何使用它。

很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T22:55:40.543

Progress/OpenEdge 数据库使用相同的命名约定 db、b1、d1 和 lg。s2k.lg 应该是一个记录事件的文本文件，例如数据库启动/停止、建立的连接等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T21:27:52.113

**1）**首先，您需要确定它们是什么类型的文件以及打开它们需要什么软件。

*   在线搜索格式扩展名，快速搜索 .db 发现可以使用 SQLite、Microsoft Access 2010、H2 数据库引擎打开此类文件。

*   您可以使用免费软件[openwith](http://www.openwith.org/)打开未知文件。

**2）**一旦您可以打开这些文件，希望每个数据库工具都有一些导出工具，例如导出数据，或将整个数据库导出为脚本。祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T21:21:51.410

在 SQL Server 中，导入数据的工具称为 bcp，是大容量复制协议的缩写。

一旦你将它们放在 sql server 中并进行了转换（你必须这样做吗？），那么你可以再次使用 bcp 导出到 csv。

你中间需要SQL Server吗？也许这是开销。

取决于

*   语言种类或您使用
*   举例说明文件的内容
*   有没有你必须执行的转换

如果您不需要自动化它，您也可以使用 SSMS 来实现它，它提供了一个易于使用的向导。

# r - 如何使用 R 按排序顺序读取目录中的文件？

> ID：10777367
> 
> 赞同：5
> 
> 时间：2012-05-27T21:18:25.557
> 
> 标签：r

下面给出的代码运行良好，并读取了我目录中的文件并提取了值：

```
X <- c(75:85) ; Y <- c(208:215) 
extract <- vector()
files <- list.files("C:\\New folder (10)", "*.img",full.names=TRUE)

} 
```

我试图通过使用 sprintf 来指定它，但我得到了错误。请提供任何帮助：

```
for (i in c(1:365)) {
   fileName <- sprintf("C:New folder (10)/Climate_Rad_%d.img", i)
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T18:56:45.043

啊，好的，我明白了，问题出在排序上。排序顺序按字母顺序正确。Climate_Rad_1 按字母顺序后跟 Climate_Rad_10，而不是 Climate_Rad_2 顺序根本不是“随机”的，它按字母顺序是正确的。

但是，您希望在 Climate_Rad_10 之前处理 Climate_Rad_2，而不是之后。有几种方法可以解决这个问题。首先，您应该注意，Climate_Rad_002 确实按字母顺序排在 Climate_Rad_010 之前，因此如果您在生成文件时添加前导零，这将便于以后按数字顺序处理文件。

或者，假设您在创建文件时无法添加零。然后至少有两种方法可以按顺序访问文件。或者通过在文件名之后添加零，或者只是对文件名的数字部分进行排序。

让我告诉你后者。

```
myFiles <- paste("Climate_Rad_", c(1:15, 95:110), ".img", sep = "") # create some test names, you get the actual myFiles through a call to list.files()

myFiles.sorted <- sort(myFiles) # this gives the alphabetic sorting, not what you want

> myFiles.sorted
 [1] "Climate_Rad_1.img"   "Climate_Rad_10.img"  "Climate_Rad_100.img"
 [4] "Climate_Rad_101.img" "Climate_Rad_102.img" "Climate_Rad_103.img"
 [7] "Climate_Rad_104.img" "Climate_Rad_105.img" "Climate_Rad_106.img"
[10] "Climate_Rad_107.img" "Climate_Rad_108.img" "Climate_Rad_109.img"
[13] "Climate_Rad_11.img"  "Climate_Rad_110.img" "Climate_Rad_12.img" 
[16] "Climate_Rad_13.img"  "Climate_Rad_14.img"  "Climate_Rad_15.img" 
[19] "Climate_Rad_2.img"   "Climate_Rad_3.img"   "Climate_Rad_4.img"  
[22] "Climate_Rad_5.img"   "Climate_Rad_6.img"   "Climate_Rad_7.img"  
[25] "Climate_Rad_8.img"   "Climate_Rad_9.img"   "Climate_Rad_95.img" 
[28] "Climate_Rad_96.img"  "Climate_Rad_97.img"  "Climate_Rad_98.img" 
[31] "Climate_Rad_99.img" 

# split between the part that comes before the numerics and the "1.img" etc.--adjust appropriately
split <- strsplit(myFiles.sorted, "Climate_Rad_") 
# strip the "1.img" etc such that only the numeric part is left
# turn the characters in numeric
split <- as.numeric(sapply(split, function(x) x <- sub(".img", "", x[2])))
# not you can sort, by using order, that gives the original filenames, ordered on the numeric part of the filename
myFiles.correct.order <- myFiles.sorted[order(split)]

 [1] "Climate_Rad_1.img"   "Climate_Rad_2.img"   "Climate_Rad_3.img"  
 [4] "Climate_Rad_4.img"   "Climate_Rad_5.img"   "Climate_Rad_6.img"  
 [7] "Climate_Rad_7.img"   "Climate_Rad_8.img"   "Climate_Rad_9.img"  
[10] "Climate_Rad_10.img"  "Climate_Rad_11.img"  "Climate_Rad_12.img" 
[13] "Climate_Rad_13.img"  "Climate_Rad_14.img"  "Climate_Rad_15.img"   
[16] "Climate_Rad_95.img"  "Climate_Rad_96.img"  "Climate_Rad_97.img" 
[19] "Climate_Rad_98.img"  "Climate_Rad_99.img"  "Climate_Rad_100.img"
[22] "Climate_Rad_101.img" "Climate_Rad_102.img" "Climate_Rad_103.img"
[25] "Climate_Rad_104.img" "Climate_Rad_105.img" "Climate_Rad_106.img"
[28] "Climate_Rad_107.img" "Climate_Rad_108.img" "Climate_Rad_109.img"
[31] "Climate_Rad_110.img" 
```

这将按照您要查找的顺序为您提供文件。现在根据那个拉文件，例如通过

```
for (fileNames in myFiles.correct.order) {READ.IN.AND.DO.YOUR.THING} 
```

那应该这样做。确保根据文件名调整“Climate_Rad_”和“.img”（您可能还必须在“Climate_Rad_”之前添加一个路径，使其类似于“C:/filefolder/Climate_Rad_”，如果是这样的话需要）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-27T23:36:00.937

为什么不使用 list.files() 检索所有文件（具有特定模式）然后对其进行排序。然后你从排序的向量中检索文件，它以正确的排序顺序将它们提供给你。这样做的好处是，当 1:365 序列中缺少数字时它也可以工作

就像是：

```
myFiles <- list.files(pattern = "^Climate_Rad_") #all files starting with Climate_
myFiles <- sort(myFiles)
# then read them in, for instance through
for (fileNames in myFiles) {READ.IN.AND.DO.YOUR.MAGIC.ON.THEM} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-22T14:44:15.520

[**gtools**](https://cran.r-project.org/web/packages/gtools/index.html)包具有可以帮助您*的功能“混合排序”。*

*myFiles*示例取自[Peter Verbeet 的](https://stackoverflow.com/users/1046164/peter-verbeet)回答。

```
myFiles <- paste("Climate_Rad_", c(1:15, 95:110), ".img", sep = "") 

install.packages ('gtools')
require ('gtools')

mixedsort (myFiles)

[1] "Climate_Rad_1.img"   "Climate_Rad_2.img"  
[3] "Climate_Rad_3.img"   "Climate_Rad_4.img"  
[5] "Climate_Rad_5.img"   "Climate_Rad_6.img"  
[7] "Climate_Rad_7.img"   "Climate_Rad_8.img"  
[9] "Climate_Rad_9.img"   "Climate_Rad_10.img" 
[11] "Climate_Rad_11.img"  "Climate_Rad_12.img" 
[13] "Climate_Rad_13.img"  "Climate_Rad_14.img" 
[15] "Climate_Rad_15.img"  "Climate_Rad_95.img" 
[17] "Climate_Rad_96.img"  "Climate_Rad_97.img" 
[19] "Climate_Rad_98.img"  "Climate_Rad_99.img" 
[21] "Climate_Rad_100.img" "Climate_Rad_101.img"
[23] "Climate_Rad_102.img" "Climate_Rad_103.img"
[25] "Climate_Rad_104.img" "Climate_Rad_105.img"
[27] "Climate_Rad_106.img" "Climate_Rad_107.img"
[29] "Climate_Rad_108.img" "Climate_Rad_109.img"
[31] "Climate_Rad_110.img" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T21:34:34.487

正如我在上面的评论中提到的，您可以使用它`paste`来简化您的代码。尝试：

```
# set the working directory
setwd("C:New folder (10)")

# construct a vector of file names and loop through
for (f in paste("Climate_Rad_", 1:365, ".img", sep="")) {
    conne <- file(f, "rb")
    # do rest, assuming it's correct
} 
```

# android - 将颜色添加到简单的光标适配器列表视图

> ID：10777373
> 
> 赞同：0
> 
> 时间：2012-05-27T21:19:19.317
> 
> 标签：android, textview, simplecursoradapter

我想知道为使用 simplecursoradapter 创建的列表中的每个条目添加颜色的最佳方法是什么？以下代码使用 SimpleCursorAdapter 创建了一个列表视图，但文本的颜色均为默认灰色。我想做的是根据日期将 R.id.rowTitle 和 R.id.rowName 中的文本颜色更改为不同的颜色。

```
 Cursor cursor = database.getTitles();
    startManagingCursor(cursor);

    String[] columns = { SQLController.TITLE,
    SQLController.COLUMN_NAME, SQLController.DATE,
    };

    int to[] = {R.id.rowTitle, R.id.rowName,R.id.rowDate};

    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, 
            R.layout.rows, cursor, columns, to);

    this.setListAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T21:33:12.587

如果你只是想让不同的项目有不同的颜色，你可以做一个自定义的行布局。

但是，由于您想根据数据的内容进行设置，您需要创建一个自定义适配器（扩展 Simpl eCursorAdapter）并`if`在其中放置一条语句来检查日期并使用为每个 textview 设置颜色`textview.setTextColor(color_ref);`

[教程](http://blog.cluepusher.dk/2009/11/16/creating-a-custom-cursoradapter-for-android/)

# asp.net - 从查询 asp.net 中检索一列的值

> ID：10777375
> 
> 赞同：0
> 
> 时间：2012-05-27T21:19:47.430
> 
> 标签：asp.net, data-binding

我正在用 ASP 编写项目。数据访问层返回数据库表中的所有列。我想获取特定列的值并将其转换为字符串。

例如我有

```
EmployeesTableAdapter eta; 
```

并 `eta.getData();`返回`"select *from Employees"`查询。

如何获取一个特定列的值，例如列 FirstName？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T21:46:33.083

假设您必须使用 TableAdapter，使用它来填充 DataTable

```
var dataTable = new DataTable();
EmployeesTableAdapter.Fill(dataTable);
string FirstName = (string)EmployeesTableAdapter.Rows[0][0];
//Rows[0][0] Change appropriately 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T23:18:57.653

尝试这个：

```
string FirstName =  Convert.ToString(eta.getData().Rows.[0].["FirstName"]); 
```

# objective-c - 使用 NSURLConnection 获取 UIImageVIew 类别中的数据；无法设置图像属性

> ID：10777377
> 
> 赞同：1
> 
> 时间：2012-05-27T21:20:57.240
> 
> 标签：objective-c, cocoa-touch, nsurlconnection

我创建了一个`UIImageView`允许异步加载图像的类别：

```
@implementation UIImageView (ImageLoader)

- (void) asyncLoadImageIntoView:(NSURL *)imageURL withLoadingIndicator:(BOOL)isLoadingIndicator {

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:imageURL cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:60];

    (void)[[NSURLConnection alloc] initWithRequest:request delegate:self];
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response 
{
   // responseData = [[NSMutableData alloc] init];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data 
{
    NSLog(@"didReceiveData %@", data);
    (void)[self.image initWithData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error 
{

//[textView setString:@"Unable to fetch data"];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection 
{
    NSLog(@"Succeeded! Received image data");
}

@end 
```

我的问题是，即使`connection:didReceiveData:`调用了该方法并将数据打印到控制台，`[self.image initWithData:data]`似乎也没有将图像加载到视图中。这里有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T22:26:39.220

首先，[mehdzor 的权利](https://stackoverflow.com/a/10777561/)；`connection:didRecieveData:`并不意味着您已经掌握了所有数据；你需要等到你`connectionDidFinishLoading:`确定。例如，如果图像非常大，它可能不会同时出现。

您应该在打开连接时创建一个`NSMutableData`实例，并将其添加到`connection:didRecieveData:`：

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data 
{
    NSLog(@"didReceiveData %@", data);
    [[self mutableData] appendData:data]
} 
```

由于这是一个类别，您可能必须[使用关联的对象函数](https://stackoverflow.com/a/10502709/603977)来存储和访问该可变数据实例。

第二，`[self.image initWithData:data]`没有任何意义。在分配对象之前，您不能初始化它，也不能发送`init...`到已经初始化的对象。

不过，由于您要将此图像分配给属性，因此更好的方法是使用`UIImage`'s 便利方法[`imageWithData:`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIImage_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006890-CH3-SW13)。同样，您需要在 中执行此操作`connectionDidFinishLoading:`，并且您将传递您的可变数据实例，该实例现在具有连接设法下拉的所有数据：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection 
{
    NSLog(@"Succeeded! Received image data");
    [self setImage:[UIImage imageWithData:[self mutableData]]];
} 
```

不要忘记在此之后清理（释放）`mutableData`实例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-27T22:26:43.303

您的代码中至少有两个错误。

第一个错误是你不应该调用`[self.image initWithData]`，因为[所有的 init 方法都应该被调用一次，并且在对象的构造过程中，就在 alloc 之后](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/Initialization.html)：

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data 
{
    NSLog(@"didReceiveData %@", data);
    (void)[self.image initWithData:data]; // Wrong...
} 
```

第二个错误是上面的方法是增量的，可以在接收到完整图像之前多次调用。相反，您要做的是将数据存储在 NSMutableData 对象（或类似对象）中，直到收到所有数据，并在收到消息后创建图像：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
   // Create an image with your NSMutableData object here
} 
```

您可能需要使用类别以外的其他内容才能正确执行此操作，因为您可能需要新属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T22:18:44.997

我已经解决了这个问题。我不完全确定为什么，但首先从数据创建 UIImage，然后将 UIImageView 的图像分配给 UIImage 工作。

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data 
{
    UIImage *img = [[UIImage alloc] initWithData:data];
    self.image = img;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T21:55:19.487

我认为您的问题是每次收到部分图像时都会创建图像。您应该将所有数据收集在一起，然后创建图像；

# java - 接受两种不同类型作为参数的方法

> ID：10777384
> 
> 赞同：37
> 
> 时间：2012-05-27T21:22:12.120
> 
> 标签：java, generics, polymorphism, overloading

我正在编写一个方法，该方法应该接受两种类型之一的对象作为其参数，这两种类型的对象除了 Object 之外不共享父类型。例如，类型是 Dreams 和 Garlic。你可以同时做`dreams.crush()`和`garlic.crush()`。我想要一个方法`utterlyDestroy(parameter)`，它可以接受 Dreams 和 Garlic 作为其参数。

```
utterlyDestroy(parameter) {
    parameter.crush()
} 
```

Garlic 和 Dreams 都是某个库的一部分，因此让它们实现接口 ICrushable（以便我可以编写`utterlyDestroy(ICrushable parameter)`）不是一种选择。

我的方法体很长，所以重载意味着重复代码。丑陋的。我确信我可以使用反射并进行一些类黑客攻击。丑陋的。

我尝试使用泛型，但显然我不能写类似

```
utterlyDestroy(<T instanceof Dreams || T instanceof Garlic> parameter) 
```

是否可以将 Garlic 类型转换为 Dreams？

```
utterlyDestroy(Object parameter) {
    ((Dreams)parameter).crush()
} 
```

不过，这仍然很丑陋。我的其他选择是什么？处理这种情况的首选方法是什么？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-27T21:44:10.253

这个怎么样：

```
interface ICrushable {
    void crush();
}

utterlyDestroy(ICrushable parameter) {
    // Very long crushing process goes here
    parameter.crush()
}

utterlyDestroy(Dreams parameter) {
    utterlyDestroy(new ICrushable() { crush() {parameter.crush();});
}

utterlyDestroy(Garlic parameter) {
    utterlyDestroy(new ICrushable() { crush() {parameter.crush();});
} 
```

新开发应该实现 ICrushable 接口，但对于现有的类，参数包装在 ICrushable 中并传递给完成所有工作的 utterlyDestroy(ICrushable)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-27T21:48:33.480

像这样简单的事情怎么样？

```
utterlyDestroy(Object parameter) {
    if (parameter instanceof Dreams) {
        Dream dream = (Dreams) parameter;
        dream.crush();

        // Here you can use a Dream
    } else if (parameter instanceof Garlic) {
        Garlic garlic = (Garlic) parameter;
        garlic.crush();

        // Here you can use a Garlic

    }
} 
```

如果`utterlyDestroy`太复杂和太大而你只想调用它，`crush`那么这就是你想要的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-27T21:39:09.323

您可以在 Java 中实现 Haskell 式的 Either 类；像这样的东西：

```
class Either<L,R>
{
    private Object value;

    public static enum Side {LEFT, RIGHT}

    public Either(L left)  {value = left;}
    public Either(R right) {value = right;}

    public Side getSide() {return value instanceof L ? Side.LEFT : Side.RIGHT;}

    // Both return null if the correct side isn't contained.
    public L getLeft() {return value instanceof L ? (L) value : null;}
    public R getRight() {return value instanceof R ? (R) value : null;}
} 
```

然后你让那个方法采用 type 的东西`Either<Dreams, Garlic>`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-28T08:46:45.253

您可以使用接口并使您的类型[适应它。](http://en.wikipedia.org/wiki/Adapter_pattern)

界面：

```
public interface Crushable {
  public void crush();
} 
```

示例调用：

```
public class Crusher {
  public static void crush(Crushable crushable) {
    crushable.crush();
  }
} 
```

示例适配器工厂方法：

```
public final class Dreams {
  public static Crushable asCrushable(final Dream dream) {
    class DreamCrusher implements Crushable {
      @Override
      public void crush() {
        dream.crush();
      }
    }
    return new DreamCrusher();
  }

  private Dreams() {}
} 
```

消费者代码如下所示：

```
 Dream dream = new Dream();
  Crushable crushable = Dreams.asCrushable(dream);
  Crusher.crush(crushable); 
```

如果你有很多类型需要适应，你可以考虑反射。这是一个使用[Proxy](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Proxy.html)类型的（未优化的）适配器工厂：

```
public final class Crushables {
  private static final Class<?>[] INTERFACES = { Crushable.class };

  public static Crushable adapt(final Object crushable) {
    class Handler implements InvocationHandler {
      @Override
      public Object invoke(Object proxy, Method method, Object[] args)
          throws Throwable {
        return crushable.getClass()
            .getMethod(method.getName(), method.getParameterTypes())
            .invoke(crushable, args);
      }
    }

    ClassLoader loader = Thread.currentThread()
        .getContextClassLoader();
    return (Crushable) Proxy.newProxyInstance(loader, INTERFACES, new Handler());
  }

  private Crushables() {}
} 
```

对于 API 使用者来说，这并不难看：

```
 Dream dream = new Dream();
  Crushable crushable = Crushables.adapt(dream);
  Crusher.crush(crushable); 
```

但是，与反射一样，您牺牲了编译时类型检查。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-27T21:33:18.150

创建 Interface Crushable 似乎是最干净的方法。子类型 Garlic 或 Dreams 是否是一个选项，并将您的界面添加到子类型？

除此之外，您可以将公共代码放在私有方法中，并让两个版本的 utterlyDestroy 在调用公共代码之前对各个对象执行它们必须做的事情。如果您的方法体很长，则可能无论如何都需要将其分解为私有方法。不过，我猜您已经想到了这一点，因为它比添加接口更为明显。

您可以将参数作为对象引入，然后进行强制转换。这就是你所说的反射吗？IE，

```
public void utterlyCrush(Object crushable) {
    if (crushable instanceOf Dream) {
         ...
    }
    if (curshable instanceOf Garlic) {
         ...
    } 
```

但考虑到一个不是另一个的子类型，从 Garlic 转换为 Dream 不是一种选择。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-27T21:33:23.703

只需使用方法重载。

```
public void utterlyDestroy(Dreams parameter) {
    parameter.crush();
}

public void utterlyDestroy(Garlic parameter) {
    parameter.crush();
} 
```

如果您想以相同的方式支持多于这两种类型，您可以为它们都定义一个通用接口并使用泛型。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-27T21:40:11.647

如果您打算在项目的许多地方以相同的方式对待它们，我建议将它们包装在一个类中，比如适配器。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-04-08T14:42:08.457

当我使用：

```
void fooFunction(Object o){
Type1 foo=null;
if(o instanceof Type1) foo=(Type1)o;
if(o instanceof Type2) foo=((Type2)o).toType1();
// code
} 
```

但这只有在 Type2 可以转换为 Type1 时才有效

# c# - 保留列表框项的选项对话框

> ID：10777390
> 
> 赞同：1
> 
> 时间：2012-05-27T21:23:34.130
> 
> 标签：c#, windows-phone-7

我是 Windows Phone 开发的新手，我不知道如何去做我想做的事情，或者即使这是遵循 WP7 设计指南的最合适的方法。

我在用户可以从中选择的 ListBox 中有一个简短的项目列表，我想在用户持有项目时为用户提供一组选项。我不知道是否有办法显示一个带有一些单选按钮和两个按钮（取消和确定）的小弹出对话框，它们可以在那里执行一些操作或引导用户到另一个页面，在那里他可以执行所需的操作。

做到这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:24:13.870

创建一个名为“Views”的目录。您可以通过以下方式在该目录中创建一个 UserControl，

例如，从可用模板中选择 Add new item --> WindowsPhone UserControl 并将其命名为“myusercontrol.xaml”。

将该用户控件作为控件添加到您的实际页面。

```
xmlns:views="clr-namespace:YourSolutionName.Views" //Add this at the beginning of your xaml page to <phone:PhoneApplicationPage/>

<views:myusercontrol x:Name="myUserControlView" Margin="40,300"  Visibility="Collapsed" />
//Add the above line before the ListBox 
```

最后，在您的 Hold 事件处理程序中，您可以执行类似的操作

```
myUserControlView.Visibility = Visibility.Visible; 
```

您可以自定义“myusercontrol.xaml”以满足您的要求，例如单选按钮、取消确定按钮等

可能不是最好的解决方案，但我希望这会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T12:42:23.790

[Silverlight 工具包](http://silverlight.codeplex.com/releases/view/75888)中有一个上下文菜单控件，可以省去编写您自己的控件来实现此功能的麻烦

# hibernate - 如何使用 Struts 和 Hibernate 从数据库中检索数据并将其显示在 jsp 上

> ID：10777391
> 
> 赞同：1
> 
> 时间：2012-05-27T21:23:51.077
> 
> 标签：hibernate, jsp, struts, struts-1

我是 Struts 的新手。我想在 JSP 页面上向用户显示表中的所有详细信息。

这是我的代码：

```
public class ListeActeurAction  extends Action{

    public ActionForward execute(ActionMapping mapping, ActionForm form,
            HttpServletRequest req, HttpServletResponse res) throws Exception {
        System.out.println("Action");

        ListeActeur ListeActeur= (ListeActeur) form;
                String query = "select nomActeur from Acteur " ;
                ListeActeur.setLis( HibernateUtil.ListeActeur(query, req)); 
        req.setAttribute("ListeActeur", ListeActeur.getLis()) ;
                        return mapping.findForward("s");

methode:HibernateUtil.ListeActeur(query, req)

public   static List <Acteur> ListeActeur(String query,HttpServletRequest req){

    System.out.print("hutil");
    Session session = HibernateUtil.getSessionFactory().getCurrentSession();
    session.beginTransaction();
     Iterator results = session.createSQLQuery(query).list().iterator();
     List <Acteur> list = new ArrayList<Acteur>();

     while((results.hasNext()))
     {
         Acteur gg =new Acteur();
        //Object[] row = (Object[]) results.next();
        //gg.setActeurId((Integer)row[0]);
        gg.setNomActeur(( java.lang.String)results.next());

    list.add(gg);
     }

    req.getSession(true).setAttribute("ListeActeur", list);
     session.getTransaction().commit();
     HibernateUtil.getSessionFactory().close(); 
     return list;
} 
```

形式:listeActeur

```
public class ListeActeur extends ActionForm {
private List <Acteur> lis = new ArrayList<Acteur>();    
public List <Acteur> getLis(){System.out.println("gets");return lis;}
public void setLis(List <Acteur> lis){System.out.println("set");this.lis=lis;}
public ListeActeur()
{super () ;} 
```

该代码显示一个空白页。连表都不显示。

任何人都可以帮忙吗？

* * *

有我的jsp的代码

```
<html:form  action="Liste" >  <table>  
  <logic:iterate  name="ListeActeur" property= "lis"  id="Acteur" >
   <td><b>Nom Acteur:<bean:write name="Acteur" property="nomActeur"/></b> <br></td>
   <td><b>Adresse IP :<bean:write name="Acteur" property="adresseIp"/></b> </b>  </td>
  </tr> 
```

我不明白我在做什么错，请帮忙。谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:13:22.967

您的 jsp 表单中的字段将由 Action 表单类表示。您需要对此进行配置。因此，当您提交 jsp 表单时，将创建操作表单对象。

使用该 Actionform 对象查询数据库并将数据保存在您选择的集合中。

在您的 jsp 页面中访问此集合以显示数据。

# qt - 为 Qt + OpenGL + GLUT + GLEW 应用程序创建安装程序

> ID：10777393
> 
> 赞同：3
> 
> 时间：2012-05-27T21:24:05.433
> 
> 标签：qt, opengl, installation, glut, glew

我们（我和我在大学的同学）使用标题中列出的程序/库创建了一个 3D 医学可视化软件。现在我们很想为我们的应用程序创建一个安装程序，但我们似乎没有找到正确的解决方案。我一直在环顾四周，看到一些很酷的程序可以编译你得到的所有东西并创建安装程序，但我的问题如下：

它是否编译、链接并添加到安装程序 GLUT 和 GLEW 库？

我们很难在窗户上安装所有这些垃圾，我无法想象医生会经历同样痛苦的过程，如果你明白我的意思......

那么，是否有任何应用程序可以使这成为可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T23:32:29.530

首先：OpenGL 不是一个库，它是一个 API。在 Windows 中获得适当支持的唯一方法是安装从 GPU 供应商主页下载的原始图形驱动程序。因此，作为安装程序的一部分，您应该检测已安装的 GPU 并检查已安装的驱动程序，可能会将用户重定向到 GPU 供应商的驱动程序下载页面。

安装程序几乎是标准的东西。最简单、最可靠的方法是将使用的库的所有 DLL 文件的副本放在与程序可执行文件相同的目录中。看看[NullSoft 安装程序系统](http://nsis.sourceforge.net/)

你说你将 Qt 与 GLUT 一起使用？为什么？Qt 和 GLUT 不能一起玩。我看到使用 GLUT 的唯一原因是茶壶。

GLEW 是一个非常标准的 DLL，但我通常倾向于将它与我的渲染器模块静态链接。

# java - Java Web 项目 + JPA/JDBC“连接到端口 1527 上的服务器 localhost 时出错，并显示连接被拒绝消息”

> ID：10777394
> 
> 赞同：2
> 
> 时间：2012-05-27T21:24:40.467
> 
> 标签：java, database, jpa, web, persistence

我有一个名为“Drinks Archive”的旧网络项目。除其他外，您还可以添加、删除、列出和编辑饮品。它在 NetBeans 本地运行良好，但是当我将项目作为 .war 文件部署到使用 Tomcat 6 的服务器时，每次尝试执行数据库操作时都会出现以下错误（例如，将饮料添加到 db）：

> javax.persistence.PersistenceException: 异常 [EclipseLink-4002] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.DatabaseException 内部异常: java.sql.SQLNonTransientConnectionException: java.net.ConnectException:在端口 1527 上连接到服务器 localhost 时出错，并显示连接被拒绝消息。错误代码：40000 org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:501) org.eclipse.persistence.internal.jpa.EntityManagerFactoryDe​​legate.getDatabaseSession(EntityManagerFactoryDe​​legate.java:188) org.eclipse.persistence。 internal.jpa.EntityManagerFactoryDe​​legate.createEntityManagerImpl(EntityManagerFactoryDe​​legate.java:277) org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl。

这是我的源代码（在 NetBeans 中，我使用 GlassFish 作为服务器）。

注册.java：

```
public class Register {

private static Register instance;
private EntityManager em;

private EntityManagerFactory emf = null;

public static Register getInstance() {
    if (instance == null) {
        instance = new Rekisteri();
    }

    return instance;
}

private Register() {
    try {
        Class.forName("org.apache.derby.jdbc.ClientDriver");
    } catch (ClassNotFoundException ex) {
        Logger.getLogger(Rekisteri.class.getName()).log(Level.SEVERE, null, ex);
    }
    emf = Persistence.createEntityManagerFactory("DrinksArchivePU");
}

public EntityManager getEntityManager() {
    return emf.createEntityManager();
}

public void addDrink(Drink new) {
    em = getEntityManager();
    em.getTransaction().begin();
    em.merge(new);
    em.getTransaction().commit();     
}

etc...//
} 
```

持久性.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
<persistence-unit name="DrinksArchivePU" transaction-type="RESOURCE_LOCAL">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <properties>
        <property name="eclipselink.jdbc.driver" value="org.apache.derby.jdbc.ClientDriver"/>
        <property name="eclipselink.jdbc.user" value="d"/> 
        <property name="eclipselink.jdbc.password" value="d"/> 
        <property name="eclipselink.jdbc.url" value="jdbc:derby://localhost:1527/drinks;create=true"/>
        <property name="eclipselink.ddl-generation" value="drop-and-create-tables"/>
        <property name="eclipselink.ddl-generation.output-mode" value="database"/>
        <property name="eclipselink.weaving" value="false"/>
        <property name="eclipselink.logging.level" value="FINE"/>
    </properties>
</persistence-unit> 
```

我读到问题可能是因为 derby 网络服务器未在我的服务器上启动，但如果是这样，如何解决？

**编辑：**已修复，我在我的 persistence.xml 设置中更改为 HSQLDB JDBC 驱动程序，之后就是在服务器中的项目中添加不同的缺失 jar 文件。

现在是persistence.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:schemaLocation="http://java.sun.com/xml/ns/persistence  http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
<persistence-unit name="DrinksAchivePU" transaction-type="RESOURCE_LOCAL">

    <provider>org.hibernate.ejb.HibernatePersistence</provider>

    <class>archive.Ingredient</class>
    <class>archive.Review</class>
    <class>archive.Drink</class>
    <class>archive.DrinkCategory</class>
    <class>archive.User</class>
    <class>archive.Register</class>

    <properties>
        <property name="javax.persistence.jdbc.driver" value="org.hsqldb.jdbcDriver"/>
        <property name="javax.persistence.jdbc.url" value="jdbc:hsqldb:mem:testdb;default_schema=true"/>
        <property name="javax.persistence.jdbc.user" value="sa"/>
        <property name="javax.persistence.jdbc.password" value=""/>
        <property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect"/>
        <property name="hibernate.hbm2ddl.auto" value="update"/>
    </properties>
</persistence-unit> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T18:59:26.447

Glassfish 与 Java DB 捆绑在一起。这就是它在您的本地机器上工作的原因。您的部署服务器要么具有不同的数据库服务器配置（检查您的 persistence.xml），要么在该端口上没有运行数据库服务器。

# java - 如何使用可以动态更改的 spring 指定数据源

> ID：10777402
> 
> 赞同：1
> 
> 时间：2012-05-27T21:25:43.530
> 
> 标签：java, spring, spring-mvc, jdbc

我正在开发一个应用程序，我需要根据情况指定不同的数据源。我想在测试应用程序时使用一个数据库，而在生产中使用一个数据库。例如通过属性文件或环境变量指定驱动程序类和登录详细信息。目前我必须更改详细信息然后重新启动应用程序。有没有办法在不重新启动应用程序的情况下动态更改这些属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T23:36:10.227

**使用 JNDI 数据源。**

*引用自 Spring in Action：*

> Spring 应用程序通常会部署在 JEE 应用程序服务器（如 WebSphere、JBoss 甚至 Tomcat 等 Web 容器）中运行。这些服务器允许您配置要通过 JNDI 检索的数据源。以这种方式配置数据源的好处是它们可以完全在应用程序外部进行管理，让应用程序在准备好访问数据库时简单地请求数据源。此外，在应用程序服务器中管理的数据源通常被汇集以提高性能，并且可以由系统管理员进行热交换。

示例 applicationContext-dataSource.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:jee="http://www.springframework.org/schema/jee"
   xsi:schemaLocation=" http://www.springframework.org/schema/beans 
      http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
      http://www.springframework.org/schema/jee 
      http://www.springframework.org/schema/jee/spring-jee-2.0.xsd">

   <!-- D A T A S O U R C E S -->
   <jee:jndi-lookup id="dataSource"
      jndi-name="jdbc/myDatasource"
      resource-ref="true" />
</beans> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T21:38:53.033

您可以像这样使用[资源标签](http://static.springsource.org/spring/docs/2.0.x/reference/beans.html#beans-factory-xml-import)+ [Spring的系统属性占位符](http://static.springsource.org/spring/docs/1.1.5/api/org/springframework/beans/factory/config/PropertyPlaceholderConfigurer.html)......

```
<import resource="/resources/myDataSourceBeans-${runtime.environment}.xml"/> 
```

您需要做的就是使用正确的数据源 bean 将其放入项目的类路径中，并定义一个名为的系统属性`/resources/myDataSourceBeans-prod.xml`并将其设置为等于or 。`/resources/myDataSourceBeans-test.xml``runtime.environment``test``prod`

在检查了我的来源后，我发现[这个博客条目](http://www.summa-tech.com/blog/2009/04/20/6-tips-for-managing-property-files-with-spring/)也可能对你有所帮助。

*[更新] 我刚刚意识到您要求更改**运行时**。我的答案只适用于环境分离，这通常足够好，因为您不应该从非生产系统中访问生产数据源。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T23:07:27.147

如果您真的不想在运行时更改（由于测试/生产切换的原因，这非常罕见），您可以使用[DelegatingDataSource](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/jdbc/datasource/DelegatingDataSource.html)将目标更改为一个或另一个，而无需修改所有依赖的 bean。

# android - Android 操作栏选项卡、片段和 Web 视图

> ID：10777405
> 
> 赞同：0
> 
> 时间：2012-05-27T21:26:26.773
> 
> 标签：android, android-fragments, android-webview, android-actionbar

我正在开发一个带有操作栏选项卡的应用程序，它加载的第一个活动只是一个 web 视图。我的问题是我找不到在哪里做

```
webView = (WebView) findViewById(R.id.webView);
webView.loadUrl("http://google.com"); 
```

我已经在使用 webview 扩展布局的类中尝试了 onStart() ，但这会导致应用程序崩溃。我已经在加载选项卡的主类的 onCreate() 中尝试过，但是当我这样做时没有任何反应。

整个项目都在我的 Github 上。

[https://github.com/cr5315/AOKPCBapp](https://github.com/cr5315/AOKPCBapp)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T21:33:48.577

您应该在 中执行此操作`onActivityCreated`，当创建片段的活动并实例化片段的视图层次结构时调用它。`onActivityCreated`一旦这些部分就位，通常用于进行最终初始化，例如检索视图或恢复状态。在此方法中执行这些操作将确保调用`findViewById`不会返回`null`。

生命`Fragment`周期是一个需要理解的重要概念。[**你可以在这里**](http://developer.android.com/reference/android/app/Fragment.html#Lifecycle)阅读更多关于它的信息。

# objective-c - 在 iOS 5 中保存 Twitter 帐户？

> ID：10777406
> 
> 赞同：4
> 
> 时间：2012-05-27T21:26:27.090
> 
> 标签：objective-c, ios, twitter

我正在使用以下代码来访问用户的 Twitter 帐户：

```
ACAccountStore *store = [[ACAccountStore alloc] init];
ACAccountType *twitterAccountType = 
[store accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

//  Request access from the user for access to his Twitter accounts
[store requestAccessToAccountsWithType:twitterAccountType 
                 withCompletionHandler:^(BOOL granted, NSError *error) {
                     if (!granted) {
                         NSLog(@"User rejected access to his account.");
                     } 
                     else {
                         NSArray *arrayOfAccounts = [store accountsWithAccountType:twitterAccountType];
                         if ([arrayOfAccounts count] > 0)  {
                             ACAccount *acct = [arrayOfAccounts objectAtIndex:0];
                         }
}]; 
```

我的问题是，如何在应用会话之间保存用户帐户？对于当前会话，我可以将其存储在实例变量中，但如果用户退出应用程序并返回，我如何获得该帐户？我有电话`[store requestAccessToAccountsWithType:twitterAccountType...]`吗？每次？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T20:11:13.827

您可以保存`TWAccount.identifier`，然后用于`[ACAccountStore accountWithIdentifier]`稍后检索相同的帐户。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-05-27T21:56:34.113

如果你只关心 iOS 5，你可以使用 TWTweetComposeViewController 类。

我的工作方式是这样的......

```
NSString *deviceType = [UIDevice currentDevice].systemVersion;
NSString *tweet;
tweet=[API tweet:appDelegate.stadium_id];

if([deviceType hasPrefix:@"5."]){

    // Create the view controller
    TWTweetComposeViewController *twitter = [[TWTweetComposeViewController alloc] init];

    [twitter setInitialText:tweet];

    // Show the controller
    [self presentModalViewController:twitter animated:YES];

    // Called when the tweet dialog has been closed
    twitter.completionHandler = ^(TWTweetComposeViewControllerResult result) 
    {
        NSString *title = @"Tweet Status";
        NSString *msg; 

        if (result == TWTweetComposeViewControllerResultCancelled)
            msg = @"Tweet was canceled.";
        else if (result == TWTweetComposeViewControllerResultDone)
            msg = @"Tweet is sent!";

        // Show alert to see how things went...
        UIAlertView* alertView = [[UIAlertView alloc] initWithTitle:title message:msg delegate:self cancelButtonTitle:@"Okay" otherButtonTitles:nil];
        [alertView show];
        // Dismiss the controller
        [self dismissModalViewControllerAnimated:YES];

    };          
}

else{

    UIAlertView *alert=[[UIAlertView alloc] initWithTitle:@"Alert" message:@"Please upgrade to iOS 5 to tweet." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
}

} 
```

# matlab - 在matlab中抑制输出变量

> ID：10777413
> 
> 赞同：0
> 
> 时间：2012-05-27T21:28:09.030
> 
> 标签：matlab, syntax, return-value

我在 Matlab 中使用具有多个输出的函数，但只对其中一个输出感兴趣。我想抑制其他输出变量（即避免它们被返回并放入内存）。例如，使用 max 函数：

```
[output1 output2] = max(matrixA, [], 1);
% output1 returns the maximum, which i'm not interested in
% output2 returns the index of the maximum, which i *am* interested in 
```

有什么方法可以调用该函数以便不返回 output1 吗？如果有，它是否比上述计算提供任何内存优势，但立即调用`clear output1`从内存中删除 output1？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T21:32:17.733

使用波浪号：

```
[~, output2] = max(matrixA, [], 1); 
```

我怀疑会有很多内存优势（除了分配输出变量等文书工作），因为该函数将完全运行并分配它需要的所有内容。这样，您就不会得到值，并且`max`函数范围内的第一个输出变量的值将被垃圾收集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T21:33:35.403

`~`用字符替换您不想要的任何输出变量。

例如

```
[~,I] = max(matrix); 
```

这种模式的优势`clear`在于 MATLAB 解释器和即时编译器可以避免计算忽略变量的内存和 CPU 成本。

**编辑**

这是[Loren](http://blogs.mathworks.com/loren/2009/09/11/matlab-release-2009b-best-new-feature-or/) Shure[关于](http://www.mathworks.com/help/techdoc/matlab_prog/br67dkp-1.html). 我找不到任何关于使用忽略变量来消除不必要计算的确切信息。`~`

# delphi - 使用 Delphi Mock Framework 并导致副作用

> ID：10777416
> 
> 赞同：3
> 
> 时间：2012-05-27T21:28:25.173
> 
> 标签：delphi, mocking, delphi-xe2, delphi-mocks

我正在使用相当好的[Delphi Mocks](http://www.finalbuilder.com/Resources/Blogs/PostId/417/Introducing-Delphi-Mocks.aspx)框架，并试图创建一个包含具有“副作用”的方法的类的 Mock，即它是一个读取操作，并且在现实世界的实现中它设置内容缓冲区，如果读取成功。所以我的问题是，我如何模拟这种“副作用”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T18:25:59.233

您可以在模拟上使用 WillExecute 方法并传入一个委托（请参阅 Delphi.Mocks.pas 的签名），它可以执行您想要的任何操作。

# content-management-system - 新窗口中的果园 CMS 导航菜单项

> ID：10777420
> 
> 赞同：0
> 
> 时间：2012-05-27T21:30:14.673
> 
> 标签：content-management-system, orchardcms

我只想知道如何使用高级菜单导航在 Orchard CMS 的新窗口/选项卡中打开菜单项。是的，我知道如何使用 Crtl 或右键单击，我只想了解我的客户如何在创建菜单项时选择它，例如“显示为链接”之类的选项。如果没有快速的解决方案，我该如何实现？自定义CSS？

在此先感谢穆拉特·杜曼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T23:32:11.710

是针对管理员还是最终用户？如果对于最终用户，您可以更改代码以在新窗口中打开链接（目标 = _blank）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-18T20:03:24.263

在导航页面上添加以下代码作为“Html 菜单项”。

```
<a href="http://google.com/" target="_blank">Google</a> 
```

# c++ - std::bind 绑定函数

> ID：10777421
> 
> 赞同：21
> 
> 时间：2012-05-27T21:30:42.457
> 
> 标签：c++, function, c++11, bind

我无法检测为什么这不编译。我有一些`std::function`基于某个参数返回 a 的 lambda 函数。

我已经将我的问题缩小到这个片段（它不使用 lambdas，但完美地重现了我的错误）：

```
#include <functional>
#include <iostream>

struct foo {
    template<class T>
    void bar(T data) {
        std::cout << data << "\n";
    }
};

void some_fun(const std::function<void(int)> &f) {
    f(12);
}

int main() {
    foo x;
    auto f = std::bind(&foo::bar<int>, x, std::placeholders::_1);
    auto w = std::bind(some_fun, f);
    w();
} 
```

调用`w()`产生了其中一个可爱的 gcc 错误输出，我无法弄清楚出了什么问题。这是 gcc 4.6.1 回显的错误：

```
g++ -std=c++0x    test.cpp   -o test
test.cpp: In function ‘int main()’:
test.cpp:20:7: error: no match for call to ‘(std::_Bind<void (*(std::_Bind<std::_Mem_fn<void (foo::*)(int)>(foo, std::_Placeholder<1>)>))(const std::function<void(int)>&)>) ()’
/usr/include/c++/4.6/functional:1130:11: note: candidates are:
/usr/include/c++/4.6/functional:1201:2: note: template<class ... _Args, class _Result> _Result std::_Bind<_Functor(_Bound_args ...)>::operator()(_Args&& ...) [with _Args = {_Args ...}, _Result = _Result, _Functor = void (*)(const std::function<void(int)>&), _Bound_args = {std::_Bind<std::_Mem_fn<void (foo::*)(int)>(foo, std::_Placeholder<1>)>}]
/usr/include/c++/4.6/functional:1215:2: note: template<class ... _Args, class _Result> _Result std::_Bind<_Functor(_Bound_args ...)>::operator()(_Args&& ...) const [with _Args = {_Args ...}, _Result = _Result, _Functor = void (*)(const std::function<void(int)>&), _Bound_args = {std::_Bind<std::_Mem_fn<void (foo::*)(int)>(foo, std::_Placeholder<1>)>}]
/usr/include/c++/4.6/functional:1229:2: note: template<class ... _Args, class _Result> _Result std::_Bind<_Functor(_Bound_args ...)>::operator()(_Args&& ...) volatile [with _Args = {_Args ...}, _Result = _Result, _Functor = void (*)(const std::function<void(int)>&), _Bound_args = {std::_Bind<std::_Mem_fn<void (foo::*)(int)>(foo, std::_Placeholder<1>)>}]
/usr/include/c++/4.6/functional:1243:2: note: template<class ... _Args, class _Result> _Result std::_Bind<_Functor(_Bound_args ...)>::operator()(_Args&& ...) const volatile [with _Args = {_Args ...}, _Result = _Result, _Functor = void (*)(const std::function<void(int)>&), _Bound_args = {std::_Bind<std::_Mem_fn<void (foo::*)(int)>(foo, std::_Placeholder<1>)>}] 
```

在这里，`f`应该是一些可调用对象，它以 int 作为参数并`x.bar(int)`使用它调用。另一方面，`w`只是一个调用的可调用对象`some_fun(f)`，`f`即上面提到的可调用对象，它具有 的参数所期望的签名`some_fun`。

我错过了什么吗？我可能不知道如何真正混合`std::bind`和 `std::function`。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-28T00:54:26.140

[`std::bind`](http://en.cppreference.com/w/cpp/utility/functional/bind)表达式，像它们的`boost::bind`前辈一样，支持一种组合操作。你的表达`w`大致相当于

```
auto w=std::bind(some_fun,  std::bind(&foo::bar<int>, x, std::placeholders::_1) ); 
```

以这种方式嵌套绑定被解释为

1.  计算`x.bar<int>(y)`where的值`y`是传递给结果仿函数的第一个参数。
2.  将该结果传递给`some_fun`.

但`x.bar<int>(y)`返回 void，而不是任何函数类型。这就是为什么这不能编译。

正如 K-ballo 指出的那样，使用`boost::bind`，您可以使用 解决此问题`boost::protect`。正如 Kerrek SB 和 ildjarn 指出的那样，解决这个问题的一种方法是：不要使用`auto`for `f`. 您不想`f`拥有绑定表达式的类型。如果`f`有其他类型，则`std::bind`不会尝试应用函数组合规则。例如，您可以给出`f`类型`std::function<void(int)>`：

```
std::function<void(int)> f = std::bind(&foo::bar<int>, x, std::placeholders::_1);
auto w = std::bind(some_fun, f); 
```

由于`f`实际上没有绑定表达式的类型，因此在' 类型`std::is_bind_expression<>::value`上将为 false ，因此第二行中的表达式将逐字传递值，而不是尝试应用函数组合规则。`f``std::bind`

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-27T21:59:28.110

`some_fun`想要类型的参数`const std::function<void(int)> &`。

std::bind 返回“未指定类型 T 的函数对象”（查看提供的链接，“返回值”部分），您试图将其作为 some_fun 参数传递。

似乎这会导致问题，因为不需要这种参数类型。

看看：[http ://en.cppreference.com/w/cpp/utility/functional/bind](http://en.cppreference.com/w/cpp/utility/functional/bind)

# .net - WPF 按钮样式触发器

> ID：10777423
> 
> 赞同：3
> 
> 时间：2012-05-27T21:31:01.317
> 
> 标签：.net, wpf

我坚持使用 WPF 中的样式。当用户将鼠标悬停在按钮上时，我需要更改背景渐变，但我不知道如何进行更改。这是我到目前为止的代码：

```
 <Style x:Key="Button_Green" TargetType="{x:Type Button}">
    <Setter Property="FontSize" Value="11" />
    <Setter Property="Foreground" Value="White"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Button}">
                <Border CornerRadius="2" BorderBrush="#387f38" BorderThickness="1">
                    <Border.Background>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="#FF5BB75B" Offset="0" />
                            <GradientStop Color="#FF449B44" Offset="1" />
                        </LinearGradientBrush>
                    </Border.Background>
                    <ContentPresenter x:Name="ButtonContentPresenter" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Style.Triggers>
        <Trigger Property="IsMouseOver" Value="True">
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                        <GradientStop Color="#FF5BB75B" Offset="0" />
                        <GradientStop Color="#FF398239" Offset="1" />
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="Cursor" Value="Hand" />
        </Trigger>
    </Style.Triggers>
</Style> 
```

鼠标光标正常变化，但背景渐变没有变化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T21:44:04.843

您需要将 setter 的目标设置为`Border`您在`ControlTemplate`. 目前，它的目标是自身的`Background`属性，该属性`Button`被您的 custom 隐藏`ControlTemplate`。

```
<Style x:Key="Button_Green" TargetType="{x:Type Button}">
<Setter Property="FontSize" Value="11" />
<Setter Property="Foreground" Value="White"/>
<Setter Property="Template">
    <Setter.Value>
        <ControlTemplate TargetType="{x:Type Button}">
            <Border x:Name="MyBackgroundElement" CornerRadius="2" BorderBrush="#387f38" BorderThickness="1">
                <Border.Background>
                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                        <GradientStop Color="#FF5BB75B" Offset="0" />
                        <GradientStop Color="#FF449B44" Offset="1" />
                    </LinearGradientBrush>
                </Border.Background>
                <ContentPresenter x:Name="ButtonContentPresenter" VerticalAlignment="Center" HorizontalAlignment="Center"/>
            </Border>
            <ControlTemplate.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter TargetName="MyBackgroundElement" Property="Background">
                        <Setter.Value>
                            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                <GradientStop Color="#FF5BB75B" Offset="0" />
                                <GradientStop Color="#FF398239" Offset="1" />
                            </LinearGradientBrush>
                        </Setter.Value>
                    </Setter>
                    <Setter Property="Cursor" Value="Hand" />
               </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
    </Setter.Value>
</Setter>
</Style> 
```

在这里，我`x:Name`为元素添加了一个属性，`Border`以便可以`TargetName`使用`Setter`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T00:29:22.203

从模板更改此代码段

```
<Border CornerRadius="2" BorderBrush="#387f38" BorderThickness="1">
   <Border.Background>
       <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
           <GradientStop Color="#FF5BB75B" Offset="0" />
           <GradientStop Color="#FF449B44" Offset="1" />
       </LinearGradientBrush>
   </Border.Background>
   <ContentPresenter x:Name="ButtonContentPresenter" VerticalAlignment="Center" HorizontalAlignment="Center"/>
</Border> 
```

对此（重要的部分是`Background="{TemplateBinding Background}"`）：

```
<Border CornerRadius="2" BorderBrush="#387f38" BorderThickness="1" Background="{TemplateBinding Background}">       
   <ContentPresenter x:Name="ButtonContentPresenter" VerticalAlignment="Center" HorizontalAlignment="Center"/>
</Border> 
```

然后像这样为您的样式添加一个额外的设置器：

```
<Setter Property="Background">
  <Setter.Value>
      <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
          <GradientStop Color="#FF5BB75B" Offset="0" />
          <GradientStop Color="#FF449B44" Offset="1" />
      </LinearGradientBrush>
  </Setter.Value>
</Setter> 
```

# php - 用 PHP 和 mysql 连接 App

> ID：10777428
> 
> 赞同：0
> 
> 时间：2012-05-27T21:32:27.090
> 
> 标签：php, android

我正在尝试通过简单的 PHP 代码访问数据库。但限制是它是一个远程数据库，由远程服务器从真实设备访问。

这是代码片段：-

```
ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
            postParameters.add(new BasicNameValuePair("username", un.getText().toString()));
            postParameters.add(new BasicNameValuePair("password", pw.getText().toString()));
            String response = null;
            try {
                response = CustomHttpClient.executeHttpPost("http://WebsiteName.com/check.php", postParameters);
                String res=response.toString();

                res= res.replaceAll("\\s+","");                              

               if(res.equals("1"))
                    error.setText("Correct Username or Password");
                else
                    error.setText("Sorry!! Incorrect Username or Password"); 
            } catch (Exception e) {
                un.setText(e.toString());
            } 
```

PHP 在[这里](http://pastebin.com/EiXSQVRG)。PHP 代码很可能没有问题，因为它可以在本地工作。

我要澄清的最重要的事情之一是 PHP 代码在服务器中的保存位置。我直接在根目录下。当我从浏览器执行它时（比如输入 website.com/check.php），我得到了所需的响应。不幸的是，许多对此提供教程的人提到本地服务器和本地数据库比远程数据库更多。为了用真实设备完成它，我还应该做些什么吗？

PS：当使用本地网络服务器连接到模拟器和本地数据库时，该应用程序可以正常工作。

===更新===

我很确定电话没有联系网络服务器。我通过让网络服务器始终给出肯定响应来验证，这也失败了。关于我应该在哪里看的任何提示？除了在线服务器之外，我想不出其他任何东西......它正在工作（从浏览器检查时）。有什么交叉检查的方法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T21:36:26.887

这可能是也可能不是您所面临问题的原因，但您必须以任何一种方式解决它。

您当前正在同步发出 POST 请求。这意味着，只要 POST 请求正在执行并且设备正在等待响应，手机和 UI 就会被锁定。这不仅会导致糟糕的用户体验，而且如果您将 UI 线程锁定超过一定时间，Android 会认为应用程序已崩溃。

也许这就是当您在本地发出请求时它起作用的原因，因为与远程 Web 服务器相比，对本地 Web 服务器的 POST 请求将非常快。

要异步发出 HTTP 请求，请查看 Android [AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)

# c# - 使用 Parallel.ForEach 时的 System.AggregateExeption

> ID：10777440
> 
> 赞同：1
> 
> 时间：2012-05-27T21:33:59.153
> 
> 标签：c#, .net, windows, service, parallel.foreach

由于缺乏更好的选择，我正在构建这个网络爬虫来从他们的搜索中收集 Steam 配置文件 ID。

它应该作为服务运行，但我无法使其工作。如果我复制代码并将其作为控制台应用程序运行，它会完美运行。

我是 Windows 服务编程和使用并行任务的新手，所以如果还有其他完全关闭或效率低下的东西，请赐教，但手头的问题更重要。

我尝试使用 eventviewer 对其进行调试，但我对这些东西也很陌生，我发现它非常乏味并且不知道要寻找什么。

下面是在控制台应用程序中工作的代码，但不是作为 Windows 服务。为什么它只能在控制台应用程序中工作？

```
public partial class SSIDGatherer : ServiceBase
{
    EventLog log;
    Thread t;

    public SSIDGatherer()
    {
        InitializeComponent();

        if (!EventLog.SourceExists("SSIDGatherer"))
        {
            EventLog.CreateEventSource("SSIDGatherer", "SteamStats");
        }

        log = new EventLog();
        log.Source = "SSIDGatherer";
        log.Log = "SteamStats";
    }

    protected override void OnStart(string[] args)
    {
        ServicePointManager.UseNagleAlgorithm = true;
        ServicePointManager.Expect100Continue = true;
        ServicePointManager.CheckCertificateRevocationList = true;
        ServicePointManager.DefaultConnectionLimit = 50;

        ThreadStart ts = new ThreadStart(Treading);

        try
        {
            t = new Thread(ts);
            t.Start();
        }
        catch (AggregateException agex)
        {
            string message = "";
            foreach (Exception ex in agex.InnerExceptions)
            {
                message += string.Format("Exception: {0} \n\nStack: {1}", ex.Message, ex.StackTrace);
            }

            log.WriteEntry(message, EventLogEntryType.Error);
        }
    }

    protected override void OnStop()
    {
        t.Abort();
    }

    private void Treading()
    {
        while (true)
        {
            //steam custom url allowed characters a-z 0-9 _ -
            string[] characters = new string[] { "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "-", "_" };

            //for every combination you can do with 2 letters (which is minimum required for a player search)
            Parallel.ForEach(characters, characterX =>
            {
                Parallel.ForEach(characters, characterY =>
                            {
                                CrawlSteamIDs("http://steamcommunity.com/actions/Search?T=Account", characterX + characterY, 1);
                            });
            });
        }
    }

    private void CrawlSteamIDs(string baseUrl, string keyword, int page)
    {
        HtmlDocument doc = new HtmlDocument();

        try
        {
            string url = baseUrl + "&K=" + keyword + "&p=" + page;

            //Some steam urls redirect to https for no reason, as the data is also available on http.
            //Could be an error from steam, or an typo from me. Test it out later. For now, crudely replacing will have to do.
            HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(url.Replace("https:", "http:"));
            request.UserAgent = "Steam-Stats Web Crawler";
            request.Timeout = 20000;

            using (WebResponse response = request.GetResponse())
            {
                doc.Load(response.GetResponseStream());
            }
        }
        catch (Exception ex)
        {
            log.WriteEntry("Timeout Error\nURL: " + baseUrl + "&K=" + keyword + "&p=" + page, EventLogEntryType.Error);
        }

        if (doc.DocumentNode.HasChildNodes)
        {
            //if the search returns any results otherwise just skip trying scanning
            if (doc.DocumentNode.SelectSingleNode("//div[@id='resultsMsg']") == null)
            {
                    Parallel.ForEach(doc.DocumentNode.SelectNodes("//a[@class='linkTitle']"), link =>
                                {
                                    string href = link.Attributes["href"].Value;

                                    //get profiles with custom name enabled
                                    if (href.StartsWith("http://steamcommunity.com/id/"))
                                    {
                                        string steamID = href.Substring(29);

                                        DAL db = new DAL("DB");
                                        db.Addparameter("@SteamID", steamID, SqlDbType.NVarChar);
                                        db.ExecuteNonQuery("QueueGathererSteamID", true);
                                    }

                                    //get profiles using the steam64ID
                                    if (href.StartsWith("http://steamcommunity.com/profiles/"))
                                    {
                                        long steam64ID = Convert.ToInt64(href.Substring(35));

                                        DAL db = new DAL("DB");
                                        db.Addparameter("@Steam64ID", steam64ID, SqlDbType.NVarChar);
                                        db.ExecuteNonQuery("QueueGathererSteam64ID", true);
                                    }
                                });

                //crawl next page if available
                HtmlNode pagebtn = doc.DocumentNode.SelectSingleNode("//a[@class='pagebtn' and .='&gt;']");
                if (pagebtn != null)
                {
                    CrawlSteamIDs(baseUrl, keyword, page + 1);
                }
            }
        }
        else
        {
            log.WriteEntry("Error Loading HTML Page: " + doc.ToString() + "\nURL: " + baseUrl + "&K=" + keyword + "&p=" + page, EventLogEntryType.Error);

            //error loading page, try next page instead
            CrawlSteamIDs(baseUrl, keyword, page + 1);
        }
    }
} 
```

来自 eventviwer 的堆栈。源被列为 .NET 运行时

> 应用程序：SSIDGatherer.exe 框架版本：v4.0.30319 描述：进程因未处理的异常而终止。异常信息：System.AggregateException 堆栈：在 System.Threading.Tasks.Parallel.ForWorker[[System._Canon *, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]](Int32, Int32, System.Threading .Tasks.ParallelOptions, System.Action `1<Int32>, System.Action`2, System.Func `4<Int32,System.Threading.Tasks.ParallelLoopState,System.__Canon,System.__Canon>, System.Func`1, System.Action `1<System.__Canon>) at System.Threading.Tasks.Parallel.ForEachWorker[[System.__Canon, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089],[System.__Canon, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]](System.__Canon[], System.Threading.Tasks.ParallelOptions, System.Action`1, System.Action `2<System.__Canon,System.Threading.Tasks.ParallelLoopState>, System.Action`3, System.Func `4<System.__Canon,System.Threading.Tasks.ParallelLoopState,System.__Canon,System.__Canon>, System.Func`5, System.Func `1<System.__Canon>, System.Action`1) 在 System.Threading.Tasks.Parallel.ForEachWorker[[System.* _Canon，mscorlib，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089]，[System._*佳能，mscorlib，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089]]（System.Collections.Generic.IEnumerable `1<System.__Canon>, System.Threading.Tasks.ParallelOptions, System.Action`1，System.Action `2<System.__Canon,System.Threading.Tasks.ParallelLoopState>, System.Action`3，System.Func `4<System.__Canon,System.Threading.Tasks.ParallelLoopState,System.__Canon,System.__Canon>, System.Func`5，System.Func `1<System.__Canon>, System.Action`1）在 System.Threading.Tasks .Parallel.ForEach[[系统。*_Canon，mscorlib，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089]](System.Collections.Generic.IEnumerable`1<System.__Canon>, System.Action`1) 在 SSIDGatherer.SSIDGatherer.Treading() 在 System.Threading.ThreadHelper.ThreadStart_Context(System.Object) 在 System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean)在 System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object) 在 System.Threading.ThreadHelper.ThreadStart()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T18:23:20.637

尝试将[Debugger.Launch](http://msdn.microsoft.com/en-us/library/system.diagnostics.debugger.launch.aspx)放在服务的 OnStart 中，这样您就可以单步执行代码并找出问题所在。

# javascript - 如何安全地读取 WebScriptObject 的属性？

> ID：10777446
> 
> 赞同：7
> 
> 时间：2012-05-27T21:34:46.073
> 
> 标签：javascript, objective-c, webview, webkit

在`WebView`实例中的 JavaScript 和 a之间进行通信时`WebViewDelegate`，JavaScript 类型和 Objective-C 类型会来回转换。例如，当从 JavaScript 调用 Objective-C 函数时，字符串变为`NSString`，数字变为`NSNumber`，对象变为`WebScriptObject`。

其他的很容易处理，但`WebScriptObject`看起来很奇怪。

当传递一个像这样的字典时`{"foo": 1, "bar": 2}`，我看到的大多数代码都是使用提取属性的`valueForKey`，例如在`[[arg valueForKey:@"foo"] intValue] == 1`

但是，如果您不确定该属性是否存在怎么办？如果键是可选的怎么办？`[arg valueForKey:@"baz"]`抛出异常。

我能做的一件事是

```
@try {
  foo = [[arg valueForKey:@"baz"] intValue];
}
@catch (NSException* e) {
  foo = 0;
} 
```

但我听说 Objective-C 中的异常是不安全的，不应该用于流控制。

我能想到的唯一其他方法是这里使用的方法的一些变体：http: [//edotprintstacktrace.blogspot.com/2011/10/sample-webscriptobject-javascript.html](http://edotprintstacktrace.blogspot.com/2011/10/sample-webscriptobject-javascript.html)

换句话说： 1\. 用于`evaluateWebScript`定义实现的 JavaScript 函数`Object.keys`2\. 在您的函数上调用该函数`WebScriptObject`3\. 遍历返回的键数组，并且仅`valueForKey`在找到匹配项时调用。

对我来说，这似乎非常低效。一定有更好的方法……有吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-14T14:37:43.050

从 OS X 10.9 和 iOS 7 开始，有一种更简单的方法可以做到这一点。Apple 引入了一个名为`JSValue`wich 的类，可用于将 JavaScript 对象连接到常规 ObjC 对象：

```
// WebScriptObject *options; obtained from a callback in ObjC
id objCObject = [[options JSValue] toObject];

if ([objCObject isKindOfClass:[NSArray class]]) {
    for (id object in objCObject) {
        NSLog(@"object: %@", object);
    }
}
else if ([objCObject isKindOfClass:[NSDictionary class]]) {
    for (id<NSCopying> key in [objCObj allKeys]) {
       NSLog(@"object for key %@: %@", key, [objCObject objectForKey:key]);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-04T23:56:33.803

我想我找到了一些可行的方法 - 诀窍是你可以使用 -JSObject 将 WebScriptObject 转换为 JSObjectRef，并且有一大堆 C 方法可以在 JSObjectRefs 上工作，尽管文档有点缺乏，所以很难弄清楚要做什么准确地做。

以下是检查属性是否存在的方法：

```
id getProperty(WebScriptObject *obj, NSString *prop) {
    JSStringRef jsProp = JSStringCreateWithCFString((__bridge CFStringRef) prop);

    if (JSObjectHasProperty(self.frame.globalContext, [obj JSObject], jsProp)) {
       return [options valueForKey:prop];
    } else {
       return nil;
    }

    JSStringRelease(jsString);
} 
```

如果要列出所有属性（其键事先不知道），则需要使用更多功能：

```
JSPropertyNameArrayRef properties =
    JSObjectCopyPropertyNames(self.frame.context, [obj JSObject]);

size_t count = JSPropertyNameArrayGetCount(properties);

for (NSInteger i = 0; i < count; i++) {
    JSStringRef property = JSPropertyNameArrayGetNameAtIndex(properties, i);
    // ... etc. as above
} 
```

# slider - Scriptaculous 滑块价格范围句柄

> ID：10777447
> 
> 赞同：1
> 
> 时间：2012-05-27T21:35:10.417
> 
> 标签：slider, range, scriptaculous, handles

我正在使用 Scriptaculous 创建一个带有两个手柄的价格范围滑块。目前的问题是两个手柄可以相互滑过。如果他们到达另一个把手，我怎样才能让他们停下来

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T23:45:23.817

尝试将[`restricted`](http://madrobby.github.com/scriptaculous/slider/)选项设置为`true`：

> 仅用于多个句柄，当限制为真时，具有较大索引的句柄不允许具有小于具有较小索引的句柄的值。当限制为假时，句柄可以独立于其他句柄移动。

# bash - 除了空头期权，我为什么还要提供多头期权？

> ID：10777450
> 
> 赞同：4
> 
> 时间：2012-05-27T21:35:42.397
> 
> 标签：bash, command-line-arguments

许多 shell 脚本和命令同时支持短选项和长选项，例如

```
$ ls -a
$ ls --all 
```

但我就是不明白为什么。为什么一个人更喜欢长而不是短选项，为什么我应该同时支持两者（在实现我自己的脚本时）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T21:40:18.150

我想它是历史性的。短选项更容易实现，因为您只需检查单个字符，但可能的选项数量有限。长选项也更具描述性。

就你自己实现这两个方面而言，大多数库都可以轻松地同时实现这两个，基本上不需要额外的代码。我倾向于使用长选项，因为它们更具描述性，但这纯粹是一个偏好问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T21:51:03.617

### 为什么有人更喜欢做多做空？

长选项让你更清楚你在做什么，并且可以给新用户信心，同时让没有经验的用户更容易理解你在做什么。例如，您可能不会运行：

```
# DO NOT DO THIS PLEASE PLEASE
rm / --no-preserve-root --force --recursive 
```

但你可能会运行：

```
# DO NOT DO THIS PLEASE PLEASE
rm -rf / --no-preserve-root 
```

如果他们不明白它的确切含义。

如上所述，它还可以用于确保用户绝对想要他们正在做的事情，`--no-preserve-root`并防止错误输入可能导致灾难性结果的命令。

### 为什么我要支持两者？

好吧，因为每个人都这样做。这是一件历史性的事情，到目前为止，许多用户已经开始期待它。图书馆喜欢`getopt`为你做这件事，所以我认为没有充分的理由不植入它。

### 奖励：为什么有人更喜欢做空？

另一个我经常得到的问题，为什么有人想要从短到长——毕竟，长选项不是更干净吗？是的，但更有经验的人会对此感到愤怒。`git commit -a -m 'message'`它比打字快得多`git commit --add --message 'message'`。一些库还允许您链接短命令，因此`command --long --another-long`可以成为`command -la`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T00:28:20.920

如果您需要的选项数量多于可打印字符的数量，那么您需要长选项。这是关于与人类的互动，这两种方式都有利弊。

# excel - Excel时差，包括百分之一秒

> ID：10777452
> 
> 赞同：1
> 
> 时间：2012-05-27T21:36:01.820
> 
> 标签：excel, time

我想使用 excel 计算包含格式为 hh:mm:ss,00 的数字的两个单元格之间的时间差。一个简单的减法是行不通的。任何人都可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T21:44:28.050

如果这两个单元格包含有效的时间值，那么假设您从较大的值中减去较小的值，那么减法**应该**起作用（除非您使用 1904 日期系统，否则 Excel 不喜欢负时间值）。

你试过什么公式？你得到了什么结果，你期待什么结果？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T19:36:28.220

我知道这个问题现在几乎已经死了，但是我早些时候在尝试制定一个好的公式来计算办公室工作时间时正在研究这个问题。就像按小时和分钟一样。我想出的是：

```
=HOUR([@[Time Ended]])-HOUR([@[Time Started]])+(MINUTE([@[Time Ended]])-MINUTE([@[Time Started]]))/60 
```

这是我在表格中的小时数列中使用的公式，用于计算两次工作时间，即开始时间和结束时间。请注意，我必须分别处理小时和分钟，这是因为它们有两个不同的功能。如果您在输入的时间中包含秒数，则还有一个时间秒数的功能。将其添加到上面的公式中不会太难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-27T00:28:04.440

您可以使用 If 函数，以免出现负错误。做

而不是 =TEXT(A1-B1)

你可以做：

```
=IF(A1 > B1, A1 - B1, B) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-29T10:07:39.520

经过长时间的搜索，发现了这一点。

```
=VALUE(LEFT(B4,8)-LEFT(A4,8))+VALUE((RIGHT(B4,3)/86400000)-(RIGHT(A4,3)/86400000)) 
```

# expression-blend - 一次在表达式混合属性窗口中设置左、右、下、上边距和边距

> ID：10777457
> 
> 赞同：1
> 
> 时间：2012-05-27T21:36:33.310
> 
> 标签：expression-blend

我可以发誓我已经看过一段视频，展示了如何使用键盘快捷键一次性设置左侧、右侧、底部、顶部的元素的填充，但我找不到它或不记得如何。那么如何在属性窗口中一次将所有边的元素的填充设置为“5”？

生成的 xaml 应为：

```
 Padding="5" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T13:05:03.797

在属性的右侧应该有一个小框。悬停鼠标会显示工具提示**“高级选项”**。单击它，将出现一个菜单。选择**“自定义表达式...”**并输入一个值。该值将应用于财产的所有方面

~~我没有足够的声誉来发布图片，但是~~这是一个屏幕截图 ![混合厚度属性高级选项](../Images/ed2f64937a162437dc942a9f501c7211.png)

实际上，输入的任何内容都将按原样写入 XAML。例如，输入**5,2**会将左右填充设置为**5**，将顶部和底部填充设置为**2**。XAML 结果是`padding="5,2"`. 也可以输入**{Binding}**和其他表达式。

[个人咆哮] *我在对 Blend 感到沮丧之后发现了这一点，因为一次设置厚度类型属性的所有方面（我相信边距、填充等的类型称为厚度）是多么不明显，甚至认为它应该是共同行动。它不涉及键盘快捷键，但我相信这是一个可接受的问题解决方案（设置厚度属性的所有方面）。虽然我的回答迟了，但我希望它对未来的人有所帮助*

# sql - SQL Server - SUM（列）* QtyColumn

> ID：10777458
> 
> 赞同：6
> 
> 时间：2012-05-27T21:36:38.620
> 
> 标签：sql, sql-server

是否可以在不返回多行（Group BY）的情况下获得总数？

例子：

数据：

```
ID    Amount   Quantity
1     50       1 
2     50       2 
```

```
select sum(Amount) * Quantity, SUM(Quantity) as totalQuantity 
  from tbl 
```

我希望结果在 1 行：

```
total       totalQuantity 
150         3 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T21:39:35.750

干得好

```
SELECT SUM(Amount*Quantity) as total, SUM(Quantity) as totalQuantity 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-27T21:38:40.347

```
select sum(Amount * Quantity) as total, 
       sum(Quantity) as totalQuantity
from your_table 
```

# xml - 使用 Nokogiri 解析特殊节点标签

> ID：10777459
> 
> 赞同：0
> 
> 时间：2012-05-27T21:36:57.827
> 
> 标签：xml, nokogiri

项目清单

我正在尝试解析此节点并尝试使用以下代码将其删除：

```
@doc = Nokogiri::XML(open('Web.config'))
@doc.search('system.serviceModel').each do |node|
  puts node
end

<system.serviceModel>
        <services>
            <service name="" 
            </service>
               </services>
</system.serviceModel> 
```

使用这个中间有一个点的特殊标签似乎不起作用。它适用于其他类型的普通节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:55:28.893

更改`@doc.search`为 `@doc.xpath`应该适合您。Nokogiri 被解释`system.serviceModel`为 CSS，即带有 serviceModel 类的系统标记。通过切换到 xpath 方法，Nokogiri 将不会尝试将搜索解释为 CSS。

# vb.net - 自定义控件错误 Visual Studio 的 AddHandler

> ID：10777461
> 
> 赞同：2
> 
> 时间：2012-05-27T21:37:25.123
> 
> 标签：vb.net, controls, mouseenter, addhandler

我有一个 MouseEnter 事件，它当前处理我表单上的一些自定义控件。该程序是一个纸牌游戏。我有一个集合（handCards），当用户画一张卡片时会填充它，然后它将最新的卡片添加到表单中。这个集合包含各种自定义类型的卡片，所有这些卡片都继承自 picturebox。从牌组中抽出卡片并将它们添加到表格中效果很好。我遇到的麻烦是，在运行时，在卡片被绘制并添加到表单后，我创建了一个 addhandler 代码行来让这些卡片响应我的 MouseEnter 事件，但是我的 addhandler 代码行告诉我MouseEnter 不是对象的事件。如何解决这个问题，以便在绘制卡片并将其添加到表单后，当鼠标进入新的自定义控件时，我的 MouseEnter 事件会触发？这里'

```
deck.DrawCard()
AddHandler handCards(handCards.Count).MouseEnter, AddressOf Cards_MouseEnter 
```

PS MouseEnter 事件适用于运行前窗体上的自定义控件，它所做的只是获取控件的图像并通过将图像放置在窗体上更大的卡片上来放大它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T00:31:35.993

我假设您的 handCards 集合是一个对象集合。[尝试使用CType](http://msdn.microsoft.com/en-us/library/4x2877xb.aspx)将其转换为正确的类型，如下所示：

```
AddHandler CType(handCards(handCards.Count), PictureBox).MouseEnter, AddressOf Cards_MouseEnter 
```

正如@Jason 提到的那样，使用`handCards.Count`作为索引将不起作用，因为它是项目的总数，因为您的索引从零开始，并且比计数少一。`handCards(handCard.Count)`应该是这样`handCards(handCards.Count -1)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T03:13:39.480

所以这就是我修复它的方法，以防有人遇到这篇文章。制作了一个单独的 Sub 来执行 AddHandler。程序抽出一张卡片后，它会调用此方法，然后添加我需要的 MouseEnter 处理程序。ByVal 是关键。我原本以为我应该使用 ByRef，但没有。MouseEnter 是一个控制事件，但显然不是 Object，所以现在它可以工作了。

```
Public Sub addHandlers(ByVal inputObject As Control)
    AddHandler inputObject.MouseEnter, AddressOf Cards_MouseEnter
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T01:05:46.837

您可以使用泛型集合来避免类型转换。

```
Private handCards As System.Collections.Generic.List(Of PictureBox) _
    = New System.Collections.Generic.List(Of PictureBox)(52) 
```

**或者**`PictureBox`你可以只使用一个对象数组

```
Private handCards(5) As PictureBox 
```

请记住，您必须通过为数组的`PictureBox`每个元素分配一个对象来初始化集合或数组。

现在您可以将处理程序添加到`PictureBox`数组的元素，因为`PictureBox`派生自`Control`which 实现`MouseEnter`事件。

```
deck.DrawCard()
If handCards.Count > 0 andAlso handCards.Last() IsNot Nothing then
    AddHandler handCards.Last().MouseEnter, AddressOf Cards_MouseEnter
End If 
```

你的处理程序看起来像这样

```
Private Function Cards_MouseEnter(sender As Object, e As System.EventArgs) As Object
    ' Handle mouse events here
End Function 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-23T05:28:18.983

幸运的是，我正在解决这个问题，并且成功地完成了这个解决方案。

首先添加事件处理程序方法您希望的任何地方，为了测试我已经在 Button_Click 添加了这个函数

```
addHandlers(Label1) 'Label one is the control on which I have to attach Mouse Events (Enter,LEave) 
```

现在“addHandlers”函数实现

```
 Public Sub addHandlers(ByVal obj1 As Control)
    AddHandler obj1.MouseEnter, AddressOf MouseEventArgs
    AddHandler obj1.MouseLeave, AddressOf _MouseLeave
 End Sub 
```

现在鼠标事件：

```
Private Function _MouseLeave(ByVal sender As Object, ByVal e As System.EventArgs) As Object
    Try
        Me.Cursor = Cursors.Default
    Catch ex As Exception

    End Try

End Function

Private Function MouseEventArgs(ByVal sender As Object, ByVal e As System.EventArgs) As Object
    Try
        Me.Cursor = Cursors.Hand
    Catch ex As Exception

    End Try
End Function 
```

# c# - 在 C# 中获取数据网格前景更改的最简单方法是什么？

> ID：10777462
> 
> 赞同：1
> 
> 时间：2012-05-27T21:37:25.480
> 
> 标签：c#, datagrid, foreground

我正在尝试在选择单选按钮时更改数据网格所有内容的前景色（在 VS2010 / .Net 4.0 中使用 C#）。

我能够成功地在单选按钮选择时更改背景图像，并且我认为数据网格前景色会同样简单。然而，5 个小时的研究、重写代码和测试都没有结果。

是不是更复杂？或者这只是一个问题还是在单选按钮事件中添加了以下任一内容？我试过这些没有运气...

```
 dataGrid1.Foreground = Brushes.Red; 
```

## **或者**

```
 var dg = new DataGrid();
        dg.Foreground = new SolidColorBrush(Colors.Red); 
```

# xml - Adobe Flex：无法将 XMLList 转换为 mx.collections.IList

> ID：10777471
> 
> 赞同：1
> 
> 时间：2012-05-27T21:38:58.917
> 
> 标签：xml, apache-flex

我的 Flex 应用程序对 php 页面运行一项服务，该页面从我的数据库中提取数据，然后以 XML 格式构建结果。我创建了一个`testList`在任何函数之外调用的新 XMLList，然后当结果返回时（它们首先以包含所有 XML 代码的单个字符串的形式出现）我有以下代码将其转换为 XML，然后附加到我的 testList ：

> var s:String = event.result as String;
> var xml:XML = 新的 XML；
> 测试列表 = xml.user;

数据在一个函数中使用，然后它也被传递给我的一个组件，在那里我尝试在列表中显示 XMLList（使用 testList 作为 dataProvider），我收到以下错误：

TypeError：错误 #1034：类型强制失败：无法将 XMLList@68ffa01 转换为 mx.collections.IList。

我有一种感觉，这可能是一个菜鸟错误，但感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T22:51:02.187

E4X 表达式返回匹配 XML 的列表。`xml.user`为您提供所有`user`元素的 XMLList。您可以使用`XMLListCollection`, 它实现`IList`, 来包装结果，以便您可以将其用作数据提供者。

```
var xml:XML = new XML(event.result as String);
var list:IList = new XMLListCollection(xml.user); 
```

另一种选择是遍历 XMLList 并将其添加到数组或您需要的任何集合中。如果您确定只有一个用户，您可以这样做：

```
var user:XML = xml.user[0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T01:53:53.360

您可能在您已加载的模块或 swf 中使用它，并且加载程序具有与父级不同的 applicationDomain，并且某些其他加载的模块或 swf 也在使用 XMLList 或 XMLListCollection。如果没有关于您的体系结构的更多详细信息，我只能告诉您确保父 applicationDomain 在任何一个孩子之前加载到 XMLList 和/或 XMLListCollection 中，或者确保它们都共享父 applicationDomain。

# php - 无法从 PHP json_encode 解析 JS 中的 JSON 对象

> ID：10777473
> 
> 赞同：2
> 
> 时间：2012-05-27T21:39:24.550
> 
> 标签：php, javascript, json, parameters

我在 PHP 中有一个数组，我用 _json_encode(..)_ 将它打包到 JSON 对象中。然后我将它作为参数发送给 JS 函数。当我想用*eval(..)*解析 Javascript 中的对象时，什么也没有发生（我猜窗帘后面有一个错误）。有什么问题？
代码：

```
<script type="text/javascript">
    function testFun(inArr) {
      var obj=eval('('+inArr+')');
      alert(obj.m); //alert(obj) also doesnt work
    }
</script>  

//PHP
$spola_array = array('m' => 1, 'z' => 2);
$json_obj=json_encode($spola_array);
echo '<script type="text/javascript">testFun('.$json_obj.');</script>'; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T21:42:30.897

它已经被解析，因为您将它作为对象文字而不是字符串输出。这看起来像：

```
<script type="text/javascript">testFun({m: 1, z: 2});</script> 
```

所以在你的功能中，它只是：

```
alert(inArr.m) //1 
```

如果它是一个字符串，您只需要解析它：

```
<script type="text/javascript">testFun('{m: 1, z: 2}');</script> 
```

# javascript - Javascript“点击”一个按钮

> ID：10777477
> 
> 赞同：-1
> 
> 时间：2012-05-27T21:40:04.900
> 
> 标签：javascript, class, button, input, click

我读到如果它是提交/表单，则您无法单击按钮，因此我一直在尝试“单击”网页中的图像按钮，但是我总是遇到错误（null）。

```
<input type="submit" onclick="return logInTBLocal();" value="Login" tabindex="11"> 
```

如何仅在给出上述内容的情况下“单击”此按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T22:12:24.907

我认为您错过了自己问题的重点。让我帮忙澄清一下，如果我误解了你，那么我提前道歉。

您可以单击您创建的“按钮”。但是，您必须定义**logInTBLocal()**。当您提交表单或单击此按钮时，“onclick”事件处理程序将调用 logInTBLocal()。如果未定义此函数，您将收到错误消息。

这是一个例子，

```
<head>
  <script type="text/javascript">
    function logInTBLocal() {
      alert("Sams Teach yourself JavaScript in 24 Hours would help!");
    }
  </script>
</head> 
```

希望这将为您指明正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T21:50:40.527

我不知道你是否不能点击提交按钮，但你可以做的是：

```
document.getElementById('myFormId').submit(); 
```

# c# - 使用儿童更新数据库条目

> ID：10777481
> 
> 赞同：2
> 
> 时间：2012-05-27T21:40:19.027
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, entity-framework

我有以下型号

```
public class CourseModel
{
    [Key]
    public int courseID { get; set; }
    ...
    public virtual ICollection<CourseMeetModel> meets { get; set; }
} 
```

当我尝试编辑其中一个条目并且输入有效时，它可以正常工作。但是，如果它无效，它会提醒用户注意错误。一旦用户修复错误并尝试保存，我就会得到以下异常。

> 存储更新、插入或删除语句影响了意外数量的行 (0)。自加载实体后，实体可能已被修改或删除。刷新 ObjectStateManager 条目。

我注意到如果输入未能通过我的控制器中的验证步骤，就会发生这种情况。

我的控制器

```
public ActionResult EditCourseConfirmed(CourseModel course)
{
        CoursesDBContext db = new CoursesDBContext();
        bool valid = validateCouse(course); //If this fails and the course model is returned back to the view I get that error
        if (valid)
        {
                try
                {
                    db.Entry(course).State = EntityState.Modified;
                    db.SaveChanges();
                    Session[d.s_Clear] = false;
                    return RedirectToAction("Index");
                }
                catch (Exception e)
                {
                    ModelState.AddModelError(string.Empty, "Unable to save the course, please try again." + e.Message);
                    return View(course);
                }

        }

        return View(course);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T21:57:44.507

试试这个

```
try {
   context.SaveChanges();
} 
catch (OptimisticConcurrencyException) 
{
    context.Refresh(RefreshMode.ClientWins, db.table);
    context.SaveChanges();
} 
```

道具：[https ://stackoverflow.com/a/6848729/1166147](https://stackoverflow.com/a/6848729/1166147)

根据您的评论添加解释。感谢您的 EF4 CTP5 提示。很高兴这解决了它，请标记为已接受。当您收到此错误时，在加载和更新之间发生了改变数据（另一个用户等）的事情，存在导致问题的触发器，或者如果使用存储过程，它达到 0 recs。没有更多信息很难知道。这是第一次更新吗？在用户遇到错误，修改，然后尝试继续而不刷新之前，是否有另一个更新运行成功？你有什么触发器吗？您的并发度是多少 - 在此用户的查询和更新之间是否有其他用户编辑和保存？阅读我给出的帖子的链接 - 有人在实体键的元数据中提到了 ReadOnlyAttribute 被替换，

（根据 MSDN 修改）默认情况下，Entity Framework 实现了一个乐观并发模型。这意味着在查询数据和更新数据之间不会对数据源中的数据进行锁定，如果**另一个用户修改了数据**，则可能会出现此错误。使用此属性时，实体框架会在**保存更改之前****检查**数据库中的更改。

 **任何有**冲突的更改**都会**导致 OptimisticConcurrencyException**。

当您定义使用存储过程对数据源进行更新的实体数据模型时，也会发生 OptimisticConcurrencyException。在这种情况下，当用于执行更新的存储过程报告零行已更新时，将引发异常。SET NOCOUNT ON 可以解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T23:08:45.333

感谢用户@user1166147，它导致了 dbupdate 异常，但我仍然不知道为什么......

由于 EF4 CTP5 DbContext 没有刷新方法，我最终这样做了：

```
 try
    {
        db.SaveChanges();
    }
    catch (DbUpdateConcurrencyException e)
    {
        var entry = e.Entries.Single();
        entry.OriginalValues.SetValues(entry.CurrentValues);
        entry.CurrentValues.SetValues(entry.CurrentValues);
        db.SaveChanges();
    } 
```

更多细节在这里[http://blogs.msdn.com/b/adonet/archive/2011/02/03/using-dbcontext-in-ef-feature-ctp5-part-9-optimistic-concurrency-patterns.aspx](http://blogs.msdn.com/b/adonet/archive/2011/02/03/using-dbcontext-in-ef-feature-ctp5-part-9-optimistic-concurrency-patterns.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T22:12:22.500

在您看来，请确保添加此

```
@Html.HiddenFor(m => m.courseID) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-15T17:38:26.990

我得到了例外原因是我的实体有一个带有映射的键

```
 HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity); 
```

当我添加了一个新实体并提供了一个 id 时，在保存时上下文会认为它是一个修改过的实体而不是一个新实体，所以我没有为键提供值并且在保存时我检查键的默认值价值，从中我知道它是新的还是修改的**

# python - python，创建动态html名称值..

> ID：10777486
> 
> 赞同：1
> 
> 时间：2012-05-27T21:40:53.653
> 
> 标签：python, django, dynamic, render

我需要一点帮助..我正在遍历数据库中的对象并将所有对象渲染为模板，到目前为止一切都很好。但我想要的是每个呈现的 html 名称字段都应该有不同的名称，以便我可以稍后引用它们。我的代码是这样的：

```
{% for p in products %}
      <input type="number" name="name1" value="{{p.arg1}}" size="12"/>
          <input type="number" name="name2" value="{{p-arg2}}" size="12"/>
{% endfor %} 
```

但是如果我在 DB 中有 4 个对象，那么我将在模板中有 8 个呈现的输入字段，但它们都将具有“名称”值作为*name1*和*name2*，是否可以动态创建 8 个不同的名称以便我可以参考在我看来，他们所有人……

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T21:56:12.840

使用[forloop.counter](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#for)变量

```
{% for p in products %}
    <input type="number" name="name-{{forloop.counter}}-arg1" value="{{p.arg1}}" size="12"/>
    <input type="number" name="name-{{forloop.counter}}-arg2" value="{{p.arg2}}" size="12"/>
{% endfor %} 
```

`forloop.counter`是 1 索引的。还有`forloop.counter0`从 0 开始的 for 索引。

您确定[django formsets](https://docs.djangoproject.com/en/1.4/topics/forms/formsets/)不是您需要的吗？

# data-structures - 设计客户端/主机网络游戏

> ID：10777491
> 
> 赞同：0
> 
> 时间：2012-05-27T21:41:33.000
> 
> 标签：data-structures, network-programming

我目前正在实现一个游戏并想添加一个网络功能。（即我希望能够加入并托管我的应用程序/游戏）。这似乎比我最初想象的要困难得多。这个问题的目的是询问这些实现是否有一个好的通用数据结构选择。

我的主要问题是我的 Game 类中目前有很多函数，如下所示：

`f() { if (host) doSomething() else doSomethingCompletelyDifferent() }`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T21:49:23.213

您可以使用 OOP。唉，您没有提供您使用的编程语言。

例如，如果您使用 C 编程，您可以这样做

```
struct thefunctions {
    void (*stuff1)(void);
    void (*stuff2)(int);
    int (*get)(int);
};

struct thefunctions network {
    .stuff1 = doSomething;
}

struct thefunctions standalone {
    .stuff1 = doSomethingCompletelyDifferent;
}

struct thefunctions * funcs;

[...]

if (host) {
    funcs = &network;
} else {
    funcs = &standalone;
}

// now the structs are initialized. We can now use funcs->.

[...]

// If I am sure that stuff1 has been initialited properly, I can do
funcs->stuff1();

// If not, I should check first
if (funcs->stuff1) funcs->stuff1();

// or
assert(funcs->stuff1);
funcs->stuff1(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T21:50:51.463

我个人不会在同一类中为网络应用程序编写服务器和客户端代码。也许您可以考虑派生自同一个接口或基类的 ServerGame 和 ClientGame 类。

至于任何其他特定的数据结构，我相信这在很大程度上取决于您正在编写的平台和您正在使用的语言（例如，在 .NET 的世界中，您可能能够利用 WCF隐藏很多低级网络的东西）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T22:14:35.340

解决此问题的最佳方法是始终拥有游戏服务器。然后您可以在本地玩，或者您可以加入在您的机器上或其他人上托管的网络游戏。

工作之一是在服务器上拆分出您需要的功能以及在客户端上需要哪些功能。一般来说，它是客户端中的 UI，以及服务器中的逻辑/存储。

数据结构很大程度上依赖于游戏，切换的难易程度取决于您当前的代码，但客户端服务器是要走的路。

# sql - PhoneGap + 数据库如何将结果保存在数据库中以及如何在页面中使用数据库存

> ID：10777495
> 
> 赞同：1
> 
> 时间：2012-05-27T21:41:37.840
> 
> 标签：sql, cordova, sample, squeryl

我对 Javascript 的理解非常有限。我有一个简单的计算。`A` `B`并且`C`是 3 个输入数字，我需要`D`使用 Phonegap 和 jQuery 将结果保存在 iOS 数据库中以供将来使用。

```
[ (A-10) / (200/B) ] + [ (C/10) x ((10xB)/45)] = C 
```

这是我的简单 javascript

```
function test(){
  a=Number(document.calculator.entree1.value);
  b=Number(document.calculator.entree2.value);
  c=Number(document.calculator.entree3.value);
  d=((a-10)/(200/b))+((c/10)*((10*b)/45))
  document.calculator.total.value=Math.round(d);
} 
```

我的问题是如何将这些数据结果存储`Math.round(d);`在电话差距数据库中并在每日页面结果中再次使用它？

谢谢。

# ssas - SSAS 中的别名维度成员值

> ID：10777498
> 
> 赞同：0
> 
> 时间：2012-05-27T21:42:26.497
> 
> 标签：ssas

是否可以为 SSAS 中的属性显示或返回不同的值？

例如，在我的日期维度中，我推导出月内的工作日。像这样的东西：

```
 DateId          Date            BusinessDay         WeekDay
    20120101        2012-01-01      01                  Mon
    20120102        2012-01-02      02                  Tue
    20120103        2012-01-03      03                  Wed
    20120104        2012-01-04      04                  Thu
    20120105        2012-01-05      05                  Fri
    20120106        2012-01-06      05                  Sat
    20120107        2012-01-07      05                  Sun
    02120108        2012-01-08      06                  Mon 
```

但问题是每个月都有一个 01 BusinessDay，所以当我为此创建层次结构时，我收到重复错误。同样在周末，我保持工作日不变。

所以我需要一种方法来拥有独特的 BusinessDay 价值，但要表现出对用户友好的价值。我在想我可以连接 DateId + BusinessDay，但表达式只显示右 2 个字符。

使2012010101显示为01

这甚至可能吗？也许在某处的属性属性中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T05:58:47.643

我能够通过执行以下操作来完成此操作：

我在 DSV 中添加了两列。一个是要显示的值，另一个是真实值。接下来，我打开日期维度的设计视图并添加属性关系，就像添加任何新属性一样。

现在要完成这项工作，您必须打开属性属性。并一直滚动到底部并在 Source 选项下将 KeyColumns 更新为实际值属性。接下来，在同一个 Source Options 中，将 NameColumn 更新为所需的 Display 值。

这实际上很容易。

# python - 我的第一个 Web 应用程序（Python）：使用 CGI 还是 Django 之类的框架？

> ID：10777502
> 
> 赞同：12
> 
> 时间：2012-05-27T21:43:27.420
> 
> 标签：python, django, apache, google-app-engine, cgi

我不想用细节给大家带来负担，但基本上我是一名没有 Web 开发经验的 Compsci 大二学生。

基本上，我想创建一个小型“网络应用程序”，它接收来自 html 表单的输入，让 python 脚本执行一些计算，然后在浏览器中重新显示这些结果。

截至目前，我已经构建了表单和脚本。但是，当我尝试测试表单时，我的浏览器没有运行脚本，而是尝试下载它。据我了解，这是一个 cgi 脚本问题，我必须创建一个 Web 服务器来测试这个脚本。

这就是我被困住的地方。我对 Web 服务器以及如何设置它们知之甚少。最重要的是，我听说 GCI 脚本已经成为过去，并且需要大量开销才能正常运行。

这引出了我的问题。如何完成我的应用程序并测试我的 cgi 脚本？我是安装 apache 并弄乱它还是应该研究像谷歌应用引擎这样的东西？是否有其他方法可以在没有 cgi 脚本的情况下完成此任务？像 Django 这样的框架在哪里适合这个？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-27T23:11:43.287

Django，虽然很好，包罗万象，得到很好的支持，但有时对于小型 Web 应用程序来说太过分了。Django 从一开始就希望你遵守它的规则，如果你不需要它们，你必须避免使用数据库和管理面板之类的东西。使用 Django 也更容易遵循其项目布局，即使对于一个简单的应用程序来说太复杂也是如此。

所谓的微框架可能更适合您的小型应用程序。它们建立在相反的原则上：现在使用最少的功能，根据需要添加更多功能。

*   [Flask](http://flask.pocoo.org/)基于 Werkzeug WSGI 库和 Jinja2 模板（后者是可切换的），有大量文档（带有[关于 virtualenv 和 stuff](http://flask.pocoo.org/docs/installation/)的注释），非常适合小型和大型应用程序。它捆绑了一个自动重新加载的开发服务器（您的开发机器上不需要 Apache）和 Werkzeug 驱动的交互式调试器。有[HTML 表单](http://packages.python.org/Flask-WTF/)和[数据库 ORM 之](http://packages.python.org/Flask-SQLAlchemy/)类的扩展。

*   [Bottle](http://bottlepy.org/)与微框架一样小，由 1（一个）文件组成，包括开发服务器。将其放入您的项目文件夹并开始破解。内置的 SimpleTemplate 模板引擎是可切换的，但与 Flask 相比，开发服务器更加脆弱。文档不太完整，而且，在我看来，整个事情不像 Flask 那样精致和方便。

在这两种情况下，您都在本地使用开发服务器，然后使用 WSGI（两个框架都支持的 Python Web 应用程序的服务器接口）进行部署。部署 WSGI 应用程序的方法有很多，Apache`mod_wsgi`是流行的方法之一。

除非一个依赖项（Bottle）优于三个（Flask、Jinja2 和 Werkzeug），否则我完全会选择 Flask。

（还有许多其他框架，所以请等待他们的用户来告诉他们。我建议避免使用[web.py](http://webpy.org/)：它可以工作，但充满魔力，并且与 Flask 或 Bottle 相比不够优雅。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-28T04:10:22.657

快速开始使用 webapp 的一种方法是首先了解，然后修改，例如 App Engine“[留言簿](https://developers.google.com/appengine/docs/python/gettingstarted/)”示例。这样做的好处是为您完成了运行 Web 服务器和设置数据库服务器（假设您需要持久性）的许多其他必要的乏味工作。App Engine 还提供了相当灵活的开发环境。这当然不是唯一的方法，我承认在推荐它时有偏见，但它的摩擦力相当低。

GCI scripting is hardly a thing of the past, though it's not what the cool kids are doing. CGI has the benefit, and the curse, of exposing more of the raw plumbing. It forces you to understand a lot about primitive (in the low-level sense) web architecture, but it's also a bit of a large bite to chew on if you have an immediate problem to solve that can solved by simpler means.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-27T23:10:19.613

如今，似乎大多数 Python Web 开发似乎都是由框架完成的。这有几个原因：

1.  大量成熟的工具。Django 内置了用户身份验证、内置数据库管理、内置会话、几乎所有的 ORM，它可以让您无缝地支持几个数据库。

2.  内置网络服务器。像 django 和 pylons 这样的大型 Python 框架已经内置了网络服务器。Django 有一个非常简单的网络服务器`python manage.py startserver`（就这么简单），这使得创建和调试应用程序变得非常容易。它是单线程的，因此将调试器放入其中是无痛的

3.  巨大的社区。如果你有一个 django 问题，它会很快得到回答，所以社区很大。

django 教程将向您介绍开发的所有主要方面。它只有 4 页，与阅读、学习和摆弄 apache 设置相比，您将能够让您的应用程序运行起来简单得多。 [https://docs.djangoproject.com/en/dev/intro/tutorial01/](https://docs.djangoproject.com/en/dev/intro/tutorial01/)

尽管如果您的应用程序只是 1 个表单和一个脚本来处理它，那么现在 django 可能会有点过分。由于其无缝的测试框架，它很容易发展任何项目。我从来没有使用过烧瓶或瓶子或其他微框架，但我会记住你的项目将来会在哪里。

至于 django 适合的地方，它是一个完整的堆栈框架，包括演示（模板）、数据管理（服务器 orm）、身份验证、中间件、表单……创建一个完全包容的 Web 应用程序所需的一切。Django 和几乎所有其他 python 框架都实现了 wsgi 标准。它是一个允许网络服务器之间互操作的接口。 [http://en.wikipedia.org/wiki/Web_Server_Gateway_Interface](http://en.wikipedia.org/wiki/Web_Server_Gateway_Interface) 它非常枯燥，您永远不必直接连接它。这就是这些框架在幕后所做的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-27T22:07:39.213

如果可以使用应用引擎，为什么还要设置和维护自己的网络服务器。它有一个优秀的 SDK 来测试你的代码。这是一个示例 [https://developers.google.com/appengine/docs/python/gettingstarted/handlingforms](https://developers.google.com/appengine/docs/python/gettingstarted/handlingforms)

你会在这里找到 Django：[https](https://developers.google.com/appengine/docs/python/gettingstarted/templates) ://developers.google.com/appengine/docs/python/gettingstarted/templates 我更喜欢使用 Jinja 进行模板化。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-27T21:55:02.170

Django 带有自己的服务器，但在您的情况下，我会推荐 apache 和 mod_python，因为它似乎是您正在构建的一个相当简单的站点。

设置 Apache 轻而易举，在网络上进行简单搜索即可满足您的所有需求。[您可以在此处](http://www.modpython.org/)找到有关 mod_python的更多信息，阅读一下它，然后在适合您需要的教程之后使用谷歌搜索。

# javascript - 在 iPad 上未定义变量与在我的浏览器中定义变量的原因是什么？

> ID：10777507
> 
> 赞同：0
> 
> 时间：2012-05-27T21:44:13.620
> 
> 标签：javascript, jquery, variables, web-applications, undefined

我一无所知。

在我的 Jquery 移动插件中，我声明：

```
var $currentEntry = $.mobile.urlHistory.stack[$.mobile.urlHistory.activeIndex].url;
    $activePage = $('div:jqmData(url="'+ $currentEntry +'")'); 
```

所以我正在获取活动页面的 url 并使用它来构造一个 $activePage 对象。

这在桌面上运行良好，但在我的 iPad（iOS3.3）上，**$currentEntry**定义正确，但**$activePage**是*undefined*。

**问题：**
这可能是什么原因？

您可以排除竞争条件，因为将其包装在 10 秒超时中仍会产生相同的结果。此外，如果我直接控制台相应页面并查询它的**data-url**，它会显示正确的值。那么为什么上面的内容仍然让我在 iOS 上未定义

```
 undefined 
```

同时在其他地方正常工作？

感谢您的任何提示！

**编辑**：
元素将是动态的，但我可以直接在我的设置中对页面进行控制台，如下所示：

```
console.log( $('div:jqmData(wrapper="true").ui-page-active').attr('id') );
console.log( $('div:jqmData(wrapper="true").ui-page-active').attr('data-url') ); 
```

两者都返回正确的*id*和*data-url*，因此元素必须存在。

**EDIT2**：
我可以查询属性*data-url*给我正确的值。但是，我不能像这样选择使用此属性：

```
$('div[data-url="'+$currentEntry+'"]').length 
```

这给了我**0**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T21:58:44.347

我承认我是瞎猜的，但你应该尝试：

```
$activePage = $('div').filter(function(){return $(this).jqmData('url') === $currentEntry}) 
```

顺便说一句，就语义而言，我认为“$currentEntry”如果不是 jQuery 对象，则不应以美元符号开头。

# android - Android 选择监听器

> ID：10777510
> 
> 赞同：1
> 
> 时间：2012-05-27T21:44:33.073
> 
> 标签：android, android-view

每次选择一个 android 视图（在我的情况下为 EditText）时，我都需要调用一个方法，并在每次取消选择它时调用其他方法。我该怎么做？似乎在android中没有“onSelectedListener”或类似的东西。如果重要的话，我需要它从 API 级别 7 开始工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T21:54:29.013

您是指`EditText`可以编写文本的状态的“选定”状态吗？那么你应该使用`setOnFocusChangeListener`.

# facebook - Facebook 页面选项卡 iframe 应用程序无法正常工作

> ID：10777511
> 
> 赞同：3
> 
> 时间：2012-05-27T21:44:53.653
> 
> 标签：facebook, iframe

因此，我已按照所有其他问题的说明进行操作。

我这样做了：

[https://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&next=YOUR_URL](https://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&next=YOUR_URL)

现在，当我单击页面选项卡链接（来自管理员登录或不是管理员）时，我只是得到一个空白页面。它按预期进入 facebook.com/mypage/app_{my_id} 但什么也不做。

![在此处输入图像描述](../Images/d6352cba4fd064affc1d5f2f28ecf4a6.png)

所有链接 https 或非 https 都可以！即使在页面设置/应用程序上，我也可以单击“转到应用程序”，它工作正常！

我的应用程序设置中的页面选项卡设置没有指向另一个线程建议的apps.facebook.com/myapp URL。它没有设置为 FBML 页面。

有一段时间我得到

```
App Temporarily Unavailable
Parse errors:
FBML Error (line 6): illegal tag "body" 
```

但是，这是一个 iframe 应用程序，而不是 FBML 应用程序。

让我发疯，这里的所有其他问题都没有适当的解决方案。

有解决办法吗？我真的没有要发布的代码，因为它可以正常工作并且可以通过除页面选项卡选项之外的任何方式访问应用程序。也就是说，该应用程序可以像普通的 iframe 应用程序一样正常工作，只是页面标签 URL 没有完成最后一步。

这是应用程序设置。它显然没有设置为 FBML。

![在此处输入图像描述](../Images/9ebf6f967806fe23643fd6adc10d5d98.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T22:21:19.623

我几乎 100% 确定这是 FBML 设置，检查应用程序的这*两个*设置都没有设置为 FBML - 除非您可以给我们应用程序 ID 来检查，否则没有人可以给出绝对 100% 肯定的答案

1) 在“高级”选项卡上，“画布模式”的设置 - 这不会出现在 2011 年 3 月之后创建的应用程序中

![设置截图](../Images/e6e0b00b90e3c18e827a81f9526789f2.png)

2) 高级选项卡的“迁移”设置中有“页面选项卡 iframe”设置。这控制 FBML 是否与您的应用程序的页面选项卡一起使用 - 如果设置为禁用，则应用程序仍将 FBML 用于其页面选项卡

![设置截图](../Images/cddfd2b4274c60580d5234a875b0092e.png)

您还可以通过 API 检查第二个设置，对于那里的示例应用程序，可以通过调用 /APPLICATION_ID/?fields=migrations&access_token=APP_ACCESS_TOKEN 来检索画布设置

返回值是应用程序可以设置的迁移及其值的结构：

```
{
  "migrations": {
    "secure_stream_urls": false, 
    "expiring_offline_access_tokens": false, 
    "december_rollup": false, 
    "page_tab_iframe": false, 
    //[ SNIPPED OTHER MIGRATIONS ]
  }, 
  "id": " // SNIPPED APP ID", 
  "type": "application"
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T14:50:30.723

我刚刚遇到了这个问题，问题是我在画布和安全画布中都有一个安全 URL (https)。在不安全的连接上，结果是空矩形。需要安全 (https) 和不安全 (http) URL。

# jquery - html页面的轮播显示在带有jquery的模式中

> ID：10777512
> 
> 赞同：1
> 
> 时间：2012-05-27T21:45:01.670
> 
> 标签：jquery, html, plugins, lightbox, carousel

对于一个项目，我需要构建一个加载到模式中的 html 页面轮播，如下图所示。

要求的其他一些功能是：

1.  前一个和下一个轮播步骤的部分可见性
2.  在一个特定的步骤中强制打开带有轮播的灯箱，而不是总是在第一个步骤
3.  旋转木马台阶的自动高度，不是固定的
4.  隐藏第一个（最后一个）项目的上一个（下一个）箭头

我的想法是将轮播的单个步骤视为单个外部 html 页面，但我对每个建议持开放态度。

所以，问题是：做这个的最好方法是什么？![我正在寻找插件和最佳实践，以防万一。](../Images/792996869c3c77c1793dbf98cd9f970a.png) 非常感谢您，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T21:46:25.997

这是我个人最喜欢的：

[http://fredhq.com/projects/roundabout/](http://fredhq.com/projects/roundabout/)

效果很好，与浏览器高度兼容（如果操作正确），并且易于定制。

只需将它放在一个半透明的固定 div 和你的集合上。

# android - 如何以一种不错的方式从 UI 元素创建对象？

> ID：10777513
> 
> 赞同：1
> 
> 时间：2012-05-27T21:45:15.200
> 
> 标签：android, design-patterns, software-design

在我的 android 应用程序中，我有一些字段，例如

```
MyButton a;
MyEditText b;
MySpinner c;
MyTextView d; 
```

这些中的每一个都`public class MyButton extends Button implements InfoExtract`像

```
public interface InfoExtract{
    String getTheText();
} 
```

在这些字段中（用户可以更改其中的一些），有一个要创建的 UserProfile，如下所示：

```
public class ProfileUpdate {
    // The fields have to be string no matter what
    String firstName;
    String lastName;
    String dateOfBirth;
    String relationshipStatus
} 
```

执行流程是这样的：

```
List<InfoExtract> uiElements = new ArrayList<InfoExtract>();
uiElements.add(a);
uiElements.add(b);
uiElements.add(c);
uiElements.add(d);
someButton.setOnClickListener(new SaveProfileListener(uiElements); 
```

`SaveProfileListener`或多或少这样做：

```
ProfileUpdate pup = new ProfileUpdate();
int i = 0;
pup.firstName = uiElements.get(i++).getTheText()
pup.lastName = uiElements.get(i++).getTheText();
pup.dateOfBirth = uiElements.get(i++).getTheText();
pup.relationshipStatus = uiElements.get(i++).getTheText(); 
```

**坏事#1：**如果我想添加其他字段，这显然需要做很多工作。

**坏事#2：**列表中元素的顺序很重要。

**坏事#3：**例如，我不能轻易操纵 dateOfBirth 的日期格式。

我本可以做的，但同样糟糕的是：

```
// Pass the listener what fields it should use.
someButton.setOnClickListener(new SaveProfileListener(a, b, c, d); 
```

**如何让这变得又好又干净？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T00:38:56.730

我最终为每个字段使用了 Map 和新的 Enum 类型。

# c++ - 如何在 Linux 上使用 boost::call_once 在 C++ 中设计单例类？

> ID：10777520
> 
> 赞同：1
> 
> 时间：2012-05-27T21:47:55.263
> 
> 标签：c++, linux, multithreading, boost, singleton

我正在使用 C++ 在 Linux 上设计一个线程安全的单例类`boost::call_once`。

我收到以下编译器错误：

```
/tmp/ccLanvZI.o: In function `SingleTon::getInstance()':
singleTon.cpp:(.text._ZN9SingleTon11getInstanceEv[SingleTon::getInstance()]+0x1b): undefined reference to `SingleTon::p'
/tmp/ccLanvZI.o: In function `SingleTon::makeInstance()':
singleTon.cpp:(.text._ZN9SingleTon12makeInstanceEv[SingleTon::makeInstance()]+0x21): undefined reference to `SingleTon::SingleTon()'
singleTon.cpp:(.text._ZN9SingleTon12makeInstanceEv[SingleTon::makeInstance()]+0x2c): undefined reference to `SingleTon::p'
collect2: ld returned 1 exit status
make: *** [singlton] Error 1 
```

看到一些帖子后，我仍然不知道如何处理这个错误。如何更改`void (SingleTon::)()`为`void (*)()`？

* * *

```
#include <iostream>
#include <pthread.h>
#include <boost/thread/mutex.hpp>
#include <boost/thread/once.hpp>
#include <boost/bind.hpp>
#include <boost/threadpool.hpp>
#include <boost/thread/thread.hpp>

boost::once_flag flag = BOOST_ONCE_INIT;

class SingleTon
{
    private:
        static SingleTon *p;
        SingleTon();
        SingleTon(const SingleTon&);
        SingleTon& operator=(const SingleTon&);
        void makeInstance();

    public:
        SingleTon* getInstance();

        ~SingleTon()
        {
            if (p)
                delete p;
        }  
};

void SingleTon::makeInstance() 
{
    p = new SingleTon;
    return;
}

SingleTon* SingleTon::getInstance()
{
    boost::call_once( makeInstance  , flag); // error !!!
    return p;
}

int main()
{
    SingleTon *s;
    s = SingleTon::getInstance();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T21:54:06.753

该错误表明 boost::call_once 不适用于成员函数指针。这是因为您忘记将 makeInstance 和 getInstance 都设为静态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T21:32:33.943

为什么要写析构函数？你打算摧毁哪个实例？哦等等，只有一个，因为它是一个单例，那么在这种情况下，为什么析构函数会尝试删除实例？无限递归失败。

无论如何，单身人士闻起来，避免他们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T23:30:03.840

正如 AardvarkSoup（美味*且*营养丰富）所指出的，您需要`makeInstance()`并且`getInstance()`保持静止。

此外，您需要定义`SingleTon()`，而不仅仅是声明它，因为它用于`makeInstance()`.

最后，您需要初始化静态成员`p`，例如：

```
SingleTon* SingleTon::p(nullptr); 
```

这使得代码编译。然而，设计一个线程安全的单例类并非易事。请参阅[此问题](https://stackoverflow.com/questions/1008019/c-singleton-design-pattern)以获取大量链接，以获取有关为什么应尝试避免使用单例的非常完整的解释。

# forms - CakePHP，是否可以预先填写表格？

> ID：10777523
> 
> 赞同：0
> 
> 时间：2012-05-27T21:48:33.963
> 
> 标签：forms, cakephp

我只是想知道是否可以预填表格。我正在创建一个网站，要求用户在发送发票之前输入他们的数据和其他数据。我想知道是否可以对发票进行编码，以便当用户单击链接以创建发票时，他们的用户名已经在表单上（这意味着他们只需要输入接收发票的人的数据）

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T21:53:56.330

```
$this->data['model_name']['field_name'] = 'Default Value'; 
```

# c# - nhibernate webApp序列化流利配置的对象

> ID：10777524
> 
> 赞同：0
> 
> 时间：2012-05-27T21:48:49.687
> 
> 标签：c#, model-view-controller, nhibernate, serialization, fluent-nhibernate

由于我是 nhibernate 的初学者，我将冒险提出一个重复的问题。

有人可以向我展示实际示例序列化流利创建的配置对象与一个映射实体尽可能简单。我不要求实体本身的映射，也不是实体的实际示例，只是 nhib.configuration 和具有 Web 应用程序的磁盘上的序列化。考虑使用。

请询问您是否需要更多信息。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:29:40.267

演示如何序列化/反序列化的[示例代码。](https://github.com/ayende/Effectus/blob/master/Effectus/Infrastructure/BootStrapper.cs)

本质上是

```
using(var file = File.Open(SerializedConfiguration, FileMode.Create))
{
    var bf = new BinaryFormatter();
    bf.Serialize(file, configuration);
} 
```

注意：IUserType、IConnectionProvider 等接口的所有自己的实现都必须是可序列化的。

# android - 设备选择对话框不显示

> ID：10777526
> 
> 赞同：0
> 
> 时间：2012-05-27T21:49:02.803
> 
> 标签：android, device

我有一部三星 Galaxy S i9000 智能手机，我想在我的设备上调试我的 Android 应用程序。

[我在http://developer.android.com/guide/developing/device.html](http://developer.android.com/guide/developing/device.html)阅读了说明。我必须说，虽然除了 Kiel 软件和智能手机自带的 USB 驱动程序之外，我没有安装任何其他驱动程序，但当我写的时候，我可以在列表中看到我的设备`adb devices`——我在列表中看到一个带有一些数字的设备开始，而不是“设备”。我还在我的设备管理器中看到一个设备作为 ADB 接口分支下的三星 Android 复合 ADB 接口。同样在 DDMS 工具中，我看到了两个设备；一个模拟器，另一个设备的编号与我在命令行中看到的相同。

我认为到目前为止一切都是正确的，但是当我按下 Eclipse 中的运行按钮或调试按钮时，设备选择器对话框没有出现，如 android 开发网站中所述。有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T23:33:48.317

那么步骤应该是： - 安装驱动程序（或 Kies，因为我连接了很多不同的设备，这对我来说更简单） - 检查是否在设置 -> 应用程序 -> 开发 -> USB 调试下检查了 USB 调试 - 检查设备是否出现在亚行名单中

如果这不起作用，就像我在 Honeycomb 上尝试过的情况一样，尝试简单地删除任何模拟器，看看它是否不会自动上传到您的设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T21:57:36.797

检查控制台窗口以查看发生了什么。设备选择器对话框仅在无法自动选择目标时显示。

# scala - 什么是好的例子：“程序的操作应该将输入值映射到输出值，而不是改变数据”

> ID：10777529
> 
> 赞同：7
> 
> 时间：2012-05-27T21:49:52.110
> 
> 标签：scala, functional-programming

我在 Scala 中遇到了这句话来解释它的**功能行为**。

> *程序的操作应该将值的输入映射到输出值，而不是就地更改数据*

有人可以用一个很好的例子来解释吗？

**编辑：** 请在上下文中解释或举例说明上述句子，请不要使其复杂化以引起更多混乱

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-28T07:02:50.217

这里所指的最明显的模式是，与 Scala 相比，在 Java 中编写使用集合的代码的方式是不同的。如果您正在编写 scala 但使用*Java 的习语*，那么您将通过在适当的位置改变数据来处理集合。执行相同操作的*惯用*scala 代码有利于将输入值映射到输出值。

让我们看一下您可能想要对集合执行的一些操作：

## 过滤

在 Java 中，如果我有一个`List<Trade>`并且我只对与*Deutsche Bank*执行的交易感兴趣，我可能会执行以下操作：

```
for (Iterator<Trade> it = trades.iterator(); it.hasNext();) {
    Trade t = it.next();
    if (t.getCounterparty() != DEUTSCHE_BANK) it.remove(); // MUTATION
} 
```

在这个循环之后，我的`trades`收藏只包含相关的交易。但是，我使用*突变*实现了这一点——粗心的程序员*很容易错过*`trades`输入参数、实例变量或方法中其他地方使用的参数。因此，**他们的代码现在很可能被破坏了**。此外，出于同样的原因，这样的代码对于重构来说非常*脆弱；*希望重构一段代码的程序员必须非常小心，不要让变异的集合逃出它们打算使用的范围，反之亦然，他们不会意外地在应该使用的地方使用未变异的集合使用了一个变异的。

与 Scala 比较：

```
val db = trades filter (_.counterparty == DeutscheBank) //MAPPING INPUT TO OUTPUT 
```

这将*创建一个新集合*！它不会影响正在查看的任何人，`trades`并且本质上更安全。

## 映射

假设我有一个`List<Trade>`并且我想为`Set<Stock>`我一直在交易的独特股票获得一个。同样，Java 中的习惯用法是创建一个集合并对其进行*变异*。

```
Set<Stock> stocks = new HashSet<Stock>();
for (Trade t : trades) stocks.add(t.getStock()); //MUTATION 
```

使用 scala 正确的做法是映射输入集合，然后转换为集合：

```
val stocks = (trades map (_.stock)).toSet  //MAPPING INPUT TO OUTPUT 
```

或者，如果我们关心性能：

```
(trades.view map (_.stock)).toSet
(trades.iterator map (_.stock)).toSet 
```

这里有什么优势？好：

1.  我的代码永远无法观察到部分构造的结果
2.  将函数应用`A => B`到 a`Coll[A]`以获取 a`Coll[B]`更加清晰。

## 积累

同样，在 Java 中，成语必须是突变。假设我们试图将我们所做交易的*十进制数量相加：*

```
BigDecimal sum = BigDecimal.ZERO
for (Trade t : trades) {
    sum.add(t.getQuantity()); //MUTATION
} 
```

同样，我们必须非常小心，不要意外观察到部分构造的结果！在 scala 中，我们可以在一个表达式中做到这一点：

```
val sum = (0 /: trades)(_ + _.quantity) //MAPPING INTO TO OUTPUT 
```

或其他各种形式：

```
(trades.foldLeft(0)(_ + _.quantity)
(trades.iterator map (_.quantity)).sum
(trades.view map (_.quantity)).sum 
```

哦，顺便说一句，**Java 实现中有一个错误！** *你发现了吗？*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T22:02:56.050

我会说这是之间的区别：

```
var counter = 0
def updateCounter(toAdd: Int): Unit = {
  counter += toAdd
}
updateCounter(8)
println(counter) 
```

和：

```
val originalValue = 0
def addToValue(value: Int, toAdd: Int): Int = value + toAdd
val firstNewResult = addToValue(originalValue, 8)
println(firstNewResult) 
```

这是一个粗略的简化，但更完整的示例是使用 foldLeft 来建立结果而不是自己做艰苦的工作：[foldLeft 示例](http://seanparsons.github.com/scalawat/Fold+To+The+Left.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T08:28:30.167

这意味着如果你编写这样的[纯函数](http://en.wikipedia.org/wiki/Pure_function)，你总是从相同的输入中得到相同的输出，并且没有副作用，这使得你的程序更容易推理并确保它们是正确的。

例如函数：

```
def times2(x:Int) = x*2 
```

是纯净的，而

```
def add5ToList(xs: MutableList[Int]) {
    xs += 5
} 
```

是不纯的，因为它会在适当的位置编辑数据作为副作用。这是一个问题，因为同一个列表可能在程序的其他地方使用，现在我们不能保证行为，因为它已经改变了。

纯版本将使用不可变列表并返回一个新列表

```
def add5ToList(xs: List[Int]) = {
    5::xs
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T16:35:19.673

有很多关于收藏的例子，很容易找到，但可能会给人留下错误的印象。这个概念适用于语言的*所有级别*（但它不适用于 VM 级别）。一个例子是案例类。考虑以下两种选择：

```
// Java-style
class Person(initialName: String, initialAge: Int) {
    def this(initialName: String) = this(initialName, 0)
    private var name = initialName
    private var age = initialAge
    def getName = name
    def getAge = age
    def setName(newName: String) { name = newName }
    def setAge(newAge: Int) { age = newAge }
}

val employee = new Person("John")
employee.setAge(40) // we changed the object

// Scala-style
case class Person(name: String, age: Int) {
  def this(name: String) = this(name, 0)
}
val employee = new Person("John")
val employeeWithAge = employee.copy(age = 40) // employee still exists! 
```

这个概念适用于不可变集合本身的构造：a`List`永远不会改变。相反，`List`在必要时会创建新对象。持久数据结构的使用减少了在可变数据结构上发生的复制。

# ruby-on-rails - 命名约定：用户组与组 - 任务类型与类型

> ID：10777535
> 
> 赞同：2
> 
> 时间：2012-05-27T21:51:18.063
> 
> 标签：ruby-on-rails, ruby, model, naming-conventions

通常使用 word`Group`作为模型名称既好又简单，但我的应用程序变得越来越大，我正在考虑使用`UserGroup`. 这解决了我的问题，另一方面，将其设为 2 个单词会创建视觉上不令人满意的代码`@user.user_group`或`task.task_type`.

除此之外，使用这样的名称还有什么其他缺点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T22:12:01.780

我想我们都去过那里。我的 2 美分：

*   `UserGroup`. 在 Web 应用程序中，大多数情况下，*组*就是一组用户，因此您可以放心地删除`User`.

*   `TaskType`. `Type`这个名字太笼统了，所以我会妥协：调用类`TaskType`但`types`用作关联名称，这样你就可以写出可以说更好的`some_task.types`：

    ```
    class Task
      has_many :types, :class_name => :TaskType
      ...
    end 
    ```

# python - python中是否有“执行”语句？

> ID：10777539
> 
> 赞同：1
> 
> 时间：2012-05-27T21:52:05.863
> 
> 标签：python

python中是否有“执行”语句这样的东西，我可以像下面这样使用它？

```
statement='print "hello world"'

def loop(statement):
    for i in range(100):
        for j in range(100):
            execute statement

loop(statement) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-27T21:52:51.687

是的，只需传递一个*可调用对象*并使用`statement()`它来执行它。

可*调用*对象是函数、lambda 表达式或任何其他实现[`__call__`](http://docs.python.org/reference/datamodel.html#object.__call__).

```
def loop(func):
    for i in range(100):
        for j in range(100):
            func()

def say_hello():
    print "hello world"
loop(say_hello) 
```

如果您真的想从字符串执行代码（相信我，您不会！），有[`exec`](http://docs.python.org/reference/simple_stmts.html#exec)：

```
>>> code = 'print "hello bad code"'
>>> exec code
hello bad code 
```

# javascript - 使用 Javascript 的 CSS3 转换

> ID：10777540
> 
> 赞同：1
> 
> 时间：2012-05-27T21:52:13.903
> 
> 标签：javascript, jquery, css

我想使用带有 javascript 的关键帧来处理 css3 转换。这是一个我在任何地方都没有得到有利答案的问题。如果这个例子是

```
@-webkit-keyframes move{
    from{
        -webkit-transform:translate(0px,0px);
    }
    to{
        -webkit-transform:translate(0px,-100px);
    }
} 
```

如何使用 javascript 动态地给出这些翻译值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T22:47:22.177

*即使在 css 中*，您也无法显式分配未声明的动画，该场景稍微复杂一些；即在您的示例中，您声明了“移动”动画。

话虽如此，您可以在运行时生成样式表——生成以下 CSS 规则相当简单：

```
@-webkit-keyframes moveA{/*keyframes*/}
#smokeA {-webkit-animation: moveA 5s infinite; }
@-webkit-keyframes moveB{/*keyframes*/}
#smokeB {-webkit-animation: moveB 5s infinite; }
... 
```

然后可以像这样附加到文档中`head`：

```
$('head').append('<style type="text/css">/*css rules here*/</style>'); 
```

[概念证明](http://jsfiddle.net/ovfiddle/hxADc/1/)（在页面加载 5 秒后添加了相当可怕的样式）

**注意：**我注意到启用 GPU 加速后，我的 Chrome 上会触发 FPS 计数器。这让我推测，与 jQuery 动画相比，这实际上*可能是一种性能更好的方法。*

# 更新：

看到 Katti 的评论打算*每隔几秒钟更改一次样式值*- 我宁愿你不要。只生成固定的动画子集就可以很好地摆脱困境；imo[蝉原理](http://designfestival.com/the-cicada-principle-and-why-it-matters-to-web-designers/)在这种情况下非常适用——阅读文章时只考虑运动而不是图形模式。除非应用于大量的小粒子（这可能会杀死浏览器），否则真正随机的动画看起来并不真实——这意味着动画预渲染精灵将是可行的方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-27T21:59:10.233

我猜你需要使用 javascript 为一些元素设置动画.. 就像增加`height`| `width`..这应该是一个很好的起点..

[**教程**](http://javascript.info/tutorial/animation)

# javascript - 如何在 Javascript 中获取 iPad 屏幕宽度

> ID：10777547
> 
> 赞同：9
> 
> 时间：2012-05-27T21:54:09.170
> 
> 标签：javascript, ipad, screen-size

我需要使用 Javascript 从网页动态获取所有移动设备的屏幕大小。

我试过这个：

```
//get window's size
if (document.body && document.body.offsetWidth) {
 windowsWidth = document.body.offsetWidth;
 windowsHeight = document.body.offsetHeight;
}
if (document.compatMode=='CSS1Compat' &&
    document.documentElement &&
    document.documentElement.offsetWidth ) {
 windowsWidth = document.documentElement.offsetWidth;
 windowsHeight = document.documentElement.offsetHeight;
}
if (window.innerWidth && window.innerHeight) {
 windowsWidth = window.innerWidth;
 windowsHeight = window.innerHeight;
} 
```

但在 iPad 上，我得到了这个尺寸：980 x 1080（不是真正的 768 x 1024）。

谢谢

毛罗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T10:36:34.267

在 iPad 上获取屏幕尺寸需要读取屏幕对象的宽度和高度属性。

```
var height = screen.height;
var width = screen.width; 
```

这些将根据方向提供 768 和 1024。

# assembly - 在汇编中将十进制转换为十六进制

> ID：10777551
> 
> 赞同：0
> 
> 时间：2012-05-27T21:54:23.257
> 
> 标签：assembly, hex, type-conversion

有人可以向我解释汇编中的十进制到十六进制转换算法吗？我在变量中有一个十进制值，我应该将其打印为十六进制值。打印应该如下所示： 34AC6 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T21:58:26.347

假设这是一个家庭作业，这里有一些提示：

*   变量中的值*不是*十进制、十六进制或任何其他系统：它是您的硬件支持的任何系统（很可能是二进制）。
*   要将值转换为十六进制，您需要通过右移和掩码来分离 4 位块`0x0F`，并索引到十六进制数字数组。

# java - ListResourceBundle 和 MissingResourceException

> ID：10777554
> 
> 赞同：2
> 
> 时间：2012-05-27T21:54:38.183
> 
> 标签：java

我正在做一个涉及加载 ResourceBundle 的项目。更明确地说，我创建了一个扩展 ListResourceBundle 的类。该类称为 Resources.java。它编译得很好，一切正常，但是每次我尝试加载类时，MissingResourceException 都会不断弹出：

我所有的源文件都在包 chapter31 中。在字符串中使用或不使用“chapter31”进行此调用时，始终会导致 MissingResourceException。我的 IDE 是 Eclipse。这两天我一直在玩这个问题。我什至尝试更改 Eclipse 的版本。我已经走到尽头了。在 Eclipse 中我可以做些什么来确保 getBundle() 方法可以看到该类。我不知道它怎么会错过它。它在同一个包中！请指教。

阿利卡斯

```
package chapter31;

import java.applet.Applet;
import java.applet.AudioClip;
import java.util.ListResourceBundle;
import java.util.ResourceBundle;

import javax.swing.ImageIcon;

public class Resources extends ListResourceBundle {
    Object contents[][];

    public Resources() {
        AudioClip clip = Applet.newAudioClip(getClass().getResource("/E31_10/audio/us.mid"));
        ImageIcon image = new ImageIcon(getClass().getResource("/E31_10/image/us.gif"));
        contents = new Object[3][2];
        contents[0] = new Object[] {"clip", clip};
        contents[1] = new Object[] {"icon", image};
        contents[3] = new Object[] {"delay", new Integer(68000)};
    }

    protected Object[][] getContents() {
        return contents;
    }

    public static void main(String[] args) {
        ResourceBundle res = ResourceBundle.getBundle("chapter31.Resources");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T02:33:01.477

MissingResourceException 在这里具有误导性。您的问题可能是由其他两个问题引起的：

1.  找不到以下两行的资源：

    > AudioClip 剪辑 = Applet.newAudioClip(getClass().getResource("/E31_10/audio/us.mid")); ImageIcon image = new ImageIcon(getClass().getResource("/E31_10/image/us.gif"));

2.  如果第一个不是问题，那么还有第二个问题：

    你有一个错误的数组索引`contents[3]`，这会`ArrayIndexOutOfBoundsException`导致错误的 MissingResourceException 被抛出。如果您可以在异常堆栈跟踪中找到此异常，那么您的问题就在这里。将其更改为 contents[2] 将解决问题。

**注意：**您看到 MissingResourceException 的原因最终是由于上述问题导致类加载器无法创建 Resources 类的实例。如果您将**内容**数组初始化代码放在单独的方法而不是构造函数中，则在对象初始化阶段可能不会出现此异常。当然，稍后尝试调用 getObject 方法时会弹出其他异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T22:07:40.140

您是否尝试加载名为“chapter31.Resources”的消息属性文件？如果是这样，那么在 Eclipse 中，您可以尝试以下操作：

*   点击“调试配置...”
*   找到您用于执行资源的主要方法的启动器
*   单击类路径选项卡
*   单击“用户条目”，然后单击“高级”按钮
*   选择“添加外部文件夹”并选择文件夹“chapter31.Resources”。

ResourceBundle.getBundle() 方法正在您的 classpath 中查找文件。如果此文件不在您的类路径中，它将无法找到它。

上述步骤将“chapter31.Resources”文件夹添加到您的类路径中。

如果这仍然不起作用，您可以尝试将文件的完整路径传递给 ResourceBundle.getResource()。

# android - ACTION_UP 出现问题

> ID：10777555
> 
> 赞同：1
> 
> 时间：2012-05-27T21:54:45.660
> 
> 标签：android, events, touch, action, release

在我的 Fragment 类中，我使用 XML 布局来扩展我的片段。布局是一个简单的线性布局，其中包含一个 ImageView（轮子）。我想得到发生在我的 ImageView 上的触摸事件，这里是代码：

```
 public class WheelFragment extends Fragment {

   @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {

         // Inflate the layout for this fragment (Get the view from XML)
        View view = inflater.inflate(R.layout.wheel_layout, container, false);

        // Get the imageview of the wheel inside the view 
        ImageView wheelView = (ImageView) view.findViewById(R.id.wheel);

        // Set onTouchListener
        wheelView.setOnTouchListener(new OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {

            if (event.getAction() == MotionEvent.ACTION_DOWN) {
                    Log.d("down", "ACTION_DOWN");
                }

            if (event.getAction() == MotionEvent.ACTION_UP) {
                        Log.d("up", "ACTION_UP");
                }    
            }

            return true;      
        }
        });

        // Return the view
        return view;
    }   
} 
```

获取 ACTION_DOWN 事件没有问题，但无法获取 ACTION_UP 事件。

我尝试添加一个没有帮助的 ACTION_CANCEL 事件（我在论坛上看到它可能会解决问题）。

我也尝试过返回 true/false 值。

有什么简单的方法可以让 ACTION_UP 事件正常工作吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T10:09:13.127

好吧，我最终找到了我的解决方案。

首先我的代码非常混乱，因为我的 OnTouch 在 OnCreateView 中，然后我需要在我的类中添加“impements OnTouchListener”。

这是有效的代码：

```
 public class WheelFragment extends Fragment implements OnTouchListener {

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                                 Bundle savedInstanceState) {

             // Inflate the layout for this fragment (Get the view from XML)
            View view = inflater.inflate(R.layout.wheel_layout, container, false);

            // Get the imageview of the wheel inside the view 
            ImageView wheelView = (ImageView) view.findViewById(R.id.wheel);

            // Set onTouchListener
            wheelView.setOnTouchListener(this);
            return view;
        }

    public boolean onTouch(View v, MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            Log.d("down", "ACTION_DOWN");
        }
        if (event.getAction() == MotionEvent.ACTION_UP) {
            Log.d("up", "ACTION_UP");
        }
        return true;
    }

} 
```

（确实，如果我们在 OnTouch 中返回 false 则不起作用，但我不需要任何 ACTION_CANCEL 即可使其工作）

# android - 在 Android 上使用 Groovy

> ID：10777560
> 
> 赞同：13
> 
> 时间：2012-05-27T21:55:12.633
> 
> 标签：android, groovy, java-bytecode-asm, cglib, dex

随着[ASMDEX](http://asm.ow2.org/asmdex-index.html)（用于 dex 文件的[ASM ）和](http://asm.ow2.org/index.html)[dexmaker](https://code.google.com/p/dexmaker/)的出现，难道不能将 Groovy 移植到 Android 上吗？两个框架都允许在运行时生成 dex 字节码。

据我了解，不可能从内存中的 APK 修改 dex 类。但是是否可以将这些类复制到可写内存，在运行时修改这些副本并使用它们？

还有什么需要移植来处理 dex 类文件？[CGLIB](http://cglib.sourceforge.net/) ?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T09:50:39.547

最初的移植项目名为[discobot](http://code.google.com/p/discobot/)，然后[一些人创建了一个名为](http://thediscobot.blogspot.fr/)[discobot2](http://www.jworks.nl/category/discobot-2/)的新项目Afaik 第一个项目没有类的运行时转换，但能够在 Android 上运行第一个 Groovy 程序，启动时间非常慢。至于第二个项目，我知道的最后一个状态是他们解决了大多数问题，现在正在运行时翻译类。但我从未尝试过。

更新：从 Groovy 2.4 开始，[第三个版本](http://melix.github.io/blog/2014/06/grooid.html)可以在 Android 上运行 Groovy

# java - 为什么玩家 2 的移动方法在没有玩家 1 的代码的情况下无法工作？

> ID：10777565
> 
> 赞同：0
> 
> 时间：2012-05-27T21:56:14.723
> 
> 标签：java, move, keylistener

//我正在尝试对播放器 2 的代码进行一些编辑，所以我删除了所有涉及播放器 1 的内容。但由于某种原因，播放器 2 在没有播放器 1 的代码的情况下根本不会做任何事情。（它应该使用移动键 i、j、k 和 l。）所以我的问题是“我怎样才能让玩家 2 的移动方法在没有玩家 1 的代码的情况下工作？” 这也是我能提供的最好的 SSCCE。我删除了任何不涉及创建 JFrame 和播放器 2 的代码。我还保留了负责播放器 2 移动的代码。

```
import javax.swing.*;
import javax.swing.event.*;
import java.awt.*;
import java.awt.event.*;

public class Collision extends JFrame { 
```

//J帧

```
 final int WIDTH = 900, HEIGHT = 650;
    double p1Speed = .5, p2Speed = .5;
    final int UP = 0, RIGHT = 1, DOWN = 2, LEFT = 3;
    int p1Direction = UP;
    int p2Direction = UP; 
```

//创建玩家2的代码

```
Rectangle p2 = new Rectangle(((WIDTH / 9) + ((int) ((WIDTH / 9) * 1.5) / 2)), (HEIGHT / 2)    
+ (HEIGHT / 10), WIDTH / 30, WIDTH / 30);

    public Collision() {

        super("Radical Racing");
        setSize(WIDTH, HEIGHT);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setVisible(true);

      Move2 m2 = new Move2();
      m2.start();

    }

    public void paint(Graphics g) {
        super.paint(g);

        g.setColor(Color.DARK_GRAY);
        g.fillRect(0, 0, WIDTH, HEIGHT);
        g.setColor(Color.GREEN);
        g.setColor(Color.red);
        g.fill3DRect(p2.x, p2.y, p2.width, p2.height, true);

    } 
```

//这是p2 move方法。我以为我的错误会在这里，但我完全从书中复制了这个。

```
private class Move2 extends Thread implements KeyListener {

        public void run() {

            addKeyListener(this);

            while (true) {

                try {

                    repaint();

                    //increase speed a bit
                    if (p2Speed <= 5) {
                        p2Speed = .2;
                    } 
```

//这些将根据方向移动玩家

```
 if (p2Direction == UP) {
                        p2.y -= (int) p2Speed;
                    }
                    if (p2Direction == DOWN) {
                        p2.y += (int) p2Speed;
                    }
                    if (p2Direction == LEFT) {
                        p2.x -= (int) p2Speed;
                    }
                    if (p2Direction == RIGHT) {
                        p2.x += (int) p2Speed;
                    }

                    Thread.sleep(75);
                } catch (Exception e) {

                }

            }
        }

        //you must also implement this method from key listener
        public void keyPressed(KeyEvent event) {
        }

        public void keyReleased(KeyEvent event) {
        }

        public void keyTyped(KeyEvent event) {
            if (event.getKeyChar() == 'j') {
                p2Direction = LEFT;
            }
            if (event.getKeyChar() == 'k') {
                p2Direction = DOWN;
            }
            if (event.getKeyChar() == 'l') {
                p2Direction = RIGHT;
            }
            if (event.getKeyChar() == 'i') {
                p2Direction = UP;
            }
        }
    }

    //This starts the program by calling the constructor:
    public static void main(String[] args) {
        new Collision();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T22:03:41.100

我自己还不太擅长java，但是；

```
 if (p2Direction == UP) {
                    p2.y -= (int) p1Speed;
    }
    if (p2Direction == DOWN) {
                    p2.y += (int) p1Speed;
                }
                if (p2Direction == LEFT) {
                    p2.x -= (int) p1Speed;
                }
                if (p2Direction == RIGHT) {
                    p2.x += (int) p1Speed;
                } 
```

那不应该

```
 if (p2Direction == UP) {
                    p2.y -= (int) p2Speed;
    }
    if (p2Direction == DOWN) {
                    p2.y += (int) p2Speed;
                }
                if (p2Direction == LEFT) {
                    p2.x -= (int) p2Speed;
                }
                if (p2Direction == RIGHT) {
                    p2.x += (int) p2Speed;
                } 
```

对不起，如果我错了：p

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T02:33:44.373

//Joris，这是完整的代码。没有SSCCE。就是书外的。此代码包含与本书匹配的编辑，但如果您将其更改为与我之前更正的错误相匹配，您会注意到 p2 会移动，但是当 p1 与墙壁碰撞时，p2 会碰撞并且 p2 会直接穿过墙壁。

```
import javax.swing.*;
import javax.swing.event.*;
import java.awt.*;
import java.awt.event.*;

public class Collision extends JFrame {

final int WIDTH = 900, HEIGHT = 650;
double p1Speed = .5, p2Speed = .5; 
```

//这些是表示方向的整数

```
final int UP = 0, RIGHT = 1, DOWN = 2, LEFT = 3; 
```

//这些将跟踪玩家的方向（默认=向上）

```
int p1Direction = UP;
int p2Direction = UP;
Rectangle left = new Rectangle(0, 0, WIDTH / 9, HEIGHT);
Rectangle right = new Rectangle((WIDTH / 9) * 8, 0, WIDTH / 9, HEIGHT);
Rectangle top = new Rectangle(0, 0, WIDTH, HEIGHT / 9);
Rectangle bottom = new Rectangle(0, (HEIGHT / 9) * 8, WIDTH, HEIGHT / 9);
Rectangle center = new Rectangle((int) ((WIDTH / 9) * 2.5), (int) ((HEIGHT / 9) * 2.5), 
(int) ((WIDTH / 9) * 5), (HEIGHT / 9) * 4);
Rectangle obstacle = new Rectangle(WIDTH / 2, (int) ((HEIGHT / 9) * 7), WIDTH / 10, HEIGHT 
/ 9);
Rectangle obstacle2 = new Rectangle(WIDTH / 3, (int) ((HEIGHT / 9) * 5), WIDTH / 10, 
HEIGHT / 4);
Rectangle obstacle3 = new Rectangle(2 * (WIDTH / 3), (int) ((HEIGHT / 9) * 5), WIDTH / 10, 
HEIGHT / 4);
Rectangle obstacle4 = new Rectangle(WIDTH / 3, HEIGHT / 9, WIDTH / 30, HEIGHT / 9);
Rectangle obstacle5 = new Rectangle(WIDTH / 2, (int) ((HEIGHT / 9) * 1.5), WIDTH / 30, 
HEIGHT / 4);
Rectangle finish = new Rectangle(WIDTH / 9, (HEIGHT / 2) - HEIGHT / 9, (int) ((WIDTH / 9) 
* 1.5), HEIGHT / 70);
Rectangle p1 = new Rectangle(WIDTH / 9, HEIGHT / 2, WIDTH / 30, WIDTH / 30);
Rectangle p2 = new Rectangle(((WIDTH / 9) + ((int) ((WIDTH / 9) * 1.5) / 2)), (HEIGHT / 2) 
+ (HEIGHT / 10), WIDTH / 30, WIDTH / 30);

public Collision() { 
```

//以下代码创建JFrame

```
 super("Radical Racing");
    setSize(WIDTH, HEIGHT);
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    setVisible(true); 
```

//启动内部类（它自己工作，因为它是一个线程）

```
 Move1 m1 = new Move1();
    Move2 m2 = new Move2();
    m1.start();
    m2.start();

}

public void paint(Graphics g) {
    super.paint(g); 
```

//绘制赛道的背景

```
 g.setColor(Color.DARK_GRAY);
    g.fillRect(0, 0, WIDTH, HEIGHT); 
```

//当我们绘制边框将是绿色的

```
 g.setColor(Color.GREEN); 
```

//下面的矩形是外层玩家的起始线

```
 Rectangle lineO = new Rectangle(WIDTH / 9, HEIGHT / 2, (int) ((WIDTH / 9) * 1.5) / 2, 
    HEIGHT / 140); 
```

//下面的rctangle是inner player的起始行

```
 Rectangle lineI = new Rectangle(((WIDTH / 9) + ((int) ((WIDTH / 9) * 1.5) / 2)), 
    (HEIGHT / 2) + (HEIGHT / 10), (int) ((WIDTH / 9) * 1.5) / 2, HEIGHT / 140); 
```

//现在使用矩形，绘制它

```
 g.fillRect(left.x, left.y, left.width, left.height);
    g.fillRect(right.x, right.y, right.width, right.height);
    g.fillRect(top.x, top.y, top.width, top.height);
    g.fillRect(bottom.x, bottom.y, bottom.width, bottom.height);
    g.fillRect(center.x, center.y, center.width, center.height);
    g.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
    g.fillRect(obstacle2.x, obstacle2.y, obstacle2.width, obstacle2.height);
    g.fillRect(obstacle3.x, obstacle3.y, obstacle3.width, obstacle3.height);
    g.fillRect(obstacle4.x, obstacle4.y, obstacle4.width, obstacle4.height);
    g.fillRect(obstacle5.x, obstacle5.y, obstacle5.width, obstacle5.height); 
```

//设置起始线颜色

```
 g.setColor(Color.WHITE); 
```

//绘制起始线

```
 g.fillRect(lineO.x, lineO.y, lineO.width, lineO.height);
    g.fillRect(lineI.x, lineI.y, lineI.width, lineI.height); 
```

//设置终点线的颜色为黄色

```
 g.setColor(Color.YELLOW);
    g.fillRect(finish.x, finish.y, finish.width, finish.height); 
```

//设置p1的颜色为蓝色

```
 g.setColor(Color.BLUE); 
```

//现在画出真正的玩家

```
 g.fill3DRect(p1.x, p1.y, p1.width, p1.height, true); 
```

//设置p2的颜色为红色

```
 g.setColor(Color.red); 
```

//现在画出真正的玩家

```
 g.fill3DRect(p2.x, p2.y, p2.width, p2.height, true);

}

private class Move1 extends Thread implements KeyListener {

    public void run() { 
```

//添加代码以使 KeyListener “唤醒”

```
 addKeyListener(this); 
```

//现在，把代码都放在一个无限循环中，所以这个过程会重复。

```
 while (true) { 
```

//现在这应该在“try”块中。如果出现错误，这将使程序退出。

```
 try { 
```

//首先刷新屏幕：

```
 repaint(); 
```

//检查汽车是否撞到墙外。//如果是这样，通过将它的速度设置为 0.4 来减慢它的速度。

```
 if (p1.intersects(left) || p1.intersects(right)
                        || p1.intersects(top) || p1.intersects(bottom)
                        || p1.intersects(obstacle) || p1.intersects(obstacle2)
                        || p1.intersects(p2) || p1.intersects(obstacle3)
                        || p1.intersects(obstacle4) || p1.intersects(obstacle5)) {
                    p1Speed = -4;
                } 
```

//如果汽车撞到中心，执行与上述相同的操作，但速度为-2.5。

```
 if (p1.intersects(center)) {
                    p1Speed = -2.5;
                } 
```

//稍微提高速度

```
 if (p1Speed <= 5) {
                    p1Speed += .2;
                } 
```

//这些将根据方向移动玩家

```
 if (p1Direction == UP) {
                    p1.y -= (int) p1Speed;
                }
                if (p1Direction == DOWN) {
                    p1.y += (int) p1Speed;
                }
                if (p1Direction == LEFT) {
                    p1.x -= (int) p1Speed;
                }
                if (p1Direction == RIGHT) {
                    p1.x += (int) p1Speed;
                } 
```

//这会延迟刷新率

```
 Thread.sleep(75);
            } catch (Exception e) { 
```

//如果有异常（错误），退出循环

```
 break;
            }
        }
    } 
```

//您还必须从 Key Listener 中实现此方法

```
 public void keyPressed(KeyEvent event) {
    } 
```

//你还必须从key listener实现这个方法

```
 public void keyReleased(KeyEvent event) {
    } 
```

//你还必须从key listener实现这个方法

```
 public void keyTyped(KeyEvent event) {

        if (event.getKeyChar() == 'a') {
            p1Direction = LEFT;
        }
        if (event.getKeyChar() == 's') {
            p1Direction = DOWN;
        }
        if (event.getKeyChar() == 'd') {
            p1Direction = RIGHT;
        }
        if (event.getKeyChar() == 'w') {
            p1Direction = UP;
        }
    }
}

private class Move2 extends Thread implements KeyListener {

    public void run() { 
```

//添加代码让按键监听器唤醒

```
 addKeyListener(this); 
```

//现在这应该都在一个无限循环中，以便该过程重复

```
 while (true) { 
```

//现在将代码放入try块中。如果出现错误，这将使程序退出

```
 try { 
```

//首先刷新屏幕

```
 repaint(); 
```

//检查汽车是否撞到外墙。//如果是这样，通过将速度设置为-4来降低速度。

```
 if (p2.intersects(left) || p2.intersects(right)
                        || p2.intersects(top) || p2.intersects(bottom)
                        || p2.intersects(obstacle) || p2.intersects(obstacle2)) {
                    p2Speed = -4;
                } 
```

//如果汽车撞到中心，执行与上述相同的操作，但速度为-2.5。

```
 if (p2.intersects(center)) {
                    p2Speed = -2.5;
                } 
```

//稍微提高速度

```
 if (p2Speed <= 5) {
                    p2Speed = .2;
                } 
```

//这些将根据方向移动玩家

```
 if (p2Direction == UP) {
                    p2.y-= (int) p2Speed;
                }
                if (p2Direction == DOWN) {
                    p2.y+= (int) p2Speed;
                }
                if (p2Direction == LEFT) {
                    p2.x-= (int) p2Speed;
                }
                if (p2Direction == RIGHT) {
                    p2.x+= (int) p2Speed;
                } 
```

//这会延迟刷新率：

```
 Thread.sleep(75);
            } catch (Exception e) { 
```

//如果有异常，退出循环。

```
 break;

            }

        }
    } 
```

//您还必须从键侦听器中实现此方法

```
 public void keyPressed(KeyEvent event) {
    }

    public void keyReleased(KeyEvent event) {
    }

    public void keyTyped(KeyEvent event) {
        if (event.getKeyChar() == 'j') {
            p2Direction = LEFT;
        }
        if (event.getKeyChar() == 'k') {
            p2Direction = DOWN;
        }
        if (event.getKeyChar() == 'l') {
            p2Direction = RIGHT;
        }
        if (event.getKeyChar() == 'i') {
            p2Direction = UP;
        }
    }
} 
```

//这通过调用构造函数来启动程序：

```
public static void main(String[] args) {
    new Collision();
} 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T15:21:27.857

让我的一个朋友来看看它并为你修好

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Rectangle;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

import javax.swing.JFrame;

public class RadicalRacing extends JFrame {
private static final long serialVersionUID = 1L;

// Environment size
final int WIDTH = 900, HEIGHT = 650;
// Player speed
double p1Speed = .5, p2Speed = .5;
// Integer values that represent directions
final int UP = 0, RIGHT = 1, DOWN = 2, LEFT = 3;
// These keep track of the players directions(default = up)
int p1Direction = UP;
int p2Direction = UP;

// Environment objects
Rectangle left = new Rectangle(0, 0, WIDTH / 9, HEIGHT);
Rectangle right = new Rectangle((WIDTH / 9) * 8, 0, WIDTH / 9, HEIGHT);
Rectangle top = new Rectangle(0, 0, WIDTH, HEIGHT / 9);
Rectangle bottom = new Rectangle(0, (HEIGHT / 9) * 8, WIDTH, HEIGHT / 9);
Rectangle center = new Rectangle((int) ((WIDTH / 9) * 2.5),
(int) ((HEIGHT / 9) * 2.5), (int) ((WIDTH / 9) * 5),
(HEIGHT / 9) * 4);
Rectangle obstacle = new Rectangle(WIDTH / 2, (int) ((HEIGHT / 9) * 7),
WIDTH / 10, HEIGHT / 9);
Rectangle obstacle2 = new Rectangle(WIDTH / 3, (int) ((HEIGHT / 9) * 5),
WIDTH / 10, HEIGHT / 4);
Rectangle obstacle3 = new Rectangle(2 * (WIDTH / 3),
(int) ((HEIGHT / 9) * 5), WIDTH / 10, HEIGHT / 4);
Rectangle obstacle4 = new Rectangle(WIDTH / 3, HEIGHT / 9, WIDTH / 30,
HEIGHT / 9);
Rectangle obstacle5 = new Rectangle(WIDTH / 2, (int) ((HEIGHT / 9) * 1.5),
WIDTH / 30, HEIGHT / 4);
Rectangle finish = new Rectangle(WIDTH / 9, (HEIGHT / 2) - HEIGHT / 9,
(int) ((WIDTH / 9) * 1.5), HEIGHT / 70);
Rectangle p1 = new Rectangle(WIDTH / 9, HEIGHT / 2, WIDTH / 30, WIDTH / 30);
Rectangle p2 = new Rectangle(
((WIDTH / 9) + ((int) ((WIDTH / 9) * 1.5) / 2)), (HEIGHT / 2)
+ (HEIGHT / 10), WIDTH / 30, WIDTH / 30);

// Start the program by calling the non-static constructor.
public static void main(String[] args) { new RadicalRacing(); }

// Constructor. 
public RadicalRacing() {
super("Radical Racing"); // title of the window
setSize(WIDTH, HEIGHT);
setDefaultCloseOperation(EXIT_ON_CLOSE);
setVisible(true);

// A thread is nessicary to run the environment graphics and controls
// at the same time. The graphics will run on the main thread and
// the controls will be operated on a second thread.
Movement m = new Movement();
m.start();

try { 
while(true) {
// Delay the refresh rate of the graphics.
Thread.sleep(50);
// Update the environment graphics with new positioning, etc
repaint(); 
}
} catch(Exception e) { }
}

@Override
public void paint(Graphics g) {
// The racetrack itself is the background of the interface.
g.setColor(Color.DARK_GRAY);
g.fillRect(0, 0, WIDTH, HEIGHT);

// Draw the environment outside of the race track
g.setColor(Color.BLACK);
g.fillRect(left.x, left.y, left.width, left.height);
g.fillRect(right.x, right.y, right.width, right.height);
g.fillRect(top.x, top.y, top.width, top.height);
g.fillRect(bottom.x, bottom.y, bottom.width, bottom.height);
g.fillRect(center.x, center.y, center.width, center.height);
g.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
g.fillRect(obstacle2.x, obstacle2.y, obstacle2.width, obstacle2.height);
g.fillRect(obstacle3.x, obstacle3.y, obstacle3.width, obstacle3.height);
g.fillRect(obstacle4.x, obstacle4.y, obstacle4.width, obstacle4.height);
g.fillRect(obstacle5.x, obstacle5.y, obstacle5.width, obstacle5.height);

// Draw the starting lines.
g.setColor(Color.WHITE);
// ..outer player starting line..
Rectangle lineO = new Rectangle(WIDTH / 9, HEIGHT / 2, (int) ((WIDTH / 9) * 1.5) / 2, HEIGHT / 140);
// ..inner player starting line..
Rectangle lineI = new Rectangle(
((WIDTH / 9) + ((int) ((WIDTH / 9) * 1.5) / 2)), (HEIGHT / 2)
+ (HEIGHT / 10), (int) ((WIDTH / 9) * 1.5) / 2,
HEIGHT / 140);
g.fillRect(lineO.x, lineO.y, lineO.width, lineO.height);
g.fillRect(lineI.x, lineI.y, lineI.width, lineI.height);

// Draw the finish line.
g.setColor(Color.YELLOW);
g.fillRect(finish.x, finish.y, finish.width, finish.height);

// Draw player #1
g.setColor(Color.BLUE);
g.fillRect(p1.x, p1.y, p1.width, p1.height);

// Draw player #2
g.setColor(Color.red);
g.fillRect(p2.x, p2.y, p2.width, p2.height);
}

private class Movement extends Thread implements KeyListener {

public void run() {

// Activate keyboard controls
addKeyListener(this);

try {

while(true) {
    // Delay the rate at which these variables are calculated.
    // Higher the number, the slower the race will feel.
    // Lower the number, the faster.
    // Too low and the game will be glitchy.
    Thread.sleep(75);

    // Check to see if the car hits the outside of the walls.
    // If so, slow it's speed temporarily.
    if(    p1.intersects(left)
    ||  p1.intersects(right)
    ||  p1.intersects(top)
    ||  p1.intersects(bottom)
    ||  p1.intersects(obstacle)
    ||    p1.intersects(obstacle2)
    ||  p1.intersects(p2)
    ||  p1.intersects(obstacle3)
    ||  p1.intersects(obstacle4)
    ||  p1.intersects(obstacle5))
    { p1Speed = -4; }

    if(    p2.intersects(left)
    ||  p2.intersects(right)
    ||  p2.intersects(top)
    ||  p2.intersects(bottom)
    ||  p2.intersects(obstacle)
    ||    p2.intersects(obstacle2)
    ||  p2.intersects(p1)
    ||  p2.intersects(obstacle3)
    ||  p2.intersects(obstacle4)
    ||  p2.intersects(obstacle5))
    { p2Speed = -4; }

    // If the car hits the center, slow it's speed just a little bit.
    if(p1.intersects(center)) p1Speed = -2.5;
    if(p2.intersects(center)) p2Speed = -2.5;

    // Now increase speed some.
    if(p1Speed <= 5) p1Speed += .2;
    if(p2Speed <= 5) p2Speed += .2;

    // Now move the player in the direction they're facing.
    if(p1Direction == UP)  p1.y -= (int)p1Speed;
    if(p1Direction == DOWN)  p1.y += (int)p1Speed;
    if(p1Direction == LEFT)  p1.x -= (int)p1Speed;
    if(p1Direction == RIGHT)  p1.x += (int)p1Speed;

    if(p2Direction == UP)  p2.y -= (int)p2Speed;
    if(p2Direction == DOWN)  p2.y += (int)p2Speed;
    if(p2Direction == LEFT)  p2.x -= (int)p2Speed;
    if(p2Direction == RIGHT)  p2.x += (int)p2Speed;
}

} catch (Exception e) { e.printStackTrace(); }
}

// Unused methods required for implementation.
public void keyPressed(KeyEvent event)  { }
public void keyReleased(KeyEvent event) { }

public void keyTyped(KeyEvent event) {
char c = event.getKeyChar();
if(c == 'a') p1Direction = LEFT;
if(c == 's') p1Direction = DOWN;
if(c == 'd') p1Direction = RIGHT;
if(c == 'w') p1Direction = UP;

if(c == 'j') p2Direction = LEFT;
        if(c == 'k') p2Direction = DOWN;
        if(c == 'l') p2Direction = RIGHT;
        if(c == 'i') p2Direction = UP;
 }
 }

 } 
```

间距可能是关闭的，但这并不重要xD

# c - htole32() glibc 函数混淆

> ID：10777566
> 
> 赞同：0
> 
> 时间：2012-05-27T21:56:18.330
> 
> 标签：c

我想创建相当于：

```
 char* val = "\x11\x11\x11\x11"; 
```

使用 htole32() 函数。既然“\x11”是一个不可打印的字符，我该怎么做呢？

**编辑**

我将把 int 转换为 char* 并且我不想收到分段违规，如果我使用，我会得到：

```
 int val = 0x11111111; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T22:02:43.190

最终目标对我来说并不完全清楚，但您可以指定一个十六进制格式的整数：

```
uint32_t val = 0x11111111; 
```

正如评论中所指出的，十六进制表示可以使用（或）作为格式说明符`printf`的函数族打印出来。从我可以从 OP 收集到的信息来看，这可能是您正在寻找的内容，但我并不完全确定。 `%x``%X`

编辑以响应 OP 编辑​​：转换为`char*`. 如果您的意思是要将地址`val`转换为 char*（例如，`char *ptr = (char*)&val;`），那么这应该可以正常工作并允许您访问各个字节。

# iphone - NSXMLParser 问题：不获取所有数据？

> ID：10777568
> 
> 赞同：1
> 
> 时间：2012-05-27T21:56:29.640
> 
> 标签：iphone, ios, parsing, nsxmlparser, nsxml

我正在开发一个需要从 XML 文件中获取数据的应用程序。一些节点有很多字符，我在使用这个函数时遇到了问题：

```
- (void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    currentNodeContent = (NSMutableString *) [string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
} 
```

例如，对于一个项目的描述节点，我只会得到 20-30 个最后的字符，而我会得到 200 或 300 个。

我用 NSLog 检查了这一点，看来问题来自这里。你知道出了什么问题吗？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T22:02:02.230

SAX 解析器不保证一次获取所有字符。您可能会收到来自任何给定块的字符块的多次调用；您的代码应该将它们连接成一个字符串。

> 解析器对象可以向委托发送几个 parser:foundCharacters: 消息来报告元素的字符。因为字符串可能只是当前元素的全部字符内容的一部分，所以您应该将它附加到当前的字符累积中，直到元素发生变化。

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict {
    if ([qualifiedName isEqualToString:@"myTag"]) {
        buf = [NSMutableString string];
    }
}
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {
    if ([qualifiedName isEqualToString:@"myTag"]) {
        buf = [buf stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
        NSLog(@"Got %@", buf);
    }
}

- (void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    [buf appendString:string];
} 
```

# entity-framework - 使用 Context.Database.SqlQuery 执行存储过程 和复杂类型映射

> ID：10777570
> 
> 赞同：4
> 
> 时间：2012-05-27T21:56:55.710
> 
> 标签：entity-framework, stored-procedures, mapping, ef-code-first, complextype

我有一个名为 Product 的类，其结构如下：

```
 public class Product
  {
    public long Id { get; set; }

    public string Title { get; set; }

    public string Summary { get; set; }

    public string Description { get; set; }

    public long ProductCategoryId { get; set; }

    public virtual ProductCategory ProductCategory { get; set; }

    public ConstantPost ConstantPost { get; set; }

  } 
```

有一个复杂的类型叫做 ConstantPost。当我想执行一个名为 MostBought 的存储过程时，我收到此错误：
**无法为“Domain.ConstantPost”类型的属性“ConstantPost”创建值。仅支持原始类型的属性。**

执行存储过程时如何忽略复杂类型。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T09:50:05.790

目前不支持此功能。您不能从 中返回包含复杂类型的实体`SqlQuery`。

# php - 如何打开一个链接到包含来自 mysql 的数据的 div？

> ID：10777573
> 
> 赞同：0
> 
> 时间：2012-05-27T21:57:19.313
> 
> 标签：php, mysql

我正在构建一个网站，该网站有一个页面，其中显示了我在数据库中拥有的一些产品。产品由彼此相邻的小 div 显示。我在每个 div 里面放了一个链接，我想知道每个产品的信息。这些信息都将具有相同的结构。我想过有一个

```
<a href="'.$row[id].".php".'"> 
```

并为每个产品创建一个 id.php 文件。但这似乎没有任何意义。

这是我的一些代码

```
<?php
mysql_select_db("myshop",$con);
$result = mysql_query('SELECT * FROM products',$con);
while($row = mysql_fetch_array($result))
{
    $myimage = '<img src="'.$row['image'].'" />';

    echo  "<div id='appear'>" . $myimage . '<br />' . $row['title'] . 
"<br  />" . "<p style='color:red;' >" . "value " . $row['price'] . "€" . 
"</p>".  <a   href="'.$row[id].".php".'">. "details" . "<a>". 
</div>";                                       
}
mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T22:01:18.183

创建一个 image.php...

```
<?php

mysql_select_db("myshop",$con);
id = (int)$_GET['id'];

$result = mysql_query("SELECT * FROM products WHERE id=$id",$con);
print_r($result)

?> 
```

而不是这个：

```
<a href="'.$row[id].".php".'"> 
```

做这个：

```
<a href="image.php?id='.$row[id].'"> 
```

# javascript - Javascript多次搜索新位置变量

> ID：10777579
> 
> 赞同：0
> 
> 时间：2012-05-27T21:57:54.690
> 
> 标签：javascript, arrays, position, match

我有以下文字：

```
var text= 
    "The sad sad man uses a bat to swing the bats 
    away from his sad garden .
    Sadly he doesn't succeed. " 
```

假设我想搜索这个词`"sad"`。

```
var match;
re = /sad/g,
    match;
while (match = re.exec(text)) {
    console.log(match); 
match.poz = ....
} 
```

我怎样才能成为一个从 0,0 开始`match.poz`的元组（数组） ？`[line,position on the collumn]`

例如。

*   1 场比赛 --> match.poz = [0,4]
*   2 匹配 --> match.poz = [0,8]
*   3 场比赛 --> match.poz = [1,14]
*   4 匹配 --> match.poz = [2,0]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T23:01:52.340

我能够构建一个简单的解析器，而不是使用正则表达式，我认为它不可能（没有很多帮助）在 Javascript 中获得位置。所有这一切都是通过线，一次一个字符，然后“窥视”前方以查看当前位置是否给出`sad`或`\n`。

```
var text = "The sad sad man uses a bat to swing the bats \naway from his sad garden .\nSadly he doesn't succeed.",
    length = text.length,
    matches = [],
    lines = 0,
    pos = 0;

for (var i = 0; i < length; i++){
    var word = text.substring(i, i + 3).toLowerCase();

    if (word == 'sad') {
        matches[matches.length] = [lines, pos];
    }

    if (word.indexOf('\n') == 0) {
        lines++;
        pos = 0;
    } else {
        pos++;
    }
}

console.log(matches); 
```

这在 Firebug 控制台中为我提供了以下信息：

```
[[0, 4], [0, 8], [1, 14], [2, 0]] 
```

[http://jsfiddle.net/Zx5CK/1/](http://jsfiddle.net/Zx5CK/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T22:17:05.607

首先，我认为您需要能够以某种方式划界。可能在输入数据中使用了一些字符（例如 '\n'）。那么解决问题的一种方法是使用 split 函数将每行中的单词作为数组获取。然后，您可以编写一个函数，该函数接收一行和所需的单词，并将每个单词与您正在搜索的内容进行比较。

```
 //where i denotes the currently read line.
 var indexInLine = checkforWordInLine(input.line[i].split(' '), "sad");
 if(indexInLine != -1) 
 //word found in line. 
 // save indexInLine and 'i', the line index      

 function checkforWordInLine(line, searchKey)
 {
    var wordIndex = -1;
   for(var i=0,j=line.length; i < j; i++)
   {
      if(line[i] === searchKey)
      wordIndex = i;
   }
   return wordIndex;
 } 
```

# iphone - Box2D：边缘形状和链形状使用不同的顶点坐标

> ID：10777587
> 
> 赞同：1
> 
> 时间：2012-05-27T21:58:40.630
> 
> 标签：iphone, box2d

我正在创建一个具有许多顶点的实体，以与场景中的另一个实体发生碰撞。这是用 完成的`b2ChainShape`，但我首先尝试创建该链的单个边缘（`v2v`是坐标转换方法）：

```
b2Vec2 v1 = [U v2v:CGPointMake(0, 150)];
b2Vec2 v2 = [U v2v:CGPointMake(50, 150)];

b2EdgeShape shape;
shape.Set(v1, v2); 
```

这按预期工作：其他物体与该边缘碰撞。奇怪的是，当链形状使用相同的顶点时，没有碰撞：

```
b2Vec2 vertices[2];
vertices[0] = [U v2v:CGPointMake(0, 150)];
vertices[1] = [U v2v:CGPointMake(50, 150)];

b2ChainShape shape;
shape.CreateChain(vertices, 2); 
```

知道为什么吗？链是否使用一些不同的坐标系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:56:28.103

请阅读我从 Box2d 手册中摘录的以下段落。 [http://www.box2d.org/manual.pdf](http://www.box2d.org/manual.pdf)

> 边缘形状是线段。提供这些是为了帮助为您的游戏制作一个自由形式的静态环境。边缘形状的一个主要限制是它们可以与圆形和多边形碰撞，但不能与自身碰撞。Box2D 使用的碰撞算法要求两个碰撞形状中的至少一个具有体积。边缘形状没有体积，因此边缘边缘碰撞是不可能的。

# php - $var 和 ${var} 之间有什么区别吗

> ID：10777589
> 
> 赞同：1
> 
> 时间：2012-05-27T21:58:52.760
> 
> 标签：php

这两个“拼写”是否等效？就是想。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T22:00:19.930

`${var}`断章取义可能是正确的，也可能不是。如果它在字符串内部使用`"foo ${var} bar"`- 那么它是相同的。

如果在代码中正确使用 - 则不`${var}`正确，`${'var'}`应改为使用。

使用的有效案例`${...}`是：

1.  在字符串内部的情况下`"ab${cd}e"`- 当所有字母都没有空格时`"${a['b']}"`- 当你将它与数组一起使用时

2.  当您想动态组合变量名时：`${'a_' . $i}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T22:14:40.580

差不多。唯一的区别是您可以在花括号之间输入要解析的代码以获得“变量”变量名称。

前任。

```
${'t'.'e'.'s'.'t'} = 'test'; // is the same as $test = 'test';  
${substr('testaaa',0,4)} = 'test'; // the same 
```

您甚至可以执行以下操作：

```
${ 'a' == 'b' ? 'Foo' : 'test' } = 'test'; //the same 
```

它与以下内容基本相同：

```
$var_name = substr('testaaa',0,4);
$$var_name = 'test'; 
```

# lua - 在 Lua 5.1 中使用 loadstring 在循环中定义函数

> ID：10777594
> 
> 赞同：0
> 
> 时间：2012-05-27T22:00:27.200
> 
> 标签：lua

我目前正在尝试使用串联、加载字符串和 for 循环的组合来定义一个函数。

这是我目前拥有的那种东西：

```
> for f=1,8 do
loadstring("function f" .. f .. " () print('" .. f .. "') end")
end
> f1()
stdin:1: attempt to call global 'f1' (a nil value)
stack traceback:
    stdin:1: in main chunk
    [C]: ? 
```

该函数以以下形式评估一组块：'function f () print() end'。但是，如您所见，它似乎没有正确地将函数保存到变量 f1-f8 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T23:03:34.447

loadstring() 函数返回一个函数，该函数在调用时会执行作为参数给出的代码。它实际上并不调用函数或运行代码。尝试以下操作：

```
for f=1,8 do
loadstring("function f" .. f .. " () print('" .. f .. "') end")()
end 
```

添加的括号调用刚刚由 loadstring() 创建的函数，创建您的编号函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T03:45:04.903

同样的事情可以用

```
for f=1,8 do
   _G["f"..f]=function () print(f) end
end 
```

# php - foreach 列表项的逆序

> ID：10777597
> 
> 赞同：96
> 
> 时间：2012-05-27T22:01:01.417
> 
> 标签：php

我想颠倒此代码列表项的顺序。基本上这是从最旧到最近的一组年份，我正在尝试扭转该输出。

```
<?php
    $j=1;     
    foreach ( $skills_nav as $skill ) {
        $a = '<li><a href="#" data-filter=".'.$skill->slug.'">';
        $a .= $skill->name;                 
        $a .= '</a></li>';
        echo $a;
        echo "\n";
        $j++;
    }
?> 
```

* * *

## 回答 #1

> 赞同：201
> 
> 时间：2012-05-27T22:04:05.817

### 倒着走

如果您正在寻找一个纯粹的 PHP 解决方案，您也可以简单地通过列表倒数，从前到后访问它：

```
$accounts = Array(
  '@jonathansampson',
  '@f12devtools',
  '@ieanswers'
);

$index = count($accounts);

while($index) {
  echo sprintf("<li>%s</li>", $accounts[--$index]);
} 
```

上面设置`$index`为元素的总数，然后开始从后到前访问它们，减少下一次迭代的索引值。

### 反转阵列

您还可以利用该[`array_reverse`函数](http://us1.php.net/array_reverse)来反转数组的值，从而允许您以相反的顺序访问它们：

```
$accounts = Array(
  '@jonathansampson',
  '@f12devtools',
  '@ieanswers'
);

foreach ( array_reverse($accounts) as $account ) {
  echo sprintf("<li>%s</li>", $account);
} 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-05-27T22:05:48.123

或者您可以使用[array_reverse](http://php.net/manual/en/function.array-reverse.php)函数。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2015-10-31T18:25:05.930

`array_reverse()`不会改变源数组，而是返回一个新数组。（请参阅[`array_reverse()`](http://php.net/manual/en/function.array-reverse.php)。）因此，您要么需要先存储新数组，要么只在 for 循环的声明中使用函数。

```
<?php 
    $input = array('a', 'b', 'c');
    foreach (array_reverse($input) as $value) {
        echo $value."\n";
    }
?> 
```

输出将是：

```
c
b
a 
```

因此，针对 OP，代码变为：

```
<?php
    $j=1;     
    foreach ( array_reverse($skills_nav) as $skill ) {
        $a = '<li><a href="#" data-filter=".'.$skill->slug.'">';
        $a .= $skill->name;                 
        $a .= '</a></li>';
        echo $a;
        echo "\n";
        $j++;
} 
```

最后，我猜测 是`$j`在最初尝试反向遍历时使用的计数器`$skills_nav`，或者是一种对`$skills_nav`数组进行计数的方法。如果是前者，那么既然您有正确的解决方案，就应该将其删除。如果是后者，它可以在循环之外用`$j = count($skills_nav)`.

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-06-19T02:20:20.053

如果您不介意销毁数组（或它的临时副本），您可以执行以下操作：

```
$stack = array("orange", "banana", "apple", "raspberry");

while ($fruit = array_pop($stack)){
    echo $fruit . "\n<br>"; 
} 
```

产生：

```
raspberry 
apple 
banana 
orange 
```

我认为这个解决方案比摆弄索引更清晰，而且您不太可能引入索引处理错误，但问题是如果您必须先创建数组的临时副本，您的代码可能需要稍长的时间才能运行. 摆弄索引可能会运行得更快，如果您确实需要引用索引，它也可能会派上用场，如下所示：

```
$stack = array("orange", "banana", "apple", "raspberry");
$index = count($stack) - 1;
while($index > -1){
    echo $stack[$index] ." is in position ". $index . "\n<br>";
    $index--;
} 
```

但正如您所看到的，您必须非常小心索引...

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-27T22:02:42.937

您可以使用[usort](http://php.net/manual/en/function.usort.php)函数创建自己的排序规则

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-11-30T04:47:52.460

假设您只需要反转索引数组（不是关联数组或多维数组），一个简单[的 for 循环](http://php.net/manual/en/control-structures.for.php)就足够了：

```
$fruits = ['bananas', 'apples', 'pears'];
for($i = count($fruits)-1; $i >= 0; $i--) {
    echo $fruits[$i] . '<br>';
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-01-26T14:02:53.367

如果您的数组是通过 SQL 查询填充的，请考虑在 MySQL 中反转结果，即：

```
SELECT * FROM model_input order by creation_date desc 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-10T09:13:39.880

如果您的数组中没有 Boolean false 值，您可以使用基于内部指针函数的下一个代码：

```
$array = ['banana', 'apple', 'pineapple', 'lemon'];

$value = end($array);
while ($value !== false) {
     // In case you need a key
    $key = key($array);

    // Do something you need to
    echo $key . ' => ' . $value . "\n";

    // Move pointer
    $value = prev($array);
} 
```

此解决方案适用于具有任意键的关联数组，不需要更改现有的或创建新的。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2015-07-29T09:33:40.390

```
<?php
    $j=1; 

      array_reverse($skills_nav);   

    foreach ( $skills_nav as $skill ) {
        $a = '<li><a href="#" data-filter=".'.$skill->slug.'">';
        $a .= $skill->name;                 
        $a .= '</a></li>';
        echo $a;
        echo "\n";
        $j++;
    }
?> 
```

# java - 如何比较两个不同大小的 CSV 文件之间的值？

> ID：10777598
> 
> 赞同：0
> 
> 时间：2012-05-27T22:01:15.320
> 
> 标签：java, csv, while-loop

我想知道循环两个 csv 文件并比较它们的列的最合适的方法是什么。具体来说，我想将 csv file1 第 1 列与 csv file2 第 20 列的每次迭代进行比较，并检查是否有匹配项。这是我到目前为止所拥有的。此外 csv file1 比 csv file2 小得多。

```
public class ClassifyData {

public static void main(String[]args) throws IOException{

File file1 = new File("file1.csv");

File file2 = new File("file2.csv");
FileWriter writer = new FileWriter("/Users/home/Work.csv");
PrintWriter pw = new PrintWriter(writer);
Scanner in = new Scanner(file1);
Scanner in2 = new Scanner(file2);
boolean firstLine = true;
String[] temp = null;
String [] temp2 = null;
String line = null;
String line2 = null;

while((line = in.nextLine())!=null){

    temp= line.split(",");  
while(line2 = in2.nextLine() !=null){
    temp2 = line2.split(",");

    if(temp[0] == temp[20]){
        System.out.println("match");
        pw.append("0");
        continue;

    }

    pw.append("\n");

    }
}

pw.flush();
pw.close();
writer.close();

}

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T22:19:20.503

在`if(temp[0] == temp[20])`您可能的意思的行`if(temp[0].equals(temp2[20]))`中。这将为您提供所需的比较。但是，您的内部`while`循环仍然不会像您想要的那样在第二个文件的开头重新开始。我不认为`Scanner`对象可以在文件上重新开始，即使它们可以，你也会因为一遍又一遍地读取同一个文件而浪费大量的文件读取。像这样的东西对你的磁盘来说会更有效：

```
ArrayList<String> list1 = new ArrayList<String>;
while((line = in.nextLine())!=null){
    temp= line.split(",");  
    list1.add(temp[0]);
}
// ...
for(int i = 0; i < list1.size(); i++){
    for(int j = 0; j < list2.size(); j++){
        if(list1.get(i).equals(list2.get(j))){
            System.out.println("Match found");
        }
    }
} 
```

**警告：** *未经测试的代码*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T22:13:32.083

我认为您的解决方案不会起作用，因为您只浏览了两个文件一次（您同时按顺序递增了两个文件）。鉴于第一个文件很小，我建议完全浏览该文件一次，并将第一列中的值存储在哈希表中。然后循环浏览第二个文件，检查第 20 列的值是否出现在哈希表中。

# android - Android：为应用程序生命周期和/或应用程序终止存储价值

> ID：10777602
> 
> 赞同：0
> 
> 时间：2012-05-27T22:01:35.017
> 
> 标签：android, android-activity, exit

我想在我的应用程序第一次执行时存储一个值，并且该值应该保留到应用程序终止（通过某种任务管理器）或应用程序选择自行退出。我希望该值在应用程序处于后台并通过屏幕旋转后保持不变。

一旦我决定退出，我的应用程序绝对没有理由继续在后台运行，因此终止应用程序是一种选择。我该怎么做，因为刚刚结束活动不起作用？

请注意，我是该应用程序的唯一用户，因此可能会忽略最佳实践。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T22:04:19.953

使用静态数据成员（又名单例）。这将在您的流程中持续存在，并且在流程完成时会消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T22:28:14.537

SO中有一些答案告诉您如何退出应用程序，以及您不应该这样做的建议。如果您真的不关心最佳实践，您可以让应用自行退出。

另一方面，也许你的价值只在活动的生命周期内持续存在就足够了。尝试在您的 Activity`onCreate()`方法中添加这样的内容：

```
if (savedInstanceState == null) {
    // Do initial setup
} 
```

# ruby-on-rails - Rails 中的模型关联 - 多个模型的多对多

> ID：10777603
> 
> 赞同：0
> 
> 时间：2012-05-27T22:01:50.790
> 
> 标签：ruby-on-rails, ruby-on-rails-3, many-to-many, associations

我正在尝试在 Rails 中理解和实现 Active Record 关联，但在理解如何将我需要的特定关系放在一起时遇到了一些麻烦。

我有一个食谱模型和一个成分模型。许多成分将属于一个单一的食谱，因此，一个食谱将有许多成分。我无法理解如何通过 MySQL 处理这些问题，以及如何在模型中正确实现这些关系。到目前为止，这是我拥有的（相对稀疏的）代码：

模型/recipe.rb

```
class Recipe < ActiveRecord::Base
  has_many :ingredients
end 
```

模型/成分.rb

```
class Ingredient < ActiveRecord::Base
  has_and_belongs_to_many :recipes
end 
```

但是，我相当肯定成分.rb 中的关联行是不正确的。

我将如何正确实现这些关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T22:07:23.533

您的`Recipe`模型应该`has_and_belongs_to_many`与成分而不是`has_many`. 这允许一个单一的食谱有许多成分（即你可以做`@recipe.ingredients`），而一个单一的成分可以在许多食谱中（`@ingredient.recipes`）。

刚开始的时候确实有点奇怪，但是一旦你了解了 Rails 关系的工作原理，它就会变得直观。你在正确的轨道上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T13:40:30.070

has_many 关系实现一对多映射，而 has_and_belongs_to_many 实现多对多映射。因此 has_many 与 belongs_to 配对，而 has_and_belongs_to_many 则配对在一起。

如果您还想找出特定成分用于哪些食谱之类的关系，那么食谱和成分之间的关​​系将是多对多的。

要在 mysql 数据库中实现 has_and_belongs_to_many，您必须创建第三个连接表来映射两个表之间的所有链接。

您可以查看[这个 stackoverflow 问题](https://stackoverflow.com/questions/4381154/rails-migration-for-has-and-belongs-to-many-join-table)，以更好地了解连接表的格式。

# objective-c - 使用 NSXMLParser initWithStream：没有收到解析器委托方法

> ID：10777604
> 
> 赞同：4
> 
> 时间：2012-05-27T22:01:56.633
> 
> 标签：objective-c, cocoa, nsxmlparser, nsstream, nsinputstream

我正在处理的基本问题是使用`NSStream`类来解析传入的增量 XML 数据。数据从来都不是一个完整的 XML 文档，但我想根据套接字可以读取的数量以增量块的形式接收和处理它。

查看文档`NSXMLParser`，似乎`initWithStream:`初始化 a 的方法`NSXMLParser`将是我的问题的完美解决方案。我可以用 a 初始化解析器，`NSInputStream`然后每当我通过我的套接字接收数据时调用该`parse`方法，这又应该调用委托。`NSXMLParser``NSXMLParser`

但是，我没有看到任何被调用的委托，我看到的唯一被调用的方法是流委托`stream:handleEvent:`。Apple 或其他开发人员似乎几乎没有此 API 的示例。关于我做错了什么或如何`initWithStream:`正确使用的任何想法？

**内容解析器.h**

```
@interface ContentParser : NSObject <NSStreamDelegate, 
                                     NSXMLParserDelegate>
{
   NSInputStream *inputStream;
   NSOutputStream *outputStream;
   NSMutableData *receivedData;
   NSXMLParser *xmlParser;
}
- (void)initStream; 
```

**内容解析器.m**

```
@implementation ContentParser

- (void)initStream
{    
   CFReadStreamRef readStream;
   CFWriteStreamRef writeStream;

   CFStreamCreatePairWithSocketToHost(kCFAllocatorDefault, 
                                     (CFStringRef)@"<hostname>", 
                                     <port>, 
                                     &readStream, 
                                     &writeStream);

   inputStream = (__bridge NSInputStream *)readStream;
   outputStream = (__bridge NSOutputStream *)writeStream;

   inputStream.delegate = self;
   outputStream.delegate = self;

   [inputStream  scheduleInRunLoop:[NSRunLoop currentRunLoop]
                           forMode:NSDefaultRunLoopMode];
   [outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] 
                           forMode:NSDefaultRunLoopMode];

   [inputStream open];
   [outputStream open];

   xmlParser = [[NSXMLParser alloc] initWithStream:inputStream];
   [xmlParser setDelegate:self];
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName 
                                        namespaceURI:(NSString *)namespaceURI 
                                       qualifiedName:(NSString *)qName 
                                          attributes:(NSDictionary *)attributeDict
{
   NSLog(@"didStartElement: %@, attributeDict: %@", elementName, attributeDict);
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
   NSLog(@"foundCharacters: %@", string);
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName 
                                      namespaceURI:(NSString *)namespaceURI 
                                     qualifiedName:(NSString *)qName
{
   NSLog(@"didEndElement: %@", elementName);
}

- (void)parser:(NSXMLParser *)parser parseErrorOccurred:(NSError *)parseError
{
   NSLog(@"Error %ld, Description: %@, Line: %ld, Column: %ld", 
      [parseError code], [[parser parserError] localizedDescription], 
      [parser lineNumber], [parser columnNumber]);
}

- (void)stream:(NSStream *)stream handleEvent:(NSStreamEvent)eventCode
{
   switch (eventCode) {
       case NSStreamEventHasBytesAvailable:
       {
           if (stream == inputStream) {
               NSInputStream *is = (NSInputStream *)stream;
               if (receivedData == nil) {
                   receivedData = [[NSMutableData alloc] init];
               }

               uint8_t buf[1024];
               NSInteger bytesRead = [is read:buf maxLength:1024];
               if (bytesRead == -1) {
                  NSLog(@"Network read error");
               } else if (bytesRead == 0) {
                  NSLog(@"No buffer received");
               } else {
                  [receivedData appendBytes:buf length:bytesRead];
                  BOOL parserResult = [xmlParser parse];
                  if (parserResult == NO) {
                     NSLog(@"Unable to parse XML");
                  }
               }
           }
           break;
       }
       default:
          break;
    }
}

@end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T06:01:07.247

我弄清楚了问题所在并在这里回答，以防其他人将来遇到这个问题，因为`+[NSXMLParser initWithStream]`那里没有很多文档。

我需要`-[NSXMLParser parse]`在分配`NSXMLParser`并将自己设置为代表后立即打电话。但是因为它是一个同步函数，所以我需要调用另一个线程，这样我就不会阻塞当前线程并且它可以接收`NSStream`事件。我也不需要让自己成为`NSInputStream`.

这可以使用 Grand Central Dispatch (GCD) 非常简单地完成，如下所示：

```
// alloc and init the xml parser
xmlParser = [[NSXMLParser alloc] initWithStream:inputStream];
[xmlParser setDelegate:self];

// block to execute
dispatch_block_t dispatch_block = ^(void)
{
    [xmlParser parse];
};

// create a queue with a unique name
dispatch_queue_t dispatch_queue = dispatch_queue_create("parser.queue", NULL);

// dispatch queue
dispatch_async(dispatch_queue, dispatch_block);

// cleanup
dispatch_release(dispatch_queue); 
```

这是完整的工作示例，以防万一有人无法遵循我在上面发布的内容。

**内容解析器.h**

```
@interface ContentParser : NSObject <NSStreamDelegate, 
                                     NSXMLParserDelegate>
{
   NSInputStream *inputStream;
   NSOutputStream *outputStream;
   NSMutableData *receivedData;
   NSXMLParser *xmlParser;
}
- (void)initStream; 
```

**内容解析器.m**

```
@implementation ContentParser

- (void)initStream
{    
   CFReadStreamRef readStream;
   CFWriteStreamRef writeStream;

   CFStreamCreatePairWithSocketToHost(kCFAllocatorDefault, 
                                     (CFStringRef)@"<hostname>", 
                                     <port>, 
                                     &readStream, 
                                     &writeStream);

   inputStream = (__bridge NSInputStream *)readStream;
   outputStream = (__bridge NSOutputStream *)writeStream;

   outputStream.delegate = self;

   [inputStream  scheduleInRunLoop:[NSRunLoop currentRunLoop]
                           forMode:NSDefaultRunLoopMode];
   [outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] 
                           forMode:NSDefaultRunLoopMode];

   [inputStream open];
   [outputStream open];

   xmlParser = [[NSXMLParser alloc] initWithStream:inputStream];
   [xmlParser setDelegate:self];

   dispatch_block_t dispatch_block = ^(void)
   {
      [xmlParser parse];
   };
   dispatch_queue_t dispatch_queue = dispatch_queue_create("parser.queue", NULL);
   dispatch_async(dispatch_queue, dispatch_block);
   dispatch_release(dispatch_queue);
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName 
                                        namespaceURI:(NSString *)namespaceURI 
                                       qualifiedName:(NSString *)qName 
                                      attributes:(NSDictionary *)attributeDict
{
   dispatch_block_t dispatch_block = ^(void)
   {
      NSLog(@"didStartElement: %@, attributeDict: %@", 
         elementName, attributeDict);
   };
   dispatch_queue_t main_queue = dispatch_get_main_queue();
   dispatch_async(main_queue, dispatch_block);
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
   dispatch_block_t dispatch_block = ^(void)
   {
      NSLog(@"foundCharacters: %@", string);
   };
   dispatch_queue_t main_queue = dispatch_get_main_queue();
   dispatch_async(main_queue, dispatch_block);
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName 
                                      namespaceURI:(NSString *)namespaceURI 
                                     qualifiedName:(NSString *)qName
{
   dispatch_block_t dispatch_block = ^(void)
   {
      NSLog(@"didEndElement: %@", elementName);
   };
   dispatch_queue_t main_queue = dispatch_get_main_queue();
   dispatch_async(main_queue, dispatch_block);
}

- (void)parser:(NSXMLParser *)parser parseErrorOccurred:(NSError *)parseError
{
   dispatch_block_t dispatch_block = ^(void)
   {
      NSLog(@"Error %ld, Description: %@, Line: %ld, Column: %ld", 
         [parseError code], [[parser parserError] localizedDescription], 
         [parser lineNumber], [parser columnNumber]);
   };
   dispatch_queue_t main_queue = dispatch_get_main_queue();
   dispatch_async(main_queue, dispatch_block);
}   

- (void)stream:(NSStream *)stream handleEvent:(NSStreamEvent)eventCode
{
   switch (eventCode) {
      case NSStreamEventHasSpaceAvailable:
      {
         /* write bytes to socket */
         break;
      }
      default:
         break;
    }
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T22:49:46.293

我不确定这一点，但我认为您不需要在`parse`每次流报告事件时发送 -`initWithStream:`文档暗示解析器本身将处理输入。我想你会这样做：

```
xmlParser = [[NSXMLParser alloc] initWithStream:inputStream];
[xmlParser setDelegate:self];
[xmlParser parse]; 
```

并且不用担心流委托方法。当你得到 时`parserDidEndDocument:`，你可以关闭流。

# asp.net - ASP.NET MVC4 WebAPI EntityFramework 异常

> ID：10777606
> 
> 赞同：3
> 
> 时间：2012-05-27T22:02:41.037
> 
> 标签：asp.net, asp.net-web-api

我正在尝试在站点内创建一个 webapi 控制器。它是一个模板控制器，与 Visual Studio 插入的内容没有任何变化。

该代码位于 MVC4 站点中，该站点运行完全没有任何错误，但是，当我调用 webapi 控制器时，我收到此错误：

无法加载文件或程序集 'EntityFramework, Version=4.1.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' 或其依赖项之一。该系统找不到指定的文件。

我已经卸载了 EntityFramework nuget 包，当我在整个解决方案中搜索时，在任何文件中都找不到它，但是，我反复收到此错误。

有什么线索可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T22:29:45.610

我有同样的问题。

一切正常，然后开始为所有 Web api 请求提供 404。

我已经尝试了一切.. 解决我的问题的唯一方法是将 EF 4.1.0.0 的引用添加到我的项目中，并将其添加到 Web.config。

这很奇怪，因为我的解决方案中没有任何地方使用或引用 EF。

我没有 4.1 版本，我从这里下载了它[http://www.microsoft.com/en-us/download/details.aspx?id=26825](http://www.microsoft.com/en-us/download/details.aspx?id=26825)

* * *

我发现了为什么 EF 4.1 被列为依赖项。仅当我想发布该站点时才出现错误。我所做的只是**添加可部署的依赖项** 并检查 ASP.NET MVC，因为主机服务器没有安装 MVC 4。当我查看 _bin_deployableAssemblies 文件夹时

![在此处输入图像描述](../Images/1c0b31d14d336028d9935437ea5f7953.png)

我的眼睛抓住了 System.Web.Http.Data.EntityFramework.dll，我立即反编译，瞧，我发现那里引用了 EF 4.1。

![在此处输入图像描述](../Images/2619af0714da8f73d729039e60c6c8e8.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T23:30:06.897

Arian，每次我在使用 EF4 时使用股票 VS 模板执行某些操作时都会看到该错误。

将其转过来并在解决方案中再次安装 Entity Framework。启动 Nuget 管理器或从其控制台执行此操作：

```
Install-Package EntityFramework 
```

（对于 4.3.1）

```
Install-Package EntityFramework -Pre 
```

（对于 5.0.0rc）

一旦你的引用中有 DLL（顺便说一句，检查一下），错误就会消失

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T19:47:05.033

尝试将以下内容添加到您的 web.config 文件中：

```
 <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="EntityFramework" publicKeyToken="b77a5c561934e089" />
        <bindingRedirect oldVersion="0.0.0.0-4.3.1.0" newVersion="4.3.1.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T09:31:37.723

> 它是一个模板控制器，与 Visual Studio 插入的内容没有任何变化。

由于这些模板，实体框架可能是一个依赖项。一些模板将生成`DataControllers`，这需要 EF。如果你仔细阅读，你会在模板显示的文字中看到：“Generate ...., **using Entity Framework** ”

如果不是这种情况，并且您有 simple`ApiControllers`并且您已经卸载了 EF，请仔细检查您的`packages.config`文件，以确保那里也没有对 Entity Framework 的引用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T07:21:41.863

尝试删除每个项目的`obj`和文件夹，然后重新构建应用程序。`bin`这帮助我不止一次地解决了同样的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-06T20:28:04.437

尝试`.csproj`在记事本等文本编辑器中打开项目的文件并搜索短语“EntityFramework”。如果它出现命中，那可能会给你一个关于那个问题是什么的线索。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-31T22:58:26.603

**删除**EntityFramework 的 web.configdependentAssembly 行为我的项目修复了它。

![web.config 代码的屏幕截图 -dependentAssembly - EntityFramework](../Images/22cf94ab880487d2bbd6891d5105ed08.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-14T18:49:40.350

就我而言，由于我使用的是 .NET 4.0，所以在升级到 VS2012（需要用于不同的项目）之后，我不得不恢复到 EntityFramework 4.1。

在 VS 2010 的包管理器控制台中运行此命令：

PM> Install-Package EntityFramework -Version 4.1.10715.0

# python - 为什么信号处理程序中的打印操作可能会改变死锁情况？

> ID：10777610
> 
> 赞同：3
> 
> 时间：2012-05-27T22:02:47.153
> 
> 标签：python, linux, signals, deadlock

我得到了如下简单的程序：

```
import threading
import time
import signal

WITH_DEADLOCK = 0

lock = threading.Lock()

def interruptHandler(signo, frame):
    print str(frame), 'received', signo
    lock.acquire()
    try:
        time.sleep(3)
    finally:
        if WITH_DEADLOCK:
            print str(frame), 'release'
        lock.release()

signal.signal(signal.SIGINT, interruptHandler)
for x in xrange(60):
    print time.strftime("%H:%M:%S"), 'main thread is working'
    time.sleep(1) 
```

因此，如果您启动该程序并且在 3 秒内按两次 Ctrl+C，则不会出现死锁。每次按 Ctrl + C 时，都会显示正确的行。如果您更改 WITH_DEADLOCK=1 并按 Ctrl+C 两次（3 秒内），则程序将挂起。

有人可以解释为什么打印操作会产生如此大的差异吗？

（我的python版本是2.6.5）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T23:39:50.620

老实说，我认为 JF Sebastian 的评论是最合适的答案——你需要让你的信号处理程序可重入，而目前它不是，而且它在没有 print 语句的情况下仍然可以工作，这令人惊讶。

# iis - IIS CustomError 重定向缺少 ContentType 标头，被防火墙阻止

> ID：10777623
> 
> 赞同：1
> 
> 时间：2012-05-27T22:05:31.327
> 
> 标签：iis, iis-7, content-type, custom-errors, custom-error-pages

我的 web.config 中的 CustomErrors 指令正在工作，除了 404 之外，IIS 提供没有 ContentType 标头的 302 重定向。这会导致防火墙阻止响应，并且客户端永远不会访问自定义错误页面。注意我使用的是 IIS7、MVC (razor)、ELMAH，并支持各种浏览器。

```
<customErrors defaultRedirect="~/Site/Error" mode="RemoteOnly" /> 
```

如何在所有 CustomError 重定向中获得合理的 Content-Type 标头，或者以其他方式解决问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:44:52.153

您可以尝试像此人在此处所做的那样编写自定义 HTTP 模块：

[http://www.colincochrane.com/post/2008/01/ASP-NET-Custom-Errors-Preventing-302-Redirects-To-Custom-Error-Pages.aspx](http://www.colincochrane.com/post/2008/01/ASP-NET-Custom-Errors-Preventing-302-Redirects-To-Custom-Error-Pages.aspx)

# tsql - 游标在 T-SQL 中永不结束

> ID：10777624
> 
> 赞同：2
> 
> 时间：2012-05-27T22:05:34.967
> 
> 标签：tsql, cursor

我对随机结束的诅咒有疑问。我想为每个元素生成一行，因此对于每个元素，2012 年的每个月都有一行。如果特定月份缺少一行，它也应该创建该行。

现在，它正在为每个月的最后一个元素生成一行，直到 2057 年。

现在，每个元素都有一行，直到 2057 年为止的每个月，并且只有一个元素在我的表中。

我的餐桌设计：

```
create table tblDataUpdateTest
(
slno int identity(1,1),
cName varchar(50),
cRemarks varchar(50),
[Date] date,
 )

insert into tblDataUpdateTest (cName, cRemarks,[Date]) values ('name1','Text1','2012-01-01'),
('name2','Text2','2012-01-01') 
```

我的代码：

```
declare @y as int
declare @d as int
SET @y = 2012
SET @d = 1
Declare @@counter int
Declare @@month int
set @@counter=0
Declare @@slno int
Declare @@cRemarks varchar(100)
Declare @@cName varchar(50)
Declare @@Date date

set @@month = 1
Declare tmepTbl cursor
For
Select slno,cName,cRemarks,date from tblDataUpdateTest

Open tmepTbl /* Opening the cursor */

fetch next from tmepTbl
into @@slno,@@cName,@@cRemarks,@@Date

while @@fetch_Status=-1
begin

if not exists (select cRemarks from tblDataUpdateTest where MONTH(Date) = @@month AND YEAR(Date) = 2012)
begin
insert into tblDataUpdateTest (cName, cRemarks,[Date]) values (@@cName,'s',(DateAdd(yy, 2012-1900,DateAdd(m,  @@month - 1, 01 - 1))))
end

fetch next from tmepTbl
into @@slno,@@cName,@@cRemarks,@@Date

set @@month=@@month+1
end
close tmepTbl
Deallocate tmepTbl 
```

我现在的桌子

```
cName cRemarks Date
name1 Text1    2012-01-01
name2 Text2    2012-01-01 
```

我希望发生以下情况：

```
cName cRemarks Date
name1 Text1    2012-01-01
name1 Text1    2012-02-01
name1 Text1    2012-03-01
name2 Text2    2012-01-01
name2 Text2    2012-02-01
name2 Text2    2012-03-01 
```

等等。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T22:41:07.917

使用递归 CTE 而不是游标不是更好吗？这是一个例子：

```
DECLARE @y INT
DECLARE @m INT
DECLARE @n INT
SET @y = 2012
SET @m = 1
SET @n = 3

;WITH dates(d, m) AS(
    SELECT CONVERT(DATE, CONVERT(VARCHAR(4), @y) + '-01-01'), 1
    UNION ALL
    SELECT CONVERT(DATE, CONVERT(VARCHAR(4), @y) + '-' + CASE WHEN m + 1 < 10 THEN '0' ELSE '' END + CONVERT(VARCHAR(2), m + 1) + '-01')
        , m + 1 
    FROM dates
    WHERE m < @n
)
INSERT INTO tblDataUpdateTest(cName, cRemarks,[Date])
    SELECT cName, cRemarks, [date] FROM (
    SELECT cName, cRemarks, dates.d AS [date]
    FROM tblDataUpdateTest
    CROSS JOIN dates) t
    WHERE NOT(EXISTS(SELECT * FROM tblDataUpdateTest WHERE cName = t.cName AND [date] = t.[date]))
OPTION(MAXRECURSION 11)

SELECT * FROM tblDataUpdateTest ORDER BY cName 
```

# c# - 关于实体框架上下文生命周期的问题

> ID：10777630
> 
> 赞同：22
> 
> 时间：2012-05-27T22:07:14.973
> 
> 标签：c#, asp.net-mvc, entity-framework, using, idisposable

我对 ASP.NET MVC 应用程序中实体框架上下文的期望生命周期有一些疑问。让上下文在最短的时间内保持活跃不是最好的吗？

考虑以下控制器操作：

```
public ActionResult Index()
{
    IEnumerable<MyTable> model;

    using (var context = new MyEntities())
    {
        model = context.MyTable;
    }

    return View(model);
} 
```

上面的代码不起作用，因为在视图呈现页面时实体框架上下文超出了范围。其他人将如何构建上面的代码？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-05-28T10:06:24.267

**让我们有争议！**

我不同意 MVC + EF 的普遍共识，即在整个请求中保持上下文处于活动状态是一件好事，原因有很多：

**低性能提升** 你知道创建一个新的数据库上下文是多么昂贵吗？嗯......“ *DataContext 是轻量级的，创建起来并不昂贵*”，来自[MSDN](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.aspx#0cb87d0d-0981-48f1-ab1a-6fc0fdfa5e9f_c)

**弄错 IoC，它看起来会很好.. 直到你上线** 如果你设置你的 IoC 容器来为你处理你的上下文并且你弄错了，你真的弄错了。我现在已经*两次*看到由 IoC 容器创建的大量内存泄漏，并不总是正确地处理上下文。在您的服务器在正常级别的并发用户期间开始崩溃之前，您不会意识到自己设置错误。它不会在开发中发生，所以做一些负载测试！

**意外延迟加载** 您返回最近文章的 IQueryable，以便您可以在主页上列出它们。有一天，其他人被要求在相应文章旁边显示评论数量。所以他们**在视图中添加了一些简单的代码来**显示评论计数，就像这样......

```
@foreach(var article in Model.Articles) {
    <div>
        <b>@article.Title</b> <span>@article.Comments.Count() comments</span>
    </div>
} 
```

看起来不错，工作正常。但实际上您没有在返回的数据中包含评论，所以现在这将为循环中的每篇文章进行新的数据库调用。选择 N+1 个问题。10 篇文章 = 11 次数据库调用。好的，所以代码是错误的，但这是一个容易犯的错误，所以它会发生。

您可以通过在数据层中关闭上下文来防止这种情况。但是代码不会因 article.Comments.Count() 上的 NullReferenceException 而中断吗？是的，它会迫使您编辑**数据**层以获取视图层所需的数据。这是应该的。

**代码异味** 从您的视图中访问数据库是有问题的。您知道 IQueryable 尚未真正命中数据库，因此请忘记该对象。确保您的数据库在离开数据层之前被命中。

**所以答案**

您的代码应该（在我看来）是这样的

数据层：

```
public List<Article> GetArticles()
{
    List<Article> model;

    using (var context = new MyEntities())
    {
        //for an example I've assumed your "MyTable" is a table of news articles
        model = (from mt in context.Articles
                select mt).ToList();
        //data in a List<T> so the database has been hit now and data is final
    }

    return model;
} 
```

控制器：

```
public ActionResult Index()
{
    var model = new HomeViewModel(); //class with the bits needed for you view
    model.Articles = _dataservice.GetArticles(); //irrelevant how _dataService was intialised
    return View(model);
} 
```

一旦你完成了这一点并理解了这一点，那么也许你可以开始尝试让 IoC 容器处理上下文，但绝对不是在此之前。警告我 - 我已经看到了两次大规模的失败 :)

但老实说，做你喜欢的事，编程很有趣，应该是一个偏好问题。我只是告诉你我的。但无论你做什么，都不要仅仅因为“所有酷孩子都在做”就开始为每个控制器或每个请求使用 IoC 上下文。这样做是因为您真正关心它的好处并了解它是如何正确完成的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-27T22:27:03.767

我同意每个请求一个上下文，我们通常通过使用 Ninject 绑定上下文 .InRequestScope 来做到这一点，效果非常好，是：

```
Bind<MyContext>().ToSelf().InRequestScope(); 
```

枚举尽可能接近查询的集合也是非常好的做法，即：

```
public ActionResult Index()
{
    IEnumerable<MyTable> model;

    using (var context = new MyEntities())
    {
        model = (from mt in context.MyTable
                select mt).ToArray();
    }
    return View(model);
} 
```

这将帮助您避免无意中从您的视图中增加查询。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-27T22:22:11.830

首先，您应该考虑将您的数据库访问权限放到单独的类中。

其次，我最喜欢的解决方案是使用“每个请求一个上下文”（如果您使用 MVC，我相信它是每个控制器一个上下文）。

**要求的编辑：**

看看这个答案，也许它也会帮助你。请注意我正在使用网络表单，因此目前无法在 MVC 中验证它，但它可能对您有所帮助或至少给您一些指导。[https://stackoverflow.com/a/10153406/1289283](https://stackoverflow.com/a/10153406/1289283)

此 dbcontext 的一些示例用法：

```
public class SomeDataAccessClass
{
    public static IQueryable<Product> GetAllProducts()
    {
        var products = from o in ContextPerRequest.Current.Products
                       select o;
        return products;
    }
} 
```

然后你可以做这样的事情：

```
public ActionResult Index()
{
     var products = SomeDataAccessClass.GetProducts();
     return View(products);
} 
```

很简单，对吧？您不必再担心如何处理您的上下文，您只需编写您真正需要的代码。

有些人喜欢通过添加 UnitOfWork 模式或 IoC 容器来进一步增加趣味性……但我更喜欢这种方法，因为它很简单。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T22:27:23.007

你能`.ToList()`像这样利用LINQ的扩展方法吗：

```
public ActionResult Index()
{
    IEnumerable<MyTable> model;

    using (var context = new MyEntities())
    {
        model = (from mt in context.MyTable
                select mt).ToList();
    }
    return View(model);
} 
```

# cakephp - Cakephp 2.0 ReCaptcha 插件总是出错

> ID：10777635
> 
> 赞同：1
> 
> 时间：2012-05-27T22:07:49.427
> 
> 标签：cakephp, cakephp-2.0, recaptcha

我[从这个人](http://bakery.cakephp.org/articles/jahdrien/2012/02/15/recaptcha_plugin_for_cakephp_2)那里拿了一个 reCaptcha 插件 （插件的[github 链接](https://github.com/Jahdrien/ReCaptcha-Plugin)）

我在视图中输入了以下代码表单：

```
[form creation]
[table]
[inputs]
[/table]
echo $this->Recaptcha->show(array('theme' => 'white'));
echo $this->Recaptcha->error();  

[/form] 
```

我已按照建议的步骤操作，reCaptcha 窗口正确显示，但无论我在验证码中输入什么内容，它都不会得到验证，并且我总是收到 beforeValidate 的“消息”字段（我已将其设置为“你”输入了错误的信息”等）。

我什至不确定如何调试它以查看它在哪一点失败。即使我只是将 checkRecaptcha 函数中的所有代码替换为“return true”以尝试跳过使用密钥的验证并查看规则本身是否正确，它仍然保持不变，而且我通常不会得到任何`incorrect-captcha-sol`我读到的具体信息。

我是否正确地假设我在控制器函数中需要的唯一代码（假设我已经在控制器中包含了组件和助手） `Configure::load('Recaptcha.key');`并且没有进一步的手动验证检查？

（不幸的是，由于权利，我无法将我的整个项目链接到你）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T20:04:35.060

我有一个类似的问题。尝试删除组件中的 2 个响应和质询字段行，并用以下内容覆盖它们：

```
$controller->$modelClass->set('recaptcha_response_field',  
$controller->request->data['recaptcha_response_field']);  
$controller->$modelClass->set('recaptcha_challenge_field',  
$controller->request->data['recaptcha_challenge_field']); 
```

# command-line - InnoSetup 剥离可执行文件

> ID：10777639
> 
> 赞同：-1
> 
> 时间：2012-05-27T22:09:10.020
> 
> 标签：command-line, executable, inno-setup, strip

如何减小可执行文件 InnoSetup 的大小？我试过 StripReloc，但我不明白它是如何工作的，你能告诉我如何使用 StripReloc 命令行吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:40:28.647

你不需要在 Inno 设置上运行 stripreloc，因为它[已经完成了](https://github.com/jrsoftware/issrc/blob/master/readme.txt)。

# php - 如何将highlight_file写入textarea？

> ID：10777640
> 
> 赞同：0
> 
> 时间：2012-05-27T22:09:23.347
> 
> 标签：php, html

我想将文本从 highlight_file 写入 html textarea...但不确定如何？注意：我可以将彩色文本写入屏幕，但我希望将其加载到可以修改文本的框中。谢谢

```
<?php
...
$code =  highlight_file($_POST[filename]);//not sure if this works to write to $code
...
?>
<html>
<textarea type="text" name="code" rows="40" cols="120">
<?php echo $code; ?>
</textarea> <!this does not work>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T22:10:48.590

来自 PHP 文档：

> ```
> mixed highlight_file ( string $filename [, bool $return = false ] ) 
> ```

所以，使用`$code = highlight_file($_POST['filename'], true);`

作为旁注：您确实意识到这允许任何有权访问该脚本的人读取您**所有**文件（PHP 和其他文件）的代码？这包括任何可能包含数据库密码的配置文件等。

# tsql - 将 sql 转换为在存储过程中查看，然后返回有限的行

> ID：10777641
> 
> 赞同：-1
> 
> 时间：2012-05-27T22:09:24.927
> 
> 标签：tsql, sql-server-2005, stored-procedures

我需要比较两个表，然后只过滤掉那些没有匹配记录的记录。然后我只需要返回其中的几行。要返回我使用的行...

```
SELECT  *
    FROM     (SELECT  ROW_NUMBER() OVER (ORDER BY Orderby ASC)
                 AS Row, * FROM vImportFiltered where userid <> @userID)
                AS vImport
    WHERE  Row >= @NumbFrom AND Row <= @NumbTo 
```

对于我使用的记录过滤器...

SELECT * FROM ImportProducts IP 其中 IP.ImpProdNameID = @impProdNameID 和 IP.ImpProdCatID = @ImpProdCatID 和

```
 NOT EXISTS (SELECT *

           FROM   dbo.ProductDetails PD INNER JOIN
                      dbo.ProductsLU PL ON PD.LUProdSellUseID = PL.LUProdSellUseID
        WHERE
           IP.ImpProductID = PD.ProdImpID AND
           (CONVERT(varchar(36),PL.UserID) = @userID)) 
```

两者都是分开工作的，但是当我尝试将它们结合起来时，我得到了错误。

```
SELECT
    *
FROM
  (SELECT  ROW_NUMBER() OVER (ORDER BY Orderby ASC)
                 AS Row, * ImportProducts IP Where IP.ImpProdNameID = @impProdNameID and IP.ImpProdCatID = @ImpProdCatID 
and    
      NOT EXISTS (SELECT *

           FROM   dbo.ProductDetails PD INNER JOIN
                      dbo.ProductsLU PL ON PD.LUProdSellUseID = PL.LUProdSellUseID
        WHERE
           IP.ImpProductID = PD.ProdImpID AND
           (CONVERT(varchar(36),PL.UserID) = @userID)) as vImport
WHERE  Row >= @NumbFrom AND Row <= @NumbTo 
```

错误：

```
Msg 102, Level 15, State 1, Line 17 
Incorrect syntax near 'ImportProducts'. 
Msg 156, Level 15, State 1, Line 25 
Incorrect syntax near the keyword 'as'. 
```

我也试过

```
WHERE
           IP.ImpProductID = PD.ProdImpID AND
           (CONVERT(varchar(36),PL.UserID) = @userID))And Row >= @NumbFrom AND Row <= @NumbTo 
```

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T23:24:15.087

你错过了一个`FROM`

```
SELECT *
FROM
  (SELECT  ROW_NUMBER() OVER (ORDER BY Orderby ASC) AS Row, * 
    FROM ImportProducts IP -- added your missing FROM
    Where IP.ImpProdNameID = @impProdNameID 
    and IP.ImpProdCatID = @ImpProdCatID 
    and    
      NOT EXISTS (SELECT *
                  FROM   dbo.ProductDetails PD 
                  INNER JOIN dbo.ProductsLU PL 
                    ON PD.LUProdSellUseID = PL.LUProdSellUseID
                  WHERE IP.ImpProductID = PD.ProdImpID 
                    AND (CONVERT(varchar(36),PL.UserID) = @userID)
                  )
  ) as vImport
WHERE  Row >= @NumbFrom 
    AND Row <= @NumbTo 
```

# vb.net - VB.Net表单引用的非共享方法就好像它们是共享的一样？

> ID：10777643
> 
> 赞同：3
> 
> 时间：2012-05-27T22:09:37.533
> 
> 标签：vb.net, winforms

尽管我主要是 C# 开发人员，但我正在为 VB.Net 应用程序提供支持。我遇到了我认为是“奇怪”的代码，因为我的 C# 思维模式告诉我代码是错误的，不应该编译，但它确实如此。我做了一个*查找*特定表单上的所有引用以查看它被使用的位置，并找到了对直接引用类的非分解方法而不实例化类的表单的引用。换句话说，我看到这样的代码：

```
FrmCareer.ShowDialog(careerId)
FrmCareer = Nothing 
```

现在*ShowDialog*不是共享成员，它引用实例成员变量，所以我根本不希望智能感知列出**ShowDialog***方法*。但它确实可以编译。谁能解释这里发生了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T22:21:28.190

VB.NET 具有将所有表单的集合作为属性保存在[`My.Forms`](http://msdn.microsoft.com/en-us/library/87y2hdsf%28v=vs.80%29.aspx)对象下的（非常好的）特性。当您第一次访问它们时，那​​里的对象会被实例化。通过这种方式，您可以获得可以引用的每个表单的默认实例。

在不太好的方面，VB 坚持*全局*`My.Forms`导入对象的属性，你无法改变它。

 *换句话说，应用程序中任何表单的类名都兼作该表单的全局实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T22:14:50.330

是`FrmCareer`表格的名字吗？如果是这样，我认为对于您可以像这样访问的每种表单都有一种神奇的“单例”式变量。这个想法是开发人员可能只想要一个`FrmCareer`，因此任何代码都可以像这样访问它（在这种情况下显示表单）。在 C# 术语中，它就像一个全局静态变量。

啊，是的，看到[这个问题](https://stackoverflow.com/questions/10601503/access-form-property-with-instance-vb-net)- 它有一个更好的解释。*

# image - 图像在 .ps 文件中正确，但在 .pdf 中不显示

> ID：10777645
> 
> 赞同：2
> 
> 时间：2012-05-27T22:10:39.587
> 
> 标签：image, figure, texmaker

我正在使用 Texmaker 3.1 并且无法让我的数字显示在 PDF 输出中。我的 QuickBuild 设置是“LaTeX + dvipdfm + 查看 PDF”（我也尝试过“LaTeX + dvips + ps2pdf + 查看 PDF”），我的图像是本地目录中的 .eps 文件。图像在其他地方（例如，在 GhostView 中）都按预期打开，因此文件本身没问题。

没有错误，但生成的 PDF 文件显示带有空白区域的图形标题（注意：我没有`draft`在命令中设置选项`\documentclass`）。我的 MWE 很简单；因此，我怀疑问题出在 Texmaker 或以某种方式在我的设置中：

```
\documentclass[10pt,a4paper]{article}

\usepackage{graphicx}

\begin{document}

This is an example of an image within a figure not appearing where it should.

\begin{figure}[H]
\includegraphics[width=3.in]{notworking.eps}
\caption{This caption should accompany an image.}
\label{fignotworking}
\end{figure} 
```

以下是图像本身（在图形之外）的示例，也未显示：

```
\includegraphics[width=3.in]{notworking.eps}

\end{document} 
```

我查看了生成的 .ps 文件，图像在那里正确显示。但是如果问题出在 ps2pdf 阶段的某个地方，我不知道如何纠正它。我预计有缺陷的 ps2pdf.exe 会导致比不显示图像更致命的问题。

# java - Java - 处理 Windows 7 中的库（如文档、图片等）

> ID：10777647
> 
> 赞同：1
> 
> 时间：2012-05-27T22:10:50.593
> 
> 标签：java, io, text-files, filewriter

Windows 以不同于常规文件夹和路径的方式处理库。因此，当我使用这段代码创建一个文本文件时：

```
File filePath = fc.getSelectedFile(); 
```

...更多无关紧要的东西...

```
File outputText = new File(filePath.getParentFile(), "Decrypted.txt");

    try
        {
        FileWriter fw = new FileWriter(outputText); //Write everything to the file.
        fw.write(messageOut);
        fw.close(); //DON'T FORGET TO CLOSE THE FILE!
        }
    catch (IOException e)
        {
        // TODO Auto-generated catch block
        e.printStackTrace();
        } 
```

如果文件在桌面文件夹中，它可以工作，但是如果我尝试将它放在我的图片库中，我会收到以下错误消息：

```
java.io.FileNotFoundException: ::{031E4825-7B94-4DC3-B131-E946B44C8DD5}\Pictures.library-ms\Decrypted.txt (The system cannot find the path specified)
at java.io.FileOutputStream.open(Native Method)
at java.io.FileOutputStream.<init>(Unknown Source)
at java.io.FileOutputStream.<init>(Unknown Source)
at java.io.FileWriter.<init>(Unknown Source)
at code.Crypto.decrypt(Crypto.java:57)
at code.Crypto.main(Crypto.java:27) 
```

我有办法解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T22:53:41.887

看起来像一个错误，在我的系统上以及 java 7 update4 32bit 上进行了测试和确认。

```
JFileChooser fc = new JFileChooser();
int returnVal = fc.showSaveDialog(null);
//select and enter a name for a file under libraries (with windows look and feel 
//select 'desktop' in the left pane, then libraries->pictures)
if (returnVal == JFileChooser.APPROVE_OPTION) {
    File file = fc.getSelectedFile();
    FileWriter fw = new FileWriter(file); //<-- FileNotFoundException
    fw.write("foo bar");
    fw.close();
} 
```

例外：

```
Exception in thread "main" java.io.FileNotFoundException: ::{031E4825-7B94-4DC3-B131-E946B44C8DD5}\Pictures.library-ms\hej.txt (The system cannot find the path specified)
at java.io.FileOutputStream.open(Native Method)
at java.io.FileOutputStream.<init>(FileOutputStream.java:212)
at java.io.FileOutputStream.<init>(FileOutputStream.java:165)
at java.io.FileWriter.<init>(FileWriter.java:90)
at test.Main.main(Main.java:16) 
```

一个丑陋的解决方法可能是指定一个过滤掉这些的文件过滤器，请参阅：

[在 Java 的 JFileChooser 中选择“计算机”或“库”会产生一个奇怪的文件对象](https://stackoverflow.com/questions/9334531/selecting-computer-or-libraries-in-javas-jfilechooser-yields-a-strange-file)

# python - Django 自定义模板标签：打包应用程序的 ImportError

> ID：10777650
> 
> 赞同：0
> 
> 时间：2012-05-27T22:11:45.623
> 
> 标签：python, django, django-templates

我正在为可重用的 django 应用程序编写自定义模板标签。
我定义的标签是在同一个应用程序中引用一个模型，所以我需要导入它。

如果我将我的应用程序代码复制到 django 项目中，一切正常，但是如果我使用 distutils 打包我的应用程序并通过 pip 或 setup.py install 安装它（因此应用程序代码被复制到站点包中），我无法使用它。

尝试在模板标签模块中导入我的应用程序模型时，我收到 ImportError。引发错误的代码是这样的：

> 从 django 导入模板
> 导入 cms_fragments.models
> 
> 注册=模板.库（）

引发的异常是这样的：

> ImportError 引发加载 cms_fragments.templatetags.cms_fragments_tags：没有名为模型的模块

我很确定我的应用程序布局是正确的：

> |-cms_fragments
> 
> > |- **_ *init* _** .py
> > |-models.py
> > |-templatetags
> > 
> > > |- **_*初始化*_** .py
> > > |-cms_fragments_tags.py
> > > |-views.py

我已经看过与此相关的所有帖子，但我从未发现有人报告在 django 项目中的代码与在站点包中的代码之间存在这种差异。

有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T22:32:14.913

我认为问题在于您导入/使用所需库的方式。如果您像这样导入“模型”，它应该可以工作：

```
from cms_fragments import models 
```

但是，如果您在使用此“模型”包的地方发布一段代码会更好，因为我只是在猜测您是如何使用它的。阅读您收到的错误，似乎您正在尝试像这样引用“模型”模块：

```
models.some_thing_inside_models... 
```

但是当你像这样导入时：

```
import cms_fragments.models 
```

您必须以这种方式引用它：

```
cms_fragments.models.some_thing_inside_models... 
```

[这](http://docs.python.org/tutorial/modules.html#packages)是一些可能对您有所帮助的文档，并且很好地解释了如何使用您的项目目录树。

# apache - 如何在服务器级别拒绝请求而不将它们传递给应用程序？

> ID：10777651
> 
> 赞同：0
> 
> 时间：2012-05-27T22:11:50.370
> 
> 标签：apache, .htaccess, drupal

是否可以在应用程序目录中放置一些内容到 htaccess，以便某些请求在服务器级别被拒绝并且根本不会到达应用程序（在我的情况下是 Drupal），并且不要使用“页面不”向应用程序日志发送垃圾邮件成立”？

我认为htaccess对文件“禁止”的请求被服务器拒绝并且没有进一步处理，但事实并非如此。

例子：

假设我自己的站点域是 example.com。htaccess 有以下几行（这是防止盗链 jpg 图像的简化设置）：

```
RewriteCond %{HTTP_HOST} ^example\.com [NC]
  RewriteCond %{HTTP_REFERER} !^$
  RewriteCond %{HTTP_REFERER} !^http://([-a-z0-9]+\.)?example\.com [NC]
  RewriteRule \.(jpg)$ - [F,NC,L] 
```

它可以工作，例如，如果我访问[http://altlab.com/hotlinking.html](http://altlab.com/hotlinking.html)并从我的 example.com 站点放置一个现有的 jpg 地址，它会说无法显示图像。所以它被阻止了，好的。但是上面的请求也反映在了Watchdog（Drupal的内部日志）中，就不行了。

有没有一种方法可以拒绝 Apache 服务器从外部域对 jpg 文件的请求，而不是将这些请求进一步传递给应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T22:14:51.593

您需要使用 4XX 状态码进行重定向。

```
RewriteRule ... [...,R=400] 
```

# .net - 在文件夹之间更新文件的最佳方式

> ID：10777656
> 
> 赞同：1
> 
> 时间：2012-05-27T22:12:37.340
> 
> 标签：.net, filesystems, directory, copy, updates

我有两个目录（`dirA`和`dirB`），我想将所有文件从`dirA` **包括子文件夹**复制到`dirB`其中的文件`dirA`替换文件的位置，前提是`dirB`这两个文件具有相同的名称（以及相同的子路径），并且`fileB.LastWriteTime < fileA.LastWriteTime`，否则，如果 .in 中的文件`dirA`不存在于`dirB`.

所以，如果我有这些目录：

```
<directory Name="dirA">

   <file Name="file1" LastWriteTime="10:00" />
   <file Name="file2" LastWriteTime="11:00" />
   <file Name="file7" LastWriteTime="12:00" />

   <directory Name="subDir">
      <file Name="file3" LastWriteTime="10:00" />
      <file Name="file4" LastWriteTime="11:00" />
   </directory>

   <directory Name="subDir2">
      <file Name="file5" LastWriteTime="10:00" />
      <file Name="file6" LastWriteTime="11:00" />
   </directory>

</directory>

<directory Name="dirB">

   <file Name="file1" LastWriteTime="09:00" />
   <file Name="file2" LastWriteTime="13:00" />

   <directory Name="subDir">
      <file Name="file3" LastWriteTime="09:00" />
      <file Name="file4" LastWriteTime="12:00" />
   </directory>

   <directory Name="BsubDir2">
      <file Name="file5" LastWriteTime="09:00" />
   </directory>

</directory> 
```

更新`dirB`后将是：

```
<directory Name="dirB">

   <file Name="file1" LastWriteTime="10:00" />
   <file Name="file2" LastWriteTime="13:00" />
   <file Name="file7" LastWriteTime="12:00" />

   <directory Name="subDir">
      <file Name="file3" LastWriteTime="10:00" />
      <file Name="file4" LastWriteTime="12:00" />
   </directory>

   <directory Name="BsubDir2">
      <file Name="file5" LastWriteTime="09:00" />
   </directory>

   <directory Name="subDir2">
      <file Name="file5" LastWriteTime="10:00" />
      <file Name="file6" LastWriteTime="11:00" />
   </directory>

</directory> 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T23:09:47.267

这里给你一个解决方案。对一些文件进行了尝试和测试，工作正常，但我认为需要更多测试

```
Private Sub UpdateRec(Src As String, Dest As String, IsTest As Boolean)

    ' Update files in dest dir 
    For Each fileSrc As String In Directory.GetFiles(Src)
        Dim srcInfo As New FileInfo(fileSrc)
        Dim destFile As String = Path.Combine(Dest, srcInfo.Name)
        Dim foundFile As Boolean = File.Exists(destFile)
        if foundFile = true then
            Dim destInfo As New FileInfo(destFile)
          ' Copy only if newer 
          If Not IsTest AndAlso destInfo.LastWriteTime < srcInfo.LastWriteTime Then
              File.Copy(srcInfo.FullName, destInfo.FullName, True)
          End If
        else
        'File not found in dest copy always
        If Not IsTest Then File.Copy(srcInfo.FullName, destFile)
        end if
    Next

    ' Update folder in dest
    For Each dirSrc As String In Directory.GetDirectories(Src)
        Dim srcInfo As New DirectoryInfo(dirSrc)
        Dim dstDir As String = Path.Combine(Dest, srcInfo.Name)
        Dim foundDir As Boolean = Directory.Exists(dstDir)
        ' Not found, create 
        if foundDir = false then
         Directory.CreateDirectory(dstDir)
        end if
        ' recurse to copy file and other subdirs
        Call Me.UpdateRec(dirSrc, dstDir, IsTest)
    Next
End Sub 
```

现在该睡觉了。博纳诺特。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T22:22:11.050

简单递归，相对于两个位置的根路径。

这是一般算法。伪鳕鱼。这不会编译。

```
// To copy left-to-right:
void CopyFrom(DirectoryInfo left, DirectoryInfo right) {
    foreach(FileInfo leftFile in left.Files) {
        if( !rightContainsFile( leftFile.Name ) ) {
            leftFile.CopyTo( Path.Combine( right.FullPath, leftFile.Name );
        }//if
    }//foreach

    foreach(DirectoryInfo leftDir in left.Directories) {
        DirectoryInfo rightChild;
        if( (rightChild = rightContainsDirectory( leftDir.Name ) ) == null ) {
            // right does not contain child of the same name
            // so create it
            rightChild = Directory.Create( Path.Combine( right.FullPath, leftChild.Name );
        }
        // recursive copy:
        CopyFrom( leftChild, rightChild );
    } //foreach

}//void 
```

需要一些组装。HTH。

# javascript - Node.js DNS 查找 - 如何设置超时？

> ID：10777657
> 
> 赞同：13
> 
> 时间：2012-05-27T22:13:16.070
> 
> 标签：javascript, node.js, dns

我对 Node.js 很陌生，使用 node.dns.resolveNs 函数时遇到问题。

一些域完全关闭，大约需要一分钟才能得到响应，通常是“queryNs ETIMEOUT”。我有没有办法将其设置为更短的时间，例如 10 秒？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-27T22:45:07.633

我不确定有什么方法可以直接在函数调用上设置超时，但是您可以在调用周围创建一个小包装器来自己处理超时：

```
var dns = require('dns');

var nsLookup = function(domain, timeout, callback) {
  var callbackCalled = false;
  var doCallback = function(err, domains) {
    if (callbackCalled) return;
    callbackCalled = true;
    callback(err, domains);
  };

  setTimeout(function() {
    doCallback(new Error("Timeout exceeded"), null);
  }, timeout);

  dns.resolveNs(domain, doCallback);
};

nsLookup('stackoverflow.com', 1000, function(err, addresses) {
  console.log("Results for stackoverflow.com, timeout 1000:");
  if (err) {
    console.log("Err: " + err);
    return;
  }
  console.log(addresses);
});

nsLookup('stackoverflow.com', 1, function(err, addresses) {
  console.log("Results for stackoverflow.com, timeout 1:");
  if (err) {
    console.log("Err: " + err);
    return;
  }
  console.log(addresses);
}); 
```

上述脚本的输出：

```
Results for stackoverflow.com, timeout 1:
Err: Error: Timeout exceeded
Results for stackoverflow.com, timeout 1000:
[ 'ns1.serverfault.com',
  'ns2.serverfault.com',
  'ns3.serverfault.com' ] 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-07-30T19:00:38.190

Node.js`dns.resolve*`在下面使用 c-ares 库，它原生支持超时和各种其他选项。不幸的是，Node.js 没有公开这些可调参数，但其中一些可以通过`RES_OPTIONS`环境变量设置。

例子：`RES_OPTIONS='ndots:3 retrans:1000 retry:3 rotate' node server.js`

*   `ndots`: 与 ARES_OPT_NDOTS 相同
*   `retrans`: 与 ARES_OPT_TIMEOUTMS 相同
*   `retry`: 与 ARES_OPT_TRIES 相同
*   `rotate`: 与 ARES_OPT_ROTATE 相同

有关每个选项的含义的详细信息，请参见 man ares_init_options(3)，例如这里[http://manpages.ubuntu.com/manpages/zesty/man3/ares_init_options.3.html](http://manpages.ubuntu.com/manpages/zesty/man3/ares_init_options.3.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-25T17:19:55.427

也很高兴知道查找[可能会阻止您的应用程序](https://stackoverflow.com/questions/40985367/node-js-dns-resolve-vs-dns-lookup)。

我们开发了一个替换/扩展节点`dns.lookup`方法的模块。主要目标是绕过线程池阻塞问题。所以模块缓存响应，具有多记录解析和 TTL 支持。此外，我们还有[100% 覆盖率的良好单元和功能测试](https://coveralls.io/github/LCMApps/dns-lookup-cache?branch=master)。模块在生产和高负载环境中进行了测试。在麻省理工学院许可下。

这是：[https ://github.com/LCMApps/dns-lookup-cache](https://github.com/LCMApps/dns-lookup-cache)

我相信它可能会有所帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-12T14:43:34.117

基于@redbaron 的回答，您可以在运行时设置 RES_OPTIONS 变量，以设置以下所使用的 c-ares 库的超时`dns.resolve*`：

```
// this will timeout for (1000 * 3 * 2) ms
process.env.RES_OPTIONS='ndots:3 retrans:1000 retry:3 rotate'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-06T16:38:08.430

具有超时的 resolveNs 包装器：

```
const dns = require("dns");

const nsLookup = (domain, timeout) => {
  return new Promise((resolve, reject) => {
    let finished = false;

    const timer = setTimeout(()=>{
      finished = true; 
      reject();
    }, timeout);

    const callback = (_err, result) => {
      clearTimeout(timer);
      if (!finished) resolve(result);
    };

    dns.resolveNs(domain, callback);  
  });
}; 
```

# tcp - HttpWebRequest - 重用 TCP 连接

> ID：10777658
> 
> 赞同：2
> 
> 时间：2012-05-27T22:13:21.673
> 
> 标签：tcp, httpwebrequest, connection

我正在按照您的意图使用 HttpWebRequest：在我完成响应后处理响应，希望这会使其重用任何可用的 TCP 连接，但事实并非如此：它在之后关闭连接收到响应。我在使用 TCPView 时看到了这种情况。

这是我的 HttpWebRequest 代码：

```
 private HttpWebResponse ExecuteRequest(String baseRelativeUri, String method, Ds postValues) {

        /////////////////////////////////////////
        // Set-up

        Uri uri = new Uri( _baseUri, baseRelativeUri );

        _cookies.ProcessDomains();

        HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create( uri );
        request.CookieContainer = _cookies;
        request.Method          = method;
        request.UserAgent       = "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0";

        if( postValues != null ) SetPostContent( request, postValues );

        /////////////////////////////////////////
        // Response

        return (HttpWebResponse)request.GetResponse();
    }

    protected HtmlDocument ExecuteRequestHtml(String baseRelativeUri, String method, Ds postValues, HttpStatusCode expectedStatusCode) {

        using(HttpWebResponse response = ExecuteRequest(baseRelativeUri, method, postValues)) {

            if( response.StatusCode != expectedStatusCode ) throw new WebException("Did not receive " + expectedStatusCode + " response.");

            /////////////////////////////////////////
            // HtmlDocument

            using(Stream stream = response.GetResponseStream()) {

                HtmlDocument doc = new HtmlDocument();
                doc.Load( stream );
                return doc;
            }
        }
    } 
```

根据 MSDN，HttpWebRequest.KeepAlive 属性默认为 true，HttpWebRequest.Pipelines 也是如此。那么我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T22:27:54.953

事实证明，我遇到了 HttpWebRequest 尊重的“每个主机 2 个同时连接”规则。

解决方案是设置这个静态属性：

```
System.Net.ServicePointManager.DefaultConnectionLimit = 15; 
```

排序:)

# javascript - 我可以将文本切换为消失，但无法显示超链接文本

> ID：10777659
> 
> 赞同：1
> 
> 时间：2012-05-27T22:13:22.640
> 
> 标签：javascript, jquery, html

尝试通过单击超链接来更改按钮的可见性以及超链接的文本。

我有按钮出现/消失，但我无法更改超链接的文本。

没有错误消息，但链接文本没有变化。

知道有什么问题吗？（或如何更好地诊断）。

```
<html>
<head>
<script src="jquery.js"></script>
<script>
  $(document).ready(function(){ 
    $('#button-selector').click (function(e) {
      e.preventDefault(); 
      $('#buttons').toggleClass('hidden'); 
      $('#button_toggle').toggle(function() { 
        $('a#button_selector').text('Show Buttons'); 
      }, function() {
        $('a#button_selector').text('Hide Buttons'); 
      });
    });
  });
</script>
<style>
  .small-text {font-size: x-small}
  .medium-text {font-size: small}
  .large-text {font-size: medium}
  #buttons.hidden {display: none}
  #buttons.shown {display: normal}
  #button_toggle {padding: 1em;}
</style>
</head>
<body>
  <div id="button_toggle"><a href="" id="button-selector">Hide buttons</a></div>
  <div id="buttons">
    <button id="small-text">Small</button>
    <button id="medium-text">Medium</button>
    <button id="large-text">Large</button>
  </div>
</body>
</head> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T22:18:00.787

您可以将新文本基于`#buttons`元素的可见性。

```
$('#button-selector').on("click", function(e) {
  e.preventDefault(); 
  $('#buttons').toggle(0,function(){
    $(e.target).text(function(){
      return $("#buttons").is(":visible") ? "Hide buttons" : "Show buttons" ;
    });
  });
});​ 
```

小提琴：http: [//jsfiddle.net/wmn7C/](http://jsfiddle.net/wmn7C/)

# groovy - 如何让 Jenkins/Hudson 的工作监视其他一些工作并决定是否构建？

> ID：10777663
> 
> 赞同：11
> 
> 时间：2012-05-27T22:14:05.483
> 
> 标签：groovy, hudson, jenkins, hudson-plugins, jenkins-plugins

**问题**

鉴于所有作业`LEVEL_X`的作业名称中都有字符串，其中 X 是一个 > 1 的数字。我希望 X = n 的每个作业都使用 监视每个作业`X = n-1`，如果每个作业都成功完成，则开始构建。我希望这项工作以`X = n`1 分钟的间隔监视其他工作。

首先，我有兴趣知道最好的方法是什么，其次我想要一个解决方案，如果可以通过一个小脚本来实现，也许是一个可以`system groovy script`使用 GROOVY PLUGIN 运行的 groovy 脚本。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-05-28T08:56:00.100

以下是一些提示和代码片段：

*   有一个 Groovy 脚本控制台`http://<jenkins-server>/script`可以帮助您调试脚本。
*   这是[Jenkins Java API](http://javadoc.jenkins-ci.org/)的链接。
*   输出所有作业名称的代码片段：

    ```
    def hi = hudson.model.Hudson.instance
       hi.getItems(hudson.model.Project).each {project ->
       println(project.displayName)
    } 
    ```

*   `n`从中提取的代码片段`LEVEL_n`（作为闭包实现）：

    ```
    def level = { name ->
      def ret = 0
      name.eachMatch(~'LEVEL_([1-9]+[0-9*])', {ret = it[1].toInteger()})
      return ret
    } 
    ```

*   获取所有最新版本状态的代码片段：

    ```
    def hi = hudson.model.Hudson.instance
    hi.getItems(hudson.model.Project).each {project ->
      println(project.lastBuild.result)
    } 
    ```

*   链接到[启动构建](http://javadoc.jenkins-ci.org/hudson/model/AbstractProject.html#scheduleBuild%28int,%20hudson.model.Cause)的方法。

注意：如果您使用的是 Matrix 构建，事情会变得有点棘手。但只要你不这样做就足够了。

# java - 有没有办法在不使用递归的情况下比较列表中相对位置内的项目？

> ID：10777664
> 
> 赞同：0
> 
> 时间：2012-05-27T22:14:26.023
> 
> 标签：java, list, compare

例如，假设我有`[7, 11, 0, 2]`，我想比较 7 和 2，然后比较 11 和 0。

到目前为止，我有两种方法可以通过在这样的语句中输入位置来做到这一点： `list[0] > list[list.length-1]`那么`list[1] > list[list.length-2]`，随着列表变大，我显然不想手动输入所有这些。我尝试测试如何做到这一点的另一种方法是使用递归，但因为我的程序已经在递归中运行，我发现它有点令人困惑..所以是否可以在不使用递归的情况下动态比较项目？

列表大小在程序的生命周期内总是均匀且固定的。有任何想法吗？

注意：如果我得到这个想法，我可以自己实现它，但具体来说，我正在做的是比较每个相对项目是否大于另一个，如果它们相等，那么我比较下一个项目。例如，[1,5,3,1,5,1]，我会比较 1 和 1，因为它们相同，所以我会比较 5 和 5，因为它们相同，所以我会比较 3 和 1 . 不知道是否有非递归的方式来做到这一点，但我想我会尝试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T22:17:52.217

```
for(int i=0;i<list.length/2;i++){
    if(list[i]>list[list.length-1-i]){
        //do stuff
    }
} 
```

在检查字符串中的回文时，我必须做类似的事情

# ruby-on-rails - 如何对这些可以相互转换但具有不同关联的对象类型进行建模

> ID：10777671
> 
> 赞同：0
> 
> 时间：2012-05-27T22:15:06.773
> 
> 标签：ruby-on-rails, ruby-on-rails-3, database-design, activerecord, model

我目前有两个模型作为 STI。

```
class Event
class BlockedTime < Event
class Appointment < Event 
```

这些模型是相似的，除了 'Appointment' has_one 'client' 和 has_one 'service'，而 'BlockedTime' 没有这些关联。

此外，我希望能够轻松地在这两种类型之间进行转换，当我搜索时，我通常会同时搜索两种类型，而不是其中一种。出于这些原因，我犹豫将它们分成单独的表格。

为了在类型之间切换，我目前以相同的形式执行此操作，使用父“事件”类型，并将“类型”存储为隐藏字段，但这绝对不是很好。我必须在控制器中进行各种转换以检查验证等。

你会如何推荐这个建模？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T22:58:12.160

所以，如果我遇到这个问题，我可能会对数据库进行不同的建模。

我会使用**组合**模式，而不是**STI/继承**模式。所以：

 **```
class Appointment
  belongs_to :block_time, :class_name => "BlockTime"
  ...
end

class BlockTime
   has_one :appointment
   accepts_nested_attributes_for :appointment, :allow_destroy => :true, 
                                               :reject_if => :all_blank

  ...
end 
```

**控制器**

```
class AppointmentsController < ApplicationController
  ...

  def new
    @block_time = BlockTime.new
    @block_time.appointment or @block_time.build_appointment
    ...
  end

  def edit
    @block_time = BlockTime.includes(:appointment).find(params[:id])
    @block_time.appointment or @block_time.build_appointment
  end

  ...
end 
```

**表格**或表格的至少一部分

```
<%= f.fields_for :appointment do |g| %>
  <div>
    <%= g.radio_button :_destroy, "1", :checked => !g.object.persisted? %>
    <%= g.label :_destroy_1, "Has no Appointment" %>

    <%= g.radio_button :_destroy, "0", :checked => g.object.persisted? %>
    <%= g.label :_destroy_0, "Has Appointment" %>
  </div>

  <p>
    Client: <%= g.text_field :client %>
  </p>
<% end %> 
```

这部分表单用于`persisted?`检查`Appointment`对象是新记录还是已持久化到数据库中。然后，如果它已经存在并且您想将其删除，那么它将抛出`_destroy`标志`accepts_nested_attributes_for`并删除现有`appointment`关联以使其成为 free `BlockTime`。

然后您也可以`Appointment`在此表单中包含所有字段。*您可能想根据`radio_button`选择编写一些 javascript 来禁用/启用字段***

# java - 从基本服务器向特定客户端发送消息

> ID：10777678
> 
> 赞同：3
> 
> 时间：2012-05-27T22:17:13.493
> 
> 标签：java, android, sockets, serversocket

我有两个 wifi 模块 M1 和 M2 连接到我的接入点。我有一部连接到同一个接入点的安卓手机。我的 android 手机上有一个套接字服务器，两个模块作为客户端加入服务器。现在我的问题是，是否可以从我的手机向模块 M1 发送字符串消息，而无需向 M2 发送任何内容。我想在要发送消息的客户端之间进行选择。在Java中甚至可能吗？

好的，这就去。

```
//setting up server
ServerSocket serverSocket = new ServerSocket(8000, 0, IPaddress);

//creating a client socket to accept it
Socket clientSocket = serverSocket.accept(); 
```

`accept()`现在，我在一个单独的线程中接受客户端，这样主线程就不会因为函数阻塞而冻结。

我不知道每次新客户端连接时如何创建一个新线程。另外我不知道如何限制可以连接的客户端数量。我最多需要 5 个客户，仅此而已。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T22:37:09.463

是的，有可能。您需要维护与每个客户端的单独连接。该类`ServerSocket`有一个`accept()`返回`Socket`对象的函数。该对象表示两点之间的连接，即您的服务器和一个客户端。您可以`ServerSocket.accept()`在一个循环中多次调用以接受所有传入连接。返回的每个`Socket`对象都将用于不同的客户端。

为了让服务器向特定的客户端发送消息，它需要知道哪个套接字属于哪个客户端，因此客户端必须向服务器发送一些标识自己的消息，服务器需要读取和解释那条消息。然后它可以针对该特定客户端以适当的响应进行响应。

如果您仍然遇到问题，请发布您的代码。

**更新**，因为您在问题中添加了代码：请参阅有关创建线程的[Android 文档。](https://developer.android.com/reference/java/lang/Thread.html)除了stackoverflow上的这篇文章之外，这将是很多阅读内容。

至于接受连接和启动线程，只需循环执行即可：

```
for(int i = 0; i<5; i++){
    clientSocket = serverSocket.accept();
    // start a new thread, passing it the clientSocket as an argument
} 
```

其他可能有用的链接： [https ://developer.android.com/resources/articles/painless-threading.html](https://developer.android.com/resources/articles/painless-threading.html) [https://developer.android.com/guide/topics/fundamentals/processes-and-threads.html](https://developer.android.com/guide/topics/fundamentals/processes-and-threads.html)

# java - 仅在方法期间激活 JProgressBar

> ID：10777679
> 
> 赞同：0
> 
> 时间：2012-05-27T22:17:39.673
> 
> 标签：java, swing, progress-bar, jprogressbar

我在使用`JProgressBar`. 我有一个可能需要一些时间的功能，并且我想要在执行该功能时处于不确定模式的进度条。我有一个激活此功能的按钮，我`setIndeterminate(true)`在调用该功能之前尝试过，之后，`setIndeterminate(false)`我没有让进度条在任何时候移动。

我有这个代码：

```
 progBar.setIndeterminate(true);
        //delay(12);
        //this.setEnabled(false);
        Executor executor = java.util.concurrent.Executors.newSingleThreadExecutor();
        executor.execute(new Runnable() {@Override
            public void run() {
                    function1();

            }});

        //progBar.setIndeterminate(false);
        //progBar.setVisible(false);
        System.out.println("End Function");
        //-........................
    } 
```

也试过`function1()`没有任何新的执行者。如果我不评论该行`setIndeterminate(false)`，进度条不会启动，但如果我评论它，它总是处于不确定模式。

请注意，我使用 Netbeans IDE 来设计一些 GUI，但我自己编写大部分内容（仅使用 NetBeans GUI 进行定位）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T22:28:02.507

您可能应该移动此代码：

```
progBar.setIndeterminate(false);
progBar.setVisible(false); 
```

`SwingUtilities.invokeLater()`调用后进入一个块`function1()`。

它现在的设置方式将在`setIndeterminate(true)`调用后立即执行 - 该`execute()`方法不会阻塞。

例如：

```
executor.execute(new Runnable() {
        @Override
        public void run() {
                function1();
                // now fix the progress bar
                SwingUtilities.invokeLater(new Runnable() {
                    progBar.setIndeterminate(false);
                    progBar.setVisible(false);
                });
        }}); 
```

# jquery - 没有内容重排的jQuery动画宽度？

> ID：10777683
> 
> 赞同：2
> 
> 时间：2012-05-27T22:18:20.577
> 
> 标签：jquery, dom, reflow

我在这里搜索并搜索了几个小时，但还没有找到解决这个问题的方法......基本上，我有一个巨大的图标列表，一旦每个列表项悬停，它就会展开以显示项目的文本名称. 但是，在为宽度设置动画后，整个文档将被迫重排。

有没有办法解决？我已经尝试了所有我能想到的 jQuery 和 css 组合，但都无济于事。一旦悬停在基于 jQuery position() 的位置上，我尝试添加绝对定位（相对于父 UL）......但是，这并没有像我希望的那样工作。

我真的很希望能够悬停每个图标，让它展开以显示文本，而不是重排其余内容，只是像它处于固定位置一样，因此不与其余部分交互内容布局。

这是动画位：

```
 $('.service-generator li').hover(function() {
    var labelWidth = $(this).children('label').width() + 41;
    $(this).animate({width: labelWidth + 'px'}, 180);
  },
  function() {
    $(this).animate({width: '35px'}, 180);
  }); 
```

另外，我想实际标记的视图可能会有所帮助，所以在这里：

```
<ul class="service-generator">
  <li id="[service-name]" class="full-service-wrapper photo">
    <label class="icon-name" for="[service-name]-checkbox">[service-name]</label>
    <div class="icon-wrapper">
      <input type="checkbox" checked="checked" name="[service-name]" id="[service-name]-checkbox"><img alt="[service-name]" title="[service-name]" src="[service-name].ico">
    </div>
  </li>
</ul> 
```

这是显示结果的图像： ![在此处输入图像描述](../Images/d0f0eb7c01a03148b596115b4d0d1090.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T22:23:34.403

做到这一点的方法是让你的灰色圆形边框 div 容器绝对定位在 li 标签内，位置相对。然后，在它们悬停时调整绝对定位的灰色边框 div 的宽度。您还可能需要在 mouseover/mouseout 上调整 z-indexes 以控制重叠。

# javascript - 如何仅将 querySelectorAll 用于具有特定属性集的元素？

> ID：10777684
> 
> 赞同：162
> 
> 时间：2012-05-27T22:18:36.677
> 
> 标签：javascript, css-selectors, selectors-api

我正在尝试`document.querySelectorAll`用于所有`value`设置了属性的复选框。

页面上还有其他未`value`设置的复选框，每个复选框的值不同。id 和名称不是唯一的。

例子： `<input type="checkbox" id="c2" name="c2" value="DE039230952"/>`

如何只选择那些设置了值的复选框？

* * *

## 回答 #1

> 赞同：293
> 
> 时间：2012-05-27T22:39:47.140

你可以`querySelectorAll()`这样使用：

```
var test = document.querySelectorAll('input[value][type="checkbox"]:not([value=""])'); 
```

这转化为：

> 获取具有属性“值”的所有输入，并且具有非空白的属性“值”。

[在此演示](http://jsfiddle.net/mfm2G/1/)中，它禁用了具有非空白值的复选框。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2019-05-27T14:58:02.813

用你的例子：

```
<input type="checkbox" id="c2" name="c2" value="DE039230952"/> 
```

在示例中将 $$ 替换为 document.querySelectorAll：

```
$$('input') //Every input
$$('[id]') //Every element with id
$$('[id="c2"]') //Every element with id="c2"
$$('input,[id]') //Every input + every element with id
$$('input[id]') //Every input including id
$$('input[id="c2"]') //Every input including id="c2"
$$('input#c2') //Every input including id="c2" (same as above)
$$('input#c2[value="DE039230952"]') //Every input including id="c2" and value="DE039230952"
$$('input#c2[value^="DE039"]') //Every input including id="c2" and value has content starting with DE039
$$('input#c2[value$="0952"]') //Every input including id="c2" and value has content ending with 0952
$$('input#c2[value*="39230"]') //Every input including id="c2" and value has content including 39230 
```

直接使用示例：

```
const $$ = document.querySelectorAll.bind(document); 
```

一些补充：

```
$$(.) //The same as $([class])
$$(div > input) //div is parent tag to input
document.querySelector() //equals to $$()[0] or $() 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2014-03-10T22:28:59.077

**额外提示：**

多个“nots”，未隐藏且未禁用的输入：

```
:not([type="hidden"]):not([disabled]) 
```

你也知道你可以这样做：

```
node.parentNode.querySelectorAll('div'); 
```

这相当于 jQuery 的：

```
$(node).parent().find('div'); 
```

这将有效地递归地找到“节点”及以下的所有div，HOT DAMN！

# nosql - 如何判断 Cassandra 是否秒。索引负担过重？

> ID：10777692
> 
> 赞同：1
> 
> 时间：2012-05-27T22:20:47.073
> 
> 标签：nosql, cassandra

在将总数据从 ~2MB 增加到约 460MB 后，我遇到了 Cassandra 查询超时的问题。

我提出了一些问题，这些问题甚至需要 6 分钟才能解决。那是在我`rpc_timeout_in_ms: 1000`在两个节点上设置之后。我这样做是因为我认为超时可能与 `get_indexed_slices`查询已用尽而一无所获有关。

现在每行最多有 10 列，ea 中只有 4 个字节。上校

查询基本上是 `min_val < my_column AND my_column < max_val AND dummy_col = 0`

我有两个带有复制因子 =2 的 Amazon Datastax AMI 节点。

这是我的部分 `nodetool cfstats`输出。

```
$ nodetool cfstats -h localhost
Keyspace: Keyspace1
    Read Count: 12403801
    Read Latency: 0.08655620273172715 ms.
    Write Count: 1500181
    Write Latency: 0.12406482817739993 ms.
    Pending Tasks: 0
            Column Family: col_family
            SSTable count: 3
            Space used (live): 488592615
            Space used (total): 488592615
            Number of Keys (estimate): 1454976
            Memtable Columns Count: 0
            Memtable Data Size: 0
            Memtable Switch Count: 26
            Read Count: 12403801
            Read Latency: NaN ms.
            Write Count: 1500181
            Write Latency: NaN ms.
            Pending Tasks: 0
            Bloom Filter False Postives: 10879
            Bloom Filter False Ratio: 0.00000
            Bloom Filter Space Used: 2731728
            Key cache capacity: 200000
            Key cache size: 200000
            Key cache hit rate: NaN
            Row cache: disabled
            Compacted row minimum size: 180
            Compacted row maximum size: 310
            Compacted row mean size: 310 
```

**更新**

有帮助的一件事是我试图确保我的行键是连续的。之前，我的行键是以毫秒为单位的时间戳。这些非常稀少。

我没有计算确切的改进，但它很明显。

# php - SVN 相对路径外部

> ID：10777694
> 
> 赞同：1
> 
> 时间：2012-05-27T22:21:14.480
> 
> 标签：php, svn, version-control, repository, versioning

我有一个我用 php 编写的工具库和一个将使用它们的应用程序代码库。当我检查它们时，我希望这两个文件夹最终处于同一级别。我试图通过将应用程序文件夹的 svn:externals 属性设置为

```
../toolkit http://(toolkit repo url)/ 
```

但显然它不能用相对路径来做到这一点。我不希望工具包文件夹位于应用程序文件夹中，我希望它们在同一级别但做

```
toolkit http://(toolkit repo url)/ 
```

将工具包放在应用程序文件夹中。任何人都知道我怎么能在这里做我想做的事情？（如果重要，我是从命令行执行此操作，而不是破坏 svn 或其他程序）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T23:23:57.027

如果我理解正确，那么您希望在添加`svn:externals`属性后实现以下文件夹结构：

> ```
> C:\SvnCheckouts\MyApplication\
>                               src\
>                               toolkit\ 
> ```

...`toolkit\`由于外部而被添加。在这种情况下，您应该将外部文件添加到`MyApplication\`文件夹中。

如果您尝试将外部添加到`src\`文件夹中，那么您就不走运了，因为尽管以下是有效的外部定义...

> `http://(toolkit repo url)/ ..\toolkit`

... SVN 将去除斜线并在`src\`named中创建一个文件夹`..toolkit`（请注意，根据最佳实践，我已将 URL 放在预期的外部文件夹的名称之前）。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T00:02:25.860

我发现我正在尝试做的事情在 SVN 1.6 中是完全合法的，但我试图在 SVN 1.4 中做到这一点，所以我所要做的就是升级到较新的版本。

# php - 年份倒序

> ID：10777696
> 
> 赞同：-2
> 
> 时间：2012-05-27T22:21:40.270
> 
> 标签：php

我正在尝试将 array_reverse 函数实现到这个 foreach 数组中，我相信我在第 3 行调用了错误的变量（嗯，4）

```
<?php
    $j=1;
    $skill_slugs = array_reverse( $skill_slugs );

    foreach ($skills as $skill) {               
        $skill = get_term_by( 'slug', trim(htmlentities($skill)), 'skill');
        if($skill) {
            $skill_slug = $skill->slug;             
            $skill_slugs .= $skill_slug . ",";
            $a = '<li><a href="#" data-filter=".'.$skill_slug.'">';
            $a .= $skill->name;                 
            $a .= '</a></li>';
            echo $a;
            echo "\n";
            $j++;
        }         
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T22:24:07.773

如果您想循环遍历新反转的数组...

```
foreach ($skills as $skill) 
```

应该

```
foreach ($skill_slugs as $skill) 
```

### 更新

```
// This array is populated within the if-block below
$slugs = array();

// Foreach item in the reversed array, assign a handle of "skill_slug"
foreach ( array_reverse( $skill_slugs ) as $skill_slug ) {

  // Attempt to get Term Data from WordPress
  $s = get_term_by( 'slug', trim(htmlentities($skill_slug)), 'skill' );

  // If Term Data was returned, increment $j and proceed
  if ( $s && $j++ ) {

    // Push Term slug into our $slugs array
    array_push( $slugs, $s->slug );

    // Output a new list-item for this Term
    printf("<li><a href='#' data-filter='%s'>%s</a></li>", $s->slug, $s->name);

  }

} 
```

您为每个变量选择的名称在这里有很多令人困惑的歧义。我想在这里稍微解释一下。此外，您不需要这么多`echo`语句，因此我将其简化为单个格式化字符串。最后，我将你的 slug 推到一个数组上，而不是将它们连接到一个字符串上。如果您想用逗号将它们列出来，请使用`join()`：

```
$slugs = array( "PHP", "JavaScript", "C#" );

// PHP, JavaScript, C#
echo join( ", ", $slugs ); 
```

# c++ - 何时从 C++ 中的堆中删除对象？

> ID：10777700
> 
> 赞同：1
> 
> 时间：2012-05-27T22:22:28.223
> 
> 标签：c++

我有点困惑何时/如何从 C++ 中的堆中删除对象。

什么时候：

如果您正在执行一个相对较短的程序，计算一些东西然后将标准输出传递到控制台，是否值得在控制台输出结果后立即销毁所有对象，或者程序会在退出时自动销毁？对于大型程序，我认为当您不再需要任何对象时尝试解决肯定是更好的做法？

如何：

如果我有一个包含指向 MyClass 对象的指针的向量，一旦我完成了向量（和 MyClass 对象），我该如何编写一个析构函数来破坏向量指向的所有 MyClass 对象？（显然我也需要销毁向量）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T22:53:36.413

这是一个非常简单的契约——所有编程中最简单的契约之一：**如果你分配一个资源，你就向 API 承诺你会适当地释放它。**

不这样做*会*产生不良后果。从浪费堆空间到咀嚼你内脏的[鼻恶魔。](http://www.catb.org/jargon/html/N/nasal-demons.html)

事实是，根本没有理由不释放您请求的资源。不这样做是草率的，我认为这表明代码质量通常很差（因为它*是*！）。

此外，C++ 使不必做出这个决定变得非常容易：只要不产生垃圾，就不需要清理。不要分配 freestore 内存，或者如果你绝对必须使用智能指针或特殊分配器来管理它。

如果您正确使用 C++，就没有令人信服的技术理由来草率使用资源，并且有足够的动力去关注。

至于“如何”，我首先质疑存储指针的决定：原始 C++ 指针不应该拥有内存。如果您确实需要 freestore 内存，请使用智能指针，或者（最好）使用自动对象：因为它们位于向量中，这已经为您提供了所有权和存储位置，并且向量类会自动处理该内存。

如果您需要多态对象，不幸的是您*需要*存储指针。在这种情况下，有几种可能性，但最简单的可能是使用智能指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T22:31:42.900

如果您在使用完对象后没有销毁它们，那么您将面临内存/资源泄漏。如果你失去了对物体的追踪，那么你就有了泄漏。

这是长时间运行的程序中的一个问题，因为您可能会耗尽内存或资源。如果没有正确跟踪对象，这在任何程序中都是一个不好的迹象。你创造了这个物体，为什么你不能也摧毁它？

大多数（每个？）操作系统都会在进程退出时从进程中回收分配的内存，因此您不需要自己整理。在某些情况下，避免这种毫无意义的整理可能意味着您的用户在您的流程完成时不会等待太久。

如果您的程序的行为是这样的，它会使您的代码无法重用。如果你想将它打包到一个库中，你将不得不处理这个问题，因为你无法提前知道你的库将如何被使用。

至于您的指针向量：迭代向量并在每个指针上调用 delete 。然后销毁向量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T23:10:27.743

> 如何编写一个可以销毁向量指向的所有 MyClass 对象的析构函数？

非常好的问题！具有这种析构函数的类称为*智能指针*，它们由 Boost、TR1 和 C++11 标准库等库提供，其中至少一个可能随您的平台提供。

你几乎不应该`new T`直接使用。用于[`unique_ptr<T>`](http://en.cppreference.com/w/cpp/memory/unique_ptr)直接所有权（当且仅当向量仍然存在时，对象仍然存在）或[`shared_ptr<T>`](http://en.cppreference.com/w/cpp/memory/shared_ptr)共享所有权。这些模板存在于 namespace `boost::`、`std::tr1::`或`std::`取决于您如何获取它们。在任何情况下，接口都大致相同。

当然，如果可以避免的话，你根本不应该使用任何类型的指针。`vector<T>`比`vector< unique_ptr< T > >`任何一天都好。

至于退出前*是否*释放资源，当然应该。良好的 C++ 实践使得忽视释放资源比正确做事更难，所以这并不是我们真正担心的事情。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-05-27T22:28:21.430

对于短期运行的程序，可以不删除对象。没有不良后果。

但是设计良好的应用程序代码是可重用的，而可重用的代码基本上是库代码。库代码应该删除它分配的对象，因为它可能在长时间运行的程序中使用。

所以换句话说，对于一个扔掉的小程序，不用担心。但是对于严肃的代码，删除对象而不是泄漏它们。

# java - 收藏和收藏有什么区别

> ID：10777701
> 
> 赞同：24
> 
> 时间：2012-05-27T22:22:54.217
> 
> 标签：java, generics, collections, types, unbounded-wildcard

我主要是一名 C# 开发人员，我正在向我的朋友教授数据结构，他们在大学里使用 Java，我在 Java 中看到了这样的表达：

```
void printCollection(Collection<?> c) {
    for (Object e : c) {
        System.out.println(e);
    }
} 
```

`Collection<T>`我在 C# 中没有见过这样的东西，所以我想知道 Java和Java 有什么区别`Collection<?>`？

```
void printCollection(Collection<T> c) {
    for (Object e : c) {
        System.out.println(e);
    }
} 
```

我认为它也可以用上面的方式编写。文档中的那个人正在比较`Collection<Object>`，`Collection<T>`尽管如此。

示例取自[http://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html](http://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-27T23:07:15.303

`Collection<?>`是未知类型参数的集合。

就调用者而言，两者之间没有区别

```
void printCollection(Collection<?> c) { ... } 
```

和

```
<T> void printCollection(Collection<T> c) { ... } 
```

但是，后者允许实现引用集合的类型参数，因此通常是首选。

存在前一种语法是因为并不总是可以在适当的范围内引入类型参数。例如，考虑：

```
List<Set<?>> sets = new ArrayList<>();
sets.add(new HashSet<String>());
sets.add(new HashSet<Integer>()); 
```

如果我`?`用某个类型参数替换`T`，所有集合都`sets`将被限制为相同的组件类型，即我不能再将具有不同元素类型的集合放入同一个列表中，以下尝试证明了这一点：

```
class C<T extends String> {
    List<Set<T>> sets = new ArrayList<>();

    public C() {
        sets.add(new HashSet<String>()); // does not compile
        sets.add(new HashSet<Integer>()); // does not compile
    }
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-27T22:25:58.770

声明`Collection<?>`（发音为“未知集合”）是一个集合，其元素类型匹配任何东西，而`Collection<T>`代表一个类型的集合`T`。

像往常一样，Angelika Langer 的[泛型常见问题解答](http://www.angelikalanger.com/GenericsFAQ/FAQSections/TypeArguments.html#Topic2)对该主题进行了广泛的讨论，这是完全理解 Java 中泛型的必读内容，尤其是无界通配符（这个问题的主题）。引用常见问题解答：

> 无界通配符看起来像“？”，代表所有类型的家族。无界通配符用作泛型类型实例化的参数。无界通配符在不需要了解参数化类型的类型参数的情况下很有用

有关更多技术细节，请查看[Java 语言规范的](http://docs.oracle.com/javase/specs/jls/se7/html)[§4.5.1 Type Arguments and Wildcards](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.5.1)部分，其中指出：

> 类型参数可以是引用类型或通配符。通配符在只需要部分了解类型参数的情况下很有用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-27T22:28:57.500

和`Collection<T>`你一起做

```
void printCollection(Collection<T> c) {
    for (T e : c) {
        System.out.println(e);
    }
} 
```

`Collection<?>`你只知道集合包含对象。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-27T23:52:33.093

使用无界通配符 (?) 的那个实际上意味着`? extends Object`（任何扩展 Object 的东西）。

在 Java 中，这意味着只读性质，即允许我们从通用结构中读取项目，但不允许将任何内容放回其中，因为我们无法确定其中元素的实际类型它。

因此，我敢说在所`printCollection`讨论的方法中这是一种非常有效的方法，至少在我们遇到需要假设类型的情况之前。

如果必须在两者之间进行选择，我会说第二个（带有类型参数 T）是一种更简洁的方法，因为您至少可以假设集合具有某种类型`T`，并且在某些情况下可以证明是有用的。

例如，如果 Collection 需要同步，我可以简单地做：

```
<T> void printCollection(Collection<T> c) {
    List<T> copy = new ArrayList<T>();
    synchronized(c) {
        copy.addAll(c);
    }
    for (T e : copy) {
        System.out.println(e);
    }
} 
```

我非常轻松地创建了一个新的 type 集合`T`，并将原始集合的所有元素复制到第二个集合中。我可以这样做，因为我可以假设集合的类型是`T`，而不是`?`。

当然，我可以用第一种方法（使用无界通配符）做同样的事情，但它不是那么干净，我不得不假设集合的类型是对象，而不是`?`（不能有效地用作类型参数：）~~`new ArrayList<?>()`~~。

```
void printCollection(Collection<?> c) {
    List<Object> copy = new ArrayList<Object>();
    synchronized(c) {
        copy.addAll(c);
    }
    for (Object e : copy) {
        System.out.println(e);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-11T03:02:39.273

我非常轻松地创建了一个 T 类型的新集合，并将原始集合的所有元素复制到第二个集合中。我可以这样做，因为我可以假设集合的类型是 T，而不是 ?。

当然，我可以用第一种方法（使用 ubounded 通配符）做同样的事情，但它不是那么干净，我不得不假设 Collection 的类型是 Object，而不是 ? （不能有效地用作类型参数：new ArrayList<?>()）。

# java - JTable 中没有捕获复选框值

> ID：10777704
> 
> 赞同：-1
> 
> 时间：2012-05-27T22:23:56.917
> 
> 标签：java, swing, jtable

这是代码....

```
String Columnas[] = {"Rol","Asignado"};
modeloTabla= new DefaultTableModel(null,Columnas);          
objSAP = new SAPFunctionCall();
try {
    rolese = objSAP.listaRoles();
    modeloTabla.setNumRows(rolese.size());

    for (int i=0; i<rolese.size(); i++){
        for(int j=0; j<1; j++){
            modeloTabla.setValueAt(((BeanRol)rolese.get(i)).getStrNomRol(), i, j);
            modeloTabla.setValueAt(Boolean.FALSE, i, j+1);
        }
    }       
}
catch (Exception e) {
    e.printStackTrace();                    
}       

tblRol = new JTable();      
tblRol.setModel(modeloTabla);

tblRol.getColumnModel().getColumn(1).setCellEditor(new CheckBoxCellEditor());
tblRol.getColumnModel().getColumn(1).setCellRenderer(new CWCheckBoxRenderer()); 
```

现在，当我想捕获复选框的值时...例如第 0 行第 1 列...

```
Object obj;
Boolean bol;
obj = modeloTabla.getValueAt(0, 1);

if (obj instanceof Boolean) {
    bol = (Boolean) obj;

if (bol == true)
    System.out.print("SELECTED");
else
    System.out.print("NO SELECTED");

} 
```

现在作为附件 I 附加了这两个类....

```
public class CheckBoxCellEditor extends AbstractCellEditor implements TableCellEditor {
    private static final long serialVersionUID = 1L;
    protected JCheckBox checkBox;       

    public CheckBoxCellEditor() {
        checkBox = new JCheckBox();
        checkBox.setHorizontalAlignment(SwingConstants.CENTER);
        checkBox.setBackground(Color.white);            
    }

    public Component getTableCellEditorComponent(
        JTable table,Object value,boolean isSelected,int row,int column) {
        checkBox.setSelected(((Boolean) value).booleanValue());
        return checkBox;
    }         

    public Object getCellEditorValue() {
        return Boolean.valueOf(checkBox.isSelected());
    }
}

public class CWCheckBoxRenderer extends JCheckBox implements TableCellRenderer {
    private static final long serialVersionUID = 1L;

    public CWCheckBoxRenderer() {
        super();
        setOpaque(true);
        setHorizontalAlignment(SwingConstants.CENTER);
    }

    public Component getTableCellRendererComponent(JTable table,Object value,boolean isSelected,boolean hasFocus,int row,int column) {
        if (value instanceof Boolean) {
            setSelected(((Boolean)value).booleanValue()); 
            setEnabled(table.isCellEditable(row, column));

            if (isSelected) {
                setBackground(table.getSelectionBackground());
                setForeground(table.getSelectionForeground());
            }
            else {
                setForeground(table.getForeground());
                setBackground(table.getBackground());
            }
        }
        else {
            return null;
        }
    return this;
    }
} 
```

重复不捕获！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T22:59:19.067

*   请阅读有关[JTable的教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

*   `Boolean`将JCheckBox表示[为 Renderer 和 Editor 的值](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)

*   那么就没有理由去创造`TableCellRenderer`和`TableCellEditor`在`JCheckBox``JTable`

*   如果要突出显示`TableCell`取决于`Boolean`返回的值，`JCheckBox`请阅读[使用自定义渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#renderer)

*   教程中的示例和[此处的示例](http://www.java2s.com/Code/Java/Swing-JFC/Table-Renderer-Editor.htm)

# php - 访问数组内的php数组

> ID：10777709
> 
> 赞同：-2
> 
> 时间：2012-05-27T22:25:02.720
> 
> 标签：php

我正在尝试访问数组中的数组，但不知道如何帮助我。

值 $row[0],$row[1],.... 代表数据库的列，我将其全部插入 $rows[] 数组。

现在我想访问这些值并且不知道如何。所以请帮助我。

```
 while($row=mysql_fetch_array(self::$results))
        {
            $rows[] = array ('CompanyID' => $row[0],
                             'CompanyName' => $row[1], 
                             'CompanySlogan' => $row[2], 
                             'CompanyDescription' => $row[3], 
                             'CompanyRating' => $row[4],
                             'CompanyDpPath'  => $row[5],
                             'CompanyOtherInfo' => $row[6],
                             'CompanyFollowers' => $row[7]);
        } 
```

数据按以下方式保存

```
Array ( [0] => Array ( [CompanyID] => 3 [CompanyName] => s [CompanySlogan] => s [CompanyDescription] => and so on. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T22:26:22.383

简单到

```
$rows[0]['CompanyID'] 
```

# php - 致命错误：在第 17 行调用非对象上的成员函数 bind_param()

> ID：10777710
> 
> 赞同：1
> 
> 时间：2012-05-27T22:25:25.643
> 
> 标签：php, jquery, sql, html, mysqli

我正在写这个脚本

```
<form method="post" id="form" action="join_config.php">
    <label>First Name</label>
    <input name="first_name" type="text" id="firstname">

    <label>Last Name</label>
    <input name="last_name" type="text" id="lastname">

    <label>Email</label>
    <input name="email" type="email">

    <label>Twitter Handle</label>
    <input name="twitter" type="text">

    <label>Country</label>
    <input name="country" type="text">

    <label>City</label>
    <input name="city" type="text">

    <label>Phone</label>
    <input name="phone" type="checkbox">iPhone
    <input name="phone" type="checkbox">Samsung
    <input name="phone" type="checkbox">HTC
    <input name="phone" type="checkbox">Nokia

    <p style="margin-bottom:0;">Others:</p><input name="phone" type="text">
        <label>Availability</label>
        <input name="availability" type="text">
        <input name="submit" type="submit" value="Submit" id="#submit">
</form> 
```

还有我的 PHP mysqli 代码

```
<?php 

    $firstname = $_POST['first_name'];
    $lastname = $_POST['last_name'];
    $email = $_POST['email'];
    $twitter = $_POST['twitter'];
    $country = $_POST['country'];
    $city = $_POST['city'];
    $phone = $_POST['phone'];
    $availability = $_POST['availability'];
    $date = date("d.m.y");

    $SQL = "INSERT INTO join(first_name, last_name, email, twitter, country, city, phone, availability, date)VALUES('$firstname','$lastname','$email','$twitter','$country','$city','$phone','$availability','$date')";
    echo $SQL . "<br>";

    include_once('inc/config.php');

    $stmt = $db->prepare("INSERT INTO join VALUES (?,?)");
    $stmt->bind_param('ss', $firstname, $lastname);
    $stmt->execute();
    $stmt->close();

?> 
```

当我运行它时，我收到了这个错误：

```
Fatal error: Call to a member function bind_param() on a non-object in /join_config.php on line 17 
```

我在 mac OSX Lion 上运行，稍后将包含安全线程，但首先我需要插入到我的数据库中。

有什么帮助或建议吗？

# mysql - Mysql：在一行中获取一个字段的最大值和另一个字段的最小值

> ID：10777711
> 
> 赞同：3
> 
> 时间：2012-05-27T22:25:32.357
> 
> 标签：mysql, max, min

我有一个（MySQL）表，其中包含两个日期/时间字段：`start`和`end`（每个类型`datetime`）。我需要一个查询，它为我提供某个用户和定义日期的最低值`start`和最高值。`end`我终于成功了以下查询：

```
SELECT job.id, job.user_id, job.start, last.end 
FROM job
    JOIN job AS last 
        ON job.user_id = last.user_id 
            AND DATE( job.start ) = DATE( last.start ) 
            AND last.end = (SELECT max( last2.end) 
                            FROM job AS last2 
                            WHERE last2.user_id = last.user_id 
                                AND DATE( last2.end ) = DATE( last.end ))
WHERE job.user_id = 1 
    AND DATE( job.start ) = '2012-05-28' 
ORDER BY job.start ASC 
LIMIT 0,1 
```

尽管它有效，但它并不“感觉”正确。有没有更简单的方法来做到这一点？非常感谢任何帮助和提示。谢谢！

示例数据：

```
user_id     start               end
1       2012-05-28 07:13:00     2011-04-26 07:45:00
1       2012-05-28 08:15:00     2011-04-26 08:50:00
1       2012-05-28 05:32:00     2011-04-26 05:51:00
1       2012-05-28 08:50:00     2011-04-26 09:50:00
1       2012-05-28 15:10:00     2011-04-26 15:40:00
1       2012-05-27 16:11:00     2011-04-26 16:46:00
2       2012-05-28 09:50:00     2011-04-26 10:35:00 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T23:09:05.830

```
Select user_id
  , Min( start ) As MinStart
  , Max( end ) As MaxEnd
From job
Where Date( start ) = '2012-05-28'
  And user_id = 1
Group By user_id, Date( start ) 
```

根据您`{1, 2012-5-28 5:32:00 2011-04-26 15:40:00}`作为预期输出的评论（这就是示例输出如此重要的原因），这表明开始和结束日期值不一定必须与实际行的值相关。例如，样本数据中没有包含值组合的行。鉴于此，解决方案更简单。

我分组`Date( start )`只是为了表明，如果您删除 Where 子句，您可以按开始日期确定最小和最大开始日期。鉴于您对两者都进行过滤，您可以将查询简化为：

```
Select user_id
  , Min( start ) As MinStart
  , Max( end ) As MaxEnd
From job
Where Date( start ) = '2012-05-28'
  And user_id = 1
Group By user_id 
```

[SQL Fiddle](http://www.sqlfiddle.com/#!2/3cc99/51)版本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T22:32:01.977

```
SELECT job.user_id,min(job.start) AS orderby,max(job.end)
FROM job
WHERE job.user_id=1
GROUP BY job.user_id
HAVING DATE(job.start)='2012-05-28'
ORDER BY orderby
LIMIT 1 
```

未经测试，希望它对你有用，并且更有意义。

通过使用聚合函数，我们可以很容易地找到最小值和最大值，但是我必须取出（或者我可以包含，但会使查询更加复杂）的是 job.id。如果需要包含它，则必须使用子查询来选择具有该 user_id 和 job.start 的作业与最小值匹配。

# ruby-on-rails - Carrierwave + S3：如何指定 https？

> ID：10777712
> 
> 赞同：0
> 
> 时间：2012-05-27T22:25:40.757
> 
> 标签：ruby-on-rails, amazon-s3, carrierwave

如何让我的 Rails + Carrierwave + S3 通过 https 提供图像？

现在图片来自：

[http://distilleryimage1.s3.amazonaws.com/f5314e1c866911e181b812314804a181_7.jpg](http://distilleryimage1.s3.amazonaws.com/f5314e1c866911e181b812314804a181_7.jpg)

我希望它来自：

[https://distilleryimage1.s3.amazonaws.com/f5314e1c866911e181b812314804a181_7.jpg](https://distilleryimage1.s3.amazonaws.com/f5314e1c866911e181b812314804a181_7.jpg)

# 编辑

事实证明，图像是从任意数量的主机提供的：

`distilleryimage11.s3`, `distillery.s3`, 等等...

有没有办法只设置协议？

这是我的初始化程序：

```
CarrierWave.configure do |config|
  config.fog_credentials = {
    :provider               => 'AWS',
    :aws_access_key_id      => CONFIG['s3-key'],
    :aws_secret_access_key  => CONFIG['s3-secret'],
    :region                 => 'us-east-1'
  }
  config.fog_directory  = 'my_dir'
  # config.fog_host       = 'https://distilleryimage1.s3.amazonaws.com' # optional, defaults to nil
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T05:48:57.373

请注意，对于 Carrierwave 0.7，它是 config.asset_host

如果你使用 .fog_host 你会得到：

config/initializers/carrierwave.rb:12:in `block in <top (required)>': undefined method`fog_host=' for CarrierWave::Uploader::Base:Class (NoMethodError)

如未[定义方法`fog_host='中所述](https://stackoverflow.com/questions/13041498/undefined-method-fog-host)

HTH 未来的读者:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T22:29:52.040

如果您将 Fog 与 CarrierWave 一起使用，[则自述文件中的文档](https://github.com/jnicklas/carrierwave#using-amazon-s3)说您可以设置该`fog_host`选项：

```
CarrierWave.configure do |config|
  config.fog_credentials = {
    :provider               => 'AWS',       # required
    :aws_access_key_id      => 'xxx',       # required
    :aws_secret_access_key  => 'yyy',       # required
    :region                 => 'eu-west-1'  # optional, defaults to 'us-east-1'
  }
  config.fog_directory  = 'name_of_directory'                     # required
  config.fog_host       = 'https://assets.example.com'            # optional, defaults to nil
  config.fog_public     = false                                   # optional, defaults to true
  config.fog_attributes = {'Cache-Control'=>'max-age=315576000'}  # optional, defaults to {}
end 
```

在您的情况下，使用`config.fog_host = https://distilleryimage1.s3.amazonaws.com`.

# c++ - 在 Windows 中创建 C++ 非阻塞计时器

> ID：10777714
> 
> 赞同：1
> 
> 时间：2012-05-27T22:26:01.450
> 
> 标签：c++, windows, winapi, visual-c++

在 Linux 上，我将使用 fork() 创建一个子进程，这将是我的倒数计时器，一旦计时器结束，子进程将向父进程发送一个信号，告诉它计时器已经结束。然后父进程应该相应地处理信号。

我不知道如何在 Windows 上执行此操作。这里有些人建议使用线程，但他们从未编写任何示例代码来说明如何做到这一点。

最重要的是计时器是非阻塞的，这意味着它在后台保持倒计时，而程序正在接受用户的输入并正常处理它。

你能告诉我怎么做吗？

**编辑：**

该应用程序是一个控制台。请给我看示例代码。谢谢！

**更新：**

所以在我阅读了这里的一些建议之后，我在这里搜索了一些答案，发现这个[很有帮助](https://stackoverflow.com/questions/10715555/settimer-in-vc)。

然后我写了下面的代码，它可以工作，但不是应该的：

```
#include <Windows.h>
#include <iostream>
#include <string>
using namespace std;

#define TIMER_VALUE (5 * 1000) //5 seconds = 5000 milli seconds
HANDLE g_hExitEvent = NULL;

bool doneInTime = false;
string name;

bool inputWords();

//The below function will be called when the timer ends
void CALLBACK doWhenTimerEnds(PVOID lpParameter, BOOLEAN TimerOrWaitFired)
{
    if(!doneInTime)
    {
        cout << "\nOut of time ... try again ..." << endl;
        name = "";
        doneInTime = inputWords();
    }
    SetEvent(g_hExitEvent);
}

bool inputWords()
{

    /* doWhenTimerEnds() will be called after time set by 5-th parameter and repeat every 6-th parameter. After time elapses,
    callback is called, executes some processing and sets event to allow exit */
    HANDLE hNewTimer = NULL; 
    BOOL IsCreated = CreateTimerQueueTimer(&hNewTimer, NULL, doWhenTimerEnds, NULL, TIMER_VALUE, 0, WT_EXECUTELONGFUNCTION);

    g_hExitEvent = CreateEvent(NULL, TRUE, FALSE, NULL);

    cout << "Input your name in 5 seconds .. " << endl;
    std::getline(cin, name);

    DeleteTimerQueueTimer(NULL, hNewTimer, NULL);
    return true;
}

int main()
{
    doneInTime = inputWords();
    cout << "Hello, " << name << "! You're done in time" << endl;

    //WaitForSingleObject(g_hExitEvent, 15000);

    system("pause");
    return 0;
} 
```

问题是，被中断的 getline() 永远不会停止，随后的 getline() 甚至会读取之前输入的文本！请问我该如何解决？如果有更好的方法，你能指出我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T22:35:57.767

下面是一个适用于 Windows API 的示例：

```
#include <windows.h>
#include <iostream>

DWORD WINAPI threadProc()
{
    for (int i = 0; ; ++i)
    {
        std::cout << i << '\n';
        Sleep (1000);
    }

    return 0;
}

int WINAPI WinMain (HINSTANCE hInstance, HINSTANCE hPrevInstance, 
                    LPSTR lpszCmdLine, int iCmdShow)
{
    CreateThread (NULL, 0, (LPTHREAD_START_ROUTINE)threadProc, NULL, 0, NULL);

    int i;
    std::cin >> i;

    return ERROR_SUCCESS;
} 
```

基本上，主函数创建一个使用该过程执行的线程`threadProc`。您可以将其`threadProc`视为线程。一旦结束，线程就结束了。

`threadProc`大约每秒输出一次运行计数，而 main 函数等待阻塞输入。一旦给出输入，整个事情就结束了。

另请注意，`CreateThread`它与最小参数一起使用。它返回一个线程句柄，您可以在函数中使用，如`WaitForSingleObject`，最后一个参数可以接收线程 ID。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-27T22:42:59.150

您可以在线程内或线程外使用可[等待计时器对象。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687012%28v=vs.85%29.aspx)要使用这种对象，只需使用`SetWaitableTimer`函数。根据 MSDN 的函数定义：

> 激活指定的等待计时器。当到期时间到达时，会向定时器发出信号，并且设置定时器的线程调用可选的完成例程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T21:55:52.920

如果您为它们实现 kbhit() 函数，这是另一个可以跨平台工作的解决方案：

```
#include <boost/thread.hpp>
#include <boost/thread/mutex.hpp>
#include <boost/date_time/posix_time/posix_time.hpp>

#if defined(WIN32)
    #include <conio.h>
#else
    // kbhit() implementation for other platforms
#endif

boost::mutex    mutex_;
bool            timeExpired_ = false;

void threadFunc()
{
    while(1) {
        {
            boost::mutex::scoped_lock lock(mutex_);
            if (timeExpired_)
                break;
            #if defined(WIN32)
                kbhit();
            #endif
        }
        boost::this_thread::sleep(boost::posix_time::milliseconds(1));
    }
}

int main(int argc, char *argv[])
{
    boost::thread worker(threadFunc);

    worker.timed_join(boost::posix_time::milliseconds(5000));

    {
        boost::mutex::scoped_lock lock(mutex_);
        timeExpired_ = true;
    }

    worker.join();

    return 0;
} 
```

这种方法使用 boost::thread 并在创建线程后等待 5 秒来设置过期标志，然后再次等待线程，直到它完成其功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T01:28:42.883

寻找相同问题的解决方案，我发现这篇文章非常有帮助：

[http://www.codeproject.com/Articles/1236/Timers-Tutorial](http://www.codeproject.com/Articles/1236/Timers-Tutorial)

正如您似乎已经发现的那样，最好的答案（在 Windows 2000 之后的世界中）似乎是队列计时器，[即 CreateTimerQueueTimer](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682485%28v=vs.85%29.aspx)。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-12-11T14:32:14.200

试试这个：

```
//Creating Digital Watch in C++
#include<iostream>
#include<Windows.h>
using namespace std;

struct time{

int hr,min,sec;
};
int main()
{
time a;
a.hr = 0;
a.min = 0;
a.sec = 0;

for(int i = 0; i<24; i++)
{
    if(a.hr == 23)
    {
        a.hr = 0;
    }

    for(int j = 0; j<60; j++)
    {
        if(a.min == 59)
        {
            a.min = 0;
        }

        for(int k = 0; k<60; k++)
        {
            if(a.sec == 59)
            {
                a.sec = 0;
            }

            cout<<a.hr<<" : "<<a.min<<" : "<<a.sec<<endl;
            a.sec++;
            Sleep(1000);
            system("Cls");
        }
    a.min++;

}

    a.hr++;
}

} 
```

# javascript - 一分钱拍卖计时器

> ID：10777717
> 
> 赞同：1
> 
> 时间：2012-05-27T22:26:28.410
> 
> 标签：javascript, jquery, timer

我[这里有一个网站](http://%20http://jian.comoj.com/)

如您所见，计时器仅在第一个产品上运行。有人可以告诉我如何让其他 2 个产品也有计时器吗？另外我在 ajax 部分遇到问题`#bid`，如何让每个产品都有自己的`#bid`？

```
<?php

include "connect.php";
$query= "select * from product";
$result= mysql_query($query);

while( $record= mysql_fetch_array($result) ){
    $product_id= $record['product_id'];
    $product_name= $record['product_name'];
    $retail_price= $record['retail_price'];
    $product_price= $record['product_price'];

    echo '<div id="product">';
    echo '<div>'.$product_name.'</div>';
    echo '<img style="width: 90%;" src="images/'.$product_id.'.png"/>';
    echo 'Retail Price';
    echo '<div>'.$retail_price.'</div>';

    echo 'Time Left';        

    $query= "select * from product where product_id='$product_id'";
    $result2= mysql_query($query);
    $record= mysql_fetch_object($result2);
    $time= $record->end_time;

    date_default_timezone_set('Asia/Singapore');
    $unix_time= strtotime($time);

    echo '<br/>

    <div id="hoursBox" style="display: inline;"></div>:

    <div id="minsBox" style="display: inline;"></div>:

    <div id="secsBox" style="display: inline;"></div>

    <br/>';

    echo 'Current Price';
    echo '<div>RM '.$product_price.'</div>';

    echo '<input type="submit" id="bid" value="Bid"/>'; 

    echo '</div>';

    } 

?>

<script type="text/javascript">

var end_time = <?php echo $unix_time; ?>;

$(document).ready(function(){

   $("#bid").click(function(){

      $.ajax({
         url: 'increase_time.php',
         type: 'post',
         data: 'end_time='+end_time,
         success: function(response){
             end_time= response;
         }
      });

   });

});

var stop= setInterval('countdown()',1000);

function countdown() {        

        var now = new Date();

        var now_time= now.getTime()/1000;
        now_time= Math.floor(now_time);

        var sec = end_time- now_time;

        if(sec<=0){
            clearInterval(stop);          
        }  

        sec= Math.floor(sec);
        var min = Math.floor(sec / 60);
        var hour = Math.floor(min / 60);

        hour %= 24;
        min %= 60;
        sec %= 60;

        document.getElementById("hoursBox").innerHTML = hour;
        document.getElementById("minsBox").innerHTML = min;
        document.getElementById("secsBox").innerHTML = sec;                 
 }
</script>

<script type="text/javascript">countdown();</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:45:29.903

从类中更改您的元素 ID

```
$("#bid").click(function(){

}); 
```

进入

```
$(".bid").click(function(){

 //$(this).val() and what ever for current bid

}); 
```

我建议你使用[jquery 倒计时](http://keith-wood.name/countdown.html)插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T22:56:13.290

您需要使用[代码循环](http://www.php.net/manual/en/control-structures.for.php)来实现您的目标。

# ssas - 范围内总和计数的 MDX 计算

> ID：10777722
> 
> 赞同：2
> 
> 时间：2012-05-27T22:26:57.990
> 
> 标签：ssas, mdx

我在 SSAS 中有一个具有以下措施的多维数据集：

```
NameID
Number
Date 
```

NameID 指向带有 Name 字符串的 Person 维度（可以有多个具有相同 NameID 的记录）。日期指向服务器端日期维度。

我正在寻找可以包含在多维数据集中的 MDX 计算，它将显示 Person.Names 的计数，其中查询中给出的日期范围的 Measure.Number 字段的总和在一定范围内（比如 0-10 , 11-20 等)。

我尝试了各种风格的 COUNT()、FILTER() 和 SUM()，但我的 MDX 生锈了，而且我遗漏了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T10:47:26.663

MDX 没有直方图功能，我们正在考虑将其添加到[icCube](http://www.iccube.com/)中，但目前 MDX 中没有任何现成的功能。您可以阅读[本文](http://tomislav.piasevoli.com/2009/07/24/implementing-histograms-in-olap/)以获取 SSAS 中的解决方案。

此外，您可以使用计数和过滤器创建计算成员，但我相信您已经这样做了。

在层次结构中定义它的问题是它不能按预期使用过滤器。想象一下，您不希望某个特定年份的这个范围。但是，如果您的范围是固定的，那么创建维度/层次结构也可能是解决方案。

# c++ - 将二维数组传递给 C++ 中的函数

> ID：10777724
> 
> 赞同：0
> 
> 时间：2012-05-27T22:27:12.187
> 
> 标签：c++, pointers, parameters

所以这是我的问题，因为我已经在互联网上查看了一段时间，但似乎无法获得明确的答案来使其工作。我正在使用控制台在 C++ 中创建一个简单的推箱子游戏。

首先，我很确定如果它是一个大数组，由于内存强度，将数组传递给函数不是一个好主意。一切都很好，这应该不是问题，因为我最多只有大约 32x41，而且我什至不会达到最大值。那么我应该传递整个数组还是传递指针？

其次，我的数组大小并不总是相同的。我不确定这是否是一个重要因素。

第三，如果我要传递指针，在开始使用它们之前如何创建/初始化它们。我的数组是按以下方式创建的：

```
string line;
string arr[30];
int i = 0;
char mazeArr[30][40];
int k, count;

if (mazeStream.is_open())
{
  while ( mazeStream.good() && !mazeStream.eof() )
  {
      getline (mazeStream,line);
      cout << line << endl;
      arr[i] = line;
      i++;
  }
  mazeStream.close();
  cout << endl;
}

else cout << "Unable to open file"; 

for ( count = 0; count < 12; count ++)
{
    string::const_iterator iterator1 = arr[count].begin();
     k = 0;

    while (iterator1 != arr[count].end())
    {
        mazeArr[count][k] = *iterator1;
        iterator1++;
        k++;
    }
} 
```

现在我想用这个二维数组做的是：

*   一次取一个元素并创建一个类的实例，具体取决于数组中的符号
*   将实例放入另一个数组中，该数组采用实例的类型

所以最后我会得到第二个实例数组，其中每个实例都依赖于我从第一个数组中获取的符号。同时保留相同的“坐标”

任何帮助将不胜感激，

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T01:54:04.480

我会按照以下方式做一些事情：

```
char **createMaze(width, height)
{
    // Dynamically allocate memory creating a pointer array of pointers
    char **maze = new char*[width];

    // Loop to allocate memory for each pointer array
    for(int i = 0; i < width; i++)
        maze[i] = new char[height];

    return maze;
}

int main()
{
    width = 40;
    height = 30;
    char **maze = createMaze(40, 30);

    // You can now access elements from maze just like a normal
    // 2D array   maze[23][12]   - You can also pass this into
    // a function as an arugment      

    return 0;
} 
```

此代码未经测试.. 因为我是在浏览器 XD 中编写的。

# php - 使用 http post 传递 php 会话 ID

> ID：10777725
> 
> 赞同：0
> 
> 时间：2012-05-27T22:27:22.213
> 
> 标签：php, android, http, session, post

我正在使用此命令将参数发布到我的服务器：

```
response = CustomHttpClient.executeHttpPost("http://192.168.1.102/liu/login.php", postParameters); 
```

当我从服务器成功登录时，我的 Android 应用程序设置为在 webview 中请求 members.php 页面，但是当这种情况发生时，我被重定向到登录页面再次登录，这意味着会话已经掉在某个地方，那么我如何维护两个请求之间的会话？

这是服务器端 login.php 上的代码：

```
 if($numrow!=0)
{
    while($row = mysql_fetch_assoc($query))
    {
        $db_username = $row['username'];
        $db_password = $row['password'];
    }

    if($username==$db_username&&$password==$db_password)
    {

        $_SESSION['username']=$db_username;
        header("Location: members.php");
        members area</a>";

    } 
```

和members.php：

```
if($_SESSION['username'])
 {
echo "1";
echo "the logged in session is :". $_SESSION['username'];
echo " You are logged in as: ".$_SESSION['username'];

echo "<p><a href='logout.php'>Click here to logout</a>";
  } 
```

现在，当我从我的电脑浏览器登录时，这段代码可以工作，但是当我从 Android 应用程序发送信息并获得成功回复然后请求 members.php 页面时，它会将我带回登录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:46:07.793

你可以参考这个链接： [在android中维护会话（应用程序在服务器端保持身份验证）](https://stackoverflow.com/questions/5960832/maintaining-session-in-android-application-stay-authenticated-on-the-server-si)

我已经提到我们如何在 android 中管理会话。

尝试从中获得帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T22:45:57.063

您应该使用 GET 参数。PHP的格式是

> myscript.php?session_name=SESSION_ID

但请注意，这可能未在您的 PHP 服务器上启用。[关于传递会话 ID 的](http://php.net/manual/en/session.idpassing.php)文档

# javascript - Javascript 正则表达式字符排除

> ID：10777728
> 
> 赞同：5
> 
> 时间：2012-05-27T22:27:35.970
> 
> 标签：javascript, regex

我有一个这样的 js 正则表达式：

```
/^[a-zA-ZęóąśłżźćńĘÓĄŚŁŻŹĆŃ]+$/ 
```

现在我想从像 QVXqvx 这样的 a-zA-Z 字母中排除。应该如何更改此正则表达式的语法？

我试过但没有运气。请帮我。

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-27T22:33:44.283

你仍然可以做范围，但你必须做不包括这些字母的范围，所以像 A-PR-UWYZ

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-28T05:59:37.370

最好的方法是简单地更新范围以排除您不想要的字母。那会给你留下这个：

```
/^[a-pr-uwyzA-PR-UWYZęóąśłżźćńĘÓĄŚŁŻŹĆŃ]+$/ 
```

您可以使用负前瞻来完成一种字符类减法。但是，由于您为每个匹配的字符串重复负前瞻，因此效率会降低。无论如何，这就是它的样子：

```
/^(?:(?![qvxQVX])[a-zA-ZęóąśłżźćńĘÓĄŚŁŻŹĆŃ])+$/ 
```

当您没有像这样无限次数地重复一个字符类时，这最有效。

包括 Java 和 .NET 在内的几种正则表达式风格有效地支持使用特殊语法的字符类减法。

在 Java 中，与一个否定组相交：

```
/^[a-zA-ZęóąśłżźćńĘÓĄŚŁŻŹĆŃ&&[^qvxQVX]]+$/ 
```

一个鲜为人知的事实是，Opera Web 浏览器实际上在其原生 JavaScript 正则表达式中支持上述 Java 语法。Opera 将来可能会删除此功能，因为它是非标准的（它基于废弃的 ES4 提议），但至少在当前版本（v11.64）中有效。

.NET、XPath 和 XML Schema 支持以下更简单的字符类减法语法：

```
/^[a-zA-ZęóąśłżźćńĘÓĄŚŁŻŹĆŃ-[qvxQVX]]+$/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-27T22:30:27.153

你不能。在这种情况下，您需要*手动*枚举除排除之外的所有字母`QVXqvx`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T23:16:54.200

`/^[a-pA-PR-Ur-uWwYyZzęóąśłżźćńĘÓĄŚŁŻŹĆŃ]+$/`

# php - 使用来自 XML 提要的 preg_match

> ID：10777729
> 
> 赞同：0
> 
> 时间：2012-05-27T22:27:53.553
> 
> 标签：php, xml, preg-match

我正在尝试掌握 preg_match 的窍门，但我无法使用正则表达式选择我想要的内容。

我正在使用此处找到的 XML 提要http://www.ecb.int/stats/eurofxref/eurofxref-daily.xml

我想找到一种货币和它的价值。它作为数组打印，所以我很困惑如何做到这一点。我需要以某种方式循环吗？即使我这样做了，我仍然没有弄清楚 preg_match 部分。

```
<?
$xml = simplexml_load_file('http://www.ecb.int/stats/eurofxref/eurofxref-daily.xml');
//print_r($xml);

preg_match('/ USD \= \(([0-9\.\,]+)\)$/',$xml,$match);

echo $match[1];
echo $match[2];

?> 
```

任何帮助，将不胜感激！

**编辑 - 我试图让 PHP 网站上的示例使用我的链接工作，但我遇到了一堆错误。这就是我所拥有的**

```
<?

$string = simplexml_load_file('http://www.ecb.int/stats/eurofxref/eurofxref-daily.xml');

$xml = new SimpleXMLElement($string);

$result = $xml->xpath('b/c');

while(list( , $node) = each($result)) {
   echo 'b/c: ',$node,"\n";
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T22:30:53.193

您正在使用 SimpleXML 库，因此您可以使用[xpath 函数](http://www.php.net/manual/en/simplexmlelement.xpath.php)

更简单的解决方案是遵循（[this](https://stackoverflow.com/questions/10281849/php-parse-exchange-rate-feed-xml)）描述：

```
$xml = simplexml_load_file('http://www.ecb.int/stats/eurofxref/eurofxref-daily.xml');

foreach($xml->Cube->Cube->Cube as $rate){
  if ($rate["currency"] == 'WANTED CURRENCY') {
    echo $rate["rate"].' '.$rate["currency"].'<br/>';
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T22:37:50.537

如果你想使用正则表达式，你可以试试这个表达式吗？

```
USD' rate='(.*)' 
```

我喜欢在帮助我表达时使用这个网站：http: [//gskinner.com/RegExr/](http://gskinner.com/RegExr/)

在这种情况下，我使用 file_get_contents 获取了 xml 的内容，将它们粘贴到此站点的框中，然后使用页面顶部的栏开始制作表达式。当您键入时，您会自动在下面的框中查看是否有任何匹配项。

# ruby-on-rails - Michael Hartl 编写的 Ruby on Rails 3 教程 - application_helper_spec.rb

> ID：10777734
> 
> 赞同：0
> 
> 时间：2012-05-27T22:28:54.617
> 
> 标签：ruby-on-rails

在这个测试文件里面是这样的代码：

```
 it "should include the base title" do
          full_title("foo").should =~ /^Ruby on Rails Tutorial Sample App/
        end 
```

我的问题是“foo”在那里做什么？它可以是任何字符串吗？因为现在我所有的测试都通过这个“foo”参数。

谢谢，迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T22:30:58.607

它正在检查将 'foo' 作为参数传递的辅助方法是否返回指定的字符串。因此，为确保您需要检查 full_title 辅助方法。

# regex - Perl - 替换相同字符的序列

> ID：10777738
> 
> 赞同：4
> 
> 时间：2012-05-27T22:29:44.613
> 
> 标签：regex, perl

我正在尝试实现一个正则表达式，给定一个字符串，它会检查至少 3 个相同字符的序列，并将其替换为该字符中的两个。例如，我想打开下面的字符串：

```
sstttttrrrrrrriing 
```

进入

```
ssttrriing 
```

我在想一些类似的事情......

```
$string =~ s/(\D{3,})/substr($1, 0, 2)/e; 
```

但这不起作用，因为：

1.  它不检查三个字母字符是否相同；它可以匹配三个或更多**不同**字符的序列。
2.  它只替换第一个匹配项；我需要适应此正则表达式中的所有匹配项。

谁能帮我？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-27T22:34:06.453

您可以使用捕获组并将其反向引用`\1`，然后将其插入两次。

```
$ perl -plwe 's/(.)\1{2,}/$1$1/g'
sstttttrrrrrrriing
ssttrriing 
```

或者您可以使用`\K`(keep) 转义序列来避免重新插入。

```
s/(.)\1\K\1+//g 
```

如果需要，将通配符替换`.`为任何合适的字符（类）。例如字母：

```
perl -plwe 's/(\pL)\1\K\1+//g' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T22:41:57.490

```
$ echo "sssssttttttrrrrriiiinnnnggg" | perl -pe "s/(.)\1+/\1\1/g"
ssttrriinngg 
```

# android - 降低蓝牙服务器的功耗（接受）

> ID：10777741
> 
> 赞同：0
> 
> 时间：2012-05-27T22:29:57.713
> 
> 标签：android, bluetooth

我正在与蓝牙嵌入式设备连接，我希望它在 android 手机触手可及时自动重新连接。到目前为止，它已经解决了几个问题。我还注意到，虽然电话在接受（）对套接字的调用时被阻止，但它仍然消耗相当多的电量。没有什么可以与车载免提电话相提并论的，例如，它似乎对电池影响不大。我想知道人们是否有任何技巧来对权力更加友好？

此外，目前接受在 AcceptThread.run 上工作（如在蓝牙聊天示例中），但不在服务中。我应该把它移到一个吗？任何指向如何在服务中接受并将其移动到线程/活动的指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T03:22:09.413

无论是在服务中还是在活动/应用程序中，接受（AcceptThread）代码都将完全相同。是否应该将其移动到服务中取决于您是否需要它在应用程序关闭后继续运行。如果您不需要将其移动到服务中，请不要打扰，因为它会使您的应用程序的结构和生命周期更加复杂。

我很惊讶您观察到接受会导致功耗增加。当您创建一个套接字并在其上调用 accept 时，Android 会将您的 UUID 添加到可用蓝牙服务列表中 - 它不会将蓝牙无线电置于不同的模式，那么为什么会导致功耗增加呢？

# c# - 用于 .NET 的最佳 NoSQL DB 可以使用时间索引存储大量每分钟的统计信息？

> ID：10777742
> 
> 赞同：8
> 
> 时间：2012-05-27T22:30:04.020
> 
> 标签：c#, nosql, statistics

我需要使用时间索引存储 10 年的每分钟统计数据（并进行计算）。我不想要 sql 数据库，但要 NoSQL。什么对 .NET 最好？

最好的意思是：

1°）性能（用于快速读取以便在 2）中进行计算 2°）易于计算，例如自时间起源以来的平均值 3°）对于 .NET

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T22:57:21.483

'.NET' 的最佳选择是主观的。使用 .NET 构建的唯一一个是[RavenDB](http://ravendb.net)，但[CouchDB](http://couchdb.apache.org)和[MongoDB](http://www.mongodb.org)等其他人也有“驱动程序”，可让您使用一组 .NET 库查询它们，因此所有这些都可以在 .NET 应用程序中使用。

尽管它们都可以在 Windows 上运行，但我想这与您计划在哪个平台上运行它们更相关。[在这里](http://en.wikipedia.org/wiki/NoSQL)查看他们开发的语言，在我看来，安装和维护用 Erlang 开发的东西可能更难。

另一点需要注意的是您创建索引的方式。在 RavenDB 中，您可以使用 Linq 在 .NET 中创建索引和 map/reduce 函数。在 CoucbDB 中，您使用 Javascript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T00:08:50.233

如何使用应用程序缓存？

本身并不是真正的数据库，但它会带来性能，并且它以 NoSQL 键/值方式工作。缺点是存储空间，但您可以构建系统以在数据库中保存永久存储，并在缓存中保存临时存储以进行计算。如果您使用多台服务器，其他缺点是：您需要担心多台机器上的缓存可用性。一些缺点，但巨大的性能使 IMO 受益。

# android - IntelliJ 调色板工具不适用于 Android

> ID：10777753
> 
> 赞同：1
> 
> 时间：2012-05-27T22:31:49.360
> 
> 标签：android, intellij-idea, palette

我一直在尝试在 IntelliJ（我选择的 java 编辑器）中完成[http://www.vogella.com/articles/Android/article.html#components](http://www.vogella.com/articles/Android/article.html#components)，但调色板工具似乎不可用。我知道其他一些工具窗口只有在某些提示后才可用，但我找不到启用调色板的方法。

这似乎是一个非常有用的快速 UI 开发工具。很遗憾我不能让它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T22:37:18.370

IntelliJ IDEA 将在 12 版本中提供 Android UI 设计器工具。目前您可以使用 Eclipse 进行 Android 可视化界面设计。

# c# - 在 Entity Framework 4.3 中更新实体属性的正确方法 - 代码优先

> ID：10777756
> 
> 赞同：1
> 
> 时间：2012-05-27T22:32:28.713
> 
> 标签：c#, entity-framework

当实体的属性发生变化时，进行更新的正确方法是什么？例如，我有一个名为 Application 的实体。应用程序有一个属性 List<TaskBases>。运行我的应用程序时，应用程序的任务库为零。我只需要知道当用户向其中添加 TaskBase 时如何保存此列表。

Save() 方法的第一行是新的。我尝试了它，因为我在研究时发现了它。

```
public void Save(Application application)
{
    // This line didn't work. See error below this code snippet.
    this.Database.Entry(application).Property(app => app.Tasks).IsModified = true;
    this.SaveChanges<Application>(application);
}

protected void SaveChanges<T>(T entity) where T : EntityBase
{
    this.Database.Entry<T>(entity).State = GetState(entity);
    this.Database.SaveChanges();
} 
```

我收到此错误：“'Application' 类型的属性 'Tasks' 不是原始或复杂属性。Property 方法只能与原始或复杂属性一起使用。请使用 Reference 或 Collection 方法。”

因此，我尝试使用 Reference 和 Collection，但我在智能感知中没有看到任何对我有帮助的东西。

注意：当我第一次尝试在 Save() 中没有第一行的情况下进行保存时，TaskBases 列表中的项目没有出现在数据库中。

我有一种感觉，我让这变得比它需要的更难。我有一个实体，用户将另一个实体添加到它，作为列表的一部分，我希望保存它。我错过了什么？这应该怎么做？

**编辑：**

当我将 Save() 方法更改为此时，它起作用了：

```
public void Save(Application application)
{
    foreach (TaskBase taskBase in application.Tasks)
    {
        this.Database.Entry<TaskBase>(taskBase).State = GetState(taskBase);
    }

    this.SaveChanges<Application>(application);
} 
```

那是必须要做的吗？那是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T05:44:52.800

执行更新的正常方法是这样的：

```
using(var context = new MyDbContext())
{
    var app = context.Applications.Single(a=>a.Id == theAppIdImInterestedIn); 
    app.Tasks.Add(new Task{ Name = "some other data" });
    context.SaveChanges();
} 
```

如果您想将其分离出来，使用 DI 容器来管理其生命周期，稍微抽象一下您的上下文。

# java - 在 Android 中解析 XML 字符串

> ID：10777757
> 
> 赞同：0
> 
> 时间：2012-05-27T22:32:54.017
> 
> 标签：java, android, xml, xml-parsing, sax

我知道有大量关于此的文档，但我就是无法得到它。我一直在寻找一段时间，我想就我的具体情况获得一些帮助，以对此有所了解。

我使用 Http Client 来获取一串 XML，内容如下：

```
<groups>
<group>
    <id>35</id>
    <sport>Racing</sport>
    <name>Indianapolis 500</name>
    <date>27/4/2012</date>
    <time>12:00</time>
    <period>PM</period>
    <location>Indiana</location>
</group>
<group>
    <id>36</id>
    <sport>Baseball</sport>
    <name>Miami Heat game</name>
    <date>27/4/2012</date>
    <time>3:00</time>
    <period>PM</period>
    <location>Miami, FL</location>
</group>
</groups> 
```

我有另一个名为 XMLParser 的类，其方法名为 takeNameGetID，它采用整个 XML 字符串和它在 a 中查找的名称字符串，`<name>`并应尝试找到具有该名称的“块”并将对应`<id>`的作为整数返回。这就是让我感到困惑的地方。

```
public int takeNamegetID(String name, String allXML) {
    //This is what I can't figure out
} 
```

我在第一堂课上这样称呼它：

```
XMLparser parser = new XMLparser();
int actualId = parser.takeNamegetID(getGroupString(), getGroupXML()); 
```

这两种方法，`getGroupString()`并且`getGroupsXML()`是不言自明的。一个获取它正在寻找的字符串作为名称，另一个获取整个 XML，分别。

我需要的是一个示例或某人向我展示我想要的 takeNamegetID 方法的实现。我一直在寻找，我认为最好只问我的具体问题。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T03:16:01.947

建议你使用SimpleXML(http://simple.sourceforge.net/download.php)，我在两个android项目中使用过，体积小，好用。

爪哇代码：

```
import org.simpleframework.xml.Element;

public class Group {
@Element
private int id;
@Element
private String sport;
@Element
...

public int getId() {
    return id;
}

public void setId(int id) {
    this.id = id;
}
...
}

import java.io.File;
import java.util.List;    
import org.simpleframework.xml.*   

public class Groups {
    @ElementList(inline=true)
    private List<Group> group;

    public List<Group> getGroup() {
        return group;
    }

    public void setGroup(List<Group> group) {
        this.group = group;
    }

    public static void main(String[] args) throws Exception {
        Serializer serializer = new Persister();
        Groups groups = serializer.read(Groups.class, your_xml_inputstream);
        System.out.println(groups.getGroup().size());
    }
} 
```

# c++ - 尝试从 Lib 扩展类时出现 C++ 链接器错误

> ID：10777758
> 
> 赞同：0
> 
> 时间：2012-05-27T22:32:56.640
> 
> 标签：c++, class, linker, extend

我真的不明白这一点。

基本上，作为一个库，我正在尝试制作一些类来帮助处理一些 DirectX 东西，这样我就不必在其他游戏中这样做了。GameBase 是我制作的一个类。此 dll 项目编译为 dll，并且编译没有问题。

我有另一个引用这个的项目，我创建了一个名为 BlankGame 的类，它扩展了 GameBase。每当我构建这个可执行项目时，我都会收到以下链接器错误。

```
error LNK2019: unresolved external symbol "public: virtual __thiscall GameBase::~GameBase(void)" (??1GameBase@@UAE@XZ) referenced in function "public: virtual __thiscall BlankGame::~BlankGame(void)" (??1BlankGame@@UAE@XZ)

error LNK2001: unresolved external symbol "public: virtual void __thiscall GameBase::UnloadContent(void)" (?UnloadContent@GameBase@@UAEXXZ)

error LNK2001: unresolved external symbol "public: virtual bool __thiscall GameBase::LoadContent(void)" (?LoadContent@GameBase@@UAE_NXZ) 
```

我在下面定义了 GameBase.h、BlankGame.cpp 和 BlankGame.h。

游戏库.h

```
#include "stdafx.h"
#pragma once

#pragma comment(lib, "dxgi.lib")
#pragma comment(lib, "d3d11.lib")
#pragma comment(lib, "d3dx11.lib")
#pragma comment(lib, "d3dx10.lib")

DLEX class GameBase
{
public:
    virtual ~GameBase() = 0;

    virtual bool LoadContent();
    virtual void UnloadContent();
    bool Initialize(HINSTANCE hInst, HWND winHandle, struct DXInitOptions options);
    void ShutDown();
    void BeginScene(float red, float green, float blue, float alpha);
    void EndScene();
    virtual void Render() = 0;
    virtual void Update() = 0;

    void GetProjectionMatrix(D3DXMATRIX&);
    void GetWorldMatrix(D3DXMATRIX&);
    void GetOrthoMatrix(D3DXMATRIX&);

    void GetVideoCardInfo(char*, int&);

    bool CompileD3DShader(wchar_t* filePath, char* entry, char* shaderModel, ID3DBlob** buffer);

protected:
    ID3D11Device* dev;
    ID3D11DeviceContext* devContext;
    IDXGISwapChain* swapChain;
    ID3D11RenderTargetView* backBufferTarget;
    ID3D11Texture2D* depthStencilBuffer;
    ID3D11DepthStencilState* depthStencilState;
    ID3D11DepthStencilView* depthStencilView;
    ID3D11RasterizerState* rasterState;

    D3DXMATRIX projectionMatrix;
    D3DXMATRIX worldMatrix;
    D3DXMATRIX orthoMatrix;

    bool vsyncEnabled;
    int vidMemory;
    char vidCardDesc[128];
}; 
```

空白游戏.h

```
#pragma once

#include <D3D11.h>
#include <D3Dx11.h>
#include <D3Dx10.h>
#include <D3Dcompiler.h>
#include <DxErr.h>
#include <xnamath.h>

#include <GameBase.h>

class BlankGame : public GameBase
{
public:
    BlankGame();
    ~BlankGame();

    bool LoadContent();
    void UnloadContent();
}; 
```

空白游戏.cpp

```
#include "BlankGame.h"

BlankGame::BlankGame()
{

}

BlankGame::~BlankGame()
{
}

bool BlankGame::LoadContent()
{
    return true;
}

void BlankGame::UnloadContent()
{

} 
```

我究竟做错了什么？我制作 GameBase 的方式适用于我按照 DirectX 教程制作的其他项目，唯一的区别是 GameBase 将与扩展它的子类在同一个项目中，而不是在单独的库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T16:13:20.797

你必须把这样的东西放在一个标题中，在你定义 DLEX 的地方

```
#if defined(_WIN32)
#   if defined(MAKE_DLL)
#       if defined(EXPORT_API)
#           define DLEX __declspec(dllexport)
#       else
#           define DLEX __declspec(dllimport)
#       endif
#   else
#       define DLEX 
#   endif
#else
#   define DLEX
#endif 
```

然后在编译库时，设置 MAKE_DLL 和 EXPORT_API。
无需更改客户端中的任何内容。
这段预处理器代码将检测它是否正在编译库或使用 EXPORT_API 链接它；如果它没有被定义，它将导入函数，但前提是它被设置为创建一个 DLL（而不是静态库）。

# c++ - reverse_iterator 是否继承自迭代器？

> ID：10777759
> 
> 赞同：1
> 
> 时间：2012-05-27T22:32:59.417
> 
> 标签：c++, stl, iterator

让它成为`std::list::iterator`和`std::list::reverse_iterator`。反向是从正向派生的吗？如果不是，那么为什么没有成员函数的反向等价物`list`？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T22:38:43.127

> 让它成为 std::list::iterator 和 std::list::reverse_iterator。反向是从正向派生的吗？

不一定，它们可能（并且在大多数实现中可能是）不同的类型。迭代器一直被复制，这种继承会导致切片。另外，所有操作`iterator`都应该`virtual`避免不一致，这将是低效的。考虑到这一点，标准甚至禁止继承作为一种可能的实现是有意义的（也许它是间接的）。

**更新：**该标准提供了`std::reverse_iterator`类模板的定义，并规定`std::list::reverse_iterator`了此类模板的专门化。继承是不可能的实现。

> 如果不是，那么为什么列表的成员函数没有反向等价物？

因为你可以调用`base()`a`reverse_iterator`来获取底层的正则`iterator`。`reverse_iterator`a与其对应的基本关系`iterator` `i`是`&*(reverse_iterator(i)) == &*(i - 1).`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T22:44:19.603

在 GNU 的 C++ 标准库的实现中，reverse_iterator 和迭代器之间存在一种 has-a 关系。（我从未看过 MSVC++ 或 llvm 实现，但我想它们是相同的。）

基本上，reverse_iterator 接受一个迭代器并具有一个薄包装器，以便 ++ 别名为 -- 和 -- 别名为 ++。基本上所有操作都是底层非反向迭代器的包装器。

> 如果不是，那么为什么列表的成员函数没有反向等价物？

`std::list`确实有一个[反向迭代器](http://en.cppreference.com/w/cpp/container/list/rbegin)。

# c - 如何在不使它们成为数组的情况下连续声明结构？

> ID：10777764
> 
> 赞同：0
> 
> 时间：2012-05-27T22:33:56.187
> 
> 标签：c, arrays, pointers, memory-management, struct

我目前在处理结构数组时遇到了一些麻烦（具体来说，我的数组太大了，占用了 7 兆字节的内存），我开始怀疑我是否真的需要一次声明所有结构并像那样占用内存，而不是在需要新结构时按比例增加它（程序从文件中读取内容，我将文件中的数据存储在结构中；但是它需要从文件中读取的东西的数量是不可预测的）。我可以使用什么替代方法使程序可以引用单个的、唯一的结构，但不需要提前知道结构的确切数量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T22:37:33.100

[链表？](http://en.wikipedia.org/wiki/Linked_list)或任何其他更高级的数据结构，具体取决于您的目的，但无论如何，一些阅读似乎是有序的 :) 或者如果您正在使用 C++，只需使用 std::list。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T22:38:04.717

我想到了两种方法：

*   一个可重新分配的数组（可以是结构或指向结构的指针），您需要函数来检查您是否超出界限并重新分配整个数组以防万一（使用`realloc`）
*   结构的链表，在需要时自动增长，插入和删除是恒定的，但您不会对元素进行快速随机访问索引

对于链表解决方案，您只需要另一个结构

```
struct node
{
  struct node *prev; // if you want it double linked
  struct node *next;
  struct data data;
}; 
```

选择哪一个主要取决于必须将新项目添加到数据结构中的频率，如果它是批量完成的，那么重新分配会非常有效，否则你会做很多重新分配（你总是可以使用类似于用于hashmaps的那个，并且总是以很大的数量增加它，例如通过加倍容量）。如果您需要快速随机访问，请忘记链接列表。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-28T04:39:41.253

您可以使用 a`union`而不是`strust`; 它的内存效率更高，并且不会像 a`struct`那样占用内存。

# node.js - nodejs gridfs 缓冲区偏移两个字节

> ID：10777766
> 
> 赞同：0
> 
> 时间：2012-05-27T22:34:18.963
> 
> 标签：node.js, mongodb, gridfs

我正在使用这个函数来检索文件。在从请求中提取 md5sum 之前还有其他一些函数调用，确保文件存在，然后调用 buildFile()。

```
 FileChunker.prototype.buildFile = function(file, callback) {
         self = this;
         console.log(file);

         this.gridfs.get(file._id, function(error, data) {
                 if (error) {
                         console.log(error);
                         callback(error);
                 }
                 else {
                         callback(null, data);
                 }       
         });     
    }; 
```

这是生成的十六进制转储。

磁盘上的原始文件（通过 mongofiles 导入，可以通过 mongofiles 正确检索）

```
~/_nodejs% hexdump -C test.txt
00000000  41 42 43 44 45 46 47 48  49 4a 4b 4c 4d 4e 4f 50  |ABCDEFGHIJKLMNOP|
00000010  0a                                                |.|
00000011 
```

nodejs的输出

```
~/_nodejs% hexdump -C OUTPUT
00000000  11 00 00 00 41 42 43 44  45 46 47 48 49 4a 4b 4c  |....ABCDEFGHIJKL|
00000010  4d                                                |M|
00000011 
```

如果我们`console.log`是 Buffer 对象，我们也会看到额外的数据：

```
 <Buffer 11 00 00 00 41 42 43 44 45 46 47 48 49 4a 4b 4c 4d> 
```

一段时间以来，我一直在为此苦苦挣扎，不知道下一步该做什么。这就像`gridfs.get()`只是返回错误的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T06:57:23.360

您可以在 git repo 上发布问题，请提供节点版本、mongodb 版本、驱动程序版本和重现它的步骤（最好是代码）。否则我在这里有点盲目。

# c++ - Linux 上的串行端口通信 - 为什么使用 SIGIO 处理程序不好？

> ID：10777768
> 
> 赞同：1
> 
> 时间：2012-05-27T22:35:05.810
> 
> 标签：c++, linux, serial-port

在工作中，我被要求在 Linux 上使用 C++ 为工业硬件实现一个新的控制器应用程序。一个关键特性是在使用 modbus 的设备之间使用无线电调制解调器通信。我能够很好地读取和写入串行端口 ttyS0 的数据，但是我正在使用 SIGIO 信号的信号处理程序来告诉主控制循环何时数据已到达端口进行读取。时间很重要，因为协议将传输结束定义为我需要检测的 3.5 个字符长度。我在网上看到，为此目的使用 SIGIO 处理程序不是一个好主意（包括[在 stackoverflow 上](https://stackoverflow.com/questions/3423002/i-want-to-receive-data-continuously-from-a-com-port-simultaneously-want-to-wri)的答案）。谁能告诉我为什么这种方法不受欢迎？我的偏好是使用`poll()`或在新线程上运行传入消息监控`select()`但我的老板热衷于信号处理方法，但我们都是 Linux 新手，因此我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:45:32.947

信号处理程序增加了大量的复杂性和与可重入性和原子性相关的错误风险。您可以在此处查看讨论文章：http: [//www.ibm.com/developerworks/linux/library/l-reent/index.html](http://www.ibm.com/developerworks/linux/library/l-reent/index.html)

听起来您没有充分的理由为您的用例使用信号处理程序。如果您的信号处理程序只是要向另一个线程发出信号来进行读取，为什么不使用阻塞读取或从另一个线程中选择呢？

# html - 如何在流体容器元素内设置 div 宽度？

> ID：10777769
> 
> 赞同：0
> 
> 时间：2012-05-27T22:35:26.410
> 
> 标签：html, css

我有一个容器元素：

```
div#container {
  width:100%;
  height: 20px;
  overflow:hidden"
} 
```

在这个容器内，我有三个浮动的子 div `left`。第一个和第三个子 div 有`width = 100px`

如何设置第二个 div 的样式以占用剩余空间？

注意：`css`只有，没有`javascript`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T22:52:17.587

如果你可以换到`float:right`第三个div，我推荐你如下布局：

```
div#container { width:100%; height: 20px; overflow:hidden;display:table; }
div#div1 { float:left; width:100px; display:table-cell; }
div#div2 { margin-left:100px; margin-right:100px; width:100%; display:table-cell; }
div#div3 { float:right; width:100px; display:table-cell; } 
```

# node.js - 如何在 NodeJS 中声明全局要求？

> ID：10777770
> 
> 赞同：0
> 
> 时间：2012-05-27T22:35:31.880
> 
> 标签：node.js

> **可能重复：**
> [node.js 全局变量？](https://stackoverflow.com/questions/5447771/node-js-global-variables)

我如何在节点 js 中包含文件或脚本，我可以全局访问它。我想用一些功能扩展标准数组对象，但我不喜欢在 app.js 中这样做，而且我在模块中声明它，不可能全局访问它。

是否有可能使用其他命令来执行此操作？

# opengl-es - 对于 opengl (webgl) 是 png 还是 jpeg 最合适的文件格式？

> ID：10777782
> 
> 赞同：2
> 
> 时间：2012-05-27T22:39:37.820
> 
> 标签：opengl-es, format, webgl, image-formats

在纹理的opengl（更具体地说是webgl）上，jpeg和png之间的哪种格式会被推荐在运行时渲染时更有效？我知道 jpeg 可以比 PNG 小，但也许解码成本更高，或者其他。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T22:53:45.510

好吧，解码 JPEG 的速度非常快，您需要使用数千（或数百个，如果您在移动设备上）高分辨率 JPEG 才能看到对性能的重大影响。由于您的平台是网络，我会推荐 JPEG，这取决于您拥有的纹理类型，它将是所有浏览器都支持的最尺寸/质量效率最高的格式（webp 是一个很好但支持不充分的替代方案）。

如果您的纹理更像图形或卡通，这意味着它们有很多锐利和精细的边缘以及很多单色区域，我会推荐 PNG，如果使用中高 JPEG 压缩，坚硬和精细的边缘会变得非常脏。

PNG进行无损压缩。特别是对于类似卡通的内容（意味着与照片相比颜色和细节很少），您将获得与压缩良好的 JPEG 相似的大小，但具有更好的视觉效果，在某些情况下甚至更好的压缩。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-28T04:08:53.913

保罗的回答在文件大小和解码方面是正确的，但它并没有真正回答你提出的问题。

> jpeg 和 png 之间的哪种格式会被推荐在运行时渲染时更有效？

由于问题是在渲染过程中哪个更有效，所以答案会有所变化。JPEG 和 PNG 都作为未压缩的 RGB/A 数据上传到 GPU，因此两者的渲染特性完全相同。我还做了一些测试，表明两者的上传速度实际上是相同的。因此，您的选择应该与渲染性能无关，而是哪种格式具有您需要的特征。（有损/无损、Alpha 通道等）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T06:22:43.823

每种格式都有不同的用途。

JPEG：小，有损。仅 RGB

PNG：无损、4 通道 (RGBA)

一般来说，您可能应该尽可能使用 JPEG，因为您可以使它们变得非常小。简单的颜色纹理非常适合 JPEG。

PNG虽然有多种用途

1.  您希望在 RGB 颜色之上有一个 Alpha 通道。

    您目前只能使用 PNG 执行此操作

2.  你需要无损压缩

    如果您正在制作字体或其他类似矢量或 8 位像素的艺术，您可能想要使用 PNG

3.  您想要的不是颜色数据。例如法线贴图、高度贴图、反射贴图、不透明度贴图、光照贴图或同一纹理中这些的组合。

    虽然您可以使用 JPEG 完成其中一些操作，但 JPEG 是为人类查看的图像而设计的。这意味着它的压缩是专门围绕人眼可以看到的东西和他们看不到的东西而设计的。例如，JPEG 压缩颜色多于亮度。我猜它也比绿色压缩红色更多。所以JPEG一般不擅长压缩非视觉数据

    因此，在这些情况下，您可能想要使用 PNG。

注意：您还可以选择使用 ArrayBuffer 将数据直接加载到 WebGL 纹理中。您可以使用 XMLHttpRequest 直接下载 ArrayBuffers。这意味着您可以创建自己的格式或使用可能比 JPEG 或 PNG 更适合您需要的其他格式。

一个例子是[紧缩](http://code.google.com/p/crunch/ "紧缩")

# android - 在 .net 中实现从移动应用程序到服务器的同步

> ID：10777790
> 
> 赞同：0
> 
> 时间：2012-05-27T22:41:09.957
> 
> 标签：android, .net, ios, cordova, sync

我正在计划一个使用[phonegap](http://phonegap.com/)构建的移动应用程序，它将用户数据与服务器同步。可以在应用程序上或通过服务器上的 Web 界面编辑数据，并且一些用户将拥有多个设备，因此需要全部同步。

有人知道这类事情的良好指南/教程/模式吗？我可以手动编写所有代码，但我确信我会犯很多常见错误，最好使用库或遵循一些好的规则。

如果我在 java 中做服务器，那么像[OpenMobster](http://code.google.com/p/openmobster/)这样的东西听起来不错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:06:05.023

你检查过[同步框架工具包](http://code.msdn.microsoft.com/silverlight/Sync-Framework-Toolkit-4dc10f0e)吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T07:11:24.493

我想做同样的事情并找到了[https://github.com/orbitaloop/WebSqlSync/](https://github.com/orbitaloop/WebSqlSync/)。我还没有在愤怒中使用它，但它看起来不错。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T21:19:01.603

只是为了在您的研究中不遗余力。

要使用 OpenMobster，您的服务器不必使用 Java。如果是的话，它会有所帮助，但是您可以使用任何语言或平台来使用您的服务器。您所要做的就是通过安全的 REST API 公开您的数据。

然后，您编写通过此 REST 接口访问数据的 OpenMobster 同步通道。是的，这个同步通道必须用 Java 编写，因为它插入到核心同步引擎中。

所以从架构上讲，你的服务器和移动设备之间会有 OpenMobster 服务器。

在移动遗留数据库、CRM 系统、ERP 服务器、SalesForce.com 等时，这是相同的架构

全面披露：我是 OpenMobster 项目的总工程师

# git - Git/Mercurial/Darcs 的静态 Web 前端

> ID：10777792
> 
> 赞同：10
> 
> 时间：2012-05-27T22:42:00.297
> 
> 标签：git, mercurial, darcs

最近我发现了[git2html](http://hssl.cs.jhu.edu/~neal/git2html/)项目：*git2html 是一个简单的 git web 界面。与其他 Web 界面不同，git2html 不会动态生成内容：它不使用 CGI 脚本，而是生成静态 HTML 页面。*

我的问题很简单。你知道有类似目标的 Git、Mercurial 或 Darcs 的其他项目吗？我对这些 DVCS 的静态 Web 前端很感兴趣，但如果您想为不同的开源 DVCS 评论其他项目，这是公平的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T08:29:38.187

Mercurial 的等价物是 [**站点**扩展](http://draketo.de/proj/hgsite/)。

该扩展生成一组静态 HTML 页面，您可以在其中浏览提交消息、差异等。它们类似于您开始使用的内置网络服务器`hg serve`，但它们是静态的。

你也可以`hg clone`从这样的网站。这不是因为扩展，而是因为 Mercurial 可以从任何 Web 可访问的`.hg`目录进行克隆。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T02:38:16.943

Mercurial 具有访问静态存储库的内置功能。如果`.hg`repo 位于静态 http 服务器的 web 根目录中，则可以从中克隆它（尽管速度很慢）。当然，这不是一个人性化的 UI，但是一旦人们可以克隆，他们就可以使用 hte`hg`命令行工具在本地或`hg serve`本地做任何他们想做的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T17:45:22.597

不完全是您所要求的，但如果服务器负载是问题，[http://blitiri.com.ar/p/darcsweb/](http://blitiri.com.ar/p/darcsweb/) CGI 脚本在第一次查看后将呈现的页面缓存为静态 html 文件，因此性能非常好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T00:59:24.187

我没有找到其他类似的项目，并且来自“大企业”环境，我可以看到这种方法在遇到以下问题时可能*无法很好地扩展：*

*   众多的存储库
*   大量历史记录（提交/分支/标签的数量）

类似的方法（在提取必要的信息并对其进行处理方面）被像[Sonar](http://www.sonarsource.org/)这样的静态分析工具使用，它[需要大量磁盘空间](http://docs.codehaus.org/display/SONAR/Requirements)。
这也不能很好地扩展。

# javascript - 无法发布 Open Graph 操作，我收到奇怪的响应

> ID：10777793
> 
> 赞同：0
> 
> 时间：2012-05-27T22:42:31.660
> 
> 标签：javascript, facebook, facebook-graph-api

我的代码过去可以工作，但现在我无法发布任何操作。一切似乎都井井有条，但我从 Facebook 得到的响应是我最近执行的 25 个操作的 JSON 列表。我知道我的动作没有发布，因为我正在浏览器中观看它。我也在尝试使用浏览器发布这些操作。

这是我的代码：

`https://graph.facebook.com/me/NAMESPACE:ACTION?OBJECT=http://www.example.com/pumpkinpie.html&access_token=TOKEN`

响应是其中的 25 个：

```
{
"data": [
  {
     "id": ""****"",
     "from": {
        "id": ""****"",
        "name": "****"
     },
     "start_time": "2012-05-05T04:56:38+0000",
     "end_time": "2012-05-05T04:56:38+0000",
     "publish_time": "2012-05-05T04:56:38+0000",
     "application": {
        "id": ""****"",
        "name": ""****"
     },
     "data": {
        "website": {
           "id": ""****"",
           "url": "****",
           "type": "website",
           "title": "****"
        }
     },
     "likes": {
        "count": 0
     },
     "comments": {
        "count": 0
     }
  }, 
```

当然*** * 是实际值...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T00:36:17.177

您不能为浏览器中的操作执行 HTTP POST，只能执行 HTTP GET，这就是您收到先前操作列表的原因。

请使用 cURL 或 Graph API Explorer 来完成创建动作。

# php - 如何重置 GET 变量

> ID：10777795
> 
> 赞同：0
> 
> 时间：2012-05-27T22:42:47.860
> 
> 标签：php

请原谅我的 PHP 菜鸟！我想要一个页面来显示基于传入链接的特定导航。它的设置如下：

page1.php 列表项：

```
<li><a <?php if (strpos($_SERVER['PHP_SELF'], 'wood-species.php')) echo 'class="current"';?>href="wood-species.php?name=standard">Wood Species</a></li> 
```

page2.php 列表项：

```
<li><a <?php if (strpos($_SERVER['PHP_SELF'], 'wood-species.php')) echo 'class="current"';?>href="wood-species.php?name=premium">Wood Species</a></li> 
```

因此，第一个链接将使用 GET 方法将 name 变量设置为“标准”，第二个链接将其设置为“高级”。所以我想要发生的是'wood-species.php' 显示与适当的导航，但我不知道如何销毁或取消设置'name' 变量。

这是我尝试使用的，显然没有完成......

```
 <?php

    $woodclass = $_GET['name'];
    if($woodclass="premium") {
    require("includes/premium-wide-navigation.php"); 
    echo"premium";
    clearit();
    }

    else if($woodclass="standard") {
    require("includes/standard-wide-navigation.php");
    echo"standard";
    clearit();
    }
    else {
    //
    }

    function clearit () {
    unset($GLOBALS['woodclass']);
    }

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T22:45:23.233

我认为 unset($_GET['name']); 应该做的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T22:49:51.857

您可以简单地使用取消设置变量`unset($myVar);`。

在这里阅读：http: [//php.net/manual/en/function.unset.php](http://php.net/manual/en/function.unset.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-29T20:13:20.913

`header("location: somewhere.php");`将摆脱任何 $_GET 变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-21T01:27:29.343

如果您正在处理条件并且您只想清除来自 url 的任何获取请求，您可以这样做

```
 if (!empty($_GET))
    header("Location: page.php"); 
```

这真的只适用于条件寿

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-06T16:54:40.300

使用 javascript

形式：

`<form method="get" action="<? print $_SERVER['PHP_SELF']; ?>"> <input type="text" name="number" size="5" maxlength="5">
<input type="submit" name="submit" value="Search"> <input id="refresh_custom_input" type="reset"> </form>`

Javascript：

```
//refresh GET variable
$('#refresh_custom_input').click(function() {

    var query = window.location.search.substring(1)

    if(query.length) {
       if(window.history != undefined && window.history.pushState != undefined) {
            window.history.pushState({}, document.title, window.location.pathname);
       }
    } 

    window.location.reload(); 
}); 
```

# python - 这个自动键 Python 脚本是否需要并发？

> ID：10777796
> 
> 赞同：2
> 
> 时间：2012-05-27T22:42:48.430
> 
> 标签：python, ubuntu, concurrency, hotkeys, autokey

我最近切换到 Ubuntu，我想念 autohotkey。我正在使用[自动](http://code.google.com/p/autokey/)键来重新创建我的热键环境。我已经重新映射`CapsLock`到`F13`使用[Xmodmap](http://emacs-fu.blogspot.com/2008/12/remapping-caps-lock.html)。

我需要做的：当`F13`被点击时，返回`<Esc>`。与按键一起使用时`F13`，触发热键。当`F13`被按住超过 1 秒并且没有热键释放时，什么也不返回。

Autokey 使用 Python 环境。这是我的计划：

```
 F13 is pressed
        Start a timer
        Start a thread listening for <CapsLock up> and if true, 
            if timer is less than 1 second && no hotkey was pressed
                exit script after returning <Esc> 
            exit script

        Start a thread that loops forever
            Listen for hotkey
                Play hotkey's function 
```

脚本在`CapsLock`发布时结束。

示例：我按`CapsLock`then `j`，输出为`Down arrow`.

在我开始编码之前我的问题是，我真的需要为此使用多个线程（并发）吗？这是最好的方法吗？我觉得有一种更简单的方法，而且我也从未使用并发编码。

**编辑：**我愿意接受任何方法来解决这个问题，即使它不是使用自动键或 python。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T08:29:43.803

在这种情况下，您绝对不需要使用线程。你可以这样做：

```
F13 is pressed
Start timer
While True:
    Listen for hotkey and capslock up
    if capslock up:
        if timer < 1: 
            return <Esc> and exit
        else: just exit
    elif hotkey:
        Execute hotkey function and exit 
```

我们退出的唯一两种方式是释放大写锁定或按下热键，而这两种中只有一种是我们需要担心的事件，因此我们可以在同一个线程中监听两者。

# jquery - jQuery Mobile 仅缩放图像

> ID：10777800
> 
> 赞同：8
> 
> 时间：2012-05-27T22:44:40.167
> 
> 标签：jquery, html, cordova, jquery-mobile, pinchzoom

我有一个工作的 JQM 应用程序，我想在其中显示一些图像。图像当前位于它们自己的 iframe 中，因此它们可以与应用程序分开滚动。

我也希望能够仅缩放 iframe 中的图像。

我意识到如果我调整以下代码片段，我可以启用捏缩放，但这为整个应用程序启用了它。

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" /> 
```

通过删除最大比例的捏缩放返回，但适用于所有内容。

有没有办法只为图像启用捏缩放？向 iframe 添加一个新的视口标签怎么样，如果可能的话，那会起作用吗？

更新

*   将 HTML 注入 iframe。添加了元标记，这没有帮助。

*   试过 .extend($.mobile.zoom, {locked:false,enabled:true}); 在 iframe 主体上，这什么也没做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T04:46:56.440

您可以在图像上执行此操作：

```
var image=document.getElementById('imageId');

image.addEventListener('gesturechange',function(e){

    if(e.scale>1){
        //zoom in 
        //increase the size of image according to the e.scale
    }

    else if(e.scale<1){
        //zoom out 
        //decrease the size of image according to the e.scale
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T21:39:49.337

作为一种（hack）解决方法，也许您可​​以检测用户何时执行捏合[手势](http://developer.apple.com/library/ios/DOCUMENTATION/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html#//apple_ref/doc/uid/TP40006511-SW23)，然后使用[CSS transform](https://developer.mozilla.org/en/CSS/transform#scale)缩放图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-27T18:33:09.243

使用某种小部件来放大/缩小图像就地工作吗？例如：http: [//0.s3.envato.com/files/78471334/index.html](http://0.s3.envato.com/files/78471334/index.html)
[https://github.com/timmywil/jquery.panzoom](https://github.com/timmywil/jquery.panzoom)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T17:58:46.453

事实证明，最好的方法是使用 ChildBrowser 插件。这在 IOS 和 Android 上非常适合图像。

IOS子浏览器：

```
 https://github.com/purplecabbage/phonegap-plugins/tree/master/iPhone/ChildBrowser 
```

安卓子浏览器：

```
 https://github.com/phonegap/phonegap-plugins/tree/master/Android/ChildBrowser 
```

然后，一旦完成所有设置，您就可以打开 URL 或本地文件，如下所示：

```
 window.plugins.childBrowser.onLocationChange(location); 
```

请注意，在 IOS 和 Android 之间的完全跨平台设置中，它们都需要不同版本的插件。IOS 需要在 onDeviceReady 中初始化 ChildBrowser，Android 不需要。

# css - 如何将 3 个元素浮动在彼此上方并在左侧浮动？

> ID：10777803
> 
> 赞同：2
> 
> 时间：2012-05-27T22:45:05.780
> 
> 标签：css, position

我想将右侧的 3 个输入元素对齐，彼此上方。和左边的文本区域。就像这样：[http](http://cl.ly/Gvzo) ://cl.ly/Gvzo 我如何使它工作？

```
<div id="contact">
<form action="php/contact/contactengine.php" method="post">
<fieldset>

<input id="Name" name="Name" placeholder="Enter your full name" type="text">                        

<input id="Email" name="Email" placeholder="Enter your email address" type="email">

<input type="submit" name="submit" value="Send your message">                              

<textarea id="message" name="Message" placeholder="What's on your mind?"></textarea>

</fieldset>
</form>
</div> 
```

我的 CSS：

# 接触 {

```
width: 670px; 
```

}

输入 {

```
float:right;
width: 251px; 
height: 50px; 
padding: 0px 20px 0px 20px; 
margin: 0 0 20px 0;   
background: #fcfcfc;
border-radius: 4px;
-moz-border-radius: 4px;
-webkit-border-radius: 4px;
border:1px solid #d6d6d6;
box-shadow:inset 0 0 4px #d6d6d6;
-moz-box-shadow-inset: inset 0 0 4px #d6d6d6;
-webkit-box-shadow: inset 0 0 4px #d6d6d6;
font-size: 13px; 
font-weight:bold; 
color: #2a2a2a; 
```

}

文本区域 {

```
float:left;
width: 251px; 
height: 170px; 
padding: 12px 20px 12px 20px; 
margin: 0px; 
background: #fcfcfc;
border-radius: 4px;
-moz-border-radius: 4px;
-webkit-border-radius: 4px;
border:1px solid #d6d6d6;
box-shadow:inset 0 0 4px #d6d6d6;
-moz-box-shadow-inset: inset 0 0 4px #d6d6d6;
-webkit-box-shadow: inset 0 0 4px #d6d6d6;
font-size: 13px;
font-weight:bold; 
color: #2a2a2a;  
resize:none; 
```

}

输入[类型=提交] {

```
float:right;
border:none;
font-size:16px;
width: 293px; height: 51px;
float: right; 
padding: 7px 20px 10px 10px; 
margin:0px;
background: url(../../img/contactsendbutton.png) no-repeat;
cursor: pointer;
color:#fff;
text-shadow:1px 1px 1px #000; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T00:07:12.887

我编辑了这个答案，因为它并不完全准确。首先，在 CSS 中通过 ID 识别 div 的方法是在其前面放置一个“#”字符。

使用浮动时放置元素的顺序是相关的。当您第一次在右侧创建元素时，它们会彼此相邻放置，从右侧开始，直到不合适为止。在这种情况下（因为尚未创建左侧文本区域），它会在到达包含它的 div 的另一侧时停止。

如果你先创建左边的textarea，右边的浮动元素就不能并排放置，所以它们会被放置在彼此的下方。

您必须始终牢记其父级的边距、宽度和宽度。

在代码中应该有点像这样： **HTML:**

```
<div id="contact">
        <form action="php/contact/contactengine.php" method="post">
            <fieldset>

                    <textarea id="message" name="Message" placeholder="What's on your mind?"></textarea>

                    <input id="Name" name="Name" placeholder="Enter your full name" type="text">                        

                    <input id="Email" name="Email" placeholder="Enter your email address" type="email">

                    <input type="submit" name="submit" value="Send your message">

            </fieldset>
        </form>
    </div> 
```

**CSS：**

```
 #contact {
        width: 670px;
        }

        input {
        float:right;
        width: 251px; 
        height: 50px; 
        padding: 0px 20px 0px 20px; 
        margin: 10px;   
        background: #fcfcfc;
        border-radius: 4px;
        -moz-border-radius: 4px;
        -webkit-border-radius: 4px;
        border:1px solid #d6d6d6;
        box-shadow:inset 0 0 4px #d6d6d6;
        -moz-box-shadow-inset: inset 0 0 4px #d6d6d6;
        -webkit-box-shadow: inset 0 0 4px #d6d6d6;
        font-size: 13px; 
        font-weight:bold; 
        color: #2a2a2a;  
        }

        textarea {

        float:left;
        width: 251px; 
        height: 170px; 
        padding: 12px 0px 12px 20px; 
        margin: 10px; 
        background: #fcfcfc;
        border-radius: 4px;
        -moz-border-radius: 4px;
        -webkit-border-radius: 4px;
        border:1px solid #d6d6d6;
        box-shadow:inset 0 0 4px #d6d6d6;
        -moz-box-shadow-inset: inset 0 0 4px #d6d6d6;
        -webkit-box-shadow: inset 0 0 4px #d6d6d6;
        font-size: 13px;
        font-weight:bold; 
        color: #2a2a2a;  
        resize:none;
        }

        input[type=submit] {

        float:right;
        border:none;
        font-size:16px;
        width: 251px; height: 50px;
        float: right; 
        padding: 7px 20px 10px 10px; 
        margin:10px;
        background: url(../../img/contactsendbutton.png) no-repeat;
        cursor: pointer;
        color:#fff;
        text-shadow:1px 1px 1px #000;
        } 
```

# facebook - 订阅按钮未向我的电子邮件发送新订阅者的通知

> ID：10777806
> 
> 赞同：1
> 
> 时间：2012-05-27T22:45:44.403
> 
> 标签：facebook, button, subscribe

当用户按下我网站上的订阅按钮（作为新订阅者）时，它会变成灰色，但我的电子邮件没有收到任何通知消息。该页面是：[http ://www.en4u.co.il](http://www.en4u.co.il)

这是我的代码：

iframe src="//www.facebook.com/plugins/subscribe.php?href=https%3A%2F%2Fwww.facebook.com%2Fezraelias&layout=button_count&show_faces=false&colorscheme=light&font&width=450" scrolling="no" frameborder=" 0" 样式="边框：无；溢出：隐藏；宽度：450px；" allowTransparency="true">

错误在哪里？谢谢盖尔·卡哈纳

# data-structures - 循环数据结构交付系统的名称？

> ID：10777811
> 
> 赞同：0
> 
> 时间：2012-05-27T22:46:29.013
> 
> 标签：data-structures

假设我有一个数据结构，它本质上是一个循环链表。这个循环链表的用途是不断地遍历，并在每个节点上，将那个节点的数据传递给消费者。因此，相同的东西在循环链表中出现的频率越高，传递给消费者的频率就越高。

这个数据结构有名字吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T23:02:30.213

循环队列、循环缓冲区、循环缓冲区或环形缓冲区。我认为[循环缓冲区](http://en.wikipedia.org/wiki/Circular_buffer)是我听过的最常见的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:48:38.317

环形缓冲区。

# .htaccess - htaccess 问题和重写条件

> ID：10777813
> 
> 赞同：0
> 
> 时间：2012-05-27T22:46:46.200
> 
> 标签：.htaccess, rewrite

这是我当前的脚本...我需要允许“sub.domain.com/register/USER”

目前，我有一个“sub.domain.com”的重写条件，它指向“sub.domain.com/login”

我究竟做错了什么？

```
<IfModule mod_rewrite.c>
RewriteEngine on

RewriteCond %{HTTP_HOST}  !^www.domain.com$
RewriteCond %{HTTP_HOST}   ^(.+).domain.com$
RewriteRule ^register(.*) https://%1.domain.com/register$1 [L,R=302,QSA]

RewriteCond %{HTTP_HOST}   ^(.+).domain.com$
RewriteRule ^$ https://%1.domain.com/login/ [L,R=302]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

截至更新，我在 /register/USER.. 中有一个重定向循环

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T22:50:19.833

用这个替换你的第一组规则：

```
RewriteCond %{HTTP_HOST}  !^www.domain.com$
RewriteCond %{HTTP_HOST}   ^(.+).domain.com$
RewriteRule ^register(.*) - [L,R=302,QSA] 
```

**编辑**：也许更好的解决方案是仅当 URI 不是 /register/user 时才重写。所以去掉上面的规则，把下面的改成：

```
RewriteCond %{HTTP_HOST}  !^www.domain.com$
RewriteCond %{HTTP_HOST}   ^(.+).domain.com$
RewriteCond %{REQUEST_URI} !^/register/?.*
RewriteRule ^(.*)$ https://%1.domain.com/login/ [L,R=302] 
```

# java - 如何使用 MAC 地址在 LAN 内发送消息

> ID：10777815
> 
> 赞同：1
> 
> 时间：2012-05-27T22:47:10.267
> 
> 标签：java, macos

我有一个与java编程相关的查询。我有两个 wifi 模块连接到我的接入点，我的 android 手机连接到同一个接入点。我可以仅使用 MAC 地址从手机向两个模块中的任何一个发送字符串消息吗？我不想在我的手机上创建服务器。

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T22:59:39.843

> “我可以只使用 MAC 地址从我的手机向两个模块中的任何一个发送字符串消息吗？”

理论上：是的，但是很辛苦。

您需要为此实现一个传输层协议。什么反对使用 IP 堆栈？与仅基于以太网发送消息相比，它有更多的开销，但与您必须投入构建自己的协议栈的努力相比，这种开销是完全可以的。

> “我不想在手机上创建服务器。”

您无需在手机上创建服务器。其他两个模块确实需要一个“服务器”来监听来自您手机的消息。您的手机需要运行能够将消息发送到其他两个模块的客户端。

请不要在这里误解我的意思，但是从您提出的问题来看，我会说在这种知识很少的情况下从事这样的项目会非常令人沮丧。

如果您想完成它，我建议您看看 Jpcap。它是一个 Java 库，旨在捕获和发送网络数据包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T23:05:16.450

除非您准备使用第三方的东西，否则您不能在 Java 中基于 MAC 地址执行任何 I/O。

# css - 使元素“填充”可用高度

> ID：10777817
> 
> 赞同：0
> 
> 时间：2012-05-27T22:47:28.350
> 
> 标签：css, position

我正在制作一个类似的窗口`position:absolute;`。

正如[在 jsbin 上](http://jsbin.com/ojuceq)看到的，“窗口”有一个标题栏及其内容：

```
<div class="l">
<div class="t">
<h4>Title</h4>
</div>
<div class="x">
    <!--contents-->
</div>
</div> 
```

我的风格如下：

```
div.l{position:absolute;background:#aaf;width:70%;height:200px;padding:1em;}
div.t{padding:1px;background:#af9;}
div.x{padding:1em;background:#a87;height:100%;overflow:auto;} 
```

我遇到的问题是让 div`x`占用所有可用空间并`overflow:auto;`进入可滚动区域。

由于 div`l`有一个确定的大小，我可以应用`overflow:auto;`它并有一个可滚动的区域，但整个标题、`div.t`、 也[可以滚动，请参见此处](http://jsbin.com/uwukat)。

* * *

我需要 div`x`来填充剩余空间，直到底部`1em`填充，以便我可以使用`overflow:auto;`它。

有没有办法做到这一点而不做`div.x`绝对定位？或者至少不知道高度`div.t`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-02T16:13:19.900

我认为现在很清楚答案是否定的，不可能`div.x`填补剩余的高度。

也许 CSS3 flexbox 可以做到这一点，但是当我问它时，这超出了问题的范围，并且可能属于一个单独的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T00:50:27.083

我认为这只有在你设置高度时才有可能`div.t`。这是一个示例：http: [//jsfiddle.net/gmncc/](http://jsfiddle.net/gmncc/)

# facebook - 搜索 Facebook 公共事件

> ID：10777819
> 
> 赞同：3
> 
> 时间：2012-05-27T22:48:58.500
> 
> 标签：facebook, events, search, facebook-graph-api, public

从 facebook 文档中我知道

```
https://graph.facebook.com/search?q=conference&type=event 
```

将在所有公共活动的名称和描述中搜索“会议”一词。

是否可以在不指定“查询”参数的情况下搜索所有事件？基本上我不想将搜索限制为关键字，我想获取所有公共事件（当然我会使用位置字段限制研究）。

还有我可以用来在事件之间搜索的可能类别列表吗？使用查询特别为语言设置了限制（在不同的国家，我必须搜索不同的关键字，而不是使用类别来解决这个问题）。

多谢

克劳斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:33:55.267

您需要指定一个`q`（查询）参数，但您可以使用该`fields`参数来指定您正在搜索的字段。您可以通过使用此参数来实现您想要做的事情。

有关更多信息，请参阅[https://developers.facebook.com/docs/reference/api/#searching](https://developers.facebook.com/docs/reference/api/#searching)。

# gradle - 修复 Gradle 依赖于弃用警告

> ID：10777820
> 
> 赞同：2
> 
> 时间：2012-05-27T22:49:02.260
> 
> 标签：gradle

我将构建环境升级到最新版本的 gradle (1.0-rc3)。我收到以下弃用警告：

***“Project.dependsOn(String path) 方法已被弃用”***

我修复了我的所有任务依赖引用以使用对象引用，但我不知道如何修复多项目项目的依赖引用。我有一个项目依赖于另一个项目。这是 build.gradle 脚本顶部的定义：

```
dependsOn(':projects/arch/application') 
```

如何将此字符串引用转换为对项目的对象引用？我查看了 gradle 文档，但它仍然引用了不推荐使用的字符串语法（下面的链接）。

[http://www.gradle.org/docs/current/userguide/multi_project_builds.html](http://www.gradle.org/docs/current/userguide/multi_project_builds.html)

这种语法在今天有效，但弃用警告告诉我将来不会。我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T23:57:42.683

弃用警告不是关于将字符串引用更改为对象引用（甚至没有`Project.dependsOn()`接受对象的方法）。这是关于放弃`Project.dependsOn()`并且只使用`Task.dependsOn()`.

在 Gradle 中，执行依赖总是在任务之间。`Project.dependsOn()`是一种将项目 A 中的每个任务的任务依赖项添加到项目 B 中同名任务（如果存在）的方法。实践表明，这个特性没有什么价值，而且经常被误解，因此被弃用。

# css - 在 IE 中不尊重 DIV 100% 高度

> ID：10777822
> 
> 赞同：1
> 
> 时间：2012-05-27T22:49:35.943
> 
> 标签：css, html

我有一个使用表格的旧布局，我需要制作一个 DIV 来使用 TD 的整个空间。CSS 在 Firefox 中运行良好，但 IE 将 100% 高度解释为整个窗口，并且没有考虑页面上其他元素的存在。

在这个小提琴中可以看到一个工作示例：http: [//jsfiddle.net/micahSan/JeA6m/](http://jsfiddle.net/micahSan/JeA6m/)

Firefox 会将 DIV 视为剩余内容的 100% 高度，但 IE 会将其视为整个页面的 100%。

如何让 IE 匹配 Firefox？

预先感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T23:41:50.027

我不知道是否存在更清洁的解决方案，但`IE`仍然存在问题:-(我仍然不明白为什么许多使用`IE`so guy 的人仍然必须为...创建单独的`CSS`样式，`IE`所以让我们回到这里。问题是`IE`不要我认为不尊重`height`。所以我创建了这个临时解决方案，将其添加到您的`<TD>`文件中`<TABLE>``CSS`

```
#big_cell {
    height:100%;
    height: 45% !important;

} 
```

所以这`height: 45% !important`是 IE hack，它只适用于 IE。

* * *

或者，`height`由于这些问题，您可以使用`spacer`. 例如，您可以设置所需高度的透明小图片。

# java - Apache Camel 示例在表中插入一行

> ID：10777825
> 
> 赞同：7
> 
> 时间：2012-05-27T22:50:00.453
> 
> 标签：java, jdbc, apache-camel

我想将 exchange.body 插入到数据库表中，以获取我的路由条件之一。

*   是否有骆驼-jdbc 组件插入消息正文的示例/教程？
*   我可以导入 SQL 语句本身并将 exchange.body 传递给它吗？

我查看了[http://camel.apache.org/jdbc.html](http://camel.apache.org/jdbc.html)示例，但无法理解。

这里的 Spring 示例让我感到困惑。我不明白为什么将正文设置为 SQL 查询并再次从类路径中导入一些查询。（这里没有提到插入查询示例。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T10:33:36.467

如果您想使用**相同的语句**插入（仅更改参数） - 使用[SQL 组件](http://camel.apache.org/sql-component.html)。

如果要在组件中插入**任意 SQL 语句**，请使用[JDBC 组件](http://camel.apache.org/jdbc.html)。

SQL组件用法：

```
from("direct:start").to("sql:insert into table foo (c1, c1) values ('#','#')");

com.google.common.collect.Lists;
producerTemplate.sendBody("direct:start", Lists.newArrayList("value1","value2")); 
```

JDBC组件用法：

```
from("direct:start").to("jdbc:dataSource");

producerTemplate.sendBody("direct:start", "insert into table foo (c1, c1) values ('value1','value2')"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-28T21:57:42.800

无论如何，您可能需要在插入有效负载之前对其进行一些重组，因此使用 Camel 中的任何方法进行转换以将正文设置为适当的 INSERT 语句应该没有问题。

重要的是您的传入消息具有什么样的有效负载结构。在基本情况下 - 它是一个字符串 - 它应该相当简单

```
// In a Java bean/processor before the JDBC endpoint.
// Update: make sure to sanitize the payload from SQL injections if it contains user inputs or external data not generated by trusted sources.
exchange.getIn().setBody("INSERT INTO MYTABLE VALUES('" + exchange.getIn().getBody(String.class) + "', 'fixedValue', 1.0, 42)"); 
```

如果您的消息包含复杂的数据结构，则此代码当然会更复杂，但这与常规应用程序生成 SQL 查询的方式几乎相同。

您所指的类路径示例

```
 <jdbc:embedded-database id="testdb" type="DERBY">
        <jdbc:script location="classpath:sql/init.sql"/>
 </jdbc:embedded-database> 
```

简单地展示如何通过启动嵌入式数据库服务器 (Apache Derby) 并使用一些初始数据（sql/init.sql 文件）填充它来测试 JDBC 组件。这部分实际上并不是核心 jdbc 组件的一部分，而只是在文档中启动和运行示例，而无需配置 DB 服务器和设置 JDBC 连接属性。

也就是说，您可能希望将 SQL 组件用于更复杂的场景。

# c#-4.0 - 递归处理自引用实体的算法

> ID：10777828
> 
> 赞同：2
> 
> 时间：2012-05-27T22:50:13.843
> 
> 标签：c#-4.0, recursion, entity-framework-4.3

我有以下实体定义：

```
public class Member
{
  [Key] public int Id { get; set; }
  [Required] public string Name { get; set; }

  [Required] public ICollection<Group> Groups { get; set; } // Must be a member of at least one group
}

public class Group
{
  [Key] public int Id { get; set; }
  [Required] public string Name { get; set; }

  public int? ParentGroupId { get; set; }
  public Group ParentGroup { get; set; }

  public ICollection<Member> Members { get; set; } // Must contain at least one member (unless it contains subgroups - see below)
} 
```

以及 Fluent 映射配置：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    // Many-to-Many Group <--> Member
    modelBuilder.Entity<Group>()
      .HasMany(g => g.Members)
      .WithMany(m => m.Groups)
      .Map(map =>
            {
              map.ToTable("GroupMembers");
              map.MapLeftKey("GroupId");
              map.MapRightKey("MemberId");
            });

    // Self-referencing Group to allow for hierarchy of groups
    modelBuilder.Entity<Group>()
      .HasOptional(g => g.ParentGroup)
      .WithMany()
      .HasForeignKey(pg => pg.ParentGroupId);
} 
```

验证规则如下：

*   A`Member` *必须*属于至少一个`Group`
*   A`Group` *必须*包含`Members`; 如果 a`Group`没有成员，则它*必须*是包含子组的父组，所有子组*必须*至少包含一个成员。实际上，子组的成员应由父组继承（但仅在概念上，父组仍应失去实际成员）
*   非父级`Group` *必须*包含至少一个成员

那么，我该如何验证呢？我需要找到所有没有成员的组，检查每个组是否“包含”子组，然后对每个子组递归执行相同的检查，直到我最终得到非父组 - 此时我检查每个组是否包含成员。

我不知道如何优雅地做到这一点。我没有花几个小时盯着可能不正确的代码，绕着圈子编写和重构到遗忘，每隔几分钟就撞到墙上，我决定寻求 StackOverflow 智库的帮助。:)

递归是要走的路，还是有更好的选择？提前致谢。

# python - C 等效于 Python 代码 struct.pack？

> ID：10777831
> 
> 赞同：-3
> 
> 时间：2012-05-27T22:50:56.543
> 
> 标签：python, c

> **可能重复：**
> [Python 包的 C 等效项是什么（“<I”，0）](https://stackoverflow.com/questions/10771070/what-is-the-c-equivalent-of-pythons-packi-0)

如何在 Python 中复制代码：

```
from struct import pack
string = pack("<I", 0x11111111)
print string 
```

在 C? 据我了解 \x11 是一个不可打印的字符，所以......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T22:53:27.433

```
const char *string = "\x11\x11\x11\x11";
puts(string); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T22:57:18.843

```
char* memory = (char*)malloc(5); //4 bytes plus null
for(uint i=0;i<4;i++){
  memory[i] = 0x11; //creating a little-endian 4byte \0x11111111 
  // avoiding local endianess issues
};
memory[4] = 0; //To make it into a string
printf("%s\n", memory);
free(memory); 
```

# qt - 将小部件拖动到窗口将不起作用

> ID：10777832
> 
> 赞同：1
> 
> 时间：2012-05-27T22:50:56.853
> 
> 标签：qt, drag-and-drop, qt-creator

我现在使用 Qt Creator 几个月了，有时我在将按钮、行编辑等小部件从工具箱拖到窗口时遇到问题。

我尝试删除布局，但仍然遇到同样的问题。

我在 OS X 10.7.2 上使用 Qt Creator 2.4.0

感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T11:20:46.130

我通过在 OS X 上将 Qt Creator 升级到版本 2.4.1 解决了这个问题

@spyke 上面描述的[解决方案可能对 Windows 用户也有帮助。](http://qt-project.org/forums/viewthread/8378)

如果有死链接，Windows 的解决方案说：

> 发生此问题时，我正在使用 Qt Designer for Qt Jambi 在 Windows 7 ×64 上使用 Qt 4.6.4 构建。过了一会儿，我意识到问题不仅在 Qt 设计器中，而且在一般 Windows 中：资源管理器、FileZilla 等等。
> 
> 然后通过搜索一般的 Windows 7 拖放问题 [answers.microsoft.com] 找到了解决方案。
> 
> 简而言之：单击并按住鼠标左键在 Windows 资源管理器中选择一个文件。在按住按钮的同时，按 Esc 键。然后拖放再次开始工作。

# c# - ListPicker 关闭时未调用 SummaryForSelectedItemsDelegate

> ID：10777835
> 
> 赞同：2
> 
> 时间：2012-05-27T22:51:55.493
> 
> 标签：c#, windows-phone-7, windows-phone-7.1, listpicker

我正在使用多选 ListPicker（2011 年 11 月 7.1/Mango 控制工具包中的新选项）。

我的代码在下面 - ListPicker 的“普通”用例，除了我使用新 List 初始化 SelectedItems 依赖项属性，因此我可以向其中添加内容并正确初始化 ListPicker 的选定状态。虽然这个问题重现的是我是否这样做......

初始化列表时会调用 SummaryForSelectedItemsDelegate（例如，当我调用 contactPicker.SetValue(ListPicker.SelectedItemsProperty) 时），但不会在我单击 ListPicker 上的“完成”按钮时调用（尽管确实调用了我的 SelectionChanged 事件处理程序）。

一旦我关闭 ListPicker，我只会得到与控件“摘要”中第一个选定项相对应的字符串（与调用我的委托并获取以逗号分隔的选定项列表相反的控件）。

这是一个错误吗？有没有其他人遇到过这个？有解决方法吗？

```
var contactPicker = new ListPicker()
{
    MinWidth = minWidth,
    ExpansionMode = ExpansionMode.FullScreenOnly,
    SelectionMode = SelectionMode.Multiple,
    SummaryForSelectedItemsDelegate = (list) => { return CreateCommaDelimitedList(list); },
    IsTabStop = true
};

contactPicker.ItemsSource = listOfItems;
contactPicker.DisplayMemberPath = "Name";
contactPicker.SetValue(ListPicker.SelectedItemsProperty, new List<Item>());

// initialize the list picker selected values
foreach (var contactRef in listOfSelectedContacts)
    contactPicker.SelectedItems.Add(contactRef);

contactPicker.SelectionChanged += new SelectionChangedEventHandler((o, ea) => 
{
    // add all the newly added items
    foreach (var added in ea.AddedItems)
    {
        Item addedItem = added as Item;
        if (addedItem == null)
            continue;
        listOfSelectedContacts.Items.Add(addedItem);
    }

    // remove all the newly removed items
    foreach (var removed in ea.RemovedItems)
    {
        Item removedItem = removed as Item;
        if (removedItem == null)
            continue;
        listOfSelectedContacts.Items.Remove(removedItem);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T23:06:17.810

我应该发布我的摘要代表......这实际上是我的错误所在:-(

即使我将 SelectedItems 创建为列表，并且传入的 IList 中的每个元素都键入“Item”，但传入的 IList 的具体类型不是列表。因此空值检查成功并且该方法返回空值。当然，我的断点就在该行之后，所以看起来该方法没有被调用。呃。

```
 private string CreateCommaDelimitedList(IList ilist)
    {
        IList<Item> list = ilist as IList<Item>;
        if (list == null)
            return null;

        // build a comma-delimited list of names to display in a control
        List<string> names = list.Select(it => it.Name).ToList();
        StringBuilder sb = new StringBuilder();
        bool comma = false;
        foreach (var name in names)
        {
            if (comma)
                sb.Append(", ");
            else
                comma = true;
            sb.Append(name);
        }
        return sb.ToString();
    } 
```

# ios - 选择器视图的替代方案

> ID：10777837
> 
> 赞同：2
> 
> 时间：2012-05-27T22:52:35.620
> 
> 标签：ios, uipickerview

是否有任何其他 UI 对象用于在不是选择器视图的变量之间进行选择？

我对 iOS 开发非常陌生，我想创建一个用户填写表格的应用程序。

要在一小组变量之间进行选择，例如“男性”或“女性”，以及“大学”、“高中”或“儿童”，我更喜欢下拉列表，但我能找到的唯一接近的是一个选择器视图。问题是选择器视图很大，当只有 2 或 3 个变量时似乎没有必要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T22:55:33.170

在 iOS 中处理此问题的常用方法是将 a 压入`UITableViewController`堆栈`UINavigationController`，每个选项一行。使用委托方法传回选定的选项。

如果要显示已选择的选项，请将`cell.accessoryType = UITableViewCellAccessoryCheckmark`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T04:24:15.050

我会使用 UISegmentedControl

[http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UISegmentedControl_Class/Reference/UISegmentedControl.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UISegmentedControl_Class/Reference/UISegmentedControl.html)

```
[NSArray arrayWithObjects: @"Male", @"Female", nil];
UISegmentedControl *segmentedControl = [[UISegmentedControl alloc] initWithItems:itemArray];
segmentedControl.frame = CGRectMake(35, 200, 250, 50);
segmentedControl.segmentedControlStyle = UISegmentedControlStylePlain;
segmentedControl.selectedSegmentIndex = 1;

// replace self.view with whatever your view is.. alternatively you can also add a UISegmentedControl with Interface Builder in your XIB file.
[self.view addSubview:segmentedControl]; 
```

# php - 从基于 REST 的 Web 服务调用 C++ 函数

> ID：10777839
> 
> 赞同：2
> 
> 时间：2012-05-27T22:52:58.953
> 
> 标签：php, c++, web-services, api, rest

我有一个 C++ API（后端），我想将它用作 Web 服务。我正在考虑使用 REST 作为前端和后端之间的接口。我找到了一堆用于 REST 的 C++ 库，但我最终想要的是保持 C++ API 清晰/独立于 REST 的东西，并在前端处理所有这些，从而保持 C++ API 的通用性和可重用性。关于如何去做的任何建议？

此外，我的 API 并不专注于数据集合，而是专注于处理数据，这些数据将作为 API 中包含的函数的输入提供。所以基本上，C++ 函数从 Web 接收输入数据，对其进行处理并返回输出数据。我只需要能够进行 API 调用，将输入数据作为参数传递并取回输出数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T23:33:50.563

所以我从标签中猜测您想要一个调用 C++ 函数的 PHP 服务器？

[如果是这样，您可以使用PHP 扩展](http://devzone.zend.com/1435/wrapping-c-classes-in-a-php-extension/)直接从 PHP 代码调用 c++ 例程。或者，使用 SWIG 为您的 C++ 代码创建一个包装器，或者将您的 C++ 例程放在一个可执行文件中并使用 system() 调用它，并将参数作为标准输入传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T00:41:46.770

我做这种事情的方式是使用 PHP 前端通过套接字与您的 C++ 后端通信。

您需要 C++ 和 PHP 端的包装层来序列化/反序列化您的调用。为此，有多种解决方案：您可以使用 XML、JSON、AMF、协议缓冲区、thrift 等。

这可以很好地扩展，因为您可以有多个 PHP 前端调用您的 C++ 后端 - 但只有当您的后端是有状态的时才真正需要。

如果后端不是有状态的，那么最好只使用`system`样式调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-25T03:47:19.267

我认为您可以为您的 API 创建一个包装器，将您的 api 函数转换为 rest 端点，并使用 DTO 将 REST 层与您的 api 分离，为此您可以使用 otapp，这是一个非常完整的 C++ REST 框架。

# php - 在文本上使用正则表达式查找 url

> ID：10777844
> 
> 赞同：1
> 
> 时间：2012-05-27T22:53:45.013
> 
> 标签：php, regex

有很多这样的主题，但我不知道我尝试了很多错误所以这是原文

```
onclick="NewWindow('http://google.com','name','800','600','yes');return false"> 
```

这是我的代码

```
 $re1='(onclick)';
  $re2='(=)';
  $re3='(.)';
  $re4='(NewWindow)';
  $re5='(\\()';
  $re6='(.)';
  $re7='((?:http|https)(?::\\/{2}[\\w]+)(?:[\\/|\\.]?)(?:[^\\s"]*))';

  $c=preg_match_all ("/".$re1.$re2.$re3.$re4.$re5.$re6.$re7."/is", $txt, $matches);

  print_r($matches); 
```

任何人都可以帮助我使用正则表达式和 php 获取 url？

这段代码有什么问题？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T23:04:23.507

```
preg_match("/NewWindow\('([^']*)'/",$txt, $matches); 
```

匹配[1] 包含网址

这是你需要的吗？

（编辑：放入代码块，因为括号未正确转义

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T23:12:09.320

这应该有效：

```
preg_match("/onclick=\"NewWindow\('(.*)','n/",$txt,$matches); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T23:17:38.713

根据您的描述，我将使用的正则表达式将是：

```
/(?<=NewWindow\(\').*(http://|https://)[^\'\"]*/i 
```

或者

```
/(?<=onclick=\"NewWindow\(\').*(http://|https://)[^\'\"]*/i 
```

测试正则表达式的好工具是： http: [//gskinner.com/RegExr/](http://gskinner.com/RegExr/)

它仅输出 url，并且仅在第一个示例中以“NewWindow（'”或“onclick =“NewWindow（'”）开头时才这样做，在您的情况下，这意味着“http://google.com”） .

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T23:23:54.297

我会为此使用非贪婪匹配：

```
preg_match("/onclick=\"NewWindow\('(.*?)'/", $txt, $matches); 
```

# visual-studio-2010 - 对我来说，大括号匹配突出显示在 VS2010 中不起作用

> ID：10777847
> 
> 赞同：1
> 
> 时间：2012-05-27T22:54:16.410
> 
> 标签：visual-studio-2010

出现大括号匹配的矩形，但不突出显示。我认为它可能与 emacs 键绑定有关，但它仍然不适用于默认键绑定。如果有什么不同，那就是 .cpp/h 文件给我带来了问题（没有尝试过其他语言）。我已经浏览了各种选项，但找不到任何可以关闭一种匹配形式而不关闭另一种匹配的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:54:32.733

我认为这与[这个](http://connect.microsoft.com/VisualStudio/feedback/details/534997/brace-matching-highlight-doesnt-work)已知问题有关。

每种语言都可以自由使用它从视觉样式中选择的任何设置，并且已知语言和所使用的设置之间存在不一致。

# ruby-on-rails-3 - 多态模型，但想要多个版本

> ID：10777850
> 
> 赞同：0
> 
> 时间：2012-05-27T22:55:11.923
> 
> 标签：ruby-on-rails-3, activerecord

我有一个多态资产模型，但想要一个资产类别的两个不同版本。就像是：

```
class Location < ActiveRecord::Base
  has_many :assets, :as => :assetable, :order => 'position'
  has_many :assets :known_as => :cover_images, :as => :assetable, :order => 'position' 
```

我看到了这个问题：[Rails Polymorphic Association with multiple associations on the same model](https://stackoverflow.com/questions/2494452/rails-polymorphic-association-with-multiple-associations-on-the-same-model)但是当我在 Rails 3.1 中用我的模型实现时，它看起来像：

```
has_many :assets, :as => :assetable, :order => 'position'
has_one :header_photo, :class_name => 'Asset', :as => 'assetable', :conditions => {:assetable_type => 'header_asset'}, :dependent => :destroy 
```

在控制台中，我看到：

```
SELECT `assets`.* FROM `assets` WHERE `assets`.`assetable_id` = 37 AND `assets`.`assetable_type` = 'Location' AND `assets`.`assetable_type` = 'header_asset' LIMIT 1 
```

这不是我想要的。

我该怎么做？有处理这个的语法吗？

谢谢

# android - Android：EditText 设计

> ID：10777851
> 
> 赞同：1
> 
> 时间：2012-05-27T22:55:11.840
> 
> 标签：android, image, android-layout, user-interface

我有一个 EditText 视图，我需要如下所示（重点和非重点版本）。

![在此处输入图像描述](../Images/c06ddcf15fa23878b3c07e6efb878865.png)

![在此处输入图像描述](../Images/085519247a0c9d3f0de4c5323edfb77c.png)

我还有以下两张图片：

![在此处输入图像描述](../Images/6d4be9d8affc3050ec266363eefcbd87.png) ![在此处输入图像描述](../Images/2cc79a69b470bfcab08158373f8820b1.png)

我可以以某种方式将这些图像设置为背景以使 EditText 看起来像上面，而不是取决于它的宽度吗？还是我需要创建一些额外的图像文件？还是其他解决方案？我是设计 UI 方面的完全新手，因此我将不胜感激任何帮助和对主题的任何评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T22:57:43.587

您首先需要为每个图像创建一个 9-patch 图形。这些指定如何拉伸图像，以及如何填充内容。

然后，您需要根据状态创建一个`selector`可绘制的 xml 以使用一个图像或另一个图像`EditText`。

# asp.net-mvc-3 - 如何改进 Razor 视图中的代码以根据文本内容更改文本的颜色

> ID：10777852
> 
> 赞同：3
> 
> 时间：2012-05-27T22:55:22.670
> 
> 标签：asp.net-mvc-3, razor

我的剃刀视图中有以下代码，可根据文本内容更改文本的颜色：-

```
string status = ViewData[vlr.LabTestID.ToString()].ToString();

              if (status.ToUpper().StartsWith("Erro".ToUpper()))
                {
        <td style="color: #b30000">
       @status
        </td>
                }
             else   if (status.ToUpper().StartsWith("With".ToUpper()))
                {
        <td style="color: #6b9e52">
        @status
        </td>}
              else  if (status.ToUpper().StartsWith("Below".ToUpper()))
                {
        <td style="color: #b30000">
        @status
        </td>}
             else   if (status.ToUpper().StartsWith("Above".ToUpper()))
                {
        <td style="color: #b30000">
        @status
        </td>}
              else  if (status.ToUpper().StartsWith("Cannot".ToUpper()))
                {
        <td style="color: #5c87b2">
        @status
        </td>}
             } 
```

但是有没有办法使用比上述更可靠和更简单的方法来执行相同的功能？BR

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T23:10:07.010

您可以为每种可能性定义一个 CSS 样式，然后让它发挥作用。

**剃刀**

```
<td class="@status.ToUpper()">
@status
</td> 
```

**CSS**

```
.ERRO
{
    color: #6b9e52;
}

.WITH
{
    color: #b30000;
} 
```

# sqlite - 移动应用的sqlite数据库

> ID：10777855
> 
> 赞同：1
> 
> 时间：2012-05-27T22:55:56.510
> 
> 标签：sqlite, lua, coronasdk

我正在使用 CoronaSDK 和 Lua 制作一个移动应用程序。我正在使用 sqlite 存储有关每个用户的信息。我正在执行以下操作来设置数据库文件。

```
require "sqlite3"
local path = system.pathForFile("data.db", system.DocumentsDirectory)
local db = sqlite3.open(path) 
```

我的问题是，这是否会为每个用户创建一个单独的文件，仅存储该用户信息，还是创建一个包含所有用户信息的文件。另外，文件是存储在用户的移动设备上还是在 Corona 端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T13:03:55.850

您的应用程序创建的所有文件仅存储在您的移动设备中！您的数据库文件也将如此。

关于另一个问题，它会在您用户的手机中创建一个文件，仅存储他的数据。每个运行您的应用程序的移动设备中都会有一个数据库文件来存储它们各自的信息。

要存储所有用户数据，您必须将它们存储在远程服务器或其他东西中。

# ios - NSXMLParser 编码错误

> ID：10777859
> 
> 赞同：0
> 
> 时间：2012-05-27T22:56:26.757
> 
> 标签：ios, xml, encoding, xml-parsing, nsxmlparser

我正在使用拉丁字符编写应用程序。以下是我用来通过 XML 解析获取数据的行。

```
NSURL *url = [NSURL URLWithString:urlString]; // urlString : param of the function
NSData *data = [NSData dataWithContentsOfURL:url];
parser = [[NSXMLParser alloc] initWithData:data]; 
```

但例如，**–**或**'**被替换为**¿**。所以我该怎么做 ？

我的 xml 文件的编码：

```
<?xml version="1.0" encoding="ISO8859-1"?> 
```

感谢您的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T14:48:01.457

你可以试试这个：

**œ** ==>`&oelig;`和 for **'** ==>`&apos;`

如果您需要更多字符，请使用：

[http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)

# objective-c - 如何通过错误代码识别 UIWebView 错误？

> ID：10777860
> 
> 赞同：1
> 
> 时间：2012-05-27T22:56:36.883
> 
> 标签：objective-c, ios, uiwebview

是否有 UIWebView 返回的代码列表`- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error`？例如“找不到具有指定主机名的服务器。” 返回 -1003。Apple 或其他任何人是否提供包含 UIWebView 返回的所有代码的列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T23:28:02.290

不是特别是 UIWebView，而是有包含网络错误代码的头文件。CFNetworkErrors.h 有实际数字， NSURLError.h 有 Cocoa 符号。您应该能够通过对这些文件名使用 Spotlight 来找到与您的 SDK 匹配的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-01T21:10:00.523

带有描述的 UIWebView 相关错误代码列表可在[Foundation Constants Reference](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html#//apple_ref/doc/uid/TP40003793-CH3g-SW40)或[CFNetWorkErrors enumeration](https://developer.apple.com/library/ios/documentation/Networking/Reference/CFNetworkErrors/Reference/reference.html)中找到。

# c - 在 C 中以编程方式获取网络链接类型和速度

> ID：10777866
> 
> 赞同：4
> 
> 时间：2012-05-27T22:58:14.650
> 
> 标签：c, linux, networking, network-programming

我想知道是否有一种更紧凑的方法来查找 Linux 中网络接口的链接速度和类型（无线、以太网），而不仅仅是打开和读取`/sys/class/net/eth0/type`文件`/sys/class/net/eth0/speed`。

如果没有，谁能告诉我在哪里可以找到`/sys/class/net/eth0/type`返回的数字，对应于哪些网络类型？

**编辑：**它变得更糟！经过一些无线实验后，`/sys/class/net/wlan0/type`也返回 1，并且`/sys/class/net/wlan0/speed`不存在，我不得不采用链接速度`/sys/class/net/wlan0/wireless/link`，有时返回的速度不正确。例如，在 54Mbits 卡中，有时会返回 55。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T11:47:11.607

这只能解决一半的问题，但是使用库 libpcap，您可以打开一个实时 pcap_t，然后调用 pcap_datalink。这将为您提供链接类型。（DLT_IEEE802_11、DLT_EN10MB 等）

*   [http://www.tcpdump.org/pcap3_man.html](http://www.tcpdump.org/pcap3_man.html)
*   [http://www.manpagez.com/man/3/pcap_datalink/](http://www.manpagez.com/man/3/pcap_datalink/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-23T11:12:43.973

要获取链接类型（以太网、802.11 等），您可以使用`SIOCGIFHWADDR`ioctl。ioctl 返回 中的值之一（在中`ARPHRD_`定义`net/if_arp.h`）。有关详细信息，请参阅[man netdevice(7)](http://man7.org/linux/man-pages/man7/netdevice.7.html)。`sa_family``struct sockaddr`

看一个例子（未测试）：

```
/**
 * Get network interface link type
 * @param name the network interface name
 * @return <0 error code on error, the ARPHRD_ link type otherwise
 */
int get_link_type(const char* name)
{
    int rv;
    int fd;
    struct ifreq ifr;

    if (strlen(name) >= IFNAMSIZ) {
        fprintf(stderr, "Name '%s' is too long\n", name);
        return -ENAMETOOLONG;
    }
    strncpy(ifr.ifr_name, name, IFNAMSIZ);

    fd = socket(AF_INET, SOCK_DGRAM, IPPROTO_IP);
    if (fd < 0)
        return fd;

    rv = ioctl(fd, SIOCGIFHWADDR, &ifr);
    close(fd);
    if (rv < 0)
        return rv;

    {
        char *type = "Unknown";
        switch (ifr.ifr_hwaddr.sa_family)
        {
        case ARPHRD_ETHER:  type = "Ethernet"; break;
        case ARPHRD_IEEE80211:  type = "802.11"; break;
        /* add more cases here */
        }
        printf("Link type is: %s\n", type);
    }

    return ifr.ifr_hwaddr.sa_family;
} 
```

要获得链接速度，您需要`SIOCETHTOOL`ioctl，例如[此处](https://stackoverflow.com/questions/14264371/how-to-get-nic-details-from-a-c-program)讨论的内容。

# php - 使用大型搜索引擎 API 之一获取搜索结果的数量

> ID：10777870
> 
> 赞同：0
> 
> 时间：2012-05-27T22:59:01.810
> 
> 标签：php, api, bing

我正在寻找一种方法来检索给定查询的搜索结果数量（如在谷歌结果页面上）。目的是使用搜索 API 实现标准化的谷歌距离（http://iknowate.blogspot.com/2011/10/google-similarity-distance.html）；主要问题是请求的数量不应该太有限（google api 似乎只允许每天约 100 个查询）。

也许有人可以给我一个提示，我可以如何检索这些信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T23:22:49.313

您可以使用第三方库/类来抓取结果页面，然后遍历 DOM 来获取您的信息，或者使用 file_get_contents 来获取页面，然后使用 preg_match 来获取结果总数。另一种选择是使用 CURL 抓取页面，如果您打算多次抓取页面，这也可以让您将脚本隐藏在多个代理后面以防止任何类型的禁令。

# ruby-on-rails - gem pg 的错误不应该在本地发生，只能在生产中发生，为什么捆绑安装它？

> ID：10777875
> 
> 赞同：1
> 
> 时间：2012-05-27T22:59:59.050
> 
> 标签：ruby-on-rails, heroku, gem, bundle, pg

我有一个 Ruby on Rails 应用程序，并且刚刚开始将其部署到 Heroku。

Heroku 快速入门指南说要在生产环境中包含用于数据库的 pg gem。好的，这是我上次部署到 Heroku 时出现的，我用以下方法解决了它：

```
group :production do
  gem 'pg'
end 
```

但是，这一次，当我尝试在本地“捆绑安装”或“捆绑更新”我的应用程序时，出于某种原因尝试安装 pg，即使我明确告诉它只在生产中使用 pg！这是什么原因，我能做些什么来解决它？谢谢！

```
Installing pg (0.13.2) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /Users/user/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb 
checking for pg_config... no
No pg_config... trying anyway. If building fails, please try again with
 --with-pg-config=/path/to/pg_config
checking for libpq-fe.h... no
Can't find the 'libpq-fe.h header
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T23:13:34.910

尝试运行

```
bundle install --without production 
```

这将防止捆绑生产 gem，并且该设置将适用于普通捆绑命令，直到您下次使用该`--without`参数。

# javascript - 通过 jQuery 仅选择一个对象并使用表单提交

> ID：10777876
> 
> 赞同：4
> 
> 时间：2012-05-27T23:00:34.337
> 
> 标签：javascript, jquery, html, css, forms

我正在构建一个小测验应用程序，选项都是列表项 (li)

在 jQuery 或 javascript 中，我如何能够允许用户选择一个答案（如果我需要添加一个“a”标签就可以了），然后当他们单击提交时（可以通过 javascript 或 jquery 完成）值与它一起提交。当用户点击一个选项时；我会将 jquery 代码放在哪里来操作 css。

示例代码：

```
<li id="q1" value="1">Option 1</li>
<li id="q2" value="2">Option 2</li>
<li id="q3" value="3">Option 3</li> 
```

提前致谢。如果我听起来有点混乱，或者您无法弄清楚我想说什么，请发表评论，我会尽力澄清。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T23:06:02.007

也许您应该使用（或至少尝试）a

```
<input type="radio"> 
```

避免所有那些丑陋的 JavaScript 混乱。

## 方法一

```
<label><input type="radio" name="Question" value="1">Option 1</label><br>
<label><input type="radio" name="Question" value="2">Option 2</label><br>
<label><input type="radio" name="Question" value="3">Option 3</label> 
```

利用：

```
-webkit-appearance: none;
-moz-appearance: none; 
```

从默认中清除**所有**`<input>`样式，以便您可以应用背景、颜色、边框或任何您喜欢的样式。

## 方法二

```
<li><label><input type="radio" name="Question" value="1">Option 1</label></li>
<li><label><input type="radio" name="Question" value="2">Option 2</label></li>
<li><label><input type="radio" name="Question" value="3">Option 3</label></li>

input[type=radio]{
    width:0px;
    height:0px;
} 
```

使用这种方法，当您单击 时，单选按钮也将被选中`<li>`。另外，您也可以设计自己的样式`<li>`！

**现场演示： http:** [***//jsfiddle.net/DerekL/CDV7q/***](http://jsfiddle.net/DerekL/CDV7q/)（有一些额外的修改）

# c - 在c中标记一个字符串

> ID：10777877
> 
> 赞同：-4
> 
> 时间：2012-05-27T23:00:37.113
> 
> 标签：c, string, tokenize

如何在 c 中标记这样的字符串：

```
char str1[] = " property :: content | label ";
char str2[] = "property::content";
char str3[] = "content"; 
```

[编辑]

我试过以下方法：

```
char str[] = " property :: content | label ";
char *property, *content, *label;

property = strtok(str, "::");
content = strtok(NULL, "|");
label = strtok(NULL, "|");

printf ("%s %s %s\n", property, content, label); 
```

但它根据字符拆分字符串，因此它适用于用于分隔标签的管道字符。然而，“::”分隔符是一个字符串，而不是一个字符。我不知道如何处理它。

[编辑 2]

我也有这个代码：

```
char sentence [] = "property :: content | label";
char property [30];
char content [30];
char label [30];

sscanf (sentence, "%s :: %s | %s", property, content, label);
printf ("<span property=\"%s\" content=\"%s\">%s</span>\n", property, content, label); 
```

我只是想知道如何动态设置每个字符数组的大小......

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T23:36:34.103

你需要的是一个基本的[词法分析器](http://en.wikipedia.org/wiki/Lexical_analysis)

了解它的最好方法是拿起一本编译器书籍并阅读它。

简而言之，您将需要一堆[正则表达式](http://en.wikipedia.org/wiki/Regex)并开始将您的字符串与正则表达式进行匹配，直到找到最大匹配的一个，其对应的 dfa 处于最终状态。

或者，如果每个标记都用空格分隔，您可以简单地使用`strtok`and`strcmp`来区分特殊单词（例如`::`）和输入的其余部分。

词法分析完成后，你需要一个[parser](http://en.wikipedia.org/wiki/Parser)。我不知道你的应用程序，所以你的解析器可能会变得非常简单，但否则，[这个答案](https://stackoverflow.com/questions/7403647/parsing-strings-of-equations-in-c-using-scanf/7404179#7404179)可能会帮助你开始。

# linux - wget下载未完成所有页面

> ID：10777879
> 
> 赞同：1
> 
> 时间：2012-05-27T23:01:12.980
> 
> 标签：linux, bash, curl, for-loop, wget

我需要在 Linux 上下载超过 30k 的页面，并想象我可以用一个简单的 bash 脚本 + wget 来做到这一点，这就是我想出的：

```
#!/bin/bash

start_time=$(date +%s)
for i in {1..30802}
do
        echo "Downloading page http://www.domain.com/page:$i"
        wget "http://www.domain.com/page:$i" -q -o /dev/null -b -O pages/$i
        running=$(ps -ef | grep wget | wc -l)
        while [ $running -gt 1000 ]
        do
                running=$(ps -ef | grep wget | wc -l)
                echo "Current running $running process."
                sleep 1;
        done
done

while [ $running -gt 1 ]
do
        running=$(ps -ef | grep wget | wc -l)
        echo "Waiting for all the process to end..."
        sleep 10;
done

finish_time=$(date +%s)
echo "Time duration: $((finish_time - start_time)) secs." 
```

**有些页面没有完全下载！**

*   由于上面的代码将使 1k wget 并行运行进程并等到它降低以添加更多进程，难道是我实际上用尽了所有可用的互联网链接？

*   我怎样才能使它更可靠，以确保页面实际上被正确下载？

**编辑：**

*   我听说 curl 是下载页面的更好选择，这是真的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T23:23:21.893

以下是针对您的情况的可能解决方案：

1）改变你打电话`wget`给这样的方式：

```
(wget "http://www.domain.com/page:$i" -q -o /dev/null -O pages/$i || touch $i.bad) & 
```

2) 脚本完成后，搜索所有`*.bad`文件并`wget`为每个文件重新启动。在新的重试之前删除相应的`.bad`文件。

3) 直到没有`*.bad`文件存在为止。

这是一般的想法。希望有帮助！

**编辑：**

对于`wget`进程消失、被杀死或突然结束的情况，有一个可能的细化：

```
(wget "http://www.domain.com/page:$i" -q -o /dev/null -O pages/$i || touch $i.bad && touch $i.ok) & 
```

然后您可以分析某些页面是否已完全下载或`wget`未能结束。

**编辑2：**

经过一些测试和挖掘，我发现我之前的建议是**有缺陷**的。条件句的顺序**必须互换**：

```
(wget "http://www.domain.com/page:$i" -q -o /dev/null -O pages/$i && touch $i.ok || touch $i.bad) & 
```

所以，

*   如果下载正确执行`wget`（即它以 OK 返回码完成），则必须有两个文件：下载的页面和`.ok`文件。

*   如果下载失败（即`wget`返回一个 KO 返回码），那么肯定有`.bad`文件，并且可能是页面的部分下载。

无论如何，只有`.ok`文件是重要的：他们说下载已正确完成（从这个`wget`角度来看，我将在稍后讨论）。

如果没有`.ok`找到特定页面的文件，那么肯定没有下载，所以必须重试。

然后，我们进入您的过程中最微妙的部分：如果 Web 服务器作为对大量请求的响应，取消了那些他无法通过 HTTP 200 响应和零内容长度服务的请求，会发生什么？这将是避免网络复制或某种服务器攻击的好方法。

如果是这种情况，您必须查看响应的模式。会有一个`.ok`文件，但下载页面的文件大小可能为零。

您可以使用以下方法检测那些*零长度下载*：

```
filesize=$(cat $i.html | wc -c) 
```

`.ok`然后在和`.bad`文件的前一个过程中添加一些逻辑：

```
retry=0
if [ -f $i.bad ]
then
  retry=1
elif [ -f $i.ok ]
then
  if [ $filesize -eq 0 ]
  then
    retry=1
  fi
else
  retry=1
fi

if [ $retry -eq 1 ]
then
  # retry the download
fi 
```

希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T23:58:11.607

我不知道你的连接是什么类型的，当前连接数过多会导致丢包。还要考虑服务器有什么样的连接。如果这不是内部服务器，则托管服务器的一方可能会认为这是拒绝服务攻击并过滤您的 IP。一个一个地做比较靠谱。瓶颈几乎总是互联网连接，你不能更快地做到这一点。

# ruby-on-rails-3 - 如何在 Heroku 上显示 RoR 应用程序代码版本？

> ID：10777881
> 
> 赞同：1
> 
> 时间：2012-05-27T23:02:11.323
> 
> 标签：ruby-on-rails-3, git, version-control, heroku

对于我的 Rails 应用程序，我通常从标记版本部署到生产环境，然后在用户界面中显示标记，将输出分配`git describe --always`给`config/application.rb`.

现在我将一个应用程序移动到 Heroku，并且部署到 Heroku 只发生在使用 master 分支，所以这个技巧将不再起作用。

当我部署到 Heroku 时，是否有任何其他方法可以为我的代码分配版本号并在 UI 上显示它？

谢谢，斯图尔特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T06:08:06.670

每当您将新更改推送到 Heroku 时，您可以通过在本地运行此命令来将变量添加到 Heroku 配置：

```
heroku config:add GIT_TAG=`git describe --always` 
```

然后您可以在应用程序的配置中访问它：

```
version = ENV['GIT_TAG'] || `git describe --always` 
```

当应用程序在 Heroku 上运行时，它将获取配置变量 ( `ENV['GIT_TAG']`)，当它在本地开发中运行时，它将回退到 running `git describe --always`。

每次部署时都需要更新 Heroku 配置变量，但我通常将这种东西添加到部署脚本或 rake 任务中（以及创建标记部署的新标签和在 Heroku 上运行任何新数据库迁移等有用的东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:39:09.387

如果你想在 UI 上显示它，那么 git SHA 输出可能不是特别有用 - 你有两个选择，设置一个带有用户友好版本号的 Heroku 配置变量，或者在你增加的代码中设置一个版本号当您从 master 部署时。您可以将部署包装在 rake 任务中，该任务将版本号增加一个文件（然后将其读取到 git 并提交它）或简单地增加配置变量中的值。

另外，不要忘记 Heroku 发布管理[http://blog.heroku.com/archives/2010/11/17/releases/](http://blog.heroku.com/archives/2010/11/17/releases/)，您也可以在这里使用它来获取版本号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T23:07:19.417

不`git tag`符合您的需求？

为什么老把戏不再奏效了？

# jquery - jQuery $.cookie 不读取服务器响应设置的 cookie

> ID：10777882
> 
> 赞同：6
> 
> 时间：2012-05-27T23:02:15.883
> 
> 标签：jquery, jquery-cookie

$.cookie 没有读取服务器响应先前设置的 cookie。

我可以读取使用 $.cookie() 设置的 cookie。

我可以看到所有使用 Firefox 的 Web Developer 插件设置的域 cookie。
另外，服务器端可以看到请求cookie，所以浏览器肯定有它们。

我已经尝试过到期时间，但无济于事。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T01:17:14.503

问题是服务器端正在发送带有 HttpOnly 设置的 cookie，如下所述：[http ://en.wikipedia.org/w/index.php?title=HTTP_cookie#HttpOnly_cookie](http://en.wikipedia.org/w/index.php?title=HTTP_cookie#HttpOnly_cookie)

无法通过 document.cookie 访问以这种方式发送的 Cookie。这通常用于帮助保护 cookie 值免受您网站上可能的 XSS 攻击。

编辑：您没有提到您在服务器端使用哪种技术来设置 cookie。如果您使用的是 PHP，此链接列出了设置 HttpOnly 标志的可能方式：

[https://www.owasp.org/index.php/HttpOnly#Using_PHP_to_set_HttpOnly](https://www.owasp.org/index.php/HttpOnly#Using_PHP_to_set_HttpOnly)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:12:49.180

更新：我的原始答案是错误的（见下文）......路径树下方的页面可以读取上层cookie，因此路径不必完全匹配。留下我原来的答案，以防其他人犯同样的错误。我的问题是由我从 javascript 设置 cookie，然后尝试修改 cookie 服务器端引起的。路径为“/”的服务器目标 cookie，因此路径为“/mypages”的 cookie 没有更改。

> $.cookie 只能读取当前文档路径下的cookies，所以如果你的页面是>mysite.com/mypages/mypage.aspx，服务器在设置cookie时会将路径设置为“/”，但$.cookie会尝试从路径“/mypages”读取，但无法读取 cookie。我自己也遇到了这个问题。如果您没有这样的不同路径，那么这可能 > 不是您的问题。

# html - 网站中的异常填充

> ID：10777883
> 
> 赞同：0
> 
> 时间：2012-05-27T23:02:20.123
> 
> 标签：html, css

下面的代码是别人写的。`div`他没有使用建筑，而是使用了`tabular`建筑。现在**菜单**选项结束后，页面**内容**和**菜单**之间有一个**空格**。我已经多次看过代码，检查了**样式表**或并观察了所有可能导致它的原因，但无法找到这个空间的原因。我什至尝试在内容区域中查看它是否移动到上方，但它仍然没有移动。如果有人可以帮助我，我将非常感激。该网站在[这里](http://www.9amresourceagency.com/about.php)。在此先感谢。这是它的代码，******`padding``margin``margin-top:-100px;`******

 ******```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Lorem Epsum</title>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<link href="style7.css" rel="stylesheet" type="text/css" />

<script language="Javascript">
if (document.images) {
     button1 = new Image
     button2 = new Image
     button1.src = 'images/contact.png'
     button2.src = 'images/contactR.png'

     button3 = new Image
     button4 = new Image
     button3.src = 'images/investor.png'
     button4.src = 'images/investorR.png'

     button5 = new Image
     button6 = new Image
     button5.src = 'images/associate.png'
     button6.src = 'images/associateR.png'

     button7 = new Image
     button8 = new Image
     button7.src = 'images/services.png'
     button8.src = 'images/servicesR.png'

     button9 = new Image
     button10 = new Image
     button9.src = 'images/about.png'
     button10.src = 'images/aboutR.png'
 }
</script>

<script type="text/JavaScript">

function SendMemId(ID, Name)
{

    var MyElement = document.getElementById("tester");

    var MyName    = document.getElementById("MyNames");

    document.getElementById('MyNames').innerHTML = (Name);

    MyElement.value = (ID);

    return true;
}//-->
</script>

<script src="jquery.js" type="text/javascript"></script>

<script src="popup.js" type="text/javascript"></script>

<script src="js/jquery-1.4.2.js" type="text/javascript"></script>

<script src="js/cufon-yui.js" type="text/javascript"></script>

<script src="js/cufon-replace.js" type="text/javascript"></script>

<script src="js/standard_07_57_400.font.js" type="text/javascript"></script>

<script src="lite_validation.js"></script>
    <script>
    required.add('name','NOT_EMPTY','Full Name');
    required.add('email','EMAIL','Email Address');
    required.add('message','NOT_EMPTY','Your Message')
    </script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript" charset="utf-8"></script>
<script src="src/jquery.infieldlabel.min.js" type="text/javascript" charset="utf-8"></script>

<script type="text/javascript" charset="utf-8">
<!--
$(function(){ $("label").inFieldLabels(); });

function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}

function MM_findObj(n, d) { //v4.01
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && d.getElementById) x=d.getElementById(n); return x;
}

function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}
//-->
</script>

</head>

<body id="page2" onLoad="MM_preloadImages('images/aboutR.png','images/servicesR.png','images/associateR.png','images/investorR.png','images/contactR.png')">
<table width="900" border="0" align="center" cellpadding="0" cellspacing="0">
  <tr>
    <td width="837">&nbsp;</td>
  </tr>

  <tr>
    <td valign="bottom" height="120" background="images/headsmall.png"><table width="100%" height="120" border="0" cellpadding="0" cellspacing="0">
      <tr>
        <td valign="bottom"><div align="left"><a href="index.php"><img src="images/logo.png" alt="" width="210" height="110" style="border-style: none"/></a></div></td>
        <td valign="bottom"><table border="0" align="right" cellpadding="0" cellspacing="0">
          <tr>
            <td><a href="about.php" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image6','','images/aboutR.png',1)"><img src="images/about.png" width="115" height="50" border="0" id="Image6" /></a></td>
            <td><a href="services.php" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image5','','images/servicesR.png',1)"><img src="images/services.png" width="110" height="50" border="0" id="Image5" /></a></td>
            <td><a href="associates.php" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image4','','images/associateR.png',1)"><img src="images/associate.png" width="110" height="50" border="0" id="Image4" /></a></td>
            <td><a href="investors.php" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image3','','images/investorR.png',1)"><img src="images/investor.png" width="110" height="50" border="0" id="Image3" /></a></td>
            <td><a href="contact.php" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image2','','images/contactR.png',1)"><img src="images/contact.png" width="110" height="50" border="0" id="Image2" /></a></td>
          </tr>
        </table></td>
      </tr>
    </table></td>
  </tr>
  <!--<tr>
    <td height="6"></td>
  </tr>-->
  <tr>
    <td  background="images/bg_content.jpg" width="903px" height="477px"><table width="98%" border="0px"   cellpadding="0" cellspacing="0">
     <!-- <tr>
        <td width="409">&nbsp;</td>
        <td width="476" height="26">&nbsp;</td>
      </tr>-->
      <tr>
        <td width="409" rowspan="5" valign="top"><table width="390" border="0" align="left" cellpadding="0" cellspacing="0">

          <tr>
            <td height="2"></td>
          </tr>
          <tr>
            <td><img src="FinalPurpleLook/GlobalPic-AboutUS.png" alt="" width="381" height="237" /></td>
          </tr>

        </table>          </td>
        <td valign="top" class="heading">About us </td>
      </tr>
     <!-- <tr>
        <td valign="top">&nbsp;</td>
      </tr>-->
      <tr>
        <td valign="top"class="textSimple">Lorem Epsum is an exclusive private organization engaged in a wide spectrum of global business endeavors from acquisition, development and ownership. Our core market's investments include commercial real estate, energy solutions, information technology, and health wellness.</td>
      </tr>
      <tr>
        <td valign="top">&nbsp;</td>
      </tr>
      <tr>
        <td valign="top" class="textSimple">The philosophy of Lorem Empsum is based on honor, leadership, problem solving, project knowledge, sustainability and innovative ideas. Having powerful, influential connections, is a key element in success. With countless years of experience in  several different industries we are proven to bring success with our connections and expertise knowledge.</td>
      </tr>

      <tr>
        <!--<td>&nbsp;</td>
        <td valign="top">&nbsp;</td>
      </tr>
      <tr>
        <td>&nbsp;</td>
        <td valign="top">&nbsp;</td>
      </tr>
      <tr>
        <td>&nbsp;</td>-->
        <td><p align="right" class="footer"> 9am Resource Agency LLC @ 2012               &nbsp;&nbsp; </p></td>
      </tr>
    </table></td>
  </tr>
  <tr></tr>
  <tr>
    <td></td>
  </tr>
</table>

<script type="text/javascript"> Cufon.now(); </script>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T23:42:14.333

一些快速的评论。

首先，我不知道你为什么有两个：

```
 background="images/bg_content.jpg" width="903px" height="477px" 
```

在标题中。有人不知道他们在做什么。

其次，我确实注意到内容加起来为 430，但您的背景图像设置为 477px，例如，“background="images/bg_content.jpg" width="903px" height="477px" - 那可能是原因。

瑞克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T02:03:34.277

在那里你真的需要重新考虑重新**开始**的选项，如果不是那么请参阅其中包含**的 Javascripts 和 Jqueries** **，它们可能会动态更改**你的 CSS 或样式属性。******

# r - 在 Ibrokers 上使用 R 获取 EUR.USD 历史数据时出错

> ID：10777885
> 
> 赞同：5
> 
> 时间：2012-05-27T23:02:45.617
> 
> 标签：r, finance, trading, ibrokers

我正在使用 IBrokers 包和 twsInstrument，由于某种原因，它使用最简单的方法给了我一个错误。

```
require("IBrokers")
require("twsInstrument")
tws <- ConnectIB()
past.data<-reqHistoricalData(tws,getContract("EUR.USD")) 
```

给我

```
waiting for TWS reply on EUR ....failed.
Warning message:
In errorHandler(con, verbose, OK = c(165, 300, 366, 2104, 2106,  :
Historical Market Data Service error message:No historical market data for  EUR/CASH@IDEALPRO Last 1d 
```

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T00:51:17.250

盈透证券不传播现金外汇的交易数据。您需要使用`whatToShow`与默认值不同的值。例如：

```
 reqHistoricalData(tws,getContract("EUR.USD"), whatToShow="BID")
 #or
 reqHistoricalData(tws,getContract("EUR.USD"), whatToShow="ASK") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-10-09T22:12:19.700

截至 2021 年，您可以选择以下内容： [![在此处输入图像描述](../Images/65158c101d7bf0794f850f102b2cbaf1.png)](https://i.stack.imgur.com/jcgQj.png)

和 [![在此处输入图像描述](../Images/c82dc41f768b38b0449262b9f06731aa.png)](https://i.stack.imgur.com/w8sWq.png)

取自 [https://interactivebrokers.github.io/tws-api/historical_bars.html](https://interactivebrokers.github.io/tws-api/historical_bars.html)

# asp.net - 数据未写入数据库 ASP.Net

> ID：10777886
> 
> 赞同：0
> 
> 时间：2012-05-27T23:02:48.577
> 
> 标签：asp.net, sql, insert

我正在 ASP.Net 中建立一个论坛，但有一个小问题。

我有 1 个用户创建了一个主题并且可以很好地向它写一个帖子，但是如果另一个用户登录，它不会将帖子插入到数据库中。它正在返回它，但没有插入。原始用户可以登录并仍然发布，但其他人不能。

这是我后面的代码

```
 protected void addPostBtn_Click(object sender, EventArgs e)
{        
    //Define ADO.NET objects.
    string insertSQL;
    string topic = Request.QueryString["topicid"].ToString();
    insertSQL = "INSERT INTO Posts (TopicID, PostBody, PUserID)"
        + "VALUES (@Topic, @NewPostText, @PUserID)";

    SqlConnection con = new SqlConnection(connectionString);
    SqlCommand cmd = new SqlCommand(insertSQL, con);

    // Try to open the database and execute the update
    int added = 0;
    try
    {
        cmd.Parameters.AddWithValue("@Topic", topic);
        cmd.Parameters.AddWithValue("@NewPostText", newPostText.InnerText);
        cmd.Parameters.AddWithValue("@PUserID", Session["User_ID"]);
        con.Open();
        added = cmd.ExecuteNonQuery();
        lblResults.Text = "Your post has been added";
    }
    catch (Exception err)
    {
        lblResults.Text = "Error inserting record. " + err.Message;
    }
    finally
    {
        con.Close();
    }
    if (added > 0)
    {
        this.BindRepeater();
    }
} 
```

我根本没有收到任何错误。它说它提交得很好，但它不在数据库中，除非原始发帖人这样做。

**编辑：**

刚刚意识到这与我的观点有关。这是我目前的观点，它正在阅读

```
 SELECT dbo.Posts.PostBody, dbo.Posts.PostDate, dbo.Posts.PostID, dbo.[User].username, dbo.Topic.TopicID
FROM  dbo.Topic RIGHT OUTER JOIN
dbo.Posts ON dbo.Topic.TopicID = dbo.Posts.TopicID LEFT OUTER JOIN
dbo.[User] ON dbo.Topic.TUserID = dbo.[User].UserID AND dbo.Posts.PUserID = dbo.[User].UserID 
```

但它现在为其他用户名返回 NULL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T03:24:26.713

视图需要如下

```
SELECT     dbo.Posts.PostBody, dbo.Posts.PostDate, dbo.Posts.PostID, dbo.[User].username, dbo.Topic.TopicID
FROM         dbo.Topic LEFT OUTER JOIN
                  dbo.Posts ON dbo.Topic.TopicID = dbo.Posts.TopicID LEFT OUTER JOIN
                  dbo.[User] ON dbo.Posts.PUserID = dbo.[User].UserID 
```

# java - 尝试在 IntelliJ 中使用我的 .properties 和 log4j 文件引用文件夹

> ID：10777893
> 
> 赞同：2
> 
> 时间：2012-05-27T23:05:03.367
> 
> 标签：java, spring, spring-mvc, intellij-idea

我不想将我的 .properties 和 log4j 文件放在我的 spring MVC 应用程序的 /resources 文件夹中，因为它们将在编译时放入 jar 中，并且我希望能够在我的服务器上编辑这些文件部署我的应用程序。

所以我创建了一个文件夹并将我的 log4j、*.properties 文件和 spring-context.xml 文件放入其中。

我有一个 Maven 多项目，我的文件夹如下所示：

```
/myapp-persists
/myapp-web
/src/main/conf 
```

/src/main/conf 有我的属性文件，所以在 IntelliJ 中，我转到 myapp-web 模块并添加了“jar 或目录”依赖项，指向该文件夹并选择“类”。

它不起作用，我的文件没有被拾取并且启动服务器导致崩溃，没有检测到属性文件。

我在这里做错了什么？

看来我通过 intelliJ 这样做会导致我的 Maven 构建失败，对吧？我真的不想为此创建一个单独的 Maven 项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:57:42.643

您可以使用上下文菜单`/src/main/conf`并选择*Directory: Add as Source*。在首选项中，您应该在 Maven 设置中设置*保留源文件夹*（不太确定菜单/设置的命名 - 手头不知道，抱歉）。不需要 jar 依赖项。

# php - 指令不遵循 jQuery 序列

> ID：10777895
> 
> 赞同：1
> 
> 时间：2012-05-27T23:05:39.903
> 
> 标签：php, jquery

这是我一直在处理的代码。显然，由于某种原因首先执行了 #layout 调用，并且它给出了 undefined 作为值。

```
$(function() {

    $(".left").load("PartsList.php", function() {
        alert("success");
    });

    $(".right").load("Custom.php", function() {
        alert("success");
    });

    $("#layout").children().on({
        click: function() {
            alert($(this).attr('id'));

        }
    });

});​ 
```

感谢您的时间 ：）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T23:12:18.507

那是因为`.load()`是异步调用的。

你可以绑定

```
$("#layout").on({
    click: function() {
        alert($(this).attr('id'));

    }
}, '.left,.right'); 
```

反而

# c++ - 带数字的最短路径

> ID：10777897
> 
> 赞同：2
> 
> 时间：2012-05-27T23:05:57.800
> 
> 标签：c++, path, figures, shortest

我的家庭作业（C++）有问题。我不是要求完整的解决方案，但朝正确的方向倾斜可能会有所帮助。:)

我有一个 NxN 板（最大 N = 100）和那个板上的 1x2 图形（立方体）。立方体的一侧涂成红色，另一侧涂成蓝色。立方体的默认位置是棋盘的左上角，蓝色面朝上：

```
B B . .
. . . .
. . . .
. . . . 
```

（4x4 示例，B 代表蓝色）

**黑板上可能有石头（障碍物）。** 我可以用我的身材做的动作：

*   顺时针旋转 90/180/270 度
*   你可以围绕它的右/左/上/下边缘翻转立方体，改变它的“向上颜色”

例如，在默认位置使用向右翻转：

```
. . R R
. . . .
. . . .
. . . . 
```

然后使用旋转 90：

```
. . R .
. . R .
. . . .
. . . . 
```

然后使用左翻转：

```
. B . .
. B . .
. . . .
. . . . 
```

当然，在旋转或翻转时，你不能落在石头上。**所以，问题是——对于任何给定的棋盘配置（图形位置和石头位置）编写一个程序，使用最少的移动次数**“将立方体带回家”在默认位置（蓝色面朝上！）如果可能，则返回 1，如果不可能，则返回 0。

我觉得这个问题很有趣，但我不得不承认我对此有点困惑。尤其是蓝边/红边部分。我真的不知道如何“翻译”那些我可以用通常的最短路径算法的语言使用的动作（我从来没有使用过这些）。因此，我将不胜感激您提供的每一条建议！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T23:26:15.773

首先，由于要求您找到确切的最佳路径，我会选择[Dijksta's algorithm](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)。

对于此算法，您需要：

1.  给出下一个可能移动的函数。
2.  一个告诉你一个位置是否已经被访问过的函数。
3.  一个函数，它告诉你每条路径的总成本。
4.  当然还有一个功能可以告诉您何时到达最终位置

给定一个初始位置，您的立方体可以恰好到达 7 个新位置。很容易选择哪些是可能的。

G 只是您到目前为止所做的移动次数+ 1 的下一步移动 :)

我会使用哈希表来跟踪访问的位置。（这可能是最难写的函数），但你现在不需要想太多。一个简单的向量和逐项比较就可以了。您可以在代码运行后对其进行优化。

最后，您需要检查立方体是否处于蓝色面朝上的初始位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T23:41:32.260

您可以将每个可能的 1x2 块和颜色（红色或蓝色）组合解释为顶点并作为边移动。如果有可能在一次移动中从其他组合到达特定的 1x2 块和颜色组合（顶点），那么这两种组合之间存在连接（边缘）。然后，您必须在结果图中找到给定配置和“家庭”配置之间的最短路径（可能是广度优先搜索，因为无论您执行什么移动，移动成本都是相同的）。

如果想更进一步，您可以使用在图遍历期间使用启发式的高级图搜索算法（启发式是假设黑板上没有障碍物到达目的地所需的最小移动量）。例如，您可以使用[A* 算法](http://en.wikipedia.org/wiki/A%2a_search_algorithm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T02:02:50.007

在处理这类问题时，首先要做的是找到问题*状态*的表示。在这种情况下，您需要：

1.  代表图形左上角位置的两个整数
2.  一个布尔值，代表图形的颜色（红/蓝）
3.  一个布尔值，表示图形的方向（水平/垂直）

如果您熟悉位掩码，则应仅使用 32 位整数来执行此操作（x 位置为 8 位，y 位置为 8 位，其余为 2 位）。这样您就不需要实现比较运算符。 **或者** 您使用这 3 个信息定义一个简单的结构（调用它`state`）并对此进行严格排序比较（这只需要`state`放入`std::set`.

在此之后，您可以使用[BFS](http://en.wikipedia.org/wiki/Breadth-first_search)解决此问题。

为此，您需要：

1.  将`std::map<state,state>`您已经访问过的位置存储在键中，并将您来自的位置存储在值中（如果您可以使用 c++11 并且使用位掩码来存储您的状态，请替换`map`为）`unordered_map`
2.  A`std::queue<state>`在其中推送和弹出要处理的状态。
3.  一些代码来确定从给定状态可达到的每个可能状态（即实现所有可能的移动，注意棋盘尺寸）

伪代码：

```
 map<state,state>  visited;
   queue<state> to_be_processed;

   visited.insert( initial_state,initial_state); //you are not coming from anywhere
   to_be_processed.push ( initial_state);

   while(!to_be_processed.empty()) {

              state cur = to_be_processed.pop();
              if ( cur == end_state) //you are done
              {
                    //to get the path from initial_state to end_state you have just to walk visited in the inverse order.
                    return 1;
              }
              for ( i = every possible state reachable from cur) {
                    if (visited.count(i) != 0) continue; //already visited
                    to_be_processed.push(i);
                    visited.insert(i,cur); //i has been visited, and you reached i from cur
              }

   }
   return 0; //if you get here, no way 
```

障碍的存在使问题更难编码，但在概念上并没有什么不同。

请注意，在这种情况下，BFS 有效，因为您从一个状态到另一个状态所支付的成本始终相同。

# clojure - Clojure: defRecord, defProtocol: 只做一次昂贵的计算

> ID：10777908
> 
> 赞同：5
> 
> 时间：2012-05-27T23:07:19.390
> 
> 标签：clojure

## 语境

考虑以下代码

```
(defprotocol ICat "Foo"
  (meow [cat]))

(defrecord Cat [a b] "Cat"
  ICat
  (meow [cat] (some-expensive-operation a b))) 
```

## 问题

有没有办法我可以在某个地方放一个让？

我希望 (some-expensive-operation ab) 在我执行时只评估一次

```
(->Cat a b) 
```

这样在 (meow cat) 的时候，它只是返回预缓存的值，而不是动态地重新计算它。例如：

```
[1] (let [x (->Cat a b)]
[2]   (meow x)
[3]   (meow x)
[4]   (meow x)) 
```

我希望（一些昂贵的操作）在 [1] 处被评估一次，然后对于 [2]、[3]、[4] 它只返回旧值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T02:20:20.353

我建议包装逻辑以在构造函数中调用一次昂贵的操作，并将结果作为常规值存储在记录中：

```
(defprotocol ICat "Foo"
  (meow [cat]))

(defrecord Cat [a b] "Cat"
  ICat
  (meow [cat] (:meow cat)))

(defn make-cat [a b]
  (assoc (->Cat a b) :meow (some-expensive-operation a b))) 
```

当您的代码变得更加复杂时，我发现您经常希望在任何情况下定义自己的构造函数。

请注意，您可能还需要考虑将昂贵的操作包装在惰性序列或延迟中，以便仅在需要时才计算它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T23:16:48.113

如果你的函数是引用透明的，那么你可以将你的函数包装在`memoize`. 至少，您可以：

```
(def memo-some-expensive-function (memoize some-expensive-function)) 
```

然后`memo-some-expensive-function`在你的记录中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T23:38:26.380

我开始相信解决这个问题的最简单方法可能是

*   在 defrecord 周围创建一个包装器

*   此包装器允许我指定要重新计算的其他字段

*   并将这些额外字段附加到“真实”defrecord

# json - JSON REST/RPC 接口的 IDL

> ID：10777910
> 
> 赞同：13
> 
> 时间：2012-05-27T23:07:26.830
> 
> 标签：json, rest, rpc, protocol-buffers, idl

我们正在设计一个相当复杂的 REST API，其中大部分 I/O 是具有特定结构的 JSON 编码对象。我们发现的一个挑战是以一种使客户更容易发布正确输入和处理输出的方式记录 API。由于输入和输出的数据都需要相当复杂的 JSON 对象，因此客户端开发人员经常会引入与 I/O 对象结构相关的错误。

现在有了所有的 JSON Web API，我希望有一个通用的解决方案，但我很难找到一个。我查看了[json-schema](http://json-schema.org/)，它是一个 json-validation 模式，但 IETF 草案和实现似乎都相当不成熟（即使它们已经存在了一段时间，这不是一个好兆头）。

[Protocol Buffers](http://code.google.com/p/protobuf/)和[Apache Avro](http://avro.apache.org/)提供了一种稍微不同的方法，其中模式不用于验证，但实际上需要用于消息的编码/解码。在这 2 个中，Avro 的文档和实现似乎相当有限。ProtoBuf 似乎更好，但我不确定这是否真的适合在浏览器中使用来调用 JSON api？

现在我开始怀疑我是否从正确的角度看待这个问题。是否有其他方法可以使我的 API 更加强类型？还是对 JSON REST/RPC API 的正式描述违背了使用 JSON 的目的？

编辑：在这个主题之后的 6 个月，我们发现了[mongoose](http://mongoosejs.com/)，这与我们正在寻找的非常接近。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T02:55:40.807

下面是我从 Douglas Crockford 收到的电子邮件回复。

> 我不相信模式可以替代输入验证。有些属性无法从语法中验证。我认为这是 XML 出错的原因之一。
> 
> 如果您的格式太复杂，那么我会考虑简化它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T06:40:44.590

这样的系统存在，我是其中之一的作者。它被称为[Piqi-RPC](http://piqi.org/doc/piqi-rpc/)，它通过 HTTP 对 RPC 样式 API 的输入和输出参数进行基于 IDL 的验证。

它支持 JSON、XML 和 Google 协议缓冲区作为 HTTP POST 请求的输入和输出的数据表示格式。客户端可以选择使用这三种格式中的任何一种，并使用标准`Accept`和`Content-Type`HTTP 标头指定他们的选择。

所以，是的，理论上，你正在寻找正确的方向。但是，目前 Piqi-RPC 仅支持在 Erlang 中编写服务器，如果您使用不同的堆栈，它对您来说并不是很有用。我听说 Apache Thrift 也支持 JSON over HTTP 传输，但我没有检查。我知道的另一种类似系统（也适用于 Erlang）称为[UBF](http://norton.github.com/ubf/)。我听说过可以根据协议缓冲区规范（例如[http://code.google.com/p/protostuff/](http://code.google.com/p/protostuff/)）解析和验证 JSON 的 Java 库。

这个想法本身远非新事物，但在实践中并没有多少系统能够接近它。这是一个具有挑战性的问题。

从历史上看，IDL 用于接口定义和二进制数据序列化，而不是用于验证后来出现的动态数据交换格式（例如 XML 和 JSON）。Sun-RPC IDL 和 CORBA IDL 属于第一类。WSDL 将是涵盖这两个领域的少数示例之一，但它是一项糟糕的技术，对于大多数现代系统来说，这将是一个糟糕的选择。此外，还有许多模式语言（也称为 DDL——数据定义语言），其中大多数是高度专业化的，并且只使用一种表示格式，例如 XML 或 JSON 模式。其中很少有稳定的实现。

[Piqi 项目](http://piqi.org)和基于它的 Piqi-RPC 是围绕几个相当简单的实现构建的：

*   DLL 不必明确地绑定到任何特定的数据表示格式或围绕它构建。相反，这种语言可以相当普遍，涵盖广泛的实际用例（例如跨语言数据序列化和数据验证）和数据格式（例如 JSON、XML、Protocol Buffers）。

*   用于 RPC 式通信的 IDL 可以实现为通用 DDL 之上的一个薄的、主要是语法层。

*   这样的 IDL 和接口规范可以与传输无关。

说到基于 HTTP 的 REST 风格的 API 与基于 HTTP 的 RPC 风格的 API。

使用 RPC 样式的 API，服务开发人员或自动化系统必须验证三件事：函数名称（根据某些服务命名方案）、输入以及（如果您选择）输出。

对于 REST 风格的 API，人们会无缘无故地陷入困境。现在，他们有*更多*的东西需要验证：任意复杂的 URL 语法，包括编码在 URL 段中的动态参数（适用于所有 HTTP 方法）和 URL 查询字符串（仅适用于 HTTP GET 方法）、HTTP 方法对应关系（是否应该是 GET , POST, PUT, DELETE 等），一些参数到达那里时的 HTTP 正文（有时他们为 JSON 和 XML 表示的参数手动执行两次），自定义 HTTP 标头，以及单独的服务文档。想象一下支持所有这些的 IDL！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T03:08:07.430

XML 在很多方面更适合 RESTful 服务。它具有本地链接（`<link href=`适用于所有[HATEOAS](http://en.wikipedia.org/wiki/HATEOAS)粉丝）、本地语言支持（`lang="en"`）和出色的生态系统。

它也更适合未来的证明和未来的 API 重构。转换这个：

```
<profile>
    <username>alganet</username>
</profile> 
```

支持更多用户名：

```
<profile>
    <username>alganet</username>
    <username>alexandre</username>
</profile> 
```

**在不破坏**使用 XML的现有客户端的情况下更简单。JSON 很难做到这一点。

如果您真的需要 JSON，那么 JSON-Schema 是您的最佳选择。它不成熟，但我不知道关于那个案子有什么更好的。也许您的消费者可以在 XML 和 JSON 之间进行选择，因此他们可以使用 Content Negotiation 在小型有效负载 (JSON) 或 RESTful candies (XML) 之间进行选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T06:58:50.783

我会说你最后一个问题的答案是肯定的。如果您需要一种方法来约束和记录 JSON“模式”，为什么不首先使用 XML？解析并没有那么难，并且能够为它强制执行模式是一个很大的优势。

# android - 对等异常重置Android连接

> ID：10777912
> 
> 赞同：1
> 
> 时间：2012-05-27T23:07:46.030
> 
> 标签：android, tcp, arduino

我正在编写一个 Android 应用程序以通过 TCP 将数据从 android 发送到 arduino 板。出于测试目的，我只是将字符“A”从 Android 写入 Arduino。但是，我注意到在写了 20-30 次之后，我得到了以下异常：

```
W/System.err(11561): java.net.SocketException: Broken pipe
W/System.err(11561):    at org.apache.harmony.luni.platform.OSNetworkSystem.write(Native Method)
W/System.err(11561):    at dalvik.system.BlockGuard$WrappedNetworkSystem.write(BlockGuard.java:284)
W/System.err(11561):    at org.apache.harmony.luni.net.PlainSocketImpl.write(PlainSocketImpl.java:472)
W/System.err(11561):    at org.apache.harmony.luni.net.SocketOutputStream.write(SocketOutputStream.java:68)
W/System.err(11561):    at io.raas.FromBoard.run(FromBoard.java:43)
W/System.err(11561):    at java.lang.Thread.run(Thread.java:1019) 
```

这是从主活动调用以通过 tcp 发送数据的线程：

```
/*
 * Cleanup: SERVERPORT should be in Constants.java
 */
package io.raas;

import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;
import java.net.UnknownHostException;

import android.util.Log;

    class ToBoard implements Runnable {
        Socket s = null;
        static ServerSocket ss = null;
        InputStream i = null;
        OutputStream o = null;
        public static final int SERVERPORT = 6000;
        char flg = 65;
        int count = 0;
        public void run() {
            try {
                if(ss==null) {  ss = new ServerSocket(SERVERPORT);
                s = ss.accept(); }
            } catch(Exception e) {e.printStackTrace();}

            // change this to while true....
            while (true) {
                Log.d("SEPERATOR", "-----------------------------------------------------------------------------");
                count++ ;
                try {
                    if(flg == 65) {
                        o = s.getOutputStream();
                        Thread.sleep(500);
                        o.write(flg);
                        o.flush();
                    }
                    /*
                    i = s.getInputStream();
                    int intRead = i.read();
                    */
                    /*
                    if(i==null) {
                        i = s.getInputStream();
                    }
                    int intChar = (char)i.read();
                    Log.d("WRITING_TO_BOARD", "====================================> READ FROM BOARD: " + intChar);
                    */
                } catch (Exception e) {
                    Log.d("TX WE HAVE A PROBLEM", "YEA WE DO!");
                    e.printStackTrace();
                }
            }
        }

    } 
```

对此的任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T01:23:41.410

我相信这是在您写入另一端已经关闭的连接时引起的。

还有一个问题，详情如下：

[断管异常](https://stackoverflow.com/questions/2309561/how-to-fix-java-net-socketexception-broken-pipe)

# java - 在单个 webview Android 中从一个页面导航到另一个页面

> ID：10777914
> 
> 赞同：3
> 
> 时间：2012-05-27T23:08:57.547
> 
> 标签：java, android, webview

当用户单击图像时，我试图在已加载的 web 视图中从一个页面转到另一个页面。html 页面存储在资产文件夹的子文件夹中。

这是java代码

```
package com.vm;

import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.webkit.WebView;
import android.widget.ImageView;
import android.widget.TextView;

public class VmReadPreface extends VampireMusicActivity{

private WebView wv = null;    
private int pageIndex;
private String pagePath;    
private String[] pageList = {"file:///android_asset/preface/page_8.html",
        "file:///android_asset/preface/page_9.html","file:///android_asset/preface/page_10.html",
        "file:///android_asset/preface/page_11.html"};  
private int SelectedRow;
public static final String DEBUG_TAG = "VmMusic";   

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.preface);
        WebView wv;
        wv = (WebView) findViewById(R.id.web_holder);

         System.out.println(pageList[0]);
         System.out.println(pageList.length);
         pagePath=pageList[pageIndex];
         Log.i(DEBUG_TAG,"Page Path " + pagePath);

         wv.loadUrl(pagePath);

        final ImageView getNext_Page =(ImageView) findViewById(R.id.arrow_right);
        getNext_Page.setOnClickListener(NextClick);

        final ImageView getPrevious_Page =(ImageView) findViewById(R.id.arrow_left);
        getPrevious_Page.setOnClickListener(PreviousClick);
    }

    View.OnClickListener PreviousClick = new View.OnClickListener(){
        public void onClick(View v){
            GoPrevious();
        }
    };
    View.OnClickListener NextClick = new View.OnClickListener(){
        public void onClick(View v){
            GoNext();
        }
        };

    private void loadWebView(String s){
         Log.i(DEBUG_TAG,"String Is " + s);
         String finalFile = s;
         Log.i(DEBUG_TAG,"Final File Is " + finalFile);
         wv.loadUrl(finalFile);
       }

    private void GoNext(){
        int TotalRows = pageList.length;
        if((SelectedRow + 1)<TotalRows)
            {
            SelectedRow=SelectedRow +1;
            String s=pageList[SelectedRow];
            loadWebView(s);
            }
    }   

    private void GoPrevious(){
        if(SelectedRow>0)
        {
            SelectedRow = SelectedRow-1;
            String s=pageList[SelectedRow];
            loadWebView(s);
        }   
        }

    } 
```

启动活动时，第一页正确显示，但是当我按“右箭头”转到下一页时，日志显示它找到了正确的页面（即 finalFile 现在是“page_9”）但 webview 没有加载。

dalvikm 报告'threadid = 1：线程以未捕获的异常退出，然后运行时给出致命异常和空指针异常

我错过了什么？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T23:22:42.867

`WebView wv;`从您的-statement 中删除`onCreate`，因为这使其成为 onCreate 中的*局部*变量

# oop - 如何在 MATLAB 方法中清除持久变量

> ID：10777924
> 
> 赞同：1
> 
> 时间：2012-05-27T23:11:48.167
> 
> 标签：oop, matlab, persistent

我有一个 MATLAB 类，其中包含一个使用持久变量的方法。当满足某些条件时，我需要清除持久变量而不清除方法所属的对象。我已经能够做到这一点，但只能通过使用`clear functions`对我的目的来说范围过于广泛的人。

此问题的 classdef .m 文件：

```
classdef testMe

    properties
        keepMe
    end

    methods
        function obj = hasPersistent(obj)
            persistent foo

            if isempty(foo)
                foo = 1;
                disp(['set foo: ' num2str(foo)]);
                return
            end
            foo = foo + 1;
            disp(['increment foo: ' num2str(foo)]);

        end

        function obj = resetFoo(obj)
            %%%%%%%%%%%%%%%%%%%%%%%%%
            % this is unacceptably broad
            clear functions
            %%%%%%%%%%%%%%%%%%%%%%%%%
            obj = obj.hasPersistent;
        end
    end

end 
```

使用此类的脚本：

```
test = testMe();
test.keepMe = 'Don''t clear me bro';

test = test.hasPersistent;
test = test.hasPersistent;
test = test.hasPersistent;

%% Need to clear the persistent variable foo without clearing test.keepMe

test = test.resetFoo;

%%
test = test.hasPersistent;
test 
```

输出是：

```
>> testFooClear
set foo: 1
increment foo: 2
increment foo: 3
increment foo: 4
set foo: 1

test = 

  testMe

  Properties:
    keepMe: 'Don't clear me bro'

  Methods 
```

这是所需的输出。问题是`clear functions`classdef 文件中的行清除了内存中的所有函数。我需要一种在更小的范围内清除的方法。例如，如果`hasPersistent' was a function instead of a method, the appropriately scoped clear statement would be`清除 hasPersistent`。

我知道，`clear obj.hasPersistent`并且`clear testMe.hasPersistent`两者都无法清除持久变量。`clear obj`同样是个坏主意。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T00:20:18.287

在评论中的讨论之后，我认为您想使用`foo`私有财产，并附带适当的`increment`/`reset`公共功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T17:37:04.563

您绝对不需要持久变量来实现您想要的。但是，无论如何，要从类方法中删除持久变量，您必须`clear`使用相应的类。在你的情况下，`clear testMe`应该做你想做的事。

一个相关的问题是如何清除包函数中的持久变量。要从包`myVar`中的函数中删除持久变量，您必须这样做：`foo``foo_pkg`

```
clear +foo_pkg/foo 
```

只要文件夹的父文件夹`+foo_pkg`位于 MATLAB 路径中，这应该可以工作。

# jquery - 创建 AJAX 数据字符串

> ID：10777927
> 
> 赞同：0
> 
> 时间：2012-05-27T23:12:27.260
> 
> 标签：jquery, ajax, forms

我正在通过 AJAX 向 PHP 脚本提交表单，该脚本会向我发送包含表单详细信息的电子邮件。该表格非常简单，除了我有一组复选框来表示填写表格的人想要的项目类型。我知道如何用简单的形式组装数据字符串，但我很难找出添加名称等于 projecttype[] 的复选框的最佳方法。从理论上讲，我想我想要类似的东西：

```
website=example.com&projecttype=1,2,4,6&budget=$500-$1000\. 
```

您可以在这个 jfiddle 中找到表单和 Javascript：http: [//jsfiddle.net/H5MF8/](http://jsfiddle.net/H5MF8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T23:14:30.867

jQuery 有一个专门用于此目的的功能：[`.serialize()`](http://api.jquery.com/serialize/). 它获取表单中的每个元素并创建一个查询字符串。下面的代码片段应该足够了。

```
$("#submit").click(function() {
  $.ajax({
    type: "POST",
    url: "/bin/send_form_email.php",
    data: $('#contactform').serialize(),
    cache: false,
    success: function() {
    //    ...
    },
    return false;
  });   
}); 
```

# clang - 更新 Xcode 4.3 以使用更新的 Clang

> ID：10777928
> 
> 赞同：2
> 
> 时间：2012-05-27T23:13:14.333
> 
> 标签：clang, xcode4.3, llvm-clang

如何配置 Xcode 4.3.2 以使用树干尖 Clang（或任何迟于 Xcode 4.3.2 附带的 Clang 的 Clang）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:18:57.703

[使用与http://clang-analyzer.llvm.org/installation](http://clang-analyzer.llvm.org/installation)上的版本捆绑的 Python 脚本 set-xcode-analyzer 。但请注意，这可能取决于您安装的 Python 版本：http: [//llvm.org/bugs/show_bug.cgi ?id=11661](http://llvm.org/bugs/show_bug.cgi?id=11661)

# delphi - MakeScreenshot 泄露？

> ID：10777929
> 
> 赞同：10
> 
> 时间：2012-05-27T23:13:34.097
> 
> 标签：delphi, memory-leaks, delphi-xe2, firemonkey

大家晚上好！

在当前的项目中，我遇到了一个相当令人担忧的内存泄漏，我似乎无法解决这个问题。

我让应用程序在标准使用情况下运行了一夜，当我在 8 小时后醒来时，它消耗了约 750MB 的内存，而它开始时的内存约为 50MB。Windows 任务管理器不适合检查泄漏，除了让您首先发现存在泄漏。

我已经清除了其他一些内存泄漏，主要与 Firemonkeys 相关`TGlowEffect`。它没有被检测到，`ReportLeaksOnShutdown`但它的内存使用在动态修改的对象（例如旋转或缩放变化）上变得非常过度。

我已经将它追踪到一个计时器（并禁用它完全阻止泄漏），如果可能的话，我需要帮助来修复它。

**说明：**此代码使用 Firemonkey`MakeScreenshot`函数将 a 的视觉外观保存`TPanel (SigPanel)`到 a `TMemoryStream`。然后使用标准代码将此流数据上传到远程 FTP 服务器（见下文）。里面`SigPanel`有4个`TLabel`孩子，1个`TRectangle`孩子，6个`TImage`孩子。

**注意**：`CfId`是一个全局字符串，是根据一个随机`extended`浮点值生成的，该浮点值随后与格式中的 DateTime 一起散列`yyyymmdd_hhnnsszzz`。这一生成是在创建表单时完成的，它会重复直到它成为一个有效的`CfId`（即不包含在 Windows 文件名中使用的非法字符）。一旦它得到一个 valid `CfId`，它就根本不会再次运行（因为我不再需要生成一个新的 ID）。这让我几乎完全消除了重复的机会`CfId`。

定时器中的代码如下；

```
var
  i : Integer;
  SigStream : TMemoryStream;
begin
  SigStream := TMemoryStream.Create;
  SigPanel.MakeScreenshot.SaveToStream(SigStream);
  SigPanel.MakeScreenshot.Free;
  if VT2SigUp.Connected then
  begin
    VT2SigUp.Put(SigStream,'Sig_'+CfId+'.png',False);
  end else
  begin
    VT2SigUp.Connect;
    VT2SigUp.Put(SigStream,'Sig_'+CfId+'.png',False);
  end;
    SigStream.Free;
end; 
```

在计时器**没有**运行的情况下，代码完全没有泄漏并且**不会**`ReportMemoryLeaksOnShutdown`生成消息。启用计时器并允许至少“运行”一次，我得到了很多泄漏，这增加了计时器运行的次数。报告的泄漏如下；

 **```
Small Block Leaks

1 - 12 Bytes: Unknown x 1
13 - 20 Bytes: TList x 5, Unknown x 1
21 - 28 Bytes: TFont x 2, TGradientPoint x 8, TGradientPoints x 4, Unknown x 4
29 - 36 Bytes: TObjectList<FMX.Types.TCanvasSaveState> x 1, TBrushBitmap x 4,
TBrushGrab x 4, TPosition x 24, TGradient x 4, UnicodeString x1
37 - 44 Bytes: TBrushResource x 4
53 - 60 Bytes: TBrush x 4
61 - 68 Bytes: TBitmap x 5
69 - 76 Bytes: TD2DCanvasSaveState x 1
205 - 220 Bytes: TCanvasD2D x 1

Sizes of Medium and Large Block Leaks
200236 
```

当计时器运行时，这些值会乘以*n*次（*n*是计时器已运行的次数）。中型和大型块的*n*值为 200236（例如，如果计时器已运行 3 次，*则为 200236, 200236, 200326*）。

有趣的是，如果我删除与 关联的代码`MakeScreenshot`，则泄漏不再存在，并且内存使用率保持在正常水平。除了通常的内存使用外，没有任何异常，也没有报告泄漏。我已经尝试了多个代码示例，无论是保存到流并从那里上传，还是保存到流>文件然后上传文件，但函数本身似乎存在泄漏。一旦我发现这里有泄漏，我什至添加`MakeScreenshot.Free`了，但我似乎无法插入它，当然，我已经`try..finally`在我的一个代码“测试运行”中使用过。

我什至使用 GDI+ 作为画布类型运行代码，并且在那里发生了相同的泄漏（唯一的变化是 D2D 泄漏引用了 GDI+）。

我非常感谢任何人对此进行的任何研究或笔记，此外，还有解决该问题的方法。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-28T00:23:51.037

您没有释放`MakeScreenshot`创建的位图。

```
procedure TForm1.Button1Click(Sender: TObject);
var
  ms: TMemoryStream;
begin
  ms := TMemoryStream.Create;
  Panel1.MakeScreenshot.SaveToStream(ms);
  ms.Free;
end; 
```

上面的代码没有保留对创建的位图的引用，因此没有机会释放它。而是更改您的设计，如下所示：

```
procedure TForm1.Button2Click(Sender: TObject);
var
  ms: TMemoryStream;
  bmp: TBitmap;
begin
  ms := TMemoryStream.Create;
  bmp := Panel1.MakeScreenshot;
  bmp.SaveToStream(ms);
  ms.Free;
  bmp.Free;
end; 
```

使用下面的代码，您实际上是在创建两个位图并释放其中一个。

```
 SigPanel.MakeScreenshot.SaveToStream(SigStream);
  SigPanel.MakeScreenshot.Free; 
```

最后，您的代码将更像以下内容：

```
var
  i : Integer;
  Bmp: TBitmap;
  SigStream : TMemoryStream;
begin
  SigStream := TMemoryStream.Create;
  try
    Bmp := SigPanel.MakeScreenshot;
    try
      Bmp.SaveToStream(SigStream);
      if not VT2SigUp.Connected then
        VT2SigUp.Connect;
      VT2SigUp.Put(SigStream, 'Sig_'+CfId+'.png', False);
    finally
      Bmp.Free;
    end;
  finally
    SigStream.Free;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-04T17:19:37.393

我尝试在 fmx 中使用它，但它不起作用所以我从 FMXexpress 中获取了一个类似的功能，这也是内存泄漏并对其进行了修改。

我将函数转换为传递 2 个参数的过程。第一个是您想要生成屏幕的对象，第二个是目标对象。最后它会清除内存。

```
class Procedure MakeScaleScreenshot(Sender: TControl; SetImg: TImage);

Class Procedure MakeScaleScreenshot(Sender: TControl; SetImg: TImage);
var
  fScreenScale: Single;
  Result:TBitmap;
function GetScreenScale: Single;
  var
    ScreenService: IFMXScreenService;
  begin
    Result := 1;
    if TPlatformServices.Current.SupportsPlatformService(IFMXScreenService,
      IInterface(ScreenService)) then
    begin
      Result := ScreenService.GetScreenScale;
    end;
  end;

begin    
  fScreenScale := GetScreenScale;
  Result := TBitmap.Create(Round(Sender.Width * fScreenScale), Round(Sender.Height * fScreenScale));
  Result.Clear(0);

  if Result.Canvas.BeginScene then
  try
    Sender.PaintTo(Result.Canvas, RectF(0, 0, Result.Width, Result.Height));
  finally
    Result.Canvas.EndScene;
    SetImg.Bitmap:=Result;
  end;

 Result.FreeHandle;
 Result.DisposeOf;

end;

//how to use

Procedure
Begin
  {TControl source screen}, {Img destiny of the TImage type}
  MakeScaleScreenshot(Image1,Image2);
end; 
```**

# haskell - Clojure 是否有类似于 Haskell 的美元符号的运算符？

> ID：10777930
> 
> 赞同：2
> 
> 时间：2012-05-27T23:13:34.607
> 
> 标签：haskell, clojure, functional-programming, operators

也许我应该只接受括号，但我不禁觉得像 Haskell 中存在的美元符号这样的运算符真的会清理代码并提高可读性。

我正在寻找优先/绑定到它后面的所有符号的东西。

```
putStrLn (show $ 1 + 1)
putStrLn $ show (1 + 1)
putStrLn $ show $ 1 + 1 
```

我知道线程运算符。这些非常有用并且肯定会增加可读性，但它们实际上并没有减少括号数。在大多数情况下，因为它们看起来更类似于函数组合（这将是 Haskell . 运算符）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-27T23:37:35.240

`$`运算符依赖低绑定优先级，实际上[是最低](http://www.haskell.org/onlinereport/decls.html#fixity)的.

由于 Clojure、Scheme 和 Lisp 不支持用户定义的优先级或固定性，因此不可能像 Haskell 那样定义这些语法结构。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T23:40:01.603

我认为不存在这样的功能，但是使用宏，您可能可以创建一个。如果没有读取器宏（在 Clojure 中不存在），您将永远无法摆脱最外面的一对括号，但您可以消除所有内部的括号。我刚刚学会了如何创建宏，所以如果我以后足够勇敢，我会试一试。:)

支持 Clojure 语法的编辑器大大提高了可读性。我个人使用 emacs、SLIME 等，我什至不再真正看到括号了（尤其是使用 Paredit）。

# mysql - 无法更改 mysql 中的 auto_increment_increment 值

> ID：10777934
> 
> 赞同：4
> 
> 时间：2012-05-27T23:13:51.010
> 
> 标签：mysql, auto-increment

我有一个数据库，它的一个表开始自动将值递增 10。我从未明确设置过它，但出于某种原因它正在这样做。我尝试使用以下方法将 auto_increment_increment 值重置为 1：

```
SET @@auto_increment_increment=1; 
```

但它不会改变！我尝试使用命令行来完成它，但它仍然没有这样做。

还有一件事，在我的本地机器上 auto_increment 工作正常（它设置为 1），但这是我服务器上的问题。当我在命令行上使用 mysql 时，我以“root”用户身份登录。

有人可以建议我的数据库有什么问题吗？感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T22:28:43.680

感谢 WoLpH 的所有帮助。

我终于找到了导致这个问题的原因！auto_increment_increment 的值在**.\xampp\mysql\bin\my.ini**文件中被更改。这就是为什么，即使我尝试使用以下查询替换它，它也没有改变：

```
SET @@auto_increment_increment=1; 
```

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T23:19:11.753

您确定这里的问题是自动增量值吗？如果您在事务中插入一行并回滚，它也会增加，您将永远无法取回 id。

如果您的代码以某种方式插入了许多行并将它们全部回滚，那么您也会看到这种行为。

# plugins - Vimscript - 运行正常！qm后运行正常！@m

> ID：10777937
> 
> 赞同：2
> 
> 时间：2012-05-27T23:16:22.863
> 
> 标签：plugins, editor, vim

所以，这是我在尝试编写插件时遇到的一个奇怪的情况。对我来说，这看起来像是 Vim 中的一个错误，但我可能会遗漏一些东西，所以我求助于 StackOverflow 的智慧。

采取这个功能：

```
fun! Test()
    normal! q ; Stop recording a macro.
    let @r='kkkkkkkkkkkkk'
    normal! @r
    normal! qm
endf 
```

基本上，我停止录制宏，尝试运行寄存器的内容，然后开始重新录制宏。

我通过点击`qm`，执行一些命令，然后调用该函数来调用此函数。

**我的期望**

我希望执行“kkkkkk”，然后重新开始录制。

**怎么了**

运行“kkkk”，但*没有*再次开始录制。

我不明白为什么！

**解决方法**

以下功能可以满足我的要求，但它是一个 hack。我试图了解我的问题的根本原因：

乐趣！测试（）正常！q 让@r='kkkkkkkkkkkkkk' 执行“正常！”。@r 正常！qm endf

我只是用直接执行寄存器内容的执行调用替换了寄存器的运行。基本上，我欺骗 vim 使其不认为它正在运行一个寄存器。

**注意：为什么我想要这个**

这是一个插件。这个函数只是我能做的最小的一个问题。不值得讨论为什么我想要这个——我需要的基本功能是从一个函数中运行一个寄存器，然后再次开始记录它。在实际用例中，我运行和记录到的寄存器是一样的，但似乎并没有影响这个问题。

那么，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T04:32:58.030

为什么不能将函数调用嵌入到映射中：

```
function Test()
    let @r='kkkkkkkkkkkk'
    normal! @r
endfunction
nnoremap Q q:call Test()<CR>qm 
```

? 如果“m”实际上是一个非常量值，那么您必须使用`<expr>`：

```
nnoremap <expr> Q "q:call Test()\nq".g:plugin_register 
```

. 当然，您可以在`<expr>`映射中使用函数调用（因此移动`normal! @r`到函数的输出：`return '@r'`因为不允许执行表达式`normal!`、缓冲区编辑、切换和移动光标）。

# prism - 棱镜和导入控制到区域

> ID：10777938
> 
> 赞同：1
> 
> 时间：2012-05-27T23:16:41.687
> 
> 标签：prism, region

使用 Prism 将控件注入区域时，

是否可以注入已使用某些属性初始化的控件？问题是在使用 XAML 时我不能从控件继承并分配不同的属性，而且似乎在使用 Prism 时我必须使用默认构造函数将控件注入到区域中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T01:15:32.717

如果您使用导航框架将控件注入区域，那么您可以实现`INavigationAware`一些参数并将其作为查询字符串传递。

[http://blogs.msdn.com/b/kashiffl/archive/2010/10/04/prism-v4-region-navigation-pipeline.aspx](http://blogs.msdn.com/b/kashiffl/archive/2010/10/04/prism-v4-region-navigation-pipeline.aspx)

# python - Paramiko ssh_config 参数

> ID：10777940
> 
> 赞同：2
> 
> 时间：2012-05-27T23:16:50.117
> 
> 标签：python, ssh, timeout, paramiko, pysftp

我正在使用带有 paramiko 的 python（包装在 pysftp 中），如果在 ssh 期间无法进行身份验证，它似乎会挂起很长时间。我想不出一种为连接设置超时的方法，而且我在很多机器上循环，所以一台可以ping通但不能ssh'able（也无法通过cmdline ssh访问）的机器正在挂起所有东西. 使用这个：

```
ssh -o ServerAliveInterval=1 -o ServerAliveCountMax=1 <host> 
```

我至少可以让它在 1 秒后出错，而无需等待很长时间让 paramiko 中的身份验证消失并引发异常。但是，我不知道如何将这些 ssh_config 选项传递给 paramiko（或者最好对连接应用超时）。我尝试使用 SSHConfig 模块并读取配置文件，但它似乎没有将数据应用到任何地方，似乎更多地用于主机别名。

任何帮助将不胜感激，多年来一直在寻找信息/帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T03:59:05.087

`SSHClient.connect()`使用指定的套接字超时建立初始连接，然后`SFTPClient`使用其传输创建一个。

**连接成功**

```
>>> import paramiko
>>> client = paramiko.SSHClient()
>>> client.load_system_host_keys()
>>> client.connect(hostname='localhost', port=22, username='user', password='****', timeout=5.0)
>>> sftp = paramiko.SFTPClient.from_transport(client.get_transport())
>>> dirlist = sftp.listdir('.') 
```

**连接超时**

```
>>> import paramiko
>>> client = paramiko.SSHClient()
>>> client.load_system_host_keys()
>>> client.connect(hostname='slowhost', username='user', password='****', timeout=1.0)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/site-packages/paramiko/client.py", line 296, in connect
    sock.connect(addr)
  File "/usr/lib64/python2.7/socket.py", line 222, in meth
    return getattr(self._sock,name)(*args)
socket.timeout: timed out 
```

# jquery - 绝对位置在 IE7 中不起作用

> ID：10777951
> 
> 赞同：0
> 
> 时间：2012-05-27T23:20:25.687
> 
> 标签：jquery, html-table, internet-explorer-7, fixed-header-tables

我尝试在页面上向下滑动时修复表头。问题出在 IE7 中，**thead**不是绝对的，而是显示在“正确”的位置。它需要飞过桌子。它在 Firefox 11 中完美运行

我有一个表结构如下：

```
<span id="MyTable">
    <table border="0" cellpadding="2" cellspacing="2" width="100%">
    <thead class="tableFloatingHeader">
    <tr>
        <th>t</th>
        <th>t</th>
        <th>t</th>
        <th>t</th>
        <th>t</th>
        <th>t</th>
    </tr>
    <tr>
    <td><b>Total</b></td>
    <td></td>
    <td align="right"><b>2</b></td>
    <td align="right"><b>2</b></td>
    <td align="right"><b>2</b></td>
    <td align="right"><b>2</b></td>
    </tr>
    </thead>
<thead class="tableFloatingHeaderOriginal">
    <tr>
        <th>t</th>
        <th>t</th>
        <th>t</th>
        <th>t</th>
        <th>t</th>
        <th>t</th>
    </tr>
    <tr>
    <td><b>Total</b></td>
    <td></td>
    <td align="right"><b>2</b></td>
    <td align="right"><b>2</b></td>
    <td align="right"><b>2</b></td>
    <td align="right"><b>2</b></td>
    </tr>
    </thead> 
```

CSS

```
.tableFloatingHeader {
    overflow: hidden;
    position: absolute;
    top: 0;
    display: none;
    left: auto;
    background-color: red;
} 
```

jQuery

```
<script type="text/javascript">
        function UpdateTableHeaders() {
            $("div.divTableWithFloatingHeader").each(function() {
                var originalHeaderRow = $(".tableFloatingHeaderOriginal");
                var floatingHeaderRow = $(".tableFloatingHeader");
                var offset = $(this).offset();
                var scrollTop = $(window).scrollTop();
                if ((scrollTop > offset.top) && (scrollTop < offset.top + $(this).height())) {
                    floatingHeaderRow.css("display", "block");
                    floatingHeaderRow.css("top", Math.min(scrollTop - offset.top, $(this).height() - floatingHeaderRow.height()) + "px");

                    // Copy cell widths from original header
                    $("th", floatingHeaderRow).each(function(index) {
                        var cellWidth = $("th", originalHeaderRow).eq(index).css('width');
                        $(this).css('width', cellWidth);
                    });

                    // Copy row width from whole table
                    floatingHeaderRow.css("width", $(this).css("width"));
                }
                else {
                    floatingHeaderRow.css("display", "none");
                    floatingHeaderRow.css("top", "0px");
                }
            });
        }
        UpdateTableHeaders();
        $(window).scroll(UpdateTableHeaders);
        $(window).resize(UpdateTableHeaders);
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:03:48.930

这可能会对你有所帮助，基本上是为 IE7 添加条件 CSS 表达式样式。我不喜欢使用表达式，但 IE7 是另一种动物。

```
thead tr {
     position: relative;
     top: expression(this.offsetParent.scrollTop);
    } 
```

[http://geekswithblogs.net/LSheu/archive/2009/01/30/css-table-scrolling-with-fixed-header-for-ie-7.aspx](http://geekswithblogs.net/LSheu/archive/2009/01/30/css-table-scrolling-with-fixed-header-for-ie-7.aspx)

编辑*错误的网址

# php - SonataAdminBundle 中的空值

> ID：10777952
> 
> 赞同：0
> 
> 时间：2012-05-27T23:20:38.010
> 
> 标签：php, symfony, symfony-sonata

我通过本教程学习 SonataAdminBundle： [http ://sftuts.com/doc/jobeet/en/the-admin-generator](http://sftuts.com/doc/jobeet/en/the-admin-generator)

但不是：

![在此处输入图像描述](../Images/cef663a680bd286129a1f8fea6a2723c.png)

我有空值：

![在此处输入图像描述](../Images/454542894967095a851aee4f1b3c506a.png)

同样在表单中，我只有提交按钮，但是如果单击此按钮，则会出现错误：

```
PDOException: SQLSTATE[23000]: Integrity constraint violation: 1048 Column 'type' cannot be null 
```

SonataAdminBundle 的教程可能更好吗？

**编辑：**

```
<?php

//src/SfTuts/JobeetBundle/Admin/CategoryAdmin.php

namespace SfTuts\JobeetBundle\Admin;

use Sonata\AdminBundle\Admin\Admin;
use Sonata\AdminBundle\Form\FormMapper;
use Sonata\AdminBundle\Datagrid\DatagridMapper;
use Sonata\AdminBundle\Datagrid\ListMapper;

class CategoryAdmin extends Admin
{
    protected $list = array(
        'id' => array('identifier' => true),
        'name',
    );
    protected $form = array(
        'name',
    );
    protected $filter = array(
        'name',
    );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T11:28:36.337

你可以阅读这篇文档。您的教程版本可能已过时。 [http://sonata-project.org/bundles/admin/master/doc/index.html](http://sonata-project.org/bundles/admin/master/doc/index.html)

试试这个代码：

```
use Sonata\AdminBundle\Admin;
use Sonata\AdminBundle\Datagrid\ListMapper;
use Sonata\AdminBundle\Datagrid\DatagridMapper;
use Sonata\AdminBundle\Validator\ErrorElement;
use Sonata\AdminBundle\Form\FormMapper;
class CategoryAdmin extends Admin
{
    /**
     * @param \Sonata\AdminBundle\Form\FormMapper $formMapper
     * @return void
     */
    protected function configureFormFields(FormMapper $formMapper)
    {
        $formMapper
            ->add('name')
            ;
    }

    /**
     * @param \Sonata\AdminBundle\Datagrid\DatagridMapper $datagridMapper
     * @return void
     */
    protected function configureDatagridFilters(DatagridMapper $datagridMapper)
    {
        $datagridMapper
            ->add('name');
    }

    /**
     * @param \Sonata\AdminBundle\Datagrid\ListMapper $listMapper
     * @return void
     */
    protected function configureListFields(ListMapper $listMapper)
    {
        $listMapper
            ->add('id')
            ->addIdentifier('name');
    }
} 
```

# python - 模糊正则表达式、文本处理、词法分析？

> ID：10777957
> 
> 赞同：3
> 
> 时间：2012-05-27T23:23:16.620
> 
> 标签：python, regex, text-processing

我不太确定要搜索什么术语，所以我的标题很时髦......这是我的工作流程：

1.  半结构化文件被扫描归档。这些文件被 OCR 转换为文本。
2.  **文本被解析成 Python 对象**
3.  对象被序列化（到 SQL、JSON 等）以供使用。

文档是这样的结构：

> 标题等等，页面###
> 
> 废话
> 
> 垃圾文...
> 
> **1.问题文本...**
> 
> **一直持续到现在。**A. 选择文本...
> 
> adsf. B. 另一种选择...
> 
> **2\. 另一个问题...**

我需要提取问题和选择。问题是，因为文本是 OCR 输出，偶尔会有奇怪的替换，比如 '2' -> 'Z'，这使得普通的正则表达式无用。我已经尝试过 Levenshtein 模块，它有所帮助，但它需要事先了解预期的编辑距离。

我不知道我是否要创建解析器？词法分析器？别的东西？这使我走上了各种有趣但不相关的道路。指导将不胜感激。哦，还有，文本通常来自特定的技术领域，所以一般的拼写工具没有那么有用。

关于文档的结构，除了“问题”通常以一行开头之外，没有清晰的视觉模式——如换行符或缩进。文档上的废话会导致字符出现在行的实际开头之前，这意味着沿着 r'^[0-9]+' 行的某些东西不能可靠地工作。

尽管“问题”总是以整数、句点和空格开头；OCR 可以替换其他字符或跳过字符。这不是 Tesseract 或 Cunieform 的问题，而是纸质文档质量差的问题。

#

注意：对于有问题的项目，决定让人工准备 OCR 的文本比花时间编写解决方案更好。但是，我仍然喜欢好的指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:44:01.637

根据您的陈述，您可能正在尝试构建解析器。由于提供了模糊的要求和示例，我建议您从查看[nltk.org 开始](http://nltk.org)。另一种选择可能是[gate.ac.uk](http://gate.ac.uk)

# php - 将 DATETIME 列日期与 PHP 中的当前日期进行比较？

> ID：10777964
> 
> 赞同：2
> 
> 时间：2012-05-27T23:24:17.040
> 
> 标签：php

我有一个 DATETIME 列，它存储以下值：

2012-05-20 14:00:00

如何将日期`$row['Date']`与当前日期（时间不重要）进行比较以查看它是否比今天早？

```
if($row['Date'] < ...) {
echo 'date has passed'
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T00:12:47.660

为什么不让 SQL 为您进行比较？

```
SELECT *, DATE(`Date`) < DATE(NOW()) AS is_old ... 
```

然后你有一个名为“is_old”的列，如果日期在今天之前，则为 1，如果不是，则为 0。因此，在 PHP 中，您需要做的就是：

```
if ($row['is_old']) {
    // handle the old date case
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T23:28:41.043

```
strtotime($row['Date']) < time() + 60 * 60 * 24; 
```

我们将额外的一天（60 秒 * 60 分钟 * 24 小时）添加到 time() 以有效地忽略您要求的小时/分钟/秒

就是这么简单 :D 你也可以很容易地添加偏移量和东西：

[http://www.php.net/manual/en/function.time.php](http://www.php.net/manual/en/function.time.php)

[http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T23:29:52.220

```
if( $row['Date'] < date('Y-m-d') ) {
 echo 'date has passed';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T23:34:26.553

正确的方法是将 MySQL 日期字符串转换为 PHP 理解时间值的格式：

```
$date = strtotime( $row['date'] ); 
```

然后，您可以将其与当前时间进行比较，

```
if ( $phpdate < time() ) {
  ...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-06T08:06:45.143

非常老的问题，但它仍然可以帮助某人。 注意单引号， **时间**是列名。 我们使用它的方式如下： 将 $urlTime 替换为当前日期时间
`SELECT * FROM tbarticle WHERE UNIX_TIMESTAMP(`time`) > 'UNIX_TIMESTAMP(`2018-01-01 21:48:46`)'`
 **`$sql="SELECT * FROM tbarticle WHERE UNIX_TIMESTAMP(`time`) > 'UNIX_TIMESTAMP($urlTime)'";`**

# javascript - 我可以从 javascript 中将字段标记为无效吗？

> ID：10777970
> 
> 赞同：119
> 
> 时间：2012-05-27T23:26:02.000
> 
> 标签：javascript, html, css, validation

通过阅读[这篇文章](http://html5doctor.com/css3-pseudo-classes-and-html5-forms/)，我发现 HTML5 中引入了一些用于“有效”和“无效”输入值的伪类。

有没有办法可以将输入字段标记为来自 javascript 的无效/有效？或者，我可以覆盖使用的验证方法吗？

* * *

## 回答 #1

> 赞同：203
> 
> 时间：2013-09-18T22:09:30.730

为此，您可以使用 customValidity 函数。

如果您将 customValidity 消息添加到该字段，它将变为无效。当您将消息设置为空字符串时，它再次变为有效（除非由于其他原因而无效）。

`field.setCustomValidity("Invalid field.");`将使该字段无效。

`field.setCustomValidity("");`将使该字段有效，除非它未能通过 HTML5 约束。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-27T23:42:32.790

**编辑**：有人澄清说您正在寻找 DOM 的“有效”“无效”属性。

我会使用`dom_object.setAttribute("isvalid", "true")`. 您还可以有一个中央验证功能，每次更新这些属性（并`dom_object.getAttribute("isvalid")`每次使用）。

您可以在每次元素失去焦点时或任何时候运行此函数。

不完全优雅，但不幸的是，现在没有对 javascript 和 HTML5 的“伪”支持。

* * *

如果我理解您的问题，您可以使用 Javascript 进行验证。**但是，请注意，绕过客户端验证非常容易，尤其是 javascript 验证**。您永远不应该信任客户端数据，并始终在服务器端进行检查。

例如，我可以通过检查源代码轻松找到元素 ID，然后`document.getElementById('some_id').setAttribute('max', new_number)`更改最大值（这是您链接中的条目之一）。

有多种方法可以做到这一点，所以我将尝试为您提供一般习语。

您可以通过执行获取值`document.getElementById('form_element_id').value`（确保提供`name`发送到服务器的表单 a 以及`id`javascript 使用的表单）。对于文本区域，您可以使用`.innerHTML`.

然后你有一个变量中的值，有多种方法可以检查它。

例如，您可以执行`if (parseInt(my_value) < 0) //error`. 您也可以使用正则表达式，我不会全部解释，但您可以从这里开始[http://www.w3schools.com/jsref/jsref_obj_regexp.asp](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)。我知道 w3schools 不是最好的来源，但我发现它是一个不错的起点。

现在对于验证部分：添加`onsubmit="return validateForm()`到您的表单标签，其中 validateForm() 是执行所有检查的函数。`true`如果有效，则该函数仅返回，`false`否则返回。这**会覆盖默认的验证功能**（默认情况下什么都不做）。

所以在上面的例子中，`//error`将被替换为`return false`. 你也可以做其他事情；例如警告错误然后返回false。您还可以使用 javascript 突出显示无效字段（不确定这是否是您所说的“**将输入字段标记为来自 javascript 的无效/有效**”的意思）

当然，如果您不想检查所有字段，则只需在某些字段通过时返回 true。同样，你不应该依赖这个，但如果你只是想阻止普通人，那么这是一个简单的解决方案。

* * *

## 回答 #3

> 赞同：-18
> 
> 时间：2012-05-27T23:45:31.630

> 有没有办法可以将输入字段标记为来自 javascript 的无效/有效？

不幸的是，您不能在 JavaScript 中设置伪类的样式，因为它们不是真正的元素，它们不存在于实际的 DOM 中。

使用 vanilla JavaScript，您将使用[验证 API](https://developer.mozilla.org/en-US/docs/Learn/Forms/Form_validation#Constraint_validation_API_properties)。

在 jQuery 中，您可以简单地执行此操作，[http://jsfiddle.net/elclanrs/Kak6S/](http://jsfiddle.net/elclanrs/Kak6S/)

```
if ( $input.is(':invalid') ) { ... } 
```

> 或者，我可以覆盖使用的验证方法吗？

如果您使用 HTML5 验证，请坚持使用标记。否则，您可以禁用 HTML5 验证`$form.attr('novalidate', 'novalidate')`并使用 JS 来验证您的字段，然后在需要的地方添加`valid`或类。`invalid`我制作了一个像这样工作[的插件来支持非 HTML5 浏览器。](https://github.com/elclanrs/jq-idealforms)

# r - R中更详细的目录列表？

> ID：10777972
> 
> 赞同：4
> 
> 时间：2012-05-27T23:26:15.983
> 
> 标签：r

我写的一个函数会生成一个输出文件。附加函数可以获取该文件的内容（名称具有可以轻松匹配的模式），并执行更多操作。目前可以执行以下操作：

```
function1(...)
# This will generate a file, say output_typea.md
# Then one could process this content further using
function2(input_file = 'output_typea.md') 
```

但是，由于这两个函数是按顺序运行的，我只想让用户调用`function2()`，而缺少输入只会读取与`dir(pattern = "*_type.md")`. 不幸的是，似乎无法`dir()`按修改日期对列表进行排序。我需要的是最新的文件匹配文件名模式。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T23:37:34.617

查找 ctime（或其他）并返回相应的文件：

```
x <- dir()
y <- file.info(x)
row.names(y[y$ctime==max(y$ctime),]) 
```

# android - Android- 多个微调器

> ID：10777977
> 
> 赞同：14
> 
> 时间：2012-05-27T23:28:13.510
> 
> 标签：android, android-layout, android-widget, spinner

我有这个代码：

```
package lijap.app.starcraft2counters;

import java.io.File;
import android.app.Activity;
import android.os.Bundle;
import android.os.Environment;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.widget.Toast;

public class Settings extends Activity implements OnItemSelectedListener {
Spinner answertime;
Spinner gametime;
Spinner missesallowed;

String[] answerseconds = { "Unlimited", "1 second", "2 seconds", "3 seconds",
        "4 seconds", " 5 seconds" };

String[] gameminutes = { "Unlimited", "1 minute", "2 minutes", "3 minutes",
        "4 minutes", " 5 minutes" };

String[] numberofmisses = { "Unlimited", "5", "10", "15",
        "20", "25" };

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.settings);

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(Settings.this,
            android.R.layout.simple_spinner_item, gameminutes);

    answertime = (Spinner) findViewById(R.id.s_answertime);
    answertime.setAdapter(adapter);
    answertime.setOnItemSelectedListener(this);
}

@Override
public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
        long arg3) {
    // TODO Auto-generated method stub

}

@Override
public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub

}
} 
```

试图放入超过 1 个微调器时，我感到很困惑。我是共享阵列适配器，还是为每个适配器创建一个新的？onItemSelected 怎么样？正如您在顶部的字符串中看到的那样，我想要三个微调器。我该怎么做？

如您所知，我是android新手。感谢所有帮助-Lijap

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-27T23:31:40.730

`Spinner`如果它们适应了相同的信息，您可以在不同的 s 之间共享适配器。显然，您的每个适配器都需要适应一组不同的`String`s，因此您需要`ArrayAdapter`为每个`Spinner`.

一个`OnItemSelectedListener`适用于 3 `Spinners`（只要你设置它们）。您可以`getId()`将`AdapterView<?>`传递的作为参数调用，以了解是哪个`Spinner`引发了事件。

```
public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
        long arg3) {
    switch(arg0.getId()){
        case R.id.s_answertime:
            break;
        case ...
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-28T03:25:22.767

检查这个

```
yearDropdown.setOnItemSelectedListener(new OnItemSelectedListener() {

    public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) 
    {
        selectedyear = parentView.getSelectedItemPosition();
        drpyear      = yearDropdown.getSelectedItem().toString();

        //your code here

    }

    public void onNothingSelected(AdapterView<?> parentView) 
    {
        selectedyear = 0;
        //return;
    }
});

monthDropdown.setOnItemSelectedListener(new OnItemSelectedListener() {

    public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) 
    {
        //your code here

    }

    public void onNothingSelected(AdapterView<?> parentView) 
    {
        selectedmonth = 0;
        //return;
    }
});

dayDropdown.setOnItemSelectedListener(new OnItemSelectedListener() {

    public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) 
    {
        //your code here

    }

    public void onNothingSelected(AdapterView<?> parentView) 
    {
        selectedday = 0;
    }
}); 
```

您需要为每个微调器创建每个适配器。

```
 adapterYear = new ArrayAdapter<CharSequence>(this,android.R.layout.simple_spinner_item);
   yearDropdown.setAdapter(adapterYear);

   adapterMonth = new ArrayAdapter<CharSequence>(this,android.R.layout.simple_spinner_item);
   monthDropdown.setAdapter(adapterMonth);

   adapterDays = new ArrayAdapter<CharSequence>(this,android.R.layout.simple_spinner_item);
   dayDropdown.setAdapter(adapterDays); 
```

# ruby-on-rails - 无用户认证 (Facebook)

> ID：10777980
> 
> 赞同：2
> 
> 时间：2012-05-27T23:29:00.130
> 
> 标签：ruby-on-rails, facebook, facebook-graph-api, oauth, oauth-2.0

我正在尝试构建一个后端 Rails 应用程序，该应用程序可以访问公共 facebook 页面，并拉下任何新帖子。但当然，我遇到了身份验证问题。

[使用此处](http://developers.facebook.com/tools/explorer)提供的示例访问令牌时，我可以做任何我想做的事情。

```
HTTParty.get("https://graph.facebook.com/#{name}/posts?access_token=#######################################") 
```

但显然这个访问令牌过期了。我没有此应用程序的任何前端组件，因为它不打算由用户管理或访问。我只需要基本权限，因为我只对公共页面感兴趣。

如果此身份验证步骤可以自动化，我很乐意对我的登录信息进行硬编码。

有谁知道我如何在不需要用户单击“批准”按钮的情况下获得基本的 oauth 访问令牌？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T00:00:41.157

您应该尝试客户端凭据 OAuth 流程：http: [//developers.facebook.com/docs/authentication/applications/](http://developers.facebook.com/docs/authentication/applications/)

这允许您传入您的应用程序`client_id`并`client_secret`获取访问令牌。提出这样的请求：

```
https://graph.facebook.com/oauth/access_token?
    client_id=YOUR_APP_ID
   &client_secret=YOUR_APP_SECRET
   &grant_type=client_credentials 
```

在`access_token`响应中返回。然后，您可以使用此访问令牌作为您的应用程序发出请求，而不是代表任何个人用户发出请求。

我不确定它是否能够按照您的意图检索公共页面，但值得一试。

# javascript - 如何将递增的 for 循环变量传递给 node.js 中的函数？

> ID：10777981
> 
> 赞同：0
> 
> 时间：2012-05-27T23:29:02.853
> 
> 标签：javascript, node.js, for-loop

> **可能重复：**
> [如何在请求调用时将值传递给回调函数？](https://stackoverflow.com/questions/5892455/how-to-pass-values-to-a-callback-function-at-the-time-of-the-request-call)

我知道这是一个普遍问题，不仅在 node.js 中。我必须将一个变量从 for 循环传递给我想要生成的函数。这些函数存储在一个数组中，并且必须记住这些变量。

这是我的例子：

```
for(var i = 0; i < administratorIds.length; i ++){
  adminCallbacks[adminCallbacks.length] = function(callback){
    model_user.getById(administratorIds[i], function(user){
      administrators[administrators.length] = {name: user.getName()};
      callback(null, null);
    });
  };
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T00:07:35.050

也许是一个[关闭？](https://developer.mozilla.org/en/JavaScript/Guide/Closures)

```
for(var i = 0; i < administratorIds.length; i ++){
    adminCallbacks.push(
        (function(i){
            return function(callback){
                model_user.getById(
                    administratorIds[i],
                    function(user){
                        administrators[administrators.length] = {name: user.getName()};
                        callback(null, null);
                    }
                );
            };
        })(i)
    );
} 
```

哎呀...看看那个疯狂。无论如何，这部分：

```
(function(i){
    // stuff!
})(i); 
```

在闭包中捕获 i 的当前值，从而确保一旦触发回调，它就不会改变。

一个例子：

```
var i = 10;
var lockedI = (function(i){
    return function(){ console.log('i is --> ' + i); };
})(i);
var unlockedI = function(){ console.log('i is --> ' + i); };

lockedI();
// i is --> 10

unlockedI();
// i is --> 10

var i = 666;

lockedI();
// i is --> 10;

unlockedI();
// i is --> 666 
```

胜利？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T23:57:07.257

您需要为循环的每次迭代创建一个新的变量范围。

唯一的方法是调用一个函数。

```
for(var i = 0; i < administratorIds.length; i++){
  adminCallbacks[adminCallbacks.length] = createHandler(i); // pass i
}

 // receive i as j-----v
function createHandler(j) {
     // return a function...
    return function(callback){
          // ...that uses j-----------------v
        model_user.getById(administratorIds[j], function(user){
          administrators[administrators.length] = {name: user.getName()};
          callback(null, null);
        });
    };
} 
```

# html - 使用 CSS 制作具有边距的统一大小 div 的液体网格

> ID：10777983
> 
> 赞同：2
> 
> 时间：2012-05-27T23:29:19.677
> 
> 标签：html, css, fluid-layout, liquid-layout

你将如何在 CSS 中制作具有统一大小和边距的元素的流动网格？

我遇到的主要问题是利润。我觉得显而易见的解决方案是将宽度和边距设置为百分比并完成它。这不起作用，因为垂直边距是容器宽度的百分比。当容器水平调整大小时，垂直间距关闭。

我试过两种方法。一种带有[百分比边距](http://jsfiddle.net/9jGYK/2/)，[另一种带有 'em' 边距](http://jsfiddle.net/9jGYK/0/)。它们都不能正确缩放。我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T23:58:51.187

你在寻找这样的东西吗？[http://jsfiddle.net/LMJTu/](http://jsfiddle.net/LMJTu/)

在小提琴上，单击按钮以更改外部 div 的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T00:28:51.283

好吧，我找到了解决方案。我将每个按钮包装在一个容器元素中。外部容器非常适合宽度和高度的百分比。然后，内部元素有一个边距以在每个按钮之间添加间距。

[http://jsfiddle.net/9jGYK/4/](http://jsfiddle.net/9jGYK/4/)

边距仍然取决于主体的宽度，但至少按钮的大小是正确的。有没有更优雅的解决方案？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-12T16:07:07.270

是否可以让左右两边没有填充或边距？（所以它们之间的空间应该由宽度决定。

# xml - 这是什么“PCDATA 无效字符值 11”错误？

> ID：10777984
> 
> 赞同：7
> 
> 时间：2012-05-27T23:29:26.507
> 
> 标签：xml, nsxmlparser, evernote, pcdata

我必须使用 XML 文件，但由于此错误显示在我的导航器中，在文件内容之前，我没有得到所有项目。确切的错误是：

> 此页面包含以下错误：
> 
> 第 10 列第 4099 行的错误：PCDATA 无效字符值 11 下面是第一个错误之前的页面呈现。

我应该怎么办 ？感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-25T10:32:06.450

不确定这是否会有所帮助，但如果此错误与 Evernote 有关，那么您可以试试这个。

你可以在 OSX 上找到“原始”的 Evernote 内容：

`/Users/{your_user_name}/Library/Application Support/Evernote/accounts/{your_evernote_account_name}/content/`

在那个文件夹中会有很多名为 p1、p2 等的文件夹。每个文件夹都是它自己的便笺，您可以通过查看 card.png 图像来浏览文件夹以查看该文件夹对应于哪个便笺。

然后，您可以编辑 content.enml 以尝试解决问题。关于 enml 格式的一些信息在这里：[http ://dev.evernote.com/doc/articles/enml.php](http://dev.evernote.com/doc/articles/enml.php)

# ssh - SSH...读取 PCAP 文件以确定 SSH 连接的空闲时间和连接类型

> ID：10777989
> 
> 赞同：0
> 
> 时间：2012-05-27T23:30:55.877
> 
> 标签：ssh, pcap, openssh, network-traffic, traffic-measurement

我正在用 Python 开发一个项目来分析 SSH。

目前我被困在两件事上：

1.  确定连接的空闲时间（没有数据通过连接传输的时间百分比）
2.  确定连接类型（shell、隧道、scp 等）-> 连接内的通道类型

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:47:52.057

在利用特定领域的详细信息时，使用加密流量有时会[泄露大量](http://www.cs.unc.edu/~fabian/papers/foniks-oak11.pdf)信息。值得回顾过去的研究以了解这些方法。特别是对于 SSH，我建议阅读 Dawn Song 关于[从 SSH 会话中推断登录密码](http://users.ece.cmu.edu/~dawnsong/papers/ssh-timing.pdf)的论文。

Another example: [Bro](http://www.bro-ids.org) uses a heuristic discern successful from unsuccessful logins based on the number of bytes transferred at the beginning of the connection.

In general, I recommend recording traces of the activity you want to profile/classify later. This way, you have ground truth and can find out where SSH behaves differently from what you expect.

1.  To determine the idle time of interactive sessions, you need to understand the noise, if any, that SSH injects during periods of no activity. Then you may create a time series of the number of bytes transferred and experiment with the time resolution to see what granularity models best your trace. Moreover, you can decompose the times series into two components, one being SSH protocol noise and one user activity.

2.  这听起来像是一个经典的无监督学习问题：[聚类](http://en.wikipedia.org/wiki/Data_clustering)，例如 k-means 或混合。提出正确的功能集可能需要一些研究。例如，如果隧道连接也是交互式的，那么从隧道中确定交互式会话可能会很困难。在您的模型中，您可以考虑大小增量，甚至包括更多上下文，例如[踏脚石检测](http://www.icir.org/vern/papers/stepping-sec00.pdf)。

# c++ - C++11：返回一个数组

> ID：10777990
> 
> 赞同：1
> 
> 时间：2012-05-27T23:31:00.697
> 
> 标签：c++, collections, stl, c++11, containers

我目前正面临一个使用 STL 容器的有趣情况。我有一个方法应该根据参数返回不同的静态对象数组。所述对象的类型为数组<SomeClass, *_* >。

下划线的原因是它们并非都是相同大小的数组。由于数组包装得非常整齐而且数组的大小没有改变，我希望不要被迫将数组转换为向量，因为现在不仅初始化非常整洁，而且我还发现数组是我想要的确切结构，而可调整大小的结构将是开销和矫枉过正。

我有机会实现我想要的吗？如果没有，有没有比使用向量更清洁的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T23:37:09.167

可以在编译时根据参数计算返回数组的大小吗？如果是这样，那么您可以使用模板为`_`. 例如，如果返回数组与某个参数数组的长度相同，那么您可以执行以下操作：

```
template<int N>
array<SomeClass, N> myFunc(array<Foo, N> someArg); 
```

或者，如果您在调用它的站点上总是知道返回数组的正确大小（在编译时），您可以这样做：

```
template<int N>
array<SomeClass, N> myFunc(); 
```

并将其称为：

```
array<SomeClass, 5> = myFunc<5>(); 
```

如果没有，那么您可能必须使用向量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T00:28:53.290

您始终可以选择编写一个`array_view<T>`可以作为`array<T,N>`任何`N`.

# sql - 当表具有指向自身的链接时的 SQL 查询

> ID：10777996
> 
> 赞同：6
> 
> 时间：2012-05-27T23:32:45.617
> 
> 标签：sql, tsql, recursion, common-table-expression

嗨说我有一张桌子：

```
Person:
PersonId
Name
ManagerId 
```

所以 ManagerId 是对另一个人的引用。

所以数据库中可能有一个人：

```
1
Bob
null

2
Steve
1

3
Tim
2 
```

所以 Bob 是 Steve 的经理，而 Steve 是 Tim 的经理。

所以我想做的是编写一个查询，让 Bob 管理下的所有人。无论是直接的还是间接的。所以我想同时得到史蒂夫和蒂姆。在同一行。

如果我写：

```
select * from Person
where ManagerId = 1 I would get only Steve. 
```

我如何编写它，以便我直接或间接地让每个人都在 Bob 的领导下？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-27T23:52:32.037

您可以使用公用表表达式 (CTE) 来解决此问题。正如 Andrei 指出的那样，CTE 可用于递归（请参阅 Andrei 在他的帖子中包含的出色参考）。假设您有一个如下表：

```
create table Person
(
   PersonId int primary key,
   Name varchar(25),
   ManagerId int foreign Key references Person(PersonId)
) 
```

让我们将以下数据插入到表中：

```
insert into Person (PersonId, Name, ManagerId) values 
    (1,'Bob', null),
    (2, 'Steve',1),
    (3, 'Tim', 2)
    (4, 'John', 3),
    (5, 'James', null),
    (6, 'Joe', 5) 
```

那么我们想要一个查询，该查询将返回直接或间接向 Bob 报告的每个人，即 Steve、Tim 和 John。我们不想返回 James 和 Bob，因为他们没有向任何人报告，或者 Joe，因为他向 James 报告。这可以通过 CTE 查询来完成，如下所示：

```
WITH Managers AS 
( 
     --initialize
     SELECT PersonId, Name, ManagerId  
        FROM Person WHERE ManagerId =1
     UNION ALL 
     --recursion 
     SELECT p.PersonId, p.Name, p.ManagerId 
        FROM Person p INNER JOIN Managers m  
        ON p.ManagerId = m.PersonId 
) 
SELECT * FROM Managers 
```

此查询返回正确的结果：

```
PersonId    Name                      ManagerId
----------- ------------------------- -----------
2           Steve                     1
3           Tim                       2
4           John                      3 
```

**编辑：**假设 OP 使用 SQL Server 2005 或更高版本，此答案是有效的。我不知道这种语法在 MySQL 或 Oracle 中是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T23:48:44.127

如果您使用的是 MS SQL Server 2005 或更高版本，则可以使用 CTE，正如@AndreiDrynov 指出的那样，如下所示：

```
;WITH Emps(PersonId, Name, PersonLevel, ManagerName)
AS
(
    SELECT PersonId, Name, 0 AS PersonLevel, 
           CONVERT(NVARCHAR(50), 'No Manager') AS ManagerName
    FROM Persons
    WHERE ManagerId IS NULL
    Union All
    SELECT p.PersonId, P.Name, e.PersonLevel + 1 , e.Name 
    FROM Persons p 
    INNER JOIN Emps e ON p.ManagerId = e.PersonId 
 ) 
SELECT * 
FROM Emps 
WHERE PersonLevel <= 2 
```

此查询应为您提供以下信息：

```
 PersonId   |   Name  |  Peroson Level   |   Manager
 ------------+---------+------------------+--------------
     1           Bob           0             No Manager
     2          Steve          1                Bob
     3           Tim           2               Steve 
```

你可以在这里看到它的实际效果：

## [演示](https://data.stackexchange.com/stackoverflow/query/71179)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T00:36:14.863

```
select * 
from Person A 
inner join Person B ON B.PersonID = A.ManagerID
where ManagerId = 1 
```

# php - PHP Codeigniter + Sparks + php-activerecord 如何在插入或更新数据之前进行转义

> ID：10777999
> 
> 赞同：0
> 
> 时间：2012-05-27T23:33:14.730
> 
> 标签：php, codeigniter, phpactiverecord

**我是非常新的 php-activerecord。有没有办法在更新或插入记录之前自动转义我的所有帖子/获取数据？**

```
class User extends ActiveRecord\Model {...}

class Blog extends MY_Controller
{
    function test()
    {
        $user = User::find('last');
        $user->first_name = 'test"quot' . "es'zzz";
        $user->save();
    }
}

// inserted data
// first_name = test"quotes'zzz 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T01:26:05.583

看看[查询绑定](http://codeigniter.com/user_guide/database/queries.html)

> 使用绑定的第二个好处是值会自动转义，从而产生更安全的查询。您不必记住手动转义数据；引擎会自动为您完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T21:04:23.620

你遇到什么麻烦了吗？PHP-ActiveRecord 正在使用[PDO 准备好的语句](http://php.net/manual/en/pdo.prepare.php)（[source](https://github.com/kla/php-activerecord/blob/master/lib/Connection.php#L285-315)）。所以你应该不会遇到任何转义问题，如果是这样，请随时在 github 项目页面上打开 n issue：[https ://github.com/kla/php-activerecord](https://github.com/kla/php-activerecord)