# StackOverflow 问答 10086000-10086999

# php - 如何在 XML 文件中添加节点值？

> ID：10086003
> 
> 赞同：2
> 
> 时间：2012-04-10T09:14:56.783
> 
> 标签：php, xml, ajax

```
$domtree = new DOMDocument('1.0', 'UTF-8');

/* create the root element of the xml tree */
$xmlRoot = $domtree->createElement("xml");
/* append it to the document created */
$xmlRoot = $domtree->appendChild($xmlRoot);
//create the  root Envelope
$currentTrack = $domtree->createElement("Envelope");

$currentTrack = $xmlRoot->appendChild($currentTrack);
/* you should enclose the following two lines in a cicle */
//create the first child node
$c=  $currentTrack->appendChild($domtree->createElement('Header'));
$c->appendChild($domtree->createElement('AccountId','04af6cbcfb9f3038281b06389803d577')); 
```

在这里，我将“version=2.1”添加到标题中。我该如何添加？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T12:39:54.013

试试这个 setAttribute() 像这样：

```
 $domtree = new DOMDocument('1.0', 'UTF-8');

    /* create the root element of the xml tree */
    $xmlRoot = $domtree->createElement("xml");
    /* append it to the document created */
    $xmlRoot = $domtree->appendChild($xmlRoot);
    //create the  root Envelope
    $currentTrack = $domtree->createElement("Envelope");

    $currentTrack = $xmlRoot->appendChild($currentTrack);
    /* you should enclose the following two lines in a cicle */
    //create the first child node
    $header = $domtree->createElement('Header');
    $header->setAttribute('version', '2.1');
    $c = $currentTrack->appendChild($header);
    $c->appendChild($domtree->createElement('AccountId', '04af6cbcfb9f3038281b06389803d577'));

    $domtree->save('x.xml'); 
```

# html - CSS：3 列高 100%

> ID：10086007
> 
> 赞同：1
> 
> 时间：2012-04-10T09:15:22.340
> 
> 标签：html, fluid-layout, css

这是一个示例页面：

[http://jsfiddle.net/SkeLLLa/pwfH2/](http://jsfiddle.net/SkeLLLa/pwfH2/)

我想为`content`类设置 100% 的高度（请参阅 CSS 源代码中的“这里的问题”注释），但是当我这样做时，左右列（嵌套在`content`div 中）变为`0px`高度。但是，当`content`以像素为单位设置高度时，它可以正常工作。

有没有没有 JavaScript 的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T23:48:21.597

用于`display: inline-block`列和 `height:100%`and`html`标记`body`：

```
 <!doctype html>
    <html>
      <head>
      <style>
      html, body, #content, #left, #right, #center { height: 100%; }
      #content { width: 100%; }
      #left, #center, #right { display:inline-block; }
      #left, #center, #right { width: 32%; border: 1px solid red; }

      /* media query for IE 6-7 */
      @media, 
        { 
        #left, #center, #right { display:inline; }
        }
      </style>
      </head>
      <body>
        <div id="content">
            <div id="left">foo</div>
            <div id="center">bar</div>
            <div id="right">baz</div>
        </div>
      </body>
    </html>
```

# php - 如何制作动态面包屑 CakePHP？

> ID：10086009
> 
> 赞同：1
> 
> 时间：2012-04-10T09:15:23.737
> 
> 标签：php, cakephp

如何制作动态的面包屑 CakePHP？例如，我有一个 url [http://site.com/post/first/add](http://site.com/post/first/add) 到面包屑自动生成在这样的 Layouts Home > post > first > add

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:21:01.290

使用 HTML 助手：

```
echo $this->Html->getCrumbs(' > ','Home'); 
```

其他示例：

```
$this->Html->addCrumb('Users', '/users');
$this->Html->addCrumb('Add User', '/users/add'); 
```

更多信息：[http ://book.cakephp.org/1.3/view/1653/Creating-breadcrumb-trails-with-HtmlHelper](http://book.cakephp.org/1.3/view/1653/Creating-breadcrumb-trails-with-HtmlHelper)

问候！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T10:52:52.263

试试这个链接。它会解决你的问题 [http://www.codetweet.com/php-2/breadcrumb-helper-class-in-cakephp/](http://www.codetweet.com/php-2/breadcrumb-helper-class-in-cakephp/)

# slickgrid - slickgrid：行中的可见性字段

> ID：10086012
> 
> 赞同：0
> 
> 时间：2012-04-10T09:15:32.747
> 
> 标签：slickgrid

是否可以在我的数据数组中包含每个项目的可见性状态的字段并使 slickgrid 仅绘制可见性字段为 true 的行？

我有一个大数据集，需要从我的数组中删除几个项目，删除操作很慢，但如果我可以将这些项目标记为不可见，而不是删除，我认为它会加快速度。我已经在使用过滤器，所以我不能使用过滤器来隐藏项目......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T19:15:51.010

如果您使用 DataView，只需创建一个过滤器来检查“isDeleted”属性并在 DataView 中指定它。

# visual-studio-2010 - 什么是 MSVC -L 等价物？

> ID：10086013
> 
> 赞同：1
> 
> 时间：2012-04-10T09:15:37.267
> 
> 标签：visual-studio-2010, command-line

我正在尝试使用 UNIX makefile 编译一个库，但使用的是 Visual Studio 2010。我修改了 makefile，所以它应该可以工作，但是链接器有问题。我的编译器选项很简单：

```
CSWITCHES = -O2 -I$(INC_DIR) -L$(LIB_DIR) 
```

（INC_DIR 和 LIB_DIR 指向 VC 的 include 和 lib 目录）。

我没有包含问题，所以我假设 -I 没问题，但是 -L 选项被编译器忽略：

```
ignoring unknown option -Lblahblah 
```

我检查了 msdn 站点[http://msdn.microsoft.com/en-us/library/y0zzbyt4(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/y0zzbyt4(v=vs.80).aspx)链接器选项，我尝试使用 LIBPATH 选项，但我也不起作用。

所以这是我的问题：指定链接器的库目录路径的 msvc 命令行选项是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-03-04T00:30:05.147

[重复](https://stackoverflow.com/questions/12124739/visual-c-library-directories-command-line-equivalent)。

您应该在“/link”之后提供 /LIBPATH 作为链接器选项。确保系统路径中有 cl.exe。这是我用于编译的 bat 文件：

```
call "D:\Program Files (x86)\Microsoft Visual Studio 14.0\VC\vcvarsall.bat" x86

cl %CompilerFlags% ..\src\main.cpp /I %IncludePaths% /link %LinkerFlags% /LIBPATH:%LibraryPaths% 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T10:16:30.260

MSVC 没有等效的 -L 选项，路径直接提供给`LINK`. 至于标准库搜索路径，它是正确设置的`vcvar32.bat`（参见[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/f2ccy3wt%28v=vs.100%29.aspx)）

# c - 使用 tolower() 将 char* 字符串转换为小写会导致 SIGSEGV - 有什么问题？

> ID：10086021
> 
> 赞同：0
> 
> 时间：2012-04-10T09:16:00.993
> 
> 标签：c, java-native-interface, segmentation-fault

我在一个遗留项目中发现了以下代码，这似乎会造成一些麻烦：

```
for( ; *str; ++str )
    *str = tolower(*str); 
```

问题是，我们得到了一个 SIGSEGV，此时 tolower() 的结果应该写回 *str 。这是我使用 printf() 调试和 stracktrace 产生的结果，因为我们在这里使用 JNI，因此将调试器附加到 C 库对我们不起作用。

如果在 linux 上使用 gcc 编译，代码会失败。在 Windows 上运行相同的东西（CMake 用于此跨平台设置）工作正常。

我在哪里可以找到这种情况的原因？任何提示表示赞赏:)

谢谢 - 马库斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:29:04.067

字符串文字是不可修改的：

```
char blop[] = "modifiable string";
char *bla = "non-modifiable string";

*blop = tolower(*blop); // OK
*bla = tolower(*bla);   // not OK, modifying a string literal 
```

# c# - 使用 VS 设计器时不需要的表单修改

> ID：10086022
> 
> 赞同：1
> 
> 时间：2012-04-10T09:16:06.137
> 
> 标签：c#, winforms, visual-studio-2010

我在 VS2010 中的表单设计器有一些问题。

每次我打开这个项目时，VS 都会修改某些表单值，特别是与拆分器距离有关。如果我通过 Pending Changes 选项卡撤消更改，它会重新加载，然后立即再次进行修改！

出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:28:27.960

SplitterDistance 属性设置器会根据面板的 MinSize 属性覆盖您给它的值。这将在设计时和运行时发生。根据需要调整 Panel1 和 Panel2 MinSize 属性。

您还需要注意的是表单的 InitializeComponents() 方法中的 AutoScaleDimensions 分配，该方法写入表单的 Designer.cs 文件中。将其与您从头开始创建新项目时看到的值进行比较。如果不匹配，则该表单最初是在具有不同视频适配器 DPI 设置的机器上设计的。表单的 AutoScaleMode 会在设计时和运行时尝试对此进行更正。这可能会产生很多副作用，包括 SplitterDistance 属性设置器行为。

# php - facebook like 按钮的功能

> ID：10086025
> 
> 赞同：0
> 
> 时间：2012-04-10T09:16:10.653
> 
> 标签：php, mysql, facebook, button, facebook-like

我想要在我的网页中使用 php 制作的类似 facebook 的按钮及其功能。我已经成功地做到了。现在我的问题是，如何将数据存储到已单击“赞”按钮的注册 facebook 用户的数据库（mysql）中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:26:45.203

您可以使用回调函数，如

```
FB.Event.subscribe 
```

例如，假设您想在单击按钮时在数据库中记录 Likes：

```
FB.Event.subscribe('edge.create',
function(response) {
    alert('You liked the URL: ' + response);
} 
```

);

有关详细信息，请参阅[http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/](http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:18:41.680

数据将存储在 Facebook 服务器上。您的网站不需要关心存储它们。

# python - 元素子元素的标签

> ID：10086026
> 
> 赞同：0
> 
> 时间：2012-04-10T09:16:26.180
> 
> 标签：python, xml.etree

下面的代码（或者更确切地说，非常类似的代码）整天都在我脑海中。我没主意了。

```
import xml.etree.ElementTree as etree

parent = etree.Element(etree.QName('http://www.example.com', tag='parent'))
child_a = etree.Element(etree.QName('http://www.example.com', tag='child'))
child_a.text='Bill'
parent.append(child_a)
child_b = etree.Element(etree.QName('http://www.example.com', tag='child'))
child_b.text='Barry'
parent.append(child_b)
print(etree.tostring(parent))

Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "Lib\xml\etree\ElementTree.py", line 1120, in tostring
  File "Lib\xml\etree\ElementTree.py", line 812, in write
  File "Lib\xml\etree\ElementTree.py", line 880, in namespaces
  File "Lib\xml\etree\ElementTree.py", line 1046, in _raise_serialization_error
TypeError: cannot serialize <xml.etree.ElementTree.QName object at 0x0000000222B2198> (type QName) 
```

如果两个孩子具有相同的限定名称，则不允许我将两个孩子添加到一个元素中。有没有办法解决这个问题（使用etree，因为在明天之前换掉我的xml编写器为时已晚）？

# javascript - 钛：Android上拆分窗口的后备

> ID：10086035
> 
> 赞同：0
> 
> 时间：2012-04-10T09:16:56.177
> 
> 标签：javascript, mobile, titanium, titanium-mobile

我开发了一个使用拆分窗口的 iPad 应用程序。我希望它也能在 android 设计上运行。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-25T07:24:45.727

这可以实现，但您需要通过使用两个视图/窗口来“伪造”SplitWindow 功能，因为原生 Android SDK 不支持 splitWindow。

您还可以使用滑动窗口，有一些开源项目可能会有所帮助：

[Andorid 的滑块菜单小部件](http://www.danielsefton.com/2013/05/slider-menu-widget-v2-for-titanium-alloy/)

# node.js - 没有模板引擎的 Node.js

> ID：10086045
> 
> 赞同：4
> 
> 时间：2012-04-10T09:18:00.633
> 
> 标签：node.js, mongodb, express, template-engine

我是 Node.js 的新手，正在努力学习。据我了解，使用模板引擎（例如 Jade）是很常见的，即使对于 CSS（例如 Stylus）也是如此。老实说，我看到的所有教程在布局方面都涉及模板引擎。

问题是我不想使用模板引擎，因为我认为它不必要地复杂。

[这](https://github.com/addyosmani/backbone-boilerplates)是 Node 样板的链接（不幸的是，由于某种原因它不起作用），但选项 1 不应使用任何模板引擎进行布局。

那么，将 Node.js 和 Mongodb 与“普通”HTML（5）结合起来的最简单方法是什么？例如，是否可以将 HMTL5 样板与 Node 一起使用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T09:33:35.573

如果您使用的是静态 html，那么您不需要在服务器端进行模板化。[您可以使用Express/Connect 静态中间件](http://expressjs.com/guide.html#middleware)轻松提供 html 文件，例如：

```
app.use(express.static(__dirname + '/public')); 
```

然后放入`index.html`您的公用文件夹。

另外我认为您可以将整个 h5bp 复制并粘贴到您的公用文件夹中，它应该可以工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T21:09:42.373

以下是我对此的看法。

如果您只提供**静态**html，很明显您不需要任何模板引擎，因为您可以在响应中缓冲 html，或者使用[Connect](http://www.senchalabs.org/connect/)静态中间件。

但是，当您必须处理**动态**内容时，事情会变得有趣。

这是模板引擎擅长的地方，因为它们提供了将数据与 html 集成的方法。如果要替换模板引擎，则需要一个可以进行 HTML 和 DOM 操作的库。我可以想到两种选择：

*   [jsdom](https://github.com/tmpvar/jsdom)以及基于它构建的库（例如[fill.js](https://github.com/profit-strategies/fill)）。
    使用 jsdom，您可以使用服务器端 jQuery 来构建您的视图，甚至是[YUI](http://yuilibrary.com/projects/nodejs-yui3/)。
    但是它有一些缺点：
    *   又慢又麻烦
    *   在 Windows 上安装很痛苦，因为它依赖于本机模块
    *   我无法让它解析 html 片段或不完整的 html（也许有人知道解决这个问题的方法）

*   第二种选择是使用一些处理 html 的轻量级库，而不需要完整的 DOM。到目前为止，我已经找到了两个擅长于此的库：
    *   [Cheerio](https://github.com/MatthewMueller/cheerio) - 一个依赖于类 jQuery 选择器的小型库
    *   [板](https://github.com/flatiron/plates)- 将数据绑定到标记的库

在我看来，两者都非常简洁，并且是摆脱模板的一个很好的起点:)
可能还有其他我不知道的，但你明白了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-10T09:36:26.860

使用 express，您只需在响应中发送 html5：

```
app.get('/', function(req, res){
  res.send('<header>Hello World</header>');
}); 
```

但是，我会说在大多数情况下模板引擎不会增加复杂性。如果您正在渲染动态内容，关注点分离会使事情变得更简单。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-10T10:25:50.690

第一次回答我自己的问题。我只是想分享一下我找到了一个从 html 到 jam（模板引擎）的转换器。这绝对是一件好事，至少对我来说消除了很多复杂性，即使它仍然涉及模板引擎。

[http://html2jade.aaron-powell.com/](http://html2jade.aaron-powell.com/)

# iphone - JSON 响应 iPhone 应用程序的非空验证

> ID：10086046
> 
> 赞同：4
> 
> 时间：2012-04-10T09:18:15.160
> 
> 标签：iphone, objective-c, json, web-services

目前我正在使用以下方法来验证数据是否为 ​​Null。

```
if ([[response objectForKey:@"field"] class] != [NSNull class])
    NSString *temp = [response objectForKey:@"field"];
else
    NSString *temp = @""; 
```

当响应字典包含数百个属性（和相应的值）时，问题就来了。我需要将这种条件添加到字典的每个元素中。

还有其他方法可以完成吗？

对 Web 服务进行任何更改的任何建议（除了不将空值插入数据库）？

任何想法，任何人？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T05:48:51.263

我所做的是在 NSDictionary 上放置一个类别

```
@interface NSDictionary (CategoryName)

/**
 * Returns the object for the given key, if it is in the dictionary, else nil.
 * This is useful when using SBJSON, as that will return [NSNull null] if the value was 'null' in the parsed JSON.
 * @param The key to use
 * @return The object or, if the object was not set in the dictionary or was NSNull, nil
 */
- (id)objectOrNilForKey:(id)aKey;

@end

@implementation NSDictionary (CategoryName)

- (id)objectOrNilForKey:(id)aKey {
    id object = [self objectForKey:aKey];
    return [object isEqual:[NSNull null]] ? nil : object;
}

@end 
```

然后你可以使用

`[response objectOrNilForKey:@"field"];`

如果您愿意，可以修改它以返回一个空白字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:34:26.790

首先是一个小问题：你的测试不是惯用的，你应该使用

```
if (![[response objectForKey:@"field"] isEqual: [NSNull null]]) 
```

如果您希望字典中所有值为 的`[NSNull null]`键都重置为空字符串，最简单的修复方法是

```
for (id key in [response allKeysForObject: [NSNull null]])
{
    [response setObject: @"" forKey: key];
} 
```

以上假设`response`是一个可变字典。

但是，我认为您确实需要审查您的设计。如果数据库中不允许使用值，则根本不应该允许`[NSNull null]`它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T09:35:42.950

我不太清楚你需要什么，但是：

如果您需要检查 key 的值是否不为 NULL，您可以这样做：

```
for(NSString* key in dict) {
   if( ![dict valueForKey: key] ) {
       [dict setValue: @"" forKey: key];
   }
} 
```

如果您有一些必需的键，您可以创建静态数组，然后执行以下操作：

```
static NSArray* req_keys = [[NSArray alloc] initWithObjects: @"k1", @"k2", @"k3", @"k4", nil]; 
```

然后在您检查数据的方法中：

```
NSMutableSet* s = [NSMutableSet setWithArray: req_keys];

NSSet* s2 = [NSSet setWithArray: [d allKeys]];

[s minusSet: s2];
if( s.count ) {
    NSString* err_str = @"Error. These fields are empty: ";
    for(NSString* field in s) {
        err_str = [err_str stringByAppendingFormat: @"%@ ", field];
    }
    NSLog(@"%@", err_str);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-30T12:57:03.797

```
static inline NSDictionary* DictionaryRemovingNulls(NSDictionary *aDictionary) {

  NSMutableDictionary *returnValue = [[NSMutableDictionary alloc] initWithDictionary:aDictionary];
  for (id key in [aDictionary allKeysForObject: [NSNull null]]) {
    [returnValue setObject: @"" forKey: key];
  }
  return returnValue;
}

response = DictionaryRemovingNulls(response); 
```

# openerp - OpenErp 和 Dynamics Ax：如何可编程和定制 OpenErp？

> ID：10086047
> 
> 赞同：2
> 
> 时间：2012-04-10T09:18:20.070
> 
> 标签：openerp, axapta

我正在尝试比较 OpenERP 和 Dynamics AX。有谁可以告诉我编程 OpenErp 和 Dynamics AX 时的区别？例如，我知道 Dynamics AX 中存在一个自定义层，并且所有对象都是分层的和可编程的（和可自定义的）。OpenERP 中是否存在这种类型的概念？我可以以模块化的方式对其进行个性化吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T17:01:14.943

I've never used Dynamics AX, so I can't compare them. I have written several custom modules for OpenERP, and their extension model works reasonably well. It's a bit unusual, so it takes a while to learn. They just released a description of their [plans for version 7](http://www.openerp.com/node/1107), and it sounds like the inheritance model will become much more standard.

If you want to learn more, look at the developer book's [chapter on developing modules](http://doc.openerp.com/v6.1/developer/03_modules_1.html). Particularly important concepts are [object inheritance](http://doc.openerp.com/v6.1/developer/03_modules_2.html#object-inheritance-inherit) and [inheritance in views](http://doc.openerp.com/v6.1/developer/03_modules_3.html#inheritance-in-views).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T11:13:25.827

是的，是的：来自（标准）模块的任何 OpenERP 对象都可以在另一个特定/本地模块中扩展和定制。

这包括：

*   自定义字段定义（添加/隐藏/重新定义）
*   自定义视图和表单
*   自定义工作流程
*   ...

# php - PHP ODBC 连接返回正确的值类型

> ID：10086049
> 
> 赞同：0
> 
> 时间：2012-04-10T09:18:31.070
> 
> 标签：php, json, odbc, sqldatatypes

我想从包含两列的数据库 (MyTable) 返回一个 JSON 对象 - ID (int) 和 Name (string)。

下面的脚本生成一个 JSON，如：

```
[{"ID":"0","Name":"John"},{"ID":"1","Name":"Doe"}] 
```

您可以看到，ID 作为字符串返回。如何以将 ID 作为整数返回的方式完成它：

```
[{"ID":0,"Name":"John"},{"ID":1,"Name":"Doe"}] 
```

我不想从 ODBC 读取和解析结果数组，因为我想使用通用查询，例如：

```
SELECT * FROM TableXXX 
```

这是我的脚本：

```
 //connection
    $connstr = "Driver={SQL Server Native Client 10.0};Server=" . $this->server . ";Database=" . $this->database . ";"; 
    $conn=odbc_connect($connstr, $this->user, $this->password);
    if (!$conn) {exit("Connection Failed: " . $conn);}

    //execute sql
    $rs=odbc_exec($conn,"SELECT ID, Name FROM MyTable");
    if (!$rs) {exit("Error in SQL");}
    //retreive data into array
    $data = array();
    $i=0;
    while( $row = odbc_fetch_array($rs) ) {
        $data[$i] = $row;
        $i++;
    } 
    odbc_close($conn);
    //output as json string
    echo json_encode($data); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T06:55:18.283

一般来说，ODBC 中没有通用的数据类型。它将取决于各个 ODBC 驱动程序（如果支持，可能与每个供应商不同）。我在 ODBC 规范中没有看到任何描述“通用”数据类型名称的内容。大多数对 ODBC 的调用都通过 ODBC 驱动程序管理器进行，但我不知道它会对通过它传递的 SQL 语句执行转换/修改的任何情况。

这意味着，ODBC 驱动程序不会返回数据类型。如果要返回包含字符串以外的 JSON 对象，则必须逐列单独映射数据。您可以通过 odbc_field_type 函数检索字段的数据类型。

但是，您必须知道每个数据库供应商返回不同的字段名称（例如 varchar、nvarchar、....）。

然后使用类似的东西（只是以相反的顺序）：

```
$type_map = array(
'varchar' => 'string',
'char' => 'string',
'text' => 'string',
);

$column_type = 'text'; // get from DB query
$my_var = 'some string';
$var_type = gettype($my_var);

if(array_key_exists($column_type, $type_map) and
   $type_map[$column_type] == $var_type) {
   //proceed with insert of record
} 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-31T16:57:00.843

**每个**ODBC 驱动程序都必须支持 ODBC 核心数据类型（在下面 URL 的表 19.6 中列出）。表 19.6 中的数据类型对所有 ODBC 兼容的驱动程序都是通用的。

[SQL 编程](http://docs.raima.com/rdms/8_3/Content/RM/Chapter19-2.htm)

# java - 比较java中的时间

> ID：10086053
> 
> 赞同：4
> 
> 时间：2012-04-10T09:18:47.130
> 
> 标签：java, time, date-format, hour

首先原谅我的英语:-(

我在 java 上的时间有问题。让我们通过一个例子来看看：

```
DateFormat datos = new SimpleDateFormat ("hh:mm:ss");
        Date ac, lim;
        String actual,limit;
        actual="18:01:23";
        limit="00:16:23";

        ac=datos.parse(actual);
        lim=datos.parse(limit);

        if(ac.compareTo(lim)==-1){....... 
```

我需要解决这种情况，其中限制在午夜之后，实际时间在午夜之前。我的程序说实际已经达到限制，这是不正确的，因为在示例中，它还有 6 个小时才能完成。

我试图用 DateFormat 类解决它，但它没有看到这种情况。我也用 Time 类尝试过，但它的方法已被弃用。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-10T09:21:28.900

使用`HH`而不是`hh`在你的`SimpleDateFormat`：

```
DateFormat datos = new SimpleDateFormat("HH:mm:ss"); 
```

`hh`是 12 小时制（小时从 1 到 12）。

`HH`是 24 小时制（小时从 0 到 23）。

但除此之外，还有其他问题。类`Date`不是很适合只包含一个时间。如果这样做，它将被解析为 01-01-1970 和指定的时间。所以 18:01:23 变成 01-01-1970, 18:01:23 和 00:16:23 变成 01-01-1970, 00:16:23。您可能想将 18:01:23 与第二天的 00:16:23 进行比较。

尝试这样的事情：

```
String actual = "18:01:23";
String limit = "00:16:23";

String[] parts = actual.split(":");
Calendar cal1 = Calendar.getInstance();
cal1.set(Calendar.HOUR_OF_DAY, Integer.parseInt(parts[0]));
cal1.set(Calendar.MINUTE, Integer.parseInt(parts[1]));
cal1.set(Calendar.SECOND, Integer.parseInt(parts[2]));

parts = limit.split(":");
Calendar cal2 = Calendar.getInstance();
cal2.set(Calendar.HOUR_OF_DAY, Integer.parseInt(parts[0]));
cal2.set(Calendar.MINUTE, Integer.parseInt(parts[1]));
cal2.set(Calendar.SECOND, Integer.parseInt(parts[2]));

// Add 1 day because you mean 00:16:23 the next day
cal2.add(Calendar.DATE, 1);

if (cal1.before(cal2)) {
    System.out.println("Not yet at the limit");
} 
```

[Joda Time](http://joda-time.sourceforge.net/)库是一个流行的 Java 日期和时间库，它比标准的 Java 日期和日历 API 设计得更好；如果您必须在 Java 中处理日期和时间，请考虑使用它。

使用 Joda Time，您可以这样做：

```
String actual = "18:01:23";
String limit = "00:16:23";

DateTimeFormatter df = DateTimeFormat.forPattern("HH:mm:ss");

DateTime ac = df.parseLocalTime(actual).toDateTimeToday();
DateTime lim = df.parseLocalTime(limit).toDateTimeToday().plusDays(1);

if (ac.isBefore(lim)) {
    System.out.println("Not yet at the limit");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T10:01:56.993

作为一个快速而肮脏的解决方案：

```
 final DateFormat datos = new SimpleDateFormat("HH:mm:ss");
    Date ac;
    final Date lim = new Date();
    String actual, limit;
    actual = "18:01:23";
    limit = "00:16:23";

    try {
        ac = datos.parse(actual);
        lim.setTime(ac.getTime() + TimeUnit.MINUTES.toMillis(16) + TimeUnit.SECONDS.toMillis(23));
        if ( ac.before(lim) ) {
            // TODO
        }
    } catch ( final ParseException e ) {
        e.printStackTrace();
    } 
```

# flash - Flash 流无法在 Firefox 中播放

> ID：10086061
> 
> 赞同：0
> 
> 时间：2012-04-10T09:19:09.840
> 
> 标签：flash

我的公司正在支持 www.poetryarchive.org。诗歌播放器停止在 Firefox 中对最新的 Adob​​e Flash 播放器 (11.2.202.228) 做出反应。按钮仍然可以点击。但是音频/视频都死了。我已经在 Chrome 中尝试过了。它在那里似乎工作得很好。在分享他/她的想法和解决方案之前，任何人都可以遇到这个问题吗？

提前致谢。

干杯，泽因

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:29:43.153

好日子泽音，

我用 Firefox 查看了您的网站，升级到最新的播放器后一切似乎都运行良好（flash player 10）我在 Firefox 中遇到了同样的问题，但是在 chrome 中它再次运行良好。

在检查了您的源代码后，我看到了一个 Javascript，它检查了问题所在的 flash 版本，因为如果我杀死 Javascript，它使用最新的 flash 播放器在 Firefox 中工作，所以这给我们留下了 2 种可能性：

*   让 Javascript 检查 Flash 播放器是否为 11.2.202.228 给出一个错误，指出它尚不支持（脏）

*   更正 Javascript 以使其与最新版本兼容。

我希望你能从这里进一步工作。

问候，丹尼斯

# sql - SQL 查询 - 同一字段上的多个联接

> ID：10086062
> 
> 赞同：0
> 
> 时间：2012-04-10T09:19:12.620
> 
> 标签：sql, join, foreign-keys

我需要帮助构建此查询，我需要从同一个表中选择不同的值但不同的唯一键。

为了详细说明，请提供以下示例：

我有 2 张桌子：

> 问题（IssueID、AuthorID_FK、AssigedID_FK、...）
> 用户（UserID、User_Label、...）

**AuthorID_FK**和AssigedID_FK**都**链接到表**用户**，我需要在相同的查询结果中获取两者的**User_Label**。

你能帮忙吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:23:05.313

```
SELECT a.IssueID, b.User_Label, c.User_Label FROM Issues a
INNER JOIN USERS b on a.AuthorID_FK = b.UserID
INNER JOIN USERS c on a.AssignedID_FK = c.UserID 
```

类似的东西 :) 这应该在 MS SQL Server 中工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:24:27.183

好吧，这个也应该工作:)

```
SELECT IssueID, U.User_Label FROM Issues I
INNER JOIN Users U ON U.UserID = I.AuthorID_FK

UNION

SELECT IssueID, U.User_Label FROM Issues I
INNER JOIN Users U ON U.UserID = I.AssigedID_FK 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T09:24:48.313

惯于

```
SELECT a.IssueID, b.UserID 
FROM Issues a 
    JOIN Users b ON (a.AuthorID_FK=b.UserID OR a.AssignedID_FK = b.UserID) 
```

工作？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T09:27:18.790

您可能想尝试这样的事情

```
SELECT
    issues.IssueID,
    Authour.User_Label AS Author_Label,
    Assigned.User_Label AS Assigned_user_Label
FROM
    issues
    INNER JOIN users AS Authour ON Authour.UserID = issues.AuthorID_FK
    INNER JOIN users AS Assigned ON Assigned.UserID = issues.AssignedID_FK 
```

# error-handling - 触发 websocket 错误事件

> ID：10086063
> 
> 赞同：0
> 
> 时间：2012-04-10T09:19:23.473
> 
> 标签：error-handling, websocket

我正在测试 websocket 并试图找到在客户端触发错误事件的场景。协议说

> 如果要求用户代理使 websocket 连接失败或 WebSocket 连接因偏见而关闭，则在 WebSocket 对象上触发一个名为 error 的简单事件。

但是使用这个逻辑，我尝试连接到不支持 websocket 的服务器。我看到浏览器实际上正在触发“关闭”事件，但没有触发“错误”事件。

问：上述场景是否应该触发错误事件？另外，我可以在客户端触发错误事件的其他场景是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:49:16.280

并非所有浏览器都完全遵循 WebSockets 规范。所以每个实现都有自己的差异。例如，Chrome 不会在连接问题上引发 onerror 事件。但是，只要端点断开连接（与代码断开连接，刚刚关闭服务器，甚至无法连接），FireFox 都会抛出 onerror。

所以你现在不能真正指望这个事件实现的稳定性。根据我的经验，我现在看到 onerror 事件非常特定于浏览器，并且只有一些共同的逻辑场景。

# python - 使用 pystache 渲染一个大文件

> ID：10086064
> 
> 赞同：2
> 
> 时间：2012-04-10T09:19:29.470
> 
> 标签：python, mustache

这是我通常用来渲染文件的方法`pystache`：

```
txt = open(filename, 'r').read()
print pystache.render(txt, context).encode('utf-8') 
```

（“上下文”是我的映射）

但现在我必须渲染非常大的模板。有没有建议的方法来做到这一点，而无需将整个模板读入内存？pystache 对此有内部支持吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T14:20:10.757

在撰写本文时，github 页面上有一个关于此的[问题。](https://github.com/defunkt/pystache/issues/108)一旦我有时间遵循这个，我会的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T23:06:04.973

Pystache 没有对模板流的内置支持，但它是开源的，因此如果此功能是您的用例的优先事项，我建议您分叉[源](https://github.com/defunkt/pystache)并自己实现它。老实说，我认为修改源代码以选择性地接收模板生成器会很容易，该生成器将返回文本行，而不是接收完整的模板文本。

*** 最简单的解决方案可能是将您的大模板分解为多个子模板并通过部分引用它们。***

您可能对通过 mustache.js 允许[mustache.js的块进行模板渲染感兴趣](https://github.com/janl/mustache.js)

# java - 如何解析带前缀的 XML？

> ID：10086066
> 
> 赞同：1
> 
> 时间：2012-04-10T09:19:34.643
> 
> 标签：java, xml-parsing

我有一些看起来像这样的 XML：

```
<object-stream>
  <manhattan:state id="1" turn="0" start="red" current="red" type="select">
    <red id="2" displayName="Spieler 1" points="0">
      <segment id="3" size="1" usable="0" retained="11"/>
      <segment id="4" size="2" usable="0" retained="6"/>
      <segment id="5" size="3" usable="0" retained="4"/>
      <segment id="6" size="4" usable="0" retained="3"/>
      <card id="7" slot="0"/>
      <card id="8" slot="2"/>
      <card id="9" slot="3"/>
      <card id="10" slot="3"/>
    </red>
    <blue id="11" displayName="Spieler 2" points="0">
      <segment id="12" size="1" usable="0" retained="11"/>
      <segment id="13" size="2" usable="0" retained="6"/>
      <segment id="14" size="3" usable="0" retained="4"/>
      <segment id="15" size="4" usable="0" retained="3"/>
      <card id="16" slot="3"/>
      <card id="17" slot="4"/>
      <card id="18" slot="4"/>
      <card id="19" slot="4"/>
    </blue>
  </manhattan:state>
  [...]
</object-stream> 
```

我想要一个简单的 DOM 表示，但是当我尝试用 a 解析它时`org.jdom.input.SAXBuilder`，它失败了：

```
Exception in thread "main" org.jdom.input.JDOMParseException: Error on line 2:
The prefix "manhattan" for element "manhattan:state" is not bound.
    at org.jdom.input.SAXBuilder.build(SAXBuilder.java:533)
        [...] 
```

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:31:19.527

创建 时`SAXBuilder`，使用`new SAXBuilder(false)`禁用验证。

将`http://xml.org/sax/features/namespaces`属性设置为 false 以禁用命名空间替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T09:21:45.880

您的输入 XML 格式正确，但不是有效的 XML 文档。因此，首先您需要使其成为解析器正确解析的有效文档。看看您是否可以获得文档流并创建一个没有命名空间或前缀的新文档，并且您的解析应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-30T05:46:37.490

要消除错误，请使用`xmlns`父标签`object-stream`。

```
<object-stream xmlns:manhattan="http://....something"> 
```

# eclipse - 如何在eclipse中获取bin文件夹

> ID：10086069
> 
> 赞同：0
> 
> 时间：2012-04-10T09:20:03.537
> 
> 标签：eclipse, dll, bin

我正在寻找 Eclipse 中的 bin 文件夹，但我找不到它。我尝试了以下帖子，但没有成功。请问有人可以帮我吗？

[我该怎么做才能在 Eclipse 上显示 bin 文件夹？](https://stackoverflow.com/questions/4163923/what-can-i-do-to-make-display-the-bin-folder-on-eclipse)

我寻找 bin 文件夹的原因是，我想在其中放置一些 .dll 文件。是否有另一种合并 .dll 文件的方法？任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:28:30.790

您不应将任何数据放在 bin 目录中。如果您执行`Project`-> ，它将被删除`Clean`。相反，您应该将库放在一个`lib`文件夹中。我不知道你实际上是如何使用你的 dll 的，但你肯定可以指向另一个目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:46:31.557

如果您尝试仅出于开发目的包含此 dll，则可以使用 LD_LIBRARY_PATH 并包含您的 dll 的路径。我过去用 eclipse 做过这个。CDT eclipse 项目中有一个位置可以包含它。

如果您正在谈论需要 dll 的 java 应用程序，您可以在项目中添加库，也可以像这样[http://www.dreamincode.net/forums/topic/96304-how-to-add-dll-files- in-javalibrarypath/](http://www.dreamincode.net/forums/topic/96304-how-to-add-dll-files-in-javalibrarypath/)，但我从来没有做过。

# android - Android 和众包

> ID：10086071
> 
> 赞同：1
> 
> 时间：2012-04-10T09:20:04.580
> 
> 标签：android

我正在考虑在 Indie GoGo（Kickstarter 的全球变体）上放置一个开发一半的应用程序创意，但我正在考虑如何处理交付。

我需要确保合适的人可以获得他们承诺的应用程序，你知道是否有办法将某些用户绑定到应用程序，以便只有他们可以下载它？我正在考虑使用他们 Google 帐户的电子邮件，因为他们无论如何都需要一个。

然后，一旦完成，我会以更高的价格向其他人公开上传相同的应用程序。如果不支持这种方式，你知道其他人是如何解决这个问题的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T08:49:31.733

我想这将很难做到。但我有一些想法可以使用：

1.  首先，如果您有订阅者的电子邮件，那么您可以直接向他们发送您的应用程序。
2.  如果您想将您的应用程序放在 Google Play 上，那就更难了。我希望可以使用以下方法。您可以为您的应用程序创建一个存根。运行期间的存根将检查用户是否拥有某些购买的物品。如果他拥有那么您只需启动您的应用程序（在您的应用程序内部您还可以放置这种类型的检查以更难以破解您的应用程序）。如果用户没有此商品，您建议他购买。在此期间，您检查用户是否在您的列表中。如果他是，那么您选择一个价格，如果不是，则选择另一个价格。

这些只是我的想法。我从来没有实现过类似的东西。

# iphone - iOS 应用内购买 - 内部或外部内容？

> ID：10086072
> 
> 赞同：0
> 
> 时间：2012-04-10T09:20:09.080
> 
> 标签：iphone, ios, in-app-purchase, mkstorekit

我正试图解决应用内购买问题，但仍然不明白......：/我正在为孩子们编写小应用程序来学习字母，我如何锁定让说一半的字母？我是否只需要出售权限来解锁应用内内容，或者我应该只留下免费内容并将我想要出售的部分扔出应用程序？如果我真的扔掉了，有没有一种简单的方法来控制要显示哪些图像/声音等？相当混乱的东西，至少对于菜鸟来说；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T05:48:12.483

是的，您可以只出售您存储的*布尔值*，例如，在您的 NSUserDefaults 中，并检查客户是否购买了完整包。然后让他使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:32:37.313

您可以创建类别和销售类别，如颜色（红色、绿色...）、对象（笔、茶..）等并销售此类别。或者只显示免费内容并代替付费内容显示购买警报。

# php - utf8 不支持其他语言，为什么？

> ID：10086074
> 
> 赞同：1
> 
> 时间：2012-04-10T09:20:12.553
> 
> 标签：php, html

```
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

它不像我的网站那样工作，它可以翻译成 20 种语言，但在土耳其语、日语等某些语言中，它显示的是符号而不是空格或“和许多其他语言

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:23:29.183

由于我不知道您的网站，我只能在黑暗中猜测。

环境

```
<meta charset="utf-8" /> 
```

不会是你唯一要做的事情。如果您的文档保存为 ASCII，您的问题将无法解决。此外，您必须正确设置文档编码（元标记只是告诉浏览器使用哪种编码，而不是实际使用哪种编码）。因此，使用 SublimeText / Notepad++ 之类的（良好）文本编辑器或您喜欢的文本编辑器打开文档，并将编码设置为 UTF-8。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T09:30:32.867

对于 php，您需要添加一个 utf-8 标头

```
header ('Content-type: text/html; charset=utf-8'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T09:23:35.873

让浏览器知道文本是 unicode 和实际以 unicode 提供数据是不一样的。检查您的文件中的 unicode、unicode 的数据库数据以及在服务时使用它完成的转换。提供更多信息以查明您的问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T10:35:12.190

该问题是由您使用的管理工具引起的。该工具将数据注入采用其他编码的 UTF-8 编码数据。由于该工具尚未描述，具体原因无法孤立。提到的页面没有出现问题，并且它们在 HTTP 标头中指定了 UTF-8 编码，因此该`meta`标记在在线上下文中被忽略（尽管对离线使用很有用）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T09:26:55.550

> ```
> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
> ```

仅在 HTML 中添加 Content-Type 标头不会产生任何 utf-8。它只是告诉浏览器期待 utf-8。如果您的源文件不是 utf-8，或者存储数据的数据库列不是 utf-8，或者到数据库本身的连接不是 utf-8，或者如果您正在发送 HTTP标头告诉它不是 utf-8，它不起作用。处理 utf-8 的方法只有一种：确保一切*都*在 utf-8 中。

# eclipse - Eclipse 中的 Jinja2 模板支持

> ID：10086078
> 
> 赞同：11
> 
> 时间：2012-04-10T09:20:45.923
> 
> 标签：eclipse, templates, pydev, jinja2

在 Python 中使用 Eclipse 键绑定 Shift-Ctrl+F（格式）（在 PyDev 的帮助下），Javascript 或纯 HTML 文件按预期工作。然而，Jinja2 模板变得一团糟。是否有解决方案可以解决或轻松解决此问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T10:31:04.747

由于 Jinja2 似乎非常接近 Django 模板，因此可能值得使用 Django 模板编辑器（它与 Aptana Studio 3 一起分发——您只需更改文件关联即可在文件关联中使用该编辑器打开 html 文件）。

# jsf - 如何从外部更新 dataTable 内部的组件

> ID：10086079
> 
> 赞同：0
> 
> 时间：2012-04-10T09:20:46.840
> 
> 标签：jsf, datatable, components, primefaces

我正在使用带有 Primefaces 3.2 的 JSF 2.1 的 Mojarra 实现。

我的问题大概是这样的：

```
<p:dialog id="someDialog">
  ..
  <h:form id="dialogForm">        
    <p:commandLink action=".."update=":someForm:someUIRepeat:someDataTable:someInputTextArea"/> 
  </h:form>
</p:dialog>

<h:form id="someForm">
  <ui:repeat id="someUIRepeat" value=".." ..>
    <p:dataTable id="someDataTable" value=.. >

      <p:column>
        <p:inputTextarea id="someInputTextarea" value=../>
      <p:column>

     .. here go other columns
  <ui:repeat>
</h:form> 
```

问题是当我单击对话框中的 commandLink 时，inputTextarea 没有更新。但是，如果我在 commandLink 的更新中写这个： update=":someForm:someUIRepeat:someDataTable,:someForm:someUIRepeat:someDataTable:someInputTextArea"

然后整个 dataTable 得到更新，inputTextarea 也得到更新，但是在我单击对话框中的 commandLink 后，位于其他列中的字段中的值将被删除。

我将 dataTable 放在 ui:repeat 中的原因是我需要将一个 dataTable 与一个集合的每一行绑定，我认为这与我的问题无关。

有什么想法可以解决这个问题吗？

提前致谢，

努尔詹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:28:55.350

for start try this

added `onclick="jQuery('#someForm:someButton').click();"`(check the exact id of your hidden button) to your `<p:commandLink` inside the dialog

set the `update` to `update=":someForm:someUIRepeat:someDataTable"`

and add

```
<h:commandButton id="someButton" style="display:none">
    <f:ajax execute="@form"></f:ajax>
</h:commandButton> 
```

to `<h:form id="someForm">`

explanation: the purpose of the hidden button is to execute (send its values) the form to the server so that when you do call `update` the fields wont be erased...

# php - 未定义的变量php更新mysql数据

> ID：10086082
> 
> 赞同：0
> 
> 时间：2012-04-10T09:21:02.880
> 
> 标签：php, mysql

**这是尝试更新mysql数据错误的代码，说明未定义变量**

```
mysql_connect ("localhost", "root", "");
mysql_select_db("supplierdetails");
 $con = mysql_connect("localhost", "root", "");
   if (!$con)
    {
    die('Could not connect: ' . mysql_error());
    }
//Run a query 
    $result = mysql_query ("SELECT * FROM users WHERE id= '$id'");
    while ($row = mysql_fetch_array($result))
   {
$username=$row['username'];
$password=$row['password'];
  }
$query = "UPDATE users SET username = '$username', password = '$password' WHERE id           = '$id'";
$result = @mysql_query($query);
//Check whether the query was successful or not
if($result) {  
    header("message= Users Updated");
}else {
    die("Query failed");
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:25:37.560

你用过 2`connect`没必要`while`你忘了`$id`

```
 $con = mysql_connect("localhost", "root", "");
    mysql_select_db("supplierdetails");

       if (!$con)
        {
        die('Could not connect: ' . mysql_error());
        }

    $id = $_POST['id'];        
    $username=$_POST['username'];
    $password=$_POST['password'];

    $query = "UPDATE users SET username = '".$username."', password = '".$password."' WHERE id = '".$id."'";
    $result = mysql_query($query);
    //Check whether the query was successful or not
    if($result) {  
        echo "message= Users Updated";
    }else {
        die("Query failed");
    }
    ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:26:25.910

你错过了 $id 价值？

并且可以`echo`用来调试或检查脚本结果，而不是`header`

`http://php.net/manual/en/function.header.php`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T09:26:49.837

请更具体地说明未定义的变量。

在您发布的代码中`$username`，只有在返回结果`$password`时才设置`$result`，如果没有，那么您的`while`循环将不会运行，因此`$username`永远`$password`不会被设置。

也`$id`看起来好像也没有设置，除非这是在您包含在问题中的代码之外设置的。

希望这可以帮助 ：）

# php - PHP脚本连接TCP/IP服务器？

> ID：10086083
> 
> 赞同：0
> 
> 时间：2012-04-10T09:21:15.937
> 
> 标签：php, networking

我知道 PHP 确实允许您创建服务器，但客户端呢？我需要一个脚本来连接到给定端口上的 TCP/IP 服务器并发送一些数据。这在 PHP 中是否可行，如果可以，您能帮帮我吗？我没有发现任何有用的东西。我的 TCP/IP 服务器在端口 1301 上运行，我需要用户能够通过单击网页向服务器发送一个字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:27:25.423

它类似于创建服务器的方式。我建议查看[socket_connect](http://php.net/socket_connect)的文档。

总结：

*   [socket_create](http://php.net/manual/en/function.socket-create.php)
*   [socket_bind](http://php.net/manual/en/function.socket-bind.php)
*   [socket_connect](http://php.net/manual/en/function.socket-connect.php)
*   [socket_write](http://php.net/manual/en/function.socket-write.php)
*   [socket_read](http://php.net/manual/en/function.socket-read.php)
*   [socket_close](http://php.net/manual/en/function.socket-close.php)

工作流程：

*   创建套接字
*   可选择绑定它
*   连接到服务器
*   读/写数据
*   关闭插座

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T09:51:09.557

我以前用过这块。这相当简单；它连接到端口 $port 上的 $ip_address，并将 $sendData 数据发送到服务器，然后读取响应并返回响应。

```
$sendData = chr(6).chr(0).chr(255).chr(255).'info';
function sendAndGetResponse($ip_address, $port, $sendData){
$socketHandler=@fsockopen($ip_address, $port, $errno, $errstr, 1);
if(!$socketHandler)
{
    return false; //offline
}
else
{
    $response = '';
    stream_set_timeout($socketHandler, 2);
    fwrite($socketHandler, $sendData);
    while (!feof($socketHandler))
    {
        stream_set_timeout($socketHandler, 2);
        $response .= fgets($socketHandler, 1024);
    }
    fclose($socketHandler);
    return $response;
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T09:35:46.660

如果是 HTTP 服务器，您可以使用 CURL 或创建套接字连接[http://php.net/manual/en/function.socket-connect.php](http://php.net/manual/en/function.socket-connect.php)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-04-10T09:25:40.597

是的，php 可以充当带有 CURL、fsockopen 和获取 URL 的最简单方法的 HTTP 客户端 - 使用`file_get_contents()`

# sql-server - 试图摆脱光标进行更新

> ID：10086090
> 
> 赞同：2
> 
> 时间：2012-04-10T09:21:46.250
> 
> 标签：sql-server, tsql, cursor

我需要将一列中的前半部分单词存储在另一列中。我可以假设有偶数个单词。我使用游标和我发现的一个函数来完成它，该函数接受一个字符串并使用分隔符将其解析为表。

```
drop table #test
create table #test (id int identity, my_name varchar(128), cleaned_name varchar(128))

insert into #test (my_name) VALUES ('abcd efgh abcd1 efgh1')
insert into #test (my_name) VALUES ('name1 name2 name1a name2a')
insert into #test (my_name) VALUES ('one two one* two*')

select *
from #test

DECLARE @HalfName varchar(100)
DECLARE @i varchar(100)
set @i = 1
while @i <= (select count(*) from #test)
begin
      SELECT @HalfName = COALESCE(@HalfName + ' ', '') + aa.WORD
      FROM (select top (select count(*) / 2 from dm_generic.dbo.GETALLWORDS((select [my_name]
      from #test 
      where id = @i), ' ')) *
      from dm_generic.dbo.GETALLWORDS(
      (select [my_name]
      from #test 
      where id = @i), ' ') 
      ) aa

      update #test 
      set cleaned_name = @HalfName 
      where id = @i

      set @i = @i + 1
      set @HalfName = ''
end

select *
from #test 
```

我试图在没有光标的情况下做到这一点：

```
UPDATE bb
   SET cleaned_name =
          (SELECT COALESCE (bb.cleaned_name + ' ', '') + aa.WORD
             FROM (SELECT TOP (SELECT count (*) / 2
                                 FROM dm_generic.dbo.GETALLWORDS (
                                         (SELECT [my_name]
                                            FROM #test a
                                           WHERE a.id = bb.id),
                                         ' '))
                          *
                     FROM dm_generic.dbo.GETALLWORDS ( (SELECT [my_name]
                                                          FROM #test b
                                                         WHERE b.id = bb.id),
                                                      ' ')) aa)
  FROM #test bb 
```

我得到的是：

```
Msg 512, Level 16, State 1, Line 1
Subquery returned more than 1 value. This is not permitted when the subquery follows =, !=, <, <= , >, >= or when the subquery is used as an expression.
The statement has been terminated. 
```

任何帮助将不胜感激。

感谢所有响应者，我终于使用@BradC 的[这个解决方案](https://stackoverflow.com/a/451441/1115157)来酿造我自己的解决方案，这里是：

```
update updated
set cleaned_name = (
SELECT Clean
FROM #test AS extern
CROSS APPLY
( 
select TOP (SELECT count (*) / 2 
            FROM dm_generic.dbo.GETALLWORDS (
                                           (SELECT [my_name]
                                            FROM #test a
                                            WHERE a.id = extern.id), ' '))
WORD + ' '
FROM dm_generic.dbo.GETALLWORDS (
         (SELECT [my_name]
            FROM #test a
           WHERE a.id = extern.id),
         ' ')
    FOR XML PATH('')
) pre_trimmed (Clean)
where extern.id = updated.id)
from #test updated 
```

@Nikola Markovinović 解决方案也很有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:56:11.513

局部变量连接技巧在没有局部变量的情况下不起作用 - 您正在使用 @HalfName 连接来自 GETALLWORDS 的单词，但它不适用于使用列名（在这种情况下为 cleaned_name）。要使其工作，您应该使用[xml 路径连接技巧](https://stackoverflow.com/questions/8868604/sql-group-concat-function-in-sql-server)。

因此，如果您使用的是 Sql Server 2005 或更高版本，请尝试以下操作：

```
UPDATE bb
   SET cleaned_name =
      (SELECT stuff ((SELECT TOP (SELECT count (*) / 2 
                                   FROM dm_generic.dbo.GETALLWORDS (
                                         (SELECT [my_name]
                                            FROM #test a
                                           WHERE a.id = bb.id),
                                         ' ')
                                  )
                             ' ' + aa.my_name
                        FROM dm_generic.dbo.GETALLWORDS (
                                         (SELECT [my_name]
                                            FROM #test a
                                           WHERE a.id = bb.id),
                                         ' ') aa 
                         FOR XML PATH(''),TYPE).value('(./text())[1]','VARCHAR(MAX)')
                     , 1, 1, '')
      )
  FROM #test bb 
```

免责声明：我无法对此进行测试。首先仅使用 UDF 进行尝试，然后将其合并到查询中。

更新：我放错了括号 - 最后一行中的第一个右括号应该被删除，并且应该在最后一个之后附加一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:18:03.023

创建以下函数

```
ALTER FUNCTION [dbo].[halfWords]
    (
      @InputString VARCHAR(4000)
    )
RETURNS VARCHAR(4000)
AS BEGIN

    DECLARE @Index INT
    DECLARE @Char CHAR(1)
    DECLARE @PrevChar CHAR(1)
    DECLARE @WordCount INT
    DECLARE @WordCount2 INT
    DECLARE @firstHalf varchar(4000)

    SET @Index = 1
    SET @WordCount = 0

    WHILE @Index <= LEN(@InputString)
        BEGIN
            SET @Char = SUBSTRING(@InputString, @Index, 1)
            SET @PrevChar = CASE WHEN @Index = 1 THEN ' '
                                 ELSE SUBSTRING(@InputString, @Index - 1, 1)
                            END

            IF @PrevChar = ' '
                AND @Char != ' ' 
                SET @WordCount = @WordCount + 1

            SET @Index = @Index + 1
            SET @wordcount2 = ( @wordcount / 2 )
        END

    SET @wordcount = 0 
    SET @Index = 1
    WHILE @Index <= LEN(@InputString)
        BEGIN
            SET @Char = SUBSTRING(@InputString, @Index, 1)
            SET @PrevChar = CASE WHEN @Index = 1 THEN ' '
                                 ELSE SUBSTRING(@InputString, @Index - 1, 1)
                            END

            IF @PrevChar = ' '
                AND @Char != ' ' 
                SET @WordCount = @WordCount + 1

            IF ( @wordcount2 = @WordCount ) 
                BEGIN
                    SET @firstHalf = SUBSTRING(@InputString, 0, @Index) 

                END
            SET @Index = @Index + 1

        END
    RETURN @firstHalf
   END 
```

然后在下面的更新查询中使用它

```
 UPDATE    #test
  SET       cleaned_name = dbo.[halfWords] (my_name) 
```

选择查询以供参考

```
SELECT dbo.halfWords ('one two three four five six seven eight') 
```

将返回

```
one two three four 
```

# c#-4.0 - 如何在 FolderBrowserDialog 中恢复选定的路径

> ID：10086094
> 
> 赞同：1
> 
> 时间：2012-04-10T09:22:20.013
> 
> 标签：c#-4.0

在我的应用程序中，我只想恢复之前选择的路径..

```
using (FolderBrowserDialog dlgDirestorySelector = new FolderBrowserDialog())
{
string directoryName;
dlgDirestorySelector.ShowNewFolderButton = false;
if (dlgDirestorySelector.ShowDialog() == System.Windows.Forms.DialogResult.OK)
{
  directoryName = dlgDirestorySelector.SelectedPath;
}
//Processing code
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:24:19.913

您想在显示对话框之前设置[RootFolder](http://msdn.microsoft.com/en-us/library/system.windows.forms.folderbrowserdialog.rootfolder.aspx)属性。

或者，如果文件夹路径是自定义的（而不是特殊文件夹），您只需`SelectedPath`在显示对话框之前设置属性（在设置的路径周围有一些规则，在我链接的文档的“备注”部分中进行了说明） .

# android - 以一定的速度移动我的对象

> ID：10086097
> 
> 赞同：0
> 
> 时间：2012-04-10T09:22:26.877
> 
> 标签：android, opengl-es

考虑一个应该在道路上向前移动的汽车对象。我还没有汽车对象，但我稍后会添加那个形状。我现在有一个正方形而不是一辆车，我怎样才能以特定的速度向前移动它？

有任何想法吗？

这是我的代码

```
public class GLqueue {
private float vertices[] = { 1, 1, -1, // topfront
        1, -1, -1, // bofrontright
        -1, -1, -1, // botfrontleft
        -1, 1, -1, 
        1, 1, 1, 
        1, -1, 1, 
        -1, -1, 1, 
        -1, 1, 1,

};

private FloatBuffer vertBuff;
private short[] pIndex = { 3, 4, 0,  0, 4, 1,  3, 0, 1, 
        3, 7, 4,  7, 6, 4,  7, 3, 6, 
        3, 1, 2,  1, 6, 2,  6, 3, 2, 
        1, 4, 5,  5, 6, 1,  6, 5, 4,

};
private ShortBuffer pBuff;

public GLqueue() {

    ByteBuffer bBuff = ByteBuffer.allocateDirect(vertices.length * 4);
    bBuff.order(ByteOrder.nativeOrder());
    vertBuff = bBuff.asFloatBuffer();
    vertBuff.put(vertices);
    vertBuff.position(0);

    ByteBuffer pbBuff = ByteBuffer.allocateDirect(pIndex.length * 4);
    pbBuff.order(ByteOrder.nativeOrder());
    pBuff = pbBuff.asShortBuffer();
    pBuff.put(pIndex);
    pBuff.position(0);

}

public void draw(GL10 gl) {
    gl.glFrontFace(GL10.GL_CW);
    gl.glEnable(GL10.GL_CULL_FACE);
    gl.glCullFace(GL10.GL_BACK);
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glVertexPointer(2, GL10.GL_FLOAT, 0, vertBuff);
    gl.glDrawElements(GL10.GL_TRIANGLES, pIndex.length,
            GL10.GL_UNSIGNED_SHORT, pBuff);
    gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glDisable(GL10.GL_CULL_FACE);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:48:19.813

速度取决于两个因素 - 时间和距离：*`v = d/t`*。
“移动”对象通常是通过更改相对于起始位置的位置来完成的。这个距离是根据上面的公式计算的：*`d = vt`*。
这意味着为了知道绘制时对象的位置，我们必须知道速度和时间。

速度可能是由用户或程序以某种方式决定的（即用户按下按钮以加快驾驶速度并且速度上升）。可以通过调用来检索当前时间`System.currentTimeMillis()`。

这是一个非常简单的实现示例：

```
//Variables:
long time1, time2, dt; 
float velocity; 
float direction;

//In game loop:

time1 = System.currentTimeMillis(); dt = time1-time2;

float ds = velocity*dt; //ds is the difference in position since last frame. car.updatePosition(ds, direction); //Some method that translates the car by ds in direction.

time2 = time1; 
```

# c - 将推文拆分为单独的字符串

> ID：10086101
> 
> 赞同：0
> 
> 时间：2012-04-10T09:22:31.803
> 
> 标签：c, xcode, twitter, xcode4

我是该网站的新手。有谁知道是否可以获取一条推文并将其中的信息拆分为 Xcode 中的单独部分？例如......如果推文阅读......“天空新闻：这是标题：12/04/12：这是消息的正文”我可以将用冒号分隔的块提取为单独的字符串，以便一个字符串可能是“天空新闻”一个“这是标题......等等？提前谢谢Al

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:26:01.693

您可以将`-[NSString componentsSeparatedByString:]`字符串拆分为字符串数组。

```
NSArray *arr = [@"This: is: a: string" componentsSeparatedByString:@":"]; 
```

现在数组`arr`将有 4 个项目。

# c++ - C++ 读取访问冲突错误

> ID：10086102
> 
> 赞同：5
> 
> 时间：2012-04-10T09:22:49.530
> 
> 标签：c++

我目前收到“0xC0000005：访问冲突读取位置 0xcccccce0”。错误，我已尝试诊断问题...我认为当我定义的 3 规则起作用并将我指向此处时，问题就出现了。

```
size_type size() const
    {   // return length of sequence
    return (this->_Mysize); <---------------------this line
    } 
```

我实际上不确定是否有任何问题，我已经连续几天一直在思考这个问题。

以下是我的三法则

```
ArrayStorage::ArrayStorage(){
     myArray = new string[7079];
}

ArrayStorage::~ArrayStorage(){
    delete[] _data;
    delete[] myArray;
}

ArrayStorage::ArrayStorage(const ArrayStorage &A) {
    _size = A.size();
    _data = new string [size()];
    for (int i = 0; i < size(); ++i)
        _data[i] = A[i];
}

ArrayStorage& ArrayStorage::operator=(const ArrayStorage &A){
    if (this != &A) {
        delete [] _data;
        _size = A.size();
        _data = new string [A.size()];
        for (int i = 0; i < size(); ++i) {
             _data[i] = A[i];
        }
    }
    return *this;
}

const string& ArrayStorage::operator[](int i) const{
    assert((i >= 0) && (i < size()));
    return _data[i];
}

string& ArrayStorage::operator[](int i){
    assert((i >= 0) && (i < size()));
    return _data[i];
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T09:34:03.270

未初始化时，如果使用 msvc 编译，堆栈变量将填充 0xCC 字节。所以 0xcccccce0 可能是“this”是堆栈上未初始化的指针变量加上对象结构中的 _MySize 偏移量的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T09:34:54.273

您的代码存在许多明显的问题：例如，您的析构函数执行 a`delete [] _data`和 a `delete [] myArray`，但 `_data`从未在默认构造函数中`myArray` 初始化，也从未在复制构造函数中初始化。如果例如`new` 失败，您的赋值运算符可以使对象处于无效状态。（一般来说，如果你必须测试自赋值，几乎可以肯定你的赋值运算符坏了。）这些问题中的任何一个都会导致未定义的行为，这可能会破坏可用空间领域，谁知道以后会出现什么问题。

不过，看看在哪里`size`被调用会很有趣。错误信息提示无效`this`；您使用无效地址调用了该函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T09:31:08.810

断点/监视列表。我猜*这*是空的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T09:39:36.957

我猜这是一个指针问题，但如果没有堆栈跟踪/回溯就无法判断。您在某个地址调用 size()，您认为该地址有一个 ArrayStorage 但没有。因为它是 0xccccce0 我会使用一个未初始化的指针。

例如，你有没有这样的东西

```
ArrayStorage storage1;
ArrayStorage* storage2;
*storage2 = storage1; 
```

这将导致 this 或类似的错误，使 this 指针无效。

为什么要编写自己的 std::vector？

# ruby-on-rails - Gallery fo bcms 3.3.3 错误 - ruby on rails

> ID：10086103
> 
> 赞同：0
> 
> 时间：2012-04-10T09:22:52.353
> 
> 标签：ruby-on-rails, ruby, browsercms

heeey！）我试图制作一个画廊，但我在文件上传时遇到错误

模型库.rb

```
class Gallery < ActiveRecord::Base  
  acts_as_content_block
  has_attached_file :avatar, :styles => { :thumb => "291x191#" }

  #attr_accessible :images
  has_many :images
  accepts_nested_attributes_for :images, :allow_destroy => true
end 
```

模型图像.rb

```
class Image < ActiveRecord::Base
belongs_to :gallery
#acts_as_content_block :belongs_to_gallery => true
 has_attached_file :image, :styles => { :large => "640x480", :medium => "300x300>", :small => "100x100>" }
end 
```

_form.html.erb

```
<p> Hello world!</p>

<%= f.cms_text_field :name %>
<%= f.cms_text_area  :description %>
<%= f.cms_file_field :avatar, :label => "Avatar" %>

<% f.object.images.build %>
<%= f.fields_for :images, :html => { :multipart => true } do |image| %>
 <%= image.file_field :image, :label => "Child Avatar" %>
<% end %> 
```

==================================================== ======

```
Started POST "/cms/galleries/14" for 91.2**.41.*** at 2012-04-10 01:28:14 +0400
  Processing by Cms::GalleriesController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"ziD3527h0JynfX05FcpnVgjsPSz2rGP4MKbEDmOun4U=", "gallery"=>{"lock_version"=>"0", "connect_to_page_id"=>"", "connect_to_container"=>"", "name"=>"Галерея", "description"=>"", "images_attributes"=>{"0"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0x000000047a2570 @original_filename="загруженное.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"gallery[images_attributes][0][image]\"; filename=\"\xD0\xB7\xD0\xB0\xD0\xB3\xD1\x80\xD1\x83\xD0\xB6\xD0\xB5\xD0\xBD\xD0\xBD\xD0\xBE\xD0\xB5.jpg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20120410-18330-3iyv20>>}}, "publish_on_save"=>"true"}, "id"=>"14"}
Command :: identify -format %wx%h '/tmp/загруженное.jpg20120410-18330-4sshl[0]'
Command :: convert '/tmp/загруженное.jpg20120410-18330-4sshl[0]' -resize "640x480" '/tmp/загруженное20120410-18330-tfa27r'
Command :: identify -format %wx%h '/tmp/загруженное.jpg20120410-18330-4sshl[0]'
Command :: convert '/tmp/загруженное.jpg20120410-18330-4sshl[0]' -resize "300x300>" '/tmp/загруженное20120410-18330-h8iclv'
Command :: identify -format %wx%h '/tmp/загруженное.jpg20120410-18330-4sshl[0]'
Command :: convert '/tmp/загруженное.jpg20120410-18330-4sshl[0]' -resize "100x100>" '/tmp/загруженное20120410-18330-el6pk'
Redirected to http://*********/cms/galleries/14
Completed 302 Found in 218ms 
```

帮帮我plzzzz =(((

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:40:34.903

确保表有或没有字段。

画廊：

```
:avatar_file_name
:avatar_content_type
:avatar_file_size 
```

图片 ：

```
:image_file_name
:image_content_type
:image_file_size 
```

看看**[Paperclip：在 Rails 中附加文件](http://jimneath.org/2008/04/17/paperclip-attaching-files-in-rails.html)**

# xpages - 使用主题为 xe:navigator 设置 expandLevel

> ID：10086104
> 
> 赞同：1
> 
> 时间：2012-04-10T09:22:52.930
> 
> 标签：xpages, xpages-extlib

我想使用一个主题为几个扩展库导航器设置 expandLevel 属性。我可以设置 expandable 和 expandEffect 但我无法让 expandLevel 工作。我在我的主题中使用以下内容：

```
 <!-- Navigator -->
 <control>
    <name>Outline.Navigator</name>
    <property type="boolean">
        <name>expandable</name>
        <value>true</value> 
    </property>
    <property>
        <name>expandEffect</name>
        <value>wipe</value> 
    </property>
    <property>
        <name>expandLevel</name>
        <value>#{0}</value> 
    </property>
</control> 
```

我也尝试过使用`<value>0</value>`which 也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T05:03:24.697

布尔值需要作为 EL 传递，就像数字一样。将可扩展属性的值作为#{true} 传递，否则它将尝试分配一个字符串值。

# html - 是什么导致换行？

> ID：10086106
> 
> 赞同：0
> 
> 时间：2012-04-10T09:23:07.310
> 
> 标签：html, css, line-breaks

我正在写博客： http: [//poweryogatrainings.blogspot.com/search](http://poweryogatrainings.blogspot.com/search)。如果您检查链接，您可以看到当前博客文章就在缩略图下方。现在我正在尝试使博客文章在缩略图旁边（右侧）对齐，但我不确定如何。有谁知道是什么导致了换行符，我能做些什么来避免它？

另外我认为有一个网站，您可以在其中编辑网站代码并观看预览，而无需实际更改代码。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:27:41.157

只需将左浮动添加到图像中，并在其右侧和底部留出一些空间，如下所示：

```
img.postthumb {
    float: left;
    margin: 0 10px 10px 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:41:12.970

如果您的缩略图都是相同的宽度，那么您可以这样做：

```
article { overflow: hidden; /* or some other clearfix method */ }
article img.postthumb { float: left; }
article h3, article header, article div.postbody, article footer { margin-left: WIDTH_OF_IMAGE } 
```

几点：

*   WIDTH_OF_IMAGE 应替换为图片的实际宽度，可能还有您希望在图片和文章文字之间出现的任何额外空间
*   我推荐的代码将按列排列，如果你想避免这种情况，那么只需删除 css 的第三行，你就会有流动的段落来包装图像
*   你可以做很多事情来使你的代码更简洁，例如你的文章的 h3 标签应该真的在你文章的标题标签中等等。你的正文中也有`<title>`标签`<meta>`，当这些标签最好放在`<head>`你的文档..

无论如何，祝你好运，我喜欢一般的瑜伽网站，期待看到成品

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T09:28:20.457

用于`float`将您的内容放在同一行。喜欢`float:left;`img 标签将允许内容水平显示。

# c++ - 函数定义未在模板中声明参数错误

> ID：10086107
> 
> 赞同：2
> 
> 时间：2012-04-10T09:23:16.843
> 
> 标签：c++, template-specialization

以前有人问过这个问题，但不是在相同的上下文中。

代码：

```
 namespace std
    {
    template <typename T, typename U>
    struct hash < pair <T,U> >
    {
        size_t operator()
        {
            return hash<T>()(first) ^ hash<U>()(second);
        }
    };
    } 
```

我正在尝试使用 unordered_map，因为不需要对元素进行排序。但这需要一个哈希比较函数。以下代码生成编译时错误：

“错误：函数定义未声明参数”

问题是我的地图不仅包含内置类型，还包含混合：

```
typedef std::vector<Point> Point_Set;
typedef std::unordered_map < Point_Set, double > Tree; 
```

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:21:51.453

运算符需要将一对作为参数，并使用其中的`first`和`second`成员：

```
size_t operator()(pair<T,U> const & pair)
{
    return hash<T>()(pair.first) ^ hash<U>()(pair.second);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T10:06:00.943

这里有一些东西看起来不像 C++。

*   你 hash struct 有两个模板参数，但你用一个来调用它。
*   operator() 不带任何参数，但你给它一个。
*   first 没有在任何地方声明，但您将其用作 operator() 的参数。

# wordpress - 使用 /index.php/page-name 链接到页面时，Wordpress 被切断

> ID：10086115
> 
> 赞同：0
> 
> 时间：2012-04-10T09:23:40.383
> 
> 标签：wordpress, permalinks, absolute-path, bitnami

我也在 bitnami 答案上发布了[这个问题](http://answers.bitnami.org/questions/4107/wordpress-is-cut-off-when-linking-to-pages-using-indexphppage-name)，但我在这里对其进行了改进。相关链接是：

我在我的 Kubuntu Linux 机器上运行 bitnami wordpress 堆栈。我正在使用像这样的绝对链接在我的内容中链接到我网站的内部页面，`/index.php/page-name`并且我的服务器正在运行`http://127.0.1.1/wordpress/`。适当的相对链接可以正常工作，但绝对链接不能。

我使用绝对链接得到的行为是`/wordpress/`路径组件在使用时被截断`/index.php/page-name`并指向`http://127.0.1.1/index.php/page-name`而不是`http://127.0.1.1/wordpress/index.php/page-name`.

我正在使用 Post name 永久链接结构，并且我的 .htaccess 文件也具有以下重写规则：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /wordpress/
RewriteRule ^index\\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /wordpress/index.php [L]
</IfModule>

# END WordPress 
```

每次单击该链接时，我都会在 apache 错误日志中收到带有此消息的 404 错误：

`script '/home/nandu/wordpress-3.3.1-1/apache2/htdocs/index.php' not found or unable to stat`

我不确定为什么当我在管理区域中的设置显示站点 url 和地址 url 都指向`http://127.0.1.1/wordpress`.

此外，根据wordpress [codex](http://codex.wordpress.org/Linking_Posts_Pages_and_Categories) `/index.php/`应该指向站点根目录。

就这个问题而言，我束手无策。如果您需要更多信息，请告诉我。

提前致谢。导航

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:33:54.357

我不确定您为什么要尝试通过`index.php`. 您应该创建与 WordPress 本身生成的永久链接相匹配的链接。所以，而不是`/index.php/page-name`，你会放`/wordpress/page-name`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T03:53:20.580

我已成功让我的 bitnami wordpress 堆栈在根 url 上运行 wordpress，`http://127.0.1.1/`以便我的内容中的链接与我的生产系统一样工作。

以下是我按照您的需要修改的步骤：

1.  编辑以下行`/<INSTALL_DIR>/apache2/conf/httpd.conf`

    从：

    `DocumentRoot "/<INSTALL_DIR>/apache2/htdocs"`

    到

    `DocumentRoot "/<INSTALL_DIR>/apps/wordpress/htdocs"`

2.  在同一个文件中，还更改以下指令

    从

    `<Directory "/<INSTALL_DIR>/apache2/htdocs">`

    到

    `<Directory "/<INSTALL_DIR>/apps/wordpress/htdocs">`

3.  通过在前面添加 a转到`/<INSTALL_DIR>/apps/wordpress/conf/wordpress.conf`并注释掉以下行`#`：

    `Alias /wordpress/ "/<INSTALL_DIR>/apps/wordpress/htdocs/"`

    `Alias /wordpress "/<INSTALL_DIR>/apps/wordpress/htdocs"`

4.  在同一个文件中更改

    从：

    `RewriteBase /wordpress/`

    到

    `RewriteBase /`

5.  在同一文件中，通过删除 # 取消注释以下行：

    `#RewriteEngine On`

    `#RewriteRule ^/$ /wordpress/ [PT]`

6.  重启 bitnami apache 服务器：

    `/<INSTALL_DIR>/ctlscript restart`

7.  编辑以下行`/<INSTALL_DIR>/apps/wordpress/htdocs/.htaccess`

    从：

    `RewriteBase /wordpress/`

    到

    `RewriteBase /`

    和

    `RewriteRule . /wordpress/index.php [L]`

    到

    `RewriteRule . /index.php [L]`

8.  登录到 PHPMyAdmin`http://127.0.1.1/phpmyadmin`并转到 wp_options 表更改`siteurl`值

    从：

    `http://127.0.1.1/wordpress`

    到

    `http://127.0.1.1`

9.  之后将目录`index.html`中的文件重命名为`/<INSTALL_DIR>/apache2/htdocs/``old-index.html`

10.  重启 bitnami apache 服务器：

    `/<INSTALL_DIR>/ctlscript restart`

导航到`http://127.0.1.1/`应该显示网站的主页。[bitnami wordpress 文档](http://wiki.bitnami.org/Applications/BitNami_Wordpress#How_to_change_the_default_URL.3f)上有一些关于更改根 url 需要做什么的文档，但就我必须做的事情而言，它们似乎不完整。

希望对某人有所帮助。:-) 导航

# django - 仅表单集标题？

> ID：10086120
> 
> 赞同：0
> 
> 时间：2012-04-10T09:24:10.040
> 
> 标签：django, django-forms, django-templates

我只想有一个表单集的标题示例：

```
 CaracFormSet = formset_factory(CaracForm, extra=0)
    CaracFormSet = CaracFormSet(prefix='carac',initial=initial) 
```

我只想要标题怎么做？

```
 print CaracFormSet. what ? 
```

这是我的表单集的标题：

```
 <input type="hidden" name="carac-TOTAL_FORMS" value="2" id="id_carac-TOTAL_FORMS
    " /><input type="hidden" name="carac-INITIAL_FORMS" value="2" id="id_carac-INITI
    AL_FORMS" /><input type="hidden" name="carac-MAX_NUM_FORMS" id="id_carac-MAX_NUM
    _FORMS" /> 
```

问候比西尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:30:30.347

你需要[management_form](https://docs.djangoproject.com/en/dev/topics/forms/formsets/#understanding-the-managementform)

```
print CaracFormSet.management_form 
```

# redirect - 重定向到管道

> ID：10086122
> 
> 赞同：1
> 
> 时间：2012-04-10T09:24:19.887
> 
> 标签：redirect, pipe, gawk

有没有办法在重定向到文件之前过滤标准输出（或标准错误）？“重定向到管道”可能不是最好的表达方式，但我正在寻找实现这种效果的最简单方法。

使用场景如下。我原则上使用 gawk --lint-invalid 来检测我的脚本中可能存在的错误，并希望过滤掉虚假的错误。我希望在写入文件之前进行过滤，而不是将错误重定向到文件并在检查文件时将它们删除。

示例：此脚本每隔一行打印一次到 stderr。

```
echo -ne 'a\nb\nc\nd\n' | gawk --lint=invalid 'BEGIN {b = 1;} // {if (b) print; else print > "/dev/stderr"; b = !b;}' 1>/dev/null 2>errors
cat errors | less

gawk: warning: regexp constant `//' looks like a C++ comment, but is not
b
d
gawk: (FILENAME=- FNR=4) warning: no explicit close of file `/dev/stderr' provided 
```

但是你可以看到虚假的 gawk 警告（它们并不重要）。例如，它们可以被过滤，使用

```
filter-gawk-output.sh
---------------------
grep -Ev 'looks like a|explicit close' 
```

重定向到错误文件时，是否有一种优雅的方式来内联？现在在检查错误文件时，我总是这样做

```
cat errors | ./filter-gawk-output.sh | less 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T11:09:15.680

我不知道`gawk`有能力更改警告的输出。所以我认为这更多是关于shell语法的问题。

给定

```
filter_warnings() { grep -v '^gawk:'; }
awkprog='BEGIN {b = 1;} // {if (b) print; else print > "/dev/stderr"; b = !b;}' 
```

where`filter_warnings`用于过滤掉`gawk`警告并假设`bash`您的外壳，我们可以使用语法直接`stderr`管道命令：`|&`

```
echo -ne 'a\nb\nc\nd\n' | gawk --lint=invalid "$awkprog" |& filter_warnings 
```

如果要输出到文件，则需要使用括号：

```
(echo -ne 'a\nb\nc\nd\n' | gawk --lint=invalid "$awkprog" > output.1) |& filter_warnings > output.2 
```

这里`output.1`将包含`gawk`程序输出到`stdout` 和输出。2 程序输出到到`stderr`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T12:21:03.677

关于什么：

```
gawk --lint=invalid 'whatever' INPUTFILE 2> GAWK_ERRORS.LOG 
```

这种方式`STDERR`将被重定向到错误日志。

# c# - Datagrid 的超链接链接在子表的列中

> ID：10086124
> 
> 赞同：1
> 
> 时间：2012-04-10T09:24:26.720
> 
> 标签：c#, asp.net, linq-to-sql, gridview

我有两个表链接。母表版本和子表文件。Versions 有一个名为 fileID 的列，它与 Files 中的 ID 列链接。Files 有一个名为 Url 的列，它是我要检索的列。所以问题是，如果我执行 "DataNavigateUrlFields="File.Url" 系统会丢弃一个未找到的错误。我可以在后面的代码中使用 Version.File.Url 没有问题。

我该怎么做？

它是代码（我已经删除了烦人的代码）：

```
<asp:GridView ID="GridView1" runat="server" >
    <Columns>
      <asp:HyperLinkField DataNavigateUrlFields="File.Url" 
       DataNavigateUrlFormatString="download.aspx?id={0}" HeaderText="Descargar" 
       Text="Documento" />
    </Columns>

</asp:GridView>

<asp:LinqDataSource ID="LinqDataSource1" runat="server" 
    ContextTypeName="QDoc.Class.LinqToSql.QDocDataContext" TableName="Versions" 
    Where="DocId == @DocId">
    <WhereParameters>
        <asp:QueryStringParameter DefaultValue="0" Name="DocId" QueryStringField="id" 
            Type="Int32" />
    </WhereParameters>
</asp:LinqDataSource> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:30:40.533

`File.Url`用属性包裹。猜测您的`Version`类已生成并因此声明`partial`。因此，您可以像这样在内部定义一个属性`Version`：

```
partial class Version
{
   public string FileUrl
   {
      return File.Url;
   }
} 
```

你可以像这样使用它：

```
<asp:HyperLinkField DataNavigateUrlFields="FileUrl" 
       DataNavigateUrlFormatString="download.aspx?id={0}" HeaderText="Descargar" 
       Text="Documento" /> 
```

# c# - 使用模拟从 aspx 页面运行 Add-mailboxpermission

> ID：10086126
> 
> 赞同：1
> 
> 时间：2012-04-10T09:24:34.903
> 
> 标签：c#, asp.net, .net, powershell, exchange-server

我正在尝试从模拟特定用户的 ASPX 页面执行 Add-Mailboxpermission。来自 MSExchange 公共源的应用程序错误记录在 Web 服务器的事件查看器中。

> Watson 报告即将发送到 dw20.exe 的进程 ID：2992，参数：E12、c-buddy-RTL-AMD64、08.03.0083.006、w3wp、MEDDirectory、MEDDConnectionPoolManager.BlockImpersonatedCallers、MECommon.FailFastException、c84f、08.03.0213.000 . 错误报告启用：假

使用用于执行不同 Exchange CMDlet （包括模拟调用）的相同代码，并在没有任何错误的情况下完成。

```
 String ErrorText = "";
    RunspaceConfiguration config = RunspaceConfiguration.Create();
    PSSnapInException warning;
    sDecryptedPwd = SecurityManager.Decrypt(AdminPassword, true);

  using (new Impersonator(AdminUserName, "domain name", sDecryptedPwd))
    {
        // Load Exchange PowerShell snap-in.
        config.AddPSSnapIn("Microsoft.Exchange.Management.PowerShell.Admin", out warning);
        if (warning != null)
            throw warning;

        using (Runspace thisRunspace = RunspaceFactory.CreateRunspace(config))
        {
            try
            {
                thisRunspace.Open();
                using (Pipeline thisPipeline = thisRunspace.CreatePipeline())
                {
                    //Please change parameter values.
                    thisPipeline.Commands.Add("Add-MailboxPermission");
                    thisPipeline.Commands[0].Parameters.Add("Identity", sMailboxName);
                    thisPipeline.Commands[0].Parameters.Add("User", sUserName);
                    thisPipeline.Commands[0].Parameters.Add("AccessRights", sAccessRights);
                    thisPipeline.Commands[0].Parameters.Add("DomainController", sDomainController);

                    iLogManager.Info("Identity: " + sMailboxName + " User: " + sUserName + " AccessRights: " + sAccessRights + " DomainController: " + sDomainController);

                    try
                    {
                        thisPipeline.Invoke();
                        iLogManager.Info(thisPipeline.Commands[0].CommandText);
                    }
                    catch (Exception ex)
                    {
                        ErrorText = "Error: " + ex.ToString();
                    }
                    // Check for errors in the pipeline and throw an exception if necessary.
                    if (thisPipeline.Error != null && thisPipeline.Error.Count > 0)
                    {
                        StringBuilder pipelineError = new StringBuilder();
                        pipelineError.AppendFormat("Error calling Add-MailboxPermission.");
                        foreach (object item in thisPipeline.Error.ReadToEnd())
                        {
                            pipelineError.AppendFormat("{0}\n", item.ToString());
                        }

                        ErrorText = ErrorText + "Error: " + pipelineError.ToString() + Environment.NewLine;
                    }
                }
            }

            finally
            {
                thisRunspace.Close();
            }
        }
    }
    if (ErrorText == "")
        return "no error occurred.";
    else
        return ErrorText; 
```

Exchange 是否允许模拟修改 ACL 的 Exchange CMDlet，或者我在这里做错了什么？

任何人都可以在这里帮助我，没有太多关于从 ASPX 页面模拟的 Exchange Powershell CMdlet 的信息。

# android - 如何在android中解析Web服务响应

> ID：10086129
> 
> 赞同：2
> 
> 时间：2012-04-10T09:24:52.850
> 
> 标签：android, web-services, response

在我的应用程序中，当我向服务器发送请求时，我得到了响应。这里我使用的是 Soap WebService。如何从我的 android 应用程序中读取这个响应。这里的响应是 Json 还是 xml 格式？

```
response from server is :

anyType 
{ 
schema=anyType 
{ 
  element=anyType 
         { 
        complexType=anyType 
          { 
      choice=anyType 
            { 
        element=anyType 
             { 
         complexType=anyType 
              { 
          sequence=anyType 
              { 
element=anyType{}; 
element=anyType{}; 
element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; 
}; 
}; 
}; element=anyType{complexType=anyType{sequence=anyType{element=anyType{}; 
}; 
}; 
}; element=anyType{complexType=anyType{sequence=anyType{element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; element=anyType{}; 
}; 
}; 
}; element=anyType{complexType=anyType{sequence=anyType{element=anyType{}; }; }; }; }; }; }; }; 
diffgram=anyType 
{NewDataSet=anyType 
{Table=anyType 
{ObjectID=b4f3ace4-2bad-4c5d-aa8e-01041a8c3f35; 
OrgUnitID=356; 
AssignToOUon=2010-07-16T06:27:13-04:00; 
ComponentID=1; 
Description=Reference (Classroom Course); 
ContentType=Reference (Classroom Course); 
IconPath=Images\classroomcourse.gif; 
 IsContent=true; 
ObjectTypeID=28; 
ContentTypeThumbNail=tn_classroomcourse.gif; 
ContentID=b4f3ace4-2bad-4c5d-aa8e-01041a8c3f35; 
Name=Advanced Clinical Practice Quarter; 
ShortDescription=A clinical practicum experience that will focus on advanced, applied clinical laboratory techniques and concepts. The practicum experience will be individually designed for each student. The student will participate in choosing the practicum site.; 
Version=1; 
StartPage=http://clsonline.uc.edu/pages/academics/?course_descriptions#cls13; CreatedUserID=5999; 
CreatedDate=2010-07-16T06:26:56.58-04:00; 
Keywords=clinical laboratory; 
Downloadable=false; 
PublishedDate=2010-07-16T06:27:02.22-04:00; Status=Published; CMSGroupID=1648; 
LongDescription=anyType{}; MediaTypeID=6; eCommBussinessRule=0; SalePrice=0.00; FolderPath=B4F3ACE4-2BAD-4C5D-AA8E-01041A8C3F35; Author=James  Rawson; ViewType=1; WindowProperties=status=no,toolbar=no,menubar=no,resizable=yes,location=no,scrollbars=yes,left=10,top=10,width=750,height=470; Currency=          ; SCOID=16290; Active=true; E 
```

# mysql - Zend Db Select 中带有 JOINLEFT 的 GROUP_CONCAT

> ID：10086136
> 
> 赞同：7
> 
> 时间：2012-04-10T09:25:44.223
> 
> 标签：mysql, zend-framework, left-join, group-concat, zend-db-select

假设我有 2 张桌子

```
articles
  id              title
  1               Article 1
  2               Article 2

Images
  id              article_id     image
  1               1              a.png
  2               1              b.png
  3               2              c.png
  4               2              d.png 
```

我想要的只是检索所有带有图像的文章。

例如：

```
article_id     title           images
1              Article 1       a.png, b.png
2              Article 2       c.png, d.png 
```

**我怎么能用 Zend_Db_Select 做到这一点？**

我尝试了这样的事情，但没有运气：

```
$select = $this->getDbTable()->select()->setIntegrityCheck(false)->distinct();
$select->from(array('a'=>'articles'))
  ->joinLeft(array('i'=>'images'),'i.article_id=a.id',array('images'=> new
               Zend_Db_Expr('GROUP_CONCAT(i.image)'))); 
```

它只返回 1 行，其中“图像”字段包含两篇文章的图像。

```
article_id     title           images
1              Article 1       a.png, b.png, c.png, d.png 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T09:41:18.393

您没有`group by`在查询中使用子句。

试试下面：

```
$select->from(array('a'=>'articles'))
  ->joinLeft(
       array('i'=>'images'),
       'i.article_id=a.id',
       array('images'=> new Zend_Db_Expr('GROUP_CONCAT(i.image)')))
  ->group('a.id'); 
```

# dynamics-crm-2011 - 如何将队列包含到 CRM 解决方案中？

> ID：10086140
> 
> 赞同：1
> 
> 时间：2012-04-10T09:26:15.440
> 
> 标签：dynamics-crm-2011

我想从我的 crm 实例中导出自定义项。我创建了一些新队列，我想将它们包含在解决方案中。那可能吗？如何？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:33:03.557

不，队列不能包含在解决方案中。在解决方案导入后，您必须导入它们或以某种方式创建它们。

# struts2 - 问题 在 Struts 2 中

> ID：10086143
> 
> 赞同：0
> 
> 时间：2012-04-10T09:26:26.203
> 
> 标签：struts2

我遇到了 <s:hidden /> 值未填充的问题。

`<s:hidden name="objectName.stringName" />`作品。

`<s:hidden name="stringName" />`没有。我有 getter 和 setter，我在调试模式下尝试过。调用 getter 函数。

我也试过`<s:hidden name="stringName" value="%{stringName}"/>`了，但是没有用。

有人可以为这种行为提供任何解决方案吗？

**编辑 ：**

动作类：

```
public class Test extends ActionSupport implements
    ParameterAware, SessionAware {
   private String stringName;
   private ObjectA objectName;

   public String getStringName() {
      return stringName;
   }

   public void setStringName(String s) {
       this.stringName = s;
   }

   public String getObjectName() {
      return objectName;
   }

   public void setObjectName(ObjectA oa) {
       this.objectName = oa;
   }

   public String execute() throws Exception {
      objectName = POPULATE_THIS_OBJECT_SOMEHOW
      this.stringName = objectName.getStringName();
      return SUCCESS;
   }
} 
```

对象A：

```
public class ObjectA {
  private String stringName;

   public String getStringName() {
      return stringName;
   }

   public void setStringName(String s) {
       this.stringName = s;
   }

} 
```

# ruby-on-rails - 使用 RSpec 测试 CanCan 视图时遇到问题

> ID：10086150
> 
> 赞同：1
> 
> 时间：2012-04-10T09:26:55.403
> 
> 标签：ruby-on-rails, rspec, capybara, cancan, fabrication-gem

我正在测试是否存在由 CanCan 控制的链接：

```
before do
  @author = Fabricate(:author)
  visit new_user_session_path
  fill_in 'Email', :with => @author.email
  fill_in 'Password', :with => @author.password
  click_button 'Sign in'
  visit articles_path
end

it { should have_link 'New article', :href => new_article_path } 
```

这是它正在测试的视图：

```
<% if can? :create, @articles %>
  <%= link_to 'New article', new_article_path %>
<% end %> 
```

当我运行测试时，它失败并产生此错误：

> 失败/错误：它 { should have_link 'New article', :href => new_article_path }
> 
> ```
>  expected link "New article" to return something 
> ```

这很奇怪，因为当我在浏览器中手动测试它时它会起作用。下面是能力等级：

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new # Guest user

    if user.role? :admin
      can :manage, :all
    else
      can :read, :all

      if user.role?(:author)
        can :create, Article
        can :update, Article do |article|
          article.try(:author) == user
        end
        can :destroy, Article do |article|
          article.try(:author) == user
        end
      end
    end
  end
end 
```

有关更多上下文，这是我的用户和 user_fabricator 类：

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  attr_accessible :email, :password, :password_confirmation, :remember_me
  attr_accessible :name, :roles

  has_many :articles, :foreign_key => 'author_id', :dependent => :destroy

  ROLES = %w[admin moderator author]

  def roles=(roles)
    self.roles_mask = (roles & ROLES).map { |r| 2**ROLES.index(r) }.sum
  end

  def roles
    ROLES.reject { |r| ((roles_mask || 0) & 2**ROLES.index(r)).zero? }
  end

  def role?(role)
    roles.include?(role.to_s)
  end
end 
```

用户角色方法基于 Ryan Bates 在他的 RailsCasts 剧集中的方法。这是制造商：

```
Fabricator(:user) do
  email { sequence(:email) { |i| "user#{i}@example.com" } }
  name { sequence(:name) { |i| "Example User-#{i}" } }
  password 'foobar'
end

Fabricator(:admin, :from => :user) do
  roles ['admin']
end

Fabricator(:author, :from => :user) do
  roles ['author']
end 
```

我有一种预感，这与我如何定义能力等级有关，但我找不到哪里出错了。任何帮助都感激不尽。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:09:20.200

在视图中，您在哪里

```
if can? :create, @articles 
```

我猜你正在将一个数组传递给`can?`，这似乎有点奇怪。

据我所知，该`can?`方法需要一个符号或一个类。

尝试用`@articles`or`Article`替换`:articles`。

# asp.net - 文件上传在 asp.net 中无法正常工作

> ID：10086153
> 
> 赞同：1
> 
> 时间：2012-04-10T09:27:11.767
> 
> 标签：asp.net, .net, file-upload

我正在从 asp.net 中的文件上传控件上传文件。在该页面上有一个复选框。用户必须接受条件才能上传文件。我正在检查文件后面的代码，如果未选中显示警报消息的复选框，但问题是在调用该函数之前，该文件将在服务器上缓冲整个文件，然后调用该函数。但我想在临时上传该文件之前检查该情况。

以下是我正在使用的代码 -

```
protected void btn_Upload_Click1(object sender, EventArgs e)
    {
        if (!chkBx_1.Checked )
        {
            dataclass.Message("Please accept all terms before uploading", this);
            return;

        }
        else
        {
            if (FileUpload1.HasFile)
            {
                FileUpload1.SaveAs("path");
            }

        }        
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:38:15.017

在将表单提交到服务器之前，请先使用一些客户端技术（javascript、silverlight 等）检查复选框。

如果你想确定，你可以重新选中服务器端的复选框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T09:43:32.790

`checkbox`在继续之前验证客户端会更容易。看看这篇关于[使用 JQuery 进行相关复选框验证的](http://daveshuck.com/2008/07/16/related-checkbox-validation-with-jquery/)文章。同样在`click`函数中，您可以使用[event.preventDefault()](http://api.jquery.com/event.preventDefault/)

例如。

```
<input id="chbTest" cssClass="clChb" value="1" type="checkbox">
<script language="javascript">
(document).ready(function(){
$("#btnUpload").click(function(event){

    if ($(".clChb").attr("checked") == false){
            event.preventDefault();
            alert('Please accept all terms before uploading ');
    }

});

});
</script> 
```

另外，如果您不太熟悉，可以查看这篇关于[Using jQuery with ASP.NET](http://www.dotnetcurry.com/ShowArticle.aspx?ID=231)的文章， 它向您展示了如何包含必要的脚本库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T10:16:21.203

尝试使用工具箱验证器“RequiredFieldValidator”验证此复选框。

# php - 这个 CSS 菜单在哪里失败？

> ID：10086165
> 
> 赞同：-2
> 
> 时间：2012-04-10T09:27:52.087
> 
> 标签：php, css, html

HTML来了：

```
<ul id="plugins_fullMenu">
<li><a href="/">&nbsp;Főoldal&nbsp;</a></li>
<li><a href="introduce">&nbsp;Bemutatkozás&nbsp;</a></li>
<li><a href="products">&nbsp;Termékek&nbsp;</a></li>
<li><a href="NYETT">&nbsp;Kategóriák&nbsp;</a>
<ul class="plugins_fullMenu first">
<li><a href="asdasdsada">&nbsp;kateg1&nbsp;</a></li>
<li><a href="bxcvxcvxcv">&nbsp;kateg2&nbsp;</a></li>
<li><a href="NYETT">&nbsp;prognyelv&nbsp;</a>
<ul class="plugins_fullMenu ">
<li><a href="3.1">&nbsp;C#&nbsp;</a></li>
<li><a href="3.2">&nbsp;C&nbsp;</a></li>
<li><a href="3.3">&nbsp;C++&nbsp;</a></li>
</ul></li>
</ul></li>
<li><a href="links">&nbsp;Linkek&nbsp;</a></li>
<li><a href="NYETT">&nbsp;Admin felület&nbsp;</a>
<ul class="plugins_fullMenu">
<li><a href="1">&nbsp;a&nbsp;</a></li>
<li><a href="2">&nbsp;b&nbsp;</a></li>
</ul></li>
<li><a href="veg">&nbsp;veg&nbsp;</a></li></ul> 
```

和CSS：

```
#plugins_fullMenu, .plugins_fullMenu, #plugins_fullMenu .plugins_fullMenu li
{
 margin:0px;
 padding:0px;
 display: table;
}
#plugins_fullMenu li
{
 float:left;
 display: inline;
 cursor:pointer;
 list-style:none;
 padding:0px 0px 0px 0px;
 border:1px #000 solid;
 position:relative;
}
#plugins_fullMenu li ul.first
{
 left:-1px; top:100%;
 background-color: red;
}

li, li a
{
 color:#000;
 text-decoration:none;
 padding: 10px 0px 10px 0px;
}
#plugins_fullMenu .plugins_fullMenu li
{
 width:100%;
/* text-indent:10px;
 line-height:30px;
 margin-right:10px;*/
 border-top:1px #000 solid;
 border-bottom:1px #000 solid;
 border-left:none;
 border-right:none;
 background:red;
}
#plugins_fullMenu li a
{
 display:block;
 width:inherit;
 height:inherit;
}

ul.plugins_fullMenu
{
 display:none;
}
#plugins_fullMenu li:hover > a, #plugins_fullMenu li:hover
{
 color:#fff;
 background:green;
}
li:hover > .plugins_fullMenu
{
 display:block;
 position:absolute;
 width:auto;
 top:-1px;
 left:50%;
 z-index:1000;
 border:1px #000 solid;
}
li:hover
{
 position:relative;
 z-index:2000;
} 
```

现在的问题是“admin felület”的两个子菜单重叠了。不应该，怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T09:42:28.843

行。按照建议

你的第一个子菜单类是`plugins_fullMenu first`，而下一个只是`plugins_fullMenu`

# java - iReport 动态参数传递或修剪两行之间的空间

> ID：10086166
> 
> 赞同：1
> 
> 时间：2012-04-10T09:27:53.937
> 
> 标签：java, jasper-reports, ireport

> **可能重复：**
> [如何删除 JasperReports 中文本字段之间的额外空格？](https://stackoverflow.com/questions/10071943/how-to-remove-extra-space-between-textfield-in-jasperreports)

我需要从 ireport 或 java 中删除空参数行。

我为每个参数添加了 print when 条件以检查空值。

如果 null 值出现，则不应显示参数标签和值。

但它显示空白行而不是参数。如何在图像下方修剪 this.chek 以使其相同。

![在此处输入图像描述](../Images/2652c4ce5267a7da0dd2932b52f8535e.png)

需要删除两行之间的整行。如下所示。

![在此处输入图像描述](../Images/34b45e80d2ab3c12279bfb89ce4056f0.png)

我只是将值传递给它的相关参数。所有参数都已在 ireport 中定义，我将使用 java 代码设置值，如下所示

```
parameters.put("EQUI_YIELD_LABEL",basePropertyForm.getPmlEquivYieldPercLabelValue());
parameters.put("EQUI_YIELD",pmlPropertyMasterLk.getPmlEquivYieldPerc()); 
```

怎么做？

请建议..

# javascript - D3 - 如何处理 JSON 数据结构？

> ID：10086167
> 
> 赞同：37
> 
> 时间：2012-04-10T09:27:55.143
> 
> 标签：javascript, json, svg, d3.js

我是 D3 的新手，已经花了几个小时来了解有关处理结构化数据的任何信息，但没有得到积极的结果。我想使用下面的数据结构创建一个条形图。绘制条形（水平），但仅适用于用户“jim”。

```
var data = [{"user":"jim","scores":[40,20,30,24,18,40]},
            {"user":"ray","scores":[24,20,30,41,12,34]}];

var chart = d3.select("div#charts").append("svg")                                   
              .data(data)
              .attr("class","chart")
              .attr("width",800)
              .attr("height",350);

chart.selectAll("rect")    
    .data(function(d){return d3.values(d.scores);})    
    .enter().append("rect")
    .attr("y", function(d,i){return i * 20;})
    .attr("width",function(d){return d;})
    .attr("height", 20); 
```

谁能指出我做错了什么？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-04-10T15:18:45.850

When you [join data](http://bost.ocks.org/mike/join/) to a selection via [selection.data](https://github.com/mbostock/d3/wiki/Selections#wiki-data), the number of elements in your data array should match the number of elements in the selection. Your data array has two elements (for Jim and Ray), but the selection you are binding it to only has one SVG element. Are you trying to create multiple SVG elements, or put the score rects for both Jim and Ray in the same SVG element?

If you want to bind both data elements to the singular SVG element, you can wrap the data in another array:

```
var chart = d3.select("#charts").append("svg")
    .data([data])
    .attr("class", "chart")
    … 
```

Alternatively, use [selection.datum](https://github.com/mbostock/d3/wiki/Selections#wiki-datum), which binds data directly without computing a join:

```
var chart = d3.select("#charts").append("svg")
    .datum(data)
    .attr("class", "chart")
    … 
```

If you want to create multiple SVG elements for each person, then you'll need a data-join:

```
var chart = d3.select("#charts").selectAll("svg")
    .data(data)
  .enter().append("svg")
    .attr("class", "chart")
    … 
```

A second problem is that you shouldn't use [d3.values](https://github.com/mbostock/d3/wiki/Arrays#wiki-d3_values) with an array; that function is for extracting the values of an object. Assuming you wanted one SVG element per person (so, two in this example), then the data for the rect is simply that person's associated scores:

```
var rect = chart.selectAll("rect")
    .data(function(d) { return d.scores; })
  .enter().append("rect")
    … 
```

If you haven't already, I recommend reading these tutorials:

*   [Thinking with Joins](http://bost.ocks.org/mike/join/)
*   [Nested Selections](http://bost.ocks.org/mike/nest/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-17T18:14:09.960

除了 mbostock 的好答案之外，这可能会澄清嵌套方面。

您的数据有 2 度嵌套。您有一个包含 2 个对象的数组，每个对象都有一个整数数组。如果您希望最终图像反映这些差异，则需要为每个图像进行连接。

这是一个解决方案：每个用户由一个组`g`元素表示，每个分数由一个`rect`. 您可以通过以下几种方式做到这一点：要么`datum`在 svg 上使用，然后在`g`每个`g`. 使用`data`on`g`更典型，但这里有两种方法：

**在 svg 上使用数据：**

```
var chart = d3.select('body').append('svg')
  .datum(data)             // <---- datum
  .attr('width',800)
  .attr('height',350)
  .selectAll('g')
  .data(function(d){ return d; })  // <----- identity function
  .enter().append('g')
    .attr('class', function(d) { return d.user; })
    .attr('transform', function(d, i) { return 'translate(0, ' + i * 140 + ')'; })
    .selectAll('rect')
    .data(function(d) { return d.scores; })
    .enter().append('rect')
      .attr('y', function(d, i) { return i * 20; })
      .attr('width', function(d) { return d; })
      .attr('height', 20); 
```

**使用 group ( `g`) 元素上的数据：**

```
var chart = d3.select('body').append('svg')
  .attr('width',800)
  .attr('height',350)
  .selectAll('g')
  .data(data)          // <--- attach directly to the g
  .enter().append('g')
    .attr('class', function(d) { return d.user; })
    .attr('transform', function(d, i) { return 'translate(0, ' + i * 140 + ')'; })
    .selectAll('rect')
    .data(function(d) { return d.scores; })
    .enter().append('rect')
      .attr('y', function(d, i) { return i * 20; })
      .attr('width', function(d) { return d; })
      .attr('height', 20); 
```

同样，您不必创建这些 g 元素，但通过这样做，我现在可以以不同的方式表示用户分数（它们与变换有不同的 y），我还可以为它们赋予不同的样式，如下所示：

```
.jim {
  fill: red;
}
.ray {
  fill: blue;
} 
```

# ruby-on-rails - 安装 Rails 时出错，无法构建 gem 原生扩展

> ID：10086168
> 
> 赞同：2
> 
> 时间：2012-04-10T09:27:58.633
> 
> 标签：ruby-on-rails, ruby, makefile, debian

我知道有几个关于此的主题，但我创建一个新主题的原因是它仍然对我不起作用......

所以这是我的配置：

```
ruby -v : 1.8.7
gem -v : 1.8.21 
```

当我尝试做

```
sudo gem1.8 install rails 
```

我有以下错误：

```
Building native extensions.  This could take a while...
ERROR:  Error installing rails:
        ERROR: Failed to build gem native extension.

        /usr/bin/ruby1.8 extconf.rb
creating Makefile

make
sh: make: not found

Gem files will remain installed in /usr/lib/ruby/gems/1.8/gems/json-1.6.6 for inspection.
Results logged to /usr/lib/ruby/gems/1.8/gems/json-1.6.6/ext/json/ext/generator/gem_make.out 
```

我在 Debian 6.0.4 Squeeze 上运行。

提前感谢您的回答！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T09:37:24.743

正如您的输出所示，您没有 make 命令。在 debian 中安装包*build-essential*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:26:20.320

我认为 gcc 或 c-compiler 未安装或未在环境路径中写入，我在安装 rails 时遇到了同样的问题，但是在安装 gcc 之后，我可以很好地安装 rails。

# c# - 添加对对象的私有引用

> ID：10086170
> 
> 赞同：0
> 
> 时间：2012-04-10T09:27:59.413
> 
> 标签：c#, debugging

我需要添加对 Unit object 的私有引用`_Unit`。附加的是两个类（`Unit`和`Result`）。

我知道我需要下面的代码，但是它会导致错误（如下所列）：

```
// 14\. create new class
class Result : Unit 
```

以下创建`base()`需要两个构造函数的错误：

```
// 17\. Create constructor for the class
public Result(string grade, Unit _Unit) : base(_Unit) 
```

在我的单元类中有两个私有字符串`_Code`和`_Name`. 请询问您是否需要输入任何其他课程代码或作业问题。

```
namespace SIT232_Assignment1
{
  // 14\. create new class
  class Result
  {
    // 15\. Add a private reference to a Unit objectand a private string attributes.
    private string _Grade, _Unit;

    // 16\. Encapsulate the above attributes with public read-only properties
    public string Grade
    {
        get { return _Grade; }            
    }

    // 17\. Create constructor for the class
    public Result(string grade, Unit _Unit) 
    {            
        _Grade = grade;            
    }

    // 18\. create a public read-only property of type bool
    public bool Passed (string grade)
    {
        bool result = true;
        if (_Grade == "N")
            result = false;
        return result;
    }

    // 19\. Create a public static methods 
    public static bool ValidateGrade(string grade)
    {
        bool result = false;
        if (_Grade == "N" || _Grade == "P" || _Grade == "C" || _Grade == "D" || _Grade =="HD")
            result = true;
        return result;            
    }

    // 20\. Define a ToString method
    public override string ToString()
    {
        return String.Format("{0}\t{1}", _Grade);
    }
}

namespace SIT232_Assignment1
{
  // 8\. Create new class
  class Unit
  {
    // 9\. Add private string attributes for the unit code and unit name
    private string _Code, _Name;

    // 10\. Encapsulate the above attributes with public read-only properties.
    public string Code
    {
        get { return _Code; }            
    }                
    public string Name
    {
        get { return _Name; }            
    }     

    // 11\. Create constructor with two string parameters
    public Unit( string code, string name)
    {
        _Code = code;
        _Name = name;
    }

    // 27\. create a private list<>
    private List<Student> _EnrolledStudents = new List<Student>();

    // 28\. Encapsulate the above list with read-only
    public ReadOnlyCollection<Student> EnrolledStudents
    {
        get { return _EnrolledStudents.AsReadOnly(); }
    }

    // 29\. Create a method that accecpts a single parameter
    public void RecordEnrollment(Student student)
    {
        _EnrolledStudents.Add(student);
    }

    // 30\. Create a method that accecpts a single parameter
    public void RemoveEnrollment(Student student)
    {
        _EnrolledStudents.Remove(student);
    }

    // 12\. Define a ToString method
    public override string ToString()
    {
        return String.Format("{0} {1}", _Code, _Name);
    }
} 
```

此外，我得到的另一个我无法完全理解的错误是下面的方法必须是*静态*的，我研究过，使`_Grade` *静态*的属性和属性也可以解决每个人显示的错误`_Grade`，但它仍然显示在第一个？

```
if (_Grade == "N" || _Grade == "P" || _Grade == "C" || _Grade == "D" || _Grade =="HD")

public static bool ValidateGrade(string grade) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:35:42.723

对于你的第一个问题：

您的类`Result`继承自`Unit`并且您的构造函数`Result`调用基类之一。但是，`Unit`只定义了一个需要两个参数（`code`和`name`）的构造函数，因此您`base`对`Result`构造函数的调用需要有两个参数。

但是您可能不想继承，`Unit`而是添加对它的私有引用。在那里你会有类似的东西

```
class Result {

  private Unit _Unit;

  ...

  public Result(..., Unit _Unit)
  {
      this._Unit = _Unit;
      ...
  }
} 
```

您的第二个错误：静态方法只能访问静态字段和属性，因此您无法从静态方法访问实例变量。您只是想验证所提供`grade`的是否在您的范围内，所以只需不要`t refer to the instance variable`_Grade ：

```
public static bool ValidateGrade(string grade)
{
  return (grade == "N" || grade == "P" ...)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T09:34:46.233

您的**Unit**类构造函数需要两个参数。

在**Result**类中调用 Base 时，必须使用两个参数调用它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T09:35:52.867

首先，在您的 Result 类中，_Unit 字段必须是 Unit 类型，而不是字符串。您获得的基本构造函数的错误是因为您在 Unit 类的构造函数中指定了 2 个参数。您必须向 Unit 类添加另一个构造函数，或者将 Result 类的构造函数更改为例如

```
public Result(string grade, Unit _Unit) : base(_Unit.Code, _Unit.Name) 
```

# c++ - 如何在 OSX PlaySoftMidi 示例中增加音量。

> ID：10086176
> 
> 赞同：3
> 
> 时间：2012-04-10T09:28:31.380
> 
> 标签：c++, qt, osx-lion, midi, quicktime

我有一个用 C++ 和 Qt 跨平台库编写的应用程序。它使用 OSX 上的 QuickTime 来播放 MIDI 事件。在 OSX 10.6 上它工作正常。在 OSX 10.7 (Lion) 上，midi 的音量非常低。增加系统音量不是一种选择，因为同一个应用程序也会播放音频，最终声音太大。我已经多次搜索修复，但没有找到可用的。Apple 已发布 10.7.3，但问题仍然存在。请注意，它也存在于系统提供的 QuickTime 播放器中 - 所以它不仅仅是我的代码。

所以我改为使用基于 Apple PlaySoftMIDI 示例的 DLS 合成器接口。结果是完全一样的——Midi 的音量真的很低！我假设我需要更改 DLS 合成器或 DefaultOutput 组件的属性。我的问题是我找不到列出适用于任何 AU 单元组件的属性的文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-02T00:50:34.007

`AudioUnitSetParameter(outSynth, kMusicDeviceParam_Volume, kAudioUnitScope_Global, 0, synthVolume, 0)`;

在 DLS 合成器的决定中设置音量，并使用 10db 的设置修复了问题。

# ios - RestKit：在 RKRequestQueue 中重新排队 RKRequest

> ID：10086179
> 
> 赞同：3
> 
> 时间：2012-04-10T09:28:43.640
> 
> 标签：ios, network-programming, restkit

我正在尝试在我的应用程序中实现上传队列。我把我`RKRequest`的 s 放进去`RKRequestQueue`打电话`[queue start]`。但是，众所周知，网络连接不是永远持续的。我现在使用`RKReachabilityObserver`它来确定何时暂停和恢复我的队列，并且它工作正常（至少现在，但是我听说过 RestKit 中的可达性代码存在一些问题）。这让我可以停止发送新数据，直到网络再次可用。但是当网络连接丢失时，所有活动`RKRequest`的 s 都在发出`- (void)request:(RKRequest *)request didFailLoadWithError:(NSError *)error`，我想，我将能够`RKRequest`再次回到队列中。

所以，我尝试了这个：

```
- (void)request:(RKRequest *)request didFailLoadWithError:(NSError *)error
{
    NSLog(@"Request failed");
    [[request queue] cancelRequest:request];
    [[request queue] addRequest:request];
} 
```

但我在`EXC_BAD_ACCESS`某个地方找到`didFailLoadWithError`了`RKRequest`.

我的问题是：我怎样才能重新排队`RKRequest`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:23:56.063

而不是取消并添加到队列中，请执行以下操作：

```
[request send]; 
```

但最好的解决方案是使用 RKClient，它让事情变得更容易。您不必担心排队。客户端附带 RKRequestQueue 的实例并在幕后执行所有魔术，特别是它将为给定客户端配置的所有请求添加到客户端请求队列并为您分派它们。

# ios - iOS 使用 NSTimers 向选择器发送参数

> ID：10086185
> 
> 赞同：1
> 
> 时间：2012-04-10T09:29:08.980
> 
> 标签：ios, parameters, selector, nstimer

有没有办法通过 NSTimer 向选择器发送参数？

```
myTimer =[NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(removeTheNote:) userInfo:nil repeats:NO];

      - (void)removeTheNote:(NSString*)note
    {
        NSLog(@"Note %@ ----------- REMOVED!",note);
    } 
```

我知道使用：

```
myTimer =[NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(removeTheNote:myNote) userInfo:nil repeats:NO]; 
```

不起作用，所以我问，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T09:39:07.970

您可以`userInfo`为此使用参数：

```
myTimer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(removeTheNote:) userInfo:myNote repeats:NO]; 
```

但是您必须进行`removeTheNote`如下修改：

```
- (void)removeTheNote:(NSTimer *)timer
{
    NSString *note = timer.userInfo;
    NSLog(@"%@", note);
} 
```

# c++ - 在八叉树/四叉树中定位体素的性能

> ID：10086186
> 
> 赞同：1
> 
> 时间：2012-04-10T09:29:09.667
> 
> 标签：c++, performance, algorithm, quadtree, octree

**这是我过去几个小时一直在考虑的事情。这是一个头脑练习。**

所以我今天知道了八叉树是什么！很有意思！我一直在考虑如何实现一个解析为体素的八叉树。

我现在无法解决的最大问题是引用八叉树中的位置。

**免责声明：首先，我将在二维平面中使用四叉树来可视化我的问题。其次，我在这里不理解正确的术语，我将假设八叉树中作为父级的任何细分都是“分支”，而任何只有子级的细分（在这种情况下它解析为体素）是一片树叶”。第三，我要对四叉树的一个分支中的每个空间进行编号，从左到右从上到下 {1,2,3,4}**

假设我有一个定义 16x16 单位空间的四叉树。在位置 [16,16] 我存储了一个体素。

```
4->4->4->4 
```

现在假设我们将一个体素添加到位置 [4,4]。（注意，我们从零开始）

```
1->4->1->1
4->4->4->4 
```

现在假设我想检查 [16,8] 以查看是否存储了体素。使用前面的方法，我们将在技术上遍历这些分支：

```
4->1->1->1 
```

但是 4->1 没有分配任何数据，所以它是空的。（它没有细分，因为它没有在使用中）。

**我的问题变成了这个，我怎样才能快速遍历四叉树找到体素？**

我的第一个也是最简单的方法是以我上面使用的格式沿着分支向下移动。

```
// Pseudo-code
Class Quadtree {
Quadtree Parent;
Quadtree c[4]; // children
};

Quadtree test1;
test1.c[4].c[4].c[4].c[4];
Quadtree test2;
test2.c[1].c[4].c[1].c[1]; 
```

这里的问题是 voxelArray[16][16]、voxelArray[4][4] 或 voxelArray[16][8] 要快得多。使用更大的四叉树 (256x256) 会增加深度（从 4 到 8）。嵌套数组仍然是 2 个内存操作。（注意，对于四叉树，实际上我们将使用访问器的东西并检查以确保孩子存在条件逻辑）

我的第二个想法是将四叉树本身存储为体素。例如，假设我们有一个 2x2 数组，空它看起来像

```
{0, 0, 0, 0} 
```

在位置 [1,1] 我们将添加一个体素，它会变成

```
{0, 0, 0, 1} 
```

如果我们要存储四叉树，它看起来像这样

```
{1/*q*/, 0, 0, 0, 1} 
```

把它带到一个 4x4 和

```
{0/*q*/, 0, 0, 0, 
 0/*q*/, 0, 0, 0, 
 0/*q*/, 0, 0, 0, 
 1/*q*/, 0, 0, 1} 
```

尽管现在您可以直接访问数据，但您已经失去了四叉树的内存紧凑性，您仍然可以执行许多逻辑操作。IMO 仅当您有大面积的 0 和小范围的 1 时，这才会有效。

通过将体素存储在四叉树/八叉树中，您可以在循环遍历所有体素时获得性能，但在直接访问它们时会损失性能。

![在此处输入图像描述](../Images/ccf510c79b80a81d0265ec2f5698184a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:59:32.963

您可以计算一个四键，然后散列每个体素。这个想法是降低维度的复杂性。例如，您可以寻找哈密顿路径或 z 曲线或希尔伯特曲线。这条路径完全穿过平面，但从技术上讲它仍然是一条曲线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T10:31:12.650

这更像是一个扩展的评论而不是一个答案。不过可能对你有帮助。或者它可能不会。你的例子：

```
{0, 0, 0, 0} 
```

没有说明一个空的四叉树，它说明了一个四叉树，其中所有 4 个象限在第一（也是唯一的）级别都具有值 0。这个：

```
{} 
```

说明了一个空的四叉树。这个：

```
{0, 0, 0, {1,0,1,0}} 
```

说明了一个四叉树，其中 3 个象限都是 0，第四个是棋盘（虽然很小）。这个：

```
{{1,{1,0,0,0},0,{1,1,1,{0,0,0,1}}}, 0, 0, {1,0,1,0}} 
```

开始变得棘手，但你现在明白我的意思了。

在某些语言（例如 Lisp、Matlab、Mathematica）中，这些插图可以直接实现和操作。在许多语言中，您会将四叉树实现为指针和/或值的集合。

# lsa - 如何计算“LSA Intro AI Seminar”中的 LSA Word 分数

> ID：10086189
> 
> 赞同：0
> 
> 时间：2012-04-10T09:29:33.890
> 
> 标签：lsa

如果您查看[http://www.cs.nmsu.edu/~mmartin/LSA_Intro_AI_Seminar.ppt](http://www.cs.nmsu.edu/~mmartin/LSA_Intro_AI_Seminar.ppt)，它们会在幻灯片 25 上显示每个单词的计算分数。

我无法找到如何计算此摘要。

最近，我完成了一个 LSA 的实现，可以生成这个 PPT 中的所有其他结果，但不能生成 Slive 25。

我问这个的原因是因为我想用它来说明文档得分高的“主要原因”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:43:35.330

好的; 我决定写这个 powerpoint 的作者（Melanie J Martin 博士），她指出了她所依据的 Deerwester 等人论文的第 406 页；“X帽子”部分。

为了测试它，我写了这个例子来看看我是否可以获得相同的值，并且它有效:)

测试代码：

```
static void XHatTest()
{
    double[,] testT = new double[12, 2], testD = new double[2, 9], testS = new double[2, 2];
    testT[0, 0] = 0.22;
    testT[0, 1] = -0.11;
    testT[1, 0] = 0.20;
    testT[1, 1] = -0.07;
    testT[2, 0] = 0.24;
    testT[2, 1] = 0.04;
    testT[3, 0] = 0.40;
    testT[3, 1] = 0.06;
    testT[4, 0] = 0.64;
    testT[4, 1] = -0.17;
    testT[5, 0] = 0.27;
    testT[5, 1] = 0.11;
    testT[6, 0] = 0.27;
    testT[6, 1] = 0.11;
    testT[7, 0] = 0.30;
    testT[7, 1] = -0.14;
    testT[8, 0] = 0.21;
    testT[8, 1] = 0.27;
    testT[9, 0] = 0.01;
    testT[9, 1] = 0.49;
    testT[10, 0] = 0.04;
    testT[10, 1] = 0.62;
    testT[11, 0] = 0.03;
    testT[11, 1] = 0.45;

    testD[0, 0] = 0.20;
    testD[0, 1] = 0.61;
    testD[0, 2] = 0.46;
    testD[0, 3] = 0.54;
    testD[0, 4] = 0.28;
    testD[0, 5] = 0.00;
    testD[0, 6] = 0.02;
    testD[0, 7] = 0.02;
    testD[0, 8] = 0.08;
    testD[1, 0] = -0.06;
    testD[1, 1] = 0.17;
    testD[1, 2] = -0.13;
    testD[1, 3] = -0.23;
    testD[1, 4] = 0.11;
    testD[1, 5] = 0.19;
    testD[1, 6] = 0.44;
    testD[1, 7] = 0.62;
    testD[1, 8] = 0.53;

    testS[0, 0] = 3.34;
    testS[0, 1] = 0;
    testS[1, 0] = 0;
    testS[1, 1] = 2.54;

    Matrix A = new Matrix(testT), B = new Matrix(testD), C = new Matrix(testS);
    Matrix Result = A * C * B;
    for (int row = 0; row < Result.NoRows; row++)
    {
        for (int col = 0; col < Result.NoCols; col++)
        {
            Console.Write(Math.Round(Result[row, col], 2) + " ");
        }
        Console.WriteLine();
    }
} 
```

# python - 动态http重新登录功能及模块导入python/django

> ID：10086194
> 
> 赞同：1
> 
> 时间：2012-04-10T09:29:55.550
> 
> 标签：python, django, urllib, cookielib

第1部分

我正在编写一个客户端以使用 urllib2、cookielib 和 urllib 远程登录。这是代码：

```
import urllib2 
import urllib
import cookielib
from mysite.settings import LOGIN_URL # see Part 2

login_data = {'username':'user', 'password': 'pass'}

login_data_encoded = urllib.urlencode(login_data)
cj = cookielib.CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
urllib2.install_opener(opener)
response = opener.open(LOGIN_URL, login_data_encoded) 
```

此代码有效，我可以登录。但我想做一个重新登录功能。就像是：

```
def login(username=None, password=None):
    login_data = {}
    login_data['username'] = raw_input('Please provide your username: ')
    login_data['password'] = raw_input('Please provide your password: ')
    return login_data 
```

但如果我这样做：

```
login_data_encoded = urllib.urlencode(login()) 
```

我可以登录一次，但是当我想以其他用户身份登录时，我必须退出解释器。没有办法在同一个脚本中重新登录吗？

第2部分

我正在使用标准设置运行 Django。

```
mysite/
    manage.py
    mysite/
        __init__.py
        settings.py
        urls.py
        wsgi.py
        client/  # Folder I created, not an app 
```

在客户端我有**_ *init* _** .py 和 client.py 但是在 client.py 我做：

```
from mysite import settings 
```

我得到 mysite 模块不存在。我必须创建一个应用程序还是标准 python 导入在 django 中不起作用？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:44:14.150

从客户端，一旦脚本运行并且服务器为您提供经过身份验证的对象（资源），那么只要会话存在，您就可以与它进行交互，除非您调用`Logout`url 然后使用其他凭据再次登录。

Python 导入适用于所有 Python 应用程序。看起来在您的目录结构中，您可以尝试导入父目录，将其保持在 manage.py 级别，并且您的导入应该可以工作。或者对于您的情况，重组以便导入从同一级别调用或使用相对导入。

# javascript - 在 Javascript 中执行三角函数

> ID：10086196
> 
> 赞同：3
> 
> 时间：2012-04-10T09:30:20.473
> 
> 标签：javascript, trigonometry

如何在 Javascript 中执行以下数学问题：

```
Tan(x) = 450/120;
x      = 75;
// In my calculator I use tan^-1(450/120) to find the answer
// How do I perform tan^-1 in javascript??? 
```

我的 javascript 代码输出不正确的结果：

```
var x = Math.atan(450/120);
alert(x); // says x = 1.3101939350475555

// Maybe I am meant to do any of the following...
var x = Math.atan(450/120) * (Math.PI/2); // still wrong answer
var x = Math.tan(450/120);  // still wrong answer 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T09:40:48.743

```
var x = Math.atan(450/120); 
```

以弧度为单位给出 75 度的答案，即：1.3101939350475555

要获得正确答案，只需转换为度数：

```
var x = Math.atan(450/120) * (180/Math.PI);
alert(x); // says x is 75.06858282186245 
```

# java-me - 在 lwit 中两种形式的转换之间显示信息/广告

> ID：10086199
> 
> 赞同：0
> 
> 时间：2012-04-10T09:30:28.617
> 
> 标签：java-me, lwuit

我正在使用 Lwuit/java-me 在移动设备上制作一个应用程序。我在两个表格的交易之间实施广告/信息表格时遇到问题。广告/信息屏幕应仅停留 5 秒钟，然后下一个后续屏幕应自动显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T04:40:13.623

您是否使用了 GUI 构建器？你是如何展示表格的？

一种简单的方法是创建一个包含所有详细信息的广告表单，然后只显示它而不是显示下一个表单（在构建它时给它实际的下一个表单）。

在广告表单中注册一个动画，测量 5 秒以移动到下一个表单：

```
adForm.registerAnimation(new Animation() {
    public void paint(...) { 
        // empty
    }
    public boolean animate() {
         if(fiveSecondsPasssed) {
             showNextForm();
         }
         return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T11:22:07.987

您必须显示一个`Dialog`between `Forms`。使用方法对此`Dialog`设置超时`setTimeout`，它将自动处理

# ruby-on-rails - 用户和帖子协会

> ID：10086203
> 
> 赞同：-1
> 
> 时间：2012-04-10T09:30:36.603
> 
> 标签：ruby-on-rails

请我尝试创建一个应用程序，我可以在其中发布像 twitter 一样的帖子，但我是要发布在各自帖子下的用户名

我的 Post_controller 看起来像这样

```
def index
    @posts = Post.all(:order => "created_at DESC")
    @users = User.find(:all)
    #@user_id = current_user.find(params[:id])

    respond_to do |format|
      format.html
    end
 end

def create
    @post = current_user.posts.create(:message => params[:message])
    @user.id = current_user.username
end 
```

模型都具有正确的关联，并且表在 User 表上以 User_id 作为主要，在 Post 表上以 Foreign 为主，我如何创建一种方法来让我的索引视图显示帖子和名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:33:56.460

您可以在 index.html.erb 中执行此操作

```
<% @posts.each do |p| %>
  <%= p.id %>
  <%= p.text %>
  <%= p.user.name %>
<% end %> 
```

显示帖子和所属用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T12:37:02.647

嘿首先删除表中的所有数据....

然后重新启动您的服务器，然后它将永远不会显示该错误

# c# - c#函数中的可选参数

> ID：10086204
> 
> 赞同：1
> 
> 时间：2012-04-10T09:30:39.710
> 
> 标签：c#, asp.net-mvc

我必须在我的 asp.net mvc 项目的模型中使用方法。

```
public JsonResult GetProductsByDepList(string depID)
{
  JsonResult jr = new JsonResult();
  var _product = from a in DataContext.GetProductsByDep(Convert.ToInt32(depID))
  select new { ID = a.ID, ProName = a.Name };
  jr.Data = _product.ToList();
  jr.JsonRequestBehavior = JsonRequestBehavior.AllowGet;
  return jr;
 }

 public JsonResult GetProductByCatList(string depID, string catID)
 {
   JsonResult jr = new JsonResult();
   var _product = from a in   
   DataContext.GetProductsByCat(Convert.ToInt32(depID),Convert.ToInt32(catID))
   select new { ID = a.ID, ProName = a.Name };
   jr.Data = _product.ToList();
   jr.JsonRequestBehavior = JsonRequestBehavior.AllowGet;
   return jr;
 } 
```

我想将这两种方法结合起来，除了函数的参数外，它们的工作原理相同。

请有任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T09:33:16.607

使用[可选参数](http://msdn.microsoft.com/en-us/library/dd264739.aspx)：

```
public JsonResult GetProductByCatList(string depID, string catID = "0") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T09:33:03.337

```
 public JsonResult GetProductByCatList(string depID, string catID = "-1")
 {
   //common shared code
   return jr;
 } 
```

假设默认`-1`值为`catID`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T09:33:47.457

你可以试试：

```
public JsonResult GetProductByCatList(string depID, string catID = null)
{
  JsonResult jr = new JsonResult();
  if (String.IsNullOrEmpty(catID))
  {
      var _product = from a in DataContext.GetProductsByDep(Convert.ToInt32(depID))  
      select new { ID = a.ID, ProName = a.Name };
      jr.Data = _product.ToList();      
  } else {
      var _product = from a in   
      DataContext.GetProductsByCat(Convert.ToInt32(depID),Convert.ToInt32(catID))
      select new { ID = a.ID, ProName = a.Name };
      jr.Data = _product.ToList();      
  }
  return jr;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-10T09:51:05.617

你可以这样尝试：

```
 public JsonResult GetProductsByDepList(string depID)
   {
       return GetProductByCatList(depID, null);
   }

   public JsonResult GetProductByCatList(string depID, string catID)
   {
       JsonResult jr = new JsonResult();
       var _product = null;
       if (!string.IsNullOrEmpty(catID))
       {
           _product = from a in   
               DataContext.GetProductsByCat(Convert.ToInt32(depID),Convert.ToInt32(catID))
               select new { ID = a.ID, ProName = a.Name };
       }
       else
       {
           _product = from a in DataContext.GetProductsByDep(Convert.ToInt32(depID))
               select new { ID = a.ID, ProName = a.Name };
       } 

       jr.Data = _product.ToList();
       jr.JsonRequestBehavior = JsonRequestBehavior.AllowGet;
       return jr;
   } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-10T09:36:51.093

从 4.0 版本开始提供默认参数。另外，请阅读 MS [http://blogs.msdn.com/b/csharpfaq/archive/2004/03/07/85556.aspx的这篇文章](http://blogs.msdn.com/b/csharpfaq/archive/2004/03/07/85556.aspx)

# mysql - 多对多关系的 CREATE TABLE 上的 MySQL 错误

> ID：10086210
> 
> 赞同：3
> 
> 时间：2012-04-10T09:30:57.157
> 
> 标签：mysql

我对简单的 CREATE TABLE 查询有疑问。我有两个表“'resort'（带有resortID和resortName）和'season'（带有resortID和resortName）在多对多关系中。我正在尝试使用以下两个查询之一创建连接表resort_season：

```
CREATE TABLE resort_season (
resortID MEDIUMINT UNSIGNED NOT NULL,
seasonID MEDIUMINT UNSIGNED NOT NULL,
FOREIGN KEY (resortID) REFERENCES resort (resortID),
FOREIGN KEY (seasonID) REFERENCES season (seasonID),
PRIMARY KEY (resortID, seasonID) NOT NULL
);

CREATE TABLE resort_season (
resortID MEDIUMINT UNSIGNED NOT NULL FOREIGN KEY REFERENCES resort (resortID),
seasonID MEDIUMINT UNSIGNED NOT NULL FOREIGN KEY REFERENCES season (seasonID),
PRIMARY KEY (resortID, seasonID) NOT NULL
); 
```

这两个查询都给了我一个错误（在这种情况下是第二个查询） `"You have an error in your syntax; check manual....for right syntax to use near'FOREIGN KEY REFERENCES resort (resortID), seasonID MEDIUMINT UNSIGNED NOT NULL F' at line 2"`：。

我究竟做错了什么？这让我很头疼，因为我不明白为什么会出错。

如果我只是这样做

```
CREATE TABLE resort_season (
resortID MEDIUMINT UNSIGNED NOT NULL,
seasonID MEDIUMINT UNSIGNED NOT NULL,
PRIMARY KEY (resortID, seasonID) NOT NULL
); 
```

然后它工作正常并创建表。我不确定这张桌子是否会有效地引用表格度假村和季节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:43:58.437

从主键定义中删除 NOT NULL -

```
CREATE TABLE resort_season(
  resortID MEDIUMINT UNSIGNED NOT NULL,
  seasonID MEDIUMINT UNSIGNED NOT NULL,
  FOREIGN KEY (resortID) REFERENCES resort (resortID),
  FOREIGN KEY (seasonID) REFERENCES season (seasonID),
  PRIMARY KEY (resortID, seasonID)
); 
```

# c# - 由于请求参数，我可以更改 web.config 连接字符串吗？

> ID：10086213
> 
> 赞同：1
> 
> 时间：2012-04-10T09:31:09.137
> 
> 标签：c#, .net

像这样的东西：

```
if(Request["connectionToUse"] + "" == "constr1")
    // use a connection string 1
else 
    // use a connection string 2 
```

.NET 上可行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:38:43.267

在您的中有两个连接字符串，`web.config`只需引用您要使用的一个：

```
<connectionStrings>
   <add 
      name="conn1" connectionString="..." 
      providerName="System.Data.SqlClient"
   />
   <add 
      name="conn2" connectionString="..." 
      providerName="System.Data.SqlClient"
   />
</connectionStrings>

if(Request["connectionToUse"] + "" == "constr1")
    return ConfigurationManager.ConnectionStrings["conn1"];
else 
    return ConfigurationManager.ConnectionStrings["conn2"]; 
```

* * *

更新：

我不建议`web.config`根据传入的参数写信给你——这不仅看起来会导致安全问题（特别是如果你只是*使用*传入的参数）。

对 的任何更改都`web.config`将重置应用程序，导致它的所有用户退出 - 应用程序池在文件更改时重新启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T09:43:26.870

编辑：这可能是一个非常糟糕的主意，正如 Oded 所说，但如果你真的想这样做：

根据请求参数修改webconfig看下面的例子：

```
string strDevConnection = @"Data Source=DEVELOPMENT\SQLEXPRESS;Initial Catalog=sqlDB;Persist Security Info=True;User ID= ;Password= ";

string strLiveConnection = @"Data Source=PRODUCTION\SQLEXPRESS;Initial Catalog=sqlDB;User id= ;password= ";

Configuration myWebConfig = System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration("~");
if (Request["connectionToUse"] + "" == "constr1")

{

myWebConfig.ConnectionStrings.ConnectionStrings["constr1"].ConnectionString = strDevConnection; //constr1 is the name of the current connectionstring in the web.config

}

else

{

myWebConfig.ConnectionStrings.ConnectionStrings["constr2"].ConnectionString = strLiveConnection;

}
 myWebConfig.Save(); //Save the changes to web config 
```

# dart - 飞镖，编辑器，断点，调试动态网页

> ID：10086215
> 
> 赞同：3
> 
> 时间：2012-04-10T09:31:19.700
> 
> 标签：dart

最新的 dart 编辑器支持调试和断点，它可以在静态 HTML 页面中工作。我有一个现有的后端 (Django)，当我将“启动目标”设置为 URL 时，我无法让调试器工作。

我收到此错误：

```
An internal error occurred during: "Launching DartEditor".
java.lang.NullPointerException 
```

有任何想法吗？

* * *

好的，我可以在 Chromium 中使用调试器。显然，您必须重新加载页面才能在 Chromium 中查看 dart 脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-14T13:45:45.530

这就像旧版本编辑器中的错误。在标记为已修复的问题跟踪器中有[一些类似的情况](https://code.google.com/p/dart/issues/detail?id=3510)。升级到最新的编辑器肯定会解决它！

# javascript - 跨域 AJAX

> ID：10086216
> 
> 赞同：0
> 
> 时间：2012-04-10T09:31:21.887
> 
> 标签：javascript, ajax, web-services, cross-domain

据我了解，出于安全原因，跨域 AJAX 调用是[不可能的](https://stackoverflow.com/questions/3674828/cant-make-a-crossdomain-ajax-call)。

我已经明白，虽然可以使用 JSON-P 来做到这一点。

我的问题：为什么禁止跨域 AJAX 调用，但实际上可能以不太实际的方式？只授权它会更简单。

对于那些简单的场景，你应该怎么做：

*   通过调用 Google 地图网络服务对位置进行地理编码
*   通过其网络服务获取 Flickr 图像
*   ajax 到不同的域，但它是同一个应用程序（例如服务器场？）
*   ...（这些只是示例）

如果我必须用服务器端脚本来包装/代理这些调用，那就太无聊了，而且会浪费时间……你最终不能制作一个完整的 Javascript 应用程序吗？（如果你想使用外部网络服务，我的意思是）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T09:34:03.563

> 为什么禁止跨域 AJAX 调用

你登录到你的银行，对吧？好的，我将向您的银行发出 Ajax 请求并读取您的帐号、排序代码等。

> 对于那些简单的场景你应该怎么做

*   服务器端代理
*   JSON-P
*   CORS

> 如果我必须用服务器端脚本来包装/代理这些调用，那会很无聊而且会浪费时间

如果我们不必担心安全性，许多事情会变得更容易。我们不需要门锁、账户密码等。

# java - Spring JSP 绑定地图

> ID：10086222
> 
> 赞同：0
> 
> 时间：2012-04-10T09:31:46.463
> 
> 标签：java, jsp, binding, spring-mvc

我在 spring mvc 2 中有一个表单。我的命令类包含一个我需要绑定的复杂映射。

```
Map<String, Map<String, Class3>> class2Map; 
```

在 JSP 中，我可以遍历命令类并`<c:out>`映射 Class3 的值，即 nameToGet 和 anyElement3。但是当我尝试将它与表单绑定时

我在用

```
<c:forEach items="${class1.class2List}" var="item" varStatus="itemRow">
   <c:forEach var="map" items="${item.class2Map}" varStatus="mapRow">
      <c:forEach var="innerMap" items="${map.value}" varStatus="innerMapRow"> 
```

用于迭代。我像绑定一样

```
<form:input path="class2List[${itemsRow.index}].class2Map[${mapRow.index}].value[0].anyElement3" /> 
```

它抛出异常

```
org.springframework.beans.NotReadablePropertyException: Invalid property 'class1[0].class2Map[0].value[0].anyElement3' of bean class [Class1]: Bean property 'class1[0].class2Map[0].value[0].anyElement3' is not readable or has an invalid getter method: Does the return type of the getter match the parameter type of the setter? 
```

我的课程看起来像

```
Class1 (Command Class)
List<Class2> class2List;
String anyElement1;

Class2
Map<String, Map<String, Class3>> class2Map;
String anyElement2;

Class3
Map<String, Class3> class3Map;
String nameToGet;
String anyElement3; 
```

我成功绑定了命令类的其他数据成员。如何将此地图绑定到 Spring Form？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:17:40.993

[使用这里](http://blog.vergiss-blackjack.de/2010/04/iterating-over-nested-objects-in-a-spring-form/)提到的想法，你可以试试这个：

```
class1[${itemRow.index}].class2Map['${mapRow.current.key}'].anyElement3 
```

这个想法是在 for 循环内`mapRow`，现在它正在遍历 Map，所以每个都`Map.Entry`应该可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:43:26.840

确保 class1 每个字段都有 getter 和 setter。

```
public Class1{
    String nameToGet;
    String anyElement3;

    public String getNameToGet(){
       return nameToGet;
    }

    public void setNameToGet(String nameToGet){
       this.nameToGet = nameToGet;
    }

    public String getAnyElement3(){
       return anyElement3;
    }

    public void setAnyElement3(String anyElement3){
       this.anyElement3 = anyElement3;
    }
} 
```

还应该有类似的 getter 和 setter：

```
Map<String, Map<String, Class1>> mapName; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T10:11:51.100

在您的表单支持对象中，创建您希望绑定的对象。

```
public class Class1Form{
     private String element3;
     //Other properties needed in your form.

     public String getElement3(){
          return element3;
     }

     public setElement3(String element){
          element3 = element;
     }
     //Other getters and setters.
} 
```

# iphone - 如何显示没有边框的 UIBarButtonItem？

> ID：10086223
> 
> 赞同：2
> 
> 时间：2012-04-10T09:31:55.870
> 
> 标签：iphone, objective-c, uinavigationcontroller, interface-builder, uibarbuttonitem

在 IB 中，我可以选择 UIBarButtonItem，将其设置为普通、自定义并应用图像，它在 UIToolbar 或 UINavigationBar 中看起来很好。

当我尝试在代码中执行此操作时，我得到一个边框：

```
backButton = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"arrowBack"] 
                                                  style:UIBarButtonItemStylePlain 
                                                 target:self 
                                                 action:@selector(backButtonClicked:)]; 
```

如何获得没有边框的 UIBarButtonItem？我希望它是普通的和定制的

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T09:38:55.023

这对我有用（leftButton 的示例）：

```
 UIButton *bt=[UIButton buttonWithType:UIButtonTypeCustom];
 [bt setFrame:CGRectMake(0, 0, 15, 30)];
 [bt setImage:[UIImage imageNamed:@"backBT"] forState:UIControlStateNormal];
 [bt addTarget:self action:@selector(popViewController:) forControlEvents:UIControlEventTouchUpInside];
 UIBarButtonItem *leftButton=[[UIBarButtonItem alloc] initWithCustomView:bt];
 self.navigationItem.leftBarButtonItem=leftButton; 
```

# iphone - “_OBJC_CLASS_$_ATReachability”，引用自错误

> ID：10086224
> 
> 赞同：1
> 
> 时间：2012-04-10T09:32:00.910
> 
> 标签：iphone, ios, addthis

我已经在我的应用程序中实现了 Reachability.h 类。

当我`AddThis`为 iOS 实现此错误时：

> “_OBJC_CLASS_$_ATReachability”，引用自：
> libAddThis.a(ATGenericUtility.o) 中的 Objc-class-ref
> 未找到架构 armv6
> Collect2 的符号：ld 返回 1 个退出状态

这是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T09:53:06.893

1）您确定正在为您的项目编译 ATReachability.m（在右侧的文件属性中，确保为您的项目目标选中该框 - 我经常不小心只将文件添加到我的单元测试目标，而不是主应用程序！）

2) 'architecture armv6' - 你在为 armv7 和 armv6 编译 ATReachability 吗？查看项目的构建设置，应该有一个“架构”部分 - 确保其中包含 armv6。

# javascript - 为什么 eval 在这个片段中不起作用？

> ID：10086226
> 
> 赞同：0
> 
> 时间：2012-04-10T09:32:02.407
> 
> 标签：javascript, html, json

我想知道以下 JavaScript 代码有什么问题 -

```
<html>
<script type="text/javascript">

var p = eval('new { "Color":"Red"}');

alert(p.Color);
</script>
</html> 
```

它给了我JavaScript错误-

```
Message: Object doesn't support this action
Line: 4
Char: 1
Code: 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T09:42:50.310

代码有几个问题；

首先你告诉脚本创建新的东西，但你没有告诉它要创建*什么*。如果您没有创建自定义对象，那么您正在创建一个 Object 对象，因此您需要告诉它：

```
var p = eval('new Object()'); 
```

现在您正在创建一个新的 Object 对象，您可以配置 Color 属性：

```
var p = eval('new Object({"Color":"Red"})'); 
```

[这是一个工作小提琴](http://jsfiddle.net/7Dcr2/)

但是，你为什么首先使用 eval ？[评估是邪恶的](http://javascript.crockford.com/code.html)！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T09:40:45.233

> 为什么 eval 在这个片段中不起作用？

因为您不能将[`new`运算符*^([MDN])*](https://developer.mozilla.org/en/JavaScript/Reference/Operators/new)用于对象，只能用于函数。

`{"Color":"Red"}`被评估为对象文字而不是函数。

如果要解析 JSON，请使用[`JSON.parse` *^([MDN])*](https://developer.mozilla.org/En/Using_native_JSON)。另请参阅[JSON.parse 与 eval()](https://stackoverflow.com/questions/1843343/json-parse-vs-eval)。

或者直接创建对象文字，如果它是静态的：

```
var p = {"Color":"Red"}; 
```

* * *

要使其与`eval`（[无论如何都应避免使用](https://stackoverflow.com/questions/2571401/why-exactly-is-eval-evil)）一起使用，请删除`new`文字并将其括在括号中：

```
var p = eval('({"Color":"Red"})'); 
```

[括号是必要的](https://stackoverflow.com/questions/3820488/why-do-we-need-to-add-parentheses-to-eval-json)，因为否则 JavaScript 将评估`{"Color":"Red"}`为一个*块*并引发错误。

# java - xstream 序列化堆空间

> ID：10086227
> 
> 赞同：1
> 
> 时间：2012-04-10T09:32:06.483
> 
> 标签：java, xml, xstream, filewriter

我正在使用 xstream 将对象序列化为 xml 作为文件。我要序列化的对象非常大，由一个非常复杂的树结构组成。为此，我使用以下代码：

```
 XStream xStream = new XStream();

    xStream.omitField(Stat.class, "sources");
    String XMLFilename = "XML-" + dateString + ".xml";

    FileOutputStream outputStream = null;

    Writer writer = null;

    try {
        outputStream = new FileOutputStream(currentWorkPath+XMLFilename);
        writer = new OutputStreamWriter(outputStream, Charset.forName("UTF-8"));
        xStream.toXML(ss, writer);

    } catch (Exception exp) {
        log.error(null, exp);
    } finally {
        writer = null;
        outputStream = null;
    } 
```

代码工作正常，但是在序列化非常大的对象时出现内存错误 java 堆空间不足。有什么方法可以防止这种情况吗？随着对象的增长，是否可以动态构建 xml？

或者可能是其他一些 xml 序列化库？

例外：

```
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
    at java.util.HashMap.addEntry(Unknown Source)
    at java.util.HashMap.put(Unknown Source)
    at com.thoughtworks.xstream.core.util.ObjectIdDictionary.associateId(ObjectIdDictionary.java:91) 
```

谢谢，詹姆斯福特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T13:31:35.197

您在类路径上有 Xpp3 库吗（例如在服务器上）？类路径上没有 Xpp3（或其他类似库）的 Java 5 和更低版本上的 XStream 使用 DOM 驱动程序。没有任何例子我只能这样怀疑。

# php - CodeIgniter 和 DataMapper ORM

> ID：10086228
> 
> 赞同：1
> 
> 时间：2012-04-10T09:32:12.110
> 
> 标签：php, codeigniter, codeigniter-datamapper

我正在使用示例错误应用程序中的基本登录管理器，但我的主管理控制器现在有大约 25 个函数，并且在我需要调用的每个函数的开头

```
 $this->login_manager->check_login(1); 
```

是否有一种简单的方法可以在每个函数中自动完成此检查，或者我是否必须沿着 MY_Controller 路由然后从中继承。

我当前的构造函数看起来像这样

```
class Admin extends CI_Controller
 {

function __construct()
{
    parent::__construct();
    $this->load->library('login_manager', array('autologin' => FALSE, 'required_group' => 1));

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:47:48.973

您可以在任何框架中在控制器登录之前和之后执行登录。要实现这一点，您可以选择以下选项之一：

*   [http://codeigniter.com/user_guide/general/hooks.html](http://codeigniter.com/user_guide/general/hooks.html)

    ```
    $hook['pre_controller'][] = array(
      'class' => 'MyClass',
      '功能' => '我的功能'，
      '文件名' => 'Myclass.php',
      '文件路径' => '钩子'，
      'params' => array('beer', 'wine', 'snacks')
    );

    $hook['pre_controller'][] = array(
      'class' => 'MyOtherClass',
      '功能' => '我的其他功能',
      '文件名' => 'Myotherclass.php',
      '文件路径' => '钩子'，
      '参数' => 数组（'红色'，'黄色'，'蓝色'）
    );

    ```

*   或者您可以选择配置过滤器：[http ://codeigniter.com/wiki/Filters_system](http://codeigniter.com/wiki/Filters_system)

*   或者最后一个简单的方法： http: [//forrst.com/posts/CodeIgniter_before_after_controller_action-Diy](http://forrst.com/posts/CodeIgniter_before_after_controller_action-Diy)

希望它对你有用:)

# javascript - javascript如何在服务器上打开一个exe

> ID：10086229
> 
> 赞同：1
> 
> 时间：2012-04-10T09:32:12.623
> 
> 标签：javascript, exe

我在我的网站上添加了一些功能，我想打开一些使用 vb2010 制作的 exe，这些 exe 将在我的本地服务器上，但该网站将托管在服务器中，有些是在世界上。

要执行 exe，我只需要在站点上添加 boton，并在我的服务器上添加文件位置的路径？像

```
 C:\folder\folder\myfile.exe 
```

还是有其他更简单的方法来做到这一点？

谢谢任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:36:01.333

这么说吧，如果你有这样的按钮，有什么能阻止我经过`rm /s/q C:`，看着你的整个硬盘消失？

取而代之的是，有一个包含一个`<select>`元素的表单，该元素列出了您要作为键运行的程序，例如`myfile`，然后将其提交给服务器。然后让服务器验证密钥是否被允许，如果允许，则运行相应的程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:39:03.400

这是不可能的，因为它根本不安全。您必须在服务器端执行此操作。在可以调用 exe 文件的 web 服务器上调用 webservice 函数。

参考[在此处输入链接描述](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T09:39:13.517

根据您的问题，我了解 Web 服务器和 exe 位于两个不同的网络中。我假设两台服务器都无法相互访问。如果是这种情况，则在页面上单击按钮时无法执行 exe。

如果 exe 在客户端上，那么由于安全沙箱模型，页面显示的位置也不允许您执行它。

# python - 为什么 numpy.abs 在 complex64 上比在 windows 32 位下的 complex128 慢得多？

> ID：10086230
> 
> 赞同：1
> 
> 时间：2012-04-10T09:32:20.560
> 
> 标签：python, numpy

`numpy.complex64`在我的 32 位 Windows Vista 机器上，与数组相比，在获取相当大的数组的绝对值时，我注意到显着 (5x) 减速`numpy.complex128`。

```
>>> import numpy
>>> a = numpy.random.randn(256,2048) + 1j*numpy.random.randn(256,2048)
>>> b = numpy.complex64(a)
>>> timeit c = numpy.float32(numpy.abs(a))
10 loops, best of 3: 27.5 ms per loop
>>> timeit c = numpy.abs(b)
1 loops, best of 3: 143 ms per loop 
```

显然，两种情况下的输出是相同的（对于操作精度）。

我在我的 Ubuntu 64 位机器上没有注意到同样的效果。

对此有合理的解释吗？

这是所有窗户共有的东西吗？

# python - 整数作为 Mongodb 中 Map Reduce 的键

> ID：10086233
> 
> 赞同：2
> 
> 时间：2012-04-10T09:32:42.140
> 
> 标签：python, mongodb

我在 Mongodb 中有一个集合，如下所示：

```
{_id: {"thread": "abc"}, "value": 1}
{_id: {"thread": "cdf"}, "value": 1}
{_id: {"thread": "edf"}, "value": 1} 
```

我尝试映射reduce，尝试键入值，希望输出如下：

```
{id_: {"value": 1}, value: 3} 
```

地图：

```
function() {
var key = {value : this.value};
emit(key, 1);
}; 
```

减少：

```
function(key, values) {
var sum = 0;
values.forEach(function(value) {
sum += value;});
return sum;
}; 
```

**编辑**原始问题： Map Reduce 不起作用不再有效。这是一个连接问题，而不是 Map Reduce。感谢大家提供额外的信息。

不幸的是，这不起作用，并给出了一些输出，如下所示：

```
{u'_id': {u'value': None}, u'value': 1160856.0} 
```

不能键入整数值吗？我阅读了 Mongodb 上的 map reduce 文档，但找不到与键的数据类型相关的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T09:52:35.427

如果你从 MongoDB shell 运行你的 map/reduce，你可能会遇到一个特性/问题（对此有不同的看法；）），其中 shell 将所有整数类型转换为双精度并存储它们。除了从 shell 之外的其他东西调用你的 m/r 之外，目前没有真正的解决方法。也就是说，如果我运行你的 m/r，我会得到这个：

```
{
        "_id" : {
                "value" : 1
        },
        "value" : 3
} 
```

这似乎是你想要做的。我不确定是不是。确保您正在运行最新的数据库版本等。

# teamcity - 访问 TeamCity 构建评论

> ID：10086235
> 
> 赞同：4
> 
> 时间：2012-04-10T09:32:44.830
> 
> 标签：teamcity

继续回答这个问题： [是否可以在团队城市构建中添加自由文本注释？](https://stackoverflow.com/questions/4780955/is-it-possible-to-add-a-free-text-note-to-a-team-city-build)

在 TeamCity 自定义构建对话框中，有一个“构建评论”字段。

有没有办法从构建中访问它？作为系统属性还是环境变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:09:39.373

据我所知，构建注释不会从您的构建脚本公开或访问，但是您可以创建可访问的自定义构建参数。您可以创建系统属性或环境变量，它们都可以在您的构建脚本中访问。有关完整详细信息，请参阅[有关自定义参数的 TeamCity 文档。](http://confluence.jetbrains.net/display/TCD7/Defining+and+Using+Build+Parameters+in+Build+Configuration#DefiningandUsingBuildParametersinBuildConfiguration-UsingSystemPropertiesinBuildScripts)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-20T21:13:35.387

也许这个问题已经过时了，但我会回答以防万一其他人感兴趣。

可以使用 TeamCity REST API 检索评论：

> [http://teamcity.codebetter.com/guestAuth/app/rest/changes?locator=build:id:216886&fields=change(id,version,href,username,date,webUrl,comment)](http://teamcity.codebetter.com/guestAuth/app/rest/changes?locator=build:id:216886&fields=change(id,version,href,username,date,webUrl,comment))

如果您从 C# 项目中需要它，您可以考虑使用[FluentTc](https://www.nuget.org/packages/fluenttc)库：

```
IBuild build = new RemoteTc()
   .Connect(_ => _.ToHost("teamcity.codebetter.com").AsGuest())
   .GetLastBuild(
       having => having.Id(216886),
       with => with.IncludeChanges(and => and.IncludeComment())); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-29T03:49:58.447

实现它的一种方法如下：

```
http://[host]:[port]/httpAuth/app/rest/builds/id:<internal build id> 
```

这将返回带有构建参数的 xml，注释将是子节点之一。

# css - 占位符文本超出 Safari 的文本区域？

> ID：10086236
> 
> 赞同：6
> 
> 时间：2012-04-10T09:32:49.537
> 
> 标签：css, forms, html, safari, placeholder

如果您在 safari（版本 5+）中打开这些链接，您会看到问题

[http://wufoo.com/html5/attributes/01-placeholder.html](http://wufoo.com/html5/attributes/01-placeholder.html)

[http://jsfiddle.net/9gQZ2/](http://jsfiddle.net/9gQZ2/)

任何人都有一个不错的解决方案来使文本区域中的换行符正确吗？

编辑：向 Apple 提交了一份关于此的错误报告。

# jsf - Eclipse JSF 注释托管 bean 代码完成

> ID：10086237
> 
> 赞同：1
> 
> 时间：2012-04-10T09:33:00.873
> 
> 标签：jsf, javabeans, glassfish-3, managed, code-completion

我的问题是在这个论坛上提出的，但答案并不能完全满足我的情况。在 JSF 2.0 中，可以在 bean 注释中声明`@ManagedBean`or`@ManagedBean(name="blah")`和 bean 的范围，而不是在其中声明它们并在`faces-config.xml`其中使用 bean`*.xhtml, *.jsp`等。

但是，这是我的问题，如果您声明使用注释，则 Eclipse 中的代码完成不起作用。它只有在声明 bean 时才有效`faces-config.xml`。论坛中的另一个帖子确实给出了答案：JBoss Tools，但我找不到它是否适用于 GlassFish。

我使用 Eclipse Indigo Java EE 和 GlassFish。如果我安装它应该可以工作吗？或者还有另一种更兼容的方式。

感谢您的时间和愉快的编码！

* * *

细节：

```
Cannot complete the install because of a conflicting dependency.
  Software being installed: JBoss Tools JSF 3.3.0.v20120302-0331-H69-Beta1 (org.jboss.tools.jsf.feature.feature.group 3.3.0.v20120302-0331-H69-Beta1)
  Software currently installed: Oracle GlassFish Server Tools 1.8.0.201110200920 (oracle.eclipse.tools.indigo.glassfish.feature.group 1.8.0.201110200920)
  Only one of the following can be installed at once: 
    Server UI 1.1.305.v20110511 (org.eclipse.wst.server.ui 1.1.305.v20110511)
    Server UI 1.1.207.v20110119 (org.eclipse.wst.server.ui 1.1.207.v20110119)
    Server UI 1.3.0.v20120210_1439 (org.eclipse.wst.server.ui 1.3.0.v20120210_1439)
    Server UI 1.1.306.v20110823_1704 (org.eclipse.wst.server.ui 1.1.306.v20110823_1704)
    Server UI 1.1.209.v20110914_1539 (org.eclipse.wst.server.ui 1.1.209.v20110914_1539)
  Cannot satisfy dependency:
    From: Oracle GlassFish Server Tools 4.1.0.201110200920 (oracle.eclipse.tools.glassfish 4.1.0.201110200920)
    To: bundle org.eclipse.wst.server.ui [1.1.305,1.2.0)
  Cannot satisfy dependency:
    From: Oracle GlassFish Server Tools 1.8.0.201110200920 (oracle.eclipse.tools.indigo.glassfish.feature.group 1.8.0.201110200920)
    To: oracle.eclipse.tools.glassfish [4.1.0.201110200920]
  Cannot satisfy dependency:
    From: WST Server UI 3.3.2.v20111026_1748-7B79FBdAtJcez0EONePJUSNPjBC42 (org.eclipse.wst.server_ui.feature.feature.group 3.3.2.v20111026_1748-7B79FBdAtJcez0EONePJUSNPjBC42)
    To: org.eclipse.wst.server.ui [1.3.0.v20120210_1439]
  Cannot satisfy dependency:
    From: Eclipse Web Developer Tools 3.3.2.v201111030500-7O7IFj6EMjB7yO1Xs_G1kMtQeOye6HTXFWve95_R (org.eclipse.wst.web_ui.feature.feature.group 3.3.2.v201111030500-7O7IFj6EMjB7yO1Xs_G1kMtQeOye6HTXFWve95_R)
    To: org.eclipse.wst.server_ui.feature.feature.group [3.3.2.v20111026_1748-7B79FBdAtJcez0EONePJUSNPjBC42]
  Cannot satisfy dependency:
    From: JBoss Tools JSF 3.3.0.v20120302-0331-H69-Beta1 (org.jboss.tools.jsf.feature.feature.group 3.3.0.v20120302-0331-H69-Beta1)
    To: org.eclipse.wst.web_ui.feature.feature.group 3.3.2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T09:52:59.563

JBoss 工具（至少对于代码完成部分）与 Eclipse IDE（集成开发环境）一起使用

它与您选择的 Web 服务器无关...

所以是的，它应该与你的 Eclipse 一起工作（GlassFish/Tomcat 等......对它没有影响......）

# image - Chrome 有时会在 jQuery .appendTo 之后重新加载图像，收到 304

> ID：10086239
> 
> 赞同：1
> 
> 时间：2012-04-10T09:33:02.017
> 
> 标签：image, google-chrome, reload

我正在构建一个滑块。有一组幻灯片，我将其用作内容源，每次幻灯片更改时，此内容都会附加到过渡包装器中。转换完成后，转换包装器将从 DOM 中删除。当我向滑块添加全新的内容（图像）并第一次在 Chrome 中打开它时，该图像当然不在 Chrome 的缓存中。当我将转换包装器（带有这个新图像）附加到 DOM 时，问题就出现了。Chrome**有时（有时不是）**发送请求以获取该图像并收到 304 响应。对于同一张图片，它甚至使这个请求增加了 3 倍。但它只有在第一次加载带有新图像的滑块时才会发生。刷新后，Chrome 会从其缓存中获取那些“新”图像，并且滑块可以完美运行。其他浏览器正常。

顺便说一句：我也使用 imagesLoaded 插件，但图像预加载似乎对这个问题没有任何影响。

我知道有更好的方法来创建图像滑块 - 使用图像作为背景图像等。但是我的内容源 => 转换包装器是我用来创建响应式/非唯一图像/CSS3 滑块的方式。

我很快就会发布这个插件，所以我真的很想快速解决这个问题。

# ios - 带有ARC的NSURLConnection不接收数据

> ID：10086241
> 
> 赞同：2
> 
> 时间：2012-04-10T09:33:05.520
> 
> 标签：ios, cocoa-touch, automatic-ref-counting, nsurlconnection, nsurlrequest

我对 iOS 开发相当陌生，我正在尝试从 URL 获取内容。我正在使用 Apple 教程来使用 NSURLConnection，一切正常，但我没有获取数据。我环顾四周，找不到我的问题的答案。我也在我的项目中使用ARC，也许这会导致问题？

这是我正在使用的代码，从我的头文件开始：

```
@interface ViewController : UIViewController
@property (nonatomic, retain) NSMutableData *receivedData;
@end 
```

实现文件：

```
@implementation ViewController

@synthesize receivedData;

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc that aren't in use.
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    NSLog(@"1\. viewDidLoad");
    // Create the request
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.apple.com/"] cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];
    // Create the connection with the request and start loading the data
    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    if (connection) {
        NSLog(@"2\. connection succeeded");
        receivedData = [NSMutableData data];
    } else {
        NSLog(@"2\. connection failed");
    }
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse     *)response
{
    NSLog(@"3\. didReceiveResponse");
    [receivedData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [receivedData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    NSLog(@"4\. Connection failed! Error - %@ %@", [error localizedDescription], [[error userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSLog(@"4\. Succeeded! Received %d bytes of data", [receivedData length]);
} 
```

所有的 NSLog 都在工作，但它一直说 receivedData 有 0 个字节。我找不到我的问题的答案，所以我希望我能找到这个问题的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T09:33:21.420

我已经使用 ARC翻译了[URL 加载系统编程指南中的](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)**Using NSURLConnection**部分。

```
//
//  MyConnection.h
//

#import <Foundation/Foundation.h>

@interface MyConnection : NSObject

- (void)start;

@property NSMutableData *receivedData;

@end

//
//  MyConnection.m
//

#import "MyConnection.h"

@implementation MyConnection

- (void)start {

    // Create the request
    NSURLRequest *theRequest = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.apple.com"] cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];

    // Create the connection with the request and start loading the data
    NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];

    if (theConnection) {
        // Create the NSMUtableData to fold the received data
        // ReceivedData is an instance variable declared elsewhere
        _receivedData = [NSMutableData data];

    }
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [_receivedData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [_receivedData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    // Inform the user
    NSLog(@"Connectionfailed! Error - %@ %@",
          [error localizedDescription],
          [[error userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    // Do something with the data
    NSLog(@"Succeeded! Recevied %d bytes of data", [_receivedData length]);

}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T14:21:12.537

只是为了完成。我遇到了同样的问题，原因是**threading**。如果拥有`NSURLConnection`对象的线程与拥有 的线程不同`delegate`，`delegate`则不会收到通知。这意味着连接中的错误也将消失。

**因此，请确保您`NSURLConnection`在创建委托的同一线程上创建。**

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-12T06:36:55.667

您需要启动连接。

例如，您可以使用`– initWithRequest:delegate:startImmediately:`.

对现有代码的更小的更改是仅`- start`在 if 分支上的连接上使用：

```
NSURLConnection *connection = [[NSURLConnection alloc] 
                                initWithRequest:request 
                                       delegate:self 
                               startImmediately:NO
                               ];
if (connection) {
    NSLog(@"2\. connection succeeded");
    receivedData = [NSMutableData data];
    [connection start];
} else {
    NSLog(@"2\. connection failed");
} 
```

[您可以在此处](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/nsurlconnection_Class/Reference/Reference.html "这里")找到 NSURLConnection 的参考手册

# java - Tomcat 在 Eclipse 中运行时无法打开 http://localhost:8080/

> ID：10086242
> 
> 赞同：5
> 
> 时间：2012-04-10T09:33:07.500
> 
> 标签：java, eclipse, tomcat

我在这里遇到了同样的问题：[Tomcat 在 eclipse 中启动但无法连接到 http://localhost:8085/ 的链接](https://stackoverflow.com/questions/2280064/tomcat-started-in-eclipse-but-unable-to-connect-to-link-to-http-localhost8085)，这意味着我无法在浏览器中打开[http://localhost:8080/ ：](http://localhost:8080/)

```
HTTP Status 404 - /
type Status report
message /
description The requested resource (/) is not available.
Apache Tomcat/7.0.27

//Console info when tomcat started//

Apr 10, 2012 4:26:32 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to                   org.eclipse.jst.jee.server:SimpleServletProject' did not find a matching property.
Apr 10, 2012 4:26:32 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Apr 10, 2012 4:26:33 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Apr 10, 2012 4:26:33 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 880 ms
Apr 10, 2012 4:26:33 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Apr 10, 2012 4:26:33 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.27
Apr 10, 2012 4:26:33 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
Apr 10, 2012 4:26:33 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Apr 10, 2012 4:26:33 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 495 ms 
```

我正在使用 Tomcat 7.0.27、Eclipse Europa 和 Java 1.6.0_32。看到了BalusC的回答，但是问题是不能选择Tomcat安装（下图）。

这里有什么问题？

![在此处输入图像描述](../Images/540633f3cc40e0759a8ceedb221e7c7b.png)

EDIT1：当我尝试创建演示网页时，它也无法打开（同样的错误）。

EDIT2：关注了这个线程[为什么在Eclipse中tomcat服务器位置属性是灰色的](https://stackoverflow.com/questions/4919846/why-tomcat-server-location-property-is-greyed-in-eclipse)我可以在浏览器中打开 [http://localhost:8080/](http://localhost:8080/)，但仍然无法访问演示网页..

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"        xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-  app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
    <display-name>SimpleServletProject</display-name>
    <welcome-file-list>
          <welcome-file> index.html</welcome-file>
    </welcome-file-list>
</web-app> 
```

PS：似乎没有更多空间给我发布 index.hmtl （它只是一个普通的 html ）..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T11:41:27.123

我正在使用 apache 7。当在命令提示符下启动时，一切都按预期工作，但如果我从 eclipse 启动相同，那么我无法访问它并找到设置。

看起来eclipse默认使用“使用工作区元数据”并在服务器设置中部署到“wtpwebapps”的路径。按照以下步骤更改这些，当您在 eclipse 中启动服务器时，您将能够访问 localhost:8080。

1.  在底部的 eclipse 服务器选项卡中，右键单击，您可以在其中看到启动、停止等，然后选择*属性*。
2.  在属性窗口中，选择常规，然后选择切换位置。
3.  现在您可以在服务器选项卡的 localhost 中看到 Tomcat v7.0 服务器，双击它。
4.  一个。如果部署了任何模块，请暂时删除它们并关闭选项卡以保存此更改，否则直接转到下面的步骤 4c。
5.  湾。如果您删除了任何模块，请在步骤 4a 之后重新启动服务器并继续执行步骤 4c。
6.  C。在服务器位置，选择单选按钮“使用 tomcat 安装”，然后在部署路径中选择“webapps”。

在eclipse中保存并启动服务器。现在您将能够访问服务器。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-10T09:42:52.830

您想访问根应用程序（http://server:port/），但我很确定 Eclipse 不会安装根应用程序。尝试访问您在[http://server:port/yourapp](http://server:port/yourapp)下的（eclipse 管理的）tomcat 中部署的应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-23T18:55:04.920

```
In eclipse servers tab at bottom, right click, where you can see start, stop etc, and select properties. 
```

****这很好用：****

在属性窗口中，选择常规，然后选择切换位置。现在您可以在服务器选项卡的 localhost 中看到 Tomcat v7.0 服务器，双击它。一个。如果部署了任何模块，请暂时删除它们并关闭选项卡以保存此更改，否则直接转到下面的步骤 4c。湾。如果您删除了任何模块，请在步骤 4a 之后重新启动服务器并继续执行步骤 4c。C。在服务器位置，选择单选按钮“使用 tomcat 安装”，然后在部署路径中选择“webapps”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T11:21:56.067

请检查您的示例应用程序请求上下文路径。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-04-10T09:37:11.027

看来您想连接到与 eclipse (8080) 相同的端口。与运行 Skype 和运行服务器一样，默认情况下会发生冲突，因为它们想通过同一个端口发送数据。

尝试配置您可能希望将 localhost 设置为端口 3000 的服务器连接端口，并尝试是否可行。

# php - Facebook 从电脑上传照片

> ID：10086248
> 
> 赞同：0
> 
> 时间：2012-04-10T09:33:23.600
> 
> 标签：php, facebook, facebook-graph-api

我正在尝试制作一个 facebook 应用程序，将照片从计算机上传到 facebook 上的特定相册。我有以下代码，但出现错误：创建表单数据失败。

```
 require_once 'include.php';
  $config = array(
  'appId'  => $app_id,
  'secret' => $app_secret,
);
 $facebook = new Facebook($config);

 $user = $facebook->getUser();

 if($user && isset($_POST['submit'])){  
try {       
 $facebook->setFileUploadSupport(true);

//Create an album
$album_details = array(
    'message'=> 'Album desc',
    'name'=> 'Album name'
);
$create_album = $facebook->api('/me/albums', 'POST', $album_details);

//Get album ID of the album you've just created
$album_uid = $create_album['id'];

//Upload a photo to album of ID...
$photo = realpath($_FILES['miss_photo']['tmp_name']);
$photo2 = $photo . '.jpg';
//echo $photo2; exit();

$photo_details['image'] = '@' . $photo2;

$upload_photo = $facebook->api('/'.$album_uid.'/photos', 'POST', $photo_details);
} catch (FacebookApiException $e) {
echo ($e->getMessage());
 }
}
else
echo 'error'; 
```

知道为什么我会收到错误消息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T10:44:18.287

您不能以这种方式使用文件，您需要提供文件的路径，例如：

```
 photo_details = array(
    'message'=> 'some test'
);
$photo_details['image'] = '@' . realpath('/path/to/your/image_file.jpg');
$upload_photo = $facebook->api('/'.$album_uid.'/photos', 'post', $photo_details); 
```

希望有帮助

# c# - MultiselectList 可以在 MVVM 样式中使用（将其 IsSelected 属性绑定到视图模型）？

> ID：10086249
> 
> 赞同：1
> 
> 时间：2012-04-10T09:33:29.790
> 
> 标签：c#, windows-phone-7

我阅读了在 WindowsPhoneGeek 第 1 部分第 2 部分中使用 MultiselectList [的](http://windowsphonegeek.com/articles/Windows-Phone-Toolkit-MultiselectList-in-depth-Part2-Data-Binding)[示例](http://windowsphonegeek.com/articles/Windows-Phone-Toolkit-MultiselectList-in-depth--Part1-key-concepts-and-API)

当我实现 MultiselectList 的 SelectAll 和 UnSelectAll 函数时，我发现如果项目数超过一定限制，并不是 MultiselectList 中的所有项目都正确选择/取消选择。以下代码中的某些项目不会进入 if 部分

```
DependencyObject visualItem = itemContainerGenerator.ContainerFromItem(pizzaOption);
MultiselectItem multiselectItem = visualItem as MultiselectItem;
if (multiselectItem != null)
{
    // NOTE: this will also add an item to the SelectedItems collection
    multiselectItem.IsSelected = selected;
} 
```

我想这是因为当时并不是所有的 multiselectItem 都显示在 UI 中。但我确实需要 SelectAll 来选择 MultiselectList 中的所有项目，而不仅仅是 UI 中的项目。我能做些什么？我一直在考虑将 IsSelected 属性绑定到 viewmodel 作为解决方法，但我尝试了以下代码并在解析该页面的 xaml 时出现异常。

```
<toolkit:MultiselectList.ItemContainerStyle>
    <Style TargetType="toolkit:MultiselectItem">
        <Setter Property="HintPanelHeight" Value="75"/>
        <Setter Property="IsSelected" Value="{Binding IsMarked, Mode=TwoWay}"/>
    </Style>
</toolkit:MultiselectList.ItemContainerStyle> 
```

请帮助我..提前谢谢你：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T03:21:58.793

您收到 xaml 解析错误，因为您的

```
<Style TargetType="toolkit:MultiselectItem">
        <Setter Property="HintPanelHeight" Value="75"/>
        <Setter Property="IsSelected" Value="{Binding IsMarked, Mode=TwoWay}"/>
</Style> 
```

应该在资源上，比方说

```
<toolkit:MultiselectList.Resources>
    <Style TargetType="toolkit:MultiselectItem">
            <Setter Property="HintPanelHeight" Value="75"/>
    </Style>
</toolkit:MultiselectList.Resources> 
```

对我来说，我会将 MultiselectList 的数据上下文绑定到一个类，并对其项目进行 foreach，例如

```
DataContext = new List<ClassADataContext>();

foreach(var items in DataContext)
{
  ... logic
   items.IsMarked = false; or whatever
} 
```

# java - 简单情况下的 AsyncTask 替代方案

> ID：10086250
> 
> 赞同：1
> 
> 时间：2012-04-10T09:33:35.517
> 
> 标签：java, android, multithreading

当我想在后台做某事时，如果操作非常简单：比如做“在后台做某事”，然后更新 UI，而不是使用`AsyncTask`我正在考虑使用的（只是为了更快的编码）：

```
 new Thread(){
      public void run(){
          final ArrayList<myObjects> objects= myDatabase.queryObjects();
          runOnUiThread(new Runnable() {

             @Override
             public void run() {
                updateUIWith(objects);              
            }
        });
      }
 } 
```

但我真的不知道以这种方式使用“最终”对象是否会导致内存泄漏或其他类型的麻烦。

使用这种方法可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T09:36:39.290

`final`只对编译器说您不会`objects`在代码中重新分配变量。`final`和内存泄漏之间没有联系。

如果您使用匿名内部类 (the `new Runnable...`)，则必须将其设为`objects`final。

我对 Android 不是很熟悉，但如果您的`updateUIWith()`方法确实与 UI 对象交互，这可能是一个问题，因为我认为 UI 更新需要在特定的 UI 线程中运行。如果您不在该方法中更新 UI 对象，那么您的代码应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-15T15:03:29.797

问题是：为每个小动作打开一个新线程是个好主意吗？AsyncTask 提供了线程被其他人管理的便利，但是当你像你一样声明一个线程时，你负责处理诸如限制线程数之类的情况。

# maven - Maven依赖：排除一个类

> ID：10086262
> 
> 赞同：16
> 
> 时间：2012-04-10T09:34:23.197
> 
> 标签：maven, dependencies

例如我有依赖：

```
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-api</artifactId>
    <version>1.5.6</version>
</dependency> 
```

例如，我可以排除一个班级`org/slf4j/Marker.class`吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T09:39:38.837

尝试使用[阴影插件](https://maven.apache.org/plugins/maven-shade-plugin/examples/includes-excludes.html)

[为什么使用阴影](https://stackoverflow.com/questions/13620281/what-is-the-maven-shade-plugin-used-for-and-why-would-you-want-to-relocate-java)和[基本用法](https://stackoverflow.com/a/33880083/442256)的详细信息

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-11T08:19:52.013

不可能排除一个班级。您可以在`<dependency>`标签内定义`<exclusions/>`. 但是，这些是针对整个依赖项的。

应小心处理阴影插件。一般来说，在一个地方创建一个包含所有依赖项的 jar 不是一个好习惯，因为如果您要在另一个项目中使用生成的工件作为依赖项，这往往会导致问题。例如，在你的 jar 中对 slf4j 进行着色，然后根据你在另一个项目中的工件，如果你有另一个 slf4j，这会给你带来悲伤。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-14T14:24:12.493

您可以更改这些类并将它们定义在不同的 jar/模块中，该 jar/模块应该作为依赖项包含在提供要排除的类所在的依赖项的 jar**之前**（Marker.class）。

Maven 会记住从 2.0.9 版本开始的类路径排序。

# web-services - 嵌入问题

> ID：10086265
> 
> 赞同：5
> 
> 时间：2012-04-10T09:34:31.000
> 
> 标签：web-services, api, frontend, issuu

我需要在网站中嵌入一个[issuu](http://issuu.com/)文档。应该允许网站管理员决定在前端显示哪个文档。

这是一项简单的任务，使用发行页面上的嵌入链接。但我需要自定义一些选项——例如，禁用共享、设置尺寸等等。我不能依赖管理员每次需要更改文档时执行此过程。

我可以根据自己的喜好轻松自定义 issuu 嵌入代码，而我只需要文档 ID。不幸的是，该 id 不包含在文档的发行页面中。例如，[这个随机链接](http://issuu.com/gruppotuo/docs/stilicone/1)的 id恰好是`110209071155-d0ed1d10ac0b40dda80dad24166a76ee`，无论在 URL 中还是在页面中都找不到。您必须深入研究嵌入代码才能找到它。

我认为[issuu API](http://issuu.com/services/api/)可以让我在给定 URL 的情况下获取文档 ID，但我找不到这样的东西。最接近的匹配是搜索 API，但如果我[搜索文档的确切名称，](http://search.issuu.com/api/2_0/document?q=stilicone/1)我只会得到一个与**不同**文档的匹配！

> 是否有一些简单的方法可以嵌入只知道其 URL 的文档？还是非技术人员在页面中查找文档 ID 的简单方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-18T19:18:15.720

You can embed of course stacks but that isnt showed on Issuu site. This is code (its old code but it works):

```
<iframe src="http://static.issuu.com/widgets/shelf/index.html?folderId=FOLDERIDamp;theme=theme1&amp;rows=1&amp;thumbSize=large&amp;roundedCorners=true&amp;showTitle=true&amp;showAuthor=false&amp;shadow=true&amp;effect3d=true" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" width="100%" height="200"></iframe> 
```

FOLDERID is number of 36 chars that you get on address bar when you enter stacks (example: [https://issuu.com/username/stacks/FOLDERID](https://issuu.com/username/stacks/FOLDERID)). When you replacing that in code you must paste 36 chars in this format 8-4-4-4-12 with - between chars. And voila its working. You can change theme and other stuffs in code.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-15T17:17:46.993

文档 ID 位于每个文档的 HTML 源代码中。它位于 og:video 元属性中。

```
<meta property="og:video" content="http://static.issuu.com/webembed/viewers/style1/v2/IssuuReader.swf?mode=mini&amp;documentId=XXXXXXXX-XXXXXXXXXXXXX&amp;pageNumber=0"> 
```

您可以使用[DomDocument](http://php.net/manual/en/class.domdocument.php)和[DomXPath](http://php.net/manual/es/class.domxpath.php) php 类轻松处理它。

以下是使用 PHP 的方法：

```
//  Your document URL
$url = 'https://issuu.com/proyectotres/docs/proyecto_3_edicion_135';

//  Turn off errors, loads the URL as an object and then turn errors on again
libxml_use_internal_errors(true);   
$dom = DomDocument::loadHTMLFile($url);
libxml_use_internal_errors(false);

//  DomXPath helps find the <meta property="og:video" content="http://hereyoucanfindthedocumentid?documentId=xxxxx-xxxxxxx"/> 
$xpath = new DOMXPath($dom);
$meta = $xpath->query("//html/head/meta[@property='og:video']");

//  Get the content attribute of the <meta> node and parse its query
$vars = [];
parse_str(parse_url($meta[0]->getAttribute('content'))['query'], $vars);

//  Ready. The document ID is here:
$docID = $vars['documentId'];

// You can print it:
echo $docID; 
```

您可以使用自己的 Issu 文档的 URL 进行尝试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-09T14:58:27.900

不幸的是，您定制的唯一方法是支付每月 39 美元的服务费用 =/。

您可以强制使用没有广告的全屏模式

```
<body style="margin:0px;padding:0px;overflow:hidden">        
    <iframe src="YOUR ISSU EMBED" frameborder="0" style="overflow:hidden;height:105%;width:105%;position:absolute;" height="100%" width="100%""></iframe>    
</body> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-05T15:59:12.700

您可以使用文档的 Issuu URL 来完成此 iframe ：

```
<iframe width="100%" height="283" style="display: block; margin-left: auto; margin-right: auto;" src="https://e.issuu.com/issuu-reader3-embed-files/latest/twittercard.html?u=nantucketchamber&amp;d=program-update1&amp;p=1" frameborder="0" allowfullscreen="allowfullscreen" span="" id="CmCaReT"></iframe> 
```

您只需将“nantucketchamber”替换为用户名，将“program-update1”替换为 Issuu URL 中的文件名

（对于这个例子，URL 是[https://issuu.com/nantucketchamber/docs/program-update1](https://issuu.com/nantucketchamber/docs/program-update1)）

# c# - 比较两个连续的行 - 分组

> ID：10086266
> 
> 赞同：3
> 
> 时间：2012-04-10T09:34:35.910
> 
> 标签：c#, .net, linq, entity-framework

我有一个模型如下

```
ID     Date                    BoitierNumber
1      07/04/2012 14:01:46     1
2      07/04/2012 14:01:50     2
3      07/04/2012 14:01:50     3
4      07/04/2012 14:01:56     1
5      07/04/2012 14:02:06     1
6      07/04/2012 14:02:10     2 
```

我已按 (BoitierNumber) 对行进行分组

```
*boitier Number 1

 1      07/04/2012 14:01:46
 4      07/04/2012 14:01:56 
 5      07/04/2012 14:02:06

*boitier Number 2

 2      07/04/2012 14:01:50
 6      07/04/2012 14:02:10 

*boitier Number 3

 3      07/04/2012 14:01:50 
```

为此，我使用了此代码

```
var groups = context.Essais.GroupBy(p => p.BoitierNumber)
                .Select(g => new { GroupName = g.Key, Members = g });

foreach (var g in groups)
{
    Console.WriteLine("Members of {0}", g.GroupName);

    foreach (var member in g.Members.OrderBy(x=>x.Id))
    {
        Console.WriteLine("{0}     {1}", member.Id,member.Date);
    }
} 
```

目前一切正常，我想比较两个连续分组行的日期，如果 row[i].date>row[i-1].date 我将删除 row[i-1]

例如：

```
*boitier Number 1

 1      07/04/2012 14:01:46
 4      07/04/2012 14:01:56 
 5      07/04/2012 14:02:06 
 8      07/04/2012 14:01:00 
 10     07/04/2012 14:00:00 
 13     07/04/2012 14:03:00 
 boitier Number 1 
 ---> Date of row of Id 4 > Date of row of ID 1
 then i will delete row of ID 1
 ---> Date of row of Id 5 > Date of row of ID 4
 then i will delete row of ID 4
 ---> Date of row of Id 8 < Date of row of ID 5
 then i will skip it
 ---> Date of row of Id 10 < Date of row of ID 8
 then i will skip it
 ---> Date of row of Id 13 > Date of row of ID 10
 then i will delete row of ID 10
 ...

 TherFore, After this process, only rows 13 and 8 will be remain 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T11:36:20.367

你现在可以做的最快的改变是：

```
var groups = context.Essais.GroupBy(p => p.BoitierNumber)
                .Select(g => new 
                                { 
                                  GroupName = g.Key, 
                                  Members = g.OrderBy(m=>m.Id)
                                }); 
```

**编辑** *似乎 EF 不适用于在投影中调用 ToList() 。*

成员现在将是一个按 id 排序的列表，然后你可以做一个 for 而不是一个 foreach

```
foreach (var g in groups)
{
    var members = g.Members.ToList();
    for (int i = 1, i < members.Count; i++)
    {
         var previousMember = members[i-1];
         var currentMember = members[i];
         if (..)
             // code to delete
    }
} 
```

*只是一个注释。*用初始查询投影分组的成员，它将创建其他查询来选择与每个组键对应的成员。您仍将加载整个表，但在后续查询中。您可以在内存中进行分组：

```
var groups = context.Essais
                      .AsEnumberable().
                      .GroupBy(p => p.BoitierNumber)
                      .Select(g => new { GroupName = g.Key, Members = g.OrderBy(m=>m.Id).ToList()  }); 
```

# java - 在 Web 服务中返回多个值

> ID：10086275
> 
> 赞同：1
> 
> 时间：2012-04-10T09:35:41.770
> 
> 标签：java, web-services, jax-rpc

我正在使用 java 和 eclipse 设计一个 web 服务，它返回在数据库中标记为客户的用户详细信息

我成功地使用以下代码返回了单个用户的详细信息（因为 dB 中只有一个条目）：

```
public class GetData {

public LoginDetails getDetails(){    
    Connection conn;
    Statement stmt;
    ResultSet rs;

    try {
        LoginDetails lds=new LoginDetails();
        Class.forName(driver);
        conn=DriverManager.getConnection(url,username,password);
        stmt=conn.createStatement();
        String sql="select * from login where usertype='customer'";
        rs=stmt.executeQuery(sql);
        while(rs.next()){
            lds.setUsername(rs.getString(1));
            lds.setPassword(rs.getString(2));
            lds.setUsertype(rs.getString(3));
            lds.setActive(rs.getString(4));

        }
        return lds;
    } 
    catch(ClassNotFoundException c){
        c.printStackTrace();
    }
    catch (SQLException e) {
        e.printStackTrace();
    }

    return null;
}
} 
```

如果有多个 dB 值符合条件，我想全部显示，我该怎么办。请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T09:38:18.273

将您的方法签名更改为`public LoginDetails[] getDetails()`

并按如下方式扩展您的 while 循环：

```
 Collection<LoginDetails> details = new ArrayList<LoginDetails>();
    while(rs.next()){
        LoginDetails lds=new LoginDetails();
        lds.setUsername(rs.getString(1));
        lds.setPassword(rs.getString(2));
        lds.setUsertype(rs.getString(3));
        lds.setActive(rs.getString(4));
        details.add(lds);

    }
    return details.toArray(new LoginDetails[0]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:39:11.780

建议返回一个集合类型 java.util.List ，最好从方法中返回 ArrayList 。

# facebook-graph-api - [文件获取内容]：无法打开流

> ID：10086279
> 
> 赞同：0
> 
> 时间：2012-04-10T09:35:50.230
> 
> 标签：facebook-graph-api, file-get-contents

我有正确的`access_token`，但是当我打电话时`file_get_contents`，我收到以下错误：

```
[function.file-get-contents]: failed to open stream: HTTP request failed!
HTTP/1.1 400 Bad Request in.. 
```

在浏览器中粘贴`echo $fql_query_url`会得到正确的结果吗？

是编码问题吗？我问是因为其他 fql 查询工作正常。这是有问题的代码：

```
<?php
require_once('facebook.php');
//GET access token
echo $uid = $facebook->getUser();
 $access_token = $facebook->getAccessToken();
 echo '<br>';

// Run fql query
 $fql_query_url = 'https://graph.facebook.com/'
    . '/fql?q=SELECT page_id from page_admin WHERE uid='.$uid.''
    . '&access_token=' . $access_token;
  $fql_query_result = file_get_contents($fql_query_url);
  $fql_query_obj = json_decode($fql_query_result, true);

  //display results of fql query
  echo '<br><pre>';
  print_r("query results:");
  print_r($fql_query_obj);
  echo '</pre>'; 
```

# objective-c - iOS 上的 Coreplot - 如何删除默认填充，以便图表完全填充视图而没有轴标签

> ID：10086283
> 
> 赞同：5
> 
> 时间：2012-04-10T09:35:59.893
> 
> 标签：objective-c, ios, core-plot

我试图在 iPad 上以横向模式放置 6 个 Coreplot 图表，因此每个图表的高度为 128 像素（即 768/6）

我遇到的问题是，如果我将所有填充设置为 0，则图表周围仍然有很多填充。

有没有办法从图表中删除这个默认填充？

在此先感谢达米安

图像中的粉红色标记是我要删除的填充

[http://i.stack.imgur.com/nXzFv.png](https://i.stack.imgur.com/nXzFv.png)

或者

[http://s10.postimage.org/d2rl0ajsn/Image13.png](http://s10.postimage.org/d2rl0ajsn/Image13.png)

* * *

这是未应用主题的图表（填充仍然存在）我添加了粉红色边框，以便您可以看到实际大小

![这是未应用主题的图表（填充仍然存在）我添加了粉红色边框，以便您可以看到实际大小](../Images/717d24591631d17edd3f2cc3e9e1789c.png)

我还尝试将填充设置为 -20.0，并且存在相同的填充，但可见图表区域正在切断图表。

似乎有一个外部框架正在设置此填充并保持图表区域..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T23:51:29.720

图形本身（不是绘图区域框架）的默认填充是每边 20 像素。你也可以改变它。

```
graph.paddingLeft = 0.0;
graph.paddingTop = 0.0;
graph.paddingRight = 0.0;
graph.paddingBottom = 0.0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T15:59:53.237

暗示：

暂时将不同视图的背景颜色设置为百搭颜色，以便您可以看到各种填充值的影响。

```
self.graph.plotAreaFrame.backgroundColor = [[UIColor yellowColor] CGColor];

self.graph.plotAreaFrame.paddingTop = 2.0f;
self.graph.plotAreaFrame.paddingRight = 8.0f;
self.graph.plotAreaFrame.paddingBottom = 30.0f;
self.graph.plotAreaFrame.paddingLeft = 42.0f;

self.graph.backgroundColor = [[UIColor greenColor] CGColor];

self.graph.paddingTop = 2.0f;
self.graph.paddingRight = 2.0f;
self.graph.paddingBottom = 2.0f;
self.graph.paddingLeft = 2.0f;

// Tie the graph we've created with the hosting view.
self.hostingView.hostedGraph = self.graph;
self.hostingView.backgroundColor = [UIColor redColor]; 
```

# wordpress - 如何将我自己的 wordpress 主题上传到我的博客 xxx.wordpress.com？

> ID：10086284
> 
> 赞同：-4
> 
> 时间：2012-04-10T09:36:00.043
> 
> 标签：wordpress, upload, wordpress-theming

你知道如何将我自己的 wordpress 主题上传到我在 xxx.wordpress.com 的博客吗？

我已经购买了一个新域名。

需要帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:15:48.640

您不能上传自己的主题。您可以将域指向 wordpress.com。请参阅[WordPress.com、WordPress 和 WordPress.org 之间的区别](http://en.support.wordpress.com/com-vs-org/)

# c++ - SFINAE 不适用于 std::is_pointer 的 Visual Studio 2010

> ID：10086286
> 
> 赞同：1
> 
> 时间：2012-04-10T09:36:05.870
> 
> 标签：c++, templates, c++11, sfinae, visual-studio-2010

SFINAE 原则不适用于 Visual Studio 2010 中看似非常简单的事情。

```
#include <type_traits>
#include <iostream>

struct MyStruct
{
  int value;
  MyStruct(int value = 42) : value(value) { }
  const int& getInt() const { return value; }
};

template <typename ITER_TYPE>
auto getIteratorInt(ITER_TYPE iter) ->
  typename std::enable_if
  <std::is_pointer<decltype(*iter)>::value, const int&>::type
{
  return (*iter)->getInt();
}

template <typename ITER_TYPE>
auto getIteratorInt(ITER_TYPE iter) ->
  typename std::enable_if
  <!std::is_pointer<decltype(*iter)>::value, const int&>::type
{
  return iter->getInt();
}

int main(void)
{
  MyStruct gloryInt;
  MyStruct* gloryIntPtr = &gloryInt;
  std::cout << getIteratorInt(gloryIntPtr) << std::endl;
  std::cout << getIteratorInt(&gloryIntPtr) << std::endl;
  return 0;
} 
```

我的意图是使用`std::enable_if`基于 SFINAE 原则来编译正确的模板重载。（没有现有返回类型的函数将被忽略，而另一个将被编译。）这样，您可以使用指向对象的指针或双指针，而直接对象仍然是被访问的对象。

我收到以下编译错误：

```
main.cpp(14): error C2039: 'type' : is not a member of 'std::tr1::enable_if<_Test,_Type>'
          with
          [
              _Test=false,
              _Type=const int &
          ]
main.cpp(17): error C3646: 'type' : unknown override specifier 
```

好吧，如果不使用 SFINAE，这是一个非常明显的错误。有没有办法在 Visual Studio 2010 中获得预期的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:44:41.650

嘿，在更新其他答案之前应该检查您的个人资料页面。

类型`decltype( * iter )`是指`int const *const &`，它是对指针的引用，而不是“裸”指针。因此`std::is_pointer`返回一个意想不到的结果。有两种方法可以解决这个问题：

*   从 C++03 开始​​使用`std::iterator_traits`，我更喜欢：

    ```
    typename std::iterator_traits< ITER_TYPE >::value_type 
    ```

*   使用去除可能添加的`std::decay`引用的元函数`decltype`来反映表达式的值类别

    ```
    typename std::decay< decltype( * iter ) >::type 
    ```

# regex - 创建一个正则表达式模式

> ID：10086297
> 
> 赞同：1
> 
> 时间：2012-04-10T09:37:09.607
> 
> 标签：regex

我想为我的字符串创建一个模式：它应该遵循以下规则：
第 1 位仅包含 4 位数字。
第 2 位仅包含一个“-”。
第 3 位仅包含 3 位数字。
第 4 位仅包含一个“-”。
第 5 位仅包含 3 位数字。
第 6 位仅包含 6 个数字。
第七位只包含一个'-'。
第 8 位仅包含 1 个数字。

像这样的某事：`0010-155-072-120410-0`

我用这个但不工作：`'/[1-9]{4}-[1-9]{3}-[1-9]d{3}-[1-9]{6}-[1-9]{1}/'`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T09:40:57.900

```
'/^\d{4}-\d{3}-\d{3}-\d{6}-\d$/' 
```

用这个。在您的示例中，您`"d"`在中间有额外的字符。
也不要忘记包括开始和结束符号，以避免在开始和结束时出现额外的字符。

# c - 运行时 C 应用程序错误

> ID：10086303
> 
> 赞同：0
> 
> 时间：2012-04-10T09:37:29.880
> 
> 标签：c, segmentation-fault

我已经构建了一个 C 应用程序，当我构建它时，它没有显示任何错误，但是当我运行它时，它给了我错误“Segmentation Fault: 11”。如果有帮助，这是我正在使用的代码：

```
#include <stdio.h>
int main(char *argv[]) {
printf("The project path is: ./Projects/%c", argv[1]);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T09:39:48.277

正确的`main`原型语法是

```
int main(int argc, char *argv[]) { ... } 
```

此外`%c`转换规范`printf`打印一个字符，打印一个字符串使用`%s`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T09:43:05.090

你有很多问题：

*   for 的签名`main`是一个参数计数，后跟一个 C 字符串数组。
*   在使用数组之前，您应该始终检查计数。
*   该数组是字符串，因此您需要`%s`打印它们。

这应该有效：

```
#include <stdio.h>
int main(int argc, char *argv[]) {
    if (argc < 2)
        fprintf (stderr, "Wrong number of arguments\n");
    else
        printf ("The project path is: ./Projects/%s\n", argv[1]);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T09:40:04.743

1.  将签名更改为`int main(int, char*[]);`
2.  您将哪些参数传递给流程？如果你没有通过任何`argv[1]`超出范围

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T09:40:25.350

首先，将您的主要更改为：

```
int main(int argc, char *argv[]) 
```

其次，您传递给 printf 的内容与您告诉它您将要传递的内容不匹配。`argv[1]`是*指向*字符的指针，而不是字符。您需要/想要使用 %s 转换将其打印出来：

```
printf("The project path is: ./Projects/%s", argv[1]); 
```

在这种特定情况下，检查是否有足够的参数并不是必须的，因为即使您不传递任何命令行参数，`argv`也至少会包含`argv[0]`一个空指针。因此，使用`argv[1]`是安全的，但如果您没有传递命令行参数，可能会打印为类似`(null)`.

尽管如此，您通常希望`argc`在使用之前检查 的值`argv`。在这种情况下，您可以侥幸逃脱，但或多或​​少是偶然的。尝试使用`argv[2]`相同的方式可能会产生未定义的行为。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T09:42:22.510

除了其他建议之外，您可能需要重新审视您的 printf 格式。`%c`用于打印单个字符，并且`argv[1]`是`char *`. 使用`argv[1][0]`或类似的，或使用字符串格式说明符`%s`.

# charts - jfreechart中线上的点

> ID：10086306
> 
> 赞同：2
> 
> 时间：2012-04-10T09:37:45.450
> 
> 标签：charts, jfreechart, linechart

如何获取位于 jfreechart 图表中连接两个数据点的线上的所有点 (x,y)？

在图表中，当我们指向线的端点时，它会显示 x 和 y 坐标。我们不能在线上的任何点（通过代码）获得坐标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T18:48:00.183

因为你有两个点，所以使用[*线性方程*](http://en.wikipedia.org/wiki/Linear_equation#Forms_for_2D_linear_equations)的公式来获得直线的斜率和截距。一旦你有了方程，你就可以在任何时候评估它。

附录：[`org.jfree.data.statistics.Regression`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/data/statistics/Regression.html)该类为回归分析提供了一些内置支持。

# android - 启动主屏幕选择器

> ID：10086312
> 
> 赞同：1
> 
> 时间：2012-04-10T09:38:19.640
> 
> 标签：android, homescreen

我已将我的应用程序定义为主屏幕，但我必须在应用程序执行期间更改主屏幕。我知道无法更改主屏幕，只能启动主屏幕选择器。需要时如何启动主屏幕选择器？

我在用着：

包管理器 pm = getPackageManager(); pm.clearPackagePreferredActivities("com.dm.prado");

我有两个问题：

选择器仅在我按下主页按钮时显示，我想在需要时显示它。

当我第一次选择主屏幕时，选择器不再显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:22:31.387

> 选择器仅在我按下主页按钮时显示，我想在需要时显示它。

您可以使用以下代码从应用程序内部的任何位置触发主屏幕意图

```
Intent startMain = new Intent(Intent.ACTION_MAIN);
startMain.addCategory(Intent.CATEGORY_HOME);
startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(startMain); 
```

检查此链接以进行[主屏幕](http://developer.android.com/resources/samples/Home/index.html)应用程序开发。

> 当我第一次选择主屏幕时，选择器不再显示

如果您选择了

> 默认情况下用于此操作

复选框，那么它将不会在下次显示，除非您从应用程序中清除默认值。

# excel - Bloomberg VBA API：如何用 VBA 和 BLPAPI 替换 BDS 调用？

> ID：10086313
> 
> 赞同：0
> 
> 时间：2012-04-10T09:38:22.160
> 
> 标签：excel, bloomberg, blpapi, vba

我目前使用 BDS 的方式如下：

```
=BDS("FDS US Equity","TOP_20_HOLDERS_PUBLIC_FILINGS","cols=10;rows=20") 
```

我有具有以下功能的 BBG VBA 类模块：

```
Public Function ReferenceDataRequest(security As String, fields() As String) As Variant

Public Function HistoricalDataRequest(securities() As String, fields() As String, startDate As String, endDate As String, periodicity As String, nonTradingDayFillOption As String, nonTradingDayFillValue As String) As Variant

Public Function IntradayTickRequest(security As String, startDate As String, endDate As String, eventTypes() As String) As Variant

Public Function IntradayBarRequest(security As String, startDate As String, endDate As String, eventType As String, interval As Integer) As Variant 
```

我无法弄清楚要使用哪个函数以及使用什么参数。

帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T12:23:28.423

我对`BDS()`Bloomberg 函数不太熟悉，但我使用 Bloomberg API 并与 Bloomberg 一起使用 VBA。

您的`BDS()`通话将“FDS US Equity”作为安全参数，将“TOP_20_HOLDERS_PUBLIC_FILINGS”作为字段。但是，您列出的函数中的“fields()”参数需要一个数组。

你有没有尝试过这样的事情？

```
Dim varData As Variant
Dim strFieldsArray(0) as string

strFieldsArray(0) = "TOP_20_HOLDERS_PUBLIC_FILINGS"   

varData = ReferenceDataRequest("FDS US Equity", strFieldsArray) 
```

我正在假设（我认为这并不重要）此方法正在调用`BlpSubscribe()`Bloomberg 数据类型库。

# iphone - Xcode 中的字符替换 - Objective-C

> ID：10086317
> 
> 赞同：2
> 
> 时间：2012-04-10T09:38:49.387
> 
> 标签：iphone, objective-c, string, nsstring

我已使用此代码将“\n”替换为“”，但它不起作用。

我该怎么做？

```
NSString *descString = [values objectForKey:@"description"];
descString = [descString stringByReplacingOccurrencesOfString:@"\n" withString:@""];

NSLog(@"Description String ---->>> %@",descString);
catlog.description = descString;
[webview loadHTMLString:catlog.description baseURL:nil];
webview.opaque = NO; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T09:45:54.980

试试这个

```
NSString *s = @"foo/bar:baz.foo";
NSCharacterSet *doNotWant = [NSCharacterSet characterSetWithCharactersInString:@"/:."];
s = [[s componentsSeparatedByCharactersInSet: doNotWant] componentsJoinedByString: @""];
NSLog(@"%@", s); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T10:04:34.667

```
descString = [descString stringByReplacingOccurrencesOfString:@"\\n" withString:@""]; 
```

有关详细信息，请参阅[stringByReplacingOccurrencesOfString:withString:](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-SW6)方法

希望这对您有所帮助。

**更新**

*斯威夫特 3.0*

```
descString.replacingOccurrences(of: "\\n", with: ""); 
```

如果我不拧，它也适用于*Swift 4.0*

# java - 从另一个方法调用变量

> ID：10086323
> 
> 赞同：0
> 
> 时间：2012-04-10T09:39:09.710
> 
> 标签：java, eclipse, swing, file-io, jfilechooser

我在 eclipse 中很新，并且在从其他方法调用变量时遇到问题，例如：

```
 btnNewButton.addMouseListener(new MouseAdapter() {
        @Override
        public void mouseClicked(MouseEvent arg0) {

            final JFileChooser fc = new JFileChooser();
            int returnVal = fc.showDialog(fc, null);

            if (returnVal == JFileChooser.APPROVE_OPTION) {
                File prnfile = new File(fc.getSelectedFile().toString());

            }

        }

    });
    btnNewButton.setBounds(54, 164, 89, 23);
    frame.getContentPane().add(btnNewButton);

    JButton btnNewButton_1 = new JButton("print");
    btnNewButton_1.addMouseListener(new MouseAdapter() {
        @Override
        public void mouseClicked(MouseEvent e) {

              File file = new File(prnfile);
                int ch;
                StringBuffer strContent = new StringBuffer("");
                FileInputStream fin = null;
                try {
                  fin = new FileInputStream(file);
                  while ((ch = fin.read()) != -1)
                    strContent.append((char) ch);
                  fin.close();
                } catch (Exception e1) {
                  System.out.println(e);
                }

    });
    btnNewButton_1.setBounds(257, 164, 89, 23 
```

现在，我如何从其他方法调用“prnfile”？通常我会在 C# 中创建一个公共对象，但它在 Eclipse 中不起作用，所以我不知道去哪里（作为一个完整的菜鸟 :)）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T09:45:27.773

您需要做的是解除 prnFile 引用，使其成为全局变量。正如现在所写的那样，prnFile 只是一个局部变量，您将无法在另一个方法中看到该变量，它将在创建后由 GC 收集。所以采取这部分：

```
File prnfile = new File(fc.getSelectedFile().toString()); 
```

并移出`File prnFile;`你的方法。在您仅调用的第一个侦听`prnFile= new File(fc.getSelectedFile().toString());`器中，现在您将能够`prnFile`从“打印侦听器”中获取存储在其中的值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T09:43:51.860

我猜你的意思是访问你的对象，这与 Eclipse 无关。

您的对象 prnfile 位于匿名类中。在匿名类之外定义你的变量，你就可以了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T09:44:27.853

**prnfile是****mouseClicked的****if**块的局部变量，因此当控制脱离该**if**块时，**prnfile**被垃圾收集并且它的**引用消失了**。所以你不能从 if 块之外访问它。

# javascript - Phonegap Android Webview Video 只播放音频

> ID：10086324
> 
> 赞同：5
> 
> 时间：2012-04-10T09:39:11.063
> 
> 标签：javascript, android, html, cordova, media

我今天开始玩phonegab。当我试图捕捉视频时，它工作正常。现在我想在 webview 中显示捕获的视频。所以我尝试如下。

```
var captureSuccess = function(mediaFiles) {
    var i, path, len;
    for (i = 0, len = mediaFiles.length; i < len; i += 1) {
        path = mediaFiles[i].fullPath;
        videoString = "<video width='320' height='240' controls='controls'><source src="+path+" type='video/mp4' /> <source src="+path+" type='video/ogg' />   <source src="+path+" type='video/webm' />Your browser does not support the video tag.</video>";
        $('#myVideo').html(videoString);
    }

};

// capture error callback
var captureError = function(error) {
    navigator.notification.alert('Error code: ' + error.code, null, 'Capture Error');
};

// start video capture
function takeVideo(){
    navigator.device.capture.captureVideo(captureSuccess, captureError, {limit:1});
} 
```

但是在用户界面中我看到播放器被附加但它只播放音频而不是视频.. wot 可能是问题.??

任何帮助表示赞赏，并提前感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T05:11:25.427

您有两个视频源标签，这可能是一个问题，因为指定了两种不同的类型。

```
<source src="+path+" type='video/mp4' />
<source src="+path+" type='video/webm' /> 
```

因此，请尝试删除其中之一。

# regex - 正则表达式中的 Levenshtein 距离

> ID：10086332
> 
> 赞同：12
> 
> 时间：2012-04-10T09:39:43.710
> 
> 标签：regex, levenshtein-distance

是否可以在正则表达式查询中包含 Levenshtein 距离？

（除了在排列之间进行联合，像这样用 Levenshtein 距离 1 搜索“hello”：

```
.ello | h.llo | he.lo | hel.o | hell. 
```

因为这对于较大的 Levenshtein 距离来说是愚蠢且无法使用的。）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-09T22:23:40.997

您可以以编程方式生成正则表达式。我将把它作为练习留给读者，但是对于这个假设函数的输出（给定“word”的输入），你需要这样的字符串：

```
"^(?>word|wodr|wrod|owrd|word.|wor.d|wo.rd|w.ord|.word|wor.?|wo.?d|w.?rd|.?ord)$" 
```

在英语中，首先您尝试匹配单词本身，然后匹配每个可能的单个换位，然后匹配每个可能的单个插入，然后匹配每个可能的单个省略或替换（可以同时进行）。

给定长度为 n 的单词，该字符串的长度与 n 呈线性关系（尤其是非指数）。

我认为这是合理的。

你把它传递给你的正则表达式生成器（就像在 Ruby 中，它会是 Regexp.new(str)）和 bam，你得到一个匹配器，匹配任何单词，与给定单词的 Damerau-Levenshtein 距离为 1。

（2 的 Damerau-Levenshtein 距离要复杂得多。）

注意使用 (?> 非回溯构造，这意味着该输出中各个 |'d 表达式的顺序很重要。

我想不出一种方法来“压缩”该表达式。

编辑：我让它工作，至少在 Elixir 中！[https://github.com/pmarreck/elixir-snippets/blob/master/damerau_levenshtein_distance_1.exs](https://github.com/pmarreck/elixir-snippets/blob/master/damerau_levenshtein_distance_1.exs)

我不一定会推荐这个（除了教育目的），因为它只会让你达到 1 的距离；一个合法的 DL 库将让您计算距离 > 1。虽然这是正则表达式，但一旦构建它可能会很快工作（请注意，您应该将“编译的”正则表达式保存在某处，因为此代码当前在每次比较时都会重建它！）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-07-07T18:18:42.857

有几种正则表达式方言具有近似匹配的特性——即[TRE](https://laurikari.net/tre/)库和[`regex`](https://pypi.org/project/regex/)Python 的 PyPI 模块。

TRE 近似匹配语法在[https://laurikari.net/tre/documentation/regex-syntax/](https://laurikari.net/tre/documentation/regex-syntax/)的“近似匹配设置”部分中进行了描述。匹配 Levenshtein 距离 1 内的内容的 TRE 正则表达式`hello`将是：

```
(hello){~1} 
```

该`regex`模块的近似匹配语法在[https://pypi.org/project/regex/](https://pypi.org/project/regex/)中以 text 开头的项目符号点中进行了描述`Approximate “fuzzy” matching`。`regex`匹配 Levenshtein 距离 1 内的东西的正则表达式`hello`是：

```
(hello){e<=1} 
```

也许这些语法中的一种或另一种会及时被其他正则表达式实现采用，但目前我只知道这两种。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-10T09:57:26.603

> 是否有可能如何在正则表达式查询中包含 levenshtein 距离？

不，不是以理智的方式。实施 - 或使用现有的 - Levenshtein 距离算法是要走的路。

# javascript - 复制一个javascript原型实例？

> ID：10086333
> 
> 赞同：1
> 
> 时间：2012-04-10T09:39:45.273
> 
> 标签：javascript, prototype

我得到了一个名为“Node”的原型的实例“aNode”。[在此讨论之后](https://stackoverflow.com/questions/728360/copying-an-object-in-javascript)，我尝试：

```
var newNode = clone(aNode); 
```

克隆功能如下：

```
function clone(obj) {
    if (null == obj || "object" != typeof obj) return obj;
    var copy = obj.constructor();
    for (var attr in obj) {
        if (obj.hasOwnProperty(attr)) copy[attr] = obj[attr];
    }
    return copy;
} 
```

尽管 obj.conturctor() 正确地引用了 aNode 的构造函数，但 copy 是“欠精细的”。找不到原因:(

这种方法是错误的，还是我错过了什么:)？

谢谢，J。

编辑：这是 Node 原型的样子：

```
Node.prototype = new PhysicsNode();
Node.prototype.constructor=Node;

function Node() {

    PhysicsNode.call(this);

    this.setBounds(0, 0, 0, 0);
    this.createStaticBody();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T03:42:55.720

好的。这里

```
var copy = obj.constructor(); 
```

只是一个函数调用，构造函数`Node`不返回任何内容。您必须使用`new`关键字来创建新对象。

```
var copy = new obj.constructor(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T16:20:09.037

```
var copy = obj.constructor(); 
```

此行采用 的构造函数`obj`，调用它并将结果分配给`copy`。

作为`obj`一个`Node`，根据`Node.prototype.constructor=Node;`它认为的行`obj.constructor === Node`。

看功能`Node`：

```
function Node() {

    PhysicsNode.call(this);

    this.setBounds(0, 0, 0, 0);
    this.createStaticBody();
} 
```

这个函数是一个构造函数，它必须用`new`关键字调用。如果不使用`new`关键字调用，它只是一个常规函数。由于**没有** `return`语句，因此该函数不返回**任何内容**。

所以，

```
var copy = obj.constructor(); 
```

没有分配**任何东西**，`obj`所以`obj`是`undefined`。

最后，

```
return copy; 
```

你从你的`clone`函数返回这个未定义的值。

# node.js - 多个 node.js + 总是 = 错误：观看 EMFILE

> ID：10086336
> 
> 赞同：2
> 
> 时间：2012-04-10T09:40:10.117
> 
> 标签：node.js

我在一台服务器上运行三个 node.js 应用程序，都使用 Foreman 通过 always.js 启动应用程序。

在*零负载下*，我的一个应用程序始终抛出错误`Error: watch EMFILE`并重新启动。尽管不断抛出该错误，但该应用程序仍然*有效*......我试图找到有关此错误的更多信息，但那里没有很多信息（“打开的文件太多”或“增加 ulimit”。）

我的问题是：为什么这会发生在**空闲**的Web 应用程序上 - 为什么只有三分之一？它什么也没做... always.js 有问题吗？（不过，这台机器上始终运行着另外两个节点应用程序......）只是寻找一些关于导致此错误的原因、是否严重以及如何解决的信息。

谢谢！

仅供参考，这是控制台的相关摘录：

```
01:17:07 web.1     | app listening on http://0.0.0.0:5000
01:17:07 web.1     | NODE_ENV = development
01:17:07 web.1     | opened connection to database!
01:17:07 web.1     | [always] Error: watch EMFILE
01:17:07 web.1     | [always] Error: watch EMFILE
01:17:07 web.1     |     at errnoException (fs.js:636:11)
01:17:07 web.1     |     at FSWatcher.start (fs.js:663:11)
01:17:07 web.1     |     at Object.watch (fs.js:691:11)
01:17:07 web.1     |     at Object.oncomplete (/home/jesse/local/nodev0.6.14/lib/node_modules/always/lib/monitor.js:62:36)
01:17:07 web.1     | [always] Restarting app.js with Node 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T20:13:35.480

我没有使用 always.js 的经验，但使用 fs.watch 命令的其他节点实用程序遇到了类似的错误，而 fs.watch 命令又使用 linux 的 inotify API。

您可能想尝试检查 inotify 的设置：

```
cat /proc/sys/fs/inotify/max_user_instances 
```

如果文件存在，将其设置为更高的值可能会有所帮助：

```
echo 8704 > /proc/sys/fs/inotify/max_user_instances 
```

# silverlight - Silverlight 中的 MEF 封装目录

> ID：10086339
> 
> 赞同：1
> 
> 时间：2012-04-10T09:40:31.887
> 
> 标签：silverlight

嗨，我是 MEF 的新手，我想知道包目录和部署目录之间的区别。哪个更好用于下载动态 .xap 文件。

# javascript - SVG 元素未在 Opera 和 IE 中接收事件

> ID：10086341
> 
> 赞同：6
> 
> 时间：2012-04-10T09:40:35.640
> 
> 标签：javascript, html, internet-explorer, svg, opera

我有一个网页，其中 IMG 元素上方有 SVG，应该在其上绘制形状。

绘图在浏览器中正确执行。但是当涉及到接收事件时，IMG 实际上似乎阻止了事件/接收它（它本身没有附加任何事件，因此它没有被显式停止）。

示例： http:
[//jsfiddle.net/UvRVX/12/](http://jsfiddle.net/UvRVX/12/)（固定标记，添加圆圈）FF，Chrome：*“svg received mousedown”*（正确）
Opera，IE9：-nothing-（错误）

当图像通过 CSS 可见性或 display: none 隐藏时，它开始工作，但这种方式当然不能使用。

如何将 SVG 元素放在 IMG 元素上方以便它可以接收事件？（在 Opera，IE9 中）
谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T19:54:21.803

为什么这不起作用有两个原因：

1\. svg 为空。
即使你给了它一个高度和宽度，我相信一些浏览器在你实际添加一个形状之前不会给它分配一个真实的大小。您可以通过在此处放置一个空矩形来解决此问题：

`<rect x="0" y="0" width="300" height="300" stroke="black" stroke-width="0" fill="none"></rect>`

2.因为`pointer-events`财产。[你可以在这里](http://www.w3.org/TR/SVG/interact.html#PointerEventsProperty)阅读更多。默认情况下，它的值是`visiblePainted`，所以我真的不知道为什么 Chrome 和 FF 允许事件通过。您需要将其设置为`"all"`

还要小心 html，它的格式很糟糕。

### 使固定：

[http://jsfiddle.net/mihaifm/ptLrB/2/](http://jsfiddle.net/mihaifm/ptLrB/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T06:25:07.277

Opera 和 IE9 实际上是正确的，因为圆圈的填充设置为`none`. 当您单击圆圈的笔划时，警报会显示在所有浏览器中。由于圆圈的填充是透明的，因此在圆圈内单击会点击图像。

添加`pointer-events="visible"`到圆以忽略圆的填充值。

[示例代码/JSFiddle](http://jsfiddle.net/VZvPv/3/)

来自[指针事件的 SVG 规范](http://www.w3.org/TR/SVG/interact.html#PointerEventsProperty)：

> **可见的**
> 
> 当“可见性”属性设置为可见并且指针位于元素的内部（即填充）或周边（即笔划）上时，给定元素可以是指针事件的目标元素。'fill' 和 'stroke' 的值不影响事件处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T19:48:30.817

有趣的错误。当涉及到 z-index css 值时，非 html 元素（此处`<svg>`：）似乎表现不正确。

为了修复它，我将它简单地包装在另一个 div 中：http: [//jsfiddle.net/UvRVX/6/](http://jsfiddle.net/UvRVX/6/)

但是，如果您在 svg 中绘制某些内容，这些元素将正确显示并接收事件：http: [//jsfiddle.net/UvRVX/7/](http://jsfiddle.net/UvRVX/7/)（单击红色方块会发出警报，但不会出现在边缘） .

# javascript - 从 Blogger 小工具访问帖子标题和 URL

> ID：10086347
> 
> 赞同：0
> 
> 时间：2012-04-10T09:40:59.640
> 
> 标签：javascript, blogger, diaspora

我正在尝试构建一个 Blogger 小工具，用于使用 Diaspora 共享帖子！我从使用HTML 和 JavaScript 的[Diaspora Sharing Service](http://www.basshero.org/page/show/dss)开始（你可以看看我[正在进行](http://www.bit-man.com.ar/diaspora.xml)的工作），发现 URL 和 TITLE 是空的

使用 post.url 或 window.location.href 访问 url 都无法获得有效值。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T10:01:05.697

也许您可以提供更多信息？我不清楚你到底在问什么，所以其他人也可能不清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T22:01:13.447

作为 DSS 的作者，我必须指出，我前段时间已经降低了它。相反，任何想要类似服务的人都应该使用基于 DSS的[Diaspora* Advanced Sharer 。](http://sharetodiaspora.github.com/about/)

至于如何让它与 Blogger 一起工作的问题，D*AS 对此有说明；

* * *

**博主博客**

此方法将在 Google +1 按钮旁边包含一个 Diaspora* 分享按钮。必须启用共享按钮。

*   输入您的仪表板并选择您的博客。
*   在模板部分中，单击编辑 HTML。如果出现警告，请单击继续。
*   选中展开小部件模板，按 Ctrl+F 并编写共享按钮。
*   找到线`<b:includable id='shareButtons' var='post'>`。之后，复制以下代码：

`<a expr:href='"http://sharetodiaspora.github.com/?url=" + data:post.url + "&title=" + data:post.title' target='_blank' title='Share on Diaspora'> <img src='http://joindiaspora.com/favicon.ico' style='width:16px; height:16px; padding:0; border:0; vertical-align:middle;'/> </a>`

* * *

附言。从我的 Apache 错误日志中发现了这个问题：P

# php - 将此表单数据下载到 XML

> ID：10086348
> 
> 赞同：0
> 
> 时间：2012-04-10T09:41:00.887
> 
> 标签：php, xml, forms

带有一些数据的简单表单，例如：

*   姓名

*   地方

*   价格

带有表单的页面将加载特定链接：mywebsite.it/data2xml.php 或 mywebsite.it/data2xml.xml。

编辑：这是我的表单页面：

```
<form method=post action="download.php">  
First name: <input type="text" name="firstname" />  
<br />  
Last name: <input type="text" name="lastname" />  
<br /> 
<input type="submit" name="submit"> 
</form> 
```

这是页面的链接[http://ts89.altervista.org/downloads/form2xml.php](http://ts89.altervista.org/downloads/form2xml.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:16:44.730

试试这个：

```
<!-- form.html -->
<form method=post action="download.php">  
First name: <input type="text" name="firstname" />  
<br />  
Last name: <input type="text" name="lastname" />  
<br />
<input type="submit" name="submit"> 
</form> 
```

然后你需要一些东西来创建 XML，因此：

```
<?php
// download.php

$firstname = $_POST['firstname'];
$lastname = $_POST['lastname'];

echo "
<?xml version=\"1.0\" encoding=\"UTF-8\"?>
<root>
    <firstname>{$firstname}</firstname>
    <lastname>{$lastname}</lastname>
</root>
"; 
```

这是*非常*基本的 - 您可能希望检查 post 元素的值。`<form>`另外，据我所知，您不需要第二个。我建议你做一些关于 PHP 的教程，并买一本关于它的书——如果没有一些扎实的、自主的学习，你只能学到这么多。

# maven - 使用来自不同 git 存储库的组件构建 maven 产品

> ID：10086350
> 
> 赞同：0
> 
> 时间：2012-04-10T09:41:02.980
> 
> 标签：maven

我们的项目有两个不同的 git 存储库 A 和 B。A 和 B 都是多模块项目。B的代码最终使用maven parent pom构建为eclipse产品。B 需要来自 A 的组件/功能，该组件/功能需要包含在 eclipse 产品中。我怎样才能实现这个功能。我是否需要将 A 的构建结果发布到网络服务器，以便 B 可以将其作为存储库访问？或者我可以将 A 作为对 B 的构建的依赖项，以便 B 可以将此组件打包到最终产品中？我在哪里/如何指定这个配置？

让我知道是否需要任何其他信息。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:45:11.423

您至少应该将项目 A 部署到本地存储库 (mvn install)。然后它将通过maven提供给项目B。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T09:49:15.337

如果您在项目 A 上运行“mvn install”，这应该可以在本地计算机上实现。如果您希望项目 A 中的工件可供其他开发人员使用，您需要设置一个 maven 存储库，例如 Archiva 并运行“mvn deploy”

# facebook - IE 浏览器中用于垂直滚动的 Facebook 评论 iframe 问题

> ID：10086353
> 
> 赞同：2
> 
> 时间：2012-04-10T09:41:13.777
> 
> 标签：facebook, facebook-comments

我知道不支持使用 iframe 实现的 facebook 评论。但我正在使用以下代码：

```
 <iframe src="https://www.facebook.com/plugins/comments.php?href=http://yahoo.com"  style="border:none; overflow:scroll; width:400px; height:562px;"  scrolling="yes" ></iframe> 
```

它在 Firefox 中运行良好，但在 IE 中运行良好。我只想要 iframe 中的 fb 评论。

# c# - 从 C# OracleDB 运行 SELECT 时没有数据

> ID：10086358
> 
> 赞同：1
> 
> 时间：2012-04-10T09:42:09.427
> 
> 标签：c#, oracle

我有一个从 Oracle DB 读取的 C# 应用程序，但在我的应用程序中没有数据。如果我直接从管理工具运行相同的 SELECT 语句，它会很好地返回数据。

```
static void Selectexample()
    {
       string connStr = @"Data Source=localhost;user id=system;password=123456";

       DbProviderFactory dbFactory= DbProviderFactories.GetFactory("System.Data.OracleClient"); 

        DbConnection con = dbFactory.CreateConnection();
        con.ConnectionString = connStr;

        string sql;
        sql = "SELECT * FROM person";

        DbCommand cmd = dbFactory.CreateCommand();
        cmd.Connection = con;
        cmd.CommandText = sql;

        try
        {   
            con.Open();

            DbDataReader reader = cmd.ExecuteReader();

            string headline = "";
            for (int i = 0; i < reader.FieldCount; i++)
            {
                string s = reader.GetName(i);
                headline += s.PadLeft(20) + " | ";
            }

            Console.WriteLine(headline);

            while (reader.Read())
            {

                string line = "";
                string s1 = (string)reader[0];
                string s2 = (string)reader[1];

                line += ("");
                line += s1.PadLeft(20) + " | ";
                line += s2.PadLeft(20) + " | ";

                Console.WriteLine(line);

            }
        }
        catch (DbException ex)
        {
            Console.WriteLine("fejl: " + ex.Message);
        }
        finally
        {   
            con.Close();
        }

        Console.WriteLine();
        Console.WriteLine("---");
    } 
```

Person 的表定义：

```
create table person
(
cpr char(10) primary key,
name varchar(25),
job varchar(25),
salary int,
zip char(4),
foreign key (zip) references zipcode(zip)
); 
```

我在 x64 Windows 上运行带有 x86 Oracle 驱动程序的 .Net 3.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T18:41:58.823

感谢大家的建议。事实证明，Management Studio 在插入后没有立即提交数据。您必须在提交数据之前关闭该工具。现在我的数据显示在我的应用程序中。

# javascript - 更改完整日历中单元格的颜色

> ID：10086360
> 
> 赞同：2
> 
> 时间：2012-04-10T09:42:18.850
> 
> 标签：javascript, jquery, fullcalendar

我需要更改 arshaw 完整日历的单元格的颜色。

我的要求是：公司提供的假期列表的 td 单元格应该有相同的颜色。员工休假列表的 td 单元格应该有相同的颜色。

我们如何实现这一点。我可以更改事件的颜色，但不能更改单元格的颜色。

另外，如果我们可以根据假期更改单元格内一天的颜色并离开。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-28T12:59:35.203

如果您使用的是 Jquery-Ui 主题，则需要删除 ui-widget-content 类并应用您自己的类。在下面的代码中，我使用的是紫色平面颜色的 40x100 图像。

CSS

```
.holiday
{
    border:1px solid #69196c;
    background: #764ead url(holiday.png) 50% top repeat-x; 
    color: white;   
} 
```

JS 完整日历

```
dayRender: function (date, cell) {

    if ($.inArray(date, holidays) >= 0) {

        // if you aren't using ui theme, just remove this line
        $(cell).removeClass('ui-widget-content');                            
        $(cell).addClass('holiday');

    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T21:22:55.520

fullCalendar 中的单元格是表格单元格 - 事件在这些单元格的顶部呈现为浮动 div。因此，假设在月视图中，每个日单元格都有一个与之关联的类。比如星期日的“fc-sun”，星期一的“fc-mon”等等。每个单元格还具有关联的天数类 - 例如“fc-day1”、“fc-day2”。

因此，假设您要更改所有星期日的背景颜色：

```
.fc-sun {
  background-color: #FF0000;
  color: #FFFFFF;
} 
```

等等。希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T18:11:45.427

```
eventRender: function (event, element, monthView) 
{
    if (event.title == "HOLIDAY") 
    { 
        var one_day = 1000 * 60 * 60 * 24;
        var _Diff = Math.ceil((event.start.getTime() - monthView.visStart.getTime())/(one_day));
        var dayClass = ".fc-day" + _Diff; 
        $(dayClass).addClass('holiday-color');
    }
} 
```

另外，请记住，您需要在月份更改时清除这些类名，否则它们将在所有月份保持相同的背景颜色。

因此，您可能希望/需要使用 gotodate 手动管理日历的导航，然后使用 jquery 的 removeClass() 选择器清除类名。

您需要做的是绑定完整日历的下个月和上个月按钮的单击事件，并执行类似的操作

```
$("#nextMonthBtn").click(function () {
    // current year and month should be maintained, can be a`enter code here`enter code here`ccessed on loading attribute of the fullcalendar
    //manually manage navigation`enter code here`
    $('td').removeClass('holiday-color');
    calRef.fullCalendar('gotoDate', _currentYear, _currentMonth, 1) 
}); 
```

有关其他信息，请参阅：http: [//vishaljadhav.net/coloring-certain-days-when-using-full-calendar/](http://vishaljadhav.net/coloring-certain-days-when-using-full-calendar/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-02T18:09:39.923

由于他们已经更新了 fullcalendar 我发布了一个新的解决方案，我知道问题已经过去了几年，但我想迟到总比没有好:)

```
eventRender: function(event, element, monthView) {
     if (event.className == "holiday") {
           var dateString = $.fullCalendar.formatDate(event.start, 'yyyy-MM-dd');
                $('td[data-date="' + dateString + '"]').addClass('fully_colored_holiday');
           }
     } 
```

这是课程：

```
.fully_colored_holiday,
.fully_colored_holidaydiv,
.fully_colored_holidayspan{
     background:#FF8C8C !important;
} 
```

# java - 在 Eclipse 中为 EAR 项目添加外部 jar 文件

> ID：10086361
> 
> 赞同：2
> 
> 时间：2012-04-10T09:42:21.403
> 
> 标签：java, eclipse, jakarta-ee

我需要将外部 jar 文件添加到 EAR 项目。我确实添加了，但是 jar 文件没有反映在 lib 目录中，它显示在 lib 目录下面。我通过右键单击部署描述符、导入-> Java EE Utility Jar 并选择从文件夹中复制来添加这些 jar 文件。当我在 lib 目录中拖动 jar 文件时，velocity jar 文件在 eclipse 项目资源管理器中更改为 .ear 文件。

我附上了项目浏览器的快照。您能否让我知道如何将外部 jar 文件添加到 ear 项目，因为我的 EJB 需要包含外部 jar。

![项目浏览器的图像](../Images/6851c829a5c332e5cd5cbf5f30824a8b.png)

我什至在我的 EJB 清单文件中添加了 jar 文件的类路径 `Class-Path: ErpServices-ejb.jar velocity-1.6.4.jar velocity-1.6.4-dep.jar xwork-core-2.2.1.1.jar` 期待您的回复。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-21T07:40:43.227

**直接在文件夹***EarContent/lib* 下添加这些罐子，然后一切就完成了。

 **IE，*EarContent/lib/foo.jar*会工作，但*EarContent/lib/dir/foo.jar*不会。

一个类似的问题：[这里](https://stackoverflow.com/questions/5699876/adding-external-jars-to-ejb-project-using-ear-content-folder/16664527#16664527)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T10:24:20.750

只需尝试项目根文件夹右键单击属性->构建路径->添加外部jar

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T14:56:36.557

手动将其添加到 lib 文件夹（在 IDE 外部），而不是拖放，刷新 IDE，右键单击 EAR 项目并在模块和依赖项中，确保它包含在 lib 文件夹中并作为依赖。**

# matlab - ode45 函数处理时变量列行发生变化？

> ID：10086368
> 
> 赞同：0
> 
> 时间：2012-04-10T09:42:32.573
> 
> 标签：matlab, math

我想知道为什么当我运行如下代码时，变量`y`会从 2*2 变为 4*1？

```
function testforleader()   
    %tspan=[0 10];
    %y0=[[10 10];[3 3]];
    y = zeros(2)
    [t,y] = ode45('leadermove',[0 10],[10 10;3 3]);

function ydotr=leadermove(t,y)
    y
    ydotr = [y(2,:);[sin(t) cos(t)]]; 
```

命令窗口中的消息将显示如下：

> y =

```
 0     0
 0     0 
```

> y =

```
10
 3
10
 3 
```

然后函数 ode45 似乎只接收变量的**一**列向量`y`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:50:56.587

您的呼叫在 rhs 上`ode45`没有：`y`

```
[t,y]=ode45('leadermove',[0 10],[10 10;3 3]); 
```

但在左旋。如果它在调用之前存在，它将被调用覆盖。也许您应该将 lhs 上的变量重命名为`yout`?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:58:00.367

您的 leadermove 功能对我不起作用，因此我无法对此进行测试。我认为[ode45](http://www.mathworks.co.uk/help/techdoc/ref/ode23.html)的第三个参数应该是一个向量，所以也许将其更改为：

```
[t,y]=ode45('leadermove',[0 10],[10 10 3 3]); 
```

会修复它。此外，正如马克所说，

```
y = zeros(2); 
```

什么都不做，因为 ode45 在返回输出时会覆盖它。您可以通过以下方式解决此问题：

```
y = zeros(2);
[t,y(:)]=ode45('leadermove',[0 10],[10 10 3 3]); 
```

但我不知道这是否可行，而且我怀疑你现在调用 ode45 的方式无论如何都会给你错误的答案。

# java - GWT Google Maps V3 叠加小部件

> ID：10086369
> 
> 赞同：4
> 
> 时间：2012-04-10T09:42:34.070
> 
> 标签：java, javascript, google-maps, gwt, google-maps-api-3

我正在使用 GWT google maps V3 API，我需要在地图上显示自定义形状。对于简单的元素，我使用了 Polygon、Circle 和 InfoWidnow 类，但我想显示其他一些小部件，如按钮或自定义面板。有没有办法使用 OverlayView 类来做到这一点？我尝试了一个简单的解决方案：一个包含 MapWidget 和我的自定义小部件的 AbsolutePanel，放在顶部，但我想尽可能多地使用 gwt 谷歌地图类。我已阅读文档并搜索了答案，但我无法弄清楚，因此代码示例会很棒。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T10:22:21.453

只需将标准 GWT API 与您的地图 V3 API 一起使用。它们将互连得足够好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:24:30.303

我在这里找到了我需要的东西（javascript v3 api）： [https ://developers.google.com/maps/documentation/javascript/overlays#CustomOverlays](https://developers.google.com/maps/documentation/javascript/overlays#CustomOverlays)

方法名称和类非常相似，因此不难弄清楚应该如何使用 GWT 类（如 OverlayView）。

这是在地图上呈现的自定义小部件（包含 SVG 元素和动画）的示例：

```
private class TargettingOverlay extends OverlayView {

    protected Element div ;
    protected PanelWrapper panelWrapper;
    private TargettingEffect targetEffect;

    TargettingOverlay(){
        targetEffect = new TargettingEffect();
        targetEffect.setLinedDimension(10500);
        targetEffect.setLinesOffset(-5000);
    }

    void positionTarget(LatLng loc, boolean withoutLines){
        if (targetEffect == null )
            return;

        if (loc == null) {
            targetEffect.setElementsVisible(false);
            return;
        }
        targetEffect.setElementsVisible(true);

        Point p = null;
        Point sw = null;
        Point ne = null;
        LatLng locSW = (LatLng)this.getMap().getBounds().getSouthWest();
        LatLng locNE = (LatLng)this.getMap().getBounds().getNorthEast();

        //
        p = (Point)getProjection().fromLatLngToDivPixel(loc);
        sw = (Point)getProjection().fromLatLngToDivPixel(locSW);
        ne = (Point)getProjection().fromLatLngToDivPixel(locNE);

        targetEffect.setWithoutLinles(withoutLines);
        targetEffect.target((int)ne.getY(), (int)p.getY(), (int)sw.getX(), (int)p.getX());
    }

    @Override
    public void draw() {
        Point ne = (Point)getProjection().fromLatLngToDivPixel((LatLng)
                this.getMap().getBounds().getNorthEast());
        Point sw = (Point)getProjection().fromLatLngToDivPixel((LatLng)
                this.getMap().getBounds().getSouthWest());

        div.getStyle().setTop(ne.getY(), Unit.PX);
        div.getStyle().setLeft(sw.getX(), Unit.PX); 
    }

    @Override
    public void onAdd() {
        div = DOM.createDiv();

        getPanes().getOverlayLayer().appendChild(div);

        panelWrapper = new PanelWrapper(div);
        panelWrapper.attach();          

        targetEffect.setContainer(panelWrapper);
    }

    @Override
    public void onRemove() {
        div.removeFromParent();
        panelWrapper.removeFromParent();

        div = null;
        panelWrapper = null;
    }

} 
```

# android - android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 适用于应用程序级别，但不适用于活动级别。有什么线索吗？

> ID：10086371
> 
> 赞同：16
> 
> 时间：2012-04-10T09:42:39.640
> 
> 标签：android, android-activity, android-manifest, statusbar, android-theme

我需要将我的一项活动称为`MyNoStatusBarActivity.java`全屏活动。

我在清单中添加了：

```
<activity
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
    android:name=".MyNoStatusBarActivity"
    android:noHistory="true"
    android:label="@string/app_name"
    android:configChanges="touchscreen|keyboard|keyboardHidden|navigation|orientation">
    ...
</activity> 
```

在`onCreate`我的活动中：

```
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_NO_TITLE);

    getWindow().setFlags(
        WindowManager.LayoutParams.FLAG_FULLSCREEN,
        WindowManager.LayoutParams.FLAG_FULLSCREEN);
} 
```

这样做只是隐藏了 TITLE 栏而不是 STATUS 栏。

此外，如果我在应用程序级别使用清单主题而不是我的活动，它可以工作，但适用于我的应用程序的所有活动，这不是我想要的。我只想要一项特定活动的无状态栏。

帮助将不胜感激。谢谢！

PS：我很好，这种行为在 Honeycomb/ICS 中不再可用。我只需要 2.2 和 2.3

**编辑**

尝试了 SO 中其他解决方案中提到的所有建议，但尚未成功。主题在应用于应用程序级别但不适用于活动级别时有效。

我正在使用 HTC WildFire-S，安卓版本 2.3.5

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-26T15:48:55.920

在您的清单 xml 中，在应用程序级别放置以下内容：

```
<application
    ...
    android:theme="@android:style/Theme.NoTitleBar" >
</application> 
```

并在您要全屏显示的活动中输入：

```
<activity

     android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
     ...
</activity> 
```

删除 onCreate 中的所有 setWindowsFeature 或 setFlag 方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-10T09:55:58.060

我认为您只需要`android:theme="@android:style/Theme.NoTitleBar.Fullscreen`退出 mainfest，坚持只调用代码，它总是对我有用。您使用的是哪种测试设备？

还要确保这些电话是*在*你打电话之前来`setContentView(R.layout.xxx)`的

```
 super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.xxx); 
```

检查所有代码的`android:theme`声明，即清单和单独的布局 xml 文件。听起来好像在应用程序级别声明它是有效的（因为它会覆盖任何后续主题声明）但是有些东西会覆盖您的活动级别请求。

尝试在整个项目中搜索“android:theme”并删除您不是 100% 确定需要的任何内容，以这种方式进行测试

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-04T07:12:11.197

我把它放在我的活动中：

```
requestWindowFeature(Window.FEATURE_NO_TITLE);
setContentView(R.layout.activity_splash); 
```

在我的清单中我没有修改，这是我的，没有修改：

```
android:theme="@style/AppTheme" 
```

在我的活动 xml 中：

```
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-11T09:57:19.400

这可以解决问题：

```
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_NO_TITLE);

    getWindow().setFlags(
        WindowManager.LayoutParams.FLAG_FULLSCREEN,
        WindowManager.LayoutParams.FLAG_FULLSCREEN);

    setContentView(R.layout.activity_main);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-10T21:32:05.627

这将解决您的问题

只需更改您的清单 @android:style... 为 @style/..

```
<application
    ...
    android:theme="@style/Theme.AppCompat.NoActionBar">
    ...
</application> 
```

# php - 使用 FOSUserBundle 的多个配置文件表单

> ID：10086374
> 
> 赞同：2
> 
> 时间：2012-04-10T09:42:49.600
> 
> 标签：php, symfony, fosuserbundle

我正在使用 Symfony 2 和 FOSUserBundle 创建一个应用程序。我正确配置了自己的 UserBundle。我的用户实体有很多不同类别的属性（例如位置设置、个人设置……），所以我想为每个类别制作不同的表单，以便我可以在不同的页面上显示每个设置类别。

我知道如何制作自定义配置文件表单（位于 FOSUserBundle 文档中），我已经制作了多个 FormTypes 和一个附加控制器，但我无法使用当前用户数据填充它。我尝试了以下

```
$user = $this->container->get('security.context')->getToken()->getUser();
// Try 1
$form = $this->createForm(new InnerCharacteristicsType());  
// Try 2
$form = $this->createForm(new InnerCharacteristicsType($user));
// Try 3
$form = $this->createForm(new InnerCharacteristicsType(), $user);
// Try 4
$form = $this->createForm(new InnerCharacteristicsType(), array('user' => $user);

return $this->render('AcmeUserBundle:EditProfile:inner.html.twig', array('form' => $form->createView())); 
```

（当然，我没有同时尝试）

我还尝试通过将我的 InnerCharacteristics 表单添加到 services.yml 来使新表单成为服务，但我找不到任何关于此的文档。FOSUserBundle 本身中的 profile.xml 也不是很有帮助，因为我找不到参数指向的位置。此外，XML 到 YAML 的转换也不是很容易，因为关于此的文档不​​是很有帮助（这是必需的，因为 FOSUserBundle 配置在 XML 中，而我的 UserBundle 配置在 YAML 中）。

这就是我现在的 services.yml 中的内容：

```
acme_user.inner_characteristics_profile.form:
  class: Symfony\Component\Form\Form
  factory_service: form.factory
  factory_method: createNamed 
```

我希望有人能给我一些指示，下一步该去哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T22:29:39.740

这是创建表单的正确方法：

```
$form = $this->createForm(new InnerCharacteristicsType(), $user); 
```

在您的表单中，您应该执行以下操作：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    // Add fields
    $builder->add('name', 'text', array('label' => 'Name:'));
} 
```

这应该从表单内的对象加载`name`属性。`user`表单是否成功加载？

# android - 用 OpenCV 识别的完美对象

> ID：10086380
> 
> 赞同：3
> 
> 时间：2012-04-10T09:43:06.963
> 
> 标签：android, iphone, opencv, pattern-matching, object-detection

我有一个应用程序，我想一次跟踪图片中相当小的 2 个对象。这个应用程序应该在 Android 和 iPhone 上运行，所以算法应该是高效的。

对于我的客户来说，如果我们提供一些模式以及附加到要跟踪的对象的软件以具有可识别的目标，那是非常好的。

这意味着我可以自己制作一个图案。由于我对图像处理还不是很了解，所以我不知道图片中哪些对象最容易识别，即使它们很小。颜色也是可能的，尽管由于产生的开销而不希望单独处理多个平面。

谢谢你的建议！！最好的，

吉他流

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T06:45:50.337

如果我明白这一点，您的对象应该：

1.  可在 A4 上打印
2.  可识别达 4 米
3.  旋转不变性并不那么重要（我假设用户将手机+/-直立）

我建议打印一个大的棋盘并结合使用颜色匹配和角点检测。尝试不同的组合，看看在不同距离下哪种组合更快、更健壮。

**颜色：**如果您只想在一个通道上工作，您可以打印红色/绿色/蓝色*，然后只在相应的通道上工作。这已经会过滤很多并“免费”增加对比度。否则，根据我的经验，直方图反投影非常快。见[这里](http://opencv.itseez.com/doc/tutorials/imgproc/histograms/histogram_comparison/histogram_comparison.html#histogram-comparison)。

另外，假设您只有 4 个带有 RGB+黑色的正方形（见图），很容易得到所有红色轮廓，然后检查它是否具有正确的相邻颜色：右边的一块蓝色和一块绿色在它下面，两者的面积大致相同。仅此一项可能就足够强大了，并且相当于在 1 个通道上工作，因为对于每个步骤，您只访问一个特定通道（搜索红色轮廓，蓝色检查，绿色检查下方）。

![RGB 方块](../Images/f5fab60c9bbd4d7b5dca1ddccce28808.png)

如果您收到大量误报，则可以使用角点来过滤您的命中。在示例图像中，您已经有 9 个角，如果您将通道分开，实际上会更多，如果还不够，您可以制作一个真正的棋盘，其中包含多个正方形，以便拥有更多角。检查在 ROI 中检测到多少个角以拒绝误报可能就足够了，否则您还可以检查在 x 和 y 方向上检测到的角之间的间距是否均匀（即形成网格）。

**角点：**检测角点已经得到了很大的探索，这里有几种方法。我不知道每个的效率如何，但它们足够快，并且在您根据颜色减少了 ROI 之后，这应该不是问题。也许最简单的方法是简单地用十字腐蚀/扩张来找到角落。见[这里](http://opencv.itseez.com/doc/tutorials/imgproc/erosion_dilatation/erosion_dilatation.html)。您需要首先对图像设置阈值以创建二进制地图，可能基于上面提到的颜色。其他角检测器，例如 Harris 检测器，有[据可查](http://opencv.itseez.com/doc/tutorials/features2d/trackingmotion/harris_detector/harris_detector.html?highlight=harris%20detector)。

哦，我不建议使用 Haar 分类器。似乎不必要地复杂且速度不快（尽管对于复杂对象非常健壮：即如果您不能使用自己的模式），更不用说大量的训练工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T12:04:12.053

哈尔培训是您的朋友。

本教程应该可以帮助您入门： http: [//note.sonots.com/SciSoftware/haartraining.html](http://note.sonots.com/SciSoftware/haartraining.html)

基本上，您根据样本图像（大约 2000 个要跟踪的对象）训练称为分类器的东西。OpenCV 已经拥有在库中构建这些分类器和函数以检测对象所需的工具。

# iphone - 旋转图像后使用 UIImageWriteToSavedPhotosAlbum 保存图像

> ID：10086381
> 
> 赞同：0
> 
> 时间：2012-04-10T09:43:08.103
> 
> 标签：iphone

UIImageWriteToSavedPhotosAlbum() 在我旋转图像之前工作得很好。根据条件，我想在保存之前旋转图像。但是当我这样做时，它恰好只有在旋转之后才具有低分辨率。

```
UIGraphicsBeginImageContextWithOptions(selectedPhoto.bounds.size, self.view.opaque, 2.0);
    [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
    myImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    if (rotate == true) {

        myImage = [myImage imageRotatedByDegrees:-90];
        UIImageWriteToSavedPhotosAlbum(myImage, nil, nil, nil);
    }else {

        UIImageWriteToSavedPhotosAlbum(myImage, nil, nil, nil);
    } 
```

请问有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:05:29.803

干得好。在orientation上设置特定的方向。使用时不要忘记释放rotatedImage。

```
UIImage *rotatedImage = [[UIImage alloc] initWithCGImage: originalImage.CGImage
                                                       scale: 1.0
                                                 orientation: UIImageOrientationLeft]; 
```

# android - 如何从移动设备 Android 获取纬度和经度

> ID：10086382
> 
> 赞同：0
> 
> 时间：2012-04-10T09:43:09.187
> 
> 标签：android, ip-address, latitude-longitude

在我的应用程序中，我想使用用户当前的纬度和经度。我使用以下[示例。](https://stackoverflow.com/questions/2227292/how-to-get-latitude-and-longitude-of-the-mobiledevice-in-android)

我仍然没有得到答案。

模拟器可以显示经纬度吗？

我该如何从IP地址获取纬度和经度？

快速响应对我有很大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:49:06.150

您的链接答案使用 GPS 获取当前位置。模拟器没有工作的 GPS 模块，因此在模拟器中测试时，您可以为 lat 添加假数据。并且很长。所以你可以测试代码。更多信息：[如何在 Android 模拟器中模拟 GPS 位置？](https://stackoverflow.com/questions/2279647/how-to-emulate-gps-location-in-the-android-emulator)

如果您想在 IP 地址上获取位置，您可以为此使用某些服务。这已经在这里讨论过：[What's the most simple way to get a user's latitude and longitude from an ip address](https://stackoverflow.com/questions/1576423/whats-the-simplest-way-to-get-a-users-latitude-and-longitude-from-an-ip-addres)

如链接帖子中所述，我不确定这些服务的准确性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T09:49:17.707

我认为不可能从 IP 地址返回位置数据，可能是国家/地区，但不能精确定位（高度、经度），因此您需要返回通过互联网传输但与 IP 无关的设备 gps 数据地址..

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T09:47:05.847

您可以使用一些不同的 API 来获取 IP 位置。这篇[文章](https://stackoverflow.com/a/4453380/1321642)提到了一些。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T05:56:54.547

我终于发现了我的错误。[这里](https://stackoverflow.com/questions/3145089/what-is-the-simplest-and-most-robust-way-to-get-the-users-current-location-in-a/3145655#3145655)给出的例子工作正常。错误是我的。在我手机的位置设置中，我忘记检查移动网络选项。一旦我检查了 tat 选项，我就得到了我当前位置的纬度和经度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-24T18:23:59.023

试试[http://www.iptolatlng.com/](http://www.iptolatlng.com/)，它提供 JSON 和 JSONP 结果

# android - 如何在 Android 中缩放普通视图

> ID：10086383
> 
> 赞同：2
> 
> 时间：2012-04-10T09:43:12.423
> 
> 标签：android, android-layout, android-webview

在我的应用程序中，我想为我的视图添加缩放功能。就像在我正在展示的活动中一样`LinearLayout`。但是到目前为止，我所知道的视图只能放大，`WebView`而不能放大正常视图。毕竟我想要的是放大/缩小功能，类似于`WebView`我的正常视图。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:49:36.783

构建一个自定义布局扩展线性布局或任何其他。覆盖其 onDraw 函数并手动提供缩放功能。SO上有很多用于缩放的示例。您可以关注他们。这可能会有所帮助：

[安卓捏缩放](https://stackoverflow.com/questions/5375817/android-pinch-zoom/5376108#5376108)

[如何在 android 中的 Gallery 上应用捏缩放？](https://stackoverflow.com/questions/9390367/how-to-apply-pinch-zoom-on-gallery-in-android)

# iphone - 如何从 iPhone 应用程序测试 Apple 推送通知？

> ID：10086387
> 
> 赞同：-2
> 
> 时间：2012-04-10T09:43:19.187
> 
> 标签：iphone, ios, testing, apple-push-notifications

在我以前的 iPhone 应用程序中，我没有使用该`Apple Push Notification`功能。在我当前的 iPhone 应用程序中，我想实现 Apple 推送通知功能。我提到了在 iPhone 应用中实现 APN 服务的方法，

```
- (void)application:(UIApplication*)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken {  
- (void)application:(UIApplication*)application didFailToRegisterForRemoteNotificationsWithError:(NSError*)error {  
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions { 
```

我们可以在将应用提交到 App Store 之前测试 APN 服务吗？如果可能，请提出您的想法来测试应用程序？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:22:27.107

为了向您的用户发送推送通知，您可以将每个用户的设备令牌存储在您自己的数据库中。然后，您可以向每个用户发送一条消息，将消息有效负载发送给 Apple，Apple 会将消息发送给用户。

我建议使用[Easy APNS](http://www.easyapns.com/)来完成此操作。它易于设置、易于使用且功能强大。

# spring-integration - 弹簧集成：“没有可用的输出通道或回复通道标头”

> ID：10086396
> 
> 赞同：4
> 
> 时间：2012-04-10T09:43:48.347
> 
> 标签：spring-integration

我正在使用以下 SI 流程：

```
<integration:gateway id="notificationGateway"
             default-request-channel="start" 
             default-reply-channel="end"
             service-interface="com.supplier.NotificationGateway"/>
<integration:channel id="start"/>
<integration:service-activator id="securedFileTransfer" 
                   input-channel="start" 
                   ref="Submitter" 
                   method="submit" 
                   output-channel="end"/>
<integration:publish-subscribe-channel id="end"/> 
```

收到以下错误：

```
no output-channel or replyChannel header available?borg.springframework.integration.support.channel.ChannelResolutionException: no output-channel or replyChannel header available 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-28T07:38:12.707

谢谢这篇文章对我帮助很大。波纹管是我用来创建消息头的代码，从以前的频道消息到新创建的带有负载 myPayload 的消息

```
createSlotGateway.send(MessageBuilder.withPayload(myPayload).copyHeaders(messagePrev.getHeaders()).build()); 
```

# ruby-on-rails - Ruby on Rails 上的 JSON api

> ID：10086400
> 
> 赞同：4
> 
> 时间：2012-04-10T09:44:04.607
> 
> 标签：ruby-on-rails, json

我正在创建一个 JavaScript 网络应用程序。我想使用 Ruby on Rails 为 JSON 格式的数据提供 API。我正在完全用 JavaScript 编写前端，它将对 API 进行 Ajax 调用。这样，当我可以在不同平台上编写不同的应用程序时，我将拥有一致的数据 API。

我是 Ruby on Rails 的新手，我不确定这是否是一个好方法。如果是这样，你能帮我指出一个很好的教程来实现我刚才提到的后端吗？如果没有，请帮助提出一个好方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:48:20.960

Api 示例代码：[https ://github.com/pigon-web-services/api-app/blob/master/app/controllers/location_controller.rb](https://github.com/pigon-web-services/api-app/blob/master/app/controllers/location_controller.rb)

如何将此 api 与 javascript 一起使用：[http ://pigon.ws/examples/jsonp?api=locationapi](http://pigon.ws/examples/jsonp?api=locationapi)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T12:10:51.173

我还没有使用它，但是[spastorino 的 Rails-API gem](https://github.com/rails-api/rails-api)可能会有所帮助。

还有一个[Railscast](http://railscasts.com/episodes/348-the-rails-api-gem)，所以你可能想把它作为一个起点

# javascript - 在javascript中使用洪水填充算法为图像着色

> ID：10086401
> 
> 赞同：0
> 
> 时间：2012-04-10T09:44:10.217
> 
> 标签：javascript, jquery, html5-canvas

我正在尝试为图像的特定部分着色，但颜色适用于完整图像..有人可以帮我吗？

[http://jsfiddle.net/hsbQH/10/](http://jsfiddle.net/hsbQH/10/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:20:12.230

You should reconsider the structure of your code I got lost when I search for the initialization part (function names etc..). Also, I'm not sure if you do this in your own code, but you cannot get image data using an image that is not in your domain for security reasons.

Just draw a small rectangle and try to fill it, if it is not working, update your jsfiddle and ask here again

# git - 推送后如何重置遥控器上的分阶段更改？

> ID：10086405
> 
> 赞同：1
> 
> 时间：2012-04-10T09:44:23.890
> 
> 标签：git

我有两个非裸 git 存储库，一个是我在其中开发的本地机器，另一个在我构建的服务器上。在本地存储库中，我有一个带有“git push -f server”的提交后挂钩。每次我在本地机器上提交时，都会将更改推送到服务器。不幸的是，在远程 git 阶段“还原”了我的更改。我必须手动在服务器上执行“git reset HEAD --hard”，这很烦人。如何告诉 git 接受更改而不进行还原，或者如何自动在服务器上进行重置？我试图在服务器上添加一个接收后挂钩，但它不起作用。

我发现了一个类似的问题[How do I push to the current git branch on remote，并立即反映更改？](https://stackoverflow.com/questions/3523008/how-do-i-push-to-the-current-git-branch-on-remote-and-have-changes-reflected-im)，但它没有帮助（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:23:06.987

您可以选择：

*   直接推送到非裸仓库，在这种情况下，您需要一个 post-receive 挂钩来检查新`HEAD`的，如“[使用 Git 管理网站](http://toroid.org/ams/git-website-howto)”中所述并在“ [Git Post-Receive Hook for Website Staging](https://stackoverflow.com/questions/3838727/git-post-receive-hook-for-website-staging) ”中引用。
    正如您所指出的，赋予钩子执行权是关键。

```
    $ cat > hooks/post-receive
    #!/bin/sh
    GIT_WORK_TREE=/var/www/www.example.org git checkout -f
    $ chmod +x hooks/post-receive

```

*   或者，您可以推送到一个裸仓库，并有一个钩子切换到实时非裸仓库，从裸仓库中*提取*新提交：
    请参阅“[远程裸仓库上的 Git 子模块](https://stackoverflow.com/questions/9448682/git-submodule-on-remote-bare/9448794#9448794)”（您可以忽略子模块方面）

我倾向于支持第二种方法，这似乎比直接`HEAD`在非裸仓库上进行更改更“干净”。

# java - 在 Apache XMLRPC 环境中获取请求用户的 IP 地址？

> ID：10086411
> 
> 赞同：2
> 
> 时间：2012-04-10T09:44:48.190
> 
> 标签：java, jakarta-ee, servlets, xml-rpc

我有一个非常基本的 XMLRPC Servlet 服务器正在运行 - 完全遵循 Apache 人员建议的默认设置 (http://ws.apache.org/xmlrpc/server.html)。

我有什么方法可以从我的 XMLRPC 函数中访问请求者的 IP 地址吗？我正在设计一项服务，该服务通过 IP 地址记录从不同用户收到的请求。

例如，如果我从他们的示例中获取 Calculator 类，我可能会执行类似的操作，

```
public int add(int a, int b){
   IPAddress user = {magic incantation};
   Log.info("Summed " + a + " and " + b + " for " + user);
   return a + b;
} 
```

（显然这是一个玩具示例，但如果我知道该怎么做，我可以在我的程序中做我想做的事）

非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:57:24.627

处理请求时，您可以访问`HttpServletRequest`. 此对象提供方法[`getRemoteAddr()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getRemoteAddr%28%29)。

另外：在常见问题解答中，您会发现[此代码段](http://ws.apache.org/xmlrpc/faq.html#client_ip)用于获取 IP 并将其存储为 a `ThreadLocal`，以便您以后可以访问它（也许这比您想要的要多）。

片段的复制是：

```
public static class ClientInfoServlet extends XmlRpcServlet {
    private static ThreadLocal clientIpAddress = new ThreadLocal();

    public static String getClientIpAddress() {
        return (String) clientIpAddress.get();
    }

    public void doPost(HttpServletRequest pRequest, HttpServletResponse pResponse)
            throws IOException, ServletException {
        clientIpAddress.set(pRequest.getRemoteAddr());
        super.doPost(pRequest, pResponse);
    }
} 
```

# python - 使用两个参数调用函数 n 次

> ID：10086412
> 
> 赞同：1
> 
> 时间：2012-04-10T09:45:05.243
> 
> 标签：python

这是我第一次来，所以我希望你能耐心等待一个看起来很蹩脚的问题:)

我正在尝试编写一个名为的函数`do_n`，它接受一个函数对象和一个数字`n`，作为参数，然后调用给定的函数`n`时间。这是代码：

```
def name():
    print 'Jack'

def do_n(fo, x):
    if x <= 0:
        return
    print fo
    (fo, x-1) 
```

从 main 中进行函数调用时：

```
do_n(name, 3) 
```

我得到以下结果：

```
<function name at 0x01F93AF0> 
```

我试图让程序打印出来：

```
Jack
Jack
Jack 
```

提前谢谢了

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T09:49:08.240

您既没有调用该函数，也没有实际进行递归调用。修正版：

```
def name():
    print 'Jack'

def do_n(fo, x):
    if x <= 0:
        return
    fo()
    do_n(fo, x - 1) 
```

要调用函数`n`次数，您通常会在 Python 中使用 for 循环而不是尾递归：

```
for dummy in range(10):
    name() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T09:47:21.827

函数是 Python 中的一等对象。

```
fo() 
```

# c# - 印度网站上的 eBay API AddItem 调用返回“销售税/增值税已从列表中删除”错误

> ID：10086413
> 
> 赞同：0
> 
> 时间：2012-04-10T09:44:26.047
> 
> 标签：c#, ebay-api

我对任何类型的 API 应用程序都是全新的。现在我正在创建一个列表应用程序来列出 E-bay India 网站上的项目。使用的 API 版本是 767，沙盒 url 是[https://api.sandbox.ebay.com/wsapi](https://api.sandbox.ebay.com/wsapi)。我有 ebay（买家/卖家）和开发者帐户的沙盒帐户。

我收到错误消息：1) 根据新的销售税/增值税政策，销售税/增值税已从列表中删除。项目将成功列出，您可以修改列表以指定全包价格。2) 您尚未注册或您的付款方式注册有问题。

```
ItemType type = new ItemType();
 type.PaymentMethods = new BuyerPaymentMethodCodeTypeCollection();
 type.PaymentMethods.Add(BuyerPaymentMethodCodeType.PaisaPayAccepted); 
```

我还必须为每个州指定税收吗？有关增值税和运费的详细信息，这是我的片段：

```
private ShippingDetailsType getShippingDetails()
        {
            // Shipping details.
            ShippingDetailsType sd = new ShippingDetailsType();          
            SalesTaxType salesTax = new SalesTaxType();
            ReadSettings rs = new ReadSettings();
            rs.GetSettings();
            salesTax.SalesTaxPercent = 12f;
            salesTax.SalesTaxState = "MH";
            SalesTaxType s = new SalesTaxType();
            salesTax.ShippingIncludedInTax = true;
            salesTax.ShippingIncludedInTaxSpecified = true;
            sd.ApplyShippingDiscount = true;
            AmountType at = new AmountType();
            at.Value = 2.8;
            at.currencyID = CurrencyCodeType.INR;
            sd.InsuranceFee = at;
            sd.InsuranceOption = InsuranceOptionCodeType.NotOffered;
            sd.PaymentInstructions = "These are my instructions.";
            VATDetailsType vd = new VATDetailsType();
            vd.BusinessSeller = false;
            vd.BusinessSellerSpecified = false;
            vd.RestrictedToBusiness = false;
            vd.RestrictedToBusinessSpecified = false;
            vd.VATID = "VATSNO1234567890";
            vd.VATPercent = 12f;
            vd.VATPercentSpecified = true;
            vd.VATSite = "None";

            sd.ShippingType = ShippingTypeCodeType.Flat;
            //
            ShippingServiceOptionsType st1 = new ShippingServiceOptionsType();
            sd.SalesTax = salesTax;
            st1.ShippingService = ShippingServiceCodeType.IN_Express.ToString();
            at = new AmountType();
            at.Value = 50;
            at.currencyID = CurrencyCodeType.INR;
            st1.ShippingServiceAdditionalCost = at;
            at = new AmountType();
            at.Value = 50;
            at.currencyID = CurrencyCodeType.INR;
            st1.ShippingServiceCost = at;
            st1.ShippingServicePriority = 1;
            at = new AmountType();
            at.Value = 1.0;
            at.currencyID = CurrencyCodeType.INR;
            st1.ShippingInsuranceCost = at;
            sd.ShippingServiceOptions = new ShippingServiceOptionsTypeCollection(new ShippingServiceOptionsType[] { st1 });
            return sd;
        } 
```

*谢谢你的努力。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T03:41:31.130

因此，来自 Ebay 的`.IN`网站。[http://pages.ebay.in/help/sell/new-sales-tax-policy.html](http://pages.ebay.in/help/sell/new-sales-tax-policy.html) 您需要修改您的列表以包括总（全包）价格。

代码明智：

```
// Before you assign the Item's price
allInclusiveItemPrice = itemPrice * VAT; // Sales tax also if needed

Then set the item.price = allInclusiveItemPrice //BuyItNowPrice or Auction price 
```

我不确定如何为印度设定税率。
另外
2) 您尚未注册或您的付款方式注册有问题。
可能是个问题。我不确定这个错误在这种情况下意味着什么。

# c++ - 使用 Qt Signal 和 Slot 实现 c++ 回调

> ID：10086415
> 
> 赞同：3
> 
> 时间：2012-04-10T09:45:12.843
> 
> 标签：c++, qt

我创建了一个具有以下接口和回调的库。我想用 QT Signal and Slot 实现它。

是否可以用 Signal 和 slot 替换 IWifiCameraDiscovery

```
class IWifiCameraDiscovery
{
    public:

      virtual int InitialiseWiFiDiscovery(IWifiCameraEnumerationCallback*) = 0;

      virtual void UnInitialiseWiFiDiscovery() = 0; 

      virtual int   EnumerateWiFiDevice() = 0;  
 };

  class IWifiCameraEnumerationCallback
  {
  public:

virtual void onWiFiDeviceDiscovered( WiFiDeviceInfo* pDeviceInfo,unsigned short nNoOfDevice) = 0;   

virtual void onDiscoveryTimeout() = 0;
 }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:56:59.967

是的，以一种非常直接的方式。

```
class IWifiCameraDiscovery
{
public:
    virtual int InitialiseWiFiDiscovery() = 0;    
    virtual void UnInitialiseWiFiDiscovery() = 0;     
    virtual int EnumerateWiFiDevice() = 0; 

signals: 
    void onWiFiDeviceDiscovered(WiFiDeviceInfo* pDeviceInfo, unsigned short nNoOfDevice);   
    void onDiscoveryTimeout();
}; 
```

在您的实现中，而不是直接调用回调：

```
callback.onWiFiDeviceDiscovered(pDevInfo, x); 
```

你会发出一个信号：

```
emit onWiFiDeviceDiscovered(pDevInfo, x); 
```

您将使用`QObject::connect`这些信号将这些信号连接到另一端的实际接收器（插槽）。请注意，发出信号比调用虚函数更昂贵。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T09:48:26.617

试试这个简单的例子

```
#include <QApplication>
#include <QFont>
#include <QPushButton>
#include <QWidget>

class MyWidget : public QWidget
{
public:
    MyWidget(QWidget *parent = 0);
};

MyWidget::MyWidget(QWidget *parent)
    : QWidget(parent)
{
    setFixedSize(200, 120);

    QPushButton *quit = new QPushButton(tr("Quit"), this);
    quit->setGeometry(62, 40, 75, 30);
    quit->setFont(QFont("Times", 18, QFont::Bold));

    connect(quit, SIGNAL(clicked()), qApp, SLOT(quit()));
}

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);
    MyWidget widget;
    widget.show();
    return app.exec();
} 
```

你可以这样使用

```
class IWifiCameraDiscovery
{      
 public slots:
    void UnInitialiseWiFiDiscovery();

 signals:
    void EnumerateWiFiDevice();
} 
```

# ios - Cocos2D 游戏在旧 Ipad 中崩溃

> ID：10086417
> 
> 赞同：0
> 
> 时间：2012-04-10T09:45:21.933
> 
> 标签：ios, ipad, cocos2d-iphone, memory-warning

我在 cocos2D 中开发了一个游戏。我曾经在我的旧 Ipad 和我的新 Ipad2（都更新到 IOS 5.0）中构建和运行游戏。在 GDB 中它显示内存警告级别 1 并自动释放未使用的精灵和精灵表。**由于这个原因，我的游戏在旧 Ipad 中崩溃，但在我的新 Ipad2 中运行良好。我**的旧 Ipad 有什么问题？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:49:31.857

这本身不是问题 - 您的旧 iPad 的内存比新 iPad 少:)

您需要使用更少的内存（或在收到内存警告时释放更多内存！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T19:51:00.243

[您的“旧”iPad 1 有 256 MB 内存。iPad 2 有 512 MB。](http://en.wikipedia.org/wiki/List_of_iOS_devices#iPad)

从那和“内存警告级别1”来看，我认为问题很明显。

解决方案是使用更少的内存，至少在 iPad 1 上是这样。

# perl - 在 Perl 中测试查询字符串 unicode 处理

> ID：10086420
> 
> 赞同：3
> 
> 时间：2012-04-10T09:45:26.677
> 
> 标签：perl, testing, unicode, query-string

当我对 Unicode 问题感到困惑时，我正在尝试编写一个测试查询字符串解析的示例。简而言之，字母“Omega”（Ω）似乎没有被正确解码。

*   统一码：U+2126
*   3字节序列：\xe2\x84\xa6
*   URI 编码：%E2%84%A6

所以我写了这个测试程序来验证我可以用 URI::Encode “解码” unicode 查询字符串。

```
use strict;                                                                                                                                                                    
use warnings;
use utf8::all;    # use before Test::Builder clones STDOUT, etc.
use URI::Encode 'uri_decode';
use Test::More;

sub parse_query_string {
    my $query_string = shift;
    my @pairs = split /[&;]/ => $query_string;

    my %values_for;
    foreach my $pair (@pairs) {
        my ( $key, $value ) = split( /=/, $pair );
        $_ = uri_decode($_) for $key, $value;
        $values_for{$key} ||= [];
        push @{ $values_for{$key} } => $value;
    }
    return \%values_for;
}

my $omega = "\N{U+2126}";
my $query = parse_query_string('alpha=%E2%84%A6');
is_deeply $query, { alpha => [$omega] }, 'Unicode should decode correctly';

diag $omega;
diag $query->{alpha}[0];

done_testing; 
```

以及测试的输出：

```
query.t .. 
not ok 1 - Unicode should decode correctly
#   Failed test 'Unicode should decode correctly'
#   at query.t line 23.
#     Structures begin differing at:
#          $got->{alpha}[0] = 'â¦'
#     $expected->{alpha}[0] = 'Ω'
# Ω
# â¦
1..1
# Looks like you failed 1 test of 1.
Dubious, test returned 1 (wstat 256, 0x100)
Failed 1/1 subtests 

Test Summary Report
-------------------
query.t (Wstat: 256 Tests: 1 Failed: 1)
  Failed test:  1
  Non-zero exit status: 1
Files=1, Tests=1,  0 wallclock secs ( 0.03 usr  0.01 sys +  0.05 cusr  0.00 csys =  0.09 CPU)
Result: FAIL 
```

在我看来 URI::Encode 可能在这里被破坏，但切换到 URI::Escape 并使用 uri_unescape 函数会报告相同的错误。我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T10:06:12.563

URI 编码字符仅表示 utf-8 序列，而 URI::Encode 和 URI::Escape 仅将它们解码为 utf-8 字节字符串，并且它们都不将字节字符串解码为 UTF-8（这是正确的行为一个通用的 URI 解码库）。

换句话说，您的代码基本上是这样： `is "\N{U+2126}", "\xe2\x84\xa6"`这将失败，因为经过比较，perl 将后者升级为 3 个字符长度的 latin-1 字符串。

您必须使用`Encode::decode_utf8`after手动解码输入值`uri_decode`，或者比较编码的 utf8 字节序列。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T10:06:52.177

URI 转义表示八位字节并且对字符编码一无所知，因此您必须自己从 UTF-8 八位字节解码为字符，例如：

```
$_ = decode_utf8(uri_decode($_)) for $key, $value; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-10T16:05:16.140

在您自己对问题的解释中，可以在不正确的细节中看到该问题。您正在处理的实际上是：

*   Unicode 代码点：U+2126
*   代码点的 UTF-8 编码：\xe2\x84\xa6
*   codepoint的UTF-8编码的URI编码：%E2%84%A6

问题是您只撤消了其中一种编码。

已经提出了解决方案。我只是想提出另一种解释。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T13:20:24.477

我建议您看看[为什么现代 Perl 默认避免使用 UTF-8？](https://stackoverflow.com/questions/6162484/why-does-modern-perl-avoid-utf-8-by-default)对这个话题进行彻底的讨论。

我会在那里添加讨论：

*   你会注意到页面上有很多奇怪的字形。这是作者故意的。
*   我已经尝试过线程中推荐的 Symbola 字体，它在 Win 7 上看起来很糟糕。YMMV。
*   阅读*为什么现代 Perl 默认避免使用 UTF-8？*过于频繁可能会导致抑郁和对你的生活选择挥之不去的怀疑。

# c# - 获取基本url的正则表达式

> ID：10086423
> 
> 赞同：1
> 
> 时间：2012-04-10T09:45:35.193
> 
> 标签：c#, regex, asp.net-mvc-2

我得到了一个很长的字符串，其中包含查询字符串和一些常规站点 url。它看起来像

```
http://www.mysite.com/site/site?pageId=1234&otherId=4321 
```

我想`http://www.mysite.com`从这个字符串中得到。我想也许正则表达式可以解决问题，但我没有写任何东西:)所以我能得到一些帮助吗？

**编辑**
我需要一个解决方案，以便我可以传递 url 字符串并从中获取基本 url。不是我当前的网址

谢谢大家，一如既往的感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:48:49.580

请试试这个：

```
string uri = Request.Url.GetLeftPart(UriPartial.Authority); 
```

您也可以检查一下：

```
var url = new Uri("http://www.mysite.com/site/site?pageId=1234&otherId=4321");
string uri = url.GetLeftPart(UriPartial.Authority); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T10:10:14.053

解决方案

```
var url = new Uri("http://www.mydomain.com/Site/Subsite?page=site");
var baseUrl = url.Host; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-26T12:38:34.820

正如作者要求的正则表达式，就是这样：

```
 static string ExtractBaseUrl(string url)
        {
            Regex regex = new Regex(@"^https?:\/\/[^\/]+");
            Match resultm = regex.Match(url);
            if (resultm.Success)
            return resultm.Groups[0].Value;
            else return null;
        } 
```

# java - ZipInputStream 无法读取 zip 文件的所有信息

> ID：10086424
> 
> 赞同：0
> 
> 时间：2012-04-10T09:45:43.150
> 
> 标签：java, zipinputstream

我写了一些代码，`ZipInputStream`但它有问题。

```
ZipInputStream zin=null;
zin=new ZipInputStream(new BufferedInputStream(
    new FileInputStream("e:/testzip.zip")));
ZipEntry ze;
while((ze=zin.getNextEntry())!=null) {

     System.out.println("readfile"+ze.getName());

     int c=0;

     while((c=zin.read())>0) {
       System.out.write(c);
     }
 }
 zin.close(); 
```

文件中有 3 个文本文件`testzip.zip`。也就是说，正确的输出应该是三个文件名及其内容。但是，我的输出是 3 个文件名和它们的 2 个内容。为什么只有 2 个内容，而不是 3 个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:51:11.730

我制作了一个包含 3 个文本文件的 zip；它们是文本文件这一事实对于以下代码的工作很重要。我阅读了所有条目并写出它的名称和内容：

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.util.Enumeration;
import java.util.zip.ZipEntry;
import java.util.zip.ZipFile;

public class Main {

    public static void main(String[] args) throws Exception {
        ZipFile zipFile = new ZipFile("D:\\zip.zip");
        Enumeration<? extends ZipEntry> entries = zipFile.entries();
        while(entries.hasMoreElements()) {
            ZipEntry zipEntry = entries.nextElement();
            System.out.println(zipEntry.getName());
            BufferedReader bufferedeReader = new BufferedReader(new InputStreamReader(zipFile.getInputStream(zipEntry)));
            String line = bufferedeReader.readLine();
            while(line != null) {
                System.out.println(line);
                line = bufferedeReader.readLine();
            }
            bufferedeReader.close();
        }
        zipFile.close();
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T10:13:43.707

对于这个用例，似乎[ZipFile](http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipFile.html)可能更合适，因为它可以为您提供 zip 文件的 TOC。

# c - mingw 中的 stat() 工作不正确

> ID：10086425
> 
> 赞同：0
> 
> 时间：2012-04-10T09:45:46.070
> 
> 标签：c, mingw, stat

我创建了一个简单的代码：

```
int main(int argc, char *argv[]) 
{
    struct stat eStat;
    int result;
    struct stat eStat2;
    int result2;

    result = stat("g:/temp/dvd", &eStat);
    printf("result=%d | eStat.st_mode=%d | S_IFMT=%d | S_IFDIR=%d\n",result,eStat.st_mode,S_IFMT,S_IFDIR);

    if((eStat.st_mode & S_IFMT) == S_IFDIR)
        printf("It is a dir!!!\n");
    else
        printf("not a dir\n");

    result2 = stat("g:\\temp\\test.txt", &eStat2); 
    printf("test.txt result2=%d | eStat2.st_mode=%d | S_IFMT=%d | S_IFDIR=%d\n",result2,eStat2.st_mode,S_IFMT,S_IFDIR);

    return 0;
} 
```

我在中编译这段代码`VS2010(Windows7, C++)`，输出：

```
result=0 | eStat.st_mode=16895 | S_IFMT=61440 | S_IFDIR=16384               
It is a dir!!!                    
test.txt result2=0 | eStat2.st_mode=33206 | S_IFMT=61440 | S_IFDIR=16384 
```

我在中编译这段代码`Linux(Debian stable, gcc)`，输出：

```
result=0 | eStat.st_mode=16877 | S_IFMT=61440 | S_IFDIR=16384      
It is a dir!!!                 
test.txt result2=0 | eStat2.st_mode=33188 | S_IFMT=61440 | S_IFDIR=16384 
```

当我编译时`mingw(gcc) on Windows7`，输出：

```
result=0 | eStat.st_mode=6 | S_IFMT=61440 | S_IFDIR=16384           
not a dir                
test.txt result2=0 | eStat2.st_mode=6 | S_IFMT=61440 | S_IFDIR=16384 
```

为什么`st_mode`总是显示 6, When I compile in `mingw`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T08:28:52.813

您更改了哪些头文件以使其`stat()`正常工作`MinGW`？我怀疑我从测试中得到的结果

```
stat(path, &stbuf) == -1 
```

但我不能确定，因为我在递归目录下降中使用它并且我不知道可访问性测试是否（1）在下降的那个点是正确的，或者；(2) 检索正​​确的值以检查可访问性。

# javascript - JavaScript中currentTarget属性和目标属性的确切区别是什么

> ID：10086427
> 
> 赞同：496
> 
> 时间：2012-04-10T09:45:52.040
> 
> 标签：javascript

谁能通过示例告诉我JavaScript 事件中的`currentTarget`和`target`属性之间的确切区别以及在哪种情况下使用哪个属性？

* * *

## 回答 #1

> 赞同：686
> 
> 时间：2012-04-10T09:50:41.483

默认情况下，事件[冒泡](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#event_bubbling_and_capture)。所以两者的区别是：

*   `target`是触发事件的元素（例如，用户点击）
*   `currentTarget`是事件侦听器附加到的元素。

* * *

## 回答 #2

> 赞同：137
> 
> 时间：2016-02-24T08:57:57.573

`target`= 触发事件的元素。

`currentTarget`= 具有事件侦听器的元素。

* * *

## 回答 #3

> 赞同：53
> 
> 时间：2016-06-01T20:27:56.267

**最小可运行示例**

```
window.onload = function() {
  var resultElem = document.getElementById('result')
  document.getElementById('1').addEventListener(
    'click',
    function(event) {
      resultElem.innerHTML += ('<div>target: ' + event.target.id + '</div>')
      resultElem.innerHTML += ('<div>currentTarget: ' + event.currentTarget.id + '</div>')
    },
    false
  )
  document.getElementById('2').dispatchEvent(
          new Event('click', { bubbles:true }))
}
```

```
<div id="1">1 click me
  <div id="2">2 click me as well</div>
</div>
<div id="result">
  <div>result:</div>
</div>
```

如果点击：

```
2 click me as well 
```

然后`1`听它，并附加到结果：

```
target: 2
currentTarget: 1 
```

因为在那种情况下：

*   `2`是引发事件的元素
*   `1`是监听事件的元素

如果点击：

```
1 click me 
```

相反，结果是：

```
target: 1
currentTarget: 1 
```

在铬 71 上测试。

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2016-05-02T21:49:28.647

如果这不坚持，试试这个：

**current** in`currentTarget`指的是现在。这是捕捉从其他地方冒出的事件的最新目标。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2020-12-20T07:34:21.200

对于[气泡](https://developer.mozilla.org/en-US/docs/Web/API/Event/bubbles)为的事件`true`，它们会冒泡。

大多数事件都会冒泡，除了几个，即[focus](https://developer.mozilla.org/en-US/docs/Web/API/Element/focus_event)，[blur](https://developer.mozilla.org/en-US/docs/Web/API/Element/blur_event)，[mouseenter](https://developer.mozilla.org/en-US/docs/Web/API/Element/mouseenter_event)，[mouseleave](https://developer.mozilla.org/en-US/docs/Web/API/Element/mouseleave_event)，...

如果事件`evt`冒泡，`evt.currentTarget`则在其冒泡路径中更改为**当前目标**，而`evt.target`保留与触发事件的原始目标相同的值。

[![事件的目标类型](../Images/94cf441a670e951abb3fbddee41a6b67.png)](https://i.stack.imgur.com/L8agj.png)

值得注意的是，如果您的事件处理程序（冒泡的事件）是异步的，并且处理程序使用`evt.currentTarget`. `currentTarget`应该在本地缓存，因为事件对象在冒泡链（[codepen](https://codepen.io/tranvansang/pen/rNMzBNq)）中被重用。

```
const clickHandler = evt => {
  const {currentTarget} = evt // cache property locally
  setTimeout(() => {
    console.log('evt.currentTarget changed', evt.currentTarget !== currentTarget)
  }, 3000)
} 
```

如果您使用 React，从 v17 开始，react 会删除[事件池](https://reactjs.org/docs/legacy-event-pooling.html)。

~~因此，事件对象在处理程序中被刷新，并且可以安全地用于异步调用 ( [codepen](https://codepen.io/tranvansang/pen/JjRyPdQ?editors=0010) )。~~

↑并不总是正确的。`onClick`事件`currentTarget`是`undefined`在事件处理程序完成之后。总之，如果要在同步调用后使用事件属性，请**始终在本地缓存它们。**

来自[反应文档](https://reactjs.org/docs/events.html#overview)

> 笔记：
> 
> 从 v17 开始， e.persist() 不会做任何事情，因为 SyntheticEvent 不再被池化。

还有很多其他的东西太长无法粘贴在答案中，所以我[在这里总结并发了一篇博文](https://transang.me/everything-about-event-bubbling/)。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2017-11-21T06:31:17.000

```
<style>
  body * {
    margin: 10px;
    border: 1px solid blue;
  }
</style>

<form onclick="alert('form')">FORM
  <div onclick="alert('div')">DIV
    <p onclick="alert('p')">P</p>
  </div>
</form>
```

如果单击上面代码中的 P 标签，您将收到三个警报，如果您单击 div 标签，您将收到两个警报和一个单击表单标签的警报。现在看到下面的代码，

```
<style>
  body * {
    margin: 10px;
    border: 1px solid blue;
  }
</style>
<script>
function fun(event){
  alert(event.target+" "+event.currentTarget);
}

</script>

<form>FORM
  <div onclick="fun(event)">DIV
    <p>P</p>
  </div>
</form>
```

我们刚刚从 P 和 form 标签中删除了 onclick，现在当我们点击 P 标签时，我们只收到一个警报：

> [对象 HTMLParagraphElement] [对象 HTMLDivElement]

这里 event.target 是 [object HTMLParagraphElement]，而 event.curentTarget 是 [object HTMLDivElement]： 所以

> event.target 是事件起源的节点，而 event.currentTarget 相反，是指附加当前事件侦听器的节​​点。要了解更多信息，[请参阅冒泡](http://javascript.info/bubbling-and-capturing)

在这里，我们点击了 P 标签，但我们在 P 上没有侦听器，但在其父元素 div 上。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2017-04-10T08:58:04.010

**event.target**是事件起源的节点，即。无论您将事件侦听器放置在何处（在段落或跨度上）， event.target 都指的是节点（用户单击的位置）。

**相反， event.currentTarget**指的是附加了当前事件侦听器的节​​点。IE。如果我们在段落节点上附加了我们的事件监听器，那么 event.currentTarget 指的是段落，而 event.target 仍然指的是跨度。注意：如果我们在 body 上也有一个事件监听器，那么对于这个事件监听器，event.currentTarget 指的是 body（即，作为事件监听器的输入提供的事件在每次事件冒泡一个节点时更新）。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2021-05-03T00:05:31.810

> `Event.currentTarget`是**事件处理程序已附加**到的元素，而不是`Event.target`，它标识**事件发生的元素并且可能是它的后代**。

来源：[MDN](https://developer.mozilla.org/en-US/docs/Web/API/Event/currentTarget)

`target`总是指前面的元素`addEventListener`——它是事件起源的元素。 `currentTarget`告诉你 - 如果这是一个冒泡的事件 - 当前附加了事件侦听器的元素（如果事件发生，它将触发事件处理程序）。

有关示例，请参阅[此 CodePen](https://codepen.io/x-x00102/pen/rNmqwwp)。如果您打开开发人员工具并单击方块，您会看到首先 div 是目标和 currentTarget，但事件会冒泡到主元素 - 然后主元素成为 currentTarget，而 div 仍然是目标. 请注意，事件侦听器需要附加到两个元素才能发生冒泡。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2021-05-27T15:16:01.997

这是一个简单的场景来解释为什么需要它。假设您使用以下格式向用户显示了一些消息，但您也希望给他们关闭它们的自由（除非您有特殊的精神障碍），所以这里有一些消息窗格：

**[此窗格中将显示一条消息 [x]]**

**[此窗格中将显示一条消息 [x]]**

**[此窗格中将显示一条消息 [x]]**

并且当用户单击每个上的**[x]**按钮时，必须删除整个相应的窗格。

这是窗格的 HTML 代码：

```
<div class="pane">
  A message will be here
  <span class="remove-button">[x]</span>
</div> 
```

**现在你想在哪里添加点击事件监听器？**用户单击**[x]**，但您想删除窗格，因此：

*   如果将 click 事件侦听器添加到**[x]**，那么您将不得不在 DOM 上找到它的父级并将其删除......这*可能*但丑陋且“依赖于 DOM”。

*   如果您将 click 事件侦听器添加到窗格，单击“窗格上的任何位置”将删除它，而不仅仅是单击其**[x]**按钮。

所以，我们能做些什么？我们可以使用事件系统的“冒泡”功能：

> “无论是否存在任何事件处理程序，都会引发事件并在 DOM 树中冒泡。”

**在我们的示例中，这意味着即使我们将事件处理程序添加到窗格中，我们也将能够捕获专门由单击 [x] 按钮引发的事件**（因为事件会冒泡）。因此，引发事件的位置与我们捕获和处理它的位置之间*可能存在*差异。

它被提出的地方将在 中`event.target`，它被捕获的地方将在`event.currentTarget`（我们*目前正在*处理它的地方）。所以：

```
let panes = document.getElementsByClassName("pane");
for(let pane of panes){
    pane.addEventListener('click', hndlr);
}
function hndlr(e){
    if(e.target.classList.contains('remove-button')){
        e.currentTarget.remove();
    }
} 
```

（这个例子的功劳归功于网站[JavaScript.info](https://javascript.info/task/hide-message)）

# c# - 在 c# 中使用 Fitnesse、fitsharp 和 slim

> ID：10086430
> 
> 赞同：3
> 
> 时间：2012-04-10T09:46:01.843
> 
> 标签：c#, fitnesse, fitnesse-slim

我目前正在通过教程在此处使用 C# 使用fitnesse [http://schuchert.wikispaces.com/FitNesse.Tutorials.0.CSharp](http://schuchert.wikispaces.com/FitNesse.Tutorials.0.CSharp) 我目前卡住了，因为我的代码/他的代码无法按预期工作. 我在这个程序中没有足够的知识来成功地自己解决它。我的页面代码是：

```
!define TEST_SYSTEM {slim}
!define TEST_RUNNER {c:\Projects\fitsharp\Runner.exe}
!define COMMAND_PATTERN {%m -r fitnesse.slim.Runner, c:\Projects\fitsharp\fitsharp.dll %p}

!path c:\Projects\C_Sharp\Digital Video Recorder\Digital Video Recorder\bin\Debug\Digital Video Recorder.dll

!define COLLAPSE_SETUP {true}
!define COLLAPSE_TEARDOWN {true}

!|import|
|Digital Video Recorder|

!|Create Programs                                        |
|Name |Channel|DayOfWeek|TimeOfDay|DurationInMinutes|id? |
|House|4      |Monday   |19:00    |60               |$ID=| 
```

dll的路径绝对是路径。但是当我对此进行测试时，它会出现一个异常：

```
System.ArgumentException: String cannot have zero length.
   at System.Reflection.Assembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, Assembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection)
   at System.Reflection.Assembly.InternalLoad(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection)
   at System.Reflection.Assembly.LoadFrom(String assemblyFile)
   at fitSharp.Machine.Engine.CurrentDomain.LoadAssembly(String assemblyPath)
   at fitSharp.Machine.Engine.ApplicationUnderTest.Assemblies.AddAssembly(String assemblyName)
   at fitSharp.Machine.Application.Shell.Execute()
   at fitSharp.Machine.Application.Shell.Run(IList`1 commandLineArguments) 
```

我已经摆弄了一段时间，但我似乎无法让它工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T10:49:00.100

删除逗号后面的空格：

```
!define COMMAND_PATTERN {%m -r fitnesse.slim.Runner, c:\Projects\fitsharp\fitsharp.dll %p} 
```

并将第一部分更改为 fitSharp.Slim.Service.Runner （原始）。

# c# - 如何在 Silverlight 上为 MVVM 支持多个 CommandParameter Binding

> ID：10086431
> 
> 赞同：0
> 
> 时间：2012-04-10T09:46:06.007
> 
> 标签：c#, silverlight, mvvm, prism, mvvm-light

**我只想从右侧选择一个收件人，然后使用 MVVM 将其传输到左侧。**

**（我缺少“发件人对象”，我的命令不是 RoutedCommand）。**

**你的最佳实践是什么？**

这是我的带有虚拟源的 XAML，

![在此处输入图像描述](../Images/544c976479038a6feaf2c745ecb708cf.png)

为了实现这个目标，我需要在右侧引用 ListBox 来删除 SelectedItems。我还需要左侧的列表框引用来添加这些成员。

我正在使用 CommandParameter 传递左侧列表框。但是 ModelView 不知道正确的那个。

遗憾的是 Silverlight 不支持多重绑定，但这里有一个解决方案[http://www.scottlogic.co.uk/blog/colin/2010/05/silverlight-multibinding-solution-for-silverlight-4/](http://www.scottlogic.co.uk/blog/colin/2010/05/silverlight-multibinding-solution-for-silverlight-4/)。但我需要为此编写一些转换器。

也许使用 IoC 我可以传递一些引用，但我不想破坏 MVVM 结构。

我知道一定有其他解决方案，我正在寻找它们。告诉我你的建议。

**一些注意事项**：我正在使用 Microsoft 的 Prisim 的 DelegateCommand<ListBox> 来实现 ICommand。我知道有些人使用 GalaSoft 的 RelayCommand。它们的实现是相同的。

```
<ListBox x:Name="listBoxRecipients" MinHeight="80" 
SelectedItem="{Binding SelectedMembers,Mode=TwoWay}" 
ItemsSource="{Binding Path=AvailableRecipients}" 
SelectionMode="Multiple">

    <ListBox.ItemTemplate>
    <DataTemplate>
        <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal">
                <Image Source="AHBSBus;component/images/arrivedPatients.png" MaxHeight="15"/>

                <HyperlinkButton Content="{Binding DESCRIPTION}"
                                    Command="{Binding SelectSingleCommand}"
                                    CommandParameter="{Binding ElementName=listBoxSelection}"
                                    VerticalAlignment="Top" HorizontalContentAlignment="Left" Foreground="#FF0F7D43" />                                            
        </StackPanel>
    </DataTemplate>
        </ListBox.ItemTemplate>

</ListBox> 
```

谢谢

# sql - 基于存储在字段中的查询运行 SQL？

> ID：10086432
> 
> 赞同：2
> 
> 时间：2012-04-10T09:46:08.757
> 
> 标签：sql, oracle, plsql

我正在尝试根据存储在另一个表中的查询来使用某些值填充数据库。

**表格1：**

```
ID      SQL                                         Title
1       select ID from userTable where ID = 1       Query 1
2       select ID from userTable where ID > 7       Query 2 
```

我基本上需要获取“SQL”字段，并使用上面的信息填充另一个表，一旦脚本运行，它将看起来像：

```
ID      userID      Title
1       1           Query 1
2       8           Query 2
2       9           Query 2
2       10          Query 2 
```

等等。

我希望这是有道理的，我完全不知道它是否可能——我已经尝试将它创建为一个过程，但无论如何我都找不到运行过程中表 1 中的“SQL”代码的任何方法。

或者，我将在 PHP 中执行此操作，但最好将其放入 SQL 中，因为它更容易自动化。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T10:02:05.033

这是一件奇怪的事情（我会询问原因），但这段代码应该这样做：

```
declare
  rc sys_refcursor;
  l_id table1.id%type;
begin
  for r_sql in (select id, sql, title from table1) loop
    open rc for r_sql.sql;
    loop
      fetch rc into l_id;
      exit when rc%notfound;
      insert into table2 (id, userid, title) values (r_sql.id, l_id, r_sql.title);
    end loop;
    close rc;
  end loop;
end; 
```

# sql-server - 事务复制用于什么？

> ID：10086433
> 
> 赞同：5
> 
> 时间：2012-04-10T09:46:08.893
> 
> 标签：sql-server, sql-server-2008

使用什么事务复制？我似乎按照本教程创建了事务复制：

[http://www.sql-server-performance.com/2010/transactional-replication-2008-r2/](http://www.sql-server-performance.com/2010/transactional-replication-2008-r2/)

而且我知道当我更改某些对象时，即任何 DML 或 DDL 语句，这些更改将反映到我进行复制的另一台服务器。但我不清楚我们为什么要使用事务复制。当主实例失败时，SQL 服务器是否会自动开始使用第二台服务器进行复制？或者我们是否必须在第一个实例失败的情况下从完成复制的服务器手动恢复数据库？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T09:52:22.060

您可以使用事务复制来维护热备用 SQL 服务器。事务复制将一台服务器（发布者）上的数据复制到另一台服务器（订阅者），其延迟时间低于日志传送。

您可以在数据库对象级别（例如表级别）实现事务复制。因此，Microsoft 建议您在需要保护的数据较少时使用事务复制，并且您必须有一个快速的数据恢复计划。

这种解决方案容易受到发布者和订阅者同时失败的影响。在这种情况下，您无法保护您的数据。在所有其他情况下，例如分发者或订阅者发生故障，最好将订阅者中的数据与发布者中的数据重新同步。

仅当您未实施架构更改或未对数据库实施其他更改（例如复制不支持的安全更改）时，才应使用事务复制来维护热备用 SQL 服务器。

注意 复制不是为维护热备用服务器而设计的。通过复制，您可以在订阅服务器上使用复制的数据来生成报告。您还可以将复制用于其他一般用途，而无需在相对繁忙的发布者上执行处理。

缺点

1.  建立复制后在发布者处执行的架构更改或安全更改在订阅者处将不可用。事务复制中的分发器使用开放式数据库连接 (ODBC) 连接或 OLE 数据库 (OLEDB) 连接来分发数据。但是，日志传送使用 RESTORE TRANSACTION 低级 Transact-SQL 语句来分发事务日志。RESTORE TRANSACTION 语句比 ODBC 连接或 OLEDB 连接快得多。

2.  通常，切换服务器会删除复制配置。因此，您必须配置复制两次
    ：当您切换到订阅者时。
    湾。当您切换回发布者时。

3.  如果发生灾难，您必须通过将所有应用程序重定向到订阅者来手动切换服务器。

在这里阅读更多[http://sqlserverdatarecovery.com/transactional_replication.html](http://sqlserverdatarecovery.com/transactional_replication.html)

# android - 检视正确的答案

> ID：10086438
> 
> 赞同：1
> 
> 时间：2012-04-10T09:46:33.170
> 
> 标签：android, database

我正在开发一个问题游戏的应用程序。我每次都设法将每个问题的答案显示到不同的按钮，但我无法检查正确的答案。我的方法是：我在数据库中创建了一个额外的列，我指出正确答案是（1、2、3 或 4）的列。我使用此代码在不同按钮中显示答案。

```
cur = dbHelper.getRandomQuestion();
    String corrans = cur.getString(cur.getColumnIndex("CorrectAnswer"));
    a = Integer.parseInt(corrans);
    String question = cur.getString(cur.getColumnIndex("QUESTIONS"));
    String answer0 = cur.getString(cur.getColumnIndex("ANSWER1"));
    String answer1 = cur.getString(cur.getColumnIndex("ANSWER2"));
    String answer2 = cur.getString(cur.getColumnIndex("ANSWER3"));
    String answer3 = cur.getString(cur.getColumnIndex("ANSWER4"));
    txtQuest.setText(question);

    ArrayList<String> lstAnswers = new ArrayList<String>();
    lstAnswers.add(answer0);
    lstAnswers.add(answer1);
    lstAnswers.add(answer2);
    lstAnswers.add(answer3);

     score.setText("Your score is " + b +","+ a);

    Random random = new Random();

    int[] textViews = new int[] { R.id.button1, R.id.button2, R.id.button3, R.id.button4 };
    int textViewIndex = 0;

    while (lstAnswers.size() > 0)   {
    int index = random.nextInt(lstAnswers.size());
    if(a == index){ b = index;}
    else{}
    String randomAnswer = lstAnswers.remove(index);
    ((TextView)findViewById(textViews[textViewIndex])).setText(randomAnswer);
    ++textViewIndex;
                                    } 
```

对每个按钮调用以比较 a 和 b 的值，然后采取相应的行动。但它似乎不起作用。我明白为什么，但我无法弄清楚。有任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:04:32.703

用于`Collections.shuffle(list)`打乱您的答案数组，然后显示答案将标签设置为“正确”到您的按钮，其中答案是正确的，然后比较标签值并显示正确或错误

编辑：下面的东西只是一个大纲

```
 Here im displaying answers in buttons....

    List<Integer> intList = new ArrayList<Integer>(Arrays.asList(0,1,2,3));
        Collections.shuffle(intList);

       Log.d("ERR","List after shuffling: " + intList);  
       // below answers will be assiagned randomly to buttons...
        btn_cmpTagline[intList.get(0)].setText(answr1);
        btn_cmpTagline[intList.get(0)].setTag("right");
        btn_cmpTagline[intList.get(1)].setText(answr2);
        btn_cmpTagline[intList.get(1)].setTag("wrong");
        btn_cmpTagline[intList.get(2)].setText(answr3);
        btn_cmpTagline[intList.get(2)].setTag("wrong");
        btn_cmpTagline[intList.get(3)].setText(answr4);
        btn_cmpTagline[intList.get(3)].setTag("wrong"); 
```

//点击时

```
 @Override
    public void onClick(View v) {
        switch(v.getId()){
        case R.id.btn_tag1:
            Log.d("ERR", v.getTag().toString());
            if(v.getTag().toString().equalsIgnoreCase("right")){
                //this button has right answer .. do anything 
            }

            break;
        case R.id.btn_tag2:
            Log.d("ERR", v.getTag().toString());
            if(v.getTag().toString().equalsIgnoreCase("right")){
                //this button has right answer .. do anything 
            }

            break;
        case R.id.btn_tag3:
            Log.d("ERR", v.getTag().toString());
            if(v.getTag().toString().equalsIgnoreCase("right")){
                //this button has right answer .. do anything 
            }

                    --
                    --
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:52:45.003

当您从列表中删除项目时，正确答案的索引会发生变化，因此您必须更新正确答案的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T11:15:02.753

您可以获得正确答案的值而不是索引。然后，当您将答案添加到按钮时，您可以检查它是否与正确答案相同并保留新索引。

# mysql - 根据 NULL 值或其他表中的数字获取主机值

> ID：10086443
> 
> 赞同：-1
> 
> 时间：2012-04-10T09:46:54.770
> 
> 标签：mysql, sql

我有两个表格，如下所示

1.  奥普ABC
2.  奥普斯特

我想 根据 , , 和由于某些循环键从第二个表中获取& ，因为`CPU_ID`我得到了不正确的值。`LOGIN_NAME``OPABC_JOB_NAME``JOB_NAME``OPABC_CYCLE_KEY``CYCLE_KEY``OPABC_JOB_REC``NULL`

```
OPABC_JOB_NAME  OPABC_JOB_REC   OPABC_CYCLE_KEY
GENEXT  DAEMON  null
GENEXT  FULL1   1
GENEXT  FULL10  10
GENEXT  FULL11  11
GENEXT  FULL12  12
GENEXT  FULL13  13
GENEXT  FULL14  14
GENEXT  FULL15  15
GENEXT  FULL2   2
GENEXT  FULL3   3
GENEXT  FULL4   4
GENEXT  FULL5   5
GENEXT  FULL6   6
GENEXT  FULL7   7
GENEXT  FULL8   8
GENEXT  FULL9   9

 JOB_NAME   CYCLE_KEY   CPU_ID  LOGIN_NAME
GENEXT  1   sn25666 sbswrk6
GENEXT  10  sn25666 sbswrk6
GENEXT  11  sn25666 sbswrk6
GENEXT  12  sn25666 sbswrk6
GENEXT  13  sn25666 sbswrk6
GENEXT  14  sn25666 sbswrk6
GENEXT  15  sn25666 sbswrk6
GENEXT  2   sn25666 sbswrk6
GENEXT  3   sn25666 sbswrk6
GENEXT  4   sn25666 sbswrk6
GENEXT  5   sn25666 sbswrk6
GENEXT  6   sn25666 sbswrk6
GENEXT  7   sn25666 sbswrk6
GENEXT  8   sn25666 sbswrk6
GENEXT  9   sn25666 sbswrk6
GENEXT  null    sn25666 sbswrk6 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:38:31.950

也许您可以`NVL`在匹配 的同时使用该函数`CYCLE_KEY`，这在两个表中都很常见。

```
SELECT DISTINCT OPABC_JOB_NAME,
                JOB_NAME,
                OPABC_CYCLE_KEY,
                CYCLE_KEY,
                OPABC_JOB_REC,
                CPU_ID,
                LOGIN_NAME
  FROM OPHOST OH, OPABC OB
 WHERE NVL(OH.CYCLE_KEY, 0) = NVL(OB.OPABC_CYCLE_KEY, 0) 
```

这样在遇到`NULL`as`CYCLE_KEY`时，将返回 0，您将获得 16 行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T10:40:30.443

对于甲骨文：

```
SELECT cpu_id, login_name
  FROM OPHOST
 WHERE (job_name, nvl(cycle_key, -1)) in (
        SELECT OPABC_JOB_NAME, nvl(OPABC_CYCLE_KEY, -1) FROM OPABC); 
```

对于 MySQL：

```
SELECT cpu_id, login_name
  FROM OPHOST
  LEFT JOIN OPABC ON job_name = OPABC_JOB_NAME
   AND coalesce(cycle_key, -1) = coalesce(OPABC_CYCLE_KEY, -1); 
```

# java - 不满意的链接错误

> ID：10086444
> 
> 赞同：-1
> 
> 时间：2012-04-10T09:46:56.837
> 
> 标签：java, java-native-interface

为什么我收到不满意的链接错误？
**具体如下：**

Native Method的原型及其在我的java代码中的调用是这样的：

**private native long sampleFunction(long[][] twoDimArray, long number);**

**p.sampleFunction(twoDimArray, number);**

VC++ 代码中 Native 方法的原型是这样的：

**JNIEXPORT jlong​​ JNICALL Java_MyClass_sampleFunction(JNIEnv *env, jobject obj, jobjectArray myArray, long number);**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:00:41.660

您是否使用 JVM 启动参数将您正在使用的 .dll 添加到 Java 库路径中`-Djava.library.path=path/to/dll`？否则，JVM 将无法链接到 DLL，您将收到上述错误。

如果您喜欢该方法，也可以将 .dll 复制到 JVM lib 目录。

# php - 从对象调用函数？

> ID：10086451
> 
> 赞同：5
> 
> 时间：2012-04-10T09:47:26.693
> 
> 标签：php, oop

```
<?php
$ar = (object) array('a'=>function(){
   echo 'TEST';
});
$ar->a();
?> 
```

我收到此错误***调用未定义的方法***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T09:51:11.153

**更新：**

如果您使用的是 PHP 5.3 或更高版本，请查看其他答案:)

* * *

我不认为这是正确的语法，它会给你：

```
Parse error: syntax error, unexpected T_FUNCTION in.... 
```

您需要创建一个类，为其添加方法，使用`new`关键字实例化它，然后您将能够：

```
$ar->a(); 
```

* * *

```
class myclass
{
    public function a()
    {
        echo 'TEST';
    }
}

$ar = new myclass;
$ar->a(); // TEST 
```

* * *

有关详细信息，请参阅[**类和对象**](http://php.net/manual/en/language.oop5.php)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T09:57:57.393

匿名与否，你有一个回调函数，因此你需要这样处理它。例如：

```
<?php

$ar = (object) array(
    'a' => function(){
        echo 'TEST';
    }
);

call_user_func($ar->a);

?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T09:59:52.377

由于某种原因，它似乎不可能像您那样运行关闭。如果您修改代码并为函数设置另一个变量，则可以调用它：

```
$ar = (object) array('a'=>function(){
   echo 'TEST';
});
$a = $ar->a;
$a(); 
```

这不是解决办法。但据我所知，这似乎是 PHP 5.3 中的一个错误或限制。

我在尝试这个时使用的是 5.3.5。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T09:53:52.520

没有函数`a()`，只有属性`a`，所以你应该调用它`$ar->a`。
无论如何，我认为它不会像你期望的那样工作。

**编辑：** 正如 Álvaro G. Vicario 所建议的，您应该使用[call_user_func](http://php.net/manual/en/function.call-user-func.php)，而不是`echo`调用该函数，它会正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T09:57:39.930

或者，只是为了好玩，你可以做这样的事情 -

```
<?php
$ar = new stdClass;
$ar->a = function($to_echo){ echo $to_echo; };
$temp = $ar->a;

//[Edit] - $ar->a("hello"); // doesn't work! php tries to match an instance method called     "func" that is not defined in the original class' signature
$temp("Hey there");
call_user_func($ar->a("You still there?"));
?> 
```

# php - 更改 jquery 填充表单中的顺序选择

> ID：10086455
> 
> 赞同：1
> 
> 时间：2012-04-10T09:47:53.370
> 
> 标签：php, ajax, jquery

我为我的网站构建了一个动态填充的多选表单。当用户在第一次选择中选择一个或多个项目时，第二个是通过 jQuery 填充的。除了填充多选的顺序外，该表单工作正常。

例如，“产品”选择包含：

```
<select name="product_id" id="products" multiple="multiple">
<option value="#" selected="selected">Please Select</option>
<option value="1">Product 1</option>
<option value="5">Product 2</option>
<option value="4">Product 3</option>
<option value="6">Product 4</option> 
```

（是的，这些值与产品编号不同）当用户选择其中一个时，jQuery 调用会填充下一个下拉列表。

```
<select name="version_id" id="versions" multiple="multiple">
<option value="100">3.0.7</option>
<option value="101">1.0.8</option>
<option value="102">12.0.1</option> 
```

代码填充此选择并按“值”排序，有没有办法强制它按实际内容排序，例如将其更改为：

```
<option value="101">1.0.8</option>
<option value="100">3.0.7</option>
<option value="102">12.0.1</option> 
```

我调用的成功代码是：

```
success: function(versions) 
{
$.each(versions,function(id,version) 
{
var opt = $('<option />'); 
opt.val(id);
opt.text(version);
$('#versions').append(opt); 
});
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:04:59.260

感谢@deifwud 为我指明了正确的方向。最后，我在成功功能之后直接添加了以下内容。它根据文本而不是值对结果进行重新排序。

```
$("#versions").html($("#versions option").sort(function (a, b) {
return a.text == b.text ? 0 : a.text < b.text ? -1 : 1
})); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:57:30.913

您必须对执行 sql 查询以动态生成下一个下拉框的文件进行 ajax 调用....如果是这种情况，那么您需要将关键字“ `ASC`”放在产生的选择查询的最后你的“ `id`”在价值属性`<option value"">`

# iphone - 尝试为 ios 应用程序安装映射软件时出现控制台错误

> ID：10086460
> 
> 赞同：0
> 
> 时间：2012-04-10T09:48:09.263
> 
> 标签：iphone, ios, macos, console

我在[这里遵循本指南](http://www.gisnotes.com/wordpress/2010/08/iphone-dev-note-21-route-me-offline-mapping-from-database/)

来自数据库的 Route-Me 离线映射

我在第 1 步，我正在安装应用程序，我将使用它来为我的 ios 地图捕获地图。但是当我执行最后一行时我收到一个错误

```
make install 
```

在我的控制台中生成此错误

```
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
ERROR: Can't create '/Library/Perl/5.12/Geo/OSM'
mkdir /Library/Perl/5.12/Geo: Permission denied at /System/Library/Perl/5.12/ExtUtils/Install.pm line 494

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 at -e line 1
make: *** [pure_site_install] Error 13 
```

我不确定这个错误是什么意思或如何修复它，因为我通常不在控制台中玩耍.. 但为了实现结果，我想使用我的应用程序，我需要一些帮助来解决这个问题。

任何和所有的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:03:56.893

这是权限问题。`sudo`您可以使用命令（[参考](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man8/sudo.8.html)）给自己临时 root 访问权限。

尝试以下操作：

```
$ sudo make install 
```

# c# - 使用类中的静态成员创建对象

> ID：10086461
> 
> 赞同：-1
> 
> 时间：2012-04-10T09:48:12.727
> 
> 标签：c#, class, constructor

我正在创建一个构造函数，它需要从另一个类中获取所有变量。目前我有：

```
public class Person 
{
    public Person(Address.AddressDetails newAddress , string newTitle, string      newForname, string newSurname, string newTel,
                        string newMob, string newEmail)
        {
        }
        static public int ID;
        static public string Title;
        static public string Decorations;
        static public string Forename;
        static public string Surname;
        static public string Telephone;
        static public string Mobile;
        static public string Email;
        static public Address.AddressDetails Address;
} 
```

Address.AddressDetails 中的变量也是静态的。如何让 Person.Address 表示 AddressDetails 类中的所有变量？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-10T09:51:52.200

在构造函数中：

```
{
    Person.Adress = newAdress;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-10T09:55:18.343

```
public class Person 
{
     public static Assign(Address.AddressDetails newAddress , string newTitle, string      newForname, string newSurname, string newTel,
                        string newMob, string newEmail) 
    {
        Address = newAddress;
        Email = newEmail;
        ....
        ... 

    }

     static private int ID;
     static private string Title;
     static private string Decorations;
     static private string Forename;
     static private string Surname;
     static private string Telephone;
     static private string Mobile;
     static private string Email;
     static private Address.AddressDetails Address;    

} 
```

像这样的东西。

*   制作一个`static public`赋值的方法
*   使班级的所有成员`private`

# ruby-on-rails - 在 Rails 3 中使用 Ajax 更新部分太慢了

> ID：10086462
> 
> 赞同：0
> 
> 时间：2012-04-10T09:48:14.660
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3, performance, partials

我最近打开了一个线程：[在 Rails 3 中使用 Ajax 更新部分](https://stackoverflow.com/q/10079399/1322639)

实际上，多亏了 Ogz 向导，一切正常，但是当我在彼此远离的两个项目之间移动鼠标时速度非常慢，因为它们之间的每个项目都发送了 XMLHTTPRequest...

如果 mouseenter 和 mouseleave 之间的间隔低于阈值，我考虑过中止请求，但这没有帮助。

我还尝试添加一个计时器来触发接近“到期时间”的请求，这样如果相同的间隔太小但又没有成功，请求就没有时间回答。

这是代码：

```
var timeStart, timeEnd;
$("div.show_item").mouseenter(function(event){
    timeStart = (new Date()).getTime();
    var id = $(this).attr('data');
    var url = "/item/list?id="+id;
    var data = $(this).serialize();
    setTimeout(xhr = $.post(url, function(response_data){$("#item_details").html(response_data)}),290);
    return false;
}).mouseleave(function(event){
    timeEnd = (new Date()).getTime();
    if(timeEnd - timeStart < 300)
        xhr.abort();
}); 
```

预先感谢您的帮助。

# android - 如何通过 adb 获取 Android 设备的供应商 ID？

> ID：10086464
> 
> 赞同：15
> 
> 时间：2012-04-10T09:48:25.460
> 
> 标签：android, vendor

我对如何获取 Android 设备的供应商 ID 和产品 ID 有疑问。

有没有 adb 的命令可以做到这一点？

我可以在插入设备时获取供应商 ID 和产品 ID，但是在安装 Windows 驱动程序后，如果我同时插入两个设备，我无法区分真正的供应商 ID。所以我需要通过 ADB 或硬件设备和 android 设备之间的任何其他连接找出供应商 ID。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-01T18:10:43.540

如果您运行的是 Ubuntu/Linux，只需键入

```
lsusb -v 
```

然后按回车。它将显示所有 USB 设备的详细信息。在结果中检查名为“idVendor”的字段并找到您的设备。例如：我的摩托罗拉 Defy[vendor id = 22b8] 给出，

“ idVendor 0x22b8 摩托罗拉 PCS”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-24T06:40:14.790

我不知道您是否得到了解决方案，但是**通过 USB 电缆将我的手机连接到我的计算机**并在 ubuntu 终端上输入以下代码行我能够获得供应商 ID

```
lsusb 
```

例如，如果您连接了 Nexus One，您将获得：

总线 002 设备 004：ID 18d1:4e12

在这种情况下，供应商 ID 为“18d1”，产品 ID 为“4e12”。（我们当然对供应商 ID 感兴趣）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-17T18:59:41.483

ADB 本身不会帮助找到连接的硬件的供应商 ID，实际上（对于 Google ADB 驱动程序），在使用 ADB 之前必须设置供应商 ID。

幸运的是，有一种简单的方法可以找到连接到 Windows PC 的任何设备的供应商 ID（和产品 ID）。该设备甚至不需要驱动程序就可以使用这种方法：

1.  启动设备管理器
2.  在硬件树中，右键单击要为其确定供应商 ID 的设备的硬件条目。

[![要检查的项目的属性](../Images/c0c85837702673853b12233a47cdd5c6.png)](https://i.stack.imgur.com/Yo48Q.png)

3.  在详细信息选项卡上，将属性下拉菜单设置为“硬件 ID”。供应商 ID 是字母后面的 4 个字符的十六进制数字`VID_`。在以下情况下，供应商 ID 为`18D1`：

[![显示供应商和产品 ID](../Images/b36344db275d7512f1be62b9055e05ad.png)](https://i.stack.imgur.com/K80EX.png)

`PID_`后面的 是产品 ID 。它还有一个 4 位十六进制数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T13:13:26.457

希望这个[链接](http://developer.android.com/guide/developing/device.html)对你有帮助

-s serialNumber 是为您提供特定模拟器/设备实例的 adb 命令，由其 adb 分配的序列号（例如“emulator-5556”）引用。我认为这是您正在寻找的 adb 命令。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-20T08:27:34.563

如果您想进入您的 android 应用程序，您可以使用以下代码

```
 UsbManager manager = (UsbManager) getSystemService(Context.USB_SERVICE);
    HashMap<String, UsbDevice> deviceList = manager.getDeviceList();
    Iterator<UsbDevice> deviceIterator = deviceList.values().iterator();
    while (deviceIterator.hasNext()) {
        UsbDevice device = deviceIterator.next();

        Log.e("DB", gson.toJson(device));
    } 
```

# c++ - 提高序列化保存到多种存档类型并防止在使用指针加载时构造新对象

> ID：10086469
> 
> 赞同：1
> 
> 时间：2012-04-10T09:48:55.587
> 
> 标签：c++, design-patterns, boost, boost-serialization

我正在使用 boost 序列化来保存来自多个存档输出（ xml 、 binary 和 text ）的对象。当库通过指针加载时，它会创建一个新对象，我想为我的一些对象阻止这种情况，比如我的对话框类。所以我正在参考加载对话框。但是代码很丑：

```
boost::archive::xml_iarchive ia;
for(vector<BaseDialog*>::iterator it= dialogs.begin();it!=dialogs.end();it++)
{
    if(typeid(it) == MyDialog1)
    {
         MyDialog1* dlg = dynamic_cast<MyDialog1*>(it);
         ia & (*dlg);
    }

    if(typeid(it) == MyDialog2)
    {
         MyDialog2* dlg = dynamic_cast<MyDialog2*>(it);
         ia & (*dlg);
    }              
} 
```

所以我想出了以下解决方案：

```
class BaseDialog
{
 public:
    virtual void SaveState(boost::archive::xml_oarchive& oa)=0;
    virtual void LoadState(boost::archive::xml_iarchive& ia)=0;
    virtual void SaveState(boost::archive::binary_oarchive& oa)=0;
    virtual void LoadState(boost::archive::binary_iarchive& ia)=0;
    // other formats here
}; 
```

在我的派生类中，我正在实现这个功能。然后保存和加载是这样的：

```
boost::archive::xml_iarchive ia;
for(vector<BaseDialog*>::iterator it= dialogs.begin();it!=dialogs.end();it++)
     it->LoadState(ia); 
```

因此，对于每个存档输出，我在 BaseDialog 类中都有虚函数对，这也不好。

所以任何人都知道如何解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T10:01:48.540

`boost::serialization`可以通过其基类序列化派生类型而不会出现问题。看看[这个](http://www.boost.org/doc/libs/1_49_0/libs/serialization/doc/serialization.html#registration)链接。

# php - 1个同时下载+强制等待时间+Amazon S3

> ID：10086470
> 
> 赞同：1
> 
> 时间：2012-04-10T09:48:57.407
> 
> 标签：php, javascript, mysql, amazon-s3

我必须说这是我第一次在这里问任何问题，而且我不是开发人员，所以请耐心等待我缺乏知识。这个要求是针对我和一些朋友一起创建的一个网站，所以我不是在用这个赚钱。

这就是问题所在：我想对下载实施某种限制，与 Rapidshare 或任何其他文件共享服务所做的方式非常相似：

1.  用户应该只能同时下载 1 个文件

2.  用户应该等待，然后才能下载另一个文件，比如说 2 小时。

但是，我并不是要创建文件共享网站。我要将所有文件上传到 Amazon S3，我唯一需要的是能够限制下载。我将创建文件的链接。我不在乎用户是否注册，他们应该可以下载。

该网站是用 Joomla! 构建的，它使用 Apache + MySQL。这些文件将位于亚马逊的服务器上。

我的问题如下。有没有办法以一种不太复杂的方式实现这一点？你知道一些可以帮助我完成这项工作的脚本或网络服务吗？

我环顾四周，但我发现的唯一东西是支付网关，我们不打算对下载收费。

任何帮助都感激不尽。

谢谢！

更新：我使用这个脚本解决了这个问题：http: [//www.vibralogix.com/linklokurl/features.php](http://www.vibralogix.com/linklokurl/features.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:30:56.830

据我所知，没有办法检查从 S3 下载的当前状态。话虽如此，S3 确实有足够的可用带宽，所以我不会太担心他们的服务器超载 :) 就在上周，[亚马逊宣布](http://aws.typepad.com/aws/2012/04/amazon-s3-905-billion-objects-and-650000-requestssecond.html "宣布")S3 现在平均每秒处理 650,000 个对象。

如果您想在 PHP 中实现类似 @Pushpesh 的解决方案，一种解决方案是使用 Amazon SDK for PHP 并执行以下操作：

```
<?php
#Generate presigned S3 URL to download S3 object from

# Include AWS SDK for PHP and create S3
require_once("./aws-sdk/sdk.class.php"); 

$s3 = new AmazonS3();

# Let S3 know which file we want to be downloading
$s3_bucket_name = "yours3bucketname";
$s3_object_path = "folder1/object1.zip";
$s3_url_lifetime = "10 minutes";
$filename = "download.zip";

#Check whether the user has already downloaded a file in last two hours
$user_can_download = true; 

if($user_can_download) { 
    $s3_url = $s3->get_object_url($s3_bucket_name, $s3_object_path, $s3_url_lifetime, array('response' => array('content-type' => 'application/force-download', 'content-disposition' => 'attachment; filename={$filename}')));
    header("Location: {$s3_url}"); 
}
else { 
    echo "Sorry, you need to wait a bit longer before you can download a file again...";
}
?> 
```

这使用 get_object_url 函数，该函数生成预签名 URL，允许您让其他人下载您在 S3 中设置为私有的文件，而无需公开这些文件。

如您所见，此生成的链接只会在 10 分钟内有效，并且是唯一的链接。因此，您可以安全地让人们从此链接下载，而不必担心人们传播该链接：该链接将过期。人们获得新的有效链接的唯一方法是通过您的下载脚本，如果尝试启动下载的 IP/用户已经超过其使用限制，它将拒绝生成新链接。但是，在 S3 中将这些文件设置为私有很重要：如果您将它们公开，这不会有多大好处。您可能还想查看生成这些预签名 URL 的 S3 API的[文档。](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/#m=AmazonS3/get_object_url "文档")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T10:09:31.840

我想到的只有两种方法——你要么复制一个具有唯一哈希的文件，然后让 apache 服务它。然后你就无法控制用户何时真正结束他的下载（或开始）。对大文件很有用。另一种方法是通过 php.ini 传递它。不过，如果用户停止下载，您仍需要终止下载会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T10:10:05.073

如果没有插件，您将无法通过添加脚本或复制和粘贴“一些”代码来轻松完成。

因此，要么雇用某人，要么您需要学习自己完成任务所需的知识，换句话说，学习如何编程。您的问题已经包含您需要实施的步骤：记录谁在下载什么内容以及何时下载并跟踪下载状态。

我之前没有尝试跟踪下载状态，但我不确定是否可以直接从发送文件的服务器以某种方式获取状态。但是您可以从客户端获取它：[使用 PHP 和 JavaScript 下载状态](https://stackoverflow.com/questions/9245347/download-status-with-php-and-javascript)

我进一步不确定这是否会在您的场景中正常工作，因为该文件将来自 S3。

S3 本身有一个所谓的特性“查询字符串保护”：

> 使用查询字符串身份验证，您可以通过在预定义到期时间有效的 URL 共享 Amazon S3 对象。

因此，您需要查找 S3 API 以了解如何实现这一点。

您可以尝试的是在用户单击下载链接时向您的服务器发送一个 ajax 请求，将您的服务器生成的 amazon s3 链接作为响应发送回来，然后让客户端 javascript 以某种方式触发该文件下载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T10:16:29.300

您可以通过他们的 IP 地址监控用户下载，将其与用户下载的时间和会话 ID（当然带有哈希）一起存储在数据库中，并在每次下载请求之前检查这一点。如果当前时间在同一会话中少于 2 小时，则阻止请求，否则给他们下载。

表结构：

```
Id       Ip_Addr      Session_Hash   Timestamp
1        10.123.13.67 sdhiehh_09#    1978478656
2        78.86.56.11  mkdhfBH&^#     1282973867
3        54.112.192.10 _)*knbh       1445465565 
```

这是一个非常基本的实现。我确信存在更强大的方法。希望这可以帮助。

# javascript - 输入 url 代码 javascript 播放器？

> ID：10086471
> 
> 赞同：-2
> 
> 时间：2012-04-10T09:49:01.383
> 
> 标签：javascript, jquery

当我输入 url 甚至 youtube、vimeo 或其他任何内容时，视频正在播放。请像这样告诉我那个球员。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:53:48.313

JQuery 中有很多插件可以显示视频，只需在 google 中输入即可。

看这里，已经有很多选择了。

[http://www.jquery.wisdomplug.com/jquery-plugins/multimedia-jquery-plugins/best-jquery-video-plugins/](http://www.jquery.wisdomplug.com/jquery-plugins/multimedia-jquery-plugins/best-jquery-video-plugins/)

# c# - 正则表达式：用一个 18 位数字解析特定字符串

> ID：10086487
> 
> 赞同：0
> 
> 时间：2012-04-10T09:49:42.710
> 
> 标签：c#, .net, regex, parsing

C#/.NET 4.0

我需要解析一个包含 18 位数字的字符串。我还需要左右两侧的子串。
示例字符串：

```
string a = "Frl Camp Gerbesklooster 871687120000000691 OPLDN 2010 H1";
string b = "some text with spaces 123456789012345678 more text"; 
```

应该如何解析：

```
string aParsed[0] = "Frl Camp Gerbesklooster";
string aParsed[1] = "871687120000000691";
string aParsed[2] = "OPLDN 2010 H1";

string bParsed[0] = "some text with spaces";
string bParsed[1] = "123456789012345678";
string bParsed[2] = "more text"; 
```

字符串中间总是有那个 18 位数字。我是 Regex 的绝对新手，所以我实际上并没有自己尝试过。
做这个的最好方式是什么？我应该使用正则表达式吗？
谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T09:54:29.300

您可以使用正则表达式之类的东西：`(.*)(\d{18})(.*)`。

这里的关键是用来`{18}`指定必须有精确的`18`数字并捕获组中的每个部分。

```
var parts = Regex.Matches(s, @"(.*)(\d{18})(.*)")
    .Cast<Match>()
    .SelectMany(m => m.Groups.Cast<Group>().Skip(1).Select(g=>g.Value))
    .ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T17:27:35.727

丹尼尔，

尽管问题已得到解答，但以下内容可能是学习正则表达式的有用参考。

[http://txt2re.com](http://txt2re.com)

问候，利亚姆

# java - 如何将 EJB 功能添加到 Eclipse 动态 Web 项目？

> ID：10086492
> 
> 赞同：11
> 
> 时间：2012-04-10T09:50:04.787
> 
> 标签：java, eclipse, ejb, apache-tomee

我正在使用 EJB 3.0 开发一个简单的应用程序，使用 OpenEJB 进行部署，并将 Eclipse 作为 IDE。

我在 Eclipse 中将该项目创建为“动态 Web 应用程序”。当我尝试创建第一个无状态会话 bean 时，我意识到无法解析 @Remote 注释。

解决此问题的正确方法是什么？

1.  删除项目并创建一个新的“企业应用项目”（这似乎很重，所以我不确定我是否要朝这个方向发展）？
2.  删除项目并创建一个 EJB 项目（这似乎不对，因为我相信这样的项目只会让我捆绑应用程序的 EJB 部分）？
3.  将一些库添加到我现有的项目中（是否有 EJB 3.x 的库包）？
4.  向我现有的项目添加构面（我试图查看是否可以添加构面，但在该项目的上下文中看不到 EJB 构面）？

感谢您的帮助。

**更新：** 我找到了答案。

TomEE 的安装目录包含编译和运行 EJB 的 'apache-tomee-webprofile-1.0.0-beta-2/webapps/openejb/lib' 所需的所有 jar 文件

我在 Eclipse 中创建了一个用户库，其中包含上述 lib 文件夹中的所有 jar，并将其添加到构建路径中。

EJB 接口现在可以正确编译。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-13T07:46:48.393

1.  创建新的企业应用程序项目 (EAP)
2.  创建一个新的 EJB 项目并将其添加到 EAP
3.  将现有的 WEB 项目添加到 EAP

现在您可以在 EJB 项目中创建 EJB 并从 WEB 项目中调用它们。

您可以在支持企业应用程序项目的应用程序服务器（如 JBoss）上部署或调试您的 EAP。EAP 部署为具有`.ear`扩展名的唯一文件。

例如，如果您使用 Tomcat，则无法部署*ear*包。

这里有一个关于使用 Eclipse创建*耳朵的*[描述的页面。](http://www.eclipse.org/webtools/jst/components/j2ee/scenarios/application_creation_tutorial.html)

 ** * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-14T09:01:50.803

为 TomEE 或 TomEE+ 添加 eclipse 库支持的简单方法如下：

1.  在 Eclipse 中创建一个 Tomcat 7 服务器。（更改名称以反映它的 TomEE）
2.  将它指向您的tomEE 安装目录。
3.  在您的项目中转到：属性 -> Java 构建路径 -> 库。
4.  按“添加库”。
5.  选择“服务器运行时”，然后按下一步。
6.  选择您刚刚创建的 TomEE 服务器配置文件，然后单击完成。
7.  单击确定。

tomEE 库已添加到您的 eclipse 项目中。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-28T20:41:50.633

我正在使用 maven 并通过以下简单步骤使其工作：

1.  打开项目 -> 属性 -> 部署程序集
2.  点击“添加...”
3.  选择“Java 构建路径条目”
4.  选择“Maven 依赖项”

就是这样！*

# android - 使用 MapActivity 和 ActivityGroup 扩展 Activity

> ID：10086493
> 
> 赞同：0
> 
> 时间：2012-04-10T09:50:04.883
> 
> 标签：android

我是安卓新手。如何使用 MapActivity 和 ActivityGroup 扩展 Activity？

因为我需要在 Activity 上同时显示地图和自定义选项卡。

```
public class MainActivity extends ActivityGroup implements MapActivity 
```

不知何故，我不允许这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:53:47.113

要显示选项卡，请使用 Fragment，因为 ActivityGroup 已弃用。

# android - 代码适用于模拟器，但不适用于手机

> ID：10086495
> 
> 赞同：0
> 
> 时间：2012-04-10T09:50:08.550
> 
> 标签：android, database, android-emulator

看看下面的代码......

这可以正常工作并在模拟器上按下菜单项时删除一条消息，但是当在手机上安装具有相同数据库和相同代码的相同应用程序时它不会执行任何操作（Samsung Galaxy S）

```
@Override
public boolean onContextItemSelected(MenuItem item) {
    // TODO Auto-generated method stub

    AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();

    String s = (String) ((Cursor) getListView().getItemAtPosition(info.position))
                .getString(2);

    switch(item.getItemId())
    {
    case R.id.delete:

        Log.v("", "You Clicked "+ s);
        dba = new DBAdapter(this);
        dba.open();
        dba.deleteMessage(s);       
        dba.close();

        //  return true;

    default:
        return super.onContextItemSelected(item);
    }
} 
```

虽然 Log.v 也显示了被点击的数字，但是为什么这个功能在它工作时没有在手机上做任何事情，并在模拟器上删除记录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:05:27.420

以下代码解决了我的问题....它适用于手机和模拟器

```
DatabaseHelper dbh = new DatabaseHelper(context);
        dbh.getWritableDatabase().delete(table, whereClause, whereArgs); 
```

# javascript - 如何在 JQuery 中为文本框制作工具提示？

> ID：10086500
> 
> 赞同：-1
> 
> 时间：2012-04-10T09:50:39.480
> 
> 标签：javascript, jquery

任何人都知道如何为文本框制作工具提示？如下图所示：

![在此处输入图像描述](../Images/ff3e7c3c299ecd3d0e1f16317d768a05.png)

我希望工具提示位于文本框的近右侧，并带有一些动画。
任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:53:15.783

[BeautyTips](http://archive.plugins.jquery.com/project/bt)就是这样做的。

![在此处输入图像描述](../Images/cf1ec74b3abd9e9c58fd5b6399e24423.png)

# java - 在 Eclipse 中调试：检查变量 -> 评估期间的错误

> ID：10086505
> 
> 赞同：4
> 
> 时间：2012-04-10T09:51:08.637
> 
> 标签：java, eclipse, debugging

我正在处理一段 Java 代码，但遇到了转储问题。我正在做一些调试，出于某种原因，当我试图评估（观察或检查）在方法中声明的一些变量时，它会显示以下错误：

```
errors during the evaluation. 
```

我不明白。我正在使用 Eclipse 3.7。

例如，它甚至对方法参数也是如此（在方法执行结束之前应该可用）。

我的`eclipse.ini`文件是：

```
-startup
plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.100.v20110502
-product
org.eclipse.epp.package.jee.product
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
1024M
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
512m
--launcher.defaultAction
openFile
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Xms40m
-Xmx1024M 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:37:47.490

看来问题是我的 eclipse 插件之一。我有几个插件，一些代码审查插件。我刚刚将它们全部卸载，现在它可以工作了。

# shell - 列出 TCL 中所有源文件的命令

> ID：10086510
> 
> 赞同：3
> 
> 时间：2012-04-10T09:51:16.647
> 
> 标签：shell, tcl

是否有列出 TCL 中所有源文件的命令？

例如 - 我来源`a.tcl`, `b.tcl`,`c.tcl`在`test.tcl`文件中。是否有 TCL 命令来查看源文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T10:30:01.510

No, but you can override the `source` command itself to keep track of the `source`'d files somewhere, like this:

```
rename source __real_source
proc source args {
    global sourced
    lappend sourced $args
    uplevel 1 [linsert $args 0 __real_source]
} 
```

**Update:** expanding on the Donal's comment regarding the fragility of the `source` command there's how one could setup an execution trace:

```
proc register_sourced {cmd args} {
  global sourced
  lappend sourced [lindex $cmd end]
}
trace add execution source leave register_sourced 
```

# math - 从一组点计算样条的最佳计数

> ID：10086516
> 
> 赞同：0
> 
> 时间：2012-04-10T09:51:41.950
> 
> 标签：math, 2d, spline

此任务类似于 Photoshop 中的 FreePen 等工具。

需要将一组点（我们从鼠标输入中获取）插入到最佳样条数中。

我只是不知道在哪里看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:21:45.750

可能，您首先需要减少点数。有[道格拉斯-普克算法](http://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm)来简化折线。C++[实现](http://softsurfer.com/Archive/algorithm_0205/algorithm_0205.htm)

# android - 使用 openfire 在 sipdroid 中添加聊天功能

> ID：10086518
> 
> 赞同：0
> 
> 时间：2012-04-10T09:51:47.810
> 
> 标签：android, chat, openfire

我是 android 应用程序开发的初学者。我想使用 openfire 在 sipdroid 中添加聊天功能。有人可以帮我如何开始吗？提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:26:10.483

Openfire 使用 XMPP 协议，因此您可以[开始阅读如何](http://xmpp.org/internet-drafts/draft-saintandre-sip-xmpp-im-00.html)将 XMPP 合并到 SIP 中。

除了上面的文章，您还可以四处寻找[已经具有此功能](http://download.jitsi.org/jitsi/src)的软件 sip 客户端，并从他们的源代码中进行教育。

[XMPP java api](https://developers.google.com/appengine/docs/java/xmpp/overview)概述也是一个很好的参考。

# python - Eclipse PyDev 的 Python 反编译器？

> ID：10086522
> 
> 赞同：5
> 
> 时间：2012-04-10T09:51:55.860
> 
> 标签：python, eclipse, pydev, decompiler

有没有办法让 eclipse 读取 .pyc 文件？

我试图避免下载外部程序，我宁愿不信任在线服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:38:45.587

Python 没有开源/免费的反编译器——只有一个“反汇编器”（参见标准库中的[dis-module](http://docs.python.org/library/dis.html)）。从 Python Stack-VM 程序集（存储在 .pyc 文件中）返回到工作 Python 代码非常*容易*，因为保留了代码的一般结构，即使使用“-O”也是如此。

对于特殊情况解决方案（即，以旧 [pre 2.3] 格式编组 .pyc-s），请参阅链接的[答案](https://stackoverflow.com/questions/48211/free-python-decompiler-that-is-not-an-online-service)@FabioZadrozny，但尤其是当您使用 Python >=2.5 来生成 .pyc-s 时，这但是，由于许多操作码已更改/已添加，因此很可能无法正常工作。

# javascript - 如何在 JavaScript 调用的位置使用 DOM 方法插入文本

> ID：10086523
> 
> 赞同：0
> 
> 时间：2012-04-10T09:51:57.723
> 
> 标签：javascript, dom

我想使用 javascript 方法“saveMailAddress”在我的网站上隐藏电子邮件地址，该方法将“名称”、“域”和“TLD”作为参数。之后，此方法应将节点“a”添加到 DOM 树。

但是我怎样才能找到添加对象的位置呢？

在 HTML 中，它应该看起来像（由 PHP 脚本生成）：

```
<p>
    The E-Mail of user XXX is:
    <script type="text/javascript">
    saveMailAdresses("superman", "comic", "com");
    </script>.
</p> 
```

在 javascript 部分中，应该生成 a-Elemnt：

```
function saveMailAdresses(name, domain, tld) {
    var link = document.createElement("a");
    link.appendChild(
        document.createTextNode("linktext");
    );
    ...
} 
```

但是如何将新元素放置到调用函数的父元素中呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:00:09.323

也许

```
<p id='mailadress'>
    <script type="text/javascript">
        document.write(saveMailAdresses("name", "domain", "tld");
    </script>
</p>

function saveMailAdresses(name, domain, tld) {
        return "<a href=''>test</a>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T10:32:26.517

插入的 A 标记是否在 href 中包含实际的电子邮件地址？如果是这样，那么电子邮件地址仍然可以通过任何现代浏览器的调试工具获得，或者只需单击链接打开电子邮件客户端，地址在“收件人”字段中。

如果您仍然想这样做，您可以在页面的开头创建一个数组，该数组接受一个包含元素的对象和上面要添加的每个地址的三个变量，为每个地址添加一个对象到数组中，然后在页面的末尾循环遍历数组并在每个对象上调用函数（使用带有附加元素参数的方法签名）。

如果您真的想保护您的电子邮件地址，您可以有一个用户填写并回发到服务器的表单，然后让服务器根据表单中的值（即哪个部门的下拉列表）将电子邮件发送给正确的人ETC）。这样，客户将永远不会看到电子邮件地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T11:39:34.923

您可以使用 HTML5`data-`属性。为简单起见，此示例使用 jQuery，但如果需要，您可以在纯 DOM 中编写它：

```
<script>
  $(function() {
    $(".email").each(function (){
      var $this = $(this),
          address = $this.data("username") + "@" + $this.data("domain") + "." + $this.data("tld"),
          $link = $("<a>").attr("href", "mailto:" + address).html("link text");

      $this.append($link);
    });
  });​
</script>

<p>
  My e-mail address:
  <span class="email" data-username="someone" data-domain="example" data-tld="com"></span>
<p> 
```

[这个 jsFiddle 是一个工作示例。](http://jsfiddle.net/bclennox/jMWHs/)

# java - 如何同步两种方法

> ID：10086527
> 
> 赞同：2
> 
> 时间：2012-04-10T09:52:30.373
> 
> 标签：java, multithreading, collections, concurrency

我有以下 Java 聊天服务器应用程序的代码 -

```
public synchronized List<ChatMessage> getMessages(int messageNumber) {
    return messages.subList(messageNumber + 1, messages.size());
}

public synchronized int addMessage(ChatMessage c) {
    messages.add(c);
    return messages.size()-1;
} 
```

我有以下测试代码 -

```
public static void main(String[] args) {
    final ChatRoom c = new ChatRoom();
    Thread user1 = new Thread(new Runnable() {
        public void run() {
            for(int i=0;i<1000;i++) {
                c.addMessage(new ChatMessage());
                c.getMessages(0);
            }
        }
    });
    Thread user2 = new Thread(new Runnable() {
        public void run() {
            for(int i=0;i<1000;i++) {
                c.addMessage(new ChatMessage());
                c.getMessages(0).size();
            }
        }
    });
    user1.start();
    user2.start();
} 
```

我收到 ConcurrentModificationException。

这怎么可能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T09:56:03.027

> 这怎么可能？

您的`getMessages`方法只返回原始列表上的*视图。*它不会创建列表的*副本*。因此，一个线程正在使用列表上的视图，而另一个线程正在修改列表-此时，您会遇到异常。

从文档中[`List.subList`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#subList%28int,%20int%29)：

> 如果后备列表（即此列表）以除通过返回列表之外的任何方式进行结构修改，则此方法返回的列表的语义将变为未定义。（结构修改是改变这个列表的大小，或者以其他方式扰乱它，使得正在进行的迭代可能产生不正确的结果。）

目前尚不清楚您在这里真正想要实现什么，但从根本上说，您不能用它`subList`来神奇地创建一个线程安全列表:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T10:24:34.683

最简单的做法是创建一个组合方法

```
public synchronized int addMessageAndGetCount(ChatMessage c) {
    messages.add(c);
    return messages.size();
}

public static void main(String... args) {
    final ChatRoom c = new ChatRoom();
    final Runnable runner = new Runnable() {
        public void run() {
            for(int i = 0; i < 1000; i++) {
                c.addMessageAndGetCount(new ChatMessage());
            }
        }
    };
    new Thread(runner).start();
    new Thread(runner).start();
} 
```

您不能安全地从同步块返回列表或子列表。您可以退回一份副本，但您只需要尺寸即可。

# java - 编程一对多关系

> ID：10086529
> 
> 赞同：13
> 
> 时间：2012-04-10T09:52:36.800
> 
> 标签：java, oop, one-to-many, relationship

所以我很惊讶在 google 和 stackoverflow 上进行搜索并没有返回更多结果。

在 OO 编程中（我使用的是 java），如何正确实现一对多关系？

我有一个班级`Customer`和班级`Job`。我的申请是针对一家为客户完成工作的虚构公司。我当前的实现是使该类与`Job`该类没有任何关系`Customer`，根本没有对它的引用。该类`Customer`使用集合和方法来保存、检索和修改有关已由客户分配和/或为客户完成的作业的信息。

问题是，如果我想知道某个特定的客户`Job`已经完成了怎么办？我只发现了这篇相关的文章：http: [//www.ibm.com/developerworks/webservices/library/ws-tip-objrel3/index.html](http://www.ibm.com/developerworks/webservices/library/ws-tip-objrel3/index.html)。

根据作者的实现，我会让`Job`构造函数接受一个`Customer`参数，并存储它以便我可以检索它。但是，我完全不能保证这个模型可以是**一致**的。没有限制将工作的相关客户设置为工作不适合的客户，并将工作添加到为其他人完成的客户。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-10T11:02:48.583

没有 100% 万无一失的方法来保持完整性。

通常采取的方法是使用一种方法来构建关系，并在同一方法中构建另一个方向。但是，正如你所说，这并不能阻止任何人搞砸它。

下一步是使某些方法可以包访问，以便至少与您无关的代码不能破坏它：

```
class Parent {

  private Collection<Child> children;

  //note the default accessibility modifiers
  void addChild(Child) {
    children.add(child);
  }

  void removeChild(Child) {
    children.remove(child);
  }
}

class Child {

   private Parent parent;
   public void setParent(Parent parent){
     if (this.parent != null)
       this.parent.removeChild(this);
     this.parent = parent;
     this.parent.addChild(this);
   }
} 
```

实际上，您不会经常在您的类中模拟这种关系。相反，您将在某种存储库中查找所有子代的父代。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T16:28:40.983

也许您没想到会有一个复杂（且零代码）的答案，但**没有解决方案可以按照您的意图构建防弹 API**。这不是因为范式（OO）或平台（Java），而只是因为您进行了错误的分析。在事务世界中（每个模拟现实生活问题及其随时间演变的系统**都是事务性的**）此代码**将**在某些时候中断：

```
// create
Job j1 = ...
Job j2 = ...
...
// modify
j1.doThis();
...

// access
j2.setSomeProperty(j1.someProperty); 
```

因为当时`j1.someProperty`被访问了，`j1`甚至`j2`不存在:)

## TL;博士

对此的长答案是*不变性*，它还引入了*生命周期*和*事务*的概念。所有其他答案都告诉你*如何去做*，而不是我想概述*为什么*。一对多关系有两个方面

1.  有很多
2.  属于

只要 Customer`A`有 Job `B`，你的系统是一致的， Job 是`B`属于 Customer的`A`。您可以通过多种方式实现这一点，但这必须发生在*事务*中，即由简单动作组成的复杂动作，并且系统必须在*事务*完成执行之前不可用。这是否看起来太抽象且与您的问题无关？不，不是 :) 事务系统确保客户端只有在所有这些对象都处于*有效状态*时才能访问系统的对象，因此只有在整个系统一致的情况下。**从其他答案中，您可以看到解决某些**问题所需的处理量，因此保证是有代价的：**性能**. 这是为什么 Java（和其他通用 OO 语言）无法立即解决您的问题的简单*解释*。

当然，OO 语言既可用于建模*事务世界*，也可用于访问它，但必须特别小心，必须施加一些约束，并且要求客户端开发人员采用特殊的编程风格。通常事务系统提供两个命令：**搜索**（又名查询）和**锁定**。查询的结果是**不可变**的：它是系统在特定时刻拍摄的照片（即副本），修改照片显然对现实世界没有影响。如何修改系统？通常

1.  如果/需要时锁定系统（或系统的一部分）
2.  定位对象：返回可以在本地读写的真实对象的*副本（照片）*
3.  修改本地副本
4.  提交修改后的对象，即让系统根据提供的输入更新其状态
5.  丢弃对（现在无用的）本地对象的任何引用：系统已更改，因此本地副本不是最新的。

*（顺便说一句，你能看到生命周期的概念是如何应用于本地和远程对象的吗？）*

您可以使用`Set`s、`final`修饰符等，但在引入事务和不变性之前，您的设计会有缺陷。Java 应用程序通常由提供事务功能的数据库支持，并且数据库通常与 ORM（如 Hibernate）耦合以编写面向对象的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T14:16:52.543

**您可以通过使用像HashSet这样的****Set**实现而不是使用其他数据结构来确保没有重复项。而不是将**Job**添加到客户，而是在 Job 类中创建一个具有私有构造函数的最终内部类。这确保了包装器内部类只能由作业对象创建。让您的 Job 构造函数以**jobID**和 customer 作为参数。为了保持一致性 - 如果客户为 Null，则抛出异常，因为不应创建虚拟作业。

 ******在 Customer的**add**方法中，查看**JobUnit**包裹的**Job**是否与自己的id相同的customer ID，如果没有则抛出异常。

 **在 Job 类中替换客户时，使用 Customer 类提供的方法删除**JobUnit**并将其自身添加到新客户，并将客户引用更改为新传递的客户。这样你就可以更好地推理你的代码。

这是您的客户类别可能的样子。

```
public class Customer {

    Set<JobUnit> jobs=new HashSet<JobUnit>();    
    private Long id;
    public Customer(Long id){        
        this.id = id;
    }

    public boolean add(JobUnit unit) throws Exception{
       if(!unit.get().getCustomer().id.equals(id))
           throw new Exception(" cannot assign job to this customer");
        return jobs.add(unit);
    }

     public boolean remove(JobUnit unit){
        return jobs.remove(unit);
    }

    public Long getId() {
        return id;
    }

} 
```

和工作类：

```
public class Job {
Customer customer;
private Long id; 
```

最终的 JobUnit 单元；

```
public Job(Long id,Customer customer) throws Exception{
    if(customer==null)
        throw new Exception("Customer cannot be null");
    this.customer = customer; 
   unit= new JobUnit(this);       
    this.customer.add(unit);
}

public void replace(Customer c) throws Exception{      
    this.customer.remove(unit);
    c.add(unit);
    this.customer=c;
}

public Customer getCustomer(){
    return customer;
}

/**
 * @return the id
 */
public Long getId() {
    return id;
}

public final class JobUnit{
    private final Job j;

    private JobUnit(Job j){
        this.j = j;

    }
    public Job get(){
        return j;
    }
 }
} 
```

但我很好奇的一件事是，为什么您甚至需要向客户对象添加工作？如果您只想检查哪个客户已分配到哪个工作，只需检查一个工作即可为您提供该信息。一般来说，除非不可避免，否则我尽量不创建循环引用。此外，如果不需要在创建工作后从工作中替换客户，只需在**Job**类中将客户字段设为 Final 并删除方法来**设置**或**替换**它。

应在数据库中维护为工作分配客户的限制，并且应将数据库条目用作检查点。至于向客户添加为其他人完成的工作，您可以检查工作中的客户参考，以确保要添加工作的客户与其持有的客户相同，甚至更好 -**只需删除中的任何参考Job 的客户，它将为您简化事情**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T10:09:23.523

如果 Customer 对象拥有关系，那么您可以这样做：

```
Job job = new Job();
job.setStuff(...);
customer.addJob(Job job) {
    this.jobs.add(job);
    job.setCustomer(this); //set/overwrite the customer for this job
}

//in the job class
public void setCustomer(Customer c) {
    if (this.customer==null) {
        this.customer = c;
    } // for the else{} you could throw a runtime exception
} 
```

...如果所有权是相反的，只需用客户代替工作。

这个想法是让关系的所有者保持一致性。双向关系通常意味着一致性管理位于两个实体中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T10:06:42.470

制作一个保持一致性的适当的 setter 函数。例如，每当您创建作业时，您都会在构造函数中提供客户。然后，作业构造函数将自己添加到客户的作业列表中。或者，每当您向客户添加工作时，添加功能必须检查工作的客户是否就是要添加到的客户。或者将这个和类似的东西结合起来以满足您的需求。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-10T10:27:51.543

只需在具有其他对象的对象中实现某种集合例如在客户中，您可以说：

```
private List<Job> jobs; 
```

然后通过使用 getter 和 setter，您可以将值作业添加到此列表中。这是基本的面向对象的东西，我认为您在互联网上搜索得不够多。有很多关于这些主题的信息。

顺便说一句，您可以使用各种集合（集合、列表、地图）

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-10-18T20:48:55.937

我知道这已经晚了，但我认为另一种方法是从不同的角度看待问题。由于客户拥有由客户分配或为客户完成的所有工作的集合，因此您可以将工作类视为客户的子类，其中包含客户完成所有工作的额外信息。然后你只需要在主类中维护客户 ID，它就会被继承。这种设计将确保每个工作都可以链接到一个客户。此外，如果您想知道客户有多少工作，那么您也会得到。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-11-08T10:00:48.973

很抱歉，我知道这已经很晚了，但我遇到了类似的问题，我觉得最好的解决方案是遵循继承模型。将工作视为由特定客户完成/分配的工作。因此，在这种情况下，客户将是一个超类，而 Job(Lets call is customer job) 是一个子类，因为没有客户就无法存在 Job。客户还会有一个作业列表，主要是为了便于获取数据。直觉上这是没有意义的，因为 Job 和 Customer done 似乎有任何关系，但是一旦你看到 Job 没有客户就无法存在，它就变成了客户的延伸。********

# postgresql - 如何将数据库中的所有列转换为不区分大小写

> ID：10086532
> 
> 赞同：17
> 
> 时间：2012-04-10T09:52:49.870
> 
> 标签：postgresql

我已经看到可以使用 psql 中的以下命令将所有**表**转换为不区分大小写的名称：

```
\o /tmp/go_to_lower
select 'ALTER TABLE '||'"'||tablename||'"'||' RENAME TO ' ||
lower(tablename)||';' from pg_tables where schemaname = 'public';
psql -U username database < /tmp/go_to_lower 
```

我一直无法找到以相同方式将所有**列**转换为不区分大小写的命令。如何做到这一点？

编辑：显然上面的代码只将表名转换为小写。我知道此代码 ALTER TABLE "YourTableName" RENAME TO YourTableName; 将转换为表名不区分大小写。有没有办法对列名的质量执行类似的功能？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-10T11:58:23.667

按照与原版相同的思路，您应该能够执行以下操作。这通过从 information_schema 中提取它们，为更改生成 SQL，将其存储到文件然后再次执行 SQL 来重命名所有尚未使用小写的列。

```
\t on
select 'ALTER TABLE '||'"'||table_name||'"'||' RENAME COLUMN '||'"'||column_name||'"'||' TO ' || lower(column_name)||';' 
from information_schema.columns 
where table_schema = 'public' and lower(column_name) != column_name
\g /tmp/go_to_lower
\i /tmp/go_to_lower 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-10T10:46:38.227

By default, all you identifiers are case insensitive, and internally PostgreSQL stores them in lowercase. In case you need to have:

*   case sensitive
*   non-ASCII characters
*   special characters

within your identifiers, you should use double quotes (`"`) around your identifiers.

Please, check [this bit](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS) of the PostgreSQL documentation.

**EDIT:** After your clarification, you can use:

```
SELECT 'ALTER TABLE '||quote_ident(t.relname)||' RENAME TO '||t.relname||';'
  FROM pg_class t, pg_namespace s
 WHERE s.oid = t.relnamespace AND s.nspname = 'public'
   AND t.relkind='r' AND t.relname != lower(t.relname)
 ORDER BY 1; 
```

and for columns:

```
SELECT 'ALTER TABLE '||quote_ident(t.relname)||
       ' RENAME COLUMN '||quote_ident(a.attname)||
       ' TO '||a.attname||';'
  FROM pg_class t, pg_namespace s, pg_attribute a
 WHERE s.oid = t.relnamespace AND s.nspname = 'public'
   AND t.relkind='r'
   AND a.attrelid = t.oid AND NOT a.attisdropped AND a.attnum > 0
   AND a.attname != lower(a.attname)
 ORDER BY 1; 
```

Then copy-paste the output into your client.

If you're using `psql`, you can use `\t` to enable rows-only mode, `\o <full_file_path>` to save output into the temporary file and, finally, `\i <full_file_path>` to execute actual statements.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-27T19:32:23.630

我在 Database Administrators 上创建了一个 SQL 查询来执行此操作。

1.  将所有标识符转换为小写
2.  将空格转换`' '`为`'_'`
3.  对所有架构、表和列名执行此操作

有关更多信息，请参阅，

*   *[如何在旧数据库中采用 PostgreSQL 命名约定？](https://dba.stackexchange.com/a/202446/2639)*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T14:15:16.910

```
do language plpgsql $$
declare
    r record;
begin
    for r in
        select relname, attname
        from pg_attribute a
        inner join pg_class c on a.attrelid = c.oid
        inner join pg_namespace n on c.relnamespace = n.oid
        where 
            n.nspname = 'public'
            and
            attname != lower(attname)
            and
            not attisdropped
    loop
        execute format('
            alter table %1$I rename column %2$I to %3$s
        ', r.relname, r.attname, lower(r.attname));
    end loop;
end;
$$; 
```

`begin;`在尝试这个之前发出一个。检查是否正确。然后才发出一个`commit;`. 如果您使用的是命名空间，请在`where`子句中替换它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-03T17:18:09.580

让我为像我这样的初学者和不习惯像 psql 这样的命令行工具的初学者添加一个使用 PgAdmin 的分步指南：

在 PgAdmin 中执行以下查询：

```
SELECT  'ALTER TABLE ' || quote_ident(c.table_schema) || '.'
  || quote_ident(c.table_name) || ' RENAME "' || c.column_name || '" TO ' || quote_ident(lower(c.column_name)) || ';' As ddlsql
  FROM information_schema.columns As c
  WHERE c.table_schema NOT IN('information_schema', 'pg_catalog') 
      AND c.column_name <> lower(c.column_name) 
  ORDER BY c.table_schema, c.table_name, c.column_name; 
```

*来源：[https](https://www.postgresonline.com/article_pfriendly/141.html) ://www.postgresonline.com/article_pfriendly/141.html 。请注意，您无需在此处更改任何内容。

现在将结果导出到文本文件。

[![在此处输入图像描述](../Images/6482dda1ceb4dafb83276ec6fc2fa84a.png)](https://i.stack.imgur.com/ufPf9.png)

使用 Excel、记事本或您选择的任何文本编辑器打开 .csv 文件。复制除第一行（“ddlsql”）之外的所有行并将它们粘贴到 PgAdmin 中的新查询中。确保删除双引号。运行它并完成。

# c# - 在保护开启时单击左上角的鼠标右键会导致应用程序崩溃

> ID：10086535
> 
> 赞同：0
> 
> 时间：2012-04-10T09:52:57.410
> 
> 标签：c#, excel, crash

我创建了一个使用保护的 excel 插件。

当我有保护活动时，当我先用鼠标左键（选择所有 excel 单元格）然后用鼠标右键单击左上角（选择所有单元格）时，excel 会崩溃。应该有一个上下文菜单，而不是excel崩溃。

如何解决这个问题？

这是我的保护命令：

```
getWorksheet().Protect(Properties.Settings.Default.worksheetPassword, false, true, false, true, true, true, true, false, false, true, false, false, true, true, true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:31:13.440

我找到了！将第十个布尔值设置为 false 解决了问题；这是'AllowInsertingHyperlinks（true 允许用户在工作表上插入超链接。）'。对于我的应用程序，不允许超链接是没有问题的。

# ios - App-book library有什么好的建议吗？

> ID：10086539
> 
> 赞同：0
> 
> 时间：2012-04-10T09:53:09.437
> 
> 标签：ios, app-store

我已经发布了几本儿童应用书，而且书的数量很大。

我想做的是创建一个书架（就像 iOS 中的新闻站），然后把书放在一起。

我认为没有办法将我的应用程序放在一个应用程序（书架......）中，所以我试图重新制作我以前的所有工作（应用程序书籍）并创建新的应用程序（书架）。

但是，每个应用程序书都有自己的交互式对象，所以我不知道如何做到这一点。

有什么好的文件或任何提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T10:06:49.533

您的书籍可以通过 iBooks Author 制作吗？它们是如何交互的？如果你必须走自定义商店路线，我会看看 epub 和 HTML5。

查看 Baker 框架或 HPub。还可以查看各种交互式 PDF SDK。

# twig - Twig 未在 Silex 中加载

> ID：10086542
> 
> 赞同：1
> 
> 时间：2012-04-10T09:53:18.267
> 
> 标签：twig, silex

我正在尝试使用[Silex FW](http://silex.sensiolabs.org)运行应用程序。我有与示例类似的源代码：

```
require_once __DIR__.'/silex.phar'; 

$app = new Silex\Application(); 

$app['debug'] = true;

$app->register(new Silex\Provider\TwigServiceProvider(), array(
    'twig.path' => __DIR__ . '/views',
    'twig.class_path' => __DIR__ . '/vendor/twig/lib',
));

$app->get('/hello/{name}', function ($name) use ($app) {
    return $app['twig']->render('hello.twig', array(
        'name' => $name,
    ));
}); 

$app->run(); 
```

但我收到了这个错误：

```
Fatal error:  Class 'Twig_Environment' not found in phar:///var/www/silex/silex.phar/src/Silex/Provider/TwigServiceProvider.php on line 40
Stack trace:
  1\. {main}() /var/www/silex/index.php:0
  2\. Silex\\Application->run() /var/www/silex/index.php:20
  3\. Silex\\Application->handle() phar:///var/www/silex/silex.phar/src/Silex/Application.php:396
  4\. Symfony\\Component\\HttpKernel\\HttpKernel->handle() phar:///var/www/silex/silex.phar/src/Silex/Application.php:411
  5\. Symfony\\Component\\HttpKernel\\HttpKernel->handleRaw() phar:///var/www/silex/silex.phar/vendor/symfony/http-kernel/Symfony/Component/HttpKernel/HttpKernel.php:72
  6\. call_user_func_array() phar:///var/www/silex/silex.phar/vendor/symfony/http-kernel/Symfony/Component/HttpKernel/HttpKernel.php:128
  7\. {closure}() phar:///var/www/silex/silex.phar/vendor/symfony/http-kernel/Symfony/Component/HttpKernel/HttpKernel.php:128
  8\. Pimple->offsetGet() phar:///var/www/silex/silex.phar/vendor/symfony/http-kernel/Symfony/Component/HttpKernel/HttpKernel.php:15
  9\. {closure}() phar:///var/www/silex/silex.phar/vendor/pimple/pimple/lib/Pimple.php:81
 10\. Silex\\Provider\\{closure}() phar:///var/www/silex/silex.phar/vendor/pimple/pimple/lib/Pimple.php:120 
```

这个问题也[发布在 GitHub 上](https://github.com/fabpot/Silex/issues/252)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:02:36.683

解决方案是使用[Composer](http://getcomposer.org/)和[`autoload.php`](https://github.com/fabpot/Silex/issues/252#issuecomment-5045152).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-09T11:39:56.627

使用这种方法，您的 twig.class_path 可能需要是`vendor/twig/twig/lib`（额外的 twig 目录）...

但是 twig.class_path 实际上是不必要的，对于 composer，这是更好的方法（如 kuboslav 注释）。

# javascript - JavaScript 弹出窗口：在 JQuery 中调用

> ID：10086543
> 
> 赞同：1
> 
> 时间：2012-04-10T09:53:20.560
> 
> 标签：javascript, jquery

在我的应用程序中，我使用了一个简单的 JavaScript 弹出窗口并以这种方式成功调用它——

```
<a href="javascript:popup('Hello World')>Click Me</a> 
```

我想知道是否可以在其他 jQuery 事件上调用相同的弹出窗口。例如

```
 $("#some_button_id").click( function() {

        javascript:popup('Hello World');

    }); 
```

上述方法无效。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:56:15.340

编辑 - 您不需要该`javascript:`部分，因为您没有附加 javascript 内联。但这不是错误的原因，因此请确保在附加事件处理程序之前等到 DOM 准备好。

```
$(function(){
    var popup = function(msg){
        alert(msg);
    }
    $("#some_button_id").click( function() {

        popup('Hello World');

    }); 
}); 
```

当然要确保你在`popup()`某个地方定义

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T09:57:01.410

如果`popup`您的页面上定义了该功能，那么您应该使用

```
$("#some_button_id").click( function() {
    popup('Hello World');
}); 
```

`javascript:`仅当您直接在 html 属性中使用 javascript 代码时才需要该前缀。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T09:55:55.173

```
 $("#some_button_id").click( function() {

        popup('Hello World');

    }); 
```

应该管用。

编辑

这将确保在事件触发时 id 退出，无论是否在添加侦听器时创建它，它都称为委托：

```
$(document.body).click( function(e) {
if(e.target.getAttribute("id")=="some_button_id"){
        popup('Hello World');
}
}); 
```

# .net - 分布式网页抓取框架

> ID：10086547
> 
> 赞同：3
> 
> 时间：2012-04-10T09:53:38.183
> 
> 标签：.net, amazon-web-services, web-scraping, web-crawler

有哪些流行的分布式网络抓取框架？

是否支持 REST 接口？

哪一个更容易在 AWS 中托管？

哪一个支持网络代理使用？

.NET上有什么吗？

# matrix - 相似矩阵的有效聚类

> ID：10086551
> 
> 赞同：6
> 
> 时间：2012-04-10T09:53:53.897
> 
> 标签：matrix, machine-learning, cluster-analysis, distance, similarity

我的主题是（一堆）文本的相似性和聚类。简而言之：我想将收集的文本聚集在一起，它们应该出现在最后有意义的集群中。为此，我到目前为止的方法如下，我的问题在于集群。目前的软件是用php编写的。

1) 相似性：我将每个文档视为“词袋”并将词转换为向量。我用

*   过滤（仅“真实”单词）
*   标记化（将句子分成单词）
*   词干提取（将单词简化为基本形式；波特词干分析器）
*   修剪（剪切频率过高和过低的单词）

作为降维的方法。之后，我使用余弦相似度（如网络上各种网站[和此处](https://stackoverflow.com/a/1290286/519270)所建议/描述的那样） 。

结果是这样的相似矩阵：

```
 A   B   C   D   E 
    A   0  30  51  75  80
    B   X   0  21  55  70
    C   X   X   0  25  10
    D   X   X   X   0  15
    E   X   X   X   X   0 
```

A…E 是我的文本，数字是百分比相似度；越高，文本越相似。因为 sim(A,B) == sim(B,A) 只填充了一半的矩阵。所以文本 A 与文本 D 的相似度为 71%。

我现在想从这个矩阵中生成一个先验未知（！）个簇。集群应该一起代表相似的项目（直到某个停止标准）。

我自己尝试了一个基本的实现，基本上是这样的（60%作为固定相似度阈值）

```
 foreach article
      get similar entries where sim > 60
              foreach similar entry
              check if one of the entries already has a cluster number
              if no: assign new cluster number to all similar entries
              if yes: use that number 
```

它起作用了（不知何故），但一点都不好，结果往往是怪物群。所以，我想重做这个，并且已经研究了各种聚类算法，但我仍然不确定哪一个效果最好。我觉得应该是凝聚算法，因为每一对文本一开始都可以看成一个簇。但问题仍然是停止标准是什么，以及算法是否应该将现有集群划分和/或合并在一起。

对不起，如果有些东西看起来很基础，但我在这个领域相对较新。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-30T19:06:37.917

由于你们都是该领域的新手，拥有未知数量的集群并且已经在使用余弦距离，我建议使用[FLAME](http://en.wikipedia.org/wiki/FLAME_clustering)聚类算法。

它直观、易于实现，并且有多种语言的实现（虽然不是 PHP，主要是因为很少有人将 PHP 用于数据科学）。

更不用说，它实际上足以被大量人用于研究。如果不出意外，您可以了解在转移到另一个聚类算法时要解决的聚类算法的确切缺点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T16:28:07.680

试试看吧。那里有很多聚类算法，没有人会知道所有这些。此外，它还很大程度上取决于您的数据集和那里的聚类结构。最后，就余弦距离和 BofW 特征而言，也可能只有这一个怪物集群。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-29T06:40:43.223

也许您可以将相似矩阵转换为相异矩阵，例如将 x 转换为 1/x，那么您的问题是对相异矩阵进行聚类。我认为分层集群可能会起作用。这些可能会对您有所帮助：[层次聚类](https://github.com/lbehnke/hierarchical-clustering-java)和[聚类相异矩阵](http://www.mpipks-dresden.mpg.de/~tisean/Tisean_3.0.1/docs/docs_f/cluster.html)

# objective-c - BOOL 设置不正确，调试输出混乱

> ID：10086553
> 
> 赞同：0
> 
> 时间：2012-04-10T09:54:04.417
> 
> 标签：objective-c, xcode, debugging, initialization, boolean

我试图在 Xcode 中设置一个 BOOL 并且由于某种原因它明显拒绝工作。没有其他东西在设置这个布尔值，只有这个实例。我的代码如下：

。H

```
@interface SuspectsViewController : UIViewController 
{
    BOOL boolContentChanged;
}

@property (nonatomic) BOOL boolContentChanged; 
```

.m

```
@synthesize boolContentChanged;

-(IBAction)buttonPressed:(id)sender
{
    boolContentChanged = true;
} 
```

我也尝试过使用 self.boolContentChanged 但也没有任何反应。为了尝试调试它，我使用了 po boolContentChanged 并获得以下输出，第一个 po 在 boolContentChanged = true 之前，第二个在之后。

```
(lldb) po boolContentChanged
(BOOL) $4 = '\0' <nil>
(lldb) po boolContentChanged
(BOOL) $7 = '\0' <nil> 
```

$ 是否表示它指向某个地址，还是纯粹用于调试参考？

另外，有什么理由会为零吗？如果它是布尔值而不是指针，肯定不需要隐式设置吗？

对此的任何建议都非常感谢，因为我无法解决，在此先感谢 Elliott

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T15:26:49.727

调试器 (gdb) 中的“po”是“print-object”的缩写。该`BOOL`类型不是 Objective-C 对象。使用 "p" 或 "print" 显示`BOOL`, `int`,`char`等的值。

调试器响应您的“po”命令输出的美元数字（“$4”）将结果分配给调试器中的一个变量，您可以在以后的命令中使用该变量。

至于您描述的问题，您能否确认您的操作方法实际上正在被调用？尝试添加：

```
NSLog( @"In %@", NSStringFromSelector( _cmd )); 
```

到你的`-buttonPressed`方法。如果您的操作实际上被调用，您将在调试器中看到：

> 在按钮按下：

您还可以`NSLog()`输出您的值`BOOL`：

```
NSLog( @"Before: %d", (int)boolContentChanged ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T13:58:27.587

我终于设法弄清楚发生了什么。关于调试器，它确实使用 YES / NO 而不是 true / false 产生了实际差异，如果我使用 p 显式查找它们，值仍在设置中，但是当使用 YES / NO 时，它们会自动显示。因此，这似乎是智能感知在某些情况下无法更新。

感谢大家的帮助。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-10T10:46:53.690

当您使用 BOOL 时，您需要使用 YES 或 NO 而不是 true 和 false。

# facebook - 为 facebook 填充共享者链接

> ID：10086555
> 
> 赞同：0
> 
> 时间：2012-04-10T09:54:19.383
> 
> 标签：facebook

我使用这个 URL 来分享我的网站，而无需添加任何 facebook 代码：

[http://www.facebook.com/sharer/sharer.php?u=http://yahoo.com](http://www.facebook.com/sharer/sharer.php?u=http://yahoo.com)

我想知道，有没有办法填充描述字段，比如另一个 URL 参数？

编辑：似乎不推荐使用共享器以支持赞按钮，但我不想使用赞按钮的丑陋外观。有没有办法代替它？我试图在 twitter 中实现这样的效果：

```
<a href='http://twitter.com/home?status=My_message' <img src='mytwittericon.png' /></a>" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T10:04:16.947

facebook "sharer" 已被弃用，不再受支持，如下[所述](http://developers.facebook.com/docs/share/)：

> Share 按钮已被弃用，取而代之的是 Like 按钮，并且将不再受支持。请尽可能使用“赞”按钮为您的应用带来最大流量。

[在](http://developers.facebook.com/docs/reference/plugins/like/)这里：

> **旧的“分享”按钮怎么了？**
> 
> 当我们启动“赞”按钮时，我们弃用了“分享”按钮，因为“赞”按钮允许用户一键连接，并允许他们查看他们的哪些朋友已经连接，从而提高了点击率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-31T06:54:09.483

实际上，我发现 Sharer 比 Like 按钮更有用。

试试这个代码：

```
<a href="https://www.facebook.com/sharer/sharer.php?s=100&p[url]=URL to share &p[title]=Title&p[images][0]=image link&p[summary]=My website summary"><img src="http://yourdefaultsharebutton.png"></a> 
```

或者只是设置适当的 OG 标签。

# python - 在 python 中使用后缀树

> ID：10086558
> 
> 赞同：5
> 
> 时间：2012-04-10T09:54:34.453
> 
> 标签：python, hash, suffix-tree

我对 python 比较陌生，并且开始使用后缀树。我可以构建它们，但是当字符串变大时我遇到了内存问题。我知道它们可用于处理大小为 4^10 或 4^12 的 DNA 字符串，但每当我尝试实现一种方法时，都会遇到内存问题。

这是我生成字符串和后缀树的代码。

```
import random

def get_string(length):
    string=""
    for i in range(length):
        string += random.choice("ATGC")
    return string

word=get_string(4**4)+"$"

def suffixtree(string):
    for i in xrange(len(string)):
        if tree.has_key(string[i]):
            tree[string[i]].append([string[i+1:]][0])
        else:
            tree[string[i]]=[string[i+1:]]
    return tree

tree={}
suffixtree(word) 
```

当我达到 4**8 左右时，我遇到了严重的内存问题。我对此很陌生，所以我确定我在存储这些东西时遗漏了一些东西。任何建议将不胜感激。

注意：我想做字符串搜索以在一个非常大的字符串中查找匹配的字符串。搜索字符串匹配大小为 16。因此，这将在一个大字符串中查找大小为 16 的字符串，然后移动到下一个字符串并执行另一次搜索。由于我将进行大量搜索，因此建议使用后缀树。

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T11:00:12.917

这在我看来不像一棵树。看起来您正在生成所有可能的后缀，并将它们存储在哈希表中。

如果您使用实际的树，您可能会获得更小的内存性能。我建议使用库实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T02:34:59.147

正如其他人已经说过的，您正在构建的数据结构不是后缀树。但是，**内存问题**主要源于您的数据结构涉及大量**显式字符串副本这一事实。**像这样的电话

```
string[i+1:] 
```

创建从 开始的子字符串的实际（深层）副本`i+1`。

如果您仍然对构建原始数据结构（无论其用途如何）感兴趣，一个好的解决方案是使用**缓冲区**而不是字符串副本。您的算法将如下所示：

```
def suffixtree(string):
    N = len(string)
    for i in xrange(N):
        if tree.has_key(string[i]):
            tree[string[i]].append(buffer(string,i+1,N))
        else:
            tree[string[i]]=[buffer(string,i+1,N)]
    return tree 
```

我尝试将此嵌入到您的其余代码中，并确认即使总长度为 8^11 个字符，它也需要明显少于 1 GB 的主内存。

**请注意，即使您切换到实际的后缀树，这也可能是相关的。**一个正确的后缀树实现不会在树边缘存储副本（甚至不是缓冲区）；但是，在树构建期间，您可能需要大量字符串的临时副本。为这些使用`buffer`类型是一个非常好的主意，可以避免所有不必要的显式字符串副本给垃圾收集器带来沉重的负担。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T11:38:54.213

如果您的记忆问题在于创建后缀树，您确定需要一个吗？您可以在一个字符串中找到所有匹配项，如下所示：

```
word=get_string(4**12)+"$"

def matcher(word, match_string):
    positions = [-1]
    while 1:
        positions.append(word.find(match_string, positions[-1] + 1))
        if positions[-1] == -1:
            return positions[1:-1]

print matcher(word,'AAAAAAAAAAAA')
[13331731, 13331732, 13331733]
print matcher('AACTATAAATTTACCA','AT')
[4, 8] 
```

我的机器很旧，运行时间为 30 秒，字符串为 4^12。我使用了一个 12 位的目标，所以会有一些匹配。此解决方案还将找到重叠的结果 - 如果有的话。

[这](https://github.com/kvh/Python-Suffix-Tree)是您可以尝试的后缀树模块，如下所示：

```
import suffixtree
stree = suffixtree.SuffixTree(word)
print stree.find_substring("AAAAAAAAAAAA") 
```

不幸的是，我的机器太慢了，无法用长字符串正确测试它。但是大概一旦构建了后缀树，搜索将非常快，因此对于大量搜索，它应该是一个很好的调用。进一步`find_substring`只返回第一个匹配项（不知道这是否是一个问题，我相信你可以轻松适应它）。

**更新：将字符串拆分成更小的后缀树，从而避免内存问题**

因此，如果您需要对 4^12 长度的字符串进行 1000 万次搜索，我们显然不想等待 9.5 年（标准的简单搜索，我首先建议，在我的慢速机器上......）。但是，我们仍然可以使用后缀树（因此要快得多），并避免内存问题。将大字符串拆分为可管理的块（我们知道机器内存可以处理）并将一个块变成后缀树，搜索 1000 万次，然后丢弃该块并移动到下一个块。我们还需要记住搜索每个块之间的重叠。我写了一些代码来做到这一点（它假设要搜索的大字符串`word`是我们最大可管理字符串长度的倍数`max_length`，你必须调整代码以检查最后的余数，如果这不是案子）：

```
def split_find(word,search_words,max_length):
    number_sub_trees = len(word)/max_length
    matches = {}
    for i in xrange(0,number_sub_trees):
        stree = suffixtree.SuffixTree(word[max_length*i:max_length*(i+1)])
        for search in search_words:
            if search not in matches:
                match = stree.find_substring(search)
                if match > -1:
                    matches[search] = match + max_length*i,i
            if i < number_sub_trees:
                match = word[max_length*(i+1) - len(search):max_length*(i+1) + len(search)].find(search)
                if match > -1:
                    matches[search] = match + max_length*i,i
    return matches

word=get_string(4**12)
search_words = ['AAAAAAAAAAAAAAAA'] #list of all words to find matches for
max_length = 4**10 #as large as your machine can cope with (multiple of word)
print split_find(word,search_words,max_length) 
```

在此示例中，我将最大后缀树长度限制为长度 4^10，大约需要 700MB。使用此代码，对于一个 4^12 长度的字符串，1000 万次搜索大约需要 13 个小时（完整搜索，零匹配，所以如果有匹配会更快）。但是，作为其中的一部分，我们需要构建 100 棵后缀树，这大约需要..100*41sec= 1 小时。

所以运行的总时间大约是 14 小时，没有内存问题……比 9.5 年有了很大的改进。请注意，我在具有 1GB RAM 的 1.6GHz CPU 上运行它，所以你应该能够做得比这更好！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-10T13:07:56.267

您遇到内存问题的原因是`'banana'`您正在生成的输入`{'b': ['anana$'], 'a': ['nana$', 'na$', '$'], 'n': ['ana$', 'a$']}`。那不是树形结构。您可以在其中一个列表中创建并存储输入的所有可能后缀。这需要 O(n^2) 存储空间。此外，为了使后缀树正常工作，您希望叶节点为您提供索引位置。

[你想要得到](http://en.wikipedia.org/wiki/Suffix_tree)的结果是`{'banana$': 0, 'a': {'$': 5, 'na': {'$': 3, 'na$': 1}}, 'na': {'$': 4, 'na$': 2}}`. （这是一种优化的表示；一种更简单的方法将我们限制为单字符标签。）

# jsp - 显示标签：如何使用显示标签显示图像

> ID：10086560
> 
> 赞同：0
> 
> 时间：2012-04-10T09:54:38.203
> 
> 标签：jsp

我有一个论坛网站，人们可以在那里发布内容，他们也可以上传图片。因此，如果任何用户使用任何关键字搜索论坛，我想使用显示标签将搜索结果显示到 JSP 页面上（至此，我还想显示图片。

但我不确定如何使用显示标签图片也可以显示在搜索结果中

请分享您的经验，因为我如何使用显示标签来实现此要求，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:11:28.707

显示标签与图片无关。它的目标是生成表格。如果要在表格的列中显示一些图片，请使用以下代码：

```
<display:table id="myBean" ...>
    <display:column>
        <img src="<c:url value='${myBean.pictureUrl}'/>" />
    </display:column>
</display:table> 
```

这假定您迭代的 bean 有一个方法，该方法`public String getPictureUrl()`返回要为此 bean 显示的图片的绝对或上下文相关 URL。

# objective-c - NSXMLParser 创建节点和 NSMutableArray

> ID：10086564
> 
> 赞同：0
> 
> 时间：2012-04-10T09:55:12.620
> 
> 标签：objective-c, ios, nsxmlparser

我正在寻找建议。我想用 解析一个`XML`文件`NSXMLParser`，我想知道我应该如何处理标签和参数。例如我有：

```
<template>
    <template name="default" layout="absolute">
        <image tmpl="topbanner"/>
        <list tmpl="list">
            <font tmpl="listfont"/>
            <item target="target1">
                <text>Target1</text>
            </item>
            <item target="target2">
                <text>Target2</text>
            </item>
            <item target="target3">
                <text>Target3</text>
            </item>
                .
                .
                . 
```

后来我想根据这些信息创建一个对象。那么 - 我应该在哪里存储来自解析器的检索信息？在方法：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict 
{
    element = [NSMutableString string];
} 
```

我看到我可以简单地接收属性 ang 标签，但我应该在这一点上写它吗`NSMutableArray`？`NSDictionary`

我已经阅读[了 NSXMLParser 如何将 NSMutableDictionary 传递给 NSMutableArray](https://stackoverflow.com/questions/8596824/nsxmlparser-how-to-pass-the-nsmutabledictionary-to-a-nsmutablearray)但这是最​​好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:52:05.910

如果您知道一个`<list>`元素包含一个子元素数组，您可能希望在该块的开头创建一个数组或字典：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict 
{
    if ([elementName isEqualToString:@"list"]) {
        self.list = [NSMutableDictionary dictionary];
        self.listName = [attributeDict objectForKey:@"tmpl"]
    }
    else if ([elementName isEqualToString:@"item"]) {
        self.itemKey = [attributeDict objectForKey:@"target"];
    }
    else if ([elementName isEqualToString:@"text"]) {
        self.data = [NSMutableString string];
    }
    else if ([elementName isEqualToString:@"font"]) {
        self.font = [attributeDict objectForKey:@"tmpl"];
    }
} 
```

然后你可以`<item>`在你的方法中添加简单的元素`-parser:didEndElement:...`：

```
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if (elementName isEqualToString:@"text") {
        // no action needed here -- data already contains the text
    }
    else if (elementName isEqualToString:@"item"]) {
        [self.list setObject:[self.data copy] forKey:self.itemKey;
        self.itemKey = nil;
    }
    else if ([elementName isEqualToString:@"list"]) {
        // do something appropriate with the list
        [self.template setObject:self.items forKey:self.listName];
        self.listName = nil;
        self.list = nil;
    }
} 
```

这一切都假定您已经拥有`font`、`data`、`itemKey`等的属性......基本上无论您需要记住所有需要的状态，直到您可以创建相关对象。一旦你有你需要的数据，通常在`didEnd`方法中，创建对象，将它存储在某个地方，并清除保存的数据。

这不是解析数据的唯一方法。例如，您可能希望改用基于堆栈的方法。但是上面说明的想法可能是最容易理解的，如果数据不是太复杂，也不难管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T10:43:29.573

要获取标签内的内容，请使用：

```
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {
    [element appendString:string];
} 
```

然后签到：

```
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName { 
```

获取属性：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {

    if ([elementName isEqualToString:@"image"]) {
        NSString *imageName = [attributeDict objectForKey:@"tmpl"];
    } 
```

}

# javascript - 用 javascript 事件监听器替换传统的事件调用

> ID：10086567
> 
> 赞同：0
> 
> 时间：2012-04-10T09:55:21.277
> 
> 标签：javascript, dom, javascript-events, onclick

使用以下代码：

```
<head>
<script type="text/javascript">
function popupMsg(msg) { 
  alert(msg);
}
</script>
</head>

<body>
<a href="http://www.xyz.com" onClick="popupMsg('This is pop up message')">xyz.com</a>
</body> 
```

**如何在锚标签内`onClick`替换？`addEventListener`**

可以在*不*分配`ID`锚标记的情况下完成吗？

大概是这样的：

```
<a href="http://www.xyz.com" something.addEventListener('click',popupMsg(SomeMsg),false)>xyz.com</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T10:06:34.063

我不相信它以这种方式得到支持。您也许可以尝试 onload 处理程序：

```
<a href="" onLoad="(function(){ this.addEventListener("click", "fnName", false); })();">Link</a> 
```

上面的代码未经测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T10:08:17.013

您可以使用 querySelector（在现代浏览器中）来选择元素：

```
var anchor = document.querySelector('a') 
```

（这应该选择页面上的第一个链接）

然后附上您的活动：

```
anchor.addEventListener( ... ); 
```

这些都不是在元素上内联完成的，这可以说是更好的......

所以像：

```
 <script>
    // Function to add event listener to the anchor  
    function load() {   
       var anchor = document.querySelector('a')  
       anchor.addEventListener( ... );
     }  

    document.addEventListener("DOMContentLoaded", load, false);  

  </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T10:15:32.713

浏览器支持不同“级别”的事件附加，这是 W3C 随着时间的推移设置的标准。通过 DOM 中的“onclick”直接附加事件（即`<a href="#" onclick="myFunction()">`级别 0，或使用 JavaScript 执行相同操作（即：）`document.getElementsByTagName('a')[0].onclick = myFunction;`是级别 1。

级别 0 和级别 1 的限制是对于任何一种类型的事件，在任何时候只能将一个事件处理程序附加到每个单独的元素。为了使事件附加更加灵活，第 2 级事件允许为每个元素上的每种类型的事件提供多个事件处理程序，并且附加了`document.getElementsByTagName('a')[0].addEventListener('click', myFunction, true)`.

在两者之间切换的有用指南位​​于[http://jupiterjs.com/news/a-crash-course-in-how-dom-events-work](http://jupiterjs.com/news/a-crash-course-in-how-dom-events-work)。

如果您不想将 ID 添加到元素以附加事件处理程序，jQuery 是一个库，它使使用 CSS 选择器查询 DOM 变得非常简单（上面的代码将变为`jQuery('a').click(myFunction)`） - 更多信息位于[http://jquery.com](http://jquery.com)

# jquery - 如何从 ASP.NET 后面的代码中填充 Jquery 多列选择框？

> ID：10086568
> 
> 赞同：0
> 
> 时间：2012-04-10T09:55:28.407
> 
> 标签：jquery, asp.net

我想使用类似[jquerymulticolumn](http://code.google.com/p/jquerymulticolumnselectbox/)的东西。但我不能从后面的代码中使用它。我该怎么做或有人建议我另一个多列选择框？

aspx：

```
.
.
<td>

   <div id="datatable">
       <table cellspacing="0" width="100%">
         <tr>
             <th>ID</th><th>Action Name</th><th>Action ID</th>
          </tr>
          <tr>
            <asp:repeater id="rep" runat="server">
               <itemtemplate>
                  <tr>
                     <td><%#Eval("AKSIYON_ID")%></td><td><%#Eval("AKSIYON_ADI")%></td><td><%#Eval("AKSIYON_ID")%></td>
                   </tr>
               </itemtemplate>
             </asp:repeater>
          </table>
      </div>

   </td>
   .
   . 
     <script type="text/javascript">

      $("#datatable").multicolselect({
          buttonImage: "../Images/selectbutton.gif",
          valueCol: 1,
          hideCol: 0
      });

      </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:03:43.257

您可以对`List Box`具有名为 的属性的控件执行类似操作`MultiColumn`。

查看有关[ListBox.MultiColumn 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.multicolumn.aspx)和[指定多列列表框中的列的文档](http://msdn.microsoft.com/en-us/library/bb176505%28v=office.12%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T10:09:47.027

正在使用 HTML 表格填充其`jquerymulticolumn`下拉列表。您可以使用[ASP.NET Repeater](http://msdn.microsoft.com/en-us/magazine/cc163780.aspx)动态填充此表：

```
<div id="datatable">
<table cellspacing="0" width="100%">
<tr>
<th>ID</th><th>Key</th><th>Fruit</th>
</tr>
  <asp:repeater id="rep" runat="server">
    <itemtemplate>
      <tr>
         <td><%#eval("ID") %></td><td><%#eval("Key") %></td><td><%#eval("FruitName") %></td>
      </tr>
    </itemtemplate>
  </asp:repeater>
</table>
</div> 
```

然后在您的代码隐藏中，您可以将中继器绑定到数据源。

```
private void Page_Load(object sender, System.EventArgs e)
{
    if (!IsPostBack) LoadData();    
}

public void LoadData()
{
    SqlDataAdapter adapter = new SqlDataAdapter("SELECT * FROM orders",    
        "server=(local);database=northwind;Integrated Security=SSPI");
    DataTable table = new DataTable();
    adapter.Fill(table);
    rep.DataSource = table;
    rep.DataBind();
} 
```

*从[这里获取的代码片段](http://msdn.microsoft.com/en-us/magazine/cc163780.aspx)*

# c - 无法在c中显示从键盘输入的数组

> ID：10086569
> 
> 赞同：0
> 
> 时间：2012-04-10T09:55:30.030
> 
> 标签：c

我是 c 新手，我正在尝试编写 ac 程序，该程序使用从键盘输入的 10 个整数值`scanf`，然后使用打印它们，`printf`但结果不正确。这是代码：

```
 #include<stdio.h>
    #include<conio.h>
    main(){
     int x[10];
     printf("\n\n\t\t PRGRAM THAT CAPTURES AND PRINTS 10 SCORES");
     for(int i=1;i<=10;i++){
     printf("\n\tEnter Score %d", i);
     scanf("%d",x);
    }
     printf("\n\t The entered scores are: %d",x[i]);
     return(0);
    } 
```

给出的输出是一个四位数字，例如 8731，但我希望是 1234567890。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:57:45.843

您需要创建一个新`for`循环来显示这些值，就像您在阅读它们时所做的那样。

PS：更好地格式化您的代码，稍后您会感谢它。

PS2：尽量避免`conio.h`，它不是标准的，你的代码甚至不需要它。

PS3：你的代码也是错误的。应该是`for(int i=0;i<10;i++)`。数组是从`0`to `size-1`，而不是 from `1`to `size`。C 编译器**不会**警告您这`i[10]`是数组的**无效**索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T10:07:26.123

```
 #include<stdio.h>
    #include<conio.h> 
```

标题`<conio.h>`不是标准的。如果您不使用它，您将获得更好的便携性。无论如何，您的程序不使用其中的任何内容。

```
 main(){ 
```

该函数`main()`返回一个`int`. 养成这样明确地说的习惯（你也可能养成客观地指定它不带参数的习惯）。

```
 int x[10];
     printf("\n\n\t\t PRGRAM THAT CAPTURES AND PRINTS 10 SCORES"); 
```

为了在所有实现中更好地工作`printf()`，每个都以`'\n'`. 否则输出可能会出现乱序。

```
 for(int i=1;i<=10;i++){
     printf("\n\tEnter Score %d", i);
     scanf("%d",x); 
```

试图在循环中始终读取到数组中的相同位置？

```
 }
     printf("\n\t The entered scores are: %d",x[i]); 
```

该元素`x[i]`不存在。此时代码中，`i`大于最大的合法数组索引。

```
 return(0);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T10:00:13.770

尝试这个：

```
 #include<stdio.h>
    #include<conio.h>
    int main(){
     int x[10];
     printf("\n\n\t\t PRGRAM THAT CAPTURES AND PRINTS 10 SCORES");
     for(int i=0;i<10;i++){ //Change 1
         printf("\n\tEnter Score %d", i);
         scanf("%d",&x[i]); //Change 2
      }
     //Change 3
     for (int i=0; i<10; i++) 
         printf("\n\t The entered scores are: %d",x[i]);
     return(0);
    } 
```

# python - 使用正则表达式在python中验证IP地址

> ID：10086572
> 
> 赞同：19
> 
> 时间：2012-04-10T09:55:49.203
> 
> 标签：python, regex

在下面的 ip 地址验证中，我想看看它是否是有效的 ip 地址，我该如何使用下面的 re

```
>>> ip="241.1.1.112343434" 
>>> aa=re.match(r"\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}[^0-9]",ip)
>>> aa.group()
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
AttributeError: 'NoneType' object has no attribute 'group' 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-10T10:05:24.250

为什么不使用库函数来验证 IP 地址？

```
>>> ip="241.1.1.112343434" 
>>> socket.inet_aton(ip)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
socket.error: illegal IP address string passed to inet_aton 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-04-10T10:04:23.750

改用锚点：

```
aa=re.match(r"^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$",ip) 
```

这些确保字符串的开头和结尾在正则表达式的开头和结尾匹配。（好吧，从技术上讲，您不需要起始`^`锚点，因为它隐含在`.match()`方法中）。

然后，在尝试访问其结果之前检查正则表达式是否确实匹配：

```
if aa:
    ip = aa.group() 
```

当然，这不是验证 IP 地址的好方法（查看 gnibbler 的答案以获得正确的方法）。但是，正则表达式可用于检测较大字符串中的 IP 地址：

```
ip_candidates = re.findall(r"\b\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\b", ip) 
```

在这里，`\b`单词边界锚确保每个段的数字不超过 3。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-04-10T10:05:41.133

`\d{1,3}`将匹配数字，例如`00`or `333`，这不是有效的 ID。

[这](https://stackoverflow.com/a/106223/867814)是 smink 的一个很好的答案，引用：

```
ValidIpAddressRegex = "^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$"; 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-04-10T11:59:01.557

```
try:
    parts = ip.split('.')
    return len(parts) == 4 and all(0 <= int(part) < 256 for part in parts)
except ValueError:
    return False # one of the 'parts' not convertible to integer
except (AttributeError, TypeError):
    return False # `ip` isn't even a string 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-03-11T12:55:46.430

下面将检查一个 IP 是否有效： 如果 IP 在 0.0.0.0 到 255.255.255.255 之间，则输出为真，否则为假：

```
[0<=int(x)<256 for x in re.split('\.',re.match(r'^\d+\.\d+\.\d+\.\d+$',your_ip).group(0))].count(True)==4 
```

**例子：**

```
your_ip = "10.10.10.10"
[0<=int(x)<256 for x in re.split('\.',re.match(r'^\d+\.\d+\.\d+\.\d+$',your_ip).group(0))].count(True)==4 
```

**输出：**

```
>>> your_ip = "10.10.10.10"
>>> [0<=int(x)<256 for x in re.split('\.',re.match(r'^\d+\.\d+\.\d+\.\d+$',your_ip).group(0))].count(True)==4
True
>>> your_ip = "10.10.10.256"
>>> [0<=int(x)<256 for x in re.split('\.',re.match(r'^\d+\.\d+\.\d+\.\d+$',your_ip).group(0))].count(True)==4
False
>>> 
```

# spring - 在执行时设置 log4j 文件路径参数

> ID：10086575
> 
> 赞同：2
> 
> 时间：2012-04-10T09:55:58.043
> 
> 标签：spring, log4j

在 Spring 中，我使用 slf4j 和 log4j 来解决日志记录。

我将相对路径放在log4j.xml配置中，但是当我在Netbeans Tomcat和独立的Apache Tomcat中执行应用程序时，相对路径不同，我必须手动更改。

我的想法是从 Spring Controller 获取上下文 realpath 并在执行时将其设置在 log4j 配置中。但我不知道...

如何从 Spring Controller 更改 log4j 的文件路径参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:34:49.543

两个建议供您尝试：

将[WebAppRootListener](http://static.springsource.org/spring/docs/3.1.1.RELEASE/javadoc-api/org/springframework/web/util/WebAppRootListener.html)添加到您的 web.xml - 这将配置系统属性指向（默认`webapp.root`为log4j.properties/xml 文件：

```
<listener>
    <listener-class>org.springframework.web.util.WebAppRootListener<listener-class>
<listener>

<!-- log4.appender.File=${webapp.root}/logs/web-app.log --> 
```

或者在 web.xml 中使用[Log4jConfigListener](http://static.springsource.org/spring/docs/3.1.1.RELEASE/javadoc-api/org/springframework/web/util/Log4jConfigListener.html)（最终委托给[Log4jConfigurer](http://static.springsource.org/spring/docs/3.1.1.RELEASE/javadoc-api/org/springframework/util/Log4jConfigurer.html)） - 这与上面类似，但允许您定义自定义 log4j 配置文件，还允许您的 Web 应用程序监视 log4j 配置文件的更改在运行时制作并自动更新您的记录器：

```
<context-param>
    <!-- Configure Log4J from the following config file location -->
    <param-name>log4jConfigLocation</param-name>
    <param-value>/WEB-INF/log4j.xml</param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.util.Log4jConfigListener<listener-class>
<listener> 
```

我还建议您详细阅读上面的 Javadocs - 关于在 Tomcat 中部署多个 web 应用程序和共享系统属性有一些问题，但这都可以解决（为每个 web 应用程序提供自定义密钥，而不是默认`${webapp.root}`

# mercurial - 无法从 mercurial 存储库推/拉 - 中止：错误：现有连接被远程主机强行关闭

> ID：10086576
> 
> 赞同：3
> 
> 时间：2012-04-10T09:55:59.150
> 
> 标签：mercurial, bitbucket

我计划将 mercurial 用于一个新项目，但我在访问 bitbucket 存储库时遇到了一些问题。我是 mercurial 的新手，但我以前使用过 git。

执行 hg 克隆或推送时出现以下错误：

*中止：错误：现有连接被远程主机强行关闭*

我只有在使用我的工作电脑时才会遇到这个问题，当从我的家用电脑访问存储库时，我可以克隆和推送就好了，有什么想法，是否需要配置一些防火墙设置？

我在两台电脑的 Windows 7 x64 上使用 Mercurial-2.1.2-x64。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T12:49:34.023

所以我找到了错误的根源，我最初安装了 tortoise hg，它在我的用户目录中创建了以下 mercurial.ini 文件，一旦我删除了这个文件，它就解决了这个问题。我想问题是我指定了存储库 url 而不是实际的 http 代理...

```
# Generated by TortoiseHg settings dialog

[tortoisehg]
cipushafter = 

[http_proxy]
host = https://****@bitbucket.org/****/*** (my repository path) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-18T13:24:05.870

在命令提示符下浏览到项目文件夹并运行*hg rollback*。

# sql - 如何在 sql 中建模“切换”表

> ID：10086579
> 
> 赞同：0
> 
> 时间：2012-04-10T09:56:09.127
> 
> 标签：sql, database-design

我有一个包含一些列的表

```
CREATE TABLE test (
testid INT,
field1 CHAR(10),
field2 VARCHAR(50),    
field3 DATETIME,    
field4 MEDIUMINT
[...]
); 
```

现在我希望能够在我的应用程序中进行设置，允许我为特定用户启用或禁用其中的一些设置。

```
CREATE TABLE user (
userid INT
); 
```

我在想：

```
CREATE TABLE user_test_visible (
userid INT,
field1 BOOL,
field2 BOOL,
field3 BOOL,
field4 BOOL
[...]
); 
```

我也在考虑这样的事情：

```
CREATE TABLE user_test_visible (
userid INT,
field_name VARCHAR(30),
visible BOOL); 
```

这些方法中的任何一种都是明智的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:23:11.110

我建议也许做这样的事情。

```
CREATE TABLE test 
(
    fieldId INT,
    field CHAR(10)
) 
```

拥有一个包含字段的表。然后，如果您需要再添加一个（更改要求），则不必添加新列。

我会跳过布尔值并使用一个具有共享主键的表。像这样：

```
CREATE TABLE user_test_visible (
    userid INT,
    fieldId INT
); 
```

我建议跳过布尔值的原因是，如果没有行，请显示该字段。这取决于您的起始值是多少。如果您希望用户从一开始就看到所有字段，那么您可以考虑使用这样的表格：

```
CREATE TABLE user_test_not_visible (
    userid INT,
    fieldId INT
); 
```

然后在该表中有一行的地方不显示该字段。

**编辑**

使用插入字段时，您必须有一些预部署脚本吗？您还可以在此处指定哪些列可见，哪些不可见。如果您有不同的数据类型，那么 ether 具有您所拥有的布局，或者您可以只是一个 sql_variant。但是，例如 linq-to-sql 不支持这种类型的列作为主键。

那只是我的想法。希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T10:08:33.053

也许更灵活的方法是在您的应用程序中定义“角色”。一个用户将与一个或多个角色相关联，并且每个角色将与一组列相关联。这些列集的联合将是用户可以看到的。这种方法需要更多的精力来确定用户可以看到哪些列，但从长远来看，它会使用户管理更容易。它还将用户权限与数据库访问的含义分开。

# xml - 指向具有相对路径的 XML 实体声明

> ID：10086582
> 
> 赞同：1
> 
> 时间：2012-04-10T09:56:19.297
> 
> 标签：xml, hibernate, entity, doctype, hibernate-mapping

我想[在我的 Hibernate 映射中使用 XML 实体](https://docs.jboss.org/hibernate/orm/3.3/reference/en/html/inheritance.html#inheritance-tableperconcreate-polymorphism)。

这是我的文件结构：

```
/types/convertible-car.hbm.xml
/xml-entites/registration.xml 
```

映射文件`convertible-car.hbm.xml`如下所示：

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE hibernate-mapping SYSTEM 
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd" 
    [!ENTITY registration SYSTEM "../xml-entities/registration.xml"]>

<hibernate-mapping package="…">
    // …
    &registration;    
    // …
</hibernate-mapping> 
```

[XML 实体](http://www.tizag.com/xmlTutorial/xmlentity.php) 在`registration`文件中定义`registration.xml`。不幸的是，在 Eclipse 中验证 Hibernate 映射文件时出现此错误：

> 文档类型声明包含或指向的标记声明必须格式正确。

我猜这个错误是由解析器找不到`registration.xml`文件引起的。你知道我如何嵌入一个具有相对路径的实体吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:19:18.443

您的实体声明错误。尝试这个：

```
<!DOCTYPE hibernate-mapping SYSTEM "http://hibernate.sourceforge.net/hibernate-mapping-.0.dtd" [
<!ENTITY registration SYSTEM "../xml-entities/registration.xml">
]>
<hibernate-mapping package="…">
    // …
    &registration;    
    // …
</hibernate-mapping> 
```

# c - 在c中访问整数的字节

> ID：10086583
> 
> 赞同：-1
> 
> 时间：2012-04-10T09:56:20.547
> 
> 标签：c

我有像 12、13 这样的值，我想将它们分配给单个整数示例 k。我尝试了以下程序，但没有得到预期的结果。

```
enter code here
#include <stdio.h>
int main()
{

int k = 0;
printf("k address is %u\n", &k);
char* a = &k;
printf("%u\n", a);
*(a) = 12;
a++;
printf("%u\n", a);
*(a) = 13;
printf("k is %d\n",k);
return 0;
} 
```

输出是：

```
 k address is 3213474664
 3213474664
 3213474665
 k is 3340 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T09:59:05.223

在您的系统上，`int`s 显然是以[little-endian](http://en.wikipedia.org/wiki/Little-endian)格式存储的，因为 13*256 + 12 = 3340。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T10:22:48.660

如果要以与字节序无关的方式修改整数中的字节，则应使用移位和按位运算符。

例如，如果您尝试将 IP 地址 1.2.3.4 存储到 32 位整数中，您可以执行以下操作：

```
unsigned int addr = (1 << 24) | (2 << 16) | (3 << 8) | 4; 
```

这保证这`1`是最重要的字节等等。

# ruby-on-rails-3 - 迁移号不带时间戳

> ID：10086584
> 
> 赞同：2
> 
> 时间：2012-04-10T09:56:24.257
> 
> 标签：ruby-on-rails-3, rails-migrations

最近我们将应用程序从 rails 2.3.11 迁移到 rails 3.0.7，一切都完成后，我们看到了一个奇怪的问题。每当我们生成迁移时，该数字都会自动递增，因为我们需要 UTC 时间戳中的迁移编号。由于我们团队有 5 名成员，这造成了很大的问题。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:13:03.630

设置`config.active_record.timestamped_migrations = true`在您的`config/application.rb`

# function - 如何正确调用powershell函数？

> ID：10086586
> 
> 赞同：1
> 
> 时间：2012-04-10T09:56:47.913
> 
> 标签：function, powershell

我写了一个函数来将输入月份参数转换为某种格式。例如，如果我将 04 传递给函数，函数将返回“ ***_*** *APR* _”。我写的函数如下：

```
function GetEnMonth()
{
param([string] $month)
switch ($month)
{
    ($_ -eq "01"){$result = "_JAN_"}
    ($_ -eq "02"){$result = "_FEB_"}
    ($_ -eq "03"){$result = "_MAR_"}
    ($_ -eq "04"){$result = "_APR_"}
    ($_ -eq "05"){$result = "_MAY_"}
    ($_ -eq "06"){$result = "_JUN_"}
    ($_ -eq "07"){$result = "_JUL_"}
    ($_ -eq "08"){$result = "_AUG_"}
    ($_ -eq "09"){$result = "_SEP_"}
    ($_ -eq "10"){$result = "_OCT_"}
    ($_ -eq "11"){$result = "_NOV_"}
    ($_ -eq "12"){$result = "_DEC_"}
    default {$result ="_No_Result_"}
}
return [string]$result;
} 
```

然后我使用下面的命令来执行函数来得到结果：

```
$mYear = $today.substring(0,4) 
$mMonth =$today.substring(4,2)
$mDate = $today.substring(6,2)
$monthInEn = GetEnMonth $mMonth 
```

好吧，结果总是“_No_Result_”，为什么？以下是例外：

```
 **** Exception type : System.Management.Automation.RuntimeException
 **** Exception message : You cannot call a method on a null-valued expression. 
```

谁能给我一个答案？我在 Google 上搜索了很多，但没有找到有用的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T10:05:36.120

这应该有效：

```
function GetEnMonth
{
param([string] $month)
switch ($month)
{
    "01"{$result = "_JAN_"}
    "02"{$result = "_FEB_"}
    "03"{$result = "_MAR_"}
    "04"{$result = "_APR_"}
    "05"{$result = "_MAY_"}
    "06"{$result = "_JUN_"}
    "07"{$result = "_JUL_"}
    "08"{$result = "_AUG_"}
    "09"{$result = "_SEP_"}
    "10"{$result = "_OCT_"}
    "11"{$result = "_NOV_"}
    "12"{$result = "_DEC_"}
    default {$result ="_No_Result_"}
}
return [string]$result;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T12:48:19.223

这是我对此的看法。我将参数类型更改为 Int，这样您就可以获取诸如“03”或 3 之类的过程。我还添加了 break 语句以使切换工作更快。

```
function GetEnMonth
{
    param([int] $month)

    switch ($month)
    {
        1 {"_JAN_"; break}
        2 {"_FEB_"; break}
        3 {"_MAR_"; break}
        4 {"_APR_"; break}
        5 {"_MAY_"; break}
        6 {"_JUN_"; break}
        7 {"_JUL_"; break}
        8 {"_AUG_"; break}
        9 {"_SEP_"; break}
        10 {"_OCT_"; break}
        11 {"_NOV_"; break}
        12 {"_DEC_"; break}
        default {"_No_Result_"}
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T10:07:54.873

你的 switch 语句是错误的，试试这个：

```
function GetEnMonth()
{
param([string] $month)
switch ($month)
{
    "01" {$result = "_JAN_"}
    "02" {$result = "_FEB_"}
    "03" {$result = "_MAR_"}
    "04" {$result = "_APR_"}
    "05" {$result = "_MAY_"}
    "06" {$result = "_JUN_"}
    "07" {$result = "_JUL_"}
    "08" {$result = "_AUG_"}
    "09" {$result = "_SEP_"}
    "10" {$result = "_OCT_"}
    "11" {$result = "_NOV_"}
    "12" {$result = "_DEC_"}
    default {$result ="_No_Result_"}
}
return [string]$result;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-10T11:38:26.163

这不是答案，而是另一种在一行中使用文化参数执行相同操作的方法：

```
$month = 3
$smonth=[string]::format([System.Globalization.CultureInfo]"en-US", "_{0:MMM}_",[datetime]("$month/01"))
$smonth
_MAR_ 
```

# java - 适用于 Android 的 Fortumo 应用内支付

> ID：10086587
> 
> 赞同：2
> 
> 时间：2012-04-10T09:56:53.967
> 
> 标签：java, android, in-app-purchase, fortumo

我正在尝试创建一个应用程序，您可以在其中使用 Fortumo 服务购买应用程序内积分。我设法得到了 makePayment(); 方法有效，所以我可以付款，一切似乎都有效。唯一的问题是，它看起来像 onReceive(); 永远不会被调用，因为在成功付款后信用计数不会改变。一次支付 0.32 欧元时，积分数应增加 32000。

这是主要活动java：

```
package com.your.raha;
import com.your.raha.R;
import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.media.AudioManager;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageButton;
import android.widget.TextView;

public class Soundboard extends Activity {
private SoundManager mSoundManager;
static int counter;
static TextView display;
SharedPreferences someData;
public static String filename = "rahafail";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setVolumeControlStream(AudioManager.STREAM_MUSIC);
    setContentView(R.layout.proov);
    display = (TextView) findViewById(R.id.tvKonto);
    someData = getSharedPreferences(filename, 0);
    int returnedInt = someData.getInt("sharedInt", 0);
    counter = returnedInt;

    mSoundManager = new SoundManager();
    mSoundManager.initSounds(getBaseContext());
    mSoundManager.addSound(1, R.raw.sound1);

    Button SoundButton1 = (Button)findViewById(R.id.sound1);
    SoundButton1.setOnClickListener(new OnClickListener() {

public void onClick(View v) {
    mSoundManager.playSound(1);
    AddOne();           
}
});       

    Button bOsta = (Button)findViewById(R.id.bOsta);
    bOsta.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            onStop();
            startActivity(new Intent("com.uugudev.rahaboss.FORTUMOMAKSA"));

        }
    });
    ImageButton Abi = (ImageButton)findViewById(R.id.ibAbi);
    Abi.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            counter = 0;
          SharedPreferences.Editor editor = someData.edit();
        editor.putInt("sharedInt", counter);
        editor.commit();    
      display.setText(counter + " EEK");    

        }
    });

}
public static void AddOne() {
    // TODO Auto-generated method stub
    counter++;
    display.setText(counter + " EEK");
}

public static void Osteti() {
// TODO Auto-generated method stub
counter = counter + 32000;
display.setText(counter + " EEK");
}   

@Override
protected void onDestroy() {
    // TODO Auto-generated method stub  
super.onDestroy();
SharedPreferences.Editor editor = someData.edit();
editor.putInt("sharedInt", counter);
editor.commit();

}
@Override
protected void onPause() {
// TODO Auto-generated method stub
super.onPause();
SharedPreferences.Editor editor = someData.edit();
editor.putInt("sharedInt", counter);
editor.commit();
}
@Override
protected void onStart() {
// TODO Auto-generated method stub
super.onStart();
int returnedInt = someData.getInt("sharedInt", 0);
counter = returnedInt;
}
@Override
protected void onStop() {
// TODO Auto-generated method stub
super.onStop();
SharedPreferences.Editor editor = someData.edit();
editor.putInt("sharedInt", counter);
editor.commit();
}
@Override
protected void onResume() {
// TODO Auto-generated method stub
super.onResume();
display.setText(counter + " EEK");
}
} 
```

支付活动类：

```
package com.your.raha;

import android.os.Bundle;
import android.view.Window;
import android.widget.Toast;

import com.fortumo.android.Fortumo;
import com.fortumo.android.PaymentActivity;
import com.fortumo.android.PaymentRequestBuilder;
import com.fortumo.android.PaymentResponse;

public class FortumoMaksa extends PaymentActivity {
/** Called when the activity is first created. */

public int raha;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);

    Fortumo.enablePaymentBroadcast(this, Manifest.permission.PAYMENT_BROADCAST_PERMISSION);

        PaymentRequestBuilder builder = new PaymentRequestBuilder();
        builder.setDisplayString("Donate");
                                builder.setProductName("stars_myawesomeusername");
        makePayment(builder.build());
      }
    ;
    @Override
    protected void onResume() {
      super.onResume();

    }

    @Override
    protected void onPaymentCanceled(PaymentResponse response) {
        Toast.makeText(this, "Kasutaja katkestas makse", Toast.LENGTH_SHORT).show();
        finish();
    }

    @Override
    protected void onPaymentFailed(PaymentResponse response) {
        Toast.makeText(this, "Makse ebaõnnestus", Toast.LENGTH_SHORT).show();
        finish();
    }

    @Override
    protected void onPaymentPending(PaymentResponse response) {
        Toast.makeText(this, "Makse ootel", Toast.LENGTH_SHORT).show();
        finish();
    }

    @Override
    protected void onPaymentSuccess(PaymentResponse response) {
        Toast.makeText(this, "Makse õnnestus", Toast.LENGTH_SHORT).show();
        finish();
    }
} 
```

PaymentStatusReceived 类：

```
package com.your.raha;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import com.fortumo.android.Fortumo;

public class PaymentStatusReceiver extends BroadcastReceiver {
private static String TAG = "PaymentStatusReceiver";

@Override
public void onReceive(Context context, Intent intent) {
Bundle extras = intent.getExtras();   
int billingStatus = extras.getInt("billing_status");
if(billingStatus == Fortumo.MESSAGE_STATUS_BILLED) {
  Soundboard.Osteti();
    } 
  }
} 
```

AndroidManifest xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.your.raha"
android:installLocation="auto"
android:versionCode="2"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.SEND_SMS" />

<permission
    android:name="com.your.domain.PAYMENT_BROADCAST_PERMISSION"
    android:label="Read Fortumo payment status"
    android:protectionLevel="signature" />

<uses-permission android:name="com.your.raha.PAYMENT_BROADCAST_PERMISSION" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <receiver android:name="com.fortumo.android.BillingSMSReceiver" >
        <intent-filter>
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
        </intent-filter>
    </receiver>

    <service android:name="com.fortumo.android.FortumoService" />
    <service android:name="com.fortumo.android.StatusUpdateService" />

    <activity
        android:name="com.fortumo.android.FortumoActivity"
        android:theme="@android:style/Theme.Translucent.NoTitleBar" />

    <receiver
        android:name=".PaymentStatusReceiver"
        android:permission="com.your.raha.PAYMENT_BROADCAST_PERMISSION" >
        <intent-filter>
            <action android:name="com.fortumo.android.PAYMENT_STATUS_CHANGED" />
        </intent-filter>
    </receiver>

    <activity
        android:name="com.fortumo.android.FortumoActivity"
        android:configChanges="orientation|keyboardHidden"
        android:theme="@android:style/Theme.Translucent.NoTitleBar" />
    <activity
        android:name=".PaymentStatusReceiver"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="com.uugudev.rahaboss.PAYMENTSTATUSRECEIVER" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.google.ads.AdActivity"
          android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" />
    <activity
        android:name="com.fortumo.android.FortumoActivity"
        android:theme="@android:style/Theme.Translucent.NoTitleBar" />

    <service android:name="com.fortumo.android.FortumoService" />

    <activity
        android:name=".Soundboard"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar" >
        <intent-filter>
            <category android:name="android.intent.category.LAUNCHER" />

            <action android:name="android.intent.action.MAIN" />
        </intent-filter>
    </activity>
    <activity
        android:name=".FortumoMaksa"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="com.uugudev.rahaboss.FORTUMOMAKSA" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
</application> 
```

所以基本上我正在尝试启动 Soundboard.Osteti(); 在 Soundboard.java 中将 32000 添加到计数器 int 然后更新 TextView。但什么也没有发生。希望有人能帮助我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:30:58.173

我仍在努力完成这项工作。我认为您的清单中有这件事是错误的：

PaymentStatusReceiver 它不是一个活动，您只需将其配置为接收者（就像您已经拥有的那样）。

# c# - 使用构建配置在 Visual Studio 中创建项目的多个版本

> ID：10086591
> 
> 赞同：6
> 
> 时间：2012-04-10T09:57:09.587
> 
> 标签：c#, visual-studio-2010, configuration, build-process, preprocessor-directive

我需要使用配置创建项目的多个版本，就像我们使用`#define`, `#if`, `#endif`.

使用这些预处理器指令的缺点是我需要在项目的几乎每个文件中定义符号，但我想通过我的构建配置来处理这个事情。

我什至不确定构建配置是否会帮助我做到这一点。

我想要的是，如果我创建一个名为“Development”的配置和另一个名为“QA”的配置，我的代码将如下所示：

```
if #Development or if $QA 
```

请指导我实现这一目标。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T10:09:29.760

由于这个原因存在配置管理器。

*   转到配置管理器并从预定义的调试配置创建一个新配置复制
*   将配置命名为 DEVELOPMENT 并应用于所有项目
*   选择开发配置作为活动配置（应该已经是活动的）
*   转到每个需要`#if DEVELOPMENT` 条件编译的项目的属性页面，然后在 BUILD 选项卡的第一个文本框中插入 DEVELOPMENT 符号

现在您的每个项目都可以使用#if DEVELOPMENT 预处理器指令

如果您还需要 RELEASE 重复上述步骤，但从预定义的 RELEASE 配置中复制并提供不同的名称

现在，可以直接从 Visual Studio 标准工具栏中的解决方案配置组合工具中切换定义有或没有定义的开发符号的配置，而无需编辑每个项目。

您还可以查看 MSDN 文章[如何：创建和编辑配置](http://msdn.microsoft.com/en-us/library/kwybya3w.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T14:32:08.790

除了 Michael Freidgeim 的解决方案之外，您还可以将属性`conditional`用于中央初始化操作或其他 void 功能：

```
[Conditional("DEVELOPMENT")]
public static void InitDemo()
{
      Models.LogFile.ErrorLog("This is a Development Version!");
      // init settings
} 
```

在这里找到：http: [//msdn.microsoft.com/de-de/library/4xssyw96%28v=vs.80%29.aspx](http://msdn.microsoft.com/de-de/library/4xssyw96%28v=vs.80%29.aspx)

# perl - 带有用户定义回调的 Mojo::UserAgent get()

> ID：10086592
> 
> 赞同：2
> 
> 时间：2012-04-10T09:57:12.207
> 
> 标签：perl, lwp-useragent, mojolicious

有没有办法用[Mojo::UserAgent](http://search.cpan.org/perldoc?Mojo%3a%3aUserAgent)写这样的东西，有可能设置等效选项（`Range`, `:content_file`, `:content_cb`, `size_hint`）。

```
#!/usr/bin/env perl
use warnings;
use 5.12.0;
use LWP::UserAgent;
use File::Basename;

my $url = 'ftp://ftp.vim.org/pub/vim/runtime/spell/en.utf-8.spl';
my $file = basename $url;
my $ua = LWP::UserAgent->new();
my $bytes = 0;

open my $fh, '>>:raw', $file or die $!;
my $res = $ua->get( 
    $url,
    'Range' => "bytes=$bytes-",
    ':content_cb' => sub { 
        my ( $chunk, $res, $proto ) = @_;
        print $fh $chunk; 
        state $old_size = 0;
        my $size = tell $fh;
        my $total;
        say 'chunk size :', $size - $old_size;
        if ( $total = $res->header( 'Content-Length' ) ) {
            say 'total size : ', $total;
            say 'downloaded : ', $size;
            say 'remaining  : ', $total - $size;
        }
        say "";
        $old_size = $size;
    }
);
close $fh;

say $res->status_line; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T14:47:52.130

```
#!/usr/bin/env perl

use 5.12.0;
use warnings;

use File::Basename qw(basename);
use Mojo::UserAgent ();

my $url = 'ftp://ftp.vim.org/pub/vim/runtime/spell/en.utf-8.spl';
my $ua  = Mojo::UserAgent->new();
my $tx  = $ua->build_tx(GET => $url);

open(my $fh, '>:raw', basename($url)) or die($!);
$tx->req->headers->header(range => 'bytes=0-');
$tx->res->content->on(read => sub {
    print($fh $_[1]);
    say('chunk size: ', length($_[1]));
    say('total size: ', $_[0]->headers->content_length);
    say('downloaded: ', $_[0]->body_size);
    say('');
});
$ua->start($tx);
close($fh);

say($tx->res->code, ' ', $tx->res->message); 
```

# android - Android：TextToSpeech 不工作

> ID：10086594
> 
> 赞同：0
> 
> 时间：2012-04-10T09:57:13.163
> 
> 标签：android, nullpointerexception, text-to-speech

嗨，我创建了一个依赖于 TextToSpeech 的应用程序。当我尝试运行我的
应用程序时，它在 Logcat 中显示 NullPointerException。我搜索了很多，但没有找到有用的答案[。在此链接上检查我的代码，](http://pastebin.com/KmKk0XiV)这是我的 logcat。

```
04-10 15:11:37.872: WARN/System.err(2798): java.lang.NullPointerException
04-10 15:11:37.872: WARN/System.err(2798):     at com.example.examguide.ExamAppearingActivity.onCreate(ExamAppearingActivity.java:80)
04-10 15:11:37.872: WARN/System.err(2798):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-10 15:11:37.882: WARN/System.err(2798):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
04-10 15:11:37.882: WARN/System.err(2798):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-10 15:11:37.882: WARN/System.err(2798):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-10 15:11:37.882: WARN/System.err(2798):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-10 15:11:37.882: WARN/System.err(2798):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-10 15:11:37.882: WARN/System.err(2798):     at android.os.Looper.loop(Looper.java:123)
04-10 15:11:37.882: WARN/System.err(2798):     at android.app.ActivityThread.main(ActivityThread.java:3683)
04-10 15:11:37.882: WARN/System.err(2798):     at java.lang.reflect.Method.invokeNative(Native Method)
04-10 15:11:37.892: WARN/System.err(2798):     at java.lang.reflect.Method.invoke(Method.java:507)
04-10 15:11:37.892: WARN/System.err(2798):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-10 15:11:37.892: WARN/System.err(2798):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-10 15:11:37.892: WARN/System.err(2798):     at dalvik.system.NativeStart.main(Native Method) 
```

任何帮助表示赞赏...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:01:52.557

您已使用此代码。

```
final List<ObjectiveWiseQuestion> QuestionWiseProfile1= db.getOneQuestion(examId); 
```

但是您之前没有打开过db。所以它变得空了。好写

```
tts = new TextToSpeech(this, this); 
```

在使用 tts 对象之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T10:07:14.317

tts 对象未初始化。因此你会得到一个空指针异常。

# spring - 释放连接到 c3p0 连接池

> ID：10086599
> 
> 赞同：2
> 
> 时间：2012-04-10T09:57:28.797
> 
> 标签：spring, hibernate, c3p0

我面临一个问题，实际上我在我的项目中使用 c3p0 进行连接池，它还使用 Spring、Hibernate 和 JSF。我的问题是，在我的网页中，我们有一个名为“注销”的链接，当用户单击注销时，应该释放连接，并且 www.google.com 回到池中，这怎么可能。

在此先感谢普拉尚特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:48:22.437

您期望的是控制登录系统的并发用户数

> 当第三个用户尝试登录时，他应该等待连接释放

现在，您可以使用并发计数器来实现它

*   创建一个过滤器来过滤所有请求。
*   每当创建新请求时，都会增加计数器
*   当用户注销时减少计数器
*   当计数器达到最大值时，使该线程等待直到插槽可用。

您可以通过 JMX 或单独的管理控制台控制最大用户数。此外，当处理它的线程终止时，应该释放一个连接（因为会话对象没有任何引用，它可以被 GC 处理，超时后它将在池中重用）。

最好不要使用数据库资源造成瓶颈。

# ruby - 在 Ruby 中使用 R 的最佳方式

> ID：10086605
> 
> 赞同：19
> 
> 时间：2012-04-10T09:57:46.127
> 
> 标签：ruby, r, statistics, gem

我想在 Ruby 中可视化我的一些统计计算。

我的问题是，我找不到合适的宝石。

rsruby 似乎不是最新的，我无法在 Ruby 1.9.2 中安装它。

你知道如何在 Ruby 中运行 R 命令吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-21T15:33:49.207

我刚刚看到这篇文章并认为我应该发表评论，因为我非常广泛地使用 R。如果您来自 R 背景，我发现的最好的宝石是[Rinruby](https://sites.google.com/a/ddahl.org/rinruby-users/)。它很棒的原因是因为您不解释 ruby​​ 中的命令，而是使用实际的 R 代码。例如：

```
require "rinruby"      
#Set all your variables in Ruby
n = 10
beta_0 = 1
beta_1 = 0.25
alpha = 0.05
seed = 23423
R.x = (1..n).entries
#Use actual R code to perform the analysis
R.eval <<EOF
  set.seed(#{seed})
  y <- #{beta_0} + #{beta_1}*x + rnorm(#{n})
  fit <- lm( y ~ x )
  est <- round(coef(fit),3)
  pvalue <- summary(fit)$coefficients[2,4]
EOF 
```

在我上面列出的 Rinruby 网站上，有一些很棒的示例可以帮助您入门。希望这有帮助。

-肖恩

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T14:45:02.250

正如@Hansi 提到的，[RServe](http://www.rforge.net/Rserve/doc.html)是我发现远程运行 R 的最佳方式。如果您特别是在 Web 上下文中使用 Ruby，RServe 可以提供一些不错的好处。

最重要的是（在我看来），您不会被任何一种编程框架所束缚，因为有适用于各种语言（包括 Java 和 C++）的 RServe 客户端。使用 Web 可访问平台时，您甚至可以让 Rserve 在单独的主机上运行，​​并通过 TCP/IP 路由流量以增加安全性。

# android - Android：Async Task，如何高效处理？

> ID：10086606
> 
> 赞同：0
> 
> 时间：2012-04-10T09:57:55.370
> 
> 标签：android, android-asynctask, progressdialog

我在我的应用程序中使用这个 Asnc 类，但有时当我退出应用程序时。它崩溃了。“窗口泄漏错误：在 progDialog.show() 行；” - 猜测 ProgressDialog 是导致问题的原因，因为它仍在引用活动（上下文），但我不能使用 getApplicationContext()，如果我使用 getApplicationContext()，那么 ProgressDialog 将无法工作。我该如何解决这个问题？

```
protected void executeSLPWebserviceTask(double latitude, double longitude,
        String progressStr) {
    WebserviceTask task = new WebserviceTask(this, progressStr);
    task.execute(latitude, longitude);
}

class WebserviceTask extends AsyncTask<Double, Void, Float> implements OnDismissListener{

    Context context;
    ProgressDialog progDialog;
    String progressString;

    public WebserviceTask(Context context, String progressStr) {

        this.context = context;
        this.progressString = progressStr;
        initProgDialog();
    }

    void initProgDialog(){
        if(!isCancelled()){
            try {
                progDialog = new ProgressDialog(context);
                progDialog.setCanceledOnTouchOutside(false);
                progDialog.setButton(DialogInterface.BUTTON_NEGATIVE, getString(R.string.btn_cancel),new DialogInterface.OnClickListener() {
                    public void onClick(final DialogInterface dialog, final int id) {
                        progDialog.dismiss();
                    }
                });
                progDialog.setMessage(progressString);
                progDialog.setOnDismissListener(this);
                progDialog.show();
            } catch (Exception e) {
                Log.e("Web&RemoteServiceActivity", "Failed to add window for web service task");
            }
        }
    }

    @Override
    protected void onPreExecute() {
        addTask(this);
        super.onPreExecute();
    }

    protected Float doInBackground(Double... latLong) {
        Float slpFloat = 0f;
        if(!isCancelled()){
            if(internetServiceBound)
            {
                try {
                    slpFloat = internetSLPService.getSLPFromInternet(latLong[0].floatValue(),latLong[1].floatValue());
                } catch (RemoteException e) {
                    Log.e("Webservice task", "Failed to get slp - Remote exception");
                    this.cancel(true);
                }
                catch (NullPointerException e) {
                    Log.e("Webservice task", "Failed to get slp - Null pointer exception");
                    this.cancel(true);
                }
            }
        }
        return slpFloat;
    }

    protected void onPostExecute(Float slpFloat) {
        if (!isCancelled()) {
            if(slpFloat >= 300 && slpFloat<=1100){
                //seaLevelPressure = slpFloat;  
                setReferenceSeaLevelPressure(slpFloat);
                updateSeaLevelPressureFromWeb(slpFloat);
                Toast toast = Toast.makeText(getApplicationContext(), getString(R.string.msg_slp_updated_from_internet) + " : " + slpFloat, Toast.LENGTH_LONG);
                toast.show();
                addToastJob(toast);
                progDialog.dismiss();
                //lastCalibratedTime = System.currentTimeMillis();

            }else if(slpFloat==0){
                //If SLP value returned is 0, notify slp fetch fail and cancel progress dialog
                Toast toast = Toast.makeText(getApplicationContext(),getString(R.string.msg_slp_fetch_fail), Toast.LENGTH_SHORT);
                toast.show();
                addToastJob(toast);
                progDialog.dismiss();
            }else{
                //Notify invalid SLP and cancel progress dialog
                Toast toast = Toast.makeText(getApplicationContext(),getString(R.string.msg_internet_slp_invalid), Toast.LENGTH_SHORT);
                toast.show();
                addToastJob(toast);
                progDialog.dismiss();
            }
        }
        this.cancel(true);
    }

    public void onDismiss(DialogInterface dialog) {
        this.cancel(true);
    }

    @Override
    protected void onCancelled() {
        if(progDialog != null){
            if(progDialog.isShowing())
                progDialog.dismiss();

        }
        super.onCancelled();
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:25:22.153

通过在您的活动中覆盖 onCreateDialog(int id) 创建progressDialog。在 onPreExecute() 方法的任务中使用 showDialog(PROGRESS_DIALOG_ID); 并在 onPostExecute() 方法中使用 dismissDialog(PROGRESS_DIALOG_ID);

# gcc - 创建我自己的 makefile [错误 255]

> ID：10086607
> 
> 赞同：3
> 
> 时间：2012-04-10T09:57:56.903
> 
> 标签：gcc, makefile, g++

我一直在享受使用为我编写 makefile 的 IDE 编码的奢侈，我决定我已经“捷径”很久了，所以我阅读了一些手册并观看了一些关于 makefile 的视频并有一个makefile 半完成，我遇到的唯一麻烦是我不确定如何链接库。

```
CPPS := $(shell ls src/*cpp)
TEMP := $(subst src/,obj/,$(CPPS))
OBJS := $(subst .cpp,.o,$(TEMP))
HEADERS := $(shell ls inc/*.h)
EXEC := bin/testfile

all: $(EXEC)

$(EXEC) : $(OBJS) $(HEADERS)
g++ -I inc/ $(OBJS) -o $(EXEC) -lSDL -lGLU
$(EXEC)

obj/%.o: src/%.cpp
g++ -Wall -I inc/ -c $< -o $@ 
```

ps：以防我说“图书馆标志”时说错了，我的意思是`-lSDL -lGLU`等等......

无论我把它们放在哪里，它们似乎都不起作用。

这是我插入 lib 标志时遇到的错误， `make: *** [bin/testfile] Error 255`

> 错误 255 是由 make 产生的，因为它的命令 shell 无法找到特定规则的命令。

如果我不包括它们，我会收到标准的“未定义”消息。

对此的任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:24:00.673

看起来您在构建可执行文件后尝试运行它？

在这种情况下，问题是您在 PATH 上没有当前目录；所以 make 找不到`$(EXEC)`。

您可能应该`./$(EXEC)`直接运行它。

并且您应该将执行程序移动到不同的 ( `PHONY`) 目标，这样您就可以自己执行构建步骤，并在`$(EXEC)`不需要构建时运行。

（我假设缺少标签只是stackoverflow格式，否则`make`会抱怨）。

# excel - R用回车读取Excel文件

> ID：10086611
> 
> 赞同：3
> 
> 时间：2012-04-10T09:58:03.663
> 
> 标签：excel, r, carriage-return

我在 R 中创建了一个例程来导入多个需要合并到一个大 txt 文件中的 Excel 文件。我使用 read.xls 函数。其中一些 xls 文件在单元格中有回车符（“\n”）。然后，当我编写 txt 文件（write.table）时，R 将这个“\n”解释为新行。如何清理 xls 文件或正确读取它们以删除不必要的“\n”？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T10:17:41.000

表中的列几乎肯定是因素（这是 R 中字符列的默认值）。所以，我们可以改变每一列中的因素。

首先是一些虚拟数据

```
R> dd = data.frame(d1 = c("1", "2\n", "33"), 
                d2 = c("1\n", "2\n", "33"))

##Default, factor
R> levels(dd[,1])
[1] "1"   "2\n" "33" 
```

接下来，我们使用`for`循环遍历列名：

```
for(i in 1:ncol(dd)) 
  levels(dd[,i]) = gsub("\n","", levels(dd[,i])) 
```

如果您想删除`for`循环并使用`sapply`，那么这应该可以

```
##Can this be improved?
sapply(1:ncol(dd), 
        function(i) levels(dd[,i]) <<- gsub("\n","", levels(dd[,i]))) 
```

# qt - CMake CPack debian 软件包

> ID：10086615
> 
> 赞同：8
> 
> 时间：2012-04-10T09:58:41.933
> 
> 标签：qt, cmake, debian, cpack

是否有人使用过具有 Qt 和 OpenGL 依赖项的 debian 包的 CPack 脚本的工作示例？

我设置了这个

```
set (CPACK_DEBIAN_PACKAGE_DEPENDS "libc6 (>= 2.3.1-6), libgcc1 (>= 1:3.4.2-12), libQtOpenGL (>=4.6.0), libQtCore (>=4.6.0), libQtGui (>=4.6.0), libglut (>=3.0), libICE (>=6.0), libX11 (>=6.0), libXext (>=6.0), libXmu (>=6.0), libXi (>=6.0), libstdc++ (>=6.0), libm (>=6.0), libgcc_s (>=1.0), libc (>=6.0), libGLU, libGL (>=1.0), libpthread" ) 
```

我四处搜索，但从未找到一个可行的例子。我的主要问题是如何首先为 libGLU 设置依赖项，然后为 libGL 和以下库设置依赖项。

一旦我创建了 deb，安装程序就会说

```
 **Error: Dependency is not satisfiable: libXXX** 
```

其中 XXX 是我之前列出的库之一（主要是 Qt 库）

目前我的 cmake 版本是 2.8.2 但 cpack_add_component 命令不起作用

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-07-12T12:24:29.707

您可以使用[`CPACK_DEBIAN_PACKAGE_SHLIBDEPS`](http://www.cmake.org/cmake/help/v3.3/module/CPackDeb.html#variable:CPACK_DEBIAN_PACKAGE_SHLIBDEPS)CPack 变量：

```
set(CPACK_DEBIAN_PACKAGE_SHLIBDEPS ON) 
```

这将自动解决依赖关系。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-10T13:59:39.917

我认为您不能在 CMake 中“订购”依赖项。如果您想要一个 CMakeLists 生成具有 qt 依赖项的 .deb 的工作示例，请查看：

```
project(QExhibitor)
cmake_minimum_required(VERSION 2.8)

FIND_PACKAGE(Qt4 REQUIRED QtNetwork QtGui QtCore QtXml)
FIND_PACKAGE(CSSRobopec REQUIRED)
#Some non interesting things ...
#.....
add_executable(QExhibitor ${QT_SOURCES} ${QT_RESOURCES_CPP} ${QT_FORMS_HPP} ${QT_MOC_HPP})
target_link_libraries(QExhibitor ${QT_LIBRARIES} ${CSSRobopec_LIBRARIES})

INSTALL(TARGETS QExhibitor DESTINATION /reetiPrograms/RApplications/Applications/)
INSTALL(FILES Icons/RQExhib.png DESTINATION /reetiPrograms/RApplications/Icons)

set(CPACK_GENERATOR "DEB")
set(CPACK_PACKAGE_VERSION_MAJOR "0")
set(CPACK_PACKAGE_VERSION_MINOR "2")
set(CPACK_PACKAGE_VERSION_PATCH "0")
set(CPACK_DEBIAN_PACKAGE_DEPENDS "cssrobopec,libqt4-xml,libqt4-network,libqtgui4,treeupdatablereeti")
set(CPACK_PACKAGE_DESCRIPTION "Configure UExhibitor and launch missions")
set(CPACK_PACKAGE_CONTACT "Adrien BARRAL aba@robopec.com")
set(CPACK_DEBIAN_PACKAGE_CONTROL_EXTRA "${CMAKE_CURRENT_SOURCE_DIR}/Debian/postinst")

include(CPack) 
```

# c# - Messenger 库中联系人列表/名册下载/同步的理想设计模式

> ID：10086617
> 
> 赞同：3
> 
> 时间：2012-04-10T09:58:54.313
> 
> 标签：c#, multithreading, events, messenger

*MessengerClient*类上有一个*Login*函数。*MessengerClient*类有一个*LoggedIn*事件和一个*IsLoggedIn*属性。

 ***当在*MessengerClient*类上调用*Login*时，联系人列表/名册通过套接字从远程服务器获取并进行处理，然后认为客户端已登录并且*IsLoggedIn*将返回 true。*LoggedIn*事件在此之后的 Login 函数内引发（因此，在请求登录的同一个线程内 - 我不认为这是一件坏事）。

 ***登录后，客户端会在发生时从远程服务器接收实时更新。

在登录期间处理联系人列表/名册时，我相信最终用户的理想设计是在客户端被认为已登录之前处理所有联系人列表/名册数据。这样，当用户收到*LoggedIn*事件时，他们能够立即访问联系人数据。

例如 -

这里我们有*LoggedIn*事件的最终用户处理程序。

```
 void MsgrLoggedIn(object sender, EventArgs a)
    {
        _msgr.Contacts.Contains("billy@bob.com"); //returns true
    } 
```

由于在客户端被标记为已登录之前已处理了所有联系人列表，并且在*引发 LoggedIn*事件之前，上述语句返回 true。从逻辑上讲，我相信这是最终用户所期望的，因为下载和处理联系人列表是登录操作的一部分。

现在，我还喜欢在将联系人添加到联系人列表或添加到组时引发事件。按照我到目前为止提到的逻辑，在处理数据时引发*ContactAdded*、*ContactAddedToGroup*等事件显然是没有意义的，因为这将导致最终用户在 MessengerClient 类甚至之前收到这些事件之一标记为已登录。

```
 void MsgrContactAdded(object sender, ContactEventArgs e)
    {
        _msgr.SendMessage(e.Contact, "hello there"); // throws NotLoggedInException
    } 
```

如上所示，会导致坏事发生。

所以我真正需要做的是处理联系人列表数据，引发登录事件，然后引发所有其他联系人事件。

为此，我可以遍历所有联系人对象、组对象等并引发适当的事件。

到目前为止还好，对吧？

然而，问题在于，除了在首次登录时下载联系人列表数据之外，如果客户端注销然后重新登录，我还必须准备同步联系人数据。

这将涉及诸如 ContactRemoved、ContactNameChanged、ContactRemovedFromGroup 等事件。

因此，它不再像遍历联系人、组等那样简单，因为现在我必须考虑已删除或属性已更改的联系人。

所以我需要一种替代方法来“排队”这些事件在登录发生后引发。

我考虑过用类来表示每个同步事件——例如 SyncContactRemoved、SyncContactNameChanged、SyncContactAddedToGroup。有了这个，我可以处理数据，为每个事件创建一个 Sync*XXX* 类，并将它们添加到一个列表中，然后我可以在登录后对其进行迭代。

我还考虑过对对象本身使用方法。即 Group.SyncContactsAdded、Contact.SyncNameChanged、MessengerClient.SyncContactsAdded。然后我可以在登录后遍历联系人/组等，检查这些属性，在必要时引发事件，然后清除它们。

最后，我考虑了一个包含 EventHandler 和 EventArgs 的 Event 类。事件可以以这种方式排队，然后在登录后一一调用。

如果有的话，这些模式中的哪一个会被认为是更常见的做法。还是有其他方法可以实现这一目标？

我为这么长的问题道歉，但这不是一个简单的问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T12:01:16.290

每个联系人都有自己的联系人列表。

```
public class Contact
{
  List<Contact> Contacts;
} 
```

每个联系人都有自己的事件（PropertyChanged、LoggedIn 等）

```
public class Contact
{
  List<Contact> Contacts;
  public event OnPropertyChanged;
} 
```

如果Contact 登录，该Contact 将注册到其Contact List 中每个Contact 的所有Events。

```
public void LogIn
{
  //Load Contact List for User - Do other stuff
  foreach(Contact c in Contacts)
    c.PropertyChanged += new PropertyChangedEventHandler(ContactPropertyChanged);
} 
```

现在，如果联系人列表中发生了某些事情，那些已登录并在列表中有此联系人的人将获得该事件。

```
public void ChangeProperty
{
  //Change Property and raise event!
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T09:37:03.837

> 这些模式中的哪一种会被认为是更常见的做法。还是有其他方法可以实现这一目标？

因此，如果我直截了当地说，您希望将给定联系人的联系人上发生的所有事件排队，而第一个事件处于脱机状态？所以联系人A的联系人列表中有联系人B，但此时联系人A处于离线状态。现在联系人 B 更改了他的个人资料，并且您想`ContactNameChanged`为联系人 A 排队该事件（等等）？

我不会那样做的。我宁愿存储某种同步令牌（一个日期时间就可以了），它表明联系人 A 何时收到联系人 B 的数据。然后，每个联系人都有一个`LastModified`属性，您可以将其与同步令牌进行比较。如果自上次同步后进行了一些修改，请发出请求以获取修改后的联系人的完整详细信息。

对于已删除的联系人，您只需将两个列表相交即可。一个是客户认为是其当前列表的联系人列表，另一个是来自服务器的最新列表。比较这些将导致添加和删除，并且在循环浏览此列表时，您还可以比较上面提到`LastModified`的 -datetimes。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T09:05:18.593

我相信你需要看看States设计模式。考虑到客户端每次都有不同的状态，例如：

在此状态下的登录状态将生成一些特殊事件，例如 LoginFailed 或 LoginSucceed，并且此状态将仅提供一种方法 Login。

用户将接受消息并将其发送到组的聊天状态。

以及您需要的任何东西。

因此，您的客户端类将实现特殊状态侦听器接口，该接口将生成有效事件（事件只是接口的方法调用）。

通过这种方式，您将分离不同类中不同状态的逻辑。您将在当前状态下在内部更改状态，因此您的库的用户将无法进行任何破解并使您的库无法正常工作。

我认为这是异步通信实现的最佳解决方案。考虑客户端和服务器端的两个状态机。

实际上它有很多代码，所以我只是给了你这个概念。

[http://en.wikipedia.org/wiki/State_pattern](http://en.wikipedia.org/wiki/State_pattern)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T01:17:24.783

我最终将事件存储在一个列表中并在之后提出它们。

```
List<SomethingEventArgs> events;

foreach (SomethingEventArgs e in events)
    OnSomethingEvent(e); 
```

它不像我想要的那样迷人，但它很有意义，而且效果很好。******

# c++ - 使用星号（*）绘制 X 字母形状

> ID：10086620
> 
> 赞同：3
> 
> 时间：2012-04-10T09:59:00.293
> 
> 标签：c++, visual-c++

我想编写一个程序来使用星号（*）绘制 X 字母的形状

```
#include "stdafx.h"
#include <iostream>
using namespace std;
int main(int argc, char* argv[]){
  int i, j;

  for(i = 1; i <= 9; i++){
    for(j = 1; j <= 12; j++){
      if(i == j){
        cout << "***";
      }else{
        cout << " ";
      }
    }
    cout<< endl;
  }

  return 0;
} 
```

我对编程很陌生

我只做了 (\) 我怎样才能做整个 X

```
***------***
-***----***-
--***--***--
---******---
--***--***--
-***----***-
***------*** 
```

这就是我到目前为止所做的

```
include "stdafx.h"
#include <iostream>
using namespace std;
int main(int argc, char* argv[])
{
int i, d, a=1,b=12,c;
for(i = 1; i <= 6; i++)
{
for (d=1; d<i;d++)  {cout <<" ";}
cout<<"***";
for (c=a+1; c<b;c++) {cout <<" ";}
{cout<<"***";}
for(b=12-i;b<i;b++) 
{cout<<"***";}
cout<<endl;
a++;
}
return 0;
} 
```

我将 (\//) 的顶部分为三个部分 [space][ *][space][* ]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T11:43:46.297

我在java中编写了以下函数/方法。您可以将其转换为 c++；

```
public static void printX(int x) {
    char[] chars = new char[x];
    for (int i = 0; i < x; i++) {
        chars[i] = '*';
        chars[x - 1 - i] = '*';
        for (int j = 0; j < x; j++) {
            if (j == i || j == (x - 1 - i)) {
                continue;
            }
            chars[j] = ' ';
        }
        System.out.println(new String(chars));
    }

} 
```

如果将上述函数/方法称为 printX(5); 输出大小为 5x5 并包含 X 字符。

```
*   *
 * * 
  *  
 * * 
*   * 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T10:20:43.633

```
**** ****
 *** ***
  ** **
   * *
  ** **
 *** ***
**** **** 
```

首先，请原谅我非常不均匀的 X。对于您作为初学者，我会给出一个**算法**供您思考，而不是用勺子喂代码。

*   解释器不知道如何回到已经打印的行。因此，您必须在循环的一次迭代中绘制 X 的两侧。

*   之后你减少你的星数（星--）并画线＃2。

*   当你的星星为0时，重复直到中间标记。

*   当您的代码看到星星为 0 时，则从相同的循环开始，但这次是每次迭代中的 star++。

*   这一直重复到星星的起始计数，在我的例子中是 4。

如果有任何问题，您可以在网站上发布您的代码 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-24T12:44:54.443

```
int n=11,i=0,k=0,j=0;
for(i=0;i<n;i++)
{
if(i<(n/2)) 
 {
    cout<<endl;
    for(j=0;j<i;j++)
    {
        cout<<" ";
    }
    cout<<"*";
    for(k=n/2;k>i;k--)
    {
        cout<<"  ";
    }
    cout<<"*";
 }
else
 {
    cout<<endl;
    for(k=n-1;k>i;k--)
    {
        cout<<" ";
    }
    cout<<"*";
    for(j=n/2;j<i;j++)
    {
        cout<<"  ";
    }
    cout<<"*";
 }  
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T11:16:09.007

我在 2 年前写的解决方案（当时我还在学习）：

*   制作一个行列数组，例如`char screen[80][25];`
*   通过将所有条目设置为来清除它`' '`
*   通过设置在 x,y 处“画一个点”`screen[x][y]='*';`
*   完成后，通过调用2080 次来**渲染**整体。（人物 2000 次和 80 次）`screen[80][25]``cout``endl`

就您而言，您知道如何绘制`\`. 你可以很容易地适应这一点。但是使用我的方法，您可以`/`在同一个`screen`数组中绘制 a 。当你完成后，你有一个重叠`/`，`\`在最后一步：`X`

我使用这种方法是因为我们必须画一个圆圈，这真的很难。是的，现在我可能会使用`std::vector<std::string> screen`但当时屏幕真的是 80x25 :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T10:22:01.950

您应动态评估每行中的间距区域。在纸上手动绘制所需的形状并尝试创建函数，该函数将行号作为参数并返回特定行中所需的空格量。例如：

```
*   *
 * * 
  *
 * *
*   * 
```

每行中的空格数等于：

```
0 [*] 3 [*]
1 [*] 1 [*]
2 [*] 
1 [*] 1 [*]
0 [*] 3 [*] 
```

请注意，在每一行内，您需要两个循环：第一个循环用于初始空间和中间空间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-26T13:45:57.510

```
#include<iostream>
using namespace std;
int main()
{
    int i, j;
    for(i = 1;i<= 5;i++)
    {
        for(j = 1;j<= 5;j++)
        {
            if((i == j)||(j==(5+1)-i))
            {
                cout << "*";
            }
            else{   
                cout << " ";
            }
        }
        cout<< endl;
    }
    system("pause");
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-11T08:31:39.867

```
#include "stdafx.h"
#include <iostream>

using namespace std;

int main(int argc, char* argv[])
{
int  i, d, a=1,b=12,c ,e=1;
        for(i = 1; i <= 6; i++)
            {
                for (d=1; d<i;d++) {cout <<" ";}
                cout<<"***";
                for (c=a+1; c<b;c++) {cout <<" ";}
                {cout<<"***";}
                for(b=12-i;b<i;b++) 
                {cout<<"***";}
                cout<<endl;
                a++;
        }
for( i = 1; i <= 3; i++)
        {
            for ( d=6; d>i;d--) {cout <<" ";}
            cout<<"***";
            for (c=0; c<e-1;c++) {cout <<"  ";}
            {cout<<"***";}
            cout<<endl;
            e++;
    }

return 0;
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-08-16T06:01:08.643

```
#include "stdafx.h"
#include <iostream>
using namespace std;;

int _tmain(int argc, _TCHAR* argv[])
{
    int i,k,j;
    for (i=1;i<8;i++)
    {
        for (int k=0;k<i;k++)
        {
            cout<<" ";
        }
        cout<<"*";
        for (int k=8;k>i;k--)
        {
            cout<<"  ";
        }
        cout<<"*";
        cout<<endl;
    }
    for (i=1;i<8;i++)
    {
        for (int k=8;k>i;k--)
        {
            cout<<" ";
        }
        cout<<"*";

        for (int k=0;k<i;k++)
        {
            cout<<"  ";
        }
        cout<<" *";
        cout<<endl;
    }

    system("Pause");
    return 0;
} 
```

# php - Html 邮件在 PHP 中不能使用 SMTP

> ID：10086623
> 
> 赞同：0
> 
> 时间：2012-04-10T09:59:04.413
> 
> 标签：php, email, smtp

这是我的代码：

```
<?php

function smtp_mail($from, $to, $subject, $message, $headers="", $params=array()) {
    $errno = "";
    $errstr = "";
    $smtpConnect = fsockopen("mail2.allramhosting.com", "25", $errno, $errstr, 20);

    if (!empty($smtpConnect)) {

        if ($params['use_html']) {
            $extra_headers .= "MIME-Version: 1.0\nContent-Type: text/html; charset=\"utf-8\"\nContent-Transfer-Encoding: 7bit\n";
        }
        $headers = "To: " . $to . "\nFrom: " . $from . "\nSubject: " . $subject . "\nDate: " . date('r') . "\n" . $extra_headers . $headers;

        if (substr($headers, -1) == "\n") $headers = substr($headers, 0, -1); // Our last character should not be newline

        //fputs($smtpConnect,"AUTH LOGIN" . $newLine);
        //$smtpResponse = fgets($smtpConnect, 515);
        //fputs($smtpConnect, base64_encode($username) . $newLine);
        //$smtpResponse = fgets($smtpConnect, 515);
        //fputs($smtpConnect, base64_encode($password) . $newLine);
        //$smtpResponse = fgets($smtpConnect, 515);
        fputs($smtpConnect, "HELO networkssms.com\r\n");
        fputs($smtpConnect, "MAIL FROM: " . $from . "\r\n");
        fputs($smtpConnect, "RCPT TO: " . $to . "\r\n");
        fputs($smtpConnect, "DATA\r\n");
        fputs($smtpConnect, $headers . "\r\n\r\n");
        fputs($smtpConnect, $message . "\r\n.\r\n"); // send message and finish
        fputs($smtpConnect,"QUIT" . $newLine);
        fclose($smtpConnect);
        return true;
    }
    return false;
}

$params['use_html'] = "yes";

$user_subject = "Ticket - Budget Notification";
$user_part = '<html><body>';
$user_part .= '<div style="background-color: #EEEEEE;border-bottom: 1px solid #DCDCDC;padding: 10px 10px 20px;width: 500px; float:left;font-size:12px;font-weight:bold;">';
$user_part1 = '<div style="width:500px;">';
$user_part1 .= '<div style="width:500px;background-color:#eeeeee;padding: 10px 0 20px;border-bottom:1px solid #dcdcdc;">';
$user_part1 .= '<div style="float:left;width:150px;color:#666666;margin-left:20px;font-size:12px;font-weight:bold;">';
$user_part1 .= '</div></div>';
$user_part1 .= '<div style="width:450px;background-color:#eeeeee;padding: 10px 0 20px;border-bottom:1px solid #dcdcdc; height:auto; float:left;font-size:12px;margin-left:50px; font-weight:bold;">';
$user_part3 = '</div></div></div>';
$user_part3 .= '</body></html>';
$user_center_part1 = '';    
$user_center_part = 'The following Tickets are reached its budget ,';   
$user_center_part2='<div style="float:left;width:auto;color:#000000;font-size:12px;margin-left:75px; font-weight:bold; height:auto; margin-top:10px;">Ticket #10 reached 100% of its budget</div>';
$user_to = 'galtech.staffs@gmail.com';
$user_center_part1 = 'Dear Admin ,';
$user_message = $user_part.$user_center_part1.$user_part1.$user_center_part.$user_center_part2.$user_part3; 

if (!smtp_mail("noreply@networkssms.com", $user_to, $user_subject, $user_message,"",$params)){
    mail($user_to, $user_subject, $user_subject . "\n" . substr($user_message, 0, 158), "From: noreply@networkssms.com\nX-PHP-Script: 1");
    //mail("galtech.staffs@gmail.com", $user_subject, $user_message ,"From: noreply@networkssms.com\nX-PHP-Script: 1");
}

?> 
```

我的帐户中没有收到任何邮件。如果我将其作为没有 html 内容的普通邮件或简单邮件提供，则它可以正常工作，但不适用于 html 内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:47:59.667

我建议您使用经过良好测试和记录的库，例如 SwiftMailer，而不是使用您自己的自定义复杂函数来发送 html 电子邮件。

它[非常](http://swiftmailer.org/docs/messages.html) [易于](http://swiftmailer.org/docs/sending.html)使用。对于您的示例，它可以是：

```
$user_subject = "Ticket - Budget Notification";
/* ... */
$user_message = $user_part.$user_center_part1.$user_part1.$user_center_part.$user_center_part2.$user_part3;

// then, send the mail
require_once 'lib/swift_required.php';

// Create the Transport
$transport = Swift_SmtpTransport::newInstance('mail2.allramhosting.com', 25);

// Create the Mailer using your created Transport
$mailer = Swift_Mailer::newInstance($transport);

// Create the message
$message = Swift_Message::newInstance()
  ->setSubject($user_subject)
  ->setFrom('noreply@networkssms.com')
  ->setTo($user_to)
  ->addPart($user_message, 'text/html');

// Send the message
$result = $mailer->send($message); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:03:17.463

您是否尝试过使用 PEAR 的 Mail_MIME 之类的东西？

您可以查看[http://pear.php.net/manual/en/package.mail.mail-mime.example.php#15034](http://pear.php.net/manual/en/package.mail.mail-mime.example.php#15034)并使用您的 smtp 服务器信息（$smtpinfo 数组）尝试该示例。

# iphone - Facebook SSO 在没有 Facebook 应用程序的情况下无法工作

> ID：10086625
> 
> 赞同：0
> 
> 时间：2012-04-10T09:59:10.060
> 
> 标签：iphone, ios, facebook, ipad, single-sign-on

按照[官方教程](http://developers.facebook.com/docs/mobile/ios/build/#implementsso)，我正在使用最新的[Facebook iOS sdk](http://http:/https://github.com/facebook/facebook-ios-sdk)实现 SSO 。

**安装 Facebook应用**后，一切正常。但是当我尝试在**没有**Facebook 应用的情况下使用 SSO 时。我使用以下 URL 切换到 safari（[app_id] 是我的应用程序 ID）。

`https://m.facebook.com/dialog/oauth?type=user_agent&display=touch&redirect_uri=fb[app_id]%3A%2F%2Fauthorize&sdk=ios&client_id=[app_id]`

我很快被重定向到以下 URL。

`http://m.facebook.com/home.php?_rdr`

它停在那里显示正常的m.facebook.com，没有任何确认对话框。

我尝试使用 safari 检查器打开 oauth URL 并将用户代理更改为 iOS safari，我得到了 302 Found 和以下响应。

```
Date: Tue, 10 Apr 2012 09:52:57 GMT
X-Content-Type-Options: nosniff
X-Cnection: close
Content-Length: 0
X-XSS-Protection: 0
Pragma: no-cache
X-FB-Debug: lgGyyzkM/gG5wYIcaFKD/gaQjHuNGoa8u+61KNXhvdk=
Content-Type: text/html; charset=utf-8
Location: http://m.facebook.com/home.php?_rdr
Cache-Control: private, no-cache, no-store, must-revalidate
Expires: Sat, 01 Jan 2000 00:00:00 GMT 
```

任何想法？毕竟，它适用于 Facebook 应用程序。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T07:17:51.497

我在回答我自己的问题。事实证明，我使用的是旧式 api 密钥，它看起来像一个 MD5 哈希。我使用新的数字键，它现在可以正常工作。

# windows-services - Windows 服务项目维护另一个可执行文件？

> ID：10086626
> 
> 赞同：0
> 
> 时间：2012-04-10T09:59:11.987
> 
> 标签：windows-services, nested

我有一个 64 位的 windows 服务项目，现在我需要一个 32 位的可执行文件，它应该具有与 windows 服务相同的生命周期。由于 64 位应用程序域无法加载 32 位 dll，所以我必须在 64 位 Windows 服务的 OnStart() 函数中启动这个 32 位可执行文件。我想知道我应该如何维护这个 32 位可执行文件的生命周期？基本上我现在所做的是在 OnStart() 中启动可执行文件并在 OnStop() 中退出它。

但我现在担心的是，如果这个 32 位可执行文件（进程）在 Windows 服务运行过程中被杀死或崩溃怎么办？我需要重新启动它。Windows服务中是否有一个地方或功能，我可以在其中监视其他进程，并且每当这些进程被杀死时，我可以重新启动它们？或者我可以想到嵌套的 Windows 服务，但是我找不到关于这个主题的任何有用的材料。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:36:12.043

我个人会做的是将两个可执行文件配置为 Windows 服务，这样您就可以按照预期的方式使用 ServiceController 以确保您的程序正确运行。您还可以将一项服务设置为另一项服务的先决条件。

我不建议从服务启动应用程序，因为这会给您带来很大的困难......

例如，应用程序将在哪个用户下运行？

沿着 ServiceController 路线走，让这两个部分都是服务肯定是我的首选路线。

从设计的角度来看，一个应该一直运行并且不需要接口的可执行文件实际上应该是一个 Windows 服务，以便操作系统给出正确的调度，并且能够自动重启程序。成为问题。

# android - 如何在android中迭代复杂类型的数组

> ID：10086629
> 
> 赞同：0
> 
> 时间：2012-04-10T09:59:26.737
> 
> 标签：android, arrays, ksoap

如何在java中迭代复杂类型的数组

> anyType{schema=anyType{element=anyType{complexType=anyType{choice=anyType{element=anyType{complexType=anyType{sequence=anyType{element=anyType{}; 元素=anyType{}; 元素=anyType{}; 元素=anyType{}; }; }; }; }; }; }; }; diffgram=anyType{DocumentElement=anyType{default=anyType{guesttranunkid=1; 客人unkid = 1; 电话号码=900000000；emailid=Piyush@mail.com；}; 默认=anyType{guesttranunkid=2; 客人unkid = 2; 电话号码=992222222；emailid=ja@gmail.com; }; 默认=anyType{guesttranunkid=3; 客人unkid = 3; 电话号码=9999999999；emailid=yuvi@gmail.com；}; 默认=anyType{guesttranunkid=4; 客人unkid = 4; 电话号码=888888888；emailid=sachin@gmail.com；}; 默认=anyType{guesttranunkid=5; 客人unkid = 5; 电话号码=111111111；emailid=DD@gmail.com；}; 默认=anyType{guesttranunkid=6; 客人unkid = 6; 电话号码=3333333333；emailid=DD@gmail.com；}; 默认=anyType{guesttranunkid=7; 客人unkid = 7; 电话号码=12121212；emailid=CSK@gmail.com；}; 默认=anyType{guesttranunkid=8; 客人unkid = 8; 电话号码=1313131313；emailid=CSK@gmail.com；}; 默认=anyType{guesttranunkid=9; 客人unkid=9；电话号码=1414141414；emailid=MI@gmail.com; }; 默认=anyType{guesttranunkid=10; 客人unkid=10；电话号码=1515151；emailid=Devid@gmail.com；}; 默认=anyType{guesttranunkid=11; 客人unkid=11；电话号码=16161616；emailid=Smith@gmail.com；}; }; }; } emailid=Devid@gmail.com；}; 默认=anyType{guesttranunkid=11; 客人unkid=11；电话号码=16161616；emailid=Smith@gmail.com；}; }; }; } emailid=Devid@gmail.com；}; 默认=anyType{guesttranunkid=11; 客人unkid=11；电话号码=16161616；emailid=Smith@gmail.com；}; }; }; }

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:18:07.377

您应该查看本教程以解析此类响应

[`Web Service That Returns An Array of Objects With KSOAP`](http://seesharpgears.blogspot.in/2010/10/web-service-that-returns-array-of.html)

[**另一种解析方式是使用 JSONObject 和 JSONArray**](https://stackoverflow.com/questions/1270191/how-to-parse-this-web-service-response-in-android)

[**将 SoapObjects 数组手动解析为 POJO 数组**](http://code.google.com/p/ksoap2-android/wiki/CodingTipsAndTricks#Manual_Parsing_of_an_Array_of_into_an_POJO_array)

# visual-studio - .load sos 中的“.load”是什么？

> ID：10086630
> 
> 赞同：0
> 
> 时间：2012-04-10T09:59:26.917
> 
> 标签：visual-studio, debugging, automation, sos, immediate-window

在 Visual Studio`.load sos`中，我使用即时窗口加载 sos.dll。这个'.load'是什么？有什么描述吗？

在即时窗口中，我可以：计算表达式 ( `? varA`)、执行程序命令 ( `varA=1`) 或执行 VS commad ( `>cmd`)。这个方案中的 .load 在哪里？它可以在其他地方使用（命令窗口宏）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:58:49.053

Is 是用于非托管调试器的命令。您需要打开项目+属性、调试选项卡、“启用非托管代码调试”选项并开始调试您的程序。使用 .load 加载扩展后，您可以通过键入 !help 获得帮助。调试器扩展命令以 . 或者 ！

您可以从包含在 Windows 调试工具包中的 debugger.chm 帮助文件中获取有关调试器扩展的更多信息。如今，它不再单独下载，而是包含在 Windows SDK 中。在 c:\program files (x86)\debugging tools for windows (x86) 目录中找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T10:01:40.447

它加载了一个windbg 扩展。

在这种情况下，SOS 扩展。

请参阅[WinDbg/SOS 备忘单](http://geekswithblogs.net/.NETonMyMind/archive/2006/03/14/72262.aspx)。

# asp.net-mvc - 从自定义表中读取/写入 ELMAH 日志信息

> ID：10086638
> 
> 赞同：1
> 
> 时间：2012-04-10T10:00:02.737
> 
> 标签：asp.net-mvc, elmah

我一直在尝试使用**ELMAH**将它用于我的新 MVC 项目。有什么方法可以使用自定义数据库模式进行错误记录吗？另外，我如何自定义**elmah.axd**页面中显示的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T23:09:43.413

我不会尝试自定义 elmah.axd 页面。我只是创建自己的页面，直接从数据库中查询数据。这会容易得多。源代码甚至包括一些[示例](http://code.google.com/p/elmah/source/browse/#hg/samples/Demo)。

但是，如果要更改表名或字段名，则必须自定义 SQL 提供程序使用的存储过程：ELMAH_GetErrorsXml、ELMAH_GetErrorXml 和 ELMAH_LogError。如有必要，您还可以向 ELMAH SQL 表添加其他字段。

# php - val 转换为 int 值

> ID：10086644
> 
> 赞同：-2
> 
> 时间：2012-04-10T10:00:25.707
> 
> 标签：php

你好我有一个表格可以将小数点转换为整数。哪里有问题

```
 <td>
    <input type='text' name='item[$i][Price]' id='Pquantity' value='".htmlspecialchars($row['Price'])."' readonly> 
```

这是下面的表格，数据是从上面填写的表格中提取的

```
<?php
$submit = $_POST['Add'];

//form data
$Sname = mysql_real_escape_string(htmlentities(strip_tags($_POST['Sname'])));
$Pname = mysql_real_escape_string(htmlentities(strip_tags($_POST['Pname'])));
$Pidno = mysql_real_escape_string(htmlentities(strip_tags($_POST['Pidno'])));
$Psize = mysql_real_escape_string(htmlentities(strip_tags($_POST['Psize'])));
$Pcolour = mysql_real_escape_string(htmlentities(strip_tags($_POST['Pcolour'])));
$Pquantity = $_POST['Pquantity'];
$Weblink = mysql_real_escape_string(htmlentities(strip_tags($_POST['Weblink'])));
$Price = mysql_real_escape_string(htmlentities(strip_tags($_POST['Price'])));
$date = date("Y-m-d");

//echo " ('','$Sname','$Pname','$Pidno','$Psize','$Pcolour','$Pquantity','$Weblink','$Price','$Uname')";
if('POST' === $_SERVER['REQUEST_METHOD']) 

{
if ($Sname&&$Pname&&$Pidno&&$Weblink&&$Price)
{
if (is_numeric($Price))
{
    $repeatheck = mysql_query("SELECT * FROM repplac WHERE Uname = '{$_SESSION['username']}' AND Pidno ='$Pidno' AND Sname='$Sname'");
    $count = mysql_num_rows($repeatheck);
if($count!=0)
{
    die ('PRODUCT ALREADY IN BASKET YOU CAN INCREASE OR DECREASE QUANTITY');
}
else
//echo'$Price';
$tprice = $Price * $Pquantity;
//echo"$tprice";
$queryreg = mysql_query("
INSERT INTO repplac VALUES ('','$Sname','$Pname','$Pidno','$Psize','$Pcolour','$Pquantity','$Weblink','$Price','$tprice','$date','{$_SESSION['username']}','')
")or die(mysql_error());
}
else
echo 'price field requires numbers';
}
else
echo 'please fill in all required * fields ';
}
?>
<form action='youraccount.php' method='Post' class='ilistbar'>
    <!--<div>
    <label for='shoppinglist' class='fixedwidth'></label>
    <textarea type='text' name='shoppinglist' id='username' cols='100' rows='15'></textarea>
    </div> -->
    <div>
    <label for='Sname' class='fixedwidth'> * Shop name</label>
    <input type='text' name='Sname' id='Sname'/>
    </div>
    <div>
    <label for='Pname' class='fixedwidth'> * Product name</label>
    <input type='text' name='Pname' id='Pname'/>
    </div>
    <div>
    <label for='Pidno' class='fixedwidth'> * Product id no /ad reference</label>
    <input type='text' name='Pidno' id='Pidno'/>
    </div>
    <div>
    <label for='Psize' class='fixedwidth'>Product size</label>
    <input type='text' name='Psize' id='Psize'/>
    </div>
    <div>
    <label for='Pcolour' class='fixedwidth'>Product colour</label>
    <input type='text' name='Pcolour' id='Pcolour'/>
    </div>
    <div>
    <label for='Pquantity' class='fixedwidth'>Product quantity</label>
    <select name="Pquantity" id="Pquantity">
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
      <option value="6">6</option>
      <option value="7">7</option>
      <option value="8">8</option>
      <option value="9">9</option>
      <option value="10">10</option> 
</select>
(You can update quantity in excess of 10 on the shopping list below)
    </div>
    <div>
    <label for='Weblink' class='fixedwidth'> * Web link</label>
    <input type='text' name='Weblink' id='Weblink'/>
    </div>
    <div>
    <label for='Price' class='fixedwidth'> * Price GBP</label>
    <input type='text' name='Price' id='Price'/>
    </div>
    <div>

    <div class='buttonarea'>
            <p>
            <input type='submit' name='submit' value='Add'>
            </p>
            </div>
            </p>
    </form>
</div>
</div>
</div>
<div class="primary">
<div class="action-box rounded">
<div class="titlebar">
<h2>Shopping List</h2>
<!--<a href='totalprice.php'>Update</a>-->
</div>
<div class="listbar">

    <form action='orderpplac.php' method='Post' class='shlistbar'>
    <table border='1'>
    <tr>
    <th>SHOP NAME</th>
    <th>PRODUCT NAME</th>
    <th>PRODUCT SIZE</th>
    <th>PRODUCT COLOUR</th>
    <th>PRODUCT QUANTITY</th>
    <th>PRICE</th>
    <th>TOTAL</th>
    <th></th>
    </tr>
    <?php
    // Get DB results and loop, outputting table rows with counter
    $pplresult = mysql_query("SELECT * FROM repplac WHERE Uname = '{$_SESSION['username']}'") or die(mysql_error());
   for ($i = 0; $row = mysql_fetch_assoc($pplresult); $i++) {
    echo "
    <tr>
    <td>".htmlspecialchars($row['Sname'])."</td>
    <td>".htmlspecialchars($row['Pname'])."</td>
    <td>".htmlspecialchars($row['Psize'])."</td>
    <td>".htmlspecialchars($row['Pcolour'])."</td>
    <td>
    <input type='text' name='item[$i][Pquantity]' id='Pquantity' value='".htmlspecialchars($row['Pquantity'])."' />
    <input type='hidden' name='item[$i][Pidno]' id='Pidno' value='".htmlspecialchars($row['Pidno'])."' />
    </td>
    <td>
    <input type='text' name='item[$i][Price]' id='Pquantity' value='".htmlspecialchars($row['Price'])."' readonly>
    </td>
    <td>".htmlspecialchars($row['Tprice'])."</td>
    <td><a href='deleteproduct.php?del=".htmlspecialchars($row['Pidno'])."'>delete</a></td>
    </tr>";
    }
   $pplresult = mysql_query("SELECT * FROM repplac WHERE Uname = '{$_SESSION['username']}'") or die(mysql_error());
  while ($row = mysql_fetch_assoc($pplresult)) 
   //echo $row['Pquantity'] * $row['Price'];
  {
  $totalprice += $row['Tprice'];
  }
  //echo "$totalprice";

         ?>
         <tr>
                <th>Total Price</th>
                <th><?php echo $totalprice; ?></th>

            </tr>
    <!--Close table and form-->

    </table>
    <input type='submit' name='submit1' value='UPDATE' />
    <input type='submit' name='submit2' value='SUBMIT' />
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T10:49:38.520

使用表格

```
CREATE TABLE `test` (
  `int` int(11) NOT NULL,
  `float` float NOT NULL,
  `decimal` decimal(2,1) NOT NULL
) 
```

并在每列中插入值“3.85”

```
INSERT INTO `test` (`int`, `float`, `decimal`) VALUES ('3.85', '3.85', '3.85'); 
```

将导致输出

```
int   float   decimal
4     3.85    3.9 
```

插入时会得到一个

```
Note: #1265 Data truncated for column 'decimal' at row 1 
```

要修复此问题，请执行

```
ALTER TABLE `repplac` CHANGE `Price` `Price` DECIMAL(12, 2) NOT NULL 
```

该类型`DECIMAL(12, 2)`最多可以存储`9999999999,99`.

有关更多信息，请参阅[MySQL 的 DECIMAL 手册。](https://dev.mysql.com/doc/refman/5.6/en/precision-math-decimal-changes.html)

注意输入“3,85”（用逗号代替点）将导致 MySQL 忽略任何小数位。您可能希望在插入之前`str_replace(',', '.', $Price)`转换`,`为`.`，或向用户显示他使用无效格式的警告。

# algorithm - 使用缓冲区对串行数据进行排序

> ID：10086648
> 
> 赞同：0
> 
> 时间：2012-04-10T10:00:46.997
> 
> 标签：algorithm, sorting, serial-port, buffer

是否有任何算法可以使用小于数据长度的缓冲区对串行输入中的数据进行排序？

例如，我有 100 字节的串行数据，只能读取一次，还有 40 字节的缓冲区。我需要打印出排序的字节。

我需要它在 Javascript 中，但任何一般的想法都是值得赞赏的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T19:40:41.017

这种排序是不可能一次性完成的。

使用您的示例：假设您已填充 40 字节缓冲区，因此您需要开始打印字节以便为下一个字节腾出空间。为了打印出排序后的数据，您必须先打印最小的字节。但是，如果最小的字节还没有被读取，你可能还不能打印出来！

与您的问题最相关的可能是[外部排序](http://en.wikipedia.org/wiki/External_sorting)算法，它需要多次通过才能对无法放入内存的数据进行排序。也就是说，如果你有可以存储处理过程输出的外围设备，你可以在 O(log(N/M)) 个过程中对大于内存的数据进行排序，其中 N 是问题的大小，M 是你的内存大小。

用于外部排序的经典存储外围设备是磁带机；但是，相同的算法适用于磁盘驱动器（任何类型）。此外，随着缓存层次结构的深入，外部排序的原则甚至对于内存中的排序也变得更加相关 - 尝试看看[缓存忽略](http://kristoffer.vinther.name/academia/thesis/)算法。

# mysql - MYSQL 到 SQL - 更新限制

> ID：10086650
> 
> 赞同：0
> 
> 时间：2012-04-10T10:01:19.460
> 
> 标签：mysql, sql, limit

我尝试将代码从 MYSQL 更改为 SQL，但出现错误（SQL Syntax 'Limit'）。

所以我尝试更改我的查询并使用“TOP”进行更新，但似乎仅适用于 SELECT。

那么，我该如何更改这个 MYSQL 查询：

```
$fct="UPDATE `users` SET `STREAM_TITRE` = '$STREAM_TITRE',`STREAM_URL` = '$STREAM_URL',`STREAM_DESC` = '$STREAM_DESC',`STREAM_GENRE` = '$STREAM_GENRE' WHERE `ID` =$IDSESS LIMIT 1"; 
```

这是我没有限制的 SQL 代码：

```
$fct="UPDATE users SET STREAM_TITRE = '$STREAM_TITRE', STREAM_URL = '$STREAM_URL', STREAM_DESC = '$STREAM_DESC', STREAM_GENRE = '$STREAM_GENRE' WHERE ID = '$IDSESS'"; 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T10:11:38.290

目前还不清楚您的查询的哪个版本正在工作，哪个版本不工作 - 以及在什么 DBMS 中。

如果`ID`是 char 或 varchar 类型，则`LIMIT`版本中缺少一些引号。虽然 MySQL 不是很挑剔，你不会有很多问题，带或不带引号：

```
$fct = "
  UPDATE users 
  SET STREAM_TITRE = '$STREAM_TITRE'
    , STREAM_URL = '$STREAM_URL'
    , STREAM_DESC = '$STREAM_DESC'
    , STREAM_GENRE = '$STREAM_GENRE' 
  WHERE ID = $IDSESS              --<-- this should be '$IDSESS' , right?
                                  ----- or $IDSESS , depending on the datatype
  LIMIT 1
       "; 
```

注意：`LIMIT n`适用于 MySQL 和 PostgreSQL，但不适用于其他一些 DBMS。另外，我不认为你真的需要它，因为`ID`它可能是表的主键。

如果您尝试将语句从 MySQL 转换为 SQL-Server，则不应使用反引号并替换`LIMIT 1`为`TOP (1)`：

```
$fct = "
  UPDATE TOP (1) users 
  SET STREAM_TITRE = '$STREAM_TITRE'
    , STREAM_URL = '$STREAM_URL'
    , STREAM_DESC = '$STREAM_DESC'
    , STREAM_GENRE = '$STREAM_GENRE' 
  WHERE ID = $IDSESS             
       "; 
```

# sitecore - 面向营销人员的 Sitecore Web 表单语言版本控制

> ID：10086651
> 
> 赞同：1
> 
> 时间：2012-04-10T10:01:24.233
> 
> 标签：sitecore, sitecore6, web-forms-for-marketers

Sitecore.NET 6.4.1（修订版 111003），面向营销人员的 Web 表单 2.2.0 修订版 111104。

在项目的英语 (en) 版本上放置表单会导致在其他语言版本上显示提交按钮和复杂类型字段（密码确认、信用卡），即使该语言不存在表单版本。简单类型字段显然不受影响。显示的字段的标签值似乎来自 WFFM 设置中的英文默认值，而不是表单的英文版本。

有没有其他人遇到过这个问题，有没有人找到解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T13:05:33.383

回答我自己的问题：

Sitecore 支持已确认这是一个错误，并为 WFFM 表单显示提供了替代 ascx 文件。

# objective-c - RestKit 对象映射没有映射我的对象

> ID：10086652
> 
> 赞同：0
> 
> 时间：2012-04-10T10:01:25.840
> 
> 标签：objective-c, restkit

```
{"avatar_30":"url", 
"id": 81, 
"name": "\u674e\u5f3a"
} 
```

我有我的个人资料课程。

```
@interface Profile: NSObject{
    NSNumber* _identifier;
    NSString* _name;
    NSString* _avatar_30;
}
@property (nonatomic, retain) NSNumber* identifier;
@property (nonatomic, retain) NSString* name;
@property (nonatomic, retain) NSString* avatar_30;
@end

@implementation Profile

@synthesize identifier=_identifier;
@synthesize name=_name;
@synthesize avatar_30 = _avatar_30; 
```

然后我建立我的经理并获得像这样的 Profile Class 的映射：在 AppDelegate.h @interface AppDelegate : UIResponder in AppDelegate.m

```
RKObjectMapping* profileMapping = [RKObjectMapping mappingForClass:[Profile class]];
    [profileMapping mapKeyPath:@"id" toAttribute:@"identifier"];
    [profileMapping mapKeyPath:@"name" toAttribute:@"name"];
    [profileMapping mapKeyPath:@"avatar_30" toAttribute:@"avatar_30"];

    RKObjectManager* manager = [RKObjectManager objectManagerWithBaseURL:_baseURL];
    //[manager.mappingProvider setMapping:profileMapping forKeyPath:@"%@"];
    [manager loadObjectsAtResourcePath:@"/api/v2/userinfo/100/" objectMapping:profileMapping delegate:self]; 
```

我可以正确获取 jason，但是无法映射配置文件。

```
Got a JSON response back from GET!
2012-04-10 17:47:33.480 Base_01[5714:14603] D restkit.network:RKObjectLoader.m:198 Found        directly configured object mapping, creating temporary mapping provider for keyPath '%@'
2012-04-10 17:47:33.482 Base_01[5714:fb03] Load collection of Profiles: (
) 
```

有人对这个问题有任何想法吗？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:57:46.450

在方法中

```
- (void)objectLoader:(RKObjectLoader *)objectLoader didLoadObjects:(NSArray *)objects{ 
```

“对象”数组中是否有任何对象？

这应该包含您的所有 Profile 对象。

# jquery - 从 XML 显示设置的项目数量 - Jquery

> ID：10086656
> 
> 赞同：1
> 
> 时间：2012-04-10T10:01:36.977
> 
> 标签：jquery, xml, parsing, load

编辑：由于布兰登的例子，我设法获得了最新的 10 件物品。但现在发生了其他事情。在我添加代码以仅加载 10 个项目之前，单击一个项目将隐藏除单击的项目之外的所有内容，而不是显示与其连接的视频。现在我添加了这段代码，单击项目时内容不再显示。我试图找出是否是因为关闭标签或其他东西有问题，但我无法弄清楚。

所以它来自于`function itemClick(){`部分。

这是我的脚本：

```
$(document).ready(function(){
        $.ajax({
            type: "GET",
            url: "http://www.flabber.nl/rss/nakko/webzap",
            dataType: "xml",
            success: function(xml) {
            var $items = $(xml).find('item');
                for(var i = 0; i < $items.length && i < 10; i++){
                var myObj = $items.eq(i);
                    var urllist = myObj.find('link').text();
                    var node = urllist.substring(urllist.lastIndexOf('-')+1);
                    var id = node;
                    var video5 = myObj.find('hosted-video-url').text();
                    var playvid5 = "playVideo('video5')";
                    playvid5 = playvid5.replace("video5", video5);
                    var title = myObj.find('title').text();
                    var url = myObj.find('link').text();
                    var brief = myObj.find('teaser').text();
                    var long = myObj.find('lees-verder').text();
                    var ytube = "";
                    var src = myObj.find('iframe').attr('src');
                    var match = /embed\/([A-Za-z0-9_]+)/.exec(long);
                    if(match) ytube = match[1]; // Found it!
                    var playytube = "playVideo('http://www.youtube.com/watch?v=ytube')";
                    playytube = playytube.replace("ytube", ytube);
                    var pubDate = myObj.find('pubDate').text();
                    var img = myObj.find('image').text();
                    $('<p class="items" class="click_'+id+'" id="link_'+id+'" style="width:100%"></p>').appendTo('.class2');
                    $('<div class="terug" style="margin-bottom: 1px; margin-left: 1%"><img src="images/terug.png"></div>').appendTo('#link_'+id);
                    $('<h2 class="title_list" style="padding-top: 10px; border-top: 1px solid #72b252;"></h2>').html(title).appendTo('#link_'+id);
                    $('<div class="introtekst"><a href="#"></a></div>').html(brief).appendTo('#link_'+id);
                    $('<div class="screenshot"></div>').html('<img src="'+img+'" height="120"/>').appendTo('#link_'+id);
                    $('<h2 class="title"></h2>').html(title).appendTo('#link_'+id);
                    $('.terug').hide();

                        function itemClick(){
                    $('.items').hide();
                        $('.terug').show();
                        $('#link_'+id).unbind('click');
                        $('<div class="introtekst_gal"><a href="#"></a></div>').html(brief).appendTo('#link_'+id);
                        $('<div class="html5vid"></div>').html('<a href="#" onclick="'+playvid5+'"><img src="'+img+'" style="margin-bottom: 20px;"/><div class="play"><img src="images/play.png" /></div></a>').appendTo('#link_'+id);
                        $('<div class="content"></div>').html('<a href="#" onclick="'+playytube+'"><img src="'+img+'" style="margin-bottom: 20px;"/><div class="play"><img src="images/play.png" /></div></a>').appendTo('#link_'+id);
                        $('<div class="openbrowser" id="link_'+id+'"></div>').html('<a href="'+url+'"><img src="images/naarf.png" /></a>').appendTo('#link_'+id);   
                        $(this).toggle();
                        if (video5 == ""){
                                                $('.html5vid').remove();
                                                $('.screenshot').hide();
                        }
                        else {
                                                $('.content').remove();
                                                $('.screenshot').hide();                                                    
                        }
                        };

                    $('#link_'+id).bind('click', itemClick);                        

                    $('.terug').mousedown(function(){
                    $(".items , .screenshot").show();                       
                    $(".content , .openbrowser , #videoplayer-0 , #videoplayer-1 , .html5vid , .introtekst_gal" ).remove();
                    $(".terug").hide();
                    $('#link_'+id).bind('click', itemClick);                                                                        

                    });

                    document.addEventListener("backbutton", function () {   
                        $(".items , .screenshot").show();
                        $(".content , .openbrowser , #videoplayer-0 , #videoplayer-1 , .html5vid , .introtekst_gal").remove();
                        $(".terug").hide();
                        $('#link_'+id).bind('click', itemClick)
                    }, false); 

                };

            }

        }); 

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:48:08.680

如果您对返回的 XML 有任何控制权，我建议您限制那里返回的项目数量。您将获得更好的性能，因为当您只需要 10 个时您不需要传输所有 n 个项目。

如果这不可能，那么经典的 for 循环应该足以限制已处理项目的数量。

```
//...            
success: function(xml) {
    var $items = $(xml).find('item');
    for(var i = 0; i < $items.length && i < 10; i++){
        var myObj = $items.eq(i);
        var urllist = myObj.find('link').text();
        var node = urllist.substring(urllist.lastIndexOf('-')+1);
        var id = node;
        var video5 = myObj.find('hosted-video-url').text();
        var playvid5 = "playVideo('video5')";
        //...
    }
}
//... 
```

​</p>

# fullcalendar - dayClick 和 eventClick 功能不起作用

> ID：10086661
> 
> 赞同：0
> 
> 时间：2012-04-10T10:01:48.327
> 
> 标签：fullcalendar

我在我的 js 中插入了一些新功能，但`dayClick`不起作用`eventClick`。日历能够正确加载。

知道为什么以下代码中的 dayclick 和 eventclick 不起作用吗？

```
$(document).ready(function() {
    var date = new Date();
    var d = date.getDate();
    var m = date.getMonth();
    var y = date.getFullYear();

    var calendar = $('#calendar').fullCalendar({
        header: {
            left: 'prev,next today',
            center: '',
            right: 'agendaWeek,agendaDay'
        },
        selectable: true,
        selectHelper: true,
        allDayDefault: false,
        allDaySlot: false,
        firstHour: 9,
        defaultView: 'agendaWeek',

        dayClick: function(date, allDay, jsEvent, view) {
            calendar.fullCalendar('gotoDate', date);
        },

        eventClick: function(calEvent, jsEvent, view) {
    window.location = "http://www.domain.com?start=" + calEvent.start;

},

        select: function(start, end) {

            var title = prompt('Event Title:');
            if (title) {
                calendar.fullCalendar('renderEvent',
                    {
                        title: title,
                        start: start,
                        end: end
                    },
                    false // make the event "stick"
                );

                var startDateString = $.fullCalendar.formatDate(start, 'yyyy-MM-dd hh:mm');
                var endDateString = $.fullCalendar.formatDate(end, 'yyyy-MM-dd hh:mm');
                $.ajax({
                    type: 'POST',
                    url: '{url}ajaxpost/add',
                    data: {
                        startDate: startDateString,
                        endDate: endDateString,
                        eventTitle: title                            
                    },
                    dateType: 'json',
                    success: function (resp) {
                        calendar.fullCalendar('refetchEvents');

                    }
                });
            }
            calendar.fullCalendar('unselect');
        },
        editable: true,
        events: "{url}ajaxget/data",
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T18:43:46.887

您不能同时使用“select”回调和“dayClick”回调，因为两者之间存在冲突。您可以使用 datepicker 来完成 gotoDate 函数来完成同样的事情。

[http://weblogs.asp.net/gunnarpeipman/archive/2010/02/02/linking-jqueryui-datepicker-and-fullcalendar.aspx](http://weblogs.asp.net/gunnarpeipman/archive/2010/02/02/linking-jqueryui-datepicker-and-fullcalendar.aspx)

至于 eventClick 我不确定为什么它不起作用，但是将 url 放在数据库中并在事件中调用它并将其设置为属性“url：www.somesite.com/sdfjkiwe”更容易

作为旁注，如果您不使用 renderEvent 来显示您的事件，它可能会更好。尝试使用此处找到的事件函数在其中使用您的 ajax 调用。

[http://arshaw.com/fullcalendar/docs/event_data/events_function/](http://arshaw.com/fullcalendar/docs/event_data/events_function/)

# c# - WPF 4.0 EdgeMode.Aliased 绘图在画布上显示速度莫名其妙

> ID：10086666
> 
> 赞同：2
> 
> 时间：2012-04-10T10:02:05.107
> 
> 标签：c#, wpf, performance, alias

我正在使用 FrameworkElement:DrawingVisual 绘制一些矢量数据，略低于 9000 个多边形对象，而后者又是 Canvas 对象的子对象。我的对象树看起来像这样：

```
WPF Window
-Canvas
--FrameworkElement
---DrawingVisual -> DrawingContext.DrawGeometry 
```

到目前为止，一切都很好。我正在为所有渲染方法计时，这几乎与预期的一样，DrawingContext 完成它的工作需要 0.32 秒，总共需要 0.5 秒。将 EdgeMode 设置为默认（抗锯齿）后，完成的绘图仅半秒后出现在我的画布上。

但是，因为我需要为所有行设置别名，所以我在画布对象上使用 RenderingOptions.SetEdgeMode 到 EdgeMode.Aliased。

执行此操作后，渲染时间没有明显差异，总时间为 0.5 秒。但是 - 完成的绘图现在需要超过 4 秒才能出现在我的窗口中。相比之下，抗锯齿版本不到 0.5 秒。唯一的区别是这一行代码：

```
 RenderOptions.SetEdgeMode(myCanvas, EdgeMode.Aliased); 
```

如果我调整窗口大小，同样的事情会发生，与抗锯齿版本相比，别名版本需要更长的时间来调整大小。显然，在这种情况下，我的绘图代码甚至没有被调用，所以问题一定出在其他地方。

在别名渲染模式下，我的代码外部的某些东西似乎大大减慢了速度，这与我的预期完全相反。那么我在这里错过了什么？

# map - 这个法线贴图正确吗

> ID：10086667
> 
> 赞同：1
> 
> 时间：2012-04-10T10:02:07.680
> 
> 标签：map, 3d, 3ds, autodesk

![法线贴图](../Images/52c580b8acd3cc62389f79c5c557c116.png)

我想知道我创建的这个法线贴图是否正确。我期待对象是平面的，它应该有纯蓝色，没有红色或绿色的成分......但显然这不是纯蓝色。我使用 3DS Autodesk 2011 创建了这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T10:06:54.157

是的，它看起来不错。由于法线的分量在`[-1, 1]`它们需要被重新映射到的范围内，才能将`[0, 255]`它们存储在法线贴图中。这是通过以下方式完成的：

```
remapped = (value * 0.5 + 0.5) * 255 
```

对于一个正常的人来说，`[0 1 0]`你得到一个值`[128 255 128]`。

# python - Python/PIL os.listdir 权限错误

> ID：10086668
> 
> 赞同：0
> 
> 时间：2012-04-10T10:02:15.077
> 
> 标签：python, django, linux, centos

我必须在 CentOS 系统（运行 python 2.4）上安装一个 Django 1.4 项目，所以我在 /opt/python2.7/ 上构建了 python 2.7，到目前为止一切顺利。

我已经上传了项目，更改了权限（chown -r apache:apache ./），一切似乎都正常，除了**列表**上传。上传本身顺利，（子）文件夹和文件已正确创建（例如/media/cache/thumbnail.jpg）

但是，当尝试列出文件（查看 admin/change_form.html 标准 django 模板）时，我收到此错误：

```
(site-packages/PIL/Image.py in init)

for file in os.listdir(directory): 
    ...

13, permission denied 
```

这是因为我以 root 身份安装了 python 并且项目/wsgi 是由 apache 用户运行的吗？有没有一种干净的方法来解决这个问题？更改 /media/ 文件夹的权限似乎没有影响，所以我认为这是由站点包权限引起的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T11:11:03.570

这是一个基本的权限问题。要*列出目录内容*，用户需要对父目录具有*执行权限。*

相应地修复您的权限，您应该不会有问题。

请注意，更改所有者`chown`不会修改权限，只会修改所有者和组。无论您的系统的默认设置是什么，权限都保持不变，这些默认设置由[`umask`](http://en.wikipedia.org/wiki/Umask).

# php - jQuery 冲突prototype.js 和jquery.js

> ID：10086670
> 
> 赞同：0
> 
> 时间：2012-04-10T10:02:22.447
> 
> 标签：php, jquery

我正在尝试在同一页面中使用 jQuery 和原型库，但两者都不能一起工作。在这种情况下，一个或另一个正在工作。

文件名是：

*   原型.js
*   jQuery.js

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:05:27.950

你可以使用[noConflict()](http://api.jquery.com/jQuery.noConflict/)让 jQuery 放弃它对`$`变量的使用。例如：

```
jQuery.noConflict()
jQuery.ready(function() {
    jQuery("#myElement").doSomething();  // jQuery
    $.something;  // prototype
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T10:05:19.573

读这个：

[http://docs.jquery.com/Using_jQuery_with_Other_Libraries](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)

你必须使用`jQuery.noConflict();`

# javascript - 如何处理点击而不是子元素？

> ID：10086671
> 
> 赞同：4
> 
> 时间：2012-04-10T10:02:28.103
> 
> 标签：javascript, jquery, html, click, tablerow

我使用以下代码处理点击。

带输入的表

```
<table>
    <tr>
        <td>
            <input type="checkbox" />
        </td>
    </tr>
</table>​ 
```

点击处理程序

```
$('table tr').click(function(){
    alert('clicked');
});​ 
```

[http://jsfiddle.net/n96eW/](http://jsfiddle.net/n96eW/)

它运行良好，但如果我在 td 中有一个复选框，它也会在单击时处理它。

有没有办法处理 TR 的点击但不触发子元素？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-10T10:04:17.883

[http://jsfiddle.net/n96eW/1/](http://jsfiddle.net/n96eW/1/)

在您的复选框中添加另一个事件处理程序以停止传播：

```
$('table tr').click(function(){
    alert('clicked');
});

$('table tr input').click(function(e) {
    e.stopPropagation();
});
​ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T10:05:39.230

您可以检查`event.target`以过滤您的事件：

```
$('table tr').click(function(e){
    if(e.target.tagName.toLowerCase() != "input") {
        alert('clicked');
    }
});​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-02T20:33:52.013

你也可以使用

```
$("tr").on('click',function() {

  if (!$(event.target).is('input'))
    alert('clicked');

}); 
```

# windows-phone-7 - 移动图像未出现在 mainpage.xaml 中

> ID：10086672
> 
> 赞同：0
> 
> 时间：2012-04-10T10:02:38.040
> 
> 标签：windows-phone-7, windows-phone-7.1

![主页.xaml](../Images/dc027dd9cffdf8c63c2765c15440e591.png)

在我的 mainpage.xaml 中，没有出现 windows mobile 图像（电话页面），而是出现了白屏。如何再次获取电话页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:14:10.467

以下论坛帖子似乎与您的类似问题“您如何设置设计窗格的皮肤？”：-

[http://social.msdn.microsoft.com/Forums/en-US/Vsexpressinstall/thread/45712f01-1e4f-4dec-8896-21933f736336](http://social.msdn.microsoft.com/Forums/en-US/Vsexpressinstall/thread/45712f01-1e4f-4dec-8896-21933f736336)

# objective-c - 使用 NSMutableArray 的内容更新 UITextView

> ID：10086678
> 
> 赞同：0
> 
> 时间：2012-04-10T10:02:56.463
> 
> 标签：objective-c, nsmutablearray, uitextview

我想知道如何在 NSMutableArray（下面的字符串之一）中随机选择一个对象，并使随机选择的对象的内容成为 UITextView 的内容。下面是我的代码：

```
NSMutableArray *quotes = [[NSMutableArray alloc] initWithObjects:
                   @"Text 1",
                   @"Text 2",
                   @"Text 3",
                   @"Text 4",
                   @"Text 5",
                   @"Text 6",
                   @"Text 7",
                   @"Text 8",
                   @"Text 9",
                   @"Text 10",
                   nil];

textView.text = // And then I would like to know how to randomly select one of the objects within the quotes Array 
```

提前谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:07:07.993

你可以使用这样的东西：

```
int randomIndex = arc4random() % quotes.count;
textView.text = [quotes objectAtIndex:randomIndex]; 
```

# ascx - IE7中面板（ascx）的重叠

> ID：10086681
> 
> 赞同：0
> 
> 时间：2012-04-10T10:03:04.270
> 
> 标签：ascx

我有 IE7 中面板重叠的问题，而相同的代码在 IE8 中有效。有没有人遇到过这种问题？在下面的代码中，我有一个链接按钮，单击此按钮，将显示产品框架。但这与“客户产品”重叠：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="ClientSummary.ascx.cs" Inherits="ClientSummary" %>
<%@ Register Src="~/Controls/ClientSession/CounselorMenuFrame.ascx"  TagName="CounselorMenuFrame" TagPrefix="UCC" %>
<%@ Register Src="~/Controls/ClientSession/ProductsFrame.ascx" TagName="ProductsFrame"  TagPrefix="UCC" %>
<%@ Register Src="~/Controls/ClientSession/ProductDetailFrame.ascx" TagName="ProductDetailFrame" TagPrefix="UCC" %>
<%@ Register Src="~/Controls/ClientSession/ClientDetailFrame.ascx" TagName="ClientDetailFrame" TagPrefix="UCC" %>

<asp:Panel ID="pnlClntSummary" runat="server" EnableViewState="true" >
<asp:Panel ID="pnlClientDetailFrame" runat="server" Style="width: 950px;" >
<UCC:ClientDetailFrame id="clientDetailFrame" runat="server" />
</asp:Panel>
<asp:Panel ID="pnlProductDetailFrame" runat="server"  Style="width: 950px;" >
<UCC:ProductDetailFrame id="productDetailFrame" runat="server"/>
</asp:Panel>
<div id="slider" style="width:950px;">
asp:Panel ID="pnlProductsFrame" runat="server" Style="width: 950px;" >
<table style="width:900px;" >
<tr><td></td><td>
&nbsp;
&nbsp;
&nbsp;
<asp:LinkButton Text="Client Information" ID="clientDetail" Font-Underline="true"
Font-Bold="true" Font-Names="Calibri" Font-Size="Medium" runat="server"
onclick="clientDetail_Click"/>
</td>
</tr>
<tr>
<td valign="top" style="float:left" align="left">
<div style="float:left;vertical-align:top;">
<div id="content" class="contentMenu">
<UCC:ProductsFrame id="productsFrame" runat="server" />
</div>
</div>
</td>
<td valign="top" style="width:900px;" align="left">
<div id="header1" style="float:left;position:relative;width:45px;">
<table border="0">
<tr>
<td valign="top" style="width:30px;"
onclick="verticalprocessClick(document.getElementById('header1'))">
<div style="padding: 2px; cursor: pointer; vertical-align: top;">
<div style="float: left; vertical-align: bottom;">
<table>
<tr onclick="ImageChangePFrame(imgPF)">
<td class="VerticalLine">
</td>
<td>
<img id="imgPF" src="../Images/icon_expand.png" alt="(Show Details...)"
onload="ProductFrameHide(this)"/>
<div id="divClientProducts" runat="server"
style="float:left;font-family:Calibri;top:1%;left:25%;position:relative;font-size:13px;
color:Gray;text-align:center;">
C<br />
L<br />
I<br />
E<br />
N<br />
T<br />
<br />
P<br />
R<br />
O<br />
D<br />
U<br />
C<br />
T<br />
S<br />
</div>
</td>
<td class="VerticalLine">
</td>
</tr>
</table>
</div>
</div>
</td>

<td>
&nbsp;
</td>
</tr>
</table>
</div>
<div id="divTransactionDesktop" style="float:left;width:600px; height:100px;" >
<asp:UpdatePanel ID="updatePanel" runat="server" UpdateMode="conditional"       ChildrenAsTriggers="false">
<ContentTemplate>
 <asp:PlaceHolder ID="MainFrameHolder" runat="server"></asp:PlaceHolder>
</ContentTemplate>
</asp:UpdatePanel>
<asp:HiddenField ID="hdnRowValue" runat ="server" Value="0" />
</div>

 </td>
 </tr>
 </table>
 </asp:Panel>
 </div>
 <asp:HiddenField ID="hdnLastFocus" runat="server" />
 <asp:HiddenField ID="hdnKeyMapping" runat="server" />
 </asp:Panel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:00:59.213

I found a solution for overlapping of panels in IE7\. It was the height attribute which made a difference. Removing the height attribute or mentioning the exact value in pixels, solves this problem.

# postgresql - ST_GeomFromText 比提供直接几何更好吗？

> ID：10086684
> 
> 赞同：3
> 
> 时间：2012-04-10T10:03:12.347
> 
> 标签：postgresql, postgis

我最近一直在使用 postgis，在我的查询中，如果我使用 ST_GeomFromText，它的执行速度比运行子查询来获取 geom 更快。

我认为 ST_GeomFromText 会更贵，但是在每次我更快地获得结果时运行多次测试后，我的问题这背后有什么解释吗？因为对我来说，直接在子查询中获取 geom 比将 geom 作为文本然后添加为 GeomFromText 更好。

谢谢，萨拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T01:29:39.053

你的问题是问题不同。ST_GeomFromText 将是一个不可变函数，因此输出仅取决于输入。这意味着规划器可以在查询开始时执行一次。运行子查询意味着您必须查找几何，这意味着磁盘访问等。首先，您有一点 CPU 活动，为查询执行一次，然后您有磁盘查找。

所以答案在一定程度上取决于你用它做什么。通常，您可以假设优化器将处理诸如输入类型转换之类的事情，这些事情不依赖于设置，非常好。

这样想吧。

```
SELECT * FROM mytable WHERE my_geom = ST_GeomFromText(....); 
```

这将转换为类似以下伪代码的内容：

```
 private_geom = ST_GeomFromText(....);
 SELECT * FROM mytable WHERE my_geom = private_geom; 
```

然后该查询被计划和执行。

显然，您不想仅仅为了避免查询中的查找而添加往返行程，但是在您知道几何形状的情况下，您不妨`ST_GeomFromText(....)`在查询中指定它。

# c# - 使用微 ORM 时的最佳策略？

> ID：10086685
> 
> 赞同：12
> 
> 时间：2012-04-10T10:03:20.723
> 
> 标签：c#, orm, dapper, petapoco, massive

我开始使用 PetaPOCO 和 Dapper，它们都有自己的局限性。但相反，它们比实体框架快如闪电，我倾向于放开它的限制。

我的问题是：是否有任何 ORM 可以让我们具体定义一对多、多对一和多对多关系？Dapper.Net 和 PetaPOCO 都采用黑客式的方式来伪造这些关系，而且当您可能有 5-6 个连接时，它们甚至不能很好地扩展。如果没有一个微型 ORM 可以让我们处理它，那么我的第二个问题是我是否应该放弃这些微型 ORM 在定义关系方面不是很好的事实，并为每种类型创建一个新的 POCO 实体我将执行的包含这些类型的多连接的查询？这可以很好地扩展吗？

我希望我的问题很清楚。如果没有，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T07:39:55.497

我通常遵循这些步骤。

1.  我创建视图模型的方式代表了我想在视图中显示的确切数据和格式。
2.  我通过 PetaPoco 直接从数据库查询到我的视图模型。

在我的分支中，我有一个

`T SingleInto<T>(T instance, string sql, params object[] args);`

该方法采用现有对象并可以将列直接映射到按名称匹配的对象上。这非常适合这种情况。

如果需要，可以在这里找到我的分支。 [https://github.com/schotime/petapoco/](https://github.com/schotime/petapoco/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T18:55:00.897

> 当您可能有 5-6 个连接时，它们甚至不能很好地扩展

是的，他们没有，但这是一件好事，因为当您要构建的系统开始变得复杂时，您可以自由地进行您想要的连接，而不会造成性能损失或头痛。

是的，当我不需要使用 Linq2SQL 编写所有这些 JOINS 时，我很怀念，但后来我创建了一个简单的工具来编写通用连接，这样我就可以获得任何实体的基本 SQL，然后我可以从那里构建。

例子：

```
[TableName("Product")]
[PrimaryKey("ProductID")]
[ExplicitColumns]
public class Product {
    [PetaPoco.Column("ProductID")]
    public int ProductID { get; set; }

    [PetaPoco.Column("Name")]
    [Display(Name = "Name")]
    [Required]
    [StringLength(50)]
    public String Name { get; set; }

            ...
            ...

    [PetaPoco.Column("ProductTypeID")]
    [Display(Name = "ProductType")]
    public int ProductTypeID { get; set; }

    [ResultColumn]
    public string ProductType { get; set; }

            ...
            ...

    public static Product SingleOrDefault(int id) {
        var sql = BaseQuery();
        sql.Append("WHERE Product.ProductID = @0", id);
        return DbHelper.CurrentDb().SingleOrDefault<Product>(sql);
    }
    public static PetaPoco.Sql BaseQuery(int TopN = 0) {
        var sql = PetaPoco.Sql.Builder;
        sql.AppendSelectTop(TopN);
        sql.Append("Product.*, ProductType.Name as ProductType");
        sql.Append("FROM Product");
        sql.Append("    INNER JOIN ProductType ON Product.ProductoTypeID = ProductType.ProductTypeID");
        return sql;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-06T16:00:13.987

QueryFirst在这里[有](https://visualstudiogallery.msdn.microsoft.com/eaf390af-afc1-4994-a442-ec95923dafcb)帮助吗？您可以获得微规则的速度，每个错误 - 编译时错误的额外舒适度，以及您的查询及其输出的智能感知。您按照上帝的意图定义 SQL 中的联接。如果输入连接条件真的让您烦恼，[那么 DBForge](https://www.devart.com/dbforge/sql/studio/)可能是答案，因为您使用的是 SQL，这些工具是兼容的，并且您不会被锁定。

# snmp - 用于开发 SNMP 管理器的库/API

> ID：10086686
> 
> 赞同：2
> 
> 时间：2012-04-10T10:03:25.090
> 
> 标签：snmp

我是 SNMP 新手。我必须培养一个经理。我一直在寻找如何为经理编程。我遇到过 WinSNMP、SNMP++ 和 Net-SNMP。Net-SNMP 的优点是它可以转换来自 MIB 的陷阱内容（它可以解析 MIB）。但是，Net-SNMP 会是开发管理器的一个不错的库选择吗？我想知道使用 snmptrapd 作为开发经理的基础是否是个好主意。目前我专注于接收陷阱，但最终我也必须为其他人编程（获取，设置，...）。

如何为经理编程的一般大纲是什么？我已经阅读 SNMP 数周了，但仍然没有清楚地了解如何去做。

任何帮助将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T22:29:31.203

您需要哪种工具包很大程度上取决于您的最终目标和首选语言（例如，C 与 C++）。确保你得到一个支持 SNMPv3 的设备，本机 windows 库没有（但是 mg-soft 和 snmp 研究的实现有）。最终，如果您希望使用 winsnmp API 在 Windows 上支持 SNMPv3，您可能需要付费。

Net-SNMP 和 SNMP++ 都是备受推崇的开放库。Net-SNMP 在部署方面几乎垄断了市场，并且在除 windows 之外的每个操作系统上都预安装或轻松可用（它也可以正常工作，但 MS 只是不为您打包）。

如果您想接收陷阱，Net-SNMP 的 snmptrapd 无疑是一个简单的起点，它提供了一些非常简单的方法来通过可扩展命令（请参阅 snmptrapd.conf 手册页以帮助您开始）或通过 C（请参阅apps/snmptrapd*.c 文件用于一些示例 C 注册）。

要开始使用 Net-SNMP 和编程传出管理操作，您应该从有关编写管理应用程序的[教程开始。](http://www.net-snmp.org/wiki/index.php/Tutorials#Coding_Tutorials)如果您的管理应用程序要同时与多个主机通信，请确保您获得了一个支持异步的工具包（请参阅上面链接中的第二项）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-29T07:11:27.700

还有来自 Sun microsyatem 的 JDMK 5.1 API，开发 SNMP 代理和管理器非常容易。

# c# - 通过服务器端 C# 控制台使用 telnet 查找特定字符串

> ID：10086689
> 
> 赞同：-1
> 
> 时间：2012-04-10T10:03:35.747
> 
> 标签：c#, sockets, telnet

我编写了这段代码来检查文件中的特定字符串。现在它检查字符串。但是我怎样才能将回复说“它存在”发回给客户呢？服务器端程序应该有所有的代码。它还接受多个客户端。

**该程序的程序如下**

基本上，如果客户想要检查文件中是否有特定的字符串（单词），他会通过 telnet 上的端口连接此代码。他输入他想要搜索的字符串（在 telnet 上）并将其发送到服务器端。这个服务器端程序会从文件中为他检查。如果它存在，它会向客户端发送一条消息，说“文件中存在字符串”，如果不存在，它应该发送一条消息说“它不是”。

搜索字符串（“hello”）在这个程序中。如何使客户端能够从客户端（telnet）搜索它？这是我得到很多帮助和教程的地方。有人可以帮帮我吗？

> **已编辑 - 我已更改代码，以便将回复发送回客户端。我现在需要知道的是，我怎样才能让客户端通过客户端（telnet）搜索（输入他想要搜索的单词）？任何帮助将不胜感激。我也更新了我的代码。**

谢谢你。

```
class Program
{
    static void Main(string[] args)
    {
        IPAddress ipad = IPAddress.Parse("127.0.0.1");
        TcpListener serversocket = new TcpListener(ipad, 8888);
        TcpClient clientsocket = default(TcpClient);
        Byte[] bytes = new Byte[256];
        serversocket.Start();

        Console.WriteLine(">> Server Started");
        while(true)
        {
            clientsocket = serversocket.AcceptTcpClient();
            Console.WriteLine("Accepted Connection From Client");

            LineMatcher lm = new LineMatcher(clientsocket);
            Thread thread = new Thread(new ThreadStart(lm.Run));
            thread.Start();
            Console.WriteLine("Client connected");
        }

        Console.WriteLine(" >> exit");
        Console.ReadLine();
        clientsocket.Close();
        serversocket.Stop();
    }
}

public class LineMatcher
{
    public string fileName = "c:/myfile2.txt";
    private TcpClient _client;

    public LineMatcher(TcpClient client)
    {
        _client = client;
    }

    public void Run()
{
    byte[] data = new byte[256];
    NetworkStream strm = _client.GetStream();
    try
    {
        using (var r = new StreamReader("c:/myfile2.txt"))
        {

            string line = "";
            bool done = false;

            int lineNumber = 0;
            String s = r.ReadToEnd();

            ASCIIEncoding encoder = new ASCIIEncoding();
            while (String.IsNullOrEmpty(s))
            {
                data = encoder.GetBytes("There is no data in the file.");
                Console.WriteLine("There is no data in the file.");
            }
            if (s.IndexOf("hello", StringComparison.CurrentCultureIgnoreCase) >= 0)
            {
                data = encoder.GetBytes("It is Present.");

            }
            else
            {
                data = encoder.GetBytes("It is not Present");
            }
        }
    }
    catch (Exception ex)
    {
        Console.Error.WriteLine(ex.ToString());
    }

    strm.Write(data, 0, data.Length);
    strm.Flush();
    Console.WriteLine("Closing client");
    _client.Close();
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T05:51:56.490

您的客户端应用程序将只能搜索一次。这是因为在执行搜索后，您关闭了连接。

```
Console.WriteLine("Closing client");
_client.Close(); 
```

如果您希望连接保持打开状态，则需要包含一个循环以确保您返回到`LineMatcher`课程的开头重新搜索。

我不检查`IndexOf`这个字符串，而是简单地使用该`Contains`方法。虽然`IndexOf`旨在查找子字符串在字符串中的位置，但`Contains`其构建的特定目的是简单地检查子字符串是否存在。请注意，这*不*区分大小写。

```
else if (s.Contains("HTTP"))
{ 
```

我强烈建议您首先让搜索应用程序作为一个独立的应用程序运行，然后编写一个 telnet 服务器来启动您的原始应用程序。这是两个独立的功能，您会发现单独测试它们要容易得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T06:47:02.387

我解决了。:) 我就是这样做的。有什么改进的建议吗？

```
namespace ServerSideApplication
{
    class Program
    {
     static void Main(string[] args)
      {
        TcpListener socketListener = new TcpListener(8888);
        TcpClient netClient = default(TcpClient);
        StreamReader sr;
        StringBuilder sb = new StringBuilder();

        socketListener.Start();
        sr = new StreamReader("c:\\test.txt");
        sb.Append(sr.ReadToEnd());
        while (true)
        {
            netClient = socketListener.AcceptTcpClient();
            Console.WriteLine("Accepted Connection From Client" + Environment.NewLine + "Client connected");
            ServerSide ss = new ServerSide();
            ss.startServerSide(netClient, sb);
        }
        socketListener.Stop();
    }
}

class ServerSide
{

    TcpClient netClient;
    StringBuilder sb;

    public void startServerSide(TcpClient netClient, StringBuilder sb)
    {
        this.netClient = netClient;
        this.sb = sb;
        Thread thread = new Thread(processRequest);
        thread.Start();
    }
    private void processRequest()
    {
        byte[] data = new byte[4096];
        int bytesRead;
        NetworkStream strm = netClient.GetStream();
        bytesRead = 0;
            try
            {

                NetworkStream ns = netClient.GetStream();

                string clientChar = "", s = "";
                do
                {
                    bytesRead = ns.Read(data, 0, (int)data.Length);
                    clientChar = Encoding.ASCII.GetString(data).Replace("\0", "");
                    s += clientChar;
                } while (clientChar != Environment.NewLine);

                s = s.Trim();

                ASCIIEncoding encoder = new ASCIIEncoding();

                if (String.IsNullOrEmpty(s))
                {
                    data = encoder.GetBytes("There is no data in the file.");
                    Console.WriteLine("There is no data in the file.");
                }

                if (sb.ToString().Contains(s))
                {
                    data = encoder.GetBytes("It Is Present In The File.");
                }
                else
                {
                    data = encoder.GetBytes("It Is Not Present In The File.");
                }
                strm.Write(data, 0, data.Length);
                strm.Flush();
                Console.WriteLine("Closing client");
                netClient.Close();
            }
            catch (Exception ex)
            {
                Console.Error.WriteLine(ex.ToString());
            }
    }
} 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T11:23:43.453

而不是`if (s==null)`，您应该检查字符串是否包含该单词。非常有创意，我们可以像这样检查单词“word”：`if (s.IndexOf("word") >= 0)`在其中搜索“word”的位置`s`并返回索引。在 C# 中，索引始终从 0 开始。如果字符串“word”不包含在您的文件字符串中，它将返回 -1。因此，如果包含该单词，则该`if`语句将返回`true`，或者`false`如果不包含。

将`if`其视为仅采用*一个*参数的语句。该参数是`true`or `false`。The`(s==null)`是一个表达式，它返回值`true`或`false`由 if 语句使用。

但是，这将不起作用，例如，如果文件读取：`THIS IS A WORD`，因为“word”不等于“WORD”。您可以通过使用不区分大小写的比较来解决此问题，如下所示：

```
if(s.IndexOf("word", StringComparison.CurrentCultureIgnoreCase) >= 0) {
  // contains "word"
} else {
  // does not contain "word"
} 
```

看看以下内容以供参考

*   [http://msdn.microsoft.com/en-us/library/ms228362(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms228362(v=vs.80).aspx)
*   [http://msdn.microsoft.com/en-us/library/system.string.aspx](http://msdn.microsoft.com/en-us/library/system.string.aspx)

# jquery - jQuery 网格对话框覆盖

> ID：10086691
> 
> 赞同：0
> 
> 时间：2012-04-10T10:03:46.297
> 
> 标签：jquery, internet-explorer, grid

我尝试使用 struts 2 jquery-plugin 创建 2 个网格。当我尝试预览结果时，第一个弹出对话框覆盖另一个网格（**仅在 IE 中发现问题**），有没有解决此问题的解决方案？

```
<sjg:grid
    id="masterTable"
    caption="Companys"
    dataType="json"
    href="%{ajaxTest}"
    pager="true"
    gridModel="companys"
    rowList="10,15,20"
    rowNum="15"
    rownumbers="false"
    navigatorDelete="true"
    navigatorView="true"
    multiselect="false"
    onSelectRowTopics="masterSelect"

    editurl="%{modifyCompanyUrl}"

    navigator="true"
    navigatorAdd="true"
    navigatorEdit="true"
    navigatorDelete="true"
    navigatorRefresh="false"
    navigatorSearch="false"
    navigatorView="false"

>
    <sjg:gridColumn name="companyId" index="companyId" key="true" title="Company Id" sortable="true" editable="true" edittype="text" required="true" />
    <sjg:gridColumn name="name" index="name" title="Name" sortable="true" editable="true" edittype="text" />
    <sjg:gridColumn name="address1" index="address1" title="Address Line 1" sortable="true" editable="true" edittype="text" />
    <sjg:gridColumn name="address2" index="address2" title="Address Line 2" sortable="true" editable="true" edittype="text" />
    <sjg:gridColumn name="address3" index="address3" title="Address Line 3" sortable="true" editable="true" edittype="text" />
    <sjg:gridColumn name="address4" index="address4" title="Address Line 4" sortable="true" editable="true" edittype="text" />

    <sjg:gridColumn name="country" index="country" title="Country" sortable="true" editable="true" edittype="select" editrules="{ required: true }" editoptions="{value: countryList}" />

    <sjg:gridColumn name="fax" index="fax" title="Fax" sortable="true" editable="true" edittype="text" />
    <sjg:gridColumn name="email" index="email" title="Email" sortable="true" editable="true" edittype="text" />
</sjg:grid>    

<sjg:grid
    id="detailTable"
    caption="Staffs"
    dataType="json"
    href="%{detailJsonUrl}?companyId=-1"
    pager="true"
    gridModel="staffs"
    rowList="10,15,20"
    rowNum="15"
    rownumbers="false"
    navigatorDelete="true"
    navigatorView="true"
    multiselect="false"

    loadingText="Loading"

    editurl="%{modifyStaffUrl}"

    navigator="true"
    navigatorAdd="true"
    navigatorEdit="true"
    navigatorDelete="true"
    navigatorRefresh="false"
    navigatorSearch="false"
    navigatorView="false"
>
    <sjg:gridColumn name="staffId" index="staffId" key="true" title="Staff ID" sortable="true" editable="true" edittype="text" />
    <sjg:gridColumn name="title" index="title" title="Title" sortable="true" editable="true" edittype="text" />
    <sjg:gridColumn name="name" index="name" title="Name" sortable="true" editable="true" edittype="text" />
    <sjg:gridColumn name="age" index="age" title="Age" sortable="true" editable="true" edittype="text" />
    <sjg:gridColumn name="email" index="email" title="Email" sortable="true" editable="true" edittype="text" />
</sjg:grid> 
```

结果：

![在此处输入图像描述](../Images/7715b25986ed1135f60cb65bdb010637.png)

# javascript - 调整 div 元素的大小

> ID：10086693
> 
> 赞同：87
> 
> 时间：2012-04-10T10:04:01.050
> 
> 标签：javascript, jquery

jQuery 有`resize()`- 事件，但它只适用于窗口。

```
jQuery(window).resize(function() { /* What ever */ }); 
```

这很好用！但是当我想将事件添加到 div 元素时，它不起作用。

例如

```
jQuery('div').resize(function() { /* What ever */ }); 
```

我想在 div 元素的大小发生变化时启动回调。我不想启动一个可调整大小的事件——只是一个检查 div 元素大小是否改变的事件。

有什么解决方案可以做到这一点吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-10T10:08:10.440

`DIV`不会触发`resize`事件，因此您将无法完全按照您的编码进行操作，但您可以查看[监控 DOM 属性](http://james.padolsey.com/javascript/monitoring-dom-properties/)。

如果您实际上正在使用可调整大小之类的东西，这是 div 改变大小的唯一方法，那么您的调整大小插件可能会实现自己的回调。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-09-27T17:07:03.967

我只对元素的宽度发生变化时的触发器感兴趣（我不关心高度），所以我使用不可见的 iframe 元素创建了一个执行此操作的 jquery 事件。

```
$.event.special.widthChanged = {
  remove: function() {
      $(this).children('iframe.width-changed').remove();
  },
  add: function () {
      var elm = $(this);
      var iframe = elm.children('iframe.width-changed');
      if (!iframe.length) {
          iframe = $('<iframe/>').addClass('width-changed').prependTo(this);
      }
      var oldWidth = elm.width();
      function elmResized() {
          var width = elm.width();
          if (oldWidth != width) {
              elm.trigger('widthChanged', [width, oldWidth]);
              oldWidth = width;
          }
      }

      var timer = 0;
      var ielm = iframe[0];
      (ielm.contentWindow || ielm).onresize = function() {
          clearTimeout(timer);
          timer = setTimeout(elmResized, 20);
      };
  }
} 
```

它需要以下 css ：

```
iframe.width-changed {
    width: 100%;
    display: block;
    border: 0;
    height: 0;
    margin: 0;
} 
```

你可以在这里看到它的作用[widthChanged fiddle](http://jsfiddle.net/333gu11u/)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2015-06-10T16:08:31.367

```
// this is a Jquery plugin function that fires an event when the size of an element is changed
// usage: $().sizeChanged(function(){})

(function ($) {

$.fn.sizeChanged = function (handleFunction) {
    var element = this;
    var lastWidth = element.width();
    var lastHeight = element.height();

    setInterval(function () {
        if (lastWidth === element.width()&&lastHeight === element.height())
            return;
        if (typeof (handleFunction) == 'function') {
            handleFunction({ width: lastWidth, height: lastHeight },
                           { width: element.width(), height: element.height() });
            lastWidth = element.width();
            lastHeight = element.height();
        }
    }, 100);

    return element;
};

}(jQuery)); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-05-08T15:58:32.183

我创建了 jquery 插件[jquery.resize](https://github.com/jcubic/jquery.resize)，如果支持，它使用 resizeObserver 或基于[marcj/css-element-queries](https://github.com/marcj/css-element-querie)滚动事件的解决方案，没有 setTimeout/setInterval。

你只用

```
 jQuery('div').on('resize', function() { /* What ever */ }); 
```

或作为调整器插件

```
jQuery('div').resizer(function() { /* What ever */ }); 
```

我为 jQuery 终端创建了这个并提取到单独的 repo 和 npm 包中，但同时我切换到隐藏的 iframe，因为如果元素在 iframe 内，我在调整大小时遇到​​问题。我可能会相应地更新插件。您可以[在 jQuery 终端源代码中查看基于 iframe 的调整大小插件](https://github.com/jcubic/jquery.terminal/blob/44b4febe232f42dedaa9ea0fda0258905d17075e/js/jquery.terminal-src.js#L743)。

**编辑**：新版本使用 iframe 并调整其窗口对象的大小，因为当页面位于 iframe 内时，以前的解决方案不起作用。

**EDIT2**：因为后备使用 iframe，您不能将其与表单控件或图像一起使用，您需要将其添加到包装器元素中。

**EDIT3:** : 有更好的解决方案使用[resizeObserver polyfill](https://www.npmjs.com/package/resize-observer-polyfill)，它使用突变观察器（如果不支持 resizeObserver），甚至在 IE 中也可以工作。它也有 TypeScript 类型。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-04-10T10:11:38.447

那这个呢：

```
divH = divW = 0;
jQuery(document).ready(function(){
    divW = jQuery("div").width();
    divH = jQuery("div").height();
});
function checkResize(){
    var w = jQuery("div").width();
    var h = jQuery("div").height();
    if (w != divW || h != divH) {
        /*what ever*/
        divH = h;
        divW = w;
    }
}
jQuery(window).resize(checkResize);
var timer = setInterval(checkResize, 1000); 
```

顺便说一句，我建议您在 div 中添加一个 id 并将 $("div") 更改为 $("#yourid")，它会更快，并且以后添加其他 div 时它不会中断

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-09-04T17:16:07.763

对于今年发布的基本 JavaScript 和 jQuery，有一个非常好的、易于使用、轻量级（使用本机浏览器事件进行检测）的插件。它表现完美：

[https://github.com/sdecima/javascript-detect-element-resize](https://github.com/sdecima/javascript-detect-element-resize)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-04-10T10:07:16.107

是的，仅支持窗口，但您可以使用插件：[http ://benalman.com/projects/jquery-resize-plugin/](http://benalman.com/projects/jquery-resize-plugin/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-08-31T03:24:22.943

现在存在[Resize Observer](https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver)

你可以像这样使用它：

```
const resizeObserver = new ResizeObserver((entries) => {
  entries.forEach(console.log);
})
resizeObserver.observe(document.getElementById("ExampleElement")); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-07-29T15:11:24.163

对于谷歌地图集成，我正在寻找一种方法来检测 div 的大小何时发生变化。由于谷歌地图总是需要适当的尺寸，例如宽度和高度才能正确渲染。

我想出的解决方案是一个事件的委托，在我的例子中是一个标签点击。当然，这可能是一个窗口调整大小，想法保持不变：

```
if (parent.is(':visible')) {
    w = parent.outerWidth(false);
    h = w * mapRatio /*9/16*/;
    this.map.css({ width: w, height: h });
} else {
    this.map.closest('.tab').one('click', function() {
        this.activate();
    }.bind(this));
} 
```

`this.map`在这种情况下是我的地图 div。由于我的父母在加载时不可见，因此计算出的宽度和高度为 0 或不匹配。通过使用`.bind(this)`，我可以将脚本执行 ( `this.activate`) 委托给事件 ( `click`)。

现在我相信这同样适用于调整大小事件。

```
$(window).one('resize', function() {
    this.div.css({ /*whatever*/ });
}.bind(this)); 
```

希望它可以帮助任何人！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-06-12T08:22:33.310

试试这个函数（它可能不仅适用于 div）：

```
function resized(elem, func = function(){}, args = []){
    elem = jQuery(elem);
    func = func.bind(elem);
    var h = -1, w = -1;
    setInterval(function(){
        if (elem.height() != h || elem.width() != w){
            h = elem.height();
            w = elem.width();
            func.apply(null, args);
        }
    }, 100);
} 
```

你可以像这样使用它

```
resized(/*element*/ '.advs-columns-main > div > div', /*callback*/ function(a){
    console.log(a);
    console.log(this); //for accessing the jQuery element you passed
}, /*callback arguments in array*/ ['I\'m the first arg named "a"!']); 
```

**更新：** 您还可以使用更先进的观察者（它可以用于任何对象，不仅是 DOM 元素）：

```
function changed(elem, propsToBeChanged, func = function(){}, args = [], interval = 100){
        func = func.bind(elem);
        var currentVal = {call: {}, std: {}};
        $.each(propsToBeChanged, (property, needCall)=>{
            needCall = needCall ? 'call' : 'std';
            currentVal[needCall][property] = new Boolean(); // is a minimal and unique value, its equivalent comparsion with each other will always return false
        });
        setInterval(function(){
            $.each(propsToBeChanged, (property, needCall)=>{
                try{
                    var currVal = needCall ? elem[property]() : elem[property];
                } catch (e){ // elem[property] is not a function anymore
                    var currVal = elem[property];
                    needCall = false;
                    propsToBeChanged[property] = false;
                }
                needCall = needCall ? 'call' : 'std';
                if (currVal !== currentVal[needCall][property]){
                    currentVal[needCall][property] = currVal;
                    func.apply(null, args);
                }
            });
        }, interval);
    } 
```

去尝试一下：

```
var b = '2',
    a = {foo: 'bar', ext: ()=>{return b}};
changed(a, {
// prop name || do eval like a function?
    foo:        false,
    ext:        true
}, ()=>{console.log('changed')}) 
```

每次直接更改 b、a.foo 或 a.ext 时，它都会记录 'changed'

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-01-16T05:57:12.740

您可以根据屏幕大小更改文本或内容或属性： HTML：

```
<p class="change">Frequently Asked Questions (FAQ)</p>
<p class="change">Frequently Asked Questions </p> 
```

Javascript：

```
<script>
const changeText = document.querySelector('.change');
function resize() {
  if((window.innerWidth<500)&&(changeText.textContent="Frequently Asked Questions (FAQ)")){
    changeText.textContent="FAQ";
  } else {
    changeText.textContent="Frequently Asked Questions (FAQ)";
  }
}
window.onresize = resize;
</script> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-12-22T12:19:22.567

```
document.addEventListener('transitionend', function(e) {
  if ($(e.target).is("div")) {
    $("div").text("width: "+$("div").width());
  }
});
$("div").css({"width":"150px"});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div style="width: 100px;transition-delay: 0.000000001s;">width: 100</div>
```

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2019-07-18T13:08:49.100

如果您只想调整 div 本身的大小，则需要以 css 样式指定。您需要添加**溢出**和**调整大小属性**。

下面是我的代码片段

```
#div1 {
        width: 90%;
        height: 350px;
        padding: 10px;
        border: 1px solid #aaaaaa;
        overflow: auto;
        resize: both;
    }

<div id="div1">

</div> 
```

# c# - IndexOutOfRangeException - Windows Phone (C#)

> ID：10086696
> 
> 赞同：1
> 
> 时间：2012-04-10T10:04:18.840
> 
> 标签：c#, windows-phone-7.1

我对 Windows Phone 和 C# 也有所了解。我发现我的 Coloring() 函数中有一个 IndexOutOfRangeException：

```
public void Coloring()
    {
        szinek_base.Add(Color.FromArgb(255, 0, 171, 169));
        szinek_base.Add(Color.FromArgb(255, 140, 191, 38));
        szinek_base.Add(Color.FromArgb(255, 160, 80, 0));
        szinek_base.Add(Color.FromArgb(255, 230, 113, 184));
        szinek_base.Add(Color.FromArgb(255, 240, 150, 9));
        szinek_base.Add(Color.FromArgb(255, 27, 161, 226));
        szinek_base.Add(Color.FromArgb(255, 229, 20, 0));
        szinek_base.Add(Color.FromArgb(255, 51, 153, 51));
        int remove;
        Color szin = new Color();
        Random generator = new Random();
        List<int> lapok = new List<int>();
        for (int l = 0; l < 16; l++)
        {
            lapok.Add(l);
        }

        for (int i = 0; i < 8; i++)
        {   
                szin = szinek_base[generator.Next(0, szinek_base.Count)]; 

                remove = lapok[generator.Next(0, lapok.Count)]; 
                szinek[remove] = szin;
                lapok.Remove(remove);
                szinek_base.Remove(szin);

                remove = lapok[generator.Next(0, lapok.Count)];
                szinek[remove] = szin;
                lapok.Remove(remove);
                szinek_base.Remove(szin);
        }
    } 
```

使用 try-catch 我还发现第二个 for() 循环包含错误。但是，如果我将块分成一半并使用 try-catch，它不会发现错误，也不会在第一部分中找到第二部分。顺便说一下，这段代码在 Windows 7 下作为记忆游戏的一部分运行良好，我没有想法。感谢您的帮助，并对语法和其他错误感到抱歉，我还不知道 StackOverflow 协议。

编辑：忘了提，主命名空间包含它们：

```
public List<Color> szinek_base = new List<Color>();
Color[] szinek = new Color[8]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T10:35:08.400

**从评论和后来的编辑：**

*szinek*它似乎是一个包含 8 个元素的数组，但*lapok*是一个包含 16 个元素的列表。

当***lapok.Count***被传递给 Random 构造函数的第二个参数时，这意味着它可能会生成大于 8 的值，并且确实会引发*IndexOutOfRangeException*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T10:08:54.093

**编辑**

我很抱歉，最初的答案是不正确的。正如 Adrian 强调的那样，由于使用了不正确的列表计数属性来突出显示可移动项目，因此引发了异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T10:38:18.043

请忽略我之前的回答。我找到了实际问题...

您可以根据随机变量设置删除，该随机变量可以在 0 到 16 之间的任意位置。

然后，您尝试从 szinek 中删除元素“remove”，该元素可能只有 8 号。

# c# - 如何将实体框架与 Oracle 数据库一起使用

> ID：10086700
> 
> 赞同：0
> 
> 时间：2012-04-10T10:04:38.240
> 
> 标签：c#, silverlight-4.0, entity-framework-4.1, oracle11g

我是 Oracle 的初学者，我想使用 Entity Framework 连接到我的 Oracle 数据库。

我首先安装了 Oracle 11g R2 并得到[了这个](http://www.oracle.com/technetwork/database/windows/downloads/index-101290.html)，然后我安装了 NetManager 并创建了新的服务名称

![在此处输入图像描述](../Images/da37cabaf7d437a1a13c16e76dbf8a76.png)

然后，我转到 Visual Studio 并创建一个新模型，但是当我想创建一个连接时，它给了我一条错误消息。

![在此处输入图像描述](../Images/80fd987661b14e11405750c575561d11.png)

请帮我。谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:32:10.917

我曾经发生过一次。在您的 Oracle 主目录中，目录 C 或 中必须有两个文件夹`D:\app\user\product\11.2.0`：

文件夹的名称必须是这样的：

```
client_1   and    dbhome_1 
```

里面一定有`tnsnames.ora`。 `\client_1\Network\Admin\Sample`如果没有，请创建一个。然后首先删除此文件中的所有文本并将其复制到该文件：

```
orcl=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=172.16.77.31)(PORT=1521)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=orcl))) 
```

相反 orcl 你将编写你的数据源。也用于主机和端口号。和服务名称。

它必须工作。如果不复制`tnsnames.ora`并`listener.ora`到`\client_1\Network\Admin`.

并再次测试。

# paypal - 贝宝-带信用卡的订阅按钮

> ID：10086703
> 
> 赞同：0
> 
> 时间：2012-04-10T10:04:48.023
> 
> 标签：paypal, subscription, paypal-subscriptions

我在我的网站上使用 PayPal 订阅按钮。

是否可以允许用户在没有贝宝帐户的情况下使用信用卡订阅（通过贝宝订阅按钮）？

我知道捐赠按钮允许它。

有任何想法吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T02:16:26.813

通常，不会。
但是，在美国和英国，您可以注册 PayPal“增强型定期付款”（美国）或“高级服务”（英国），这样您就可以做到这一点。

这是英国注册页面的链接：[https ://www.paypal-business.co.uk/premiumservices/index.htm](https://www.paypal-business.co.uk/premiumservices/index.htm)

# facebook - Facebook 搜索应用重定向

> ID：10086704
> 
> 赞同：1
> 
> 时间：2012-04-10T10:04:58.150
> 
> 标签：facebook, search, redirect, iframe-app

我最近为 Facebook 内部构建了一个 iframe 应用程序，并且仅适用于 facebook。所以不需要在 Facebook 之外调用 iframe。我现在唯一的问题是，只要我搜索这样的应用程序：http: [//i44.tinypic.com/30rla83.png](http://i44.tinypic.com/30rla83.png)

我收到以下警告：http: [//i43.tinypic.com/2uh1w20.png](http://i43.tinypic.com/2uh1w20.png)

我似乎不知道如何配置应用程序，因此它不会重定向，而是直接转到应用程序本身。唯一设置的值是“网站”和“页面选项卡”值。当我为“Facebook 上的应用程序”设置值时，iframe 会被 Facebook 包含在游戏/应用程序格式中（右侧栏中的 Facebook 游戏），而不是 Facebook 页面应用程序内容格式。

当我删除或调整“网站”值并使用 Facebook 搜索时，我收到应用程序配置不正确的错误。它现在设置为 Facebook 之外的完整地址，因为当我将其配置为 Facebook 应用程序 URL 时，我得到了同样的错误。

我确定的唯一值是“页面选项卡”值。

在此先感谢各位，我自己似乎无法找到答案..

**更新：原来“你被重定向”页面只出现在我的 Facebook 个人资料中！可能是因为我是 Facebook 主页管理员或应用程序创建者？无论如何，就我而言；结案并解决问题:)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:14:23.650

哪些选项适用于 Facebook 上的哪些类型的应用程序有点令人困惑 - 搜索的行为有点不直观，但这里有一些可能对您有所帮助的提示：

*   如果您的应用程序仅作为页面选项卡存在，那么搜索它并没有任何意义（理论上它可能存在于多个 Facebook 页面上）。除非您还设置了以下两个选项之一，否则这些不会显示在搜索结果中
*   如果您已将您的应用程序设置为画布应用程序，开发人员设置中的“Facebook 上的应用程序”，那么当您搜索该应用程序时，它会将您重定向到画布页面（您的 iframe 被拉入 Facebook 画布。
*   如果您已将应用设置为使用 Facebook Connect “使用 Facebook 登录我的网站”。在开发者设置中，并且您还没有将应用程序设置为画布应用程序，那么 Facebook 将假定您有一个 Facebook 外部的网络应用程序，并且搜索会将用户重定向到您的网站 url。

因此，如果您不使用 Facebook Connect（在这种情况下，您的应用不会出现在搜索结果中），您可能需要做的是从您的 Facebook 设置中删除您的网站网址，或者创建一个画布页面，这将您重定向到正确的 Facebook 页面选项卡。

# .net - 测试 System.Collections.Generic.List(of T) 类型的属性

> ID：10086709
> 
> 赞同：1
> 
> 时间：2012-04-10T10:05:30.600
> 
> 标签：.net, vb.net, list, types

我需要能够判断属性是否属于 List(of T) 类型，但目前无法判断。如果我做

```
TypeOf (UpdateTo.GetType.GetProperty(node.Name)) Is System.Collections.Generic.List(Of Object) 
```

我收到以下错误

> TypeOf (UpdateTo.GetType.GetProperty(node.Name)) 是 System.Collections.Generic.List(Of Object) 类型“System.Reflection.PropertyInfo”的表达式永远不能是“System.Collections.Generic.List(Of目的）'。

```
If xmlRequestNode IsNot Nothing Then

                'if there is at least one property to update
                If xmlRequestNode.ChildNodes.Count > 0 Then

                    'loop through each property that needs setting
                    For Each node As XmlNode In xmlRequestNode.ChildNodes

                        Try

                            'TODO: We do not want to set lists of objects. Currently we have issues where it tries to set the whole object instead of 
                            'going into the object and set each property. 
                            If UpdateTo.GetType.GetProperty(node.Name).GetType() IsNot GetType(System.Collections.Generic.List(Of Object)) Then

                                'and set it to the equivalent property on the user group model that was passed in (we don't use the node value as it would need casting and could be an object)
                                UpdateTo.GetType.GetProperty(node.Name).SetValue(UpdateTo, UpdateFrom.GetType.GetProperty(node.Name).GetValue(UpdateFrom, Nothing), Nothing)

                            End If

                        Catch ex As Exception

                            'and send details of the problem
                            Return "Could not find or set a property called " & node.Name

                        End Try

                    Next

                Else

                    'and send details of the problem
                    Return "No updates were requested"

                End If

            Else

                'and send details of the problem
                Return "No object to update from was supplied"

            End If 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:19:46.647

首先，`UpdateTo.GetType.GetProperty(node.Name).GetType()`总是返回`PropertyInfo`。我猜你的意思是`UpdateTo.GetType.GetProperty(node.Name).GetPropertyType()`？

第二，`List(of T)`不是类型。`List(of String)`是一种类型，但不是 的子类`List(of Object)`。没有简单的方法可以知道给定类型是否是某种`List(of T)`. 也许您应该简单地测试属性的类型是否实现`IList`。

# build-server - TFS 构建代理已停止

> ID：10086710
> 
> 赞同：2
> 
> 时间：2012-04-10T10:05:32.403
> 
> 标签：build-server

我有一个正在运行的构建机器的问题，代理突然不想启动。如果启动本地控制器，它是遥控器的一部分，用于解决此问题。症状是，代理初始化正确（显示“就绪”），但图标已停止，并且状态区域显示“BuildController 在 1 分钟内未启动。运行构建服务的 AD 帐户在另一台构建机器上工作（单独的控制器 + 构建代理）。我试过以下

*   重新安装构建服务
*   使用机器名、完全限定域名和端点地址的 IP 地址运行
*   未注册和重新注册的构建服务
*   重新启动
*   [使用脚本](http://blogs.msdn.com/b/lab_management/archive/2010/02/09/additional-upgrade-script-for-fixing-build-agent-registration.aspx)清理构建代理注册

如果我将运行构建服务的服务帐户更改为我自己的 AD 帐户，它就可以工作。但是，在我们的专用构建用户下运行会在这台特定的机器上失败，而在另一台机器上则不会。有什么建议该怎么做吗？这是事件日志中的错误：

```
Service 'Default Agent - tfs2010build1' had an exception: 
Exception Message: There was no endpoint listening at http://tfs2010build1:9191/Build/v3.0/Services/Controller/31 that could accept the message. This is often caused by an incorrect address or SOAP action. See InnerException, if present, for more details. (type EndpointNotFoundException)

Exception Stack Trace: 
Server stack trace: 
   at System.ServiceModel.Channels.HttpOutput.WebRequestHttpOutput.GetOutputStream()
   at System.ServiceModel.Channels.HttpOutput.Send(TimeSpan timeout)
   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.SendRequest(Message message, TimeSpan timeout)
   at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at Microsoft.TeamFoundation.Build.Machine.IBuildControllerService.TestConnectionFromController(String agentUri)
   at Microsoft.TeamFoundation.Build.Machine.ServiceProxies.ServiceProxy`1.<>c__DisplayClass3.<Do>b__2(T channel)
   at Microsoft.TeamFoundation.Build.Machine.ServiceProxies.ServiceProxy`1.Do[TResult](Func`2 action)
   at Microsoft.TeamFoundation.Build.Machine.BuildAgentService.<>c__DisplayClass12.<TestConnection>b__11(Object )

Inner Exception Details:

Exception Message: Unable to connect to the remote server (type WebException)
Exception Stack Trace:    at System.Net.HttpWebRequest.GetRequestStream(TransportContext& context)
   at System.Net.HttpWebRequest.GetRequestStream()
   at System.ServiceModel.Channels.HttpOutput.WebRequestHttpOutput.GetOutputStream()

Inner Exception Details:

Exception Message: No connection could be made because the target machine actively refused it 127.0.0.1:38742 (type SocketException)

Exception Stack Trace:    at System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.ServicePoint.ConnectSocketInternal(Boolean connectFailure, Socket s4, Socket s6, Socket& socket, IPAddress& address, ConnectSocketState state, IAsyncResult asyncResult, Int32 timeout, Exception& exception) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T18:51:12.837

当我被迫手动停止构建时，代理经常会遇到同样的问题。我无法为此找到任何体面的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T13:45:52.323

发现了问题。在 IE 选项下启用了代理服务器。不知道为什么构建服务在我的 AD 用户帐户而不是专用构建用户下工作，但它解决了问题。

---->>>>>更新！

所以我们有 2 台机器（B1 和 B2），每台都有 2 个代理。B1 有最初的问题，通过禁用 IE 下的代理设置来解决。昨天 B2 突然开始在 2 个代理上显示相同的症状和错误消息。代理设置未启用。虽然它确实修复了 B1，但它并不是这个特定问题的通用解决方案。保持这些构建代理运行是一项艰苦的工作 :( - TeamCity 小姐......

---->>>>再次更新！所以昨天看代理配置的时候，没有设置。然而今天早上复选框被选中。禁用代理，代理上线。很奇怪的行为！想知道 Windows 更新是否会更改这些设置...

# c - 使用 unicode 并设置 PRAGMA journal_mode 时，SqLite 数据库不会关闭

> ID：10086713
> 
> 赞同：1
> 
> 时间：2012-04-10T10:05:35.673
> 
> 标签：c, unicode, sqlite

我的 Windows 应用程序（用 C 编写）使用 SQLite（使用嵌入式合并源）来存储离线数据，并且在多字节字符集构建中没有任何问题。我现在将代码库转换为 Unicode。SQLite 非常愉快地使用 Unicode 构建运行，以 UTF-16LE 编码创建 SQLite 数据库。

不过，我遇到了一件非常奇怪的事情。如果我运行查询`PRAGMA journal_mode = DELETE`（实际上，将其设置为任何允许的值，包括`OFF`，执行相同的操作），一切都运行良好，直到代码关闭数据库，此时调用`sqlite3_close()`返回`SQLITE_BUSY`，并出现错误`"unable to close due to unfinalised statements"`。

即使我在数据库上运行的唯一查询是单个 pragma 命令，也会发生这种情况！我可以很好地运行其他 pragma（例如`"PRAGMA synchronous = NORMAL"`）和我的所有 SQL 查询，并且数据库将非常愉快地关闭；正是这个`journal_mode`编译指示导致了这种奇怪的行为，并且仅在代码的 Unicode 构建中 - 多字节构建没有显示这个问题。无论数据库是否已经存在 [在 UTF-16LE 模式下]，或者它是否在第一次打开时创建它，都会发生这种情况。

有什么想法可能是错的吗？我正在使用 SQLite 构建 v3.7.11。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T18:09:19.760

我最后发现了问题。在我自己的包装代码中。由于 sqlite 没有 unicode 等效调用`sqlite3_exec()`，我让 unicode 版本直接进入我的准备/步骤/完成的代码（当调用者想要从 SQL 查询返回数据时），但由于某种原因设置 journal_mode 杂注导致SqLite 返回一些数据，它不用于我设置的其他 pragma - 因此只有这个 pragma 有一个未最终确定的 stmt。

为了将来参考，如果你在关闭时得到 SQLITE_BUSY，你可以调用`sqlite3_next_stmt()`来获取 [next] 未完成的语句，然后`sqlite3_sql()`让它告诉你与之关联的准备好的 SQL 语句。很有用！

# migration - 我应该使用哪个 Red Gate 工具？

> ID：10086718
> 
> 赞同：1
> 
> 时间：2012-04-10T10:05:44.080
> 
> 标签：migration, continuous-integration, database-schema, redgate

我需要*`export/update schema without loosing existing data`*。我发现`Red Gate`您可能听说过两种工具：

*   `SQL Compare`;
*   `SQL Data Compare`;

其中哪一个可以帮助我解决迁移问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:10:15.550

您需要[SQL Data Compare](http://www.red-gate.com/products/sql-development/sql-data-compare/)，因为 SQL Compare 只同步模式而不是数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T23:00:40.857

这取决于变化的性质。SQL Compare 将在进行架构更改时保留您的数据，即使更改需要重建表也是如此。

但是，如果您进行更改，例如表重命名或表/列拆分，SQL 比较将无法理解“意图”，并且可能会生成与您预期不同的脚本。

解决方案是将 SQL Compare 与 SQL Source Control 及其迁移脚本功能结合使用，这使得它具有高度可定制性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T15:10:15.867

SQL 比较就足够了，如果警告是表重命名的结果，您可以简单地使用“项目设置”中的表映射选项卡告诉 SQL 比较它们是同一个表。PS我知道这篇文章很古老，但最好使用正确的工具:)

# wix - Wix - 如何防止覆盖整个目录？

> ID：10086719
> 
> 赞同：1
> 
> 时间：2012-04-10T10:05:49.987
> 
> 标签：wix, wix3.5

我有 wix 安装程序，它将一些文件复制到一些目录。每个文件都被声明为单个组件，带有一些路径 - 如果目录不存在，安装程序将创建它并将文件放置在那里。

我想要做什么：如果目录已经存在，安装程序不应该复制任何文件（即使文件不存在，也不应该复制到已经存在的目录）。

但是不可能将“从不覆盖”设置为目录，那么如何防止将新文件复制到现有目录？我可以在这里使用任何条件（例如“是否存在目录”）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:55:50.973

> 我可以在这里使用任何条件（例如“是否存在目录”）？

是的，您可以像这样使用 Condition 元素：

```
<Directory Id="FooFolder" Name="Foo">
    <Component Id="SomeId">
        <File Source="..." />
        <Condition>Not FOO_FOLDER_ALREADY_EXISTS</Condition>
    </Component>
</Directory> 
```

Windows 安装程序的[条件语句语法](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368012%28v=vs.85%29.aspx)文档中解释了可以用作条件的事物类型。

~~在这种情况下，我相信您可以像这样使用[DirectorySearch](http://wix.sourceforge.net/manual-wix3/wix_xsd_directorysearch.htm)`FOO_FOLDER_ALREADY_EXISTS`设置属性：~~

 ~~```
<Property Id="FOO_FOLDER_ALREADY_EXISTS">
    <DirectorySearch Id="FooFolderSearch" Path="[FooFolder]" />
</Property> 
```~~  ~~**编辑**：显然上面的目录搜索不起作用，因为该`[FooFolder]`属性仅在`CostFinalize`操作期间解析（请参阅[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372403%28v=vs.85%29.aspx)）。但是在此之前，目录搜索已经发生在`AppSearch`操作期间。

我不确定如何解决这个问题。它可能涉及在`CostFinalize`使用自定义操作而不是 Windows 安装程序目录搜索之后设置 FOO_FOLDER_ALREADY_EXISTS 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T17:23:11.053

关于如何避免在成本最终确定之前设置属性的时间问题，另一种可靠的处理方法是将属性写入注册表。

我相信这是解决设置属性的时间问题的最常见工作，它允许安装程序跟踪这些属性以进行卸载等......我已经使用它取得了很好的效果。

这是[Rob Mensching 撰写的一篇很好的文章，介绍](http://robmensching.com/blog/posts/2010/5/2/the-wix-toolsets-remember-property-pattern)了如何帮助您入门。~~

# ios - Core-Plot iOS - 将多个图表添加到屏幕仅每隔一个图表显示

> ID：10086722
> 
> 赞同：1
> 
> 时间：2012-04-10T10:06:01.423
> 
> 标签：ios, core-plot

我有一个带有 6 个 UIViews 的父视图，我向其中添加了我的核心绘图图表（这工作正常，但由于某种原因，每隔一个图表就会显示一次！）

```
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view from its nib.
if(!chartVC1){
    chartVC1 = [[ChartVC alloc] initWithIdentifier:@"plot1"];
    //[chartVC1 setKPlotIdentifier:@"plot1"];
    [chartVC1.view setFrame:self.Panel1.frame];
}
[self.Panel1 addSubview:chartVC1.view];

if(!chartVC3){
    chartVC3 = [[ChartVC alloc] initWithIdentifier:@"plot2"];
    [chartVC3.view setFrame:self.Panel3.frame];
}
[self.Panel3 addSubview:chartVC3.view];

if(!chartVC2){
    chartVC2 = [[ChartVC alloc] initWithIdentifier:@"plot3"];
    [chartVC2.view setFrame:self.Panel2.frame];
}

[self.Panel2 addSubview:chartVC2.view];

if(!chartVC4){
    chartVC4 =  [[ChartVC alloc] initWithIdentifier:@"plot4"];
    [chartVC4.view setFrame:self.Panel4.frame];
}
[self.Panel4 addSubview:chartVC4.view];

if(!chartVC5){
    chartVC5 =  [[ChartVC alloc] initWithIdentifier:@"plot5"];
    [chartVC5.view setFrame:self.Panel5.frame];

}
[self.Panel5 addSubview:chartVC5.view];

if(!chartVC6){
    chartVC6 = [[ChartVC alloc] initWithIdentifier:@"plot6"];
    [chartVC6.view setFrame:self.Panel6.frame];
}
[self.Panel6 addSubview:chartVC6.view];
} 
```

这是我的 ChartVC 类的一些代码

-(void)renderInLayer { CPTXYGraph *graph = [[[CPTXYGraph alloc] initWithFrame:self.view.bounds] autorelease];

```
[self addGraph:graph toHostingView:self.view];
[self applyTheme:nil toGraph:graph withDefault:[CPTTheme themeNamed:kCPTDarkGradientTheme]];

//[self setTitleDefaultsForGraph:graph withBounds:self.view.bounds];
//[self setPaddingDefaultsForGraph:graph withBounds:self.view.bounds];

graph.plotAreaFrame.paddingTop    = -20.0;
 graph.plotAreaFrame.paddingRight  = -20.0;
 graph.plotAreaFrame.paddingBottom = -20.0;
 graph.plotAreaFrame.paddingLeft      = -20.0;

graph.plotAreaFrame.plotArea.frame = self.view.bounds;

graph.backgroundColor = [[UIColor whiteColor] CGColor];
// Grid line styles
CPTMutableLineStyle *majorGridLineStyle = [CPTMutableLineStyle lineStyle];
majorGridLineStyle.lineWidth = 0.75;
majorGridLineStyle.lineColor = [[CPTColor colorWithGenericGray:0.2] colorWithAlphaComponent:0.75];

CPTMutableLineStyle *minorGridLineStyle = [CPTMutableLineStyle lineStyle];
minorGridLineStyle.lineWidth = 0.25;
minorGridLineStyle.lineColor = [[CPTColor whiteColor] colorWithAlphaComponent:0.1];

// Axes
// X axis
CPTXYAxisSet *axisSet = (CPTXYAxisSet *)graph.axisSet;
CPTXYAxis *x          = axisSet.xAxis;
x.labelingPolicy              = CPTAxisLabelingPolicyAutomatic;
x.orthogonalCoordinateDecimal = CPTDecimalFromUnsignedInteger(0);
x.majorGridLineStyle          = majorGridLineStyle;
x.minorGridLineStyle          = minorGridLineStyle;
x.minorTicksPerInterval       = 9;
//x.title                         = @"X Axis";
//x.titleOffset               = 35.0;
NSNumberFormatter *labelFormatter = [[NSNumberFormatter alloc] init];
labelFormatter.numberStyle = NSNumberFormatterNoStyle;
x.labelFormatter           = labelFormatter;
[labelFormatter release];

// Y axis
CPTXYAxis *y = axisSet.yAxis;
y.labelingPolicy              = CPTAxisLabelingPolicyAutomatic;
y.orthogonalCoordinateDecimal = CPTDecimalFromUnsignedInteger(0);
y.majorGridLineStyle          = majorGridLineStyle;
y.minorGridLineStyle          = minorGridLineStyle;
y.minorTicksPerInterval       = 3;
//y.labelOffset               = 5.0;
//y.title                         = @"Y Axis";
//y.titleOffset               = 30.0;
y.axisConstraints             = [CPTConstraints constraintWithLowerOffset:0.0];

// Rotate the labels by 45 degrees, just to show it can be done.
x.labelRotation = M_PI * 0.25;

// Create the plot
CPTScatterPlot *dataSourceLinePlot1 = [[[CPTScatterPlot alloc] init] autorelease];
dataSourceLinePlot1.identifier    = [self kPlotIdentifier];
//NSLog(@"set identifier: %@", [self kPlotIdentifier]);
dataSourceLinePlot1.cachePrecision = CPTPlotCachePrecisionDouble;

CPTMutableLineStyle *lineStyle1 = [[dataSourceLinePlot1.dataLineStyle mutableCopy] autorelease];
lineStyle1.lineWidth                 = 1.0;
lineStyle1.lineColor                 = [CPTColor redColor];
dataSourceLinePlot1.dataLineStyle = lineStyle1;

dataSourceLinePlot1.dataSource = self;
[graph addPlot:dataSourceLinePlot1];

 // Plot space
 CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)graph.defaultPlotSpace;
 plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromUnsignedInteger(0) length:CPTDecimalFromUnsignedInteger(kMaxDataPoints - 1)];
 plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromUnsignedInteger(0) length:CPTDecimalFromUnsignedInteger(100)];

} 
```

如果只显示第一个图表，我认为问题是我自己的错，但是因为每隔一个图表显示它对我没有任何意义..

我唯一的猜测是这是某种时间问题，但我对其进行了调试并延迟了每个图表的创建，它没有任何区别..

我什至删除了第 3、第 5 个图表，以查看其他图表是否现在呈现，但之前未显示的相同 3 个图表仍然不可见，这真的让我失望..（即，仅启用 4 个图表中显示的第一个图表！ )

对此非常感谢的任何帮助...

我可能只使用 Apple Developer Library 中的代码来呈现加速度计数据，因为它非常轻量级，可以一次在屏幕上支持 6 个图表而不会出现问题......

Core-Plot 似乎无法胜任我猜的任务......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T01:06:05.907

您没有说哪些图表没有显示，但由于它总是相同的，我怀疑视图层次结构存在问题。尝试改变

```
`[chartVC1.view setFrame:self.Panel1.frame];` 
```

到

```
`[chartVC1.view setFrame:self.Panel1.bounds];` 
```

对于每个图表。

# memory-management - 如何在预定位置分配内存？

> ID：10086734
> 
> 赞同：0
> 
> 时间：2012-04-10T10:06:59.923
> 
> 标签：memory-management, new-operator, placement-new

如何在固定位置使用 new 分配内存？我的书说要这样做：

```
char *buf=new char[sizeof(sample)];
sample *p=new(buf)sample(10,20); 
```

这里 new 是在 buf 的地址分配内存， (10,20) 是正在传递的值。但什么是样本？它是地址还是数据类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T14:56:07.333

它是数据类型或 typedef。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:07:03.633

让我向你解释这段代码......

```
char *buf=new char[sizeof(sample)];
sample *p=new(buf)sample(10,20); 
```

这实际上是四行代码，为方便起见，写成两行。让我扩展它们

```
char *buf;                        // 1
buf = new char[sizeof(sample)];   // 2
sample *p;                        // 3
p = new(buf)sample(10,20);        // 4 
```

第 1 行和第 3 行很容易解释，它们都是声明指针。`buf`是指向 a 的指针`char`，`p`是指向 a 的指针`sample`。现在，我们看不到它是什么`sample`，但我们可以假设它是在 else where 定义的类，或者是一些已被`typedef`编辑的数据类型（或多或少只是给了一个新名称），但无论哪种方式，`sample`都可以被认为是数据类型只是链接`int`或`string`

第 2 行是分配一块内存并将其分配给我们`char pointer`调用的`buf`. 假设 sample 是一个包含 2 个 int 的类，这意味着它（在大多数编译器下）将是 8 个字节（每个 int 4 个）。so`buf`指向一块内存的开始，该内存块已被预留用于存放`char`s。

第 4 行是一个大复杂的地方。如果它只是`p = new sample(10,20)`创建一个类型的新对象`sample`，将两个`int`s 传递给它并将这个新对象的地址存储在指针中，这将是一个简单的情况`p`。添加`(buf)`基本上是在告诉`new`使用指向的内存`buf`。

最终效果是，您分配了一块内存（或多或少 8 个字节），并且它有两个指向它的指针。其中一个点 ,`buf`将内存视为 8​​ 个字符，另一点 ,`p`正在查看的是单个`sample`.

你为什么要这样做？

通常情况下，你不会。现代 C++ 使 sue 变得`new`相当多余，有许多更好的方法来处理对象。我想使用这种方法的主要原因是，如果出于某种原因您想保持分配的内存池，因为获得大块内存可能需要一些时间，并且您可能会节省一些时间。

在大多数情况下，如果你认为你需要做这样的事情，你是在试图解决错误的事情

**额外的一点**

我对嵌入式或移动设备没有太多经验，但我从未见过使用它。

您发布的代码基本上与仅执行`sample *p = new sample(10,20)`两种方法都无法控制`sample`对象的创建位置相同。

还要考虑到您并不总是需要使用 new 动态创建对象。

```
void myFunction(){
    sample p = sample(10,20);
} 
```

这会自动为您创建一个`sample`对象。这种方法更可取，因为它更易于阅读和理解，并且您无需担心删除对象，当函数返回时它将为您清理。

如果您确实需要使用动态对象，请考虑使用智能指针，例如`unique_ptr<sample>`这将使您能够使用动态对象创建，但省去了手动删除类型对象的麻烦`sample`（我可以为您指出更多如果你还活着，这方面的信息）

# asp.net - DataAnnotationsExtensionsMVC3 验证不适用于整数值

> ID：10086735
> 
> 赞同：1
> 
> 时间：2012-04-10T10:07:03.627
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, data-annotations

获取 int 数据类型的默认错误消息，即`he value 'abc' is not valid for age`
我应该做什么。

```
 public class HomeViewModel
   {
    [Integer(ErrorMessage="provide valid numeric value")}
    public int age{ get; set; }
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T10:31:32.727

在您发布数据的操作方法中，您是否检查了模型是否有效？

```
[HttpPost]
public ActionResult MyActionMethod(Model model)
{
  if(!ModelState.IsValid)
  {
     return View(model);
  }
  //else post data
} 
```

* * *

如果您想显示错误消息，`Integer`您可以尝试

```
[Required(ErrorMessage="Age Is Required")]
[Integer(ErrorMessage="Numbers Only")]
public int Age { get; set; } 
```

# java - Sonar Java Web 客户端：作者按行 null

> ID：10086741
> 
> 赞同：0
> 
> 时间：2012-04-10T10:07:35.507
> 
> 标签：java, web-services, sonarqube

在我的声纳上运行以下代码时，测量返回 null。（应该返回“1=author;2=author...”行）。但是它适用于 nemo.sonarsource.org。

其他措施，例如：违规对我的工作正常，所以这可能不是错误代码的问题。我怀疑我需要以某种方式配置声纳？

```
 private final Sonar sonar;

    public String getAuthors(String resourceKey){
         return getMeasure(resourceKey, "authors_by_line").getData();
    }

    private Measure getMeasure(String resourceKey, String measureName){
        Resource resource = sonar.find(ResourceQuery.createForMetrics(
            resourceKey, measureName));

        Measure measure = resource.getMeasure(measureName);

        return measure;
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T11:46:13.093

您必须已安装[SCM Activity 插件](http://docs.codehaus.org/display/SONAR/SCM+Activity+Plugin)并启用它（在 Sonar 设置中，请参阅我们的 Wiki 上的文档）才能获得此指标。

然后，一旦您重新分析了您的项目，您将获得预期的行为。

# objective-c - NSMutableString 和（字符）编码问题：在 ü 的情况下获取 \U00fc

> ID：10086744
> 
> 赞同：1
> 
> 时间：2012-04-10T10:08:07.650
> 
> 标签：objective-c, ios, encoding, character-encoding, nsmutablestring

我正在从 coreData 中获取我的实体并将 fetchrequest 的结果保存到 NSMutableString 中，以用于文本到语音。

```
self.ttsInboxCards = [[NSMutableString alloc] initWithString:@""];  
[self.ttsInboxCards appendString:[[entitySetsCards valueForKey:@"cardTitle"] description]]; 
```

在 NSLog 我得到这个值：

```
F\U00fcr | schl\U00e4ge | zuh\U00f6ren 
```

应该是：

```
Für | schläge | zuhören 
```

我已经尝试了很多方法来获得正确的编码，例如：

```
stringWithUTF8String: 
```

等等，但没有任何效果。

**我怎样才能防止这个问题？**

**编辑1：**

我从 coreData 获取值是这样的：
NSFetchRequest *fetchRequest = [[[NSFetchRequest alloc] init] autorelease];

```
NSEntityDescription *entity = [NSEntityDescription entityForName:@"EntitySetsCardsInbox" inManagedObjectContext:self.managedObjectContext];
[fetchRequest setEntity:entity];

NSPredicate *inboxPred = [NSPredicate predicateWithFormat:@"archived == 0 AND cardId != 0"];

[fetchRequest setPredicate:inboxPred];

NSSortDescriptor *sortDescriptor2 = [[[NSSortDescriptor alloc] initWithKey:sortString ascending:sortAsc selector:@selector(localizedCaseInsensitiveCompare:)] autorelease];
NSArray *sortDescriptors = [[[NSArray alloc] initWithObjects:sortDescriptor2, nil] autorelease];
[fetchRequest setSortDescriptors:sortDescriptors];

NSError *error = nil;
NSArray *cardTitles = [self.managedObjectContext executeFetchRequest:fetchRequest error:&error];

[self.ttsInboxCards appendString:[[cardTitles valueForKey:@"cardTitle"] description]]; 
```

**文字转语音**

```
 if (isSpeaking) {
    [vocalizer cancel];
    isSpeaking = NO;
}
else {
    isSpeaking = YES;
    vocalizer = [[SKVocalizer alloc] initWithLanguage:@"de_DE" delegate:self];
    [vocalizer speakString:tmp];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:54:35.097

我写：

> cardTitles 是一个数组。因此，在其上调用 -valueForKey: 会生成一个通过在每个元素上调用 -valueForKey:@"cardTitle" 构建的数组。然后你问那个数组的描述。它很可能会对其内容进行格式化。

刷子51 写道:

> componentsJoinedByString：工作并解决了编码问题。现在我必须正确拆分它们，以便我可以干净地将它用于文本到语音。你能回答一下吗，这样我就可以将此问题标记为已回答，其他人可以更快地找到它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T10:45:11.407

`U`用较小的帽子制作帽子并尝试。

# javascript - 使用 jQuery 过滤输入文本

> ID：10086746
> 
> 赞同：3
> 
> 时间：2012-04-10T10:08:15.537
> 
> 标签：javascript, jquery, filtering, html-input

我想过滤和锁定输入文本。例如，在某些输入中，用户只能输入波斯语/波斯语字符而不能输入英语，或者当用户可以输入英语但不能输入波斯语时。表示某些输入仅接受波斯语/波斯语字符，而其他输入仅接受英语。

我还发现了这个[http://www.thimbleopensource.com/tutorials-snippets/jquery-plugin-filter-text-input](http://www.thimbleopensource.com/tutorials-snippets/jquery-plugin-filter-text-input)。如果知道波斯字符的任何常规表达可以帮助我或如何更改键盘模式。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T10:39:29.837

根据[Unicode 字符](http://en.wikipedia.org/wiki/List_of_Unicode_characters#Arabic)列表，您似乎需要检查 unicode 范围内的符号`U+0600-U+06FF`。

因此，如果您想防止插入所有其他 unicode 符号，您可以简单地根据`/^[\u0600-\u06FF]+$/g`正则表达式检查您的输入值。另请注意，您可能希望允许许多 unicode 范围。从[Unicode 中的阿拉伯语字符集](http://en.wikipedia.org/wiki/Arabic_characters_in_Unicode)页面，除了阿拉伯语（0600—06FF，225 个字符）之外，您还有

*   阿拉伯语增补（0750—077F，48 个字符）
*   阿拉伯语扩展 A（08A0—08FF，39 个字符）
*   阿拉伯语演示表格-A（FB50-FDFF，608 个字符）
*   阿拉伯语演示表格-B（FE70—FEFF，140 个字符）
*   鲁米数字符号（10E60—10E7F，31 个字符）
*   阿拉伯数学字母符号（1EE00—1EEFF，143 个字符）

在这种情况下，根据需要在表达式中添加尽可能多的范围：
例如`/^[\u0600-\u06FF\u0750-\077F\u0...]+$/g`

因此，使用您提到的代码段，您应该编写

```
$('#text_input').filter_input({regex:'[\u0600-\u06FF\u0750-\077F\u0...]'}); 
```

希望这可以帮助。السلام عليكم

# java - 如何在 ArrayList 中的对象中创建日历对象

> ID：10086750
> 
> 赞同：0
> 
> 时间：2012-04-10T10:08:35.047
> 
> 标签：java, arraylist, gregorian-calendar

只是在处理我的 Java 作业，但我遇到了一堵砖墙，我似乎无法找到解决方案 - 我不一定要寻找答案，甚至对哪些工具可能对我有帮助的一些想法:) 无论如何，这里有：

正如标题所说，我希望在 Arraylist 的对象中创建一个日历对象。基本上，按照下面的代码 - 我认为当创建 Appointment 对象的实例时，日历对象和约会对象之间的链接将被切断，我可以将 Calendar 对象重用于下一个约会对象。不幸的是，每个对象都保留了对日历对象的引用，而不是创建自己的日历对象实例 =/。

**一些工作背景：**

基本上，这段 java 代码扫描文件并从中提取信息，确保其有效，然后在两个数组列表之一中创建适当对象的实例。我在我的导师的限制下工作，他指定我必须使用数组列表。任何帮助将不胜感激。

**预约类的构造函数：** public Appointment（Patient patient, Provider provider, GregorianCalendar date, boolean standard, boolean Attended）

**约会数据示例 Appointment** #84736254193#123456AF#22.30#20/12/2012#false#True

```
public AppointmentsManager (String path) {

        this.path = path;
        String[] fileLine;
        boolean throwError = false;
        DateFormat df = new SimpleDateFormat ("HH.mm dd/MM/yyyy");
        df.setLenient(false);
        GregorianCalendar calendar = new GregorianCalendar();

        try {
            Scanner input = new Scanner(new File(path));
            String line;

            while (input.hasNext()) {

                line = input.nextLine();
                fileLine = line.split("#");

                if (fileLine.length < 0) 
                    throw new IllegalArgumentException("Error: the data in the file is has not been delimited correctly. Please review");

                if (fileLine[0].matches("Provider")) {
                    if (fileLine.length < 7)
                        throw new IllegalArgumentException("Error: the provider data in the file is incomplete. Please review");     

                    persons.add(new Provider(fileLine[1], fileLine[2], fileLine[3], fileLine[4], fileLine[5],
                            fileLine[6])); 
                }  
                else if (fileLine[0].matches("Patient")) {
                    fileLine = line.split("#"); 

                    if (fileLine.length < 11)
                        throw new IllegalArgumentException("Error: the patient data in the file is incomplete. Please review");  

                    for (int i = 0; i < persons.size(); i++) {  

                        if (persons.get(i).getMedicare().matches(fileLine[10])) {

                            persons.add(new Patient(fileLine[1], fileLine[2], fileLine[3], fileLine[4], fileLine[5],
                                    fileLine[6], fileLine[7], fileLine[8], Integer.parseInt(fileLine[9]),(Provider)persons.get(i)));
                            throwError = true;
                        }
                    }
                    if (throwError!=true) {
                        throw new IllegalArgumentException("Error: the provided Provider does not exist for Patient: " + fileLine[2]+", "+fileLine[1] +". Please review");
                    }
                }
                else if (fileLine[0].matches("Appointment")) {
                    fileLine = line.split("#");

                    if (fileLine.length < 7)
                        throw new IllegalArgumentException("Error: the appointment data in the file is incomplete. Please review");  

                    if (!"true".equals(fileLine[5].toLowerCase()) && !"false".equals(fileLine[5].toLowerCase())) 
                        throw new IllegalArgumentException("Error: the appointment data in the file is incorrect. Please review");

                    if (!"true".equals(fileLine[6].toLowerCase()) && !"false".equals(fileLine[6].toLowerCase())) 
                        throw new IllegalArgumentException("Error: the appointment data in the file is incorrect. Please review");

                    //parse the fileLine parameters
                    calendar.setTime(df.parse(fileLine[3] + " " + fileLine[4]));

                    for (int i = 0; i < persons.size(); i++) {
                        if (persons.get(i).getMedicare().matches(fileLine[1])) {

                            for (int j = 0; j < persons.size(); j++) {
                                if (persons.get(j).getMedicare().matches(fileLine[2])) {

                                    appointments.add(new Appointment((Patient) persons.get(i), (Provider) persons.get(j), calendar,
                                            Boolean.parseBoolean(fileLine[5]), Boolean.parseBoolean(fileLine[6]))); 
                                    throwError = true;
                                }
                            }
                        }
                    }
                    if (throwError!=true) {
                        throw new IllegalArgumentException("Error: the provided Provider or Patient does not exist in the system. Please review");
                    }
                }
                else 
                    throw new IllegalArgumentException("Error: the data provided does not match a person, provider or appointment. Please review");
            } 
            input.close();
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ParseException pe) {
            // TODO Auto-generated catch block
            throw new IllegalArgumentException("Error: the appointment date and time in the file is incorrect. Please review");
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:18:24.730

好吧，您正在向每个约会发送相同的对象。如果我理解正确，您希望每个约会都有不同的日历对象。如果是这样，只需在每次创建约会时重新实例化日历，无论是在约会构造函数中还是在您的方法中......

编辑：哦，我忘了，日历是单例的。然后我建议在约会中只保留 java.util.Date 对象 - Calendar.getTime() 创建 Date 的新实例。

然后你可以把它装扮成吸气剂中的日历 -

```
public Calendar getAppointmentCalendar()
{
    Calendar cal = Calendar.getInstance();
    cal.setTime(this.appDate);
    return cal;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T10:25:44.820

问题是每次都将相同的日历实例传递给构造函数。在将约会添加到列表的 for 循环中实例化一个新的 Calendar 实例。传递一个新实例将解决您的问题。

# java - IBM WESB/WAS JCA 安全配置

> ID：10086751
> 
> 赞同：1
> 
> 时间：2012-04-10T10:08:36.197
> 
> 标签：java, websphere, jca, cics

我正在使用 IBM 工具。我有一个 Websphere ESB (WESB) 和一个 CICS 事务网关 (CTG)。基本设置如下：

SOAP 服务需要来自 CICS 的数据。SOAP 服务连接到服务总线 (WESB) 以处理数据和协议转换，然后 WESB 调用 CTG，CTG 反过来又调用 CICS，反之亦然（同步）处理回复。WESB 使用资源适配器和 JCA 连接器（或在 WESB 中称为 CICS 适配器）调用 CTG。现在，我已经准备好所有部件并开始工作了。

我的问题是关于安全性的，即使我正在使用 WESB，答案也可能与 Websphere Application Server (WAS) 中的相同。Resource Adaper 使用 JAAS - J2C 身份验证数据进行保护。我已经使用 J2C 身份验证数据条目配置了安全性，所以基本上我在正在运行的应用程序中有一个引用，并且在运行时应用程序会从服务器查找安全属性。所以基本上我总是使用相同的安全参考访问 CICS 适配器。

> 我的问题是我将来需要以更动态的方式访问资源。安全性不能再焊接到应用程序中，而是作为参数给出。

**一些 WESB 或 WAS 专家可以帮助我吗，这如何在 WESB/WAS 中完成？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T23:26:12.250

Can you elaborate a bit further? I don't work with CTG but I believe it is no different from other resources such as JDBC or JMS resource.

On the CTG resource adapter, you have identified credentials that are used for all calls to the CICS.

This is similar to what we do when we work with a Data Source and this approach is agreeable to most people.

I do not see how the J2C credential is welded to the application. The configuration is done @ WAS/WESB. The application would simply work with the JNDI resources on the server to which the J2C aliases are configured.

If you elaborate on the dynamic requirement folks can help out.

HTH

Manglu

# c++ - 如果我使用 scanf，程序将终止

> ID：10086760
> 
> 赞同：2
> 
> 时间：2012-04-10T10:08:59.453
> 
> 标签：c++, c, linux, timer

我正在尝试在代码中实现计时器，我发现的所有示例都在使用`while(1)`或者`for(;;)`但是当我尝试使用`scanf`我的程序时终止。它是否有任何价值，`stdin`因为如果我使用`scanf`两次，那么在退出程序之前会调用两次计时器。这是我的示例代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <signal.h>
#include <netinet/in.h>
#include <signal.h>
#include <time.h>

#include <linux/socket.h>
#include <time.h>

#define SIGTIMER (SIGRTMAX)
#define SIG SIGUSR1
static timer_t     tid;
static timer_t     tid2;

void SignalHandler(int, siginfo_t*, void* );
timer_t SetTimer(int, int);

int main(int argc, char *argv[]) {

    int t;

    printf("SIGRTMAX %d\n", SIGRTMAX);
        printf("SIGRTMIN %d\n", SIGRTMIN);

    struct sigaction sigact;
    sigemptyset(&sigact.sa_mask);
    sigact.sa_flags = SA_SIGINFO;
    sigact.sa_sigaction = SignalHandler;
    // set up sigaction to catch signal
    if (sigaction(SIGTIMER, &sigact, NULL) == -1) {
        perror("sigaction failed");
        exit( EXIT_FAILURE );
    }

    // Establish a handler to catch CTRL+c and use it for exiting.
    sigaction(SIGINT, &sigact, NULL);
    tid=SetTimer(SIGTIMER, 1000);

    struct sigaction sa;
    sigemptyset(&sa.sa_mask);
    sa.sa_flags = SA_SIGINFO;
    sa.sa_sigaction = SignalHandler;
    // set up sigaction to catch signal
    if (sigaction(SIG, &sa, NULL) == -1) {
        perror("sa failed");
        exit( EXIT_FAILURE );
    }

    // Establish a handler to catch CTRL+c and use it for exiting.
    sigaction(SIGINT, &sa, NULL);
    tid2=SetTimer(SIG, 1000);

   // for(;;);  or while(1) Working properly

    scanf("%d", &t); /// Program terminates
    return 0;
}

void SignalHandler(int signo, siginfo_t* info, void* context)
{

    if (signo == SIGTIMER) {
        printf("Command Caller has ticked\n");

    }else if (signo == SIG) {
        printf("Data Caller has ticked\n");

    } else if (signo == SIGINT) {
        timer_delete(tid);
        perror("Crtl+c cached!");
        exit(1);  // exit if CRTL/C is issued
    }
}
timer_t SetTimer(int signo, int sec)
{
    static struct sigevent sigev;
    static timer_t tid;
    static struct itimerspec itval;
    static struct itimerspec oitval;

    // Create the POSIX timer to generate signo
    sigev.sigev_notify = SIGEV_SIGNAL;
    sigev.sigev_signo = signo;
    sigev.sigev_value.sival_ptr = &tid;

    if (timer_create(CLOCK_REALTIME, &sigev, &tid) == 0)
    {

        itval.it_value.tv_sec = sec / 1000;
        itval.it_value.tv_nsec = (long)(sec % 1000) * (1000000L);
        itval.it_interval.tv_sec = itval.it_value.tv_sec;
        itval.it_interval.tv_nsec = itval.it_value.tv_nsec;

        if (timer_settime(tid, 0, &itval, &oitval) != 0)
        {
            perror("time_settime error!");
        }
    }
    else
    {
        perror("timer_create error!");
        return NULL;
    }
    return tid;
} 
```

那么，我该如何解决这个问题呢？任何帮助，将不胜感激。谢谢，尤维

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T10:20:30.300

信号中断scanf。如果`perror('scanf')`在 scanf 之后添加，输出将是：

```
SIGRTMAX 64
SIGRTMIN 34
命令调用者已勾选
数据呼叫者已打勾
scanf：中断的系统调用

```

如果您替换`scanf`为：

```
做 {
    错误号 = 0;
    scanf("%d", &t);
} while(errno == EINTR);

```

scanf 将在失败时重试`Interrupted system call`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T10:21:26.800

您绝对不能在信号处理程序中使用`printf`and 。`perror`他们不能重入。

此外，如果您的程序在其中接收到信号，则可能`scanf`会返回错误。如果`scanf`返回 EOF，请检查`errno`，它可能是`EINTR`.

# iphone - ASIHTTPRequest 与 iPhone 3G

> ID：10086768
> 
> 赞同：1
> 
> 时间：2012-04-10T10:09:32.847
> 
> 标签：iphone, objective-c, asihttprequest

我在我的项目中使用 ASIHTTPRequest，但我遇到了 iPhone 3G 的问题。我发送请求到：

```
NSURL* pageURL = [NSURL URLWithString:@"https://accounts.google.com/ServiceLogin?service=sj"];
loginPageRequest = [[ASIHTTPRequest alloc] initWithURL:pageURL];
[loginPageRequest setTimeOutSeconds:30];
[loginPageRequest setDelegate:self];
[loginPageRequest startAsynchronous]; 
```

在其他设备中，我得到了回应：

```
- (void)requestFinished:(ASIHTTPRequest *)request 
```

在 iPhone 3G 中我得到了很多次：

```
- (void)requestFailed:(ASIHTTPRequest *)request 
```

错误消息：`The request timed out`

我将请求超时设置为 30 秒。

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:21:11.983

我在 iPhone 3G 上也遇到过这个问题！我发现这是一个 HTTP* *S* * (SSL) 问题。我的“有效”证书被标记为无效。

您可以添加`[request setValidatesSecureCertificate:NO];`到您的请求。

如果你很幸运，你也会遇到同样的问题。:)

# sql-server-2008 - SQL Server：字段长度控制问题

> ID：10086770
> 
> 赞同：0
> 
> 时间：2012-04-10T10:09:41.670
> 
> 标签：sql-server-2008, data-warehouse, varchar

在 SQL Server 2008 中，我们面临着字符串长度控制的大问题。

简要回顾一下我们的系统：

*   在 SQL Server 环境中使用批量插入从文件中导入持久暂存区中的`*.txt`数据（分号作为分隔符）；
*   在 PSA 表中，所有列都是`varchar(MAX)`;
*   使用基于具有多个 where 条件的 select 的 insert 语句清理操作。

我们处理的问题是单列类型和长度，实际上在数据仓库级别它必须是数字，并且它的长度不能超过 13 位。

选择如下：

```
select cast(LTRIM(RTRIM(data_giacenza)) as numeric), 
                        LTRIM(RTRIM(codice_socio)), 
                        LTRIM(RTRIM(codice_gln)), 
                        LTRIM(RTRIM(tipo_gln)), 
                        LTRIM(RTRIM(codice_articolo_socio)), 
                        LTRIM(RTRIM(codice_ean_prodotto)), 
                        LTRIM(RTRIM(codice_ecat_prodotto)), 
                        LTRIM(RTRIM(famiglia)), 
                        LTRIM(RTRIM(marca)),
                        LTRIM(RTRIM(classificazione_liv_1)), 
                        LTRIM(RTRIM(classificazione_liv_2)),
                        LTRIM(RTRIM(classificazione_liv_3)), 
                        LTRIM(RTRIM(classificazione_liv_4)), 
                        LTRIM(RTRIM(modello)), 
                        LTRIM(RTRIM(descrizione_articolo)), 
                        cast(LTRIM(RTRIM(giacenza)) as numeric),
                        cast(LTRIM(RTRIM(acquistato)) as numeric), 'X' FROM psa_stock a
                          where EXISTS 
                          ( 
                          SELECT 0 
                          FROM(
                                SELECT 
                                            data_giacenza
                                           ,codice_socio
                                                 ,codice_gln
                                                 ,codice_articolo_socio
                                                 FROM psa_stock 
            where
                        LEN(LTRIM(RTRIM(data_giacenza))) = 8 and LEN(LTRIM(RTRIM(codice_socio))) = 3
                  and LEN(LTRIM(RTRIM(codice_gln))) = 13 and LEN(LTRIM(RTRIM(tipo_gln))) = 3 
                  and LEN(LTRIM(RTRIM(codice_articolo_socio))) <= 15 
                  and (LEN(LTRIM(RTRIM(codice_ean_prodotto))) <= 13 or LEN(ISNULL(codice_ean_prodotto, '')) = 0) 
                  and (LEN(LTRIM(RTRIM(codice_ecat_prodotto))) = 9 or LEN(ISNULL(codice_ecat_prodotto, '')) = 0)
                  and LEN(LTRIM(RTRIM(famiglia))) = 2
                  and (LEN(LTRIM(RTRIM(marca))) <= 20 or LEN(ISNULL(marca, '')) = 0)
                  and (LEN(LTRIM(RTRIM(modello))) <= 30 or LEN(ISNULL(modello, '')) = 0)
                  and (LEN(LTRIM(RTRIM(descrizione_articolo))) <= 50 or LEN(ISNULL(descrizione_articolo, '')) = 0)
                  and LEN(LTRIM(RTRIM(giacenza))) <= 5
                  and LEN(LTRIM(RTRIM(acquistato))) <= 5 
                  and (LEN(LTRIM(RTRIM(classificazione_liv_1))) <= 15 or LEN(ISNULL(classificazione_liv_1, '')) = 0)
                  and (LEN(LTRIM(RTRIM(classificazione_liv_2))) <= 15 or LEN(ISNULL(classificazione_liv_2, '')) = 0)
                  and (LEN(LTRIM(RTRIM(classificazione_liv_3))) <= 15 or LEN(ISNULL(classificazione_liv_3, '')) = 0)
                  and (LEN(LTRIM(RTRIM(classificazione_liv_4))) <= 15 or LEN(ISNULL(classificazione_liv_4, '')) = 0)
                  and ISNUMERIC(ltrim(rtrim(REPLACE(data_giacenza, ' ', '')))) = 1 
                  and ISNUMERIC(ltrim(rtrim(REPLACE(codice_gln, ' ', '')))) = 1 
                  and ISNUMERIC(LTRIM(RTRIM(REPLACE(giacenza, ' ', '')))) = 1 and charindex(',', giacenza) = 0
                  and ISNUMERIC(LTRIM(RTRIM(REPLACE(acquistato, ' ', '')))) = 1 
                  and ISNUMERIC(ltrim(rtrim(REPLACE(codice_ean_prodotto, ' ', '')))) = 1
                  and ISNUMERIC(ltrim(rtrim(REPLACE(codice_ecat_prodotto, ' ', '')))) = 1
                  and codice_socio in (select codice_socio from ana_socio)
                  and tipo_gln in (select tipo from ana_gln)
                  and codice_gln in (select codice_gln from dw_key_gln)
                  group by 
               data_giacenza
              ,codice_socio
                  ,codice_gln
                  ,codice_articolo_socio
                             having COUNT (*) = 1
                  ) b
          where 
                a.data_giacenza = b.data_giacenza and
                a.codice_articolo_socio = b.codice_articolo_socio and
                    a.codice_socio = b.codice_socio and
                    a.codice_gln = b.codice_gln) 
```

临界场是`codice_ean_prodotto`。

事实上，它还允许考虑`SEAGAT7636490026751,NE20000003039,NE20000002168`不是数字的值，并且首先，重叠最大维度。

结果，插入语句返回

> 字符串 o 二进制数据将被截断

错误并且插入失败。

提前致谢！我期待你的帮助！！！

恩里科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T19:41:48.330

您是否尝试过执行该查询并添加`codice_ean_prodotto = 'NE20000003039'`到 where 子句？确保这些是给您带来问题的实际字段。如果 select 返回带有该 where 子句的行，则说明逻辑有问题。

我倾向于`having COUNT (*) = 1`在 EXISTS 子查询中使用您的子句 - 这些特定键是否可能有多个记录？只要您的 PK 由这 4 个字段组成`(data_giacenza, codice_articolo_socio, codice_socio, codice_gln)`，您就根本不需要 GROUP BY 和 HAVING 子句。如果您没有加入主键，则可能是罪魁祸首。

但是，如果不查看您的数据模型，就很难判断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:49:33.040

我发现出了什么问题。在内部选择中，我们从选择中排除所有不考虑格式约束和重复（的含义`count(*)=1`）的记录，仅提取目标表的 PK。但是当使用 PK 选择时，我们还会检索那些重复的记录，但被格式约束排除在外，导致插入由于尺寸问题而出错。

现在我划分了步骤：

1.  重复查找和删除
2.  具有格式约束的选择

有用！

# android - 如何以编程方式在 android 帐户管理器中配置电子邮件帐户？

> ID：10086771
> 
> 赞同：1
> 
> 时间：2012-04-10T10:09:43.357
> 
> 标签：android

我想编写一个新应用程序，以编程方式从用户名、密码和其他信息等输入中添加电子邮件帐户。

有没有办法做到这一点？如果有，请分享示例代码。

提前致谢。

问候，山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T02:11:10.530

我也一直在研究这个。似乎这对于当前的设备管理 API 是不可能的。希望 Google 尽快发布一个新的 API（当然，我们将留给我们处理尚未升级的设备的问题）。

# zend-framework2 - Zend 框架 2 中的身份验证

> ID：10086772
> 
> 赞同：5
> 
> 时间：2012-04-10T10:09:46.027
> 
> 标签：zend-framework2

我将使用 Zend Framework 2 编写一个身份验证模块。为了帮助我完成这个过程，我[在网上找到了这个教程](http://p0l0.binware.org/index.php/2012/02/18/zend-framework-2-authentication-acl-using-eventmanager/)。但是，当我运行此模块时，它会显示以下消息：

```
Class Zend\Authentication\Adapter\AdapterChain does not exist 
```

这条消息的含义是什么？

此外，您知道我自己编写的 Zend Framework 2 身份验证教程可以用来提供帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T17:07:04.810

您可以在 zf2 中创建自己的自定义插件，例如 ZF2 [中的 Acl 实现](https://samsonasik.wordpress.com/2012/08/23/zend-framework-2-controllerpluginmanager-append-controller-pluginto-all-controller/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T12:01:18.230

查看 ZFC-Common 的[ZfcAcl](https://github.com/ZF-Commons/ZfcAcl)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T11:12:00.093

上面提到的 EdpUser 已经被[ZfcUser](https://github.com/ZF-Commons/ZfcUser)消费了。这适用于 ZF2，因为 Evan Dot Pro 是 ZF2 的核心贡献者。关于管理 Acl，ZfcAcl 目前不与 ZF2 RC1 一起使用。现在有点落后了。

他们有一个开放的 RFC 来进行更新，但这看起来有点落后。我可能会推荐使用[BjyAuthorize](https://github.com/bjyoungblood/BjyAuthorize)。Zf-Commons 也在考虑接管它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T06:22:42.197

尝试[Authentication + Acl 使用 EventManager](http://p0l0.binware.org/index.php/2012/02/18/zend-framework-2-authentication-acl-using-eventmanager/)。它看起来比 ZfcAcl 更容易。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T16:24:08.490

一个月前我也在使用这个教程，它太旧了，不能使用 beta5
你可以尝试使用
[https://github.com/EvanDotPro/EdpUser](https://github.com/EvanDotPro/EdpUser)它写得很好，并且有很酷的东西作为登录表单和身份验证状态的查看助手

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-24T16:20:41.103

我在我的一个项目中为此创建了自己的身份验证适配器。我创建了一个[要点](https://gist.github.com/renaatdemuynck/5fccfb6b4900e8347fa3)。你可以像这样使用它：

```
$adapter = new AdapterChain([
    new \Zend\Authentication\Adapter\Ldap(/* ... */),
    new \Zend\Authentication\Adapter\DbTable(/* ... */)
    // ...
]);

$authService = new AuthenticationService();
$authService->setAdapter($adapter); 
```

# c - C : 如何暂停 sigaction Timer

> ID：10086778
> 
> 赞同：1
> 
> 时间：2012-04-10T10:10:07.000
> 
> 标签：c, multithreading, signals

有一个名为 test() 的函数，我想每 30 秒调用一次这个函数，请找到我实现的代码片段。

```
void init_sigaction(void) {
    struct sigaction act;    
    act.sa_handler = test; //test()
    act.sa_flags = 0;
    sigemptyset(&act.sa_mask);
    sigaction(SIGPROF, &act, NULL);
}

void init_time(void) {
    struct itimerval val;
    val.it_value.tv_sec = 30; //Timer 30 Seconds
    val.it_value.tv_usec = 0;
    val.it_interval = val.it_value;
    setitimer(ITIMER_PROF, &val, NULL);
}

int main()
{
  /*Set the handler for the signal SIG to HANDLER */
    signal(SIGINT, signal_handler);
    init_sigaction();
    init_time();

    Some_other_function();

} 
```

现在我正在使用其他一些功能，我想暂停 sigaction 计时器，直到其他功能执行。如何实现暂停中断？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T10:16:27.053

从[手册](http://linux.die.net/man/2/setitimer)`setitimer`页：

> 设置为零的计时器（it_value 为零或计时器到期且 it_interval 为零）停止。

使用零次调用`setitimer`，并使用有效`old_value`参数来存储计时器的当前值，以便您以后可以再次启动它。

**编辑：**

像这样的东西怎么样：

```
struct itimerval old_timer;

void pause_timer()
{
    struct itimerval zero_timer = { 0 };
    setitimer(ITIMER_PROF, &zero_time, &old_timer);
}

void resume_timer()
{
    setitimer(ITIMER_PROF, &old_timer, NULL);
} 
```

**注意**上面的代码未经测试，仅通过阅读手册页进行编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T10:16:25.157

您可以考虑使用例如[sigprocmask(2)](http://linux.die.net/man/2/sigprocmask)系统调用来阻止一些信号。

但是，我强烈建议多阅读[signal(7)](http://linux.die.net/man/7/signal)手册页。不要忘记信号处理程序可以在任何时候发生（包括在最坏的时间，例如在调用`fprintf`或`malloc`...期间），因此只能直接或间接调用*异步信号安全函数*；并且很多库函数不在这个小的限制集中。通常的方法是`volatile sig_atomic_t`在信号处理程序中设置一个标志，并在外部对其进行测试。

# python - 用于英国邮政编码之间距离的 Python 模块

> ID：10086779
> 
> 赞同：2
> 
> 时间：2012-04-10T10:10:07.127
> 
> 标签：python, postal-code

我需要计算英国邮政编码之间的距离。我不想使用网络 API。是否存在为此的python模块/库？[还是我必须使用来自OrdnanceSurvey](https://www.ordnancesurvey.co.uk/opendatadownload/products.html)的数据来整理我自己的一些东西？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:13:30.957

1/您可以使用任何其他地理定位 API，例如谷歌地图，它会根据密码为您提供准确的距离。

2/您可以使用任何具有邮政编码和纬度/经度信息的更新数据库，并使用该信息来计算两点之间的距离。

有用的网址：

i) [http://blog.acmultimedia.co.uk/2008/03/uk-post-code-distance-calculator-using-phpmysql/](http://blog.acmultimedia.co.uk/2008/03/uk-post-code-distance-calculator-using-phpmysql/)

ii) [Django - 我怎样才能找到两个位置之间的距离？](https://stackoverflow.com/questions/4716017/django-how-can-i-find-the-distance-between-two-locations)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T11:36:32.617

我不知道直接可用的模块，但您可以使用[GRASS](http://grass.fbk.eu/)或[QGIS](http://www.qgis.org/)，它们都支持 python 脚本，因此该功能可以用作 python 模块。您仍然需要弄清楚如何在这些工具中手动执行此操作，但这并不是非常困难。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-11T19:14:57.633

这个问题现在有点老了，但也许值得指出谷歌和 SatNavs 使用的极坐标（Long/Lat）与 Ordnance Survey 提供的 Eastings & Northings 之间的差异，它显示了给定的邮政编码质心与给定的基准点之间的距离锡利群岛西南的某个地方。

如果您只想计算距离，那么它是使用毕达哥拉斯的单线。EG巨石阵到国会大厦

```
>>> # Coordinates of Stonehenge and Westminster in E/Northings
... s = (412183, 142346)
... p = (530268, 179545)
... d = ((s[0] - p[0]) ** 2 + (s[1] - p[1]) ** 2) ** 0.5
... print (d)
123805.62517914927 
```

我正在寻找一个库来从极坐标转换为笛卡尔坐标，即使在世界上最肯定不是的完美球体上，这也相对棘手。我目前正在尝试解决这个问题，但大部分都失败了： [https ://scipython.com/book/chapter-2-the-core-python-language-i/additional-problems/converting-between-an -os-grid-reference-and-longitudelatitude/](https://scipython.com/book/chapter-2-the-core-python-language-i/additional-problems/converting-between-an-os-grid-reference-and-longitudelatitude/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-03T08:42:55.250

[有关使用 python 的postcodes 模块](https://github.com/e-dard/postcodes "邮政编码模块")以及[google maps distance matrix API](https://developers.google.com/maps/documentation/distance-matrix/start "谷歌地图距离矩阵")的简单代码，请参见下文。

```
from postcodes import PostCoder
import requests
import json
import pprint

pc = PostCoder()
origin_postcode = str.upper(raw_input("Enter origin PostCode:"))
dest_postcode = str.upper(raw_input("Enter destination PostCode:"))

origin = str(pc.get('%s' % origin_postcode)['geo']['lat'])+','+str(pc.get('%s' % origin_postcode)['geo']['lng'])
dest = str(pc.get('%s' % dest_postcode)['geo']['lat'])+','+str(pc.get('%s' % dest_postcode)['geo']['lng'])

data = requests.get('https://maps.googleapis.com/maps/api/distancematrix/json?units=imperial&origins=%s&destinations=%s&key=AIzaSyDfTip2PrdaRkF1muCLP8REAk3FsLjmBrU' % (origin, dest))
new = json.loads(data.text)

miles = str(new['rows'][0]['elements'][0]['distance']['text']).replace('mi','miles')
duration = str((new['rows'][0]['elements'][0]['duration']['text']))

print '\n\nThe distance from %s to %s is %s, taking approximately %s (driving).' % (origin_postcode, dest_postcode, miles, duration) 
```

# jquery - 使用 jquery 更好的子级 ul 类？

> ID：10086784
> 
> 赞同：0
> 
> 时间：2012-04-10T10:10:27.190
> 
> 标签：jquery, jquery-selectors, html-lists

有没有更好的方法来编写以下内容，最好有无限的子级别......？

```
$('#menu-primary-navigation li > ul.sub-menu').addClass('lvl-1');
$('#menu-primary-navigation li li > ul.sub-menu').removeClass('lvl-1').addClass('lvl-2');
$('#menu-primary-navigation li li li > ul.sub-menu').removeClass('lvl-2').addClass('lvl-3');
$('#menu-primary-navigation li li li li > ul.sub-menu').removeClass('lvl-3').addClass('lvl-4'); 
```

请注意，整个菜单是动态创建的，因此我无法手动将类添加到每个级别。

这是起始代码的示例：

```
 <ul id="menu-primary-navigation" class="menu">

           <li><a href="#">Top Level</a></li>
           <li><a href="#">Top Level</a>
                <ul class="sub-menu">
                    <li><a href="#">Sub-level 1</a></li>
                    <li><a href="#">Sub-level 1</a></li>
                </ul>
            </li>
            <li><a href="#">Top Level</a>
                <ul class="sub-menu">
                    <li><a href="#">Sub-level 1</a>
                            <ul class="sub-menu">
                                <li><a href="#">Sub-level 2</a>
                                    <ul class="sub-menu">
                                    <li><a href="#">Sub-level 3</a>
                                            <ul class="sub-menu">
                                                <li><a href="#">Sub-level 4</a></li>
                                                <li><a href="#">Sub-level 4</a></li>
                                            </ul>
                                    </li>
                                    <li><a href="#">Sub-level 3</a></li>
                                </ul>
                                </li>
                                <li><a href="#">Sub-level 2</a></li>
                            </ul>
                    </li>
                    <li><a href="#">Sub-level 1</a></li>
                </ul>
            </li>

        </ul>
​ 
```

# linux - 在ubuntu 11.04中没有密码的系统关闭

> ID：10086785
> 
> 赞同：2
> 
> 时间：2012-04-10T10:10:28.400
> 
> 标签：linux, qt, ubuntu, ubuntu-11.04

我正在编写一个带有关闭按钮的 QT 应用程序。我想用这个按钮关闭系统，但是当我使用 shell 命令“shutdown -h now”时，系统要求输入密码。
我想在没有密码的情况下关机。

我的QT代码是：

```
QObject *parent;
myProcess = new QProcess(this);
QString command= "sudo shutdown";
QStringList arguments;
arguments << "-h " << "now"  ;
myProcess->start(command,arguments); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T12:21:31.113

确保运行该进程的用户位于 sudoers 文件中。用于`visudo`更改 sudoers 文件并添加如下内容：

```
<username> ALL = NOPASSWD: /sbin/shutdown 
```

*hth*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T12:13:06.860

看看通过`gksudo`/`kdesudo`调用`reboot`，其中之一应该在大多数 Linux 安装上。它们是简单的包装器，会要求用户输入密码以确认提升权限`root`，在您的情况下，调用`reboot`或`shutdown`.

只需与系统的其余部分配合使用，然后`shutdown`向用户询问他的密码即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T11:53:31.907

您可以直接调用 reboot 来暂停或重新启动系统，而不是调用 shell 命令。请参阅“man 2 重启”。但是，如果用户没有 CAP_SYS_BOOT 能力，您仍然会收到权限错误。使用 sudo 或 suid 二进制文件，如上面评论中所述，您将获得此功能（以及更多）。

您还可以使用 setcap 程序或类似程序为您的二进制文件设置 CAP_SYS_BOOT 功能。请记住，每次重新编译程序后都必须这样做，并且您必须使用 sudo 才能使用 setcap。

# javascript - 如何使用 Javascript 或 jQuery 刷新网页的一部分？

> ID：10086786
> 
> 赞同：1
> 
> 时间：2012-04-10T10:10:34.647
> 
> 标签：javascript, jquery

如何以时间间隔（不是整个页面）刷新网页的特定部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:30:40.967

**You can use Ajax for your purpose. suppose you want to check username availability before registering a user to your site.**

**create a request object asynchronously**

> function createRequest()
> 
> {
> 
> `try{`
> 
> ```
>  request=new XMLHttpRequest(); 
> ```
> 
> `} catch(tryMS){`
> 
> ```
>  try{
> 
>         request=new ActiveXObject("Msxml2.XMLHTTP");
> 
>     } catch(otherMS){
> 
>          try{
> 
>              request=new ActiveXObject("Microsoft.XMLHTTP");
> 
>          } catch(failed) {
> 
>              request=null;
>          }
> 
>     }
> 
> }
> 
> return request; 
> ```
> 
> }

**Next is the code to send a asynchronous request**

> function checkAvailability (username) {
> 
> ```
>  request=createRequest();
> 
>  if(request==null){
> 
>    alert("Ajax request not possible on your browser");
> 
>    return;
> 
>  }
> 
>  var url="checkAvailability?username="+username;
> 
>  request.open("GET", url, true);
> 
>  request.onreadystatechange = showStatus;
> 
>  request.send(null); 
> ```
> 
> }

**Track the response**

> function showStatus () {
> 
> ```
> if(request.readyState == 4) {
> 
> if(request.status == 200) {
> 
>   var response = request.responseText;
> 
>           if(response == 1){
> 
>               //username available
> 
>           } else{
> 
>               //username not available
> 
>           } 
> 
>   }
>    
> } 
> ```
> 
> }

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T10:16:16.577

假设您的网页中有一个要刷新的 DIV：

```
<div id="myDiv"> </div> 
```

要使用 javascript 刷新它，您只需选择它并更改 html 代码：

```
document.getElementById("myDiv").innerHtml = "Your new html code to display" 
```

如果您想处理表单、数据库查询...您必须使用 AJAX 来调用一些 php 脚本，例如无需重新加载当前页面...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T10:17:01.897

你在谈论 AJAX

查看[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)的 jQuery

但请考虑学习底层的 javascript 语言 - 从长远来看，你会更好 这里是一个简单的例子 [http://www.degraeve.com/reference/simple-ajax-example.php](http://www.degraeve.com/reference/simple-ajax-example.php)

ajax 背后的历史可以在这里找到[http://www.adaptivepath.com/ideas/ajax-new-approach-web-applications](http://www.adaptivepath.com/ideas/ajax-new-approach-web-applications)

# c++ - C++ 处理函数重载的更好方法

> ID：10086787
> 
> 赞同：2
> 
> 时间：2012-04-10T10:10:40.333
> 
> 标签：c++, overloading

我有如下代码：

```
void Foo(int& a, string& b, vector<int>& c) {
... // 30 lines of code are same as another function
... // 10 lines of code to parse and assign value to vector<int>& c
}

void Foo(int& a, string& b, map<string, int>& d) {
... // 30 lines of code are same as another function
... // 10 lines of code to parse and assign value to map<string, int>& d
} 
```

有什么办法可以避免重复这 30 行代码？在这种情况下我应该使用函数重载吗？

**编辑：**

如果代码不容易分离出来怎么办？像：

```
void Foo(int& a, string& b, vector<int>& c) {
  for() {
    if(m) ... // 30 lines of code are same as another function
    else if(n) ... // 30 lines of code are same as another function
    else if(o) ... // 30 lines of code are same as another function
    else if(p) ... // 10 lines of 'vector<int>& c' code
    else if(q) ... // 10 lines of 'vector<int>& c' code
  }
}

void Foo(int& a, string& b, map<string, int>& d) {
  for() {
    if(m) ... // 30 lines of code are same as another function
    else if(n) ... // 30 lines of code are same as another function
    else if(o) ... // 30 lines of code are same as another function
    else if(p) ... // 10 lines of 'map<string, int>& d' code
    else if(q) ... // 10 lines of 'map<string, int>& d' code
  }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T10:12:18.633

将 30 行重构为您在两个重载中调用的辅助函数。

编辑：如果代码足够不同以至于您很难将其分开，那么问题出在哪里？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T10:19:09.157

您可以分解出通用代码：

```
void helper(int& a, string& b) { 
  ... // 30 lines of common code
} 
```

然后在函数中使用它：

```
void Foo(int& a, string& b, vector<int>& c) {     
  helper(a, b);
  ... // 10 lines of code to parse and assign value to vector<int>& c     
}     

void Foo(int& a, string& b, map<string, int>& d) {     
   helper(a, b);
.  .. // 10 lines of code to parse and assign value to map<string, int>& d     
} 
```

或者，如果公共代码也包含对容器的引用，您可以使用模板：

```
template<template<typename T, typename Alloc> class Container>
void helper(int& a, string& b, Container& d) { 
  ... // 30 lines of common code
} 
```

注意：您必须使用模板特化，因为并非所有容器都具有相同的插入（或访问）方法（例如 vector、list: `push_back`; map: `insert`）

更新：在 OP 添加更多代码后：

如果唯一的区别在于容器的处理，但容器处理的“精神”非常相似，您可以为容器创建（模板）包装器并将包装器传递给一个通用函数：差异将被捕获包装器的不同实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T10:28:56.673

也许大多数常见的东西都可以用迭代器处理？

# c# - 多线程和事件

> ID：10086790
> 
> 赞同：2
> 
> 时间：2012-04-10T10:11:10.077
> 
> 标签：c#, multithreading, dotnet-httpclient

我在多线程和事件方面遇到了一些问题。

我有以下在几个线程中执行的函数：

```
private void GetProjectInformation(object obj)
{
    //Casten
    //string projectName = (string)obj;
    FilterOptions filter = (FilterOptions)obj;

    ProjectConnectionManager connectionManager = new ProjectConnectionManager();
    connectionManager.GetProjectInfo(filter);
    connectionManager.InfoReceived += delegate(object sender, ProjectInfoEventArgs e)
    {
        //Geupdate resultaat in de collection vervangen
        int index = 0;
        bool found = false;
        m_dispatcher.Invoke(DispatcherPriority.Normal, (Action)(() =>
        {
            foreach (ProjectInfo projectInfo in m_allProjects)
            {
                if (String.Equals(projectInfo.ProjectName, e.ProjectInfo.ProjectName))
                {
                    found = true;
                    ProjectInfo result = e.ProjectInfo;   
                    m_allProjects[index] = e.ProjectInfo;

                    break;
                }
                index++;
            }

            //Niet gevonden
            if (!found)
            {
                m_allProjects.Add(e.ProjectInfo);
            }
        }));
    };
} 
```

它被这样调用：

```
foreach (FilterOptions opt in m_projectsToShow)
{
    Thread thread = 
                 new Thread(new ParameterizedThreadStart(GetProjectInformation));
    thread.Start(opt);
} 
```

我面临的问题（我认为）是，之后

```
connectionManager.GetProjectInfo(filter); 
```

我的线程取消。我收到一个 AggregateException，它告诉我任务已关闭，所以我想这一定是问题所在。我想要实现的是以下。我的函数，因此当前线程，必须阻塞，直到该事件被触发：

```
connectionManager.InfoReceived += ... 
```

有什么解决办法吗？你能给我一些代码吗？

编辑：

这是 GetProjectInfo 方法：

```
public void GetProjectInfo(FilterOptions filter)
    {
        ProjectInfo result = new ProjectInfo();

        try
        {
            var task = m_httpClient.PostAsync(string.Format("api/project"), new ObjectContent<FilterOptions>(filter, XmlMediaTypeFormatter.DefaultMediaType));
            task.ContinueWith(r =>
            {
                try
                {
                    r.Wait();
                    if (r.Result.IsSuccessStatusCode)
                    {
                        Console.WriteLine("Project " + filter.ProjectName + " was succesfull...");

                        r.Result.Content.ReadAsAsync<ProjectInfo>().ContinueWith(l =>
                        {
                            result = l.Result;
                            OnProjectInfoReceived(new ProjectInfoEventArgs(result));
                        });
                    }
                    else
                    {
                        Console.WriteLine("Project " + filter.ProjectName + " failed!");
                    }
                }
                catch (AggregateException ex)
                {
                    Console.WriteLine(ex.ToString());
                }
            }).Wait(m_httpClient.Timeout);
        }
        catch (Exception e)
        {
            Console.WriteLine(e.ToString());
        }
    } 
```

我在那里得到了 AggregateException。

这是一个例外：

```
System.AggregateException was caught
  Message=One or more errors occurred.
  Source=mscorlib
  StackTrace:
       at System.Threading.Tasks.Task.ThrowIfExceptional(Boolean includeTaskCanceledExceptions)
       at System.Threading.Tasks.Task`1.get_Result()
       at Dashboard.Utils.ProjectConnectionManager.<>c__DisplayClass8.<GetProjectInfo>b__5(Task`1 r) in C:\Users\xxx\Documents\My Own Documents\xxx\ProjectConnectionManager.cs:line 79
  InnerException: System.Threading.Tasks.TaskCanceledException
       Message=A task was canceled.
       InnerException: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:28:27.173

`AggregateExceptions` are thrown by `Tasks`, but you are using `Threads` ??

Anyway, to block the thread until the event handler has run, you can use a `ManualResetEvent`:

```
private void GetProjectInformation(object obj)
{
    ...
    ProjectConnectionManager connectionManager = new ProjectConnectionManager();

    var mre = new ManualResetEvent( false );

    connectionManager.InfoReceived += delegate( ... )
    {
        ...
        mre.Set();
    };

    connectionManager.GetProjectInfo(filter);

    mre.WaitOne();
} 
```

# ssas - 跨交叉连接维度运行总计的 MDX 查询

> ID：10086791
> 
> 赞同：4
> 
> 时间：2012-04-10T10:11:22.190
> 
> 标签：ssas, mdx

我有一个具有以下三个维度的多维数据集：日期、时间和班次。我有一个名为 [Pieces Succeeded] 的度量，我想要一个 Shift 小时的 [Pieces Succeeded] 的运行总数。班次可以跨越一天以上，因此在以下查询中，我对日期和时间维度进行了交叉连接。

```
with
member [Measures].[Pieces Succeeded Running Total] as
    sum([Time].[Hierarchy].[Hour].FirstMember:[Time].[Hour].CurrentMember, [Measures].[Pieces Succeeded])
select
    { [Measures].[Pieces Succeeded], [Measures].[Pieces Succeeded Running Total] } on columns,
    nonempty(crossjoin([Date].[Month Hierarchy].[Day].Members, [Time].[Hierarchy].[Hour].Members)) on rows
from
    [OEE]
where
    [Shift].[Month Hierarchy].[Shift].&[501] 
```

这给出了以下结果：

```
Date        Hour  Pieces Succeeded  Pieces Succeeded Running Total
03 Apr 2011 22    6393              6393
03 Apr 2011 23    6424              12817
04 Apr 2011 00    3816              3816
04 Apr 2011 01    5510              9326
04 Apr 2011 02    2090              11416
04 Apr 2011 03    7489              18905
04 Apr 2011 04    7307              26212
04 Apr 2011 05    5706              31918 
```

我将如何让总和在交叉连接集上工作，以便运行总计可以跨天工作？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T19:26:52.423

我花了一整天的时间，终于弄明白了。我认为这对其他人可能很有价值，所以这是解决方案：

```
with

set DateHours as
    nonempty(crossjoin([Date].[Month Hierarchy].[Day].Members, [Time].[Hierarchy].[Hour].Members), [Measures].[Pieces Succeeded])

member [Measures].[Rank] as
    rank(([Date].[Month Hierarchy].CurrentMember, [Time].[Hierarchy].CurrentMember ), DateHours) 

member [Measures].[Running Pieces Succeeded] as 
    iif([Measures].[Rank] = 1, [Measures].[Pieces Succeeded], sum(head(DateHours, [Measures].[rank]), [Measures].[Pieces Succeeded]))

select
    { [Measures].[Pieces Succeeded], [Measures].[Running Pieces Succeeded] } on columns,
    non empty { DateHours } on rows

from
    [OEE]

where
    [Shift].[Month Hierarchy].[Shift].&[501] 
```

# eclipse-emf - GMF 编辑器 - 虚拟节点

> ID：10086792
> 
> 赞同：0
> 
> 时间：2012-04-10T10:11:33.900
> 
> 标签：eclipse-emf, eclipse-emf-ecore, eclipse-gmf

我是 GMF 开发的新手，我遇到了问题。我想为eclipse编写一个插件。因此我使用 GMF 仪表板视图。首先，我创建了一个表示下图的 ecore 文件。然后我生成一个 genmodel 文件，我可以使用它为编辑器的某些部分创建源代码。然后导出图形定义模型和工具定义模型并将它们组合成映射模型。这就是问题开始的地方。

在合并这两个文件的最后一步中，您可以编辑映射。但是只显示了一个节点（网页）和一个链接（类别）。

因此，如果我继续创建图表编辑器，我只能放置不可用的网页节点和类别链接。

经过长时间的搜索，我读到了一些关于“幻象节点”的东西。我认为，Category 和 Article 就是这样的“幻影节点”。所以我试图通过将它们与“MyWeb”链接起来来阻止它们。但随后一切都是由 MyWeb 创建的。所以没有我想要的树结构。

如果我只使用 EMF，它可以正常工作，但不能与 GMF 结合使用。

有人知道，如何避免幻像节点但保持结构？或者是否有可能与他们合作？

谢谢。

ps.：我是新人，所以不能发图。这是[图表](http://img198.imageshack.us/img198/8186/ecorediag.jpg)的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T22:26:17.987

您必须将子引用放在节点映射（类别）中，然后将另一个节点映射（文章）放在子引用中，然后您将可以访问图表的其他复合部分。我从未听说过幻象节点。

# jquery - jquery将输入值传递给fancybox

> ID：10086800
> 
> 赞同：0
> 
> 时间：2012-04-10T10:12:06.153
> 
> 标签：jquery, fancybox

我有一个花式框，我想显示一个在其父页面上输入的值，但它返回未定义......有什么想法可以让它工作吗？

```
$(this).parent().find('input[id="your_name"]').val(); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-10T10:50:00.243

你的问题不够清楚，我想我明白你的意思了，

```
$('#various').click(function(){

var txt=$('#myNameInput').val();
$.fancybox({
        'titlePosition'        : 'inside',
        'transitionIn'        : 'none',
        'content' : txt,
        'transitionOut'        : 'none',
    });

return false;

}); 
```

检查小提琴。

[http://jsfiddle.net/agentmilindu/QjcXA/1/](http://jsfiddle.net/agentmilindu/QjcXA/1/)

# asp.net-mvc-3 - 使用子集合创建父对象 - “Framework 4.1 MVC 3.0”

> ID：10086802
> 
> 赞同：2
> 
> 时间：2012-04-10T10:12:10.647
> 
> 标签：asp.net-mvc-3, razor, ado.net, entity-framework-4.1, edmx-designer

我想知道如何使用 ADO.net 实体数据模型一步创建父对象及其子集合。

**示例：** 这是父对象“Video”及其子 VideoData 图

![父对象](../Images/ed487f3dbeed983286f3b90ec247c181.png)

我需要使用视频数据创建视频对象

这是脚手架选项创建的剃刀视图

```
@model Test.Models.Video

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Video</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.AddedDate)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.AddedDate)
            @Html.ValidationMessageFor(model => model.AddedDate)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Data)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Data)
            @Html.ValidationMessageFor(model => model.Data)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.IsYouTube)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.IsYouTube)
            @Html.ValidationMessageFor(model => model.IsYouTube)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.ImageUrl)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.ImageUrl)
            @Html.ValidationMessageFor(model => model.ImageUrl)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.IsApproved)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.IsApproved)
            @Html.ValidationMessageFor(model => model.IsApproved)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.ApprovedBy)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.ApprovedBy)
            @Html.ValidationMessageFor(model => model.ApprovedBy)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.LastModifiedDate)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.LastModifiedDate)
            @Html.ValidationMessageFor(model => model.LastModifiedDate)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
} 
```

如您所见，razor 视图不包含与相关视频数据实体关联的任何字段。

我的问题是：如何将 videoData 添加到视频创建过程中。

如果它可能有帮助，这里是`HttpPost`Create in the`VideoController`

```
[HttpPost]
    public ActionResult Create(Video video)
    {
        if (ModelState.IsValid)
        {
            db.Videos.AddObject(video);
            db.SaveChanges();
            return RedirectToAction("Index");  
        }

        return View(video);
    } 
```

我需要发布的视频对象包含其关联`VideoData collection`

请指教

# c# - C# 异步调用超时

> ID：10086803
> 
> 赞同：1
> 
> 时间：2012-04-10T10:12:14.483
> 
> 标签：c#, asynchronous, timeout

在 C# 中进行异步调用后，我希望能够测试超时，因此我不会无限期地等待答案。这是我的代码：

```
RemoteAsyncDelegate RemoteDel = new RemoteAsyncDelegate(obj.MethodHello);
// Call delegate to remote method
IAsyncResult RemAr = RemoteDel.BeginInvoke(null, null);
Console.WriteLine(RemoteDel.EndInvoke(RemAr)); 
```

有没有办法`EndInvoke`等待有限的时间（超时）？

如果没有，是否有替代方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:44:13.467

您可以尝试以下方法；

```
if(RemAr.AsyncWaitHandle.WaitOne(1000)) // timeout value
{
   Console.WriteLine(RemoteDel.EndInvoke(RemAr));
}
else
{
   //throw exception etc.
} 
```

# github - 安装 Octopress 后我无法进行任何修改

> ID：10086806
> 
> 赞同：0
> 
> 时间：2012-04-10T10:12:19.863
> 
> 标签：github

我已经使用 Octopress 文档设置了 Octopress。
我在 GitHub 上安装了 Octopress。我的操作系统是 Ubuntu。
我遇到了一些事情：

1.  当我修改`_config.yml`, 和`git push origin source`. 但是网络并没有改变。
2.  当我在 octopress_path/source 中添加 CNAME 时，`git push origin source`. 但我发现 CNAME 上没有`master branch`，而且 CNAME 位于“源分支”。
3.  当我添加了一篇文章，并生成它。在我之后`git push origin source`，GitHub 有文章，但是 Web 还是什么都不是。

我是 octopress 的新手，我用谷歌搜索，但我不知道为什么。
我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T10:24:00.983

你一定忘记了运行：

```
$ rake deploy 
```

它将帮助您生成`master`分支（这是要显示的站点），并将自动推送到 github。这`source`只是您网站的源代码，不用于展示。

**注意**：每次修改（或添加）帖子并准备部署时，都需要运行`rake deploy`. 并且`rake preview`用于本地测试。自己看官方文档。:)

* * *

如果是第一次，则需要运行

```
$ rake setup_github_pages 
```

为您设置 github 页面。

然后每次添加帖子时，运行

```
$ rake generate
$ rake deploy 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T03:14:46.923

# php - 最佳 PHP 数据网格

> ID：10086808
> 
> 赞同：3
> 
> 时间：2012-04-10T10:12:28.447
> 
> 标签：php, mysql, ajax

你能告诉我好的 p​​hp ajax 和 mysql 数据网格吗？它应该具有某些功能，例如过滤，搜索和分组。我需要从数据库生成（如果它是开源的可能会更好）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T10:25:06.820

那么试试这个：

[http://datatables.net/](http://datatables.net/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T10:13:50.957

如果您想要最好的 ajax 数据网格，请查看此网格：http: [//flexigrid.info/](http://flexigrid.info/)

申请非常简单。适用于 json 和 jquery

# android - Android JSON解析器每次都获得相同的值

> ID：10086809
> 
> 赞同：1
> 
> 时间：2012-04-10T10:12:35.803
> 
> 标签：android, json, parsing

我正在尝试解析从 Web 服务器接收到的 json 字符串作为响应，但我有一个奇怪的问题。在我的 json 中，我有一些`JSONObjects`，我永远不知道它们的名字是什么，我应该根据它有多少来循环它们`keys`。但问题在于我使用的代码每次都获得相同的值，即使我知道还有其他值也是如此。

这是我正在使用的鳕鱼：

```
JSONObject json = (JSONObject) new JSONTokener(jsonBuffer).nextValue();

        JSONObject country = json.getJSONObject(String.valueOf(json.keys().next()));
        Iterator<Object> keys = json.keys();
        while (keys.hasNext()) {

            String countryName = country.getString("country_name");
            Log.e("","country_name: "+countryName);

            String data = country.getString("data");
            Log.e("","data : "+data);
        } 
```

这是我的 json 的样子：

```
"AZ": {
    "country_name": "Azerbaijan",
    "data": {
        "181261": {
            "time_published": "2012-04-04 15:55:29",
            "title": "Azerbaijan, Turkey not to change stakes in TANAP",
            "body": null
        },
        "181260": {
            "time_published": "2012-04-04 15:53:10",
            "title": "SOCAR mulls acquisition of Swiss refinery",
        },
        "181061": {
            "time_published": "2012-04-03 05:53:00",
            "title": "Azerbaijan, Lithuania mull LNG terminal investment",
        },
        // and so on....
    }
}, // and it keeps going on 
```

任何想法我的 jsonParser 应该是什么样子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:22:30.720

我对 Android 和 Java 不是很熟悉，但我认为应该是：

```
// parse JSON
JSONObject json = (JSONObject) new JSONTokener(jsonBuffer).nextValue();

// get all keys (they are probably strings)
Iterator<String> keys = json.keys();

// as long as there are more keys
while (keys.hasNext()) {
    // get the object corresponding to the next key
    JSONObject country = json.getJSONObject(keys.next());

    String countryName = country.getString("country_name");
    Log.e("","country_name: "+countryName);

    String data = country.getString("data");
    Log.e("","data : "+data);
} 
```

从我的评论：

在我看来，您有一个无限`while`循环，实际上它永远不会为`country`.

您必须遍历所有键，获取键的国家对象，然后访问它的值。

目前您正在获取第一个国家元素，获取键并检查迭代器是否包含键。但是您并没有推进迭代器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T10:22:41.327

你的代码不应该是：

```
 Iterator<Object> keys = json.keys();
    while (keys.hasNext()) {
        JSONObject country = json.getJSONObject(String.valueOf(keys.next()));
        //etc.
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T10:35:39.947

它不会遍历国家名称，因为代码只是检查它是否有下一个并且永远不会到达下一个。但其余代码似乎也不起作用。您需要首先将 json.keys() 获取到局部变量，然后对其进行迭代。

# android - 将按钮定位到背景图像上预定义位置的最佳方法？

> ID：10086810
> 
> 赞同：1
> 
> 时间：2012-04-10T10:12:40.737
> 
> 标签：android, android-layout

我经常在设计师制作背景并绘制按钮应该放置的位置完成设计。就像在这张素描图片上一样

![在此处输入图像描述](../Images/22337a381b5e4586347daae0ea76f265.png)

这个例子中的背景很简单，但在设计中它有很多图形，每个按钮都必须放置在其设计的位置，否则最终的屏幕看起来会不好看。

到目前为止，为了在每个屏幕和分辨率上放置按钮，我必须为 MDPI 设置一个恒定的位置值，然后使用该`scale`值 ( `getResources().getDisplayMetrics().density`) 计算其他分辨率的位置。

这是一个非常漫长而繁琐的过程，所以我想知道是否有更好的方法。当您想将按钮或其他元素定位到其精确位置时，您使用哪种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T10:41:56.990

在大多数情况下，屏幕元素的绝对定位在 Android 上是不合适的，因为设备和屏幕太多。最好的方法通常是使用像RelativeLayout 这样的视图组并相对于彼此放置项目，同时提供各种屏幕密度的位图。但是，您应该能够从中获得所需的东西。

最好有包含灵活性元素的设计，所以如果设计要求一切都在正确的位置，我敢于建议设计是问题，而不是 Android。

# javascript - Javascript的window.open函数不一致，按预期不打开弹出

> ID：10086811
> 
> 赞同：3
> 
> 时间：2012-04-10T10:12:44.297
> 
> 标签：javascript, window

好吧，我要疯了。我正在尝试实现一个基本的弹出窗口来显示图像。如果我的 javascript 代码在带有 onclick 属性的 HTML 标记中完全指定，则窗口会正确弹出。如果从 HTML 文档开头的脚本标记或单独的 js 文件调用我的 IDENTICAL javascript 代码，则链接（或在我的情况下为图像）不是在弹出窗口中打开，而是在同一个窗口中打开。<沮丧>

这将打开一个弹出窗口：

```
<a href="test.jpg" onclick="window.open('test.jpg','test_name','width=500,height=500,scrollbars=no'); return false">test_name</a> 
```

这不会打开弹出窗口：

```
function cleanPopup(url, title) {
window.open(url, title, 'width=500,height=500,scrollbars=no');
return false;
}

<a href="test.jpg" onclick="return cleanPopup('test.jpg', 'test_name')">test_name</a> 
```

任何帮助，将不胜感激。

PS：在 Chrome 和 Firefox 中测试。

编辑：

我发现了我的问题。我原本只调用了head标签中的js文件。当使用模板工具（在我的例子中为模板工具包）的多个脚本创建 div 的层时，有一些东西使 head 元素中的原始脚本元素对更深的子元素似乎不可见。

我不知道到底发生了什么，我也没有时间去探索它。我添加了这个编辑，以防其他人有类似的问题，并以某种方式偶然发现这个线程。如果有人理解这种现象，并且可以解释它，请做。

编辑2：

**window.open 方法的“name”参数不能包含空格，以便弹出窗口在 IE 中工作。谢谢 M$。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T11:01:19.230

[在这里演示](http://plungjan.name/test/test_popup.html)

在我看来，这段代码是最接近万无一失的。

经测试

*   Windows - Fx、Chrome、IE8 和 Safari
*   iPhone：移动 Safari

1.  如果允许，添加目标会使链接在新窗口或选项卡中打开 - 以防脚本因任何原因失败 - 这是一个有用的副作用，但不是问题的答案。
2.  如果 window.open 失败，则返回 true 也会使点击跟随链接，希望调用目标 - 请注意，某些浏览器不再对目标做出反应。
3.  第三个参数中的高度（和宽度）将强制在新窗口而不是新选项卡中打开，除非浏览器设置为在选项卡中打开所有新窗口

```
<html>
<head>
<script type="text/javascript">
window.onload=function() {
 document.getElementById('popup').onclick=function() {
   var w = window.open(this.href, this.target, 
       'width=500,height=500,scrollbars=no');
    return (!w); // opens in new window/tab if allowed
  }
}
</script>
</head>
<body>

<a id="popup" href="test.jpg" target="test_name">test_name</a>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T10:17:58.457

使用目标="_blank"

```
<a href="whatever" target="_blank"> ... 
```

来自 HTML，或

```
window.open(url, '_blank', options) 
```

来自 javascript

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-19T12:39:36.387

使新窗口标题随机

```
onclick="PopupCenter(this.href,'random','600','700','yes'); return false;" 
```

并在功能上：

```
if(title=='random')
{
title = randomID();
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-10T10:20:21.890

试试这个

```
function mypopup()
{
    mywindow = window.open("http://www.test.com", "mywindow", "location=1,status=1,scrollbars=1,  width=100,height=100");
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-10T10:28:45.957

确保将 javascript 代码放在 Head 块中

```
<head>
<script type="text/javascript" language="JavaScript">
function cleanPopup(url, title) {
    window.open(url, title, 'width=500,height=500,scrollbars=no');
    return false;
}
</script> 
```

在体内：

```
<a href="" onclick="cleanPopup('test.jpg','test_name')">test_name</a> 
```

它对我有用，在 Firefox 和 IE 中都没有任何问题

# database - 批量上传数据到CRM云系统的设计

> ID：10086815
> 
> 赞同：0
> 
> 时间：2012-04-10T10:12:55.793
> 
> 标签：database, upload, bulk

我们必须设计一个界面来将构建的数据上传到基于云的 CRM 系统中。批量上传将定期执行以进行实时数据推送。有2种方法。

1.  转换后的数据存储在队列中，然后执行计划作业，将数据批量加载到 CRM 系统中。
2.  转换后的数据存储在数据库表中，然后执行计划作业，将数据批量加载到 CRM 系统中。

主要问题之一是云 CRM 系统不能接受 2 个具有相同主 ID 的请求，这意味着在上传数据之前过滤数据。

不知何故，我不习惯将队列用作持久组件。数据库表可以更好地控制错误处理[系统/数据]、持久存储 [CLOB]、调试、过滤。

我可以获得队列或数据库方法的优缺点吗？这将帮助我做出设计决定。此外，如果有人可以启发设计策略，那就太好了。

在此先感谢 Makarand Parab

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T10:19:31.800

您想要做的是技术上称为数据的 ETL。有很多工具可用于加载数据。您是否要编写自己的工具来提取和加载数据。第三种方法也可以从文件加载。如果不是实时上传，一般不使用队列。Abinitio 是流行的工具。您可以使用 autosys 工具安排作业。但两者都是付费软件。您的设计涉及 2 个阶段。(a) 清理数据以删除重复数据 (b) 将数据加载到 CRM 系统中。要准确设计界面，请告诉我们您的 CRM 支持什么界面。（基于文件、SQL 等）

# c# - 使用具有 DataMember 属性的锁定属性

> ID：10086817
> 
> 赞同：1
> 
> 时间：2012-04-10T10:13:10.070
> 
> 标签：c#, wcf

我在多线程应用程序（托管在 Windows 托管服务中的 WCF 服务）中使用这样的属性：

```
private object lockObj = new object();
private string val = string.Empty;

[DataMember]
public string Value
{
    get 
    {
        lock(lockObj)
        {
            return val;
        }
    }
    set 
    {
        lock(lockObj)
        {
            val = value;
        }
    }
} 
```

在我删除锁之前，通过 WCF 服务发送失败，然后它就可以工作了。（没有当前异常，服务失败而未登录我的跟踪）

是否有可能通过锁来解决它，或者我必须将它转换为一些没有锁的简化对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T21:21:10.230

所以当我没有得到答案时，我写了我自己的解决方案。

正如我在评论中所写，Value 属性的类型是`List<string>`（后来更改为`List<SomeMyObject>`），当我删除锁时，由于集合被修改，我得到了异常。然后我创建一个方法，该方法对我的列表进行 DeepCopy，我通过 WCF 发送的是前一个对象的骨架版本（从所有内部对象中，我只采用 Ids）：

```
 public Skelet ToSkelet()
    {
        var result = new Skelet
        {
            Waiting = Waiting.DeepClone().ConvertAll(x => x.Id),
            Open = Open.DeepClone().ConvertAll(x => x.Id),
            Finished = Finished //this one is int
        };

        return result;
    } 
```

在 SO 上找到了 DeepClone 方法：

```
 public static T DeepClone<T>(this T obj)
    {
        using (var ms = new MemoryStream())
        {
            var formatter = new BinaryFormatter();
            formatter.Serialize(ms, obj);
            ms.Position = 0;

            return (T)formatter.Deserialize(ms);
        }
    } 
```

# hadoop - wordcount 文件常用词

> ID：10086818
> 
> 赞同：0
> 
> 时间：2012-04-10T10:13:12.343
> 
> 标签：hadoop, mapreduce, word-count

我已经设法以非分布式模式运行 Hadoop wordcount 示例；我在一个名为“part-00000”的文件中得到输出；我可以看到它列出了所有组合输入文件的所有单词。

在跟踪 wordcount 代码后，我可以看到它需要行并根据空格分割单词。

我正在想办法只列出多个文件中出现的单词及其出现次数？这可以在 Map/Reduce 中实现吗？-添加-这些更改是否合适？

```
 //changes in the parameters here

    public static class Map extends MapReduceBase implements Mapper<Text, Text, Text, Text> {

         // These are the original line; I am not using them but left them here...
      private final static IntWritable one = new IntWritable(1);
      private Text word = new Text();

                    //My changes are here too

        private Text outvalue=new Text();
        FileSplit fileSplit = (FileSplit)reporter.getInputSplit();
        private String filename = fileSplit.getPath().getName();;

      public void map(Text key, Text value, OutputCollector<Text, Text> output, Reporter reporter) throws IOException {

        String line = value.toString();
        StringTokenizer tokenizer = new StringTokenizer(line);
        while (tokenizer.hasMoreTokens()) {
        word.set(tokenizer.nextToken());

          //    And here        
              outvalue.set(filename);
          output.collect(word, outvalue);

        }

      }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:21:12.720

您可以修改映射器以将单词作为键输出，然后将 Text 作为表示单词来自的文件名的值。然后在你的reducer中，你只需要删除文件名并输出那些单词出现在多个文件中的条目。

获取正在处理的文件的文件名取决于您是否使用新的 API（mapred 或 mapreduce 包名称）。我知道对于新的 API，您可以使用[getInputSplit](http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/mapreduce/MapContext.html#getInputSplit%28%29)方法从 Context 对象中提取映射器输入拆分（然后可能是`InputSplit`a `FileSplit`，假设您使用的是`TextInputFormat`）。对于旧 API，我从未尝试过，但显然您可以使用名为`map.input.file`

这也是引入组合器的好选择 - 从同一个映射器中删除多个单词出现。

**更新**

因此，针对您的问题，您尝试使用一个名为reporter 的实例变量，该变量在映射器的类scopt 中不存在，修改如下：

```
public static class Map extends MapReduceBase implements Mapper<Text, Text, Text, Text> {
  // These are the original line; I am not using them but left them here...
  private final static IntWritable one = new IntWritable(1);
  private Text word = new Text();

  //My changes are here too
  private Text outvalue=new Text();
  private String filename = null;

  public void map(Text key, Text value, OutputCollector<Text, Text> output, Reporter reporter) throws IOException {
    if (filename == null) {
      filename = ((FileSplit) reporter.getInputSplit()).getPath().getName();
    }

    String line = value.toString();
    StringTokenizer tokenizer = new StringTokenizer(line);
    while (tokenizer.hasMoreTokens()) {
      word.set(tokenizer.nextToken());

      //    And here        
      outvalue.set(filename);
      output.collect(word, outvalue);
    }
  }
} 
```

（真的不知道为什么SO不尊重上面的格式......）

# .net - 实体框架错误：找不到 X 的概念模型类型

> ID：10086834
> 
> 赞同：5
> 
> 时间：2012-04-10T10:14:14.663
> 
> 标签：.net, entity-framework, entity-framework-4, entity-framework-4.3

我有一个包含两个文件夹的演示项目：

```
Data
   /DbContext
   /EntityFramework 
```

两者都有一个 EDMX，对于 DbContext 文件夹，我有一个 DbContext 生成器 T4 模板设置。每当我尝试运行我的 DbContext 示例时，都会收到一条错误消息，提示“找不到 X 的概念模型类型”，它无法加载 EntityFramework 文件夹的 EDMX 中定义的实体的元数据......为什么在世界上它会这样做吗？我没有在 EntityFramework 文件夹中为 EDMX 设置任何 T4 模板，也没有将 EDMX 复制过来，而是在 DbContext 中创建了一个新模板。我验证了连接字符串映射到正确的 EDMX...

为什么我得到错误的任何想法：找不到X的概念模型类型？

谢谢。

# php - 使用 curl 或 file_get_contents 从同一域获取文本文件

> ID：10086836
> 
> 赞同：0
> 
> 时间：2012-04-10T10:14:20.867
> 
> 标签：php, twitter, curl, file-get-contents

我正在使用 cron 作业来获取用户的推文等，我们将其保存在文本文件中。现在，当用户访问该站点时，我们需要显示这些内容。以下哪个更好？

*   卷曲或 file_get_contents()

我对此进行了很多研究，发现 curl 比 FGC 更好。但所有这些都是针对外部域的。我们需要的是同域的答案。

你也能建议一个更好的方法来做到这一点吗？而不是将其保存为文本文件并呈现给用户？如果我们为这些内容创建一个额外的数据库表会更有效吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T10:15:50.200

由于生成的 txt 文件与您的网页位于同一台服务器上，因此无需使用 cURL 获取它，只需直接从文件系统（FGC 或 fopen）读取它即可。

至于你的第二个问题：这取决于。如果只有一个用户需要该文件的内容，那么将其存储在 txt 文件中就可以了（只要您没有大量用户，就会遇到 I/O 瓶颈）。将它们存储在数据库中也很好。就像我说的“这取决于”。如果当前的解决方案有效，请坚持下去。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T10:18:58.273

文件获取内容（）；如果服务器上已经存在 curl，则不需要使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T10:30:36.033

始终使用 file_get_contents() 来获取文件系统中文件的内容。你不需要发出 HTTP 请求，因为如果文件在你的文件系统中，那么你可以简单地在那里读取它。

例如，如果您将推文存储在文件 /my-tweets/user124.txt 中，那么您可以阅读它：

```
$tweets=file_get_contents('/my-tweets/user124.txt'); 
```

它比 cURL 更快，因为它不发出任何 HTTP 请求，而且您也不必担心 allow_url_fopen PHP 设置。

此外，关于 fopen() 和 file_get_contents()，后者更有利于代码的可读性，除非您想逐行读取推文文件（在这种情况下 fopen() 是更好的选择）。

# zend-framework - Zend框架中ACL中的资源是什么意思

> ID：10086837
> 
> 赞同：0
> 
> 时间：2012-04-10T10:14:28.610
> 
> 标签：zend-framework, resources, acl

我想知道 ACL 中的资源是什么，是模块、模块中的控制器还是模块中控制器中的动作。

在[文档](http://framework.zend.com/manual/en/zend.acl.refining.html)中，资源（时事通讯、新闻、最新）等并不清楚它们是什么。

同样在这个[例子](http://framework.zend.com/wiki/display/ZFUSER/Using+Zend_Acl+with+a+database+backend#UsingZend_Aclwithadatabasebackend-DatabaseInitialisation%3a)中，资源不清楚！！！

```
[mainMenu]
login          = Everyone
applications   = Everyone
preferences    = User
administration = Implementor

[userPreferences]
details = User
params  = User
themes  = User 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:17:27.683

资源只是您想要限制访问的东西。它可以是页面、数据库中的记录或应用程序需要的任何内容。

我在 Zend_Acl 上写了一个由三部分组成的系列，其中我谈到了哪些资源是其中之一：[http ://codeutopia.net/blog/2009/02/06/zend_acl-part-1-misconceptions-and-simple- acls/](http://codeutopia.net/blog/2009/02/06/zend_acl-part-1-misconceptions-and-simple-acls/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T10:16:41.397

例如

```
new Zend_Acl_Resource('someResource') 
```

表示`someResource`指向 PHP 模块/部分，假设它是可访问的，但它已被控制，因此只有授权角色才能访问它。

# asp.net - ASP.NET - 访问子页面中的控件

> ID：10086845
> 
> 赞同：0
> 
> 时间：2012-04-10T10:15:15.683
> 
> 标签：asp.net, controls, master-pages

我有一个母版页，那里只有一个菜单项和一个内容占位符。我有另一个继承自此母版页的 Web 表单。正常情况下，我已将所有控件放在 contentplaceholder 中。在我的表单的 Page_Load 事件中，我想设置所有下拉列表控件的 Enabled=false。为此，我写：

```
 foreach (Control control in Page.Controls)
    {
        if (control is DropDownList)
        {
            DropDownList ddl = (DropDownList)control;
            ddl.Enabled = false;
        }
    } 
```

但是所有下拉列表都保持启用状态。当我检查 Page.Control 的计数时，我只看到一个控件，它是表单母版页的菜单项。我应该怎么做才能获得当前表单中的控件列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:16:35.867

这是对我有用的代码。您是对的，无法从页面访问内容控件，因此您使用 Master.FindControl... 代码。请务必将 ContentPlaceHolderID 参数插入 Master.FindControl("righthere") 表达式。

```
ContentPlaceHolder contentPlaceHolder = (ContentPlaceHolder)Master.FindControl("MainContent");
if(contentPlaceHolder != null)
{
    foreach (Control c in contentPlaceHolder.Controls)
    {
        DropDownList d = c as DropDownList;
        if (d != null)
            d.Enabled = false;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T10:22:28.390

您的 foreach 循环将不起作用，因为您的控件可以有子控件，它们也可以有子控件，然后是 DDL。

我更喜欢首先创建一个控件列表，然后遍历该列表，其中填充了您想要的 DDL 控件。

```
public void FindTheControls(List<Control> foundSofar, Control parent) 
{
  foreach(var c in parent.Controls) 
  {
    if(c is IControl) //Or whatever that is you checking for 
    {
       if (c is DropDownList){ foundSofar.Add(c); } continue;

       if(c.Controls.Count > 0) 
       {
           this.FindTheControls(foundSofar, c);
       }
     }
  }  
} 
```

稍后你可以直接循环通过foundSofar，它肯定会包含其中的所有DDL控件。

# delphi - DelphiXE2 与 Delphi7。dll 行为取决于调用进程

> ID：10086853
> 
> 赞同：1
> 
> 时间：2012-04-10T10:16:01.867
> 
> 标签：delphi, dll, delphi-xe2

我的机器上安装了 Delphi7 和 DelphiXE2（均为 32 位）。我需要使用来自 dll 'libnodave.dll' 的函数 openSocket()。

问题是，在 Delphi7 和 D7 编译的 .exe 文件中，此函数会立即执行并返回一些整数值，但在 DelphiXE2 中它会停止 3 秒（我猜是超时）并返回零。我试图在 D7 中编写一种“代理 dll”，女巫在内部从原始 dll 调用相同的函数，但它不起作用。现在我很感兴趣，除了本地函数参数之外，还有哪些程序执行的其他信息传递给了 dll。根据谁调用该函数，库如何影响其行为。有没有办法将 DelphiXE 编译器设置为 D7 编译器？另一个小问题：调试时如何查看程序中定义的所有全局参数（如 {$DEFINE WIN32}）。

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-13T16:39:31.727

在 Delphi 7 和 XE2 中调用 dll 函数没有区别。但是函数声明为

```
function openSocket(port:longint;name:pchar):longint; stdcall;
    external LibName {$ifdef WIN32} name 'openSocket'{$ENDIF}; 
```

其中 PChar在 Delphi 7 中，但在 XE2 中是`AnsiChar`Unicode ( )。`WideChar`我猜它仍然是这个 dll 中的 AnsiChar，你可以：

1.  openSocket(yourPort, PAnsiChar(UTF8Encode(name))) 其中名称是`string`类型（您将看到警告）
2.  在 nodave.pas 中重命名所有出现的`pchar`to并使用and代替and 。`PAnsiChar``AnsiString``PAnsiString``string``pchar`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T16:41:28.340

> 问题是，在 Delphi7 和 D7 编译的 .exe 文件中，此函数会立即执行并返回一些整数值，但在 DelphiXE2 中它会停止 3 秒（我猜是超时）并返回零。

函数的声明是什么`openSocket()`样的？两个版本的调用约定是否匹配？函数有`String`参数吗？请记住，`String`在 D7 中是 Ansi，在 DXE2 中是 Unicode。确保使用相同的调用约定声明函数，并且在两个版本中使用正确的数据类型声明所有参数。

> 除了本地函数参数之外，我对程序执行的其他信息是否传递给 dll 感兴趣。

除了参数值之外，没有任何信息传递给函数。

> 有没有办法将 DelphiXE 编译器设置为 D7 编译器？

不，您不能让 XE2 编译器像 D7 编译器一样工作。

> 调试时如何查看程序中定义的所有全局参数（如 {$DEFINE WIN32}）。

无法在调试时查看活动的编译器定义。但是，在编辑时，有一个键盘快捷键`Ctrl`++ ，可以将当前活动的 DEFINE 插入到您的源代码中`O`。`O`

# wpf - 为什么我的 OpacityMask 会导致渲染错误？

> ID：10086864
> 
> 赞同：1
> 
> 时间：2012-04-10T10:16:41.803
> 
> 标签：wpf, wpf-controls

我在 WPF 中结合使用 OpacityMask 和 Adorners 时遇到了一些麻烦。

基本上有一个应用了不透明蒙版的图像，在它上面有一个装饰器，这是一个可移动的指南。

移动 Adorner 时，图像中有伪影。沿着装饰器的边界框，出现了 1px 宽的线条。在这些线上，图像变得透明（尽管该区域没有被不透明蒙版透明）。这种行为取决于两个（afaik）因素：

*   当我将不透明度蒙版设置为 null 时，没有可见的伪影。
*   当我更改缩放变换时，工件的不透明度正在发生变化。

知道什么可能导致这种行为或如何避免它吗？

这是一些代表我的布局的 XAML 代码。这不是实际的布局代码。我试图将布局内容减少到我认为与问题有关的关键组件。

```
<ScrollViewer>
    <ContentControl> <!-- control for zooming the content with a render transform -->
        <Image Source="..." /> <!-- Background-Image -->
        <Image Source="..."> <!-- Foreground-Image with Mask -->
            <Image.OpacityMask>
                <VisualBrush />
            </Image.OpacityMask>
        </Image>
    </ContentControl>
    <AdornerLayer>
        <myControls:GuideLineAdorner />
    </AdornerLayer>
</ScrollViewer> 
```

工件线的屏幕截图： ![工件截图](../Images/1d3dc83d1656f4ae4dfa2da74449d30d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:53:20.950

我最近遇到了这个问题。经过一番谷歌搜索后，我遇到了[这个 msdn 论坛帖子](http://social.msdn.microsoft.com/Forums/en/wpf/thread/30efb8cc-8042-448a-9855-dec477442adf)，它为我提供了所需的解决方法。

就我而言，我有一个带有 OpacityMask 的网格。Grid 的孩子们正在展示这些工件。为了防止显示工件，我可以在我的网格[上将 RenderOptions.EdgeMode](http://msdn.microsoft.com/en-us/library/system.windows.media.renderoptions.edgemode.aspx)附加属性设置为“别名”。

# iphone - Objective c 将图像从 twitter 导入到 iphone 应用程序

> ID：10086867
> 
> 赞同：1
> 
> 时间：2012-04-10T10:16:56.590
> 
> 标签：iphone

我想将 twitter 集成到我的 iphone 应用程序中，所以我从 Ray wenderlich [http://www.raywenderlich.com/5519/beginning-twitter-in-ios-5](http://www.raywenderlich.com/5519/beginning-twitter-in-ios-5)阅读了这个很好的教程 ，但是我想要做的是当用户从他的 twitter 帐户中选择任何图像（从我的应用程序登录到 twitter 后）我想将该图像导入我的应用程序并显示它，我是新手，任何人都可以在这个 plz 中指导我。感谢和问候萨德。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:28:47.237

我会使用 Twitter API 来处理这个问题。您需要使用 OAuth 进行身份验证，并且可以直接使用 API。如果是公开数据，则无需授权。阅读有关 OAuth 的信息。apigee 团队在 Youtube 上有很好的 OAuth 教程。他们会让你开始帮助。还有一本关于 Auth2.0 的书。

# css - 自定义 dojo 的 ComboBox

> ID：10086869
> 
> 赞同：1
> 
> 时间：2012-04-10T10:16:59.900
> 
> 标签：css, dojo

如何在*dijit.form.ComboBox*或*dijit.form.FilteringSelect的 ▼ 标志处添加/替换一些图片*

鼠标移入移出时图片可以切换。

以及如何更改 ComboBox 的弹出窗口的背景颜色。

[喜欢这个网站](http://logistics.nostramap.com/)

（我需要像从那个站点复制原件一样。但是这个站点使用自定义小部件然后我不知道如何获取源代码。）

如果有人知道如何定制这样的，请教我。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T11:57:17.227

更改 Dojo 小部件的外观和感觉是使用主题完成的。 [http://dojotoolkit.org/reference-guide/1.7/dijit/themes.html](http://dojotoolkit.org/reference-guide/1.7/dijit/themes.html)

[您可以在http://archive.dojotoolkit.org/nightly/dojotoolkit/dijit/themes/themeTester.html](http://archive.dojotoolkit.org/nightly/dojotoolkit/dijit/themes/themeTester.html)看到默认发布的主题 （注意：此页面基于夜间构建，因此有时会损坏）

使用 CSS 应用主题。
我会创建自己的 CSS 样式表。将主题名称添加到正文节点。

```
<body class="tundra myTheme"> 
```

您正在寻找的特定 css 是

```
.myTheme .dijitComboBox .dijitDownArrowButton {} /* The grey box */
.myTheme .dijitComboBox .dijitDownArrowButton .dijitArrowButtonInner { /* The arrow */
   background: url(images/spriteArrows.png) no-repeat scroll 0 center;
} 

/* Hover */
.myTheme .dijitComboBox .dijitDownArrowButtonHover {} /* The grey box */
.myTheme .dijitComboBox .dijitDownArrowButtonHover .dijitArrowButtonInner {} /* The arrow  */

/* Active (mouse down) */
.myTheme .dijitComboBox .dijitDownArrowButtonActive {} /* The grey box */
.myTheme .dijitComboBox .dijitDownArrowButtonActive .dijitArrowButtonInner {} /* The arrow */ 
```

在浏览器中使用开发人员工具将帮助您确定要覆盖的 css 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T04:13:55.593

我仔细查看了代码，然后发现它没有使用*dijit.form.ComboBox*或*dijit.form.FilteringSelect*。

他在普通的 HTML 中使用`<div>` `<input>` `<a>`

这里[http://jsfiddle.net/fQZFr/](http://jsfiddle.net/fQZFr/)

我完成了。

# jquery - 类型后删除占位符（而不是焦点后）

> ID：10086872
> 
> 赞同：2
> 
> 时间：2012-04-10T10:17:10.793
> 
> 标签：jquery, css, input, placeholder

我正在使用 Daniel Stocks 的 jQuery 占位符插件。

这是插件： [https ://github.com/danielstocks/jQuery-Placeholder/blob/master/jquery.placeholder.js](https://github.com/danielstocks/jQuery-Placeholder/blob/master/jquery.placeholder.js)

它实际上适用于所有字段，除了以下小问题：在 Chrome 中，当焦点位于字段上时，占位符会一直存在，直到您键入内容为止。但在 IE 和 FF 中，占位符文本在焦点后被删除。我希望他们都喜欢在 Chrome 中表现。

事情是在 chrome 中，占位符是本机支持的，所以即使没有插件，它也能按照我喜欢的方式工作。在 FF 中，除了前面提到的问题外，它也可以在没有插件的情况下工作。正如您可能已经猜到的那样，在 IE 中，如果没有插件，它就无法工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T11:30:50.077

我是插件的作者。如果你真的想禁用对 Chrome 的原生支持，你可以编辑代码中的第 71 行：

```
var NATIVE_SUPPORT = !!("placeholder" in document.createElement( "input" )); 
```

至：

```
var NATIVE_SUPPORT = false 
```

通过这样做，您只需让所有浏览器都使用该插件，即使是那些具有本机支持的浏览器。

我想指出，这不仅仅是“Chrome”定义的行为。Safari（和 iOS 上的移动 Safari）就是这样运行的。这些用户很可能“习惯”了这种行为，所以也许会问一个问题，你到底想达到什么目的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T23:32:15.553

我需要类似的东西，并对你提到的 jquery ui 占位符插件做了一些修改。

[http://jsfiddle.net/sigmabetatooth/5j55m/](http://jsfiddle.net/sigmabetatooth/5j55m/)

随时反对它并分享您的想法。

您也不会通过退格键或占位符返回的其他方式清除字段，并且在存在占位符时选择输入时，光标将放置在文本的开头。

@Daniel 如果您有兴趣我将其推送给您，请告诉我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T10:21:12.090

替换第 77 行源代码中的以下部分：

```
input.focus(function() {
    placeholder.hide();
}); 
```

有了这个：

```
input.keyup(function() {
    if (input.val() != "") {
        placeholder.hide();
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T09:33:21.343

您可以使占位符在 IE 中使用

//在IE中设置占位符

```
$('input[type="text"]').each(function(){        
    var input = $(this);                
    $(input).val(input.attr('placeholder'));                
    $(input).focus(function(){
         if (input.val() == input.attr('placeholder')) {
            input.val('');
         }
    });     
    $(input).blur(function(){
        if (input.val() == '' || input.val() == input.attr('placeholder')) {
            input.val(input.attr('placeholder'));
        }
    });
}); 
```

# visual-studio - Visual Studio 是否有理由将每个项目输出放在单独的文件夹中？

> ID：10086873
> 
> 赞同：2
> 
> 时间：2012-04-10T10:17:17.690
> 
> 标签：visual-studio, visual-studio-2010, projects-and-solutions

默认情况下，Visual Studio（2010 和 11 beta）将解决方案中的每个项目构建到单独的文件夹中。结果，特别是如果项目相互引用，它们会在 build 期间被大量复制`(CopyLocal = true)`：

```
-- solution has four projects: proj1, proj2, proj3 and proj4
-- building proj1 --
solution/proj1/bin/debug/proj1.dll
-- building proj2 (depends on proj1) --
solution/proj2/bin/debug/proj1.dll
solution/proj2/bin/debug/proj2.dll
-- building proj3 (depends on proj1) --
solution/proj3/bin/debug/proj1.dll
solution/proj3/bin/debug/proj3.dll
-- building proj4 (depends on proj2 and proj3) --
solution/proj4/bin/debug/proj1.dll
solution/proj4/bin/debug/proj2.dll
solution/proj4/bin/debug/proj3.dll
solution/proj4/bin/debug/proj4.dll 
```

由于我当前的解决方案有 90 个项目，其中大多数项目至少有一些相互引用（只有 3 个是实际的可执行文件），这很烦人，我一直想知道为什么默认情况下 Visual Studio 不只是把每个项目输出都在同一个文件夹中，而是导致这种可怕的冗余。**我知道我可以更改输出文件夹并关闭引用项目的复制**，但我想知道默认行为背后是否有原因。

默认情况下，VS2005 确实将所有内容放在一个文件夹中（不确定 2008 年），但这有什么实际的缺点吗？另外，在 VS10（可能是 VS Addon）中有没有办法将所有项目的输出文件夹设置为同一个文件夹，以及`CopyLocal = false`为每个项目引用设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:24:54.940

我能想到的一件事是将项目彼此分开，即：如果您更改（并编译）一个项目，它不会立即破坏尚未正确更新以处理更改的其他项目。

如果所有内容都在一个文件夹中，则上述情况可能会导致不必要的麻烦（直到您重建整个解决方案）。

# c# - Web 服务中的必需属性

> ID：10086874
> 
> 赞同：-2
> 
> 时间：2012-04-10T10:17:22.123
> 
> 标签：c#, .net, vb.net, wcf, odata

[我在http://msdn.microsoft.com/en-us/library/dd728281.aspx#Y0](http://msdn.microsoft.com/en-us/library/dd728281.aspx#Y0)检查了代码示例，发现了一件有趣的事情：如果我们从 OrderItemData 类中删除 Public ReadOnly Property Items()，服务会显示一个错误。即使我们不尝试访问项目，而只使用订单。有人可以解释为什么需要这个属性吗？

编辑：澄清：该属性不直接使用。我从代码中删除它，它编译成功，但服务返回请求错误：“服务器在处理请求时遇到错误。有关更多详细信息，请参阅服务器日志。” 并且没有抛出异常。

我认为该服务出于某种原因可能需要 IQueryable(Of Item) 属性。即使该属性返回 Nothing，服务也会重新开始工作：

```
Public ReadOnly Property Items() As IQueryable(Of Item) 
    Get 
        Return Nothing 
    End Get 
End Property 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T12:20:49.203

当 WCF 数据服务使用反射提供程序（这是示例所做的）时，每个实体类型都必须满足以下条件：

*   它必须是具有一些公共属性的公共类
*   它必须定义关键属性（通过约定或通过 DataServiceKey 属性）
*   必须有一个 IQueryable 类型的公共属性，其中 T 是上下文类上的实体类型。

如果您删除 Items 属性，您将违反上述规则 3。因此，类型 Item 不再被识别为实体类型（它在内部被视为复杂类型），但随后它在 Order 类上用作集合的项目类型。这意味着它必须是导航属性，但这要求项目类型是实体。

如果您正在寻找某种遏制（其中项目只能通过它们所属的订单访问），WCF DS 当前还不支持这一点。

# css - CSS3中的这个字体是如何嵌入到css文件中的？

> ID：10086876
> 
> 赞同：2
> 
> 时间：2012-04-10T10:17:22.803
> 
> 标签：css, fonts, font-face, truetype

我正在研究如何加快页面加载时间，我必须自定义 CSS3 @font-face 字体加载到页面中。

我正在查看其他一些站点的源代码，并注意到它们以某种方式将字体嵌入到 css 文件中（据我所知）。

下面是来自[basecamp.com](http://basecamp.com/)的示例，如果您查看 css 文件，就会发现 css 中嵌入了字体：

```
 @font-face {
  font-family: 'ProximaNova';
  src: url(data:font/opentype;charset=utf-8;base64,d09GRgABAAAAA0ABIAAA...[redacted]..xBeTUFYWAA==) format("woff"), url(data:font/truetype;charset=utf-8;base64,AAEAAAASAQAABAAgRkZUTWAFSKIAAAE...[redacted]...EsBYgRbIVHgIrsQNGditEWbAUKw==) format("truetype"), url("/assets/fonts/ProximaNova-Reg-webfont.svg#ProximaNovaRegular") format("svg");
  font-weight: normal;
  font-style: normal; } 
```

您将如何将字体转换为这种格式？这是如何运作的？

可以减少几百毫秒的加载时间并减少对服务器的请求，所以总体上看起来是个好主意。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T10:20:33.937

[数据 URL](http://en.wikipedia.org/wiki/Data_URI_scheme)允许将实际资源数据嵌入到 URL 本身中。这对于小型资源非常方便，但对于大型资源则不太方便，因为它们被编码为 base64 并导致嵌入文本资源膨胀。

您需要做的是使用**base64**编码对相应的字体文件进行编码（有许多在线转换器，比如[这个](http://www.opinionatedgeek.com/dotnet/tools/base64encode/)），然后在数据 URL 中指定正确的内容类型。

# sql - SELECT FROM view WHERE 的内部结构

> ID：10086877
> 
> 赞同：4
> 
> 时间：2012-04-10T10:17:24.867
> 
> 标签：sql, sql-server, tsql

说我有一个简单的看法，`MyView`。

如果我做：

```
SELECT * FROM MyView 
```

我了解执行背后的基础查询`MyView`以构建视图。

现在，如果我要：

```
SELECT * FROM MyView WHERE MyValue BETWEEN 2 AND 5 
```

我是否认为在`WHERE`应用之前仍必须执行整个基础查询？

我相信从执行计划窗口来看就是这种情况，但我认为我的例子可能太简单了，看不出任何真正的区别。

（这意味着随着事情变得越来越复杂，取决于`WHERE`构成视图的连接条件和条件，在不使用视图的情况下编写查询会更有效吗？）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T10:20:01.883

`where`不会。从外部应用于视图的子句被“插入”到视图中，就好像它是它的一个组成部分一样。这是否会导致获取视图的所有记录取决于您正在查询的列的性质，但结果基本上与执行由视图主体和`where`子句组成的即席查询相同。

例如，这个视图：

```
create view that_view as select * from Orders 
```

将通过扫描`Orders`表执行，返回所有记录，而

```
select * from that_view where order_number = 1 
```

将在索引搜索上执行`order_number`（假设您有索引），只返回一行而不构建整个表。

[虽然存在一些问题](https://dba.stackexchange.com/questions/12498/window-functions-cause-awful-execution-plan-when-called-from-a-view-with-externa)。

# ruby-on-rails - 谁能帮我在 Mac OS X Lion 上安装和运行 RubyGems？

> ID：10086880
> 
> 赞同：1
> 
> 时间：2012-04-10T10:17:33.613
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems

我在我的 Mac OS X Lion 操作系统上安装 RubyGems 时遇到问题。

我收到各种错误，说无效的日期规范。

请帮助，并提前感谢！

/拉斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:12:05.140

从 Xcode > Preferences > Downloads 安装命令行工具解决了这个问题，我现在可以使用 RubyGems 和 Ruby on Rails。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T10:59:56.957

你使用[rvm](http://beginrescueend.com/)来管理你的 gems 吗？如果没有，我同意使用它。

使用 Rvm 可以轻松管理您的 ruby​​ 版本，并且您可以毫无问题地安装 ruby​​gems：

此外，我还找到了您的“无效 gemspec”错误的一些答案：

*   [所以 1](https://stackoverflow.com/questions/10077894/invalid-gemspec-error-while-running-compass-in-ruby)
*   [所以 2](https://stackoverflow.com/questions/5771758/invalid-gemspec-because-of-the-date-format-in-specification)

但我建议您使用 Rvm 安装 ruby​​gems

# google-sheets - 使用 SUM 或 ArrayFormula 等函数时如何从单元格中获取工作表名称？

> ID：10086882
> 
> 赞同：2
> 
> 时间：2012-04-10T10:17:49.827
> 
> 标签：google-sheets, google-sheets-formula

我有以下公式：

```
=ArrayFormula(SUM(Morten!$M4:$M400)) 
```

如何`Morten`用单元格的内容替换，即 cell `C13`，这样它`ArrayFormula`仍然可以工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T02:29:18.407

你试过这个`Indirect`功能吗？

```
=ArrayFormula(SUM(Indirect(C13&"!M4:M400"))) 
```

但是为什么用`Sum`包裹`ArrayFormula`？`Sum`已经在这样的范围内工作了。好吧，我猜您可能简化了要发布的公式，删除了`ArrayFormula`必要的部分。

# .htaccess - .htaccess for 301 rewrite for www/non www canonical，子文件夹（另一个域）例外

> ID：10086888
> 
> 赞同：1
> 
> 时间：2012-04-10T10:18:29.443
> 
> 标签：.htaccess, mod-rewrite, redirect, web

我有一个域并将其托管在 godaddy.com 上。我有 firstsite.com，它位于主机帐户的根目录中。`firstsite.com`我有一个用于该站点的 .htaccess 文件，该文件运行良好，并将所有流量简单重定向到`www.firstsite.com`. 这是

```
RewriteEngine On

RewriteCond %{HTTP_HOST} !^www\.firstsite\.com$ 
RewriteRule (.*) http://www.firstsite.com/$1 [R=301,L] 
```

但是，我已在我的主机帐户中添加了一个新域，该域包含在站点的子文件夹中：`/secondsite`

如果没有 .htaccess 文件，当我转到`secondsite.com`它时显示为.htaccess 文件`secondsite.com`。但是，对于 .htaccess 文件，它显示为`www.firstsite.com/secondsite`.

我想让 www/non www canonical .htaccess 为第一个站点工作，但仍然有第二个站点正确显示，也解决了 www/non www canonical。

我到处搜索这个特定问题，但没有找到如何编写 .htaccess 文件。有人可以给我一个简单的例子来说明如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:00:11.823

在您的情况下（多个域指向同一个文件夹），您在指定域名时需要更加具体。而不是否定使用匹配：

```
RewriteEngine On

RewriteCond %{HTTP_HOST} ^firstsite\.com$ 
RewriteRule ^(.*)$ http://www.firstsite.com/$1 [R=301,L] 
```

以上会将请求重定向到`http://firstsite.com/bla-bla`to`http://www.firstsite.com/bla-bla`但不会 touch`secondsite.com`以及不会 touch `http://anything.firstsite.com/bla-bla`。

# titanium - 钛支持ARC吗？

> ID：10086890
> 
> 赞同：0
> 
> 时间：2012-04-10T10:18:45.447
> 
> 标签：titanium, automatic-ref-counting, titanium-mobile

钛 iPhone 应用程序是否支持 ARC（自动引用计数）？如何在 Titanium 中创建具有 ARC 支持的项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:35:23.387

据我所知，Titanium Mobile SDK 源代码不使用 ARC。所以你用 Titanium 创建的项目也不支持 ARC。此外，您不能在 Titanium 项目中直接使用编译器功能。您必须破解 SDK 构建器脚本才能传递编译器选项。

# jsf - 浏览器缓存删除不起作用

> ID：10086893
> 
> 赞同：0
> 
> 时间：2012-04-10T10:19:03.217
> 
> 标签：jsf, servlet-filters, browser-cache

```
/**
 * 
 */

public class NoCacheFilter implements Filter {

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
        HttpServletRequest httpReq = (HttpServletRequest) request;
        HttpServletResponse httpRes = (HttpServletResponse) response;

        if (!httpReq.getRequestURI().startsWith(httpReq.getContextPath() + ResourceHandler.RESOURCE_IDENTIFIER)) { // Skip JSF resources (CSS/JS/Images/etc)
            httpRes.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1.
            httpRes.setHeader("Pragma", "no-cache"); // HTTP 1.0.
            httpRes.setDateHeader("Expires", 0); // Proxies.
        }

        chain.doFilter(request, response);
    }

    // ...

    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public void destroy() {
        throw new UnsupportedOperationException("Not supported yet.");
    }
} 
```

但它不起作用，我仍然可以在按下前进和后退按钮时获取页面。请帮忙。我已经清除了所有现有的缓存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:02:16.450

您不应该在过滤器`init()`和`destroy()`. 如果`init()`抛出异常，则过滤器不会投入使用，某些服务器甚至会完全中止 webapp 的部署。

如果您在那里没有什么可实施的，他们应该什么*都不做。*

```
@Override
public void init(FilterConfig filterConfig) throws ServletException {
    // NOOP.
}

@Override
public void destroy() {
    // NOOP.
} 
```

您还需要确保过滤器映射到正确的 URL 模式或 servlet 名称。最简单的方法是`@WebFilter("Faces Servlet")`在类上放一个，其中`Faces Servlet`是`FacesServlet`条目的确切 servlet 名称，就像您在`web.xml`.

# filter - 如何编写自己的捕获过滤器？

> ID：10086897
> 
> 赞同：0
> 
> 时间：2012-04-10T10:19:15.383
> 
> 标签：filter, ffmpeg, directshow

这是一篇关于捕获视频的精彩文章：http: [//nerdlogger.com/2011/11/03/stream-your-windows-desktop-using-ffmpeg/](http://nerdlogger.com/2011/11/03/stream-your-windows-desktop-using-ffmpeg/)它使用 UScreenCapture 过滤器。这次需要用到自定义过滤器，怎么写呢？以及如何注册以便 FFmpeg 可以看到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:45:47.807

`ffmpeg` uses DirectShow video capture devices available in the opreating system, see more details on this forum thread: [DirectShow Capture support](http://ffmpeg.zeranoe.com/forum/viewtopic.php?f=3&t=27).

So you need to make a counterpart virtual source device to be picked up by `ffmpeg`. Your resources are:

*   Multiple SO topics - [Virtual webcam input as byte stream](https://stackoverflow.com/questions/8557723/virtual-webcam-input-as-byte-stream)
*   [Windows SDK - PushSource samples](http://msdn.microsoft.com/en-us/library/windows/desktop/dd377481%28v=vs.85%29.aspx)
*   [VCam sample - Capture Source Filter](http://tmhare.mvps.org/downloads.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-29T17:29:13.417

这是一个开源的 [如果你想走 dshow 路线] [https://github.com/rdp/screen-capture-recorder-to-video-windows-free](https://github.com/rdp/screen-capture-recorder-to-video-windows-free) 另一种选择是 libav 的某种类型的自定义输入过滤器[ffmpeg]。

您通过 [在管理员控制台] 注册它 `regsvr32 dll_name.dll`

# r - 分别处理R中变量的不同值

> ID：10086903
> 
> 赞同：0
> 
> 时间：2012-04-10T10:19:40.160
> 
> 标签：r, statistics, dataframe, plyr

我在 R 方面很业余，所以我希望它不会听起来很傻。就是这样：我有一个正在处理 R 的数据集。其中一个变量 (x1) 具有三个分类值（countrya、countryb、countryc）。数据集有很多变量和观察结果，但我想为每个国家单独分析它。我应该准备一个数据框，我该如何使用给定的信息来做到这一点？假设，数据集称为数据；变量称为 x1；这个变量的取值和我想分别分析的值是 countrya、countryb 和 countryc。我希望这对代码有帮助。谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:19:28.870

这听起来像是一个适合的问题`ddply`。假设您的数据位于`data.frame`如下所示：

```
value  country
21897  A
213903 A
6322   B
3567   B 
```

你可以使用`ddply`：

```
ddply(df, .(country), summarise, mn = mean(value)) 
```

计算`value`每个水平的平均值`country`。

# google-maps - 谷歌地图 - 具有重叠多边形的融合表

> ID：10086904
> 
> 赞同：1
> 
> 时间：2012-04-10T10:19:40.783
> 
> 标签：google-maps, overlap, google-fusion-tables, polygons

在将 Google Maps API 与 Google Fusion Tables（带有 API）一起使用时，我想知道如何允许单击事件从重叠区域中的多个多边形中提取我选择的信息。我该怎么做呢？

假设我有重叠的多边形 A、B 和 C，我想要一个单击事件来允许我过滤对应于该点数据交集的数据。

这将允许我按以下方式合并数据：A = {1,2,3,4,5}，B = {3,4,5}，C = {1,2,3,5}。单击交叉点将列出 {3,5}。

传统上，您只能“单击”一个多边形。我想一次**“单击”多个多边形**并在显示自定义弹出窗口之前处理每个多边形的名称（以及我需要的任何其他信息）。

这可以为**同一个**融合表中的多边形完成吗？例如：Table1 = A、B、C。可以为**不同**融合表中的多边形完成吗？例如：表 1 = A，表 2 = B，C。

如何更深入地了解点击事件如何访问该信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T23:01:54.177

单独使用 Fusion Tables 是不可能的。您可以在地图上设置点击监听器，这样当有人点击地图时，会向 Fusion Tables 发送查询以查找与该点相交的所有多边形被点击（使用带有 CIRCLE 和*非常*小的半径的 ST_INTERSECTS）。返回的结果基本上是该点数据的交集。

# c++ - QtConcurrent - 对线程中相同函数的分组调用

> ID：10086908
> 
> 赞同：1
> 
> 时间：2012-04-10T10:19:58.707
> 
> 标签：c++, multithreading, qt, multiprocessing, qtconcurrent

我想知道在线程中多次调用相同函数生成随机点（随机坐标）的最佳实践。实际上，我已经为这个函数实现了并行调用，比如 randomPoint()。现在，我想尝试是否改进不是为每个调用创建一个线程，而是准确地以可用线程数运行计算。我计算

```
QThreadPool pool;
int freeThreads_ = pool.maxThreadCount();

int iterPerThread_ = ((N-m)%freeThreads_ ==0) ? (N-m)/freeThreads_ : (N-m)/(freeThreads_-1) ; 
```

对我来说，有 8 个线程可用。我有 2000 个类似的计算要执行。因此，我想运行 8 个线程，每个线程进行 2000/8 次计算。

但是我不知道实现 QtConcurrent 调用的最佳方法是什么。现在，我写

```
QFuture<double**> futurRand_ = QtConcurrent::run(randomPoint(),m_lower,m_upper); 
```

然后是 futurRand_.result(); 我调整了方法 randomPoint()，最初返回一个单点 (double*)，以便它可以返回一个双**，一组 2000/8 个点。

但我看到了 QConcurent::map() 的替代方案。有没有更有效的方法？与 QThread？

欢迎您在 Qt 中使用多线程！

问候。

- 编辑：为了更准确：地图有签名

```
 QFuture<void> QtConcurrent::map ( Sequence & sequence, MapFunction function ) 
```

或 altinatively 将迭代器作为其参数之一。但是，我在这里调用了一个每次都在同一个实例*this*上调用的函数。如何进行？还有哪些方便的方式？

# html - 为什么不能进去 为什么不能

嵌套在里面

？我能做出什么更正？删除and

标签会破坏我的设计。由于网站遵循客户提供的设计。 我有以下代码，它在 VS2008 中运行良好，但我收到警告：

| ![Img not found](images/ribbon.gif) | <asp:label id="Label1" runat="server" text="Label"></asp:label> <asp:label id="Label2" runat="server" text="Label"></asp:label>
<asp:label id="Label3" runat="server" text="Label"></asp:label> |

| ![Img not found](images/medal.gif) | <asp:label id="Label4" runat="server" text="Label"></asp:label> <asp:label id="Label5" runat="server" text="Label"></asp:label>
<asp:label id="Label6" runat="server" text="Label"></asp:label> |

警告 1 此结束标记没有匹配的开始标记。E:\WebSite4\test.master 121 警告 2 验证（XHTML 1.0 过渡）：元素 html' 的开始和结束标记之间不允许出现文本。E:\WebSite4\test.master 5 警告 3 验证（XHTML 1.0 过渡）：元素“表单”缺少结束标记。E:\WebSite4\test.master 21 警告 4 未定义类或 CssClass 值。E:\WebSite4\test.master 33 警告 5 文件 'spacer.gif' 未找到。E:\WebSite4\test.master 116 警告 7 验证（XHTML 1.0 过渡）：元素“img”缺少必需的属性“alt”。E:\WebSite4\test.master 116 警告 8 验证（XHTML 1.0 过渡）：元素 'table' 不能嵌套在元素 'p' 中。E:\WebSite4\test.master 78 警告 9 验证 (XHTML 1\. 0 过渡）：元素“table”不能嵌套在元素“p”中。E:\WebSite4\test.master 93 在 HTML 中，重要的是要了解P元素不能包含其他块级元素，而 TABLE 是块级元素。结束标签是可选的P，当你试图让一个P元素包含它不能包含的东西时，P浏览器会假定结束标签。 P 元素代表一个段落。它不能包含块级元素（包括 P 本身）。 http://www.w3.org/TR/html401/struct/text.html#h-9.3.1 htmlasp.netvisual-studio-2008html-table 4 2 回答 2 This answer is useful 39 在 HTML 中，重要的是要了解P元素不能包含其他块级元素，而 TABLE 是块级元素。结束标签是可选的P，当你试图让一个P元素包含它不能包含的东西时，P浏览器会假定结束标签。 P 元素代表一个段落。它不能包含块级元素（包括 P 本身）。 http://www.w3.org/TR/html401/struct/text.html#h-9.3.1 于 2012-04-10T10:31:39.093 回答 This answer is useful 3 在回答您的实际问题时，段落不能包含任何其他块元素，其中包括表格。此外，结束标记是可选的，因此解析器随后找到的第一个结束标记将认为已经结束了该段落。 如果我能看到更多代码和布局会有所帮助，但是我相信

从表格周围删除标签，然后使用 CSS 正确格式化表格的位置应该可以达到您的结果。

| ![Img not found](images/ribbon.gif) | <asp:label id="Label1" runat="server" text="Label"></asp:label> <asp:label id="Label2" runat="server" text="Label"></asp:label>
<asp:label id="Label3" runat="server" text="Label"></asp:label> |

| ![Img not found](images/medal.gif) | <asp:label id="Label4" runat="server" text="Label"></asp:label> <asp:label id="Label5" runat="server" text="Label"></asp:label>
<asp:label id="Label6" runat="server" text="Label"></asp:label> |

于 2012-04-10T10:34:17.767 回答 Related 1 integer - gnuplot：只有轴 x 上的整数值 3 .net - 数据透视缓存类型不匹配错误 VB.NET Excel 4 vb.net - 模拟应用程序中的按钮单击 (VB.NET) 1 unix - 关于套接字编程的逻辑地址和物理地址 1 jquery - 如何在 jQuery 中动态创建和填充文本字段？ 1 ruby - 从 Ruby 中的 lib/GEM_NAME 请求 2 android - Use of Async Task 2 jquery - 基于 span 标签的标题使用 onclick 2 perl - 为什么这个定义的值不被识别为包或对象引用？ 2 php - php shell_exec 中的蹩脚编码器命令无法通过 http 服务器工作 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10086912
> 
> 赞同：18
> 
> 时间：
> 
> 标签：html, asp.net, visual-studio-2008, html-table

为什么不能`<p>`嵌套在里面`<table>`？我能做出什么更正？删除`<div>`and`<p>`标签会破坏我的设计。由于网站遵循客户提供的设计。

我有以下代码，它在 VS2008 中运行良好，但我收到警告：

```
<div class="right_articles">
    <p>
        <table>
            <tr>
                <td>
                    <img alt="Img not found" src="images/ribbon.gif" style="width: 155px; height: 125px;" />
                </td>
                <td>
                    <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label><br />
                    <asp:Label ID="Label2" runat="server" Text="Label"></asp:Label><br />
                    <asp:Label ID="Label3" runat="server" Text="Label"></asp:Label>
                </td>
            </tr>
        </table> 
    </p>
    <p>&nbsp;</p>
    <p>
        <table>
            <tr>
                <td>
                    <img alt="Img not found" src="images/medal.gif" style="width: 155px; height: 125px;" />
                </td>
                <td>          
                    <asp:Label ID="Label4" runat="server" Text="Label"></asp:Label><br />
                    <asp:Label ID="Label5" runat="server" Text="Label"></asp:Label><br />
                    <asp:Label ID="Label6" runat="server" Text="Label"></asp:Label>      
                </td>
            </tr>
        </table>
    </p>
</div> 
```

> 警告 1 此结束标记没有匹配的开始标记。E:\WebSite4\test.master 121 警告 2 验证（XHTML 1.0 过渡）：元素 html' 的开始和结束标记之间不允许出现文本。E:\WebSite4\test.master 5 警告 3 验证（XHTML 1.0 过渡）：元素“表单”缺少结束标记。E:\WebSite4\test.master 21 警告 4 未定义类或 CssClass 值。E:\WebSite4\test.master 33 警告 5 文件 'spacer.gif' 未找到。E:\WebSite4\test.master 116 警告 7 验证（XHTML 1.0 过渡）：元素“img”缺少必需的属性“alt”。E:\WebSite4\test.master 116 警告 8 验证（XHTML 1.0 过渡）：元素 'table' 不能嵌套在元素 'p' 中。E:\WebSite4\test.master 78 警告 9 验证 (XHTML 1\. 0 过渡）：元素“table”不能嵌套在元素“p”中。E:\WebSite4\test.master 93

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-10T10:31:39.093

在 HTML 中，重要的是要了解[`P`元素](http://www.w3.org/TR/html401/struct/text.html#h-9.3.1)不能包含其他块级元素，而 TABLE 是块级元素。结束标签是可选的`P`，当你试图让一个`P`元素包含它不能包含的东西时，`P`浏览器会假定结束标签。

> P 元素代表一个段落。它不能包含块级元素（包括 P 本身）。

[http://www.w3.org/TR/html401/struct/text.html#h-9.3.1](http://www.w3.org/TR/html401/struct/text.html#h-9.3.1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T10:34:17.767

在回答您的实际问题时，段落不能包含任何其他块元素，其中包括表格。此外，结束`</p>`标记是可选的，因此解析器随后找到的第一个结束标记将认为已经结束了该段落。

如果我能看到更多代码和布局会有所帮助，但是我相信`<p>`从表格周围删除标签，然后使用 CSS 正确格式化表格的位置应该可以达到您的结果。

```
<div class="right_articles">
            <table>
            <tr>
            <td>
                <img alt="Img not found" src="images/ribbon.gif"                     
                    style="width: 155px; height: 125px;" />
            </td>
            <td>
                <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label><br />
                <asp:Label ID="Label2" runat="server" Text="Label"></asp:Label><br />
                <asp:Label ID="Label3" runat="server" Text="Label"></asp:Label>
            </td>
            </tr>
            </table>
            <p>&nbsp;</p>
            <table>
            <tr>
            <td>
                <img alt="Img not found" src="images/medal.gif"                     
                    style="width: 155px; height: 125px;" />
            </td>
            <td>          
                <asp:Label ID="Label4" runat="server" Text="Label"></asp:Label><br />
                <asp:Label ID="Label5" runat="server" Text="Label"></asp:Label><br />
                <asp:Label ID="Label6" runat="server" Text="Label"></asp:Label>      
            </td>
            </tr>
            </table>
        </div> 
```

# .net - DataGrid 数据绑定与 ADO.net 实体数据模型

> ID：10086914
> 
> 赞同：1
> 
> 时间：2012-04-10T10:20:20.433
> 
> 标签：.net, wpf, c#-4.0, sql-server-ce, ado.net-entity-data-model

我有一个基于实体数据模型的应用程序，它使用 SQL Server CE 3.5 作为其数据存储。

在数据库中，我有一些*客户*，每个客户都有一些*订单*。这是一个简化的概述：

![在此处输入图像描述](../Images/9c710352b75f98c7d73e0cb29f237fcd.png)

在我的 WPF 窗口中，我插入了一个`DataGrid`我想列出所有*客户*的名称和地址。像这样的东西：

![在此处输入图像描述](../Images/3aaf9a5b07b4ee24f7ddd19c13ed85c7.png)

所以我写了这个 XAML：

```
<DataGrid Grid.Row="0" Name="customersDataGrid" AutoGenerateColumns="False" CanUserResizeColumns="True" AllowDrop="True" Drop="Window_Drop" DragEnter="Window_DragEnter">
   <DataGrid.Columns>
       <DataGridTemplateColumn Header="Name" Width="Auto" IsReadOnly="True" />
       <DataGridTemplateColumn Header="Address" Width="Auto" IsReadOnly="True" />
   </DataGrid.Columns>
</DataGrid> 
```

但是现在，如何在我的数据模型中将列**名称**与客户的属性联系起来？`Name`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:22:39.667

当您使用 DataGridTemplateColumn 时，您可以将 DataTemplate 放在那里..（注意：您可能不需要“data:”前缀。）

```
 <data:DataGridTemplateColumn Header="Name">
        <data:DataGridTemplateColumn.CellTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Name}">
            </DataTemplate>
        </data:DataGridTemplateColumn.CellTemplate> 
        <data:DataGridTemplateColumn.CellEditingTemplate>
            <DataTemplate>
                <TextBox Text="{Binding Name}">
            </DataTemplate>
        </data:DataGridTemplateColumn.CellEditingTemplate> 
    </data:DataGridTemplateColumn> 
```

# javascript - 使用动态内容 mvc3 在部分视图中添加下拉列表

> ID：10086923
> 
> 赞同：0
> 
> 时间：2012-04-10T10:21:07.763
> 
> 标签：javascript, ajax, asp.net-mvc-3, drop-down-menu, partial-views

我花了几天的时间来解决我的问题，但我完全做不到。
我正在做的是为数据库创建一个搜索页面。我不确定搜索的详细程度，所以我使用 ajax/partial 视图来添加搜索条件（我的意思是尝试，因为这是不起作用的部分）。
我可能犯了一个愚蠢的错误，我不知道......
它在没有 ajax/partial 视图的情况下工作，但这并不能真正满足我项目的目的（不够详细）。
我的代码如下：

## 这就是我的 ajax 所谓的局部视图：

```
<script src="@Url.Content("~/Scripts/jScript1.js")" type="text/javascript"></script>

@using (Html.BeginForm())
{

@Ajax.ActionLink("Add search criteria",
              "AddSearch", new AjaxOptions
              {
                  UpdateTargetId = "search",
                  InsertionMode = InsertionMode.InsertAfter,
                  HttpMethod = "POST",
                  OnSuccess = "DBUpdate"
              })

<div id="search">

</div>

<input type="submit" value="Search" />
} 
```

## 我的部分观点：

```
@model MvcApplication1.Models.search    

<div id="a">

 @Html.DropDownListFor(x => x.Table, Model.Tables, "-- Select Table --")
 @Html.DropDownListFor(x => x.Type, Enumerable.Empty<SelectListItem>(), "-- Select Type --")
 @Html.DropDownListFor(x => x.Name, Enumerable.Empty<SelectListItem>(), "-- Select Name --")
 @Html.EditorFor(x => x.less)
 @Html.EditorFor(x => x.equ)
 @Html.EditorFor(x => x.more)

</div> 
```

## 和我的 js 文件：

```
function DBUpdate() {

$('#Table').change(function () {
    var selectedTable = $(this).val();
    if (selectedTable != null && selectedTable != '') {
        $.getJSON('@Url.Action("Types")', { Table: selectedTable }, function (types) {
            var typesSelect = $('#Type');
            typesSelect.empty();
            $.each(types, function (index, types) {
                typesSelect.append($('<option/>', {
                    value: types.value,
                    text: types.text
                }));
            });
        });
    }
});

$('#Type').change(function () {
    var selectedType = $(this).val();
    var selectedTable = $('#Table').val();
    if (selectedType != null && selectedType != '') {
        $.getJSON('@Url.Action("Names")', { Type: selectedType, Table: selectedTable }, function (names) {
            var namesSelect = $('#Name');
            namesSelect.empty();
            $.each(names, function (index, names) {
                namesSelect.append($('<option/>', {
                    value: names.value,
                    text: names.text
                }));
            });
        });
    }
});

} 
```

在此先感谢您的所有帮助，
丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:22:57.000

您的代码有几个问题：

*   您正在尝试`@Url.Action("Types")`在单独的 javascript 文件中使用服务器端助手，这显然是不可能的。
*   您正在使用 id 选择器，例如`$('#Table')`and`$('#Type')`但您可能有多个行，因此多个具有相同 id 的下拉列表 => 这些是错误的选择器 => 您不再知道您正在选择哪个元素。

因此，让我们开始解决这些问题。

首先我们从修改部分开始：

```
@model search    
<div>
    @Html.DropDownListFor(
        x => x.Table, 
        Model.Tables, 
        "-- Select Table --", 
        new { 
            id = Guid.NewGuid(),
            @class = "tables", 
            data_url = Url.Action("Types") 
        }
    )

    @Html.DropDownListFor(
        x => x.Type, 
        Enumerable.Empty<SelectListItem>(), 
        "-- Select Type --", 
        new { 
            id = Guid.NewGuid(),
            @class = "types",
            data_url = Url.Action("Names") 
        }
    )

    @Html.DropDownListFor(
        x => x.Name, 
        Enumerable.Empty<SelectListItem>(), 
        "-- Select Name --", 
        new { 
            id = Guid.NewGuid(),
            @class = "names" 
        }
    )

    @Html.EditorFor(x => x.less)
    @Html.EditorFor(x => x.equ)
    @Html.EditorFor(x => x.more)
</div> 
```

请注意，我已将类属性应用于下拉列表，以便我可以更轻松地在我的 javascript 中选择它们。我还将一个 url 关联到前 2 个下拉列表，以便我们稍后可以将它们级联到相应的控制器操作。

说到级联，让我们写一个 jQuery 插件：

```
(function ($) {
    $.fn.cascade = function (options) {
        var defaults = { 
            additionalParameters: function() {
                return { };
            } 
        };
        var opts = $.extend(defaults, options);

        return this.each(function () {
            $(this).change(function () {
                var selectedValue = $(this).val();
                var params = opts.additionalParameters() || {};
                params[opts.paramName] = selectedValue;
                $.getJSON($(this).data('url'), params, function (items) {
                    opts.childSelect.empty();
                    $.each(items, function (index, item) {
                        opts.childSelect.append(
                            $('<option/>')
                                .attr('value', item.value)
                                .text(item.text)
                        );
                    });
                });
            });
        });
    };
})(jQuery); 
```

有了这个插件，我们现在可以继续修改主视图：

```
@using (Html.BeginForm())
{
    @Html.ActionLink(
        "Add search criteria",
        "AddSearch",
        null,
        new { id = "add" }
    )
    <div id="search"></div>
    <input type="submit" value="Search" />
} 
```

剩下的就是订阅锚的 click 事件（注意我使用的是 normal`Html.ActionLink`而不是 an `Ajax.ActionLink`）并附加我们的插件：

```
$(function () {
    $('#add').click(function () {
        $.post(this.href, function (result) {
            var $result = $(result);
            $('#search').append($result);
            var tablesSelect = $('.tables', $result);
            var typesSelect = $('.types', $result);

            tablesSelect.cascade({
                paramName: 'table',
                childSelect: $('.types', $result)
            });
            typesSelect.cascade({
                paramName: 'type',
                additionalParameters: function () {
                    return { table: tablesSelect.val() };
                },
                childSelect: $('.names', $result)
            });
        });
        return false;
    });
}); 
```

所有这些都可以发生在一个单独的 javascript 文件中。这显然假设我们有 2 个相应的控制器操作，它们将返回级联下拉列表的 JSON 值。

以下只是模拟，以便您可以看到输入/输出是什么。您当然会用更现实的东西替换虚拟值：

```
public ActionResult Types(string table)
{
    var model = Enumerable.Range(1, 5).Select(x => new
    {
        value = x,
        text = "type " + x
    });
    return Json(model, JsonRequestBehavior.AllowGet);
}

public ActionResult Names(string type, string table)
{
    var model = Enumerable.Range(1, 2).Select(x => new
    {
        value = x,
        text = "name " + x
    });
    return Json(model, JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T16:00:06.377

尝试将您的`change`函数包装在 document.ready()

```
$.document.ready(function () {
    $('#Table').change(function () {
     .....

    $('#Type').change(function () {
     ....
}); 
```

如果您不这样做，则更改事件可能会绑定到页面上尚不存在的元素 - 这意味着它永远不会被绑定。

编辑

尝试将此添加到主视图

```
<script src="@Url.Content("~/Scripts/MicrosoftAjax.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/MicrosoftMvcAjax.js")" type="text/javascript"></script> 
```

# ruby-on-rails - 语言环境和 ...authlogic 错误？

> ID：10086926
> 
> 赞同：1
> 
> 时间：2012-04-10T10:21:23.340
> 
> 标签：ruby-on-rails, ruby-on-rails-3, authlogic, ruby-on-rails-3.2

我有一个法语申请。当我运行我的应用程序并测试一个表单时，我收到了一条英文消息“电子邮件：应该看起来像一个电子邮件地址。”。当我保存我的“fr.yml”时，我收到这条消息：“电子邮件：ne semble pas être une adresse email”，法语，就像我想要的那样。它仅出现在 authlogic 的字段中，并且在上个月使用相同的代码工作。

这是 application.rb ：

```
 require File.expand_path('../boot', __FILE__)

  # Pick the frameworks you want:
  require "active_record/railtie"
  require "action_controller/railtie"
  require "action_mailer/railtie"
  require "active_resource/railtie"
  require "sprockets/railtie"
  # require "rails/test_unit/railtie"

  if defined?(Bundler)
    # If you precompile assets before deploying to production, use this line
    Bundler.require(*Rails.groups(:assets => %w(development test)))
    # If you want your assets lazily compiled in production, use this line
    # Bundler.require(:default, :assets, Rails.env)
  end

  module Onopia
    class Application < Rails::Application
      # Settings in config/environments/* take precedence over those specified here.
      # Application configuration should go into files in config/initializers
      # -- all .rb files in that directory are automatically loaded.

      # Custom directories with classes and modules you want to be autoloadable.
      # config.autoload_paths += %W(#{config.root}/extras)

      # Only load the plugins named here, in the order given (default is alphabetical).
      # :all can be used as a placeholder for all plugins not explicitly named.
      # config.plugins = [ :exception_notification, :ssl_requirement, :all ]

      # Activate observers that should always be running.
      # config.active_record.observers = :cacher, :garbage_collector, :forum_observer

      # Set Time.zone default to the specified zone and make Active Record auto-convert to this zone.
      # Run "rake -D time" for a list of tasks for finding time zone names. Default is UTC.
      # config.time_zone = 'Central Time (US & Canada)'

      # The default locale is :en and all translations from config/locales/*.rb,yml are auto loaded.
      # config.i18n.load_path += Dir[Rails.root.join('my', 'locales', '*.{rb,yml}').to_s]
      config.i18n.default_locale = :fr

      # Configure the default encoding used in templates for Ruby 1.9.
      config.encoding = "utf-8"

      # Configure sensitive parameters which will be filtered from the log file.
      config.filter_parameters += [:password]

      # Enable the asset pipeline
      config.assets.enabled = true

      # Version of your assets, change this if you want to expire all your assets
      config.assets.version = '1.1'

      # Configure generators values. Many other options are available,
      # be sure to check the documentation.
      #config.generators do |g|
      #  g.test_framework :rspec, :fixture => false
      #end

      config.action_mailer.default_url_options = { :host => 'localhost:3000' }
      config.assets.initialize_on_precompile = false
    end

    if defined?(Bundler)
      Bundler.require(:default, :assets, Rails.env)
    end
  end 
```

这是我的宝石清单：

```
 actionmailer (3.2.2)
    actionpack (3.2.2)
    activeadmin (0.4.3)
    activemodel (3.2.2)
    activerecord (3.2.2)
    activeresource (3.2.2)
    activesupport (3.2.2)
    addressable (2.2.7)
    archive-tar-minitar (0.5.2)
    arel (3.0.2)
    authlogic (3.1.0)
    autotest-rails (4.1.1)
    bcrypt-ruby (3.0.1)
    blankslate (2.1.2.4)
    bourbon (1.4.0)
    builder (3.0.0)
    bundler (1.1.2)
    capybara (1.1.2)
    capybara-firebug (0.0.10)
    capybara-webkit (0.9.0)
    childprocess (0.3.1)
    coderay (1.0.6)
    coffee-rails (3.2.2)
    coffee-script (2.2.0)
    coffee-script-source (1.2.0)
    columnize (0.3.6)
    cucumber (1.1.9)
    cucumber-rails (1.2.1)
    database_cleaner (0.7.0)
    devise (2.0.4)
    diff-lcs (1.1.3)
    email_spec (1.2.1)
    erubis (2.7.0)
    execjs (1.3.0)
    factory_girl (2.3.2)
    factory_girl_rails (1.4.0)
    fastercsv (1.5.4)
    ffi (1.0.11)
    formtastic (2.1.1)
    galetahub-simple_captcha (0.1.3)
    gherkin (2.9.3)
    has_scope (0.5.1)
    heroku (2.24.0)
    hike (1.2.1)
    i18n (0.6.0)
    inherited_resources (1.3.1)
    jbuilder (0.4.0)
    journey (1.0.3)
    jquery-rails (2.0.2)
    json (1.6.6)
    kaminari (0.13.0)
    launchy (2.0.5)
    linecache19 (0.5.12)
    mail (2.4.4)
    meta_search (1.1.3)
    metaclass (0.0.1)
    method_source (0.7.1)
    mime-types (1.18)
    mocha (0.10.0)
    multi_json (1.0.4)
    netrc (0.7.1)
    nifty-generators (0.4.6)
    nokogiri (1.5.2)
    orm_adapter (0.0.7)
    pg (0.13.2)
    pickle (0.4.10)
    polyamorous (0.5.0)
    polyglot (0.3.3)
    prawn (0.8.4)
    prawn-core (0.8.4)
    prawn-layout (0.8.4)
    prawn-security (0.8.4)
    pry-nav (0.2.0)
    pry-remote (0.1.1)
    rack (1.4.1)
    rack-cache (1.2)
    rack-ssl (1.3.2)
    rack-test (0.6.1)
    rails (3.2.2)
    railties (3.2.2)
    rake (0.9.2.2)
    rdoc (3.12)
    responders (0.9.1)
    rest-client (1.6.7)
    rspec (2.8.0)
    rspec-core (2.8.0)
    rspec-expectations (2.8.0)
    rspec-mocks (2.8.0)
    rspec-rails (2.8.1)
    ruby-debug-base19 (0.11.25)
    ruby-debug19 (0.11.6)
    ruby_core_source (0.1.5)
    rubyzip (0.9.7)
    sass (3.1.15)
    sass-rails (3.2.5)
    selenium-webdriver (2.20.0)
    shoulda-context (1.0.0)
    shoulda-matchers (1.0.0)
    simple_form (2.0.1)
    simplecov (0.5.4)
    simplecov-html (0.5.3)
    simplecov-rcov (0.2.3)
    slop (2.4.4)
    spork (0.8.5)
    sprockets (2.1.2)
    sqlite3 (1.3.5)
    term-ansicolor (1.0.7)
    thor (0.14.6)
    tilt (1.3.3)
    treetop (1.4.10)
    tzinfo (0.3.33)
    uglifier (1.2.4)
    warden (1.1.1)
    xpath (0.1.4)
    ZenTest (4.5.0) 
```

这是我的 fr.yml：

```
 # French translations for Ruby on Rails
    # by Christian Lescuyer (christian@flyingcoders.com)
    # contributors:
    # - Sebastien Grosjean - ZenCocoon.com
    # - Bruno Michel - http://github.com/nono
    # - Tsutomu Kuroda - http://github.com/kuroda (t-kuroda@oiax.jp)

    fr:
      date:
        formats:
          default: "%d/%m/%Y"
          short: "%e %b"
          long: "%e %B %Y"
        day_names:
          - lundi
          - mardi
          - mercredi
          - jeudi
          - vendredi
          - samedi
          - dimanche
        abbr_day_names:
          - lun
          - mar
          - mer
          - jeu
          - ven
          - sam
          - dim
        month_names:
          - ~
          - janvier
          - février
          - mars
          - avril
          - mai
          - juin
          - juillet
          - août
          - septembre
          - octobre
          - novembre
          - décembre
        abbr_month_names:
          - ~
          - jan.
          - fév.
          - mar.
          - avr.
          - mai
          - juin
          - juil.
          - août
          - sept.
          - oct.
          - nov.
          - déc.
        order:
          - :day
          - :month
          - :year

      time:
        formats:
          default: "%d %B %Y %H:%M:%S"
          short: "%d %b %H:%M"
          long: "%A %d %B %Y %H:%M"
        am: 'am'
        pm: 'pm'

      datetime:
        distance_in_words:
          half_a_minute: "une demi-minute"
          less_than_x_seconds:
            zero: "moins d'une seconde"
            one: "moins d'une seconde"
            other: "moins de %{count} secondes"
          x_seconds:
            one: "1 seconde"
            other: "%{count} secondes"
          less_than_x_minutes:
            zero: "moins d'une minute"
            one: "moins d'une minute"
            other: "moins de %{count} minutes"
          x_minutes:
            one: "1 minute"
            other: "%{count} minutes"
          about_x_hours:
            one: "environ une heure"
            other: "environ %{count} heures"
          x_days:
            one: "1 jour"
            other: "%{count} jours"
          about_x_months:
            one: "environ un mois"
            other: "environ %{count} mois"
          x_months:
            one: "1 mois"
            other: "%{count} mois"
          about_x_years:
            one: "environ un an"
            other: "environ %{count} ans"
          over_x_years:
            one: "plus d'un an"
            other: "plus de %{count} ans"
          almost_x_years:
            one: "presqu'un an"
            other: "presque %{count} ans"
        prompts:
          year: "Année"
          month: "Mois"
          day: "Jour"
          hour: "Heure"
          minute: "Minute"
          second: "Seconde"

      number:
        format:
          separator: ","
          delimiter: " "
          precision: 3
          significant: false
          strip_insignificant_zeros: false
        currency:
          format:
            format: "%n %u"
            unit: "€"
            separator: ","
            delimiter: " "
            precision: 2
            significant: false
            strip_insignificant_zeros: false
        percentage:
          format:
            delimiter: ""
        precision:
          format:
            delimiter: ""
        human:
          format:
            delimiter: ""
            precision: 2
            significant: true
            strip_insignificant_zeros: true
          storage_units:
            format: "%n %u"
            units:
              byte:
                one: "octet"
                other: "octets"
              kb: "ko"
              mb: "Mo"
              gb: "Go"
              tb: "To"
          decimal_units:
            format: "%n %u"
            units:
              unit: ""
              thousand: "millier"
              million: "million"
              billion: "milliard"
              trillion: "billion"
              quadrillion: "million de milliards"

      support:
        array:
          words_connector: ", "
          two_words_connector: " et "
          last_word_connector: " et "
        select:
          prompt: "Veuillez sélectionner"

      helpers:
        select:
          prompt: "Veuillez sélectionner"
        submit:
          create: "Créer un %{model}"
          update: "Modifier ce %{model}"
          submit: "Enregistrer ce %{model}"

      attributes:
        created_at: "Créé le"
        updated_at: "Modifié le"

      errors:
        format: "%{attribute} : %{message}"
        messages: &errors_messages
          inclusion: "n'est pas inclus(e) dans la liste"
          exclusion: "n'est pas disponible"
          invalid: "n'est pas valide"
          confirmation: "ne concorde pas avec la confirmation"
          accepted: "doit être accepté(e)"
          empty: "doit être rempli(e)"
          blank: "doit être rempli(e)"
          too_long: "est trop long (pas plus de %{count} caractères)"
          too_short: "est trop court (au moins %{count} caractères)"
          wrong_length: "ne fait pas la bonne longueur (doit comporter %{count} caractères)"
          not_a_number: "n'est pas un nombre"
          not_an_integer: "doit être un nombre entier"
          greater_than: "doit être supérieur à %{count}"
          greater_than_or_equal_to: "doit être supérieur ou égal à %{count}"
          equal_to: "doit être égal à %{count}"
          less_than: "doit être inférieur à %{count}"
          less_than_or_equal_to: "doit être inférieur ou égal à %{count}"
          odd: "doit être impair"
          even: "doit être pair"
        template: &errors_template
          header:
            one: "Impossible d'enregistrer ce %{model} : 1 erreur"
            other: "Impossible d'enregistrer ce %{model} : %{count} erreurs"
          body: "Veuillez vérifier les champs suivants : "

      activerecord:
        errors:
          messages:
            taken: "n'est pas disponible"
            record_invalid: "La validation a échoué : %{errors}"
            <<: *errors_messages
          template:
            <<: *errors_template
          full_messages:
            format: "%{attribute} %{message}"

        attributes:
          models:
            user: Utilisateur
            account: "Compte"
            bank: "Banque"
          user:
            username: Pseudo
            email: Email
            password: Mot de passe
          account:
            login: "Identifiant"
            password: "Mot de passe"
            account_type_id: "Type"

      home:
        successfully_updated: "Votre mot de passe a été modifié"
        index:
          submit: "Valider"
          remember: 'Me rappeler mon not de passe'

      authlogic:
        error_messages:
          login_blank: "doit être rempli(e)"
          login_not_found: "n'est pas valide"
          login_invalid: "doit contenir uniquement des lettres, des nombres, des espaces, et .-_@ s'il vous plaît."
          consecutive_failed_logins_limit_exceeded: La limit de tentatives de connexion consectuives a été dépassée. Le compte à été désactivé.
          email_invalid: ne semble pas être une adresse email
          password_blank: "doit être rempli(e)"
          password_invalid: "n'est pas valide"
          not_active: "Votre compte n'est pas actif"
          not_confirmed: "Votre compte n'est pas confirmé"
          not_approved: "Votre compte n'est pas approuvé"
          no_authentication_details: "Vous n'avez pas fournis les details pour vous authentifier."
        models:
          user: "Utilisateur"
          user_session: "Session utilisateur"
        attributes:
          user_session:
            username: Pseudo
            login: Login
            email: Email
            password: "Mot de passe"
            remember_me: "se souvenir de moi"

      simple_captcha:
        label: "Veuillez saisir le code ci-dessous:"
        message:
          user: "le code de sécurité n'est pas valide" 
```

你能帮助我吗？

谢谢。

更新：我在这个函数的文件“authlogic/acts_as_authentic/email.rb”中放了一个断点：

```
 "validates_format_of_email_field_options" 
```

当我测试 I18n.t('error_messages.email_invalid') 我有这个消息：

```
 translation missing: en.authlogic.error_messages.email_invalid 
```

因此，authlogic 采用默认消息。当我尝试这个时：

```
 Onopia::Application.config.i18n.default_locale 
```

我有 ：

```
 :fr 
```

我不明白。也许在我的语言环境之前加载了 authlogic ？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:35:51.183

在`application.rb`中，还设置当前语言环境：

```
i18n.config.default_locale = :fr
i18n.config.locale = :fr 
```

只是不要问我为什么:)

# c# - 循环 System.Data.Objects.DataClasses.EntityCollection

> ID：10086928
> 
> 赞同：3
> 
> 时间：2012-04-10T10:21:29.613
> 
> 标签：c#, entity-framework, ado.net

我正在开发 WCF Web 服务，并使用 ADO.Net Entities 访问数据库。

我使用这种方法将一些 Database 对象转换为 Contract 对象：

```
public static List<BlockContract> FormBlocks(int formId)
{
    List<BlockContract> blocksList = null;

    using (var vAdmEntities = new ADMDatabase.ADMEntities())
    {
        var blockEntities = from f in vAdmEntities.Form
                        where f.formId == formId
                        select f.Block;
        if (blockEntities != null)
        {
            blocksList = new List<BlockContract>(blockEntities.Count());
            foreach (ADMDatabase.Block b in blockEntities)
            {
                BlockContract blockContract = new BlockContract
                {
                    blockId = b.blockId,
                    name = b.name,
                    orderInForm = b.orderInForm
                };
                blocksList.Add(blockContract);
            }
        }
    }

    return blocksList;
} 
```

在这里，`foreach (ADMDatabase.Block b in blockEntities)`我得到一个错误：

```
Cannot convert type 'System.Data.Objects.DataClasses.EntityCollection<ADMDatabase.Block>' to 'ADMDatabase.Block' 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:33:20.170

你需要改变你的循环；

```
foreach (var blockItems in blockEntities){
     foreach (ADMDatabase.Block b in blockItems)
            {
                BlockContract blockContract = new BlockContract
                {
                    blockId = b.blockId,
                    name = b.name,
                    orderInForm = b.orderInForm
                };
                blocksList.Add(blockContract);
            }
} 
```

您正在选择具有以下内容的阻止实体；

```
var blockEntities = from f in vAdmEntities.Form
                        where f.formId == formId
                        select f.Block; 
```

在这里，如果您调试 blockEntities，您将类似于列表列表，因为 Form.Block 是块项目的列表。

# wpf - 具有多个间隔的滑块

> ID：10086930
> 
> 赞同：7
> 
> 时间：2012-04-10T10:21:37.677
> 
> 标签：wpf, slider

目前，WPF 滑块有一些属性允许定义和查看滑块上**的单个间隔**：SelectionStart、SelectionEnd 和 IsSelectionRangeEnabled。

通过设置这些值

```
<Slider Minimum="0" Maximum="300" Value="150" IsSelectionRangeEnabled="True" SelectionStart="50" SelectionEnd="200"/> 
```

您会在滑块中获得选定的间隔，以蓝色着色，如下所示：

![在此处输入图像描述](../Images/2d5aac816eb78c67caf9683b297b3552.png)

我想做的是能够定义**多个间隔**- 例如（50-100），（110-130），（170-200）和（210-240），看起来像这样：

![在此处输入图像描述](../Images/e4695b596728f4ec55e8d718879982e5.png)

关于如何解决此问题或我应该尝试修改什么模板以获得此功能的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T03:14:32.627

这可能不是答案，而是一种解决方法。我将滑块放在画布上，然后绘制到画布[上突出显示滑块上的段](https://stackoverflow.com/questions/9555955/highlight-segments-on-slider-bar)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:58:12.390

使用 Ticks 属性设置多个间隔。从上面的解释中，我不确定您希望它如何工作，但这是一个示例。

```
<Slider Minimum="0" Maximum="300" Value="150" 
IsSelectionRangeEnabled="True" SelectionStart="50" 
SelectionEnd="200" IsMoveToPointEnabled="True" 
TickPlacement="BottomRight" Ticks="50, 100, 105, 140, 150, 200" IsSnapToTickEnabled="True" /> 
```

# qt - 使用 QT 播放远程声音

> ID：10086931
> 
> 赞同：0
> 
> 时间：2012-04-10T10:21:40.487
> 
> 标签：qt, audio

我的要求是从机器捕获声音并通过通道瞬时发送声音缓冲区，这样我就可以同时在远程机器上播放声音。我必须在 QT 框架中开发它。我是 QT 框架的新手。

是否可以使用可用的 QT 类（QAudioDeviceInfo、QAudioInput、QAudioOutput 和 Phonon 等）

如果可能，请分享一些对我有很大帮助的示例代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:49:27.680

请看qt给出的频谱分析仪示例

[http://labs.qt.nokia.com/2010/05/18/qtmultimedia-in-action-a-spectrum-analysisr](http://labs.qt.nokia.com/2010/05/18/qtmultimedia-in-action-a-spectrum-analyser)

[http://doc.qt.nokia.com/4.7-snapshot/demos-spectrum.html](http://doc.qt.nokia.com/4.7-snapshot/demos-spectrum.html)

# c++ - int 到 char* 和内存分配

> ID：10086932
> 
> 赞同：1
> 
> 时间：2012-04-10T10:21:41.110
> 
> 标签：c++, string, char, int

这很可能很容易，但如果有人能解释让'sval'包含数组索引0-499的字符串“$1”-“$500”的最简单方法。在下面的代码中，但是 itoa 在下面的代码中给了我奇怪的字符串：

```
 #include<iostream>
    #include <stdio.h>
    #include <stdlib.h>
    using namespace std;

    typedef struct data_t {
        int ival;
        char *sval;
    } data_t;

    void f1(data_t **d);
    int main()
    {
    data_t *d;

        d = new data_t[500];
        f1(&d);
    }

    /* code for function f1 to fill in array begins */
    void f1(data_t **d)
    {
        char str[5];
        for (int i=0; i<500; i++)
        {
            (*d)[i].ival = i+1;
            itoa (i+1,str,10);
            (*d)[i].sval = str;
        }
    } 
```

itoa 似乎也被贬值了，但这就是我用谷歌搜索 int 到字符串时得到的

或者...尝试使用 stringstream 我仍然遇到问题，而且我无法在前面获得“$”，但是...

```
#include<iostream>
#include<sstream>
using namespace std;

typedef struct data_t {
    int ival;
    char *sval;
} data_t;

void f1(data_t **d);
int main()
{
data_t *d;

    //d = static_cast<data_t*>(malloc(sizeof(data_t)*500));  //for legacy c
    d = new data_t[500];
    f1(&d);
}

/* code for function f1 to fill in array begins */
void f1(data_t **d)
{
    stringstream ss;
    char *str;

    for (int i=0; i<500; i++)
    {
        (*d)[i].ival=i+1;
        ss << i;
        str = ss.str();
        (*d)[i].sval= str;
    }
} 
```

char * 和 string 不能很好地一起工作......再一次......我仍然不确定如何在整个事情前面获得“$”......呃

哦……如果有帮助的话……这是给出的代码：和我的要求 以下程序包含一个 data_t 类型的结构数组。给出了 data_t 类型的变量 'd' 的声明。将逻辑写入主程序，为变量“d”分配内存，使其包含一个由 500 个元素组成的数组，每个元素的类型为 data_t。不要为释放内存或测试 malloc 的返回值是否为 NULL 而烦恼。然后，编写函数'f1'来填充数组的500个元素中的每一个，使得整数字段'ival'对于数组索引0-499的值分别为1-500，并且字符串字段'sval'包含字符串“$1” – “$500” 分别用于数组索引 0-499。函数'f1'的调用在主程序结束时给出。

```
typedef struct data_t {
    int ival;
    char *sval;
} data_t;
main()
{
data_t *d; /* declaration for an array of  data_t structures */
    /* allocate memory for a 500 element array of structures begins */
    /* allocate memory for a 500 element array of structures ends */
    f1(&d); /* function call to fill in array */
}
/* code for function f1 to fill in array begins */
f1(data_t **d)
{
}
/* code for function f1 to fill in array ends */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:32:21.090

如果您可以更改结构定义，那么最简单的方法是定义它，以便字节`sval`包含在结构中：

```
typedef struct data_t {
    int ival;
    char sval[5];
} data_t; 
```

（否则，您将需要按照 jamesdlin 的回答中所述使用`malloc()`和。）`free()`

然后，要进行字符串转换并插入`$`字符，您可以使用`snprintf()`. 像这样：

```
for (int i=0; i<500; i++)
{
    (*d)[i].ival = i+1;
    snprintf((*d)[i].sval, 4, "$%i", i+1);         
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T10:32:30.587

```
void f1(data_t **d)
{
    char str[5];
    for (int i=0; i<500; i++)
    {
        (*d)[i].ival = i+1;
        itoa (i+1,str,10);
        (*d)[i].sval = str;
    }
} 
```

您正在分配每个`sval`成员指向同一个数组 ( `str`)。也就是说，`(*d)[i].sval`将指向所有元素的相同内存位置。更糟糕的是，它们都指向一个*本地*数组，`f1`返回时会变成垃圾。

如果您希望每个数组元素的`sval`成员指向其自己的字符串，您必须自己显式分配内存（并在以后显式释放它）。

```
void f1(data_t **d)
{
    for (int i=0; i<500; i++)
    {
        char *str = malloc(5);
        if (str == NULL) {
           abort(); // Or fail gracefully somehow.
        }

        (*d)[i].ival = i+1;
        itoa (i+1,str,10);
        (*d)[i].sval = str;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T10:32:56.890

```
void f1(data_t **d)
{
    char str[5];
    for (int i=0; i<500; i++)
    {
        (*d)[i].ival = i+1;
        itoa (i+1,str,10);
        (*d)[i].sval= str; // <-- WRONG! str is allocated on the stack!
        // And you use the same char[] for the 500 data_t.sval
    }
} 
```

# javascript - Extjs 4 基本模板

> ID：10086935
> 
> 赞同：0
> 
> 时间：2012-04-10T10:21:48.017
> 
> 标签：javascript, extjs, templating

我想制作一个扩展 Ext.Panel 的自定义组件，该组件基于 XTemplate，我想用 Ext.Element 替换模板中的某些元素，但我找不到任何关于如何做到这一点的文档。

我的示例代码在这里，不工作......

```
Ext.define('Ext.ux.PivotPanel', 
{
    alias: 'widget.pivotpanel',
    extend: 'Ext.Panel',
    html: '&nbsp;',
    bodyTpl: Ext.create('Ext.XTemplate',
        '<div class="x-pgrid">',
            '<div class="x-pgrid-viewport">',
                '<div class="x-pgrid-header-angle"></div>',
                '<div class="x-pgrid-header-top"></div>',
                '<div class="x-pgrid-header-left"></div>',
                '<div class="x-pgrid-body"></div>',
            '</div>',
        '</div>'
    ),
    onRender: function()
    {
        this.callParent(arguments);

        var me = this;          

        var panelEl = me.bodyTpl.overwrite(me.body, [], true);
        var bodyEl = new Ext.Element(panelEl.query('.x-pgrid-body'));

        var div = new Ext.Element(document.createElement('div'));
        div.update('test');
        div.appendTo(bodyEl);
        me.doComponentLayout();
    }
}); 
```

我想要做的是将一些内容放入 x-grid-body div。

# java - Java - 向 JFrame 添加组件

> ID：10086936
> 
> 赞同：1
> 
> 时间：2012-04-10T10:21:49.927
> 
> 标签：java, swing, jframe

我已经看到了几种做有神论的方法，它们似乎都有效，但我只是想知道一种方法是否比另一种更好。

例如，通过`JFrame`被叫`myFrame`，您可以执行以下操作：

```
myFrame.add(new JButton("OK")); 
```

你也可以这样做：

```
Container c = myFrame.getContentPane();
c.add(new JButton("OK")); 
```

其中之一是“正确的”吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T10:27:04.010

来自类 javadoc 的文字副本`JFrame`

> JFrame 类与 Frame 略有不兼容。与所有其他 JFC/Swing 顶级容器一样，JFrame 包含一个 JRootPane 作为其唯一的子项。根窗格提供的内容窗格通常应包含 JFrame 显示的所有非菜单组件。这与 AWT Frame 的情况不同。作为方便的 add 及其变体，remove 和 setLayout 已被覆盖以根据需要转发到 contentPane。这意味着您可以编写：

```
 frame.add(child); 
```

> 并且孩子将被添加到 contentPane。内容窗格将始终为非空。尝试将其设置为 null 将导致 JFrame 抛出异常。默认内容窗格将设置一个 BorderLayout 管理器。有关添加、删除和设置 JFrame 的 LayoutManager 的详细信息，请参阅 RootPaneContainer。

所以两者都是等价的，而且都是正确的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T10:27:24.897

不需要来自 Java5

*   添加`JComponents`到`ContentPane`, 只是`JFrame.add(JComponent)`

*   `JFrame`已实施`BorderLayout`，然后`myFrame.add(new JButton("OK"));`被放置到该`CENTER`区域

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T10:33:03.367

我肯定会说

```
Container c = myFrame.getContentPane();
c.add(new JButton("OK")); 
```

是最实用的一种。因为您以后很可能需要使用容器

```
myFrame.getContentPane(); 
```

你以后不需要再写了。例如，如果您需要为框架设置另一个布局，它将使用它。但如前所述，两者都可以使用。

# php - Opencart 元标题包括商店名称

> ID：10086942
> 
> 赞同：0
> 
> 时间：2012-04-10T10:22:06.260
> 
> 标签：php, opencart

在 Document 类中如何获取商店名称。这就是我想要做的：

```
public function setTitle($title) {

    // Append store name if small title
    if(strlen($title) < 30){
        $this->title = $title . ' - ' . $this->config->get("store_name");
    } else {
        $this->title = $title;
    }
} 
```

虽然`$this`是指文档类。如何获取配置？

使用最新版本的opencart 1.5.2.1

当您检查`index.php`文件以查看配置的加载方式时

```
// Registry
$registry = new Registry();

// Loader
$loader = new Loader($registry);
$registry->set('load', $loader);

// Config
$config = new Config();
$registry->set('config', $config); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T09:02:52.383

Opencart 使用某种依赖注入从库类中访问注册表。这种技术应用于许多图书馆类别，如客户、附属机构、货币、税收、重量、长度和购物车类别。令人惊讶的是，文档类是少数没有传入注册表对象的类之一。

如果您想遵循这个约定，我建议您修改 index.php 和 library/document.php 以便 Document 构造函数将注册表作为参数：

```
class Document {

        [...]

        // Add the constructor below
        public function __construct($registry) {
                $this->config = $registry->get('config');
        }

        [...]

        public setTitle($title) {
            if(strlen($title) < 30){
                $this->title = $title . ' - ' . $this->config->get("store_name");
            } else {
                $this->title = $title;
            }
        }

} 
```

现在只需要将注册表对象注入到 index.php 中的 Document 类中，如下：

```
// Registry
$registry = new Registry();

[...]

// Document
$registry->set('document', new Document($registry)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T08:57:08.223

你不能在文档类中使用**$this->cofig**，因为它没有**config**属性，也没有像控制器类那样神奇**的 __get方法。**

您可以尝试更改标题控制器。

```
public function index() {

   $title = $this->document->getTitle();
   if(strlen($title) < 30){
      $this->data['title'] = $title . ' - ' . $this->config->get("store_name");
   } else {
      $this->data['title'] = $title;
   }

   // ....
} 
```

- - - - 更新 - - - -

如果你想在 Document 类中使用 $config，你可以使用全局变量：

```
public function setTitle($title) {

    global $config;
    // Append store name if small title
    if(strlen($title) < 30){
        $this->title = $title . ' - ' . $config->get("store_name");
    } else {
        $this->title = $title;
    }
} 
```

但我建议你不要这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T18:52:31.363

在 Opencart 1.5.1.3 上工作更改`$this->config->get("store_name")`为`$this->config->get("config_name")`

# android - 如何在创建 AlertDialog 时显示 ProgressDialog？

> ID：10086943
> 
> 赞同：1
> 
> 时间：2012-04-10T10:22:06.537
> 
> 标签：android, android-alertdialog, progressdialog

我有一个带有字符串列表的 AlertDialog。该对话框是在 onCreateDialog 中创建的。每次显示对话框时，我的字符串项都会更改。字符串来自数据库，因此我的字符串的生成需要时间。所以我想展示一个 ProgressDialog 从我的数据库中获取我的字符串。那么如何暂停 onCreateDialog，显示 ProgressDialog，在后台获取字符串，然后完成 AlertDialog 的创建？我尝试使用 AsyncTask 但我的问题是当调用 onCreateDialog 时我不能简单地启动 AsyncTask 因为 onCreateDialog 必须返回我的对话框。

# android - android - 使用 android sdk 将 helio 的 eclipse 变成 indigo

> ID：10086944
> 
> 赞同：0
> 
> 时间：2012-04-10T10:22:09.760
> 
> 标签：android, eclipse

目前我正在使用 eclipse3.6(helios) 和 android sdk。现在我想将 helios 更新为靛蓝。假设我正在这样做，那么是否需要集成 android sdk。请帮我怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:34:30.390

如果您更新，Eclipse 中将默认没有 Android。

以下是更新步骤

1.  窗口 > 首选项 > 安装/更新 > 可用软件站点

2.  点击“添加”

3.  输入网址：http: [//download.eclipse.org/releases/indigo](http://download.eclipse.org/releases/indigo)

4.  点击“确定”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:17:19.037

首先下载并安装其中一个 Eclipse Indigo 包（我推荐**用于 Java 开发人员的 Eclipse IDE ）。**确保不要**将**它安装到现有 Eclipse 之上的同一目录中；将其安装到新位置。但是，您可以使用现有的工作区。

然后按照[http://developer.android.com/sdk/eclipse-adt.html#installing](http://developer.android.com/sdk/eclipse-adt.html#installing)上的说明安装最新版本的 Android 开发工具 (ADT)。

# nntp - NNTP 对等协议如何工作？

> ID：10086945
> 
> 赞同：1
> 
> 时间：2012-04-10T10:22:13.620
> 
> 标签：nntp

我在网上找不到任何文档，而且我在 RFC 上迷路了。

有人可以解释一下 NNTP 服务器如何与另一个接受消息对等吗？

我只能发挥我的想象力：

```
 telnet nntp-server 119
 Trying nntp-server...
 Connected to nntp-server.
 Escape character is '^]'.
 200 nntp-server
 ihave <[message id?]>
 440 feeding not allowed
 [my imagination capabilities ends here] 
```

我只想接收消息，而不是发送消息。

任何提示？非常感谢。

# css - CSS3 发光菜单

> ID：10086947
> 
> 赞同：-4
> 
> 时间：2012-04-10T10:22:21.357
> 
> 标签：css

我刚刚访问了这个[网站](http://www.samsung.com/in/#mobile-devices-home)，在那里我看到了这个发光的菜单（底部），我的猜测是它可能通过`CSS3`阴影效果或类似的东西来实现。任何人都可以让我知道如何为我当前的项目实现这样的效果。我尝试在网上搜索一些教程，但找不到任何教程。欢迎任何建议。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:31:09.917

他们所做的是他们使用这张图片

![三星背景图片](../Images/b94376047850941036a816ac148a67f2.png)

并将其移动到菜单项后面（*作为其容器的背景*）

* * *

**用 CSS 实现类似的东西**

在方形元素上使用`border-radius:50%`使其成为圆形，然后应用`box-shadow`软淡化..

演示在[http://jsfiddle.net/gaby/kt4yb/](http://jsfiddle.net/gaby/kt4yb/)

* * *

***提示***：阅读源代码及其样式以了解（*使用 firebug 和其他 web 调试工具*）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T10:32:54.977

CSS3`box-shadow`是你想看的：http: [//jsfiddle.net/3rSbP/](http://jsfiddle.net/3rSbP/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T10:37:24.180

它只是在更改背景图像...您可以看到在 index.css 中有一个 css 类 hovermenu0, hovermenu1, .... 设置背景图像，这些类适用于 UL 之类的。

```
 <ul class="depth1 hoverMenu0"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T10:26:37.097

使用现代浏览器，您可以直接查看他们采用什么机制来实现特定设计。

*   在 Chrome 和 Opera 上，右键单击并选择“检查元素”。

*   在 Firefox 上，安装 Firebug 插件并使用它。

*   在 Safari 上，使用 Web Inspector。

我可能错了，但乍一看，它们似乎使用不同的静态背景图像并使用 js 响应事件来更改它们（在 Chrome 中查找*事件侦听器）。*但是可以在 CSS3 中不使用静态图像来做到这一点，尽管稍微复杂一些。

# java - 如何解决 SQL 语法错误？

> ID：10086958
> 
> 赞同：0
> 
> 时间：2012-04-10T10:23:06.057
> 
> 标签：java, mysql, jdbc

```
try {
    String req = "INSERT INTO nouvelle_installation" +
      "values('" + ref + "','" + today + "','" + check + "','" + nbligne +
      "','" + tligne + "','" + categorie + "','" + instal + "','" + cin +
      "','" + user + "','" + prenom+"','" + numC + "','" + num + "','" + voie +
      "','" + tvoie + "','" + imm + "','" + app + "','" + etage +
      "','" + codep + "')"; 

    Statement m = s.getCon().createStatement();  
    m.executeUpdate(req);
} catch (SQLException e1) {
    e1.printStackTrace();
} 
```

> com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Erreur de syntaxe près de ''aaa','2012-04-10',' ','-----','------- --------','-------', 'Nouvelle Installati' à la ligne 1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:27:59.467

正如其他人所说，使用[准备好的语句](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)而不是连接你的语句。

这将防止[SQL injection](http://en.wikipedia.org/wiki/SQL_injection)和您当前的问题：

```
"INSERT INTO nouvelle_installation" + "values" ... 
```

结果是

```
"INSERT INTO nouvelle_installationvalues" ... 
```

您的表名和关键字之间缺少空格`values`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T10:28:11.510

您需要在 "INSERT INTO nouvelle_installation" + "values(... 或字符串看起来像

```
"INSERT INTO nouvelle_installationvalues("... 
```

所以它应该看起来像这样

```
"INSERT INTO nouvelle_installation" + " values(... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T10:27:37.910

正如已经有人指出的那样，此代码受到 Sql 注入攻击。但是，查询中可见的第一个错误是关键字
之前缺少空格`values`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T11:16:39.243

使用准备好的语句而不是连接您的语句。

准备好的语句也比语句快。

您的表名和关键字之间缺少空格`values`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T10:28:58.047

后面有一个引号`num`，前面有一个引号`voie`，它们之间没有逗号。那是你想要的吗？

```
... + "','" + num  + "'"   +
      "'"   + voie + "','" + tvoie + ... 
```

这有效地为您提供`,'NUM''VOIE','`.

`values`关键字之前也没有空格。

# codeigniter - 我想发送带有多个数据库值的电子邮件

> ID：10086966
> 
> 赞同：0
> 
> 时间：2012-04-10T10:23:52.850
> 
> 标签：codeigniter

```
 if($records->result()>0) 
    {

        foreach ($records->result() as $user)
        {

            $username= ('first name='.$user->u_first_name.'<br/>'.'Last name='.$user->u_last_name.'<br/>'.'Email='.$user->u_email.'<br/>'.'Property Id='.$user->propertyid);
            $username.="<br/>";
            $username.="-------------------------";
            $username.="<br/>";

            $email_template =  file_get_contents($this->config->item('base_url').'assets/email/email.html');
            $email_template = str_replace("[[EMAIL_HEADING]]", $mail_content->subject, $email_template);
            $email_template = str_replace("[[EMAIL_CONTENT]]", $username, $email_template);
            $email_template = str_replace("[[SITEROOT]]", $this->config->item('base_url'), $email_template);
            $email_template = str_replace("[[LOGO]]",$this->config->item('base_url')."assets", $email_template);
            $this->email->message(html_entity_decode($email_template));      
            $this->email->send();
            print_r($email_template); 
```

这是我的代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:32:50.277

/* 更新 */

您可以像正常一样使用模板视图（传入值），将第三个参数设置为 TRUE 以返回 html。

要发送一封包含所有数据库记录的电子邮件，只需将整个结果对象传递到视图中，使用标准 foreach 循环在视图中处理它，等等。

例如

```
if($records->result()>0) {
    $email_template = $this->load->view('email_template', array('heading' => 'My Email Report', 'records' => $records->result(), TRUE);
    $this->email->message($email_template);      
    $this->email->send();
    print_r($email_template);
} 
```

然后视图（/view/email_template）将类似于；

```
<h1><?php echo $heading; ?>
<p> Records;</p>
<table>
<?php
foreach ($records as $r) {
?>
<tr>
    <td><?php echo $r->u_first_name; ?></td>
    <td><?php echo $r->u_last_name; ?></td>
    <td><?php echo $r->u_email; ?></td>
    <td><?php echo $r->propertyid; ?></td>
</tr>
<?php
}
?>
</table> 
```

# iphone - iOS-4需要的UIPageViewController卷曲效果

> ID：10086967
> 
> 赞同：0
> 
> 时间：2012-04-10T10:23:54.067
> 
> 标签：iphone, objective-c, ios4, pdf-reader

> **可能重复：**
> [用 UIView 像书一样翻页？](https://stackoverflow.com/questions/477078/turn-a-page-like-a-book-with-uiview)

我需要 iOS-4 中的 UIPageViewController 功能。除了在 GitHub 中的 Leaves 应用程序之外，是否有任何示例代码可以在 PDFReading for iPad 中获得准确的卷曲效果？

请帮帮我。

提前致谢。

# sql - 这个 SELECT 和 ORDER BY 查询是我能做到的最有效的方式吗？

> ID：10086972
> 
> 赞同：1
> 
> 时间：2012-04-10T10:24:27.033
> 
> 标签：sql, sql-server

在我学习 SQL 的过程中，我正在我的一个旧数据库上编写各种查询，但是在处理更复杂的事情时，我想确保我不会过度设计它。我有一个表代理，不同的代理为城市提供不同的价格。多个代理商可以为同一个城市服务，每个代理商的价格不同。我想运行一个查询，该查询将返回为任何给定城市雇用所有代理的总成本，按最昂贵的排序。

```
WITH orderedPrices AS (
    SELECT SUM(agtFMPrice) 
    OVER (PARTITION BY agtCity) 
    AS IX FROM Agent)
SELECT IX 
FROM orderedPrices 
ORDER BY IX DESC 
```

我发现如果没有orderedPrices 返回的视图，它不会对价格进行排序（我假设是因为它是一个聚合函数，或者它们被称为什么）。我是否以最好的方式做到这一点，还是可以简化？

另外，如果您感到特别无聊，请继续给我一个新的任务/查询来在这张桌子上做。我可以使用这种做法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:35:52.737

您用英语写的内容似乎与您用 SQL 写的 qhat 不太匹配。

英语：
-`City`
每条记录 - 每条记录一个字段，显示所有关联代理的总成本

SQL:
-`Agent`
每条记录 - 每条记录一个字段，显示同一城市所有代理商的总费用

```
 AgentID | agtCity | agtFMPrice
---------+---------+------------
    1    |    1    |     10
    2    |    1    |     20
    3    |    2    |     30
    4    |    2    |     10
    5    |    2    |     25

 Results of SQL version           Results of English version
------------------------         ----------------------------
            30                                30
            30                                65
            65
            65
            65 
```

如果你想要英文版，我会这样做...

```
SELECT
  agtCity,
  SUM(agtFMPrice) AS IX
FROM
  Agent
GROUP BY
  agtCity
ORDER BY
  SUM(agtFMPrice) DESC 
```

为了提高性能，表可以（应该？）也有一个索引`(agtCity)`

# ruby-on-rails - 一个资源属于两个父资源

> ID：10086975
> 
> 赞同：0
> 
> 时间：2012-04-10T10:24:43.943
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid

在路线.rb

```
resources :restaurants do
  collection do
    get 'nearby'
  end

  resources :tickets
end

resources :users do
  resources :tickets
end 
```

如果我的控制器，我可以区分父资源

```
if params[:user_id].present?
  @collection = User.find(params[:user_id])
else
  @collection = Restaurant.find(params[:restaurant_id])
end
@ticket = @collection.tickets.new 
```

但是我如何区分，例如路径助手？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T10:30:19.153

请参见[polymorphic_path](http://api.rubyonrails.org/classes/ActionDispatch/Routing/PolymorphicRoutes.html#method-i-polymorphic_path)。

# android - 安卓语音识别

> ID：10086978
> 
> 赞同：6
> 
> 时间：2012-04-10T10:24:59.823
> 
> 标签：android, speech-recognition, speech-to-text, cmusphinx

我想**对缅甸语进行语音识别。**

我参考以下链接：

*   [http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/](http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/)
*   [http://cmusphinx.sourceforge.net/sphinx4/](http://cmusphinx.sourceforge.net/sphinx4/)
*   [http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/](http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/)

但没有取得任何成功，

是否有任何其他方式，例如录制并将语音转换为文本或录制后与音频文件进行比较。请帮助我并给我任何解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T18:00:23.770

由于缅甸语目前不是 Android 内置的基于云的语音识别支持的语言，PocketSphinx 可能是您最好的选择。不幸的是，我不相信现有的缅甸语语言模型，因此您必须构建一个自定义的缅甸语模型，这需要大量的文本语料库和一些语言专业知识。

[CMUSphinx - 构建语言模型](http://cmusphinx.sourceforge.net/wiki/tutoriallm)

...此外，您需要训练一个声学模型，这需要大量录制的音频。对于一般听写（即可以由许多不同的人使用的通用语音到文本），Sphinx 项目人员建议您对 200 个不同的说话者进行 50 小时的录音。

[CMUSphinx - CMUSphinx 的训练声学模型](http://cmusphinx.sourceforge.net/wiki/tutorialam)

我在 Android 上使用 PocketSphinx 有过很好的体验，但仅适用于小型语言模型（即命令和控制类型的应用程序），并且仅使用英语。对缅甸人这样做是可能的，但需要大量工作来构建和训练上述模型。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T14:33:45.313

[您可以在http://www.jameselsey.co.uk/blogs/techblog/android-how-to-implement-voice-recognition-a-nice-easy-tutorial/](http://www.jameselsey.co.uk/blogs/techblog/android-how-to-implement-voice-recognition-a-nice-easy-tutorial/)找到几个教程

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-17T14:32:40.850

你可以试试这里的代码：http: [//developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/VoiceRecognition.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/VoiceRecognition.html)

# registry - 如何使用在 WSO2 Governance Registry 中创建的服务？

> ID：10086979
> 
> 赞同：0
> 
> 时间：2012-04-10T10:25:02.450
> 
> 标签：registry

在 WSO2 Governance Registry 中，我创建了服务。（主 -> 元数据 -> 添加 -> 服务）并成功创建它。

现在，我可以在哪个组件（例如 ESB 等）中引用它？WSO2 Governance Registry Service 的目的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:53:46.373

WSO2 治理注册表不是服务托管产品。它是一个元数据存储库。您可以存储服务元数据，如 WSDL、Schema、Policies 等，并通过 ESB 访问这些资源。将这些元数据存储在 Registry 中的好处是您可以使用生命周期管理和版本控制进行管理。

谢谢阿吉思

# python - 使用 python 正则表达式进行日期匹配

> ID：10086980
> 
> 赞同：1
> 
> 时间：2012-04-10T10:25:03.713
> 
> 标签：python, regex

我在下面的正则表达式匹配中做错了什么

```
>>> import re
>>> d="30-12-2001"
>>> re.findall(r"\b[1-31][/-:][1-12][/-:][1981-2011]\b",d)
[] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T10:26:50.340

`[1-31]`匹配`1-3`，`1`基本上是 1、2 或 3。除非它是 0-9 的子集，否则不能匹配数字范围。同样适用于`[1981-2011]`恰好匹配 0、1、2、8 或 9 的一个字符。

最好的解决方案是简单地匹配*任何*数字，然后稍后使用 python 本身检查数字。这样的日期`31-02-2012`没有任何意义 - 并且很难进行正则表达式检查。让它也能正确处理闰年会使它变得更加困难或不可能。这是一个匹配任何看起来像`dd-mm-yyyy`日期的正则表达式：`\b\d{1,2}[-/:]\d{1,2}[-/:]\d{4}\b`

但是，我强烈建议不要允许任何`-`,`:`和通常用于时间的，`/`通常用于美国编写日期的方式 ( ) 和ISO 方式 ( )。根本不处理EU语法。`:``/``mm/dd/yyyy``-``yyyy-mm-dd``dd.mm.yyyy`

如果字符串只包含日期，则根本不需要正则表达式 - 请[`strptime()`](http://docs.python.org/library/datetime.html#strftime-strptime-behavior)改用。

总而言之，告诉用户您期望的日期格式并解析该格式，拒绝其他任何内容。否则你会得到模棱两可的情况，例如`04/05/2012`（是 4 月 5 日还是 5 月 4 日？）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T10:31:09.870

`[1-31]`并不意味着你认为它意味着什么。方括号语法匹配一个*字符*范围，而不是一个*数字*范围。用正则表达式匹配一系列数字是可能的，但很笨拙。

如果你真的想为此使用正则表达式（而不是日期解析库），你最好匹配正确位数的*所有*数字，捕获值，然后自己检查值：

```
>>> import re
>>> d="30-12-2001"
>>> >>> re.findall(r"\b([0-9]{1,2})[-/:]([0-9]{1,2})[-/:]([0-9]{4})\b",d)
[('30', '12', '2001')] 
```

无论如何，您都必须进行实际日期验证，以捕获无效日期，例如`31-02-2012`.

（请注意，这`[/-:]`也不起作用，因为它被解释为一个范围。`[-/:]`改用 -​​ 将连字符放在前面可以防止它被解释为范围分隔符。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T10:33:00.880

正则表达式不理解数字；对正则表达式来说，`1`只是字符串的一个字符——就是这样的东西`a`。因此，例如，`[1-31]`被解析为包含范围`1-3`和（冗余）单个符号的字符类`1`。

您不想使用正则表达式来解析日期。已经有一个用于处理日期解析的内置模块：

```
>>> import datetime
>>> datetime.datetime.strptime('30-12-2001', '%d-%m-%Y')
datetime.datetime(2001, 12, 30, 0, 0) # an object representing the date. 
```

这也会为您执行所有辅助检查（例如尝试参考 2 月 31 日）。如果您想处理多种类型的分隔符，您可以简单地`.replace`将它们放在原始字符串中，以便它们都变成相同的分隔符，然后在您的格式中使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T10:35:01.713

你可能做错了。这里的其他一些回复正在帮助您使用正则表达式，但我建议您使用该`datetime.strptime`方法将格式化日期转换为日期时间对象，并对该对象进行进一步的逻辑处理：

```
>>> import datetime
>>> datetime.strptime('30-12-2001', '%d-%m-%Y')
datetime.datetime(2001, 12, 30, 0, 0) 
```

[有关 strptime 方法及其格式字符串的更多信息。](http://docs.python.org/library/datetime.html#strftime-and-strptime-behavior)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-30T19:41:37.420

正则表达式 = r'(0?[1-9]|[12][0-9]|3[01])/(0?[1-9]|1[012])/((19|20)\ d\d)'

```
(#组#1的开始
 0?[1-9] # 01-09 或 1-9
 | ＃ ..或者
 [12][0-9] # 10-19 或 20-29
 | ＃ ..或者
 3 [01] # 30, 31
) #1 组结束
  /# 后跟一个“/”
   ( # 组 #2 开始
    0?[1-9] # 01-09 或 1-9
    | ＃ ..或者
    1[012]#10,11,12
    ) # 组 #2 结束
     /# 后跟一个“/”
      （＃组开始＃3
       (19|20)\\d\\d # 19[0-9][0-9] 或 20[0-9][0-9]
       ) # 组结束 #3
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-09T13:27:13.100

也许你可以试试这个正则表达式

```
^((0|1|2)[0-9]{1}|(3)[0-1]{1})/((0)[0-9]{1}|(1)[0-2]{1})/((19)[0-9]{2}|(20)[0-9]{2})$ 
```

本场比赛为（01 至 31）/（01 至 12）/（1900 至 2099）

# .net - “配额超出”Win32Exception 的诊断

> ID：10086985
> 
> 赞同：6
> 
> 时间：2012-04-10T10:25:49.293
> 
> 标签：.net, wpf, performance, winapi, win32exception

大多数时候，作为 .Net 开发人员，我们可以自由地在我们的高级抽象世界中胡闹，但有时现实会踢你的私处，告诉你找一个*真正*懂的人。

我刚刚有过这样的经历之一。我认为将角数据列为项目列表就足够了，以便您了解我们在这里拥有的内容：

*   Win2008服务器
*   64位环境
*   多个客户端同时使用的 WPF 应用程序
*   Application 是一个启动器，它使用 Process.Start() 打开其他应用程序
*   有时我们会遇到下面列出的异常

> ```
> System.ComponentModel.Win32Exception (0x80004005): Not enough quota is
> available to process this command
> at MS.Win32.UnsafeNativeMethods.PostMessage(HandleRef hwnd,
>    WindowMessage msg, IntPtr   wparam, IntPtr lparam)
> at System.Windows.Interop.HwndTarget.UpdateWindowSettings(Boolean
>    enableRenderTarget, Nullable`1 channelSet)
> at System.Windows.Interop.HwndTarget.UpdateWindowPos(IntPtr lParam)
> at System.Windows.Interop.HwndTarget.HandleMessage(WindowMessage msg,
>    IntPtr wparam, IntPtr lparam)
> at System.Windows.Interop.HwndSource.HwndTargetFilterMessage(IntPtr hwnd,
>    Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
> at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, 
>    Boolean& handled)
> at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)
> at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate
>    callback, Object args, Int32 numArgs)
> at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object
>    source, Delegate method, Object args, Int32 numArgs, Delegate
>    catchHandler) 
> ```

**编辑#1** 经过一番检查，这里有更多细节：

*   启动是一个两步过程，启动器使用 Process.WaitForExit() 启动一个中间窗口

*   从中间窗口，可以以相同的方式启动其他进程 (Process.WaitForExit)。

*   由于只打开中间窗口且没有用户交互，启动器进程的句柄数量会随着时间的推移而增加。我们在这里看到的最大增加是 400 --> 6000 个句柄。

编辑中添加的事实真的让我想知道框架中的某个地方是否可能存在句柄泄漏。我正在尝试隔离问题并检查是否可以从头开始重现它。与此同时，任何形式的暗示、想法、支持甚至巧克力都被欣然接受！

**编辑#2**：为了使流程响应`PostMessage()`，我们删除了`Thread.WaitForExit`. 相反，我们为 Process 的 Exited 事件添加了一个处理程序，并将 Launcher 发送到一个循环中，如下所示：

```
 while (foo == true)
        {
            System.Threading.Thread.Sleep(1000);
        } 
```

Exited-Handler 设置`foo`为 false 并且不执行任何其他操作。尽管如此，Handles 的数量仍在增加（半小时内从 400 增加到 800）。

**编辑#3** 有趣的事情终于来了。

```
 while (foo == true)
        {
            System.Threading.Thread.Sleep(1000);
            GC.Collect();
        } 
```

这使它保持了应有的方式，很少有把手，都很漂亮。现在这让我想知道这里出了什么问题......我将再次与负责的开发人员交谈，以检查启动器的其他功能。到目前为止，我听说它使用[XmlDocument.Load()](http://msdn.microsoft.com/en-us/library/875kz807.aspx)读取了一些配置值，这不是`IDisposable`- 使得这里很难产生任何泄漏......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T21:05:56.490

该错误告诉您窗口的消息队列在向其发布消息时已达到其最大容量。这意味着拥有该窗口的线程处理消息的速度不够快，如果有的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-06T19:59:01.817

我知道这个问题已经有六年的历史了，但我们刚刚遇到了同样的问题，我以此作为灵感。我不喜欢的是让线程和循环休眠的想法。

相反，我创建了一个 WPF 窗口。使其透明且高和宽一个像素，并为其添加了 Process 类型的公共属性。

然后，我没有调用 .WaitForExit，而是编写了一个 Shared Sub（对不起，我使用的是 VB.NET 术语），它执行以下操作

```
Public Shared Sub DoWaitForProcessToExit(ByVal poProc As Process, ByVal oOwner As Window)
    Dim oWFE As WaitForProcessToExit
    poProc.EnableRaisingEvents = True
    oWFE = New WaitForProcessToExit
    oWFE.oProc = poProc
    If Not oOwner Is Nothing Then
        oWFE.Owner = oOwner
    End If
    oWFE.ShowDialog()
    oWFE = Nothing
End Sub 
```

*以防万一*发生了一些疯狂的事情并且在激活此对话框时进程已经退出：

```
Private Sub WaitForProcessToExit_Activated(sender As Object, e As EventArgs) Handles Me.Activated

    Try
        If oProc.HasExited Then
            Try
                RemoveHandler oProc.Exited, AddressOf oProc_Exited
            Catch ex As Exception

            End Try
            'whatever happened .... it seems to have gone too quick for this to invoke the _Exited event
            Me.Close()
        End If
    Catch
        Try
            Try
                RemoveHandler oProc.Exited, AddressOf oProc_Exited
            Catch ex As Exception

            End Try
            Me.Close()
        Catch

        End Try
    End Try
End Sub 
```

现在我只需要在加载对话框时执行此操作：

```
Private Sub WaitForProcessToExit_Loaded(sender As Object, e As RoutedEventArgs) Handles Me.Loaded

    AddHandler oProc.Exited, AddressOf oProc_Exited

End Sub 
```

然后只需响应 Exited 事件。没有睡眠，没有循环。

```
Private Sub oProc_Exited(sender As Object, e As EventArgs)

    'This event is raised by the exiting process, which is in a different thread, so, invoke my own
    'close method from my own Dispatcher
    Windows.Application.Current.Dispatcher.Invoke(Sub() CloseMe(), Windows.Threading.DispatcherPriority.Render)

End Sub

Private Sub CloseMe()

    Me.Close()

End Sub 
```

# aptana - 分配未列出的快捷键/键绑定

> ID：10086987
> 
> 赞同：1
> 
> 时间：2012-04-10T10:25:53.213
> 
> 标签：aptana

作为全世界数百万人中的一员，我没有“盎格鲁-撒克逊”键盘，令人沮丧的是，我的键盘上没有 {}（我有 è ° à 和其他对意大利语有用的东西）。编程是多么的麻烦啊！！！！！！

所以我想为花括号分配一个键绑定，但它们没有在首选项->通用->键中列出。

可能吗？我错过了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T23:15:28.980

要确认，您想按一个键而不是花括号？你可以这样使用命令。下面的示例通过插入 {} 并将光标放在中间来近似编辑器通常会执行的操作。

1) 通过 File > New Ruby project > Go to next page for "templates" 创建一个新的 Ruble 并选择一个 Ruble 模板

2）编辑commands/commands.rb文件并插入以下内容（酌情调整）

```
require 'ruble'

command 'Insert Right Brace' do |cmd|
  cmd.key_binding = 'q' # change this for a new key binding
  cmd.scope = 'source'
  cmd.output = :insert_as_snippet
  cmd.input = :selection
  cmd.invoke do |context|
    print '{${0}}' # snippet to surround the cursor with braces
  end
end 
```

# php - .htaccess 文件以允许访问图像文件夹以查看图片？

> ID：10086989
> 
> 赞同：17
> 
> 时间：2012-04-10T10:26:01.290
> 
> 标签：php, apache, .htaccess

我在以下 URL 有一个图像文件夹。

```
www.mysite.com/uploads/ 
```

在不同的页面上：

```
www.mysite.com/search.php/ 
```

我正在尝试使用正确的标签链接访问其中的图像，但是我得到了：

```
Forbidden

You don't have permission to access /uploads/ on this server. 
```

所以我开始涉足一个`.htaccess`文件，但我不知道自己在做什么，我尝试查看一些文档但没有运气，我什至从另一个问题中举了一个例子..这是我的`.htaccess`文件的外观：

```
<FilesMatch "\.(gif|jpe?g|png)$">
Order allow,deny
Allow from all
</FilesMatch>

<Directory /uploads>
# All access controls and authentication are disabled
# in this directory
Satisfy Any
Allow from all
</Directory> 
```

关于如何让它允许访问该文件夹的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T14:51:38.843

```
<Directory /uploads>
   Options +Indexes
</Directory> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T10:41:39.353

在 .htaccess 中授予权限，如下所示：

```
<Directory "Your directory path/uploads/">
Allow from all
</Directory> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-12-20T06:36:00.557

在 images 文件夹中创建一个 .htaccess 文件并添加它

```
<IfModule mod_rewrite.c>
RewriteEngine On
# directory browsing
Options All +Indexes
</IfModule> 
```

你可以把它`Options All -Indexes`放在项目文件`.htaccess`中，文件**拒绝**直接访问其他文件夹。

这做你想要的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-28T02:05:08.190

将 .htaccess 文件放在根文件夹中，添加这一行。确保删除您之前尝试过的所有其他无用规则：

> 选项 - 索引

或尝试：

> 选项所有索引

# mysql - 语法错误@在表触发器中转换 new.value

> ID：10086992
> 
> 赞同：1
> 
> 时间：2012-04-10T10:26:10.657
> 
> 标签：mysql, triggers, syntax-error

有什么问题吗 ：

```
DELIMITER ;;
CREATE TRIGGER `UPD_after_financialStatus` AFTER UPDATE ON `financialStatus` 
FOR EACH ROW
BEGIN
DECLARE `@grossAmountTillNow` varchar(100);
SET @grossAmountTillNow = CONCAT(
    CAST(OLD.grossAmountTillNow AS varchar(50)),
    "---",
    CAST(NEW.grossAmountTillNow AS varchar(50)));
... 
```

它说`Syntax error near 'varchar(50)),"---",CAST(NEW.grossAmountTillNow AS varchar(50))); SET @grossAmoun' at line 4`。
你能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:35:28.297

请比较：

```
SELECT CAST(CURRENT_TIMESTAMP AS VARCHAR(50)) 
```

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'VARCHAR(50))' 附近使用正确的语法

```
SELECT CAST(CURRENT_TIMESTAMP AS CHAR(50)) 
```

> 2012-04-10 12:30:29

[Cast Functions and Operators](http://dev.mysql.com/doc/refman/5.5/en/cast-functions.html#function_cast)中解释了允许的值。

# objective-c - webview not loading images

> ID：10086993
> 
> 赞同：0
> 
> 时间：2012-04-10T10:26:22.937
> 
> 标签：objective-c, ios, xcode, uiwebview

I am using uiwebview to display webpages on ipad . I use this code :-

```
 [[self request] setDelegate:nil];    
    [[self request] cancel];    
    [self setRequest:[ASIWebPageRequest requestWithURL:navigationURL]];    
    [[self request] setDelegate:self];   
    [[self request] setDidFailSelector:@selector(webPageFetchFailed:)];   
    [[self request] setDidFinishSelector:@selector(webPageFetchSucceeded:)];
    [[self request] setShouldPresentProxyAuthenticationDialog:YES];
    [[self request] setShouldPresentCredentialsBeforeChallenge:YES];
    [[self request] setShouldPresentAuthenticationDialog:YES];

    // Tell the request to embed external resources directly in the page    
    [[self request] setUrlReplacementMode:ASIReplaceExternalResourcesWithData];     
    // It is strongly recommended you use a download cache with ASIWebPageRequest   
    // When using a cache, external resources are automatically stored in the cache    
    // and can be pulled from the cache on subsequent page loads    
    [[self request] setDownloadCache:[ASIDownloadCache sharedCache]];     
    // Ask the download cache for a place to store the cached data    
    // This is the most efficient way for an ASIWebPageRequest to store a web page    
    [[self request] setDownloadDestinationPath:       
     [[ASIDownloadCache sharedCache] pathToStoreCachedResponseDataForRequest:[self request]]];   
    [[self request] startAsynchronous]; 
```

Navigation url gets values from one screen where user inputs URL .

and after this

```
- (void)webPageFetchSucceeded:(ASIHTTPRequest *)theRequest 
{    NSString *response = [NSString stringWithContentsOfFile:       
       [theRequest downloadDestinationPath] encoding:[theRequest responseEncoding] error:nil];    
    // Note we're setting the baseURL to the url of the page we downloaded. 
    //This is important!    
    [web loadHTMLString:response baseURL:navigationURL];
    //[web loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:[theRequest downloadDestinationPath]]]];

} 
```

This works fine but there is only one issue i am facing currently .When i try to open one of the links which has images and some animations , animations work fine but no images are displayed in webview.i just see a rect box allocated for image .Same link works perfectly fine on safari browser with all animations and images . How to overcome this issue.

# android - 如何调试 BOOT_COMPLETE 广播接收器的“强制关闭”崩溃？

> ID：10086994
> 
> 赞同：18
> 
> 时间：2012-04-10T10:26:27.080
> 
> 标签：android, broadcastreceiver, android-logcat, bootcompleted

由于手机重新启动并因此在启动时与 Eclipse 调试器/LogCat 断开连接，我如何查看启动完成广播接收器在哪里崩溃？

我在我的公共类 BootCompleteReceiver 的 onReceive() 中执行一些操作 extends BroadcastReceiver { ... }

当手机启动时，这会崩溃并弹出强制关闭对话框。我该如何调试它并查看问题出在哪里？

这个问题适用于调试任何`BOOT_COMPLETE`广播接收器。

谢谢！

**编辑**

是的，当手机启动时，我们可以在 LogCat 中看到系统日志，但我的应用程序 Log.d(TAG,"Boot completed") 必须等到它 (onReceive) 被触发，但到那时应用程序由于问题而崩溃位于接收器本身的某个位置。在我可以记录任何内容之前，该应用程序崩溃了。另外，我不能对正在重启的手机使用“在调试模式下运行”...

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-04-11T11:39:33.007

正如我在另一个线程上写的：

您可以通过 adb 连接到设备并打开设备外壳来模拟所有广播操作。

开始了：

*   打开控制台/终端并导航到 /platform-tools
*   输入“adb shell”或在 linux/mac 上输入“./adb shell”
*   在 shell 中键入“am broadcast -a android.intent.action.BOOT_COMPLETED”或您想要触发的任何操作。

这样你应该可以调试了。

adb 或 adb shell 附带了许多不错的命令。就试一试吧

问候弗洛

**编辑：** 使用上述方法也将重新启动设备。为防止设备重新启动，请使用`am broadcast -a android.intent.action.BOOT_COMPLETED com.example.app`. 请注意广播所在的应用程序包名称的后缀。这使您可以仅将 BOOT_COMPLETED 意图发送到您的应用程序以进行调试。——**罗尔·范乌登**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T10:30:08.233

接收器仅控制您的代码何时运行（即手机启动时）。在调试时，手动运行代码。您可以通过这种方式解决 99% 的问题，其余问题（如果有）可以通过写入 LogCat 来解决，因此请查看您的代码在做什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T10:44:09.387

检查您收到的 Intent 操作和捆绑包，它们可能为空，并且可能是空指针异常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-19T10:06:30.667

只需在 Android Studio 中放入您的终端即可

`adb shell am broadcast -a android.intent.action.BOOT_COMPLETE`

# jquery - multiple records within a single div tag

> ID：10086996
> 
> 赞同：0
> 
> 时间：2012-04-10T10:26:39.643
> 
> 标签：jquery, autocomplete

I am binding the selected values of autocomplete box into a div tag as

```
var data = "<div class='close'><table><tr><td rowspan='4' width='50px;'><img src='" + studentItem.Photo + "' Width='48' Height='48'  /></td><td>" + studentItem.Name + " ( <span class='stuId'>" + studentItem.StudentId + "</span> )</td><td align='right' ><div id='close' class='close16'/></td></tr><tr><td><table cellpadding='0' cellspacing='0'><tr><td>" + studentItem.Email + "</td><td>&nbsp;|&nbsp;</td><td>" + studentItem.Mobile + "</td></tr></table></td></tr></table></td></tr></table></div>";
            $('#students').css('background-color', '#FFAA55');
            $("#students").append(data); 
```

and its binding the datas and displyaing in the div tag as

![enter image description here](../Images/e2dc45e3a0773a263f6d415e2e91e75b.png)

I want the each record should be in a seperate box, for example look at tag box in our stackoverflow

![enter image description here](../Images/6b05ddb03cfef6385afe22921a101e75.png)

i want the result should be like this above.......I even tried to include the div script into a table, but it displays the single record in a whole row, and for the second record it comes to the second row,and I tried including the css inline,that also not working... how can I fix this, can anyone help me..

I tried to set the margin and float style to my div tag as

```
<tr>
    <td colspan="10" >
        <div id="students" style="float: left; clear: both; margin: 25px"></div>
    </td>
</tr> 
```

i tried by setting the margin as 25px for testing purpose and now the output is

![enter image description here](../Images/196b8ab7f9ed69fec083e0dfdf630162.png)

just the space coming between the textbox and div not among records within div, how can I fix this....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T10:30:04.750

To separate the boxes, use `margin`. To get them to line up side by side, but wrapping, use `float: left` followed by a `clear: both` element, or use `display: inline-block`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T10:30:49.873

如果您可以使用其他一些 jQuery 插件，那么这可能会有所帮助：[jQuery Autosuggest](http://code.drewwilson.com/entry/autosuggest-jquery-plugin)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T10:31:32.480

无需`<table>`在 var 数据中创建。您可以放在`<table>`外面并且每次添加时只需添加`<td>`标签`<table><tr>`。

否则`<div>`根据情况使用多个。

```
 <div id="Adddiv" runat="server" clientidmode="Static" >
        </div>

        ===============jQuery============
        var html = "<div id='Adddata'>";
        html += "<a herf='#' style='cursor: pointer;'>";
        html += "<img src='close.png' alt='' /></a>";
        html += "</div>";

        $("#Adddiv").append(html); 
```

# javascript - Magento: Customer Comment on order page required field

> ID：10086998
> 
> 赞同：1
> 
> 时间：2012-04-10T10:26:54.243
> 
> 标签：javascript, validation, magento, required

I am using whiteOrderComment module for customer comment on order review page. but in this section text-area field required option not working.

I did little bit change on /checkout->onepage->review->button.phtml like this

```
<script type="text/javascript">
function validate(){
if(document.getElementById("whiteOrderComment").value == ""){
alert('Required');
}else{
review.save();
}

</script>

<button type="submit" title="<?php echo $this->__('Place Order') ?>" class="button btn-checkout" onclick="validate();"><span><span><?php echo $this->__('Place Order') ?></span></span></button> 
```

but in this page javascript not working.

can you please give any better idea, how can i make this text-area field required.

thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:31:53.743

你可以试试下面的。您需要将此代码放在页面上使用的任何 .js 文件中。您可以从按钮 onClick 事件中调用此函数。谢谢

```
function check_empty(form_id, field_name)
{
 var form = $(form_id);
 var field = form[field_name];
 var val = $(field).getValue();
 if(val == '')
 {
  $(field).addClassName('validation-failed');
  return false;
 }
 return review.save();
} 
```

# c++ - input/output for a file in c++

> ID：10086999
> 
> 赞同：0
> 
> 时间：2012-04-10T10:26:55.210
> 
> 标签：c++

```
 #include <iostream>
   #include <fstream>
   #include <string>
   using namespace std;

   // Main Routine

   void main() { 
      char in;
      string s,m;
      fstream f;

   // Open file
      cout << "Positive Filter Program\n"<< endl;
      cout << "Input file name: ";
      cin >> s;
      cout << "Output file name: ";
      cin >> m;
      f.open(s.data(),ios::in);
      f.open(m.data(),ios::out);

    // Loop through file

    if(f.is_open())
    {  
        while(f.good())
        {
            f.get(in);
            f<<in;
            cout << "\nFinished!"<< endl;
        }
    }
    else cout << "Could not open file";

    // Close file
    f.close();

    } 
```

I am not sure what I am doing wrong here. In this program I am trying to cin the file name that would input, and then would output onto what file name that you typed in.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T10:32:53.690

相同的`fstream`对象正在被重用：

```
f.open(s.data(),ios::in);
f.open(m.data(),ios::out); 
```

它永远不会读取输入文件。改成：

```
std::ifstream in(s.data());
std::ofstream out(m.data()); 
```

`while`循环不正确，应在读取后立即检查读取尝试的结果：

```
char ch;
while(in.get(ch))
{
    out << ch;
}
cout << "\nFinished!"<< endl; // Moved this to outside the while 
```