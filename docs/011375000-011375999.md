# StackOverflow 问答 11375000-11375999

# ruby - 解析和统计结构化文本以构建统计信息

> ID：11375007
> 
> 赞同：0
> 
> 时间：2012-07-07T12:29:05.127
> 
> 标签：ruby, parsing

我有一个特定的问题，我找不到解决方案。我从文本文件中获取以下格式的数据

```
 date1 reason1
    date1 reason1
    date1 reason2
    date1 reason3
    date2 reason4
    date2 reason1
    date2 reason2
    date2 reason2
    date2 reason1
    date2 reason3
    date3 reason4
    date3 reason4
    date3 reason1 
```

我想建立关于数据的统计数据，例如我想像这样计算每个日期的所有不同“原因”

```
 date1 reason1 -> 2        
    date1 reason2 -> 1
    date1 reason3 -> 1
    date2 reason1 -> 2
    date2 reason4 -> 1
    date2 reason2 -> 2
    date1 reason3 -> 1 
```

...等等。我将如何解析数据并构建所需的结果？我猜会使用哈希，但我想不出解决这个问题的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T12:40:24.580

这是一个非常直接的方法：

```
h = Hash.new(0)
File.foreach("foo.txt") do |line|
  h[line.chomp] += 1  
end  
h
#=> {"date1 reason1"=>2,
 "date1 reason2"=>1,
 "date1 reason3"=>1,
 "date2 reason4"=>1,
 "date2 reason1"=>2,
 "date2 reason2"=>2,
 "date2 reason3"=>1,
 "date3 reason4"=>2,
 "date3 reason1"=>1} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T12:47:10.547

```
str = "date1 reason1
date1 reason1
date1 reason2
date1 reason3
date2 reason4
date2 reason1
date2 reason2
date2 reason2
date2 reason1
date2 reason3
date3 reason4
date3 reason4
date3 reason1"

line_counts = Hash.new(0)

str.lines.each do |line|
  line_counts[line.chomp] += 1
end

line_counts.each do |line, count|
  puts "#{line} -> #{count}"
end 
```

输出：

```
date1 reason1 -> 2
date1 reason2 -> 1
date1 reason3 -> 1
date2 reason1 -> 2
date2 reason2 -> 2
date2 reason3 -> 1
date2 reason4 -> 1
date3 reason1 -> 1
date3 reason4 -> 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T13:30:17.540

```
result = File.foreach("foo.txt").each_with_object(Hash.new(0)) do |line,h|
  h[line.chomp] += 1  
end  
#=> {"date1 reason1"=>2,
 "date1 reason2"=>1,
 "date1 reason3"=>1,
 "date2 reason4"=>1,
 "date2 reason1"=>2,
 "date2 reason2"=>2,
 "date2 reason3"=>1,
 "date3 reason4"=>2,
 "date3 reason1"=>1} 
```

# javascript - jQuery - .animate 之后的链接

> ID：11375012
> 
> 赞同：1
> 
> 时间：2012-07-07T12:29:41.537
> 
> 标签：javascript, jquery

我试图让我的代码在动画运行后跟随链接。

这个想法是“Gnoll”为您点击按钮，然后将您发送到链接。

到目前为止，这是我的代码：

它里面没有链接。

*（此外，按钮颜色应该在“Hit”动画的一半左右改变。到目前为止，我在那个动画上失败了）*

```
$(document).ready(function(){

    $('.Homebutton').click(function(){

        $('.animateme').html('<img src="Construct2/Images/Gnoll_Running.gif" />');         
        $('.animateme').animate({
            left: '+=150',
        }, 800, function() {
            $('.animateme').html('<img src="Construct2/Images/Gnoll_Hit.gif" />');
        });
        $('.animateme').animate({
            left: '+=0',
        }, 500);

        $('.animateme').animate({
            left: '+=0',
        }, 500, function() {
            $('.animateme') .html('<img src="Construct2/Images/Gnoll_Resting_smaller.gif" />');
            });

    });

    $('#AddOnbutton').click(function(){
        $('.animateme').html('<img src="Construct2/Images/Gnoll_Running.gif" />');         
        $('.animateme').animate({
            left: '+=250',
        }, 1000, function() {
            $('.animateme').html('<img src="Construct2/Images/Gnoll_Hit.gif" />')

        });
        $('.animateme').animate({
            left: '+=0',
        }, 1000, function() {
            $('.animateme') .html('<img src="Construct2/Images/Gnoll_Resting_smaller.gif" />');
            $("#AddOnbutton").html('<img src="Construct2/Images/redbutton.png" />');
            });

    });

}); 
```

如您所见，代码非常基础。链接应在最后一次后约 0.5 秒触发

```
$('.animateme') .html('<img src="Construct2/Images/Gnoll_Resting_smaller.gif" />'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:29:47.137

我现在有点发现自己了 :) 仍然不完美，但没关系。

```
$('a.home').click(function(){
    var newLocation = $(this).attr('href');
        $('.animateme').html('<img src="Construct2/Images/Gnoll_Running.gif" />');         
        $('.animateme').animate({
            left: '+=150',
        }, 800, function() {
            $('.animateme').html('<img src="Construct2/Images/Gnoll_Hit.gif" />');
        });
        $('.animateme').animate({
            left: '+=0',
        }, 500);

        $('.animateme').animate({
            left: '+=0',
        }, 500, function() {
            $('.animateme') .html('<img src="Construct2/Images/Gnoll_Resting_smaller.gif" />');

            document.location = newLocation;
            });
            return false;     
    }); 
```

# javascript - 将 JSON 字符串从一个 HTML 页面发送到另一个

> ID：11375013
> 
> 赞同：0
> 
> 时间：2012-07-07T12:29:50.757
> 
> 标签：javascript, jquery, json

我知道这可能听起来很傻，更简单的选择是将我的页面转换为 PHP。但是有没有办法用 Javascript 或 jQuery 在 HTML 中做到这一点？

我想将 JSON 字符串从一个 HTML 页面发送到另一个页面。

其中`first.html`有一组图像被转换为​​如下所示的 JSON 字符串：

```
{"images":[ {"src":"images/en1.png"},
    {"src":"images/en4.png"},
    {"src":"images/en2.png"},
    {"src":"images/fr4.png"},
    {"src":"images/b40.png"},
    {"src":"images/ca7.png"}
]} 
```

我想把它发送到 `second.html`那里，一个叫做**编辑**的按钮会把这一切都带回`first.html`

有没有办法做到这一点或者是不可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T12:35:15.400

您可以为此使用查询字符串

就像是

```
 <a 
href='second.htm?images={"images":[ {"src":"images/en1.png"},{"src":"images/en4.png"},{"src":"images/en2.png"},{"src":"images/fr4.png"},"src":"images/b40.png"},{"src":"images/ca7.png"}]}' >
    Go to second page
    </a> 
```

在 second.htm 上，您可以使用

```
window.location.href 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T12:34:58.447

您可以使用 ：

cookie 来存储字符串并在第二个 html 中读取 cookie

将整个字符串（JSON stringify）作为 URL 参数传递

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T14:26:52.957

[您可以使用 Andris Reinman 的jStorage](http://www.jstorage.info/)库来利用 HTML5 离线存储。只需调用`set`first.html 页面中的`get`方法和 second.html 页面中的方法。

# emacs - 如何为emacs制作缩进线

> ID：11375015
> 
> 赞同：0
> 
> 时间：2012-07-07T12:29:55.063
> 
> 标签：emacs, lisp

我在我的emacs上遇到了一个小问题：我用我的emacs写lisp，但是，你知道，lisp的缩进太疯狂了。那么如何为 emacs 插入缩进行呢？

在网上，我得到了这个函数的一段省略代码。我下载它并将其保存为“.el”文件。以及在这之后应该怎么做。我应该在我的“.emacs”文件中写些什么？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T15:31:29.253

在最基本的情况下，您可以从using将 Lisp 代码加载到`.el`文件中：`.emacs``load-file`

```
(load-file "/path/to/downloaded.el") 
```

更便携一些，`load`改为使用。`auto-load-alist`但是，您通常希望使用、`mode-alist`和中的一个或多个来按需加载`eval-after-load`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T13:36:11.667

第二个问题：查看“.el”文件中的注释。可能有一些关于安装的片段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T08:18:00.030

我了解您没有 .el 文件，而是一小段 elisp 代码。只需将其写在您的`.emacs`文件中并使用`M-x eval-current-buffer`.

# php - 将mysql表从单个输入更新到不同的列

> ID：11375017
> 
> 赞同：0
> 
> 时间：2012-07-07T12:30:12.760
> 
> 标签：php, mysql

我有一张桌子叫`dircode`：

```
CREATE TABLE dircode (
  jobcodeid int(11) NOT NULL AUTO_INCREMENT,
  jobcodeserial varchar(255) NOT NULL,
  jobcode1 varchar(255) NOT NULL,
  codestatus1 varchar(60) NOT NULL,
  jobcode2 varchar(255) NOT NULL,
  codestatus2 varchar(60) NOT NULL,
  jobcode3 varchar(255) NOT NULL,
  codestatus3 varchar(60) NOT NULL,
  jobcode4 varchar(255) NOT NULL,
  codestatus4 varchar(60) NOT NULL,
  PRIMARY KEY (jobcodeid)
) 
```

对于单个序列号，用户最多可以有 4 个工作代码。当用户输入目录序列号和一个代码时，我希望将该特定作业`codestatus`更新为`'Used'`. 其余数据应保持不变。例如，当用户输入序列号并且`jobcode3`状态`codestatus3`应该更新为`'Used'`. 请帮助我为上述查询编写 PHP 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T13:06:52.820

正如您所说，您需要[更新](http://dev.mysql.com/doc/refman/5.1/en/update.html)该行。

您试图首先找出输入的代码是 1、2、3 还是 4（例如`jobcode3`），然后设置该代码的状态（在这种情况下`codestatus3`）。为此，我会（或不会，见下文）将整行作为[关联数组](http://www.php.net/manual/de/function.mysql-fetch-assoc.php)获取并在您的代码中找出索引（检查每个作业代码，找到代码并从列名中提取索引）。

然后[连接](http://www.php.net/manual/de/function.mysql-connect.php)到 MySQL 服务器并[执行](http://php.net/manual/de/function.mysql-query.php)如下查询：

```
$columName = "codestatus" . $theCorrectIndex;
mysql_query(sprintf("UPDATE dircode SET %s = 'Used' WHERE jobcodeid = %d",
                      $columName,$dircodeId)); 
```

检查布尔返回。如果是`false`，请检查[错误的详细信息](http://www.php.net/manual/de/function.mysql-error.php)。

（或者，您可以将所有这些都放在您的 SQL 查询中，请参阅[this question](https://stackoverflow.com/questions/11177532/update-only-one-column-next-column-if-previous-column-is-empty)或[this](https://stackoverflow.com/questions/1886928/mysql-update-using-if-condition)和 MySQL 的[控制流函数](http://dev.mysql.com/doc/refman/5.1/en/control-flow-functions.html)。）

**这不是一个很好的解决方案。**您可能想考虑创建另一个`codes`包含 columns和外键列的表`id`，这样您就可以避免将索引放入列名（通常不是一个好主意）。`status``dircode_id`

此外，还有很多关于此的文档（[MySQL](http://dev.mysql.com/doc/)、[PHP](http://php.net/docs.php)、[SO](https://stackoverflow.com/search)）。

# android - Android - 按顺序播放多个声音

> ID：11375027
> 
> 赞同：2
> 
> 时间：2012-07-07T12:31:34.683
> 
> 标签：android, audio

我需要在活动运行时运行许多小声音。某些文件每隔固定时间间隔播放一次（例如 5 秒） 某些文件将在一个完成下一次启动时按顺序播放（例如 sound1、sound2、sound3）当触摸屏幕时。

总声音约为 35 个短 mp3 文件（最长 3 秒）。

实现这一点的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T16:03:13.647

[SoundPool](http://developer.android.com/reference/android/media/SoundPool.html)通常用于播放多个短声音。您可以在 onCreate() 中加载所有声音，将它们的位置存储在 HashMap 中。

**创建声音池**

```
public static final int SOUND_1 = 1;
public static final int SOUND_2 = 2;

SoundPool mSoundPool;
HashMap<Integer, Integer> mSoundMap;

@Override
public void onCreate(Bundle savedInstanceState){
  mSoundPool = new SoundPool(2, AudioManager.STREAM_MUSIC, 100);
  mSoundMap = new HashMap<Integer, Integer>();

  if(mSoundPool != null){
    mSoundMap.put(SOUND_1, mSoundPool.load(this, R.raw.sound1, 1));
    mSoundMap.put(SOUND_2, mSoundPool.load(this, R.raw.sound2, 1));
  }
} 
```

然后，当您需要播放声音时，只需调用 playSound() 并使用您的声音的常量值。

```
/*
*Call this function from code with the sound you want e.g. playSound(SOUND_1);
*/
public void playSound(int sound) {
    AudioManager mgr = (AudioManager)mContext.getSystemService(Context.AUDIO_SERVICE);
    float streamVolumeCurrent = mgr.getStreamVolume(AudioManager.STREAM_MUSIC);
    float streamVolumeMax = mgr.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
    float volume = streamVolumeCurrent / streamVolumeMax;  

    if(mSoundPool != null){
        mSoundPool.play(mSoundMap.get(sound), volume, volume, 1, 0, 1.0f);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T12:40:53.403

`MediaPlayer`有`PlaybackCompleted`状态，所以当一个音频结束时，你可以开始播放另一个

```
public void setOnCompletionListener (MediaPlayer.OnCompletionListener listener) 
```

[来源](http://developer.android.com/reference/android/media/MediaPlayer.html#setOnCompletionListener%28android.media.MediaPlayer.OnCompletionListener%29)

我会尝试`Thread`或`AsyncTask`分别播放不同的音频线

# eclipse-rcp - 如何从 java 类调用 xtend2 生成器？

> ID：11375028
> 
> 赞同：0
> 
> 时间：2012-07-07T12:31:42.873
> 
> 标签：eclipse-rcp, xtext, eclipse-emf-ecore, xtend

我为我的 DSL 使用 Xtext 框架，我想通过工具栏底部生成代码。我从工作台中选择了文件，但是如何调用 Xtend 生成器？我不知道如何获取 doGenerate 的资源参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T13:59:41.253

虽然问题有点不同，但我的答案也在这里：[How to invoke Xtext parser/JvmModelInferrer from a Java project](https://stackoverflow.com/questions/11341342/how-to-invoke-xtext-parser-jvmmodelinferrer-from-a-java-project)

基本上，使用注入器 Xtext 生成并获取 IGenerator 实例。

# android - Android 我可以通过 ppi 获取设备 dpi

> ID：11375030
> 
> 赞同：4
> 
> 时间：2012-07-07T12:33:05.027
> 
> 标签：android, dpi, ppi

我正在开发一个支持多屏幕的应用程序。

我刚刚访问了[wiki Android DeviceDensity 比较页面](http://en.wikipedia.org/wiki/List_of_displays_by_pixel_density)。

我想转换`ppi`为`dpi`.

例如：

三星 Galaxy Note 有一个`ppi`（`285`根据 wiki 页面）。

但在 wiki 页面中，`dpi`并不是每个 android 设备都有数据。

我想知道如何计算`dpi`。`ppi`

例如，三星 Galaxy Note 有一个`ppi`. `285`如何计算三星 Galaxy Note 设备的密度（在 中`dpi`）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T09:13:55.207

```
DisplayMetrics dm = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(dm);

 // Display device width and height in pixels
 screenHeightpx = dm.heightPixels;
 screenWidthpx  = dm.widthPixels;

 // Display device dpi value of X Y in pixels
 screenDPIx = dm.xdpi;
 screenDPIy = dm.ydpi; 
```

我希望这能帮到您

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T13:47:20.163

关于将 ppi 转换为 dpi 的 IDK，因为每英寸像素是一个固定值，另一方面，每英寸 dpi 点数取决于屏幕密度。您可以根据 ppi 和屏幕密度计算 dpi。这里有两个例子。

[http://android-er.blogspot.com/2011/07/get-screen-size-in-dpi.html](http://android-er.blogspot.com/2011/07/get-screen-size-in-dpi.html)

[在android中以编程方式获取屏幕密度？](https://stackoverflow.com/questions/3166501/getting-the-screen-density-programmatically-in-android)

主要是 Jere.Jones 的回答。

# delphi - Delphi2005 - 在另一种方法中使用 TADOQuery 结果

> ID：11375036
> 
> 赞同：0
> 
> 时间：2012-07-07T12:34:25.710
> 
> 标签：delphi, clone, recordset, tadoquery

由于代码冗余，我将常用的 ADOQuery 处理概括为一个自己的方法，该方法返回查询的 _RecordSet。现在，当我检查该方法中的查询结果时，它们检查正常。但是返回的_RecordSet 似乎为空或nil（异常：*EOleException 'Item cannot be found in the collection to the specific name or ordinal.'*）从我收集的信息来看，我似乎需要返回查询的_RecordSet的克隆。到目前为止，我已经尝试使用

`res := qr.Recordset.Clone(adLockUnspecified); Result := res;`,

`TADOQuery.RecordSet._xClone()`方法

不成功，以及[这些](https://stackoverflow.com/a/4791509/1462564)方法，其中没有一个有效（几个组件无法识别，我猜是版本差异）。

我用于查询的代码：

```
function queryDb(const s: WideString; const dc: boolean = true): _RecordSet;
var
  ds: String;
  conn: TADOConnection;
  qr: TADOQuery;
  res: _RecordSet;
begin
  Result := nil;
  conn := TADOConnection.Create(nil);
  qr := TADOQuery.Create(nil);
  try
    ds := 'Provider=Microsoft.Jet.OLEDB.4.0;Data Source='
          + ExtractFilePath(Application.ExeName)
          + 'gdkp.mdb;Persist Security Info=False';
    conn.ConnectionString := ds;
    conn.LoginPrompt := false;
    conn.Connected := true;
    qr.Connection := conn;
    if(dc = true)then begin
      qr.DisableControls
    end;
    qr.SQL.Add(s);
    qr.Open;
    Result := qr.Recordset;
  finally
    conn.Free;
    qr.Free;
  end;
end; 
```

* * *

之前是否有人克服过这个问题并知道合适的答案，或者可以引导我找到有用的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T13:23:48.153

我不知道你的疯狂滑稽动作哪个更疯狂：

1.  在函数内部设置并连接到数据库并在该函数内部进行查询，每次查询时都连接到数据库，这将非常缓慢。

2.  ADO 查询对象的生命周期应该比函数内部更长。这是一种代码气味，一种严重的气味。

3.  将记录集保留在它所属的查询中。

4.  普通人创建 TDataModules 并在他们的应用程序的生命周期中保留他们的对象，并使用以下代码重新查询：

    query.Active := false; query.Active := true;

每次您需要一些数据时，当它不必连接到数据库、创建和断开连接和查询时，请注意您的应用程序加速。

你到底在用你回来的 _recordsets 做什么？您是否在 C# 中学习过 ADO，并且您正在尝试在 Delphi 中使用 C# ADO.net 习惯用法？不。别那样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T15:20:52.617

您返回的 RecordSet 是 nil/empty，因为您在 finally 语句中将其关闭。我猜这就是为什么您在返回之前尝试克隆 RecordSet 的原因？克隆它会创建另一个指向同一 RecordSet 的指针，因此关闭 RecordSet 也会导致您的克隆返回 nil/empty。

正如 Ben 所建议的，有更好的方法来做到这一点，比如使用 TDataModules，但这是我的方法：

我倾向于为每个数据检索或更新/插入操作编写一个函数。每个函数都作为参数传递一个 ADO 连接，然后运行查询/存储过程的内容包含在函数中，任何数据都作为 var 参数或返回值返回。我保留了一个 ADO 连接，它根据需要传递给每个函数。

eg（伪代码，因为我有一段时间没有做过Delphi）

```
function GetAllUsers(adoConnection : TAdoConnection) : TStringList    
begin
  result.clear;
  if (adoConnection <> nil) then
  begin
     ..
     ..
     // have already set up an ADOStoredProc called storedProc in this
     // part of the code block
     ..
    adoRec := storedProc.Execute();
    while not (adoRec.eof) do              // loop through record set and get our data
    begin
      result.Add(adoGetFieldStr(adoRec,'USERNAME'));    
      adoRec.MoveNext;
    end;
    adoRec.Free;
  end;
end 
```

希望有帮助

# antlr - 在 antlr 中使一些解析器规则不区分大小写

> ID：11375037
> 
> 赞同：2
> 
> 时间：2012-07-07T12:34:30.643
> 
> 标签：antlr, antlr3

我正在编写一个小型 csharp 控制台应用程序，它从控制台读取文本，进行一些操作并返回一个字符串。为此，我正在使用 Antlr。语法文件如下所示。

```
 grammar test;
options {

  language = CSharp2;
  output = AST;
}
start returns [String res]: expression EOF
{ 
$res=$expression.res;  
} ;

expression returns [String res]
: Identifier  {$res=$Identifier.text}
|Num {$res=$num.text;
|function {$res=function.res}
;

function: 'left'  '( Identifier ')'{some code here}
        | 'right' '( Identifier ')'{some code here}
        |..........
         ;
Num : (Minus)?('0'..'9')+   ;
Identifier  :  ('a'..'z'|'A'..'Z'|'\\'|'/'|'_'|':'|';'|'?'|'.'|'0'..'9')('a'..'z'|'A'..'Z'|'\\'|'/'|'_'|':'|';'|'.'|'?'|'0'..'9')*; 
```

我有几个这样的函数可以进行一些字符串操作。现在，我希望 Antlr 能够不分大小写地识别这些函数名称。目前，它只接受小写字母作为函数名，如..upper(asdf)。我无法在我的应用程序中将每个标记都转换为小写，因为它也会更改标识符的大小写。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-07T13:14:55.253

只需定义适当的标记。所以，对于上面的代码：

```
function : Left  '(' Identifier ')' {some code here}
         | ..........
         ;

Left : ('l'|'L')('e'|'E')('f'|'F')('t'|'T'); 
```

或者，如果您确定要遇到以下情况`lEfT`：

```
function : Left  '(' Identifier ')' {some code here}
         | ..........
         ;

Left : ('left'|'LEFT'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-19T00:14:53.800

不区分大小写[的标准方法是](https://theantlrguy.atlassian.net/wiki/pages/viewpage.action?pageId=2687342)

```
LEFT : [Ll] [Ee] [Ff] [Tt]; 
```

如果所有规则都不区分大小写，则

1.  **仅使用小写**创建语法

***   在将要编译的字符串传递给词法分析器之前，将字符串设为**小写**** 

 *** * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-03-10T06:55:50.087

您可以使用选项 { caseSensitive=false } 来维护不区分大小写的词法分析器**

# c# - 确认或拒绝：XmlSerializer 无法序列化以下内容：ArrayList 数组和 List 数组

> ID：11375040
> 
> 赞同：0
> 
> 时间：2012-07-07T12:35:07.227
> 
> 标签：c#, .net, serialization, xmlserializer

[XmlSerializer.Serialize 方法](http://msdn.microsoft.com/en-us/library/bdxxw552.aspx)的文档说明如下：

> `XmlSerializer`不能序列化以下内容：数组和`ArrayList`数组`List<T>`。

但是，如果我尝试使用以下代码，它可以工作（我使用`List<int>`and `ArrayList`）。那么这是一个文档缺陷吗？ .NET 4.5 中的一个新功能还没有成为文档的方式？

`List<T>`我曾怀疑这可能是一条简短消息，说明除非您拥有[对象图中的所有类型，](https://stackoverflow.com/questions/3704807/c-sharp-xmlserializer-serialize-generic-list-of-interface)否则您无法序列化 a ，但这对于 ArrayList 来说没有意义，因为它只是`object`.

```
private static string Serialise<T>(T o)
{
    var serializer = new XmlSerializer(typeof(T));
    var memoryStream = new MemoryStream();
    serializer.Serialize(memoryStream, o);
    memoryStream.Position = 0;
    using (var reader = new StreamReader(memoryStream))
    {
        return reader.ReadToEnd();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T12:51:25.180

再次阅读文档-它说您不能序列化or （即and ）的*数组。*`List<T>``ArrayList``List<T>[]``ArrayList[]`

果然，这些工作：

```
Serialise(new ArrayList());
Serialise(new List<int>()); 
```

这些不会：

```
Serialise(new ArrayList[]{});
Serialise(new List<int>[]{}); 
```

后者抛出此异常：

> `System.InvalidOperationException:`无法生成临时类`(result=1)`。

# python - 通过超链接通过 html 页面显示 xml 文件

> ID：11375049
> 
> 赞同：1
> 
> 时间：2012-07-07T12:36:35.760
> 
> 标签：python, html, xml, linux, ubuntu

我在 django 中创建了一个应用程序，用于搜索用户在 10 个 xml 文档中输入的单词。只要他输入单词，结果就会被定向到包含列表+图形图表的页面，以表示每个 xml 文件的单词频率。

我的html代码：

```
<body BGCOLOR = #9ACD32">
<ul> 
{% for l in list1 %}
      <li> {<a href="/home/pooja/Desktop/{{l.file_name}}/">{l.file_name}}, {{l.frequency_count}}</li>
{% endfor %}
</ul>
</body> 
```

可以看到我正在超链接 xml 文件。但是当我点击链接时，它没有显示出来。基本上，我希望显示的列表具有 xml 文件的超链接，当用户单击它时，他可以看到该文件的内容。我该怎么做？我是 xml 文件和 django 的新手。所以，

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T13:13:46.660

您需要将上述文件上传到您的网络服务器，然后链接到该文件.. 例如

/www/文件夹/{{l.file.name}}/">

您目前正在本地调用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T12:39:18.787

您似乎正在使用本地文件系统上的文件路径，您需要使用您的网络服务器映射到该文件的 URL（您可能需要移动文件或重新配置您的网络服务器以使它们通过 HTTP 可用）。

# php - php 随机评论生成器

> ID：11375052
> 
> 赞同：0
> 
> 时间：2012-07-07T12:36:40.520
> 
> 标签：php, random, comments, chat

这看起来有点奇怪，但是否有任何脚本会生成随机评论，有点像聊天室评论。

随机的东西，比如“我很无聊”、“嘿，人们”、“要登录 cya”、“有人看过这部电影*_* ”。

有人遇到过这样的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T12:42:37.180

您可以通过组合来自两个数组的随机选择来*生成*随机注释。

一个用于[人称代词](http://en.wikipedia.org/wiki/Personal_pronoun)，一个用于动作/动词...

```
$pronoun = array(
 "I'm",
 "You're"
 "He's",
 "She's",
 "They're"
);

$action = array(
 "stacking",
 "overflowing",
 "confused",
 "bewildered",
 "wondering how many more of these I can make up",
 "getting bored... So that's enough for now..."
); 
```

在每个数组上运行[`array_rand()`](http://php.net/manual/en/function.array-rand.php)一次将返回一个随机索引，连接相应的值将生成一个注释。您必须加强阵列并使其适合您的需求。

```
$comment = $pronoun[array_rand($pronoun)] . ' ' . $action[array_rand($action)]; 
```

* * *

创建评论生成器功能将进一步简化使用该系统的过程 -

```
function generateComment(){
  global $pronoun,$action;
  return $pronoun[array_rand($pronoun)] . ' ' . $action[array_rand($action)]
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T12:38:46.290

```
$comments = array("Im bored", "Hey people", "Gonna log cya", "Anyone seen the film");
$random_comment = array_rand($comments);

echo $comments[$random_comment]; 
```

* * *

如果您有一个带有注释的 MySQL 表，您可以执行以下操作：

```
$result = mysql_query("SELECT `comment` FROM `comments` ORDER BY RAND() LIMIT 0,1");
if($result) echo mysql_result($result, 0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T12:40:45.950

```
$comments = array("Im bored", "Hey people", "Gonna log cya", "Anyone seen the film");
shuffle($comments);

echo $comments[0];//1,2,3..... 
```

# objective-c - 字典范围？

> ID：11375053
> 
> 赞同：0
> 
> 时间：2012-07-07T12:36:43.187
> 
> 标签：objective-c, ios, xcode, dictionary, scope

我像这样声明我的字典：

```
@property (weak, nonatomic) NSMutableDictionary *testVariableValues;
@synthesize testVariableValues = _testVariableValues; 
```

然后，我像这样填充字典：

```
- (IBAction)testPressed:(UIButton *)sender {

    self.testVariableValues = [NSMutableDictionary dictionary];

    if ([sender.currentTitle isEqualToString:@"Test 1"])
    {
        [self.testVariableValues setObject:[NSNumber numberWithDouble:5.2] forKey:@"x"];
        [self.testVariableValues setObject:[NSNumber numberWithInt:-1] forKey:@"y"];
        [self.testVariableValues setObject:[NSNumber numberWithInt:1] forKey:@"a"];
    } else if ([sender.currentTitle isEqualToString:@"Test 2"]) {
    // Continues like this 
```

每次我填充字典时，我都会将字典的内容打印到命令行，这样我就知道该部分正在工作，如果我尝试从另一种方法访问字典，问题似乎就会出现，如下所示：

```
if ([self.display.text isEqualToString:@"x"]) {
    NSLog(@"%f", [[self.testVariableValues objectForKey:@"x"] doubleValue]);
    [self.brain pushOperand:[[self.testVariableValues objectForKey:@"x"] doubleValue]]; 
```

这段代码中的 NSLog 返回 null，这让我觉得我无法从 testPressed 方法外部访问字典。有人能对此有所了解吗？我对字典的执行全错了吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T12:39:07.580

你的字典应该是一个强属性，因为如果你让它变弱，字典将在 time`testPressed`方法结束执行时被释放

你应该改变

```
@property (weak, nonatomic) ... 
```

至

```
@property (strong, nonatomic) ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T12:37:53.317

声明具有强属性的字典属性：

```
@property (strong, nonatomic) NSMutableDictionary *testVariableValues; 
```

# c# - 在更新 itemsource 时更新 WPF 用户控件中的项目集合

> ID：11375056
> 
> 赞同：0
> 
> 时间：2012-07-07T12:37:05.480
> 
> 标签：c#, wpf, xaml, user-controls

我有一个带有对象集合的自定义 WPF UserControl。

```
public class MyUserControl : UserControl
{
    public readonly static DependencyProperty PointsSourceProperty =
    DependencyProperty.Register("PointsSource", typeof(IEnumerable), typeof(MyUserControl), new FrameworkPropertyMetadata(null, OnPointsSourceChanged));

   public IEnumerable PointsSource
   {
       get { return GetValue(PointsSourceProperty) as IEnumerable; }
       set { SetValue(PointsSourceProperty, value); }
   }

   private ObservableCollection<DataPoint> _points = new ObservableCollection<DataPoint>();
   public ObservableCollection<DataPoint> Points
   {
      get { return points; }
   }

   private static void OnPointsSourceChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
   {
        // Expect to update Points collection
   } 
```

}

```
public class DataPoint : DependencyObject
{
    public readonly static DependencyProperty TimeProperty =
    DependencyProperty.Register("Time", typeof(DateTime), typeof(DataPoint));

    public readonly static DependencyProperty ValueProperty =
    DependencyProperty.Register("Value", typeof(double), typeof(DataPoint));

    public DateTime Time
    {
        get { return (DateTime)GetValue(DateTimeProperty); }
        set { SetValue(DateTimeProperty, value); }
    }

    public double Value
    {
        get { return (double)GetValue(ValueProperty); }
        set { SetValue(ValueProperty, value); }
    }
} 
```

我这样定义我的控件，其中 Data 是视图模型中的可观察集合：

```
<my:myUserControl PointsSource="{Binding Data}">
<my:myUserControl.Points>
    <my:Point Time="{Binding TimeUtc}" Value="{Binding Value}" /> 
</my:myUserControl.Points>
</my:myUserControl> 
```

如何在**PointsSource**值更改时更新**Points**集合？

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T12:53:00.287

尝试这个：

```
private static void OnPointsSourceChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
    MyUserControl control = d as MyUserControl;

    // you have to replace ViewModelItemClass with the name of your class T
    // in ObservableCollection<T> from the property Data in your ViewModel
    var sourceCollection = e.NewValue as IEnumerable<ViewModelItemClass>;

    control._points.Clear();
    foreach (var item in sourceCollection)
    {
        control._points.Add(new DataPoint { Time = item.TimeUtc, Value = item.Value });
    }
} 
```**

# javascript - 主干和原型初始化

> ID：11375065
> 
> 赞同：0
> 
> 时间：2012-07-07T12:38:27.553
> 
> 标签：javascript, backbone.js, prototype

我有一个代码：

```
Application = function() {
    Application.prototype.currentQuote.collection.fetch();
};

Application.prototype = {}

Application.prototype.currentQuote = {};
Application.prototype.currentQuote.model = new (Backbone.Model.extend({
    defaults: {
        products: []
    }
}))();

Application.prototype.currentQuote.collection = new (Backbone.Collection.extend({
    model: Application.prototype.currentQuote.model,
    url: 'test.json'
}))();

App = new Application(); 
```

但是，当获取集合时，我得到“未捕获的类型错误：对象不是函数”错误。我不明白为什么，我能解决什么？

您可以在此处查看测试用例：[https ://dl.dropbox.com/u/15806777/development/bb/index.html](https://dl.dropbox.com/u/15806777/development/bb/index.html)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T16:47:01.950

我猜你的问题就在这里：

```
Application.prototype.currentQuote.collection = new (Backbone.Collection.extend({
    model: Application.prototype.currentQuote.model, // <------------------------
    url: 'test.json'
}))(); 
```

一个[集合`model`](http://backbonejs.org/#Collection-model)是：

> 集合包含的模型类。

所以`model`应该是来自`Backbone.Model.extend({...})`（即“类”）的东西，而不是来自`new (Backbone.Model.extend({...}))`（即模型实例）的东西。当您要求一个集合创建一些模型时（通过构造函数调用，`fetch`... `add`），该集合需要它可以使用`new`的东西，而您不能`new model_instance`，因为[`new`操作员需要一个构造函数](https://developer.mozilla.org/en/JavaScript/Reference/Operators/new)：

> `new`运算符创建用户定义对象类型或具有构造函数的内置对象类型之一的实例。

这就是您的“未捕获类型错误：对象不是函数”错误的来源。

你需要这样的东西：

```
Application.prototype.currentQuote.Model = Backbone.Model.extend({
    defaults: {
        products: []
    }
});
//...
Application.prototype.currentQuote.collection = new (Backbone.Collection.extend({
    model: Application.prototype.currentQuote.Model,
    url: 'test.json'
}))(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T13:19:34.480

这种架构非常奇特。目前尚不清楚您要达到的目标。我建议阅读一下函数原型的工作原理。但更有可能的是，您的意图更像是这样：

```
(function () {
  var CurrentQuote, CurrentQuoteSet;

  function Application() {
    this.collection = new CurrentQuoteSet;
    this.collection.fetch();
  };

  CurrentQuote = Backbone.Model.extend({
    defaults: {
      products: []
    }
  });

  CurrentQuoteSet = Backbone.Collection.extend({
    model: CurrentQuote,

    url: "test.json"
  });

  window.App = new Application;
})(); 
```

# html - 访问图片需要认证

> ID：11375066
> 
> 赞同：0
> 
> 时间：2012-07-07T12:38:33.653
> 
> 标签：html, image, url, authentication, webserver

我最近制作了一个 Ruby on Rails 应用程序来解析和提取 atom 提要。我提取了一些字段，例如：人名、消息和头像图像链接。

问题是头像的链接如下所示：

`https://foo.atlassian.net/secure/useravatar?ownerId=foo.bar&avatarId=10302&s=48`

如果我登录了从中获取图像 url 的站点并在浏览器中访问该 url，则会显示图像。如果我结束会话（注销、在我未登录的其他浏览器中打开等），它不会显示（实际上它显示的是默认无头像图像）。

如何向服务器发送一些信息，以便进行身份验证并获取所需的图像？（我不想存储图像 - 我有一个可以用来验证的虚拟帐户）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T13:00:56.667

`Net::HTTP`与 SSL 一起使用。来自[Ruby STDLib Docs](http://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP.html#label-HTTPS)的示例：

```
uri = URI('https://secure.example.com/some_path?query=string')

Net::HTTP.start(uri.host, uri.port, :use_ssl => uri.scheme == 'https').start do |http|
  request = Net::HTTP::Get.new uri.request_uri
  response = http.request request # Net::HTTPResponse object
  response.body # The actual response body
end 
```

# git - 浅克隆后推送到 github

> ID：11375070
> 
> 赞同：21
> 
> 时间：2012-07-07T12:38:51.420
> 
> 标签：git, heroku, github, shallow-clone

由于提交的数量巨大，我有一个庞大的 git 存储库，所以按照[这里](https://stackoverflow.com/questions/11235108/can-i-delete-my-local-git-repo)的建议，我创建了一个浅克隆。我已经对这个新的本地 repo 进行了更改，现在我想推送到我在 Github 的起源（然后再推送到我在 Heroku 上的暂存和生产遥控器）。也许有一天我会学会阅读文档：

> git clone --depth 命令选项说
> 
> --depth 创建一个浅克隆，其历史被截断为指定的修订数。浅层存储库有许多限制（您不能克隆或从中获取，也不能从中推送或进入）

那么......我如何才能摆脱这种情况并将我的代码推送到 Github？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-03-21T05:18:26.393

Git（从 1.8.3 开始）现在有一种官方方式来获取浅克隆的完整历史记录：

```
git fetch --unshallow 
```

从[git fetch 文档](https://git-scm.com/docs/git-fetch)中：

> `--unshallow`
> 
> 如果源存储库是完整的，则将浅存储库转换为完整存储库，消除浅存储库施加的所有限制。
> 
> 如果源存储库很浅，请尽可能多地获取，以便当前存储库与源存储库具有相同的历史记录。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-08T08:50:32.733

我不同意接受的答案有两个原因：

1.  失败和忘记文件的原因有很多
2.  您丢失了提交消息和历史记录

以下是我的建议：

## 移植点

你应该有一个带有移植点的 $GIT_DIR/.git/shallow 文件。如果历史足够简单，即使文档另有说明，这个移植点也应该允许您推动。

## 补丁

这使您可以保留提交历史记录等：

```
git format-patch origin..master 
```

然后克隆原点并重新应用：

```
git clone origin_path
cp shallow_clone/*.patch deep_clone
cd deep_clone
git am *.patch 
```

这次可以推了！

```
git push 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-06T19:32:30.403

如果您在浅层克隆中工作并且缺少历史记录导致问题，您可以使用该`--depth`选项获取更多历史记录。

```
git fetch --depth=20 
```

其中 20 是要获取的提交数量。如果这还不够，请增加它。

您也可以将`--depth`选项与`git pull`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-08-21T10:13:26.573

选项 1）如果您仍然有原始仓库，只需在推送之前从中获取：

```
git fetch --unshallow 
```

选项 2） **当心！**这仅推荐用于新的回购，因为这**会**导致历史丢失，并且很容易发生冲突！

如果您已经删除了从中获取的存储库，则需要丢弃所有历史记录。

```
 git filter-branch -- --all
 git push 
```

`git filter-branch`: 让你重写 Git 修订历史

`--`: 将过滤器分支选项与修订选项分开

`--all`：重写所有分支和标签

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-10-26T13:34:42.340

我在将浅克隆 repo 推送到 Bitbucket 服务器时遇到了类似的问题，而且我无法访问旧历史。最后，我找到了解决方案。请参阅带有以下注释的示例脚本：

```
#!/bin/bash

# Fix shallowness
mv .git/shallow .git/info/grafts

git checkout --orphan temp # create temp empty commit
git reset --hard
git commit -m "Init" --allow-empty

# Replace all shallow commits ids with new commit id. I copy-paste all refs from shallow file 
git replace 196cdbdb30e608aae2fd7cbe97cc8c0e6fa66c06 <commit_id_of_empty_init_above>
git replace 4c645849b296aaafc1809a9e1537c0fb305167ad <commit_id_of_empty_init_above>
git replace 50eab8bd8c416c47354331211b1efd8688ad8e97 <commit_id_of_empty_init_above>
git replace 649dc7577b87d1b05dff05bf9adc5e46f6612dfa <commit_id_of_empty_init_above>
git replace 6902148fde7b98ff0d6b6c6ebe929590322c95ff <commit_id_of_empty_init_above>
git remote set-url origin http://<username>:<password>@<example.com:port/repo.git> # reference to a remote repo to push
git push origin 'refs/replace/*' # push replace refs to remote repo first
git push -u origin master # push to master, finally

# Clear some garbage just in case
git filter-branch --tag-name-filter cat -- --all # rewrite history
git push --force origin
git fsck # check that everything is ok 
```

# java - 如何使用同一项目中另一个类的另一个 JPanel 更新 JPanel？

> ID：11375075
> 
> 赞同：1
> 
> 时间：2012-07-07T12:39:21.017
> 
> 标签：java, swing, netbeans, jfreechart, netbeans-7

我已经（使用 Netbeans）创建了一个 JFrame，并在其中放入了两个 JPanel（mainPanel 和 secondPanel）。当我使用 JFrame 的菜单栏打开文件时，该项目的另一类返回 JPanel。如何更新 mainPanel ，以便它显示从项目的其他类返回的 JPanel？谢谢你。

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package nysemarketpick;

import java.io.File;
import javax.swing.JFileChooser;
import javax.swing.JFrame;

/**
 *
 * @author skiabox
 */
public class MainForm extends JFrame {

/**
 * Creates new form MainForm
 */
public MainForm() {
    initComponents();
}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

    fileChooser = new javax.swing.JFileChooser();
    toolbar = new javax.swing.JToolBar();
    shortButton = new javax.swing.JButton();
    jSeparator1 = new javax.swing.JToolBar.Separator();
    midButton = new javax.swing.JButton();
    jSeparator2 = new javax.swing.JToolBar.Separator();
    longButton = new javax.swing.JButton();
    mainPanel = new javax.swing.JPanel();
    secondPanel = new javax.swing.JPanel();
    jLabel1 = new javax.swing.JLabel();
    jMenuBar1 = new javax.swing.JMenuBar();
    fileMenu = new javax.swing.JMenu();
    Open = new javax.swing.JMenuItem();
    Exit = new javax.swing.JMenuItem();
    optionsMenu = new javax.swing.JMenu();
    shortItem = new javax.swing.JMenuItem();
    midItem = new javax.swing.JMenuItem();
    longItem = new javax.swing.JMenuItem();
    toolsMenu = new javax.swing.JMenu();
    helpMenu = new javax.swing.JMenu();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
    setTitle("Nyse Stock Pick");

    toolbar.setFloatable(false);
    toolbar.setRollover(true);

    shortButton.setIcon(new javax.swing.ImageIcon(getClass().getResource("/nysemarketpick/S-orange-icon.png"))); // NOI18N
    shortButton.setText("Short-Term");
    shortButton.setFocusable(false);
    shortButton.setHorizontalTextPosition(javax.swing.SwingConstants.RIGHT);
    shortButton.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
    toolbar.add(shortButton);
    toolbar.add(jSeparator1);

    midButton.setIcon(new javax.swing.ImageIcon(getClass().getResource("/nysemarketpick/M-lg-icon.png"))); // NOI18N
    midButton.setText("Mid-Term");
    midButton.setFocusable(false);
    midButton.setHorizontalTextPosition(javax.swing.SwingConstants.RIGHT);
    midButton.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
    toolbar.add(midButton);
    toolbar.add(jSeparator2);

    longButton.setIcon(new javax.swing.ImageIcon(getClass().getResource("/nysemarketpick/L-blue-icon.png"))); // NOI18N
    longButton.setText("Long-Term");
    longButton.setFocusable(false);
    longButton.setHorizontalTextPosition(javax.swing.SwingConstants.RIGHT);
    longButton.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
    toolbar.add(longButton);

    org.jdesktop.layout.GroupLayout mainPanelLayout = new org.jdesktop.layout.GroupLayout(mainPanel);
    mainPanel.setLayout(mainPanelLayout);
    mainPanelLayout.setHorizontalGroup(
        mainPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
        .add(0, 0, Short.MAX_VALUE)
    );
    mainPanelLayout.setVerticalGroup(
        mainPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
        .add(0, 537, Short.MAX_VALUE)
    );

    org.jdesktop.layout.GroupLayout secondPanelLayout = new org.jdesktop.layout.GroupLayout(secondPanel);
    secondPanel.setLayout(secondPanelLayout);
    secondPanelLayout.setHorizontalGroup(
        secondPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
        .add(0, 240, Short.MAX_VALUE)
    );
    secondPanelLayout.setVerticalGroup(
        secondPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
        .add(0, 543, Short.MAX_VALUE)
    );

    jLabel1.setText("World Market Status");
    jLabel1.setHorizontalTextPosition(javax.swing.SwingConstants.RIGHT);

    fileMenu.setText("File");

    Open.setText("Open");
    Open.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            OpenActionPerformed(evt);
        }
    });
    fileMenu.add(Open);

    Exit.setText(" Exit");
    Exit.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            ExitActionPerformed(evt);
        }
    });
    fileMenu.add(Exit);

    jMenuBar1.add(fileMenu);

    optionsMenu.setText("Options");

    shortItem.setText("Short-Term Moving Average");
    optionsMenu.add(shortItem);

    midItem.setText("Mid-Term Moving Average");
    optionsMenu.add(midItem);

    longItem.setText("Long-Term Moving Average");
    optionsMenu.add(longItem);

    jMenuBar1.add(optionsMenu);

    toolsMenu.setText("Tools");
    jMenuBar1.add(toolsMenu);

    helpMenu.setText("Help");
    jMenuBar1.add(helpMenu);

    setJMenuBar(jMenuBar1);

    org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
        .add(layout.createSequentialGroup()
            .addContainerGap()
            .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                .add(layout.createSequentialGroup()
                    .add(toolbar, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                    .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 762, Short.MAX_VALUE)
                    .add(jLabel1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 182, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                    .add(354, 354, 354))
                .add(layout.createSequentialGroup()
                    .add(6, 6, 6)
                    .add(mainPanel, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .add(18, 18, 18)
                    .add(secondPanel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                    .add(351, 351, 351))))
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
        .add(layout.createSequentialGroup()
            .addContainerGap()
            .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
                .add(toolbar, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 25, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .add(jLabel1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
            .add(12, 12, 12)
            .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                .add(mainPanel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .add(secondPanel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
            .addContainerGap(33, Short.MAX_VALUE))
    );

    pack();
}// </editor-fold>

private void ExitActionPerformed(java.awt.event.ActionEvent evt) {                                     
    // TODO add your handling code here:
    System.exit(0);
}                                    

private void OpenActionPerformed(java.awt.event.ActionEvent evt) {                                     
    // TODO add your handling code here:
    int returnVal = fileChooser.showOpenDialog(this);
    if (returnVal == JFileChooser.APPROVE_OPTION)
    {
        File file = fileChooser.getSelectedFile();

        //What to do with the file
        //remove current chart
        mainPanel.removeAll();
        //add new chart
        PriceVolumeChart chart = new PriceVolumeChart(file.getAbsolutePath());

        mainPanel.add(chart.getChart());
        mainPanel.validate();
    }
}                                    

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /*
     * Set the Nimbus look and feel
     */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /*
     * If Nimbus (introduced in Java SE 6) is not available, stay with the
     * default look and feel. For details see
     * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(MainForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(MainForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(MainForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(MainForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /*
     * Create and display the form
     */
    java.awt.EventQueue.invokeLater(new Runnable() {

        public void run() {
            new MainForm().setVisible(true);
        }
    });
}
// Variables declaration - do not modify
private javax.swing.JMenuItem Exit;
private javax.swing.JMenuItem Open;
private javax.swing.JFileChooser fileChooser;
private javax.swing.JMenu fileMenu;
private javax.swing.JMenu helpMenu;
private javax.swing.JLabel jLabel1;
private javax.swing.JMenuBar jMenuBar1;
private javax.swing.JToolBar.Separator jSeparator1;
private javax.swing.JToolBar.Separator jSeparator2;
private javax.swing.JButton longButton;
private javax.swing.JMenuItem longItem;
private javax.swing.JPanel mainPanel;
private javax.swing.JButton midButton;
private javax.swing.JMenuItem midItem;
private javax.swing.JMenu optionsMenu;
private javax.swing.JPanel secondPanel;
private javax.swing.JButton shortButton;
private javax.swing.JMenuItem shortItem;
private javax.swing.JToolBar toolbar;
private javax.swing.JMenu toolsMenu;
// End of variables declaration
}

public class PriceVolumeChart
{
static FileReader fileReader;
static File file;
static TimeSeries t1 = new TimeSeries("49-day moving average");
static String filename;

JPanel myPanel;

/**
 * Default constructor
 */
public PriceVolumeChart(String absoluteFilePath)
{
    //super(title);
    filename = absoluteFilePath;
    //JPanel panel = createDemoPanel();
    //panel.setPreferredSize(new Dimension(500, 270));
    //setContentPane(panel);
    myPanel = createDemoPanel();
    myPanel.setPreferredSize(new Dimension(500, 270));
}

//create price dataset
//hard-coded here
private static OHLCDataset createPriceDataset(String filename)
{
    //the following data is taken from http://finance.yahoo.com/
    //for demo purposes...

    OHLCSeries s1 = new OHLCSeries(filename);

    try {
        BufferedReader in = new BufferedReader(new FileReader(filename));
        DateFormat df = new SimpleDateFormat("yyyyMMdd");
        String inputLine;
        in.readLine();
        while ((inputLine = in.readLine()) != null) {
            StringTokenizer st = new StringTokenizer(inputLine, ",");
            Date date       = df.parse( st.nextToken() );
            double open     = Double.parseDouble( st.nextToken() );
            double high     = Double.parseDouble( st.nextToken() );
            double low      = Double.parseDouble( st.nextToken() );
            double close    = Double.parseDouble( st.nextToken() );
            double volume   = Double.parseDouble( st.nextToken() );
            //double adjClose = Double.parseDouble( st.nextToken() );
            s1.add(new Day(date), open, high, low, close);
            t1.add(new Day(date), close);
        }
        in.close();
    }
    catch (Exception e) {
        e.printStackTrace();
    }

    OHLCSeriesCollection dataset = new OHLCSeriesCollection();
    dataset.addSeries(s1);

    return dataset;
}

//create volume dataset
private static IntervalXYDataset createVolumeDataset(String filename)
{
    //create dataset 2...
    TimeSeries s1 = new TimeSeries("Volume");

    try {
        BufferedReader in = new BufferedReader(new FileReader(filename));
        DateFormat df = new SimpleDateFormat("yyyyMMdd");
        String inputLine;
        in.readLine();
        while ((inputLine = in.readLine()) != null) {
            StringTokenizer st = new StringTokenizer(inputLine, ",");
            Date date = df.parse( st.nextToken() );
            st.nextToken();
            st.nextToken();
            st.nextToken();
            st.nextToken();
            double volume   = Double.parseDouble( st.nextToken() );
            //double adjClose = Double.parseDouble( st.nextToken() );
            s1.add(new Day(date), volume);
        }
        in.close();
    }
    catch (Exception e) {
        e.printStackTrace();
    }

    return new TimeSeriesCollection(s1);
}

private static JFreeChart createCombinedChart()
{
    OHLCDataset data1 = createPriceDataset(filename);

    XYItemRenderer renderer1 = new HighLowRenderer();
    renderer1.setBaseToolTipGenerator(new StandardXYToolTipGenerator(StandardXYToolTipGenerator.DEFAULT_TOOL_TIP_FORMAT, new SimpleDateFormat("d-MMM-yyyy"), new DecimalFormat("0.00")));
    renderer1.setSeriesPaint(0, Color.blue);
    DateAxis domainAxis = new DateAxis("Date");
    NumberAxis rangeAxis = new NumberAxis("Price");
    rangeAxis.setNumberFormatOverride(new DecimalFormat("$0.00"));
    rangeAxis.setAutoRange(true);
    rangeAxis.setAutoRangeIncludesZero(false);
    XYPlot plot1 = new XYPlot(data1, domainAxis, rangeAxis, renderer1);
    plot1.setBackgroundPaint(Color.lightGray);
    plot1.setDomainGridlinePaint(Color.white);
    plot1.setRangeGridlinePaint(Color.white);
    plot1.setRangePannable(true);

    //Overlay the Long-Term Trend Indicator
    TimeSeries dataset3 = MovingAverage.createMovingAverage(t1, "LT", 49, 49);
    TimeSeriesCollection collection = new TimeSeriesCollection();
    collection.addSeries(dataset3);
    plot1.setDataset(1, collection);
    plot1.setRenderer(1, new StandardXYItemRenderer());

    //add a second dataset (volume) and renderer
    IntervalXYDataset data2 = createVolumeDataset(filename);
    XYBarRenderer renderer2 = new XYBarRenderer();
    renderer2.setDrawBarOutline(false);
    renderer2.setBaseToolTipGenerator(new StandardXYToolTipGenerator(StandardXYToolTipGenerator.DEFAULT_TOOL_TIP_FORMAT, new SimpleDateFormat("d-MMM-yyyy"), new DecimalFormat("0,000.00")));
    renderer2.setSeriesPaint(0, Color.red);

    XYPlot plot2 = new XYPlot(data2, null, new NumberAxis("Volume"), renderer2);
    plot2.setBackgroundPaint(Color.lightGray);
    plot2.setDomainGridlinePaint(Color.white);
    plot2.setRangeGridlinePaint(Color.white);

    //middle pane oscillators
    TimeSeries threeMA = MovingAverage.createMovingAverage(t1, "SL1", 3, 3);
    TimeSeries tenMA = MovingAverage.createMovingAverage(t1, "SL2", 10, 10);

    List<TimeSeriesDataItem> threeItemsList = new ArrayList<TimeSeriesDataItem>();
    List<TimeSeriesDataItem> tenItemsList = new ArrayList<TimeSeriesDataItem>();
    threeItemsList = threeMA.getItems();
    tenItemsList = tenMA.getItems();

    for (TimeSeriesDataItem item: threeItemsList)
    {
        System.out.println("three" + item.getValue().doubleValue() + " " + item.getPeriod().toString());
    }

    for (TimeSeriesDataItem item: tenItemsList)
    {
        System.out.println("ten" + item.getValue().doubleValue() + " " + item.getPeriod().toString());
    }

    TimeSeries slDataset = new TimeSeries("SL");
    int i = 0;
    //List<TimeSeriesDataItem> slItemsList = new ArrayList<TimeSeriesDataItem>();
    TimeSeriesDataItem myItem;
    Day threeDate;

    for (TimeSeriesDataItem item: threeItemsList)
    {
        //RegularTimePeriod variable = item.getPeriod();
        if (item.getPeriod().compareTo(tenItemsList.get(0).getPeriod()) < 0)
        {
            continue;
        }
        else
        {
            double result = item.getValue().doubleValue() - tenItemsList.get(i).getValue().doubleValue();
            Day currentDay = (Day)item.getPeriod();
            myItem = new TimeSeriesDataItem(currentDay, result);
            slDataset.add(myItem);

            //slItemsList.add(myItem);
            i++;
        }

    }

    System.out.println("slDataset count : " + slDataset.getItemCount());

    TimeSeriesCollection collectionSL = new TimeSeriesCollection();
    collectionSL.addSeries(slDataset);

    //create middle line (ML)
    XYLineAndShapeRenderer rendererFinal = new XYLineAndShapeRenderer(true, false);
    rendererFinal.setBaseShapesVisible(false);
    TimeSeries ml = MovingAverage.createMovingAverage(slDataset, "ML", 16, 16);
    TimeSeriesCollection collectionML = new TimeSeriesCollection();
    collectionML.addSeries(ml);

    DateAxis domainMiddleAxis = new DateAxis();
    NumberAxis rangeMiddleAxis = new NumberAxis("Value");
    StandardXYItemRenderer rendererMiddle = new StandardXYItemRenderer();
    rendererMiddle.setBaseShapesVisible(false);
    //rendererMiddle.setBaseToolTipGenerator(new StandardXYToolTipGenerator(StandardXYToolTipGenerator.DEFAULT_TOOL_TIP_FORMAT, new SimpleDateFormat("d-MMM-yyyy"), new DecimalFormat("0.00")));
    XYPlot plot3 = new XYPlot(collectionSL, domainMiddleAxis, rangeMiddleAxis, rendererFinal);
    plot3.setBackgroundPaint(Color.lightGray);
    plot3.setDomainGridlinePaint(Color.white);
    plot3.setRangeGridlinePaint(Color.white);
    plot3.setRangePannable(true);
    plot3.setDomainPannable(true);

    //plot3.setDataset(collectionSL);
    //plot3.setRenderer(new StandardXYItemRenderer());
    //StandardXYItemRenderer rendererML = new StandardXYItemRenderer();
    plot3.setDataset(1, collectionML);
    plot3.setRenderer(1, rendererMiddle);
    //XYLineAndShapeRenderer r = new XYLineAndShapeRenderer();
    //r.setBaseShapesVisible(false);
    //plot3.setRenderer(1, r);

    CombinedDomainXYPlot cplot = new CombinedDomainXYPlot(domainAxis);
    cplot.add(plot1, 3);
    cplot.add(plot3, 2);
    cplot.add(plot2, 2);
    cplot.setGap(8.0);
    cplot.setDomainGridlinePaint(Color.white);
    cplot.setDomainGridlinesVisible(true);
    cplot.setDomainPannable(true);

    //return the new combined chart
    JFreeChart chart = new JFreeChart("Sun Microsystems (SUNW)", JFreeChart.DEFAULT_TITLE_FONT, cplot, true);

    ChartUtilities.applyCurrentTheme(chart);
    renderer2.setShadowVisible(false);
    renderer2.setBarPainter(new StandardXYBarPainter());

    return chart;
}

//create a panel
public static JPanel createDemoPanel()
{
    JFreeChart chart = createCombinedChart();
    ChartPanel panel = new ChartPanel(chart);
    panel.setMouseWheelEnabled(true);

    return panel;
}

//return chart
public JPanel getChart()
{
    return myPanel;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T15:33:19.050

看来您想使用 mainPanel 作为包含图表的面板。不要将面板分配给 mainPanel，而是尝试在其中添加和删除面板。让它成为容器，不要尝试通过将另一个 Jpanel 分配给变量来更改它。

在方法“private void OpenActionPerformed(java.awt.event.ActionEvent evt)”中尝试更改以下内容：

```
//What to do with the file
PriceVolumeChart chart = new PriceVolumeChart(file.getAbsolutePath());
mainPanel = chart.getChart(); 
```

至：

```
//remove current chart
mainPanel.removeAll(); //assuming you have nothing else in main panel other than a chart panel;
//add new chart
PriceVolumeChart chart = new PriceVolumeChart(file.getAbsolutePath());
mainPanel.add(chart);
mainPanel.validate(); 
```

注意 注意：我不是我自己来的。这个想法来自这里：[Change a JPanel dynamic based on JRadioButton](https://stackoverflow.com/questions/9233394/change-a-jpanel-dynamically-based-on-jradiobutton)

我将其修改为我认为适合您的代码的位置。我只是使用与原始问题相同的代码，因此也许您还应该尝试答案中建议的内容，因为它看起来是正确的方法。

编辑：

正如您评论的那样，在您对代码进行更改后，还添加以下内容：

在函数中

```
public MainForm() {
    initComponents();
} 
```

组件初始化后替换主面板的布局管理器。例如：

```
public MainForm() {
    initComponents();
    mainPanel.setLayout(new FlowLayout());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-13T18:32:58.503

我使用了以下代码，它对我有用：

```
JPanel tempPanel = new YourPanelClass();
tempPanel.setBounds(DisplayPanel.getBounds()); // DisplayPanel is a panel object with which you want to replace new Panel.
mainPanel.removeAll(); //mainPanel is container for panels
mainPanel.revalidate();
mainPanel.repaint();
mainPanel.add(tempPanel); 
```

# c# - 如何在 C# 中创建 API？

> ID：11375076
> 
> 赞同：20
> 
> 时间：2012-07-07T12:39:23.980
> 
> 标签：c#, .net, api

我一直在做编程，但现在我面临一个挑战。我在一个项目中，我必须在 C# 中为我的用户创建一个 API。基本过程是我有一个 C# 代码，我在其中读取 XML 文件并获取标签之间的属性和值。我实现了这一点，现在我必须为相同的功能创建可消耗的 API。有什么方法可以让我学习创建 API？

基本上我不知道如何继续使用 API。任何类型的例子都会对我有用。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-07T13:03:04.557

API 只是其他程序员与您的代码交互的一种方式。AC# 类库可以是 API，Web 服务、WCF 端点等也可以。最简单的方法是创建一个 C# 类库项目，确保它具有公共方法，并将其编译为 .dll您可以分发。

正如其他人所提到的，框架设计指南对于遵循一些规则很有用。

要记住的一件事——我希望这会被所有新的软件开发人员所重视——是 API 设计从根本上说是一个可用性问题。您正在为软件的用户构建 UI，而您的用户是其他程序员。

这意味着您要遵循 UI/UX 设计的所有一般原则——可发现性、简化常见任务等。

利用 XML 注释确保文档始终存在。确保最常见的任务很容易执行，并且很明显如何执行。清除异常并包含有用的、可操作的错误消息。想想什么会让消费者的生活更轻松。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-07T12:42:52.123

用 C# 制作 API 没什么大不了的，但制作一个好的 API 是一个很大的挑战。

如果要将程序集作为 API 分发，则只需在 Visual Studio 中添加一个[类库项目。](http://msdn.microsoft.com/en-us/library/f3cye135%28v=vs.80%29.aspx)

或者，如果您想将 API 公开为服务，则可以考虑[WCF](http://msdn.microsoft.com/en-us/netframework/aa663324.aspx)和[Web Api](http://www.asp.net/web-api)。

> 要制作一个好的和高效的 API，你必须学习[框架设计指南](http://blogs.msdn.com/b/brada/archive/2009/10/11/video-posted-for-belgium-visual-studio-user-s-group-10-years-of-framework-design-guidelines.aspx)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-07T12:45:58.810

你的问题有点笼统..

不过我试着回答你。看看你是否想创建可以通过 HTTP 调用的 API，那么你可以使用 WCF 来做到这一点。

您可以在 wcftutorial.net 上阅读有关 WCF 的信息

您也可以使用 DLL 创建 API，我建议您阅读 [http://www.c-sharpcorner.com/UploadFile/mahesh/dll12222005064058AM/dll.aspx](http://www.c-sharpcorner.com/UploadFile/mahesh/dll12222005064058AM/dll.aspx)

快速了解如何使用 Visual C# 创建 DLL。

谢谢，

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-07T12:54:26.160

如果您想创建一个易于使用的 API，这可能是一个挑战。

首先：考虑接口。编写可供需要您提供的功能的人使用的接口。

并且：保持简单！

充其量，您在开发 API 时编写两个项目。

1.  您的用户将使用的 API
2.  已经使用您的 API 的示例项目/测试项目。

这样，您最终将获得一个完整的 API 和一些示例，这些示例展示了您认为应该如何使用您的 API，比任何文档都更有价值，因为一个简单的示例比描述更能说明问题。（当然，你还是要描述你的 API**能做**什么）

在您的 API 中提供可以按原样使用的类，即您的 API 的用户不得提供您可以在 API 中执行的操作。

玩得开心！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-07T13:04:49.717

如果你想对重要的事情有一些基本的了解，我可以推荐[这本框架设计指南书](https://rads.stackoverflow.com/amzn/click/com/0321545613)。即使您不打算设计自己的框架，阅读它也很有趣，并且它确实提供了一些关于为什么应该做出某些决定而不应该做出其他决定的一些很好的见解。

# actionscript-3 - 需要有效的下载链接 - Actionscript Remoting Components

> ID：11375087
> 
> 赞同：0
> 
> 时间：2012-07-07T12:40:29.353
> 
> 标签：actionscript-3, flash

我试图在互联网上找到“ **Actionscript Remoting Components** ”下载但没有用。adobe.com 似乎有一个断开的链接。如果您可以在互联网上找到任何其他来源，请分享网络链接。

*我正在尝试通过 PHP 脚本为我的基于 Flash 的应用程序将 Flash 连接到 MySQL。*

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T14:58:15.867

我使用**AMFPHP**作为带有 actionScript 的远程组件来连接 PHP 和 MySQL。您可以在[http://www.silexlabs.org/amfphp/documentation/](http://www.silexlabs.org/amfphp/documentation/)链接中查看详细文档

祝你好运！

# image - how to draw pixels to pf1bit in Delphi?

> ID：11375089
> 
> 赞同：3
> 
> 时间：2012-07-07T12:40:39.520
> 
> 标签：image, delphi

How to draw pixels to a TImage but in pf1bit bitmap format? I have tried but the result is **the whole of the image are black**.

here is the code I've tried :

```
image1.picture.bitmap.loadfromfile('example.bmp'); // an image which is RGB pf24bit with 320 x 240 px resolution
image1.picture.bitmap.pixelformat := pf1bit;
for i:=0 to round(image1.picture.bitmap.canvas.height/2) - 1 do
  begin
    for j:=0 to round(image1.picture.bitmap.canvas.width/2) - 1 do
      begin
        image1.picture.bitmap.Canvas.pixels[i,j]:=1; // is this correct? ... := 1? I've tried to set it to 255 (mean white), but still get black 
      end;
  end; 
```

note that the image size is 320x240 pixel.

Thanks before.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T13:54:11.990

You need to pack 8 pixels into a single byte for 1 bit color format. The inner loop would look like this:

```
var
  bm: TBitmap;
  i, j: Integer;
  dest: ^Byte;
  b: Byte;
  bitsSet: Integer;
begin
  bm := TBitmap.Create;
  Try
    bm.PixelFormat := pf1bit;
    bm.SetSize(63, 30);
    for i := 0 to bm.Height-1 do begin
      b := 0;
      bitsSet := 0;
      dest := bm.Scanline[i];
      for j := 0 to bm.Width-1 do begin
        b := b shl 1;
        if odd(i+j) then
          b := b or 1;
        inc(bitsSet);
        if bitsSet=8 then begin
          dest^ := b;
          inc(dest);
          b := 0;
          bitsSet := 0;
        end;
      end;
      if b<>0 then
        dest^ := b shl (8-bitsSet);
    end;
    bm.SaveToFile('c:\desktop\out.bmp');
  Finally
    bm.Free;
  End;
end; 
```

The output looks like this:

![enter image description here](../Images/409c82b74d8c75046ac70d34db86923f.png)

**Update**

Rob's comment prompted me to look at using `Pixels[]` rather than the bit-twiddling above. And indeed it is perfectly possible.

```
var
  bm: TBitmap;
  i, j: Integer;
  Color: TColor;
begin
  bm := TBitmap.Create;
  Try
    bm.PixelFormat := pf1bit;
    bm.SetSize(63, 30);
    for i := 0 to bm.Height-1 do begin
      for j := 0 to bm.Width-1 do begin
        if odd(i+j) then begin
          Color := clBlack;
        end else begin
          Color := clWhite;
        end;
        bm.Canvas.Pixels[j,i] := Color;
      end;
    end;
    bm.SaveToFile('c:\desktop\out.bmp');
  Finally
    bm.Free;
  End;
end; 
```

Since each call to assign `Pixels[]` results in a call to the Windows API function `SetPixel`, the bit-twiddling code would perform better. Of course, that would only ever matter if your bitmap creation code was a performance hot-spot.

# java - 如何找出Java中标识符的声明类型？

> ID：11375096
> 
> 赞同：7
> 
> 时间：2012-07-07T12:42:37.520
> 
> 标签：java, class, reflection, runtime, polymorphism

我有一个简单的 Apple 类从另一个简单的 Fruit 类扩展而来。

在运行时，我可以使用

```
Fruit fruit = new Apple();

fruit.getClass(); 
```

获取水果对象的实际类型，即 Apple.class。

我还可以使用`fruit instanceof Apple`, 和`fruit instanceof Fruit`来验证这个水果对象是 Apple 还是 Fruit 的实例。这两个表达式都返回 true，这是正常的。

但是有没有办法精确地确定声明的`fruit`标识符类型？在这种情况下是`Fruit`.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-07T12:54:21.070

您实际上是在问一个关于变量声明的问题，`fruit`而不是对象的实际运行时类型（`Apple`在这种情况下是一个）。

我认为这通常是一个坏主意：您刚刚声明了变量并告诉编译器它是 a `Fruit`，那么为什么您现在需要找出它呢？

更令人困惑的是，值得注意的是，您还可以有多个具有不同声明类型的变量引用同一个对象（仍然是 Apple）：

```
Fruit fruit = new Apple(); // fruit declared as Fruit, but refers to an Apple
Object thing = fruit;      // thing declared as Object, refers to the same Apple 
```

如果你真的想找出声明的类型，那么你有几个选择：

*   创建`fruit`一个实例变量，并使用反射查询声明的类型。
*   对源代码做一些处理以找到变量声明
*   对编译后的字节码进行一些处理以找到声明类型（尽管有可能激进的编译器甚至可能完全优化编译时声明，例如在意识到水果在这段代码中只能是苹果之后）

我认为所有这些都很丑陋，所以我的一般建议是“不要这样做”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T12:55:08.573

该`Fruit`对象没有声明的类型。它是具有其类型的**变量。** `fruit`由于您唯一可以传递的是对该`Fruit`对象的引用，因此我认为您的请求没有多大意义。如果你有一个特定的实例变量来存储你的对象，你能得到的最好的结果是。然后，您可以反映该字段并使用`Field.getType()`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-07T13:00:59.737

不，没有：至少不使用反射。反射可以在运行时为您提供有关*对象*的信息，以及字段、方法和类，但不能提供局部变量。如果水果是一个字段，您可以执行以下操作：

```
FruitBasket.class.getDeclaredField("fruit").getType(); 
```

# hadoop - Hbase快速统计行数

> ID：11375098
> 
> 赞同：55
> 
> 时间：2012-07-07T12:42:48.740
> 
> 标签：hadoop, hbase, bigdata

现在我`ResultScanner`像这样实现行计数

```
for (Result rs = scanner.next(); rs != null; rs = scanner.next()) {
    number++;
} 
```

如果数据达到数百万次计算量很大。我想实时计算我不想使用 Mapreduce

如何快速计算行数。

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-02-14T10:11:31.000

**在 HBase 中使用 RowCounter** RowCounter 是一个 mapreduce 作业，用于计算表的所有行。这是一个很好的实用程序，可用作完整性检查，以确保 HBase 在存在元数据不一致问题时可以读取表的所有块。它将在单个进程中运行所有 mapreduce，但如果您有一个 MapReduce 集群可供它利用，它将运行得更快。

```
$ hbase org.apache.hadoop.hbase.mapreduce.RowCounter <tablename>

Usage: RowCounter [options] 
    <tablename> [          
        --starttime=[start] 
        --endtime=[end] 
        [--range=[startKey],[endKey]] 
        [<column1> <column2>...]
    ] 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2014-08-06T19:16:13.237

您可以使用 hbase 中的 count 方法来统计行数。但是，是的，计算大表的行数可能很慢。count 'tablename' [interval]

返回值是行数。

此操作可能需要很长时间（运行 '$HADOOP_HOME/bin/hadoop jar hbase.jar rowcount' 以运行计数 mapreduce 作业）。当前计数默认每 1000 行显示一次。可以选择指定计数间隔。默认情况下，对计数扫描启用扫描缓存。默认缓存大小为 10 行。如果您的行较小，您可能需要增加此参数。

例子：

```
hbase> count 't1'

hbase> count 't1', INTERVAL => 100000

hbase> count 't1', CACHE => 1000

hbase> count 't1', INTERVAL => 10, CACHE => 1000 
```

相同的命令也可以在表引用上运行。假设您引用了表 't1'，相应的命令将是：

```
hbase> t.count

hbase> t.count INTERVAL => 100000

hbase> t.count CACHE => 1000

hbase> t.count INTERVAL => 10, CACHE => 1000 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-02-19T23:48:29.580

如果您因任何原因无法使用`RowCounter`，那么这两个过滤器的组合应该是获得计数的最佳方式：

```
FirstKeyOnlyFilter() AND KeyOnlyFilter() 
```

这`FirstKeyOnlyFilter`将导致扫描器仅返回它找到的第一个列限定符，而不是扫描器返回表中的所有列限定符，这将最小化网络带宽。简单地选择一个列限定符返回怎么样？如果您可以保证每一行都存在列限定符，这将起作用，但如果这不是真的，那么您将得到不准确的计数。

这`KeyOnlyFilter`将导致扫描器仅返回列族，并且不会为列限定符返回任何值。这进一步降低了网络带宽，在一般情况下不会造成太大的减少，但可能存在一种边缘情况，即前一个过滤器选择的第一列恰好是一个非常大的值。

我试着玩弄，`scan.setCaching`但结果到处都是。也许它会有所帮助。

我在开始和停止之间有 1600 万行，我做了以下伪经验测试：

```
激活 FirstKeyOnlyFilter 和 KeyOnlyFilter ：

    未设置缓存（即默认值）时，需要 188 秒。
    缓存设置为 1，耗时 188 秒
    缓存设置为 10，需要 200 秒
    缓存设置为 100，耗时 187 秒
    缓存设置为 1000，耗时 183 秒。
    缓存设置为 10000，耗时 199 秒。
    缓存设置为 100000，耗时 199 秒。

禁用 FirstKeyOnlyFilter 和 KeyOnlyFilter：

    未设置缓存（即默认值），耗时 309 秒

```

我没有费心对此进行适当的测试，但似乎很明显`FirstKeyOnlyFilter`and`KeyOnlyFilter`是好的。

此外，这个特定表格中的单元格非常小 - 所以我认为过滤器在不同的表格上会更好。

* * *

这是一个 Java 代码示例：

```
导入 java.io.IOException；

导入 org.apache.hadoop.conf.Configuration；
导入 org.apache.hadoop.hbase.HBaseConfiguration；
导入 org.apache.hadoop.hbase.client.HTable；
导入 org.apache.hadoop.hbase.client.Result；
导入 org.apache.hadoop.hbase.client.ResultScanner；
导入 org.apache.hadoop.hbase.client.Scan；
导入 org.apache.hadoop.hbase.util.Bytes；

导入 org.apache.hadoop.hbase.filter.RowFilter；
导入 org.apache.hadoop.hbase.filter.KeyOnlyFilter；
导入 org.apache.hadoop.hbase.filter.FirstKeyOnlyFilter；
导入 org.apache.hadoop.hbase.filter.FilterList；

导入 org.apache.hadoop.hbase.filter.CompareFilter.CompareOp；
导入 org.apache.hadoop.hbase.filter.RegexStringComparator；

公共类 HBaseCount {
    公共静态 void main(String[] args) 抛出 IOException {
        配置配置 = HBaseConfiguration.create();

        HTable 表 = 新 HTable(config, "my_table");

        扫描扫描=新扫描（
            Bytes.toBytes("foo"), Bytes.toBytes("foo~")
        );

        如果（args.length == 1）{
            scan.setCaching(Integer.valueOf(args[0]));
        }
        System.out.println("scan的缓存是" + scan.getCaching());

        FilterList allFilters = new FilterList();
        allFilters.addFilter(new FirstKeyOnlyFilter());
        allFilters.addFilter(new KeyOnlyFilter());

        scan.setFilter(allFilters);

        ResultScanner 扫描仪 = table.getScanner(scan);

        整数计数 = 0；

        长开始 = System.currentTimeMillis();

        尝试 {
            for (结果 rr =scanner.next(); rr != null; rr =scanner.next()) {
                计数 += 1;
                if (count % 100000 == 0) System.out.println(count);
            }
        } 最后 {
            扫描仪.close();
        }

        长端 = System.currentTimeMillis();

        long elapsedTime = 结束 - 开始；

        System.out.println("经过的时间是 " + (elapsedTime/1000F));

    }
}

```

* * *

这是一个[pychbase](https://github.com/mkmoisen/pychbase)代码示例：

```
    从 pychbase 导入连接
    c = 连接（）
    t = c.table('my_table')
    # 在后台这应用了 FirstKeyOnlyFilter 和 KeyOnlyFilter
    # 类似于下面的happybase示例
    打印 t.count(row_prefix="foo")

```

* * *

这是一个 Happybase 代码示例：

```
    从happybase导入连接
    c = 连接（...）
    t = c.table('my_table')
    计数 = 0
    对于 _ in t.scan(filter='FirstKeyOnlyFilter() AND KeyOnlyFilter()'):
        计数 += 1

    打印计数

```

* * *

感谢[@Tuckr 和@KennyCason](https://stackoverflow.com/a/11531273/1391717)的提示。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-07-07T13:19:22.923

使用[HBase 附带的 HBase 行数映射/减少](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/mapreduce/RowCounter.html)作业

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-07-16T10:53:20.307

在 HBASE 中计算行数的简单、有效和高效的方法：

1.  每当您插入一行时，都会触发此 API，它将增加该特定单元格。

    ```
    Htable.incrementColumnValue(Bytes.toBytes("count"), Bytes.toBytes("details"), Bytes.toBytes("count"), 1); 
    ```

2.  检查该表中存在的行数。只需对该特定行“计数”使用“获取”或“扫描”API。

通过使用此方法，您可以在不到一毫秒的时间内获得行数。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-08-29T22:49:02.180

要计算正确 YARN 集群上的 Hbase 表记录数，您还必须设置 map reduce 作业队列名称：

```
hbase org.apache.hadoop.hbase.mapreduce.RowCounter -Dmapreduce.job.queuename= < Your Q Name which you have SUBMIT access>
 < TABLE_NAME> 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-07-07T20:20:44.297

您可以使用自 HBase 0.92 以来可用的协处理器。请参阅[协处理器](http://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/coprocessor/package-summary.html)和[AggregateProtocol](https://hbase.apache.org/0.94/apidocs/org/apache/hadoop/hbase/coprocessor/AggregateProtocol.html)和[示例](http://www.thecloudavenue.com/2012/02/getting-started-with-hbase_20.html)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-01-02T10:44:28.940

**两种方法为我工作以速度从 hbase 表中获取行数**

**情景#1**

如果 hbase 表大小很小，则使用有效用户登录到 hbase shell 并执行

```
>count '<tablename>' 
```

例子

```
>count 'employee'

6 row(s) in 0.1110 seconds 
```

**情景#2**

如果 hbase 表大小很大，则执行内置的 RowCounter map reduce 作业：使用有效用户登录到 hadoop 机器并执行：

```
/$HBASE_HOME/bin/hbase org.apache.hadoop.hbase.mapreduce.RowCounter '<tablename>' 
```

例子：

```
 /$HBASE_HOME/bin/hbase org.apache.hadoop.hbase.mapreduce.RowCounter 'employee'

     ....
     ....
     ....
     Virtual memory (bytes) snapshot=22594633728
                Total committed heap usage (bytes)=5093457920
        org.apache.hadoop.hbase.mapreduce.RowCounter$RowCounterMapper$Counters
                ROWS=6
        File Input Format Counters
                Bytes Read=0
        File Output Format Counters
                Bytes Written=0 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-07-17T21:40:23.977

如果您使用的是扫描仪，请在您的扫描仪中尝试让它返回尽可能少的限定符。实际上，您返回的限定符应该是可用的最小的（以字节为单位）。这将大大加快您的扫描速度。

不幸的是，这只会扩大到目前（数百万？）。更进一步，您可以实时执行此操作，但您首先需要运行 mapreduce 作业来计算所有行数。

将 Mapreduce 输出存储在 HBase 的一个单元中。每次添加一行，计数器加 1。每次删除一行，计数器减一。

当您需要实时访问行数时，您可以在 HBase 中读取该字段。

没有快速的方法来以可扩展的方式计算行数。你只能数这么快。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-07-06T09:22:00.973

转到 Hbase 主目录并运行此命令，

**./bin/hbase org.apache.hadoop.hbase.mapreduce.RowCounter 'namespace:tablename'**

这将启动一个 mapreduce 作业，输出将显示 hbase 表中存在的记录数。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-12-28T04:46:58.127

你可以在这里找到示例：

```
/**
     * Used to get the number of rows of the table
     * @param tableName
     * @param familyNames
     * @return the number of rows
     * @throws IOException
     */
    public long countRows(String tableName, String... familyNames) throws IOException {
        long rowCount = 0;
        Configuration configuration = connection.getConfiguration();
        // Increase RPC timeout, in case of a slow computation
        configuration.setLong("hbase.rpc.timeout", 600000);
        // Default is 1, set to a higher value for faster scanner.next(..)
        configuration.setLong("hbase.client.scanner.caching", 1000);

        AggregationClient aggregationClient = new AggregationClient(configuration);
        try {
            Scan scan = new Scan();
            if (familyNames != null && familyNames.length > 0) {
                for (String familyName : familyNames) {
                    scan.addFamily(Bytes.toBytes(familyName));
                }
            }
            rowCount = aggregationClient.rowCount(TableName.valueOf(tableName), new LongColumnInterpreter(), scan);
        } catch (Throwable e) {
            throw new IOException(e);
        }
        return rowCount;
    } 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2016-02-03T09:09:16.077

> 你可以试试 hbase api 方法！

org.apache.hadoop.hbase.client.coprocessor.AggregationClient

# git - 为什么使用 git rm 而不是 rm'ing 文件、目录等然后使用 git add -u？

> ID：11375105
> 
> 赞同：2
> 
> 时间：2012-07-07T12:43:26.180
> 
> 标签：git, rm

我无法`git rm`删除现在多余的目录及其项目中的文件。这让我想知道为什么在删除跟踪文件而不是git 之外的目录和文件然后暂存和准备删除以前跟踪的文件`git rm`时被接受的做法是什么？后者对我来说似乎更有意义，但我可能不了解.`rm -rf``git add -u``git rm`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T13:19:17.543

当然，做某事总是有多种方法。使用的一些优点`git rm`是：

*   您实际上控制的是索引，而不是真正的文件系统。Git 也删除文件系统中的文件这一事实只是一个实用程序。
*   这意味着您可以从 Git 中删除文件而不删除它们：`git rm --cached`.
*   您可以精确地仅删除您真正想要删除的那些文件，这与`git add -u`将所有更改添加到索引不同。

特别是最后一个对我个人来说非常重要，因为我想完全控制我添加到提交中的更改。所以使用`add -u`很少会让我开心（就像`add .`）。但是，当然，如果您对使用感到满意`add -u`，请随意使用它。

# django - Django 可以在线程模型中运行吗？

> ID：11375115
> 
> 赞同：2
> 
> 时间：2012-07-07T12:45:23.980
> 
> 标签：django

我正在查看代码库，特别是数据库连接部分，并遇到了这个问题。

首先，使用以下语句获取数据库的游标：

```
from django.db import connection, transaction
cursor = connection.cursor() 
```

connection 是一个模块属性，因此在线程模型中，所有线程都将共享该变量。听起来有点奇怪。进一步深入， cursor() 方法属于 django.db.backends.BaseDatabaseWrapper ，如下所示：

```
def cursor(self):
        self.validate_thread_sharing()
        if (self.use_debug_cursor or
            (self.use_debug_cursor is None and settings.DEBUG)):
            cursor = self.make_debug_cursor(self._cursor())
        else:
            cursor = util.CursorWrapper(self._cursor(), self)
    return cursor 
```

关键是调用 _cursor()，它为正在使用的任何数据库执行后端代码。对于 MySQL，它在 django.db.backends.mysql.DatabaseWrapper 上执行 _cursor() 方法，如下所示：

```
def _cursor(self):
    new_connection = False
    if not self._valid_connection():
        new_connection = True
        kwargs = {
            'conv': django_conversions,
            'charset': 'utf8',
            'use_unicode': True,
        }
        settings_dict = self.settings_dict
        if settings_dict['USER']:
            kwargs['user'] = settings_dict['USER']
        if settings_dict['NAME']:
            kwargs['db'] = settings_dict['NAME']
        if settings_dict['PASSWORD']:
            kwargs['passwd'] = settings_dict['PASSWORD']
        if settings_dict['HOST'].startswith('/'):
            kwargs['unix_socket'] = settings_dict['HOST']
        elif settings_dict['HOST']:
            kwargs['host'] = settings_dict['HOST']
        if settings_dict['PORT']:
            kwargs['port'] = int(settings_dict['PORT'])
        # We need the number of potentially affected rows after an
        # "UPDATE", not the number of changed rows.
        kwargs['client_flag'] = CLIENT.FOUND_ROWS
        kwargs.update(settings_dict['OPTIONS'])
        self.connection = Database.connect(**kwargs)
        self.connection.encoders[SafeUnicode] = self.connection.encoders[unicode]
        self.connection.encoders[SafeString] = self.connection.encoders[str]
        connection_created.send(sender=self.__class__, connection=self)
    cursor = self.connection.cursor()
    if new_connection:
        # SQL_AUTO_IS_NULL in MySQL controls whether an AUTO_INCREMENT column
        # on a recently-inserted row will return when the field is tested for
        # NULL.  Disabling this value brings this aspect of MySQL in line with
        # SQL standards.
        cursor.execute('SET SQL_AUTO_IS_NULL = 0')
    return CursorWrapper(cursor) 
```

所以不一定要创建一个新的游标。如果已调用 _cursor()，则将返回先前使用的游标。

在线程模型中，这意味着多个线程可能共享同一个数据库游标，这似乎是一个禁忌。

还有其他迹象表明 Django 中不允许使用线程。此模块级代码来自 django/db/ **init** .py，例如：

```
def close_connection(**kwargs):
    for conn in connections.all():
        conn.close()
signals.request_finished.connect(close_connection) 
```

因此，如果任何请求完成，所有数据库连接都将关闭。如果有并发请求怎么办？

似乎有很多东西正在共享，这表明不允许使用线程。我在任何地方都没有看到同步代码。

谢谢！

# c++ - Visual C++，断点不中断

> ID：11375117
> 
> 赞同：4
> 
> 时间：2012-07-07T12:46:02.667
> 
> 标签：c++, windows, debugging, breakpoints, pdb

我在 Visual C++ 2010（Win32 应用程序，非托管代码）中有一个项目，其中我遇到了一个非常奇怪的行为。我放了一个断点，它根本不会中断！

线索：

*   在exe文件路径中生成一个PDB文件。

*   调试/模块窗口显示消息“二进制文件未使用调试信息构建。”。

*   手动加载 PDB 文件（调试/模块，右键单击可执行模块，从/符号路径加载符号，然后双击 PDB 文件）显示“在此文件夹中找不到匹配的符号文件。”。

我的设置：

*   C++/通用/调试信息格式：程序数据库。
*   C++/优化：禁用。
*   C++/代码生成/运行库：多线程调试。
*   链接器/调试/生成调试信息：是的。
*   链接器/调试/生成程序数据库：$(TargetDir)$(TargetName).pdb。

编译器命令行：

```
/I"..\..\calibur64k\include" /I"C:\Program Files (x86)\Microsoft DirectX SDK (June 2010)\Include" /Zi /nologo /W3 /WX- /Od /Oy- /D "D3D_DEBUG_INFO" /D "WIN32" /D "_DEBUG" /D "_WINDOWS" /D "_UNICODE" /D "UNICODE" /Gm /EHsc /RTC1 /MTd /GS /fp:precise /Zc:wchar_t /Zc:forScope /Fp"Debug\calibur_app.pch" /Fa"Debug\" /Fo"Debug\" /Fd"Debug\vc100.pdb" /Gd /analyze- /Zl /errorReport:queue 
```

链接器命令行：

```
/OUT:"C:\Users\David\Desktop\calibur64k\vs2010\Debug\calibur_app.exe" /INCREMENTAL:NO /NOLOGO "kernel32.lib" "user32.lib" "d3dcompiler.lib" "gdi32.lib" "winspool.lib" "comdlg32.lib" "advapi32.lib" "shell32.lib" "ole32.lib" "oleaut32.lib" "uuid.lib" "odbc32.lib" "odbccp32.lib" "C:\Users\David\Desktop\calibur64k\vs2010\Debug\calibur64k.lib" /MANIFEST /ManifestFile:"Debug\calibur_app.exe.intermediate.manifest" /ALLOWISOLATION /MANIFESTUAC:"level='asInvoker' uiAccess='false'" /DEBUG /PDB:"C:\Users\David\Desktop\calibur64k\vs2010\Debug\calibur_app.pdb" /ASSEMBLYDEBUG /SUBSYSTEM:WINDOWS /PGD:"C:\Users\David\Desktop\calibur64k\vs2010\Debug\calibur_app.pgd" /TLBID:1 /DYNAMICBASE /NXCOMPAT /MACHINE:X86 /ERRORREPORT:QUEUE 
```

我在互联网上找到的任何东西都没有帮助我:(有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T17:03:40.477

My Settings of Visual c++ 2010:

Linker/Manifest File/Generate Manifest: Yes. Linker/Manifest File/Allow Isolation: Yes. Linker/Embedded IDL/Ignore embedded IDL: No.

I have used these settings in all of my programs and break points are successfully hit.

So, my inference is that what you have proposed might not be the right solution.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T13:04:00.040

问题已通过反复试验解决:)

对于任何可能感兴趣的人：

Linker/Manifest File/Generate Manifest：设置为 No. Linker/Manifest File/Allow Isolation：设置为 No. Linker/Embedded IDL/Ignore embedded IDL：设置为 Yes。

而已。可能为 C++ 项目错误地设置了生成的 PDB 文件清单或可执行清单？

感谢您的回答。

# file - 尝试将文本附加到文件时 Bash 脚本生成错误

> ID：11375125
> 
> 赞同：0
> 
> 时间：2012-07-07T12:47:40.253
> 
> 标签：file, bash, append

我正在尝试制作一个简单的 bash 脚本，用于打印 MPD 中当前歌曲的路径。

```
while [ 1 ]
do
    mpc idle
    track=$(mpc current | awk -F " - " '{print $2}')
    echo $track

    path_to_track=$(mpc search title "$track")
    echo $path_to_track

    "$path_to_track" >> /home/noob/MPDPlaylist/testplaylist.m3u

done 
```

现在，问题是，一旦我的脚本尝试将 的值附加`path_to_track`到文件中，它就会生成以下错误

```
player
Skin To Bone
Linkin Park/Living Things(2012)/09 - Linkin Park - Skin To Bone.mp3
test.sh: line 8: Linkin Park/Living Things(2012)/09 - Linkin Park - Skin To Bone.mp3: No such file or directory 
```

现在，我在这里做错了什么。正如您在上面的代码中看到的那样，我已经尝试添加`double quotes`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T12:56:23.197

现在你正在尝试*执行*你的 mp3 文件。你可能想要`echo`这样：

```
echo "$path_to_track" >> /home/noob/MPDPlaylist/testplaylist.m3u 
```

# dynamic - ZooKeeper - 动态添加对等点？

> ID：11375126
> 
> 赞同：7
> 
> 时间：2012-07-07T12:47:53.903
> 
> 标签：dynamic, p2p, apache-zookeeper, master-slave

我是 ZooKeeper 的新手。这就是我需要的。

我有一个同行网络。

1.  `t=t_1 -> [peer-1 (Leader), peer-2]` peer-1 是主节点，所有客户端都连接到该节点。

2.  在`t=t_2 -> [peer-1 (Leader), peer-2, peer-3]` 稍后的某个时间，peer-3 加入了该组。是否可以“动态地”将 peer-3 添加到 zookeeper 服务器列表中（即，无需在 peer-1 上重新启动 ZooKeeper）？

3.  在`t=t_3 -> [peer-3 (Leader), peer-4]` 一段时间后，peer-1 和 peer-2 都离开了组（例如，死亡或被关闭。）假设有一种方法可以动态地将 peer-3 和 peer-4 添加到组中，peer-3 成为领导者并且所有客户端请求都发送到 peer-3。

除了使用 ZooKeeper 来做这样的事情之外，我还可以使用其他选项吗？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-07T13:41:15.147

目前，您无法在不重新启动的情况下动态更改 Zookeeper 集群的配置。有一个未解决的问题可以解决此问题，[ZOOKEEPER-107](https://issues.apache.org/jira/browse/ZOOKEEPER-107)。描述集群成员算法的论文非常有趣，可以在[这里](https://issues.apache.org/jira/secure/attachment/12525379/zkreconfig-usenixatc-final.pdf)找到。

您可以通过一次重新启动服务器节点 1 来更改集群的配置。例如，如果您的集群有服务器 A、B、C，并且您想用 D 替换服务器 C，那么您可以执行以下操作，

*   打倒C
*   调出 D，它的对等列表是 A,B,D
*   拿下B
*   将 B 的对等列表更改为 A,B,D
*   培养B
*   删除 A 将 A 的对等列表更改为 A,B,D
*   提出一个
*   将所有客户端的客户端配置更改为指向 A,B,D

在 t=t_1 时，您有一个包含 2 个 zookeeper 节点的集群。这是相当脆弱的，如果任何一个节点宕机，你将无法建立仲裁（floor(N / 2) + 1），集群将不可用。通常 zookeeper 集群是奇数。

当你说，我不确定你想做什么，

> peer-3 成为领导者，所有客户端请求都发送到 peer-3。

你不能指定zookeeper集群中的哪个节点是leader，节点自己会选举他们的leader，并且leader会随着节点的上下变化而变化。同样，客户端通常并不总是连接到领导者，但客户端会获得集群中的机器列表，并随机连接到其中一台，如果它们连接的服务器出现故障，则会重新连接。您可以设置[leaderServes](http://zookeeper.apache.org/doc/r3.3.3/zookeeperAdmin.html#sc_clusterOptions)选项以指定领导者不服务器客户端连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-16T19:46:38.053

我不建议将上述内容用于任何生产情况。上述解决方案仅在您可以暂时丢失 ZK 仲裁直到所有更改完成时才有效。

原因如下： 关闭 C 启动 D，它的对等列表是 A、B、D"

-> 此时 A 和 B 不知道 D -> D 知道 AB

所以此时你只有 A 和 B 在法定人数中运作，接下来你取消 B 并且你失去法定人数。

您将无法访问 zk 数据，直到迁移完成并再次恢复仲裁。在这种情况下，大多数设计良好的应用程序使用 zk 故障转移到只读模式，并将正常恢复。

在[Zookeeper-107](https://issues.apache.org/jira/browse/ZOOKEEPER-107)在 Zookeeper 3.5 下发布之前，您需要明智地选择毒药。

最好：

1.  只需设置一个新的 zk 集成（zk 集群）
2.  从快照恢复
3.  从旧的 zk ensemble 迁移到新的 zk ensemble 的应用程序
4.  迁移完成后关闭旧的 zk ensemble

# android - 在 Android 中倾斜文本视图

> ID：11375130
> 
> 赞同：10
> 
> 时间：2012-07-07T12:48:31.747
> 
> 标签：android, android-widget, android-animation, android-canvas

我希望在我的应用程序中复制以下内容：

![在此处输入图像描述](../Images/d608055f4f5ccc146c0a77bb6d30662a.png)

如您所见，它基本上是一个按钮，用于增加/减少其中包含的文本视图的值。此按钮将具有三种视觉状态 -> 未按下、减少和增加（如上图所示，用户点击增加箭头，按钮显示在该侧按下）

这是我目前的 3 个按钮状态：

![在此处输入图像描述](../Images/61c7980e09d255a8da0d1a5d43e5ad19.png) ![在此处输入图像描述](../Images/2582ff28c7937cefc5e5ac97cb444e55.png) ![在此处输入图像描述](../Images/daa683d62be3c842728b51ac5366cf91.png)

如您所见，我遇到的问题是能够正确倾斜/旋转文本视图，使其在视觉上看起来正确，并且在增加或减少按钮时与按钮一起倾斜。

到目前为止，我尝试了两种不同的方法：

*   **创建一个自定义文本视图类，它会覆盖`onDraw()`倾斜画布的方法：**

    ```
    @Override
    public void onDraw(Canvas canvas) { 
       canvas.save(); 

       canvas.skew(0.2f, 0f);

       super.onDraw(canvas); 
       canvas.restore();
    } 
    ```

*   **集成`Rotate3dAnimation`类**（来源[在这里](http://code.google.com/p/android-eksempler/source/browse/trunk/BrowseableApiDemos/assets/src/com/example/android/apis/animation/Rotate3dAnimation.java?r=38)）并使用许多不同的变体来获得所需的结果，例如：

    ```
     Rotate3dAnimation skew = new Rotate3dAnimation(
              30, 0, centerX, centerY, 0, false);
       txtAmount.startAnimation(skew); 
    ```

不幸的是，我并没有完全得到反映上面第一张图片的确切结果。我对使用 Z 轴、倾斜、旋转等设置值感到困惑。

我非常感谢任何有这方面经验的人的帮助。提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-08T05:55:45.637

好吧，我什至尝试过，我想出了这样的事情：

```
 public class DemoActivity extends TextView {
    Context context;
    String firstText = "$120.00";

 public DemoActivity(Context context)
   {
    super(context);
    this.context = context;

   }

    @Override
    protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    setText(firstText);
    setTextSize(30);
    canvas.skew(1.0f, 0.3f);  //you need to change values over here
    Rotate3dAnimation skew = new Rotate3dAnimation(
              -20, 30,200, 200, 0, false);   //here too
    startAnimation(skew);

        }
    } 
```

我得到一个输出：

![在此处输入图像描述](../Images/b29b7420c943bdf7bbe3dd627fa8e860.png)

我想通过反复试验来改变值可以解决你的问题。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-25T08:40:54.970

感谢 Parth Doshi 的回答。他的答案需要稍微调整才能运行，我在这里分享以节省其他人的时间。

首先在 src 文件夹中创建一个类并编写所有三个构造函数。

```
public class TextViewDemo extends TextView {

Context context;
String text = "TESTING 3DX TOOLS";

public TextViewDemo(Context context) {
    super(context);
    this.context = context;
}

public TextViewDemo(Context context, AttributeSet attrs) {
    super(context, attrs);
    this.context = context;
}

public TextViewDemo(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    this.context = context;
}

@Override
protected void onDraw(Canvas canvas) {
    // TODO Auto-generated method stub
    super.onDraw(canvas);
    setText(text);
    setTextSize(30);
    canvas.skew(0.5f, 1.0f); // you need to change values over here
    Rotate3dAnimation skew = new Rotate3dAnimation(-50, 30, 0, 0, 0,
            false); // here too
    startAnimation(skew);

} 
```

}

在 res/layout/my_layout.xml 文件中，您可以添加自定义 TextView 的标签。

```
<com.yourpackage.name.TextViewDemo
    android:id="@+id/name"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:text="Hello World"
<!-- All parameters and value shall remain same -->
/> 
```

像任何其他视图一样，您可以在 onCreate() 方法中创建 TextViewDemo 的实例

```
TextViewDemo txtDemo = (TextViewDemo) findViewById(R.id.name); 
```

问候

# android - Android 裁剪图像

> ID：11375131
> 
> 赞同：2
> 
> 时间：2012-07-07T12:48:32.437
> 
> 标签：android, android-image

我正在使用[本](http://www.androidworks.com/crop_large_photos_with_android)教程中的代码来裁剪图像

```
Intent intent = new Intent(Intent.ACTION_GET_CONTENT, null);
                    intent.setType("image/*");
                    intent.putExtra("crop", "true");
                    intent.putExtra("aspectX", aspectX);
                    intent.putExtra("aspectY", aspectY);
                    intent.putExtra("outputX", outputX);    
                    intent.putExtra("outputY", outputY);
                    intent.putExtra("scale", scale);
                    intent.putExtra("return-data", return_data);
                    intent.putExtra(MediaStore.EXTRA_OUTPUT, getTempUri());
                    intent.putExtra("outputFormat", Bitmap.CompressFormat.JPEG.toString()); 
```

但我想修改三角形（用于确定要裁剪的区域）纵横比，使 x 轴长得多 y 轴

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T14:24:15.260

它`com.android.camera.action.CROP`是内部 API 的一部分，因此不能保证所有 Android 设备都支持它（与`ACTION_GET_CONTENT`mime type相同`image/*`。

如果您希望所有设备都支持它，您将必须实现自己的裁剪活动。如果某些设备不支持`Intent`. **请不要忘记这样做！**:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-03T13:48:48.297

尝试

[https://github.com/biokys/cropimage](https://github.com/biokys/cropimage)

作品与最初的意图相似

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-15T06:33:58.517

请看一下这个要点。这对我有用，而且完全可定制。只有一个类可以添加，然后你就可以使用它。

```
[https://gist.github.com/pookie13/gist][1] 
```

# c# - 使用 WMI 以编程方式更改远程 IP 地址

> ID：11375137
> 
> 赞同：0
> 
> 时间：2012-07-07T12:50:01.893
> 
> 标签：c#, ip, wmi

我正在编写一个应用程序来使用 WMI 更改本地和远程机器的 IP 地址。此代码成功更改了远程计算机的网关和 DNS，并且相同的代码（在不同的类中并减去管理范围部分）在本地更改了所有数据（两个 IP、网关、DNS）。问题是它不会更改远程 IP 地址。当我到处寻找这个答案时，有人可以建议吗？

我已经在没有防火墙的 Windows 7 和 XP 上进行了测试，并且在远程机器上安装了 .net 4

```
class remoteIPChange
{
    public string setTillIP(string IPAddress1, string IPAddress2, string SubnetMask, string Gateway)
    {
        ConnectionOptions connection = new ConnectionOptions();
        connection.Username = "username";
        connection.Password = "password";
        connection.Authority = "ntlmdomain:DOMAIN";

        ManagementScope scope = new ManagementScope(
        "\\\\"+IPAddress1+"\\root\\CIMV2", connection);
        scope.Connect();

        ObjectGetOptions o = new ObjectGetOptions();

        ManagementPath p = new ManagementPath("Win32_NetworkAdapterConfiguration");

        ManagementClass objMC = new ManagementClass(scope,p,o);

        ManagementObjectCollection objMOC = objMC.GetInstances();

        foreach (ManagementObject objMO in objMOC)
        {
            if (!(bool)objMO["IPEnabled"])
            continue;

            try
            {
                ManagementBaseObject objNewIP = null;
                ManagementBaseObject objSetIP = null;
                ManagementBaseObject objNewGate = null;
                ManagementBaseObject objNewDNS = null;

                objNewIP = objMO.GetMethodParameters("EnableStatic");
                objNewGate = objMO.GetMethodParameters("SetGateways");
                objNewDNS = objMO.GetMethodParameters("SetDNSServerSearchOrder");

                //Set DefaultGateway
                objNewGate["DefaultIPGateway"] = new string[] { Gateway };
                objNewGate["GatewayCostMetric"] = new int[] { 1 };

                //Set IPAddress and Subnet Mask
                objNewIP["IPAddress"] = new string[] { IPAddress1, IPAddress2 };
                objNewIP["SubnetMask"] = new string[] { SubnetMask, SubnetMask };

                //Set DNS servers
                objNewDNS["DNSServerSearchOrder"] = new string[] {Gateway };

                //Invoke all changes
                objSetIP = objMO.InvokeMethod("EnableStatic", objNewIP, null);
                objSetIP = objMO.InvokeMethod("SetGateways", objNewGate, null);
                objSetIP = objMO.InvokeMethod("SetDNSServerSearchOrder", objNewDNS, null);

                return ("Updated IPAddress to " + IPAddress + ", \nSubnetMask to " + SubnetMask + " \nand Default Gateway to " + Gateway + "!");
            }
            catch (Exception ex)
            {
                return ("Unable to Set IP : " + ex.Message);
            }
        }
        return "code has not run";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T20:15:55.243

我会从 EnableStatic 的调用方法中检查 ReturnValue。我很确定为您的子网传入 null 是您的问题。提供与您的 IP 地址匹配的有效子网数组，而不是那个空值。

# c# - 正则表达式计数文本字段中的字符

> ID：11375139
> 
> 赞同：1
> 
> 时间：2012-07-07T12:50:44.617
> 
> 标签：c#, asp.net

我正在尝试计算文本字段中的字符。我找到了如何计算所有字符。

```
string st = TextBox1.Text;
this.TextBox2.Text = Regex.Matches(st, ".|").Count.ToString(); 
```

但是我需要再创建 2 个单独的计数，任何大写字母，数字，- 或 # 最多（不包括）@

`eg. LA-FG4-DETF-DJJJTHD-S@T-JHF-F1-F2`计数将是`21`

另一个我需要从 @ (包括) ，任何大写字母，数字， - 或 # 到文本字段的末尾。

`eg. LA-FG4-DETF-DJJJTHD-S@T-JHF-F1-F2`计数将是`12`

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T13:21:33.383

```
 string input = "LA-FG4-DETF-DJJJTHD-S@T-JHF-F1-F2";
        int atIndex = input.IndexOf('@');
        int count1 = Regex.Matches(input.Substring(0, atIndex), "[0-9A-Z#-]").Count;
        int count2 = Regex.Matches(input.Substring(atIndex, input.Length - atIndex), "[0-9A-Z#@-]").Count; 
```

# android - 空气缩放手势根本不起作用

> ID：11375144
> 
> 赞同：1
> 
> 时间：2012-07-07T12:52:09.583
> 
> 标签：android, actionscript, air, gesture, flashdevelop

我有一个使用最新 sdk 的简单测试 flash 开发空中移动项目，并尝试制作工作缩放手势。当我在我的 sgs 上启动它时，缩放手势不会发生任何事情，只是我的图像添加到舞台上。这是示例代码：

```
package  {

    import flash.display.Bitmap;
    import flash.display.MovieClip;
    import flash.ui.Multitouch;
    import flash.events.TransformGestureEvent;
    import flash.ui.MultitouchInputMode;

    public class Main extends MovieClip {

        [Embed(source = "elevator.png")] public static const graph:Class;
        public var elevator:Bitmap;
        public function Main() {

            elevator = new graph();
            elevator.x = 0;
            elevator.y = 0;
            addChild(elevator);
            init();
        }

        private function init():void
        {
            if(Multitouch.supportsGestureEvents)
            {
                setupGestures();
            } else {
                trace("it no worky");
            }
        }

        private function setupGestures():void
        {
            Multitouch.inputMode = MultitouchInputMode.GESTURE;

            elevator.addEventListener(TransformGestureEvent.GESTURE_ROTATE, handleGestures);
            elevator.addEventListener(TransformGestureEvent.GESTURE_ZOOM, handleGestures);
        }

        private function handleGestures(event:TransformGestureEvent):void
        {
            if(event.type == "gestureRotate")
            {
                elevator.rotation += event.rotation;
            } else {
                elevator.scaleX *= event.scaleX;
                elevator.scaleY *= event.scaleY;
            }
        }
    }

} 
```

我哪里错了？

**更新。**这是application.xml：

```
<?xml version="1.0" encoding="utf-8" ?> 
```

```
<id>air.multitouch</id>
<versionNumber>0.1</versionNumber>
<supportedProfiles>mobileDevice</supportedProfiles>
<filename>multitouch</filename>

<name>multitouch</name>
<description></description>
<copyright></copyright>

<android>
    <manifestAdditions><![CDATA[

        <manifest android:installLocation="auto">
            <uses-permission android:name="android.permission.INTERNET"/>
            <uses-feature android:required="true" android:name="android.hardware.touchscreen.multitouch"/>
        </manifest>

    ]]></manifestAdditions>
</android>
<iPhone> 
    <InfoAdditions><![CDATA[ 

        <key>UIStatusBarStyle</key> 
        <string>UIStatusBarStyleBlackOpaque</string> 
        <key>UIRequiresPersistentWiFi</key> 
        <string>NO</string>
        <key>UIPrerenderedIcon</key>  
        <true/>
        <key>UIApplicationExitsOnSuspend</key>
        <true/>

        <key>UIDeviceFamily</key>
        <array>
            <!-- iPhone support -->
            <string>1</string> 
            <!-- iPad support -->
            <!--<string>2</string>-->
        </array>

    ]]></InfoAdditions> 
    <requestedDisplayResolution>high</requestedDisplayResolution>
</iPhone> 

<initialWindow>
    <title>multitouch</title>
    <content>multitouch.swf</content>
    <visible>true</visible>
    <fullScreen>true</fullScreen>
    <autoOrients>false</autoOrients>
    <aspectRatio>landscape</aspectRatio>
    <renderMode>direct</renderMode>
</initialWindow>

<icon>
    <image48x48>icons/icon_48.png</image48x48>
    <image57x57>icons/icon_57.png</image57x57>
    <image72x72>icons/icon_72.png</image72x72>
    <image114x114>icons/icon_114.png</image114x114>
    <image512x512>icons/icon_512.png</image512x512>
</icon>

<!-- 
AIR options:
http://livedocs.adobe.com/flex/3/html/File_formats_1.html#1043413

AIR mobile options:
http://help.adobe.com/en_US/air/build/WSfffb011ac560372f-5d0f4f25128cc9cd0cb-7ffe.html

Android manifest documentation:
http://developer.android.com/guide/topics/manifest/manifest-intro.html
--> 
```

**向上。**这是示例.apk [https://dl.dropbox.com/u/78904724/multitouch.apk](https://dl.dropbox.com/u/78904724/multitouch.apk)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T08:32:14.560

我认为这些手势仅适用于 InteractiveObject-s，因此将其（电梯）包装在一些 Sprite 中。

# php - 将这两个正则表达式合并为一个

> ID：11375146
> 
> 赞同：-4
> 
> 时间：2012-07-07T12:52:18.810
> 
> 标签：php, regex

我觉得通过将这两个正则表达式视为一个，我可以学到很多东西。主要是选择和之间的空格，`>`而`<`不是选择`>`和`<`本身，所以我可以用“”而不是“><”来替换它。有没有办法在不选择那个空间的情况下合并这些？

```
 $html = preg_replace('/(\n)|(\r)/',"",$html);
    $html = preg_replace('/>(\s+)</',"><",$html); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T12:58:35.580

```
$html = preg_replace('/[\n\r]+|(?<=>)\s+(?=<)/',"",$html); 
```

# php - 如何使用 PHP 编码和解码 / 字符

> ID：11375149
> 
> 赞同：2
> 
> 时间：2012-07-07T12:52:53.777
> 
> 标签：php, special-characters, decode, encode

在我动态生成的网站中，有时我的部分 URL 包含 / 字符：

塞雷娜·威廉姆斯/维纳斯·威廉姆斯-安德里亚·赫拉瓦科娃/露西·赫拉德卡

而且，由于 / 符号被视为文件夹，因此 URL 不存在，因此 URL 自然会返回 404 错误。

对包含 / 字符的字符串进行编码和稍后解码的 PHP 函数是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T12:55:09.327

您可以使用[PHP: urlencode](http://php.net/manual/en/function.urlencode.php)进行编码，并使用其对应的[PHP: urldecode](http://www.php.net/manual/en/function.urldecode.php)进行解码：

```
urlencode($stringinput) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T13:03:03.873

您可以使用 htmlentities() 和 urlencode()

```
<?php
$query_string = 'foo=' . urlencode($foo) . '&bar=' . urlencode($bar);
echo '<a href="index.php?' . htmlentities($query_string) . '">';
?> 
```

# ruby-on-rails - 路由规范失败，因为哈希存储方式不同

> ID：11375150
> 
> 赞同：2
> 
> 时间：2012-07-07T12:52:59.357
> 
> 标签：ruby-on-rails, rspec, routes

我的测试示例是：

```
it "routes to #add_role" do
  post("/users/1/add_role").should route_to("users#add_role",id: 1)
end 
```

这是失败消息：

```
UsersController routing routes to #add_role
     Failure/Error: post("/users/1/add_role").should route_to("users#add_role",id: 1)
       The recognized options <{"controller"=>"users", "action"=>"add_role", "id"=>"1"}> did not match <{"id"=>1, "controller"=>"users", "action"=>"add_role"}>, difference: <{"id"=>1}>.
       <{"id"=>1, "controller"=>"users", "action"=>"add_role"}> expected but was
       <{"controller"=>"users", "action"=>"add_role", "id"=>"1"}>. 
```

我的环境：

*   红宝石-1.9.3-p194
*   导轨 3.2.6
*   Rspec (2.10.0)

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2014-11-04T12:38:25.293

您需要将 route_to 中的 id 设为字符串。Rails 不会将类型转换为数字，因为它不对类型做出任何假设

# mysql - MySql 添加新列作为结果

> ID：11375153
> 
> 赞同：0
> 
> 时间：2012-07-07T12:53:25.710
> 
> 标签：mysql, select

我有这个查询：

```
SELECT v2.longitude AS something FROM points AS v2 
```

现在我想做这样的事情：

```
SELECT v2.longitude AS something,2*something FROM points AS v2 
```

但它失败了

> `points.longitude`是一个浮点数

我怎样才能解决这个问题？

编辑-这是当前查询的示例：

```
$query="
SELECT 
v2.longitude AS xa,
v2.latitude AS ya,
v3.longitude AS xb,
v3.latitude AS yb, 
(yb-ya)/(xb-xa) AS l,
-1/l AS l_katheto,
(l*xa-l_katheto*$tetmimenh+ya-y1)/(l_katheto-l) AS x_tomh, 
l*(x_tomh-xa)+ya AS y_katheto,
min(
    sqrt(
        (v2.longitude-$tetmimenh)*
        (v2.longitude-$tetmimenh)+
        (v2.latit‌​ude-$tetagmenh)*
        (v2.latitude-$tetagmenh)
    ),
    sqrt(
        (v3.longitude-$tetmimenh)*
        (v3.long‌​itude-$tetmimenh)+
        (v3.latitude-$tetagmenh)*
        (v3.latitude-$tetagmenh)
    ),
    sqrt(
        ($tetmi‌​menh-x_tomh)*
        ($tetmimenh-x_tomh)+
        ($tetagmenh-y_tomh)*
        ($tetagmenh-y_tomh)
    )
) 
FROM 
segments AS v1 
JOIN points AS v2 ON v1.from_point=v2.point_id 
JOIN points AS v3 ON v3.point_id=v1.to_point"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T17:39:58.503

我不确定您在这里要完成什么，但鉴于您在之前的评论中给出的查询，我只能评论我目前的理解。

您对@Jocelyn 的评论中的查询

```
SELECT 
v2.longitude AS xa,
    /* you can use xa2 for the rest of your calcs */
2*(v2.longitude) as xa2,
v2.latitude AS ya,
v3.longitude AS xb,
    /* if you need it for the other long as well */
2*(v3.longitude) as xb2,
v3.latitude AS yb, 
(yb-ya)/(xb-xa) AS l,
    /* BTW, the (l) makes this and the next few line hard to read */
-1/l AS l_katheto,
    /* is this a negative inverse? */
(l*xa-l_katheto*$tetmimenh+ya-y1)/(l_katheto-l) AS x_tomh, 
l*(x_tomh-xa)+ya AS y_katheto,
min(
    sqrt(
        (v2.longitude-$tetmimenh)*
        (v2.longitude-$tetmimenh)+
        (v2.latit‌​ude-$tetagmenh)*
        (v2.latitude-$tetagmenh)
    ),
    sqrt(
        (v3.longitude-$tetmimenh)*
        (v3.long‌​itude-$tetmimenh)+
        (v3.latitude-$tetagmenh)*
        (v3.latitude-$tetagmenh)
    ),
    sqrt(
        ($tetmi‌​menh-x_tomh)*
        ($tetmimenh-x_tomh)+
        ($tetagmenh-y_tomh)*
        ($tetagmenh-y_tomh)
    )
) 
FROM 
segments AS v1 
JOIN points AS v2 ON v1.from_point=v2.point_id 
JOIN points AS v3 ON v3.point_id=v1.to_point 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T12:58:48.857

试试这个代码：

```
SELECT v2.longitude AS something,2*v2.longitude AS something2 FROM points AS v2 
```

# safari - 一键安装 Safari 扩展

> ID：11375154
> 
> 赞同：4
> 
> 时间：2012-07-07T12:53:31.523
> 
> 标签：safari, installation, safari-extension

当用户下载插件 firefox（例如）时，插件安装会在下载完成后立即开始。

是否有可能在 safari 中实现相同的目标？即用户点击链接下载插件，一旦下载它就会自动开始安装。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-05T00:39:07.143

我认为这在任何其他域上都是不可能的，除了`extensions.apple.com`.

我已经对此进行了一些广泛的测试，并且 safari.installExtension() 方法仅在域与 extensions.apple.com 匹配时才存在（可能由浏览器控制，类似于某些 Chrome API 仅显示在扩展本身内部的方式） .

我通过转到 JS 文件本身并打开 JS 控制台来测试这个理论： [https ://extensions.apple.com/home/scripts/extensionInstall.js](https://extensions.apple.com/home/scripts/extensionInstall.js)

加载该 JS 文件后，`typeof(safari.installExtension)`在 JS 控制台中键入它应该返回`"function"`. 请注意，它存在于非 HTML 页面上，这意味着它是由浏览器提供的（因为该脚本不执行，也没有提供该方法的代码）。

我尝试在其他网站上这样做，但它不存在：`"undefined"`.

我也有一个疯狂的想法，它只需要扩展作为子域，所以我也在[http://extensions.joomla.org](http://extensions.joomla.org)上对其进行了测试，没有骰子。我似乎找不到 SSL 的扩展子域。这可能有效，但我对此表示严重怀疑，因为该方法似乎受到监管，仅在 Apple 的特定扩展子域中出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-17T21:20:19.750

这里没有解决方案，但也许这可以帮助？

在[https://extensions.apple.com](https://extensions.apple.com)的苹果扩展库中，扩展确实可以一键安装，我想在我的网站上实现同样的效果，所以我去检查了他们的 JS 源代码。

那里的 javascript 文件定义了一个“ExtensionOneClick”对象 ( [https://extensions.apple.com/home/scripts/extensions.js](https://extensions.apple.com/home/scripts/extensions.js) )。

一种专用于安装扩展的方法：

```
// href : path to the extension ".safariextz" file
// id   : com.whatever.myextension-<safaridevelopper10charsid>

safari.installExtension(id, href); 
```

我试图在我的网站上复制它，但我得到“safari is undefined”，所以我猜 Safari 中特定于站点的 hack 在这里有帮助吗？

# django - 复合主键，谷歌应用引擎（django）

> ID：11375156
> 
> 赞同：4
> 
> 时间：2012-07-07T12:53:48.350
> 
> 标签：django, google-app-engine, uniqueidentifier, composite-primary-key, hash-function

我在谷歌应用引擎上使用 django nonrel/djangoappengine。不能直接指定复合主键。但是，应该可以模仿这种行为。我想知道什么是最好的方法。

**问题**

考虑以下数据模型

```
class AccumuatedSales(models.Model):
    salesman = models.ForeignKey(Salesman)
    year = models.Postiveinteger()
    totalSales = models.PositiveInteger() 
```

我希望 (salesman, year) 被视为主键。也就是说，如果我这样做

```
asby1 = AccumulatedSales(salesman='Joe', year=2010, totalSales=100)
asby1.save()
asby2 = AccumulatedSales(salesman='Joe', year=2010, totalSales=200)
asby2.save() 
```

“表” AccumulatedSales 应包含*一行*。所以第二次保存会覆盖第一次。

**可能的解决方案**

```
class AccumuatedSales(models.Model):
    key = models.CharField(primary_key=True,, default=None, editable=False)
    salesman = models.ForeignKey(Salesman)
    year = models.Postiveinteger()
    totalSales = models.PositiveInteger()

    def save(self):
        self.key = someHashFunction(self.salesman_id, self.year)
        super(AccumulatedSales, self).save() 
```

**问题**

*   这种方法是好的还是“正确的”？
*   字段键的最佳数据类型是什么？就我个人而言，我希望有 som 128 位字段，但据我所知，这是不可用的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T18:01:49.380

这看起来是一个很好的解决方案。

# safari - 安装 safari 扩展后打开网页

> ID：11375164
> 
> 赞同：1
> 
> 时间：2012-07-07T12:55:04.317
> 
> 标签：safari, installation, safari-extension

我已经建立了一个野生动物园扩展。用户下载并安装它后，我想打开一个新网页，安装完成后是否会触发一个事件？

# facebook - 如何检索 POST_ID

> ID：11375165
> 
> 赞同：-1
> 
> 时间：2012-07-07T12:55:05.100
> 
> 标签：facebook, facebook-fql

Facebook 帖子具有唯一 ID。为了将它与 FQL 一起使用，我如何找出特定帖子的 ID 是什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T13:49:08.757

我想我发现无法检索已经存在的帖子/对象的 id。拥有它的唯一方法似乎是通过图形 API 创建帖子并存储返回的值（即对象 ID）。

# macos - 使用 Automator 作为 Applescript 学习工具？

> ID：11375166
> 
> 赞同：1
> 
> 时间：2012-07-07T12:55:05.410
> 
> 标签：macos, applescript, automator

我正在尝试自学 AppleScript。Automator 是基于 AppleScript 的吗？我突然想到，如果有一种方法可以查看 Automator 操作的 AppleScript“内脏”，那将是一个很好的学习工具。但这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T13:09:18.077

学习 AppleScript 的最好方法确实是通过例子来学习。毫无疑问，[MacScripter是最好的起点。](http://macscripter.net/)查看教程部分并关注主题。您遇到的大多数问题都已在 MacScripter 中得到解答。

Automator 不是基于 AppleScript，它使用[ScriptingBridge](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ScriptingBridgeConcepts/Introduction/Introduction.html)和大部分私有 API。ScriptingBridge 是 Cocoa 开发人员 (Objective-C) 的 AppleScript 的替代品，但语法与 AppleScript 有很大不同。

总之，Automator 肯定不是开始学习 AppleScript 的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T13:39:21.723

转到下面的链接并查看“AppleScript 初学者教程”系列。我就是这样学习的。如果您想查看各种代码，您还有一个装满 AppleScript 的文件夹。在这里找到它：/Library/Scripts/。此外，AppleScript Editor 的帮助菜单下还有“Applescript 语言指南”。最后，您必须学习可编写脚本的应用程序的术语，因此在 AppleScript Editor 文件菜单中选择“打开字典...”并在列表中选择一个应用程序以查看其 AppleScript 术语。

[http://macscripter.net/viewtopic.php?id=25631](http://macscripter.net/viewtopic.php?id=25631)

# xml - 如何插入缺失元素或修改现有元素？

> ID：11375172
> 
> 赞同：0
> 
> 时间：2012-07-07T12:56:13.743
> 
> 标签：xml, xslt, xslt-1.0

我正在研究必须生成的 XML 和 XSLT 动态值。

我的 XmL

```
<query>
     <one>testing1</one>
     <one>testing1</one>
</query> 
```

我的输出 XML

```
<query>
     <one>testing1</one>
     <one>testing1</one>
     <sample>100</sample>
</query> 
```

XSLT 我需要检查 (XSL:IF) 输入 XML 中的示例元素是否可用（如果可用） 10% 我必须使用 XSLT 删除 % 那么输出将为 10。如果 XML 中没有元素（示例）它必须默认创建 100。

我们能否在 XSLT 中做到这一点是可能的。

任何人都可以在这里帮助我吗

问候米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T13:57:49.917

这个怎么样 ...

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>

<xsl:template match="@*|node()">
   <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
   </xsl:copy>
</xsl:template>

<xsl:template match="/*[not(//sample)]">
   <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
     <sample>100</sample> 
   </xsl:copy>
</xsl:template>

<xsl:template match="sample">
   <xsl:copy>
    <xsl:apply-templates select="@*"/>
    <xsl:value-of select="translate(.,'%','')"/>
    <xsl:apply-templates select="*"/>
   </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

## 解释

第二个模板添加示例节点（如果不存在）。第三个模板从现有样本中删除任何百分比符号。

# php - Google Books API 仅返回 10 个结果

> ID：11375173
> 
> 赞同：9
> 
> 时间：2012-07-07T12:56:17.940
> 
> 标签：php, xml, api, google-books

我正在实现一个 PHP 应用程序，它第一次需要来自 Google Books API 的一些数据。这很尴尬，但是当我使用典型的查询 [http://books.google.com/books/feeds/volumes?q=search+term](http://books.google.com/books/feeds/volumes?q=search+term)（有特定API经验的人可以理解我）时，它仅返回 10 个结果。

例如，http://books.google.com/books/feeds/volumes?q=php 的 XML 响应[包含](http://books.google.com/books/feeds/volumes?q=php)以下字段：totalResults>582。但是，我只检索到 10 个。

在阅读了相应的文档后，我还没有得出一个解决方案。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-29T16:12:39.397

如今，关键字是`maxResults`而不是`max-results`raina77ow的答案。[来源](https://developers.google.com/books/docs/v1/using#api_params)。正如文档所说，一次可以检索的最大书籍数量为 40。但是，您可以通过多个请求来克服此限制，例如使用以下 PHP 函数：

```
private $books = array('items' => array());

/**
 * Searches the Google Books database through their public API
 * and returns the result. Notice that this function will (due to
 * Google's restriction) perform one request per 40 books.
 * If there aren't as many books as requested, those found will be
 * returned. If no books at all is found, false will be returned.
 * 
 * @author Dakniel
 * @param string $query Search-query, API documentation
 * @param int $numBooksToGet Amount of results wanted
 * @param int [optional] $startIndex Which index to start searching from
 * @return False if no book is found, otherwise the books
 */
private function getBooks($query, $numBooksToGet, $startIndex = 0) {

    // If we've already fetched all the books needed, or
    // all results are already stored
    if(count($this->books['items']) >= $numBooksToGet)
        return $this->books;

    $booksNeeded = $numBooksToGet - count($this->books['items']);

    // Max books / fetch = 40, this is therefore our limit
    if($booksNeeded > 40)
        $booksNeeded = 40;

    $url = "https://www.googleapis.com/books/v1/volumes?q=". urlencode($query) ."&startIndex=$startIndex&maxResults=$booksNeeded";

    // Get the data with cURL
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
    $bookBatch = curl_exec($ch);
    curl_close($ch);

    // If we got no matches..
    if($bookBatch['totalItems'] === 0) {

        // .. but we already have some books, return those
        if(count($this->books) > 0)
            return $this->books;
        else
            return false;

    }

    // Convert the JSON to an array and merge the existing books with
    // this request's new books 
    $bookBatch = json_decode($bookBatch, true);
    $this->books['items'] = array_merge($this->books['items'], $bookBatch['items']);

    // Even if we WANT more, but the API can't give us more: stop
    if( ($bookBatch['totalItems'] - count($this->books['items'])) === 0 ) {
        return $this->books;
    }

    // We need more books, and there's more to get: use recursion
    return $this->getBooks($query, $numBooksToGet, $startIndex);

} 
```

简单示例用法：

```
$books = $this->getBooks("programming", 50); 
```

这将返回**最多**50 本书与关键字编程匹配。希望有人会使用这个，祝你好运！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-07T14:42:53.457

不，它的另一个参数：`max-results`. 但看起来一个“页面”中的最大结果数仍然设置得非常低 - 为 20。

例如，这个查询：

[http://books.google.com/books/feeds/volumes?q=php&max-results=40](http://books.google.com/books/feeds/volumes?q=php&max-results=40)

... 只给了我 20 个条目。`start-index`不过，您可以使用param遍历集合，这很有用，如下所示：

[http://books.google.com/books/feeds/volumes?q=php&max-results=20&start-index=21](http://books.google.com/books/feeds/volumes?q=php&max-results=20&start-index=21)

...然后是 41、61 等。它以 1 开头，而不是 0，我已经检查过了。)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-25T13:56:59.777

**这就是我使用maxResults**参数获得 20 多个结果的方式

'https://www.googleapis.com/books/v1/volumes?q=inauthor:danielle%20steele&maxResults=40&key=your_very_own_api_key'

每个请求它返回 40 个结果，轻而易举。请参阅下面的屏幕截图。

[![在此处输入图像描述](../Images/b0e4eec6f4cd05745ab20fd4d23b41b8.png)](https://i.stack.imgur.com/oe9IS.png)

# c++ - QMenuBar 和 QMenu 在 Mac OS X 中不显示

> ID：11375176
> 
> 赞同：3
> 
> 时间：2012-07-07T12:56:26.613
> 
> 标签：c++, macos, qt, qmenu, qmenubar

我在**Mac OS X 10.7.4上使用****Qt 4.7.4**，**我试图将 a****和 a**添加到我的应用程序但没有成功。****`QMenuBar``QMenu`****

 **在寻找示例时，我发现了[Basic Layouts](http://doc.qt.nokia.com/4.7-snapshot/layouts-basiclayouts.html)并且 Windows 上的界面屏幕截图显示了**File**菜单，这就是我想要做的：

![在此处输入图像描述](../Images/23dbf89cb12cee8ce3bb42c7c4e18cad.png)

**但是**，在 Mac OS X 上运行此示例不会在应用程序窗口中显示*文件*菜单：

![在此处输入图像描述](../Images/a0f983a9c6b1a8e45c36d282862ad5da.png)

它也没有显示在顶部的 Mac OS X 栏中：

![在此处输入图像描述](../Images/9409100fe349da2a08f8d61b0f7c203f.png)

这似乎是 Mac OS X 上 Qt 4.7.4 的一个错误，或者我们需要对源代码进行一些调整才能使其在 Mac 上运行。

**我该如何解决这个问题？**

我在 Stack Overflow 上[找到了类似](https://stackoverflow.com/questions/7972721/menubar-issue-qt-4-7-4-on-mac-os-lion)的帖子，但没有任何帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T00:55:22.447

代码没有问题，Qt也没有。`Exit`您引用的示例仅在菜单中创建一个操作。在 OS X 上，此类操作属于应用程序菜单，而不是文件菜单。您的应用程序被调用`qt_menu`，这就是应用程序菜单的调用方式，您可以在其中找到`Quit`操作——Qt 已正确重命名它以符合 Apple 的 HIG。在 Windows 上，习惯上称它为 Exit，在 Mac 上它是不好的风格。Qt 的行为是正确的，我可以重现它。

将其他操作添加到文件菜单，或者简单地将一个操作从重命名为`Exit`其他操作。

请注意，Qt 不会直接根据名称移动操作。Qt根据名字猜测动作*角色。*您应该覆盖此类猜测并使用`QAction::setMenuRole()`. 然后，这些角色会在各种平台上得到适当的解释。**

# c - 删除字符串开头和结尾的标点符号

> ID：11375178
> 
> 赞同：0
> 
> 时间：2012-07-07T12:56:38.317
> 
> 标签：c

我有一个字符串，我只想从它的开头和结尾删除所有标点符号，而不是中间。

我编写了一个代码来仅从字符串的第一个和最后一个字符中删除标点符号，如果字符串末尾有 2 个或更多标点符号，这显然是非常低效且无用的。

这是一个例子：

```
{ Hello ""I am:: a Str-ing!! } 
```

期望的输出

```
{ Hello I am a Str-ing } 
```

有什么我可以使用的功能吗？谢谢。

这是我到目前为止所做的。我实际上是在链接列表中编辑字符串

```
if(ispunct(removeend->string[(strlen(removeend->string))-1]) != 0) { 
    removeend->string[(strlen(removeend->string))-1] = '\0'; 
} 
else {} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T13:07:10.653

遍历字符串，使用 isalpha() 检查每个字符，将传入的字符写入新字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T14:00:13.467

```
char *rm_punct(char *str) {
  char *h = str;
  char *t = str + strlen(str) - 1;
  while (ispunct(*p)) p++;
  while (ispunct(*t) && p < t) { *t = 0; t--; }
  /* also if you want to preserve the original address */
  { int i;
    for (i = 0; i <= t - p + 1; i++) {
      str[i] = p[i];
  } p = str; } /* --- */

  return p;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T13:55:01.140

好的，在一次`while`迭代中，多次调用该函数以按字符（空格）`strtok`分隔每个字符串。`您也可以使用`sscanf`代替`strtok`.`

 `然后，对于每个字符串，你必须做一个`for`循环，但从字符串的末尾开始直到开头。一旦遇到`!isalpha(current character)`就将 a`\0`放在当前字符串位置。您已经消除了尾巴的标点符号。

现在，`for`在同一个字符串上再循环一次。现在从`0`到`strlen(currentstring)`。虽然是`!isalpha(current character)` `continue`。如果`isalpha`将当前字符放入 a`buffer`和所有剩余字符中。`buffer`是清理后的字符串。将其复制到原始字符串中。

`strtok`对其他人的输出重复上述两个步骤。结尾。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T14:09:55.703

```
#include <stdio.h>
#include <ctype.h>
#include <string.h>

char* trim_ispunct(char* str){
    int i ;
    char* p;

    if(str == NULL || *str == '\0') return str;
    for(i=strlen(str)-1; ispunct(str[i]);--i)
        str[i]='\0';
    for(p=str;ispunct(*p);++p);

    return strcpy(str, p);
}

int main(){
    //test
    char str[][16] = { "Hello", "\"\"I", "am::", "a", "Str-ing!!" };
    int i, size = sizeof(str)/sizeof(str[0]);
    for(i = 0;i<size;++i)
        printf("%s\n", trim_ispunct(str[i]));

    return 0;
}
/* result:
Hello
I
am
a
Str-ing
*/ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-07T13:30:03.477

遍历字符串，用于`isalpha()`检查每个字符，在通过的第一个字符开始写入新字符串之后。

向后迭代新字符串，替换所有标点符号，`\0`直到找到不是标点符号的字符。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-07T14:19:08.367

构建一个微型状态机。cha2class() 函数将字符划分为等价类。状态机总是会跳过标点符号，除非它的左右两边都有字母数字字符；在这种情况下，它将被保留。（即状态 3 中的 memmove()）

```
#include <stdio.h>
#include <string.h>

#define IS_ALPHA 1
#define IS_WHITE 2
#define IS_PUNCT 3
int cha2class(int ch);
void scrutinize(char *str);

int cha2class(int ch)
{
if (ch >= 'a' && ch <= 'z') return IS_ALPHA;
if (ch >= 'A' && ch <= 'Z') return IS_ALPHA;
if (ch == ' ' || ch == '\t') return IS_WHITE;
if (ch == EOF || ch == 0) return IS_WHITE;
return IS_PUNCT;
}

void scrutinize(char *str)
{
size_t pos,dst,start;
int typ, state ;

state = 0;
for (dst = pos = start=0; ; pos++) {
        typ = cha2class(str[pos]);
        switch(state) {
        case 0: /* BOF, white seen */
                if (typ==IS_WHITE) break;
                else if (typ==IS_ALPHA) { start =  pos; state =1; }
                else if (typ==IS_PUNCT) { start =  pos; state =2; continue;}
                break;
        case 1: /* inside a word */
                if (typ==IS_ALPHA) break;
                else if (typ==IS_WHITE) { state=0; }
                else if (typ==IS_PUNCT) { start =  pos; state =3;continue; }
                break;
        case 2: /* inside punctuation after whitespace: skip it */
                if (typ==IS_PUNCT) continue;
                else if (typ==IS_WHITE) { state=0; }
                else if (typ==IS_ALPHA)  {state=1; }
                break;
        case 3: /* inside punctuation after a word */
                if (typ==IS_PUNCT) continue;
                else if (typ==IS_WHITE) { state=0; }
                else if (typ==IS_ALPHA) {
                        memmove(str+dst, str+start, pos-start); dst += pos-start;
                        state =1; }
                break;
                }
        str[dst++] = str[pos];
        if (str[pos] == '\0') break;
        }
}
int main (int argc, char **argv)
{
char test[] = ".This! is... ???a.string?" ;

scrutinize(test);

printf("Result=%s\n", test);

return 0;
}

int main (int argc, char **argv)
{
char test[] = ".This! is... ???a.string?" ;

scrutinize(test);

printf("Result=%s\n", test);

return 0;
} 
```

输出：

```
Result=This is a.string 
````

# facebook - 使用 mikeal 请求发布（通过流媒体？）

> ID：11375180
> 
> 赞同：3
> 
> 时间：2012-07-07T12:56:48.690
> 
> 标签：facebook, node.js, facebook-graph-api, request

我正在尝试使用 mikeal 请求库发布照片，但帖子来自 emp

```
request = require('request')
fs = require("fs")
fs.createReadStream('zebra.jpg').pipe(request.post('http://localhost:2000')) 
```

（在 localhost:2000 我现在有一个简单的回声）

现在，这可行，但我想使用标准 POST 格式传递其他参数。

我实际上想要做的是通过 API 将图像发布到 Facebook，这意味着我想包含一个标题和可能更多的字段。

如果流式传输不是正确的方法（尽管我看到了许多好处，例如无需临时文件和缓冲区就可以离开），那么正确的方法是什么？

感谢您的想法。

升级版：

我已经做到了这一点：

```
fs.createReadStream('zebra.jpg').pipe(graph.post('418533674856800/photos', 
    {message:"I'm a new API photo!", name:"API Photo",privacy:{value:"EVERYONE"}},                  
                    function(err, res) {
                          console.log(res);
            })); 
```

但它返回

```
dest.on('drain', ondrain);
   ^
TypeError: Object #<Graph> has no method 'on'
at [object Object].pipe (stream.js:52:8)
at Request._callback (c:\My Stuff\Creatiff\PRAGmatiki\Web-node.js\postaspage.js:66:36)
at Request.callback (c:\My Stuff\Creatiff\PRAGmatiki\Web-node.js\node_modules\request\main.js:119:22)
at Request.<anonymous> (native)
at Request.emit (events.js:70:17)
at Request.<anonymous> (c:\My Stuff\Creatiff\PRAGmatiki\Web-node.js\node_modules\request\main.js:521:16)
at Request.emit (events.js:67:17)
at IncomingMessage.<anonymous> (c:\My Stuff\Creatiff\PRAGmatiki\Web-node.js\node_modules\request\main.js:483:14)
at IncomingMessage.emit (events.js:88:20)
at HTTPParser.parserOnMessageComplete [as onMessageComplete] (http.js:130:23) 
```

这是因为我在直播吗？请提供任何帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T13:17:20.960

```
var path = require('path'), 
    mime = require('mime');

request({
    url: 'http://localhost:2000',
    headers: {
        'content-type' : 'multipart/form-data'
    },
    method: 'POST',
    multipart: [{ 
        'Content-Disposition' : 'form-data; name="inputname"; filename="' + path.basename('zebra.jpg') + '"',
        'Content-Type' : mime.lookup('zebra.jpg'),
        body: fs.readFileSync('zebra.jpg')
    },{ 
        'Content-Disposition' : 'form-data; name="input[array]"; filename="' + path.basename('zebra1.jpg') + '"',
        'Content-Type' : mime.lookup('zebra1.jpg'),
        body: fs.readFileSync('zebra1.jpg')
    },{ 
        'Content-Disposition' : 'form-data; name="input[array]"; filename="' + path.basename('zebra2.jpg') + '"',
        'Content-Type' : mime.lookup('zebra2.jpg'),
        body: fs.readFileSync('zebra2.jpg')
    },{
        'Content-Disposition' : 'form-data; name="text"',
        body: "text input"                  
    }]
}, 
function(err, res, body){
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T16:00:42.723

我不知道是什么`graph`（没有出现在 mikeael 的文档中），但它没有实现`Stream`接口，因此不能与`pipe()`.

要在 POST 中发送多个部分，您需要使用类型的请求[`multipart/form-data`](http://www.ietf.org/rfc/rfc2388.txt)。最新版本的[mikeal/request](https://github.com/mikeal/request/)对此提供了实验性支持（带有示例）。其他模块也支持它（例如针，虽然我上次看时有点缺乏​​流支持）。

# iphone - 如何使用 OpenGL 为 UIImageView/uiview 提供 3D 效果看起来像一个 3D CUBE

> ID：11375181
> 
> 赞同：1
> 
> 时间：2012-07-07T12:57:01.777
> 
> 标签：iphone, opengl-es, uiimageview, core-graphics

我是**OpenGL**的新手，对它了解不多。**我**想为`UIImageView`. 如何使用 OpenGL 实现这一点？我想做一些类似这张图片的事情：![在此处输入图像描述](../Images/34f8d395524a0c9ad9a3b439d04aecc6.png)

我已经搜索并发现使用 OpenGL 是可能的。我已经提到了[这个链接](http://www.opengl.org/sdk/docs/man/xhtml/glDrawRangeElements.xml)With OpenGL 。我创建了一个立方体，并获得了一些效果

```
glDrawElements(GL_TRIANGLES, sizeof(Indices)/sizeof(Indices[0]), GL_UNSIGNED_BYTE, 0); 
```

但是我知道使用[glDrawRangeElements](http://www.opengl.org/sdk/docs/man/xhtml/glDrawRangeElements.xml)我们可以制作一个 3d 立方体，但我不知道如何实现它。

**编辑**

这是我的代码显示顶点和索引数组

常量顶点顶点[] = {

```
// Front
{{1, -1, 1}, {1, 0, 0, 1}, {1, 0}},
{{1, 1, 1}, {0, 1, 0, 1}, {1, 1}},
{{-1, 1, 1}, {0, 0, 1, 1}, {0, 1}},
{{-1, -1, 1}, {0, 0, 0, 1}, {0, 0}},

// Back
{{1, 1, -1}, {1, 0, 0, 1}, {0, 1}},
{{-1, -1, -1}, {0, 1, 0, 1}, {1, 0}},
{{1, -1, -1}, {0, 0, 1, 1}, {0, 0}},
{{-1, 1, -1}, {0, 0, 0, 1}, {1, 1}},

// Left
{{-1, -1, 1}, {1, 0, 0, 1}, {1, 0}}, 
{{-1, 1, 1}, {0, 1, 0, 1}, {1, 1}},
{{-1, 1, -1}, {0, 0, 1, 1}, {0, 1}},
{{-1, -1, -1}, {0, 0, 0, 1}, {0, 0}},

// Right
{{1, -1, -1}, {1, 0, 0, 1}, {1, 0}},
{{1, 1, -1}, {0, 1, 0, 1}, {1, 1}},
{{1, 1, 1}, {0, 0, 1, 1}, {0, 1}},
{{1, -1, 1}, {0, 0, 0, 1}, {0, 0}},

// Top
{{1, 1, 1}, {1, 0, 0, 1}, {1, 0}},
{{1, 1, -1}, {0, 1, 0, 1}, {1, 1}},
{{-1, 1, -1}, {0, 0, 1, 1}, {0, 1}},
{{-1, 1, 1}, {0, 0, 0, 1}, {0, 0}},

// Bottom
{{1, -1, -1}, {1, 0, 0, 1}, {1, 0}},
{{1, -1, 1}, {0, 1, 0, 1}, {1, 1}},
{{-1, -1, 1}, {0, 0, 1, 1}, {0, 1}}, 
{{-1, -1, -1}, {0, 0, 0, 1}, {0, 0}} 
```

};

const GLubyte 索引[] = {

```
// Front
0, 1, 2,
2, 3, 0,

// Back
4, 6, 5,
4, 5, 7,

// Left
8, 9, 10,
10, 11, 8,

// Right
12, 13, 14,
14, 15, 12,

// Top
16, 17, 18,
18, 19, 16,

// Bottom
20, 21, 22,
22, 23, 20 
```

};

所以请建议我。如果可以使用 Core Graphics 做一些更好的工作，那也很好。

请帮助我获得解决方案。提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T13:18:47.257

忘记 UIImage/等。如果您使用 OpenGL 渲染 3D 立方体，则必须使用 OpenGL 纹理对其进行纹理映射。这些都是 OpenGL 中非常基本的东西；网上肯定有很多关于 1\. 纹理映射和 2\. 绘制立方体的教程。

确保搜索“OpenGL ES 1.1”、“OpenGL ES 2.0”或“GLKit”

**编辑** 试试这个：[http ://www.raywenderlich.com/4404/opengl-es-2-0-for-iphone-tutorial-part-2-textures](http://www.raywenderlich.com/4404/opengl-es-2-0-for-iphone-tutorial-part-2-textures)

**编辑 2**

好的，一些源代码。首先，我使用这种顶点数据格式：

```
typedef struct tTextureCoords
{
    GLfloat s;
    GLfloat t;

}TextureCoords;

// 3D Float Vector for Position and Normals
typedef struct tVertex3D
{
    GLfloat x;
    GLfloat y;
    GLfloat z;

}Vertex3D;

// 4D Byte Vector for Colors 
typedef struct tColor4
{
    GLubyte r;      // [0...255]
    GLubyte g;      // [0...255]
    GLubyte b;      // [0...255]
    GLubyte a;      // [0...255]

}Color4;

// Vertex Data for 3D Objects
typedef struct tVertexData3D
{
    Vertex3D        position;
    Vertex3D        normal;
    TextureCoords   texCoords;
    Color4          color;

}VertexData3D; 
```

接下来，这是一个立方体的顶点数据

```
static GLuint vertexBuffer = 0;
static GLuint indexBuffer  = 0;

static VertexData3D vertexArray[24] = 
{
    // .........................................................................
    // < LEFT > face (-X)

    {   
        // Vertex 0
        { -0.5f, +0.5f, -0.5f },            // Position
        { -1.0f,  0.0f,  0.0f },            // Normal   (-X)
        {   0.5f/512.0f,   0.5f/512.0f },   // Texture
        { 0xFF, 0xFF, 0xFF, 0xFF}           // Color
    },

    {   
        // Vertex 1
        { -0.5f, -0.5f, -0.5f },            // Position
        { -1.0f,  0.0f,  0.0f },            // Normal   (-X)
        {   0.5f/512.0f, 127.5f/512.0f },   // Texture
        { 0xFF, 0xFF, 0xFF, 0xFF}           // Color
    },

    {   
        // Vertex 2
        { -0.5f, +0.5f, +0.5f },            // Position
        { -1.0f,  0.0f,  0.0f },            // Normal   (-X)
        { 127.5f/512.0f,   0.5f/512.0f },   // Texture
        { 0xFF, 0xFF, 0xFF, 0xFF}           // Color
    },

    {   
        // Vertex 3
        { -0.5f, -0.5f, +0.5f },            // Position
        { -1.0f,  0.0f,  0.0f },            // Normal   (-X)
        { 127.5f/512.0f, 127.5f/512.0f },   // Texture
        { 0xFF, 0xFF, 0xFF, 0xFF}           // Color
    },

    // .........................................................................
    // < RIGHT > face (+X)

    {   
        // Vertex 4
        { +0.5f, +0.5f, +0.5f },            // Position
        { +1.0f,  0.0f,  0.0f },            // Normal   (+X)
        { 128.5f/512.0f, 0.5f/512.0f },     // Texture
        { 0xFF, 0xFF, 0xFF, 0xFF}           // Color
    },

    {   
        // Vertex 5
        { +0.5f, -0.5f, +0.5f },            // Position
        { +1.0f,  0.0f,  0.0f },            // Normal   (+X)
        {  128.5f/512.0f, 127.5f/512.0f },  // Texture
        { 0xFF, 0xFF, 0xFF, 0xFF}           // Color
    },

    {   
        // Vertex 6
        { +0.5f, +0.5f, -0.5f },            // Position
        { +1.0f,  0.0f,  0.0f },            // Normal   (+X)
        {  255.5f/512.0f,   0.5f/512.0f },  // Texture
        { 0xFF, 0xFF, 0xFF, 0xFF}           // Color
    },

    {   
        // Vertex 7
        { +0.5f, -0.5f, -0.5f },            // Position
        { +1.0f,  0.0f,  0.0f },            // Normal   (+X)
        {  255.5f/512.0f, 127.5f/512.0f },  // Texture
        { 0xFF, 0xFF, 0xFF, 0xFF}           // Color
    },

    // .........................................................................
    // < BOTTOM > face (-Y)

    {   
        // Vertex 8
        { -0.5f, -0.5f, +0.5f },            // Position
        {  0.0f, -1.0f,  0.0f },            // Normal   (-Y)
        {   0.5f/512.0f, 128.5f/512.0f },     // Texture
        { 0xFF, 0xFF, 0xFF, 0xFF}           // Color
    },

    {   
        // Vertex 9
        { -0.5f, -0.5f, -0.5f },            // Position
        {  0.0f, -1.0f,  0.0f },            // Normal   (-Y)
        {   0.5f/512.0f, 255.5f/512.0f },     // Texture
        { 0xFF, 0xFF, 0xFF, 0xFF}           // Color
    },

    {   
        // Vertex 10
        { +0.5f, -0.5f, +0.5f },            // Position
        {  0.0f, -1.0f,  0.0f },            // Normal   (-Y)
        {   127.5f/512.0f, 128.5f/512.0f },     // Texture
        { 0xFF, 0xFF, 0xFF, 0xFF}           // Color
    },

    {   
        // Vertex 11
        { +0.5f, -0.5f, -0.5f },            // Position
        {  0.0f, -1.0f,  0.0f },            // Normal   (-Y)
        {   127.5f/512.0f, 255.5f/512.0f },     // Texture
        { 0xFF, 0xFF, 0xFF, 0xFF}           // Color
    },

    // .........................................................................
    // < TOP > face (+Y)

    {   
        // Vertex 12
        { -0.5f, +0.5f, -0.5f },            // Position
        {  0.0f, +1.0f,  0.0f },            // Normal   (+Y)
        { 128.5f/512.0f, 128.5f/512.0f },   // Texture
        { 0xFF, 0xFF, 0xFF, 0xFF}           // Color
    },

    {   
        // Vertex 13
        { -0.5f, +0.5f, +0.5f },            // Position
        {  0.0f, +1.0f,  0.0f },            // Normal   (+Y)
        { 128.5f/512.0f, 255.5f/512.0f },   // Texture
        { 0xFF, 0xFF, 0xFF, 0xFF}           // Color
    },

    {   
        // Vertex 14
        { +0.5f, +0.5f, -0.5f },            // Position
        {  0.0f, +1.0f,  0.0f },            // Normal   (+Y)
        { 255.5f/512.0f, 128.5f/512.0f },   // Texture
        { 0xFF, 0xFF, 0xFF, 0xFF}           // Color
    },

    {   
        // Vertex 15
        { +0.5f, +0.5f, +0.5f },            // Position
        {  0.0f, +1.0f,  0.0f },            // Normal   (-Y)
        { 255.5f/512.0f, 255.5f/512.0f },     // Texture
        { 0xFF, 0xFF, 0xFF, 0xFF}           // Color
    },

    // .........................................................................
    // < BACK > face (-Z)

    {   
        // Vertex 16
        { -0.5f, -0.5f, -0.5f },            // Position
        {  0.0f,  0.0f, -1.0f },            // Normal   (-Z)
        { 127.5f/512.0f, 383.5f/512.0f },   // Texture
        { 0xFF, 0xFF, 0xFF, 0xFF}           // Color
    },

    {   
        // Vertex 17
        { -0.5f, +0.5f, -0.5f },            // Position
        {  0.0f,  0.0f, -1.0f },            // Normal   (-Z)
        { 127.5f/512.0f, 256.5f/512.0f },   // Texture
        { 0xFF, 0xFF, 0xFF, 0xFF}           // Color
    },

    {   
        // Vertex 18
        { +0.5f, -0.5f, -0.5f },            // Position
        {  0.0f,  0.0f, -1.0f },            // Normal   (-Z)
        {   0.5f/512.0f, 383.5f/512.0f },   // Texture
        { 0xFF, 0xFF, 0xFF, 0xFF}           // Color
    },

    {   
        // Vertex 19
        { +0.5f, +0.5f, -0.5f },            // Position
        {  0.0f,  0.0f, -1.0f },            // Normal   (-Z)
        {   0.5f/512.0f, 256.5f/512.0f },   // Texture
        { 0xFF, 0xFF, 0xFF, 0xFF}           // Color
    },

    // .........................................................................
    // < FRONT > face (+Z)

    {   
        // Vertex 20
        { -0.5f, +0.5f, +0.5f },            // Position
        {  0.0f,  0.0f, +1.0f },            // Normal   (+Z)
        { 128.5f/512.0f, 256.5f/512.0f },   // Texture
        { 0xFF, 0xFF, 0xFF, 0xFF}           // Color
    },

    {   
        // Vertex 21
        { -0.5f, -0.5f, +0.5f },            // Position
        {  0.0f,  0.0f, +1.0f },            // Normal   (+Z)
        { 128.5f/512.0f, 383.5f/512.0f },   // Texture
        { 0xFF, 0xFF, 0xFF, 0xFF}           // Color
    },

    {   
        // Vertex 22
        { +0.5f, +0.5f, +0.5f },            // Position
        {  0.0f,  0.0f, +1.0f },            // Normal   (+Z)
        { 255.5f/512.0f, 256.5f/512.0f },   // Texture
        { 0xFF, 0xFF, 0xFF, 0xFF}           // Color
    },

    {   
        // Vertex 23
        { +0.5f, -0.5f, +0.5f },            // Position
        {  0.0f,  0.0f, +1.0f },            // Normal   (+Z)
        { 255.5f/512.0f, 383.5f/512.0f },   // Texture
        { 0xFF, 0xFF, 0xFF, 0xFF}           // Color
    }
}; 
```

立方体大小为 1x1x1。您必须提供一个 4x4 模型矩阵（请参阅下面的着色器程序设置）来平移/缩放/旋转您的立方体。数据格式是一个 C 浮点数数组。如何设置，不在此范围内，您可以在互联网上搜索。

纹理坐标假设您使用的是这样的纹理：（每个正方形都是一个面）

![在此处输入图像描述](../Images/f02c39ff5ed14f02de8fb2cab43eb300.png)

...这是索引数据：

```
static GLushort indexArray[] = 
{
    // Triangle Strip...

    12,             // ...
    13,             // ...
    14,             // Top Face                     // CCW
    15,             // Top Face                     // CW

    22,             // Degenerate   (14, 15, 22)    // (CCW)
    20,             // Degenarate   (15, 22, 20)    // (CW)
    23,             // Front Face   (22, 20, 23)    // CCW
    21,             // Front Face   (20, 23, 21)    // CW

     3,             // Degenerate   (20, 21,  3)    // (CCW)
    2,              // Degenerate   (21,  3,  2)    // (CW)
    1,              // Left Face    ( 3,  2,  1)    // CCW
    0,              // Left Face    ( 2,  1,  0)    // CW

    16,             // Degenerate   ( 1,  0, 16)    // (CCW)
    17,             // Degenerate   ( 0, 16, 17)    // (CW)
    18,             // Back Face    (16, 17, 18)    // CCW
    19,             // Back Face    (17, 18, 19)    // CW

     6,             // Degenerate   (18, 19,  6)    // (CCW)
    4,              // Degenerate   (19,  6,  4)    // (CW)
    7,              // Right Face   ( 6,  4,  7)    // CCW
    5,              // Right Face   ( 4,  7,  5)    // CW

    10,             // Degenerate   ( 7,  5, 10)    // (CCW)
    8,              // Degenerate   ( 5, 10,  8)    // (CW)
    11,             // Bottom Face  (10,  8, 11)    // CCW
    9               // Bottom Face  ( 8, 11,  9)    // CW
}; 
```

（'CW'表示三角形条带中的顺时针三角形。'CCW'表示逆时针）

这就是我生成 OpenGL 缓冲区的方式：

```
glGenBuffers(1, &vertexBuffer);
glBindBuffer(GL_ARRAY_BUFFER, vertexBuffer);            
glBufferData(GL_ARRAY_BUFFER, 24*sizeof(VertexData3D), &vertexArray[0], GL_STATIC_DRAW);    
glBindBuffer(GL_ARRAY_BUFFER, 0);

glGenBuffers(1, &indexBuffer);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexBuffer);
glBufferData(GL_ELEMENT_ARRAY_BUFFER, 24*sizeof(GLushort), &indexArray[0], GL_STATIC_DRAW);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0); 
```

这些是 OpenGL 参数：（材质、光照等）

```
static GLfloat lightPosition[4]        = { LIGHT_X_POS, LIGHT_Y_POS, LIGHT_Z_POS, 1.0f };
static GLfloat cubeAmbientMaterial[4]  = { 0.30f, 0.30f, 0.30f, 1.00f };    
static GLfloat cubeDiffuseMaterial[4]  = { 0.650f, 0.650f, 0.650f, 1.00f };
static GLfloat cubeSpecularMaterial[4] = { 1.0f, 1.0f, 1.0f, 1.0f};
static GLfloat cubeShininess           = 1500.0f;

//Lighting is calculated in MODEL Coordinates:
//Eye and Light Source are located high up along the Z Axis
static GLfloat eyePosition[3]      = { 0.0f,  0.0f, CAMERA_Z_POS }; 
```

这是抽奖电话：

```
// VBO Offsets
static GLsizei stride         = (GLsizei)(sizeof(VertexData3D));
static GLvoid* positionOffset = (GLvoid*)(0);
static GLvoid* normalOffset   = (GLvoid*)(sizeof(Vertex3D));
static GLvoid* textureOffset  = (GLvoid*)(2*sizeof(Vertex3D));

glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexBuffer);
glBindBuffer(GL_ARRAY_BUFFER, vertexBuffer);

glBindTexture(GL_TEXTURE_2D, yourTextureID); // Bind your texture

glUseProgram(yourProgram);
// Setup program (Shaders)
glUniformMatrix4fv(viewLocationInProgram, 1, 0, viewMatrix); // Upload the 4x4 view matrix

glUniform3fv(lightPositionLocationInProgram,     1, lightPosition   );
glUniform3fv(eyePositionLocationInProgram,       1, eyePosition     );
glUniform3fv(ambientMaterialLocationInProgram,      1, cubeAmbientMaterial );
glUniform3fv(specularMaterialLocationInProgram,     1, cubeSpecularMaterial);
glUniform3fv(diffuseMaterialLocationInProgram,      1, cubeDiffuseMaterial );
glUniform1f(shininessLocationInProgram,     cubeShininess       );

glVertexAttribPointer(positionLocationInProgram, 3, GL_FLOAT, GL_FALSE, stride, positionOffset);
glVertexAttribPointer(normalLocationInProgram,   3, GL_FLOAT, GL_FALSE, stride, normalOffset);
glVertexAttribPointer(texCoordLocationInProgram, 2, GL_FLOAT, GL_FALSE, stride, textureOffset);

glEnableVertexAttribArray(positionLocationInProgram);   
glEnableVertexAttribArray(normalLocationInProgram);     
glEnableVertexAttribArray(texCoordLocationInProgram);

glUniformMatrix4fv(modelLocationInProgram,  1, 0, modelMatrix);
glUniformMatrix3fv(normalMatrixLocationInProgram, 1, 0, normalMatrix);
glDrawElements(GL_TRIANGLE_STRIP, 48, GL_UNSIGNED_SHORT, 0);

glDrawElements(GL_TRIANGLE_STRIP, 48, GL_UNSIGNED_SHORT, 0);

glDisableVertexAttribArray(positionLocationInProgram);
glDisableVertexAttribArray(normalLocationInProgram);
glDisableVertexAttribArray(texCoordLocationInProgram); 
```

您可以在设置时获得着色器中每个属性/unifoerm 的句柄**，**使用以下代码：

```
positionLocationInProgram = glGetAttribLocation(yourProgram, "Position");
normalLocationInProgram = glGetAttribLocation(yourProgram, "Normal");
texCoordLocationInProgram = glGetAttribLocation(yourProgram, "TextureCoord");
modelLocation = glGetUniformLocation(yourProgram, "Model");
viewLocationInProgram = glGetUniformLocation(yourProgram, "View");
normalMatrixLocationInProgram = glGetUniformLocation(yourProgram, "NormalMatrix");
lightPositionLocationInProgram = glGetUniformLocation(yourProgram, "LightPosition");
eyePositionLocationInProgram = glGetUniformLocation(yourProgram, "EyePosition");
ambientMaterialLocationInProgram = glGetUniformLocation(yourProgram, "AmbientMaterial");
diffuseMaterialLocationInProgram = glGetUniformLocation(yourProgram, "DiffuseMaterial"); 
specularMaterialLocationInProgram = glGetUniformLocation(yourProgram, "SpecularMaterial");
shininessLocationInProgram = glGetUniformLocation(yourProgram, "Shininess");
samplerLocationInProgram = glGetUniformLocation(yourProgram, "Sampler");

glUseProgram(yourProgram);
glUniform1i(samplerLocationInProgram, 0); 
```

（所有以“InProgram”结尾的变量都是 GLints）；

最后，顶点着色器：

```
// These change per-vertex
attribute vec4 Position;
attribute vec3 Normal;
attribute vec2 TextureCoord;

// These change once in a while (e.g., per object)
uniform mat4  Projection;
uniform mat4  Model;
uniform mat4  View;
uniform mat3  NormalMatrix;
uniform vec3  LightPosition;
uniform vec3  EyePosition;
uniform vec3  DiffuseMaterial;
uniform vec3  AmbientMaterial;
uniform vec3  SpecularMaterial;
uniform float Shininess;

// Thes go to the fragment shader (OUTPUT)
varying vec4 DestinationColor;
varying vec2 TextureCoordOut;

void main (void)
{       
    vec4 P = ( Projection * View * Model ) * Position;

    // Position in Model Coordinates
    vec3 P2 = vec3( Model * Position );

    vec3 N = normalize(NormalMatrix*Normal);
    vec3 L = normalize(LightPosition - P2);
    vec3 E = normalize(EyePosition   - P2);

    vec3 H = normalize(L + E);

    float df = max(0.0, dot(N, L));
    float sf = max(0.0, dot(N, H));

    sf = pow(sf, Shininess);

    vec3 color = AmbientMaterial + (df *  DiffuseMaterial) + (sf * SpecularMaterial);

    DestinationColor = vec4(color, 1);

    TextureCoordOut = TextureCoord;

    gl_Position = P;    
} 
```

...还有片段着色器：

```
varying lowp    vec4 DestinationColor;
varying mediump vec2 TextureCoordOut;

uniform sampler2D Sampler;

void main (void)
{
    gl_FragColor = (texture2D(Sampler, TextureCoordOut ) * DestinationColor);
} 
```

**请**注意这里有很多可能的复杂性，OpenGL 不是一个简单的主题，这段代码**可能无法**按原样工作，但我相信这是你想要实现的一个很好的起点。我强烈建议你学习这些东西，因为如果你只复制/粘贴别人的代码，就会有很多小事情会出错。

# php - cakephp 验证规则未触发

> ID：11375182
> 
> 赞同：0
> 
> 时间：2012-07-07T12:57:23.907
> 
> 标签：php, cakephp

给定以下控制器：

```
class UsersController extends AppController {
    public function findUser() {
        ...
        $this->User->findUser($this->request->query['u']);
        ...
    }
} 
```

以及以下型号：

```
class User extends AppModel {
    public $validate = array(
        'username' => array(
            'rule' => array('minLength', '8'),
            'message' => 'Username must be at least 8 characters'
        )
    );

    public function findUser($username) {
        return $this->find('all', array(
            'conditions' => array('username' => $username),
        ));
    }
} 
```

例如，如果我在 url 中输入这个：`http://example.com/users/findUser?u=a`验证器不会被触发。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T12:58:54.163

验证器用于插入或更新数据，而不是用于查询数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T13:00:31.647

您必须手动执行[validates](http://book.cakephp.org/2.0/en/models/data-validation/validating-data-from-the-controller.html)方法（除非您正在保存数据）：

```
if ($this->User->validates()) {
    // valid
} else {
    // not valid
    $errors = $this->User->validationErrors;
} 
```

当您插入/更新数据时，验证器会自动执行。

# php - MVC 从另一个控制器的动作调用另一个控制器的动作

> ID：11375183
> 
> 赞同：0
> 
> 时间：2012-07-07T12:57:28.453
> 
> 标签：php, model-view-controller

假设我们有`OrderController`具有三个动作/页面的控制器：`orderDetailsAction`, `orderHistoryAction`,`orderCustomerDetailsAction`

这些操作中的每一个都返回一些 HTML。

现在我想同时拥有包含所有 3 个 html 片段的页面，*但我不想进行 3 次 ajax 调用来完成这项工作*。

我正在创建其他控制器的操作方法（`orderSummaryAction`例如）。这个方法应该包含这样的东西。

```
public function orderSummartyAction {
   ob_start();
   Application::factory()->run('/order/details');
   Application::factory()->run('/order/history');
   Application::factory()->run('/order/customer_details');     
   $out = ob_get_clean();
   $this->getResponse()->setHtml($out);
} 
```

是否有任何框架可以做这样的事情，或者这是不好的做法（那么更好的做法是什么）？

谢谢！

UPD：或者我们可以不传递字符串 url，而是传递 Route 来创建新的 Application 实例。会好很多，恕我直言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T13:30:08.563

我会说，您的问题的原因是无效的 MVC 实现。

生成 HTML不是*控制器的责任。*相反，输出应该由*视图*实例创建——一个处理表示逻辑和处理多个模板的对象。与 RoR 一直试图提供给我们的相反——**视图不是模板**。

在适当的 MVC 中，控制器负责直接基于用户输入或某种实例来更改*模型层*和选定*视图的状态。*`Request`

另外，两个**旁注**：

*   请不要使用*工厂方法模式* ^([[1]](http://c2.com/cgi/wiki?FactoryMethodPattern) [[2]](http://en.wikipedia.org/wiki/Factory_method_pattern))。恕我直言，这是一种反模式，因为它会导致类之间的紧密耦合并吸引复杂性（它们往往会不受控制地增长）。
*   它可能有用，而不是返回大块 HTML，而是使用 JSON 格式的数据响应 XHR 调用。然后在客户端生成 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T13:12:00.467

Symfony2 使用子请求来调用多个控制器。您可以在此处的“嵌入控制器”下找到更多详细信息[http://symfony.com/doc/current/book/templating.html](http://symfony.com/doc/current/book/templating.html)

# jsf - jsf安全传输机制

> ID：11375184
> 
> 赞同：1
> 
> 时间：2012-07-07T12:57:30.073
> 
> 标签：jsf, ejb-3.0, transport-security

我一直在研究一个简单的 jsf 安全传输机制，其中配置的 https 约束在 web.xml 中设置为机密。现在，我想做的是选择一个特定的页面进行安全传输。我有一个登录页面，可以将我带到另一个页面。登录页面需要一个用户名和密码，并应通过安全层将其传输到一个 ejb，该 ejb 在显示请求的页面之前验证其真实性。现在当我使用像 / 这样的 url 模式时faces/pageToView.xhtml 对于 web.xml 中请求的页面，我得到了一个我不太理解的有趣行为。首先，当我登录时，我的 pageToView.xhtml 显示时没有 https，当我点击转到另一个 pageToView2.xhtml 我的第一个 pageToView.xhtml 使用 https 重新显示。即使我没有为安全传输配置它们，我导航到的所有其他页面不仅显示 https。我需要知道为特定页面配置安全传输行为的正确方法。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T14:13:50.413

看起来的方式是，当您访问 https 时，并且您通常会在登录页面上执行此操作，您会停留在 https 上。在我看来，对于安全要求有限的应用程序来说，这似乎是一个很大的开销，但在研究它时，一致认为最大的风险是会话劫持。因此，如果您有 2 个安全页面登录和购物并且所有其他页面不使用 ssl，他们将通过无线/有线方式以明文方式发送会话 cookie，并且可以嗅探 cookie。

我认为，如果您的应用程序服务器前面有一个 apache Web 服务器，那么您有更多选择，例如在客户端浏览器和某些页面的 apache 之间使用 https，但在 apache 和应用程序服务器之间使用 http。我相当确定你可以做到这一点，但我不是专家，也没有尝试过。

当我前段时间研究这个时，我遇到了由 Glassfish 团队之一编写的这个过滤器，它应该从 https - http 降档。我的回忆是，当与容器安全性结合使用时，所有东西都降档后才停止工作。

通过一些调整，您可以使其适应您的环境，在此示例中，main.xhtml 文件是 web.xml 中的欢迎文件，其想法是这将是成功登录时加载的页面，因此最早的点从 https - http 降档。您需要取消注释 @WebServlet，使用您自己的日志记录代替 Log.log() 并检查任何 url/路径名。

在花时间在这之前，请记住我永远无法让它工作，建议接受打击并一直使用 https。

```
package uk.co.sportquest.jsfbeans.helper;

/*
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS HEADER.
 *
 * Copyright 1997-2008 Sun Microsystems, Inc. All rights reserved.
 *
 * The contents of this file are subject to the terms of either the GNU General
 * Public License Version 2 only ("GPL") or the Common Development and
 * Distribution License("CDDL") (collectively, the "License"). You may not use
 * this file except in compliance with the License. You can obtain a copy of the
 * License at https://glassfish.dev.java.net/public/CDDL+GPL.html or
 * glassfish/bootstrap/legal/LICENSE.txt. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * When distributing the software, include this License Header Notice in each
 * file and include the License file at glassfish/bootstrap/legal/LICENSE.txt.
 * Sun designates this particular file as subject to the "Classpath" exception
 * as provided by Sun in the GPL Version 2 section of the License file that
 * accompanied this code. If applicable, add the following below the License
 * Header, with the fields enclosed by brackets [] replaced by your own
 * identifying information: "Portions Copyrighted [year] [name of copyright
 * owner]"
 *
 * Contributor(s):
 *
 * If you wish your version of this file to be governed by only the CDDL or only
 * the GPL Version 2, indicate your decision by adding "[Contributor] elects to
 * include this software in this distribution under the [CDDL or GPL Version 2]
 * license." If you don't indicate a single choice of license, a recipient has
 * the option to distribute your version of this file under either the CDDL, the
 * GPL Version 2 or to extend the choice of license to its licensees as provided
 * above. However, if you add GPL Version 2 code and therefore, elected the GPL
 * Version 2 license, then the option applies only if the new code is made
 * subject to such option by the copyright holder.
 */
import java.io.*;
import java.util.*;
import java.security.*;
import java.util.logging.Logger;
import javax.faces.context.FacesContext;
import javax.security.jacc.*;
import javax.servlet.*;
import javax.servlet.annotation.WebFilter;
import javax.servlet.http.*;
import uk.co.sportquest.general.Log;

/**
 * Filter that downshifts from https to http if the given request came in over
 * https, but the target resource does not require any confidentiality
 * protection.
 *
 * @author jluehe
 * @author monzillo
 */

//@WebFilter(filterName = "CacheFilterStatic", urlPatterns = {"/faces/secure/main.xhtml"},
//    dispatcherTypes = {DispatcherType.FORWARD, DispatcherType.ERROR, DispatcherType.REQUEST, DispatcherType.INCLUDE})
public class MyFilter implements Filter {

    private static final CodeSource cs =
            new CodeSource(null, (java.security.cert.Certificate[]) null);
    private static final ProtectionDomain pd =
            new ProtectionDomain(cs, null, null, null);
//    private static final Policy policy = Policy.getPolicy();
    private static final Policy policy = Policy.getPolicy();
    private static final String httpPort = "8080";

    @Override
    public void init(javax.servlet.FilterConfig filterConfig)
            throws ServletException {

        //httpPort = filterConfig.getInitParameter("httpPort");
    }

    @Override
    @SuppressWarnings("static-access")
    public void doFilter(ServletRequest req, ServletResponse res,
            FilterChain filterChain)
            throws IOException, ServletException {

        if (req.isSecure()) {
            HttpServletRequest httpReq = (HttpServletRequest) req;
            Permission p = new WebUserDataPermission(httpReq);
            p = new WebUserDataPermission(p.getName(), httpReq.getMethod());
            //SQLog.log("Filter: " + httpReq.getRequestURI());
            boolean isTransportProtected = policy.implies(pd, p) ? false : true;
            Log.log();
            if (!isTransportProtected) {
                // Downshift from https to http, by redirecting to the 
                // target resource using http
                String redirectUrl = "http://" + req.getServerName() + ":"
                        + httpPort + httpReq.getRequestURI();
                String queryString = httpReq.getQueryString();
                if (queryString != null) {
                    redirectUrl += "?" + queryString;
                }
                //redirectUrl = "http://localhost:8080/SportQuest/faces/secure/main.xhtml";
                Log.log("url: " + redirectUrl);
                ((HttpServletResponse) res).sendRedirect(redirectUrl);
            } else {
                // Perform normal request processing
                Log.log("normal");
                filterChain.doFilter(req, res);
            }
        } else {
            // Perform normal request processing
            Log.log("even more normal");
            filterChain.doFilter(req, res);
        }
    }

    @Override
    public void destroy() {
        // Do nothing
    }
} 
```

# elasticsearch - 方面计数的问题

> ID：11375185
> 
> 赞同：6
> 
> 时间：2012-07-07T12:57:56.457
> 
> 标签：elasticsearch

我正在尝试使用 ElasticSearch 进行分析——特别是跟踪手动 Rails CMS 的“热门内容”。该要求比为每条内容保留一个计数器要复杂得多。我现在不会深入研究问题，因为我似乎连基础知识都无法工作。

我的问题是：我使用的是构面，但计数不是我期望的。例如：

询问：

```
{"facets":{"el_ids":{"terms":{"field":"el_id","size":1,"all_terms":false,"order":"count"}}}} 
```

结果：

```
{"el_ids":{"_type":"terms","missing":0,"total":16672,"other":16657,"terms":[{"term":"quis","count":15}]}} 
```

好的，很好，id 为“quis”的内容有 15 次点击，因为`order`它`count`应该是我的顶级内容。现在让我们获取前 5 条内容。

询问：

```
{"facets":{"el_ids":{"terms":{"field":"el_id","size":5,"all_terms":false,"order":"count"}}}} 
```

结果（只是方面）：

```
[
  {"term":"qgz9","count":26},
  {"term":"quis","count":15},
  {"term":"hnqn","count":15},
  {"term":"higp","count":15},
  {"term":"csns","count":15}
] 
```

嗯？那么 ID 为“qgz9”的内容的点击率更高，达到 26 次？为什么它不是第一个查询中的最高结果？

好的，现在让我们进入前 100 名。

询问：

```
{"facets":{"el_ids":{"terms":{"field":"el_id","size":100,"all_terms":false,"order":"count"}}}} 
```

结果（只是方面）：

```
[
  {"term":"qgz9","count":43},
  {"term":"difc","count":37},
  {"term":"zryp","count":31},
  {"term":"u65r","count":31},
  {"term":"sxsi","count":31},
  ...
] 
```

那么现在“qgz9”有 43 次点击而不是 26 次？这个怎么可能？我可以向您保证，在后台修改索引时不会发生任何事情。如果我重复这些查询，我会得到相同的结果。

当我重复这个增加结果大小的过程时，计数继续变化，新的内容 ID 出现在顶部。有人可以向我解释我做错了什么，或者我对它如何工作的理解存在缺陷吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T16:31:07.760

事实证明，这是一个[已知问题](https://github.com/elasticsearch/elasticsearch/issues/1305)：

> ...现在前 N 个方面的工作方式是从每个分片中获取前 N 个，然后合并结果。这可能会给出不准确的结果。

默认情况下，我的索引是用 5 个分片创建的。通过更改这一点，索引只有一个分片，计数的行为符合我的预期。另一种解决方法是始终设置`size`为大于预期构面数量的值并剥离前 N 个结果。

# mysql - 使用mysql获取日期之间的错过日期

> ID：11375186
> 
> 赞同：0
> 
> 时间：2012-07-07T12:58:21.730
> 
> 标签：mysql

获取一组日期之间的错过日期。我想在从日期到日期之间获取错过日期。我是 mysql 的新手，请帮助我获取日期之间的错过日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T13:05:59.003

这里有一个类似的步骤：[获取两个日期之间的日期列表](https://stackoverflow.com/questions/510012/get-a-list-of-dates-between-two-dates)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T14:39:53.577

这个答案是从上面引用的答案中巧妙地扯掉了[paxdiablo](https://stackoverflow.com/users/14860/paxdiablo)的[答案](https://stackoverflow.com/questions/510012/get-a-list-of-dates-between-two-dates)。

我所做的只是添加了一些测试数据和一个使用左外连接查找缺失日期的示例查询。我在您的评论中使用了测试数据，即

> “假设我的表有 01-01-2012,01-02-2012,01-04-2012,01-05-2012 和 01-07-2012。现在我想得到 01-03-2012 和 01-06- 2012\. 我怎么能得到这个”

你只需要找到一种填充`all_dates`表格的方法。这有点取决于什么构成了您的“全套日期”。未来的每个日期？未来每个月的第一天？过去和未来的每个日期？过去和未来每个月的第一天？在这里由你决定。我以 2012 年每个月的第一天为例：

```
create table all_dates
(id int unsigned not null primary key auto_increment,
a_date date not null,
unique key `all_dates_uidx1`(a_date));

-- First day of every month in 2012    
insert into all_dates (a_date) values ('2012-01-01');
insert into all_dates (a_date) values ('2012-02-01');
insert into all_dates (a_date) values ('2012-03-01');
insert into all_dates (a_date) values ('2012-04-01');
insert into all_dates (a_date) values ('2012-05-01');
insert into all_dates (a_date) values ('2012-06-01');
insert into all_dates (a_date) values ('2012-07-01');
insert into all_dates (a_date) values ('2012-08-01');
insert into all_dates (a_date) values ('2012-09-01');
insert into all_dates (a_date) values ('2012-10-01');
insert into all_dates (a_date) values ('2012-11-01');
insert into all_dates (a_date) values ('2012-12-01');

-- Note that my_dates table is missing 2012-03-01 and 2012-06-01
create table my_dates
(id int unsigned not null primary key auto_increment,
a_date date not null);

insert into my_dates (a_date) values ('2012-01-01');
insert into my_dates (a_date) values ('2012-02-01');
insert into my_dates (a_date) values ('2012-04-01');
insert into my_dates (a_date) values ('2012-05-01');
insert into my_dates (a_date) values ('2012-07-01');
insert into my_dates (a_date) values ('2012-08-01');
insert into my_dates (a_date) values ('2012-09-01');
insert into my_dates (a_date) values ('2012-10-01');
insert into my_dates (a_date) values ('2012-11-01');
insert into my_dates (a_date) values ('2012-12-01');

-- Get me the dates in all_dates that are not present in my_dates 
-- i.e. missing dates
select ad.a_date
from all_dates ad
left join my_dates md on ad.a_date = md.a_date
where md.a_date is null; 
```

# c# - 如何调整图像大小并保存在文件夹中？

> ID：11375187
> 
> 赞同：1
> 
> 时间：2012-07-07T12:58:23.210
> 
> 标签：c#, image-resizing

我试过这个：

```
string str = System.IO.Path.GetFileName(txtImage.Text);
string pth = System.IO.Directory.GetCurrentDirectory() + "\\Subject";
string fullpath = pth + "\\" + str;

Image NewImage = clsImage.ResizeImage(fullpath, 130, 140, true);
NewImage.Save(fullpath, ImageFormat.Jpeg); 
```

* * *

```
public static Image ResizeImage(string file, int width, int height, bool onlyResizeIfWider)
{
    if (File.Exists(file) == false)
        return null;
    try
    {
        using (Image image = Image.FromFile(file))
        {
            // Prevent using images internal thumbnail
            image.RotateFlip(RotateFlipType.Rotate180FlipNone);
            image.RotateFlip(RotateFlipType.Rotate180FlipNone);
            if (onlyResizeIfWider == true)
            {
                if (image.Width <= width)
                {
                    width = image.Width;
                }
            }
            int newHeight = image.Height * width / image.Width;
            if (newHeight > height)
            {
                // Resize with height instead
                width = image.Width * height / image.Height;
                newHeight = height;
            }
            Image NewImage = image.GetThumbnailImage(width, newHeight, null, IntPtr.Zero);
            return NewImage;
        }
    }
    catch (Exception )
    {
        return null;
    }
} 
```

运行上面的代码，我得到了一个 4-5 KB 大小的图像，图像质量很差。原始图像文件的大小不超过 1.5 MB。如何提高结果的图像质量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T13:05:30.757

我认为你应该使用[Image Resizer](http://imageresizing.net/)，它免费和调整图像大小非常容易使用。

```
var settings = new ResizeSettings {
MaxWidth = thumbnailSize,
MaxHeight = thumbnailSize,
Format = "jpg"
};
settings.Add("quality", quality.ToString());
ImageBuilder.Current.Build(inStream, outStream, settings);
resized = outStream.ToArray(); 
```

您也可以使用 Nuget 包管理器安装它。

```
PM> Install-Package ImageResizer 
```

# android - android中的增量问题

> ID：11375194
> 
> 赞同：1
> 
> 时间：2012-07-07T12:59:50.103
> 
> 标签：android

我想在我的问题中增加“单位”的价值

```
public void fetchunit()
{
    CardDatabase carddb =new CardDatabase(getApplicationContext());
    carddb.open();

    Cursor c=carddb.selectAll();

//  c.moveToFirst();

     c.moveToFirst();
    int count = c.getCount();
        Log.e("card", c.getString(0));

        inflateRecord(c.getString(0),c.getString(1));
        c.moveToNext();

        unit=c.getString(0);

        c.close();
    carddb.close();
}
int count;
public void getunit()
{
    CardDatabase carddb =new CardDatabase(getApplicationContext());
    carddb.open();
    Cursor c=carddb.getrecord(unit);

//  c.moveToFirst();

    // c.moveToFirst();
     count = c.getCount();
        Log.e("card", c.getString(0));
        inflateRecord(c.getString(0),c.getString(1));
        c.moveToNext();

        c.close();
    carddb.close();

} 
```

当我调用 getunit() 时，“单位”中没有增量......所以当我调用 getunit() 时它总是给出相同的值

```
public void bottom2top(View v) {
    // TODO Auto-generated method stub
     switch(v.getId()){
        case R.id.img3:

            getunit();

    break;

     }
} 
```

请建议我该怎么做...谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T14:18:08.723

当您关闭光标时，`c.close()`您将丢失有关光标位置的任何信息。

您应该：

*   使用主键检索特定记录

或者

*   检索所有记录并将它们作为 ArrayList 返回

# jquery - 带有 Wordpress 和 imagesLoaded 的 jQuery 砌体

> ID：11375195
> 
> 赞同：2
> 
> 时间：2012-07-07T13:00:00.497
> 
> 标签：jquery, wordpress, jquery-masonry

我在我正在研究的 wordpress 主题上使用 jquery masonry。在努力让它工作一段时间后，我发现：

```
 <script type="text/javascript">
        jQuery(function () { 
          jQuery('#masonry-wrap').masonry({ 
           itemSelector: '.masonry-box', 
           columnWidth: 283 
          }); 
        })
        </script> 
```

似乎对我来说工作正常......但是在 Chrome 和 Safari 中检查网站会将包含元素的底部推入以下元素......

现在我在某处读到，这可以通过使用 imagesLoaded 插件和我在这里找到的代码来解决：http://masonry.desandro.com/demos/images.html [-](http://masonry.desandro.com/demos/images.html)但是因为我对 jQuery 非常糟糕，我让它工作起来有点困难。

谁能帮我将它合并到我已经在使用的代码中并且有效（上面的那个）？

任何帮助将不胜感激！！朱利安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T14:18:18.137

我认为这应该对你有用；

```
// Masonry Trigger
var $container = jQuery('#masonry-wrap');

$container.imagesLoaded( function(){
   $container.masonry({ 
     itemSelector: '.masonry-box', 
     columnWidth: 283 
   }); 
}) 
```

记得使用最新版本的 imagesLoaded，前段时间我遇到了问题，原因是我的版本有点过时了。

编辑

也就是说，我只在通过 AJAX 加载新内容并使用 reLayout 方法时才使用 imagesLoaded。如果您在加载图像后在 $window.load() 上运行 masonry，它也应该可以正常运行。

```
(function($){

    $(window).load(function() {

      // Masonry Trigger
      var $container = $('#masonry-wrap');

      $container.masonry({
         // options
         itemSelector: '.masonry-box', 
         columnWidth: 283 
      });

    }); 

})(jQuery); 
```

# c# - 如何转换为 IEnumerable 在 simple.data 中？

> ID：11375196
> 
> 赞同：3
> 
> 时间：2012-07-07T13:00:02.747
> 
> 标签：c#, simple.data

我在 simple.data 中有这个查询

```
var db = Database.Open();
IEnumerable<Guid> recetas = db.Factura
    .All()
    .Where(db.Factura.ObraSocialPlan_id == obraSocialPlanId)
    .Select(db.Factura.Id)
    .Cast<Guid>(); 
```

我得到

> 无法将类型隐式转换`'Simple.Data.SimpleRecord'`为`'System.Guid'`

我应该如何更改查询？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-07T13:44:47.477

您不能对可枚举执行此操作，但可以将其具体化为如下列表：

```
var db = Database.Open();
IEnumerable<Guid> recetas = db.Factura
    .All()
    .Where(db.Factura.ObraSocialPlan_id == obraSocialPlanId)
    .Select(db.Factura.Id)
    .ToScalarList<Guid>(); 
```

如果你想要懒惰，所以你可以在没有实际运行查询的情况下传递可枚举的地方，请在 GitHub 页面上提出问题：http: [//github.com/markrendle/Simple.Data/issues](http://github.com/markrendle/Simple.Data/issues)

谢谢。

# makefile - 如何修复此 valgrind OS X 10.7.4 错误？

> ID：11375207
> 
> 赞同：0
> 
> 时间：2012-07-07T13:01:09.097
> 
> 标签：makefile, osx-lion, valgrind

我正在尝试在 OS X 10.7.4 中安装 valgrind。

我按照[这些](http://valgrind.org/downloads/repository.html)说明进行操作。在我运行之前一切都很好`make`，这给了我这个错误：

```
...
Making all in coregrind
(cd m_mach && mig /usr/include/mach/mach_vm.defs /usr/include/mach/task.defs /usr/include/mach/thread_act.defs /usr/include/mach/vm_map.defs)
2012-07-07 20:45:26.771 xcodebuild[82091:70b] [MT] DVTAssertions: ASSERTION FAILURE in /SourceCache/DVTFoundation/DVTFoundation-580/Framework/Classes/DeveloperStructure/DVTPlatform.m:430
Details:  The Mac OS X platform is missing - cannot set a default platform.
Object:   <DVTPlatform>
Method:   +loadAllPlatforms
Thread:   <NSThread: 0x40010a220>{name = (null), num = 1}
Hints: None
Backtrace:
  0  0x00000001023d4448 -[DVTAssertionHandler handleFailureInMethod:object:fileName:lineNumber:messageFormat:arguments:] (in DVTFoundation)
  1  0x00000001023d4304 _DVTAssertionFailureHandler (in DVTFoundation)
  2  0x00000001023735de +[DVTPlatform loadAllPlatforms] (in DVTFoundation)
  3  0x000000010255985e IDEInitialize (in IDEFoundation)
  4  0x00000001028d374c -[Xcode3CommandLineBuildTool run] (in Xcode3Core)
  5  0x000000010236bd9f (in xcodebuild)
  6  0x000000010236bc28 (in xcodebuild)
  7  0x0000000000000005
/Developer/usr/bin/xcodebuild fails with 6 - Device not configured
/usr/bin/mig: line 174: : command not found
mig: fatal: "<no name yet>", line -1: no SubSystem declaration
make[2]: *** [m_mach/mach_vmUser.c] Error 1
make[1]: *** [all-recursive] Error 1
make: *** [all] Error 2 
```

我发现[这篇](http://sourceforge.net/mailarchive/forum.php?thread_name=CAO4XC0vt4V25M-cGJ-t-f_8Ke7hnEkgSsHUu%3DAnSpqMsa-kZwA%40mail.gmail.com&forum_name=valgrind-users)文章表明它可能是 Xcode 路径的问题，但路径似乎是正确的，如下所示：

```
$ xcode-select -print-path
/Developer 
```

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:53:13.797

在 OS X 10.7.5 上使用 Xcode 4.6，我发现我必须运行：

```
xcode-select /Applications/Xcode.app 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T15:02:30.520

原来我的 Xcode 安装是旧的。更新到当前安装后一切正常。

# javascript - 启用用户交互的 Javascript

> ID：11375209
> 
> 赞同：0
> 
> 时间：2012-07-07T13:01:22.357
> 
> 标签：javascript, jquery, objective-c, ios, uiwebview

我正在编写一个 Javascript 应用程序，并将其包装在一个原生 iOS 应用程序中。我想在事件发生后阻止用户在包含 JS 应用程序的 UIWebView 上进行一两秒钟的交互。

通常我会使用 self.webView.userinteractionenabled = NO 但事件是在 Javascript 中触发的。如何阻止用户与 Web 视图交互？

猜测在某种触摸事件上返回 false？我想阻止它滚动。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T14:14:57.100

当事件发生在您的 Javascript 代码中时，您可以使用以下方法向本机包装器发送消息：

设置以下 UIWebViewDelegate 方法（不要忘记为 UIWebView 设置委托）：

```
- (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType {
   NSURL *url = [request URL];
   if ([[url scheme] isEqualToString:@"block"]) {
      // do the your blocking code here
      return NO;
   }

   return YES;
} 
```

现在，当您的事件发生时，请从您的 javascript 代码中调用委托方法：

```
window.location.href = "block://"; 
```

# unix - NF > 0 在 UNIX 编程环境中检查了两次

> ID：11375210
> 
> 赞同：2
> 
> 时间：2012-07-07T13:02:18.673
> 
> 标签：unix, awk

我正在阅读 The UNIX Programming Environment 和第 4.4 节，关于 awk，有这个示例代码：

```
 awk '
    FILENAME != prevfile {   # new file
        NR = 1               # reset line number
        prevfile = FILENAME
    }
    NF > 0 {
        if ($1 == lastword)
            printf "double %s, file %s, line %d\n",$1,FILENAME,NR
        for (i = 2; i <= NF; i++)
            if ($i == $(i-1))
                printf "double %s, file %s, line %d\n",$i,FILENAME,NR
        if (NF > 0)
            lastword = $NF
    }' $* 
```

为什么在已经有 NF > 0 作为模式的块内测试 NF > 0？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T04:21:26.520

包含在本书的[勘误注释中：](http://www.cs.bell-labs.com/cm/cs/upe/errata.html)

```
Page 121, first program: test "if (NF > 0)" is unnecessary. 
```

所以这是出版商和/或文案编辑犯的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T14:27:33.757

NF > 0 用于检查此行中是否有任何字段，因为 NF 可能为 0。

我给你举个例子：

```
awk '{print "hello";}' -
1
hello

hello 
```

当我写“1”时，块被执行（打印“hello”），当我输入一个空行时我再次被执行（第二个“hello”）

如果我将代码更改为：

```
awk 'NF > 0 {print "hello";}' -
1
hello 
```

当输入为空行时，它不会显示第二个“hello”，因为 NF 为 0。

# javascript - Node.js expressjs 存储和显示 html 页面的最快方式

> ID：11375212
> 
> 赞同：0
> 
> 时间：2012-07-07T13:02:33.050
> 
> 标签：javascript, html, node.js, express, sendfile

我想用 expressjs 显示一个静态 HTML 页面。最快的方法是什么？目前我有一个 html 文件存储在文件系统中，我正在使用`res.sendfile(home + "/public/file.xml")`

sendfile 是最快的方法还是将文件存储在某种数据库中会更快？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T14:33:48.017

将文件存储在数据库中？好吧，有些人试图做这种*邪恶的*事情。但重点是什么？我的意思是数据库引擎也必须从磁盘读取文件。此外，还必须做许多其他事情，使加载过程更长。

现在你似乎混淆了一些事情。发送文件与发送任何其他响应相同。**在某些时候，您必须发送二进制数据**，因此您无法避免使用`res.send`（或任何其他形式）。当然，如果我们谈论的是 Node.js，因为您可能会考虑通过*nginx*提供文件，这可能是最好的静态文件服务器。

最后一件事：如果您仍想通过 Node.JS 提供文件，那么您可以考虑将它们缓存在内存中。这当然取决于您要服务的文件数量和大小。这就像创建保存数据并在有请求时发送数据的全局变量一样简单。这是您可以使用 Node.JS 实现的唯一真正的性能提升。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T13:55:43.480

Express 支持静态文件服务：`app.use(express.static(__dirname + '/public'));`.

# android - 一个android应用，两个启动视图，两个两个图标

> ID：11375220
> 
> 赞同：0
> 
> 时间：2012-07-07T13:03:08.313
> 
> 标签：android

我有我的简单记事本应用程序。它在启动时显示输入文本和保存按钮。一切正常。

现在我想保留所有应用程序逻辑，但使用“第二个图标”以其他初始视图启动我的应用程序（我想设置仅对输入文本进行过滤的数字）。

换句话说：

*   第一个图标运行一般记事本应用程序，用户可以输入他想要的一切
*   第二个图标运行只接受数字的 notpad。

是否有任何方法可以创建第二个图标/小部件 w/e 以通知应用程序它应该以其他方式运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T13:07:46.280

向您的应用程序添加另一个活动，

还将该活动添加到 AndroidManidest 与

不同的图标和意图过滤器作为 action=main 和 catagory=LAUNCHER

看看：

```
<application
        android:label="@string/app_name" >
        <activity
            android:icon="@drawable/ICON1"
                                    ^^^^^^
            android:name=".FirstActivity"
                           ^^^^^^
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:icon="@drawable/ICON222"
                                    ^^^^^^^^
            android:name=".SecondActivity"
                           ^^^^^^
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application> 
```

如果需要，还为仅数字类型输入添加另一个 XML。

# php - Cron 检查大型 MySQL 数据库中的日期

> ID：11375221
> 
> 赞同：0
> 
> 时间：2012-07-07T13:03:09.150
> 
> 标签：php, mysql, cron

我有一个数据库，其中各种表中的大约 8 个字段是日期，需要每天检查它们是否即将过期或已经过期。

我想使用 CRON 作业来实现这一点，但请记住，数据库最终可能会有 50,000 行更多。运行检查所有日期的脚本很可能会超时。

我正在考虑将搜索脚本分割成块。所以它将运行几千行然后停止。然后五分钟后，通过查询数据库中存储上次完成位置的字段，从它离开的地方拿起。一旦它遍历所有行就停止。

但我不知道这是否明智，甚至可能让脚本在 5 分钟内再次运行。

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T13:09:58.190

您不必遍历整个表。您可以为此运行查询吗？

```
SELECT something FROM tbl_name WHERE NOW() >= date_col; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T13:22:22.533

使用[mysql 事件调度程序](http://dev.mysql.com/doc/refman/5.5/en/events.html)来做到这一点。
此代码将创建一个事件，该事件将每天自动执行一次，以从您的表中删除过时的记录：

```
DELIMITER //
CREATE EVENT myevent
ON SCHEDULE AT CURRENT_TIMESTAMP + INTERVAL 1 DAY
ON COMPLETION PRESERVE
DO BEGIN
 DELETE FROM mytable WHERE col1<NOW();
 DELETE FROM mytable WHERE col2<NOW();
 DELETE FROM mytable WHERE col3<NOW();
 DELETE FROM mytable WHERE col4<NOW();
 DELETE FROM mytable WHERE col5<NOW();
 DELETE FROM mytable WHERE col6<NOW();
 DELETE FROM mytable WHERE col7<NOW();
 DELETE FROM mytable WHERE col8<NOW();
END//
DELIMITER ; 
```

文档：
[创建事件](http://dev.mysql.com/doc/refman/5.5/en/create-event.html)
[开始...结束](http://dev.mysql.com/doc/refman/5.5/en/begin-end.html)

# php - 找不到类 PHP OOP

> ID：11375225
> 
> 赞同：0
> 
> 时间：2012-07-07T13:04:00.633
> 
> 标签：php, oop, autoloader

我不能让它工作。

```
<?php

        function __autoload($classname){
            include 'inc/classes/' . $classname . '.class.php';
        }

__autoload("queries")

$travel = new queries();
echo $travel->getPar("price");

?> 
```

这是 inc/classes/queries.class.php 文件。

```
<?

 class queries {

        function getPar($par, $table='travel', $type='select') {

            $result = $db->query("
             $type *
             FROM $table
             WHERE
             $par LIKE
            ");
            while ($row = $result->fetch_assoc()) {

                return "
                 $row[$par]
                ";
            }

    }
}

?> 
```

它返回“找不到类'查询'”。它出什么问题了？

编辑：

致命错误：无法在第 5 行的 /index.php 中重新声明 __autoload()（之前在 /index.php:5 中声明）

我勒个去？我不能重新声明已经在自己的行中声明的函数，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T13:07:13.843

试试看（没有类自动加载）：

```
function __autoload($classname){
    include_once 'inc/classes/' . $classname . '.class.php';
}
$travel = new queries(); 
```

另请参阅此[链接](http://php.net/manual/en/language.oop5.autoload.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T13:59:20.847

而不是那种可怕的可憎，你应该学习如何利用[`spl_autoload_register()`](http://uk.php.net/manual/en/function.spl-autoload-register.php)：

```
spl_autoload_register( function( $classname ){

    $filename = 'inc/classes/' . $classname . '.class.php';

    if ( !file_exists( $filename) ){
        throw new Exception("Could not load class '$classname'.". 
                            "File '$filename' was not found !");
    }

    require $filename;

}); 
```

并且您应该在您的`index.php`or`bootstrap.php`文件中注册自动加载器，并且每个加载器只执行一次（此功能允许您定义多个加载器，但是当您有第三方库时使用它，它有自己的自动加载器......就像在 SwiftMailer 的情况下） .

PS 请学习在MySQLi 或 PDO中使用**准备好的语句。**

**更新**

由于您刚刚学习 OOP，所以这里有几件事可能对您有用：

讲座：

*   [高级 OO 模式](http://www.phpconference.co.uk/talk/advanced-oo-patterns)
*   [继承、多态性和测试](http://www.youtube.com/watch?v=4F72VULWFvc)
*   [识别臭代码](http://www.youtube.com/watch?v=wmgnFbsaPvo)
*   [全局状态和单例](http://www.youtube.com/watch?v=-FRm3VPhseI)
*   [不要找东西！](http://www.youtube.com/watch?v=RlfLCWKxHJ0)

图书：

*   [PHP 面向对象的解决方案](https://rads.stackoverflow.com/amzn/click/com/1430210117)
*   [企业应用架构模式](https://rads.stackoverflow.com/amzn/click/com/0321127420)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T14:04:05.953

从你的代码中删除这一行`__autoload("queries")`，你不需要调用自动加载器，它会在遇到任何未声明的类时自行调用，如果你的路径是否正确，请使用 require_once 而不是包含和调试。

# objective-c - 在使用 RestKit 的单元测试中伪造 http 连接

> ID：11375228
> 
> 赞同：0
> 
> 时间：2012-07-07T13:04:13.910
> 
> 标签：objective-c, ios, restkit

我想运行单元测试，使用 RestKit 加载对象（到 CoreData）。但我不希望我的单元测试（或 RestKit）实际连接到服务器，因为服务器可能无法访问。

如何告诉 RestKit 使用夹具（预定义的 json 文件）作为响应，而不是连接到远程服务器？我知道 RKFixture 和[使用 RestKit 进行单元测试，](https://github.com/RestKit/RestKit/wiki/Unit-Testing-with-RestKit "使用 RestKit 进行单元测试")但这并不能解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T20:27:11.247

[该](https://stackoverflow.com/questions/10191714/asihttprequest-backed-restkit-object-mapping)线程中给出的最后一个答案可能对您的特定问题有用。顺便说一句，你看过[GHUnit](https://github.com/gabriel/gh-unit)吗？这是一个非常好的单元测试框架，允许异步单元测试。通常，无论如何都应该测试服务器故障。

如果您的单元测试旨在测试映射功能，那么您也可以使用以下方法：

```
//Create object mapper
RKObjectMapper* mapper = [RKObjectMapper mapperWithObject: obj  mappingProvider:mappingProvider];
mapper.context = RKObjectMappingProviderContextObjectsByKeyPath;

//Perform mapping
RKObjectMappingResult* mappingResult = [mapper performMapping];

NSArray *results = [mappingResult asCollection] 
```

这基本上就是 RKObjectLoader 内部发生的事情。这里 obj 是您可以使用测试数据创建的一些已解析的 JSON 对象（NSDictionary 或 NSArray）。

# php - 是否可以对这个数组进行分组？

> ID：11375230
> 
> 赞同：0
> 
> 时间：2012-07-07T13:04:48.477
> 
> 标签：php, arrays, grouping

我有一个数组，我需要在一个多级数组中对该数组进行排序。我正在尝试按其字段对其进行分组，但我可以使其工作。这是我拥有的数组的示例以及我想要的

```
Array
(
    [0] => Array
        (
            [id] => sports
            [title] => this is sports
        )

    [1] => Array
        (
            [id] => cricket
            [title] => this is cricket
            [under] => sports
        )

    [2] => Array
        (
            [id] => batsman
            [title] => this is batsman
            [under] => cricket
        )

    [3] => Array
        (
            [id] => sachin
            [title] => this is sachin
            [under] => batsman
        )

    [4] => Array
        (
            [id] => football
            [title] => this is football
            [under] => sports
        )

    [5] => Array
        (
            [id] => ronaldo
            [title] => this is ronaldo
            [under] => football
        )

) 
```

我需要对这个数组进行分组并使它像这样

```
Array(
    [0] => Array(
        [id] => Array(
            [sports] => Array(
                [cricket] => Array(
                    [batsman] => sachin
                )
                [football] => fun
            )
        )
    )
) 
```

我试过这样的东西，但它不工作

```
foreach($my_array as $item) {
    //group them by under
    $my_grouped_array[$item['under']][] = $item;
} 
```

任何建议都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T07:11:32.123

我写了一个递归函数，可以做你想做的事，但请记住，如果你有多个分支的最后一个元素，则只会保存第一个元素。

这是功能：

```
function rearrange(&$result, $my_array, $element = NULL)
{
        $found = 0;
        $childs = 0;
        foreach($my_array as $one) if(@$one['under'] == $element)
        {
                $found++;
                if( ! is_array($result)) $result = array();
                $result[$one['id']] = $one['id'];

                $childs += rearrange($result[$one['id']], $my_array, $one['id']);
        }
        if( ! $childs AND is_array($result))
                $result = reset($result);

        return $found;
} 
```

你可以这样称呼它：

```
$result = array(array('id' => array()));
rearrange($result[0]['id'], $my_array);
print_r($result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T09:39:58.057

我认为这是最直接的方法：

```
function getChildren($entry,$by_parent){
    $children = array();
    if (isset($by_parent[$entry['id']])){
        foreach ($by_parent[$entry['id']] as $child){
            $id = $child['id'];
            $children[$id] = getChildren($child,$by_parent);
        }
    }
    return $children;
}

$by_parent = array();
$roots = array();
foreach ($array as $entry){
    if (isset($entry['under'])){
        $by_parent[$entry['under']][] = $entry;
    } else {
        $roots[] = $entry;
    }
}
$result = array();
foreach ($roots as $entry){
    $id = $entry['id'];
    $result[$id] = getChildren($entry,$by_parent);
}
$results = array(array('id'=>$results)); 
```

注意：这不是问题中指定的格式，但问题*没有*定义如何处理具有相同父级的多个叶节点，无论如何这应该更容易遍历，因为它更一致。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-07T13:12:12.417

使用 php 对象：

```
 function populateArray($my_array) {
    //Populate the array
    while ($my_array as $item) {
            $array[$item->id]['id'] = $obj->id;
            $array[$item->id]['name'] = $obj->name;
        }  
     return $array;
     }

$a = populateArray($array);    
echo $a[0]['id'].'<br />';
echo $a[0]['name'].'<br />'; 
```

或使用新的 foreach

# javascript - 使用 css 或 javascript 或 jquery 的后折角

> ID：11375232
> 
> 赞同：1
> 
> 时间：2012-07-07T13:04:56.133
> 
> 标签：javascript, jquery, css

如何使用 CSS、JQUERY 或 Javascript 为如下菜单创建后折角。或者是否有任何类型的库允许这样做。

非常感谢

![折叠角菜单](../Images/023b8a7927afb419db761c706a3a01b7.png)

# java - 如何在 Eclipse 中直接从文件中输入标准

> ID：11375238
> 
> 赞同：0
> 
> 时间：2012-07-07T13:05:57.547
> 
> 标签：java, eclipse

我们如何在 Eclipse 中从文件中获取输入？
就像我们从命令行从文件中引导 I/O 一样。
**java MyProgram < input.txt >output.txt**
我无法直接输入。
但输出指导很容易。只需 go-> **Run->Run->Configurations->Common**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T13:14:13.710

你为什么不使用`File`而不是重定向？
您的程序将有一个`fileName`作为输入，然后将结果写入文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T13:24:37.383

如果您需要使用默认值`in`，您可以执行以下操作：

```
System.setIn(new FileInputStream("testFile.txt")); 
```

其工作原理示例如下：

```
import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStreamReader;

public class TestSystemIn {

    public static void main(final String[] args) throws IOException {
        // prepare test
        FileOutputStream fos = new FileOutputStream("testFile.txt");
        fos.write("testToken".getBytes());

        // configure env
        System.setIn(new FileInputStream("testFile.txt"));

        // perform read test
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        System.out.println("read: " + br.readLine());
    }

} 
```

输出可以使用相同的方式完成：

```
System.setOut(new PrintStream("testFile.txt")); 
```

# javascript - 如何调试 JavaScript 闭包？

> ID：11375243
> 
> 赞同：0
> 
> 时间：2012-07-07T13:06:40.173
> 
> 标签：javascript, jquery, closures

1.  问题是为什么要调试成函数，我们怎么知道函数引用的闭包内容？

    我知道谷歌浏览器会在“范围变量”部分显示一个闭包，但是其他浏览器呢？（更新：FF有类似的东西，但不叫它“闭包”，就像局部变量一样）

2.  第一个问题的动机实际上是在阅读 <Learning jQuery,3rd edition> - 附录 A 时出现的。

    在第 355 页，作者说由于循环引用（单击处理程序引用具有 DOM 按钮的闭包内容），以下代码片段将导致 IE 内存泄漏。

    我只是好奇是否通过调试关闭内容的点击处理程序是这种情况。但是谷歌浏览器没有显示任何关闭变量。

    因此，我想知道作者如何知道循环引用问题..

* * *

```
$(document).ready(function() {
  var button = document.getElementById('button-1');
  button.onclick = function() {
    $.print('hello');
    return false;
  };
}); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T13:38:30.163

我会推荐你​​使用 Firebug 来调试你的代码。它最好的插件没有问题的确切答案，但您可能想看看这些链接。

[在 JavaScript 中调试内存泄漏的工具](https://stackoverflow.com/questions/3573252/tools-for-debugging-memory-leaks-in-javascript)

[如何在 firebug 中跟踪或调试 javascript 闭包](https://stackoverflow.com/questions/8921291/how-to-trace-or-debug-javascript-closures-in-firebug)

[在 javascript 中调试闭包](https://stackoverflow.com/questions/9379612/debugging-closures-in-javascript)

您甚至可以查看[YouTube](http://www.youtube.com/watch?v=OxW1dCjOstE&lr=1&uid=_x5XG1OV2P6uZZ5FSM9Ttw)链接以获取更多信息。

希望我已经尝试回答有用的东西。

# ubuntu - 使用 cmake 时出错

> ID：11375245
> 
> 赞同：1
> 
> 时间：2012-07-07T13:07:07.733
> 
> 标签：ubuntu, opencv, cmake

我刚刚安装了 OpenCV 并一直在尝试执行 DsiplayImage 的示例。尝试“cmake”时出现以下错误。

> 〜/桌面$ cmake 。CMakeLists.txt:5 (target_link_libraries) 处的 CMake 错误：无法为此项目构建的目标“DisplayImage”指定链接库。
> 
> -- 配置不完整，出现错误！

以下是实际代码：displayimage.cpp

```
#include <cv.h>
#include <highgui.h>
using namespace cv;

int main( int argc, char** argv )
{
  Mat image;
  image = imread( argv[1], 1 );

  if( argc != 2 || !image.data )
    {
      printf( "No image data \n" );
      return -1;
    }

  namedWindow( "Display Image", CV_WINDOW_AUTOSIZE );
  imshow( "Display Image", image );

  waitKey(0);

  return 0;
} 
```

CmakeLists.txt

```
cmake_minimum_required(VERSION 2.8)
project( displayimage )
find_package( OpenCV REQUIRED )
add_executable( displayImage displayimage )
target_link_libraries( displayimage ${OpenCV_LIBS} ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T14:11:07.307

它应该是

```
cmake_minimum_required(VERSION 2.8)
PROJECT( displayimage )
FIND_PACKAGE( OpenCV REQUIRED )
ADD_EXECUTABLE( displayimage displayimage.cpp )
TARGET_LINK_LIBRARIES( displayimage ${OpenCV_LIBS} ) 
```

我在我的机器上尝试了这段代码，它可以工作。也许是因为所有命令都必须是大写字母！不知道，但它的工作原理欢呼:)

# java - 在特定位置设置工具提示文本

> ID：11375250
> 
> 赞同：5
> 
> 时间：2012-07-07T13:07:31.463
> 
> 标签：java, swing, jtooltip

我的输出窗口如下所示[我](http://codes-at-igit.weebly.com/uploads/1/2/2/7/12272842/output.jpg)
的完整代码是： [http](http://codes-at-igit.weebly.com/uploads/1/2/2/7/12272842/travellingsalesmanproblem.java)
://codes-at-igit.weebly.com/uploads/1/2/2/7/12272842/travellingsalesmanproblem.java 圆圈是不同的 GPS 位置。我想显示位置，即鼠标悬停在节点上时的经度和纬度。我尝试设置工具提示文本，但它没有指定文本应该出现的位置的特权。我已经用 swing Java 对其进行了编码。我在 Netbeans 7.1.2 中工作。那么我该怎么做呢？ **如何在特定位置设置工具提示文本？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T13:50:12.360

您可以简单地覆盖`public String getToolTipText(MouseEvent event)`底层 JComponent。然后根据事件的位置，您可以返回 null 或与节点相关的工具提示。

这是一个小片段，展示了这一点：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.event.MouseEvent;
import java.awt.geom.Ellipse2D;
import java.beans.Transient;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.ToolTipManager;

public class TestTooltip {

    private static class CirclePanel extends JPanel {
        private Ellipse2D circle1 = new Ellipse2D.Double(0, 0, 20, 20);
        private Ellipse2D circle2 = new Ellipse2D.Double(300, 200, 20, 20);
        private Ellipse2D circle3 = new Ellipse2D.Double(200, 100, 20, 20);

        public CirclePanel() {
            // Register the component on the tooltip manager
            // So that #getToolTipText(MouseEvent) gets invoked when the mouse
            // hovers the component
            ToolTipManager.sharedInstance().registerComponent(this);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            // Simple paint of 3 circles on the component
            g.setColor(Color.RED);
            Graphics2D g2 = (Graphics2D) g;
            g2.fill(circle1);
            g2.fill(circle2);
            g2.fill(circle3);
        };

        /**
        * This method is called automatically when the mouse is over the component.
        * Based on the location of the event, we detect if we are over one of 
        * the circles. If so, we display some information relative to that circle
        * If the mouse is not over any circle we return the tooltip of the 
        * component.
        */
        @Override
        public String getToolTipText(MouseEvent event) {
            Point p = new Point(event.getX(), event.getY());
            String t = tooltipForCircle(p, circle1);
            if (t != null) {
                return t;
            }
            t = tooltipForCircle(p, circle2);
            if (t != null) {
                return t;
            }
            t = tooltipForCircle(p, circle3);
            if (t != null) {
                return t;
            }
            return super.getToolTipText(event);
        }

        @Override
        @Transient
        public Dimension getPreferredSize() {
            // Some size we would like to have
            return new Dimension(350, 350);
        }

        protected String tooltipForCircle(Point p, Ellipse2D circle) {
            // Test to check if the point  is inside circle
            if (circle.contains(p)) {
                // p is inside the circle, we return some information 
                // relative to that circle.
                return "Circle: (" + circle.getX() + " " + circle.getY() + ")";
            }
            return null;
        }
    }

    protected void initUI() {
        JFrame frame = new JFrame("Test tooltip");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel panel = new CirclePanel();
        frame.add(panel);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestTooltip().initUI();
            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-30T13:51:22.427

尝试覆盖 getToolTipLocation()，例如：

```
JButton buttonAbove = new JButton("Above") {
      public Point getToolTipLocation(MouseEvent e) {
        return new Point(20, -30);
      }
    }; 
```

从这里：[http ://www.java2s.com/Code/Java/Swing-JFC/ToolTipLocationExample.htm](http://www.java2s.com/Code/Java/Swing-JFC/ToolTipLocationExample.htm)

# php - PHP制作目录文件夹

> ID：11375255
> 
> 赞同：0
> 
> 时间：2012-07-07T13:07:53.770
> 
> 标签：php

我已经定义了要在我的 mkdir 方法中创建的所选文件夹名称。但错误说“mkdir（）：没有这样的文件或目录”。如果我删除了“/”。“文件夹”。“/”，目录是正确的。

```
Updated Working code:
$Name = "John";
if(!is_dir("document/".$Name))
{
$dir = "documents/".$Name."/";
    mkdir($dir,0777,true);
    $dir2 = $dir."Folder/";
    mkdir($dir2);
    move_uploaded_file($_FILES["file"]["tmp_name"],$dir2."/".$_FILES["file"]["name"]);

} 
```

感谢 xdazz！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T13:11:28.637

Try `mkdir($dir,0777, true);`，`"document/".$Name`还不是 dir ，所以你需要使 dir recursive 。

# java - 在大文本文件中搜索（java）

> ID：11375256
> 
> 赞同：1
> 
> 时间：2012-07-07T13:07:57.703
> 
> 标签：java, search, large-files

因此，我有一个包含 70,000 行的字典文件，按字母顺序排列。每一行都是一个带有翻译的单独单词。作为在此类文件中搜索的最佳做法，您会推荐什么？我正在考虑对文件进行索引，但可能有更好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T13:12:35.347

首先，使用 Java NIO 的内存映射文件支持对其进行内存映射。其次，对其进行预处理以查找新条目开始的所有偏移量。最后，编写一些可以找到条目的二进制搜索代码。我认为这可能是最轻量级和内存效率最高的解决方案。

Lucene 还使用了跳过列表：您可以另外在内存中缓存每 16 个（左右）条目，并在二分搜索的第一阶段使用它。然后，您将不得不转到实际文件，仅将确切条目归零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T13:11:03.560

可能是解决方案的项目是[Lucene](http://lucene.apache.org/)

# xcode4 - Xcode 快照还原失败：“文件存在”

> ID：11375259
> 
> 赞同：1
> 
> 时间：2012-07-07T13:08:28.710
> 
> 标签：xcode4, restore, snapshot

我需要恢复今天早上用 Xcode 4.3.2 创建的快照。

出于某种原因，我已经有几天没有提交 git 并且做了一些我不想再做的重要更改。是的，我知道了...

所以我运行“恢复快照”，选择所需的，然后看到这个错误信息：

> “libxml2.dylib”无法复制到“lib”，因为已存在同名项目。

之后，恢复会静默中止（在创建新快照之后）。libxml2 当然是您可以通过 Xcode 添加的 XML 库。

实际上，在还原之前出现的文件列表中，有libxml2.dylib的2个条目。但是取消选中一个，甚至两个都没有效果。

我也试过删除项目中现有的libxml2.dylib，没有变化。项目中有一个文件夹“libs”，但没有“lib”。

任何想法如何使该错误消失或恢复到不同的位置，也许直接从快照？

谢谢你的帮助！

米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T19:36:37.647

事实证明，您可以通过 Organizer 恢复到不同的位置。

启动 Organizer，单击 Projects 选项卡，在左侧选择您的项目，然后选择您需要的快照并单击左下角的“导出快照”。

选择您要在其中恢复快照的文件夹 - 就在那里！

祝你好运，这可能对谁有用！

# php - CRON 命令每 5 分钟运行一次 URL 地址

> ID：11375260
> 
> 赞同：83
> 
> 时间：2012-07-07T13:08:49.867
> 
> 标签：php, cron

我是 cron 命令的新手，我需要帮助。

我有一个脚本`http://example.com/check/`。

cron 每 5 分钟运行一次此 URL 的命令是什么？

我试过了

> */5 * * * * /home/test/check.php

但我想运行 URL 而不是相对脚本地址。怎么做？

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2012-07-07T13:18:21.187

根据评论尝试

```
*/5 * * * * wget http://example.com/check 
```

**[编辑：2017 年 4 月 10 日]**

这个答案似乎仍然有一些点击，所以我想我会添加一个指向我偶然发现的新页面的链接，这可能有助于创建 cron 命令：[https ://crontab.guru](https://crontab.guru)

* * *

## 回答 #2

> 赞同：124
> 
> 时间：2012-07-07T13:18:18.287

使用卷曲：

```
*/5 * * * * curl http://example.com/check/ 
```

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2013-11-28T13:17:39.000

使用 curl 的另一个优点是，如果需要，您还可以保留 HTTP 向脚本发送参数的方式，通过使用`$_GET`等，`$_POST`如下所示：

```
*/5 * * * * curl --request GET 'http://exemple.com/path/check.php?param1=1&param2=2' 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2020-10-07T02:18:31.063

以下是 wget 脚本的示例：

`wget -q -O /dev/null "http://example.com/cronjob.php" > /dev/null 2>&1`

使用`-O`像上面这样的参数意味着Web请求的输出将被发送到`STDOUT`（标准输出）。

并且`>/dev/null 2>&1`将指示标准输出重定向到黑洞。因此，执行程序没有消息返回到屏幕。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-07T13:19:11.357

要运行 url，您需要一个程序来获取该 url。您可以尝试[wget](http://www.gnu.org/software/wget/)或[curl](http://curl.haxx.se/)。有关可用选项，请参阅手册。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-03-18T11:50:29.143

在我的 linux 主机上没有任何东西对我有用。他们提供的唯一可能的命令是：

```
/usr/local/bin/php absolute/path/to/cron/script 
```

和

```
/usr/local/bin/ea-php56 absolute/domain_path/path/to/cron/script 
```

这就是我让它工作的方式： 1\. 我创建了包含以下内容的简单 test.php 文件：

```
echo file_get_contents('http://example.com/check/'); 
```

2\. 我使用绝对内部路径给我的选项服务器设置 cronjob :)

```
/usr/local/bin/php absolute/path/to/public_html/test.php 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-04-24T01:22:47.393

要运行 URL，只需使用下面的命令 easy yess CPanel 100%

```
/usr/bin/php -q /home/CpanelUsername/public_html/RootFolder/cronjob/fetch.php 
```

我希望这会有所帮助。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-03-18T06:54:48.147

我尝试`GET 'http://example.com/?var=value'`重要使用`'` 添加`>/dev/null 2>&1`以在此激活时不发送电子邮件对不起我的英语

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-17T10:12:33.160

使用完美网址：

```
*/5 * * * * wget -q -O /dev/null "https://www.example.com/payment/WebhookOrderCron" > /dev/null 2>&1 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-07-23T05:55:59.700

我发现这个解决方案每 5 分钟从 cPanel 运行一个 URL，你可以通过这个命令执行任何任务。

`*/5 * * * *` 这在每 5 分钟运行一次。所以它只在一小时内运行一次

这是我用来每秒运行我的 URL 的示例

```
*/5 * * * * curl http://www.example.com/;
sleep 5m; curl http://www.example.com/; 
sleep 5m; curl http://www.example.com/; 
sleep 5m; curl http://www.example.com/; 
sleep 5m; curl http://www.example.com/; 
sleep 5m; curl http://www.example.com/; 
sleep 5m; curl http://www.example.com/; 
sleep 5m; curl http://www.example.com/; 
sleep 5m; curl http://www.example.com/; 
sleep 5m; curl http://www.example.com/; 
sleep 5m; curl http://www.example.com/; 
sleep 5m; curl http://www.example.com/; 
```

要休眠 5 秒，请使用：

```
sleep 5 
```

想睡5分钟，使用：

```
sleep 5m 
```

暂停或睡眠 5 小时，使用：

```
sleep 5h 
```

如果您不想要任何 cron 作业的电子邮件，只需将其添加到命令末尾

```
 >/dev/null 2>&1 
```

# c++ - 增强 XML 崩溃的序列化

> ID：11375266
> 
> 赞同：2
> 
> 时间：2012-07-07T13:09:58.073
> 
> 标签：c++, serialization, boost

我在尝试使用 boost 序列化对象时遇到了奇怪的崩溃。有趣的是，仅当我在发布模式下编译项目时才会出现此问题。在调试模式下，一切正常，并且 XML 文件被正确写入。

这是应该被序列化的类的代码。成员变量“weights”是指向在对象构造期间动态分配的数组的指针。

```
[...]
private:
[...]
int     numOrientations;
int     numScales;
float   thresh;
float*  weights;    

friend class boost::serialization::access;
template<class archive> void serialize(archive& ar, const unsigned int version)
{
    using boost::serialization::make_nvp;
    using boost::serialization::make_array;
    ar & make_nvp("numOrient", numOrientations);
    ar & make_nvp("numScales", numScales);
    ar & make_nvp("thresh", thresh);
    ar & make_nvp("weights", make_array(weights, numScales*4 + 1));
} 
```

整个事情被称为：

```
std::fstream mpbcstr("test.xml", std::fstream::trunc | std::fstream::out);
boost::archive::xml_oarchive xml(mpbcstr);
      <-- program executes fine until here
xml << boost::serialization::make_nvp("gpbconfig", configg);
      <-- is not reached
mpbcstr.close(); 
```

由于在调试模式下一切正常。我试图通过在每一行之后打印调试语句来确定错误的位置。我在上面的代码中标记了代码崩溃的行。有趣的是，在序列化函数中，甚至第一行都没有在崩溃之前执行。

我得到的错误是：

```
 First-chance exception at 0x000000013f4c31cd in rungpb.exe: 0xC0000005: Access violation reading location 0x000000003d4ccccd. 
```

不完全有帮助，我知道。非常感谢任何可能出现问题的建议。

# meteor - 使用meteor.js将数据插入远程MongoDB

> ID：11375270
> 
> 赞同：2
> 
> 时间：2012-07-07T13:10:02.270
> 
> 标签：meteor

我正在使用将数据插入本地 MongoDB

test.insert({"name" : "abc"});

那么有没有什么方法可以使用相同的代码将数据插入远程 MongoDB，即无需过多更改从远程 MongoDB 插入和检索的代码。

感谢和问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T09:13:55.170

使用这个部署：

$ PORT=3000 MONGO_URL=mongodb://localhost:27017/myapp 节点包/main.js

[http://docs.meteor.com/#deploying](http://docs.meteor.com/#deploying)部分：在您自己的基础架构上运行

# c# - 一个绑定到用户控件有效，第二个无效

> ID：11375272
> 
> 赞同：0
> 
> 时间：2012-07-07T13:10:18.360
> 
> 标签：c#, wpf, silverlight, windows-phone-7, windows-phone

我已经创建了用户控件，我要绑定的属性代码是：

```
public Color Value
{
    get
    {
        return (Color)this.GetValue(this.ValueProperty);
    }
    set
    {
        this.SetValue(this.ValueProperty, value);
    }
}

public readonly DependencyProperty ValueProperty = 
    DependencyProperty.Register("Value", typeof(Color), 
    typeof(ColorSlider), new PropertyMetadata(Colors.Red)) 
```

我的页面中有两个此控件的实例：

```
<local:ColorSlider x:Name="ColorsSlider1" />
<!--...-->
<local:ColorSlider x:Name="ColorsSlider3" /> 
```

和带有值的控件，我想绑定到（从`ColorSlider`到`Canvas`和`TextBlock`）：

```
<Canvas x:Name="TileCanvas" Grid.Column="0" Margin="30" Width="173" Height="173"
        Background="{Binding Value, ElementName=ColorsSlider1, Converter={StaticResource ColorToSolidBrushConverter}}">
    <TextBlock x:Name="TileText" Text="dsdfsdfsf"
               Foreground="{Binding Value, ElementName=ColorsSlider3, Converter={StaticResource ColorToSolidBrushConverter}}"/>
</Canvas> 
```

所以这就是问题所在。绑定到`Canvas`作品，但绑定到`TextBlock`不！有趣的是，如果我删除`ColorSlider3`了对意志的绑定`TextBlock`！`TextBlock`如果我将绑定设置为`ColorSlider3`.

所以看来我只能从 one 的最新实例绑定值`UserControl`。为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T13:47:47.243

您的依赖属性未正确定义...缺少静态部分，并且不需要“this”：

```
public Color Value
{
  get
  {
    return (Color)this.GetValue(ValueProperty);
  }

  set
  {
    this.SetValue(ValueProperty, value);
  }
}

public static readonly DependencyProperty ValueProperty =
  DependencyProperty.Register("Value", typeof(Color),
  typeof(ColorSlider), new PropertyMetadata(Colors.Red)); 
```

编辑 - - - - - - - - -

很高兴知道它对你有用。然而，MS决定它是静态的真正原因......从来没有想过它，但根据MSDN：

“自定义依赖属性。

如果您希望自定义类型上的属性支持值表达式、属性失效、每个类型的默认值、继承、数据绑定、动画或样式，则应遵循以下准则和过程使用依赖属性支持这些 CLR 属性：

1.  使用 Register 方法注册一个依赖属性；此方法返回一个 DependencyProperty，您应该将其作为可访问的**静态**只读字段存储在您的类中......”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T13:46:04.527

看来您已将其设置为 ColorsSlider2 而不是 ColorsSlider3

# haskell - 了解 Scrap Your Boilerplate 中的 cast 运算符的类型

> ID：11375275
> 
> 赞同：2
> 
> 时间：2012-07-07T13:10:34.897
> 
> 标签：haskell, scrap-your-boilerplate

在 Laemmel 和 SPJ 的 2003 [Scrap Your Boilerplate 论文](http://research.microsoft.com/en-us/um/people/simonpj/papers/hmap/)中，第 3 页有一个代码片段

```
mkT :: (Typeable a, Typeable b) => (b -> b) -> a -> a
mkT f = case cast f of
   Just g -> g
   Nothing -> id 
```

然后论文解释了

> 也就是说，如果 x 的类型与 f 的参数类型相同，则 mkT fx 将 f 应用于 x

按照本文前面示例的模式，我认为`cast f`必须将 的类型与上面的类型`Maybe (b -> b)`进行比较才能评估为`Just g`，但这似乎不正确。

这里的签名是怎么回事`cast f`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T13:27:01.013

的类型`cast`是

```
cast :: (Typeable x, Typeable y) => x -> Maybe y 
```

它会产生`Nothing`if`x`和`y`are different types 以及`Just argument`它们是否相同。请注意，结果类型`y`必须在`cast`使用时从调用上下文中确定。如果不是，则编译失败并出现未解决的重载/模糊类型变量错误。

在这个特定示例中，类型是函数类型，`(b -> b)`用于参数和`(a -> a)`结果。所以

```
cast f :: Maybe (a -> a) 
```

也`mkT`可以写成`mkT = fromMaybe id . cast`。

# r - 使用 scale_x_date 更改轴格式时出错

> ID：11375276
> 
> 赞同：3
> 
> 时间：2012-07-07T13:10:44.437
> 
> 标签：r, graph, ggplot2

亲爱的智人同胞，

我使用下面的代码创建了[这个](http://tinypic.com/r/axcg1h/6)图（除了没有`+ scale_x_date`）。

我用来执行此操作的数据集可在[此处](http://www.sendspace.com/file/m2qzko)找到。它看起来像这样：

```
GFC1CARi<-read.csv("demo.csv")
head(GFC1CARi)
  X         XX   variable       value    Var
1 1 2008-07-17 Financials 0.001772705 Financ
2 2 2008-07-18 Financials 0.017306086 Financ
3 3 2008-07-21 Financials 0.010745136 Financ
4 4 2008-07-22 Financials 0.021152194 Financ
5 5 2008-07-23 Financials 0.031195805 Financ
6 6 2008-07-24 Financials 0.026534444 Financ 
```

正如您将在图片中看到的，x 轴显示日期，例如“Aug”、“Sep”......。但是，我希望它类似于 "08/2007", "09/2007" ... 。所以，我的尝试如下所示，但它不起作用。

```
p <- ggplot(data=GFC1CARi,aes(x=XX, y=value, colour=Var)) +
        geom_line() + 
        opts(legend.position = "none") + 
        xlab(" ") + 
        ylab("Cumulative abnormal return") + 
        scale_x_date(labels = date_format("%m/%Y"),breaks = "1 month")

p <- direct.label(p+xlim(min(GFC1CARi$XX), max(GFC1CARi$XX)+20)) 
```

我尝试了许多其他变体，`breaks = ??`但`date_format`我无法显示 %m/%Y，它始终是“Aug”..“Sep”..“Oct”。根据乔兰的要求：

```
> str(GFC1CARi)
'data.frame':   1730 obs. of  5 variables:
 $ X       : int  1 2 3 4 5 6 7 8 9 10 ...
 $ XX      : POSIXct, format: "2008-07-17" "2008-07-18" "2008-07-21" "2008-07-22" ...
 $ variable: Factor w/ 10 levels "Financials","Industrials",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ value   : num  0.00177 0.01731 0.01075 0.02115 0.0312 ...
 $ Var     : chr  "Financ" "Financ" "Financ" "Financ" ... 
```

我什至尝试将日期格式从 `POSIXct` 更改`as.Date`为如下：

```
GFC1CARi[,2]<-as.Date(GFC1CARi[,2])
str(GFC1CARi)
'data.frame':   1730 obs. of  5 variables:
 $ X       : int  1 2 3 4 5 6 7 8 9 10 ...
 $ XX      : Date, format: "2008-07-16" "2008-07-17" ...
 $ variable: Factor w/ 10 levels "Financials","Industrials",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ value   : num  0.000983 0.015822 0.008339 0.017987 0.027186 ...
 $ Var     : chr  "Financ" "Financ" "Financ" "Financ" ... 
```

这并不能解决问题。相反，X 轴现在是 {“Oct”、“Jan”、“Apr”}，就是这样。

谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T18:48:53.863

抱歉，我太密集了。我认为您遇到的错误发生*在*尝试使用之前`directlabels`，而不是*之后*。

调用`xlim`只是简单地踩在 x 轴格式上。只需将`scale_x_date`调用放在`direct.labels`对我有用的命令中：

```
p <- direct.label(p + 
                  xlim(min(dat$XX), max(dat$XX)+20) + 
                  scale_x_date(labels = date_format("%m/%Y"),breaks = "1 month")) 
```

![在此处输入图像描述](../Images/b5aacdfbcadf9dd3ee02036f550521fd.png)

# php - PHP/MySQL：重建主键字段

> ID：11375277
> 
> 赞同：1
> 
> 时间：2012-07-07T13:10:45.597
> 
> 标签：php, mysql, primary-key, reset, rebuild

## 问题：

主键字段是`'ID'`

使用命令将数据插入/更新到其中`REPLACE INTO`，这很容易使用，但不幸的是增加了`'ID'`它正在替换的 Record 的值。

所以我需要一种完全重建`ID`领域的方法，以便：

```
| ID  |  Name   |
|===============
| 21  |  deer   |
| 8   |  snow   |
| 3   |  tracks |
| 14  |  arrow  | 
```

前往：

```
| ID |  Name   |
|===============
| 1  |  deer   |
| 2  |  snow   |
| 3  |  tracks |
| 4  |  arrow  | 
```

我需要通过 php 来完成。

## 当前尝试：

```
<?php
$reset = "SET @num := 0;
UPDATE `users` SET `ID` = @num := (@num+1);
ALTER TABLE `users` AUTO_INCREMENT =1;";

$con = mysql_connect("mysql2.000webhost.com","db_user","password");  
if (!$con)
{
     die('Could not connect: ' . mysql_error());
}
mysql_select_db("db_name", $con);
if (!mysql_query($reset,$con)) 
  {
    die('<h1>Nope:</h1>' . mysql_error());
  }
mysql_close($con);
?> 
```

并尝试：

```
$reset = "ALTER TABLE `users` DROP `ID`;
ALTER TABLE `users` AUTO_INCREMENT = 1;
ALTER TABLE `users` ADD `ID` int UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY FIRST;`"; 
```

也没有结果。

## 这一切的陌生感

我尝试的两个`$reset`命令都在 MySQL 中完美执行，但由于某种原因，它们无法从 PHP 中正确执行。

* * *

## 回答

正如答案所指出的那样，每个连接都会保留@变量，因此运行多个查询是完全合理的：

```
///Trigger multiple queries
$nope = '<h1>Nope:</h1>  ';
$res1 = "SET @num := 0;";
$res2 = "UPDATE `users` SET `ID` = @num := (@num+1);";
$res3 = "ALTER TABLE `users` AUTO_INCREMENT =1;";
if (!mysql_query($res1,$con)) die($nope . mysql_error());
if (!mysql_query($res2,$con)) die($nope . mysql_error());
if (!mysql_query($res3,$con)) die($nope . mysql_error());
mysql_close($con); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T13:13:51.747

`mysql_*`不支持运行多个查询。您必须单独运行它们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T13:24:51.963

1.  如果你使用`INSERT INTO ... ON DUPLICATE KEY UPDATE ...`，你可以保留你的“ID”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-19T18:36:59.010

```
function table2array ($table_name, $unique_col = 'id')
    {
$tmp=mysql_query("SELECT * FROM $table_name"); $count = mysql_num_rows($tmp);
while($rows[] = mysql_fetch_assoc($tmp));
array_pop($rows);
for ($c=0; $c < $count; $c++) 
{
  $array[$rows[$c][$unique_col]] = $rows[$c];
}
return $array;
    }

function reindexTable($table_name,$startFrom = 1) // simply call this function where you need a table to be reindexed!
    {
$array = table2array($table_name);
$id = 1; foreach ($array as $row) 
{
mysql_query("UPDATE `".$table_name."` SET `id` = '".$id."' WHERE `".$table_name."`.`id` = ".$row['id']);
$id++;
}
mysql_query("ALTER TABLE  `".$table_name."` AUTO_INCREMENT = ".$id);
    } 
```

# android - 单击时更改 URI

> ID：11375283
> 
> 赞同：0
> 
> 时间：2012-07-07T13:11:53.873
> 
> 标签：android, onclick, media-player, uri, buttonclick

我正在制作一个广播应用程序，该应用程序已经完成了。但我想让用户通过单击为每个站指定的按钮来更改站。

**更新：**我输入了更多代码。

所以我在想这样的事情？但我不知道把它放在哪里。

```
public void onClickListener (View v) {
    if (v == rDuhok) {
        kRadio.setDataSource("http://87.106.215.231:9992");
    } else if (v == rVin) {
        kRadio.setDataSource("http://93.91.197.214:1234");
    }
} 
```

现在我有指向*MyURI*的电台的链接，并且该应用程序按预期工作。但我希望能够通过单击按钮来更改 URI。

```
public class KurdRadioActivity extends Activity implements OnClickListener {

private ProgressBar playSeekBar;
private Button buttonPlay;
private Button buttonStopPlay;
private Button rDuhok;
private Button rVin;
private MediaPlayer kRadio;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    initializeUIElements();

    initializeMediaPlayer();

} 

private void initializeUIElements() {

    playSeekBar = (ProgressBar) findViewById(R.id.progressBar1);
    playSeekBar.setMax(100);
    playSeekBar.setVisibility(View.INVISIBLE);

    buttonPlay = (Button) findViewById(R.id.buttonPlay);
    buttonPlay.setOnClickListener(this);

    rDuhok = (Button) findViewById(R.id.rDuhok);
    rDuhok.setOnClickListener(this);

    rVin = (Button) findViewById(R.id.rVin);
    rVin.setOnClickListener(this);

    buttonStopPlay = (Button) findViewById(R.id.buttonStopPlay);
    buttonStopPlay.setVisibility(View.GONE);
    buttonStopPlay.setOnClickListener(this);

}

public void onClick(View v) {
    Vibrator vib = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
    vib.vibrate(50);
    if (v == buttonPlay) {
        startPlaying();
    } else if (v == buttonStopPlay) {
        stopPlaying();
    }
}

private void startPlaying() {

    buttonStopPlay.setVisibility(View.VISIBLE);
    buttonPlay.setVisibility(View.GONE);

    playSeekBar.setVisibility(View.VISIBLE);

    kRadio.prepareAsync();

    kRadio.setOnPreparedListener(new OnPreparedListener() {

        public void onPrepared(MediaPlayer mp) {
            playSeekBar.setVisibility(View.INVISIBLE);
            kRadio.start();

        }
    });
}

private void stopPlaying() {
    if (kRadio.isPlaying()) {
        kRadio.stop();
        kRadio.release();
        initializeMediaPlayer();
    }

    buttonPlay.setVisibility(View.VISIBLE);
    buttonStopPlay.setVisibility(View.GONE);
    playSeekBar.setVisibility(View.INVISIBLE);
}

private void initializeMediaPlayer() {

    kRadio = new MediaPlayer();
    try {
        kRadio.setDataSource("http://87.106.215.231:9992");
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    kRadio.setOnBufferingUpdateListener(new OnBufferingUpdateListener() {

        public void onBufferingUpdate(MediaPlayer mp, int percent) {
            playSeekBar.setSecondaryProgress(percent);
            Log.i("Buffering", "" + percent);

        }
    });
}

@Override
protected void onPause() {
    super.onPause();
    if (this.isFinishing()) {
        kRadio.stop();
    }
} 
```

只想说我是编程新手，我刚刚学习，谢谢你的帮助。

# android - BlackBerry - how to pass data like Intent.putExtra() in Android

> ID：11375284
> 
> 赞同：1
> 
> 时间：2012-07-07T13:11:56.980
> 
> 标签：android, android-intent, blackberry

I am newbie on BlackBerry. How do I achieve (in BlackBerry) the same as that of Android's

```
intent.putExtra("key","value"); 
```

to put values that can be received on the next *pushed screen* in BlackBerry.

Like in Android from `ActivityOne` -

```
Intent intent = new Intent(this, ActivityTwo.class);
intent.putExtra("Value1", "This value one for ActivityTwo ");
intent.putExtra("Value2", "This value two ActivityTwo"); 
startActivity(intent); 
```

in `ActivityTwo` -

```
Bundle extras = getIntent().getExtras();
if (extras == null) {
    return;
}
// Get data via the key
String value1 = extras.getString(Intent.EXTRA_TEXT);
if (value1 != null) {
    // Do something with the data
} 
```

Is such a thing possible in BlackBerry? If yes then how do I do this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T20:31:15.817

Using `public static` variables (as in Ganesh's answer) will work, but in general, that's not an object-oriented pattern that I would recommend.

Luckily, this *can* be easier in BlackBerry than in Android. Android's `Intent` mechanism is actually somewhat unnatural to many Java developers. When one `Activity` starts another `Activity` via an `Intent`, it does not actually `new` up (create) the instance of the second `Activity`, and it also doesn't hold a normal Java reference to that object. If it did, this problem would be much simpler. Android's implementation forces you to use the **intent extras** mechanism.

If your old `ActivityOne` class becomes `ScreenOne` for BlackBerry, and `ActivityTwo` becomes `ScreenTwo`, then you can just do something like this:

```
public class ScreenTwo extends Screen {
    private String _value1;   // this doesn't have to be a String ... it's whatever you want
    private String _value2;

    public void setValue1(String value) {
       _value1 = value;
    }
    public void setValue2(String value) {
       _value2 = value;
    }
} 
```

Then, in `ScreenOne`, you can start `ScreenTwo` this way

```
ScreenTwo nextScreen = new ScreenTwo();
nextScreen.setValue1("This value one for ActivityTwo");
nextScreen.setValue2("This value two ActivityTwo");
UiApplication.getUiApplication().pushScreen(nextScreen); 
```

That's actually more consistent with the way Java objects normally are used, and interact with one another.

There's good reasons why Android made `Intents` and **extras**, but in BlackBerry, you just don't have to worry about that.

* * *

**Edit:** I'm trying to consider what I *think* is the motivation behind Mr. Smith's comment below. If you actually like the Android `Intent` extras mechanism in the sense that you can pass multiple data types from one `Activity` to another, as key-value pairs, then you can certainly achieve something similar in BlackBerry. Instead of the `ScreenTwo` code above, you could use this:

```
public class ScreenTwo extends Screen {
    private Hashtable _extras;

    public void putExtras(Hashtable extras) {
        _extras = extras;
    }
} 
```

Where you `put(Object, Object)` key-value pair data into a `Hashtable` passed to the called screen, and then read it when you need it. Or even:

```
public class ScreenTwo extends Screen {
   private Hashtable _extras;

   public void putExtra(String name, Object value) {
      _extras.put(name, value); 
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T07:39:18.590

This is something worth designing well once because you'll end using it on most projects.

To begin with, no there's no built-in mechanism such as Android's in BB, but you can (and should) code your own:

```
 public class MyScreen extends MainScreen {

        public void updateParams(Hashtable params){
            // Read from hashtable and cast
            // Update fields (on Ui thread)
        }

    } 
```

As you can see, I've used a hashtable because it is the most flexible way. You could use setters, but then you'd be coupling the calling screen to the updated screen class. This allows you to pass a single or several parameters. You could have used a `Object[]`, and thus save a few references, but that optimization hardly pays off and you would be coupled to the array's lenght as well as to the order of objects inside the array. Now, to pass two params to a screen, you would do:

```
 Hashtable ht = new Hashtable();
    ht.put("somestring", "Hello!");
    ht.put("someint", new Integer(3));

    MainScreen ms = new MyScreen();
    targetscreen.updateParams(ht);
    // Now push screen 
```

You could also create a constructor like this:

```
Myscreen(Hashtable params) 
```

But this forces you to create a new instance each time you need to update the screen with new data. With the method, you could update a screen which is already on the stack.

This is an approach you could reuse in many projects. In fact, most times you'll end subclassing MainScreen anyway to abstract and simplify repetitive tasks like Menu creation and handling key presses, so this would be a part of that subclass.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T13:36:43.080

create one public class,

```
public class Values 
{
    public static String value1 ="";
    public static String value2 ="";
} 
```

Now u can access the value1,and value2 in anywhere.

before push the next screen, assign the values.

```
public class MyClass extends UiApplication 
{

    MyClass mc = null;
    public static void main(String args[]) 
    {
        mc = new MyClass();
        if (MyClass != null)
        {
            mc.enterEventDispatcher();
        }
    }

    public MyClass() 
    {
               Values.value1 ="HI"
               Values.value2 ="Welcome"
    this.pushScreen(new SplashScreen());
    } 
```

In another class u can access it.

```
public class Splashscreen()
{
   public Splasscreen()
{
       if(!Values.Value1.equalIgnoreCase("")
{
           Syso(""+Values.value1)   ;
}
} 
```

# php - PHP新手错误：：解析错误：语法错误，意外的T_STRING，期待'，'或';'

> ID：11375286
> 
> 赞同：0
> 
> 时间：2012-07-07T13:12:01.300
> 
> 标签：php

以下代码行

```
 echo “&lt;a href=’http: //localhost/moviesite.php?favmovie=Stripes' > "; 
```

抛出错误

```
Parse error: syntax error, unexpected T_STRING, expecting ',' or ';' 
```

关于我在这里做错的任何帮助都会有所帮助。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T13:13:39.817

您的第一个双引号和单引号不正确，应该是`"`and `'`：

```
echo "<a href='http://localhost/moviesite.php?favmovie=Stripes'>"; 
```

另一方面，我认为这会更好（`"`在 HTML 中使用）：

```
echo '<a href="http://localhost/moviesite.php?favmovie=Stripes">'; 
```

[有关PHP 字符串和引号](http://php.net/manual/en/language.types.string.php)的更多信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T13:14:58.287

第一个引号是错误的类型：

`echo “&lt;a href=’http: //localhost/moviesite.php?favmovie=Stripes' > ";`

应该

`echo "<a href='http: //localhost/moviesite.php?favmovie=Stripes' > ";`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T13:14:11.640

# c++ - Openssl，无效参数'候选者是：int BN_set_word（bignum_st *，？）'

> ID：11375287
> 
> 赞同：1
> 
> 时间：2012-07-07T13:12:06.633
> 
> 标签：c++, c, openssl, bignum

我正在将 OpenSSL 用于 cuda 项目。

我刚刚将所有项目从 win 导入到 linux (Eclipse)

我解决了除了这个烦人的错误之外的所有依赖项：

> 无效参数 ' 候选者是：int BN_set_word(bignum_st *, ?) '

对于这一行：

```
BN_set_word(two, 2); 
```

函数本身在 bn.h 中说

```
int BN_set_word(BIGNUM *a, BN_ULONG w); 
```

其中 BN_ULONG 定义为：

```
#define BN_ULONG    unsigned long 
```

如果我做类似的事情，它也不起作用

```
unsigned long q = 2;
BN_set_word(two, q); 
```

因为它返回

> 无效参数 ' 候选者是：int BN_set_word(bignum_st *, ?) '

或者

```
BN_ULONG q = 2;
BN_set_word(two, q); 
```

这给了

> 无法解析类型“BN_ULONG”

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T14:58:56.693

听起来你忘了`#include <openssl/bn.h>`。

# android - Android：将两个音频文件合并为一个文件

> ID：11375291
> 
> 赞同：1
> 
> 时间：2012-07-07T13:13:09.930
> 
> 标签：android

我在安卓系统工作。我想合并两个音频文件并想创建第三个音频文件。假设我有 A 和 B 音频文件，然后合并后我想要一个文件 AB。

我用谷歌搜索了很多次，到处搜索，但我没有得到任何积极的回应。我现在真的很需要帮助。

先感谢您。

# jquery - 比较两个数组并获取非重复（非唯一）值

> ID：11375294
> 
> 赞同：2
> 
> 时间：2012-07-07T13:13:32.387
> 
> 标签：jquery

我有两组数组。我需要得到不在两个数组中的字母。首先它应该检查索引 0 'a' 是否在两个数组上。如果它在两者中，则应该从两者中删除'a'（只是第一个数组中的第一个'a'而不是末尾的那个（索引3）。然后使用相同的逻辑去第二个项目'b'。

var arrayA = ['a','b','c','a'];

var arrayB = ['a','d','f','c'];

var 数组 C = []; //应该有结果[b,a,d,f]

代码设置在[http://jsfiddle.net/rexonms/AbFYh/#base](http://jsfiddle.net/rexonms/AbFYh/#base)

HTML

```
 <p class="arrayA">Array A</p>
 <p class="arrayB">Array B</p>
 <p class="arrayC">Array C</p> 
```

​ jQuery

```
var arrayA = ['a','b','c','a'];
var arrayB = ['a','d','f','c'];
var arrayC = []; //Shoud have the result[b,a,d,f]

$('.arrayA').text('ArrayA: ' + arrayA);
$('.arrayB').text('ArrayB: ' + arrayB);

$.each(arrayA, function(indexA,valueA) {
$.each(arrayB, function(indexB, valueB){

    if(valueA != valueB)
    {
        arrayC.splice(valueA);            
    }
});

$('.arrayC').text('ArrayC: ' + arrayC);
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-14T06:53:35.307

这没有记录，但它有效..

```
<script type="text/javascript">
    var arr1=[1,2,3,4,5];
    var arr2=[3,4,5,7,8,9,6];
    $(document).ready(function(){
        var arr=$(arr1).not(arr2).get();
        alert(arr.length);
    });
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T15:00:13.347

这是您想要的工作版本：http: [//jsfiddle.net/Zzt5f/](http://jsfiddle.net/Zzt5f/)

```
var arrayA = ['a','b','c','a'];
var arrayB = ['a','d','f','c'];
var arrayC = []; //Should have the result[b,a,d,f]

$('.arrayA').text('ArrayA: ' + arrayA);
$('.arrayB').text('ArrayB: ' + arrayB);

$.each(arrayA, function(indexA,valueA) {
    $.each(arrayB, function(indexB, valueB){
        if(valueA == valueB)
        {
            arrayA[indexA]=null;
            arrayB[indexB]=null;
            return false; //break out of inner each loop                     
        }
    });
});

$.each(arrayA.concat(arrayB),function(idx,val) {
    if(val!=null) arrayC.push(val);
});

$('.arrayC').text('ArrayC: ' + arrayC);
alert(arrayC); 
```

如您所见，我只对您的原始代码进行了一些修改。首先，由于您正在尝试删除重复值，因此您需要检查 if `valueA==valueB`，反之亦然。一旦找到匹配项，第二次迭代需要停止以防止删除第二个数组中的第二个重复项，因此`return false`.

我没有使用 array.splice 方法，因为这实际上是通过从调用它的数组中删除值来创建并返回一个新数组，所以本质上它并没有按照你使用它的方式做任何事情。不继续在循环中创建新数组感觉更干净。请注意，此方法实际上会修改`arrayA`and `arrayB`，因此如果您稍后再次需要它们，则必须克隆它们。

​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T13:18:33.747

一个普通的 JavaScript 解决方案：

```
var sa = arrayA.join('');
var sb = arrayB.join('');
var sc = sa+sb;
for (var i=0; i<sc.length;i++) {
   var c = sc.charAt(i);
   if (sa.indexOf(c)==-1 || sb.indexOf(c)==-1) arrayC.push(c);
} 
```

使用 jQuery，您还可以使用[inArray](http://api.jquery.com/jQuery.inArray/)：

```
var sc = arrayA.join('')+arrayB.join('');
for (var i=0; i<sc.length;i++) {
   var c = sc.charAt(i);
   if ($.inArray(c, arrayA)==-1 || $.inArray(c, arrayB)==-1) arrayC.push(c);
} 
```

正如 Random 所指出的，结果不是 ["b", "a", "d", "f"] 而是 ["b", "d", "f"] 两种解决方案。

如果您想将“unicity”定义为“不在同一索引的另一个数组中”，这里是：

```
 for (var i=Math.min(arrayA.length, arrayB.length); i-->0;) {
   if (arrayA[i]!=arrayB[i]) {
      if ($.inArray(arrayA[i], arrayC)==-1) arrayC.push(arrayA[i]);
      if ($.inArray(arrayB[i], arrayC)==-1) arrayC.push(arrayB[i]);
   }
} 
```

编辑：我已经阅读了您的编辑的新定义。这似乎根本与单一性无关。我不明白你想要什么。我放弃了，但我留下了这个答案（至少现在），因为它回答了第一个问题并且可能有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-07T15:23:06.963

```
var arrayA = ['a', 'b', 'c', 'a'];
var arrayB = ['a', 'd', 'f', 'c'];
var result = [];

function myArray( a, b ) {
   for( var i = 0; i < a.length; ++i ) {

        // find matched index of arrayB
        var bIndex = b.indexOf(a[i]);

        // if match found
        if( bIndex >= 0 ) {
            // remove element from arrayA
            a.splice( i, 1 );

            // remove element from arrayB of matched index
            b.splice( bIndex, 1 );
        }
    }

    // return result
    return a.concat(b);
}
result = myArray( arrayA, arrayB ); 
```

**[工作样本](http://jsfiddle.net/QStkd/585/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-07T13:33:22.577

**请参阅不同的演示**： http: [//jsfiddle.net/c8YLf/](http://jsfiddle.net/c8YLf/) **或** [http://jsfiddle.net/S6FXs/5/](http://jsfiddle.net/S6FXs/5/)

**代码**

```
var a= ['a','b','c','a'];
var b= ['a','d','f','c'];

    var unique = $.grep(a, function(element) {
        return $.inArray(element, b) == -1;
    });

    var unique2 = $.grep(b, function(element) {
        return $.inArray(element, a) == -1;
    });
var result = unique + unique2;

alert(result); ​ 
```

**或**可能有帮助：[JavaScript 数组差异](https://stackoverflow.com/questions/1187518/javascript-array-difference)

```
 var arrayA = ['a','b','c','a'];
var arrayB = ['a','d','f','c'];

function non_duplicate(arr1, arr2) {
      diff = [];
      joined = arr1.concat(arr2);
      for( i = 0; i <= joined.length; i++ ) {
        current = joined[i];
        if( joined.indexOf(current) == joined.lastIndexOf(current) ) {
          diff.push(current);
        }
      }
      return diff;
    }

var union = non_duplicate(arrayA,arrayB );
alert(union);
​ 
```

# php - 如何在 facebook 注册插件中使字段可选

> ID：11375300
> 
> 赞同：0
> 
> 时间：2012-07-07T13:14:09.677
> 
> 标签：php, facebook, json, plugins, registration

我的 Facebook 注册社交插件有以下代码：

```
 <iframe src="https://www.facebook.com/plugins/registration?
         client_id=xxxxxxxxxxxxxxxx&
             redirect_uri=http://www.pingxxxxxx.com/facebook_registration_plugin/fbwe/trial.php&
             fields=[
 {'name':'name'},
 {'name':'email'},
 {'name':'location'},
 {'name':'gender'},
 {'name':'birthday'},
 {'name':'about',      'description':'About Youtself',             'type':'text'},
 ]"
     scrolling="auto"
     frameborder="no"
     style="border:none"
     allowTransparency="true"
     width="100%"
     height="330">
 </iframe> 
```

**我想让最后一个字段，即“关于”对用户来说是可选的**。这个领域

```
 {'name':'about',      'description':'About Youtself',             'type':'text'}, 
```

谁能告诉我如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T23:46:57.723

要使字段可选，您可以使用 no_submit 参数，如此处所述：[https ://developers.facebook.com/docs/plugins/registration/advanced/](https://developers.facebook.com/docs/plugins/registration/advanced/)

使用该页面上记录的流程，您可以通过 Javascript 验证回调将可选字段保存到 cookie。然后，当用户在通过 Facebook 进行身份验证后返回您的网站时，您可以获取 cookie 中的数据并将其与他们的帐户重新关联。

据我所知，发送到 Facebook 的每个字段都必须存在。

# php - Zend 框架 select() 给出了意想不到的 SQL

> ID：11375302
> 
> 赞同：0
> 
> 时间：2012-07-07T13:14:12.143
> 
> 标签：php, mysql, sql, zend-framework, zend-db

对于我的应用程序，我的消息模型中有一个方法，它返回当前用户（$id）发送的所有消息。它使用 3 个连接从 3 个表返回信息。由于发件人和收件人都来自同一个“用户”表，因此我必须为这些列设置别名。

我的消息模型中的方法：

```
public function getSentMessages($id) 
{
    $messageModel = new self();
    $select = $messageModel->select()
                 ->from(array('m' => 'messages'),
                        array('m.id', 'm.title', 'm.send',
                              's.id AS s_id', 's.firstname AS s_fn', 's.lastname AS s_ln', 's.email AS s_e', 
                              'r.id AS r_id', 'r.firstname AS r_fn', 'r.lastname AS r_ln', 'r.email AS r_e'))
                 ->join(array('s' => 'users'),
                        'm.from = s.id')
                 ->join(array('mu' => 'messages_users'),
                        'm.id = mu.message_id')
                 ->join(array('r' => 'users'),
                        'r.id = mu.user_id')
                 ->where('m.from = ?', $id);

    $select->setIntegrityCheck(false); 
    $messages = $messageModel->fetchAll($select);

    return $messages;
} 
```

发生了奇怪的事情：结果行是由我请求的所有列组成的......但不知何故，所有列（包括我没有请求的列）都在之后添加。像这样：

```
id  title   send    s_id    s_firstname     s_lastname  s_email     r_id    r_firstname     r_lastname  r_email     id  username    password    firstname   lastname    email   role    id  message_id  user_id     status  id  username    password    firstname   lastname    email   role 
```

我发现 Zend 框架返回的 SQL 查询不是我期望的那样。这里是（为了更好的可读性而进行了清理）：

```
SELECT m.id, m.title, m.send, 
s.id AS s_id, s.firstname AS s_fn, s.lastname AS s_ln, s.email AS s_e, 
r.id AS r_id, r.firstname AS r_fn, r.lastname AS r_ln, r.email AS r_e, 
s. * , mu. * , r. *
FROM messages AS m
INNER JOIN users AS s ON m.from = s.id
INNER JOIN messages_users AS mu ON m.id = mu.message_id
INNER JOIN users AS r ON r.id = mu.user_id
WHERE (
m.from = '12345'
) 
```

在我的 SELECT 语句末尾检查这些星号 (*)。这些是如何到达那里的？Zend 文档告诉我只有在没有给出列时才使用星号。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T13:17:55.633

Join 有三个参数：

在每个 Join 子句的末尾添加一个空白值。

```
join(array('s' => 'users'),'m.from = s.id','') 
```

# iphone - 秒表 - NSTimer 或 NSDate

> ID：11375304
> 
> 赞同：0
> 
> 时间：2012-07-07T13:14:14.177
> 
> 标签：iphone, objective-c, ios, xcode

我想实现一个每秒计数的计时器。我有两种方法，但有点困惑哪一种是最佳方法。它使用 NSTimer 或 NSDate，据我了解，NSTimer 通常只用于触发方法，所以也许我不应该使用 NSTimer 而使用 NSDate？

一些澄清将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T13:18:09.633

`NSDate`是一个模型类。除了代表某个日期和时间之外，它不会触发或执行任何操作。您必须同时使用 (`NSTimer`和`NSDate`) 作为秒表。当您启动手表时，将当前日期保存在一个`NSDate`实例中，并以 1 秒的间隔启动一个 NSTimer（如果您想显示毫秒，则可以更长）。每次计时器触发时，您都会计算当前日期和保存日期之间的差异并将其显示给用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T13:18:00.377

使用 NSTimer 定期更新你的 UI。使用 NSDate 获取每次更新的准确时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T13:18:07.653

您可能需要 NSTimer。它将等待一段时间，然后向指定对象触发事件。NSDate 只是给你一个不可变的时间点。请检查文档。谢谢！

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html)

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsdate_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsdate_Class/Reference/Reference.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T13:18:36.723

“数数”是什么意思？当它“计数”时你想做什么？

基本上，您总是可以使用 NSDate 来存储“开始日期”，然后只要您愿意，就可以得到“现在”和存储日期之间的差异。

另一方面，如果您想在屏幕上显示时钟，您可以使用每秒触发一次的 NSTimer 来告诉您的应用程序更新时钟。

对于某个地方的某个整数变量几乎没有用例，它每秒都在增加而没有人看到它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-07T13:22:56.160

我会使用 NSTimer。您可以启动计时器

```
[NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(updateSeconds)userInfo:nil repeats:YES]; 
```

并在您的`updateSeconds`方法中：

```
(void)updateSeconds
{
    int seconds = [self.secondsLabel.text intValue];
    seconds = seconds + 1;
    self.secondsLabel.text = [NSString stringWithFormat:@"%d",seconds];
} 
```

请注意，这`secondsLabel`是一个连接到标签的 IBOutlet，它以秒为单位显示经过的时间。

# ios - 关闭应用程序后 Facebook 会话无效

> ID：11375305
> 
> 赞同：0
> 
> 时间：2012-07-07T13:14:34.777
> 
> 标签：ios, facebook, single-sign-on

我目前正在开发一个使用 Facebook 的 SSO 登录的应用程序。我已经按照他们的 iOS 开发者网站上的教程进行操作，现在我有了一个有效的登录和注销系统 :)

但是，每次我启动应用程序时，会话都无效（不再），它要求我授权应用程序。即使在我关闭应用程序之后，会话是否有可能保持有效，我将如何实现？我已经尝试过以下代码：

```
// Restore previously saved Facebook credentials (If any)
delegate.facebook.accessToken    = [[NSUserDefaults standardUserDefaults] stringForKey:@"FBAccessToken"];
delegate.facebook.expirationDate = (NSDate *) [[NSUserDefaults standardUserDefaults] objectForKey:@"FBExpirationDate"];

// Trigger SSO Facebook authentication if required
if ([delegate.facebook isSessionValid] == NO) {
    [delegate.facebook authorize:nil];
} else {
    [self fbLoginWithUsername:username andPassword:password];
} 
```

但它仍然要求我授权。用户每次登录都看到授权窗口非常烦人。有人对此有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T13:55:28.410

我发现了我的错误！

登录时，我将密钥另存为，`FBAccessTokenKey`但我尝试读取`FBAccessToken`.

有点愚蠢，我知道；）现在它按预期工作了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T13:18:27.273

确保`NSUserDefaults`您使用的字符串`accessToken`不是`nil`并且您正确保存它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T13:20:39.687

我更喜欢使用单例样式类别扩展 Facebook 类并实现：

```
static Facebook *shared = nil;

    + (Facebook *)shared {
        @synchronized(self) {
            if(shared == nil)
                shared = [[self alloc] init];
        }
        return shared;
    }

    - (id)init {
        if ((self = [self initWithAppId:kFacebookAppID andDelegate:self])) {
            [self addSessionData];
        }
        return self;
    }

    -(void)addSessionData{
        NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
        if ([defaults objectForKey:kFBAccessTokenKey] && [defaults objectForKey:kFBExpirationDateKey]) {
            self.accessToken = [defaults objectForKey:kFBAccessTokenKey];
            self.expirationDate = [defaults objectForKey:kFBExpirationDateKey];
        }
    }

    - (void)authorize {

        if (![self isSessionValid]) {
            NSArray *permissions =  [NSArray arrayWithObjects:@"email", @"user_about_me", nil];
            [self authorize:permissions];
        }
    }

    - (void)fbDidLogin {

        NSLog(@"User is logged in to Facebook");

        NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
        [defaults setObject:[self accessToken] forKey:kFBAccessTokenKey];
        [defaults setObject:[self expirationDate] forKey:kFBExpirationDateKey];
        [defaults synchronize];
        [[NSNotificationCenter defaultCenter] postNotificationName:@"FBDidLogin" object:self];
    }

    - (void)fbDidNotLogin:(BOOL)cancelled {

        if (cancelled) {
            [[NSNotificationCenter defaultCenter] postNotificationName:@"FBLoginCancelled" object:self];
        } else {
            [[NSNotificationCenter defaultCenter] postNotificationName:@"FBLoginFailed" object:self];
        }

        [[NSNotificationCenter defaultCenter] postNotificationName:@"FBDidNotLogin" object:self];
    }

    - (void)fbDidLogout {
        NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
        [defaults removeObjectForKey:kFBAccessTokenKey];
        [defaults removeObjectForKey:kFBExpirationDateKey];
        [defaults synchronize];
        [[NSNotificationCenter defaultCenter] postNotificationName:@"FBDidLogout" object:self];
        NSLog(@"Logged out of Facebook");
    }

    - (void)fbDidExtendToken:(NSString*)accessToken expiresAt:(NSDate*)expiresAt{
        NSLog(@"Facebook access token extended");
        NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
        [defaults setObject:accessToken forKey:kFBAccessTokenKey];
        [defaults setObject:expiresAt forKey:kFBExpirationDateKey];
        [defaults synchronize];
    }

    - (void)fbSessionInvalidated{

    } 
```

我知道代码有效。幸运的是，我们不必在 iOS6 中做这些垃圾！

# wcf - 如何从 WCF 服务中获取分段数据

> ID：11375311
> 
> 赞同：1
> 
> 时间：2012-07-07T13:16:20.393
> 
> 标签：wcf, service, logparser, piecewise, iis-logs

我创建了一个 .Net 应用程序，它允许查询一些 Web 服务器的 IIS 日志。该应用程序调用 WCF 服务来获取数据。WCF 服务位置有 IIS 日志。WCF 服务在内部调用 IIS 日志文件上的 Logparser 并返回结果。有多个 IIS 日志文件。如果我一次性在所有这些上运行 logparser，则返回需要很长时间，因为大约有 30 个巨大的 IIS 日志文件被查询。我想在每个 IIS 日志上一一运行 logparser 并一一返回结果。

我正在寻找一个在 WCF 上工作并允许从 WCF 服务中逐段检索数据的框架。所以我想得到 IISlogfile1 的结果，然后是 IISlogfile2 的结果，依此类推。否则 UI 将不得不等待很长时间才能一次获得完整的结果。

您是否知道任何允许从 WCF 服务中逐部分检索数据的现有框架？

PS：我的解决方法是多次调用该服务，每个 IIS 日志文件一次，直到它响应所有数据都已发送。但我正在寻找更清洁的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T03:39:46.953

[这个问题](http://social.msdn.microsoft.com/Forums/en/wcf/thread/fe98f92a-0f2e-4234-acf3-c084526602d1)似乎与您的场景非常相关，看看Steven Cheng的回答是否对您有帮助。他的回答的要点是您可以尝试[Duplex 服务](http://msdn.microsoft.com/en-us/library/ms731064.aspx)，其中服务器可以在完成处理每个日志文件时调用客户端。

**编辑：**

还可以查看[SignalR](http://signalr.net/#)框架，以在服务器和客户端之间建立**持久连接**，因此您可以在服务器完成处理时从服务器发送通知（在您的情况下为日志文件）。[这里有一个例子](http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T13:25:28.947

那么苏维克巴苏，

我不确定这是否有帮助，但你可以这样做。

首先调用 WCF 服务以获取您拥有的文件数。

然后在循环内部，您使用文件名调用 WCF 服务，并将它们与 gridview+jqgrid 或一些异步调用魔术绑定。

通过这种方式，您可以异步进行并显示数据，并且您的延迟会更少。您的 WCF 服务的负载也会减少。

希望我能说清楚。

# c# - 根据用户角色限制用户控制的功能

> ID：11375318
> 
> 赞同：-1
> 
> 时间：2012-07-07T13:17:41.187
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2

在 ASP.Net MVC Web 应用程序中创建用户控件并能够根据用户角色或用户本身限制其功能的最佳实践和/或标准是什么？

换句话说，假设我有四个不同的网页，其中 90% 的内容完全相似（一些搜索字段、一个包含搜索结果的网格、一些 javascript...），并且每个网页都可能有一个或两个其他搜索字段. （请**注意**，每个页面上这些额外的搜索字段，在搜索结果中是有效的。另外请考虑我们在后台使用相同的存储过程，并且在搜索字段较少的页面中，我们传递 null 或默认值 -根据情况——对他们来说）。

我们正在寻找一种方法来重构我们的代码，如果可能的话，可以在四个页面中的每一页中使用一个**USER CONTROL 。**

**编辑：也许我应该将问题更正为这样的问题：如何避免将 <% if(...)%> 标签放入视图中并使用[此处](https://stackoverflow.com/questions/4610749/asp-net-mvc-check-role-inside-view)描述的方法，其中 CRice 说：“最好让viewdata或者model代表view要显示什么，view可以简单的检查view数据，一个controller基类或者一个action上的filter可以重复使用这个非常简单，让代码存在于一个地方。” 为了解决我的问题？**

**人们一直强调检查用户角色部分。事实上，当我问这个问题时，我已经知道这一点。我不知道如何以正确的方式使用视图数据或模型或任何适合此类情况的方法。[（特别使用参考问题](https://stackoverflow.com/questions/4610749/asp-net-mvc-check-role-inside-view)中描述的模型）**

非常感谢您指导我完成这件事和您的耐心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T08:04:21.660

> 我们正在寻找一种方法来重构我们的代码，如果可能的话，可以在四个页面中的每一页中使用一个 USER CONTROL。

这确实是正确的方法。除了在 ASP.NET MVC 中没有用户/服务器端控件。您可以编写一个自定义的可重用 HTML 帮助程序，该帮助程序将封装此函数功能，并在您的视图中调用此自定义帮助程序。例如：

```
@Html.RoleBasedTextBoxFor(x => x.SomeField, "Admin") 
```

自定义助手将简单地检查当前经过身份验证的用户是否处于管理员角色并呈现一个文本框，如果不是则返回一个空字符串。

下面是这样一个示例助手的样子：

```
public static class HtmlExtensions
{
    public static IHtmlString RoleBasedTextBoxFor<TModel, TProperty>(
        this HtmlHelper<TModel> html,
        Expression<Func<TModel, TProperty>> expression,
        string roleName
    )
    {
        var user = html.ViewContext.HttpContext.User;
        if (!user.Identity.IsAuthenticated || !user.IsInRole(roleName))
        {
            // the user is not authenticated or is not in the required role
            return MvcHtmlString.Empty;
        }

        return html.TextBoxFor(expression);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T19:35:39.513

如果您要检查视图中的角色，[那么该问题已经得到回答](https://stackoverflow.com/questions/4610749/asp-net-mvc-check-role-inside-view)。

虽然您可以`Page.User.IsInRole("RoleName")`在视图上使用，但最好让控制器控制用户流。

# ios - 为什么 Apple 的一些示例代码演示不使用故事板？

> ID：11375319
> 
> 赞同：0
> 
> 时间：2012-07-07T13:17:41.843
> 
> 标签：ios, xcode, uistoryboard

我见过的一些复杂的示例代码不使用情节提要，例如[TheElements](https://developer.apple.com/library/ios/#samplecode/TheElements/Introduction/Intro.html)演示。我很想知道为什么演示程序以编程方式生成所有视图，而不是使用 nib 文件或情节提要。据我了解，故事板似乎是开发界面的推荐做法。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T13:20:29.150

TheElements 是一个非常古老的示例项目。如果我没记错的话，它是 2008 年 SDK 第一个版本中的第一个示例。Interface Builder 还不存在（用于 iOS 应用程序），Storyboards 仅在 iOS 5 中引入。他们可能不认为值得更新和重写很多代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T13:37:47.463

当您想创建界面时，故事板很棒。Apple 示例代码是关于了解正在发生的事情，包括了解界面。Interface Builder 有很多选项，因此很难看出默认值发生了什么变化。

即使在一些较新的代码示例中，也没有`.xib`文件，这使得掌握逻辑更容易。当然，这并不意味着您应该遵循该示例并且不使用 IB 文件。但从长期学习开始有优势。

# python - 将 python 列表插入 MySQL 数据库

> ID：11375323
> 
> 赞同：0
> 
> 时间：2012-07-07T13:18:08.113
> 
> 标签：python, database, list, insert, raw-input

我得到了一些代码，但并没有真正让它工作

```
listdata = [1, 2]
listdata1.insert(1, raw_input("Enter first thing into DB: ")
listdata2.insert(2, raw_input("Enter second thing into DB: ") 
```

然后我制作数据库，然后

```
cursor.execute("INSERT INTO testdb (TABLE, TABLE) VALUES (%s, %s)", (listdata1, listdata2 
```

这给了我： NameError: name 'listdata1' is not defined

以这种方式插入这个甚至可能吗？或者我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T14:57:23.193

问题发生在这里：

```
listdata1.insert(1, raw_input("Enter first thing into DB: ") 
```

您还没有定义变量`listdata1`。将其更改为 listdata，您将修复 NameError。

此外，您可以追加而不是插入，例如

`listdata.append( raw_input("Enter first thing into DB: ") )`

然后原始输入将保存在 listdata中的位置**0中，您可以通过**`listdata[0]`

sql 看起来也错误（'TABLE' 出现两次）

# wordpress - WordPress短帖子插件？

> ID：11375340
> 
> 赞同：0
> 
> 时间：2012-07-07T13:19:52.370
> 
> 标签：wordpress, plugins

我需要从插件或方法中仅显示主页中帖子内容的一部分，然后单击“阅读更多”以加载完整帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T17:02:10.520

When adding new post you can insert "**more**" tag in editor [![Visual ](../Images/205c017b2e83e80fd37acb7ac2ef3fc5.png)](https://i.stack.imgur.com/WwLBZ.jpg) Or manually (in "HTML" mode) by inserting **< !--more-->**.

Then put the rest of your content below this tag.

For more info about more tag, go here [http://en.support.wordpress.com/splitting-content/more-tag/](http://en.support.wordpress.com/splitting-content/more-tag/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-07T06:10:23.650

您可以使用帖子摘录来获取帖子的描述。（简短描述）。例子：

```
<?php
$my_excerpt = get_the_excerpt();
if ( '' != $my_excerpt ) {
    // Some string manipulation performed
}
echo $my_excerpt; // Outputs the
?> 
```

详细阅读并关注我的来源>> [http://www.kyowal.com/rsiwal/posts/8196](http://www.kyowal.com/rsiwal/posts/8196)

# c# - 从字符串中检索文本的正则表达式

> ID：11375341
> 
> 赞同：3
> 
> 时间：2012-07-07T13:20:03.083
> 
> 标签：c#, regex

我有一个字符串，它的值如下

```
{ctrl1} + {ctrl2}
({ctrl1} / {ctrl2}) * {ctrl3}
if ({ctrl1} > {ctrl2}) then {ctrl1} * 10 else {ctrl} + {ctrl2} endif 
```

可能有几个这样的公式。这将在字符串变量中可用。我需要提取所有`{..}`值。

因此，在示例 1 中，我应该提取`{ctrl1}`, `{ctrl2}`。在 Example2 中，我应该提取`{ctrl1}`, `{ctrl2}`, `{ctrl3}`. 在示例 3 中，我应该提取`{ctrl1}`, `{ctrl2}`。

有人可以帮我用正则表达式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T13:36:39.103

您可能想要类似`{[^}]+}`.

但是请注意，这不会处理像`{hello{2}}`. 你可能需要一个真正的解析器来处理这样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T13:31:29.023

类似的东西`{\S+?}`应该可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T13:55:53.490

您可以结合正则表达式和 LINQ 并执行以下操作：

```
Regex.Matches(input, "{.*?}").Cast<Match>().Select(m => m.Value).Distinct(); 
```

假设`{ctrl}`是上一个示例中的错字。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-07T13:51:39.340

```
private void TrimControlNames()
    {
        if (txtFormula.Text.Trim().Length > 0)
        {
            string formula = txtFormula.Text.Trim();

            string pattern1 = "{[a-zA-Z0-9$_ ]+}"; //to identify control placeholders
            StringBuilder names = new StringBuilder();
            foreach (Match m in Regex.Matches(formula, pattern1))
            {
                if (m.Value.Contains(" "))
                {
                    string str = m.Value.Replace(" ", string.Empty); //It is ok to remove like this since control names are not allowed to have spaces.
                    formula = formula.Replace(m.Value, str);
                }

            }

            txtFormula.Text = formula;
        }

    } 
```

此方法执行我的预期。

# ruby - String#encode 未修复“UTF-8 中的无效字节序列”错误

> ID：11375342
> 
> 赞同：11
> 
> 时间：2012-07-07T13:20:06.547
> 
> 标签：ruby, unicode, utf-8, ruby-1.9

我知道关于这个错误有多个类似的问题，我已经尝试了很多，但没有运气。我遇到的问题涉及字节`\xA1`并且正在抛出

> ArgumentError：UTF-8 中的无效字节序列

我尝试了以下但没有成功：

```
"\xA1".encode('UTF-8', :undef => :replace, :invalid => :replace,
    :replace => "").sub('', '')
"\xA1".encode('UTF-8', :undef => :replace, :invalid => :replace,
    :replace => "").force_encoding('UTF-8').sub('', '')
"\xA1".encode('UTF-8', :undef => :replace, :invalid => :replace,
    :replace => "").encode('UTF-8').sub('', '') 
```

每一行都会为我抛出错误。我究竟做错了什么？

**更新：**

上述行仅在 IRB 中失败。但是，我修改了我的应用程序以使用相同的 String#encode 方法和参数对 CVS 文件的行进行编码，并且在从*文件*中读取该行时出现相同的错误（注意：如果您对相同的字符串执行操作，它会起作用不使用 IO）。

```
bad_line = "col1\tcol2\tbad\xa1"

bad_line.sub('', '') # does NOT fail
puts bad_line # => col1 col2    bad?

tmp = Tempfile.new 'foo' # write the line to a file to emulate real problem
tmp.puts bad_line
tmp.close

tmp2 = Tempfile.new 'bar'

begin
  IO.foreach tmp.path do |line|
    line.encode!('UTF-8', :undef => :replace, :invalid => :replace, :replace => "")
    line.sub('', '') # fail: invalid byte sequence in UTF-8
    tmp2.puts line
  end
  tmp2.close

  # this would fail if the above error didn't halt execution
  CSV.foreach(tmp2.path) do |row|
    puts row.inspect # fail: invalid byte sequence in UTF-8
  end
ensure
  tmp.unlink
  tmp2.close
  tmp2.unlink
end 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-07T16:37:41.927

似乎 ruby​​ 认为字符串编码已经是 utf8，所以当你这样做时

```
line.encode!('UTF-8', :undef => :replace, :invalid => :replace, :replace => "") 
```

它实际上并没有做任何事情，因为目标编码与当前编码相同（至少这是我对代码的解释`transcode.c`）

这里真正的问题是您的起始数据在某些不是 utf-8 的编码中是否有效，或者这是否是应该是 utf-8 但其中有一些您想要丢弃的缺陷的数据。

在第一种情况下，正确的做法是告诉 ruby​​ 这个编码是什么。您可以在打开文件时执行此操作

```
File.open('somefile', 'r:iso-8859-1') 
```

将打开文件，将其内容解释为 iso-8859-1

您甚至可以让 ruby​​ 为您转码

```
File.open('somefile', 'r:iso-8859-1:utf-8') 
```

将以 iso-8859-1 格式打开文件，但是当您从中读取数据时，字节将为您转换为 utf-8。

您也可以调用`force_encoding`告诉 ruby​​ 字符串的编码是什么（这根本不会修改字节，它只是告诉 ruby​​ 如何解释它们）。

在第二种情况下，您只想将任何讨厌的东西转储到您的 utf-8 中，您不能照常调用`encode!`，因为那是无操作的。在 ruby​​ 2.1 及更高版本中，您可以使用[String#scrub](http://www.ruby-doc.org/core-2.1.0/String.html#method-i-scrub)，在以前的版本中，您可以这样做

```
line.encode!('UTF-16', :undef => :replace, :invalid => :replace, :replace => "")
line.encode!('UTF-8') 
```

我们首先转换为 utf-16。由于这是一种不同的编码，ruby 实际上会替换我们的无效序列。然后我们可以转换回 utf-8。这不会丢失我们任何额外的数据，因为 utf-8 和 utf-16 只是编码相同底层字符集的两种不同方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T13:43:45.100

也许您正在 IRB 中运行此代码。我在使用 IRB 时遇到了很多编码问题。在这种情况下，请尝试将此代码保存为`.rb`文件并从命令行运行代码。

# c# - CompileXaml 意外失败

> ID：11375343
> 
> 赞同：1
> 
> 时间：2012-07-07T13:20:25.213
> 
> 标签：c#, xaml, windows-8, microsoft-metro, windows-runtime

我创建了一个 Windows 8 应用程序的新项目。我想用 c#/xaml 创建它。我正在创建项目，然后按 F5，我得到了

> “CompileXaml”任务意外失败。
> System.NullReferenceException：对象引用未设置为对象的实例。
> 在 Microsoft.Windows.UI.Xaml.Build.Tasks.CompileXaml.CheckForDesignTimeBuildMode()
> 在 Microsoft.Windows.UI.Xaml.Build.Tasks.CompileXaml.Execute()
> 在 Microsoft.Build.BackEnd.TaskExecutionHost.Microsoft.Build.BackEnd .ITaskExecutionHost.Execute()
> 在 Microsoft.Build.BackEnd.TaskBuilder.d__20.MoveNext()

我没有改变任何东西。当我选择 BlankTemplate、SplitTemplate、GridTemplate 时，也会发生同样的事情。

不知道该怎么办

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-08T05:56:37.650

将您的 Visual Studio 2013 从更新 2 升级到更新 4。当您构建项目时，它会给出有关 Hyper-V 网络适配器的错误。要解决此问题，请通过单击提示中的“重试”按钮来更改 Hyper -V 网络适配器设置。（您也可以将Window phone SDK升级到8.1以获得更好的体验。这个错误是可选的，不是必须解决的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T11:33:47.243

我解决了这个问题。我不确定我是怎么做到的。

我已经卸载了所有的视觉工作室并从 MS 站点下载了最新版本的 Visual Studio 2012 RC。从头开始安装它并且它工作

# php - 如何用php解析html表

> ID：11375346
> 
> 赞同：0
> 
> 时间：2012-07-07T13:20:46.230
> 
> 标签：php

如果有人能给我一个关于如何解析这种表格并以特定顺序显示结果的提示，我将不胜感激。

所以我拥有的那段html是

```
<table name="maintable" cellspacing="2" cellpadding="3" border="0" id="grid_block" width="100%" class="csm">
<tr class="shade" style="font-weight: bold">
    <td width="30%">Name</td>
    <td width="70%">NameOne</td>
</tr>
<tr class="shade" style="font-weight: bold">
        <td>Date</td>
        <td>2012-09-30</td>
</tr>
</table>
<br>
<table name="maintable" cellspacing=2 cellpadding=3 border=0 id="grid_block" width="100%" class="csm">
        <tr>
            <td colspan="12" align="center" bgcolor="#90ee90"><b>In Stock</b></td>
        </tr>
        <tr onmouseover="this.className = 'rowselected';" onmouseout="this.className = 'shade';">
            <td class="greenshade"><b>Color/Size</b></td>
            <td align="center" class="greenshade"><b>OO</b></td>
            <td align="center" class="greenshade"><b>0</b></td>
            <td align="center" class="greenshade"><b>2</b></td>
            <td align="center" class="greenshade"><b>4</b></td>
            <td align="center" class="greenshade"><b>6</b></td>
            <td align="center" class="greenshade"><b>8</b></td>
            <td align="center" class="greenshade"><b>10</b></td>
            <td align="center" class="greenshade"><b>12</b></td>
            <td align="center" class="greenshade"><b>14</b></td>
            <td align="center" class="greenshade"><b>16</b></td>
            <td align="center" class="greenshade"><b>18</b></td>
        </tr>
        <tr onmouseover="this.className = 'rowselected';" onmouseout="this.className = 'shade';">
                <td width='30%' ><b>black</b></td>
                <td align="Center">-</td>
                <td align="Center">-</td>
                <td align="Center">-</td>
                <td align="Center">-</td>
                <td align="Center">-</td>
                <td align="Center">-</td>
                <td align="Center">-</td>
                <td align="Center">-</td>
                <td align="Center">-</td>
                <td align="Center">-</td>
                <td align="Center">-</td>
        </tr>
        <tr onmouseover="this.className = 'rowselected';" onmouseout="this.className = 'shade';">
                <td width='30%' ><b>nude</b></td>
                <td align="Center">-</td>
                <td align="Center">-</td>
                <td align="Center">-</td>
                <td align="Center">-</td>
                <td align="Center">-</td>
                <td align="Center">-</td>
                <td align="Center">-</td>
                <td align="Center">-</td>
                <td align="Center">-</td>
                <td align="Center">-</td>
                <td align="Center">-</td>
        </tr> 
```

问题是我需要解析这个表并以这种形式输出：

;nameOne;黑色;OO;-;

;nameOne;黑色;0;-;

;nameOne;黑色;2;-;

等等

所以基本上 - 名称（来自第一个表），颜色，尺寸，数量；适用于每种颜色和尺寸。

在过去的两天里，我一直在努力做到这一点，但到目前为止还没有运气，所以我将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T13:38:42.947

我更喜欢这个库[https://github.com/olamedia/nokogiri](https://github.com/olamedia/nokogiri)来解析 html 数据。假设你想将这些东西转换为数组，你可以在这里如何做到这一点：

```
$saw = new nokogiri($big_html_string);
$my_table = $saw->get('table')->toArray(); 
```

之后，您拥有包含所有属性和节点的数组，请参阅`print_r($my_table)` 注意 $big_html_string 应该是带有`<html>, <body>`标签的整个 html！

# css - 如何使用 CSS 定位使页脚与主要内容区域重叠？

> ID：11375347
> 
> 赞同：0
> 
> 时间：2012-07-07T13:20:59.313
> 
> 标签：css, positioning, footer, overlap, absolute

这是我在制作时遇到问题的页面的链接：

[http://willhost.webs.com/First%20CSS%20Page/Homepage%20Actual.html](http://willhost.webs.com/First%20CSS%20Page/Homepage%20Actual.html)

我希望绿色页脚垂直覆盖灰色内容框 39 像素。我可以通过将页脚位置属性设置为“相对”并输入顶部值“39px”（并增加灰色框的 z-index）来做到这一点，但这仍然会留下一个空间，页脚应该在正常流程中进入- 我不想那样。

因此，将页脚设置为绝对定位似乎就是答案。但是当我这样做时，页脚会从屏幕上消失？！

我一个月前才开始网络编码，所以如果这是一个愚蠢的问题，请原谅我。

任何帮助将非常感激！

干杯，W 将

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T13:25:00.590

尝试申请`margin-top`

```
#footer {
    background: #95D704;
    font: normal 13px 'Museo Sans 100';
    height: 97px;
    margin-top: 39px;
} 
```

# android - 如何在 Android 中创建类似 Tab 的 UI？

> ID：11375350
> 
> 赞同：0
> 
> 时间：2012-07-07T13:21:23.520
> 
> 标签：android, android-layout, android-animation, android-view

我正在尝试在活动中实现类似 Tab 的 UI。这就是我想要的样子。
有 3 个按钮，每个按钮都与一个 LinearLayout 相关联。当用户点击一个按钮时，当前可见的布局淡出，与点击的按钮关联的布局淡入视图。
如何才能做到这一点？特别是如何制作褪色效果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T14:21:09.423

如果您仍想手动操作，最好使用选项卡小部件，您可以执行以下操作：

1.  创建一个相对布局（根）
2.  创建一个线性布局，属性宽度填充父高度包装内容并给出 wight 3
3.  将 3 个按钮以 1 1 1 重量的线性布局放置
4.  为每个选项卡（如按钮）采用 3 个相对布局，确保这 3 个在按钮布局的上方/下方对齐
5.  在每个按钮的点击事件上设置每个相对布局的可见性我完全满足你的需要

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T13:38:27.713

您需要的是 TabHost 视图：http: [//developer.android.com/reference/android/widget/TabHost.html](http://developer.android.com/reference/android/widget/TabHost.html)

这是一个教程：[http ://www.androidhive.info/2011/08/android-tab-layout-tutorial/](http://www.androidhive.info/2011/08/android-tab-layout-tutorial/)

# php - Active Record 或 SQL 中的多个 Where In

> ID：11375355
> 
> 赞同：0
> 
> 时间：2012-07-07T13:21:55.203
> 
> 标签：php, mysql, activerecord

抱歉这个问题的标题，我不知道如何为这个问题措辞。

我有一个看起来像这样的表：

```
entry_id | cat_id
---------+-------
1        | 23
1        | 17
1        | 34
1        | 11
2        | 25
2        | 28
2        | 90
2        | 23 
```

然后我有不同的类别数组

```
$cats1 = [23, 46, 67]
$cats2 = [34, 28, 91] 
```

我需要取回两个数组`entry_id`中都有`cat_id`' 的 '，但如果我这样做了

```
->where_in('cat_id', $cats1)->where_in('cat_id', $cats2) 
```

显然这是行不通的，因为没有一行`cat_id`与它相关联。在这种情况下，`entry_id`I would want back 是`1`，因为它包含来自 first 的一个值`array(23)`，以及来自 second的一个值`array(34)`。

我不能使用`or_where`，因为结果不准确。我可以使用直接的 SQL 选择语句，但我想知道是否有办法在这样的表上实现这种类型的查询。我不是 SQL 专业人士，因此不胜感激。

我目前使用另一种解决方案让它工作，我`entry_id`从第一个获得 's `where_in`，然后让另一个查询执行`where_in`those `id`'s 和`where_in`第二个猫数组，但我更愿意一次完成整个查询。

这是在 PHP 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T13:27:11.103

（更新，更正:)`DISTINCT`需要：

```
SELECT DISTINCT a.entry_id 
FROM tableX AS a
  JOIN tableX AS b
    ON b.entry_id = a.entry_id 
WHERE a.cat_id IN (23, 46, 67)
  AND b.cat_id IN (34, 28, 91) ; 
```

* * *

如果你有一张`entry`桌子，你也可以使用`JOIN`：

```
SELECT DISTINCT e.entry_id 
FROM entry AS e
  JOIN tableX AS a
    ON a.entry_id = e.entry_id 
  JOIN tableX AS b
    ON b.entry_id = e.entry_id 
WHERE a.cat_id IN (23, 46, 67)
  AND b.cat_id IN (34, 28, 91) ; 
```

或`EXISTS`相关子查询：

```
SELECT e.entry_id 
FROM entry AS e
WHERE EXISTS 
      ( SELECT *
        FROM tableX AS a
        WHERE a.entry_id = e.entry_id 
          AND a.cat_id IN (23, 46, 67)
      )
  AND EXISTS 
      ( SELECT *
        FROM tableX AS b
        WHERE b.entry_id = e.entry_id 
          AND b.cat_id IN (34, 28, 91)
      ) ; 
```

# python - 如何使用 Django-nonrel 的 MongoDB mapreduce？

> ID：11375356
> 
> 赞同：0
> 
> 时间：2012-07-07T13:22:00.343
> 
> 标签：python, django, mongodb, django-nonrel

我只是在学习如何使用 Mapreduce 并阅读此文档：[http ://django-mongodb.org/topics/mapreduce.html](http://django-mongodb.org/topics/mapreduce.html)

但它说：MongoDB 的 Map/Reduce 是为一次性操作而设计的，即它不打算用于定期执行的代码（视图、业务逻辑......）。

我现在的问题是：我在哪里使用它？有什么建议吗？我真的找不到。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T00:56:14.817

很难预测 mapreduce 函数需要多长时间（假设您有大量数据），因此对于生成许多用户经常使用的网页视图所需的处理来说，它们是一个糟糕的选择。

它对于对您的数据进行数据分析很有用，您愿意等待获得结果。它对于处理大量数据也很有用，例如更新数据库中每个文档的过程。

# php - MySQL列出所有条目并按ID排序

> ID：11375357
> 
> 赞同：0
> 
> 时间：2012-07-07T13:22:21.123
> 
> 标签：php, mysql, sorting

不知何故，我无法按 ID 列出我所有的 MySQL 条目。如果我尝试按 ID 排序，结果是错误的：

```
Notice: Undefined variable: url_bild in /Users/fatih/Sites/phpform/neu/adressen-anzeigen.php on line 66`
Notice: Undefined variable: title in /Users/fatih/Sites/phpform/neu/adressen-anzeigen.php on line 68` 
```

我的代码：

```
<?php
require_once ('konfiguration.php');

// Nutzen von Datenbank (Name ist hinterlegt in Konstante MYSQL_DATENBANK
$db_sel = mysql_select_db( MYSQL_DATENBANK )
    or die("Auswahl der Datenbank fehlgeschlagen");

$sql = " SELECT * FROM adressbuch order by id asc";
$db_erg = mysql_query( $sql );
if ( ! $db_erg )
{
    die('Ungültige Abfrage: ' . mysql_error());
}

while ($zeile = mysql_fetch_array( $db_erg, MYSQL_ASSOC))
{
    $title          = $zeile['title'];
    $description    = $zeile['description'];
    $applepart      = $zeile['applepart'];
    $partnumber     = $zeile['partnumber'];
    $productcode    = $zeile['productcode'];
    $compatibility  = $zeile['compatibility'];
    $url_bild       = $zeile['url_bild'];
    $price          = $zeile['price'];
}
mysql_free_result( $db_erg );

echo "<table id=\"products\" border=\"0\">";
echo    "<tr>"; if ( $url_bild <> "" ) {
echo        "<td class=\"thumbnail\"><img src=\"$url_bild\" /></td>"; }
echo        "<td class=\"description\"><h1>$title</h1>";
echo        "<p>$description</p>";
echo            "<table border=\"0\">";
echo                "<tr>";
echo                    "<td class=\"applepart\">Apple Part#:</td>";
echo                    "<td class=\"first\">$applepart</td>";
echo                    "<td class=\"second\">&nbsp;</td>";
echo                "</tr>";
echo                "<tr>";
echo                    "<td class=\"partnumbers\">Part Numbers:</td>";
echo                    "<td class=\"first\">$partnumber</td>";
echo                    "<td class=\"second\">&nbsp;</td>";
echo                "</tr>";
echo                "<tr>";
echo                    "<td class=\"productcode\">Product Code:</td>";
echo                    "<td class=\"first\">$productcode</td>";
echo                    "<td class=\"second\">&nbsp;</td>";
echo                "</tr>";
echo                "<tr>";
echo                    "<td class=\"compatibility\">Compatibility:</td>";
echo                    "<td class=\"first\">$compatibility</td>";
echo                    "<td class=\"second\"></td>";
echo                "</tr>";
echo        "</table>";
echo        "</td>";
echo        "<td class=\"price\"><h1>$price</h1></td>";
echo    "</tr>";
echo "</table>";

?> 
```

如果我只是设置为`SELECT * FROM adressbuch`我只得到最后一个条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T13:30:19.780

固定的：

```
echo "<table id=\"products\" border=\"0\">";    
while ($zeile = mysql_fetch_array( $db_erg, MYSQL_ASSOC))
{
    $title          = $zeile['title'];
    $description    = $zeile['description'];
    $applepart      = $zeile['applepart'];
    $partnumber     = $zeile['partnumber'];
    $productcode    = $zeile['productcode'];
    $compatibility  = $zeile['compatibility'];
    $url_bild       = $zeile['url_bild'];
    $price          = $zeile['price'];

echo    "<tr>"; if ( $url_bild <> "" ) {
echo        "<td class=\"thumbnail\"><img src=\"$url_bild\" /></td>"; }
echo        "<td class=\"description\"><h1>$title</h1>";
echo        "<p>$description</p>";
echo            "<table border=\"0\">";
echo                "<tr>";
echo                    "<td class=\"applepart\">Apple Part#:</td>";
echo                    "<td class=\"first\">$applepart</td>";
echo                    "<td class=\"second\">&nbsp;</td>";
echo                "</tr>";
echo                "<tr>";
echo                    "<td class=\"partnumbers\">Part Numbers:</td>";
echo                    "<td class=\"first\">$partnumber</td>";
echo                    "<td class=\"second\">&nbsp;</td>";
echo                "</tr>";
echo                "<tr>";
echo                    "<td class=\"productcode\">Product Code:</td>";
echo                    "<td class=\"first\">$productcode</td>";
echo                    "<td class=\"second\">&nbsp;</td>";
echo                "</tr>";
echo                "<tr>";
echo                    "<td class=\"compatibility\">Compatibility:</td>";
echo                    "<td class=\"first\">$compatibility</td>";
echo                    "<td class=\"second\"></td>";
echo                "</tr>";
echo        "</table>";
echo        "</td>";
echo        "<td class=\"price\"><h1>$price</h1></td>";
echo    "</tr>";
}
echo "</table>";
mysql_free_result( $db_erg );    

?> 
```

# html - 删除在 Chrome Mac 版本上不起作用

> ID：11375360
> 
> 赞同：1
> 
> 时间：2012-07-07T13:22:52.870
> 
> 标签：html, macos, google-chrome, drag-and-drop

我尝试使用 html5 拖放 api，它在 windows 机器上的 chrome 20.0.1132 上运行良好，但最有趣的是 - mac os lion 上的相同版本的 chrome 不起作用。我的意思是 dragstart 正在工作，但是 drop 事件、dragleave、dragover 没有被触发。这是html：

```
<form id="fake_form" action="#" >
            <div id="canvas_wrapper" style="overflow: hidden;width: 600px; position: relative;border: 1px solid black; margin-left: 30px;">
                <canvas width="600" height="300" >
                </canvas>
            </div>
 </form> 
```

这是javascript：

```
 var canvas = $('canvas')[0];
    canvas.addEventListener('dragenter', function(e){
        console.log('dragenter');
    }, false);
    canvas.addEventListener('dragleave', function(){
        console.log('dragleave');
    }, false)
    canvas.addEventListener('dragover', function(e){
        console.log('dragover');
        if(e.preventDefault){
            e.preventDefault();
        }
        return false;
    }, false);
    canvas.ondrop = function(e){
        console.log('ondrop');
    /** OTHER CODE **/ 
```

如果有帮助：在同一台 Mac 上的 safari 上 - 它可以工作，我正在拖动图像标签，其中一些具有可拖动属性，其中一些 - 不是。刚刚检查过 - 在 canary mac 版本 22 上它可以工作。

**更新：**我发现dragstart事件有一些魔力，如果我删除这`e.dataTransfer.setData('src', src_var)`一切都会正常工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T15:12:33.577

此问题的解决方案 - 当您使用`e.dataTransfer.setData`第一个参数应该是正确的 mime 类型时，我将其更改为`text/plain`并且一切正常

# java - If Statement String = 用于在国家/地区显示不同内容的文本

> ID：11375362
> 
> 赞同：0
> 
> 时间：2012-07-07T13:22:57.160
> 
> 标签：java, android, if-statement, country

也许是一个愚蠢的问题，但我想在我的代码中使用 if 语句，但我不会工作。

```
 String Country = getResources().getConfiguration().locale.getLanguage();

    if (Country = nl); 
```

所以我想在国家字符串为“nl”时使用 if 语句来执行一个函数，但我不知道如何使用我认为的 if 语句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T13:24:07.797

它是

```
if (Country.equals("nl"))
   ... 
```

现在：

1.  一般来说，平等是用 double 测试的`==`。
2.  字符串相等性应该用`equals`.

更多信息供将来使用：`==`用于测试相等性检查引用是否相同（即它们是内存中的同一个对象），这通常不是您需要的（当然，将其用于原始值按预期工作）。对于想要对类型进行自定义相等检查的情况，您可以覆盖该`equals`方法并将您的逻辑放在那里。这就是在`String`课堂上发生的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T14:10:14.533

```
 code something like this

     String Country = getResources().getConfiguration().locale.getLanguage();
    if(Country!=null)
    {
       if (Country.equals("nl")){ //something } else { }

    }

for string comparing use .equals method instead of == operator because == compare object are same or not instead of object value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T13:25:07.610

因为字符串是对象而不是原语，所以你不能使用 ==

但是你必须使用 .equals 代替，就像 Tudor 所展示的那样

# jquery - 登录后不会加载弹出窗口，但如果页面随后刷新则加载

> ID：11375364
> 
> 赞同：0
> 
> 时间：2012-07-07T13:23:11.007
> 
> 标签：jquery, ruby-on-rails-3, jquery-mobile, devise

我有一个弹出框，邀请用户在登录后完成一个过程。在我们的常规网络应用程序中，一切正常。在我们的移动网络应用程序中，在登录后首次加载索引页面时不会显示弹出窗口。当页面重新加载时，会显示弹出窗口。

在 application.js 中：

```
$(document).ready(function() {
    $("h1").fadeIn(1000);
    $('.fade').delay(2000).fadeOut(2000);
    loadPopupBox(); # --------------------------------- line that loads pop up
    $('.popupBoxClose').click( function() {            
        unloadPopupBox();
    });
    function unloadPopupBox() {
        $('.step_pop').fadeOut("slow");
    }    
    function loadPopupBox() {
        $('.step_pop').fadeIn("slow");
    }        
}); 
```

在 index.mobile.erb 中：

```
<% unless @step1 && @step2 && @step3 && @step4 %>
    <%= render :partial => "steps_pop" %>
<% end %> 
```

在 _steps_pop.mobile.erb 中：

```
<div class="step_pop" style="width: 90%; height: 80%; left: 5%; top: 5%; ">
    ... process description then yes or no
</div> 
```

我们正在使用 Devise 进行身份验证。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:10:46.100

而不是将弹出脚本放置在：

```
$(document).ready(function() 
```

我把它放在：

```
$( document ).delegate("#aboutPage", "pageinit", function() 
```

# tfs - TFS 2010 如何聚合从子工作项到父工作项的变更集关联/链接

> ID：11375367
> 
> 赞同：1
> 
> 时间：2012-07-07T13:23:19.713
> 
> 标签：tfs, tfsbuild, tfs-workitem, changeset

我正在使用 TFS 2010。

是否可以聚合从子工作项到父工作项的变更集关联/链接，以便（例如）要求自动链接/关联到链接到其子任务的所有变更集？

我有一个印象，我期待 TFS Build 服务可能会自动完成这项工作。但是现在当我尝试使用 TFS Build 时，它似乎并没有对从子工作项到父工作项的汇总（和聚合）变更集关联做任何事情。我认为它只是将新的/最近的变更集与当前的构建相关联。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T18:28:55.817

尝试[**TFS 聚合器**](http://tfsaggregator.codeplex.com/)

## 示例用途

*   当孩子移动到“进行中”时，将错误、PBI（或任何父级）的状态更新为“进行中”
*   当所有子级移动到“完成”或“已移除”时，将 Bug、PBI（或任何父级）的状态更新为“完成”
*   用所有任务的“剩余工作”的总和来更新 Bug、PBI 等上的“剩余工作”。
*   将 Sprint 上的“剩余工作”更新为其孙辈的所有“剩余工作”的总和（即 Sprint 中 PBI 和错误的任务）。
*   总结单个工作项的总计（即开发估计 + 测试估计 = 总估计）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:28:57.797

[这](http://blogs.msdn.com/b/buckh/archive/2012/02/01/listing-the-work-items-associated-with-changesets-for-a-path.aspx)是 B.Hodges 撰写的一篇出色的文章，描述了如何通过使用该`ILinking`服务在给定的源代码控制路径下检索工作项和变更集之间的连接。
您可以将此示例用作基础，以便构建一个自定义工具来完成您的工作。据我所知，没有这样的工具可用，所以我认为你最好的选择是使用 TFS-SDK 实现你需要的东西。@KMoraz 提出

的出色[工具仅在 WorkItems 的上下文中聚合关系，因此您将丢失变更集部分。](http://tfsaggregator.codeplex.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T16:36:02.647

工作项与变更集和构建的链接存储在关系仓库数据库中。您可以创建查询来检索信息。

此 MSDN 页面显示构建如何链接到变更集，然后链接到工作项。

[http://msdn.microsoft.com/en-us/library/ms244691.aspx](http://msdn.microsoft.com/en-us/library/ms244691.aspx)

# iphone - 什么是动作或 IBAction 方法？

> ID：11375379
> 
> 赞同：-2
> 
> 时间：2012-07-07T06:12:22.827
> 
> 标签：iphone, objective-c, ios, c, ibaction

> **可能重复：**
> [IBOutlet 和 IBAction](https://stackoverflow.com/questions/1643007/iboutlet-and-ibaction)

我对 Objective C 比较陌生，但不是我在 C 和 Python 方面都有经验的编程。我想知道 IBAction 方法是什么，它可以做什么，以及如何将它合并到我的程序中。并且，如果可能的话，C 中有没有办法绕过这个方法，而只是简单地用 C 编写它？提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T10:23:15.440

`IBActions`只是类型`void`。`IBAction`但是，为了 Interface Builder ，您可能希望使用它。

Interface Builder 是 Xcode 中用于设计应用程序并将布局附加到代码的集成服务。Interface Builder“知道”您要连接的内容，因为它们属于这两种类型之一。一旦你在你的代码中定义了`IBOutlet`or `IBAction`，你就可以通过拖放来将它连接到 Interface Builder 中的某个东西上。例如，如果您想制作一个触摸事件侦听器（或类似的东西），您可以使用 IBAction。

您可以在[https://developer.apple.com/library/mac/#documentation/General/Conceptual/Devpedia-CocoaApp/TargetAction.html](https://developer.apple.com/library/mac/#documentation/General/Conceptual/Devpedia-CocoaApp/TargetAction.html)上阅读有关该主题的 Apple 开发者页面的`IBOutlets`更多信息（这是针对 OS X 的文章开发人员，但它仍然适用于 iOS，因为两者构建的框架非常相似）。`IBActions`

# php - 如何执行相同的操作直到达到一个条件

> ID：11375381
> 
> 赞同：0
> 
> 时间：2012-07-07T13:25:25.530
> 
> 标签：php

如何执行相同的操作直到达到一个条件？例如：

```
<?php
  $n = rand(5,157);
  if ($n=='63'){
    echo 'ok';
  } else {
    //* another random, until rand () will give 63  *//
  }
?> 
```

我怎样才能解决这个问题？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T13:26:48.017

您需要使用[while 循环](http://php.net/manual/en/control-structures.while.php)：

```
<?php
  $n = rand(5,157);
  while ($n != 63) {
    $n = rand(5,157); // n is not 63, get another number
  }

  echo 'ok';
?> 
```

`if`将检查条件一次，而`while`将检查条件直到它不是`true`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T13:32:10.463

查看 PHP [while 循环](http://php.net/manual/en/control-structures.while.php)。我们希望在最后一个不等于 63**时**继续生成一个随机数。所以使用：

```
$n = rand(5,157);

while($n != 63){
    $n = rand(5,157);
}

echo "ok"; 
```

So`$n`设置为初始值，并且每个 while 循环都会生成一个新值，`$n`然后对其进行检查。当`n=63`循环中断并回显“ok”时。

# .htaccess - Google SEO 对使用 .htaccess 规则忽略顶级目录的注意事项

> ID：11375384
> 
> 赞同：1
> 
> 时间：2012-07-07T13:25:37.140
> 
> 标签：.htaccess, redirect, search-engine, concrete5

我正在使用 Concrete 5 CMS 来建立一个网站，我想把它推送到现场。

我将代码放在一个名为的目录中`/concrete5.5.2.1`，而不是更新数据库中的引用并将代码移动到文件系统上，我正在考虑使用 .htaccess 规则来有效地忽略该目录。

但是，我很想知道在下面做这样的事情是否意味着谷歌会索引 /concrete5.5.2.1？还是会被忽略？

```
RewriteEngine On 
RewriteRule ^concrete5.5.2.1/(.+)$ http://www.ayrshireminis.com/$1 [R=301,L] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T16:58:25.357

您不需要使用 .htaccess 文件来让站点显示在不同的位置，只需将该目录的内容移动到根目录，清除缓存，然后重新运行搜索索引作业。

您不必进行任何数据库更改，因为内容中的 url 会被解析然后缓存。

麦克风

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T15:39:01.360

Google 将与其他用户一样，只会看到您提供的 URL。所以他们不会知道该目录存在。

# c++ - 通过 Web 请求 C++/Node.js 进行 Windows 身份验证

> ID：11375385
> 
> 赞同：9
> 
> 时间：2012-07-07T13:25:42.197
> 
> 标签：c++, node.js, iis, windows-authentication

**问题** 我希望能够将 Windows 身份验证与 Node.js 一起使用。

我知道 IIS 在 ASP.NET 中处理 Windows 身份验证，但是我不知道如何从 node.js 获取当前客户端 Windows 用户名。我知道它不是通过 IIS 运行的（并且真的不想走 IISNode 路线）。

必须有一种方法可以通过 Node.js 获取客户端的 Windows 用户名——即使我必须编写 C++ 库/服务。

最初的想法是，我可以在 ASP.NET 中设置一个 Web 服务，该服务将使用 Windows 身份验证，并允许我使用 Web 请求来获取该用户 - 但这可能太天真了！

我不想向用户询问他们的用户名和密码——因为这没有抓住重点。

有什么想法、想法或我可以查看的地方吗？或者这是不可能的？

注意：这是在封闭的 Intranet 中，Windows 身份验证在我们的 ASP.NET 应用程序中与 Active Directory 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T02:39:11.727

**方法**

除非我错过了一些要求，否则您应该能够设置一个 IIS 网站来将请求中继到您的 Node.js 应用程序，以便

*   客户端浏览器将对您的 IIS 站点进行身份验证；
*   IIS 站点会将经过身份验证的请求转发到 Node.js 应用程序并返回给客户端。

确保禁用匿名访问并仅将 IWA 用于 IIS 站点。

有关如何使用 C# 或 VB 在 ASP.NET 中中继请求的几个示例，请参阅[在 ASP.NET中中继请求。](https://stackoverflow.com/questions/697177/relaying-a-request-in-asp-net-forwarding-a-request)您还需要使用标头或 GET/POST 参数传递用户名：

```
Response.AppendHeader("CustomUserNameHeader", Page.User.Identity.Name); 
```

**假设**

*   Node.js 应用程序需要知道在客户端计算机上登录的用户的名称。
*   可以使 Node.js 应用程序只能从 IIS 站点访问，否则，该解决方案是完全不安全的。

# asp.net-mvc - 依赖注入容器如何管理它没有注册的对象？

> ID：11375386
> 
> 赞同：0
> 
> 时间：2012-07-07T13:25:48.500
> 
> 标签：asp.net-mvc, dependency-injection

所以我不久前阅读了 .NET 中的依赖注入这本书。现在尝试使用DIC。但是，我有一些我不太明白的事情。两个例子：

### 1.如果我有一些旧代码或使用这样的单例静态方法的第 3 方 dll：

```
var objTool = ThirdPartyTool.GetInstance();
objTool.DoStuff();
... 
```

### 2.如果我在创建临时对象的方法中有一些代码：

```
var tempOrder = new Order();
tempOrder.Total = strArray.[0];
tempOrder.ItemId = strArray.[1];
tempOrder.ShipAddress = strArray[2];
if(Customer.HasConfirmedOrder) { Customer.Order = tempOrder; }
 ... 
```

在这两种情况下，在我进入 DIC 世界之前，我知道那些对象在超出范围时自然会被 GC 收集，或者如果有一个 Dispose() 可以调用，我有责任在我使用对象后在某个地方调用它.

DIC 如何对待他们？（我在 .NET 4 MVC 3 项目上运行 Ninject，但我猜其他语言/项目和 DIC 具有几乎相同的结构）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T14:58:36.193

如果一个对象不是由 DI 框架管理的，如您提供的示例，您有责任管理其生命周期，并在必要时对其调用 Dispose（特别是如果此对象实现 IDisposable）

所以回答你的问题：

> DIC 如何对待他们？

它根本不对待他们。DI 框架甚至不知道它们的存在。

DI 框架负责管理您向其显式注册的对象。

# visual-studio-2010 - 如何在 VS2010 .NET 4.0 动态数据网站中创建 DropDownList

> ID：11375387
> 
> 赞同：0
> 
> 时间：2012-07-07T13:25:53.257
> 
> 标签：visual-studio-2010, c#-4.0, drop-down-menu, asp.net-4.0, dynamic-data

我是 Visual Studio 2010 .NET 4.0 动态数据的新手。现在我正在尝试为我的网站做一个简单的下拉列表（用 C# 编写）。

我有一个名为协议的字段（如 TCP 协议中的）。我希望用户能够选择静态值之一。在过去使用经典的 ASP 和 HTML 时，我会使用这样的东西：

```
<form name=form1 method="POST" action="./insert.asp">
...
     <select name="PROTOCOL" size="1">
        <option value="https" selected>https
        <option value="sftp">sftp
        <option value="ftps">ftps
     </SELECT>
...
</form> 
```

...然后在./insert.asp 中处理数据库。

到目前为止，我已经找到了有关如何在 Visual Studio 2008 (.NET 3.5) 中执行此操作的说明，但这在 WS2010 和 .NET 4.0 中不起作用： [http ://csharpbits.notaclue.net/2008/07/dynamic -data-and-field-templates-your.html](http://csharpbits.notaclue.net/2008/07/dynamic-data-and-field-templates-your.html)

按照[http://www.asp.net/web-forms/videos/aspnet-dynamic-data](http://www.asp.net/web-forms/videos/aspnet-dynamic-data)中的说明，我认为为了自定义我需要的字段

*   在 App_Code 文件夹 (MyService.cs) 中为我的自定义代码创建文件。
*   为我的 MS-SQL 表（**服务**）创建一个“公共部分类”。

这是我的（¿可悲的？）努力（App_Code/MyService.cs）：

```
// MyService.cs
using System;
using System.ComponentModel.DataAnnotations;
using System.Web;
using System.ComponentModel;

   [MetadataType(typeof(serviceMetadata))]
    public partial class service
    {

    }

    public class serviceMetadata
    {
        [EnumDataType(typeof(ProtocolType))]
        public object protocol { get; set; }

    }

   public enum ProtocolType
    {
        https,
        sftp,
        ftps
    } 
```

这构建正常，但运行它以“ArgumentException 未由用户代码处理/传入的值必须是枚举基础或枚举的基础类型，例如 Int32”结束。\DynamicData\FieldTemplates\Enumeration.ascx.cs -file 中的消息。

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:34:47.877

好的，由于没有人试图回答这个问题，我会尝试回答我自己的问题。

在我看来，这个问题没有开箱即用的方法。但是，在我看来（如果我错了，请纠正我）这个问题有三种可能的解决方案：

1.  改变数据库结构
    *   添加新表，其中包含协议并将其链接到服务表：
        *   添加包含这些字段的协议表。
            *   协议.id（int，主键）
            *   协议.protocol (char(10))
    *   删除（删除） service.protocol -field
    *   添加一个 service.protocols_id -field。
    *   建立关系：FK:service.protocols_id --references-->> PK:protocols.id
2.  将 service.protocol -field 更改为 numeric (int)

    *   将协议名称替换为数值（1、2、3）
    *   更改枚举代码：

        ```
        public enum ProtocolType 
        {
            https = 1,
            sftp = 2,
            ftps = 3
        } 
        ```

    *   有关该主题的更多信息：http: [//msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.enumdatatypeattribute.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.enumdatatypeattribute.aspx)

3.  创建您自己的 FieldTemplate

    *   需要深入了解 .NET 4.0、DynamicData、C#（或任何您的编程语言）、数据上下文（=表示数据库实体的类）
    *   您可以通过右键单击 ...\DynamicData\FieldTemplates\ -文件夹开始，选择 DynamicDataField，重命名为 MyDropDownList，单击添加。
    *   有关该主题的更多信息：http: [//msdn.microsoft.com/en-us/library/cc488522.aspx](http://msdn.microsoft.com/en-us/library/cc488522.aspx)

欢迎评论。

# php - 显示来自 db 的值，无需在 php 中登录

> ID：11375388
> 
> 赞同：0
> 
> 时间：2012-07-07T13:26:08.203
> 
> 标签：php

即使用户未登录，我也需要显示用户从 db 创建的内容。

```
<? php

$get_user_content = mysqli_query($conn, "SELECT * FROM content WHERE UserName = '$username'") or die($dataaccess_error);

if(mysqli_num_rows($get_user_content) == 1 )
{
  $row = mysqli_fetch_array($get_user_content);

  $title = $row['utitle'];
  $content = $row['ucontent'];
}

echo $title;
echo $content;

?> 
```

但我收到两个错误：

```
undefined variable: username 
```

和

```
Warning: mysqli_query() expects parameter 1 to be mysqli 
```

我是 PHP 编码的新手。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T04:17:24.827

您需要定义用户名变量，还需要连接到数据库。如果你打算使用 mysqli，那么最好使用面向对象的风格。Mysqli 可能不是理想的解决方案，请在此处查看此 Cletus 答案：[MySQL vs MySQLi when using PHP](https://stackoverflow.com/questions/548986/mysql-vs-mysqli-in-php)

您需要查看 php.net 上的 php 指南以学习该语言，并确保查看评论。你也可以谷歌教程。如果一切都失败了，那么 stackoverflow 将是寻求帮助的地方。

```
<?php
$username = trim($_POST['username']); //where username is a form field sent using post method, we trim it to remove white spaces so if user just enters spaces, the script will see it as empty string.

//Connect to database  http://www.php.net/manual/en/mysqli.query.php
$conn = mysqli_connect("localhost", "my_user", "my_password", "yourdatabasename");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

if ($username){
    $username=mysqli_real_escape_string($conn, $username); //escape the string AFTER you connect http://www.php.net/manual/en/mysqli.real-escape-string.php
    $get_user_content = mysqli_query($conn, "SELECT * FROM content WHERE UserName =    '$username' LIMIT 1") or die(mysqli_error($conn));  //assuming you have table called content with a field called UserName to store the username, add limit 1 since you only need one anyway.  , where does databaseaccess_error comes from? it's undefined. use mysqli_error

   if(mysqli_num_rows($get_user_content) == 1 )
   {
       $row = mysqli_fetch_array($get_user_content);

       $title = $row['utitle'];
       $content = $row['ucontent'];

       echo $title;
       echo $content;
   }else echo "User couldn't be found";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T21:32:44.107

如果您正在显示由用户创建的信息，则在没有用户登录的情况下很难显示该信息。

我能想到的唯一方法是在创建帐户时存储用户 IP，并在任何人访问该页面时读取 IP。如果匹配用户，则显示信息。但是，这样做时您可能会冒一些安全措施的风险，并且当 IP 更改时，这可能会在将来以这种方式搞砸事情。

不过要明确一点，您想显示我在访问页面时在您的网站上创建的内容，但没有我登录？或者只是任何用户创建的东西？

# xcode - Mac OS X Lion 10.7.4 硬盘上的开发者文件夹

> ID：11375389
> 
> 赞同：2
> 
> 时间：2012-07-07T13:26:09.733
> 
> 标签：xcode, macos

我希望在 HDD 上看到一个“开发者文件夹”，我使用的是 Mac OS X Lion 10.7.4，但没有。

![www.kerrydeaf.com/apple.png](../Images/96bfcc7c795221449d5bce64f8da1b81.png)

[我已经通过此链接](https://developer.apple.com/downloads/index.action)从“下载 Apple 开发人员”下载了“Xcode 命令行工具”

我将使用 HTML、CSS 和 Javascript 通过 Xcode 开发应用程序。我已经安装了 Xcode 并在 Apple 注册。我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T13:28:12.730

他们似乎废弃了 /Developer 文件夹，现在将所有内容都保留在 /Applications/Xcode.app/...

# android - Android：如何动态调整线性布局的 BackgroundDrawable 大小

> ID：11375391
> 
> 赞同：0
> 
> 时间：2012-07-07T13:26:17.253
> 
> 标签：android, android-layout, background-image, android-linearlayout, android-relativelayout

我必须为 LinearLayout 设置 BackgorundDrawbale。BackgroundDrawable 具有比 LinearLayout 更大的高度，并忽略 XML 布局中定义的高度（除了我不想使用绝对高度而是“wrap_content”） - 因此增加了布局的高度。有没有办法动态缩放 Drawable 而不增加高度？- 或者我是否必须在 Photoshop 中将 Drawable 裁剪到正确的高度？- 必须有另一种方式。

我已经在 StackOverflow 上解决了使用 RelativeLayout 的类似问题。但是我没有得到想要的结果。

我的布局如下所示，它在第一行的 ListView 中使用。布局应该在图像下方结束 - 但它不是因为 Drawable。

![第一行的 ListView LinearLayout](../Images/b36f123c1517af1f2a75d65219d86452.png)

目前我正在使用以下 XML 布局。

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="@android:color/black">

<LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/foto_detail_bg_cell_0"
        >

    <ImageView
            android:id="@+id/icon"
            android:layout_width="100px"
            android:layout_height="100px"
            android:layout_marginRight="6dip"
            android:layout_marginTop="6dip"
            android:layout_marginBottom="6dip"
            android:src="@drawable/icon"

            />

    <LinearLayout
            android:orientation="vertical"
            android:paddingTop="5dip"
            android:layout_width="0dip"
            android:layout_weight="1"
            android:layout_height="wrap_content"

            >
        <TextView
                android:id="@+id/toptext"
                android:layout_width="fill_parent"
                android:layout_height="0dip"
                android:ellipsize="marquee"
                android:layout_weight="1"
                android:paddingLeft="10dip"
                android:gravity="center_vertical"
                android:textStyle="bold"
                android:textSize="14dip"
                />
        <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:inputType="textMultiLine"
                android:maxLines="3"
                android:scrollHorizontally="false"
                android:layout_weight="1"
                android:paddingLeft="10dip"
                android:id="@+id/bottomtext1"
                android:singleLine="true"
                android:ellipsize="marquee"
                android:textSize="14dip"

                />

        <TextView
                android:layout_width="fill_parent"
                android:layout_height="0dip"
                android:layout_weight="1"
                android:paddingLeft="25dip"
                android:id="@+id/bottomtext2"
                android:singleLine="true"
                android:ellipsize="marquee"
                android:textSize="14dip"

                />
    </LinearLayout>

</LinearLayout> 
```

我会很高兴得到一些提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T14:54:29.773

最后，我使背景图像小于布局的高度。现在它会自动缩放（拉伸）到正确的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T13:42:47.157

使用单个相对布局，并使用换行内容固定高度和宽度。对我来说工作正常的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RelativeLayout1"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="#ffffff"
android:clickable="true"
android:orientation="vertical" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:clickable="true"
    android:gravity="center_vertical"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="#000000"
    android:layout_marginTop="10dip"/>

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/textView1"
    android:gravity="center_vertical"
    android:singleLine="true"
    android:textColor="#000000"/>

    <ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"/>

</RelativeLayout> 
```

# java - Vector 与 ArrayList 哪个更好？

> ID：11375392
> 
> 赞同：43
> 
> 时间：2012-07-07T13:26:18.313
> 
> 标签：java, vector, arraylist

> **可能重复：**
> [为什么 Java Vector 类被认为已过时或不推荐使用？](https://stackoverflow.com/questions/1386275/why-is-java-vector-class-considered-obsolete-or-deprecated)

哪种类型更好用以及如何选择正确的类型（内存使用、执行......）？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-07-07T13:29:35.967

您通常应该使用`ArrayList`- 它提供更好的性能。

`Vector`只有一个“优势”——它是同步的，可以同时修改。但在实践中，这个特性并不是很有用，因为`Vector`在每个单独的操作级别上进行同步。如果您正在编写并发代码，您通常需要以比单个集合类更高的粒度级别进行锁定。

因此，`Vector`如今通常被认为已弃用。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-07-07T13:29:05.783

根据这个[问题](https://stackoverflow.com/questions/1386275/why-is-java-vector-class-considered-obsolete-or-deprecated) `Vector`被认为是“过时的”，请`ArrayList`改用。

# php - 如何通过在 PHP 中使用另一个数组来计算数组？

> ID：11375395
> 
> 赞同：3
> 
> 时间：2012-07-07T13:26:35.863
> 
> 标签：php

我有一个组数组和成员数组。Group_one 可以是成员、管理员等

```
//groups:
Array
(
[0] => Array
    (
        [id] => 1
        ...
        [name] => Group_one
        ...
    )
[1] => Array
    (
        [id] => 2
        ...
        [name] => Group_two
        ... 
    )
... 
```

* * *

```
//members:
CI_DB_mysql_result Object
(
[conn_id] => Resource id #12
[result_id] => Resource id #55
[result_array] => Array
    (
        [0] => Array
            (
                [id] => 2
                ...
                [group] => Group_2
                [group_id] => 2

            )
        [1] => Array
            (
                [id] => 5
                ...
                [group] => Group_four
                [group_id] => 4

            )
            ... 
```

现在我想计算 Group_one、Group_two 等中有多少。

我尝试了以下但不工作。

```
foreach($groups as $group)
{
  foreach ($members->result_array() as $key => $list)
  {
    if($group['id']==$list['group_id'])
    {   
        $stack[] = array();
        array_push($stack,$list);
    }
  }
}
echo "<pre>stack is:";
//print_r($stack);
echo count($stack);
echo"</pre>end of stack"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T13:31:24.630

像这样的东西怎么办——

```
$groupCount = array();
foreach($groups as $group){ $groupCount[$group['id']] = 0; }
foreach($members->result_array() as $member){
  $groupCount[$member['group_id']]++;
}

print_r($groupCount); 
```

1.  首先，我创建并初始化一个数组来保存每个*组*`group_id`的所有总数。
**   然后我遍历每个成员，并通过*member*`group_id`的参数增加该组的计数器。*

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T13:44:20.420

可能这样的事情会做的工作：

```
<?php

$groups = array(
    array(
        "id"    => 1,
        "name"  => "Group one",
    ),
    array(
        "id"    => 2,
        "name"  => "Group two",
    ),
    array(
        "id"    => 3,
        "name"  => "Group three",
    ),
);

$members = array(
    array(
        "id" => 1,
        "group" => "Group 1",
        "group_id" => "1"
    ),
    array(
        "id" => 2,
        "group" => "Group 1",
        "group_id" => "1"
    ),
    array(
        "id" => 3,
        "group" => "Group 2",
        "group_id" => "2"
    ),
    array(
        "id" => 4,
        "group" => "Group 2",
        "group_id" => "2"
    ),
    array(
        "id" => 5,
        "group" => "Group 2",
        "group_id" => "2"
    ),
    array(
        "id" => 5,
        "group" => "Group 3",
        "group_id" => "3"
    ),
);

$count = array();
foreach($members as $member){
    $count[$member['group_id']] = $count[$member['group_id']]+1;
}

var_dump($count);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T14:16:12.673

您的组和成员的 OOP 结构怎么样？我懂了：

```
<?php

/**
 * This cass describes a single group
 */
class Group {
    private $id;
    public $name;
    private $members;

    /**
     * @param int $id
     * @param string $name
     */
    public function __construct($id, $name) {
        $this->id = $id;
        $this->name = $name;
    }

    /**
     * Add a member to the list
     * @param Member $member
     */
    public function add_member(Member $member) {
        $this->members[$member->get_ID()] = $member;
        $member->associate_group($this);
    }

    /**
     * Remove a member from the list
     * @param Member $member
     * @throws Exception in case of Member not existing.
     */
    public function remove_member(Member $member) {
        if (!in_array($member, $this->members, true)) {
            throw new Exception("Member is not found in this group!");
        }
        unset($this->members[$member->get_ID()]);
    }

    public function count_members() {
        return count($this->members);
    }
}

class Member {
    private $id;
    private $group;

    /**
     * @param int $id
     */
    public function __construct($id) {
        $this->id = $id;
    }

    /**
     * Associate this member with a group
     * @param Group $group
     */
    public function associate_group(Group $group) {
        $this->group = $group;
    }

    public function get_group() {
        return $this->group;
    }

    public function get_ID() {
        return $this->id;
    }
}

//Now to Action!
/** @var $groups Group[] */
$groups = array(
    new Group(1, "Group One"),
    new Group(2, "Group Two"),
    new Group(3, "Group Three"),
    new Group(4, "Group Four"),
);
$count = array();

//This would probably be called from within a loop iterating over database results
$groups[0]->add_member(new Member(1));
$groups[0]->add_member(new Member(2));
$groups[1]->add_member(new Member(3));
$groups[2]->add_member(new Member(4));
$groups[3]->add_member(new Member(5));
$groups[3]->add_member(new Member(6));
$groups[3]->add_member(new Member(7));

var_dump($groups);

//Good! Now all we need to do is count the members
foreach($groups as $group) {
    $count[$group->name] = $group->count_members();
}

print_r($count); 
```**

# svn - 在 ubuntu 小查询上设置 SVN 服务器

> ID：11375399
> 
> 赞同：0
> 
> 时间：2012-07-07T13:27:24.537
> 
> 标签：svn, ubuntu, repository, subversive, svn-server

我已经在我的服务器上设置了 Subversion 存储库。当我将任何文件添加到我的工作副本并提交时，它表示已成功提交。现在，当我从 url 访问存储库位置时，它会向我显示那些文件，但是当我通过 SSH 登录并查看存储库文件夹时，文件不存在。

例如：在以下网址上，我看到了我的存储库中所有文件夹和文件的列表

[http://ec2-23-23-213-14.compute-1.amazonaws.com/myproject/](http://ec2-23-23-213-14.compute-1.amazonaws.com/myproject/)

但是当我查看我的 /www/myproject/ 时，从 SSH 我只找到以下文件

README.txt, conf, db, format, hooks, locks, project1 其中“project1”是我的初始导入。

只是这样还是我在设置SVN时犯了任何错误。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T13:37:57.777

SVN 将文件、差异、属性、修订等存储在数据库中。不要期望直接在存储库文件夹下找到文件。

如果您可以通过 SVN 客户端访问存储库，并且一切都按预期运行，那么您的服务器运行良好。

# ios - 在 ios 上安装 pyopenssl

> ID：11375408
> 
> 赞同：0
> 
> 时间：2012-07-07T13:28:25.373
> 
> 标签：ios, pyopenssl

当我输入：easy_install pyopensll 结果是：

```
davie:~ root# easy_install pyopenssl
Searching for pyopenssl
Reading http://pypi.python.org/simple/pyopenssl/
Reading http://pyopenssl.sourceforge.net/
Reading http://launchpad.net/pyopenssl
Best match: pyOpenSSL 0.13
Downloading http://pypi.python.org/packages/source/p/pyOpenSSL/pyOpenSSL- 0.13.tar.gz#md5=767bca18a71178ca353dff9e10941929
Processing pyOpenSSL-0.13.tar.gz
Running pyOpenSSL-0.13/setup.py -q bdist_egg --dist-dir /tmp/easy_install-faDtsb/pyOpenSSL-0.13/egg-dist-tmp-bvjmgV
warning: no previously-included files matching '*.pyc' found anywhere in distribution
In file included from OpenSSL/crypto/crypto.c:14:
/usr/include/python2.5/Python.h:18:20: error: limits.h: No such file or directory
/usr/include/python2.5/Python.h:21:2: error: #error "Something's broken.  UCHAR_MAX should be defined in limits.h."
/usr/include/python2.5/Python.h:25:2: error: #error "Python's source code assumes C's unsigned char is an 8-bit type."
/usr/include/python2.5/Python.h:32:19: error: stdio.h: No such file or directory
/usr/include/python2.5/Python.h:34:5: error: #error "Python.h requires that stdio.h define NULL."
/usr/include/python2.5/Python.h:37:20: error: string.h: No such file or directory
/usr/include/python2.5/Python.h:39:19: error: errno.h: No such file or directory
/usr/include/python2.5/Python.h:41:20: error: stdlib.h: No such file or directory
/usr/include/python2.5/Python.h:43:20: error: unistd.h: No such file or directory
/usr/include/python2.5/Python.h:55:20: error: assert.h: No such file or directory
In file included from /usr/include/python2.5/Python.h:57,
             from OpenSSL/crypto/crypto.c:14:
/usr/include/python2.5/pyport.h:7:20: error: stdint.h: No such file or directory
In file included from /usr/include/python2.5/Python.h:57,
             from OpenSSL/crypto/crypto.c:14: 
/usr/include/python2.5/pyport.h:73: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'Py_uintptr_t'
/usr/include/python2.5/pyport.h:74: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'Py_intptr_t'
/usr/include/python2.5/pyport.h:97: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'Py_ssize_t' 
```

这只是结果的三分之一，有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T13:55:00.937

如果您想要的只是 pyOpenSSL，您可以添加[iNinjas Cydia 存储库](http://ininjas.com/repo/ "iNinjas 存储库")并从那里安装它。

您的设备上似乎没有安装有效的 C 编译器。这对我来说一直是个问题，直到我找到名为“Compile C Apps iOS4”的包。它在[这个 repo的 iBeta 部分](http://repo.insanelyi.com/ "疯狂回购")

`easy_install`安装后，如果要手动安装，请再次尝试。

# java - 如何在 iText 中放置表格

> ID：11375410
> 
> 赞同：0
> 
> 时间：2012-07-07T13:28:53.827
> 
> 标签：java, pdf-generation, itext

感谢您花时间回答我的问题。我在 PDF 模板中动态填充数据。除一部分外，一切都按预期工作。我在 Java 代码中生成的表格未显示在 PDF 中。我的问题是如何使用 iText 的 API 在左上角放置一个表格？

到目前为止，这是我的代码：

```
PdfPTable table = new PdfPTable(3);
PdfPCell cell = new PdfPCell(new Phrase("VAT Rate"));
table.setWidthPercentage(500);
table.addCell(cell);
cell = new PdfPCell(new Phrase("Net Value"));
table.addCell(cell);
table.addCell("VAT Amount");
table.addCell(Double.toString(currentVatRate));
table.addCell(Double.toString(currentVatRateNetValue));
table.addCell(Double.toString(currentVatVatAmount));
table.addCell("Totals");
table.addCell(Double.toString(subTotalExcludingVat));
table.addCell(Double.toString(totalVatAmount)); 
```

基本上我需要一个 3 列的表，每列 33%。如何设置表格位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T14:01:30.303

尝试这个：

```
// table.setWidthPercentage( 500 );
table.setWidths( new int[]{ 1, 1, 1 } ); 
```

您应该使用类似于以下代码的内容：

```
com.itextpdf.text.Document document =
    new com.itextpdf.text.Document( com.itextpdf.text.PageSize.A4 );
FileOutputStream fos = new FileOutputStream( outputFileFolder + "PdfTableExample.pdf" );
com.itextpdf.text.pdf.PdfWriter pdfWriter =
    com.itextpdf.text.pdf.PdfWriter.getInstance( document, fos );

document.open();
document.add( table );
document.close(); 
```

# c# - 如何使用 get 从 C# 类返回布尔值？

> ID：11375417
> 
> 赞同：0
> 
> 时间：2012-07-07T13:29:55.677
> 
> 标签：c#

我有以下内容：

```
public class Content {
   public string PartitionKey { get; set; }
   public string RowKey { get; set; }
   ...
}

public class ContentViewModel
    {
        public string RowKey { get; set; }
        public Content Content { get; set; }
        public Boolean UseRowKey { }

    } 
```

有人可以告诉我如何将 UseRowKey 编码为只读，并且如果 Content.RowKey 第一个字符是“X”，它返回 true。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T13:31:36.950

您可以使用以下代码：

```
public Boolean UseRowKey {
    get {
        return Content != null
            && Content.RowKey != null
            && Content.RowKey.Length > 0
            && Content.RowKey[0] == 'X';
    }
} 
```

如果您的构造函数和设置器验证这些条件始终为假，您可以删除其中一些检查。例如，如果您在构造函数中设置内容并向设置器添加检查以捕获 的空分配`Content`，则可以删除该`Content != null`部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T13:32:39.660

> 如何使用 get 从 C# 类返回布尔值？

你不能因为类没有返回值，只有方法有（和属性 - get 方法是方法的特例）。

现在：

> 有人可以告诉我如何将 UseRowKey 编码为只读并且如果 Content.RowKey 第一个字符是“X”则返回 true

但这不是“从类中返回布尔值”，你知道的。

```
public bool UseRowKey { get { return RowKey.StartsWith("X"); }} 
```

（未经测试，您可能需要调试）

只读：不提供集合。第一个字符 X：编程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T13:32:07.810

```
public Boolean UseRowKey 
{  
   get
   {
       if(!String.IsNullOrEmpty(RowKey))
       {
           return RowKey[0] == 'X'; 
       }
       return false;

   }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-07T13:33:14.780

```
public bool UseRowkey
{
    get
    {
        return this.Content.RowKey[0] == 'X';
    }
} 
```

顺便说一句，您似乎在执行 ViewModel 模式错误。ViewModel 不应该是模型的包装器。Model 的值应该通过一些外部代码映射到 ViewModel。例如，使用 AutoMapper。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-07T13:38:14.437

还有另一种选择......这个接受大写`X`和小写`x`。

```
public bool UseRowKey
{
    get
    {
        return Content != null
            && !string.IsNullOrEmpty(Content.RowKey)
            && Content.RowKey
            .StartsWith("x", StringComparison.InvariantCultureIgnoreCase);
    }
} 
```

# iphone - CoreData sqlite3 db - 使用 python 脚本填充时间戳列

> ID：11375422
> 
> 赞同：0
> 
> 时间：2012-07-07T13:30:24.640
> 
> 标签：iphone, python, ios, sqlite, core-data

我有一个由 sqllite 数据库支持的 coredata 模型。我想用一些初始数据填充数据库。

到目前为止，我一直在使用 Python 来执行此操作，并且运行良好。唯一不起作用的是插入日期。我了解 coredata 以纪元格式存储日期，所以我目前通过 Python 插入它们，如下所示：

```
time.mktime(datetime(2012, 7, 1, 12, 30, 30).timetuple()) 
```

但是，当通过 coredata 加载数据时，这并没有给我正确的日期。关于如何格式化日期以便通过 coredata 正确读取日期的任何想法？

*注意：我意识到大多数人建议通过使用相同模型的小应用程序而不是使用 Python 脚本来执行此操作，但我发现 Python 语法对于构造和插入大量对象更简洁。

**例如** ，我可以调用插入数据的方法，如下所示：

```
insertData(con, 1, 1, 'Data 1', 'Description') 
```

*与具有冗长方法调用的 Objective-C 对比：*

```
[self insertdata withCon:con id: 1 i2:1 val:@"Data 1", Desc:@"Description"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T11:24:16.070

Core Data 似乎使用 2001 年 1 月 1 日，GMT 作为参考日期（与`NSDate`方法相同`timeIntervalSinceReferenceDate`）而不是 1970，作为`mktime`Python 中的函数，因此您必须根据它计算时间戳。

当然，这完全没有记录，我同意[dpjanes 的回答](https://stackoverflow.com/a/11382631/573626)，即这种方法通常是一个坏主意。

如果你真的想这样做，你可以像这样在 Python 中构造一个适当的时间戳：

```
import time
from datetime import datetime

ref = time.mktime(datetime(2001, 1, 1, 0, 0, 0).timetuple())
now = time.time() - ref 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T11:05:54.590

唉，不要这样做。我一直使用 Python 来填充 sqlite 数据库并使用 Objective-C 和 Java 读取它们，但 CoreData 是*使用*sqlite 的东西，但它的使用方式可能会随着时间而改变。

> 因为 Core Data 不打算成为 sqlite 的 ORM，所以它不能读取任意 sqlite 模式。相反，您不应该依赖于能够使用其他 sqlite 工具读取 Core Data 的 sqlite 数据存储；架构是一个可能会改变的实现细节。

来自[https://stackoverflow.com/a/524301/96338](https://stackoverflow.com/a/524301/96338)

# bash - 如何从文件中删除重复项并写入同一个文件？

> ID：11375426
> 
> 赞同：10
> 
> 时间：2012-07-07T13:31:10.543
> 
> 标签：bash, file, sorting, duplicates, in-place

我知道我的标题不言自明，但让我在这里尝试解释一下。

我有一个文件名`test.txt`，其中有一些重复的行。现在，我想做的是删除那些重复的行，同时删除`update test.txt`新的内容。

**测试.txt**

```
AAAA
BBBB
AAAA
CCCC 
```

我知道我可以`sort -u test.txt`用来删除重复项，但要使用新内容更新文件，如何将其输出重定向到同一个文件。下面的命令不起作用。

```
sort -u test.txt > test.txt 
```

那么，为什么上面的命令不起作用，正确的方法是什么？

还有其他方法吗

```
sort_and_update_file test.txt 
```

无需重定向即可对我的文件进行排序并自动更新。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-07T13:37:33.747

这可能对您有用：

```
sort -u -o test.txt test.txt 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-07T13:46:44.857

当您尝试同时从同一个文件中读取和写入时，shell 中的重定向将不起作用。`> file.txt`实际上，在执行排序之前文件已打开以写入 ( )

@potong 的答案有效，因为排序程序本身可能将所有行存储在内存中，我不会依赖它，因为它没有在手册页中明确指定它可以与输入文件相同（尽管它可能会起作用）。除非记录为“就地”工作，否则我不会这样做（@perreal 的答案会起作用，或者您可以将中间结果存储在 shell 内存中）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-07T14:37:08.700

### 使用 Sponge 读取/写入同一文件

您可以使用[moreutils中的](http://joeyh.name/code/moreutils/)*海绵*实用程序在写入文件之前吸收标准输出。这可以防止您必须四处打乱文件，并近似于就地编辑。例如：

```
sort -u test.txt | sponge test.txt 
```

### 样本输出

使用您的语料库，这会产生预期的输出。

```
$ cat test.txt 
AAAA
BBBB
CCCC 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-07T13:39:00.117

这并不像看起来那么低效：

```
sort -u test.txt > test.txt.tmp && mv test.txt.tmp test.txt 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-19T22:28:23.697

您可以使用 vim 就地编辑文件：

```
$ ex -s +'%!sort' -cxa test.txt 
```

多个文件：

```
$ ex -s +'bufdo!%!sort' -cxa *.* 
```

# azure - Azure 预览帐户批准

> ID：11375429
> 
> 赞同：-1
> 
> 时间：2012-07-07T13:31:27.637
> 
> 标签：azure

我在 24 小时前注册了预览版，但仍在等待帐户批准。这是常见的/预期的吗？或者，我可能错过了这个过程中的一个步骤吗？

我怎么知道是哪个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T14:51:31.733

什么预览？媒体服务？虚拟机？网站？如果其中任何一个，只需查看页面即可。应该指出的是，有时这些需要一些时间来提供，尤其是自 6 月宣布以来对这些的需求。您应该看到您的请求已排队。

话虽如此：这不是编程问题。

# javascript - 如何在 localStorage 中增加一个值

> ID：11375433
> 
> 赞同：4
> 
> 时间：2012-07-07T13:31:51.707
> 
> 标签：javascript, html, local-storage

我有一些值动态存储在 localStorage 中，其递增值如下：localStorage["Value0"], localStorage["Value1"],....

当我尝试像这样访问它们时：

JavaScript：

```
localStorage["Counter"]=0;
var i = localStorage["Counter"]; 
var d =localStorage["Value"+i];
i = i + 1; // i becomes "01"
var f = localStorage["Value"+i]; 
```

i 的值是“01”而不是 1 ...有没有办法正确增加 i 的值？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-07T14:06:27.637

LocalStorage 只能存储字符串值。您可以使用 parseInt 将字符串转换为整数：

```
var new_value =  parseInt(localStorage.getItem('num')) + 1 
```

您还可以使用 store.js 等库为您自动执行操作。您所要做的就是包含该库：

```
<script src="store.js"></script> 
```

设置一个新的存储：

```
var numbers = new Store("numbers") 
```

把东西放进去：

```
numbers.set('num', 2) 
```

获取价值并用它做任何你想做的事情：

```
numbers.get('num') + 1 //output: 3 
```

你也可以疯狂地使用一些数组：

```
numbers.set('nums', [1,2,3]) 
```

并改变里面的东西：

```
numbers.get('nums')[0] + 3 //output: 4 
```

不需要类型转换。您还可以存储对象、布尔值和其他内容。只是不要忘记将东西保存回存储中，因为它不会自动执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T13:34:30.507

要解决 get 的问题`01`，只需将变量转换为数字：

```
var i = +localStorage.getItem('Counter'); // or +localStorage.Counter; 
```

如果你想要一个增量键名，也可以使用下面的代码（前提是你不删除中间的键）：

```
var keyname = 'Value' + localStorage.length;
localstorage.setItem(keyname, value); 
```

# sql-server - 选角给了我错误的日期？

> ID：11375435
> 
> 赞同：-2
> 
> 时间：2012-07-07T13:32:02.150
> 
> 标签：sql-server, casting

```
SELECT DATEPART(YEAR, PURCHASE_DATE) AS TRANSACTION_YEAR, DATEPART(MONTH, PURCHASE_DATE) AS TRANSACTION_MONTH,
CASE WHEN DATEPART(YEAR, DUE_DATE) >= DATEPART(YEAR, PURCHASE_DATE) THEN DATEPART(YEAR, DUE_DATE)
ELSE DATEPART(YEAR, PURCHASE_DATE) END AS RELEASE_YEAR, 
CASE WHEN (DATEPART(YEAR, DUE_DATE) = DATEPART(YEAR, PURCHASE_DATE) AND DATEPART(MONTH, DUE_DATE) >= DATEPART(MONTH, PURCHASE_DATE)) THEN DATEPART(MONTH, DUE_DATE)
WHEN DATEPART(YEAR, DUE_DATE) > DATEPART(YEAR, PURCHASE_DATE) THEN DATEPART(MONTH, DUE_DATE)
ELSE
DATEPART(MONTH, PURCHASE_DATE) END AS RELEASE_MONTH,
CAST(YEAR(CASE WHEN DATEPART(YEAR, DUE_DATE) >= DATEPART(YEAR, PURCHASE_DATE) THEN DATEPART(YEAR, DUE_DATE)
ELSE DATEPART(YEAR, PURCHASE_DATE) END) AS VARCHAR(4)) + RIGHT('0'+CAST(MONTH(CASE WHEN (DATEPART(YEAR, DUE_DATE) = DATEPART(YEAR, PURCHASE_DATE) AND DATEPART(MONTH, DUE_DATE) >= DATEPART(MONTH, PURCHASE_DATE)) THEN DATEPART(MONTH, DUE_DATE)
WHEN DATEPART(YEAR, DUE_DATE) > DATEPART(YEAR, PURCHASE_DATE) THEN DATEPART(MONTH, DUE_DATE)
ELSE
DATEPART(MONTH, PURCHASE_DATE) END) AS VARCHAR(2)),2)
FROM TEST 
```

在包含六条记录的样本表上生成

```
2012    1   2012    1   190501
2012    1   2013    12  190501
2011    1   2012    1   190501
2011    1   2011    1   190501
2012    1   2012    1   190501
2012    1   2012    2   190501 
```

我究竟做错了什么？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T13:48:04.963

我认为问题在于您已经在使用`CASE`表达式提取月份和年份组件 - 并将这些表达式的结果传递给`YEAR`and`MONTH`函数 - 期望传递一个`datetime`值。因此，您正在将 s 隐式转换`int`回`datetime`值。

```
SELECT YEAR(2012)

----
1905

SELECT MONTH(12)

----
01 
```

当 an`int`隐式转换为 a`datetime`时，它实际上是自 以来的天数`19000101`。大约 2000 天之后的大多数日子都`19000101`发生在 1905 年。

* * *

话虽如此，这一切看起来都比它需要的复杂得多 - 使用子查询，您可以执行一次适当的计算，而不必重复它们 - 初始输入是什么，您的目标是最终输出为了？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T14:05:06.343

你为什么要一口气做完所有事情并在整个地方重复自己。

如果你从

```
select 
DatePart(YEAR,PURCHASE_DATE) as PURCHASE_YEAR,
DatePart(YEAR,DUE_DATE) as DUE_YEAR,
DatePart(MONTH,PURCHASE_DATE) as PURCHASE_MONTH,
DatePart(MONTH,DUE_DATE) as DUE_MONTH
From Test 
```

然后你可以做

```
SELECT PURCHASE_Year AS TRANSACTION_YEAR, 
       PURCHASE_Month) AS TRANSACTION_MONTH,
       CASE 
       WHEN DUE_YEAR >= PURCHASE_YEAR THEN DUE_YEAR
       ELSE PURCHASE_YEAR
       END AS RELEASE_YEAR, 
       CASE 
       WHEN (DUE_YEAR = PURCHASE_YEAR) AND (DUE_MONTH >= PURCHASE_MONTH) THEN DUE_MONTH
       WHEN DUE_YEAR > PURCHASE_YEAR THEN DUE_MONTH
       ELSE PURCHASE_MONTH 
       END AS RELEASE_MONTH,
       CAST(
        CAST(RELEASE_YEAR As VarChar(4)) + 
        '-' + 
        CAST(RELEASE_MONTH as VarChar(2)) + 
        '-1' as DATE) as RELEASE_DATE
FROM (
select 
DatePart(YEAR,PURCHASE_DATE) as PURCHASE_YEAR,
DatePart(YEAR,DUE_DATE) as DUE_YEAR,
DatePart(MONTH,PURCHASE_DATE) as PURCHASE_MONTH,
DatePart(MONTH,DUE_DATE) as DUE_MONTH
From Test
) SomeDummyTableName 
```

我想这就是你所追求的，我什至可能在涉过那个泥沼之后就得到了它。

# smalltalk - Pharo 中是否有一个列表小部件可以让用户直观地对列表项进行排序？

> ID：11375437
> 
> 赞同：2
> 
> 时间：2012-07-07T13:32:08.093
> 
> 标签：smalltalk, pharo, morphic

Pharo 中是否有一个列表小部件，可以让用户通过拖放直观地对列表项进行排序，以便将新的项目顺序传播到小部件表示的 OrderedCollection 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T12:35:05.007

据我所知，没有现成的小部件。然而，有提供此类功能的应用程序，您可以查看它们的源代码。

例如，在 OmniBrowser 中，类类别可以通过拖放重新排序。重构扩展包含一个对话框实现，`OBMethodNameEditor`它为方法参数提供了类似的重新排序功能。

# java - FTP路径有多个子目录时上传空白文件

> ID：11375440
> 
> 赞同：1
> 
> 时间：2012-07-07T13:32:27.440
> 
> 标签：java, file-upload, ftp, ftp-client

下面的代码在 FTP 服务器上上传文件

```
public class UploadFile {
    static ResourceBundle rsBundle = ResourceBundle.getBundle("com.mindcraft.resources.resources");
    public void upload(String host,String username,String pwd,String inputfile,String uploadpath,String zip_filename)
    {      
        //String zip_file_name= rsBundle.getString("zip_filename");
        FTPClient ftp=new FTPClient();
        try {          
            int reply;  
            ftp.connect(host); 
            ftp.login(username, pwd); 
            reply = ftp.getReplyCode();
            System.out.println("reply1" + reply);
            if(!FTPReply.isPositiveCompletion(reply)) 
            {             
                ftp.disconnect();           

            }           
            System.out.println("FTP server connected."); 
            ftp.setFileType(FTP.BINARY_FILE_TYPE);
            InputStream input= new FileInputStream(inputfile);

            System.out.println("Directory.." + ftp.printWorkingDirectory());

            String dirTree=uploadpath;
            boolean dirExists = true;
            String[] directories = dirTree.split("/");
            for (String dir : directories )
            {
                if (!dir.isEmpty() )
                {
                    if (dirExists)
                    {
                        dirExists = ftp.changeWorkingDirectory(dir);
                        ftp.storeFile(dirTree+zip_filename,input);
                        System.out.println("1..");
                    }
                    if (!dirExists)
                    {

                        System.out.println("dir tree" + ftp.printWorkingDirectory());

                        if (!ftp.makeDirectory(dir))
                        {

                            throw new IOException("Unable to create remote directory '" + dir + "'.  error='" + ftp.getReplyString()+"'");
                            }
                        if (!ftp.changeWorkingDirectory(dir))
                        {

                            throw new IOException("Unable to change into newly created remote directory '" + dir + "'.  error='" + ftp.getReplyString()+"'");
                        }
                        System.out.println("dir tree" + ftp.printWorkingDirectory());
                        ftp.storeFile(dirTree+zip_filename,input);
                    }

                    }
                }      

            System.out.println( ftp.getReplyString() );
            input.close();
            ftp.logout();        
            } 
        catch(Exception e) 
            {                      
            System.out.println("err"+ e);          
            e.printStackTrace();     
            }
        finally 
        {
            if(ftp.isConnected())
            {
                try
                { 
                    ftp.disconnect();

                }
                catch(Exception ioe)
                {

                }

            }

        }
        } 
} 
```

当上传路径有一个文件夹时它工作正常，例如。`/folder1/`

但是当有子文件夹或多个目录时，它会上传字节 0 的空白文件，例如。`/folder1/folder2/`

可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T13:40:19.530

`ftp.storeFile(dirTree+zip_filename,input);`应该在`for`创建所有子目录并转到正确的目录后调用。

顺便说一句，可以帮助引入一个函数 makeAndGoToDirectory。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T14:01:36.620

Joop Eggen 明白了这一点，我想补充一点，如果您想检索文件/目录，编写以下代码是一个好习惯：

`String[] directories = dirTree.split(File.separator);`

代替

`String[] directories = dirTree.split("/");`

因为它会让你的代码更便携。FTP 服务器并不总是需要停留在 Unix/Linux 上。

# jquery - Safari 中带有 jQ uery Mobile 的 Unicode URL（OS X 和 iOS）

> ID：11375453
> 
> 赞同：0
> 
> 时间：2012-07-07T13:34:30.773
> 
> 标签：jquery, jquery-mobile, unicode, uri

我目前正在使用 jQuery Mobile 为使用许多非 ASCII URL 的站点构建一个简单的界面。

例如：

```
http://localhost:1234/static/日本語.html 
```

这通常不会出现任何问题，并且还可以使用百分比编码访问同一页面：

```
http://localhost:1234/static/%E6%97%A5%E6%9C%AC%E8%AA%9E.html 
```

在页面标题中加载 jQuery Mobile 后，链接继续工作，但 iOS 5.1.1 上的 Safari 和 OS X 上的 Safari 5.1.7 在位置栏中显示似乎无效的百分比编码：

```
http://localhost:1234/static/%E5,%9E.html 
```

这是有问题的，因为 URL 不能被添加书签或直接访问（返回 404）。Chrome 会按预期显示 URL。

顺便说一句，“%E5,%9E”似乎与“日本语”的任何常见百分比编码都不匹配： [http://www.motobit.com/util/url-encoder.asp?data=日本语](http://www.motobit.com/util/url-encoder.asp?data=%E6%97%A5%E6%9C%AC%E8%AA%9E)

最后，我用来加载 jQuery Mobile 的页眉：

```
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile.structure-1.1.0.min.css" /> 
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script> 
<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script> 
```

# java - java中的运算符>>和运算符>>>有什么区别？

> ID：11375457
> 
> 赞同：5
> 
> 时间：2012-07-07T13:34:50.947
> 
> 标签：java, bit-shift

我曾经使用 >> 运算符进行右移。现在我刚刚将其替换为 >>> 并找到了相同的结果。所以我无法弄清楚这两者是否基本相等。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-07T13:35:56.143

`>>`是算术（有符号）右移，`>>>`是逻辑（无符号）右移，如[Java 教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html)中所述。在负值上尝试它们，你会看到不同。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-07T13:36:32.297

第一个运算符对值进行符号扩展，移入符号位的副本；第二个总是移到零。

这样做的原因是为了进行位运算而模拟无符号整数，部分弥补了 Java 中无符号整数类型的不足。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-07T13:42:00.763

[这很好地解释了它](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html)。在同一页上还有一个简短的[示例](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/examples/BitDemo.java)。

但对于一个真正的简短总结：

```
<< signed left shift - shifts a bit pattern to the left
  0 0 1 1 1 => 0 1 1 1 0

>> signed right shift - shifts a bit pattern to the right
   0 0 1 1 1 => 0 0 0 1 1 

>>> unsigned right shift - shifts a zero into the leftmost position
  1 1 1 0 => 0 0 1 1

~ unary bitwise complement operator
  A | Result
  0 | 1
  1 | 0
  0 | 1
  1 | 0

& bitwise and
  A | B | Result
  0 | 0 | 0
  1 | 0 | 0
  0 | 1 | 0
  1 | 1 | 1

^ xor
  A | B | Result
  0 | 0 | 0
  1 | 0 | 1
  0 | 1 | 1
  1 | 1 | 0

| inclusive or
  A | B | Result
  0 | 0 | 0
  1 | 0 | 1
  0 | 1 | 1
  1 | 1 | 1 
```

# php - 无法在数据库中插入必填字段

> ID：11375461
> 
> 赞同：1
> 
> 时间：2012-07-07T13:35:34.650
> 
> 标签：php, mysql, database, insert

我在第一篇文章中并不清楚。所以就在这里。

预订.php

```
<table style="border: 4px;">

    <tr>
                    <!-- Start JQuery Pop-up -->

        <script src="js/jquery.js" type="text/javascript"></script>
        <script src="popup2.js" type="text/javascript"></script>

        <td style="border: 2px solid #000;"><center><img src="images/comp.jpg" height="30" width="50"><br /><b><div id="button"><a href="#" class="pcbutton">PC 05</a></div></b></center>

        </td>

    <!-- Jquery Pop-Up code starts here including the insert query -->
            <?php
                echo '<div id="popupContact">';
                echo '<a id="popupContactClose">x</a>';
                echo '<center><form method = "POST" action="reserve.php">';

                                        mysql_connect("localhost","root","") or die (mysql_error());
                                            mysql_select_db('seat_reservation') or die (mysql_error());

                                            $roomNumber = '400';
                                            $chairNumber = 5;

    //In this part, I try to insert in the database without submitting the form yet.

                                            $insert = mysql_query("INSERT INTO reservation (chair_status, room_id, chair_number) VALUES (0, '$roomNumber', '$chairNumber')");

    //I'm trying to retrieve the inserted data and do the checking.

                                    $query = mysql_query("SELECT * FROM reservation WHERE room_id = '$roomNumber' AND chair_number = '$chairNumber'");
                                            $row = mysql_fetch_assoc($query);

                                            $_SESSION['roomno'] = $row['room_id'];
                                            $_SESSION['chairnum'] = $row['chair_number'];

                                            echo '<h1>Information </h1>';
                                                echo 'Fullname : <input type="text" name="student_name" /><br /><br />';
                                                echo 'Student ID No. : <input type="text" name="stud_id" />';
                                                echo '<br /><br />';
                                                echo '<input type="submit"  value="Submit" />';
                                            echo '</form></center>';
                                        echo '</div>';

                                        echo '<div id="backgroundPopup"></div>';
                                        ?>
                                    <!-- End JQuery Pop-up -->  
                                        <td style="border: 2px solid #000;"><center><img src="images/comp.jpg" height="30" width="50"><br /><div id="button2"><a href="#" class="pcbutton"><b>PC 04</b></a></div></center>
                                        </td>
    //This is another table that's exactly the same from the code above only that this has a different PC number
                                        <?php
                                        echo '<div id="popupContact">';
                                            echo '<a id="popupContactClose">x</a>';
                                            echo '<center><form method = "POST" action="reserve.php">';

                                            mysql_connect("localhost","root","") or die (mysql_error());
                                            mysql_select_db('seat_reservation') or die (mysql_error());

                                            $roomNumber = '400';
                                            $chairNumber = 4;

                                            $insert = mysql_query("INSERT INTO reservation (chair_status, room_id, chair_number) VALUES (0, '$roomNumber', '$chairNumber')");

                                            $query = mysql_query("SELECT * FROM reservation WHERE room_id = '$roomNumber' AND chair_number = '$chairNumber'");
                                            $row = mysql_fetch_assoc($query);

                                            $_SESSION['roomno'] = $row['room_id'];
                                            $_SESSION['chairnum'] = $row['chair_number'];

                                            echo '<h1>Information </h1>';
                                                echo 'Fullname : <input type="text" name="student_name" /><br /><br />';
                                                echo 'Student ID No. : <input type="text" name="stud_id" />';
                                                echo '<br /><br />';
                                                echo '<input type="submit"  value="Submit" />';
                                            echo '</form></center>';
                                        echo '</div>';
                                        echo '<div id="backgroundPopup"></div>';
                                        ?> 
```

保留.php

```
<?php
    session_start();

    $name = $_POST['student_name'];
    $stud_id = $_POST['stud_id'];
    $room_id = $_SESSION['roomno'];
    $chair_num = $_SESSION['chairnum'];

    mysql_connect("localhost", "root", "") or die (mysql_error());
    mysql_select_db('seat_reservation') or die (mysql_error());

    $query = mysql_query("SELECT * FROM reservation WHERE room_id = '$room_id' AND chair_number = '$chair_num'");
    $row = mysql_fetch_assoc($query);

    if($row['chair_status'] == 0)
    {
    $insert = mysql_query("UPDATE reservation SET chair_status = 1, student_name = '$name', stud_id = '$stud_id' WHERE room_id = '$room_id' AND chair_number = '$chair_num'");
        if($insert)
            die ("Seat reserved! <br />Redirecting...<meta http-equiv='refresh' content=2;reservation.php>");
        else
            die ("Try Again! <br />Redirecting...<meta http-equiv='refresh' content=2;reservation.php>");
    }

    else
        die ("Sorry, seat taken! <br />Redirecting...<meta http-equiv='refresh' content=2;reservation.php>");
    ?> 
```

以下是座位预订截图：

链接：[注意：将 [DOT] 更改为 .] https://fbcdn-sphotos-a.akamaihd[DOT]net/hphotos-ak-ash3/599637_4018881323775_858410964_n.jpg

这是单击 PC 时弹出的屏幕截图：

链接：[注意：将 [DOT] 更改为 .] https://fbcdn-sphotos-a.akamaihd[DOT]net/hphotos-ak-ash3/599637_4018881323775_858410964_n.jpg

问题：应用插入代码仅适用于一台 PC，例如 PC 05。在上面的代码中，我将插入代码应用于 PC 05 和 PC 04，仅作为测试，但我想将其应用于所有 PC。但是仅在 PC 05 和 PC 04 中应用它并不能使其工作。在数据库中，单击提交按钮后，仅插入以下内容（注意：room_id 是房间号）：

链接：[https ://fbcdn-sphotos-a.akamaihd.net/hphotos-ak-ash3/527207_4018929644983_1759106011_n.jpg](https://fbcdn-sphotos-a.akamaihd.net/hphotos-ak-ash3/527207_4018929644983_1759106011_n.jpg)

每个学生都应该在这个特定的教室里预留一个座位。当 Student.A 点击 PC 05 作为他的座位时，应该为他保留它。当 Student.B 再次单击 PC 01 作为他的座位时，它应该为他保留。有多个教室，为此我使用了 JQuery 选项卡。我想在数据库中拥有的是这个（注意：仅限手动插入）：

链接：[https ://fbcdn-sphotos-a.akamaihd.net/hphotos-ak-ash4/376602_4018990806512_1150698954_n.jpg](https://fbcdn-sphotos-a.akamaihd.net/hphotos-ak-ash4/376602_4018990806512_1150698954_n.jpg)

您的回复将不胜感激，在此先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T13:52:11.017

你的代码有点不完整。不要单独使用`mysql_query`。包括额外的代码来捕获错误或在插入数据时发生错误时显示输出。

```
$insert = mysql_query("INSERT INTO reservation (chair_status, room_id, chair_number) VALUES (0, 400, 5)");

// I added the below lines to catch how many rows were inserted and if not, what error occured
$inserted_rows = mysql_affected_rows(); 

if ($inserted_rows !=0)
  echo 'Error occurred, through out error'. mysql_error(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T14:16:19.220

首先为您的提交按钮命名，以便您可以使用它来检查表单是否已提交：

```
if($_POST['name_of_your_submit_button']){
  //mysql insert code here
} 
```

而且我看不出您是否真的在插入查询中使用了用户输入的数据：

```
$insert = mysql_query("INSERT INTO reservation (chair_status, room_id, chair_number) VALUES (0, 400, 5)"); 
```

确保通过使用诸如 print_r 或 var_dump 之类的调试代码来获取一些值

```
print_r($_POST); 
```

# php - 删除旧文件 - 一个小时前或一个多小时前

> ID：11375472
> 
> 赞同：1
> 
> 时间：2012-07-07T13:37:16.600
> 
> 标签：php

下面的代码删除了一个名为“Images”的文件夹中的所有文件。没有抱怨一切正常，但是有没有办法**只**删除一个小时前或一个多小时前创建的文件？请告诉我如何，我正在尝试边做边学，拜托。尝试重复使用下面的相同代码以更好地理解并帮助世界各地的 PHP 程序员用户

```
<?php
define('PATH', 'Images/');

function destroy($dir) {
    $mydir = opendir($dir);
    while(false !== ($file = readdir($mydir))) {
        if($file != "." && $file != "..") {
            chmod($dir.$file, 0777);
            if(is_dir($dir.$file)) {
                chdir('.');
                destroy($dir.$file.'/');
                rmdir($dir.$file) or DIE("couldn't delete $dir$file<br />");
            }
            else
                unlink($dir.$file) or DIE("couldn't delete $dir$file<br />");
        }
    }
    closedir($mydir);
}
destroy(PATH);
echo 'all done.'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T14:02:12.507

您可以使用`filemtime()`或`filectime()`。另外，不能使用`rmdir()`，因为要删除**特定文件**。

**你必须做什么**

1.  `date("U",filectime($file)`- 返回您的文件在**Unix 纪元时间最后一次修改的时间。**

2.  `unlink($file)`- 删除指定的文件。您必须使用它而不是`rmdir()`.

3.  需要一个`if`and `while`/`for`语句：

    ```
    while($file)
    {
        if(date("U",filectime($file) <= time() - 3600)
        {
            unlink($file)
        }
    } 
    ```

然后将其添加到您的脚本中：

```
function destroy($dir) {
$mydir = opendir($dir);
while($file = readdir($mydir)) {
    if($file != "." && $file != "..") {
        chmod($dir.$file, 0777);
        if(is_dir($dir.$file)) {
            chdir('.');
            while($dir.$file) {
                if(date("U",filectime($file) >= time() - 3600)
                {
                    unlink($dir.$file)
                }
            }

        }
        else
            unlink($dir.$file) or DIE("couldn't delete $dir$file<br />");
    }
}
closedir($mydir);
} 
```

我希望它对你有帮助。

**记住：**

*   **无法**在 Unix/Php 中获取文件创建时间
*   如果文件最后一次更改多于或等于一小时前，则返回当前`if`语句`true`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T14:05:36.087

我不会为此使用 php，而是将一个简单的 shell 脚本与 cron 作业结合使用（至少在 linux 上）。

如果您使用的是 linux，则脚本将类似于：

```
#! /bin/sh
find /path/to/Images/ -mmin +60 -exec rm -f {} \;     // modification date, not creation date... 
```

我会使用 cron 每小时自动运行一次。

为了完成，cron 条目将如下所示：

```
0 * * * * /path/to/shell/script.sh    // run script every whole hour 
```

不是对问题的直接回答，但对于评论来说太长了，也许是一个可能的解决方案，因为重复问题中的所有答案也都集中在 php 上......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T13:57:38.563

在 Unix 中，无法检索创建时间，只能使用[filectime检索最后修改日期](http://www.php.net/manual/en/function.filectime.php)

但是，如果您使用的是 Windows 系统，则完全相反。使用相同的方法 filectime，您将检索创建时间，而不是最后更改的时间。

# android - 登录并获取源代码

> ID：11375481
> 
> 赞同：0
> 
> 时间：2012-07-07T13:38:06.640
> 
> 标签：android

我正在尝试登录一个网站并使用 android 模拟器显示它的源代码，但我无法使其工作，但仅在基于 java 的情况下，它正在工作。

这是我的代码：

```
package auth.test;

import android.app.Activity;
import android.os.Bundle;
// used for interacting with user interface
import android.widget.TextView;
import android.widget.EditText;
// used for passing data 
// used for connectivity
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;

public class AuthActivity extends Activity {
/** Called when the activity is first created. */

//Handler h;
private static URL URLObj;
private static URLConnection connect;
EditText eText;
TextView tView;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

   tView=(TextView)findViewById(R.id.textView1);
   initControls();
}

    public void initControls()
    {

        try {

            URLObj = new URL("http://students.usls.edu.ph");
            connect = URLObj.openConnection();
            connect.setDoOutput(true);  
        }
        catch (MalformedURLException ex) {
            tView.setText("The URL specified was unable to be parsed or uses an invalid protocol. Please try again.");
            //System.exit(1); 
        }
        catch (Exception ex) {
            tView.setText("An exception occurred. " + ex.getMessage());
            //System.exit(1);
        }

        try {

            BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(connect.getOutputStream()));
            writer.write("username=0920204&password=******");
            //writer.close();

            BufferedReader reader = new BufferedReader(new InputStreamReader(connect.getInputStream()));

            String lineRead="";

            while((lineRead=reader.readLine())!=null)
            {
                tView.append(lineRead + "\n");
            }

            reader.close();

        }
        catch (Exception ex) {
            tView.setText("There was an error reading or writing to the URL: " + ex.getMessage());
        }
    }
} 
```

所以，不是显示主页的源代码，而是显示登录页面的源代码。所以我认为代码的 Bufferedwriter 部分有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T13:55:39.877

首先，您应该隐藏用户名/密码或伪造它们。

`URLConnection`处理饼干非常糟糕。这就是您刚刚从登录页面获得结果的原因。Android从 API 1 开始就内置了[Apache HttpClient ，所以你可以使用它。](http://developer.android.com/reference/org/apache/http/client/HttpClient.html)Cookie 管理得非常好:-)

而且，您得到的是从服务器响应的原始文本，而不是源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T13:58:36.083

表单的名称是，根据页面来源，`login.cfm`所以你应该在那里发布，你可以以此为例： http: [//www.devx.com/tips/Tip/18188](http://www.devx.com/tips/Tip/18188)

# delphi - 从 IXMLDocument 获取 IXMLDOMDocument2

> ID：11375495
> 
> 赞同：1
> 
> 时间：2012-07-07T13:40:25.707
> 
> 标签：delphi, txmldocument

我正在使用只有标准 VCL 库的 Delphi 2010。目标系统是win32。

如果我有对 IXMLDocument 的引用，我如何获得 IXMLDocument 包装的底层对象的 IXMLDOMDocument2 接口？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T14:38:22.507

```
function GetXMLDOMDocument2(const XMLDocument: IXMLDocument): IXMLDOMDocument2;
begin
  Result := (XMLDocument.DOMDocument as IXMLDOMNodeRef).GetXMLDOMNode as IXMLDOMDocument2;
end; 
```

# actionscript-3 - shape1.canvas1.addEventListener（MouseEvent.MOUSE_MOVE，paintLine）

> ID：11375496
> 
> 赞同：0
> 
> 时间：2012-07-07T13:40:33.290
> 
> 标签：actionscript-3

我正在尝试以下内容：

```
shape1.canvas1.addEventListener(MouseEvent.MOUSE_MOVE, paintLine); 
```

至

```
this["shape"+i].canvas[i].addEventListener(MouseEvent.MOUSE_MOVE, paintLine); 
```

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T14:55:30.580

您的代码应该是：

```
this["shape"+i]["canvas"+j].addEventListener(MouseEvent.MOUSE_MOVE, paintLine);
         // or ["canvas"+i] 
```

# java - 如何使用批处理文件运行两个 Java 应用程序？

> ID：11375499
> 
> 赞同：1
> 
> 时间：2012-07-07T13:41:36.170
> 
> 标签：java, batch-file, executable-jar

我想在eclipse中同时自动运行位于两个不同项目中的两个java应用程序，我想使用批处理文件是最好的方法。那是对的吗？还是有更好的方法？

如果这是最好的方法，批处理文件的语法是什么？我需要有项目的 jar 文件吗？批处理文件是否仅适用于 Windows？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T13:48:35.350

```
start java path\of\first\class
start java path\of\second\class 
```

假设这就是您要查找的内容，这将同时启动。应用程序不必打包在 jar 中，您还可以传递包含`Main`您要运行的类的路径。您可能需要传递更多参数（例如类路径），具体取决于您的设置。

是的，这仅适用于 Windows（也可能适用于 Dos）。

# php - 保护文件免受直接 HTTP 请求

> ID：11375500
> 
> 赞同：0
> 
> 时间：2012-07-07T13:41:40.613
> 
> 标签：php, security, httprequest

假设您有一堆文档托管在您的网络服务器上，但您不希望通过直接 HTTP 请求检索它们，因为这些文件是机密文件。我们开始加密文件名，但我们希望它更进一步，那么将这些文件放在 /public_html 文件夹之外并让 PHP 从 /public_html 之外的文件夹中检索请求的文件呢？

我正在尝试对此进行测试，但我的小脚本正在检索我一个文件名错误的 0kb .pdf 文件：

```
<?php 

$file = '/home/clientaccount/secretfiles/file.pdf'; 
if(!file_exists($file)){
    die('Error: File not found.');
}
else
{
    // Set headers
    header("Cache-Control: public");
    header("Content-Description: File Transfer");
    header("Content-Disposition: attachment; filename=$file");
    header("Content-Type: application/pdf");
    header("Content-Transfer-Encoding: binary");
} ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T13:59:33.367

变量 $file 只是一个字符串。到达您的访问者的标题告诉：

> 内容处置：附件；文件名=/home/clientaccount/secretfiles/file.pdf

这不是访问者可以访问的文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T13:55:04.063

你必须在 if 中有很多右括号，应该是：

```
if(!file_exists($file)){ 
```

这可能是服务器错误的原因，并且您的代码应该可以工作，前提是运行服务器的用户可以访问外部位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T14:22:57.237

为了让你的代码正常工作，我必须添加一个命令让 php 读取文件并输出它：

```
<?php 

$file = '/tmp/file.pdf'; 
if(!file_exists($file)){
    die('Error: File not found: '.$file);
}
else
{

    // Set headers
    header("Cache-Control: public");
    header("Content-Description: File Transfer");
    header("Content-Disposition: attachment; filename=$file");
    header("Content-Type: application/pdf");
    header("Content-Transfer-Encoding: binary");
    readfile($file);
} 

?> 
```

否则下载后我无法读取文件。

正如 Hans Kuit 所说，最好从文件名中删除路径。

# vba - VBA 宏内存泄漏（如何清除变量=

> ID：11375502
> 
> 赞同：2
> 
> 时间：2012-07-07T13:42:01.730
> 
> 标签：vba, excel

我有一个 VBA 宏脚本可以抓取一些数据。它是用 MSIE 刮的。我相信 MSIE 是内存泄漏的核心问题。

我正在初始化变量

```
Set IE = CreateObject("InternetExplorer.Application") 
```

我做了一个小测试，看看内存是如何被使用的。

我做了一个循环，它只生成 1 个 IE 实例并 ping 同一个网站。记忆似乎不是韭菜。

然后我做了一个循环，它总是 ping 一个不同的站点，内存使用量随着每个请求开始增加。

我还做了一个测试（我在下面发布），在每次迭代中创建新对象并在最后删除它。删除部分似乎不起作用。

似乎 IE 的实例正在缓存请求，因此对象变得越来越大。这只是一个假设。

这是我用来测试泄漏的示例代码。

```
Do While True
    Dim IE As Object
    Set IE = CreateObject("InternetExplorer.Application")

    IE.Navigate "https://www.google.hr/#hl=hr&gs_nf=1&cp=3&gs_id=8&xhr=t&q=" & Counter
    IE.Visible = True

    Do While IE.readyState <> 4 Or IE.Busy = True
        Application.Wait Now() + TimeValue("00:00:01")
        DoEvents
    Loop

    Application.Wait Now() + TimeValue("00:00:01")
    Counter = Counter + 1
    Range("A" & Counter).Value = "https://www.google.hr/#hl=hr&gs_nf=1&cp=3&gs_id=8&xhr=t&q=" & Counter

    IE.Quit
    Set IE = Nothing
Loop 
```

任何输入都会很棒！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T14:20:36.883

我测试了上面的代码，它正确地破坏了 IE 对象。也关于这个

> 似乎 IE 的实例正在缓存请求，因此对象变得越来越大。这只是一个假设。

是的，它有时会增加它，但并非总是如此。见截图。

![在此处输入图像描述](../Images/1370403c0b16ae1d22a6c22bcd828e67.png)

这是 8 个循环的 IE 任务管理器的屏幕截图。它显示增加，但如果你看到它也会降低它。所以我相信你看到的不是内存泄漏。

**编辑**

这是我在数据库中的一些代码（不是我写的），但您可以运行它来检查内存使用情况。

```
Sub Sample()
    Do While True
        Dim IE As Object
        Set IE = CreateObject("InternetExplorer.Application")

        IE.Navigate "https://www.google.hr/#hl=hr&gs_nf=1&cp=3&gs_id=8&xhr=t&q=" & Counter
        IE.Visible = False

        Debug.Print GetProcessMemory("iexplore.exe")

        Do While IE.readyState <> 4 Or IE.Busy = True
            Application.Wait Now() + TimeValue("00:00:01")
            DoEvents
        Loop

        Application.Wait Now() + TimeValue("00:00:01")
        Counter = Counter + 1
        Range("A" & Counter).value = "https://www.google.hr/#hl=hr&gs_nf=1&cp=3&gs_id=8&xhr=t&q=" & Counter

        IE.Quit
        Set IE = Nothing
    Loop
End Sub

Private Function GetProcessMemory(ByVal app_name As String) As String
    Dim Process As Object, dMemory As Double

    For Each Process In GetObject("winmgmts:"). _
    ExecQuery("Select WorkingSetSize from Win32_Process Where Name = '" & app_name & "'")
        dMemory = Process.WorkingSetSize
    Next
    If dMemory > 0 Then
        GetProcessMemory = ResizeKb(dMemory)
    Else
        GetProcessMemory = "0 Bytes"
    End If
End Function

Private Function ResizeKb(ByVal b As Double) As String
    Dim bSize(8) As String, i As Integer
    bSize(0) = "Bytes"
    bSize(1) = "KB" 'Kilobytes
    bSize(2) = "MB" 'Megabytes
    bSize(3) = "GB" 'Gigabytes
    bSize(4) = "TB" 'Terabytes
    bSize(5) = "PB" 'Petabytes
    bSize(6) = "EB" 'Exabytes
    bSize(7) = "ZB" 'Zettabytes
    bSize(8) = "YB" 'Yottabytes
    For i = UBound(bSize) To 0 Step -1
        If b >= (1024 ^ i) Then
            ResizeKb = ThreeNonZeroDigits(b / (1024 ^ _
                i)) & " " & bSize(i)
            Exit For
        End If
    Next
End Function

Private Function ThreeNonZeroDigits(ByVal value As Double) As Double
    If value >= 100 Then
        ThreeNonZeroDigits = FormatNumber(value)
    ElseIf value >= 10 Then
        ThreeNonZeroDigits = FormatNumber(value, 1)
    Else
        ThreeNonZeroDigits = FormatNumber(value, 2)
    End If
End Function 
```

**快照**

![在此处输入图像描述](../Images/f259235632733fc03b488bab96a96a62.png)

# javascript - 如何从标记中获得超过 +10/11 LatLng 值

> ID：11375503
> 
> 赞同：0
> 
> 时间：2012-07-07T13:42:31.260
> 
> 标签：javascript, google-api

我有一个本地化数组（“街道、城市、邮政编码、省、国家”）。我想要一个包含每个本地化的所有 Lat 和 Lng 值的字符串，就像这样（“#lat.value|lng.value#lat2.value|lng2.value..”等）。我用于这个谷歌 API 地理编码器。但是 Geocoder 有一个烦人的限制，一次定位 10~11 个。如何为 100 个本地化获得大约 100 个 lat&lng 值？我尝试了 sleep() 函数，但这不起作用。这是我在 js 中的功能。

```
 function sleep(time){
                   time = time * 1000;
                   var start = (new Date()).getTime();
                   while(true){
                      alarm = (new Date()).getTime();
                      if(alarm - start > time){ break; }
                   }
                }

(..)
                var mystring = "";
                var address = <%=testing %>
                var arrayaddress = address.split("%");

                for (var i = 0; i < arrayaddress.length-1; i++) {
                    sleep(0);
                    geocoder = new google.maps.Geocoder(); 
                    geocoder.geocode( { 'address': arrayaddress[i]}, function(results, status) {
                    if (status == google.maps.GeocoderStatus.OK) {
                        map.setCenter(results[0].geometry.location);
                        var marker = new google.maps.Marker({
                        map: map,
                        position: results[0].geometry.location
                        });
                        var zmiennalat = marker.getPosition().lat();
                        var zmiennalng = marker.getPosition().lng();
                        mystring = mystring + "#" + zmiennalat + "|" + zmiennalng;
                    } 
                    else 
                    {
                        mystring = mystring + "#" + "er" + "|" + "er";
                        //alert("Geocode was not successful for the following reason: " + status);
                    }
                    if (i == arrayaddress.length-1) {
                       var dsa = mystring;
                       document.getElementById("<%=hfWysokosc.ClientID%>").value = mystring;
                       document.getElementById("<%=hfSzerokosc.ClientID%>").value = dsa;
                       document.getElementById("<%=UpdateButton1.ClientID %>").click();
                    }

                    }); 
                 } // for 
```

然后，结果例如：

> er|er#34.42342|16.4323#23.32131|43.54545# 等等。

总是首先本地化是解码错误（如果数组中的位置超过 10 个）。为什么？为什么最后不本地化？

恢复：如何通过这个循环在这个搅拌中获得超过 10 个 lat|lng 值？

谢谢！

编辑

谢谢，很好用！

但是还有另一个问题。字符串 Mystring 显示非常缓慢.. 如何修复它？当标记在地图上设置时它会令人耳目一新 - 也许这不是问题，但对于 100-150 个标记，我必须等待几分钟才能获得 Mystring 值。是否有可能显示更快的 Mystring 值？

```
 var mystring = "";
                    var address = <%=testing %>
                    alert(address);
                    var arrayaddress = address.split("%");

                    (function nextStep(i){
                    if( i >= arrayaddress.length-1 ){
                        return;
                    }
                    geocoder = new google.maps.Geocoder(); 
                    geocoder.geocode( { 'address': arrayaddress[i]}, function(results, status) {
                    if (status == google.maps.GeocoderStatus.OK) {
                        map.setCenter(results[0].geometry.location);
                        var marker = new google.maps.Marker({
                        map: map,
                        position: results[0].geometry.location
                        });
                        var zmiennalat = marker.getPosition().lat();
                        var zmiennalng = marker.getPosition().lng();
                        mystring = mystring + zmiennalat + "|" + zmiennalng + "#";
                    } 
                    else 
                    {
                        mystring = mystring + "er" + "|" + "er" + "#";
                        //alert("Geocode was not successful for the following reason: " + status);
                    }
                    }); 
                    setTimeout(function(){   nextStep(i+1);   }, 800); 
                       var dsa = mystring;
                       document.getElementById("<%=hfSzerokosc.ClientID%>").value = dsa;
                       document.getElementById("<%=UpdateButton1.ClientID %>").click();    
                })(0); 
```

**更新**

```
 function nextStep(i){
                    if( i >= arrayaddress.length-1 ){
                        return;
                    }

                    // code

                    }); 
                    setTimeout(function(){   nextStep(i+1);   }, 1000);     
                }; 
```

然后

```
<button type="button" onclick="nextStep(0)">Click Me!</button> 
```

错误是：

> nextStep 未定义

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T13:52:11.220

而不是for循环，试试这个：

```
//...............
//...............

var mystring = "";
var address = <%=testing %>
var arrayaddress = address.split("%");

//Modification-----BEGIN
(function nextStep(i){
    if( i >= arrayaddress.length-1 ){
        return;
    }

    //-----------------
    //for-loop body here
    //------------------

    //
    setTimeout(function(){   nextStep(i+1);   }, 500);       
})(0);
//Modification-----END

//...............
//............... 
```

**更新：**如果你想运行`nextStep`函数，只有当按钮被点击时，然后修改上面的代码是这样的：

```
function nextStep(i){
    /////   
}; 
```

然后，何时`onclick`触发，只需调用`nextStep(0)`.

# ruby-on-rails-3 - 如何在 Rails 中用户的多列 url 输入中添加 http 前缀？

> ID：11375506
> 
> 赞同：0
> 
> 时间：2012-07-07T13:43:04.817
> 
> 标签：ruby-on-rails-3, url, link-to

这个[问题](https://stackoverflow.com/questions/6670749/rails-method-for-standardizing-url-input-from-users)已经回答了单列的问题，但是你如何为多列做呢？我有三列（网站、fb、twitter），我想用 http 作为前缀，以防用户没有在表单中输入它们。

我试过这个但它不起作用：

```
before_save :sanitize_links

private

def sanitize_links
  website = self.website
  facebook = self.facebook
  twitter = self.twitter
  links = [website, facebook, twitter]
  links.each do |link|
    unless link.include?("http://") || link.include?("https://")
      link = "http://" + link
    end
  end
end 
```

* * *

**更新**

我已经尝试过 KL-7 的建议，但不幸的是遇到了一点问题。如何将数组的输出与 一起使用`before_save`？我已经尝试了下面的代码，但它不起作用。

```
before_save :sanitize_links

private

def sanitize_links
  links = ["website", "facebook", "twitter"]
  links.map! { |link| self.link =~ %r{\Ahttps?://} ? self.link : "http://" + self.link }
end 
```

* * *

**更新 2**

我放弃。我只重复三遍：

```
before_save :sanitize_links

private

def sanitize_links # prefix user-submitted links with http:// if missing
  self.website =~ %r{\Ahttps?://} ? self.website : self.website = "http://" + self.website
  self.facebook =~ %r{\Ahttps?://} ? self.facebook : self.facebook = "http://" + self.facebook
  self.twitter =~ %r{\Ahttps?://} ? self.twitter : self.twitter = "http://" + self.twitter
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T14:04:00.380

问题是

```
link = "http://" + link 
```

在您的代码中为带有块的变量分配一个新值`link`，但不会更改列表的相应元素。

要就地更改列表的元素，您可以使用[`Array#map!`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-map-21)：

```
links.map! do |link|
  link.include?("http://") || link.include?("https://") ? link : "http://" + link
end 
```

我有点担心的另一件事是，`include?`即使给定的子字符串（例如，`'http://'`出现在字符串中间的某个地方，不一定在开头，它也会返回 true。我宁愿为该任务使用正则表达式：

```
links.map! { |link| link =~ %r{\Ahttps?://} ? link : "http://" + link } 
```

**更新**

如果`link`是模型的属性，那么您至少应该将其存储为属性而不是局部`links`变量：

```
self.links = links.map { |link| link =~ %r{\Ahttps?://} ? link : "http://" + link } 
```

# http - 获取没有内容长度的http请求的响应？

> ID：11375507
> 
> 赞同：27
> 
> 时间：2012-07-07T13:43:41.143
> 
> 标签：http, tcp, http-headers

我有一个小程序发送 http 请求并使用 TCP 协议获取响应。

我的请求格式；

```
GET / HTTP/1.0
Host: somewebsite.com
{two new line} 
```

我从套接字逐行读取响应（在 c# 中使用 NetworkStream 和 StreamReader），直到找到内容长度标头。我存储长度，然后继续阅读，直到找到一个空行。然后创建一个具有长度的缓冲区并接收其余的响应。

但是有些响应没有内容长度标头。所以我的方法失败了。如果我不知道我应该收到多少字节，我应该什么时候停止？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-07T14:18:36.057

In `HTTP/1.0`- 服务器响应没有`content-length`是流关闭时

In `HTTP/1.1`- 服务器响应没有`content-length`是当响应被[分块编码时](https://en.wikipedia.org/wiki/Chunked_transfer_encoding)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-07T16:49:07.960

请参阅[HTTP 规范的相关部分](http://greenbytes.de/tech/webdav/rfc2616.html#message.length)。在您的特定情况下，如果服务器没有返回内容长度，那么它必须在完成响应后关闭流。您（作为客户）没有其他可靠的方法可以知道。与 HTTP 版本无关。@Julian 分块编码确实是 HTTP/1.1 中的一个巧妙升级，但它是专门针对流媒体的，没有理由让“普通”网络服务器实现它。那是在发起响应之前知道内容长度的服务器。而且我猜 OP 没有控制服务器，否则他不会反对丢失的 HTTP 标头。

但是，即使您确实获得了内容长度标头，您也[不能毫无保留地信任它](http://en.wikipedia.org/wiki/Robustness_Principle)。服务器实现者也只是容易犯错的人。将其视为“最可能”的响应，将初始值设置为可调整大小的缓冲区。您仍然必须准备好处理更少和更多（最坏的情况）。

# python - Password salt & secret

> ID：11375519
> 
> 赞同：1
> 
> 时间：2012-07-07T13:46:21.590
> 
> 标签：python, performance, security, google-app-engine, passwords

So when building a webapp and storing passwords, both security and performance are important things to keep in mind. Having seen evidence that even salted SHA1 passwords can be easily cracked due to the increasing speed of GPUs, I was wondering what are the best practices of storing passwords.

I thought that in order to add more security to storing passwords, you could add a secret to the salt. So for instance, the python code for this could be:

```
import hashlib
import hmac

secret = 'XYZ'
h = hmac.new('salt' + secret, 'password') 
```

*   Is this a common thing to do?
*   What are the drawbacks of this?
*   What are the best practices in this field?

*P.S. I didn't post this in the security forum because I want a webapp developer's perspective.*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-07T16:30:08.013

Also have a look at passlib: [http://pypi.python.org/pypi/passlib/](http://pypi.python.org/pypi/passlib/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-07T13:55:23.923

You're just making your salt a bit longer... Namely, your salt is now `saltXYZ` instead of just `salt`.

From my perspective, this isn't any different from just using a regular salt, so that makes your first two questions moot.

As far as best practices go, the most important one is "never roll your own crypto". Don't get fancy, use a well known library for handling such things. [bcrypt](http://code.google.com/p/py-bcrypt/) is popular these days. It might have a an exploit, but if it does it'll probably get discovered since there are Trained Cryptoanalysts attacking it every day.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-07T13:54:34.553

The standard is to *not use the same salt* over and over. Use, for example, the username as a salt. Or generate a random salt and add it to the result.

Adding a "secret" doesn't really change anything. It's just a longer, but still fixed, salt, and you have to distribute it to the servers that check the password, so it really isn't that secret, is it?

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-07T13:53:18.873

This is a quite common thing in web applications. If hackers get your database, they can search the password as long as they want if they don't know the salt and where it is placed in the string. So a hacker needs *both* the code and the database dump to get the real password.

I can't see any drawback compared to the method without salt, the performance is quite the same while the security obviously increases.

What's more, the salt should be different for every password you encode, you have to choose a salt which is long enough (the longer the better).

For instance, a hacker needs a password table for every salt, which means many calculations. Even if you store the salt in your database, it's a pain for hackers to hack non-standard salts (standard salts can be salts based on the username : *admin*, *root*...)

You can also take a look at [this answer](https://stackoverflow.com/questions/536584/non-random-salt-for-password-hashes/536756#536756) for more details and explanations.

However, libraries like BCrypt are really nice for cryptography and they are often tested by well-known hackers so I do think you can trust them.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-07T13:58:01.667

Adding a secret doesn't hurt, and it helps in some scenarios. So I recommend using one, as a defense-in-depth measure.
But in the main scenario password hashing is intended for, it doesn't help: Your server gets compromized, and the attacker learns the secret.

To defend against password guessing attacks, you should use a deliberately slow hash function, namely one of scrypt, bcrypt and PBKDF2.

Your code has two important weaknesses:

1.  You're not using a salt. A salt should be different for each user. Standard practice is a random number of 64 or more bits.
2.  Single iteration hmac is fast, so use one of the slow schemes I mentioned.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-07T14:23:52.477

Regarding the *best practices*, you might want to read the [OWASP's Password Storage Cheat Sheet](https://www.owasp.org/index.php/Password_Storage_Cheat_Sheet). You'll probably want read [their other cheat sheets](https://www.owasp.org/index.php/Cheat_Sheets) too.

# html - 加载掩码，禁用底层 html 元素

> ID：11375521
> 
> 赞同：3
> 
> 时间：2012-07-07T13:46:36.307
> 
> 标签：html, css

我想为所有页面创建加载器掩码。我需要获取掩码下的元素不可用。但现在我可以点击按钮了。您可以在图像上看到所有内容。

这是面具的CSS：

```
div#mask {
    z-index:9999;
    display: none;
    width:100%;
    background-color: rgba(0,0,0,0.15);
} 
```

它是具有 100% 宽度和窗口高度的 div。如何修复ui块？

![在此处输入图像描述](../Images/c76b97b894404719c3713ba426d848bc.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T13:57:55.067

你没有给出这个：

```
position: absolute; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T14:03:12.397

您必须将其放置在绝对位置并设置高度。所以这很好用：

```
<style>

div.mask {
    position:           absolute;
    z-index:            1;
    top:                0;
    left:               0;
    width:              100%;
    height:             100%;
    background-color:   rgba(0,0,0,0.15);
}

</style>

<a href="">Can't be clicked</a>

<div id="mask" class="mask"></div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-01T14:50:11.830

看`pointer-events: none;`CSS规则

[https://developer.mozilla.org/en-US/docs/Web/CSS/pointer-events](https://developer.mozilla.org/en-US/docs/Web/CSS/pointer-events)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-05-01T06:00:01.147

```
div.mask
{
    position:           fixed;
    z-index:            1;
    top:                0;
    left:               0;
    width:              100%;
    height:             100%;
    background-color:   rgba(0,0,0,0.15);
} 
```

而不是**absolute**，你可以把**fixed**

# android - RemoteViews 上支持的方法

> ID：11375522
> 
> 赞同：5
> 
> 时间：2012-07-07T13:46:37.587
> 
> 标签：android

我正在尝试将值转发到 Android RemoteView。一些值可以通过使用反射的 set 方法转发。例如背景颜色作品：

```
rv.setInt(R.id.viewId, "setBackgroundColor", 0xffff0000); 
```

尽管该机制对于一个参数方法调用看起来非常通用，但它不适用于某些方法。例如。在视图上设置 alpha 不起作用（在 api 级别 15 上运行）：

```
rv.setFloat(R.id.viewId, "setAlpha", 0.5f); 
```

框架在运行时抱怨不支持 setAlpha(float)。有谁知道为什么会这样？远程视图上支持的方法的规则是什么？为什么阿尔法不在其中？

**更新：**

CommonsWare 的答案是正确的。经过更多研究后，某些人可能会觉得 ImageView.setAlpha( **int** ) 是可远程的。它仅在图像上设置 alpha，因此不适用于九个补丁等。但它可能对某些人有用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T14:02:19.817

> 有谁知道为什么会这样？远程视图上支持的方法的规则是什么？

`setBackgroundColor()`有`@RemotableViewMethod`注释。`setAlpha()`才不是。

> 为什么阿尔法不在其中？

这可能是从具体的技术原因到简单的疏忽。欢迎您在[http://b.android.com](http://b.android.com)上提交功能请求，以便在未来的 Android 版本中添加该注释，或者实施它并提交补丁。

# string - Lua - 使用模式提取字符串

> ID：11375523
> 
> 赞同：0
> 
> 时间：2012-07-07T13:46:43.817
> 
> 标签：string, lua, lua-patterns

我刚刚开始使用 Lua 模式。

我有一个字符串 `|2|34|56|1`

如何从字符串中提取数字？

我可以手动解析字符串并排除所有“|” 人物。但我确信使用 Lua 模式会简单得多。

在这种情况下，模式如何提供帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T14:21:58.940

如果您只想打印这些数字，最好的方法是：

```
str = "|2|34|56|1"
str:gsub("%d+", print) 
```

否则，如果您希望将数字存储在表格中，则需要更长的方法：

```
str = "|2|34|56|1"
local tFinal = {}
str:gsub( "%d+", function(i) table.insert(tFinal, i) end)
table.foreach(tFinal, print)        -- This is only to verify that your numbers have been stored as a table. 
```

# asp.net - ASP.NET4.0 URL重写-四个参数的代码

> ID：11375530
> 
> 赞同：1
> 
> 时间：2012-07-07T13:47:56.877
> 
> 标签：asp.net, url-rewriting

我有一个页面 go.aspx，它接受四个参数 A、B、C、D，例如 go.aspx?A=a&B=b&C=c&D=d。url-rewrite 的工作方式是将其更改为 go/a/b/c/d。但并非所有参数都同时传递，所有可能的场景是：

1.  go.aspx?A=a
2.  go.aspx?A=a&B=b
3.  go.aspx?A=a&B=b&C=c
4.  go.aspx?B=b&C=c
5.  go.aspx?C=c
6.  go.aspx?C=c&D=d
7.  go.aspx?B=b&C=c&D=d
8.  go.aspx?B=b
9.  go.aspx?B=b&D=d

为每个场景编写路线是唯一的选择，还是可以修改一条路线以涵盖上述所有场景？

# cakephp - CakePHP 模型约定 - 关系到关系

> ID：11375531
> 
> 赞同：0
> 
> 时间：2012-07-07T13:47:59.100
> 
> 标签：cakephp

我有这些表：问题，问题集。

所以它与惯例一起做：questions_question_sets。

正确的？接下来，我有这张表：答案。

每个 questions_question_sets 都有很多答案，所以我需要将列名构建为单数。它将是：1\. questions_question_set_id 还是 2\. question_question_set_id？

我想它应该是第一个，但谁知道......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T13:57:26.160

**TLDR：**

```
questions_question_set_id 
```

**万一下一个人试图做这样的事情的更多细节：**

根据您要执行的操作，我将假设 a `Question`can 属于多个a `QuestionSet`，并且 an`Answer`特定于 a`Question`内的特定`QuestionSet`（与我认为合乎逻辑的相反- an`Answer`属于 a`Question`不管哪个`QuestionSet`在里面）。

**楷模**

```
Question
QuestionSet
Answer
QuestionsQuestionsSet 
```

**表**

```
questions
    id
question_sets
    id
answers
    id
    questions_question_set_id
questions_question_sets
    id
    question_id
    question_set_id 
```

**协会**

```
Question hasAndBelongsToMany QuestionSet
QuestionSet hasAndBelongsToMany Questions
Answer belongsTo QuestionsQuestionSet
QuestionsQuestionSet hasMany Answer 
```

**字段**

# mysql - Mysql错误：重复条目

> ID：11375534
> 
> 赞同：0
> 
> 时间：2012-07-07T13:48:24.147
> 
> 标签：mysql, sql, prestashop

在 Prestashop 商店的后台，我每次尝试更新或添加产品时都会遇到错误。错误如下。

```
Duplicate entry '31-17998' for key 'PRIMARY'

ALTER TABLE `ps_search_index` ADD PRIMARY KEY (`id_word`, `id_product`) 
```

有谁知道是什么原因造成的以及如何解决它？任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T10:31:14.200

我设法解决了这个错误，通过用最新版本替换 Search.php 类（来自 Prestashop 版本 1.4.8.2，目前使用 1.4.4.1），我还必须从 Tools.php 复制一个名为 replaceAccentedChars 的新函数，否则会给出我一个错误。我将在下次@DCoder 时向 Prestashop 问题跟踪器报告。

# jquery - 将框阴影添加到颜色框？

> ID：11375535
> 
> 赞同：1
> 
> 时间：2012-07-07T13:48:24.183
> 
> 标签：jquery, colorbox, css

我正在使用 jQuery 插件 Colorbox。几乎完美，但我正在尝试向盒子添加一个 CSS3 盒子阴影，到目前为止似乎没有任何效果。

我在用

```
#cboxLoadedContent{
        background:rgba(121,121,121,.8); 
        padding:30px;
        -webkit-box-shadow: rgba(0, 0, 0, 0.8) 2px 2px 8px;
        -moz-box-shadow: rgba(0, 0, 0, 0.8) 2px 2px 8px;
        box-shadow: rgba(0, 0, 0, 0.8) 4px 4px 8px;
    } 
```

背景颜色和内边距工作正常，但没有阴影。有人做过这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T01:26:52.720

找到了：

```
#colorbox, #cboxOverlay, #cboxWrapper
{position:absolute; top:0; left:0; z-index:9999; overflow:hidden;} 
```

溢出：阴影中隐藏的作物。它一直都在那里。似乎也不需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T13:52:55.833

您需要更改顺序：

```
box-shadow: 10px 10px 5px #888; 
```

## 解释

参数如下：

1.  **阴影的水平偏移量**，正数表示阴影在盒子的右边，负数表示阴影在盒子的左边。
2.  **阴影的垂直偏移量**，负数表示 box-shadow 将在 box 上方，正数表示阴影将在 box 下方。
3.  **模糊半径**（可选），如果设置为 0，阴影会很锐利，数字越大，越模糊。
4.  **散布半径**（可选），正值增加阴影的大小，负值减小大小。默认值为 0（阴影与模糊大小相同）。
5.  **颜色**

# php - 为 JS 模板添加价值 [blueimp / jQuery-File-Upload]

> ID：11375536
> 
> 赞同：0
> 
> 时间：2012-07-07T13:48:25.143
> 
> 标签：php, javascript, jquery

我遇到了 jQuery File Upload (blueimp) 的问题。

在上传文件时，我`insert`将数据归档到数据库。在那之后我可以得到最后一个插入ID。问题：如何将此值从 PHP 传输到 JavaScript 模板？

**为了更清楚，我需要这样的模板：**

```
<script id="template-download" type="text/x-tmpl">
   {% for (var i=0, file; file=o.files[i]; i++) { %}
      <div class="template-download fade" id="file-{%=file.id%}">
         <div class="name"><span>{%=file.name%}</span></div>
         ....
      </div>
   {% } %}
</script> 
```

`file.id`我在 PHP 中定义的最后一个插入 ID在哪里。

**SOLUTUON** : UploadHandler 类中的函数发布。添加类似的东西

```
$info[$index]->myvar= 'something'; 
```

然后我们可以`file.myvar`在模板中使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T06:12:43.060

我有一些额外的表单数据，我很幸运地将它们添加到函数中`handle_file_upload`

```
$file = new stdClass();
$file->name = $this->trim_file_name($name, $type, $index);
$file->size = $this->fix_integer_overflow(intval($size));
$file->type = $type;
//add additional post variables here:
$file->title = $_POST['title'][$index];
$file->description = $_POST['description'][$index]; 
```

# jstl - JSTL 中的中断方法

> ID：11375537
> 
> 赞同：0
> 
> 时间：2012-07-07T13:48:25.540
> 
> 标签：jstl, el

JSTL 是否支持 break 方法？我在网上搜索并没有找到好的答案。是否可以这样做：

```
<c:if test="${fn:contains(data, 'apple')}">
    <break>
</c:if> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T13:58:21.763

JSTL 不支持`break`语句或标记，除非直到版本 1.1。[您可以在文档页面](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/)中看到所有标签和功能的列表。

您将不得不在`test`条件中使用布尔变量来存档类似的行为。

# c - 达到涉及指针的定义

> ID：11375539
> 
> 赞同：1
> 
> 时间：2012-07-07T13:48:35.383
> 
> 标签：c, compiler-construction, analysis

假设我有一段代码：

```
int x = 100;
int* p = &x;
*p = 20;
print(x);    //<= reaching defitition of x? 
```

执行时会输出 20。
问题是哪个语句是到达定义`print(x)`，初始赋值还是指针赋值？

同样在以下代码中：

```
void sub(int* p)
{
    *p = 20;
}

int x = 100;
sub(&x);
print(x);    //<= reaching defitition of x? 
```

存在同样的问题。它是达到定义分析的特例，还是需要特殊的算法来处理它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T14:02:51.057

您需要了解更多指针的工作原理 假设您有 1 个电视和 2 个遥控器 在第一个示例中，变量 x（遥控器）有一个值 (100) 和地址 (TV)。现在出现了一个指针 *p，它指向与 x 相同的地址（同一电视的第二个遥控器）。当您更改 *p 的值（电视频道）时，您期望 x 的值会相应更改。所以现在 *p 和 x 都持有值 20（相同的电视频道）和相同的地址（同一台电视的 2 个遥控器）

我希望它现在更清楚一点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T14:04:25.893

我不确定我是否正确理解了达到定义，但这里是：

在您的第一个示例中，`*p = 20`是您的到达定义，因为它将值分配`20`给`x`.

在您的第二个示例中，再次`*p = 20`是`sub()`您的到达定义，因为它将值分配`20`给`x`.

`p`包含地址`x`并`*p =`修改保存在地址中的值`p`。

# c# - 如何限制 observablecollection 数据绑定列表框中的项目数？

> ID：11375543
> 
> 赞同：2
> 
> 时间：2012-07-07T13:49:13.040
> 
> 标签：c#, windows-phone, listbox-control

这是怎么回事。我有一个视图模型，我在其中调用一个 webclient 并用项目填充一个可观察的集合。我需要在两个不同的页面中有两个不同的列表框，但视图模型中的 ItemsSource 相同。如何限制两个列表框之一中的项目数而不影响另一个？我尝试在创建项目的视图模型中使用 .Take(limit) ，但这会影响两个列表框。

更新

视图模型

```
public class MainViewModel : INotifyPropertyChanged
{
    public MainViewModel()
    {
        this.Items = new ObservableCollection<ItemViewModel>();
        this.Mainlist = new CollectionViewSource();

    }

    public ObservableCollection<ItemViewModel> Items { get; private set; }
    public CollectionViewSource Mainlist { get; set; }

    void client_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        try
        {
           ...............
            //Ignore the dummy data in foreach loop. Just for showcase.

            foreach (var item in Items)
            {
                //Items creation

                this.Items.Add(new ItemViewModel()
                { LineOne = item });
            }

            this.Mainlist.Source = App.ViewModel.Items;
            this.Mainlist.Filter += (s, a) => 
                a.Accepted = App.ViewModel.Items.IndexOf((ItemViewModel)a.Item) < 10;
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }

    } 

    .....................
} 
```

在视图的一侧

```
 public MainPage()
    {
        InitializeComponent();
        DataContext = App.ViewModel;
        list.ItemsSource = App.ViewModel.Mainlist.View;
    } 
```

**更新 2**

我发现的另一种选择（不使用`CollectionViewSource`）是制作一个新的`public ObservableCollection<ItemViewModel> Mainlist { get; private set; }`并再使用一个

```
 foreach (var item in Items.Take(limit))
            {
                //Items creation

                this.Mainlist.Add(new ItemViewModel()
                { LineOne = item });
            } 
```

为了填充 ObservableCollection 并将列表框绑定到 Mainlist。这是有效的，但我认为这是不好的做法，因为这样我就有了重复的数据。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T14:18:39.457

您可以使用[CollectionViewSource](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionviewsource)并添加过滤逻辑来限制显示的项目数量。例如，如果您只想显示 100 个项目：

```
var cvs = new CollectionViewSource();
cvs.Source = myList;  //the raw list from the viewmodel
cvs.Filter += (s, a) => a.Accepted = myList.IndexOf(a.Item) < 100;
listBox2.ItemsSource = cvs.View; 
```

编辑：基于发布的代码

当您设置 时`Mainlist.Source`，也会更改`Mainlist.View`。所以`list.ItemsSource`在`MainPage`构造函数中设置 是没用的（此外，无论如何，该`View`属性最有可能`null`在那个时候）。为了解决您的问题，您应该将以下行移至`MainViewModel`构造函数：

```
this.Mainlist.Source = App.ViewModel.Items;
this.Mainlist.Filter += (s, a) => 
            a.Accepted = App.ViewModel.Items.IndexOf((ItemViewModel)a.Item) < 10; 
```

这样，您只设置`Source`一次，并且`View`不会更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-25T03:23:49.873

我可能会保持简单，并更多地朝着您原来的方法的方向前进，做一些类似的事情：

```
public MainViewModel()
{
    _items = new ObservableCollection<ItemViewModel>();
}

public ObservableCollection<ItemViewModel> Items { 
    get {return _items;} 
    private set {_items = value;} 
}
private ObservableCollection<ItemViewModel> _items;

private int _items_to_show_on_second_list = 10;

public ObservableCollection<ItemViewModel> ItemsLimit { 
    get {return _items.Take(_items_to_show_on_second_list);} 
    private set {_items = value;} 
} 
```

请注意，您可能不想在第二个可观察集合上设置任何内容，这取决于您。

好处是你没有改变你的逻辑，你仍然可以拥有可读的代码（使用`Take()`和有意义的变量名来避免`magic number`最终会被滥用。

# sql-server - SQL Server 零值 0.00 比 NULL 更可取吗？

> ID：11375548
> 
> 赞同：1
> 
> 时间：2012-07-07T13:49:57.010
> 
> 标签：sql-server, performance, tsql

只是一个普遍的问题。数据库保留值还是 NULL 更好？

我有一个每天计算的佣金字段，并且基于总金额值条件。下一个日期的佣金计算上一个并与总值相加。佣金也可以是 0.00，但不是负数。保持零值或将它们填充为NULL并在查询中使用'ISNULL（comm，0）'而不是'comm'会更好吗？

性能和数据库容量哪个更好？

UPD：性能刚刚好。我想知道当您每天有数百条用户记录时，存储容量是否有差异？NULL as EMPTY 真的是 EMPTY 还是当 0.00 的存储值小于 NULL 本身时它需要一些字节。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T13:56:38.907

如果佣金值为 0，则应保持为 0 ，不为 NULL。为什么要**调用**该`ISNULL`函数将其再次转换回0？这是错误的，它让未来的程序员将处理你的代码，坐下来思考 2 天为什么要这样设计。

保持简单和干净。使用 0。

来自[msdn](http://msdn.microsoft.com/en-us/library/ms191504%28v=sql.105%29.aspx)，

> NULL 值表示该值未知。NULL 值不同于空值或零值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T22:22:38.090

可空列通常使用额外的位来标记空值。记录某物是“空”的事实仍然是必须以某种形式编码的信息。显然，这涉及存储和处理。由于行在页面中的布局方式，存储组件仍然可能并不重要。无论哪种方式，这都不是您最重要的考虑因素。

*每次*引用该列时都必须编写 ISNULL 检查。这可能会使索引的使用复杂化。你会厌倦打字的。

如果您的意思是零，那么以这种方式存储它；一切都简单得多。保存用于在 DDL 中显式声明“NULL”和“NOT NULL”列定义的击键。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-07T14:05:16.717

NULL 真正表示 NULL，0 表示已知值为零。我怀疑性能上有什么不同，但这只是在合适的地方使用正确的变量的一般编程逻辑

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-08T08:29:43.263

在这里您可以了解 sqlserver 如何存储 NULL

[http://weblogs.sqlteam.com/mladenp/archive/2007/09/06/How_does_SQL_Server_really_store_NULL-s.aspx](http://weblogs.sqlteam.com/mladenp/archive/2007/09/06/How_does_SQL_Server_really_store_NULL-s.aspx)

# javascript - while 循环不能与 > 标记一起正常工作

> ID：11375552
> 
> 赞同：0
> 
> 时间：2012-07-07T13:51:09.163
> 
> 标签：javascript

这似乎不起作用我不确定如何让这个 while 循环正常工作，任何帮助将不胜感激。

```
function getProductCode() {
   productCode = parseInt(prompt("Enter Product Code: "));
   while (productCode < 1 || > 9999) 
   {
      document.writeln("Error! the product Code must be between 1 - 9999");
      parseInt(prompt("Enter Product Code: "));
   }
   return productCode
}

getProductCode() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T13:53:55.663

您`productCode`在左侧缺少一个操作数 ( )：

```
while (productCode < 1 || productCode > 9999) 
                          ^^^^^^^^^^^ 
```

和：

*   为 提供一个基数[`parseInt`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt)。未指定时，`010`变为 8（八进制文字）。
*   不要将变量泄漏到全局范围，用于[`var`](https://developer.mozilla.org/en/JavaScript/Reference/Statements/var)声明局部变量。
*   颠倒你的逻辑，或使用[`isNaN`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/isNaN). 当提供无效数字 ( [`NaN`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/NaN)) 时，您的循环不应停止。
*   最好将消息从`document.writeln`对话框移动。
*   将新值分配给`productCode`。否则，你就走不远了……
*   **重要提示**：可以在浏览器中禁用对话框。不要无限循环多次，而是添加一个阈值。

处理前 5 个要点的最终代码：

```
function getProductCode() {
   var productCode = parseInt(prompt("Enter Product Code: "), 10);
   while (!(productCode >= 1 && productCode <= 9999)) {
      productCode = parseInt(prompt("Error! the product Code must be between 1 - 9999\nEnter Product Code: "), 10);
   }
   return productCode;
} 
```

我没有实施门槛，这取决于你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T13:54:59.360

它应该是：

```
while (productCode < 1 || productCode > 9999) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T13:55:59.297

`(productCode < 1 || > 9999)`不是语法有效的表达式

你可能想要`(productCode < 1 || productCode > 9999)`

# python - 转移到新计算机后，在虚拟环境中找不到 Flask 扩展

> ID：11375557
> 
> 赞同：1
> 
> 时间：2012-07-07T13:51:59.187
> 
> 标签：python, virtualenv, flask

我首先承认我可能并不完全理解虚拟环境的内部运作，所以如果我犯了完全的失败，请原谅我。

对于我的桌面（Mac OS X 10.7 + Python 2.7），我有一个虚拟环境，其中包含我正在用 Python 构建的 Web 应用程序（使用 Flask 作为框架）。我想在笔记本电脑上做一些工作，所以我压缩了包含虚拟环境和我的代码的目录并将它转移到我的笔记本电脑（Mac OS X 10.7 + Python 2.7）。

解压缩后，我尝试启动我的应用程序并收到以下消息：

```
(venv)****:*** ***$ python runserver.py 
Traceback (most recent call last):
  File "runserver.py", line 2, in <module>
    from weirdcanada import app
  File "/Users/****/****/weirdcanada/weirdcanada/__init__.py", line 3, in <module>
    import weirdcanada.views
  File "/Users/****/****/weirdcanada/weirdcanada/views.py", line 18, in <module>
    from flaskext.principal import AnonymousIdentity
ImportError: No module named flaskext.principal 
```

然后我尝试`pip install flask-principal`安装它后，我重新运行了应用程序并收到了同样的错误。我`site-packages`在虚拟环境中检查并`flask-principal`安装了。

我的问题：

1.  我误解了虚拟环境的意义吗？我应该能够像我一样复制虚拟环境吗？我认为一致性和可移植性是主要特征。
2.  我怎样才能解决这个问题？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T17:42:10.447

我很确定改变这一行：

```
 from flaskext.principal 
```

至

```
 from flask.ext.principal 
```

应该管用。

我的系统上安装了 3 个虚拟环境（Mac OSX 10.6 + Python2.7）。我创建了一个新的 virtualenv，突然在其他 virtualenv 中运行良好的代码在这里不起作用，在这种情况下，flaskext.wtf 是罪魁祸首。

我在两个 virtualenvs 中检查了烧瓶的版本及其扩展，它们完全相同，所以版本问题也不成问题。

为什么会发生这种情况是没有意义的，但无论如何尝试一下并回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T16:40:22.657

我不确定，但你是调用系统范围的 python 安装，还是虚拟环境中的 python 二进制文件？一个虚拟环境显然会有它自己的 python 二进制解释器，并且所有的包都应该使用那个二进制文件来安装。即在 /usr/bin/ 或其他地方应该有一个系统范围的 python 二进制文件，在 /var/www/myapp/env/bin/ 或类似的地方应该有另一个。那就是需要在虚拟环境中安装应用程序的那个。

# python - 为什么我的 python 脚本只打开 IDLE？

> ID：11375569
> 
> 赞同：3
> 
> 时间：2012-07-07T13:53:50.140
> 
> 标签：python

我不明白为什么运行我的 Python 程序只会打开 IDLE。

不确定这是否更适合超级用户，但这里是：我无法从命令行运行 python 脚本。

OSX 10.7.4，python 3.2.3 的全新安装。我有以下python脚本`test.py`：

```
#! /usr/bin/env python
print("hello world") 
```

然后我让它可执行：

```
$> chmod +x test.py 
```

然后以下**所有**导致终端打开 IDLE，没有任何其他输出，即脚本未运行：

*   蟒蛇测试.py
*   python -i test.py
*   ./test.py

甚至`python -c 'print(5)'`在没有实际执行命令的情况下将我转储到 IDLE 中！IDLE 本身工作正常。有人知道会发生什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T14:11:02.690

不是很确定这个问题，但你有没有试过运行

```
 python3 test.py 
```

或将shebang线更改为python3？

trying to take a look at the content in your "python" console script (e.g. by `file `which python``) may also help reveal why it is linked to IDLE.

# r - 无法存储双 for 循环的结果

> ID：11375573
> 
> 赞同：0
> 
> 时间：2012-07-07T13:54:13.917
> 
> 标签：r, for-loop, store

我对 R 很陌生，并写了一个完全符合我要求的双 for 循环（具有特定块长度的索引号的块引导程序）。但是，我无法将 print(x_sample) 显示的内容存储在矩阵中。我已经尝试了 lapply 以及我可以在这里找到的所有其他内容，但我无法自己解决问题。我真的希望你能提供帮助。提前谢谢了

```
Here is my code:
x <- c(1:1060,1,2,3)
x_sample  <- numeric(119*4)
for (i in 1:3){
    for (j in 0:119){
          idx <- sample(1:1060,1,replace=TRUE)
          x_sample[(4*j+1):(4*j+4)] <- x[(idx):(idx+3)] }
    print(x_sample)} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T14:29:00.790

你的意思是这样的吗？：

```
values <- c(1:1060, 1, 2, 3)
m <- sapply(sample(1:1060, 360, replace=TRUE), function(idx)values[(idx):(idx+3)]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T14:34:45.677

在循环之前创建一个矩阵，然后填充矩阵：

```
x <- c(1:1060,1,2,3)
mat <- matrix(nrow=480, ncol = 3)
for (i in 1:3){
  for (j in 0:119){
    idx <- sample(1:1060,1,replace=TRUE)
    mat[(4*j+1):(4*j+4), i] <- x[(idx):(idx+3)] }
  print(mat)} 
```

# php - php 从连接表中选择

> ID：11375575
> 
> 赞同：0
> 
> 时间：2012-07-07T13:54:55.883
> 
> 标签：php, ms-access, adodb

PHP 还是新手！我想从一个类别名称中选择一些产品，但没有得到任何结果。有什么建议么？

我在 MS Access 中创建了一个产品表和类别表：

    **`Category`**字段为`CategoryID`, `ProductID`, 和`Category`头、雕塑和花瓶记录。
    **`Products`**字段是`ProductID`、`ProductName`、`Price`和`Details`。

```
$conn = new COM("ADODB.Connection") or die("Cannot start ADO"); 
$connString= "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=e:\\ectserver\\AHARDEN2\\Database\\products.mdb";
//creates the connection object and define the connection string

$conn->Open($connString);

$selectCommand="SELECT ProductName, Price, Details FROM Products WHERE ProductID = Head";

$rs = $conn->Execute($selectCommand);
//opens a recordset from the connection object

if (!$rs->EOF){

    $ProductName = $rs->Fields("ProductName");
    $Price = $rs->Fields("Price");
    $Details = $rs->Fields("Details");

}

print "You selected the following product last time:<p>";
print "<div id=\"category\"> "; 
print "Product Name: $ProductName<br>";
print "Price: $Price<br>";
print "Details: $Details<br>";
print "</div>";

$rs->Close; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T14:26:05.117

你的 sql 命令

```
$selectCommand="SELECT ProductName, Price, Details FROM Products WHERE ProductID = Head"; 
```

必须更改，以便从两个表中提取数据。您将`SQL JOIN`用于此目的。您基于一个公共 ID 连接两个表。一个例子是这样的

```
$selectCommand="SELECT ProductName, Price, Details FROM Products JOIN Category on Products.ProductID = Category.ProductID"; 
```

上面的查询将基于 ProductID 字段连接两个表。您当然可以像使用任何 SQL 查询一样在查询末尾应用 where 子句。

如果这不能解决您的问题，请告诉我，以便我澄清。

# powershell - 为 Node.js/PHP 构建 Windows Azure PowerShell CmdLet 时出现问题

> ID：11375580
> 
> 赞同：1
> 
> 时间：2012-07-07T13:55:22.430
> 
> 标签：powershell, azure

我正在尝试构建 Windows Azure PowerShell cmdlet，但在加载 cmdlet 时遇到问题。我已按照以下步骤操作：

1.  从主分支[https://github.com/WindowsAzure/azure-sdk-tools克隆最新代码](https://github.com/WindowsAzure/azure-sdk-tools)
2.  使用 VS 2010 SP1 Ultimate 构建解决方案 WindowsAzurePowershell.sln [我安装了用于 Windows Azure 和 WIX 的 Windows Azure SDK 1.7、VS 2010 工具]
3.  构建解决方案后，打开文件夹 C:\repo\Windows-Azure-SDK-Nodejs-Git\azure-sdk-tools\Package\Debug 并尝试通过运行以下命令加载 cmdlet：Get-ChildItem '.*. psd1' | ForEach-Object {导入模块 $_}

并得到以下错误。有人可以帮我解决这个问题吗？

如果我使用 WebPI 安装官方 cmdlet 位，一切正常。但是使用我构建的 msi 安装的 cmdlet 无法加载并出现相同的错误。

# 错误：

PS C:\repo\Windows-Azure-SDK-Nodejs-Git\azure-sdk-tools\Package\Debug> Get-ChildItem '.*.psd1' | ForEach-Object {Import-Module $*} > error.txt 导入模块：无法加载 Windows PowerShell 管理单元 C:\Interop-TFS\Windows-Azure-SDK-Nodejs-Git\azure-sdk-tools\Package\Debug\Microsoft.WindowsAzure.Management。 ServiceManagement.dll 因为以下错误：无法加载一种或多种请求的类型。检索 LoaderExceptions 属性以获取更多信息。加载程序异常：无法加载文件或程序集“Microsoft.WindowsAzure.Management，Version=1.0.0.0，Culture=neutral，PublicKeyToken=31 bf3856ad364e35”或其依赖项之一。该系统找不到指定的文件。无法加载文件或程序集“Microsoft.WindowsAzure.Management，Version=1.0.0.0，Culture=neutral，PublicKeyToken=31 bf3856ad364e35”或其依赖项之一。该系统找不到指定的文件。无法加载文件或程序集“Microsoft.WindowsAzure。管理，版本=1.0.0.0，文化=中性，PublicKeyToken=31 bf3856ad364e35' 或其依赖项之一。该系统找不到指定的文件。无法加载文件或程序集“Microsoft.WindowsAzure.Management，Version=1.0.0.0，Culture=neutral，PublicKeyToken=31 ..... bf3856ad364e35”或其依赖项之一。该系统找不到指定的文件。无法加载文件或程序集“Microsoft.WindowsAzure.Management，Version=1.0.0.0，Culture=neutral，PublicKeyToken=31 bf3856ad364e35”或其依赖项之一。该系统找不到指定的文件。在 line:1 char:57 + Get-ChildItem '.*.psd1' | ForEach-Object {Import-Module <<<< $ 无法加载文件或程序集“Microsoft.WindowsAzure.Management，Version=1.0.0.0，Culture=neutral，PublicKeyToken=31 ..... bf3856ad364e35”或其依赖项之一。该系统找不到指定的文件。无法加载文件或程序集“Microsoft.WindowsAzure.Management，Version=1.0.0.0，Culture=neutral，PublicKeyToken=31 bf3856ad364e35”或其依赖项之一。该系统找不到指定的文件。在 line:1 char:57 + Get-ChildItem '.*.psd1' | ForEach-Object {Import-Module <<<< $ 无法加载文件或程序集“Microsoft.WindowsAzure.Management，Version=1.0.0.0，Culture=neutral，PublicKeyToken=31 ..... bf3856ad364e35”或其依赖项之一。该系统找不到指定的文件。无法加载文件或程序集“Microsoft.WindowsAzure.Management，Version=1.0.0.0，Culture=neutral，PublicKeyToken=31 bf3856ad364e35”或其依赖项之一。该系统找不到指定的文件。在 line:1 char:57 + Get-ChildItem '.*.psd1' | ForEach-Object {Import-Module <<<< $ PublicKeyToken=31 bf3856ad364e35' 或其依赖项之一。该系统找不到指定的文件。在 line:1 char:57 + Get-ChildItem '.*.psd1' | ForEach-Object {Import-Module <<<< $ PublicKeyToken=31 bf3856ad364e35' 或其依赖项之一。该系统找不到指定的文件。在 line:1 char:57 + Get-ChildItem '.*.psd1' | ForEach-Object {Import-Module <<<< $*} > error.txt + CategoryInfo : ResourceUnavailable: (:) [Import-Module], PSSnapInException + FullyQualifiedErrorId : PSSnapInLoadFailure,Microsoft.PowerShell.Commands.ImportModuleCommand

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T20:28:02.340

尝试这个：

*   转到控制面板和与“Windows Azure Powershell *”相关的所有内容，全部卸载。
*   现在安装[Windows Azure Powershell CMdlet](http://go.microsoft.com/?linkid=9811175&clcid=0x409)
*   验证您是否已安装 powershell @ C:\Program Files (x86)\Microsoft SDKs\Windows Azure\PowerShell （您将在此文件夹中的所有 dll 导致您的问题案例中丢失）
*   现在在管理员模式下打开一个 Windows Powershell 提示符
*   使用此[链接](http://msdn.microsoft.com/en-us/library/windowsazure/jj156055)并按照流程验证您是否可以访问 Windows Azure 管理服务（这只是为了验证您的计算机中是否具有所需的所有模块）
*   现在尝试任何你想尝试的东西，应该没有任何问题。

# ios - 从子视图中引用包含 UIView？

> ID：11375594
> 
> 赞同：1
> 
> 时间：2012-07-07T13:57:36.880
> 
> 标签：ios, xcode, cocoa, uiview, subview

当我将 UIView 子类对象添加到 UIView - 例如原型 UITableViewCell 中的 UISwitch 并通过 IBAction 将此开关与 ViewController 连接时，如何在此操作中找出调用的 UISwitch 所在的表行？

为了清楚起见，我附上了图像 - 当调用 UISwitch 时，我想知道调用的 UISwitch 在哪一行。

![代码](../Images/39f9ae3ea2418a9e9fe1ca22c51cd94e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T14:01:59.237

我认为“最干净”的方法是让开关将其动作发送到单元本身。您需要将 UITableViewCell 子类化以实现该操作，并将其传递给视图控制器上的方法（可能通过为单元格提供视图控制器所连接的委托）。这是相当的盛况；下面有更直接但不太合适的方法。

一种方法是`tag`在首先配置表格视图单元格时（即在您的`tableView:cellForRowAtIndexPath:`方法中）在 UISwitch 上指定 a 。类似的东西`switch.tag = indexPath.row`; 然后，您可以稍后通过向交换机询问其标签来检索该行。

另一种方法是向上搜索 UISwitch 的超级视图，直到找到 UITableViewCell 然后找到它的行。就像是：

```
UIView *view = switch.superview;
while (view && ![view isKindOfClass:[UITableViewCell class]]) {
    view = view.superview;
}
// at this point, view is nil or a table view cell; ask the table view for its index path
if (view) {
    NSIndexPath *path = [tableView indexPathForCell:cell];
} 
```

# boost - enable_if 和构造函数

> ID：11375596
> 
> 赞同：2
> 
> 时间：2012-07-07T13:57:41.387
> 
> 标签：boost, enable-if

这有什么问题？

我认为这应该在使用 enable if 时起作用？？？

帮助？？

不应该排除第二个构造函数吗？

```
#include <iostream>
#include <boost/type_traits.hpp>
#include <boost/utility/enable_if.hpp>

template<class T>
class integral_holder{
public:
integral_holder(T value_, typename boost::enable_if_c< boost::is_integral<T>::value>::type* ignore = 0) : value(value_){
    std::cout << "Integral" << std::endl;
}

integral_holder(T value_, typename boost::enable_if_c< boost::is_floating_point<T>::value>::type* ignore = 0) : value(floor(value_)){
    std::cout << "Floating point" << std::endl;
}

private:
  T value; 
```

};

```
int main(int argc, const char * argv[])
{

   integral_holder<int> a(22);

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T14:12:30.350

当从类模板生成一个类并在该过程中实例化构造函数的声明（不是它们的主体，而只是它们的“签名”）时， enable_if 类型无效并且您会收到编译器错误。

您需要使 enable_if 类型依赖于构造函数的模板参数（使其成为函数模板）。然后，您的目标会起作用，因为当您使用将触发 SFINAE 案例的构造函数时，会在推导函数模板参数类型期间形成无效类型。

# ios - 创建 i18n 文件时 Xcode 可重现崩溃

> ID：11375600
> 
> 赞同：0
> 
> 时间：2012-07-07T13:58:09.033
> 
> 标签：ios, xcode, internationalization

我想国际化我的应用程序。因此我尝试创建 i18n 键值文件 Localizable.strings。按照 I18n 教程，我创建了一个文件夹 en.lproj（实际上它已经存在），另外我添加了一个名为 de.lproj 的文件夹。然后我重新启动了 xcode 项目，并按照教程中的描述创建了 File->New->Strings 文件。但是每次我尝试创建一个 Localizable.strings 文件时，xcode 在创建它时都会崩溃。我检查了该文件是否实际创建，但是当我在 xcode 中重新打开我的项目时，这些文件未显示在“支持文件”组下。列出了一个名为 Localizable.strings 的文件，但我无法区分英语和德语，即文件名左侧没有三角形表示存在另一种语言属性文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T14:38:14.033

在 XCode 中创建一个`Localizable.string`，在文件信息窗口中选择“使文件可本地化”并添加您的语言。XCode 将自动创建`*.lproj`文件夹和文件的不同版本。

# python - 如何在 Python 中使用正则表达式检测空格分隔的数字？

> ID：11375605
> 
> 赞同：1
> 
> 时间：2012-07-07T13:58:57.393
> 
> 标签：python, regex, python-2.7

我想从文本中提取 10 位电话号码。数字的格式如下：`1234 567890`或`1234567890`。我写了以下正则表达式：

```
mask = re.compile('.[\d]{4}[\s]?[\d]{6}') 
```

但这不起作用。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T14:16:49.600

我想你想要`\d{4}\s?\d{6}`。

为什么`.`一开始就有这个？

# ruby-on-rails - 使用 Ruby on Rails 包含来自单独文件的表单

> ID：11375606
> 
> 赞同：0
> 
> 时间：2012-07-07T13:59:06.103
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个表格来创建一个新`Player`的`/players/new.html.erb`

```
<%= form_for(@player) do |f| %>
  ...
<% end %> 
```

我想包含在主页中。

如果我只是复制粘贴整个表单，我会收到此错误：`undefined method`model_name' for NilClass:Class`

我可以将表单包含在 iframe 中

```
<div>
  <iframe src=../players/new.html>
</div> 
```

但这显示了带有页眉和页脚的整个页面。

我怎样才能包含表单，最好是直接从文件中（即没有复制粘贴）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T14:17:28.430

你`form_for`至少`@player`需要在场

如果您真的想在主页上包含该表单，那么在您的主控制器操作中初始化新的 Player 实例：

```
@player = Player.new 
```

但是您必须意识到`PlayerController`（或您为其创建该表单的任何控制器）的视图可以依赖于访问辅助方法，`PlayerHelper`因此您可能还需要将其包含在您的`HomeHelper`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T14:22:33.963

我会将这些字段移动到一个部分中，并在主页和其他页面上重复使用这些字段。请记住，这将在其中设置 url 以`form_or`使其正常工作。

# c - 需要帮助了解与 scanf 结合使用的 ungetc 行为

> ID：11375611
> 
> 赞同：0
> 
> 时间：2012-07-07T13:59:37.233
> 
> 标签：c

我无法理解我的程序的行为。它调用scanf，然后是ungetc，然后是printf。

我无法得到输出行为背后的原因。这是代码。如果有人澄清了这种行为，将会很有帮助。

```
int main()
{
  int n=0;
  scanf("%d",&n);
  ungetc(n,stdin);
  printf("%d\n",n);
  return 0;
} 
```

**gcc 编译器和 linux 平台中的输出：** 首先如果我给 90，那么它会等待另一个数字，在我给另一个数字之后它会打印 90。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T14:12:45.547

以指示期望并吃掉它在您的号码后看到的所有空格来结束您的`scanf()`格式。它看起来像在等待另一个输入的原因是因为它会读取直到它得到一些*非空白*字符。您输入的任何内容都不会被实际读取，而是留给后续读取。`\n``scanf()`*`stdin`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T14:15:18.793

扫描格式

```
scanf("%d\n",&n); 
```

消耗您输入的数字之后的所有空格。因此，只有在您输入非空白字符（以及将输入发送到程序的换行符）后，扫描才会完成。不需要专门的`\n`换行符，它告诉`scanf`消耗所有后面的空格并忽略它。*

# networking - 没有端口转发的两台计算机之间如何通信？

> ID：11375613
> 
> 赞同：1
> 
> 时间：2012-07-07T13:59:54.110
> 
> 标签：networking, language-agnostic

我正在做一个项目，我必须通过互联网在计算机之间发送信息。通常，确保没有太多模糊的明显解决方案是端口转发。但是，我注意到像 Skype 这样的应用程序能够打开诸如此类的连接，而无需转发用户端口（在大多数情况下）。当您能够使用诸如 netstat 之类的工具检索通话另一端的人的 IP 时，我注意到了这一点。

所以我的问题是：Skype 和“其他”应用程序是如何做到这一点的？“普通”路由器有多开放？

注意：我没有阅读太多关于网络的内容，这可能是微不足道的，但如果您确实对这个主题或与网络相关的任何内容有任何好的阅读，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T02:30:08.207

Skype 使用一种称为“打孔”的技术来通过防火墙。

[我在这里](http://www.acooke.org/cute/WhatisTCPh1.html)写了很长的描述。从此：

> 一般来说，打孔需要以下几点：
> 
> *   作为初始连接目标的外部公共服务器，它有助于协调连接过程。
> *   NAT 后面的两个对等点，最终将直接连接。
> *   NAT 实施对它们接受的流量宽松，并且在它们的操作方式上是可预测的。
> *   一种协议（如 TCP），它接受的流量比较宽松，特别是它使用的状态机和消息比假定的更高级别的服务器/客户端角色更对称。
> 
> 打孔的一般过程（请记住，这只是一个粗略的草图）是：
> 
> *   对等点连接到中央公共服务器并就将连接的对达成一致。
> *   中央服务器为每个 NAT 确定未来的传出连接是如何创建的（当对等点建立
>     通过 NAT 的连接时，必须在 NAT 上打开一个端口以接收响应；通常使用的端口号是连续的） .

（其实上面的细节都是针对 TCP 打孔的。Skype 使用 UDP 是可能的，但大体思路是类似的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T15:18:32.590

没关系，显然这是使用代理连接的中间服务器完成的。

# asp.net - 在不同的会话中引用相同的对象

> ID：11375614
> 
> 赞同：0
> 
> 时间：2012-07-07T13:59:56.387
> 
> 标签：asp.net, .net

我正在 ASP.NET 中构建一个基于 Web 的国际象棋，其想法是在会话中保留有关表（棋子的位置，轮到谁...）的信息，作为对存储所有需要信息的 Game 类实例的引用。

我不知道如何让两个玩家的 Sessions 包含对服务器上相同对象的引用，以便当一个玩家移动时，另一个玩家在其会话中包含有关该移动的信息。

因为我想避免大量的数据库访问，这甚至是一种有效的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T14:09:23.880

诸如“轮到谁”之类的内容需要保留在应用程序级别。所以要么使用静态变量，要么使用 Application 集合。就个人而言，我会使用“游戏”对象的静态集合。您还需要牢记线程安全，因为所有会话都可以访问同一个集合。

# jquery - jquery 只删除/添加一次类

> ID：11375615
> 
> 赞同：1
> 
> 时间：2012-07-07T14:00:07.773
> 
> 标签：jquery, hover, mouseover

我的jQuery代码：

```
$(document).ready(function() {  
    $("#adminbar").mouseover(function () {  
        $(this).addClass("adm_bar").slideDown("slow");  
    });
    $("#adminbar").mouseout(function () {  
        $(this).removeClass("adm_bar").slideUp("slow");  
    });  
}); 
```

但是，当您使用#adminbar 将 div 悬停时，它只会添加/删除一次该类，如果您再次尝试这样做，它将无法正常工作。我希望您能够根据需要将其悬停多次。
怎么了？

编辑：它在页面顶部，[我的网站（正在建设中）](http://craftersinn.net)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T14:09:38.637

看起来当您使用 slideUp 时，jQuery 会自动将显示设置为无，因此您不能悬停不“存在”的元素 - 它仍然存在但不能“悬停”。

在 slideUp 之后尝试添加一个 display : "block" 属性和 visibility: "hidden"。

您应该能够以这种方式悬停元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T14:02:10.027

您可以尝试使用 jQuery **[.hover()](http://api.jquery.com/hover)**：

```
$("#adminbar").hover(function() {
  $(this).addClass("adm_bar").slideDown("slow", function() {
    $(this).css({
        visibility : 'visible',
        display: 'block'
    })
  });  
},
function() {
  $(this).removeClass("adm_bar").slideUp("slow", function() {
    $(this).css({
        visibility : 'hidden',
        display: 'block'
    })
  }); 
```

您需要`visibility: hidden/visible`在动画完成后。因为在动画隐藏后它使用它`display: none`作为结果它无法捕获下一个悬停事件。所以你的代码也可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T14:03:33.163

使用该`.hover()`功能。

```
$("#adminbar").hover(function() {
    $(this).addClass("adm_bar").slideDown("slow");  
},
function() {
    $(this).removeClass("adm_bar").slideUp("slow");  
}); 
```

# c++ - 通过多平台支持有效地在屏幕上渲染图像？

> ID：11375617
> 
> 赞同：0
> 
> 时间：2012-07-07T14:00:48.670
> 
> 标签：c++, image, visual-c++, rendering, multiplatform

我正在制作某种图像查看器/编辑器程序，它可以在所有 3 个主要平台上运行。

我知道我不能使用 OpenGL，因为这个程序应该可以使用最糟糕的 GFX 卡，这意味着可能没有可用的 OpenGL 驱动程序。

其他程序如何在不使用硬件加速的情况下如此快速地在屏幕上绘制？（GFX 卡）。

我以前使用 SDL 在屏幕上渲染像素，这可能是解决方案吗？或者我应该为所有 3 个主要系统（Windows、Mac、Linux）分别实现图像渲染？如果是这样，哪些库用于所有这 3 个系统？

我不需要任何花哨的动画，只需要简单的静止图像，我可以放大/缩小并用鼠标移动。我不知道图像移动是如何工作的，因为这将不得不更新屏幕上的所有像素，这会很慢，有什么技巧可以优化吗？（没有硬件加速）。

比如 Paint Shop Pro 7 有非常优化的图像查看，我认为它根本不使用我的 GPU，而且它也非常快，我自己如何才能达到那个速度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T19:37:43.390

OpenGL 适用于所有三个平台（windows、linux、mac）。即使在最糟糕的图形卡上也支持它的固定管道。

图像渲染可以使用纹理完成，并且每张卡都支持。

鼠标操作必须在 SDL（或其他框架）中完成。

如果你选择不使用opengl，你可以使用qt，它几乎是平台无关的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T02:50:20.740

我为实现多平台绘图所做的工作是在每个平台的绘图例程（Windows 的 Winforms 或 WPF、OS X 的 Core Graphics 和 Linux 的 Cairo）之上编写一个抽象层。它在这里是开源的： [https ://github.com/picoe/Eto](https://github.com/picoe/Eto)

这目前用于绘图应用程序，该应用程序支持动画，因此对于许多场景来说性能足够：http: [//picoe.ca/products/pablodraw](http://picoe.ca/products/pablodraw)

您可能喜欢也可能不喜欢的一件事（取决于您如何看待它）是它是用 .NET/C# 编写的。

# jquery - Jquery 移动布局建议。

> ID：11375618
> 
> 赞同：0
> 
> 时间：2012-07-07T14:01:02.180
> 
> 标签：jquery, mobile

所以我主要使用 phonegap 来构建小的 iPhone 应用程序。我现在有一个可以从 jquery mobile 中受益的项目。

我的问题是关于页面的结构。对我来说最有意义的是将所有内容拆分到自己的页面中。即个人资料页面、朋友页面、位置页面等，以利用我需要使用页面容器将所有内容保存在一个 HTML 页面中的动画。

作为 jquery mobile 的新手，我对仅使用一页而不是转换的好处感到困惑。

不确定这是否重要，但我的所有内容都是通过 Ajax 调用提取的，而 JavaScript 只是替换了指定 div 中的内容。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T14:04:58.747

将每个功能部分保存在单独的页面中。这是干净且可维护的方式。默认情况下， jQuery ajax 将通过 ajax 自动加载内容（在页面之间导航时），您将获得[动画](http://jquerymobile.com/test/docs/pages/page-links.html)。确保遵循jQuery 移动文档中提到的页面结构（页眉 div、内容 div、页脚 div [）](http://jquerymobile.com/test/docs/pages/page-anatomy.html)

# delphi - 我可以访问 TBits 内部位图吗？

> ID：11375619
> 
> 赞同：2
> 
> 时间：2012-07-07T14:01:14.983
> 
> 标签：delphi, bits

特别是，我想预设所需的大小，从外部源获取位图，然后以~~经典~~的面向对象的方式处理数据。

我想什么

1.  TBits 不仅仅是一个简单的布尔值集合和
2.  内部存储是连续的。

我对这些假设是否正确？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-07T14:58:51.210

1.  正确，`TBits`内部是位结构的，所以它不是一个简单的布尔集合。
2.  是的，存储是通过分配足够大的连续内存来处理的（以 SizeOf(integer) 为增量）。

要获得对内部数据指针的访问，`class helpers`可以使用。

```
Type
  TBitsHelper = class helper for TBits
    private
      function GetBitsPointer: Pointer;
    public
      property BitsPt: pointer read GetBitsPointer;
  end;

function TBitsHelper.GetBitsPointer: Pointer;
begin
  with Self do Result := FBits;  
end; 
```

# ftp - 在 C# 中制作一个聊天程序，你将如何创建一个 ftp 功能

> ID：11375620
> 
> 赞同：0
> 
> 时间：2012-07-07T14:01:15.597
> 
> 标签：ftp, chat, tcpclient, tcplistener

我已经为我的 FTP 创建了一个聊天程序和一个创建的 GUI。我已经编写了我认为适用于 FTP 的代码，但是当我运行该解决方案时，它总是给我不同的结果。也就是说，它每次都创建具有不同内存集的文件。这是相关的编码，当它被传输回客户端时，问题似乎发生了：

在服务器中：

```
 //Listens for new commands coming in from the client associated with the client object
    public void Command_Listener()
    {
        foreach (Client C in UI[0].clients)
        {
            sw.WriteLine("2: User: " + username + " has connected...");
            sw.Flush();
            //Notifies other client objects inside the user interface that this one is operational
        }
        while (UI[0].busy)
        { } //waits for the log to not be busy with another task then declares this task is over
        UI[0].busy = true;
        UI[0].Log_Event(username + " has connected..." + DateTime.Now.ToString());
        UI[0].Log_Event("Client username : " + Client_Info[0]);
        UI[0].Log_Event("Client computer name : " + Client_Info[1]);
        UI[0].Log_Event("Client operating system : " + Client_Info[2]);
        UI[0].Log_Event("Client lan IP address : " + Client_Info[3]);
        UI[0].Log_Event("Client wan IP address : " + Client_Info[4]);
        //sends the client info from the client to the server's user interface and the log
        UI[0].busy = false;
        while (true)
        {
            try
            {
                string command = sr.ReadLine();
                //waits for a new message
                if (command[0] == '1')
                    Update_Chat_List(command.Replace("1: ", ""));
                    //Determines the Username has changed and needs to update the list
                if (command[0] == '2')
                    Update_Message_Board(command.Replace("2: ", ""));
                    //Determines the message board on each clients needs to update with the new command included
                if (command == "3: typing" && !typing) //Determines the client's typing
                {
                    typing = true;
                    Update_Chat_List(username);
                }
                if (command == "3: empty" && typing) //Determine the client's not typing
                {
                    typing = false;
                    Update_Chat_List(username);
                }
                if (command[0] == '5') //Determines that a new FTP is in progress
                    Update_FTP_Status(command.Replace("5: ", ""));
                if (command[0] == '6')
                {
                    //Adds the incoming kilobyte of the file to a string list
                    kilos.Add(command.Replace("<heartbeat>", ""));
                }
                if (command[0] == '7')
                {
                    //Tells the server that all pieces of the file have been recieved
                    kilos.Add(command);
                    new Thread(Send_File).Start();
                }
            }
            catch //catchs all listening problems and tells the server the client must be removed and then does a user list update and logs the exit
            {
                sw.Dispose();
                sr.Dispose();
                UI[0].clients.RemoveAt(Client_Index);
                UI[0].Update_Index();
                while (UI[0].busy)
                { }
                UI[0].busy = true;
                UI[0].Log_Event(username + " has disconnected...");
                UI[0].busy = false;
                foreach (Client C in UI[0].clients)
                {
                    C.sw.WriteLine("2: " + username + " has disconnected...");
                    C.sw.Flush();
                }
                Update_Chat_List("");
                return;
            }
        }
    }

    public void Send_File() 
    {
        string last = "";
        foreach (string kilo in kilos)
        {
            FTP_Connection[0].sw.WriteLine(kilo);
            FTP_Connection[0].sw.Flush();
            //sends all part of the file and the closing compile command for the client
        }
        ftping = false;
        int length = last.Length;
        FTP_Connection[0].ftping = false;
        //changes ftp status to off
    }

    public void Update_FTP_Status(string user)
    {
        string filename = "";
        bool building = false;
        foreach (char c in user)
        {
            if (building)
                filename = filename + c;
            else if (c == ':')
                building = true;
        }
        //retrieves the filename
        user_to_send_to = user.Replace(":" + filename, "");
        //replaces the filename out of the message to get the user to send to
        foreach (Client User in UI[0].clients)
        {
            if (User.username == user_to_send_to)
            {
                User.sw.WriteLine("5: " + username);
                User.sw.Flush();
                User.sw.WriteLine(filename);
                User.sw.Flush();
                FTP_Connection.Add(User);
                //notifies the client they are recieving a file then setups a direct access to the client the ftp is going to.
            }
        }
    } 
```

在客户端：

```
 //Listens for new commands given by the server
    void Command_Listener()
    {
        Connected = true;
        while (true)
        {
            try
            {
                string Comunicae = sr.ReadLine();
                //recieves the message
                if (Comunicae[0] == '1')
                    User_List_Update(Comunicae.Replace("1: ", ""));
                    //Determines the user list has to be updated
                if (Comunicae[0] == '2')
                    New_Message(Comunicae.Replace("2: ", ""));
                    //Determines the messages board has to be updated
                if (Comunicae[0] == '4')
                    New_Server_Command(Comunicae.Replace("4: ", ""));
                if (Comunicae[0] == '5') //notifies the user theres a new ftp incoming
                {
                    ftping = true;
                    string filenam = sr.ReadLine();
                    File_Name = filenam;
                    FTP_Sender = Comunicae.Replace("5: ", "");
                    Recipients_Message = Comunicae.Replace("5: ", "") + " is sending you " + filenam + " file via ftp...\r\nYou will recieve this file in " + settings[0].driver + "program data\\";
                }
                if (Comunicae[0] == '6')
                {
                    int length = Comunicae.Length;
                    lengths.Add(length);
                    string kilo = Comunicae.Replace("6: ", "");
                    kilos.Add(kilo);
                    //gathers the incoming file parts
                }
                if (Comunicae[0] == '7')
                {
                    new Thread(Compile_File).Start();
                    //Pieces together the file
                }
            }
            catch (Exception E)
            {
                //Kills the client if theres a reading error
                Process.GetCurrentProcess().Kill();
                return;
            }
        }
    }

    void Compile_File()
    {
        int length = kilos[kilos.Count - 1].Length;
        List<byte> file = new List<byte>();
        foreach (string kilo in kilos)  //seperates out each byte in each file part  then adds to the byte list
        {
            string byt = "";
            int helper = 0;
            foreach (char C in kilo)
            {
                if (helper == 3)
                {
                    string temp = byt;
                    file.Add(Convert.ToByte(temp));
                    byt = "";
                    helper = 0;
                }
                if (C != '|')
                {
                    byt = byt + C;
                }
                helper++;
            }
        }
        byte[] final = new byte[file.Count - 1];
        for (int i = 0; i != file.Count - 1; i++) //Converts the byte list to an array
        {
            final[i] = file[i];
        }
        File.WriteAllBytes(settings[0].driver + "Program Data\\" + File_Name, final);
        //Writes the file
        ftping = false;
    }

    private void Send_Click(object sender, EventArgs e)
    {
        if (Controler[0].ftping) //Detects transfers in progress
        {
            MessageBox.Show("You already have a file transfer in progress...");
            return;
        }
        if (ftping_users.Contains(User_To_Send_To.Text)) //Detects if the user you try to send to already has a file inbound
        {
            MessageBox.Show(User_To_Send_To.Text + " is has a inbound or outbound file already in progress...");
            return;
        }
        Controler[0].Update_FTP_Status(User_To_Send_To.Text, Selected_File);
        //Aprises the server of a new FTP in progress
        byte[] file = File.ReadAllBytes(Current_Directory.Text.Replace(fil, ""));
        //Reads the file
        Thread T = new Thread(() => Get_Kilos(file));
        T.Start();
        //Starts segmenting the file bytes and converting them to strings for transfer
        this.Hide(); 
    }

    public void Get_Kilos(byte[] file)
    {
        List<string> kilos = new List<string>();
        string kilobyte = "";
        foreach (byte B in file)
        {
            string byt = (Convert.ToInt32(B)).ToString();
            if (byt.Length == 1)
                byt = "||" + byt;
            if (byt.Length == 2)
                byt = "|" + byt;
            kilobyte = kilobyte + byt;
            //Makes a bytes string length a standard 3 characters
            if (kilobyte.Length == 3072)
            {
                string temp = "6: " + kilobyte;
                kilos.Add(temp);
                kilobyte = "";
                //Adds the part to a list of file parts
            }
        }
        kilos.Add("6: " + kilobyte);
        foreach (string kilo in kilos)
        {
            int length = kilo.Length;
            Controler[0].sw.WriteLine(kilo);
            Controler[0].sw.Flush();
            //Sends the File parts
        }
        Controler[0].sw.WriteLine("7: Complete...");
        Controler[0].sw.Flush();
        //Lets the server know the transfer is complete
        Controler[0].ftping = false;
    } 
```

# c++ - 排序向量的最快方法是什么？

> ID：11375621
> 
> 赞同：1
> 
> 时间：2012-07-07T14:01:15.643
> 
> 标签：c++

我想按距离变量对“mystruct”进行排序，最快的方法是什么？

```
struct MyStruct {
   int scale;
   bool pass;
   float distance;
};
vector<MyStruct> mystruct;
...
sort (mystruct.begin(), mystruct.begin() + mystruct.size());
//this doesn't work since is trying to sort by "MyStruct" and not by a number 
```

如果我有一个

```
vector<float> myfloat;
...
sort (myfloat.begin(), myfloat.begin() + myfloat.size()); 
```

然后将完美地工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T14:02:41.493

`operator<`您需要为您的结构编写自己的。

它应该是这样的

```
bool operator<( const MyStruct& s1, const MyStruct& s2 )
{
    // compare them somehow and return true, if s1 is less than s2
    // for your case, as far as I understand, you could write
    // return ( s1.distance < s2.distance );
} 
```

另一种选择是编写一个函数对象，但这里没有必要，编写`operator<`更容易（对于初学者）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-07T14:04:59.010

您需要为排序函数提供函子或小于运算符：

```
struct MyStruct_Compare {
    bool operator()(const MyStruct& a, const MyStruct& b) {
        return a.distance < b.distance;
    }
}

std::sort(mystruct.begin(), mystruct.end(), MyStruct_Compare()); 
```

或者：

```
bool operator<(const MyStruct& a, const MyStruct& b) {
    return a.distance < b.distance;
}

std::sort(mystruct.begin(), mystruct.end()); 
```

# jquery - 如何单独更改highcharts条的宽度

> ID：11375624
> 
> 赞同：1
> 
> 时间：2012-07-07T14:01:40.983
> 
> 标签：jquery, graph, highcharts

我正在尝试使用 HighCharts 绘制条形图。到目前为止一切顺利，但我希望根据类别拥有不同宽度的条形。

我有 2 个类别，“Cat A”和“Cat B”。正常行为是将它们绘制成相同的，但我希望 Cat B 比 Cat A 更薄。

我一直在阅读文档并尝试使用[lineWidth](http://www.highcharts.com/ref/#xAxis--lineWidth)，但它似乎只适用于折线图。也许这可以通过编程方式完成？我在 Chrome 的控制台中玩过这个对象，但没有找到有用的属性/方法..

[这](http://jsfiddle.net/Hartimer/jWxTm/3/)就是我到目前为止所拥有的。任何帮助/提示/链接将不胜感激！并提前谢谢你

PS：我也想骑左边的第一条网格线，在 x 值标签旁边......我已经做到了，不记得是怎么做到的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T03:31:57.700

我找到了问题的解决方案。LineWidth 可以解决问题。根据[这篇](http://highslide.com/forum/viewtopic.php?f=9&t=17023&p=70650&hilit=different%20widths)文章，您可以为每个系列指定特定的宽度。结合一点算法，您可以轻松制作不同宽度的条形图。

我更新了我的示例，请参见[此处](http://jsfiddle.net/Hartimer/jWxTm/8/)。感觉有点“hacky”，但对于我的用例来说就足够了。

# android - 如何在 Android 中仅打开邮件客户端

> ID：11375625
> 
> 赞同：0
> 
> 时间：2012-07-07T14:01:58.157
> 
> 标签：android

我在 Stackoverflow 中以编程方式引用了这个答案[Android open emailclient 以编程](https://stackoverflow.com/questions/5596971/android-open-emailclient)方式打开邮件客户端，如果我在我的手机中尝试这个，它不会显示 Gmail 或任何其他电子邮件客户端，而是显示 Skype、蓝牙选项。请帮助我如何删除这些选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T14:08:59.363

如果您有一个特定的电子邮件地址，您正试图让用户向其发送消息，请使用`ACTION_SENDTO` `Intent`带有 a 的`mailto:xxxx@yyy.com` `Uri`（替换`xxxx@yyy.com`为实际电子邮件地址的位置）。

否则，你想要的不是一个好主意。您的用户可能希望通过多种机制共享他们的数据，其中一些不会是电子邮件客户端。[请让*用户*选择如何共享他们的数据](http://commonsware.com/blog/2011/06/28/share-where-the-user-wants.html)。

# oracle - 表的 Oracle 同义词是否会导致竞争条件？

> ID：11375627
> 
> 赞同：0
> 
> 时间：2012-07-07T14:02:02.807
> 
> 标签：oracle, insert, synonym

我对远程数据库中的表使用了同义词。远程站点中的应用程序会将数据插入源表，我的应用程序将通过表的同义词读取这些数据。

远程站点应用程序将在向源表插入记录后发送 TCP 消息。我的应用程序在收到该消息后执行提取。但是我检测到某些记录无法获取，因为在收到 TCP 消息时表（同义词）中不可用。

在 Synonyms 中插入和获取时是否有可能出现竞争条件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T18:58:51.013

同义词的存在（或不存在）没有影响。

如果源应用程序在发送通知之前提交，并且您的应用程序使用默认的已提交事务隔离级别，则您的应用程序将在查询数据库时看到所有已提交的行。我知道的唯一例外是，如果远程数据库是一个 RAC 数据库，并且它`MAX_COMMIT_PROPAGATION_DELAY`被设置为一个非零值。除非远程数据库是旧的（10.2 之前）版本的 Oracle，否则只有在有人更改了该参数的默认值时才会出现这种情况。

您可以通过查看来确定 Oracle 版本`v$version`

```
select * 
  from v$version 
```

可以`MAX_COMMIT_PROPAGATION_DELAY`通过查询来判断是否已经设置`v$parameter`（如果参数没有设置则返回0行）

```
select name, value 
  from v$parameter 
 where name = 'max_commit_propagation_delay' 
```

您可以通过查询来判断数据库是否为多节点RAC集群`gv$instance`。如果返回`count(*)`大于 1 的 a，则为多节点 RAC 数据库

```
select count(*) 
  from gv$instance 
```

# android - 蚂蚁每次重建库项目

> ID：11375635
> 
> 赞同：5
> 
> 时间：2012-07-07T14:03:06.500
> 
> 标签：android, caching, ant, compilation, android-library

我有一个包含两个 Android 库项目的 Android 项目。

我正在使用命令`ant debug`构建项目，大约需要 1 分钟和 20 秒。我算了一下，编译第一个android库项目用了17秒，编译第二个android库项目用了42秒。

由于这两个依赖项目很少更新，因此不必每次都编译它们。

如何避免 ant 编译每个构建的两个 Android 库项目？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-25T17:50:44.237

添加 `dont.do.deps=1`到您的`local.properties`（或以其他方式将此属性传递给 ant）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T02:53:03.580

这就是 Android 库项目的设计方式和假设目前的工作方式，它总是与主应用程序项目编译一起间接编译，请参阅这个[官方开发指南](http://developer.android.com/tools/projects/index.html#LibraryProjects)：

> 但是，库项目与标准 Android 应用程序项目的不同之处在于，您不能将其直接编译为自己的 .apk 并在 Android 设备上运行。同样，您不能将库项目导出到自包含的 JAR 文件，就像对真正的库所做的那样。相反，您必须通过在依赖应用程序中引用库并构建该应用程序来间接编译库。
> 
> ……
> 
> **开发注意事项**
> 
> *   您不能将库项目导出到 JAR 文件
>     
>     
>     
>     库不能作为二进制文件（例如 JAR 文件）分发。这将在 SDK 工具的未来版本中添加。

### 如何避免 ant 编译每个构建的两个 Android 库项目？

你说的东西是一个预编译的 jar 文件。这里有一些帖子建议使用[Eclipse导出功能](https://stackoverflow.com/questions/10185316/how-to-convert-library-project-into-jar/10185393#10185393)或[库项目bin目录下自动生成的jar](https://stackoverflow.com/questions/5014128/create-an-android-jar-library-for-distribution/8531923#8531923)，在库项目包含纯Java文件的一些简单情况下可能会起作用，但如果库项目变得更复杂，则无法使用包含 Android 资源文件。在这种情况下，有一些像[这样](http://blog.sofisoftware.com/post/2011/10/05/Android-Library-projects-and-Jars)的肮脏黑客，IMO 造成的麻烦比它解决的要多。

Android 开发团队正在努力，并尝试将 Android Library Project 从基于源的机制更改为基于编译代码的库机制。此[博客文章](http://android-developers.blogspot.co.nz/2011/10/changes-to-library-projects-in-android.html)中的更多详细信息。我建议等待官方开发团队的最终解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T10:13:12.093

当我的项目中有库时，我遇到了 Android 编译缓慢的问题，并通过将“--incremental”开关应用于 dex 工具解决了这个问题。请参阅[SO 上的这个问题](https://stackoverflow.com/questions/12088375/compiling-android-project-from-command-line-is-slow)。

# linux - 在 Linux 主机上虚拟化 Windows 7 以进行 Windows Phone 应用程序开发

> ID：11375637
> 
> 赞同：0
> 
> 时间：2012-07-07T14:03:32.770
> 
> 标签：linux, windows, windows-phone, virtualization

我被要求开发一个 Windows Phone 应用程序，但事实证明 Windows Phone SDK 只能在 Windows 7 操作系统下工作。在工作中，我只有一台运行 Windows XP 的破旧笔记本电脑，没有足够的资源来运行虚拟机。我对这个问题的解决方案是在我的 Asus 1215B 上网本（Ubuntu 12.04LTS）上安装 VMware Workstation，但 Windows Phone 模拟器运行非常缓慢。

我只是好奇我是否会使用不同的 GNU/Linux 主机（如 Debian/Centos/Gentoo）和更轻量级的用户环境（如 xfce），性能会有所下降。

我还考虑编写一个脚本，在加载主机系统环境和服务之前询问用户是否要登录主机外壳或启动虚拟机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T18:31:30.080

您始终可以设置无头虚拟机环境，安装 Windows 7，然后通过 RDP 连接到它。

以下是可用于帮助您使用 php 管理界面设置虚拟环境的指南：

[http://www.howtoforge.com/managing-a-headless-virtualbox-installation-with-phpvirtualbox-ubuntu-12.04](http://www.howtoforge.com/managing-a-headless-virtualbox-installation-with-phpvirtualbox-ubuntu-12.04)

在 howtoforge 上也有在没有 php 界面的情况下设置它的指南。

也许您可以尝试另一种途径，希望对您有所帮助。

特雷弗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:51:20.117

我建议你双启动，除非你有很多很多的 RAM，因为 WP 模拟器需要几 GB。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T14:27:49.840

只需在笔记本电脑上使用带有 Ubuntu 的双启动 Windows 7.. 没有什么能比裸机上的性能更胜一筹... 并且使事情变得简约自然会使性能更好...但可能不会好得多。

# ruby - Ruby.h 没有这样的文件或目录 parser.o 错误

> ID：11375639
> 
> 赞同：5
> 
> 时间：2012-07-07T14:03:49.203
> 
> 标签：ruby

使用 Rails 3.1 和新应用程序，运行时出现`bundle install`以下错误

```
Installing json<1.7.3> with native extensions
Error: Failed to build gem native extension.
Creating Makefile
generating parser-i386-mingw32.def
compiling parser.c
In file included from parser.rl:1:0:../fbuffer/fbuffer.h:6:18: fatal error: ruby.h: No such file or directory
compilation terminated.
make: *** [parser.o] Error 1 
```

我已成功安装 DevKit 并更改`$PATH`如下：

```
C:\Users\peter\Downloads\make-3.81-bin\bin;
C:\Users\peter\Working\Ruby-devKit\mingw\bin;
C:\Users\peter\Working\Ruby-devKit;
C:\Program Files\ImageMagick-6.7.8-Q16;
C:\Ruby193\bin;C:\Ruby\bin; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T20:58:40.843

您需要安装 ruby​​ 开发工具包，因为 Windows 正在根据缺少 Ruby.h 的错误寻找 Ruby 的源代码

# android - 键盘锁管理器没有响应

> ID：11375640
> 
> 赞同：1
> 
> 时间：2012-07-07T14:03:54.207
> 
> 标签：android, keyguard, keyguardlock

我正在制作一个启用\禁用键盘保护的应用程序，但它仅在第一次调用此活动时有效，之后它仍保持我第一次设置的状态。

```
 static boolean k=true;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);  

            if(k)
            {

                Log.d("unlock", "done");
                KeyguardManager  myKeyGuard1 = (KeyguardManager)getSystemService(Context.KEYGUARD_SERVICE);
                KeyguardLock myLock1 = myKeyGuard1.newKeyguardLock(null);
                myLock1.disableKeyguard();
                k=false;

                finish();

            }
            else{

                Log.d("lock", "done");
                KeyguardManager  myKeyGuard = (KeyguardManager)getSystemService(Context.KEYGUARD_SERVICE);
                KeyguardLock myLock = myKeyGuard.newKeyguardLock(null);
                myLock.reenableKeyguard();
                k=true;
                finish();

            }

            setContentView(R.layout.home);

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T03:27:11.967

我自己想出来的解决方案是：*当摆脱锁屏的应用程序被破坏时，锁屏再次出现*

```
if(k==1)
        {

            KeyguardManager  myKeyGuard = (KeyguardManager)getSystemService(Context.KEYGUARD_SERVICE);
            KeyguardLock myLock = myKeyGuard.newKeyguardLock("tag");
            myLock.disableKeyguard();
            k=0;
            finish();

        }
        else{

            android.os.Process.killProcess(android.os.Process.myPid());

        } 
```

# java - Java 中的 MySQL - INSERT 和 DELETE 语句无法正常工作

> ID：11375645
> 
> 赞同：0
> 
> 时间：2012-07-07T14:04:26.470
> 
> 标签：java, mysql, model-view-controller

*   有两个表`chat_users`和`chat_lines`。
*   插入和选择适用于`chat_user`
*   更新**不起作用**`chat_user`_
***   插入也`chat_lines` **不起作用****

 ****chat_user_model.java**的源代码列表

 **```
package model;

import Beans.ChatLineBeans;
import Beans.ChatUserBeans;
import java.security.Timestamp;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.logging.Level;
import java.util.logging.Logger;

/**
 *
 * @author user
 */
public class chat_user_model extends DBConnection  {

public static void add_User(ChatUserBeans user ) throws ClassNotFoundException  {

        try {

            Connection conn = createConnection();
            PreparedStatement s;
            s = conn.prepareStatement (
               "INSERT INTO chat_users (name, gravatar) VALUES(?,?)");
             s.setString (1,user.getuserName());
             s.setString (2, user.getgravatar());
             int count = s.executeUpdate ();
             s.close ();
              conn.close();
             //System.out.println (count + " rows were inserted");

            } catch (SQLException ex) {
            Logger.getLogger(chat_user_model.class.getName()).log(Level.SEVERE, null, ex);
            }

    }
public static  ChatUserBeans find_user(String name ) {
    ChatUserBeans user=new ChatUserBeans();
        try {
            Connection con = createConnection();
            PreparedStatement stmt = con.prepareStatement("select  * from chat_users where name=? ");
            stmt.setString(1, name);
            ResultSet result= stmt.executeQuery();
            while(result.next())
            {
              user.setuserName(result.getString("name"));
              user.setgravatar(result.getString("gravatar"));
            }
            stmt.close();
            stmt.close();
            con.close();
        } catch (SQLException ex) {
            Logger.getLogger(chat_user_model.class.getName()).log(Level.SEVERE, null, ex);
        }
    return user ;

}
public static void add_line(ChatLineBeans line ) throws ClassNotFoundException  {

        try {

            Connection conn = createConnection();
            PreparedStatement s;
            s = conn.prepareStatement (
               "INSERT INTO chat_lins (aurther, gravatar,text) VALUES(?,?,?)");
             s.setString (1,line.getauther());
             s.setString (2, line.getgravatar());
             s.setString (3, line.gettext());
             int count = s.executeUpdate ();
             s.close ();
             conn.close();

             //System.out.println (count + " rows were inserted");

            } catch (SQLException ex) {
            Logger.getLogger(chat_user_model.class.getName()).log(Level.SEVERE, null, ex);
            }

    }

public static void delete_User(String name ) throws ClassNotFoundException  {

        try {
            Connection conn = createConnection();
            PreparedStatement s;
            s = conn.prepareStatement (
               "DLETE FROM chat_users WHERE name=?");
             s.setString (1,name);
             int count = s.executeUpdate ();
             s.close ();
              conn.close();
        } catch (SQLException ex) {
            Logger.getLogger(chat_user_model.class.getName()).log(Level.SEVERE, null, ex);
        }

    }
} 
```

连接文件是

```
 package model;

    import java.sql.Connection;
    import java.sql.DriverManager;
    import java.sql.SQLException;
    import java.util.logging.Level;
    import java.util.logging.Logger;

public class DBConnection {
        private static String hostName = "localhost";
        private static String port = "3306";
        private static String dbName ="120623085702";
        private static String userName = "root";
        private static String password="";
        public static Connection createConnection(){
            try {
                Class.forName("com.mysql.jdbc.Driver");
                String url = "jdbc:mysql://" + hostName + ":" + port + "/" + dbName;
                System.out.println(url);
                Connection con = DriverManager.getConnection(url,userName,password);
                return con;

            } catch (SQLException ex) {
                Logger.getLogger(DBConnection.class.getName()).log(Level.SEVERE, null, ex);
            } catch (ClassNotFoundException ex) {
                Logger.getLogger(DBConnection.class.getName()).log(Level.SEVERE, null, ex);
            }

            return null;
        }

    } 
```

有关如何解决此问题的任何建议。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T14:26:50.010

您在查询中拼错了 DELETE。这将是删除语句不起作用的原因。您没有看到错误的原因可能是您的日志记录设置不正确。如果是这种情况，则插入语句可能会出现任何问题，并且您不会知道它是什么（例如缺少列/表，不小心将 null 插入到不可为空的列中）。试着不要捕捉那些 SQLExceptions，然后看看你是否看到任何错误。****

# sql - 删除任何产品的除 3 张图片之外的所有图片

> ID：11375646
> 
> 赞同：0
> 
> 时间：2012-07-07T14:04:31.150
> 
> 标签：sql, sql-server-2008

我有一张表，其中产品与图片进行映射。有些产品与图片有 1 到 n 个映射。为了很好地查看映射，我构建了一个 SQL，以便可以按 ProductId 分组查看它们。

```
 SELECT  [Id]
      ,[ProductId]
      ,[PictureId]
      ,[DisplayOrder]
FROM [LandOgFritid23].[dbo].[Product_Picture_Mapping]
Where ProductId in (select ProductId
                    FROM [LandOgFritid23].[dbo].Product p,
                    [LandOgFritid23].[dbo].[Product_Picture_Mapping] pm
                    where p.Id = pm.ProductId
                    group by ProductId
                    having COUNT(pm.PictureId) > 3
                    )
order by ProductId 
```

结果：

```
Id  ProductId   PictureId   DisplayOrder
2085    103    2388         2
2185    103    2488         1
7132    103    7468         1
7133    103    7469         1
2158    107    2461         0
320     107    415          1
3485    107    3816         1
3486    107    3817         1
3529    107    3860         1 
```

现在，要求每个产品只允许 3 张图片 MAX。我发现很难创建一个 DELETE 语句来删除产品的第 4、5、n 个映射的任何行。

如果可能的话，你有什么想法吗？

所以删除后的结果，这个数据将是：

```
Id  ProductId   PictureId   DisplayOrder
2085    103    2388         2
2185    103    2488         1
7132    103    7468         1
2158    107    2461         0
320     107    415          1
3485    107    3816         1 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T14:11:23.083

使用 CTE：

注意：假设您要保留最新的 3 张图片

```
WITH Data AS
(
    SELECT  *, 
            ROW_NUMBER() 
             OVER(PARTITION BY ProductId ORDER BY PictureId DESC) 
            AS Position
     FROM [LandOgFritid23].[dbo].[Product_Picture_Mapping]
 )
 DELETE 
    FROM Data
 WHERE Position > 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T14:28:35.117

您可以使用 ROW_NUMBER() 按 PictureId 分区并按适当字段排序来确定前三个记录。

请注意，我在这里假设您使用 DisplayOrder 字段以降序来确定排序：

```
SELECT *
FROM (
    SELECT  [Id]
          ,[ProductId]
          ,[PictureId]
          ,[DisplayOrder]
          , ROW_NUMBER() OVER (PARTITION BY ProductId ORDER BY DisplayOrder DESC) as PicNum
    FROM [LandOgFritid23].[dbo].[Product_Picture_Mapping]
    Where ProductId in (select ProductId
                        FROM [LandOgFritid23].[dbo].Product p,
                        [LandOgFritid23].[dbo].[Product_Picture_Mapping] pm
                        where p.Id = pm.ProductId
                        group by ProductId
                        having COUNT(pm.PictureId) > 3
                        )
) x
WHERE x.PicNum <= 3
ORDER BY ProductId, PicNum 
```

我猜你正在做一个单独的查询来获取所有包含三张或更少图片的产品？您可以在一个查询中完成整个操作，只需删除 WHERE 子句和子查询：

```
SELECT *
FROM (
    SELECT  [Id]
          ,[ProductId]
          ,[PictureId]
          ,[DisplayOrder]
          , ROW_NUMBER() OVER (PARTITION BY ProductId ORDER BY DisplayOrder DESC) as PicNum
    FROM [LandOgFritid23].[dbo].[Product_Picture_Mapping]
) x
WHERE x.PicNum <= 3
ORDER BY ProductId, PicNum 
```

# php - 取消用户注册数据的促销代码表单

> ID：11375649
> 
> 赞同：0
> 
> 时间：2012-07-07T14:04:48.467
> 
> 标签：php

下面的代码有 8 个包含用户注册数据的 $_POST 变量。下面的代码还具有促销代码文本字段，当用户输入促销代码并尝试更新时，我丢失了包含用户注册数据的 8 个 $_POST 变量的值。我想知道是否有办法不丢失这些数据？

```
<?php
    session_start();

    //Create mysql connect variable
    $conn = mysql_connect('host', 'root', 'raycharles');

    //kill connection if error occurs
    if(!$conn){
        die('Error: Unable to connect.' . '<br>' . mysql_error());
    }
    //connect to mysql database
    mysql_select_db("wibldard", $conn);

    //GET PROMO CODES FROM DB
    $promo_results = mysql_query("SELECT * FROM promo",$conn);

    while($promo_row = mysql_fetch_array($promo_results)){
        echo $promo_row['promo_code'];
    }

    if(isset($_GET['promo'])){
        echo $_GET['promo'];
    }
    ?>

    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Strict//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>

    <!-- JAVASCRIPT -->
    <script type="text/javascript" src="js/jquery.js"></script>

    <!-- STYLES & FONTS -->
    <link rel="stylesheet" type="text/css" href="css/style.css" />

    <!--JQUERY-->
    <script type="text/javascript">
    $(document).ready(function(){
        $("#mainsearchfield").Watermark("");
    });

    </script>

</head>

<body>
<div id="main-container">
<?php include('inc/menu.inc.php'); ?>

<div id="body-container" style="padding-bottom:150px; height:800px;">
    <div style="height:100px; margin:0px auto;">
        <img class="reg-step" style="width:100%;" src="images/step2.png">
    </div>

    <?php
        //echo 'e-mail :' . $_POST['email'] . '<br/>' . 'password :' . $_POST['password'] . '<br/>' .  'city: ' . $_POST['city'] . '<br/>' .  'state: ' . $_POST['state']  . '<br/>' . 'phone: ' .  $_POST['phone'] . '<br/>' .  'first name: '. $_POST['fname'] . '<br/>' .  'last name: ' . $_POST['lname'] . '<br/>company: ' . $_POST['company-name'] ;
        $_SESSION['email'] = $_POST['email'];
        $_SESSION['password'] = $_POST['password'];
        $_SESSION['city'] = $_POST['city'];
        $_SESSION['state'] = $_POST['state'];
        $_SESSION['phone'] = $_POST['phone'];
        $_SESSION['first'] = $_POST['fname'];
        $_SESSION['last'] = $_POST['lname'];
        $_SESSION['compname'] = $_POST['compname'];
    ?>

    <span style="font-size:22px; color:blue; font-weight:bold; margin-left:100px;"> Invoice </span>
<div style="width:900px; height:500px; border:1px solid #ddd; margin-left:100px;"> 
    <table id="registration-table1">
        <!-- Results table headers -->
        <tr style="background-color:lightblue;">
          <th>Date</th>
          <th>Product</th>
          <th style="width:50px;">Qty</th>
          <th>Cost</th>
        </tr>
        <tr>
          <td style="width:120px;"><?php echo date("m/d/y");?></td>
          <td style="width:570px; text-align:left; padding-left:10px;">
                <a href="#">Apples</a>
          </td>
          <td style="text-align:center; padding-bottom:120px;">1</td>
          <td style="width:150px; padding-bottom:120px; text-align:center;">$59.99</td>
        </tr>
    </table>
    <div style="float:left; width:350px; font-size:12px; padding:10px;">*An order confirmation e-mail will be sent out to the address provided upon payment authorization.</div>
    <table id="registration-table2"> 
        <tr>
            <td style="font-weight:bold; width:140px; padding:10px; padding-right:20px;">Promo Code:</td>
            <td class="table2-cell">
                <form method="get" action="registernewstep2.php">
                    <input name="promo" style="width:90px; margin-right:7px; margin:5px;" type="text" /><br/>
                    <input type="submit" style="margin-bottom:5px;" value="update"/>
                </form>
            </td>
        </tr>
        <tr>
          <td class="table2-heading-cell">Delivery:</td>
          <td class="table2-cell"><i>Electronic</i></td>
        </tr>
        <tr>
          <td class="table2-heading-cell">Shipping:</td>
          <td class="table2-cell">$0.00</td>
        </tr>
        <tr>
          <td class="table2-heading-cell">Tax:</td>
          <td class="table2-cell">$0.00</td>
        </tr>
        <tr>
          <td class="table2-heading-cell">Total:</td>
          <td class="table2-cell">$59.99</td>
        </tr>
        <tr>
          <td style="font-weight:bold; padding:10px; border:none;"></td>
          <td style="text-align:center; border:none; padding-top:20px;">
            <!--CHECKOUT BUTTON-->
            <form action="https://www.paypal.com/cgi-bin/webscr" method="post">
                <input type="hidden" name="cmd" value="_xclick">
                <input type="hidden" name="business" value="johnnycage9@gmail.com">
                <input type="hidden" name="lc" value="US">
                <input type="hidden" name="item_name" value="apples">
                <input type="hidden" name="item_number" value="1701">
                <input type="hidden" name="amount" value="1.00">
                <input type="hidden" name="currency_code" value="USD">
                <input type="hidden" name="button_subtype" value="services">
                <input type="hidden" name="no_note" value="0">
                <input type="hidden" name="tax_rate" value="0.000">
                <input type="hidden" name="shipping" value="0.00">
                <input type="hidden" name="bn" value="PP-BuyNowBF:btn_buynow_SM.gif:NonHostedGuest">
                <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynow_SM.gif" style="border:1px solid #fff;" name="submit" alt="PayPal - The safer, easier way to pay online!">
                <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
            </form>
          </td>
        </tr>
    </table>
</div>

<?php include('inc/footer.inc.php'); 

echo'
</div>
</body>
</html>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T15:52:24.423

$_POST 变量仅“发布”到显示的页面，因此当您的用户输入并提交促销代码时，您当前没有发布您缺少的值。

为此，您需要向正在提交的表单添加一些隐藏字段。表单字段名称必须与 $_POST 变量相同，并且每个字段的值应该是来自发布字段的值，如下所示：

```
<form method="get" action="registernewstep2.php">
    <input type="hidden" name="email" value="<?php echo $_POST['email'>; ?>"/>
    <input type="hidden" name="password" value="<?php echo $_POST['password'>; ?>"/>
    <input type="hidden" name="city" value="<?php echo $_POST['city'>; ?>"/>
    <input type="hidden" name="state" value="<?php echo $_POST['state'>; ?>"/>
    <input type="hidden" name="phone" value="<?php echo $_POST['phone'>; ?>"/>
    <input type="hidden" name="fname" value="<?php echo $_POST['fname'>; ?>"/>
    <input type="hidden" name="flname" value="<?php echo $_POST['flname'>; ?>"/>
    <input type="hidden" name="compname" value="<?php echo $_POST['compname'>; ?>"/>
    <input name="promo" style="width:90px; margin-right:7px; margin:5px;" type="text" /><br/>
    <input type="submit" style="margin-bottom:5px;" value="update"/>
</form> 
```

# c++ - 在 C++ 中使用类作为数组

> ID：11375659
> 
> 赞同：0
> 
> 时间：2012-07-07T14:06:26.953
> 
> 标签：c++

**我想做什么：** 我想知道如何在 C++ 中将类用作一种“内置”数组（C 也是可以接受的）。所以，基本上我希望能够做到这一点：

```
array1d rows(5); 
//an integer array of length 5 - iniatilized to 0 upon instantiation.
//rows can be imagined as this: [ 0, 0, 0, 0, 0 ]

array1d x(1), y(2), z(3);
array2d cols(3);
cols[0] = x;
cols[1] = y;
cols[2] = z;

//an array of array of integers [ [x] [y] [z] ]
//where x, y and z are of type array1d, so here is what it would like:
//if x = 1, y = 2, z = 3
//[ [0], [0, 0], [0, 0, 0] ]

array3d depth(2); 

//an array of array of array of integers [ [cols] [cols] ]
//where cols is of type array2d, so when expanded it would like:
//[ [ [0], [0, 0], [0, 0, 0] ]
//  [ [0], [0, 0], [0, 0, 0] ] ] 
```

**到目前为止我所拥有的**

```
using namespace std;

class array3d;
class array2d;

class array1d//works exactly the way i want it to 
{
    int len;
    int *data;
public:
    array1d (int size){
        data = new (nothrow) int[size];

        if (data != 0){
            len = size;

            for (int i = 0; i<len; i++){
                data[i] = -1;
            }
        }
    }

    ~array1d (){
        delete data;
    }

    void print(){
        for (int i = 0; i<len; i++){
                cout << data[i] << " ";
            }
        cout << endl;
    }

    int operator[] (int index){
        if (index >= 0 && index <= len){
            return data[index];
        }
    }

    friend class array2d;
};

class array2d//this is what needs changing
{
    int len;
    array1d *data;
public:
    array2d (int size_dim1, int size_dim2){
        data = new (nothrow) array1d[size_dim1]; //i think the problem is here

        if (data !=0){
            len = size_dim1;
            for (int i = 0; i < len; i++){
                data[i] = array1d(size_dim2);
            }
        }
    }
    ~array2d (){}

    void print(){
        for (int i = 0; i < len; i++){
            data[i].print();
        }
    }

    array1d operator[] (int index){
        return data[index];
    }

    friend class array3d;   
};

class array3d//dont even know how to get this one started
{
    array3d (int size_dim1, int size_dim2, int size_dim3){
             data = new (nothrow) array2d[size_dim2, size_dim3]; 

        if (data !=0){
        len = size_dim1;
            for (int i = 0; i < len; i++){
                data[i] = array2d(size_dim2, size_dim3);
            }
        }
            }
    ~array3d (){}
    //overload [] operator

private:
    int len;
    array2d *data;
}; 
```

我还希望能够添加更多类以适应可能的 4 维，这样我就不必每次添加另一个类时都进行自定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T15:28:03.310

你的类是内存泄漏生成器......每次你调用 new ......想想谁必须负责调用 delete！

也就是说，尚不清楚您是否希望数组按动态（在运行时调整大小）或静态（在声明时调整大小，就像内置一样）。

在最后一种情况下，一个简单明了的示例可以是这个：

```
#include <iostream>

template<class T, size_t... Z>
class array; //not defined: just a varadic template forward

template<class T, size_t A>
class array<T,A> //simple case for 1D
{
public:
    array() :m() {}
    array(const T& a) :m(a) {}
    T& operator[](int i) { return m[i]; }
    const T& operator[](int i) const { return m[i]; }

private:
    T m[A];
};

template<class T, size_t A, size_t... Z>
class array<T,A,Z...> //case for multi Dim as 1D of Dim-1
{
public:
    array() :m() {}
    array<T,Z...>& operator[](int i) { return m[i]; }
    const array<T,Z...>& operator[](int i) const { return m[i]; }

private:
    array<T,Z...> m[A];
};

// generate output by recursion
template<class T, size_t A, size_t... N>
std::ostream& operator<<(std::ostream& s, const array<T,A,N...>& a)
{
    s << "[ ";
    for(size_t i=0; i<A; ++i)
    {
        if(i!=0) s<<", ";
        s << a[i];
    }
    s << "] ";
    return s;
}

//just declare, fill-up and output
int main()
{
    array<int, 3,3,3> a;
    for(size_t i=0; i<3; ++i)
        for(size_t j=0; j<3; ++j)
            for(size_t k=0; k<3; ++k)
                a[i][j][k] = 100 + 100*i + 10 + 10* j + 1 + k;

    std::cout << a << std::endl;
    return 0;   
} 
```

它应该输出

```
[ [ [ 111, 112, 113] , [ 121, 122, 123] , [ 131, 132, 133] ] , [ [ 211, 212, 213
] , [ 221, 222, 223] , [ 231, 232, 233] ] , [ [ 311, 312, 313] , [ 321, 322, 323
] , [ 331, 332, 333] ] ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T08:10:51.660

我想我找到了答案，我也设法做到了，这样我就可以使用任何类型的数组（int、float、double 甚至其他类）：

```
template <typename T>
class A1D
{
    T *data;

public:

    int len;

    A1D (int size, T defvalue){
        data = (T*) calloc(size, sizeof(T));

        if (data != NULL){
            len = size;

            for (int i = 0; i<len; i++){
                data[i] = defvalue;
            }
        }
    }

    void print(){

        cout << "[" ;
        for (int i = 0; i<len; i++){
                cout << data[i] << " ";
            }
        cout << "]";
    }

    void del(){
        delete data;
        len = 0;
    }

    T& operator[] (int index){
        if (index >= 0 && index <= len) return data[index];
    }
};

template <typename T>
class A2D
{   
    A1D<T> *data;

public:

    int len;

    A2D (int size_dim1, int size_dim2, T defvalue){
        data = (A1D<T>*) calloc(size_dim1, sizeof(A1D<T>));

        if (data != NULL){
            len = size_dim1;            

            for (int i = 0; i < len; i++){
                data[i] = A1D<T> (size_dim2, defvalue);
            }
        }
    }

    void print(){

        cout << "[";
        for (int i = 0; i < len; i++){
            data[i].print();
        }
        cout << "]";
    }

    void del(){
        for (int i = 0; i < len; i++){
            data[i].del();
        }
        len = 0;
    }

    A1D<T>& operator[] (int index){
        return data[index];
    }
};

template <typename T>
class A3D
{   
    A2D<T> *data;

public:

    int len;

    A3D (int size_dim1, int size_dim2, int size_dim3, T defvalue){
        data = (A2D<T>*) calloc(size_dim1, sizeof(A2D<T>));

        if (data != NULL){
            len = size_dim1;            

            for (int i = 0; i < len; i++){
                data[i] = A2D<T> (size_dim2, size_dim3, defvalue);
            }
        }
    }

    void print(){

        cout << "[";
        for (int i = 0; i < len; i++){
            data[i].print();
        }
        cout << "]";
    }

    void del(){
        for (int i = 0; i < len; i++){
            data[i].del();
        }
        len = 0;
    }

    A2D<T>& operator[] (int index){
        return data[index];
    }
};

//and here is how you use it:

int size1, size2, size3;
cout << "Enter the size of array3d:"; cin >> size1;
cout << "Enter the size of array2d:"; cin >> size2;
cout << "Enter size of array1d:"; cin >> size3;

A3D<int> test(size1, size2, size3, 0);
test.print();

//can also do this:
test[0][0] = A1D<int> (5, 9);
test.print(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T14:16:06.327

您不能将不同类型的项目放入数组中。但在您的情况下，由于您的 2d 类包含 1d 类，3d 类包含 2d 类，您可以这样做：

```
class array1d
{
  // something
};

class array2d : public array1d
{
  // something
};

class array3d : public array2d
{
  // something
}; 
```

并将指针放入数组中。

```
array1d *arr[3];
arr[0] = new array1d;
arr[1] = new array2d;
arr[3] = new array3d; 
```

# java - 获取特定 String JAVA 的二进制大小

> ID：11375661
> 
> 赞同：3
> 
> 时间：2012-07-07T14:06:47.683
> 
> 标签：java, string

如何在 BITS（不是字节）中获取字符串的二进制大小（例如 String s = "Ababa"）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-07T14:07:37.900

用什么编码？字符串的特定二进制表示的*位数*就是字节数 * 8：

```
byte[] bytes = text.getBytes("UTF-8"); // Or whatever encoding you want
int bits = bytes.length * 8; 
```

我认为我从未见过允许小数字节的编码。

请注意，如果您对 UTF-16 感兴趣，则可以使用`text.length() * 16`每个`char`都是 UTF-16 代码单元。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-07T14:08:25.183

获取字节，乘以 8...

```
"xxx".getBytes().length * 8; 
```

编辑：与 Jon Skeet 的答案合并，指定编码也很重要，否则这将使用系统的默认编码返回大小，这不一定是您想知道的。要知道使用某种编码的大小，请使用：

```
 "xxx".getBytes(encoding).length * 8; 
```

编码是“UTF-8”、“ASCII”或任何你想使用的。

# iphone - 如何使我的按钮状态被选中，直到选择下一个按钮？

> ID：11375662
> 
> 赞同：0
> 
> 时间：2012-07-07T14:07:10.523
> 
> 标签：iphone, ios, ipad

我的 iPhone 应用程序中有 4 个按钮，它们是这样添加的：

```
UIImage *button1Image = [UIImage imageNamed:@"friends.png"];
button1 = [[UIButton buttonWithType:UIButtonTypeCustom] retain];
self.button1.tag=102;
[button1 setImage:button1Image forState:UIControlStateNormal];
[button1 setImage:[UIImage imageNamed:@"friends_hvr.png"] forState:UIControlStateSelected | UIControlStateHighlighted];
self.button1.frame = CGRectMake(90,5, 70,32);
[button1 addTarget:self action:@selector(friends:) forControlEvents:UIControlEventTouchUpInside]; 
```

我想让我的按钮状态选择一段时间，以便在选择按钮时更改背景，即直到选择下一个按钮。但对我来说，它只在某些时候起作用，一眨眼。我需要在行动中坚持这一点。我是这样做的：

```
-(void)friends:(id)sender
{
    [button1 setSelected:YES]; 
```

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T14:17:50.347

尝试添加该行：

```
[button1 setImage:[UIImage imageNamed:@"friends_hvr.png"] forState:UIControlStateSelected]; 
```

您仅将此图像用于同时选择和突出显示的状态。（是的，令人困惑的是，将这些常量组合在一起会产生它们都处于活动状态的状态。）

`friends:`然后只需在您的方法中取消选择先前选择的按钮。

# streaming - 需要用于流式视频的 GStreamer 命令

> ID：11375664
> 
> 赞同：1
> 
> 时间：2012-07-07T14:07:28.297
> 
> 标签：streaming, gstreamer

谁能给我工作（GStreamer）命令以通过 udp 流式传输视频

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T10:33:30.487

下面是一个使用测试音视频源的例子

```
gst-launch audiotestsrc ! ffenc_mp2 ! mpegtsmux name=mux ! udpsink host=239.1.1.1 auto-multicast=true port=1234 videotestsrc ! ffenc_mpeg2video bitrate=200000 ! mux. 
```

您可以使用以下网址在 vlc 中播放：

```
udp://@239.1.1.1:1234 
```

如果您不想要多播，而是要单播，请在 udpsink 选项中输入 IP 地址，例如`host=192.168.1.1`. 然后 vlc url 变为`udp://@:1234`.

# android - 自动将文件添加到 Android .apk 中的 META-INF 文件夹

> ID：11375670
> 
> 赞同：6
> 
> 时间：2012-07-07T14:08:45.080
> 
> 标签：android, eclipse, ant, jersey, apk

我已经设法将泽西岛移植到 Android ( [jersey-android](https://github.com/giorgio-zamparelli/jersey-android) )

Jersey 需要某些配置文件存在于 META-INF/services 文件夹中。到目前为止，我正在手动将服务文件夹复制到生成的 apk 的 META-INF 文件夹中。

有没有办法指示 Eclipse、ADT 或 ANT 将服务文件夹复制到 META-INF 文件夹中的 apk 中？

# android - 非常慢的 listView 适配器

> ID：11375672
> 
> 赞同：0
> 
> 时间：2012-07-07T14:08:55.347
> 
> 标签：android, android-listview, adapter, listadapter

我用 ArrayAdapter 创建 listView。每个项目都有很多视图。这是 getView() 方法的代码：

```
public View getView(final int position, View convertView, ViewGroup parent) {

    ViewHolder holder;

    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.dialog_list_view, null);
        holder = new ViewHolder();
        holder.date = (TextView)convertView.findViewById(R.id.date);
        holder.multi_chat = (ImageView)convertView.findViewById(R.id.multi_chat);
        holder.my_userpick = (ImageView)convertView.findViewById(R.id.my_userpic);
        holder.name = (TextView)convertView.findViewById(R.id.name);
        holder.photo1 = (ImageView)convertView.findViewById(R.id.photo1);
        holder.photo2 = (ImageView)convertView.findViewById(R.id.photo2);
        holder.photo31 = (ImageView)convertView.findViewById(R.id.photo31);
        holder.photo32 = (ImageView)convertView.findViewById(R.id.photo32);
        holder.photo33 = (ImageView)convertView.findViewById(R.id.photo33);
        holder.photo41 = (ImageView)convertView.findViewById(R.id.photo41);
        holder.photo42 = (ImageView)convertView.findViewById(R.id.photo42);
        holder.photo43 = (ImageView)convertView.findViewById(R.id.photo43);
        holder.photo44 = (ImageView)convertView.findViewById(R.id.photo44);

        holder.text = (TextView)convertView.findViewById(R.id.text);
        holder.userpic = (ImageView)convertView.findViewById(R.id.userpic);
        holder.userpick2 = convertView.findViewById(R.id.userpick2);
        holder.userpick3 = convertView.findViewById(R.id.userpick3);
        holder.userpick4 = convertView.findViewById(R.id.userpick4);
        holder.wrapper = (RelativeLayout)convertView.findViewById(R.id.wrapper);
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    if (dialogs != null) {
        if (position == (this.getCount() - 1)) {
            if (dialogs != null) {
                if (dates.size() > 1) {
                    dialogs.getDialogs(dates.size()+20);
                }
            }
        }
    }

    if (dates.get(position).getChatId() != 0) {
        holder.name.setText(dates.get(position).getTitle());
        holder.multi_chat.setVisibility(View.VISIBLE);
    } else {
        holder.name.setText(dates.get(position).getUidDates());
        holder.multi_chat.setVisibility(View.GONE);
    }

    if (dates.get(position).getReadState() == 0) {
        holder.wrapper.setBackgroundColor(getResources().getColor(R.color.conversation_list_no_read));
    } else {
        holder.wrapper.setBackgroundColor(android.R.color.white);
    }

    holder.text.setText(dates.get(position).getBody());

    int date = dates.get(position).getDate();
    java.util.Date time = new java.util.Date((long) date * 1000);

    if ((time.getDate() == current_date.getDate()) && (time.getMonth() == current_date.getMonth()) && (time.getYear() == current_date.getYear())) {
        holder.date.setText(time.getHours() + ":" + time.getMinutes());
    } else if ((time.getDate() == (current_date.getDate() - 1)) && (time.getMonth() == current_date.getMonth()) && (time.getYear() == current_date.getYear())) {
        holder.date.setText("вчера");
    } else {
        holder.date.setText(time.getDate() + "." + time.getMonth() + "." + (time.getYear()+1900));
    }

    if(!dates.get(position).getPhotoInText().equals("")) {
        loaderWithoutCut.displayImage(dates.get(position).getPhotoInText(), holder.my_userpick, false);
        holder.my_userpick.setVisibility(View.VISIBLE);
        holder.text.setBackgroundDrawable(getResources().getDrawable(R.drawable.dialog_rect_bg));
        holder.text.setPadding(10, 0, 10, 0);
        holder.text.setGravity(Gravity.CENTER_VERTICAL);
        holder.text.setSingleLine(true);
        holder.text.setEllipsize(TextUtils.TruncateAt.END);
    } else {
        holder.my_userpick.setVisibility(View.GONE);
        holder.text.setBackgroundColor(getResources().getColor(android.R.color.transparent));
        holder.text.setPadding(0, 0, 0, 0);
        holder.text.setSingleLine(false);
        holder.text.setGravity(Gravity.TOP);
    }

    ArrayList photos = dates.get(position).getUidPhotos();

    if (dates.get(position).getChatId() == 0) {
        if (photos.size() == 1) {
            loaderWithoutCut.displayImage((String) photos.get(0), holder.userpic, false);

            holder.userpick2.setVisibility(View.GONE);
            holder.userpick3.setVisibility(View.GONE);
            holder.userpick4.setVisibility(View.GONE);
            holder.userpic.setVisibility(View.VISIBLE);

        }
    } else {
        if ((photos.size() < 3) && (photos.size()>0)) {

            if (photos.size() == 1) {
                holder.photo1.setVisibility(View.GONE);
                loaderWithCut.displayImage((String) photos.get(0), holder.photo2, true);
            } else {
                holder.photo1.setVisibility(View.VISIBLE);
                loaderWithCut.displayImage((String) photos.get(1), holder.photo2, true);
                if (!((String) photos.get(1)).equals((String) photos.get(0))) {
                    loaderWithCut.displayImage((String) photos.get(0), holder.photo1, true);
                } else {
                    holder.photo1.setVisibility(View.GONE);
                }
            }

            holder.userpic.setVisibility(View.GONE);
            holder.userpick2.setVisibility(View.VISIBLE);
            holder.userpick3.setVisibility(View.GONE);
            holder.userpick4.setVisibility(View.GONE);

        }

        if (photos.size() == 3) {
            loaderWithCut.displayImage((String) photos.get(0), holder.photo31, true);

            loaderWithoutCut.displayImage((String) photos.get(1), holder.photo32, false);
            loaderWithoutCut.displayImage((String) photos.get(2), (ImageView) holder.photo33, false);

            holder.userpic.setVisibility(View.GONE);
            holder.userpick2.setVisibility(View.GONE);
            holder.userpick3.setVisibility(View.VISIBLE);
            holder.userpick4.setVisibility(View.GONE);

        }

        if (photos.size() >= 4) {
            loaderWithoutCut.displayImage((String) photos.get(0), holder.photo41, false);
            loaderWithoutCut.displayImage((String) photos.get(1), holder.photo42, false);
            loaderWithoutCut.displayImage((String) photos.get(2), holder.photo43, false);
            loaderWithoutCut.displayImage((String) photos.get(3), holder.photo44, false);

            holder.userpic.setVisibility(View.GONE);
            holder.userpick2.setVisibility(View.GONE);
            holder.userpick3.setVisibility(View.GONE);
            holder.userpick4.setVisibility(View.VISIBLE);

        }

    }

    if (photos.size() == 0) {

        holder.userpick2.setVisibility(View.GONE);
        holder.userpick3.setVisibility(View.GONE);
        holder.userpick4.setVisibility(View.GONE);

    }

    final ViewHolder holder2 = holder;
    convertView.setOnFocusChangeListener(new View.OnFocusChangeListener() {

        @Override
        public void onFocusChange(View v, boolean hasFocus) {

            TextView text = holder2.text;
            TextView date = holder2.date;
            TextView name = holder2.name;

            if (hasFocus) {
                text.setTextColor(getResources().getColor(android.R.color.white));
                date.setTextColor(getResources().getColor(android.R.color.white));
                name.setTextColor(getResources().getColor(android.R.color.white));
            } else {
                text.setTextColor(getResources().getColor(R.color.dialog_text));
                date.setTextColor(getResources().getColor(R.color.dialog_date));
                name.setTextColor(getResources().getColor(R.color.friends_text_color));
            }
        }
    });

    return convertView;
} 
```

问题是 - 列表视图滚动工作非常缓慢。我该如何解决这个问题？布局代码：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="wrap_content"
              android:gravity="center_vertical" android:background="@drawable/list_drawable_settings">
    <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:gravity="center_vertical" android:id="@+id/wrapper">
        <LinearLayout android:layout_width="52dip" android:id="@+id/images" android:layout_margin="6dip"
                      android:layout_height="58dip">
            <com.vk.messenger.views.RoundedConersImageView android:id="@+id/userpic"
                       android:layout_height="wrap_content" android:layout_width="wrap_content"
                       />
            <LinearLayout android:layout_width="wrap_content" android:id="@+id/userpick2"
                          android:layout_height="wrap_content">
                <LinearLayout android:layout_width="26dip"
                              android:layout_height="58dip">
                    <com.vk.messenger.views.ScalledImageView android:scaleType="fitCenter"
                               android:cropToPadding="true" android:layout_width="26dip"
                               android:layout_height="58dip"
                               android:id="@+id/photo1"/>
                </LinearLayout>
                <LinearLayout android:layout_width="26dip"
                              android:layout_height="58dip">
                    <com.vk.messenger.views.ScalledImageView android:layout_width="26dip"
                                                             android:layout_height="58dip" android:scaleType="fitCenter"
                               android:cropToPadding="true"
                               android:id="@+id/photo2"/>
                </LinearLayout>
            </LinearLayout>
            <LinearLayout android:layout_width="wrap_content" android:id="@+id/userpick3"
                          android:layout_height="wrap_content">
                <ImageView android:layout_width="26dip" android:layout_height="58dip" android:id="@+id/photo31"
                        ></ImageView>
                <LinearLayout android:layout_width="26dip" android:id="@+id/userpick3"
                              android:layout_height="58dip"
                              android:orientation="vertical">
                    <ImageView android:layout_width="26dip"
                               android:scaleType="fitCenter" android:cropToPadding="true"
                               android:layout_height="26dip" android:id="@+id/photo32"
                            ></ImageView>
                    <ImageView android:layout_width="26dip"
                               android:scaleType="fitCenter" android:cropToPadding="true"
                               android:layout_height="29dip" android:id="@+id/photo33"
                            ></ImageView>
                </LinearLayout>
            </LinearLayout>
            <LinearLayout android:layout_width="52dip" android:id="@+id/userpick4"
                          android:layout_height="58dip" android:orientation="horizontal">
                <LinearLayout android:layout_width="26dip"
                              android:layout_height="58dip"

                              android:orientation="vertical">
                    <ImageView android:layout_width="26dip"
                               android:layout_height="29dip" android:id="@+id/photo41"
                            ></ImageView>
                    <ImageView android:layout_width="26dip"
                               android:layout_height="29dip" android:id="@+id/photo42"
                            ></ImageView>
                </LinearLayout>
                <LinearLayout android:layout_width="26dip"
                              android:layout_height="58dip"
                              android:orientation="vertical">
                    <ImageView android:layout_width="26dip"
                               android:layout_height="29dip" android:id="@+id/photo43"
                            ></ImageView>
                    <ImageView android:layout_width="26dip"
                               android:layout_height="29dip" android:id="@+id/photo44"
                            ></ImageView>
                </LinearLayout>
            </LinearLayout>
        </LinearLayout>

        <RelativeLayout android:layout_width="fill_parent" android:layout_height="wrap_content"
                      android:layout_centerVertical="true"
                      android:layout_toRightOf="@id/images" android:layout_marginLeft="4dip">
            <LinearLayout android:layout_width="fill_parent" android:orientation="vertical" android:id="@+id/left" android:layout_height="wrap_content">
            <LinearLayout android:layout_width="fill_parent" android:layout_height="wrap_content">
                <ImageView android:id="@+id/multi_chat" android:visibility="invisible" android:paddingTop="3dip" android:paddingRight="2dip"
                           android:src="@drawable/multi_chat"
                           android:layout_height="wrap_content" android:layout_width="wrap_content"
                        />
                <com.vk.messenger.views.TextViewMyriadPro android:id="@+id/name" android:text="" android:singleLine="true" android:ellipsize="end"
                          android:layout_centerVertical="true"
                          android:textColor="@color/friends_text_color" android:textSize="16dip" android:textStyle="bold"
                          android:layout_height="wrap_content" android:layout_width="fill_parent" android:layout_weight="1"/>
                <com.vk.messenger.views.TextViewHelvetica android:id="@+id/date" android:layout_marginLeft="6dip" android:gravity="right" android:layout_marginRight="6dip" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textColor="@color/dialog_date"
                                                          android:textSize="13dip"/>
            </LinearLayout>
            <LinearLayout android:layout_height="wrap_content"
                          android:layout_width="fill_parent" android:layout_weight="1" android:layout_marginTop="2dip">
                <com.vk.messenger.views.RoundedConersImageView android:id="@+id/my_userpic" android:visibility="gone" android:paddingRight="2dip"
                           android:layout_height="30dip" android:layout_width="30dip"/>
                <com.vk.messenger.views.TextViewHelvetica android:id="@+id/text" android:text="текст" android:layout_below="@id/name"
                          android:layout_centerVertical="true" android:layout_marginLeft="3dip" android:layout_marginRight="6dip"
                          android:textColor="@color/dialog_text" android:textSize="13dip"
                          android:layout_height="fill_parent"
                          android:layout_width="fill_parent" />
            </LinearLayout>
            </LinearLayout>
        </RelativeLayout>

    </RelativeLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T14:24:07.497

我认为您只是在 getview 中做的太多，每次您尝试滚动时都必须为每个可见的列表项运行所有代码，发生的事情太多了。

还有那些 loadWithCut/loadWitoutCut 是什么？你从哪里加载图像？你在getview中处理图像吗？

如果可能的话，我会首先尝试将任何对象创建移出 getView，然后在各种方法中进行一些日志记录，以查看发生缓慢的确切位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T15:03:34.330

我会考虑摆脱你的嵌套`LinearLayouts`。您应该使用`RelativeLayout`, 而不是嵌套`LinearLayouts`; 特别是如果你正在嵌套`LinearLayouts`。由于您使用了如此多的图像，您可能需要考虑重新调整布局。这是一篇讨论如何以及为什么的文章：

[http://android-developers.blogspot.com/2009/02/android-layout-tricks-1.html](http://android-developers.blogspot.com/2009/02/android-layout-tricks-1.html)

你也可以考虑打破你的`getView`方法，那里有很多事情要做。`getView`必须为每个调用执行大部分代码，这可能是导致问题的原因。您应该考虑创建另一个类。

# iphone - 未能获得任务流程 - 测试应用程序 xcode 到 iPhone

> ID：11375674
> 
> 赞同：4
> 
> 时间：2012-07-07T14:09:03.817
> 
> 标签：iphone, objective-c, ios, xcode, xcode4.3

我目前是计算机工程/开发专业的学生，​​我开始开发 iPhone 应用程序。我有一台越狱的 iPhone 4S iOS 5.1.1 和一台带有 Xcode 4.3.3 的 Macbook Air 2012

我已经阅读/看过很多关于如何在没有 Apple Developers 开发者帐户的情况下在设备上测试应用程序的教程（我只是一名学生，不想花 99 美元来测试一个不会放到App Store，我就是想学）。

我遵循了所有步骤（编辑 SDKsettings.plist，不要在构建设置上签名代码......），应用程序在 iPhone 模拟器上运行良好，但是当我想在我的 iPhone 上测试它时，应用程序出现在跳板，但是当我启动它时，它会立即崩溃，并且在 Xcode 上，我在调试区域有一条消息说：

```
> error: failed to launch
> '/Users/amine/Library/Developer/Xcode/DerivedData/Mes_horaires_de_travail-dfzorjqmnecsnafvctvhgsuphwws/Build/Products/Release-iphoneos/Mes
> horaires de travail.app/Mes horaires de travail' -- failed to get the
> task for process 28720 
```

这不是第一个在启动时崩溃的应用程序。谁能帮我解决这个错误？我找到[了这个提示](https://stackoverflow.com/questions/8777080/error-launching-remote-program-failed-to-get-the-task-for-process-on-xcode-4-2)，但我没有 Xcode 上的菜单来创建 Entitlements.plist 来测试解决方案。

非常感谢。

PS：请善待，我只是一个初学者... ^_^

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-07T14:23:02.063

将您的开发配置文件更改为调试而不是发布。您无法使用发布配置文件在您的设备上进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T09:08:41.707

有点晚了，但谷歌向我展示了这个页面，以便将来参考：

即使我在调试模式下运行，我最近也遇到了同样的问题，但是代码签名错误让我尝试了代码签名身份，而调试配置文件仍然指向临时配置文件而不是开发配置文件。

一旦我改变了它们，错误就消失了。

# java - 不懂顶点着色器翻译

> ID：11375675
> 
> 赞同：0
> 
> 时间：2012-07-07T14:09:08.903
> 
> 标签：java, c++, opengl, glsl

我需要通过 X 和 Y 值来平移顶点。我已经用我想要的统一翻译尝试了下面的代码，但它不起作用。

`translationX`并被`translationY`分配到具有类似代码的制服：

```
int my_value_loc = glGetUniformLocation(shader, "translationX");
glUniform1f(my_value_loc, 10.0f); 
```

这是我的着色器：

```
#version 330
uniform float translationX;
uniform float translationY;
void main(){
    gl_Position=vec4(vVertex.x+translationX, vVertex.y+translationY, 0.0,
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T14:21:40.463

我更喜欢发送翻译矩阵。

着色器代码：

```
uniform mat4 trans;
attribute vec3 vertex;

void main()
{
    gl_Position = trans * vec4(vertex, 1.0);
} 
```

# grails - 将项目从 Play Framework 1 迁移到 Grails

> ID：11375676
> 
> 赞同：4
> 
> 时间：2012-07-07T14:09:10.057
> 
> 标签：grails, playframework

是否有一种干净且简单的方法可以将为 playframework 版本 1 编写的项目迁移到 grails 中？

我想我需要用 grails 重写整个项目。但我需要有关策略和技术的想法，以尽可能减少代码重写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T08:47:40.127

它们都使用 MVC 和 Groovy。所以对代码没有太多的适配。

我认为你必须做的主要改变是：

*   将查询从游戏模型中分离出来，并将它们放在 Grails 的服务上。
*   重写应用程序和数据源配置文件。
*   网址映射。

与重写整个项目相比，它的工作量并不大。

另一方面，您应该谨慎使用 GORM 和他的数据库管理，因为它与 JPA 完全不同。

**更新！**

刚刚取自一篇博文。

> 插件/模块
> 
> Grails：Grails 有 Grails 插件。他们简直太棒了。他们在网站上的组织方式也非常好。看成绩对我来说很重要。不幸的是，没有评论 - 阅读有关不同插件的评论会很有帮助。我至少使用了两个插件——Spring 安全插件和 Searchable 插件。尽管我不得不花一些时间来调整它以适应遗留数据库表，但 Spring 安全性就像一个魅力。Searchable 插件效果一般。无论我做什么，我都无法自定义搜索结果（或者我没有花足够的时间？）。我花了至少一个晚上浏览插件目录并思考“啊哈，我将来需要这个插件。还有这个。还有那个！”。
> 
> Play：Play 框架有一个类似于插件的概念——模块。一些功能已经包含在核心 Play 中，并且 Play 模块与插件完全相同。除了 - 模块目录不显示成绩或评论，因此更难做出选择 - 你是一个人，在选择这个或那个模块时要自己承担风险。
> 
> 谁赢了：圣杯

在这里你有原来的帖子。

无论如何，我认为 Grails 插件比 Playframework 模块更多。但这只是一个想法，我没有检查它。

希望能帮助到你 ：）

# java - 将 DAO 注入 CXF 服务

> ID：11375677
> 
> 赞同：4
> 
> 时间：2012-07-07T14:09:17.163
> 
> 标签：java, web-services, spring, dependency-injection, cxf

我正在尝试将 DAO 注入 CXF 服务。为此，我正在使用 xml 配置。

在我的 app-servlet.xml 中，我添加了以下条目：

```
 <bean id="blogService" class="blog.BlogEntriesImpl">
        <property name="blogDao" ref="blogDao" />
    </bean> 
```

blogDao bean 也在这个文件中定义。

该服务在另一个 xml 文件中配置：

```
 <import resource="classpath:META-INF/cxf/cxf.xml" />

    <jaxws:endpoint id="blogService" implementor="blog.BlogEntriesImpl"
    address="/Blog1" /> 
```

BlogEntriesImpl 实现了服务接口。它有一个 dao 属性和一个 setter 方法。

我调试了应用程序并发现，BlogEntriesImpl 的一个实例在一开始就被实例化并且它具有 dao 属性。我会说它是由 app-servlet.xml 中的 bean 配置完成的。

但是，当我调用该服务时，会引发 NullPointerException。这是另一个正在使用的 BlogEntriesImpl 实例。

为了解决这个问题，我将服务实现类 (BlogEntriesImpl) 中的 dao 属性声明为静态。该变量在应用程序启动时设置。但我不喜欢这个解决方案。

有没有更好的方法将 dao 注入到 CXF 服务中？

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T15:05:39.357

你是对的，你的类实际上有两个实例`BlogEntriesImpl`，一个由 Spring 创建，一个由 Apache CXF 创建。您必须明确要求 Apache CXF 使用 Spring bean 而不是提供类。查看[用 Spring 编写服务](http://cxf.apache.org/docs/writing-a-service-with-spring.html)，看起来你必须替换：

```
<jaxws:endpoint id="blogService" implementor="blog.BlogEntriesImpl" address="/Blog1" /> 
```

和：

```
<jaxws:endpoint id="blogService" implementor="#blogService" address="/Blog1" /> 
```

如果 Apache CXF 找不到带有 name 的 bean `blogService`，请考虑将其从 Spring MVC 上下文 ( `app-servlet.xml`) 移至主上下文。

# java - 用于可伸缩性和时间复杂性的 Java 分析

> ID：11375678
> 
> 赞同：0
> 
> 时间：2012-07-07T14:09:17.500
> 
> 标签：java, multithreading, profiling

我正在开发一个具有生产者-消费者模式的 Java 应用程序。早些时候，生产者没有按顺序产生事件（例如，在“1”之前产生了“2”），但消费者必须按顺序发送它们（例如，“1”然后是“2”然后是“3”等）。为了说明这一点，A TreeSet 被用来维护一个队列，并且正在对其进行按顺序遍历以查看和删除元素。到目前为止，一切都很好。改变的是 Producer 现在按顺序生成事件，因此我决定使用：-

a) LinkedBlockingQueue（它具有队列的基本属性，其中只能访问第一个和最后一个元素，就像在队列中一样）。

b) 使用 LBQ 将我从树集中的 O(log n) 带到 O(1)。

c) 我不再需要编写显式同步，ReentrantLock 负责 LBQ 的 put 和 take 方法。

d) 我不再需要写一个显式的等待/通知，LBQ 会处理这个。

e) LBQ 有 2 个锁，因此 put 和 take 可以同时在不同的 CPU 上进行。

f) LBQ 使用 CAS 来维护等待线程的队列。

在我看来，一切都很好。但我被卡住了，这里有以下问题： -

a) 我需要能够通过收集一些指标来证明使用 LBQ 优于 TreeSet 的优势。我应该在我的 Eclipse 中使用哪个免费的分析器来继续？Visual VM 很好，但是还有更好的选择吗？（Introscope 将用于我的应用程序的显式运行，而不是在我的本地 Eclipse 上，这是我无法抗拒的约束，TPTP 被拒绝）。

b) 我如何证明由于在 LinkedBlockingQueue 中使用了 2 个锁而增加了吞吐量（这在纸上看起来是有的）？这是我想看到和证明的一个重要方面。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T19:29:09.050

我已经使用[JMeter](http://jmeter.apache.org/)进行了类似的负载测试。它也可以（但我没有这样做）轻松计算[吞吐量](http://jmeter.apache.org/usermanual/glossary.html)。就我而言，我必须编写一个 Java Request [Java Request](http://jmeter.apache.org/usermanual/component_reference.html#Java_Request) Sampler，它充当我被测系统的客户端。JMeter 的侦听器可以很容易地[绘制Java Request Sampler 的结果（并且这些侦听器确实显示了吞吐量）。](http://jmeter.apache.org/usermanual/component_reference.html#Graph_Results)听起来您可能需要这样做。他们确实有用于 TCP、HTTP 等的开箱即用的采样器，尽管您可以使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T14:23:14.910

想知道您是否查看过 perf4j（连同它的图形统计附加程序）来测量/显示性能统计信息 (http://perf4j.codehaus.org/)。如果由于某种原因不可行，请分享原因，因为它可能有用。

此外，可以查看指标（http://metrics.codahale.com/）以及 heapster 和 ostrich 的组合（如果可能的话）用于堆/性能测量（https://github.com/mariusaeriksen /堆）。使用指标，您可以依赖石墨或神经节进行显示（如果不使用 JMX）。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T14:27:23.757

如果您想可视化内存/线程使用，您可以尝试使用可视化 vm 或 netbeans 分析器。

# java - 在 Java 中阻塞并同时释放可变数量的线程

> ID：11375683
> 
> 赞同：1
> 
> 时间：2012-07-07T14:10:08.650
> 
> 标签：java, concurrency

我正在用 Java 构建一个缓冲区，它将收集许多线程请求的写入操作，并将它们作为一个组刷新，例如每秒一次。我想给它一个调用的方法，该方法`waitForFlush`将阻塞和线程调用它，直到下一个刷新事件完成。同时，一个单独的、独立的线程正在循环中刷新和休眠。所以我基本上是在寻找一种并发结构或模式，它允许许多线程在特定点阻塞，然后同时释放它们，我发现 Java 的内置并发原语都不是非常接近的匹配. 到目前为止，我想出的最好的方法是 wait/notifyAll，如下所示：

```
public class Buffer {

  private volatile long lastFlushTime = System.currentTimeMillis();
  private final Object flushMonitor = new Object();

  public void waitForFlush() {
    long entryTime = System.currentTimeMillis();

    synchronized(flushMonitor) {
      while(lastFlushTime <= entryTime) {
        flushMonitor.wait();
      }
    }
  }

  public void flush() {
    // do flush stuff here
    synchronized(flushMonitor) {
      lastFlushTime = System.currentTimeMillis();
      flushMonitor.notifyAll();
    }
  }
} 
```

尽管我认为这在实践中可以正常工作，但`waitForNotify()`对我来说，同步块仍然有些不完美。理想情况下，对于这个用例，您可以在`wait()`不同步关联对象的情况下进行调用，并且所有被阻塞的线程将在被调用的同一时刻被释放`notifyAll()`，而不必逐个退出同步块一。

所以，一般来说，有没有比我上面概述的更好的方法来阻塞和同时释放可变数量的线程（我认为 Semaphore 和 CountDownLatch 类只适用于固定数量的线程）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T14:33:19.057

正如 Marko Topolnik 和 munyengm 所提到的，尽管 CountDownLatch 只适用于一次性案例。它在循环场景中失败（即每个 CDL只能`await`&一次）。`countDown`然后您可能会考虑使用 CyclicBarrier，但这在您的情况下会失败，因为您需要知道正在使用的线程数。

如果您可以使用 Java 7，我推荐[Phaser](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Phaser.html)。您可以向许多等待线程发出单线程信号并重用。

```
final Phaser phaser = new Phaser(1);//register one thread to arrive

 public void waitForFlush() {
    int phase = phaser.getPhase();
    phaser.awaitAdvance(phase);    
 }

  public void flush() {
      lastFlushTime = System.currentTimeMillis();
      phaser.arrive(); //signals all waiting threads on the current phase and will increment the phase by 1
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T14:25:41.040

如果你使用`CountDownLatch`得当，我认为它可以为你做到。方法是在闩锁上设置可变数量的线程`await`，然后刷新线程调用`countDown`. 锁存器始终初始化为 1。这是它的工作方式：

```
public class FlushControl
{
  private volatile CountDownLatch latch = new CountDownLatch(1);

  public void awaitFlush() throws InterruptedException { latch.await(); }

  public void flush() {
    final CountDownLatch l = latch;
    latch = new CountDownLatch(1);
    l.countDown();
  }
} 
```

# python - Python：如何将带有 \unnnn 转义的字符串转换为 Unicode 字符串？

> ID：11375684
> 
> 赞同：4
> 
> 时间：2012-07-07T14:10:09.900
> 
> 标签：python, unicode

我正在使用 Python，不幸的是，我的代码需要将表示字符串中的 Unicode 字符的字符串作为`\u1234`转义符转换为原始字符串，例如：

这是我从其他代码中获得的代码字符串：

```
\u6b22\u8fce\u63d0\u4ea4\u5fae\u535a\u641c\u7d22\u4f7f\u7528\u53cd\u9988\uff0c\u8bf7\u76f4\u63a5 
```

我需要将其转换回原始字符串。怎么做？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-07T16:43:53.187

我想这就是你想要的。它不是 UTF-8 字节字符串（嗯，从技术上讲它是，但只是因为 ASCII 是 UTF-8 的子集）。

```
>>> s='\u6b22\u8fce\u63d0\u4ea4\u5fae\u535a\u641c\u7d22\u4f7f\u7528\u53cd\u9988\uff0c\u8bf7\u76f4\u63a5'
>>> print s.decode('unicode-escape')
欢迎提交微博搜索使用反馈，请直接 
```

仅供参考，这是 UTF-8：

```
>>> s.decode('unicode-escape').encode('utf8') 
```

'\xe6\xac\xa2\xe8\xbf\x8e\xe6\x8f\x90\xe4\xba\xa4\xe5\xbe\xae\xe5\x8d\x9a\xe6\x90\x9c\xe7\xb4\xa2\ xe4\xbd\xbf\xe7\x94\xa8\xe5\x8f\x8d\xe9\xa6\x88\xef\xbc\x8c\xe8\xaf\xb7\xe7\x9b\xb4\xe6\x8e\xa5'

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T14:42:27.247

如果我理解这个问题，我们有一个简单的字节字符串，其中有 Unicode 转义，或者类似的东西：

```
a = '\u6b22\u8fce\u63d0\u4ea4\u5fae\u535a\u641c\u7d22\u4f7f\u7528\u53cd\u9988\uff0c\u8bf7\u76f4\u63a5'

In [122]: a
Out[122]: '\\u6b22\\u8fce\\u63d0\\u4ea4\\u5fae\\u535a\\u641c\\u7d22\\u4f7f\\u7528\\u53cd\\u9988\\uff0c\\u8bf7\\u76f4\\u63a5' 
```

所以我们需要手动解析字符串中的 unicode 值，使用 Unicode 码点：

```
\u6b22 => unichr(0x6b22) # 欢 
```

或者最后：

```
print "".join([unichr(int('0x'+a[i+2:i+6], 16)) for i in range(0, len(a), 6)])
欢迎提交微博搜索使用反馈，请直接 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-07T14:33:07.923

Mark Pilgrim 在他的书中解释了这一点。看一看

[http://www.diveintopython.net/xml_processing/unicode.html](http://www.diveintopython.net/xml_processing/unicode.html)

```
>>> s = u"\u6b22\u8fce\u63d0\u4ea4\u5fae\u535a\u641c\u7d22\u4f7f\u7528\u53cd\u9988\uff0c\u8bf7\u76f4\u63a5"

>>> print s.encode("utf-8")

>>> 欢迎提交微博搜索使用反馈，请直接 
```

# struts - 如何在javascript中为struts html标签的隐藏字段赋值

> ID：11375686
> 
> 赞同：0
> 
> 时间：2012-07-07T14:10:24.577
> 
> 标签：struts, textfield, hidden

我正在使用 struts 1.3 我有隐藏字段的要求，我在 javascript 中以隐藏的形式分配值，但是当尝试读取动作类中隐藏字段的值时，它会出现空白

```
 var dataobj="{data:["code:"+c1,"name:"+n1]}";
     document.getElementsByName("data").value=dataobj;
     <html:hidden property="data"   /> 
```

我在哪里做错了不理解

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T14:55:50.237

在浏览器错误控制台中查看 JavaScript 错误。以下不是有效的 JavaScript 代码：

```
var dataobj="{data:["code:"+c1,"name:"+n1]}"; 
```

# c# - 使用PIC通过USB控制照明的代码？

> ID：11375687
> 
> 赞同：2
> 
> 时间：2012-07-07T14:10:28.043
> 
> 标签：c#, usb, hardware, microcontroller, pic

我正在寻找一些代码，因为我真的不想深入了解它的硬件端的细节。我计划建立一个项目，我可以通过 USB 端口控制一些 LED 照明。有人告诉我这样做的一种方法是使用 PIC 微控制器（18f 系列具有内置的 USB 功能）。唯一的问题是我必须大量阅读 Microchip 的库才能进行远程生产，这违背了整个观点，因为我不想详细研究 USB 的体系结构。我可以用 C/C++/C#/Java 编程。我确实了解 ALP 代码（8086），但我不期待它。我知道必须有办法让这种情况发生。我正在寻找代码，我可以在其中对代码进行一些更改并使其适应这个问题。

考虑这种简单的情况，当从 USB 端口接收到某个信号（任何数据）时，微控制器将特定端口上的所有引脚设置为逻辑 1，这样所有 LED 在通过 USB 接收信号时都会发光港口 。

灯就像手机上的通知指示灯。它们需要由计算机控制，因为我希望让它们工作，比如当我在手机上接到电话时（当我的手机与计算机同步时）或使用 Winamp 上的均衡器等等。它使计算机控制部分变得重要。

我可以看到这应该是可能的。对于已经进入 PIC 编程的人来说，这个问题似乎非常简单，而且这个问题已经很老了。我通过谷歌找到的几乎所有代码（断开的链接/过时的信息）都毫无用处。可能还有其他方法可以做到这一点，在这一点上，我自己并不太确定 PIC 的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T17:22:17.820

我做过这样的事情，发现下面的[文章](http://www.waitingforfriday.com/index.php/Building_a_PIC18F_USB_device)非常有用。它提供了原理图、PIC C 代码、关于安装 PIC C 编译器甚至 Windows 控制代码的信息。看看吧，它提供了你需要的一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T16:05:30.447

如果三个灯对你来说足够了，你可能想看看我在[https://github.com/holgero/XFD](https://github.com/holgero/XFD)的项目（wiki: [https://github.com/holgero/XFD/wiki](https://github.com/holgero/XFD/wiki)）。它通过 USB 驱动交通灯小工具。

# php - PHP - fopen（error.log）：无法打开流：权限被拒绝

> ID：11375691
> 
> 赞同：2
> 
> 时间：2012-07-07T14:11:23.520
> 
> 标签：php, apache2

我收到此代码的 php (5.4) 警告： fopen("error.log","w");

警告 警告：fopen(error.log): failed to open stream: Permission denied in ...

关键是，error.log 存在并且拥有 777 权限。我能做些什么？

我在 ubuntu 10.04 系统上使用 Apache2、php 5.4

# c# - 在 ASCX 控件中动态显示类别和子类别

> ID：11375695
> 
> 赞同：1
> 
> 时间：2012-07-07T14:11:45.763
> 
> 标签：c#, asp.net, ascx, nopcommerce, megamenu

当页面加载时，用图像显示所有类别和相应子类别的最佳方式（性能方面）是什么，以便我可以使用 UL LI 设置内容的样式以显示在 Mega Menu 中？

我正在考虑从包含 Mega Menu 的控件运行查询，该菜单应输出所有已发布的类别和子类别。但这会不断回到服务器运行查询吗？对性能不利！

然后我想在客户端机器上运行在 XML 文件中输出数据的查询（显然它将第一次从服务器运行查询），但随后它将读取 XML 文件。然后我在我的 Mega Menu 控件中使用 XSLT 设置 XML 数据的样式。

请指教？我正在使用 NopCommerce 1.9 使用 C# ASP.NET

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T14:34:37.273

您实际上只是将一个性能问题转移到另一个问题上。您所描述的被称为**N + 1 SELECT 问题**。请参阅此代码项目文章以获取快速说明：[选择 N+1 问题 – 如何降低您的 ORM 性能](http://www.codeproject.com/Articles/102647/Select-N-1-Problem-How-to-Decrease-Your-ORM-Perfor)。

现在，我不知道您是否使用 ORM，但无论您的数据访问层如何，这都是同样的问题。您是否应该只**延迟加载**嵌套层次结构的一个级别，并使您的客户端不必运行 N 个查询（每个查询都需要一个往返）来加载每个节点的子节点？或者您是否应该**急切地**将整个层次结构加载到客户端并按需呈现。答案是“视情况而定”。您可能最了解您的数据。

如果您的层次结构非常深并且有很多级别，请查看您的典型用户使用情况是否深入到此层次结构中。如果只有 20% 或更少的用户向下钻取，那么延迟加载解决方案可能适合您。

如果构成您的类别的数据不是很大（我会说，小于 50K），那么急切地加载所有数据并将其呈现在您的客户端上是不费吹灰之力的。

# php - 是否有任何现有项目提供使用 PHP 将 wiki 文本转换为 html 的基本库？

> ID：11375696
> 
> 赞同：1
> 
> 时间：2012-07-07T14:11:50.937
> 
> 标签：php, wiki

我知道有很多项目（如 Mediawiki 、 PHPWiki 等）提供了关于 WIKI 的完整解决方案，但我认为它们提供的内容超出了我的实际需要。

所有这些看起来都很复杂，这不是我需要的。

我所需要的只是一个简单的库，它提供将 wiki Textile 转换为 HTML 的功能，以便我可以将它们嵌入到我自己的项目中。

谢谢。

# java - @Controller 类需要是原型还是单例？

> ID：11375697
> 
> 赞同：0
> 
> 时间：2012-07-07T14:11:59.473
> 
> 标签：java, spring-mvc

我正在将 Spring MVC 用于 Web 应用程序

响应时间约为 250 毫秒，速度就是这个应用程序的一切

因此，在定义我制作的控制器类时，可以同时运行许多原型。该应用程序是无状态的

我希望尽快进行一些性能测试，但想获得意见，如果制作控制器类原型会提高单例的性能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T14:23:52.927

除非您的控制器方法不是线程安全的，否则最好使用“单例”选项。否则会为每个请求创建一个新实例。

但实际上我认为您不会注意到单个请求的性能差异很大，因为创建新实例的开销应该非常小。

# racket - Dr-Racket 中未定义位置图像

> ID：11375701
> 
> 赞同：2
> 
> 时间：2012-07-07T14:12:50.617
> 
> 标签：racket, racket-student-languages

我在 Dr-Racket 中写了一个简单的代码，但它不起作用。这是代码：

```
(place-image (circle 5 "solid" "green")
             50 80
             (empty-scene 100 100)) 
```

我选择了 BSL 语言进行编译，但它给了我以下错误：

> place-image：此功能未定义

出了什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T23:44:23.717

如果您正在关注 Racket 博士和“如何设计程序，第二版”的最新版本，您应该在代码顶部添加以下内容：

```
(require 2htdp/image) 
```

最终结果如下：

```
#lang racket
(require 2htdp/image)

(place-image (circle 5 "solid" "green") 50 80 (empty-scene 100 100)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T02:01:50.580

您应该添加图像教学包。

# python - 关于 Python 中的元类

> ID：11375702
> 
> 赞同：2
> 
> 时间：2012-07-07T14:13:03.050
> 
> 标签：python, class, metaclass, xsi

我尝试在 python 中创建一个类（使用 XSI / Softimage）来覆盖默认方法。

```
class transform(object):
    def __init__ (self) :
        self.object = self._build()
        self.type = ''
    def _build (self):
        object = None
        return object
    @property
    def name(self):
        name = xsi.getValue(str(self.object) + '.Name')
        return str(name)    
    @name.setter
    def name(self, value):
        name = xsi.setValue(str(self.object) + '.Name', value)
        self.object = str(name)
    ################## TRANSLATE ######################
    @property
    def tx(self):
        tx = xsi.getValue(str(self.object) + '.kine.local.posx')
        return tx
    @tx.setter
    def tx(self, value):
        tx = xsi.setValue(str(self.object) + '.kine.local.posx', value)
    @property
    def ty(self):
        ty = xsi.getValue(str(self.object) + '.kine.local.posy')
        return ty
    @ty.setter
    def ty(self, value):
        ty = xsi.setValue(str(self.object) + '.kine.local.posy', value)
    @property
    def tz(self):
        tz = xsi.getValue(str(self.object) + '.kine.local.posz')
        return tz
    @tz.setter
    def tz(self, value):
        tz = xsi.setValue(str(self.object) + '.kine.local.posz', value) 
```

但正如你所看到的，我重复了很多。我怎样才能简化这个？也许与元类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T14:32:03.127

您在这里不需要元类。你可以这样做：

```
def make_xsi_property(name):
    def get_prop(self):
        return xsi.getValue('{}.{}'.format(self.object, name))
    def set_prop(self, value):
        tx = xsi.setValue('{}.{}'.format(self.object, name), value)
    return property(get_prop, set_prop)

class MyClass(object):
    tx = make_xsi_property('kine.local.posx')
    ty = make_xsi_property('kine.local.posy')
    #... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T14:38:06.637

`property`类型只是描述符的一个（方便的）快捷方式。对于您的情况，最简单的解决方案是自定义描述符，即：

```
class XsiDescriptor(object):
    def __init__(self, xsi):
        self.xsi = xsi

    def __get__(self, instance, cls=None):
        if instance is None:
            return self
        key = "%s.%s" % (instance.object, self.xsi)
        return xsi.getValue(key)

    def __set__(self, instance, value):
        key = "%s.%s" % (instance.object, self.xsi)
        xsi.setValue(key, value)

  class Transform(object):
      # your init etc here

      tx = XsiDescriptor("kine.local.posx")
      ty = XsiDescriptor("kine.local.posy")

      # etc 
```

# amazon-ec2 - EC2：使用 AutoScaling 跨多个区域的安全组防火墙规则

> ID：11375703
> 
> 赞同：4
> 
> 时间：2012-07-07T14:13:04.877
> 
> 标签：amazon-ec2, firewall

出于地理冗余和性能原因，我们将在多个区域中设置多个 EC2 服务器，这些服务器将使用 Amazon 的 AutoScaling 按需扩展和缩减。然而，我们有一个有点独特的要求，即所有地区的每台服务器都需要能够相互通信。虽然在单个区域中设置防火墙以允许这样做非常简单，但由于不支持从其他区域引用防火墙中的安全组，因此如何跨区域实现这一点并不明显。

有谁知道确保我们所有服务器都可以在特定端口上相互访问的最佳方法是什么？请记住，Amazon 的 AutoScaling 将添加和删除服务器，因此手动输入 IP 地址很快就会过时。我希望有一种方法可以通过配置来实现这一点，而不是每次通过 AutoScaling 添加或删除服务器时都必须进行 API 调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T16:31:20.117

我不相信这是可能的。您可以尝试使用安全组 ID 而不是名称，但我不确定这些是否可以跨区域工作。我只是试了一下，无法让它工作。该规则创建得很好，但不能保证我添加的安全组实际上是从我的帐户添加的，因为您实际上可以跨帐户添加安全组。如果您有 VPN 连接，则很可能使用 VPN 连接，因为 VPN 可以让您更好地控制防火墙规则，但我从未尝试过。

说了这么多。我认为你应该重新审视你的应用程序的要求。我不知道您为什么需要在两个区域之间连接，我了解您的目标是实现地理冗余。但是，在考虑容错时，要求两个环境相互连接会给我带来危险。如果您的环境以任何方式连接，那么即使一个环境发生故障，您也会面临完全故障的风险。在两个区域中启动实例除了延迟或容错之外还有什么用途？我的观点是，如果服务器需要安全组中的规则，则您的环境可能过于连接，并且拥有两个地理位置并没有任何好处。

每个 EC2 区域都是隔离的，以帮助提供强大的架构设计决策。他们还希望将任何问题隔离到一个区域，这也是您应该努力的目标。

# php - 如何使用 Symfony2 制作页面的常量部分？

> ID：11375705
> 
> 赞同：0
> 
> 时间：2012-07-07T14:13:28.720
> 
> 标签：php, symfony, twig

我正在使用（和学习）Symfony2 制作网站。在我的代码中，我总是需要进行 2 个查询并在侧边栏中显示它们的结果，就像这样：

```
Groups (251)

PHP
JS
Java
C++
...

Users (1542)

user1
user2
userN
... 
```

如何使用 Twig & Symfony2 制作它？我问放在哪里。我想过在模板中请求它，但我不知道该怎么做。抱歉英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T14:25:53.380

[嵌入控制器](http://symfony.com/doc/current/book/templating.html#embedding-controllers)似乎是最合适的。

# statistics - 在 MATLAB 神经网络中应用 ANOVA 测试。工具箱

> ID：11375706
> 
> 赞同：1
> 
> 时间：2012-07-07T14:13:39.897
> 
> 标签：statistics, neural-network, matlab, anova

Matlab 有 NN 工具箱以及 ANOVA 测试。我想在训练后对 NN 模型应用 ANOVA 测试。怎么做？欢迎任何参考或示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:51:56.753

我不确定您的起始数据是什么样的，但这是对Matlab[中 ANOVA 函数的引用。](http://www.mathworks.com/help/toolbox/stats/bqttcvf.html)我相信它在 stats 包中，但如果您使用的是 NN 工具箱，我想您可能也可以访问 stats 工具箱。

# php - 内存缓存无法启动

> ID：11375709
> 
> 赞同：2
> 
> 时间：2012-07-07T14:14:08.527
> 
> 标签：php, memcached

在我的 WAMP 堆栈上安装 memcache 时，我一直在遵循几个指南（主要是[这个](http://pureform.wordpress.com/2008/01/10/installing-memcache-on-windows-for-php/)指南）——但我遇到了一个奇怪的问题，因为我的工作机器在做同样的事情时遇到了一些麻烦。

当我重新启动 Apache 时，我在日志中看到以下错误：

```
PHP Warning:  PHP Startup: Unable to load dynamic library 'c:/wamp/bin/php/php5.3.10/ext/php_memcache.dll' - %1 is not a valid Win32 application.\r\n in Unknown on line 0 
```

我正在运行 Win7 64 位、apache 2.2.21、PHP 5.3.10 并已下载[php_memcache-2.2.6-5.3-vc9-x86](http://downloads.php.net/pierre/) - 我也尝试过 nts 版本 - 但它也失败了

memcached作为服务安装并且当前正在*运行*

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-07T16:40:39.293

`php_memcache.dll`终于找到了一份有效的副本。我能看到的唯一区别是它是 64 位版本。我仍然不确定为什么会这样。我的 PHP 安装是 32 位的，我`PHP_INT_SIZE`的是 4

如果其他人遇到此问题并需要该文件，我将其上传到[http://www.sendspace.com/file/uq6srb](http://www.sendspace.com/file/uq6srb)

# iphone - iOS 应用程序的构建设置中主界面选项的用途是什么？

> ID：11375712
> 
> 赞同：4
> 
> 时间：2012-07-07T14:14:36.147
> 
> 标签：iphone, ios, objective-c, cocoa-touch, xib

当我启动一个单视图应用程序而不是以`rootViewController`编程方式从分配`AppDelelgate`，尝试使用“主界面”选项分配一个`xib`作为我的主界面文件时，`SIGABRT`当我运行它时会向程序发送一个信号。为什么会这样？“主界面”选项的目的是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T06:48:10.657

我发现了如何做到这一点。在我了解了应用程序如何加载的整个过程之后，这一点非常明显。所以我想我会回答我自己的问题。

关键是初始化窗口并`UIApplication`从 xib 本身设置它及其委托。

*   **第 1 步**：创建一个带有`UIWindow`对象的 xib。将 xib 的文件所有者设为`UIApplication`.
*   **第 2 步**：在 xib 中创建一个`AppDelegate`对象，并将文件所有者的`delegate`出口连接到该对象。
*   **第 3 步**：为类中的窗口创建一个插座`AppDelegate`。
*   **第 4 步**：在构建设置中选择**MainInterface**选项作为您创建的 xib。
*   **第 5 步**：注释掉 `applicationDidFinishLaunchingWithOptions:`方法中的代码。

如果您运行该程序，它将在模拟器中显示该窗口，但您会收到一条警告，指出应用程序应该`rootViewController`在应用程序启动结束时出现。

*   **第 6 步**：所以`applicationDidFinishLaunchingWithOptions:`我们可以在内部实例化 a`UIViewController`并将窗口出口 rootViewController 分配为此视图控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T16:49:23.837

您可以将 .xib 文件注册为主界面，但我相信随后假定文件的所有者是 UIApplication 对象。这是一种构建应用程序的方式，在早期版本的 Xcode 中很常见。如果您找到包含 MainWindow.xib 文件的项目，则它们很可能使用该样式。

# c# - 如何将 c# 日期时间存储在文本数据库字段中

> ID：11375713
> 
> 赞同：0
> 
> 时间：2012-07-07T14:14:37.447
> 
> 标签：c#, .net, datetime

我建立了一个动态表单系统，它接受文本字段、下拉列表和日期时间的类型。

表单答案也是动态的，所有内容都存储为文本或 id 的文本版本到下拉答案。

对于日期时间，我想知道将 ac# datetime 序列化为文本的最佳格式是什么，纯粹用于序列化。我已经不得不往返于 Unix tics 扩展工作，我可以使用它以及我的 javascript 调用。但我觉得有更好的选择。

显然 DateTime.Parse 会在回来的路上使用，但是在出去的路上使用什么呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T14:17:04.867

您只需使用`ToString`适当的[标准](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)或[自定义](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)日期/时间格式字符串。

但是，您需要*非常*小心：

*   我建议使用`CultureInfo.InvariantCulture`来执行转换（解析时也是如此）以避免特定于文化的值
*   您需要考虑是否还要序列`Kind`化`DateTime`​​. 这些总是局部的、普遍的或未指定的`DateTime`值吗？您是否也应该实际使用`DateTimeOffset`和序列化偏移量？
*   你需要什么精度？
*   还有什么会读取这些数据？像 ISO-8601 这样的“标准”格式可能是一个好主意，可能会扩展以保持与自身相同的精度`DateTime`。（标准`o`或`O`格式字符串将生成 ISO-8601 字符串。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T14:22:57.420

对于往返 DateTime 值[，显而易见的解决方案是使用“o”格式说明符](http://msdn.microsoft.com/en-us/library/bb882584.aspx)。

除非您对字符串的长度有限制，并且准备牺牲精度、Kind 属性（UTC 或本地），或两者兼而有之。在这种情况下，请使用满足您需求的自定义格式字符串。

# xcode - 为什么我的整数增加了 4 的倍数？

> ID：11375714
> 
> 赞同：0
> 
> 时间：2012-07-07T14:14:48.347
> 
> 标签：xcode, nsuinteger

我有这样的 if 语句

```
@property (nonatomic) NSUInteger *theScore;

if (hint.hidden) {
    theScore += (2);
        } else {
            theScore += (1);
                }
NSLog(@"Score changed");
score.text = [NSString stringWithFormat:@"%d", theScore]; 
```

但不是 theScore 增加 2 或 1，而是增加 8 或 4

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T14:17:15.403

因为它是指向整数的指针，而不是整数本身。4 是整数的大小。

将其更改为 NSUInteger theScore，不带 *.

# c# - “代表是安全的”这句话是什么意思？

> ID：11375718
> 
> 赞同：10
> 
> 时间：2012-07-07T14:15:01.293
> 
> 标签：c#, .net, security, delegates

在委托的[C# 文档](http://msdn.microsoft.com/en-us/library/900fyy8e.aspx)中，它说*“委托是一种引用类型，可用于封装命名或匿名方法。委托类似于 C++ 中的函数指针；但是，委托是类型安全且**安全**的”*

***我的问题是，他们所说的“安全***”代表是什么意思？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-07T15:25:28.797

委托强制执行对方法的类型安全调用。这通常通过编译器执行的静态类型检查来工作。但不是唯一的方法，你可以使用`Delegate.DynamicInvoke()`来绕过编译器类型检查。一个例子：

```
using System;

class Program {
    delegate void foo(long arg);
    static void Main(string[] args) {
        var obj = new Example();
        var dlg = Delegate.CreateDelegate(typeof(foo), obj, "Target");
        dlg.DynamicInvoke(42);
    }
}

class Example {
    private long field;
    public void Target(long arg) {
        field = arg;
    }
} 
```

现在开始修改这段代码，你可以做一些事情来欺骗类型系统：

*   更改 foo 委托声明
*   传递不同的委托类型作为第一个参数
*   将不同类的对象作为第二个参数传递
*   更改目标方法名称
*   `DynamicInvoke`在调用中传递不同类型的参数
*   `DynamicInvoke`在调用中传递一组不同的参数

所有这些尝试都将毫无怨言地编译。它们都不会执行，你会得到运行时异常。这就是使委托安全的原因，您不能使用它们来调用会使堆栈不平衡的方法或诱导目标方法访问未初始化或不属于激活框架的堆栈位置。恶意软件劫持代码的传统方式。C 或 C++ 中不存在此类运行时检查，它们的编译器仅执行静态检查，并且可以通过简单的强制转换绕过。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-07T14:24:21.787

> 我的问题是，他们所说的“安全”是什么意思？
> 
> **使用委托调用的函数被赋予调用者的安全上下文，这可以防止委托执行低权限调用者不可用的任务。**可以使用指向在任何地方实现的函数的指针来初始化委托。唯一的限制是签名。在调用包含指向未知来源的函数指针的委托时，调用者需要小心，因为可能会出现意外的实现。使用代码访问安全性来保护代表。

信用： [http ://etutorials.org/Programming/programming+microsoft+visual+c+sharp+2005/Part+III+More+C+Language/Chapter+8+Delegates+and+Events/](http://etutorials.org/Programming/programming+microsoft+visual+c+sharp+2005/Part+III+More+C+Language/Chapter+8+Delegates+and+Events/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-07T14:18:07.560

在这种情况下，我认为安全意味着委托不能持有无效值。这可能与类型安全部分有一点重叠。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-07T14:19:06.253

这意味着您不能像在 C/C++ 中那样“乱搞”，使函数指针指向无效的内存区域，或者更糟的是，指向恶意代码。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-07T14:19:14.163

它将它们与 C++ 中的函数指针进行比较，正如该人所说，它可以用来“炸掉你的腿”。

# file - 将 json 数据读入 Node.js 中的全局变量

> ID：11375719
> 
> 赞同：1
> 
> 时间：2012-07-07T14:15:17.900
> 
> 标签：file, node.js, readfile

我正在尝试将 json 结构读入全局变量，但似乎无法使其正常工作。从文件中读取后，我正在使用回调进行处理（该部分正在工作）。

我想填充“source_files”。

```
var fs = require('fs');
var source_files = [];

function readConfig(callback) { 
    fs.readFile('data.json', 'utf-8', function (err, content) {
        if (err) return callback(err);
        callback(content);
    });             
}                       

readConfig(function(config) { 
    var settings = JSON.parse(config);
    var inputs = settings.inputs;

    for (var id=0; id < inputs.length; id++) {
        source_files.push(inputs[id].replace('./',''));
    }           
});

console.log(source_files); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T14:18:37.217

记住那[`readFile`是*异步*](http://nodejs.org/api/all.html#all_fs_readfile_filename_encoding_callback)的。您的最后一行 ,`console.log(source_files)`将在回调被调用之前运行，**因此**`readFile`在`readConfig`回调被调用之前。您需要将其移至回调*中*`readConfig`。

使用您的代码原样，会发生以下情况：

1.  它创建空白数组。
2.  它调用`readConfig`.
3.  `readConfig`来电`readFile`。
4.  `readFile` *启动*异步读取操作并返回。
5.  `readConfig`返回。
6.  你登录`source_files`，它是空的。
7.  稍后，`readFile`操作完成并调用回调。它调用`readConfig`回调。
8.  `readConfig`回调填充了 ，但它有点像此时`source_files`一棵树倒在森林里，因为没有观察到这一点。:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T15:51:38.707

如前所述，`readFile`是异步的。如果这只是启动初始化代码（即是否阻塞无关紧要），您可以`readFileSync`改用（抛出`err`或返回`content`）。

但是，如果`readConfig`也可以调用以响应稍后的输入（例如 POSIX 信号或 TCP 请求），那么您必须保持异步或有阻塞其他 I/O 的风险。

# objective-c - Mountain Lion 上的 Sparkle 更新——Developer ID 可以与 Sparkle 一起使用吗？

> ID：11375721
> 
> 赞同：1
> 
> 时间：2012-07-07T14:15:28.293
> 
> 标签：objective-c, cocoa, sparkle

有什么理由（如果有的话）担心通过 Mountain Lion 上的 Sparkle 框架更新应用程序？

如果我用 Developer ID 证书签署新版本，Sparkle 下载它并用新版本替换旧版本，是否有理由相信 Developer ID 不会正确“通过”？

我对开发人员 ID 和 Sparkle 的内部工作方式没有复杂的了解。因此我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:39:48.257

开发者 ID 只不过是使用 Apple 颁发的证书进行代码签名。代码签名包含在应用程序包中。Sparkle 只是将应用程序的捆绑包替换为新的捆绑包，包括其所有内容（其中包括签名）。就像您手动更换应用程序一样。

所以不，没什么好担心的。

# c - C sendfile 然后是其他文本

> ID：11375722
> 
> 赞同：0
> 
> 时间：2012-07-07T14:15:46.780
> 
> 标签：c, sockets, sendfile

这是我的客户端代码片段：

```
while(((uint32_t)total_bytes_read != fsize) && ((nread = read(sockd, filebuffer, sizeof(filebuffer))) > 0)){
    if(write(fd, filebuffer, nread) < 0){
        perror("write");
        close(sockd);
        exit(1);
    }
    total_bytes_read += nread;
}
memset(buffer, 0, sizeof(buffer));
if(recv(sockd, buffer, sizeof(buffer), 0) < 0){
    perror("Errore ricezione 226");
    close(sockd);
    exit(1);
}
printf("%s", buffer);
memset(buffer, 0, sizeof(buffer));
if(recv(sockd, buffer, sizeof(buffer), 0) < 0){
    perror("Errore ricezione 221");
    close(sockd);
    exit(1);
}
printf("%s", buffer);
close(fd); 
```

首先它接收一个文件，然后监听 2 个服务器的消息。
这里是服务器的片段：

```
offset = 0;
rc = sendfile(newsockd, fd, &offset, fileStat.st_size);
if(rc == -1) {
        fprintf(stderr, "Errore durante l'invio di: '%s'\n", strerror(errno));
        onexit(newsockd, sockd, fd, 3);
}
if((uint32_t)rc != fsize) {
    fprintf(stderr, "Trasferimento incompleto: %d di %d bytes inviati\n", rc, (int)fileStat.st_size);
    onexit(newsockd, sockd, fd, 3);
}
memset(buffer, 0, sizeof(buffer));
strcpy(buffer, "226 File trasferito con successo\n");
if(send(newsockd, buffer, strlen(buffer), 0) < 0){
  perror("Errore durante l'invio 226");
  onexit(newsockd, sockd, 0, 2);
}
memset(buffer, 0, sizeof(buffer));
strcpy(buffer, "221 Goodbye\n");
if(send(newsockd, buffer, strlen(buffer), 0) < 0){
  perror("Errore durante l'invio 221");
  onexit(newsockd, sockd, 0, 2);
} 
```

问题是已被 RETRived 的文件还包含服务器发送的 2 条消息 Oo
为什么会发生这种情况？我已经对客户说“recv until the file size”...我不明白为什么该文件还包含 2 条消息-.-''

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T14:21:50.327

> while((((uint32_t)total_bytes_read != fsize) && ((nread = read(sockd, filebuffer, sizeof(filebuffer))) > 0))

如果您碰巧读取的字节数比 fsize 多 1 个字节，则该语句仍然正确，并且您不会跳出循环。

# css - 使用CSS3在图像悬停时淡入淡出？

> ID：11375724
> 
> 赞同：13
> 
> 时间：2012-07-07T14:15:51.910
> 
> 标签：css, jsfiddle

我想知道是否可以在图像上声明一个 unhover 类？

我想要实现的是，当有人将鼠标悬停在图像上时它会淡入，然后当他们取消悬停时它会淡出？

这是我的代码，当有人将鼠标悬停在图像上时，我可以使用淡入淡出，但是当他们悬停时我也需要淡入淡出......希望这是有道理的。

[http://jsfiddle.net/L7XCD/](http://jsfiddle.net/L7XCD/)

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-07T14:20:50.353

这应该适合你！[http://jsfiddle.net/L7XCD/1/](http://jsfiddle.net/L7XCD/1/)

让我们使用很棒的 Mozilla 文档来解释这一点：

*`Transition rovide a way to control the speed of animation changes to CSS properties. Instead of having the animation changes take effect instantly, you can transition the property changes over a specified time period.`*

我们还使用了转换时间函数（easy、linear、easy-in、easy-out、easy-in-out）

*`Timing functions determine how intermediate values of the transition are calculated. The timing function can be specified by providing the graph of the corresponding function, as defined by four points defining a cubic bezier`*

**CCS**标记：

```
img {
    opacity: 0.6;
    transition: opacity 1s ease-in-out;
    -moz-transition: opacity 1s ease-in-out;
    -webkit-transition: opacity 1s ease-in-out;
}
img:hover {
    opacity: 1.0;
    transition: opacity .55s ease-in-out;
    -moz-transition: opacity .55s ease-in-out;
    -webkit-transition: opacity .55s ease-in-out;
}​ 
```

由于他正在使用过渡缓入出，我认为使用相同的过渡功能会更好。

有关更多信息，请查看[此处的文档](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Transitions)

希望能帮助到你！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-07T14:21:51.507

[http://jsfiddle.net/L7XCD/2/](http://jsfiddle.net/L7XCD/2/) 只需在没有悬停标签的情况下将过渡效果添加到您的元素

# javascript - XMLHttpRequest 在 Google Chrome 打包的 Web 应用程序中不起作用

> ID：11375729
> 
> 赞同：3
> 
> 时间：2012-07-07T14:16:22.440
> 
> 标签：javascript, xml, json, google-chrome, xmlhttprequest

我正在编写一个打包的**Chrome Web 应用程序**并尝试解析外部 XML。当我将 XML 文件下载到我的服务器时它可以工作，但当我将 XML 文件更改为 Web 上的位置时它不起作用。

例如，我正在尝试访问此文件： [http ://www.w3schools.com/xml/note.xml](http://www.w3schools.com/xml/note.xml)

这是我的 JavaScript 代码（注意 HTML ）：

```
function dashboardContent() {
html="";

xmlhttp=new XMLHttpRequest();
xmlhttp.open("GET","http://www.w3schools.com/xml/note.xml",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML;

html+=xmlDoc.getElementsByTagName("to")[0].childNodes[0].nodeValue;
html+=xmlDoc.getElementsByTagName("from")[0].childNodes[0].nodeValue;
html+=xmlDoc.getElementsByTagName("body")[0].childNodes[0].nodeValue;

document.getElementById("contentArea").innerHTML=html;

} 
```

[在我的 Chrome Web App manifest.json 文件中，我根据 Google对 Cross-origin XMLHttpRequests 的清单要求](http://code.google.com/chrome/extensions/trunk/apps/app_storage.html)将以下内容置于权限之下：

```
{
    "name": "BirdTrax",
    "version": "0.1.1",

    "description": "Birding explorer to help you plan birding trips and find recently eBirded sightings, rarities, and checklists in your area",
    "icons": {
         "16": "icons/helloWorld_16.png",
        "128": "icons/helloWorld_128.png"
    },

    "app": {
        "launch": {
            "local_path": "main.html",
            "container": "tab"
        }
    },

    "background_page": "background.html",
    "options_page": "options.html",

"permissions": [
  "http://www.w3schools.com/*",
  "notifications",
  "unlimitedStorage"
],

    "incognito": "split"

} 
```

我不确定我是否仍然缺少某些东西，但代码对我不起作用。有什么建议、提示、想法吗？我真的很感激任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T14:21:04.947

后有一个通配符就足够了`/`。否则，您将允许您的扩展程序*仅*请求根目录中的页面。

```
"permissions": [
  "http://www.w3schools.com/*", 
```

在您的情况下，您只请求一个 URL。进一步限制模式可能会更好：

```
"permissions": [
  "http://www.w3schools.com/xml/note.xml", 
```

# android - 如何使用 SeekBar 的进度调整 TextView 的大小（Android）

> ID：11375731
> 
> 赞同：0
> 
> 时间：2012-07-07T14:16:34.403
> 
> 标签：android, resize, textview, seekbar

我正在尝试使用 SeekBar 更改 TextView 的文本大小，只有当我增加大小时它才能正常工作，当减小大小时，“文本大小”变化良好，但“textview 的布局”似乎具有最大的高度你放（文本出现在布局的中心，好像具有 match_parent 属性而不是 wrap_content）。

我尝试了 textview 的布局属性的许多组合（它在相对布局中）（H：WRAP_CONT，W：WRAP_CONT / H：MATCH_PAR，W：MATCH_PAR，ALING PARENT TOP TRUE /.....）

有人能帮我吗？？

编辑： textview 应该出现在顶部

布局

```
 <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <RelativeLayout
            android:id="@+id/preview_preview"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <ImageView
                android:id="@+id/preview_image"
                android:layout_width="match_parent"
                android:layout_height="match_parent" android:background="@drawable/cuadros_001"/>

            <TextView
                android:id="@+id/preview_text_top"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:text="TextView" 
                android:textColor="#FFFFFF"/>

            <TextView
                android:id="@+id/preview_text_bottom"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="2.5dp"
                android:gravity="bottom|center"
                android:text="PREVIEW_TEXT_BOTTOM"
                android:textColor="#FFFFFF"
                android:textSize="25dp" android:layout_alignParentBottom="true" android:layout_centerHorizontal="true"/>

           </RelativeLayout>

    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <GridView
            android:id="@+id/preview_gridview"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/backgroundtransparencia"
            android:gravity="center"
            android:horizontalSpacing="5dp"
            android:numColumns="3"
            android:stretchMode="columnWidth"
            android:verticalSpacing="10dp" >

        </GridView>

    </LinearLayout>

    <LinearLayout
        android:id="@+id/preview_child_2"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />

    </LinearLayout>

</ViewFlipper> 
```

---搜索栏--

```
seekbar_toptext =(SeekBar)findViewById(R.id.seekbar_toptext);
    seekbar_toptext.setProgress(40);
    seekbar_toptext.incrementProgressBy(05);
    seekbar_toptext.setMax(100);

    seekbar_toptext.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

        int topsize;

        public void onStopTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub

        }

        public void onStartTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub
        }

        public void onProgressChanged(SeekBar seekBar, int progress,
                boolean fromUser) {

            preview_text_top.setTextSize(TypedValue.COMPLEX_UNIT_SP ,progress);

        }
    }); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:51:45.063

试试这个代码...

我希望这对你有帮助......

```
final TextView t1=new TextView(this); 
t1.setText("Hello Android");        
    final SeekBar sk=(SeekBar) findViewById(R.id.seekBar1);     
    sk.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {       

    @Override       
    public void onStopTrackingTouch(SeekBar seekBar) {      
        // TODO Auto-generated method stub      
    }       

    @Override       
    public void onStartTrackingTouch(SeekBar seekBar) {     
        // TODO Auto-generated method stub      
    }       

    @Override       
    public void onProgressChanged(SeekBar seekBar, int progress,boolean fromUser) {     
        // TODO Auto-generated method stub      

        t1.setTextSize(progress);
        Toast.makeText(getApplicationContext(), String.valueOf(progress),Toast.LENGTH_LONG).show();

    }       
}); 
```

# java - 将 Jersey 客户端添加到我的 Android 应用程序。发生非法参数异常？

> ID：11375735
> 
> 赞同：3
> 
> 时间：2012-07-07T14:17:23.797
> 
> 标签：java, android, jersey, jax-rs

我想在我的 Android 应用程序中使用 Jersey 客户端。这是我的客户的代码：

```
private JSONArray getJsonElements(){
    ClientConfig config = new DefaultClientConfig();
    Client client = Client.create(config);
    WebResource service = client.resource(getBaseURI());
    JSONArray jarray = new JSONArray();
     jarray =  service.path("/collection").accept(MediaType.APPLICATION_JSON).get(JSONArray.class);
     Log.v(TAG, jarray.toString());
    return jarray;
}
private static URI getBaseURI() {
    return UriBuilder.fromUri("http://localhost:6577/Example/rest/Example")
            .build();
} 
```

问题来了。当我想构建应用程序时，它给了我这个非常常见的异常：

```
java.lang.IllegalArgumentException: already added: Ljavax/ws/rs/core/GenericEntity;...2012-07-07 16:48:32 - SM] Conversion to Dalvik format failed with error 1 
```

我看到了有关此异常的所有问题。可以从 BuildPath 中删除 Jars 并更改客户端的选择（或者我可以创建我的客户端），但我不想这样做。你有什么可以推荐给我的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T00:36:37.280

看看这个链接：[http ://www.vogella.com/articles/AndroidNetworking/article.html](http://www.vogella.com/articles/AndroidNetworking/article.html)

我自己更喜欢使用 HTTP 客户端将 Android 应用程序连接到使用 Jersey 的 Rest Service，因为它支持 HTTP 命令，例如 POST、PUT、DELETE、GET。例如使用 GET 命令并以 JSON 格式传输数据：

```
public class Client {

    private String server;

    public Client(String server) {
        this.server = server;
    }

    private String getBase() {
        return server;
    }

    public String getBaseURI(String str) {
        String result = "";
        try {
            HttpParams httpParameters = new BasicHttpParams();
            int timeoutConnection = 3000;
            HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
            int timeoutSocket = 5000;
            HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);
            DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);
            HttpGet getRequest = new HttpGet(getBase() + str);
            getRequest.addHeader("accept", "application/json");
            HttpResponse response = httpClient.execute(getRequest);
            result = getResult(response).toString();
            httpClient.getConnectionManager().shutdown();
        } catch (Exception e) {
            System.out.println(e.getMessage());
        } 
        return result;
    }

 private StringBuilder getResult(HttpResponse response) throws IllegalStateException, IOException {
            StringBuilder result = new StringBuilder();
            BufferedReader br = new BufferedReader(new InputStreamReader((response.getEntity().getContent())), 1024);
            String output;
            while ((output = br.readLine()) != null) 
                result.append(output);

            return result;      
      }
} 
```

然后很容易在另一堂课上你可以：

```
Client client = new Client("http://localhost:6577/Example/rest/");
String str = client.getBaseURI("Example");    // Json format 
```

# actionscript-3 - Event TIMER 是否总是在 TIMER_COMPLETE 之前调度？

> ID：11375737
> 
> 赞同：2
> 
> 时间：2012-07-07T14:17:37.410
> 
> 标签：actionscript-3, flash, timer

flash.utils.Timer 对象的事件 TIMER 是否总是在 TIMER_COMPLETE 之前调度？

在第二场活动期间，我取消了在第一场活动期间需要的东西；所以他们的顺序是最重要的。我检查了文档，并不能保证他们的调度顺序。

在我所做的测试中似乎是这种情况，但我不想在没有先确认的情况下公开发布软件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T14:52:48.083

You can avoid this problem by using TimerEvent.TIMER only:

```
private function onTimer(event:TimerEvent)
{
    // ...

    if (timer.currentCount == timer.repeatCount) {
        // timer is complete
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T15:27:41.533

我几乎肯定是这种情况，因为代码似乎在播放器本身中，我认为您无法从源头获得合法确认，但是我自己和从文档如何阅读听起来好像 TIMER 事件总是在完成事件之前被调度

timerComplete 在完成 Timer.repeatCount 设置的请求数时调度。

timer 每当 Timer 对象达到根据 Timer.delay 属性指定的时间间隔时调度。

所以我想象 timerComplete 在它接收到足够的计时器事件后调度， currentCount 等于重复计数，然后调度 timerComplete ，但是如果不能查看代码，任何人都不可能完全确认这一点。可能您可以查看 Gnash 源以了解播放器的实现如何处理它，但在普通 Flash Player 中不一定相同。

# c - 如何检查用户是否具有执行权限？

> ID：11375738
> 
> 赞同：3
> 
> 时间：2012-07-07T14:17:46.063
> 
> 标签：c, linux, unix, permissions, solaris

我想知道如何检查“用户”（运行该程序的人除外）是否对文件具有执行权限？[C接口]

我查看了“访问”，它提供了有关呼叫者的信息。

我正在寻找类似的东西：-

```
"<cmd> <user_name> <file_name>" 
```

在这里，我试图获取是否`<user_name>`具有执行权限`<file_name>`？

我在找 C api 吗？

可能的解决方案：-我正在使用以下算法来获取此信息

```
boolean_t
is_user_has_execute_permissions(char *run_as_user)
{
        /* Check world execute permission */
        if ((cmd_stat.st_mode & S_IXOTH) == S_IXOTH) {
                return (TRUE);
        }

        /* group id for run_as_user */
        getpwnam_r(run_as_user, &pw, buf, passwd_len);

        /* Check group execute permission */
        if ((cmd_stat.st_mode & S_IXGRP) == S_IXGRP) {
                if (pw->pw_gid == cmd_stat.st_gid)
                        return (TRUE);
        }

        return (FALSE);
} 
```

有没有人看到这个有任何错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T14:31:12.503

您需要调用 stat(2)，它返回文件所有者、所有者组和其他人的权限位。比你必须找出你感兴趣的用户的 id 和它的组的 id：见 getpwent(3) 和 getgrouplist(3)。第一个匹配，将给出结果权限。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-07T14:29:32.200

从命令行，您可以轻松地使用 awk 程序。就像是

```
ls -l filename | awk -F '{ if (substring($1,3,1) == "x" exit(0); exit(1)}' 
```

如果找到，则将返回码设置为 0，如果没有，则设置为 1。

在 C 程序中，您想使用`fstat`. 基本上你打开文件

```
int fd = fopen("filename", "r"); 
```

然后获取文件统计块`fstat`

```
fstat(fd, &bufr) 
```

看看`bufr.st_mode`。

这是[fstat](http://www.warpspeed.com.au/cgi-bin/inf2html.cmd?..%5Chtml%5Cbook%5CToolkt40%5CXPG4REF.INF%20139)的描述。

**更新**

我会胡思乱想地注意到，当 OP 最初发布时，并不清楚 C API 是否是所需的。

# objective-c - 带有动画图像的基于块的动画

> ID：11375740
> 
> 赞同：3
> 
> 时间：2012-07-07T14:18:02.137
> 
> 标签：objective-c, animation, xcode4, uiimageview

我一直在尝试创建简单的“基于块的动画”。我在这里使用一组图像“图像”。我使用了这种方法：

```
 [UIView animateWithDuration:3.0 
                       delay:0.0f 
                     options:UIViewAnimationOptionAllowUserInteraction | UIViewAnimationOptionCurveLinear 
                  animations:^{ imageview.animationImages = images; } 
                  completion:nil]; 
```

但是，当我更改参数值`animateWithDuration:`并且`delay:`我想减慢动画速度时不会发生任何变化，但即使我将这些值更改为 20-30 也不会发生任何变化。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T14:25:34.430

要更改 a 中的图像`UIImageView`，您不必将其放在动画块中。您必须使用`UIImageView`'`animationImages`和`animationDuration`属性，以及可能`- startAnimating`和.`- stopAnimating`的方法`UIImageView`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:52:22.763

将图像数组添加到

> 动画图像

UIImageView 的

> 并给出一些动画持续时间

# regex - 什么是用“###”替换“###”的正则表达式。

> ID：11375751
> 
> 赞同：0
> 
> 时间：2012-07-07T14:19:01.010
> 
> 标签：regex, openoffice-writer

其中### 是一个三位或四位数字，后跟一个空格，我想用相同的数字替换它，后跟一个空格和一个句点。

我在 Open Office 中使用正则表达式搜索和替换，我试过了

```
"[0-9][0-9][0-9] " 
```

找到了我正在寻找的数字

用。。。来代替

```
$& 
```

或者

```
"[0-9][0-9][0-9]. " 
```

都没有工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T14:26:04.863

在大多数正则表达式实现中，“(\D\d{3,4})”选择带有非数字前缀的 3 或 4 位数字（否则它将在 12345 中找到 2345）。这样在 ">1234 <" 中会找到 ">1234 "，并将其放入 $1 或 \1 中。所以：

```
 s/(\D\d{3,4}) /\1\. /g 
```

否则，您可以使用单词边界而不是 \D，\< 或 \b 或 < 取决于方言。

编辑：如果不支持 \d，如（显然）我的命令行 sed，即使我可以发誓相反，使用 [0-9] 替换 \d：

```
 sed -e 's/\([^0-9][0-9]\{3,4\}\) /\1\. /g' 
```

测试：

```
 $ echo "This is 12345 and 1234 and 123 and 12 and 1\. 123\. 1234." \
   | sed -e 's/\([^0-9][0-9]\{3,4\}\) /\1\. /g' 
```

结果：

```
 This is 12345 and 1234\. and 123\. and 12 and 1\. 123\. 1234. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T19:16:54.013

这似乎适用于 OpenOffice 3.3：

搜索：（`([^0-9][0-9]{3,4})`带尾随空格）

替换：（`$1.`带有尾随空格）

不幸的是，它与文本开头的 3 位或 4 位数字不匹配。

# jquery - jQuery按钮与链接相同的功能

> ID：11375752
> 
> 赞同：-2
> 
> 时间：2012-07-07T14:19:00.860
> 
> 标签：jquery

jQuery是

```
$(function() {
    // videoThumb is a css class found in the foreach list class="videoThumb". ytvideo is the holder ID set as div ID
    $(".videoThumb4").on('click').ytplaylist({
        holderId: 'ytvideo4',
        html5: true,
        playerWidth: '520',
        autoPlay: false,
        sliding: false,
        listsliding: true,
        social: true,
        autoHide: false,
        playfirst: 0,
        playOnLoad: false,
        modestbranding: true,
        showInfo: false
    });
}); 
```

主要的可点击链接是这个

```
<a class="videoThumb4" href="http://www.youtube.com/watch?v=' . $yValue['videoid'] . '">
    ' . $yValue['description'] . '
</a> 
```

然后我希望这个链接像下面的按钮。具有相同的价值和功能。这是正确的按钮是

```
<input class="videoThumb4" onclick="ytplaylist();" type="button" name="previewSel" value="Preview" id="previewbut"> 
```

示例链接是[YT](http://cocopop12.site11.com/search/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T14:24:47.317

由于函数的 jQuery 选择器是使用 css 类名编写的，因此您只需为元素提供相同的类名。删除 onlick 事件，因为该功能已在 ready 事件中绑定。

您还缺少按钮元素的结束标记。

```
<input class="videoThumb4" type="button" 
                           name="previewSel" value="Preview" id="previewbut" /> 
```

# ruby-on-rails - Resque 调度程序 - NoMethodError “run_before_delayed_enqueue_hooks”

> ID：11375757
> 
> 赞同：1
> 
> 时间：2012-07-07T14:19:27.953
> 
> 标签：ruby-on-rails

使用 Resque 和 ResqueScheduler 对重复发生的作业进行排队。我在 rails 3.2.6, resque 1.21.0, resque-scheduler 2.0.0h

当调度程序启动时，我收到以下错误，在显示调度选项卡时也遇到问题（在遵循 doco 之后）：

rake resque:scheduler --trace ** 调用 resque:scheduler (first_time) ** 调用 resque:scheduler_setup (first_time) ** 执行 resque:scheduler_setup ** 调用 resque:setup (first_time) ** 调用环境 (first_time) ** 执行环境 ** 执行 resque:setup ** 执行 resque:scheduler 2012-07-07 23:55:56 加载计划 2012-07-07 23:55:56 调度 run_pinpro_copy 2012-07-07 23:55:56 调度 CancelAbandonedOrders 2012 -07-07 23:55:56 加载时间表 2012-07-07 23:56:30 排队测试 (run_database_copy) **2012-07-07 23:56:30 NoMethodError: 未定义的方法 `run_before_delayed_enqueue_hooks' 用于 ResqueScheduler::Plugin:Module**

**resque_scheduler.yml**

```
CancelAbandonedOrders:
  cron: "*/5 * * * *"

run_database_copy:
  cron: "30 * * * * *"
  class: Testing
  queue: testing_queue
  args:
  description: "Copy PinPro views to local tables" 
```

**testing.rb（工人）**

```
class Testing
  @queue = :testing_queue
  def self.perform
    puts "Running Job!"
  end
end 
```

**resque.rb**

```
require 'resque_scheduler'

Resque.schedule = YAML.load_file(File.join(Rails.root, 'config/resque_scheduler.yml')) 
```

**resque_scheduler.rake**

```
# Resque tasks
require 'resque/tasks'
require 'resque_scheduler/tasks'
require 'resque_scheduler/server'

task "resque:setup" => :environment

namespace :resque do
  task :setup do
    require 'resque'
    require 'resque_scheduler'
    require 'resque/scheduler'
    require 'resque_scheduler/server'

    # you probably already have this somewhere
    Resque.redis = 'localhost:6379'
  end
end 
```

任何示例/建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T01:00:29.263

原来我的 Ruby 版本不正确。现在使用 RVM 来管理不同的版本（强烈推荐）。我应该一直在使用 ruby​​ v1.9.3

# jquery - 如何在新窗口中打开 JQuery UI 选项卡

> ID：11375760
> 
> 赞同：0
> 
> 时间：2012-07-07T14:20:29.497
> 
> 标签：jquery, jquery-ui

我正在使用标准的 jquery ui tabs 。我的内容在下面的 div 中。但是我需要其中一个选项卡在新窗口中打开。

```
 <script>
    $(function() {
        $( "#tabs" ).tabs();
    });
    </script>

<div class="demo">

<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Nunc tincidunt</a></li>
        <li><a href="#tabs-2">Proin dolor</a></li>
        <li><a href="http://www.google.com" target="_blank">Google</a></li>
    </ul>
    <div id="tabs-1">
        <p>Proin elit arcu, rutrum commodo, vehicula tempus, commodo a, risus. C </p>
    </div>
    <div id="tabs-2">
        <p>felis, eu ornare leo nisi vel felis. Mauris consectetur tortor et purus.</p>
    </div>
    <div id="tabs-3">

    </div>
</div>

</div><!-- End demo --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T14:27:05.360

根据文档绑定 tabselect 事件。检查正在选择哪些选项卡并执行您需要的操作。

[http://jqueryui.com/demos/tabs/#event-select](http://jqueryui.com/demos/tabs/#event-select)

# php - 按类别排序结果，wordpress

> ID：11375764
> 
> 赞同：1
> 
> 时间：2012-07-07T14:20:40.400
> 
> 标签：php, wordpress

我有一个名为“功能”的类别页面，这一切都很好，但是功能类别中的帖子也属于某种电影类型，这就是我想在实际功能类别模板上排序帖子的内容。

例如

features cat 模板引入了所有功能帖子。

然后我想要做的是按它也属于的任何类型以 alpha 顺序显示

```
features
      action
         post
         post
         post
      comedy
         post
         post
       sci-fi
         post
         post 
```

等等

这就是我目前所拥有的（猫的数量与流派有关=动作=10等）

```
query_posts('cat=10,11,12,13,14,15,16,17,18&orderby=title&order=DESC' );
while (have_posts()) : the_post(); 
```

如何按类型列出所有帖子（将它们分组）？当我在这里使用标题时，我猜它正在使用帖子标题。

如果我把它放在帖子循环中，那就玩吧

```
foreach((get_the_category()) as $childcat) {
    if (cat_is_ancestor_of(4, $childcat)) {
        echo $childcat->cat_name;

    }
} 
```

这会在循环中返回每个帖子的实际流派猫，但我不确定如何将它粘在一起，以便我可以按流派组说明帖子的顺序，我希望我可以在 query_posts 中做到这一点？

任何正确方向的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T22:00:28.320

我会考虑首先对您的子类别进行查询，然后遍历您的子类别来查询每个子类别的帖子。像这样：

```
$categories =  get_categories( array ( 'child_of' => 10, 'orderby' => 'name' ) );
foreach( $categories as $category ){
    // query_posts for category by $category->term_id
    // Display posts for this category
} 
```

这对你想做的事情有用吗？

# ruby-on-rails - 模型的名称包含“缓存”

> ID：11375766
> 
> 赞同：4
> 
> 时间：2012-07-07T14:20:56.583
> 
> 标签：ruby-on-rails, models

在我的代码中，我有一个模型，其名称包含字符串“缓存”。例如：

```
class DataCache < ActiveRecord::Base 
```

表名是`data_caches`. 当我运行时：

```
"data_caches".classify.constantize.new 
```

初始化模型，我收到这样的错误：

```
NameError: uninitialized constant DataCach 
```

为什么这不起作用？我期待“DataCache”，但得到了“DataCach”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T21:21:39.780

看看 Rails 中的[Inflections](http://api.rubyonrails.org/classes/ActiveSupport/Inflector/Inflections.html)类。将以下文本添加到`config/initializers/inflections.rb`类中：

```
ActiveSupport::Inflector.inflections do |inflect|
  inflect.irregular 'cache', 'caches'
end 
```

现在在 rails 控制台试一下这个词：

```
>> "caches".singularize
=> "cache"
>> "cache".pluralize
=> "caches" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T14:25:50.557

在这种情况下，您应该帮助 rails 了解如何将单数转换为复数。尝试`config/initializers/inflections.rb`使用此名称进行更新。我认为它应该可以解决问题。

# ms-access - MS Access 表单的主题效果如何？

> ID：11375770
> 
> 赞同：2
> 
> 时间：2012-07-07T14:21:27.477
> 
> 标签：ms-access, ui-design

我打算在大约 12 个月内为我的用户提供一个基于 Web 的业务管理系统（我们的企业基础设施需要很长时间才能准备好）。

作为垫脚石，正在开发 MS Access 解决方案。

我为我的应用程序定义了一个可用的 web-UI，典型的现代 html5/css 主题。为了简化用户明年向基于 Web 的解决方案的过渡，我想让 MS Access 解决方案看起来尽可能接近 Web-UI。所以我想复制使用的颜色和样式。

但是，我不知道我应该如何瞄准。

任何人都可以提供任何接近现代网页设计水平的 MS Access 表单的链接/示例吗？我想我正在考虑圆角、渐变、“号召性用语”按钮。

我目前不确定我的目标是 2003 年还是 2007 年。我真的怀疑会是 2010 年 :-(

干杯，伊恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T07:01:53.507

Access 2010 支持主题，实际上它们在幕后是基于 CSS 样式表的。因此 Access 2010 中的表单和按钮等可以完全“网页外观”，包括悬停效果。

事实上，您甚至可以导出 SharePoint 网站主题，然后立即将其导入 Access。（我不知道您是否可以直接编辑工作表 - 但您应该可以）。

以下是一些设计表面选项：

![在此处输入图像描述](../Images/6b7aab4233e1e5bf89499086e9cdba57.png)

所以一个 Access 表单现在看起来像这样：

![在此处输入图像描述](../Images/46575c68d42a0ca0b4d3ffef32fe9a7d.png)

请注意左侧的新“网络”导航控件。虽然您可以在该窗体上放置平面简按钮，但您可以如前所述放置圆形按钮、椭圆形按钮，并设置悬停效果和阴影效果。所以你想要多少“网络喜欢”当然是可能的。

虽然这些新的“Web”功能和效果中的大多数用于 Access 2010 中的新 Web 发布功能，但这些功能也适用于客户端表单。在下面的视频中，您会看到这些表单作为“客户端”运行，但在中途，我切换到在 Web 浏览器中 100% 运行表单，它们在该 Web 浏览器中看起来相同。

访问网络上运行的视频： [http ://www.youtube.com/watch?v=AU4mH0jPntI](http://www.youtube.com/watch?v=AU4mH0jPntI)

# cakephp - cakePhp 和多语言

> ID：11375774
> 
> 赞同：0
> 
> 时间：2012-07-07T14:21:53.623
> 
> 标签：cakephp, internationalization

我正在 cakePhp 2.2 中创建一个网站。我对这个框架很陌生。我需要帮助，一步一步如何创建多语言页面。我在 Locale/eng/LC_MESSAGES.default.po 和 fre 中创建了翻译。下一步是什么？在哪里可以设置显示语言？我可以在哪里编写要为用户显示的语言？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:47:25.410

CakePHP Cookbook 中有一个[很好的指南。](http://book.cakephp.org/2.0/en/core-libraries/internationalization-and-localization.html)

> 要为当前用户设置语言，您可以将设置存储在 Session 对象中，如下所示：
> 
> ```
> $this->Session->write('Config.language', 'fre'); 
> ```
> 
> 在控制器的 beforeFilter 中的每个请求开始时，您还应该配置 Configure：
> 
> ```
> class AppController extends Controller {
>     public function beforeFilter() {
>         Configure::write('Config.language', $this->Session->read('Config.language'));
>     }
> } 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T11:44:35.990

**cakePHP 2+ 中的逐步网站国际化或多语言**

只需按照以下步骤操作：

Step 1\. Cakephp 如何捕捉需要多语言的字符串？

第2步：创建pot文件以插入不同语言的字符串。

第 3 步：在 app/Config/routes.php 中添加以下代码

第 4 步：在 app/Config/core.php 中设置默认语言

第六步：在 app/Controller/AppController.php 中添加 helper 和 Cookie 组件

第 7 步：在 app/Controller/AppController.php 中添加一个方法

第 7 步：调用 _setLanguage(); 在 app/Controller/AppController.php 中的 beforeFilter() 下

第 8 步：添加语言的链接：

链接将是 [http://saidul.songzog.com/blog/details/874/step-by-step-website-internationalization-or-multi-language-in-cakephp-2](http://saidul.songzog.com/blog/details/874/step-by-step-website-internationalization-or-multi-language-in-cakephp-2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T14:40:41.367

您必须： 创建文件和文件夹，如下所示：

```
/app/Locale/eng/LC_MESSAGES/default.po (English)
/app/Locale/fre/LC_MESSAGES/default.po (French) 
```

在 default.po 文件中，您需要创建对：

```
msgid "Hello"
msgstr "EN Translation" 
```

这样，每个 Hello 单词都将替换为 EN Translation。

接下来你必须设置你的语言，即

```
Configure::write('Config.language', 'fre'); 
```

如果您想为页面设置语言，请将其粘贴到引导文件中，如果您想在浏览网页期间更改它，请粘贴：

```
$this->Session->write('Config.language', 'fre'); 
```

在控制器中的 beforeFilter 函数中。

# c - c中整数除法运算的方向

> ID：11375775
> 
> 赞同：-1
> 
> 时间：2012-07-07T14:21:58.997
> 
> 标签：c

下面给出的代码的输出是否取决于编译器，或者保证所有编译器都相同？

```
int main()
{ 
    int i=5;
    i=i/3;
    printf("%d\n",i);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T14:26:40.743

是的，您的示例的行为是明确定义的。

但是，在负值的情况下，就不太清楚了。在 C99 之前，整数除法是朝零舍入还是朝负无穷大舍入，由实现定义：

> 如果任一操作数为负数，则`/`运算符的结果是小于代数商的最大整数还是大于代数商的最小整数是实现定义的

C99 要求四舍五入到零：

> 当整数被除法时，`/`运算符的结果是代数商，其中任何小数部分被丢弃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T14:30:39.867

[C99 标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf)，第 6.5.5 节，第 6 段：

> 当整数被除法时， / 运算符的结果是代数商，其中任何小数部分被丢弃。如果商 a/b 是可表示的，则表达式 (a/b)*b + a%b 应等于 a。

该标准还指出，这通常称为“向零截断”。

所以是的，它是明确定义的。

# java - 如何将包含二进制表示的字符串转换为int数组

> ID：11375778
> 
> 赞同：1
> 
> 时间：2012-07-07T14:22:08.147
> 
> 标签：java, string, binary

经过多次计算，我得到了包含一些数据二进制表示的字符串。如何以一致的方式将其转换为整数数组。

我可以每 32 位将其放入数组中，但它似乎不是这个解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T14:25:54.640

解析每个 32 位部分对我来说似乎是一个非常好的解决方案。请注意，最好使用它`Long`来进行解析，以避免前导数字为 1 时出现问题。例如：

```
public static int[] parseBinaryToIntArray(String input) {
    // TODO: Validation
    int[] output = new int[input.length() / 32];
    for (int i = 0; i < output.length; i++) {
    String section = input.substring(i * 32, (i + 1) * 32);
        output[i] = (int) Long.parseLong(section, 2);
    }
    return output;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T16:12:35.970

更正：

```
public static int[] convertIntoIntArray(String message) {
        System.out.println(message.length());
        int[] t = new int[message.length()/32];
        for(int i = 0; i < t.length; i++){
            //t[i] = Integer.parseInt(message.substring(i*32, (i+1)*32),2);
            String section = message.substring(i*32, (i+1)*32);
            t[i] = (int) Long.parseLong(section, 2);
        //  System.out.println(i+"fsa");
        }

        return t;   
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-29T11:13:59.153

简单的例子：

```
String binary = "1001";
int base = 2;
int decimal = Integer.parseInt(binary, base);
System.out.println("Decimal is" + decimal); 
```

这打印：

> 小数是 9

# java - 我如何使用我与其他地方的功能一起构建的 gui？

> ID：11375781
> 
> 赞同：0
> 
> 时间：2012-07-07T14:22:22.537
> 
> 标签：java, swing

您好，我是新来的，我正在制作一个小井字游戏，其中我制作了一个 gui，如下所示：

```
public static void main(String[] args) {

    Frame frame1 =new Frame("TickTacToe");
    frame1.setLayout(null);
    frame1.setBounds(250,150,500,500);
    frame1.setVisible(true);
    frame1.addWindowListener(new WindowAdapter(){
        public void windowClosing(WindowEvent e){
            System.exit(0);
        }
    });

    final Button button11 = new Button("");
    button11.addActionListener(null);

    final Button button12 = new Button("");
    button11.addActionListener(null);

    final Button button13 = new Button("");
    button11.addActionListener(null);

    final Button button21 = new Button("");
    button11.addActionListener(null);

    final Button button22 = new Button("");
    button11.addActionListener(null);

    final Button button23 = new Button("");
    button11.addActionListener(null);

    final Button button31 = new Button("");
    button11.addActionListener(null);

    final Button button32 = new Button("");
    button11.addActionListener(null);

    final Button button33 = new Button("");
    button11.addActionListener(null);

    button11.setBounds(100, 100, 80, 70);
    button12.setBounds(100, 200, 80, 70);
    button13.setBounds(100, 300, 80, 70);
    button21.setBounds(200, 100, 80, 70);
    button22.setBounds(200, 200, 80, 70);
    button23.setBounds(200, 300, 80, 70);
    button31.setBounds(300, 100, 80, 70);
    button32.setBounds(300, 200, 80, 70);
    button33.setBounds(300, 300, 80, 70);

    frame1.add(button11); 
    frame1.add(button12); 
    frame1.add(button13); 
    frame1.add(button21); 
    frame1.add(button22); 
    frame1.add(button23); 
    frame1.add(button31); 
    frame1.add(button32);
    frame1.add(button33); 
} 
```

我想将动作侦听器添加到按钮，但不是在这个 void 理想情况下甚至是不同的类，所以我可以创建一种方法来运行函数循环，例如播放器轮换器，如果它是第一个，它将按钮文本设置为 x o 如果它是其他的，我或多或少知道我需要使用的代码，但我想不出一种方法来使用 anzwhere 的 gui，而不是它自己的 void。我不太清楚我在寻找什么，所以非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T15:19:08.960

首先，这个程序结构非常糟糕。从外观上看，我可以告诉您来自诸如 C 或 Basic 之类的过程编程语言。Java 完全是关于面向对象的架构。Java 可以按程序运行，但它并非如此。我要开始的第一件事是退出 main()。这是一个很好的方法：

```
public class TicTacToe
{
    public TicTacToe()
    {

    }

    public static void main(String args[])
    {
        new TicTacToe();
    }
} 
```

TicTacToe 可能看起来很简单，但它同时发生了很多事情，人们正在点击按钮，所以你需要 ActionListeners，你需要在每次移动后更新屏幕的 UI，你需要检查以确保每次移动都是有效的，您需要在每一步之后检查是否获胜，等等。这在 main 内部几乎是不可能的。

将任何类型的组件直接添加到 JFrame 中通常是一个坏主意。最好将 JPanel 放在 JFrame 中，然后将组件添加到 JPanel。

尝试为您的游戏制作类结构。这是我要做的：

```
TicTacToe.class --> Checks rules, checks for wins and starts and stops game
Player.class (implements ActionListener) --> Listens for each Player's input
Board.class (extends JPanel) --> this will display the components for the game
Computer.class (extends Player) --> if you wanted to create an AI this is where you would do so 
```

如果我是你，我会读一本关于 Java 游戏开发的书或上一堂课。如果您想精通 Java，这是一个很好的起点。你错过了很多重要的知识，即使是做一个简单的任务，比如制作一个井字游戏，你也需要这些知识。

# php - Kohana:: 无限参数路由

> ID：11375783
> 
> 赞同：1
> 
> 时间：2012-07-07T14:22:34.900
> 
> 标签：php, routing, kohana

我想在控制器的操作中使用 url 参数，比如方法参数（比如在 CodeIgniter 中）。我想为**UNLIMITED**参数数量（0、5、10 ...）进行路由。

```
url: http://localhost/controller/action/param1/param2/..../param10... 
```

行动将是：

```
function action_something($param1, $param2, .... $param10) { ... } 
```

可能吗？我有一个简单的应用程序，我想为每种情况都有一个默认路由..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T14:40:01.303

您可以通过在 bootstrap.php 文件中添加“溢出”路由来实现：

```
Route::set('default', '(<controller>(/<action>(/<overflow>)))', array('overflow' => '.*?'))
    ->defaults(array(
        'controller' => 'api',
        'action'     => 'index',
    )); 
```

然后我通常使用这种类来访问各种参数：

```
<?php defined('SYSPATH') or die('No direct script access.');

class UrlParam {

    static public function get($controller, $name) {
        $output = $controller->request->param($name);
        if ($output) return $output;

        $overflow = $controller->request->param("overflow");
        if (!$overflow) return null;

        $exploded = explode("/", $overflow);
        for ($i = 0; $i < count($exploded); $i += 2) {
            $n = $exploded[$i];
            if ($n == $name && $i < count($exploded) - 1) return $exploded[$i + 1];
        }

        return null;
    }

} 
```

**用法：**

然后，如果您有一个 URL，例如`http://example.com/controller/action/param1/value1/param2/value2...`. 您可以从控制器调用`UrlParam::get($this, 'param1')`以获取“param1”的值等。

# python - 如何在Python中拆分数字后显示前导零

> ID：11375790
> 
> 赞同：2
> 
> 时间：2012-07-07T14:23:16.103
> 
> 标签：python, csv, zero

在 Python 3.2 中将数字拆分为前 3 位和后 2 位等部分后，有什么方法可以显示前导零？我的脚本返回没有前导零的数字......

我有一个如下所示的 csv 文件：

```
Name,Code
blackberry,20001
wineberry,02002
rasberry,30000
blueberry,03010 
```

我想要的输出：

```
Name,Code,Code1,Code2
blackberry,20001,200,01
wineberry,02002,020,02
rasberry,30000,300,00   
blueberry,03010,030,10 
```

我的脚本：

```
import csv
all = []
with open('aaa.csv','r') as csvinput:
    with open('bbb.csv', 'w') as csvoutput:
        reader = csv.reader(csvinput,delimiter=',')
        writer = csv.writer(csvoutput,delimiter=",", lineterminator='\n')
        row = next(reader)
        row.append('Code1')
        row.append('Code2')
        all.append(row)
        for row in reader:
            row.append(row[1][0:2])
            row.append(row[1][-2:])
            all.append(row)
        writer.writerows(all)
        print(all) 
```

上面的脚本返回：

```
Name,Code,Code1,Code2
blackberry,20001,200,1
wineberry,02002,20,2
rasberry,30000,300,0    
blueberry,03010,30,10 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T14:53:16.847

`csv.writer`不会将字符串转换为数字类型，因此不会导致您看到的错误。

我希望您在 Excel 中查看您的 csv 文件，它可以将字符串转换为数字。在文本编辑器中查看您的输出，您应该看到前导零确实存在。

此外，正如其他人指出的那样，您的第一片应该是`row[1][0:3]`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T14:44:49.117

我看不出您的代码如何生成此输出。但更正拼写错误，将`for`循环更改为

```
 for row in reader:
        row = [r.strip() for r in row]
        row.append(row[1][0:3])
        row.append(row[1][3:])
        all.append(row) 
```

应该可以工作，不管错误的空格可能会导致行尾出现问题：

```
localhost-2:coding $ more bbb.csv 
Name,Code,Code1,Code2
blackberry,20001,200,01
wineberry,02002,020,02
raspberry,30000,300,00
blueberry,03010,030,10 
```

PS：`all`用作变量名是个坏主意。这是一个非常方便的内置函数的名称。

# jquery - jquery ui可拖动z-index问题

> ID：11375791
> 
> 赞同：1
> 
> 时间：2012-07-07T14:23:16.990
> 
> 标签：jquery, jquery-ui, jquery-plugins

下面是我将表格行绑定为可拖动的代码。然而，拖动的项目出现在拆分器下方 ( [http://methvin.com/splitter/splitter.js](http://methvin.com/splitter/splitter.js) ) 这个问题似乎与`z-index`. 我尝试了多种方法来设置`z-index`拖动项目。但是，这似乎不起作用。该`bindDragAndDrop`方法由鼠标悬停在表格上触发。有人能指出我可能是什么问题吗？

```
function bindDragAndDrop(){

    var table = $('TABLE .dataTable');
        table.find('TR TD.columnClass').bind('mousedown', function() {
            table.disableSelection();
        }).bind('mouseup', function() {
            table.enableSelection();
        }).draggable({
         helper: function(event) {
         return $('<div div="dragDiv" class="drag-table-item"><table></table></div>').find('table').append($(event.target).closest('tr').clone())
 .end().insertAfter(table);
            },
            cursorAt: {
                left: -5,
                bottom: 5
            },
            cursor: 'move',
            distance: 10,
            delay: 100,
            scope: 'cart-item',
            revert: 'invalid'
        });         
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T09:34:56.650

我尝试以多种方式设置 zIndex，但它不起作用。如下所示**appendTo("body")** 解决了这个问题

```
 return $('<div class="drag-table-item"><table></table></div>').find('table').append($(event.target).closest('tr').clone()).end().insertAfter(table).appendTo("body"); 
```

# mysql - TOAD for MySQL 中的事件管理器

> ID：11375796
> 
> 赞同：0
> 
> 时间：2012-07-07T14:24:05.493
> 
> 标签：mysql, events, toad

现在有人如何在 TOAD for MySQL 中查找和查看/浏览现有的调度程序事件，或者如何使用 SQL 查找它们，因为它们实际上是元数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T14:43:02.420

我总是使用[SHOW EVENTS](http://dev.mysql.com/doc/refman/5.5/en/show-events.html)来查看调度程序对给定模式的袖手旁观。

例子：

```
show events in my_schema; 
```

# javascript - 使用 javascript 以 3D 形式旋转文本和图片

> ID：11375799
> 
> 赞同：0
> 
> 时间：2012-07-07T14:24:15.603
> 
> 标签：javascript, text, 3d

我正在寻找一个 3D javascript 框架，它允许

*   放置 2D 文本（字体、颜色、粗体、斜体等）
*   放2D图片
*   在 3D 中旋转文本和图片

我找到了一些 js 的 3D 引擎，但它们不支持 2D 文本..

如果你能阻止我，我将不胜感激。元帅

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T14:39:52.553

[jQuery Transit支持 3D 旋转，](http://ricostacruz.com/jquery.transit/) [TransformJS](http://transformjs.strobeapp.com/)也是如此。

另外，请查看[浏览器对 3D 过渡的支持](http://caniuse.com/#feat=transforms3d)。

# javascript - 对 Node.js 的多个 Ajax 请求超时

> ID：11375800
> 
> 赞同：0
> 
> 时间：2012-07-07T14:24:20.880
> 
> 标签：javascript, jquery, node.js, google-chrome

我有一个非常独特的设置，我想它会对这个问题产生一些影响（我以前从未见过）。

我正在编写一个 Google Chrome 扩展程序，并且我依赖 Node.js 作为我的后端。

当我运行多个 Ajax 请求时，Node.js 需要很长时间才能响应（例如，2.5 秒），一些 Ajax 请求永远不会收到响应并引发错误。

我在我的 Node.js 服务器中设置了一个测试函数，它将在等待 2500 毫秒后以 JSON 对象响应。我已经确认这适用于单个请求。

然后，我尝试在扩展中嵌入 jQuery 并尝试两个请求：

```
 (function(){
               $.ajax({
                  url : url,
                  data : params,
                  type : "POST",
                  success : function(data){
                     alert('success1');
                  },
                  error : function(xmlhttprequest, textstatus, message) {
                     alert('error');

                  }
               });
            })();
            (function(){
               $.ajax({
                  url : url,
                  data : params,
                  type : "POST",
                  success : function(data){
                     alert('success2');
                  },
                  error : function(xmlhttprequest, textstatus, message) {
                     alert('error');

                  }
               });
            })(); 
```

在这种情况下，只调用第二个警报。第一个最终会导致错误（超时）。

我也尝试过不使用 jQuery，如下所示：

```
 var xhr = new XMLHttpRequest();
        xhr.open("POST", url, true);

        xhr.onreadystatechange = function() {
            alert('response1');
        }
        xhr.send();

        var xhr2 = new XMLHttpRequest();
        xhr2.open("POST", url, true);
        xhr2.onreadystatechange = function() {
            alert('response2');
        }
        xhr2.send(); 
```

在这种情况下，两个请求都失败了；我没有收到任何一方的回复。

我还在后台脚本中尝试过这段代码，在自动生成的后台页面上运行。这也失败了（都不成功）。

我猜这在某种程度上与我在这里写的非常小众的案例有关，但在这一点上，我真的站在如何排除故障和继续前进的立场上。有什么想法可以进一步探索这个问题吗？

谢谢！凯文

# eclipse - 在 Eclipse 中找不到使用 Groovy + Cucumber 的 JUnit 测试

> ID：11375805
> 
> 赞同：2
> 
> 时间：2012-07-07T14:25:02.940
> 
> 标签：eclipse, groovy, junit, cucumber

我在 Groovy 中有一个 Cucumber 测试，如下所示

```
import org.junit.runner.RunWith
import cucumber.junit.Cucumber
import cucumber.junit.Cucumber.Options

@RunWith(Cucumber.class)
@Options(features = ["classpath:CarDrive.feature"])
public class FuelCarTest {

}

import cucumber.annotation.en.Given
import cucumber.annotation.en.Then
import cucumber.annotation.en.When

public class FuelCarSteps {

    public FuelCarSteps() {
        println "FuelCarSteps::FuelCarSteps"
    }

    @Given("I have a car")
    def givenCar() {
        println "I have a car"
    }

    @When("^you fill it with 50 litres of fuel")
    def addFuel() {
        println "add fuel"
    }

    @Then("^the tank contains 60 litres")
    def checkBalance() {
        println "TODO: add check here"
    }
} 
```

我可以使用 mvn test 很好地运行测试，但是当我尝试在 Eclipse 中运行它时，我得到了

```
No JUnit tests found 
```

尝试清洁、重建和重新启动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:38:16.540

控制，如果您在 Groovy 代码中有任何错误，例如`Type of expression is statically unknown:`或类似。它们不会像往常一样炫耀错误，而且几乎看不见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:31:50.640

嗨，您需要为 junit 中的每个测试创建运行配置

`package1.subpackege1.testclassname`在运行配置的类输入中提供完整路径（like ）

# c++ - 在 Internet Explorer 上最小化和最大化事件

> ID：11375806
> 
> 赞同：3
> 
> 时间：2012-07-07T14:25:04.003
> 
> 标签：c++, internet-explorer, activex

我有一个嵌入在 IE 中的旧版 ActiveX 组件。现在我想在用户最小化和最大化 IE 窗口时执行一些操作。任何人都可以提供有关如何做到这一点的任何线索吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T17:50:44.827

我不是这个主题的专家。但经过一番研究，我能找到的是，

> 要从 activex 控件接收 Internet Explorer 事件，您必须设置事件接收器，这意味着您必须[`IWebBrowser2`](http://msdn.microsoft.com/en-us/library/aa752127%28v=VS.85%29.aspx) 在加载时获取 Internet Explorer 实现的接口。

[有关处理 Internet Explorer 事件](http://vbyte.com/iReader/Reader.asp?ISBN=0735607818&URI=/HTML/ch07g.htm)的更多信息，请参阅此文档

在`IWebBrowser2`我只能找到`IWebBrowser2::FullScreen`和`IWebBrowser2::TheaterMode`你的要求有些相似的地方。但是，`IWebBrowser2::HWND`您可以使用另一个属性来获取 Internet Explorer 的窗口句柄。

在一个疯狂的想法中，（我不知道它是否适用于 activeX 控件）考虑[使用 hooks](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644959(v=vs.85).aspx)。

还发现：[IE插件开发：在选项卡外捕获键盘输入](http://www.ookii.org/post/ie_addon_development_capturing_keyboard_input_outside_tabs.aspx)

# windows - DefWindowProc WinApi 的行为

> ID：11375812
> 
> 赞同：2
> 
> 时间：2012-07-07T14:25:47.410
> 
> 标签：windows, winapi, wm-paint

有人可以解释为什么使用 DefWindowProc 一切正常，但如果我删除它，字符串“Hello windows”会出现在屏幕上，没有窗口和任何按钮？“UpdateWindow”向窗口过程发送WM_PAINT消息，为什么会显示文本但跳过创建窗口？

```
#include <windows.h>

LRESULT CALLBACK proc1 (HWND, UINT, WPARAM, LPARAM);

int WINAPI WinMain (HINSTANCE hInstance, HINSTANCE hPrevInstance, PSTR szCmdLine, int iCmdShow)
{
static TCHAR szAppName[] = TEXT ("Program");
HWND hwnd1;
MSG msg1;
WNDCLASS wndclass1;

wndclass1.style = CS_HREDRAW | CS_VREDRAW;
wndclass1.lpfnWndProc = proc1;
wndclass1.cbClsExtra = 0;
wndclass1.cbWndExtra = 0;
wndclass1.hInstance = hInstance;
wndclass1.hIcon = LoadIcon (NULL, IDI_APPLICATION);
wndclass1.hCursor = LoadCursor (NULL, IDC_ARROW);
wndclass1.hbrBackground = (HBRUSH) GetStockObject (WHITE_BRUSH);
wndclass1.lpszMenuName = NULL;
wndclass1.lpszClassName = szAppName;

RegisterClass (&wndclass1);

hwnd1 = CreateWindow (  szAppName,
                        TEXT ("My window"),
                        WS_OVERLAPPEDWINDOW,
                        CW_USEDEFAULT,
                        CW_USEDEFAULT,
                        CW_USEDEFAULT,
                        CW_USEDEFAULT,
                        NULL,
                        NULL,
                        hInstance,
                        NULL );
ShowWindow (hwnd1, iCmdShow);
UpdateWindow (hwnd1);
while ( GetMessage(&msg1, NULL, 0, 0) )
{
    TranslateMessage(&msg1);
    DispatchMessage(&msg1);
};
return msg1.wParam;
};

LRESULT CALLBACK proc1 (HWND hwnd1, UINT message, WPARAM wParam, LPARAM lParam)
{
    HDC hdc;
    PAINTSTRUCT ps;
    RECT rect;
 switch (message)
 {
 case WM_CREATE:
    return 0 ;
 case WM_PAINT:
    hdc = BeginPaint (hwnd1, &ps) ;
    GetClientRect (hwnd1, &rect) ;
    DrawText (hdc, TEXT ("Hello windows"), -1, &rect, DT_SINGLELINE | DT_CENTER | DT_VCENTER);
    EndPaint (hwnd1, &ps) ;
    return 0 ;
 case WM_DESTROY:
    PostQuitMessage (0) ;
    return 0 ;
};
 return DefWindowProc (hwnd1, message, wParam, lParam) ;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-07T14:32:03.977

如果您省略`DefWindowProc`，那么您是在说“对于我上面没有处理的所有消息，什么都不做。” 这意味着很多像“请画按钮”这样的消息被当作“什么都不做”来处理。结果：没有按钮。[将所有未处理的消息传递给 DefWindowProc](http://blogs.msdn.com/b/oldnewthing/archive/2006/04/25/583093.aspx)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-07T15:46:51.657

并非所有窗口消息都需要处理。但是，如果您删除 DefWindowProc() 调用，则某些*应该*处理的消息不会得到处理。像 WM_NCPAINT，它绘制窗口框架。和 WM_ERASEBKGND，它绘制窗口背景。DefWindowProc() 知道哪些事情做得很好，在很大程度上由您为窗口创建的 WNDCLASS 和您在 CreateWindowEx() 调用中传递的窗口样式标志提供帮助。

所以当然，删除呼叫，您将看不到框架或背景。还有很多很多其他的事情，一个窗口在没有你帮助的情况下知道如何做。DefWindowProc() 实现了窗口的默认行为。您的窗口过程赋予它非默认行为。

# java - 在字符串或数组中搜索哪个更好

> ID：11375820
> 
> 赞同：-2
> 
> 时间：2012-07-07T14:26:36.533
> 
> 标签：java

我需要存储某些 id，并检查那里是否存在。
我可以使用连接字符串或数组/列表，它们中的哪一个是更好更快的方法。这就是数据的实际组织方式：

*   第一年
    *   第 1 个月
        *   第 1 天
        *   第 2 天
        *   第 3 天
    *   第 2 个月
        *   第 6 天
        *   第 2 天
        *   第 3 天
*   第 2 年
    *   第 3 个月
        *   第 1 天
        *   第 3 天
        *   第 7 天
    *   第 6 个月
        *   第 6 天
        *   第 2 天
        *   第 3 天

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T14:28:53.967

我*肯定会*使用某种形式的集合。如果您只关心包含，您应该使用[`Set<String>`](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html)某种类型的 a（例如[`HashSet<String>`](http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html)or [`LinkedHashSet<String>`](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashSet.html)，除非您有大量的哈希冲突，否则两者都会产生 O(1) 复杂性），但为了上帝的缘故*，不要*使用连接字符串。

您的数据自然不是串联的字符串 - 它是字符串的集合。始终以最自然的表示形式保存您的数据，除非您*确实*有充分的证据表明某些替代形式（例如单个字符串）会给您带来*有意义的*好处。将数据保持在自然表示中几乎总是会导致代码更清晰，更易于使用 - 并且在您发现真正的瓶颈所在*之后更容易优化。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-07T14:28:19.573

创建一个[HashSet](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/HashSet.html)一个使用`contains`方法。String 或 ArrayList 将具有`O(n)`复杂性，而复杂性`HashSet`也将如此`O(1)`。

# c++ - Eclipse CDT Juno - 工具链问题

> ID：11375823
> 
> 赞同：2
> 
> 时间：2012-07-07T14:26:50.587
> 
> 标签：c++, eclipse, eclipse-cdt

我已经安装了 cygwin 和所有需要的编译器，如 gcc、mingw 等。但是当我尝试创建一个 c++ 项目时，我只得到了 GNU 工具链；没有cygwin工具链。当我尝试构建 Helloworld 程序时，出现以下错误。

```
Error 127 occured while runnin autoreconf
make: *** No rule to make target 'all'
symbol 'std' could not be resolved
symbol 'cout' could not be resolved 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T01:17:02.540

创建新项目，选择 Executable，然后清空项目。这将允许您选择对我有用的 MinGW GCC。现在一切都很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T02:38:07.470

要解决 cout 问题，请确保将正确的路径添加到路径和符号包含选项卡。Project->Properties->C/C++ Genearl->Paths and Symbols。我第一次运行eclipse时，自动发现搞砸了，所以我删除并重新开始。

至于 make 问题：我想我能够找出发生了什么。看到这个链接： http: [//www.eclipse.org/forums/index.php/mv/tree/155856](http://www.eclipse.org/forums/index.php/mv/tree/155856)在我禁用项目->自动构建后，重新启动eclipse，错误仍然显示为make，但是二进制文件是构建的美好的。我从视图中删除了错误，它们不会重新出现在构建中。这似乎是一个错误，但我不确定预期的行为应该是什么

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T17:00:11.427

您在创建项目时选择了错误的工具链，因此eclipse找不到一些源文件和工具来编译您的项目。尝试创建新项目并选择正确的tollchain（您可以在新项目选项中取消选中“仅显示支持的工具链”时选择您需要的）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-01T13:03:49.823

我通过将“org.eclipse.cdt.core.win32.x86_5.3.0.201406111759.jar”解压缩到“plugins”文件夹中来解决这个问题，然后删除这个jar，重新启动eclipse，红色和黄色错误完全消失了，只有一些仍然缺少特定的库。

祝你好运！

PS：我的是eclipse LUNA + WIN7（32位）+ CDT（最新）

# .net - 关于发送消息和窗口消息队列

> ID：11375827
> 
> 赞同：0
> 
> 时间：2012-07-07T14:27:15.297
> 
> 标签：.net, windows, multithreading, thread-safety, message-queue

关于发送消息和消息队列，我很困惑。

众所周知，Posting Message 会进入消息队列，消息泵会一一处理队列中的消息。

发送消息将直接转到 Windows 程序。是否有任何发送消息的队列？例如，10个后台线程向UI线程发送消息，UI线程中的消息处理方法需要很长时间才能执行。

如果存在这种发送消息队列，消息会被一一处理？

如果这种消息不存在，我认为任何消息都发送到 UI 线程，消息处理方法应该立即推送到堆栈。正确的？！

# java - java Sphinx中的createRecognizer

> ID：11375836
> 
> 赞同：0
> 
> 时间：2012-07-07T14:28:30.353
> 
> 标签：java, speech-recognition, speech-to-text, sphinx4

当我检查 Oracle 文档中的 javax.Speech.Recognizer 类时，我发现了这个描述 createRecognizer 方法的语句。“创建具有指定所需属性的**识别**器。如果没有具有所需属性的识别器，则该方法返回 null。” **如果没有识别**器，这里是什么意思？我们不是在这里创建一个新的识别器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T15:15:10.847

没有识别器意味着“没有所需属性的识别器”。例如，您可能会请求法语识别器，而实现仅支持英语。然后你会得到空值。

# javascript - 将 JQuery 或 Javascript（不是 coffee.script）代码添加到 Rails 3.2 应用程序？

> ID：11375843
> 
> 赞同：9
> 
> 时间：2012-07-07T14:29:19.963
> 
> 标签：javascript, jquery, ruby-on-rails-3.2

我刚刚完成了[Code School](http://www.codeschool.com/)关于 JQuery 的入门课程[jQuery Air: First Flight](http://www.codeschool.com/courses/jquery-air-first-flight)。这是学习 jQuery 基础知识的好方法，当我完成后，我对在我的新的小 rails 3.2 应用程序中添加一些 jQuery 感到非常兴奋。但是，如何实现这一点并不明显。

默认情况下，rails 3.2 带有 jquery-rails 和 coffee-rails gems。新的 3.2 应用程序都以咖啡脚本的形式设置接受 javascript 和 jquery。虽然我很快就会学习咖啡脚本，但现在我所拥有的只是 jquery。

更具体地说，我应该添加类似的内容：

```
<script type="text/javasript" src= "https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

进入我的`app/views/layouts/application.html.erb`文件的头部，或者是 jquery-rails gem 和

```
<%= javascript_include_tag "application" %> 
```

已经在那了？

在我的应用程序中，我应该将 jQuery 代码放在哪里？对于我生成的每个新控制器，rails 3.2 都会在目录中创建一个不错`[new_controller].js.coffee`的文件`app/assets/javascripts/`。`.coffee`如果我把它放在那个文件中，Javascript 就不起作用。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-07T14:38:11.827

[在进行了试验并与Code School](http://www.codeschool.com/)的好人通信后，我想出了以下答案，其他人可能会觉得有用：

Rails 3.2 应用程序已准备好接受咖啡脚本。事实上，每个新控制器都会自动生成一个 [new_controller].js.coffee 文件，准备好接受一个新的咖啡脚本。虽然我很快就会接触到coffeescript，刚刚完成[JQuery Air: First Flight](http://www.codeschool.com/courses/jquery-air-first-flight)，我只知道jQuery。

以下是使用默认资产管道设置将 jQuery 添加到 Rails 3.2 应用程序需要做的事情：

1) 放入`javascript_include_tag(:application)`文件中 `app/views/layouts/application.html.erb`。Code School 的 Adam Fortuna 指出，通常将该行放在页脚中，这听起来是个好建议。这可能允许页面的其余部分在 javascript 之前加载。

2）在“app/assets/javascripts/”目录中创建一个后缀`.js`为user.js的新文件。注意：不要将您的 jQuery 文件命名为与自动创建的`.js.coffee`文件相同的名称，否则它不会被读取，可能是因为只有咖啡脚本文件才会被读取。

3) 将您的 jQuery javascript 添加到该文件中，让您心满意足！它已经是 3.2 应用程序的一部分，包含在`jquery-rails`gem 中。

如果其他人对在 rails 3.2 应用程序中使用 jquery 和 javascript 而不是咖啡脚本有深入了解，请添加。也就是说，我的下一步是学习咖啡脚本！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T14:33:40.447

你不需要做任何事情。默认情况下，Rails 会为您提供 jquery。如果您的文件扩展名不是咖啡，那么您将不需要使用咖啡脚本。

您可以阅读[本文](http://guides.rubyonrails.org/asset_pipeline.html)以更好地了解魔术。

如果你必须添加你自己的，你可以这样写：

```
<%= javascript_include_tag "http://example.com/main.js" %> 
```

阅读[本文](http://guides.rubyonrails.org/layouts_and_rendering.html)以了解 javascript_include_tag 的工作原理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T14:34:03.490

确保这是 application.js 或 application.js.coffee 的顶部，如果你安装了gem `//= require jquery`，你应该很好。`jquery-rails`

# lwuit - 代号一构建失败

> ID：11375844
> 
> 赞同：0
> 
> 时间：2012-07-07T14:29:20.437
> 
> 标签：lwuit, codenameone

我正在尝试将我的 lwuit 应用程序移植到[codenameone](http://www.codenameone.com)。

我在应用程序中使用了一个 json 包。（org.json.me）。这个包实际上是 json jar 的一部分，包含操作 json 文件的类。

当我使用 LWUIT 构建 J2ME 时，该应用程序运行良好。

在代号 one 模拟器中，该应用程序也可以正常运行。

当我尝试通过右键单击项目并选择“发送 J2ME 构建”来将 J2ME 构建发送到服务器时，我的应用程序的构建过程会崩溃并出现一些警告。

```
Executing: javac -source 1.2 -target 1.2 -classpath C:\Users\Shai\AppData\Local\Temp\build925171746515355215xxx\tmpclasses;C:\Users\Shai\Desktop\j2me\midpapis.jar -d C:\Users\Shai\AppData\Local\Temp\build925171746515355215xxx\tmpclasses C:\Users\Shai\AppData\Local\Temp\build925171746515355215xxx\tmpsrc\GREStub.java Executing: java -jar C:\Users\Shai\Desktop\j2me\proguard.jar -injars . -libraryjars C:\Users\Shai\Desktop\j2me\midpapis.jar -outjars C:\Users\Shai\AppData\Local\Temp\build925171746515355215xxx\result\GRE.jar -target 1.3 -keep public class ** extends javax.microedition.midlet.MIDlet { public *; } -defaultpackage '' -printmapping C:\Users\Shai\AppData\Local\Temp\build925171746515355215xxx\result\obfuscation_mapping.txt -overloadaggressively -dontusemixedcaseclassnames -useuniqueclassmembernames -dontoptimize ProGuard, version 4.7
Reading program directory [C:\Users\Shai\AppData\Local\Temp\build925171746515355215xxx\tmpclasses]
Reading library jar [C:\Users\Shai\Desktop\j2me\midpapis.jar]
Warning: com.mycompany.myapp.GRE: can't find referenced class org.json.me.JSONObject
Warning: com.mycompany.myapp.GRE: can't find referenced class org.json.me.JSONObject
Warning: com.mycompany.myapp.GRE: can't find referenced class org.json.me.JSONObject
Warning: com.mycompany.myapp.GRE: can't find referenced class org.json.me.JSONObject
Warning: com.mycompany.myapp.GRE: can't find referenced class org.json.me.JSONObject
Warning: com.mycompany.myapp.GRE$8: can't find referenced class org.json.me.JSONObject
Warning: com.mycompany.myapp.GRE$8: can't find referenced class org.json.me.JSONObject
Warning: com.mycompany.myapp.Verbal: can't find referenced class org.json.me.JSONException
Warning: com.mycompany.myapp.Verbal: can't find referenced class org.json.me.JSONObject
Warning: com.mycompany.myapp.Verbal: can't find referenced class org.json.me.JSONObject
Warning: com.mycompany.myapp.Verbal: can't find referenced class org.json.me.JSONObject
Warning: com.mycompany.myapp.Verbal: can't find referenced class org.json.me.JSONObject
Warning: com.mycompany.myapp.Verbal: can't find referenced class org.json.me.JSONObject
Warning: com.mycompany.myapp.Verbal: can't find referenced class org.json.me.JSONObject
Warning: com.mycompany.myapp.Verbal: can't find referenced class org.json.me.JSONObject
Warning: com.mycompany.myapp.Verbal: can't find referenced class org.json.me.JSONObject
Warning: com.mycompany.myapp.Verbal: can't find referenced class org.json.me.JSONObject
Warning: com.mycompany.myapp.Verbal: can't find referenced class org.json.me.JSONObject
Warning: com.mycompany.myapp.Verbal$4: can't find referenced class org.json.me.JSONObject
Warning: com.mycompany.myapp.Verbal$4: can't find referenced class org.json.me.JSONObject
Warning: com.mycompany.myapp.Verbal$4: can't find referenced class org.json.me.JSONObject
Warning: com.mycompany.myapp.Verbal$4: can't find referenced class org.json.me.JSONObject
Warning: com.mycompany.myapp.Verbal$8: can't find referenced class org.json.me.JSONObject
Warning: com.mycompany.myapp.Verbal$8: can't find referenced class org.json.me.JSONObject
Warning: com.mycompany.myapp.Verbal$9: can't find referenced class org.json.me.JSONObject
Warning: com.mycompany.myapp.Verbal$9: can't find referenced class org.json.me.JSONObject
Note: com.codename1.impl.midp.GameCanvasImplementation: can't find dynamically referenced class com.siemens.mp.game.Light
Note: com.codename1.impl.midp.GameCanvasImplementation: can't find dynamically referenced class com.motorola.phonebook.PhoneBookRecord
Note: com.codename1.impl.midp.GameCanvasImplementation: can't find dynamically referenced class com.nokia.mid.ui.FullCanvas
Note: com.codename1.impl.midp.GameCanvasImplementation: can't find dynamically referenced class net.rim.device.api.system.Application
Note: com.codename1.impl.midp.GameCanvasImplementation: can't find dynamically referenced class com.mot.iden.util.Base64
Note: com.codename1.impl.midp.GameCanvasImplementation: can't find dynamically referenced class mmpp.media.MediaPlayer
Note: there were 6 unresolved dynamic references to classes or interfaces.
      You should check if you need to specify additional program jars.
Warning: there were 26 unresolved references to classes or interfaces.
         You may need to specify additional library jars (using '-libraryjars').
Error: Please correct the above warnings first. 
```

现在，我觉得服务器没有找到我的 json 包。但我需要这个构建成功。我在我的应用程序中经常使用这个 jar 的类。现在我不想迁移到内置的 json 解析器，因为我必须更改很多我希望严格避免的代码。

1）我能做些什么来解决这个问题？

2）我们不能在代号一中使用第三方罐子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T17:20:31.103

您不能在 Codename One 中更改库类路径。一切都必须是源目录的一部分才能正常工作。

Codename One 有自己的 JSON 解析器，请阅读 Codename One 开发人员指南。

# tinymce - Tinymce 自动拼写检查，无需单击按钮

> ID：11375845
> 
> 赞同：1
> 
> 时间：2012-07-07T14:29:31.583
> 
> 标签：tinymce

是否可以设置默认打开默认拼写检查器。无需每次都单击工具栏中的按钮？

我在浏览器中使用默认的浏览器拼写检查功能。

```
setup: function (ed) {
    ed.addCommand('mceSpellCheckRuntime', function() {
        t = ed.plugins.spellchecker;
        if (t.mceSpellCheckRuntimeTimer) {
          window.clearTimeout(t.mceSpellCheckRuntimeTimer);
        }
        t.mceSpellCheckRuntimeTimer = window.setTimeout(function() {
          t._done();
          t._sendRPC('checkWords', [t.selectedLang, t._getWords()], function(r) {
            if (r.length > 0) {
              t.active = 1;
              t._markWords(r);
              ed.nodeChanged();
            }
         });
       }, 3000); //3 seconds
    });

    ed.onInit.add(function(ed){
        ed.pasteAsPlainText = true;

        ed.execCommand('mceSpellCheckRuntime');
    });

    ed.onKeyUp.add(function(ed, e) {
        ed.execCommand('mceSpellCheckRuntime');
    });
}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-03T11:08:22.087

它的安静可能........ :)

试试下面的代码......

```
ed.onInit.add(function(ed, e) {
  setTimeout(function () {
  tinyMCE.activeEditor.controlManager.setActive('spellchecker', true);  tinymce.execCommand('mceSpellCheck', true);
 }, 1);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T07:39:52.297

不，这是不可能的，因为在 tinymce 中使用拼写检查器有很多可能性。然而，用户可以定义拼写检查器应该检查哪些事件（这就是你已经做过的）。

# c# - C# 组织变量？

> ID：11375852
> 
> 赞同：-2
> 
> 时间：2012-07-07T14:30:29.253
> 
> 标签：c#

在 C# 中，有没有办法制作类似于仅在创建对象的新实例时才创建的结构？这是一个例子。我希望人们能够分配事件，问题是有很多事件要分配，而且它们通常具有相似的功能，只是针对不同的对象。例如，左键按下事件、右键按下事件等。我以为我可以用结构组织所有这些，但是当我发现那些被认为是“静态”的结构并且无法访问非-静态成员。是否有任何结构可以让我在 C# 中执行此操作。

（最终结果应该让我创建一个新对象，并通过这些结构分配给这个对象事件）

```
MouseObject mouse  = new MouseObject();

mouse.Left.PressedEvent += somemethod(); 
```

在此示例中，Left 不能是结构，因为它用于非静态实例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T14:33:59.287

为什么不使用另一个类？

```
class MouseButton
{
    public SomeEvent PressedEvent;
}

class MouseObject
{
    public MouseButton Left { get; }
    public MouseButton Right { get; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T14:36:06.280

[可变结构是邪恶的](https://stackoverflow.com/questions/441309/why-are-mutable-structs-evil)。如果你使用 struct 来制作它，如下所示，它会运行，但`PressedEvent`永远不会得到我的处理程序，大概是因为我正在修改的 struct 不是真正在`MouseObject`. 去上课，就像@japreiss 的解决方案一样。

```
struct MouseButton
{
    internal void OnPressed()
    {
        if (PressedEvent != null)
            PressedEvent(this, EventArgs.Empty);
    }
    public event EventHandler PressedEvent;
    public event EventHandler ReleasedEvent;
}
class MouseObject
{
    public MouseButton Left { get; private set; }
    public MouseButton Right { get; private set; }
    public void OnLeftPressed()
    {
        Left.OnPressed();
    }
}
static void Main(string[] args)
{
    var m = new MouseObject();
    m.Left.PressedEvent += (s, e) => Console.WriteLine("pressed");
    m.OnLeftPressed();
} 
```

这打印`it was null!`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T14:39:57.543

我猜这是您使用的代码。

```
public class MouseObject
{
    public struct Left
    {
        public event EventHandler PressedEvent;
    }
} 
```

在这种情况下，`Left`不是 MouseObject 的成员。它只是另一种类型。这种封装的行为很像命名空间。

你可能想要的是这样的：

```
public class MouseObject
{
    public MouseButton Left { get; set; }

    // Left still needs to be intialized, preferably in the constructor
}

public class MouseButton
{
    public event EventHandler PressedEvent;
} 
```

# php - 使用 Php ( Curl ) 获取 URL 响应

> ID：11375856
> 
> 赞同：-1
> 
> 时间：2012-07-07T14:31:31.527
> 
> 标签：php, curl

我有一个 URL `http://www.example.com?auth_key=VVAf3spUN3ZETRH0kVPg1`，当我正常打开此 URL 或使用 php 进行标头位置时，它会将我重定向到相同的 URL，但`$_GET`附加了一个值，它变为

`http://www.example.com?auth_key=VVAf3spUN3ZETRH0kVPg1&&auth_token=OTdZN36QbPNo`，然后我使用 . 访问它的值`$_GET['auth_token']`。

有没有办法使用 cURL 或 PHP 中的任何其他方法向第一个 URL 发出请求，然后将`$_GET['auth_token']`值作为响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T14:43:17.307

使用带有 的 cURL `CURLOPT_RETURNTRANSFER`，您可以设置[`CURLOPT_FOLLOWLOCATION`](http://it.php.net/manual/en/function.curl-setopt.php)为 true，但如果`safe_mode`或`open_basedir`已启用则不能。不过，如果需要，您可以在同一手册页上找到克服此问题的[功能。](http://it.php.net/manual/en/function.curl-setopt.php#102121)您应该会在输出字符串中`CURLOPT_HEADER`看到重定向标头。`Location: newURL`您可以从中提取参数，例如：

```
list($dummy, $location) = explode(':', $location_line, 2);
$parts = parse_url(trim($location));
if (isset($parts['query'])) {
   parse_str($parts['query'], $param_map);
   if (isset($param_map['auth_token'])) {
      ... 
```

# objective-c - 如何将 cocoa/xcode 中的文本/数据保存到文件中？

> ID：11375857
> 
> 赞同：-1
> 
> 时间：2012-07-07T14:31:42.497
> 
> 标签：objective-c, ios, xcode, cocoa-touch, file-io

我很抱歉这个明显的问题，但是在将数据写入文件时我应该注意什么，因为我的程序可以在程序运行时读取它刚刚写入的数据，但是当我停止它的那一刻，文件变空

尝试使用 NSFileHandle，以便用它写入数据，然后关闭文件，没有帮助......目前，我正在使用：

```
NSData *encodedObject = [NSKeyedArchiver archivedDataWithRootObject:newArray];
[encodedObject writeToFile:string atomically:YES]; 
```

而且无论我做什么，我都无法让最简单的 NSString 永久保留在文件中

我该怎么办？

感谢@LetzFlow，但它还没有解决它。

现在，我正在使用：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

string = [NSString stringWithFormat:@"%d.rtf",fileName];    
NSString *file = [documentsDirectory stringByAppendingPathComponent:string];

//NSFileHandle *fileHandle = [NSFileHandle fileHandleForWritingAtPath:file];
NSData *encodedObject = [NSKeyedArchiver archivedDataWithRootObject:newArray];

[encodedObject writeToFile:file atomically:YES];
//[fileHandle writeData:encodedObject];
//[fileHandle closeFile];
NSLog(@"%@",[NSString stringWithContentsOfFile:file encoding:NSStringEncodingConversionAllowLossy error:nil]); 
```

序列化一个对象数组，并且 NSLog 显示一个有效的数组。然而，当我稍后查看文件时，或者尝试反序列化数组时（像这样）：

```
NSString *stringX = [NSString stringWithFormat:@"%d.rtf",fileName];
NSData *encodedObjectX = [NSData dataWithContentsOfFile:stringX];
NSArray *newArrayX = [NSKeyedUnarchiver unarchiveObjectWithData:encodedObjectX];
TurnigButton *button = [[newArrayX objectAtIndex:1] objectAtIndex:5];
NSLog(@"%d", button.idNum); 
```

它只是打印（空）。（当他们在一次运行中一个接一个地执行时，它反序列化就好了）

我很感激帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T14:38:04.683

问题是你在哪里写你的文件？因为您不允许在 iOS 中在整个系统中写入文件。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0]; 
```

文档目录通常是您可以写入文件的地方，因此您可能想尝试一下。

# javascript - 附加不受 javascript 影响的 jQuery 值

> ID：11375858
> 
> 赞同：2
> 
> 时间：2012-07-07T14:31:53.057
> 
> 标签：javascript, jquery, html, css

我正在通过 jQuery 将值附加到 div 中，但我已经意识到附加的内容不受我的 javascript 函数的影响。

```
$(".div").append("<input type='text' class='textForm' placement='Value' />"); 
```

我在我的 javascript 代码中设置的是它采用任何类“textForm”的属性放置并使其成为一个值。但是我意识到，一旦附加了一个值，它就不会受到我的 javascript 的影响。有关如何解决此问题的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T14:36:53.287

如果您当前正在使用

```
$(".textForm").click(){} 
```

那么现在使用

```
$(document).on("click",".textForm",function(){//Dtuff here}) 
```

这会将 附加`.on("click")`到`document`对象上，因此它将在所有存在的元素以及与`.textForm`选择器匹配的所有创建的元素上启用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T14:37:47.157

我猜你有一些事件绑定到一些元素，比如在 append 之后不起作用。像这样的东西。

```
$(function(){
    $(".someClass").click(function(){
       //dome some thing
    });
}); 
```

如果您希望在新注入的（通过 append /jquery ajax 等动态添加的）DOM 元素上使用相同的功能，您应该考虑使用 jquery [`on`](http://api.jquery.com/on/)。所以你的代码应该这样改变

```
$(function(){
    $(document).on("click",".someClass",function(){
       //dome some thing
    });
}); 
```

`on`将适用于当前和未来的元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T14:38:48.733

我不确定我是否理解您为什么要将值从放置属性复制到输入值中，但我可以提供这个建议来让您的表单字段出现。

```
$("div").each(function() {
    $(this).append($("<input type='text' class='textForm' placement='Value' />"))
}); 
```

我假设你想通过标签名而不是类名来识别你的 div。如果是这种情况，您的 jQuery 选择器将需要是“div”，而不是“.div”。此外，您需要将 HTML 包装在 $() 中以生成 DOM 元素。

# shell - 在shell脚本中执行kill命令后没有执行命令

> ID：11375861
> 
> 赞同：1
> 
> 时间：2012-07-07T14:32:34.600
> 
> 标签：shell, signals, kill

这是我的shell脚本：

```
#!/bin/bash
PIDS=$(ps -e | grep $1 |grep -v grep| awk '{print $1}')
kill -s SIGINT $PIDS
echo "Done sendings signal" 
```

我将进程的名称作为命令行参数传递。
echo 命令没有被执行，尽管目标进程实际上正在接收 SIGINT 信号并退出。

有什么建议么？

**更新：**
我将代码更改为：

```
#!/bin/bash
PIDS=$(ps -e |grep $1 | grep -v grep | awk '{print $1}'|grep -v $$)
echo $PIDS
kill -s SIGINT $PIDS
echo "Done sendings signal"
echo "The current process is $$" 
```

现在我注意到一件奇怪的事情：
脚本正在运行，但没有达到预期。在脚本外部的命令行中执行以下命令
`ps -e|grep process-name|grep -v grep|awk '{print $1}'|grep -v $$`
会给出进程名称的 pid，但是当我在 shell 脚本中执行相同的命令时，将其分配给变量 PIDS，然后回显 PIDS，然后除了进程的 pid 之外，它还会显示一个 pid-姓名。因此，当 kill 命令执行时，它会给出一个错误，即第二个 pid 的进程不存在。它确实与终端中的剩余句子相呼应。有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T14:40:37.000

实际上只有几种可能性。假设你只是从命令行运行它，你*应该*看到消息......当然，除非你正在做的事情将你的 shell 进程的 PID 放在 PIDS 中，在这种情况下，kill 会杀死 (sub ) shell 在你点击回声之前运行你的命令。

建议：在调用 kill 之前 echo $PIDS 看看有什么。事实上，我很想注释掉 kill 并尝试该命令，看看会发生什么。

```
#!/bin/bash
PIDS=$(ps -e | grep $1 |grep -v grep| awk '{print $1}')
echo $PIDS
# kill -s SIGINT $PIDS
echo "Done sendings signal" 
```

当然，您可以随时运行脚本`bash -x`来查看所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T14:41:07.800

您的脚本有效。我可以看到未执行回显的唯一原因是 $1 的某些值和脚本文件名结合在一起，因此您的脚本 PID 也被收集，从而使脚本自杀。

PIDS 行产生一个运行 ps、grep 和另一个 grep 的进程——所以你不会在 PIDS 中找到运行 grep 的进程，但是父进程本身呢？

尝试：

```
#!/bin/bash
PIDS=$(ps -e | grep $1 |grep -v grep | awk '{print $1}' | grep -v "^$$\$" )
kill -s SIGINT $PIDS
echo "Done sendings signal" 
```

或使用合适的安全 greps 一个接一个地运行管道。

编辑：很明显，“$1”的选择太多了。所以我会像这样重写脚本：

```
#!/bin/bash
# Gather the output of "ps -e". This will also gather the PIDs of this
# process and of ps process and its subshell.
PSS=$( ps -e )
# Extract PIDs, excluding this one PID and excluding a process called "ps".
# Don't need to expunge 'grep' since no grep was running when getting PSS.
PIDS=$( echo "$PSS" | grep -v "\<ps\>" | grep "$1" | awk '{print $1}' | grep -v "^$$\$" )
if [ -n "$PIDS" ]; then
    kill -s SIGINT $PIDS
else
    echo "No process found matching $1"
fi
echo "Done sending signal." 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T11:46:12.860

`ps -e`等同于`ps -A`并选择所有进程（参见[http://linux.die.net/man/1/ps](http://linux.die.net/man/1/ps)），即`ps -e`显示“有关其他用户进程的信息，包括那些没有控制终端的进程”（Mac OS X 的 man page ps）。这意味着您还将杀死`$$`您的 shell 进程的 PID ( )，正如 Charlie Martin 已经指出的那样，因为您还将 grep 如下`ps -e`所示的命令输出行：

`67988 ttys000 0:00.00 /bin/bash ./killpids sleep`

只需将 的输出记录`ps -e`到文件中即可查看您的脚本是否自杀：

`./killpids sleep 2>err.log`

```
#!/bin/bash
# cat killpids

echo $$

for n in {1..10}; do
   sleep 5000 &
done

sleep 1

unset PIDS
PIDS="$(ps -e | tee /dev/stderr | grep "$1" | grep -v grep | awk '{print $1}')"
#PIDS="$(ps -www -U $USER -o pid,uid,comm | tee /dev/stderr | grep "$1" | grep -v grep | awk '{print $1}')"

wc -l <<<"$PIDS"

#kill -s SIGINT $PIDS
echo kill -s TERM $PIDS
kill -s TERM $PIDS

echo "Done sendings signal" 
```

# c - 将图像的一部分写入文件

> ID：11375862
> 
> 赞同：0
> 
> 时间：2012-07-07T14:32:55.280
> 
> 标签：c, opencv

虽然我可以将整个图像写入文件

```
cvSaveImage("image.png", img); 
```

如何仅将正在处理的图像中的给定矩形写入文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T14:37:25.277

有`Mat`构造函数：

```
Mat(const Mat& m, const Rect& roi); 
```

所以就用吧！

或者，如果您使用`c`(not `c++`) 界面，则必须设置 ROI（感兴趣区域）：

[http://nashruddin.com/OpenCV_Region_of_Interest_(ROI)/](http://nashruddin.com/OpenCV_Region_of_Interest_(ROI)/)

您的代码应如下所示：

```
cvSetImageROI(img, rect);//rect is a ROI
cvSaveImage("image.png", img); 
```

如果您想再次使用完整图像，则必须重置 ROI：

```
cvResetImageROI( IplImage* img ) 
```

# python - PDFMINER tool pdf2txt grabbling data order

> ID：11375876
> 
> 赞同：1
> 
> 时间：2012-07-07T14:34:29.310
> 
> 标签：python

I want to extract data from pdf files. I'm using pdfminer tool pdf2txt to convert pdf into plain text. But The text file produced has messed up the order of data( wherever table encountered and after it also). I then tried cnverting pdf to html but, alas, same results. I am new to python... and also I couldn't understand the extensive working of pdfminer library. Is there any way to preserve the order of data ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T00:32:47.987

Try running the script with these additional args: -M 30 -W .95 -L .03

I have had the same problem as you described, and this improved the output a lot. However, I get much better results with pdftotext.exe, part of xpdf. Download it here:

[http://www.foolabs.com/xpdf/download.html](http://www.foolabs.com/xpdf/download.html)

Mike

# algorithm - 寻找分布式算法来分配一些对象

> ID：11375879
> 
> 赞同：3
> 
> 时间：2012-07-07T14:34:55.023
> 
> 标签：algorithm, computer-science, implementation, distribution, distributed-computing

我正在寻找一种算法来解决以下问题：

有`n`能够通过多播进行通信的软件组件。此外，还有一个带有`m`对象的池。每个 sw 组件都知道该池包含什么。对象具有不同的值。根据我想将对象分配给 sw 组件的值。这意味着：必须首选具有较大值的对象，必须忽略具有较低值的对象（例如，当所有 sw 组件不能获取更多对象时）。

非常重要的是，没有对象被分发超过一次。当一个对象被分配给一个 sw 组件时，它不能被分配给另一个 sw 组件。

此外，我想将整个事情实现为分布式算法，这意味着没有执行该分布的中央单元。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T17:39:28.863

1.  一种解决方案是实现互斥算法（一个非常简单的算法是面包店算法），每个 sw 在轮到它时获取最高的对象。（这就像写入文件的互斥）
2.  另一种将涉及节点之间的大量通信。让我们假设 N>=M 的一般情况。假设每个 sw 采用 n/m 个组件，然后他采用最高值并将其余的 x 个组件多播到 x sw，但附加值是这些组件*casted 的最大值。然后，接收 sw 将查看它们的值是否大于接收的值，并将交换它并从列表中删除该值，但插入旧值。然后它将计算出最大值的组件转换为相同的 x sw 组件。这个想法是 sw 的集合 X 将相互通信，直到每个节点都有不同的值。您将拥有一些这样的 X 组。当然，这个算法必须改进，所以每个 sw 都有不同的值，并证明这会发生，这样你就可以确定了。

但是你想要和想法，所以我给了你 2。希望它有帮助。该算法的实现将在 OpenMPI 中（使用 C 或 C++）。至少我在 OpenMPI 中实现了我的分布式算法（和 Lam MPI，但现在它已经过时了）。

# youtube - YouTube - 如何确定计划播放哪些广告

> ID：11375881
> 
> 赞同：0
> 
> 时间：2012-07-07T14:35:08.953
> 
> 标签：youtube, youtube-api

有没有办法从任何特定的 youtube 请求或 URI 确定计划播放哪些广告（以及有关这些广告的任何信息）？

TYIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T21:34:43.837

不，不怕。由于广告是按用户和内容定位的（根据要求），因此如果 Google 允许访问系统，您将无法获得任何非赞助渠道的定位数据。

# html - 跨源视频无法在 Chrome 中加载

> ID：11375883
> 
> 赞同：5
> 
> 时间：2012-07-07T14:35:28.477
> 
> 标签：html, google-chrome, cors

我正在尝试`crossorigin`在 Chrome（版本 20.0.1132.47 m）中使用属性播放我的视频。它甚至不加载。网络面板显示`OPTIONS`（所谓的“预检”）请求由于某种原因被浏览器中止。它在没有该`crossorigin`属性的情况下工作。Firefox 加载并成功播放。我将不胜感激任何建议。

```
 <video
    id='vid'
    autoplay
    crossorigin
    src='http://videos-cdn.mozilla.net/serv/mozhacks/demos/resources/immersivevideo/dubai.r.webm'>
</video>
```

`[http://jsfiddle.net/ZVgr2/](http://jsfiddle.net/ZVgr2/)`

 `* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T03:14:05.513

造成这种情况的原因是缺少与请求标头`Access-Control-Allow-Headers`中传递的列表匹配的 HTTP 标头列表的响应标`Access-Control-Request-Headers`头。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-27T12:47:20.160

`crossorigin`在设置为`"anonymous"`这样的视频标签中：

```
 <video crossorigin="anonymous"></video> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-24T21:07:44.893

如果这对其他人有帮助，我在修复源文件上的 CORS 设置后遇到了同样的问题。原来 Chrome 正在缓存 CORS 设置以及文件，所以我必须清除缓存然后它才能工作。`

# c - 在 C (beagleboard-xm) 中读取端口 (GPIO) 值

> ID：11375884
> 
> 赞同：2
> 
> 时间：2012-07-07T14:35:39.620
> 
> 标签：c, beagleboard, gpio

我有一个运行 ubuntu 12.04 的嵌入式板（beagleboard-xm）。我需要连续读取一个 GPIO 以查看端口的值是否发生变化。我的代码如下：

```
#include <string.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

FILE *fp;

int main(void)
{
    //linux equivalent code "echo 139 > export" to export the port
    if ((fp = fopen("/sys/class/gpio/export", "w")) == NULL){
            printf("Cannot open export file.\n");
            exit(1);
        }
        fprintf( fp, "%d", 139 );
        fclose(fp);
      //  linux equivalent code "echo low > direction" to set the port as an input 
        if ((fp = fopen("/sys/class/gpio/gpio139/direction", "rb+")) == NULL){
            printf("Cannot open direction file.\n");
            exit(1);
        }
        fprintf(fp, "low");
        fclose(fp);

       // **here comes where I have the problem, reading the value**
        int value2;
        while(1){
        value2= system("cat /sys/class/gpio/gpio139/value");
        printf("value is: %d\n", value2);
        }
    return 0;
} 
```

上面的代码连续读取端口（`0`默认情况下），但是，当我将端口更改为 时`1`，`system`调用输出正确的值，但`printf`仍然打印`0`为输出。有什么问题`value2`不存储`system()`输出的值。

如果我使用下面的代码而不是`while`上面的循环，则会收到有关打开`value`文件的错误（无法打开值文件。），如果我将`fopen`行放在`while`循环之外，它不会显示`value`文件中的更改。

```
char buffer[10];
while(1){
    if ((fp = fopen("/sys/class/gpio/gpio139/value", "rb")) == NULL){
            printf("Cannot open value file.\n");
            exit(1);
        }
    fread(buffer, sizeof(char), sizeof(buffer)-1, fp);
    int value = atoi(buffer);
    printf("value: %d\n", value);

    } 
```

我的问题：我需要如何修复代码？或者我应该如何阅读`value`文件？作为我想知道的附加信息：例如导出端口有什么区别`system("echo 139 > /sys/class/gpio/export")`以及`fp = fopen("/sys/class/gpio/export","w"); fprintf(fp,"%d",139);`您建议我使用哪种方法？为什么？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T14:41:19.017

该`system()`函数返回 的返回值`cat`，即 0。它不返回来自 的标准输出`cat`，这正是您所期望的。

我认为您的第二段代码的问题在于您没有调用`fclose()`. 由于您在一个紧密的循环中运行，您几乎立即超过了允许的打开文件数。

所以，打电话`fclose()`，并考虑把一个`sleep()`也放在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T15:22:17.113

在 C 中读取文件时，您在文件中的位置会随着您的读取而改变。例如，如果您要打开一个包含以下内容的文件：

```
First Line
Second Line
Third Line 
```

并运行这个程序：

```
char buffer[1024];
while(fgets(buffer, sizeof(buffer), theFile))
{
    printf("Buffer: %s", buffer);
} 
```

它会打印：

```
First Line
Second Line
Third Line 
```

当您阅读每一行时，文件中的位置将更改为下一行。

在您的程序中，第一次读取值后，您尝试读取文件中的空白空间，而不是您想要的值。

您的问题的解决方案是移出`fopen`while 循环，但`fseek`每次通过循环时调用将您的位置重置为文件的开头。

要使用`fseek`，您需要将文件指针、字节偏移量和查找点传递给它。这里你在你的文件上调用它，从航路点 SEEK_SET 偏移 0 字节，这表示文件的开始。

```
fseek(theFile, 0, SEEK_SET); 
```

# mysql - 使用 BEGIN 和 START TRANSACTION 时的 MySQL AUTOCOMMIT 状态

> ID：11375890
> 
> 赞同：8
> 
> 时间：2012-07-07T14:36:48.390
> 
> 标签：mysql, transactions, autocommit

我需要在我的 MySQL 项目中使用事务。但我不确定我是否必须使用`mysql_query("SET AUTOCOMMIT=0");`。
我知道我有两个选择：

1.  开始
2.  开始交易

另外我听说这两个项目之一不需要使用`AUTOCOMMIT = 0`.
请帮助我知道何时必须`AUTOCOMMIT = 0`实际使用 With`BEGIN`或 with `START TRANSACTION`？

谢谢你。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-07T16:22:22.263

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-10-17T22:33:04.663

Start Transaction 和 SET AUTOCOMMIT=0 之间存在细微差别。如果 START TRANSACTION 出现在会话开始并且 AUTOCOMMIT 在 ROLLBACK 之后设置为 1（Mysql 开始时启用 AUTOCOMMIT），则 Autocommit 再次静默设置为 1 如果我设置 SET AUTOCOMMIT=0，而不是 START TRANSACTION，显然是一个 ROLLBACK 让 AUTOCOMMIT 禁用

# php - 使用 Codeigniter 的目录迭代

> ID：11375892
> 
> 赞同：2
> 
> 时间：2012-07-07T14:36:53.927
> 
> 标签：php, codeigniter

我有一个包含文本文件的目录，我通常使用 php 中可用的 DirectoryIterator 类来迭代目录并获取文件名。我在使用 CI 时遇到了麻烦。我对 CI 完全陌生，所以请多多包涵:)。

**我在名为 myblog 的默认控制器中有类似的东西** （我在 index 函数之后编写了该函数）。

```
<?php

    public function diriterate()
    {
        $this->load->helper('directory');

        $mapi=directory_map('./myfolder/');

        $this->load->view('index.php',$mapi);       
    } 

?> 
```

**在我看来，我正在尝试这样的事情**

```
<?php
    foreach($mapi as $key)
    {   
        echo $key;  
    }
?> 
```

我在这里做错了吗？.

**（1）**如果我的理解是正确的，我可以像 mysitename/class/function 一样运行它（**在我的例子中是 localhost/myblog/diriterate**）**（2）**我的目录在根文件夹（rootfolder/myfolder）中，所以不需要 baseurl 或某物 ？。

我应该使用 DirectoryIterator 类在视图中简单地执行此操作，还是只为迭代创建另一个控制器，我真的很困惑，欢迎任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T15:29:00.137

遵循 MVC 约定。

**模型**模型/folder_model.php

```
class Folder_model extends CI_Model {
    function iterate() {
        $this->load->helper('directory');
        $map = directory_map('./myfolder', 1);
        return $map;
    }
} 
```

对于目录映射，它将在应用程序的根目录中查找，即包含`index.php`. 请注意，这`1`将导致它是非递归的，并且仅在该顶级路径上。

**控制器**控制器/文件夹.php

```
class Folder extends CI_Controller {
    function index() {
        $this->load->model('folder_model');
        $map = $this->folder_model->iterate();

        $this->load->view('folder', array('map' => $map));
    }
} 
```

**查看**views/folder.php

```
<? foreach ($map as $item): ?>
    <?= $item ?>
<? endforeach; ?> 
```

这将在`http://localhost/index.php/folder`.

# c# - C# 类方法循环遍历在同一类中创建的列表

> ID：11375895
> 
> 赞同：0
> 
> 时间：2012-07-07T14:37:20.397
> 
> 标签：c#

首先，我是 C# 新手，需要一些帮助。我是一个包含列表的类。我可以从应用程序设置列表中的项目，但不能从类（需要在哪里完成）。我还需要将活动转移到课堂上。这也适用于应用程序。对此的任何帮助将不胜感激。下面是我课堂上的代码：

```
 namespace CarRace
{
class Cars
{
    public string Name { get; set; }
    public int StartPOS { get; set; }
    public int Speed { get; set; }
    public int CurPOS { get; set; }
    public double Location { get; set; }
    public Cars(string Name, int StartPOS, int Speed, int CurPOS, long Location)
    {
        this.Name = Name;
        this.StartPOS = StartPOS;
        this.Speed = Speed;
        this.CurPOS = 0;
        this.Location = 0;
    }
    public static int CompareCurrentLocation(Cars c1, Cars c2)
    {
        return c2.Location.CompareTo(c1.Location);
    }
    }
} 
```

我需要将此添加到课程中：

```
if (File.Exists("NewRace.xml"))
            {
                XDocument doc = XDocument.Load("NewRace.xml");
                var nCars = doc.Descendants("Car").Select(x => new Cars("", 0, 0, 0, 0)
                {
                    Name = x.Attribute("Name").Value,
                    StartPOS = int.Parse(x.Attribute("StartPOS").Value),
                    Speed = int.Parse(x.Attribute("Speed").Value),
                    CurPOS = 0
                });
            } 
```

和这个：

```
int p = 1;
        int prevPOS = 1;
        DateTime? PrevTime;
        double dist = 0;
        double PrevLoc = 0;
        if (i == 0)
        {
            return;
        }
        foreach (var car in RaceList)
        {
            dist = (((car.Speed * 1609.344) * 1) / 1609.344) / 3600;
            car.Location = car.Location + dist;
        }
        Comparison<Cars> compLoc = Cars.CompareCurrentLocation;
        RaceList.Sort(compLoc);
        PrevTime = DateTime.Now;
        foreach (var car in RaceList)
        {
            if (car.Location != PrevLoc)
            {
                car.CurPOS = p;
            }
            else
            {
                car.CurPOS = prevPOS;
            }
            prevPOS = car.CurPOS;
            PrevLoc = car.Location;
            p++;
        } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T03:23:02.917

> 感谢您的所有回复。我尝试了 car.speed/3600 但只得到了 0 所以我做了很长的路。我确实让一切都按照我需要的方式工作。

那是因为您正在进行*整数除法*（`car.Speed`is of type `int`），所以结果的小数部分被丢弃。由于汽车的速度低于 3600，因此这将始终导致零。`car.Speed`您可以通过转换为first来避免这种情况`double`- 这应该会产生您想要的结果：

```
dist = (double)car.Speed / 3600; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T02:59:33.520

感谢您的所有回复。我尝试了 car.speed/3600 但只得到了 0 所以我做了很长的路。我确实让一切都按照我需要的方式工作。我是这方面的新手，非常感谢任何提示。下面是我更新的代码。

```
namespace CarRace
{
class Cars
{
    public string Name { get; set; }
    public int StartPOS { get; set; }
    public int CurPOS { get; set; }
    public int Speed { get; set; }
    public double Location { get; set; }
    public string Make { get; set; }
    private static List<Cars> CarList;
    private static string ProgPart;
    public Cars(string Name, int StartPOS, int CurPOS, int Speed, double Location, string Make)
    {
        this.Name = Name;
        this.StartPOS = StartPOS;
        this.CurPOS = CurPOS;
        this.Speed = Speed;
        this.Location = Location;
        this.Make = Make;
    }
    public static List<Cars> FillList()
    {
        return CarList;
    }
    public static void Main()
    {
        try
        {
            bool Prog = false;
            //Get Part to display
            while (!Prog)
            {
                Console.WriteLine("Select the part you would like to test.(1 or 2)");
                ProgPart = Console.ReadLine();
                if (ProgPart == "1" || ProgPart == "2")
                {
                    Prog = true;
                }
            }
            Console.WriteLine("----------------------------------------");
            //Read XML File and set the CarList
            if (File.Exists("NewRace.xml"))
            {
                XDocument doc = XDocument.Load("NewRace.xml");
                var nCars = doc.Descendants("Car").Select(x => new Cars("", 0, 0, 0, 0, "")
                {
                    Name = x.Attribute("Name").Value,
                    StartPOS = int.Parse(x.Element("StartPOS").Value),
                    CurPOS = 0,
                    Speed = int.Parse(x.Element("Speed").Value),
                    Location = double.Parse(x.Element("Location").Value),
                    Make = x.Attribute("Make").Value
                });
                CarList = new List<Cars>();
                foreach (var car1 in nCars)
                {
                    if (ProgPart == "1")
                    {
                        CarList.Add(new Cars(car1.Name, car1.StartPOS, car1.CurPOS, car1.Speed, car1.Location, car1.Make));
                    }
                    else
                    {
                        CarList.Add(new Cars(car1.Name, car1.StartPOS, car1.CurPOS, 0, car1.Location, car1.Make));
                    }
                }
            }
            else
            {
                Console.WriteLine("File Not Found!");
                Console.ReadKey();
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }
    }
    public static int CompareCurrentLocation(Cars c1, Cars c2)
    {
        return c2.Location.CompareTo(c1.Location);
    }
    public static Boolean UpdateLeaderBoard(long i)
    {
        try
        {
            int p = 1;
            int prevPOS = 1;
            DateTime? PrevTime;
            double dist = 0;
            double prevLocation = 0;
            if (i == 0)
            {
                return false;
            }
            foreach (var car in CarList)
            {
                if (ProgPart == "2")
                {
                    switch (car.Make)
                    {
                        case "300ZX":
                            //Slow continuous gain of speed by percentage after 60 with top speed of 320.
                            if (i <= 15)
                            {
                                car.Speed = car.Speed + (60 / 10);
                            }
                            else if (car.Speed < 320)
                            {
                                double percent = (double)(car.Speed * .1);
                                if ((Convert.ToInt32(car.Speed + percent)) > 320)
                                {
                                    car.Speed = 320;
                                }
                                else
                                {
                                    car.Speed = Convert.ToInt32(car.Speed + (percent));
                                }
                            }
                            break;
                        case "Camero":
                            //0-60 4 seconds 60-220 20 seconds Top 220
                            if (i <= 4)
                            {
                                car.Speed = car.Speed + (60 / 4);
                            }
                            else if (i <= 20)
                            {
                                car.Speed = car.Speed + 10;
                            }
                            break;
                        case "Mustang":
                            //0-top(210) 25 seconds
                            if (car.Speed <= 200)
                            {
                                car.Speed = car.Speed + (200 / 20);
                            }
                            break;
                        case "VW Bug":
                            //Constant Speed
                            car.Speed = 165;
                            break;
                        default:
                            Console.WriteLine("Make not found");
                            break;
                    }
                }
                //Set Cars Current Location
                dist = (((car.Speed * 1609.344) * 1) / 1609.344) / 3600;
                car.Location = car.Location + dist;
            }
            //Sort list by location
            Comparison<Cars> compLoc = Cars.CompareCurrentLocation;
            CarList.Sort(compLoc);
            PrevTime = DateTime.Now;
            //Set the Current Position
            foreach (var car in CarList)
            {
                if (car.Location != prevLocation)
                {
                    car.CurPOS = p;
                }
                else
                {
                    car.CurPOS = prevPOS;
                }
                prevPOS = car.CurPOS;
                prevLocation = car.Location;
                p++;
            }
            return true;
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
            return false;
        }
    }
} 
```

}

# c# - 如何为多个系统获取一个登录页面？

> ID：11375898
> 
> 赞同：0
> 
> 时间：2012-07-07T14:37:40.247
> 
> 标签：c#, asp.net

我有四个系统在同一台服务器上运行。我想让用户为所有系统登录一次。我制作了一个用户管理系统来创建用户并对其进行编辑。

我试图在会话中保存，但没有帮助。

有什么建议么？我正在研究 asp.net。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T17:54:59.483

最好的方法是使用 Federated Security。如果您使用的是 Windows 身份验证，则可以使用 Active Directory 联合身份验证服务 (ADFS)。在此模型中，用户引用 Web 应用程序并检查当前线程上的主体。如果值为 null，则存储在 web.config 中的信息将自动将请求重定向到登录页面。这是假设没有 Windows 安全上下文，否则用户可以自动登录。

用户成功登录到环境后，将填充线程上的主体，并发出一组特定于该用户的声明。由于声明与主体相关联，而不是与特定应用程序相关联，因此任何声明感知应用程序都可以全面使用它们。

如果你不使用 Windows 身份验证，你仍然可以完成同样的事情，唯一的问题是你不能使用 ADFS。相反，您必须实现自己的身份提供程序来替换 ADFS。.NET Framework 确实提供了基类和接口来帮助您实现这一目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T14:58:35.470

有两种方法。

大多数解决方案围绕在中心站点发生的登录，然后返回目标站点用来检索用户的身份信息字段（登录令牌）。

当您访问另一个站点时，该站点会很快将您重定向到中央站点，如果您已登录（持久 cookie），您将取回您的身份。

或者，您可以与推荐人一起做很多事情并玩弄。

你想在互联网上做一些研究 - 你看 kfo 是“单点登录”。

[http://www.codeproject.com/Articles/27576/Single-Sign-on-in-ASP-NET-and-Other-Platforms](http://www.codeproject.com/Articles/27576/Single-Sign-on-in-ASP-NET-and-Other-Platforms)

有一些技术讨论。

您可以阅读完整的独立网站（域）

[http://aspalliance.com/1513_Cross_Site_Authentication_and_Data_Transfer](http://aspalliance.com/1513_Cross_Site_Authentication_and_Data_Transfer)

怎么做 - 显然共享 cookie 在那里不起作用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-07T14:50:32.230

我建议查看 ActiveDirectory 或任何 LDAP 服务器以进行单点登录以访问所有应用程序。如果您不能（或不希望）使用 LDAP，您可以使用任何内存/磁盘存储实现类似的功能（但需要花费更多的开发工作/时间）。如果这不可能，请分享原因，因为它可能对其他人有用。

希望这可以帮助。

# objective-c - 使用des cbc模式obj-c加密/解密字符串

> ID：11375909
> 
> 赞同：0
> 
> 时间：2012-07-07T14:38:39.743
> 
> 标签：objective-c, ios, encryption, des

大家好，我是 obj-c 世界的新手，我想知道如何在 des 中加密字符串？我已经尝试过搜索，但找不到任何可以帮助我的示例代码我唯一意识到的是有一个类 commonCrypt 可以做我想做的事，但我不知道如何使用它

我的代码

```
NSString* key = @"abc43HU0";
NSString *token = @"hellohello";

const void *vplainText;
size_t plainTextBufferSize;

plainTextBufferSize = [token length];
vplainText = (const void *) [token UTF8String];

CCCryptorStatus ccStatus;
uint8_t *bufferPtr = NULL;
size_t bufferPtrSize = 0;
size_t *movedBytes = NULL;

bufferPtrSize = (plainTextBufferSize + kCCBlockSize3DES) & ~(kCCBlockSize3DES - 1);
bufferPtr = malloc( bufferPtrSize * sizeof(uint8_t));
memset((void *)bufferPtr, 0x0, bufferPtrSize);
// memset((void *) iv, 0x0, (size_t) sizeof(iv));

//NSString *initVec = @"init Vec";
const void *vkey = (const void *) [key UTF8String];
const void *vinitVec = (const void *) [key UTF8String];

ccStatus = CCCrypt(kCCEncrypt,
                   kCCAlgorithmDES,
                   kCCModeCBC,
                   vkey, //"123456789012345678901234", //key
                   kCCKeySizeDES,
                   vinitVec,// vinitVec, //"init Vec", //iv,
                   vplainText, //"Your Name", //plainText,
                   plainTextBufferSize,
                   (void *)bufferPtr,
                   bufferPtrSize,
                   movedBytes);

NSString *result;
NSData *myData = [NSData dataWithBytes:(const void *)bufferPtr length:(NSUInteger)movedBytes];

result = [myData base64encoding;

crypt_result.text = myData; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T08:08:28.940

这是工作代码：

```
NSString* key = @"abc43HU0";
NSString *token = @"hellohello";

const void *vplainText;
size_t plainTextBufferSize = [token length];
vplainText = (const void *) [token UTF8String];    
CCCryptorStatus ccStatus;
uint8_t *bufferPtr = NULL;
size_t bufferPtrSize = 0;
size_t movedBytes = 0;

bufferPtrSize = (plainTextBufferSize + kCCBlockSizeDES) & ~(kCCBlockSizeDES - 1);
bufferPtr = malloc( bufferPtrSize * sizeof(uint8_t));
memset((void *)bufferPtr, 0x0, bufferPtrSize);

Byte iv [] = {0x65, 0x110, 0x68, 0x26, 0x69, 0x178, 0x200, 0x219};

const void *vkey = (const void *) [key UTF8String];

ccStatus = CCCrypt(kCCEncrypt,
                   kCCAlgorithmDES,
                   kCCOptionPKCS7Padding,
                   vkey, 
                   kCCKeySizeDES,
                   iv,
                   vplainText,
                   plainTextBufferSize,
                   (void *)bufferPtr,
                   bufferPtrSize,
                   &movedBytes);

NSData *myData = [NSData dataWithBytes:(const void *)bufferPtr length:(NSUInteger)movedBytes];
NSString* result = [base64 base64EncodeData:myData];//my own method to encoding with base64 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T11:59:00.947

尝试`kCCOptionPKCS7Padding | kCCModeCBC`ccOptions 参数。

# sql - Oracle 11g 连接问题

> ID：11375913
> 
> 赞同：0
> 
> 时间：2012-07-07T14:38:56.843
> 
> 标签：sql, oracle

我在带有 windows xp 的 vm 中安装了 oracle 11g，设置 SID = orcl，但是当我尝试与 SQL 开发人员连接到 db 时，我得到了错误`ORA-12505, TNS:listener does not currently know of SID given in connect`

我检查了监听器，使用 lsnrctl 服务，它说监听器不支持任何服务

编辑：这是我的 tnsnames.ora 文件

```
>  tnsnames.ora Network Configuration File: >E:\app\oracle\product\11.1.0\db_1\network\admin\tnsnames.ora
> Generated by Oracle configuration tools.
>ORCL =
>  (DESCRIPTION =
>    (ADDRESS = (PROTOCOL = TCP)(HOST = winxpora11g)(PORT = 1521))
>    (CONNECT_DATA =
>      (SERVER = DEDICATED)
>      (SERVICE_NAME = orcl)
>    )
>  ) 
```

我是一个新手，所以任何帮助将不胜感激

这是我的听众.ora

```
> listener.ora Network Configuration File:            >E:\app\oracle\product\11.1.0\db_1\network\admin\listener.ora
> Generated by Oracle configuration tools.
> LISTENER =
>  (DESCRIPTION_LIST =
>    (DESCRIPTION =
>      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1521))
>      (ADDRESS = (PROTOCOL = TCP)(HOST = winxpora11g)(PORT = 1521))
>    )
>  ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T03:42:53.797

问题在于，自从实例启动以来，侦听器似乎已关闭或重置。默认情况下，该实例将是“自动注册”，并会在启动时向侦听器注册自身。最简单的解决方法是重新启动 OracleServiceORCL 服务（如果它在 oracle 服务中设置为“启动打开”，这应该是默认设置——如果不是，我可以通过命令行）。

如果这很常见，永久解决方案是将服务设置为 listener.ora 中的静态条目并重新启动侦听器服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-26T13:05:48.393

旧线程，但以防其他人在这里绊倒。在 SQL Developer 中，你可以做

```
Connection Type:  Basic
Hostname: winxpora11g
Port: 1521
Service Name: orcl 
```

这绕过了 TNSNAMES.ORA 并且应该将您连接到数据库。

![在此处输入图像描述](../Images/3f7d1127dcc863547c414cb91acb788b.png)

# javascript - 使表单验证返回 true？

> ID：11375914
> 
> 赞同：-1
> 
> 时间：2012-07-07T14:39:04.843
> 
> 标签：javascript, jquery

这是我的验证码：

```
 function validateEnquiryForm() {
      var x = document.forms["enquiry"]["name"].value;
      if(x == null || x == "" || x == "Name") {
          $('#name').removeClass('custom').addClass('error');
          $('.name-error').show();
          //return false;
      } else if(x !== null || x !== "" || x !== "Name") {
          $('#name').removeClass('error').addClass('custom');
          $('.name-error').hide();
      }
      var x = document.forms["enquiry"]["phone"].value;
      if(x == null || x == "" || x == "Phone Number") {
          $('#phone').removeClass('custom').addClass('error');
          $('.phone-error').show();
          //return false;
      } else if(x !== null || x !== "" || x !== "Phone Number") {
          $('#phone').removeClass('error').addClass('custom');
          $('.phone-error').hide();
      }
      var x = document.forms["enquiry"]["requirements"].value;
      if(x == null || x == "" || x == "Add any other extra requirements here...") {
          $('#requirements').removeClass('textarea-1').addClass('error');
          $('.requirements-error').show();
          //return false;
      } else if(x !== null || x !== "" || x !== "Add any other extra requirements here...") {
          $('#requirements').removeClass('error').addClass('custom');
          $('.requirements-error').hide();
      }
      var x = document.forms["enquiry"]["summary"].value;
      if(x == null || x == "" || x == "Summarise your project in a few key words...") {
          $('#summary').removeClass('custom').addClass('error');
          $('.summary-error').show();
          //return false;
      } else if(x !== null || x !== "" || x !== "Summarise your project in a few key words...") {
          $('#summary').removeClass('error').addClass('custom');
          $('.summary-error').hide();
      }
      var x = document.forms["enquiry"]["email"].value;
      var atpos = x.indexOf("@");
      var dotpos = x.lastIndexOf(".");
      if(atpos < 1 || dotpos < atpos + 2 || dotpos + 2 >= x.length) {
          $('#email').removeClass('custom').addClass('error');
          $('.email-error').show();
          //return false;
      } else if(atpos > 1 || dotpos > atpos + 2 || dotpos + 2 <= x.length) {
          $('#email').removeClass('error').addClass('custom');
          $('.email-error').hide();
      }
      $('.error-banner').effect("pulsate", {
          times: 2
      }, 1000);
      return false;
  } 
```

当代码运行时，它会检查所有字段以查看它们是否为空白。如果一个或多个`.error-banner`脉冲填写不正确，则会显示单独的消息。问题是当表格填写正确时，此横幅仍然闪烁。有人可以告诉我哪里出错了..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T14:42:42.940

据我所知，您的函数无条件地以这个块结束：

```
$('.error-banner').effect("pulsate", {
  times: 2
}, 1000);
return false; 
```

也许将其更改为：

```
var valid = true;

// in your error handling conditionals, set valid to false:
if(x == null || x == "" || x == "Phone Number") {
    $('#phone').removeClass('custom').addClass('error');
    $('.phone-error').show();
    valid = false;
} 

...

if (!valid) {
  $('.error-banner').effect("pulsate", {
    times: 2
  }, 1000);
}
return valid; 
```

不过，我必须同意大多数评论者的观点，即您的方法还有很大的改进空间。

# xcode - 如何在 Xcode 4 Navigator 中更改字体大小？

> ID：11375915
> 
> 赞同：4
> 
> 时间：2012-07-07T14:39:24.887
> 
> 标签：xcode, xcode4

在 XCode3 中有一个编辑一些库文件的解决方法，有没有办法改变 Xcode 4 Project Navigator 的字体大小？

Tinker Tool 也无济于事。

# qt - 在 *.pro 文件之间传递变量

> ID：11375916
> 
> 赞同：11
> 
> 时间：2012-07-07T14:39:31.197
> 
> 标签：qt, global-variables, qmake

我有以下 *.pro 文件：

领导解决方案的人

```
# head - pro file :
TEMPLATE = subdirs
CONFIG = qt thread ordered

# save root directory
PROJECT_ROOT_DIRECTORY = $$_PRO_FILE_PWD_
message("Master pro file path : ["$${PROJECT_ROOT_DIRECTORY}"]") // output : "Master pro file path : [/Path/To/Directory]"

# project subdirs
SUBDIRS += PROJECT1 
```

和

```
# PROJECT1 - pro file :
TEMPLATE = app

# etc.

# output 'PROJECT_ROOT_DIRECTORY ' contents
message("Master pro file path : "$${PROJECT_ROOT_DIRECTORY}) // output :  "Master pro file path : []" 
```

如何在 2 个 pro 文件之间传递变量（这里的变量是`PROJECT_ROOT_DIRECTORY`）？

**编辑 ：**

[这与这个](https://stackoverflow.com/questions/1450630/variables-that-persist-across-pro-files-from-a-subdirs-pro-file?rq=1)问题相同，但我看不出“*另一种选择是*”答案对我有什么帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-08T09:59:48.873

您可以将变量定义放在一个`.pri`文件中，然后将其包含在`.pro`您想要的所有文件中。请注意，您需要告诉`.pro`子目录中的文件找到`.pri`文件的路径。

**头.pro：**

```
# head - pro file :
TEMPLATE = subdirs
CONFIG = qt thread ordered

# configuration
include(config.pri)
message("Master pro file path : ["$${PROJECT_ROOT_DIRECTORY}"]") # output : "Master pro file path : [/Path/To/Directory]"

# project subdirs
SUBDIRS += PROJECT1 
```

**配置.pri：**

```
# save root directory
PROJECT_ROOT_DIRECTORY = $$PWD // not $$_PRO_FILE_PWD_! 
```

**项目1/项目1.pro：**

```
# PROJECT1 - pro file :
TEMPLATE = app

# configuration
include(../config.pri)  # note that you need to put "../" before the .pri path
message("Master pro file path : ["$${PROJECT_ROOT_DIRECTORY}"]") # should now output :  "Master pro file path : [/Path/To/Directory]" 
```

# java - 在 ArrayList 内的 LinkedHashMap 中查找和分配值的替代方法

> ID：11375921
> 
> 赞同：0
> 
> 时间：2012-07-07T14:40:07.773
> 
> 标签：java, arraylist, linkedhashmap

我在下面显示了一个代码，它工作正常。但我想知道是否还有其他方法可以实现这一点？基本上，我对 4 个循环所做的是比较并为 CopyMatrix 的键分配一个新值，如果使用 SeqGenerate 中的字符串/元素找到匹配项，则该键是数组列表中的一个linkedhashmap。我有另一个解决方案，它也是一个循环，但它没有工作，所以我坚持这个，我想知道是否有其他方法可以用更少的循环或其他一些技术来做到这一点。

```
ArrayList<ArrayList<String>> SeqGenerate = new ArrayList<ArrayList<String>>();
ArrayList<LinkedHashMap<String, Double>> copyOfMatrix = new ArrayList<LinkedHashMap<String, DOuble>>();
ArrayList<LinkedHashMap<String, Double>> calcLogProb = new ArrayList<LinkedHashMap<String, DOuble>>();

for (ArrayList<String> getArray: SeqGenerate){
            LinkedHashMap<String, Double> tempVal = new LinkedHashMap<String, Double>();
            for (String getString: getArray){
                for (LinkedHashMap<String, Double> entries: copyOfMatrix){

                    Iterator <String> iterKey = entries.keySet().iterator();
                    Iterator <Double> iterVal = entries.values().iterator();
                        while (iterKey.hasNext()){
                            String keyVal = iterKey.next();
                            Double Value = iterVal.next();

                            if (getString.equals(keyVal)){
                                Double temp = Value;
                                if (temp==0){
                                        temp=0.00000001;
                                    }

                                Double seqVal = Math.abs(Math.log10(temp));                         
                                tempVal.put(keyVal, seqVal);
                            }

                        }   
                }
            }
            calcLogProb.add(tempVal);
        } 
```

## 编辑

好的，我正在尝试做的是这样的： SeqGenerate 包含此元素
ArrayList -------- String
(1)Hello World = { He el ll lo o_ _W Wo or rl ld}

(2)Hello Earth = { He el ll lo o_ _E Ear rt th}

Hello World 和 Hello Earth 是 SeqGenerate 中包含的文本类型的一个示例，但它们存储为两个字符序列，如我所示。copyOfMatrix 包含相同类型的序列，但我从另一组句子和文本生成它，但它们始终是两个字符的序列，如果找到匹配项，它们将比较并替换该值。

因此，我唯一知道如何比较嵌套循环中的元素是制作 for 循环，例如，我将 seqGenerate element 0 element 1 与存储在复制矩阵中的键进行比较。如果我找到匹配项，我将替换该值。希望这足够清楚。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T14:48:14.217

好吧，我不会为你重新编写你的代码，但我会告诉你，当我看到大量组合的集合和嵌套循环时，我会有点呕吐。这是给您的一个想法：所有这些集合都可以扩展，这意味着您可以创建自定义类，其中包括每个级别的查找方法。

我唯一的另一个好的建议是尝试使用带有 lambda 的语言，例如 Groovy，它具有更好的处理复杂数据排列的能力。

好的，我对您还有一个想法：尝试使用 SQL 解决这个问题会更好吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T15:22:17.997

我真的不明白你为什么这样做

```
Iterator <String> iterKey = entries.keySet().iterator();
Iterator <Double> iterVal = entries.values().iterator();
while (iterKey.hasNext()){
  String keyVal = iterKey.next();
  Double Value = iterVal.next();

  if (getString.equals(keyVal)){
    Double temp = Value;
    if (temp==0){
      temp=0.00000001;
    }

    Double seqVal = Math.abs(Math.log10(temp));                         
    tempVal.put(keyVal, seqVal);
  }
} 
```

a 的全部意义`Map`在于避免线性时间遍历。这应该只是

```
Double temp = entries.get(getString);
if (temp != null) {
  if (temp.doubleValue() == 0) {
    temp = 0.00000001;
  }
  tempVal.put(getString, Math.abs(Math.log10(temp));
} 
```

# jquery-ui - 不使用标签、值、id 的 JQuery 自动完成

> ID：11375922
> 
> 赞同：4
> 
> 时间：2012-07-07T14:40:18.213
> 
> 标签：jquery-ui, jquery, autocomplete

是否可以在不使用常规 id、label、value 的情况下让 JQuery Autocomplete 工作？

例如，我不想使用：

```
[ { "id": "Botaurus stellaris", "label": "Great Bittern", "value": "Great Bittern" }, 
{ "id": "Asio flammeus", "label": "Short-eared Owl", "value": "Short-eared Owl" }] 
```

反而：

```
[ { "my_id": "Botaurus stellaris", "first_name": "Great Bittern", "last_name": "Great Bittern" }, 
{ "my_id": "Asio flammeus", "first_name": "Short-eared Owl", "last_name": "Short-eared Owl" }] 
```

就像，`JQuery autocomplete`通常需要什么`id,value,label`，我可以让它接受`my_id, first_name, last_name`并使 Jquery Autocomplete 像对待一样`id,label,value`吗？

当我不想修改来自数据源的数据键以将其显示在 JQuery 自动完成上时，这可能很有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T14:50:27.133

没关系，

从 JQueryUI 的自动完成示例源中找到答案：

```
 $( "#city" ).autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "http://ws.geonames.org/searchJSON",
                dataType: "jsonp",
                data: {
                    featureClass: "P",
                    style: "full",
                    maxRows: 12,
                    name_startsWith: request.term
                },
                success: function( data ) {
                    response( $.map( data.geonames, function( item ) {
                        return {
                            label: item.name + (item.adminName1 ? ", " + item.adminName1 : "") + ", " + item.countryName,
                            value: item.name
                        }
                    }));
                }
            });
        },
        minLength: 2
    }); 
```

在这里，`source`被分配了一个函数，它可以转换并返回任何类型的键，以将其转换为 JQuery 的 Autocomplete 的`id,value,label`.

可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T09:58:45.763

还有一个更好的解决方案。它甚至记录在 jquery-ui 网站上。

[http://jqueryui.com/demos/autocomplete/#custom-data](http://jqueryui.com/demos/autocomplete/#custom-data)

```
$("input").autocomplete({..})
.data( "autocomplete" )._renderItem = function( ul, item ) {return $( "<li></li>" )
    .data( "item.autocomplete", item )
            .append( "<a>" + item.label + "<br>" + item.desc + "</a>" )
            .appendTo( ul );
    }; 
```

# git - 合并 git post-receive hook

> ID：11375924
> 
> 赞同：4
> 
> 时间：2012-07-07T14:40:22.863
> 
> 标签：git, githooks

我使用以下接收后挂钩：

```
GIT_TOP=`git rev-parse --show-toplevel`

while read oldrev newrev refname
do
        echo "=== $oldrev"
        echo "=== $newrev"
        echo "=== $refname"

        echo "=== 01\. checkout -- $GIT_TOP/*"
        git checkout -- "$GIT_TOP/*"

        echo "=== 02\. merging $refname"
        git merge $refname

        echo "=== 03\. checkout -- $GIT_TOP/*"
        git checkout -- "$GIT_TOP/*"

done 
```

这个想法很清楚：我希望将当前分支与推送的分支合并。

*   然后我执行：`git status`它告诉我我的本地树与分支不同！

*   比我`git checkout -- *`在 git dir 的顶部执行更多的命令 - 现在这个命令做我想要的：`git status`现在不再显示任何差异。

为什么这个命令`git checkout -- "$GIT_TOP/*"`在钩子中不起作用，只能通过直接调用起作用？如何在钩子中运行此命令？

附言

我发现`git rev-parse --show-toplevel`从钩子中调用返回`<myrepo>/.git`路径，但从 shell 中它的值只是`<myrepo>`. 可能这可以帮助解决问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T18:30:26.787

好的，现在可以使用了。多思考少抄袭。

```
export GIT_WORK_TREE=`pwd`
export GIT_DIR=`pwd`/.git 
```

保罗

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T16:20:02.463

`export GIT_WORK_TREE=$GIT_DIR/.`解决了我的问题。现在甚至`git checkout -- "$GIT_TOP/*"`不需要了。因为`git merge $refname`工作正常 - 在正确的目录上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T15:41:22.593

谢谢。

我试过这个：

```
export GIT_WORK_TREE=$GIT_DIR/.
while read oldrev newrev refname
do
        echo "=== merging $refname"
        git merge $refname
done 
```

返回错误：“您对以下文件的本地更改将被合并覆盖”..提到刚刚推送的文件。

这表明它没有尝试将刚刚收到的更改合并到主分支

也许需要那个结帐大师？

我能够手动进行合并。

保罗

# spring - 弹簧缓存和aspectj

> ID：11375925
> 
> 赞同：2
> 
> 时间：2012-07-07T14:40:28.590
> 
> 标签：spring, caching, aspectj

我想在不是由 spring 管理的对象上使用 @cacheable 注释。我正在使用 maven-aspectj 编译器来编译这些类。但我没有看到任何东西被编织。

我没有@Aspect，因为我假设 spring 应该为所有与缓存相关的注释处理这个问题。我的配置文件中有以下内容。

谷歌搜索后我做了一些改变

```
<cache:annotation-driven mode="aspectj"/>

<context:annotation-config />

<context:component-scan base-package="com.merc.spring.cache.aspectj" /> 
```

在 META-INF 文件夹中添加了一个 aop.xml，其中包含以下内容

```
<aspectj>
<weaver options="-verbose -showWeaveInfo">
  <include within="com.merc.spring.cache.aspectj..*"/>
</weaver>
</aspectj> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T17:27:15.413

只是为了验证您的 @Cacheable 类是否真的与 CacheAspect 交织在一起，您可以将其添加到 maven aspectj 插件中：

```
<configuration>
    <showWeaveInfo>true</showWeaveInfo> 
```

**编辑**

我正在粘贴我的整个 aspectj 插件配置，这适用于我的项目：

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>aspectj-maven-plugin</artifactId>
            <version>1.4</version>
            <dependencies>
                <dependency>
                    <groupId>org.aspectj</groupId>
                    <artifactId>aspectjrt</artifactId>
                    <version>${aspectj.version}</version>
                </dependency>
                <dependency>
                    <groupId>org.aspectj</groupId>
                    <artifactId>aspectjtools</artifactId>
                    <version>${aspectj.version}</version>
                </dependency>
            </dependencies>
            <executions>
                <execution>
                    <goals>
                        <goal>compile</goal>
                        <goal>test-compile</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <outxml>true</outxml>
                <showWeaveInfo>true</showWeaveInfo>
                <verbose>true</verbose>
                <aspectLibraries>
                    <aspectLibrary>
                        <groupId>org.springframework</groupId>
                        <artifactId>spring-aspects</artifactId>
                    </aspectLibrary>
                </aspectLibraries>
                <source>${java.version}</source>
                <target>${java.version}</target>
            </configuration>
        </plugin> 
```

我的 java.version，aspectj.version 设置为：

```
<properties>
    <aspectj.version>1.6.12</aspectj.version>
    <java.version>1.6</java.version>
</properties> 
```

# regex - sed 和正则表达式添加行

> ID：11375931
> 
> 赞同：2
> 
> 时间：2012-07-07T14:41:06.577
> 
> 标签：regex, replace, sed

我正在尝试找到一种方法来搜索文件并在要搜索的字符串之前添加一行

```
xxx =  text() // '=' folowed by space or not then  'text()' 
```

如果找到：

在此行之前添加

```
new text 
```

换句话说，我想要这个

```
xxx =  text() 
```

成为这样：

```
new text
xxx =  text() 
```

我试过这个

```
find /var/www/users/ \( -name '*.py'   \)  -type f  -exec sed -i 's|\s+\=\s+\text()|new text|i' {} \; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T14:48:34.440

我会这样做，我想：

```
find -iname '*.py' -and -type f | xargs sed -i -e '/= *text()/ i new text' 
```

# haskell - 如何防止在 Yesod 中缓存静态文件？

> ID：11375933
> 
> 赞同：5
> 
> 时间：2012-07-07T14:41:08.747
> 
> 标签：haskell, yesod

我使用脚手架站点，每当我更改静态 javascript 文件中的某些内容时，我必须停止开发服务器并执行“cabal install && yesod devel”以使更改生效。

有没有办法使用*普通*的js/css 而不是缓存的版本，所以我不需要一直重新编译？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-07T14:58:28.260

尝试

```
touch Settings/StaticFiles.hs 
```

它是那个特定的文件，因为静态文件的模板 haskell 代码在那个文件中（在默认的脚手架结构中）。触摸该文件将重新编译它并重新执行模板 haskell 代码。

* * *

编辑：对不起，我注意到这并没有回答您关于如何使用静态 js/css 源文件进行开发的问题，就像您使用文件`templates`夹中的文件一样。好吧，您的文件夹中不应该有 js/css 文件，如果您觉得您正在积极处理 css 和 js 文件`static`，请考虑将您的`.js`/`.css`文件移动到该文件夹​​并使用莎士比亚语言。`template`

`static`仅当您从其他地方（例如蓝图 css 框架）获取大型代码库时，才将 js/css 文件放在文件夹中。请参阅我对[这个](https://stackoverflow.com/questions/6562065/how-to-use-a-css-framework-with-yesod/9133295#9133295)问题的回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-09T19:53:06.900

现在有一个关于此的[wiki 条目](https://github.com/yesodweb/yesod/wiki/Develop-JS-without-recompiling-the-yesod-project)- 至少是关于在 javascript 更改时不必重新编译您的 yesod 项目的部分。

# sql-server - SSIS查找，为不匹配的输出创建新记录并获取新生成的密钥

> ID：11375934
> 
> 赞同：0
> 
> 时间：2012-07-07T14:41:18.497
> 
> 标签：sql-server, ssis, lookup, etl, dataflow

我有一张酒店桌子。

```
 create table DimHotel
 (
  Hotel_ID int Identity(1, 1),
  HotelName nvarchar(max)
 ) 
```

现在我得到一些提要`HotelNames`，现在我们的业务逻辑`Hotel_ID`用于现有的 HotelName 并为新的 HotelName 创建新记录并使用新生成的 Hotel_ID。现在我明白我可以将“查找无匹配输出”定向到 OLE DB 命令转换，然后我如何获得新生成的密钥。一种选择是在 DimHotel 表上再查找一次（我想这很愚蠢，扫描一张表两次）。我们还有什么其他选择。

我可以使用但 Merge 语句，但我们的 ETL 团队希望避免手动编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T16:08:03.073

我认为最好使用将 SCOPE_IDENTITY 作为输出参数检索的存储过程。

例子 ：-

```
 Create Procedure 
     (
      column names ,
      @id int 
     ) 
     AS
     BEGIN
     INSERT INTO TableName  VALUES (@col1)
     SELECT @id = SCOPE_IDENTITY()
    END 
```

# security - 以编程方式将站点添加到 Internet Explorer 的受信任站点区域？

> ID：11375937
> 
> 赞同：1
> 
> 时间：2012-07-07T14:42:06.810
> 
> 标签：security, internet-explorer, vbscript

下面的脚本将我的站点添加到我的用户的受信任站点区域，以便能够运行 activeX 控件。

它在我的本地主机上完美运行，并且 URL 已添加到受信任的站点区域。但它没有做任何事情，并且在将包含脚本的网页复制到在线生产网站时确实出现了最后一条消息。我在这里做错了什么？

有人可以帮助我或建议另一种方法来完成相同的任务吗？

谢谢

```
<script type="text/vbscript">

On Error Resume Next

Sub addkey

Dim DomainArray,  strComputer, strHTTP, strHTTPS

Dim dwordZone, regPath, objReg, counter, subkeyPath, icounter

Dim subkeyValue

Const HKEY_CURRENT_USER = &H80000001

DomainArray = "mydomain.ca"

strComputer = "."
strHTTP = "http"
strHTTPS = "https"
dwordZone = "2"

regPath = "SOFTWARE\Microsoft\Windows\CurrentVersion\Internet Settings" &_
"\ZoneMap\Domains\"
'Set objReg = GetObject("winmgmts:{impersonationLevel=impersonate}\\" & strComputer & "\root\default:StdRegProv")
subkeyPath = regPath & DomainArray
objReg.CreateKey HKEY_CURRENT_USER,subkeyPath
regPath = "SOFTWARE\Microsoft\Windows\CurrentVersion\Internet Settings" &_
"\ZoneMap\Domains\mydomain.ca\" 
subkeyPath = regPath & "www"
objReg.CreateKey HKEY_CURRENT_USER,subkeyPath
objReg.SetDWORDValue HKEY_CURRENT_USER,subkeyPath,strHTTPS,dwordZone
MsgBox("https://www.mydomain.ca has been added to the Trusted Sites Zone.") 
objReg.DeleteValue HKEY_CURRENT_USER, subkeyPath, strHTTPEnd Sub

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T07:22:15.820

你不能从一个普通的网页做这样的事情。如果随机网页可以欺骗您的注册表，那将是一场巨大的安全灾难。受信任的站点区域的全部意义在于用户必须明确声明他们足够信任该站点以将其放在那里。

因此，在受信任的站点区域中获取站点的唯一合理方法是要求用户手动添加它。但是，这通常仍然是不合适的，并且仅用于运行 ActiveX 控件是不必要的。你实际上想用这个 ActiveX 控件做什么？

# regex - 正则表达式查找段落的结尾

> ID：11375947
> 
> 赞同：1
> 
> 时间：2012-07-07T14:43:30.833
> 
> 标签：regex

我正在解析文本，并且分节符已被删除。我需要一个正则表达式来定位任何以标点符号（句号、问题等）结尾的句子，并且在下一个句子开始之前没有空格。然后我接受它并插入两个换行符。不幸的是，到目前为止，我所拥有的正则表达式过于贪婪，并且在 URL 上遇到了麻烦。

```
preg_replace('/(?<!\.)\.(?!(\s|$|\,|\w\.))/', '.<br/><br/> ', $string); 
```

示例文本：

> 批准的来源是 xxxx xxx。征集是 XXX，将在本通知中提供的链接上提供。请参阅[http://www.mysite.com](http://www.mysite.com)。本征集的硬拷贝不可用。规格、计划或图纸不可用。所有负责的来源都可以提交报价，如果及时收到，应予以考虑。报价必须以电子方式提交。
> 
> 最终预期结果：
> 
> 批准的来源是 xxx xxxx。
> 
> 征集是 XXX，可通过本通知中提供的链接获得。本征集的硬拷贝不可用。请参阅[http://www.mysite.com](http://www.mysite.com)。规格、计划或图纸不可用。
> 
> 所有负责的来源都可以提交报价，如果及时收到，应予以考虑。
> 
> 报价必须以电子方式提交。
> 
> 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T14:59:10.017

`(?<!w{3})[\.\?](?=\S)(?!com)`

假设您的所有s 都将以and`URL`开头/结尾，这将阻止它匹配，同时保留所有匹配并且在它们之后具有非空格。您将不得不替换您的匹配项，而不仅仅是.`www.``.com``.``?``.<br><br>``<br><br>`

[在这里玩正则表达式](http://regexr.com?31ffa)。

# c++ - cout 不是 std 的成员

> ID：11375949
> 
> 赞同：237
> 
> 时间：2012-07-07T14:43:46.347
> 
> 标签：c++, io, std, member, cout

我正在练习使用多个文件和头文件等。所以我有这个项目，它需要两个数字，然后将它们相加。很简单。

这是我的文件：

**主文件**

```
#include <iostream>
#include "add.h"

int main()
{
    int x = readNumber();
    int y = readNumber();

    writeAnswer(x + y);

    return(0);
} 
```

**io.cpp**

```
int readNumber()
{
    int x;

    std::cout << "Number: ";
    std::cin >> x;

    return x;
}

void writeAnswer(int x)
{
    std::cout << "Answer: ";
    std::cout << x;
} 
```

**添加.h**

```
#ifndef ADD_H_INCLUDED
#define ADD_H_INCLUDED

int readNumber();
void writeAnswer(int x);

#endif // #ifndef ADD_H_INCLUDED 
```

该错误出现在 io.cpp 中。确切的错误是：

[![在此处输入图像描述](../Images/d4dbc7d2fe291f055c61e9fae90bd353.png)](https://i.stack.imgur.com/fRKEB.png)

有谁知道为什么会发生这种情况？谢谢。

**编辑：我昨天用相同数量的文件（2 .cpp 和 1.h）做了一个小项目，我没有在另一个 .cpp 中包含 iostream 标头，它仍然编译并运行良好。**

* * *

## 回答 #1

> 赞同：388
> 
> 时间：2012-07-07T14:45:29.487

添加`#include <iostream>`到开头`io.cpp`也。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2018-09-20T19:41:51.070

另请记住，它必须是：

```
#include "stdafx.h"
#include <iostream> 
```

而不是相反

```
#include <iostream>
#include "stdafx.h" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-22T17:26:16.087

我有一个类似的问题，结果我必须添加一个额外的条目`cmake`来包含文件。

由于我也在使用 zmq 库，因此我也必须将其添加到包含的库中。

# php - 如何使用 PHP 和 Google API 在特定网站内进行搜索？

> ID：11375950
> 
> 赞同：0
> 
> 时间：2012-07-07T14:44:01.410
> 
> 标签：php, api

如何使用 PHP 和 Google API 在特定网站内进行搜索？当我搜索关键字时，我想要`website1.com`AND `website2.com`AND的结果`website3.com`。例如：

```
<input name="search" value="keyword"> 
<input name="as_site" value="site1.com"> 
<input name="as_site" value="site2.com">
<input name="as_site" value="site3.com"> 
```

结果应该只从这三个网站返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T15:25:41.063

> 注意：Google Web Search API 已于 2010 年 11 月 1 日正式弃用。根据我们的弃用政策，它将继续工作，但您每天可以发出的请求数将受到限制。因此，我们鼓励您迁移到新的自定义搜索 API。

根据您的表单并假设关键字字段被命名，`keyword`此示例代码假设您只有一个要搜索的站点，您可以对其进行自定义以包含多个站点。假设站点输入被命名`site`

```
// The request also includes the userip parameter which provides the end
// user's IP address. Doing so will help distinguish this legitimate
// server-side traffic from traffic which doesn't come from an end-user.
$query = $_POST['keyword'];
$site = $_POST['site'];
$url = "https://ajax.googleapis.com/ajax/services/search/web?v=1.0&"
    . "q={$query}+Site:{$site}&userip=USERS-IP-ADDRESS";

// sendRequest
// note how referer is set manually
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_REFERER, /* Enter the URL of your site here */);
$body = curl_exec($ch);
curl_close($ch);

// now, process the JSON string
$json = json_decode($body);
// now have some fun with the results... 
```

# php - 将上传的多个文件存储在不同的文件夹中

> ID：11375951
> 
> 赞同：1
> 
> 时间：2012-07-07T14:44:05.000
> 
> 标签：php

我可以在一个数组中调用我所有的多个文件，它可以存储在一个特定的文件夹中，例如。“./文件/”。

```
Code for my form:
<form id="Student" name="Student" method="post" action="uploaded.php" enctype="multipart/form-data">
<input name="upload[]" id="Assign" type="file"/>
<input name="upload[]" id="Testpapers" type="file"/>
<input name="upload[]" id="others" type="file"/>
<input type="submit" name="submit" value="Submit">

Code for uploaded.php:
$number_of_uploaded_files = 0;
for ($i = 0; $i < count($_FILES['upload']['name']); $i++) 
{
 if ($_FILES['upload']['name'][$i] != '') 
{
    $dir = "documents/";
    $number_of_uploaded_files++;
    $uploaded_files[] = $_FILES['upload']['name'][$i];
    move_uploaded_file($_FILES['upload']['tmp_name'][$i], $dir. $_FILES['upload']['name'][$i])          

    } 
```

是否可以将它们分别存储在不同的文件夹中？就像将它们存储在“documents/assign”然后“documents/testpapers”中。我想不出一个想法来检测数组索引是否属于分配或试卷，其他人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T14:48:39.863

`id`不会传递到服务器端。

但是您可以像下面这样分配密钥。

```
<input name="upload[assign]" id="Assign" type="file"/>
<input name="upload[testpapers]" id="Testpapers" type="file"/>
<input name="upload[others]" id="others" type="file"/> 
```

在服务器端，您可以使用`foreach`它来循环它。

```
foreach ($_FILES['upload']['name'] as $key => $name) {
  //...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T14:49:01.423

只需更改字段名称。然后您可以通过 $i 访问通知，但通过名称并决定要做什么。

# java - 你如何将java注解处理器集成到java插件中

> ID：11375953
> 
> 赞同：3
> 
> 时间：2012-07-07T14:44:07.010
> 
> 标签：java, hibernate, gradle

我有一个项目，布局如下：

```
src/
  java
  generated 
```

src/java 包含使用由[hibernate 元模型注释处理器](http://www.hibernate.org/subprojects/jpamodelgen.html)生成的 jpa 元模型类的 jpa 实体和查询类。

将注释处理合并到 java 插件中的最佳方法是什么？

我目前定义了以下任务，但它具有对 compileJava 的任务依赖性，这将失败，因为某些代码依赖于注释处理器生成的类。

```
task processAnnotations(type: Compile) {
    genDir = new File("${projectDir}/src/generated")
    genDir.mkdirs()
    source = ['src/java']
    classpath = sourceSets.test.compileClasspath
    destinationDir = genDir
    options.compilerArgs = ["-proc:only"]
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-22T11:32:29.057

这是一个简单的设置，可以与 netbeans 无缝集成。Javac 基本上会在没有太多干预的情况下完成所有需要的工作。其余的都是一些小技巧，可以使它与 Netbeans 等 IDE 一起工作。

```
apply plugin:'java'

dependencies {
    // Compile-time dependencies should contain annotation processors
    compile(group: 'org.hibernate...', name: '...', version: '...')
}

ext {
    generatedSourcesDir = file("${buildDir}/generated-sources/javac/main/java")
}

// This section is the key to IDE integration.
// IDE will look for source files in both in both
//
//  * src/main/java
//  * build/generated-sources/javac/main/java
//
sourceSets {
    main {
        java {
            srcDir 'src/main/java'
            srcDir generatedSourcesDir
        }
    }
}

// These are the only modifications to build process that are required.
compileJava {
    doFirst {
        // Directory should exists before compilation started.
        generatedSourcesDir.mkdirs()
    }
    options.compilerArgs += ['-s', generatedSourcesDir]
} 
```

就是这样。Javac 将完成剩下的工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-08T20:38:52.697

之所以`processAnnotations`依赖，`compileJava`是因为你把测试编译类路径放在了前一个任务的编译类路径上，而测试编译类路径包含了编译后的生产代码（即输出`compileJava`）。

至于如何最好地解决手头的问题，您不需要单独的编译任务。Java 编译器可以调用注解处理器并一次编译它们生成的源代码（连同原始源代码）（请参阅[注解处理](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/javac.html#processing)）。您需要做的一件事是将注释处理器放在编译类路径上：

```
configurations {
    hibernateAnnotationProcessor
}

dependencies {
    hibernateAnnotationProcessor "org.hibernate: ..."
}

compileJava.compileClasspath += configurations.hibernateAnnotationProcessor 
```

（您不想将注释处理器添加到`compile`配置中，因为那样它将被视为生产代码的依赖项。）

据我所知，这就是它的全部内容（假设您使用的是 JDK6 或更高版本）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-14T17:14:47.547

从 gradle 4.6 开始，您只需在适当的配置中定义处理器的依赖关系：

```
dependencies {
    ...

    annotationProcessor 'org.hibernate:hibernate-jpamodelgen:4.3.7.Final'
} 
```

参考：[https ://docs.gradle.org/4.6/release-notes.html#added-annotationprocessor-configurations](https://docs.gradle.org/4.6/release-notes.html#added-annotationprocessor-configurations)

# android - Android上的“全球”ProgressDialog

> ID：11375963
> 
> 赞同：1
> 
> 时间：2012-07-07T14:46:30.993
> 
> 标签：android, progressdialog

我需要在我的 android 应用程序（网络活动）上执行一个长时间运行的任务。我使用一个新线程来做到这一点。这工作正常。

问题是我需要使用此过程的结果更新我的 sqlite 数据库，并且在进行此更新时我不能让用户进行任何 UI 交互。

我正在考虑使用 ProgressDialog 来强制用户等待。但是在创建此 ProgressDialog 时使用什么上下文？问题是我不知道用户现在正在使用什么活动。所以我需要某种方式来阻止以全局方式工作的用户界面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T14:54:12.653

你一个[`AsyncTask`与一个`ProgressDialog`](https://stackoverflow.com/questions/4538338/progressdialog-in-asynctask)。

你确定这是你正在寻找的行为吗？你真的要在用户的任务中间随机弹出一个对话框吗？这听起来不像是一个很好的用户体验。理想情况下，您希望在不干扰用户的情况下执行这些操作……您确定这是不可能的吗？（也许你可以提供更详细的信息）。

# c# - 通过linq获取一个属性的集合

> ID：11375964
> 
> 赞同：1
> 
> 时间：2012-07-07T14:46:32.220
> 
> 标签：c#, xml, c#-4.0, xml-parsing, linq-to-xml

我有一个 xml 文件。

```
<BOOK bnumber="1" bname="Book">
    <CHP cnumber="1">
        <VER vnumber="1">This is the sentence 1.</VER>
        <VER vnumber="2">This is the sentence 2.</VER>
        <VER vnumber="3">This is the sentence 3.</VER>
   </CHP>
   <CHP cnumber="2">
        <VER vnumber="1">Hello World 1.</VER>
        <VER vnumber="2">Hello World 2.</VER>
        <VER vnumber="3">Hello World 3.</VER>
        <VER vnumber="4">Hello World 4.</VER>
   </CHP>
   <!--MANY: Thousand records-->
</BOOK> 
```

我想获取属性“cnumber”。结果：

```
Chapter={"CHP 1";"CHP 2",....}; 
```

我未完成的代码：

```
XDocument xdoc = XDocument.Load("Book.xml");
        var temp = xdoc.Descendants("CHP").Where(x => x.Attribute("cnumber").Value != "0"); 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T14:50:53.510

看起来您可能可以使用：

```
var chapters = xdoc.Descendants("CHP")
                   .Select(x => "CHP " + x.Attribute("cnumber").Value)
                   .ToList(); 
```

目前尚不清楚为什么您需要一个`Where`子句 - 当然，您提供的*样本*`cnumber`数据中没有一个是 0 或不存在的`cnumber`。如果你需要考虑到这一点，你应该明确地说出来。

（顺便说一句，你真的需要“CHP”部分吗？为什么不只是有一个`List<int>`？）

# opengl - 什么是opengl中的片段？和其他基本图形问题

> ID：11375965
> 
> 赞同：1
> 
> 时间：2012-07-07T14:47:08.830
> 
> 标签：opengl, shader, rendering

什么是帧缓冲区？

什么是后台缓冲区？

一个像素可以有多个颜色值吗？

什么是渲染？（渲染的输入和输出是什么？）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-07T15:05:21.247

帧缓冲区是一些内存，用于保存当前显示在屏幕上的数据。写入帧缓冲区的任何内容都会在下一次屏幕更新时显示在屏幕上（通常每秒发生 60 次）。

后台缓冲区通常是一些可能用作帧缓冲区的内存，但目前还不是。您通常将下一帧数据绘制到后台缓冲区中，然后告诉显卡使用该部分内存作为帧缓冲区。当您这样做时，之前用作帧缓冲区的内存将成为您的新后台缓冲区，因此您可以将要显示的下一帧绘制到其中 - 当它准备好时，您告诉显卡交换再次缓冲，以便显示。

片段是我所说的“潜在像素”。例如，当您栅格化一条线时，您最终会得到一些类似像素的数据。但是，如果那条线的一部分隐藏在其他东西后面，其中一些片段将永远不会显示在屏幕上，因此它们永远不会变成像素。您可能还有（例如）一条部分透明的线，因此它会在它显示在屏幕上之前与它后面的任何东西混合。然而，为了给出稍微不同的观点，DirectX 将所有这些都称为像素，无论它们是否显示在屏幕上。

一个像素是所有处理的最终结果，因为它被存入后台缓冲区，准备显示。它只有一种颜色。该颜色通常具有三个组成部分：红色、绿色和蓝色。主要是为了视频播放，一些显卡还支持一些YCrCb模式，在这种情况下，三个分量是Y、Cr和Cb。即使它们可用，也很少使用它们（几乎我见过它们使用的唯一一次是生成将与 YCrCb 视频混合的叠加层）。

渲染是用于许多不同事物的术语之一，因此如果没有一些上下文，几乎不可能精确定义。

# opencv - 如何使用opencv使用点列表剪切图像

> ID：11375966
> 
> 赞同：1
> 
> 时间：2012-07-07T14:47:15.077
> 
> 标签：opencv

我有一个图像和一个由点列表（多边形）给出的选择。我的目标是获得另一个图像，其中除了选择之外的所有内容都是透明的。

这个问题有两个部分： * 如何从点列表中创建掩码？* 使用蒙版创建新图像的最佳方式是什么？我在考虑 cvCopy 但如何处理 alpha 通道？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T15:03:52.227

我有一个类似的问题，我以一种奇怪（不是很快）的方式解决了它：

1.  提取图像的红色、绿色和蓝色通道（使用`extractChannel`）。
2.  `bitwise_and`在每个通道和多边形蒙版图像之间进行操作。
3.  将它们合并回来（使用`merge`函数）。

请注意，如果您有单通道图像，则只需执行`bitwise_and`.

**C++**代码：

```
void createPOI(const Mat& src, const Mat& polyMat, Mat& dst)
{
    vector<Mat> array(3);

    for (int i=0; i<3; i++)
    {
        extractChannel(src, array[i], i);
        bitwise_and(array[i], polyMat, array[i]);
    }

    merge(array, dst);
} 
```

您可以使用/函数创建`polyMat`遮罩（取决于您的多边形）。例如：`fillPoly``fillConvexPoly`

```
Mat polyMat = Mat::zeros(size, CV_8UC1);
fillConvexPoly(polyMat, polygon, Scalar(255)); 
```

# php - 语法错误，意外的 '}' - 很奇怪

> ID：11375967
> 
> 赞同：-3
> 
> 时间：2012-07-07T14:47:19.657
> 
> 标签：php

我正在使用下面的代码删除旧文件，但它一直在说：`syntax error, unexpected '}'`，但我找不到在哪里，请帮我修复它..

```
function destroy($dir) {
$mydir = opendir($dir);
while($file = readdir($dir)) {
    if($file != "." && $file != "..") {
        chmod($dir.$file, 0777);
        if(is_dir($dir.$file)) {
            chdir('.');
            while($dir.$file) {
                if(date("U",filectime($file) >= time() - 3600)
                {
                    unlink($dir.$file)
                }
            }

        }
        else
            unlink($dir.$file) or DIE("couldn't delete $dir$file<br />");
    }
}
closedir($dir);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T14:48:46.337

```
function destroy($dir) {
$mydir = opendir($dir);
while($file = readdir($dir)) {
    if($file != "." && $file != "..") {
        chmod($dir.$file, 0777);
        if(is_dir($dir.$file)) {
            chdir('.');
            while($dir.$file) {
                if(date("U",filectime($file) >= time() - 3600)) // missing )
                {
                    unlink($dir.$file); // missing ;
                }
            }

        }
        else
            unlink($dir.$file) or DIE("couldn't delete $dir$file<br />");
    }
}
closedir($dir);
} 
```

# ios - 将图钉添加到 MapView 时的委托方法

> ID：11375971
> 
> 赞同：0
> 
> 时间：2012-07-07T14:47:51.737
> 
> 标签：ios, mkmapview

这可能是另一个愚蠢的问题 - 但是当引脚添加到 MapView 时是否可以调用 MKMapViewDelegate 方法？我已经尝试了对我来说似乎很明显的那些 - 例如 didAddAnnotationView 但要么我没有正确设置我的课程，要么它不是正确的 - 如果有的话！

谢谢，

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T15:01:18.860

我不认为有任何这样的委托方法。`mapView:didAddAnnotationViews:`很接近，但它可能只会在这些引脚实际上即将出现在屏幕上时被调用。

# php - 从其他文件中的类访问文件中的变量

> ID：11375972
> 
> 赞同：1
> 
> 时间：2012-07-07T14:47:54.700
> 
> 标签：php, class, variables

如果我有一个带有变量的 config.php 文件，就像这样......

**配置.php**：

```
$cnf['dbhost'] = "0.0.0.0";
$cnf['dbuser'] = "mysqluser";
$cnf['dbpass'] = "mysqlpass"; 
```

然后如何从另一个文件中的类访问这些变量，例如...

**公司/db.class.php**：

```
class db() {

  function connect() {
    mysql_connect($cnf['dbhost'], $cnf['dbuser'], $cnf['dbpass']);
  }

}
$db = new db(); 
```

因此，我可以在另一个文件中使用该类，例如...

**索引.php**：

```
<html>
  <?php
    include('config.php');
    include('inc/db.class.php');
    $db->connect();
  ?>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T14:50:44.860

在 db 脚本的开头包含配置文件[include](http://php.net/manual/en/function.include.php)、[require](http://php.net/manual/en/function.require.php)或[require_once 。](http://php.net/manual/en/function.require-once.php)您还需要`$cnf`在要使用的函数中指定为全局变量，否则您无法访问全局变量：

```
include "../config.php";

class db() {

  function connect() {
      global $cnf;
      mysql_connect($cnf['dbhost'], $cnf['dbuser'], $cnf['dbpass']);
  }

}
$db = new db(); 
```

**编辑**：在大型项目中，我更喜欢使用包含所有 php 文件的 boot.php，因此我不需要在每个文件中包含我需要的所有内容。有了这个，我只需要将引导包含在 index.php 中，并且必须处理所有定义。它有点慢，但真的很舒服。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T14:50:59.057

只需包含`config.php`在您的`inc/db.class.php`.

**编辑**（回答评论中提出的查询）

你可以做的是`init.php`像下面这样，

```
include('config.php');
include('db.class.php');
include('file.php'); 
```

因此，您的类将能够从`config.php`. 现在对你来说，`index.php`你只需要包含`init.php`所有的类、配置等。

# objective-c - 显示在线图像 Objective C

> ID：11375979
> 
> 赞同：0
> 
> 时间：2012-07-07T14:49:22.660
> 
> 标签：objective-c, uiview, uiimage

我尝试获取在线图像以发布在 UIView 上，但它没有加载。有人可以帮我吗

我用过 [http://snipplr.com/view.php?codeview&id=23024](http://snipplr.com/view.php?codeview&id=23024)

它没有加载，我不断收到错误。

我正在尝试构建类似[http://itunes.apple.com/us/app/quotes/id504790688?mt=8的东西](http://itunes.apple.com/us/app/quotes/id504790688?mt=8)

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T15:09:18.280

```
[self.imageView setImageWithURL:[NSURL URLWithString:@"http://www.example.com/path/to/image.jpg"] placeholderImage:[UIImage imageNamed:@"imageToShowIfOriginalNotFound.png"]]; 
```

这是假设您使用的是[SDWebImage](https://github.com/rs/SDWebImage)库

# c++ - 开发散列算法：RGB 颜色 ID 和字符串到 Int

> ID：11375980
> 
> 赞同：0
> 
> 时间：2012-07-07T14:49:34.820
> 
> 标签：c++, arrays, string, colors, hash

在我正在编写的程序中，我想开发一种散列算法，它可以将 RGB 颜色、字符串或两者都映射到唯一且相对较小的索引。

这里的目标是尽可能减少碰撞，保证没有两种颜色通过算法是相似的（在感知上；例如红色、蓝色、橙色）。

以我有限的知识，数组似乎是直接访问数据结构的最佳选择，但我不想创建一个非常大的数组。鉴于我必须在 C++ 中为数组分配内存，我在开发这样的算法时遇到了麻烦。

任何提示表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T15:07:47.127

您可以使用它的颜色或标签`std::map`来访问它。`Subject`无需为此开发自己的哈希算法，您所要做的就是创建比较运算符，在这种情况下这应该很容易，假设您使用 32 位整数作为 RGB 颜色，a`std::string`用于`label`.

**编辑：**实际上，除了地图（没有自定义运算符）之外，您不需要做任何其他事情，就像：

```
typedef map<int, MyClass*, greater<int> > IntClassMap;
typedef map<std::string, MyClass*, greater<std::string> > StrClassMap;
IntClassMap inttable;
StrClassMap strtable;

void adding_the_data(){
    inttable[0x11223344] = myclasspointer1;
    inttable[0x11223345] = myclasspointer2;
    inttable[0x11223346] = myclasspointer3;

    strtable["test string1"] = myclasspointer1;
    strtable["test string2"] = myclasspointer2;
    strtable["test string3"] = myclasspointer3;
}

void accessing_example(){
    strtable["test string1"]->something;
} 
```

`std::map`非常快，我认为您不需要（或找到）比这更快的解决方案。

# android - 在 Fragment 中使用 onPrepareOptionsMenu 而不是 onCreateOptionsMenu

> ID：11375981
> 
> 赞同：8
> 
> 时间：2012-07-07T14:49:55.933
> 
> 标签：android, android-fragments, events, menu, android-menu

我在设置一些片段菜单项时遇到了问题`ActionBar`，我找到了解决它的方法，但我不明白为什么它会起作用。

我想在`onCreateOptionsMenu`方法中从菜单 xml 文件中膨胀菜单项后立即更改菜单项的可见性。该代码似乎工作正常，但没有明显的效果。我解决了在方法中膨胀菜单`onCreateOptionsMenu`但在方法中改变它的可见性的问题`onPrepareOptionsMenu`。

我想知道的是为什么改变可见性`onCreateOptionsMenu`不起作用。

我能做什么`onPrepareOptionsMenu`我不能做`onCreateOptionsMenu`什么？

这里有什么模式可以遵循吗？

谢谢！

以下是相关代码，以防万一：

```
public class MyFragment extends Fragment {

    @Override
    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
        super.onCreateOptionsMenu(menu, inflater);
        inflater.inflate(R.menu.my_menu, menu);

        // This does not work, compiles and runs fine, but has no visible effect
        MenuItem someMenuItem = menu.findItem(R.id.some_menu_item);
        someMenuItem.setVisible(false);
    }

    @Override
    public void onPrepareOptionsMenu(Menu menu) {
        super.onPrepareOptionsMenu(menu);

        // This does work
        MenuItem someMenuItem = menu.findItem(R.id.some_menu_item);
        someMenuItem.setVisible(false);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-17T15:08:25.487

您应该`super.onCreateOptionsMenu(menu, inflater);`在创建菜单后调用，而不是之前调用。这会将菜单在层次结构和其他片段中向上发送，或者活动可能想要自己添加项目。

活动负责显示和管理菜单，因此如果您在将其发送到活动后更改可见性，则不会发生任何事情。

现在，当您调用`super.onPrepareOptionsMenu(menu);`它时，它会“准备”它的菜单，但它现在会考虑您在其中所做的更改`onCreateOptionsMenu`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:15:41.127

可能代码应该返回 true 以使菜单可见，这意味着您应该将 `return true;`语句放在`onCreateOptionsMenu()`and`onPrepareOptionsMenu()`中。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-30T23:23:55.163

我使用 onPrepareOptionsMenu 来更新菜单上的哪些项目应该处于活动状态，哪些项目应该灰显/删除，具体取决于活动的当前状态。使用菜单项的 setVisible 方法来控制它当前是否显示在菜单上。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-06-20T09:48:27.317

这对我有用

```
public class ContentFragment extends android.support.v4.app.Fragment {
@Nullable
@Override
public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.content_frame,container,false);
    setHasOptionsMenu(true);
    return v;
}

@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    inflater.inflate(R.menu.note_menu,menu);
    super.onCreateOptionsMenu(menu, inflater);
}
} 
```

试试看

# android - Canvas Android 的缩放部分

> ID：11375982
> 
> 赞同：1
> 
> 时间：2012-07-07T14:50:05.890
> 
> 标签：android, canvas, drawing, scale, custom-view

我一直在寻找和寻找，尝试和尝试，但似乎无法弄清楚这一点。我有一个画布，上面绘制了各种对象（没有图像/位图）。我想在它上面绘制另一个形状（透明）并缩放它后面的元素 - 就像放大镜一样。有什么想法、建议、指点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T16:58:44.793

使用以下命令从显示`Bitmap`的所需部分创建一个新的缩放比例：。将 设置为缩放到所需的级别。将此新设置为放大视图的可绘制对象。`Bitmap``Canvas`[`createBitmap(Bitmap, int, int, int, int, Matrix, boolean)`](http://developer.android.com/reference/android/graphics/Bitmap.html#createBitmap%28android.graphics.Bitmap,%20int,%20int,%20int,%20int,%20android.graphics.Matrix,%20boolean%29)`Matrix``Bitmap`

# jquery - 使用 jquery 读取 json 数据的问题（聊天应用程序）

> ID：11375991
> 
> 赞同：1
> 
> 时间：2012-07-07T14:51:34.573
> 
> 标签：jquery, ajax, json, chat

我在读取 JSON 数据时遇到问题。

**模型.php**

```
class chatApp extends database{

public $row = array();
public function IO(){

    //SELECTING FROM DATABASE MAKE QUERY ....

     $this->row = $mysql->show; //result

     return $this->row; //return it

}} 
```

**控制器.php**

```
if(isset($_GET['showmessage'])){

$chatApp = new chatApp(); // chat app object

$row = $chatApp->IO();
echo json_encode($row);} // echo it like json 
```

**视图.php**

```
function update(){

     $.ajax({  
          type: "POST",  
           url: " http://localhost/chat/controller.php?showmessage", 
           dataType: 'json',
          success: function(data) {  

            $("#chat").html(data); //The data ?

       }  
   });    
 } setInterval (update, 1000); 
```

所以问题是我无法在聊天 div 中显示数据？我做错了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T14:56:32.533

尝试：

```
$("#chat").html(jQuery.parseJSON(data)); 
```

或使用`getJSON`代替`ajax`：

```
function update(){
    $.getJSON("http://localhost/chat/controller.php?showmessage",
        function(data) {
         $("#chat").html(data);
         setTimeout(update,1000);
    });
}
setTimeout(update,1000); 
```

使用`setTimeout`而不是`setInterval`

# javascript - 函数只接受整数？

> ID：11375992
> 
> 赞同：0
> 
> 时间：2012-07-07T14:51:42.403
> 
> 标签：javascript

我对这个函数有一个问题，只有整数除外，我需要它只接受在 2-15 个字符之间有效的字符串吗？感谢任何帮助。

```
function getDescription() {
var Description = [];
Description = prompt("Enter the description: ", "");
    while (!(Description >= 2 && Description <= 15))
    {
        Description = prompt("Error! The description must be between (2 - 15) characters in length.\nEnter the description: ", "");
    }
return Description;
}

getDescription() 
```

编辑：我认为我遇到的另一个问题是我输入的是它实际上是作为数组存储在描述中的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T14:54:31.843

你正在寻找`.length`. **[轻阅读材料。](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/length)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-07T14:54:36.453

该`prompt`函数的返回值是一个字符串，因此您需要检查该字符串的长度，而不是它的值：

```
while (!(Description.length >= 2 && Description.length <= 15)){
  // ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-07T14:54:37.283

使用`length`属性：

```
while (!(Description.length >= 2 && Description.length <= 15)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-07T14:55:28.787

您可以使用正则表达式来匹配用户输入的 2 到 15 位数字：

```
function getDescription() {
    var description = prompt("Enter the description: ", "");
    if (description.test(/^\d{2,15}$/)) {
        return description;    
    }
    else {
        return getDescription();    
    }
}

getDescription()​;​ 
```

# python - 为什么我的范围函数打印未截断的浮点数？

> ID：11375998
> 
> 赞同：1
> 
> 时间：2012-07-07T14:52:43.610
> 
> 标签：python

我做了这个范围函数，所以我可以有一个整数步之外的东西，它可以工作，但我想知道为什么浮点数没有被截断。

```
def drange(start, step):
    values = []
    r = start
    while r >= 0:
        values.append(r)
        r += step
    return values

print drange(2, -0.2) 
```

调试后，我发现不是这种打印

```
[2, 1.8, 1.6, 1.4, 1.2, 1.0, 0.8, 0.6, 0.4, 0.2, 0] 
```

它改为打印

```
[2, 1.8, 1.6, 1.4000000000000001, 1.2000000000000002, 1.0000000000000002, 0.8000
000000000003, 0.6000000000000003, 0.4000000000000003, 0.2000000000000003, 2.7755
575615628914e-16] 
```

大声笑，难怪我的模块不工作。为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-07T14:57:58.840

这是正确的行为，因为无法`0.2 = 1/5`以 2 为基数表达，就像无法以`1/3`10 为基数表达一样。

[`decimal`](http://docs.python.org/library/decimal.html)如果要以 10 为底进行计算，请改用。

此外，您应该真正使用生成器，如

```
def drange(start, step):
    r = start
    while r >= 0:
        yield r
        r += step
print list(drange(2, -0.2)) 
```

这允许用户`drange`在不为整个列表分配内存的情况下迭代这些值。