# StackOverflow 问答 11998000-11998999

# javascript - 鼠标滚动事件

> ID：11998328
> 
> 赞同：1
> 
> 时间：2012-08-17T00:35:15.120
> 
> 标签：javascript, jquery

我正在编写一些代码来检测您何时向上或向下滚动鼠标。我希望用户左右滚动，而不是上下滚动。我的代码检测鼠标移动以及它是否向上和向下。我的问题是，jQuery 或 Javascript 中是否有代码允许用户根据事件发生的时间向左或向右滚动，也就是鼠标向上或向下滚动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T01:12:46.203

[jQuery.mousewheel](https://github.com/brandonaaron/jquery-mousewheel/) + [jQuery.scrollTo](https://github.com/flesler/jquery.scrollTo)。

```
.mousewheel(function(e, d, dx, dy) {
  $(this).scrollTo((dy<0?'+':'-')+'='+10*Math.abs(dy)+'px', 0, {axis: 'x'});
  e.preventDefault();
});​ 
```

[演示](http://jsfiddle.net/PyCkq/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T01:16:38.590

将函数绑定到您的用户鼠标向上移动并使用 jQuery 的 scrollTo 插件。这是一个详细说明它的教程：http: [//flesler.blogspot.com/2007/10/jqueryscrollto.html](http://flesler.blogspot.com/2007/10/jqueryscrollto.html)

希望这可以帮助！

# ruby - 如何从机架中间件内部访问 Thin::Connection？

> ID：11998329
> 
> 赞同：0
> 
> 时间：2012-08-17T00:35:19.357
> 
> 标签：ruby, rack, thin

我想`set_comm_inactivity_timeout(0)`从 Rack Middleware 内部在我的 EM Connection 上运行。

这将允许我为升级的 Web 套接字设置一次超时，而为 Rails 应用设置一次超时。

我的网络套接字都位于中间件链的首位，因此它不会对 Rack::Lock 等造成严重破坏。

我看到有些人只是在 Thin 中进行无限超时，然后在之后注入[Rack::Timeout](https://github.com/kch/rack-timeout)之类的东西。

有没有办法从 Rack 中间件访问 EM::Connection 或连接签名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T01:07:34.107

做到这一点的唯一方法是薄薄的猴子补丁：

```
class Thin::Connection
  alias :thin_process      :process
  def process
    set_comm_inactivity_timeout(0)
    thin_process
  end
end 
```

# web-deployment - 如何部署 html5 样板发布文件夹（可能使用 git-ftp）

> ID：11998334
> 
> 赞同：0
> 
> 时间：2012-08-17T00:35:38.180
> 
> 标签：web-deployment, html5boilerplate, git-ftp

我仍在寻找使用 html5 样板 + 构建脚本、gitHub 和可能 git-ftp 的良好开发 -> 部署工作流程（主要用于小型网站）。

问题是我想不出一种很酷的方法来将 html5 样板的发布文件夹部署到我的网络服务器（我通常没有 ssh 访问权限）

你怎么做呢？

如果网站使用像 redaxo 这样的 CMS 怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T16:24:51.730

只需在“发布”文件夹中**使用**git-ftp：

1.  从“发布”文件夹中创建一个 git 存储库

    ```
    cd publish
    git init
    git add .
    git commit -m "This is now a git repo" 
    ```

2.  在 publish/.git/config 中配置 git-ftp，然后使用：

    ```
    git ftp init 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T21:10:55.517

使用 git-ftp 的 syncroot 选项指定要同步的目录，就好像它是 git 项目根路径一样。在 [git-ftp] 下的 .git/config 中添加

```
syncroot = publish/ 
```

# javascript - Jquery- 获取图像的 alt 标签内容并添加为文本（获取重复项）

> ID：11998338
> 
> 赞同：1
> 
> 时间：2012-08-17T00:35:57.080
> 
> 标签：javascript, jquery, html

我有一个小脚本，它采用图像的 alt 标签并将其添加为文本，如下所示：

```
 $(".field-item a img").each(function(i, ele) {
          $(".field-item").append("<span>"+$(ele).attr("alt")+"</span>");
      });​ 
```

我遇到的问题是我得到了重复，其中每个 alt 标签都作为文本添加到每个图像中。所以对于“ `image-1`”，`image-1`并`image-2`作为文本添加，我只希望将相应的 alt 标签添加为文本。

我厌倦了使用`.closest()`例如

```
$(".field-item").closest().append("<span>"+$(ele).attr("alt")+"</span>"); 
```

...但这似乎并没有奏效。我在这里提琴：

[http://jsfiddle.net/6pAZE/4/](http://jsfiddle.net/6pAZE/4/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T00:40:13.023

您可以使用该`closest()`方法，目前您`field-item`在每次迭代中选择所有具有类的元素，请尝试以下操作：

```
 $(".field-item a img").each(function(i, ele) {
     var alt = this.alt;
     $(this).closest(".field-item").append("<span>"+alt+"</span>");
     // or $(this).after("<span>"+alt+"</span>");
 }); 
```

**[小提琴](http://jsfiddle.net/6pAZE/5/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T00:41:34.297

您需要上到`.closest('.field-item')`然后附加您的文本。

[http://jsfiddle.net/6pAZE/6/](http://jsfiddle.net/6pAZE/6/)

# javascript - 为什么“0 === -0”在 JavaScript 中为真？

> ID：11998340
> 
> 赞同：7
> 
> 时间：2012-08-17T00:36:18.643
> 
> 标签：javascript, numbers, operators, zero

在[http://wtfjs.com/](http://wtfjs.com/)最近的一篇文章中。一位作者在没有解释的情况下写了以下内容，这恰好是真的。

```
0 === -0 //returns true 
```

我对 === 运算符的理解是，如果操作数指向同一个对象，它会返回 true。

此外，- 运算符返回对操作数负值的引用。使用此规则，0 和 -0 不应相同。

那么，为什么 0 === -0 呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T00:38:57.940

`===`并不总是意味着指向同一个对象。它在对象上执行，但在值类型上，它比较值。因此这是如何工作的：

```
var x = 0;
var y = 0;
var isTrue = (x === y);
document.write(isTrue); // true 
```

JavaScript 使用 IEEE 浮点标准，其中 0 和 -0 是两个不同的数字，但是，[ECMAScript 标准](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)规定解析器必须将 0 和 -0 解释为相同：

> §5.2（第 12 页）
> 
> 数学运算，如加法、减法、否定、乘法、除法，以及本节后面定义的数学函数，应始终理解为计算数学实数的精确数学结果，不包括无穷大，**也不包括负零区别于正零**。本标准中对浮点运算进行建模的算法在必要时包括显式步骤，以处理无穷大和有符号零并执行舍入。如果将数学运算或函数应用于浮点数，则应将其理解为应用于该浮点数所表示的精确数学值；这样的浮点数必须是有限的，如果它是**+0 或 -0 那么相应的数学值就是 0**。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T00:40:02.770

事实上，即使在位级别上，0 和 -0 也不相同。但是，对于 +/-0 实施了一种特殊情况，因此它们比较相等。

=== 运算符在应用于原始数字时按值进行比较。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-17T00:40:35.317

原始数字不是对象。您正在对数字进行值比较，而不是对对象进行身份比较。

正零等于负零。

`===`这是来自运算符的比较算法

> 如果 Type(x) 是 Number，那么
> 
> *   如果 x 是 NaN，则返回 false。
>     
>     
> *   如果 y 是 NaN，则返回 false。
>     
>     
> *   如果 x 与 y 的数值相同，则返回 true。
>     
>     
> *   **如果 x 为 +0 且 y 为 -0，则返回 true。**
>     
>     
> *   **如果 x 为 -0 且 y 为 +0，则返回 true。**
>     
>     
> *   返回假。

# c# - Oracle 自定义类型参数

> ID：11998341
> 
> 赞同：0
> 
> 时间：2012-08-17T00:36:25.520
> 
> 标签：c#, oracle, odac

我是 oracle 的新手。我的程序有这样的参数

```
@param1 title_type.title_type_code%type 
```

title_type 是自定义类型 ok.. 现在

**我如何使用 ODAC(OracleParameter object) 从 c# 传递参数 %type 令人困惑，你需要作为对象传递还是作为字符串传递任何人知道请帮忙？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T00:43:43.040

这只是对`title_type.title_type_code`正在使用的类型的引用，作为在两个地方硬编码类型的替代方法。

您需要查找该表的定义，并将参数作为任何内容传递（可以是 VARCHAR，也可以是 NUMBER，我怀疑它是一个对象）。

# jdbc - 正在修复 sql 长度错误 4gl 10.2B

> ID：11998342
> 
> 赞同：3
> 
> 时间：2012-08-17T00:36:26.447
> 
> 标签：jdbc, progress-4gl, openedge, progress-db

我正在尝试使用 opensge jdbc 连接器从现有进度数据库中提取数据，但我遇到了列宽问题。

这是阻碍我的错误。

> [DataDirect][OpenEdge JDBC Driver][OpenEdge] PUB.Menu 表中的 TabDisplayName 列的值超过了其最大长度或精度。

我看过很多帖子，每个帖子都提供不同的建议，这就是我到目前为止所给出的：

1.  通过数据字典手动修改 SQL 宽度。
    *   我对 PUB.Menu.TabDisplayName 进行了快速检查，发现最大值为 44 个字符
    *   将宽度设置为 x(50) 无济于事，然后将 x(100) 设置为非理性愤怒，再次没有运气。
2.  使用 SUBSTR() SQL 函数截断字段*- 不是最佳但总比没有好*
    *   我得到了奇怪的结果。它在 sqlexp 中运行良好，但在 java 环境中，它就像从未选择过的列一样。
3.  使用 dbtool 自动修复选项 #2 的宽度问题
    *   在选择所有表和“区域”（不确定它们是什么......）并提交最终选项后，我将返回到 proenv cmdline，就好像什么都没发生过一样。
4.  通过 4gl 以编程方式修改 sql 宽度
    *   这是我发现我还没有尝试过的唯一选择。
    *   我有点不愿意尝试这个，只是因为手动修改失败。这也是一个实时开发环境（仅对我而言），尽管我经常拍摄快照，但我试图把它搞得一团糟。

在 unix 机器上运行进度 10.2B。

任何意见和建议将不胜感激。

-谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T01:52:44.210

dbtool 选项是最好的。它就是为此而设计的。在 proenv 中，您应该会看到如下内容：

> proenv> dbtool s2k
> 
> ```
>  DATABASE TOOLS MENU - 10.2B
>        ---------------------------
> 
>   1\. SQL Width & Date Scan w/Report Option
>   2\. SQL Width Scan w/Fix Option
>   3\. Record Validation
>   4\. Record Version Validation
>   5\. Read or Validate Database Block(s)
>   6\. Record Fixup
>   7\. Schema Validation
>   9\. Enable/Disable File Logging
>           Q. Quit
> 
>   Choice: 2 
> ```
> 
> : (0=单用户 1=自助服务 >1=#threads)？1
> 
> 高于当前最大值的填充百分比：100
> 
> ：（表号还是全部）？全部
> 
> : （区号还是全部）？全部
> 
> ：（详细级别0-3）？0
> 
> 读取的总记录：31357
> 
> 发现 SQLWidth 错误：0，发现日期错误：0
> 
> 已修复的 SQLWidth 错误：0

如果您的数据库已启动并运行服务器，请在 connect: 提示符处选择“1”。如果没有，请选择“0”。

选择 100 进行填充以使字段宽度加倍。

如果您不确定，请在“体育”数据库的副本上尝试。如果您想深入了解它正在做什么，请使用更高级别的详细信息。

在小型开发数据库上运行不需要很长时间。（在“运动”上基本上是瞬时的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-02T13:13:03.727

可以使用 substring (field.name,1,maxlength) 选项创建视图并使用 PUB2.viewname 代替 pub.tablename

```
 DROP VIEW PUB2."accounts";
    CREATE VIEW PUB2."accounts" ( 
    "ACC-TYPE",
    "ACCOUNT-NAME",
    ANALITIC,
    ARCH,
    COUNT1,
    CURRENCY,
    PLAN,
    QUANTITY,
    "RID-ANOBJECT",
    "RID-APP",
    TRANSIT ) 
    AS select "acc-type",
    SUBSTRING("account-name", 1, 130),
    "analitic",
    "arch",
    "count1",
    "currency",
    "plan",
    "quantity",
    "rid-anobject",
    "rid-app",
    "transit"
    FROM PUB."accounts";
    COMMIT; 
```

使用 sqlexp 进行自动创建： sqlexp account -H localhost -S ' + db-port + ' -user sysprogress -password sysprogress -infile recreateSQLviews.sql -outfile recreateSQLviews.log

这是代码：

```
 def var num-port as integer.
    for first _Servers where _Servers._Server-Type = "Login" no-lock:
        num-port = _Servers._Server-PortNum.
    end.
    if num-port < 0 then num-port = num-port + 65536.
    if num-port = 0 then do:
       message "Define -S parameter for Database" view-as alert-box.
       RETURN.
    end.
    message num-port.

    /* ttSQLWidth table: SQL WIDTH for all tables */

    def var execstr as char.
    def var rez-str as char.
    def var db-port as char. /* -S port */
    db-port = STRING(num-port).

    DEFINE TEMP-TABLE ttSQLWidth NO-UNDO
        FIELD tableName   AS CHARACTER
        FIELD tableNum    AS INTEGER
        FIELD fieldName   AS CHARACTER
        FIELD sqlWidth    AS INTEGER
        FIELD requireFix  AS LOGICAL INIT FALSE
        FIELD actualWidth AS INTEGER
        FIELD newWidth    AS INTEGER
    INDEX tableNum  tableNum
    INDEX tableName tableName.

    FOR EACH _File NO-LOCK WHERE _Tbl-Type = "T":
        FOR EACH _Field OF _File WHERE _Field._Data-type = "character":
            if _field._extent > 0 then next.
            CREATE ttSQLWidth.
            ASSIGN tableName = _File._File-name
                tableNum = _File._File-num
        fieldName = _Field._Field-name
        sqlWidth = _Field._Width.
        RELEASE ttSQLWidth.
        END. /* FOR EACH _Field */
    END. /* FOR EACH _File */

    DEFINE VARIABLE bTab        AS HANDLE      NO-UNDO.
    DEFINE VARIABLE hQuery      AS HANDLE      NO-UNDO.
    DEFINE VARIABLE queryString AS CHARACTER   NO-UNDO.

    FOR EACH ttSQLWidth:
        CREATE BUFFER bTab FOR TABLE tableName.
        CREATE QUERY hQuery.
        hQuery:ADD-BUFFER(bTab).

        message tablename.
        queryString = "FOR EACH " + tableName + " WHERE LENGTH(" + fieldName + ") >= " + STRING(sqlWidth) + " BY LENGTH(" + fieldName + ") DESC".
        hQuery:QUERY-PREPARE(queryString).
        hQuery:QUERY-OPEN().

        IF hQuery:GET-NEXT() THEN DO:
            ASSIGN actualWidth = LENGTH(bTab:BUFFER-FIELD(fieldName):BUFFER-VALUE)
                   requireFix = TRUE.
        END. /* IF .. THEN DO */

        hQuery:QUERY-CLOSE.
        DELETE OBJECT hQuery.

        bTab:BUFFER-RELEASE().
        DELETE OBJECT bTab.

    END. /* FOR EACH ttSQLWidth */

    def var add-pr   as integer initial 10\.  /* % from max */
    def var maxWidth as integer initial 249\. /* maxwidth */

    FOR EACH ttSQLWidth WHERE ttSQLWidth.requireFix = TRUE:

        ttSQLWidth.newWidth = TRUNCATE ( (ttSQLWidth.actualWidth + add-pr) / add-pr, 0 ) * add-pr.
        ttSQLWidth.newWidth = INTEGER( ttSQLWidth.newWidth).
        if ttSQLWidth.newWidth > maxWidth then ttSQLWidth.newWidth = maxWidth.

    END.

    /* sql script generation */ 

    OUTPUT TO value("recreateSQLviews.sql").
    def var lst-field as char.
    FOR EACH ttSQLWidth WHERE BREAK BY ttSQLWidth.tableName:
       IF FIRST-OF(ttSQLWidth.tableName) 
          THEN run MakeSQLViews(ttSQLWidth.tableName).

    END.
    OUTPUT CLOSE. 

    /* sql script execution */

    execstr = 'sqlexp account -H localhost -S ' + db-port + ' -user sysprogress -password sysprogress -infile recreateSQLviews.sql -outfile recreateSQLviews.log'.

    input through value(execstr).
    repeat:
      IMPORT UNFORMAT rez-str.
      message rez-str.
    end.
    INPUT CLOSE.

    RETURN.

    PROCEDURE MakeSQLViews:
    define input parameter tableName as character.

    def var str_tmp as char.
    def var str_tmp1 as char.
    def var str as char initial "count,sum,double,row,date,level,area,number,primary".

    def var fieldName  as char.
    def var fieldName1 as char.

    FOR EACH _file WHERE _file._file-name = tableName AND 
                         _file._file-num GT 0 AND _file._file-num LT 32000 NO-LOCK:   
       fieldName = "".    
       FOR EACH _Field OF _File NO-LOCK:            

              str_tmp = '"' + _Field._Field-name + '"'.
              FOR FIRST ttSQLWidth where ttSQLWidth.tableName = _file._file-name   and 
                                         ttSQLWidth.fieldName = _Field._Field-name and 
                                         ttSQLWidth.requireFix = TRUE:
                  str_tmp = 'SUBSTRING("' + _Field._Field-name + '", 1, ' + STRING(ttSQLWidth.newWidth) + ')'. 
              END.
              fieldName  = fieldName + (IF(fieldName = "") THEN ("") ELSE ("," + chr(10) + chr(9))) + str_tmp.    
              str_tmp1   = ( IF ( INDEX ( _Field._Field-name, "-" ) = 0 ) 
                                THEN ( _Field._Field-name ) 
                                ELSE ( '"' + _Field._Field-name + '"' )).

              if LOOKUP ( _Field._Field-name, str, "," ) > 0 then str_tmp1 = '"' + _Field._Field-name + '"'.

              fieldName1 = fieldName1 + (IF(fieldName1 = "") THEN ("") ELSE ("," + chr(10) + chr(9))) + UPPER(str_tmp1). 

       END. /* FOR EACH _Field */    

       PUT UNFORMATTED 'DROP VIEW PUB2."' + _file._file-name + '";' SKIP.     
       PUT UNFORMATTED 'CREATE VIEW PUB2."' + _file._file-name + '" ( ' + chr(10) chr(9) + fieldName1 +  ' ) ' + chr(10) + 
           'AS select ' + fieldName + chr(10) + 
           'FROM PUB."' + _file._file-name + '";' SKIP.     
       PUT UNFORMATTED 'COMMIT;' SKIP(1). 
    END.

    END. 
```

# mysql - 在调用 Zend_Db::update() 和 insert() 时将值设置为 null

> ID：11998348
> 
> 赞同：0
> 
> 时间：2012-08-17T00:36:58.970
> 
> 标签：mysql, zend-framework, zend-db, zend-db-table

我的问题与[使用 Zend_Db 时如何将值设置为 NULL 完全相同](https://stackoverflow.com/questions/1173690/how-to-set-a-value-to-null-when-using-zend-db)

**但是，该问题中给出的解决方案对我不起作用。**我的代码如下所示。`updateOper`在前端单击更新时，我会调用Model 类。在内部`updateOper`，我调用了另一个函数`trimData()`，我首先修剪所有空白，然后我还检查是否有一些字段进入`empty`或者`''`我想将它们设置为默认值或 NULL 值。因此我正在使用`new Zend_db_expr('null')`and `new Zend_db_expr('default')`。

代码如下：

```
private function trimData(&$data ) {

    //Trim whitespace characters from incoming data.
    foreach($data as $key => $val)
    { 
        $data[$key] = trim($val);
        if($data['notes'] == '') {
            error_log("set notes to null/default value");
            $data['notes'] = new Zend_db_expr('DEFAULT');
        }
    }

}

public function updateOper($data, $id)
{
    $result = 0;

    $tData = $this->trimData($data);

    error_log("going to add data as ".print_r($data, true));
    $where = $this->getAdapter()->quoteInto('id = ?', $id);
    $result = $this->update($data, $where);

    return $result;
} 
```

该`error_log`语句打印`$data array`如下：

```
[id] => 10    
[name] => alpha
[notes] => DEFAULT 
```

**因此，该`notes`列的值 ='DEFAULT' 而不是选择表定义中给出的默认值。**

我一直试图找出问题所在，但未能找到解决方案。我将衷心感谢您的帮助。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:11:43.997

您的 $data['notes'] 正在更改为的`__toString()`值，`Zend_Db_Expr`而不是保留实际对象。

也许参考是阻塞的事情。否则，您可能需要将表达式声明移动到实际的更新查询中。

# android - AsyncQueryHandler 插入时抛出 SQLException

> ID：11998353
> 
> 赞同：0
> 
> 时间：2012-08-17T00:37:36.667
> 
> 标签：android, android-sqlite

我试图用`AsyncQueryHandler`一个单独的线程在我的数据库中插入项目但是当我去尝试插入一些东西时，我得到了一个 SQLException

例外

```
08-16 18:57:13.662: E/SQLiteLog(17319): (1) table Part1s has no column named name
08-16 18:57:13.672: E/SQLiteDatabase(17319): Error inserting frame_number=2 name=Jeff game_id=1
08-16 18:57:13.672: E/SQLiteDatabase(17319): android.database.sqlite.SQLiteException: table Part1s has no column named name (code 1): , while compiling: INSERT INTO Part1s(frame_number,name,game_id) VALUES (?,?,?)
08-16 18:57:13.672: E/SQLiteDatabase(17319):    at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
08-16 18:57:13.672: E/SQLiteDatabase(17319):    at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)
08-16 18:57:13.672: E/SQLiteDatabase(17319):    at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)
08-16 18:57:13.672: E/SQLiteDatabase(17319):    at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
08-16 18:57:13.672: E/SQLiteDatabase(17319):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:58)
08-16 18:57:13.672: E/SQLiteDatabase(17319):    at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:31)
08-16 18:57:13.672: E/SQLiteDatabase(17319):    at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1467)
08-16 18:57:13.672: E/SQLiteDatabase(17319):    at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1339)
08-16 18:57:13.672: E/SQLiteDatabase(17319):    at com.tyczj.bowling.providers.Games.insert(Games.java:382)
08-16 18:57:13.672: E/SQLiteDatabase(17319):    at android.content.ContentProvider$Transport.insert(ContentProvider.java:201)
08-16 18:57:13.672: E/SQLiteDatabase(17319):    at android.content.ContentResolver.insert(ContentResolver.java:864)
08-16 18:57:13.672: E/SQLiteDatabase(17319):    at android.content.AsyncQueryHandler$WorkerHandler.handleMessage(AsyncQueryHandler.java:96)
08-16 18:57:13.672: E/SQLiteDatabase(17319):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-16 18:57:13.672: E/SQLiteDatabase(17319):    at android.os.Looper.loop(Looper.java:137)
08-16 18:57:13.672: E/SQLiteDatabase(17319):    at android.os.HandlerThread.run(HandlerThread.java:60)
08-16 18:57:13.672: E/AndroidRuntime(17319): FATAL EXCEPTION: AsyncQueryWorker
08-16 18:57:13.672: E/AndroidRuntime(17319): android.database.SQLException: Failed to insert row into content://com.tyczj.bowling.providers.Games/Part1s
08-16 18:57:13.672: E/AndroidRuntime(17319):    at com.tyczj.bowling.providers.Games.insert(Games.java:387)
08-16 18:57:13.672: E/AndroidRuntime(17319):    at android.content.ContentProvider$Transport.insert(ContentProvider.java:201)
08-16 18:57:13.672: E/AndroidRuntime(17319):    at android.content.ContentResolver.insert(ContentResolver.java:864)
08-16 18:57:13.672: E/AndroidRuntime(17319):    at android.content.AsyncQueryHandler$WorkerHandler.handleMessage(AsyncQueryHandler.java:96)
08-16 18:57:13.672: E/AndroidRuntime(17319):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-16 18:57:13.672: E/AndroidRuntime(17319):    at android.os.Looper.loop(Looper.java:137)
08-16 18:57:13.672: E/AndroidRuntime(17319):    at android.os.HandlerThread.run(HandlerThread.java:60) 
```

这是我插入的地方

```
 for(int i = 0;i<10;i++){
        int num = i+1;
        values.put(Games.NAMES_FRAME_NUM,num);
        values.put(Games.NAMES_GAME_ID,gameid);
        values.put(Games.NAMES_NAME,name);
        qHandler.startInsert(0, null, Games.NAMES_URI,values);
//          getContentResolver().insert(Games.NAMES_URI, values);
        names(i,name);
        values.clear();
        values.put(Games.PART1_FRAME_NUM,num);
        values.put(Games.PART1_NUM,"0");
        values.put(Games.PART1_GAME_ID,gameid);
        qHandler.startInsert(0, null, Games.PART1_URI,values);
//          getContentResolver().insert(Games.PART1_URI, values);
        values.clear();
        values.put(Games.PART2_FRAME_NUM,num);
        values.put(Games.PART2_NUM,"0");
        values.put(Games.PART2_GAME_ID,gameid);
        qHandler.startInsert(0, null, Games.PART2_URI,values);
//          getContentResolver().insert(Games.PART2_URI, values);
        values.clear();
        values.put(Games.TOTALS_FRAME_NUM,num);
        values.put(Games.TOTALS_FRAME_TOTAL,"0");
        values.put(Games.TOTALS_GAME_ID,gameid);
        qHandler.startInsert(0, null, Games.TOTALS_URI,values);
//          getContentResolver().insert(Games.TOTALS_URI, values);
        values.clear();
//          ContentValues values = new ContentValues();
        values.put(Games.POCKETS_BOWLER_ID,bowlerClickedID);
        values.put(Games.POCKETS_FRAME_NUM,i);
        values.put(Games.POCKETS_GAME_ID,gameID);
        values.put(Games.POCKETS_TEAM_ID, teamSelectedID);
        values.put(Games.POCKETS_TOURNAMENT_ID, tournamentID);
        values.put(Games.POCKETS_NUM, 0);
        values.put(Games.POCKETS_SEASON, pref.getLong(Preferences.SELECTED_SEASON, 1));
        qHandler.startInsert(0, null, Games.POCKETS_URI,values);
//          getContentResolver().insert(Games.POCKETS_URI, values);
        values.clear();
    } 
```

现在我知道错误说`no such column`，但是正如您在我的 for 循环中看到的那样，我在每次插入后清除了值，如果我只是使用正常值`getContentResolver().insert()`，我没有问题并且永远不会出现此错误，所以看起来值以某种方式混淆了？

在有人说只使用之前，`AsyncTask`我已经这样做了，并且在执行 for 循环时，插入仍然保持 UI。看到[这个问题](https://stackoverflow.com/questions/11604914/contentprovider-insert-always-runs-on-ui-thread)我正在经历什么

那么无论如何会导致这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T00:41:31.623

我认为您可能在进行异步更新时对同一个 ContentValues 对象进行并发访问。

您必须等到`onInsertComplete`收到回调或更简单的方法是每次都获取一个新的 ContentValues 对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T01:10:58.653

> android.database.sqlite.SQLiteException: table Part1s has no column named name (code 1): ，编译时：INSERT INTO Part1s(frame_number,name,game_id) VALUES (?,?,?)

仅仅因为您认为您在数据库中有该列，并不意味着它确实存在。检查您的数据库的创建语句以及表的内容并**确认**。只有这样你才能确定你的问题。

# linux - 强制TIOCSCTTY后如何将控制终端归还给原主人？

> ID：11998354
> 
> 赞同：1
> 
> 时间：2012-08-17T00:37:50.490
> 
> 标签：linux, tty

tty_ioctl(4)

TIOCSCTTY 整数参数

使给定终端成为调用进程的控制终端。调用进程必须是会话领导者，并且还没有控制终端。如果此终端已经是不同会话组的控制终端，则 ioctl 会因 EPERM 而失败，除非调用者是 root（更准确地说：具有 CAP_SYS_ADMIN 能力）并且 arg 等于 1，在这种情况下终端被盗， *并且所有进程让它作为控制终端失去它。*

如何将控制终端归还给原主人？

# ruby-on-rails - 会话是否适用于 Heroku 上的多个网络测功机？

> ID：11998355
> 
> 赞同：8
> 
> 时间：2012-08-17T00:37:53.493
> 
> 标签：ruby-on-rails, ruby-on-rails-3, multithreading, session, heroku

如果您在 Heroku 上运行带有多个 Web dyno 的 Rails 3 应用程序，

1.  每次点击应用程序时，您通常会连接不同的网络测功机吗？
2.  会话可以跨不同的网络测功机工作吗？
3.  它是否适用于不同的 Rails 会话存储（ActionDispatch::Session::CookieStore、ActiveRecord::SessionStore 和 ActionDispatch::Session::CacheStore）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-17T01:11:08.733

简而言之，**是**的 - 会话将跨多个网络测功机工作。

会话跨 web dynos 工作——因为 Rail 的会话支持设计允许它这样做。如果有的话，web dyno 模型正是 Rail 的水平缩放方式。

**1\. 每次你点击应用程序时，你通常会连接不同的网络测功机吗？**

基于heroku文档：

> 路由网格负责确定应用程序的 Web dyno 在 dyno 流形中的位置，并将 HTTP 请求转发到这些 dyno 之一。Dyno 选择是使用随机选择算法执行的。

所以测功机的选择是随机的……但是测功机必须安装您的应用程序。因此，如果您有多个测功机，那么您最终可能会连接到不同的测功机（这很重要，因为这有助于负载平衡和高可用性）

**2\. 会话可以跨不同的网络测功机工作吗？**

是的。大多数 Web 堆栈通过执行以下操作来支持会话：

1.  分配一个会话 id - 这是一个唯一的 id，它通常设置为一个会话 cookie，以便浏览器始终将带有任何 HTTP 请求的 id 发送到原始主机
2.  提供将会话 ID 映射到实际会话数据的存储

因此，通过此过程，可以支持会话，因为每个入站 HTTP 请求都有会话 ID，Web dyno 在处理您的请求时可以访问该会话 ID。

**3\. 它是否适用于不同的 Rails 会话存储（ActionDispatch::Session::CookieStore、ActiveRecord::SessionStore 和 ActionDispatch::Session::CacheStore）**

**ActionDispatch::Session::CookieStore** 是的。cookie 存储将加密的会话数据存储为 cookie。因此，您的浏览器会将所有会话数据（加密）发送回主机，然后将其解密以在您的应用程序中使用。

**ActiveRecord::SessionStore** 是的。cookie 存储将加密的会话数据存储在数据库表中。然后将 ID 分配为 cookie。因此，您的浏览器将 ID 发送到主机，然后用于从数据库加载会话数据。由于所有网络测功机都与数据库连接，这意味着它也受支持。

**ActionDispatch::Session::CacheStore** 是的，但您需要缓存存储服务（例如 MemCache 插件）。cookie 存储将加密的会话数据存储在缓存存储 (memcache) 中，这是跨所有 Web dyno 的共享服务。然后将 ID 分配为 cookie。因此，您的浏览器将 ID 发送到主机，然后用于从缓存存储 (memcache) 加载会话数据。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T00:42:51.453

我不相信 Heroku 会努力将连续的请求发送到同一个 web dyno。我可能是错的，他们会做出一些努力，但即使他们这样做了，它也不太可能足够可靠来依赖会话管理。

但是，ActionDispatch::Session::CookieStore 肯定会起作用，因为数据存储在加密的客户端 cookie 中。ActiveRecord::SessionStore 将起作用，因为数据存储在数据库中，可能由所有 Web dynos 共享。如果您使用在所有客户端之间共享的 MemCached 服务器或类似的共享缓存，ActiveDispatch::Session::CacheStore 应该可以工作。

唯一不起作用的是本地文件系统上的某种基于文件的会话存储，而像多个 Heroku dynos 这样的情况正是这种类型的会话存储在现代 Web 应用程序中不常见的原因。

# javascript - 在 Javascript 中访问同级命名空间，在 SEAF 中更改命名空间变量

> ID：11998360
> 
> 赞同：1
> 
> 时间：2012-08-17T00:39:19.937
> 
> 标签：javascript, jquery, oop, namespaces, closures

我无法确定项目的名称空间。

到目前为止，我的命名空间看起来像这样：

```
var NS = NS || {};
NS.Utils = NS.Utils || {};
NS.Models = NS.Models || {};
NS.Views = NS.Views || {};

NS.App = (function () {

this.data = "hello";

var init = function () {

    alert(data);

};

return {

    data: this.data,
    init: init,

};

} ()); 
```

然后我用这个初始化它：

```
(function ($, global, data) {

$(global).click(function() {

    NS.App.init();

});

NS.App.data = "hello testing";
NS.App.init();

}(jQuery, window, data)); 
```

但由于某种原因，第二个 NS.App.init() 调用不使用更新后的 NS.App.data 变量。我怎样才能解决这个问题？

另外，如何引用 NS.App 中的其他命名空间？例如，如果我想在 NS.App 中使用 NS.Utils？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T00:49:15.673

更改`alert(data)`为`alert(this.data)`。

# iphone - 按下按钮时

> ID：11998361
> 
> 赞同：0
> 
> 时间：2012-08-17T00:39:40.710
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我如何设置一个按钮（连接了 IBAction 和 UIButton）以在按下按钮时继续运行 IBAction 或功能，连续运行功能直到按钮松开。

我应该附加一个值更改的接收器吗？

简单的问题，但我找不到答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T00:59:45.070

```
[myButton addTarget:self action:@selector(buttonIsDown) forControlEvents:UIControlEventTouchDown];
[myButton addTarget:self action:@selector(buttonWasReleased) forControlEvents:UIControlEventTouchUpInside];

- (void)buttonIsDown
{
     //myTimer should be declared in your header file so it can be used in both of these actions.
     NSTimer *myTimer = [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(myRepeatingAction) userInfo:nil repeats:YES];
}

- (void)buttonWasReleased
{
     [myTimer invalidate];
     myTimer = nil;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T01:50:03.830

将调度源 iVar 添加到您的控制器...

```
dispatch_source_t     _timer; 
```

然后，在您的 touchDown 操作中，创建每隔这么多秒触发一次的计时器。你会在那里做你的重复工作。

如果您的所有工作都发生在 UI 中，则将队列设置为

```
dispatch_queue_t queue = dispatch_get_main_queue(); 
```

然后计时器将在主线程上运行。

```
- (IBAction)touchDown:(id)sender {
    if (!_timer) {
        dispatch_queue_t queue = dispatch_get_global_queue(
            DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
        _timer = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, 0, 0, queue);
        // This is the number of seconds between each firing of the timer
        float timeoutInSeconds = 0.25;
        dispatch_source_set_timer(
            _timer,
            dispatch_time(DISPATCH_TIME_NOW, timeoutInSeconds * NSEC_PER_SEC),
            timeoutInSeconds * NSEC_PER_SEC,
            0.10 * NSEC_PER_SEC);
        dispatch_source_set_event_handler(_timer, ^{
            // ***** LOOK HERE *****
            // This block will execute every time the timer fires.
            // Do any non-UI related work here so as not to block the main thread
            dispatch_async(dispatch_get_main_queue(), ^{
                // Do UI work on main thread
                NSLog(@"Look, Mom, I'm doing some work");
            });
        });
    }

    dispatch_resume(_timer);
} 
```

现在，请务必同时注册 touch-up-inside 和 touch-up-outside

```
- (IBAction)touchUp:(id)sender {
    if (_timer) {
        dispatch_suspend(_timer);
    }
} 
```

确保销毁计时器

```
- (void)dealloc {
    if (_timer) {
        dispatch_source_cancel(_timer);
        dispatch_release(_timer);
        _timer = NULL;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T00:42:29.297

UIButton 应该使用 touchDown 事件调用开始方法，并使用 touchUpInside 事件调用结束方法

# android - 将 google 用户配置文件导入到 android 上的远程数据库

> ID：11998362
> 
> 赞同：3
> 
> 时间：2012-08-17T00:39:42.583
> 
> 标签：android, google-api-java-client, android-networking

我正在android上构建一个具有登录`facebook`和登录功能的应用程序`Google`。假设用户选择使用谷歌登录，我想请求许可并从他的个人资料中收集姓名、年龄、性别、位置、电子邮件等基本信息，并将其保存在我的服务器数据库中。

问题是：我应该使用哪个 api 来获取这些信息？我认为 google+ api 不是一个合适的选择，因为不是每个 google 用户都有一个。检查[Google-api-java-client](http://code.google.com/p/google-api-java-client/)文档后，我仍然找不到任何有用的东西。
这个基本操作似乎没有库。

唯一似乎相关的是[Google Apps Profile API](https://developers.google.com/google-apps/profiles/)，但
1\. 它已经过时了。
2.它不是免费的。

我太困惑了，我希望有人能指导我度过这个噩梦。

**编辑**：找到了一些新的相关信息，但我仍然希望为此找到一个官方的 java 库： [https ://oauthssodemo.appspot.com/step/1](https://oauthssodemo.appspot.com/step/1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:48:19.653

找到了我要找的东西：http: [//javadoc.google-api-java-client.googlecode.com/hg-history/c35433d3077dc4eb89dccb25618dc70dbd375d65/apis/oauth2/v2/com/google/api/services/oauth2/model/Userinfo .html](http://javadoc.google-api-java-client.googlecode.com/hg-history/c35433d3077dc4eb89dccb25618dc70dbd375d65/apis/oauth2/v2/com/google/api/services/oauth2/model/Userinfo.html)

# c# - 如何在 Visual Studio 中连接到 Taleo 企业版 API？

> ID：11998365
> 
> 赞同：3
> 
> 时间：2012-08-17T00:39:49.843
> 
> 标签：c#, asp.net, visual-studio-2010, web-services, taleo

我正在尝试从 Visual Studio 中的解决方案连接到 Taleo API。Enterprise API（不要与 Taleo Business Edition API 混淆）是一个基于 SOAP 的 Web 服务，具有许多 WSDL 端点。

我可以在 SoapUI 中成功查询 API，但是，尝试在 Visual Studio 中添加服务引用时运气不佳。

这是我尝试过的：

1.  添加了对 WSDL 的引用（注意出现的操作）。到现在为止还挺好...

    ![在此处输入图像描述](../Images/f689900955a32bb6f7f3f0909665ead3.png)

2.  Visual Studio 成功生成了必要的类，但是**上面圈出的方法却无处可寻**。我已经搜索了几个小时的 API，甚至在 Reflector 中进行了一些搜索……它们是真正的 MIA。

    ![在此处输入图像描述](../Images/0f45ae496cfe49ad585ae951c01eed69.png)

几点观察：

*   我可以在浏览器中查看原始 WSDL XML 时看到方法（如果您需要示例，我可以发布它）
*   我可以在 SoapUI 中很好地查询这三种方法
*   我的理解是这些方法只支持 HTTP POST，所以也许 Visual Studio 正在执行 GET 并且服务正在拒绝它？（我已经解决了这个问题，我看到的只是 200 个响应）
*   我在代理后面（虽然，我能够在 SoapUI 中连接而无需配置代理）

此时，我正在考虑编写自己的 SOAP 客户端以使用 HttpWebRequest 执行查询，但我想在深入研究之前先尝试找出问题所在。

知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-28T20:28:58.497

我也遇到了 API 问题。当我尝试按照 OP 的描述添加服务引用时，我在错误列表中收到了一系列错误，包括以下内容：

> 错误：System.Object[] 类型的成员 BusinessGoal.Items 隐藏了 multilingualStringField[] 类型的基类成员 BaseMultilingualEntity.Items。使用 XmlElementAttribute 或 XmlAttributeAttribute 指定新名称。

我能够使用较旧的 Web 引用机制来生成代理类。您可以在添加服务参考 → 高级 → 添加 Web 参考下找到它。这将生成一个 Reference.cs 文件，其中包含服务的代理类代码。您需要在 Visual Studio 中选择 Show All Files 才能看到隐藏在生成的 Web Reference 下的该文件。（也可以使用 Visual Studio 自带的 WSDL.exe 命令行工具生成 Reference.cs 文件）

使用这种方法，我的代理类包含缺少的方法，但我仍然需要手动编辑 Reference.cs 文件以将所有“[][]”替换为“[]”，因为许多生成的类型被错误地创建为锯齿状阵列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T08:08:29.413

我无法通过“添加服务引用”向导或旧的“Web 引用”方法添加对 Taleo API 的引用。我最终编写了自己的 SOAP 客户端，使用 HttpWebRequest 直接获取和发布 XML。

# python - SWIG Python 结构数组

> ID：11998369
> 
> 赞同：7
> 
> 时间：2012-08-17T00:40:11.007
> 
> 标签：python, c, swig

我一直在寻找几天试图弄清楚如何将结构数组转换为 Python 列表。我有一个函数，它返回一个指向数组开头的指针。

```
struct foo {
    int member;
};

struct foo *bar() {
    struct foo *t = malloc(sizeof(struct foo) * 4);
    ... do stuff with the structs ...
    return t;
} 
```

从 Python 调用函数后，我得到一个结构，但尝试访问数组的其他元素会导致错误：

```
foo = bar()
print foo[1].member
TypeError: 'foo' object does not support indexing 
```

我试过使用`%array_class`但无济于事。我还尝试将函数定义为在 SWIG 接口文件中返回一个数组：

```
extern struct foo [ANY] bar(); 
```

SWIG 文档非常详尽，但我似乎无法弄清楚这一点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T10:00:13.907

您尝试使用的想法`[ANY]`因多种原因而行不通。虽然主要`ANY`可以在类型映射中使用，以允许相同的类型映射与不同的固定大小的数组一起工作，这不是你所拥有的。

C 的语法也不在那里。你不能写：

```
int[4] bar() {
  static int data[4];
  return data;
} 
```

或者：

```
int bar()[4] {
  static int data[4];
  return data;
} 
```

在标准 C 中。您可以获得的最接近的是：

```
int (*bar())[4] {
  static int data[4] = {1,2,3,4};
  return &data;
} 
```

但这并不是真的更容易包装。

但是，可以使用 使简单的解决方案起作用`%array_class`，例如：

```
%module test

%inline %{
  struct foo {
    int member;
  };

  struct foo *bar() {
    struct foo *arr = malloc(sizeof(struct foo) * 4);
    for (int i = 0; i < 4; ++i) 
      arr[i].member = i;
    return arr;
  }
%}

%include <carrays.i>
%array_class(struct foo, fooArray); 
```

这让我可以：

```
Python 3.2.3 (default, May  3 2012, 15:54:42) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import test
>>> arr = test.fooArray.frompointer(test.bar())
>>> arr
<test.fooArray; proxy of <Swig Object of type 'fooArray *' at 0xb6f332a8> >
>>> arr[0]
<test.foo; proxy of <Swig Object of type 'struct foo *' at 0xb6f33038> >
>>> arr[1]
<test.foo; proxy of <Swig Object of type 'struct foo *' at 0xb6f33380> >
>>> arr[2]
<test.foo; proxy of <Swig Object of type 'struct foo *' at 0xb6f33398> >
>>> arr[3]
<test.foo; proxy of <Swig Object of type 'struct foo *' at 0xb6f330c8> >
>>> 
```

不过（可能）通过注入代码来自动转换指向数组类型的指针，我们可以走得更好，通过在`bar()`SWIG 看到的之前添加以下内容：

```
%pythonappend bar() %{
    # Wrap it automatically
    val = fooArray.frompointer(val)
%} 
```

所以你现在可以像这样使用它：

```
Python 3.2.3 (default, May  3 2012, 15:54:42) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import test
>>> test.bar()[1].member
1
>>> arr = test.bar()
>>> arr[3].member
3 
```

您需要注意内存所有权。到目前为止，在这些示例中，内存已泄漏。您可以`%newobject`用来告诉 SWIG 该内存归 Python 端所有，但它会过早释放（一旦不再引用原始返回值），因此您需要安排将原始值保留更长时间. 一个完整的示例，它将原始指针保存在数组类的实例中，以保持引用，只要数组包装器本身是：

```
%module test

%pythonappend bar() %{
    # Wrap it automatically
    newval = fooArray.frompointer(val)
    newval.ptr_retain = val
    val = newval
%}

%newobject bar();

%inline %{
  struct foo {
    int member;
  };

  struct foo *bar() {
    struct foo *arr = malloc(sizeof(struct foo) * 4);
    for (int i = 0; i < 4; ++i) 
      arr[i].member = i;
    return arr;
  }
%}

%include <carrays.i>
%array_class(struct foo, fooArray); 
```

Notice though that the array class this generates is unbounded, exactly like a `struct foo*` in C. This means you can't iterate over it in Python - the size is unknown. If the size is genuinely fixed, or you have a way of knowing the size somehow you can wrap this in a much nicer (in my view) way by writing a typemap that returns a PyList. It's a bit more work to write, but makes the interface seem nicer on the Python side.

# svn - 当我想在 subversion 上修改一个二进制文件时，我可以一次锁定所有分支上的文件吗？

> ID：11998378
> 
> 赞同：2
> 
> 时间：2012-08-17T00:41:10.167
> 
> 标签：svn, locking, branch

我们有一个 SVN 存储库。存储库上有许多分支。存储库中的大多数文件都是文本文件，但每个分支上都有一些 binray 文件（一些 .xls 和 .fla 文件）。这些二进制文件无法自动合并，所以我们在这些文件上设置了 svn:needs-lock。

问题是，即使我在一个分支上锁定了一个文件，其他人仍然可以在另一个分支上修改该文件。最后，当我们合并分支之间的更改时，这些文件会发生冲突。

处理这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T05:51:58.233

另一种方法是让冲突发生并忽略这些文件：

*   “ [and](https://stackoverflow.com/questions/2113430/purpose-of-the-mine-full-and-theirs-full-commands) [commands](https://stackoverflow.com/questions/2113430/purpose-of-the-mine-full-and-theirs-full-commands)[的目的`mine-full``theirs-full`](https://stackoverflow.com/questions/2113430/purpose-of-the-mine-full-and-theirs-full-commands)”：`mine-full`可以帮助保持您的版本
*   “ [Subversion - 总是使用我的一组文件来解决冲突](https://stackoverflow.com/questions/2002135/subversion-always-resolve-conflicts-using-mine-for-a-set-of-files)”：这是另一种方法，但它不适用于没有冲突的合并。

# facebook - Facebook 报告“og:type=website”，但抓取报告“og:type=article”！

> ID：11998383
> 
> 赞同：1
> 
> 时间：2012-08-17T00:42:05.500
> 
> 标签：facebook, facebook-opengraph, meta-tags

我有一个 news.read 应用程序已经被 Facebook 接受，但是随着一些 Wordpress 更新它停止工作，因为 Facebook 假设我的文章的“og：type”设置为“website”，因此没有任何作用。

问题是我可以通过浏览器检查的源具有正确的“og:type”，即使单击“查看我们的抓取工具为您的 URL 看到的确切内容”，它也会报告正确的 og:type！

这是某种错误还是我错过了什么？

这是一个示例 URL：[http ://www.jornalinsolito.com/um-ato-sexual-que-dura-ha-47-milhoes-de-anos/](http://www.jornalinsolito.com/um-ato-sexual-que-dura-ha-47-milhoes-de-anos/)

任何帮助都是有用的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T01:18:49.723

> 您在 . 这可能是因为您的格式错误并且它们在解析树中的位置较低，或者您不小心将 Open Graph 标记放在了错误的位置。无论哪种方式，您都需要在标签可用之前对其进行修复。

[在这里结帐](https://developers.facebook.com/tools/debug/og/object?q=http://www.jornalinsolito.com/um-ato-sexual-que-dura-ha-47-milhoes-de-anos/)

# java - 如何多态地使用 java.lang.Number

> ID：11998384
> 
> 赞同：1
> 
> 时间：2012-08-17T00:42:13.333
> 
> 标签：java

我正在尝试多态地使用 java.lang.Number：我有一个列表，其中放置了多个 Double、Integer 等实例，然后我想对它们进行多态算术运算（例如，每个数字加倍）。

我们没有 java.lang.Number 的自动装箱能力，而且我没有找到更好的方法来做到这一点，而不是示例源代码中的 - 不是那么多态 - 方法 multiply(Number n, int factor)接下来......通过这个实现，我们需要一个用于每个算术运算（加法，减法等）的方法

* * *

编辑 - 增强问题：如果我们从抽象的角度考虑 java.lang.Number，我们会认为任何数字都可以是算术运算的一部分，但它似乎并不存在一种简单的加/减/将 / 等 x 乘以数字列表，与它们的类型无关（整数、双精度、短 ...）

* * *

有更好的想法吗？提前致谢 ;）

示例源代码：

```
public class NumberTest {

    private List<Number> list = new ArrayList<Number>();    

    public static void main(String args[]) {
        new NumberTest().start();

    }

    protected void start() {
        this.fillList();
        Number num;
        for (int i = 0; i < list.size(); i++) {
            num = this.multiply(list.get(i), 2);
            list.set(i, num);
        }

        System.out.println(this.toString());
    }

    private void fillList() {
        list.add(new Byte((byte) 12));
        list.add(new Short((short) 20));
        list.add(new Integer(30));
        list.add(new Long(40));
        list.add(new Float(50.123));
        list.add(new Double(60.123));
    }

    private Number multiply(Number n, int factor) {
        if (n instanceof Byte) {
            n = n.byteValue() * factor;
        } else if (n instanceof Short) {
            n = n.shortValue() * factor;
        } else if (n instanceof Integer) {
            n = n.intValue() * factor;
        } else if (n instanceof Long) {
            n = n.longValue() * factor;
        } else if (n instanceof Float) {
            n = n.floatValue() * factor;
        } else if (n instanceof Double) {
            n = n.doubleValue() * factor;
        }
        return n;
    }

    @Override
    public String toString() {
        String result = "";
        for (Number num : list) {
            result += num+"\n";
        }
        return result;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T02:39:02.793

我真的不明白为什么你不能使用 Number.doubleValue() 来做数学。我错过了什么？

例如

```
public Double multiply(Number n, double factor) {
   return new Double(n.getDoubleValue() * factor);
} 
```

编辑添加：

@amano 澄清说他想更改现有 List 中的 Objects，同时*保持它们的原始 type*。我想我的第一个问题是，“为什么”？他的示例使用`Byte`. 将一个字节乘以大多数任何东西通常都会导致溢出。将 a 添加`double`到 an`Integer`将失去精度。`integer`从 a中减去a`Byte`并将结果强制返回到 a`Byte`通常会给出错误的结果。将整数除以整数通常会丢失精度（例如 3/2 = 1，而不是 1.5）。除非您需要绝对完美的精度（例如，为了钱），否则数学上最正确的解决方案是始终转换为双精度并将结果保持为双精度。是的，会有轻微的舍入错误，但没有像 3/2 = 1 或 (byte)23 - 665544 = 谁知道字节是什么？

为什么你会关心这个值最初是一个字节？当你想把它当作一个数字来对待时？数字输入，数字（技术上，双打）输出。

所以我理解得更好，但我仍然缺少一些东西。值保持相同原始类型的约束会导致不准确，以及**更多的工作。** 如果您坚持该约束，是的，您将不得不做很多`instanceof`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T01:33:55.487

镜像 Number 类层次结构：编写您自己的 NumberWrapper 类，并为每个基元编写一个知道实际类型并可以执行正确操作的专用类。

深夜编辑：当然，您总是可以只使用 Number#doubleValue() 并且只使用双打进行处理......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T02:05:46.840

我同意塔索斯的观点，除了写所有这些听起来很乏味......

而不是重新发明轮子，你可以尝试使用这样的东西：[http](http://code.google.com/p/generic-java-math/) ://code.google.com/p/generic-java-math/ 。我自己从来没有使用过这个库，但它看起来像你需要的。

# c# - 解决全局动作过滤器中的依赖关系？

> ID：11998390
> 
> 赞同：1
> 
> 时间：2012-08-17T00:42:37.560
> 
> 标签：c#, asp.net-mvc-3, castle-windsor, action-filter

我从 MVC3 的 HandleErrorAttribute 继承并扩展了一些自定义日志记录。

不过，我正在努力做的一件事是使用 Castle Windsor 巧妙地解决其中的依赖关系。

通常我在 ControllerActionInvoker 的扩展中解决这些依赖关系，但似乎 HandleErrorAttribute 没有通过这里。

我可以从哪里调用它并扩展它？

谢谢。

作为我目前所做的一个例子：[https ://stackoverflow.com/a/6627002/148998](https://stackoverflow.com/a/6627002/148998)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T02:01:45.997

HandleErrorAttribute 是一个`IExceptionFilter`，因此您可能还需要覆盖`InvokeExceptionFilters`您的 ControllerFactory 并在那里注入您的依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T04:33:18.233

我最终做的是扩展 ControllerActionInvoker 并解决那里的任何属性依赖关系，特别是针对异常过滤器。

编码：

```
 public class WindsorActionInvoker : ControllerActionInvoker
    {
        private readonly IKernel _kernel;

        public WindsorActionInvoker(IKernel kernel)
        {
            _kernel = kernel;
        }

        protected override ExceptionContext InvokeExceptionFilters(ControllerContext controllerContext, IList<IExceptionFilter> filters, System.Exception exception)
        {
            foreach (var actionFilter in filters.Where(actionFilter => !(actionFilter.GetType() == controllerContext.Controller.GetType())))
            {
                _kernel.InjectProperties(actionFilter);
            }

            return base.InvokeExceptionFilters(controllerContext, filters, exception);
        } 
```

# automapper - 如何使用自动映射器将两个实体映射到一个？

> ID：11998392
> 
> 赞同：2
> 
> 时间：2012-08-17T00:43:17.190
> 
> 标签：automapper

我有三个实体。

```
public class Book
{
    public string Name {get;set;}
}
public class Author
{
    public string AuthorName {get;set;}
}

public class BookDTO
{
    public string Name {get;set;}
    public string AuthorName {get;set;}
} 
```

如何映射`Book`和`Author`到`BookDTO`？以及如何映射`BookDTO`到`Book`和`Author`？我在我的解决方案中使用了自动映射器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T00:53:00.883

您可以为每个创建一个映射：

```
Mapper.CreateMap<Book, BookDTO>();
Mapper.CreateMap<Author, BookDTO>(); 
```

然后像这样使用它：

```
Book b = new Book { Name = "Gulliver's Travels" };
Author a = new Author { AuthorName = "Jonathan Swift" };

var dto = Mapper.Map<Book, BookDTO>(b);

Mapper.Map<Author, BookDTO>(a, dto); 
```

# sql-server - SSIS - 在任务的表达式中传递对象变量

> ID：11998397
> 
> 赞同：0
> 
> 时间：2012-08-17T00:43:51.843
> 
> 标签：sql-server, sql-server-2008, ssis

在我的 SSIS 包中（在 Sql 2008 R2 上），我有一个 TransferObjectsTask 任务，该任务有一个名为 DatabaseDetails 的属性，它属于 DatabaseInfoCollection 类型。我要做的是为此属性指定一个值，方法是事先在脚本任务中准备它并将其保存在对象类型的变量中，然后将此变量传递给 TransferObjectsTask 任务的 DatabaseDetails 属性。很简单，对吧？

但是，正如您可能已经猜到的那样，我不能这样做。当我在表达式中指定变量时，我得到...

**“无法评估表达式/表达式中不支持变量的数据类型。”**

我怎样才能解决这个问题？

实际上没有什么可以“评估”的，因为表达式只有一个变量名。如果您甚至无法为其指定变量，为什么任务会在表达式中公开属性？没有意义。

我错过了什么？？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T02:50:49.983

您不能在表达式中引用对象。对象数据类型过于通用。您可以从字面上将任何东西推入对象数据类型。想象一下将 100 个数据库的列表推入一个对象变量（使其成为一个数组），然后将该变量传递给 oledb 连接管理器的 InitialCatalog 属性。连接管理器不仅不知道如何处理该对象，而且即使知道了，它也不能一次连接到 100 个数据库。

你到底想做什么？我对 TransferObjectsTask 不熟悉（并且自从产品问世以来一直在做重要的 SSIS 工作）。这是自定义任务吗？它不包含在 SQL 2012 的控制流任务中。有一个传输 SQL Server 对象任务。你指的是这个吗？如果是这样，Powershell 或像 Red Gate 的 SQL Compare 这样的第 3 方工具将是一个更好的选择。SSIS 非常擅长 ETL（在缓冲区中提取、转换，以及从/到各种来源和目的地加载数百万/数十亿条记录）。不过，在管理任务上有点笨拙。我永远不会将它用于简单的管理任务，例如备份、架构更新部署或索引维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:56:57.500

将对象添加到表达式是没有意义的。你怎么知道对象的结构。

你能更具体地说明你想要做什么吗？[传输 SQL Server 对象任务](http://msdn.microsoft.com/en-us/library/ms142159.aspx)只是将 对象从源传输到目标。你想在“DatabaseDetails”上设置什么（我找不到这个属性）

# rrdtool - 自定义 Ganglia 集群图 - 如何显示平均指标值，而不是总指标值

> ID：11998404
> 
> 赞同：5
> 
> 时间：2012-08-17T00:45:24.967
> 
> 标签：rrdtool, ganglia

您如何在自定义图表中显示平均值，而不是总值？

以前，我通过创建自定义 .php 文件成功生成了集群摘要图，如下所述：

[http://sourceforge.net/apps/trac/ganglia/wiki/Custom_graphs](http://sourceforge.net/apps/trac/ganglia/wiki/Custom_graphs)

但是，到目前为止，我一直想显示给定指标的每秒总操作数。但是现在，我有一些时序数据，我想在其中显示所有集群节点的平均（平均）度量值。这是怎么做到的？在我当前的实现中，生成的图表显示了所有节点的总时间值，这没有帮助。

这是.php：

```
<?php

/* Pass in by reference! */
function graph_jmx_times_report ( &$rrdtool_graph ) { 

    global $context,
           $hostname,
           $graph_var,
           $range,
           $rrd_dir,
           $size,
           $strip_domainname;

    if ($strip_domainname) {
       $hostname = strip_domainname($hostname);
    }   

    $jmx = $graph_var;
    $title = $jmx.' Processing Time';
    if ($context != 'host') {
       $rrdtool_graph['title'] = $title;
    } else {
       $rrdtool_graph['title'] = "$hostname $title last $range";
    }   
    $rrdtool_graph['lower-limit']    = '0';
    $rrdtool_graph['vertical-label'] = 'milliseconds';
        $rrdtool_graph['extras']         = '--rigid --base 1024';
    $rrdtool_graph['height'] += ($size == 'medium') ? 89 : 0;

        $series = "DEF:'tot_time'='${rrd_dir}/jmx_tomcat_proc_time_ms.rrd':'sum':AVERAGE"
                ."DEF:'fc_time'='${rrd_dir}/jmx_tomcat_freqcap_lookup_time_75.rrd':'sum':AVERAGE "
                ."DEF:'ro_time'='${rrd_dir}/jmx_tomcat_readonly_lookup_time_75.rrd':'sum':AVERAGE "
                ."DEF:'rt_time'='${rrd_dir}/jmx_tomcat_realtime_lookup_time_75.rrd':'sum':AVERAGE "
                ."AREA:'tot_time'#CFF1FC:'' "
                ."LINE2:'fc_time'#F19A2A:'Freq Cap 75' "
                ."LINE2:'ro_time'#66CC33:'Read-only 75' "
                ."LINE2:'rt_time'#CC99CC:'Realtime 75' "
                ."LINE2:'tot_time'#20ABD9:'Processing Time' "
        ;

    $rrdtool_graph['series'] = $series;

    return $rrdtool_graph;

}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T19:41:38.683

Ganglia 使用的 RRD 汇总`num`除了数据源之外还有一个`sum`数据源。该`num`值指示`sum`从中计算的主机数，并且仅在摘要 RRD 中可用。

`sum`您可以使用 RRDtool CDEF 指令通过除以来计算所有主机的平均值`num`。

这是一个例子：

```
if ($context != 'host') { // cluster or grid summary graph context
    $series = 
     "'DEF:fc_time_sum=${rrd_dir}/jmx_tomcat_freqcap_lookup_time_75.rrd:sum:AVERAGE' " 
    ."'DEF:fc_time_num=${rrd_dir}/jmx_tomcat_freqcap_lookup_time_75.rrd:num:AVERAGE' " 
    ."'CDEF:avg_fc_time=fc_time_sum,fc_time_num,/' " 
    ."'LINE2:avg_fc_time#0000FF:Average Freq Cap 75' ";
} else { // single host graph context
    //here you can't use the num data source
} 
```

该平均值也显示在`sample_report.php`ganglia-web 包含的文件中。

# c# - 如果当前版本的应用程序处于打开状态，如何升级 MSI 包

> ID：11998405
> 
> 赞同：2
> 
> 时间：2012-08-17T00:46:39.177
> 
> 标签：c#, windows-installer

我有一个非常奇怪的场景：我使用以前的 MSI（1.0 版）安装了 WPF 应用程序，我修改了我的应用程序并创建了新的 MSI（2.0 版）。当我安装新的 MSI（2.0 版）并且应用程序未打开时，它会非常顺利地更新旧的 MSI（1.0 版）。

当应用程序打开时，更新会弹出消息：*“应用程序正在运行你想关闭吗”*。即使打开了旧应用程序，是否可以不弹出消息并进行静默更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T01:14:15.077

您使用什么工具来编写您的 MSI？您可以编写自定义操作来关闭应用程序或发送消息告诉应用程序关闭。尽早安排此操作，以使 MSI 不会检测到正在运行的应用程序。

您还可以研究 Windows / Windows Installer 最新版本中存在的“重新启动管理器”功能，它提供了一个非常好的集成来停止、升级和重新启动应用程序的状态。好东西。

# java - 图像重新定位，如 Android 中的 Facebook 封面

> ID：11998406
> 
> 赞同：3
> 
> 时间：2012-08-17T00:46:43.150
> 
> 标签：java, android

我想在我的 android 应用程序中实现像 facebook 封面这样的图像重新定位。其实我没有任何背景来做这件事。我该如何启动它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T00:54:02.230

如果它是**图形**的东西，请查看`opengl`。如果它的刷卡事情检查viewpager。很可能您必须使用`SurfaceView`一些透明度，然后根据需要将图像绘制到表面视图上。

# ios - 在编程流时遇到问题

> ID：11998408
> 
> 赞同：1
> 
> 时间：2012-08-17T00:46:47.350
> 
> 标签：ios, sockets, cocoaasyncsocket

所以这就是问题所在：流没有在正确的时间写入，并且无法从我的服务器获得响应。我知道我正在编写正确的数据，因为当我停止构建时，它会写入服务器并且服务器很高兴。我很困惑为什么这没有在正确的时间发生。

我正在使用 GCDAsyncSocket 读取/写入套接字

我创建了一个单独的类来处理所有网络，这是我的代码：

```
-(id)init{
    self = [super init];
    if (self) {
        asyncSocket = [[GCDAsyncSocket alloc] initWithDelegate:self         delegateQueue:dispatch_get_main_queue()];

        NSError *error = nil;
        if (![asyncSocket connectToHost:@"localhost" onPort:8888 error:&error]) //     Asynchronous!
        {
            // If there was an error, it's likely something like "already connected" or     "no delegate set"
            NSLog(@"I goofed: %@", error);
        }
    }
    return self;
}
//GCD Async Delegate Methods
- (void)socket:(GCDAsyncSocket *)sender didConnectToHost:(NSString *)host port:(UInt16)port
{
    NSLog(@"socket:%p didConnectToHost:%@ port:%hu", sender, host, port);
    NSLog(@"Cool, I'm connected! That was easy.");
}
 - (void)socket:(GCDAsyncSocket *)sock didWriteDataWithTag:(long)tag
{
    if (tag == 1)
        NSLog(@"First request sent");
    else if (tag == 2)
        NSLog(@"Second request sent");
    //read data of custom length
    /*
     if (tag == TAG_FIXED_LENGTH_HEADER)
     {
     int bodyLength = [self parseHeader:data];
     [socket readDataToLength:bodyLength withTimeout:-1 tag:TAG_RESPONSE_BODY];
     }
     else if (tag == TAG_RESPONSE_BODY)
     {
     // Process the response
     [self handleResponseBody:data];

     // Start reading the next response
     [socket readDataToLength:headerLength withTimeout:-1 tag:TAG_FIXED_LENGTH_HEADER];
     }
     */
}

-(void)socket:(GCDAsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag {
    NSError *error;
    serverJSONResponseParsed = [NSJSONSerialization JSONObjectWithData:data     options:kNilOptions error:&error];
}

-(BOOL)sendString:(NSString *)sendString{

    NSError *error;

    NSLog(@"Sending String: %@",sendString);

    NSDictionary *blobData = [NSDictionary dictionaryWithObjectsAndKeys:
                              sendString,@"string",
                              nil];
    NSString *blobString = [[NSString alloc]
                             initWithData:[NSJSONSerialization dataWithJSONObject:blobData      options:kNilOptions error:&error]
                             encoding:NSUTF8StringEncoding];
    NSLog(@"Blob Created: %@", blobString);
    NSDictionary *requestData = [NSDictionary dictionaryWithObjectsAndKeys:
                                 @"send_string",@"request_type",
                                  [NSNumber numberWithInt:0],@"security_level",
                                  @"ios",@"device_type",
                                  //No Email Provided, This is just for testing
                                 blobString,@"blob",
                                 nil];

    NSData *JSONRequestData = NULL;
    JSONRequestData = [NSJSONSerialization dataWithJSONObject:requestData options:kNilOptions error:&error];
            NSLog(@"Contents of JSONRequestData: %@",[[NSString alloc]     initWithData:JSONRequestData encoding:NSUTF8StringEncoding]);
     //Write the data
    [asyncSocket writeData:JSONRequestData withTimeout:-1 tag:1];

    //read a response
     [asyncSocket readDataToData:[GCDAsyncSocket CRLFData] withTimeout:-1 tag:2];

    NSDictionary *JSONResponseData = serverJSONResponseParsed;
    /*
    if (serverResponse != NULL) {
         JSONResponseData = [NSJSONSerialization JSONObjectWithData:serverResponse      options:kNilOptions error:&error];
    }
     */
    NSString *failure = [JSONResponseData objectForKey:@"failure"];
    if ([failure respondsToSelector:@selector(isEqualToString:)]) {
        NSLog(@"Unknown Object, Not a NSString");
    }
     if ([failure isEqualToString:@"none"]) {
        NSLog(@"Success Sending String");
        return TRUE;
    }
    else {
        NSLog(@"%@",failure);
        return FALSE;
     }

} 
```

这是控制台所说的：

```
2012-08-16 18:15:27.831 FlokMobile[4257:c07] Sending String: hello
2012-08-16 18:15:27.832 FlokMobile[4257:c07] Blob Created: {"string":"hello"}
2012-08-16 18:15:27.832 FlokMobile[4257:c07] Contents of JSONRequestData:     {"security_level":0,"request_type":"send_string","device_type":"ios","blob":"     {\"string\":\"hello\"}"}
2012-08-16 18:15:27.833 FlokMobile[4257:c07] (null)
2012-08-16 18:15:27.833 FlokMobile[4257:c07] It didn't work - appdel
2012-08-16 18:15:27.850 FlokMobile[4257:c07] socket:0x6992890 didConnectToHost:127.0.0.1 port:8888
2012-08-16 18:15:27.850 FlokMobile[4257:c07] Cool, I'm connected! That was easy.
2012-08-16 18:15:27.851 FlokMobile[4257:c07] First request sent 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T04:05:26.467

你正在阅读这个：      

```
[asyncSocket readDataToData:[GCDAsyncSocket CRLFData] withTimeout:-1 tag:2]; 
```

它期望 CRLF 作为流的分隔符。但是我看不到您将其附加到 JSONRequestData 的位置。因此，将您的 JSONRequestData 修改为可变的，如下所示：

```
NSMutableData *JSONRequestData; 
```

然后在这一行之前：

```
[asyncSocket writeData:JSONRequestData withTimeout:-1 tag:1]; 
```

添加这个：

```
[JSONRequestData appendData:[GCDAsyncSocket CRLFData]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T01:25:30.497

发送短数据块时，每次写入后**总是刷新**缓冲区，您希望立即生效。
我没有看到您在代码中这样做。
如果您不这样做，则仅当缓冲区已满或流关闭时才会刷新缓冲区。

# c# - 通知特定控件的 SelectedItem 已更改并在 MVVM WPF C# 中对其进行响应

> ID：11998410
> 
> 赞同：0
> 
> 时间：2012-08-17T00:47:00.997
> 
> 标签：c#, wpf, mvvm, inotifypropertychanged

我在 MVVM 中工作，我的视图有几个列表框，在更改前一个 SelectedItem 后依次切换到“可见”。

（IE 选择 Listbox1 中的项目时，Listbox2 变为可见，依此类推。）

我知道当 IsSelected 属性发生更改时我需要订阅该事件，但我需要知道如何在我的 ViewModel 中执行此操作/我需要哪些其他代码片段才能对所选项目和“做某事”当特定列表框发生事件时执行特定操作”，以便我可以触发下一个列表框可见。这会被视为“创建自定义事件”吗？以及，如何订阅它。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T01:01:55.060

在 XAML 中，设置 Combo 或列表的 SelectedItem 属性，如下所示：

```
SelectedItem="{Binding MySelectedItem, Mode=TwoWay}" 
```

在 ViewModel 中，为 MySelectedItem 创建一个属性：

```
 private AddressType _MySelectedItem;
    public AddressType MySelectedItem
    {
        get { return _MySelectedItem; }
        set
        {
            _MySelectedItem = value;
            OnPropertyChanged("MySelectedItem");

            CallMethodToEnableNextListBox(_MySelectedItem);
        }
    } 
```

# javascript - 如何使用 Javascript 正则表达式从字符串中获取数据

> ID：11998414
> 
> 赞同：0
> 
> 时间：2012-08-17T00:47:23.933
> 
> 标签：javascript, regex, wildcard, scrape

我无法发布我试图提取的确切数据，但这是一个具有相同结果的基本场景。我正在抓取页面的正文并尝试从中提取 bit.ly 链接。例如，假设这是我试图从中获取链接的数据块。

细绳：

```
<a href="/l.php?u=http%3A%2F%2Fbit.ly%2FPq8AkS&amp;h=aAQFZxdL0&amp;s=1" target="_blank"    rel="nofollow nofollow" onmouseover="LinkshimAsyncLink.swap(this, &quot;http:\\/\\/bit.ly\\/Pq8AkS&quot;);" onclick="LinkshimAsyncLink.referrer_log(this, &quot;http:\\/\\/bit.ly\\/Pq8AkS&quot;, &quot;http:\\/\\/www.facebook.com\\/si\\/ajax\\/l\\/render_linkshim_log\\/?u=http\\u00253A\\u00252F\\u00252Fbit.ly\\u00252FPq8AkS&amp;h=aAQFZxdL0&amp;s=1&quot;);">http://bit.ly/Pq8AkS</a></div><div class="shareUnit"><div class="-cx-PRIVATE-fbTimelineExternalShareUnit__wrapper"><div><div class="-cx-PRIVATE-fbTimelineExternalShareUnit__root -cx-PRIVATE-fbTimelineExternalShareUnit__hasImage"><a class="-cx-PRIVATE-fbTimelineExternalShareUnit__video -cx-PRIVATE-fbTimelineExternalShareUnit__image -cx-PRIVATE-fbTimelineExternalShareUnit__content" ajaxify="/ajax/flash/expand_inline.php?target_div=uikk85_59&amp;share_id=271663136271285&amp;max_width=403&amp;max_height=403&amp;context=timelineSingle" rel="async" href="#" onclick="CSS.addClass(this, &quot;-cx-PRIVATE-fbTimelineExternalShareUnit__loading&quot;);CSS.removeClass(this, &quot;-cx-PRIVATE-fbTimelineExternalShareUnit__video&quot;);"><i class="-cx-PRIVATE-fbTimelineExternalShareUnit__play"></i><img class="img" src="http://external.ak.fbcdn.net/safe_image.php?d=AQDoyY7_wjAyUtX2&amp;w=155&amp;h=114&amp;url=http%3A%2F%2Fi1.ytimg.com%2Fvi%2FDre21lBu2zU%2Fmqdefault.jpg" alt="" /></a> 
```

现在，我可以使用以下代码获得我正在寻找的内容，但链接并不总是正好是 6 个字符长。所以这会导致一个问题......

```
Body = document.getElementsByTagName("body")[0].innerHTML;
regex = /2Fbit.ly%2F(.{6})&amp;h/g;
Matches = regex.exec(Body); 
```

这是我最初尝试的方法，但我遇到的问题是它获取了太多数据。它一直到`"&amp;h"`上面字符串中的最后一个，而不是在它击中的第一个处停止。

```
Body = document.getElementsByTagName("body")[0].innerHTML;
regex = /2Fbit.ly%2F(.*)&amp;h/g;
Matches = regex.exec(Body); 
```

所以基本上我要关注的字符串的主要部分是`"%2Fbit.ly%2FPq8AkS&amp;h"`这样我可以从中得到“Pq8AkS”。当我使用`(.*)`它时，它会抓取上面大字符串中`"%2F"`最后一个之间的所有内容。`"&amp;h"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T01:01:00.863

您不应该在 HTML 上使用正则表达式。使用 DOM 函数获取所需的链接对象，然后从中获取 href 属性，然后您可以仅在 href 上使用正则表达式。

默认情况下`.*`是贪婪的，这意味着它匹配最多它可以匹配并且仍然找到匹配。如果您希望它不贪婪（匹配尽可能少），您可以`.*?`像这样使用它：

```
regex = /2Fbit.ly%2F(.*?)&amp;h/; 
```

我也不认为你想要`g`正则表达式上的标志，因为正确的 URL 中应该只有一个匹配项。

如果您显示 HTML 的其余部分，我们可以提供有关找到正确链接对象的建议，而不是尝试匹配整个 HTML 正文。

* * *

仅供参考，非贪婪匹配的另一个技巧是执行以下操作：

```
regex = /2Fbit.ly%2F([^&]*)&amp;h/; 
```

匹配一系列不`&`跟随的字符，`&amp;h`只要`&`不能在匹配的序列中就可以实现相同的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T00:59:57.293

默认情况下`+`，并且`*`是贪婪的并且尽可能匹配。您需要为您的`(.+)`. 快速[搜索](http://www.javascriptkit.com/javatutors/redev2.shtml)给出了解决方案

> ? 直接跟随量词使量词非贪婪（使其匹配最小值而不是定义的间隔的最大值）。

所以尝试将您的`regex=`线路更改为

`regex = /2Fbit.ly%2F(.*?)&amp;h/g;`

**编辑：** @jfriend00 下面的回答更完整。

# iphone - Cocos2d，如何做一个计分计时器

> ID：11998416
> 
> 赞同：0
> 
> 时间：2012-08-17T00:47:34.413
> 
> 标签：iphone, xcode4, cocos2d-iphone

我还是 cocos2d 的新手，想知道你们中的任何人是否可以帮我做一个计分器。我看到了一些这样的问题，但看起来它是针对旧版本的 cocos2d 的。我希望计时器从零开始并在几分钟和几秒钟内上升。非常感谢我得到的任何帮助或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T01:28:04.370

启动每秒运行的 NSTimer 并调用更新计时器的方法。

在标题中定义一个称为秒的整数和另一个称为分钟的整数。

```
-(void)updateTheTime {

    seconds++;

    if (seconds == 60) {

        seconds = 0;
        minutes++;

    }

    label.text = [NSString stringWithFormat:@"%i:%i", minutes, seconds];

} 
```

# javascript - javascript 在按钮单击时访问基于 Web 的脚本

> ID：11998420
> 
> 赞同：0
> 
> 时间：2012-08-17T00:48:02.517
> 
> 标签：javascript, function, web-based

我将如何访问基于 Web 的脚本。我不知道我的措辞是否正确。我只想能够单击一个按钮并运行该功能。那不是问题。问题是我如何将它放入一个函数中。

```
 <script type="text/javascript" src="http://wwww.blah.com/blah?blah=blah"></script> 
```

我如何让它在按钮点击时运行？我已经尝试了所有将它放入函数并调用该函数的方法。虽然没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T00:57:12.683

```
var buildScript = function (url, optionalCallback) {
    var script = document.createElement("script"),
        parent = document.getElementsByTagName("script")[0].parentElement;

    script.onload = optionalCallback;
    script.src = url;
    parent.appendChild(script);
};

var button = document.getElementById("my-button");
button.onclick = function () { buildScript("//url.to.site/file.js"); }; 
```

或可选：

```
button.onclick = function () {
    buildScript("//url.to.site/file.js", function () {
        function_from_loaded_script();
    });
}; 
```

如果你需要它来做其他事情，你可能需要更具体。

# javascript - javascript 字符串的扩展 ASCII 的有效字符子集

> ID：11998421
> 
> 赞同：0
> 
> 时间：2012-08-17T00:48:06.253
> 
> 标签：javascript, character-encoding, extended-ascii

我正在做一些数据编码的实验。我知道已经有 base64 格式，但我想要占用更少空间的东西。请注意，我要求的是特定的字符，而不仅仅是他们的数量。
1、扩展ASCII的哪些字符子集可以用Javascript字符串表示？
2\. 扩展 ASCII 的哪些字符子集可以用 Javascript 字符串表示而无需转义，假设字符串数据周围使用了 " 字符？

# jquery - 如何配置通过跨域 AJAX 调用 WCF 服务

> ID：11998422
> 
> 赞同：0
> 
> 时间：2012-08-17T00:48:21.633
> 
> 标签：jquery, .net, ajax, json, wcf

我在配置我的 WCF 服务以允许通过跨域 AJAX 消费时遇到了一点困难。

我已经成功地在客户端上使用了这项服务，没有任何问题，但是每次我尝试使用 AJAX（通过 jQuery 中的 $.ajax 对象）点击它时，都会收到 400 错误。

这是我的 web.config

```
<?xml version="1.0"?>
<configuration>
    <system.web>
        <compilation debug="true" strict="false" explicit="true" targetFramework="4.0" />
    </system.web>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="basicHttpBinding" />
            </basicHttpBinding>
            <mexHttpBinding>
                <binding name="mexHttpBinding" />
            </mexHttpBinding>
            <webHttpBinding>
                <binding name="webHttpBinding" crossDomainScriptAccessEnabled="true">
                    <security mode="None" />
                </binding>
            </webHttpBinding>
        </bindings>
        <services>
            <service name="Services.WebAnalyticsService">
                <clear />
                <endpoint binding="basicHttpBinding" bindingConfiguration="basicHttpBinding"
                 name="WebAnalyticsDotNetClientEndpoint" contract="Contracts.IWebAnalyticsService"
                 listenUriMode="Explicit" />
                <endpoint address="mex" binding="mexHttpBinding" bindingConfiguration="mexHttpBinding"
                 name="WebAnalyticsMetaDataEndpoint" contract="Contracts.IWebAnalyticsService"
                 listenUriMode="Explicit" />
                <endpoint address="script" behaviorConfiguration="aspNetAjaxBehavior"
                 binding="webHttpBinding" bindingConfiguration="webHttpBinding"
                 name="WebAnalyticsAjaxEndpoint" contract="Contracts.IWebAnalyticsService" />
                <!--<endpoint address="web" behaviorConfiguration="RESTBehavior"
                 binding="webHttpBinding" bindingConfiguration="webHttpBinding"
                 name="WebAnalyticsAjaxEndpoint" contract="Contracts.IWebAnalyticsServiceWeb"  />-->
            </service>
        </services>
        <behaviors>
            <endpointBehaviors>
                <behavior name="aspNetAjaxBehavior">
                    <enableWebScript />
                </behavior>
                <!--<behavior name="RESTBehavior">
                    <webHttp helpEnabled="true"/>
                </behavior>-->
            </endpointBehaviors>
            <serviceBehaviors>
                <behavior>
                    <serviceMetadata httpGetEnabled="true" />
                    <serviceDebug includeExceptionDetailInFaults="true" />
                </behavior>
            </serviceBehaviors>
        </behaviors>
        <serviceHostingEnvironment multipleSiteBindingsEnabled="true" aspNetCompatibilityEnabled="true"/>
    </system.serviceModel>
    <system.webServer>
        <modules runAllManagedModulesForAllRequests="true"/>
    </system.webServer>
        <system.diagnostics>
            <sources>
                <source name="System.ServiceModel"
                    switchValue="Information, ActivityTracing"
                    propagateActivity="true">
                    <listeners>
                        <add name="xml"
                 type="System.Diagnostics.XmlWriterTraceListener"
                 initializeData="c:\log\Traces.svclog" />
                    </listeners>
                </source>
            </sources>
        </system.diagnostics>
</configuration> 
```

这是我的运营合同。

```
Namespace Contracts

        <ServiceContract()>
 Public Interface IWebAnalyticsService

    <OperationContract(), WebGet(RequestFormat:=WebMessageFormat.Json)>
    Sub SendWaEvent(ByVal eventID As Integer, ByVal eventValue As String, _
      ByVal cookieVisitID As String, ByVal cookieVisitorSession As String, _
      ByVal HTTPXForwardedServer As String, ByVal HTTPXRewriteURL As String, _
      ByVal ScriptName As String, ByVal ServerName As String)

    End Interface

End Namespace 
```

我的 Ajax 调用非常简单，但这里是：

```
$.ajax({
  type: 'POST',
  crossDomain: true,
  url: 'http://localhost:37490/services/webanalyticservice.svc/SendWaEvent',
  data: Data, //Data is a JSON wrapper I've previously constructed.
  contentType: 'application/javascript;charset=UTF-8'
  success: function(result) {DoSomething(result);},
  error: HandleError
}); 
```

[**以下更新**]

这总是我们忽略的事情，不是吗？无论如何，在对上面的“直截了​​当”的 AJAX 调用非常不屑一顾之后，它最终成为了问题。为了让它工作，我不得不将我的 AJAX 调用更改为：

```
 function SendAJAX() {
            $.ajax({ type: "GET",
                url: URL,
                data: Data,
                dataType: 'jsonp',
                jsonpCallback: 'MyCallBack',
                timeout: 10000,
                crossDomain: true,
                contentType: 'application/json; charset=UTF-8',
                success: function (data, textStatus, jqXHR) { WriteSuccess(data, textStatus, jqXHR) },
                error: function (jqXHR, textStatus, errorThrown) { WriteError(jqXHR, textStatus, errorThrown) },
                complete: function (jqXHR, textStatus) { }
            });
        } 
```

另外，请注意，如果您要在本地进行测试，则需要将以下内容添加到您的 Web 配置中，否则您将收到 500 错误，指出在经过身份验证的服务中不允许跨域 javascript。

```
<system.web>
    <authentication mode="None" />
</system.web> 
```

您可以在 web.release.config 中使用 删除此属性`xdt:transform`。

向@Rajesh 大声喊叫！干得好，伙计！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:57:49.843

您的 JQuery 函数需要如下所示：

```
function TestingWCFRestWithJsonp() {
                $.ajax({
                    url: "http://localhost:37490/services/webanalyticservice.svc/script/SendWaEvent",
                    dataType: "jsonp",
                    type: "GET",
                    timeout: 10000,
                    jsonpCallback: "MyCallback",
                    success: function (data, textStatus, jqXHR) {
                    },
                    error: function (jqXHR, textStatus, errorThrown) {    
                    },
                    complete: function (jqXHR, textStatus) {
                    }
                });
            }
            function MyCallback(data) {
                alert(data);
            } 
```

由于您的端点元素设置了地址值，您需要将其附加到 .svc 的末尾，然后提供方法名称，如下面的示例所示。

绑定元素上的 crossDomainScriptAccessEnabled 属性标识您的请求是否指定了回调方法并将响应写回流。

注意：从您的浏览器测试 url，看看您是否获得了成功的响应，因为它是一个 WebGet 方法

# asp.net-mvc - ASP.Net Web Api + KnockoutJs + MVC4 - 将其捆绑在一起

> ID：11998424
> 
> 赞同：9
> 
> 时间：2012-08-17T00:48:43.263
> 
> 标签：asp.net-mvc, knockout.js, asp.net-web-api, knockout-mapping-plugin

我正在开始一个新项目，并且热衷于使用对我来说是新的 KnockoutJS + Web Api，我对 Web Api 有很好的了解，但是目前很难理解 Knockout。

这是我希望我的应用程序如何工作的最初想法：

*   我有一个标准的 MVC 控制器，例如`LeadsController`
*   `LeadsController`有一个`Action`被调用的`ListLeads`，这实际上并没有返回任何数据，而只是返回一个带有模板的视图来显示来自 Knockout 的数据。
*   `ListLeads`视图通过 ajax 调用我的 api 控制器以`LeadsApiController`获取要显示的潜在客户列表
*   然后将潜在客户数据映射到 KnockoutJs ViewModel（我不想将我的视图模型从服务器端复制到 JavaScript 视图模型中）
*   我想尽可能多地使用外部 JavaScript 文件，而不是让我的 HTML 页面充满 JavaScript。

我见过很多例子，但大多数都是在第一页加载时返回一些初始数据，而不是通过 ajax 调用。

所以我的问题是，当从 ajax 检索时，如何为 Knockout 创建我的 JavaScript viewModel，其中 ajax url 是使用`Url.Content()`.

另外，如果我需要在这个 ViewModel 上附加计算值，我将如何从服务器端扩展映射的视图模型。

如果我没有很好地解释自己，请让我知道您不确定的内容，我会尝试更新我的问题以更明确。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T12:09:00.640

我认为你的设计是个好主意。事实上，我现在正在使用这种设计开发一个应用程序！

您不必在页面中嵌入初始数据。相反，当您的页面加载时，创建一个空视图模型，调用`ko.applyBindings`，然后启动 AJAX 调用，该调用将在完成时填充视图模型：

```
$(function () {
    var viewModel = {
        leads: ko.observableArray([]) // empty array for now
    };

    ko.applyBindings(viewModel);

    $.getJSON("/api/Leads", function (data) {
        var newLeads = ko.mapping.fromJS(data)(); // convert to view model objects
        viewModel.leads(newLeads); // replace the empty array with a populated one
    });
}); 
```

在 AJAX 调用完成之前，您需要在页面的某处放置一条“正在加载”消息。

要生成“/api/Leads” URL，请使用`Url.RouteUrl`：

```
<script>
    var apiUrl = '@Url.RouteUrl("DefaultApi", new { httproute = "", controller = "Leads" })';
</script> 
```

（假设您在 Global.asax 或 App_Start\RouteConfig.cs 中配置的 API 路由命名为“DefaultApi”。）

上面使用了敲除映射插件将 AJAX JSON 结果转换为敲除视图模型。默认情况下，生成的视图模型对于 JSON 中的每个属性都有一个可观察的属性。要对此进行自定义，例如添加额外的计算属性，请使用敲除映射插件的[“创建”回调](http://knockoutjs.com/documentation/plugins-mapping.html#customizing_object_construction_using_create)。

在我的应用程序中做到这一点之后，我发现我想要更多来自服务器端视图模型的元数据，这些元数据可用于客户端代码，例如需要哪些属性，以及每个属性有哪些验证。在剔除映射“创建”回调中，我想要这些信息以便在视图模型中自动生成额外的属性和计算的 observables。因此，在服务器端，我使用了一些 MVC 框架类和反射来检查视图模型并生成一些元数据作为嵌入到相关视图中的 JavaScript。在客户端，我有外部 JavaScript 文件，它们连接敲除映射回调并根据页面中提供的元数据生成视图模型。我的建议是首先在每个视图中手动编写淘汰视图模型自定义和其他 JavaScript，然后在重构时将通用 JavaScript 函数移到外部文件中。每个视图最终都应该只包含特定于该视图的最小 JavaScript，此时您可以考虑编写一些 C# 来从服务器端视图模型注释生成该 JavaScript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T02:43:23.733

对于 url 问题，将其添加到您的 _Layout.cshtml 中，该位置位于将使用它的文件之前：

```
<script>
    window._appRootUrl = '@Url.Content("~/")';
</script> 
```

然后，您可以使用`window._appRootUrl`字符串连接或借助 URI.js 之类的 JavaScript 库来编写 url。

至于额外的计算值，您可能希望使用剔除计算的 observable。如果这是不可能的，或者您更喜欢在 .Net 中执行此操作，您应该能够仅使用 getter 创建一个属性，但是当您更新客户端上的其他属性（如果它依赖于它们）时，这不会更新。

# jquery - 通过 jquery 选择具有动态 id 的 div 的子项

> ID：11998432
> 
> 赞同：0
> 
> 时间：2012-08-17T00:49:58.733
> 
> 标签：jquery, jquery-selectors

看看这些家伙：

```
<div id="Item_23">
 <div class="Info">
   <a class="Link" href="#" onclick="call(23)">Link</a>
   <div class="text">
     <a class="cancel" href="cancel.asp">Cancel</a>
   </div>
 </div>
</div> 
```

父 div 具有动态 id，其数字部分是可变的。
现在，我想在一个函数中按课程选择这个孩子中的一个。怎么办？

```
function call(e)
    // Selecting a.cancel
end function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T00:52:57.300

~~也许像~~

 ~~```
$('div[id^=Item_] div.text'); 
```~~ 

或者

```
$('div[id^=Item_] a.Link'); 
```

**回应您的编辑**

试试这个

```
function call(e) {

    // Find the inner anchor
    var theAnchor = $('div[id=Item_' + e + '] div.text').find('a.cancel');
} 
```

您在调用或 jQuery 代码中缺少下划线，因此它正在寻找具有 ID 的 div

```
Item23 
```

而不是身份证

```
Item_23 
```

 ~~这是一个 JSFiddle，它演示了在单击另一个链接时获取取消链接。

[http://jsfiddle.net/PyDKg/14/](http://jsfiddle.net/PyDKg/14/)

正如@undefined 所建议的，您不需要内联javascript 调用，因为您使用的是jQuery。我稍微改变了函数，所以它只获取父 ID 并将整个 ID 作为参数发送。

**HTML**

```
<div id="Item_23">
    <div class="Info">
        <a class="Link" href="#">Link</a>
        <div class="text">
            <a class="cancel" href="cancel.asp" data-val="Yay got it!">Cancel</a>
        </div>
    </div>
</div> 
```

**JS**

```
$(document).ready(function(){
    $('a.Link').click(function(){
        var id = $(this).parents('div[id^=Item_]').attr('id');
        callAnchor(id);
    });
});

function callAnchor(e) {

    // Find the inner anchor
    var theAnchor = $('div[id=' + e + '] div.Info div.text').find('a.cancel');

    // Print the data-val attribute to prove that it was found.
    alert($(theAnchor).attr('data-val'));
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-17T00:51:38.673

首先，像这样修复您的原始选择器：

```
 var item = $('div[id=Item_' + e + '] div'); 
```

有很多方法可以选择子元素，包括[`children`](http://api.jquery.com/children/)和[`next`](http://api.jquery.com/next/)，但是这是最简单的方法，并且最不可能因标记更改而中断：

```
item.find('.Link'); 
```~~

# ssrs-2008 - 允许SSRS报告滚动到底部而不自动分页

> ID：11998438
> 
> 赞同：1
> 
> 时间：2012-08-17T00:50:42.650
> 
> 标签：ssrs-2008, reporting-services

我有一个呈现多个页面的 SSRS 报告。页面不适合屏幕，因此用户必须滚动才能查看该页面上的所有数据。当用户向页面底部滚动时，报表会自动前进到报表的下一页（大约在页面底部到达屏幕底部的时间）。有没有办法只允许报表通过分页按钮前进到下一页？

# syntax - VBscript 中的函数是否接受可变数量的参数？

> ID：11998443
> 
> 赞同：2
> 
> 时间：2012-08-17T00:51:13.757
> 
> 标签：syntax, vbscript, overloading

例如，如果我在 VBscript 中有一个函数：

```
Function sum(a, b, c)
    sum = a + b + c
End function 
```

现在，我主要创建两个变量并将它们传递给函数`sum`，如下所示：

```
Dim a : a = 1
Dim b : b = 2
Call sum(a, b) 
```

这是否可行，为什么？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T01:13:24.863

它不起作用，VBScript 不支持可选参数。
我会使用一个函数，它接受一个数字数组，而不是改变参数的数量来获得总和。

```
Function sum(nums)
    Dim i, out
    For i = 0 To UBound(nums)
        out = out + nums(i)
    Next
    sum = out
End function

Call sum(Array(1, 2, 3, 4)) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-17T00:56:09.890

据此[，](http://www.4guysfromrolla.com/aspfaqs/ShowFAQ.asp?FAQID=42) VBscript 不支持可选参数。您可以执行他们的建议并将空值传递给您的函数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-11-05T10:17:30.677

我希望这可能会有所帮助。我使用字典对象将变量传递给函数，因此我可以添加新参数而无需重构现有代码。

```
dim params
set params = CreateObject("Scripting.Dictionary")

'...when I want to call a function
params.add "variable_name", value: params.add "variable_name_2", value ': ...
call fn_function_name(params)

'...declaring a function
function fn_function_name(byRef params_in)

    'here I usually make sure that variable is of correct type, or that is set
    params_in("variable_name") = fn_check(params_in("variable_name"), "number") ' fn_check is a separate function

    ' ... function code goes here ...

    ' in order to user external dictionary "params" multiple times, I empty dictionary before exiting the function. This is possible because I set it as a reference (byRef) instead of value
    params_in.removeAll()
end function 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T01:05:37.617

VBScript 不支持可选参数或方法重载。但是，您可以将空值传递给您的函数调用。

# jquery - 需要ajax按钮来发送/检索数据

> ID：11998444
> 
> 赞同：1
> 
> 时间：2012-08-17T00:51:16.353
> 
> 标签：jquery, ajax

我正在关注教程，目的是为每行创建一个带有单独提交按钮的表格。不要质疑，这是我想做的。

我希望脚本向我的函数返回一个值，然后它将向用户显示一条消息（弹出窗口，或者可能添加到 a`<div id="messages">`或类似的东西。

所有按钮都会将数据发送到同一个 PHP 脚本。我想我会在 jeditable 插件之后对此进行建模，该插件将元素的 id 提交给脚本。

但是我从来没有写过我自己的任何 jquery，所以我遇到了问题。我的第一次测试

我当前的测试脚本 $(this).id 不工作：

```
$(document).ready(function(){
    $(".magic_button").click(function() {
        var data = $(this).id;
        alert (data); // test
        $("#messages")
                // trying to submit the data and retrieve response
            .load('/myscrpt.php','id=' + data); 
    });
}); 
```

测试html：

```
<div id="magic_button_form">
<form name="magic">
    <input type="button" class="magic_button" name="magic_button" id="magic_button_1" value="magic" />
    <input type="button" class="magic_button" name="magic_button" id="magic_button_2" value="magic" />
</form>
</div>
<div id="messages"></div> 
```

所以，基本上，我需要弄清楚如何从调用元素中获取 id，通过 ajax 提交，然后处理返回的数据。它不起作用，因为首先我什至无法获得呼叫按钮的 id。

编辑：

> **根据马丁的回答，完整的工作脚本：**

根据 Martin 的解决方案，这是我在测试中提出的并且有效。下面是 html/jquery，然后是 php 脚本。php 脚本只是进行简单的文本转换，将“magic_button_1”更改为“Magic Button 1”（对于“button”类的任何其他按钮也是如此）。

这里基本上是 html/jquery：

```
<html>
<head>
<script>
$(document).ready(function(){ 
    });
    $(".magic_button").click(function() {
        var data = $(this).attr('id');
        //alert (data);
        $.ajax({
            type: "POST",
            url: "/controllers/clean/ajax/table.php",
            data: { 'id': data }
        }).done(function( msg ) {
            alert("Data Saved: " + msg);
        });
    });

});
</script>
</head>
<body>
<div id="magic_button_form">
<form name="magic">
   <!-- <label for="name" id="name_label">Name</label>  
    <input type="text" name="name" id="name" size="30" value="" class="text-input" />  
    <label class="error" for="name" id="name_error">This field is required.</label> -->
    <input type="button" class="magic_button" name="magic_button" id="magic_button_1" value="magic" />
    <input type="button" class="magic_button" name="magic_button" id="magic_button_2" value="magic" />
</form>
</div>
</body>
</html> 
```

这是 php 脚本 (/controllers/clean/ajax/table.php)

```
$id = $_POST['id'];

$id = ucwords(implode(' ',explode('_',$id)));

echo $id; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T00:54:02.980

你需要使用：

```
$(this).attr('id') 
```

[`Here`](http://api.jquery.com/jQuery.ajax/)是 jQuery ajax 调用的文档，例如：

```
$.ajax({
   type: "POST",
   url: "some.php",
   data: { name: "John", location: "Boston" }
}).done(function( msg ) {
   alert( "Data Saved: " + msg );
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T00:55:58.183

在您的点击处理程序`this`中是对 DOM 元素本身的引用，因此您可以通过以下方式访问其 id：

```
this.id 
```

或者，如果你想使用 jQuery，你必须使用 jQuery 方法：

```
$(this).attr("id") 
```

此外，我注意到您的警报参考`dataString`，但可能应该是`data`.

解决了这些问题后，Ajax`.load()`应该可以工作了。

# awk - awk：如何替换块内的文本，但打印其他所有内容

> ID：11998445
> 
> 赞同：1
> 
> 时间：2012-08-17T00:51:26.633
> 
> 标签：awk, replace

我可以用块中的 AllowOverride All 替换字符串AllowOverride **None** **，**但我只能打印匹配的文本块。

 **如何在比赛前后打印文本？

```
awk '
/<Directory \/var\/www\/>/, /<\/Directory>/ {
  sub(/AllowOverride None/,"AllowOverride All")
  print
}
' /etc/apache2/sites-available/default 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T00:54:50.787

`next`在你现有的之后添加一个，`print`并在你现有的右花括号之后添加这个：

```
{print} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T00:56:22.810

您可以只执行替换而不在第一个子句中打印，然后添加第二个子句以打印每一行。像这样：

```
awk '
/<Directory \/var\/www\/>/, /<\/Directory>/ {
    sub(/AllowOverride None/, "AllowOverride All");
}
{
    print;
}
' /etc/apache2/sites-available/default 
```

我对此进行了快速测试，我相信它会起作用。**

# javascript - jQuery 编码问题

> ID：11998460
> 
> 赞同：3
> 
> 时间：2012-08-17T00:53:27.887
> 
> 标签：javascript, jquery, encoding

我正在使用下一个代码 jQuery 代码 -

```
 success: function(result){     
          $('#taglineResults').text(result) ;
           alert('אבג');
         } 
```

如您所见，警报中的内容是希伯来语，但我得到的警报是三个矩形。我已经尝试使用`unescape`，`decodeUri`但它没有帮助，我该如何解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T01:59:46.203

**这 100% 有效。**将源代码文件的编码更改为 utf-8。您可以为此使用记事本++。然后再次用希伯来语重写您的文本并保存。

您将在警报中看到希伯来语。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T01:47:30.187

如果它显示为块，则系统/浏览器用于警报的字体不支持这些字符。在这种情况下，我不会使用警报。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T16:05:56.093

或者，您可以使用我们的`\u`符号

```
alert("\u05D3\u05D4\u05D5");​ 
```

[小提琴](http://jsfiddle.net/j4S3m/)

[字符图](http://www.unicode.org/charts/PDF/U0590.pdf)

# javascript - 如何将数据从backbone.js 的客户端传递到服务器。Express + Backbone.js

> ID：11998461
> 
> 赞同：1
> 
> 时间：2012-08-17T00:53:34.687
> 
> 标签：javascript, backbone.js, express

我正在尝试通过 Backbone.js 的 save() 方法将数据从客户端传递到服务器。

## todo.js

```
window.Todo = Backbone.Model.extend({
        initialize:function(){
        },
        urlRoot:"http://localhost:3000/api/todos",
        defaults:{
            title:"",
            done:false,
            important:false,
            completed:false
        },
        toggleDone:function(){
            this.destroy();
        }

}); 
```

## app.js(快递)

```
app.post("/api/todos",function(req,res){
        console.log(req.title); // I want to receive todo item's title which is created new item's.But req.title is undefined.

}); 
```

## app_view.js(Backbone.js) 是这样的...

```
... 

 // create method make new todoItem and send new todoItem to server.But currently it doesn't work.

create:function(e){

var input = $(this.el).find("#new-todo");
 if (e.keyCode !== 13) return;
   var text = input.val();
   var todo = new Todo({title:text});
    // It send POST request to "/api/todos"
   todo.save({title: text,body: "hello world"});
   var todoView = new TodoView({model: todo});
    $("#todo-item").append(todoView.render().$el);
                        $(input).val("");
                        this.collection.add(todo);
                    }
        }); 
```

此代码不会将数据从客户端传递到服务器。你有什么主意吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:30:49.757

您的模型数据不会直接在 Express (req.title) 中的请求对象上。

假设您已将 express 配置为使用[bodyParser()](http://www.senchalabs.org/connect/middleware-bodyParser.html)来解析 HTTP POST正文

```
app.use(express.bodyParser()); 
```

然后你的 Backbone 模型将在 request.data 中：

```
app.post("/api/todos",function(req,res){
        console.log(req.body.title);

}); 
```

# seo - Google Keword 工具的竞争

> ID：11998462
> 
> 赞同：-1
> 
> 时间：2012-08-17T00:53:37.737
> 
> 标签：seo, search-engine

我是 SEO 新手，目前正处于寻找关键字的阶段。所以我正在使用谷歌关键字工具，

我不太确定比赛栏的确切含义。

如果它说低、高或中，我应该从 SEO 的角度从中推断出什么？

谢谢，艾哈迈德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T06:06:48.623

Google 关键字工具中的竞争列显示了对该特定关键字出价的广告客户数量。更多的竞争意味着更多的广告商通过谷歌广告词来定位这些关键词。

在此处查找更多详细信息： https: [//support.google.com/adwords/agency/bin/answer.py?hl=en&answer=25148](https://support.google.com/adwords/agency/bin/answer.py?hl=en&answer=25148)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T11:47:12.740

首先选择您想为访问者提供服务的关键字...例如..您的网站是 php 服务而不是首先选择 php 关键字..不介意您是否选择该关键字，但您只需要查看您使用哪些关键字...多少竞争的那个关键字？如果您在查找关键字时遇到问题，而不是关键字工具的建议.. 有很多您可以帮助的结果..

## 从建议中选择哪个关键字？

两种类型的关键字结果，第一是本地的，第二是全球的……以及低、中、高三种关键字竞争。不要选择看低、中、高。只看全球和本地竞争。

## 关键字结果需要多少时间？

取决于关键字竞争，您的关键字竞争高意味着很多竞争对手比您的关键字花费更多时间。

## 相关关键字

I suggest u first that choose relevant keywords which keyword on title, description, content, hyperlink, image.. etc.

# mysql - MySQL获取间隔记录

> ID：11998463
> 
> 赞同：1
> 
> 时间：2012-08-17T00:53:40.687
> 
> 标签：mysql

MySQL脚本上是否有任何解决方案来过滤具有特定间隔号的结果。

例如，如果我在数据库中有 100,000 条记录，并且我只想获取记录号 1000、2000、3000 等（步长为 1000）。

我可以通过获取整个结果（例如 100,000）并使用如下语法在服务器端脚本上执行此操作：

```
for($i=0, $i <= 100,000, $i = $i+1000) $filterResult[] = $record[$i]; 
```

但是，正如您所见，它会给系统带来压力，因为首先需要生成 100,000 条记录。

有没有可以从数据库脚本完成的解决方案？请注意，根据 where 子句中的某些条件，主键可能不是以 1 - 100,000 开头的结果。

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T00:58:17.210

你可以做：

```
SELECT *
FROM   tbl
WHERE  id % 1000 = 0 
```

但似乎您不想依赖主键值，而是依赖结果集的行排名。

在这种情况下，您可以这样做：

```
SELECT *
FROM   (
       SELECT     *, @rn:=@rn+1 AS rank
       FROM       tbl
       CROSS JOIN (SELECT @rn:=0) var_init
       WHERE      column1 = value AND
                  column2 = value
       ) a
WHERE  a.rank % 1000 = 0 
```

Where`column1 = value AND column2 = value`只是您在查询中进行的任何过滤的占位符。

# visual-studio - 如何在 Visual Studio 中延迟波浪线（错误警告）？

> ID：11998464
> 
> 赞同：2
> 
> 时间：2012-08-17T00:53:46.790
> 
> 标签：visual-studio, autocomplete, code-completion

编写代码时，红线出现在刚刚编写的代码上，直到我完成该行

例如：“System.Ou”

将生成错误，直到该行完成。

这个功能显然很好，但是在我打字时弹出错误消息的事实非常分散注意力。有什么办法可以延迟错误线的出现吗？即使在我开始写我的台词 5 秒后，我也有时间完成我最初计划写的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-03T16:31:41.920

所以这有点老了，但我相信我在[这里](http://www.devcurry.com/2011/01/disable-squiggly-or-wavy-lines-in.html)找到了你问题的答案。

转到工具 -> 选项 -> 文本编辑器 -> C# -> 高级，然后在“编辑器帮助”部分下取消选中“显示实时语义错误”。

# python - 如何在 mac osx 上安装 Python docx 模块

> ID：11998465
> 
> 赞同：1
> 
> 时间：2012-08-17T00:53:47.653
> 
> 标签：python, ms-word, docx, python-docx

我正在尝试`.docx`使用 Python 生成文件。我在这里搜索了网络和帖子，发现了一个模块：

[https://github.com/mikemaccana/python-docx/blob/master/README.markdown](https://github.com/mikemaccana/python-docx/blob/master/README.markdown)

它说使用`easy_install`or安装`pip`，我不知道该怎么做。我去 python 网站按照 python 文档中给出的说明安装 pip：

[http://guide.python-distribute.org/installation.html](http://guide.python-distribute.org/installation.html)

所以我下载并按照说明进行操作：

```
$ tar xzf pip-0.7.2.tar.gz
$ cd pip-0.7.2
$ python setup.py install 
```

但是当我执行 python setup.py install 时，我收到错误消息：

```
Johns-MacBook-Pro:pip-0.7.2 John$ python setup.py install
Traceback (most recent call last):
File "setup.py", line 2, in <module>
from setuptools import setup

ImportError: No module named setuptools 
```

有人可以帮我逐步安装新手吗？提前感谢您的所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T10:32:39.563

Pip 可以直接从 git 存储库安装

你只需要告诉他使用 git 并给他 git rep 的 URL

```
pip install git+git://github.com/mikemaccana/python-docx.git 
```

您还需要安装 lxml（如 setup.py 中所写）和 PIL（当您尝试导入模块时会发现）。

```
pip install PIL
pip install lxml
pip install python-dateutil 
```

# mysql - 使用带有“不喜欢”的 mysql select 语句的 HeidiSQL 不起作用

> ID：11998471
> 
> 赞同：0
> 
> 时间：2012-08-17T00:54:12.620
> 
> 标签：mysql, sql

好的，伙计们，故事就是这样，我有一个非常简单的查询，我正在尝试做，对于我的生活，我不明白为什么它不起作用。

我正在使用流式 Twitter 提要使用关键字填充我的数据库。现在我想使用这个查询过滤掉转推

```
select * from earthquake
where earthquake.Text not like '%RT%'
order by earthquake.Text 
```

它返回“0 行受影响，0 行找到”，是的，有成千上万的转推，所以我知道它们存在。

我对 '%@%' 进行了相同的查询，它按预期找到了数千个，似乎除了 'RT' 之外的所有东西都有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T01:03:16.300

你试过了`NOT LIKE '%RT @%'`吗？
常用词是否可能`xxxrtxxx`始终包含在您的文本字段中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T05:14:27.800

我对mysql一无所知，但是有没有像MSSQL的PatIndex（）这样的函数，你可以使用而不是不喜欢？

或者你可以尝试这样的事情：（不知道你的数据库是否支持这种语法）

```
SELECT * FROM Earthquake
WHERE CASE WHEN Text LIKE '%RT%' THEN 1 ELSE 0 END = 0
ORDER BY Text 
```

我还建议检查您在 Text 列中某处查找“RT”以识别您不想要的东西的逻辑，因为我很惊讶“Not Like [expression]”显然不起作用。

# c# - 对绑定的可观察集合进行排序

> ID：11998473
> 
> 赞同：0
> 
> 时间：2012-08-17T00:54:17.707
> 
> 标签：c#, wpf, xaml, mvvm, observablecollection

我有一个 MVVM 集合，我“知道”它在 VM 中重新排序，但未在视图中以新顺序显示。给定类似于下面的代码，我是否应该期望列表在不操作 CollectionViewSource 的情况下以新的排序重新显示？

# xml

```
<Menu Name="_mainMenu" Height="22" >
    <MenuItem Header="Language" 
              ItemsSource="{Binding AvailableCultures}"  >
        <MenuItem.ItemTemplate>
            <DataTemplate>
                <MenuItem IsCheckable="True" 
                          IsChecked="{Binding IsSelected, Mode=TwoWay}"  
                          Header="{Binding DisplayName}"/>
            </DataTemplate>
        </MenuItem.ItemTemplate>
    </MenuItem>
</Menu> 
```

# 虚拟机

```
public ObservableCollection<OptionLocalizedViewModel<CultureInfo>> 
                                     AvailableCultures { get; private set; }

private void OnSelectionChange(OptionLocalizedViewModel<CultureInfo> option)
{
    ...
    var sorted = AvailableCultures.OrderBy(x => x.DisplayName);
    AvailableCultures = 
        new ObservableCollection<OptionLocalizedViewModel<CultureInfo>>(sorted);

    NotifyOfPropertyChange(() => AvailableCultures);
} 
```

# 更新

顺序*正在*更改，但与预期不同（而不是调试器显示新排序的 ObsCollection 的内容）。我还尝试放弃 ObsCollection 以支持直接绑定到 IEnumerable 并获得完全相同的结果。

有没有人看到建议修复的模式？

# 1）初始负载，看起来应该

![在此处输入图像描述](../Images/d88bc1197f2faf2ea6379868f67a0d88.png)

# 2）选择西班牙语，所以应该首先是西班牙语，但不是

![在此处输入图像描述](../Images/16485ce98fe6271052c9d4aaaa5b82c7.png)

# 3）回到英语，但不知何故英语是最后的。这是怎么翻的？

![在此处输入图像描述](../Images/89082706a085c6f46472b795444c55e9.png)

# 4) 回到西班牙语，和 try (2) 一样

![在此处输入图像描述](../Images/60ac1addeb4a818423abf1cfdb6aeb7d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T01:05:21.383

尝试`ListCollectionView`改用：

```
 ListCollectionView LCV = new ListCollectionView(YourObservableCollection);
 LCV.GroupDescriptions.Add(new PropertyGroupDescription("PropertyName"));
 YourDataBoundProperty = LCV; 
```

您可以参考[这篇文章](http://weblogs.asp.net/monikadyrda/archive/2009/08/31/wpf-listcollectionview-for-sorting-filtering-and-grouping.aspx)了解更多详情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T19:49:40.353

这在理论上应该*有效*，只要确保 INotifyPropertyChanged 实际上被正确触发，因为在用不同的集合替换整个集合而不是仅仅改变它的内容时有必要。

# intellij-idea - IntelliJ 是否有内部 Web 服务器来提供 Web 应用程序的静态内容？

> ID：11998481
> 
> 赞同：13
> 
> 时间：2012-08-17T00:55:50.687
> 
> 标签：intellij-idea, web-applications, built-in-web-server

现在，我的模块目录被定义为 IIS 虚拟目录，IIS 为文件提供服务。

我想知道 IntelliJ 是否有一个内部 Web 服务器，它可以提供文件，而不需要任何第三方。Eclipse[可以](https://help.eclipse.org/kepler/index.jsp?topic=%2Forg.eclipse.wst.server.ui.doc.user%2Ftopics%2Fthttppreview.html)。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-17T01:11:40.403

**更新：**最近的 IntelliJ IDEA 版本（从 13 开始）中提供了内置 Web 服务器。[您可以在博客](http://blog.jetbrains.com/webide/2013/03/built-in-server-in-webstorm-6/)中找到更多详细信息（是的，此功能首先出现在 WebStorm 中）。

~~IntelliJ IDEA 没有此功能，您需要安装和使用任何可以提供项目文件夹内容的第三方 Web 服务器。~~

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-26T14:07:44.683

内置 HTTP 预览服务器将成为 Intellij IDEA 13 的一部分，并且已经在 EAP 中可用：http: [//youtrack.jetbrains.com/issue/WEB-7148](http://youtrack.jetbrains.com/issue/WEB-7148)

> “所有现有操作 - 在浏览器中预览（在 html 文件或菜单操作或快捷方式上弹出），在浏览器中打开并创建/调试 html 文件操作现在在内置 Web 服务器上打开文件 `http://localhost:63342/<project name>/<file path relative to source or content root>`”

换句话说，右键单击 HTML 页面并选择“调试”或“在浏览器中打开”，IDEA 13+ 将通过端口 63342 提供该页面。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-19T11:11:30.943

这是另一个超级简单的选项，安装 Python： http: [//www.python.org/getit/](http://www.python.org/getit/)

然后打开一个 shell 提示符，导航到你的根 web 文件夹（例如 public）并运行`python -m SimpleHTTPServer`- 这将在端口 8000 上启动一个 HTTP 服务。

如果需要，请进一步阅读：[http ://www.linuxjournal.com/content/tech-tip-really-simple-http-server-python](http://www.linuxjournal.com/content/tech-tip-really-simple-http-server-python)

我已经在 Windows 7 上运行了我的，但上面的文章仍然适用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-09T04:39:34.920

另一种选择是创建一个 PHP 项目，从 PHP 5.4.0 开始，它包含一个内置的 Web 服务器。这个页面解释了这一切......

[http://www.jetbrains.com/idea/webhelp/php-built-in-web-server.html](http://www.jetbrains.com/idea/webhelp/php-built-in-web-server.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-28T12:28:28.633

IntelliJ IDEA 有一个[内置的 Web 服务器](https://www.jetbrains.com/help/idea/php-built-in-web-server.html)，可用于预览和调试您的应用程序。只需观看此[YouTube 视频](https://youtu.be/EKiP9b8ikTY)或按照以下步骤操作即可。

### 选项1

您需要添加新的“JavaScript 调试”配置：

*   [单击导航栏中](https://www.jetbrains.com/help/idea/navigation-bar.html)的添加配置...或编辑配置...

    [![运行 |  编辑配置](../Images/d8ad13c4e6ffb5a4f89fcf9c157faa5f.png)](https://i.stack.imgur.com/wB1wd.png)

*   单击[![+](../Images/8e9f359875af4259490ff52c59a7706c.png)](https://i.stack.imgur.com/JdqNR.png)工具栏中的按钮或按`Alt`+`Insert`以创建新配置

*   在运行配置的树形视图的 Templates 节点下选择[JavaScript Debug](https://www.jetbrains.com/help/idea/run-debug-configuration-javascript-debug.html)
*   填写名称、URL、浏览器点击【确定】保存配置
    Use `http://localhost:63342/YOUR-PROJECT-NAME/index.html`for URL

    [![运行/调试配置对话框](../Images/490f72f953909b0f7a2c70a8aa843d26.png)](https://i.stack.imgur.com/WK4Ji.png)

现在您可以运行配置：

*   单击导航栏中的运行[![运行图标](../Images/c5d192b67c261f3b6ca96736c13ab656.png)](https://i.stack.imgur.com/ntGWi.png)或调试[![调试图标](../Images/b1ca64a68decf6b991a6baf4667bb4c7.png)](https://i.stack.imgur.com/stybj.png)按钮（或使用`Shift`+ `F10`/ `Shift`+`F9`热键）。

### 选项 2

在浏览器中运行网页而不创建配置。请参阅相关的 IntelliJ IDEA[帮助文章](https://www.jetbrains.com/help/idea/javascript-specific-guidelines.html#open_html)。

> 1.  在编辑器中，打开 HTML 文件。该 HTML 文件不一定是实现应用程序起始页的文件。
>     
>     
> 2.  执行以下操作之一：
>     
>     
>     *   选择**查看 |** 在主菜单上的**浏览器中打开**`Alt`或按+ `F2`。然后从弹出菜单中选择所需的浏览器。
>     *   将鼠标指针悬停在代码上以显示浏览器图标栏： [![浏览器图标](../Images/ec2f8c48bcf45898564987cacda9528b.png)](https://i.stack.imgur.com/GBO3k.png)。单击指示所需浏览器的图标。

### 结果

带有由 Intelij IDEA 的内置网络服务器提供的演示网页的 Google Chrome 浏览器：

[![演示网页](../Images/9e2d61c25755aa1dd0579bd4a434eb76.png)](https://i.stack.imgur.com/CSLj7.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-09T03:52:02.417

一种简单的方法是在 IntelliJ 中创建一个 NodeJS / Express 项目，这***是***您的 Web 服务器。然后，您可以使用它来提供静态网页和任何其他 Web 内容。NodeJS Web 服务器非常小并且运行速度很快——明显比 IIS 和 Apache 快。最重要的是，您只需点击 IntelliJ 或 WebStorm 中的“运行”按钮即可启动它。

默认情况下，NodeJS / Express 项目包含一个`public/`目录，您可以使用该目录来包含您可以从中查看的静态页面`http://localhost:3000/`

这解释了在 IntelliJ 中启用 NodeJS 所需的步骤，并包含指向其他 Node 资源的链接：http: [//www.jetbrains.com/idea/webhelp/node-js.html](http://www.jetbrains.com/idea/webhelp/node-js.html)

如果您觉得有必要，您可以使用服务器端 JavaScript 代码重新配置您的 NodeJS 服务器。您可以添加 SSL 支持或几乎任何其他您想实现的服务器端功能。只需使用安装随附的 npm（节点包管理器）命令行工具添加 NodeJS 模块。NPM Registry [https://npmjs.org/](https://npmjs.org/)索引所有可用模块。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-09T04:48:03.480

您可以将 IntelliJ 配置为使用许多不同的应用程序容器，但必须分别下载和安装每个容器。我目前已将我的配置为通过码头服务，如 eclipse，以及 tomcat、tc-server、jboss 和 node.js。这很容易设置。

# php - 使用 jQuery ajax 创建动态表

> ID：11998493
> 
> 赞同：0
> 
> 时间：2012-08-17T00:57:57.783
> 
> 标签：php, jquery, html-table

我面临一个奇怪的问题...我正在使用来自 ajax 调用的数据动态创建表。代码在 Firefox 中有效/但在 Chrome 中失败...

我打算创建的 HTML 结构：

```
<title>Offers MADE<title>    
 <Table>
   proposed offer table
 </table>

<title>Offers Received<title>    
  <Table>
   Received offer table
 </table> 
```

但相反，这是我在 Chrome 上得到的结果/它可以在 Firefox 上运行..

```
<title>Offers MADE<title>       

<title>Offers Received<title>  

  <Table>
   proposed offer table
 </table>

  <Table>
   Received offer table
 </table> 
```

我相信它与 ajax 调用响应时间有关；因为如果我放置一个断点，它总是可以解决的..

为了确保 ajax 调用顺序正确，我在第一个 AJAX 调用的 success() 函数中进行了第二个 AJAX 调用。

```
 $.ajax{
    ::
    url : get_Proposed_Offers.php
    ::

    success : function(data)
      {
          //I make sure that the Proposed Offer Table gets populated
          //I populate the "div" tag with required HTML
          populate_Proposed_OfferTable();

          //Here's where I make another ajax call to populate 
          get_Received_OfferData();
      }

 }

 function get_Received_OfferData()
 {
    $.ajax{
    ::
    url : get_Received_Offers.php
    ::

    success : function(data)
      {
          populate_Received_OfferTable();              
      }

    }

 } 
```

谁能指出我在这里做错了什么？

我知道，如果我开始在不同的标签中填充“提议的”和“收到的”报价，而不是使用相同的标签，这应该可以解决我的问题。但我想知道为什么这种方法行不通。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T01:11:46.827

为什么需要两个 ajax 调用？我将进行一次 ajax 调用并让我的 php 以 JSON 格式发送两个数组的数据

```
 $.ajax({

   url:'populate_tables.php',
   dataType :'JSON',
   success: function(data){

   $.map(data.proposed.records,function(proposed_row,i){
      populate_proposed_table here
   }
   $.map(data.recieved.records,function(received_row,i){
      populate_received_table here
   }
  }
}) 
```

有了它，您甚至可以为您的作品添加其他功能和效果

更新：您可以在一次调用中传递任意数量的参数。

```
$.ajax({
 ........
 data:{param1:value1,param2:value2....},
}) 
```

并且 php 会将数据视为数组，所以

```
<?php
   $param1 = $_REQUEST['param1'];//not sure if you are using post or get
   $param2 = $_REQUEST['param2']... 
```

从这里运行您的查询

# scala - 为什么这段 Scala 代码无法编译？

> ID：11998494
> 
> 赞同：0
> 
> 时间：2012-08-17T00:58:07.753
> 
> 标签：scala

它产生的错误是：

```
Funct.scala:5: 'val' expected but identifier found.
[error] class Funct[In,Out](function: In => Out, description: String, implicit m: Manifest[In => Out]) { 
```

有问题的代码是：

```
import scala.reflect.Manifest;

class Funct[In,Out](function: In => Out, description: String, implicit m: Manifest[In => Out]) {

  def isType[K](implicit man: Manifest[K]) = {
    m &lt;:&lt; man
  }

  def Apply(input: In): Out = {
    function.Apply(input)
  }

  def toString() = {
    description + m
  }
} 
```

我根本看不出问题出在哪里。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T01:44:37.837

您应该能够弄清楚一些问题，但是该消息确实有点令人困惑。

这里的问题是`implicit`关键字必须标记整个参数组，而不仅仅是单个参数。尝试：

```
class Funct[In,Out](function: In => Out, description: String)(implicit m: Manifest[In => Out]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T01:52:39.827

`function.Apply(input)`应该是`function.apply(input)`或只是`function(input)`，但说真的，只要使用 IntelliJ 或 Eclipse，他们就会立即告诉你这些事情。

# objective-c - 我可以从objective-c调用cocos2d-x类方法（c++）吗？

> ID：11998495
> 
> 赞同：0
> 
> 时间：2012-08-17T00:58:11.450
> 
> 标签：objective-c, cocos2d-x

cocos2d-x 的东西。

我知道我们可以从 cocos2d-x 调用 Objective-c 方法。（使用桥接类，例如）ObjCCall.mm。

但是，与此相反，是否可以从objective-c调用cocos2d-x类的方法（场景类方法）？

例如，当在objective-c中完成支付请求时，我想调用显示cocos2d-x场景的弹出方法。

任何想法请...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T01:06:57.710

**是的**

当然，您需要将其编译为 objc++ 并包含正确的文件。

```
- (void)method {
  SomeCppClass::Foo(1);
} 
```

# grails - 比较来自同一域 createCriteria Grails 的两个对象

> ID：11998501
> 
> 赞同：0
> 
> 时间：2012-08-17T00:58:39.000
> 
> 标签：grails, executequery, createcriteria

您好我有以下使用 executeQuery() 运行的 HQL 查询：

```
def q = Domain.executeQuery("Select d0 from Domain d0 where d0.id = (select min(d1.id) from Domain d1 where d1.code = d0.code and d1.service = d0.service and d1.site = d0.site)"); 
```

我正在尝试转换此 HQL 查询，以便使用 createCriteria() 而不是 executeQuery() 返回结果，因为我想传入分页参数。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:43:51.287

您也可以在执行查询中传递分页参数。只需在查询字符串和查询参数（如果有）之后传递分页图：
`q = Domain.executeQuery("query", queryParams, paginationParams);`
请注意，`queryParams`是可选的

# html - 画布不使用 HTML5 使用音频标签进行绘制

> ID：11998502
> 
> 赞同：1
> 
> 时间：2012-08-17T00:58:59.373
> 
> 标签：html, audio, canvas

我的代码运行良好。它在 html 页面上调用 javascript 脚本，该脚本在页面上绘制并制作动画。现在，我现在所做的是添加标签以便自动播放音频剪辑。我遇到的问题是我的动画停止绘制，但背景中有音乐播放。

下面是我用来运行的 index.html。它是项目中唯一的 html 文件。

```
<!doctype html> 
<html class="no-js" lang="en" manifest="./main.manifest">
    <head>
        <meta charset="utf-8">

        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

        <title> My Game </title>
        <meta name="description" content="">
        <meta name="author" content="SweetPotatoes">

        <meta name = "viewport" content = "user-scalable=no,
        initial-scale=1.0, maximum-scale=1.0, width=device-width" />

        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="css/game.css">
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">

    </head>

    <body>

        <div id="container">
            <canvas id="canvasSausage" display="block" ></canvas>
        </div>
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
        <script>
            window.jQuery || document.write('<script src="js/libs/jquery-1.6.2.min.js"><\/script>')
        </script>

<!-- JavaScript at the bottom for fast page loading -->

            <script src="js/libs/modernizr-2.0.6.min.js"></script>
            <script src="js/libs/require.1.0.8.min.js"></script>
            <script src="js/libs/Draw.js"></script>
            <script src="js/libs/Smile.js"></script>
            <script src="js/libs/UpDpwn.js"></script>
            <script src="js/mylibs/SmellyCanvas/core/canvasMain.js"></script>

            <!-- scripts concatenated and minified via ant build script-->
            <script defer src="js/plugins.js"></script>
            <script defer src="js/script.js"></script>

            <!-- end scripts-->

            <script>
                window._gaq = [['_setAccount', 'UAXXXXXXXX1'], ['_trackPageview'], ['_trackPageLoadTime']];
                Modernizr.load({
                    load : ('https:' == location.protocol ? '//ssl' : '//www') + '.google-analytics.com/ga.js'
                });
            </script>

            <!-- Prompt IE 6 users to install Chrome Frame. Remove this if you want to support IE 6.
            chromium.org/developers/how-tos/chrome-frame-getting-started -->
            <!--[if lt IE 7 ]>
            <script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script>
            <script>window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})</script>
            <![endif]-->
            <audio autoplay="true">
            <source src="sound/Heart.mp3"></source>
                audio tag not supported.
            </audio>

        </body>
    </html> 
```

我的主要清单

```
CACHE MANIFEST
# 2012-08-11

index.html
sound/Heart.mp3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:42:18.090

不要在开发时使用清单。清单就像类固醇上的浏览器缓存。对外部 .js 文件进行更改然后让浏览器不抓取它们存在足够多的问题，因为您使用的是浏览器从以前的访问中保存的版本（当某些东西被破坏/不同时）。

使用清单，您几乎可以将缓存能力扩展到永恒，除非您要编写脚本来管理清单。一句话：不要。

构建你将要构建的东西，以及何时完成——至少，当它处于 1.0 阶段，或者是一个好的、可靠的公开测试版时……

...然后开始考虑在清单中永久缓存文件。

# ios - 如何将使用 AES256 编码的 NSData 转换为 base64？

> ID：11998507
> 
> 赞同：1
> 
> 时间：2012-08-17T00:59:23.853
> 
> 标签：ios, xcode, nsstring, nsdata

我正在尝试将`NSData`已使用 AES256 加密加密的对象转换为 base64 NSData 对象。我的印象是我不能直接将`NSData`已经使用 AES256 加密的对象转换为 NSString，我必须先将其转换为 base64。

那么如何将 NSData 对象转换为 base64 数据对象呢？而且我需要将 base64 数据对象转换为 NSString。

我找到了这个方法，但我不确定如何使用下面的方法将我的 NSData 对象转换为 base64。

```
 - (NSString*)base64forData:(NSData*)theData {

const uint8_t* input = (const uint8_t*)[theData bytes];
NSInteger length = [theData length];

static char table[] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";

NSMutableData* data = [NSMutableData dataWithLength:((length + 2) / 3) * 4];
uint8_t* output = (uint8_t*)data.mutableBytes;

NSInteger i;
for (i=0; i < length; i += 3) {
    NSInteger value = 0;
    NSInteger j;
    for (j = i; j < (i + 3); j++) {
        value <<= 8;

        if (j < length) {
            value |= (0xFF & input[j]);
        }
    }

    NSInteger theIndex = (i / 3) * 4;
    output[theIndex + 0] =                    table[(value >> 18) & 0x3F];
    output[theIndex + 1] =                    table[(value >> 12) & 0x3F];
    output[theIndex + 2] = (i + 1) < length ? table[(value >> 6)  & 0x3F] : '=';
    output[theIndex + 3] = (i + 2) < length ? table[(value >> 0)  & 0x3F] : '=';
}

return [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T01:23:25.210

您在帖子中提供的方法应该有效（[cocoadev](http://cocoadev.com/wiki/BaseSixtyFour)有相关讨论）。

以下是您如何使用此方法：

```
NSString *b64 = [self base64forData:myNsData]; 
```

# forms - Drupal 7 - 创建依赖的自动完成表单字段

> ID：11998508
> 
> 赞同：0
> 
> 时间：2012-08-17T00:59:33.837
> 
> 标签：forms, drupal, autocomplete, drupal-7

我想知道是否有人可以帮助我更新此处详述的代码（http://oif.eafarris.com/blog/pre-fill-cck-node-fields-based-on-a-node-re... ) 对于 Drupal 7。那篇文章中描述的功能与我希望在我的 Drupal 7 站点上执行的功能相同，但我对自己的编程不够精通。

我有一个内容类型事件。在事件的节点创建表单上，我有一个“客户端”的自动完成字段。下面是名称、地址等的附加字段。我希望在这里实现的最终结果是：

1.  用户在自动完成客户端字段中输入客户端名称。

2.  输入的客户端名称与现有客户端匹配并被选中。

3.  使用所选客户端的节点 ID，然后自动填充地址字段。

我有一个带有 nid 参数的 JSON 视图，它在 URL http://domain.com/json-clients/[nid] 处吐出所需的字段。但我无法将该信息返回到表单上的正确字段。

下面是我修改后的代码，试图让它与 D7 一起工作。有人看到明显的错误并愿意提供帮助吗？

```
(function ($) {
    Drupal.behaviors.sponsorhelper = function () {
        $("input[name='field_client[und][0][nid]']").blur(function() {

            nidRegEx = /\[nid:(\d+)\]/;

            SponsorHelper.fill($(this).attr('value').match(nidRegEx)[1]);

        })
    };

    SponsorHelper.fill = function(nid) {
        var url = Drupal.settings.basePath + 'json-clients/' + nid;

        jQuery.getJSON(url, function (data, result) {
            if (result != 'success') {
                return;
            }

            $("input[name='field_address_1[und][0][value]']")
                .attr('value',data.nodes[0].node.field_address_1_value);

            $("input[name='field_address_2[und][0][value]']")
                .attr('value',data.nodes[0].node.field_address_2_value);
        })
    };
})(jQuery); 
```

任何帮助是极大的赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T23:50:51.853

与其编写自己的 javascript，不如尝试使用几个 drupal 的社区模块来处理这个问题。查看： http: [//drupal.org/project/conditional_fields](http://drupal.org/project/conditional_fields) http://drupal.org/project/computed_field/

您可以使用条件字段隐藏地址，直到输入客户信息。然后使用计算字段搜索客户并自动填写地址字段。

# javascript - jQuery 1.8：不支持的伪：悬停

> ID：11998514
> 
> 赞同：6
> 
> 时间：2012-08-17T01:01:26.373
> 
> 标签：javascript, jquery, jquery-1.8

以下代码`unsupported pseudo: hover`在 jQuery 1.8 上引发了错误，而它在 jQuery 1.7.2 上完美运行：

```
if(!$(this).parent().find('ul').first().is(':hover')) {
   $(this).parent().parent().removeClass('open');
} 
```

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T17:26:44.043

不幸的是，虽然我们都希望我们的代码是面向未来的，但您的`$('foo').on( 'hover, ... function(){ //do stuff }`代码[在 jQuery 1.8 中已被弃用](http://bugs.jquery.com/ticket/11731)。我希望我有更好的消息告诉您，但是由于 jQuery 1.8 的核心更改，您的代码已损坏。您现在必须使用语法

```
$('.selector').on( 'mouseenter mouseleave', function() {
      $(this).toggleClass('hover');
   }
);

if(!$(this).parent().find('ul').first().hasClass('hover')) {
   $(this).parent().parent().removeClass('open');
} 
```

希望我有更好的消息给你，但弃用发生了：/ ... jQuery 1.8 不喜欢你的快捷方式，他们已经弃用了`hover`事件处理程序`.on()`和伪选择器`:hover`，所以它不能以任何方式使用更多的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-14T19:30:54.003

老问题，但对于任何谷歌搜索的人：

一种解决方法是反过来：

`$(":focus, :active").filter($(".your-element"));`

…因为`.filter()`也接受 jQuery 对象，这将匹配任何带有伪元素`:focus`并且`:active`也有 class的元素`.your-element`。

换句话说，如果`.your-element`没有悬停或活动，则此选择不匹配任何元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-29T19:20:12.690

奇怪 - 对我来说， .is(":hover") 仍在 1.8 中工作，但在 1.9.1 中被破坏。

无论如何，这是一个修复

```
function mouseIsOverWorkaround(what){
    var temp = $(what).parent().find(":hover");
    return temp.length == 1 && temp[0] == what;
} 
```

然后在“裸”（非 jQuery 包装）元素上调用上述函数。在你的情况下，

```
if(!mouseIsOverWorkaround($(this).parent().find('ul').first()[0]) {
   $(this).parent().parent().removeClass('open');
} 
```

（不要忘记 [0]）

上述（对原始问题的评论）小提琴[http://jsfiddle.net/nnnnnn/Tm77a/](http://jsfiddle.net/nnnnnn/Tm77a/)在 jQuery 1.9.1 中不起作用

摆弄这个[http://jsfiddle.net/mathheadinclouds/BxL4w/](http://jsfiddle.net/mathheadinclouds/BxL4w/)

# javascript - Ruby/Rails 中的网址

> ID：11998518
> 
> 赞同：1
> 
> 时间：2012-08-17T01:01:56.613
> 
> 标签：javascript, ruby-on-rails, ruby

我想对我的路由使用相同的 AJAX 调用。我如何设置网址？

**路线：**

```
put :sort, :path => 'activities/sort', :controller => 'activities'
put :sort, :path => 'articles/sort', :controller => 'articles' 
```

**JS：**

```
$.ajax({
            type: "PUT",
            url: 'activities/sort',  # I wanna change this line
            data: {ids:newOrder}, 
            dataType: "html",
            error: function()
            {
                alert('Positions has not been saved.');
                $('#sortable').sortable('cancel');
            }
         }); 
```

我在想这样的事情：

```
url: <%= action: 'sort' %> 
```

但它重定向到 'localhost:3000/sort' 但我想要 'localhost:300/current_controller/sort'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T01:08:13.877

您的路线生成以下内容

```
sort PUT      /activities/sort(.:format)      activities#sort 
```

如**[this SO question中所述](https://stackoverflow.com/questions/6725629/route-helpers-in-asset-pipeline)**

> Sprockets 在 Rails 应用程序的上下文之外评估 ERB

因此，`.js.erb`默认情况下，文件无法访问 URL 辅助方法；必须明确包含它们。

```
<% 
  # at the top of your file somewhere
  url = Rails.application.routes.url_helpers
%>

// ...
url: <%= url.sort_path %>,
// ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T03:20:06.013

我使用这样的东西：

```
def javascript_variables(variables = nil)
  @inline_js_variables ||= {}
  @inline_js_variables.merge!(variables) and return if !variables.nil?

  output = ''

  @inline_js_variables.each do |variable, value|
    output << "var #{variable} = #{value.to_json};\n"
  end

  output.strip.html_safe
end 
```

您可以将上述内容放入`app/helpers/application_helper.rb`. 然后在你的`ApplicationController`，你可以把它放在类的顶部。

```
helper :all 
```

现在，在您的操作中，您可以执行类似的操作

```
def your_activities_action
  javascript_variables({ ajax_route_path: sort_activities_path })
end

def your_articles_action
  javascript_variables({ ajax_route_path: sort_articles_path })
end 
```

在您的`app/views/layouts/application.html.erb`中，您可以将以下内容放入`<head>`

```
<script>
  <%= javascript_variables %>
</script> 
```

最后，在您的`.js`文件中，您可以`ajax_route_path`在`url`参数中使用。

```
url: ajax_route_path, 
```

根据这个答案和我的另一个答案，你应该能够拼凑出你想要完成的事情。例如，如果您需要两者`sort_activities_path`并`sort_articles_path`包含在同一个操作中

```
def your_articles_action
  javascript_variables({ ajax_activities_route_path: sort_activities_path,
                         ajax_articles_route_path:   sort_articles_path })
end 
```

然后修改您的 Javascript 文件以相应地使用每个文件*（例如，通过将 Ajax 方法包装在您的问题中的函数中，接受路由`url`作为参数）*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T01:08:15.380

尝试`/`在前面放一个，如下所示：

```
'/activities/sort' 
```

否则，正如您所说，它将使用，`/current_controller/activities/sort`因为没有`/`前面，路径是相对的而不是绝对的。

# java - 在将新任务添加到 Java 中的线程池之前等待任务完成的最佳方法？

> ID：11998519
> 
> 赞同：0
> 
> 时间：2012-08-17T01:02:06.653
> 
> 标签：java, multithreading, concurrency, threadpool

我想使用 ThreadPoolExecutor 之类的东西来管理在可用线程上运行的一堆任务。这些任务都是同一类型，但处理不同的帐户。可以定期添加这些帐户的新任务，我希望它检查并且不允许新任务启动，直到同一帐户的旧任务已经完成。最好的方法是什么？

## 例子

1.  帐户“234”的任务已启动（通过 ThreadPoolExecutor.execute()）

2.  帐户“238”的任务已启动（通过 ThreadPoolExecutor.execute()）

3.  帐户“234”的新任务已创建但未添加执行，因为第一个“234”任务未完成（最好的检查方法？）

4.  帐户“238”的任务完成

5.  帐户“238”的新任务启动（通过 ThreadPoolExecutor.execute()），因为当前没有为该帐户运行

最好的方法是什么？只需让它用 wait/sleep() 检查 Runnable 中的某些检查变量，以完成“234”的第一个任务吗？还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T01:16:53.877

毫无疑问，对这部分 API 有更多经验的人会有更好的主意，但这是我对这个主题的想法......

基本上，我会从“运行”和“等待”队列开始。“运行”队列跟踪当前正在运行的内容，“等待”队列跟踪您阻止的任务。这些队列需要键入某种“组标识符”，以便更容易查找（即`Map<String, List<Runnable>`），例如，您的帐号

我会考虑覆盖该`execute`方法。在这里，我会将传入任务与正在运行的队列进行比较，以确定当前是否有任何相关任务正在运行。如果有，我会将新任务放入等待队列。

然后我会覆盖该`beforeExecute`方法。在这里，我将在“运行”队列中注册任务。

我会覆盖'afterExecute'方法。在这里，我将从“正在运行”队列中删除已完成的任务，查找等待任务的队列（通过已完成任务的组标识符）并通过该`execute`方法将队列中的第一个任务添加到执行程序中

或者你可以按照路易斯的建议做：P

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T02:54:54.237

一种简单的可能性。也许过于简单。创建 10 个 SingleThreadedExecutor。对于每个任务

1.  通过使用 accountID mod 10 来“散列”accountID 以找到合适的 SingleThreadedExecutor。（在实践中，accountID 可能不是一个 int，例如，如果它是一个字符串，则它是 hashCode() mod 10）。
2.  将任务提交给该 SingleThreadedExecutor。

这可能并不理想，因为帐户 238 的处理将被迫等到 358 完成，但至少您确定特定帐户（例如 234）永远不会同时运行。取决于您可以允许多少延迟。显然，您可以使用我描述的执行器的数量和简单的“散列”算法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T03:32:50.723

我遇到了同样的问题。我的解决方案是使用 HashSet。

```
private static HashSet<Integer> runningTasks = new HashSet();

public void run(){
  boolean isAlreadyRunning = false;
  synchronized (runningTasks) {
    if (runningTasks.contains(this.accountId)) {
      isAlreadyRunning = true;
    } else {
      runningTasks.add(this.accountId);
    }
  }
  if(isAlreadyRunning){
    //schedule this task to run later here
    //what I did was to reinsert this task to the task queue 5 seconds later
    return;
  }
  //do your stuffs here

  synchronized (runningTasks) {
    runningTasks.remove(this.accountId);
  }
} 
```

# iphone - 在绘图 GL_POINTS 和 GL_TRIANGLES 之间切换

> ID：11998524
> 
> 赞同：2
> 
> 时间：2012-08-17T01:02:27.830
> 
> 标签：iphone, objective-c, opengl-es, opengl-es-2.0

我写了一个简单的 iphone 程序，它绘制一个立方体，绘制模式在屏幕视图中的用户点击之间切换。

```
glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

glUseProgram(_program);

glBindVertexArrayOES(_vertexArray);
glUniformMatrix4fv(uniforms[UNIFORM_MODELVIEWPROJECTION_MATRIX], 1, 0, _modelViewProjectionMatrix.m);
glUniformMatrix3fv(uniforms[UNIFORM_NORMAL_MATRIX], 1, 0, _normalMatrix.m);
if (_drawGLPointsMode)
    glDrawElements(GL_POINTS, sizeof(CubeIndices)/sizeof(CubeIndices[0]), GL_UNSIGNED_BYTE, 0);
else
    glDrawElements(GL_TRIANGLES, sizeof(CubeIndices)/sizeof(CubeIndices[0]), GL_UNSIGNED_BYTE, 0); 
```

在上面的代码中，_drawGLPointsMode 是一个 BOOL，它在 Taps 之间发生变化。我遇到的问题是，当使用 GL_TRIANGLES 绘制时，未绘制立方体。它在切换到使用 GL_POINTS 绘图时起作用。

谁能帮帮我，我觉得我的代码存在根本缺陷。提前致谢。

**编辑：**

```
glGenBuffers(1, &_vertexBuffer);
glBindBuffer(GL_ARRAY_BUFFER, _vertexBuffer);
glBufferData(GL_ARRAY_BUFFER, sizeof(CubeVertices), CubeVertices, GL_STATIC_DRAW);

glGenBuffers(1, &_vertexIndexBuffer);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, _vertexIndexBuffer);
glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(CubeIndices), CubeIndices, GL_STATIC_DRAW); 
```

我也尝试将 GL_STATIC_DRAW 更改为 GL_DYANMIC_DRAW，但我得到了相同的结果。此外，如果我在 iphone 模拟器中运行当前代码，一切正常，只有在实际设备（iphone 4S）上运行时，我才会看到这个问题。谢谢！

# asp.net-mvc - WebApi jsonFormatter如何将空字符串值更改为空字符串

> ID：11998526
> 
> 赞同：0
> 
> 时间：2012-08-17T01:03:27.323
> 
> 标签：asp.net-mvc, asp.net-web-api, jsonserializer

我从我的 asp.net MVC WebApi 收到我的 json 数据进入我的 kendoUI 控件的古怪问题，因为空字符串被发送为

```
"FielName":null 
```

我想知道如何在我的 webapi 上设置 jsonformatter，以便具有空值的字符串字段返回空字符串“”而不是像 Null 一样？所以看起来。

```
"FieldName":"" 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:29:56.207

您可以查看修改 JsonFormatter 并将其更改`ContractResolver`为有点不同的东西。这个问题：[Serializing null in JSON.NET](https://stackoverflow.com/questions/8833961/serializing-null-in-json-net)看起来可以很容易地适应您的目的（只需更新默认的 JsonFormatter）。

# mysql - SQL 优化：使用无子选择查找第一个未观看的视频

> ID：11998528
> 
> 赞同：2
> 
> 时间：2012-08-17T01:04:05.147
> 
> 标签：mysql, sql

我的问题。我想我有一个性能杀伤子查询，但无法证明它。我第一次尝试使用 JOIN 失败了。*有人可以提供更高性能的解决方案或确认这确实可以接受吗？*

我有两张表，一张包含待办事项列表（joblist），一张跟踪每个用户的进度（userprogress）。工作**可以**但不能是看视频。（这是一个电子学习网站。）

观看视频后，它们会在枚举字段上自动设置为“已完成”。用户也可以手动跳过视频（status = 'skipped'）。

下面提供了表结构。

要获取用户根本没有观看的第一个视频（用户进度中没有记录）或已经开始观看（状态 = '开始'），我正在使用此查询。

我已经在用于选择或排序的任何字段上设置了索引。但是我不确定它们是否都需要。

SELECT 语句有两个部分

1.  一个内部子选择，我在其中获取*所有看过或跳过*的视频
2.  主要声明，我在其中获取第*一个*视频，*而不是*（1）找到的视频

PHP (:email) 有一个命名参数，以避免 SQL 注入。

```
SELECT jl.where_to_do_it FROM joblist AS jl
INNER JOIN userprogress AS up
ON (jl.joblistID = up.joblistID)
WHERE jl.what_to_do = 'video'
     AND jl.joblistID NOT IN
      (
        SELECT injl.joblistID
        FROM joblist AS injl
        INNER JOIN userprogress AS inup
        ON (injl.joblistID = inup.joblistID)
        WHERE
             (inup.status = 'finished' OR inup.status = 'skipped')
          AND
             inup.email = :email
          AND
             injl.what_to_do = 'video'
      )
ORDER BY jl.joborder ASC
LIMIT 0,1 
```

这是 EXPLAIN 的输出，*我需要一些帮助来理解*。

```
id select_type  table     type  possible_keys                 key         key_len  ref          rows   Extra
1  PRIMARY      jl        ref   PRIMARY,what_to_do            what_to_do  602      const        9      Using where; Using filesort
1  PRIMARY      up        ref   joblistID                     joblistID   3        jl.joblistID 1      Using index
2  DEP-SUB      injl  eq_ref    PRIMARY,what_to_do            PRIMARY     3        func         1      Using where
2  DEP-SUB      inup  eq_ref    nodup,email,joblistID,status  nodup       455      const,func   1      Using where 
```

创建表命令：

```
CREATE TABLE IF NOT EXISTS `joblist` (
  `joblistID` mediumint(10) unsigned NOT NULL AUTO_INCREMENT,
  `what_to_do` varchar(200) COLLATE utf8_swedish_ci NOT NULL,
  `where_to_do_it` varchar(100) COLLATE utf8_swedish_ci NOT NULL,
  `joborder` mediumint(6) NOT NULL,
  `track` enum('fast','slow','bonus') COLLATE utf8_swedish_ci NOT NULL DEFAULT 'slow',
  `chapter` tinyint(11) unsigned NOT NULL COMMENT 'What book chapter it relates to',
  PRIMARY KEY (`joblistID`),
  KEY `nodupjobs` (`joborder`,`chapter`),
  KEY `what_to_do` (`what_to_do`),
  KEY `where_to_do_it` (`where_to_do_it`),
  KEY `joborder` (`joborder`),
  KEY `track` (`track`),
  KEY `chapter` (`chapter`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_swedish_ci COMMENT='Suggested working order';

CREATE TABLE IF NOT EXISTS `userprogress` (
  `upID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `email` varchar(150) COLLATE utf8_swedish_ci NOT NULL COMMENT 'user id',
  `joblistID` mediumint(9) unsigned NOT NULL COMMENT 'foreign key',
  `progressdata` varchar(300) COLLATE utf8_swedish_ci DEFAULT NULL COMMENT 'JSON object describing progress',
  `percentage_complete` tinyint(3) unsigned DEFAULT NULL,
  `status` enum('begun','skipped','finished') COLLATE utf8_swedish_ci DEFAULT 'begun',
  `lastupdate` datetime NOT NULL,
  `approved` datetime DEFAULT NULL,
  PRIMARY KEY (`upID`),
  UNIQUE KEY `nodup` (`email`,`joblistID`),
  KEY `email` (`email`),
  KEY `joblistID` (`joblistID`),
  KEY `status` (`status`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_swedish_ci COMMENT='Keep track of what the user has done'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T01:09:21.120

是的，你是对的。IN 和 NOT IN 在 mysql 中表现特别差。这是一个修订版：

```
SELECT jl.where_to_do_it
FROM joblist jl INNER JOIN
     userprogress up
     ON (jl.joblistID = up.joblistID)
 WHERE jl.what_to_do = 'video' and
       not exists (
           (SELECT 1
            FROM joblist injl INNER JOIN
                 userprogress inup
                 ON (injl.joblistID = inup.joblistID)
            WHERE (inup.status = 'finished' OR inup.status = 'skipped') and
                  inup.email = :email and
                  injl.what_to_do = 'video' and
                  ini1.joblistid = j1.joblistid
          )
ORDER BY jl.joborder ASC
LIMIT 0,1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T01:27:24.197

看起来你在圈子里跑......你的子查询正在寻找状态为已完成或已跳过的视频，然后在外部查询中寻找那些没有该状态的视频，我会为这样的条件更改它

```
SELECT jl.where_to_do_it FROM joblist AS jl
INNER JOIN userprogress AS up
ON (jl.joblistID = up.joblistID)
WHERE jl.what_to_do = 'video'
 AND up.status <> 'finished' AND inup.status <> 'skipped'
 AND up.email = :email
 AND jl.what_to_do = 'video' 
```

或者也许我理解错了，无论如何问题似乎是 NOT IN （我不会建议永远使用它）而不是尝试更改条件中的子查询并对其进行左连接并添加条件`And SQ.joblistID IS NULL`，就像这样

```
 SELECT jl.where_to_do_it FROM joblist AS jl
 INNER JOIN userprogress AS up
 ON (jl.joblistID = up.joblistID)
 LEFT JOIN (
    SELECT injl.joblistID
    FROM joblist AS injl
    INNER JOIN userprogress AS inup
    ON (injl.joblistID = inup.joblistID)
    WHERE
         (inup.status = 'finished' OR inup.status = 'skipped')
      AND
         inup.email = :email
      AND
         injl.what_to_do = 'video'
  ) SQ ON jl.joblistID = SQ.joblistID
 WHERE jl.what_to_do = 'video'
 AND SQ.joblistID IS NULL      
 ORDER BY jl.joborder ASC 
```

但我认为第一个选项会起作用......

希望能帮助到你

# wordpress - Wordpress 标记中无法识别的 iframe 渲染

> ID：11998534
> 
> 赞同：0
> 
> 时间：2012-08-17T01:04:49.500
> 
> 标签：wordpress

我正在检查 Wordpress 3.4.1 网站上的浏览器元素，遇到了一个我不认识的 iframe。

```
<body class=" customize-support">

<iframe src="http://mickajoin.tumblr.com/?d=www.example.net" frameborder="0" marginwidth="0px" marginheight="0px" scrolling="no" width="0px" height="0px"></iframe>

<div id="wrapper">
  ... 
```

当然[http://mickajoin.tumblr.com](http://mickajoin.tumblr.com)不存在，所以无论如何这都会返回 404。搜索该项目一无所获。谷歌没有返回任何相关内容。

最初我以为是图库插件。我禁用了它并且 iframe 仍然存在。我还停用了网站上使用的其他 2 个第三方插件。这些都不起作用。

我希望有人能指出我可以注射的来源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T23:47:07.527

感谢您提供有关扩展的提示。原来它对我来说是口袋妖怪塔防 HD 5.6。^_^

# apache-flex - 如何使用 FXG 作为 mx:Button 图标

> ID：11998535
> 
> 赞同：1
> 
> 时间：2012-08-17T01:05:11.090
> 
> 标签：apache-flex, mxml

我正在尝试使用 FXG 图像作为还包含标题的按钮的图标。我的 FXG 文件位于 resources/SpeakerIcon.fxg 中，我尝试的用法在我的 mxml 文件中如下所示：

```
 <mx:Button id="audioButton" label="Audio"
                   ....
                   icon="{resources.SpeakerIcon}"/> 
```

当我尝试使用它时，我得到“TypeError：错误＃1034：类型强制失败：无法将资源：：SpeakerIcon@41fa0e1 转换为 mx.core.IFlexDisplayObject。” 我的研究表明，FXG 文件应该是 s:Graphics，它确实实现了 IFlexDisplayObject [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/primitives/Graphic.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/primitives/Graphic.html)。

我错过了什么简单的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T01:25:38.810

该对象与 FXG 文档中的标签`<s:Graphics/>`不同。`<Graphics/>`

`<s:Graphics/>`是 Spark 原始形状组件（如`<s:Rect/>`）的基类。它们不像 FXG 同类产品那样轻巧。因此，他们没有实现`IFlexDisplayObject`接口（正如@Flextras 刚刚发布的那样：）

FXG 资产可以被视为`SpriteVisualElement`在您的 Flex 代码中，这在技术上意味着 FXG 资产实现了`IVisualElement`接口。

如果可以，请使用 Spark`<s:Button/>`类而不是 mx。我认为不适`<mx:Button/>`用于 FXG。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T01:23:24.463

对于 FXG，您应该使用 Sprite 或 [在您的情况下] [SpriteVisualElement](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/core/SpriteVisualElement.html)。我不相信这些类中的任何一个都实现了 IFlexDisplayObject。

您可以考虑将您的 FXG 元素包装在我的 Apache Flex 白板上的这个[FXGImage类中。](http://svn.apache.org/viewvc/incubator/flex/whiteboard/jhouser/FXGImage/)FXGImage 扩展了 UIcomponent，它是一个 IFlexDisplayObject。

[这是该类源代码](http://svn.apache.org/viewvc/incubator/flex/whiteboard/jhouser/FXGImage/Workspace/FXGImageLibrary/src/org/apache/utils/FXGImage.as?revision=1310637&view=markup)的直接链接。

# c# - ASP.NET MVC 3 Razor DisplayFor Delegate

> ID：11998537
> 
> 赞同：2
> 
> 时间：2012-08-17T01:05:27.360
> 
> 标签：c#, asp.net-mvc-3, razor, lambda, display-templates

我收到此错误：

> 模板只能与字段访问、属性访问、一维数组索引或单参数自定义索引器表达式一起使用。

这是我的代码（自定义 HTML 帮助程序，包装 DisplayFor 以便我可以选择模板）：

```
public static string DisplayLocationTypeFor<TModel>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, LocationType>> expression, bool plural = false)
{
   return plural ? 
      htmlHelper.DisplayFor(expression, "LocationTypePlural").ToHtmlString() :
      htmlHelper.DisplayFor(expression).ToHtmlString();
} 
```

当我这样使用它时，它可以工作：

```
@Html.DisplayLocationTypeFor(model => model.LocationType) 
```

因为`model`具有 的属性`LocationType`。

但是当我在*另一个*自定义 HTML 助手中执行此操作时：

```
public static MvcHtmlString SearchPreferenceButtonForModel<TModel>(this HtmlHelper<TModel> htmlHelper)
{
   // .. other code
   foreach (var property in htmlHelper.ViewData.ModelMetadata.Properties)
   {
      if (property.PropertyName == "LocationType")
         htmlHelper.DisplayLocationTypeFor(model => ((LocationType)Enum.ToObject(typeof(LocationType), property.Model)), true);
   } 
} 
```

它错误。

我可以更改我的`DisplayLocationTypeFor`助手来使用`htmlHelper.Display`，但我不确定如何。

有任何想法吗？

**我想要做的**是，我有一种特定的方式来渲染`LocationType`模型，我希望在整个站点上发生这种情况。在内部，模板使用资源文件，以及基于 URL 的其他一些智能。换句话说，有逻辑——我不想重复。

这样，我所有的视图/模板都会调用此模板作为呈现`LocationType`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T05:43:05.637

您需要阅读错误信息：

> 模板只能与字段访问、属性访问、一维数组索引或单参数自定义索引器表达式一起使用。

它告诉您 Razor 模板中只允许使用某些类型的（非常简单！） lambda 表达式。如果您有更复杂的内容，则需要在尝试将其传递给模板之前计算该值。像这样的东西应该工作：

```
if (property.PropertyName == "LocationType") {
  LocationType locationType = (LocationType) Enum.ToObject(typeof(LocationType), property.Model));
  htmlHelper.DisplayLocationTypeFor(model => locationType, true);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T04:06:24.557

`LocationType`您可以通过为模型编写显示模板来实现这一点。

[这](https://stackoverflow.com/a/5497234/887149)是一个答案，说明了如何实现这一目标。简而言之：

1.  创建一个文件夹`~/Views/Shared/DisplayTemplates`。
2.  在您创建的新文件夹中创建一个名为`LocationType`model type的视图`LocationType`。每当您尝试 a`@DisplayFor(model => model.LocationType)`时，您为其创建的视图`LocationType`都会被渲染。

# python - 从python中的字典中删除某些键？

> ID：11998553
> 
> 赞同：1
> 
> 时间：2012-08-17T01:09:16.080
> 
> 标签：python, syntax

我有一个包含字典的列表

```
[{'item1':xxx, 'item2':xxx}, {'item1':xxx, 'item2':xxx}] 
```

我想删除所有“item1”，所以列表变为：

```
['item2':xxx}, {'item2':xxx}] 
```

我可以使用的最短语法是什么？我知道您可以使用 for ...循环它，但我正在寻找最简单的语法！谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T01:13:05.457

最简单的语法*是*for 循环。

```
for D in L:
  del D['item1'] 
```

# iphone - 以编程方式将 UIButton 添加到 Storyboard 视图

> ID：11998555
> 
> 赞同：1
> 
> 时间：2012-08-17T01:09:32.047
> 
> 标签：iphone, ios, ios4, storyboard

我有一个 Storyboard View Controller（带有我自己的自定义子类），其中我有一个 initWithCoder 自定义方法，我想在其中使用我自己的自定义对象来流行视图（我想保持以编程方式执行此操作的灵活性。

代码工作正常，直到`[self.view addSubview:button];`被调用，然后它崩溃：“无法在包中加载 NIB”。

我想做的就是在我的视图上添加一个 UIButton ......

```
- (id)initWithCoder:(NSCoder*)aDecoder 
{
    if(self = [super initWithCoder:aDecoder]) 
    {
        [self initLoginForm];
    }
    return self;
}

-(void)initLoginForm
{

    UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    button.frame = CGRectMake(100, 170, 100, 30);
    [button setTitle:@"Login..." forState:UIControlStateNormal];
    [button addTarget:self action:@selector(handleLoginAttempt) forControlEvents:UIControlEventTouchUpInside];

    [self.view addSubview:button]; 

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T01:15:35.533

如何将按钮放入`viewDidLoad`方法中，然后将其添加到`initLoginForm`.

像这样的东西：

```
-(void)viewDidLoad {
    UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    button.frame = CGRectMake(100, 170, 100, 30);
    [button setTitle:@"Login..." forState:UIControlStateNormal];
    [button addTarget:self action:@selector(handleLoginAttempt) forControlEvents:UIControlEventTouchUpInside];
}

-(void)initLoginForm {

[self.view addSubview:button];

} 
```

或者添加它`viewDidLoad`然后隐藏它，然后在`initLoginForm`显示它。

# asp.net-web-api - webapi 批量请求

> ID：11998556
> 
> 赞同：1
> 
> 时间：2012-08-17T01:09:42.103
> 
> 标签：asp.net-web-api, batch-processing

我正在寻找一种将请求批处理到服务器的方法。我发现布拉德威尔逊的一篇文章概述了如何使用消息处理程序制作批处理处理程序[http://bradwilson.typepad.com/blog/2012/06/batching-handler-for-web-api.html#more](http://bradwilson.typepad.com/blog/2012/06/batching-handler-for-web-api.html#more)但我不是'不能让这个工作。

首先我有编译错误，因为 webapi 不理解“特定于路由的端点处理程序”，如 Brad 使用的示例。媒体类型和/或格式化程序也存在问题（不记得是哪个）。我的下一个尝试是制作一个批处理控制器。所以我有一个批处理控制器而不是批处理处理程序。除了使用 MessageHandlerInvoker 调用单个命令时，我几乎可以正常工作，但我收到了关于我已注册的其他处理程序的异常（1 个用于记录请求/响应，另一个用于模拟用户身份验证）。

那时我停下来并恢复到个人请求，不理想，但它有效。

我的环境：

*   .net 4.0
*   对比 2010
*   mvc 4 前端（调用 webapi）
*   webapi 作为服务层

有没有其他人在批处理消息和 webapi 方面取得过任何成功？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T01:16:56.207

为了能够使用每个路由处理程序，您需要昨天才发布的 ASP.NET Web API RTM（在 Brad 撰写本文时，它仅适用于夜间 MyGet 提要构建或针对 Codeplex 源）。

您可以在此处获取整个[MVC4 RTM，](http://www.asp.net/mvc/mvc4)也可以直接从 Nuget 获取。

# c# - 是否有一个通用集合，我可以通过索引器通过字符串键和索引访问元素？

> ID：11998560
> 
> 赞同：2
> 
> 时间：2012-08-17T01:10:35.157
> 
> 标签：c#

我想声明一个通用的对象集合，并能够通过索引器通过键字符串值或索引来访问它们。我该怎么做呢？是否有一个开箱即用的 .Net 类不需要子类化？

```
class Program
{

    static void Main(string[] args)
    {

        System.Collections.Generic.WhatKindOfCollection<PageTab> myPageTabs 
            = new System.Collections.Generic.WhatKindOfCollection<PageTab>();

        PageTab pageTab1 = new PageTab();
        pageTab1.ID = "tab1";
        myPageTabs.Add(pageTab1);

        myPageTabs.Add(new PageTab("tab2"));

        myPageTabs[0].label = "First Tab";
        myPageTabs["tab2"].label = "Second Tab";

    }

    public class PageTab
    {
        public PageTab(string id)
        {
            this.ID = id;
        }

        public PageTab() { }

        //Can I define ID to get the key property by default?
        public string ID { get; set; }

        public string label { get; set; }
        public bool visible { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T01:24:10.870

看起来您正在寻找从[System.Collections.ObjectModel.KeyedCollections](http://msdn.microsoft.com/en-us/library/ms132438.aspx)派生的东西。

我认为您要查找的特定类不存在于 .NET 框架中，因此您可能必须自己对其进行子类化。

KeyedCollection 是对象的基类，其中键是对象的一部分。这意味着当您使用整数索引访问它时，您将取回原始对象而不是 KeyValueCollection。

我已经有一段时间没有使用它了，但我不记得它太难了。

编辑：您的另一个代码选项。这比我记得的要容易：

```
public class MyKeyedCollection<TKey, TItem> : KeyedCollection<TKey, TItem>
{
    public MyKeyedCollection(Func<TItem, TKey> keyFunction)
    {
        _keyFunction = keyFunction;
    }

    private Func<TItem, TKey> _keyFunction;

    protected override TKey GetKeyForItem(TItem item)
    {
        return _keyFunction(item);
    }
} 
```

要使用：

```
var myPageTabs = new MyKeyedCollection<String, PageTab>(i => i.ID); 
```

或预LINQ：

```
public class MyKeyedCollection<TKey, TItem> : KeyedCollection<TKey, TItem>
{
    public MyKeyedCollection(String keyProperty)
    {
        _keyProperty = keyProperty;
    }

    private String _keyProperty;

    protected override TKey GetKeyForItem(TItem item)
    {
        return (TKey)item.GetType().GetProperty(_keyProperty).GetValue(item, null);
    }
} 
```

和

```
MyKeyedCollection<String, PageTab> myPageTabs = new MyKeyedCollection<String, PageTab>("ID"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T01:21:03.427

这实际上是[`OrderedDictionary`](http://msdn.microsoft.com/en-us/library/system.collections.specialized.ordereddictionary.aspx)类。但是，不幸的是，它不是泛型类，因此您必须包含强制转换，或者将其包装在您自己的集合类型中。

基类库中没有[通用等效](https://stackoverflow.com/questions/2629027/no-generic-implementation-of-ordereddictionary)[`KeyedCollection<T,U>`](http://msdn.microsoft.com/en-us/library/ms132438.aspx)项，但提供了基类基础结构来实现您自己的版本。

最简单的选择就是维护两个集合 - a`Dictionary<string, PageTab>`和 a `List<PageTab>`。创建项目时，您可以将其添加到两个集合中，并通过相应的集合进行访问。因为`PageTab`是一个类，所以额外的开销是最小的（因为你只是存储对象引用）。这也可以很容易地包装到一个类中：

```
public class IndexedDictionary<T, U>
{
    private Dictionary<T,U> dictionary = new Dictionary<T,U>();
    private List<U> list = new List<U>();

    public void Add(T key, U value)
    {
        list.Add(value);
        dictionary.Add(key, value);
    }

    public U this[int index]
    {
       get { return list[index]; }
    }
    public U this[T key]
    {
       get { return dictionary[key]; }
    }
} 
```

当然，您可能还希望实现一些适当的接口（例如`IEnumerable<U>`），但以上内容将实现您在问题中列出的目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T01:19:30.280

你为什么不用字典？

```
Dictionary<string, PageTab> myDictionary = new Dictionary<string, PageTab>();
myDictionary.Add("tab1", new PageTab("tab1"));
PageTab myPageTab = myDictionary["tab1"]; 
```

**编辑** 为了避免键入两次键（一次作为字典键，一次在构造函数中），您可以扩展字典。在命名空间的顶层创建以下类：

```
public static class Extensions
{
    public static void AddPageTab(this Dictionary<string, PageTab> mydict, PageTab pt)
    {
        mydict.Add(pt.ID, pt);
    }
} 
```

你调用简单的添加 PageTab 是这样的：

```
myDictionary.AddPageTab(new PageTab("tab1")); 
```

# opencv - 立体校准后，将摄像机 1 图像中的 2d 点投影到摄像机 2 图像

> ID：11998564
> 
> 赞同：5
> 
> 时间：2012-08-17T01:11:09.290
> 
> 标签：opencv, 2d, computer-vision, camera-calibration, stereo-3d

我正在使用 opencv 对两个相机（我们将它们命名为 L 和 R）进行立体校准。我使用 20 对棋盘图像并计算 R 相对于 L 的变换。我想要做的是使用一对新图像，计算图像 L 中的 2d 棋盘角，根据我的校准变换这些点并绘制图像 R 上的相应变换点，希望它们与该图像中棋盘的角相匹配。

我尝试了将 2d 点从 [x,y] 转换为 [x,y,1] 的朴素方式，乘以 3x3 旋转矩阵，加上旋转向量然后除以 z，但结果是错误的，所以我猜猜这不是那么简单（？）

**编辑**（澄清一些事情）：

我想这样做的原因基本上是因为我想在一对新图像上验证立体校准。所以，我实际上并不想在两个图像之间获得新的 2d 转换，我想检查我找到的 3d 转换是否正确。

这是我的设置：

[![设置](../Images/2964d053cd89622a96c2cd2ce3f16a1b.png)](https://i.stack.imgur.com/duybi.jpg)

我有与两个摄像机（E）相关的旋转和平移，但我没有相对于每个摄像机（E_R，E_L）的对象的旋转和平移。

*理想情况下我想做的是：*

1.  从相机 L 中选择图像中的二维角（以像素为单位，例如 [100,200] 等）。
2.  根据我找到的矩阵 E**对二维点**进行某种转换。
3.  从相机 R 获取图像中相应的 2d 点，绘制它们，希望它们与实际角点匹配！

不过，我想得越多，我就越相信这是错误的/无法做到。

*我现在可能正在尝试的事情：*

1.  使用相机的内在参数（比如说 I_R 和 I_L），求解 2 个最小二乘系统以找到 E_R 和 E_L
2.  从相机 L 中选择图像中的 2d 角。
3.  将这些角投影到相应的 3d 点 (3d_points_L)。
4.  做：3d_points_R = (E_L).inverse * E * E_R * 3d_points_L
5.  从 3d_points_R 获取 2d_points_R 并绘制它们。

当我有新东西时我会更新

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T10:47:29.867

这实际上很容易做到，但是你犯了几个错误。请记住，在立体校准后，R 和 L 将第二台摄像机的位置和方向与第一台摄像机的 3D 坐标系中的第一台摄像机相关联。并且还记得通过您需要三角定位位置的一对相机找到一个点的 3D 位置。通过将 z 分量设置为 1，您会犯两个错误。首先，您很可能使用了常见的 OpenCV 立体校准代码，并给出了棋盘角之间的距离（以厘米为单位）。因此，z=1 表示距离相机中心 1 厘米，即离相机超近。其次，通过为您所说的棋盘垂直于主轴（又称光轴或主射线）的所有点设置相同的 z，虽然在您的形象中很可能并非如此。因此，您首先将一些虚拟 3D 点转换为第二台摄像机的坐标系，然后将它们投影到图像平面上。

如果您只想转换平面点，那么您可以找到两个相机之间的单应性（OpenCV 具有该功能）并使用它。

# regex - 匹配除关键字之外的标识符

> ID：11998565
> 
> 赞同：1
> 
> 时间：2012-08-17T01:11:28.007
> 
> 标签：regex, perl

我需要在文本文件中查找标识符：

但如果标识符是关键字，我不想要匹配。例如，如果我将“for”作为关键字，则如下所示：

```
for (i=0 ; i< max ; i++) 
```

我应该得到：

```
Found: i
Found: i
Found: max
Found: i 
```

我研究了前瞻断言，但我无法使其工作：

```
$IDENTIFIER="(?!(for|while|do))[a-zA-Z_]+[a-zA-Z0-9_]*"
    while ($entireFile =~ /($IDENTIFIER)/g)
    {
          print "Found ($1)" . "\n"; 
    } 
```

我得到：

```
Found: or
Found: i
Found: i
Found: max
Found: i 
```

这不是我想要的安静！我明白为什么我得到“或”，但我怎样才能让它更聪明并完全排除“为”呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T02:08:04.960

即使在 Perl 中，清晰度也很重要。我建议将单词查找正则表达式从关键字过滤器中分离出来，以使测试更易于阅读、更新等。此外，如果您想过滤掉很多关键字，制作一个单独的列表比将它们塞进一个正则更容易表达。这是一个例子：

```
use strict;
use warnings;

my $entireFile = "for (i=0 ; i< max ; i++)";
my @KEYWORDS = ('for', 'while', 'do');

while ($entireFile =~ /([a-zA-Z_][a-zA-Z0-9_]*)/g)
{
    my $is_keyword = 0;
    for my $keyword (@KEYWORDS) 
    {
        if ($1 eq $keyword) 
        {
            $is_keyword = 1;
        }
    }
    if (not $is_keyword) 
    {
        print "Found ($1)" . "\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T02:31:24.760

您需要锚定以确保匹配*整个*单词（潜在标识符）。第一个近似值，`/\b(?!(?:for|while|do)\b)[A-Za-z_][A-Za-z0-9_]*\b/`实际上是你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T01:45:38.773

您不能只寻找看起来像标识符的东西，因为您可能正在查看评论。您只会寻找可能出现标识符的标识符。标识符不能紧跟在“f”之后。换句话说，真正的问题是你不是锚定问题。

您没有显示您的问题，因此我们无法帮助您解决问题。我们只能盲目地回答你的问题：

```
$ID_START = "[a-zA-Z_]";
$ID_CONT  = "[a-zA-Z0-9_]";
$IDENT    = "(?<!$ID_START)(?<!$ID_CONT)(?!(?:for|while|do)(?!$ID_CONT))$ID_START$ID_CONT+"; 
```

（这也解决了“完成”与“做”不同的问题。）

# android - 有人知道游戏完成后如何进行这种类型的名称保存吗？

> ID：11998569
> 
> 赞同：0
> 
> 时间：2012-08-17T01:11:58.427
> 
> 标签：android

谁能给我一个示例，说明如何在游戏完成时进行这种类型的名称保存。提前致谢。我会很感激你的回应。

![游戏完成时保存名称](../Images/8d655348a03718ffbdcbc5b7528cd687.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T01:17:53.657

这是一个简单的对话框，带有一些文本和一个输入字段 ( [EditText](http://developer.android.com/reference/android/widget/EditText.html) )。您可以创建类似这样的扩展[Dialog](http://developer.android.com/reference/android/app/Dialog.html)类（使用 Android SDK）。要保存/存储您的数据，您可以使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)或[SQLite](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)。

# jquery - 我应该使用 HTTP 响应代码来触发 jQuery 的 ajax 错误回调吗？

> ID：11998571
> 
> 赞同：0
> 
> 时间：2012-08-17T01:12:07.200
> 
> 标签：jquery, ajax, http

我已经使用 cmlenz 的 jquery-iframe-transport 构建了一个文件上传器。在 $.ajax 调用中，我想通过错误回调处理错误。这可以通过让服务器发送带有我的错误消息的 HTTP 错误代码（4xx 或 5xx）来完成。

```
$.ajax({
    url: '/upload',
    error: function(jqXHR, textStatus, errorThrown){
        // Handle error here
    }
}); 
```

另一种方法是解析成功回调，检测错误并处理它。

```
 $.ajax({
    url: '/upload',
    success: function(data, textStatus, jqXHR){
        if(data && data.hasOwnProperty('error') {
            // Handle error here
        }
    }
}); 
```

基本上我的问题是我应该在服务器端操纵 HTTP 响应代码，以便我可以轻松地在客户端处理错误吗？当涉及到 HTTP 错误代码和 ajax 时，所有浏览器的行为是否都相同？或者这只是违反了滥用 HTTP？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:03:48.173

HTTP 错误是*正确*的做法，但[它们不适用于`<iframe>`传输](http://cmlenz.github.com/jquery-iframe-transport/#section-13)。

# qt4 - QtGui QTreeWidgetItem setData 持有一个浮点数

> ID：11998572
> 
> 赞同：2
> 
> 时间：2012-08-17T01:12:32.150
> 
> 标签：qt4, pyqt4, qtreewidget

我想知道是否可以在 QTreeWidgetItem 中保留浮点值？

当我尝试使用 setData(0,0,number) 记录数字时，它会将其四舍五入到 6 位精度，这对我来说还不够。我想保留确切的浮点值以进行进一步计算。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T20:38:18.763

您可以做以下两件事之一，QVariant 几乎可以存储任何类型：

```
v = QtCore.QVariant(aFloat)
aFloat = v.toDouble()[0] 
```

您会将 QVariant 存储为数据。

或者您可以在项目上设置任意属性：

```
item = QtGui.QTreeWidgetItem()
item.foo = 123.123 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T20:24:40.000

我认为将 QVariant 与 str 一起使用可以做到这一点

```
a = 0.12345678963582

item.setData(QtCore.Qt.UserRole,QtCore.QVariant(str(a)))

.....

val = float(item.data(QtCore.Qt.UserRole).toString()).strip()) 
```

# c# - 读取 .csv 文件时如何获取编码？

> ID：11998576
> 
> 赞同：1
> 
> 时间：2012-08-17T01:13:13.687
> 
> 标签：c#, silverlight, encoding, csv, openfiledialog

作为标题，以下代码...

```
System.IO.FileInfo _fInfo;
OpenFileDialog openDlg = new OpenFileDialog();
openDlg.Filter = "Csv Files (.csv)|*.csv";
openDlg.FilterIndex = 1;
openDlg.Multiselect = false;
bool? userClickedOK = openDlg.ShowDialog();

if (userClickedOK == true)
{
    _fInfo = openDlg.File;
}
Stream fileStream = _fInfo.OpenRead();
using (System.IO.StreamReader reader = new StreamReader(fileStream))
{
    int lineNo = 1;
    while (!reader.EndOfStream)
    {
       reader.ReadLine();
    }
} 
```

有什么方法可以找到“_fInfo”当前编码？PS：我用的是silverlight控制台（silverlight 2.0）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T04:16:41.317

首次阅读后尝试 StreamReader.CurrentEncoding。阅读器将尝试检测编码。

# ruby-on-rails - 食谱和子食谱关联的 Rails 模型

> ID：11998579
> 
> 赞同：-2
> 
> 时间：2012-08-17T01:13:44.343
> 
> 标签：ruby-on-rails, model, associations

我将如何制作具有以下关联的项目表：

我的最终目标是能够创建具有许多组件和子食谱的食谱（我想将它们组合成一个下拉菜单）

```
Component

  belongs_to sub_recipe

End

Sub_recipe

  has_many components

  belongs_to recipe

End

Recipe 

  has_many subrecipes

  has_many components

End 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T05:48:30.747

您需要为每个项目提供一个表格，并为关联提供一个表格

```
#class RawComponent < ActiveRecord::Base
#  has_and_belongs_to_many :recipes
#end

class Recipe < ActiveRecord::Base
  has_many :recipe_components
  has_many :subrecipes, :through => :recipe_components
  has_many :recipes, :through => :recipe_components
#  has_and_belongs_to_many :raw_components
end

class RecipeComponents < ActiveRecord::Base
  belongs_to :recipe
  belongs_to :subrecipe, :class_name => :Recipe
end 
```

假设你有一个@recipe，那么你可以去：

```
@recipe.subrecipes # find all subrecipes required to make this recipe
@recipe.recipes # find all recipes using this as a subrecipe 
```

还添加了可能的 RawComponent 类，您可以将其用于不由其他组件组成的东西。但是你不需要它，如果你让每个 RawComponent 成为一个没有任何子配方的配方，这也是一种建模情况的有效方法。

关键点是关联模型（RecipeComponents）属于层次结构中较高的:recipe，以及层次结构中较低的:subrecipe，但与recipe具有相同的类类型。

# facebook - Facebook 自助服务终端注销

> ID：11998580
> 
> 赞同：2
> 
> 时间：2012-08-17T01:13:45.407
> 
> 标签：facebook, facebook-graph-api, logout, kiosk

我们有一个 facebook 网站应用程序用作公共活动信息亭。许多人将通过我们的网站在同一设备上登录 facebook（设置在展位上，如 ipad 或类似设备）。

完成后，我们需要将该人从 Facebook 本身注销；不仅仅是破坏我们网站的图形 API 会话。

这是问题所在：

1.  用户走到我们的 ipad，它有一个浏览器加载到我们的网站。他或她点击“facebook登录”，并被重定向到facebook登录。
2.  他们登录，授予我们的应用权限，然后 facebook 将他们重定向回我们的网站。
3.  在他们使用我们的网站（发表评论等）后，他们会在我们的网站上单击注销。
4.  下一个用户坐下，点击“facebook 登录”，然后被重定向到 facebook。到达 facebook.com 后，**浏览器仍然为前一个用户登录**，授予该用户访问第一个用户的 facebook 的权限（只是一个小问题 =）

我希望我可以将用户发送到 facebook，到一个只有注销按钮的页面，并让 facebook 将浏览器重定向回我的网站，为下一个用户做好准备。这就是登录的工作方式，我需要一个等效的注销。

**编辑：**

非常感谢您的回答。我们花了大约 3 天的时间来解决这个问题；如果我们发布任何人都可以插入的通用代码，我希望您能原谅我们。将其放在 HTML 页面上，然后访问该页面，将用户从 Facebook**和**您的网站中注销。

```
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'your APP ID', // App ID
      channelUrl : '//WWW.YOURSITE.COM/channel.php or channel.html or whatever yours is', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });
    // Additional initialization code here
    FB.getLoginStatus(function(response) {
    if (response.status === 'connected') {
      var uid = response.authResponse.userID;
      var accessToken = response.authResponse.accessToken;
      FB.logout();
      alert('Thanks!  You have been logged out of facebook.');
    }
   });            
  };
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T01:48:35.587

如果您使用 Facebook Javascript SDK，您可以在他们单击您的注销链接时调用[FB.logout ，如文档所述：](https://developers.facebook.com/docs/reference/javascript/FB.logout/)

> FB.logout 会将用户从您的网站和 Facebook 中注销。

# java - Java rest api中的资源实例

> ID：11998583
> 
> 赞同：2
> 
> 时间：2012-08-17T01:13:59.123
> 
> 标签：java, web-services, rest, restful-url

我有一个 java rest api。我想知道的是：

假设一个特定的客户端（例如，名为 X 的人正在使用计算机 Y）对同一个 uri 进行三个调用。（例如[https://stackoverflow.com/firstname/kasav/lastname/bere](https://stackoverflow.com/firstname/kasav/lastname/bere)）。此外，假设资源有一个非静态计数器。

```
class ResourceA{
     int count = 0;

     @Get
     public Response service(){
        count++;
        //return count below
     }
} 
```

现在调用者是否对所有三个调用都得到相同的响应：

```
1 
```

还是来电者`1`接听第一个电话，然后`2`接第二个电话，然后`3`接第三个电话。

对于你们中的一些人来说，这可能是显而易见的，但对我来说不是。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T01:24:44.610

假设您正在使用正确遵循 JAX-RS 规范的东西。

> **3.1.1 生命周期与环境**
> 
> 默认情况下，会为对该资源的每个请求创建一个新的资源类实例。首先调用构造函数（参见第 3.1.2 节），然后注入任何请求的依赖项（参见第 3.2 节），然后调用适当的方法（参见第 3.3 节），最后使对象可用于垃圾回收。一个实现可以提供其他资源类生命周期，指定这些生命周期的机制超出了本规范的范围。例如，基于控制反转框架的实现可以支持该框架提供的所有生命周期选项。

因此，您的问题的答案是所有呼叫者都会收到`1`，因为每个请求都会启动课程。

有关 JAX-RS 规范，请参阅[JSR-311](http://jcp.org/en/jsr/detail?id=311)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-11T19:46:35.727

默认情况下，JAX RS 资源是请求范围的，这意味着它为每个请求创建新实例。

要使用同一资源实例处理多个请求，您可以使用注释 @Singleton 标记资源（在本例中为 ResourceA 类）。标记为 Singleton 将使 ResourceA 类的输出为第一个请求为 1，第二个请求为 2，依此类推。

# mysql - 如果表 2 中不存在，如何插入表 1？

> ID：11998585
> 
> 赞同：3
> 
> 时间：2012-08-17T01:14:33.093
> 
> 标签：mysql, sql

我是mysql的新手。如果 table2 中不存在记录，我在向 table1 插入记录时遇到问题。我有 2 个表 table1 和 table2 的形式：

```
table1

dep_id  start     stop     modified deleted                 
1       23456789  167921525   Yes      No
2       34567812  345678145   Yes      No
3       32789054  327890546   No       No

table2

start     stop     modified deleted                 
23456789  167921525  No       No
34567823  345678145  No       No
32789053  727890546  No       No 
```

仅当 table2 的“开始”和“停止”列中不存在值时，我才尝试将值插入到 table1 的开始和停止字段值中。如果存在，我需要抛出一个错误。这些表没有主键外键关系。我很抱歉不知道正确的语法，但我必须在 mysql 和 PHP 中做这样的事情。

```
Replace Into into table1 set 'start'=> $start,'stop' => $stop
(select 'start','stop' from table2 where table1.start and table1.stop not in table2.start and table2.stop); 
```

在插入 table1 之前，如何查询这两个表以检查 Table1.start 和 Table1.stop 字段是否与 Table2.start 和 Table2.stop 不匹配？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T01:22:34.220

你可以做：

```
INSERT INTO table1 (start, stop)
SELECT    a.*
FROM      (SELECT 123456789 start, 234567890 stop) a
LEFT JOIN table2 b ON (a.start,a.stop) IN ((b.start,b.stop))
WHERE     b.start IS NULL 
```

在哪里`123456789`和`234567890`是您的输入值`start`和`stop`分别。

然后，您可以根据您使用的 DB 接口（PDO、mysqli 等）使用 rowCount 或 num_rows_affected 检查它。如果为 0，则没有插入记录，否则，插入发生。

* * *

[*SQLFiddle 演示*](http://www.sqlfiddle.com/#!2/5df5d/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T01:22:18.983

我想这就是你想要的。这需要两个值，$start 和 $stop，并且只有在 table2 中不存在时才进行插入：

```
insert into table1 (start, stop)
    select *
    from (select $start as start, $stop as stop) t
    where not exists (select 1 from table2 where start = $start and stop = $end) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-09T07:07:49.783

使用参数化值：

```
INSERT INTO table1 (start, stop)
SELECT    a.*
FROM      (SELECT ? start, ? stop) a
LEFT JOIN table2 b ON (a.start,a.stop) IN ((b.start,b.stop))
WHERE     b.start IS NULL 
```

这可行，但我们`insert`通过 SQL 语句执行。

现在，通过接口插入记录的解决方案是什么？那就是没有SQL语句，有问题中提出的限制。

# javascript - slideToggle 显示然后隐藏

> ID：11998587
> 
> 赞同：1
> 
> 时间：2012-08-17T01:14:47.360
> 
> 标签：javascript, jquery, wordpress, slidetoggle

目前正在尝试向我的网站添加 slideToggle 功能

[http://louislantos.com/](http://louislantos.com/) 我想单击图块中标题旁边的 (+) 文本以显示描述，它确实如此，但它几乎立即将内容滑回显示：无；再次领地。

有谁知道发生了什么？在过去的 2 个小时里，我一直在谷歌上搜索这个，我觉得自己无处可去。对于比我更熟练的人来说，这可能是一个非常基本的问题，所以任何帮助表示赞赏。也许是脚本冲突或什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T01:48:51.007

也许尝试将其更改为使用上滑和下滑作为参数进行切换？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T03:40:33.570

确实有其他东西触发了该点击事件两次（一次额外的时间）。我找不到它，所以我向您介绍这个 hack：

```
$("#reveal-416").unbind("click").click(function () { 
   $(".revealer-416").slideToggle(1000);
}); 
```

到目前为止并不理想，但它会解决你的问题

# python - 在 Python 中创建真正的空类型

> ID：11998589
> 
> 赞同：4
> 
> 时间：2012-08-17T01:14:57.380
> 
> 标签：python, types, dictionary

定期，我想在 Python 中创建完全空的对象。基本上，我想要一个键是属性的字典。在 Python 2.x 中，我可以像这样创建旧式类型：

```
class Empty: pass 
```

这将创建一个只有两个属性（`__doc__`和`__module__`）的类型。在 Python 3.x 中，一切都是新样式的类，所以我得到了 18 个属性。

在我目前的情况下，我有一个类允许您在单元测试中指定需要猴子修补的类型。应用补丁时，我正在创建一个具有属性的类型，该属性带有每个模拟类型的名称。这几乎就是我当前的实现正在做的事情：

```
class EmptyType: pass
...
mocks = EmptyType()
for mock_name, mock in patches:
    setattr(mocks, mock_name, mock) 
```

我担心的是，如果有人在嘲笑私有成员，他们可能会遇到与`EmptyType`对象中名称的命名冲突。这就是为什么我想尽可能少地保留属性`EmptyType`。说`mocks.find_users`起来比说起来容易得多`mocks["find_users"]`，尤其是当我知道名称必须是有效标识符时。

现在，我已经提供了给 mocks 不同的名字的能力，而不是默认的名字。不过，首先避免令人困惑的错误会很好。*在 JavaScript 中创建几乎*为空的类型非常容易，我希望 Python 中也有类似的东西，因为我一直在寻找它们的好用处。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T01:38:05.387

创建自己的自定义容器怎么样？

```
class Empty(object):

    def __init__(self, **kwargs):
        object.__setattr__(self, '_obj', kwargs)

    def __getattribute__(self, name):
        obj = object.__getattribute__(self, '_obj')
        try:
            return obj[name]
        except KeyError:
            cls_name = object.__getattribute__(self, '__class__').__name__
            raise AttributeError(
                "'%(cls_name)s' object has no attribute '%(name)s'" % locals())

    def __setattr__(self, name, val):
        obj = object.__getattribute__(self, '_obj')
        obj[name] = val

    def __getitem__(self, key):
        return getattr(self, key)

    def __setitem__(self, key, val):
        return setattr(self, key, val) 
```

用法：

```
e = Empty(initial='optional-value')
e.initial
# 'optional-value'
e.val = 'foo'
e.val
# 'foo'
e.bad
# AttributeError: 'Empty' object has no attribute 'bad'
setattr(e, 'user', 'jdi')
e.user
# 'jdi'
e['user']
# 'jdi'

# note that you dont even see anything when you dir()
dir(e)
# []

# and trying to access _obj is protected
e._obj
#AttributeError: 'Empty' object has no attribute '_obj'

# But you could even set your own _obj attribute
e._obj = 1
e._obj
# 1 
```

它将所有内容存储在`_obj`字典下，因此您基本上可以获得一个与实际实例属性不冲突的干净空间。

# java - 文档进纸限制

> ID：11998590
> 
> 赞同：0
> 
> 时间：2012-08-17T01:15:12.160
> 
> 标签：java, google-docs, google-docs-api, google-drive-api

DocumentListFeed 中返回的条目数是否有限制？我得到了 100 条结果，但我帐户中的某些集合丢失了。

如何确保我获得帐户中的所有收藏？

```
DocsService service = new DocsService(APP_NAME);
service.setHeader("Authorization", "Bearer " + accessToken);
String feedUrl = new URL("https://docs.google.com/feeds/default/private/full/-/folder?v=3&showfolders=true&showroot=true");
DocumentLisFeed feed = service.getFeed(feedUrl, DocumentListFeed.class);    
List<DocumentListEntry> entries = feed.getEntries(); 
```

条目的大小为 100。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T03:30:06.480

默认情况下，对文档列表提要的单个请求会返回 100 个元素，但您可以通过设置`?max-results`查询参数来配置该值。

无论如何，为了检索所有文档和文件，您应该始终考虑发送多个请求，每页一个，如文档中所述：

[https://developers.google.com/google-apps/documents-list/#getting_all_pages_of_documents_and_files](https://developers.google.com/google-apps/documents-list/#getting_all_pages_of_documents_and_files)

另请注意，现在建议切换到更新的 Google Drive API，它与相同的资源进行交互，并具有多种语言的完整文档和示例代码，包括 Java：

[https://developers.google.com/drive/](https://developers.google.com/drive/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T22:21:15.437

你可以调用 feed.getNextLink().getHref() 来获取一个 URL，你可以用它来形成另一个 feed。这可以在链接为空之前完成，此时已获取所有条目。

# python - 在 Python 中计算结构的 CRC

> ID：11998591
> 
> 赞同：5
> 
> 时间：2012-08-17T01:15:19.867
> 
> 标签：python, struct, crc, pack, nrpe

我有以下结构，来自 C 中的 NRPE 守护程序代码：

```
typedef struct packet_struct {
  int16_t packet_version;
  int16_t packet_type;
  uint32_t crc32_value;
  int16_t result_code;
  char buffer[1024];
} packet; 
```

我想将此数据格式从 Python 发送到 C 守护程序。`crc32_value`在is时计算 CRC `0`，然后将其放入结构中。我的 Python 代码如下：

```
cmd = '_NRPE_CHECK'
pkt = struct.pack('hhIh1024s', 2, 1, 0, 0, cmd)
# pkt has length of 1034, as it should
checksum = zlib.crc32(pkt) & 0xFFFFFFFF
pkt = struct.pack('hhIh1024s', 2, 1, checksum, 0, cmd)
socket.send(....) 
```

守护进程正在接收这些值：`version=2 type=1 crc=FE4BBC49 result=0`

但它在计算`crc=3731C3FD`

计算 CRC 的实际 C 代码是：

[https://github.com/KristianLyng/nrpe/blob/master/src/utils.c](https://github.com/KristianLyng/nrpe/blob/master/src/utils.c)

它通过以下方式调用：

`calculate_crc32((char *)packet, sizeof(packet));`

当我将这两个函数移植到 Python 时，我得到的结果与`zlib.crc32`返回的相同。

我的`struct.pack`电话正确吗？为什么我的 CRC 计算与服务器的不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T04:03:12.107

从[Python 结构文档](http://docs.python.org/library/struct.html)：

> 要处理与平台无关的数据格式或省略隐式填充字节，请使用标准大小和对齐方式而不是本机大小和对齐方式：有关详细信息，请参阅[字节顺序、大小和对齐](http://docs.python.org/library/struct.html#struct-alignment)方式。

采用 '！' 作为使打包结构与平台无关的第一个格式字符。它强制大端、标准类型大小，并且没有填充字节。那么CRC应该是一致的。

# css - 同一个元素可以有多个 :before 伪元素吗？

> ID：11998593
> 
> 赞同：143
> 
> 时间：2012-08-17T01:15:37.837
> 
> 标签：css, css-selectors, pseudo-element, css-content

`:before`同一个元素是否可以有多个伪？

```
.circle:before {
    content: "\25CF";
    font-size: 19px;
}
.now:before{
    content: "Now";
    font-size: 19px;
    color: black;
} 
```

我正在尝试使用 jQuery 将上述样式应用于同一元素，但仅应用最新的样式，而不是两者。

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-08-17T02:57:43.643

在 CSS2.1 中，一个元素在任何时候最多只能有任何一种伪元素。（这意味着一个元素可以同时有一个`:before`和一个`:after`伪元素——它不能有超过一个。）

因此，当您有多个`:before`规则匹配同一个元素时，它们将全部级联并应用于单个`:before`伪元素，就像普通元素一样。在您的示例中，最终结果如下所示：

```
.circle.now:before {
    content: "Now";
    font-size: 19px;
    color: black;
} 
```

如您所见，只有`content`具有最高优先级的声明（如前所述，最后出现的声明）才会生效——其余的声明将被丢弃，与任何其他 CSS 属性一样。

[CSS2.1 的 Selectors 部分](http://www.w3.org/TR/CSS21/selector.html#pseudo-element-selectors)描述了这种行为：

> 除了下面和其他地方描述的例外，伪元素的行为就像 CSS 中的真实元素[一样。](http://www.w3.org/TR/CSS21/generate.html#before-after-content)

这意味着带有伪元素的选择器就像普通元素的选择器一样工作。这也意味着级联应该以相同的方式工作。奇怪的是，CSS2.1 似乎是唯一的参考。[css3-selectors](http://www.w3.org/TR/css3-selectors)和[css3-cascade](http://www.w3.org/TR/css3-cascade)都没有提到这一点，是否会在未来的规范中澄清还有待观察。

如果一个元素可以匹配多个具有相同伪元素的选择器，并且您希望所有这些都以某种方式应用，则需要使用组合选择器创建额外的 CSS 规则，以便您可以准确指定浏览器在这些选择器中应该做什么案例。我无法在`content`此处提供包含属性的完整示例，因为不清楚例如符号或文本是否应该放在首位。但是这个组合规则所需的选择器是`.circle.now:before`或者`.now.circle:before`- 无论您选择哪个选择器都是个人偏好，因为两个选择器是等效的`content`，您需要自己定义的只是属性的值。

如果您仍需要具体示例，请参阅我对[这个类似问题](https://stackoverflow.com/questions/14111751/what-happens-if-multiple-classes-of-the-same-element-define-a-before-pseudo-ele)的回答。

[遗留的 css3-content 规范包含一个关于使用与 CSS2.1 级联兼容的表示法插入多个`::before`和`::after`伪元素](https://www.w3.org/TR/2003/WD-css3-content-20030514/#inserting0)的部分，但请注意，该特定文档已过时 - 自 2003 年以来没有更新，也没有人更新过在过去十年中实现了该功能。好消息是，被遗弃的文档正在以[css-content-3](https://drafts.csswg.org/css-content-3)和[css-pseudo-4](https://drafts.csswg.org/css-pseudo-4/#generated-content)的名义进行重写。坏消息是，在这两个规范中都找不到多个伪元素功能，这大概是由于缺乏实现者的兴趣。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2014-07-16T22:23:28.937

如果你的主元素有一些子元素或文本，你可以利用它。

定位您的主要元素相对（或绝对/固定）并使用 :before 和 :after 定位绝对（在我的情况下它必须是绝对的，不知道你的）。

现在，如果您想要一个更多的伪元素，请将绝对 :before 附加到主要元素的其中一个子元素（如果您只有文本，请将其放在一个跨度中，现在您有一个元素），这不是相对/绝对/固定.

这个元素将开始表现得好像他的主人是你的主要元素。

HTML

```
<div class="circle">
    <span>Some text</span>
</div> 
```

CSS

```
.circle {
    position: relative; /* or absolute/fixed */
}

.circle:before {
    position: absolute;
    content: "";
    /* more styles: width, height, etc */
}

.circle:after {
    position: absolute;
    content: "";
    /* more styles: width, height, etc */
}

.circle span {
    /* not relative/absolute/fixed */
}

.circle span:before {
    position: absolute;
    content: "";
    /* more styles: width, height, etc */
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-02-05T12:27:32.363

我已经使用以下方法解决了这个问题：

```
.element:before {
    font-family: "Font Awesome 5 Free" , "CircularStd";
    content: "\f017" " Date";
} 
```

使用字体系列“font awesome 5 free”作为图标，之后，我们必须再次指定我们正在使用的字体，因为如果我们不这样做，导航器将使用默认字体（times new roman 或类似这）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-21T04:13:30.757

您还可以在内容字段中使用图像/图标加文本

例如

```
p.album-title::after {
  content: url('https://...camera-icon-blue.png') ' View >';
  display: block;
  ...;
} 
```

# javascript - 一些 Greasemonkey 脚本顶部的这一行是什么？

> ID：11998594
> 
> 赞同：9
> 
> 时间：2012-08-17T01:15:44.763
> 
> 标签：javascript, garbage-collection, anonymous-function, iife

**背景：** 我对 C++ 有自学成才的爱好者级别的理解，这已经转化为对 javascript 的类似理解。为了更好地理解 javascript，我决定编写一个 Greasemonkey 脚本来解决 Google 如何处理[来自同一域的多个结果](https://webapps.stackexchange.com/questions/30015/prevent-many-results-from-same-domain-in-google-search)的问题。

我写了我的剧本，而且非常简单。现在我觉得这个脚本可能对其他人有用，所以我想发布它。不过，在我这样做之前，我想确定我没有发布不负责任的代码。

我知道糟糕的垃圾收集经常被认为是扩展的问题，并且对我需要在 javascript 中做些什么来防止这种情况进行了一些研究。似乎答案是任何包含在函数中的内存都将在该函数退出时被回收。这似乎解释了为什么我查看的一些流行脚本被包装在一个原本无用的函数中。

**这让我想到了这些问题：**

1.  我应该如何处理我的基本 javascript 函数以确保它不会泄漏内存？
2.  这是我在许多脚本中看到的答案：

    ```
    (function(){  
        //code goes here    
    })(); 
    ```

3.  在上面的代码中，第一个括号的用途是什么？这对我来说似乎是多余的。

4.  当我试图理解该行时，我将其重写为：

    ```
    (function main(){  
        //code goes here  
    })   
    main(); 
    ```

这个想法是这只是调用以前未命名的函数。然而这并没有奏效，为什么呢？

我对一般答案更感兴趣，但如果需要，这里是我当前的代码： http: [//pastebin.com/qQWKfnJT](http://pastebin.com/qQWKfnJT)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T01:30:29.757

这种模式（将一个函数包裹在一对括号中，然后在第一对括号之后放置另一对）称为“**我立即****调用**函数表达式**”模式（****简称**IIFE ）。它所做的是定义一个*匿名*函数，然后立即执行它。第一组括号将函数标记为*表达式*，而不是语句。第二组执行从第一个表达式返回的函数：

 ****```
// This:
(function(){
    // Todo: Add code
})();

// Translates *approximately* to this:
var _anonymous_function_2723113 = function() {
    // Todo: Add code
};
_anonymous_function_2723113();
delete _anonymous_function_2723113; 
```

至于为什么当你给它一个名字时这个函数不起作用，我建议阅读[kangaxx 关于这个主题的文章](https://web.archive.org/web/20130202165232/http://kangax.github.com:80/nfe/)，特别是在他触及[命名函数表达式](https://web.archive.org/web/20130202165232/http://kangax.github.com:80/nfe/#named-expr)的地方。简而言之，当您有一个命名函数*表达式*（而不是语句）时，该名称**应该**仅可用于函数的范围。

三个和四个 - 至于避免内存泄漏，IIFE 不是避免内存泄漏的方法（正如@elclanrs 所指出的，它只是帮助您避免污染全局范围）。为避免内存泄漏，请避免循环引用（请记住，闭包可能是循环引用的来源）。

祝你好运，并享受自己！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T01:50:48.147

下面是一个可以使用匿名函数的示例： 让我们有 4 个元素的 id：id_1、id_2、id_3... 我们也希望循环遍历每个元素并分配 onclick 事件。

```
for (var i=0; i<5; i++) {
    document.getElementById("id_"+i).onclick = function()  {alert(i)}
} 
```

但是当您单击元素时，它们中的每一个都会发出相同的警报 - 4\. 原因是在 JavaScript 闭包中，只有最后一个值被存储为局部变量。你可以做什么：

```
for (var i=0; i<5; i++) {
(function(n){
    document.getElementById("id_"+n).onclick = function() {alert(n)};
})(i); 
```

}

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-17T01:30:18.743

SO中已经有[很多](https://stackoverflow.com/search?q=self+executing+function)关于这个问题的答案......这是一个自我执行的功能。它在许多情况下用于保护您的代码免受全局范围的影响。它也以其他方式编写：

```
function(){}()
(function(){})()
(function(){}())
!function(){}()
(function(){}).call(this) 
```****

# c# - DataTable.Add.Row(array) 和 DataTable.ImportRow(row) 之间的区别

> ID：11998597
> 
> 赞同：0
> 
> 时间：2012-08-17T01:16:45.660
> 
> 标签：c#, datatable

我试图了解使用以下方法创建的行之间的区别：

```
newTable.Rows.Add(array);

newTable.ImportRow(row); 
```

我有一个 WinForms 应用程序，它使用这两种方法将行添加到 DataTable。现在，当我将该 DataTable 用作 DataGridView 的数据源时，我可以看到使用这两种方法创建的“所有”行。但是，当我使用类型的循环时

```
foreach (DataRow row in newTable.Rows)
{
    //...do work
} 
```

循环仅“看到”使用 ImportRow 方法创建的行。好像使用 Rows.Add(array) 创建的行不存在，但显然它们确实存在，因为当我使用 DataTable 作为其数据源时，我可以在 DataGridView 中看到它们。

编辑（随后由 Rahil Jan Muhammad 发表评论）

是的 - 在玩了很多之后，我认为行添加方法与它无关。问题出在以下代码中：

```
foreach (DataGridViewColumn col in dataAllocations.Columns)
{
    if (col.Name == "Allocation")
    {
        col.ReadOnly = false;
    }
    else
    {
        col.ReadOnly = true;
    }
}  
foreach (DataGridViewRow row in dataAllocations.Rows)
{
    MessageBox.Show("DataGrid, " + row.Cells["AllocID"].Value.ToString() +
                                ", " + row.Cells["Active"].Value.ToString());

    if (row.Cells["Active"].Value == null || (bool)row.Cells["Active"].Value == false)
    {                        
         row.ReadOnly = true;
    }
    else
    {
         row.ReadOnly = false;
    }
} 
```

第一个循环使除“分配”列之外的所有列都是只读的。如果“活动”列中的值为假，则第二个循环旨在使“分配”列甚至为只读。然而，正在发生的事情恰恰相反。Active 为 true 的那些行是只读的，反之亦然。所以是的，我的“if”语句有问题。但是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T02:46:18.390

我发现了你的问题（日志错误）：

```
foreach (DataGridViewRow row in dataAllocations.Rows)
{
 MessageBox.Show("DataGrid, " + row.Cells["AllocID"].Value.ToString() +
                            ", " + row.Cells["Active"].Value.ToString());

if (row.Cells["Active"].Value == null || (bool)row.Cells["Active"].Value == false)
{                        
     row.Cells["Allocation"].ReadOnly = true;
}
else
{
     row.Cells["Allocation"].ReadOnly = false;
} 
```

}

您的代码将所有行的列设置为只读。您想设置只读分配列（我的代码）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T03:24:19.067

**datatable.Rows.Add()** 要将新记录添加到数据集中，必须创建新数据行并将其添加到数据集中 DataTable 的 DataRow 集合 (Rows)

The **ImportRow** method of DataTable copies a row into a DataTable with all of the properties and data of the row. It actually calls NewRow method on destination DataTable with current table schema and sets DataRowState to Added.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T01:38:53.093

Rows.Add 和 ImportRow 之间的区别在于，如果您调用 Rows.Add，则该行被标记为已添加（因此，如果您将表发送到数据适配器，则会生成插入）。如果使用Import row，则行进来了，但不是处于“插入”状态，不会产生插入。

但是，我无法重现您使用 AddRow 描述的行为 - 它们出现在我的 foreach 中。

下面的测试代码（来自 LINQpad，如果没有，可以将 .Dump() 调用更改为 Console.Write）：

```
 var dt = new DataTable();
dt.Columns.Add("C1", typeof(int));
for(int i = 0; i < 10; i++)
{
    var row = dt.NewRow();
    row[0] = i;
    dt.Rows.Add(row);
}

foreach(DataRow row in dt.Rows)
    row.Dump();

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T01:56:30.613

将行添加到数据表使用**newTable.Rows.Add(array);** 并将其他表中的行添加到另一个表中，我们使用**newTable.ImportRow(row);**

例子 ：

```
 DataTable dt = GetTable(true);

        dataGridView1.DataSource = dt;

        DataRow row = dt.NewRow();
        row[0] = 101;
        row[1] = "101";
        row[2] = "101";
        row[3] = DateTime.Now;

        dt.ImportRow(row);

        DataTable dt2 = GetTable(false);

        object[] r = { 105, "Habib", "Zare", DateTime.Now };
        dt2.Rows.Add(r);

        dt2.ImportRow(dt.Rows[1]);
        dataGridView2.DataSource = dt2; 
```

GetTable 方法：

```
 static DataTable GetTable(bool isAddRows)
    {

        DataTable table = new DataTable();
        table.Columns.Add("Dosage", typeof(int));
        table.Columns.Add("Drug", typeof(string));
        table.Columns.Add("Patient", typeof(string));
        table.Columns.Add("Date", typeof(DateTime));

        if (isAddRows)
        {
            table.Rows.Add(25, "Indocin", "David", DateTime.Now);
            table.Rows.Add(50, "Enebrel", "Sam", DateTime.Now);
            table.Rows.Add(10, "Hydralazine", "Christoff", DateTime.Now);
            table.Rows.Add(21, "Combivent", "Janet", DateTime.Now);
            table.Rows.Add(100, "Dilantin", "Melanie", DateTime.Now);
        }

        return table;
    } 
```

# javascript - jQuery 和 AJAX 调用元素有 JavaScript 代码吗？

> ID：11998599
> 
> 赞同：0
> 
> 时间：2012-08-17T01:16:54.827
> 
> 标签：javascript, jquery

我有一个只有一个`textarea`元素的简单表单。

我们使用此文本区域传递 JavaScript 代码并使用 PHP 将其保存到 MySQL 数据库中。

它适用于任何文本，但不适用于具有 JavaScript 的文本

```
$(function(){

      $("#hotbar").submit(function(){
          $.ajax({type:'POST', 
            url: 'modules/hotbar.php', 
            data:$('#hotbar').serialize(),
            beforesubmit : function() {
              return $('#hotbar').validate().form();
               },
            success: function(response) {
            $('#action').html(response);
        }
    });

       return false ;   
      });

}); 
```

它仅适用于任何文本；当传递 JS 代码时，我们想要保存它什么都不做，并且永远不会让值传递给 PHP 页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T02:07:28.767

很难说没有更多细节，但我会首先检查服务器端的 jQuery 验证插件或某些表单处理组件是否正在删除脚本标签，以尝试保护您免受跨站点脚本 (XSS) 攻击。

# python - Python图像库安装

> ID：11998603
> 
> 赞同：0
> 
> 时间：2012-08-17T01:17:11.277
> 
> 标签：python

我刚刚在以下文件夹中安装了 1.15 Python Image Library：

```
C:\Python26\Lib\site-packages\ 
```

然而，当我写

```
from PIL import Image, ImageOps, ImageDraw 
```

我收到一条错误消息，说未解决的导入。我在这里先向您的帮助表示感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T01:27:32.867

实际的模块只是`Image`, `ImageOps`, `ImageDraw`; 该`PIL`软件包是一个特定发行版决定添加的东西，因为他们认为这些模块名称过于通用，但实际上在 PIL 中并未找到它们。

# http - 如何判断http代理

> ID：11998604
> 
> 赞同：1
> 
> 时间：2012-08-17T01:17:26.583
> 
> 标签：http, proxy

每个人！我有一个 http 代理服务器列表，其中一些可能会停止运行 http 代理进程。当然有两种情况：不再监听端口；并且该端口可能会被其他服务监听。我必须编写一个程序来判断给定的服务器是否仍在运行 http 代理。我怎样才能做到这一点？如果我可以连接到一个端口，如何判断它是否提供http代理服务？我可以使用与协议相关的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:03:17.550

大多数代理服务器使用 8080 之类的端口号，这些端口号未分配给任何其他服务。在这些情况下，如果您可以连接，通常可以安全地假设它仍然是代理。

在代理服务器使用标准端口（如 80）的情况下，您可能希望向 Internet 上的已知主机发出单个请求。这样你就可以知道它仍在向外部转发请求。

如果您试图查看任何给定服务器或端口上可用的服务，则类似[nmap](http://nmap.org/)的东西可能会很有用。nmap 通常可以识别在任何给定端口上运行的服务类型。

**重要提示：在远程主机上运行全端口扫描（几乎总是）是非法的，除非您获得该主机所有者的书面许可。有时即使您有书面许可也是非法的**。

使用 nmap 扫描一个目标端口可能没问题。

# php - 在 Joomla 中处理 E_STRICT

> ID：11998606
> 
> 赞同：4
> 
> 时间：2012-08-16T14:55:23.390
> 
> 标签：php, joomla, strict

线

```
$db =& JFactory::getDBO(); 
```

给我这个`E_STRICT`

> 严格的标准：只能通过引用分配变量

这到底是什么意思？我正在使用`JFactory`就像它在文档中所说的那样。我应该担心吗？

谷歌搜索错误只会给我一堆 Joomla 人说我应该禁用`E_STRICT`. 我宁愿不走捷径，因为我正在努力提高我的技能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T20:26:35.497

这确实是一个问题，因为这不是评论。但是，如果您在那里问这个问题，他们会如此迅速地否决这个问题，您的脑袋就会旋转。在寻求帮助之前，你真的应该用谷歌搜索这些东西，因为这是有据可查的。仅此警告就足以回答您的问题。

但是，这个错误的原因是因为那是一个类方法，而不是一个变量。和一个静态的启动。任何警告或错误都应始终听取的严格警告是在告诉您没有可参考的内容。引用会自动复制您所做的任何更改`$db`并将它们应用于它所引用的任何变量，从而有效地克隆它。所以现在你开始看到一个问题。正如我所说，您不是在引用变量，而是在引用一个方法的返回值，该方法只是内存的一部分，不能被引用。

所以，你可以这样做：

```
$temp = JFactory::getDBO();
$db =& $temp; 
```

它会工作得很好。然而，这是完全没有必要的。这里完全不需要引用。您真正想要做的只是将该方法的返回值设置为一个变量并在其余代码中使用它。通常，特别是对于刚开始编程的人来说，引用是不必要的。您可以通过将先前的变量分配给新变量，进行更改，然后将新变量重新分配回旧变量来完成相同的操作。在您了解更多并更好地理解它之前，请不要参考。即使经过多年的编程，我也很少使用它。

# ios - 将图像附加到电子邮件

> ID：11998610
> 
> 赞同：2
> 
> 时间：2012-08-17T01:17:57.993
> 
> 标签：ios, ipad

我想知道是否有一种方法可以让用户从相机胶卷中选择图像，然后将其附加到电子邮件中？

这是我现在拥有的代码：

```
-(IBAction) openEmail {

MFMailComposeViewController *mailComposer = [[MFMailComposeViewController alloc] init];
[mailComposer setMailComposeDelegate:self];
if ([MFMailComposeViewController canSendMail]) {
    [mailComposer setToRecipients:[NSArray arrayWithObjects:@"TPsecondary_Example@email.com", nil]];
    [mailComposer setSubject:@"Learning Trail Submission"];
    [mailComposer setMessageBody:emailbody isHTML:NO];
    [mailComposer setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];

    NSString *path = [[NSBundle mainBundle] pathForResource:@"Answer" ofType:@"plist"];
    NSData *myData = [NSData dataWithContentsOfFile:path];
    [mailComposer addAttachmentData:myData mimeType:@"application/xml" fileName:@"Answer.plist"];

    [self presentModalViewController:mailComposer animated:YES];
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T02:01:45.250

肯定有！

在您的 .h 文件中添加这些委托并声明一个`UIImage`命名的 selectedImage。

```
<UIImagePickerControllerDelegate, UINavigationControllerDelegate> 
```

然后在您的 .m 中，您可以添加以下内容。

链接`-(IBAction)openImagePicker:(id)sender`到您要启动该过程的按钮。

```
- (IBAction)openImagePicker:(id)sender
{

    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypePhotoLibrary])
    {
        UIImagePickerController *imagePicker =
        [[UIImagePickerController alloc] init];
        imagePicker.delegate = self;
        imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
        imagePicker.allowsEditing = NO;
        [self presentViewController:imagePicker animated:YES completion:nil];
    }
}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    selectedImage = [info objectForKey:UIImagePickerControllerOriginalImage];
    [self dismissViewControllerAnimated:YES completion:^{
        [self openEmail];
    }];

}

-(IBAction) openEmail {

    MFMailComposeViewController *mailComposer = [[MFMailComposeViewController alloc] init];
    [mailComposer setMailComposeDelegate:self];
    if ([MFMailComposeViewController canSendMail]) {
        [mailComposer setToRecipients:[NSArray arrayWithObjects:@"TPsecondary_Example@email.com", nil]];
        [mailComposer setSubject:@"Learning Trail Submission"];
        [mailComposer setMessageBody:emailbody isHTML:NO];
        [mailComposer setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];

        NSString *path = [[NSBundle mainBundle] pathForResource:@"Answer" ofType:@"plist"];
        NSData *myData = [NSData dataWithContentsOfFile:path];
        [mailComposer addAttachmentData:myData mimeType:@"application/xml" fileName:@"Answer.plist"];
        NSData *imageData = UIImageJPEGRepresentation(selectedImage, 1.0);
        [mailComposer addAttachmentData:imageData  mimeType:@"image/jpg"   fileName:@"imageTitle"];
        [self presentModalViewController:mailComposer animated:YES];
    }
} 
```

**编辑：**请注意，这是一个非常基本的示例，它不处理诸如用户选择视频而不是图像之类的事件...

# ios - 在 CCMenu 中缩放 CCMenuItemSprite 项目

> ID：11998612
> 
> 赞同：1
> 
> 时间：2012-08-17T01:18:04.380
> 
> 标签：ios, xcode, cocos2d-iphone, scaling, ccmenuitem

我在使用带有缩放的 CCMenuItemSprite 菜单项的 CCMenu 时遇到问题。我正在尝试根据正在玩游戏的设备来不同地缩放菜单项精灵（iPad 需要将其缩放到大约 1.5 倍，而在 iPhone 上大约是 0.75 倍）

根据我的阅读，我们不能直接缩放 CCSprite 或 CCMenuItemSprite，因为当它被添加到 CCMenu 时，触摸矩形没有正确更新。我相信我必须缩放 CCMenu 来缩放菜单项。

每当我这样做时，我的精灵似乎被缩放到正确的大小，但它似乎也缩放了 CCMenu 位置坐标，但与我期望的方向相反。此外，一旦我超过某个阈值，菜单似乎就会完全消失。

有人对我应该如何在 CCMenu 中缩放 Sprites 有任何建议吗？

提前致谢。巴兹里克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T05:17:04.130

试试这个代码............

```
CCMenuItemImage  *Btn1 = [CCMenuItemImage itemWithNormalImage:@"button1.png" selectedImage:@"button1_active.png" target:self selector:@selector(button1_click:)];

CCMenuItemImage  *Btn2 = [CCMenuItemImage itemWithNormalImage:@"button2.png" selectedImage:@"button2_active.png" target:self selector:@selector(button2_click:)];

CCMenu *Action_menu = [CCMenu menuWithItems:Btn1,Btn2, nil];

[Action_menu setPosition:ccp( 79, 288)];

float delayTime = 0.3f;

for (CCMenuItemFont *each in [Action_menu children]) 
    {
        each.scaleX = 0.0f;
        each.scaleY = 0.0f;
        CCAction *action = [CCSequence actions:
                            [CCDelayTime actionWithDuration: delayTime],
                            [CCScaleTo actionWithDuration:0.5F scale:1.0],
                            nil];
        delayTime += 0.2f;
        [each runAction: action];
    }

[self addChild:Action_menu]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T10:01:47.387

我的建议？不！

每当您触摸菜单项时，CCMenu 都会在内部对其进行缩放。如果您点击并按住一个项目，您会注意到这一点，它会按比例放大（放大）。因此，当菜单项被触摸时，您对菜单项应用的任何缩放最迟都会丢失。

然后，正如您所注意到的，缩放会影响项目的触摸区域。它可能导致项目响应项目外部的触摸，或者根据缩放级别不响应触摸。出于同样的原因，我也不会缩放 CCMenu。

长话短说，如果您必须对菜单项应用缩放，请编写您自己的菜单项代码。可能通过将其基于 CCMenu 代码并剥离您不需要的内容并进行所需的更改。

但实际上最简单的方法是使用文件后缀 -hd、-ipad 和 -ipadhd 提供菜单项图像并相应地缩放。试图用 scale 属性来解决这个问题是很痛苦的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-19T01:26:09.713

以下是我最终解决的方法：基本上我首先创建了菜单元素，然后我整理了定位/缩放/旋转。这似乎工作得更好。下面的代码示例是我使用单个精灵创建两个相对的左/右箭头按钮的地方

```
 [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"ButtonSprites.plist"];
    CCSpriteBatchNode *buttonSprites = [CCSpriteBatchNode batchNodeWithFile:@"ButtonSprites.png"];
    [self addChild:buttonSprites];

    CCSprite *arrowLeftSprite = [CCSprite spriteWithSpriteFrameNameOrFile:@"PageArrow"];
    CCSprite *arrowLeftSpriteSelected = [CCSprite spriteWithSpriteFrameNameOrFile:@"PageArrow"];
    arrowLeftSpriteSelected.opacity = 128;
    CCSprite *arrowRightSprite = [CCSprite spriteWithSpriteFrameNameOrFile:@"PageArrow"];
    CCSprite *arrowRightSpriteSelected = [CCSprite spriteWithSpriteFrameNameOrFile:@"PageArrow"];
    arrowRightSpriteSelected.opacity = 128;

    float buttonWidth = screenSize.width * ButtonWidthPercent;
    int contentPixelWidth = arrowLeftSprite.contentSize.width;
    float scale = buttonWidth / contentPixelWidth;

    CCMenuItemSprite *pageLeftMenu = [CCMenuItemSprite itemFromNormalSprite:arrowLeftSprite selectedSprite:arrowLeftSpriteSelected target:self selector:@selector(buttonPageLeft:)];
    CCMenuItemSprite *pageRightMenu = [CCMenuItemSprite itemFromNormalSprite:arrowRightSprite selectedSprite:arrowRightSpriteSelected target:self selector:@selector(buttonPageRight:)];

    //  First perform the creation
    CCMenu *menu = [CCMenu menuWithItems: mainMenu, pageLeftMenu, pageRightMenu, nil];
    menu.position = ccp(0, 0);

    //  THEN deal with layout,rotation, and scaling
    pageLeftMenu.scale = scale;
    pageLeftMenu.rotation = 180;
    pageRightMenu.scale = scale;

    float arrowHeight = screenSize.height * 0.2;
    pageLeftMenu.position = ccp(screenSize.width * 0.1, arrowHeight);
    pageRightMenu.position = ccp(screenSize.width * 0.9, arrowHeight);

    [self addChild:menu z:2]; 
```

# python - 正则表达式 \Z(?ms)

> ID：11998613
> 
> 赞同：5
> 
> 时间：2012-08-17T01:18:10.227
> 
> 标签：python, regex

`\Z(?ms)`正则表达式中的含义是什么？

`\Z`是字符串结尾，但`(?ms)`部分是什么？

这被添加`fnmatch.translate("abc")`到返回的正则表达式中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-17T01:24:48.780

从[文档](http://docs.python.org/library/re.html)：

> (?iLmsux)
> 
> （来自集合'i'、'L'、'm'、's'、'u'、'x'的一个或多个字母。）组匹配空字符串；这些字母设置了相应的标志：re.I（忽略大小写）、re.L（取决于语言环境）、re.M（多行）、re.S（点匹配所有）、re.U（取决于 Unicode）和re.X（详细），用于整个正则表达式。（标志在模块内容中描述。）如果您希望将标志作为正则表达式的一部分包含在内，而不是将标志参数传递给 re.compile() 函数，这很有用。

# objective-c - 在Objective-C中，除了DEBUG还有RELEASE定义吗？

> ID：11998615
> 
> 赞同：0
> 
> 时间：2012-08-17T01:18:20.873
> 
> 标签：objective-c, ios, xcode

是否有`RELEASE`定义或可能是另一个名称？

我有点不想用

```
#ifndef DEBUG

#endif 
```

因为`n`可能不如我们使用 a 明显`RELEASE`，这很清楚。

如果没有可用的，那么将以下内容添加到定义`Support Files/project_name.pch`的好方法中吗？`RELEASE`

```
#ifndef DEBUG
  #define RELEASE 1
#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T03:16:31.123

`DEBUG`只是在预处理器宏下的 Xcode 的构建设置中定义。在该部分中，您可以为所有构建、调试构建或发布构建指定要定义的宏。只需添加`RELEASE`到发布部分，您就有了您想要的；或者，如果您更喜欢`#if`放入`#ifdef`调试`DEBUG=1, RELEASE=0`部分和`DEBUG=0, RELEASE=1`发布部分。

（如果你不使用 Xcode，你的构建系统/编译器应该有类似的设施。）

# php - Magento：致命错误：在非对象上调用成员函数 getItems()

> ID：11998616
> 
> 赞同：1
> 
> 时间：2012-08-17T01:18:21.197
> 
> 标签：php, magento, magento-1.5, fatal-error

我们目前正在使用 Magento 的 ManaFilters 扩展，但是我们目前遇到了一些困难，因为它无法正常工作。

这是它产生的错误消息：

> 致命错误：在第 171 行的 /var/www/app/code/local/Mana/Filters/Model/Filter/Category.php 中的非对象上调用成员函数 getItems()

这是与第 171 行相关的代码：

```
/**
 * @param Mage_Catalog_Model_Resource_Eav_Mysql4_Category_Collection $categories
 * @return Mana_Filters_Model_Filter_Category
 */
public function addCountToCategories($categories, $products = null) {
    if (!$products) {
        $products = $this->getLayer()->getProductCollection();
    }
    $products->addCountToCategories($categories);
     if (($items = $categories->getItems()) && count($items)) {
        $category = array_shift($items);
        if (!$category->hasProductCount()) {
            Mage::helper('mana_filters')->addCountToCategories($products, $categories);
        }
    }
    return $this;
} 
```

}

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T02:02:55.143

根据您的描述，当**$items = $categories->getItems()**即将执行时， $ **categories**等于**null 。**受限于您给出的上下文，可能 $ **categories**在其他地方已经为空。

# vb.net - 一个非常好的子字符串错误

> ID：11998625
> 
> 赞同：0
> 
> 时间：2012-08-17T01:19:39.037
> 
> 标签：vb.net, visual-studio-2010, substring

我在解析目录字符串数组时遇到问题。最终目标是查询与 [global].MyDataDir & "\saved" 相关的路径以获取此目录中的所有文件夹。然而，实际的文件夹名称，最后一个 indexof "\" 之后的最后一段文本包含一个插件的名称，我需要将其与插件的枚举列表进行比较以获得更多功能，我不会在这里介绍。这里的问题是我的最后一点代码不起作用。Dim 文件夹名称为 String = (etc...)，它返回一个错误，指出索引和长度必须引用字符串中的位置。参数名称：长度。

你们中的任何一个巫师都可以在这里帮助我。非常感激。

```
Dim dirList As String() = System.IO.Directory.GetDirectories([global].MyDataDir & "\saved")
For dir As Integer = 0 To dirList.Length - 1
    If IO.Directory.GetFiles(dirList(dir)).Length > 0 Then
        For Each file As String In IO.Directory.GetFiles(dirList(dir))

            Dim folderName As String = dirList(dir).ToString.Substring(dirList(dir).ToString.LastIndexOf("\"), dirList(dir).ToString.Length - 1)

        Next
    End If
Next 
```

森帕菲。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T01:25:25.333

请改用 System.IO.Path.GetDirectoryName()。

下次使用 VB.NET Left() 便利函数来避免出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T13:19:48.107

我找到了原因......

问题在于 Substring 的参数（起始索引，起始索引的副本长度）。我的印象是，长度参数在计算长度时会考虑整个字符串。相反，此函数的第二个参数作用于第一个参数的结果，而不是整个字符串。因此，字符串的长度实际上比对其进行索引后存在的长度要长得多。

谢谢您的帮助。

# php - PHP 渲染图像文件

> ID：11998626
> 
> 赞同：1
> 
> 时间：2012-08-17T01:19:42.337
> 
> 标签：php, image, apache

在渲染图像文件时我有哪些选择？假设我有一个保存在 foo/bar.png

目前我知道我可以使用`readfile()`或更好，`X-Sendfile`（我在 Apache 上）。还有哪些比使用更好的方法`readfile()`呢？

我想将图像输出到浏览器（Content-Type: image/png）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T01:26:41.763

*最好*的解决方案是让您的网络服务器 (Apache) 自己提供内容。如果必须改用 PHP，您只需确保首先将 Content-Type 设置为适当的值：

```
header("Content-type: image/png"); 
```

然后用于`readfile()`发送图像本身。

# pointers - fortran 中可以使用匿名数组吗？

> ID：11998630
> 
> 赞同：2
> 
> 时间：2012-08-17T01:20:59.303
> 
> 标签：pointers, fortran, anonymous-types, anonymous

我正在尝试在 Fortran 中创建一个数组数组。

类似于以下内容

```
TYPE :: array_of_arrays
   REAL, DIMENSION(:), POINTER :: p => NULL()
END TYPE

TYPE(array_of_arrays), DIMENSION(2) :: some_array 
```

这样我就可以做到：

```
REAL, DIMENSION(3), TARGET :: some_vector1 = (/1.0, 2.1, 4.3/)
REAL, DIMENSION(3), TARGET :: some_vector2 = (/3.0, 1.2, 9.6/)

some_array(1)%p => some_vector1
some_array(2)%p => some_vector2

WRITE(*,*) some_array(1)%p ! I see some_vector1
WRITE(*,*) some_array(2)%p ! I see some_vector2 
```

现在，实际上将这些`some_vector`数组中的每一个声明为对应于我的数组数组中的每个元素对我来说是很麻烦的。

我想做的是在一个单独的子例程中设置一个临时向量作为目标，并且该子例程设置我的数组数组以指向该临时向量。

这样我就可以拥有匿名数组。

但是，这似乎不起作用，我想知道是否首先我正在做一些 Fortran 不支持的事情。

那么 Fortran 是否支持匿名数组，也就是说（如果我的术语有误），一个只能通过引用访问的数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T03:36:47.970

当然; 正如 IanH 建议的那样，您可以让指针直接引用分配的内存，而不是引用变量；这是分配的内存一旦超出范围就不会自动释放的少数情况之一。

例如，

```
module arrays

TYPE :: array_of_arrays
   REAL, DIMENSION(:), POINTER :: p => NULL()
END TYPE

contains

subroutine alloc(aa)
    type(array_of_arrays), intent(inout) :: aa(:)
    integer :: i

    allocate( aa(1)%p(1) )
    aa(1) % p = [1.]

    allocate( aa(2)%p(5) )
    aa(2) % p = [ (i, i=1,5) ]

end subroutine alloc

end module arrays

program usearrays
    use arrays

    TYPE(array_of_arrays), DIMENSION(2) :: some_array

    call alloc(some_array)

    WRITE(*,*) some_array(1)%p ! I see some_vector1
    WRITE(*,*) some_array(2)%p ! I see some_vector2

    deallocate( some_array(1) )
    deallocate( some_array(2) )

end program usearrays 
```

并运行它给出

```
$ gfortran -o arrays arrays.f90 
$ ./arrays 
   1.0000000    
   1.0000000       2.0000000       3.0000000       4.0000000       5.0000000 
```

# php - 浮动页脚漂浮在 Wordpress 页面中的内容上

> ID：11998632
> 
> 赞同：1
> 
> 时间：2012-08-17T01:21:07.963
> 
> 标签：php, html, wordpress

我们在 Wordpress 中构建了我们的网站，一切都很完美，但后来我们想添加一个博客，而页脚奇怪地漂浮在主要内容上，而不是在页面底部应该在的位置。

我们尝试添加一个上边距来解决问题，但这可能不是一个好主意......

这些页面可以在这里看到：

### .com.au/tinting-eyebrows

### .com.au/?s=眉毛

任何有关如何正确解决此问题的帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T01:32:12.097

我不知道包装器之外的**div.box**是什么，只需删除它在 CSS 上的高度即可解决问题：

在第 413 行的**style.css中，****删除/注释**以下规则：

```
 /*height: 170px*/ 
```

一切都应该工作。因为那个 div 限制了 primary_content_wrap 的高度并使页脚显示在更高的位置。

# java - 从 shell 调用 cat，而 shell 又由 java exec 调用

> ID：11998635
> 
> 赞同：0
> 
> 时间：2012-08-17T01:21:39.560
> 
> 标签：java, shell, exec

我有一个 shell 脚本 test.sh ：

```
cat /home/tomcat/temp/tempLogFile.log > /home/tomcat/temp/logFile_test.log 
```

我通过 Runtime.getRuntime().exec("test.sh") 从 java 调用 test.sh

它创建 logFile_test.log 但没有写入任何内容。

如果我直接从 shell 运行脚本，它工作正常。可能出了什么问题？

谢谢，

更新：有趣的是，如果我这样做，它工作得很好

```
echo 'cat /home/tomcat/temp/tempLogFile.log > /home/tomcat/temp/logFile_test.log' | at now 
```

但我不能使用`at now`，因为我需要等待 cat 完成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T01:33:50.667

也许你的命令路径搞砸了？该命令将创建 logFile_test.log 即使它无法运行`cat`程序。尝试添加类似：

```
set > /tmp/dump.txt 
```

到 shell 脚本。这会将进程的环境变量的副本写入`/tmp/dump.txt`. 检查这些可能会帮助您找出问题所在。

另一种可能是磁盘已满。在这种情况下，您可以创建空文件，但不能向其中写入任何数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T02:20:21.190

一旦调用`getRuntime().exec("ANY_COMMAND");`，它会返回一个 Process 实例，使用 process 对象，您可以获得输入和输出流，然后将任何其他命令传递给同一进程或读取输出，为此您连接了三个流

1.  输出流：- 让您控制向同一进程发送更多参数或命令
2.  输入流：- 让您控制从进程的标准输出中读取值
3.  错误流：- 为您提供在执行任何命令期间发生的所有错误。

即使您有任何错误，您也可以检查错误流并查看发生了什么问题。

你可以参考[Java process.getInputStream() has nothing to read, deadlocks child](https://stackoverflow.com/questions/3756899/java-process-getinputstream-has-nothing-to-read-deadlocks-child)

# java - 使用通知/等待停止/重新启动 Java 中的线程

> ID：11998636
> 
> 赞同：1
> 
> 时间：2012-08-17T01:21:43.543
> 
> 标签：java, android, multithreading, synchronize

我正在为 Android 2.2+ 开发简单的视频录制应用程序，并且无法让 Timer 线程按预期工作。代码如下，所以步骤是：

1.  当用户按下开始录制按钮时，录制开始并调用fightTimer.start() 方法。
2.  它调用 timer.start() 方法开始运行线程。timer是fightTimer里面的线程对象
3.  当用户单击停止按钮时，fightTimer 方法 stop() 被调用。在那里我设置了一个标志 stopTimer=true 以便停止线程方法运行并调用 timer.wait() 方法以便线程等待
4.  当用户单击开始录制按钮时，再次调用fightTimer.start() 方法。它调用线程 timer.start() 因为计时器已经启动但是它抛出异常。
5.  我捕获异常并调用fightTimer.restart() 方法。这个方法将我在步骤 3 中设置的标志 stopTimer 设置为 true，所以现在我们有 stopTimer=true。计时器线程仍在 run() 方法内部等待
6.  然后它调用 timer.notify() 让 timer 知道它不需要再等待并且可以继续运行
7.  现在我期待计时器线程再次开始运行，但由于某种原因，此时执行跳转到调用 notify() (restart()) 并设置标志 stopTimer=false 的同一方法的开头，然后尝试通知计时器线程再次。它抛出运行时异常，这就是它结束的地方。

我认为我对线程整体同步的理解是不正确的，所以如果有人能指出我在哪里搞砸了，那就太好了。下面是 FightTimeris 的代码，我什至没有在 logCat 中获得任何输出信息。就像我说的任何帮助将不胜感激，因为我不明白为什么会发生这种情况以及如何解决它。

```
 public class FightTimer extends SurfaceView implements Runnable, SurfaceHolder.Callback {

        public Thread timer;
        public SurfaceHolder surfaceHolder;
        public Canvas canvas;
        public int counter=0;
        public volatile boolean stopTimer=false;
        public volatile boolean pauseTimer=false;

        public FightTimer(Context context)
        {
            super(context);

            surfaceHolder=getHolder();

            // this is necessary to make surfaceview transparent
            surfaceHolder.setFormat(PixelFormat.TRANSLUCENT);
            setZOrderOnTop(true);

            surfaceHolder.addCallback(this);

            timer=new Thread(this);
        }

        public void start()
        {
            try
            {
                timer.start();
            }
            catch(IllegalThreadStateException ex)
            {
                reStart();
            }
        }

        public synchronized void reStart()
        {
// here the method is executed twice as I described in step 7
// after notify() it actually jumps back to stopTimer=false again and then exits the function. Then outside of this object I catch RuntimeException         
            stopTimer=false;
                    timer.notify(); 
        }

        public synchronized void pause()
        {
            pauseTimer=true;
        }

        public synchronized void resume()
        {
            pauseTimer=false;
            timer.notify(); 
        }

        public void stop()
        {
            stopTimer=true;
        }

        public void run() {

            TimeWatch timeWatch=TimeWatch.start();

            Paint paint=new Paint();

            paint.setColor(Color.RED);

            paint.setTypeface(Typeface.create("Arial",Typeface.NORMAL));
            paint.setTextSize(20);

            while(true)
            {
                // this is to pause timer

                try
                {
                    if(pauseTimer)
                    {
                        synchronized(timer) {
                            while(pauseTimer)
                                timer.wait();
                        }

                        // TODO heres the code should be executed when timer is resumed eg.
                        // maybe calculate how timer should count now as it wasn't counting for a while etc

                    }
                } catch(InterruptedException ex)
                {

                }

                // this is to pause timer

                try
                {
                    if(stopTimer)
                    {
                        synchronized(timer) {
                            while(stopTimer)
                                timer.wait();
                        }

                        // TODO heres the code should be executed when timer is restarted
                        // maybe reset timer completely etc

                        timeWatch.reset();
                    }
                } catch(InterruptedException ex)
                {

                }

                canvas=surfaceHolder.lockCanvas();

                // canvas might not exists at this point as we might be in activitis onStop() callback and stopping preview
                // etc. so we need to check if so then we exit run function

                if(canvas==null) return;

                //canvas.drawARGB(0,255,255,255);
                canvas.drawColor(0, android.graphics.PorterDuff.Mode.CLEAR); 

                long minutes=timeWatch.time(TimeUnit.SECONDS)/60;

                canvas.drawText(counter+"      "+minutes+":"+timeWatch.time(TimeUnit.SECONDS)%60,0,counter%60, paint);

                counter++;

                surfaceHolder.unlockCanvasAndPost(canvas);
            }

        }

        public void surfaceChanged(SurfaceHolder holder, int format, int width,
                int height) {
            // TODO Auto-generated method stub

            //Toast.makeText(getContext(), "Surface Changed", Toast.LENGTH_LONG).show();

        }

        public void surfaceCreated(SurfaceHolder holder) {
            // TODO Auto-generated method stub

            //timer.start();
        }

        public void surfaceDestroyed(SurfaceHolder holder) {
            // TODO Auto-generated method stub
            // when surface is destroyed it means it cannot be displayed anymore and there is no canvas to draw
            // meaning the run() method cannot draw anything and calls to surfaceHolder will throw exception
            // so we need to stop thread here
            // this will happen when activity is in onStop() callback and when is already invisible and we are going to 
            // remove the object anyway so we don't care what will happenn later and make it wait. All we need is stop
            // run() from calling any other methods on canvas from surfaceHolder 

            Toast.makeText(getContext(), "Surface Destroyed", Toast.LENGTH_LONG).show();
        }

        public void setSurfaceHolder(SurfaceHolder surfaceHolder2) {
            // TODO Auto-generated method stub
            surfaceHolder=surfaceHolder2;
        }

    } 
```

另请参阅 restart() 方法中的编辑评论。下面是调用堆栈，当 restart() 方法退出时。如果需要更多信息，请告诉我。

```
DalvikVM[localhost:8754]    
    Thread [<1> main] (Suspended)   
        <VM does not provide monitor information>   
        MyFirstAppActivity.startRecording(View) line: 271   
        Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
        Method.invoke(Object, Object...) line: 521  
        View$1.onClick(View) line: 2077 
        Button(View).performClick() line: 2461  
        View$PerformClick.run() line: 8888  
        ViewRoot(Handler).handleCallback(Message) line: 587 
        ViewRoot(Handler).dispatchMessage(Message) line: 92 
        Looper.loop() line: 123 
        ActivityThread.main(String[]) line: 4627    
        Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
        Method.invoke(Object, Object...) line: 521  
        ZygoteInit$MethodAndArgsCaller.run() line: 858  
        ZygoteInit.main(String[]) line: 616 
        NativeStart.main(String[]) line: not available [native method]  
    Thread [<7> Binder Thread #2] (Running) 
    Thread [<6> Binder Thread #1] (Running) 
    Thread [<8> Binder Thread #3] (Running) 
    Thread [<9> Thread-9] (Running) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:00:08.907

方法 reStart() 和 resume() 在调用 notify() 之前必须在对象计时器上获取监视器。（类似于上面的代码中 timer.wait() 的执行方式。）

```
public synchronized void reStart()
{
// here the method is executed twice as I described in step 7
// after notify() it actually jumps back to stopTimer=false again and then exits the function. Then outside of this object I catch RuntimeException 
    stopTimer=false;
    synchronized(timer) {
        timer.notify();
    }
}

public synchronized void resume()
{
    pauseTimer=false;
    synchronized(timer) {
        timer.notify();
    }
} 
```

不这样做会导致JRE 上出现*IllegalMonitorStateException 。*并且 stacktrace 发布了类似问题的观点。

# mysql - MySQL 字段上的索引未按预期工作（innodb）

> ID：11998637
> 
> 赞同：0
> 
> 时间：2012-08-17T01:21:49.707
> 
> 标签：mysql, database, database-design, indexing, innodb

我有 3000 万条记录，一个字段（已更新）是带有索引的 tinyint(1)。

如果我运行：

```
SELECT * FROM  `table` WHERE `updated` = 1 
```

这将花费越来越长的时间，具体取决于设置为 1 的数量。如果是 10,000，它将非常快，大约 1 秒。但是，如果说 100 万，则需要几分钟。

索引不是应该让这个速度变快吗？

当我在一个相似的非索引字段上运行相同的查询时，它只是 int(1)，它的执行与索引字段相同。

关于为什么会这样的任何想法？tinyint 不好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T01:29:25.643

通常，将二进制列用于索引并不是一个好主意。在某些情况下它是可以的，但这通常是可疑的。

索引的主要目的是减少查询的 I/O。表达查询的方式，它需要原始数据（以满足“select *”）和索引（用于 where 子句）。

所以，数据库引擎会遍历索引。每次找到匹配的记录时，都会将该页面加入成员。你有一个 I/O 命中。因为你的表太大了，页面可能还没有看到，所以有一个真正的 I/O 命中。

有趣的是，您的经验支持这一点。10,000 行大约是一秒。行数的 100 倍（一百万）大约是 100 秒。您正在见证性能的线性。

顺便说一句，如果您执行“select update”而不是“select *”，查询会更快。这个查询只能从索引中得到满足。如果您有一个 id 列，您可以在 (update, id) 上创建索引，然后执行“选择 id”以提高性能。

# c - 将命令行参数传递给函数

> ID：11998643
> 
> 赞同：1
> 
> 时间：2012-08-17T01:22:38.123
> 
> 标签：c, svm, libsvm

我在 C 中使用 LIBSVM 进行性别检测。在 sum-train.c 中有一个函数 **parse_command_line(argc, argv, input_file_name, model_file_name);**

现在我想将参数传递给这个函数，但不是使用命令行，而是在这个程序中。例如，参数可以是： **-s 1 -t 2 -c 1 -g 0.5 -v 5 input_file_name model_file_name**

但我不知道如何将这些参数传递给这个函数。*注意：我这样做是因为我不想使用提供的二进制文件。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T01:31:00.603

如果它们是标准`main`类型的参数，那么这就是您所需要的。

`argc`必须是参数的计数，*包括*“程序名称”（引用是因为此值设置为取决于实现）。

`argv`应该是一个字符指针数组，指定：

*   “程序名称”。
*   每个论点。
*   一个 NULL 终止符。

所以，对于命令行

```
-s 1 -t 2 -c 1 -g 0.5 -v 5 input_file_name.dat model_file_name.dat 
```

你将会拥有：

```
const char *myArgV[] = {
    "progname",
    "-s", "1",
    "-t", "2",
    "-c", "1",
    "-g", "0.5",
    "-v", "5",
    "input_file_name.dat",
    "model_file_name.dat",
    NULL };
int myArgC = sizeof (argv) / sizeof (argv[0]) - 1; 
```

并致电：

```
char inputfile[100]; // potential buffer overflow risk but, since it is
char modelfile[100]; //  sample code, not really relevant.
parse_command_line (myArgC, myArgV, inputfile, modelfile); 
```

这将解析参数，填充您传入的两个文件名变量，并`svm_parameter`根据提供的参数设置内部。

# network-programming - 在 Linux 中将 TCP/IP 流量转换为半双工

> ID：11998646
> 
> 赞同：0
> 
> 时间：2012-08-17T01:23:29.403
> 
> 标签：network-programming, linux-device-driver

我正在为不支持全双工模式的 PHY 媒体开发自定义网络驱动程序。

我想在这个网络驱动程序和这个半双工 PHY 媒体之上使用 TCP/IP 流量。但是 TCP/IP 流量可以是全双工的。我想在这个驱动程序中实现一些机制/算法，以便这个自定义网络驱动程序将 TCP/IP 流量转换为 linux 中的半双工。

请让我知道这是否可以实现或如何实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T04:42:48.050

因此，您正在尝试在实际上不支持该功能的卡上编写支持全双工流量的驱动程序...

嗯..你必须知道网络子系统是内核中最大的子系统之一，也是少数几个实际使用软中断的子系统之一（因为它总是在考虑在这个多处理器时代适当地扩展）并且仍然有诉诸一些诡计（NAPI）来管理由当今媒体不断增加的速率产生的大量中断请求......为什么我说这一切是因为我只是想提醒你现实生活的复杂性涉及编写“常规”网络驱动程序，更不用说“伪全双工”驱动程序了。

现在我相信您非常想要的是给... TCP/IP 堆栈（是吗？客户端，无论是 MAC 层还是诸如 ethtool 之类的东西）都可以像使用“常规全双工”驱动程序（并期望结果）一样使用它（在转储和检索数据包方面） ...

所以如果真的是这样的话，我想知道给出这样的错觉有什么好处呢？也许你只是在做实验？在任何情况下，默认情况下 TCP 无论如何都是全双工的，并且通过使用半双工媒体，数据速率无论如何都比使用全双工适配器获得的数据速率低一点（尽管不完全是一半）。我认为在高层（就功能而言）媒体是全双工还是半双工（MAC 层除外？）如果我错了，请纠正我。

当前使用（并且仍然）相当多的半双工媒体，因此有许多媒体同时支持全双工和半双工流量。我看不出它将如何影响驱动程序的客户端（除了降低总体数据速率是唯一有形的影响）...这意味着您几乎可以查看内核中的任何网络驱动程序，并看到它有办法将适配器配置为使用全双工或半双工（以及用户空间可以说 ethtool 作为切换它的方法之一......）......

[无论如何，您可能想看看这里](http://iatips.wikispaces.com/ModbusRBX)的MODBus 驱动程序（默认情况下为半双工总线）并从中获得一些提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:53:10.450

我不确定您如何将 MAC 层与 TCP 层联系起来。双工模式是一个以太网域，它不会传播到 IP，也不会传播到 TCP，在以太网术语中，双工意味着您可以在不同时间（半双工）或同时（全双工）专门发送或接收 MAC 帧.

网络堆栈的上层完全（至少他们应该）不知道这个过程。考虑以下示例，您正在使用 FTP 通过网络发送一个巨大的文件，假设大多数正常的网络系统堆栈是 FTP/TCP/IP/以太网。从 FTP 的角度来看，您有一个虚拟会话，从 TCP 的角度来看，您有一个虚拟管道，从 IP 的角度来看，您只知道如何到达终端系统，从以太网的角度来看，您只知道如何到达网络中的下一个节点。

TCP 不关心您的数据包在传输过程中是否被切碎，也不关心您的数据包是否由于传入数据包到达而延迟在某个阈值内它只关心接收数据包到达最终目的地的确认回执。我希望我能表明我的观点。

# nhibernate - NHibernate 花费更长的时间执行简单的查询

> ID：11998647
> 
> 赞同：0
> 
> 时间：2012-08-17T01:23:50.317
> 
> 标签：nhibernate, orm, nhibernate-mapping, queryover, nhibernate-criteria

我面临着非常奇怪的 NHibernate 问题，现在它变得头疼。

NHibernate 执行这样一个简单查询所花费的时间（2-3 分钟）比预期的时间（几毫秒）要长。数据库是 Oracle，我正在使用 ODP 驱动程序。我已经检查了 NHibernate 和 Spring 的所有必要配置，这对我来说看起来不错。当我在 sqldeveloper 中执行相同的查询时，它会以毫秒为单位给出结果。

**仅供参考**- 当我执行另一个具有相同 NHibernate 配置的复杂模型的三个内部连接的查询时，我得到了预期的结果。

在调试日志中，我可以看到下面浪费时间的行：

```
2012-08-17 09:53:20,754 [TestRunnerThread] DEBUG - NHibernate.Connection.DriverConnectionProvider - Obtaining IDbConnection from Driver
2012-08-17 09:55:09,369 [TestRunnerThread] DEBUG - NHibernate.AdoNet.AbstractBatcher - ExecuteReader took 108720 ms 
```

NHibernate 属性设置：

```
<nhibernatePropertiesSettings>
<setting name="nhibernate.connection.provider" serializeAs="String">
 <value>NHibernate.Connection.DriverConnectionProvider</value>
</setting>
<setting name="nhibernate.connection.driver.class" serializeAs="String">
 <value>NHibernate.Driver.OracleDataClientDriver</value>
</setting>
<setting name="nhibernate.dialect" serializeAs="String">
 <value>NHibernate.Dialect.Oracle10gDialect</value>
</setting>
<setting name="nhibernate.show.sql" serializeAs="String">
 <value>true</value>
</setting>
<setting name="nhibernate.query.substitutions" serializeAs="String">
 <value>true 1, false 0, yes 'Y', no 'N'</value>
</setting>
<setting name="nhibernate.use.proxy.validator" serializeAs="String">
 <value>false</value>
</setting>
<setting name="nhibernate.template.flush.mode" serializeAs="String">
 <value>Never</value>
</setting>
</nhibernatePropertiesSettings> 
```

弹簧属性设置：

```
<springPropertiesSettings>
 <setting name="spring.db.provider" serializeAs="String">
  <value>OracleODP-11-2.0</value>
 </setting>
</springPropertiesSettings> 
```

映射：

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
  <class name="XYZ.PaymentInvestigation.Service.Model.PaymentMessageHistory, PaymentInvestigation.Service.Model" table="MESSAGE_HIST_T" lazy="false">    
    <composite-id name="PaymentMessageHistoryId" class="XYZ.PaymentInvestigation.Service.Model.PaymentMessageHistoryId, PaymentInvestigation.Service.Model" unsaved-value="undefined">
      <key-property name="TransactionDate" column="TRN_DATE" />
      <key-property name="TransactionReferenceNumber" column="TRN_NUMBER" />
      <key-property name="TransactionTimeStamp" column="TRN_TIMESTAMP" />
      <key-property name="HistoryNumber" type="AnsiString" column="HIST_NO" />
      <key-property name="SubHistoryNumber" type="AnsiString" column="SUB_HIST_NO" />
    </composite-id>
    <property name="EntryType" column="ENTRY_TYPE" update="false" insert="false" />
    <property name="Location" column="LOC" update="false" insert="false" />
    <property name="QueLineId" column="QUE_LINE_ID" update="false" insert="false" />
    <property name="DateTime" column="DATE_TIME" update="false" insert="false" />
    <property name="SequenceNo" column="SEQUENCE_NO" update="false" insert="false" />
    <property name="OperatorInitials" column="OPR_INITIALS" update="false" insert="false" />
    <property name="Amount" column="AMOUNT" update="false" insert="false" />
    <property name="MsgInfo" column="MSG_INFO" update="false" insert="false" />
    <property name="RecordExpired" column="RECORD_EXPIRED" update="false" insert="false" />
    <property name="RecordUpdated" column="RECORD_UPDATED" update="false" insert="false" />
    <property name="Details" column="DETAILS" update="false" insert="false" /> 
 </class> 
```

询问：

```
IList<PaymentMessageHistory> paymentMessageHistories =
    HibernateTemplate.ExecuteFind(session => session
        .QueryOver<PaymentMessageHistory>()
        .Where(x =>
            x.PaymentMessageHistoryId.TransactionDate == paymentMessageId.TransactionDate &&
            x.PaymentMessageHistoryId.TransactionReferenceNumber == paymentMessageId.TransactionReferenceNumber)
        .List()); 
```

PaymentMessageHistoryId 模型：

```
public class PaymentMessageHistoryId : IEquatable<PaymentMessageHistoryId>
{
    public virtual DateTime TransactionDate { get; set; }
    public virtual int TransactionReferenceNumber { get; set; }
    public virtual double TransactionTimeStamp { get; set; }
    public virtual string HistoryNumber { get; set; }
    public virtual string SubHistoryNumber { get; set; }

    public bool Equals(PaymentMessageHistoryId other)
    {
        if (ReferenceEquals(null, other)) return false;
        if (ReferenceEquals(this, other)) return true;
        return other.TransactionDate.Equals(TransactionDate) && other.TransactionReferenceNumber == TransactionReferenceNumber && other.TransactionTimeStamp.Equals(TransactionTimeStamp) && Equals(other.HistoryNumber, HistoryNumber) && Equals(other.SubHistoryNumber, SubHistoryNumber);
    }

    public override bool Equals(object obj)
    {
        if (ReferenceEquals(null, obj)) return false;
        if (ReferenceEquals(this, obj)) return true;
        if (obj.GetType() != typeof (PaymentMessageHistoryId)) return false;
        return Equals((PaymentMessageHistoryId) obj);
    }

    public override int GetHashCode()
    {
        unchecked
        {
            int result = TransactionDate.GetHashCode();
            result = (result*397) ^ TransactionReferenceNumber;
            result = (result*397) ^ TransactionTimeStamp.GetHashCode();
            result = (result*397) ^ (HistoryNumber != null ? HistoryNumber.GetHashCode() : 0);
            result = (result*397) ^ (SubHistoryNumber != null ? SubHistoryNumber.GetHashCode() : 0);
            return result;
        }
    }

    public static bool operator ==(PaymentMessageHistoryId left, PaymentMessageHistoryId right)
    {
        return Equals(left, right);
    }

    public static bool operator !=(PaymentMessageHistoryId left, PaymentMessageHistoryId right)
    {
        return !Equals(left, right);
    }

    public override string ToString()
    {
        return string.Format("TransactionDate: {0}, TransactionReferenceNumber: {1}, TransactionTimeStamp: {2}, HistoryNumber: {3}, SubHistoryNumber: {4}", TransactionDate, TransactionReferenceNumber, TransactionTimeStamp, HistoryNumber, SubHistoryNumber);
    } 
```

PaymentMessageHistory 模型：

```
public class PaymentMessageHistory : IEquatable<PaymentMessageHistory>
{
    public virtual PaymentMessageHistoryId PaymentMessageHistoryId { get; set; }
    public virtual string EntryType { get; set; }
    public virtual string Location { get; set; }
    public virtual string QueLineId { get; set; }
    public virtual string DateTime { get; set; }
    public virtual string SequenceNo { get; set; }
    public virtual string OperatorInitials { get; set; }
    public virtual decimal Amount { get; set; }
    public virtual string MsgInfo { get; set; }
    public virtual double RecordExpired { get; set; }
    public virtual string RecordUpdated { get; set; }
    public virtual string Details { get; set; }

    public bool Equals(PaymentMessageHistory other)
    {
        if (ReferenceEquals(null, other)) return false;
        if (ReferenceEquals(this, other)) return true;
        return Equals(other.PaymentMessageHistoryId, PaymentMessageHistoryId) && Equals(other.EntryType, EntryType) && Equals(other.Location, Location) && Equals(other.QueLineId, QueLineId) && Equals(other.DateTime, DateTime) && Equals(other.SequenceNo, SequenceNo) && Equals(other.OperatorInitials, OperatorInitials) && other.Amount == Amount && Equals(other.MsgInfo, MsgInfo) && other.RecordExpired.Equals(RecordExpired) && Equals(other.RecordUpdated, RecordUpdated) && Equals(other.Details, Details);
    }

    public override bool Equals(object obj)
    {
        if (ReferenceEquals(null, obj)) return false;
        if (ReferenceEquals(this, obj)) return true;
        if (obj.GetType() != typeof (PaymentMessageHistory)) return false;
        return Equals((PaymentMessageHistory) obj);
    }

    public override int GetHashCode()
    {
        unchecked
        {
            int result = (PaymentMessageHistoryId != null ? PaymentMessageHistoryId.GetHashCode() : 0);
            result = (result*397) ^ (EntryType != null ? EntryType.GetHashCode() : 0);
            result = (result*397) ^ (Location != null ? Location.GetHashCode() : 0);
            result = (result*397) ^ (QueLineId != null ? QueLineId.GetHashCode() : 0);
            result = (result*397) ^ (DateTime != null ? DateTime.GetHashCode() : 0);
            result = (result*397) ^ (SequenceNo != null ? SequenceNo.GetHashCode() : 0);
            result = (result*397) ^ (OperatorInitials != null ? OperatorInitials.GetHashCode() : 0);
            result = (result*397) ^ Amount.GetHashCode();
            result = (result*397) ^ (MsgInfo != null ? MsgInfo.GetHashCode() : 0);
            result = (result*397) ^ RecordExpired.GetHashCode();
            result = (result*397) ^ (RecordUpdated != null ? RecordUpdated.GetHashCode() : 0);
            result = (result*397) ^ (Details != null ? Details.GetHashCode() : 0);
            return result;
        }
    }

    public static bool operator ==(PaymentMessageHistory left, PaymentMessageHistory right)
    {
        return Equals(left, right);
    }

    public static bool operator !=(PaymentMessageHistory left, PaymentMessageHistory right)
    {
        return !Equals(left, right);
    }

    public override string ToString()
    {
        return string.Format("PaymentMessageHistoryId: {0}, EntryType: {1}, Location: {2}, QueLineId: {3}, DateTime: {4}, SequenceNo: {5}, OperatorInitials: {6}, Amount: {7}, MsgInfo: {8}, RecordExpired: {9}, RecordUpdated: {10}, Details: {11}", PaymentMessageHistoryId, EntryType, Location, QueLineId, DateTime, SequenceNo, OperatorInitials, Amount, MsgInfo, RecordExpired, RecordUpdated, Details);
    } 
```

我经历了这个[NHibernate 需要很长时间来运行查询](https://stackoverflow.com/questions/2273010/nhibernate-taking-a-long-time-to-run-query)，但对我不起作用。

请帮忙！

问候， 米林德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T04:04:20.157

```
public class OracleDataClientDriver2 : OracleDataClientDriver
{
    protected override void InitializeParameter(IDbDataParameter dbParam, string name, SqlType sqlType)
    {
        switch (sqlType.DbType)
        {
            //Timestamp columns not indexed by Oracle 11g date columns. - Use Date 
            case DbType.DateTime:
                base.InitializeParameter(dbParam, name, SqlTypeFactory.Date);
                break;
            default:
                base.InitializeParameter(dbParam, name, sqlType);
                break;
        }
    }
} 
```

并更改 connection.driver_class = nameSpace.OracleDataClientDriver2, AssemblyName 的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T04:30:08.617

一种比继承 oracle 驱动程序类更简单的解决方案是在您的属性中添加类型属性，值将是“日期”。这是 NHibernate 类型。

```
<key-property name="TransactionDate" type="Date" column="TRN_DATE" /> 
```

# ios - 连接错误插座

> ID：11998649
> 
> 赞同：0
> 
> 时间：2012-08-17T01:24:16.150
> 
> 标签：ios, xcode, class, object, connection

我无法在我的类中创建任何对象连接，有什么方法可以查看对象在我的类中是如何连接的？Xcode 给了我这个错误：

```
*** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<VistaInicio 0x68879e0> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key myButton. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T04:24:56.957

课堂上没有`myButton`插座`VistaInicio`。然而，某些 xib 中的某些东西已连接到它（可能在您移除此插座之前已连接）。您需要检查您的 Interface Builder 文件并删除断开的连接。

# uitableview - 需要显示 iPhone 通讯录联系人的方法

> ID：11998650
> 
> 赞同：0
> 
> 时间：2012-08-17T01:24:23.330
> 
> 标签：uitableview, abaddressbook, abpeoplepickerview

我一直在关注许多示例，以将地址簿功能添加到我的一个视图中。我在地址簿 API、ABPeoplePickerNavigationController 以及如何将它们放入 UITableView 之间绊倒了。我非常困惑我需要在我的故事板上放置哪些控件才能使整个事情正常工作。

我需要的是：

*   姓 名（在表格视图显示中）以及图像图标（所有联系人都相同）
*   电话号码（需要但不一定要显示）
*   单击单个单元格时，它应该显示一个弹出框，在弹出菜单中提供一定数量的选项（但联系人表格视图不应随着弹出框消失）

谁能指出我实现这一目标的确切例子？可以选择实现的 XCode 步骤也将受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T02:12:01.027

我相信您对 AddressBook API 的工作方式有些困惑。

有一个苹果开发者参考，其中有一个很好的例子来说明如何使用 API。

我已将其链接到此处[Apple QuickContact 参考](http://developer.apple.com/library/ios/#samplecode/QuickContacts/Listings/Classes_QuickContactsViewController_m.html)

总之，您可以将您希望在 tableview 上显示的某些数据预加载到 NSArray 中。然后在 UITableView`didSelectRowAtIndexPath`调用相应的方法来推送另一个视图控制器进行显示。

希望能消除你的疑惑。

# xcode4 - XCode 命令行工具项目中没有 Executables 组？

> ID：11998651
> 
> 赞同：0
> 
> 时间：2012-08-17T01:24:27.297
> 
> 标签：xcode4, exc-bad-access

我将项目创建为：文件->新建->项目并选择“命令行工具”。

我想使用“NSZombieEnabled”来处理 exec_bad_access 问题。-- [LINK](http://cocoadev.com/wiki/NSZombieEnabled)

但我在我的项目中找不到所谓的“可执行文件组”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:50:41.977

好的，在 XCode4 中，您可以通过以下方式设置“NSZombieEnabled”YES：

```
Edit Scheme->Arguments->Environment variables 
```

希望这有帮助

# ruby-on-rails - Rails：方法在 for 循环中工作，而不是在它之外

> ID：11998654
> 
> 赞同：0
> 
> 时间：2012-08-17T01:24:54.293
> 
> 标签：ruby-on-rails, image, loops

这可能需要一些解释，所以请多多包涵。

我正在尝试访问使用 Paperclip 存储的 Rails 中的图像。图像可以完美地`for`循环访问，因此：

```
for a in @issue.articles
  image_tag a.image.url
end 
```

请注意`@issue`没有文章方法；我不确定为什么会这样。但是，它确实有`article1`、`article2`和`article3`; 并且每个都有问题的图像。

如果我尝试使用此代码访问循环外的图像，则会失败，因此：

```
image_tag @issue.article1.image.url 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T01:34:51.453

我相信正确的方法是

```
@issue.articles.first.image.url 
```

或为他们每个人

```
@issue.articles[0].image.url
@issue.articles[1].image.url
@issue.articles[2].image.url 
```

# actionscript-3 - 碰撞检查和删除敌人的问题

> ID：11998657
> 
> 赞同：0
> 
> 时间：2012-08-17T01:25:25.043
> 
> 标签：actionscript-3, actionscript

我遇到的问题是，当我的玩家用他的盾牌与敌人碰撞时，它应该只摧毁敌人。相反，它会删除我阵列中的所有敌人。调用来移除敌人的函数在其他地方使用并且可以正常工作。

这是碰撞检查功能：

```
function collisionCheck(){
enemyLoop :for(var i:int = level.enemies.length-1; i>=0; i--){
if(!shield){
        removeEnemy(i, true);
        removePlayer();
        return;
    }
    else{
        removeEnemy(i, false); //This is what is called when I get this issue
        return;
    }
} 
```

移除敌人功能：

```
public function removeEnemy(enemyNum:int, playerDown:Boolean){
if(!playerDown){
    killsMade++;
    if(level.levelObjects.contains(level.enemies[enemyNum].healthBar)){
        level.levelObjects.removeChild(level.enemies[enemyNum].healthBar);
    }
    level.enemies[enemyNum].enemyHit(true);
    level.enemies[enemyNum].gotoAndPlay("Explosion");
    explodedEnemyNum = enemyNum;
    playExplosionSound();
    explosionDone();
} 
```

这是删除敌人精灵的功能

```
public function explosionDone(e:TimerEvent){
    stopExplosionSound();
    if(level.enemies[explodedEnemyNum] != null){
    level.levelObjects.removeChild(level.enemies[explodedEnemyNum]);
        level.enemies.splice(explodedEnemyNum, 1);
    }
} 
```

感谢您的帮助，如果您还需要什么，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T20:45:18.143

此问题已得到纠正。问题在于我的碰撞检查和爆炸完成功能。由于敌人是在爆炸动画之后才被移除的，所以它仍然会进入碰撞循环。我通过在 removeEnemy 函数中立即移除敌人来纠正这个问题。

# javascript - 浏览并从用户硬盘中选择文件在 IE 中未定义

> ID：11998664
> 
> 赞同：2
> 
> 时间：2012-08-17T01:26:37.090
> 
> 标签：javascript, html, dojo

当我使用输入按钮浏览用户计算机上的文件时，它适用于 FF、IE9 和 Chrome。但是当我将文件传递给 IE9 中的 JS 函数时，我得到了未定义，而它在 FF 和 Chrome 中完美运行。

```
 <form id="uploadForm" style='display:none;padding:1px;' method="post" enctype="multipart/form-data">
 <input type="file" name="data" id="inFile" size="15" style="display:none" onchange="handleFiles(this.files)"/>

function handleFiles(files){
//doing something with the files
}

 //In IE files is undefined 
```

我也尝试过使用

```
 dojo.connect(dojo.byId("uploadForm").data, "onchange", function(evt){
        handleFiles(this.files);
    });

<form id="uploadForm" method="post" enctype="multipart/form-data">
<input type="file" name="data" id="inFile" size="15" style="display:none"/> 
```

this.files 再次未定义

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T21:24:55.870

IE9不支持多文件上传，没有`files`属性。您将不得不依赖`value`属性并从它提供的路径中解析文件名。

我的解决方案：

1.  传递`this`而不是`this.files`进入`handleFiles()`函数：

    ```
    <input type="file" onchange="handleFiles(this)"> 
    ```

2.  像这样开始你的`handleFiles()`功能：

    ```
    function handleFiles(input){
        var files = input.files;
        if (!files) {
            // workaround for IE9
            files = [];            
            files.push({
                name: input.value.substring(input.value.lastIndexOf("\\")+1),
                size: 0,  // it's not possible to get file size w/o flash or so
                type: input.value.substring(input.value.lastIndexOf(".")+1)
            });
        }

        // do whatever you need to with the `files` variable
        console.log(files);
    } 
    ```

请参阅 jsFiddle 的工作示例：http: [//jsfiddle.net/phusick/fkY4k/](http://jsfiddle.net/phusick/fkY4k/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T19:04:55.723

很明显，文件没有在 IE 中定义。请参阅[此处](https://stackoverflow.com/questions/5000950/ie-input-file-problem)了解如何使用 IE 进行操作。

# iphone - PhoneGap w/VisualStudio for iPhone/iPod touch

> ID：11998668
> 
> 赞同：4
> 
> 时间：2012-08-17T01:27:21.477
> 
> 标签：iphone, windows, cordova

有没有办法在 Windows 机器上开发 iPhone 应用程序？

我在想应该有一种方法使用 phonegap 和新的云构建[https://build.phonegap.com/](https://build.phonegap.com/)

但是，我不知道如何开始！

我想使用 Visual Studio 2010 Express 作为我的 IDE，但实际上，这不是必需的。但我确实需要能够在 Windows 机器上执行此操作。

我可以找到解释如何为 windows phone 开发执行此操作的文章，但对于 iPhone 却没有……令人震惊。

更新：我找到了这个。 [http://nickalchemist.wordpress.com/iapproach-mobile-development-made-elegant/deploying-to-iphone-without-a-mac-with-an-apple-developer-account-and-phonegap-build/](http://nickalchemist.wordpress.com/iapproach-mobile-development-made-elegant/deploying-to-iphone-without-a-mac-with-an-apple-developer-account-and-phonegap-build/)

因此，一旦我弄清楚如何开发这个应用程序，我应该能够构建它。

现在我只需要了解如何创建一个 PhoneGap 应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T16:06:59.583

要免费为 iOS (ipa) 构建您的应用程序文件，请使用 Sencha Touch 构建工具

然后将您的应用程序部署到没有 Apple App Store 的设备上，使用 iTunes 并将您的应用程序同步到它。

[找到更多](http://www.sencha.com/products/touch/features/)

在不支付 99 美元的开发人员许可的情况下分发您的应用程序可能会更加棘手，因为您需要生成一个签名的临时或应用商店分发配置文件。ad hoc 配置文件让您可以将您的应用程序发送给随机的人（最多 100 个），而应用程序商店配置文件适用于世界其他地方。

如果这变得令人困惑，请不要灰心 - 它是！但这是可以完成的。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T18:18:05.930

你实际上必须有一个mac和xcode。之后你选择对它们做什么取决于你（在某种程度上，苹果可能会拒绝一个完全空的 xcode 项目）。您也可以获取企业许可证（我认为价格昂贵），然后在没有 App Store 的情况下自行分发 iOS 应用程序。

我假设这条路不会发生。我知道最后你需要一个 mac 才能发布到应用商店。但是，您可以使用 .net 和单声道进行开发：[http ://www.mono-project.com/Main_Page](http://www.mono-project.com/Main_Page)

有一段时间，苹果禁止交叉编译使用 flash 和 mono 制作的应用程序，但我相当确定现在可以了。唯一的问题是你仍然需要一个mac。对于 hackintosh 是否可以接受，我听到了褒贬不一的评价。听起来你可能会通过。我听说你至少需要雪豹，但糟糕的司机支持会让你每天痛苦 8 小时： http://news.ycombinator.com/item?id= [2600742](http://news.ycombinator.com/item?id=2600742)

关于您关于如何获得 99 美元的问题，我记得能够为模拟器进行部署。我无法部署到我的 iOS 设备（我相信），但我遇到了其他问题。通过一些软件升级并设置正确的密钥并支付 99 美元，他们都得到了神奇的解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T13:21:36.173

Windows 用户可以使用[Phonegap Build](https://build.phonegap.com/)进行开发，并在模拟器（Blackberry/Android/WinPhone7）或 Android 设备（将其指向 Phonegap QR 码）上进行测试。一旦你确信它可以工作，支付 25 美元注册为 Android 开发者，然后将你的应用上传到 Google Play 商店。这很容易。您需要的证书是使用 Java 免费提供的命令行工具构建的。

使用这种经验来磨练您的应用程序，并获得有关一般发布过程的智慧。然后，当您真正准备好时，您可以支付更大的费用并进行更复杂的过程：Apple。

注册为 iOS 开发者只需 99 美元，使用免费的[Mobundler](https://www.mobundler.com/ios)服务来创建证书（因为你没有 Mac，而且在 Windows 上做这件事非常复杂）。然后您可以在您（或朋友的）iPhone/iPad/iPod touch 上进行测试。您只需告诉 Apple 您要测试的设备的设备 ID，然后使用 QR 码将该人发送到您的 Phonegap Build 页面。（或者您可以从 Phonegap 下载文件并将其放在 iTunes 应用程序文件夹中以同步到设备？）

当您对它在 iPhone 上正常运行感到满意时，您需要访问拥有 Mac 的朋友几个小时，然后使用“应用程序加载器”软件将应用程序发送到 Apple 以在 App Store 中发布。填写表格比谷歌要复杂一些。

以这种顺序做事可以节省你花钱直到你真正需要的时候，你首先采取简单的步骤来熟悉所有的概念。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T13:26:55.287

如果你真的只是在寻找一个环境来构建和测试你的 hello world 应用程序，为什么不试试[PhoneGap Build](http://build.phonegap.com/)呢？他们在线构建您的应用程序，您可以从那时起通过 iTunes 下载和安装它（或者至少这是我的理解）。

# linux - linux bash脚本在第一次出现字符后剪切字符串

> ID：11998680
> 
> 赞同：0
> 
> 时间：2012-08-17T01:28:38.747
> 
> 标签：linux, bash

我正在尝试获取“screen -list”中所有进程的名称

不幸的是，我已经在循环中失败了，因为

```
for PLINE in `screen -list | grep 'tached)'`; do
    echo "$PLINE"
done 
```

输出

```
3698.processname
(16/08/12
12:59:37)
(Detached) 
```

但我的预期输出是

```
 3698.processname    (16/08/12 12:59:37)    (Detached) 
```

就像直接输入`screen -list | grep 'tached)'`控制台时一样。

如果这个循环可以工作，我试图做的是使用`cut -d '.' -f 2`然后在找到第一个空格之后切断结果字符串。（我还不太清楚该怎么做，我所知道的只是一些东西`%' '`）

所以，我认为很明显我在 bash 脚本中没有太多线索，因此我愿意接受更优雅的建议来做我想做的事情。

（编辑）解决方案：

```
for PLINE in `screen -list | grep 'tached)' | awk -F '[ \t\n\v\r.]' '{print $3}'`; do
    echo $PLINE
done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T01:32:00.930

```
$ awk -F '[ \t\n\v\r.]' '{print $2}' <<< $'3698.processname    (16/08/12 12:59:37)    (Detached)'
processname 
```

但是没有必要将 grep 输入到 awk 中；只需让 awk 匹配正则表达式本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T01:37:40.820

如果你想要的只是名字，那么让我们抓住它而不是整行。

```
# screen -list
There are screens on:
    85384.ttyv3.filer0  (Attached)
    85617.another   (Detached)
    57491.pts-0.filer0  (Dead ???)
Remove dead screens with 'screen -wipe'.
2 Sockets in /tmp/screens/S-root.

# screen -list | awk '/ched/{split($1,a,".");print a[2]}'
ttyv3 another
# 
```

你想要它在一个变量中？一个for循环？

```
# read names <<<$(screen -list | awk '/ched/{split($1,a,".");print a[2]}')
# echo $names
ttyv3 another
# for name in $names; do echo "name=$name"; done
name=ttyv3
name=another
# 
```

当然，您可以使用纯 bash 避免大部分噪音：

```
screen -list | while read name status; do
  if [[ $status =~ ched ]]; then
    echo "${name#*.}"
  fi
done 
```

这可能是您最好的解决方案，因为它不依赖于任何外部工具，如 awk 或 grep。它将更便携、更快、资源消耗更少。

# multithreading - 如果程序受内存限制，并行化对性能有多大帮助？

> ID：11998681
> 
> 赞同：1
> 
> 时间：2012-08-17T01:28:52.850
> 
> 标签：multithreading, performance, optimization, parallel-processing, memory-bandwidth

我并行化了一个 Java 程序。在具有 4 核的 Mac 上，以下是不同线程数的时间。

```
threads #   1         2          4           8          16
time 2597192200 1915988600  2086557400  2043377000  1931178200 
```

在具有两个套接字的 Linux 服务器上，每个套接字有 4 个内核，下面是测量的时间。

```
threads #   1         2          4           8          16 
time 4204436859 2760602109  1850708620  2370905549  2422668438 
```

如您所见，加速比远离线性加速。在这种情况下，几乎没有并行化开销，例如同步或 I/O 依赖性。

我有两个问题：

1.  这些数据是否意味着这个 Java 程序是内存受限的？
2.  如果是这样，有没有办法在不改变硬件的情况下进一步提高性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T01:34:31.360

好吧，它们暗示该算法不受 CPU 限制。它可能受其他东西的约束——它可能是内存、I/O 或其他东西，但它可能不受 CPU 限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T05:31:43.790

## 回答标题问题

[阿姆达尔定律](http://en.wikipedia.org/wiki/Amdahl%27s_law)解释说，程序并行化所获得的加速取决于程序中有多少是可并行化的。

而且我们还必须增加协调并行性的开销。

因此，我们考虑程序的哪些百分比/部分是可并行化的，以及产生了哪些开销（同步、通信、错误共享等）。

## 读取内存是否可并行化？

### 从硬盘

您可以同时从 2 个不同的硬盘驱动器读取数据而不会减慢速度。

但是，通常并行性并不能加快从硬盘读取的速度。

硬盘驱动器（即带有旋转磁盘的驱动器）已经过优化，可以按顺序读取，在内存位置之间跳转会减慢整体内存传输速度。

固态驱动器实际上非常擅长随机访问数据，在内存中到处跳跃，因此使用固态驱动器保持读/写队列满是个好主意。

### 从 RAM 和缓存

理解缓存线的概念将有助于避免错误共享。

这种类型的内存操作可以有效地并行化，例如通过将数组划分为四个分区来迭代数组。

## 你的问题

我假设您的时间以纳秒为单位，因此在计算机 1 上，该程序花费了 2.5 秒，然后稳定到大约 2 秒，峰值为 1.9 秒。

我希望您同时运行的后台程序最少，并且您执行了几次这些测试以消除违规行为。

此外，由于 Java 虚拟机的即时编译 (JIT) 可能会导致时间不规则，因此要准确计时，您需要在循环中运行代码几次，并存储最后一次迭代的时间. （或预编译为本机代码）。

此外，由于第一次运行程序，硬盘驱动器中使用的大部分数据将被移动到缓存中，因此以后的执行应该更快。（因此，要么使用循环后最后一次运行的时间来确保内存在缓存中，要么使用第一个时间，但在时间之间关闭并打开计算机）。

### 程序是否有内存限制？

仅根据您的时间安排，这很难说。

第一台计算机用了 2.5 秒，然后用 2 个线程加速了 20%，但随后保持在 2.0 秒左右。

就其本身而言，这种加速可能只是 JIT 和缓存内存被 1 个线程上的时间填充的结果。在那之后，运行时的任何差异都可能只是噪音。

第二台计算机花了 4.2 秒，然后是 2.8 秒，然后是 1.9 秒，然后又回到了大约 2.3 秒。

这似乎证明了某种类型的并行加速，但是会发生一些争用时间（内存、缓存线、同步等），时间从 4 个线程增加到 8 个线程就证明了这一点。

## 有什么方法可以提高性能？

对代码使用分析器，确定代码的哪些部分占用的时间最多。

（您可以通过调试代码并中断并查看程序在哪里来模拟分析器。重复该操作 10 次，以查看是否有一个部分比另一个部分按比例停止。）

使用更好的算法或以更好的方式排列内存中的数据（数据结构）来解决问题。

在问题中利用更多的并行性。

尝试使硬盘内存读取顺序。也许只有一个线程从硬盘驱动器读取数据，然后将数据放入并发队列中，以供其他线程操作。

# jquery-mobile - jquery mobile 固定页脚随页面滚动

> ID：11998685
> 
> 赞同：3
> 
> 时间：2012-08-17T01:29:26.873
> 
> 标签：jquery-mobile

我正在尝试在我的网站上实现固定页脚。

我的问题是，当我滚动页面时，页脚与内容重叠。滚动完成后，它会回落到底部。这是标准行为吗？

[我检查了这个链接](http://jquerymobile.com/demos/1.0/docs/toolbars/bars-fixed.html)。它适用于桌面浏览器。IE。页脚保持固定在滚动状态。但在移动设备（android）上它会随着页面滚动。我可以让它真正修复吗？

编辑：添加了 HTML

```
<div data-role="footer" data-iconpos="left"  data-id="jefooter" data-theme="b" data-position="fixed" data-tap-toggle="false">
    <div data-role="navbar">
        <ul>
            <li>
                <a href="/welcome" data-icon="jehome" data-iconpos="notext" data-direction="reverse" data-ajax="false">Home</a>
            </li>
            <li>
                <a href="/mobile/users/settings" id="user_auth" data-icon="jesettings" data-iconpos="notext" data-transition="fade" data-ajax="false">My Settings</a>
            </li>
            <li>
                <a href="/mobile/help" data-icon="jehelp" data-iconpos="notext" data-transition="fade" data-ajax="false">Help</a>
            </li>
        </ul>
    </div>
</div> 
```

您可以在 m.qa.hungryzone.com 上查看该页面

编辑2：

安卓版本为 2.3.5

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T08:33:57.100

我通过更换来修复它

```
<meta name="viewport" content="width=device-width, initial-scale=1" /> 
```

和

```
<meta name="viewport" content="user-scalable=no,width=device-width" /> 
```

在 html 的标题中

并通过向页脚添加一个新类以及 data-role='footer'

```
.footer {
    position: fixed;
    z-index: 10;
    bottom: 0;
    width: 100%;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T09:14:54.130

不幸的是，这似乎是 jQuery Mobile 在运行 Android 2.3.5 - 2.3.6 的设备上存在的错误。

jQuery Mobile 的人指责谷歌：

> ...这似乎有点昙花一现——谷歌似乎在以后的版本中修复了 Android 的回归，但随着所有 Android 问题的发生，它并不清楚或一致。

可以在此处找到打开的错误报告和更多详细信息： [https ://github.com/jquery/jquery-mobile/issues/4281](https://github.com/jquery/jquery-mobile/issues/4281)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T01:43:40.273

您使用的是最新版本的 jQuery Mobile 吗？它仍然不完美，但比旧版本更好。这是最新的（1.2.0 alpha）...

[http://jquerymobile.com/blog/2012/08/01/announcing-jquery-mobile-1-2-0-alpha/#download](http://jquerymobile.com/blog/2012/08/01/announcing-jquery-mobile-1-2-0-alpha/#download)

**编辑**

您可以停止使用 jQuery Mobile 固定页脚并将此类添加到您的页脚：

```
.custom-fixed-footer {
position: fixed !important;
left: 0px !important;
right: 0px !important;
bottom: 0px !important;
z-index: 999 !important;
} 
```

# php - PHP MYSQL 消除表格中的逗号

> ID：11998693
> 
> 赞同：0
> 
> 时间：2012-08-17T01:30:41.390
> 
> 标签：php, mysql, arrays, explode, implode

tb1

```
-----------------
id | codetb1
-----------------
1  | code1,code2
2  | code2,code3 
```

* * *

tb2

```
-----------------
codetb2 | cost
-----------------
code1   | $20
code2   | $40
code3   | $60 
```

* * *

save.php -> 这就是我将复选框值插入数据库的方式。

```
$codetb1 = $_POST['codetb1'];
var_dump($codetb1);

// Setting up a blank variable to be used in the coming loop.
$allStyles = "";
// For every checkbox value sent to the form.
foreach ($typeocodetb1fvisit as $style) {
    // Append the string with the current array element,
    // and then add a comma and a space at the end.
    $allStyles .= $style . ", ";
}
// Delete the last two characters from the string.
$allStyles = subs

tr($allStyles, 0, -2); 
```

* * *

Result.php -> 这是我的连接以及如何获得结果

```
$query="SELECT * FROM tb1, tb2 WHERE
  tb1.codetbl1 = tb2.codetbl2 AND
  tb1.id='$id'"; 
```

* * *

大家好-非常感谢您的帮助。我有 2 个数据库（表 1 和表 2）。我希望将 2 个数据库相互链接。我很难做到这一点。例如，我尝试爆炸，但我无法使其工作。

那么我怎样才能摆脱 codetb1 中的逗号并找到与 codetb2 匹配的方法。所以最后我可以得到成本。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T01:45:44.920

首先，不涉及更改架构的答案：

MySQL 的[FIND_IN_SET](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)函数：

```
SELECT * 
FROM tb1, tb2 
WHERE FIND_IN_SET(tb2.codetb2, tb1.codetb1); 
```

但是，理想的解决方案是规范化模式（如果时间允许，我将提交另一个包含更多详细信息的答案）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T02:03:08.093

# 规范化模式

在我看来，这个问题的唯一“真正”答案是使用规范化模式对域进行建模。具体来说，我们永远不应该让一列存储超过一条数据。我们用来描述您的域的术语是存在**多对多关系**，其中 tb1 中的一行与 tb2 中的许多行相关，而 tb2 中的一行可以与 tb1 中的许多行相关。目标架构将如下所示：

tb1

```
---------
id | ...
---------
1  | ...
2  | ... 
```

* * *

tb2

```
----------
id | cost
----------
 1 | $20
 2 | $40
 3 | $60 
```

* * *

tb1_tb2

```
-----------------
 tb1_id | tb2_id 
-----------------
    1   |    1
    1   |    2
    2   |    2
    2   |    3 
```

然后，您选择它们​​的方式取决于您想要什么。这里有些例子：

tbl1 中每一行的最高和最低“成本”：

```
SELECT tb1.name, MIN(tb2.cost) as low, MAX(tb2.cost) as high
FROM tb1 
  JOIN tb1_tb2 ON tb1.id = tb2.tb1_id
  JOIN tb2_ON tb1_tb2.tb2_id = tb21.id
GROUP BY tb1.name 
```

tb1 中行的成本总和：

```
SELECT tb1.name, SUM(tb2.cost) as total
FROM tb1 
  JOIN tb1_tb2 ON tb1.id = tb2.tb1_id
  JOIN tb2_ON tb1_tb2.tb2_id = tb21.id
GROUP BY tb1.name 
```

这个想法是对每个“事物”进行完整而清晰的建模；诀窍是将 tb1 和 tb2 之间的每个关系视为不同的“事物”（即每个关系在 tb1_tb2 中都有一行；该关系是规范化模式中的全类公民）

一旦您将关系视为一个不同的实体，插入就相当简单。如果您有一个 tb1 和一个 tb2 想要关联，只需将拖曳添加到 tb1_tb2 及其 id 即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T01:40:47.790

试试这个：

> ```
> $query="SELECT * FROM tb1, tb2 WHERE
> `tb1.codetbl1` LIKE concat('%', concat(`tb2.codetbl2`, '%')) AND
> tb1.id='$id'"; 
> ```

编辑：如果代码可以获得多于一位的数字（如 code10、code11），这会导致一些问题。你不应该去掉最后一个逗号，并使用：

> ```
> $query="SELECT * FROM tb1, tb2 WHERE
> `tb1.codetbl1` LIKE concat('%', concat(`tb2.codetbl2`, ',%')) AND
> tb1.id='$id'"; 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T01:43:42.847

table2 可能有一个 table_id 列，然后您的查询将是

```
$query="SELECT * FROM tb1, tb2 WHERE
tb1.codetbl1 = tb2.tb1_id AND
tb1.id='$id'"; 
```

根据您的问题，我认为它就像您正在尝试构建的购物车，因此您应该拥有这样的表格。

```
//table customer_cart
 -------------------------
 | id|item_code|customerid|
 -------------------------
 |1  |itemcode1|1         |
 --------------------------
 |2  |itemcode2|1         |
 -------------------------- 
```

然后是项目表

```
 ---------------
 | id|price    |
 ---------------
 |1  |$30      |
 ---------------
 |2  |$60      |
 --------------- 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T01:45:58.547

您可以使用以下方法连接两个表`FIND_IN_SET()`：

```
SELECT a.id, b.cost
FROM   tb1 a
JOIN   tb2 b ON FIND_IN_SET(b.code, a.codetb1) > 0 
```

# android - 在网格视图上拖放图像阴影？

> ID：11998694
> 
> 赞同：1
> 
> 时间：2012-08-17T01:30:53.393
> 
> 标签：android

我正在尝试制作一个android应用程序，如果您在gridview中拖动图像，则要克隆的图像会用手指移动到其他位置。我怎么能做到这一点？. 我从[这里](http://www.edumobile.org/android/android-beginner-tutorials/drag-and-drop-ui-element/)看到了代码，但无法理解如何将其转换为网格视图。

[在这里](http://www.youtube.com/watch?v=QEOpHg7ZMNk)找到了另一个教程但仍然无法弄清楚如何为网格视图更改它......任何建议或帮助......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T04:53:14.860

试试这个。

[http://blahti.wordpress.com/2012/03/03/improved-drag-drop-for-gridview/](http://blahti.wordpress.com/2012/03/03/improved-drag-drop-for-gridview/)

# bash - Bash Echo 转义序列

> ID：11998695
> 
> 赞同：2
> 
> 时间：2012-08-17T01:30:55.390
> 
> 标签：bash, shell, scripting, centos

我正在尝试在 CentOS 中编写一个 bash 脚本来测试各种回声转义序列。但是，当我运行程序时

> ./test.sh 一个

我不断收到此错误消息：

> 错误的解释：没有这样的文件或目录

这是脚本：

```
#! /bin/bash

# Test echo escape sequences

input=$1

case $input in
   a ) echo -e "\a" testing \a;;
   b ) echo -e "\b" testing \b;;
   c ) echo -e "\c" testing \c;;
   * ) echo Incorrect input
   exit 1;;
esac 
```

我哪里做错了？

编辑：我在 Windows XP 主机上的 VirtualBox 中运行 CentOS Minimal 来宾

编辑2：

```
 #! bin/bash 
```

在我的剧本里，不是

```
#! /bin/bash 
```

当我将其更改为

```
 #! /bin/bash 
```

并运行程序./test.sh a，它只打印“a”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T01:44:53.777

[编辑] 根据原帖，这通常是由 DOS LINE ENDINGS 引起的。

CR/LF DOS 行尾中的 CR 被解释器视为应该用于执行脚本的 shell 的一部分。

因此，它尝试加载不存在的 /bin/bash(CR)，因此显示“错误解释器”。

纠正此问题的一种简单方法是将脚本的内容复制到剪贴板，然后：

cat > test.sh（粘贴剪贴板）（按 ENTER）（按 CTRL-D）

这将删除任何不正确的行尾（还有其他方法可以做到，但这是一个非常简单/直接的解决方案。

* * *

一旦“错误解释器”问题得到解决，脚本中的另一个语法错误是在您可能打算使用“\a”时使用“\a”。

* * *

[编辑] 我想我现在明白你的意思了。试试这个：

echo -e '\a' 测试 '\\'a

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T01:34:20.580

您是否使用类似的东西使脚本可执行

```
 chmod 755 test.sh 
```

**添加**

我想知道问题的一部分是否是您使用的转义序列，因为它们可能意味着 \a=cursor up \b=cursor down \c=cursor forward。

或者也解释为 \a=SOH 标题开始 \b=STX 文本开始或 \c=ETX 文本结束

# javascript - 在 Javascript 中匹配几种不同的电子邮件地址格式

> ID：11998708
> 
> 赞同：1
> 
> 时间：2012-08-17T01:34:06.797
> 
> 标签：javascript, regex, email-validation

我们希望允许人们将电子邮件地址粘贴到我们的应用程序中的几种不同格式，它们是：

```
1\. foo@bar.com
2\. "Foo Bar" <foo@bar.com>
3\. Foo Bar <foo@bar.com> 
```

是否有一个好的 Javascript 正则表达式可以采用这 3 个中的任何一个并给出电子邮件地址以及主要名称（如果存在）？这些似乎是用户当前复制/粘贴到应用程序中的格式（我们现在只支持第一个）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T02:44:17.593

我想我可能得到了什么！它肯定可以改进，但在你开始建议更改之前，请给我一点时间来捍卫它。这是正则表达式：

```
/^(?:("{0,1})(\w+ \w+)\1 <([^@ ]+@[^@ ]+\.[^@. ]+)>|([^@ ]+@[^@ ]+\.[^@. ]+))$/ 
```

让我解释一下它的作用。第一个`^(?:`表示文本必须从字段的开头开始，并且不会在反向引用中捕获下一组。然后我们开始一个可选项目。必须这样做，因为我们需要 0 或 2`"`以及 0 或 2`<`标记。可选项目的第一部分（`|`栏之前）处理案例 2 和 3。

**案例 2 和 3：**

`("{0,1})`捕获开头是否有引号。然后我们使用`(\w+ \w+)`来要求名字和第二个名字，用空格分隔，在案例 2 和 3 中。它们周围的括号将它们捕获到反向引用中，以便您稍后可以获取名称的值。然后是`\1`- 这是前面引号中的反向引用。它说如果您在名称的开头使用引号，则您也必须在名称的末尾使用它们。接下来，`<`表示情况 2 和 3 中的电子邮件地址必须用空格与名称或结束引号分隔，并且必须以小于号开头。最后，我们有了电子邮件的正则表达式！这对所有情况都是一样的。它被括号包围以创建反向引用。这`[^@ ]+@`确保它在实际 @ 符号之前不能有 @ 符号或空格。以下`[^@ ]+\.`对 @ 符号后的句点执行相同操作，尾随`[^@. ]+`确保句点后也是如此。然后我们有一个右括号来结束对电子邮件地址的反向引用，还有一个`>`符号，因为这仍然适用于需要一个的情况 2 和 3。

**情况1：**

然后我们到达`|`管道，它表明我们已经到达了正则表达式中的另一个选项。如果文本格式与案例 2 和案例 3 的打开条件不匹配，则正则表达式会检查它是否只是一个普通的电子邮件地址（案例 1）。此处的正则表达式与情况 2 和 3 中符号之间的正则表达式相同`<>`- 它匹配有效的电子邮件地址并创建反向引用。

## **有效格式：**

Here's an incomplete list of formats that work:

```
foo@bar.com
foo1.foo2@bar.com
foo1.foo2@bar1.bar2.com
Foo Bar <foo@bar.com>
"Foo Bar" <foo@bar.com>
foo bar <site1.site2@test1.test2.com>
"foo bar" <site1.site2@test1.test2.com> 
```

* * *

# [**WORKING DEMO**](http://jsfiddle.net/Snowsickle/zkyEC/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T01:43:39.100

我建议将电子邮件验证简化为此正则表达式：

```
/^(?:([^<]*)<)?([^@]+@[^.@]+\.[^@>]+)>?$/ 
```

还要检查这个非常好的代码谷歌项目来验证电子邮件：[http ://code.google.com/p/isemail/](http://code.google.com/p/isemail/)

[上述正则表达式的现场演示](http://www.rubular.com/r/Qoh1AAGhCI)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T01:39:44.360

这个正则表达式应该在这 3 种情况下抓取电子邮件：

```
/<?(\w+@\w+\.\w+)/ 
```

# asp.net - 从 Web 应用程序向 Windows 应用程序发送击键

> ID：11998709
> 
> 赞同：1
> 
> 时间：2012-08-17T01:34:14.420
> 
> 标签：asp.net, windows, winapi, web-applications

我有一个奇怪的要求，涉及通过基于浏览器的应用程序与旧版 Windows 应用程序集成。

需要发生的事情非常简单，但我不确定这在技术上是否可行。浏览器应用程序将需要通过其窗口名称来定位 Windows 应用程序，然后向其发送一系列击键。

我无法控制 Windows 应用程序（它是第三方），因此不能对其进行任何修改。

强迫用户使用特定的浏览器是不可取的，但如果没有其他方法是可以接受的。

宏观方法也是可以接受的，但某些数据必须来自网络应用程序（可能通过剪贴板）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T02:03:05.593

我已经有一段时间没有看过这种东西了，但 IE 的[浏览器帮助对象](https://en.wikipedia.org/wiki/Browser_Helper_Object)可能是你最好的选择。Adobe 的浏览器内 PDF 阅读器、Flash 等都是 BHO。

# sql - 如何在这样的一对多表中构建（活动记录）查询？

> ID：11998712
> 
> 赞同：2
> 
> 时间：2012-08-17T01:34:25.977
> 
> 标签：sql, ruby-on-rails, activerecord

A`project`有很多`tasks`。A`task`可以由多个 之一处理`users`。例如：

```
Project    Task      By
-------  --------  ------
  P1        T1       U1
            T2       U2
  P2        T1       U3
            T2       U4
            T3       U5
  P3        T1       U1
            T2       U3
            T3       U5
  P4        T1       U1
            T2       U3 
```

如何查询用户处理的项目`count of`中的***最后一个***任务？输出报告预计为：

```
 Task   By   Count
  ----  ----  -----
   T2    U2     1
   T2    U3     1
   T3    U5     2 
```

更新：（对于 Deefours 的评论）：这是我为计算***最后***一项任务所做的工作（但不确定如何获取**By**列）：

```
self.find_by_sql('select task_id, count(task_id) as "count"
from (
        select task_id
        from (
                select * from tasks order by created_at desc
             )
        tasks_sorted 
        group by project_id
     )
latest_tasks 
group by task_id;') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:34:51.547

这是您要查找的查询：

```
SELECT t.task_id, u.user_id, count(*) as "count"
FROM project p
INNER JOIN (
    SELECT project_id, MAX(created_at) as "created_at" FROM task GROUP BY project_id
) last_task ON p.project_id=last_task.project_id
INNER JOIN task t ON t.created_at=last_task.created_at
INNER JOIN users u ON t.user_id=u.user_id
GROUP BY t.task_id, u.user_id 
```

让我知道它是否不起作用，因为我现在无法运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T02:10:19.677

尝试首先进行查询以获取每个项目中的最后一个任务以获得这样的结果集

```
P1    T2
P2    T3
P3    T3 
```

然后通过proyect将原始表与该查询产生的表左连接，任务过滤子查询中Proyect不为NULL的记录，并通过subquery.task，originalTable.User获取count（*）组

**编辑**

我假设 TASK 列中的数字是项目中任务的顺序（如果你在表中存储这个 'T1'、'T2'... 值，你应该考虑将它们更改为 int 值）

此查询将获取每个项目的最后一个任务

```
SELECT project, 
'T' + CAST(MAX(CAST(REPLACE(task, 'T','') AS INT)) AS VARCHAR(3)) AS MaxTask
FROM Tasks
GROUP BY project 
```

然后你必须再次将这个表与任务表加入，以获取用户和组来获取计数

```
SELECT mt.MaxTask, t.User, count(*) Count
FROM Tasks t LEFT JOIN (
    SELECT project, 
    'T' + CAST(MAX(CAST(REPLACE(task, 'T','') AS INT)) AS VARCHAR(3)) AS MaxTask
    FROM Tasks
    GROUP BY project
) AS mt ON t.project = mt.project AND t.task = mt.task
WHERE mt.task IS NOT NULL
GROUP BY mt.MaxTask, t.User 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T06:20:44.087

```
 select task_id, user_id, count(user_id) as "count" from (
   select task_id, user_id from (
     select * from (
        select * from tasks order by tasks.created_at desc
     ) last_tasks group by project_id
   ) tasks_by_users INNER JOIN users ON tasks.task_id = tasks_users.task_id
 ) workload group by task_id, user_id; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T05:27:25.747

使用以下查询：

```
SELECT P.task_id, P.user_id, count(*) as "count"
FROM project p
INNER JOIN task t ON t.task_id = p.task_id
INNER JOIN (SELECT project_id, MAX(created_at) FROM task GROUP BY project_id) l 
            ON  l.project_id = p.project_id
            AND l.created_at = t.created_at
GROUP BY P.task_id, P.user_id 
```

# java - 我们应该对日志进行单元测试吗？

> ID：11998713
> 
> 赞同：35
> 
> 时间：2012-08-17T01:34:26.947
> 
> 标签：java, unit-testing, logging

通常会在代码中看到日志记录功能：

```
public class A {

    private static final Log LOG = LogFactory.getLog(A.class); 
```

和用法：

```
} catch (Exception e) {
    LOG.error(e.getMessage(), e);
    throw e;
} 
```

但我从来没有见过这样的代码的单个单元测试。

当然我会测试抛出异常和异常类型，但是我应该编写测试来检查日志信息吗？我倾向于认为日志记录是系统行为的另一部分，因此在测试中覆盖它是合乎逻辑的。

假设我应该涵盖它，意味着我应该更改我的原始代码以注入模拟日志并检查是否使用预期消息调用了“错误”方法。但是如果我的原始类是服务并且它是由spring实例化的，我应该注入一些记录器以及其他依赖项怎么办？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-17T01:51:10.323

测试日志库不取决于您。但是值得测试的是，当抛出异常时，您的类会在正确的级别记录一条消息。您正在测试的是您的代码使用日志库做正确的事情。

要使上面的代码可测试，请使用依赖注入。这假设记录器实现了一个接口，`ILog`. 您可以将记录器作为构造函数参数传递给类 A。然后测试代码将创建 的模拟实现`ILog`，并将其传递给构造函数。上面的代码中没有显示异常是如何发生的，但可能是通过其他一些依赖对象。所以你也嘲笑它，让它抛出一个异常。然后检查模拟是否`ILog`调用了该`error`方法。也许您想检查它记录的消息，但这可能太过分了，因为这会使测试代码变得脆弱。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-04-24T09:07:31.523

是的，我们应该在日志记录执行所需的操作时测试日志记录。例如，您在某些外部应用程序中有钩子，用于扫描日志以查找某些事件。在这种情况下，您当然希望确保日志记录已完成。

当然，您不想测试每个日志事件，我认为大多数情况下应该只测试 ERROR（而不是全部）。

使用现代日志框架（例如 SLF4j），您可以简单地注入一个自定义处理程序，将事件存储在内存中，然后可以对其进行断言。

我现在想到的有两个：

[SLF4JTesting](https://github.com/portingle/slf4jtesting)：不需要修改日志配置，但需要注入可能导致修改代码的日志工厂。

[SLF4J 测试](http://projects.lidalia.org.uk/slf4j-test)：不如 slf4jtesting 强大，似乎还没有开发，但与现有代码配合得很好。除了用于测试的记录器配置外，没有任何修改。

使用 SLF4J 测试时，断言非常严格并检查整个事件是否相等。在这种情况下，自定义匹配器可能很有趣：

```
public static Matcher<LoggingEvent> errorMessageContains(final String s) {
    return new TypeSafeMatcher<LoggingEvent>() {
        @Override
        public void describeTo(final Description description) {
            description.appendText(" type " + Level.ERROR + " should contain ")
                    .appendValue(s);
        }

        @Override
        protected void describeMismatchSafely(final LoggingEvent item, final Description mismatchDescription) {
            mismatchDescription.appendText(" was type ").appendValue(l)
                    .appendText(" message ").appendValue(item.getMessage());
        }

        @Override
        protected boolean matchesSafely(final LoggingEvent item) {
            return item.getLevel().equals(Level.ERROR)
                    && item.getMessage().contains(s);
        }
    };
} 
```

这仅检查消息是否包含文本，但不检查是否相等。因此，当修改消息以修复错字或提供更多细节时，如果仍然包含基本部分，则测试不会中断。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-10T12:32:35.447

如果日志记录是一项业务需求，并且会提供业务价值（即在发生故障时诊断或分类问题），那么您应该将其视为任何其他需求。因此，您可能应该编写单元测试，而不是验证您的日志库是否工作，而是验证在预期的情况下，您的代码记录了它应该记录的内容。

有关此主题的更多信息：[https ://ardalis.com/logging-and-monitoring-are-requirements](https://ardalis.com/logging-and-monitoring-are-requirements)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-21T07:39:00.663

还有另一种方法：你可以模拟 LogFactory！例如：

```
import junit.framework.Assert;
import mockit.Mock;
import mockit.MockUp;
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.junit.Test;

public class XXXTest {
    class MyLog implements Log {
        public static final String INFO = "info";

        private String logLevel;
        private Object logContent;

        public String getLogLevel() {
            return logLevel;
        }

        public Object getLogContent() {
            return logContent;
        }

        @Override
        public void info(Object o) {
            logLevel = "info";
            logContent = o;
        }

        //Implement other methods
    }

    @Test
    public void testXXXFunction() {
        final MyLog log = new MyLog();
        new MockUp<LogFactory>() {
            @Mock
            public Log getLog(String name) {
                return log;
            }
        };

        //invoke function and log by MyLog
        FunctionToBeTest.invoke();
        Assert.assertEquals("expected log text", log.getLogContent());
    }
} 
```

祝你好运！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-08-14T09:38:01.597

我肯定会考虑对日志场景进行单元测试。测试时，请考虑在代码失败的情况下您需要的信息。如果您遇到实际问题，您希望确信您有足够的信息来找到问题的原因。

避免过多的日志记录，因为在调试时您可能看不到*树林中的木头。*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-17T01:36:50.137

我不会对除了调用您信任的库之外什么都不做的代码进行单元测试。
你信任你的日志库吗？如果测试失败，是因为库中存在错误，还是仅仅因为您没有正确配置库？你*关心*测试配置吗？

# sql - 两个 Access 查询，根据值删除重复记录

> ID：11998716
> 
> 赞同：0
> 
> 时间：2012-08-17T01:34:35.060
> 
> 标签：sql, duplicates

我有两个查询，qFabricate01 和 qFabricate02，唯一的区别在于标记为 Fabricate 的字段。在 q01 中，我使用 Delivery 字段中的日期值，q02 使用 PUDATE 字段中的日期值。我想做的是将两者结合起来，删除包含未来制造日期的行项目的重复行。

例如，在这两个订单上，我只想要制造日期为 8/14 和 8/16 的两个订单项

制造交付 PUDate 通讯

2012 年 8 月 16 日 2012 年 8 月 16 日 2012 年 8 月 22 日 T041317

2012 年 8 月 22 日 2012 年 8 月 16 日 2012 年 8 月 22 日 T041317

2012 年 8 月 23 日 2012 年 8 月 23 日 2012 年 8 月 14 日 T045118

2012 年 8 月 14 日 2012 年 8 月 23 日 2012 年 8 月 14 日 T045118

选择 qOracleOpenOrders.Delivery 作为 Fabricate、qOracleOpenOrders.Delivery、qOracleOpenOrders.Confirmed、qOracleOpenOrders.EntryDate、qOracleOpenOrders.COMMs、qOracleOpenOrders.BuilderKey、qOracleOpenOrders.Room、qOracleOpenOrders.Status、qOracleOpenOrders.PUDate、qOracleOpenOrders.ESO、qOracleOpenOrders. , qOracleOpenOrders.ID, qOracleOpenOrders.Comments, qOracleOpenOrders.Requested, qOracleOpenOrders.Remake, qOracleOpenOrders.LTFAB, qOracleOpenOrders.LTJSD, qOracleOpenOrders.Due FROM qOracleOpenOrders;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T02:29:04.000

好的，所以你只有 2 行，对吗？每个项目编号一个？& 你有 4 行的原因是因为你有查询？我认为答案不是结合这两个查询，而是简单地编写一个查询来决定 Delivery & PUDate 中的哪个值显示为“Fabricate”：

```
SELECT iif(Delivery > Date(), PUDate, Delivery) AS Fabricate, ... (other columns) 
FROM qOracleOpenOrders
[WHERE ...] 
```

这有帮助吗？

# spring - 春季 3 @schedule 问题

> ID：11998718
> 
> 赞同：2
> 
> 时间：2012-08-17T01:34:58.490
> 
> 标签：spring

我有两个应用程序都使用 @Scheduled 注释。两者都有自己的应用程序上下文 xml，其中包含`<task:annotation-driven />`. 现在，当我部署这两个应用程序时，我得到了这个例外

> org.springframework.beans.factory.parsing.BeanDefinitionParsingException：配置问题：上下文中可能只存在一个AsyncAnnotationBeanPostProcessor。

有人可以解释我为什么得到它吗？

提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:37:45.933

甚至我也遇到过这样的问题。但随着`<tx:annotation-driven/>`

我认为问题在于配置xml。经过一些试验和错误方法后，应用程序开始运行。

我已经这样配置了 `<tx:annotation-driven/>`

`<beans xmlns:tx="http://www.springframework.org/schema/tx" xsi:schemaLocation= "http://www.springframework.org/schema/tx" </beans>`

但是在如下更改后，异常得到解决

`<beans xmlns:tx="http://www.springframework.org/schema/tx" xsi:schemaLocation= "http://www.springframework.org/schema/tx
http://www.springframework.org/schema/tx/spring-tx-3.1.xsd" </beans>`

我认为您可以通过像这样配置spring“任务”来解决问题

`<beans xmlns:task="http://www.springframework.org/schema/task" xsi:schemaLocation= "http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.0.xsd" </beans>`

希望这可能会有所帮助，谢谢

# javascript - 如何在 ember (live) 中刷新模板？

> ID：11998719
> 
> 赞同：14
> 
> 时间：2012-08-17T01:35:38.167
> 
> 标签：javascript, ember.js

在开发期间，我想刷新我的车把模板，如果它们是实时保存的。

我已经有一个 websocket 通道，可以在文件保存时通知我。那时我可以通过更新`script`标签上的哈希来强制重新加载特定模板`src`。

如何通知所有使用此模板的视图需要刷新并强制刷新？

（如何找到它们？如何触发刷新？）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T08:11:45.277

**请注意**，这适用于简单模板，但不适用于呈现到插座的模板

做到这一点相当棘手：

```
var js = "template.js";
var templateName = "template";

Ember.TEMPLATES["empty"] = Handlebars.compile("")

// script loaders are the simplest way of getting a callback 
$LAB.script(js).wait(function(){
  $.each(Ember.View.views,function(){
     if(this.get('templateName')==templateName){
       this.set('templateName','empty');
       this.rerender();
       this.set('templateName',templateName);
       this.rerender();
     }
  });
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T03:44:46.603

理论上，你可以做到`Ember.View.views.filterProperty('templateName', nameOfUpdatedTemplate).set('template', Ember.TEMPLATES[nameOfUpdatedTemplate])`。那应该强制重新渲染。

我没有尝试过，也不知道你可能会遇到什么边缘情况，但这将是我能想到的最简单的方法。

# perl - 在哈希数组上使用映射

> ID：11998720
> 
> 赞同：1
> 
> 时间：2012-08-17T01:35:53.207
> 
> 标签：perl, map

我有以下结构：

```
my @fields = (
    {
        "dbId"        => "BabysSex",
        "db2Id"       => "DetSex",
        "name"        => "Baby's Sex",
        "datatype"    => "Text",
        "outputorder" => 5,
        "value" => undef,
    },
    {
        "dbId"     => "HospitalCode",
        "name"     => "Hospital Code",
        "datatype" => "Text",
        "value" => undef,
    },
    {
        "dbId"        => "UniqueIdenifier",
        "name"        => "Unique Identifier",
        "datatype"    => "Text",
        "outputorder" => 7,
        "value" => undef,
    },

); 
```

在将值分配给 each 之后`$filed[$i]->{"value"}`，我需要做一些进一步的处理和扩展。例如，我正在处理的数据集使用数字来表示不同的性别值（例如，1 代表男性，2 代表女性等等）。我可以在 for 循环中扩展它：

```
for ( my $i = 0 ; $i < scalar @fields ; $i++ ) {
   if ( $fields[$i]->{"name"} =~ /sex/i && $fields[$i]->{"value"} )
   {
      $fields[$i]->{"value"} = $SexMap{ $fields[$i]->{"value"}};
   }
} 
```

我想知道的是我是否可以用它`map`来获得相同的结果。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T01:46:08.633

你*可以*，是的，但我不相信这是正确的，而且绝对没有必要。

我将首先将您的代码重写为

```
for (@fields) {
    $_->{value} = $SexMap{ $_->{value} } if $_->{name} =~ /sex/i and $_->{value};
} 
```

效果很好，因为 foreach对数组中的每个元素都有*别名。* `$_`

它可以变成像这样的地图

```
@fields = map {
    $_->{value} = $SexMap{ $_->{value} } if $_->{name} =~ /sex/i and $_->{value};
    $_;
} @fields; 
```

但是您会注意到地图*实际上并没有*在这里做任何事情，它只是添加了代码。

如果您想要地图的原因是在不修改原件的情况下创建副本，那么

```
@newfields = map {
    ($_->{name} =~ /sex/i and $_->{value})
    ? ( { %$_, value => $SexMap{ $_->{value} } } )
    : ( { %$_ } )
} @fields; 
```

它对每个元素做一个浅拷贝（因此地图实际上完成了一些事情），但可能有更干净的方法来完成它。

# javascript - 将处理程序附加到“a”标记上的单击事件，即使我不单击也会触发

> ID：11998721
> 
> 赞同：0
> 
> 时间：2012-08-17T01:35:55.480
> 
> 标签：javascript, jquery

我有这段代码来监听“a”标签的点击：

```
$(document).ready(function () {
    $(document).on("click", $("#addEvent"), addEvent);
});

addEvent: function () {
   alert("Test");
}

<div style="width: 100%; text-align: right;margin-left: -8px; margin-top:-40px;">
   <a id="addEvent" href="#" >
      <span class="t-icon t-add"></span> Add item
   </a>
</div> 
```

当我加载此代码所在的页面时，即使我没有单击“a”标签，也会在页面加载后立即显示警报消息。

什么会导致这种行为？

我正在使用 Firefox 14 和 jquery 1.7。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T01:40:56.247

`$(document).on("click", $("#addEvent"), addEvent);`应该是`$(document).on("click", "#addEvent", addEvent);`，可选的选择器`.on()`是一个字符串，我不太确定`addEvent`，是实际代码还是只是片段？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T01:49:18.767

**工作演示** [http://jsfiddle.net/DYXTG/](http://jsfiddle.net/DYXTG/)

接口：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

休息我希望它有助于事业`:)`

**代码**

```
$(document).on("click", "#addEvent", addEvent);

function addEvent() {
    alert("Test");
}
​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T01:43:33.080

试试这个：

```
​$(document​).ready(function(){
    $("#addEvent").on("click", event); 
});

function event(){
    alert("Test");
} 
```

[**​演示**](http://jsfiddle.net/gnPfb/)[](http://jsfiddle.net/gnPfb/)

 **或者简单地说：

```
​$(document​).ready(function(){
    $("#addEvent").click(event); 
});

function event(){
    alert("Test");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T01:39:57.727

```
$("#addEvent").click(addEvent); 
```**

# java - 如何从 JFrame 中获取文本

> ID：11998722
> 
> 赞同：1
> 
> 时间：2012-08-17T01:36:04.443
> 
> 标签：java, swing, jframe, jtextfield

我正在学习 java 并且有一个小问题，我试图从 Jtextfield 获取“文本”，但它发送的是空的。更具体。

我有一个 JFrame，其中接口和 JTextfield 有一个名为“保存”的按钮，当我按下保存时，它会打开一个包含操作的类（写入属性文件），问题是当我尝试获取直接来自此类的文本字段中的文本我得到“无 - 空”我试图 System.out.print(); 但我什么也没得到……如果我用 variable.getText() 从 JFrame 打印；它得到了正确的，我尝试使用 getter 和 setter 并尝试直接从变量中获取，例如：

```
 JFrame obj = new JFrame();
    String variable = obj.txt_jtextfield.getText(); 
```

没有成功，这基本上是代码：

按钮：

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    db_connection_modifier obj = new db_connection_modifier();
    obj.hostconfig();
    //System.out.println("Conexion: "+txt_ip.getText()+"\n"+txt_db.getText()+"\n"+txt_user.getText()+"\n"+txt_pass.getText());
} 
```

这是方法：

```
public void hostconfig(){
        dbconfig_manager obj1 = new dbconfig_manager();        
        String ip = obj1.txt_ip.getText();
        String db_name = obj1.txt_db.getText();
        String user = obj1.txt_user.getText();
        String password = obj1.txt_pass.getText();
        System.out.println("DATA:  " + dbconfig_manager.txt_ip.getText() + "\n" +dbconfig_manager.txt_db.getText() + "\n" + user + "\n" + password);
} 
```

我空了，我不知道是不是因为“按钮”，我对“新”命令不太了解

提前致谢 ：）

编辑：

这是完整的课程：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package clases;

import java.io.FileOutputStream;
import java.io.IOException;
import java.util.Properties;
import interfaz.*;
import java.io.FileInputStream;
import java.util.Enumeration;

/**
 *
 * @author TheCoder
 */
public class db_connection_modifier {

    public void hostconfig() {

        Properties prop = new Properties();
        dbconfig_manager obj1 = new dbconfig_manager();
        String ip = obj1.txt_ip.getText();
        String db_name = obj1.txt_db.getText();
        String user = obj1.txt_user.getText();
        String password = obj1.txt_pass.getText();
        System.out.println("INFO:  " + dbconfig_manager.txt_ip.getText() + "\n" + dbconfig_manager.txt_db.getText() + "\n" + user + "\n" + password);

        FileInputStream is = null;

        // Cargamos el fichero de propiedades
        try {
            // Asumimos que el fichero existe
            String path = getClass().getResource("db_config.properties").getPath();
            //CARGAMOS EL ARCHIVO
            prop.load(new FileInputStream(path));
        } catch (IOException ioe) {
            ioe.printStackTrace();
        }

        // Listamos las propiedades
        System.out.println("PROPIEDADES POR DEFECTO");
        for (Enumeration e = prop.keys(); e.hasMoreElements();) {
            Object obj = e.nextElement();
            System.out.println(obj + ": "
                    + prop.getProperty(obj.toString()));
        }

        // Modificamos los valores
        prop.setProperty("db_ip", obj1.txt_ip.getText());
        prop.setProperty("db_name", obj1.txt_db.getText());
        prop.setProperty("Login_type", "");
        prop.setProperty("db_username", obj1.db_name);
        prop.setProperty("db_password", obj1.password);

        // Volvemos a listar los valores
        System.out.println("PROPIEDADES MODIFICADAS");
        for (Enumeration e = prop.keys(); e.hasMoreElements();) {
            Object obj = e.nextElement();
            System.out.println(obj + ": "
                    + prop.getProperty(obj.toString()));
        }

//        try {
//
//            Properties prop = new Properties();
//            dbconfig_manager obj = new dbconfig_manager();
//            String ip = obj.txt_ip.getText();
//            String db_name = obj.txt_db.getText();
//            String user = obj.txt_user.getText();
//            String password = obj.txt_pass.getText();   
//            
//            System.out.println("Conexion: "+ip+"\n"+db_name+"\n"+user+"\n"+password);
//           
//            prop.setProperty("db_ip", ip);
//            prop.setProperty("db_name", db_name);
//            
//            if (obj.cb_method.getSelectedIndex() == 0) {
//                prop.setProperty("Login_Type", "win_auth");
//                
//            } else if (obj.cb_method.getSelectedIndex() == 1) {
//                prop.setProperty("Login_Type", "manual_auth");
//                prop.setProperty("db_username", user);
//                prop.setProperty("db_password", password);
//
//                System.out.println("Paso por aqui!!!");
//                
//            }
//
//
//            //save properties to project root folder
//            String path = getClass().getResource("DB_configuration.properties").getPath();
//            prop.store(new FileOutputStream(path), null);             
//
//        } catch (IOException ex) {
//            System.out.println(ex);
//        }
    }
} 
```

这是 JFrame：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package interfaz;
import clases.*;
import javax.swing.JComboBox;
import javax.swing.JPasswordField;
import javax.swing.JTextField;
/**
 *
 * @author TheCoder
 */
public class dbconfig_manager extends javax.swing.JFrame {

    /**
     * Creates new form dbconfig_manager
     */
    public dbconfig_manager() {
        initComponents();
//         mauth_panel.setVisible(false);

    }
    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        mauth_panel = new javax.swing.JPanel();
        jLabel5 = new javax.swing.JLabel();
        jLabel6 = new javax.swing.JLabel();
        txt_user = new javax.swing.JTextField();
        txt_pass = new javax.swing.JPasswordField();
        jButton1 = new javax.swing.JButton();
        jButton2 = new javax.swing.JButton();
        cb_method = new javax.swing.JComboBox();
        txt_ip = new javax.swing.JTextField();
        txt_db = new javax.swing.JTextField();
        jButton3 = new javax.swing.JButton();
        jLabel1 = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setPreferredSize(new java.awt.Dimension(1024, 768));
        getContentPane().setLayout(null);

        jPanel1.setBackground(java.awt.Color.lightGray);
        jPanel1.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        jPanel1.setOpaque(false);

        jLabel2.setBackground(new java.awt.Color(255, 255, 255));
        jLabel2.setFont(new java.awt.Font("Lucida Sans", 1, 11)); // NOI18N
        jLabel2.setForeground(new java.awt.Color(255, 255, 255));
        jLabel2.setText("Domain name(IP): ");

        jLabel3.setBackground(new java.awt.Color(255, 255, 255));
        jLabel3.setFont(new java.awt.Font("Lucida Sans", 1, 11)); // NOI18N
        jLabel3.setForeground(new java.awt.Color(255, 255, 255));
        jLabel3.setText("Data base name: ");

        jLabel4.setBackground(new java.awt.Color(255, 255, 255));
        jLabel4.setFont(new java.awt.Font("Lucida Sans", 1, 11)); // NOI18N
        jLabel4.setForeground(new java.awt.Color(255, 255, 255));
        jLabel4.setText("Method: ");

        jLabel5.setText("Usuario: ");

        jLabel6.setText("Contraseña: ");

        javax.swing.GroupLayout mauth_panelLayout = new javax.swing.GroupLayout(mauth_panel);
        mauth_panel.setLayout(mauth_panelLayout);
        mauth_panelLayout.setHorizontalGroup(
            mauth_panelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(mauth_panelLayout.createSequentialGroup()
                .addGap(35, 35, 35)
                .addGroup(mauth_panelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel5)
                    .addComponent(jLabel6))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(mauth_panelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(txt_user)
                    .addComponent(txt_pass, javax.swing.GroupLayout.DEFAULT_SIZE, 222, Short.MAX_VALUE))
                .addContainerGap(49, Short.MAX_VALUE))
        );
        mauth_panelLayout.setVerticalGroup(
            mauth_panelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(mauth_panelLayout.createSequentialGroup()
                .addGap(19, 19, 19)
                .addGroup(mauth_panelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel5)
                    .addComponent(txt_user, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(mauth_panelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel6)
                    .addComponent(txt_pass, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(58, Short.MAX_VALUE))
        );

        jButton1.setText("Guardar");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        jButton2.setText("Borrar");

        cb_method.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "win_auth", "manual_auth" }));
        cb_method.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cb_methodActionPerformed(evt);
            }
        });

        jButton3.setText("jButton3");
        jButton3.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton3ActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGap(23, 23, 23)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(mauth_panel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                        .addGroup(javax.swing.GroupLayout.Alignment.LEADING, jPanel1Layout.createSequentialGroup()
                            .addComponent(jLabel2)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                            .addComponent(txt_ip))
                        .addGroup(javax.swing.GroupLayout.Alignment.LEADING, jPanel1Layout.createSequentialGroup()
                            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                .addComponent(jLabel3)
                                .addComponent(jLabel4))
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                .addComponent(cb_method, 0, 200, Short.MAX_VALUE)
                                .addComponent(txt_db)))))
                .addContainerGap(50, Short.MAX_VALUE))
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                .addGap(45, 45, 45)
                .addComponent(jButton3)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jButton1)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jButton2, javax.swing.GroupLayout.PREFERRED_SIZE, 83, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(77, 77, 77))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGap(14, 14, 14)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel2)
                    .addComponent(txt_ip, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel3)
                    .addComponent(txt_db, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel4)
                    .addComponent(cb_method, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(46, 46, 46)
                .addComponent(mauth_panel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 47, Short.MAX_VALUE)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jButton1)
                    .addComponent(jButton2)
                    .addComponent(jButton3))
                .addGap(25, 25, 25))
        );

        getContentPane().add(jPanel1);
        jPanel1.setBounds(300, 110, 450, 390);

        jLabel1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/imagenes/stretched-38776.jpg"))); // NOI18N
        getContentPane().add(jLabel1);
        jLabel1.setBounds(0, 0, 1024, 768);

        pack();
    }// </editor-fold>

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
        db_connection_modifier obj = new db_connection_modifier();
        obj.hostconfig();
        //System.out.println("Conexion: "+txt_ip.getText()+"\n"+txt_db.getText()+"\n"+txt_user.getText()+"\n"+txt_pass.getText());
    }                                        

    private void cb_methodActionPerformed(java.awt.event.ActionEvent evt) {                                          
        if (cb_method.getSelectedIndex() == 0) {
            System.out.println("win_auth: " + cb_method.getSelectedIndex());
            mauth_panel.setVisible(false);

        } else if (cb_method.getSelectedIndex() == 1) {
            System.out.println("manual_auth: " + cb_method.getSelectedIndex());
            mauth_panel.setVisible(true);
        }
    }                                         

    private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {                                         
       System.out.println("Obteniendo datos:   " + txt_ip.getText() + "\n" + txt_db.getText()
               + "\n" + txt_user.getText() + "\n" + txt_pass.getText());
    }                                        

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /*
         * Set the Nimbus look and feel
         */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(dbconfig_manager.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(dbconfig_manager.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(dbconfig_manager.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(dbconfig_manager.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new dbconfig_manager().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    public javax.swing.JComboBox cb_method;
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton2;
    private javax.swing.JButton jButton3;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel mauth_panel;
    public static javax.swing.JTextField txt_db;
    public static javax.swing.JTextField txt_ip;
    public static javax.swing.JPasswordField txt_pass;
    public static javax.swing.JTextField txt_user;
    // End of variables declaration
} 
```

正如我之前所说......当我尝试时，我只是变得“空虚”：

```
 System.out.println("INFO:  " + ip + "\n" + db_name + "\n" + user + "\n" + password); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T02:05:19.523

所以`JFrame`没有调用的方法或属性`txt_jtextfield`

不知道您是如何实际构建`JFrame`的，因此很难知道该建议什么。

假设你做了类似的事情......

```
JText txt_jtextfield = new JTextField();
JFrame obj = new JFrame();
// Some other initialisation code...
obj.add(txt_jtextfield); 
```

您应该能够直接获取该值。

如果该字段存在于它的“自己的”框架中。您应该直接创建父框架

```
FrameWithTextFieldInIt obj = new FrameWithTextFieldInIt();
// etc... 
```

然后由框架提供对该字段的访问（通过将其公开，或者更优选地，通过吸气剂）

您确实需要提供有关文本字段存在位置以及尝试访问它的上下文的更多信息

**更新**

您不能`JFrame`以这种方式使用 a 。

```
dbconfig_manager obj1 = new dbconfig_manager();
String ip = obj1.txt_ip.getText(); 
```

基本上是在说，“给我做一个框架，完成后继续运行”。这意味着，文本字段中没有任何内容。

两种选择。

1.  改为使用模式`JDialog`，请参阅[如何制作对话框](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)
2.  改变你的工作流程。

而不是`db_connection_modifier`类负责显示 UI，使其只负责更新属性并使用某种“更新”按钮创建配置框架，该按钮将调用`db_connection_modifier`该类

**更新**

Max 也是正确的，在你是“Guardar”按钮的动作处理程序中，你正在这样做......

```
db_connection_modifier obj = new db_connection_modifier();
obj.hostconfig(); 
```

这正在创建一个全新的`dbconfig_manager`，其中没有任何细节。您应该直接将属性传递给它...

```
db_connection_modifier obj = new db_connection_modifier(txt_ip.getText(), txt_db.getText(), txt_user.getText(), txt_pass.getText());
obj.hostconfig(); 
```

这将使您的 UI 与您的应用程序逻辑分离

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T02:29:57.897

看起来像`db_connection_modifier`创建新实例`dbconfig_manager`而不是使用现有框架。要解决问题，请将现有框架的实例传递给`dbconfig_manager`. 最好将连接参数包装到一个类中，然后传递这个类。

# c# - VS WinForm 设计器总是更改自定义构造函数？

> ID：11998728
> 
> 赞同：2
> 
> 时间：2012-08-17T01:37:31.777
> 
> 标签：c#, winforms, visual-studio-2010

全部，

我正在使用 MSVS 2010 使用 C#/WinForms 进行项目。我从组框派生了一个对象，并更改了它的构造函数，以便在构造时采用整数变量。我将我的对象添加到工具箱中，并且可以成功地将该对象插入到 GUI 设计器中。

但是每次我对表单进行更改时，我的自定义构造函数都会更改。

因此，我需要一种方法来修复 VS，以便每次更改表单时代码都不会自行重建，或者我需要其他方法来修复自定义对象中的代码。

基本上我所做的取决于我传递的参数，我正在创建不同的小部件集并将它们展示给用户。但我制作了那个对象，因为我试图消除代码重复。

有人可以帮忙吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T01:44:13.550

默认的无参数构造函数*必须*保留，它应该调用`InitializeComponents`. 如果这样做了，那么添加*辅助*构造函数应该没问题，设计者不应该乱用它。

但是，我建议不要使用重载的构造函数，而是公开方法或属性来完成 WinForms 控件所需的任务。

在 WinRome 中，按照..

* * *

二级构造函数示例：

```
// Leave this constructor - in the X.designer.cs file
public MyType () {
    InitializeComponents();
}

// Add your own constructor - in the X.cs file
public MyType (int x) : this() {
    // ..
} 
```

* * *

更新：避免手动编辑“X.designer.cs”文件；这些是给设计师的。相反，编辑镜像“X.cs”文件。部分类用于在这两个文件之间传播设计器代码和您的自定义代码。

# c# - 泛型方法的条件编译

> ID：11998734
> 
> 赞同：6
> 
> 时间：2012-08-17T01:38:06.053
> 
> 标签：c#, .net, generics

目前正在研究按 TKey 排序的 2 路查找关联泛型。在某些时候，我希望能够访问如下：

```
public class Assoc<TKey, TValue>
{
     public TKey this[TValue value] { get; }
     public TValue this[TKey value] { get; }
} 
```

但显然，当 TKey == TValue 时，这将失败。出于好奇，是否有条件编译语法来执行此操作：

```
public class Assoc<TKey, TValue>
{
     [Condition(!(TKey is TValue))]
     public TKey this[TValue value] { get; }

     [Condition(!(TKey is TValue))]
     public TValue this[TKey value] { get; }

     public TKey Key(TValue value) { get; }

     public TValue Value(TKey value) { get; }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T01:42:38.617

不，没有基于通用类型的条件编译。

泛型替换是在运行时执行的，而不是编译时。

这是 .NET 泛型和 C++ 模板之间的区别之一。

泛型也没有C++ 模板所具有的*专业化概念。*

[http://msdn.microsoft.com/en-us/library/c6cyy67b.aspx](http://msdn.microsoft.com/en-us/library/c6cyy67b.aspx)

# php - 如何在 Joomla 2.5 中使查询 sql 注入安全

> ID：11998737
> 
> 赞同：2
> 
> 时间：2012-08-17T01:38:49.493
> 
> 标签：php, joomla

请问如何使这个查询sql注入安全？JRequest::getVar 会确保传递的参数是 sql 注入安全的吗？

```
$product_id = JRequest::getVar('product_id')
$db = JFactory::getDBO();
$query = " select * from #__products where product_id=".$product_id."; ";       
$db->setQuery($query);
$data = $db->loadObjectList();
return $data[0]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T05:24:44.813

就像@Sudhir 回答的延伸一样。

`JRequest`自 Joomla! 以来一直在贬值！1.7 并且正在逐步删除，例如[Joomla 3.0 中潜在的向后兼容性问题](http://docs.joomla.org/Potential_backward_compatibility_issues_in_Joomla_3.0_and_Joomla_Platform_12.1#JRequest)。如果您打算保留您的组件，您可能希望将旧样式`JRequest`调用迁移到[JInput](http://docs.joomla.org/JInput_Background_for_Joomla_Platform)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T04:20:29.720

是的，使用**getVar**函数访问请求变量，将确保在将所有用户数据用于其他地方（例如在 SQL 查询中）之前对其进行过滤。 **JRequest**类上的 getVar 方法会自动过滤掉输入（除非另有明确说明）。

您还可以在插入数据库之前使用[引号](http://api.joomla.org/11.4/Joomla-Platform/Database/JDatabase.html#quote)来转义字符串

# vba - 将 MS Access 数据作为现有数据下方的新行插入 Excel

> ID：11998738
> 
> 赞同：-1
> 
> 时间：2012-08-17T01:38:52.487
> 
> 标签：vba, ms-access, excel

我需要将 MS Access 表中的行导入 Excel。下面的 VBA 宏就是这样做的。

```
Sub Macro1()
'
'
    With ActiveSheet.QueryTables.Add(Connection:=Array(Array( _
        "ODBC;DSN=MS Access Database;DBQ=C:\Documents and Settings\Administrator\My Documents\test_db.mdb;DefaultDir=C:\Documents and Setting" _
        ), Array( _
        "s\Administrator\My Documents;DriverId=25;FIL=MS Access;MaxBufferSize=2048;PageTimeout=5;" _
        )), Destination:=Range("A1"))
        .CommandText = Array( _
        "SELECT Table1.ID, Table1.name, Table1.id, Table1.var1, Table1.var2" & Chr(13) & "" & Chr(10) & "FROM `C:\Documents and Settings\Administrator\My Documents\test_db`.Table1 Table1" _
        )
        .Name = "Query from MS Access Database"
        .FieldNames = True
        .RowNumbers = False
        .FillAdjacentFormulas = False
        .PreserveFormatting = True
        .RefreshOnFileOpen = False
        .BackgroundQuery = True
        .RefreshStyle = xlInsertEntireRows
        .SavePassword = False
        .SaveData = True
        .AdjustColumnWidth = True
        .RefreshPeriod = 0
        .PreserveColumnInfo = True
        .Refresh BackgroundQuery:=False
    End With
End Sub 
```

MS Access 表 1

```
name    id    var1    var2
joe     1     23      34 
```

当我运行一次宏时，我进入 Excel

```
name    id    var1    var2
joe     1     23      34 
```

当我再次运行宏时，我进入 Excel

```
name    id    var1    var2    name    id    var1    var2
joe     1     23      34      joe     1     23      34 
```

代替

```
name    id    var1    var2
joe     1     23      34
name    id    var1    var2
joe     1     23      34 
```

你知道我应该改变什么才能将 MS Access 行作为现有数据下方的新数据行导入 Excel 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T02:13:16.573

改变

```
)), Destination:=Range("A1")) 
```

说点不一样的。也许

```
)), Destination:= Range("A65536").End(xlUp).offset(1,0) 
```

根据您导入数据的方式，您可能需要做更多的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T16:45:47.927

Enderland 的答案在我将一个月的文本文件导入 excel 并将它们附加到彼此末尾的查询表中非常适合我。部分代码如下所示。目标工作簿的第二张表中包含 dates=filenames。我现在意识到我可以向用户询问月份和年份，并使用循环生成文件名。除 6 月、4 月、9 月、11 月 =30 和 2 月 = 28/29 外，其他所有人都是 31。我去做。

Dim sDate As String Dim sDataPath As String Dim i As Integer Dim mMax As Integer Dim Label_F_Name As String Dim F_name As String

sDataPath = Worksheets("D&L").Cells(1, "G").Value '值位于工作簿的第二张表中 mMax = Worksheets("D&L").Cells(1, "D").Value '值位于工作簿第二张

For i = 1 To mMax sDate = "A_" + CStr(Worksheets("D&L").Cells(1 + i, "A").Value) + ".csv" ' 遍历工作表中的日期列表

'用文件名标记数据列，以便验证数据来自正确的文件 Label_F_Name = sDate + "........" F_name = sDataPath + sDate Range("'D&L'!D5") = F_name

```
With ActiveSheet.QueryTables.Add(Connection:="TEXT;" + F_name, Destination:=Range("H1048576").End(xlUp).Offset(4, 0)) ' offset for existing header
    .Name = Label_F_Name
    .FieldNames = True
    .RowNumbers = False
    .FillAdjacentFormulas = False
    .PreserveFormatting = True
    .RefreshOnFileOpen = False
    .RefreshStyle = xlInsertEntireRows ' appends data to end of previous
    .SavePassword = False
    .SaveData = True
    .AdjustColumnWidth = False
    .RefreshPeriod = 0
    .TextFilePromptOnRefresh = False
    .TextFilePlatform = 437
    .TextFileStartRow = 1
    .TextFileParseType = xlDelimited
    .TextFileCommaDelimiter = True
    .TextFileColumnDataTypes = Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1)
    .TextFileTrailingMinusNumbers = True
    .Refresh BackgroundQuery:=False
End With 
```

接下来我

# php - javascript: 在 iframe src 中有什么作用？

> ID：11998740
> 
> 赞同：0
> 
> 时间：2012-08-17T01:38:56.043
> 
> 标签：php, jquery, iframe, frameset-iframe

```
 <iframe src="javascript:''" id="__gwt_historyFrame" tabIndex='-1' style="position:absolute;width:0;height:0;border:0"></iframe> 
```

我想问一下“javascript：”在iframe src中做了什么？我在一个 Web 应用程序中遇到了这段代码。

基本上，我喜欢的是他们通过 iframe 加载正文内容 - >就像谷歌正在做的那样。javascript: 是否起重要作用？

例如[http://www.webapplication.com/#Dashboard:142](http://www.webapplication.com/#Dashboard:142) 从 dashboard.php 加载内容 / 142 是用户 ID

例如[http://www.webapplication.com/#settings:142](http://www.webapplication.com/#settings:142) 从 settings.php 加载内容 / 142 是用户 ID

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T01:52:02.103

```
javascript:'' 
```

什么都不做，它被用作填充物。有些使用 about:blank，或者只是一个空文件，这是另一种方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T22:42:03.060

我刚刚构建了这个演示来回答另一个问题：http: [//jsfiddle.net/JCpgY/](http://jsfiddle.net/JCpgY/)

在 src 中使用，javascript 允许您直接在 iframe 中注入 html 字符串。据我所知，所有主流浏览器都支持这一点。

在您的情况下，它只允许为 src 分配一个空值（这是强制性的）。作者也可以使用`about:blank`或`javascript:void 0`。

# c++ - C++ Boost.asio 平

> ID：11998746
> 
> 赞同：2
> 
> 时间：2012-08-17T01:40:08.457
> 
> 标签：c++, networking, boost, boost-asio, ping

我正在尝试制作一个程序来列出网络上设备的所有 IP 地址。其主要组成部分之一是能够 ping 设备。这个程序必须在 Linux、Windows 和 Mac 上运行，所以我选择了 Boost 库。

我设法在文档中找到了这个例子：http: [//www.boost.org/doc/libs/1_47_0/doc/html/boost_asio/example/icmp/ping.cpp](http://www.boost.org/doc/libs/1_47_0/doc/html/boost_asio/example/icmp/ping.cpp)

在使用 OpenGL 3.1 和着色器时，我在 C++ 方面相当有经验，但是当我运行这个程序时，它一遍又一遍地 ping（454+）并且理解它让我陷入循环（没有双关语），它似乎包含大量速记，我从未见过的功能等。

有没有更简单的方法可以用 Boost:asio ping 一台机器？或者有没有办法让这个方法只运行 4 次并返回平均响应时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T05:28:18.667

在链接的示例中，您必须更改`handle_receive`函数以包含计数器。当它被调用四次时，您告诉`io_server`对象停止（为此，您必须使其成为全局对象，或者在`pinger`类中存储对它的引用）而不是调用`start_receive`.

# php - Oauth 认证 facebook - cakePHP 插件

> ID：11998747
> 
> 赞同：3
> 
> 时间：2012-08-17T01:40:15.483
> 
> 标签：php, facebook, cakephp, oauth, facebook-login

我对这个[插件](https://github.com/MozMorris/FacebookAuthenticate-CakePhp-Authentication-Handler)感到困惑。

只需复制粘贴演示，但当我尝试连接 facebook 时出现此错误：

```
The page isn't redirecting properly

Firefox has detected that the server is redirecting the request for this address in a way that will never complete. 
```

完整代码：

```
<?php

class ExamplesController extends AppController {

  public $components = array(
    'Auth'=> array(
      'loginAction' => array(
        'controller' => 'examples',
        'action'     => 'login'
      ),
      'loginRedirect' => array(
        'controller' => 'examples',
        'action'     => 'my_account'
      ),
      'authError' => 'Did you really think you are allowed to see that?',
      'authenticate' => array(
        'FacebookAuth.Facebook' => array(
          'fields' => array(
            'username' => 'email',
                'password' => 'password'
          )
        )
      )
    )
  );

    public function index() {
    }

  public function beforeFilter()
  {
    parent::beforeFilter();

    $this->Auth->authenticate['FacebookAuth.Facebook']['application'] = array(
      'id'     => Configure::read('facebook.app_id'),
      'secret' => Configure::read('facebook.app_secret')
    );

    $this->Auth->allowedActions = array_merge($this->Auth->allowedActions, array('login'));
  }

  public function login()
  {
    if (!$this->Auth->login()) {
      /**
       * Get config for Facebook redirect
       */
      $clientId    = Configure::read('facebook.app_id');
      $permissions = implode(',', Configure::read('facebook.permissions'));
      $redirect    = Router::url(false, true);
      $csrfToken   = CakeSession::read('FacebookAuthCSRF');

      $this->redirect(Configure::read('facebook.oauth_dialg_url') . '?client_id=' . $clientId . '&redirect_uri=' . $redirect . '&scope=' . $permissions . '&state=' . $csrfToken);
    } else {
      $this->redirect(array('action' => 'my_account'));
    }
  }

  public function my_account()
  {
    var_dump($this->Auth->user());
    die();
  }
} 
```

挑战在于弄清楚如何让插件工作。

* * *

**更新：** 好的，我有这个网址（感谢 elliot）：

```
http://someHost/?client_id=4003xx16796&redirect_uri=http://localhost/cake/users/login&scope=email&state=f96419881df77cdc689e6c43c131cf3b 
```

现在，应该如何处理 url？下一步，基本上。我所拥有的只是一个登录按钮，单击该按钮时会更改 url，就像上面的演示一样，但没有任何操作。响应为空。

我已经读过[这个](http://developers.facebook.com/docs/reference/dialogs/oauth/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T12:45:49.943

是问题

```
Configure::read('facebook.oauth_dialg_url') 
```

应该读：

```
Configure::read('facebook.oauth_dialog_url') 
```

还要确保您在 bootstrap.php 中进行了适当的 Configure::write 命令

```
Configure::write('facebook.oauth_dialog_url', 'http://some-value.com/path/to/url'); 
```

# php - 如何打开 .php 文件

> ID：11998753
> 
> 赞同：0
> 
> 时间：2012-08-17T01:41:06.637
> 
> 标签：php

> **可能重复：**
> [如何在我的计算机上运行 php 文件](https://stackoverflow.com/questions/8580273/how-to-run-php-files-on-my-computer)
> [是否可以在我的本地计算机上运行 .php 文件？](https://stackoverflow.com/questions/9318858/is-it-possible-to-run-php-files-on-my-local-computer)

好吧，对不起，如果这是一个“新手”问题，但我必须这样做：

如何打开 .php 文件？我保存了一个 test.php 文件，现在我想打开它……我需要使用 Apache 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T01:46:47.020

您需要在您的系统上运行 Apache。运行后，打开浏览器并在地址栏中输入**localhost/test.php**。这是假设 test.php 位于正确的位置。

如果您安装 WAMP，正确的位置将类似于 C:\wamp\www。此外，一旦安装了 WAMP，您只需单击 WAMP 托盘图标，然后单击“www 目录”，这将打开放置 test.php 的正确位置。

如果你没有安装 Apache/PHP，你可以下载 WAMP，它会自动将这些和 MySQL 安装在一个：[WAMP Server](http://www.wampserver.com/en/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T01:45:27.740

如果您打算运行 PHP 脚本，那么是的，您需要 Apache 或任何类型的支持 PHP 的 Web 服务器。如果你想在你的计算机上本地运行你的脚本，你可以安装[XAMPP](http://www.apachefriends.org/)并且运行你的计算机就像一个 web 服务器一样。只需`http://localhost/`在浏览器中输入即可获得安装时的主页。如果您有任何问题或其他问题，请发表评论。:)

编辑：XAMPP 可用于几乎所有平台，包括 Windows、Mac 和 Linux

[您可以从它的网站http://www.apachefriends.org/](http://www.apachefriends.org/)获取 XAMPP

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T01:44:33.143

`php -f /path/to/test.php`

如果你在 linux 上并且安装了 PHP。

# html - 弄乱容器大小并破坏布局

> ID：11998754
> 
> 赞同：0
> 
> 时间：2012-08-17T01:41:17.397
> 
> 标签：html, css

谁能告诉我为什么当我在那里放置图像标签时会中断？当只有文本时，它不会破坏布局，但是当我将图像添加到等式时，它会像浮动一样弄乱布局。

我已经尝试过浮动修复，但它没有用，我不知道如何修复它。

[http://samturrell.co.uk/liberty/](http://samturrell.co.uk/liberty/)

任何帮助将非常感激！

编辑：

因此，显然 dyanamicpage.js 脚本在页面更改时将高度设置为错误的值。任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T02:19:52.550

只需将页面换行高度设为自动即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T02:44:19.387

在我看来，如果您无法删除，您有两个选择`dynamicpage.js`

1.  如果您知道提前的尺寸，您可以明确设置`width/height`为图像

2.  如果您不认识它们，请尝试将 dynamicpage.js 的第一行从：
    `$(function() {`更改为：并删除最后一行的`window.addEventLinstener('load', function() {` 悬空`)`

这是因为 jQuery 加载事件发生在所有图像下载之前，`<img>`并且没有对其进行任何`width/height`设置，浏览器不知道它的高度，所以它假设`0px`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T02:20:34.803

您的高度是在页面换行 div 上明确设置的。这与图像无关。

# mediaelement.js - mediaelement.js 如何设置 pluginPath 变量

> ID：11998756
> 
> 赞同：1
> 
> 时间：2012-08-17T01:41:33.810
> 
> 标签：mediaelement.js

我按照安装说明进行操作，但在网站上查看时，我看到的只是一个黑匣子（没有控件，什么都没有）。我希望我有安装错误。

用 Firebug 查看 javascript，我注意到 pluginPath 设置不正确。通过google，发现可以这样设置：

$('video').mediaelementplayer({pluginPath: '/var/www/html/equimed/libs/mediaelement/build/'});

我仍然得到黑匣子。这是设置 pluginPath 的正确方法吗？绝对路径与相对路径有问题吗？什么是最好的调试方法，因为我真的很想使用 mediaelement.js

标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:12:06.250

成功！通过使用相对的 pluginPath，js 能够找到插件和媒体文件。

总结：我发现在使用 mediaelements.js 时，如果你移动 build/ 目录下的 js 和插件（就像我缩小和合并 js 文件所做的那样），你需要在 jquery 调用中指定 pluginPath。通过使用从 js 的位置到 build/ 目录的原始位置的相对路径，我取得了成功。

# database - 为什么 update() 语句会在更新任何内容之前发生？

> ID：11998758
> 
> 赞同：0
> 
> 时间：2012-08-17T01:42:07.263
> 
> 标签：database, velocity

我正在阅读有关速度数据库的[示例页面](http://velocitydb.com/Samples.aspx)，并且想知道这些行：

```
public Person BestFriend
{
     set
     {
         Update();
         bestFriend = value;
     }
} 
```

为什么在 bestFriend 设置为传入值之前调用 Update()？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T02:09:05.583

更新“将对象标记为正在更新，以便在提交事务时写入对象。”

# ruby - 代码 Kata 上的 Ruby 排列递归

> ID：11998759
> 
> 赞同：0
> 
> 时间：2012-08-17T01:42:23.673
> 
> 标签：ruby, recursion

通常堆栈溢出是为有形问题保留的，但我正忙着解决一个难题，想知道是否有人可以解释它。我正在遍历递归并遇到了 Dave Thomas 的 Code Kata（非常酷）。我很高兴自己做出答案，然后试图减少它们，但有一个我无法弄清楚的回应：

问题：代码 Kata #2 [http://codekata.pragprog.com/2007/01/kata_two_karate.html](http://codekata.pragprog.com/2007/01/kata_two_karate.html)

一个有效的答案，但我不明白为什么在这里：

```
def chop(target, values)  
  # Special handling for zero and single element arrays
  return -1 if values.empty?
  return ((target == values[0]) ? 0 : -1) if values.length == 1

  # Try the bottom half first
  pos = chop(target, values[0, values.length/2])
  return pos if pos != -1

  # Then the upper half ... remember that the returned
  # position is relative to the middle of the array.
  pos = chop(target, values[values.length/2, values.length-1])
  return pos + (values.length/2) if pos != -1

  # Didn't find what we were looking for
  return -1
end 
```

谁能向我解释一下索引是如何支持这种递归模式的？

当我阅读它时，它会递归，直到它达到它的数字并返回 0。我一生都无法弄清楚这个东西为什么/如何吐出索引。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T02:39:22.793

我发现处理这样的递归代码的最佳方法是从 return 语句开始。" `return pos + (values.length/2) if pos != -1`" 行是魔法发生的地方。

用英文重述代码：“将找到的元素的位置（0或正数）添加到给定数组在原始数组中的偏移量”。

基本上，它在返回调用链的途中被多次调用，充当最终答案的累加器。要查看此操作，请尝试以下操作：

```
def chop(target, values)
  return -1 if values.empty?
  if values.length == 1
    return ((target == values[0]) ? 0 : -1)
  end
  pos = chop(target, values[0, values.length/2])
  return pos if pos != -1
  pos = chop(target, values[values.length/2, values.length-1])
  # Print some info
  if pos != -1
    puts [pos, (values.length/2)].inspect
    return pos + (values.length/2)
  end
  return -1
end 
```

# php - 我如何在 Symfony2 的 Form Builder 类中访问用户角色

> ID：11998761
> 
> 赞同：16
> 
> 时间：2012-08-17T01:42:39.680
> 
> 标签：php, symfony, doctrine-orm

我有`UserType`像这样的字段的表格

```
->add('description')
  ->add('createdAt') 
```

现在我希望如果登录用户具有角色，`(ROLE_SUPERADMIN)`那么他可以看到像这样的额外字段

```
 ->add('description')
if($user.hasRole(ROLE_SUPERADMIN))
->add('createdAt') 
```

实际上我必须为许多领域这样做。有什么办法我可以制作一些自定义类型，这样如果存在那种类型，那么只有管理员可以看到类似的

`->add('createdAt',"MyCustomType")`

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-17T06:05:56.377

很简单。只需根据安全上下文使您的自定义表单类型成为服务：

```
use Symfony\Component\Security\Core\SecurityContext;

class UserType extends AbstractType
{

    private $securityContext;

    public function __construct(SecurityContext $securityContext)
    {
        $this->securityContext = $securityContext;
    }

    public function buildForm(FormBuilder $builder, array $options)
    {
        // Current logged user
        $user = $this->securityContext->getToken()->getUser();

        // Add fields to the builder
    }

    public function getDefaultOptions(array $options)
    {
        return array(
            'required'   => false,
            'data_class' => 'Acme\HelloBundle\Entity\User'
        );
    }

    public function getName()
    {
        return 'user_type';
    }
} 
```

然后使用特殊标签将类标记为服务`form.type`：

```
services:
    form.type.user:
        class: Acme\HelloBundle\Form\Type\UserType
        arguments: ["@security.context"]
        tags:
            - { name: form.type, alias: user_type } 
```

在您的控制器中，不要做，而是`new UserType()`从容器中获取服务：

```
$form = $this->createForm($this->get('form.type.user'), $data); 
```

# ruby-on-rails - 通过正则表达式过期的内存缓存

> ID：11998762
> 
> 赞同：3
> 
> 时间：2012-08-17T01:42:42.553
> 
> 标签：ruby-on-rails, memcached, dalli

我在我的 rails 应用程序中使用 memcache。我想说

> 使用 'foo-123-*' 之类的键使所有条目过期

其中 * 是任何字符串。当然，没有 memcache 发行版直接支持这一点（对吗？），因为它的构建简单快速，因此没有索引。

有几个项目可以通过保留本地键列表来解决这个问题：

*   [https://github.com/defconnomicron/dalli-store-extensions](https://github.com/defconomicron/dalli-store-extensions)
*   [https://github.com/jkassemi/memcache-store-extensions](https://github.com/jkassemi/memcache-store-extensions)

但是为了将列表保存在内存中……该列表可能会在应用程序实例之间变得不同步……所以它不可靠。

这个问题有没有用另一种方式解决？我错过了一个常见的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:59:14.017

正如你所说，不可能像你想要的那样查询 memcached ......但这是我发现的一个 php 示例，它返回键列表

[http://snipt.org/xtP](http://snipt.org/xtP)

它发送

*   “统计项目”

然后迭代返回的项目并发送

*   “统计缓存转储 42 100”

42 是商品编号，100 是要退货的商品数量

然后您可以遍历返回的键并删除不再需要的键。

（但这无论如何都是一个丑陋的解决方法......）

# android - flex 移动应用程序检测到重复的基于 HTTP 的 FlexSession

> ID：11998763
> 
> 赞同：1
> 
> 时间：2012-08-17T01:42:50.943
> 
> 标签：android, flex4, flash-builder, httpservice

我使用 Flash Builder 4.6 开发了一个移动应用程序，但是当我使用 httpservice 将其连接到 Web 时，出现了以下警告：

> 检测到重复的基于 HTTP 的 FlexSession，通常是由于远程主机禁用了会话 cookie。必须启用会话 cookie 才能正确管理客户端连接”

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T03:10:29.707

只需添加以下代码

```
FlexClient.getInstance().id = UIDUtil.createUID(); 
```

# cakephp - 一种关联对象的简单方法，以便在 CakePHP 中调用它的方法

> ID：11998765
> 
> 赞同：0
> 
> 时间：2012-08-17T01:43:19.060
> 
> 标签：cakephp

我在某个关联对象上有一个方法，我想使用它，但是关联对象需要设置它的 id 以便该方法可以工作

```
A->B->method() 
```

而不是做

```
$a = A->find('first');
A->B->id = $a['B'][id'];
A->B->method(); 
```

有简单的方法吗？因为既然A属于B，为什么我不能简单的调用

```
A->B->method(); 
```

让模型关系弄清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T03:19:19.257

从您的评论来看，您似乎正在尝试从 A 中找到 B 的特定字段，如果您`Containable`在模型中正确设置，您可以执行以下操作：

```
A->contain('B.id'); // change B.id to B.whateverfield you are trying to fetch
$a = A->find('first');
echo $a['B']['id']; // change id to whateverfield 
```

[http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html# contains-deeper-associations](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html#containing-deeper-associations)

# php - html编辑器显示问题

> ID：11998766
> 
> 赞同：1
> 
> 时间：2012-08-17T01:43:20.027
> 
> 标签：php, html, tinymce

我们知道像 tiny_mce 这样的 html 编辑器可以让我们上传纯文本之上的 html 表达式，它能够满足`<td></td>`, `<div></div>`,`<p></p>`等。

如果输入数据库的整个代码要显示在网页中，一切都很好。但是，如果由于设计要求而发生内容截断，则可能会截断`</td>`, `</div>`, `</p>`，导致标签未闭合而损坏页面布局。

处理此问题的正常做法是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T01:52:52.317

我已经使用tinymce 一段时间了，我遇到了这个问题，你可以让它有一个限制。[w3schools 有很好的解释和解决方案。](http://www.w3schools.com/html5/att_textarea_maxlength.asp)它应该适用于您的问题。

# php - 如何判断页面是否允许机器人？

> ID：11998767
> 
> 赞同：0
> 
> 时间：2012-08-17T01:43:23.207
> 
> 标签：php

我正在尝试创建一个机器人来检查特定 URL 是否具有某些特定内容。但是，当我运行它时，我不断收到“HTTP 重定向循环”错误。

我唯一可以怀疑的是该页面不允许机器人。有什么方法可以判断页面是否不允许机器人？我已经用谷歌搜索了它，但我还没有找到答案。

**编辑**

在检查了一些东西之后，robots.txt 是这样说的：

```
User-agent: *
Disallow: /advsched/ 
```

我还注意到，当我在浏览器中禁用 cookie 并访问该页面时，我收到“HTTP 重定向循环”错误。所以据我了解，我试图访问的页面不允许机器人。但是，根据我对 cURL 函数的了解，只要我的用户代理是这样的：

```
Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.2) Gecko/20090729 Firefox/3.5.2 GTB5 
```

该网站无法判断我是否是机器人。只剩下一件事——饼干。我知道 cURL 函数可以处理 cookie，但它们可以处理它们，使我看起来像一个标准用户吗？我还不能让它工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T02:01:43.703

你说不出来。

什么是机器人？服务器怎么知道？通常，标识信息在`User-Agent`客户端在请求期间发送的头部中。但是，不要求某些服务器在一般级别上阻止“机器人”。假设他们只想屏蔽谷歌？

马里奥的检查建议`robots.txt`是一个很好的建议。网站所有者通常会在其中设置机器人可以访问的内容以及如何处理抓取的信息的规则。不过，这与您的重定向无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T02:46:02.967

检查`/robots.txt`并解释其内容。

说明在[http://robotstxt.org/](http://robotstxt.org/)

# assembly - MIPS 循环展开

> ID：11998772
> 
> 赞同：1
> 
> 时间：2012-08-17T01:43:39.133
> 
> 标签：assembly, for-loop, mips

```
for (i=0, i<10000, i=i+2)
{

    A[i]=B[i]+C[i]
    A[i+1]=B[i+1]+C[i+1]

} 
```

给定前面的代码，MIPS 程序集是什么样的？我正在尝试构建汇编代码，其中 R9 = A 的基地址，R9 = B 的基地址，R10 = C 的基地址

我知道这种展开 ONCE 的方法应该更有效，但很难看到 MIPS 的样子。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T20:37:48.933

循环体将是这样的：

```
LW    r1, 0(r9)    // B[i]
LW    r2, 4(r9)    // B[i+1]
LW    r3, 0(r10)   // C[i]
LW    r4, 4(r10)   // C[i+1]
ADDU  r5, r1, r3   // B[i] + C[i]
ADDU  r6, r2, r4   // B[i+1] + C[i+1]
SW    r5, 0(r8)    // A[i] 
SW    r5, 4(r8)    // A[i+1]
ADDIU r9,  8
ADDIU r10, 8
ADDIU r8,  8 
```

MIPS 有很多寄存器，因此可能值得再展开循环几次。

# vhdl - 用VHDL制作一个简单的电路来耗散功率

> ID：11998775
> 
> 赞同：2
> 
> 时间：2012-08-17T01:43:54.167
> 
> 标签：vhdl, xilinx, circuit, virtex

我正在寻找一些可以用来测量功率的简单写法的想法。我只需要它来确保我的功率测量工作正常。我在 Virtex-6 上使用 Xilinx ISE 14.1。我想要一个简单的电路来编写和合成。

到目前为止，我尝试了一个 1K 位的计数器，但这并不是很明显。我尝试了一个 9K 位计数器，但 ISE 在合成它时遇到了麻烦（我让它运行了一个小时才杀死它）。现在我正在尝试实现大型 BRAM 并使其永久启用。

我需要一种方法来限制大向量得到优化，所以我想将所有位异或一起并将单个位输出提供给 LED。对于非常大的向量，有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T10:16:23.437

在 VHDL 2008 中，您可以像这样对一堆位进行异或运算：

```
signal wide : std_logic_vector(1000 downto 0);
signal narrow : std_logic;

narrow <= xor wide; 
```

不确定 ISE 是否支持。

您可以使用如下函数：

```
function xor_vector(i:std_logic_vector) returns std_logic is
  variable ret:std_logic:=i(i'low);
begin
  for c in i'low+1 to i'high loop
    ret := ret xor i(c);
  end loop;
  return ret;
end function; 
```

（未经测试，直接输入 - 可能需要语法调整！）

对于功耗，您可以尝试将交替`'1'`和`'0'`模式输入移位寄存器而不是计数器 - 然后所有位都会在每个周期发生变化。对移位寄存器进行复位，以确保工具不会推断 SRL16 更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T00:29:08.043

这是我想出的。我觉得它为简单的代码和快速的编译时间提供了一个很好的折衷方案。它是一个移位器，每隔一个高位，因此每个 FF 都应该在每个时钟周期切换（在设置之后）。如果需要，可以在开始时初始化信号，但根据您的时钟，达到平衡不应超过一两秒。我使用 LED 作为输出来防止电路优化。

```
architecture Behavioral of top is
signal shifter : std_logic_vector(<insert size> downto 0) := (others => '0');
begin    
        process(clk)
    begin
        if(clk'event and clk = '1')then
            shift_bit <= not shift_bit;
                shifter <= shift_bit & shifter(shifter'high downto 1);
        end if;
    end process;

led <= shifter(0);
end Behavioral; 
```

# javascript - 输入类型按钮在按下时会改变颜色？

> ID：11998777
> 
> 赞同：6
> 
> 时间：2012-08-17T01:44:14.083
> 
> 标签：javascript, html, button, input, dom-events

我希望我的输入 type=button 仅在按下时更改颜色。例如，如果我有一个白色按钮，我希望它仅在按下时变为绿色，当不再按下时，我希望它返回白色。我怎样才能在 HTML 和 Javascript 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T01:46:35.217

这个状态的 CSS 选择器被称为`:active`

所以如果你这样做：

`input.btn:active { background:green }`

那应该工作。

看**[演示](http://jsbin.com/ekigeb/1/edit)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-18T12:07:58.653

对我来说，它只适用于：

```
<style>
input:active{  background-color:green}
</style> 
```

另一种选择是在鼠标悬停时指定，仅用于按钮：

```
<style>
input[type=button]:hover{  background-color: #46000D}
<style> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T01:51:51.843

普通的 HTML + JavaSctipt：

```
<input type="button" style="background-color:white" value="Click Me" onmousedown="this.style.background='green'" onmouseup="this.style.background='white'" /> 
```

演示：http: [//jsfiddle.net/bqjzq/](http://jsfiddle.net/bqjzq/)

# powershell - PowerShell 可以处理键盘事件吗？作为宏编程语言，或 AutoHotKey 替代品

> ID：11998778
> 
> 赞同：1
> 
> 时间：2012-08-17T01:44:20.630
> 
> 标签：powershell

我经常使用 AutoHotKey，我非常喜欢它。但是即使使用了几年，语法仍然很繁琐。是否可以使用 PowerShell 创建键盘宏？因此，当我键入 Alt-1 时，我的电子邮件地址会在屏幕上输入，等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:44:30.823

我怀疑您可以在本机 PowerShell/Cmdlet 中执行此操作，但由于您可以调用 Windows API，您应该能够执行此操作。

我在 PowerShell 中找到了这两个用于键盘记录器的链接，它们需要做同样的事情（在没有焦点的情况下读取键盘），它们都通过编译一些 C# 来调用 Windows API 来工作。

这不是一个好的解决方案，但您可以将其包装起来并在其上放置一个不错的 API：

[http://code.google.com/p/nishang/source/browse/trunk/Keylogger.ps1](http://code.google.com/p/nishang/source/browse/trunk/Keylogger.ps1) http://zokoloco.blogspot.co.uk/2011/03/key-logger-for-special-project-using .html

# iphone - 如何以编程方式在 Storyboard 中调整 UIBarButtonItem 的可见性

> ID：11998779
> 
> 赞同：2
> 
> 时间：2012-08-17T01:44:24.677
> 
> 标签：iphone, ios, ios4, storyboard

我有一个 UIBarButtonItem（在 Storyboard 中定义），我已经分配给我自己的自定义 SwitchConsumerBarButton 类。

我想要做的是根据某些标准规定它在 Page Init 上的可见性。我想做这个程序化的。我已经尝试实现 -(id) init 但它没有被调用，我如何控制这个对象的初始化？我已经查看了可以为这种类型调用的不同初始化方法，但我不知道 Storyboard 会调用哪一个？

```
@implementation SwitchBarButton

-(id) init
{
    if(self = [super init]) {
        NSLog(@"gwojbngowj");
    }
    return self;
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T01:49:10.720

我不确定您是要调整 alpha，还是要完全隐藏按钮，所以两者兼而有之。

```
if (myCondition == YES) {
    myButton.alpha = 0.5;
    //Or if you mean hide all together...
    [myButton setHidden:YES];
} 
```

如果您希望根据变量创建按钮，您可以这样做：

```
if (myCondition == YES) {
    UIBarButtonItem *myBarItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAction target:self action:@selector(mySelector)];
    [self.navigationItem setRightBarButtonItem:myBarItem];
} 
```

# javascript - WebGL - 无效操作使用程序

> ID：11998781
> 
> 赞同：10
> 
> 时间：2012-08-17T01:44:36.117
> 
> 标签：javascript, webgl

我正在学习 WebGL，并且正在学习与照明有关的[教程](http://learningwebgl.com/blog/?p=684)。我是 JavaScript 新手，所以我还不太擅长调试它。我不断收到这些错误，有人知道我为什么会遇到这些错误以及如何解决吗？

```
WebGL: INVALID_OPERATION: useProgram: program not valid http://insanergamer.zxq.net/:1
WebGL: INVALID_OPERATION: getAttribLocation: program not linked http://insanergamer.zxq.net/:1
WebGL: INVALID_OPERATION: getUniformLocation: program not linked http://insanergamer.zxq.net/:1
WebGL: too many errors, no more errors will be reported to the console for this context. 
```

**索引.html**

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf 8" />
    <link rel="stylesheet" href="main.css">
    <script type="text/javascript" language="javascript" src="gl-matrix.js"></script>
    <script type="text/javascript" language="javascript" src="webgl-utils.js"></script>
    <script type="text/javascript" language="javascript" src="first.js"></script>

        <script id="shader-fs" type="x-shader/x-fragment">
               precision mediump float;

                varying vec2 vTextureCoord;
                varying vec3 vLightWeighting;

                uniform sampler2D uSampler;

                void main(void) {
                    vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));
                    gl_FragColor = vec4(textureColor.rgb * vLightWeighting, textureColor.a);
                }

        </script>

        <script id="shader-vs" type="x-shader/x-vertex">
            attribute vec3 aVertexPosition;
            attribute vec3 aVertexNormal;
            attribute vec2 aTextureCoord;

            uniform mat4 uMVMatrix;
            uniform mat4 uPMatrix;
            uniform mat3 uNMatrix;

            uniform vec3 uAmbientColor;

            uniform vec3 uLightingDirection;
            uniform vec3 uDirectionalColor;

            uniform bool uUseLighting;

            varying vec2 vTextureCoord;
            varying vec3 vLightWeighting;

            void main(void) {
                gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
                vTextureCoord = aTextureCoord;

                if (!uUseLighting) {
                    vLightWeighting = vec3(1.0, 1.0, 1.0);
                } else {
                    vec3 transformedNormal = uNMatrix * aVertexNormal;
                    float directionalLightWeighting = max(dot(transformedNormal, uLightingDirection), 0.0);
                    vLightWeighting = uAmbientColor + uDirectionalColor * directionalLightWeighting;
                }
        </script>
</head>
<body onLoad="webGLStart()">
    <header>
    </header>
    <nav>
    </nav>
    <section>
        <h3><a href="todo.html">Link to the TODO page.</a></h3>

        <form>
            <input type="checkbox" id="lighting"></input>Lighting On/Off<br />
            Ambient Lighting Color: Red:<input type="text" id="ambientR"></input> Green:<input type="text" id="ambientG"></input> Blue:<input type="text" id="ambientB"></input> <br />
            Light Direction: X:<input type="text" id="lightDirectionX"></input> Y:<input type="text" id="lightDirectionY"></input> Z:<input type="text" id="lightDirectionZ"></input> <br />
            Direction Lighting Color: Red:<input type="text" id="directionalR"></input> Green:<input type="text" id="directionalG"></input> Blue:<input type="text" id="directionalB"></input> <br />
        </form>

        <p>Press 'F' to change Texture quality.</p>
        <p>Use Arrow Keys to rotate cube.</p>
        <p>Page Up and Page down to zoom in and out.</p>
        <canvas canvasProperties="prop" id="canvas1" style="border: none;" width="1280" height="720"></canvas>
        <article>
            <header>
            </header>
            <footer>
            </footer>
        </article>
    </section>
    <aside>
    </aside>
    <footer>
    </footer>
</body> 
```

**第一个.js**

```
 var gl;
function initGL(canvas) {
    try {
        gl = canvas.getContext("experimental-webgl");
        gl.viewportWidth = canvas.width;
        gl.viewportHeight = canvas.height;
    } catch (e) {
    }
    if (!gl) {
        alert("Could not initialise WebGL, sorry :-(");
    }
}

function getShader(gl, id) {
    var shaderScript = document.getElementById(id);
    if (!shaderScript) {
        return null;
    }

    var str = "";
    var k = shaderScript.firstChild;
    while (k) {
        if (k.nodeType == 3) {
            str += k.textContent;
        }
        k = k.nextSibling;
    }

    var shader;
    if (shaderScript.type == "x-shader/x-fragment") {
        shader = gl.createShader(gl.FRAGMENT_SHADER);
    } else if (shaderScript.type == "x-shader/x-vertex") {
        shader = gl.createShader(gl.VERTEX_SHADER);
    } else {
        return null;
    }

    gl.shaderSource(shader, str);
    gl.compileShader(shader);

    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
        alert(gl.getShaderInfoLog(shader));
        return null;
    }

    return shader;
}

var shaderProgram;

function initShaders() {
    var fragmentShader = getShader(gl, "shader-fs");
    var vertexShader = getShader(gl, "shader-vs");

    shaderProgram = gl.createProgram();
    gl.attachShader(shaderProgram, vertexShader);
    gl.attachShader(shaderProgram, fragmentShader);
    gl.linkProgram(shaderProgram);

    if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {
        alert("Could not initialise shaders");
    }

    gl.useProgram(shaderProgram);

    shaderProgram.vertexPositionAttribute = gl.getAttribLocation(shaderProgram, "aVertexPosition");
    gl.enableVertexAttribArray(shaderProgram.vertexPositionAttribute);

    shaderProgram.textureCoordAttribute = gl.getAttribLocation(shaderProgram, "aTextureCoord");
    gl.enableVertexAttribArray(shaderProgram.textureCoordAttribute);

    shaderProgram.vertexNormalAttribute = gl.getAttribLocation(shaderProgram, "aVertexNormal");
    gl.enableVertexAttribArray(shaderProgram.vertexNormalAttribute);

    shaderProgram.pMatrixUniform = gl.getUniformLocation(shaderProgram, "uPMatrix");
    shaderProgram.mvMatrixUniform = gl.getUniformLocation(shaderProgram, "uMVMatrix");
    shaderProgram.nMatrixUniform = gl.getUniformLocation(shaderProgram, "uNMatrix");
    shaderProgram.samplerUniform = gl.getUniformLocation(shaderProgram, "uSampler");
    shaderProgram.useLightingUniform = gl.getUniformLocation(shaderProgram, "uUseLighting");
    shaderProgram.ambientColorUniform = gl.getUniformLocation(shaderProgram, "uAmbientColor");
    shaderProgram.lightingDirectionUniform = gl.getUniformLocation(shaderProgram, "uLightingDirection");
    shaderProgram.directionalColorUniform = gl.getUniformLocation(shaderProgram, "uDirectionalColor");
}

var cubeTextures = Array();
function initTexture()
{
    var cubeImage = new Image();

    for(var i=0;i < 3; i++)
    {
        var texture = gl.createTexture();
        texture.image = cubeImage;
        cubeTextures.push(texture);
    }

    cubeImage.onload = function()
    {
        handleLoadedTexture(cubeTextures);
    }
    cubeImage.src = "cube.png";
}

function handleLoadedTexture(texture)
{
    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);

    gl.bindTexture(gl.TEXTURE_2D,texture[0]);
    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, texture[0].image);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);

    gl.bindTexture(gl.TEXTURE_2D, texture[1]);
    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, texture[1].image);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);

    gl.bindTexture(gl.TEXTURE_2D, texture[2]);
    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, texture[2].image);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);
    gl.generateMipmap(gl.TEXTURE_2D);

    gl.bindTexture(gl.TEXTURE_2D, null);
}

var mvMatrix = mat4.create();
var mvMatrixStack = []
var pMatrix = mat4.create();

function mvPushMatrix()
{
    var copy = mat4.create();
    mat4.set(mvMatrix, copy);
    mvMatrixStack.push(copy);
}

function mvPopMatrix()
{
    if(mvMatrixStack.length == 0)
    {
        throw "No Matrix to Pop!";
    }
    mvMatrix = mvMatrixStack.pop();
}

function degToRad(degrees)
{
    return degrees * Math.PI / 180;
}
function setMatrixUniforms() {
    gl.uniformMatrix4fv(shaderProgram.pMatrixUniform, false, pMatrix);
    gl.uniformMatrix4fv(shaderProgram.mvMatrixUniform, false, mvMatrix);

    var normalMatrix = mat3.create();
    mat4.toInverseMat3(mvMatrix, normalMatrix);
    mat3.transpose(normalMatrix);
    gl.uniformMatrix3fv(shaderProgram.nMatrixUniform, false, normalMatrix);
}

var cubeVertexPositionBuffer;
var cubeVertexTextureCoordBuffer;
var cubeVertexIndexBuffer;

function initBuffers() {

    cubeVertexPositionBuffer = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER, cubeVertexPositionBuffer);
    vertices = [
       // Front face
      -1.0, -1.0,  1.0,
       1.0, -1.0,  1.0,
       1.0,  1.0,  1.0,
      -1.0,  1.0,  1.0,

      // Back face
      -1.0, -1.0, -1.0,
      -1.0,  1.0, -1.0,
       1.0,  1.0, -1.0,
       1.0, -1.0, -1.0,

      // Top face
      -1.0,  1.0, -1.0,
      -1.0,  1.0,  1.0,
       1.0,  1.0,  1.0,
       1.0,  1.0, -1.0,

      // Bottom face
      -1.0, -1.0, -1.0,
       1.0, -1.0, -1.0,
       1.0, -1.0,  1.0,
      -1.0, -1.0,  1.0,

      // Right face
       1.0, -1.0, -1.0,
       1.0,  1.0, -1.0,
       1.0,  1.0,  1.0,
       1.0, -1.0,  1.0,

      // Left face
      -1.0, -1.0, -1.0,
      -1.0, -1.0,  1.0,
      -1.0,  1.0,  1.0,
      -1.0,  1.0, -1.0,
    ];
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);
    cubeVertexPositionBuffer.itemSize = 3;
    cubeVertexPositionBuffer.numItems = 24;

     cubeVertexNormalBuffer = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER, cubeVertexNormalBuffer);
    var vertexNormals = [
        // Front face
         0.0,  0.0,  1.0,
         0.0,  0.0,  1.0,
         0.0,  0.0,  1.0,
         0.0,  0.0,  1.0,

        // Back face
         0.0,  0.0, -1.0,
         0.0,  0.0, -1.0,
         0.0,  0.0, -1.0,
         0.0,  0.0, -1.0,

        // Top face
         0.0,  1.0,  0.0,
         0.0,  1.0,  0.0,
         0.0,  1.0,  0.0,
         0.0,  1.0,  0.0,

        // Bottom face
         0.0, -1.0,  0.0,
         0.0, -1.0,  0.0,
         0.0, -1.0,  0.0,
         0.0, -1.0,  0.0,

        // Right face
         1.0,  0.0,  0.0,
         1.0,  0.0,  0.0,
         1.0,  0.0,  0.0,
         1.0,  0.0,  0.0,

        // Left face
        -1.0,  0.0,  0.0,
        -1.0,  0.0,  0.0,
        -1.0,  0.0,  0.0,
        -1.0,  0.0,  0.0
    ];
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertexNormals), gl.STATIC_DRAW);
    cubeVertexNormalBuffer.itemSize = 3;
    cubeVertexNormalBuffer.numItems = 24;

    cubeVertexTextureCoordBuffer = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER, cubeVertexTextureCoordBuffer);
    var textureCoords = [
         // Front face
          0.0, 0.0,
          1.0, 0.0,
          1.0, 1.0,
          0.0, 1.0,

          // Back face
          1.0, 0.0,
          1.0, 1.0,
          0.0, 1.0,
          0.0, 0.0,

          // Top face
          0.0, 1.0,
          0.0, 0.0,
          1.0, 0.0,
          1.0, 1.0,

          // Bottom face
          1.0, 1.0,
          0.0, 1.0,
          0.0, 0.0,
          1.0, 0.0,

          // Right face
          1.0, 0.0,
          1.0, 1.0,
          0.0, 1.0,
          0.0, 0.0,

          // Left face
          0.0, 0.0,
          1.0, 0.0,
          1.0, 1.0,
          0.0, 1.0,
    ];
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(textureCoords), gl.STATIC_DRAW);
    cubeVertexTextureCoordBuffer.itemSize = 2;
    cubeVertexTextureCoordBuffer.numItems = 24;

    cubeVertexIndexBuffer = gl.createBuffer();
    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, cubeVertexIndexBuffer);
    var cubeVertexIndices = [
      0, 1, 2,      0, 2, 3,    // Front face
      4, 5, 6,      4, 6, 7,    // Back face
      8, 9, 10,     8, 10, 11,  // Top face
      12, 13, 14,   12, 14, 15, // Bottom face
      16, 17, 18,   16, 18, 19, // Right face
      20, 21, 22,   20, 22, 23  // Left face
    ]

    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(cubeVertexIndices), gl.STATIC_DRAW);
    cubeVertexIndexBuffer.itemSize = 1;
    cubeVertexIndexBuffer.numItems = 36;
}

var rCubeX = 0;
var SpeedX = 0;

var rCubeY = 0;
var SpeedY = 0;

var z = -5.0;

var filter = 0;

function drawScene() {
    gl.viewport(0, 0, gl.viewportWidth, gl.viewportHeight);
    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);

    mat4.perspective(45, gl.viewportWidth / gl.viewportHeight, 0.1, 100.0, pMatrix);

    mat4.identity(mvMatrix);

    mat4.translate(mvMatrix, [0.0, 0.0, z]);

    mvPushMatrix();
    mat4.rotate(mvMatrix, degToRad(rCubeX), [1, 0, 0]);
    mat4.rotate(mvMatrix, degToRad(rCubeY), [0, 1, 0]);

    gl.bindBuffer(gl.ARRAY_BUFFER, cubeVertexPositionBuffer);
    gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, cubeVertexPositionBuffer.itemSize, gl.FLOAT, false, 0, 0);

    gl.bindBuffer(gl.ARRAY_BUFFER, cubeVertexNormalBuffer);
    gl.vertexAttribPointer(shaderProgram.vertexNormalAttribute, cubeVertexNormalBuffer.itemSize, gl.FLOAT, false, 0, 0);

    gl.bindBuffer(gl.ARRAY_BUFFER, cubeVertexTextureCoordBuffer);
    gl.vertexAttribPointer(shaderProgram.textureCoordAttribute, cubeVertexTextureCoordBuffer.itemSize, gl.FLOAT, false, 0, 0);

    gl.activeTexture(gl.TEXTURE0);
    gl.bindTexture(gl.TEXTURE_2D, cubeTextures[filter]);
    gl.uniform1i(shaderProgram.samplerUniform, 0);
    var lighting = document.getElementById("lighting").checked;
    gl.uniform1i(shaderProgram.useLightingUniform, lighting);
    if(lighting)
    {
        gl.uniform3f(
            shaderProgram.ambientColorUniform,
            parseFloat(document.getElementById("ambientR").value),
            parseFloat(document.getElementById("ambientG").value),
            parseFloat(document.getElementById("ambientB").value)
        );
    }

    var lightingDirection = [
        parseFloat(document.getElementById("lightDirectionX").value),
        parseFloat(document.getElementById("lightDirectionY").value),
        parseFloat(document.getElementById("lightDirectionZ").value)
    ];
    var adjustedLD = vec3.create();
    vec3.normalize(lightingDirection, adjustedLD);
    vec3.scale(adjustedLD, -1);
    gl.uniform3fv(shaderProgram.lightingDirectionUniform, adjustedLD);
    gl.uniform3f(
        shaderProgram.directionalColorUniform,
        parseFloat(document.getElementById("directionalR").value),
        parseFloat(document.getElementById("directionalG").value),
        parseFloat(document.getElementById("directionalB").value)   
    );

    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, cubeVertexIndexBuffer);
    setMatrixUniforms();
    gl.drawElements(gl.TRIANGLES, cubeVertexIndexBuffer.numItems, gl.UNSIGNED_SHORT, 0);

    mvPopMatrix();
}

var lastTime = 0;
function animate()
{
    var timeNow = new Date().getTime();
    if(lastTime != 0)
    {
        var elapsed = timeNow - lastTime;

        rCubeX += (SpeedX * elapsed) / 1000.0;
        rCubeY += (SpeedY * elapsed) / 1000.0;
    }
    lastTime = timeNow;
}

 var currentlyPressedKeys = {};

 function handleKeyDown(event){
    currentlyPressedKeys[event.keyCode] = true;
    if(String.fromCharCode(event.keyCode) == "F"){
        filter += 1;
        if(filter == 3){
            filter = 0;
        }
    }
 }

 function handleKeyUp(event){
    currentlyPressedKeys[event.keyCode] = false;

 }
function handleKeys()
{
    if(currentlyPressedKeys[33])
    {
     z -= 0.05;
    }

    if(currentlyPressedKeys[34])
    {
        z += 0.05;
    }

    if(currentlyPressedKeys[37])
    {
        SpeedY --;
    } else if (SpeedY < 0){
        SpeedY ++;
    }

    if(currentlyPressedKeys[39])
    {
        SpeedY ++;
    }else if(SpeedY > 0){
        SpeedY --;
    }

     if (currentlyPressedKeys[38]) {
         SpeedX --;
    } else if(SpeedX < 0){
         SpeedX ++;
    }

    if (currentlyPressedKeys[40]) {
         SpeedX ++;
    } else if(SpeedX > 0){
         SpeedX--;
    }
}

function update()
{
    requestAnimFrame(update);
    handleKeys();
    drawScene();
    animate();
}

function webGLStart() {
    var canvas = document.getElementById("canvas1");
    initGL(canvas);
    initShaders();
    initBuffers();
    initTexture();

    gl.clearColor(0.0, 0.0, 0.0, 1.0);
    gl.enable(gl.DEPTH_TEST);

    document.onkeydown = handleKeyDown;
    document.onkeyup = handleKeyUp;

    update();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T03:12:53.373

在这种特殊情况下，原因是您在顶点着色器末尾缺少一个结束 }，但这并不能解释为什么您没有看到有关着色器编译失败的消息的原因。

您的错误检查代码`getShader`实际上看起来应该可以正常工作，并且您实际上会在编译和链接失败时检查并警告 Clutch 提到的错误日志。

当我复制您的代码并逐字运行时，它正确地给了我一个错误（“意外的 EOF”），所以也许您关闭了 javascript 警报？您可能会考虑`console.log`在您喜欢的浏览器中使用而不是警报并了解 Javascript 控制台。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T02:18:19.887

WebGL 通过控制台日志消息给你一个很大的提示：

WebGL：INVALID_OPERATION：useProgram：程序无效 WebGL：INVALID_OPERATION：getAttribLocation：程序未链接

该程序未链接，因此无法使用或查询其状态。

您的程序似乎确实在检查着色器是否正确编译以及程序是否已链接，但事实并非如此。您的错误检查代码可能有问题，隐藏了真正的问题。我总是在新编译的着色器和最近链接的程序上调用这两个函数：

获取着色器信息日志

获取程序信息日志

它们都返回字符串并将帮助您找到根本原因。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-20T09:14:43.123

我也遇到了这些奇怪的错误，但仅限于 Chrome 而不是 Firefox：

```
WebGL: INVALID_OPERATION: getAttribLocation: program not linked
WebGL: INVALID_OPERATION: getUniformLocation: program not linked 
WebGL: INVALID_OPERATION: useProgram: program not valid 
WebGL: INVALID_OPERATION: getAttribLocation: program not linked 
WebGL: INVALID_OPERATION: getUniformLocation: program not linked 
```

我还注意到[http://threejs.org/](http://threejs.org/)上的大多数示例都会抛出错误（仅在 chrome 中）。通过重新下载源代码，我能够摆脱错误。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-07-16T00:19:26.760

使用更新版本的three.js，例如来自此CDN [http://cdnjs.com/libraries/three.js](http://cdnjs.com/libraries/three.js)。旧版本在有效代码上抛出上述错误。

# git - git svn clone 失败后我能做什么？

> ID：11998782
> 
> 赞同：1
> 
> 时间：2012-08-17T01:44:36.810
> 
> 标签：git, svn, version-control, centos, git-svn

我的问题与这个[git-svn 克隆意外失败](https://stackoverflow.com/questions/11398415/git-svn-clone-fails-unexpectedly)不同，因为它可以通过删除 --no-metadata 选项来解决，我的命令中没有这样的选项，我的命令很简单：

```
git svn clone -s svn://xxx.xxx 
```

amd 再一次，我无法从 svn repo 克隆代码:( 错误消息如下：

```
r506 = 82a01de65882f5bd800aca5a6f3556ba940ea3f5 (refs/remotes/trunk)
Found possible branch point: svn://svn.nginx.org/nginx/trunk => svn://svn.nginx.org/nginx/tags/release-0.1.27, 506
Found branch parent: (refs/remotes/tags/release-0.1.27) 82a01de65882f5bd800aca5a6f3556ba940ea3f5
Following parent with do_switch
Use of uninitialized value in concatenation (.) or string at /usr/lib/perl5/vendor_perl/5.8.8/i386-linux-thread-multi/SVN/Core.pm line 584.
Network connection closed unexpectedly:  at /usr/libexec/git-core/git-svn line 3136

real    8m13.819s
user    0m24.079s
sys     0m44.250s
[root@home git-test]# echo $?
1 
```

在我无法从 svn repo 克隆代码后我能做什么:(从头开始？又失败了？为什么会发生这种情况，这是 git、svn 还是 git-svn 的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T06:48:45.607

尝试使用参数指定有限数量的修订`--revision`。您很可能不需要完整的历史记录，尤其是如果项目历史悠久。

从手册页：

> 这允许支持部分/烧灼历史的修订范围。$NUMBER、$NUMBER1:$NUMBER2（数字范围）、$NUMBER:HEAD 和 BASE:$NUMBER 均受支持。

因此，例如`--revision 3000:HEAD`将从 r3000 开始获取修订。

# mercurial - Mercurial：如何恢复子存储库文件？

> ID：11998786
> 
> 赞同：1
> 
> 时间：2012-08-17T01:44:48.800
> 
> 标签：mercurial, mercurial-subrepos

我有一个带有子回购（在本例中为引导程序）的 mercurial 回购。

我修改了文件，然后手动修改回来，但 hg 仍然认为它已修改并且不会让我提交其他更改（我不想向 sup-repo 提交任何内容）。

```
dl@Debian6:~/company/company-production$ hg status -S
M company/cms/static/less/index.less ## I want this file
M company/cms/static/vendor/bootstrap/less/carousel.less ## I DONT want this file
M company/templates/v2/homepage/carousel.html  ## I want this file 
```

上面你可以看到状态认为它已修改。但是下面当我运行 diff carousel.less 时没有出现。这对我来说很奇怪。

```
dl@Debian6:~/company/company-production$ hg diff -S --stat
company/cms/static/less/index.less          |  13 +++++++++++--
company/templates/v2/homepage/carousel.html |  10 ++++------
2 files changed, 15 insertions(+), 8 deletions(-) 
```

所以我尝试恢复 suprepo 文件。但它不让我。

```
dl@Debian6:~/company/company-production$ hg revert company/cms/static/vendor/bootstrap/less/carousel.less
company/cms/static/vendor/bootstrap/less/carousel.less: no such file in rev 57e22a1738af 
```

**如何恢复 subrepo 文件：carousel.less，以便我可以提交更改？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T05:17:57.197

切换到`bootstrap`目录，这样你就**在**subrepo 中，然后运行：

```
hg revert less/carousel.less 
```

（奇怪的是，*没有*`hg diff -S --stat`显示变化。）

# android - 如何使用 android AccountManager 在 twitter 中进行授权？

> ID：11998788
> 
> 赞同：4
> 
> 时间：2012-08-17T01:45:13.330
> 
> 标签：android, twitter, accountmanager, scribe, android-account

如何使用 android AccountManager 在 twitter 中进行授权？

```
AccountManager am = AccountManager.get(this);
Account[] accts = am.getAccountsByType(TWITTER_ACCOUNT_TYPE);
if(accts.length > 0) {
    Account acct = accts[0];
    am.getAuthToken(acct, "com.twitter.android.oauth.token"/*what goes here*/, null, this, new AccountManagerCallback<Bundle>() {

    @Override
    public void run(AccountManagerFuture<Bundle> arg0) {
        try {
                     Bundle b = arg0.getResult();  
                     Log.e("TrendDroid", "THIS AUTHTOKEN: " + b.getString(AccountManager.KEY_AUTHTOKEN));  
                } catch (Exception e) {  
                     Log.e("TrendDroid", "EXCEPTION@AUTHTOKEN");  
                }  
    }}, null);
} 
```

现在我得到了**com.twitter.android.oauth.token**和**com.twitter.android.oauth.token.secret**。但下一步是什么？我如何使用它来授权？

我使用 scribe api，并尝试像这样使用它：

```
service.signRequest(new Token(token, secret), request); 
```

但它不起作用。我还尝试了另一种不起作用的方法。有很多这样的问题：

[https://dev.twitter.com/discussions/4875](https://dev.twitter.com/discussions/4875)

[https://groups.google.com/forum/?fromgroups#!topic/twitter-development-talk/1tWEx--5h9w%5B1-25%5D](https://groups.google.com/forum/?fromgroups#!topic/twitter-development-talk/1tWEx--5h9w%5B1-25%5D)

[http://osdir.com/ml/twitter4j/2011-06/msg00128.html](http://osdir.com/ml/twitter4j/2011-06/msg00128.html)

[Android：如何通过帐户管理器进行 Twitter oAuth](https://stackoverflow.com/questions/11560609/android-how-to-twitter-oauth-through-account-manager)

[通过 Android 的 AccountManager 类进行 Twitter 身份验证](https://stackoverflow.com/questions/6341164/twitter-authentication-through-androids-accountmanager-classes)

[使用客户经理获取 OAuth 令牌](https://stackoverflow.com/questions/10512230/using-account-manager-to-get-oauth-token)

没有人给出具体答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-09T18:38:46.937

Android 的 AccountManager 返回的`com.twitter.android.oauth.token`和`com.twitter.android.oauth.token.secret`凭据仅使用 Twitter 的官方 Consumer Key 和 Secret 进行身份验证。AFAIK 它们实际上对第三方开发人员没有用。

关于 Twitter，我只想说它们已经存在，如果 Twitter 通过应用程序更新更改它们，他们会在没有应用程序更新的情况下破坏每个用户的 OAuth。

# java - 如何将 \\ 更改为 \

> ID：11998794
> 
> 赞同：1
> 
> 时间：2012-08-17T01:46:00.653
> 
> 标签：java, backslash

我刚刚做了一个小程序，将路径保存到 INI 文件中。

但是在输出中，路径是这样写的：

```
C:\\Windows 
```

我希望它像这样放置：

```
C:\Windows 
```

我用 string.replace 尝试了很多方法，但是一个反斜杠会出错，并且在输出中放 4 不会产生 1 个反斜杠，而是 4 ...

我没主意了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T01:50:18.417

使用[文件分隔符](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/File.html#separator)将为您提供独立于平台的字符，您不必逃避它。

有关所有不同选项，请参阅[此](https://stackoverflow.com/questions/8075373/file-separator-vs-filesystem-getseparator-vs-system-getpropertiesfile-separa)问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T01:50:48.760

这是获取双反斜杠的示例：

```
System.out.println("File path = C:\\"+"\\"+"Windows"); 
```

会输出这个：

```
C:\\Windows 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T01:53:23.110

由于 OP 正在使用 Java，并且我假设这个 INI 文件将由 Java 应用程序使用，我认为他不需要使用反斜杠编写路径，因为 Java 会使用 Windows 将普通斜杠转换为反斜杠引擎盖下的文件分隔符。所以，只要写`C:/Windows`or`C:/some/path/here`就可以正常工作了。

# xcode - IBAction 推送视图控制错误-“预期表达式”

> ID：11998795
> 
> 赞同：1
> 
> 时间：2012-08-17T01:46:02.580
> 
> 标签：xcode, view, controller, push, ibaction

嘿伙计们，对不起，我环顾四周，但这里没有一个与我有关的预期表达错误论坛。我正在制作我的第一个应用程序，但我学到的任何东西都无法帮助我解决这个错误。我看了又看，只发现复杂应用程序中的错误，而我的应用程序非常基本。这是：这是更新后的代码！！！！！！

```
- (IBAction)StartButton:(id)sender;  <--- "Expected Expression"     
{        
   PrimaryViewController *controller = [[PrimaryViewController alloc] 
         initWithNibName:@"PrimaryViewController" bundle:nil];
   [self.navigationController pushViewController: controller animated:YES];  
} 
```

阅读这个 - 这是更新的代码，错误在这个“预期表达”的第一行说谢谢！（（（（更新：：它与xibs和StartViewController是它自己的类。））））请帮忙！在 - (IBAction)... 行上，它表示预期的表达式。当您按下开始按钮 IBAction 时，我正在尝试将视图控制器从主菜单推送到开始屏幕。它也链接到文件菜单。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T15:04:32.437

您需要创建一个实例`StartViewController`并推送它。试图推动班级本身是没有意义的。

就像是：

```
StartViewController *controller = [[StartViewController alloc] initWithNibName:@"StartViewController" bundle:nil];
[self.navigationController pushViewController: controller animated:YES]; 
```

`StartViewController`（假设这是 .xib 文件的正确名称，并且您的导航堆栈中还没有 .xib 的实例。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T05:38:33.210

错误可能是因为您在其他类中输入 IBAction 方法。确保在所有其他方法之后输入它。就在 @end 之前（在所有 } 之后）

# java - 如何在 Java 中加密 RDP 密码

> ID：11998797
> 
> 赞同：2
> 
> 时间：2012-08-17T01:46:19.423
> 
> 标签：java, rdp

我想生成具有自动登录功能的 rdp 文件，因此需要生成加密密码并填写 rdp 文件。

对于加密工具，我使用的是 jna 开源的 Crypt32Util（我也尝试过 DPAPI DataProtector，结果是一样的）。但结果不正确...

正如[http://www.remkoweijnen.nl/blog/2007/10/18/how-rdp-passwords-are-encrypted/](http://www.remkoweijnen.nl/blog/2007/10/18/how-rdp-passwords-are-encrypted/)中所指出的，字符串应该是 unicode，这就是我在 getBytes 中使用 'UTF-16LE' 的原因（我也曾尝试使用 getBytes() 和 getBytes("UTF-8")，没有人工作......）

非常感谢您的帮助，给我一些启发，谢谢！

这是代码：

```
public String pwdEncrypt(String password){
    byte[] pwdBytes = null;
    try{
        pwdBytes = password.getBytes("UTF-16LE");
    }catch(Exception e){
        e.printStackTrace();
    }

    byte[] encryptedPwd = Crypt32Util.cryptProtectData(pwdBytes);       

    return String.valueOf(Hex.encodeHex(encryptedPwd));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T09:39:54.360

```
 String paasword ="pwd";
    DATA_BLOB pDataIn = new DATA_BLOB(password.getBytes(Charset.forName("UTF-16LE")));
    DATA_BLOB pDataEncrypted = new DATA_BLOB();
    System.out.println(Crypt32.INSTANCE.CryptProtectData(pDataIn, "psw", 
            null, null, null, WinCrypt.CRYPTPROTECT_UI_FORBIDDEN, pDataEncrypted));
   StringBuffer epwsb = new StringBuffer();
   byte[] pwdBytes= new byte [pDataEncrypted.cbData];      
   pwdBytes=pDataEncrypted.getData();
    Formatter formatter = new Formatter(epwsb);
     for ( final byte b : pwdBytes ) {
    formatter.format("%02X", b);
         }
  System.out.println("password 51:b:"+ epwsb.toString()); 
```

# ruby-on-rails - 自定义操作表单

> ID：11998799
> 
> 赞同：0
> 
> 时间：2012-08-17T01:46:37.830
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有这样的表格

```
<%= form_tag organizations_add_user_path, :method => :put do %>
  <label><h2>Add user</h2></label>
  <%= text_field_tag :nick %>
<% end %> 
```

我希望这个表单处理`add_user`来自`Organizations`控制器的动作

我的路线是这样的

```
resources :users, :sessions, :documents, :storages, :organizations

match 'dashboard' => 'dashboard#index'
match 'profile' => 'users#profile'
match 'organizations/add_user' => 'organizations#add_user', :via => :post 
```

但是当我提交表单时，应用程序会将我发送到`update`方法表单组织，组织 ID 为`add_user`. 我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T01:54:51.783

**您已经为 ' post** ' 方法定义了一个路由，但在表单中使用了 ' **put** ' 方法。

```
<%= form_tag organizations_add_user_path, :method => :post do %>
  <label><h2>Add user</h2></label>
  <%= text_field_tag :nick %>
<% end %> 
```

# elasticsearch - 为什么我的分析器会在我重新启动 Elastic Search 时消失？

> ID：11998800
> 
> 赞同：1
> 
> 时间：2012-08-17T01:46:40.827
> 
> 标签：elasticsearch

完整要点[https://gist.github.com/3442562](https://gist.github.com/3442562)

我有一个分析器：

```
"analyzer" : {
            "lowercase_keyword" : {
                "type" : "custom",
                "tokenizer" : "keyword",
                "filter" : ["lowercase", "trim"]
            }
        } 
```

在映射中引用：

```
"location_countries" : {
                "properties" : {
                    "country" : {
                        "type" : "string",
                        "analyzer" : "lowercase_keyword"
                    }
                }
            } 
```

当我在过滤器或构面中使用“国家”字段时，该字段（正确）被视为关键字。

```
curl -XGET 'localhost:9200/clinical_trials/_search?pretty=true' -d '
{
    "query" : {
        "term" : { "brief_title" : "dermatitis" }
    },
    "filter" : {
        "term" : { "country" : "united states" }
    },
    "facets" : {
        "tag" : {
            "terms" : { "field" : "country" }
        }
    }
}
' 
```

分面结果：

```
"facets" : {
    "tag" : {
      "_type" : "terms",
      "missing" : 0,
      "total" : 1,
      "other" : 0,
      "terms" : [ {
        "term" : "united states",
        "count" : 1
      } ]
    } 
```

一切正常，直到机器重新启动或 Elastic Search 服务重新启动。重新启动后，我的所有过滤器都停止工作，就好像分析器不存在一样。

针对相同数据的相同查询会导致：

```
"facets" : {
    "tag" : {
      "_type" : "terms",
      "missing" : 0,
      "total" : 2,
      "other" : 0,
      "terms" : [ {
        "term" : "united",
        "count" : 1
      }, {
        "term" : "states",
        "count" : 1
      } ]
    } 
```

如果我查询索引的 _settings/_mappings，分析器和映射仍然定义正确，但分析器似乎没有效果。

我究竟做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:10:56.670

国家/地区字段出现在多个嵌套文档中，但我仅设置其中一个字段的映射。重新启动后，elasticsearch 以不同的顺序加载字段，将过滤器/构面应用于错误的字段。

完全限定构面和过滤器字段名称可以解决我的问题。

```
curl -XGET 'localhost:9200/clinical_trials/_search?pretty=true' -d '
{
    "query" : {
        "term" : { "brief_title" : "dermatitis" }
    },
    "filter" : {
        "term" : { "location_countries.country" : "united states" }
    },
    "facets" : {
        "tag" : {
            "terms" : { "field" : "location_countries.country" }
        }
    }
}
' 
```

感谢[elasticsearch 邮件列表](https://groups.google.com/forum/?fromgroups=#!forum/elasticsearch)中的 Clint 提供的所有帮助。

# php - 处理大量选择（下拉列表）

> ID：11998801
> 
> 赞同：0
> 
> 时间：2012-08-17T01:46:44.210
> 
> 标签：php, html

假设我将用户存储在数据库中，由 id（整数主键）标识。所有用户都具有多项选择属性，例如站点上的权限（管理员、成员、管理员等...）。我想创建一个 php 管理页面，我可以在其中为每个用户选择他/她的权限，以及一页上的所有用户（或至少一页上的更多用户）：

```
Tom   [_privileges_v_]
Ed    [_privileges_v_]
Lisa  [_privileges_v_]
... 
```

怎么做才有效？

如果我打印将 name 属性设置为记录 id 的下拉列表，那么我如何通过 php 访问它们？

```
<select name="12323">
    <option value="admin">admin</option>
    <option value="user">user</option>
    ...
</select>

<select name="4323">
    <option value="admin">admin</option>
    <option value="user">user</option>
    ...
</select> 
```

然后在我发布此表单后，我的`$_POST`数组将包含一个`$_POST["12323"]`和一个`$_POST["4323"]`成员。

**我怎么能做这样的事情，所以我可以遍历这些`$_POST`值？**

感谢您提供任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T02:01:01.800

你可以像这样输出一个选择框

```
<select name="user_4323">
    <option value="admin">admin</option>
    <option value="user">user</option>
    ...
</select>

<input name="otherinp" value=""/> 
```

如果您的表单有另一个输入....然后在 php 代码中您可以执行

```
foreach($_POST AS $name=>$value) {
  if (strpos($name, "user_")===0){
     $userid = str_replace("user_","",$name);
     //Do st with userid
  }
}

//Work with orther input $_POST[''] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T01:50:53.730

要么再次获取所有用户并遍历他们的 ID，然后检查是否有链接到它的帖子值，或者遍历所有帖子值。

> ```
> foreach($_POST AS $name=>$value) {
>   echo "Selection box with name {$name} has value {$value}";
> } 
> ```

# python - Python安装pyrit错误，CentOS中的命令gcc

> ID：11998805
> 
> 赞同：1
> 
> 时间：2012-08-17T01:47:34.093
> 
> 标签：python, centos, centos6

我无法安装，控制台中的所有代码都无法编译！所以在 centos 6 32 bits -- run and later 中，我有依赖 python 和 python-dev、工具等。但我不知道，如果你缺少另一个

硫黄

python setup.py 构建

```
svn: '.' is not a working copy
running build
running build_py
running build_ext
building 'cpyrit._cpyrit_cpu' extension
gcc -pthread -fno-strict-aliasing -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m32 -march=i686 -mtune=atom -fasynchronous-unwind-tables -D_GNU_SOURCE -fPIC -fwrapv -DNDEBUG -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m32 -march=i686 -mtune=atom -fasynchronous-unwind-tables -D_GNU_SOURCE -fPIC -fwrapv -fPIC -I/usr/include/python2.6 -c cpyrit/_cpyrit_cpu.c -o build/temp.linux-i686-2.6/cpyrit/_cpyrit_cpu.o -Wall -fno-strict-aliasing -DVERSION="0.4.0"
Assembler messages:
Fatal error: can't create build/temp.linux-i686-2.6/cpyrit/_cpyrit_cpu.o: Permission denied
cpyrit/_cpyrit_cpu.c:35:26: error: openssl/hmac.h: No such file or directory
cpyrit/_cpyrit_cpu.c:36:25: error: openssl/sha.h: No such file or directory
cpyrit/_cpyrit_cpu.c:37:18: error: pcap.h: No such file or directory
cpyrit/_cpyrit_cpu.c:58: error: expected specifier-qualifier-list before ‘SHA_CTX’
cpyrit/_cpyrit_cpu.c:98: error: expected specifier-qualifier-list before ‘pcap_t’
cpyrit/_cpyrit_cpu.c:210: error: expected declaration specifiers or ‘...’ before ‘SHA_CTX’
cpyrit/_cpyrit_cpu.c: In function ‘padlock_xsha1_prepare’:
cpyrit/_cpyrit_cpu.c:238: error: ‘output’ undeclared (first use in this function)
cpyrit/_cpyrit_cpu.c:238: error: (Each undeclared identifier is reported only once
cpyrit/_cpyrit_cpu.c:238: error: for each function it appears in.)
cpyrit/_cpyrit_cpu.c: At top level:
cpyrit/_cpyrit_cpu.c:249: error: expected ‘)’ before ‘*’ token
cpyrit/_cpyrit_cpu.c: In function ‘prepare_pmk_padlock’:
cpyrit/_cpyrit_cpu.c:286: error: ‘struct pmk_ctr’ has no member named ‘ctx_ipad’
cpyrit/_cpyrit_cpu.c:286: error: too many arguments to function ‘padlock_xsha1_prepare’
cpyrit/_cpyrit_cpu.c:289: error: ‘struct pmk_ctr’ has no member named ‘ctx_opad’
cpyrit/_cpyrit_cpu.c:289: error: too many arguments to function ‘padlock_xsha1_prepare’
cpyrit/_cpyrit_cpu.c:292: warning: implicit declaration of function ‘HMAC’
cpyrit/_cpyrit_cpu.c:292: warning: implicit declaration of function ‘EVP_sha1’
cpyrit/_cpyrit_cpu.c:292: error: ‘struct pmk_ctr’ has no member named ‘e1’
cpyrit/_cpyrit_cpu.c:295: error: ‘struct pmk_ctr’ has no member named ‘e2’
cpyrit/_cpyrit_cpu.c: In function ‘finalize_pmk_padlock’:
cpyrit/_cpyrit_cpu.c:304: error: ‘struct pmk_ctr’ has no member named ‘e1’
cpyrit/_cpyrit_cpu.c:305: error: ‘struct pmk_ctr’ has no member named ‘e2’
cpyrit/_cpyrit_cpu.c:308: warning: implicit declaration of function ‘padlock_xsha1_finalize’
cpyrit/_cpyrit_cpu.c:308: error: ‘struct pmk_ctr’ has no member named ‘ctx_ipad’
cpyrit/_cpyrit_cpu.c:309: error: ‘struct pmk_ctr’ has no member named ‘ctx_opad’
cpyrit/_cpyrit_cpu.c:311: error: ‘struct pmk_ctr’ has no member named ‘e1’
cpyrit/_cpyrit_cpu.c:313: error: ‘struct pmk_ctr’ has no member named ‘ctx_ipad’
cpyrit/_cpyrit_cpu.c:314: error: ‘struct pmk_ctr’ has no member named ‘ctx_opad’
cpyrit/_cpyrit_cpu.c:316: error: ‘struct pmk_ctr’ has no member named ‘e2’
cpyrit/_cpyrit_cpu.c: In function ‘finalize_pmk_sse2’:
cpyrit/_cpyrit_cpu.c:352: error: ‘struct pmk_ctr’ has no member named ‘ctx_ipad’
cpyrit/_cpyrit_cpu.c:353: error: ‘struct pmk_ctr’ has no member named ‘ctx_ipad’
    .............................. ... and more ................
 cpyrit/_cpyrit_cpu.c:368: error: ‘struct pmk_ctr’ has no member named ‘e1’
cpyrit/_cpyrit_cpu.c:369: error: ‘struct pmk_ctr’ has no member named ‘e2’
cpyrit/_cpyrit_cpu.c:396: error: ‘struct pmk_ctr’ has no member named ‘e1’
cpyrit/_cpyrit_cpu.c:397: error: ‘struct pmk_ctr’ has no member named ‘e2’
cpyrit/_cpyrit_cpu.c: In function ‘prepare_pmk_openssl’:
cpyrit/_cpyrit_cpu.c:422: warning: implicit declaration of function ‘SHA1_Init’
cpyrit/_cpyrit_cpu.c:422: error: ‘struct pmk_ctr’ has no member named ‘ctx_ipad’
cpyrit/_cpyrit_cpu.c:423: warning: implicit declaration of function ‘SHA1_Update’
cpyrit/_cpyrit_cpu.c:423: error: ‘struct pmk_ctr’ has no member named ‘ctx_ipad’
cpyrit/_cpyrit_cpu.c:430: error: ‘struct pmk_ctr’ has no member named ‘e1’
cpyrit/_cpyrit_cpu.c:433: error: ‘struct pmk_ctr’ has no member named ‘e2’
cpyrit/_cpyrit_cpu.c: In function ‘finalize_pmk_openssl’:
cpyrit/_cpyrit_cpu.c:440: error: ‘SHA_CTX’ undeclared (first use in this function)
cpyrit/_cpyrit_cpu.c:440: error: expected ‘;’ before ‘ctx’
cpyrit/_cpyrit_cpu.c:443: error: ‘struct pmk_ctr’ has no member named ‘e1’
cpyrit/_cpyrit_cpu.c:444: error: ‘struct pmk_ctr’ has no member named ‘e2’
cpyrit/_cpyrit_cpu.c:447: error: ‘ctx’ undeclared (first use in this function)
cpyrit/_cpyrit_cpu.c:447: error: ‘struct pmk_ctr’ has no member named ‘ctx_ipad’
cpyrit/_cpyrit_cpu.c:449: warning: implicit declaration of function ‘SHA1_Final’
cpyrit/_cpyrit_cpu.c:451: error: ‘struct pmk_ctr’ has no member named ‘ctx_opad’
cpyrit/_cpyrit_cpu.c:456: error: ‘struct pmk_ctr’ has no member named ‘e1’
cpyrit/_cpyrit_cpu.c:458: error: ‘struct pmk_ctr’ has no member named ‘ctx_ipad’
cpyrit/_cpyrit_cpu.c:462: error: ‘struct pmk_ctr’ has no member named ‘ctx_opad’
cpyrit/_cpyrit_cpu.c:467: error: ‘struct pmk_ctr’ has no member named ‘e2’
cpyrit/_cpyrit_cpu.c: In function ‘CPUDevice_solve’:
cpyrit/_cpyrit_cpu.c:543: error: ‘struct pmk_ctr’ has no member named ‘e1’
cpyrit/_cpyrit_cpu.c: In function ‘fourwise_md5hmac_openssl’:
cpyrit/_cpyrit_cpu.c:834: warning: implicit declaration of function ‘EVP_md5’
cpyrit/_cpyrit_cpu.c: In function ‘PcapDevice_init’:
cpyrit/_cpyrit_cpu.c:1384: error: ‘PcapDevice’ has no member named ‘p’
cpyrit/_cpyrit_cpu.c:1385: error: ‘PcapDevice’ has no member named ‘status’
cpyrit/_cpyrit_cpu.c:1385: error: ‘PcapDevice’ has no member named ‘datalink’
cpyrit/_cpyrit_cpu.c: In function ‘PcapDevice_dealloc’:
cpyrit/_cpyrit_cpu.c:1396: error: ‘PcapDevice’ has no member named ‘p’
cpyrit/_cpyrit_cpu.c:1396: error: ‘PcapDevice’ has no member named ‘status’
cpyrit/_cpyrit_cpu.c:1397: warning: implicit declaration of function ‘pcap_close’
cpyrit/_cpyrit_cpu.c:1397: error: ‘PcapDevice’ has no member named ‘p’
cpyrit/_cpyrit_cpu.c: In function ‘PcapDevice_close’:
cpyrit/_cpyrit_cpu.c:1407: error: ‘PcapDevice’ has no member named ‘status’
cpyrit/_cpyrit_cpu.c:1408: error: ‘PcapDevice’ has no member named ‘p’
cpyrit/_cpyrit_cpu.c:1409: error: ‘PcapDevice’ has no member named ‘status’
cpyrit/_cpyrit_cpu.c: In function ‘PcapDevice_setup’:
cpyrit/_cpyrit_cpu.c:1420: error: ‘PcapDevice’ has no member named ‘datalink’
cpyrit/_cpyrit_cpu.c:1420: warning: implicit declaration of function ‘pcap_datalink’
cpyrit/_cpyrit_cpu.c:1420: error: ‘PcapDevice’ has no member named ‘p’
cpyrit/_cpyrit_cpu.c:1422: warning: implicit declaration of function ‘pcap_datalink_val_to_name’
cpyrit/_cpyrit_cpu.c:1422: error: ‘PcapDevice’ has no member named ‘datalink’
cpyrit/_cpyrit_cpu.c:1450: error: ‘PcapDevice’ has no member named ‘status’
cpyrit/_cpyrit_cpu.c: In function ‘PcapDevice_open_live’:
cpyrit/_cpyrit_cpu.c:1461: error: ‘PCAP_ERRBUF_SIZE’ undeclared (first use in this function)
cpyrit/_cpyrit_cpu.c:1467: error: ‘PcapDevice’ has no member named ‘status’
cpyrit/_cpyrit_cpu.c:1473: error: ‘PcapDevice’ has no member named ‘p’
cpyrit/_cpyrit_cpu.c:1473: warning: implicit declaration of function ‘pcap_open_live’
cpyrit/_cpyrit_cpu.c:1474: error: ‘PcapDevice’ has no member named ‘p’
cpyrit/_cpyrit_cpu.c:1461: warning: unused variable ‘errbuf’
cpyrit/_cpyrit_cpu.c: In function ‘PcapDevice_open_offline’:
cpyrit/_cpyrit_cpu.c:1493: error: ‘PCAP_ERRBUF_SIZE’ undeclared (first use in this function)
cpyrit/_cpyrit_cpu.c:1499: error: ‘PcapDevice’ has no member named ‘status’
cpyrit/_cpyrit_cpu.c:1505: error: ‘PcapDevice’ has no member named ‘p’
cpyrit/_cpyrit_cpu.c:1505: warning: implicit declaration of function ‘pcap_open_offline’
cpyrit/_cpyrit_cpu.c:1506: error: ‘PcapDevice’ has no member named ‘p’
cpyrit/_cpyrit_cpu.c:1493: warning: unused variable ‘errbuf’
cpyrit/_cpyrit_cpu.c: In function ‘PcapDevice_read’:
cpyrit/_cpyrit_cpu.c:1530: error: ‘PcapDevice’ has no member named ‘status’
cpyrit/_cpyrit_cpu.c:1539: warning: implicit declaration of function ‘pcap_next_ex’
cpyrit/_cpyrit_cpu.c:1539: error: ‘PcapDevice’ has no member named ‘p’
cpyrit/_cpyrit_cpu.c:1549: error: dereferencing pointer to incomplete type
cpyrit/_cpyrit_cpu.c:1559: error: dereferencing pointer to incomplete type
cpyrit/_cpyrit_cpu.c:1560: error: dereferencing pointer to incomplete type
cpyrit/_cpyrit_cpu.c:1578: warning: implicit declaration of function ‘pcap_geterr’
cpyrit/_cpyrit_cpu.c:1578: error: ‘PcapDevice’ has no member named ‘p’
cpyrit/_cpyrit_cpu.c: In function ‘PcapDevice_send’:
cpyrit/_cpyrit_cpu.c:1598: error: ‘PcapDevice’ has no member named ‘status’
cpyrit/_cpyrit_cpu.c:1620: warning: implicit declaration of function ‘pcap_sendpacket’
cpyrit/_cpyrit_cpu.c:1620: error: ‘PcapDevice’ has no member named ‘p’
cpyrit/_cpyrit_cpu.c:1622: error: ‘PcapDevice’ has no member named ‘p’
cpyrit/_cpyrit_cpu.c: In function ‘PcapDevice_set_filter’:
cpyrit/_cpyrit_cpu.c:1639: error: storage size of ‘fp’ isn’t known
cpyrit/_cpyrit_cpu.c:1645: error: ‘PcapDevice’ has no member named ‘status’
cpyrit/_cpyrit_cpu.c:1651: warning: implicit declaration of function ‘pcap_compile’
cpyrit/_cpyrit_cpu.c:1651: error: ‘PcapDevice’ has no member named ‘p’
cpyrit/_cpyrit_cpu.c:1653: error: ‘PcapDevice’ has no member named ‘p’
cpyrit/_cpyrit_cpu.c:1657: warning: implicit declaration of function ‘pcap_setfilter’
cpyrit/_cpyrit_cpu.c:1657: error: ‘PcapDevice’ has no member named ‘p’
cpyrit/_cpyrit_cpu.c:1659: error: ‘PcapDevice’ has no member named ‘p’
cpyrit/_cpyrit_cpu.c:1660: warning: implicit declaration of function ‘pcap_freecode’
cpyrit/_cpyrit_cpu.c:1639: warning: unused variable ‘fp’
cpyrit/_cpyrit_cpu.c: At top level:
cpyrit/_cpyrit_cpu.c:1957: error: ‘PcapDevice’ has no member named ‘datalink’
cpyrit/_cpyrit_cpu.c:2179: fatal error: error closing -: Broken pipe
compilation terminated.
The bug is not reproducible, so it is likely a hardware or OS problem.
error: command 'gcc' failed with exit status 1 
```

任何的想法？感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T02:15:30.553

您缺少`openssl-devel`and`libpcap-devel`包；用于`yum`安装它们。此外，请`build/temp.linux-i686-2.6/`在重试之前删除。

# python - 在 iPython 中序列化我的 scikit-learn (sklearn) 网格搜索分类器时出现问题

> ID：11998820
> 
> 赞同：3
> 
> 时间：2012-08-17T01:49:55.287
> 
> 标签：python, ipython, scikit-learn, scikits

*我在iPython*中从下面运行了网格搜索分类器：

[http://scikit-learn.org/dev/auto_examples/grid_search_digits.html](http://scikit-learn.org/dev/auto_examples/grid_search_digits.html)

然后尝试通过酸洗对其进行序列化，但收到以下回溯：

```
In [6]: with open('clf.pkl', 'wb') as f:
    cPickle.dump(clf, f)
   ...:     
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-6-577559be619c> in <module>()
      1 with open('clf.pkl', 'wb') as f:
----> 2     cPickle.dump(clf, f)
      3 

/Library/Frameworks/EPD64.framework/Versions/7.3/lib/python2.7/copy_reg.pyc in     _reduce_ex(self, proto)
     68     else:
     69         if base is self.__class__:
---> 70             raise TypeError, "can't pickle %s objects" % base.__name__
     71         state = base(self)
     72     args = (self.__class__, base, state)

TypeError: can't pickle instancemethod objects 
```

有解决办法吗？

我正在使用 iPython 和 sklearn 的最新测试版。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:14:41.117

网格搜索分类器用于保留所有创建泡菜问题的估计器。这个问题之前已经[注意到](https://github.com/scikit-learn/scikit-learn/issues/565#issuecomment-4476779)并[解决](https://github.com/scikit-learn/scikit-learn/pull/770)了。这个补丁[注释](https://github.com/scikit-learn/scikit-learn/pull/770#issuecomment-7182976)告诉你可以通过 pickling 来腌制分类器`best_estimator_`。在你的情况下，这将是：

```
cPickle.dump(clf.best_estimator_, f) 
```

# .net-4.0 - 安装 .NET Framework 4 时缺少 GAC

> ID：11998822
> 
> 赞同：2
> 
> 时间：2012-08-17T01:50:11.630
> 
> 标签：.net-4.0, gac, global-assembly-cache

我在运行**Windows Small Business Server 2003 Standard Edition**的客户计算机上安装了完整版的 .NET Framework 4（客户端配置文件 + 扩展） 。安装成功，没有任何错误。日志文件中也没有提到任何错误...

*但是*.NET Framework 4 GAC（全局程序集缓存）完全丢失了！换句话说，缺少以下文件夹：-

```
C:\Windows\Microsoft.NET\assembly 
```

如果我查看该`C:\Windows\Microsoft.NET`文件夹，我只能看到 2 个子文件夹（如下所示），没有别的。

```
authman
Framework 
```

服务器仍然安装了 .NET Framework 3.5 并且运行正常。这意味着下面的 GAC 文件夹存在并且其中包含所有 .NET 库 DLL。但当然，那里没有 .NET 4 DLL。

```
C:\Windows\assembly 
```

由于缺少 .NET Framework 4 GAC，我的应用程序都没有运行。他们都抱怨缺少*System*或*System.Xml*引用。如果我将丢失的文件从`C:\Windows\Microsoft.NET\Framework\v4.0.30319`文件夹复制到我的应用程序目录，他们将停止抱怨这些文件并开始抱怨其他丢失的 .NET 文件。显然我使用了很多 .NET 库引用，并且我不想将整个 .NET Framework 文件夹复制到我的每个应用程序中。

有谁知道如何创建缺少的 GAC？或者至少找出导致 GAC 消失的原因？我多次尝试重新安装 .NET Framework 4，但 GAC 总是丢失...

* * *

**编辑：**我也尝试过运行`gacutil.exe -l`以查看 GAC 中的内容，它只列出了 1.0 到 3.5 版本的 .NET 程序集。缺少所有 .NET 4 程序集。

注意：.NET 4 版本的*gacutil.exe*仅附带 Visual Studio（或 Windows SDK），因此我必须将文件复制到客户站点。

# php - php没有将数据传递给mysql

> ID：11998824
> 
> 赞同：1
> 
> 时间：2012-08-17T01:50:39.023
> 
> 标签：php, mysql

我有一个连接到 mysql 数据库的 php 页面。我知道与数据库的连接很好，因为我有一个 php 代码，可以将数据库中的信息显示到网页上。当我尝试将新数据插入数据库时​​，页面刷新并且数据未插入。我已检查以确保 insert into 命令具有正确的值。

```
 <?php 

    if (isset($_POST['User_Name'])) 
        {

            include "connect_to_mysql.php";

            $name = mysql_real_escape_string($_POST["Name"]);

            $sql = mysql_query("SELECT TestID FROM test WHERE Name='$name' LIMIT 1")or die (mysql_error());
            $productMatch = mysql_num_rows($sql); 

            if ($productMatch > 0) 
                {
                    echo 'Sorry you tried to place a duplicate "User Account" into the system, <a href="index.php">click here</a>';
                    exit();
                }
                else
                {

                    $sql = mysql_query("INSERT INTO test (TestID,Name) 
                        VALUES('', '$name')") or die (mysql_error());
                     $uid = mysql_insert_id();

                    header("location: index.php"); 
                    exit();
                }
        }
?>
<?php 

    include "connect_to_mysql.php";
    $User_list = "";
    $sql = mysql_query("SELECT * FROM test");
    $UserCount = mysql_num_rows($sql); 
    if ($UserCount > 0) 
        {
            while($row = mysql_fetch_array($sql))
                { 
                         $id = $row["TestID"];
                         $name = $row["Name"];

                         $User_list .= "Users ID: $id - <strong>$name</strong>&nbsp; &nbsp; &nbsp;<br />";
                }
        } 
        else 
        {
            $User_list = "You have no users listed in the database.";
        }
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<div align="center" id="mainWrapper">
  <div id="pageContent"><br />
    <div align="right" style="margin-right:32px;"><a href="index.php#UserForm">+ Add New User</a></div>
<div align="left" style="margin-left:24px;">
      <h2>User list</h2>
      <?php echo $User_list; ?>
    </div>
    <hr />
    <a name="UserForm" id="UserForm"></a>
    <h3>
    &darr; Add New User Form &darr;
    </h3>
    <form action="index.php" enctype="multipart/form-data" name="myForm" id="myform" method="post">
    <table width="90%" border="0" cellspacing="0" cellpadding="6">
      <tr>
        <td width="20%" align="right">Name</td>
        <td width="80%"><label>
          <input name="name" type="text" id="name" size="50" />
        </label></td>
      </tr> 
      <tr>
        <td>&nbsp;</td>
        <td><label>
          <input type="submit" name="button" id="button" value="Add This Name Now" />
        </label></td>
      </tr>
    </table>
    </form>
    <br />
  <br />
  </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T01:54:16.873

我马上看到了两个问题（可能还有更多）。首先，PHP 数组键区分大小写。您正在访问`$_POST['Name']`，但您的表单输入是`name`. 其次，您正在测试`$_POST['User_Name']`似乎在任何地方都不存在的：

```
// Look for name in the $_POST
if (isset($_POST['name'])) 
{
    include "connect_to_mysql.php";
    // name is case-sensitive
    $name = mysql_real_escape_string($_POST["name"]); 
```

稍后，如果您的表有一个 AUTO_INCREMENT id on `TestID`，您应该省略它或在插入语句中插入 NULL：

```
// Don't include TestID if it is AUTO_INCREMENT. That will happen automatically
$sql = mysql_query("INSERT INTO test (Name) 
                    VALUES('$name')") or die (mysql_error()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T01:54:27.823

我认为如果你改变它会起作用

```
 if (isset($_POST['User_Name'])) 
```

到

```
if (isset($_POST['Name'])) 
```

您检查表单中不存在的东西的存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T01:56:31.977

***添加：***

如果`TestID`是自动增量，则更改以下内容

```
"INSERT INTO test (TestID,Name) VALUES('', '$name')" 
```

到

```
"INSERT INTO test (Name) VALUES('$name')" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T01:56:42.670

如果您没有收到任何错误，这意味着您的 MySQL 语法有错误，有两种测试方法是将语法复制到 PHPMyAdmin 或您的本机 MySQL 命令行中，然后查看是否收到输出错误。或者您可以做的另一件事是修改所有`mysql_query()`; 通过添加功能`mysql_query()or die(mysql_error());`

# wif - Windows Identity Foundation：活动联合客户端（以前的依赖方）使用令牌访问依赖方

> ID：11998831
> 
> 赞同：0
> 
> 时间：2012-08-17T01:51:26.367
> 
> 标签：wif, claims-based-identity, sts-securitytokenservice

我正在使用 WIF 设置 STS，它将支持主动和被动联合。

将有多种服务使用 STS 作为依赖方。

我想知道场景是如何工作的，并且在一个服务（例如 RelyingParty1）是另一个服务的客户端（例如 RelyingParty2）的情况下实现，其中 RelyingParty1 的客户端（自然人/用户）通过 STS/Idp 用户名和登录名进行身份验证而 RelyingParty1 想要使用 RelyingParty2。

RP2 是否完全与 STS 通信，或者是从 RP1 传递到 RP2 的有效令牌？这需要特定的配置吗？

如果 RP2 可以/确实与 STS 通信以验证令牌/身份验证（SSO 不是必需的，因此可能需要每次检查）STS 如何知道将 RP1 的物理用户用作 IClaimsIdentity/IClaimsPrincipal 而不是 RP1 的用户正在运行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T02:29:59.780

依赖方 (RP) 是期望来自 STS（令牌发行者）的安全令牌的实体。RP 的用户称为“主题”（或用户），它不是 RP。

RP 知道令牌是有效的，因为它是由它信任的 STS 进行数字签名的，因此（通常）不需要 RP 和 STS 之间的通信。

您可以链接 STS：

RP -> STS1 -> STS2 -> 用户

在这种情况下，STS1 也是一个“依赖方”，因为它依赖于 STS2 来获取有效令牌。在这种情况下，STS1 也可以称为“Federation Provider”。

我建议阅读本指南的第一章：http: [//msdn.microsoft.com/en-us/library/ff423674.aspx](http://msdn.microsoft.com/en-us/library/ff423674.aspx)

它将向您介绍术语和体系结构。

# vba - Excel VBA：错误 Goto 语句在 For-Loop 中不起作用

> ID：11998836
> 
> 赞同：21
> 
> 时间：2012-08-17T01:52:20.007
> 
> 标签：vba, excel, for-loop, error-handling

我正在尝试循环浏览excel中的表格。该表的前三列有文本标题，其余的有日期作为标题。我想将这些日期按顺序分配给日期类型变量，然后根据日期执行一些操作

为此，我在 myTable.ListColumns 上使用了 foreach 循环。由于前三列没有日期标题，因此我尝试设置循环，以便如果将标题字符串分配给日期类型变量时出错，则循环直接转到下一列

这似乎适用于第一列。但是，当第二列的标题被“分配”给日期类型变量时，宏会遇到错误，即使它位于错误处理块中

```
Dim myCol As ListColumn
For Each myCol In myTable.ListColumns
    On Error GoTo NextCol

    Dim myDate As Date
    myDate = CDate(myCol.Name)

    On Error GoTo 0

    'MORE CODE HERE

NextCol:
    On Error GoTo 0
Next myCol 
```

重申一下，错误是在第二轮循环中抛出的，在语句

```
myDate = CDate(myCol.Name) 
```

谁能解释为什么 On Error 语句停止工作？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-08-17T02:19:08.087

使用所示的代码，当您敲击语句时，您实际上仍被认为*处于错误处理例程中。*`next`

这意味着在您从当前错误处理程序恢复之前，不允许后续错误处理程序。

更好的架构是：

```
 Dim myCol As ListColumn
    For Each myCol In myTable.ListColumns
        On Error GoTo ErrCol
        Dim myDate As Date
        myDate = CDate(myCol.Name)
        On Error GoTo 0
        ' MORE CODE HERE '
NextCol:
    Next myCol
    Exit Sub ' or something '

ErrCol:
    Resume NextCol 
```

这清楚地从常规代码中描述了错误处理，并确保当前执行的错误处理程序在您尝试设置另一个处理程序之前完成。

[这个网站](http://www.cpearson.com/excel/errorhandling.htm)很好地描述了这个问题：

* * *

**错误处理块和错误转到**

错误处理块，也称为错误处理程序，是通过`On Error Goto <label>:`语句将执行转移到的代码段。此代码应设计为解决问题并在主代码块中恢复执行或终止过程的执行。您不能`On Error Goto <label>:`仅跳过行来使用该语句。例如，以下代码将无法正常工作：

```
 On Error GoTo Err1:
    Debug.Print 1 / 0
    ' more code
Err1:
    On Error GoTo Err2:
    Debug.Print 1 / 0
    ' more code
Err2: 
```

当第一个错误出现时，执行转移到下面的行`Err1:`。当第二个错误发生时，错误处理程序仍然处于活动状态，因此第二个错误不会被`On Error`语句捕获。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-17T02:18:40.677

您需要`resume`在错误处理代码中添加一些类型以指示错误处理已结束。否则，第一个错误处理程序仍然处于活动状态，您永远不会“解决”。

请参阅[http://www.cpearson.com/excel/errorhandling.htm](http://www.cpearson.com/excel/errorhandling.htm)（特别是标题“错误处理块和错误转到”和以下部分）

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-07-21T15:48:10.453

跟进 paxdiablo 接受的答案。这是可能的，允许在同一个 sub 中有两个错误陷阱，一个接一个：

```
Public Sub test()
    On Error GoTo Err1:
    Debug.Print 1 / 0
    ' more code
Err1:
    On Error GoTo -1     ' clears the active error handler
    On Error GoTo Err2:  ' .. so we can set up another
    Debug.Print 1 / 0
    ' more code
Err2:
    MsgBox "Got here safely"
End Sub 
```

Using`On Error GoTo -1`取消活动的错误处理程序并允许设置另一个错误处理程序（并且`err.clear`不这样做！）。这是否是一个好主意留给读者作为练习，但它有效！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-20T18:47:31.750

清除 Err 对象的所有属性设置与重置错误处理程序不同。

试试这个：

```
Sub TestErr()
Dim i As Integer
Dim x As Double
    On Error GoTo NextLoop
    For i = 1 To 2
10:     x = i / 0
NextLoop:
        If Err <> 0 Then
            Err.Clear
            Debug.Print "Cleared i=" & i
        End If
    Next
End Sub 
```

你会注意到就像 OP 一样，它会正确捕获错误 when`i =1`但它会在第 10 行时失败`i = 2`，即使我们使用了`Err.Clear`

# android - Eclipse/Mac/Android：删除一个项目并重新创建一个同名项目

> ID：11998837
> 
> 赞同：1
> 
> 时间：2012-08-17T01:52:32.363
> 
> 标签：android, eclipse, macos

我是 Eclipse 和 Android 开发的新手，我一直在尝试删除一个项目，然后再次创建一个具有相同名称的项目。我选择从工作区中删除项目，目录/文件确实消失了。新的 AndroidManifest.xml 文件虽然像布局 XML 文件一样附加了原始内容，但会立即生成解析器错误！

对项目文件的引用是否以某种方式存储在我可以手动删除的工作区目录本身之外？

如果我在删除项目后重新启动 Eclipse，它不会给我这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T02:06:45.360

当您从 Eclipse 中删除项目时，它会显示以下对话框，

![在此处输入图像描述](../Images/4db9e3591d23dd040aca6ca23c8d54e2.png)

如果您已选择（勾选）如图所示的选项，它将从工作区中删除项目的所有文件和文件夹。删除后无法恢复。但是如果你没有选择这个选项，那么它只会从项目资源管理器/包资源管理器中删除项目，但是项目文件和文件夹在工作区中是安全的，你以后可以通过在 eclipse 中导入来获取它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-17T01:57:33.263

从工作区中删除项目后，在 Windows 中，它位于用户主工作区/[项目]，一旦您删除，您的项目就会进入梦想之地。所以你重新启动 Esclipse 并使用相同的名称创建一个新的，这不是问题。嗯，尝试在你的mac中搜索项目名称，或者去工作区删除它，应该足够了。

我找到了，请看一下：

[如何从 Mac OS X 中完全删除 Eclipse（包括设置和插件）？](https://stackoverflow.com/questions/3185664/how-to-delete-eclipse-completely-including-settings-and-plugins-from-mac-os-x/3185723#3185723)

抱歉，如果您删除了目录，并且您的项目名称仍在使用中，您可以删除 Eclipse，并将其作为辅助选项重新安装

编辑：在链接中它说您可以将工作区更改为另一个位置，因此我建议您更改工作区位置或在备份后删除整个工作区。

# mysql - 在 where 语句中使用 count 设置的值

> ID：11998841
> 
> 赞同：1
> 
> 时间：2012-08-17T01:52:44.917
> 
> 标签：mysql, sql

我有一个查询，我在其中选择已提交给每个应用程序的用户数。

```
SELECT c.*, count(p.id) people
FROM users p
LEFT JOIN apps c
ON c.id = p.app
WHERE c.status='1'
GROUP BY p.app
ORDER BY c.id DESC 
```

但是，我只想选择少于 50 人的那些。我怎样才能做到这一点？

我试过`WHERE c.status='1' AND people < 50`了，但没有用，它说这是一个无效的列。如何只选择人数小于 50 的值？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T01:54:14.483

使用`HAVING`. 它的行为类似`WHERE`，但它的用途是用于聚合列。

```
SELECT c.*, count(p.id) people
FROM users p
LEFT JOIN apps c
ON c.id = p.app
WHERE c.status='1'
GROUP BY p.app
HAVING count(p.id) < 50
ORDER BY c.id DESC 
```

# layout - 网页的 css3 渐变背景上带有文本的徽标图像

> ID：11998843
> 
> 赞同：0
> 
> 时间：2012-08-17T01:52:55.287
> 
> 标签：layout, css, photoshop, web-deployment

在网页中有一个使用 CSS3 的渐变（在 body 标记中）。接下来移动并添加图像（带有站点名称的徽标）我意识到页面渐变和图像都有不同的颜色。这是因为网页有一个CSS3生成的背景，而图像有一个固定的背景颜色，两者都是不同的。

**我试过什么？** 添加图像作为 div 的背景和 img 标签。在 div 上应用渐变

但没有运气。

如何管理？请指导。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T01:57:52.927

您不能将徽标的文本保存为具有透明背景的 .png 吗？如果您已将渐变添加到 body 标签，它将在浏览器窗口展开和收缩时发生变化

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T05:44:53.727

你必须用透明背景保存你的标志图像......你打开标志的 psd 文件并禁用背景层的可见性，然后将其保存为 png 图像。

# asp.net - Membership.UserIsOnlineTimeWindow 和 FormsAuthentication.Timeout 随机注销的关系

> ID：11998844
> 
> 赞同：1
> 
> 时间：2012-08-17T01:53:21.807
> 
> 标签：asp.net, asp.net-mvc, forms-authentication

最近，我开始注意到我的 Web 应用程序在页面之间的请求数量随机后会随机注销用户。我经历了所有可能的情况，并注意到它仅在`UserIsOnlineTimeWindow`（`Membership`提供者的）属性不等于默认`FormsAuthentication` `Timeout`属性时发生。

这`UserIsOnlineTimeWindow`会影响默认`FormAuthentication`提供程序吗？

它们需要相同吗？

如果有，请解释...

以下是不言自明的，尽管它没有描述默认`Membership`API 和`FormsAuthentication` *（关于上述相互影响的属性）*之间的任何关系：

> 指定用户在上次活动日期/时间戳之后的分钟数，在此期间用户被视为在线。

[http://msdn.microsoft.com/en-us/library/system.web.security.membership.userisonlinetimewindow](http://msdn.microsoft.com/en-us/library/system.web.security.membership.userisonlinetimewindow)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T02:45:35.630

这看起来确实很奇怪。UserIsOnLine Time 不会更新我所知道的任何内容。我建议使用开发工具在 chrome 等浏览器中查看 cookie，并实际检查 cookie 的过期时间。据我所知，这是唯一会导致注销的事情（除了删除 cookie）

# jquery - 可重用的 Jquery 函数问题

> ID：11998852
> 
> 赞同：0
> 
> 时间：2012-08-17T01:54:33.750
> 
> 标签：jquery, jquery-ui, function

在看到一些重复后，我正在尝试优化我的代码。

这是代码：

```
function show($div, $change, $value){
    var $container = "#" + $div;
    var $class = $div + "-" + "hidden";

    //alert($class + $container + $change + $value);

    $($container).addClass($class);
    $($container).animate({
        $change: $value
    }, 1000, function(){
            $($container).removeClass($class);
        } 
    );
}

show('header', 'top', '0');
show('nav', 'left', '0');
show('wrapper', 'opacity', '0'); 
```

这个区域： $change: $value - 是我在脚本中遇到问题的地方。我可以这样做吗？他们应该以字符串的形式出现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T01:56:41.143

```
function show($div, $change, $value){
    var $container = "#" + $div;
    var $class = $div + "-" + "hidden";

    //alert($class + $container + $change + $value);

    $($container).addClass($class);

    var animation = {}; // create another object
    animation[$change] = $value; // and set its property

    $($container).animate(animation, 1000, function(){
            $($container).removeClass($class);
        } 
    );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T02:07:49.693

我认为您正在尝试在文字中动态设置变量名称。在 JavaScript 中，你可以这样做`objectname["variablename"] = value`

实际上，您可以在这里做两件事：

1.  您传递给 animate() 的第一个参数的文字可以被拉出
2.  $container 的 jQuery 评估可以被拉出，完成一次，然后重用以加快速度。

尽管有些人可能将 2 称为过早优化的示例，但我认为无论如何它会使您的代码更具可读性。

```
function show($div, $change, $value){

    var $container = "#" + $div;
    var $class = $div + "-" + "hidden";

    //alert($class + $container + $change + $value);

    var animation = {}; //declare a literal
    animation[$change] = $value; //create a name-value pair based on args

    var jqContainer = $($container);  //extract multiple jQuery evaluations
    jqContainer.addClass($class);
    jqContainer.animate(animation, 1000, function(){
            jqContainer.removeClass($class);
        } 
    );
} 
```

# r - 对质心的 95% 置信椭圆进行颜色编码

> ID：11998853
> 
> 赞同：10
> 
> 时间：2012-08-17T01:54:36.527
> 
> 标签：r, vegan

我已经使用`vegan{}`R 中的包为 Gower 相似性指数绘制了质心，并希望根据我的原始数据集中的因素对椭圆填充进行颜色编码。质心用于月-站点组合（这些是我要绘制的唯一质心；请参见下面的数据示例），但我想按月对椭圆进行颜色编码，然后在第二个图中按站点显示差异因素之间。目前，代码如下所示：

```
dat.fac<-dat[,1:7]  ##factors

dat.mgower <- vegdist(decostand(dat[,8:34], "log"), "altGower")
ord<-capscale(dat.mgower~1)     #Does the PCO

plot(ord, display = "sites", type = "n")

#for i in 
stats<-with(dat.fac,
    ordiellipse(ord, Site_TP, kind="se", conf=0.95,
    lwd=2, draw = "polygon",col="#0000ff22",border = "blue")) 
```

具有质心的 MDS 图如下所示： ![具有 Site_season 标题的质心](../Images/54c1540cbc4bf8843899eccca60024f3.png)

我希望能够根据 a）站点和 b）季节（5 月与 9 月）对质心的填充进行颜色编码。我试过使用`col=c("#0000ff22","#CAFF7022",...)`，但这不起作用，因为椭圆的坐标在`ord`. 我也试过

```
with(dat.fac,ordiellipse(ord, Site_TP[1:54], kind="se", conf=0.95,
    lwd=2, draw = "polygon",col="#0000ff22",border = "blue")) 
```

使前半部分重心为一种颜色（前半部分都来自同一个月），但这会导致错误“cov.wt(X, W) 中的错误：'x' 必须仅包含有限值。” 帮助！谢谢。

数据如下所示：

```
structure(list(Core_num = structure(c(39L, 50L, 61L, 70L, 71L, 
72L, 73L, 74L, 75L, 76L, 85L, 86L, 87L, 88L, 89L, 90L, 91L, 92L, 
93L, 94L, 95L, 96L, 97L, 98L, 99L, 100L, 101L, 102L, 103L, 104L, 
105L, 106L, 107L, 108L, 112L, 113L, 115L, 116L, 117L, 118L, 119L, 
120L, 121L, 122L, 123L, 124L, 125L, 126L, 127L, 128L, 129L, 130L, 
131L, 132L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 17L, 18L, 
19L, 20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L, 29L, 30L, 31L, 
32L, 33L, 34L, 35L, 36L, 37L, 38L, 40L, 44L, 45L, 46L, 47L, 48L, 
49L, 51L, 52L, 53L, 54L, 55L, 56L, 57L, 58L, 59L, 60L, 62L, 63L, 
64L, 65L, 66L), .Label = c("152", "153", "154", "155", "156", 
"157", "158", "159", "160", "161", "162", "163", "164", "165", 
"166", "167", "168", "169", "170", "171", "172", "173", "174", 
"175", "176", "177", "178", "179", "180", "181", "182", "183", 
"184", "185", "186", "187", "188", "189", "19", "190", "191", 
"192", "193", "194", "195", "196", "197", "198", "199", "20", 
"200", "201", "202", "203", "204", "205", "206", "207", "208", 
"209", "21", "210", "211", "212", "213", "214", "215", "216", 
"217", "22", "23", "24", "25", "26", "27", "28", "29", "30", 
"31", "32", "33", "34", "35", "36", "37", "38", "39", "40", "41", 
"42", "43", "44", "45", "46", "47", "48", "49", "50", "51", "52", 
"53", "54", "55", "56", "57", "58", "59", "60", "61", "62", "63", 
"64", "65", "66", "67", "68", "69", "70", "71", "72", "73", "74", 
"75", "76", "77", "78", "79", "80", "81", "82", "83", "84", "L1", 
"L10", "L11", "L12", "L13", "L14", "L15", "L16", "L17", "L18", 
"L2", "L20", "L21", "L22", "L23", "L24", "L25", "L26", "L27", 
"L28", "L3", "L4", "L5", "L6", "L7", "L9"), class = "factor"), 
    Cage_num = c(47L, 46L, 45L, 2L, 24L, 1L, 23L, 25L, 3L, 61L, 
    5L, 6L, 27L, 49L, 4L, 7L, 48L, 29L, 28L, 26L, 8L, 10L, 51L, 
    50L, 9L, 11L, 30L, 33L, 31L, 32L, 52L, 53L, 54L, 55L, 18L, 
    60L, 41L, 38L, 63L, 19L, 16L, 17L, 40L, 44L, 43L, 21L, 20L, 
    22L, 39L, 62L, 65L, 66L, 42L, 64L, 9L, 54L, 31L, 52L, 10L, 
    53L, 33L, 32L, 8L, 11L, 55L, 30L, 66L, 64L, 21L, 20L, 43L, 
    42L, 44L, 65L, 63L, 18L, 16L, 22L, 62L, 61L, 38L, 19L, 60L, 
    17L, 39L, 40L, 41L, 3L, 24L, 25L, 2L, 23L, 1L, 46L, 47L, 
    45L, 5L, 28L, 48L, 6L, 51L, 50L, 4L, 7L, 29L, 49L, 26L, 27L
    ), Treatment = structure(c(3L, 3L, 3L, 1L, 2L, 1L, 2L, 2L, 
    1L, 3L, 1L, 1L, 2L, 3L, 1L, 1L, 3L, 2L, 2L, 2L, 1L, 1L, 3L, 
    3L, 1L, 1L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 1L, 3L, 2L, 2L, 
    3L, 1L, 1L, 1L, 2L, 2L, 2L, 1L, 1L, 1L, 2L, 3L, 3L, 3L, 2L, 
    3L, 1L, 3L, 2L, 3L, 1L, 3L, 2L, 2L, 1L, 1L, 3L, 2L, 3L, 3L, 
    1L, 1L, 2L, 2L, 2L, 3L, 3L, 1L, 1L, 1L, 3L, 3L, 2L, 1L, 3L, 
    1L, 2L, 2L, 2L, 1L, 2L, 2L, 1L, 2L, 1L, 3L, 3L, 3L, 1L, 2L, 
    3L, 1L, 3L, 3L, 1L, 1L, 2L, 3L, 2L, 2L), .Label = c("C", 
    "CC", "NC"), class = "factor"), Site = structure(c(2L, 2L, 
    2L, 2L, 2L, 2L, 2L, 2L, 2L, 7L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
    1L, 1L, 1L, 8L, 8L, 1L, 1L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 
    8L, 8L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 6L, 6L, 6L, 6L, 
    6L, 7L, 7L, 6L, 6L, 6L, 6L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 8L, 
    8L, 8L, 8L, 8L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 6L, 7L, 7L, 7L, 
    6L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 7L, 2L, 2L, 2L, 2L, 2L, 
    2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
    1L), .Label = c("M1", "M2", "R07", "R08_Feb", "R08_Jul", 
    "R09", "R10", "R11", "R11_5m"), class = "factor"), Days_Since_Removal = c(0, 
    0, 0, 0, 0, 0, 0, 0, 0, 291, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 291, 291, 291, 
    291, 291, 291, 291, 291, 291, 669, 669, 669, 669, 669, 291, 
    291, 669, 669, 669, 669, 86, 86, 86, 86, 86, 86, 86, 86, 
    86, 86, 86, 86, 806, 806, 806, 806, 806, 806, 806, 806, 428, 
    428, 428, 806, 428, 428, 428, 428, 428, 428, 428, 428, 428, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0), Time_point = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
    1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L), .Label = c("May", 
    "September"), class = "factor"), Site_TP = structure(c(3L, 
    3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 10L, 1L, 1L, 1L, 1L, 1L, 
    1L, 1L, 1L, 1L, 1L, 14L, 14L, 1L, 1L, 14L, 14L, 14L, 14L, 
    14L, 14L, 14L, 14L, 14L, 14L, 10L, 10L, 10L, 10L, 10L, 10L, 
    10L, 10L, 10L, 8L, 8L, 8L, 8L, 8L, 10L, 10L, 8L, 8L, 8L, 
    8L, 15L, 15L, 15L, 15L, 15L, 15L, 15L, 15L, 15L, 15L, 15L, 
    15L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 9L, 11L, 11L, 11L, 9L, 11L, 
    11L, 11L, 11L, 11L, 11L, 11L, 11L, 11L, 4L, 4L, 4L, 4L, 4L, 
    4L, 4L, 4L, 4L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
    2L), .Label = c("M1_May", "M1_September", "M2_May", "M2_September", 
    "R07_May", "R08_Feb_May", "R08_Jul_May", "R09_May", "R09_September", 
    "R10_May", "R10_September", "R11_5m_May", "R11_5m_September", 
    "R11_May", "R11_September"), class = "factor"), Spionidae = c(0, 
    2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 19, 7, 2, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), Nereididae = c(0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), Syllidae = c(0, 0, 0, 0, 
    0, 0, 0, 0, 0, 2, 8, 0, 0, 0, 3, 1, 0, 0, 0, 4, 4, 0, 0, 
    0, 1, 0, 1, 4, 1, 0, 0, 1, 1, 2, 2, 0, 1, 0, 3, 0, 0, 0, 
    3, 1, 22, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 1, 5, 3, 0, 0, 0, 0, 9, 5, 0, 0, 
    0, 0, 29, 0, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 1, 0, 0), Opheliidae = c(0, 2, 1, 1, 3, 
    0, 0, 1, 0, 0, 0, 1, 1, 0, 0, 1, 1, 1, 1, 14, 0, 1, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 3, 0, 14, 1, 0, 1, 0, 0, 1, 1, 0, 2, 
    2, 3, 5, 0, 1, 0, 0, 10, 0, 4, 7, 0, 2, 1, 5, 0, 0, 3, 3, 
    0, 1, 5, 0, 8, 11, 0, 0, 13, 9, 5, 4, 6, 1, 19, 3, 2, 5, 
    1, 1, 0, 0, 3, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 
    0, 0, 0, 0, 0, 0, 0, 1, 1), Cossuridae = c(6, 29, 8, 7, 5, 
    0, 10, 31, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    4, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 4, 7, 6, 12, 0, 0, 19, 3, 4, 2, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0), Sternaspidae = c(0, 0, 0, 0, 0, 
    0, 0, 0, 6, 0, 0, 11, 5, 0, 1, 9, 1, 0, 7, 0, 0, 0, 13, 13, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 10, 0, 0, 0, 24, 1, 27, 
    5, 31, 5, 7, 4, 0, 2, 17), Sabellariidae = c(0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 10, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0), Sabellidae = c(1, 2, 1, 2, 0, 
    0, 3, 0, 2, 3, 2, 0, 0, 0, 0, 0, 2, 1, 0, 1, 0, 6, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 2, 0, 3, 0, 2, 0, 0, 0, 2, 0, 0, 0, 
    4, 16, 29, 0, 1, 0, 3, 2, 1, 7, 3, 24, 1, 1, 11, 1, 2, 1, 
    50, 0, 18, 27, 0, 0, 6, 1, 1, 43, 0, 4, 2, 1, 4, 153, 119, 
    2, 2, 2, 0, 0, 0, 0, 3, 0, 0, 4, 0, 0, 0, 0, 1, 0, 0, 0, 
    0, 4, 0, 0, 0, 2, 2, 1, 0, 0, 0), Capitellidae = c(1, 3, 
    3, 10, 7, 1, 10, 6, 17, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 3, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 4, 0, 0, 4, 0, 0, 0, 0, 
    0, 1, 0, 0, 0, 4, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 3, 1, 3, 
    1, 3, 14, 1, 0, 1, 3, 1, 0, 0, 0, 0, 0, 0, 0, 0, 9, 0, 0, 
    0, 0, 6, 6, 2, 1, 0, 4, 2, 2, 1, 0, 1, 0, 0, 4, 0, 0, 1, 
    1, 1, 0, 0, 0, 0, 0, 0, 0, 4, 1, 0), Dorvillidae = c(0, 0, 
    0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 1, 1, 0, 
    2, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 2, 0, 
    0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), Cirratulidae = c(0, 0, 
    0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 0, 
    0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), Oligochaeta = c(19, 35, 
    14, 41, 31, 12, 42, 38, 27, 16, 28, 2, 3, 2, 32, 0, 12, 12, 
    2, 7, 2, 4, 1, 20, 9, 14, 35, 5, 1, 0, 1, 4, 0, 6, 264, 48, 
    27, 8, 22, 0, 3, 133, 42, 5, 40, 21, 0, 2, 101, 4, 2, 0, 
    0, 11, 20, 4, 21, 22, 1, 9, 64, 5, 0, 38, 8, 20, 6, 5, 5, 
    35, 8, 7, 13, 9, 93, 20, 25, 12, 28, 63, 21, 71, 271, 4, 
    204, 8, 51, 14, 11, 10, 10, 1, 5, 4, 6, 4, 2, 3, 1, 0, 0, 
    1, 0, 1, 2, 9, 24, 1), Nemertea = c(0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0), Nematoda = c(2, 0, 0, 4, 5, 5, 0, 1, 13, 
    0, 0, 0, 1, 0, 0, 2, 0, 8, 3, 3, 2, 1, 4, 4, 0, 0, 18, 0, 
    1, 1, 1, 8, 2, 12, 1, 0, 4, 0, 1, 0, 0, 6, 0, 1, 4, 0, 0, 
    0, 1, 0, 0, 2, 6, 0, 0, 0, 1, 15, 0, 0, 20, 1, 0, 1, 2, 0, 
    0, 0, 0, 1, 16, 5, 1, 1, 0, 0, 35, 3, 1, 0, 1, 0, 0, 0, 0, 
    0, 0, 0, 1, 0, 1, 0, 1, 16, 2, 1, 0, 18, 0, 0, 0, 0, 0, 0, 
    0, 1, 0, 0), Platyhelminthes = c(0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0), Sipuncula = c(0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    2, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 25, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 
    0, 0, 0, 0), Ostracoda = c(0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 
    0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 7, 1, 0, 0, 0, 0, 0, 0, 0, 0, 5, 
    7, 0, 2, 11, 5, 5, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0), Decapoda = c(0, 0, 0, 4, 0, 0, 2, 0, 0, 0, 0, 0, 
    1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 
    0, 0, 0, 0, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 
    0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 
    0, 1, 1, 0, 0, 4, 0, 1, 1, 0, 0, 1, 0, 2, 1, 0, 0, 1, 0, 
    0, 0, 17, 0, 0, 0, 0, 2, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 2, 
    0), Amphipoda = c(1, 1, 5, 17, 8, 75, 22, 0, 34, 4, 38, 0, 
    27, 24, 89, 2, 1, 5, 3, 42, 88, 3, 1, 21, 6, 1, 6, 60, 6, 
    11, 0, 4, 11, 17, 15, 0, 13, 5, 44, 9, 0, 0, 0, 11, 20, 28, 
    8, 45, 0, 0, 18, 2, 14, 8, 3, 0, 2, 6, 6, 0, 2, 14, 2, 2, 
    6, 3, 37, 37, 5, 20, 63, 12, 10, 49, 6, 3, 150, 83, 7, 3, 
    5, 20, 15, 4, 19, 1, 6, 0, 3, 0, 0, 0, 14, 0, 1, 2, 3, 0, 
    0, 0, 1, 16, 3, 3, 0, 3, 1, 1), Isopoda = c(0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0), Copepoda = c(0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 2, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 7, 0, 0, 1, 0, 0, 0, 
    1, 0, 8, 1, 0, 2, 5, 1, 5, 2, 2, 0, 2, 4, 1, 0, 0, 0, 0, 
    0, 1, 1, 0, 0, 1, 0, 0, 0, 5, 3, 0, 0, 0, 1, 0, 0, 0, 0, 
    0, 0, 1, 0, 0, 0), Tanaidacea = c(0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 6, 0, 1, 0, 0, 0, 0, 3, 
    0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 3, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 
    0, 2, 0, 1, 1, 6, 2, 0, 1, 0, 2, 1, 3, 1, 0, 0, 0, 0, 2, 
    0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0), HYRDOZOA = c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0), ANTHOZOA = c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0), Cnidarian_larvae = c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0), Tunicata = c(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), 
    Mollusca = c(0L, 0L, 0L, 4L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
    0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
    0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 1L, 0L, 0L, 0L, 0L, 
    0L, 0L, 2L, 0L, 1L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
    1L, 14L, 2L, 0L, 0L, 0L, 0L, 0L, 1L, 1L, 0L, 0L, 0L, 0L, 
    1L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 4L, 
    0L, 3L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 
    0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L)), .Names = c("Core_num", 
"Cage_num", "Treatment", "Site", "Days_Since_Removal", "Time_point", 
"Site_TP", "Spionidae", "Nereididae", "Syllidae", "Opheliidae", 
"Cossuridae", "Sternaspidae", "Sabellariidae", "Sabellidae", 
"Capitellidae", "Dorvillidae", "Cirratulidae", "Oligochaeta", 
"Nemertea", "Nematoda", "Platyhelminthes", "Sipuncula", "Ostracoda", 
"Decapoda", "Amphipoda", "Isopoda", "Copepoda", "Tanaidacea", 
"HYRDOZOA", "ANTHOZOA", "Cnidarian_larvae", "Tunicata", "Mollusca"
), row.names = c(1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 19L, 
20L, 21L, 22L, 23L, 24L, 25L, 26L, 27L, 28L, 29L, 30L, 31L, 32L, 
33L, 34L, 35L, 36L, 37L, 38L, 39L, 40L, 41L, 42L, 46L, 47L, 49L, 
50L, 51L, 52L, 53L, 54L, 55L, 56L, 57L, 58L, 59L, 60L, 61L, 62L, 
63L, 64L, 65L, 66L, 67L, 68L, 69L, 70L, 71L, 72L, 73L, 74L, 75L, 
76L, 83L, 84L, 85L, 86L, 87L, 88L, 89L, 90L, 91L, 92L, 93L, 94L, 
95L, 96L, 97L, 98L, 99L, 100L, 101L, 102L, 103L, 104L, 105L, 
109L, 110L, 111L, 112L, 113L, 114L, 115L, 116L, 117L, 118L, 119L, 
120L, 121L, 122L, 123L, 124L, 125L, 126L, 127L, 128L, 129L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T17:41:32.113

理想情况下，该函数可以返回椭圆中使用的 x 和 y 坐标。`ordiellipse()`这是添加`xy`到函数输出的每个列表元素的简单修改：

```
ordiellipse2 <- 
function (ord, groups, display = "sites", kind = c("sd", "se"),
        conf, draw = c("lines", "polygon", "none"),
        w = weights(ord, display), col = NULL, alpha = 127,
        show.groups, label = FALSE,  ...)
{
    weights.default <- function(object, ...) NULL
    kind <- match.arg(kind)
    draw <- match.arg(draw)
    pts <- scores(ord, display = display, ...)
    ## ordiellipse only works with 2D data (2 columns)
    pts <- as.matrix(pts)
    if (ncol(pts) > 2)
        pts <- pts[ , 1:2, drop = FALSE]
    if (ncol(pts) < 2)
        stop("ordiellipse needs two dimensions")
    w <- eval(w)
    if (length(w) == 1)
        w <- rep(1, nrow(pts))
    if (is.null(w))
        w <- rep(1, nrow(pts))
    ## make semitransparent fill
    if (draw == "polygon" && !is.null(col))
        col <- rgb(t(col2rgb(col)), alpha = alpha, maxColorValue = 255)
    if (!missing(show.groups)) {
        take <- groups %in% show.groups
        pts <- pts[take, , drop = FALSE]
        groups <- groups[take]
        w <- w[take]
    }
    out <- seq(along = groups)
    inds <- names(table(groups))
    res <- list()
    if (label)
        cntrs <- names <- NULL
    ## Remove NA scores
    kk <- complete.cases(pts)
    for (is in inds) {
        gr <- out[groups == is & kk]
        if (length(gr) > 2) {
            X <- pts[gr, ]
            W <- w[gr]
            mat <- cov.wt(X, W)
            if (kind == "se")
                mat$cov <- mat$cov/mat$n.obs
            if (missing(conf))
                t <- 1
            else t <- sqrt(qchisq(conf, 2))
            xy <- vegan:::veganCovEllipse(mat$cov, mat$center, t)
            if (draw == "lines")
                vegan:::ordiArgAbsorber(xy, FUN = lines,
                        col = if(is.null(col)) par("fg") else col,
                        ...)

            else if (draw == "polygon") 
                vegan:::ordiArgAbsorber(xy[, 1], xy[, 2], col = col, FUN = polygon,
                        ...)

            if (label && draw != "none") {
                cntrs <- rbind(cntrs, mat$center)
                names <- c(names, is)
            }
            mat$scale <- t
            mat$xy <- xy   # this is the only substantive change I made
            res[[is]] <- mat
        }
    }
    if (label && draw != "none") {
        if (draw == "lines")
            vegan:::ordiArgAbsorber(cntrs[,1], cntrs[,2], labels=names, col = col,  
                    FUN = text, ...)
    else 
        vegan:::ordiArgAbsorber(cntrs, labels = names, col = NULL,
                FUN = ordilabel, ...)
    }
    class(res) <- "ordiellipse"
    invisible(res)
} 
```

现在您可以`stats`根据您的示例创建对象，但`draw = "none", because you'll want to play with`您自己指定 stats` 以完全控制椭圆绘图（无需指定图形参数）：

```
stats<-with(dat.fac, ordiellipse2(ord, Site_TP, kind = "se", conf = 0.95, draw = "none")) 
```

现在请注意 stats 具有相同的形式，但`xy`每个椭圆都有一个元素：

```
names(stats[[1]])
[1] "cov"    "center" "n.obs"  "wt"     "scale"  "xy" 
```

您可以使用该函数将它们绘制在一个循环中`polygon()`，但最好将所有`xy`坐标放在一个`matrix`或`data.frame`中，这样您就可以对 进行一次调用`polygon()`，但使用矢量化参数，例如`col`, `lwd`。我将`xy`使用 提取矩阵`lapply()`，然后将它们折叠在一起作为`data.frame`. 关键是将单个椭圆与`NA`s ​​分开，因此多边形绘图知道一个停止和下一个开始的位置：

```
xy.mat <- t(as.data.frame(lapply(stats, function(x){
            t(rbind(x$xy, NA))
        }))) 
```

绘图变得容易：

```
plot(ord, display = "sites", type = "n")
polygon(xy.mat[, 1], xy.mat[, 2], col = c(rep("#0000ff20", 5), rep("#ff000030", 5)), border = c(rep("blue", 5), rep("red", 5))) 
```

![在此处输入图像描述](../Images/1a73ac8f58c8c949983b6e18ed081392.png)

现在只需`polygon()`正确排序图形参数即可。

# python - 如果模型名称是应用程序名称，如何使 Django 模型不将应用程序的名称添加到模型中？

> ID：11998855
> 
> 赞同：1
> 
> 时间：2012-08-17T01:54:56.733
> 
> 标签：python, django, models, django-syncdb, syncdb

这就是正在发生的事情：

我启动了一个名为的应用程序`cars`并创建了一个名为`Cars`. 当我`syncdb`创建表时`cars_cars`。我怎样才能让它只创建表`cars`？

另外，要补充一点，如果我有一个名为的应用程序`cars`和一个名为的模型`car`，但希望为该模型创建表，该`cars`怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T01:58:39.260

这[`Meta.db_table`](https://docs.djangoproject.com/en/dev/ref/models/options/#db-table)就是为了。

# ios - 旋转 UIImage 时是否可以不更改 UIImageView 框架？

> ID：11998857
> 
> 赞同：0
> 
> 时间：2012-08-17T01:55:38.820
> 
> 标签：ios, xcode, ios5, frame, bounds

我有一个快速的问题；

我在旋转的 UIImageView 中有一个 UIImage（只有图像）。如您所知，框架会按比例放大，因此一切都适合。是否可以忽略这种行为？

我只想将框架保持在它们所在的位置，角落是否在框架之外都没关系。

谢谢 ：）

# jquery - html 使用先前的用户交互标记在 iPad 上播放

> ID：11998859
> 
> 赞同：2
> 
> 时间：2012-08-17T01:56:14.783
> 
> 标签：jquery, ipad, html, audio

我有一个仅在 Ajax 请求返回数据时播放的音频标签。

我知道 iPad 只能通过用户交互来播放视频和音频。

但是我的 Ajax 请求是在用户单击按钮时发出的。所以，我有一个用户交互。

所以，我的问题是，是否有办法让我的用户交互“身份验证”在用户点击后几秒钟播放声音？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T03:18:19.470

我不确定这是最好的解决方案，但它可以工作......当 AJAX 开始时，我开始一个循环等待它完成。当它发生时，循环会发出声音。我注意到它并非一直有效，我认为如果尚未加载音频，它就会崩溃（我没有收到任何错误，但如果我在页面加载后等待几秒钟，似乎没关系）

**编辑：**虽然这对我有用（iPad2[iOS 5.1.1]），但它不适用于 OP（iPad1[iOS4]）。其他人可以分享他们的结果吗？[链接](http://robotwoods.com/dev/misc/so_ipad_audio2.html)（并在加载后等待几秒钟）

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>iPad Audio</title>
</head>

<body>
<audio id="noise"><source src="beep.mp3" type="audio/mp3" /></audio>
<button onclick="begin_test();">Go</button>
</body>
<script>
var snd=document.getElementsByTagName("audio")[0];
snd.load();
var shouldPlay=false;

function begin_test(){
    shouldPlay=false;
    play();
    var xmlhttp=((window.XMLHttpRequest)?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP"));
    xmlhttp.onreadystatechange=function()
        {
          if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
            shouldPlay=true;
          }
        } 
        xmlhttp.open("GET","levels.txt",true);
        xmlhttp.send();
}

function play(){
    if (shouldPlay){
        snd.play();
        shouldPlay=false;
    }
    else{
        setTimeout(play,10);
    }
}
</script>
</html> 
```

# objective-c - 在 Objective-C 中，如何针对宏定义值进行测试？

> ID：11998860
> 
> 赞同：1
> 
> 时间：2012-08-17T01:56:23.173
> 
> 标签：objective-c, ios

我想用

```
#define IS_APP_FULL_VERSION NO 
```

和代码

```
isAppFullVersion = IS_APP_FULL_VERSION; 
```

设置实例变量。但是有没有办法也做

```
#if IS_APP_FULL_VERSION == "NO"

// add some methods here

#endif 
```

但它会产生编译错误，`#if (IS_APP_FULL_VERSION == "NO")`. 有没有办法对照`YES`and来检查它`NO`？（检查替代值）

* * *

**更新：**似乎`>`并且`== 0`是允许的，例如

```
#if IS_APP_FULL_VERSION == 0 
```

所以我们实际上可以用`0`and`1`来判断真假，用and`== 1`来测试，但是如果`YES`and`NO`能用就更好了。

* * *

**更新 2：**

一种可能的解决方案是：

```
#define IS_APP_FULL_VERSION  1

#if IS_APP_FULL_VERSION

// add some methods here

#endif

isAppFullVersion = IS_APP_FULL_VERSION; 
```

一切正常，我们可以更改`1`为`0`切换代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T02:35:45.747

您的基本问题是宏处理器#if 语句只有一种数据类型——整数。所有#if 表达式都以整数计算，未定义的符号被替换为零。无法评估字符串表达式（包括比较）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T02:00:20.693

实际上，通常情况下，我只会使用标志宏而不是值 1，因为这里只有两种情况：

```
#define APP_IS_FULL_VERSION 
```

定义或不定义该宏。然后，如果您以后想要包含/排除基于此的代码，您可以使用：

```
#ifdef APP_IS_FULL_VERSION
    // Do something
#endif 
```

（或者`#ifndef`对于相反的情况，显然）。

对于代码段，使用它来选择正确的代码很简单：

```
#ifdef APP_IS_FULL_VERSION
    isAppFullVersion = YES;
#else
    isAppFullVersion = NO;
#endif 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T02:05:39.993

我想，你是一些混淆比较宏。

`#define`格式如下。

**`#define MACRO_NAME VALUE`**（`VALUE`是空格也可以。`MACRO_NAME`需要的是。）

如果你想比较编译时间，喜欢它。这只是比较平均值`defined`vs `no defined`。不是`YES`vs`NO`

```
#define IS_APP_FULL_VERSION 1

#if defined IS_APP_FULL_VERSION
    NSLog(@"full-verison");
#endif 
```

* * *

```
#define IS_APP_FULL_VERSION blahblah

#if defined IS_APP_FULL_VERSION
        NSLog(@"full-verison");
#endif 
```

如果你想构建单独的版本。参考一个喜欢它的人。

```
#define IS_APP_FREE_VERSION

#if defined IS_APP_FREE_VERSION
     NSLog(@"free-version");
#endif 
```

* * *

```
#define IS_APP_FULL_VERSION

#if defined IS_APP_FULL_VERISON
     NSLog(@"full-version");
#endif 
```

* * *

* * *

如果你想比较运行时喜欢它。这通常是比较。

```
#define IS_APP_FULL_VERSION 1    

if(IS_APP_FULL_VERSION)
{
    NSLog(@"full-verison");
} 
```

* * *

```
#define IS_APP_FULL_VERSION 0    

if(!IS_APP_FULL_VERSION)
{
    NSLog(@"no full-version");
} 
```

# project-management - 哪些方法/流程/工具支持远程和“现场”开发？

> ID：11998864
> 
> 赞同：1
> 
> 时间：2012-08-17T01:56:36.877
> 
> 标签：project-management, agile, kanban

我在一家 IT 服务公司工作，该公司开发产品作为进一步服务咨询的推动者。我们有技术顾问/开发人员，他们需要能够在回到办公室时“坐在板凳上”进行远程开发。

哪些方法/流程/工具支持顾问在远程或“在替补席上”进行开发，特别是如何支持可交付成果的管理。

我已经查看了 DVCS 系统以及 KanBan 板工具，但我想以最好的方式获得意见，以处理这种风格的产品开发，当它不是传统的后台开发情况时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:33:23.107

ALM 领域有几位领导者，包括 VersionOne、Rally、ThoughtWorks Studios Mingle + Go + Twist、Jira Greenhopper 等。这些本质上都是迭代的，支持 Scrum+XP。如果您愿意的话，将会有一批支持看板的新工具出现。

然而，关键是决定你打算采取什么方法。迭代还是流动？

除此之外，如果您使用的是持续集成服务器——无论是像 Jenkins 这样的开源服务器还是像 Go 这样的商业服务器——那么它与 SCM 系统（例如 git）相结合，可以让您了解所生产的内容以及分发该工作的能力.

回到您的具体挑战，在我看来，迭代不适合您，因为当他们进入和离开替补席时，您会有人来来去去。Mingle 很好地支持了这一点，其他一些也是如此。事实上，我建议领先的方法并不真正适合您的情况，因为您很可能既没有迭代也没有流程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:49:53.810

这是我的 TFS 宣传。

您的开发人员/顾问需要能够在家中、远程或离线工作。这意味着本地工作空间。TFS 2012 有这个。

由于人员流动率高，您需要经理能够轻松快速地将特定任务分配给开发人员。使用 TFS，您可以创建工作项、将它们分解为子任务并轻松地将它们分配给任何团队成员。当开发人员开始工作时，您将能够看到它，并且任何签入都可以快速（半自动）与子任务相关联。所以你会知道谁做了什么任务，并且能够看到他们为完成它而实现的确切代码。

如果您有经理维护产品待办事项，开发人员所需要做的就是选择分配给他的一项任务，从源头获取最新信息并开始开发。他/她的开销最小。

使用 Web Access，您可以查看/编辑整个产品待办事项、获取燃尽图（和其他报告）、查看谁在何时完成了什么、为团队成员分配任务、更改团队成员等。所有这些都无需安装 VS，因此无需如果他们不开发，则拥有经理执照。

最后，完全集成的自动化构建将允许您确保顾问不会破坏您的源代码。门控签到非常适合这种团队。存储变更集，并运行构建。如果变更集会破坏构建，则拒绝签入。您还可以在签入后自动化另一侧的构建。

*在 VS 之外创建的任何文件都可以轻松添加到源代码管理中。添加文件后，TFS 会监视文件的更改，您可以轻松地将更改添加到变更集。一旦进入源代码控制，它就完全进入源代码控制并且可供所有人使用。*

*您从未真正提及任何数据库需求，但新的 SSDT 非常适合声明式 SQL 开发。到目前为止，我还没有编写过一个 ALTER 脚本，这让我非常高兴。*

还完全集成了对代码审查、构建验证测试、自动化部署、架构工具（带有可以强制执行的规则）等的支持。兔子洞很深，但如果你不需要它，它就不会强加给你。

所以，我建议的方法是看板风格的设置，经理推动任务而不是开发人员拉动它们。通过这种方式，您可以减少高流动率的影响，而不会过度管理您的顾问。您将能够轻松地给他们一个任务，让他们完成它，并完全了解他们执行的工作。我不确定您如何收集您的需求，以及您的客户在开发过程中有多少投入，因此很难详细说明。TFS 支持与工作项关联的故事板，因此您可以向开发人员提供详细的规范。反馈管理器还可以帮助从产品所有者那里获得对工作软件的反馈。

您可以使用已定义的 sprint 进行 Scrum，但我认为如果您的顾问流失率很高，并且/或者您不需要/想要很多您的顾问对用户故事细分/需求收集的意见。

# ios - coco2D CCLayer的init函数

> ID：11998869
> 
> 赞同：0
> 
> 时间：2012-08-17T01:56:51.427
> 
> 标签：ios, cocos2d-iphone

我有一个我喜欢添加到场景中的标签，

```
 -(id) init{
     yourScore=[CCLabelTTF labelWithString:@"0" dimensions:CGSizeMake(50, 30) alignment:UITextAlignmentCenter fontName:@"Marker Felt" fontSize:20];        
    yourScore.position=ccp(230, 250);
    [self addChild:yourScore];} 
```

但是，如果我将 CCLabel 添加到其他地方，例如

```
 -(void) addlabel:(NSString*) string_
       { yourScore=[CCLabelTTF labelWithString:@"0" dimensions:CGSizeMake(50, 30) alignment:UITextAlignmentCenter fontName:@"Marker Felt" fontSize:20];        
    yourScore.position=ccp(230, 250);
    [self addChild:yourScore];} 
```

正在调用此 addlabel 函数来添加标签。现在 youScore 标签没有显示在游戏中。这让我想知道为什么需要在 -(id) init 函数中添加以使其显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:03:06.843

如果我没记错的话，当你初始化一个空的 CCNode 时，它​​的 contentSize 是 0,0 并且在添加子节点后它会保持这种状态。

你能检查这两种情况下 CCScene 的 contentSize 吗？

如果不同，您可以为标签使用不同的位置，或者在添加任何子项之前更好地手动更改场景的 contentSize。就个人而言，我更喜欢将 contentSize 设置为屏幕的大小

顺便说一句，您也应该在 init 主体中调用 [super init]

# java - 使用 Java NIO 的高效读/写方法

> ID：11998870
> 
> 赞同：2
> 
> 时间：2012-08-17T01:57:01.830
> 
> 标签：java, nio

假设我们有向 Selector 注册的 SocketChannel（非阻塞模式）以供阅读。假设在 select() 选择器告诉我们该通道已准备好读取并且我们有一些 ByteBuffer 之后。我们想从我们的通道读取一些字节到这个缓冲区（ByteBuffer 在读取之前被清除）。为此，我们使用通道的 read() 方法返回实际读取的字节数。让我们假设这个数字在从通道读取后是正数，并且 ByteBuffer 的方法 hasRemaining() 返回 true。在这种情况下立即尝试从同一频道读取更多内容是否可行？write() 同样的问题。如果 write() 返回正值并且缓冲区的所有内容都未发送，是否可以立即重试直到 write() 返回零？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T03:09:59.723

这完全取决于数据到达的数据速率以及应用程序的延迟要求。如果您根本不关心延迟，您可能会通过延迟读取兴趣来获得稍高的带宽，直到您怀疑有足够的数据到达以填满您的缓冲区。

不过，你必须小心。延迟读取可能会迫使内核缓冲更多数据，可能会填满其缓冲区，并且必须开始丢弃数据包或以其他方式进行一些流量控制。这不仅会扼杀最后一段的任何好处。

所以一般来说，你想尽可能早地阅读。批处理读取的好处充其量是次要的，而潜在的陷阱可能很大。请记住，您看到非完整读取的事实意味着您处理数据的速度比输入数据的速度要快。换句话说，您处于需要消耗 CPU 的状态，因此额外的较小读取的开销基本上是免费的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T04:15:42.757

如果你得到一个短读的结果，没有阻塞就没有更多的数据可以读取，所以在没有阻塞之前你不能再次读取。否则下一次读取几乎肯定会返回零或-1。

如果读取填满缓冲区，从该连接的角度来看，继续读取直到它返回 <= 0 可能是有意义的，但是您正在从其他通道窃取周期。您还需要考虑公平性。一般来说，您可能应该读一读并继续遍历选定的键。如果那里有更多数据，下次选择会告诉你。

使用大缓冲区。

这也意味着在每次读取之前清除缓冲区是错误的。您应该使用翻转/获取/压缩周期取出数据，然后缓冲区准备好再次读取，并且您不会冒丢失数据的风险。这反过来意味着每个连接都需要一个缓冲区。

# merge - 错误 .match 表达式结果为 null

> ID：11998875
> 
> 赞同：0
> 
> 时间：2012-08-17T01:58:08.123
> 
> 标签：merge, match

我正在处理邮件合并脚本。我使用 Logger.log 发现错误出现在告诉匹配要查找的内容的表达式中。就我而言，我试图拉出 ${xxxxxxx} 内的所有键。下面是我所拥有的，我需要帮助清理它，因为此时它返回 null。

```
var template = "This is an example ${key1} that should pull ${key2} both keys from this text."
var templateVars = template.match(/\$\{\"[^\"]+\"\}/g); 
```

感谢任何人都可以就这个问题分享的任何指导。

-肖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T02:48:18.147

我不太熟悉 Google Apps 脚本，但我认为这段 Javascript 代码可以帮助您。

它查找 的所有出现`${key}`并返回`${ }`. 我认为这就是你要找的。

```
var template = "This is an example ${key1} that should pull ${key2} both keys from this text.";
var matches  = template.match(/\$\{[0-9a-zA-Z]*\}/mg);
console.log(matches);
for ( var i = 0; i < matches.length; i++ ) {
    console.log(matches[i].replace(/[\$\{|\}]/gm, ""));
} 
```

# javascript - 从 CoffeeScript 调用 JavaScript “新”

> ID：11998877
> 
> 赞同：1
> 
> 时间：2012-08-17T01:58:34.110
> 
> 标签：javascript, node.js, coffeescript

我正在尝试在 CoffeeScript 代码中重用 JavaScript 库（sim.js）。在 sim.js 附带的示例中，有 3 个文件，“sim-0.26.js”、“buffet_restaurant.js”和“buffet_restaurant.html”，像这样连接在一起（为了简化，我删除了一些参数）：

在“buffet_restaurant.html”里面，有

```
<script type="text/javascript" src="./buffet_restaurant_files/sim-0.26.js"></script>
<script type="text/javascript" src="./buffet_restaurant_files/buffet_restaurant.js"></script>
<script type="text/javascript">
  $(function () {
    $("#run_simulation").click(function () {
      var results = buffetRestaurantSimulation();
... 
```

其中 BuffetRestaurantSimulation 是 Buffet_restaurant.js 中的一个函数。Buffet_restaurant.js 中的代码是这样开始的：

```
function buffetRestaurantSimulation() 
{
    var sim = new Sim(); 
... 
```

其中 Sim 在 sim-0.26.js 中定义，如下所示：

```
function Sim(){...}; 
```

这个例子运行良好。我想在 node.js 的 CoffeeScript 文件中重用“Sim”。所以我试试这个（从 jasmine-node 调用）：

```
sjs = require "./sim-0.26.js"

mysim = new sjs.Sim() 
```

其中 sim-0.26.js 与 testsim.spec.coffee 位于同一目录中，该文件包含此代码。当我使用以下方法调用它时：

```
jasmine-node --coffee ./testsim.spec.coffee 
```

我明白了：

```
mysim = new sjs.Sim();
        ^
TypeError: undefined is not a function 
```

我怀疑我做错了很多事情。我对这一切都很陌生。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T02:17:51.883

除非`Sim`添加到它，否则d`exports`将不可用- 请参阅[模块文档以](http://nodejs.org/api/modules.html#modules_modules)获取有关需要编写 Node.js 模块的方式的更多信息。`require`

如果这需要在浏览器和节点中工作，那么只需将其添加到代码中`sim.js`：

```
var root = typeof exports === "object" ? exports : window;

root.Sim = Sim; 
```

# java - 使用 OOP 避免 instanceof

> ID：11998879
> 
> 赞同：1
> 
> 时间：2012-08-17T01:58:44.827
> 
> 标签：java, oop, instanceof

```
class Entity {
    // various fields and methods
}

class MobileEntity extends Entity {
    // various fields and methods
}

interface Consumer {
    public void consume(final Consumable c);
}

interface Consumable {
    public void onConsume(final Consumer c);
}

class Player extends MobileEntity implements Consumer {
    // Override methods, etc
    // Can consume
}

class Npc extends MobileEntity {
    // Cannot consume anything
}

class Food implements Consumable {
    public void onConsume(final Consumer c) {
        if (c instanceof Player) {
            healPlayer();
            removeFood(1);
        }
    }
} 
```

很抱歉将所有代码放在首位，但我认为这对我来说更容易解释，并且如果你看到它也能让你理解。这是我正在开发的游戏。我遇到的问题是如何在不使用***instanceof***运算符的情况下处理消耗品（无论是食物还是饮料）。我想避免在 Food 类中设置具体类**Player**（因为最终可能会有数百种不同类型的 Food），但在每种情况下都有合同例外（这表明存在问题）。

并非所有实体实现都会有*健康*字段。他们可能会，但如果是这样，我需要将某些标记为“可攻击”，然后进行测试

```
void applyDamage(int damage) {
    if (attackable) {
        health -= damage;
    }
} 
```

由于硬编码行为（引入新类的指标），这引入了新问题

我听说可能在类似的线程中使用访问者模式，但我认为它不适用于当前情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T02:04:23.097

由于 Player 实现了 Consumer，因此 Food 中的 onConsume 方法应该只调用 Consumer 上的 consume() 方法。在这种情况下，Player 版本的消费会做正确的工作。instanceof 不仅不好，而且在装饰对象时会失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T02:05:10.990

您的 Consumer 有一个 consume() 方法，而 Player 是一个 Consumer，那么为什么不将 Consumable 传递给 Consumer？另一方面，Player、Npc 和 Food 似乎都是数据模型，因此您可能希望将任何业务逻辑（例如增加健康或移除食物）排除在所有模型之外。在这种情况下，您需要一组单独的类，它们知道当玩家消耗食物时该怎么做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T02:07:18.113

要么你有向后的逻辑——消耗品应该传递给消费者，消耗品应该有消费者可以调用的方法，或者所有消费者都应该实现消耗品可以调用的所有可能的方法，并做正确的事情，这可能什么都不是。

# facebook - Facebook iOS SDK登录返回应用程序而不显示对话框

> ID：11998880
> 
> 赞同：0
> 
> 时间：2012-08-17T01:58:47.590
> 
> 标签：facebook, single-sign-on, facebook-login, facebook-ios-sdk

这是为了记录和分享我遇到的问题的解决方案，希望它对其他人也有帮助。

**问题：**

**使用 Facebook iOS SDK 从我的 iOS 应用程序执行 Facebook 登录，如果用户之前已授予请求的权限并在此之后注销**，它会立即从 Facebook 应用程序返回到我的应用程序，而不显示任何登录屏幕或对话框。无论是通过 Facebook iOS 应用程序还是通过应用程序本身的 web 视图登录，此行为都是相同的。

这可能是一个问题，尤其是当您的应用程序尝试支持多个 Facebook 用户时，因为用户可能没有事先登录到 Facebook 应用程序中的正确帐户。通过立即返回我们的应用程序而不明确显示使用的 Facebook 帐户，用户将使用 Facebook 中使用的当前帐户登录，这可能是错误的帐户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T01:58:47.590

[当在 Facebook https://developers.facebook.com/apps](https://developers.facebook.com/apps)的应用程序设置中设置了“iOS Bundle ID”时，会发生此行为

![在此处输入图像描述](../Images/a92a9525d470bb29636f18988a845bad.png)

[Facebook 登录](https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/#protip3)文档的 Pro-tip 3（我相信它是最近添加的）中也提到了这一点。

![在此处输入图像描述](../Images/4da279e2ec30b5bf82315cbfa05b40d4.png)

为了避免这种行为，需要将“iOS Bundle ID”字段清空。根据最近的经验，这可能涉及再次删除和创建整个“Native iOS App”部分，因为简单地删除“iOS Bundle ID”并保存更改似乎没有任何效果。

# jquery-mobile - jquery mobile上的自定义changePage导致c.data（“page”）在第二次调用时未定义

> ID：11998883
> 
> 赞同：1
> 
> 时间：2012-08-17T01:59:22.347
> 
> 标签：jquery-mobile, navigation, javascript

我正在尝试在动态应用程序中构建一些自定义导航，所有屏幕都是从服务器获取的，因此我注册了**pagebeforechange**事件并执行我自己的函数。

一切都按我的预期工作，除了当我刷新数据时我销毁动态页面并尝试使用页面 ID 再次调用我所在的页面，但是第二次，虽然我的代码为页面创建了 HTML，jQuery Mobile 抛出了一个" *c.data("page") is undefined* " 错误。

我绑定 pagebeforechange 事件：

```
$(document).bind('pagebeforechange', function(e, data) {
    if(typeof data.toPage === 'string') {
        appobj.dynamicPage(data.toPage, data.options);
    }
}); 
```

然后在 dynamicPage 方法中，我基于 Underscore.js 模板为我的页面创建 HTML，并让 jQuery 继续更改页面：

```
$.get('templates/page.tpl.html', function (data) {
    html = _.template(data, { /* several template parameters */});
});

page = $(html);
page.appendTo('body').page(); 
```

这个想法是尽可能多地使用 jQM，因为我正在创建目标页面并将其注入 DOM。

当我需要更新存储在 localStorage 中的支持数据时，我只需找到所有动态页面并销毁它们：

```
var current = $.mobile.activePage.attr('id');

$('.dynamicpage').remove();

$.mobile.changePage('#' + current 
```

运行应用程序时，我可以轻松地在各种屏幕/页面之间导航，即使对于应用程序启动时不存在但需要更新数据的页面（因为用户在数据库中的数据应用程序中添加的元素已更改）然后执行删除代码，但旧页面没有重新生成，以隐藏所有 DOM 内容的白页结尾，但我也想导航的页面似乎在 DOM 中（至少 firebug 告诉我是这样）。

如果我要重新开始开发，我可能会使用 Backbone.js 来处理我的模型更新和视图更改，但现在我只能使用 jQM。有什么建议么？我知道 jQM 没有找到我的页面，但我不明白为什么，因为应该调用我的事件并重新生成页面，即使设置了**allowSamePageTransition**标志也是如此。

问候，

塞尔吉奥·洛佩斯

# php - 如果表单字段不在模板中但在 formType 中，为什么 Symfony 会将表单字段设置为 null

> ID：11998886
> 
> 赞同：1
> 
> 时间：2012-08-17T01:59:46.627
> 
> 标签：php, symfony, doctrine-orm

我不明白为什么 Symfony 会这样做。

假设我有 UserFormType 类

```
->add(username);
->add(datecreated); 
```

现在我不在我的模板中显示 dateCreated 然后 symfony 设置`DateCreated`覆盖`null`数据库值的。

我想知道不将该值设置为 null 的问题，如果它不在模板中，则只有原始值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-29T06:33:32.783

这是一个老话题，但我遇到了同样的情况，对我来说处理这个问题的最简单和最干净的方法是当你不想对它做任何事情时从表单中删除该字段。

例如，我想显示用户所附加的组列表，但其他一些用户看不到它们。结果是这些用户的任何更改都会删除他们已经拥有的组。

解决方案：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder->addEventListener(
        FormEvents::PRE_SUBMIT,
        function (FormEvent $event) {
            $this->onPreSubmit($event);
        }
    );

    .....
}

public function onPreSubmit(FormEvent $event)
{
    $params = $event->getData();

    if (!isset($params['groups'])) {
        $event->getForm()->remove('groups');
    }
} 
```

现在您的表单将拒绝已设置的组，以避免您可以在表单中添加 options `'allow_extra_fields' => true`。它将通过验证并且不做任何事情。

虽然它很整洁，但我不是一个忠实的粉丝，但我看不到任何其他解决方案，否则您将不得不自己构建 html 和操作/服务来处理验证，而无需 symfony 内置表单系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T05:56:41.040

从[文档](http://symfony.com/doc/current/book/forms.html#book-form-creating-form-classes)中：`Additionally, if there are any fields on the form that aren't included in the submitted data, those fields will be explicitly set to null.`因此您必须呈现所有字段，否则它们将被设置为空。

您可以不将其添加到表单中，Symfony 将在更新时单独保留该值，我猜您无论如何都在代码中设置了 dateCreated，因此您不需要 Forms 库尝试更新该字段。

另一种选择是将字段添加为隐藏字段`->add('dateCreated', 'hidden')`，您需要在模板中呈现该字段，Symfony 将保留 dateCreated 数据。如果要渲染每一行，您可以`form_rest(form)`在树枝中使用来渲染所有缺失的字段。

# objective-c - Objective-C - iVar 范围方法变量？

> ID：11998887
> 
> 赞同：3
> 
> 时间：2012-08-17T01:59:55.130
> 
> 标签：objective-c, methods, scope, objective-c++, ivar

我之前在 Objective-C 中乱七八糟，遇到了一个很常见的情况：

我有一个类，它不是单例，它需要在方法调用之间共享一个变量，比如`static`，但每个实例都需要它自己的变量。然而，这个变量只需要在一个特定的方法中使用，我们称之为`-foo`.

我想做的是有一个宏，我们称之为它`ivar`，它可以让我执行以下操作：

```
@implementation MyClass 

-(foo)
{
    ivar int someVal = 10; // default value, ivar scoped variable.
}

-(bar)
{
    someVal = 5; // error, outside of `foo`'s scope.
}

@end 
```

变量的定义方式对我来说无关紧要（无论是宏`OBJC_IVAR(Type, Name, Default)`还是`ivar someType someName = value`），只要它满足以下要求：

*   具有线程安全性
*   可以在另一种方法中具有相同名称（但值不同）的变量
*   无类型（与变量的类型无关）
*   默认值支持
*   变量可以在一行中声明（我不应该仅仅为了在我的代码中放入一个变量而编写 15 行代码）

我目前正在自己​​开发一个 Objective-C++ 实现，我只是想知道是否有人对如何做到这一点有任何想法（或现有工具）。

显然，这不必使用真正的 iVar 来完成。更有可能的是，这应该在运行时使用关联对象来完成，这也为我们管理解除分配。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T15:55:23.133

在花了很多时间之后，我相信我在 Objective-C++ 中有一个完整的工作解决方案。一些特点：

*   变量是唯一的。只要他们有不同的范围，他们的价值观是独立的
*   每个实例都有自己的值
*   线程安全（由关联对象完成）
*   简单的变量声明：

    *   宏重载：只指定你需要的信息
    *   定义 OBJC_IVAR 的可能方法：

        ```
        OBJC_IVAR(); // creates a warning, does nothing
        OBJC_IVAR(Name); // creates an ivar named 'Name' of type 'id'
        OBJC_IVAR(Type, Name); // creates an ivar named 'Name' of type 'Type'
        OBJC_IVAR(Type, Name, Default); // creates an ivar named 'Name', of type 'Type', and a default value of 'Default' (which is only executed once); 
        ```

*   使用 C++ 模板的完整类型支持（都支持`__weak`, `__strong`, `__autoreleasing`,等）`volatile`

*   子类不与其超类共享变量（因此没有发生冲突的机会，变量实际上仅限于它们的范围）。
*   可以毫无问题地在单例中使用
*   速度很快，查找一个变量需要大约 15-30 个 CPU 周期，一旦查找到，设置它所需的时间与任何其他变量一样长。
*   大部分繁重的工作由预处理器完成，它允许更快的代码
*   只需拖放到现有的 Xcode 项目中，不依赖于自定义处理器

实现的一些小缺点：

*   对象必须具有所有权说明符（C++ 引用的限制：）`Reference to non-const type 'id' with no explicit ownership`。`__strong`通过添加、`__weak`或`__autoreleasing`到变量的类型很容易修复

*   实现很难阅读。因为它非常依赖 C++ 模板和 Objective-C 协同工作，所以很难仅仅改变“一件事”并希望它能够工作。我已经为实现添加了广泛的评论，因此希望这可以减轻一些负担。

*   方法调配可能会严重混淆这一点。不是最大的问题，但是如果您开始使用方法调配，如果您得到意想不到的结果，请不要感到惊讶。

*   不能在 C++ 对象中使用。不幸的是，C++ 不支持运行时属性，就像objective-c 一样，所以我们不能依赖最终清理我们的变量。因此，您不能在 C++ 对象中使用 OBJC_IVAR。不过，我有兴趣看到它的实现。

*   `#line`可能会彻底搞砸，所以不要使用它。

**版本历史**

*   1.0：初始版本
*   1.1：更新`OBJC_IVAR_NAME`为仅依赖预处理器。结果，我们无法使用`__func__`.

所以，事不宜迟，下面是代码：

**OBJC_IVAR.hpp**

```
//
//  OBJC_IVAR.h
//  TestProj
//
//  Created by Richard Ross on 8/17/12.
//  Copyright (c) 2012 Ultimate Computer Services, Inc. All rights reserved.
//
#ifndef OBJC_IVAR_HPP
#define OBJC_IVAR_HPP

#import <Foundation/Foundation.h>
#import <objc/runtime.h>

#import "NSValue+CppObject.h"

// Argument counting algorithm. Not too complex
#define __NARG(_1, _2, _3, _4, _5, VAL, ...) VAL
#define NARG(...) __NARG(__VA_ARGS__, 5, 4, 3, 2, 1, 0)

// Different implementations based on number of parameters passed in
#define __OBJC_IVAR(N, ...) _OBJC_IVAR_ ## N (__VA_ARGS__)
#define _OBJC_IVAR(N, ...) __OBJC_IVAR(N, __VA_ARGS__)

// Usage: OBJC_IVAR(Type (optional), Name (required), Default (optional))
#define OBJC_IVAR(...) _OBJC_IVAR(NARG(__VA_ARGS__), __VA_ARGS__)

// create a unique name. we use '__COUNTER__' here to support scoping on the same line, for compressed source code
#define __OBJC_IVAR_STRINGIFY_NAME(file, line, name, counter) @file ":" #line " " #name ":" #counter
#define _OBJC_IVAR_NAME(file, line, name, counter) __OBJC_IVAR_STRINGIFY_NAME(file, line, name, counter)
#define OBJC_IVAR_NAME(name) _OBJC_IVAR_NAME(__FILE__, __LINE__, name, __COUNTER__)

// old style creation. advantage: uses __func__ to determine calling function
// #define OBJC_IVAR_NAME(Name) [NSString stringWithFormat:@"%s:%i %s:%s:%i", __FILE__, __LINE__, __func__, #Name, __COUNTER__]

// implemenations for each of the overloads
#define _OBJC_IVAR_0(...) _Pragma("message \"Cannot call OBJC_IVAR with 0 params!\"")
#define _OBJC_IVAR_1(Name) _OBJC_IVAR_2(__strong id, Name)

// first major implemenation. because we do no assignment here, we don't have to check for is_set
#define _OBJC_IVAR_2(Type, Name) Type& Name = (_OBJC_IVAR::IMPL<Type>(self, OBJC_IVAR_NAME(Name)))

// this is where things get fun. we have 'OBJC_IVAR_CUR_NAME', instead of calling OBJC_IVAR_NAME
// multiple times, because we must ensure that COUNTER does not change during the course of the macro
// this is the 'inner bowels' of C, and it's quite hacky. Returns a reference to an associated object
// which is wrapped in a NSValue. Note that we only evaluate 'default' once throught the course of the
// application's cycle, so you can feel free to put intensive loading code there.
static NSString *_OBJC_IVAR_CUR_NAME;
#define _OBJC_IVAR_3(Type, Name, Default) Type& Name = (_OBJC_IVAR::IS_SET(self, (_OBJC_IVAR_CUR_NAME = OBJC_IVAR_NAME(Name))) ? _OBJC_IVAR::IMPL<Type>(self, _OBJC_IVAR_CUR_NAME) : _OBJC_IVAR::IMPL<Type>(self, _OBJC_IVAR_CUR_NAME, Default))

// namespace to wrap al lof our functions
namespace _OBJC_IVAR
{
    // internal dictionary of all associated object names, so that we don't run
    // into memory management issues.  we use a set here, because we should never
    // have duplicate associated object names.
    static NSMutableSet *_names = [NSMutableSet set];

    // wraps a value and a reference to a value. used over std::reference_wrapper,
    // as that doesn't actually copy in the value passed. That is required for what
    // we are doing, as we cannot be assigning to constants.
    template<typename T>
    class Wrapper {
    private:
        // private value wrapped by this object.
        T _value;
        // private reference wrapped by this object. should always point to _value.
        T& _ref;

    public:
        // default constructor. assumes 'T' has a valid 0-argument constructor
        Wrapper() : _value(), _ref(_value) { }

        // argument constructor. makes sure that value is initialized properly
        Wrapper(T val) : _value(val), _ref(_value) { }

        // returns the reference wrapped by this object
        operator T& () {
            return _ref;
        }

        T& get() {
            return _ref;
        }
    };

    // interns a name. because objc_getAssociatedObject works only by comparing
    // pointers (and +stringWithFormat: isn't guaranteed to return the same pointer),
    // we have to make sure that we maintain a list of all valid associated object
    // names. these are NOT linked to specific objects, which allows us to reuse some
    // memory
    inline NSString *name_intern(NSString *name)
    {
        // intern the value. first check if the object has been interned already,
        // and if it is, return that interned value
        if (id tmpName = [_names member:name])
        {
            name = tmpName;
        }

        // if we haven't interned this value before, then add it to the list and return it.
        else
        {
            [_names addObject:name];
        }

        return name;
    }

    // check and see if the requested iVar has been set yet. used for default value setting
    BOOL IS_SET(id target, NSString *name)
    {
        // first intern the name
        name = name_intern(name);

        // check if the object has this property. objc_getAssociatedObject will ALWAYS
        // return NULL if the object doesn't exist. Note the bridged cast. This is because
        // objc_getAssociatedObject doesn't care what you throw into the second parameter,
        // as long as it is a pointer. That gives us the flexibility at a later date, to,
        // for example, just pass a pointer to a single byte, and pull out the value that
        // way. However, we pass in a NSString pointer, because it makes it easy for us to
        // use and to re-use later.
        id val = objc_getAssociatedObject(target, (__bridge const void *) name);

        return val != nil;
    }

    // the actual implementation for setting the iVar. luckily this code isn't too hacky,
    // but it is a bit confusing.
    template<typename T>
    Wrapper<T>& IMPL(id target, NSString *name)
    {
        // first intern the name
        name = name_intern(name);

        // define a reference. we use pointers & new here, because C++ memory managment is
        // weird at best. Most of the time, you should be using RAII, but when dealing with
        // templates & objective-c interpolation, it is almost required that you use pointers
        // with new.
        Wrapper<T> *reference = nullptr;

        // check and see if the object already contains this property, if so, return that value
        NSValue *result = objc_getAssociatedObject(target, (__bridge const void *) name);
        if (result == nil)
        {
            // at this point, we need to create a new iVar, with the default constructor for the type.
            // for objective-c objects this is 'nil', for integers and floating point values this is 0,
            // for C++ structs and classes, this calls the default constructor. If one doesn't exist,
            // you WILL get a compile error.
            reference = new Wrapper<T>();

            // we now set up the object that will hold this wrapper. This is an extension on NSValue
            // which allows us to store a generic pointer (in this case a C++ object), and run desired
            // code on -dealloc (which will be called at the time the parent object is destroyed), in
            // this case, free the memory used by our wrapper.
            result = [NSValue valueWithCppObject:reference onDealloc:^(void *) {
                delete reference;
            }];

            // finally, set the associated object to the target, and now we are good to go.
            // We use OBJC_ASSOCIATION_RETAIN, so that our NSValue is properly freed when done.
            objc_setAssociatedObject(target, (__bridge const void *) name, result, OBJC_ASSOCIATION_RETAIN);
        }

        // from result, we cast it's -cppObjectValue to a Wrapper, to pull out the value.
        reference = static_cast<Wrapper<T> *>([result cppObjectValue]);

        // finally, return the pointer as a reference, not a pointer
        return *reference;
    }

    // this is pretty much the same as the other IMPL, but it has specific code for default values.
    // I will ignore everything that is the same about the two functions, and only focus on the
    // differences, which are few, but mandatory.
    template<typename T>
    Wrapper<T>& IMPL(id target, NSString *name, const T& defVal)
    {
        name = name_intern(name);

        Wrapper<T> *reference = nullptr; // asign to be the default constructor for 'T'

        NSValue *result = objc_getAssociatedObject(target, (__bridge const void *) name);
        if (result == nil)
        {
            // this is the only difference. Instead of constructing with the default constructor,
            // simply pass in our new default value as a copy.
            reference = new Wrapper<T>(defVal);
            result = [NSValue valueWithCppObject:reference onDealloc:^(void *) {
                delete reference;
            }];

            objc_setAssociatedObject(target, (__bridge const void *) name, result, OBJC_ASSOCIATION_RETAIN);
        }

        reference = static_cast<Wrapper<T> *>([result cppObjectValue]);
        return *reference;
    }
}

#endif // OBJC_IVAR_HPP 
```

**NSValue+CppObject.h**

```
//
//  NSValue+CppObject.h
//  TestProj
//
//  Created by Richard Ross on 8/17/12.
//  Copyright (c) 2012 Ultimate Computer Services, Inc. All rights reserved.
//

#import <Foundation/Foundation.h>

// Extension on NSValue to add C++ object support. Because of the difficulty
// involved in templates, I took the easy way out and simply passed in a block
// of code to be run at dealloc.
@interface NSValue (CppObject)

// create a new NSValue instance that holds ptr, and calls 'deallocBlock' on destruction.
+(id) valueWithCppObject:(void *) ptr onDealloc:(void (^)(void *)) deallocBlock;
-(id) initWithCppObject:(void *)  ptr onDealloc:(void (^)(void *)) deallocBlock;

// get the held pointer of this object. I called it -cppObjectValue, so
// there was no confusion with -pointerValue.
-(void *) cppObjectValue;

@end 
```

**NSValue+CppObject.m**

```
//
//  NSValue+CppObject.m
//  TestProj
//
//  Created by Richard Ross on 8/17/12.
//  Copyright (c) 2012 Ultimate Computer Services, Inc. All rights reserved.
//

#import "NSValue+CppObject.h"

// the concrete NSValue subclass for supporting C++ objects. Pretty straight-forward interface.
@interface ConcreteCppObject : NSValue
{
    // the underlying object that is being pointed to
    void *_object;
    // the block that is called on -dealloc
    void (^_deallocBlock)(void *);
}

@end

@implementation ConcreteCppObject

// object initialization
+(id) valueWithCppObject:(void *)ptr onDealloc:(void (^)(void *))deallocBlock
{
    return [[self alloc] initWithCppObject:ptr onDealloc:deallocBlock];
}

-(id) initWithCppObject:(void *)ptr onDealloc:(void (^)(void *))deallocBlock
{
    if (self = [super init])
    {
        _object = ptr;
        _deallocBlock = deallocBlock;
    }

    return self;
}

// required methods for subclassing NSValue
-(const char *) objCType
{
    return @encode(void *);
}

-(void) getValue:(void *)value
{
    *((void **) value) = _object;
}

// comparison
-(BOOL) isEqual:(id)compare
{
    if (![compare isKindOfClass:[self class]])
        return NO;

    return [compare cppObjectValue] == [self cppObjectValue];
}

// cleanup
-(void) dealloc
{
    // this should manage cleanup for us
    _deallocBlock(_object);
}

// value access
-(void *) cppObjectValue
{
    return _object;
}

@end

// NSValue additions for creating the concrete instances
@implementation NSValue (CppObject)

// object initialization
+(id) valueWithCppObject:(void *)ptr onDealloc:(void (^)(void *))deallocBlock
{
    return [[ConcreteCppObject alloc] initWithCppObject:ptr onDealloc:deallocBlock];
}

-(id) initWithCppObject:(void *)ptr onDealloc:(void (^)(void *))deallocBlock
{
    return [[self class] valueWithCppObject:ptr onDealloc:deallocBlock];
}

// unless the NSValue IS a ConcreteCppObject, then we shouldn't do anything here
-(void *) cppObjectValue
{
    [self doesNotRecognizeSelector:_cmd];

    return nil;
}

@end 
```

**示例用法：**

```
#import "OBJC_IVAR.hpp"

@interface SomeObject : NSObject

-(void) doSomething;

@end

@implementation SomeObject

-(void) doSomething
{
    OBJC_IVAR(__strong id, test, @"Hello World!");
    OBJC_IVAR(int, test2, 15);

    NSLog(@"%@", test);
    NSLog(@"%i", test2 += 7);

    // new scope
    {
        OBJC_IVAR(int, test, 100);

        NSLog(@"%i", ++test);
    }

    [self somethingElse];
}

-(void) somethingElse
{
    OBJC_IVAR(int, newVar, 7);

    NSLog(@"%i", newVar++);
}

@end

int main()
{
    SomeObject *obj = [SomeObject new];

    [obj doSomething];
    [obj doSomething];
    [obj doSomething];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T04:47:37.530

> 我有一个类，它不是一个单例，它需要一个在方法调用之间共享的变量，比如静态的，但是每个实例都需要它自己的变量。

在这种情况下，变量是对象状态的一部分，因此最适合使用实例变量（或属性）。**这正是 ivars 的用途**，无论它们是在十几种方法中使用还是仅在一种方法中使用。

> 我目前正在自己​​开发一个 Objective-C++ 实现，我只是想知道是否有人对如何做到这一点有任何想法（或现有工具）。

**我的建议是根本不要这样做。**如果您的目标是避免混乱，请不要无谓地尝试向语言中添加新的存储类。

但是，如果您决心追求这条线，我会考虑使用块而不是关联对象。块获得它们自己的变量副本，这些变量的范围仅限于块的生命周期。例如，您可以这样做：

```
- (void)func
{
    __block int i = 0;
    void (^foo)() = ^{
        i++;
        NSLog(@"i = %d", i);
    };

    foo();
    foo();
    foo();
} 
```

你得到的输出是：

```
i = 1
i = 2
i = 3 
```

也许您可以找到一种巧妙的方法将其包装在宏中，但在我看来，仅仅为了避免声明实例变量就很麻烦。

# protocol-buffers - Protobuf 和流水线问题

> ID：11998889
> 
> 赞同：1
> 
> 时间：2012-08-17T02:00:51.427
> 
> 标签：protocol-buffers, netty

有什么方法可以设置多个 protobufEncoder/protobufDecoder？

让我解释一下我的问题。我有一个命令将从客户端发送到服务器，服务器获取命令并根据命令做一些工作。现在服务器的响应（“答案”）可能是：字符串的长度或用于整数平方（顺序不确定）

我现在的问题是：我该怎么做才能让客户端至少从服务器接收到两个不同的响应？两者都是用 Protobuf “编码”的。反过来，我需要做什么才能使服务器至少发送两个不同的响应？而且两者都是用 Protobuf “编码”的。两者都是用 protobuf 的“解码器”。

netty 的 ProtobufDecoder 设置两个不同的 protobufEncoder/Decoder 是不可能的。

让我们看看下面的netty例子，decoder只能接收一个decoder对象

LocalTimeServerPipelineFactory：

```
public ChannelPipeline getPipeline() throws Exception {
    ChannelPipeline p = pipeline();
    p.addLast("frameDecoder", new ProtobufVarint32FrameDecoder());
    p.addLast("protobufDecoder", new ProtobufDecoder(LocalTimeProtocol.Locations.getDefaultInstance()));

    p.addLast("frameEncoder", new ProtobufVarint32LengthFieldPrepender());
    p.addLast("protobufEncoder", new ProtobufEncoder());

    p.addLast("handler", new LocalTimeServerHandler());
    return p;
} 
```

提前致谢并致以最诚挚的问候。

石英

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:08:55.833

您可以即时调整 ChannelPipeline。这应该可以帮助你。只需在需要时添加/删除正确的。

# php - ajax 代码无法访问来自 php 的 json 响应

> ID：11998894
> 
> 赞同：1
> 
> 时间：2012-08-17T02:01:45.690
> 
> 标签：php, json, jquery

这是我的ajax调用

```
<script src = "js/jquery.js" type = "text/javascript"></script>
<script type="text/javascript">

$(document).ready(function(){

    $('#DepartmentNameDropdown').change(function(){

        $('#DepartmentName').attr('value', document.getElementById("DepartmentNameDropdown").options[document.getElementById("DepartmentNameDropdown").selectedIndex].text);                                 

    $.ajax({
        type: "POST",
        dataType: "json",
        url: "http://localhost:8081/crownregency/getInfo.php",
        data: {id : $('#DepartmentNameDropdown').val()}, //data: {status: status, name: name},
        success:function(data){
            $('#DepartmentDescription').attr('value', data.Desc);
        }           
    });
});                    
});
$('#DepartmentName').attr('value', $('#DepartmentNameDropdown').text());    

</script> 
```

这是我的 getinfo.php

```
<?php
mysql_connect("localhost", "root", "");
mysql_select_db("jkings");
$value = $_POST['id'];
$query = mysql_query("SELECT * FROM department WHERE dept_ID = $value");
$row = mysql_fetch_array($query);
$desc = $row['dept_desc'];
$mission = $row['dept_mission'];
$struct = array('Desc' => '$desc', 'Mission' => '$mission');
session_start();
$_SESSION['id'] = $value;

echo json_encode($struct);
//echo $row['dept_desc'];
?> 
```

我不知道我在代码中哪里犯了错误，但似乎我无法访问 json 响应。我已经尝试了不同的方法，我还在学习这个 ajax 和 json，所以我很难看出我在哪里犯了错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T02:06:12.800

我不完全确定，但我认为你可能需要改变

> ```
> $('#DepartmentDescription').attr('value', data.Desc); 
> ```

进入

> ```
> $('#DepartmentDescription').attr('value', data['Desc']); 
> ```

还，

> $struct = array('Desc' => '$desc', 'Mission' => '$mission');

应该改为

> $struct = array('Desc' => $desc, 'Mission' => $mission);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T02:16:34.603

你的javascript似乎很好我会建议这个来检测问题可能出在哪里

```
 $.ajax({
    type: "POST",
    dataType: "json",
    url: "http://localhost:8081/crownregency/getInfo.php",
    data: {id : $('#DepartmentNameDropdown').val()}, //data: {status: status, name: name},
    success:function(data){
         alert(data.Desc)// should alert [object object] if all is well with your php code
        $('#DepartmentDescription').attr('value', data.Desc);
    }           
}); 
```

我真的很怀疑，但可能是区分大小写的问题，所以可能会改变

```
dataType:'json' to dataType:'JSON' 
```

另外，如果您使用的是 chrome，请使用开发人员工具查看是否存在 javascript 错误（为 safari 开发）

# php - 将输出存储在mysql中

> ID：11998895
> 
> 赞同：0
> 
> 时间：2012-08-17T02:02:05.437
> 
> 标签：php, mysql

我正在尝试将这个问题的输出存储在 mysql 中

[根据大小过滤网页中的图像](https://stackoverflow.com/questions/11866167/filter-images-from-webpage-based-on-size/11866316#comment16002405_11866316)

```
<?php 

include('connect.php'); 

$html = file_get_contents("http://santabanta.com/photos/amisha-patel/402186.htm"); 

$doc = new DOMDocument();
@$doc->loadHTML($html);

$tags = $doc->getElementsByTagName('img'); 

foreach ($tags as $tag) { 
    $data = get_headers($tag->getAttribute('src'),1); 
    if((intval($data["Content-Length"])/1024)>=10){ 
        echo $tag->getAttribute('src');
        $url=''.$tag->getAttribute('src').'';
        echo $url;
        mysql_query ("INSERT INTO table1 (url) VALUES ('" . mysql_real_escape_string($url) . "')");
    }
} 

?> 
```

但令我惊讶的是，只存储了输出的第一个链接/链接。我已经使用 echo 进行检查，并且 echo 给出了正确的输出。

我用于存储此代码的 mysql 数据类型是文本，我正在使用此 mysql 查询插入 mysql 但只保存第一行。

```
mysql_query ("INSERT INTO tablea (url) VALUES ('" . mysql_real_escape_string($url) . "')"); 
```

从 echo 获取结果时一切似乎都很好，但后来它没有存储在 mysql 中。

我试图在表单字段中填写这些回显详细信息，令我惊讶的是，只有第一行也填写了表单字段，所以无论 mysql 存储什么都是按照表单字段输出，我只是试图检查它的 mysql 问题还是什么。我直接在 phpmyadmin 中执行了查询，所有内容都被存储了，但是通过表单它没有得到但是 echo 给出了完整的细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T02:23:41.480

这是我使用的代码

```
<?php 

include('connect.php'); 

$html = file_get_contents("http://santabanta.com/photos/amisha-patel/402186.htm"); 

$doc = new DOMDocument();
@$doc->loadHTML($html);

$tags = $doc->getElementsByTagName('img'); 

foreach ($tags as $tag) { 
    $data = get_headers($tag->getAttribute('src'),1); 
    $filesize = (intval($data["Content-Length"])/1024);
    // Modify the integer below to what size KB you want.
    if($filesize >= 10){ 
        //echo $tag->getAttribute('src');
        $url = $tag->getAttribute('src');
        // Do the insert here so it enters if all criteria are met.
        $query = "INSERT INTO tablea (url) VALUES ('" . mysql_real_escape_string($url) . "')";
        $result = mysql_query($query);
        // This to check what the error may be and your insert statement.
        if(!$result) echo mysql_error() . " | " . $query . "<br />";
    } else {
        echo "File not added: ".$tag->getAttribute('src')." | " .$filesize. "kb<br />";
    }
}

?> 
```

我的结果如下：

```
File not added: http://media.santabanta.com/medium/indian%20%20celebrities(f)/sambhavna%20seth/sambhavna-seth-10a.jpg | 6.015625kb
File not added: http://media.santabanta.com/medium/bollywood%20movies/jism%202/jism-2-17a.jpg | 4.9638671875kb
File not added: http://media.santabanta.com/medium/indian%20%20celebrities(f)/kangana%20ranaut/kangana-ranaut-45a.jpg | 5.09375kb
File not added: http://media.santabanta.com/medium/indian%20%20celebrities(f)/bidita%20bag/bidita-bag-0a.jpg | 8.7138671875kb
File not added: http://media.santabanta.com/medium/indian%20%20celebrities(f)/ileana/ileana-14a.jpg | 6.703125kb
File not added: http://media.santabanta.com/medium/indian%20%20celebrities(f)/yami%20gautam/yami-gautam-6a.jpg | 4.78515625kb
File not added: http://media.santabanta.com/medium/bollywood%20movies/ek%20tha%20tiger/ek-tha-tiger-15v.jpg | 6.15234375kb
File not added: http://media.santabanta.com/medium/events/independence%20day/independence-day-78a.jpg | 8.470703125kb
File not added: http://media.santabanta.com/medium/bollywood%20movies/ek%20tha%20tiger/ek-tha-tiger-14a.jpg | 5.8408203125kb
File not added: http://media.santabanta.com/medium/indian%20%20celebrities(f)/diana%20penty/diana-penty-3a.jpg | 7.7099609375kb
File not added: http://media.santabanta.com/medium/indian%20%20celebrities(f)/sana%20khan/sana-khan-2a.jpg | 6.6640625kb
File not added: http://media.santabanta.com/medium/emotions/love/love-126a.jpg | 4.18359375kb
File not added: http://b.scorecardresearch.com/p?c1=2&c2=13655906&cv=2.0&cj=1 | 0.0009765625kb 
```

由于文件不符合条件，因此不会添加它们。这次只有两个图像添加到数据库中。

# html - Jquery Validate 然后 .onsubmit 函数

> ID：11998897
> 
> 赞同：0
> 
> 时间：2012-08-17T02:02:32.927
> 
> 标签：html, ajax, forms, jquery-validate, onsubmit

我在表单中使用 Jquery 验证，还在 .on(submit) 代码中使用 Ajax 函数。

问题是即使验证错误，.on(submit) 函数仍然运行。

是否有任何类型的“如果验证成功”代码添加到验证代码中以放入 .on(submit) 代码，这样它只会在表单正确且经过验证时运行？

这是 .on(submit) 函数

```
 $('#valform').on('submit', function (e){
    e.preventDefault();
    $.ajax({
    type: "POST",
    url: "<?php echo MAXINBOUND_PLUGIN_URL ?>/php/localProxy.php",
    data: $('#valform').serialize(),
    success: function (response) {
            alert('Great!');
             // do something!
    },
    error: function () {
            alert('There was a problem!');  // handle error
    }
        });
        }); 
```

这是验证码

```
 $("#valform").validate({
    invalidHandler: function(form, validator) {
        success: function (response) {
        var errors = validator.numberOfInvalids();

        if (errors) {
            $("#error-message").show().text("Please correct the required field(s)");
        } else {
            $("#error-message").hide();
        }
    },
    messages: {
        agree: {
            required: ""
        },
        phone1: {
            required: ""
        },
        address1: {
            required: ""
            },
    },
    rules: {
        agree: {
            required: true,
        },
        phone1: {
            required: true,
            phoneUS: true
        },
        Address1: {
            required: true,
            addr: true,
            },

        },

     }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T03:38:50.927

您可以使用**submitHandler**进行 ajax 调用。所以它只会在通过所有验证后调用。

```
$("#valform").validate({
   submitHandler: function(form) {
     //do ajax call
   }
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T02:56:13.830

您可以使用[jquery valid() 方法](http://docs.jquery.com/Plugins/Validation/valid)来检查提交的表单是否有效。像这样的东西...

```
if ($("#valform").valid()) {
    // do your ajax stuff
} 
```

请注意，**valid()**仅在之前的表单上调用**validate()时才有效。**

希望这可以帮助！

# ruby-on-rails - Highcharts 不适用于 Heroku

> ID：11998902
> 
> 赞同：1
> 
> 时间：2012-08-17T02:03:09.307
> 
> 标签：ruby-on-rails, heroku, highcharts

我有一个使用 highcharts 的 ruby​​ on rails 应用程序。

在本地它就像一个魅力，但是当我将应用程序推送到 Heroku 时，Highcharts 停止工作，并且`div`应该包含图表的标签显示为空。我什至用 Highcharts 示例之一（只有硬编码数据）对其进行了测试，但仍然没有。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T07:20:04.370

想通了：问题在于资产的预编译。原来highcharts没有预编译

添加 ：

config.assets.precompile += ['rollover.js', 'highcharts.js'] 到 production.rb （我想 application.rb 应该也可以）

和

到布局文件。

（因为我希望所有 javascript 文件都在 application.jss 中编译，所以我的布局文件中只有 <%= javascript_include_tag "application" %>）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T02:07:11.373

听起来 Highcharts 没有加载——要么是因为它没有被推送到 Heroku，要么是因为它没有被正确地提供。转到 highcharts.js*应该*所在的 URL，看看你得到的是 JavaScript 还是 404。

如果您*可以*毫无问题地访问 highcharts.js，那么问题很可能出在设置代码中。检查并查看是否将适当的变量加载到页面上（使用您正在测试的浏览器的 Web 开发人员工具）以及在加载页面时是否显示任何 JavaScript 错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-15T19:04:54.400

使用惰性 highcharts gem。谷歌搜索了一个小时对我来说没有任何结果。最后，我从 Vendor 目录中复制了 highcharts.js 并将其粘贴到资产中。中提琴！

# entity-framework - EF Power Tools Beta 2 和 Visual Studio 2012 Express

> ID：11998905
> 
> 赞同：0
> 
> 时间：2012-08-17T02:04:13.627
> 
> 标签：entity-framework, visual-studio-2012

我似乎无法使用 VS2012 Express for Web 安装 EF Power Tools。它仅与 VS 的标准版或终极版兼容吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:22:37.170

是的，它与 Express 版本不兼容，因为 Express 版本不允许安装插件。

# xml - XSL - 使用当前上下文的值查找另一个节点值

> ID：11998907
> 
> 赞同：1
> 
> 时间：2012-08-17T02:04:36.997
> 
> 标签：xml, xslt

我有一个 XML，它使用 PackageID 值来引用文档中的其他节点。我想使用当前节点的结果然后在文档中查找包含匹配 PackageID 的另一个节点的值。在这种情况下，我想要获取 SourcePackage/PackageName 或 MaterialPackage/PackageName 或另一个具有与 CompositionPackage/PackageTracks/TimelineTrack/TrackSegment/SourcePackageID 中的 PackageID 值匹配的 PackageID 值的值。

示例 XML：

```
<AAG version="1.1">
<Preface>
  <ContentStorage>
      <SourcePackage>
        <PackageTracks>
          <TimelineTrack>
            <TrackSegment>
                <ComponentLength>5066</ComponentLength>
            </TrackSegment>
          </TimelineTrack>
        </PackageTracks>
        <PackageName>Name001</PackageName>
        <PackageID>urn:44f70006</PackageID>
      </SourcePackage>
      <CompositionPackage>
        <PackageTracks>
          <TimelineTrack>
            <TrackSegment>
                <SourcePackageID>urn:44f70006</SourcePackageID>
                <ComponentLength>10099</ComponentLength>
            </TrackSegment>
          </TimelineTrack>
        </PackageTracks>
        <PackageName>NameABC</PackageName>
        <PackageID>urn:ce1904fd</PackageID>
      </CompositionPackage>
      <CompositionPackage>
        <PackageTracks>
          <TimelineTrack>
            <TrackSegment>
                <SourcePackageID>urn:00f70009</SourcePackageID>
                <ComponentLength>222</ComponentLength>
            </TrackSegment>
          </TimelineTrack>
        </PackageTracks>
        <PackageName>NameABC</PackageName>
        <PackageID>urn:ff1603fd</PackageID>
      </CompositionPackage>
      <CompositionPackage>
        <PackageTracks>
          <TimelineTrack>
            <TrackSegment>
                <SourcePackageID>urn:11f80008</SourcePackageID>
                <ComponentLength>444</ComponentLength>
            </TrackSegment>
          </TimelineTrack>
        </PackageTracks>
        <PackageName>NameBCD</PackageName>
        <PackageID>urn:gg1702fj</PackageID>
      </CompositionPackage>
      <CompositionPackage>
        <PackageTracks>
          <TimelineTrack>
            <TrackSegment>
                <SourcePackageID>urn:22f90009</SourcePackageID>
                <ComponentLength>555</ComponentLength>
            </TrackSegment>
          </TimelineTrack>
        </PackageTracks>
        <PackageName>NameXYZ</PackageName>
        <PackageID>urn:11f80008</PackageID>
      </CompositionPackage>
      <MaterialPackage>
        <PackageTracks>
          <TimelineTrack>
            <TrackSegment>
            <ComponentLength>864</ComponentLength>
            </TrackSegment>
          </TimelineTrack>
        </PackageTracks>
        <PackageName>Name002</PackageName>
        <PackageID>urn:00f70009</PackageID>
      </MaterialPackage>
  </ContentStorage>
</Preface>
</AAG> 
```

示例 XSL：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" omit-xml-declaration="no" indent="yes"/>
<xsl:strip-space elements="*"/>

<xsl:template match="@*|node()">
<xsl:copy>
<xsl:apply-templates select="@*|node()"/>
</xsl:copy>
</xsl:template>

 <xsl:template match = "AAG">
 <Master>
 <xsl:for-each select="AAG/Preface/ContentStorage">
 <newnode>
   <value1><xsl:value-of select ="CompositionPackage/PackageTracks/TimelineTrack/TrackSegment/ComponentLength"/></value1>
   <value2><xsl:value-of select ="CompositionPackage/PackageTracks/TimelineTrack/TrackSegment/SourcePackageID"/></value2>
   <value3><xsl:value-of select ="CompositionPackage/PackageTracks/TimelineTrack/TrackSegment[SourcePackageID=current()/MaterialPackage/PackageName"/></value3>
 </newnode>
 </xsl:for-each>
 </Master>
 </xsl:template>
 </xsl:stylesheet> 
```

预期的 XML：

```
<Master>
<newnode>
  <Value1>1099</Value1>
  <Value2>urn:44f70006</Value2>
  <Value3>Name001</Value3>
</newnode>
<newnode>
  <Value1>222</Value1>
  <Value2>urn:00f70009</Value2>
  <Value3>Name002</Value3>
</newnode>
<newnode>
  <Value1>444</Value1>
  <Value2>urn:11f80008</Value2>
  <Value3>NameXYZ</Value3>
</newnode>
<newnode>
  <Value1>555</Value1>
  <Value2>urn:22f90009</Value2>
  <Value3></Value3>
</newnode>
</Master> 
```

我的 Current XSL 正在为所有 value3 元素返回 ""。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T03:22:43.437

**提供的转换有几个错误**。

**下面的转换是提供的一个已纠正错误的转换**：

```
 <xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="@*|node()">
        <xsl:copy>
          <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
  </xsl:template>

  <xsl:template match = "AAG">
   <Master>
     <xsl:for-each select="Preface/ContentStorage/CompositionPackage">
         <newnode>
           <value1>
              <xsl:value-of select=
                "PackageTracks/TimelineTrack/TrackSegment/ComponentLength"/>
           </value1>
           <value2>
             <xsl:value-of select=
              "PackageTracks/TimelineTrack/TrackSegment/SourcePackageID"/>
       </value2>
           <value3>
             <xsl:value-of select=
              "../*[self::SourcePackage or self::MaterialPackage]
                                [PackageID
                                =
                                current()
                                 /PackageTracks/TimelineTrack/TrackSegment/SourcePackageID
                                ]
                                /PackageName
                 "/>
           </value3>
         </newnode>
   </xsl:for-each>
  </Master>
  </xsl:template>
 </xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<AAG version="1.1">
    <Preface>
        <ContentStorage>
            <SourcePackage>
                <PackageTracks>
                    <TimelineTrack>
                        <TrackSegment>
                            <ComponentLength>5066</ComponentLength>
                        </TrackSegment>
                    </TimelineTrack>
                </PackageTracks>
                <PackageName>Name001</PackageName>
                <PackageID>urn:44f70006</PackageID>
            </SourcePackage>
            <CompositionPackage>
                <PackageTracks>
                    <TimelineTrack>
                        <TrackSegment>
                            <SourcePackageID>urn:44f70006</SourcePackageID>
                            <ComponentLength>10099</ComponentLength>
                        </TrackSegment>
                    </TimelineTrack>
                </PackageTracks>
                <PackageName>NameABC</PackageName>
                <PackageID>urn:ce1904fd</PackageID>
            </CompositionPackage>
            <CompositionPackage>
                <PackageTracks>
                    <TimelineTrack>
                        <TrackSegment>
                            <SourcePackageID>urn:00f70009</SourcePackageID>
                            <ComponentLength>222</ComponentLength>
                        </TrackSegment>
                    </TimelineTrack>
                </PackageTracks>
                <PackageName>NameABC</PackageName>
                <PackageID>urn:ff1603fd</PackageID>
            </CompositionPackage>
            <MaterialPackage>
                <PackageTracks>
                    <TimelineTrack>
                        <TrackSegment>
                            <ComponentLength>864</ComponentLength>
                        </TrackSegment>
                    </TimelineTrack>
                </PackageTracks>
                <PackageName>Name002</PackageName>
                <PackageID>urn:00f70009</PackageID>
            </MaterialPackage>
        </ContentStorage>
    </Preface>
</AAG> 
```

**产生了想要的正确结果**：

```
<Master>
   <newnode>
      <value1>10099</value1>
      <value2>urn:44f70006</value2>
      <value3>Name001</value3>
   </newnode>
   <newnode>
      <value1>222</value1>
      <value2>urn:00f70009</value2>
      <value3>Name002</value3>
   </newnode>
</Master> 
```

# c# - Visual Studio 2012 RC 中未显示重构菜单

> ID：11998910
> 
> 赞同：3
> 
> 时间：2012-08-17T02:04:53.587
> 
> 标签：c#, visual-studio-2012

我在 Visual Studio 2012 RC 中没有显示重构菜单。它没有显示在菜单栏或上下文相关帮助中。是否需要更改设置以使其显示。我在自定义选项中看到了重构菜单，但无法使其显示在菜单栏中。这是在 ac# 项目中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T14:56:31.040

我刚才也遇到过这种情况。原来我正在编辑一个不属于开放解决方案的文件——它来自另一个分支。直到我意识到这一点，我才感到困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-12T15:31:59.420

我有一个类似的例子。事实证明，我正在处理的项目并不总是有一些要编译的文件。在这种情况下，它是一个 ASMX 文件，并且没有任何重构位起作用。

# javascript - 使用 JavaScript 动画 HTML5 进度条

> ID：11998913
> 
> 赞同：2
> 
> 时间：2012-08-17T02:05:20.227
> 
> 标签：javascript, html, animation

我正在尝试做一个简单的 HTML5 进度条。当用户单击一个按钮时，我希望它（onclick）开始动画，以便它在三秒内从 0-100（满）。它应该是一些非常基本的 Javascript，我希望将其放在文档的开头。

与此非常相似： [HTML5 进度条动画](https://stackoverflow.com/questions/11078726/html5-progress-bar-animation)

我只需要它 onclick 而不是 onload 和一个按钮。它只是一个标准的 HTML 进度条，所以它看起来像这样：

```
<progress id="progress" value="0" min="0" max="100">0%</progress>
<input type="button" value="button" onclick="[make_progress_bar_go_from_0_to_100]"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T02:18:54.380

您所需要的只是您发布的问题中的这个示例：http: [//jsfiddle.net/526hM/](http://jsfiddle.net/526hM/)

将它附加到 onload 的部分是这样的：

```
$(document).ready(function(){
    ...
    setTimeout(animator, updatesPerSecond);
} 
```

您需要做的就是将此`animator`功能附加到按钮上。要让效果在 3 秒内发生，请更新时间变量。

HTML：

```
<progress max="200" value="0"></progress>
<button id="theButton">Start!</button> 
```

脚本：

```
$(document).ready(function(){
    var msecsPerUpdate = 1000/60; // # of milliseconds between updates, this gives 60fps
    var progress =  $('progress');
    var duration = 3;             // secs to animate for
    var interval = progress.attr('max')/(duration*1000/msecsPerUpdate);

    var animator = function(){
            progress.val(progress.val() + interval);
            if (progress.val() + interval < progress.attr('max')){
               setTimeout(animator, msecsPerUpdate);
            } else {
                progress.val(progress.attr('max'));
            }
        }

    $('#theButton').click(function(e) {
        e.preventDefault();
        animator();
    });
});​ 
```

演示：http: [//jsfiddle.net/526hM/28/](http://jsfiddle.net/526hM/28/)

# c++ - 求二维向量之和

> ID：11998914
> 
> 赞同：2
> 
> 时间：2012-08-17T02:05:27.330
> 
> 标签：c++, vector

难以找到二维向量的总和。这看起来好吗？

```
int sumOfElements(vector<iniMatrix> &theBlocks)
{
  int theSum = 0;

  for(unsigned i=0; (i < theBlocks.size()); i++)
  { 
    for(unsigned j=0; (j < theBlocks[i].size()); j++)
    {
        theSum +=theBlocks[i][j];
    }
  }

  return theSum;
} 
```

它返回一个负数，但是，它应该返回一个正数..

希望有人可以提供帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T02:09:26.703

代码在抽象意义上看起来是正确的，但你可能会溢出`theSum`。您可以尝试`theSum`使用 type`double`来查看您获得的值，以帮助找出正确的整数类型以用于它。

```
double sumOfElements(vector<iniMatrix> &theBlocks)
{
  double theSum = 0;
  /* ... */
  return theSum;
} 
```

当您观察返回的值时，您可以查看它是否适合 an`int`或者您是否需要使用更宽的`long`或`long long`类型。

如果矩阵中的所有值都是正数，则应考虑使用其中一种无符号整数类型。这将使您的允许值范围加倍。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-08T08:17:42.087

问题显然是 int 超出了它的边界（就像其他人说的那样）

对于有符号数据类型，它在溢出时变为负数，而对于无符号数据类型，它在溢出后再次从零开始。

如果您想务实地检测溢出，您可以粘贴这些行而不是附加行。

```
if( theSum > int(theSum + theBlocks[i][j]) )
    //print error message, throw exception, break, ...
    break;
else
    theSum += theBlocks[i][j]; 
```

要获得比加法处理更多数据类型和更多操作的更通用解决方案，请查看：[如何检测整数溢出？](https://stackoverflow.com/questions/199333/best-way-to-detect-integer-overflow-in-c-c)

将使用一个解决方案`unsigned long long`，如果它也超出其边界，则您需要使用第三方库来处理大整数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T05:21:49.887

就像 Mokhtar Ashour 所说，可能是变量`theSum`溢出了。`unsigned`如果没有数字为负数，请尝试制作它，或者将类型从`int`（32 位）更改为`long long`（64 位）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T04:12:42.703

我认为这可能是int溢出问题。为了确保，您可以在内部循环完成后插入一个条件，以查看您的结果是否超出 int 范围。

```
if(result>sizeof(int))
    cout<<"hitting boundaries"; 
```

测试是否超出 int 边界的更好方法是在内循环结束后打印结果并注意结果。

.如果是这样，只需使用更大的数据类型。

# unit-testing - 在本地 IIS 上托管时，WCF Web 服务客户端单元测试在 Visual Studio 2012 中失败

> ID：11998918
> 
> 赞同：1
> 
> 时间：2012-08-17T02:06:02.940
> 
> 标签：unit-testing, wcf-client, visual-studio-2012

因此，我尝试使用测试驱动方法在 Visual Studio 2012 中开始编写 Windows 8 Modern Style 应用程序。我基本上将我的 Win8 WinRT 视为在 IIS 上托管大量 WCF Web 服务的客户端。所以就目前而言，我所有的单元测试都是 WCF Web 服务调用。

如果 WCF Web 服务托管在另一台机器上的 IIS 中，则所有单元测试都会通过。但是，如果我在本地 IIS 上托管同一组 Web 服务，它们都会失败。我已经检查了清单并确保检查了以下项目：

[x] 企业认证

[x] 互联网（客户端

[x] 互联网（客户端和服务器）

[x] 专用网络（客户端和服务器）

顺便提一句：

*   我在 MSTest 中编写了这些测试，因为它具有对 async 和 await 的本机支持，这对于测试异步 Web 服务调用是必需的。
*   我继续着手开发一个简单的 Windows 8 Modern Style 应用程序，并在应用程序中调用 Web 服务（托管在本地 IIS 中），但没有出现错误。

所以我很不解。它与 Visual Studio 2012 测试引擎有关吗？我可以做些什么来解决这个问题。我真的很想继续以测试驱动风格开发应用程序，但我找不到另一种方法来测试我的异步单元测试。

有什么建议吗？

# database - GAE 是否针对数据库密集型应用程序进行了优化？

> ID：11998919
> 
> 赞同：-1
> 
> 时间：2012-08-17T02:06:10.610
> 
> 标签：database, google-app-engine, optimization, nosql

我正在编写一个用途非常有限的 Web 应用程序，它存储大约 10-20k 用户提交的文章（通常为 500-700 字）。在任何时候，任何用户都应该能够对标签和关键字执行搜索，编辑任何文章的任何部分（元数据、文本或标签），或者下载整个数据库的最新副本. （只要每小时更新一次，它就可以来自缓存。）活动往往会在一天内发生一些不可预测的峰值（其中许多用户同时下载整个数据库，需要 100% 的可用性和快速下载）和间歇性的几周活动。这种使用模式是一成不变的。

GAE 是这个应用程序的明智选择吗？它的低成本（希望是免费的）、规模弹性和对大部分堆栈的专业管理对我很有吸引力。我喜欢将应用引擎作为主机替代品的想法。但是，我担心各种数据存储使用方式的过度限制和配额，以及数据存储的分布式架构强加于强一致性和最终一致性之间的权衡。

有没有办法让这个应用程序适应 GAE？我应该使用 ndb API 而不是普通的数据存储 API 吗？还是要求数据如此密集，以至于 GAE 比 Webfaction 之类的主机更昂贵？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:35:27.207

我不认为您的应用程序特别“数据库繁重”。500-700 字只是几 KB 的数据。

我认为 GAE 非常适合。

您可以将每篇文章存储为实体上的文本属性，并在列表属性中使用标签。要搜索文本，您可以使用搜索服务[https://developers.google.com/appengine/docs/python/search/](https://developers.google.com/appengine/docs/python/search/) （目前有配额限制）。

不是 100% 确定下载所有数据，但我认为您可以将所有数据存储在 blobstore 中（可能是 pdf？），然后允许用户下载该 blob。

我会选择 NDB 而不是常规数据存储，主要用于内置异步功能和缓存。

关于保持低于配额，这取决于有多少人访问该网站以及他们下载/上传了多少数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T11:51:55.913

只要您不需要对文章进行全文搜索（目前仍被标记为实验性并且[限制为每天约 1000 次查询](https://developers.google.com/appengine/docs/python/search/overview#Quotas)），您的使用场景听起来就很适合 App Engine。

> 存储大约 10-20k 用户提交的文章（通常 500-700 字）

App Engine 中的最大实体大小为[1 MB](https://developers.google.com/appengine/docs/java/datastore/overview#Quotas_and_Limits)，因此只要文章的总大小低于此大小，应该没有问题。此外，读取数据的成本与实体的大小无关，而是与正在读取的实体数量有关。

> 在任何时候，任何用户都应该能够对标签和关键字进行搜索。

同样，只要对标签和关键字的搜索不是全文搜索，App Engine 的[数据存储区查询](https://developers.google.com/appengine/docs/python/datastore/queries)就可以有效地处理这类搜索。如果要同时搜索标签和关键字，则需要为这两个字段构建[复合索引](https://developers.google.com/appengine/articles/indexselection#Advanced_Search)。这可能会[增加您的写入成本](https://developers.google.com/appengine/docs/billing#Billable_Resource_Unit_Costs)。

> 下载最新的整个数据库的副本。

您可以使用[cron/scheduled 任务](https://developers.google.com/appengine/docs/python/config/cron)来安排每小时转储到 blobstore。如果您的转储需要超过 60 秒才能完成，则 cron 可能会针对后端实例。请记住，每次转储时，您都需要读取数据库中的所有实体，这意味着每小时有 10-20k 次读取操作。您可以向您的实体添加一个时间戳字段，并让您的转储 servlet 查询比上次转储更新的任何内容，而不是保存读取操作。

> 活动往往会在一天内发生一些不可预测的高峰（其中许多用户同时下载整个数据库，需要 100% 的可用性和快速下载）和间歇性的低活动数周。

这就是 GAE 的亮点，在这种情况下，您可以使用 GAE 非常有效地使用实例。

# recursion - twitter bootstrap less 中的 .offsetX (0) 是什么意思？

> ID：11998921
> 
> 赞同：2
> 
> 时间：2012-08-17T02:06:15.527
> 
> 标签：recursion, twitter-bootstrap, less

我查看了生成网格的 twitter bootstrap mixin.less。有这行代码：

```
.offsetX (@index) when (@index > 0) {
  (~".offset@{index}") { .offset(@index); }
  .offsetX(@index - 1);
}
.offsetX (0) {} 
```

有谁知道那有什么`.offsetX (0)`用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T03:05:30.530

由于`.offsetX (@index)`在索引大于0时是递归的，并且通过减法迭代，所以这种情况代表了递归函数的终点。

如果将 @index 设置为 12，它将`.offset12, .offset11,..., .offset1`为`.offset0`.

## 编辑

当预处理器尝试解析 mixin 调用时`.offsetX (0)`，**when**关键字将防止使用递归 mixin。如果没有找到另一个 mixin，则会导致错误，有点像调用未定义的函数。

因此，终止的情况`.offset (0) {}`是干净地退出递归。

如果你想玩它，这里有一个基本的演示，你可以尝试用终端案例注释掉这一行，然后在重新运行时观察异常。

### [JSFiddle](http://jsfiddle.net/mmfansler/HEseF/)

# javascript - 添加对 google diff match 补丁的异步调用，这是一个同步构建的库

> ID：11998922
> 
> 赞同：1
> 
> 时间：2012-08-17T02:06:30.617
> 
> 标签：javascript, asynchronous, diff, patch

我正在尝试调整[差异匹配补丁 google javascript 库](http://code.google.com/p/google-diff-match-patch/)以使其调用之一异步。问题是整个库是同步构建的，因此闭包返回对象而不是通过执行的回调函数发送它们。我想让其中一个函数异步，而不必重写整个库，这将是一项艰巨的任务，因为它需要重写堆栈中的每个方法（因为库是非常模块化的）。相反，我想使用 setTimeout 进行一个异步调用，它将我想要返回的数据设置为适当范围的变量。然后等待该数据的函数将循环直到它收到它。这是一种可靠的方法来处理这个问题，它会起作用吗？这有什么好的做法？

# javascript - Javascript交换图像

> ID：11998925
> 
> 赞同：0
> 
> 时间：2012-08-17T02:07:12.447
> 
> 标签：javascript

我有一个完整的图像和一堆缩略图。我想用单击的任何缩略图的图像链接替换完整图像。这是代码：谢谢

```
function swapImage() {
    var fullCoverImage = document.getElementById("full_cover");

    var linkedImage = this.childNodes[0];
    var thumbSource = linkedImage.getAttribute("src");

    var coverSource = fullCoverImage.getAttribute("src");

    var newSource = thumbSource.replace("_thumb","");
    fullCoverImage.setAttribute("src", newSource);  
}

<a id="slide_thumb" onClick="swapImage();" href="Javascript:void(0);"><img src="images/portfolio/fiction_001_thumb.png" /></a>
<a id="slide_thumb" onClick="swapImage();" href="Javascript:void(0);"><img src="images/portfolio/fiction_002_thumb.png" /></a>

<img id="full_cover" src="images/portfolio/fiction_001.png" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T02:11:25.170

这应该工作

```
function swapImage(aTag) {
    var fullCoverImage = document.getElementById("full_cover");

    var linkedImage = aTag.childNodes[0];
    var thumbSource = linkedImage.getAttribute("src");

    var coverSource = fullCoverImage.getAttribute("src");

    var newSource = thumbSource.replace("_thumb","");
    fullCoverImage.setAttribute("src", newSource);  
}

<a id="slide_thumb" onClick="swapImage(this);" href="Javascript:void(0);"><img src="images/portfolio/fiction_001_thumb.png" /></a>
<a id="slide_thumb" onClick="swapImage(this);" href="Javascript:void(0);"><img src="images/portfolio/fiction_002_thumb.png" /></a>

<img id="full_cover" src="images/portfolio/fiction_001.png" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T02:12:30.323

改用`onClick="swapImage();"`和`onClick="swapImage(this);"` 使用

> ```
> function swapImage(ele) {
>     var fullCoverImage = document.getElementById("full_cover");
> 
>     var linkedImage = ele.childNodes[0];
>     var thumbSource = linkedImage.getAttribute("src");
> 
>     var coverSource = fullCoverImage.getAttribute("src");
> 
>     var newSource = thumbSource.replace("_thumb","");
>     fullCoverImage.setAttribute("src", newSource);  
> } 
> ```

编辑：被打败了。

# java - 如何在 Java 中更改列表中项目的顺序并确保线程安全？

> ID：11998932
> 
> 赞同：1
> 
> 时间：2012-08-17T02:07:59.220
> 
> 标签：java, list, thread-safety

我有一个项目列表，当我检查一个项目时，它位于列表的末尾。我希望应用程序是线程安全的。

关于列表“项目”，“checkItem”线程的代码是否安全？

```
 public class ItemListImpl implements ItemList {

        List<Item> items = Collections.synchronizedList(new ArrayList<Item>());

        /**
         * Checks an item and brings it at the end of the list
         */
        public void checkItem(int index) {
            Item item = items.get(index);
            item.check();

            synchronized (items) {
                items.remove(item);
                items.add(items.size(), item);
            }

        }
    } 
```

（忘记我使用项目索引的事实。我将使用对象或 id）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T02:34:43.213

我们需要意识到这`items`是一个同步列表，并且一个同步列表使用它自己作为它的原始互斥体。这意味着所有单独的列表操作以及`synchronized`块正在同步`items`。

因此，事情可能以非同步方式发生的唯一点是`get`调用完成和`synchronized`块开始之间的间隙。那么这是一个问题吗？

那么让我们考虑一下可能发生的事情：

*   如果其他线程移动了 的位置`Item`，那没关系。无论如何，我们会发现只是将它移到最后。

*   如果其他线程删除了`Item`，那没关系。我们的调用`remove`将 return `false`，但我们仍将添加 Item 回来。

仅当给定可能`Item`出现在列表中的多个位置时才会出现问题`items`。如果发生这种情况，那么代码可能会将位于错误位置的 items 元素移动到列表的末尾；例如

1.  线程 A 调用 get(42) 来获取项目 I。
2.  线程 B 在位置 1 插入项目 I。
3.  线程 A 完成了检查，并删除并重新添加了第 I 项……但由于我现在也出现在位置 1，它实际上删除并添加了该副本，而不是位置 42 的副本。

简而言之，如果我们可以假设给定的 Item 对象在列表中最多出现一次，那么代码就是线程安全的。如果我们不能假设，那么就有可能将对象移动到错误的位置。

还应该注意的是，在给定的 Item 可以出现多次的情况下，代码将无法正常工作。问题是`remove(item)`删除了`item`对它找到的实例的第一个引用，不一定是在 position 的那个`index`。有两种方法来看待这个问题。如果此行为是无意的，则它是一个错误。如果它是有意的，那么线程安全问题可能不是问题。

* * *

无论哪种方式，代码对于内存模型都是安全的，假设该`check`方法是线程安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T02:19:01.827

进行以下更改以使其成为线程安全的。

```
 public void checkItem(int index) {
            synchronized (items){    
                Item item = items.get(index);
                item.check();          
                items.remove(item);
                items.add(items.size(), item);
            }

    } 
```

# php - 如何使用 php icu 扩展检测字符集编码？

> ID：11998934
> 
> 赞同：0
> 
> 时间：2012-08-17T02:08:12.060
> 
> 标签：php, character-encoding, detection, icu

ICU有检测字符集编码的功能，[这里](http://userguide.icu-project.org/conversion/detection/)和PHP也有ICU扩展，[这里](http://www.php.net/manual/en/book.intl.php) 但是如何使用php icu扩展来做字符集检测呢？我在 php 的文档中找不到与这部分相关的任何内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:18:57.743

它可能是对 PHP 扩展的[新功能请求，或者是](https://bugs.php.net/report.php?package=intl)[自己贡献它](https://github.com/cataphract/PECL-intl)的机会。

# macos - 对发送到 CUPS 打印队列的文件运行脚本？

> ID：11998935
> 
> 赞同：0
> 
> 时间：2012-08-17T02:08:31.147
> 
> 标签：macos, cups

我正在尝试配置 Mac OS X 打印队列，以便脚本可以对打印的每个文件进行一些处理，然后再将其转发到另一台 CUPS 打印机（在同一主机上）。

我一直在阅读 CUPS 并找到了一篇文章，描述了如何使用 lpadmin 配置具有“System V 样式接口脚本”的队列，但需要注意的是，这样的队列被视为“通用打印机”。我认为这意味着用户在从“打印”对话框提交作业时失去了选择纸盘等的所有能力。那是对的吗？

[这使得这种方法不适合我的目的，因为最终目的地是具有非标准纸张尺寸的 POS 收据打印机和用于切割纸卷、打开现金抽屉等的打印作业选项。]

有没有更好的方法来实现我的目标，即简单地在通过特定 CUPS 打印队列打印的每张收据上运行脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:24:22.120

我相信您需要配置一个杯子过滤器，我相信它几乎可以为任何打印机创建。它基本上用作输入/输出过滤器 - 您可以在其中修改飞行中的作业。

无论如何，这是我发现的一个链接，它解释了这样做的方法（尽管它用于稍微不同的用例）。希望能帮助到你。

[使用 CUPS 从任何 Mac OS X 应用程序对过滤器/后端进行编程以“打印到 PDF”](https://stackoverflow.com/questions/11192396/programming-a-filter-backend-to-print-to-pdf-with-cups-from-any-mac-os-x-appli)

好起来。

# ruby-on-rails - Heroku、Postgresql 和 Rails - 连接过多错误

> ID：11998942
> 
> 赞同：6
> 
> 时间：2012-08-17T02:10:07.900
> 
> 标签：ruby-on-rails, postgresql, heroku

我在使用 Ruby on Rails、Heroku 和 Postgresql 时遇到以下错误：

```
PG::Error（致命：角色“********”的连接太多

```

我已经重新启动了几次服务器，但无济于事。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-29T16:27:25.643

向 Heroku 支付更多的钱并不总是答案。

当我遇到开发级数据库的[行限制](https://devcenter.heroku.com/articles/heroku-postgres-plans#starter-tier)时，我暂时遇到了这个问题。使用控制台删除行直到我低于限制解决了这个问题。

如果您使用的是独角兽，您可能会遇到这种情况的另一种潜在方式。使用的连接数是 dyno 的数量乘以每个 dyno 的独角兽工人的数量。[Heroku在这里](https://devcenter.heroku.com/articles/concurrency-and-database-connections)解释了这一切，以及配置它的方法`config/unicorn.rb`。

此外，查看正在使用的连接数可能很有用。跑吧`heroku pg:info`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T19:38:20.893

显然我在开发级数据库上。我升级到起重机级生产数据库，一切都应该没问题。

# c# - .Net Socket Service :: 通过事件传递套接字请求对于大规模服务来说是一个愚蠢的想法吗？

> ID：11998950
> 
> 赞同：1
> 
> 时间：2012-08-17T02:11:19.130
> 
> 标签：c#, sockets

大多数人似乎构建了一个侦听器套接字，并将包含要调用以进行处理的“事件”。EG：SocketConnected，DataReceived。程序员初始化一个侦听器并绑定到“事件”方法以接收套接字事件以构建服务。

我觉得在大规模实现中，避免在侦听器中使用委托会更有效。并在回调方法中完成所有处理。可能基于知道接下来会出现什么命令的知识，使用不同的回调来接收数据。（这是我的消息框架结构的一部分）

我四处寻找高度可扩展的示例，但我只找到了用于异步套接字的标准 MSDN 实现或来自其他复制 MSDN 示例的程序员的变体。

有没有人有任何好的经验可以为我指明正确的方向？

* * *

注意> 该服务将拥有数千个客户端，并且在大多数情况下，客户端保持连接并且服务接收到的更新将发送给所有其他连接的客户端。它是面向对象数据库的同步 P2P 类型系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T02:18:43.413

我给你的唯一建议是：选择最清晰的风格。

由于无法测量的速度差异而消除整个语言功能还为时过早。方法调用/委托调用的成本极不可能成为代码中的瓶颈。当然，您可以对一个与另一个的相对成本进行基准测试，但如果您的程序仅花费 1% 的设置方法调用，那么即使是巨大的差异也不会真正影响您的程序。

如果你真的想给你的服务器加汁，我给你的最好建议是确保你*所有*的 IO 都是异步发生的，并且永远不要在线程池中运行长时间运行的任务。.net4.5 async/await 确实简化了所有这些...考虑将其用于更易于维护的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T03:13:23.980

事件调用和回调之间的区别可以忽略不计。回调只是委托（或函数指针）的调用。你不能在没有某种回调的情况下进行异步操作，并期望得到任何类型的结果。

对于事件，它们可以被多播。这意味着多次回调调用——所以这会更昂贵，因为你调用了多个方法。但是，如果您正在这样做，您可能需要这样做——另一种方法是拥有多个代表并手动调用它们。所以，不会有真正的好处。事件通常可以包括 sender/eventargs；所以，你得到了那个额外的对象和 eventargs 实例的创建；但我从未见过影响性能的情况。

就个人而言，我不使用基于事件的异步模式——我发现（在 .NET 4.5 之前）异步编程模型更加普遍。在 .NET 4.5 中，我更喜欢任务异步模式（以 Async 结尾的单个方法，而不是两种方法，一种以 Begin 开头，一种以 End 开头），因为它们可以与 async/await 一起使用，而且不那么冗长。

现在，如果问题是例如之间的区别`new AsyncCallback(Async_Send_Receive.Read_Callback)`：

```
s.BeginReceive(so.buffer, 0, StateObject.BUFFER_SIZE, 0, 
                                     new AsyncCallback(Async_Send_Receive.Read_Callback), so); 
```

只是`Async_Send_Receive.Read_Callback`例如：

```
s.BeginReceive(so.buffer, 0, StateObject.BUFFER_SIZE, 0, 
                                     Async_Send_Receive.Read_Callback, so); 
```

第二个只是第一个的简写；`AsyncCallback`委托仍然是在幕后创建的。

但是，与大多数事情一样；即使普遍认为在性能、测试和测量方面没有明显差异。如果一种方式比另一种方式有更多好处（包括性能），请使用该方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T02:38:04.963

我使用过使用套接字和两种方式的主动消息传递的实时投注系统。使用框架来处理像 WCF P2P 这样的套接字层确实更容易。它为您处理所有连接问题，您可以专注于您的业务逻辑。

# javascript - 转到其他 URL 后，如何保持已排序的 Backbone.js 集合？

> ID：11998957
> 
> 赞同：1
> 
> 时间：2012-08-17T02:12:41.123
> 
> 标签：javascript, backbone.js

我正在创建一个应用程序，其中 Backbone 处理表和数据。

该应用程序具有排序和分页视图。

现在的问题是，当我对集合进行排序时，然后转到其他页面。排序后的集合被重置为未排序的顺序。我怀疑这是因为分页链接从 #somepage/ 带到其他 URL #somepage/1 并且主干将重新获取集合。

转到其他 URL 后，主干中是否有任何功能可以保留集合？在不更改 URL 的情况下转到其他页面是一种好习惯吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T03:24:22.430

关于可能发生的事情有一点模棱两可。你的意思是你要使用路由器去另一个页面吗？

如果页面正在刷新，那么您可能会丢失集合中的所有信息，因为所有内容都被清除并完全重新初始化。如果是这种情况，那么您可能希望使用主干[“路由器”](http://backbonejs.org/#Router)。

如果您`Backbone.Router.navigate()`要转到另一个“页面”（但实际上是更改浏览器中的 URL 并修改其历史记录），那么默认情况下，除非您的代码设置为在此之后以某种方式对其进行修改，否则不应触及该集合路由器动作。

# php - 为什么没有独立的 PHP 应用程序？

> ID：11998959
> 
> 赞同：0
> 
> 时间：2012-08-17T02:12:52.073
> 
> 标签：php, server-side

为什么很多流行的服务器端语言（Java、Python、Perl 等）在创建独立程序时也很流行，但 PHP 却不是这样？甚至可以编写一个独立的 PHP 应用程序吗？如果是这样，它可以有图形用户界面吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T02:19:11.427

PHP 是专门为网页设计的，与 Java 和 Python 不同的是，Java 和 Python 是为一般应用程序设计的（PHP 最初是指个人主页），这就是为什么它在 Web 之外没有那么多使用的原因。但是，您可以在命令行中使用 PHP，从而制作可执行脚本，但我目前只知道一种 GUI 绑定：[PHP-GTK](http://gtk.php.net/)。PHP-GTK 的开发似乎在两年前就停止了，但它应该是最可靠的。此外，似乎有一个项目[将 PHP 脚本编译为可执行文件](http://www.roadsend.com/home/index.php)，尽管该项目也不再被开发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T02:28:36.277

您必须了解每种语言的创建原因。PHP 是[专门为 Web 开发](http://php.net/manual/en/history.php.php)而创建的。至于其他语言，它们都可以进行 Web 开发，但 Perl 是专门为[文本提取](http://www.eecis.udel.edu/~zurawski/perl/2.html)而创建的，Java 是为[移动设备](http://java.about.com/od/gettingstarted/a/whatisjava.htm)而创建的，而 Python 是为[脚本编写](http://docs.python.org/faq/general.html#why-was-python-created-in-the-first-place)的。

PHP 可以在 Web 开发之外使用。最著名的实现是[PHP-GTK](http://gtk.php.net/)。它不像您已经看到的那样常见。

# sql - 使用 SSIS 的字段大小

> ID：11998960
> 
> 赞同：0
> 
> 时间：2012-08-17T02:12:52.267
> 
> 标签：sql, ssis

我正在导入一个带有列标题的 csv 文件：

```
 ID     ProductNumber     ProductName
 1234    A298384          Whatchamacallit
 3949    A293939          Whatchamacallit_Extra 
```

我只需要 ID 和 ProductNumber，当我映射文件时，我将 ProductName 设置为“忽略”

当包运行时，它会出现 ProductName 将被截断的消息。如果我将映射设置为“忽略”，我不明白为什么会出错

我也尝试过导入并包含 ProductName，将字段设置为 Nvarchar (4000)，它仍然出错。我检查了文件，没有超过 54 个字符的产品名称。

我正在使用 SQL 2005。

任何见解都会有所帮助

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T05:23:31.307

我假设您有某种“平面文件源”作为数据流的源连接。如果是这样，当您单击它并查看列时；产品名称是否未选中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:22:31.643

`advanced tab`如果您不想导入第三列，请转到`connection manager`并删除最后一行。

另一种方法是忽略`error output tab`您的平面文件任务中发生的错误（ingore 截断和失败），但我建议您使用我上面写的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T13:33:38.727

解决此问题的另一种方法是进入平面文件连接管理器的“高级”部分，并将最后一个字段的字段长度设置为高于为字符串值设置的默认值 50（如果您不覆盖）。既然您说 54 是最后一列的最长数据宽度，请至少使用该值。

要查找更改此内容的位置，请通过双击平面文件连接打开连接管理器编辑器。在左侧的框中有四个选项“常规”、“列”、“高级”和“预览”。您需要单击“高级”，然后突出显示“ProductName”列，然后在右侧的框中找到“OutputColumnWidth”并将其设置为至少 54。

# javascript - 在javascript中动态创建带有字符串索引的二维表

> ID：11998965
> 
> 赞同：0
> 
> 时间：2012-08-17T02:13:22.160
> 
> 标签：javascript, arrays, json, multidimensional-array

我需要将一个表解析为 JSON，我找到了这个解决方案并且它有效：

```
 var tab=[{"value":"1.0","label":"Alabama"},{"value":"2.0","label":"Alaska"},        {"value":"3.0","label":"American Samoa"}];
    var myJsonString = JSON.stringify(tab);  
    var jsonData = $.parseJSON(myJsonString); 
```

问题是当我动态声明二维表“选项卡”时它不起作用：

```
 var tab_desc1= new Array(3);
    tab_desc1[0]=new Array(2);
    tab_desc1[0]["value"]="1.0";
    tab_desc1[0]["label"]="Alabama";
    tab_desc1[1]=new Array(2);
    tab_desc1[1]["value"]="2.0";
    tab_desc1[1]["label"]="Alaska";
    tab_desc1[2]=new Array(2);
    tab_desc1[2]["value"]="3.0";
    tab_desc1[2]["label"]="American Samoa";
    var myJsonString = JSON.stringify(tab_desc1);    
    var jsonData = $.parseJSON(myJsonString); 
```

从逻辑上讲，我的声明包含错误，但我看不到它。任何帮助！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T02:20:49.220

```
tab_desc1[0] = new Array(2); 
```

应该

```
tab_desc1[0] = {}; 
```

和其他人一样。

但我不知道将变量字符串化为字符串然后将其解析回来的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T02:23:14.407

问题是数组和对象不是一回事。

*您的第一个代码创建了一个对象*数组。

您的第二个代码创建一个数组*数组*，然后在这些数组上设置非数字属性。JS 数组是一种对象，因此设置非数字属性不会出错，但`stringify()`只会包含数字属性。你需要这样做：

```
var tab_desc1 = []; // Note that [] is "nicer" than new Array(3)
tab_desc1[0] = {};  // NOTE the curly brackets to create an object not an array
tab_desc1[0]["value"] = "1.0";
tab_desc1[0]["label"] = "Alabama";
tab_desc1[1] = {};  // curly brackets
tab_desc1[1]["value"] = "2.0";
tab_desc1[1]["label"] = "Alaska";
tab_desc1[2] = {};  // curly brackets
tab_desc1[2]["value"] = "3.0";
tab_desc1[2]["label"] = "American Samoa";

var myJsonString = JSON.stringify(tab_desc1);    
var jsonData = $.parseJSON(myJsonString); 
```

你也可以这样做：

```
var tab_desc1 = [];
tab_desc1[0] = {"value":"1.0","label":"Alabama"};
tab_desc1[1] = {"value":"2.0","label":"Alaska"};
tab_desc1[2] = {"value":"3.0","label":"American Samoa"}; 
```

（另外，为什么要字符串化然后立即解析以取回相同的对象？）

# c# - 对为什么对虚拟对象进行单元测试有用感到困惑

> ID：11998967
> 
> 赞同：7
> 
> 时间：2012-08-17T02:13:41.783
> 
> 标签：c#, unit-testing, testing, tdd

我正在阅读`Clean Code: A Handbook of Agile Software Craftsmanship`，其中一个示例涉及一个`Portfolio`类和一个`TokyoStockExchange`类。但是，`Portfolio`它的可测试性不是很好，因为它依赖于`TokyoStockExchange`作为外部 API 来确定投资组合的价值，这是一个非常不稳定的查找，不利于测试。

因此，他们通过创建一个通用`StockExchange`接口来解决这个问题，`TokyoStockExchange`并且`DummyStockExchange`都实现了基类。因此，获得了依赖倒置原则，并且在`PortfolioTest`类中可以实例化 a `DummyStockExchange`，将股票价格固定给公司，将`DummyStockExchange`实例分配给投资组合，并将该公司的一些股票添加到投资组合中，然后断言期望值是否为确实是正确的值。这是代码：

```
public class PortfolioTest
{
    private DummyStockExchange exchange;
    private Portfolio portfolio;

    protected void setUp()
    {
        exchange = new DummyStockExchange();
        exchange.fix("MSFT", 100);
        portfolio = new Portfolio(exchange);
    }

    public void GivenFiveMSFTTotalShouldBe500()
    {
        portfolio.add(5, "MSFT");
        Assert.assertEquals(500, portfolio.value());
    }
} 
```

我的问题很简单，*为什么*？

我们正在尝试测试该课程是否`TokyoStockExchange`与该课程协同工作`Portfolio`。显然，如果我们用一个新方法创建另一个类来设置股票价格，然后给投资组合中的五只股票，那么一切都会奏效。似乎.. 测试没用。我知道由于股票价格的变化，`TokyoStockExchange`基本上不可能进行测试，`Portfolio`但我不明白在一个相当无用的测试中进行替换如何帮助这种情况。

这一切似乎都类似于不知道我们的加法器程序是否有效，但唯一可用的数字是随机生成的，因此我们创建了一个虚拟类，它给我们一个 2 并测试 if `2 + 2 = 4`。嗯，是的，显然这是真的。我们仍然可以中断`TokyoStockExchange`并且测试仍然会成功，因为它正在测试另一个类。如果这一切看起来都是骗人的，那么它也导致不得不编写额外的代码来测试我们知道会起作用的东西。

我认为这是我目前理解单元测试时遇到的最大问题。我知道我错了，我只是没能看到我猜想的光明。希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T02:18:22.490

这个想法是您希望`Portfolio`在与`TokyoStockExchange`. 如果您使用像 Moq 或 Rhino Mocks 这样的模拟框架，那么您可以轻松地模拟不同的输出和行为`TokyoStockExchange`并编写单元测试以确保`Portfolio`正确响应。您将为`TokyoStockExchange`该类编写单独的单元测试。

这并不是说您不需要两个类之间的*集成测试。*如果不使用模拟对象，很难正确验证所有场景。

以这样一个简单的类为例，很难理解其价值，但是对于一个更复杂的类，您需要在“实时”类中很难或不可能安排的情况下验证测试用例，单元测试变得更加重要重要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T02:49:44.247

您应该进行两种测试，单元测试和集成测试。

单元测试应该是一个白盒测试，您可以在其中单独测试每个代码单元。通常这是指每个类中的公共接口。您模拟它们的依赖关系，以便确保给定一组已知数据，您的单元将返回可预测的结果。

您在单元测试中说“显然一切都会起作用”。这假设您的代码中没有任何错误。如果你能做出这样的假设，那么你一开始就不需要测试任何东西！而且您实际上并不需要对所有内容进行单元测试——如果您只是在您之上调用 API 方法并传递结果`Portfolio`的薄层，那么您不应该费心对它进行单元测试。`StockExchange`

另一方面，如果你`Portfolio`有真正的逻辑，你会想要对它进行单元测试。假设`Portfolio`有一种方法可以从 中提取数据`Stock Exchange`，分析数据，并在股票价格出现异常时（例如价格开始快速下跌）向用户发送警报消息。您希望确保警报实际上会在预期条件下触发发送，但您不想坐等下一次股市崩盘。因此，在您的单元测试中，您将制作一个模拟`Stock Exchange`来生成您想要触发警报的各种值，然后检查它是否真的发生了。如果是这样，很好，如果不是，你只是发现了一个错误。

集成测试将同时测试这两个单元，这也很重要。但是在集成测试中模拟某些类型的场景更加困难，而且对于找出错误实际隐藏的位置也没有多大帮助。如果您对应用程序进行了集成测试，发现它没有在应该发送警报的时候发送警报，那么问题出在哪里？第三方API有bug吗？证券交易所是否向您发送了错误的价值？您的警报系统是否将消息发送到错误的地址？您可能需要一段时间才能发现您的分析方法存在问题。

# iphone - 通过不同控制器中的开关打开/关闭本地通知

> ID：11998970
> 
> 赞同：0
> 
> 时间：2012-08-17T02:14:17.930
> 
> 标签：iphone, ios, xcode

对于 ViewController1 中的简单闹钟应用程序，我有一个 ON 按钮、OFF 按钮和 SET 按钮。

当我单击 SET 按钮时，它会将您带到带有日期选择器的弹出窗口（ViewController 2），您可以在其中选择日期并设置警报（本地通知）。当我这样做时，警报会按预期响起。

我想做的是设置闹钟，当我按下OFF按钮时，闹钟不会响。但是，当我按下 ON 按钮时，闹钟将与上次一样响起。

有人可以为我指出这个问题的正确方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T03:25:51.127

您必须为通知编写自己的管理。这个管理部分必须知道哪个通知是活动的（并且被注册为真正的本地通知）以及将来应该是哪个通知。
如果你这样做了，你可以做任何你想做的事。

# java - 取消部署应用程序时如何清除 Tomcat 日志

> ID：11998971
> 
> 赞同：0
> 
> 时间：2012-08-17T02:14:29.003
> 
> 标签：java, tomcat

当我在 Tomcat 中取消部署应用程序时，我需要清除所有日志。我不想每次都手动清除日志。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T04:03:39.907

我认为您不会在 Tomcat 中找到任何解决方案。

您可以：

*   实现一个关闭钩子（参见[这篇文章](https://stackoverflow.com/questions/1549924/shutdown-hook-for-java-web-application)）以在上下文被破坏时删除日志文件
*   编写一个 shell 脚本来删除 war 文件/文件夹（以便取消部署）和应用程序日志。

我的首选是 shell 脚本，因为它真的很容易编写、调用，而且，如果你需要它，你可以在不清除日志的情况下取消部署......

# java - 带有 JSP 的 JDBC 无法插入

> ID：11998972
> 
> 赞同：1
> 
> 时间：2012-08-17T02:14:41.793
> 
> 标签：java, database, jsp, jdbc

我现在在 JSP 中使用 JDBC 时遇到一些问题。我正在尝试将用户名/传递 ext 插入我的 MySQL 数据库。我没有收到任何错误或异常，但是也没有将任何内容插入到我的数据库中。以下是我的代码，任何帮助将不胜感激。

```
<%
String uname=request.getParameter("userName");
String pword=request.getParameter("passWord");
String fname=request.getParameter("firstName");
String lname=request.getParameter("lastName");
String email=request.getParameter("emailAddress");
%>

<%
try{
    String dbURL = "jdbc:mysql:localhost:3306/assi1";
    String user = "root";
    String pwd = "password";
    String driver = "com.mysql.jdbc.Driver";

    String query = "USE Users"+"INSERT INTO User (UserName, UserPass, FirstName, LastName, EmailAddress) " +
                   "VALUES ('"+uname+"','"+pword+"','"+fname+"','"+lname+"','"+email+"')";
    Class.forName(driver);
    Connection conn = DriverManager.getConnection(dbURL, user, pwd);
    Statement statement = conn.createStatement();
    statement.executeUpdate(query);

    out.println("Data is successfully inserted!");
    }
    catch(SQLException e){
    for (Throwable t : e)
        t.printStackTrace();
    }
       %> 
```

数据库脚本在这里：

```
CREATE DATABASE Users;

use Users;

CREATE TABLE User (
UserID INT NOT NULL AUTO_INCREMENT,
UserName VARCHAR(20),
UserPass VARCHAR(20),
FirstName VARCHAR(30),
LastName VARCHAR(35),
EmailAddress VARCHAR(50),
PRIMARY KEY (UserID)
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T02:22:04.303

首先，您不需要`USE`在 SQL 中使用该语句，因为已经在连接 URL 中选择了数据库。即使您使用该`USE`语句，也不应将其粘在该`INSERT`语句上。因此，在您的 dbURL 中，您需要设置适当的数据库：

```
String dbURL = "jdbc:mysql://localhost:3306/Users"; 
```

请注意，您的网址也是错误的。在第二个冒号字符之后需要两个斜线。您需要将查询变量更改为：

```
String query = "INSERT INTO User (UserName, UserPass, FirstName, LastName, EmailAddress) " + 
               "VALUES ('"+uname+"','"+pword+"','"+fname+"','"+lname+"','"+email+"')"; 
```

我希望您的代码处于这种状态，因为您开始学习 Java Web 开发（我看到了 homework 标签）。在现实世界中，这不是开发 Java Web 应用程序的方式，因为不再使用 scriptlet（`<%`and`%>`和其他变体之间的代码），并且需要改进许多其他事情，就像您处理 JDBC 的方式一样。

**编辑：**这是您的固定代码：

```
<%
    Connection conn = null;

    try {

        String uname=request.getParameter("userName");
        String pword=request.getParameter("passWord");
        String fname=request.getParameter("firstName");
        String lname=request.getParameter("lastName");
        String email=request.getParameter("emailAddress");

        String dbURL = "jdbc:mysql://localhost:3306/Users";
        String user = "root";
        String pwd = "password";
        String driver = "com.mysql.jdbc.Driver";

        String query = "INSERT INTO User (UserName, UserPass, FirstName, LastName, EmailAddress) " +
                       "VALUES ('"+uname+"','"+pword+"','"+fname+"','"+lname+"','"+email+"')";
        Class.forName(driver);
        conn = DriverManager.getConnection(dbURL, user, pwd);
        Statement statement = conn.createStatement();
        statement.executeUpdate(query);
        statement.close();

        out.println("Data is successfully inserted!");

    } catch( ClassNotFoundException e ){
        System.err.println( "Database Driver class not Found!" );
        e.printStackTrace();
    } catch( SQLException e ){
        e.printStackTrace();
    } finnaly {
        try {
            if ( conn != null ) {
                conn.close();
            }
        } catch ( SQLException e ) {
            System.err.println( "Problems when closing connection" );
            e.printStackTrace();
        }
    }
%> 
```

我认为这会奏效。正如 Lion 所说，考虑在您的数据库代码中使用更好的解决方案。我想你的老师很快就会教这些其他的东西。

# linux - Linux - 线程和进程调度优先级

> ID：11998974
> 
> 赞同：14
> 
> 时间：2012-08-17T02:15:08.887
> 
> 标签：linux, process, pthreads, scheduling

如果我们在 linux 上使用默认调度策略创建 pthreads (pthread_create) 或进程 (fork)，调度程序会在调度它们时以相同的优先级对待进程和线程吗？

假设有一个线程的进程 P1 和有 2 个线程的进程 P2 T1 T2

假设只有一个核心..调度是 P1 T1 P1 T2 P1 T1 P1 T2

或者

P1 T1 T2 P1 T1 T2

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-17T02:36:35.637

Linux 根本不再调度进程。

在内核中，*线程*被调度。进程的概念现在是一种人为的构造，主要由内核之外的事物看到。显然，内核必须知道线程是如何联系在一起的，但*不是*为了调度目的。

基本上，内核维护着一大堆线程，每个线程都有一个线程组负责人，这就是在外部看到的进程。一个线程有一个线程 ID 和一个线程组 ID——这很像 PID 和 PPID（进程 ID 和父进程 ID）之间的关系。

当您创建一个常规*线程时，*内核会为其提供一个全新的线程 ID，但其线程组 ID 设置为与创建它的线程的组 ID 相同。这样，对于外界来说，它就像一个进程中的线程。

当你*fork 时，*内核会给它一个全新的线程 ID，并将其线程组 ID 设置为与其线程 ID 相同的值。这样，它在外界看来就像一个过程。

大多数报告进程的非内核实用程序实际上只是报告线程 ID 与线程组 ID 相同的线程。

其他方法有一些微妙之处，可能太复杂而无法在这里介绍。我上面写的（希望）是一篇很好的中级论文。

现在，对于您的具体问题，这两种情况都不是，因为`P1`只有一个线程（没有`P1T2`）。

对于内核，线程是和`P1T1`，并且假设它们具有相同的调度属性并且行为相同^((a))，这就是它们的调度方式。`P2T1``P2T2`

* * *

也可以看看：

*   [Linux - 线程和进程](https://stackoverflow.com/questions/9305992/linux-threads-and-process/9306150#9306150)；
*   [如果我有一个进程，并且我克隆了它，那么 PID 是否相同？](https://stackoverflow.com/questions/4862012/if-i-have-a-process-and-i-clone-it-is-the-pid-the-same/4862050#4862050); 和
*   [CPU 进程是否至少有一个线程？](https://stackoverflow.com/questions/4894609/will-a-cpu-process-will-compulsory-have-at-least-one-thread/4894625#4894625)

了解更多信息。

* * *

^((a))：显然，如果线程开始阻塞 I/O（内核不会在 I/O 可用之前调度它们）或提前释放它们的时间量（内核可能会提高它们的优先级作为表现出色的奖励）但是他们的行为不一样。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-08-09T20:35:08.893

确实，Linux 内核（从[2.6.23](http://www.ibm.com/developerworks/library/l-completely-fair-scheduler/)及更高版本开始）调度任务，这些任务要么是线程，要么是（单线程）进程。

除了 paxdiablo 的公认答案之外，我添加这个答案是为了添加一个关于不同线程调度方式的更通用的信息视图。

通常，***线程可以是用户空间线程或内核空间线程***。用户空间线程通常由库实现。因此，内核对它们几乎一无所知（内核只知道它们所属的进程）并且它们在用户空间中处理。相反，内核线程是由内核实现的，它们完全由内核处理。您可以从下图中获取通用视图。

[![在此处输入图像描述](../Images/b18283edb0ac630330716db0296954c8.png)](https://i.stack.imgur.com/MbfDi.png)

如您所见，左图显示了一些用户空间线程，其中内核仅拥有有关进程的信息（所谓的[进程控制块 - PCB](https://en.wikipedia.org/wiki/Process_control_block)）。所有关于线程的资源信息都保存在进程内部（在线程表中）并由用户空间中的相应线程库处理。在右图中，您可以看到内核线程，其中进程表和线程表都保存在内核中。

内核线程的一个例子是[LinuxThreads](http://pauillac.inria.fr/~xleroy/linuxthreads/)，它现在已被更现代的[NPTL 库](https://en.wikipedia.org/wiki/Native_POSIX_Thread_Library)所取代。用户空间线程的一个例子是库[GNU Portable Threads](https://en.wikipedia.org/wiki/GNU_Portable_Threads)

现在，就调度而言，正如预期的那样，用户空间线程的调度方式与内核线程不同：

*   当使用用户空间线程时，调度程序正在调度进程。因此，它选择一个特定的进程并分配允许的时间段。然后，进程内部的线程调度器负责选择如何进行线程之间的调度。由于用户空间线程不会因中断而停止，因此所选线程将倾向于消耗整个进程的量子，直到它完成其任务。因此，在这种情况下，假设的调度将类似于：

    **P1(T1), P2(T1), P1(T1), P2(T1 - T1 完成任务并[产生](http://www.javamex.com/tutorials/threads/yield.shtml)), P2(T2 - 剩余时间段, P1(T1), P2(T2), P1(T1 ),** ...

*   当使用内核线程时，内核会调度线程。内核对线程属于哪个进程不感兴趣，但它会为每个线程平均分配一个时间片。因此，在这种情况下，假设的调度将是：

    **P1(T1), P2(T1), P2(T2), P1(T1), P2(T2), P1(T1), ...**

* * *

请注意，还有另一类，**[混合线程](https://en.wikipedia.org/wiki/Thread_(computing)#M:N_.28hybrid_threading.29)**，其中一些用户空间线程被转换为一个内核线程。但是，它更复杂，需要更彻底的分析。

# java - Java Web - Intranet 上的 SSO 和 Internet 上的 FORM 或 BASIC

> ID：11998981
> 
> 赞同：1
> 
> 时间：2012-08-17T02:16:48.153
> 
> 标签：java, jboss, single-sign-on, spnego

我正在寻找用于身份验证的 SSO（单点登录）框架。

我的情况是：

*   JBoss 7 + Debian
*   使用 Windows 2008 活动目录的 SSO
*   在 Intranet 上时的 SSO
*   通过 Internet 或移动设备时的 BASIC 或 FORM 或其他

有人知道这些需求的任何框架吗？

我研究了两周，发现：

*   JBoss Negotiation + SPNEGO (Kerberos)（不支持 NTLM，因此不能通过 Internet 使用）
*   华夫饼：不是 100% Java
*   jCIFS（不支持 NTLMv2）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:44:53.457

如果我必须这样做，我会看看 Picketlink (http://www.jboss.org/picketlink/) 和 AD 联合服务。

Picketlink 是解决身份管理问题的 JBoss 项目，包括支持 AD 通过其联合服务支持的 SAML 协议（WS-trust 也可能是一个选项）。

通过这种方式使用开放标准 SAML，您将拥有一个针对新云环境的解决方案。

有一个文档将这些拖曳元素放入 getter：[https ://community.jboss.org/wiki/HowToConfigurePicketlinkOnJbossWithMicrosoftADFSV2](https://community.jboss.org/wiki/HowToConfigurePicketlinkOnJbossWithMicrosoftADFSV2)

# websocket - 如何使用 AutobahnJs 向指定客户端发送消息？

> ID：11998993
> 
> 赞同：1
> 
> 时间：2012-08-17T02:18:41.843
> 
> 标签：websocket, autobahn

我需要一个推送消息服务器的方案。

现在我选择 AutobahnJs + AutobahnPython 方案。

使用 AutobahnJs Library 的 html5 的 websocket 连接到 AutobahnPython 使用的服务器

现在，clientA，clientB，clientC 连接到服务器。

APPS 想要向 clientA 发送消息。怎么做？

这是我的流程：APPS伪装成clientD连接到服务器。

在 javascript 中，使用订阅频道，每个客户端使用相同的订阅频道。clientD 向频道发布消息（订阅频道也一样），服务器向所有订阅该频道的客户端发送消息。

这是一个问题，我需要APPS（clientD）只向clientA发送消息，而不是每个订阅的客户端。如何做到这一点？

也许我的流程不正确。任何帮助和更多计划？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T11:46:52.857

您可以通过在发布时在合格参数中提供 WAMP 会话 ID 来做到这一点：

[http://autobahn.ws/js/reference#Session_publish](http://autobahn.ws/js/reference#Session_publish)

WAMP 会话 ID 可以通过在会话对象上调用 sessionid() 在 AutobahnJS 中获取。

[http://autobahn.ws/js/reference#Session_sessionid](http://autobahn.ws/js/reference#Session_sessionid)

您的总体方案对于您的用例是正确的：所有客户端都订阅 1 个主题，但随后仅指定一个有资格接收已发布消息的专用接收器。

# c# - 与 e-junkie 兼容的许可解决方案？

> ID：11998995
> 
> 赞同：3
> 
> 时间：2012-08-17T02:18:46.337
> 
> 标签：c#, .net, license-key, serial-number, piracy-prevention

我需要一个许可解决方案。就目前而言，我已经推出了自己的部分密钥验证解决方案，但显然不是密码学专家，也没有预算或团队比我自己负担得起（我现在独自编程），这并不完美。它不会阻止同一网络上的人们使用同一密钥的多个副本（在办公室工作人员之间共享），并且根本不会进行任何在线激活。

我不是在寻找诺克斯堡。我和下一个人一样讨厌许可。我只想让诚实的人保持诚实，并阻止人们在我的软件最常使用的环境（在办公室）中随意共享密钥。

问题不在于找到许可解决方案本身。我有 10 种解决方案可供使用。但是，我决定选择 e-junkie 作为我的分销商，因为我负担不起维护下载服务器的安全性，而且我没有时间处理设置支付网关的问题。我从没想过成为一名独立开发者会这么难。

e-junkie 的问题在于他们只直接支持 Armadillo/SoftwarePassport，而且他们还使用您自己的在线密钥生成器通过 POST 支持。

我还没有找到可以安装在 linux web 服务器上的付费解决方案（例如使用 PHP），根据 POST 数据生成密钥，并将其返回给 e-junkie 以发送给用户。这就是促使我推出自己的解决方案的原因。我已经编写了 C# 和 PHP 接口。

这引出了我的问题。如果我选择使用 e-junkie 作为我的分销商，我可以使用哪些许可解决方案（最好是便宜的）？是否有其他分销商提供 .NET/C# 软件的许可解决方案以及以收益分享为基础的分销（如 Regnow）？我对此很陌生，我会很感激我能得到的任何建议。

# android - Android：无法引用以不同方法定义的内部类中的非最终变量

> ID：11998999
> 
> 赞同：0
> 
> 时间：2012-08-17T02:19:04.073
> 
> 标签：android, android-edittext, android-alertdialog, final

我知道这个问题之前已经被问过好几次了，但是在阅读了很多答案后，我还没有找到适合我的东西。首先，请看下面的代码，它应该在单击图像后打开一个 AlertDialog （这很好用）。AlertDialog 承载一个 EditText 字段 - 这是出现问题的地方：

```
 ImageView scissorsImage = (ImageView) findViewById(R.id.scissorsImage);
    scissorsImage.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) 
        {
            AlertDialog.Builder alert = new AlertDialog.Builder(context);

            alert.setTitle("Apply a Coupon");
            alert.setMessage("Enter the coupon amount (i.e. 25 for $25)");

            // Set an EditText view to get user input 
            final EditText couponAmount = new EditText(context);
            alert.setView(couponAmount);

            couponAmount.setText(couponAmountString);

            alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
                    String couponAmountString = couponAmount.getText().toString();
                    System.out.println(couponAmountString);
                }
            });

            alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
                    // Canceled.
                }
            });

            alert.show();
        }

    }); 
```

现在，这段代码在我的`onCreate`方法内，而变量`couponAmountString`在`onCreate`方法外。所以代码执行得很好，唯一的问题是该行`couponAmount.setText(couponAmountString);`没有按我的意愿工作。

我试图用它做的是，当用户在对话框中输入一个值并通过按 OK 将其关闭时，该值被存储在其中`couponAmountString`- 到目前为止一切都很好。当用户再次触摸图像以重新打开对话框时，我正在*尝试*使用他们输入的最后一个值预先设置 EditText 字段，因此`couponAmount.setText(couponAmountString);`. 但这不起作用，因为我必须将 EditText 字段声明为`final`. 这就是为什么我`Cannot refer to a non-final variable inside an inner class defined in a different method`第二次单击图像时出现错误的原因。

那么有什么方法可以完成我想要的吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T02:38:07.343

傻，傻我。事实证明，如您所见，我在方法内重新初始化了 couponAmountString。我只需要拿出来`String`，它现在正在工作！