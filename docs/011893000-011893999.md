# StackOverflow 问答 11893000-11893999

# sql - 如何进一步指定一个 sqlite 查询

> ID：11893000
> 
> 赞同：1
> 
> 时间：2012-08-09T22:35:53.470
> 
> 标签：sql, sqlite

我是 SQL 新手，想知道是否有办法进一步完善我的查询。例如，我有一个包含学生姓名和成绩的表格，我想找到成绩最高的学生姓名。我来了

```
SELECT name FROM students ORDER BY grade DESC 
```

但这会返回所有名称。我想过使用 LIMIT，但例如，如果 2 个学生的最高分相同，我希望他们都被退回。

有办法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T22:50:37.070

我认为这将适用于 sqlite。

```
select name from students where grade = (select max(grade) from students); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T09:03:10.823

没有提到 name 是否是主键，所以最好像这样使用它（不假设 name 为 PK）：

```
select distinct name from students where grade = (select max(grade) from students); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T08:48:16.223

你也可以这样做:)

```
WITH CTE AS
(
    SELECT
    Name,
    Grade,
    DENSE_RANK() OVER (ORDER BY Grade desc) AS BestGrade
FROM
    students
) SELECT * FROM CTE WHERE BestGrade = 1 
```

# php - 客户端服务器不断通信PHP

> ID：11893001
> 
> 赞同：0
> 
> 时间：2012-08-09T22:35:58.083
> 
> 标签：php, javascript, html, websocket

我想做一个简单的游戏（应用程序），网络浏览器游戏多人游戏，需要与服务器保持持续连接。
现在，我使用 ajax 和普通的 php wamp 服务器，但我认为这是错误的方式，因为我需要每秒从每个用户向服务器发送请求（更新）......这似乎是错误的......
我知道一些猿项目，但我需要一些Windows（现在）
我还有什么其他选择？web-socket 有点棘手，很多旧浏览器都不支持，所以它不好......请帮助，并在此感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T07:33:11.350

在当今世界，有大量的选项可供您使用。您正在寻找的是 PUSH 语义而不是 PULL 即您不想从客户端（定期）轮询服务器以获取新更新，但您希望服务器在数据可用时将数据推送到客户端。

您应该查看[发布者-订阅者](http://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern)工作流程，您可以在其中每个用户拥有一个频道，其他用户可以在那里发布更新。然后每个用户将订阅其频道以实时检索任何更新

市场上有很多现成的 pubsub 解决方案。我想到的几个是：

1.  [Redis 发布订阅](http://redis.io/topics/pubsub/)
2.  [XMPP 发布订阅](http://xmpp.org/extensions/xep-0060.html/)
3.  如果您自己并不真正关心 PubSub 及其部署/工作/技术，请选择[SuperFeedr](http://superfeedr.com/)、[PusherApp](http://pusher.com/)、[PubNub](http://www.pubnub.com/)等第三方服务提供商。我认为市场上至少有 10 家这样的服务提供商。

您还需要一个传输，将您的 pubsub 通道连接到浏览器上的客户端（websocket 或在旧浏览器上为您模拟 websocket 的东西）。我想到的几个选项是：

1.  使用[BOSH 连接管理器](https://github.com/abhinavsingh/ebosh)（长轮询）
2.  [套接字.IO](http://socket.io/)
3.  [袜子.JS](https://github.com/sockjs)
4.  [STOMP](http://stomp.github.io/)（面向流文本的消息传递协议）
5.  如果您想使用免费和开源软件 (FOSS)，那么至少有 10 个可用的现成选项

希望它可以帮助你。

# windows-phone-7 - WP7.1 - 如何使用 oData 刷新 ListBox

> ID：11893007
> 
> 赞同：0
> 
> 时间：2012-08-09T22:36:49.677
> 
> 标签：windows-phone-7, listbox, wcf-data-services, odata

在我的 Windows Phone 7.1 应用程序中。我在枢轴控件中有一个列表框。我的列表框使用来自 Web 服务的 OData 填充数据。我正在使用[http://services.odata.org/Northwind/Northwind.svc/上的服务](http://services.odata.org/Northwind/Northwind.svc/)为我的测试。我无法刷新列表框中的数据。例如，当应用程序加载时，应用程序获取 OrderID 10248 和 10249 的数据。现在，如果用户按下应用程序栏中的按钮，我想获取 OrderID 10250 和 10251 的记录。当我调用获取数据时，我没有从应用程序中得到任何错误，并且 UI 中的数据没有刷新。我从阅读中了解到 DataServiceCollection 实现了 ObservableCollection，而 ObservableCollection 本身实现了 INotifyPropertChanged，因此我的 UI 应该只在集合更改时刷新。但这种情况并非如此。

我已经在使用 GridView 的 WPF 应用程序中对此进行了测试，并且 UI 使用新数据刷新得很好。我明白虽然 WPF 中的调用不是异步的。任何帮助表示赞赏。

下面是我在 ViewModel 中用来获取数据的代码。

```
 private NorthwindEntities context;
    private const string svcUri = "http://services.odata.org/Northwind/Northwind.svc/";

    public MainViewModel()
    {
        List<string> nums = new List<string>() { "10248", "10249" };
        GetDataFromService(nums);
    }

    public void GetDataFromService(List<string> zNumbers)
    {
        try
        {
            string partQuery = "Orders()?$filter =";

            if (zNumbers.Count > 0)
            {
                foreach (var item in zNumbers)
                {
                    partQuery += "(OrderID eq " + item + ") or ";
                }

                partQuery = partQuery.Substring(0, partQuery.Length - 3).Trim();
            }

            // Initialize the context for the data service.
            context = new NorthwindEntities(new Uri(svcUri));

            Uri queryUri = new Uri(partQuery, UriKind.Relative);
            trackedCustomers = new DataServiceCollection<Order>(context);
            trackedCustomers.LoadAsync(queryUri);
        }
        catch (DataServiceQueryException ex)
        {
            MessageBox.Show("The query could not be completed:\n" + ex.ToString());
        }
        catch (InvalidOperationException ex)
        {
            MessageBox.Show("The following error occurred:\n" + ex.ToString());
        }
    }

    private DataServiceCollection<Order> trackedCustomers;

    public DataServiceCollection<Order> TrackedCustomers
    {
        get { return trackedCustomers; }
        set
        {
            if (value != trackedCustomers)
            {
                trackedCustomers = value;
                NotifyPropertyChanged("TrackedCustomers");
            }
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(String propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (null != handler)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    } 
```

这是我的 MainPage.xaml 中的 XAML

```
 <Grid x:Name="LayoutRoot" Background="Transparent">
    <!--Pivot Control-->
    <controls:Pivot Title="MY APPLICATION">
        <!--Pivot item one-->
        <controls:PivotItem Header="first">
            <!--Double line list with text wrapping-->
            <ListBox x:Name="FirstListBox" Margin="0,0,-12,0" ItemsSource="{Binding             TrackedCustomers, Mode=OneWay}">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                      <StackPanel Margin="0,0,0,17" Width="432" Height="78">
                            <TextBlock Text="{Binding OrderID}" TextWrapping="Wrap" Style="{StaticResource PhoneTextExtraLargeStyle}"/>
                            <TextBlock Text="{Binding Freight}" TextWrapping="Wrap" Margin="12,-6,12,0" Style="{StaticResource PhoneTextSubtleStyle}"/>
                      </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </controls:PivotItem>          
    </controls:Pivot>
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T22:55:36.773

LoadAsync 完成后是否有一个处理程序被调用？如果是这样，那是您需要对公共属性 TrackedCustomers 进行分配的时候。

或者，可能更改这些行以使用公共属性：

```
 trackedCustomers = new DataServiceCollection<Order>(context);
        trackedCustomers.LoadAsync(queryUri); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T23:01:47.897

问题是您正在将后端集合更改`trackedCustomers`为一个新对象，而不会告诉 UI 它正在更改。UI 绑定到对象的第一个实例，而您正在丢弃该对象。你需要做两件事之一

清除支持集合：

```
trackedCustomers.Clear();
trackedCustomers.LoadAsync(queryUri); 
```

或者使用暴露的属性

```
TrackedCustomers= new DataServiceCollection<Order>(context);
TrackedCustomers.LoadAsync(queryUri); 
```

# ruby-on-rails - 部署 capistrano 失败

> ID：11893008
> 
> 赞同：6
> 
> 时间：2012-08-09T22:36:51.850
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, capistrano

我有一个像这样的capistrano taks

```
require "bundler/capistrano"

set :application, "cloudoc"
set :repository,  "git@github.com:luizkowalski/cloudoc.git"

set :scm, :git

role :web, "xx.xx.xx.xxx" 
role :app, "xx.xx.xx.xxx" 
role :db,  "xx.xx.xx.xxx", :primary => true

default_run_options[:pty] = true
ssh_options[:forward_agent] = true

after "deploy:restart", "deploy:cleanup"

set :user, "deploy"
set :use_sudo, true

set :deploy_to, "/home/deploy"
set :deploy_via, :remote_cache

role :web, "xx.xx.xx.xxx"
role :app, "xx.xx.xx.xxx"
role :db, "xx.xx.xx.xxx", :primary => true 
```

之后`cap deploy`这是输出。
由于某种原因，他失败了，我不知道为什么。我试过使用 use_sudo false 和 root，同样的事情发生了。

```
 [xx.xx.xx.xxx] executing command
    command finished in 4714ms
    copying the cached version to /home/deploy/releases/20120809223144
  * executing "cp -RPp /home/deploy/shared/cached-copy /home/deploy/releases/20120809223144 && (echo 61eeff328c40e104962f96bf6ffc5150bd1162e4 > /home/deploy/releases/20120809223144/REVISION)"
    servers: ["xx.xx.xx.xxx"]
    [xx.xx.xx.xxx] executing command
    command finished in 604ms
  * executing `deploy:finalize_update'
    triggering before callbacks for `deploy:finalize_update'
  * executing `deploy:assets:symlink'
  * executing "rm -rf /home/deploy/releases/20120809223144/public/assets &&\\\n        mkdir -p /home/deploy/releases/20120809223144/public &&\\\n        mkdir -p /home/deploy/shared/assets &&\\\n        ln -s /home/deploy/shared/assets /home/deploy/releases/20120809223144/public/assets"
    servers: ["xx.xx.xx.xxx"]
    [xx.xx.xx.xxx] executing command
    command finished in 544ms
  * executing `bundle:install'
  * executing "cd /home/deploy/releases/20120809223144 && bundle install --gemfile /home/deploy/releases/20120809223144/Gemfile --path /home/deploy/shared/bundle --deployment --quiet --without development test"
    servers: ["xx.xx.xx.xxx"]
    [xx.xx.xx.xxx] executing command
    command finished in 1990ms
  * executing "chmod -R g+w /home/deploy/releases/20120809223144"
    servers: ["xx.xx.xx.xxx"]
    [xx.xx.xx.xxx] executing command
    command finished in 1042ms
  * executing "rm -rf /home/deploy/releases/20120809223144/log /home/deploy/releases/20120809223144/public/system /home/deploy/releases/20120809223144/tmp/pids &&\\\n      mkdir -p /home/deploy/releases/20120809223144/public &&\\\n      mkdir -p /home/deploy/releases/20120809223144/tmp"
    servers: ["xx.xx.xx.xxx"]
    [xx.xx.xx.xxx] executing command
    command finished in 534ms
  * executing "ln -s /home/deploy/shared/system /home/deploy/releases/20120809223144/public/system"
    servers: ["xx.xx.xx.xxx"]
    [xx.xx.xx.xxx] executing command
    command finished in 517ms
  * executing "ln -s /home/deploy/shared/log /home/deploy/releases/20120809223144/log"
    servers: ["xx.xx.xx.xxx"]
    [xx.xx.xx.xxx] executing command
    command finished in 519ms
  * executing "ln -s /home/deploy/shared/pids /home/deploy/releases/20120809223144/tmp/pids"
    servers: ["xx.xx.xx.xxx"]
    [xx.xx.xx.xxx] executing command
    command finished in 521ms
    triggering after callbacks for `deploy:update_code'
  * executing `deploy:assets:precompile'
  * executing "cd /home/deploy/releases/20120809223144 && bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile"
    servers: ["xx.xx.xx.xxx"]
    [xx.xx.xx.xxx] executing command
 ** [out :: xx.xx.xx.xxx] Compiled jquery.js  (2ms)  (pid 1075)
 ** [out :: xx.xx.xx.xxx] Compiled jquery_ujs.js  (0ms)  (pid 1075)
 ** [out :: xx.xx.xx.xxx] Compiled twitter/bootstrap/bootstrap-transition.js  (0ms)  (pid 1075)
 ** [out :: xx.xx.xx.xxx] Compiled twitter/bootstrap/bootstrap-alert.js  (0ms)  (pid 1075)
 ** [out :: xx.xx.xx.xxx] Compiled twitter/bootstrap/bootstrap-modal.js  (0ms)  (pid 1075)
 ** [out :: xx.xx.xx.xxx] Compiled twitter/bootstrap/bootstrap-dropdown.js  (0ms)  (pid 1075)
 ** [out :: xx.xx.xx.xxx] Compiled twitter/bootstrap/bootstrap-scrollspy.js  (0ms)  (pid 1075)
 ** [out :: xx.xx.xx.xxx] Compiled twitter/bootstrap/bootstrap-tab.js  (0ms)  (pid 1075)
 ** [out :: xx.xx.xx.xxx] Compiled twitter/bootstrap/bootstrap-tooltip.js  (0ms)  (pid 1075)
 ** [out :: xx.xx.xx.xxx] Compiled twitter/bootstrap/bootstrap-popover.js  (0ms)  (pid 1075)
 ** [out :: xx.xx.xx.xxx] Compiled twitter/bootstrap/bootstrap-button.js  (0ms)  (pid 1075)
 ** [out :: xx.xx.xx.xxx] Compiled twitter/bootstrap/bootstrap-collapse.js  (0ms)  (pid 1075)
 ** [out :: xx.xx.xx.xxx] Compiled twitter/bootstrap/bootstrap-carousel.js  (0ms)  (pid 1075)
 ** [out :: xx.xx.xx.xxx] Compiled twitter/bootstrap/bootstrap-typeahead.js  (0ms)  (pid 1075)
 ** [out :: xx.xx.xx.xxx] Compiled twitter/bootstrap.js  (247ms)  (pid 1075)
 ** [out :: xx.xx.xx.xxx] Compiled ios-checkboxes/ios-checkboxes.js  (20642ms)  (pid 1075)
 ** [out :: xx.xx.xx.xxx] Compiled ios-checkboxes.js  (22403ms)  (pid 1075)
 ** [out :: xx.xx.xx.xxx] Compiled rails.validations.js  (418ms)  (pid 1075)
 ** [out :: xx.xx.xx.xxx] Compiled best_in_place.js  (327ms)  (pid 1075)
 ** [out :: xx.xx.xx.xxx] Compiled autosize.js  (76ms)  (pid 1075)
 ** [out :: xx.xx.xx.xxx] Compiled bootstrap.js  (5870ms)  (pid 1075)
 ** [out :: xx.xx.xx.xxx] Compiled dashboard.js  (1388ms)  (pid 1075)
 ** [out :: xx.xx.xx.xxx] Compiled documents.js  (896ms)  (pid 1075)
 ** [out :: xx.xx.xx.xxx] Compiled home.js  (377ms)  (pid 1075)
 ** [out :: xx.xx.xx.xxx] Compiled sessions.js  (563ms)  (pid 1075)
 ** [out :: xx.xx.xx.xxx] Compiled application.js  (51370ms)  (pid 1075)
 ** [out :: xx.xx.xx.xxx] Killed
    command finished in 68972ms
*** [deploy:update_code] rolling back
  * executing "rm -rf /home/deploy/releases/20120809223144; true"
    servers: ["xx.xx.xx.xxx"]
    [xx.xx.xx.xxx] executing command
    command finished in 612ms
failed: "sh -c 'cd /home/deploy/releases/20120809223144 && bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile'" on xx.xx.xx.xxx 
```

有任何想法吗？ 如果有人需要更多信息，请提前
告诉我谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-09T22:51:54.090

当 RAM 不足并且进程使用大量 RAM 时，内核会主动终止进程。您可以使用`dmesg`来查看进程是否被内核杀死。会出现这样的消息：

```
[ 3380.091822] Out of memory: Kill process 1075 (ruby1.9.1) score 382 or sacrifice child 
```

您可以激活交换空间或关闭其他进程。如果您在 VPS 上运行，请确保您有足够的可用 RAM。最简单的解决方案 - 如果问题真的是可用 RAM 短缺 - 就是购买更多 RAM。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-08T13:02:15.060

我在 Digital Ocean 上运行我的 rails 应用程序。创建 2gb 交换似乎可以解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-09T10:42:13.610

如果您使用的是亚马逊 EC2 微型实例，请尝试删除应用程序的旧版本，然后重新启动服务器实例。这对我有用。帽部署：清理帽橡胶：重新启动

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-09T05:19:11.963

我遇到了这个错误，并意识到我正在存储我以前发布的所有版本。我只是用过`cap deploy:cleanup`，效果很好。

# php - 检测字符串中的违禁词

> ID：11893020
> 
> 赞同：0
> 
> 时间：2012-08-09T22:37:59.683
> 
> 标签：php, strpos

我有一个检查坏词的功能，但它不能按我想要的方式工作。例如 test 是一个 cuss 词，那么如果我说“testing”该函数会将其视为一个 cuss 词。我将如何解决这个问题，使其不会那样做。

这是我的代码：

```
 function censor($message) {
        $badwords = $this->censor; //array with the cuss words.
        $message = @ereg_replace('[^A-Za-z0-9 ]','',strtolower(' '.$message.' '));
        foreach($badwords as $bad) {
            $bad = trim($bad);
            if(strpos($message.' ', $bad.' ')!==false) {
                if(strlen($bad)>=2) {
                    return true;
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T22:44:04.163

首先，[`ereg_replace`](http://php.net/manual/en/function.ereg-replace.php)自 PHP 5.3.0 起已弃用。

现在，对于您的问题：您可以`\b`用作单词边界。

> 简单地说：`\b`允许您使用`\bword\b`.

有关详细信息，请参阅[此页面。](http://www.regular-expressions.info/wordboundaries.html)

* * *

您甚至可以使用我从 PHP[`preg_replace`](http://php.net/manual/en/function.preg-replace.php)文档的示例 2 中复制的以下代码：

```
$string = 'The quickest brown fox jumped over the lazy dog.';
$patterns = array();
$patterns[0] = '/ quick /';
$patterns[1] = '/ brown /';
$patterns[2] = '/ fox /';

echo preg_replace($patterns, ' *** ', $string);

Output: The quickest *** *** jumped over the lazy dog. 
```

# jquery - ASP.NET MVC 3 中的范围条件验证

> ID：11893021
> 
> 赞同：0
> 
> 时间：2012-08-09T22:38:04.147
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3

我有两个字段“Price From”和“Price To”+“Currency Unit”。

我想确保： - 如果“From”和“To”都有值，那么“Price To”应该是“>”“Price From”。- 如果“Price To”或“Price From”中的“any”具有值，则需要“Currency Unit”。

这可以在自定义验证器中实现吗？如果是，我应该把它放在哪里，在哪个字段上？或者我是否有可能创建一个模型级验证器以在客户端和服务器端运行？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:57:26.203

`IValidatableObject`您可以通过指定接口并定义所需的方法来将模型中的验证作为模型级验证来 `Validate()`处理，如下所示：

```
public class Address : IValidatableObject
{

    public int PriceTo { get; set; }
    public int PriceFrom { get; set; }
    public int CurrencyUnit { get; set; }

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {

        var results = new List<ValidationResult>();

        if(PriceFrom != null && PriceTo != null)
        {
            if( ! PriceTo > PriceFrom )
            {
                results.Add (new ValidationResult("\"Price To\" must be greater than \"Price From\"", new List<string> { "PriceTo", "PriceFrom" }));
            }

        }

        if(PriceFrom != null || PriceTo != null)
        {
            if(CurrencyUnit == null)
            {
                results.Add (new ValidationResult("If you indicate any prices, you must specify a currency unit"", new List<string> { "CurrencyUnit" }))
            }
        }
        return results;
    }
} 
```

**NOTE, however**: I don't think your MVC client-side validation picks up this rule, so it will only apply server-side.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T23:02:15.573

There's a nice example [**here**](http://www.devtrends.co.uk/blog/the-complete-guide-to-validation-in-asp.net-mvc-3-part-2) which you'll have to slightly adapt, but essentialy I think this is the technique you are looking for, which is both **client** and server validation.

# c# - 使用 c# 进行 http POST 以更新网页

> ID：11893024
> 
> 赞同：0
> 
> 时间：2012-08-09T22:38:40.487
> 
> 标签：c#, http, post

要更新的页面的 URL（如果单击它，链接将不起作用，它只是一个示例）：[https ://test-services.zzz111.org/yyy-9/center/api/rest/v1/pols/ZYPK](https://test-services.zzz111.org/yyy-9/center/api/rest/v1/pols/ZYPK)

我假设我需要在这个 URL 上做一个 POST。

以下是请求示例：

```
<PolChangeSet schemaVersion="2.1" username="ZZ@yyy999.com" description="Adding a note">
    <Attachment name="pic.jpg" contentType="image/jpeg">
        <Description/>
        <Location>https://services.zzz111.com/yyy-9/center/api/sdo/rest/v1/buckets/attachments/objects/6BD0C43B-4608-0EDE-F6DA-919097EFCABF.jpg</Location>
    </Attachment>
</PolChangeSet> 
```

我将如何将此 HTTP POST 请求发送到 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T01:20:11.840

如果需要后台发帖，可以参考这个[http://www.hanselman.com/blog/HTTPPOSTsAndHTTPGETsWithWebClientAndCAndFakingAPostBack.aspx](http://www.hanselman.com/blog/HTTPPOSTsAndHTTPGETsWithWebClientAndCAndFakingAPostBack.aspx)

并通过 xml 将 URI 和参数作为字符串传递

我编辑了原始源并将 contentType 添加为附加参数。XML 类型是`"application/xml"`

```
public static string HttpPost(string URI, string Parameters, string contentType) 
{
   System.Net.WebRequest req = System.Net.WebRequest.Create(URI);
   req.Proxy = new System.Net.WebProxy(ProxyString, true);
   //Add these, as we're doing a POST
   req.ContentType = contentType;
   req.Method = "POST";
   //We need to count how many bytes we're sending. Post'ed Faked Forms should be name=value&
   byte [] bytes = System.Text.Encoding.ASCII.GetBytes(Parameters);
   req.ContentLength = bytes.Length;
   System.IO.Stream os = req.GetRequestStream ();
   os.Write (bytes, 0, bytes.Length); //Push it out there
   os.Close ();
   System.Net.WebResponse resp = req.GetResponse();
   if (resp== null) return null;
   System.IO.StreamReader sr = new System.IO.StreamReader(resp.GetResponseStream());
   return sr.ReadToEnd().Trim();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T00:54:03.327

您可以使用 jquery 来执行此操作。

```
$.post(
    "action.php", 
    {"xmlString":xmlString}, 
    function (response){
        alert(response);
    }
); 
```

然后您可以在服务器端将 xml 字符串解析为您的对象。这里有一些关于 jquery post [http://api.jquery.com/jQuery.post/的例子](http://api.jquery.com/jQuery.post/)

或者你可以看看这个答案，它是相似的：[how to pass xml as parameter using POST method and using jquery ajax](https://stackoverflow.com/questions/920066/how-to-pass-xml-as-parameter-using-post-method-and-using-jquery-ajax)

# php - 替换对象数组 PHP 中的字符串

> ID：11893025
> 
> 赞同：1
> 
> 时间：2012-08-09T22:38:41.540
> 
> 标签：php, joomla

我以为这很容易，但结果很难。我要做的就是替换对象中的一个值，然后打印出更改后的字符串。顺便说一句，这是在 Joomla 中。这并不重要，只是为了解释代码中的所有 JHTML/和 JURi 内容。

我一直在尝试的代码是......

```
<?php

// Display the child select box.
if (isset($this->containers) && count($this->containers)):
    $items = str_replace("Your Favorite Places", "Browse By Region", $this->containers);
    echo JHtml::_('select.genericlist', $items, 'finder-containers','onchange="document.location=this.value; return false;"', 'link', 'indented', JUri::getInstance()->toString(array('path')));
endif;

?> 
```

所以我的`str_replace`线路是我遇到问题的地方。`$this->containers`只是一个状态数组，其他内容会在下拉框中回显。我试图在最后一行回显之前进行替换，但“你最喜欢的地方”字样仍然存在。我必须把它放在一个`foreach`循环或类似的东西中吗？

这是一个部分的print_r（实际上我要替换的字符串就在其中。类别标题=>您最喜欢的地方）

```
Array (
    [0] => stdClass Object (
        [category_id] => 1
        [title]       => Gallery
        [alias]       => gallery
        [slug]        => 1:gallery
        [level]       => 0
        [my_items]    => 0
        [url]         => index.php?option=com_gallery&view=images&category_id=1
        [route]       => index.php?option=com_gallery&view=images&category_id=1:gallery&Itemid=1766
        [link]        => /your-favorite-places/categories/gallery.html
        [indented]    => Gallery
    )

    [1] => stdClass Object (
        [category_id] => 164
        [title]       => Your Favorite Places
        [alias]       => your-favorite-places
        [slug]        => 164:gallery/your-favorite-places
        [level]       => 1
        [my_items]    => 0
        [url]         => index.php?option=com_gallery&view=images&category_id=164
        [route]       => index.php?option=com_gallery&view=images&category_id=164:gallery/your-favorite-places&Itemid=3711
        [link]        => /your-favorite-places/gallery.html
        [indented]    =>   Your Favorite Places
    )

    [2] => stdClass Object (
        [category_id] => 87
        [title]       => North America
        [alias]       => north-america
        [slug]        => 87:gallery/your-favorite-places/north-america
        [level]       => 2
        [my_items]    => 0
        [url]         => index.php?option=com_gallery&view=images&category_id=87
        [route]       => index.php?option=com_gallery&view=images&category_id=87:gallery/your-favorite-places/north-america&Itemid=1775
        [link]        => /your-favorite-places/north-america.html
        [indented]    =>     North America
    ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T00:36:52.597

属性`$this->containers`是一个对象数组。

您需要遍历这个数组，访问每个对象的 title 属性，并替换该属性的字符串值（如果它是正确的字符串）。

所以...

摆脱这个块：

 ~~~~```
$items = str_replace("Your Favorite Places", "Browse By Region", $this->containers); 
```~~  ~~用这一行替换它：

```
$items = array(); // Create an array to load the objects in as values.
foreach($this->containers as $object) { // Iterate through $this->containers, which is an array. Load the object into temporary variable $object.
    if (strpos($object->title, 'Your Favorite Places') !== false) { // If the title property contains a string you're looking for, replace it with the value you want.
        $object->title = str_replace('Your Favorite Places', 'Browse By Region', $object->title);
    }
    if (strpos($object->indented, 'Your Favorite Places') !== false) { // Should work with any property value with whitespaces also.
        $object->indented = str_replace('Your Favorite Places', 'Browse By Region', $object->indented);
    }
    $items[] = $object; // Load the object into array $items.
} 
```

编辑：我添加了一种方法来检查部分字符串而不是整个字符串，并替换部分字符串匹配以保留空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T22:50:20.550

如果我猜的话，我会说字符串“Your Favorite Places”在 $this->containers 的键中。虽然 str_replace() 将迭代数组，但它迭代的是值，而不是键。

我会尝试类似的东西：

```
foreach($this->containers as $key => $value) {
   if ($key == "Your Favorite Places") {
       $items["Browse By Region"] = $value;
   } else {
       $items[$key] = $value;
   }
 } 
```

从 Stegrex 编辑：在循环中将 = 更改为 =>~~~~

# symfony - 你能有选择地在 symfony2 中加载固定装置吗

> ID：11893028
> 
> 赞同：7
> 
> 时间：2012-08-09T22:39:17.047
> 
> 标签：symfony, fixtures

当我跑

```
console doctrine:fixtures:load --fixtures=src/App/PeopleBundle/DataFixtures/ORM 
```

我不希望教义清除每个具有实体的表。相反，我只想清除明确指定目录中的固定装置的表。

然而，不管目标目录是什么，symfony 似乎都在查找每个包中的每个实体，并清除与每个实体关联的每个表。

我如何指示 symfony2 忽略除我编写了固定装置的特定表之外的所有表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-17T12:39:26.530

以正确的方式去做这件事并不难。首先，是的，您使用`--append`，但是您将添加大量您不想要的额外内容。所以你需要在你的fixtures中执行一些基本的检查，看看你是否真的需要添加它们（如果它们已经在数据库中，你不需要）。

我将向您展示的示例是一个简单的示例：我有一个`locators`包含列的表：`id`和`name`.

```
namespace Application\Model\Fixtures;

use Doctrine\Common\DataFixtures\OrderedFixtureInterface,
    Doctrine\Common\DataFixtures\FixtureInterface,
    Doctrine\Common\Persistence\ObjectManager,
    Application\Model\Entity\Locator;

/**
 * Class LoadLocators
 *
 * Pre-populates the locators table
 *
 * @package Application\Model\Fixtures
 */
class LoadLocators implements FixtureInterface, OrderedFixtureInterface
{
    /**
     * @var array The locators names that will be inserted in the database table
     */
    protected $locators = ['id', 'xpath', 'css'];

    /**
     * {@inheritDoc}
     */
    public function load(ObjectManager $manager)
    {
        foreach ($this->locators as $locatorName)
        {
            $locator = $this->findOrCreateLocator($locatorName, $manager);

            /** Check if the object is managed (so already exists in the database) **/
            if (!$manager->contains($locator))
            {
                $manager->persist($locator);
            }
        }

        $manager->flush();
    }

    /**
     * Helper method to return an already existing Locator from the database, else create and return a new one
     *
     * @param string        $name
     * @param ObjectManager $manager
     *
     * @return Locator
     */
    protected function findOrCreateLocator($name, ObjectManager $manager)
    {
        return $manager->getRepository('Application\Model\Entity\Locator')->findOneBy(['name' => $name]) ?: new Locator($name);
    }

    /**
     * {@inheritDoc}
     */
    public function getOrder()
    {
        return 1;
    }
} 
```

此处的简单更改是，如果该对象已存在于数据库中，则找到它并改用该对象。真的就是这么简单。

我现在运行的命令`--append`在最后，但如果数据已经存在，它不会追加。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T07:02:17.520

您认为 Doctrine 应该如何确定要清除的内容和不清除的内容？夹具中没有信息告诉它将加载哪些实体。如果你真的需要这个，你必须手动完成。

首先，您可以使用该`--append`选项来避免清除数据库。其次，您可以在您的固定装置中做的第一件事是截断相关的表格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-29T13:02:45.863

您可以使用该`--fixtures`选项加载选定的灯具。

与`--append`您一起可能能够控制您想要执行的操作，从而清除 Elnur 所说的对实体管理器管理的每个表的影响。

# javascript - 正则表达式匹配任何不是字符串“ABCD”的内容

> ID：11893030
> 
> 赞同：3
> 
> 时间：2012-08-09T22:39:33.927
> 
> 标签：javascript, regex, string

如何编写一个匹配除给定字符串（“ABCD”）之外的所有内容的 Javascript 正则表达式？

除了`/[^ABCD]/`我不想匹配不是字母 A、B、C 或 D 的所有内容之外，我想匹配不是字符串“ABCD”的所有内容。

基本上我希望这种情况发生：

```
var myStr = "ABCA ABCB ABCD BCD ABC"
myStr.replace(/!(ABCD)/g,'') // returns ABCD 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T22:48:36.003

您可以简单地检查`ABCD`，检查字符串中存在多少，然后像这样从中构造一个新字符串（如果它更适合您的情况，您可以使用空格作为分隔符）：

```
var res = myStr.match(/ABCD/g);
var str = res ? res.join('') : ''; 
```

*   [jsFiddle 演示](http://jsfiddle.net/uzMNk/2/)
*   [字符串.match()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)
*   [Array.join()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join)

三元组在那里是因为如果它什么也没找到，`match()`它将返回`null`- 它没有`join()`方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T23:01:12.547

好吧，我误解了这个问题。看来您想测试是否存在`ABCD`，如果找到，请将整个字符串替换为：`ABCD`。这将做到这一点：

```
s = s.replace(/.*(ABCD).*/, '$1'); 
```

但如果字符串中没有`ABCD`，它将保持字符串不变。如果您想在这种情况下删除字符串，则必须将捕获设为可选。但是随后您必须更改正则表达式的第一部分以使其“偷偷摸摸”捕获：

```
s = s.replace(/^(?:(?!ABCD).)*((?:ABCD)?).*$/, '$1'); 
```

这迫使它尝试`ABCD`在每个位置捕获。（它也会大大减慢速度——在这种情况下不是问题，但如果你在大输入上使用这种技术，请记住一些事情。）

所以确实存在纯正则表达式解决方案，但我更喜欢@bažmegakapa 的解决方案。:D

* * *

**原答案：**

```
/^(?!ABCD$).*/ 
```

请注意，这也将匹配一个空字符串。如果您有任何*积极*的要求，您可以将其更改`.*`为您需要的任何内容。例如，要匹配一个或多个大写 ASCII 字母但不匹配确切的字符串`ABCD`，您可以使用：

```
/^(?!ABCD$)[A-Z]+$/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T23:30:28.907

试试这个：

```
var myStr = "ABCA ABCB ABCD BCD ABC";
var foo = myStr.replace(/\b(?!ABCD\b)\w+\b/g,'').trim(); // returns ABCD
document.write(foo); 
```

输出：`ABCD`

或者：

```
var myStr = "ABCA ABCB ABCD BCD ABCD ABC";
var foo = myStr.replace(/\b(?!ABCD\b)\w+\b/g,'').replace(/\s/g, '');
document.write(foo); 
```

输出：`ABCDABCD`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T23:25:49.620

这是 negation 的直接扩展，不使用否定运算符：

```
/^\([^a]\|a[^b]\|ab[^c]\|abc[^d]\)*$\|^a$\|^ab$\|^abc$/ 
```

当您将否定运算符调用为某种语言时，它会将您想要否定的表达式转换为类似于大写形式的东西。

* * *

这是我测试它的方法：

```
@ThinkPad-T420:~$ E='/^\([^a]\|a[^b]\|ab[^c]\|abc[^d]\)*$\|^a$\|^ab$\|^abc$/ p;d'
@ThinkPad-T420:~$ echo abc | sed "$E"
abc
@ThinkPad-T420:~$ echo abcd | sed "$E"
@ThinkPad-T420:~$ echo abcde | sed "$E"
@ThinkPad-T420:~$ echo axbcde | sed "$E"
axbcde
@ThinkPad-T420:~$ echo xxabcde | sed "$E"
@ThinkPad-T420:~$ 
```

# python - python curses中的鼠标滚轮

> ID：11893034
> 
> 赞同：3
> 
> 时间：2012-08-09T22:39:59.913
> 
> 标签：python, mousewheel, curses

有谁知道是否可以在curses中处理鼠标滚轮的移动？我想它们应该与箭头键相同。一个例子将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T02:12:15.897

我猜它取决于系统和终端。我写了以下内容——它只是捕获鼠标状态并将它们打印到屏幕上。我能够使用 xterm 在 Mac OSX 中接收鼠标滚动事件。（向上滚动注册为我的按钮 4；向下滚动为按钮 2——但使用本机终端应用程序不起作用。）

如果您查看此代码会很清楚，您必须先使用`scr.getch()`，并测试它是否返回`curses.KEY_MOUSE`. 如果是这样，您可以调用[`curses.getmouse()`](http://docs.python.org/library/curses.html#curses.getmouse)，它返回一个包含设备 ID、坐标和状态标志的元组。

```
import curses
from contextlib import contextmanager

@contextmanager
def open_screen():
    scr = curses.initscr()
    curses.noecho()
    curses.cbreak()
    scr.keypad(1)
    try:
        yield scr
    finally:
        curses.nocbreak()
        scr.keypad(0)
        curses.echo()
        curses.endwin()

curses_mouse_states = {
    curses.BUTTON1_PRESSED: 'Button 1 Pressed', 
    curses.BUTTON1_RELEASED: 'Button 1 Released', 
    curses.BUTTON1_CLICKED: 'Button 1 Clicked',
    curses.BUTTON1_DOUBLE_CLICKED: 'Button 1 Double-Clicked',
    curses.BUTTON1_TRIPLE_CLICKED: 'Button 1 Triple-Clicked',

    curses.BUTTON2_PRESSED: 'Button 2 Pressed', 
    curses.BUTTON2_RELEASED: 'Button 2 Released', 
    curses.BUTTON2_CLICKED: 'Button 2 Clicked',
    curses.BUTTON2_DOUBLE_CLICKED: 'Button 2 Double-Clicked',
    curses.BUTTON2_TRIPLE_CLICKED: 'Button 2 Triple-Clicked',

    curses.BUTTON3_PRESSED: 'Button 3 Pressed', 
    curses.BUTTON3_RELEASED: 'Button 3 Released', 
    curses.BUTTON3_CLICKED: 'Button 3 Clicked',
    curses.BUTTON3_DOUBLE_CLICKED: 'Button 3 Double-Clicked',
    curses.BUTTON3_TRIPLE_CLICKED: 'Button 3 Triple-Clicked',

    curses.BUTTON4_PRESSED: 'Button 4 Pressed', 
    curses.BUTTON4_RELEASED: 'Button 4 Released', 
    curses.BUTTON4_CLICKED: 'Button 4 Clicked',
    curses.BUTTON4_DOUBLE_CLICKED: 'Button 4 Double-Clicked',
    curses.BUTTON4_TRIPLE_CLICKED: 'Button 4 Triple-Clicked',

    curses.BUTTON_SHIFT: 'Button Shift', 
    curses.BUTTON_CTRL: 'Button Ctrl', 
    curses.BUTTON_ALT: 'Button Alt'
}

with open_screen() as scr:
    curses.mousemask(-1)
    while True:
        c = scr.getch()
        if c == curses.KEY_MOUSE:
            mouse_state = curses.getmouse()[4]
            states = '; '.join(state_string for state, state_string 
                               in curses_mouse_states.viewitems() 
                               if mouse_state & state)
            scr.addstr(0, 0, states)
            scr.clrtoeol()
            scr.refresh()
        elif c == ord('q'):
            break 
```

# c++ - 生成第 n 个 Motzkin 数的最快方法是什么？

> ID：11893036
> 
> 赞同：6
> 
> 时间：2012-08-09T22:40:06.703
> 
> 标签：c++, algorithm, optimization, motzkin-numbers

我想生成所有[Motzkin 数](http://en.wikipedia.org/wiki/Motzkin_number)并存储在一个数组中。公式如下： ![在此处输入图像描述](../Images/32a73863667d59c14a67bafcd0db8234.png)

我目前的实现太慢了：

```
void generate_slow() {
    mm[0] = 1;
    mm[1] = 1;
    mm[2] = 2;
    mm[3] = 4;
    mm[4] = 9;
    ull result;
    for (int i = 5; i <= MAX_NUMBERS; ++i) {
        result = mm[i - 1];
        for (int k = 0; k <= (i - 2); ++k) {
            result = (result + ((mm[k] * mm[i - 2 - k]) % MODULO)) % MODULO;
        }
        mm[i] = result;
    }
}

void generate_slightly_faster() {
    mm[0] = 1;
    mm[1] = 1;
    mm[2] = 2;
    mm[3] = 4;
    mm[4] = 9;
    ull result;
    for (int i = 5; i <= MAX_NUMBERS; ++i) {
        result = mm[i - 1];
        for (int l = 0, r = i - 2; l <= r; ++l, --r) {
            if (l != r) {
                result = (result + (2 * (mm[l] * mm[r]) % MODULO)) % MODULO;
            }
            else {
                result = (result + ((mm[l] * mm[r]) % MODULO)) % MODULO;
            }
        }
        mm[i] = result;
    }
} 
```

此外，我坚持为递归矩阵找到一个封闭形式，以便我可以应用幂平方。任何人都可以提出更好的算法吗？谢谢。
**编辑**我不能应用第二个公式，因为对数字取模时除法不适用。的最大值`n`为 10,000，超出了 64 位整数的范围，因此答案是模数较大`m`，其中`m`= 10^14 + 7。不允许使用更大的整数库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T22:21:10.293

实际上，您可以使用第二个公式。除法可以通过[模乘逆](http://en.wikipedia.org/wiki/Modular_multiplicative_inverse)来完成。即使模数不是素数，这很困难，但也有可能（我在对[MAXGAME 挑战的](http://www.codechef.com/AUG12/problems/MAXGAME)[讨论](http://discuss.codechef.com/questions/1968/maxgame-editorial)中发现了一些有用的提示）：

> 将 MOD 因式分解为 = 43 * 1103 * 2083 * 1012201。以每个素数为模计算所有量，然后使用中国剩余定理找出模 MOD 的值。当心，因为这里还涉及除法，对于每个数量，人们都需要保持这些素数中的每一个的最高幂，这也将它们分开。

以下 C++ 程序打印模 100000000000007 的前 10000 个 Motzkin 数：

```
#include <iostream>
#include <stdexcept>

// Exctended Euclidean algorithm: Takes a, b as input, and return a
// triple (g, x, y), such that ax + by = g = gcd(a, b)
// (http://en.wikibooks.org/wiki/Algorithm_Implementation/Mathematics/
// Extended_Euclidean_algorithm)
void egcd(int64_t a, int64_t b, int64_t& g, int64_t& x, int64_t& y) {
    if (!a) {
        g = b; x = 0; y = 1;
        return;
    }
    int64_t gtmp, xtmp, ytmp;
    egcd(b % a, a, gtmp, ytmp, xtmp);
    g = gtmp; x = xtmp - (b / a) * ytmp; y = ytmp;
}

// Modular Multiplicative Inverse
bool modinv(int64_t a, int64_t mod, int64_t& ainv) {
    int64_t g, x, y;
    egcd(a, mod, g, x, y);
    if (g != 1)
        return false;
    ainv = x % mod;
    if (ainv < 0)
        ainv += mod;
    return true;
}

// returns (a * b) % mod
// uses Russian Peasant multiplication
// (http://stackoverflow.com/a/12171020/237483)
int64_t mulmod(int64_t a, int64_t b, int64_t mod) {
    if (a < 0) a += mod;
    if (b < 0) b += mod;
    int64_t res = 0;
    while (a != 0) {
        if (a & 1) res = (res + b) % mod;
        a >>= 1;
        b = (b << 1) % mod;
    }
    return res;
}

// Takes M_n-2 (m0) and M_n-1 (m1) and returns n-th Motzkin number
// all numbers are modulo mod
int64_t motzkin(int64_t m0, int64_t m1, int n, int64_t mod) {
    int64_t tmp1 = ((2 * n + 3) * m1 + (3 * n * m0));
    int64_t tmp2 = n + 3;

    // return 0 if mod divides tmp1 because:
    // 1\. mod is prime
    // 2\. if gcd(tmp2, mod) != 1 --> no multiplicative inverse!
    // --> 3\. tmp2 is a multiple from mod
    // 4\. tmp2 divides tmp1 (Motzkin numbers aren't floating point numbers)
    // --> 5\. mod divides tmp1
    // --> tmp1 % mod = 0
    // --> (tmp1 * tmp2^(-1)) % mod = 0
    if (!(tmp1 % mod))
        return 0;

    int64_t tmp3;
    if (!modinv(tmp2, mod, tmp3))
        throw std::runtime_error("No multiplicative inverse");
    return (tmp1 * tmp3) % mod;
}

int main() {
    const int64_t M    = 100000000000007;
    const int64_t MD[] = { 43, 1103, 2083, 1012201 }; // Primefactors
    const int64_t MX[] = { M/MD[0], M/MD[1], M/MD[2], M/MD[3] };
    int64_t e1[4];

    // Precalculate e1 for the Chinese remainder algo
    for (int i = 0; i < 4; i++) {
        int64_t g, x, y;
        egcd(MD[i], MX[i], g, x, y);
        e1[i] = MX[i] * y;
        if (e1[i] < 0)
            e1[i] += M;
    }

    int64_t m0[] = { 1, 1, 1, 1 };
    int64_t m1[] = { 1, 1, 1, 1 };
    for (int n = 1; n < 10000; n++) {

        // Motzkin number for each factor
        for (int i = 0; i < 4; i++) {
            int64_t tmp = motzkin(m0[i], m1[i], n, MD[i]);
            m0[i] = m1[i];
            m1[i] = tmp;
        }

        // Chinese remainder theorem
        int64_t res = 0;
        for (int i = 0; i < 4; i++) {
            res += mulmod(m1[i], e1[i], M);
            res %= M;
        }
        std::cout << res << std::endl;
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T00:10:51.673

警告：以下代码错误，因为它使用整数除法（例如 5/2 = 2 而不是 2.5）。随意修复它！

这是使用动态规划的好机会。计算斐波那契数字非常相似。

```
sample code:

cache = {}
cache[0] = 1
cache[1] = 1

def motzkin(n):
    if n in cache:
        return cache[n]
    else:
        result = 3*n*motzkin(n - 2)/(n + 3) + (2*n + 3)*motzkin(n - 1)/(n + 3)
        cache[n] = result
        return result

for i in range(10):
    print i, motzkin(i)

print motzkin(1000)

"""
0 1
1 1
2 2
3 4
4 9
5 21
6 53
7 134
8 346
9 906
75794754010998216916857635442484411813743978100571902845098110153309261636322340168650370511949389501344124924484495394937913240955817164730133355584393471371445661970273727286877336588424618403572614523888534965515707096904677209192772199599003176027572021460794460755760991100028703368873821893050902166740481987827822643139384161298315488092901472934255559058881743019252022468893544043541453423967661847226330177828070589283132360685783010085347614855435535263090005810
""" 
```

问题是因为这些数字变得如此之大，如果你想变得非常高，将它们全部存储在缓存中将会耗尽内存。那么最好使用 for 循环记住前两个术语。如果您想找到许多数字的 motzkin 数，我建议您先对数字进行排序，然后在 for 循环中接近每个数字时，输出结果。

编辑：我创建了一个循环版本，但得到了与我之前的递归函数不同的结果。至少其中一个肯定是错的！！希望您仍然看到它是如何工作的并且可以修复它！

```
def motzkin2(numbers):
    numbers.sort() #assumes no duplicates
    up_to = 0
    if numbers[0] == 0:
        yield 1
        up_to += 1
    if 1 in numbers[:2]:
        yield 1
        up_to += 1

    max_ = numbers[-1]
    m0 = 1
    m1 = 1
    for n in range(3, max_ + 1):
        m2 = 3*n*m0/(n + 3) + (2*n + 3)*m1/(n + 3)
        if n == numbers[up_to]:
            yield n, m2
            up_to += 1
        m0, m1 = m1, m2

for pair in motzkin2([9,1,3,7, 1000]):
    print pair

"""
1
(3, 2)
(7, 57)
(9, 387)
(1000, 32369017020536373226194869003219167142048874154652342993932240158930603189131202414912032918968097703139535871364048699365879645336396657663119183721377260183677704306107525149452521761041198342393710275721776790421499235867633215952014201548763282500175566539955302783908853370899176492629575848442244003609595110883079129592139070998456707801580368040581283599846781393163004323074215163246295343379138928050636671035367010921338262011084674447731713736715411737862658025L)
""" 
```

# node.js - 带有 twitter 问题的 Node.js ntwitter 登录

> ID：11893038
> 
> 赞同：0
> 
> 时间：2012-08-09T22:40:11.190
> 
> 标签：node.js, twitter-oauth

我正在尝试使用 node.js ntwitter 包通过 twitter 实现登录。

[https://github.com/AvianFlu/ntwitter](https://github.com/AvianFlu/ntwitter)

如果我对我的凭据进行硬编码，我可以正确地进行 API 调用，但是我似乎无法让 Oauth 身份验证请求起作用。

我正在使用 Express.js。我只是想让一个初始的“玩具”示例起作用，所以我刚刚创建了一条单独的路线，我正在直接访问

```
app.get('/twitter_login', function(req, res){
var twitter = require('ntwitter');
var twit = new twitter({
    consumer_key: '<Valid Consumer Key>',
    consumer_secret: '<Valid Consumer Secret'});
var tlog = twit.login(req,"/login_success");
tlog(res,req,null); //Not sure on this at all 
```

现在我收到的错误是

```
DEBUG: TypeError: Parameter 'url' must be a string, not undefined
    at Object.urlParse [as parse] (url.js:96:11)
    at handle (/usr/local/lib/node_modules/ntwitter/lib/twitter.js:341:20)
    at <my app path>/app.js:47:3 
```

我有几个问题

1.  ntwitter 函数返回一个名为“handle”的命名函数。为什么取名？最好的称呼是什么？
2.  为什么登录分两个阶段完成？为什么不只是一个登录功能？
3.  最重要的是：如何让我的用户重定向到 Twitter，以便他们可以登录？

我可能在这里偏离轨道，但请随时提出更好的方法。不过，我真的很想坚持使用 ntwitter。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:52:42.863

想通了。

2 基本问题

1.  对“句柄”的调用使参数乱序

    本来我有

> tlog(res,req,null);

这应该是

> tlog(res,req,null);

2.. 我在 twitter_login 的末尾渲染了一个模板文件，这导致了重定向问题

======

回答原来的问题

**ntwitter 函数返回一个名为“handle”的命名函数。为什么取名？最好的称呼是什么？**

命名可能更容易在调用堆栈中查看

可以这样称呼

twit.login(path.pathname,"/twitter_callback")(req,res)

**为什么登录分两个阶段完成？为什么不只是一个登录功能？**

它们捆绑在一起，但第二个调用允许以更惯用的方式传递必要的信息。

**最重要的是：如何让我的用户重定向到 Twitter，以便他们可以登录？**

我创建了一个 github 存储库，其中包含一个工作示例应用程序。

[https://github.com/drouillard/sample-ntwitter](https://github.com/drouillard/sample-ntwitter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T22:47:09.453

我在使用 ntwitter 时也遇到了麻烦。但是，在查看了 Twitter 的 API 之后，我决定不尝试自己的包装器

因此，我通过执行重定向到 Twitter 的正常过程来使 OAuth 正常工作，然后让我的回调页面获取访问令牌。一旦你有了他们传递给你的令牌和秘密，你就可以像这样使用 ntwitter：

```
var ntwitter = require('ntwitter');
var twit = new ntwitter({
    consumer_key: clientId,
    consumer_secret: secret,
    access_token_key: token,
    access_token_secret: tokenSecret    
})

// now you can do something like:
twit.getUserTimeline({
    include_rts: 1,
    count: 50
}, function(err, json) {
    // ...
}); 
```

希望有帮助。

# iis - IIS 反向代理到 Apache

> ID：11893039
> 
> 赞同：1
> 
> 时间：2012-08-09T22:40:16.917
> 
> 标签：iis, reverse-proxy

我有一个 heckuva 时间让这个工作。我已按照以下位置的说明进行操作：

[http://learn.iis.net/page.aspx/659/reverse-proxy-with-url-rewrite-v2-and-application-request-routing/](http://learn.iis.net/page.aspx/659/reverse-proxy-with-url-rewrite-v2-and-application-request-routing/)

作为一个简单的测试，我正在尝试将对媒体目录（CSS、图像等）中任何内容的请求代理到单独主机上的同一目录。这是配置：

```
<rewrite>
    <rules>
       <rule name="ReverseProxyInboundRule1" stopProcessing="true">
            <match url="^(media/.*)" />
            <conditions>
                 <add input="{CACHE_URL}" pattern="^(https?)://" />
             </conditions>
             <action type="Rewrite" url="{C:1}://mystatichost/{R:1}" />
        </rule>
     </rules>
 </rewrite> 
```

在我的`Default.master`我有一个像这样的图像标签：

```
<img src="/media/img/homepage.jpg" /> 
```

但我不断收到该图像请求的 404 错误。该文件`/media/img/homepage.jpg`肯定存在于`mystatichost`. 我错过了什么/误解了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-29T01:13:14.077

在我看来，你的正则表达式有点奇怪。

而不是`<match url="^(media/.*)" />`，您应该使用`<match url="(media/.*)" />`. 否则你的匹配只会从 URL 字符串的开头开始，这永远不会起作用，因为它总是以`http`.

所以，为了缩短它，试试这个：

```
<rewrite>
  <rules>
   <rule name="ReverseProxyInboundRule1" stopProcessing="true">
        <match url="(media/.*)" />
        <conditions>
             <add input="{CACHE_URL}" pattern="^(https?)://" />
         </conditions>
         <action type="Rewrite" url="{C:1}://mystatichost/{R:1}" />
    </rule>
  </rules>
</rewrite> 
```

如果这不起作用，您是否需要 HTTPS 来处理对 mystatichost 的所有请求？

也许您可以删除该`<conditions>`部分，然后设置`<action type="Rewrite" url="http://mystatichost/{R:1}" />`.

祝你好运！

# heroku - Heroku 无法启动我的应用程序，但 `foreman start` 工作

> ID：11893040
> 
> 赞同：4
> 
> 时间：2012-08-09T22:40:30.843
> 
> 标签：heroku, flask, gunicorn

我正在尝试将一个相当简单的 Flask 应用程序部署到 Heroku 的 cedar 堆栈，但我一直看到以下错误：

```
2012-08-09T22:37:49+00:00 heroku[web.1]: State changed from crashed to starting
2012-08-09T22:37:52+00:00 heroku[web.1]: Starting process with command `gunicorn pytips.app:create_app() -b 0.0.0.0:42152 -w 3`
2012-08-09T22:37:53+00:00 app[web.1]: bash: -c: line 0: syntax error near unexpected token `('
2012-08-09T22:37:53+00:00 app[web.1]: bash: -c: line 0: `gunicorn pytips.app:create_app() -b 0.0.0.0:42152 -w 3' 
```

我有这个作为我的`Procfile`：

```
web: gunicorn pytips.app:create_app() -b 0.0.0.0:$PORT -w 3 
```

当我通过运行在本地测试它时`foreman start`，一切正常。如果 Heroku 在`foreman`本地运行良好，为什么会出现问题？

更新：我也试过用`heroku run`. 这是产生的结果：

```
heroku run --app pytips gunicorn pytips.app:create_app() -b 0.0.0.0:$PORT -w 3 
```

什么都没有给我。

```
heroku run --app pytips 'gunicorn pytips.app:create_app() -b 0.0.0.0:$PORT -w 3' 
```

给我`heroku:108: command not found: -b`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T21:01:18.410

我目前的解决方案是：我转义括号，例如，

```
web: gunicorn pytips.app:create_app\(\) -b 0.0.0.0:$PORT -w 3 
```

虽然这在我的本地机器上完全爆炸，但它似乎在 Heroku 的系统上运行良好。我仍然希望 Heroku 的支持团队能够弄清楚为什么它在一个地方有效，而在另一个地方无效。在那之前，我只会在本地使用未转义的版本进行测试，然后在推送到 Heroku 之前将转义放回原处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:49:43.943

我得到了同样的错误 500s，日志中没有任何内容。

原来 Heroku 不喜欢我的本地 SQLite 数据库。我能够设置免费的 PostgreSQL 数据库并且错误消失了。

我按照本教程进行操作。

[http://blog.y3xz.com/blog/2012/08/16/flask-and-postgresql-on-heroku/](http://blog.y3xz.com/blog/2012/08/16/flask-and-postgresql-on-heroku/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T19:52:36.527

所以第一件事是你的`gunicorn`命令不正确。当您运行 gunicorn 时，您需要将您的应用实例传递给它。因此，例如，如果您的 Flask 应用程序是在`pytips.py`文件中定义的，您可以通过执行以下操作来运行 gunicorn `gunicorn pytips:app -b ...`：

如果你改变它，我猜它会正常工作，因为你的其他东西看起来不错。

# html - IE中的CSS下拉菜单错误

> ID：11893043
> 
> 赞同：0
> 
> 时间：2012-08-09T22:41:04.740
> 
> 标签：html, css, internet-explorer, drop-down-menu

链接到示例图像 (IE9) [imageshack-ie9dropdownerror](http://imageshack.us/photo/my-images/716/cssdropdownieerror.png/)

我正在为一个朋友设计一个网站，但我遇到了一个特定于 Internet Explorer 的下拉菜单错误（肯定是 ie8 和 ie9 - ie7 及以下未测试）。您可以通过[http://test.tjpsconsulting.com](http://test.tjpsconsulting.com)访问该网站并查看源代码（css 和 html） - 主导航菜单和 style.css。

部分菜单下拉，但没有链接（准透明）。

我一直在这里和那里进行更改，但不能完全弄清楚可能导致问题的原因 - 无论是与 IE 相关还是与定位相关等等。也许我已经看得太久了。

不确定我是否应该使用 js 修复程序......如果可能的话宁愿避免。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T22:53:52.963

过去我遇到过类似的问题，这完全取决于您使用的 IE 版本 大多数 web-kit 元素在旧版本的 IE 中往往会出现问题。我使用 html、css 和 javascript 创建了一个模态框，它在 IE 7 或更低版本中不起作用，此修复是 css body 标记中的 css 修复。如果有旧浏览器的修复，只需谷歌:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T05:09:21.147

我想通了：“过滤器”css 属性错误 - 一旦我删除它，问题就解决了。现在我只调用 .gif 图像而不是“过滤器”来创建渐变（并使用“if”语句为 ie 创建类）。我讨厌 Internet Explorer...

# c# - 转换日历

> ID：11893047
> 
> 赞同：0
> 
> 时间：2012-08-09T22:41:27.027
> 
> 标签：c#, winforms

我使用这些代码将公历转换为儒略历，没有问题。

```
private void button1_Click(object sender, EventArgs e)
    {
        JulianCalendar juli = new JulianCalendar();
        DateTime dt = Convert.ToDateTime(textBox1.Text);
        int day = juli.GetDayOfMonth(dt);
        int month = juli.GetMonth(dt);
        int year = juli.GetYear(dt);
        string s = string.Format("{0}/{1}/{2}", month, day, year);
        textBox2.Text = s;
    } 
```

它给了我儒略日期时间，但是当我想再次将其转换为具有确切日期时间的公历时，它将不起作用。我使用以下代码将儒略历转换为公历。有什么问题？

```
 private void button2_Click(object sender, EventArgs e)
    {
        string juli = textBox3.Text;
        string[] parts = juli.Split('/', '-');
        JulianCalendar jul = new JulianCalendar();
        DateTime dta = jul.ToDateTime(Convert.ToInt32(parts[0]), Convert.ToInt32(parts[1]), Convert.ToInt32(parts[2]), 0, 0, 0, 0);
        string sta = dta.ToShortDateString();
        textBox4.Text = sta;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:36:09.543

问题出在参数的顺序上。它应该是（在 button2_Click 事件中）

```
DateTime dta = juli2.ToDateTime(Convert.ToInt32(parts[2]), Convert.ToInt32(parts[0]), Convert.ToInt32(parts[1]), 0, 0, 0, 0); 
```

因为 ToDateTime 方法的签名如下：

```
public virtual System.DateTime ToDateTime(int year, int month, int day, int hour, int minute, int second, int millisecond) 
```

# java - java中数组的循环左移n个位置

> ID：11893053
> 
> 赞同：9
> 
> 时间：2012-08-09T22:42:07.993
> 
> 标签：java, arrays, bit-shift

我正在尝试仅使用单个一维数组将数组循环左移 n 个位置。我可以在两个数组中做到这一点，但我还没有弄清楚如何使用一个来做到这一点。请提出你的建议

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-08-09T20:19:46.993

实际上有一个聪明的算法。我们将用`A`来表示数组，`N`表示数组大小，并`n`表示要移动的位置数。移位后，您希望`i-th`元素移动到该`((i + n) mod N)-th`位置，因此我们可以通过以下映射定义新位置：

```
f(j) := (j + n) mod N  (j = 0,...,N - 1) 
```

该算法背后的总体思路是这样的：我们不想移动元素超过必要的范围，所以理想情况下，我们希望在第一次尝试时简单地将每个元素放置在正确（移动）的位置。假设我们从 position 的元素开始`i`。我们要做的是将 position 的元素移动`i`到 position `f(i)`，但是我们会覆盖那个位置的元素，所以我们需要先将元素保存在 position `f(i)`，然后再执行移位。一旦我们移动了第一个元素，我们需要选择另一个元素来移动。由于我们想节省空间，显而易见的候选者是我们刚刚保存的元素（位于 position 的元素`f(i)`）。像以前一样，我们将元素保存在位置`f(f(i))`然后将我们保存的元素复制到该位置。我们不断重复这个过程（通过位置`i, f(i), f(f(i)), f(f(f(i))), ...`），直到我们到达一个我们已经移动的元素（我们保证会这样做，因为有有限多个位置）。如果我们通过了所有元素，那么我们就完成了，如果没有，那么我们选择另一个元素（还没有移动），比如说在 position `j`，然后重复这个过程（通过`j, f(j), f(f(j)), f(f(f(j))), ...`）。而已。但在我们可以实现这样的算法之前，甚至在我们决定这是否确实是一个好的算法之前，我们需要回答几个问题：

1.  假设我们遍历 position `i, f(i), f(f(i)), ...`。我们如何判断我们到达了一个已经转移的位置？我们需要保存我们通过的每个位置吗？如果我们这样做，那么这意味着我们需要保存一个大小为 N 的数组（以覆盖所有位置），并且我们还需要在每次移动元素时执行查找。这将使算法非常低效。幸运的是，这不是必需的，因为序列`i, f(i), f(f(i)), ...`必须在 position 处环绕自身`i`，所以我们只需要等到到达那个位置。我们可以如下证明这个断言：假设我们遇到的第一个重复元素不是`i`。那么我们必须有 2 个不同的元素，它们在移动时会到达相同的位置 - 矛盾。

2.  假设我们完成了`i, f(i), f(f(i)), ...`，但仍有一些元素保持未移动（我们可以通过计算移动了多少元素来判断）。我们现在如何找到`j`包含这样一个元素的位置？而且，一旦我们完成了第二次迭代（通过`j, f(j), f(f(j)), ...`），我们如何找到`k`具有未移位元素的第三个位置？等等.. 这也可能表明我们需要保存一个数组来说明使用过的\未使用过的元素，并在每次需要查找未使用的元素时执行查找。但是，我们可以再次放松，因为正如我们很快将展示的，所有起始*位置*（我们用`i`和表示）都是相邻的。这意味着，如果我们从 position 开始，我们接下来将 select ，然后`j``k``i``i + 1``i + 2`，等等……</p>

3.  序列`i, f(i), f(f(i)), ...`和（`j, f(j), f(f(j)), ...`哪里不同）可能包含共同的元素吗？如果他们这样做，则意味着该算法是无用的，因为它可能会移动相同的元素两次 - 导致它最终处于错误的位置。那么答案（当然）是它们不能包含共同的元素。我们将说明原因。`i``j`

让我们表示`d := gcd(N, n)`。对于每一个整数：`i = 0,...,d - 1`我们定义以下集合：

```
S(i) := { kd + i | k = 0,...,N/d - 1} 
```

很容易看出这些集合`S(0),...,S(d - 1)`一起覆盖了集合`{0,...,N - 1}`。我们还观察到，当将集合中的元素除以 时`S(i)`，`d`我们会得到余数`i`，而将不同集合中的元素除以`S(j)`会`d`留下不同的余数 ( `j`)。因此，没有两个集合包含一个共同的元素。有了这个，我们已经确定集合`S(0),...,S(d - 1)`形成了一个分区`{0,...,N - 1}`

现在，对于每个`i = 0,...,d - 1`，我们将集合定义`T(i)`为`i, f(i), f(f(i)), ...`。根据定义`f`我们可以写成`T(i)`：

```
T(i) = {(kn + i) mod N | k is an integer} 
```

我们观察到如果`x`是 中的一个元素`T(i)`，那么我们可以写一些`k`：

```
x = (kn + i) mod N = (k(n/d)d + i) mod N 
```

让我们表示`z := k(n/d) mod N/d`，然后乘以`d`，我们有：

```
kn mod N = zd 
```

因此：

```
x = (kn + i) mod N = zd + i 
```

因此，`x`也在`S(i)`. 同样，如果我们从中取一些`y`，`S(i)`我们会观察到一些`k`：

```
y = kd + i 
```

由于`gcd(n/d, N/d) = 1`存在`q`这样的`q(n/d) mod N/d = 1`（模逆），因此我们可以写（乘以`kd`）：

```
kd = kqn mod N 
```

因此：

```
y = kd + i = ((kq)n + i) mod N 
```

因此，`y`也在`T(i)`. 我们得出结论`T(i) = S(i)`。从这个事实我们可以很容易地展示我们之前的断言。首先，因为集合形成了`{0,...,N - 1}`第三个断言的一个分区（没有两个序列包含一个共同的元素）是满足的。其次，通过集合的定义，`S(i)`我们可以将任何一组`d`相邻元素放入其中，`{0,...N - 1}`并且每个元素都将放置在不同的集合中。这满足第二个断言。

**这意味着**我们可以`0, d, 2d, ..., (N/d - 1)d`通过简单地将 position 的元素替换为 position`n mod N`的元素，将position 的元素替换为`0`position`2n mod N`的元素`n mod N`，依此类推……直到我们返回到 position 的元素`0`（我们保证会发生）。这是一个伪代码示例：

```
temp <- A[0]
j <- N - (n mod N)
while j != 0 do
    A[(j + n) mod N] <- A[j];
    j <- (j - n) mod N
A[n mod N] <- temp; 
```

这涵盖了整个集合`S(0)`。为了覆盖其余的集合，即`S(1), … ,S(d-1)`，我们将简单地迭代每个集合，就像我们对第一个集合所做的那样：

```
for i <- 0 to d - 1
    temp <- A[i]
    j <- N - ((n - i) mod N)
    while j != i do
        A[(j + n) mod N] <- A[j];
        j <- (j - n) mod N
    A[(i + n) mod N] <- temp; 
```

请注意，虽然我们有两个嵌套循环，但每个元素只移动一次，并且我们使用`O(1)`空间。Java中的一个实现示例：

```
public static int gcd(int a, int b) {
    while(b != 0) {
        int c = a;
        a = b;
        b = c % a;
    }
    return a;
}

public static void shift_array(int[] A, int n) {
    int N = A.length;
    n %= N;
    if(n < 0)
        n = N + n;
    int d = gcd(N, n);
    for(int i = 0; i < d; i++) {
        int temp = A[i];
        for(int j = i - n + N; j != i; j = (j - n + N) % N)
            A[(j + n) % N] = A[j];
        A[i + n] = temp;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T23:58:24.690

我会一次将其移动 1 个元素，使用单个临时变量来保存元素，同时将元素移动 1 个位置。然后我会重复这个`n`时间来实现`n`转变。

```
public static void main( String[] args ) {
    int[] array = {1,2,3,4,5,6,7,8};
    leftShift( array, 3);
    System.out.println( Arrays.toString( array));
}

public static void leftShift(int[] array, int n) {
    for (int shift = 0; shift < n; shift++) {
        int first = array[0];
        System.arraycopy( array, 1, array, 0, array.length - 1 );
        array[array.length - 1] = first;
    }
} 
```

输出：

```
[4, 5, 6, 7, 8, 1, 2, 3] 
```

不是太低效，因为[`System.arraycopy()`](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)它是高度优化的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-29T11:12:47.170

这是一个非常简单的算法，在 O(n)
**算法中有 O(1) 空间**

*   将数组从 0 反转到 n (numberOfPositions) 个位置
*   将数组从 n+1 反转为数组长度 - 1 个位置
*   将整个数组从 0 反转为 length - 1 个位置

```
 public class ArrayRotator {

 private final int[] target;
 private final int length;

 public ArrayRotator(int[] seed) {
    this.target = seed;
    this.length = seed.length;
 }

 public void rotateInline(int numberOfPositions) {
    reverse(0, numberOfPositions);
    reverse(numberOfPositions + 1, length-1);       
    reverse(0, length-1);
 }

 private void reverse(int start, int end) {
    for (int i = start; i <= (start + end)/2; i++) {
        swap(i, start + end - i);
    }
 }

 private void swap(int first, int second) {
    int temp = this.target[second];
    this.target[second] = this.target[first];
    this.target[first] = temp;
 }
} 
```

例如，假设数组 is`[1,2,3,4]`和`n`is`2`
在**step one**之后，您将`[2,1,3,4]`
在**Step 2**之后结束，您将`[2,1,4,3]`
在**Step 3**之后结束，您将结束`[3,4,1,2]`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T01:30:03.563

我相信`System.arraycopy`实际上只会从一个数组中获取所有数据，然后将其放入另一个相同长度的数组中。

无论如何，思考这个问题是一项非常有趣的任务。我现在唯一能想到的解决方案就是一个一个地把它拉屎。如果不使用另一个数组，它看起来像这样：

```
for(int i = 0; i < shift;i++)
        {
            tmp = array[0];
            for(int j = 0;j<array.length-1;j++)
                array[j]=array[j+1];
            array[array.length-1]=tmp;
        } 
```

对于超过 30 个项目的数组，使用它会更有效：

```
for (int i = 0; i < shift; i++) {
            tmp = array[0];
            System.arraycopy( array, 1, array, 0, array.length - 1 );
            array[array.length - 1] = tmp;
        } 
```

但是对于接近数组大小的大数组和大移位以及短数组和小移位，这种方法赢得了比赛：

```
 int[] array2 = new int[shift];
    for (int i = 0; i < shift; i++)
    {
        array2[i] = array[i];
    }
    System.arraycopy(array, shift, array, 0, array.length - shift);
    for (int i = array.length - shift; i < array.length; i++)
    {
        array[i] = array2[shift + i - array.length];
    } 
```

我已经用一些数组大小和移位测试了以下是结果

```
 int[] array = new int[100000];
    int shift = 99999; 
```

以纳秒为单位：第一种方法：5663109208 第二种方法：4047735536 第三种方法：6085690 所以你真的应该使用第三种方法。希望有帮助

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-10T00:19:51.967

另一种选择是包装您自己的结构，其中包括数组和虚拟零的索引。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-09T23:12:18.040

您可以通过迭代和复制来移动数据，这将是 O(n)。另一种方法是创建一个`List`包装您的数组并将其公开为循环移位的实现。这样做的好处是，当`get`执行或迭代时，实际的移位是延迟完成的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-04-27T05:59:21.757

Java 8 版本：

```
public class Sample {
   public static void main(String[] args) {
     int[] answer = solution(new int[] {1,2,3,4}, 2);
     Arrays.stream(answer).forEach(System.out::print);
   }

   public static int[] solution(int[] A, int K) {
     List<Integer> numbers = 
     IntStream.of(A).boxed().collect(Collectors.toList());
     Collections.rotate(numbers, K);
     return numbers.stream().mapToInt(n -> n).toArray();
  }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-09T23:49:34.320

```
for (int i = 0; i < n; i++)
    array[array.length - n + i] = array[i];
for (int i = 0; i < array.length - n; i++)
    array[i] = array[i + n]; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-01-16T23:54:11.003

查看此 github 链接：

[https://github.com/techpanja/interviewproblems/blob/master/src/arrays/circularshiftintarray/CircularShiftArray.java](https://github.com/techpanja/interviewproblems/blob/master/src/arrays/circularshiftintarray/CircularShiftArray.java)

圆形ShiftToLeftInPlace

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-01-06T23:54:13.350

我知道这是一个旧帖子，但我没有在任何地方看到这个帖子，所以：

*d 是我们想要向左移动的位置。*

```
 int[] array = {1,2,3,4,5,6,7,8};
    int length = array.length;
    int d = 3;
    int[] ans = new int[length];        

    for (int i = 0; i < length; i++){
        ans[i] = array[(i + d)%length];
    }
    System.out.println(Arrays.toString(ans)); 
```

它将输出： [4, 5, 6, 7, 8, 1, 2, 3]

你可以在这里看到代码：http: [//tpcg.io/8cS6GIKI](http://tpcg.io/8cS6GIKI)

**编辑**：没关系......我无法阅读。我刚刚看到 OP 只要求 1 个数组。我的错。我会留下我的答案，以防万一它可以帮助某人。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-02-09T03:51:47.537

下面我实现了一个示例解决方案，将数组左移或右移 n 个元素。

```
class RotateArrayByN {

    public void leftRotate(int arr[], int d, int n)
    {
        for (int i = 0; i < d; i++)
            leftRotatebyOne(arr, n);
    }

    public void rightRotate(int[] arr,int d, int n){
        for(int i=0;i<d;i++)
            rightRotatebyOne(arr,n);
    }

    public void leftRotatebyOne(int arr[], int n)
    {
        int i, temp;
        temp = arr[0];
        for (i = 0; i < n - 1; i++)
            arr[i] = arr[i + 1];
        arr[i] = temp;
    }

    public void rightRotatebyOne(int[] arr,int n){

        int temp=arr[n-1];
        for (int i=n-1;i>0;i--) {
            arr[i] = arr[i - 1];
        }
        arr[0]=temp;

    }

  public void printArray(int arr[], int n)
    {
        for (int i = 0; i < n; i++)
            System.out.print(arr[i] + " ");

        System.out.println();
    }

    public static void main(String[] args)
    {
        RotateArrayByN rotate = new RotateArrayByN();
        int arr[] = { 1, 2, 3, 4, 5, 6, 7 };
        System.out.println("Left Rotate");
        rotate.leftRotate(arr, 2, 7);
        rotate.printArray(arr, 7);

       //System.out.println("Right Rotate");
        //rotate.rightRotate(arr,2,7);
       // rotate.printArray(arr,7);
    }
} 
```

我已经注释掉了正确的转变。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-05-24T20:57:37.303

也许是一个旧帖子..但这是我的解决方案（`A`显然是数组和`K`位置数）。

```
public int[] solution(int[] A, int K){
    int[] result = new int[A.length];

    for (int i = 0; i<A.length; i++){
        result[(i+K)%A.length] = A[i];
    }
    return result;
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-12-21T14:41:06.060

我知道这是一篇旧文章，但是这是 O(n) 中的最佳解决方案：每个元素只移动一次，不需要额外的空间。它与@SomeStrangeUser 提出的解决方案非常相似，但不需要 gcd 计算。

```
public static void shiftArray(int[] A, int k) {
    if (A.length == 0) {
        return;
    }
    k = k % A.length;
    k = (k + A.length) % A.length; // ensure k is positive
    if (k == 0) {
        return;
    }
    int i = 0, i0 = 0;
    int x = A[0];
    for (int u = 0; u < A.length; u++) { // count number of shifted elements
        int j = (i - k + A.length) % A.length; // ensure modulo is positive
        if (j == i0) { // end of a (sub-)cycle, advance to next one
            A[i] = x;
            x = A[i = ++i0];
        } else {
            A[i] = A[j];
            i = j;
        }
    }
} 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2014-11-29T06:53:15.470

这个怎么样？

```
 // Left shift the array in O(n) with O(1) space.

public static void leftShift(int[] array, int n) {
    int temp;
    int len = array.length;
    for (int i = 0; i < n; i++) {
        temp = array[len - n + i];
        array[len - n + i] = array[i];
        array[i] = array[n + i];
        array[n + i] = temp;
    }
} 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2021-06-08T04:36:48.043

```
import java.util.Scanner;

public class ArrayMoveByGivenSize {

    public static void main(String[] args) {
        // TODO Auto-generated method stub

        int[] A = new int[] {100,200,300,400,500,600};
        //movement = 2
        //output {500,600,100,200,300,400}

        System.out.println("Please enter the movement size");
        int s;
        Scanner sc = new Scanner(System.in);
        s= sc.nextInt();
        System.out.println(s);
        int[] X = new int[A.length];
        for (int i=0;i<A.length;i++)
        {
            if((i+s)<A.length)
            {
                X[i+s]=A[i];
            }
            else
            {
                X[(i+s) - A.length]=A[i] ;  
            }

        }
        for(int i =0;i<X.length ; i++)
        System.out.println(X[i]);

    }
} 
```

# c# - 在异步套接字上编写服务器

> ID：11893055
> 
> 赞同：0
> 
> 时间：2012-08-09T22:42:18.347
> 
> 标签：c#, sockets, asynchronous

编写客户端后，我正在尝试使用异步套接字编写服务器。[我在这里](http://msdn.microsoft.com/en-us/library/fx6588te.aspx)找到了服务器实现。

我启动服务器，它会等待连接进入。在 GUI 端，我将有一个按钮，可以将我的服务器连接到客户端。如果没有客户端，我希望在 GUI 上显示一条错误消息，它将等待另一个按钮单击。如果有客户端，我需要它们都在 GUI 中显示“已连接”并开始工作。

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T23:10:55.933

为什么不使用[SignalR](https://github.com/SignalR/SignalR/)库？它使用多种传输协议，包括套接字。

# javascript - Marionette.CompositeView 中 serializeData 和 onRender 的区别

> ID：11893057
> 
> 赞同：3
> 
> 时间：2012-08-09T22:42:47.940
> 
> 标签：javascript, backbone.js, marionette

我正在使用[`Marionette.CompositeView`](https://github.com/derickbailey/backbone.marionette/blob/master/docs/marionette.compositeview.md)并且我想根据这两个示例（1）和（2）来了解 serializeData 和 onRender 之间的区别。

根据文档，在应用模板之前在渲染中调用 serializeData，在应用模板之后在渲染中调用 onRender。

我的问题是：
1）为什么示例（1）有效而（2）无效？
2）如果我重置集合，会`Marionette.CompositeView`重新渲染吗？

请参阅代码中的注释以获取更多详细信息。

* * *

(1)

```
return Marionette.CompositeView.extend({

        initialize: function () {
            this.collection = new MyCollection();
            this.collection.fetch();
        },

        onRender: function () {
            this.collection.length > 0 ? this.$el.show() : this.$el.hide();
           // it returns this.collection.length > 0 
           // differently from serializeData.
        }
}); 
```

* * *

(2)

```
return Marionette.CompositeView.extend({

        initialize: function () {
            this.collection = new MyCollection();
            this.collection.fetch();
        },

        serializeData: function () {
            this.collection.length > 0 ? this.$el.show() : this.$el.hide(); 
           // it returns this.collection.length = 0 
           // even if this.collection.length > 0\. Why?
        }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T10:35:21.043

1) As you said, `onRender` is just a callback function which is called after rendering the view.

`serializeData` must return a valid JSON object as it's said in the [Backbone Marionette documentation](https://github.com/derickbailey/backbone.marionette/blob/master/docs/marionette.itemview.md) :

> If you need custom serialization for your data, you can provide a serializeData method on your view. It must return a valid JSON object, as if you had called .toJSON on a model or collection.

```
Backbone.Marionette.ItemView.extend({
  serializeData: function(){
    return {
      "some attribute": "some value"
    }
  }

}); 
```

2) IMO, the answer is yes. In the [Backbone Marionette documentation](https://github.com/derickbailey/backbone.marionette/blob/master/docs/marionette.collectionview.md), it's said :

> CollectionView: Automatic Rendering
> 
> The collection view binds to the "add", "remove" and "reset" events of the collection that is specified.
> 
> When the collection for the view is "reset", the view will call render on itself and re-render the entire collection.
> 
> When a model is added to the collection, the collection view will render that one model in to the collection of item views.
> 
> When a model is removed from a collection (or destroyed / deleted), the collection view will close and remove that model's item view.

# perl - 如何获取外键而不是对象的值？

> ID：11893059
> 
> 赞同：6
> 
> 时间：2012-08-09T22:42:53.407
> 
> 标签：perl, dbix-class

我有两张桌子，`book`并且`language`；`book` `belongs_to` `language`通过有一`language`列来说明它所使用的语言。该`language`表只是`language`列。

我想做`$book->language`并获取语言字符串，而不从`language`表中获取语言。有没有办法做到这一点？

我怀疑这是关于返回上下文。我应该做某种超载，说：

```
use overload "language_string" => sub {
  my $self = shift;
  return $self->language;
}, fallback => 1; 
```

但在那种情况下，我当然还在学习语言。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T10:41:49.160

一种解决方案是使用与列不同的名称来定义关系，例如`rel_$colname`. 那么 DBIC 生成的访问器方法对于列值和相关对象将是不同的。

如果您不想更改关系名称，您可以随时访问列值`$row->get_column('colname');`

# c# - 针对 Linq 中可空字段的 Where In 子句

> ID：11893063
> 
> 赞同：1
> 
> 时间：2012-08-09T22:43:38.883
> 
> 标签：c#, linq, entity-framework, nullable, contains

如何将 Linq 写入实体以创建类似于 SQL Server 中的 where in 子句？问题是我需要搜索的字段是可为空的 int。

我有以下代码，但它返回“无法创建类型为 'System.Collections.Generic.List`1' 的常量值。在此上下文中仅支持原始类型（'例如 Int32、String 和 Guid'）。 "

```
public IList<WantedInfoView> GetWanted(string idList)
{
    List<int> contactIDList = new List<int>();
    contactIDList = idList.Split(',').Select(n => int.Parse(n)).ToList();

    IEnumerable<WantedInfoView> wantedList = (
       from w in db.Wanteds
       where contactIDList.Contains(w.contact_id)
       select new WantedInfoView
       {
           ...
       }
    );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:13:03.047

请参阅[实体框架的集合值参数？](https://stackoverflow.com/questions/1335732/collection-valued-parameters-with-the-entity-framework)

接受的答案链接到[Tip 8 - How to write 'WHERE IN' style queries using LINQ to Entities](http://blogs.msdn.com/b/alexj/archive/2009/03/26/tip-8-writing-where-in-style-queries-using-linq-to-entities.aspx)，这是您正在寻找的。

[WHERE IN 子句](http://social.msdn.microsoft.com/forums/en-US/adodotnetentityframework/thread/095745fe-dcf0-4142-b684-b7e4a1ab59f0/)线程似乎也在解决这个问题。

长话短说，您不能在 LINQ to Entities 查询中使用集合作为参数。该框架无法从中进行 SQL 查询。有一些解决方法，虽然不是很漂亮。

# c++ - C ++将DWORD分解为字符

> ID：11893065
> 
> 赞同：2
> 
> 时间：2012-08-09T22:43:58.923
> 
> 标签：c++, c, algorithm, memory

我有一个四字节的 DWORD，我需要将其拆分为四个不同的字符。我以为我知道如何做到这一点，但每次都得到奇怪的数字。这是我的代码：

```
 // The color memory
    int32 col = color_mem[i];

    // The four destination characters
    char r, g, b, a;

    // Copy them in advancing by one byte every time
    memcpy(&r, &col, 1);
    memcpy(&g, &col + 1, 1);
    memcpy(&b, &col + 2, 1);
    memcpy(&a, &col + 3, 1); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T22:47:20.720

放弃`memcpy`并使用位操作：

```
r = (col & 0x000000ff);
g = (col & 0x0000ff00) >>  8;
b = (col & 0x00ff0000) >> 16;
a = (col & 0xff000000) >> 24; 
```

`ff`在十六进制数中代表一个字节的所有`1`位。这和`&`- 按位 AND - 将使您不感兴趣的字节 - 在每个位置 - `0`，并保留您感兴趣的位。

从`>>`左移零，将我们想要的字节放在最重要的位置，用于实际分配。8 的移位移位 1 字节的宽度，16 为 2 字节，24 为 3 字节。

从视觉上看`ff`，您可以想象我们正在向左移动字节索引。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T22:50:31.597

当您进行指针运算时，增量或减量的数量乘以所指向的类型的大小。`int32`将指针强制转换为`char`指针，以便`char`在从`col`.

由于不同平台上字节序的差异，这种技术可能很脆弱，所以我建议使用另一个答案中提供的更便携的位掩码操作。

```
// The color memory  
int32 col = color_mem[i];  

// The four destination characters  
char r, g, b, a;  

// Copy them in advancing by one byte every time  
memcpy(&r, (char*)&col, 1);  
memcpy(&g, ((char*)&col) + 1, 1);  
memcpy(&b, ((char*)&col) + 2, 1);  
memcpy(&a, ((char*)&col) + 3, 1); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T22:51:41.480

将 +1 添加到 int32 将使地址上升 4 个字节。

你可以使用`memcpy(&g, reinterpret_cast<char *>(&col)+1, 1)`等等。

更好的方法：

```
int32 col = color_mem[i];

struct splitted4byte
{
    char r;
    char g;
    char b;
    char a;
}

splitted4byte rgb;

memcpy(&rgb, &col, 4); 
```

顺便说一下，您应该关心字节的顺序`col`。我不知道 int32 的哪一部分是哪种颜色。

您应该阅读有关字节序的信息。（谷歌一下，有文档）

当 R 最大值和其他颜色为 0 时，如果它存储为`1111 1111 0000 0000 0000 0000 0000 0000`，我的意思是颜色 RGBA(255,0,0,0) 的整数表示是否等于这个二进制值。它将在内存中反向排序，即`0000 0000 0000 0000 0000 0000 1111 1111`，因此您需要计算它。

您可以使用将网络字节顺序（大端序）转换为主机字节序（小端序或大端序）的网络转换函数。这样您就无需根据机器更改代码。（函数是 ntohl（网络到主机长），还有 htons（主机到网络短）等 2 字节，还有 be64toh() 用于 64 位整数，但该函数仅在 Unix 变体上退出，如果我没记错。）你需要做的就是`int32 col = ntohl(color_mem[i]);`

或者你可以根据这个来制作你的结构顺序，但是这样你的代码就不能在大端上运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T22:50:46.100

因为 col 是 int32 +1 增加了 4 个字节的偏移量

在谷歌上搜索指针算法

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-09T23:16:21.070

每个人都给出了不同的答案，而且都以某种方式正确。有些是特定于字节序的（如按位运算）。其他人不是。为了清楚起见，我可能会这样做：

```
char *bytes = (char*)&color_mem[i];
char r = bytes[0];
char g = bytes[1];
char b = bytes[2];
char a = bytes[3]; 
```

我看不出有任何理由使用`memcpy`. 即使有结构。结构赋值是一种语言特性——你不必复制它。

还没有看到任何关于工会的说法...

```
union Pixel {
    DWORD packed;
    struct Components {
        char r, g, b, a;
    };
    char bytes[4];
};

// You can just specify your image data like this...
Pixel *pixels = (Pixel*)color_mem;

// Reference one pixel for convenience - don't need to reference, you can
// just copy it instead if you want (alternative: Pixel p = pixels[i])
Pixel &p = pixels[i];

char r = p.r;
char g = p.g;
char b = p.b;
char a = p.a;

int32 col = p.packed; 
```

这是字节序中立的：它不依赖于整数的组织。通常这很好，但你仍然需要意识到这一点。

# regex - 简单的 TextWrangler 正则表达式替换

> ID：11893067
> 
> 赞同：2
> 
> 时间：2012-08-09T22:44:02.193
> 
> 标签：regex, grep, textwrangler

我正在使用 textwrangler 并且是正则表达式的新手。我有一堆电子邮件地址，但我只需要删除那些@mydomain.edu 地址。

```
Standard Hall,414,Ashley,Smith,"asmith@mydomain.edu, asmith@otherdomain.com"
Standard Hall,414,Stacy,Smith,"ssmith@mydomain.edu, ssmith@otherdomain.com" 
```

如您所见，每一行都有一个使用`@mydoamin.com`. 我想每次`@mydomain.com`发生时删除整个电子邮件地址，并留下备用电子邮件。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:01:06.977

如果您的地址在每行一个列表中，您可以使用`grep`：

```
grep -v "@mydomain.edu" file.txt 
```

**编辑`awk`：**

```
awk -F, '$5 ~ /@mydomain.edu/ { sub("[^\", ]*@mydomain.edu[, ]*","") }1' file.txt 
```

结果：

```
Standard Hall,414,Ashley,Smith,"asmith@otherdomain.com"
Standard Hall,414,Stacy,Smith,"ssmith@otherdomain.com" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T23:49:58.050

在 TextWrangler 的 Find 中标记 Grep 复选框并将这一行插入到 Find 文本框中：

```
([a-zA-Z0-9\.]*@mydomain.edu(, )?)|((, )?[a-zA-Z0-9\.]*@mydomain.edu) 
```

然后点击*Replace All*。这将删除具有该域的所有电子邮件并留下正确数量的逗号。

# ruby-on-rails - Rails 2.3.8 应用程序中的“未定义方法名称”“RubyInline:String”

> ID：11893073
> 
> 赞同：0
> 
> 时间：2012-08-09T22:44:36.590
> 
> 标签：ruby-on-rails, ruby, hobo

在新的 Linux 安装上运行现有的 Rails 2.3.8 应用程序时，我遇到了一个有趣的问题。我已经安装了与运行它的服务器相同的所有 gem 版本。

首先，我不得不修改 Rakefile 以包含以下行，以停止有关未初始化常量 ActiveSupport::Dependencies::Mutex 的错误 -

```
require 'thread' 
```

我认为这很不寻常，因为服务器上的 gem 版本与我在本地机器上安装的版本相匹配。当然，相同的代码应该功能相同。我觉得我一定遗漏了一些明显的东西。

无论如何，有了这个补丁我得到另一个错误：“未定义的方法名称”“RubyInline：String”

我找到了解决这个问题的解决方案，只需升级到 rails 2.3.12 - 我不热衷于这个想法，因为我想运行与生产服务器上相同版本的 rails 用于测试目的。我确实出于绝望尝试过，但它只是将错误推到了其他地方。

config/environment.rb:12 （以及一些后续行）

```
Rails::Initializer.run do |config|
  config.gem 'hobo'
  config.gem 'prawn'
  config.gem 'image_science'
  config.gem 'geokit'
  config.gem 'redis' 
```

rake db:reset --trace 的输出

```
john@john-tosh:~/Work/source/AndroidServer2$ rake db:reset --trace
(in /home/graham/Work/source/AndroidServer2)
DEPRECATION WARNING: Rake tasks in vendor/plugins/open_flash_chart/tasks, vendor/plugins/prawnto/tasks, vendor/plugins/recaptcha/tasks, and vendor/plugins/ym4r_gm/tasks are deprecated. Use lib/tasks instead. (called from /var/lib/gems/1.8/gems/rails-2.3.8/lib/tasks/rails.rb:10)
** Invoke db:reset (first_time)
** Invoke db:drop (first_time)
** Invoke db:load_config (first_time)
** Invoke rails_env (first_time)
** Execute rails_env
** Execute db:load_config
** Execute db:drop
** Invoke db:setup (first_time)
** Invoke db:create (first_time)
** Invoke db:load_config 
** Execute db:create
** Invoke db:schema:load (first_time)
** Invoke environment (first_time)
** Execute environment
rake aborted!
undefined method `name' for "RubyInline":String
/var/lib/gems/1.8/gems/rails-2.3.8/lib/rails/gem_dependency.rb:275:in `=='
/usr/lib/ruby/vendor_ruby/1.8/rubygems/dependency.rb:217:in `==='
/usr/lib/ruby/vendor_ruby/1.8/rubygems/dependency.rb:217:in `matching_specs'
/usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `find_all'
/usr/lib/ruby/vendor_ruby/1.8/rubygems/specification.rb:410:in `each'
/usr/lib/ruby/vendor_ruby/1.8/rubygems/specification.rb:409:in `each'
/usr/lib/ruby/vendor_ruby/1.8/rubygems/dependency.rb:216:in `find_all'
/usr/lib/ruby/vendor_ruby/1.8/rubygems/dependency.rb:216:in `matching_specs'
/usr/lib/ruby/vendor_ruby/1.8/rubygems/dependency.rb:238:in `to_specs'
/usr/lib/ruby/vendor_ruby/1.8/rubygems/dependency.rb:256:in `to_spec'
/usr/lib/ruby/vendor_ruby/1.8/rubygems.rb:1208:in `gem'
/var/lib/gems/1.8/gems/rails-2.3.8/lib/rails/gem_dependency.rb:73:in `add_load_paths'
/var/lib/gems/1.8/gems/rails-2.3.8/lib/initializer.rb:301:in `add_gem_load_paths'
/var/lib/gems/1.8/gems/rails-2.3.8/lib/initializer.rb:301:in `each'
/var/lib/gems/1.8/gems/rails-2.3.8/lib/initializer.rb:301:in `add_gem_load_paths'
/var/lib/gems/1.8/gems/rails-2.3.8/lib/initializer.rb:132:in `process'
/var/lib/gems/1.8/gems/rails-2.3.8/lib/initializer.rb:113:in `send'
/var/lib/gems/1.8/gems/rails-2.3.8/lib/initializer.rb:113:in `run'
/home/graham/Work/source/AndroidServer2/config/environment.rb:12
/usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
/usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `require'
/var/lib/gems/1.8/gems/activesupport-2.3.8/lib/active_support/dependencies.rb:156:in `require'
/var/lib/gems/1.8/gems/activesupport-2.3.8/lib/active_support/dependencies.rb:521:in `new_constants_in'
/var/lib/gems/1.8/gems/activesupport-2.3.8/lib/active_support/dependencies.rb:156:in `require'
/var/lib/gems/1.8/gems/rails-2.3.8/lib/tasks/misc.rake:4
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:636:in `call'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:636:in `execute'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:631:in `each'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:631:in `execute'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:597:in `invoke_with_call_chain'
/usr/lib/ruby/1.8/monitor.rb:242:in `synchronize'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:590:in `invoke_with_call_chain'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:607:in `invoke_prerequisites'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:604:in `each'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:604:in `invoke_prerequisites'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:596:in `invoke_with_call_chain'
/usr/lib/ruby/1.8/monitor.rb:242:in `synchronize'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:590:in `invoke_with_call_chain'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:607:in `invoke_prerequisites'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:604:in `each'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:604:in `invoke_prerequisites'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:596:in `invoke_with_call_chain'
/usr/lib/ruby/1.8/monitor.rb:242:in `synchronize'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:590:in `invoke_with_call_chain' 
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:607:in `invoke_prerequisites'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:604:in `each'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:604:in `invoke_prerequisites'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:596:in `invoke_with_call_chain'
/usr/lib/ruby/1.8/monitor.rb:242:in `synchronize'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:590:in `invoke_with_call_chain'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:583:in `invoke'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:2051:in `invoke_task'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:2029:in `top_level'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:2029:in `each'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:2029:in `top_level'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:2068:in `standard_exception_handling'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:2023:in `top_level'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:2001:in `run'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:2068:in `standard_exception_handling'
/var/lib/gems/1.8/gems/rake-0.8.7/lib/rake.rb:1998:in `run'
/var/lib/gems/1.8/gems/rake-0.8.7/bin/rake:31
/usr/local/bin/rake:19:in `load'
/usr/local/bin/rake:19 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T23:07:19.997

此问题的解决方案是将 ruby​​gems（gem 命令）从已安装的版本降级到 1.3.5 - 与生产中安装的版本相同。

可能有更好的方法来做到这一点，但我使用了以下命令：

```
gem install -v 1.3.5 rubygems-update
ruby `gem env gemdir`/gems/rubygems-update-1.3.5/setup.rb 
```

我希望这可以帮助那些发现自己处于这种令人沮丧的情况并最终通过谷歌来到这里的人。

我在这里找到了安装特定版本 ruby​​gems 的命令：将 ruby​​gems[更新到 mac 上的特定版本](https://stackoverflow.com/questions/5393509/updating-rubygems-to-specific-version-on-mac)

# c++ - AntTweakBar 导致图形驱动程序崩溃

> ID：11893074
> 
> 赞同：1
> 
> 时间：2012-08-09T22:44:43.000
> 
> 标签：c++, user-interface, directx

我知道这是一个 AntTweakBar 特定的问题，但我只是在这里问它，因为他们的网站上没有专门的 AntTweakBar 论坛。我想知道是否有人遇到过类似的问题，看看在我开始从示例中区分文件几个小时之前是否有快速修复。我正在使用 Visual Studio 2008 中的 Microsoft Compiler v9.0 在 Windows 7 上的 DirectX 11 中编写游戏。

```
I have followed all of the instructions in integrating AntTweakBar into my 
DirectX 11 application, however a problem occurs when my swap chain presents the
back buffer, the entire application will crash and subsequently my graphics 
driver will crash (a dialog pops up in the system tray saying that the video 
driver crashed). 
```

我做过的事情清单：

*   我已按照[此处](http://www.antisphere.com/Wiki/tools%3aanttweakbar%3adownload)的所有说明进行操作。
*   我在启动时调用所有正确的初始化函数，在每一帧上调用正确的 TwDraw() 函数，并在退出时调用 TwTerminate() 函数。
*   我已设置我的包含和库路径以正确指向 AntTweakBar 框架。
*   我已将 AntTweakBar.dll 放在与我的可执行文件相同的目录中。
*   我在 Visual Studio 2008 的链接器设置中添加了 AntTweakBar.lib。

然而，在这一切之后我仍然遇到图形驱动程序崩溃......：-/

我可以在 YouTube 上发布一段详细说明崩溃的视频，如有必要，我还可以发布我的解决方案，让 AntTweakBar 在我的框架中运行非常重要。如果有人也愿意帮助我，我也愿意加入 Skype（Skype：b.triana）。

感谢您的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:12:06.353

在我看来，AntTweakBar 是早期的图形产品，可以更好地与 OPENGL 配合使用，嗯，是的，它也可以与 DX 配合使用，我认为它也可以与早期版本的 DX 配合使用，就像 DX9 一样......，我不确定人们是否仍在更新 anttweakbar 以支持新一代 API，如果不支持，那么您就有问题了。我假设您确实遵循了这些步骤。

第二件事是人们在 DX 世界中不需要 anttweakbar，DirectX 提供了与自身捆绑的 DXUT，提供了类似的简洁 UI 提示，我建议你看一下。

# cakephp - 使用 cakephp 从初始数组列表中找到多个 id 但不遵守顺序

> ID：11893075
> 
> 赞同：0
> 
> 时间：2012-08-09T22:44:44.663
> 
> 标签：cakephp, cakephp-1.3

我有一个收藏模型链接到我的用户模型。他与 HasMany 的关系已完成。所以我可以像这样从任何用户那里检索所有收藏夹。

```
[User] => Array
    (
        [id] => 60
        [username] => username
        [email] => xxxxxx@gmail.com
    )
[Favorite] => Array
    (
        [0] => Array
            (
                [id] => 7
                [book_id] => 15
                [user_id] => 60
                [position] => 1
                [created] => 2012-08-08 04:08:54
            )

        [1] => Array
            (
                [id] => 6
                [book_id] => 17
                [user_id] => 60
                [position] => 1
                [created] => 2012-07-26 04:08:32
            )

    ) 
```

但是这个结果并没有向我显示所有 Book 数据和相关对象。所以 ii 决定用 find('all') 找到它们，给出 id 列表 ([15,16 ....])。唯一的问题是它没有链接到我在 Favorite.created DESC 上的订单。它以另一个顺序检索我的书籍项目。

我的查询实际上看起来像：

```
 $result = $this->User->findById($id);
    $conditions = array('Book.id' => Set::extract($result, 'Favorite.{n}.book_id'));
    $favorites = $this->Book->find('all', array('conditions' => $conditions)); 
```

知道如何改变我的模型关系吗？还是我在 cakephp 中的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T02:35:40.793

您需要在您的图书模型和您的收藏模型之间创建一个联接。在您的情况下，您可以使用 BindModel 创建联接。在我的示例中，我使用了“hasOne”，因为 Cakephp 不使用 hasMany 进行连接，仅使用 hasOne 和 BelongsTo。

```
 $this->Book->bindModel(array('hasOne' => array(
                                    'Favorite' => array(
                                        'className' => 'Favorite'))));
    $id = $this->Auth->user('id');
    $data = $this->Book->find('all', array(
            'conditions' => array('Favorite.user_id' => $id),
            'order' => array('Favorite.created' => 'DESC'))); 
```

就这样。

# php - 如何使用 SQL 为跨应用程序请求实现 Matlab 和 WAMP？

> ID：11893076
> 
> 赞同：0
> 
> 时间：2012-08-09T22:45:17.237
> 
> 标签：php, matlab, batch-file, wamp

这里暗示了两台服务器：一台 SQL 服务器，一台 Windows 服务器（托管 wamp 服务器和 matlab）

我的目的：

1.  将参数传递给 matlab 服务器（ Apache->Batch ）

    1.  调用带有参数的网页会触发带有这些参数的批处理脚本。（带 exec 的 PHP、Apache）
    2.  批处理脚本使用这些参数启动 matlab。
2.  Matlab 流程（Batch->Matlab(<-SQL)）

    1.  *将数据从 SQL 服务器检索到 matlab 服务器。*
    2.  处理机器学习算法。

问题：

当网络服务器调用调用matlab作业的批处理文件时，matlab无法从SQL服务器检索数据，网页永远等待进程结束。

当我通过 windows cmd 启动批处理文件时，SQL 语句在 matlab 中运行良好。

我试过“set_time_limit(0);” 在 php 脚本中（没有时间限制），因为 matlab 脚本需要一些时间。不工作。

真正帮助我的是什么：

*   找到一种启动 Wamp/Apache 然后使用其他权限/用户启动 Matlab 的方法
*   从服务器启动时，找到一种检索 matlab 错误并将其存储到文件中的方法。
*   任何指针...

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:14:12.577

我已经想通了。php实际上很好。唯一的问题是 ODBC 链接。

*   我必须为**System DSN**建立一个 ODBC 链接。
*   然后将 wamp 作为机器的本地服务（SYSTEM）。
*   最后，我必须确保 Matlab 使用此链接并使用正确的凭据连接到 SQL 数据库。

# c# - 继承时，是否会包含require https？

> ID：11893082
> 
> 赞同：2
> 
> 时间：2012-08-09T22:45:56.867
> 
> 标签：c#, asp.net-mvc-3, https

定义：

```
#if !DEBUG
        [RequireHttps]
#endif
[Authorize(Roles="Admin")]
public class AdminAuthorizeController : Controller { } 
```

用过的：

```
public class GlobalCrudController : AdminAuthorizeController 
```

这会确保在不处于调试模式时`GlobalCrudController`将具有`[RequireHttps]`标记吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T22:50:28.367

是的，有这个[参数](http://msdn.microsoft.com/en-us/library/system.attributeusageattribute.inherited.aspx)。在这种情况下，属性在 C# 中被继承。像您使用的那样的条件编译语句非常简单。如果语句为真，它将包含代码，否则不会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T22:52:08.407

是的，因为这个属性已经应用于 RequireHttpsAttribute：

```
[AttributeUsage(AttributeTargets.Class, Inherited=true)] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T22:54:29.440

是的，[RequireHttps](http://msdn.microsoft.com/en-us/library/system.web.mvc.requirehttpsattribute.aspx)属性具有[继承属性](http://msdn.microsoft.com/en-us/library/system.attributeusageattribute.inherited.aspx)“true”。

您的情况不影响继承。

但是您可以编写自己的属性来避免这种继承，就像在这个例子中一样 - [https://stackoverflow.com/a/747208/775779](https://stackoverflow.com/a/747208/775779)

# javascript - 将普通日期转换为 unix 时间戳

> ID：11893083
> 
> 赞同：162
> 
> 时间：2012-08-09T22:46:11.387
> 
> 标签：javascript, jquery, date, datetime, unix-timestamp

如何`2012.08.10`在 javascript 中将普通日期转换为 unix 时间戳？

小提琴： http: [//jsfiddle.net/J2pWj/](http://jsfiddle.net/J2pWj/)

我在这里看到了很多将其转换为 PHP、Ruby 等的帖子......但我需要在 JS 中执行此操作。

* * *

## 回答 #1

> 赞同：309
> 
> 时间：2012-08-09T22:53:01.513

```
Math.floor(new Date('2012.08.10').getTime() / 1000) 
```

检查[JavaScript 日期文档](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date)。

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2015-02-23T21:23:45.693

```
parseInt((new Date('2012.08.10').getTime() / 1000).toFixed(0)) 
```

`toFixed(0)`在除以 1000 以将毫秒转换为秒时，添加 以删除任何小数是很重要的。

该`.getTime()`函数以毫秒为单位返回时间戳，但真正的 unix 时间戳始终以秒为单位。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2017-06-19T15:19:37.510

```
var d = '2016-01-01T00:00:00.000Z';
console.log(new Date(d).valueOf()); // returns the number of milliseconds since the epoch
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-02-10T01:12:25.577

您应该查看 moment.js api，它非常易于使用并且具有许多内置功能。

我认为对于您的问题，您可以使用以下内容：

```
var unixTimestamp = moment('2012.08.10', 'YYYY.MM.DD').unix(); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-07-20T12:46:28.160

```
var date = new Date('2012.08.10');
var unixTimeStamp = Math.floor(date.getTime() / 1000); 
```

在这种情况下，重要的是只返回一个整数（所以简单的除法不会做），并且只返回实际经过的秒数（这就是这段代码使用`Math.floor()`而不是的原因`Math.round()`）。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-09-04T00:49:39.383

您可以简单地使用一元 + 运算符

`(+new Date('2012.08.10')/1000).toFixed(0);`

[http://xkr.us/articles/javascript/unary-add/](http://xkr.us/articles/javascript/unary-add/) - 查看日期。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2018-07-04T18:33:54.523

您可以使用 Date.parse() 方法来做到这一点。

```
Date.parse($("#yourCustomDate).val()) 
```

Date.parse("03.03.2016") 输出-> 1456959600000

Date.parse("2015-12-12") 输出-> 1449878400000

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2012-08-09T22:50:42.267

您可以使用**Date.parse()**，但它接受的输入格式取决于实现。但是，如果您可以将日期转换为**ISO 格式 (YYYY-MM-DD)**，那么大多数实现都应该理解它。

请参阅[为什么 Date.parse 给出不正确的结果？](https://stackoverflow.com/questions/2587345/javascript-date-parse).

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-08-09T22:56:06.413

```
var datestr = '2012.08.10';
var timestamp = (new Date(datestr.split(".").join("-")).getTime())/1000; 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-09-26T00:22:55.870

在将时间戳与来自 PHP 的时间戳进行比较后，以上都不适用于我的时区。下面的代码给了我与 PHP 相同的结果，这对我正在做的项目来说是最重要的。

```
function getTimeStamp(input) {
    var parts = input.trim().split(' ');
    var date = parts[0].split('-');
	var time = (parts[1] ? parts[1] : '00:00:00').split(':');

	// NOTE:: Month: 0 = January - 11 = December.
	var d = new Date(date[0],date[1]-1,date[2],time[0],time[1],time[2]);
	return d.getTime() / 1000;
}

// USAGE::
var start = getTimeStamp('2017-08-10');
var end = getTimeStamp('2017-08-10 23:59:59');

console.log(start + ' - ' + end);
```

我在 NodeJS 上使用它，我们有时区“澳大利亚/悉尼”。所以，我不得不在 .env 文件中添加这个：

```
TZ = 'Australia/Sydney' 
```

以上等价于：

```
process.env.TZ = 'Australia/Sydney' 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-04-01T14:39:29.503

将时间戳转换为 unix 时间戳。

`const date = 1513787412; const unixDate = new Date(date * 1000);// Dec 20 2020 (object)`

获取转换后的时间戳 `const TimeStamp = new Date(date*1000).getTime(); //1513787412000`

# ios - iOS：如何将数据传递给 applicationDidFinishLaunching：？

> ID：11893087
> 
> 赞同：0
> 
> 时间：2012-08-09T22:46:20.607
> 
> 标签：ios, xcode, tableview

我的 XMLAppDelegate.m 文件中有以下代码：

```
- (void)applicationDidFinishLaunching:(UIApplication *)application {
    [self.window makeKeyAndVisible];

    self.products = [NSMutableArray array];
    XMLViewController *viewController = [[XMLViewController alloc] init];
    viewController.entries = self.products; // 2\. Here my Array is EMPTY. Why?

    NSURLRequest *urlRequest = [NSURLRequest requestWithURL:[NSURL URLWithString:productData]];
    self.XMLConnection = [[NSURLConnection alloc] initWithRequest:urlRequest delegate:self];

    NSAssert(self.XMLConnection != nil, @"Failure to create URL connection.");

    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
}

- (void)handleLoadedXML:(NSArray *)loadedData {
    [self.products addObjectsFromArray:loadedData]; // 1\. here I get my Data (works fine)

    XMLViewController *viewController = [[XMLViewController alloc] init];
    [viewController.tableView reloadData];
} 
```

我标记了问题。是否有可能将加载的数据（loadedData）传递给 applicationDidFinishLaunching:？

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:51:12.870

你的`handleLoadedXML`电话在哪里？如果你想将它传递给`applicationDidFinishLaunching`你可以只`handleLoadedXML`返回那个数组，然后你可以在`applicationDidFinishLaunching`.

**编辑：**

这样想：

你首先有这个：

```
- (void)applicationDidFinishLaunching:(UIApplication *)application {
    [self.window makeKeyAndVisible];

    self.products = [NSMutableArray array];
    XMLViewController *viewController = [[XMLViewController alloc] init];
    viewController.entries = self.products; // 2\. Here my Array is EMPTY. Why?

    NSURLRequest *urlRequest = [NSURLRequest requestWithURL:[NSURL URLWithString:productData]];
    self.XMLConnection = [[NSURLConnection alloc] initWithRequest:urlRequest delegate:self];

    NSAssert(self.XMLConnection != nil, @"Failure to create URL connection.");

    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
} 
```

请注意，您`self.products`尚未在此处进行设置。它只是分配的。

在您的应用程序完成启动后，您将拥有：

```
// say you have something like this
- (NSArray *)didFinishParsing {
    return someArray;
} 
```

这个方法在某处被调用，然后它调用下面的方法来设置你的`self.products`. 直到现在你`self.products`的人口。

```
- (void)handleLoadedXML:(NSArray *)loadedData {
    [self.products addObjectsFromArray:loadedData]; // 1\. here I get my Data (works fine)

    XMLViewController *viewController = [[XMLViewController alloc] init];
    [viewController.tableView reloadData];
} 
```

所以如果要`self.products`填充进去`applicationDidFinishLaunching`，就需要调用里面生成数组的方法`applicationDidFinishLaunching`，比如说`didFinishParsing`，就可以`self.products = [self didFinishParsing];`了，然后就设置好了。

# sql - oracle中select * vs select colname的性能

> ID：11893096
> 
> 赞同：4
> 
> 时间：2012-08-09T22:47:14.637
> 
> 标签：sql, oracle

为什么性能`select * from table`不如`select col_1,col_2 from table`？据我了解，占用时间的是行的定位，而不是返回多少列。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-09T23:10:05.880

选择不必要的列可能会导致查询计划更改，从而对性能产生巨大影响。例如，如果有一个索引，`col_1, col2`但表中还有其他列，则`select *`查询必须执行全表扫描，而`select col_1, col_2`查询可以简单地扫描可能要小得多的索引，因此成本要低得多询问。如果您开始处理涉及多个表或涉及针对视图的查询的查询，选择列的子集有时还可以通过允许 Oracle 消除不必要的连接或函数评估来更改查询计划。现在，公平地说，查询计划会根据选择的列而改变并不是特别常见，但是当它发生时，这种改变通常是显着的。

如果您从数据库外部的应用程序发出 SQL 语句，选择其他列会强制 Oracle 通过网络发送其他数据，因此您的应用程序将花费更多时间等待网络 I/O 发送它不感兴趣的数据。这可能非常低效，特别是如果您的应用程序曾经部署在 WAN 上。

选择不必要的列还可以强制 Oracle 在不更改计划的情况下执行额外的 I/O。例如，如果表中您不需要的列之一是`LOB`，Oracle 将不得不做额外的工作来获取该`LOB`数据。如果数据存储在磁盘上的链接块中，但您感兴趣的列恰好位于第一行片段中，则 Oracle 不必为指定列子集的查询获取额外的行片段。`select *`另一方面，执行 a 的查询必须获取每一行片段。

当然，那是在考虑维护方面之前。如果您在 PL/SQL 之外编写应用程序，则执行此`SELECT *`操作意味着当将来有人向表中添加新列时您的代码将中断，或者您的应用程序必须在运行时动态确定正在运行的列集返回以自动适应新列。虽然这当然是可能的，但它可能会导致代码更复杂，因此更难以调试和维护。如果您正在编写 PL/SQL 并将数据提取到`%ROWTYPE`变量中，那么`SELECT *`在生产代码中执行代码是完全合理的；在其他语言中，如果您执行`SELECT *`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T22:53:41.717

当您执行 SELECT * 时，存在从表的数据字典中查找定义的问题。

当您需要的唯一列是 col_1 和 col_2 时，还有一个问题是数据库做的工作比必要的多。对于大型表来说，这尤其是一个问题。

并且存在网络带宽被大于所需数据集不必要地吞噬的问题。

执行 SELECT * 不是最佳做法。它还使嵌入式 SQL 代码更难阅读。

# python - 我在将文本文件解析为字典时遇到问题

> ID：11893097
> 
> 赞同：1
> 
> 时间：2012-08-09T22:47:18.070
> 
> 标签：python

我有一个文本文件，我想将它加载到 Python 中的字典中。

文本看起来像这样，制表符分隔：

> 表格剂量参考药物药物名称activeingred INJECTABLE; 注射液 20,000 UNITS/ML LIQUAEMIN SODIUM 肝素钠注射液；注射液 40,000 UNITS/ML 肝素钠肝素钠注射液；注射液 5,000 UNITS/ML LIQUAEMIN SODIUM 肝素钠

现在我的代码看起来像这样，但它不起作用（列表索引超出范围，并且没有推送到字典中）。我不知道我哪里错了，不是程序员。谢谢你的帮助。

```
import sys

def load_medications(filename):
    meds_dict = {}
    f = open(filename)
    l = " "
    # print f.read()
    for line in f:
        fields = l.split("\t")
        ApplNo = fields[0]
        ProductNo = fields[1]
        Form = fields[2]
        Dosage = fields[3]
        ProductMktStatus = fields[4]
        TECode = fields[5]
        ReferenceDrug = fields[6]
            DrugName = fields[7]
        ActiveIngred = fields[8]

        meds = {
                "ApplNo": ApplNo,   
                "ProductNo": ProductNo, 
                "Form": Form,
                "Dosage": Dosage,   
                "ProductMktStatus": ProductMktStatus,
                "TECode": TECode,
                "ReferenceDrug": ReferenceDrug, 
                "DrugName": DrugName,
                "ActiveIngred": ActiveIngred
            }       
        meds_dict[DrugName] = meds
    f.close()
    return meds_dict

def main():
    x = load_medications("druglist.txt")
    print x

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T22:50:10.067

尝试`line.split`而不是`l.split`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T22:55:22.687

您可能会更轻松[地使用标准库中的 CSV 模块](http://docs.python.org/library/csv.html)解析这些数据- 如果您使用制表符作为分隔符和`;`换行符来安装它，那么解析您发布的文件应该没有问题。

使用[DictReader](http://docs.python.org/library/csv.html#csv.DictReader)还可以更轻松地阅读您的行（您可以将事物称为`line['ApplNo']`而不是`line[0]`）。

不幸的是，它看起来不像您文件中的标题映射到您想要在代码中调用它们的内容 - 因此您需要根据字典中的内容自己分配字段的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T22:58:24.033

您应该[`csv.DictReader`](http://docs.python.org/library/csv.html#csv.DictReader)对此进行研究，假设您的文件在开头有一个正确的标题行，您应该能够像这样简单地创建字典：

```
def load_medications(filename):
    reader = csv.DictReader(open(filename), delimiter='\t')
    meds = {}
    for row in reader:
        meds[row['DrugName']] = row
    return meds 
```

如果您的文件没有标题行，您可以将字段名称传递给`DictReader`初始化程序：

```
fields = ["ApplNo", "ProductNo", "Form", "Dosage", "ProductMktStatus"
          "TECode", "ReferenceDrug", "DrugName", "ActiveIngred"]
reader = csv.DictReader(open(filename), delimiter='\t', fieldnames=fields) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T22:51:35.767

我认为您高估了文件的列数。在哪里`ApplNo`，`ProductNo`？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T22:52:03.930

你居然分裂了`l`，并没有`line`。你要：

```
def load_medications(filename):
    meds_dict = {}
    with open(filename) as f: # Ensure that the file gets closed
        for line in f:
            fields = line.split("\t") # line, not l
            keys = ["ApplNo", "ProductNo", "Form", "Dosage", "ProductMktStatus",
                    "TECode", "ReferenceDrug", "DrugName", "ActiveIngred",]

            if len(fields) != len(keys):
                raise ValueError("Malformed input line " + repr(line))

            meds = dict(zip(keys, fields))
            meds_dict[meds["DrugName"]] = meds
    return meds_dict 
```

有关其工作原理的详细信息，请继续阅读[`zip`](http://docs.python.org/library/functions.html#zip)和[`dict`](http://docs.python.org/library/stdtypes.html#typesmapping)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-09T23:05:51.517

看起来您的代码假设特定药物有 9 个属性。您发布的示例文本文件，但是只有 5 个属性。当您调用 时`fields = l.split("\t")`，将返回一个只有 5 个元素的数组，因为“druglist.txt”中只有 5 个元素。因此，如果您`fields`使用大于或等于 5 的值进行索引，即`fields[8]`，您将获得“索引超出范围”异常。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-10T02:06:19.980

既然您的字段名称都是有效的 Python 标识符，为什么不将您的数据读入 namedtuples 而不是 dicts？

```
data = """Form Dosage ReferenceDrug drugname activeingred INJECTABLE; INJECTION 20,000 UNITS/ML LIQUAEMIN   SODIUM HEPARIN  SODIUM  INJECTABLE; INJECTION   40,000 UNITS/ML LIQUAEMIN   SODIUM HEPARIN  SODIUM  INJECTABLE; INJECTION   5,000 UNITS/ML  LIQUAEMIN   SODIUM HEPARIN  SODIUM  INJECTABLE""".split('; ')

from collections import namedtuple

# define class DrugData as a namedtuple, using the headers from data[0]
DrugData = namedtuple("DrugData", data[0])

# use a list comprehension to create a DrugData for each data line
druglist = [DrugData(*line.split('\t')) for line in data[1:]]

# access each tuple in druglist, using attribute access to individual fields
for d in druglist:
    print "%s | %s | %s" % (d.ReferenceDrug, d.Form, d.Dosage) 
```

印刷：

```
LIQUAEMIN | INJECTION | 20,000 UNITS/ML
LIQUAEMIN | INJECTION | 40,000 UNITS/ML
LIQUAEMIN | INJECTION | 5,000 UNITS/ML 
```

编辑：

回顾您最初的问题，您似乎想要创建所有这些条目的单个字典，以`drugname`. 不幸的是， dict 键必须是唯一的，在您的示例中，所有 3 个条目都具有相同的`drugname`. 您可能必须组合 2 个或更多字段才能为处理所有这些值的 dict 组成真正唯一的键，例如`(drugname, Dosage)`.

或者，稍微更改您的设计，使每个都`drugname`指向匹配值*列表*。最简单的方法是使用 defaultdict 而不是 dict，以便使用空列表自动初始化新条目。在您的代码中，您将添加一个导入语句：

```
from collections import defaultdict 
```

并将 meds_dict 的声明更改为：

```
meds_dict = defaultdict(list) 
```

这意味着任何尚未看到的新键都将使用作为 defaultdict 的参数提供的函数/类进行初始化，在这种情况下为`list`.

然后将新条目添加到 meds_dict，而不是使用“=”进行分配，您将附加到所有匹配药物/剂量的列表中：

```
meds_dict[DrugName].append(meds) 
```

现在，对于任何 DrugName，您将获得匹配的 Form/Dosage/etc 的列表。记录。

# php - Zend Framework 将变量从控制器传递给所有视图到 $this->layout->content() 之外的任何内容

> ID：11893098
> 
> 赞同：1
> 
> 时间：2012-08-09T22:47:19.190
> 
> 标签：php, zend-framework, variables

好的，这个主题没有意义，所以我会在这里尝试更好地描述它。

Zend Frame 工作在这里使用。而且我遇到了将变量传递给我的视图的问题，以及包含在构成模板的“top.phtml”中的视图。我想要做的是实现一个面包屑概念。面包屑文件包含在内容视图文件之前的 top.phtml 中。因此，就面包屑文件而言，没有定义面包屑变量。

我可以在控制器视图中打印我的面包屑设置数组，没问题，所以它正在工作我知道很多，只是在该视图之上的任何东西，特别是在事物的顺序中都无法获得变量。所以我想我想要回答的是有没有一种方法可以将变量传递给概念上类似的整体方案

```
$this->view->variable_name = blah; 
```

像top.phtml这样高的东西在哪里可以拿来使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T23:03:17.433

您可能正在寻找[占位符](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.placeholder)。

例子：

从控制器设置占位符值：

```
$this->view->placeholder('some_placeholder_name')->set('blah'); 
```

从视图设置占位符值

```
$this->placeholder('some_placeholder_name')->set('blah'); 
```

*在视图脚本或*布局中检索占位符值：

```
$value = $this->placeholder('some_placeholder_name'); 
```

占位符内容在应用程序执行结束时呈现，因此在您的控制器中设置的值应该在您的顶级`top.phtml`视图脚本中可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T22:56:45.073

我认为这会起作用：

```
$this->layout()->breadcrumbs = ... 
```

然后`$this->layout()->breadcrumbs`在你的 top.phtml 中打印。

*   [Zend 布局](http://framework.zend.com/manual/en/zend.layout.quickstart.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T23:08:46.493

在花了***几个小时***试图开始`placeholder()`工作之后`partialLoop()`，我终于放弃并破解了一个将 vars 传递给部分的修复程序：

```
$vars = (array) $this->getVars();
foreach ($this->rows as $row) {
    $partialVars = array(
        'row' => $row,
        'vars' => $vars,
    );
    echo $this->partial('row.phtml', $partialVars);
} 
```

丑陋，但它的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T23:44:55.943

为每个人+1给我一个线索，但是以上都没有对我有利。然而，在他们所有人之间，他们引导我找到我的答案，即

`Zend_Registry`

在我的控制器中，我构建了我的数组并将其传递给 Zend_Registry

```
 $breadArray = array(
        array("icon"=>"i_robot", "href"=>"systems/"),
        array("href"=>"metrics","text"=>"Metrics")
    );
    Zend_Registry::set('breaded_crumbs', $breadArray); 
```

然后在我使用的内容和视图之前加载的我的 breadcrumb.phtml

```
print_r(Zend_Registry::get('breaded_crumbs')); 
```

看看它是否正常工作，它给了我数组，所以我对于将来希望在视图本身之外扩展变量的人来说，注册表似乎是要走的路。我尝试了占位符和布局，两者都给了我关于不是某物的错误，当我让它们部分工作时，我没有得到我所期望的。

# javascript - JavaScript 宏记录器

> ID：11893101
> 
> 赞同：4
> 
> 时间：2012-08-09T22:47:44.897
> 
> 标签：javascript, jquery, macros

我正在构建一个 Web 应用程序，我想包含一个宏记录器，就像这里演示的那样：http: [//blog.metawrap.com/2007/06/22/javascript-macro-recorder/](http://blog.metawrap.com/2007/06/22/javascript-macro-recorder/)

这个宏记录器的问题是它不再被维护，并且似乎在较新的浏览器（或者，至少在 Chrome 中）中出现故障。有没有可以推荐的基于 JavaScript/jQuery 的宏记录器。

**注意：**我不是指与 [本文](https://stackoverflow.com/questions/193536/how-can-i-simulate-macros-in-javascript)中引用的“Lisp 样式”宏相关的任何内容。我的意思是一个实际的宏记录器，它将捕获和记录鼠标和键盘事件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-04T14:36:08.547

我还没有找到任何用于宏录制的库，但是可以通过[捕获键盘和鼠标事件](https://stackoverflow.com/questions/25695913/capture-all-the-events-javascript?lq=1)或[侦听](https://stackoverflow.com/questions/27321672/listen-for-all-events-in-javascript)页面上的事件来录制宏。我发现了几个用于记录键盘和鼠标操作的 JavaScript 库，因此它们可能对宏记录有用：

*   [evtrack](https://github.com/luileito/evtrack)是一个事件跟踪库，包括键盘和鼠标跟踪。
*   [musjs](https://github.com/ineventapp/musjs)跟踪鼠标移动。

[甚至可以通过模拟页面上的点击](https://stackoverflow.com/questions/2705583/how-to-simulate-a-click-with-javascript)和[按键](https://stackoverflow.com/questions/596481/is-it-possible-to-simulate-key-press-events-programmatically)来“回放”录制的宏。要在多个浏览器选项卡上录制宏，可能需要[在选项卡之间发送消息](https://stackoverflow.com/questions/28230845/communication-between-tabs-or-windows)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-19T07:08:50.487

以下开源记录鼠标移动： [https ://github.com/danielwix/wix-client-recorder](https://github.com/danielwix/wix-client-recorder)

这是一个完全客户端的项目。

# java - 使用 AuthenticatingSMTPClient 和 SSL？

> ID：11893102
> 
> 赞同：2
> 
> 时间：2012-08-09T22:47:46.650
> 
> 标签：java, authentication, apache-commons, apache-commons-net, smtps

我需要使用 SSL (SMTPS) 和身份验证发送电子邮件。然而，在 apache Commons Net 中似乎有 AuthenticatingSMTPClient（没有 SSL，虽然它扩展了 SMTPSClient？）或 SMTPSClient（没有身份验证？），我需要两者的组合（SSL + 身份验证）。任何人都知道我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-06-12T19:00:34.730

我知道现在回复这个为时已晚，但为了其他人的未来参考，`AuthenticatingSMTPClient`确实提供`ssl + authentication`，因为它正在扩展`SMTPSClient.`下面是示例代码，必须在我用数字（例如`//1`）注释的地方进行修改。

### 代码：

```
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.io.PrintWriter;
import java.io.Writer;
import java.security.InvalidKeyException;
import java.security.NoSuchAlgorithmException;
import java.security.spec.InvalidKeySpecException;
import java.util.ArrayList;
import java.util.List;

import org.apache.commons.net.PrintCommandListener;
import org.apache.commons.net.io.Util;
import org.apache.commons.net.smtp.AuthenticatingSMTPClient;
import org.apache.commons.net.smtp.AuthenticatingSMTPClient.AUTH_METHOD;
import org.apache.commons.net.smtp.SMTPReply;
import org.apache.commons.net.smtp.SimpleSMTPHeader;

public final class SMTPMail
{
    public static void main(String[] args) throws InvalidKeyException, NoSuchAlgorithmException, InvalidKeySpecException
    {
        String sender, recipient, subject, filename, server;
        List<String> ccList = new ArrayList<String>();
        FileReader fileReader = null;
        Writer writer;
        SimpleSMTPHeader header;
        AuthenticatingSMTPClient client;

        server = "<smtp server>"; // 1
        try
        {
            sender = "<your user name>"; // 2
            recipient = "<recipient>"; // 3
            subject = "<mail subject>"; // 4

            header = new SimpleSMTPHeader(sender, recipient, subject);
            filename = "hello.txt"; //This will be the body of your mail //5

            try
            {
                fileReader = new FileReader(filename);
            }
            catch (FileNotFoundException e)
            {
                System.err.println("File not found. " + e.getMessage());
            }

            client = new AuthenticatingSMTPClient("TLS", false);
            client.addProtocolCommandListener(new PrintCommandListener(
                    new PrintWriter(System.out), true));

            client.connect(server);

            if (!SMTPReply.isPositiveCompletion(client.getReplyCode()))
            {
                client.disconnect();
                System.err.println("SMTP server refused connection.");
                System.exit(1);
            }

            client.login("hostname.testing.smtp.api"); //6

            if(client.execTLS())
            {
                if(client.auth(AUTH_METHOD.LOGIN, "<your user name>", "<your password>")) //7
                {
                    client.setSender(sender);
                    client.addRecipient(recipient);
                    for (String recpt : ccList) {
                        client.addRecipient(recpt);
                    }

                    writer = client.sendMessageData();

                    if (writer != null)
                    {
                        writer.write(header.toString());
                        Util.copyReader(fileReader, writer);
                        writer.close();
                        client.completePendingCommand();
                    }

                    if (fileReader != null ) {
                        fileReader.close();
                    }
                }
            }
            client.logout();
            client.disconnect();
        }
        catch (IOException e)
        {
            e.printStackTrace();
            System.exit(1);
        }
    }
} 
```

# sql - 将价格四舍五入以 99 便士结束

> ID：11893104
> 
> 赞同：-1
> 
> 时间：2012-08-09T22:47:56.480
> 
> 标签：sql, rounding

我的表名是产品，我正在尝试更新 products_price，以便所有价格都`99p`在最后。你能帮我吗？

这个请求也有点简单（我是新手`SQL`！）我想更新所有记录如下

`categories`> 0中的任何内容 `parent_id`我需要脚本将所有记录更新**为零**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T22:55:02.590

### 第一季度

因此，您希望截断所有价格，然后添加`0.99`货币单位。将值截断到小数点后 0 位的功能因 DBMS 而异；我假设它被称为 TRUNC，但它可能在您的 DBMS 中被称为 FLOOR 或其他名称：

```
UPDATE Products
   SET Products_Price = TRUNC(Products_Price) + 0.99; 
```

这里不需要 WHERE 子句。我假设没有负价格；如果这是可能的，那么你需要在你的分配上更聪明一点（也许是一个 CASE 表达式；也许你有一个可用的函数 SIGN、SIGN、SIGNUM）。

请注意，我假设`p`引用的是便士，如“英镑（英镑）和便士”。如果价格在 0.00 英镑到 0.99 英镑之间，则结果为 0.99 英镑；如果价格在 1.00 英镑到 1.99 英镑之间，则结果为 1.99 英镑；等等。 TRUNC 或 FLOOR 将从价格中删除任何小数部分，加上 0.99 则意味着结果的形式为 £ *x* .99 （非负）整数值*x*。

### 第二季度

对你的意思做出一些假设：

```
UPDATE Categories
   SET Anything = 0
 WHERE Anything > 0
   AND Parent_ID > 0; 
```

如果您的意思是要以某种方式更新产品表，那么您的问题需要更加精确。

* * *

### 重访第二季度

来自评论：

> 我想将表中的所有`parent_id`值更新`categories`为零，其中`parent_id > 0`.

据推测，必须有一些`parent_id`值为空或负的值，所以你需要：

```
UPDATE Categories
   SET Parent_ID = 0
 WHERE Parent_ID > 0 
```

如果没有空值和负数，那么您可以运行更简单的更新：

```
UPDATE Categories
   SET Parent_ID = 0 
```

它将那些父 ID 已经为零的行以及那些没有的行设置为零。这可能会比更具选择性的更新更严重地影响日志（例如，将有更多更改记录在逻辑日志中或 DBMS 的等效项中），但除非有大量记录并且其中大多数已经有零父 ID 并且 DBMS 无法识别记录何时未更改并为未更改的行写入日志记录，那么您不太可能注意到差异

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T22:55:28.693

将价格设置为最后 99 便士：

```
update products_price set price = floor(price)+0.99; 
```

将 parent_id 设置为 0：

```
update categories set parent_id = 0 where parent_id > 0; 
```

# ios - 从 iOS 应用程序中为 Cydia 存储库版本创建 .deb 似乎无法创建正确的 .deb

> ID：11893108
> 
> 赞同：0
> 
> 时间：2012-08-09T22:48:41.097
> 
> 标签：ios, xcode, cydia

我一直在为 iDevice 开发一个应用程序，我想为我的应用程序创建一个*.deb*文件，所以我在 Xcode 中创建了一个简单的应用程序来测试，但是我很难创建 .deb 文件。

我做了以下步骤：

1) 删除 .DS_Store 文件，*$ rm -rf .DS_Store* 2) *$ dpkg-deb -b ~/repo/debs*

当它创建*.deb*文件时，它只有 16KB，我知道测试应用程序应该更大一些。

该应用程序的目录结构如下：

```
+- MyProgram
 +- Applications
 | +- MyProgram.app 
 | +- Info.plist 
   | +- MyProgram 
   | +- icon.png 
+- DEBIAN 
| +- control 
+- System 
 +- Library 
  +- LaunchDaemons 
   +- com.saurik.MyProgram.plist 
```

我没有包含*com.saurik.MyProgram.plist*文件，因为当我在 Xcode 中构建应用程序时，我在构建目录中没有看到类似的文件。

基本上，该应用程序是一个带有标签的简单视图控制器。该应用程序确实包含一个*.storyboard*文件，如果这有影响的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:00:59.257

我得到了这个工作，并在这个过程中创建了一个 shell 脚本。shell脚本如下：

```
#!/bin/bash

echo "Update Repo Script Started"

cd ~/Projects/<ProjectName>

ldid -S app/<Project.app>/<Project>

cp -R app/<Project.app> ~/packages/<Project>/Applications/

cd ~/packages

echo $PWD

dpkg-deb -b <Project> ~/repo/debs/

cd ~/repo

dpkg-scanpackages debs / > Packages

bzip2 -fks Packages

cd ..

ssh -n <host> 'rm -rf /path/to/your/repo'

scp -r repo <host>:/home/<user>/www/

echo "Repo Updated" 
```

# iphone - 在 iPhone 上访问音乐库和播放列表

> ID：11893109
> 
> 赞同：0
> 
> 时间：2012-08-09T22:48:41.420
> 
> 标签：iphone, ios, itunes, playlist

在 iPhone 上，我希望能够允许用户从他们的 iTunes 库中选择一首歌曲。
另外，我想知道应用程序如何访问该歌曲所在的特定播放列表（以及我的应用程序如何访问该播放列表中的其他歌曲）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:56:41.190

由于您提出了一个相当开放的问题，我所能建议的就是查看[iPod Library Access Programming Guide](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/iPodLibraryAccess_Guide/Introduction/Introduction.html)以开始使用，然后在您尝试了一些事情后返回一个更详细的问题。

# css - 居中 垂直

> ID：11893111
> 
> 赞同：0
> 
> 时间：2012-08-09T22:49:06.940
> 
> 标签：css, html

这让我发疯了，这可能很容易，我怎样才能垂直浮动一个`<hgroup>`垂直居中的少量动态内容的高度向右对齐（高度未知）。

```
<style>
#branding hgroup {
    margin: auto 0 auto 0;
    float:left;
}
#header-contact-info{
    margin:0;
    float:right;
    text-align:right;   
}
</style>

<header id="branding" role="banner">
  <hgroup> 
    <a href="http://thesite.com/"/><img src="logo.png" /></a> 
  </hgroup>
  <div id="header-contact-info">
               <p>some</p>
       <p>contact info</p>
    <p>justified right</p>
  </div>
  <div style="clear:both"></div>
</header> 
```

因此，如果我有一个 logo.png 想要垂直居中，并且联系信息在右侧，我应该实现哪些 CSS 样式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:17:29.467

您没有`hgroup`正确使用标签。它应该包含一组标题标签，例如`h1`,`h2`等。

除此之外，任何阅读本文的人都不应再使用该`<hgroup>`标签，因为它已从 HTML5 规范中删除，[截至今天](http://www.sitepoint.com/html5-hgroup-element-dropped/)。

# javascript - jquery selectmenu 不适用于来自 ajax 调用的淘汰数据绑定

> ID：11893120
> 
> 赞同：1
> 
> 时间：2012-08-09T22:49:50.813
> 
> 标签：javascript, jquery, jquery-plugins

我认为这是时间问题或其他什么。组合框的元素是从 ajax 调用中获取的，如果我使用 selectmenu，剔除数据绑定不会将这些元素获取到组合框。但是，如果我注释掉，

```
 $("select").selectmenu(); 
```

一切正常。我使用了以下代码

```
 function ViewModel() {
        // Data
        var self = this;
        self.loaded = ko.observable(false);
        self.groups = ko.observableArray([]);
        //....
        $.getJSON("api/groups", self.groups)
            .done(function () {
                self.loaded(true); $('select').selectmenu('refresh', true);
            });
    }
    ko.applyBindings(new ViewModel());
    $(document).ready(function () {
        // Handler for .ready() called.
        $("select").selectmenu();
    }); 
```

和这个 html

```
 <div>Active Group:&nbsp; <select data-bind="options: groups,
                  optionsText: 'Name',
                  optionsValue: 'Id',
                  value: selectedGroupId,
                  optionsCaption: 'Choose a group'"></select></div> 
```

当文档准备好时，组合框具有“选择一个组”的单个元素。我验证了 Firebug 的数据是否正常。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T01:23:19.580

我认为您需要与 selectmenu 事件进行自定义绑定。请参考以下。

[http://knockoutjs.com/documentation/event-binding.html](http://knockoutjs.com/documentation/event-binding.html)

[Knockout 和 jQuery Mobile：将数据绑定到选择列表](https://stackoverflow.com/questions/9373982/knockout-and-jquery-mobile-binding-data-to-select-lists)

# c++ - Digia 购买后的 Qt 许可证

> ID：11893121
> 
> 赞同：0
> 
> 时间：2012-08-09T22:50:01.777
> 
> 标签：c++, qt

Digia 从诺基亚购买 Qt 平台（Qt 库、QT Creator、Designer、Linguist 等）的许可证是什么？

还是 LGPL 吗？他们是否计划执行自己的商业许可证？还是会有三个版本（GPL/LGPL/Commercial）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T23:09:24.900

摘自[Digia 的 Qt 商业博客](http://www.digia.com/en/Blogs/Qt-blog/Tuukka-Turunen/Dates/2012/8/Digia-extends-commitment-to-acquire-Qt-from-Nokia/)

> **致力于商业和开源许可**
> 
> 自从一年多前我们收购了 Qt 的商业许可业务以来，Digia Qt 研发团队一直在努力开发和发布新的和更新的特性和功能，不仅为 Qt Commercial 客户，而且还与 Qt 项目合作构建和发布商业和 LGPL 版本，主要为桌面和嵌入式平台贡献文档、错误修复和改进。
> ...
> 
> 通过此次收购，Digia 将对全球 Qt 社区承担越来越大的责任，而不仅仅是商业许可业务。我们相信 Qt 双许可证的力量。Qt 可以在开源和商业许可证下使用，这是一个巨大的价值，因为客户有不同的需求，许可证有不同的用途。Digia 希望继续与在 Qt 项目中一起工作的不同个人贡献者和公司保持良好合作。我们还致力于通过 KDE Free Qt 基金会继续 Qt 与 KDE 社区的特殊关系。我们相信，这种共生关系对参与其中的每个人都是有价值的。
> ...
> 我们希望通过 Qt 项目与整个 Qt 生态系统合作，以确保 Qt 在商业和开源许可下继续蓬勃发展。

听起来他们想保持现状，并专注于使商业和开源社区更加强大。

# class - 用类在单引号之间传递参数

> ID：11893125
> 
> 赞同：0
> 
> 时间：2012-08-09T22:50:18.440
> 
> 标签：class, argument-passing

我从来没有听说过这个解决方案，但似乎是可能的，我不明白为什么以及如何完成这样的事情。

这是一个例子：

> ```
> class SandboxPawn extends UDKPawn;
> 
> DefaultProperties
> {
>     InventoryManagerClass=class'Sandbox.SandboxInventoryManager'
> } 
> ```
> 
> 来自：[http ://www.moug-portfolio.info/udk-weapon-basics/](http://www.moug-portfolio.info/udk-weapon-basics/)

假设这种语法很好而且有用，为什么要采用这种解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:21:46.227

这是类文字的 UnrealScript 语法。

[http://wiki.beyondunreal.com/Class_limiter#Class](http://wiki.beyondunreal.com/Class_limiter#Class)

# oracle11g - Oracle：创建唯一索引但忽略 NULL

> ID：11893134
> 
> 赞同：3
> 
> 时间：2012-08-09T22:50:41.970
> 
> 标签：oracle11g

[我在SO](https://stackoverflow.com/questions/1374737/how-can-i-create-a-unique-index-in-oracle-but-ignore-nulls)上遇到了这个示例，它提供了一种通过忽略空值来创建唯一索引的解决方案。但是，我想扩展它，但我无法找到解决方案。

我有一个表的 3 列的复合索引（表中还有其他 10 列）。这些列不是 PK 的一部分。在这 3 列中，2 将始终保存一些值，第 3 列可能为 NULL。我有大量的测试数据，并且有很多插入，其中 2 列具有相同的值，第 3 列为 NULL。这些所有插入都适用于 PostgreSQL，但 Oracle 抱怨说。为了使我的测试用例正常工作，我认为最简单的解决方案是为 Oracle 尝试一个可以像在 PostgreSQL 中一样工作的唯一索引。

准确地说：我想要一个以下类型的构造，不知道如何组合`col1 + col2 + col3`

```
create unique index tbl_idx on tbl (nvl2(col3, col1 + col2, col1 + col2 + col3)) 
```

我正在使用 liquibase。索引以下列方式创建 -

```
<changeSet dbms="postgresql,oracle" author="abc" id="222">
    <createIndex indexName="Index_7" schemaName="ss" tableName="Users" unique="true">
        <column name="idOrganization"/>
        <column name="strUsername"/>
        <column name="strNotDeleted"/>
    </createIndex>
</changeSet> 
```

我正在使用 liquibase 创建我的测试数据，这里有两个插入语句

```
<insert schemaName="ss" tableName="Users">
    <column name="strUsername" value="user1" />
    <column name="idUser" valueNumeric="20741" />
    <column name="idOrganization" valueNumeric="4" />
    <column name="strFirstName" value="user" />
    <column name="strLastName" value="one" />
    <column name="strEmail" value="email@foo.com" />
    <column name="strNotDeleted" />
</insert>
<insert schemaName="ss" tableName="Users">
    <column name="strUsername" value="user1" />
    <column name="idUser" valueNumeric="20771" />
    <column name="idOrganization" valueNumeric="4" />
    <column name="strFirstName" value="user" />
    <column name="strLastName" value="one" />
    <column name="strEmail" value="email@foo.com" />
    <column name="strNotDeleted" />
</insert> 
```

这 2 个插入对 PostgreSQL 工作正常，但对 Oracle 失败并出现错误“Index_7 约束违规”。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-10T01:05:26.543

如果目标只是防止`strNotDeleted`设置为非 NULL 值的重复项，那么您需要这样的基于函数的索引

```
SQL> create table users(
  2    idOrganization number,
  3    strUsername    varchar2(100),
  4    strNotDeleted  varchar2(3)
  5  );

Table created.

SQL> create unique index idx_users
  2      on users( (case when strNotDeleted is not null
  3                      then idOrganization
  4                      else null
  5                  end),
  6                (case when strNotDeleted is not null
  7                      then strUsername
  8                      else null
  9                 end) );

Index created. 
```

这允许插入您在问题中提到的两行

```
SQL> insert into users values( 4, 'user', null );

1 row created.

SQL> insert into users values( 4, 'user', null );

1 row created. 
```

您可以插入一行，其中`strNotNull`列设置为非 NULL 值

```
SQL> insert into users values( 4, 'user', 'Yes' );

1 row created. 
```

但是你不能插入第二个这样的行

```
SQL> insert into users values( 4, 'user', 'Yes' );
insert into users values( 4, 'user', 'Yes' )
*
ERROR at line 1:
ORA-00001: unique constraint (SCOTT.IDX_USERS) violated 
```

在幕后，Oracle b*-tree 索引不会完全索引`NULL`条目。这两个`CASE`语句确保索引仅包含 for`idOrganization`和`strUsername`if `strNotDeleted`is not的条目`NULL`。如果`strNotDeleted`是`NULL`，那么两个`CASE`语句都计算为`NULL`并且在索引中没有条目。从概念上讲，它类似于其他数据库中的部分索引，它允许您`WHERE`在索引上指定一个子句，以便您只索引“有趣”的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-16T10:26:03.467

```
SQL> create table users(
      idOrganization number,
      strUsername    varchar2(100),
      strNotDeleted  varchar2(3)
   )
SQL> /

Table created.

SQL> Create unique index idx_users
    on users(
         (
           case when strNotDeleted is not null
                      then idOrganization
                        else null
             end
          ),
          (
           case when strNotDeleted is not null
                       then strUsername
                       else null
           end
         ),
         (
           case when strNotDeleted is not null
                      then strNotDeleted
                       else null
           end
         )
   )
SQL> /

Index created. 
```

# java - 如何通过 URL 将数据插入 MySQL？

> ID：11893137
> 
> 赞同：0
> 
> 时间：2012-08-09T22:50:56.843
> 
> 标签：java, mysql, database, url, parameters

所以我有一个名为“示例”的 MySQL 数据库。在数据库中，我有一个表，其中有一行名为“Rank”和“Name”。我希望能够通过 URL 将“Rank”和“Name”值输入到数据库中。

我已经通过 Eclipse 制作了一个 Tomcat 服务器，并希望获得有关 java 代码的帮助，以便使用参数将数据发送到数据库。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:59:45.307

[Java - 通过 POST 方法轻松发送 HTTP 参数](https://stackoverflow.com/questions/4205980/java-sending-http-parameters-via-post-method-easily)

问题本身显示了“GET”方法。接受的答案显示了“POST”方法。所有处理都应在您的服务器上完成。

这是用于将正确值发送到服务器的代码。

您需要服务器本身的帮助吗？我知道如何在 php 中做到这一点，如果这对你有帮助的话

# r - R中的xts回归

> ID：11893138
> 
> 赞同：3
> 
> 时间：2012-08-09T22:51:04.287
> 
> 标签：r, time-series, xts, zoo, lm

是否有使用以下类型的 xts 对象运行回归的实用程序：

```
lm(y ~ lab(x, 1) + lag(x, 2) + lag(x,3), data=as.data.frame(coredata(my_xts))) 
```

where`my_xts`是一个`xts`包含 an`x`和 a的对象`y`。问题的关键是有没有办法避免做一堆滞后和合并以拥有`data.frame`所有滞后？我认为该软件包`dyn`适用于`zoo`对象，因此我希望它以相同的方式工作，`xts`但可能会有一些更新。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T00:37:15.320

dyn 和 dynlm 包可以用 zoo 对象做到这一点。在 dyn 的情况下，只需写入`dyn$lm`而不是`lm`传递动物园对象而不是数据框。

请注意，xts 中的 lag 与通常的 R 约定相反，因此如果 x 属于 xts 类，那么如果 x 属于 zoo 或 ts 类，则 lag(x, 1) 与 lag(x, -1) 相同。

```
> library(xts)
> library(dyn)
> x <- xts(anscombe[c("y1", "x1")], as.Date(1:11)) # test data
> dyn$lm(y1 ~ lag(x1, -(1:3)), as.zoo(x))

Call:
lm(formula = dyn(y1 ~ lag(x1, -(1:3))), data = as.zoo(x))

Coefficients:
     (Intercept)  lag(x1, -(1:3))1  lag(x1, -(1:3))2  lag(x1, -(1:3))3  
         3.80530           0.04995          -0.12042           0.46631 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T00:09:15.800

由于您已经从 xts 环境中删除了数据，因此我在这里没有使用任何 xts 功能。有一个`embed`函数可以将“滞后”矩阵构造到任何所需的程度。（我从来不理解时间序列`lag`函数。）（嵌入滞后变量的顺序与我的预期相反。）

```
 embed(1:6, 3)
#--------
     [,1] [,2] [,3]
[1,]    3    2    1
[2,]    4    3    2
[3,]    5    4    3
[4,]    6    5    4
#Worked example   ... need to shorten the y variable
y <- rnorm(20)
x <- rnorm(20)
lm( tail(y, 18) ~ embed(x, 3) )
#-------------------
Call:
lm(formula = tail(y, 18) ~ embed(x, 3))

Coefficients:
 (Intercept)  embed(x, 3)1  embed(x, 3)2  embed(x, 3)3  
    -0.12452      -0.34919       0.01571       0.01715 
```

令人欣慰的是，在更改滞后以匹配@GGrothendieck 使用的滞后后，我们得到了相同的结果：

```
 lm( tail(xx[,"y1"], NROW(xx)-3) ~ embed(xx[,"x1"], 4)[,2:4] )

Call:
lm(formula = tail(xx[, "y1"], NROW(xx) - 3) ~ embed(xx[, "x1"], 
    4)[, 2:4])

Coefficients:
                 (Intercept)  embed(xx[, "x1"], 4)[, 2:4]1  embed(xx[, "x1"], 4)[, 2:4]2  
                     3.80530                       0.04995                      -0.12042  
embed(xx[, "x1"], 4)[, 2:4]3  
                     0.46631 
```

# ruby - 捆绑程序运行“捆绑安装”时如何隐藏依赖项？

> ID：11893140
> 
> 赞同：0
> 
> 时间：2012-08-09T22:51:11.890
> 
> 标签：ruby, bundle, bundler, gemfile

目前，当我运行“捆绑安装”时，输出会显示我的私人仓库的用户名和 gemfile。我想隐藏此输出并将其更改为其他内容。

现在：

```
Updating https://user:password@github.com/sc/models.git 
```

我想：

```
Updating https://user:XXXXXXXX@github.com/sc/models.git 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T23:35:32.790

这看起来像是捆绑程序的错误报告/功能请求，请在此处开票：

[https://github.com/carlhuda/bundler/issues/new](https://github.com/carlhuda/bundler/issues/new)

# c++ - 推断“make_function”的 lambda 或任意可调用的调用签名

> ID：11893141
> 
> 赞同：29
> 
> 时间：2012-08-09T22:51:19.053
> 
> 标签：c++, function, lambda, c++11, type-inference

在某些情况下，希望能够对可调用对象（例如函数、函数指针、带有`operator()`、lambda 的对象实例`mem_fn`）进行类型擦除，例如在[Using Boost adapters with C++11 lambdas](https://stackoverflow.com/questions/11872558/using-boost-adaptors-with-c11-lambdas) where a copy-assignable and default-constructible类型是必需的。

`std::function`将是理想的，但似乎没有办法*自动*确定用什么签名来实例化类模板`std::function`。是否有一种简单的方法来获取任意可调用的函数签名和/或将其包装在适当的`std::function`实例化实例（即`make_function`函数模板）中？

具体来说，我正在寻找一种或另一种

```
template<typename F> using get_signature = ...;
template<typename F> std::function<get_signature<F>> make_function(F &&f) { ... } 
```

这样`make_function([](int i) { return 0; })`返回一个`std::function<int(int)>`. 显然，如果一个实例可以用多个签名调用（例如，具有多个签名的对象，模板或默认参数`operator()`），这将不会起作用。

Boost 很好，尽管不太复杂的非 Boost 解决方案是首选。

* * *

编辑：回答我自己的问题。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-05T13:58:27.837

我想出了一个相当讨厌的非库解决方案，使用 lambdas 的事实`operator()`：

```
template<typename T> struct remove_class { };
template<typename C, typename R, typename... A>
struct remove_class<R(C::*)(A...)> { using type = R(A...); };
template<typename C, typename R, typename... A>
struct remove_class<R(C::*)(A...) const> { using type = R(A...); };
template<typename C, typename R, typename... A>
struct remove_class<R(C::*)(A...) volatile> { using type = R(A...); };
template<typename C, typename R, typename... A>
struct remove_class<R(C::*)(A...) const volatile> { using type = R(A...); };

template<typename T>
struct get_signature_impl { using type = typename remove_class<
    decltype(&std::remove_reference<T>::type::operator())>::type; };
template<typename R, typename... A>
struct get_signature_impl<R(A...)> { using type = R(A...); };
template<typename R, typename... A>
struct get_signature_impl<R(&)(A...)> { using type = R(A...); };
template<typename R, typename... A>
struct get_signature_impl<R(*)(A...)> { using type = R(A...); };
template<typename T> using get_signature = typename get_signature_impl<T>::type;

template<typename F> using make_function_type = std::function<get_signature<F>>;
template<typename F> make_function_type<F> make_function(F &&f) {
    return make_function_type<F>(std::forward<F>(f)); } 
```

有什么可以简化或改进的想法吗？有什么明显的bug吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T23:06:50.113

不可能的。您可能能够`operator()`获取*某些*类型的地址，但不能获取任意可调用的地址，因为它很可能具有重载或模板参数。它是否适用于 lambda 肯定没有明确定义，AFAIK。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-21T20:21:31.870

对于非可变非泛型无捕获 lambda 函数以及简单的自由函数，可以使用以下方法：

```
#include <iostream>

#include <cstdlib>

template< typename L, typename R, typename ...A >
constexpr
auto // std::function< R (A...) >
to_function_pointer(L l, R (L::*)(A...) const)
{
    return static_cast< R (*)(A...) >(l);
}

template< typename L, typename R, typename ...A >
constexpr
auto // std::function< R (A...) >
to_function_pointer(L l, R (L::*)(A...)) // for mutable lambda
{
    return static_cast< R (*)(A...) >(l);
}

template< typename L >
constexpr
auto
to_function_pointer(L l)
{
    return to_function_pointer(l, &L::operator ());
}

template< typename R, typename ...A >
constexpr
auto // std::function< R (A...) >
to_function_pointer(R (* fp)(A...))
{
    return fp;
}

namespace
{

void f() { std::cout << __PRETTY_FUNCTION__ << std::endl; }

}

int
main()
{
    to_function_pointer([] () { std::cout << __PRETTY_FUNCTION__ << std::endl; })();
    //to_function_pointer([&] () { std::cout << __PRETTY_FUNCTION__ << std::endl; })(); // can't cast from non-captureless lambda to function pointer
    to_function_pointer([] () mutable { std::cout << __PRETTY_FUNCTION__ << std::endl; })();
    to_function_pointer(f)();
    to_function_pointer(&f)();
    return EXIT_SUCCESS;
} 
```

# c# - usercontrol wpf 静态内存

> ID：11893145
> 
> 赞同：0
> 
> 时间：2012-08-09T22:51:52.680
> 
> 标签：c#, wpf, user-controls

我是 WPF 的新手，并且来自 C++ 背景，所以我可能在这里担心内存管理太多。

无论如何，我有一个 UserControl (NewContact)，它有一个 2 列的网格，上列显示 3 个单选按钮，根据选择的情况，它将适当的 UserControl 加载到网格的下半部分。

```
private void newMilitaryContactRadioButton_Checked(object sender, RoutedEventArgs e)
    {
        UserControl NMC = new NewMilitaryContact();
        NewContactWindowGridDisplay.Children.Insert(1, NMC);
    }

    private void newMilitaryContactRadioButton_Unchecked(object sender, RoutedEventArgs e)
    {
        NewContactWindowGridDisplay.Children.RemoveAt(1);
    }

    private void newLegalContactRadioButton_Checked(object sender, RoutedEventArgs e)
    {
        UserControl NLC = new NewLegalContact();
        NewContactWindowGridDisplay.Children.Insert(1, NLC);
    }

    private void newLegalContactRadioButton_Unchecked(object sender, RoutedEventArgs e)
    {
        NewContactWindowGridDisplay.Children.RemoveAt(1);
    }

    private void newFirmContactRadioButton_Checked(object sender, RoutedEventArgs e)
    {
        UserControl NFC = new NewFirmContact();
        NewContactWindowGridDisplay.Children.Insert(1, NFC);
    }

    private void newFirmContactRadioButton_Unchecked(object sender, RoutedEventArgs e)
    {
        NewContactWindowGridDisplay.Children.RemoveAt(1);
    } 
```

现在我的问题是，当未选中单选按钮时，我是否应该以及如何卸载我创建的 UserControl。我在 MSDN 文档中进行了一些搜索，发现使用父对象中的 remove 方法会卸载用户控件。如果是这种情况，我在各种“未经检查”的方法中使用的代码是正确的，以免在有人一遍又一遍地点击三个单选按钮时堆积大量 NFC/NLC/NMC UserControl 对象一遍又一遍？

非常感谢任何可以向我解释这一点的人:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T23:09:40.037

实际上，您需要阅读有关 .Net 内存管理的更多信息并了解它的工作原理。在您的情况下，这取决于您的 UserControls 在做什么？如果他们正在使用系统资源，最好在`UserControl` `unloaded`事件中处理他们的引用，否则`GC`会照顾他们。

阅读本文： [垃圾收集：Microsoft .NET Framework 中的自动内存管理](http://msdn.microsoft.com/en-us/magazine/bb985010.aspx)

而且你的方式也不是很好，因为很快你会发现你需要对你的 UserControl 做更多的事情，比如设置它的`DataContext`, `Style`s 处理事件等等......这很难用代码来做。

# jsf - 在复合组件内部时，Mojarra findComponent 为有效 id 返回 null

> ID：11893147
> 
> 赞同：1
> 
> 时间：2012-08-09T22:51:54.353
> 
> 标签：jsf, jsf-2, mojarra

我有一个自定义组件，如下所示

```
<custom:container>
    <custom:checkbox index="0"/>
    <custom:checkbox index="1"/>
</custom:container> 
```

所以第一次调用encodeBegin时，它会显示hit tag `<custom:container>`，它会尝试保存这个组件的client id，

```
private String containerClientId;
public void encodeBegin(FacesContext context, UIComponent component){
    if (component instanceof ManyCheckboxContainer) {            
        containerClientId = component.getClientId(context);
        return; 
    }
} 
```

所以当我点击时 encodeEnd 会被调用`<custom:checkbox index="0"/>`，就像这样

```
public void encodeEnd(FacesContext context, UIComponent component) throws IOException {

    ...

    if (component instanceof Checkbox) {
        renderCheckbox(context, (Checkbox) component);
    } 
    ...
}

protected void renderCheckbox(FacesContext facesContext, InforRadio radio) throws IOException {
    ...
    UIComponent uiComponent = radio.findComponent(containerClientId);
    if(uiComponent == null){
         //throw error
    }
    ...
} 
```

如果我在复合组件中没有这个自定义组件，那么一切都很好，但是一旦我将它放入复合组件中，`radio.findComponent(containerClientId);`返回`null`. 这是mojarra中的错误吗？我在 2.1.10 和 2.1.11 下对此进行了测试，行为相同。

**编辑**
所以我收回这一点，当我的自定义组件在两个嵌套的内部时会发生这种行为`NamingContainer`，所以像这样

```
<h:form id="myForm">
    <f:subView id="myView">
        <custom:container id="myCustom">
            <custom:checkbox index="0"/>
            <custom:checkbox index="1"/>
        </custom:container>
    </f:subView>
</h:form> 
```

所以在这种情况下，客户端ID（返回`component.getClientId(context)`）`<custom:container>`是`myForm:myView:myCustom`，但在Mojarra内部，该`findComponent`方法有这个

```
public UIComponent findComponent(String expr) {
     ...

     else if (!(base instanceof NamingContainer)) {
     // Relative expressions start at the closest NamingContainer or root
     while (base.getParent() != null) {
         if (base instanceof NamingContainer) {
             break;
         }
         base = base.getParent();
     }
     ...
} 
```

所以它寻找下一个祖先`NamingContainer`，在我的例子中`f:subView`不是`h:form`。然后它解析客户端 id，循环遍历它，每次将 id 的一部分传递给`UIComponent findComponent(UIComponent base, String id, boolean checkId)`. 所以第一次，这个方法以`form3`id 和当前 UIComponent 为 f:subView，它搜索它的所有方面和子项，看看是否有任何组件匹配`form3`，当然，没有一个会匹配，因为在我的结构中`form3`是父级。回报也是`f:subView`如此。`null`这是 Mojarra 错误还是我做错了什么。我认为客户端 id 是相对于下一个 NamingContainer 祖先而不是一直到 NamingContainer 的根？我错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T06:45:10.470

阅读[文档](http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/api/javax/faces/component/UIComponent.html#findComponent%28java.lang.String%29)后，我觉得 Mojarra 做对了。

根据文档，如果您想从树的根部进行“绝对”搜索，您应该在搜索表达式前面放置一个分隔符（冒号）。否则，如果它是 NamingContainer 或第一个父级是 NamingContainer，它将从组件本身进行相对搜索。

顺便说一句：我链接到的文档似乎与随规范分发的官方文档相同。官方规格在[这里](http://jcp.org/en/jsr/detail?id=314)。

# html - UIWebView html 文件与 swf 加载外部链接，但内部

> ID：11893153
> 
> 赞同：1
> 
> 时间：2012-08-09T22:52:21.087
> 
> 标签：html, objective-c, uiwebview, flash

当我加载嵌入了 SWF 的外部 HTML 时，它在 UIWebView 中工作。
当我尝试在 Xcode 中添加所有文件并在本地加载 UIWebView 时，什么都没有出现，但我知道它试图加载......
- 代码：

```
NSString *filePath =
[[NSBundle mainBundle] pathForResource:@"vimmar" ofType:@"html"];
NSData *htmlData = [NSData dataWithContentsOfFile:filePath];

if (htmlData)
{
    NSBundle *bundle = [NSBundle mainBundle];
    NSString *path = [bundle bundlePath];
    NSString *fullPath = [NSBundle pathForResource:@"vimmar"
                                            ofType:@"html" inDirectory:path];
    [pagina_web_local loadRequest:[NSURLRequest requestWithURL:
                          [NSURL fileURLWithPath:fullPath]]];
}
else
{
    NSLog(@"No data for you...");
} 
```

-这里是 HTML

```
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/> 
  <title>Default</title>
  <meta name="viewport" content="target-densitydpi=device-dpi, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <style type="text/css">
    @media only screen and (min-device-width: 800px) { html { overflow:hidden; } }
    * { padding: 0; margin: 0; }
    html { height: 100%; }
    body { height: 100%; overflow:hidden; }
    #container { height: 100%; min-height: 100%; width: 100%; margin: 0 auto; }
  </style>
  </head>
  <body>
  <script src="swfobject/swfkrpano.js"></script>
  <div id="container">
    <div id="panoDIV" style="height:100%;">
    <script>
      embedpano({target:"panoDIV",swf:"vimmar.swf"});
    </script>
      <noscript>
        <div id="tour">
          <object width="100%" height="100%">
            <embed src="vimmar.swf" width="100%" height="100%" allowFullScreen="true"></embed>
          </object>
        </div>
      </noscript>
    </div>
  </div>
 </body>
 </html> 
```

不知道是不是和苹果不接受SWF有关。但如果不是，为什么要带在外面？你同意？

不是因为缺少添加文件。JS 或其他，因为我在这里找到了一个加载有问题的工作人员。JS 被阅读并且有用，但没有找到 SWF。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T22:34:08.010

我怀疑 Apple 不会构建`JavaScript`和处理 HTML 中的嵌入`SWF`文件。

所以我寻找了一种`webservice`在 iOS 中创建一个方法来编译和运行`SWF`这里需要的 ( [https://github.com/robbiehanson/CocoaHTTPServer/](https://github.com/robbiehanson/CocoaHTTPServer/) )。
SWF 文件不是纯文件，它会编译并转换为 HTML 可接受的格式。`XCode`本来就没有的东西。所以，我得到了我们需要的结果。

如果有人需要，这就是解决方案，创建一个小型 Web 服务来编译 javascript 和服务器要处理的其他内容，并以 HTML 显示最终结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T21:54:28.650

我无法理解您的问题 - 但 Flash**无法**在 UIWebView 中工作。如果您在 Safari 中浏览特定网站，并且它似乎可以正常工作，则该网站可能正在提供 HTML5 版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T17:02:10.993

iOs 严格不支持任何包含 swf 的 flash 项目。

原因： 1）闪存耗尽了要运行的电池，必须解码 swf 解码应该在硬件级别而不是在软件级别，不幸的是 5o % 的闪存项目百分比（不是最新的）导致使用软件级别解码

2）导致安全漏洞，即使 mcaFee 也声称上述漏洞是关键的

3) 应用程序崩溃：flash 是 mac 中应用程序崩溃的第一大原因

4）易于开发：Mac 不希望他们的开发人员专注于第三方项目，第三方不会为特定平台定制，最终将是跨平台的。

5) 经济原因：在 ios 上允许 flash 将与应用商店竞争。

所以出于上述原因 ios 不支持 flash

如果您想要任何图表的 flash，您可以通过以下链接

[http://blog.fusioncharts.com/2012/02/create-charts-for-iphone-and-ipad-apps-using-fusioncharts-xt/](http://blog.fusioncharts.com/2012/02/create-charts-for-iphone-and-ipad-apps-using-fusioncharts-xt/) [http://docs.fusioncharts.com/charts/contents/FirstChart/ UsingPureJS.html](http://docs.fusioncharts.com/charts/contents/FirstChart/UsingPureJS.html) [http://docs.fusioncharts.com/charts/contents/index.html?FirstChart/UsingPureJS.html](http://docs.fusioncharts.com/charts/contents/index.html?FirstChart/UsingPureJS.html)

# java - 游戏数据的基本加密

> ID：11893155
> 
> 赞同：2
> 
> 时间：2012-08-09T22:52:43.600
> 
> 标签：java, encryption

我想我正在寻找某种基本的文件加密，但不知道从哪里开始。

我正在找人告诉我从哪里开始寻找，或者更好的是，提供一些代码。

我编写了一个游戏，目前将数据保存到通用文本文件中。当然，任何愿意这样做的人都可以改变这一点。

我需要的是创建一个可以存储整数和字符串的文件，即使不是不可能在游戏之外进行编辑也很难。

在我的搜索中，我遇到了 .dat 文件，但它们似乎比我正在寻找的更复杂。

感谢所有帮助，亚历克斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T23:25:28.667

您可以将数据写入 ByteBuffer，然后您可以通过简单的算法扭曲数据。例如，假设您要保存的数据是一个 String 数组，您可以这样做：

```
String[] data; // the data you want to save
int byteLength = 0;
byte[][] bytes = new byte[data.length][];

// Calculate the length of the content.
for(int i=0; i<data.length; i++) {
    bytes[i] = data[i].getBytes();
    byteLength += bytes[i].length;
    byteLength += 4; // this is for an integer, which is for the length of the String
}

// Transfer the content to a ByteBuffer object
ByteBuffer buffer = ByteBuffer.allocate(byteLength);
for(int i=0; i<bytes.length; i++) {
    // Put the length of the current byte array
    buffer.putInt(bytes[i].length);
    for(int j=0; j<bytes[i].length; j++) {
        // Reverse the byte so that it can't be understood
        buffer.put((byte)(~bytes[i][j])); 
    }
} 
```

将所有内容写入 ByteBuffer 对象后，您可以获取生成的字节数组并将其写入文件。

```
FileOutputStream fos = new FileOutputStream("YourFileName.anyExtension");
fos.write(buffer.array());
fos.close(); 
```

在读回文件时，您应该首先读取一个整数，这是您应该作为字节数组读取的数据的长度，然后您应该读取这个字节数组。

```
FileInputStream fis = new FileInputStream("YourFileName.anyExtension");
DataInputStream dis = new DataInputStream(fis);
ArrayList<String> list = new ArrayList<String>();
byte[] bytes;
while(dis.available()) {
    int length = dis.readInt();
    bytes = new byte[length];
    for(int i=0; i<length; i++) {
        // Those bytes were reversed, right?
        bytes[i] = (byte)(~dis.readByte());
    }
    // Convert byte array to String
    String str = new String(bytes);
    list.add(str);
} 
```

现在你有一个字符串数据的 ArrayList。

当然，这不是最好、最安全、最快的算法。您总是可以更快地找到或创建。但我认为这是做这类事情的一个很好的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T23:09:31.920

如果您使用 Java，您可以尝试创建一个实现 Serializable 的类。这样，您可以创建一个对象，其中存储了所有元信息，将其序列化，当您想加载它时，只需再次反序列化它。

虽然它不是很安全，因为你只需要知道它是用哪个类来反序列化的。但这是开始的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T23:10:29.283

查看[数字签名](http://en.wikipedia.org/wiki/Digital_signature)，特别是 HMAC。这些几乎正是您所需要的，Java Crypto 框架应该使事情变得相当简单。这是一个可能相关的 SO 条目：[如何在 Java 中生成与 Python 示例等效的 HMAC？](https://stackoverflow.com/questions/3208160/how-to-generate-an-hmac-in-java-equivalent-to-a-python-example)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T23:20:07.277

你可以通过你的文件写入流`CipherOutputStream`

生成一个随机字符串，或数字或任何东西。获取它的字节数组，生成一个密钥，然后用它来加密你的文件。

```
 byte password[] = (WHAT YOUR WANT. STRING, NUMBER, etc.).getBytes();
    DESKeySpec desKeySpec;
    try {

        desKeySpec = new DESKeySpec(password);
        SecretKeyFactory keyFactory = SecretKeyFactory.getInstance("DES");
        SecretKey key = keyFactory.generateSecret(desKeySpec);

        Cipher desCipher = Cipher.getInstance("DES/ECB/PKCS5Padding");
        desCipher.init(Cipher.ENCRYPT_MODE, key);

        // Create stream
        FileOutputStream fos = new FileOutputStream("Your file here");
        BufferedOutputStream bos = new BufferedOutputStream(fos);
        CipherOutputStream cos = new CipherOutputStream(bos, desCipher);
    } 
```

现在您可以使用写入文件`cos`

使用`SecretKey`对象以相同的方式读取文件

```
SecretKey key = loadKey(); // Deserialize your SecretKey object
try {
            Cipher cipher = Cipher.getInstance("DES/ECB/PKCS5Padding");
            cipher.init(Cipher.DECRYPT_MODE, key);
            FileInputStream fis = new FileInputStream("Your file here");
            BufferedInputStream bis = new BufferedInputStream(fis);
            CipherInputStream cis = new CipherInputStream(bis, cipher); 
```

现在你可以阅读使用`cis`

缺点是您需要保留`SecretKey`对象（序列化它或其他东西），任何低级黑客获取数据都不是问题（因为密钥存储在设备上）但它不允许只更改您的数据使用文本编辑器。

# sql - 在 SQL 中，如何让一个匹配列优先于另一列？

> ID：11893156
> 
> 赞同：0
> 
> 时间：2012-08-09T22:52:47.817
> 
> 标签：sql, match, where, operator-precedence

我已经尝试了一些东西，但我正在画一个空白。这是我的查询：

```
SELECT * 
    FROM Companies 
WHERE 
    Symbol LIKE 'ZY%' OR 
    Name LIKE '%ZY%' 
ORDER BY Symbol ASC
LIMIT 2; 
```

基本上我希望“ZY”在匹配（HALO，Halozyme Therapeuti ...）之前匹配（ZNGA，Zynga Inc）。

显然，订单的原因是查询的这一部分：

```
ORDER BY Symbol 
```

我在这里遗漏了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T22:56:37.090

您只需将其添加到 Order By 子句

```
SELECT * FROM Companies WHERE Symbol LIKE 'ZY%' OR Name LIKE '%ZY%' 
ORDER BY 
  (CASE WHEN Symbol LIKE 'ZY%' THEN 1
        WHEN Name LIKE '%ZY%' THEN 2
        END),
Symbol ASC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T22:58:09.510

不确定这是您要找的东西，但是...

```
ORDER BY CASE WHEN Symbol LIKE 'ZY%' THEN Symbol ELSE Name END ASC 
```

# android - Android 和 iOS 的最大文件大小和数量

> ID：11893158
> 
> 赞同：1
> 
> 时间：2012-08-09T22:53:07.157
> 
> 标签：android, ios, file, limit

我正在开发一个可以下载大文件（主要是视频）的应用程序。我需要知道的是：

1.  Android 或 iOS 是否有最大单个文件大小？我所看到的只是 FAT 文件系统的 4GB 限制。最大视频大小应该不会接近那个，但我们希望 100% 确定没有下限
2.  在任一系统上是否有分配给单个应用程序的最大空间量？谷歌在这个问题上一无所获，所以我假设没有超出可用文件空间的限制（这似乎合乎逻辑，但对于 Apple 构建的系统来说也很免费）
3.  任一系统是否有最大数量的单个文件或目录？再一次，谷歌一无所获。我不明白为什么会有这里，但我想在这里涵盖所有的基础。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T00:05:25.513

这里的所有答案都适用于 Android：

> Android 或 iOS 是否有最大单个文件大小？我所看到的只是 FAT 文件系统的 4GB 限制。

我不会超过4GB。

> 在任一系统上是否有分配给单个应用程序的最大空间量？

不，目前没有按应用程序配额系统。话虽如此，尽量不要让用户后悔使用您的应用程序。:-)

> 任一系统是否有最大数量的单个文件或目录？

是的，但是由于数量应该是数百万，因此您的应用程序将在您达到这些限制之前很久就停止运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T23:48:50.307

无法回答 iOS，但对于 Android，您的 APK 不能超过 50MB（如果超过，您可以包含扩展文件以获取额外数据）。

这是解释所有细节的文档的链接：http:
[//developer.android.com/guide/google/play/expansion-files.html](http://developer.android.com/guide/google/play/expansion-files.html)

# css - 没有包装的并排，灵活宽度的div？

> ID：11893162
> 
> 赞同：0
> 
> 时间：2012-08-09T22:53:19.043
> 
> 标签：css, html

我不确定如何最好地解释这一点。我试图让三个 div 元素并排放置；第一个（从左到右）是灵活宽度，第二个也是灵活宽度，第三个是静态宽度，它向右浮动。前两个与第三个位于同一级别的 div 内；也就是说，将前两个的总宽度保持在最大宽度以下。 这是我正在做的事情[的一个jsfiddle 。](http://jsfiddle.net/tRJfX/)

我的问题是，当中间 div 中的文本很长时，中间 div 将低于第一个，而不是让文本换行。我不能给中间的一个最大宽度，因为第一个 div 是灵活的并且可以变得更小。知道我该如何解决这个问题吗？

我知道它可以通过使用表格来实现，但我真的不希望这样做，除非它是唯一简单的解决方案。

**编辑：我决定只做固定宽度。**为此所需的工作量是不值得的，尤其是考虑到在大多数情况下，无论如何我都不会使用灵活的宽度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T23:27:04.917

如果您想要一个纯基于 css 的解决方案，那么它可能有点困难，也没有多少浏览器兼容。尽管您可以通过使用名为`display:table ;`and的 css 属性来实现这一点`display:table-cell;`。再次使用较旧的浏览器，也许 IE-9 也无法呈现它。

那么你应该选择 jQuery 解决方案。您可以使用以下代码 -

```
$(document).ready(function(){
    var w = 400 - $('.inner_container .left_box').width();      
    $('.inner_container .middle')css('width',w);
}); 
```

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T23:47:43.103

自版本 8 起，IE 以及所有版本的 Firefox 和 Chrome/Safari 都支持该`display: table`属性和相关属性，例如。`display: table-cell`

参考：[http ://caniuse.com/#feat=css-table](http://caniuse.com/#feat=css-table)

我相信这是你的情况。

**HTML**

```
<div class="container">
    <div class="inner_container">
        <div class="left_box">
            <p>Lorem ipsum dolor sit amet</p>
        </div>
        <div class="middle">
            <p>Lorem ipsum dolor sit amet</p>
        </div>
    </div>
    <div class="right_static">Hi!</div>
</div> 
```

**CSS**

```
.container {
    position: relative;
    width: 500px;
    border: 1px solid #000;
    overflow: auto;
}

.right_static {
    position: absolute;
    top: 0px;
    right: 0px;
    width: 100px;
    background-color: green;
}    

.inner_container {
    display: table;
    width: 400px;
    overflow: auto;
}

.left_box {
    display: table-cell;
    background-color: red;
}

.middle {
    display: table-cell;
    background-color: #9999FF;
}​ 
```

**演示**

[http://jsfiddle.net/nd7qj/](http://jsfiddle.net/nd7qj/)

顺便说一句，您在问题中提到最左边的 div 应该具有灵活的宽度，但是在您提供的 CSS 中它具有固定的宽度。所以我没有在我的代码中应用宽度。

# objective-c - performSegueWithIdentifier 进入错误视图

> ID：11893164
> 
> 赞同：0
> 
> 时间：2012-08-09T22:53:40.623
> 
> 标签：objective-c, xcode4

我正在使用此代码使 tableview 单元格转到新视图：

`[self performSegueWithIdentifier:@"hello" sender:self];`

但是每当我构建并运行它并单击单元格时，它都会将我带到一个完全不同/不相关的视图。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T10:15:20.063

在您的 TableViewController 中尝试以下代码

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"yourSegueIdentifierName"]) {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        NSManagedObject *object = [[self fetchedResultsController] objectAtIndexPath:indexPath];
        [[segue destinationViewController] setDetailItem:object];
    }
} 
```

这将侦听转场，检查转场的标识符和您选择的行。然后它对您选择的行中的对象执行您的转场。如果需要，它还允许您在一个视图中轻松拥有多个 segue，您只需为不同的 segue 标识符添加“if”函数。

如果您在 TableViewController 中仅使用 ONE segue，则实际上并不需要标识符，但无论如何最好使用它，以防万一您想在以后的代码中添加一些其他 segue。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T23:02:44.000

在情节提要中检查您的 segue 的标识符。

此外，如果您有多个 segue，请检查您是否将正确的 segue 连接到正确的按钮和正确的视图。

# javascript - 如何在 iFrame 中为嵌入式 YouTube 视频捕获 onclick？

> ID：11893171
> 
> 赞同：6
> 
> 时间：2012-08-09T22:54:14.223
> 
> 标签：javascript, html, iframe

我有一个显示嵌入式 youtube 视频的 iFrame。

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/xxx" frameborder="0" allowfullscreen></iframe> 
```

我想做的是以某种方式在用户点击你的视频时捕获点击事件，这样我就可以调用[http://myserver.com/dostuff](http://myserver.com/dostuff) rest api 来更新跟踪点击次数和点击次数的外部服务器计数器当然允许视频按预期播放。

任何信息将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T22:59:01.583

你不能，我相信。那将是一个安全风险。如果您主要想做跟踪之类的，您可能最好做一些事情，例如在用户单击的视频的位置添加图像/按钮，从而导致视频出现。

编辑：[这个解决方案也可以工作](https://stackoverflow.com/questions/6452502/adding-onclick-event-to-iframe)；我不确定它是否适用于不在同一域中的 iframe。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T23:01:14.530

[window.postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)可以提供帮助。但是您应该可以访问在 iframe 中呈现的页面的源代码。因此，在嵌入 youtube 视频的情况下，您可能无法处理此问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T18:17:24.550

每个人都有很好的反馈。感谢所有发帖的人。在尝试了一些技巧之后，底线是通过 html 或 javascript 本身不支持捕获点击事件。

我发现的最好的工件和最干净的解决方案在[这里](https://stackoverflow.com/questions/7260605/how-can-i-track-a-click-event-of-an-embedded-video-youtube-vimeo-etc-to-t)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-01T17:08:35.463

```
//Its possible by recording the stateChange in the video. 
//HTML code----

<!DOCTYPE html>
<html>
  <body>
    <div id='vidWrapper'>
    //your iframe tag goes here.
    <iframe id="video-id-first" src="https://www.youtube.com/embed/nNlEiuqiKAk?enablejsapi=1&amp;origin=http%3A%2F%2F3.7.232.244" gesture="media" allow="encrypted-media" allowfullscreen="" data-gtm-yt-inspected-53610233_3="true" width="560" height="400" frameborder="0"></iframe>
    </div>
   </body>
</html>

//JS code ----

var tag = document.createElement('script');
tag.src = "https://www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
var player;
var width = document.getElementById("video-id-first").getAttribute("width");
var height = document.getElementById("video-id-first").getAttribute("height");
var src = document.getElementById("video-id-first").getAttribute("src");
//splitting to get the videoId from src.
var partsArr = src.split("/");
var videoSource = partsArr[partsArr.length -1 ].split("?");
var videoId = videoSource[videoSource.length -2 ];

      function onYouTubeIframeAPIReady() {
        player = new YT.Player('vidWrapper', {
          height:height,
          width: width,
          videoId: videoId,
          events: {
            'onStateChange': function(event) {
              if (event.data == YT.PlayerState.PLAYING) {
                startVideo();
              }
                if (event.data == YT.PlayerState.PAUSED) {
                stopVideo();
              }
            }
          }
        });
      }
      function startVideo() {
      //write your functionality here.
        alert('Video Started');
      }
       function stopVideo() {
       //write your functionality here.
        alert('Video Paused');
      } 
```

# ios - 在目标平台上找不到应用程序所需的本机扩展“文件”的实现

> ID：11893176
> 
> 赞同：3
> 
> 时间：2012-08-09T22:54:38.170
> 
> 标签：ios, flash, air, air-native-extension

我正在尝试为 iOS 制作我的第一个 ANE，但在尝试编译 .IPA 文件时发现了一个问题。

我得到的错误是：

> 找不到目标平台所需的应用程序所需的本机扩展“XXX”的实现。

其中，“XXX”是我的 ANE 的包。

好吧，我使用带有 AIR 3.2 SDK 的 Flash Build 4.6 来编译一个 SWC 文件，其中包含我需要的所有功能。我使用 XCode 编译了一个包含所有需要的 Objective-C 代码的 .A 文件。两个文件都编译得很好。比我使用 ADT 编译 .ANE 文件。它也工作得很好。

我的 extension.xml 文件似乎没问题：

```
<extension xmlns="http://ns.adobe.com/air/extension/3.1">
    <id>XXX</id>
    <versionNumber>1.0.0</versionNumber>
    <name>ANE_NAME</name>
    <platforms>
        <platform name="iPhone-ARM">
            <applicationDeployment>
                <nativeLibrary>libExtension.a</nativeLibrary>
                <initializer>ExtensionInitializer</initializer>
                <finalizer>ExtensionFinalizer</finalizer>
            </applicationDeployment>
        </platform>
        <platform name="default">
            <applicationDeployment/>
        </platform>
    </platforms>
</extension> 
```

同样，XXX 是我的扩展包。（如：com.example.myANE）

我也在使用 platform.xml 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<platform xmlns="http://ns.adobe.com/air/extension/3.1">

    <sdkVersion>5.1</sdkVersion>

    <linkerOptions>
        <option>-ios_version_min 4.2</option>
    </linkerOptions>

</platform> 
```

并使用以下代码编译 ANE：

> adt -package -target ane MyANE.ANE extension.xml -swc MyANE.swc -platform iPhone-ARM -platformoptions platform.xml library.swf libExtension.a -platform default library.swf

这一切都很好，我有一个 ANE 文件。

嗯，我正在做的项目已经有 4 个其他 ANE，所以我认为 flash 部分没有问题。但是当我使用 ADT 编译 IPA 时，我得到了错误。

任何人都有可以帮助的见解？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T11:35:38.763

您编译 ANE 的代码不包括签名选项。我要编译的脚本与您的相似，但它包含以下参数：

```
-storetype pkcs12 -keystore mac.p12 
```

如果您在 Mac 上编译，请不要使用 windows 生成的 .p12 文件。（反之亦然）如果是这样，您应该能够在 iOS 设备的日志上看到错误（关于无法加载的未签名 ANE）

此外，请记住每次编译 .swc 项目时提取 library.swf。然后您应该清理您的移动项目以包含新的 ANE。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-29T06:43:10.700

你的 ANE 看起来不错，如果你最后得到了 ANE，我会说你做的那部分是正确的。

当您实际编译您的应用程序时，您很可能错过了 -extdir 选项。

```
adt -package 
    -target ipa-ad-hoc 
    -storetype pkcs12 -keystore YOUR_CERT.p12 
    -provisioning-profile YOUR_PROVISIONING_PROFILE.mobileprofile 
    myApp.ipa 
    myApp-app.xml 
    myApp.swf icons Default.png 
    -extdir extensionsDir 
```

或者在 FlashBuilder 中，您忘记在“构建打包”下的设置中将扩展打包到应用程序构建中。在这里查看更多信息：[http ://distriqt.com/post/815](http://distriqt.com/post/815)

# java - android DefaultHttpClient POST 到服务 wcf .svc

> ID：11893180
> 
> 赞同：0
> 
> 时间：2012-08-09T22:54:58.553
> 
> 标签：java, android, iphone, json

我有这个代码

```
public static String methodPost(final String url, final String dataToPost) throws ClientProtocolException,
        IOException, IllegalStateException, Exception {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        StringEntity se = new StringEntity(dataToPost);
        se.setContentEncoding("UTF-8");
        se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
        httpPost.setEntity(se);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        return streamToString(httpEntity.getContent());
    } 
```

我在 IPHONE 上发布了这个并且完美地工作：

```
@"{\"var1\":\"Value1\"}{\"var2\":[{\"item1\":\"1\"},{\"item1\":\"Value2\"}]}" 
```

当我也在 ANDROID 中发帖时。

```
Response return HTTP 1 400 
```

例子：

```
methodPost(url, "{\"var1\":\"Value1\"}{\"var2\":[{\"item1\":\"1\"},{\"item1\":\"Value2\"}]}"); 
```

但是，我发布这个

```
methodPost(url, "{\"var1\":\"Value1\"}{\"var2\":\"Value2\"}"); 
```

只有当我使用“[]”我有一些错误时，这才能完美地工作

对不起我的英语不好 ：）

# mysql - 使用主键将忽略插入 Mysql

> ID：11893187
> 
> 赞同：2
> 
> 时间：2012-08-09T22:55:47.903
> 
> 标签：mysql, primary-key, insert-into

我正在尝试使用 INSERT IGNORE INTO 将行添加到表中（如果它尚不存在）。
这是目前的声明：

```
INSERT IGNORE INTO my_table (integer, date) VALUES (11111, CURDATE()) 
```

但是，由于我在表上有一个自动递增的主键（这当然不是插入的一部分），所以它总是进行插入。有没有办法忽略主键，这样如果整数和日期已经在表中，它就不会插入另一行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T22:59:20.203

将 UNIQUE 键放在整数和日期上，或两者的组合上 - 以适合您的需要为准。这将防止`INSERT IGNORE`插入违反 UNIQUE 索引的值。

例如，如果您想让两者的组合独一无二：

```
alter table my_table add unique index(integer, date) 
```

# python - Python 3.2：Battle.net scraper 在某些 URL 上给出 404

> ID：11893191
> 
> 赞同：0
> 
> 时间：2012-08-09T22:56:16.720
> 
> 标签：python, screen-scraping, http-status-code-404, web-scraping

我正在用python编写一个战网屏幕刮板，我想刮掉[这个页面](http://us.battle.net/sc2/en/game/unit/)。

问题是，当我尝试使用我的脚本下载它时，我得到了 404。但是，在 Web 浏览器中查看它就可以了。

如果有帮助，这是我正在使用的代码（需要[请求](http://python-requests.org/)）：

```
def download(url, max_retries=10):
    for i in range(max_retries):
        print('Downloading: ' + url)
        r = requests.get(url)

        print('Status code: ' + str(r.status_code))

        if r.status_code == requests.codes.ok: return r.content
    return None

download('http://us.battle.net/sc2/en/game/unit') 
```

感谢您的任何回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T23:08:41.797

试试这个。显然，结尾的斜线是必要的。

```
def download(url, max_retries=10):
    for i in range(max_retries):
        print('Downloading: ' + url)
        r = requests.get(url)

        print('Status code: ' + str(r.status_code))

        if r.status_code == requests.codes.ok: return r.content
    return None

download('http://us.battle.net/sc2/en/game/unit/') 
```

# c# - 从 JSONP 中提取 JSON

> ID：11893195
> 
> 赞同：0
> 
> 时间：2012-08-09T22:56:40.197
> 
> 标签：c#, json, parsing

我正在使用 C# 解析 JSON 文件。这是我从服务器得到的：

```
loadData([ 
{"id":"id1","nm":"name1"}, 
{"id":"id2","nm":"name2"}, 
{"id":"id3","nm":"name3"}
]); 
```

这不是整个字符串，因为我删除了一些值以使其看起来更简单。

如您所见，此 JSON 不可解析，因为它以分号 ( `;`) 结尾，并且还有许多其他问题需要修复。

现在我有了这些数据，我可以在客户端做任何解决方法来解析这个 JSON 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:01:50.943

服务器给你的不仅仅是 JSON 文件。它给了你这样`loadData(jsonData);`的`jsonData`外观：

```
[ 
    {"id":"id1","nm":"name1"}, 
    {"id":"id2","nm":"name2"}, 
    {"id":"id3","nm":"name3"}
] 
```

因此，您必须对其进行解析以提取 JSON 文件。

# c++ - 公开对象管理器对象的可接受方式？

> ID：11893209
> 
> 赞同：1
> 
> 时间：2012-08-09T22:58:23.777
> 
> 标签：c++, oop, boost, smart-pointers

场景是，我正在构建一个带有 TextureManager 类的游戏，该类负责加载和管理纹理。实现 IVisibleGameObject 的游戏对象将需要来自 TextureManager 的纹理指针/引用。

纹理管理器是用 a 实现的，`std::map<std::string, boost::shared_ptr<Texture> >`以在内部保存其对象。

我不确定我应该如何实际暴露纹理，并想到了一些可能性，每种可能性都有自己的缺点：

1)`const Texture& GetTex(std::string textureKey)`

我觉得这很理想，但我想通过返回 NULL 来表明在地图中未找到纹理。（第二次猜测自己......这合适吗？）

2)`shared_ptr<const Texture> GetTex(std::string textureKey)`

在这里我可以返回一个空的 shared_ptr，但我对它现在是一个共享对象的暗示感到不舒服。TextureManager 是对象的所有者，毕竟它是管理者。但是，考虑到 IVisibleGameObject 拥有一个指向返回的纹理的引用/指针，并且依赖于它的存在才能正常运行，它是否也是该对象的所有者，也许共享所有权是合适的？

3)`const Texture* GetTex(stD::string textureKey)`

显然，这是错误的答案。

希望有人为我解决这个问题，也许有一些我没有考虑过的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T23:29:30.573

我会坚持使用标准库习语并简单地公开`find`和`end`. 然后你可以非常高效：

```
auto it = my_objects.find("foo");

if (it == my_objects.end())
{
    // handle "not found"
}
else
{
    it->second->do_magic();
} 
```

标准库已经有一个完全可用的通用习惯用法，用于处理集合和指示元素的存在或不存在，以及组合插入新或返回现有语义。为什么要重新发明轮子...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T23:03:10.520

我要做的是让 TextureManager 持有指向每个纹理的单个共享指针，并使 GameObjects 持有弱指针。这样，您可以确保在退出时正确释放了所有内容（保证没有循环）。

# python - 版本升级后没有在 matplotlib 中绘图

> ID：11893210
> 
> 赞同：1
> 
> 时间：2012-08-09T22:58:56.607
> 
> 标签：python, matplotlib

我刚刚在运行 ubuntu 10.04 LTS 的服务器上将 matplotlib 更新为 1.1.0，以便更好地使用 pandas。Pandas 正在根据不同版本的 matplotlib 的功能转换我的索引。我在另一台服务器上使用“easyinstall -U matplotlib”和“pip install -U matplotlib”安装。

我无法在我以前的任何工作脚本或 ipython 中绘图。show() 已停止在 pylab 中工作。有人可以指出我可能会被破坏的方向吗？

我从 matplotlib 的站点获取了以下测试脚本“simple_plot.py”，并在第一次删除我的配置目录后在各种服务器上对其进行了测试。

```
from pylab import *
plot([1,2,3])
show() 
```

simple_plot 在版本 <= 0.99 上运行但在版本 1.1 上没有输出的所有服务器上生成图。

这是一台不起作用的服务器上的调试输出：

```
$HOME=/home/michael
CONFIGDIR=/home/michael/.matplotlib
matplotlib data path /usr/local/lib/python2.6/dist-packages/matplotlib-1.1.0-py2.6-linux-x86_64.egg/matplotlib/mpl-data
loaded rc file /usr/local/lib/python2.6/dist-packages/matplotlib-1.1.0-py2.6-linux-x86_64.egg/matplotlib/mpl-data/matplotlibrc
matplotlib version 1.1.0
verbose.level debug
interactive is False
platform is linux2
Using fontManager instance from /home/michael/.matplotlib/fontList.cache
backend agg version v2.2
python version:2.6.5
findfont: Matching :family=sans-serif:style=normal:variant=normal:weight=normal:stretch=normal:size=medium to Bitstream Vera Sans (/usr/local/lib/python2.6/dist-packages/matplotlib-1.1.0-py2.6-linux- x86_64.egg/matplotlib/mpl-data/fonts/ttf/Vera.ttf) with score of 0.000000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:05:21.983

您正在使用 Agg 后端，它不会在显示屏上显示该图形。这是 matplotlib 的默认设置。您需要在 matplotlib 配置文件（通常为 ~/.matplotlib/matplotlibrc）中更改后端。寻找零件：

```
backend      : Agg 
```

并将“Agg”替换为以下之一：GTKAgg、Qt4Agg、TkAgg、WXAgg。您可能没有在系统中安装所有这些（或任何！），所以请尝试一个可行的。

如果您没有文件 ~/.matplotlib/matplotlibrc，则从您的主配置中复制它：

```
cp /usr/local/lib/python2.6/dist-packages/matplotlib-1.1.0-py2.6-linux-x86_64.egg/matplotlib/mpl-data/matplotlibrc ~/.matplotlib/matplotlibrc 
```

# android - 在 SQLite 中获取 MAX 日期

> ID：11893218
> 
> 赞同：6
> 
> 时间：2012-08-09T23:00:29.650
> 
> 标签：android, sqlite

我使用 SQLite 作为我的 Android 应用程序的数据存储。我创建了一个包含日期时间类型列的表。当我插入记录或选择语句时，我使用日期格式 dd.MM.yyyy (10.08.2012)。

现在，我在获取具有最新 / MAX 日期的行时遇到问题。我曾尝试使用 MAX(date_column) 语句，但它返回错误的日期。我的表中有以下日期，它返回 31.07.2012 而不是 04.08.2012。有人知道我在做什么错吗？

```
04.08.2012
03.08.2012
02.08.2012
01.08.2012
31.07.2012
30.07.2012 
```

以下是部分代码：

```
String selection = "measurementDate = (SELECT MAX(measurementDate) FROM Measurements)";
Cursor cursor = database.query("Measurements", allColumns, selection, null, null, null, null);
cursor.moveToFirst();
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T23:23:40.837

难道是因为31？
尝试看看这是否有帮助：

```
SELECT measurementDate FROM Measurements ORDER BY measurementDate desc LIMIT 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T23:23:59.590

这可能是由于对存储的字符串进行比较而不是将其视为日期。

您可以将字符串存储在不同的 YYYYMMDD 中，这样应该可以正确比较它们，或者，如果您可以修改表，将日期存储为毫秒并在需要时格式化回字符串。

[这可能会有所帮助](https://stackoverflow.com/questions/1975737/sqlite-datetime-comparison/%22This%20might%20help%22)

# javascript - 单击另一个时如何更改div样式

> ID：11893219
> 
> 赞同：0
> 
> 时间：2012-08-09T23:00:32.703
> 
> 标签：javascript, jquery, html

单击时我会更改 div css 样式，然后单击另一个时更改为主要状态。我使用了这段代码，但它只是在单击另一个 div 时重新更改它，这里的代码正在尝试：

```
$('.mydiv').click(
function() {

    $(this).stop().animate({
    width:'960px',
    backgroundColor : '#000'
}, 500);
    }, function () {
    $(this).stop().animate({width:'300px', backgroundColor : "green"}, 300);

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T23:05:49.003

您可能正在寻找[toggle()](http://api.jquery.com/toggle/)功能：

```
$('.mydiv').toggle(function() {
    $(this).stop().animate({
        width: '960px',
        backgroundColor: '#000'
    }, 500);
}, function() {
    $(this).stop().animate({
        width: '300px',
        backgroundColor: "green"
    }, 300);
});​ 
```

你需要 jQuery UI 来为颜色设置动画吗？

[小提琴](http://jsfiddle.net/YGAm5/3/)

**编辑：**

您可能仍在寻找[toggle()](http://api.jquery.com/toggle/)函数，但要在单击另一个 div 时为一个 div 设置动画，请停止使用`this`关键字并定位您要设置动画的 div：

```
$('#someDiv').toggle(function() {
    $('.mydiv').stop().animate({
        width: '960px',
        backgroundColor: '#000'
    }, 500);
}, function() {
    $('.mydiv').stop().animate({
        width: '300px',
        backgroundColor: "green"
    }, 300);

});​ 
```

[**小提琴**](http://jsfiddle.net/YGAm5/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T23:06:04.013

尝试这个：

```
$('.mydiv').click(function() {

    $(this).stop().animate({
        width:'960px',
        backgroundColor : '#000'
    }, 500, function() {
        $(this).stop().animate({width:'300px', backgroundColor : "green"}, 300);
    });
}); 
```

# java - 从单独的包中获取传感器

> ID：11893220
> 
> 赞同：0
> 
> 时间：2012-08-09T23:00:37.100
> 
> 标签：java, android

我正在做一个小项目，我正在制作一个将在 MapView 之上使用的指南针。在其自己的活动中（不在 MapView 上）运行程序（指南针部分）时，一切正常，但由于指南针必须集成到另一个包含包含 MapView 的活动的包中，我希望我的指南针代码可以访问从那个包。

问题是我不知道从另一个包初始化传感器，或者我是否必须从 Activity 本身进行初始化，然后以某种方式将 SensorManager 的实例传递给 compass 包。

我希望我的问题足够具体，但如果不是，我很乐意发布我的一些代码:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T23:27:58.950

如果你有一个有效的[上下文](http://developer.android.com/reference/android/content/Context.html#getSystemService%28java.lang.String%29)，你可以从另一个包启动传感器管理器。

```
public class compass implements SensorEventListener {
  SensorManager mSensorManager;

  public compass(Context context) {
    mSensorManager = (SensorManager)context.getSystemService(SENSOR_SERVICE);

    // do stuff like register listener
  }
} 
```

# ruby-on-rails - Rails 创建多个记录，其中一个字段不同

> ID：11893226
> 
> 赞同：1
> 
> 时间：2012-08-09T23:01:27.167
> 
> 标签：ruby-on-rails, ruby-on-rails-3, refactoring

在我的`Contract`表单中，我允许用户`Unit`从下拉框中选择一个，或者从一组复选框中选择多个单位。下拉字段被命名`unit_id`，多个复选框被命名`multi_unit_ids[]`。（因为这两个选项都在页面上，所以我不能使用相同的名称）。

每个所选单位创建 1 个合同。因此，如果只选择了 1 个单位，则仅`Contract`使用该`unit_id`. However, when choosing multiple Units, all of the data is the same for each `Contract`created, however each has their own Unit ID (pulled from the multi_unit_ids array).

这是我的`create`方法中的代码 my `contracts_controller.rb`：

```
# Multiple Units? Multiple Contracts
if params[:multi_unit_id]
  unit_arr = params[:multi_unit_id]
else
  unit_arr = [*params[:contract][:unit_id]]
end

# Loop through units
unit_arr.each do |unit_id|
  # Assign the unit id to the params for easy creation
  params[:contract][:unit_id] = unit_id

  @contract = Contract.new(params[:contract])
  # ... other code here
  @contract.save
end 
```

这一切似乎太混乱了！有什么更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:56:04.230

好吧，就在没有循环的情况下创建这些数据库条目而言，我不能提出太多建议。我不确定这是否可能，而且实际上该循环似乎并不足以引起真正的压力，除非`# ... other code here`您省略的部分中有混乱。

事实上，我将要提出的建议可能会让您觉得代码更加混乱。

如果您计划创建大量数据库行，则将循环包装成`ActiveRecord::Base.transaction`类似于以下内容可能是个好主意：

```
# Loop through units
ActiveRecord::Base.transaction do
  unit_arr.each do |unit_id|
    # Assign the unit id to the params for easy creation
    params[:contract][:unit_id] = unit_id

    @contract = Contract.new(params[:contract])
    # ... other code here
    @contract.save
  end
end 
```

或者，使用其他方法将创建组合到单个查询中（还有其他选项和基准，可在[http://www.coffeepowered.net/2009/01/23/mass-inserting-data-in-rails -没有杀死你的表现/](http://www.coffeepowered.net/2009/01/23/mass-inserting-data-in-rails-without-killing-your-performance/)）。

不过，就重构而言，我在这里不能提供太多。

# javascript - 两个下拉列表中的文本字段

> ID：11893232
> 
> 赞同：0
> 
> 时间：2012-08-09T23:02:26.467
> 
> 标签：javascript

此脚本生成一个下拉表单，我可以在其中选择可以显示的下拉字段的数量。但是我有点坚持这一点。我现在的问题是如何根据第二个下拉表单的值创建默认文本字段？例如，如果我选择“女士”。它将产生两个文本字段，否则只会产生一个文本字段。

**jQuery**

```
$(document).ready(function() {
    $('#bookinfo_adult').change(function() {
        var num = $('#bookinfo_adult').val();
        var i = 0;
        var html = '';
        for (i = 1; i <= num; i++) {
            html += '<br>' + i + '. <select name="gender4-' + i + '">' + '</' + 'option>' + '<option value=' + '"m">Mr. ' + '</option' + '>' + '<option value=' + '"f">' + 'Ms. ' + '</option' + '>' + '</select' + '></br>';
        }
        $('#list').html(html);
    });
});​ 
```

**HTML**

```
<select id="bookinfo_adult" name="bookinfo_adult">
       <option value="0">- SELECT -</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
    </select>
<div id="list"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T01:20:20.720

不太确定您在问什么，但我想您想根据生成的`select`元素中的当前选择动态显示输入字段？

那么这个怎么样？

**HTML：**

```
<input type="text" id="bookinfo_adult">
<div id="list"></div> 
```

**CSS：**

```
#list input { display: none; } 
```

**JS：**

```
$(document).ready(function() {
    $('#bookinfo_adult').change(function() {
        var num = $('#bookinfo_adult').val(), i = 0, html = '';
        for (i = 1; i <= num; i++) {
            html += '<div>' + i + '. \
                         <select name="gender4-'+i+'"><option/><option value="m">Mr.</option><option value="f">Ms.</option><select> \
                         <input type="text" class="ms"> <input type="text" class="mr">\
                     </div>';
        }
        $('#list').html(html);
    });
    $(document).on("change", "#list select", function(){
        var parent = $(this).closest("div");
        switch ($(this).val()) {
            case "m": parent.find(".mr").show(); parent.find(".ms").hide(); break;
            case "f": parent.find("input").show(); break;
            default: parent.find("input").hide(); break;
        }
    });
}); 
```

我刚刚添加了两个文本字段（最初用 CSS 隐藏）并将下拉列表的每一“行”都包裹在一个`div`更容易选择的地方。然后`onchange`创建一个处理程序，该处理程序适用于将来添加到 DOM 的所有元素（一旦您可以使用`jQuery.live()`它，但从 1.7 版开始已弃用）。处理程序本身应该是不言自明的。;)

工作示例：http: [//jsfiddle.net/DfXEE/](http://jsfiddle.net/DfXEE/)

# css - 导航栏中心位置

> ID：11893233
> 
> 赞同：4
> 
> 时间：2012-08-09T23:02:28.183
> 
> 标签：css, layout

我目前正在使用测试站点的底部导航栏。问题是导航栏没有正确居中。我添加了`.left`属性以使每个阻止列表彼此相邻。我怎样才能让这个底部导航栏自动居中（无论添加了多少列表）？ [例子](http://webprolearner2346.zxq.net/css-test2/index.php)

**与底部导航相关的 CSS**

```
<style>
.bottomnavControls {
    padding-top:10px;
    padding-bottom:10px;
    padding-right:0;
    text-decoration:none;
    list-style:none;
}

#footer {
    position: absolute;
    width: 100%;
    bottom: 0;
    background: #7a7a7a;
    border-bottom: 15px solid #000;
}
.left {
    float: left;
}
.right {
    float: right;
}

</style> 
```

**HTML**

```
<div id="footer">
    <div class="bottomNav"> 
            <ul class="bottomnavControls left">
           <li style="padding-bottom:5px;"><b>Home</b></li>
           <li><a href=""  class="footer">Login</a></li>
            </ul>    

            <ul class="bottomnavControls left">
           <li style="padding-bottom:5px;"><b>Category</b></li>
           <li><a href=""  class="footer">Games</a></li>
            </ul>

           <ul class="bottomnavControls left">
          <li style="padding-bottom:5px;"><b>About</b></li>
          <li><a href=""  class="footer">Who We Are</a></li>
           </ul>

           <ul class="bottomnavControls left">
             <li style="padding-bottom:5px;"><b>Links</b></li>
             <li><a href="www.google.com" target="_new" class="footer">Google</a></li>
           </ul>

           <ul class="bottomnavControls left">
         <li style="padding-bottom:5px;"><b>Other Stuff</b></li>
             <li><a href=""  class="footer">Stuff</a></li>
          </ul>      
      </div>
</div> 
```

**我当前的底部导航：**

![在此处输入图像描述](../Images/3bfdc145e72aa14c570b96cb089b6a8f.png)

**我想要的结果：**

![在此处输入图像描述](../Images/0a7224e1aaed599ca47d0fb4b26fb294.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T23:06:30.207

而不是`float`，你应该[`display: inline-block`](http://www.quirksmode.org/css/display.html#inlineblock)在这里使用。这样，您可以通过放置`text-align: center`容器轻松地将它们居中。

```
.bottomNav { text-align: center; }
.bottomnavControls { display: inline-block; } 
```

并删除`left`类。

**注意：** `display: inline-block`在现代浏览器中运行良好，但[在 IE7 中需要破解](https://stackoverflow.com/questions/6544852/ie7-problem-with-display-inline-block/6545033#6545033)。

# php - 使用从 MySQL 调用的内容

> ID：11893234
> 
> 赞同：-2
> 
> 时间：2012-08-09T23:02:40.237
> 
> 标签：php, mysql, database

我正在尝试创建一个简单的链接。问题是文件名将来自数据库。

例子：`<a href="foldername/**FileNameInSQL.zip**">Download</a>`

我对 MYSQL 的工作并不多，并且已经拼凑出一些到目前为止正在工作的东西

```
<?php
$products_id = $_GET['id'];

mysql_connect("localhost", "username", "password") or die(mysql_error()); 

mysql_select_db("database") or die(mysql_error()); 

$sql = "select * from znc_product_extra_fields where products_id = '" . $products_id . "'"; 

$query = mysql_query($sql);

while ($row = mysql_fetch_array($query)) { 
echo $row['file_1']; 
}

?> 
```

当我运行它时，它会执行我想要的操作，它会回显分配给该特定行的文件名（项目编号）

但是我迷失了如何将其转换为链接。我唯一能想到的就是以某种方式将此结果分配给一个变量并在创建链接时调用它，但我不知道如何获取这个正确的结果并实际使用它！我将如何获取此文件名并将其放在链接中

`<a href="foldername/**FileNameInSQL.zip**">Download</a>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:08:56.993

PHP 输出你想要的任何东西 - 文本、HTML、XML 等。所以只需输出 HTML。我想你想要的是：

`echo "<a href=\"foldername/".$row['file_1']."\">Download</a>";`

尽管您不应该使用过时的 mysql_* 函数。请参阅[PDO](http://us.php.net/manual/en/class.pdo.php)（最佳选择）或[mysqli](http://us3.php.net/manual/en/class.mysqli.php)。

要防止 SQL 注入，请使用[PDO::quote](http://us.php.net/manual/en/pdo.quote.php)（如果您使用 PDO）或[mysqli_real_escape_string](http://us3.php.net/manual/en/mysqli.real-escape-string.php)（如果您使用 mysqli）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T23:10:24.200

`echo '<a href="/folder/' . $row['file_1'] . '">file</a>;`

*   您的代码容易受到 MySQL 注入的影响。`real_escape_string` 在您的`GET, POST`参数上使用。
*   您应该使用 PDO（请参阅 tereško 评论了解原因）

# sql - SQLERRM - 其他错误类型的类似函数

> ID：11893245
> 
> 赞同：2
> 
> 时间：2012-08-09T23:03:40.770
> 
> 标签：sql, oracle, function

这是[这个问题](https://stackoverflow.com/questions/11892043)的延续。

**我的问题：**我正在寻找一个像[SQLERRM](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/sqlerrm_function.htm)这样的函数，它将为我提供所有 Oracle 错误代码的描述。

从[这个网站](http://www.ora-code.com/)，我找到了这个 oracle 错误类型列表：

```
AMD, AUD, CLS, DBV, DGM, DRG, EXP, IMG, IMP, KUP, LCD, LFI, LPX, LRM,
LSX, NCR, NID, NMP, NNC, NNF, NNL, NNO, NPL, NZE, O2F, O2I, O2U, OCI,
ORA-CODE, PCB, PCC, PLS, PLW, PRO, QSM, RMA, SQL, TNS, UDE, UDI, VID 
```

我是误解了什么还是有可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:49:14.820

就像是

```
SQL> !oerr ora 04043
04043, 00000, “object %s does not exist”
// *Cause: An object name was specified that was not recognized by the system.
// There are several possible causes:
// – An invalid name for a table, view, sequence, procedure, function,
// package, or package body was entered. Since the system could not
// recognize the invalid name, it responded with the message that the
// named object does not exist.
// – An attempt was made to rename an index or a cluster, or some
// other object that cannot be renamed.
// *Action: Check the spelling of the named object and rerun the code. (Valid
// names of tables, views, functions, etc. can be listed by querying
// the data dictionary.) 
```

这是 Oracle 中的错误查找实用程序。

```
Usage: oerr facility error 
```

`facility`是任何错误类型，例如`ora`，`amd`等等，并且`error`是代码。但是您需要确保您拥有对所有已安装目录的访问权限。

[这](http://docs.oracle.com/cd/B19306_01/server.102/b14219.pdf)是您需要的 PDF 格式。

# java - 来自数据库的 Java bmp

> ID：11893249
> 
> 赞同：0
> 
> 时间：2012-08-09T23:04:43.500
> 
> 标签：java, database, bmp

我需要使用 Java 从数据库创建 BMP（位图）图像。问题是我有大量从 10 到 100 的整数。

我想将整个数据库表示为 bmp。每个表 10000x10000 的数据量（并且还在增长）超过了我可以使用 int 数组处理的数据量。

有没有办法将 BMP 直接逐个像素地写入硬盘，这样我就不会耗尽内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:27:28.223

一个文件可以工作（我绝对不会按像素调用，你会等待几个小时才能得到结果）。你只需要一个缓冲区。按照 -> 的方式拆分应用程序

```
int[] buffer = new int[BUFFER_SIZE];

ResultSet data = ....;  //Forward paging result set

while(true)
{
  for(int i = 0; i < BUFFER_SIZE; i++)
  {
    //Read result set into buffer

  }
  //write buffer to cache (HEAP/File whatever)

  if(resultSetDone)
    break;
} 
```

阅读有关数据库驱动程序的文档，但任何主要数据库都会优化您的 ResultSet 对象，这样您就可以使用游标而不必担心内存。

话虽如此... int[10000][10000] 并不是您内存不足的原因。这可能是您对这些值和算法所做的事情。例子：

```
public class Test
{
  public static void main(String... args)
  {
    int[][] ints = new int[10000][];

    System.out.println(System.currentTimeMillis() + " Start");
    for(int i = 0; i < 10000; i++)
    {
      ints[i] = new int[10000];
      for(int j = 0; j < 10000; j++)
        ints[i][j] = i*j % Integer.MAX_VALUE / 2;

      System.out.print(i);
    }
    System.out.println();
    System.out.println(Integer.valueOf(ints[500][999]) + " <- value");

    System.out.println(System.currentTimeMillis() + " Stop");
  }

} 
```

输出->

```
1344554718676 Start
//not even listing this
249750 <- value
1344554719322 Stop 
```

编辑——或者如果我误解了你的问题，试试这个——> [http://www.java2s.com/Code/Java/Database-SQL-JDBC/LoadimagefromDerbydatabase.htm](http://www.java2s.com/Code/Java/Database-SQL-JDBC/LoadimagefromDerbydatabase.htm)

我明白了……看看周围，我生疏了，但这似乎是一种方法。我会仔细检查我的缓冲...

```
import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.ByteArrayInputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;

public class Test
{
  public static void main(String... args)
  {
    // 2 ^ 24 bytes, streams can be bigger, but this works...
    int size = Double.valueOf((Math.floor((Math.pow(2.0, 24.0))))).intValue();

    byte[] bytes = new byte[size];

    for(int i = 0; i < size; i++)
      bytes[i] = (byte) (i  % 255);

    ByteArrayInputStream stream = new ByteArrayInputStream(bytes); 

    File file = new File("test.io"); //kill the hard disk

    //Crappy error handling, you'd actually want to catch exceptions and recover
    BufferedInputStream in = new BufferedInputStream(stream);
    BufferedOutputStream out = null;
    byte[] buffer = new byte[1024 * 8];
    try
    {
      //You do need to check the buffer as it will have crap in it on the last read
      out = new BufferedOutputStream(new FileOutputStream(file));
      while(in.available() > 0)
      {
        int total = in.read(buffer);
        out.write(buffer, 0, total);
      }
    }
    catch (IOException e)
    {
      e.printStackTrace();
    }
    finally
    {
      if(out != null)
        try
        {
          out.flush();
          out.close();
        }
        catch (IOException e)
        {
          e.printStackTrace();
        }
    }

    System.out.println(System.currentTimeMillis() + " Start");

    System.out.println();
    System.out.println(Integer.valueOf(bytes[bytes.length - 1]) + " <- value");
    System.out.println("File size is-> " + file.length());
    System.out.println(System.currentTimeMillis() + " Stop");
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T23:06:53.390

您可以将其保存为文件，从概念上讲，它只是一个字节序列。

# c++ - std::vector 内部结构

> ID：11893251
> 
> 赞同：3
> 
> 时间：2012-08-09T23:05:13.017
> 
> 标签：c++, gcc, c++11

是如何`std::vector`实现的，使用什么数据结构？当我写

```
void f(int n) {
  std::vector<int> v(n);
  ...
} 
```

向量是否`v`在堆栈上分配？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T23:12:30.343

该`vector`对象将在**堆栈**​​上分配，并在内部包含指向**堆上**元素*开头*的指针。

 ****堆上**的元素使`vector`类能够按需增长和缩小。

虽然将`vector`放在**堆栈**上会给对象带来超出范围时被破坏的好处。

关于您的`[]`问题，`vector`该类**重载**了`[]`运算符。我会在内部说，当你这样做时，它**基本上**是在做这样的事情`array[1]`：

```
return *(_Myfirst+ (n * elementSize)) 
```

在哪里`vector`跟踪它的内部堆的开始`_Myfirst`。

当你`vector`开始填满时，它会为你**分配**更多的内存。一种常见的做法是每次将所需的内存量*加倍。*

**请注意**，`vector`继承自`_Vector_val`，其中包含以下成员：

```
pointer _Myfirst;   // pointer to beginning of array
pointer _Mylast;    // pointer to current end of sequence
pointer _Myend; // pointer to end of array
_Alty _Alval;   // allocator object for values 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-09T23:07:00.177

你`v`被分配在**自动内存中**。（俗称栈，是的）

没有指定实现细节，但最常见的是使用动态数组来实现，如果您尝试添加比先前分配更多的元素，该数组会调整大小。

该标准仅指定接口（它应该具有哪些方法）和执行时间边界。

由于`vector`是模板，因此实现是可见的，因此找到您的`<vector>`文件并开始检查。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T23:13:46.677

```
void f(int n) {
  std::vector<int> v(n);
  ...
} 
```

上面的向量具有自动存储持续时间，并在堆栈上分配。但是，向量管理的数据数组是在堆上分配的。

向量的内部结构是特定于实现的，但典型的实现将包含 3 个指针；一个来跟踪数组的开始，向量的大小和向量的容量。**

# c# - DataTable.Select() 属性：给出索引超出范围异常

> ID：11893257
> 
> 赞同：4
> 
> 时间：2012-08-09T23:05:30.847
> 
> 标签：c#, asp.net

我试图只选择那些父 ID = 0 的行

```

`int predecessor = Parent;

        StringBuilder valuePath = new StringBuilder();
        valuePath.Append(Parent.ToString());

DataRow[] drPar;

            while (true)
            {
                drPar = dt.Select("MenuID=" + predecessor);
                if (drPar != null)
                {
                    if (drPar[0]["ParentID"].ToString().Equals("0"))
                    break;
                }` 

drPar[0]["ParentID"].ToString().Equals("0") 给了我出界异常..

请帮忙 ！

            回答 #1

赞同：7

时间：2012-08-09T23:14:25.537

[`DataTable.Select`](http://msdn.microsoft.com/en-us/library/det4aw50%28v=vs.80%29.aspx)`null`当没有匹配`DataRow`但带有 . 的数组时不返回`Length==0`。

但除此之外，你为什么只对一个语句使用“无限”循环？

所以这应该工作：

```
drPar = dt.Select("MenuID=" + predecessor);
if (drPar.Length != 0)
{
    if (drPar[0]["ParentID"].ToString().Equals("0"))
    {
       // ...
    }
} 
```

            回答 #2

赞同：2

时间：2012-08-09T23:08:27.877

数组 drPar 必须为空才能给出此错误，因为它是您在代码中使用的唯一索引。

尝试

```
 if (drPar != null && drPar.Length > 0) 
```

```

# codeigniter - 从外部站点登录我的 Wordpress 博客时事通讯 - 如何？

> ID：11893258
> 
> 赞同：0
> 
> 时间：2012-08-09T23:05:32.407
> 
> 标签：codeigniter, wordpress

我想在我的 WP 博客上发布时事通讯，并且有很多插件可以完成这项工作。所以没问题。

我有基于 PHP 框架 CodeIgniter 的外部网站。我想要一个表格，让我可以登录我的 WP 博客时事通讯 - 有可能吗？如果是，该怎么做？

这两个站点在同一台服务器上。

博客是：www.mysite.com

网站是：www.mysite.com/site2/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:20:01.390

您可以使用 WP 登录表单代码将用户 ID/密码从您的 CI 页面提交到 wp-login.php。您可以将 redirect_to 表单变量设置为您想要的任何登录页面。

```
<form name="loginform" id="loginform" action="http://mysite.com/wp-login.php" method="post">
<p>
    <label>Username<br />
    <input type="text" name="log" id="user_login" class="input" value="" size="20" tabindex="10" /></label>
</p>
<p>
    <label>Password<br />
    <input type="password" name="pwd" id="user_pass" class="input" value="" size="20" tabindex="20" /></label>
</p>
<p class="forgetmenot"><label><input name="rememberme" type="checkbox" id="rememberme" value="forever" tabindex="90" /> Remember Me</label></p>
<p class="submit">
    <input type="submit" name="wp-submit" id="wp-submit" class="button-primary" value="Log In" tabindex="100" />
    <input type="hidden" name="redirect_to" value="http://mysite.com/mysite2/somelandingpage.php" />
    <input type="hidden" name="testcookie" value="1" />
</p> 
```

# ruby-on-rails - 通过双层 has_many 关系检索结果集

> ID：11893262
> 
> 赞同：2
> 
> 时间：2012-08-09T23:05:52.360
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有三个模型：

*   用户
*   文件
*   下载

`User`has_many `Files`,`File`属于_to`User`

`File`has_many `Downloads`,`Download`属于_to`User`

有没有办法检索所有 a `User`，`Downloads`而不遍历 all `Files`，然后检索`Downloads`与每个文件关联的？（这会产生很多查询）

**编辑**

我找到了一种加载 的方法，`User`它只是 3 个查询`Files``Downloads`

```
user = User.includes(:uploads => [:downloads]).find(1) 
```

但是，如果我已经有一个`User`对象怎么办？

如果我只想加载用户下载而不加载他们的上传怎么办？（使用连接）

**编辑**

```
Download.joins(:upload => :user).where(:users  => { :id => user.id }) 
```

有没有办法直接引用用户表的主键？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T23:43:53.480

你有没有尝试过

```
class User
  has_many :downloads, :through => :files
end 
```

# ant - CruiseControl - PHP lint 检查通过 ANT 工作，但不能通过 CruiseControl

> ID：11893263
> 
> 赞同：6
> 
> 时间：2012-08-09T23:05:53.843
> 
> 标签：ant, cruisecontrol, lint, phplint

所以我正在编写一个 ant 构建文件，它将在 Cruisecontrol 中使用并遇到一个奇怪的问题。我已经用谷歌搜索了这个问题，但没有遇到任何具体的解决方案，所以我想我会在这里发布这个问题。

我有以下蚂蚁任务：

```
<target name="module.lint">
    <apply executable="/usr/bin/php" failonerror="true">
        <arg value="-l" />
        <fileset dir="/path/to/my/elite/code" includes="**/*.php" />
    </apply>
</target> 
```

当我使用以下命令运行它时：

```
ant -buildfile /path/to/my/elite/buildfiles/project/elite/build.xml module.lint 
```

它运行良好，但是当我尝试通过 CruiseControl GUI 构建项目时，出现以下错误：

```
[cc]Aug-09 15:51:04 ScriptRunner  - fileset: Setup scanner in dir /path/to/my/elite/code with patternSet{ includes: [**/*.php] excludes: [] }
[cc]Aug-09 15:51:04 ScriptRunner  -     [apply] Executing '/usr/bin/php' with arguments:
[cc]Aug-09 15:51:04 ScriptRunner  -     [apply] '-l'
[cc]Aug-09 15:51:04 ScriptRunner  -     [apply] '/path/to/my/elite/code/Script.php'
[cc]Aug-09 15:51:04 ScriptRunner  -     [apply]
[cc]Aug-09 15:51:04 ScriptRunner  -     [apply] The ' characters around the executable and arguments are
[cc]Aug-09 15:51:04 ScriptRunner  -     [apply] not part of the command.
[cc]Aug-09 15:51:04 ScriptRunner  - Execute:Java13CommandLauncher: Executing '/usr/bin/php' with arguments:
[cc]Aug-09 15:51:04 ScriptRunner  - '-l'
[cc]Aug-09 15:51:04 ScriptRunner  - '/path/to/my/elite/code/Script.php'
[cc]Aug-09 15:51:04 ScriptRunner  -
[cc]Aug-09 15:51:04 ScriptRunner  - The ' characters around the executable and arguments are
[cc]Aug-09 15:51:04 ScriptRunner  - not part of the command.
[cc]Aug-09 15:51:04 ScriptRunner  -     [apply] No syntax errors detected in /path/to/my/elite/code/Script.php 
```

不知道为什么我会收到“字符......不是命令的一部分”错误，尽管看起来 lint 检查确实执行了。

我需要做什么来修复“字符......不是命令的一部分”错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T05:53:05.900

当从 CruiseControl 运行构建时，这些消息表明 Ant 正在详细或调试模式下运行。（尝试从命令行运行，并`-v`选择自己查看。）

检查您的 CC 配置以进行构建 - 查看是否`usedebug`设置了类似内容。或者，可以使用某种自定义日志记录以在调试级别记录日志。

# c - 循环插入后C Glib哈希不匹配？

> ID：11893265
> 
> 赞同：0
> 
> 时间：2012-08-09T23:05:54.713
> 
> 标签：c, hash, glib

我不确定为什么这个 glib 哈希表无法匹配键 - 我很想知道为什么。我读取了一个分隔文件并将其插入到哈希表中，它可以读取最后一个值，但不能读取第一个值或之前的任何值。

有什么帮助吗？

我正在阅读以下格式的文本文件：

```
001$002$Someval
and so on.... 
```

和代码：

```
FILE *f = fopen(DEFAULT_MSG_CODES, "r");

/* If file does not exist return 1 */
if (f == NULL) {
    return -1;
}

char *line;
char *token;
char *fields[8];
int i;
line = malloc(2048);

 GHashTable* hash = g_hash_table_new(g_str_hash, g_str_equal);

g_hash_table_insert(hash, "000", "test");

while (fgets(line, 2048, f) != NULL) {

    line[strlen(line) - 1] = '\0';
    i = 0;
    token = strtok(line, "$");

    while (token != NULL) {

        fields[i] = token;
        i++;
        token = strtok(NULL, "$");
    }

    printf("cid: %s eid: %s msg %s\n",fields[0],fields[1],fields[2]);
    g_hash_table_insert(hash,fields[0],fields[1]);

}

free(line);

fclose(f);

printf("There are %d keys in the hash\n", g_hash_table_size(hash));
printf("There is a match %s\n", g_hash_table_lookup(hash,"003")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T00:17:30.687

如果我没记错的话，你会在循环的下一次迭代中通过`line`对`fgets`. 一个简单的解决方法是在将字符串添加到哈希表之前`strdup`（或任何丑陋的 glib 名称）字符串。`g_strdup`但是你真的应该阅读这个 API 上的 glib 文档来找出你传入的数据的所有权契约，以及参数是否只是指向它将立即读取的数据的指针，或者指向将成为永久部分的对象的指针哈希表。

# .net - 创建没有修订号的 .net DLL 版本

> ID：11893282
> 
> 赞同：0
> 
> 时间：2012-08-09T23:08:10.080
> 
> 标签：.net, dll, build, version, .net-assembly

我正在 Visual Studio 2012 中构建一个 .NET 4 应用程序，并希望以该格式对我的 .net 程序集进行版本控制。

```
[assembly: AssemblyInformationalVersion("6.0.1")]
[assembly: AssemblyVersion("6.0.*.0")] 
```

但是，当我构建以下内容时出现错误：

```
Properties\AssemblyInfo.cs(40,12): error CS0647: Error emitting 'System.Reflection.AssemblyVersionAttribute' attribute -- 'The version specified '6.0.*.0' is invalid' 
```

这甚至可能吗？我注意到在某些 Microsoft DLL 中，它们的版本控制与此一致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:25:52.677

每个版本部分必须在 0 - 65535 范围内。

拥有动态版本字符串的一种方法是在另一个类（例如 VersionClass 类）中声明一个公共 const 字符串，并将其用作 AssemblyVersion 的版本字符串参数。然后编写一个脚本（使用 powershell）以使用版本字符串的任何动态值重新创建 VersionClass。将此脚本作为预构建事件运行，VersionClass 在每次编译时都会被覆盖。

更新：这是一个简化版本设置的工具：http: [//autobuildversion.codeplex.com/](http://autobuildversion.codeplex.com/) 我还没有尝试过，但看起来这将处理你想要的场景。

# javascript - 使用 JavaScript 从 URL 获取 JSON 响应

> ID：11893284
> 
> 赞同：-2
> 
> 时间：2012-08-09T23:08:21.110
> 
> 标签：javascript, json

网址[http://smart-ip.net/geoip-json](http://smart-ip.net/geoip-json)包含一个 JSON，其中包含有关您的地理位置的数据。

我想将该 JSON 文件存储在 JavaScript 变量中，以便可以使用该 JSON 的字段。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T23:22:05.483

这似乎是一个跨域请求。直接读取JSON是有问题的，但是可以使用JSONP。您的链接支持它。你需要这样的东西：

```
<script type="text/javascript">
  function your_callback(data) {
    // do something with data
    alert('City : '+data.city+' Country name : '+data.countryName);
  }
</script>

<script type="text/javascript" src="http://smart-ip.net/geoip-json?callback=your_callback"></script>​ 
```

[**演示**](http://jsfiddle.net/heera/gEWYH/)。`

# android - 检查是否在运行时的清单中声明了 BroadcastReceiver？

> ID：11893289
> 
> 赞同：3
> 
> 时间：2012-08-09T23:08:56.930
> 
> 标签：android, broadcastreceiver, android-manifest

有没有办法在运行时检查清单中声明了哪些广播接收器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T00:14:57.147

使用`PackageManager`，您可以`queryBroadcastReceivers()`找出谁会响应特定`Intent`的 ，使用`getInstalledPackages()`，您可以找出每个包安装的接收器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T00:40:08.243

在 Activity 中，代码将与此类似：

```
// Query all packages that have the BroadcastReceivers...
Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);
mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);
PackageManager pm = getPackageManager();
final List<ResolveInfo> listPkgs = pm.queryBroadcast(mainIntent, 0);
if (listPkgs != null && listPkgs.size() > 0){
   for(ResolveInfo resInfo : listPkgs){
       // Now resInfo will contain the list of packages that has receivers...
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T21:27:07.103

谢谢，但这不是我的意图......我想知道是否在运行时在运行的应用程序中声明了特定的接收器，并像这样实现它：

```
 private <Receiver extends CyborgReceiver<?>> boolean checkIfBroadcastReceiverIsRegisteredInManifest(Class<Receiver> receiverType) {
    PackageManager pm = application.getPackageManager();
    try {
        ActivityInfo info = pm.getReceiverInfo(new ComponentName(application, receiverType), PackageManager.GET_RECEIVERS);
        return info.enabled;
    } catch (NameNotFoundException e) {
        return false;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-12T05:17:33.887

传入应用程序对象作为第一个参数，`(Application)context.GetApplicationContext()`如果需要，您可以这样做，然后传入实现广播接收器类的类作为第二个参数，例如`broadcastReceiver.class`

```
public static boolean validateReceiverInManifest(Application application, Class receiverClass) throws PackageManager.NameNotFoundException {
    PackageManager pm = application.getPackageManager();
    String packageName = application.getPackageName();

    PackageInfo packageInfo = pm.getPackageInfo(packageName, PackageManager.GET_RECEIVERS);
    ActivityInfo[] receivers = packageInfo.receivers;
    String receiverClassName = receiverClass.getName();
    for (ActivityInfo activityInfo : receivers) {
        if (activityInfo.name.equals(receiverClassName)) {
            return true;
        }
    }
    return false;
} 
```

# jquery - 敲除绑定完成后如何获取事件

> ID：11893291
> 
> 赞同：2
> 
> 时间：2012-08-09T23:09:01.733
> 
> 标签：jquery, knockout.js

我对 jquery selectmenu 插件和淘汰赛绑定有疑问。简而言之，我需要在敲除绑定完成后调用 selectmenu。我如何知道某些 html 元素的绑定已完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T11:01:44.833

您可以在渲染模板后使用 afterrender 事件来做任何事情。

```
 <div data-bind='template: { name: "personTemplate",  data: myData, afterRender: myPostProcessingLogic }'> </div>

      viewModel.myPostProcessingLogic = function(elements)            
       {            
             //You can add custom post-processing logic here           
       } 
```

# ios - iOS - 何时加载外部数据

> ID：11893293
> 
> 赞同：0
> 
> 时间：2012-08-09T23:09:26.243
> 
> 标签：ios, uiviewcontroller, reachability, appdelegate

在我的应用程序委托中，我有这个：

```
Reachability* reach = [Reachability reachabilityWithHostname:@"www.google.com"];

[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(reachabilityChanged:) 
                                             name:kReachabilityChangedNotification 
                                           object:nil];

[reach startNotifier];

HomeViewController_iPhone *homeViewController = [[HomeViewController_iPhone alloc] initWithNibName:@"HomeViewController_iPhone" bundle:nil];
homeViewController.managedObjectContext = self.managedObjectContext;
UINavigationController *homeNavController = [[UINavigationController alloc] initWithRootViewController: homeViewController];
homeNavController.navigationBar.barStyle = UIBarStyleBlackTranslucent;

self.tabBarController.viewControllers = [NSArray arrayWithObjects:homeNavController, nil];

...

-(void)reachabilityChanged:(NSNotification*)note
{
Reachability * reach = [note object];

if([reach isReachable])
{
    NSLog(@"Notification Says Reachable");
    self.isConnected = YES;
}
else
{
    NSLog(@"Notification Says UN-Reachable");
    self.isConnected = NO;
}
} 
```

问题是在我的 HomeViewController (viewDidLoad) 我这样做：

```
AppDelegate *appDelegate = (AppDelegate*)[[UIApplication sharedApplication] delegate];

if (appDelegate.isConnected)
{
    dispatch_async(kBgQueue, ^{
        NSData* data = [NSData dataWithContentsOfURL: kFeedURL];
        [self performSelectorOnMainThread:@selector(fetchedData:) 
                               withObject:data waitUntilDone:YES];
    });
} 
```

但 appDelegate.isConnected 始终为“否”，即使我有连接也是如此。我认为在 Reachability 类建立连接之前进行检查。但是我在哪里调用来获取数据呢？我已经尝试过 viewDidLoad 和 viewWillAppear，但在这两点上 isConnected 仍然是 NO。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T04:11:58.777

通过在创建视图控制器之前在应用程序委托中执行此操作来解决，如 dnstevenson 建议的答案。

```
Reachability *reachability = [Reachability reachabilityForInternetConnection];    
NetworkStatus internetStatus = [reachability currentReachabilityStatus];
if (internetStatus != NotReachable) {
    //my web-dependent code
}
else {
    //there-is-no-connection warning
} 
```

# ruby-on-rails - 使用 build 不会在 has_many 上创建连接模型：通过关联

> ID：11893297
> 
> 赞同：1
> 
> 时间：2012-08-09T23:09:39.893
> 
> 标签：ruby-on-rails, associations, has-many-through

我的 2 个模型：

```
Class TeamHistory < ActiveRecord::Base
  has_many :player_to_team_histories
  has_many :players, through: :player_to_team_histories

  belongs_to :team
end

Class Player < ActiveRecord::Base
  has_many :player_to_team_histories
  has_many :team_histories, through: :player_to_team_histories
end 
```

我无法`player_to_team_histories`使用 来创建`@team_history.players.build`，但它可以正常工作`@team_history.players.create`

```
>>team = Team.create
>>team_history = team.team_histories.create
>>player = team_history.players.create
>>player.team_histories.count
1
>>player2 = team_history.players.build
>>player2.team_histories.count
0
>>player2.save
>>player2.team_histories.count
0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:26:11.650

我对此进行了一些挖掘，因为我没有立即知道答案。我发现`#build`确实设置了关联模型，但仅从父模型到子模型。这意味着在您上面的示例中，rails 的行为符合设计。

```
>>team = Team.create
>>team_history = team.team_histories.create
>>player = team_history.players.create
>>player.team_histories.count
1
>>player2 = team_history.players.build
>>player2.team_histories.count
0 
```

这完全符合预期。如果您致电：

```
>>team_histories.players 
```

您的新玩家将在列表中。所以如果不是：

```
>>player2.save 
```

你跑了：

```
>>team_histories.save 
```

您的新玩家将被保存。

乔纳森华莱士对[这个 SO 问题](https://stackoverflow.com/questions/7036870/has-many-through-build?rq=1)的回答基本上是一样的。

# php - jqgrid 每行带有文本框

> ID：11893298
> 
> 赞同：0
> 
> 时间：2012-08-09T23:09:43.857
> 
> 标签：php, jquery, jqgrid

是否可以让 jqgrid 每行都有一个文本框，然后可以将其拉入导出 excel 中？我正在使用 PHP Jqgrid

**这是我的代码，我想为每一行添加一个文本框，比如注释。所以我可以在之后将其拉到报告中：**

```
// Set grid caption using the option caption
$grid->setGridOptions(array(
    "caption"=>"Offer Report",
    "sortname"=>"offer_date",
    "hoverrows"=>true,
        "autowidth"=>true,
        "shrinkToFit"=>true,
        "height"=>"100%",
        "toppager"=>true,
    ));
// Change some property of the field(s)

$grid->setColProperty("unit_num", array("label"=>"Unit Number"));
$grid->setColProperty("unit_type", array("label"=>"Unit Type"));
$grid->setColProperty("sqft", array("label"=>"Size"));
$grid->setColProperty("offer_date", array("label"=>"Date", "align"=>"center","sorttype"=>"date", "formatter"=>"date","formatoptions"=>array("newformat"=>"m/d/Y")));
$grid->setColProperty("name", array("label"=>"Agent"));

$grid->setColProperty("list_price", array("label"=>"List Price", "align"=>"right"));

$grid->setColProperty("client", array("label"=>"Client"));

$grid->setColProperty("offer_price", array("label"=>"Offer", "align"=>"right"));

$grid->setColProperty("offer_credit", array("label"=>"Credits", "align"=>"right"));

$grid->setColProperty("broker_name", array("label"=>"Broker"));
$grid->setColProperty("broker_commission", array("label"=>"Commission", "align"=>"right"));

$grid->setColProperty("sf", array("label"=>"$/SF", "align"=>"right"));

$grid->setColProperty("discount", array("label"=>"Discount", "align"=>"right"));

$grid->setColProperty("offer_type", array("label"=>"Offer Type"));
$grid->setColProperty("status", array("label"=>"Status"));

// Enable Inline Filtering
$grid->toolbarfilter = true;

// Enable navigator
$grid->navigator = true;

// Enable excel export
$grid->setNavOptions('navigator', array("excel"=>true,"pdf"=>true,"add"=>false,"edit"=>false,"del"=>false,"view"=>false)); 
$grid->exportfile ='offer_report.xls';
$grid->pdffile ='offer_report.pdf';
// Enjoy
$grid->renderGrid('#grid','#grid_toppager',true, null, null, true,true);
$conn = null; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T02:47:39.403

我从未使用过 php JqGrid，但您可以做一件事，在您的 loadComplete 或 GridComplete 函数中，您可以指定自定义文本框的代码。

看看我以前的帖子，我告诉这个人如何在每一行附加一个自定义按钮，你可以在这里使用相同的方法，然后提取数据进行导出不会很困难。

[在jqGrid的行中添加自定义按钮？](https://stackoverflow.com/questions/11743983/adding-a-custom-button-in-row-in-jqgrid/11744722#11744722)

# android - 谁能告诉我在哪里可以找到带有部分的惰性列表视图和示例？

> ID：11893303
> 
> 赞同：0
> 
> 时间：2012-08-09T23:10:34.933
> 
> 标签：android, listview, lazy-evaluation, sections

谁能告诉我在哪里可以找到带有部分的惰性列表视图和示例？

这将是完美的 [https://github.com/thest1/LazyList/](https://github.com/thest1/LazyList/)的一个版本， 其中包含部分。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T00:35:21.413

这是一个例子： [lazy-listview](http://code.google.com/p/android-amazing-listview/)

# java - 你能调整 GAE 的内存缓存超时吗？

> ID：11893308
> 
> 赞同：1
> 
> 时间：2012-08-09T23:11:00.610
> 
> 标签：java, google-app-engine, memcached, objectify

我们遇到了重复的内存缓存错误。我看到一个“LogAndContinueErrorHandler”，所以请求不会失败，但它们需要很长时间才能完成。有没有办法强制 memcache 的最大响应时间（大约 50 毫秒？）。

> com.google.appengine.api.memcache.LogAndContinueErrorHandler handleServiceError：memcache com.google.appengine.api.memcache.MemcacheServiceException 中的服务错误：Memcache getIdentifiables：异常在 com.google.appengine.api.memcache.MemcacheServiceApiHelper$RpcResponseHandler com.google.appengine.api.memcache.MemcacheServiceApiHelper 的 .handleApiProxyException(MemcacheServiceApiHelper.java:76)$1.absorbParentException(MemcacheServiceApiHelper.java:120) com.google.appengine.api.utils.FutureWrapper.handleParentException(FutureWrapper.java: 53) 在 com.google.appengine.api.memcache.MemcacheServiceImpl.quietGet(MemcacheServiceImpl.java:28) 在 com.google.appengine 的 com.google.appengine.api.utils.FutureWrapper.get(FutureWrapper.java:92) .api.memcache.MemcacheServiceImpl。getIdentifiables(MemcacheServiceImpl.java:61) 在 com.googlecode.objectify.cache.EntityMemcache.getAll(EntityMemcache.java:215) 在 com.googlecode.objectify.cache.CachingAsyncDatastoreService.get(CachingAsyncDatastoreService.java:253) 在 com.googlecode .objectify.cache.CachingAsyncDatastoreService.get(CachingAsyncDatastoreService.java:216) 在 com.googlecode.objectify.cache.CachingDatastoreService.get(CachingDatastoreService.java:137) 在 siena.gae.GaePersistenceManager.get(GaePersistenceManager.java:2146) 在siena.core.batch.BaseBatch.get(BaseBatch.java:60)cache.CachingAsyncDatastoreService.get(CachingAsyncDatastoreService.java:216) 在 com.googlecode.objectify.cache.CachingDatastoreService.get(CachingDatastoreService.java:137) 在 siena.gae.GaePersistenceManager.get(GaePersistenceManager.java:2146) 在 siena.core .batch.BaseBatch.get(BaseBatch.java:60)cache.CachingAsyncDatastoreService.get(CachingAsyncDatastoreService.java:216) 在 com.googlecode.objectify.cache.CachingDatastoreService.get(CachingDatastoreService.java:137) 在 siena.gae.GaePersistenceManager.get(GaePersistenceManager.java:2146) 在 siena.core .batch.BaseBatch.get(BaseBatch.java:60)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:44:29.387

`deadline`通过设置方法的参数，在 Python 中有一种简单的方法可以做到这一点[`create_rpc`](https://developers.google.com/appengine/docs/python/memcache/clientclass#Client_create_rpc)。

对于 Java 来说就不那么简单了，因为 MemcacheService 不允许你设置一个[`ApiConfig`](http://code.google.com/searchframe#Qx8E-7HUBTk/trunk/java/src/main/com/google/apphosting/api/ApiProxy.java&q=ApiConfig%20package%3agoogleappengine%5C.googlecode%5C.com&l=445).

本文[将向](http://blog.notdot.net/2009/11/App-Engine-Java-API-call-hooks)您展示如何为 API 包安装 API 挂钩。

之后，您应该能够通过设置`com.google.apphosting.api.ApiProxy.api_deadline_key`环境变量来覆盖当前 API 调用的截止日期，就像 SDK 在[ApiProxy.java中所做的那样](http://code.google.com/p/googleappengine/source/browse/trunk/java/src/main/com/google/apphosting/api/ApiProxy.java#99)

触发 RPC 调用后，不要忘记将其恢复为之前的值。

# windows - 在批处理的输入参数中转义“双引号”

> ID：11893309
> 
> 赞同：24
> 
> 时间：2012-08-09T23:11:11.230
> 
> 标签：windows, batch-file

我想在批处理脚本中运行以下命令，它需要一个参数（路径）

```
runas /user:abc "icacls %1 /grant Everyone:(F) /T" 
```

但是参数`%1`已经包含一个`"` （因为它是一个路径，由上下文菜单的发送到传递 - 我对此没有太多控制权）。因此，当命令在批处理脚本中运行时，它会像这样运行：

```
runas /user:abc "icacls "c:\folder" /grant Everyone:(F) /T" 
```

所以很明显我需要逃避`"`s 创建的`%1`. 如何执行字符串操作`%1`以使其转义引号？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-09T23:15:10.577

您应该可以使用`\"` [Here](http://www.robvanderwoude.com/escapechars.php) is a site with some other escape characters that you might find有用

要执行字符串替换：

```
set temp=%1
set temp=%temp:"=\"%
echo %temp% 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-05T04:02:41.143

每个响应都涵盖了部分答案。使用反斜杠和引号将它们组合起来：`\"`你会得到：

```
runas /user:abc "icacls \"%~1\" /grant Everyone:(F) /T" 
```

或者你可以加倍（双）引号来转义它们：

```
runas /user:abc "icacls ""%~1"" /grant Everyone:(F) /T" 
```

* * *

作为旁注`^`有时可用于转义特殊字符，例如`<`, `|`, `>`, `||`,`&&`和`&`例如：

```
echo ^| 
```

但这非常罕见。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T23:56:58.413

```
SET myPath=%1
SET myPath=%myPath:"=\"%
runas /user:abc "icacls %myPath% /grant Everyone:(F) /T" 
```

***编辑 - 变量名称从 更改`path`为`myPath`。PATH 是一个保留的系统变量，不应将其用于其他用途。***

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T07:02:19.677

在这种情况下甚至不需要搜索/替换。只需从您的论点中去除原始引号（使用`%~1`） - 然后您可以再次添加您想要的任何内容，例如转义引号。在您的示例中：

```
runas /user:abc "icacls \"%~1\" /grant Everyone:(F) /T" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-21T19:37:51.880

经过一些快速测试，这是最好的方法，因为它：

**上行空间**

*   处理来自任务列表的多个结果输出
*   如果需要，处理带有空格的应用程序名称
*   可以轻松更改为区分大小写/不区分大小写

**缺点**

*   调用多个在技术上较慢的命令

**代码**

```
@echo off    
set "EXE=authy desktop.exe"
tasklist /NH /FI "imagename eq %EXE%" | find /i "%EXE%" >nul 2>&1
If %errorlevel% EQU 0 (
    echo %EXE% Is Running
) ELSE (
    echo %EXE% is Not Running
) 
```

**进一步考虑**

您可以更改为 && ( ) || ( ) 格式化而不是检查错误级别。如果通过引用!errorlevel! 多次使用errorlevel，你也可以使用'setlocal enabledelayedexpansion'。

```
tasklist /NH /FI "imagename eq %EXE%" | find /i "%EXE%" >nul 2>&1 && (
    echo %EXE% Is Running
) || (
    echo %EXE% is Not Running
) 
```

# python - 在 Ubuntu Linux 机器上安装第 3 方 Python 模块？

> ID：11893311
> 
> 赞同：13
> 
> 时间：2012-08-09T23:11:39.460
> 
> 标签：python, module

我猜我的问题很基本，但是在 Google 和 YouTube 上 15-20 分钟后，我还是有点模糊。我对 Linux 和 Python 都比较陌生，所以我很难理解文件系统树（来自 Windows）。

根据我在 Ubuntu 中的目录（我相信是 12.04 版，我在 VBox 中运行）中的目录挖掘，我发现了以下两个与 Python 相关的目录：

1.  `/usr/local/lib/python2.7`其中包含这两个子目录：

    `dist-packages`
    `site-packages`

    当我输入“ls”以获取其中的文件列表时，两者都没有显示任何内容，但是当我输入“ls -a”时显示“......”。

2.  `/usr/lib/python2.7`它没有`site-packages`目录，但有一个`dist-packages`包含许多文件和子目录的目录。

因此，如果我想安装第 3 方 Python 模块，例如 Mechanize，我应该将其安装在上述目录之一（以及哪个子目录）中？

此外，即使我知道在哪里安装它，我也不清楚要采取的步骤；到目前为止，我有以下计划：

1.  从拥有它的任何站点或服务器下载 tar.gz（或模块所包含的任何类型的文件）
2.  将要解压缩的文件定向到适当的子目录（上面列出的 2 个之一）
3.  测试以确保它`import mechanize`在交互模式下工作。

最后，如果我想用终端命令（类似`sudo apt-get`）替换上面的第 1 步，那将是什么命令，即通过终端的什么命令相当于从浏览器单击下载链接以下载所需的文件？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T23:17:47.060

您不应该手动安装任何东西。

Python库的三种安装方式：

1.  使用`apt-get`,`aptitude`或类似的实用程序。
2.  使用`easy_install`or `pip`（`pip`先安装，默认不可用）
3.  如果你下载了一些`.tar.gz`文件，解压它然后输入`sudo python setup.py install`

手动弄乱路径和移动文件是以后头疼的第一步。不要做。

为了完整起见，我应该提到*可移植的、隔离*的方式；那就是为Python创建自己的虚拟环境。

1.  跑`sudo apt-get install python-virtualenv`
2.  `virtualenv myenv`（这将创建一个新的虚拟环境。您可以在此处自由安装软件包而不会污染您的系统范围的 Python 库。它将添加`(myenv)`到您的提示中。）
3.  `source myenv/bin/activate`（这会激活您的环境；确保您的 shell 指向 Python 的正确位置）
4.  `pip install _____`（将**__**替换为您要安装的任何内容）
5.  完成后，键入`deactivate`将 shell 和环境重置为默认系统 Python。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-09T23:17:59.340

`virtualenv`是干净地安装第三方库的事实上的 Python 标准。在此处阅读更多信息：http: [//www.virtualenv.org/](http://www.virtualenv.org/)

使用示例：

```
daniel@redhotcar:~/tmp$ virtualenv myenv
New python executable in myenv/bin/python
Installing distribute....................................................................................................................................................................................done.
Installing pip...............done.
daniel@redhotcar:~/tmp$ cd myenv/
daniel@redhotcar:~/tmp/myenv$ bin/pip install mechanize
Downloading/unpacking mechanize
  Downloading mechanize-0.2.5.zip (445Kb): 445Kb downloaded
  Running setup.py egg_info for package mechanize

Installing collected packages: mechanize
  Running setup.py install for mechanize

Successfully installed mechanize
Cleaning up...
daniel@redhotcar:~/tmp/myenv$ bin/python
Python 2.7.2+ (default, Oct  4 2011, 20:06:09) 
[GCC 4.6.1] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import mechanize
>>> mechanize
<module 'mechanize' from '/home/daniel/tmp/myenv/local/lib/python2.7/site-packages/mechanize/__init__.pyc'>
>>> 
```

在 Ubuntu 上，通过安装 virtualenv`apt-get install python-virtualenv`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-01-05T05:33:58.990

您可以使用

```
sudo apt-get install python3-library_name 
```

替换`library_name`为任何其他库（例如 scipy、pandas、numpy、matplotlib 等）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T23:15:47.817

使用 setuptools [http://pypi.python.org/pypi/setuptools/](http://pypi.python.org/pypi/setuptools/) 然后输入

```
pip install <somePackageName> 
```

或者

```
easy_install <somePackageName> 
```

他们将在 pypi 目录（在互联网上）中查找软件包，并自动为您安装正确的版本...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-26T08:57:12.107

要在 ubuntu 中安装 nay python 包，首先运行 sudo apt-get update

然后输入“sudo apt-get install python-”并重复按两次tab。按 y 或 yes，它将显示所有可用于 python 的包。然后再次输入 sudo apt-get install python-package 它将从互联网安装包。

# php - php中的文件创建错误

> ID：11893320
> 
> 赞同：1
> 
> 时间：2012-08-09T23:12:30.647
> 
> 标签：php, file, file-permissions

我正在使用 php 函数创建文件，但它不起作用。我已经创建了文件夹并设置了它的权限 0777，但它没有创建文件。

我正在使用以下代码。请让我知道出了什么问题。

```
 $cachefile ='/cache/cache.text';
   $file=chmod($cachefile, 777);
   if (file_exists($file)) {
    include($file); 
    } else{
   $fp = fopen('/cache/cache.txt', 'w');    
   fwrite($fp, ob_get_contents());
   fclose($fp);
    ob_end_flush(); 
```

对于 ob_get_contents() 函数，我使用 ob_start () 函数。如果我手动创建文件，它正在工作并显示缓冲数据。请让我知道如何使用 fopen 函数创建文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:23:38.730

这条线有几个问题：

```
$file=chmod($cachefile, 777); 
```

1.  那个时候文件可能不存在，所以可能会报错（你不能对不存在的文件做chmod）。

2.  [`chmod()`](http://php.net/manual/en/function.chmod.php)将返回`true`或`false`。您稍后会尝试在代码中使用此返回值，并保存在`$file`变量中。

如果`cache`文件夹是可写的，这应该可以工作：

```
 $cachefile ='cache/cache.txt';
   if (file_exists($cachefile)) {
       include($cachefile); 
   } 
   else {
       $fp = fopen($cachefile, 'w');    
       fwrite($fp, ob_get_contents());
       fclose($fp);
       ob_end_flush();
   } 
```

# xcode - 使用来自 xcode 4.4 的 boost - 无法访问正则表达式库

> ID：11893321
> 
> 赞同：0
> 
> 时间：2012-08-09T23:12:46.743
> 
> 标签：xcode, boost

我对 c++ 还很陌生，我需要使用正则表达式和更多 Xcode 不附带的那种类型的库。我找到了 boost 但我不知道如何安装它。我认为它有效，但它无法识别用于提升的正则表达式库。我输入正确。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T23:18:00.407

如果您使用 Xcode 4.4 附带的 libc++，那么您可以使用 C++11`<regex>`库。只需转到项目的构建设置并将 C++ 标准库设置为 libc++。在使用 C++11 时打开它。

# ruby-on-rails - 如何在 ruby on rails 中接受这些参数？

> ID：11893331
> 
> 赞同：1
> 
> 时间：2012-08-09T23:14:15.747
> 
> 标签：ruby-on-rails, ruby

好的，所以我想声明一个可以接受这样的参数的方法

假设我的方法名为 custom_method

```
@variable.custom_method(Profile, :as => @user) 
```

我的方法应该捕获变量@user 并调用`@user.profile`

但是我如何捕获作为哈希的第二个参数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T23:21:02.753

更简单的解决方案可能是：

```
def custom_method(association, args)
  obj = args[:as] or fail("Missing argument :as => obj")
  obj.send(association.name.underscore)
  ...
end 
```

更丰富的函数调用，但缺点很明显：方法签名会丢失信息。

# .htaccess - htaccess 不会重写 url

> ID：11893339
> 
> 赞同：0
> 
> 时间：2012-08-09T23:15:26.973
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

```
Options +FollowSymLinks
RewriteEngine On
RewriteRule ^product/([0-9]+)/([0-9]+)/([0-9]+)/([0-9]+)/([a-zA-Z]+)/$ product.php?id=$1&srl=$2&item=$3&page=$4&title=$5#titleProduct 
```

当我点击 f5 按钮进行刷新时，URL 仍然存在并且没有被重写。我尝试使用“新”重写链接访问，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T00:00:20.560

> 哇，这意味着我需要更新每个文件以进行“新”重写？所有文件都包含带有“旧”链接的不同超链接。我想如果我写一个 .htaccess 文件，所有的 url 都会自动重写。

您正在考虑浏览器重定向，它会更改地址栏，重写会采用更好看的 URL，并在内部将 URI 重写为服务器可以理解的内容。[有关此过程的更好解释，](https://stackoverflow.com/a/11711948/851273)请参阅此答案的上半部分。

`product.php`因此，如果浏览器实际请求该文件，您可以进行浏览器重定向，然后*重定向*到看起来漂亮的假 URL。然后浏览器将重新发送一个新的请求，对于漂亮的 URL，服务器得到它，在内部将其重写*回*php 文件（您拥有的规则）。

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /product\.php\?id=([^&]+)&srl=([^&]+)&item=([^&]+)&page=([^&]+)&title=([^&\ ]+)
RewriteRule ^product.php$ /product/%1/%2/%3/%4/%5/ [L,R=301] 
```

这将获取一个`/product.php\?id=123&srl=abc&item=qwerty&page=blah&title=something`URI 并将带有 301 的浏览器重定向到看起来更漂亮的 URL。然后你的规则应该在内部重写它。

无论如何，您确实应该将您提供的链接更改为更好的 URL，依靠 mod_rewrite 来完成两端的工作*确实*效率低下。

# javascript - 学习 JavaScript、Ajax、jQuery 和 JSON 时顺序是否相关？

> ID：11893341
> 
> 赞同：5
> 
> 时间：2012-08-09T23:15:44.073
> 
> 标签：javascript, jquery, ajax, json

如果我知道 JavaScript、AJAX、jQuery 和 JSON，我可以申请的工作数量会大大增加。我已经开始自学并发现，在某种意义上，它们都是从 JavaScript 演变而来的。我的问题是，在学习另一个之前，您需要了解一个（如果有的话）以及以什么顺序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T23:24:15.577

1.  **Javascript**。由于这是围绕您想要学习的其他内容的语言，因此从这里开始是合乎逻辑的。找出 Javascript 是什么、语法、它可以做什么（以及不能做什么）。
2.  **jQuery**（注意单个 r）是一个 Javascript 库，这意味着它只是编写普通 js 函数的另一种方式。你可以用纯 Javascript 做 jQuery 能做的所有事情。不同之处在于 jQuery 使许多事情变得更容易，并纠正了浏览器开发的一些缺陷（你好 IE）。
3.  **Ajax**（在没有页面加载的情况下传输信息）是 Javascript 中的一项功能。您可以学习纯 js 方式，也可以学习简化的 jQuery 方式。我喜欢 jQuery 进行 ajax 调用的简单程度。在我开始学习 jQuery 之前，我的 ajax 调用是一团糟！这只是整个 jQuery 库的一个方面，所以在开始学习之前，对它们的语法、事件处理等一些基本知识是明智的。
4.  **JSON**只是在使用 Ajax 时对一组字符串进行编码的一种方式。有了一些 Javascript 的基本知识，这应该不会花费您很长时间来弄清楚。

这就是我建议的顺序。通过我的评论，您可以看到`why`我按此顺序建议它们。

祝你好运 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T23:19:10.253

1.  **Javascript**是您列出的所有内容的核心，因为您列出的所有内容都是用 javascript 编写或使用其语法的。您需要了解核心 javascript 才能学习/使用您列出的任何其他项目。
2.  **jQuery**是建立在 javascript 之上的流行且有用的库，它添加了许多有用的功能并为您实现了许多跨浏览器兼容性。
3.  **阿贾克斯。** 您可能想学习 jQuery 中的 ajax 内容，因为它使 ajax 比使用普通的 javascript ajax 容易得多。
4.  **JSON**是 Ajax 经常使用的数据格式，因此您在学习 ajax 时可能会遇到它。

我建议上面的顺序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T23:19:24.713

Javascript 是语言本身，所以你应该先学习它。JSON 是 javascript 对象表示法，因此当您学习 Javascript 时，您也将学习它。Ajax 是用于对服务器进行异步调用的 API，因此它有自己的对象，该对象使用 JS 来使用。jQuery 是一个建立在 JS 之上的库。

# jquery - 使用两个表和正则表达式的复杂 sql 查询

> ID：11893343
> 
> 赞同：0
> 
> 时间：2012-08-09T23:16:14.360
> 
> 标签：jquery, sql, regex, autocomplete

对于复杂的查询，我需要一些帮助。我正在使用**自动完成 jquery-ui**搜索一些用户和 php+mysql 进行搜索。

用户可以在 wordpress/buddypress 页面上使用他的`first_name`,`last_name`和（必填字段）进行注册。`email`

因此，在我在 stackoverflow 上找到的示例中使用正则表达式很容易搜索，但我想要一个复杂的查询来按 first_name 或 last_name 或电子邮件进行搜索。

`first_name`并且`email`在**wp_users**表中并且`last_name`在**wp_bp_xprofile_data**表中。我不想制作自定义元数据来加入姓名和电子邮件，所以，

要获得`first_name`and `email`，查询是：

```
SELECT * FROM wp_users WHERE display_name REGEXP '^$param' OR user_email REGEXP '^$param' 
```

并获得 de `last_name`，查询是：

```
SELECT value FROM wp_bp_xprofile_data WHERE field_id = 5 AND user_id = ".$id." 
```

（值为 last_name 的结果和 $id=wp_users.ID）

**如何混合这个查询？**
如果我们看到它像一张桌子，它会像：（`selec * from users where first_name=regexp or last_name=regexp or email=regexp`基本上），但由于 wordpress/buddypress 的复杂结构，我不能这样做。请帮忙！！！

eg...3 个用户，第一个用户的名字是 oscar，第二个用户的姓氏是 osbourne，第三个用户的电子邮件是 omnix.x@gmail.com，如果搜索以 'o' 开头，查询将找到这 3 个用户。

PS：我忘记了，但我需要返回身份证、名字、姓氏和电子邮件。

奖励：我正在使用正则表达式 ^$params 在开始字符处查找字符串。什么正则表达式更好地在无处不在的结果中找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:37:42.973

嗯，正确的答案是：

```
SELECT u.ID, u.display_name, u.user_email, d.value
FROM wp_users u, wp_bp_xprofile_data d
WHERE
(
  u.ID IN (
        SELECT ID
        FROM wp_users
        WHERE display_name REGEXP '^$param'
  )
  OR u.ID IN (
        SELECT user_id as ID2
        FROM wp_bp_xprofile_data
        WHERE field_id = 5 AND value REGEXP '^$param'
  )
)
AND (u.ID=d.user_id AND field_id=5) 
```

谢谢你的时间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T23:59:19.407

```
SELECT * FROM wp_users
WHERE display_name REGEXP '^$param'
   OR user_email REGEXP '^$param'
   OR concat('.',id,'.') IN 
      (SELECT user_id FROM wp_bp_profile
       WHERE field_id = 5 AND value REGEXP '^$param') 
```

# java - 设置 JMenuBar 的背景颜色？

> ID：11893345
> 
> 赞同：4
> 
> 时间：2012-08-09T23:16:30.120
> 
> 标签：java, swing, colors, background, jmenubar

相对简单，如何设置 JMenuBar 的背景颜色？

我试过了：

```
MenuBar m = new MenuBar() {

      void paintComponent(Graphics g) {

  Graphics2D g2 = (Graphics2D)g;
  g2.setBackground(Color.yellow);
  g2.fillRect(0, 0, getWidth(), getHeight());
} 
```

但没什么

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T23:20:49.493

好吧，首先，您所展示的不是`JMenuBar`，而是`MenuBar`，存在显着差异。尝试使用 a`JMenuBar`和 use`setBackground`来改变背景颜色

**根据 Vulcan 的反馈更新**

`setBackground`好的，在不起作用的情况下，这将;）

```
public class MyMenuBar extends JMenuBar {

    @Override
    protected void paintComponent(Graphics g) {

        super.paintComponent(g);

        Graphics2D g2d = (Graphics2D) g;
        g2d.setColor(Color.RED);
        g2d.fillRect(0, 0, getWidth() - 1, getHeight() - 1);

    }

} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-10T13:28:22.030

使用**MadProgrammer**的方法，您将获得两次菜单栏背景 - 一次由 UI（例如，它可能是 Windows 上的渐变，这需要一些时间来绘制），一次由您在**paintComponent**方法中的代码（在旧背景之上）。

更好地用你自己的基于 BasicMenuBarUI 替换菜单栏 UI：

```
 menuBar.setUI ( new BasicMenuBarUI ()
    {
        public void paint ( Graphics g, JComponent c )
        {
            g.setColor ( Color.RED );
            g.fillRect ( 0, 0, c.getWidth (), c.getHeight () );
        }
    } ); 
```

您还可以为所有菜单栏全局设置该 UI，这样您每次创建菜单栏时就不需要使用特定组件：

```
UIManager.put ( "MenuBarUI", MyMenuBarUI.class.getCanonicalName () ); 
```

这里的 MyMenuBarUI 类是所有菜单栏的特定 UI。

# jquery - 在显示 jquery 确认对话框之前，单击事件在 ios webkit 中立即触发

> ID：11893347
> 
> 赞同：0
> 
> 时间：2012-08-09T23:16:41.090
> 
> 标签：jquery, mobile-safari

我有一个来自 rails 的远程链接，它产生了这个 html

```
<a href="/comments/154/remove" class="delete_event_comment" data-method="delete" data-remote="true" rel="nofollow">Delete</a> 
```

和要求确认的咖啡脚本

```
 $('.delete_event_comment').click ->
    confirm("Delete Comment: Are you sure?") 
```

这相当于这个javascript

```
$('.delete_event_comment').click(function() {
  return confirm("Delete Comment: Are you sure?");
}); 
```

它在桌面上的 safari 上按预期工作：首先显示对话框，然后如果用户按下取消则不执行任何操作，或者如果用户按下 OK 则发送 ajax 调用以删除评论

但在 iphone safari 上，它首先发送 ajax 调用，然后显示对话。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T01:11:06.950

我对咖啡脚本不太了解，但是.. 我会尝试：

```
$('.delete_event_comment').click ->
return confirm("Delete Comment: Are you sure?") 
```

说明：jQuery click 事件在返回时会切断链接正常动作（或传播）`false`。

# c# - 如何有效地修剪数据

> ID：11893349
> 
> 赞同：2
> 
> 时间：2012-08-09T23:17:04.850
> 
> 标签：c#, sql-server, database, sql-server-2008

我目前正在解决一个工作问题，我需要根据用户定义的限制获取数据并修剪生成的场景。我已经尝试了很多东西，但似乎无法让任何东西像我想要的那样高效运行。我可能必须在数据库之外运行，以便可以扩展运行，但我认为如果可能的话，我应该尝试在数据库内部执行。因此，例如，如果我有 3 个实体：

```
Transportation Type:
Car
Boat
Plane

Color:
Blue
Green
Red
Purple
White

Accessories:
Trailer
Wheels
Propeller
Parachute 
```

用户可以输入限制：

```
Transportation_Type=Boat, Accessories= Wheels 
```

因此，任何有船和轮子场景的组合都会受到限制。

```
Example Valid Scenario with restriction: Boat/Red/Trailer 
```

因此，这变得复杂的地方在于，您可以想象，如果我为这 3 个实体构建所有可能的场景，即使有用户定义的限制，也不会太糟糕。但是，如果有 22 个实体（实体基本上是一个有值的级别）怎么办。您可以想象这可能会变得巨大并且难以应用限制。尤其是当它是一组构成限制的级别/值（比如船和轮子）时。

有人有什么想法吗？

通过构建动态的类似语句，我能够通过大约 14-16 个级别使其真正发挥作用，我可以检查派生的场景。但在那之后，处理时间会爆炸（如果级别中有更多的值，它可能会在较低级别）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T00:43:58.783

您的问题看起来像“**物料**清单”问题 (BOM)。每个可能的有效场景都可以表示为一个分层系统。

```
 Transportation
                   |
                  Type
                   |
               Accessories
                   |
      Trailer Wheels Propeller Parachute 
```

阅读您的问题，颜色不是约束，因此不需要将其集成到约束树中。

SQL Server 2008 提供了一种极其紧凑和快速的类型来对这些层次结构进行编码：**HierarchyId 类型**。

使用带有 HierarchyId 的查找表，您可以轻松定义约束、回答场景有效性问题并提取相应的场景结果。

[可以在2008 年 9 月的 MSDN 杂志](http://msdn.microsoft.com/en-us/magazine/cc794278.aspx)上阅读**使用 HierarchyId**进行 BOM 解析的一个很好的示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:06:48.937

如果我理解正确，目标是生成满足特定标准的场景。场景将由属性组合生成。

假设每个实体都在一个单独的表中，您可以按以下方式执行查询：

```
select *
from TransportationType tt cross join
     Color c cross join
     Accessories a
where tt.val in (<accepted transportation types>) and
      c.val in (<accepted colors>) and
      a.val in (<accepted accessories>) 
```

如果我的理解是正确的，随着实体数量的增加，这将产生很多场景。如果您有一个允许场景（实体组合）的表格，那么这将有助于过滤掉事情。

我已经为每个实体用单独的表展示了这一点，但您可以用子查询替换它们：

```
from (select *
      from table t
      where t.type = 'TransportationType'
     ) TransportationType cross join
     ... 
```

# jquery - 如何使用jquery更改输入类型=范围中的输入值、最小值和最大值？

> ID：11893350
> 
> 赞同：6
> 
> 时间：2012-08-09T23:17:14.773
> 
> 标签：jquery, html

我是 jquery 和 html5 的新手。

我的jQuery是：

```
var A_Route=['A1','A2','A3',.....'A50'];
var counter=0;
$("input[name='radio-choice']").change(function(){
    if ($(this).val() == "on")
    {
        $('#slider').val(A_Route[counter]);

    } 
```

当我选择一个值为 ON 的单选按钮时，滑块的最小值和最大值应分别自动变为 A1 和 A50。当我滑过滑块时，我的值应该从 A1 变为 A50。

我的 HTML 是：

```
<div data-role="fieldcontain">
                <fieldset data-role="controlgroup" data-type="horizontal">
                    <legend>Layout view:</legend>
                          <input type="radio" name="radio-choice" id="radio-choice-c" value="on" checked="checked" />
                          <label for="radio-choice-c">List</label>
                          <input type="radio" name="radio-choice" id="radio-choice-d" value="off" />
                          <label for="radio-choice-d">Grid</label>
                          <input type="radio" name="radio-choice" id="radio-choice-e" value="other" />
                          <label for="radio-choice-e">Gallery</label>
                            </fieldset>
           </div>

<div data-role="fieldcontain">
        <label for="slider">Room:</label>
        <input type="range" name="slider" id="slider" value="--------" min=? max=? data-highlight="true"  />
</div> 
```

你认为最小和最大代码应该是什么？以及如何将输入值从 A1 更改为 A50？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T23:59:48.080

输入滑块的值只能是任何有效的**浮点数**。所以我认为它不适用于您要使用的最小最大值。

关于设置 min 和 max 属性的 jQuery 代码，您应该使用[属性](http://api.jquery.com/attr/)方法：

```
 $('#slider').attr('min', A_Route[0]);
    $('#slider').attr('max', A_Route[3]); 
```

看到它在[这里工作](http://jsfiddle.net/LK7mg/)

# c# - ObjectContext 实例已被释放 - Winforms 实体框架

> ID：11893352
> 
> 赞同：2
> 
> 时间：2012-08-09T23:17:23.090
> 
> 标签：c#, winforms, entity-framework

我正在尝试解决此问题，并确实阅读了有关此错误的内容，但无法找到解决方案。我正在使用实体框架为简单的产品类别场景构建一个 winforms 应用程序。这是我的模型的快照。 ![edmx](../Images/2586442e1fda3493a1889c7af48ed541.png)

ProductService 类中检索所有产品的代码是

```
public static List<Product> GetAllProducts()
{
    List<Product> products = new List<Product>();
    using (var entity = new SUIMSEntities1())
    {
        products = (from p in entity.Products
                    select p).ToList();
        return products;
    }            
} 
```

后面的 Products 代码中的代码是

```
List<Product> prods=ProductServices.GetAllProducts();
dgvProducts.DataSource = prods; 
```

当我尝试在 datagridview 中加载产品时，显示以下错误： ![在此处输入图像描述](../Images/76c347c375363fe188254bf74cf0b1e0.png)

你能告诉我是什么导致了这个问题吗？

**编辑：** Include 成功了，在这个特定的场景中，我改变了 GetAllProducts() 如下

```
 public static List<Product> GetAllProducts()
        {
            using (var entity = new SUIMSEntities1())
            {
                List<Product> products = entity.Products.Include("Category").ToList();
                return products;                
            }            
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T23:28:42.710

默认情况下，实体框架 (EF) 将延迟加载您的 Category 对象集。因为您的 Category 对象集是延迟加载的，所以当稍后一些其他代码引用 Category 时，EF 将尝试加载该集。但是，此时，您的上下文已被处理，导致您看到的错误。

您需要做的是强制上下文急切地加载您的 Category 实体集，如下所示：

```
public static List<Product> GetAllProducts()
{
    List<Product> products = new List<Product>();
    using (var entity = new SUIMSEntities1())
    {
        entity.Include("Category");  //force eager loading of Category
        products = (from p in entity.Products
                    select p).ToList();
        return products;
    }            
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T23:21:53.463

尽管您返回的是`List<Product>`，但访问 Category 似乎会导致数据库访问。问题是您已经处理了访问数据库所需的上下文。

# r - 如何使用 data.table 做到这一点？

> ID：11893355
> 
> 赞同：1
> 
> 时间：2012-08-09T23:17:36.280
> 
> 标签：r, data.table

我有一个数据表 ( `DatosMex`)，`R`并想在其中重新编码一个名为`industry`. 此变量的不同类别是：

```
 Agricultura,Ganaderia,Pesca,Caza Forestal                      
  Asociaciones                                                       
  Comercio                                                       
  Construccion                                                   
  Energia,Petroleo,Gas,Mineria                                   
  Gobierno                                                       
  Industria                                                      
  N/A                                                            
  NULL                                                           
  Servicios 
```

我想创建一个新变量，例如`gr_industry`，对某些类别进行分组。例如，我的新变量必须对类别`Agricultura,Ganaderia,Pesca,Caza Forestal`、和进行分组`Asociaciones`，并为它们分配代码 1。`Energia,Petroleo,Gas,Mineria``Gobienro`

你将如何使用`data.table`包语法来做到这一点？

我的方法是这样的：

```
 #Create an id for each industry
 DatosMex[,cod_industria:=as.numeric(DatosMex$industry)] 
 #Create a new data table
 ind =data.table(cod_industria=c(1:10),gr_industry=c(1,1,2,3,1,1,4,6,6,5))
 setkey(DatosMex,cod_industria)
 setkey(ind,cod_industria)
 DatosMex[ind] 
```

因此，如您所见，我必须创建一个新数据表`ind`，然后进行内部连接。我的问题是：是否有另一种使用方式来做到这`data.table`一点？我不想每次需要做类似的事情时都创建一个表。另外，我想避免使用 if 语句。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T23:59:30.747

我猜不需要设置密钥或创建新的data.table。该`[`函数通常非常快，尤其是在数据表对象中：

```
 DatosMex[, gr_industry := c(1,1,2,3,1,1,4,6,6,5)[cod_industria] ] 
```

如果该分组转换向量很大，那么您可以按名称引用它，即使它位于 data.table 之外。

```
 dta <- data.table(a=sample(1:10, 20, repl=TRUE))
 g6<- c(1,1,2,3,1,1,4,6,6,5)
 dta[ , ind := g6[a] ]
 #-------------------
     a ind
 1:  8   6
 2:  4   3
 3: 10   5
 4:  8   6
 snipped output 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T23:40:12.110

从代码组织的角度来看，您需要在某个时候定义重新编码，或者

*   在一个`data.table`或
*   一个开关功能。

这是一个开关功能示例

```
 ## a function that will `switch` based on the levels 1:10
  ## note that it is Vectorized (to avoid calling `sapply`
  switch_industry <- Vectorize(function(i) { switch(i, 1,1,2,3,1,1,4,6,6,5)})

  DatosMex[, gr_industry := switch_industry(cod_industria)] 
```

我不会将此称为`data.table`特定解决方案。

# python - 如何在 Python 中使用字符串作为数据包发出 gtk.gdk 事件

> ID：11893360
> 
> 赞同：0
> 
> 时间：2012-08-09T23:18:18.320
> 
> 标签：python, gtk, gdk, emit

我有一个问题，我需要根据从硬件线程接收到的数据发出数据。理想情况下，我想用数据包发出信号。

不知道要填什么？？？以下。

我需要制作自己的事件类吗？

像这样的东西：

```
import gtk.gdk as gdk
import gtk.glade as glade

class ApplicationFrame(object):
    def __init__(self, *args, **kwargs):
        ...
        self.glade = glade.XML(ui_filepath)
        self.window = self.glade.get_widget(self.widget_name)
        # for keystrokes:
        self.window.add_events(gtk.gdk.KEY_PRESS_MASK)
        self.window.connect("key-press-event", self.default_handler)
        # for my special event ????
        self.window.add_events(gtk.gdk.????)
        self.window.connect("????", self.default_handler)
        ...

    def emit_signal(self, name, data):
        event = gdk.Event(gdk.????)
        event.name = name
        event.data = data
        self.window.emit(event)

    def default_handler(self, widget, event):
        name, data = self.extract_data_from(event)
        # do something special with the information... 
```

提前致谢！

编辑：最终实现（仅显示新功能/添加）...

```
class ApplicationFrame(Ui_ApplicationFrame):
    """Standard Application Frame for Application"""
    __gsignals__ = {
        'data-received': (gobject.SIGNAL_RUN_FIRST, 
                          gobject.TYPE_NONE, 
                          (gobject.TYPE_PYOBJECT,)),
    }

    ...

    def handle_new_data(self, data):
    """Callback routine when data arrives on bus"""
        self.window.emit('data-received', data)

    def do_data_received(self, data):
    """Callback routine for emitted 'data-received' signal"""
    ...

...
gobject.type_register(ApplicationFrame) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T03:50:11.440

不要定义另一个`gdk.Event`. 这些仅用于表示 X11 事件或其在其他平台上的等价物。相反，您需要让您的类继承自`gobject.GObject`，然后定义一个具有神奇名称的字典成员`__gsignals__`。

如何做到这一点在[这里](http://www.pygtk.org/articles/subclassing-gobject/sub-classing-gobject-in-python.htm)描述。

像这样：

```
class ApplicationFrame(gobject.GObject):
    __gsignals__ = {
        'data-received': (gobject.SIGNAL_RUN_FIRST, gobject.TYPE_NONE, (gobject.TYPE_PYOBJECT,))
    }

    def do_data_recieved(self, data):
        # default handler 
```

# 64-bit - x64 和 IA-64 有什么区别？

> ID：11893364
> 
> 赞同：62
> 
> 时间：2012-08-09T23:19:13.820
> 
> 标签：64-bit, x86-64, cpu-architecture, itanium

我在 Microsoft 的网站上发现了两种不同的安装程序，一种用于 x64，一种用于 IA-64。参考：[安装 .NET Framework 4.5、4.5.1](http://msdn.microsoft.com/en-us/library/5a4x27ek.aspx)

我的理解是 IA-64 是 x64 的子类，所以我很好奇为什么它会有一个单独的安装程序。

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-08-09T23:25:21.087

x64 被用作“经典”x86 架构的 64 位扩展的简称；过去几年生产的几乎所有“普通”PC 都有基于这种架构的处理器。

AMD 发明了 AMD64 扩展；Intel 或多或少被迫实施它们，并首先将它们称为 IA-32e，然后是 EM64T，最后是 Intel 64（实际上，AMD 和 Intel 的扩展并不*完全相同*，但它们几乎相同）。

许多人也称它为 x86-64，以有一个独立于供应商的名称，并强调它是 x86 体系结构的 64 位演变。出售的所有带有“64 位处理器”的“常规”PC 都运行在 x86-64 架构上。

IA-64（Intel Architecture 64）是一种几乎完全不相关的 64 位架构（也称为 Itanium），最初由 Intel 为高端服务器开发。据说 Itanium 可以替代 x86 架构，但这种架构并没有取得多大成功（由于各种原因），因此您不太可能需要 IA-64 安装程序。

有关更多信息，您可以查看有关[x86-64](http://en.wikipedia.org/wiki/X86-64)和[Itanium](http://en.wikipedia.org/wiki/Itanium)的维基百科文章。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2014-03-20T22:19:19.000

IA-64 是英特尔安腾架构。这是一个超长指令字 (VLIW) 处理器指令集。

x86_64 是当今计算机中每台笔记本电脑/台式机中的处理器使用的普通 64 位架构。该处理器是动态处理器。

The main difference between these two is that

In VLIW, the compiler resolves the dependencies between instructions and schedules them appropriately. The processor merely executes them.

With a dynamic processor, the compiler just schedules the instructions without worrying about dependencies. The processor takes care of dependencies, reorders them and executes them appropriately.

VLIW code is dependent on each chip's internal architecture. The compiler needs to know that information. The advantage of them is that it can extract much more parallelism than dynamic processors can give.

The code is independent on each chip's internal architecture for dynamic processors. It just needs to follow the instruction set. So code compiled on one machine can run on other machines very easily. The disadvantage though is that limited parallelism can be exploited from dynamic processors. And the internal logic and design is very complex and intricate than VLIW.

Nevertheless, dynamic processors are used today mostly by consumers (individuals), so they can run code compiled / generated on any machine. VLIW processors are used by servers and enterprises because of the parallelism they can produce.

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-08-09T23:22:14.767

它们是不同的

IA-64 是 itanium - 服务器架构

x64 是 64bit intel core 和 amd cpus 实现的

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-09T23:23:20.797

x64 是 x86-64 的缩写，它是 x86 指令集的扩展。

IA-64 用于 Itanium 64 位架构（由 Intel 提供）

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-09T23:23:35.767

IA-64 适用于运行 Intel Itanium 64 位处理器的计算机。它们不支持像 x64 处理器那样运行 32 位应用程序。在这些处理器上运行需要特殊版本的 Windows，因此需要两个不同的安装程序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-27T08:25:33.240

他们有不同的指令集，这是关键点。

# c++ - 检查整数常量在编译时有不同的值

> ID：11893371
> 
> 赞同：3
> 
> 时间：2012-08-09T23:20:07.463
> 
> 标签：c++, compilation

我的问题如下。我有大量用作标识符的静态常量整数。出于这个原因，我想知道是否可以在编译时检查是否有多个具有相同值的常量（某种静态断言......）。

我不想使用枚举，因为这些常量是在不同的模块中定义的，我不想让所有的枚举都像一个很长的枚举（其中一些彼此不相关）。

这里有一个基本示例：

```
// module: foo.h
const uint32_t ELEMENT_TYPE_FOO_X = 46;
const uint32_t ELEMENT_TYPE_FOO_Y = 51;
...

// module: boo.h
const uint32_t ELEMENT_TYPE_BOO_C = 21;
const uint32_t ELEMENT_TYPE_BOO_D = 51; 
```

错误：ELEMENT_TYPE_FOO_Y 和 ELEMENT_TYPE_BOO_D 具有相同的值。

我根本不是专家，我想到的唯一检测此错误的是模板专业化。

```
template<uint32_t N>
struct element_traits {
};

template<ELEMENT_TYPE_FOO_X> {
    enum { value = ELEMENT_TYPE_FOO };
}; 
```

但这似乎是一个复杂的解决方案。我不知道是否有更优雅/更好的解决方案。到目前为止我还没有找到任何东西。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T23:35:29.163

你当然可以使用宏来做到这一点：

```
#define UNIQUE_CONSTANT(variable, value) \
  const uint32_t variable = value; \
  bool constant_val_##value = value; 
```

然后，如果两次使用相同的值，您将收到多重定义错误。

（从技术上讲，这将在链接时检测错误，而不是编译时。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T00:08:08.460

基于基思的解决方案。我可以“检查”常量对于调试构建具有独特的价值，并在发布构建时跳过它。

```
#ifdef DEBUG
#define DEFINE_UNIQUE_CONSTANT(variable, value) \
    const uint32_t variable = value;            \
    uint32_t constant_val_##value = value;
#else
#define DEFINE_UNIQUE_CONSTANT(variable, value) \
    const uint32_t variable = value;
#endif 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T01:07:46.280

如果大量常量必须不同并且必须在不同的源文件中定义，那么您可以通过这种方式生成它们，例如，从包含文件名和相应常量名的文件开始，并在每次构建时生成其余的。

输入文件：

```
[foo.h]
ELEMENT_TYPE_FOO_X
ELEMENT_TYPE_FOO_Y

[boo.h]
ELEMENT_TYPE_BOO_C
ELEMENT_TYPE_BOO_D 
```

剧本：

```
#!/usr/bin/env python
from ConfigParser import SafeConfigParser
from itertools import count

config = SafeConfigParser(allow_no_value=True)
config.optionxform = lambda x: x # use names as-is
config.read('input.cfg')

counter = count(1)
for filename in config.sections():
    with open(filename, 'w') as f:
         for (name, _), i in zip(config.items(filename), counter):
             f.write("const uint32_t %s = %s;\n" % (name, i)) 
```

# backbone.js - 骨干.js 依赖的字段集和下拉列表

> ID：11893380
> 
> 赞同：0
> 
> 时间：2012-08-09T23:21:21.037
> 
> 标签：backbone.js, fieldset, cascadingdropdown, chain

我正在做一个项目，我有依赖的字段集和下拉列表，我想知道backbone.js 是否是解决这个问题的好方法。

设置是这样的： -fieldset A 与下拉 A1 -fieldset B 与下拉 B1 和 B2

字段集 A 和下拉列表 A1 应始终可见。在下拉 A1 中进行选择时，应出现字段集 B 和下拉 B1。在下拉 B1 中进行选择时，应出现下拉 B2。

更改下拉 A1 应该“重置”字段集 B 和下拉 B1，并且下拉 B2 应该消失。

尽管此示例仅限于描述带有下拉列表的两个字段集，但可能还有更多，所有这些都取决于进一步“上链”所做的选择。

Backbone.js 是解决这个问题的好方法吗？如果是这样，处理此设置的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T02:55:47.523

我强烈建议您查看[backbone-forms](https://github.com/powmedia/backbone-forms)，您可以使用它来创建条件字段（以及许多其他内容）。

请参阅我在此答案中的解释：[带有条件字段的主干形式](https://stackoverflow.com/questions/11433314/backbone-forms-with-conditional-fields/11713567#11713567)

我还在这里创建了一个现场演示：[带有条件字段的骨干表单，](https://stackoverflow.com/questions/11433314/backbone-forms-with-conditional-fields/11713567#11713567)它基于骨干表单谷歌组中的[讨论](https://groups.google.com/forum/#!topic/backbone-forms/X5eVdTZWluQ/discussion%5B1-25%5D)。

# jquery - 使用 css 和 jquery 创建带有悬停效果的“地图”（滚动：上、右、下、左）

> ID：11893385
> 
> 赞同：0
> 
> 时间：2012-08-09T23:22:00.843
> 
> 标签：jquery, css

我希望能够在 .hover 或鼠标输入时使锚链接（上、右上、右、右下、下、左下、左、左上）滚动到它们各自的位置。我需要绝对定位锚标签，以便在实际地图滚动时它们永远不会移动。

但无论如何，这是我试图创造的基本理念。

> 编辑：现在我考虑一下，使用锚标签可能会出错。地图需要比锚标签本身更高的 z-index 值，因为地图上有需要点击的内容。我现在用小提琴的方式实际上是错误的。
> 
> 功能应该是逐渐“轻松”的移动。从中间开始（缓慢移动），然后再向上（快速移动）。我想使用带有页面 x 和 y 坐标的 mouseEnter 和 mouseLeav 将是答案。我是否以这种方式思考而不是使用锚标记方法？

这是更新的小提琴：http: [//jsfiddle.net/YWnzc/131/](http://jsfiddle.net/YWnzc/131/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T23:49:57.470

锚标记链接到它们自己，以便浏览器在您单击它们时尝试将标记滚动到框架的顶部。您可以使用脚本来防止这种默认行为，或更改链接的目标。

# video - 如何从 h.264 视频流中获取帧速率？

> ID：11893387
> 
> 赞同：2
> 
> 时间：2012-08-09T23:22:08.030
> 
> 标签：video, video-streaming, h.264

如何从 h.264 视频流中获取帧速率和比特率？我可以从 SPS NAL 单元获取宽度和高度，但不能获取帧速率。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T06:44:26.967

`vui_parameters`SPS NAL 具有以下字段：`timing_info_present_flag`, `num_units_in_tick`, `time_scale`, `fixed_frame_rate_flag`- 它们一起定义流的帧速率（当/如果适用）。

# mysql - MySQL - 将连接的行值作为选择字段传递

> ID：11893390
> 
> 赞同：0
> 
> 时间：2012-08-09T23:22:31.483
> 
> 标签：mysql

请原谅这个糟糕的标题 - 不知道如何用简短、简单的方式表达我想要做的事情。

我正在为具有已本地化的现有数据库的应用程序开发新 UI。可以有任意数量的语言，管理员可以随时创建、编辑或删除它们。数据库正在被其他应用程序使用，我无法修改结构。

DB 管理着一系列艺术品。有几个“资产”表，例如`media`和`pieces`（以及其他，但是这两个应该足以作为示例）。

每个资产表都有一个名为 的字段`localization`。这基本上是一个唯一标识符，并且是同名表的 FK ( `localizations`)。为简单起见，假设`media`表格如下所示

```
id localization
1  1
2  2
3  5
4  8
5  11
... 
```

并且该`pieces`表使用相同的本地化增量，因此可能看起来像这样

```
id localization
1  3
2  4
3  6
4  9
5  20
... 
```

该`localizations`表只是一系列自动递增的 PK。

```
localization
1
2
3
4
5
... 
```

有一个`localization_entries`表将键：值对与本地化联系起来：

```
localization  language  entry_key  entry_value
1             en        title      photo of dog
1             en        detail     this is long text describing the photo of the dog.
1             es        title      foto de perro
2             en        title      photo of cat
... 
```

任何特定的本地化都可能有一个条目键和值，用于无、任何或所有可用语言。

我们需要能够使用本地化值进行搜索和排序。最初，我认为唯一的方法是加载整个数据集（多个查询），填充 PHP 对象数组，然后使用 PHP 执行搜索和排序，但我想知道是否可以使用直接 SQL。

理想情况下，我想取回具有所有本地化条目值的行。例如，第一个本地化的行将包含媒体项目本身的所有字段，以及该本地化的所有本地化值。

像这样的东西“有效”

```
SELECT media.id, media.name, en.entry_value as en_title, sp.entry_value as sp_title
FROM media
JOIN localization_entries en
ON media.localization=en.localization 
JOIN localization_entries sp
ON media.localization=sp.localization
AND en.language='en' AND en.entry_key = 'title'
AND sp.language='es' AND sp.entry_key = 'title' 
```

但很明显，任何没有相应键或语言的 entry_key 的东西都不会被返回（例如，任何没有 'es' entry_key 的 'title' 的东西）。此外，添加任何类型的`WHERE`or`ORDER BY`子句也会失败......

```
SELECT media.id, media.name, en.entry_value AS en_title, sp.entry_value AS sp_title
FROM media
JOIN localization_entries en
ON media.localization=en.localization 
JOIN localization_entries sp
ON media.localization=sp.localization
AND en.language='en' AND en.entry_key = 'title'
AND sp.language='es' AND sp.entry_key = 'title'
WHERE en.entry_value like '%whatever%' -- would not work
ORDER BY en.entry_value 
```

有没有一种实用的方法来使用 MySQL 搜索/排序/过滤这样的一组关系？

TYIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T23:45:17.347

使用外连接：

```
SELECT media.id, media.name, en.entry_value as en_title, sp.entry_value as sp_title
FROM media
LEFT OUTER JOIN localization_entries en
ON media.localization=en.localization AND en.language='en' AND en.entry_key = 'title'
LEFT OUTER JOIN localization_entries sp
ON media.localization=sp.localization AND sp.language='es' AND sp.entry_key = 'title' 
```

如果. `en_title`_ `sp_title`_`localization_entries`

# jquery - 如何从全日历中的所有事件中提取 json 数据？

> ID：11893391
> 
> 赞同：1
> 
> 时间：2012-08-09T23:22:36.330
> 
> 标签：jquery, fullcalendar

我希望能够单击一个按钮将所有事件数据放入一个包含所有事件数据的 json 对象的 var 中。

`$('#calendar').each(function(i,v){alert(v);});`不工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T23:26:23.553

使用`.fullCalendar('clientEvents')`. `Event`返回一个对象数组

# css - 如何追踪奇怪间距的起源？

> ID：11893392
> 
> 赞同：-4
> 
> 时间：2012-08-09T23:22:37.433
> 
> 标签：css

我做了一些不太出色的事情，但是无论我在 Firebug 中检查多少，我都看不到任何导致按钮在左侧出现这种奇怪边缘的样式。事实上，除了最左边的边缘，它们甚至不闪烁（鼠标悬停）。

问题是双重的。邪恶的计算机做了什么？

而且，更重要的是，如何追踪这种奇怪布局的来源？

演示页面可以在[这里](http://viltersten.somee.com/TvGuide/TvGuide.aspx)找到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T23:32:05.270

`input[type="button"], input[type="submit"]`左边距为 120px。

# unix - 使用 unix join -o 不打印公共字段

> ID：11893393
> 
> 赞同：1
> 
> 时间：2012-08-09T23:23:05.097
> 
> 标签：unix, join

我正在使用 `join -1 2 -2 2 file1.txt file2.txt > file3.txt`基于它们的第二列加入我的两个文本文件并将它们写入 file3.txt，它工作得很好。但是，我不希望 file3.txt 包含公共字段。谷歌搜索和加入的`man`页面表明`-o`格式化运算符可以帮助实现这一点，但我应该如何去做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:26:40.120

假设每个文件只有两列，并且您想加入第二列但在输出中只显示每个文件的第一列，请使用

```
join -1 2 -2 2 -o 1.1,2.1 file1.txt file2.txt > file3.txt 
```

请记住，在加入之前，您的两个文件应在第二列上排序。

运行示例：

```
$ cat file1.txt
2 1
3 2
7 2
8 4
2 6
$ cat file2.txt 
3 1
5 4
9 9
$ join -1 2 -2 2 -o 1.1,2.1 file1.txt file2.txt
2 3
8 5 
```

# asp.net-mvc - 如何将jquery更改事件添加到网格内的单选按钮

> ID：11893394
> 
> 赞同：0
> 
> 时间：2012-08-09T23:23:07.220
> 
> 标签：asp.net-mvc, telerik

我有两个单选按钮 - Telerik MVC 网格中的 Approve 和 Deny，还对它们应用了 jquery buttonset()。我需要检查在每一行上选择了哪个单选按钮。试图在 jquery 更改事件上做到这一点，但它没有启动。任何想法？

```
 <div id="ApprovalDetail" class="content">
            <% 
        //To make columns visible/invisible
        string Actions = (string)ViewData["Actions"];

        //To store data back in Model
        for (int i = 0; i < Model.idrequest.Length; i++)
        {
            %>
            <%=Html.HiddenFor(model => model.idrequest[i].RequestDetailsId, new {@id="hiddenRequestDetailsId"+i.ToString()} )%>
            <%=Html.HiddenFor(model => model.idrequest[i].Approved, new {@id="hiddenApproved"+i.ToString()} )%>
            <%
                }

                 Html.Telerik().Grid(Model.idrequest)
                      .Name("IdRequest")

                      .DataKeys(dataKeys =>
                          {
                              dataKeys.Add(r => r.RequestDetailsId).RouteKey("RequestDetailsId");
                          }
                          )
                      .Columns(columns =>
                          {

                              columns.Bound(r => r.RequestDetailsId);
                              columns.Bound(r => r.EmpId);
                              columns.Bound(r => r.Name);
                              columns.Bound(r => r.Email);
                              columns.Bound(r => r.ADSId);
                              columns.Bound(r => r.Action);
                              columns.Bound(r => r.Role);

                              if (Actions != null)
                              {
                                  if (Actions.Contains("Suspend"))
                                  {
                                      columns.Bound(r => r.SuspensionDate).Format("{0:MM/dd/yyyy}").Width(100);
                                      columns.Bound(r => r.SuspensionReason);
                                  }

                                  if (Actions.Contains("Reactivate"))
                                      columns.Bound(r => r.ReactivationDate).Format("{0:MM/dd/yyyy}").Width(100);

                                  if (Actions.Contains("Delegate"))
                                  {
                                      columns.Bound(r => r.DelegateOwner);
                                      columns.Bound(r => r.DelegationStartDate).Format("{0:MM/dd/yyyy}").Width(100);
                                      columns.Bound(r => r.DelegationEndDate).Format("{0:MM/dd/yyyy}").Width(100);
                                  }
                              }

                              columns.Template(r =>
                             {
            %>
            <div class="radioStyle">
                <%= Html.RadioButton(r.RequestDetailsId.ToString(), 1, false, new { @id = "yes_Approve" + r.RequestDetailsId.ToString(), @group = "Approval" })%><label
                    for="yes_Approve<%= r.RequestDetailsId %>">Approve</label>
                <%= Html.RadioButton(r.RequestDetailsId.ToString(), 2, false, new { @id = "no_Approve" + r.RequestDetailsId.ToString(), @group = "Approval" })%><label
                    for="no_Approve<%= r.RequestDetailsId %>">Deny</label>
            </div>
            <%
                             }).Title("Approve");

                         })
                         .Pageable(paging => paging.Enabled(true).PageSize(10))
                         .KeyboardNavigation()
                         .Filterable(filtering => filtering.Enabled(true))
                         .Sortable(sorting => sorting.Enabled(true))
                         .Groupable(grouping => grouping.Enabled(true))
                         .Resizable(resizing => resizing.Columns(true))

                         .Render();

            %>
                        </div>

     <script type="text/javascript">
     $(document).ready(function () {

         //visuals
         $(function () {
             $("#approveRequest").button();
             $(".radioStyle").buttonset();

         });

     $('#IdRequest :radio[group=Approval]').each(function () {
             $(this).change(function () { alert("aa"); });

     });
     </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T06:19:53.823

网格在 onDocumentReady 之后绑定。所以你需要使用特殊的 Telerik 网格事件 OnRowBound。使用`.ClientEvents(c=>c.OnRowBound("bindGridRow"))` Where bindGridRow 将 onchange 事件绑定到单行中的单选按钮的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T08:42:03.417

您可以使用网格的 OnLoad 事件来绑定更改事件处理程序：

```
.ClientEvents(events => events.OnLoad("BindOnChange"))

function BindOnChange(e){
  // this - IdRequest
  $(this).change(OnRadio_Change);
}

function OnRadio_Change(e){
  var $radio = $(e.target);
  alert($radion.is(':checked'));
  // var $tr = $(this).closest('tr');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T16:03:40.747

使用了这个 jquery 代码 -

```
 <script type="text/javascript">

    $(document).ready(function () {

        //visuals
        $(function () {
            $("#approveRequest").button();
            $(".radioStyle").buttonset();

        });

        $('.label-class').click(LabelClicked);

        function LabelClicked() {

            var input = $('#' + $(this).attr('for'));
            if (input) {
                var selected = input.val();
                InputChanged(selected);
            }
            return true;
        }

        function InputChanged(selected) {

            var val = (selected.toString().split('_'))[0];
            var detailsId = (selected.toString().split('_'))[1];
            var approval = false;

            if (val == "yesApprove")
                approval = true;

            var count = $("#Count").val();

            for (var i = 0; i < count; i++) {
                if ($("#hiddenRequestDetailsId" + i).val() == detailsId) {

                    $("#hiddenApproved" + i).val(approval);
                }
            }

        }

        //              $('#IdRequest :radio[group=Approval]').each(function () {

        //                  alert(this.name);
        //                  $(this).change(function () { alert("aa"); });

        //             
        //              });

        //client side validation
        $.validator.setDefaults({
            highlight: function (input) {
                $(input).addClass("ui-state-highlight");
            },
            unhighlight: function (input) {
                $(input).removeClass("ui-state-highlight");
            }
        });

        $("#requestForm").validate({
            submitHandler: function (form) {

                $('form input[type=submit]').attr('disabled', 'true').addClass('ui-state-disabled');
                form.submit();
            }

        });

    });
</script> 
```

# c# - 命名空间中的函数？

> ID：11893404
> 
> 赞同：3
> 
> 时间：2012-08-09T23:23:43.397
> 
> 标签：c#, function, namespaces

> **可能重复：**
> [为什么 C# 不允许像 C++ 这样的非成员函数](https://stackoverflow.com/questions/1024171/why-c-sharp-is-not-allowing-non-member-functions-like-c)

`StaticClass.Function()`我不想写，而是简单地写`Function()`. 将有许多功能，并且都应该可以从不同（且不相关）的类和文件中访问。如何将这些函数放在特定的命名空间中？简单地声明它会给我一个编译错误

```
error CS1518: Expected class, delegate, enum, interface, or struct 
```

我知道其他 .NET 语言可以做到这一点。我可以使用编译选项吗？也许甚至没有证件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T23:25:55.937

C# 不允许使用自由函数。每个函数都必须驻留在一个类型中。这就是它的工作方式，这不是技术可能性的问题，而是一个设计决定。

你可能对[这篇文章](http://blogs.msdn.com/b/ericlippert/archive/2009/06/22/why-doesn-t-c-implement-top-level-methods.aspx)感兴趣。

* * *

在旁注中，有没有注意到 Intellisense在编写 C# 时*比*C++ 更好地工作？这是有帮助的事情之一（不是唯一的，而是一个）。

编辑：有趣的是，在阅读链接的文章时，我注意到这是一个重复...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T23:31:43.597

[C# 在设计](http://blogs.msdn.com/b/ericlippert/archive/2009/06/22/why-doesn-t-c-implement-top-level-methods.aspx)上不允许这样做。

但是，如果您的目标仅仅是减少打字，那么您有几个选择。

首先，您可以使用[using 指令](http://msdn.microsoft.com/en-us/library/sf0df423%28v=vs.80%29.aspx)来简化此操作。通过添加这个：

```
using SC = YourNamespace.StaticClass; 
```

您可以将该特定文档中的调用缩短为：

```
SC.Function(); 
```

偶尔合适的另一个选项是使用 [扩展方法](http://msdn.microsoft.com/en-us/library/bb383977%28v=vs.100%29.aspx)。这可以消除指定类型的需要，因为该函数似乎是第一个参数的成员函数。当然，这不适用于提供的示例（因为它需要一个参数），但可能是减少键入和搜索量的另一种选择，具体取决于特定的用例。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-09T23:27:38.953

C# 是纯面向对象的，这意味着您不能在类之外拥有函数或声明。你必须使用静态来实现你想要的。

# java - 如何开始在 Jquery 中使用 DataTable

> ID：11893408
> 
> 赞同：0
> 
> 时间：2012-08-09T23:24:01.373
> 
> 标签：java, javascript, jquery, servlets

我正在尝试学习 Java 和 Javascript。目前我关注 MVC，我有 servlet 将数据从表发送到 JSP，并在表中显示数据。

我正在尝试使该表格可编辑并使用 DataTable 创建表格的良好外观和感觉，但是我不确定如何或从哪里开始..有人可以帮我解决这个问题。我是初学者，关于如何使用 DataTable 的任何简单示例真的会有所帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T23:50:22.350

这里有几个例子：http: [//datatables.net/examples/](http://datatables.net/examples/)

如果您想显示数据，Datatables 是一个很棒的插件。但是根据我的经验，与服务器交互并不简单。就像...添加一个新的 tr 并使用 java 在数据库上创建一个实例。这种互动很复杂。

根据我的经验，我会使用 primefaces 数据表：http: [//www.primefaces.org/showcase-labs/ui/datatableBasic.jsf ;jsessionid=1si9n7bh9e6921gz0mj3w42ew3](http://www.primefaces.org/showcase-labs/ui/datatableBasic.jsf;jsessionid=1si9n7bh9e6921gz0mj3w42ew3)

# eclipse - Eclipse Juno 中的旧式标签？

> ID：11893410
> 
> 赞同：12
> 
> 时间：2012-08-09T23:24:06.553
> 
> 标签：eclipse

有什么办法可以恢复靛蓝的标签样式？我不喜欢新的白色和块状标签！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-10T10:32:05.270

Windows -> 首选项 -> 外观 -> 主题。选择“经典”。

之后重新启动一次，因为某些更改无法立即应用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:36:04.637

对于那些希望转而使用 Eclipse Indigo 外观的人来说，之前的版本，只需重命名文件夹，

插件\org.eclipse.platform_4.2.0.v201206081400\css

到类似的东西，

插件\org.eclipse.platform_4.2.0.v201206081400\css.old

你完成了！启动您的 Eclipse 并享受旧主题。

**注意**：

进行此更改时，请确保 Eclipse 未运行。

在 Eclipse juno SR1 中，文件夹是**org.eclipse.platform_4.2.1.v201209141800**

# peoplepicker - 将用户名保存到人员字段中

> ID：11893411
> 
> 赞同：1
> 
> 时间：2012-08-09T23:24:09.243
> 
> 标签：peoplepicker

要将用户名保存到人员字段中：

在我的自定义表单中提供了人员编辑器控件，并按如下方式保存了每个已解析的实体：

```
 if (currentPeopleEditor.Entities.Count != 0)
 {
 SPFieldUserValueCollection userCollection = new SPFieldUserValueCollection();
 for (int index = 0; index < currentPeopleEditor.ResolvedEntities.Count; index++)
 {
  PickerEntity ObjEntity = (PickerEntity)currentPeopleEditor.ResolvedEntities[index];
  userCollection.Add(new SPFieldUserValue(objSPWeb,Convert.ToInt32(ObjEntity.EntityData["SPUserID"]), ObjEntity.Key));
  }
  newItem[Field.Key.ToString()] = userCollection;
  } 
```

在某些用户说遇到此异常之前，它工作得很好：“无效的查找值

查找字段包含无效数据，请检查值并重试。”

在调查中，我们发现发生此错误是因为 ObjEntity.EntityData["SPUserID"]) 返回为 null。

之所以发生这种情况，是因为要求保存一些不访问此网站集但他们是公司 AD 系统成员的用户名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T23:25:11.600

为了解决这个问题，我们参考了 SharePoint 并复制了他们的做法。在其中一个列表中添加一列人员和组类型的列，允许它选择任何用户。在此列表中创建新项目并选择一个名称不在所有用户列表中的用户。保存项目。返回所有用户列表，您将看到新用户名已添加到此列表中。

注意：要查看 UI 中的所有用户列表，请浏览以下位置：网站集 URL/_catalogs/users/simple.aspx

所以现在要实现相同的功能。我更新了代码如下

```
if (currentPeopleEditor.Entities.Count != 0)
{
    SPFieldUserValueCollection userCollection = new SPFieldUserValueCollection();
    for (int index = 0; index < currentPeopleEditor.ResolvedEntities.Count; index++)
{
               PickerEntity ObjEntity = (PickerEntity)currentPeopleEditor.ResolvedEntities[index];
               if (ObjEntity.EntityData["SPUserID"] == null)

                {
                      SPContext.Current.Site.RootWeb.AllUsers.Add(ObjEntity.Key, ObjEntity.EntityData["Email"].ToString(), ObjEntity.DisplayText, "");

                     SPContext.Current.Site.RootWeb.Update();

                     userCollection.Add(new SPFieldUserValue(objSPWeb, Convert.ToInt32(SPContext.Current.Site.RootWeb.AllUsers[ObjEntity.Key].ID), ObjEntity.Key));
                      }
                      else    
                       {    userCollection.Add(new SPFieldUserValue(objSPWeb,                 Convert.ToInt32(ObjEntity.EntityData["SPUserID"]), ObjEntity.Key));
                       }
         }
    newItem[Field.Key.ToString()] = userCollection;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-18T04:34:58.337

长话短说，解决 SharePoint 2010 中的上述问题只需使用 web.EnsureUser()

它将用户添加到所有用户列表并返回 spuser 对象。

# asp.net - 面板内的部分边框

> ID：11893413
> 
> 赞同：0
> 
> 时间：2012-08-09T23:24:31.727
> 
> 标签：asp.net, css, border

我想要做的是在我的面板顶部创建一个部分边框。例如。我希望顶部边框的一部分变白。例如。在我的CSS中，我有

```
.UserPanel
{
    border-left: 1px solid black;
    border-right: 1px solid black;
    border-bottom: 1px solid black;
} 
```

如果我指定一个边框顶部，整个面板将有一个顶部边框。我想要的是从左侧开始延伸约 80% 的部分边框。这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T23:29:39.323

您可以使用border-top-image为顶部边框指定图像

# python - 如何使用热图在 matplotlib 中制作方形子图？

> ID：11893414
> 
> 赞同：13
> 
> 时间：2012-08-09T23:24:44.610
> 
> 标签：python, numpy, matplotlib, scipy

我正在尝试制作一个简单的子图，其中一个子图中的树状图和另一个子图中的热图，同时保持方轴。我尝试以下方法：

```
from scipy.cluster.hierarchy import linkage
from scipy.cluster.hierarchy import dendrogram
from scipy.spatial.distance import pdist

fig = plt.figure(figsize=(7,7))
plt.subplot(2, 1, 1)
cm = matplotlib.cm.Blues
X = np.random.random([5,5])
pmat = pdist(X, "euclidean")
linkmat = linkage(pmat)
dendrogram(linkmat)
plt.subplot(2, 1, 2)
labels = ["a", "b", "c", "d", "e", "f"]
Y = np.random.random([6,6])
plt.xticks(arange(0.5, 7.5, 1))
plt.gca().set_xticklabels(labels)
plt.pcolor(Y)
plt.colorbar() 
```

这会产生以下结果：

![在此处输入图像描述](../Images/4da610a3c0fd1668306628cacd734498.png)

但问题是轴不是方形的，并且颜色条被认为是第二个子图的一部分。我希望它挂在绘图之外，并使其树状图框和热图框都是正方形并且彼此对齐（即相同大小。）

正如文档所建议的那样，我在调用时尝试使用`aspect='equal'`获取方轴`subplot`，但这破坏了情节，给出了这个......

![在此处输入图像描述](../Images/093438bf32929dd555ab0a5517f510f3.png)

如果我尝试`plt.axis('equal')`在每个子图之后使用而不是`aspect='equal'`，它奇怪地平方热图而不是它的边界框（见下文），同时完全破坏树状图并弄乱 xtick 标签的对齐...... - 导致这个混乱：

![在此处输入图像描述](../Images/b8af86fac9841d281e25a89d9a8c33e9.png)

如何解决？总而言之，我试图绘制一些非常简单的东西：顶部子图中的方形树状图，底部子图中的方形热图，右侧有颜色条。没有什么花哨。

最后，更一般的问题：是否有一般规则/原则可以强制 matplotlib*始终*使轴保持正方形？我想不出一个我不想要方轴的情况，但这通常不是默认行为。如果可能的话，我想强制所有地块都是正方形的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-10T01:04:29.837

aspect="equal" 表示数据空间中的相同长度在屏幕空间中的长度相同，但是在您的顶轴中，xaxis 和 yaxis 的数据范围不一样，因此它不会是正方形。要解决此问题，您可以将纵横比设置为 x 轴范围和 y 轴范围的比率：

```
from scipy.cluster.hierarchy import linkage
from scipy.cluster.hierarchy import dendrogram
from scipy.spatial.distance import pdist
import matplotlib
from matplotlib import pyplot as plt
import numpy as np
from numpy import arange

fig = plt.figure(figsize=(5,7))
ax1 = plt.subplot(2, 1, 1)
cm = matplotlib.cm.Blues
X = np.random.random([5,5])
pmat = pdist(X, "euclidean")
linkmat = linkage(pmat)
dendrogram(linkmat)
x0,x1 = ax1.get_xlim()
y0,y1 = ax1.get_ylim()
ax1.set_aspect((x1-x0)/(y1-y0))
plt.subplot(2, 1, 2, aspect=1)
labels = ["a", "b", "c", "d", "e", "f"]
Y = np.random.random([6,6])
plt.xticks(arange(0.5, 7.5, 1))
plt.gca().set_xticklabels(labels)
plt.pcolor(Y)
plt.colorbar() 
```

这是输出：

![在此处输入图像描述](../Images/08996d99285777c1d0ce7d330a05de1d.png)

要定位颜色条，我们需要编写一个 ColorBarLocator 类，pad 和 width 参数以像素为单位，

*   **pad**：设置轴之间的空间和它的 colobar
*   **width**：颜色条的宽度

替换`plt.colorbar()`为以下代码：

```
class ColorBarLocator(object):
    def __init__(self, pax, pad=5, width=10):
        self.pax = pax
        self.pad = pad
        self.width = width

    def __call__(self, ax, renderer):
        x, y, w, h = self.pax.get_position().bounds
        fig = self.pax.get_figure()
        inv_trans = fig.transFigure.inverted()
        pad, _ = inv_trans.transform([self.pad, 0])
        width, _ = inv_trans.transform([self.width, 0])
        return [x+w+pad, y, width, h]

cax = fig.add_axes([0,0,0,0], axes_locator=ColorBarLocator(ax2))
plt.colorbar(cax = cax) 
```

![在此处输入图像描述](../Images/03678107d58e59d20e56bafeedbc9892.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-15T22:08:59.583

@HYRY 的回答非常好，值得称赞。但是要完成关于将平方图很好地排列的答案，您可以欺骗 matplotlib 认为两个图都有颜色条，只使第一个图不可见：

```
from scipy.cluster.hierarchy import linkage
from scipy.cluster.hierarchy import dendrogram
from scipy.spatial.distance import pdist
import matplotlib
from matplotlib import pyplot as plt
import numpy as np
from numpy import arange

fig = plt.figure(figsize=(5,7))
ax1 = plt.subplot(2, 1, 1)
cm = matplotlib.cm.Blues
X = np.random.random([5,5])
pmat = pdist(X, "euclidean")
linkmat = linkage(pmat)
dendrogram(linkmat)
x0,x1 = ax1.get_xlim()
y0,y1 = ax1.get_ylim()
ax1.set_aspect((x1-x0)/(y1-y0))

plt.subplot(2, 1, 2, aspect=1)
labels = ["a", "b", "c", "d", "e", "f"]
Y = np.random.random([6,6])
plt.xticks(arange(0.5, 7.5, 1))
plt.gca().set_xticklabels(labels)
plt.pcolor(Y)
plt.colorbar()

# add a colorbar to the first plot and immediately make it invisible
cb = plt.colorbar(ax=ax1)
cb.ax.set_visible(False)

plt.show() 
```

![代码输出](../Images/8e0e228ea54bdfc1f6b34f17c50009db.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-19T08:31:34.887

要添加其他答案，您需要将参数的绝对值设为`.set_aspect`：

```
x0,x1 = ax1.get_xlim()
y0,y1 = ax1.get_ylim()
ax1.set_aspect(abs(x1-x0)/abs(y1-y0)) 
```

# php - facebook 与 PHP 连接后发布提要

> ID：11893430
> 
> 赞同：0
> 
> 时间：2012-08-09T23:26:21.920
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk, publishing

我正在尝试将提要发布到我用户的 Facebook 墙上。我为我的网站使用 Facebook Connect。我已经生成了`getLoginUrl()`具有电子邮件、offline_access 和 publish_stream 权限的链接。

我的用户点击此链接，通过 facebook 进行身份验证并返回我的网站。当他们这样做时，我会用`getUser()`.

然后我试图在他们的墙上发布一个帖子。我用这个：

```
$user = $facebook->getUser();

try {
    $publishStream = $facebook->api("/$user/feed", 'post', array(
        'message' => "Mesaj icerigi",
        'link'    => 'http://ithinkdiff.net',
        'picture' => 'http://thinkdiff.net/ithinkdiff.png',
        'name'    => 'iOS Apps & Games',
        'description'=> 'Checkout iOS apps and games from iThinkdiff.net. I found some of them are just awesome!'
        )
    );
} catch (FacebookApiException $e) {
    print_r($e);
} 
```

但是每次我尝试这样做时，都会出错。api异常什么的。我做错了什么？

# objective-c - 加载 QTMovie 时出现警告

> ID：11893436
> 
> 赞同：1
> 
> 时间：2012-08-09T23:26:51.883
> 
> 标签：objective-c, cocoa, video, quicktime

我刚刚升级到 Mountain Lion 和 Xcode 4.4，现在每当我在现有应用程序的 QTMovieView 上加载电影时都会收到这些警告。

```
2012-08-09 23:56:16.132 MyApp[3590:303] *** WARNING: -[NSImage compositeToPoint:fromRect:operation:fraction:] is deprecated in MacOSX 10.8 and later. Please use -[NSImage drawAtPoint:fromRect:operation:fraction:] instead.
2012-08-09 23:56:16.134 MyApp[3590:303] *** WARNING: -[NSImage compositeToPoint:operation:fraction:] is deprecated in MacOSX 10.8 and later. Please use -[NSImage drawAtPoint:fromRect:operation:fraction:] instead.
2012-08-09 23:56:16.137 MyApp[3590:303] *** WARNING: -[NSImage compositeToPoint:operation:] is deprecated in MacOSX 10.8 and later. Please use -[NSImage drawAtPoint:fromRect:operation:fraction:] instead.
2012-08-09 23:56:16.137 MyApp[3590:303] *** WARNING: -[NSImage compositeToPoint:fromRect:operation:] is deprecated in MacOSX 10.8 and later. Please use -[NSImage drawAtPoint:fromRect:operation:fraction:] instead. 
```

我正在使用此代码打开电影：

```
QTMovie *movie = [QTMovie movieWithURL:url error:nil];

if (movie)
{
    [[movieView movie] stop];
    [movieView setMovie:movie];
} 
```

从哪里`url`检索到`NSOpenPanel`。电影打开并且播放良好，但我想摆脱这些警告。

我不明白它们来自哪里，它们似乎与`NSImage`班级有关，但我什至没有`NSImage`在我的应用程序中使用对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T05:27:28.300

来自您的 -setMovie 电话，而不是您的错。

CompositeToPoint：在 SDK 3.26 的 NSImage.h 中声明

```
- (void)compositeToPoint:(NSPoint)point fromRect:(NSRect)rect operation:(NSCompositingOperation)op fraction:(CGFloat)delta; 
```

我们应该报告它

# c - 在 linux 中运行 C 脚本 (.h)

> ID：11893441
> 
> 赞同：-3
> 
> 时间：2012-08-09T23:27:48.623
> 
> 标签：c, sigar

我正在尝试从[SIGAR](http://sourceforge.net/projects/sigar/files/sigar/1.6/) API 运行 C 库。在包含目录中，它有几个 .h 文件，我正在尝试使用以下命令运行这些文件。我得到“无法执行二进制文件”，我该如何解决？

```
[oracle@oracleapps include]$ pwd
/home/oracle/sigar/hyperic-sigar-1.6.4/sigar-bin/include
[oracle@oracleapps include]$ cc -o test sigar_fileinfo.h
[oracle@oracleapps include]$ ./test
-bash: ./test: cannot execute binary file
[oracle@oracleapps include]$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T01:56:26.990

我意识到我无法编译 .h 文件，因此我编写了另一个 .c 程序并调用了 c 库。这解决了我的问题

# php - 无法修改标头信息 没有任何作用

> ID：11893442
> 
> 赞同：-2
> 
> 时间：2012-08-09T23:27:51.090
> 
> 标签：php, header, warnings

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我知道有一些关于这个的帖子，但没有一个真正帮助我，我在下面得到错误，在 index.php 文件中我只有一行 php 代码，它仍然会抛出这个错误。我该怎么做才能解决这个问题？？？

```
Warning: Cannot modify header information - headers already sent by (output started at /home/xxx/public_html/index.php:1) in /home/xxx/public_html/index.php on line 1

<?PHP setcookie("cookname", "", 1); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:32:20.930

`<?php`在您的代码之前有一个空格/任何其他可见或可见字符 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T23:57:18.323

最常见的问题是开始 PHP 标记之前的空格字符`<?php`。其他原因可能是 UTF-8 [BOM](http://en.wikipedia.org/wiki/Byte_order_mark)起始字符或其他不可见字符。使用一些 HEX 编辑器检查您的脚本，并检查它是否以 3F 3C 开头。如果您在这两个十六进制字符串之前有任何内容，请将其删除。您可以使用其他编辑器并打开选项以显示“不可见字符”。

# php - 为什么我的正则表达式代码会跳过第一个引号？

> ID：11893447
> 
> 赞同：1
> 
> 时间：2012-08-09T23:28:01.773
> 
> 标签：php, regex

我想从 xml 文件中过滤用户名。xml 文件看起来像`<player id="123456" name="somename" alliance="123"/>`. 现在我尝试了以下正则表达式`preg_match("/name=\"(.*)\"/")`：但不知何故，虽然我把`\"`星号放在后面，但似乎我的正则表达式并没有停在第一个`"`，而是停在第三个。这就是我得到的：`somename" alliance="123` 这是什么原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T23:30:26.803

`.*``"`是贪婪的，它会匹配尽可能多的字符，所以它不会在你的字符串的最后一个之前停止。将其更改为`.*?`并且它应该只匹配到下一个`"`，因为它`?`使重复变得懒惰而不是贪婪。

看看这个[正则表达式参考页面](http://www.regular-expressions.info/repeat.html)上的“懒惰而不是贪婪”部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T23:30:57.217

它处于所谓的“贪婪”模式——它会尽可能匹配。

使用`?`来阻止它，如下所示：

```
/name=\"(.*?)\"/ 
```

或者只是阻止它接受引号作为名称的一部分，如下所示：

```
/name=\"([^\"]*)\"/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T23:32:32.817

```
$text ='<player id="123456" name="somename" alliance="123"/>';
if (preg_match("/name=\"([^\"]*)\"/", $text, $match))
{
    $name = $match[1];
} 
```

# c# - String.Split 和 Regex.Split 不起作用？

> ID：11893457
> 
> 赞同：1
> 
> 时间：2012-08-09T23:29:41.743
> 
> 标签：c#, excel-interop

编辑：一个字符串丢失了它的`(`...... 8（抱歉浪费你的时间。

我有以下格式的字符串列表：

```
"Some Text (1234-567890)" 
```

我试图在 周围使用`string.Split`或`Regex.Split`拆分它`(`，然后从第一个元素中拉出前面的文本，并从第二个元素中拉出数字文本。

前任：

```
string myText = "Some Text (1234-567890)";
string[] myValues = myText.Split('(');
string first = myValues[0]; // should hold "Some Text "
string second = myValues[1]; // should hold "1234-567890)" 
```

相反，我得到的是，无论我使用`string.Split`还是`Regex.Split`，我都会得到这个，是一个包含单个值而没有`(`.

前任：

```
string myText = "Some Text (1234-567890)";
string[] myValues = myText.Split('(');
string first = myValues[0]; // has "Some Text 1234-567890)"
string second = myValues[1]; // exception; there is no second value 
```

如果我使用`Regex.Split`. 前任：

```
string[] myValues = Regex.Split(myText, "\\("); 
```

如果我尝试将其放入一个新项目中，它会按我的预期工作。两者之间的唯一区别是我正在填充`List<string>`使用 Excel 互操作。我不明白为什么会有所作为。

我的实际代码如下所示：

```
const int LOCATION_START = 2;
const int LOCATION_END = 39;
List<string> locationStrings = new List<string>();
for (int row = LOCATION_START + 1; row <= LOCATION_END; row++)
   locationStrings.Add(pExcel.ActiveSheet.ReadValue<string>(row));

List<Tuple<string, string>> locations = new List<Tuple<string, string>>();
foreach (string locationString in locationStrings)
{
   string[] values = Regex.Split(locationString, "\\(");
   locations.Add(Tuple.Create(values[0].Trim(), values[1].Substring(0, 11)));
   // ^ this line throws an exception, because there is only one value, not two
} 
```

`Excel.ActiveSheet.ReadValue`使用互操作范围函数从 Excel 工作表中读取值并将其转换为`string`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:52:08.313

您显示的代码按预期工作。获得该结果的唯一方法是字符串不包含任何起始括号，例如 contains`"Some Text 1234-567890)"`和 not `"Some Text (1234-567890)"`。

也有可能你有一些不寻常的字符，在一个环境中看起来像一个起始括号，但在另一个环境中是一个不可打印的字符。

当您从 Exfel 表中获取字符串时，您应该检查它们实际包含的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T23:38:00.723

```
string Source = "Some Text (1234-567890)";
string[] Splitted = Regex.Split(Source, @"\(");
foreach (string Item in Splitted)
Console.WriteLine(Item.Replace(")",""); //Use replace if you want to remove the closing bracket.
//Map the values
string First = Splitted[0];
string Second = Splitted[1].Replace(")",""); 
```

您需要转义左括号。它对正则表达式引擎有特殊的意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T23:47:42.980

此代码应该可以工作：

```
string[] myValues = myText.Split(new string[] { "(" }, StringSplitOptions.None); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T23:49:43.590

数据格式不正确。一行是这样的：

```
"Some Text 1234-567890)" 
```

所以 Split 方法只返回那个字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T23:53:20.677

如果您想这样做，这里是使用您的代码的解决方案，我刚刚添加了一个新行 myValues[1]= myValues[1].Replace(")",""); 这消除了您看到 **原始代码可以消除“（”但“（”和“）”之间存在差异的烦人的“）”字符**

**这是一个更好的例子，传递参数，用“，”**分隔

 **```
string myText = "Some Text (1234-567890)";
string[] myValues = myText.Split('(',')');
string first = myValues[0]; // should hold "Some Text "
string second = myValues[1]; 
```**

# c++ - std::map::erase(iterator) 抛出访问冲突

> ID：11893459
> 
> 赞同：0
> 
> 时间：2012-08-09T23:30:08.000
> 
> 标签：c++, stl, map, access-violation

我拼凑的一些代码有问题。当我尝试通过键或迭代器擦除条目时，我遇到访问冲突（这一行：

```
|| _Ptr != 0 && (*_Pnext)->_Ptr != _Ptr) 
```

在 xtree ）它似乎只发生在我之前处理一些迭代器时（在地图值中的集合上操作）

在 shrinkable_adjacency_list_graph.cpp:81 中引发了异常

如果注释掉第 76 到 79 行，则不会引发此问题。

有人可以告诉我哪里出错了（除了编写完全低效和冗余的代码）？[在这里获取项目。](https://www.dropbox.com/s/e43cnj4iqm79rod/accessViolation.zip)

编辑：忘记上传问题实例：[test.1.col](http://pastebin.com/efRNgGba)

Edit2：稍微精简了一些代码。

# java - 如何从 Eclipse 向 MySQL 输入数据

> ID：11893462
> 
> 赞同：0
> 
> 时间：2012-08-09T23:30:46.543
> 
> 标签：java, mysql, eclipse, insert

我正在尝试通过 Eclipse 将数据输入到 MySQL 数据库中。这是我到目前为止所拥有的：

```
import java.sql.DriverManager;
import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.PreparedStatement;
import com.mysql.jdbc.Statement;

public class MySQL{

public static void main(String[] args)throws Exception{

    Class.forName("com.mysql.jdbc.Driver");

    Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/database","root","root");

    PreparedStatement stmt = con.prepareStatement("INSERT INTO 'database'.'Table'(Account_ID,First_Name,Last_Name) VALUES ('hello12','Ed','Lee')");

    ResultSet result = stmt.executeQuery();}

 } 
```

由于某种原因它不起作用......有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T03:27:21.033

你试过提交吗？

`con.commit();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T04:36:51.587

像这样更改您的代码；

```
 public class MySQL{
          public static void main(String[] args)throws Exception{
              Class.forName("com.mysql.jdbc.Driver");
              try{
                  Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/database","root","root");
                   PreparedStatement stmt = con.prepareStatement("INSERT INTO 'database'.'Table'(Account_ID,First_Name,Last_Name) VALUES (?,?,?)");
                   stmt.setString(1, "hello12");
                   stmt.setString(2, "Ed");
                   stmt.setString(3, "Lee");
                   stmt.executeUpdate();
              } catch (Exception e) {
                   e.printStackTrace();
              } finally {
                   stmt.close();
                   con.close();
              }
          }

     } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T19:44:57.970

正如其他人所建议的，您需要提交您在 sql 语句中所做的更改。以下是它的外观：

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;

public class MySQL{

    public static void main(String[] args) throws Exception {
        Class.forName("com.mysql.jdbc.Driver");
        Connection con = null;
        PreparedStatement stmt = null;
        try {
            con = DriverManager.getConnection("jdbc:mysql://localhost:3306/database", "root", "root");
            stmt = con.prepareStatement("INSERT INTO 'database'.'Table'(Account_ID,First_Name,Last_Name) VALUES (?,?,?)");
            stmt.setString(1, "hello12");
            stmt.setString(2, "Ed");
            stmt.setString(3, "Lee");
            stmt.executeUpdate();
            conn.commit();
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            if (stmt != null) {
                try {
                   stmt.close();
                } catch (SQLException ex) {
                }
            }
            if (con != null) {
                try {
                   con.close();                    
                } catch (SQLException ex) {
                }
            }
        }
    }
} 
```

导入要注意的已更改的内容。

*   您在 try 块之前声明变量，以便在 finally 块中可以访问它们，但在 try 块中初始化它们以防它们引发异常。
*   用语法代替`PreparedStatement`新值`?`而不是硬编码。在实际应用程序中，这些最终会被传入，如果您只是进行字符串连接，您将面临 SQL 注入或其他问题。
*   finally 块用于释放任何资源，无论是否引发异常。假设您创建了连接和准备好的语句，但执行它时会引发错误。finally 块中的代码仍将运行以关闭语句和连接，从而释放这些资源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-04T08:23:05.430

更改以下行

```
PreparedStatement stmt = con.prepareStatement("INSERT INTO 'database'.'Table'(Account_ID,First_Name,Last_Name) VALUES ('hello12','Ed','Lee')"); 
```

至

```
PreparedStatement stmt = con.prepareStatement("INSERT INTO `database`.`Table`(Account_ID,First_Name,Last_Name) VALUES ('hello12','Ed','Lee')"); 
```

用于数据库名称和表名称的单引号将引发语法错误。而是使用 ` 这个符号。

# android - WindowSoftInputMode 和 ScrollView

> ID：11893465
> 
> 赞同：6
> 
> 时间：2012-08-09T23:31:02.747
> 
> 标签：android, android-layout

我的 Android 应用程序的主要活动如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background"
    android:orientation="vertical" >

    <ScrollView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/ScrollView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:fillViewport="true"
        android:orientation="vertical"
        android:paddingLeft="60dp"
        android:paddingTop="53dp" >

        <RelativeLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/RelativeLayout1"
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/billAmountText"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/billAmount_string"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <EditText
                android:id="@+id/billAmount"
                android:layout_width="173dp"
                android:layout_height="wrap_content"
                android:layout_below="@id/billAmountText"
                android:layout_marginTop="3dp"
                android:inputType="numberDecimal" />
        </RelativeLayout>
    </ScrollView>

</RelativeLayout> 
```

为了确保在键盘弹出时背景图像（在第一个 RelativeLayout 中定义）不会被挤压，我`android:windowSoftInputMode="stateVisible|adjustPan`在清单文件中为我的活动设置。现在背景和布局都很好，没有任何东西可以调整大小。

但问题是我的 ScrollView 现在不起作用，因为我想系统认为由于我对清单的上述修改而不需要调整窗口大小 - 所以 ScrollView 没有被激活。当我取出时会发生相反的情况`android:windowSoftInputMode="stateVisible|adjustPan`，滚动有效，但是当键盘弹出时背景会被挤压。

有什么方法可以对其进行编码，这样我的背景就不会被挤压，而且我的 ScrollView 仍然可以工作？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T00:04:13.647

尝试在您的活动中使用`windowSoftInputMode`具有以下值的属性：

`android:windowSoftInputMode="stateAlwaysHidden|adjustResize"`

我不知道是否有必要，但您可以尝试将 to 添加到布局的`ScrollView`标签`fillViewPort`中`true`。所以它应该看起来像我在下面展示给你的东西：

```
<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:fillViewport="true">

        <!-- Other Views -->
</ScrollView> 
```

让我知道你的进展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:28:33.407

在您的滚动视图中放置一个相对布局，子 0 是图像视图，子 1 是您的内容。使用 imageview 作为背景图像 (src) 而不是滚动视图的背景。imageview 将尊重 scaleTypes，而布局的背景则不会。

# sql - SQL如何将DateDiff应用于两个不同的where子句

> ID：11893466
> 
> 赞同：0
> 
> 时间：2012-08-09T23:31:34.677
> 
> 标签：sql, sql-server, function, datetime

这是我当前的查询：

```
select serial_number, order_number,
(select TOP 1 PRODUCT_ID from PS_ORD_LINE PL 
where PL.ORDER_NO = WO.order_number 
and CAT_DESCR = 'SYSTEM' and ORD_LINE_STATUS = 'O' 
ORDER BY ORDER_INT_LINE_NO) as model,
(select datediff(minute, min(complete_time), min(start_time)) 
 from TRACKED_OBJECT_HISTORY TOH1 
 where TOH1.op_name IN ('Assembly', 'Pre-Final') 
 and TOH1.tobj_key = TOH.tobj_key) as waiting_time1,
from UNIT U
left join WORK_ORDER WO on U.order_key = WO.order_key
left join TRACKED_OBJECT_HISTORY TOH on TOH.tobj_key = U.unit_key
where WO.creation_time > '5/1/12' and WO.creation_time < '7/31/12'
group by serial_number, order_number, tobj_key 
```

中间的部分`DateDiff`是我的问题。

所以`Assembly`和`Pre-Final`是扫描单元的两个不同站点的名称。`Assembly`通常排在第一位，紧随其后的是`Pre-Final`。

我要做的是计算一个单元扫描出之后`Assembly`和该单元扫描到`Pre-Final`. `complete_time`当一个单元被扫描出站时标记，`start_time`当它被扫描到时。

现在，我的查询不起作用，因为两者都`start_time`引用`complete_time`，`Assembly`因为它是第一站。但是，我想`complete_time`参考，`Assembly`而我想`start_time`参考`Pre-Final`.

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:40:08.567

也许使用

```
DATEDIFF(MINUTE,
         (SELECT MIN(complete_time)
            FROM TRACKED_OBJECT_HISTORY toh1 
            WHERE toh1.op_name = 'Pre-Final' AND toh1.tobj_key = toh.tobj_key),
         (SELECT MIN(start_time) 
            FROM TRACKED_OBJECT_HISTORY toh2
            WHERE toh2.op_name = 'Assembly' AND toh2.tobj_key = toh.tobj_key)
         ) AS waiting_time1, 
```

等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T23:47:51.700

我不完全了解您的数据库结构，但是如果您应该能够使用子查询为每个项目提取两次。下面是代码的样例，假设 tobj_key 引用一个对象，并且每个对象只通过机器一次。

```
SELECT
   DateDiff(n,AssemblyTime,PrefinalTime)
FROM (
   SELECT 
      tobj_key,
      complete_time AS 'AssemblyTime'
   FROM TRACKED_OBJECT_HISTORY
   WHERE op_name = 'Assembly'
   ) AS sub1
JOIN (
   SELECT 
      tobj_key,
      start_time AS 'PrefinalTime'
   FROM TRACKED_OBJECT_HISTORY
   WHERE op_name = 'Assembly'
   ) AS sub2 ON sub1.tobj_key = sub2.robj_key 
```

# java - Java - 执行带有选项的程序，例如 ls -l

> ID：11893469
> 
> 赞同：1
> 
> 时间：2012-08-09T23:31:49.013
> 
> 标签：java, terminal, command

1.  在 Java 中，如何执行带有选项的 linux 程序，如下所示：

    `ls -a`（选项是-a），

    另一个：`./myscript name=john age=24`

    我知道如何执行命令，但无法执行该选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T23:36:19.137

您需要执行一个外部进程，看看[ProcessBuilder](http://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CEsQFjAA&url=http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html&ei=MkkkUNiDKq-ViQeRyoFg&usg=AFQjCNHSAWl4szO37Qonu5enNH3U4ss__A&sig2=qkqiqDqc46aUKpr31WPxkQ)，因为它几乎回答了您的问题，[使用 ProcessBuilder 进行系统调用](http://javaevangelist.blogspot.com.au/2011/12/java-tip-of-day-using-processbuilder-to.html)

**更新示例**

我直接从列表示例中撕下它并对其进行了修改，以便我可以在我的 PC 上进行测试，它运行良好

```
private static void copy(InputStream in, OutputStream out) throws IOException {
    while (true) {
        int c = in.read();
        if (c == -1) {
            break;
        }
        out.write((char) c);
    }
}

public static void main(String[] args) throws IOException, InterruptedException {

//        if (args.length == 0) {
//            System.out.println("You must supply at least one argument.");
//            return;
//        }

    args = new String[] {"cmd", "/c", "dir", "C:\\"};

    ProcessBuilder processBuilder = new ProcessBuilder(args);
    processBuilder.redirectErrorStream(true);

    Process process = processBuilder.start();
    copy(process.getInputStream(), System.out);
    process.waitFor();
    System.out.println("Exit Status : " + process.exitValue());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T01:01:01.223

Apache Commons 有一个库来处理这类事情。我希望在我手动编写这样的代码之前知道它。后来我找到了。它为命令行程序提供各种格式的选项。

[Apache Commons CLI](http://commons.apache.org/cli/)

# php - PHPExcel 库的奇怪行为

> ID：11893470
> 
> 赞同：0
> 
> 时间：2012-08-09T23:32:02.893
> 
> 标签：php, phpexcel

我遇到了 PHPExcel lib 的奇怪行为（我以前从未使用过它）。我有这样的代码：

```
$inputFileName = 'excel.ods';
echo 'Loading file ',pathinfo($inputFileName,PATHINFO_BASENAME),' using IOFactory to identify the format<br />';
$objPHPExcel = PHPExcel_IOFactory::load($inputFileName);
$sheetData = $objPHPExcel->getActiveSheet()->toArray(null,true,true,true); 
```

我不知道 toArray 方法究竟做了什么，因为我找不到这件事的任何文档。我认为当excel文件有一些空白单元格时会出现问题 - 它们没有被复制，但下一个单元格被写在它们的位置或其他地方。有人可以为我提供运行 toArray 的文档吗？（我认为该参数有问题）。

先感谢您 ：）

PS：这是示例中的代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T06:32:20.287

toArray() 从工作表中的每个单元格中获取数据并将其放入 PHP 数组中

```
/**
 * Create array from worksheet
 *
 * @param    mixed      $nullValue            Value returned in the array entry
 *                                            if a cell doesn't exist
 * @param    boolean    $calculateFormulas    Should formulas be calculated?
 * @param    boolean    $formatData           Should formatting be applied to cell
 *                                            values?
 * @param    boolean    $returnCellRef        False - Return a simple array of
 *                                            rows and columns indexed by number
 *                                            counting from zero
 *                                            True - Return rows and columns
 *                                            indexed by their actual row and
 *                                            column IDs
 * @return array
 */ 
```

> PHPExcel 的文档位于 /Documentation 文件夹中。API 文档位于 /Documentation/API 示例位于 /Tests 和 /Documentation/Examples 文件夹中

当前 1.7.7 版本中存在一个错误，当工作表中有空白单元格时，该错误会导致从 ods 文件中读取的单元格不对齐。此错误已在 github 上的最新代码中修复。

# php - Facebook 请求缺少权限

> ID：11893472
> 
> 赞同：1
> 
> 时间：2012-08-09T23:32:17.963
> 
> 标签：php, facebook, permissions

我已经创建了我的第一个 Facebook 应用程序，我需要获得 publish_stream 权限。我可以通过遍历获得的每个权限并查看它是否存在来轻松检查它，但是如果用户拒绝它，我可以使用 PHP 做什么？

该应用程序作为“画布应用程序”或其他名称嵌入在 facebook 中。我知道如何通过为登录 url 提供新权限来请求外部站点的更多权限，但我不知道我怎么可能在应用程序内做到这一点？

我已经用谷歌搜索和搜索，但我能找到的只是如何获取具有权限的登录 url。我什至尝试过，但什么也没发生，因为我已经登录了。

这是我试过的代码：

```
 $loginUrl = $facebook->getLoginUrl(array(
            'req_perms' => 'publish_stream,user_likes',
            'next' => $_SERVER['PHP_SELF'],
            'cancel_url' => $_SERVER['PHP_SELF'],
        ));

        echo "<a href='" . $loginUrl . "'>login</a>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:26:21.180

> 我知道如何通过为登录 url 提供新权限来请求外部站点的更多权限，但我不知道我怎么可能在应用程序内做到这一点？

基本上是一样的——通过使用适当的范围参数调用 Auth 对话框。

您在示例代码中做错的只是您在应用程序的 iframe 中链接到对话框的 URL - 但 Auth 对话框不允许在 iframe 中显示。添加`target="_top"`到链接，然后验证对话框将实际显示。（您还必须将`redirect_uri`参数设置为您在 Facebook 上的应用程序的地址，例如`https://apps.facebook.com/YOUR_APP_NAMESPACE`。）

当然，您也可以使用`FB.login`JS SDK 之外的替代方式——这会将 Auth 对话框显示为弹出窗口。

# macos - 不在“Best for Retina”中运行时如何在 rMBP 上显示 1:1

> ID：11893476
> 
> 赞同：3
> 
> 时间：2012-08-09T23:32:45.060
> 
> 标签：macos, retina-display

假设我有一个 rMBP，以及一个 1000x1000 像素的图像。

如果我在“最适合 Retina”模式下运行 MBP 时以 1:1 的比例在屏幕上显示图像，它将在实际的视网膜显示像素上以 1:1 的比例显示（即它将占用与 500x500 图像相同的屏幕空间在 1440x900 屏幕上）。

但是，如果我随后切换到“缩放”分辨率模式之一，例如 1680x1050，系统将不再以 1:1 显示图像，而是将其缩小（它与 1680x1050 屏幕上的 500x500 图像占用相同的屏幕空间）。

无论使用的系统分辨率如何，我都想要一种让图像继续在视网膜显示器上以 1:1 显示的方法。我意识到我可以计算出适当的“缩放”尺寸，并放大图像，以便在缩小图像时对应于 1:1 映射，但这会导致质量明显下降。

在“缩放”分辨率下运行 MBP 时，Apple 是否没有提供任何直接控制屏幕像素的方法（绕过仅部分屏幕的缩放）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T06:16:57.037

不会。显示缩放发生在 GPU 内的一个非常低的级别，会影响整个显示；对于屏幕的一部分，无法绕过它。

这样看：如果您将普通笔记本电脑的显示器分辨率设置为 800x600，则无法以 LCD 的原始分辨率显示图像，也无法在显示器两侧的黑色邮筒内渲染内容。显示器。出于所有意图和目的，LCD在设置为该分辨率时**为800x600；**暂时忘记了它实际上是（比如说）1440x900 显示器的事实。

同样的原理也适用于 MacBook Pro Retina 显示屏。缩放的性质稍微复杂一些，但是在应用缩放时仍然会忘记显示的“原始”分辨率，并且没有办法直接对其进行渲染。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-29T08:00:53.903

以下是直接寻址像素的 API：

[https://developer.apple.com/library/mac/documentation/GraphicsAnimation/Conceptual/HighResolutionOSX/CapturingScreenContents/CapturingScreenContents.html#//apple_ref/doc/uid/TP40012302-CH10-SW1](https://developer.apple.com/library/mac/documentation/GraphicsAnimation/Conceptual/HighResolutionOSX/CapturingScreenContents/CapturingScreenContents.html#//apple_ref/doc/uid/TP40012302-CH10-SW1)

# php - 嵌套条件与意外结果返回

> ID：11893477
> 
> 赞同：4
> 
> 时间：2012-08-09T23:32:51.553
> 
> 标签：php, coding-style, conditional

考虑以下两种编码风格：

**嵌套条件：**

```
if(is_numeric($user_id)) {

    // .. do stuff
    if(is_valid_user($user_id)) {
        return foo($user_id);
    } else {
        return FALSE;
    }

} else {
    return FALSE;
} 
```

与只是在出现问题时停止：

```
if(!is_numeric($user_id)) {
    return FALSE;
}    

// .. do stuff

if(!is_valid_user($user_id)) {
    return FALSE;
}

return foo($user_id); 
```

这当然至少部分是关于味道的。但是**这两种不同的风格叫什么？**

**什么时候优先于另一个？**

**还有其他的，或许更简洁的编码风格？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:42:20.753

`return`与您的问题相关的另一种编码风格是每个方法/函数只有一个语句。

学校经常教授这个原则。我认为 Martin Fowler 最初是基于一些在线搜索的支持者。

主要原因可能与 PHP 无关，但例如在 C 中，如果您在需要清理的函数中动态分配了内存，那么到处都有返回会导致重复代码、内存泄漏或不得不使用`goto`获取释放内存的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T23:37:45.263

您可以`else`完全省略 s。

```
if (is_numeric($user_id)) {

    // do stuff

    if (is_valid_user($user_id))    
        return foo($user_id);
}

return false; 
```

更简洁，更少的代码，仍然易于阅读/理解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T23:55:34.247

我通常认为嵌套越少越容易阅读。出于这个原因，我更喜欢第二种风格。当然，你使用什么风格并不重要，我什至会稍微改变你的第二个例子，让我更容易阅读。

```
if(!is_numeric($user_id)) return FALSE;

// .. do stuff

if(!is_valid_user($user_id)) return FALSE;

return foo($user_id); 
```

对我来说，右侧的返回语句使它们脱颖而出。此外，将整个内容放在一行中有助于我将语句描绘成门，并轻松地将代码拆分为多个部分……但这只是我。

# html - 将 Favicon 添加到网站

> ID：11893478
> 
> 赞同：104
> 
> 时间：2012-08-09T23:32:56.580
> 
> 标签：html, favicon

> **可能重复：**
> [HTML 标题图像](https://stackoverflow.com/questions/3103490/html-title-image)

有人可以告诉我如何使图标出现在 PHP 的浏览器选项卡上吗？

当我的网站被访问时，我希望我的图标出现在选项卡上。

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2012-08-09T23:37:11.393

1.  这不是在 PHP 中完成的。`<head>`它是 HTML 页面中标签的一部分。
2.  该图标称为网站图标。根据维基百科：

    > favicon（收藏夹图标的缩写），也称为快捷方式图标、网站图标、URL 图标或书签图标，是与特定网站或网页相关联的 16×16 或 32×32 像素方形图标。

3.  添加它很容易。只需添加一个`.ico`16x16 像素或 32x32 像素的图像文件。然后，在网页中，添加`<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">`到`<head>`元素。
4.  [您可以在此处](http://www.favicon.cc/)轻松生成网站图标。

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2012-08-09T23:34:47.377

`favicon.ico`只需在 webroot 中放置一个名为的文件。

如果您想了解更多，请开始阅读：

*   [维基百科上的图标](http://en.wikipedia.org/wiki/Favicon)
*   [网站图标生成器](http://www.favicon.cc/)
*   [如何通过 W3C 添加 Favicon](http://www.w3.org/2005/10/howto-favicon)（不过从 2005 年开始）

# java - 一个迭代器，它改变并返回相同的对象。不好的做法？

> ID：11893479
> 
> 赞同：9
> 
> 时间：2012-08-09T23:32:59.633
> 
> 标签：java, iterator, guava

我正在编写 GC 友好代码来读取并向用户返回一系列`byte[]`消息。在内部，我重复使用相同的实例[`ByteBuffer`](http://docs.oracle.com/javase/6/docs/api/java/nio/ByteBuffer.html)，这意味着我将在*大多数时间*`byte[]`重复返回相同的实例。

 *我正在考虑编写警示性 javadoc 并将其作为[`Iterator<byte[]>`](http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html). AFAIK 它不会违反`Iterator`合同，但如果他们这样做并在每个位置[`Lists.newArrayList(myIterator)`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Lists.html#newArrayList%28java.util.Iterator%29)返回一个`List`相同的填充物，用户肯定会感到惊讶！`byte[]`

问题：对于一个**可能发生变异并返回相同对象**来实现接口的类，这是**不好的做法吗？****`Iterator`**

 ***   如果是这样，最好的选择是什么？“不要改变/重用你的对象”是一个简单的答案。但它没有解决重用非常可取的情况。

*   如果不是，你如何证明违反[最小惊讶原则是](http://en.wikipedia.org/wiki/Principle_of_least_astonishment)正当的？

两个小提示：

*   我正在使用番石榴[`AbstractIterator`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/AbstractIterator.html)，所以 remove() 并不是真正值得关注的。

*   在我的用例中，用户是*我*，并且此类的可见性将受到限制，但我已尝试将这个问题普遍地提出来，以便更广泛地应用。

**更新：**我接受 Louis 的回答，因为它的投票数是 Keith 的 3 倍，但请注意，在我的用例中，我打算采用我在 Keith 对生产的回答的评论中留下的代码。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T23:39:53.650

`EnumMap`在它的`entrySet()`迭代器中基本上就是这样做的，这导致了今天令人困惑、疯狂、令人沮丧的错误。

如果我是你，我不会使用`Iterator`-- 我会编写一个不同的 API（甚至可能与 Iterator 完全不同）并实现它。例如，您可以编写一个新的 API，将消息写入其中，这样 API 的用户就可以控制缓冲区是否被重用*。*`ByteBuffer`这看起来相当直观（用户可以编写明显且干净地重用`ByteBuffer`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-09T23:47:32.180

我会定义一个可以使您无效的中间对象。所以你的函数会返回一个`Iterator<ByteArray>`, 并且`ByteArray`是这样的：

```
class ByteArray {
    private byte[] data;
    ByteArray(byte[] d) { data = d; }
    byte[] getData() {
        if (data == null) throw new BadUseOfIteratorException();
        return data;
    }
    void invalidate() { data = null; }
} 
```

然后您的迭代器可以使先前返回的内容无效，`ByteArray`以便将来的任何访问（通过`getData`或您提供的任何其他访问器）都将失败。那么至少如果有人做了类似的事情`Lists.newArrayList(myIterator)`，他们至少会得到一个错误（当`ByteArray`访问第一个无效时），而不是默默地返回错误的数据。

当然，这不会涵盖所有可能的不良用途，但可能是常见的用途。`byte[]`如果您对从不返回原始数据并提供类似的访问器感到满意`byte get(int idx)`，那么它应该可以捕获所有情况。

您必须`ByteArray`为每个迭代器返回分配一个新的，但希望这比`byte[]`为每个迭代器返回复制您的成本要低得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T03:12:29.980

就像 Keith Randall 我也会创建`Iterator<ByteArray>`，但工作方式完全不同（下面的注释来自[lombok](http://projectlombok.org)）：

```
@RequiredArgsConstructor
public class ByteArray {
    @Getter private final byte[] data;
    private final ByteArrayIterable source;
    void allowReuse() {
        source.allowReuse();
    }
}

public class ByteArrayIterable implements Iterable<ByteArray> {
    private boolean allowReuse;
    public allowReuse() {
        allowReuse = true;
    }
    public Iterator<ByteArray> iterator() {
        return new AbstractIterator<ByteArray>() {
            private ByteArray nextElement;
            public ByteArray computeNext() {
                if (noMoreElements()) return endOfData();
                if (!allowReuse) nextElement =
                    new ByteArray(new byte[length], ByteArrayIterable.this);
                allowReuse = false;
                fillWithNewData(lastElement.getData());
            }
        }
    }
} 
```

现在在调用中`Lists.newArrayList(myIterator)`总是分配一个新的字节数组，所以一切正常。在你的循环中

```
for (ByteArray a : myByteArrayIterable) {
    a.allowReuse();
    process(a.getData());
} 
```

缓冲区被重用。除非您`allowReuse()`误拨电话，否则不会造成任何伤害。如果您忘记调用它，那么您的性能会更差，但行为正确。

* * *

现在我看到它可以在没有`ByteArray`的情况下工作，重要的是`myByteArrayIterable.allowReuse()`被调用，这可以直接完成。***

# python - 无法使用 python subprocess.call rm -r 目录

> ID：11893480
> 
> 赞同：1
> 
> 时间：2012-08-09T23:33:12.043
> 
> 标签：python, shell, exception, subprocess, rm

Welp，我需要从 python 中删除一些巨大的临时目录，我似乎无法使用 rm -r。我正在考虑一个大数据集（在 s3 上）我没有磁盘空间来放置它们。

我从 python 调用命令的常用方法是

```
import subprocess
subprocess.call('rm','-r','/home/nathan/emptytest') 
```

这给了我

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/subprocess.py", line 493, in call
    return Popen(*popenargs, **kwargs).wait()
  File "/usr/lib/python2.7/subprocess.py", line 629, in __init__
    raise TypeError("bufsize must be an integer")
TypeError: bufsize must be an integer 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-09T23:37:20.960

你这样称呼它是错误的。第一个参数应该是一个列表：

```
import subprocess
subprocess.call(['rm','-r','/home/nathan/emptytest']) 
```

您可能还只想尝试使用[shutitl.rmtree](http://docs.python.org/library/shutil.html#shutil.rmtree)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T23:39:22.327

根据文件，

```
 >> In [3]: subprocess.call?
  Type:           function
  Base Class:     <type 'function'>
  String Form:    <function call at 0x01AE79F0>
  Namespace:      Interactive
  File:           c:\python26\lib\subprocess.py
  Definition:     subprocess.call(*popenargs, **kwargs)
  Docstring:
      Run command with arguments.  Wait for command to complete, then
  return the returncode attribute.
  The arguments are the same as for the Popen constructor.  Example:
  retcode = call(["ls", "-l"]) 
```

所以试试：

```
subprocess.call(['rm','-r','/home/nathan/emptytest']) 
```

# sql-server - 更新查询仅在条目存在时更新 Holliday 条目

> ID：11893483
> 
> 赞同：0
> 
> 时间：2012-08-09T23:34:18.720
> 
> 标签：sql-server

当用户没有在 Holliday 输入 H 代码时，我正在尝试编写更新查询以填充时间表表中的错误字段

查询需要从时间表中查看价值一周的数据，如果没有找到假日条目，或者找到条目但没有 H 代码。假日日的多个条目是可以的，只要其中 1 个有一个 H 代码。如果没有找到 H 代码，我需要在时间详细信息的错误列中为该周的每个时间详细信息条目添加 Y

周和帐户将是参数

```
Table  Time Sheet Fields account hours code date error
Table Hollidays Fields date 
```

这是我需要做的一个例子

样本数据

```
date,code,account,error
8/1/2012    R    12345 null
8/5/2012    R    12345 null
8/9/2012    H    12345 null 
```

这些记录中的所有 3 个错误字段都变为否

样本数据

```
date,code,account,error
8/1/2012    R    12345 null
8/5/2012    R    12345 null
8/9/2012    R    12345 null 
```

所有这 3 个记录错误字段都变为是

样本数据

```
date,code,account,error
8/1/2012    R    12345 null
8/5/2012    R    12345 null
8/9/2012    H    12345 null
8/9/2012    R    12345 null 
```

这些记录中的所有 3 个错误字段都变为否

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T00:01:08.767

我认为这可能是你想要的：

```
UPDATE ts
set error = 'Y'
FROM timesheet ts
left join holiday h
  on ts.tsdate between DateAdd(Day, -7, h.hdate) 
    and dateadd(d, datediff(d, 0, h.hdate), 0)
WHERE ts.tsdate > DateAdd(Day, -7, getdate())
  AND ts.tsdate <= dateadd(d, datediff(d, 0, getdate()), 0)
  and h.hdate is not null 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/f94b2/4)

编辑，根据您的评论，我认为您想要这个：

```
UPDATE ts
set error = CASE when h.hdate Is not null then 'H' ELSE 'R' END
FROM timesheet ts
left join holiday h
  on ts.tsdate between DATEADD(dd, -(DATEPART(dw, h.hdate)-1), h.hdate)
    and DATEADD(dd, 7-(DATEPART(dw, h.hdate)), h.hdate)
WHERE ts.tsdate > DATEADD(dd, -(DATEPART(dw, getdate())-1), getdate())
  AND ts.tsdate <= DATEADD(dd, 7-(DATEPART(dw, getdate())), getdate()) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/f94b2/13)

第二个版本获取一周的开始/结束（示例是周日至周六），并验证这些日期是否有假期，然后时间表日期是否也在同一周。如果假日日不为空，则记录将被更新，`'H'`否则该周的记录将获得`'R'`.

# java - Java - 如何获取文件夹中的所有文件名

> ID：11893486
> 
> 赞同：0
> 
> 时间：2012-08-09T23:34:26.547
> 
> 标签：java, file

我不是一个真正优秀的 Java 程序员，我需要知道如何打印出单个文件夹中的所有文件。请看下面的代码：

```
for(int i=0;i<folder.number_of_files;i++){
System.out.println(filename[i]);
} 
```

谢谢你的时间

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T23:36:23.993

最简单的方法是使用[`File#listFiles`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#listFiles%28%29). 如果您使用的是 Java 7，请参阅[此处](http://docs.oracle.com/javase/tutorial/essential/io/fileio.html)以了解对文件 I/O 库的更改。例如，

```
File folder = ...;
for(File f : folder.listFiles())
{
    System.out.println(f.getName());
} 
```

请注意，这不会获取目录中任何子文件夹的内容`folder`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T23:38:08.920

```
 File file = new File("C:\\");  
 File[] files = file.listFiles();  
 for (File f:files)  
 {  
     System.out.println(f.getAbsolutePath());  
 } 
```

`listFiles()`有更多选择。[在此处](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#listFiles%28%29)查看文档

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-09T23:43:04.663

如果您还想检查以下示例的子文件夹，请运行递归并检查 Desktop 及其子文件夹下的所有文件并写入列表。

```
private static String lvl = "";
    static BufferedWriter bw;
    private static File source = new File("C:\\Users\\"+System.getProperty("user.name")+"\\Desktop\\New folder\\myTest.txt");

    public static void main(String[] args) throws IOException {

        bw = new BufferedWriter(new FileWriter(source));

        checkFiles(new File("C:\\Users\\"+System.getProperty("user.name")+"\\Desktop"), 0);

        bw.flush();
        bw.close();
        lvl = null;

    }
    static void checkFiles(File file, int level) throws IOException{

        if(!file.exists()){

            return;
        }

        for(String s:file.list()){

            if(new File(file.getPath() + "\\" +  s).isDirectory()){

                bw.newLine();
                bw.write(lvl + "Directory: " + s);

                lvl += " ";

                checkFiles(new File(file.getPath() + "\\" +  s), level+1);

            }else{

                bw.newLine();
                bw.write(lvl + "File: " + s);

            }
        }
    }
} 
```

# javascript - 什么 WYSIWYG 编辑器适用于 Velocity 模板？

> ID：11893488
> 
> 赞同：3
> 
> 时间：2012-08-09T23:34:54.700
> 
> 标签：javascript, ckeditor, nvelocity

我一直在使用（优秀的）CKeditor 一段时间，但是当我开始将它与 NVelocity 结合使用时，我开始遇到麻烦。事实证明，如果我使用这样的上下文关键字（比如 $GarbagePailKids，其中包括表格行的 HTML）：

```
<table>
  <tbody>$GarbagePailKids</tbody>
</table> 
```

CKEditor 的 WYSIWYG 模式将无效的 HTML 更正为：

```
$GarbagePailKids
<table>
  <tbody></tbody>
</table> 
```

现在我一直在阅读的所有内容都表明您不会（或不能）关闭 CKeditor 更正无效 HTML 的能力，我不想切换回只是一个文本区域（在使用这个编辑器这么长时间破坏了我的用户之后）。关于 CKEditor 之类的东西可以工作，甚至是 CKEditor 的插件可以防止这种行为的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T23:37:28.133

我不确定 CKEditor 是否允许您想要的行为。我建议调查猛禽编辑器 - [http://www.raptor-editor.com/](http://www.raptor-editor.com/)

我已经整理了一个示例，说明如何使用选项实例化 Raptor，以确保编辑器不会尝试修复无效的 HTML - [JSFiddle](http://jsfiddle.net/faceleg/2BR6x/2/)。

Raptor 实例化是：

```
<textarea id="raptor">
    <table>
      <tbody>$GarbagePailKids</tbody>
    </table>
</textarea>
​
<script type="text/javascript">
    $('#raptor').editor({
        // Enable editor immediately
        autoEnable: true,
        // Replace the element with the editor
        replace: true,
        // Disable the cancel, save & dock buttons
        disabledUi: ['cancel', 'save', 'dock'],
        // Disable the unsaved edits warning, and the clean & empty element plugins, both of which will attempt to fix broken HTML
        disabledPlugins: ['unsavedEditWarning', 'clean', 'emptyElement'],
        // Disable the "you have unsaved edits on this page" warning triggered when one attempts to leave the page after editing
        unloadWarning: false,
        // Plugin specific options
        plugins: {
            // Docking options forcing the editor to be always docked to the textarea
            dock: {
                docked: true,
                dockToElement: true,
                persistent: false
            }                
        }                
    }); 
</script> 
```

无论如何，浏览器通常会尝试纠正无效的 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T22:50:36.507

在经历了许多所见即所得的实现之后，我得出了一个不幸的结论，即我试图做的事情无法用富文本编辑器完成，但是从 StackOverflow 中获得灵感，我可以渲染文本区域的内容（无效的 HTML 和所有内容） ) 在 iframe 中感谢[这个答案](https://stackoverflow.com/a/8240158/16959)的帮助，我创建了这个：

```
<h1>Input</h1>
<textarea id='Template' style="width: 98%;">
    <p>Hello World !!</p>
</textarea>
<h1>Output</h1>
<iframe id="TemplateView" style="width: 98%;"></iframe> 
<script>
$(function() {
    var template = $('#Template'),
        view = $('#TemplateView'),
        update = function() {
            view.contents().find('html').html(template.val());
        };

    $(template ).on('keyup change', update);
    update();
});
</script> 
```

你可以[在这里](http://jsfiddle.net/Y9beh/13/)看到。

现在这并**不能解决**以某种“正确方式”看到无效 HTML 的问题，但是它让我可以保留所见即所得编辑器的预览方面，而无需尝试更正内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-30T19:51:29.067

尝试这个：

```
#set( $openComment = "<!--" )
#set( $closeComment = "-->" )
<table>
  <tbody>
      <!-- begin of rows $closeComment $GarbagePailKids $openComment end of rows -->
  </tbody>
</table> 
```

如果 $GarbagePailKids 是这样的：

```
<tr>
  <td>A</td>
</tr>
<tr>
  <td>B</td>
</tr> 
```

结果是：

```
<table>
  <tbody>
    <!-- begin of rows -->
    <tr>
      <td>A</td>
    </tr>
    <tr>
      <td>B</td>
    </tr>
    <!-- end of rows -->
  </tbody>
</table> 
```

# c# - 将 JSON 转换为 C# 对象格式的在线工具

> ID：11893490
> 
> 赞同：8
> 
> 时间：2012-08-09T23:35:29.840
> 
> 标签：c#, json, object, serialization

我正在寻找一种快速简单的方法来将文本文件中的大型 JSON 对象转换为公司项目的 C# 对象表示法。我更喜欢一个在线解决方案（类似于 jsbeautifier.org），它可以获取我的代码、解析它并返回一个 C# 格式的对象。

是否有任何工具（最好是在线的）可以做到这一点？我希望不要手动执行此操作，但编写脚本可能需要我现在没有的时间。（我不太精通 C# 库调用。）

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T23:39:55.800

我认为以下链接会有所帮助。

[从 json 生成 c# 类](http://json2csharp.com/)

实际上，它使用了 achitaka-san 在他的帖子中所说的相同项目。您可以在任何主机上创建一个简单的 WebService 并使用它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-09T23:47:33.260

此应用程序从示例 JSON 文本生成 C# 类，因此您可以使用 JSON 进行强类型编程。

[http://jsonclassgenerator.codeplex.com](http://jsonclassgenerator.codeplex.com)

这不是在线的，但您只需下载一个 EXE，粘贴您的 JSON 并获取 ac# 类 - 就是这样。

![在此处输入图像描述](../Images/cefd7956c13dbef8c0293817a45338d7.png)

# r - 提取R中的系数G值

> ID：11893492
> 
> 赞同：-3
> 
> 时间：2012-08-09T23:36:06.693
> 
> 标签：r

```
results <- 

Call:
lm(formula = log(Y) ~ G)

Coefficients:

(Intercept)            G  
     1.6122       0.5647  

$`3388.415_6`

Call:
lm(formula = log(Y) ~ G)

Coefficients:

(Intercept)            G  
      1.994       -2.178 
```

如何在 R 中从中获取 G 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:42:18.457

我不确定我是否正确编辑了您的问题，因为代码对我来说没有意义，但也许这有点像期望的答案：

```
G <- 1:10
Gmod <- lm( rnorm(10) ~ G) ; Gmod
coef(Gmod)["G"] 
```

如果您在列表结构中有很多模型对象，那么也许这会起作用：

```
> lapply( list(Gmod, Gmod), function(mdo) coef(mdo)["G"] )
[[1]]
         G 
0.04917535 

[[2]]
         G 
0.04917535 
```

（确实让我担心您将浮点数作为列表索引。这表明在前面的步骤中可能出现了问题。）

# html - 水平居中绝对定位的 Div

> ID：11893493
> 
> 赞同：1
> 
> 时间：2012-08-09T23:36:07.157
> 
> 标签：html, css, layout

截至目前，我可以将图像水平居中，但是一旦我尝试将其垂直居中（添加上边距），父 div 也会向下移动（这是我不想要的）。

这是我正在谈论的图像：[屏幕截图](http://img232.imageshack.us/img232/7972/7848d985df004d32941ca07.png)

我认为最好的选择是将其设置为绝对位置，但是我在水平居中时遇到了问题。

```
<div id="header">
    <div id="container">
        <div id="logo">
            <a href="index.html"><img src="images/logo.png" /></a>
        </div>
    </div>
</div> 
```

```
#container {
    width: 960px;
    margin: 0 auto;
    position: relative;
}

#logo {
    height: 96px;
    width: 484px;
    margin: 50px auto;
} 
```

帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T23:48:52.077

你可以装`overflow: hidden`上`#container`。它将引入一个新的块格式化上下文，因此边距不再折叠。

*   [jsFiddle 演示](http://jsfiddle.net/vRaFR/)
*   [溢出的魔力：隐藏](http://colinaarts.com/articles/the-magic-of-overflow-hidden/)
*   [溢出：隐藏会影响布局吗？](https://stackoverflow.com/questions/6128139/can-overflowhidden-affect-layout/6128264#6128264)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T23:58:17.483

据我所见，容器并没有降低（也不应该），只是徽标（由于边距）降低了。

你想在哪里将图像居中，在标题上？给标题一个固定的高度，并使用边距或填充使图像居中。如果标题的高度需要流动，那么您可以使用

```
#container {
    width: 960px;
    margin: 0 auto;
    position: relative;
    vertical-align: middle; 
    display: table-cell
} 
```

希望有帮助！

R

# scala - Play 2.0 嵌套表单：生成代替

> ID：11893497
> 
> 赞同：1
> 
> 时间：2012-08-09T23:36:22.580
> 
> 标签：scala, playframework-2.0, nested-forms, strip

[将此发布](https://groups.google.com/forum/?fromgroups#!topic/play-framework/fX0U_ftgW4k)到 Play 用户组；我解释了唯一的观点，所以希望得到一个观点，或者甚至是一个答案；-)

嵌套表单很棒，但是有一个小故障将样板添加到 javascript 或 scala 模板中。

例如，给定：

```
@inputText(field = _form("user.email"),
    '_label-> "Email Address*",
    'class-> "required email",
    'placeholder-> "jdoe@gmail.com"
) 
```

生成的输入字段类似于：

```
<input id="user_email" name="user.email" ...> 
```

现在，当您想在客户端验证电子邮件地址时，您必须引用 DOM id：`$('#user_email')`

哪里`$('#email')`会更自然。

我知道我可以在模板中手动设置 id 属性，但默认情况下，我更愿意从 id 属性中删除嵌套名称（在这种情况下为用户）。

查看 github [views helper directory](https://github.com/playframework/Play20/tree/master/framework/src/play/src/main/scala/views/helper)，我没有找到可以访问生成的 id 的位置（即我需要重载哪个文件以及如何重载）。

任何人都知道如何解决这个问题和/或有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T00:28:36.440

这是自动生成字段 ID 的位置：

[https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/play/api/data/Form.scala#L274](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/play/api/data/Form.scala#L274)

实际上没有任何方法可以覆盖该行为，但您可以编写自己的`@inputText`帮助程序，在生成 HTML 时从 ID 中删除“user_”部分。

基本上复制粘贴[默认助手](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/views/helper/inputText.scala.html)并替换

```
<input type="text" id="@id" ... 
```

使用您自己的代码，例如

```
<input type="text" id="@processFieldId(id)" ... 
```

或（未经测试！）：

```
<input type="text" id="@(id.split('_').last)" ... 
```

然后只需在模板中导入您的自定义助手，并像使用`@inputText`.

# c++ - 尝试扩展 ctype facet 时出现未定义的引用错误

> ID：11893499
> 
> 赞同：0
> 
> 时间：2012-08-09T23:36:28.640
> 
> 标签：c++, locale, facet, ctype

我正在尝试通过扩展 ctype<uint32_t> 创建自定义 ctype facet，但不断收到未定义的引用错误。

这是重现错误的最小测试程序：

```
#include <locale>

using namespace std;

class my_ctype : public ctype<uint32_t> {
public:
    explicit my_ctype(size_t __refs = 0);

protected:
    virtual ~my_ctype();

protected:
    virtual bool do_is(mask __m, char_type __c) const;
    virtual const char_type* do_is(const char_type* __lo, const char_type* __hi, mask* __vec) const;
    virtual const char_type* do_scan_is(mask __m, const char_type* __lo, const char_type* __hi) const;
    virtual const char_type* do_scan_not(mask __m, const char_type* __lo, const char_type* __hi) const;
    virtual char_type do_toupper(char_type __c) const;
    virtual const char_type* do_toupper(char_type* __lo, const char_type* __hi) const;
    virtual char_type do_tolower(char_type __c) const;
    virtual const char_type* do_tolower(char_type* __lo, const char_type* __hi) const;
    virtual char_type do_widen(char __c) const;
    virtual const char* do_widen(const char* __lo, const char* __hi, char_type* __dest) const;
    virtual char do_narrow(char_type __c, char __dfault) const;
    virtual const char_type* do_narrow(const char_type* __lo, const char_type* __hi, char __dfault, char* __to) const;
};

my_ctype::my_ctype(size_t __refs) : ctype<uint32_t>(__refs) {}

my_ctype::~my_ctype() {}

bool my_ctype::do_is(mask __m, char_type __c) const { return false; }
const my_ctype::char_type* my_ctype::do_is(const char_type* __lo, const char_type* __hi, mask* __vec) const { return __hi; }
const my_ctype::char_type* my_ctype::do_scan_is(mask __m, const char_type* __lo, const char_type* __hi) const { return __hi; }
const my_ctype::char_type* my_ctype::do_scan_not(mask __m, const char_type* __lo, const char_type* __hi) const { return __hi; }
my_ctype::char_type my_ctype::do_toupper(char_type __c) const { return __c; }
const my_ctype::char_type* my_ctype::do_toupper(char_type* __lo, const char_type* __hi) const { return __hi; }
my_ctype::char_type my_ctype::do_tolower(char_type __c) const { return __c; }
const my_ctype::char_type* my_ctype::do_tolower(char_type* __lo, const char_type* __hi) const { return __hi; }
my_ctype::char_type my_ctype::do_widen(char __c) const { return __c; }
const char* my_ctype::do_widen(const char* __lo, const char* __hi, char_type* __dest) const { return __hi; }
char my_ctype::do_narrow(char_type __c, char __dfault) const { return __dfault; }
const my_ctype::char_type* my_ctype::do_narrow(const char_type* __lo, const char_type* __hi, char __dfault, char* __to) const { return __hi; }

int main () {
    my_ctype* c = new my_ctype();

    return 0;
} 
```

这是我得到的错误：

```
Linking console executable: bin\Debug\ctype.exe
obj\Debug\main.o: In function `_ZN8my_ctypeD2Ev':
D:/[...]/ctype/main.cpp:29: undefined reference to `std::ctype<unsigned int>::~ctype()'
obj\Debug\main.o:main.cpp:(.rdata$_ZTVSt5ctypeIjE[vtable for std::ctype<unsigned int>]+0x8): undefined reference to `std::ctype<unsigned int>::~ctype()'
obj\Debug\main.o:main.cpp:(.rdata$_ZTVSt5ctypeIjE[vtable for std::ctype<unsigned int>]+0xc): undefined reference to `std::ctype<unsigned int>::~ctype()'
obj\Debug\main.o:main.cpp:(.rdata$_ZTVSt5ctypeIjE[vtable for std::ctype<unsigned int>]+0x10): undefined reference to `std::ctype<unsigned int>::do_is(unsigned short, unsigned int) const'
obj\Debug\main.o:main.cpp:(.rdata$_ZTVSt5ctypeIjE[vtable for std::ctype<unsigned int>]+0x14): undefined reference to `std::ctype<unsigned int>::do_is(unsigned int const*, unsigned int const*, unsigned short*) const'
obj\Debug\main.o:main.cpp:(.rdata$_ZTVSt5ctypeIjE[vtable for std::ctype<unsigned int>]+0x18): undefined reference to `std::ctype<unsigned int>::do_scan_is(unsigned short, unsigned int const*, unsigned int const*) const'
obj\Debug\main.o:main.cpp:(.rdata$_ZTVSt5ctypeIjE[vtable for std::ctype<unsigned int>]+0x1c): undefined reference to `std::ctype<unsigned int>::do_scan_not(unsigned short, unsigned int const*, unsigned int const*) const'
obj\Debug\main.o:main.cpp:(.rdata$_ZTVSt5ctypeIjE[vtable for std::ctype<unsigned int>]+0x20): undefined reference to `std::ctype<unsigned int>::do_toupper(unsigned int) const'
obj\Debug\main.o:main.cpp:(.rdata$_ZTVSt5ctypeIjE[vtable for std::ctype<unsigned int>]+0x24): undefined reference to `std::ctype<unsigned int>::do_toupper(unsigned int*, unsigned int const*) const'
obj\Debug\main.o:main.cpp:(.rdata$_ZTVSt5ctypeIjE[vtable for std::ctype<unsigned int>]+0x28): undefined reference to `std::ctype<unsigned int>::do_tolower(unsigned int) const'
obj\Debug\main.o:main.cpp:(.rdata$_ZTVSt5ctypeIjE[vtable for std::ctype<unsigned int>]+0x2c): undefined reference to `std::ctype<unsigned int>::do_tolower(unsigned int*, unsigned int const*) const'
obj\Debug\main.o:main.cpp:(.rdata$_ZTVSt5ctypeIjE[vtable for std::ctype<unsigned int>]+0x30): undefined reference to `std::ctype<unsigned int>::do_widen(char) const'
obj\Debug\main.o:main.cpp:(.rdata$_ZTVSt5ctypeIjE[vtable for std::ctype<unsigned int>]+0x34): undefined reference to `std::ctype<unsigned int>::do_widen(char const*, char const*, unsigned int*) const'
obj\Debug\main.o:main.cpp:(.rdata$_ZTVSt5ctypeIjE[vtable for std::ctype<unsigned int>]+0x38): undefined reference to `std::ctype<unsigned int>::do_narrow(unsigned int, char) const'
obj\Debug\main.o:main.cpp:(.rdata$_ZTVSt5ctypeIjE[vtable for std::ctype<unsigned int>]+0x3c): undefined reference to `std::ctype<unsigned int>::do_narrow(unsigned int const*, unsigned int const*, char, char*) const'
collect2.exe: error: ld returned 1 exit status
Process terminated with status 1 (0 minutes, 1 seconds)
15 errors, 1 warnings 
```

我查看了 locale_facets.h，发现有 ctype<char> 和 ctype<wchar_t> 的模板特化，恐怕我可能还必须为 uint32_t 创建一个特化，但我就是看不到为什么。

所以这是我的问题：

1 - 为什么我会收到这些错误消息？

2 - 我该如何解决？

3 - 如果我必须为 uint32_t 专门化 ctype<>，为什么会这样？

我正在通过 CodeBlocks 在 Windows 上使用 mingw 编译我的程序。测试程序只有main.cpp，没有其他文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T00:02:20.123

1.  因为 uint32_t 没有专门化
2.  写专业
3.  必须实现基类

考虑下面的代码

`class A {
public:
virtual void func(); // no implementation here virtual ~A();
};` `class B : public A
{
public:
virtual void func() {}
};`

无法创建 B 的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T02:02:14.380

我的问题是没有构造函数，希望对某人有所帮助！

# php - 使用 PHP 代码和 HTML 表单将 excel (.csv) 导入 MySQL

> ID：11893501
> 
> 赞同：3
> 
> 时间：2012-08-09T23:36:31.987
> 
> 标签：php, mysql, database, excel, csv

我知道还有其他类似的帖子，但每个人都建议直接在 PHPMyAdmin 中将其导入 MySQL（效果很好，但我需要通过 HTML 表单将 PHP 导入到 MySQL。

我想要一个收集文件的 HTML 表单。然后将该文件传递给 PHP 脚本，我想知道是否可以简单地调用一个 PHP 函数，将逗号分隔的 .csv 文件转换为 MySQL 并将其添加到数据库中。

或者是逐行解析文件并添加每条记录的唯一方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T00:36:17.763

我还没有完全测试过这个，但我看不出它为什么不起作用的任何原因。

```
<?php

if ( isset( $_FILES['userfile'] ) )
{
  $csv_file = $_FILES['userfile']['tmp_name'];

  if ( ! is_file( $csv_file ) )
    exit('File not found.');

  $sql = '';

  if (($handle = fopen( $csv_file, "r")) !== FALSE)
  {
      while (($data = fgetcsv($handle, 1000, ",")) !== FALSE)
      {
          $sql .= "INSERT INTO `table` SET
            `column0` = '$data[0]',
            `column1` = '$data[1]',
            `column2` = '$data[2]';
          ";
      }
      fclose($handle);
  }

  // Insert into database

  //exit( $sql );
  exit( "Complete!" );
}
?>
<!DOCTYPE html>
<html>
<head>
  <title>CSV to MySQL Via PHP</title>
</head>
<body>
  <form enctype="multipart/form-data" method="POST">
    <input name="userfile" type="file">
    <input type="submit" value="Upload">
  </form>
</body>
</html> 
```

当然，您需要先验证数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T02:18:51.367

我们前一阵子用过这个，它工作得很好。只需注意您的文件和目录权限。csv_upload_mysql_conf.inc 只是数据库链接。这将一次解析多个文件，并将它们放在一个名为 import 的表中。相应地更新。

```
<?php

/* The conf file */
include_once "csv_upload_mysql_conf.inc";

$php_self = $_SERVER['PHP_SELF'];
$file_open = 0;
$file_exts = array
( 'csv');

#Our Form.....

$form = <<< EOFFORM
 <div align='center'  style='border: 1px solid #CCC; background-color: #FAFAFA;padding: 10px; color: #006699; width: 620px; font-family: palatino, verdana, arial, sans-serif;' >
<table align=center style='border: 1px solid #CCC; background-color: #FFF;padding: 20px; color: #006699;' cellspacing=1><tbody>
<tr><td>
<form enctype='multipart/form-data' action='$php_self' method='post'><input type='hidden' name='MAX_FILE_SIZE' value='2000000' /><input type='hidden' name='selected' value='yes' /> Selected file: <input name='userfile[]' type='file' id='userfile[]' multiple='' onChange='makeFileList();' /><br /><br /><input type='submit' value='Upload CSV' />
</td></tr></tbody></table></div>
<p>
        <strong>Files You Selected:</strong>

    </p>
    <ul id="fileList"><li>No Files Selected</li></ul>
<script type='text/javascript'>
        function makeFileList() {
            var input = document.getElementById('userfile[]');
            var ul = document.getElementById('fileList');
            while (ul.hasChildNodes()) {
                ul.removeChild(ul.firstChild);
            }
            for (var i = 0; i < input.files.length; i++) {
                var li = document.createElement('li');
                li.innerHTML = input.files[i].name;
                ul.appendChild(li);
            }
            if(!ul.hasChildNodes()) {
                var li = document.createElement('li');
                li.innerHTML = 'No Files Selected';
                ul.appendChild(li);
            }
        }
    </script>
EOFFORM;

#End Form;

if(!isset($_POST['selected'])){ 

            echo "$form";

        }

        elseif($_POST['selected'] == "yes"){
            $uploaddir = 'uploads/';
            if(count($_FILES['userfile']['name'])) {
                foreach ($_FILES['userfile']['name'] as $key => $error) {
                if ($error == UPLOAD_ERR_OK) {
                    $tmp_name = $_FILES['userfile']['tmp_name'][$key];
                    $name = $_FILES['userfile']['name'][$key];
                    $f_type = trim(strtolower(end(explode('.', $name))));
                    if (!in_array($f_type, $file_exts)) die("Sorry, $f_type files not allowed");
                }
        $uploadfile = $uploaddir . $name;
        if (! file_exists($uploadfile)) {
            if (move_uploaded_file($tmp_name, $uploadfile)) {
                print "File is valid, and was successfully uploaded. ";
                $flag = 1;
                chmod($uploadfile, 0777);
                } else {
                print "File Upload Failed. ";
                $flag = 0;
                } 

        $flag = 1;

        if ($flag == 1) {
        echo "\n parsing Data...";
        flush();

        if (file_exists($uploadfile)) {
        $fp = fopen($uploadfile, 'r') or die (" Can't open the file");
        $fileopen = 1;
        $length = calculate_length($uploadfile);
        }

        $replace = "REPLACE";
        $field_terminater = ",";
        $enclose_option = 1;
        $enclosed = '"';
        $escaped = '\\\\';
        $line_terminator = 1;
        $local_option = 1;

        $sql_query     =  'LOAD DATA';

            if ($local_option == "1") {
                $sql_query     .= ' LOCAL';
            }

            $sql_query     .= ' INFILE \'' . $uploadfile . '\'';
            if (!empty($replace)) {
                $sql_query .= ' ' . $replace;
            }
            $sql_query     .= ' INTO TABLE ' . "`import`";
            if (isset($field_terminater)) {
                $sql_query .= ' FIELDS TERMINATED BY \'' . $field_terminater . '\'';
            }
            if (isset($enclose_option) && strlen($enclose_option) > 0) {
                $sql_query .= ' OPTIONALLY';
            }
            if (strlen($enclosed) > 0) {
                $sql_query .= ' ENCLOSED BY \'' . $enclosed . '\'';
            }
            if (strlen($escaped) > 0) {
                $sql_query .= ' ESCAPED BY \'' . $escaped . '\'';
            }
            if (strlen($line_terminator) > 0){
                $sql_query .= ' LINES TERMINATED BY \'' . '\r\n' . '\'';
            }

        $result = mysql_query ($sql_query);
        echo mysql_error() ;

        if(mysql_affected_rows() > 1) {
                echo " <div align=center><b><font color=#66CC33>The csv data was added.</font></div> ";
        }
        else {
            error_log(mysql_error());
            echo " <div align=center><b><font color=#E96B10> Couldn't enter the data to db </font></div>";
        }

        if ($file_open ==1) {
        fclose($fp) or die("Couldn't close the file");
        }
    }
}
}
echo "<meta http-equiv='refresh' content='0; url=index.php'>";
}
}

function calculate_length($fp) {
   $length = 1000;
   $array = file($fp);
   for($i=0;$i<count($array);$i++)
   {
       if ($length < strlen($array[$i]))
       {
           $length = strlen($array[$i]);
       }
   }
   unset($array);
   return $length;
}

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T07:30:07.220

您的代码中的一切都很好，唯一的错误是您没有使用 mysql_query 将数据插入表中。Mysql 查询未在您的脚本中运行。更正的代码如下...

```
 <?php

if ( isset( $_FILES['userfile'] ) )
{
  $csv_file = $_FILES['userfile']['tmp_name'];

  if ( ! is_file( $csv_file ) )
    exit('File not found.');

  $sql = '';

  if (($handle = fopen( $csv_file, "r")) !== FALSE)
  {
      while (($data = fgetcsv($handle, 1000, ",")) !== FALSE)
      {
          $sql = mysql_query("INSERT INTO `table` SET
            `column0` = '$data[0]',
            `column1` = '$data[1]',
            `column2` = '$data[2]';
          ");
      }
      fclose($handle);
  }

  // Insert into database

  //exit( $sql );
  exit( "Complete!" );
}
?>
<!DOCTYPE html>
<html>
<head>
  <title>CSV to MySQL Via PHP</title>
</head>
<body>
  <form enctype="multipart/form-data" method="POST">
    <input name="userfile" type="file">
    <input type="submit" value="Upload">
  </form>
</body>
</html> 
```

# objective-c - 你如何使用 OCMock for iOS 模拟私有属性？

> ID：11893502
> 
> 赞同：18
> 
> 时间：2012-08-09T23:37:03.073
> 
> 标签：objective-c, ios, cocoa-touch, unit-testing, ocmock

我有一个在要测试的类的 .m 文件中声明的私有属性，我们称之为 ClassUnderTest。ClassUnderTest 实例化 ClassToBeMocked 的一个实例。如何使用 OCMock 模拟 ClassToBeMocked 的实例并将其分配给 ClassUnderTest？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-08-10T16:59:39.383

在您的测试类中重新声明该属性。您可以对私有方法执行相同的操作。在 ClassUnderTestTest.m 中：

```
@interface ClassUnderTest ()

@property(retain)ClassToBeMocked *instanceToBeMocked;

-(void)somePrivateMethod;

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:04:24.083

下面的工作吗？

```
id classUnderTest = ... // get from somewhere
id mock = [OCMockObject mockForClass:[ClassToBeMocked class]];
[classUnderTest setValue:mock forKey:@"nameOfThatPrivateProperty"]; 
```

不完全确定您是否可以设置这样的私有属性。我认为这取决于它是什么样的财产。

# javascript - 将音频添加到我的网页

> ID：11893505
> 
> 赞同：0
> 
> 时间：2012-08-09T23:37:15.653
> 
> 标签：javascript, jquery, html

我只是找不到将音频添加到网页的方法，基本上我想要做的是当用户单击图标时，用户能够听到该单词的发音。有什么建议吗？我想要这样的东西 [http://www.w3schools.com/html/tryit.asp?filename=tryhtml_sound_mp3link](http://www.w3schools.com/html/tryit.asp?filename=tryhtml_sound_mp3link)

但没有播放器？是否可以只听单词（在这种情况下是音乐）但没有播放器只听音乐？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T23:46:37.627

在此示例中，它使用的是视频，而不是音频元素。

无论如何，只需使用 HTML5 音频元素，不要放置控制属性

然后，当用户点击链接时，只需调用音频元素的播放方法..

检查我现在制作的这个例子：http: [//jsfiddle.net/kcqbN/1/](http://jsfiddle.net/kcqbN/1/)

# xml - 带有 XML 请求正文的 OAuth 签名

> ID：11893509
> 
> 赞同：0
> 
> 时间：2012-08-09T23:37:28.430
> 
> 标签：xml, oauth, signature

我需要知道 QuickBooks Online[删除客户](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0400_QuickBooks_Online/Customer#Deleting_a_Customer)API 请求的未散列、未 url 编码的 OAuth 签名是什么样的。

注意事项

*   url 中有一个查询`?methodx=delete`。
*   如有必要，我将 xml 请求正文放在哪里。

我被证明要这样做，但它似乎不起作用，或者遵循`x=y`范式。

```
POST
&
https://qbo.intuit.com/qbo36/resource/customer/v2/502724020/7
&
methodx=delete
&
oauth_consumer_key=9382hrq2li3rh9a8dshf98fh2fhe
&
oauth_nonce=2WM7s
&
oauth_signature_method=HMAC-SHA1
&
oauth_timestamp=1344528249
&
oauth_token=a3helrikhiu23lfqiweahcnlik324hr2o3ihrfewewf
&
oauth_version=1.0
&
<?xml version="1.0" encoding="utf-8"?><Customer xmlns:ns2="http://www.intuit.com/sb/cdm/qbo"
xmlns="http://www.intuit.com/sb/cdm/v2"><Id>7</Id><SyncToken>0</SyncToken></Customer> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T17:27:28.103

您应该将请求 Content-Type 标头设置为“text/xml”，并且在生成 oAuth 签名时不应将 XML 附加到请求参数中。

只有当 POST 参数的内容类型为“application/x-www-form-urlencoded”时，POST 参数才应包含在签名中，就像提交表单一样。

我遇到了同样的问题，并在 Linkedin 的 API 文档页面上找到了这个解决方案：~~[https](https://developer-programs.linkedin.com/documents/common-issues-oauth-authentication)~~ ://developer-programs.linkedin.com/documents/common-issues-oauth-authentication （死链接）

# c# - 当我知道确切路径时，如何使用 c# 找到 XML 元素？

> ID：11893511
> 
> 赞同：5
> 
> 时间：2012-08-09T23:37:42.017
> 
> 标签：c#, xpath, xpathnavigator

如何从 xml 文档中获取信息？我在 c:\temp\data.xml 有一个 xml 文档，并且正在使用 Visual Studio。

我能想到的最接近的是：

```
XmlDocument xdoc = new XmlDocument();
xdoc.Load(@"C:\temp\data.xml");
date = xdoc.SelectSingleNode("/forcast_informat… 
```

XML 文档如下所示：

```
<?xml version="1.0"?>
-<xml_api_reply version="1">
    -<weather section="0" row="0" mobile_zipped="1" mobile_row="0" tab_id="0" module_id="0">
        -<forecast_information>
             etc etc...
             <current_date_time data="2012-08-09 21:53:00 +0000"/>
             etc, etc... 
```

我想做的就是抓住那个日期 2012-08-09 21:53:00 +0000 ...有什么建议吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T23:45:47.033

这应该可以解决问题：

```
XmlDocument xdoc = new XmlDocument();
xdoc.Load(@"C:\temp\data.xml");
XmlNode dataAttribute = xdoc.SelectSingleNode("/xml_api_reply/weather/forecast_information/current_date_time/@data");

Console.WriteLine(dataAttribute.Value); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T23:52:37.730

尝试这个。这将为每个预测加载当前日期和时间：

```
XmlDocument XMLDoc = new XmlDocument();
XMLDoc.Load(XMLDocumentPath);
XmlNodeList NodeList = XMLDoc.SelectNodes("/xml_api_reply/weather/forecast_information/");
foreach(XmlNode Node in NodeList)
{
string DTime = Node["current_date_time"].InnerText;
//Do something with DTime
} 
```

# css - 如何防止在 iPhone（和其他移动设备）上缩放具有固定位置的对象

> ID：11893514
> 
> 赞同：5
> 
> 时间：2012-08-09T23:37:58.173
> 
> 标签：css, mobile

我有一个网页，其菜单固定在页面底部。当您使用 iPhone（可能还有其他移动设备）放大页面时，菜单也会缩放，但仍固定在屏幕底部，这会导致它占用所有屏幕空间。有没有办法让这个菜单保持固定大小而不管缩放？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T00:43:42.310

我认为这可以解决您的问题：[http ://davidwalsh.name/zoom-mobile-browsers](http://davidwalsh.name/zoom-mobile-browsers)

# php - 当数据库中有新条目时显示新条目的最佳方式

> ID：11893517
> 
> 赞同：0
> 
> 时间：2012-08-09T23:38:10.123
> 
> 标签：php, javascript, mysql, live

当数据库中有新条目时，我想在网站上实时显示（无需重新加载）。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:44:07.070

您最好的选择是使用长轮询（使用 AJAX 轮询 Web 服务器）。此方法通过 jQuery 使用长轮询（彗星）：

```
var timestamp = null;

function waitForMsg() {
    $.ajax({
        type: "POST",
        url:  "/path/to/php-script.php",
        data: { timestamp: timestamp },
        async: true,
        cache: false,
        success: function(data) {
            var json = eval('(' + data + ')');

            if(json['msg'] !== '') {
                $('#example-element').append(json['msg'] + '<br />');
            }

            timestamp = json['timestamp'];
            setTimeout(waitForMsg, 1000);
        },
        error: function(XMLHttpRequest, textStatus, errorThrown) {
            $('#error').html('Error: ' + textStatus + ' (' + errorThrown + ')');
            setTimeout(waitForMsg, 15000);
        }
    });
}

$(document).ready(function() {
    waitForMsg();
}); 
```

PHP 可能看起来像：

```
$filename = 'text_file.txt'; // Replace this with a "$query" if using a db
$lastmod  = isset($_POST['timestamp']) ? $_POST['timestamp'] : 0;
$currmod  = filemtime($filename);

while($currmod <= $lastmod) {
    usleep(10000);
    clearstatcache();
    $currmod = filemtime($filename);
}

$response = array();
$response['msg'] = file_get_contents($filename); // Or run your db query here
$response['timestamp'] = $currmod;

echo json_encode($response); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T23:43:56.773

ajax 和带有超时的递归函数

```
check();

function check() {

    // ajax

    setTimeout(check, 5000); // check every 5 seconds
} 
```

# python - 将图像上传到 Google App Engine 并与用户共享图像

> ID：11893519
> 
> 赞同：1
> 
> 时间：2012-08-09T23:39:15.963
> 
> 标签：python, image, google-app-engine, blobstore

是否有通过 HTTP 将图像上传到 Google App Engine(Python) 的示例？另外，是否可以从 Blob 存储中检索图像并将图像链接共享给某人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T05:06:20.337

使用[create_upload_url](https://developers.google.com/appengine/docs/python/blobstore/functions)创建一个 URL，您可以使用该 URL 将图像直接上传到 blobstore/云存储。

从那里，您可以使用[get_seving_url](https://developers.google.com/appengine/docs/python/images/functions)创建一个指向您的图像的 URL，该 URL 可以与用户共享以访问您的图像，或者如果您想要访问控制谁可以访问图像，然后使用 send_blob 和 BlobstoreDownloadHandler 将您的图像发送回您的用户.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T23:45:17.070

这是来自 Google[的留言簿应用示例](https://developers.google.com/appengine/docs/python/images/usingimages)，用户可以在其中上传头像图像。它解释了如何使用`db.BlobProperty()`来存储图像。如何编写一个处理程序来上传（`class Guestbook`），以及如何提供图像（`class Image`）。它甚至继续解释如何缩放图像。

# windows - 在 Windows 上录制特定程序的音频输出

> ID：11893520
> 
> 赞同：8
> 
> 时间：2012-08-09T23:39:20.480
> 
> 标签：windows, audio

有没有办法在 Windows 上录制特定程序的声音输出？我已经有一个解决方案，它使用 WASAPI 的环回设备将所有音频输出记录到扬声器，但我希望能够只记录特定程序的音频输出而忽略其他所有内容。我认为使用虚拟音频设备可以做到这一点，但如果可能的话，我想避免如此复杂的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T04:31:07.030

根据这篇文章（这本身很有趣），有一个程序叫做

[虚拟音频电缆](http://badros.blogspot.com/2010/05/skype-as-whole-house-wireless.html) 可能会为您解决问题....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-26T23:45:00.610

当您说它捕获发送给它的所有音频时，虚拟音频电缆将执行您已经提到的操作。您可以将一条虚拟线路设为默认值，然后记录该虚拟线路。你不能选择一个特定的程序来做这样的事情。我已经制作了一个使用它的教程。 [https://www.youtube.com/watch?v=WUQmkgw8Pjg](https://www.youtube.com/watch?v=WUQmkgw8Pjg) 我用它在玩游戏时通过我的“麦克风”播放来自 youtube 的音乐。

# schema.org - Google Rich Snippets .... 获取食谱

> ID：11893527
> 
> 赞同：2
> 
> 时间：2012-08-09T23:40:00.487
> 
> 标签：schema.org, microdata, google-rich-snippets

我在我的网站的测试工具上正确显示丰富的片段时遇到了一些问题（我知道谷歌可能需要一些时间/决定结果是否显示在实际网站上）。

这是我的一个页面的示例 Google 丰富片段结果： [http ://www.google.com/webmasters/tools/richsnippets?url=http%3A%2F%2Fwww.makemeacocktail.com%2Fcocktail%2F6741%2Fcosmopolitan%2F](http://www.google.com/webmasters/tools/richsnippets?url=http%3A%2F%2Fwww.makemeacocktail.com%2Fcocktail%2F6741%2Fcosmopolitan%2F)

这是这个网址： http: [//www.makemeacocktail.com/cocktail/6741/cosmopolitan/](http://www.makemeacocktail.com/cocktail/6741/cosmopolitan/)

一切看起来都不错 - 但由于某种原因，示例结果中没有显示图像。我在这里有点困惑。我有正确的元标记：

```
<meta itemprop="image" content="http://images.makemeacocktail.com/cocktails/6741/cosmo_4.jpg" class="photo" /> 
```

但是测试工具结果中没有显示图像？

作为一个方面 - 还有什么需要包括的吗？它似乎拥有所需的一切，但似乎无法正确显示图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-18T21:58:39.570

不完全正确......但它确实让我找到了解决方案。为了完整起见，如果有人想了解更多......

我正在使用： itemscope itemtype="http://schema.org/Recipe"

谷歌在他们的示例页面中的位置：http: [//support.google.com/webmasters/bin/answer.py ?hl=en&answer=173379](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=173379)

用途：itemscope itemtype="http://data-vocabulary.org/Recipe"

注意不同的项目类型。图像是 schema.org 的正确项目类型（不适用于 data-vocabulary.org）。如果我将元标记更改为：

```
<meta itemprop="image" content="http://images.makemeacocktail.com/cocktails/6741/cosmo_4.jpg" class="photo" /> 
```

至

```
<meta itemprop="photo" content="http://images.makemeacocktail.com/cocktails/6741/cosmo_4.jpg" class="photo" /> 
```

谷歌抛出了 schema.org 中无法识别 itemprop="photo" 的错误。

我的页面没有在搜索结果中显示照片的实际原因是因为我还使用了 Microdata（我使用的是 Microdata hrecipe。顺便说一下，Schema.org 是一种 Microformat）。

我的页面微数据是正确的，但是微数据所需的 class="photo" 位于元标记上，事实证明，您实际上需要在实际的 'img' 标记上使用 class="photo" 以供 google 使用认出它。

这也表明谷歌实际上在微格式之前读取微数据——这让我想知道将两者放在一个页面上是否有用。即如果 hrecipe 存在并且照片类未正确应用，Google 无法识别我正确的 schema.org 图像元标记。所以我想知道如果存在微数据，谷歌是否会使用微格式信息。

几个开放式问题，也是最初问题的答案。希望将来能帮助别人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T03:14:56.727

配方标记中的图像属性被调用`photo`而不是`image`：

[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=173379](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=173379)

尝试替换`itemprop="image"`为`itemprop="photo"`，您应该一切就绪。

# python - 对象不可与输入文件迭代

> ID：11893532
> 
> 赞同：0
> 
> 时间：2012-08-09T23:41:08.197
> 
> 标签：python, file-io

我基本上是在尝试用新的更新编号更新已保存文件中的一行，但它只在文件中留下一行。感觉就像它覆盖了整个文件而不是更新它。我在这里查看了其他问题，虽然他们给了我正确的模块来使用，但我似乎无法弄清楚我遇到的问题。

```
unique = 1
for line in fileinput.input('tweet log.txt', inplace=1):
    if tweet_id in line:  #checks if ID is unique, if it is not, needs to update it
        tweet_fields = line.split(';')
        old_count  = tweet_fields[-2]
        new_count = 'retweet=%d' % (int(tweet_retweet))
        line = line.replace(old_count, new_count)
        print line
        unique = 0
if unique == 1:          #if previous if didn't find uniqueness, appends the file
    save_file = open('tweet log.txt', 'a')
    save_file.write('id='+tweet_id +';'+
                    'timestamp='+tweet_timestamp+';'+
                    'source='+tweet_source+';'+
                    'retweet='+tweet_retweet+';'+'\n')
    save_file.close() 
```

我觉得这有一个非常简单的解决方案，但我显然错过了它。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T19:39:49.877

我认为您遇到的问题是由于您在输入循环中的条件。当您使用`fileinput.input`该`inplace=1`参数时，它会重命名原始文件，添加“备份”扩展名（默认为“.bak”）并将标准输出重定向到具有原始名称的新文件。

您的循环仅打印您正在编辑的行。因此，所有不匹配的行都会从文件中过滤掉。您可以通过打印您迭代的每一行来解决此问题，即使它不匹配。这是您的循环的更改版本：

```
for line in fileinput.input('tweet log.txt', inplace=1):
    if tweet_id in line:
        tweet_fields = line.split(';')
        old_count  = tweet_fields[-2]
        new_count = 'retweet=%d' % (int(tweet_retweet))
        line = line.replace(old_count, new_count)
        unique = 0
    print line 
```

唯一的变化是将`print line`语句移出`if`块。

# javascript - 使用 html 源确定要突出显示的可见字符

> ID：11893534
> 
> 赞同：1
> 
> 时间：2012-08-09T23:41:18.290
> 
> 标签：javascript, jquery, html

我正在使用 TinyMCE 让用户编辑和格式化文本，输出是 html 代码。然后将 html 发送到服务器并推送到可以跟踪网页上的编辑进度的其他客户端，将 html 插入到 div 中，以便用户可以看到格式但他们无法编辑。

现在，我希望光标位置和用户在编辑器中所做的任何选择都显示在只读页面上，如果选中，则使用突出显示（背景颜色）或在字符之间插入带有黑色边框的空范围来模仿光标位置。

我尝试使用 editor.tinymce().selection.getRng() 它给了我用户看到的开始和结束位置（格式化字符不计算在内）然后我遍历 DOM 并计算每个文本元素包装中的字符用突出显示跨度选择的那些。这导致代码混乱，但工作得很好，直到我在文本块中遇到非 ascii 或编码字符。

示例 html

```
<p>abc&nbsp;<b>de</b>fg</p> 
```

对用户来说是这样的

abc  **de** fg

假设用户选择了字符 c 到 d（选择包括 c、空白、粗体标签的前半部分和 d），tinymce 将返回范围 start:2 end:5 但后面的实际字符将是 start:5 end:16。仅将字符 5 到 16 的文本包装在突出显示范围内将导致 html 错误。检查以 & 开头和以 ; 结尾的单词 增加职位数量会变得一团糟。必须有一个更简单的方法

如何计算一组 html 字符将变成多少个“可见”字符？

或者也许你会以另一种方式解决问题

谢谢

PS 1 我研究了各种 jquery 高亮插件，但它们似乎是基于搜索字符串高亮显示的。这些在用户选择一个字符并且该字符多次存在的情况下不起作用，然后它们将突出显示所有出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T00:10:25.263

我在我的[Rangy](https://code.google.com/p/rangy/)库中解决了这个问题：[TextRange 模块](https://code.google.com/p/rangy/wiki/TextRangeModule)关注用户看到的文本。听起来您需要 Rangy 的 Range 对象的`selectCharacters()`和`toCharacterRange()`方法。

# node.js - 使用 Mocha/Chai 测试 CoffeeScript 时出现奇怪的 fs.readFile 行为

> ID：11893538
> 
> 赞同：4
> 
> 时间：2012-08-09T23:41:40.160
> 
> 标签：node.js, coffeescript, mocha.js, fs, chai

请考虑我有以下 CoffeeScript 代码：

```
class Foobar
    test: (path) ->
        fs = require 'fs'
        fs.readFile path, (err, data) ->
            console.log 'fs.readFile callback fired'

root = exports ? window
root.Foobar = Foobar 
```

以下是 Mocha 的测试文件：

```
chai = require 'chai'
expect = chai.expect
chai.should()

{Foobar} = require '../source/foobar'

describe 'Foobar', ->
    foobar = null
    it 'does nothing', ->
        foobar = new Foobar
        foobar.test 'foobar.txt' 
```

我运行测试：

```
mocha --compilers coffee:coffee-script -R spec 
```

对我来说奇怪的是控制台什么也没记录。当我将 Coffee 更改为此时（在末尾添加了两行）：

```
class Foobar
    test: (path) ->
        fs = require 'fs'
        fs.readFile path, (err, data) ->
            console.log 'fs.readFile callback fired'

root = exports ? window
root.Foobar = Foobar

foobar = new Foobar
foobar.test 'foobar.txt' 
```

我运行了测试，现在控制台记录`fs.readFile callback fired`了两次，正如预期的那样。

那么，为什么控制台在第一种情况下是空的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T00:26:22.303

您的测试可能在`readFile`回调执行之前就结束了。该`test`方法应该接受一个回调：

```
class Foobar
    test: (path, callback) ->
        fs.readFile path, (err, data) ->
            console.log 'fs.readFile callback fired'
            callback err, data 
```

这样您就可以编写测试以异步运行：

```
it 'calls callback', (done) ->
    foobar = new Foobar()
    foobar.test 'foobar.txt', done 
```

# javascript - JQuery：循环遍历dom元素时如何正确缩进字符串

> ID：11893540
> 
> 赞同：0
> 
> 时间：2012-08-09T23:41:52.340
> 
> 标签：javascript, jquery

代码在这里[http://jsfiddle.net/Ea7hd/1/](http://jsfiddle.net/Ea7hd/1/)

基本上，我的输出需要与出现在 textarea 中的 html 元素的缩进相匹配。

问题是，当我遍历 textarea 中的所有元素时，我无法添加适当的缩进，因为我无法设置一个元素相对于其父元素的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T00:02:20.670

您可以使用`<div>`：`padding-left`http: [//jsfiddle.net/Ea7hd/5/](http://jsfiddle.net/Ea7hd/5/)。

标识、填充和边距是样式，所以你应该通过 CSS 来实现它们，所以你不应该添加`&nbsp;`.

# c - 访问 mmaped /dev/mem

> ID：11893541
> 
> 赞同：1
> 
> 时间：2012-08-09T21:02:52.333
> 
> 标签：c, linux-kernel, mmap

我有一个简单的程序，它试图访问用户空间中的物理内存，内核存储第一个结构页面。在 64 位机器上，此地址为：

> 内核虚拟地址：ffffea0000000000 物理地址：0000620000000000

我试图通过`mmap`用户空间访问这个物理地址，但以下代码使内核崩溃：

```
int *addr;
if ((fd = open("/dev/mem", O_RDWR|O_SYNC)) < 0 ) {
    printf("Error opening file. \n");
    close(fd);
    return (-1);
}
/* mmap.  address of first struct page for 64 bit architectures 
 * is 0x0000620000000000.
 */
addr = (int *)mmap(0, num*STRUCT_PAGE_SIZE, PROT_READ, MAP_PRIVATE,
            fd, 0x0000620000000000);
printf("addr: %p \n",addr);
printf("addr: %d \n",*addr); /* CRASH. */ 
```

我究竟做错了什么？

# html - CSS 居中对齐

> ID：11893548
> 
> 赞同：0
> 
> 时间：2012-08-09T23:42:52.057
> 
> 标签：html, css, alignment

我试图将一个 div 与另一个 div 的中心对齐。我搜索了，所有答案都说要放“margin：auto;” 或“边距：0px 自动；”。我都试过了，都不管用。

我的 CSS 是：

```
#slider div
{
    margin:0px auto;
    width:620px;
} 
```

编辑：我已经尝试了所有建议，没有任何改变。难道#slider是Jquery？？？

根据要求，这是整个页面代码：

```
<html>
<head>
<script type="text/javascript" src="C:\Users\Pam\Desktop\jquery-1.7.2.min.js"></script>
<script type="text/javascript"         src="C:\Users\Pam\Desktop\easyslider1.7\js\easyslider1.7.js"></script>
<style type="text/css">
body
{
margin-top:0px;
margin-bottom:0px;
margin-left:0px;
margin-right:0px;
background-image:url('./bg.jpg');
}
#headerCon
{
display:block;
background-color:#151515;
width:100%;
height:40px;
padding-left:auto;
padding-right:auto;
position:fixed;
}
#header
{
width:950px;
height:100%;
margin-right:auto;
margin-left:auto;
}
#menu
{
margin-left:10%;
}
#title
{
background-image:url('./title.png');
background-repeat:no-repeat;
display:block;
height:123px;
margin:0px auto;
text-align:center;
}
#container
{
text-align:center;
display:block;
width:850px;
margin-right:auto;
margin-left:auto;
height:100%;
/* background-color:#dfdfdf; */
max-padding:100%;
position:relative;
}
a.link
{
text-decoration:none;
font-weight:bold;
font-family:Arial,Helvetica,sans-serif;
display:block;
width:100px;
height:30px;
border-right:1px solid #000000;
float:left;
color:#00af64;
padding-left:0px;
padding-top:10px;
text-align:center;
}
a.link:hover
{
text-decoration:none;
font-weight:bold;
font-family:Arial,Helvetica,sans-serif;
display:block;
width:100px;
height:30px;
border-right:1px solid #000000;
float:left;
color:#00af64;
padding-left:0px;
padding-top:10px;
text-align:center;
background-color:#252525;
}
p
{
color:#fff;
font-family:Arial,Helvetica,sans-serif;
}

#button1
{
margin-left:34%;
}
/* EASY SLIDER */
#slider div
{
    position: absolute;
    top: 50%;
    left: 50%;
    margin-top:2px; 
    margin-left:2px;
width:620px;    
}
#sliderContain
{
position:absolute;
margin-left:3px;
margin-top:3px;

}
#slider ul, #slider li{
    margin:0;
    padding:0;
list-style:none;
}
#slider, #slider li{ 
width:620px;
height:230px;
overflow:hidden; 
}
#transBorder
{
background-color:#111111;
opacity:0.60;
filter:alpha(opacity=60); /* For IE8 and earlier */
display:block;
height:236px;
width:626;
position:absolute;
z-index:-1;
float:up;
}
#slider1prev
{
display:none;
}
#slider1next
{
display:none;
}

</style>
</head>
<body>
<div id="headerCon"> 
<div id="header">
    <div id="menu">
        <a href="" id="" class="link"> Home </a>
        <a href="" id="" class="link"> Monsters </a>
        <a href="" id="" class="link"> Areas </a>
        <a href="" id="" class="link"> Trades</a>
        <a href="" id="" class="link"> Classes </a>
    </div>
</div>
</div>
<div>
<br />
<br />
</div>
<div id="container">
<div id="title"> &nbsp; </div>
<div id="sliderContain">
<div id="slider">
    <ul>
        <li><img src="./reddragon.png"/></li>
        <li><img src="./swamp.png"/></li>
        <li><img src="./town.png"/></li>
    </ul>
</div>
</div>
<div id="transBorder">
&nbsp;
</div>
</div>

<script type="text/javascript">
$(document).ready(function(){   
$("#slider").easySlider({
    auto: true,
    continuous: true,
    nextId: "slider1next",
    prevId: "slider1prev"
});
});
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T23:50:55.973

可以使用绝对定位​</p>

```
#one {
    background: red;
    position: relative;
}

#two {
    width: 300px;
    height: 150px;
    position: absolute;
    top: 50%;
    left: 50%;
    margin-top: -75px; /* negative half of height */
    margin-left: -150px; /* negative half of width */
    background: blue;
}    ​ 
```

[http://jsfiddle.net/3kj6A/](http://jsfiddle.net/3kj6A/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T23:56:47.383

如果您发布了整个代码，将会更容易看到发生了什么。

无论如何使用这个css作为子div：

```
position: relative;
margin: 0 auto; 
```

这是父级的CSS：

```
text-align:center;
margin: 0 auto; 
```

并告诉我它是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T00:38:22.387

你可以试试这个：

```
#slider div
{
position: absolute;
left: 50%;
margin-left:-310px;
width:620px;
} 
```

如果这不起作用，您可以执行与上述相同的操作，只需将 margin-left 更改为：

```
margin-left:-25%; 
```

希望有帮助。

jQuery的东西可以与CSS对齐，如果“#slider div”仍然没有对齐，你应该检查CSS中的其他元素，它们可能会影响#slider。

或者您的问题可能是代码应该是：

```
#slider {
    code in here 
} 
```

您无需声明该元素是 div。“#slider div”是指滑块中的div（子div），而不是它自己的滑块（父div）。如果我误解了，请纠正我。

# tsql - 如何为多个分组编写一个查询？

> ID：11893551
> 
> 赞同：0
> 
> 时间：2012-08-09T23:43:12.590
> 
> 标签：tsql, group-by

在下面的查询中，我怎样才能只做一个查询来给我结果，而不是用 diff 分组制作副本并将它们联合起来？

如果可能的话。

提前致谢！！

```
`create table #temp1 (col1 varchar(50), col2 varchar(50), col3 varchar(50), col4 varchar(50), col5 varchar(50), sumit int)

insert into #temp1 values('AEAMS','CE Europe', 'Belarus', 'Govt', 'Int Fed Gvt', 1)
insert into #temp1 values('AEAMS','CE Europe', 'Belarus', 'Govt', 'Public Lib', 1)
insert into #temp1 values('AEDS','Japan', 'Japan C', 'Acad', 'CollUnive', 1)
insert into #temp1 values('AEDS','Japan', 'Japan F', 'Acad', 'Med', 1)
insert into #temp1 values('A- Regular Databases','UK and Ireland', 'Ireland', 'School', 'HIGH SCHOOL', 1)

Select col1 CC, null GM, null Terr, null Mkt, null Seg,  sum(sumit) SS
from #temp1
group by col1

Union

Select col1 CC, col2 GM, null Terr, null Mkt, null Seg,  sum(sumit) SS
from #temp1
group by col1, col2

Union

Select col1 CC, col2 GM, col3 Terr, null Mkt, null Seg,  sum(sumit) SS
from #temp1
group by col1, col2, col3

Union

Select col1 CC, col2 GM, col3 Terr, col4 Mkt, null Seg,  sum(sumit) SS
from #temp1
group by col1, col2, col3, col4, col5 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T23:47:57.377

尝试使用[WITH ROLLUP](http://sqlandme.com/2011/07/07/sql-server-tsql-group-by-with-rollup/)：

```
Select col1 CC, col2 GM, col3 Terr, col4 Mkt, null Seg,  sum(sumit) SS
from #temp1
group by col1, col2, col3, col4, col5
with rollup 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!3/83f70/3)

# objective-c - 如何获取当前音频输出设备的当前音量？

> ID：11893555
> 
> 赞同：6
> 
> 时间：2012-08-09T23:44:11.137
> 
> 标签：objective-c, macos, cocoa, core-audio, openal

我正在寻找一种方法来利用 Mac 上的当前音频输出，然后返回一个表示当前声级的值。

声级是指输出产生的噪音量。我**不是**在问如何获得输出设备的当前音量。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-13T05:37:10.940

以下代码是从[Apple 的 Sample`AVRecorder`](http://developer.apple.com/library/mac/#samplecode/AVRecorder/Listings/AVRecorder_AVRecorderDocument_m.html)中提取的……这段特殊的代码从此类的 movieFileOutput 的连接方法中获取一组连接，获取每个连接的 AVCaptureAudioChannel，并据此计算分贝功率。我假设如果您正在寻找输出“噪声级别”，您将能够捕获类似的信息。如果您正在寻找比这更低级别的东西，请尝试 HAL（硬件抽象层）框架。

```
- (void)updateAudioLevels:(NSTimer *)timer
{
    NSInteger channelCount = 0;
    float decibels = 0.f;

    // Sum all of the average power levels and divide by the number of channels
    for (AVCaptureConnection *connection in [[self movieFileOutput] connections]) {
        for (AVCaptureAudioChannel *audioChannel in [connection audioChannels]) {
            decibels += [audioChannel averagePowerLevel];
            channelCount += 1;
        }
    }

    decibels /= channelCount;

    [[self audioLevelMeter] setFloatValue:(pow(10.f, 0.05f * decibels) * 20.0f)];
} 
```

# apache-poi - 如何通过Apache poi复制excel中的列数据？

> ID：11893557
> 
> 赞同：1
> 
> 时间：2012-08-09T23:44:30.157
> 
> 标签：apache-poi

有人知道如何将现有列数据复制到 Excel 文件中的新工作表或 Apache poi 的新工作簿中吗？数据类型为双精度和日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:48:51.530

我附上了下面的链接。它们还提供了多种不同的方法。

```
 import java.util.Collection;   
    import java.util.HashMap;   
    import java.util.Map;   
    import java.util.Set;   
    import java.util.TreeSet;   
    import org.apache.poi.hssf.usermodel.HSSFCell;   
    import org.apache.poi.hssf.usermodel.HSSFCellStyle;   
    import org.apache.poi.hssf.usermodel.HSSFRow;   
    import org.apache.poi.hssf.usermodel.HSSFSheet;   
    import org.apache.poi.ss.util.CellRangeAddress;   

    /**  
     *  
     * @author jk  
     * getted from http://jxls.cvs.sourceforge.net/jxls/jxls/src/java/org/jxls/util/Util.java?revision=1.8&view=markup  
     * by Leonid Vysochyn   
     * and modified (adding styles copying)  
     * modified by Philipp Löpmeier (replacing deprecated classes and methods, using generic types)  
     */  
    public class Util {   

        public static void copySheets(HSSFSheet newSheet, HSSFSheet sheet){   
            copySheets(newSheet, sheet, true);   
        }   

        public static void copySheets(HSSFSheet newSheet, HSSFSheet sheet, boolean copyStyle){   
            int maxColumnNum = 0;   
            Map<Integer, HSSFCellStyle> styleMap = (copyStyle) ? new HashMap<Integer, HSSFCellStyle>() : null;   
            for (int i = sheet.getFirstRowNum(); i <= sheet.getLastRowNum(); i++) {   
                HSSFRow srcRow = sheet.getRow(i);   
                HSSFRow destRow = newSheet.createRow(i);   
                if (srcRow != null) {   
                    Util.copyRow(sheet, newSheet, srcRow, destRow, styleMap);   
                    if (srcRow.getLastCellNum() > maxColumnNum) {   
                        maxColumnNum = srcRow.getLastCellNum();   
                    }   
                }   
            }   
            for (int i = 0; i <= maxColumnNum; i++) {   
                newSheet.setColumnWidth(i, sheet.getColumnWidth(i));   
            }   
        }   

        public static void copyRow(HSSFSheet srcSheet, HSSFSheet destSheet, HSSFRow srcRow, HSSFRow destRow, Map<Integer, HSSFCellStyle> styleMap) {   
            Set<CellRangeAddress> mergedRegions = new TreeSet<CellRangeAddress>();   
            destRow.setHeight(srcRow.getHeight());   
            for (int j = srcRow.getFirstCellNum(); j <= srcRow.getLastCellNum(); j++) {   
                HSSFCell oldCell = srcRow.getCell(j);   
                HSSFCell newCell = destRow.getCell(j);   
                if (oldCell != null) {   
                    if (newCell == null) {   
                        newCell = destRow.createCell(j);   
                    }   
                    copyCell(oldCell, newCell, styleMap);   
                    CellRangeAddress mergedRegion = getMergedRegion(srcSheet, srcRow.getRowNum(), (short)oldCell.getColumnIndex());   
                    if (mergedRegion != null) {   
                        CellRangeAddress newMergedRegion = new CellRangeAddress(mergedRegion.getFirstRow(), mergedRegion.getFirstColumn(), mergedRegion.getLastRow(), mergedRegion.getLastColumn());   
                        if (isNewMergedRegion(newMergedRegion, mergedRegions)) {   
                            mergedRegions.add(newMergedRegion);   
                            destSheet.addMergedRegion(newMergedRegion);   
                        }   
                    }   
                }   
            }   

        }   

        public static void copyCell(HSSFCell oldCell, HSSFCell newCell, Map<Integer, HSSFCellStyle> styleMap) {   
            if(styleMap != null) {   
                if(oldCell.getSheet().getWorkbook() == newCell.getSheet().getWorkbook()){   
                    newCell.setCellStyle(oldCell.getCellStyle());   
                } else{   
                    int stHashCode = oldCell.getCellStyle().hashCode();   
                    HSSFCellStyle newCellStyle = styleMap.get(stHashCode);   
                    if(newCellStyle == null){   
                        newCellStyle = newCell.getSheet().getWorkbook().createCellStyle();   
                        newCellStyle.cloneStyleFrom(oldCell.getCellStyle());   
                        styleMap.put(stHashCode, newCellStyle);   
                    }   
                    newCell.setCellStyle(newCellStyle);   
                }   
            }   
            switch(oldCell.getCellType()) {   
                case HSSFCell.CELL_TYPE_STRING:   
                    newCell.setCellValue(oldCell.getStringCellValue());   
                    break;   
                case HSSFCell.CELL_TYPE_NUMERIC:   
                    newCell.setCellValue(oldCell.getNumericCellValue());   
                    break;   
                case HSSFCell.CELL_TYPE_BLANK:   
                    newCell.setCellType(HSSFCell.CELL_TYPE_BLANK);   
                    break;   
                case HSSFCell.CELL_TYPE_BOOLEAN:   
                    newCell.setCellValue(oldCell.getBooleanCellValue());   
                    break;   
                case HSSFCell.CELL_TYPE_ERROR:   
                    newCell.setCellErrorValue(oldCell.getErrorCellValue());   
                    break;   
                case HSSFCell.CELL_TYPE_FORMULA:   
                    newCell.setCellFormula(oldCell.getCellFormula());   
                    break;   
                default:   
                    break;   
            }   

        }   

        public static CellRangeAddress getMergedRegion(HSSFSheet sheet, int rowNum, short cellNum) {   
            for (int i = 0; i < sheet.getNumMergedRegions(); i++) {   
                CellRangeAddress merged = sheet.getMergedRegion(i);   
                if (merged.isInRange(rowNum, cellNum)) {   
                    return merged;   
                }   
            }   
            return null;   
        }   

        private static boolean isNewMergedRegion(CellRangeAddress newMergedRegion, Collection<CellRangeAddress> mergedRegions) {   
            return !mergedRegions.contains(newMergedRegion);   
        }   

    } 
```

[http://www.coderanch.com/t/420958/open-source/Copying-sheet-excel-file-another](http://www.coderanch.com/t/420958/open-source/Copying-sheet-excel-file-another)

# ruby - Sinatra 语法错误：意外字符

> ID：11893559
> 
> 赞同：0
> 
> 时间：2012-08-09T23:45:14.790
> 
> 标签：ruby, sinatra, haml

我有一个讨厌的问题我真的不明白我在谷歌上搜索到的错误消息只会让我更加困惑，希望有什么东西可以直接为我铺设这些蛇！

我只是在玩 Sinatra 我正在运行以下代码：

```
set :haml, :format =&gt; :html5
    get "/" do
    haml :index
end 
```

但是当我运行代码时，我似乎收到了这个错误消息：

```
app.rb:2: syntax error, unexpected '=', expecting $end
set :haml, :format =&gt; :html5
                    ^ 
```

我真的不明白吗？这意味着什么？我安装了 ruby​​ 1.9.1 并使用 haml 和 sinatra gems？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T00:01:17.487

替换`&gt;`为`>`。

```
set :haml, :format => :html5

get "/" do
    haml :index
end 
```

# jquery - 使用淘汰赛的MVC jquery验证为什么即使字段为空，保存方法也会运行

> ID：11893568
> 
> 赞同：0
> 
> 时间：2012-08-09T23:46:19.783
> 
> 标签：jquery, asp.net-mvc, validation, knockout.js, jquery-validate

我有以下代码：

索引.cshtml：

```
 @using System.Web.Script.Serialization
@model MvcApplication3.ViewModels.PersonViewModel
<script src="../../Scripts/jquery.validate.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.validate.unobtrusive.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.unobtrusive-ajax.min.js" type="text/javascript"></script>
<script src="../../Scripts/knockout-2.1.0.js" type="text/javascript"></script>
    <!-- This is a *view* - HTML markup that defines the appearance of your UI -->
<form class="transferListEditor" data-bind="submit: save">

    <p>First name: <input class='required' data-bind="value: firstName, uniqueName: true" /></p>
    <p>Last name: <input class='required' data-bind="value: lastName, uniqueName: true" /></p>

    <table>
        <thead>
            <tr>
                <th>Name</th>
            </tr>
        </thead>
        <tbody data-bind="foreach: activities">
            <tr>
                <td><input data-bind="value: Name" /></td>
                <td><a href="#" data-bind="click: $root.removeActivity">Remove</a></td>
            </tr>    
        </tbody>
    </table>
    <button data-bind="click: addActivity">Add activity</button>
    <button type="submit">Submit</button>
</form>

<script type="text/javascript">

    var initialData = @Html.Raw(new JavaScriptSerializer().Serialize(Model));

    function activity(name) {
        var self = this;
        self.Name = name;
    }

    // This is a simple *viewmodel* - JavaScript that defines the data and behavior of your UI
    var viewModel = {
        firstName: ko.observable(initialData.Person.FirstName),
        lastName: ko.observable(initialData.Person.LastName),
        activities: ko.observableArray(initialData.Person.Activities),

        removeActivity : function(activity) {

            viewModel.activities.remove(activity);
        },

        addActivity : function() {
            viewModel.activities.push(new activity(""));
        },

        save: function() {

            $.ajax({
                type: "POST",
                url: "/Home/Index",
                data: ko.toJSON({ Person: viewModel }),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function(data) {
                    $("#resultCount").html(data);
                }
            });
        }
    };

    // Activates knockout.js
    ko.applyBindings(viewModel);

    $("form").validate({ submitHandler: viewModel.save });
</script> 
```

家庭控制器：

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using Ahb.Insite.HerdRegistration.WebUI;
using MvcApplication3.Models;
using MvcApplication3.ViewModels;

namespace MvcApplication3.Controllers
{
    public class HomeController : Controller
    {
        public ActionResult Index()
        {
            var person = new Person {FirstName = "John", LastName = "Cool"};

            person.Activities = new List<Activity> { new Activity { Name = "Skiing" } };

            var personViewModel = new PersonViewModel  { Person = person };

            return View(personViewModel);
        }

        [HttpPost]
        public ActionResult Index(PersonViewModel personViewModel)
        {
            //Save it

            return View();
        }
    }
} 
```

因此，当我单击提交时，如果名字和姓氏为空白，则会出现必填字段消息。问题是即使有一个必填字段缺少 viewModel 上的 save 方法，仍然会被调用。

有谁知道如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T00:01:01.960

尝试删除`data-bind="submit: save"`表格。

由于淘汰绑定是在 jQuery 验证绑定之前绑定的，它可能只是先点击保存代码。

我注意到使用带有敲除的 jQuery 验证的[示例](http://knockoutjs.com/examples/gridEditor.html)在表单元素上没有数据绑定。

**更新：** 我[确认](http://jsfiddle.net/L5dPB/)我可以通过将 data-bind 属性添加到示例来重现您的问题。

# ruby-on-rails - 是否有任何内置的 rails i18n 支持在不调用 translate() 方法的情况下翻译属性？

> ID：11893572
> 
> 赞同：0
> 
> 时间：2012-08-09T23:47:05.130
> 
> 标签：ruby-on-rails, ruby-on-rails-3, internationalization

我正在使用 en.yml 文件来控制我的 rails 应用程序中标签和按钮上的文本，其结构如下：

```
 helpers:
    submit:
      person:
        create: Create Person
    label:
      log:
        comment: Enter your comments here 
```

在这种情况下，我不必显式调用 translate 方法。有没有办法对元素的属性进行类似的翻译？到目前为止，我已经搜索了 en.yml 的层次结构，但没有成功。所以，我什至不知道这是否可能。

这是一个例子：

该视图具有：

```
<input id="person_name" hover_hint = "Please enter your name" type = "text" name="person_name"> 
```

有没有办法通过 en.yml 操作 hover_hint 属性的内容而不显式使用 translate 方法？

我总是可以创建一个符号 :hover_hint 然后在视图中使用 t :hover_hint 作为 hover_hint 属性的值。但是有没有办法避免这种情况 - 显式使用 translate 方法 - 并使用 en.yml 结构来代替标签和按钮？

# javascript - 什么触发 HTML 表单提交？

> ID：11893573
> 
> 赞同：16
> 
> 时间：2012-08-09T23:47:19.873
> 
> 标签：javascript, jquery, html, forms

对于无法提供任何实际代码，我提前道歉，因为问题出现在当前私有的页面中：-/ 请多多包涵。

我有一个 HTML 表单。我将（专有）日历小部件附加到其中一个文本输入字段。当用户进入该字段时，会出现日历。在日历上有几个按钮（移动到上/下个月）。当用户点击这些按钮之一时，日历会相应地更新，而且 - 表单提交！除了日历本身和它所附加的文本输入字段之外，日历代码中没有任何内容，更不用说提交表单了！我将不胜感激有关以下任何问题的任何线索：

1) 在这种情况下，什么可能提交表单？

2）除了点击提交按钮或按回车键之外，一般会提交哪些表单？（特别是普通按钮会提交表单吗？在什么情况下？）

3）作为一种解决方法，以防我无法解决这个问题，有没有办法完全禁用提交表单（然后在附加到提交键的事件处理程序中重新启用它）？

注意（S）：除此之外，日历的行为正常 - 正常响应关键事件和日期本身的单击事件（不是按钮）。我在 Firefox 和 Chrome 上都试过这个，得到了相同的行为。我尝试使用 FireBug 一步一步地跟踪 click 事件处理程序，一切似乎都很正常 - 但在它完成的那一刻，表单被提交（并且页面重新加载）。该小部件使用 jQuery 1.7.2。任何理解和/或解决此问题的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-10T02:08:52.040

很抱歉回答我自己的问题，但没有一个给出的答案是完整的，即使我已经从他们和评论中学到了！感谢所有参与的人！

所以：

1+2) 由元素定义的按钮`<button>`导致提交（就好像它们已经`type="submit"`设置了一样。至少在某些浏览器中）。如果一个想要一个按钮**不**导致提交一个应该使用`<button type="button">`，或者好旧的`<input type="button" />`。

3）（现在对我来说没有必要，但这是问题的一部分。）有很多方法可以防止表单提交。其中三个是：

*   处理事件，在未设置标志的情况下`onsubmit`阻止提交（通过`return false;`或 - 最好！ - 通过）；`e.preventDefault();`在处理应该实际提交表单的事件时设置标志

*   如果触发事件的元素不是我们想要引起提交的元素（之一），则处理`onsubmit`事件并阻止上述提交

*   将表单动作设置为非动作，即`action="#"`，并让应该实际提交表单的事件的处理程序将动作设置为正确的地址

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T23:52:47.783

日历代码没有在`submit()`某处调用？

> 3）作为一种解决方法，以防我无法解决这个问题，有没有办法完全禁用提交表单（然后在附加到提交键的事件处理程序中重新启用它）？

不幸的是，我不完全确定在表单事件`click`之前调用处理程序是否可靠。`submit`

```
( function () {

  var prevent_submit = true;

  $( "form" ).on( 'submit', function ( event ) {

    if ( prevent_submit ) {

      event.preventDefault();

    }

  } );

  $( "input[type='submit']" ).on( 'click', function ( event ) {

    prevent_submit = false;

  } );

} )(); 
```

或者

```
$( "form" ).attr( { action : "#", method : "post" } );

$( "input[type='submit']" ).on( 'click', function ( event ) {

  event.target.form.action = "...";

} ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T00:05:29.480

日历可以通过使用 jQuery 或纯 JavaScript 调用表单的 submit() 方法，在其 JavaScript 源代码中提交您的表单。

这是一个示例如何禁用表单提交并仅在按下按钮的情况下允许它。

```
<form id="form">
    <input type="text" />
    <input type="button" name="submit-button" value="Submit"/>
</form>​
<script type="text/javascript">
    var form = document.getElementById('form'),
        button = form['submit-button'];
    form.onsubmit = function(e) {
        return !!form.getAttribute('data-allow-submit');
    };
    button.onclick = function() {
        form.setAttribute('data-allow-submit', 1);
        form.submit();
    };
</script> 
```

[演示](http://jsfiddle.net/f0t0n/sKahQ/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T23:53:21.843

在文本字段上按回车键有时会触发表单提交。[看这里。](http://jsfiddle.net/m2FR6/)特别是如果这是表单中唯一的元素。控制回发的一种方法是将操作设置为空并使用 Javascript 自己触发事件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-19T22:45:17.520

检查结束表单标签的位置。我曾经遇到过这个问题，我最终发现表单本身中有一些“权限”代码阻止用户到达结束标记，因为他没有适当的权限级别来提交它。实际上，这留下了一个打开的表单标签，然后响应同一页面上其他地方的其他按钮。

# jquery - 我如何记住当前的 div 高度并相应地为下一个 div 高度设置动画？

> ID：11893576
> 
> 赞同：0
> 
> 时间：2012-08-09T23:47:30.327
> 
> 标签：jquery

由于内容不同，我有一个带有 3 个下拉菜单（并排）的导航，它们的高度不同。

目前我让它工作，以便悬停时的每个下拉菜单都从 0 开始并动画到它的高度。

我想通过记住当前高度来改进这一点，所以当鼠标悬停下一个下拉菜单时，它只会为不同的高度设置动画。

有人可以帮我吗？

这是我到目前为止所拥有的：

```
var expandLi = $('#header .nav .wrapper > ul > li.expand');

$(expandLi).hover(function(){       
    var startHeight = 0;
    var maxHeight = $(this).find('.expandPanel').height();
    $(this).find('.expandPanel').height(startHeight);       
    $(this).find('.expandPanel').animate({'height':maxHeight});
}, function(){ 
    $(this).find('.expandPanel').fadeOut();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:56:00.920

不知道我明白了，但你不能只添加到 startheight 吗？

```
var expandLi = $('#header .nav .wrapper > ul > li.expand'), startHeight = 0;

$(expandLi).hover(function(){
    var elem = $('.expandPanel', this),
        maxHeight = elem.height();
    elem.height(startHeight).animate({'height':maxHeight}, 1000, function() {
        startHeight += maxHeight;
    });
}, function(){ 
    var elem = $('.expandPanel', this),
        maxHeight = elem.height();
    elem.fadeOut(1000, function() {
        startHeight -= maxHeight;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T23:53:19.243

您可以使用 jquery“数据”功能为任何 html 标记保存任何附加数据。例如 ：

```
$('#id').data('xxx', 123456); 
```

# java - 打开一个新框架并关闭自己的框架

> ID：11893577
> 
> 赞同：-2
> 
> 时间：2012-08-09T23:47:31.733
> 
> 标签：java, swing, jframe, cardlayout

这是我使用的代码，但**我没有用 netbeans 做**任何事情；

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
    new NewJFrame().setVisible(true);       // to open a new frame
    Menu.setVisible(false);  //not working
    Menu.dispose();// not working
    Menu().setVisible(false); //not working
    new Menu().setVisible(true); // this don't give me error but nothing happens if I press the button only open the new frame
    // I tried all of these with "this." but nothing
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T00:23:26.007

对我来说很好

```
public class ParentFrame extends JFrame {

    private JButton btnBirth;

    public ParentFrame() {

        setTitle("Parent");
        setDefaultCloseOperation(DISPOSE_ON_CLOSE);

        setLayout(new GridBagLayout());

        setSize(200, 200);
        setLocationByPlatform(true);

        btnBirth = new JButton("Spawn");
        btnBirth.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {

                setVisible(false);
                ChildFrame child = new ChildFrame(ParentFrame.this);
                child.setVisible(true);

            }

        });

        add(btnBirth);

    }

}

public class ChildFrame extends JFrame {

    private JLabel lblGoo;
    private JFrame parent;

    public ChildFrame(JFrame parent) {

        this.parent = parent;

        setTitle("Child");
        setDefaultCloseOperation(DISPOSE_ON_CLOSE);
        setLayout(new GridBagLayout());

        setSize(100, 100);
        setLocationByPlatform(true);

        lblGoo = new JLabel("Goo");
        add(lblGoo);

        addWindowListener(new WindowAdapter() {

            @Override
            public void windowClosing(WindowEvent e) {

                ChildFrame.this.parent.setVisible(true);

            }

        });

    }

} 
```

**使用 Netbeans 表单编辑器更新**

```
public class ParentFrame extends javax.swing.JFrame {

    /**
     * Creates new form ParentFrame
     */
    public ParentFrame() {

        initComponents();

        setSize(200, 200);

    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
  // <editor-fold defaultstate="collapsed" desc="Generated Code">
  private void initComponents() {

    jButton1 = new javax.swing.JButton();

    setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
    setTitle("Parent");
    setLocationByPlatform(true);
    setPreferredSize(new java.awt.Dimension(200, 200));
    getContentPane().setLayout(new java.awt.GridBagLayout());

    jButton1.setText("Spawn");
    jButton1.addActionListener(new java.awt.event.ActionListener() {
      public void actionPerformed(java.awt.event.ActionEvent evt) {
        jButton1ActionPerformed(evt);
      }
    });
    getContentPane().add(jButton1, new java.awt.GridBagConstraints());

    pack();
  }// </editor-fold>

  private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {

        setVisible(false);
        new ChildFrame(this).setVisible(true);

  }

  // Variables declaration - do not modify
  private javax.swing.JButton jButton1;
  // End of variables declaration
}

public class ChildFrame extends javax.swing.JFrame {

private JFrame parentFrame;

/**
 * Creates new form ChildFrame
 */
public ChildFrame() {

    initComponents();

    setSize(100, 100);

}

public ChildFrame(JFrame frame) {

    this();

    parentFrame = frame;

}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

jLabel1 = new javax.swing.JLabel();

setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
setTitle("Child");
setLocationByPlatform(true);
setPreferredSize(new java.awt.Dimension(100, 100));
addWindowListener(new java.awt.event.WindowAdapter() {
  public void windowClosing(java.awt.event.WindowEvent evt) {
    doWindowClosing(evt);
  }
});
getContentPane().setLayout(new java.awt.GridBagLayout());

jLabel1.setText("Goo");
getContentPane().add(jLabel1, new java.awt.GridBagConstraints());

pack();
}// </editor-fold>

private void doWindowClosing(java.awt.event.WindowEvent evt) {                                 

    setVisible(false);
    parentFrame.setVisible(true);

}                                

// Variables declaration - do not modify
private javax.swing.JLabel jLabel1;
// End of variables declaration
} 
```

# powershell - 通过 power shell 检索 SSIS 2012 environmentvariable.name

> ID：11893586
> 
> 赞同：2
> 
> 时间：2012-08-09T23:48:17.927
> 
> 标签：powershell, ssis

我们正在使用 power shell 来部署我们的 2012 SSIS 包并在 SSIS 2012 服务器上具有环境变量。现在在项目部署期间，我试图遍历环境变量集合中的每个变量（foreach（$environment.Variables 中的$variable））。那没问题。我可以看到“EnvironmentVariable[@Name = 'something']”....但是尝试通过 $variable.Name 或 $variable.Key 从变量中检索名称（“something”）不起作用。我试过循环 $environment.Variables.Keys 仍然没有。自从我过去几年一直在使用 NANT 以来，我的 power shell 技能有点弱，但是有什么我没有看到的吗？

在此先感谢，安东尼

添加现有电源外壳脚本的片段。加粗的 $variable.Name 在 CreateETLPackages 任务中不起作用。这个脚本调用了很多设置和其他脚本，所以我没有包括所有内容。当在调试语句中返回 $variable.Name 时，它​​返回“EnvironmentVariable[@Name = 'something']”，正如我在原始帖子中提到的那样：

任务 CreateSSISFolder -Depends CreateSSISCatalog { if (!$script:SSISCanBeDeployed) { return }

```
# Create the project for the packages in the catalog
$catalog = $script:SSISCatalog
if ($catalog.Folders.Count -eq 0) {
    Write-Host "Creating folder $SSISFolderName ..."
    $script:SSISFolder = New-Object "Microsoft.SqlServer.Management.IntegrationServices.CatalogFolder" ($catalog, $SSISFolderName, "Folder for EDGE ETL packages")            
    $script:SSISFolder.Create()  
    Write-Host "... done"
} else {
    Write-Host "SSIS folder $SSISFolderName already exists; skipping create"
} 
```

}

任务 CreateSSISEnvironment -Depends CreateSSISFolder { if (!$script:SSISCanBeDeployed) { return }

```
# Create the environment in the project
$folder = $script:SSISFolder
$environment = $folder.Environments[$SSISEnvironmentName]
if ($environment -eq $null) {
    # Create the environment
    Write-Host "Creating environment $SSISEnvironmentName ..."
    $environment = New-Object "Microsoft.SqlServer.Management.IntegrationServices.EnvironmentInfo" ($folder, $SSISEnvironmentName, "Environment to configure the SSIS packages")
    $environment.Create()
    Write-Host "... done"

    # Now create the variables (Constructor args: variable name, type, default value, sensitivity, description)
    $environment.Variables.Add("TestDatabase", [System.TypeCode]::String, "Data Source=$SSISServerName.TestDatabase;User ID=<USERNAME>;Password=<PASSWORD>;Initial Catalog=EdgeAviTrack;Provider=SQLNCLI11.1;Persist Security Info=True;Auto Translate=False;", $false, "Connection string for TestDatabase database")
    $environment.Alter()

} else {
    Write-Host "Environment $SSISEnvironmentName already exists; skipping create"
} 
```

}

任务 CreateETLPackages -Depends CreateSSISFolder, CreateSSISEnvironment { if (!$script:SSISCanBeDeployed) { return }

```
# Get list of ETL .ispac files in the solution
$SSISProjects = GetListOfDeploymentFiles "*.ispac"
if ($SSISProjects -ne $null) {
    $folder = $script:SSISFolder
    $environment = $folder.Environments[$SSISEnvironmentName]
    if ($folder -ne $null) {
        foreach ($file in $SSISProjects) {
            # Read the ispac file, and deploy it to the folder            
            [byte[]] $projectFile = [System.IO.File]::ReadAllBytes($file.FullName)
            $nameParts = $file.Name.split(".")
            $curProjectName = [string]::join(".", $nameParts[0..($nameParts.length - 2)])
            Write-Debug "Deploying SSIS project $curProjectName"
            $project = $folder.DeployProject($curProjectName, $projectFile)

            if ($project.Status -ne "Success") {
                Write-Error "SSIS packages did not deploy correctly!"
            } else {
                # Get the full information set, rather than the short version returned from DeployProject
                $project = $folder.Projects[$curProjectName]
            }

            # Connect the project to the environment to stitch up all the connection strings
            if ($project.References.Item($SSISEnvironmentName, ".") -eq $null) {
                Write-Host "Adding environment reference to $SSISEnvironmentName ..."
                $project.References.Add($SSISEnvironmentName)
                $project.Alter()
                Write-Host "... done"
            }

            # Connect all the project parameters to the environment variables
            Write-Host "Adding connection string references to environment variables ..."

            foreach($varialble in $environment.Variables) {
                try {
                    $project.Parameters["CM." + **$varialble.Name**  + ".ConnectionString"].Set([Microsoft.SqlServer.Management.IntegrationServices.ParameterInfo+ParameterValueType]::Referenced, **$variable.Name**)
                }
                catch {
                    Write-Debug "Unable to set connection string **$variable.Name** on SSIS project $curProjectName"
                }
            }
            $project.Alter()
            Write-Host "... done"
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T00:15:50.487

好的，我发现了我的问题。看起来我正在尝试我需要使用 $($object.Name) 来获得我需要的东西。感谢那些伸出援手寻求帮助的人。

谢谢，安东尼

# regex - 正则表达式匹配perl

> ID：11893587
> 
> 赞同：0
> 
> 时间：2012-08-09T23:48:36.303
> 
> 标签：regex, perl

我正在尝试将字符串的一部分与是或否答案匹配。字符串要么：`'{"valid_js":"yes"...'`要么`'{"valid_js":"no"...'`。我试图得到“是”或“否”

我可以使用类似的东西：

```
/:."yes"/g 
```

还是我需要更复杂的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T01:10:15.733

尝试这样的事情......

```
if (m/"valid_js":"(yes|no)"/)
{
    # At this point $1 will contain either yes or no
    if ($1 eq 'yes')
    {
      # Answer is yes
    }
    else
    {
      # Answer is no
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T23:52:00.483

这是正则表达式的通用形式：

```
valid_js["]:["](yes|no)["] -> $1 
```

您可以使用该正则表达式来匹配或替换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T00:18:08.853

这应该可以帮助您：

```
$input = '{"valid_js":"yes"...';

if (($input =~ m/"valid_js":"(.*?)"/) && ($1 eq 'yes')) {
  print "1: yes\n";
}

$input = '{"valid_js":"no"...';

if (($input =~ m/"valid_js":"(.*?)"/) && ($1 eq 'yes')) {
  print "2: yes\n";
} 
```

[您可以在此处](http://ideone.com/DXG5F)测试代码。

# node.js - Node-soap 客户端和回调范围

> ID：11893588
> 
> 赞同：1
> 
> 时间：2012-08-09T23:48:37.473
> 
> 标签：node.js, soap, asynchronous, callback

我正在使用[milewise](https://github.com/milewise/node-soap)的 node-soap 客户端（顺便创建 API），但是我很难将回调的结果放到正确的范围内。

这是我现在拥有的代码：

```
function generateSoapRequest(req, res, next)
{ 
    soap.createClient('http://127.0.0.1:' + cfg.service_port + cfg.service_url_path,
    function(err, client) {
        client.CXIf.CXIf.CXProcessXML(
            {"XMLRequestData": {"CXLogon": {"UserID":"1901007", "Password":"2580", "LogonType":11 } } }, 
            function(err, result, body) {
            if (err) {
                console.log(err);
                return;
            }
            console.log(result);

            var cxresponse = result.XMLResponse[0].CXResponse;
            console.log('SessionID:' + cxresponse.SessionID + ' SessionInstanceID:' + cxresponse.SessionInstanceID);
        });
    });
}

function getVoiceMailInformation(req, res, next) {
    var cxresponse = generateSoapRequest(req, res, next);
    var something = doSomethingNext(cxresponse);
}

function doSomethingNext(cxresponse){....; return something;} 
```

基本上，当我启动getVoiceMailInformation() 时，它会创建一个soap 客户端并通过generateSoapRequest() 请求一些信息。下一步是获取该函数的结果（在上面的代码中没有实现，因为我不知道如何）并做其他事情。

我的问题是soap.createClient 是异步的，所以函数完成后回调会很好地触发。

最好的方法是什么？（也许这是一些微不足道的事情，但是 javascript 中匿名函数的范围是让我很生气的东西。）

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T00:37:33.837

基本上你不能做这样的事情：

```
var cxresponse = generateSoapRequest(req, res, next); 
```

因为您正在调用的函数调用异步代码，因此无法返回由该代码确定的值。解决此问题的正常方法是为函数提供一个额外的回调参数，该参数将在结果可用时随结果一起调用。它不一定*是*匿名函数；它可以是一个命名函数。在您的情况下，（假设您已修改`generateSoapRequest`为将回调作为其第四个参数并在结果准备好时调用它，您可以编写

```
generateSoapRequest(req, res, next, doSomethingNext); 
```

然后`doSomethingNext`将`cxresponse`作为参数调用。当然，由于`doSomethingNext`也是异步调用的，它也不能返回值，所以你必须对它应用相同的技术。

async 模块可以使这种事情变得更容易：特别是，当您有一堆必须按顺序运行的函数时，它的“瀑布”模式非常有用，每个函数都从前一个函数回调。

# php - 扩展 ArrayIterator 和修改数组存储

> ID：11893596
> 
> 赞同：2
> 
> 时间：2012-08-09T23:49:27.533
> 
> 标签：php, arrayiterator

在扩展 ArrayIterator 时，如何访问当前数组来修改它？或从中获取一些其他数据？

请考虑以下示例：

```
class Test extends ArrayIterator {
    public function in_array($key) {
        return in_array($key, ???);
    }
} 
```

是使用`$this->getArrayCopy()`而不是`???`好吗？有没有更好的解决方案来做到这一点？性能呢？

以及如何动态更改类数组？例如使用 array_walk。

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T21:35:01.493

请注意，`ArrayIterator`该类实现了`ArrayAccess`. 要修改数组，只需将 $this 视为一个数组：

```
$this['k'] = 'v'; 
```

不幸的是，诸如此类的函数`in_array`不适用于类似数组的对象。你需要一个实际的数组。 `getArrayCopy()`会工作，但我只会使用`(array) $this`.

编辑：作为评论中的 salathe 注释，`getArrayCopy()`更好，因为它总是获取内部数组，而`(array) $this`如果您使用`STD_PROP_LIST`标志，则行为会有所不同。

在性能方面，制作这样的数组副本确实会导致小幅减速。作为基准，我尝试了一个包含 1000000 个项目的 ArrayIterator，在我的机器上都花了大约 0.11 秒`getArrayCopy()`。另一方面，操作本身（在结果数组上）花费了 0.011 秒 - 大约是十分之一的时间`(array)`。`in_array`

我也试过这个版本的`in_array`功能：

```
class Test extends ArrayIterator {
    public function in_array($key) {
        foreach($this as $v)
            if($v == $key)
                return true;
        return false;
    }
} 
```

当搜索一个不存在的值时，该函数在我的机器上运行 0.07 秒，这是该算法的最坏情况。

The performance problems are too small to matter in most cases. If your situation is extreme enough that 100 nanoseconds or so per array element actually make a difference, then I would suggest putting the values you want to search for in the array keys and using `offsetExists()` instead.

# css - 知道为什么这些 DIV 会重叠吗？

> ID：11893603
> 
> 赞同：0
> 
> 时间：2012-08-09T23:50:08.653
> 
> 标签：css, html

不能为了我的身材这一生...

有谁知道为什么此页面底部的大红色 div 没有在其上方的 DIV 下方流动，（但红色 div “出现”在其后面，并被部分覆盖）？

页面顶部的 ABOUT div 在其上方的 div 后面流动，我遇到了同样的问题。我能找到解决它的唯一方法是定位：相对，并将顶部设置为 45px。相同的修复在这里有效，但我宁愿弄清楚为什么它没有在其上方的内容下方流动而不是破解它。它上面的 Div 应用了 clearfix，这个问题似乎与浮动没有任何关系......除了我完全没有想法，而且对 CSS 来说还是相当新的......

[http://firewalkcreative.com/2012/2012.html](http://firewalkcreative.com/2012/2012.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T00:12:23.733

紧接其上方的部分 (id="work") 具有样式“位置：相对；顶部：45px”。这将它从原本的位置向下移动了 45px，覆盖了下一节的顶部。

# php - 如何在 PHP 中进行此字符串替换

> ID：11893605
> 
> 赞同：0
> 
> 时间：2012-08-09T23:50:46.973
> 
> 标签：php, regex, replace, wildcard

我有一个字符串，该字符串中有一些格式的链接

`<a href="...some url...">Text</a>`

我想用不同的标记替换整个部分

问题是，虽然我可以得到要替换的标记的整体结构；还有网址，对我来说获得**“文本”**并不容易。如果我知道整个链接，那么我可能会做类似的事情。

'str_replace( $each_link , $my_new_markup , $the_original_string );'

并遍历每个链接，但我不能，因为我不知道 $each_link 到底是什么。

有没有办法寻找这样的东西？我认为它一定与 REGEX 有关，但我对此完全没有希望，我什至不知道这是否是正确的起点。

`<a href="...some url..."> [WILDCARD of some kind] </a>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T23:52:25.063

您可以查看类似这样的类，[Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)，您可以使用它来循环遍历元素，搜索特定的内部 html 或其他属性，然后对其进行更改。

看起来像这样的代码

```
foreach($html->find('a') as $element) {
  if ($element->innertext == $needle) {
    $element->innertext = $my_new_markup;
  }
} 
```

# .net - 在 .Net 中使用 NDDE 连接到 ThinkOrSwim

> ID：11893606
> 
> 赞同：6
> 
> 时间：2012-08-09T23:50:54.413
> 
> 标签：.net, dde

我使用以下单元格公式成功地将来自 ThinkOrSwim 交易平台的 DDE 数据接收到 excel 中：

```
=TOS|Last!AAPL 
```

但是，当我尝试在 .Net C# 应用程序中使用[NDDE 库](http://ndde.codeplex.com/)连接到 ThinkOrSwim DDE 时，我收到以下错误消息，这与 ThinkOrSwim 平台根本没有运行时收到的错误消息相同：

*客户端未能连接到“TOS|LAST”。确保服务器应用程序正在运行并且它支持指定的服务名称和主题名称对。*

与 NDDE 连接的完全相同的方法在 2009 年有效，但当我在 2012 年重新使用它时失败了。也许 ThinkOrSwim 在他们的应用程序中进行了一些更改以阻止它？我想知道下一步该做什么......要么找到一种方法让 NDDE 工作（更好），要么在我的 .Net 应用程序中运行一个 excel 电子表格（混乱）。

希望这里的人知道我可以继续使用 NDDE 并解决该连接问题。

[点击下载我创建的小代码库来演示这个问题（Visual Studio 2010）](https://docs.google.com/open?id=0B2-rHH8gGTDUeHJ4aGxueWVGamM)。页面加载后，您必须单击“文件”->“下载”。

Bounty 仅用于显示使用纯 .Net / windows api 解决方案的解决方案的答案。赏金不接受在 .Net 中自动化 excel。

从以下网址下载 ThinkOrSwim：[https](https://mediaserver.thinkorswim.com/installer/InstFiles/thinkorswim_jse6_installer.exe) ://mediaserver.thinkorswim.com/installer/InstFiles/thinkorswim_jse6_installer.exe 如果您需要登录详细信息，请私下联系我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T03:50:42.903

右键单击 thinkorswim.exe ，转到兼容性选项卡

> 选中底部的“以管理员身份运行”框。
> 
> 单击应用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T01:29:35.623

终于找到了解决方案：我必须以管理员身份运行 Visual Studio 才能使其在调试中工作。为了使 .exe 工作，我必须添加一个 app.manifest 文件，其中包含以下内容：

```
 <trustInfo xmlns="urn:schemas-microsoft-com:asm.v2">
     <security>
      <requestedPrivileges xmlns="urn:schemas-microsoft-com:asm.v3">
        <requestedExecutionLevel  level="requireAdministrator" uiAccess="false" />
      </requestedPrivileges>
    </security>
  </trustInfo> 
```

# android - 使用带有 SSL 证书文件的 UnboundID SDK 连接到 Android 应用程序中的 LDAP 服务器

> ID：11893608
> 
> 赞同：5
> 
> 时间：2012-08-09T23:51:01.007
> 
> 标签：android, ssl, ldap, certificate, unboundid-ldap-sdk

我正在尝试在我的 Android 应用程序中连接到 LDAP 服务器，并且正在使用 UnboundID SDK。最近，从不安全的 LDAP 更改为安全的 LDAP，我必须相应地更改应用程序。我已获得要验证的 SSL 证书文件。我已经使用该文件创建了一个密钥库，如此[处](http://blog.thoughtcrime.org/authenticity-is-broken-in-ssl-but-your-app-ha)所述。我在我的应用程序的资产文件夹中有这个密钥库文件，并且正在从中提取。下面的代码目前不起作用，并引发异常：

LDAPException(resultCode=01 (connect error), errorMessage=('尝试连接服务器时发生错误 place.myserver.com:636: javax.net.ssl.SSLHandShakeException: java.security.cert.CertPathValidatorException: Trust anchor for找不到认证路径

```
// code from above link
AssetManager assetManager = getApplicationContext().getAssets();
InputStream keyStoreInputStream = assetManager.open("yourapp.store");
KeyStore trustStore = KeyStore.getInstance("BKS");
trustStore.load(keyStoreInputStream, "myPassword".toCharArray());
TrustManagerFactory tmf = TrustManagerFactory.getInstance("X509");
tmf.init(trustStore);
// my code
SSLUtil sslUtil = new SSLUtil(tmf.getTrustManagers());
LDAPConnection connection = new LDAPConnection(sslUtil.createSSLSocketFactory());
connection.connect("place.myserver.com", 636); 
```

但是，代码段：

```
SSLUtil sslUtil = new SSLUtil(new TrustAllTrustManager());
LDAPConnection connection = new LDAPConnection(sslUtil.createSSLSocketFactory());
connection.connect("place.myserver.com", 636); 
```

确实有效（尽管我被高层告知这是不安全的）。我不太确定我在这里做错了什么，所以任何帮助将不胜感激。另外，如果有比我上面尝试做的更好的方法来完成这个，请随时告诉我:) 不过我想坚持使用 UnboundID 库，因为其余代码已经使用同样，如果我使用 TrustAllTrustManager，一切正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T08:32:45.137

确实，信任所有信任管理器并不安全。它便于测试目的，但它会允许坏人使用他为自己生成的证书设置自己的服务器，并使用它来冒充真实的服务器，或者作为中间人操作，拦截并可能警告任何客户端和真实服务器之间的通信。有了更严格的信任管理器，客户端应该拒绝假服务器将提供的伪造证书。

但是，不幸的是，您在这种情况下尝试使用的信任管理器似乎不喜欢您的服务器提供给它的证书。因为 trust all 信任管理器允许您建立连接，这意味着您的服务器确实具有证书并且能够执行 SSL 通信，但是您的信任管理器不喜欢该证书的某些内容。这几乎肯定不是 LDAP SDK 的问题，因为如果您使用相同的信任库，任何其他 LDAP API 都会出现同样的问题。

如果您查看结果，它会显示“未找到证书路径的信任锚”的消息。这意味着在信任库中既没有找到服务器正在使用的证书，也没有找到任何颁发者的证书。您需要将服务器证书（或其颁发者之一的证书）导入您正在使用的信任库。听起来您已经尝试过这样做，但是由于它不起作用，因此它的完成方式一定不太正确。我建议与目录服务器管理员合作，以确保您尝试根据服务器配置导入正确的证书。

# google-drive-api - 为 Oauth 交换代码时出错

> ID：11893609
> 
> 赞同：1
> 
> 时间：2012-08-09T23:51:15.957
> 
> 标签：google-drive-api

突然，在我的应用程序被授予用户访问权限并且授权码被传递到我的重定向 URL 之后，我在 Oauth 过程中遇到了一个错误。几周以来，我一直在使用相同的代码，并且运行良好。我很确定我没有做任何改变。

今天 Google Drive API 有问题吗？

错误发生在此处的 Python 代码中：

```
credentials = flow.step2_exchange(authorization_code) 
```

错误信息：

```
FlowExchangeError: Invalid response 400. 
```

从 Google 示例复制的整个 exchange_code 方法：

```
def exchange_code(authorization_code):
  """Exchange an authorization code for OAuth 2.0 credentials.

  Args:
    authorization_code: Authorization code to exchange for OAuth 2.0
                    credentials.
  Returns:
    oauth2client.client.OAuth2Credentials instance.
  Raises:
    CodeExchangeException: an error occurred.

  """

  logging.debug(authorization_code);

  flow = flow_from_clientsecrets(CLIENTSECRETS_LOCATION, ' '.join(SCOPES))

  flow.redirect_uri = REDIRECT_URI

  try:
    credentials = flow.step2_exchange(authorization_code)
    return credentials
  except FlowExchangeError, error:
    logging.error('An error occurred: %s', error)
    raise CodeExchangeException(None) 
```

使用 Oauth Playground，我得到以下错误响应：

```
HTTP/1.1 400 Ok
Status: 400
Content-length: 37
X-xss-protection: 1; mode=block
X-content-type-options: nosniff
X-google-cache-control: remote-fetch
-content-encoding: gzip
Server: GSE
Via: HTTP/1.1 GWA
Pragma: no-cache
Cache-control: no-cache, no-store, max-age=0, must-revalidate
Date: Fri, 10 Aug 2012 03:23:54 GMT
X-frame-options: SAMEORIGIN
Content-type: application/json
 Expires: Fri, 01 Jan 1990 00:00:00 GMT
{
  "error" : "unauthorized_client"
} 
```

任何想法为什么当代码像现在这样工作了数周时会开始发生这种情况？

谢谢，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T02:39:19.677

HTTP 响应代码 400 意味着您的请求在某种程度上是无效的，并且应该有一个更具描述性的错误消息告诉您出了什么问题。

也许 Python 库隐藏了完整的消息，我建议您使用 OAuth 2.0 Playground 尝试相同的请求并将其与您的进行比较：

[https://code.google.com/oauthplayground/](https://code.google.com/oauthplayground/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T15:04:56.870

我终于能够让代码再次工作。我将 GAE 应用程序版本恢复到我之前的版本。Oauth exchange_code 再次起作用。然后我将它带回 GAE 上的当前版本，没有对代码进行任何更改，它继续工作。

因此，当我最近在 GAE 中创建新版本且未更改代码时，oauth 进程确实停止工作。物有所值.....

# ruby - 在 Rails 上调度后台任务

> ID：11893610
> 
> 赞同：0
> 
> 时间：2012-08-09T23:51:44.900
> 
> 标签：ruby, ruby-on-rails-3

我的模型结构有三个模型-测试模板，测试实例和指标测试模板允许人们为测试创建基本模板，并且实例产生测试线程..每个测试线程都会有一组指标..之后我需要每天以特定的时间间隔安排测试（后台任务）。我是否必须创建一个新的计划表并完成计划并在每个时间点生成新实例，还是有其他方法？

我目前正在通过测试实例模型本身获取测试时间表，但无法安排测试，因为每个测试实例只有一个指标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:12:54.193

我发现在调度后台任务[时](https://github.com/javan/whenever/)非常有用。

# .net - 如何指定在 ASP.NET Web API 中是需要 JSON 还是 XML？

> ID：11893612
> 
> 赞同：11
> 
> 时间：2012-08-09T23:51:47.500
> 
> 标签：.net, web-services, rest, serialization, asp.net-web-api

本周我编写了两个 ASP.NET Web API 应用程序，它们都包含一个简单的控制器；我已经调整了每个以使它们工作，包括异常等等，但据我所见，它们的配置几乎相同。

其中一个返回 JSON，另一个返回 XML。我希望他们都返回 JSON！

我已经寻找了一些可以控制这种行为的配置，但我并不高兴。控制 ASP.NET Web API 使用的序列化类型的设置在哪里？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-10T00:08:16.277

它由调用客户端（例如浏览器或您的 .NET 客户端）在 Accept 标头中传递的内容定义：

> 接受：应用程序/json、应用程序/xml、文本/json、文本/xml

将偏好 JSON（如果可能）

因此，返回 XML 的客户端需要将`Accept`标头设置为上述或简单

> 接受：应用程序/json

应该做的伎俩

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T00:09:44.193

要将输出限制为仅一种格式化程序，请尝试此处的说明：

[http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization#removing_the_json_or_xml_formatter](http://www.asp.net/web-api/overview/formats-and-model-binding/json-and-xml-serialization#removing_the_json_or_xml_formatter)

在相关说明中，以下链接介绍了 ASP.NET Web API 如何根据发送给它的 HTTP 请求决定使用哪种输出格式，即它如何选择 JSON 而不是 XML：

[http://www.asp.net/web-api/overview/formats-and-model-binding/content-negotiation](http://www.asp.net/web-api/overview/formats-and-model-binding/content-negotiation)

如果您仍希望同时支持这两种格式，但需要确保您自己的客户端代码始终收到 JSON 返回，这可能会很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-26T14:01:14.550

两个写得很好的答案。我将在这个答案中解释默认行为。

```
What will be the default behavior ? i.e if "Accept: */*" 
```

来自[官方文档](https://docs.microsoft.com/en-us/aspnet/web-api/overview/formats-and-model-binding/content-negotiation#default-content-negotiator)。（完整阅读此文档以了解端到端）

> 如果仍然没有匹配，内容协商器只需选择第一个可以序列化类型的格式化程序。

总而言之，以下是顺序。

1.  应用程序查找`Accept`标题。如果接受标头值包含特定格式，它将使用该格式化程序。

2.  如果`*/*`为标题给出，则将选择列表中`Accept`的第一项。`config.Formatters`

加分点：如果您尚未编辑`config.Formatters`，则默认值为 json 值。

# outlook-addin - 使用 c# 以编程方式显示/隐藏 Outlook 中的 FROM 字段

> ID：11893617
> 
> 赞同：1
> 
> 时间：2012-08-09T23:52:08.250
> 
> 标签：outlook-addin, outlook-2007, outlook-2010

有没有办法以编程方式显示/隐藏 Outlook 中的 FROM 字段？

我想这样做的原因是因为到目前为止我编写的一些代码成功地设置了 FROM 字段。

但是，在第一次运行后，设置了 FROM 字段，但 UI 并未反映此更改。

隐藏然后重新显示 FROM 字段会强制 UI 更新。理想情况下，我想在 2007 年和 2010 年找到一种方法来做到这一点。

如果无法以编程方式隐藏和重新显示 FROM 字段，是否还有其他方法可以强制 UI 刷新？

```
//Get the explorer window and the currently selected item
Explorer activeExplorer = this.Application.ActiveExplorer();
MailItem origMsg = activeExplorer.Selection[1];

Recipients origRecipients = origMsg.Recipients;

if (origRecipients.Count == 1)
{
    AddressEntry address = origRecipients[1].AddressEntry;
    currentMsg.Sender = address;

    //currentMsg.SentOnBehalfOfName = origRecipients[1].Name; currentMsg.send
} 
```

# python - 如何将使用 poplib 捕获的电子邮件转发到不同的电子邮件地址？

> ID：11893618
> 
> 赞同：0
> 
> 时间：2012-08-09T23:52:10.200
> 
> 标签：python, poplib

我有以下脚本处理电子邮件并将它们保存到 csv 文件。脚本将有所改进，我将使用 mechanize lib 处理提取的电子邮件数据，以便在另一个 Web 界面上进行进一步处理。有时它现在可能会失败，我可以毫无问题地捕获该特定电子邮件，但是如何将被捕获的电子邮件转发到另一个地址，以便我可以手动处理它或查看它有什么问题？

这是脚本

```
import ConfigParser
import poplib
import email
import BeautifulSoup
import csv
import time

DEBUG = False
CFG = 'email'    # 'email' or 'test_email'

#def get_config():
def get_config(fnames=['cron/orderP/get_orders.ini'], section=CFG):
    """
    Read settings from one or more .ini files
    """
    cfg = ConfigParser.SafeConfigParser()
    cfg.read(*fnames)
    return {
        'host':    cfg.get(section, 'host'),
        'use_ssl': cfg.getboolean(section, 'use_ssl'),
        'user':    cfg.get(section, 'user'),
        'pwd':     cfg.get(section, 'pwd')
    }

def get_emails(cfg, debuglevel=0):
    """
    Returns a list of emails
    """
    # pick the appropriate POP3 class (uses SSL or not)
    #pop = [poplib.POP3, poplib.POP3_SSL][cfg['use_ssl']]

    emails = []
    try:
        # connect!
        print('Connecting...')
        host = cfg['host']
        mail = poplib.POP3(host)
        mail.set_debuglevel(debuglevel)  # 0 (none), 1 (summary), 2 (verbose)
        mail.user(cfg['user'])
        mail.pass_(cfg['pwd'])

        # how many messages?
        num_messages = mail.stat()[0]
        print('{0} new messages'.format(num_messages))

        # get text of messages
        if num_messages:
            get = lambda i: mail.retr(i)[1]                 # retrieve each line in the email
            txt = lambda ss: '\n'.join(ss)                  # join them into a single string
            eml = lambda s: email.message_from_string(s)    # parse the string as an email
            print('Getting emails...')
            emails = [eml(txt(get(i))) for i in xrange(1, num_messages+1)]
        print('Done!')
    except poplib.error_proto, e:
        print('Email error: {0}'.format(e.message))

    mail.quit() # close connection
    return emails

def parse_order_page(html):
    """
    Accept an HTML order form
    Returns (sku, shipto, [items])
    """
    bs = BeautifulSoup.BeautifulSoup(html)  # parse html

    # sku is in first <p>, shipto is in second <p>...
    ps = bs.findAll('p')                    # find all paragraphs in data
    sku = ps[0].contents[1].strip()         # sku as unicode string
    shipto_lines = [line.strip() for line in ps[1].contents[2::2]]
    shipto = '\n'.join(shipto_lines)        # shipping address as unicode string

    # items are in three-column table
    cells = bs.findAll('td')                        # find all table cells
    txt   = [cell.contents[0] for cell in cells]    # get cell contents
    items = zip(txt[0::3], txt[1::3], txt[2::3])    # group by threes - code, description, and quantity for each item

    return sku, shipto, items

def get_orders(emails):
    """
    Accepts a list of order emails
    Returns order details as list of (sku, shipto, [items])
    """
    orders = []
    for i,eml in enumerate(emails, 1):
        pl = eml.get_payload()
        if isinstance(pl, list):
            sku, shipto, items = parse_order_page(pl[1].get_payload())
            orders.append([sku, shipto, items])
        else:
            print("Email #{0}: unrecognized format".format(i))
    return orders

def write_to_csv(orders, fname):
    """
    Accepts a list of orders
    Write to csv file, one line per item ordered
    """
    outf = open(fname, 'wb')
    outcsv = csv.writer(outf)
    for poNumber, shipto, items in orders:
      outcsv.writerow([])     # leave blank row between orders
      for code, description, qty in items:
        outcsv.writerow([poNumber, shipto, code, description, qty])
        # The point where mechanize will come to play

def main():
    cfg    = get_config()
    emails = get_emails(cfg)
    orders = get_orders(emails)
    write_to_csv(orders, 'cron/orderP/{0}.csv'.format(int(time.time())))

if __name__=="__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T04:09:25.910

众所周知，POP3 仅用于检索（那些知道或知道电子邮件如何工作的人），因此为了发送消息而使用 POP3 毫无意义，这就是为什么我提到如何将使用 poplib 捕获的电子邮件消息转发到不同的电子邮件地址？作为一个问题。

完整的答案是 smtplib 可用于转发 poplib 捕获的电子邮件，您需要做的就是捕获消息正文并使用 smtplib 将其发送到所需的电子邮件地址。此外，正如 Aleksandr Dezhin 所引用的，我同意他的观点，因为一些 SMTP 服务器对它们处理的消息施加了不同的限制。

除此之外，如果您在 Unix 机器上，您可以使用 sendmail 来实现。

# php - PHP用户输入数据安全

> ID：11893622
> 
> 赞同：1
> 
> 时间：2012-08-09T23:52:59.297
> 
> 标签：php, sql, security, html-entities

我试图弄清楚在输入数据以及输出数据时哪些函数最适合在不同情况下使用。

当我允许用户将数据输入 MySQL 时，保护数据以防止 SQL 注入和/或任何其他类型的注入或黑客攻击的最佳方法是什么？

当我从数据库将数据作为常规 html 输出时，执行此操作的最佳方法是什么，因此脚本等无法运行？

目前我基本上只用

```
mysql_real_escape_string(); 
```

在将数据输入数据库之前，这似乎工作正常，但我想知道这是否是我需要做的全部，或者其他方法是否更好。

而此刻我使用

```
stripslashes(nl2br(htmlentities())) 
```

（大部分时间无论如何）用于输出数据。我发现这些对于我通常使用它们的工作很好，但是我遇到了 htmlentities 的问题，我希望能够分别输出一些 html 标签，例如：

```
<ul></ul><li></li><bold></bold> 
```

等等，但我不能。

任何帮助都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T01:59:34.137

我同意 mikikg 的观点，即您需要了解 SQL 注入和 XSS 漏洞，然后才能尝试保护应用程序免受这些类型的问题的影响。

但是，我不同意他关于使用正则表达式来验证用户输入作为 SQL 注入防止器的说法。是的，请尽可能验证用户输入。但是不要依赖它来防止注入，因为黑客经常破坏这些过滤器。另外，不要对你的过滤器太严格——很多网站不会让我登录，因为我的名字中有一个撇号，让我告诉你，当这种情况发生时，a** 会很痛苦。

您在问题中提到了两种安全问题。第一个是 SQL 注入。这个漏洞是一个“已解决的问题”。也就是说，如果您使用参数化查询，并且从不将用户提供的数据作为参数传递，那么无论发生什么，数据库都会为您做“正确的事情”。对于许多数据库，如果您使用参数化查询，则没有注入的机会，因为数据实际上并未嵌入在 SQL 中发送——数据以长度前缀或类似的 blob 沿线路未转义地传递。这比数据库转义函数性能要好得多，而且更安全。（注意：如果您使用在数据库上生成动态 SQL 的存储过程，它们也可能存在注入问题！）

The second problem you mention is the cross site scripting problem. If you want to allow the user to supply HTML without entity escaping it first, this problem is an open research question. Suffice to say that if you allow the user to pass some kinds of HTML, it's entirely likely that your system will suffer an XSS problem at some point to a determined attacker. Now, the state of the art for this problem is to "filter" the data on the server, using libraries like [HTMLPurifier](http://htmlpurifier.org/). Attackers can and do break these filters on a regular basis; but as of yet nobody has found a better way of protecting the application from these kinds of things. You may be better off only allowing a specific whitelist of HTML tags, and entity encoding anything else.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T00:28:05.037

这是当今最有问题的任务之一 :)

您需要了解 SQL 注入和其他攻击者方法的工作原理。[https://www.owasp.org/index.php/Main_Page](https://www.owasp.org/index.php/Main_Page)中对每种方法都有非常详细的解释，还有 PHP 的整个安全框架。

使用某些框架中的特定安全库也是不错的选择，例如在 CodeIgniter 或 Zend 中。

接下来，尽可能多地使用[REGEXP并将模式规则粘贴到特定的输入格式。](http://en.wikipedia.org/wiki/Regular_expression)

使用框架的准备好的语句或活动记录类。

`(int)$_GET['myvar']`如果您确实需要数值，请始终使用您的输入。

有很多其他规则和方法可以保护您的应用程序，但其中一条黄金法则是“永远不要相信用户的输入”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T00:07:09.633

在你的`php`配置中，`magic_quotes_gpc`应该是关闭的。所以你不需要`stripslashes`.

对于 SQL，请查看[PDO 的prepared statements](http://php.net/manual/en/pdo.prepared-statements.php)。

对于您的自定义标签，因为只有三个，您可以在`preg_replace`调用之后进行调用`htmlentities`以将它们转换回来，然后再将它们插入数据库。

# c# - 等待与请求序列号匹配的响应

> ID：11893624
> 
> 赞同：2
> 
> 时间：2012-08-09T23:53:19.593
> 
> 标签：c#, asynchronous, async-await

我正在尝试实现一个网络应用协议客户端库，由 TCP 连接上的二进制请求/响应组成，我希望这个客户端完全异步，依赖于 c#5 的 async/await 结构。

在 NetworkStream 上发送的每个请求都包含一个关联的应用序列号。对请求的响应必须指定相同的序列号，以便响应与原始请求匹配。当我发出请求 R1 时，对 R1 的响应当然可以在将来的任何时间到来，而对其他请求的其他响应可能会在对 R1 的实际响应之前上线。

我想在库的客户端代码中做的是简单愚蠢的事情

```
var resp = await SendSomeRequestAsync(req); 
```

SendSomeRequestAsync 将在线上异步发送请求（正确处理该部分）并以某种方式等待相关响应（与请求中发送的序列号匹配），例如（在 SendSomeRequestAsync 中）

```
var dummy = await _ns.WriteAsync(rawBytes, 0, rawBytes.Length); // _ns is a NetworkStream
var resp = await GetResponseMatchingSequenceNumberAsync(sequenceNumber); 
```

我有一个循环在客户端启动连接时启动，该连接正在异步读取连接上的传入响应：

```
 while (true)
 {
    Response rsp = await ReadNextResponseAsync(_ns);
    DispatchReceivedResponse(rsp);
 } 
```

我不知道如何实现 GetResponseMatchingSequenceNumberAsync，或者我是否已经完全错了。

希望我的问题足够清楚。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T00:07:49.657

我确实遇到了这个问题，以下看起来很干净：

创建一个`IDictionary<int,Response>`并在其中存储`TaskCompletionSource<Response>`实例。当您收到回复时，找到 TaskCompletionSource 并将其设置为已完成。我没有声明这段代码的线程安全。字典可能应该是并发类型的，或者至少在某种锁中访问。

```
public Task<Response> GetResponseMatchingSequenceNumberAsync(sequenceNumber)
{
   var tcs=new TaskCompletionSource<Response>();
   pendingTasksDictionary.Add(sequenceNumber,tcs);
   return tcs.Task;
}

private void ResponseHandler(int sequenceNumber,Response response)
{
   var pendingTcs=pendingTasksDictionary[sequenceNumber];
   //remove from dictionary
   pendingTcs.SetCompleted(response);
} 
```

# php - 使用循环和数组跨多个表的未发布总次数

> ID：11893627
> 
> 赞同：0
> 
> 时间：2012-08-09T23:53:25.073
> 
> 标签：php, mysql, arrays

我有一个函数可以从表中获取未发布记录的数量（工作正常）。但是现在我想获得多个表中未发布的事件总数。我想我可以使用 $tables = array('projects', 'testimonials') .etc 进行 foreach 循环。然后将它们各自的结果相加得到总数并返回？但是我不知道该怎么做，这种循环有点超出我的能力。

```
function publishCount($table) {
    $sql = mysql_query("SELECT COUNT(*) AS nb FROM ".$table." WHERE published='0' OR published=''") or die(mysql_error());
    $result = mysql_result($sql, 0);
    if (!$result == 0) { echo 'Awaiting to be published <span class="badge badge-important">'.$result.'</span>'; }
    else { echo 'Awaiting to be published <span class="badge badge-inverse">'.$result.'</span>'; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:59:33.847

您应该以这种方式编辑您的函数：

```
function publishCount($table) {
    $sql = mysql_query("SELECT COUNT(*) AS nb FROM ".$table." WHERE published='0' OR published=''") or die(mysql_error());
    $result = mysql_result($sql, 0);
    return $result;
} 
```

因此，您可以在`$tables`列表中循环：

```
$tables = array('projects', 'testimonials', [...]);
$nbResults = 0;
foreach($tables as $table) {
    $nbResults += publishCount($table);
}
if($nbResults == 0) {
    // ...
} else {
    // ...
} 
```

# c++ - 在 Webots C++ 中将速度设置为 DifferentialWheels 的问题

> ID：11893629
> 
> 赞同：1
> 
> 时间：2012-08-09T23:53:44.833
> 
> 标签：c++, webots

这里的小社区，但希望有人看到这一点。我正在尝试为 E-puck 进行 Webots 模拟的纯 C++ 实现。C++ 文档非常缺乏，我似乎无法找到解决此问题的方法（C 实现非常出色，但所有函数调用都针对 C++ 进行了更改）。

本质上，我只是想让一个简单的应用程序启动并运行……我想让 E-puck 向前发展。我将在下面发布我的全部代码......我所做的只是实例化一个机器人实体，打印出所有 IR 传感器值，并尝试将其向前移动。

问题是它不动。我认为会有一些将DifferentialWheel 对象链接到E-puck 的调用（类似于`camera = getCamera("camera")`调用）。

如果我注释掉我对 setSpeed 的调用，程序就会完美运行（不会移动，但会打印值）。如果我把它留在里面，一旦接到那个电话，模拟就会在一个步骤后冻结。老实说，我不确定我做错了什么。

```
// webots
#include <webots/Robot.hpp>
#include <webots/Camera.hpp>
#include <webots/DistanceSensor.hpp>
#include <webots/DifferentialWheels.hpp>
#include <webots/LED.hpp>

// standard
#include <iostream>

using namespace webots;

#define TIME_STEP 16

class MyRobot : public Robot
{
  private:
    Camera *camera;
    DistanceSensor *distanceSensors[8];
    LED *leds[8];
    DifferentialWheels *diffWheels;

  public: 
    MyRobot() : Robot()
    {
      // camera
      camera             = getCamera("camera");

      // sensors
      distanceSensors[0] = getDistanceSensor("ps0");
      distanceSensors[1] = getDistanceSensor("ps1");
      distanceSensors[2] = getDistanceSensor("ps2");
      distanceSensors[3] = getDistanceSensor("ps3");
      distanceSensors[4] = getDistanceSensor("ps4");
      distanceSensors[5] = getDistanceSensor("ps5");
      distanceSensors[6] = getDistanceSensor("ps6");
      distanceSensors[7] = getDistanceSensor("ps7");
      for (unsigned int i = 0; i < 8; ++i)
        distanceSensors[i]->enable(TIME_STEP);

      // leds
      leds[0] = getLED("led0");
      leds[1] = getLED("led1");
      leds[2] = getLED("led2");
      leds[3] = getLED("led3");
      leds[4] = getLED("led4");
      leds[5] = getLED("led5");
      leds[6] = getLED("led6");
      leds[7] = getLED("led7");
    }

    virtual ~MyRobot()
    {
      // cleanup
    }

    void run()
    {
      double speed[2] = {20.0, 0.0};

      // main loop
      while (step(TIME_STEP) != -1)
      {
        // read sensor values
        for (unsigned int i = 0; i < 8; ++i)
          std::cout << " [" << distanceSensors[i]->getValue() << "]";
        std::cout << std::endl;

        // process data

        // send actuator commands
// this call kills the simulation
//        diffWheels->setSpeed(1000, 1000);

      }
    }
};

int main(int argc, char* argv[])
{

  MyRobot *robot = new MyRobot();
  robot->run();
  delete robot;
  return 0;
} 
```

现在，如果这是 C 实现，我会调用`wb_differential_wheels_set_speed(1000, 1000);` 但是，该调用在 C++ 头文件中不可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:29:12.773

导致冻结的问题是由于使用了未初始化的变量 diffWheels。不需要初始化DifferentialWheels（以及Robot 和Supervisor）。

您必须将 MyRobot 类的基类更改为 DifferentialWheels

```
class MyRobot : public DifferentialWheels 
```

然后只需调用

```
setSpeed(1000, 1000) 
```

并不是

```
diffWheels->setSpeed(1000, 1000) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T00:05:17.637

看起来你好像没有初始化`diffWheels`，所以我想你会因为取消引用垃圾指针而得到一个段错误。试着放

```
diffWheels = new DifferentialWheels; 
```

在`MyRobot`.

# c# - Caliburn Micro 中动作调用的不可预测行为

> ID：11893631
> 
> 赞同：0
> 
> 时间：2012-08-09T23:54:20.050
> 
> 标签：c#, windows-phone-7, caliburn.micro

我使用 Caliburn Micro 为 Windows Phone 7 开发应用程序。

听到的是应用程序主要部分的代码。

**MainView**的一部分：

```
<Grid x:Name="LayoutRoot" Background="Transparent">
    <controls:Panorama>
        <controls:PanoramaItem x:Name="SubPanoramaItem"
                               DataContext="{Binding SubViewModel}">
            <StackPanel>

                <toolkit:ListPicker ExpansionMode="FullScreenOnly" 
                                    ItemsSource="{Binding DataModeList}">

                    <toolkit:ListPicker.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Tag}" />
                        </DataTemplate>
                    </toolkit:ListPicker.ItemTemplate>

                    <toolkit:ListPicker.FullModeItemTemplate>
                        <DataTemplate>

                            <StackPanel x:Name="item"
                                        Margin="5, 24, 0, 24"
                                        cal:Action.TargetWithoutContext="{Binding ElementName=SubPanoramaItem,
                                                                                  Path=DataContext}"
                                        cal:Message.Attach="[Event Tap] = [Action Tap($dataContext)]"
                                        Orientation="Horizontal">

                                <TextBlock FontSize="40" 
                                           Text="{Binding PopupText}" />
                            </StackPanel>

                        </DataTemplate>
                    </toolkit:ListPicker.FullModeItemTemplate>

                </toolkit:ListPicker>

            </StackPanel>
        </controls:PanoramaItem>

        <!-- Some other code -->
    </controls:Panorama>
</Grid> 
```

**主视图模型**：

```
public class MainViewModel: Screen
{
    public SubViewModel SubViewModel { get; private set; }

    public MainViewModel(SubViewModel subViewModel)
    {
        SubViewModel = subViewModel;
    }

    // some other code
} 
```

**子视图模型**：

```
public class SearchViewModel : Screen
{
    private ObservableCollection<DateModeItem> _dataModeList = 
        new ObservableCollection<DateModeItem>()
            {
                new DataItem
                { PopupText = "Item 1" },
                new DataItem
                { PopupText = "Item 2" },
                new DataItem
                { PopupText = "Item 3" },
                new DataItem
                { PopupText = "Item 4" }  
            };

    public ObservableCollection<DateModeItem> DataModeList
    {
        get
        {
            return _dataModeList;
        } 

        private set { _dataModeList = value; }
    }

    public void Tap(object dataContext)
    {
        var item = dataContext as DataItem;
        if (item != null)
        {
            var r = new Random();
            switch (item.PopupText)
            {
                case "Item 1":
                    item.Tag = r.Next(5);
                    break;
                case "Item 2":
                    item.Tag = r.Next(5, 10);
                    break;
                case "Item 3":
                    item.Tag = r.Next(10, 15);
                    break;
                case "Item 4":
                    item.Tag = r.Next(15, 20);
                    break;
            }
        }
    }
} 
```

**数据项**：

```
public class DataItem 
{
    public string PopupText { get; set; }
    public int Tag { get; set; }
} 
```

如您所见，我已将 Action 附加到 ListPicker 中 DataTemplate 的每个 StackPanel。当点击列表中的项目时，必须生成新的随机标签。这个标签被插入到 ListPicker 的文本框中。

而且这个动作表现得很奇怪。当我点击 1、2 和 4 项目时，什么也没有发生。当我点击 3 项时，应用程序抛出异常 - “没有找到方法 Tap 的目标”。当我使用 Silverlight Toolkit 中的 ListPicker 时会发生这种情况。

我还从 Telerik 的 RadConrols 库中试用了 RadListPicker。当我使用它时，动作方法的调用是不可预测的。有时动作调用正确的方法。有时什么都不会发生。我可以肯定地说 - 点击最后一项，它以正确的方式工作的频率降低。

到底是怎么回事？我无法理解。

**附加信息：**

我已经清理了我的应用程序中所有不必要的东西，只留下了我在上一篇文章中描述的代码。

现在，当我使用 ListPicker 时 - 什么都没有发生。列表在点击时没有响应。有时应用程序会抛出“No target found for method Tap”异常。当我使用 RadListPicker 时 - 几乎总是未调用操作，有时（很少）正确调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T20:41:32.233

当您使用 ListPicker 时，您需要添加一些 ElementConventions 以便将您的视图的操作绑定到您的视图模型。

添加绑定约定可以在 AppBootstrapper 类中完成。代码可能类似于：

```
 protected override void Configure()
    {
      ConventionManager.AddElementConvention<ListPicker>(ListPicker.ItemsSourceProperty, "SelectedItem", "SelectionChanged").ApplyBinding = 
        (viewModelType, path, property, element, convention) => {
         if (ConventionManager.GetElementConvention(typeof(ItemsControl)).ApplyBinding(viewModelType, path, property, element, convention))
         {
             ConventionManager.ConfigureSelectedItem(element, ListPicker.SelectedItemProperty, viewModelType, path);
             return true;
         }
         return false;
     }; } 
```

# c# - 为什么 ASP.NET 页面会是空的，但对于用户控件 (.ascx)？

> ID：11893632
> 
> 赞同：7
> 
> 时间：2012-08-09T23:54:27.083
> 
> 标签：c#, asp.net

我被雇来对一个网站做一些维护，我发现每个页面（.aspx）都有一个用户控件（.ascx）并且只有一个，就像一对一一样，每个.aspx都是空的除了用户控制。我看不到它的用途，因为每个用户控件都是整个页面。这样做有好处，还是没用？我怕说是没用的，因为我没有太多经验。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T00:10:03.873

**我的网站是这样构建的：我有几个 .ascx 文件和几个 .aspx 文件，它们只包含一个用户控件。**

现在还有一个特殊`.aspx`文件，它实际上是**一个单页应用程序**，我在上面注册了每个`.ascx`控件。我为单页应用程序和每个单独的“页面”都有文件的原因`.aspx`是，在开发过程中，我主要一次处理一个“页面”，所以我不需要加载所有其他模块应用程序。通过将每个模块保存在单独的`.ascx`文件中，我可以对模块进行更改，这些更改将无缝影响站点**的**单页版本以及`.aspx`我用于开发目的的页面。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T00:02:21.777

UserControl 很有用，因为它可以在整个应用程序的许多地方使用。如果仅特定于一页，则用户控件将失去其用途。

用户控件应该是模块化的，并且应该设计为可以轻松地在其他页面中使用。

从您维护的应用程序的声音来看，您必须查看用户控件是否对页面是唯一的，或者是否通过应用程序使用相同的用户控件并决定移动内容。

# c++ - Qt Creator 性能问题

> ID：11893633
> 
> 赞同：2
> 
> 时间：2012-08-09T23:55:08.970
> 
> 标签：c++, performance, qt, user-interface

每个人都对 Qt 有多棒赞不绝口，我真的很想使用它。然而，在下载它并尝试构建一个小小的 Hello World 应用程序后，Qt Creator 的性能却缓慢到无法使用的地步。

1.  主要问题是当我从“编辑”（代码视图）切换到“设计”（表单视图）时，每次执行此操作时表单绘制大约需要 30-45 秒。 [这是发生这种情况的视频。](http://www.youtube.com/watch?v=a4sKgNEbedo)

2.  按 CTRL-R 运行我的应用程序需要 30-45 秒才能显示我的应用程序。

如果有人遇到过这些问题，请提出建议！我真的很想使用 Qt。

**更新：**关闭 Qt Creator 后，我注意到 Hg Workbench (Mercurial) 需要 1-2 分钟才能打开（通常是即时的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T05:16:31.597

我建议您从命令提示符运行应用程序，即 qtcreator。由于 qDebug 将打印出有关正在执行的操作的关键信息，您可能有机会了解导致减速的确切原因。

以防万一，试试运行良好的新 QtCreator2.5.1。即使这不起作用，操作系统也可能有问题。检查在后台运行的任何可能阻塞处理器的程序。

# php - URL 重写 (WAMP)：从 URL 中删除“index.php”（对于具有自定义文件夹结构的 Codeigniter 项目）

> ID：11893635
> 
> 赞同：2
> 
> 时间：2012-08-09T23:55:32.860
> 
> 标签：php, apache, .htaccess, codeigniter, url-rewriting

首先，我知道这个问题可能已经被问了 150 万次，所以我用谷歌搜索了它。
我已经阅读并尝试了*一堆*建议，但问题仍然存在。

这是我们的第一个内部 CI 项目。
使用非标准（在 CI 世界中）目录树创建了一个骨架“项目”，以更好地匹配我们其他现有项目的文件结构。
它是这样的：

> ../
> /www
> - index.php
> /application
> - /config
> - /controllers
> - /...etc
> - /lib
> - - /vendor
> - - - /codeIgniter
> - - - - /2-1-2
> - - - - - /system
> - - - - - - /...等
> - /library
> - /views
> - /...等

我将它复制到我的机器（WAMP）并测试了几个控制器。
一切似乎都很好。唯一的问题是 url 中仍然需要*index.php 。*
我希望能够使用*http://localhost/project/controller/method*，而不是需要*http://localhost/project/ **index.php** /controller/method*。

我确认我的 http.conf 有`AllowOverrride All`wamp */www*，并且我在*/www*`.htaccess`目录中添加了一个文件......无济于事:(

 *```
### \www\.htaccess ### 
# After many tries, I reverted to these simple 4 lines and stopped here

RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

我有这个项目的别名

```
### \wamp\alias\bomProject.conf ###

Alias /bomProject/ "c:/wamp/NetBeansProjects/bomProject/www/" 

<Directory "c:/wamp/NetBeansProjects/bomProject/www/">
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all
        Order allow,deny
    Allow from all
</Directory> 
```

这个别名允许我成功浏览*http://localhost/bomproject*上的项目。
我已经`$config['index_page']`在我的*/config/config.php*中设置为`''`

我也尝试过在 config.php 中更改`$config['base_url'] = ''`
……`$config['base_url'] = 'http://localhost/bomProject/'`都*没有*奏效。

**我的怀疑**是问题归结为我们的目录树，但**我对 htaccess**和正则表达式太缺乏经验，不知道如何解决它。

**[编辑]：**
@chris-clower 向我介绍了*config/routes.php*，所以我稍微阅读了一下。
很高兴知道！我非常感激，我喜欢和他们一起玩......只是，根据文档（*至少我是如何理解的*），我不认为路线是我问题的解决方案。
当尝试“ *localhost/bomProject/{controller}* ”...其中*{controller}*显然是一个真正的控制器名称...我仍然收到这个 404 错误：“*未找到 - 请求的 URL /wamp/NetBeansProjects/BomProject/www在此服务器上找不到 /index.php/{controller}。* "
**[/EDIT]:**

任何帮助将***不胜***感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T00:06:42.590

您需要查看`/application/config/routes.php`并在那里添加您的路线，类似于：

```
$route['default_controller'] = 'index';
$route['admin'] = 'admin/index/';
$route['admin/(:any)'] = 'admin/$1';
$route['forum'] = 'forum/index/';
$route['(:any)'] = 'index';
$route['404_override'] = ''; 
```

至于您的`.htaccess`，它看起来不错，不需要对此进行任何更改。*

# objective-c - 目标 C：录音循环

> ID：11893641
> 
> 赞同：1
> 
> 时间：2012-08-09T23:56:02.103
> 
> 标签：objective-c, ios, cocoa, avfoundation

我想知道我的错误，或者我是否忘记了代码中的某些内容......

```
-(IBAction)playRecord
{
    NSLog(@"stop rec");
    [recorder stop];
    [self playSound];

}
-(void)playSound{
    NSLog(@"play");
    recorderFilePath = [NSString stringWithFormat:@"%@/MySound.caf", DOCUMENTS_FOLDER];
    NSURL *urlRecord = [NSURL fileURLWithPath:recorderFilePath isDirectory:NO];
    NSError *errorRecord;
    soundRecord = [[AVAudioPlayer alloc] initWithContentsOfURL:urlRecord error:&errorRecord];
    [soundRecord prepareToPlay];
    [soundRecord play];
    soundRecord.delegate = self;
    [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(stopPlayRec) userInfo:nil repeats:YES];
}

-(void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag
{
    [recorder prepareToRecord];
    [recorder record];
    NSLog(@"Finish");
}

-(void)stopPlayRec
{
    if ([recorder peakPowerForChannel:(0)] <= (-30) && [recorder peakPowerForChannel:(0)] >= (-43))//detecting voice then record
    {
            NSLog(@"test");
            [self playRecord];

    }
    else 
        {
            if ([recorder peakPowerForChannel:(0)] >= (-160))
            {
                NSLog(@"playing");

            }
        }
} 
```

在我的`viewdidload`我已经初始化了我的“开始录制”功能，

```
[self startRecording]; 
```

所以在我的视图加载的那一刻它开始录制..然后在我按下播放按钮后它将播放我录制的文件......我的代码流程是在我按下播放按钮之后它现在将循环回录制如果如果 PeakPowerForChannel 为 -30 到 -43（检测到声音），那么如果 PeakPowerChannel 为 -160 或更低，它将播放录制的文件......现在，我的问题是当我录制超过 5 次时，我的我现在无法听到我的录音文件，我不知道是什么问题..请帮助..我完全没有...

# asp.net - 如果继承 BaseController，则带有 OnException 的 ASP.NET MVC4 控制器不起作用

> ID：11893644
> 
> 赞同：2
> 
> 时间：2012-08-09T23:56:33.180
> 
> 标签：asp.net, asp.net-mvc, exception-handling, aop

我有一个`UsersController`, with `OnException`（有效），但如果我从`Controller`继承`BaseController`，`OnException`即使我把它放在`BaseController`.

基本上我想让我的所有控制器都继承，`BaseController`所以我可以在那里只有一个`OnException`处理程序，它可以捕获所有内容......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T00:59:43.510

您不需要从自定义基控制器类继承，以便让所有控制器以相同的方式处理异常。您可以使用 ActionFilter 来完成。

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, 
    AllowMultiple = true, Inherited = true)]
public class CustomHandleErrorAttribute : HandleErrorAttribute
{
    public override void OnException(ExceptionContext context)
    {
        // do custom exception handling here
        // to return View("Error"), you can just do this:
        context.Result = new ViewResult { ViewName = "Error" };
    }
} 
```

您可以使用此 Global.asax 将其应用于库中的所有控制器：

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    //filters.Add(new HandleErrorAttribute()); // default MVC setting
    filters.Add(new CustomHandleErrorAttribute());
} 
```

# php - 如何在 Wordpress 循环中只运行一次 PHP 代码？

> ID：11893645
> 
> 赞同：0
> 
> 时间：2012-08-09T23:56:33.990
> 
> 标签：php, wordpress, bbpress

我正在尝试在 bbpress （wordpress 论坛）中循环运行一些 PHP 代码

我试图运行的代码是一个侧边栏：

```
<?php if ( function_exists('dynamic_sidebar') && dynamic_sidebar(5) ) : else : ?>
    <p class="empty-content-area">
        <span>Oops! No sweet stuff in here</span><br />
        <a href="wp-admin/widgets.php">Add a widget</a>
    </p>
<?php endif; ?> 
```

我希望它只在第一个回复下方显示一次，在第二个、第三个回复等之后不再显示。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T00:01:39.137

你可以做这种快速而肮脏的事情：

```
<? if ($c++ == 0 && function_exists('dynamic_sidebar') && dynamic_sidebar(5) ) { ?>
    <p class="empty-content-area">
        <span>Oops! No sweet stuff in here</span><br />
        <a href="wp-admin/widgets.php">Add a widget</a>
    </p>
<? } ?> 
```

# java - 为什么需要给Set.toArray指定一个数组，返回一个数组呢？

> ID：11893649
> 
> 赞同：0
> 
> 时间：2012-08-09T23:56:47.220
> 
> 标签：java, arrays, string, collections

我对 Set （和其他集合）中 toArray(T[]) 方法的设计和正确使用感到困惑。如果我有一组字符串，为什么我需要指定一个大小为 0 的字符串数组，如果该方法无论如何都要分配一个新的字符串数组？

```
Set<String> stringSet = new Set<String>();
// bla bla bla, insert Strings to set
String[] array = stringSet.toArray(new String[0]); 
```

有没有更好的方法来获取数组而不分配额外的数组或显式类型转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T00:01:59.103

该参数用于检测将要创建的数组的类型。

你可能会争论，为什么 JVM 不使用 stringSet 的泛型类型参数来检测类型。答案是在运行时泛型类型参数由于类型擦除而未知，即 Set<String> 在编译后变为 Set。

toArray(new Object[0]) 在功能上与 toArray() 相同。

如果集合适合指定的数组，则在其中返回。否则，将使用指定数组的运行时类型和该集合的大小分配一个新数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T00:21:39.903

如果您使用的是集合，您可能不知道您的`set`（或任何其他集合）将拥有的确切条目数。如果您从一开始就知道条目的数量，为什么不使用数组而不是集合呢？

在我看来，该方法是一种使用集合创建数组的简单方法，您*事先*`toArray()`不知道它将有多少条目。

# silverlight - Silverlight RadComboBox 选择后保持打开状态

> ID：11893650
> 
> 赞同：4
> 
> 时间：2012-08-09T23:56:52.920
> 
> 标签：silverlight, mvvm, combobox, telerik, radcombobox

Silverlight MVVM。我有一个 RadCombobox，对于每个选择，我在另一个数据网格中添加一个新行。我在我的 ViewModel 类中添加了必要的代码，这部分正在工作。我想要执行的是：

1.  在控件具有焦点时保持组合框打开以允许用户重复选择（我将 IsDropDownOpen 绑定到一个方法并将 SelectedItem 属性中的设置为 true 但在选择后它仍然关闭）

2.  取消选择选中的项目以允许重复选择。我添加了事件 SelectionChanged 并在 MainPage.xaml.cs 中添加了代码，但在我的 ViewModel 中寻找解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:05:55.450

可以说，

```
 IsDropDownOpen = {Binding IsDropDownFromViewModel} 
```

此外，假设 getter`IsDropDownFromViewModel`包含打开下拉菜单的所有条件，并且始终返回正确的下拉状态。

现在，您需要做的就是在`PropertyChanged`您认为下拉菜单应该打开但已关闭的任何时间/任何时间触发此属性的事件，反之亦然。

不幸的是，我没有得到您的确切情况，但让我们假设是这种情况（您应该使用类似的方法来解决您遇到的任何问题）。

示例场景：

> 当您选择一个项目时，下拉菜单关闭，它旨在保持打开状态

在上述情况下，当用户选择一个项目时，应调用 selectedItem 的相应绑定属性的设置器，这就是我们编写通知代码的地方

```
 public SelectedItemType SelectedItemInViewModel {
    get{ 
     return _selectedItemVM; 
   },
   set{
     _selectedItemVM=value;
     NotifyPropertyChanged("IsDropDownFromViewModel");
   }
 } 
```

它的作用是，它将告诉 radComboBox 的`IsDropDownOpen`属性重新评估它在 RHS 上的绑定表达式并获取它的新值

希望您了解该方法的要点，如果没有发表评论。

# c++ - 如何在 C++ 中存储长的十六进制值消息

> ID：11893656
> 
> 赞同：0
> 
> 时间：2012-08-09T23:57:54.660
> 
> 标签：c++, hex

我正在学习加密课程，其中一项作业要求我们对一堆十六进制密文进行异或运算并尝试找到加密的消息。

我知道您可以在 int 或 long 前面执行 '0x' 以在变量中保存十六进制值，但是如果我的消息这么长怎么办：

271946f9bbb2aeadec111841a81abc300ecaa01bd8069d5cc91005e9fe4aad6e04d513e96d99de2569bc5e50eeeca709b50a8a987f4264edb6896fb537d0a716132ddc938fb0f836480e06ed0fcd6e9759f40462f9cf57f4564186a2c1778f1543efa270bda5e933421cbe88a4a52222190f471e9bd15f652b653b7071aec59a2705081ffe72651d08f822c9ed6d76e48b63ab15d0208573a7eef027

我会溢出。有没有办法将整个消息放入一个变量中？我可以将消息拆分为子部分，但我更喜欢它是可变的而不是多个（如果可能的话）。我尝试使用字符串来保持按摩，但我如何使用运算符'^'来进行异或？

还是有我不知道的更简单的技术？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T00:03:02.873

对于这样的事情，您通常会使用字符串或 a`vector<char>`来保存数据。您不能将整个字符串/向量用作 的操作数`^`，但可以一次应用一个字节。

如果你想简化其余的代码，你可以创建一个重载的类`operator^`来做一个字节异或，所以你的代码看起来像`result = key ^ message;`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T00:06:27.307

您可以使用一个任意大小的整数数组，并一次将运算符应用于一个元素（这可能比字符数组更有效）。@JerryCoffin 将其包装在带有重载运算符的类中的想法是一个很好的想法，无论您使用的实际表示如何。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T00:02:29.910

把它放在一个单独的文本文件中

将文件读入缓冲区

将 ascii 字符转换为十六进制值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T00:51:29.470

Jerry & Scott 有合理的建议。另一种选择是使用现有的库：例如，位于[http://gmplib.org](http://gmplib.org)的 GNU GMP 任意精度数学库，它支持 XOR（参见[http://gmplib.org/manual/Integer-Logic-and- Bit-Fiddling.html#Integer-Logic-and-Bit-Fiddling](http://gmplib.org/manual/Integer-Logic-and-Bit-Fiddling.html#Integer-Logic-and-Bit-Fiddling)）和以十六进制读取的“scanf”样式函数（请参阅[http://gmplib.org/manual/Formatted-Input-Strings.html#Formatted-Input -Strings](http://gmplib.org/manual/Formatted-Input-Strings.html#Formatted-Input-Strings) )，并明确旨在为密码学提供出色的支持。

# java - Java - 如何从绝对路径中获取文件名并删除其文件扩展名？

> ID：11893659
> 
> 赞同：6
> 
> 时间：2012-08-09T23:58:16.747
> 
> 标签：java, string, file

我这里有一个问题，我有一个包含值 C:\Users\Ewen\AppData\Roaming\MyProgram\Test.txt 的字符串，我想删除 C:\Users\Ewen\AppData\Roaming\MyProgram \ 这样就只剩下 Test 了。所以问题是，我怎样才能删除字符串的任何部分。

谢谢你的时间！:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T23:59:55.677

如果您严格使用文件路径，请试试这个

```
String path = "C:\\Users\\Ewen\\AppData\\Roaming\\MyProgram\\Test.txt";
File f = new File(path);
System.out.println(f.getName()); // Prints "Test.txt" 
```

* * *

> 谢谢，但我也想删除 .txt

好吧，试试这个

```
String fName = f.getName();
System.out.println(fName.substring(0, fName.lastIndexOf('.'))); 
```

请参阅[此](https://stackoverflow.com/questions/941272/how-do-i-trim-a-file-extension-from-a-string-in-java)以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T00:09:02.813

班级拥有所有必要的`String`权力来处理这个问题。您可能感兴趣的方法：

`String.split()`, `String.substring()`,`String.lastIndexOf()`

此处描述了这 3 个以及更多：http: [//docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html)

考虑一下，你很快就会让它工作:)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-12T08:10:30.577

我建议使用[FilenameUtils.getBaseName(String filename)](http://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/FilenameUtils.html#getBaseName%28java.lang.String%29)。该类`FilenameUtils`是[Apache Commons IO](https://commons.apache.org/proper/commons-io/)的一部分。

根据文档，该方法“将处理 Unix 或 Windows 格式的文件”。“返回最后一个正斜杠或反斜杠之后和最后一个点之前的文本”作为 String 对象。

```
String filename = "C:\\Users\\Ewen\\AppData\\Roaming\\MyProgram\\Test.txt";
String baseName = FilenameUtils.getBaseName(filename);
System.out.println(baseName); 
```

上面的代码打印`Test`。

# javascript - 在单页应用程序上进行客户端路由的正确方法是什么？

> ID：11893662
> 
> 赞同：-1
> 
> 时间：2012-08-09T23:58:55.313
> 
> 标签：javascript, html, url-routing, single-page-application

我正在我的本地机器上创建一个单页应用程序 (SPA)，但在文档根目录下几个级别。因此，例如，我的索引页将位于`http://localhost/projects/foo/index.html`.

我正在使用[Davis.js](http://davisjs.com/)通过历史 API 进行客户端路由，它建议对其路由使用绝对 URL。例如`<a href="/hello/world">`触发`/hello/world`路由。

这是一个问题，因为当您单击位于 上的链接时`http://localhost/projects/foo/index.html`，它会将 URL 更改为`http://localhost/hello/world`，这显然是不正确的，即使应用程序继续正常运行（因为您实际上从未离开过该页面）。但是，刷新页面，您将收到 404 错误，因为该文件`http://localhost/hello/world`不存在。

使用相对链接，like`<a href="hello/world">`更接近标记。单击该链接会将 URL 更改为`http://localhost/projects/foo/hello/world`，但不会*触发*路由`/hello/world`。再次单击相同的链接，您会发现自己位于`http://localhost/projects/foo/hello/hello/world`(double hello)。同样，不是理想的行为。

现在，Davis 正在匹配来自域根的路由，所以`/hello/world`只会在 url 为`http://somewhere.tld/hello/world`. 但即使我直接从文档根目录中提供服务，仍然`/hello/world` *存在实际不存在*的问题。

目前，我当前的解决方案是强制 Davis 使用基于哈希的路由而不是基于路径：`http://localhost/projects/foo/index.html#/hello/world`. 这可以 100% 正常工作，因为浏览器将始终加载`index.html`，Davis 将始终看到`/hello/world`. 此外，只要用户打开了 Javascript，包含该哈希片段的链接将始终有效。（我不担心那种情况）

我可以看到的一种解决方案是有一个基本 URL `http://localhost/projects/foo/`，让服务器将该目录中的所有请求重写为`index.html`，并让所有链接和路由指向并匹配基本 url + 片段（如`http://localhost/projects/foo/hello/world`）。所以从技术上讲，所有这些 URL*确实*存在，它们都指向同一个文件。然而，这需要**(a)**一个能够重写 URL 的服务器为 SPA 服务（url-hash 解决方案甚至不需要服务器，只需要一个浏览器）和**(b)** SPA 跟踪它的“位置”是相对于文档根目录的（这对我来说是一件*非常*糟糕的事情）。

所以我的问题是，做客户端路由的**正确**方法是什么，与应用程序在服务器上的位置无关，最好不需要静态托管以外的服务器端技术。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T21:50:06.760

我认为最好的方法是让您使用 Davis 定义的任何客户端路由也可以在服务器上使用。因此，如果您有一个客户端路由，`/foo/bar`那么理想情况下，服务器应该能够对相同的路由做出明智的响应。

这通常比听起来简单，并且如果您使用的是与语言无关的模板语言（例如 mustache），则不必涉及大量重复。

如果这是不可能的，那么有一些解决方法，以便服务器为您的客户端仅返回 404 以外的其他路由。然而，这些对我来说总是感觉像是解决方法而不是解决方案。显然，答案取决于您正在构建什么样的应用程序。

至于在相关路线上使用 Davis，我承认这是我从未使用过的东西，因此不能说它的支持程度如何。戴维斯的设计中没有任何特别的东西会阻止它工作。

但是，我刚刚在浏览器中使用了 pushState api，它的相对路径似乎确实有些奇怪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T00:56:00.730

我在单页应用程序和客户端路由方面也有类似的经历。

在稍微考虑了这个问题之后，我最终意识到，为了 SEO，您实际上会希望您的服务器在 Davis 建议的绝对 url 处呈现内容。这样，Google 抓取工具实际上可以继续抓取您的网站，就好像它不是单页应用程序一样。

如果你说你不能做任何服务器端的技术，那么问题就会困难得多。您提出的解决方案似乎都很合理。

您可能还希望在此链接上阅读有关[Google 的爬虫规范的信息](https://developers.google.com/webmasters/ajax-crawling/docs/specification)。

# wcf - 基地址，配置文件

> ID：11893663
> 
> 赞同：0
> 
> 时间：2012-08-09T23:58:55.993
> 
> 标签：wcf, app-config

我的 Web 服务在 localhost 上测试良好 - 所以真正的交易！有人可以帮我理解我需要检查和设置的东西吗？如果需要，我想知道如何将 web.config 用于 baseAddress，以及 web 服务器上 app.config 中的设置。

```
<service name="WebServEnc.ServLib.Service" behaviorConfiguration="MyServiceTypeBehaviors" >
      <!-- Add the following endpoint.  -->
      <!-- Note: your service must have an http base address to add this endpoint. -->
      <endpoint contract="WebServEnc.Servlib.IServ" binding="basicHttpBinding" address="http://mysite.com" />

    </service> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T00:04:57.417

如果您在 IIS 中托管它或在您的主机中指定了基地址，则不需要地址。您可以将其保留为空白。

在这里查看更多信息：http: [//msdn.microsoft.com/en-us/library/ms733932.aspx](http://msdn.microsoft.com/en-us/library/ms733932.aspx)

# php - PHP Cronjob 不执行

> ID：11893665
> 
> 赞同：1
> 
> 时间：2012-08-09T23:59:10.033
> 
> 标签：php, linux, cron

我正在运行 Ubunutu Linux 服务器、PHP5、Apache2，并且无法让任何类型的 cronjob 通过 crontab 运行。

我使用编辑 crontab

> crontab -e

我保存要运行的文件：

> */5 * * * * php /home/user/public_html/crx/cronx.php

它保存得很好。我可以从控制台运行文件并顺利完成。我什至找不到该文件的任何现有日志。我检查了 cron 正在运行、停止和启动......没有变化。

当前的 php 文件只是一个简单的测试脚本，它将单行插入到数据库中。

我检查了文件的权限并进行了读写。我完全被难住了。我似乎无法通过 cron 运行任何东西。有什么我可以运行来测试权限的吗？

**编辑** 我也尝试过以下命令

> *   *   *   *   *   /usr/bin/php /home/user/public_html/crx/cronx.php

我使用 whereis php 和 which php 来定位并确认它都在正确的区域运行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T00:01:49.290

`*`你的时代价值观太多了。

此外，cron 可能没有`PATH`正确设置来使用 PHP。

而是尝试：

```
*/5 * * * * /usr/bin/php /home/user/public_html/crx/cronx.php 
```

`/usr/bin/php`PHP的实际路径在哪里。您可以从控制台运行`which php`以查看您应该使用的 PHP 二进制文件的路径。

编辑：为了排除故障，可以尝试以下几件事：

```
# see if cron is running just by having it create a file
*/5 * * * * touch /tmp/crontab-$(date +%s) 
```

另外的选择：

将 PHP 脚本的权限设置为`755`，并将开头更改为：

```
#!/usr/bin/php -q
<?php
// rest of script 
```

然后将您的 cron 选项卡更改为：

```
*/5 * * * * /home/user/public_html/crx/cronx.php 
```

我仍然不确定 cron 是问题还是 PHP 脚本的运行。

# java - Java中的运行时编译

> ID：11893666
> 
> 赞同：1
> 
> 时间：2012-08-09T23:59:13.790
> 
> 标签：java

我已经开始将我的服务器端 C# 应用程序移植到 Java。它所做的其中一件事是使用 CodeDOM 框架动态生成代码，将其编译为字节码，并在运行时加载类。还有一些场景我们使用表达式树来进行轻量级的动态生成方法。

我做了一些研究，我相信我最接近的是 Javaassist。如果有任何其他支持动态代码生成和编译的框架，我将不胜感激。我是 Java 世界的新人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T00:16:55.610

有 Java 编译 API（例如，[http://www.accordess.com/wpblog/an-overview-of-java-compilation-api-jsr-199/](http://www.accordess.com/wpblog/an-overview-of-java-compilation-api-jsr-199/)）。

如果您只需要评估表达式，请考虑任何 EL，例如 OGNL 或 MVEL。

Groovy、JRuby 和 Scala 是最主流的动态语言，它们提供了大量的选项，从简单的表达式求值到全面的 Java 交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T01:48:31.783

修改类可以使用javaassit、asm、cglib（其实是依赖asm）、bcel等，其中我推荐asm，因为它更轻量级，性能更好。

使用 asm，您可以动态生成一些类。但是如果你想修改在jvm中运行的类，你必须使用Java Instrument API来重新转换已经存在的类。

您可以查看这篇论文以获取更多信息。[http://www.cs.helsinki.fi/u/pohjalai/k05/okk/seminar/Aarniala-instrumenting.pdf](http://www.cs.helsinki.fi/u/pohjalai/k05/okk/seminar/Aarniala-instrumenting.pdf)

来自 oracle 的更多关于 Instrument 的文档。 [http://docs.oracle.com/javase/6/docs/technotes/guides/instrumentation/index.html](http://docs.oracle.com/javase/6/docs/technotes/guides/instrumentation/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-13T19:37:39.950

我已经成功地使用[Janino](http://docs.codehaus.org/display/JANINO/Home)进行动态代码生成。与 Javassist 一样，它可以在内存中编译 Java 源代码。与 Javassist 一样，它缺少 Java 1.5 语言功能，但除此之外它很容易使用。

[SimpleCompiler](http://dist.codehaus.org/janino/javadoc/org/codehaus/janino/SimpleCompiler.html)类是一个很好的起点。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-10T00:10:21.427

我会看看针对 jvm 的 lisp（或其他动态语言）。 [维基文章](http://en.wikipedia.org/wiki/List_of_JVM_languages)

# c# - C# 无法确定关系的主体端

> ID：11893673
> 
> 赞同：35
> 
> 时间：2012-08-09T23:59:54.683
> 
> 标签：c#, entity-framework

```
foreach (var item in order.MyFiles)
{
   var newFile = adapter.db.File.CreateObject();

   newFile.Name = item.FileName;

   adapter.db.File.AddObject(newFile);

   adapter.db.SaveChanges();

   item.MyFile.Add(new MyFile { FileID = newFile.FileID });

   adapter.db.SaveChanges();
}

foreach (var item in tempFilesList)
{
    adapter.db.DeleteObject(item);
}

adapter.db.SaveChanges(); 
```

该代码重复了`MyFile`表中的行，例如，如果循环迭代 3 次，我看到 6 行（3 x 2* `adapter.db.SaveChanges()`???）

但是，如果我只有一个`adapter.db.SaveChanges();`（最后一个），我会收到错误

**无法确定“my_dbModel.FK_MyFile_File”关系的主体端。多个添加的实体可能具有相同的主键。**

我想这是因为在这种情况下它`adapter.db.File.AddObject(newFile);`在将它们分配给之前没有提交这些项目`item.MyFile.Add(new MyFile { FileID = newFile.FileID });`但是我可能是错的，有什么想法可以解决它吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-08-10T00:15:42.640

在保存更改之前`newFile.FileID`定义新时不能使用。`MyFile`FileID 为默认值 (0)，直到您将新实体保存在数据库中。您必须`File`在您的`MyFile`课程中使用导航属性。EF 将检测关系并适当地提交数据。

尝试使用以下命令更改行`item.MyFile.Add(new MyFile { FileID = newFile.FileID });`：

```
item.MyFile.Add(new MyFile { File = newFile }); 
```

实体中`File`定义的导航属性在哪里。`MyFile`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-07T22:05:00.630

这可能是因为您在 EDMX 中对同一张表进行了循环引用。

例如，如果 EmployeeDepartment 是您要更新的表，并且主键是 EmployeeDepartmentID，并且如果它是标识列并且是自动生成的，则在 EDMX 中检查 EmployeeDepartmentID 是否被引用回自身。如果是这样，请右键单击该外键引用并单击删除。

这对我有用，我希望这也对你有用。

谢谢，

比宾。

# python - 函数名称无效的 Python 和 C-dll

> ID：11893676
> 
> 赞同：0
> 
> 时间：2012-08-10T00:00:06.987
> 
> 标签：python, windows

我在 python 中使用 DLL 函数时遇到问题。我通过“dumpbin”查看了函数的名称。

例如

_xGraphics3D@20

我试图这样调用函数：

```
from ctypes import *
xorsLib =  cdll.LoadLibrary("Xors3D.dll")
width = c_int(800)
height = c_int(600)
depth = c_int(32)
mode = c_int(0)
vsync = c_int(0)
xGraphics3D = getattr(xorsLib,"_xGraphics3D@20")
xGraphics3D(width, height, depth, mode, vsync) 
```

但这会导致错误：

```
Traceback (most recent call last):
  File "D:/Coding/Python/pyASG/main", line 11, in <module>
    xGraphics3D(width, height, depth, mode, vsync)
ValueError: Procedure called with not enough arguments (20 bytes missing) or wrong calling convention 
```

我究竟做错了什么？

ps我不知道python，但我学过。我阅读了 ctype-manual 并试图找到答案...

pps 对不起我糟糕的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T00:25:28.467

尝试使用 windll 而不是 cdll。
`xorsLib = windll.LoadLibrary("xors3d.dll")` [http://docs.python.org/release/3.1.5/library/ctypes.html](http://docs.python.org/release/3.1.5/library/ctypes.html)
原因与martineau 评论的相同。

# ios - 为什么蓝牙 LE 不能从 iOS 模拟器到我的设备工作？

> ID：11893677
> 
> 赞同：0
> 
> 时间：2012-08-10T00:00:11.510
> 
> 标签：ios, ipad, ios-simulator, core-bluetooth

我试图弄清楚为什么我的 BTLE TI CC2540 密钥卡可以与我的 iPad 3 一起使用，但不能与在 Mountain Lion 上配备新 GBU521 IOGEAR 适配器的 iOS 模拟器一起使用。

我已经能够在常规设置中成功地将 iOS 5 Simulator 蓝牙连接到我的 BT 适配器，并且在我的概念验证应用程序中被视为“开机”。我正在使用 GBU521 IOGEAR 适配器，它仅在升级到 Mountain Lion 后才有效（尝试使用 Lion 修改一些 .kext 文件 - 不要那样做。在我恢复该 .kext 之前升级到 Mountain Lion 是不可能的）。然后我运行 Apple 建议的 nvram 设置，重新启动，它能够识别 BT 适配器。

我能够成功地与我的 iPad 3 通信（注册按钮推送、加速度计等），但是当我尝试在模拟器上运行它时，它只是没有发现设备。它告诉我 BT 状态是 CBCentralManagerStatePoweredOn，但是当我告诉它发现外围设备时，它什么也没有出现。

如何在 iOS 模拟器和支持 LE 的 iOS 设备之间建立蓝牙 LE 通信？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T16:42:10.720

（根据我在其他 iOS 模拟器蓝牙线程中的回答修改：[蓝牙加密狗和 iOS 模拟器](https://stackoverflow.com/questions/13202916/bluetooth-dongle-and-ios-simulator/13293393)）

扔掉 IOGEAR 并拿起 Cirago BTA8000。

我不确定您为什么能够在 iOS 模拟器中打开蓝牙（可能与您的 kext 编辑有关，我也尝试过），但我怀疑它实际上并没有打开。除了 Cirago BTA8000 和 MediaLink 4.0 适配器，我还购买了您提到的 IOGEAR。事实证明，尽管我的 MacBook 内置了完全相同的芯片，但基于 Broadcom 芯片的任何东西都不起作用，这意味着 MediaLink 和 IOGEAR 不起作用。我的 Cirago 货物今天早上刚到，iOS 模拟器中的蓝牙滑块在不到一秒的时间内就弹到“ON”。

如果您想进行实验，我很想听听其他非博通芯片是否也可以工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-10T00:28:24.600

你的钥匙扣没有加密狗吗？我打算买一个：S 更新：我刚刚找到了这个（但可能你已经看到了这个，它解释了你为什么使用单独的适配器）：http: [//developer.apple.com/library/ios /#technotes/tn2295/_index.html](http://developer.apple.com/library/ios/#technotes/tn2295/_index.html) 您的适配器在亚马逊上的评论看起来也不是很好。你用antoher设备试过了吗？[http://www.amazon.com/IOGEAR-Bluetooth-Micro-Adapter-GBU521/dp/B007GFX0PY/ref=sr_1_1?ie=UTF8&qid=1344560021&sr=8-1&keywords=GBU521+IOGEAR](https://rads.stackoverflow.com/amzn/click/com/B007GFX0PY)

# git - 警告：远程 HEAD 引用不存在的 ref，无法结帐

> ID：11893678
> 
> 赞同：110
> 
> 时间：2012-08-10T00:00:15.423
> 
> 标签：git

由于不同的原因，这似乎是一个流行的错误。

我有一个简单的裸 git repo，名为“kiflea.git”，我像这样克隆它：

```
git clone git://kipdola.be/kiflea.git 
```

然后 git 告诉我：`warning: remote HEAD refers to nonexistent ref, unable to checkout.`

是的，地图中没有版本化文件，除了 .git 目录。无论如何，我唯一需要做的就是：

```
cd kiflea
git checkout master 
```

它有效，所有文件都在那里。但是我认为克隆一个 repo 会自动检查 master，那么到底发生了什么，我该如何解决呢？

我注意到，在我做了`git checkout master`一点之后，这会被添加到我的本地 .git 配置文件中：

```
[branch "master"]
    remote = origin
    merge = refs/heads/master 
```

知道这个 git 存储库在遥远的过去曾经是一个 svn 存储库可能很有趣。

ps：使用gitweb浏览裸仓库时，明显有一个`master`分支：http: [//kipdola.be/gitweb/ ?p=kiflea.git;a=summary](http://kipdola.be/gitweb/?p=kiflea.git;a=summary)

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2013-03-26T07:33:33.997

这`warning: remote HEAD refers to nonexistent ref, unable to checkout.`意味着远程（裸）存储库包含调用的文件中的*分支引用*`HEAD`，其值与同一存储库中的任何已发布分支都不匹配。

**请注意，警告仅表示 git 没有进行结帐。克隆的存储库在其他方面很好。**只需`git branch -a`查看可能的分支并`git checkout the-branch-you-want`解决该问题。

这通常会发生，因为该文件的默认*内容*（`.git/HEAD`或`HEAD`裸存储库的普通内容）是`ref: refs/heads/master`说如果有人要去`clone`这个存储库，他们应该默认克隆分支`refs/heads/master`。默认情况下，Git 将创建不带`refs/heads/`前缀的本地分支（即`master`默认情况下）。尝试`git help symbolic-ref`了解更多信息。

这种情况的问题在于 Git 没有提供修改*远程*符号引用的方法，因此您要么使用 Git 托管服务提供商已经实现的东西（例如，设置 - 如果您有管理员权限，则在 GitHub 中的默认分支），或者您必须使用分支名称`master`作为默认分支（因为这是文件的默认内容，`HEAD`如果您无法修改该文件，您将永远被卡住`master`）。

如果您对远程 git 存储库具有 shell 访问权限，您可以简单地使用默认情况下要使用的分支名称`cd path/to/git/repo; git symbolic-ref HEAD refs/heads/XYZ`在哪里。`XYZ`

解决这个问题的一种方法是创建一个没有提交的新远程裸仓库，然后这样做`git push name-of-the-remote my-special-branch-name`会导致裸仓库包含一个分支`my-special-branch-name`，但`HEAD`符号 ref 仍然包含指向`master`. 结果，您将收到上述警告。如果您无法修改远程`HEAD`文件，您可以使用语法发布您的分支，`git push name-of-the-remote my-special-branch-name:master`这意味着您的本地分支`my-special-branch-name`应该作为`master`远程分支发布。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-02-19T10:26:51.200

我遇到了同样的问题，因为我不再使用该`master`分支，并且它在我的本地和远程存储库中都丢失了。

远程存储库仍然`HEAD`设置为`master`，我已将其更改为我实际使用的远程分支之一，一切正常。

如果您可以访问远程存储库：

*   去你的`remote_repo.git`;
*   编辑`HEAD`文件
*   更改`ref: refs/heads/master`为`ref: refs/heads/your_branch`

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-07-15T16:18:20.320

是的，这与您的 git clone 尝试签出与 master 不同的分支有关。就这样做

```
git clone user@git-server:project_name.git -b branch_name /some/folder 
```

这将帮助您通过其分支名称克隆确切的分支。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2021-07-18T05:41:30.457

答案很晚（2021 年），但会帮助其他人。

`git init --bare`当您使用它`ref: refs/heads/master`在文件中设置创建一个裸仓库`HEAD`但是当您克隆这个裸仓库时，它的默认分支是`main`，这就是问题，所以您需要更改`HEAD`文件并放置`main' instead of` masater 即

`ref: refs/heads/main`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-07-29T19:29:45.643

即使显示了这个错误 - 我的项目仍然连接到相应的存储库 - 我运行了`git branch`命令并看到了适当的分支 - 然后我运行`git checkout *branchname`并 BOOM - 一切都很好。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-09-07T07:27:42.380

创建裸仓库时我遇到了同样的问题。

我解决了它只是克隆了 repo，创建了一个本地 master 分支，然后将 master 推送到远程 repo。

1）克隆回购

```
$ git.exe clone --progress -v "the remote path" "my local path" 
```

2）在本地创建一个master分支。

```
 $ git checkout -b master 
```

3）在本地分支中提交一些东西

```
$ git add readme.md 
$ git commit –m “Added readme” 
```

4）在远程推送本地master

```
 $ git push origin master 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-02-10T18:25:33.350

这个问题有 10 年的历史了。这就是我现在解决的方法：

假设您正在使用 clone 命令克隆您的 repo，您​​将看到如下日志：

**git 克隆[https://abcgit-repo.abccoolrepo](https://abcgit-repo.abccoolrepo)**

> 克隆到'abcgit404.sasasasmy cool repo'...远程：计数对象：198，完成远程：查找来源：100％（26/26）接收对象：80％（176/219）ed 208（增量0）接收对象接收对象：100% (219/219), 49.09 KiB | 163.00 KiB/s，完成。警告：远程 HEAD 引用不存在的 ref，无法结帐。

现在解决**远程HEAD指不存在的ref，无法**

首先检查您的分支，您将看到如下日志：

1.  **git checkout remotes/origin/mainline**

> HEAD 现在在 xyz

2.  查看当前分支前面有 * 的所有分支

**git 分支 -a**

> *(HEAD 在 origin/mainline 分离)
> remotes/origin/a
> remotes/origin/b
> remotes/origin/c
> remotes/origin/d
> remotes/origin/mainline

3.  从上面复制分支名称并运行**git checkout checkout -b**

例如检查主线：

**git checkout -b 遥控器/来源/主线**

> *origin/mainline 遥控器/origin/a
> 遥控器/origin/b
> 遥控器/origin/c
> 遥控器/origin/d
> 遥控器/origin/mainline

这将解决问题

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-10T03:06:02.137

您的远程存储库肯定有问题。您可以通过创建存储库的新克隆来修复它。将新提交推送到主分支也可能有效。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-08-10T21:24:17.207

我猜它是`*`提交日志中的领先者，它以某种方式欺骗了远程服务器。

我可以使用一些菜单链接浏览 repo 的 web 界面，但其他的会失败，`404 - Unknown commit object`或者类似，特别是从摘要页面。

看看您是否可以修改最后一条提交消息，然后强制推送更新以查看是否可以修复它。服务器恶魔中可能存在错误。如果它确实修复了它，那么值得在 git list git@vger.kernel.org 上报告（仅限纯文本消息）

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-07-15T02:40:59.130

对于 Gitlab，即使它显示您在默认分支上（例如`master`），您可能实际上并不在其上，再次设置它来修复它，如下所示：

1.  创建一个新分支，也许`asd`
2.  设置>存储库>默认分支，显示默认分支是`master`
3.  将其设置为`asd`
4.  将其设置回`master`
5.  删除`asd`分支

完成，现在您的默认分支是`master`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-05-15T03:31:01.973

如果实际上没有可用的 master 分支，请检查以下内容；如果在 '.git' 文件夹中有一个名为 'packed-refs' 的文件，打开它，你可以找到列出的所有引用。

像下面这样的东西；

```
# pack-refs with: peeled fully-peeled 
e7cc58650190bd28599d81917f1706445d3c6d8b refs/tags/afw-test-harness-1.5
^cfae4f034e82591afdf4e5ed72279297d0eee618
6afe1bcfa4bd74de8e0c8f64d024e1cc289206df refs/tags/afw-test-harness-2.1
^c32f7fa495d4b44652f46c065fcd19c3acd237a6
72f2e4284dfbf27c82967da096c6664646bbdd19 refs/tags/android-1.6_r1
^50992e805e758e2231f28ec2127b57a1a9fd0ddc
0cbd528cad1cee9556098b62add993fc3b5dcc33 refs/tags/android-1.6_r1.1 
```

然后使用；

```
git checkout refs/tags/xxxx 
```

或者

```
git checkout 'HASH value' 
```

签出所需的版本。谢谢你。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-02-22T22:59:38.063

我似乎用以下方法解决了它：

```
git checkout -b  master
git push 
```

这创建了默认的主，然后我可以签出我的其他分支

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-06-09T09:03:18.793

在我的情况下，回购是空的。

```
git checkout --orphan master

git add some_file
git commit -m 'init'
git push origin master 
```

# uml - 有任何 yworks uml doclet 用户了解粗体/粗箭头和轻箭头之间的区别吗？

> ID：11893684
> 
> 赞同：1
> 
> 时间：2012-08-10T00:01:32.187
> 
> 标签：uml, javadoc

我经常使用这个 uml 绘图 doclet，它真的很酷。但它会生成我不完全理解的图表.. 特别是有时我的包之间有粗箭头，有时依赖项用细箭头表示.. 就像在这个例子中 >

![在此处输入图像描述](../Images/b639ed5e62ef63c7b071e3cbdf82320e.png)

[大图的外部链接](http://www.yworks.com/img/ydoc/overview_dotnet_DBT_ACTSLP.png)：

我还没有弄清楚导致 doclet 选择一种表示与另一种表示的依赖关系类型的差异。其他人能解决这个问题吗？thx 提前 cb

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:23:17.447

对于包依赖关系图，yDoc 会计算两个包之间存在多少个单独的依赖关系。对于每五个依赖项，相应连接的厚度增加一个像素（最多七个像素）。

简而言之：线越粗，依赖性越“强”。

# mysql - SQL：如果 B 列的值与另一个表中的 B 列匹配，则显示 A 列的值

> ID：11893686
> 
> 赞同：0
> 
> 时间：2012-08-10T00:01:42.573
> 
> 标签：mysql

我已经尝试了几个小时来解决这个问题，有很多类似的主题，但似乎仍然无法找到我的答案。我希望有人可以在这里帮助我，这就是我正在尝试做的事情：

我有一个名为**“brand”**的表和一个名为**“product”**的表 我正在尝试构建一个查询，如果该表中的brand_id与表**“brand”中的brand_id相同，它将显示表****“product”**中的product_id .

 **所以基本上我有，品牌表：

```
brand_name    brand_id
a             1
b             2
c             3 
```

和产品表：

```
product_id    brand_id
23            2
24            1
25            2
27            3 
28            3 
```

现在，如果选择了brand_id 3，我想显示所有带有brand_id 3 的product_id。

我到目前为止：

```
SELECT brand_id, brand_name, from " . TABLE_BRAND . " order by brand_name";

SELECT product_id from " . TABLE_PRODUCT . where brand_id = '" . (int)$brands['brand_id'] . "'"); 
```

有人能帮我像我描述的那样让它工作吗？问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T00:16:23.220

我建议您使用`ANSI SQL-92`语法而不是`ANSI SQL-89`语法，因为如果没有正确地将结果连接到`CROSS JOIN`. **[在这里阅读一些东西：ANSI SQL-92 INNER JOIN。](https://stackoverflow.com/a/11768715/491243)**

```
SELECT  a.Product_ID, b.brand_name
FROM    `product` a 
            INNER JOIN  `brand` b
                ON a.brand_id = b.brand_ID
-- WHERE a.Product_ID = valueHERE       -- <== place condition here :) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T00:04:18.397

也许这个？

```
SELECT
    b.brand_name,
    p.product_id
FROM
    brand AS b,
    product AS p
WHERE
    b.brand_id = p.brand_id 
```**

# git - git-p4 将 perforce “main” 分支作为子目录迁移到 git 分支中（git 分支中的代码加倍）

> ID：11893688
> 
> 赞同：4
> 
> 时间：2012-08-10T00:01:55.090
> 
> 标签：git, perforce, git-p4

# 情况

试图将 1 个“主”和 2 个分支从 perforce 迁移到 git。在使用规范映射分支后，我尝试了一个典型的迁移，导致代码目录重复问题。

# 问题

运行“git p4”（克隆或同步）时，主分支代码的副本包含在分支中，并且分支代码位于主分支旁边的目录中。我希望只看到 git 暂存区域中的分支代码。

## 设置

```
#Perforce Repo Structure
//depot/main/branches/MAINT_01
//depot/main/branches/MAINT_02
//depot/main/branches/mobile

# perforce branch maps
# note: mobile and MAINT_02 are branched (in perforce) from MAINT_01
MAINT_02 -> //depot/main/branches/MAINT_01/... //depot/main/branches/MAINT_02/...
mobile  -> //depot/main/branches/MAINT_01/... //depot/main/branches/mobile/...

# Perforce info
Server version: P4D/LINUX26X86_64/2009.2/241896 (2010/04/10)
Client Spec: (need to exclude many branches here)
//depot/main/branches/... //buildmaster-scm01/...
-//depot/main/branches/BranchA/... //buildmaster-scm01/BranchA/...
-//depot/main/branches/BranchB/... //buildmaster-scm01/BranchB/...
-//depot/main/branches/tempBranch/... //buildmaster-scm01/tempBranch/...
-//depot/main/branches/Bar/... //buildmaster-scm01/Bar/...
-//depot/main/branches/Foo/... //buildmaster-scm01/Foo/...
-//depot/main/branches/Cheese/... //buildmaster-scm01/Cheese/...

# Git Info (Linux Box)
 /git/buildmaster/git2 302  % git --version
 git version 1.7.12.rc2 
```

## 迁移尝试

这是怎么回事...

```
agvscm01.inq.com /git/buildmaster/git 225  % git init
Initialized empty Git repository in /git/buildmaster/git/.git/
agvscm01.inq.com /git/buildmaster/git 226  % git p4 sync --detect-branches --use-client-spec //depot/main/branches@all
Importing revision 20482 (88%)
    Importing new branch branches/MAINT_01

    Resuming with change 20482
Importing revision 21137 (96%)
    Importing new branch branches/mobile

    Resuming with change 21137
Importing revision 21396 (100%)
Updated branches: MAINT_01 MAINT_02 mobile
agvscm01.inq.com /git/buildmaster/git 227  % git checkout -b master p4/branches/MAINT_01
Checking out files: 100% (14923/14923), done.
Already on 'master'
agvscm01.inq.com /git/buildmaster/git 228  % git checkout -b rel_2 p4/branches/MAINT_02
Checking out files: 100% (15142/15142), done.
Switched to a new branch 'rel_2'
agvscm01.inq.com /git/buildmaster/git 229  % git checkout -b mobile p4/branches/mobile
Checking out files: 100% (29960/29960), done.
Switched to a new branch 'mobile'
agvscm01.inq.com /git/buildmaster/git 233  % git checkout master
Switched to branch 'master'
  agvscm01.inq.com /git/buildmaster/git2 303  % git branch -a
* master
  mobile
  rel_2
  remotes/p4/branches/MAINT_01
  remotes/p4/branches/MAINT_02
  remotes/p4/branches/mobile 
```

## 结果

```
agvscm01.inq.com /git/buildmaster/git2 304  % git checkout mobile
Checking out files: 100% (15073/15073), done.
Switched to branch 'mobile'
agvscm01.inq.com /git/buildmaster/git2 305  % ls
MAINT_01  mobile
agvscm01.inq.com /git/buildmaster/git2 306  % 
```

请注意，MAINT_01 和 mobile 目录具有所有正确的历史记录，但在此级别只能看到 mobile 的内容。

## 期望

移动分支分支不应包含 MAINT_01 目录。mobile 是 MAINT_01 的一个分支。这可能是非常简单的事情，但我没有看到它。此外，检出 master 只包含 MAINT_01 作为 root。MAINT_01 的内容应该是分支的根。

```
agvscm01.inq.com /git/buildmaster/git2_bak 307  % git checkout master
Switched to branch 'master'
agvscm01.inq.com /git/buildmaster/git2_bak 308  % ls
MAINT_01
agvscm01.inq.com /git/buildmaster/git2_bak 309  % 
```

感谢这里的任何帮助。

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T17:03:01.447

从 1.7.11 开始，在 git-p4 模块中存在一个已确认的 git 错误，当同时使用***--use-client-spec***和***--detect-branches***选项时，该错误将 perforce 代码映射到 git repo。当我向 git 开发团队报告问题时，来自电子邮件回复的片段......

> 谢谢你的详细报告。这是 1.7.12-rc2 中的一个错误。本系列在 origin/master 之上修复了它。
> 
> 问题的症结在于，当启用 --use-client-spec 和 --branch-detection 时，文件被映射到 git 中的错误位置。
> 
> 皮特威科夫（5）：
> 
> *   git p4 测试：将 client_view() 函数移动到库
> *   git p4 测试：添加损坏的 --use-client-spec --detect-branches 测试
> *   git p4：在初始化中设置 self.branchPrefixes
> *   git p4：在 stripRepoPath 中进行通配符解码
> *   git p4：使用 --use-client-spec 进行分支检测

```
 git-p4.py                     | 75 +++++++++++++++++++++++++++--------------

 t/lib-git-p4.sh               | 18 ++++++++++

 t/t9801-git-p4-branch.sh      | 77 +++++++++++++++++++++++++++++++++++++++++++

 t/t9809-git-p4-client-view.sh | 17 ----------

 4 files changed, 146 insertions(+), 41 deletions(-) 
```

目前他们发布了 1.7.12rc2。等待修复版本

# linux - css 3d 无法在 linux chrome 上运行

> ID：11893694
> 
> 赞同：2
> 
> 时间：2012-08-10T00:02:45.707
> 
> 标签：linux, google-chrome, css

嘿，我想知道是否有其他人在 linux 上的 chrome 上运行 css 3d（特别是 fedora 17）时遇到问题。Windows 中的 Chrome 似乎可以很好地处理一切，但由于某种原因，它在 Fedora 中不起作用。我收到错误消息说我的浏览器不支持 3d 转换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:27:27.330

Chrome/ium 可能是最受欢迎的选项，因此如果您尝试的版本不起作用，您可能需要更新到最新版本——例如 Chromium Daily Builds。如果即使这样也无法使用，您可能想尝试使用不同的 Linux 的 Webkit 浏览器。

Midori 和 Epiphany 是两个不错的选择。作为额外的奖励，我认为这两种浏览器都将使用您在系统上安装的 Webkit 版本（不像 Chrome，它带有自己的 Webkit 版本）。这意味着您应该能够从最新的夜间源代码版本构建 Webkit，Midori 或 Epiphany 将自动使用该版本。

[WebKit 每晚构建](http://nightly.webkit.org/)

我希望这对你有帮助。

# racket - 导入球拍/gui时球拍挂起

> ID：11893697
> 
> 赞同：3
> 
> 时间：2012-08-10T00:03:31.037
> 
> 标签：racket

在 Linux 和 Racket v5.3 上，下一个程序按预期运行，

```
#lang racket

(let loop ([i 0])
    (printf "~a\n" i)
    (sleep 0.01)
    (loop (add1 i))) 
```

但这在打印到大约 200 个后挂起，

```
#lang racket
(require racket/gui)

(let loop ([i 0])
    (printf "~a\n" i)
    (sleep 0.01)
    (loop (add1 i))) 
```

在 DrRacket 中运行时不会出现此问题。这是一个错误还是我错过了什么？如果是错误，是否有解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T00:17:34.847

它看起来像一个错误——你介意使用网页提交错误报告，还是最好使用 DrRacket？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T14:32:35.647

这现在已在最新的开发版本中得到修复，请参阅[此提交](https://github.com/plt/racket/commit/6852140dd8f4d6c4d1abe41b25e4d8072b194901)。

# java - 使用 pkill 以编程方式使用 Java 杀死服务 MAC OS X Mountain Lion

> ID：11893698
> 
> 赞同：-1
> 
> 时间：2012-08-10T00:03:51.377
> 
> 标签：java, linux, command-line, osx-mountain-lion

我正在测试一些 RESTful 和服务器端事件服务的 html 错误代码。我们目前只有 MOCK 服务，当我终止服务或启动/停止服务时，我应该在浏览器上获取相关的 HTML 错误代码。我正在考虑的测试方式是使用我们现有的测试框架 JAVA/testNG/Selenium Grid2/ + 其他东西以编程方式终止和启动这些 MOCK 服务，然后执行必要的断言以确保一切正常。我们目前有这些功能的 shell 脚本，但不确定如何通过 Java 代码实现或挂钩到 .sh 脚本...

.sh 脚本：

```
'#!/bin/bash
set -x

cd /mock_services/push
pkill -f mockserver || true' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T00:29:23.600

您可以通过使用`ProcessBuilder`.

看一下

*   [想要从 Java 调用 linux shell 命令](https://stackoverflow.com/questions/1410741/want-to-invoke-a-linux-shell-command-from-java)
*   [流程构建器](http://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CEgQFjAA&url=http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html&ei=sVUkUPjuJLCviQePqoDoDQ&usg=AFQjCNHSAWl4szO37Qonu5enNH3U4ss__A&sig2=nrrE7c_z0gnVrkC_6w22fg)
*   [使用流程构建器](http://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CEkQFjAB&url=http://javaevangelist.blogspot.com/2011/12/java-tip-of-day-using-processbuilder-to.html&ei=sVUkUPjuJLCviQePqoDoDQ&usg=AFQjCNGAoE_j5V6sS8Da4Y816oHxIWS6OA&sig2=ed_QCRQJ2aIehpaA-NUsrw)

# arrays - x86 程序集中的字符串数组：一次获取一行

> ID：11893699
> 
> 赞同：0
> 
> 时间：2012-08-10T00:04:09.583
> 
> 标签：arrays, assembly, x86, masm, masm32

我正在阅读包含标题、作者和日期的 3 本书的文件。

我想要做的是将每一行处理成一个新数组。我只有抓取一行数据并将其添加到临时数组时遇到问题。

我无法通过查找回车和递增来指向行首和行尾`EDI`。

我会尽量保持简短，只向您展示我认为您可能需要的内容。

```
data?
array DWORD 2000 DUP(?)
new_array DWORD 2000 DUP(?) 
```

我有一个读取文件宏，我将文件读入 hMem。

```
mov nums, InputFile("input.txt")
parse_file nums 
```

然后我试图解析文件：

```
parse_file MACRO nums

mov EDI, nums
cld
repne scasb ; 

inc EDI     ; 
```

我可以计算标题的长度，但不确定如何使用它来获取标题。也许，我在我的电脑前呆了太多小时，看不到解决方案！谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:33:59.390

`rep movsb`将数据从 复制`[ds:esi]`到`[es:edi]`。

# ember.js - 如何在 Ember.js 中设置控制器属性和更新模板

> ID：11893703
> 
> 赞同：2
> 
> 时间：2012-08-10T00:04:21.177
> 
> 标签：ember.js, handlebars.js

我正在尝试在 TopView 模板中显示 TopController 属性。在 TopView 中，我有`sectionBinding: 'controller.section'`.

根据我对 Ember.js 的理解，在 TopView 中，该`controller`属性应该是指我的 TopController。**然而它似乎指的是ApplicationController？**继续阅读：

在我的路由器中，我有`router.set('topController.section', 'index');`......但在这种情况下似乎没有任何作用。将其更改为`router.set('applicationController.section', 'index');` **有效**，并且`{{section}}`TopView 模板中的部分更改为“索引”。

我创建了两个小提琴来显示我的问题。第一个不起作用：

故障-> [http://jsfiddle.net/8tQ4q/4/](http://jsfiddle.net/8tQ4q/4/)

第二个确实有效：

作品-> [http://jsfiddle.net/8tQ4q/5/](http://jsfiddle.net/8tQ4q/5/)

唯一的区别是`topController`/中的`applicationController`部分`router.set()`。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T16:22:45.100

我不确定您为什么希望`topController`连接到`TopView`. 你没有做任何事情来建立这种联系。我认为您可能会感到困惑，因为`connectOutlet('top')`会创建一个`TopView`连接到`topController`. 但是，您并没有在应用程序的任何地方执行此操作。

你也不需要`sectionBinding`. 如果您`controller`在视图上定义了一个，它将是默认上下文。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-10T14:32:18.147

我想你想要做的是：

```
router.get('topController').set('section', 'index'); 
```

# iis - 配置 windows 虚拟 SMTP 服务器

> ID：11893704
> 
> 赞同：0
> 
> 时间：2012-08-10T00:04:28.563
> 
> 标签：iis, smtp, iis-6, windows-server-2003

我有一个运行 IIS(6.0) 虚拟 SMTP 服务器的 windows 2003 服务器。我为此服务器编写了一个事件接收器来解析和弹出传入的电子邮件。我试图让服务器接受带有通配符的传入域。所以 *.something.com 将被此服务器接受。

如果我使用别名域，它将不允许我使用通配符。如果我使用远程域，我可以使用通配符，但我必须打开中继（我不想这样做）并且它会尝试在此基础上向自己发送一条消息。如果中继已打开，我会收到错误响应 5.3.5。

尽管如此，我正在寻找一种方法来配置我的服务器以接受带有通配符的别名域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:13:20.273

我发现没有允许我这样做的配置。我的解决方案很丑陋，但它有效。我保留了中继，只允许服务器中继给自己。我还将 Imessage.envelopeField.MessageStatus 更改为在成功读取时中止，这样它就不会被我的接收器以外的任何东西处理（因此，不会被路由到“新”目的地）。

在Windows 2003 上，要访问Imessage 类，您需要导入cdo.dll。

# python - 如何在 Django 中访问“子模型”的方法？

> ID：11893713
> 
> 赞同：-1
> 
> 时间：2012-08-10T00:05:41.440
> 
> 标签：python, django, django-models

在 Django 中，我有以下 models.py

```
class Product(RandomPrimaryIdModel):
  feature1 = models.CharField(max_length=20, blank=True, null=True)
  feature2 = models.CharField(max_length=20, blank=True, null=True)
  feature3 = models.CharField(max_length=20, blank=True, null=True)

class Mattress(Product):
  category_type = models.CharField(max_length=50)
  size = models.CharField(max_length=5)

  def category(self):
    return "bedding"
  category = property(category) 
```

我有以下views.py文件

```
def update(request, id):
  product = Product.objects.get(id=id)
  ... 
```

在这个方法中，更新，我可以从 Product 模型中调用“床垫”模型中定义的方法吗？例如，我想写： if product.type == "mattress" 其中类型已在床垫模型中定义，并且床垫是 Product 的子模型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T00:35:27.950

您的示例似乎介于两种不同的方式之间，但目前不正确。发生的情况是您正在创建两个表：Product 和 Mattress，它们完全不相关。不管 Mattress 是 Product 的子类，它只是继承了它的结构。您无法查询 Product 表中有关床垫的任何内容，因为床垫位于 Mattress 表中。

一种方法是考虑一个产品只是抽象的，被实际产品子类化：

```
class Product(RandomPrimaryIdModel):
    class Meta:
        abstract=True 
```

这将阻止创建 Product 表。然后您可以通过以下方式直接查询床垫：`Mattress.objects.filter()`

但这在引入多种类型的产品以及必须为它们管理不同的表方面似乎有点限制。另一种方法是使用 Product 表，但使用通用关系来支持将任何类型的其他表作为内容对象附加：

```
from django.db import models
from django.contrib.contenttypes.models import ContentType
from django.contrib.contenttypes import generic

class Product(RandomPrimaryIdModel):

    feature1 = models.CharField(max_length=20, blank=True, null=True)
    feature2 = models.CharField(max_length=20, blank=True, null=True)
    feature3 = models.CharField(max_length=20, blank=True, null=True)

    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    content_object = generic.GenericForeignKey('content_type', 'object_id') 
```

有了这个，您就可以将 设置`content_object`为 Mattress 实例。然后可以使用 ContentType 进行查询：

```
p_type = ContentType.objects.get(name="mattress")
Product.objects.filter(content_type=p_type) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T04:22:45.083

这看起来像是自动向下投射的情况。对于包含通用“ProductBase”实例的购物车，我需要一种类似的方法，但我需要访问孩子的特定功能，这些功能是 ProductDownloadable、ProductShipped 等类型的实际产品。

Django 本身并不支持这一点，但可以通过自省或使用[django-model-utils](https://github.com/carljm/django-model-utils/#inheritancemanager)对其进行编码，一旦安装，您可以执行以下操作：

```
# return a list 'child' classes of Product - in your case Mattresses
mattress_list = Product.objects.all().select_subclasses() 

# return the direct 'child' class of Product - in your case Mattress class
mattress = Product.get_subclass(id=some_id) # returns the 'child' subclass
mattress.foo() # executes method on foo on Mattress class (not on Product class) 
```

# c# - 服务器未响应“Socket.BeginReceive”

> ID：11893715
> 
> 赞同：0
> 
> 时间：2012-08-10T00:06:11.947
> 
> 标签：c#, sockets

**我的问题：**当客户端尝试通过 连接到服务器时`Socket.BeginReceive`，服务器没有响应。我试过合并一个`try/catch`块，但事实证明这没用。即使在 VS 调试器中，它也没有给我错误日志，而是进入 Windows 7“程序无响应”屏幕。

它不会一直发生......只有在大约 5 或 6 次成功连接和断开连接之后。

这是相关代码（服务器端，因为崩溃发生在服务器端）：

```
public Remote(Socket s)
{
    tempbuffer = new byte[300];
    buffer = new byte[0];
    connectionSocket = s;
    ip = connectionSocket.RemoteEndPoint.ToString().Split(':')[0];
    Log(ip + " connecting...");

    connectionSocket.BeginReceive(
        tempbuffer, 0, tempbuffer.Length, SocketFlags.None,
            new AsyncCallback(Receive), this);
} 
```

接收方式：

```
static void Receive(IAsyncResult result)
{
    Remote r = (Remote)result.AsyncState;
    if (r.disconnected) return;

    try
    {
        int length = r.connectionSocket.EndReceive(result);
        if (length == 0) { r.Disconnect(); return; }

        byte[] b = new byte[r.buffer.Length + length];
        Buffer.BlockCopy(r.buffer, 0, b, 0, r.buffer.Length);
        Buffer.BlockCopy(r.tempbuffer, 0, b, r.buffer.Length, length);

        r.buffer = r.HandleMessage(b);

        r.connectionSocket.BeginReceive(
            r.tempbuffer, 0, r.tempbuffer.Length, SocketFlags.None,
                new AsyncCallback(Receive), r);
    }
    catch (SocketException) { r.Disconnect("Error!"); }
    catch (Exception e) { ErrorLog(e); r.Disconnect("Error!"); }
} 
```

我看到了该`ip connecting`消息，但之后它没有响应。`Receive`执行此操作时永远不会调用该方法。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T00:13:37.027

要么你给它一个无效的 IP 和端口来连接，要么异步接收的实现只是永远重复一些事情。

# ruby-on-rails - Rails 3.2嵌套表单自定义外键无法保存

> ID：11893720
> 
> 赞同：0
> 
> 时间：2012-08-10T00:06:42.957
> 
> 标签：ruby-on-rails, associations, ruby-on-rails-3.2, form-processing

我有这个评论模型：

```
class Review < ActiveRecord::Base
  attr_accessible :approved, :reviewed_id, :for, :user_id, :text, :rating, :title

  belongs_to :business
  belongs_to :product
end 
```

这个产品型号：

```
class Product < ActiveRecord::Base
  include ApplicationHelper
  belongs_to :business
  belongs_to :catalog
  belongs_to :category

  has_many :reviews, :foreign_key => :reviewed_id
  has_many :features, :dependent => :destroy
end 
```

这个商业模式：

```
class Business < ActiveRecord::Base
  validates_presence_of :name
  validates_presence_of :category

  mount_uploader :photo, PhotoUploader

  has_many :catalogs, :dependent => :destroy
  has_many :products, :dependent => :destroy
  has_many :branches, :dependent => :destroy
  has_many :reviews, :foreign_key => :reviewed_id
end 
```

但是在评论控制器中使用这个创建操作：

```
def create
  @business = Business.find(params[:business_id])

  if params.has_key?('product_id')
    @product = Product.find(params[:product_id])
    @review = @product.reviews.build(params[:review])

    if @review.save
      flash[:notice] = 'Pending Review Submitted'
      redirect_to business_product_path(@business, @product)
    else
      @form_resources = [@business, @product, @review]
      respond_with(@business, @product, @review)
    end
  else
    @review = @business.reviews.build(params[:review])

    if @review.save
      flash[:notice] = 'Pending Review Submitted'
      redirect_to business_path(@business)
    else
      @form_resources = [@business, @review]
      respond_with(@business, @review)
    end
  end
end 
```

我无法保存关联。simple_form 说有错误，但我在日志中看不到错误，并且所有其他字段都经过验证，所以我猜测关联存在问题。

**附带问题：**我怎样才能让 simple_form 显示所有错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T07:08:27.300

通过使用多态关联并在评论模型中摆脱 for 和 review_id 来修复它。参考这里：

[http://guides.rubyonrails.org/association_basics.html#polymorphic-associations](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)

# java - 在后台工作时禁用所有 UI 元素

> ID：11893725
> 
> 赞同：0
> 
> 时间：2012-08-10T00:07:25.130
> 
> 标签：java, android, android-button, android-menu

`Buttons`Android SDK 中是否有一种方法允许我禁用所有 UI 元素，例如`MenuItems`在后台执行任务时？

我目前在互联网上做一些工作，并显示一个`ProgressBar`通知用户当前进度的信息。

我是否应该通过该方法在后台任务的开始和结束时构建`List<>`我所有的`Buttons`and并更新它们的状态？`MenuItems``setEnabled`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T06:38:28.540

> Android SDK 中是否有一种方法允许我在后台执行任务时禁用所有 UI 元素，例如按钮和菜单项？

我不记得 SDK 中存在这种方法。

> 我是否应该只构建一个 List<> 的所有按钮和 MenuItems 并通过 setEnabled 方法在后台任务的开始和结束时更新它们的状态？

我的建议是使用 a`ProgressDialog`而不是您当前的方法（对话框还将阻止用户与 UI 交互，您只需禁用菜单）。如果您启动后台工作人员并禁用所有 UI 视图，用户将看到正在完成一些工作，并且他/她无法使用该应用程序。对我来说，这似乎令人困惑，而且`Dialog`似乎是一个更好的解决方案，因为它清楚地表明用户必须等到工作完成。另一种选择是将其放置`ProgressBar`在覆盖活动的叠加层中，这样如果这是您想要的，用户仍然可以看到下面的 UI。

要禁用所有视图，我将使用如下方法：

```
private void changeViewsState(ViewGroup parent, boolean state) {
    int count = parent.getChildCount();
    for (int i = 0; i < count; i++) {
        View child = parent.getChildAt(i);
        if (child instanceof ViewGroup) {
            changeViewsState((ViewGroup) child, state);
        } else if (child instanceof View) {
            child.setEnabled(state);
        }
    }
} 
```

传递系统的内容面板 ( `changeViewsState((ViewGroup) findViewById(android.R.id.content), false);`) 或活动布局的根：

```
ViewGroup root; // root is a reference of the root of your content view
// in the onCreate method

root = (ViewGroup) getLayoutInflater().inflate(R.layout.your_activity_layout_file, null);

// later use it:
changeViewsState(root, false); 
```

要禁用菜单项，请在后台工作即将开始时设置一个布尔标志，并使用该标志在回调中启用/禁用菜单项`onPrepareOptionMenu`。工作完成后，请记住恢复标志，以便启用菜单。

# java - 带有 SimpleCursorAdapter 的 Android ListView - 崩溃 onResume

> ID：11893727
> 
> 赞同：1
> 
> 时间：2012-08-10T00:07:28.730
> 
> 标签：java, android, listview, cursor, simplecursoradapter

我有一个`ListView`使用`AcitivityA`名为. 适配器保存来自`SimpleCursorAdapter``RecipeAdapter``SQLite`

`EditText`顶部有一个视图`ListView`，用于在用户搜索食谱时过滤列表视图。当用户单击过滤后的项目时`ListView`，`ActivityB`启动。

这一切都完美无缺。但是，当用户按下后退按钮恢复`ActivityB`时，我收到以下错误。

```
java.lang.IllegalStateException:
trying to requery an already closed cursor  android.database.sqlite.SQLiteCursor@418af170 
```

我解决问题的尝试：

*   将代码从 复制`onCreate()`到`onResume`方法。
*   添加`c.requery()`到`onResume()`方法
*   添加`db.close`到`onDestroy()`方法

谁能帮我解决我的问题？

这是我的代码：

在 中`onCreate`，`cursor`填充`ListView`使用`c.getCursor`，当用户`ListView`通过过滤时`EditText`，`c.getFilterCursor`使用 。

```
public class RecipeActivity extends SherlockListActivity {

private DBHelper db = null;
private Cursor c = null;
private RecipeAdapter adapter = null;
ListView listContent;   
private EditText filterText = null;

@SuppressWarnings("deprecation")
@Override
public void onCreate(Bundle savedInstanceState) {
    try {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.filter_list);

        filterText = (EditText) findViewById(R.id.search_box);
        filterText.addTextChangedListener(filterTextWatcher);

        ListView listContent = getListView();

        db = new DBHelper(this);
        db.createDataBase();
        db.openDataBase();

        c = db.getCursor();         

        adapter = new RecipeAdapter(c);

        listContent.setAdapter(adapter);

        adapter.setFilterQueryProvider(new FilterQueryProvider() {
            public Cursor runQuery(CharSequence constraint) {
                // Search for states whose names begin with the specified letters.
                c = db.getFilterCursor(constraint);
                return c;
            }
        });

        startManagingCursor(c);

    } catch (IOException e) {
        e.printStackTrace();
    }
}

    private TextWatcher filterTextWatcher = new TextWatcher() {

    public void afterTextChanged(Editable s) {
    }

    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
    }

    public void onTextChanged(CharSequence s, int start, int before,
            int count) {

        adapter.getFilter().filter(s);

    }

}; 
```

RecipeAdapter 内部类

```
class RecipeAdapter extends CursorAdapter {

    @SuppressWarnings("deprecation")
    public RecipeAdapter(Cursor c) {
        super(RecipeActivity.this, c);
    }

    public void bindView(View row, Context arg1, Cursor arg2) {
        RecipeHolder holder = (RecipeHolder) row.getTag();
        holder.populateFrom(c, db);

    }

    public View newView(Context arg0, Cursor arg1, ViewGroup arg2) {
        LayoutInflater inflater = getLayoutInflater();
        View row = inflater.inflate(R.layout.reciperow, arg2, false);
        RecipeHolder holder = new RecipeHolder(row);
        row.setTag(holder);

        return (row);
    }

static class RecipeHolder {
    public TextView id = null;
    private TextView name = null;
    private TextView desc = null;
    private TextView preptime = null;
    private TextView cooktime = null;
    private TextView serves = null;
    private TextView calories = null;
    private TextView fat = null;
    private TextView fav = null;

    RecipeHolder(View row) {
        id = (TextView) row.findViewById(R.id.id);
        name = (TextView) row.findViewById(R.id.recipe);
        desc = (TextView) row.findViewById(R.id.desc);
        preptime = (TextView) row.findViewById(R.id.preptime);
        cooktime = (TextView) row.findViewById(R.id.cooktime);
        serves = (TextView) row.findViewById(R.id.serving);
        calories = (TextView) row.findViewById(R.id.calories);
        fat = (TextView) row.findViewById(R.id.fat);
        fav = (TextView) row.findViewById(R.id.fav);
    }

    void populateFrom(Cursor c, DBHelper r) {
        id.setText(r.getId(c));
        name.setText(r.getRecipe(c));
        name.setTextColor(Color.parseColor("#CCf27c22"));
        desc.setText(r.getDesc(c));
        preptime.setText(r.getPrepTime(c) + ". ");
        cooktime.setText(r.getCookTime(c) + " mins");
        serves.setText(r.getServes(c));
        calories.setText(r.getCalories(c));
        fat.setText(r.getFat(c));
        fav.setText(r.getFav(c)); 
```

DBHelper 类中的 getCursor() 和 getFilterCursor() 代码

```
public Cursor getCursor() {
    SQLiteQueryBuilder queryBuilder = new SQLiteQueryBuilder();
    queryBuilder.setTables(DATABASE_TABLE);

    String[] columns = new String[] { KEY_ROWID, RECIPE, DESC, PREPTIME,
            COOKTIME, SERVES, CALORIES, FAT, CATEGORY, FAV };

    Cursor myCursor = queryBuilder.query(myDataBase, columns, null, null,
            null, null, RECIPE + " ASC");

    return myCursor;
}

public Cursor getFilterCursor(CharSequence constraint) {
    SQLiteQueryBuilder queryBuilder = new SQLiteQueryBuilder();
    queryBuilder.setTables(DATABASE_TABLE);

    String[] columns = new String[] { KEY_ROWID, RECIPE, DESC, PREPTIME,
            COOKTIME, SERVES, CALORIES, FAT, CATEGORY, FAV };

    if (constraint == null || constraint.length() == 0) {
        // Return the full list
        return queryBuilder.query(myDataBase, columns, null, null, null,
                null, RECIPE + " ASC");
    } else {
        String value = "%" + constraint.toString() + "%";

        return myDataBase.query(DATABASE_TABLE, columns, "RECIPE like ? ",
                new String[] { value }, null, null, null);
    }
} 
```

完整的日志

```
FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to resume activity {ttj.android.quorn/ttj.android.quorn.RecipeActivity}: 
java.lang.IllegalStateException: trying to requery an already closed cursor android.database.sqlite.SQLiteCursor@41954658
at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2456)
at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2484)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1185)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4507)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.IllegalStateException: trying to requery an already closed cursor android.database.sqlite.SQLiteCursor@41954658
at android.app.Activity.performRestart(Activity.java:4508)
at android.app.Activity.performResume(Activity.java:4531)
at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2446) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T01:48:26.757

您运行应用程序的 Android 平台版本是什么？此方法 startManagingCursor 自 Honeycomb 以来已弃用。建议开发人员将新的 CursorLoader 类与 LoaderManager 一起使用，该类也可通过 Android 兼容性包在旧平台上使用。

实际上我在 Honeycomb 上遇到了同样的问题。但是我没有按照上面的说明进行操作，因为我没有太多时间来重写我的代码。所以这是我的解决方案，希望对您有所帮助。但是如果你有时间，你应该切换到使用 CursorLoader 和 LoaderManager 获得更好的性能。

```
@Override
protected void onResume() {
    super.onResume();
    //do the query again every time on resume
    Cursor c = mExpenseDb.queryCategories(mSettings.getCurrentAccount().getId());
    //mAdapter is a SimpleCursorAdapter, set its cursor to the new one 
    mAdapter.changeCursor(c);
}

@Override
protected void onPause() {
    super.onPause();
    //mAdapter is a SimpleCursorAdapter, invalidate its data and set it cursor to null on Activity pause
    mAdapter.notifyDataSetInvalidated();

    mAdapter.changeCursor(null);
} 
```

# javascript - 如何在浏览器中触发另存为对话框，以便可以在内存中保存 json 数据？

> ID：11893729
> 
> 赞同：1
> 
> 时间：2012-08-10T00:07:34.357
> 
> 标签：javascript, jquery, json, export, fullcalendar

正如标题所说，我需要将json保存在内存数据中。我希望能够从某个 dom 对象上的 onlick 事件中触发它。

我想将数据保存在用户计算机上，就像他们正在下载此文件一样。保存为文本很好。

没有服务器可以交谈。

**更新：**

[http://jsfiddle.net/adouga/GpcAt/1/](http://jsfiddle.net/adouga/GpcAt/1/)

我正进入（状态

`TypeError: cyclic object value var json1 = JSON.stringify(mydata);`

**更新：** 发生循环错误是因为 fullcalendar 对象有它自己的自定义属性和嵌套对象。所以我遍历返回的对象数组并仅将带有我的属性的对象复制到另一个可以字符串化的数组

[http://jsfiddle.net/adouga/GpcAt/2/](http://jsfiddle.net/adouga/GpcAt/2/)

我认为这可能会起到复制到剪贴板的作用。

[http://www.steamdev.com/zclip/](http://www.steamdev.com/zclip/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T00:26:09.433

要保存在浏览器中，您可以使用 localStorage。要将 json 作为文本提供，您可以使用 HTML5 File API。检查这个讨论：[Create Text file from String using JS and html5](https://stackoverflow.com/questions/10654971/create-text-file-from-string-using-js-and-html5)

# iphone - 在 Xcode 中创建一个 plist 文件

> ID：11893730
> 
> 赞同：0
> 
> 时间：2012-08-10T00:07:36.543
> 
> 标签：iphone, objective-c, xcode

我正在从 plist 文件中保存/检索数据，但我遇到了问题，如果 plist 文件不存在，我将无法创建它。我需要在应用程序的 Document 文件夹中创建它。我的代码是

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *path = [documentsDirectory stringByAppendingPathComponent:@"playersnames.plist"];
NSFileManager *fileManager = [NSFileManager defaultManager];

if (![fileManager fileExistsAtPath: path])
{
    path = [documentsDirectory stringByAppendingPathComponent: [NSString stringWithFormat: @"playersnames.plist"] ];

}

NSMutableDictionary *data = [[NSMutableDictionary alloc] initWithContentsOfFile:path];

NSFileManager *fileManager2 = [NSFileManager defaultManager];
//NSMutableDictionary *data;

if ([fileManager2 fileExistsAtPath: path])
{
    data = [[NSMutableDictionary alloc] initWithContentsOfFile: path];

}
else
{
    // If the file doesn’t exist, create an empty dictionary
    data = [[NSMutableDictionary alloc] init];

} 
```

我搜索以解决问题，但没有机会，我不知道代码中缺少什么。

请如果有人可以向我解释如何做到这一点。

我的代码在 viewDidLoad 中。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T00:59:41.943

您永远不会创建文件 - 将这个第一个引用更改为 fileExists：

```
if (![fileManager fileExistsAtPath: path])
{
    path = [documentsDirectory stringByAppendingPathComponent: [NSString stringWithFormat: @"playersnames.plist"] ];

} 
```

对此：

```
if (![fileManager fileExistsAtPath: path])
{
    BOOL ret = [[NSDictionary dictionary] writeToFile:path atomically:YES];
    assert(ret); // better work!
} 
```

现在您将创建文件。稍后您将需要通过将完整的字典保存到同一文件中来做同样的事情。重要提示：测试这些调用的返回码！

# java - Eclipse生成的默认id值里面有char，变量类型是long。如何？

> ID：11893731
> 
> 赞同：-1
> 
> 时间：2012-08-10T00:07:38.697
> 
> 标签：java, variables, variable-assignment, long-integer, primitive

这不是什么新鲜事，但我想知道 java 怎么能将类似的东西分配`1L`给`long`数据类型。

```
private static final long serialVersionUID = 1L; 
```

其中`long`数据类型的定义是，

> **long：** long 数据类型是一个 64 位有符号二进制补码整数。它的最小值为**-9,223,372,036,854,775,808**，最大值为**9,223,372,036,854,775,807**（含）。当您需要比 int 提供的值范围更广的值时，请使用此数据类型。

**来自：** [Oracle，Java 原始数据类型](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T00:09:08.477

`L`表示它是长的。换句话说，`1`是 int 而是`1L`long。它在[Java 语言规范 #3.10.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.1)中指定：

> 如果整数文字以 ASCII 字母 L 或 l (ell) 为后缀，则它是 long 类型；否则它是 int 类型。
> 后缀 L 是首选，因为字母 l（ell）通常很难与数字 1（一）区分开来。

# javascript - 将对象作为参数传递后未定义的属性

> ID：11893732
> 
> 赞同：2
> 
> 时间：2012-08-10T00:07:43.843
> 
> 标签：javascript

```
function foo() {
    bar = 'ok';
    new baz( this );
}

function baz( foo ) {
    alert( foo.bar );
}

new foo(); 
```

为什么警报显示“未定义”而不是“确定”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T00:11:37.557

`bar`已超出范围。[范围和上下文是有区别的](http://clubajax.org/javascript-scope-and-context-not-the-same-thing/)。如果要将属性附加到`foo`，则必须[将属性附加到函数](http://jsfiddle.net/Luy8C/)。

```
function foo() {
     this.bar = 'ok';
     new baz(this);
    }

function baz(foo) {
    alert(foo.bar);
    }

new foo();​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T00:11:49.337

这是因为 foo.bar 是一个私有变量。把它改成这个，它会工作的

```
function foo() {
    this.bar = 'ok';
    new baz(this);
    }

function baz(foo) {
    alert(foo.bar);
    }

new foo(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T00:10:14.153

因为变量不是属性*（WRT 全局变量/属性除外）*。您正在`bar`通过不使用该`var`语句来创建一个全局变量。即使您使用`var`，它也不会显示在正在构造的对象上。

由于您使用的是`new`，因此您可以将属性设置为`this`。

```
this.bar = "ok" 
```

所以完整的代码是......

```
function foo() {
    this.bar = 'ok';
    new baz(this);
    }

function baz(foo) {
    alert(foo.bar);
    }

new foo(); 
```

* * *

顺便说一句，`new`关键字被浪费了，`baz`因为您没有保留任何创建的对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T00:12:04.750

在您的`baz`函数`foo`中没有作为参考传递，它是参数的占位符。当您这样做时，`new foo`您将`foo`其用作构造函数。`bar`是全局的，因为它没有用`var`or声明`this.bar`。我认为你需要重新审视基础知识，这个问题太错误了......

# javascript - 在手持/智能设备上使用不同浏览器时的屏幕宽度问题

> ID：11893734
> 
> 赞同：5
> 
> 时间：2012-08-10T00:08:02.173
> 
> 标签：javascript, android, jquery, mobile, smartphone

我制作了一个脚本，在其中我正在检测移动浏览器，当它为 true 时`getwidth`，调用 JS 函数并根据其设备的屏幕宽度将访问者重定向到某个 URL。我使用了基本的js检测方法，即`screen.width`检测屏幕宽度

我面临的问题是在不同的浏览器中返回不同的屏幕宽度。就像我有一台平板电脑（Android 4.0.3），其实际屏幕宽度为 800 PX，当我通过默认浏览器在其上运行我的脚本时，它会返回准确的屏幕宽度`800px`，但是当我用不同的浏览器打开它时，它们会返回不同的宽度，例如 UC 浏览器返回 740 PX ( `ISSUE 2: also when onload function i tried to return screen width on UC browser then it returns screen width as 0px and after page load when i call the same function again then it returns width=740px`)，当我在 Opera Mini 上运行脚本时，它返回的宽度为 441 PX。

请让我知道哪种方法是检测手持/智能设备屏幕宽度的最有效方法。所以我可以根据屏幕宽度完美地进行重定向。

测试网址：[http ://radiations3.aiksite.com/home.html](http://radiations3.aiksite.com/home.html)

谢谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T00:51:17.590

嗯，听起来你不应该使用 Javascript，而应该使用 CSS。你看过[媒体查询](http://css-tricks.com/css-media-queries/)吗？这是检测屏幕宽度并相应地提供不同样式的最跨浏览器的方法。

如果您不想更改样式，而是按照您所说的进行重定向（如果必须），那么我建议使用以下代码（代表[Andy Langton](http://andylangton.co.uk/articles/javascript/get-viewport-size-javascript/)）：

```
var w=window,d=document,e=d.documentElement,g=d.getElementsByTagName('body')[0],x=w.innerWidth||e.clientWidth||g.clientWidth,y=w.innerHeight||e.clientHeight||g.clientHeight; 
```

这是将创建两个变量`x`和的简写`y`，它们分别是宽度和高度。也许这更像你正在寻找的东西，但我首先建议检查媒体查询并确保你想要做的事情不能用 CSS 完成。无法保证在任何浏览器中都启用了 Javascript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T18:24:56.603

您是否尝试过使用 jQuery 和

```
$(window).width();
$(window).height(); 
```

我从来没有遇到过使用这些问题。

# linux - 无法在 .cshrc 中获取脚本

> ID：11893735
> 
> 赞同：0
> 
> 时间：2012-08-10T00:08:04.257
> 
> 标签：linux, csh

我正在使用的库有一个脚本来设置适当的环境变量：

```
# Source this script to set up the ROOT build that this script is part of.
#
# Conveniently an alias like this can be defined in ~/.cshrc:
#   alias thisroot "source bin/thisroot.sh"
#
# This script if for the csh like shells, see thisroot.sh for bash like shells.
#
# Author: Fons Rademakers, 18/8/2006

# $_ should be source .../thisroot.csh
set ARGS=($_)
set THIS="`dirname ${ARGS[2]}`"
setenv ROOTSYS "`(cd ${THIS}/..;pwd)`"

set path = ($ROOTSYS/bin $path)

if ($?LD_LIBRARY_PATH) then
   setenv LD_LIBRARY_PATH $ROOTSYS/lib:$LD_LIBRARY_PATH      # Linux, ELF HP-UX
else
   setenv LD_LIBRARY_PATH $ROOTSYS/lib
endif

if ($?DYLD_LIBRARY_PATH) then
   setenv DYLD_LIBRARY_PATH $ROOTSYS/lib:$DYLD_LIBRARY_PATH  # Mac OS X
else
   setenv DYLD_LIBRARY_PATH $ROOTSYS/lib
endif

if ($?SHLIB_PATH) then
   setenv SHLIB_PATH $ROOTSYS/lib:$SHLIB_PATH                # legacy HP-UX
else
   setenv SHLIB_PATH $ROOTSYS/lib
endif

if ($?LIBPATH) then
   setenv LIBPATH $ROOTSYS/lib:$LIBPATH                      # AIX
else
   setenv LIBPATH $ROOTSYS/lib
endif

if ($?PYTHONPATH) then
   setenv PYTHONPATH $ROOTSYS/lib:$PYTHONPATH
else
   setenv PYTHONPATH $ROOTSYS/lib
endif

if ($?MANPATH) then
   setenv MANPATH `dirname $ROOTSYS/man/man1`:$MANPATH
else
   setenv MANPATH `dirname $ROOTSYS/man/man1`
endif 
```

如果我在命令行中运行它，该脚本可以正常工作，例如

```
source /home/sm/packages/root/bin/thisroot.csh 
```

但是，如果我尝试将该命令添加到我的 .cshrc 文件中，则会失败并显示错误消息：

```
ARGS: Subscript out of range. 
```

是什么赋予了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-31T16:17:27.810

这条线似乎是问题所在：

```
set ARGS=($_) 
```

根据`tcsh(1)`手册页：

> `$_` 替换最后执行的命令的命令行。(+)

“(+)”表示这是 tcsh 特有的功能（尽管`/bin/bsd-csh`在我的 Linux 系统上似乎也支持它）。

一个快速的实验表明，如果我输入

```
source foo.csh 
```

在交互式 tcsh 提示符下，它设置`$_`为字符串`source foo.csh`——但如果我从 csh 或 tcsh 脚本执行相同的命令，则不会。（如果使用 运行脚本`csh`，`$_`则设置为`/usr/bin/tcsh`；如果使用 运行脚本`tcsh`，`$_`则设置为空字符串。）

据我所知，这种不一致的行为在任何地方都没有记录——而且`csh(1)`手册页根本没有提到`$_`。

（这种不一致在使用 csh/tcsh 时很常见。您会发现 Bourne shell`sh`以及从它派生的 shell（例如`ksh`、`bash`和`zsh`）的行为更加一致。必选链接：[Csh Programming Considered Harmful](http://www.perl.com/doc/FMTEYEWTK/versus/csh.whynot)）。

# apache - htaccess中的Apache重定向到子目录

> ID：11893738
> 
> 赞同：1
> 
> 时间：2012-08-10T00:08:28.720
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我已经建立了一个需要在公共文件夹中启动的内部应用程序，目录结构如下

```
myapp/conf
myapp/tmp
myapp/doc
myapp/public
myapp/public/css
myapp/public/js
myapp/public/index.php 
```

如果用户将其安装在 webroot 子目录中，而不是将 myapp/public 设置为 webroot，则 URL 将是

somehost/myapp/public/index.php

如何使用 /myapp/.htaccess 进行重定向，以便将所有内容转发到 /public/index.php 但也将 URL 更改为包含 /public。

我已经想出了如何重定向到公共，但由于我在 /public/ 中进行 URL 重写，我需要 $_SERVER['REQUEST_URL'] 在路径中有 /public/。

我想阻止访问其他所有内容（/conf 和 /doc 等）

运气好的话？

我尝试了什么：

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteRule (.*) index.php/$1 [R=301,L]
RewriteRule ^$ public [L]
</IfModule> 
```

但这似乎之前公开`myapp`，网址看起来像这样：`localhost/public/myapp/`，而不是我需要`localhost/myapp/public/`

简单来说，我希望 /whatever/* 的所有 URL 都将 public 附加到 /whatever/public/*。

该解决方案需要独立于域名和“myapp”名称。他们可以命名根文件夹（“myapp”），但它总是有一个名为“public”的子目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T02:02:24.013

尝试

```
RewriteEngine On
RewriteBase /myapp/

RewriteCond %{REQUEST_URI} !/public/
RewriteRule (.*) public/index.php/$1 [R=301,L]
RewriteRule ^$ public [L] 
```

最主要的是您需要将基础更改为您的应用程序名称。然后规则可以保持不变。需要该条件来防止重定向循环。但是，如果您在 /public/ 中有处理请求的 .htaccess 文件，您可能不需要它。

# asp.net - 为什么占位符必须小写？

> ID：11893740
> 
> 赞同：3
> 
> 时间：2012-08-10T00:08:57.760
> 
> 标签：asp.net, sitecore, sitecore6

我一直对此感到好奇，所以我想我会在堆栈上问它。一位帮助我完成一个项目的顾问告诉我，我的 Sitecore 占位符***总是小写。***

当时我是 Sitecore 的新手，所以我从容应对，从未真正质疑过它。然而，随着我越来越熟悉该系统以及它的可扩展性和模块化程度，我真的无法想象为什么这是一个要求..？

似乎没有关于该主题的任何文档，但是，在我见过的每个示例站点中，Sitecore 本身似乎都是小写的占位符。

这个话题[在网上被提及了几次，](http://learnsitecore.cmsuniverse.net/en/Developers/Articles/2011/03/Info-site-8-unified-page-editor.aspx)包括就[在 stack 上](https://stackoverflow.com/a/10690946/185749)，但是，问题仍然存在：为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T10:50:05.303

我不是我听说过的要求，并且在多个项目中，我的占位符不是全部小写，通常我使用驼峰式外壳。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T17:50:38.753

您*可能*指的是存在错误的特定版本的 Sitecore。目前没有要求只使用小写字母。我怀疑当 Sitecore 的依赖注入/布局引擎运行时，会将布局上的占位符键与绑定的控件进行比较，并在匹配占位符键时忽略这些情况。

# c++ - 查找字符串的长度

> ID：11893753
> 
> 赞同：1
> 
> 时间：2012-08-10T00:10:49.977
> 
> 标签：c++, string, stdstring, string-length

> **可能重复：**
> [C++ 字符串长度？](https://stackoverflow.com/questions/905355/c-string-length)

我现在真的需要帮助。如何接受字符串作为输入并找到字符串的长度？我只想要一个简单的代码来了解它是如何工作的。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T00:14:03.580

暗示：

```
std::string str;
std::cin >> str;
std::cout << str.length(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T00:14:12.983

在 C++ 中：

```
#include <iostream>
#include <string>

std::string s;
std::cin >> s;
int len = s.length(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T00:12:03.533

您可以使用`strlen(mystring)`来自`<string.h>`. 它返回字符串的长度。

请记住：C 中的字符串是一个以字符 '\0' 结尾的字符数组。保留足够的内存（整个字符串 + 1 个字节适合数组），字符串的长度将是从指针 (mystring[0]) 到 '\0' 之前的字符的字节数

```
#include <string.h> //for strlen(mystring)
#include <stdio.h> //for gets(mystring)

char mystring[6];

mystring[0] = 'h';
mystring[1] = 'e';
mystring[2] = 'l';
mystring[3] = 'l';
mystring[4] = 'o';
mystring[5] = '\0';

strlen(mystring); //returns 5, current string pointed by mystring: "hello"

mystring[2] = '\0';

strlen(mystring); //returns 2, current string pointed by mystring: "he"

gets(mystring); //gets string from stdin: http://www.cplusplus.com/reference/clibrary/cstdio/gets/ 
```

[http://www.cplusplus.com/reference/clibrary/cstring/strlen/](http://www.cplusplus.com/reference/clibrary/cstring/strlen/)

编辑：如评论中所述，在 C++ 中，最好将 string.h 称为 cstring，因此编码`#include <cstring>`而不是`#include <string.h>`.

另一方面，在 C++ 中，您还可以使用 C++ 特定的字符串库，它提供了一个字符串类，允许您将字符串作为对象使用：

[http://www.cplusplus.com/reference/string/string/](http://www.cplusplus.com/reference/string/string/)

您在这里有一个很好的字符串输入示例：[http ://www.cplusplus.com/reference/string/operator%3E%3E/](http://www.cplusplus.com/reference/string/operator%3E%3E/)

在这种情况下，您可以通过以下方式声明一个字符串并获取其长度：

```
#include <iostream>
#include <string>

string mystring ("hello"); //declares a string object, passing its initial value "hello" to its constructor
cout << mystring.length(); //outputs 5, the length of the string mystring
cin >> mystring; //reads a string from standard input. See http://www.cplusplus.com/reference/string/operator%3E%3E/
cout << mystring.length(); //outputs the new length of the string 
```

# php - 将复选框转换为图像，需要添加拖动功能来更改图像

> ID：11893756
> 
> 赞同：0
> 
> 时间：2012-08-10T00:11:01.550
> 
> 标签：php, javascript, jquery, html

我实际上将 html 复选框转换为图像（下面是代码），现在复选框有 3 种状态，一种为选中，一种为未选中，一种为空，

现在我想向它添加一个 DRAG 功能，就像我们选择未选中并拖动其他复选框一样，其他复选框应该得到这个值，我想必须更改图像。

这是此链接上的示例[http://cross-browser.com/x/examples/clickndrag_checkboxes.php](http://cross-browser.com/x/examples/clickndrag_checkboxes.php)，此示例没有图像，但我希望图像也能发生同样的事情。

任何帮助都会让我很开心，谢谢！

这是代码：

```
 <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <script type="text/javascript">
    var inputs;
    var checked = 'checked.jpg';
    var unchecked = 'unchecked.jpg';
    var na = 'na.jpg';

    function replaceChecks()
    {
    //get all the input fields on the funky_set inside of the funky_form
    inputs = document.funky_form.getElementsByTagName('input');

    //cycle trough the input fields
    for(var i=0; i < inputs.length; i++)
    {
      //check if the input is a funky_box
      if(inputs[i].className == 'funky_box')
      {
         //create a new image
         var img = document.createElement('img');

         //check if the checkbox is checked
         if(inputs[i].value == 0 )
         {
            img.src = unchecked;
            inputs[i].checked = false;
         }
         else if(inputs[i].value = 1 )
         {
            img.src = checked;
            inputs[i].checked = true;
         }
         else if(inputs[i].value = 2 )
         {
            img.src = na;
            inputs[i].checked = true;
         }

         //set image ID and onclick action
         img.id = 'checkImage'+i;

         //set name
         img.name = 'checkImage'+i;

         //set image
         img.onclick = new Function('checkChange('+i+')');
         //place image in front of the checkbox
         inputs[i].parentNode.insertBefore(img, inputs[i]);

         //hide the checkbox
         inputs[i].style.display='none';
       }
    }
     }

    //change the checkbox status and the replacement image
     function checkChange(i) 
    {
    if(inputs[i].value==0)
     {
      inputs[i].checked = true;
      inputs[i].value = 2;
      document.getElementById('checkImage'+i).src=na;
     }
     else if(inputs[i].value==1)
     {
      inputs[i].checked = false;
      inputs[i].value = 0;
      document.getElementById('checkImage'+i).src=unchecked;
      }
      else if(inputs[i].value==2)
     {
      inputs[i].checked = true;
      inputs[i].value = 1;
      document.getElementById('checkImage'+i).src=checked;
       }
    }   

     setTimeout(function(){replaceChecks();}, 0);

      </script>

       </head>

      <form name="funky_form" action='checkkkkkkkkkkkkkkkkkkkkkkkkk.php' method='POST'>
    <table id="table1" border=1px cellpadding=1px cellspacing=1px>

    <tr>
                <th>D/T</th>
                <th>1</th>
                <th>2</th>
                <th>3</th>
                <th>4</th>
                <th>5</th>
                <th>6</th>
                <th>7</th>
                <th>8</th>
                <th>9</th>
                <th>10</th>
                <th>11</th>
                <th>12</th>
                <th>13</th>
                <th>14</th>
                <th>15</th>
                <th>16</th>
                <th>17</th>
                <th>18</th>
                <th>19</th>
                <th>20</th>
                <th>21</th>
                <th>22</th>
                <th>23</th>
                <th>24</th>

    </tr>

    <?php
    $days = array('SUN');
    foreach($days as $key=>$val)
   {
    print "<tr>";
    print"<th>$val</th>";
    for($i=0; $i<24; $i++){
        print "<td>";
        print "  <input type=\"checkbox\" id=\"${val}${i}\" name=\"sun${i}\"         

     class=\"funky_box\" />";
        print "</td>";
     }
     print "</tr>";
   }

    $days = array('MON');
    foreach($days as $key=>$val)
    {
    print "<tr>";
    print"<th>$val</th>";
    for($i=0; $i<24; $i++){
        print "<td>";
        print "  <input type=\"checkbox\" id=\"${val}${i}\" name=\"mon${i}\" 

     class=\"funky_box\" />";
        print "</td>";
     }
     print "</tr>";
    }

     ?>
    </table>
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T00:14:36.323

我想 jQuery [Draggable](http://jqueryui.com/demos/draggable/)和[Droppable](http://jqueryui.com/demos/droppable/)可以帮助你。

[**示例代码**](http://jsfiddle.net/f0t0n/cyTUX/)

[](http://jsfiddle.net/f0t0n/TRsLA/)**另一个没有拖放的[**SAMPLE与带有常规复选框的示例更相似。**](http://jsfiddle.net/f0t0n/TRsLA/)**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T00:36:44.300

这真的很简单，将事件绑定到 mousedown 而不是单击，设置一个变量以指示按钮被按住，同时选中/取消选中当前复选框等。

将另一个事件设置为任何复选框的 mouseenter 事件，然后检查它是否按住鼠标按钮，并将状态设置为与第一次按下鼠标按钮的第一个复选框相同。

```
var state = false, mouse=false;

$('checkbox').on({
    click: function(e) {
        e.preventDefault();
    },
    mousedown: function(e) {
        this.checked = !this.checked;
        state = this.checked;
        if(e.which === 1) mouse = true;
    },
    mouseup: function(e) {
        if(e.which === 1) mouse = false;    
    },
    mouseenter: function(e) {
        if (mouse) this.checked = state;
    }
}); 
```

这是一个展示如何的小提琴：[**FIDDLE**](http://jsfiddle.net/8Zcbz/2/)

这仍然会有一些错误，并且需要一些额外的检查等，但它基本上是如何完成的。

我不会用一些 PHP 和 javascript 来浏览你所有的代码，如果你想要的话，你可能应该用 HTML 和一些图像设置一个小提琴，所以你必须弄清楚如何以及在哪里自己切换图像，但这应该很简单

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T01:10:46.530

有几种方法可以添加事件监听器。以下概念也可以使用 jQuery（以及我个人更喜欢的）来使用。

```
object = document.getElementById("objectName");

$(object).bind('dragstart', eventStartDrag);
$(object).bind('dragover', eventStartDrag);
$(object).bind('drag', eventDragging);
$(object).bind('dragend', eventStopDrag); 
```

还有一些 jQuery 快捷方式，例如：

```
$(object).mousedown(eventMouseDown); 
```

$(object) 是您要监听事件的对象。并非所有浏览器都支持事件捕获（Internet Explorer 不支持），但都支持事件冒泡，所以我相信最兼容的代码是在没有 jQuery 的情况下添加事件侦听器。

```
object.addEventListener('mousedown', eventStartDrag, false); 
```

根据这篇[文章](https://stackoverflow.com/questions/2398099/jquery-equivalent-of-javascripts-addeventlistener-method)，在 jQuery 中将事件侦听器绑定到文档的首选方法是使用 .on() 而不是 .bind()，但我尚未对此进行测试。

希望这可以帮助。**

# ruby-on-rails - 税号加密

> ID：11893763
> 
> 赞同：0
> 
> 时间：2012-08-10T00:11:50.253
> 
> 标签：ruby-on-rails, ruby, postgresql, encryption

我目前正在编写一个应用程序，我必须在其中安全地存储个人税号（澳大利亚）。目前它以纯文本形式存储，仅向用户显示最后几位数字。

存储数字的最佳加密是什么？

或者，在数据库中存储税号时是否有任何最佳做法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T00:29:30.900

这取决于您需要该号码的用途。理想情况下，如果您不需要显示数字而仅将其用于验证或识别，那么单向加密将是最好的（可能是哈希）。这真的取决于你需要这个号码。

# iphone - 在未来的应用程序版本中维护核心数据

> ID：11893765
> 
> 赞同：5
> 
> 时间：2012-08-10T00:11:58.107
> 
> 标签：iphone, ios, xcode, core-data

我目前正在创建一个应用程序，该应用程序需要将大量用户生成的信息存储在 Core Data 中。当我发布此应用程序的新更新时，我想确保这些用户不会丢失所有这些数据。

当我从 iPhone 中删除当前版本时，所有 Core Data 都会消失 - 当我创建新的更新版本时会发生这种情况 - 更新是否会导致所有 Core Data 在应用程序被替换时被删除？如果是这样，我必须做些什么来保存数据？

我不会在更新之间更改我的核心数据模型，如果这改变了任何东西......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T00:33:50.680

简单的问题 - 简单的回答，Core Data 作为 iPhone 备份的一部分备​​份到 iTunes/iCloud，并且用户数据也在更新之间保持不变。

您可以选择包含要包含在 iCloud 同步中的核心数据，这意味着即使删除应用程序并重新安装它，数据也会保留。

如果您更改模型，则可以合理地将旧方案映射到新方案，然后在发生新更新时通过此映射模型传输数据，以前的方案数据将被传输到新的核心数据方案中。

核心数据版本控制：[https ://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreDataVersioning/CoreDataVersioning.pdf](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreDataVersioning/CoreDataVersioning.pdf)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T00:30:22.553

如果应用商店 Ver1.0 中有您的应用。更新 Ver1.0.1 或更高版本，CoreData 将被维护。如果核心数据模型发生变化，尽管之前的所有核心数据都将保留。

如果应用商店 Ver 1.0 中有您的应用。删除 1.0 版。再次下载或下载更新版本，CoreData 将被删除。

如果您删除应用程序，核心数据将被删除。为了防止这种情况，使用 iCloud 同步数据应该可以工作。

参考以下站点，[iOS 操作方法：将 Core Data 与 iCloud 一起使用](https://goddess-gate.com/dc2/index.php/post/452)

一定是您将阅读以下 Apple PDF：[coredata 模型版本控制和数据迁移编程指南](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreDataVersioning/CoreDataVersioning.pdf)

# cloudbees - 首次安装 CloudBees SDK 并运行 bees 命令 - 下载插件时出错

> ID：11893774
> 
> 赞同：3
> 
> 时间：2012-08-10T00:12:43.013
> 
> 标签：cloudbees

我已经安装了[cloudbees SDK](http://wiki.cloudbees.com/bin/view/RUN/BeesSDK)，现在第一次运行 bees 命令。

我看到这个：

```
Installing plugin: org.cloudbees.sdk.plugins:ant-plugin:LATEST

You have not created a CloudBees configuration profile, let's create one now... 
Enter your CloudBees account email address: XXX 
Enter your CloudBees account password:

ERROR: Failed to install org.cloudbees.sdk.plugins:ant-plugin:LATEST 
```

因此，无法使用它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T00:12:43.013

在大多数情况下，如果您只是再次运行 bees 命令，它将再次下载插件（插件仅在第一次需要时获取）。如果您使用的是 VPN，这也可能会导致一些临时问题。

您还可以添加 -v 标志以从命令行获取更详细的消息。

# json - Mono WebService 拒绝返回 json

> ID：11893778
> 
> 赞同：1
> 
> 时间：2012-08-10T00:13:23.910
> 
> 标签：json, web-services, mono

我正在尝试使用返回 json 的 Mono 3.0.3.5 创建 Web 服务。

但到目前为止，我一直无法获得返回 xml 以外的任何内容的服务。这似乎是过去讨论过很多的问题，但即使在检查了我对这里和其他地方的大量资源的尝试之后，我也无法说出我遗漏了什么。

我创建了一个空的 ASP.NET 解决方案，并在其中添加了一个带有代码隐藏页面的 asmx。据我所知，使用 ScriptService 属性装饰服务类名称和使用 ScriptMethod 的方法/函数名称以及为 ResponseFormat 属性指定 Json 是代码中唯一必要的步骤。

```
using System;
using System.Web;
using System.Web.Services;
using System.Web.Script.Services;

namespace MonoJsonTest
{
   [WebService]
   [ScriptService]
   public class GimmeJson : System.Web.Services.WebService
   {
      [WebMethod]
      [ScriptMethod(ResponseFormat=ResponseFormat.Json)]
      public    string  simpleTestString()
      {
         return DateTime.Now.ToString();
      }
   }
} 
```

（我知道将日期放入 json 的问题，我只是想要一些会随着后续调用我的服务而改变的字符串）

然后我将 System.Web.Extensions 添加到项目的引用中。这是针对 .NET 3.5 版构建的，因此我确保包含了 System.Web.Extensions 的 3.5 版。

然后 web.config 的 httpHandlers 被修改为通过 ScriptHandlerFactory （如我发现的几页所述）

[http://vampirebasic.blogspot.com/2009/04/aspnet-ajax-in-mono.html](http://vampirebasic.blogspot.com/2009/04/aspnet-ajax-in-mono.html)

[http://encosia.com/asmx-scriptservice-mistakes-installation-and-configuration/](http://encosia.com/asmx-scriptservice-mistakes-installation-and-configuration/)

敏锐的眼睛可能会注意到两个页面上指定的 web.config 更改存在差异。“Culture=neutral”属性在第一页的 type 属性的字符串内部指定，但在第二页作为 add 标记的属性。但是我发现当指定第二种方式时，启动服务时出现错误。

我的最终 web.config：

```
<?xml version="1.0"?>
<configuration>
    <system.web>
    <compilation defaultLanguage="C#" debug="true">
      <assemblies>
        <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral,    PublicKeyToken=31bf3856ad364e35" />
      </assemblies>
    </compilation>
    <customErrors mode="RemoteOnly">
    </customErrors>
    <authentication mode="None">
    </authentication>
    <authorization>
      <allow users="*" />
    </authorization>
    <httpHandlers>
      <!-- should produce json responses -->
      <remove verb="*" path="*.asmx" />
      <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    </httpHandlers>
    <trace enabled="false" localOnly="true" pageOutput="false" requestLimit="10" traceMode="SortByTime" />
    <sessionState mode="InProc" cookieless="false" timeout="20" />
    <globalization requestEncoding="utf-8" responseEncoding="utf-8" />
    <pages>
    </pages>
  </system.web>
</configuration> 
```

但是从 WSDL 页面或使用来自 javascript 的 ajax 查询（使用 JQuery 库）访问服务（本地），它总是返回 XML。使用 Charles 和 Firefox 调试工具检查响应标头向我显示了 text/xml 的响应类型。

经研究，调用时似乎需要向服务请求json，所以我设置了ajax调用的contentType、accept和dataType参数来指定json，但这并没有什么区别。奇怪的是，即使请求标头显示“Accepts”参数在我在 Ajax 调用中明确设置后仍然指定 xml。

这是 ajax 调用（注意接受并且 dataType 类型设置为 json）：

```
$.ajax({
url: "http://localhost:8080/GimmeJson.asmx/simpleTestString",
type: "POST",
contentType: "application/json; charset=utf-8",
accepts: "application/json; charset=utf-8",
data: "{}",
dataType: "json",
success: function (data, textStatus, jqXHR) { console.log( "success" ); alert.show("success"); },
error: function(request, type, errorThrown) { console.log( "error" ); }
}); 
```

这是该调用生成的请求标头（Accept 仍然是 xml）：

```
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding:gzip,deflate
Accept-Language:en-us,en;q=0.5
Access-Control-Request-Headers:content-type
Access-Control-Request-Method:POST
Cache-Control:no-cache
Host:localhost:8080
Origin:null
Pragma:no-cache
Proxy-Connection:keep-alive
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:14.0) Gecko/20100101 Firefox/14.0.1 
```

这会产生一个 200 的 HTTP 代码，以及这个响应头（注意内容类型是 xml）：

```
Cache-Control:private
Content-Length:103
Content-Type:text/xml; charset=utf-8
Date:Thu, 09 Aug 2012 23:38:59 GMT
Keep-Alive:timeout=15, max=100
Proxy-Connection:Keep-alive
Server:Mono.WebServer2/0.2.0.0 
UnixX-AspNet-Version:2.0.50727 
```

我注意到我不确定的一件事很重要，但似乎很奇怪。我浏览了 Mono 中的 System.Web.Extensions dll，发现其中似乎不存在 ScriptHandlerFactory。修改 web.config 中添加工厂的行以指定“FOOScriptHandlerFactory”作为类型在启动服务时没有产生任何错误，这似乎表明 Mono 没有在 web.config 中报告未找到的类型。但我对 .Net 和 Mono 的这方面了解不够，无法肯定地说。但由于这个工厂是自动 Json 序列化的关键，这可能很重要。

我不确定我在这里省略了什么。我觉得我没有在服务器端正确配置一些东西，或者它会在 WSDL 页面上的某处报告返回类型的 json。正如您可能已经猜到的那样，我还是在线开发的新手，所以如果我忽略了非常明显的事情，我深表歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T21:25:03.667

您是否尝试过将 WebMethod 设为静态？

我要考虑的另一点是返回的函数是否可以返回 3 个值而不仅仅是一个。

# macos - 安装 Cairo R 包时出错

> ID：11893780
> 
> 赞同：2
> 
> 时间：2012-08-10T00:13:36.720
> 
> 标签：macos, r, cairo

我正在尝试`Cairo`在 Mac OS X 10.7.4 上的 R 开发版本中安装该软件包，但遇到了无法解决的问题。

我已经用自制软件（即，`brew install cairo`）安装了 Cairo，并收到以下消息：

> ==> 警告 这个公式只适用于小桶，所以它没有符号链接到 /usr/local。
> 
> Mac OS X 已经提供了这个程序，并行安装另一个版本可能会导致各种麻烦。
> 
> Leopard 提供的 Cairo 太旧，无法链接到较新的软件。
> 
> 一般来说，这对您没有任何后果。如果您构建自己的软件并且它需要此公式，则需要将其 lib 和包含路径添加到构建变量中：
> 
> ```
> LDFLAGS  -L/usr/local/Cellar/cairo/1.12.2/lib
> CPPFLAGS -I/usr/local/Cellar/cairo/1.12.2/include 
> ```

考虑到上述消息，我尝试`Cairo`使用以下 R 命令从 R-Forge 安装软件包：

> install.packages("Cairo", repos="http://www.rforge.net/", configure.args = c("CAIRO_LIBS=/usr/local/Cellar/cairo/1.12.2/lib", "CAIRO_CFLAGS =/usr/local/Cellar/cairo/1.12.2/include/cairo"))

我收到以下错误：

> 检查 cairo.h 的可用性...否
> 
> 检查 cairo.h 的存在...否
> 
> 检查 cairo.h... 不
> 
> 配置：错误：找不到 cairo.h！
> 
> 请安装 cairo (http://www.cairographics.org/) 和/或设置
> 
> CARO_CFLAGS/LIBS 对应。错误：包“Cairo”的配置失败</p>

我在没有参数的情况下重复了相同的命令`repos`（默认情况下，我使用 FHCRC 镜像），结果相同。

此时，问题似乎很明显：文件`cairo.h`不存在。但后来我列出了目录中的`include/cairo`文件。这是回应：

> ls /usr/local/Cellar/cairo/1.12.2/include/cairo
> 
> cairo-deprecated.h cairo-ft.h cairo-ps.h cairo-script-interpreter.h cairo-svg.h cairo-xcb.h cairo-xlib.h cairo-features.h cairo-pdf.h cairo-quartz .h cairo-script.h cairo-version.h cairo-xlib-xrender.h cairo.h

所以，我将`Cairo`包的安装指向适当的位置，但错误仍然存​​在。我尝试过变体，例如`CAIRO_CFLAGS=/usr/local/Cellar/cairo/1.12.2/include`，但没有运气。

想法？非常感谢您提供的任何帮助。

如果有必要，这是我的`sessionInfo`：

> R 开发中（不稳定）（2012-08-08 r60208）平台：x86_64-apple-darwin11.4.0（64 位）
> 
> 语言环境：[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
> 
> 附加的基础包：[1] stats graphics grDevices utils
> datasets methods base
> 
> 其他附加软件包：[1] BiocInstaller_1.5.12
> 
> 通过命名空间加载（未附加）：[1] tools_2.16.0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2020-05-10T01:07:39.410

我对 cairo 配置错误有类似的问题，我已经用自制软件安装了 cairo。试试下面

```
brew install pkg-config 
```

这解决了我的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T19:51:39.293

我和一个同事只是通过忽略我上面输入的所有内容来解决问题。相反，我们从源代码手动安装了 Cairo 及其*所有*依赖项，从而绕过`brew`了`port`. 这就像一个魅力，所以我不完全确定上面有什么问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-09T13:35:55.190

在尝试了此处列出的所有内容后，我发现了这篇关于使用 brew 安装“完整 R 包”的博客文章：[https ://luispuerto.net/blog/2018/05/11/installing-r-with-homebrew-with-all-能力/](https://luispuerto.net/blog/2018/05/11/installing-r-with-homebrew-with-all-the-capabilities/)

最终对我有用的是使用 cairo 显式构建 R（brew 的默认 R 水龙头使用 --without-cairo 并且简单地编辑水龙头并不能解决我的问题）。

在 macOS Catalina 10.15.6 下使用 R 4.0.2、cairo 1.16.0_3 对我来说就像一个魅力。

# f# - 如何在 F# 中定义显式运算符？

> ID：11893781
> 
> 赞同：17
> 
> 时间：2012-08-10T00:13:39.397
> 
> 标签：f#, c#-to-f#

如何`explicit`在 F# 中实现相当于 C# 的运算符？是否支持？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-10T00:37:53.733

只需实现一个`op_Explicit`静态成员，如

```
type SomeType() =
    static member op_Explicit(source: SomeType) : int =
        1 
```

然后您可以使用相应的 F# 显式转换运算符，例如

```
SomeType() |> int 
```

您可以通过注意类型签名上的静态成员约束来了解它是如何工作的`int`

```
^a -> int when  ^a : (static member op_Explicit :  ^a -> int) 
```

# sql-server - 基于文本列的SQL数学计算

> ID：11893785
> 
> 赞同：1
> 
> 时间：2012-08-10T00:14:14.240
> 
> 标签：sql-server

我有一个包含 3 个文本列的表格，我想在上面进行一些数学计算。表如下所示：

```
Date        Column1    Column2    Column3
-----------------------------------------
2012-08-01  STABLE     NEG        STABLE
2012-08-02  NEG        NEG        STABLE
2012-08-03  STABLE     STABLE     STABLE 
```

想要我想要实现的是

*   如果 2/3 列等于“STABLE”，则返回 66%，即 2/3，因为它在第一行中
*   如果 1/3 列等于“STABLE”，则返回 33%，即 1/3，因为它在第二行中
*   如果 3/3 列等于“STABLE”，则返回 100%，即 3/3，因为它位于第三行

我想知道如何使用 SQL 来实现这一点？我目前正在研究 MSSQL Server 2008 R2。

我希望我的问题足够清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T00:31:00.900

那么，像这样的事情？

```
select 
   ((case when col1 = 'Stable' then 1.0 else 0.0 end) + 
   (case when col2 = 'Stable' then 1.0 else 0.0 end) + 
   (case when col3 = 'Stable' then 1.0 else 0.0 end)) / 3.0
from yourtable 
```

您可以对输出进行一些格式化，但应该非常接近您要查找的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T04:05:56.520

如果这些是列值的唯一选择：

```
select ( Len( Column1 ) + Len( Column2 ) + Len( Column3 ) - 9 ) / 3 / 3.0 * 100.0 as 'Percent'
  from Foo 
```

优化器应该处理常量折叠。为了清楚起见，它们被显示出来。

[神曲](http://en.wikipedia.org/wiki/Divine_Comedy)为编写这样的代码的人描述了一个地方。

# android - 在我的应用程序中使用 Android 4.1 (Jelly Bean) 中的离线语音到文本？

> ID：11893788
> 
> 赞同：9
> 
> 时间：2012-08-10T00:14:22.177
> 
> 标签：android, speech-recognition, offline, android-4.2-jelly-bean

Android 4.1 包括离线语音输入。当您单击弹出式键盘上的麦克风时，您可以看到这一点，如果您没有网络连接，它仍然可以工作。然而，当你想从你的应用程序中进行语音识别时，看起来`RecognizerIntent`API 仍然需要网络连接。

是否有用于从我的应用程序访问 Android 中新的离线语音输入功能的 API？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-17T21:26:50.907

Android 使用两种不同的语音 API：语音*输入*（键盘上的键）和语音*识别*（其他任何地方）。语音输入是离线启用的，语音识别不是（对于 4.1 JellyBean）。

这就是为什么键盘上的键可以离线工作，但其他地方没有。出于某种原因，Google 决定制作这两个独立的 API。

有关语音输入的更多信息，请参见此处： [http ://android-developers.blogspot.com/2011/12/add-voice-typing-to-your-ime.html](http://android-developers.blogspot.com/2011/12/add-voice-typing-to-your-ime.html)

# c++ - 创建.dat文件（fstream）c ++

> ID：11893790
> 
> 赞同：0
> 
> 时间：2012-08-10T00:14:31.360
> 
> 标签：c++, fstream, createfile

```
#include <iostream>
#include <fstream>
#include <cstdlib>
using namespace std;

int main() {

fstream inOutGrades( "grades.dat", ios::in | ios::out | ios::binary );

if ( !inOutGrades ) {
    cerr << "The file could not be opened." << endl;
    exit(1);
}

return 0;
}

//Output is 
The file could not be opened. 
```

我已经在 Windows 7 和 lubuntu 上使用 QT 和 Code::blocks 尝试过这个程序。它们都无法创建 Grades.dat 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T00:25:05.333

删除`ios::in`并应创建文件。您无法指定`ios::in`文件是否不存在。但是，如果您添加`ios::trunc`，则可以同时指定两者`ios::in`，并且`ios::out`因为您从一个空文件开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T00:24:51.383

```
fstream FHandle;
FHandle.open("grades.dat", ios::out);
if(FHandle.is_open())
    cout << "Opened !";
else
    cout << "Not Opened !"; 
```

这应该有效。

# ruby-on-rails - 通过 rails has_many 删除记录：通过

> ID：11893794
> 
> 赞同：2
> 
> 时间：2012-08-10T00:14:52.267
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我的模型架构：

轮询

```
has_many :questions
has_many :responses :through => :questions 
```

问题

```
belongs_to :poll
has_many :responses 
```

回复

```
belongs_to :question 
```

**当我尝试运行时出现**问题**，或者`@poll.responses.delete_all`我收到此错误：`clear``destroy_all`**

 **`ActiveRecord::HasManyThroughCantAssociateThroughHasOneOrManyReflection: Cannot modify association 'Poll#responses' because the source reflection class 'Response' is associated to 'Question' via :has_many.`

更新：仍然不确定为什么会这样，但这里有一个解决方法： `@poll.responses.each(&:destroy)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T00:29:29.543

尝试

```
Poll.first.responses.each(&:destroy) 
```

仅当连接模型上的关联为 时，删除才有效`:belongs_to`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T00:20:47.377

你需要使用destroy_all，它对关系最有效。

```
@poll.responses.destroy_all 
```**

# r - 将 data.frame 更改为数组

> ID：11893801
> 
> 赞同：-7
> 
> 时间：2012-08-10T00:16:20.080
> 
> 标签：r

这是我的代码，是否有更简单的方法将 iris 更改为数组？
要求：当你改变它时，d[2,3]=iris[2,3]=1.4

```
data(iris)
r=nrow(iris)
c=ncol(iris)
d=array(0,dim=c(r,c))
for (i in 1:r){
  for (j in 1:c){
      d[i,j]=iris[i,j]}} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T06:46:36.910

这是一件非常不寻常的事情。

**不，这比不寻常更糟糕。这可能只是坏事。如果所有数据都属于一个类，矩阵和数组是有用的、合适的并且非常快。如果您有混合类，请改用数据框。**

但是给你。在第一个示例中，您的所有数据都转换为`character`，在第二个示例中为`numeric`。

```
x <- as.array(as.matrix(iris))

head(x)
     Sepal.Length Sepal.Width Petal.Length Petal.Width Species 
[1,] "5.1"        "3.5"       "1.4"        "0.2"       "setosa"
[2,] "4.9"        "3.0"       "1.4"        "0.2"       "setosa"
[3,] "4.7"        "3.2"       "1.3"        "0.2"       "setosa"
[4,] "4.6"        "3.1"       "1.5"        "0.2"       "setosa"
[5,] "5.0"        "3.6"       "1.4"        "0.2"       "setosa"
[6,] "5.4"        "3.9"       "1.7"        "0.4"       "setosa" 
```

或者...

```
x <- array(unlist(iris), dim=c(150, 5), dimnames=list(NULL, names(iris)))

head(x)
     Sepal.Length Sepal.Width Petal.Length Petal.Width Species
[1,]          5.1         3.5          1.4         0.2       1
[2,]          4.9         3.0          1.4         0.2       1
[3,]          4.7         3.2          1.3         0.2       1
[4,]          4.6         3.1          1.5         0.2       1
[5,]          5.0         3.6          1.4         0.2       1
[6,]          5.4         3.9          1.7         0.4       1 
```

# iphone - 同时缩放和移动图层

> ID：11893804
> 
> 赞同：0
> 
> 时间：2012-08-10T00:16:41.523
> 
> 标签：iphone, objective-c, cocoa-touch, calayer

我正在使用`CABasicAnimation`更改边界属性，然后使用它来更改图层的位置属性。是否可以同时进行？有点像改变框架`UIView`？

```
CGRect oldBounds = mask.bounds;
CGRect newBounds = CGRectMake(0,0, rect.size.width * scale, rect.size.height * scale);
NSLog(@"%@", NSStringFromCGRect(newBounds));
CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"bounds"];

animation.fromValue = [NSValue valueWithCGRect:oldBounds];
animation.toValue = [NSValue valueWithCGRect:newBounds];

mask.bounds = newBounds;
[mask addAnimation:animation forKey:@"bounds"];

CGPoint oldPos = mask.position;
CGPoint newPos = CGPointMake(rect.origin.x * scale, rect.origin.y * scale);

CABasicAnimation *animation2 = [CABasicAnimation animationWithKeyPath:@"position"];

animation2.fromValue = [NSValue valueWithCGPoint:oldPos];
animation2.toValue = [NSValue valueWithCGPoint:newPos];

mask.position = newPos;
[mask addAnimation:animation2 forKey:@"position"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T00:23:07.813

编辑：更改为提供更正确的动画...

您可以一次添加 2 个动画...

像这样：

```
CALayer * myLayer ;

{
    CABasicAnimation * anim = [ CABasicAnimation animationWithKeyPath:@"position" ] ;
    anim.fromValue = [ NSValue valueWithCGPoint:layer.position ] ;
    [ layer addAnimation:anim forKey:nil ] ;
}

layer.position = <#newPosition#> ;

{
    CABasicAnimation * anim = [ CABasicAnimation animationWithKeyPath:@"bounds" ] ;
    anim.fromValue = [ NSValue valueWithCGRect:layer.bounds ] ;
    [ layer addAnimation:anim forKey:nil ] ;
}

layer.bounds = <#newBounds#> ; 
```

# php - 将 php 附加到 div 并维护当前的 css

> ID：11893806
> 
> 赞同：1
> 
> 时间：2012-08-10T00:16:48.757
> 
> 标签：php, jquery

好的.. 这是文件 lo_add.php：

```
<div class="rowElem">
    <label>Item <? echo $i ?>:</label>
    <div class="formRight searchDrop">
        <select name="lo_item[]" class="chzn-select" data-placeholder="Choose an Item">
            <option value=""></option>
            <? $item_query = mysql_query("select id,code,title,price from items where domain_id='$domain_id' order by code");
            while ($items = mysql_fetch_array($item_query)) { ?>
                <option value="<? echo $items["id"] ?>"><? echo $items["code"]." - ".$items["title"]." - RM".$items["price"] ?></option>
            <? } ?>
        </select>
    </div>
    <label>Delivery Address :</label>
    <div class="formRight searchDrop">
        <select name="lo_site[]" class="chzn-select" data-placeholder="Choose a Delivery Address">
            <option value=""></option>
                <? $site_query = mysql_query("select id,name from sites where domain_id='$domain_id' order by name");
                while ($sites = mysql_fetch_array($site_query)) { ?>
                    <option value="<? echo $sites["id"] ?>"><? echo $sites["name"] ?></option>
                <? } ?>
        </select>
    </div>
    <div class="fix"></div>
    <label>Quantity:<span class="req">*</span></label>
    <div class="formRight onlyNums">
        <input type="text" name="lo_quantity[]" id="lo_quantity[]"/>
    </div>
    <div class="fix"></div>
</div> 
```

这是调用css的html文件，一开始你有什么：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
<title>Mecacom Technologies&reg; Maintenance System &copy; 2012</title>

<link href="/css/main.css" rel="stylesheet" type="text/css" />
<link href='http://fonts.googleapis.com/css?family=Cuprum' rel='stylesheet' type='text/css' />

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="js/plugins/wizards/jquery.validate.js"></script>
<script type="text/javascript">
$(document).ready(function() {
  $('#addElement').click(function() {
    var data = '';
    $.get('/ajax/lo_add.php', data, function(response){
      $('#hello').append(response);
    });
  });
});
</script>

</head>
<body>
    <div class="content" id="container">
        <div class="title"><h5>Record New Local Order</h5></div>

        <form action="<? echo $PHP_SELF ?>?add=1" id="valid" class="mainForm" method="post" enctype="multipart/form-data">
            <fieldset>
                <div class="widget">
                    <div class="head"><h5 class="iLocked2">New Local Order Credentials</h5></div>

                    <div class="rowElem noborder">
                        <label>Order ID:<span class="req">*</span></label>
                        <div class="formRight">
                            <input type="text" class="validate[required]" name="order_id" id="order_id"/>
                        </div>
                        <div class="fix"></div>
                   </div>

                    <div class="rowElem noborder">
                        <label>Order Date:<span class="req">*</span></label>
                        <div class="formRight">
                            <input type="text" name="order_date" class="datepicker validate[required]" />
                        </div>
                        <div class="fix"></div>
                    </div>
                    <div id="hello"></div>

                    <div class="fix"></div>
                    <a href="#" id="addElement">Click To Append More Item</a>
                    <input type="submit" value="Next" class="greyishBtn submitForm" />
                    <div class="fix"><input type="hidden" name="addnow" value="1" /></div>
                </div>
            </fieldset>

        </form>
    </div>
</body>
</html> 
```

*叹息*..相当多...你认为在jquery追加后css没有正确呈现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T04:05:47.817

我可以从您的实时测试页面中看到，您正在使用[Chosen](http://harvesthq.github.com/chosen/)来处理下拉列表和 jQuery[验证插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)来验证数量字段。

第一件事是确保您调用`chosen()`新创建的下拉菜单。这必须为新元素调用，因为 Chosen 不仅依赖 CSS，还改变了下拉列表的整个 HTML 结构。所以添加这一行，在你的追加之后，

```
$(".chzn-select").chosen() 
```

其次是确保您通过调用`validate()`它们来验证新创建的数量文本字段，或者重新调用您调用的任何 javascript 来初始化验证插件。

# java - 从另一个类java调用方法

> ID：11893816
> 
> 赞同：0
> 
> 时间：2012-08-10T00:18:08.830
> 
> 标签：java

我有多个类，并试图在不同的类中调用一个方法。这应该可行，但会出现错误：

```
TheMethods method = new TheMethods(); 
```

Java 告诉我构造函数 TheMethods() 是未定义的。我做错了什么？

编辑：我需要传递对我的主类的引用并对其进行初始化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T00:21:30.650

您在 TheMethods 上提供的唯一构造函数是

```
 public TheMethods(MCTag m) {... 
```

它接受一个 MCTag 参数，并且您试图调用一个无参数构造函数，正如编译器告诉您的那样，该构造函数不存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T00:23:25.083

在您的构造函数中，您有一个参数`MCTag m`。如果要使用此构造函数，则需要这样做：

```
TheMethods method = new TheMethods(MCTag m); 
```

构造函数与任何其他方法一样，必须具有正确的参数才能使其正常工作。

编辑：它看起来像这样：

```
MCTag myTag; 
TheMethods method = new TheMethods(myTag); 
method.selectPlayer(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T00:21:34.913

添加不带参数的默认构造函数

公共方法（）{}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T00:22:27.263

我在您的代码中看到的唯一 ctor 是：

```
public TheMethods(MCTag m) 
```

但您没有在此处的示例代码中传递任何值

确实没有定义任何 TheMethods() ctor

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-01-02T04:00:20.420

要引用另一个类中的*公共*方法，请调用

```
Class.Method(); 
```

# c++ - 通过 c++ pugixml 库检索 PCDATA xpath

> ID：11893818
> 
> 赞同：0
> 
> 时间：2012-08-10T00:18:48.663
> 
> 标签：c++, xml, xpath, pugixml

我花了上周阅读和重新阅读 pugixml 文档，但我找不到使用 xpath 检索 PCDATA 的方法。

请解释我会从标题中提取文本：

```
<html><head><title>Hello!</title></head></html> 
```

上次我问这个问题时，我得到的唯一答案是关于通用 xpath 查询，而不是专门针对 pugixml 库函数。我已经彻底阅读了 xpath 文档，所以不用担心对我进行教育。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T07:25:30.260

```
const char* text = doc.select_single_node("html/head/title/text()").node().value(); 
```

*   `select_single_node`选择 PCDATA 节点
*   `.node()`从 xpath_node 转换为 xml_node（这是必要的，因为 XPath 节点是 xml 节点或属性）
*   `.value()`获取节点的值（即文本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T00:37:18.363

我在获取 PCDATA 时做了什么我首先找到了节点，然后我打电话给

```
node = retrive_xml_node_from_xpath();
node.first_child().value; 
```

因此，对于您展示的示例，您将创建一个 xpath 来查找标题节点，然后获取其第一个子节点值。

# php - 如何打开弹出窗口并重新加载另一个页面？

> ID：11893819
> 
> 赞同：0
> 
> 时间：2012-08-10T00:18:53.333
> 
> 标签：php, javascript, refresh

如何使用一些代码打开一个弹出窗口，并在完成工作时关闭它？并重新加载打开弹出窗口的页面。使困惑？我也是 。对不起哈哈

例如：

Page_1 有一个按钮，用于打开一个带有表单的新窗口 (Page_2)。当我提交 Page_2 表单时，Page_2 应该关闭并且 Page_1 也会自行刷新。

是否可以？您可以链接指南或以某种方式帮助我吗？

我正在使用，PHP，Javascript。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T00:36:23.647

在父页面上，您将需要一个函数来加载您的子页面和一个将重新加载自身的函数

```
<script type="text/javascript">
function loadPopup(){
    window.open("yourpopup.html");
}

function reloadPage(){
    window.location.reload()
}    
</script> 
```

现在在弹出页面上，您可以使用“opener”调用父函数，如下所示：

```
<script type="text/javascript">
function somethingWasClicked(){
    window.opener.reloadPage();
    window.close();
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T00:34:39.460

你可以使用这样的东西：

```
function refreshParent() {
  window.opener.location.href = window.opener.location.href;

  if (window.opener.progressWindow)

 {
    window.opener.progressWindow.close()
  }
  window.close();
} 
```

# php - 我可以有一个 Wordpress is_page 数组范围吗？

> ID：11893823
> 
> 赞同：0
> 
> 时间：2012-08-10T00:19:32.763
> 
> 标签：php, wordpress

我经常使用 Wordpress **is_page**条件标记，通常我定义一个 ID 或一组 ID，以包含或排除显示某些自定义代码。

我想弄清楚的是，我是否可以定义一系列 ID 作为参数输入。

**下面是一个使用 is_page 条件的简单示例：**

```
<?php if(is_page( 5 ): ?>
    <p>This is some text</p>
<?php endif; ?> 
```

**下面是一个将 id_page 条件与数组一起使用的简单示例：**

```
<?php if(is_page( array( 5,6,7 ) ): ?>
    <p>This is some text</p>
<?php endif; ?> 
```

**我想要做的是，我可以在其中传递一个参数，并将其定义为一个 ID 范围，例如 5-7：**

```
$arg = 5-7;
<?php if(is_page( $arg ): ?>
    <p>This is some text</p>
<?php endif; ?> 
```

在我定义 arg 的地方，我认为这可能是设置边界、定义数组并将其放在 foreach 语句中的问题，但我仍在努力解决这一切。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T00:23:15.147

根据[http://codex.wordpress.org/Function_Reference/is_page](http://codex.wordpress.org/Function_Reference/is_page)，您不能将其用作范围。但是，我会改用这个函数

```
$isPage = false;
foreach(range(5, 7) as $page)
{
    if(is_page($page))
        $isPage = true;
} 
```

# android - 如何立即刷新图像视图

> ID：11893826
> 
> 赞同：14
> 
> 时间：2012-08-10T00:20:00.747
> 
> 标签：android, multithreading, image

在我的 android 应用程序中，我从云端下载了一张图片。下载是在一个线程中执行的，在同一个线程中，我还使用新下载的图像设置了一个图像视图。设置图像后，我然后调用`postinvalidate()`.

但是图像不会立即显示出来。有没有办法让重绘立即发生？我需要一种触发绘图周期的方法。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-08-10T01:43:17.197

从 View 类派生的每个类都有`invalidate()`和`postInvalidate()`方法。如果`invalidate()`被调用，它会告诉系统当前视图已经改变，应该尽快**重绘**。由于此方法只能从您的**UIThread调用，当您****不在****UIThread**中并且仍想通知系统您的视图已更改时，需要另一个方法。该`postInvalidate()`方法从**非 UIThread**通知系统，并尽快在 UIThread 上的**下一个**事件循环中重绘视图。

在您的情况下，您可以在（智能后台线程）的帮助下实现您想要的`AsyncTask`。AsyncTask 可以正确且轻松地使用 UI 线程。此类允许在 UI 线程上执行后台操作（在您的情况下在后台下载图像）并发布结果（将您的位图设置为 ImageView），而无需操作线程和/或处理程序。

异步任务由在后台线程上运行的计算定义，其结果在 UI 线程上发布。异步任务由**3 个通用类型**定义，称为 Params、Progress 和 Result，以及**4 个步骤**，称为 begin、doInBackground、processProgress 和 end。

4个步骤

当一个异步任务被执行时，任务会经过 4 个步骤：

`onPreExecute()`，在任务执行后立即在 UI 线程上调用。此步骤通常用于设置任务，例如在从云下载图像之前在用户界面中显示进度条，用于提供良好的用户体验。

`doInBackground(Params...)`，在 onPreExecute() 完成执行后立即在后台线程上调用。此步骤用于执行可能需要很长时间的后台计算。异步任务的参数传递到这一步。计算的结果必须由这一步返回，并将传递回最后一步。此步骤还可以使用 publishProgress(Progress...) 来发布一个或多个进度单元。这些值在 UI 线程上的 onProgressUpdate(Progress...) 步骤中发布。

`onProgressUpdate(Progress...)`，在调用 后在 UI 线程上调用`publishProgress(Progress...)`。执行的时间是不确定的。此方法用于在后台计算仍在执行时在用户界面中显示任何形式的进度。

`onPostExecute(Result)`，在后台计算完成后在 UI 线程上调用。背景计算的结果作为该方法中的参数传递给此步骤，您可以将位图设置为您的 imageView 并使您的视图无效

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-03T19:56:47.207

无效化不起作用。临时更改 uri 或 url 或图像的路径并更改回所需的路径有效。例如，如果我有

```
image_url="myhost/img.png";
himg.setImageURI(image_url, imageLoader); 
```

我可以将其刷新为：

```
 himg.setImageURI(null, imageLoader);
 himg.setImageURI(image_url, imageLoader) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-10T00:23:49.467

你试过用[`invalidate()`](http://developer.android.com/reference/android/view/View.html#invalidate%28%29)吗？它强制视图立即重绘，而不是在下一个周期

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T00:52:23.567

```
new Thread(new Runnable() {

            @Override
            public void run() {
                // TODO Auto-generated method stub
                while (!socket.isClosed()) {
                    imgArray = receiveImagebytes();
                }
            }
        }).start();

        try {
        Thread.sleep(5000);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

while (!socket.isClosed()) {
            runOnUiThread(new Runnable() {

                @Override
                public void run() {
                    // TODO Auto-generated method stub

                    imageView.setImageBitmap(BitmapFactory.decodeByteArray(imgArray, 0, imgArray.length));
                    imageView.invalidate();
                }
            }); 
```

# java - Java 6+ 中已知的易受攻击的方法？

> ID：11893829
> 
> 赞同：0
> 
> 时间：2012-08-10T00:20:36.657
> 
> 标签：java, security, owasp

我有兴趣学习安全编码最佳实践（特别是针对 Java 应用程序），并且我正在阅读 OWASP 的安全编码实践清单。在他们的*内存管理*部分，他们声明如下：

> 避免使用已知的易受攻击的函数（例如，`printf`、`strcat`、`strcpy`等）。

我不是 C/C++ 开发人员，但这一定意味着上述函数存在安全漏洞。我对易受攻击的 Java 方法进行了几次搜索，结果就是这个[CVE](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2012-0507)。

哪些 Java SE/EE 方法（如果有）适用于 OWASP 的此公告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T00:44:09.620

对于 C API，是的，如果不仔细检查您的参数，您可能会因无意的内存损坏而导致这些函数出现问题。

在 Java 中，由于所有操作都是自动检查的，因此不应发生此类内存损坏漏洞（除非实现中的错误）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T00:56:55.997

这些是特别容易受到缓冲区溢出和格式字符串攻击的 C 函数。

Java 通常没有这些问题，但同样的经验法则也适用——不要相信你的输入。

# 反射和序列化

Java 的反射 API 可能是漏洞的来源。

如果攻击者可以使他们给您的字符串的一部分被视为类、方法或属性名称，那么他们通常会导致您的程序执行您不希望的事情。

例如，

```
ObjectInputStream in = ...;
MyType x = (MyType) in.readObject(); 
```

将允许控制内容的攻击者`in`导致加载和初始化 CLASSPATH 上的任何类，并允许调用 CLASSPATH 上任何可序列化类的任何构造函数。例如，如果您的 CLASSPATH 上碰巧有一个 JS 或 Python 解释器，他们可能能够访问 String -> JavaScript/Python 函数类，从那里他们可能能够通过 Java 反射访问更强大的方法.

# `javax.script`

`javax.script`在 Java 6 中可用，并允许将字符串转换为嵌入式脚本语言的源代码。如果不受信任的输入到达这些接收器，它们可能能够使用脚本引擎对 Java 反射的访问来到达文件系统或 shell 以执行具有当前进程所有者权限的任意用户环指令。

# XML

Java 与其他语言一样容易受到外部实体攻击，因此 XML 输入中的外部实体可用于包含来自本地网络的 URL 的内容。

如果您不`java.net.SocketFactory`使用或不使用 a`SecurityManager`来过滤传出连接，那么任何不允许您将出现在 DTD 中的 URL 列入白名单的 XML 解析方法都是易受攻击的。

# 运行时 / ProcessBuilder

也不是 Java 特定的，但`Runtime`允许`ProcessBuilder`访问本地文件系统上的可执行文件。任何达到这些的攻击者控制的字符串都可能被用来提升权限。

# php - 在包含中使用 $_SERVER['DOCUMENT_ROOT'] 是个好主意吗？

> ID：11893832
> 
> 赞同：14
> 
> 时间：2012-08-10T00:20:55.083
> 
> 标签：php

例如，这是一个好主意吗？

```
require_once($_SERVER['DOCUMENT_ROOT'].'/include.php'); 
```

如果您在同一台服务器上有两台虚拟主机，一台用于实时主机，一台用于开发主机，具有不同的 Apache DocumentRoots，这将避免在包含源未知且可能位于任何目录中时必须包含绝对路径。

（注意：下一节中的文件路径是相对于 web 根目录的。它们实际上就像`/var/www/app/core/init.php`，`/var/www/app`web 根目录在哪里）

例如：我有一个 /core/init.php，它使用来自网站各处的相对路径（`/file.php`, `/dir/file.php or /dir/dir/file.php`）调用。

然后这个 init.php 包括几个功能页面，在基金目录中，一个子目录`/core`（如`/core/func/userfunctions.php`）。

因此，在 init.php 中，我可以使用该`$_SERVER`方法，因为如果我使用相对路径并尝试从`/dir/file.php`.

我看不出有什么问题，但总的来说会出什么问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-10T00:52:11.997

我见过`$_SERVER['DOCUMENT_ROOT']`未设置或不是您所期望的情况（即未在 CLI 或旧 IIS 中设置，或在某些 CGI 设置中无效）。

出于这个原因，您可以使用`dirname(__FILE__)`获取调用该行的脚本的路径。然后您可以从那里引用相对路径，例如

```
include dirname(__FILE__) . '/../../other/file.php'; 
```

当文件的目录结构已知并且不会更改时，我会使用上述方法。

如果`DOCUMENT_ROOT`不可用，以下是合适的替代品：

```
substr($_SERVER['SCRIPT_FILENAME'], 0, -strlen($_SERVER['SCRIPT_NAME'])); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T00:25:38.060

你不需要这样做。默认情况下，PHP 在文档根目录中查找包含的文件。

您可以使用[set_include_path($new_include_path)](http://es.php.net/manual/en/function.set-include-path.php)来更改此行为，或 在 php 配置文件中编辑[include_path 。](http://es.php.net/manual/en/ini.core.php#ini.include-path)

此外，来自[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)：

> 'DOCUMENT_ROOT' 当前脚本在其下执行的文档根目录，如服务器的配置文件中所定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T00:30:06.830

例如，如果您使用 URL 重写，当您发现`/there/are/so/many/paths/in/the/url/of/this/`页面中的包含仍然有效时，您会非常高兴！

# django - heroku 输出“错误获取自定义构建包”，但只是有时

> ID：11893836
> 
> 赞同：9
> 
> 时间：2012-08-10T00:21:14.103
> 
> 标签：django, heroku, geodjango, buildpack

我有一个托管在 Heroku 上的 Django 项目，其中包含一个从[cirlabs/heroku-buildpack-geodjango](https://github.com/cirlabs/heroku-buildpack-geodjango)分叉的 buildpack 。有时当我推送到 Heroku 时，它会响应

```
Counting objects: 16, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (9/9), done.
Writing objects: 100% (9/9), 790 bytes, done.
Total 9 (delta 7), reused 0 (delta 0)

-----> Heroku receiving push
-----> Fetching custom buildpack... failed
 !     Heroku push rejected, error fetching custom buildpack

To git@heroku.com:taplister-staging.git
 ! [remote rejected] dev -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:heroku-app.git' 
```

我想知道这是否可能是 buildpack 本身的错误，或者是否与 Heroku 如何与 github 交互有关？

哦，我`heroku config`的还有 buildpack URL

```
BUILDPACK_URL:              https://github.com/taplister/heroku-buildpack-geodjango 
```

非常感谢任何见解。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-15T20:26:22.603

这偶尔会发生。由于您使用的是自定义构建包，因此每次推送 Heroku 时都会通过 Git 下载构建包，然后使用它来处理您的构建。

有时，根据问题（网络延迟、临时停机等），Heroku 将无法完成 Git 克隆，并且会因上述错误而失败。

这是一个已知问题，解决此问题的唯一方法是重试推送。

# javascript - Chrome 扩展在输入时调整大小

> ID：11893839
> 
> 赞同：0
> 
> 时间：2012-08-10T00:21:33.197
> 
> 标签：javascript, google-chrome, google-chrome-extension

我刚刚完成了我的 Chrome 扩展程序，发现在我填写表单时弹出窗口会改变它的高度。什么可能导致它？

[http://screenr.com/QIt8](http://screenr.com/QIt8)

# windows - “发送到”一个文件夹到一个未按预期运行的批处理脚本

> ID：11893844
> 
> 赞同：1
> 
> 时间：2012-08-10T00:22:25.537
> 
> 标签：windows, batch-file, sendto

我有一个简单的批处理脚本`take.cmd`

```
echo %1 
```

然后我在`C:\Users\abc\AppData\Roaming\Microsoft\Windows\SendTo`文件夹中创建了一个快捷方式。特别是快捷方式而不是批处理脚本本身，以便我可以以管理员身份运行它（右键单击>属性>高级>以管理员身份运行）。

现在，当我右键单击一个文件夹并将其发送到我创建的快捷方式时，它会提示许可.exe 按预期请求权限，但是它没有运行批处理脚本，而是显示一个错误，提示“文件名/语法不正确”（它闪得很快，我几乎看不出来）。

奇怪的是，如果我从它按预期运行的快捷方式中取消选中“以管理员身份运行”（即回显路径）而没有提升提示。

选中“以管理员身份运行”时可能导致错误的原因是什么？

# r - 箱线图的 R 编程

> ID：11893850
> 
> 赞同：-8
> 
> 时间：2012-08-10T00:23:08.047
> 
> 标签：r, boxplot

如何制作结果 1、2 和 3 除以次要等位基因计数的箱线图？

```
> data

     mouse.id treatment   outcome1  outcome2  outcome3 snp1 snp2 snp3 snp4 snp5 snp6 snp7 snp8
1        186         2   2427.395   240.635   526.250    0    1    0    0    0    1    0    1
2        186         3   7922.080  3355.925  1786.400    0    1    0    0    0    1    0    1
3        187         1   6114.500  1048.615  1375.990    0    0    1    0    0    0    0    0
4        187         2   2176.345   187.980   631.030    0    0    1    0    0    0    0    0
5        187         3   8523.140  6054.180  2932.915    0    0    1    0    0    0    0    0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T00:34:04.287

不确定箱线图问题，因为我发现该构造被过度使用并且不努力学习它，....但是聚合步骤可能会像这样：

```
aggregate(data[, c("outcome1","outcome2","outcome3")], 
           list( rowSums(data[, 6:13]) ), #construct the by-list
           FUN=mean)
#----------
  Group.1 outcome1 outcome2 outcome3
1       1 5604.662 2430.258 1646.645
2       3 5174.738 1798.280 1156.325 
```

也许只是环绕`boxplot`它？

```
 boxplot( ...[ ,2:4], xlab="Sum of minor alleles") 
```

不，我的测试表明我在箱线图中毫无头绪，正如预测的那样。这难道不是同样有效地显示在表格中吗？

# android - 如何在偏好活动 android 上创建自定义窗口标题？

> ID：11893851
> 
> 赞同：1
> 
> 时间：2012-08-10T00:23:09.077
> 
> 标签：android, icons, title, preferenceactivity, preference

在构建应用程序时，有时我们需要创建自定义窗口标题以适应我们的需求，并使我们的应用程序与其他应用程序不同。我在通过此代码在首选项活动上创建图标窗口标题时遇到问题：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_LEFT_ICON);
        addPreferencesFromResource(R.layout.setting);
        setFeatureDrawableResource(Window.FEATURE_LEFT_ICON, R.drawable.setting);
    } 
```

有谁能够帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T00:46:12.473

```
public class Preferences extends PreferenceActivity {  
protected ImageView img;
   @Override
   protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);        
    setContentView(R.layout.main_tab);
    title = (TextView) findViewById(R.id.img);

    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.title_bar);
    Bitmap bmp=BitmapFactory.decodeResource(getResources(), R.drawable.sc01);
    int width=30;
    int height=20;
    Bitmap resizedbitmap=Bitmap.createScaledBitmap(bmp, width, height, true);
    this.img.setImageBitmap(resizedbitmap);

  }
}
///////In title_bar.xml///////

<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout01"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
     >

    <ImageView
        android:id="@+id/img"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingTop="3dp">
    </ImageView>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T13:52:57.677

您可以在清单文件中更改偏好活动的图标和标题：

```
 <activity
        android:name="PATH TO YOUR ACTIVITY"
        android:label="@string/title_from_resources" 
        android:icon="@drawable/icon_from_resources" >
    </activity> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T00:25:05.910

尝试：

```
getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.drawable.icon); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T01:46:00.613

尝试这个

1.  在“layout”文件夹中为窗口标题创建自定义布局。

> window_title.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="35dip"
    android:gravity="center_vertical"
    android:paddingLeft="5dip"
    android:background="#323331">

    <ImageView
        android:id="@+id/header"
        android:src="@drawable/header"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

</LinearLayout> 
```

1.  在“values”文件夹中创建自定义样式。

> custom_style.xml

```
<resources>
    <style name="CustomWindowTitleBackground">
        <item name="android:background">#323331</item>
    </style>

    <style name="CustomTheme" parent="android:Theme">
        <item name="android:windowTitleSize">35dip</item>
        <item name="android:windowTitleBackgroundStyle">@style/CustomWindowTitleBackground</item>
    </style>
</resources> 
```

1.  在清单文件中应用自定义样式作为主题。

> AndroidManifest.xml

```
<application android:icon="@drawable/icon" android:label="@string/app_name" android:theme="@style/CustomTheme"> 
```

4.在主活动类中应用自定义窗口标题

> 自定义窗口标题

```
 public class CustomWindowTitle extends PreferenceActivity {
        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
        getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE,  R.layout.Your_Custom_Title);
super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.YourPrf);
        }
    } 
```

# jquery - 选择日期后如何在jquery中选择输入日期选择器的ID？

> ID：11893853
> 
> 赞同：0
> 
> 时间：2012-08-10T00:23:15.363
> 
> 标签：jquery, datepicker

我有一个 datepicker 日历（jQuery 库），当我单击输入文本字段时会填充它。一旦我在日历上选择日期，我就想知道这个输入文本的 ID。

前任。输入文本：

```
<input type="text" class="add-event-form" id="backup-date-1" name="backup-date-1" /> 
```

当我单击此输入时，日历显示为工具提示，假设我在日历上选择了一天。我如何获得身份证`backup-date-1`？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T00:30:29.013

尝试 -

```
$("input").on("click", function() {
    alert( $(this).prop("id") );
}); 
```

[**演示**](http://jsfiddle.net/Xf7a2/)

# java - 是否可以在 Java 中更改数组的类型？

> ID：11893858
> 
> 赞同：1
> 
> 时间：2012-08-10T00:23:52.540
> 
> 标签：java

> **可能重复：**
> [字节数组到 Int 数组](https://stackoverflow.com/questions/11437203/byte-array-to-int-array)

我有一个大字节数组，我可以以某种方式将它解释为一个整数数组，这样每个条目只是原始字节的四个？

我的意思是这样的：

```
for (int i = 0; i < byteArray.length; i += 4) {
    intArray[i / 4] = byteArray[i] << 24 + byteArray[i+1] << 16 + byteArray[i+2] << 8 + byteArray[i+3];
} 
```

但不是一个字节一个字节地复制整个数组，因为数组很大，所以只需从已经存在的数组中读取整数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T00:40:11.290

使用此代码：

```
IntBuffer intarray = ByteBuffer.wrap(bytearray).order(ByteOrder.BIG_ENDIAN).asIntBuffer();
 intarray.get(100); 
```

将占用很少的额外堆空间。实际上，它包装了字节数组并创建了一个 int 数组视图。明显更快，在我的电脑中，缓冲区大小为 INT_MAX 需要几纳秒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T00:36:07.597

问：Java 中可以更改数组的类型吗？

答：一般来说，“不”。您必须逐项复制/转换。

在这种特定情况下：是的，当然。只需使用 asIntBuffer()。例如：

```
import java.nio.*;
import java.nio.IntBuffer;
import java.nio.ByteBuffer;

public class MyClass {

  public static void main(String[] args) throws Exception {
    ByteBuffer byteBuffer = ByteBuffer.allocate(1024);
    int[] array = new int[] { 1, 2, 3, 4 };
    IntBuffer IntBuf = byteBuffer.asIntBuffer();
    IntBuf.put(array);
    ... 
```

请注意，这些转换（以及相关的“翻转”、“包装”、更改字节顺序的能力等）是在[java.nio](http://tutorials.jenkov.com/java-nio/nio-vs-io.html)中引入的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T01:03:52.723

不，数组的类型是不变的。

不，如果是，但是是或也许是。

# asp.net - 视图中的 ASP.NET Razor 模型语法

> ID：11893859
> 
> 赞同：2
> 
> 时间：2012-08-10T00:23:53.630
> 
> 标签：asp.net, asp.net-mvc, razor

这里有几个新手问题：

在强类型视图中，为什么：

```
@model MyProj.Models.User 
```

为什么我们使用 lambdas: ？那究竟是做什么的？为什么不只是model.Email？

```
1\. @Html.DisplayNameFor(model => model.Email) 
```

为什么这不起作用？我们不是叫变量模型吗？（我知道我应该使用 @html.() 但为什么模型无法识别？

```
2\. users name is: @model.Name 
```

为什么它适用于大写的“M”？我们不是用小写字母命名的吗？

```
3\. users name is: Model.Name 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T00:31:34.803

> 为什么我们使用 lambdas: ？那究竟是做什么的？为什么不只是model.Email？

[DisplayNameFor](http://msdn.microsoft.com/en-us/library/hh833706%28v=vs.108%29.aspx)以及所有其他[*For 辅助方法](http://msdn.microsoft.com/en-us/library/dd493063%28v=vs.108%29)正在利用 lambda 表达式参与[表达式树](http://msdn.microsoft.com/en-us/library/bb397951.aspx)的能力。

这个 lambda 表达式本身只是接受一个模型类型并返回一个字符串。但是需要更多信息来获取显示名称。

在伪代码中，该方法正在执行：

1.) 将 lambda 视为[表达式](http://msdn.microsoft.com/en-us/library/bb335710%28v=vs.108%29.aspx)
2.) 解析表达式以获取属性的名称
3.) 使用反射获取该属性的[DisplayNameAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.displaynameattribute.aspx)
4.) 如果值存在，则提取该值，否则使用名称属性
5.) 使用显示名称或属性名称为该属性生成标签

如果不使用表达式树，您最终将不得不将属性名称作为字符串传递......这很糟糕。这提供了一种使用反射的强类型方法，无需使用[魔法字符串](http://en.wikipedia.org/wiki/Magic_string)。

> 为什么这不起作用？我们不是叫变量模型吗？（我知道我应该使用 @html.() 但为什么模型无法识别？

`@model`是 Razor 以不同方式处理的[特殊指令](http://weblogs.asp.net/scottgu/archive/2010/10/19/asp-net-mvc-3-new-model-directive-support-in-razor.aspx)。`class`它就像一个保留关键字，与or没有任何不同`int`。

> 为什么它适用于大写的“M”？我们不是用小写字母命名的吗？

`Model`是视图上的一个属性，它具有您使用`@model`指令定义的类型，并引用您的模型。如果不使用该`@model`指令，它将具有`dynamic`.

# google-chrome - 基于 chrome 的浏览器“功能” - 如何恢复原始功能？

> ID：11893861
> 
> 赞同：2
> 
> 时间：2012-08-10T00:24:13.667
> 
> 标签：google-chrome, rss, prompt

![在此处输入图像描述](../Images/f6be5e4763b2199fdc2ff32ae0a37693.png)

如果您尝试在 chrome 浏览器中访问任何最近更新的 wordpress 站点的默认 rss 提要，您总是会收到“应该使用哪个服务来查看？”这个烦人的提示。这在 chrome 中**是不会**发生的。这在其他主要浏览器**中不会**发生。如何在 chrome 中*更正*此问题，以便像以前一样向我显示已解析的 xml？

PS 您在后台看到的示例页面是[http://wordpress.com/feed](http://wordpress.com/feed) - 一旦您尝试在 chrome 中访问该页面，您也应该看到此提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T18:32:11.083

我刚刚发现了“Feed Intent Viewer”，这是一个 Chrome 扩展，基本上可以恢复旧功能。

[https://chrome.google.com/webstore/detail/oceapojkdgeophkjdijkpbjifdnfimdh](https://chrome.google.com/webstore/detail/oceapojkdgeophkjdijkpbjifdnfimdh)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T05:46:19.813

I found a solution after many research (because it's really annoying...)

Download and install the new Beta version of chrome: it's all fixed

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T17:27:57.813

我在 ubuntu 上使用 chrome 版本 21.0.1180.79，并且在 sciencefriday.com 等安全网站上下载问题的请求相同。我已将问题提交给 chrome。-手指交叉寻找补丁-

# sql-server-2008 - 在 SQL Server 2008 中设置条件必填字段

> ID：11893862
> 
> 赞同：2
> 
> 时间：2012-08-10T00:24:15.657
> 
> 标签：sql-server-2008, ddl, dml

我需要对字段提出条件要求。我不确定这在 SQL 中的外观。我将 Management Studio 与 SQL Server 2008 一起使用。本质上，我希望仅当另一个字段输入数据时才需要一个字段。我研究了触发器，我认为这就是我需要的，但我不确定是什么类型（`DDL`,`DML`等）。

例如：

当用户输入时间时，他们还必须输入日期，但如果没有输入时间，则不需要日期。SQL 将发送一个错误，并且不允许用户在填写时间字段时在不输入日期的情况下完成记录。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T04:59:23.253

您可以使用检查约束。

```
create table YourTable
(
  ID int identity primary key,
  DateCol date,
  TimeCol time,
  constraint ch_DateTime check(
                              DateCol is not null or 
                              TimeCol is null
                              )
) 
```

用这个测试：

```
-- null in both columns
insert into YourTable default values

-- values in both columns
insert into YourTable(DateCol, TimeCol) values(getdate(), getdate())

-- value only in DateCol
insert into YourTable(DateCol) values(getdate())

-- value only in TimeCol failes
insert into YourTable(TimeCol) values(GetDate()) 
```

# c# - Windows Phone 键盘后退键按下事件？

> ID：11893863
> 
> 赞同：1
> 
> 时间：2012-08-10T00:24:32.647
> 
> 标签：c#, .net, silverlight, windows-phone-7, windows-phone-7.1

我正在开发一个 Windows Phone 应用程序。

我注意到在我显示一个文本框和一个键盘后，如果我按物理“后退”键，键盘将隐藏，再次按下它将返回上一页。

但是我希望页面在第一次按下“返回”键时导航到上一页。所以就像键盘向上一样，当我按下返回键时，它直接回到上一页。

我试图实现`BackKeyPressed`页面的事件处理程序，但它似乎不起作用，因为当第一次按下返回键时它不会被调用。

有人对此有什么好主意吗？谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:09:09.337

您可以在输入框上实现 KeyUp 事件处理程序，然后在调用 NavigationService.GoBack() 之前检测 Escape 键事件。这是一段代码来说明我的观点以及您在上面描述的效果：

XAML (SecondPage.xaml)：

```
 <TextBox x:Name="SomeTextBox" KeyUp="SomeTextBox_KeyUp"/> 
```

C# 代码隐藏：

```
 private void SomeTextBox_KeyUp(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Escape)
        {
            NavigationService.GoBack();
        }
    } 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-10T08:11:22.150

您可以实现 TextBox 的 LostFoucs 事件处理程序，在处理程序中导航到您想要的页面。

# c++ - 跨模块共享内存对象

> ID：11893865
> 
> 赞同：0
> 
> 时间：2012-08-10T00:24:50.543
> 
> 标签：c++

如何跨 DLL 共享对象？

例子：

DLLA 由进程 A 加载。DLL A 收集数据（拦截来自进程 A 的调用）。

DLLB 由 Pascal 程序加载，并希望使用 DLLA 收集的数据。

我用 DLLA 创建了一个映射，如下所示：

```
GL_EXTERN bool __stdcall CreateSharedMemory()
{
    if ((hMapFile = CreateFileMapping(INVALID_HANDLE_VALUE, NULL, PAGE_READWRITE, 0, MapSize, SharedMemoryName.c_str())) == NULL)
    {
        return false;
    }

    if ((pData = MapViewOfFile(hMapFile, FILE_MAP_ALL_ACCESS, 0, 0, MapSize)) == NULL)
    {
        CloseHandle(hMapFile);
        return false;
    }
    return true;
} 
```

DLLB 只是打开它并映射它。

他们可以共享命令。所以 DLL B 可以给出 DLLA 命令并检索数据，但我似乎无法弄清楚如何在内存中共享对象/类/向量。

我尝试过使用指针，但意识到这是无效的并且会出现访问冲突错误。此外，它似乎可以很好地共享整数，但似乎无法共享浮点数：S 我怎样才能完成这些任务？

编辑：沟通我做：

```
int* Foo = static_cast<int*>(pData); where pData is the map pointer.
//Then I do:

Foo[0] = X; Foo[1] = Y; 
```

并让进程从相应的值中读取和写入。

信息：

这是 DLLA 的文件：http: [//pastebin.com/MFkqwxJe](http://pastebin.com/MFkqwxJe) 和[http://pastebin.com/MDeWprkb](http://pastebin.com/MDeWprkb)

这是 DLLB 的文件：http: [//pastebin.com/Uj3dijc4](http://pastebin.com/Uj3dijc4) 和[http://pastebin.com/vkDdPp7e](http://pastebin.com/vkDdPp7e)

编辑：根据要求将其缩小到：[http](http://pastebin.com/hNF6Cu2L) ://pastebin.com/hNF6Cu2L 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T00:47:26.593

在共享内存区域中，您可以使用所有基本数据类型，如整数和浮点数。如果您对 float 有疑问，这与内存的共享性质无关，例如 C/Pascal 之间对 float/double/long_double 的理解不同。您不能使用指针。不包含 VMT 且没有指针的结构也可以。可以使用从共享区域开始的偏移量（直接或间接）来模拟复杂的数据结构。

要进行同步（如事件），您可以使用命名对象。

您还可以在进程之间传递句柄。检查`DuplicateHandle`功能。

继续：

```
 Data[3] = &ListOfModels[0]; 
```

在这里，您将不属于共享内存区域的地址放入共享内存。共享内存区域中的数据应该是完全自包含的，这意味着所有数据都应该在该区域中。结构的定义应如下所示：

```
struct SaredData
{
    int data_type;
    int status;
    union
    {
        struct
        {
            int       num_font_char_objects;
            FontChar  font_char_objects[MAX_FONT_CHARS_SUPPORTED];
        };
        ...........
    };
}; 
```

并且您需要确保共享内存区域的大小足以存储所有传递的对象。来自 STL 的任何容器都不太可能使用共享内存。

您不能将您的`Model`结构放入上面的联合中，因为它包含复杂的字段。

# android - Android AChartEngine - 无法更改 Y 轴标签的 textColor

> ID：11893870
> 
> 赞同：6
> 
> 时间：2012-08-10T00:25:18.403
> 
> 标签：android, achartengine, linechart

在为 Android 使用 AChartEngine (JAR 1.0.0) 时，我看到了一种允许我更改 X 轴 ( `mRenderer.setXLabelsColor(Color.BLACK)`)文本颜色的方法

不幸的是，我找不到 Y 轴标签的相应方法！

还有没有办法设置实际折线图的颜色？

我还尝试使用将标签与 Y 轴左侧对齐

```
mRenderer.setYAxisAlign(Align.LEFT, 0);   
mRenderer.setYLabelsAlign(Align.LEFT, 0); 
```

但它似乎确实起作用。

![在此处输入图像描述](../Images/306df1492a7364f983c0d0c98eccc995.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T11:46:59.727

用于`renderer.setYLabelsColor();`设置 Y 轴标签颜色。

当你使用 Align.LEFT 时，这意味着它们是左对齐的，如果你想在轴的左侧右对齐它们，使用`Align.RIGHT`.

线图颜色是来自其自己的渲染器的颜色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-10T11:12:27.967

要正确对齐和设置颜色，您需要按如下方式放置：

```
mRenderer.setYAxisAlign(Align.LEFT, 0);   
mRenderer.setYLabelsAlign(Align.RIGHT, 0); 

// setYLabelsColor method you need include which the 
// int for your YLabel, since this library you can 
// use more than one YLabel, so in your case, 
// you only have one YLabel and its index is 0.

mRenderer.setYLabelsColor(0, Color.BLACK);  
mRenderer.setXLabelsColor(Color.BLACK); 
```

# javascript - 让 JQuery DateTimePicker 插件与 asp.net 文本框一起使用

> ID：11893874
> 
> 赞同：0
> 
> 时间：2012-08-10T00:25:44.737
> 
> 标签：javascript, asp.net, jquery-ui

我一直在尝试让 JQuery DateTimePicker 插件与 asp.net 文本框一起工作一个多星期。我根本无法得到它，我不知道为什么。

**你能帮我让它工作吗？**

ASP.NET 代码：

```
<asp:Content ID="Content2" ContentPlaceHolderID="bodyContent" Runat="Server">
<style type="text/css">
/* css for timepicker */
.ui-timepicker-div .ui-widget-header{ margin-bottom: 8px; }
.ui-timepicker-div dl{ text-align: left; }
.ui-timepicker-div dl dt{ height: 25px; }
.ui-timepicker-div dl dd{ margin: -25px 0 10px 65px; }
.ui-timepicker-div td { font-size: 90%; }
</style>

<script src="Scripts/jquery-ui-timepicker-addon.js" type="text/javascript"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" />
<script type="text/javascript">
    $(function () {
        $("#start_DateTime").datetimepicker();
        $("#end_DateTime").datetimepicker();
    });
</script> 

<label for="start_DateTime">
                            Start Date & Time</label>
                        <asp:TextBox ID="start_DateTime" CssClass="textarea" runat="server"></asp:TextBox> </asp:Content> 
```

此文本框中未显示任何内容。另外，在 Internet Explorer 中浏览页面之前，我收到以下错误消息，我不知道为什么：

![在此处输入图像描述](../Images/fadfcec8dedc9b688600d5fdb6017133.png)

更新：

我修改了我的代码以包含

```
$('#' + '<%= start_DateTime.ClientID %>').datetimepicker(); 
```

代替

```
$("#start_DateTime").datetimepicker(); 
```

我仍然遇到同样的错误。当我在 IE 中运行 Jscript 调试器时，它会显示以下内容：

![在此处输入图像描述](../Images/857170ec5e285f7fc33a9e5ddc3412dc.png)

**更新#2：**

最后我明白了，但我不知道为什么它会出现在文本框的顶部。它应该出现在它的下方和右侧。

![在此处输入图像描述](../Images/265dcc5f66ee3e9c2c13bc059dbb4091.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T00:46:42.107

在 jquery ui*之后*加载 timepicker 插件。datetimepicker 插件依赖于 jquery ui。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>
<script src="Scripts/jquery-ui-timepicker-addon.js" type="text/javascript"></script> 
```

尝试：

```
$('#' + '<%= start_DateTime.ClientID %>').datetimepicker(); 
```

如果您不考虑由 asp.net 生成的 id，则可以改为通过类来完成。

```
<asp:TextBox ID="start_DateTime" CssClass="textarea datepicker" runat="server"></asp:TextBox>

$(function(){
   $(".datepicker").datetimepicker();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T00:41:26.933

ASP.NET 在运行时动态重命名 ID 属性，因此如果您在浏览器中查看 HTML 源代码，您会发现“start_DateTime”只是呈现的 ID 标记的一小部分。

您可以通过一些努力获得呈现的 ID，但是您是否考虑过使用以下为在 ASP.NET 中使用 JQueryUI 而构建的库？

[http://juiceui.com](http://juiceui.com)

# c# - List.Add 性能问题

> ID：11893878
> 
> 赞同：1
> 
> 时间：2012-08-10T00:26:34.537
> 
> 标签：c#, xamarin.ios

我有以下代码：

```
foreach(Icon item in iconObjects) 
{ 
    iconList.Add(item.iconID); //iconID is a GUID string 
} 
```

我找到了 197 条记录。执行循环并填充列表大约需要 10 秒。关于提高性能的任何想法？

我试过了：

```
iconList.AddRange(iconObjects.Select(y=> y.iconID)) 
```

但这需要相同的时间。

谢谢，瑞克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T00:29:17.603

添加到`List`197 项不应该花那么长时间。很可能需要很长时间，因为`iconObjects`它是 iQueryable 或 iEnumerable。

为什么不做一个

```
var iconList = iconObjects.ToList(); 
```

计时，您应该会看到昂贵的调用是在它实际检索数据而不是添加到列表时。

# intellij-idea - 是否有用于运行 Clojure 测试的 Intellij IDEA 插件？

> ID：11893879
> 
> 赞同：9
> 
> 时间：2012-08-08T23:03:26.050
> 
> 标签：intellij-idea, clojure, ide

我在 Intellij IDEA 上使用 Clojure 编程已经有一段时间了。我喜欢这种语言，IDEA 是迄今为止我最喜欢的 IDE。但让我烦恼的一件事是无法从 IDE 运行测试并看到红色/绿色/橙色条。有什么插件吗？或者，至少，一些聪明的把戏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T16:35:09.023

搜索提供了两个主要变体：Leiningen（如[本](http://www.seekingclojure.com/post/21546596502/intellij-clj-plugins)教程中所示）和lazytest。不便之处在于，lazytest 还没有作为插件与 IDEA 集成。

# mysql - Cygwin 连接到 MySQL：无法通过套接字“/var/run/mysql.sock”连接到本地 MySQL 服务器

> ID：11893887
> 
> 赞同：14
> 
> 时间：2012-08-10T00:28:30.040
> 
> 标签：mysql, cygwin

我刚刚在 WinXP 上安装了 MySQL 5.5.27。当我打开命令提示符（开始 -> 运行，然后键入“cmd”）时，我可以通过运行“mysql -u root -p”来访问 MySQL。但是，当我打开 Cygwin 终端并尝试相同的操作时，我收到此错误

```
$ mysql -u root -p
Enter password:
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/run/mysql.sock' (2) 
```

实际上，没有“/var/run/mysql.sock”文件。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-10T00:34:43.627

如果您在命令行上指定主机，此问题应该会消失：

```
mysql -u root -p -h 127.0.0.1 
```

您还可以创建一个`my.ini`mysql 将使用的：

```
echo [client] >c:\my.ini
echo user=root >>c:\my.ini
echo host=127.0.0.1 >>c:\my.ini 
```

然后你可以输入：

```
mysql -p 
```

您甚至可以添加密码：

```
echo password="abracadabra" >>c:\my.ini 
```

然后，只需键入：

```
mysql 
```

你进来了！

另请参阅[https://serverfault.com/questions/337818/how-to-force-mysql-to-connect-by-tcp-instead-of-a-unix-socket](https://serverfault.com/questions/337818/how-to-force-mysql-to-connect-by-tcp-instead-of-a-unix-socket)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-10T00:33:39.110

尝试将此添加到您的命令中：

`-h 127.0.0.1`

问题是 mysql 客户端默认主机是 localhost，它特别对待 localhost，使用通过该文件访问的 unix 套接字，但您的服务器可能未配置为侦听 unix 套接字。

但是，如果您通过环回 IP 127.0.0.1 访问同一服务器，它将使用 TCP 套接字而不是 unix 套接字，并且（假设服务器在线）它应该可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-14T09:58:15.617

只是为了节省一些按键，

将以下别名添加到您的 ~/.bashrc 文件中。

```
alias mysql='mysql -u root -h 127.0.0.1' 
```

添加后，您只需在终端中输入“mysql”即可直接进入 mysql。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-05T07:06:03.867

正如大多数人在这里提到的那样 - 解决方案之一是使用别名。老实说，不喜欢他们，因为他们妨碍我学习一些非常好的 Linux 命令 :) 这只是个玩笑。但我认为，对你来说最好的方法是`~/.bashrc`在你的主目录中找到一个文件并将其放在那里：

```
alias mysql="mysql -h 127.0.0.1" 
```

不要忘记您必须重新启动会话才能使此解决方案正常工作，或者您可以`bash`在同一终端会话中键入命令 - 它会重新加载您的所有 bash 设置。祝你好运！

PS 我建议您在编辑之前关闭所有其他终端窗口，`.bashrc`因为您可能只是获得了一个只读文件。我在Win7x64下遇到了这样的问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-02T20:04:43.420

根据 Rafael Hart 的说法，我在我的 PC 上成功安装了 Cygwin 中的 MySQL。我创建了一个数据库并执行了一些查询，一切都很好。第二天，当我尝试登录 MySQL 时，我得到了错误：

```
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/run/mysql.sock' (111 "Connection refused") 
```

显然，当您关闭 PC 时，这些服务也会关闭，并且不会在启动时重新启动。为了解决这个问题，我输入了以下命令来重新启动 mysqld 服务：

```
$ mysqld_safe & 
```

然后一切都开始工作了。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-01-12T02:30:24.533

这是`MYSQL`从cygwin运行的方法

**去这里：**
[https ://cygwin.rafaelhart.com/setting-up-mysql-on-cygwin/](https://cygwin.rafaelhart.com/setting-up-mysql-on-cygwin/)

要开始`MySQL`安装，请运行以下命令：

```
mysql_install_db 
```

运行 mysql - 如果您激活它，您将从 Windows 收到防火墙警报。 `mysqld_safe`& 紧接着，明智的做法是运行以下命令：

```
mysql_secure_installation 
```

# ajax - apex:actionFunction 和 Database.Update() 意外页面刷新

> ID：11893895
> 
> 赞同：0
> 
> 时间：2012-08-10T00:29:52.710
> 
> 标签：ajax, salesforce, apex-code, visualforce

因此，我一直在为 visualforce 页面开发“编辑项”模式，该模式将允许用户编辑对象的子组件并刷新页面。就目前而言，有一个包含父对象 ID 的 URL 参数。代码的结构与此非常相似：

```
<apex:form id="edit-modal">
     <!-- Modal Content-->
     <apex:actionFunction action="{!updateModalObject}" name="updateModalObject">

     </apex:actionFunction> 
</apex:form> 
```

当用户在模态中按下“保存”按钮时，会调用上述动作函数。控制器中的类如下所示：

```
public PageReference updateModalObject(){        
    database.update(modalObject); 

    return null;
} 
```

当这个动作完成时，页面正在刷新，同时删除了 URL 参数，导致整个事情有点……搞砸了。我不确定代码的哪一部分导致了刷新，是动作函数还是控制器中的更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:16:36.747

你说：

> *当用户按下“保存”按钮...*

我认为这是导致页面刷新的原因。您是否使用没有 reRender 标签的命令按钮？解决方案可能如下所示：

试试这个技巧 - 在执行 JavaScript 函数后添加 return false ：

```
<apex:commandButton value="Save" onclick="updateModalObject(); return false;"/> 
```

避免页面重新加载的其他方法是添加一个虚拟的 reRender 标记：

```
<apex:commandButton value="Save" onclick="updateModalObject()" reRender="none" /> 
```

或者

```
<apex:actionFunction action="{!updateModalObject}" name="updateModalObject"  reRender="none"> 
```

您必须重新渲染“某物”以避免页面重新加载。否则命令按钮将重新加载整个页面。在我们的例子中，我们将重新渲染“nothing”。

# c# - 在派生类中使用基方法的目的

> ID：11893897
> 
> 赞同：0
> 
> 时间：2012-08-10T00:30:15.113
> 
> 标签：c#, wpf, xml

我正在查看某人的代码并具有：

```
protected override void OnMouseEnter(MouseEventArgs e)
{
    base.OnMouseEnter(e);  //necessary?
    if (...)
} 
```

现在，问题是为什么要调用基类方法？无论如何，这段代码都可以工作。任何的想法？

谢谢。阿米特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T00:34:11.660

当您想利用基类实现的功能但又想扩展派生类实现中发生的事情时，将使用基调用。

这可以做一些非常有用的事情，例如设置在基类中定义的属性或处理事件，而无需将样板代码放在每个派生类中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T00:33:25.520

因为基类方法具有您可能仍想利用的默认行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T00:34:39.680

根据基类的不同，可能还需要执行其方法以使其按预期运行。调用基本代码几乎是惯例，它可能很重要，特别是如果你不知道它的作用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T00:35:11.960

这在很大程度上取决于您要做什么事件处理程序。如果你的基类很复杂并且它做了很多`OnMouseEnter()`你仍然想保留的事情，那么你应该有那个`base.OnMouseEnter(e)`调用。如果您想完全“覆盖”该功能，这意味着您知道做什么`base.OnMouseEnter(e)`并且您不想要它，那么不要调用`base.OnMouseEnter(e)`.

# python - 如何通过使用 Selenium Webdriver (Python) 在上下文菜单中选择“将图像另存为...”来保存图像

> ID：11893904
> 
> 赞同：6
> 
> 时间：2012-08-10T00:31:02.413
> 
> 标签：python, selenium, webdriver, contextmenu

我正在尝试使用 selenium webdriver 将特定图像保存到目录中。我希望通过模拟右键单击 img 元素并选择“将图像另存为...”来做到这一点。使用以下代码，我可以打开上下文菜单，但无法选择正确的选项。

```
browser = WebDriver(executable_path=CHROMEDRIVER_PATH)
browser.get(URL)
img = browser.find_element_by_tag_name('img')
ActionChains(browser).context_click(img).perform() 
```

我也试过：

```
ActionChains(browser).context_click(img).send_keys(Keys.ARROW_DOWN).send_keys(Keys.ENTER).perform() 
```

并使用快捷方式（'v' 似乎选择“将图像另存为...”）

```
ActionChains(browser).context_click(img).send_keys('v').perform() 
```

该图像没有直接 URL，因为它是在每次点击时随机重新加载的验证码图像。我发现，能够处理它的唯一方法是先将其保存在磁盘上（使用“将图像另存为...”）。保存整个页面并不会保存此特定图像，因此它不会正常工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T00:14:00.560

如果它是您所追求的验证码，那么您最好只截取屏幕截图。

```
driver.save_screenshot('screenshot.png') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-27T16:02:18.760

我遇到了类似的问题，刚刚获得了使用另存为保存图像的快捷方式---

```
Step-1-right click on an image you wish to save
Step-2- press v. 
Step-3-Enter to the directory window to save 
```

因为我是一名 Java 程序员，所以我无法相应地粘贴代码（针对 python 提出的问题）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T01:38:19.733

正如 kreativitea 所建议的，屏幕截图将是可行的方法，因为 CAPTCHA 旨在防止脚本执行您尝试执行的操作。验证码旨在防止会话重用。[这是一个](http://www.puremango.co.uk/2005/11/breaking_captcha_115/)描述会话重用的页面。

# jquery - 在 Bootstrap 弹出窗口中嵌入 jQuery 滑块

> ID：11893905
> 
> 赞同：6
> 
> 时间：2012-08-10T00:31:08.107
> 
> 标签：jquery, jquery-ui, twitter-bootstrap, popover, jquery-slider

我正在尝试将此代码用于 Rails：

```
$(elem).popover({
  title:"Brake activity",
  content: $("<div>").append( $("#slider").slider({ 
    range: "max",
    max: maxValue,
    min: maxValue / 5,
    value: maxValue / 2}) ).eq(0).outerHTML(),
  trigger: "manual"}); 
```

几乎一切正常，但滑块不起作用——它似乎被禁用了。即使我将选项 disabled 定义为 false，我也得到了相同的结果。方法 outerHTML() 是从[Get selected element's external HTML](https://stackoverflow.com/questions/2419749/get-selected-elements-outer-html)中提取的。

我上传了一个显示滑块如何显示的屏幕截图：http: [//i48.tinypic.com/24azpkm.png](http://i48.tinypic.com/24azpkm.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T18:42:38.607

## 可能的问题

**首先**，您分配给该属性的任何值都将在弹出窗口中呈现时`content`包装在一个元素中。`<p>`我怀疑这可能会导致滑块出现问题。

**其次**，与其他 Bootstrap 组件（如 Modal）不同，Popover 中的内容不是持久的，而是动态渲染的。因此，鉴于您迄今为止所指出的方式，您将无法在滑块中保留值。

## 一个解法

一种可能的方法是在显示或隐藏弹出框时附加和分离内容（在本例中为滑块）。不幸的是，弹出框不会触发事件，因此您必须手动管理它。

首先实例化您将使用的滑块，并将其保持在您将处理弹出框切换的范围内：

```
var $slider = $('<div>').slider({
  range: "max",
  max: maxValue,
  min: maxValue / 5,
  value: maxValue / 2
}); 
```

显示弹出框后，您可以立即使用以下方法附加滑块：

```
$('.popover-content')
  .empty()
  .append($slider); 
```

[**注意：**如果您同时打开多个弹出框，则必须使用更具体的选择器。]

*在隐藏 popover 之前*，您将手动分离滑块：

```
$slider.detach(); 
```

这会将它从 DOM 中移除，但它的所有数据都将保留。

我做了一个演示，使用切换按钮触发弹出窗口。请注意，弹出框首先被初始化（未显示），并且没有为***content****提供初始值***。**

 **### [JSFiddle](http://jsfiddle.net/mmfansler/5kuB8/9/)**

# c# - 在“果园”视图中验证请求

> ID：11893906
> 
> 赞同：0
> 
> 时间：2012-08-10T00:31:09.527
> 
> 标签：c#, asp.net-mvc, orchardcms

我只想验证/检测特定 VIEW 的请求是通过投影小部件还是投影页面，有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T06:19:55.140

您是否尝试向查询添加布局？创建项目页面或小部件时，您可以选择要使用的布局。因此，只需创建一个布局供您的页面使用，并为您的小部件创建另一个布局。如果这还不够，您还可以使用 Alternates 进行完全控制，但这听起来并不像您真正需要的那样。

# dll - 如何从网页部署 ActiveX dll

> ID：11893907
> 
> 赞同：0
> 
> 时间：2012-08-10T00:31:15.457
> 
> 标签：dll, setup-project, cab, activexobject, regasm

几天来一直在尝试，无法弄清楚这一点。我为 Intranet 应用程序编写了一个 C# 类文件来控制本地串行端口。当我使用 regasm 手动注册 dll 时效果很好，但是，我需要从网页部署此控件而无需手动注册。我尝试在 Visual Studio 2010 中创建一个安装项目，它编译得很好，但我无法在网页中打开该对象。

以下是我的 C# 类中的相关代码行：

```
namespace wmsSerialPorts
{
[Guid("55D31498-12A5-4FF0-942D-3B0BA449CA7B")]
    [InterfaceType(ComInterfaceType.InterfaceIsIDispatch)]
    [ComVisible(true)]
      public interface iAxDevices
    {
        [DispId(1)]
        int OpenPort(string sComPort);
        [DispId(2)]
        int ClosePort();
        [DispId(3)]
        int SendCmd(string sCmd);
        [DispId(4)]
        string GetLastError();
        //[DispId(5)]
        //string ReadLine();
        [DispId(6)]
        string ReadWeight();
        [DispId(7)]
        Microsoft.JScript.ArrayObject GetJsPorts();
        [DispId(8)]
        void prtLabel(string sItemNum, string sQty, string sDesc, string sWoNum, string sBoxID, string sBoxIDBarCode, string sBoxIDorig);
        [DispId(9)]
        void prtLabelQC(string sItemNum, string sQty, string sDesc, string sWoNum, string sBoxID, string sBoxIDBarCode, string sBoxIDorig, string sNeedDate, string sRecOverride);
        [DispId(10)]
        void prtReset();
    }

[Guid("E59C5B7E-EF1F-4241-A9FD-191EF8FCC167")]
    [ClassInterface(ClassInterfaceType.None)]
    [ComVisible(true)]
    [ProgId("AxDevices")]
    public class AXDevices : wmsSerialPorts.SerialCom, iAxDevices, wmsSerialPorts.IObjectSafety 
```

正如我所提到的，如果我使用 regasm wmsSerialPorts.dll，从 JavaScript 调用该对象时效果很好，如下所示：

```
myAx = new ActiveXObject("AXDevices"); 
```

我的安装项目包含一个 wmsSerialPorts.inf 文件：

```
[version]

signature="$CHICAGO$"

AdvancedINF=2.0

[Setup Hooks]

install=install

[install]

run=msiexec.exe /package """%EXTRACT_DIR%\ActiveXSetup.msi""" /qn 
```

.... 和一个 ActiveXBuild.ddf 文件：

```
.Set DiskDirectoryTemplate=cab

.Set CabinetNameTemplate=ActiveXSetup.cab

Debug\ActiveXSetup.msi

wmsSerialPorts.inf 
```

我的 wmsSerialPorts.dll 文件被正确引用为分离的程序集，并且构建安装项目按预期创建了 ActiveXSetup.cab 和 ActiveXSetup.msi 文件。

然后我创建了这个 HTML 页面来加载对象：

```
<!DOCTYPE>
<html>
<head>
    <title>Test</title>
</head>
<body>
<!--    <object id="AXDevices" classid="clsid:E59C5B7E-EF1F-4241-A9FD-191EF8FCC167" codebase="https://10.0.2.53/BIDWMS/ActiveXSetup.cab">
    </object>-->
        <object id="AXDevices" classid="clsid:E59C5B7E-EF1F-4241-A9FD-191EF8FCC167" codebase="ActiveXSetup.cab">
    </object>
    <script type="text/javascript">
        try {
            var obj = document.AXDevices;
            if (obj) {
                alert(obj.SayHello());
            } else {
                alert("Object is not created!");
            }
        } catch (ex) {
            alert("Error message is: " + ex.Description);
        }
    </script>
</body>
</html> 
```

...但是当我运行该页面时，它会生成“未定义”错误（来自 catch(ex) 块）。有任何想法吗？在此先感谢.......鲍勃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T19:14:54.493

您的代码库必须是 url，而不仅仅是文件名。如果您的文件在 C:\inetpub\myCabFiles\ActiveXSetup.cab 中，并且您的网站在 C:\inetpub 中，那么代码库应该类似于

```
codebase="www.mywebsite.com\myCabFiles\ActiveXSetup.cab" 
```

# haskell - Haskell doctest 不加载由 cabal-dev 管理的包

> ID：11893915
> 
> 赞同：2
> 
> 时间：2012-08-10T00:32:55.230
> 
> 标签：haskell, cabal, doctest

我正在尝试使用带有 doctests 的“data-binary-ieee754”来测试我的项目。

我使用 cabal-dev 而不是 cabal 来管理包依赖关系。我可以构建项目，但 doctest 似乎无法识别该包。

.cabal 中的 doctests 定义：

```
test-suite doctests
  type:            exitcode-stdio-1.0
  hs-source-dirs:  test
  main-is:         doctests.hs
  ghc-options:     -Wall -threaded
  build-depends:   base,
                   doctest >= 0.7,
                   data-binary-ieee754 
```

测试/doctests.hs：

```
module Main where

import Test.DocTest

main :: IO ()
main = doctest ["src/Pattern.hs"] 
```

的错误消息`cabal-dev test doctests`是：

```
Running 1 test suites...
Test suite doctests: RUNNING...

src/Pattern.hs:13:8:
    Could not find module `Data.Binary.IEEE754'
    Use -v to see a list of the files searched for.
Test suite doctests: FAIL
Test suite logged to: dist/test/othello-0.1.0-doctests.log
0 of 1 test suites (0 of 1 test cases) passed. 
```

我尝试向 doctests.hs 添加一些选项，例如

```
main = doctest ["--optghc=-Lcabal-dev/lib",
                "--optghc=-packagedata-binary-ieee754",
                "src/Pattern.hs"] 
```

但结果是

```
Running 1 test suites...
Test suite doctests: RUNNING...
doctests: <command line>: cannot satisfy -package data-binary-ieee754
    (use -v for more information)
Test suite doctests: FAIL
Test suite logged to: dist/test/othello-0.1.0-doctests.log
0 of 1 test suites (0 of 1 test cases) passed. 
```

告诉我如何正确地做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T02:07:58.020

我自己找到了答案。

[http://hackage.haskell.org/trac/ghc/ticket/6133](http://hackage.haskell.org/trac/ghc/ticket/6133)很有帮助。

```
main :: IO ()
main = doctest ["--optghc=-Lcabal-dev/lib",
                "--optghc=-packagedata-binary-ieee754",
                "--optghc=-package-conf=cabal-dev/packages-7.4.1.conf",
                "src/Pattern.hs"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-09T17:45:36.047

只是为了稍微更新一下这个答案，doctest 现在允许您直接调用 ghc 选项。
您还可以加载沙盒包数据库并从 cabal 调用。

```
doctest [ "-package-db .cabal-sandbox/x86_64-linux-ghc-7.10.3-packages.conf.d"
        , "-isrc"
        , "src/<path-to-file>"] 
```

这为我解决了丢失的包裹问题。

# php - Magento 在属性之间搜索

> ID：11893920
> 
> 赞同：1
> 
> 时间：2012-08-10T00:33:31.697
> 
> 标签：php, magento, attributes, product, frontend

谢谢你的时间！我目前正在尝试弄清楚如何在前端的属性之间进行排序。例如，尺寸。我有 14 到 36 码的范围，但我只想查看 24 到 26 码之间的产品。有没有办法做到这一点？这是我忽略的 Magento 功能吗？任何帮助都会很棒！

# python - Python - 用户通过 CGI 输入。线程和读取文件

> ID：11893922
> 
> 赞同：3
> 
> 时间：2012-08-10T00:33:38.657
> 
> 标签：python, multithreading, cgi, user-input

**查看这篇文章的底部，了解最终的工作代码。**

这是一个工作 Python/CGI 脚本，它可以通过调用另一个脚本来获取 CGI 脚本的用户输入，然后通过本地套接字发送它的命令。

* * *

原帖：

据我所知，没有任何方法可以将用户输入直接发送到已经发送了标头的 Python/CGI 脚本。比如，在特定情况下警告用户并等待确认。我也找不到任何已发布的解决方案。

如果我错了，请纠正我。

我目前有一个 Python 脚本，它可以连接到服务器、上传固件、重启、重新连接、更改一些配置文件等。

有时，它可以帮助很多用户将输入发送到脚本，而不必重新启动脚本并从头开始执行它。通过 2G 网络重新连接需要很长时间。

我认为必须可以将用户输入发送到另一个脚本，然后将其发布到第一个/主脚本正在监视的文件中，直到它收到输入。如果能够使用停止/终止输入命令停止脚本的执行，那也很好。至于 stop/kill 命令，主脚本需要有 2 个线程。如果没有，它会知道它应该停止脚本，如果正在执行诸如大文件上传之类的过程，则在上传完成之前。

同时，我认为多个用户应该能够同时使用脚本。因此，每次启动主脚本时都必须生成一个唯一的 ID。

以下是我认为可以制作的方法：

主脚本被调用

```
Global variable with a unique session ID is generated and sent to client.

Thread 1
    pexpect spawns a "tail -F /var/www/cgi/tmp_cmd.log"

Thread 2
    Thread status "Busy"
    Connects to network element
    Does its usual stuff until it reaches a point where the user needs to interact.
    Prints the message to user and waits for Thread 1 with a timeout of x seconds.
    Thread status "Ready" 
```

用户通过带有 2 个标头（会话 ID 和输入）的 AJAX 调用第二个脚本

第二个脚本

```
Session ID and user input is saved to "/var/www/cgi/tmp_cmd.log"
Execution of the input script ends 
```

主脚本

```
Thread 1 
    User input recieved.
    Wait for Thread 2 status to become "Ready" or ignore status if command is equals to "kill" ect.
    Send user input (single line) and start Thread 1 from the beginning
Thread 2 
    Thread 2 status "Busy"
    Input recieved and process stops/continues.
    Thread 2 status "Ready" 
```

我已经为连接、上传文件和运行命令制作了一个脚本。但是，它无法接收用户输入。

我真的可以使用一些很好的帮助，或者有人告诉我如何解决这个问题。

当然，每当脚本完成后，我都会将其发布在此处或粘贴到 pastebin 并链接到它，以供其他人使用。:)

* * *

**最终代码**

在下面帖子的帮助下，我终于有了工作代码。它可以使用线程，但停止/取消进程对我来说似乎更容易弄清楚。

**客户端**- cgi_send.py

```
#!/usr/bin/python
import sys, cgi, cgitb, socket

cgitb.enable()
TASKS_DIR = "/var/www/cgi-bin/tmp"

def main():
    global TASKS_DIR

    url = cgi.FieldStorage()
    cmd = str(url.getvalue('cmd'))
    sessionId = str(url.getvalue('session'))
    socketLocation = TASKS_DIR + '/%s.socket' % sessionId

    print '<a href="?session='+sessionId+'&cmd=QUIT">End script</a>&nbsp;<a href="?session='+sessionId+'&cmd=CANCEL">Cancel task</a>'
    print '<form action=""><input type="hidden" name="session" id="session" value="'+sessionId+'" /><input type="text" name="cmd" id="cmd" value="" /><input type="submit" value="Fun!" />'

    try:

        sock = socket.socket(socket.AF_UNIX)
        sock.setblocking(0)
        sock.connect(socketLocation)
        sock.send(cmd)
        sock.close()
        print '<br />Command sent: '+ cmd;

    except IOError:
        print '<br /><b>Operation failed.</b><br /> Could not write to socket: '+ socketLocation
        pass

    sock.close()

    sys.exit();

if __name__ == '__main__':
    sys.stdout.write("Content-type:text/html;charset=utf-8\r\n\r\n")
    sys.stdout.write('<!DOCTYPE html>\n<html><head><title>Test</title></head><body>')

    main()

    print '</body></html>'
    sys.exit() 
```

**服务器**

```
#!/usr/bin/python
import sys, os, socket, uuid, time, multiprocessing

# Options
TASKS_DIR = "/var/www/cgi-bin/tmp/"

def main():

    sessionId = str(uuid.uuid4())

    print 'Session ID: '+ sessionId
    sys.stdout.write ('<br /><a href="cgi_send.py?cmd=test&session=' + sessionId +'" target="cmd_window">Send test command</a>')
    sys.stdout.flush()

    address = os.path.join(TASKS_DIR, '%s.socket' % sessionId)

    sock = socket.socket(socket.AF_UNIX)
    sock.setblocking(0)
    sock.settimeout(.1)
    sock.bind(address)
    sock.listen(1)

    taskList = [foo_task, foo_task, foo_task]

    try:
        for task in taskList:

            print "<br />Starting new task"
            runningTask = multiprocessing.Process(target=task)
            runningTask.daemon = True # Needed to make KeyboardInterrupt possible when testing in shell
            runningTask.start()

            while runningTask.is_alive():
                conn = None
                try:
                    conn, addr = sock.accept()
                    data = conn.recv(100).strip()

                except socket.timeout:
                    # nothing ready from a client
                    continue

                except socket.error, e:
                    print "<br />Connection Error from client"

                else:
                    print "<br />"+ data
                    sys.stdout.flush()
                    conn.close()

                    if data == "CANCEL":
                        # temp way to cancel our task
                        print "<br />Cancelling current task."
                        runningTask.terminate()

                    elif data == "QUIT":
                        print "<br />Quitting entire process." 
                        runningTask.terminate()
                        taskList[:] = []

                finally:
                    if conn:
                        conn.close()

    except (KeyboardInterrupt, SystemExit):
        print '\nReceived keyboard interrupt, quitting threads.'

    finally:
        sock.close()
        os.remove(address)

def foo_task():
    i = 1
    while 10 >= i:
        print "<br />Wating for work... "+ str(i)
        sys.stdout.flush()
        i = i + 1
        time.sleep(1)

if __name__ == '__main__':
    sys.stdout.write("Content-type:text/html;charset=utf-8\r\n\r\n")
    sys.stdout.write('<!DOCTYPE html>\n<html><head><title>Test</title></head><body>')

    main()

    print '</body></html>'
    sys.exit() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T01:32:15.193

CGI 脚本是一种非常原始的操作。它的工作原理与您从命令 shell 运行的任何普通脚本基本相同。向 Web 服务器发出 http 请求。服务器启动一个新进程并通过标准输入将参数传递给脚本。在这一点上，它就像一个普通的脚本。

除非脚本通过某种方式寻找输入，否则脚本无法获得更多输入，因此假设一旦发送标头，Web 客户端就不能再直接发送更多输入是正确的，因为请求已经在进行中，并且响应也已经在进行中。

监视文件的线程是将控制循环引入脚本的一种方法。另一种方法是根据每个实例的唯一 ID打开一个指向路径的 UNIX[套接字。](http://docs.python.org/library/socket.html#socket.socket.connect)然后让线程坐在套接字上进行输入。然后您要做的就是将 ID 传递回 Web 客户端。并且客户端可以使用 ID 调用第二个脚本，然后它会知道正确的 UNIX 套接字路径以将控制命令发送到：即。

```
/tmp/script-foo/control/<id>.socket 
```

您实际上可能只需要 1 个线程。您的主线程可以简单地循环检查有关套接字的信息，并监视正在线程或子进程中运行的当前操作。在伪代码中可能是这样的：

```
uid = generate_unique_id()
sock = socket.socket(AF_UNIX)
sock.bind('/tmp/script-foo/control/%s.socket' % uid)
# and set other sock options like timeout

taskList = [a,b,c]
for task in taskList:
    runningTask = start task in thread/process
    while runningTask is running:
        if new data on socket, with timeout N ms
            if command == restart:
                kill runningTask
                taskList = [a,b,c]
                break
            else:
                process command 
```

当 Web 客户端通过 ajax 向您的第二个脚本发送命令时，它在伪代码中可能如下所示：

```
jobid = request.get('id')
cmd = request.get('cmd')
sock = socket.socket(socket.AF_UNIX)
sock.connect('/tmp/script-foo/control/%s.socket' % jobid)
sock.sendall(cmd)
sock.close() 
```

**更新**

根据您的代码更新，这是我建议的一个工作示例：

```
import sys
import os
import socket
import uuid 
import time 

# Options
TASKS_DIR = "."

def main():

    sessionId = str(uuid.uuid4())

    print 'Session ID: '+ sessionId
    sys.stdout.write ('<br /><a href="cgi_send.py?cmd=test&session=' + sessionId +'" target="_blank">Send test command</a>')
    sys.stdout.flush()

    address = os.path.join(TASKS_DIR, '%s.socket' % sessionId)

    sock = socket.socket(socket.AF_UNIX)
    sock.setblocking(0)
    sock.settimeout(.1)
    sock.bind(address)
    sock.listen(1)

    fakeTasks = [foo_task, foo_task, foo_task]

    try:
        for task in fakeTasks:

            # pretend we started a task
            runningTask = task()
            # runningTask = Thread(target=task) 
            # runningTask.start()

            # while runningTask.is_alive():   
            while runningTask:
                conn = None
                try:
                    conn, addr = sock.accept()
                    data = conn.recv(100).strip()

                except socket.timeout:
                    # nothing ready from a client
                    continue

                except socket.error, e:
                    print "<br />Connection Error from client"

                else:
                    print "<br />"+ data
                    sys.stdout.flush()
                    conn.close()

                    # for the thread version, you will need some 
                    # approach to kill or interrupt it. 
                    # This is just simulating. 
                    if data == "CANCEL":
                        # temp way to cancel our task
                        print "<br />Cancelling current task." 
                        runningTask = False

                    elif data == "QUIT":
                        print "<br />Quitting entire process." 
                        runningTask = False 
                        fakeTasks[:] = []

                finally:
                    if conn:
                        conn.close()

    finally:
        sock.close()
        os.remove(address)

def foo_task():
    print 'foo task'
    return True

if __name__ == '__main__':
    sys.stdout.write("Content-type:text/html;charset=utf-8\r\n\r\n")
    sys.stdout.write('<!DOCTYPE html>\n<html><head><title>Test</title></head><body>')

    main()

    print '</body></html>'
    sys.exit() 
```

您没有使用 10 秒的全局超时，而是将其设置为像 100 毫秒这样的小值。它遍历每个任务并启动它（最终在一个线程中），然后尝试循环等待套接字连接。如果 100ms 内没有连接，则超时并继续循环，同时检查任务是否完成。在任何时候，客户端都可以连接并发出“CANCEL”或“QUIT”命令。套接字将接受连接，读取它并做出反应。

您可以在此处查看解决方案如何不需要多个线程。您需要的唯一线程或子进程是运行任务。

# python - 检查存在，如果存在，是一个特定的值

> ID：11893923
> 
> 赞同：5
> 
> 时间：2012-08-09T22:26:39.457
> 
> 标签：python

我经常需要检查一个类的实例是否具有属性，如果该属性存在，则与它的值进行比较。除了以下还有没有别的办法？

```
if house.garage:
    if house.garage == '3 car':
        # do something with house.garage 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T00:46:19.587

您可以不使用点表示法，而是调用`getattr`，如果命名属性不存在，它可以返回默认值：

```
if getattr(house, 'garage', "") == '3 car':
    # proceed 
```

如果`house`没有名为 'garage' 的属性，`getattr`则只需要评估为不等于 '3 car' 的东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-09T23:40:48.730

您可以按照 Martin Fowler 在此处概述的“合并条件表达式”：http: [//sourcemaking.com/refactoring/consolidate-conditional-expression#permalink-15](http://sourcemaking.com/refactoring/consolidate-conditional-expression#permalink-15)

本质上，任何包含另一个 if 语句的 if 语句实际上只是 1 个 if 语句，中间有一个 and！

```
if house.garage:
    if house.garage == '3 car':
        # do something with house.garage 
```

变成

```
if house.garage and house.garage == '3 car':
    # do something with house.garage 
```

# c# - 如何在 MassTransit 中进行消息拦截？

> ID：11893927
> 
> 赞同：3
> 
> 时间：2012-08-10T00:33:49.960
> 
> 标签：c#, masstransit

我想在每条消息到达消费者或传奇之前检查它。我想我想要一个 IInboundMessageInterceptor 但我看不到注入自定义的简单方法。如何在 MT 中实现消息拦截？和/或如何使用自定义 IInboundMessageInterceptor 配置总线？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T17:26:56.513

您可以执行以下操作。你的拦截器必须实现 IInboundMessageInterceptor

```
 Bus.Initialize(sbc =>
            {
                // ... Initialise Settings ...

                var busConfiguratorr = new PostCreateBusBuilderConfigurator(bus =>
                    {

                        var interceptorConfigurator = new InboundMessageInterceptorConfigurator(bus.InboundPipeline);
                        interceptorConfigurator.Create(new MyIncomingInterceptor(bus));
                    });

                sbc.AddBusConfigurator(busConfiguratorr);
            }); 
```

然后你可以像这样写一个拦截器

```
 internal class MyInboundInterceptor : IInboundMessageInterceptor
{
    public MyInboundInterceptor(ServiceBus bus)
    {

    }

    public void PreDispatch(IConsumeContext context)
    {
        IConsumeContext<AwesomeCommand> typedContext;
        if (context.TryGetContext(out typedContext))
        {
            // Do SOmething with typedContext.Message
        }
    }

    public void PostDispatch(IConsumeContext context)
    {
    }
} 
```

# xcode - Git：将子模块添加到 XCode 项目，然后当我打开 GitBox 时崩溃

> ID：11893928
> 
> 赞同：2
> 
> 时间：2012-08-10T00:33:53.473
> 
> 标签：xcode, git, git-submodules, gitbox

我将一个 Git 存储库作为子模块添加到我现有的项目中，该项目也是 Git 管理的，我在命令行中完成了这些，我使用 GitBox 来管理我的项目，然后当我打开 GitBox 时，它就崩溃了，我尝试了很多次，甚至重新启动了机器。

> 应用程序特定信息： *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“*** setObjectForKey：对象不能为 nil（键：_NSTaskExecutablePath）”中止（）调用终止调用抛出异常
> 
> Application Specific Backtrace 1: 0 CoreFoundation
> 0x00007fff92a3c716 __exceptionPreprocess + 198 1 libobjc.A.dylib
> 0x00007fff8f2b3470 objc_exception_throw + 43 2 CoreFoundation
> 0x00007fff92acaf07 -[__NSDictionaryM setObject:forKey:] + 135 3
> Foundation 0x00007fff8f6cd732 -[NSConcreteTask setLaunchPath:] + 194 4 Gitbox 0x000000010001d779 Gitbox + 120697 5 Gitbox
> 0x000000010001cfb7 Gitbox + 118711 6 Gitbox
> 0x000000010005b6eb Gitbox + 374507 7 Gitbox
> 0x000000010000687b Gitbox + 26747 8 Gitbox
> 0x000000010005a3cc Gitbox + 369612 9 Gitbox
> 0x000000010005a6cc Gitbox + 370380 10 Gitbox
> 0x000000010001c7ec Gitbox + 116716 11 libdispatch.dylib
> 0x00007fff8e881f3d _dispatch_call_block_and_release + 15 12 libdispatch.dylib 0x00007fff8e87e0fa _dispatch_client_callout + 8 13 libdispatch.dylib 0x00007fff8e883104 _dispatch_main_queue_callback_4CF + 275 14 CoreFoundation 0x00007fff929de81e __CFRunLoopRun + 1614 15 CoreFoundation 0x00007fff929dddd2 CFRunLoopRunSpecific + 290 16 HIToolbox
> 0x00007fff98145774 RunCurrentEventLoopInMode + 209 17 HIToolbox
> 0x00007fff98145512 ReceiveNextEventCommon + 356 18 HI工具箱
> 0x00007fff981453a3 BlockUntilNextEventMatchingListInMode + 62 19 AppKit 0x00007fff93d29fa3 _DPSNextEvent + 685 20 AppKit 0x00007fff93d29862 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 128 21 AppKit 0x00007fff93d20c03 -[NSApplication run] + 517 22 AppKit 0x00007fff93cc5656 NSApplicationMain + 869 23 Gitbox
> 0x00000001000028c1 Gitbox + 10433 24 Gitbox
> 0x0000000100001d94 Gitbox + 7572 25 ???
> 0x0000000000000002 0x0 + 2

我想删除 Gitbox 设置并将其作为新安装的应用程序，但没有找到。我还能尝试什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T11:49:50.723

获取一个卸载应用程序（例如 AppCleaner）并删除它找到的所有内容，但 gitbox 应用程序本身。

然后重新启动 gitbox - 不幸的是，您将不得不将您正在使用的存储库重新添加到 gitbox，但这将使您摆脱崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-12T16:33:01.367

删除 ~/Library/Preferences/com.oleganza.gitbox.plist 解决了这里的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-03T19:24:50.140

xcode 更新后 gitbox 也有类似的问题。这对我有用，这些指示来自应用程序作者：

1.  退出 Gitbox。
2.  删除 ~/Library/Preferences/com.oleganza.gitbox.plist
3.  在终端中运行：默认删除 com.oleganza.gitbox
4.  在终端中运行： git config --global push.default 匹配
5.  打开 Gitbox。

如果您的“push.default”有其他值，您可能还需要在存储库中运行“git config push.default matching”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T10:13:45.630

无需卸载 Gitbox 并丢失您的存储库列表 - 只需删除 Library/Saved\ Application\ State/com.oleganza.gitbox.savedState/

# c# - 带有 IEnumerable 的 MVC 页面 表达助手

> ID：11893931
> 
> 赞同：3
> 
> 时间：2012-08-10T00:34:11.657
> 
> 标签：c#, generics, expression-trees, expression

我有一个 MVC 部分视图，它的模型是 IEnumerable<SomeModel>。

因此，Html 类型是 HtmlHelper<IEnumerable<SomeModel>>
我们有一个自定义 WebViewPage，它在 ViewModel 的实例中公开

```
public class SomeModel
{
    [Display("Model Id")]
    public int Id { get; set; }

    [Display("The Name")]
    public string Name { get; set; }
}

public abstract class ViewModelWebViewPage : WebViewPage { }
public abstract class ViewModelWebViewPage<TModel> : ViewModelWebViewPage
{
    ... 
    public ViewModel<TModel> { get; set; }
} 
```

这背后的基本前提是驱动 Javascript 模板系统（如 Knockout 或 JQuery 模板）的客户端模板/绑定表达式脱离 C# ViewModel 定义

我正在编写一些方法来帮助获取表头的 DisplayName（基本上是 Display 属性的值 - 我们的真实版本涉及使用子类 DataAnnotationsMetadataProvider 和 IMetadataAware 属性进行本地化）

```
public class ViewModel<TModel>
{
    public MvcHtmlString DisplayNameFor<TProperty>( Expression<Func<TModel, TProperty>> expression )
    {
        ModelMetadata metadata = ModelMetadata.FromLambdaExpression( expression, this.html.ViewData );
        return new MvcHtmlString(metadata.DisplayName);
    }

    public MvcHtmlString DisplayNameFor<TItem, TProperty>( Expression<Func<TModel, IEnumerable<TItem>>> expression, Expression<Func<TItem, TProperty>> itemExpression )
    {
        ModelMetadata metadata = ModelMetadata.FromLambdaExpression( itemExpression, new ViewDataDictionary<TItem>() );
        return new MvcHtmlString(metadata.DisplayName);
    }
} 
```

在视图中，我会使用这个助手，比如......

```
@model IEnumerable<SomeModel>
<table>
  <thead>
    <tr>
      <!-- 
          "this" is a ViewModelViewWebPage<IEnumerable<SomeModel>>
          ViewModel is a ViewModel<IEnumerable<SomeModel>>
          m is an IEnumerable<SomeModel>, 
          item is of type SomeModel 
      -->
      <th>@ViewModel.DisplayNameFor( m => m, item => item.Id )</th>
      <th>@ViewModel.DisplayNameFor( m => m, item => item.Name )</th>
    </tr>
  </thead>
  ... remainder of table html
</table> 
```

这一切都有效，我在呈现的 HTML 中得到了预期的结果

```
<table>
  <thead>
    <tr>
      <th>Model Id</th>
      <th>The Name</th>
    </tr>
  </thead>
  ... remainder of table html
</table> 
```

我不喜欢我必须在第一个表达式中传递当前模型来引导第二个，因为我想在 ViewModel<TModel> 类中定义一个能够理解 ViewModel<TModel> 实际上是 ViewModel 的方法<IEnumerable<TItem>>

```
<th>@ViewModel.DisplayNameFor( m => m.Id )</th> 
```

我设法创建了一个扩展方法

```
 public static MvcHtmlString DisplayNameFor<TItem, TValue>(this ViewModel<IEnumerable<TItem>> viewModel, Expression<Func<TItem, TValue>> expression)
    {
        ModelMetadata metadata = ModelMetadata.FromLambdaExpression(expression, new ViewDataDictionary<TItem>());

        return new MvcHtmlString(metadata.DisplayName);
    } 
```

但我希望它是 ViewModel 类本身的一部分，但我似乎可以找到一种定义 DisplayNameFor 方法来推断 IEnumerable 关系的方法。

我试过了

```
 public MvcHtmlString DisplayNameFor<TItem, TValue>(Expression<Func<TItem, TValue>> expression)
        where TModel : IEnumerable<TItem>
    {
        ModelMetadata metadata = ModelMetadata.FromLambdaExpression(expression, new ViewDataDictionary<TItem>());

        return new MvcHtmlString(metadata.DisplayName);
    } 
```

但这不会编译，因为来自约束的 TModel 不属于封闭类型，但它应该作为方法的 Type 参数。

是否可以在 ViewModel<TModel> 类中定义这样的方法签名，它可以强制 TModel 是 IEnumerable<TItem> 关系，因此允许表达式参数是 Func<TItem, TValue>，或者我将拥有使用扩展方法。

# c++ - 如何监控 FIFO 的读写？

> ID：11893940
> 
> 赞同：2
> 
> 时间：2012-08-10T00:35:41.577
> 
> 标签：c++, c, linux, fifo

应该如何监控通过 FIFO 的数据？简单地打开并继续观看是行不通的，因为如果监视器读取所有字节，则需要数据的实际程序将无法接收数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:34:17.607

我不确定你那里有什么样的 FIFO（管道？套接字？也许你应该更详细地说明你的问题），但我知道的关于前向读取的唯一情况是套接字。

您可以使用具有以下效果`recv()`的标志：`MSG_PEEK`

> 此标志使接收操作从接收队列的开头返回数据，而不从队列中删除该数据。因此，后续的接收调用将返回相同的数据。

您也可以使用套接字实现 IPC（[unix(7)](http://www.kernel.org/doc/man-pages/online/pages/man7/unix.7.html)），因此您可能希望将它们添加到您的项目中（如果您使用的是 linux/unix）。如果您想知道如何使用套接字，那么您应该阅读手册页：[socket(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/socket.2.html)和[socket(7)](http://www.kernel.org/doc/man-pages/online/pages/man7/socket.7.html)，或者在 Windows 的情况下，[`recv()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740121%28v=vs.85%29.aspx)and [`socket()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740506%28v=vs.85%29.aspx).

您可能还想尝试使用 2 个 FIFO，一个到您的监视器，另一个从您的监视器到您的实际程序。然后，您只需使用监视器读取所有传入数据并过滤相关部分并将它们直接写入您的实际程序。如果您的实际程序中有多个接收器并且想要拆分传入的数据，这可能会派上用场。

如果您只是想知道是否有数据要读取，您可以使用[select(2) 或 pselect(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/select.2.html)或者[poll(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/poll.2.html)，或者[`select()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740141%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T10:10:58.910

您应该使用以下系统调用之一：

select()- 来源：man -s 2 select

pselect()- 来源：man -s 2 pselect

> select() 和 pselect() 允许程序监视多个文件描述符，等待一个或多个文件描述符“准备好”用于某种类型的 I/O 操作（例如，可能的输入）。如果可以在没有阻塞的情况下执行相应的 I/O 操作（例如 read(2)），则认为文件描述符已准备就绪。

请注意，它们都是 I/O 阻塞调用。

ppoll()- man -s 2 ppoll

poll()- man -s 2 民意调查

另请阅读两组系统调用之间的区别：[http ://www.unixguide.net/network/socketfaq/2.14.shtml](http://www.unixguide.net/network/socketfaq/2.14.shtml)

并且使用 pselect 或 ppoll 总是比 select 和 poll 更安全。

# css - IE9 的最大高度解决方法

> ID：11893943
> 
> 赞同：2
> 
> 时间：2012-08-10T00:35:48.810
> 
> 标签：css, internet-explorer-9

在下面链接的摄影作品集中，单击单个图像会在浏览器窗口的 90% 的最大高度处呈现照片。在 Safari、Firefox 和 Chrome 中。但 IE9 似乎完全忽略了这个命令，用户必须滚动才能完整查看任何纵向照片。

我用谷歌搜索了解决方法，但没有找到任何适用于 IE9 的方法。大多数情况下，我在样式表中发现了 Javacript 表达式，建议作为 IE6 的解决方法。IE9 是否有更“昂贵”的解决方法？或者它不再是一个问题（这就是为什么我什么都找不到）而我只是浏览器设置错误？

这是在 Chrome、Firefox 和 Safari 中正确呈现的图像示例 - 但您必须在 IE9 中滚动：[http ://russmoorephotography.com/#/portfolio/state-capitol-aisle-capitol-dome/](http://russmoorephotography.com/#/portfolio/state-capitol-aisle-capitol-dome/)

编辑：这实际上在 Firefox 中也不起作用。只是 Chrome 和 Safari。

# path - python os.path 在 CMD 中不起作用，但在 eclipse 中起作用

> ID：11893944
> 
> 赞同：0
> 
> 时间：2012-08-10T00:35:49.973
> 
> 标签：path, python-2.7

我想浏览 .py 文件所在的当前文件夹（python 2.7）。但是，它在我的 Eclipse 中有效，但在 cmd 中无效。下面是代码：

```
import os
import sys

def checkFiles(path):

    fileDict = []
    for dirPath, dirNames, fileNames in os.walk(path):
        for fileName in fileNames:
            if os.path.splitext(fileName)[1] == '.entity':
                fileDict.append(os.path.join(dirPath,fileName))
                print dirPath
    return fileDict

fileDict = []

fileDict = checkFiles('.')

print fileDict 
```

现在我在这个文件夹下有 5 个 .entity 文件，所以当打印 fileDict 时，它应该打印列表中的 5 个元素。但是，这在 eclipse 中工作正常，但它在 cmd 中向我返回一个空列表。任何人都可以帮我解决这个问题吗？

哦，顺便说一句，我在生成 xml 文件时遇到了另一个问题。我认为它也有同样的问题。当我使用eclipse时，它可以正常工作，但是当我使用cmd时它不会创建任何文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T00:49:48.537

首先，不要使用字符串连接来连接路径。使用`os.path.join`.
其次，不要`\\`用于路径分隔符。`/`通用且适用于 Windows：

```
fileDict.append(os.path.join(dirPath, fileName)) 
```

然后当你调用它时：

```
fileDict = checkFiles('.') 
```

而且，您在循环时使用相同的变量名覆盖您的列表：

```
for fileNames in fileNames: 
```

所以，像这样：

```
def checkFiles(path):
    fileDict = []
    for dirPath, dirNames, fileNames in os.walk(path):
        for fileName in fileNames:
            if os.path.splitext(fileName)[1] == '.entity':
                fileDict.append(os.path.join(dirPath, fileName))
    return fileDict

fileDict = checkFiles('.') 
```

注意：此脚本假定您的文件位于运行脚本的位置...*而不是*脚本本身的位置。

```
C:\SomeDir> python C:\path\to\script.py 
```

...您的文件需要在下面`C:\SomeDir`而不是`C:\path\to\`

当您通过 eclipse 运行脚本时，当前工作目录就是该工作区。但是当你通过 cmd 运行它时，无论你在当前目录中。

# php - 这是用escaoe字符串更新mysql查询的正确方法吗

> ID：11893945
> 
> 赞同：0
> 
> 时间：2012-08-10T00:35:53.563
> 
> 标签：php, mysql

我正在尝试如下进行特定查询

```
$query = "SELECT * FROM users WHERE uid IN (1,10,50,60,94,102)"; 
```

我如何在 where 子句中使用 mysql 转义字符串，或者如果我只是这样使用它，可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T00:56:32.233

您现在所做的方式不是`UPDATE`查询。您只是从数据库中检索记录。为了从数据库更新记录，您需要使用`UPDATE`DML。语法是

```
UPDATE tableName
SET columnName = newValue
WHERE columnN = value            // <== this is your condition 
```

回到您的问题，您执行查询的方式并不需要`mysql_escape_string`，因为您只传递整数值。目前，更多的 PHP 开发人员不再使用`mysql_escape_string`它，因为它已经被劝阻，而且正如 PHP 手册网站所说，这个功能已经被贬值了。或者，应该使用**[PDO_MYSQL](http://www.php.net/manual/en/ref.pdo-mysql.php)**或**[MYSQLi扩展。](http://www.php.net/manual/en/book.mysqli.php)**

# regex - TCL中的正则表达式

> ID：11893946
> 
> 赞同：0
> 
> 时间：2012-08-10T00:35:56.767
> 
> 标签：regex, tcl

我必须在 TCL 中使用正则表达式来解析这种格式。这是格式

```
 wl -i eth1 country

              Q1 (Q1/27) Q1 
```

我正在尝试使用单词 country 作为关键字来解析格式“Q1 (Q1/27) Q1”。如果它与国家/地区在同一行，我可以使用以下正则表达式命令。

```
 regexp {([^country]*)country(.*)} $line match test country_value 
```

但是我该如何解决上述情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:19:43.250

首先，您使用的正则表达式首先并没有做正确的事情，因为`[^country]`匹配一*组*字符，该字符集由除 in 之外的所有字母组成`country`（因此它仅从`h`in`eth1`开始匹配，因为需要`country`然后）。

默认情况下，Tcl 使用整个字符串来匹配，换行符只是普通字符。（还有一个选项可以通过指定 来使它们变得特别`-line`，但默认情况下它不是打开的。）这意味着如果我使用你的整个字符串并`regexp`用你的正则表达式输入它，它就可以工作（好吧，你可能想要`string trim $country_value`在某些观点）。这意味着您*真正的*问题在于提供要匹配的正确字符串。

如果您一次显示一行（可能是从文件中读取），并且您想对一行使用匹配来触发下一行的处理，则需要在正则表达式匹配之外进行一些处理：

```
set found_country 0
while {[gets $channel line] >= 0} {
    if {$found_country} {
        # Process the data...
        puts "post-country data is $line"
        # Reset the flag
        set found_country 0
    } elseif {[regexp {(.*) country$} $line -> leading_bits]} {
        # Process some leading data...
        puts "pre-country data is $leading_bits"
        # Set the flag to handle the next line specially
        set found_country 1
    }
} 
```

如果您想完全跳过空白行，`if {$line eq ""} continue`请在`if {$found_country} ...`.

# php - 新手php正则表达式问题

> ID：11893947
> 
> 赞同：3
> 
> 时间：2012-08-10T00:36:02.853
> 
> 标签：php, regex

我有以下代码：

```
 <?php
        $data="000ffe-fcc9f4 1 000fbe-fccabe";
        $pattern='/([0-9A-F]{6})-([0-9A-F]{6})$/i';
        echo "the pattern we are using is: ".$pattern."<BR>";

        preg_match_all($pattern,$data,$matches, PREG_SET_ORDER );

        print_r($matches[0]); 
```

?>

我不明白为什么它没有找到两个 MAC 地址作为匹配项。

页面上的输出如下所示：

```
the pattern we are using is: /([0-9A-F]{6})-([0-9A-F]{6})$/i
Array ( [0] => 000fbe-fccabe [1] => 000fbe [2] => fccabe ) 
```

我期待元素 [0] 将同时包含 000ffe-fcc9f4 和 000fbe-fccabe。你能告诉我我做错了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T00:38:27.293

它没有找到两者的原因是因为您`$`的正则表达式末尾有 a ，这意味着它只会匹配字符串末尾的该模式。

尝试更改`$pattern`为`/([0-9A-F]{6})-([0-9A-F]{6})/i`，应该两者都匹配。

# javascript - Highcharts 显示具有多个数据系列的相同 yAxis 开始值和结束值

> ID：11893950
> 
> 赞同：2
> 
> 时间：2012-08-10T00:36:12.090
> 
> 标签：javascript, highcharts

我试图让左右 yAxis 显示相同的开始和结束。是否可以使用多个数据系列在 yAxis 上显示相同的增量？如果是这样，您能否提供示例代码或指向示例。这就是我想要实现的目标。

![在此处输入图像描述](../Images/fbfc67a94c55abc0e9750ba9766ac5af.png)

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T03:09:20.293

对的，这是可能的。您可以通过对两个轴使用相同的 min、max 和 tickInterval 来控制轴标签。在以下[**示例**](http://jsfiddle.net/6gX5R/)中，我在两个系列中都使用了以下内容：

```
min: 0,
max: 600,
tickInterval: 50, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-16T18:23:47.033

Highcharts 还具有使用linkedTo 属性将多个轴链接在一起的功能。您必须在轴的属性中指定它与哪个轴链接，方法是指定它在轴数组中的索引。

```
yAxis: [

                { // Primary
                    title: {
                        text: "Label for first Axis"
                    }
                },
                { // Dependent Axis
                    title:{
                        text: "Label for dependent Axis"
                    },
                    linkedTo: 0
                }
            ] 
```

# c# - 如何在这个 lambda 函数中添加多个条件？

> ID：11893954
> 
> 赞同：0
> 
> 时间：2012-08-10T00:36:19.500
> 
> 标签：c#, .net, linq, entity-framework, c#-4.0

我正在使用 EF 通用存储库并具有此功能。

```
public IEnumerable<T> Query(Expression<Func<T, bool>> filter)
    {
        return objectSet.Where(filter);
    } 
```

它工作正常，在我在这样的类中使用此功能之前：

```
 private void BindProbabationPeriod()
    {
        ddlProbabationPeriod.DataSource = context.PeriodRepository.Query(a => a.EntityId == selectedEntityId);
        ddlProbabationPeriod.ValueMember = "Id";
        ddlProbabationPeriod.DisplayMember = "ProbabationPeriod";
    } 
```

因为我刚开始使用 LINQ，所以我对它没有很好的了解。你能指导我如何在这种情况下添加和（和条件）。我想修改它并添加另一个条件，即名称列不应为空。

请注意，此实例是 Period，因此存储库是 PeriodRepository。

```
context.PeriodRepository.Query(a => a.EntityId == selectedEntityId and a.Name!=null); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T00:39:22.700

这应该有效：

```
context.PeriodRepository.Query(a => a.EntityId == selectedEntityId && a.Name != null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T15:04:57.430

这也可以

```
context.PeriodRepository.Query(a => a.EntityId == selectedEntityId).Where(a =>  a.Name != null); 
```

# ruby-on-rails - 基于渴望加载的Rails中的智能总和？

> ID：11893957
> 
> 赞同：4
> 
> 时间：2012-08-10T00:36:26.707
> 
> 标签：ruby-on-rails, activerecord

Rails 有一个 sum 函数，可以像这样直接进入 SQL：

```
User.find(1).books.sum(:pages_count)
SELECT SUM("books"."pages_count") AS sum_id FROM "books" WHERE "books"."user_id" = 1
=> 3024 
```

但是，如果您在控制器中，您可能希望像这样进行急切加载：

```
users = User.limit(10).includes(:books)
users.first.books.map(&:pages_count).sum
=> 4325 
```

这样你只做两个 SQL 查询，剩下的就是 ruby​​ 代码。

我正在尝试一种方法来检测关系是否已被急切加载并选择正确的求和函数但没有这样的运气。

这是我的代码：

```
module ActiveRecord
  module Calculations
    def smart_sum(column = :value)
    puts self.loaded?
      if loaded?
        collect {|x| x[column] }.sum
      else
        sum(column)
      end
    end
  end
end 
```

奇怪的加载？bit 在该方​​法中不起作用，因此始终返回 SQL 总和。有什么帮助吗？

# windows - Python：以编程方式更改 Cmd 启动文件夹

> ID：11893958
> 
> 赞同：0
> 
> 时间：2012-08-10T00:36:30.240
> 
> 标签：windows, python-3.x, cmd

我正在尝试创建一个 python 程序来轻松更改我的 cmd 启动文件夹（而不是键入 cd ... 导航到所需的文件）
但首先我需要弄清楚如何更改它而无需在 cmd 中键入 regedit.exe .
在浏览了python文档之后，我得到了：

```
from winreg import*

a=OpenKey(HKEY_CURRENT_USER,"Software\Microsoft\Command Processor\\")
SetValue(HKEY_CURRENT_USER,"Software\Microsoft\Command Processor\\",REG_SZ,"cd\\the path that I want.") 
```

此代码确实编辑了字符串值（我相信这就是它的名称）默认值。
但是我需要它做的是编辑字符串值 Autorun #我
尝试了将 Autorun 放入 SetValue 函数的不同方法，但它没有用。
注意：Default 和 Autorun 都在 HKEY_CURRENT_USER\Software\Microsoft\Command Processor 中。
我也试过

```
SetValueEx(a,"Autorun",0,REG_SZ,"cd\\The path that I wantsss.")#Don't know if this is the right way to use it. 
```

但这给了我这个错误：

```
Traceback (most recent call last):
  File "<pyshell#10>", line 1, in <module>
    SetValueEx(a,"Autorun",0,REG_SZ,"cd\\The path that I wantsss.")
WindowsError: [Error 5] Access is denied 
```

我使用python 3.1和windows7
提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T21:43:21.703

您必须使用 SetValueEx 并使用适当的访问权限（KEY_WRITE 或 KEY_ALL_ACCESS）打开密钥，如下所示：

```
from winreg import*

a=OpenKey(HKEY_CURRENT_USER,"Software\\Microsoft\\Command Processor",0,KEY_WRITE)
SetValueEx(a,"Autorun",0,REG_SZ,"cd\\The path that I wantsss.")
CloseKey(a) 
```

# c# - Avalonedit 如何以编程方式更改文本的背景

> ID：11893962
> 
> 赞同：5
> 
> 时间：2012-08-10T00:36:56.030
> 
> 标签：c#, .net, wpf, avalonedit, text-editor

我想实现一些在提供文档行时以编程方式更改文本背景的东西。（看起来非常类似于文本的块选择的东西。我将使用它来调试我正在使用的 IDE 的断点设计）。我不想使用选择，因为它会导致文本框滚动。

我想我需要使用 DocumentColorizingTransformer 但我不是 100% 确定如何去做。

```
public class ColorizeAvalonEdit : ICSharpCode.AvalonEdit.Rendering.DocumentColorizingTransformer
    {
        protected override void ColorizeLine(ICSharpCode.AvalonEdit.Document.DocumentLine line)
        {
            int lineStartOffset = line.Offset;
            string text = CurrentContext.Document.GetText(line);
            int start = 0;
            int index;
            if (line.LineNumber == LogicSimViewCodeWPFCtrl.currentLine)
            {
                while ((index = text.IndexOf(text, start)) >= 0)
                {
                    base.ChangeLinePart(
                        lineStartOffset + index, // startOffset
                        lineStartOffset + index + text.Length, // endOffset
                        (VisualLineElement element) =>
                        {
                            element.TextRunProperties.SetBackgroundBrush(Brushes.Red);

                        });
                    start = index + 1; // search for next occurrence
                }
            }
        }
    } 
```

currentLine 是要突出显示的部分。

上面的代码确实可以正常工作..唯一的问题是如果 currentLine 在我查看该行时发生变化，它不会突出显示更新的行，直到我滚动到文档的另一部分（隐藏更新的行），然后回来到更新的行。

另外，如何使行号从零开始？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T12:23:41.353

由于这是他们的创作，我偷看了 SharpDevelop 的源代码以及他们是如何做到的。

他们定义了一个书签类型 ( `BreakpointBookmark`) 并将书签添加到该行。`CreateMarker`书签本身在方法中设置行的颜色。很奇怪，SharpDevelop 中无法配置断点的颜色。

希望能帮助到你。

```
 protected override ITextMarker CreateMarker(ITextMarkerService markerService)
    {
        IDocumentLine line = this.Document.GetLine(this.LineNumber);
        ITextMarker marker = markerService.Create(line.Offset, line.Length);
        marker.BackgroundColor = Color.FromRgb(180, 38, 38);
        marker.ForegroundColor = Colors.White;
        return marker;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T01:28:18.773

我找到了答案

```
TxtEditCodeViewer.TextArea.TextView.Redraw(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T23:56:12.197

这不是这个[问题](https://stackoverflow.com/questions/5029724/avalonedit-wpf-texteditor-sharpdevelop-how-to-highlight-a-specific-range-of-t)的重复吗？

但是，您似乎应该调用`InvalidateArrange()`编辑器或`InvalidateVisual()`每个更改的视觉对象。

# objective-c - iOS：从辅助 XIB 返回主 XIB

> ID：11893963
> 
> 赞同：1
> 
> 时间：2012-08-10T00:36:57.650
> 
> 标签：objective-c, ios, xib

在我使用第二个 XIB 后，我正试图将其更改回主 XIB。这是我正在使用的当前代码：

```
NSArray *nibObjs = [[NSBundle mainBundle] loadNibNamed:@"Results1" owner:self options:nil];
    UIView *aView = [nibObjs objectAtIndex:0];
    self.view = aView; 
```

我在第二个 xib 上有一个返回原始 xib 的按钮。当我按下按钮时，应用程序崩溃了。我不知道为什么，因为它没有显示错误 - 它只是崩溃。这是第二个 xib 或“Results1” xib 文件上按钮上的代码：

```
-(IBAction)Button100:(id)sender
{
NSArray *nibObjs = [[NSBundle mainBundle] loadNibNamed:@"main" owner:self options:nil];
UIView *aView = [nibObjs objectAtIndex:0];
self.view = aView;
} 
```

不知道我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:07:20.497

问题是我需要关闭自动引用计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T00:46:03.470

改为添加为子视图，因此您可以“弹出”Results1 视图：

```
// in your .h
@property (strong) UIView *aView;

// replace your provided code with this
NSArray *nibObjs = [[NSBundle mainBundle] loadNibNamed:@"Results1" owner:self options:nil];
self.aView = [nibObjs objectAtIndex:0];
[self.view addSubview:self.aView];

- (IBAction)Button100:(id)sender
{
    [self.aView removeFromSuperview];
    self.aView = nil;
} 
```

只是一个建议——如果你想让它们“交换”，考虑使用`transitionFromView:toView:duration:options:completion:`UIView 中的类方法。

# templates - 如果检查变量，请下划线 js 模板

> ID：11893966
> 
> 赞同：0
> 
> 时间：2012-08-10T00:37:17.920
> 
> 标签：templates, backbone.js, web, underscore.js

我正在尝试使用 underscore.js 模板方法来呈现一些数据，所以基本上这就是我想要做的，如果我用伪代码来做的话

```
if (url is not null) {
     <div>
       <img src=url />
     </div>
} 
```

我需要在下划线 js 模板中进行此检查，但我不确定以下是否合法，棘手的部分是 url 也是一个模板变量

```
<% if (<%=url%>) { %>
    <img src=<%=url%> />
<% } %> 
```

帮助？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T02:13:46.423

在 JavaScript 上：

```
 var myTmpl = _.template(foo);
 myTmpl.tmpl({url: 'foo.com'}); 
```

在模板上：

```
<% if (url) { %>
  <img src=<%=url%> />
<% } %> 
```

请记住：当您使用 <% 时，您只是在编写 javascript ;)

# actionscript-3 - 如何在 Flash CS5.5 中使用 Air for Android 构建的原生 Android 应用程序中放置“分享到 Facebook”按钮？

> ID：11893967
> 
> 赞同：2
> 
> 时间：2012-08-10T00:37:25.873
> 
> 标签：actionscript-3, android-intent, air, flash-cs5, facebook-sharer

我是新手，但我们在 Flash CS 5.5 中使用 Air for Android 创建了一个新的 Android 原生应用程序。我们有一个工作应用程序，并希望在最后一个屏幕上，添加一个“分享到 Facebook”按钮，将用户的结果分享到他们的 Facebook 墙/时间线。我已经搜索和搜索，但我能找到的要么是用 Java 编写的，而不是 Actionscript 3，要么是直接从应用程序更新状态。我们只想从我们的应用程序发送一个预定义的片段（用户结果）。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:48:49.893

有一个用于此的 API，具有适用于 AIR 桌面、AIR 移动和 Web 应用程序的变体。它开始受到 Facebook 和 Adob​​e 的正式支持，尽管我不确定它是否仍然是：

[http://code.google.com/p/facebook-actionscript-api/](http://code.google.com/p/facebook-actionscript-api/)

有很多关于如何使用它的文档。您需要在 facebook 上创建一个应用程序，这样您才能正确识别自己。将 facebook 开发者应用程序添加到您的 FB 帐户，然后在此处查看：

[https://developers.facebook.com/](https://developers.facebook.com/)

share to wall call 的基本内容如下所示：

```
import com.facebook.graph.data.FacebookAuthResponse;
import com.facebook.graph.Facebook;

function initializeFacebook()
{
    Facebook.init("YOUR APP ID", onFacebookInit);
}

var interval:int = -1;

function onFacebookInit(success:Object, fail:Object):void 
{
    if (success) 
    {
        post();
    }
    else
    {
        var opts:Object = { scope:"publish_stream" };
        Facebook.login(null, opts);
        // In theory you should get a post back when logged in. 
        // In practice this often fails, and it's better to poll for an access token.
        interval = setInterval(pollForLoggedIn, 500);
    }
}

function pollForLoggedIn():void 
{
    if (Facebook.getAuthResponse().accessToken)
    {
        clearInterval(interval);
        post();
    }
}

function post():void 
{
    var auth:FacebookAuthResponse = Facebook.getAuthResponse();
    var token:String = auth.accessToken;
    var user:String = auth.uid;
    var values:Object = 
    { 
        access_token: token,
        name: "TITLE OF YOUR POST",
        picture: "OPTIONAL THUMBNAIL PATH",
        link:"OPTIONAL LINK",  
        description: "OPTIONAL APP DESCRIPTION", 
        message: "BODY OF POST"
    };
Facebook.api("/" + user + "/feed", handleSubmitFeed, values, URLRequestMethod.POST); 
}

function handleSubmitFeed(success:Object, fail:Object):void 
{
    // Done.
} 
```

# mirth - 使用 mirth connect 读取 sqlserver 数据库并将其转换为 xml 格式，反之亦然

> ID：11893969
> 
> 赞同：2
> 
> 时间：2012-08-10T00:37:38.303
> 
> 标签：mirth

我有一个要求，我必须从 sql server 本地数据库中读取数据，并首先将其映射到另一个第三方组织提供的 XML 文件中。谁有自己的数据库。然后，一旦我有正确的字段映射，我必须将数据从 sql server 数据库转换为 XML 格式，反之亦然。到目前为止，我可以在 mirthconnect 中连接 sqlserver 数据库，但是我不知道需要在通道和转换器中创建哪些步骤来执行读取数据并将相应字段映射到第三方提供的 XML 格式并最终写入 XML 文件的任务提供，反之亦然。

简而言之，如果我可以在 mirth connect 中获取创建此类通道的详细信息，我可以在其中读取 sql server 数据库并将字段映射到相应的 xml 文件中......我想我可以写入它。如果我从 xml 格式转到 sqlserver 数据库，同样的方法也适用。有人能告诉我如何做到这一点吗？

对于数据库字段映射，将字段完全映射到两个不同数据库的最佳方式是什么，是否有任何工具可以提供帮助......

此外，一旦完成将数据从一端转换到另一端的任务，是否有任何方法在 mirth connect 中验证数据是否正确地从一端移动到另一端？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:53:57.143

如果你想一次处理一行，普通的数据库阅读器就可以了；只需将所有步骤的摘要下的数据类型设置为 XML。将频道编写器的目的地设置为无处并运行一次以查看它在仪表板中的作用。您可以将其作为示例复制并粘贴到您的消息模板中，以便映射变量。

如果您想在 Transformer 步骤中一次处理整个结果，我发现创建自定义阅读器并在我的 Microsoft SQL 查询末尾使用“FOR XML RAW, ELEMENTS”会更容易。就像是：

```
 //build connection
    var dbConn =      DatabaseConnectionFactory.createDatabaseConnection('com.microsoft.sqlserver.jdbc.SQLServerDriver','jdbc:sqlserver://servername:1433;databaseName=dbname;integratedSecurity=true;','','');  //this uses the MS JDBC driver and auth dll
    //query results with XML output from server  'FOR XML' statement at end
    var result = dbConn.executeCachedQuery("SELECT col1 AS FirstColumn, col2 AS SecondColumn FROM [dbname].[dbo].[table1] WHERE [processed] = 'False' FOR XML RAW, ELEMENTS");

    //Make sure we are at the top of results
    result.beforeFirst();

    //wrap XML.  Namespace etc. not required
    XMLresult = '<message>';

    //XML broke up across several rows in one column.  Re-combine
    while (result.next()) {

    XMLresult += result.getString(1);

    }

    XMLresult += '</message>';

    dbConn.close();

    return XMLresult; 
```

# jquery - .show() 按钮出现在其他所有内容之前

> ID：11893977
> 
> 赞同：0
> 
> 时间：2012-08-10T00:39:10.727
> 
> 标签：jquery, asp.net, button, show

我正在使用 jQuery 的 .show() 函数在用户按下删除按钮时显示一个弹出窗口。

除了一件事之外，该代码运行良好。这两个按钮出现在 div 的其余部分之前，并且文本出现。有谁知道为什么或是否有解决此问题的方法？

HTML（#delete 嵌套在其他地方）

```
<div id="popupbgitembg">
<ul class="popupbgitems">
        <li>
            Are you sure you want to delete?
        </li> 
        <li></li> 
        <li>
            <asp:Button ID="butdelete" runat="server" Text="Delete" Font-Size="11px"/>
            <asp:Button ID="butcancel" runat="server" Text="Cancel" Font-Size="11px"/>
        </li>
    </ul>
</div> 
```

jQuery

```
 function popup() {
            $("#popupbg").animate({ opacity: ".8" });
            $("#delete").click(
            function() {
                $("#popupbg, #popupbgitembg").show('fast')
            });
            $("#butdelete, #butcancel").click(
            function() {
                $("#popupbg, #popupbgitembg").hide('medium')
            });
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T01:20:02.237

我猜它与作为 asp 控件的按钮有关。为什么不隐藏按钮并在加载对话框后显示它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T01:20:17.757

尝试用 html-buttons 替换 asp-buttons ，如果这没有帮助：我不明白 #popupbg 指的是什么，如果它在这种情况下是嵌套的div，只需使用：

```
//first change

    <li>
        <button type="button" ID="butdelete" runat="server" Text="Delete" Font-Size="11px"/>
        <button type="button" ID="butcancel" runat="server" Text="Cancel" Font-Size="11px"/>
    </li> 
```

//第二次改变

```
 function() {
            $("#popupbgitembg").show('fast')
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T07:13:45.597

在 jQuery 中使用 Asp.net 按钮时，必须使用类来访问该元素。例如 ：

```
<asp:Button ID="butdelete" calss="butdelete" runat="server" Text="Delete" Font-Size="11px"/> 
```

因为 Asp.net ，在页面渲染期间重写元素 id！所以元素 id 更改为其他名称。您可以在页面右键单击中使用“查看页面源”来查看此操作。

```
<button type="button" ID="butdelete" runat="server" Text="Delete" Font-Size="11px"/> 
```

在这种情况下，您无法访问 asp.net 中的事件管理器。也许您需要使用 event ，但这种方式可能是不可能的？！

对于英语写作我很抱歉，我还在学习英语。你好运。

# ruby-on-rails - ruby 将新的键值对添加到嵌套哈希中

> ID：11893978
> 
> 赞同：6
> 
> 时间：2012-08-10T00:39:12.050
> 
> 标签：ruby-on-rails, ruby, hash

假设我们这里有一个嵌套散列。

```
a = {:"0" => {:CA => {:count => 10}}} 
```

如果我们想向该哈希添加一个新的哈希对，比如说

```
a = {:"0" => {:NY => {:count => 11}}} 
```

让它成为

```
a = {:"0" => {:CA => {:count =>10}, :NY => {:count => 11}}} 
```

我应该怎么办？

我试过了

```
a[:0][:NY][:count] = 11 
```

但得到错误“未定义的方法 `[]=' for nil:NilClass (NoMethodError)”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T01:30:02.797

您收到 nil:NilClass 错误，因为您试图设置一个尚不存在的哈希键。您需要创建作为键值的哈希值：NY。

```
a[:"0"].merge!({:NY => {:count => 11}}) 
```

或者

```
a[:"0"][:NY] = {:count => 11} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-10T00:46:05.120

我的猜测是你想做这样的事情。

```
a = {:"0" => {:CA => {:count => 10}}}
b = {:"0" => {:NY => {:count => 11}}} 
a[:"0"][:NY] = b[:"0"][:NY] #=> {:"0"=>{:CA=>{:count=>10}, :NY=>{:count=>11}}} 
```

您还可以利用合并

```
a = {:"0" => {:CA => {:count => 10}}}
b = {:"0" => {:NY => {:count => 11}}} 
a[:"0"] = a[:"0"].merge(b[:"0"]) #=> {:"0"=>{:CA=>{:count=>10}, :NY=>{:count=>11}}} 
```

# google-apps-script - 特定工作表的 onEdit 时间戳

> ID：11893979
> 
> 赞同：0
> 
> 时间：2012-08-10T00:39:12.917
> 
> 标签：google-apps-script, google-sheets

我正在寻找一个脚本的帮助，该脚本发布特定工作表已被编辑，而不是文档中的任何工作表被修改时。

这是我目前拥有的：

```
function onEdit() {
  var d = new Date();
  var h = d.getHours();
  var min = d.getMinutes();
  var sec = d.getSeconds();
  var h_str = h;
  var min_str = min;
  var sec_str = sec;

// format time nicely
  if (h < 10) 
    h_str = '0' + h;
  if (min < 10) 
    min_str = '0' + min;
  if (sec < 10) 
    sec_str = '0' + sec;

// create the formatted time string
  var time_str = h_str + ':' + min_str + ':' + sec_str;

// create the message
  var s = 'Roster last modified on:     ' + d.toDateString() + ' @ ' + time_str;

// change the range
  SpreadsheetApp.getActiveSpreadsheet().getSheetByName('Infernal Dawn').getRange("A1").setValue(s);} 
```

这非常适合仅使用修改日期更新工作表“Infernal Dawn”，但它也会在修改任何工作表时更新。

我发现有两种不同的方法可以做到这一点（一种使用 gid）。唯一的问题是我的编码技能非常有限，我无法弄清楚如何将其集成到上述代码中。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:55:25.550

onEdit 函数有一个可选参数，用于记住编辑了哪个单元格\范围\工作表。此参数的结构在[此处](https://developers.google.com/apps-script/understanding_events?hl=ru)描述。

```
function onEdit(e) 
{ var d=new Date();
  var s=d.toLocaleString();
  if(e.source.getActiveSheet().getName()=="TheSheetThatWeWishToTrace")
  { SpreadsheetApp.getActiveSpreadsheet().getSheetByName('Infernal Dawn').getRange("A1").setValue(s);}
} 
```

# jquery - 不能让 jQuery noConflict 工作

> ID：11893982
> 
> 赞同：-2
> 
> 时间：2012-08-10T00:39:38.980
> 
> 标签：jquery

我已经尝试了好几天没有运气 - 我只是无法理解它有多个使用不同 jquery 但不能使它们一起工作的脚本

```
<script src="/scripts/lavalamp/jquery-1.2.3.min.js" type="text/javascript">
<script type="text/javascript">
        var MyjQ = jQuery.noConflict(true);
</script>
<script src="/scripts/lavalamp/jquery.easing.min.js" type="text/javascript">
<script src="/scripts/lavalamp/jquery.lavalamp.min.js" type="text/javascript">
<script type="text/javascript">
(function($){
    $(function() {
        $("#1, #2, #3").lavaLamp({
            fx: "backout",
            speed: 700,
            click: function(event, menuItem) {
                return true; 
            }
        });
    });
})(MyjQ) 
</script>
<script src="/scripts/jquery.scrollTo-1.4.2-min.js" type="text/javascript">
<script src="/scripts/jquery.serialScroll-1.2.2-min.js" type="text/javascript">
<script src="/scripts/init.js" type="text/javascript">

<script src="/pages/cal/js/jquery-1.3.2.min.js" type="text/javascript">
<script type="text/javascript">
        var MyjQuery = jQuery.noConflict(true);
</script>
<script src="/pages/cal/js/jquery-ui-1.7.1.min.js" type="text/javascript">
<script src="/pages/cal/js/jquery.cookie.js" type="text/javascript">
<script type="text/javascript">
(function($){ 
    $(function() {
          var which_tab = $.cookie('which_tab') || 0;
          $("#tabs").tabs({
                   selected: which_tab,
                   select: function(e,ui){
                            $.cookie('which_tab', ui.index);
                   }
          });
     });
})(MyjQuery) 
</script>

</head> 
```

你能？如何做到这一点..（我已阅读但只是不明白如何使用 api.jquery 示例）

更新：即使经过一些努力似乎应该可以工作，jquery.cookie.js 和其他脚本也会抛出错误。所以 var MyjQuery = jQuery.noConflict(true); 修复（或不修复） var which_tab = $.cookie 但 ../jquery.cookie.js 呢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T00:56:22.340

您的示例代码中根本没有使用 noconflict 。混合它们是一个坏主意，但如果必须，请使用 noconflic 重命名每个实例：

```
<script src="/pages/cal/js/jquery-1.3.2.min.js" type="text/javascript">
<script type="text/javascript">
$jq13 = jquery.noconflict(true);
$jq13.[code here to execute with JQuery 1.3]
</script>

<script src="/pages/cal/js/jquery-1.4.2.min.js" type="text/javascript">
<script type="text/javascript">
$jq14 = jquery.noconflict(true);
$jq14.[code here to execute with JQuery 1.4]
</script> 
```

# objective-c - 如何在没有时间延迟的情况下从一种音乐序列更改为另一种音乐序列

> ID：11893984
> 
> 赞同：1
> 
> 时间：2012-08-10T00:39:55.470
> 
> 标签：objective-c, ios, xcode, core-audio, coremidi

我正在播放一个 MIDI 序列，通过`MusicPlayer`它从 MIDI 文件加载，我想在播放时将序列更改为另一个序列。当我尝试这个时：

```
 MusicPlayerSetSequence(_player, sequence);
 MusicSequenceSetAUGraph(sequence, _processingGraph); 
```

它停止播放。所以我重新开始并设置时间

```
MusicPlayerSetTime(_player, currentTime); 
```

所以它会在前一个序列停止的地方再次播放，但有一点延迟。我试图将时间间隔添加到`currentTime`，这是通过获取停止之前和重新开始之后的时间来获得的。但仍有延迟。

我想知道是否有停止 -> 更改顺序 -> 重新开始的替代方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T00:10:29.403

如果您要添加和删除轨道或切换序列，您肯定需要管理 AUSamplers。处理 AUSampler 并为每个新轨道创建一个新的可能更清洁，但也可以“回收”AUSampler，但这意味着您需要跟踪它们。

管理 AUSamplers 意味着当您不再使用其中的一个实例时（例如，如果您删除或替换 MusicTrack），您需要将其与 AUmixer 实例断开连接，将其从 AUGraph 实例中删除，然后更新 AUGraph。

有很多方法可以处理这一切。为了方便跟踪 AUSampler 实例的总线编号、加载的声音字体和其他一些内容，我使用了一个名为 NSObject 的子类`SamplerAudioUnit`，以包含所有需要的属性和方法。MusicTracks 也一样——我有一个`Track`课——但你的项目可能不需要这个。

要点是需要对 AUSamplers 进行性能和内存管理。如果不再使用某个实例，则应将其移除并释放 AUmixer 总线输入。

顺便说一句 - 我检查了文档，显然混频器总线的数量没有技术限制 - 但确实需要指定数量。

```
// this is not cut and paste code - just an example of managing the AUSampler instance

- (OSStatus)deleteTrack:(Track*) trackObj
{
    OSStatus result = noErr;

    // turn off MP if playing
    BOOL MPstate = [self isPlaying];
    if (MPstate){
        MusicPlayerStop(player);
    }

    //-disconnect node from mixer + update list of mixer buses
    SamplerAudioUnit * samplerObj = trackObj.sampler;
    UInt32 busNumber = samplerObj.busNumber;

    result = AUGraphDisconnectNodeInput(graph, mixerNode, busNumber);
    if (result) {[self printErrorMessage: @"AUGraphDisconnectNodeInput" withStatus: result];}

     [self clearMixerBusState: busNumber]; // routine that keeps track of available busses

    result = MusicSequenceDisposeTrack(sequence, trackObj.track);
    if (result) {[self printErrorMessage: @"MusicSequenceDisposeTrack" withStatus: result];}

    // remove AUSampler node
    result = AUGraphRemoveNode(graph, samplerObj.samplerNode);
    if (result) {[self printErrorMessage: @"AUGraphRemoveNode" withStatus: result];}

    result = AUGraphUpdate(graph, NULL);
    if (result) {[self printErrorMessage: @"AUGraphUpdate" withStatus: result];}
    samplerObj = nil;
    trackObj = nil;

    if (MPstate){
        MusicPlayerStart(player);
    }

    //    CAShow(graph);
    //    CAShow(sequence);

    return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T00:20:39.907

因为

```
MusicPlayerSetSequence(_player, sequence);
MusicSequenceSetAUGraph(sequence, _processingGraph); 
```

仍然会导致播放器停止，仍然可以听到一点中断。因此，我没有更新`musicSequence`，而是继续更改了曲目的内容，这不会导致任何中断：

```
MusicTrack currentTrack;
MusicTrack currentTrack2;
MusicSequenceGetIndTrack(musicSequence, 0, &currentTrack);
MusicSequenceGetIndTrack(musicSequence, 1, &currentTrack2);
MusicTrackClear(currentTrack, 0, _trackLen);
MusicTrackClear(currentTrack2, 0, _trackLen);

MusicSequence tmpSequence;
switch (number) {
    case 0:
        tmpSequence = musicSequence1;
        break;
    case 1:
        tmpSequence = musicSequence2;
        break;
    case 2:
        tmpSequence = musicSequence3;
        break;
    case 3:
        tmpSequence = musicSequence4;
        break;

    default:
        tmpSequence = musicSequence1;
        break;
}

MusicTrack tmpTrack;
MusicTrack tmpTrack2;
MusicSequenceGetIndTrack(tmpSequence, 0, &tmpTrack);
MusicSequenceGetIndTrack(tmpSequence, 1, &tmpTrack2);
MusicTimeStamp trackLen = 0;
UInt32 trackLenLenLen = sizeof(trackLen);
MusicTrackGetProperty(tmpTrack, kSequenceTrackProperty_TrackLength, &trackLen, &trackLenLenLen);
_trackLen = trackLen;
MusicTrackCopyInsert(tmpTrack, 0, _trackLen, currentTrack, 0);
MusicTrackCopyInsert(tmpTrack2, 0, _trackLen, currentTrack2, 0); 
```

没有断开节点，没有更新图表，没有停止播放器。

# javascript - Safari 6 和 3d 转换

> ID：11893989
> 
> 赞同：0
> 
> 时间：2012-08-10T00:40:46.470
> 
> 标签：javascript, safari, impress.js

所以我在[danzimm.com](https://danzimm.com/#/hello)有一个网站，它在 Safari 5 中正常运行，在 Google Chrome 和 Firefox 中正常运行，但不再适用于 Safari 6。

我使用的是 impress.js 框架的旧版本（我稍微修改了一下），我依赖`rotateX/rotateY/rotateZ`选择器（不确定我在那里使用了正确的术语）以及`perspective` `translate3d`and`size`选择器（再次不确定使用正确的术语）

我绝不是一个经验丰富的网络开发人员，但我有点摸了摸鼻子......

无论如何，这是 Safari 6 的错误还是我在做一些愚蠢的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:46:19.797

Safari 6 和 3d 转换存在许多记录在案的问题。希望它会在下一个版本中得到修复。 [示例 1](http://www.flickr.com/photos/christopherholland/7661336160/) [示例 2](http://twitter.com/zachleat/status/237244110950522880/photo/1/large)

**更新：**似乎已在 Safari 6.0.1 中修复

# python - 如何从 Python 可靠地确定 /usr/bin/vlc 的版本？

> ID：11893990
> 
> 赞同：0
> 
> 时间：2012-08-10T00:40:52.740
> 
> 标签：python, version, subprocess, vlc

例如，

```
subprocess.Popen(["/usr/bin/vlc", "--version"], stderr=subprocess.PIPE, stdout=subprocess.PIPE).communicate() 
```

在我的电脑上导致

```
('VLC version 2.0.2 Twoflower (.....see the AUTHORS file.\n', '')
# longish text in stdout with versions, including GCC version, date
# nothing on stderr 
```

在其他计算机上它导致

```
('', 'VLC media player 1.1.3 The Luggage (revision exported)\n')
# on stderr 
```

还有（奇怪）：

```
mycomp> /usr/bin/vlc --version 2>&1 > /dev/null
VLC media player 2.0.2 Twoflower (revision 2.0.1-453-g40d9fef)
mycomp> perl -e 'print `/usr/bin/vlc --version 2>&1 > /dev/null`'
(no output at all)
mycomp> /usr/bin/vlc --version 2>&1 > /dev/null | cat
(no output at all)
mycomp> socat system:'/usr/bin/vlc --version > /dev/null',stderr -
(no output at all)
mycomp> socat system:'/usr/bin/vlc --version > /dev/null',pty,stderr -
VLC media player 2.0.2 Twoflower (revision 2.0.1-453-g40d9fef)
mycomp> strace -o /tmp/2 -e write  /usr/bin/vlc --version 2>&1 > /dev/null | cat
(no output at all)
mycomp> cat /tmp/2
write(1, "VLC version 2.0.2 Twoflower (2.0"..., 401) = 401
mycomp> strace -f -o `tty` -e write  /usr/bin/vlc  --version > /dev/null 2> /dev/tty2
3628  write(2, "VLC media player 2.0.2 Twoflower"..., 63) = 63
3628  write(1, "VLC version 2.0.2 Twoflower (2.0"..., 401) = 401
strace -f -o `tty` -e write  /usr/bin/vlc  --version > /dev/null 2> /dev/null
3587  write(1, "VLC version 2.0.2 Twoflower (2.0"..., 401) = 401
# sad, seems to be "too clevel"-type of bug.

othercomp> perl -e 'print `/usr/bin/vlc --version 2>&1 > /dev/null`'
VLC media player 1.1.3 The Luggage (revision exported)
othercomp> /usr/bin/vlc --version 2>&1 > /dev/null
VLC media player 1.1.3 The Luggage (revision exported) 
```

怎么了？我应该依靠什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T00:44:46.220

看起来他们将输出`--version`从标准错误切换到标准输出。你必须同时检查两者。

# ruby - 服务器在编译资产时获得全部内存

> ID：11893991
> 
> 赞同：0
> 
> 时间：2012-08-10T00:41:03.230
> 
> 标签：ruby, ruby-on-rails-3, capistrano

我有一个在 EC2 上运行的 RorR 应用程序（微实例，~590mb 内存）。
当我使用 capistrano 部署应用程序时，当资产被编译时，内存使用率会达到 98.7%...
有没有办法减少这种使用量？

这是我的 deploy.rb

```
require "bundler/capistrano"

set :application, "name"
set :repository,  "git@github.com:user/app.git"

set :scm, :git

role :web, "server.compute.amazonaws.com" 
role :app, "server.compute.amazonaws.com" 
role :db,  "server.compute.amazonaws.com", :primary => true

set :user, "user"
set :use_sudo, false

default_run_options[:pty] = true
ssh_options[:forward_agent] = true
ssh_options[:keys] = ["#{ENV['HOME']}/key.pem"]

# if you want to clean up old releases on each deploy uncomment this:
after "deploy:restart", "deploy:cleanup"

set :deploy_to, "/home/user"
set :deploy_via, :remote_cache

role :web, "server.compute.amazonaws.com" # Your HTTP server, Apache/etc
role :app, "server.compute.amazonaws.com" # This may be the same as your `Web` server
role :db, "server.compute.amazonaws.com", :primary => true # This is where Rails migrations will run

# if you're still using the script/reaper helper you will need
# these http://github.com/rails/irs_process_scripts 
```

这是预期的行为吗？我应该增加内存吗？
我在 digitalocean.com 上使用了一个 256mb 的 VM，现在我使用的是 590mb 的 EC2，但消耗仍然达到几乎 100%

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T23:12:10.687

如果您正在运行 Rails 3.1.1，那么您的问题可能与此问题有关：[https](https://github.com/rails/rails/issues/3694) ://github.com/rails/rails/issues/3694 。它已在 rails 3.2 中修复，因此升级应该可以解决您的问题。

# c++ - 正确实现 condition_variable timed_wait

> ID：11893992
> 
> 赞同：13
> 
> 时间：2012-08-10T00:41:11.073
> 
> 标签：c++, multithreading, time

我正在阅读我的 STL 实现（标准问题`g++ 4.6.2`），并在以下内容中遇到了这种竞争条件`condition_variable`：

```
template<typename _Rep, typename _Period>
cv_status
wait_for(unique_lock<mutex>& __lock,
         const chrono::duration<_Rep, _Period>& __rtime)
{
    return wait_until(__lock, __clock_t::now() + __rtime);
} 
```

因为`__clock_t`是`std::chrono::system_clock`，所以我们被 NTP 之类的奇思妙想所束缚（如果时钟在 之后向后移动一天`__clock_t::now() + __rtime`，那么我们将等待一天）。

C++ 标准（30.5.1）似乎是正确的：

> 26
> 
> 效果：好像
> 
> `return wait_until(lock, chrono::steady_clock::now() + rel_time);`

Boost 的`condition_variable`实现也有同样的问题：

```
template<typename duration_type>
bool timed_wait(unique_lock<mutex>& m,duration_type const& wait_duration)
{
    return timed_wait(m,get_system_time()+wait_duration);
} 
```

事实上，底层的 pthreads 实现似乎是问题所在：

```
int pthread_cond_timedwait(pthread_cond_t *restrict cond,
   pthread_mutex_t *restrict mutex,
   const struct timespec *restrict abstime); 
```

因为`abstime`被指定为“系统时间”，而不是单调时钟。

所以我的问题是：如何`std::condition_variable::wait_for`正确实现类似的东西？是否有现有的实现可以做到这一点？还是我错过了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T05:21:10.007

诀窍是使用 a[`pthread_condattr_setclock`](http://pubs.opengroup.org/onlinepubs/009604599/functions/pthread_condattr_setclock.html)来告诉`pthread_condattr_t`使用`CLOCK_MONOTONIC`。执行此操作的 C 代码非常简单：

```
#include <time.h>
#include <pthread.h>

#include <errno.h>
#include <stdio.h>

int main()
{
    // Set the clock to be CLOCK_MONOTONIC
    pthread_condattr_t attr;
    pthread_condattr_init(&attr);
    if (int err = pthread_condattr_setclock(&attr, CLOCK_MONOTONIC))
    {
        printf("Error setting clock: %d\n", err);
    }

    // Now we can initialize the pthreads objects with that condattr
    pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;
    pthread_cond_t  cond;
    pthread_cond_init(&cond, &attr);

    // when getting the time, we must poll from CLOCK_MONOTONIC
    struct timespec timeout;
    struct timespec now;
    clock_gettime(CLOCK_MONOTONIC, &now);
    timeout.tv_sec = now.tv_sec + 5;
    timeout.tv_nsec = now.tv_nsec;

    // business as usual...
    pthread_mutex_lock(&mutex);
    int rc = pthread_cond_timedwait(&cond, &mutex, &timeout);
    if (rc == ETIMEDOUT)
        printf("Success!\n");
    else
        printf("Got return that wasn't timeout: %d\n", rc);
    pthread_mutex_unlock(&mutex);

    return 0;
} 
```

我将把这个开放一段时间，因为有人可能有一个更简单的答案。我在这里不满意的是，这意味着 a`wait_until`很难用实时时钟来实现（我最好的解决方案是将 in 中提供`Clock`的时间`time_point`转换为`steady_clock`' 时间并从那里开始......它仍然会受到时间变化的竞争条件的影响，但是如果您实时指定超时，那么您已经犯了一个可怕的错误）。

# php - SwiftMailer 错误

> ID：11893995
> 
> 赞同：0
> 
> 时间：2012-08-10T00:42:26.633
> 
> 标签：php, api, swiftmailer

所以我正在尝试设置 swift mailer 以使用 Mandrill API，但它不断抛出以下错误：

Failures:Array ( [0] => example@email.com ) （我的代码中的这个地方有一个正确的电子邮件）

我的代码如下：

```
 $subject = 'Hello from Mandrill, PHP!';
    // approved domains only!
    $from = array('example2@email.com' =>'Your Name');
    $to = array(
     'example@email.com'  => 'Recipient1 Name'
    );

    $text = "Mandrill speaks plaintext";
    $html = "Mandrill speaks HTML";

    $transport = Swift_SmtpTransport::newInstance('smtp.mandrillapp.com', 587);
    $transport->setUsername(getenv('my@mandrillemail.com'));
    $transport->setPassword(getenv('mymandrillpass'));
    $swift = Swift_Mailer::newInstance($transport);

    $message = new Swift_Message($subject);
    $message->setFrom($from);
    $message->setBody($html, 'text/html');
    $message->setTo($to);
    $message->addPart($text, 'text/plain');

    // Pass a variable name to the send() method
    if (!$swift->send($message, $failures))
    {
      echo "Failures:";
      print_r($failures);
    } 
```

出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T01:57:47.037

尝试使用 SSL 和端口 465。

```
$xport = Swift_SmtpTransport::newInstance('smtp.mandrillapp.com', 465, 'ssl');
$xport->setUsername('mandrilluser')
      ->setPassword('mandrillpass'); 
```

看看这是否适合你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T14:13:55.723

我的问题最终是我不得不从使用实际的 Mandrill 帐户密码更改为 ->setPassword() 变量中的 API。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-18T18:57:01.260

由于这纯粹是您的凭据错误，请交叉检查您使用的密码是否实际上是 Mandrill 生成的令牌。

密码并不意味着您帐户的“密码”！

# c - Why does the order of '-l' option in gcc matter?

> ID：11893996
> 
> 赞同：78
> 
> 时间：2012-08-10T00:42:29.173
> 
> 标签：c, gcc, linker, ld

I am trying to compile a program which uses [udis86](http://udis86.sourceforge.net/) library. Actually I am using an example program given in the [user-manual](http://udis86.sourceforge.net/manual/manual.html#id486176) of the library. But while compiling, it gives error. The errors I get are:

```
example.c:(.text+0x7): undefined reference to 'ud_init'
example.c:(.text+0x7): undefined reference to 'ud_set_input_file'
.
.
example.c:(.text+0x7): undefined reference to 'ud_insn_asm' 
```

The command I am using is:

```
$ gcc -ludis86 example.c -o example 
```

as instructed in the user-manual.

Clearly, linker is not able to link libudis library. But if I change my command to:

```
$ gcc example.c -ludis86 -o example 
```

It starts working. So can please someone explain what is the problem with the first command?

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-08-10T01:00:04.273

Because that's how the linking algorithm used by GNU linker works (a least when it comes to linking static libraries). The linker is a single pass linker and it does not revisit libraries once they have been seen.

A library is a collection (an archive) of object files. When you add a library using the `-l` option, the linker does not unconditionally take *all* object files from the library. It only takes those object files that are *currently needed*, i.e. files that resolve some currently unresolved (pending) symbols. After that, the linker completely forgets about that library.

The list of pending symbols is continuously maintained by the linker as the linker processes input object files, one after another from left to right. As it processes each object file, some symbols get resolved and removed from the list, other newly discovered unresolved symbols get added to the list.

So, if you included some library by using `-l`, the linker uses that library to resolve as many currently pending symbols as it can, and then completely forgets about that library. If it *later* suddenly discovers that it now needs some additional object file(s) from that library, the linker will not "return" to that library to retrieve those additional object files. It is already too late.

For this reason, it is always a good idea to use `-l` option *late* in the linker's command line, so that by the time the linker gets to that `-l` it can reliably determine which object files it needs and which it doesn't need. Placing the `-l` option as the very first parameter to the linker generally makes no sense at all: at the very beginning the list of pending symbols is empty (or, more precisely, consists of single symbol `main`), meaning that the linker will not take anything from the library at all.

In your case, your object file `example.o` contains references to symbols `ud_init`, `ud_set_input_file` etc. The linker should receive that object file first. It will add these symbols to the list of pending symbols. After that you can use `-l` option to add the your library: `-ludis86`. The linker will search your library and take everything from it that resolves those pending symbols.

If you place the `-ludis86` option first in the command line, the linker will effectively *ignore* your library, since at the beginning it does not know that it will need `ud_init`, `ud_set_input_file` etc. Later, when processing `example.o` it will discover these symbols and add them to the pending symbol list. But these symbols will remain unresolved to the end, since `-ludis86` was already processed (and effectively ignored).

Sometimes, when two (or more) libraries refer to each other in circular fashion, one might even need to use the `-l` option twice with the same library, to give linker two chances to retrieve the necessary object files from that library.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-10T01:26:17.993

I hit [this same issue](https://stackoverflow.com/questions/7130840/linker-and-dependencies) a while back. Bottom line is that gnu tools won't always "search back" in the library list to resolve missing symbols. Easy fixes are any of the following:

1.  Just specify the libs and objs in the dependency order (as you have discovered above)

2.  OR if you have a circular dependency (where libA references a function in libB, but libB reference a function in libA), then just specify the libs on the command line twice. This is what the manual page suggests as well. E.g.

    ```
    gcc foo.c -lfoo -lbar -lfoo 
    ```

3.  Use the `-(` and `-)` params to specify a group of archives that have such circular dependencies. Look at the GNU linker manual for `--start-group` and `--end-group`. See [here](http://unixhelp.ed.ac.uk/CGI/man-cgi?ld) for more details.

When you use option 2 or 3, you're likely introducing a performance cost for linking. If your don't have that much to link, it may not matter.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-06-25T00:52:00.617

Or use **rescan**

from pg 41 of [Oracle Solaris 11.1 Linkers and Libraries Guide](https://docs.oracle.com/cd/E26502_01/pdf/E26507.pdf):

> Interdependencies between archives can exist, such that the extraction of members from one archive must be resolved by extracting members from another archive. If these dependencies are cyclic, the archives must be specified repeatedly on the command line to satisfy previous references.

```
$ cc -o prog .... -lA -lB -lC -lA -lB -lC -lA 
```

> The determination, and maintenance, of repeated archive specifications can be tedious.
> 
> The -z rescan-now option makes this process simpler. The -z rescan-now option is processed by the link-editor immediately when the option is encountered on the command line. All archives that have been processed from the command line prior to this option are immediately reprocessed. This processing attempts to locate additional archive members that resolve symbol references. This archive rescanning continues until a pass over the archive list occurs in which no new members are extracted. The previous example can be simplified as follows.

```
$ cc -o prog .... -lA -lB -lC -z rescan-now 
```

> Alternatively, the -z rescan-start and -z rescan-end options can be used to group mutually dependent archives together into an archive group. These groups are reprocessed by the link-editor immediately when the closing delimiter is encountered on the command line. Archives found within the group are reprocessed in an attempt to locate additional archive members that resolve symbol references. This archive rescanning continues until a pass over the archive group occurs in which no new members are extracted. Using archive groups, the previous example can be written as follows.

```
$ cc -o prog .... -z rescan-start -lA -lB -lC -z rescan-end 
```