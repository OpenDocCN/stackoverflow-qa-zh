# StackOverflow 问答 10053000-10053999

# sql-server - 使用 SQL Server 加载事实表

> ID：10053002
> 
> 赞同：1
> 
> 时间：2012-04-07T08:31:54.150
> 
> 标签：sql-server, data-warehouse, fact-table

我正在使用 SQL Server 2008 和 Analysis Services 创建一个仓库。我已经设法创建和填充维度表，但是我在编写用于加载事实表的 SQL 时遇到了很多麻烦。一方面，我不确定如何使用维度表中的 PK 加载事实表的键。我尝试编写一个包含一系列 JOIN 的查询来获取我想要的键和度量，但是语句变得如此复杂以至于我迷路了。

这是我必须使用的星型模式：

[http://i.imgur.com/C3DGj.png](http://i.imgur.com/C3DGj.png)

我究竟做错了什么？我有一种感觉，我错过了一些非常基本的东西，但我对此还很陌生，而且我在网上找到的大部分信息似乎都是使用我没有安装的 SSIS 来处理的。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T02:09:07.620

今天的数据仓库开发人员使用 SSIS 加载维度模型。通常，查找用于将维度属性转换为键。大多数情况下，数据将位于另一台服务器或平面文件或其他迫使您使用 ETL 工具（如 SSIS）的东西上，但在您的情况下，您可以在没有的情况下完成它。如果您的企业对 BI 很认真，您应该努力安装并学习 SSIS。

对于您的情况，假设您有一个在本地加载了原始事实的表，您应该能够执行插入/选择。

基本上，您需要将每个维度内部连接（因为填充维度表没有问题）到原始事实表。就像是：

```
INSERT trainingcentrefact
(timekey,locationkey,instructorkey,coursekey,paid,notpaid,... etc)
SELECT
   t.timekey
  ,l.locationkey
  ,i.instructorkey
  ,c.coursekey
  ,rf.paid
  ,rf.notpaid
  ,... etc
FROM rawfacts rf
INNER JOIN timedimension t ON rf.time = t.time
INNER JOIN locationdimension l on rf.location = l.location
INNER JOIN instructordimension i on rf.instructor = i.instructor
INNER JOIN coursedimension c on rf.course = c.course
```

# sql - 在 microsoft access 中授予更改密码权限

> ID：10053017
> 
> 赞同：2
> 
> 时间：2012-04-07T08:34:06.793
> 
> 标签：sql, ms-access, privileges, grant

我有一个内置在 Microsoft Access 中的数据库，并且有两个用户：

*   数据库管理员
*   用户

DBAdmin 是管理员，拥有所有权限。用户只能修改所有表中的条目并更改他/她的密码。

我如何能够授予使用 SQL 更改他/她的密码的权限？我在互联网上查看，我发现了有关系统权限的信息，但没有任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:04:42.853

您不需要这样做，[因为用户可以在 Jet 安全模型中更改自己的密码](http://msdn.microsoft.com/en-us/library/aa139977%28office.10%29.aspx)。

# web - 传送门：我真的需要传送门吗

> ID：10053018
> 
> 赞同：3
> 
> 时间：2012-04-07T08:34:13.540
> 
> 标签：web, portal

我真的需要传送门吗？？

总是有一个问题出现在我的脑海中，为什么人们要进行门户开发，他们不能使用普通的 Web 应用程序来管理，用不同的部分来管理 UI 页面？如果我的问题无效，我很抱歉。

或者在什么情况下我们实际上需要一个门户网站？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T08:41:42.270

如果您的用户仅使用您的应用程序，则可以管理具有不同部分的 UI 页面。但是，门户允许您的用户使用多个应用程序（其中许多不是您创建的）并将其内容“聚合”在一个页面上；至少有一个地方可以在一页上轻松访问它们。这里的重点是多种应用；这些是您作为开发人员可能无法控制的应用程序；它们可能是由第三方（例如 Google 或任何其他开发人员）编写的。

门户页面上的项目不一定来自您正在开发的问题域。用户没有理由不能将当地天气放在他检查公司库存的同一页面上。

门户提供单一入口点；这是关键点。门户还提供了一些其他细节，例如托管登录。如果您正在为客户创建一个应用程序，并且您不需要门户，那么门户可能是矫枉过正（如果您不得不问的话，可能是这样）。

# php - 使用 CodeIgniter 模型进行 OOP 抽象

> ID：10053027
> 
> 赞同：0
> 
> 时间：2012-04-07T08:35:22.850
> 
> 标签：php, codeigniter

我正在编写一个库搜索引擎，用户可以使用 CodeIgniter 根据各种标准（例如作者、标题、出版商等）进行搜索。所以，我定义了`BookSearch`所有负责搜索数据库的类都将实现的接口

```
interface BookSearch{
/**
Returns all the books based on a given criteria as a query result.
*/
public function search($search_query);
} 
```

如果我想实现基于作者的搜索，我可以将他的类写`AuthorSearch`为

```
class AuthorSearch implements BookSearch extends CI_Model{

function __construct(){
    parent::__construct();
}

public function search($authorname){
    //Implement search function here...
    //Return query result which we can display via foreach
}
} 
```

现在，我定义了一个控制器来使用这些类并显示我的结果，

```
class Search extends CI_Controller{

/**
These constants will contain the class names of the models
which will carry out the search. Pass as $search_method.
*/
const AUTHOR = "AuthorSearch";
const TITLE = "TitleSearch";
const PUBLISHER = "PublisherSearch";

public function display($search_method, $search_query){
    $this->load->model($search_method);
}
} 
```

这就是我遇到问题的地方。CodeIgniter 手册说，要调用模型中的方法（即`search`），我编写`$this->AuthorSearch->search($search_query)`. 但是由于我将搜索类的类名作为字符串，我真的不能做`$this->$search_method->search($search_query)`对吗？

如果这是在 Java 中，我会将对象加载到我的常量中。我知道 PHP5 有类型提示，但这个项目的目标平台有 PHP4。而且，我正在寻找一种更“CodeIgniter”的方式来进行这种抽象。有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T10:01:59.197

你真的可以做到`$this->$search_method->search($search_query)`。同样在 CI 中，您可以根据需要分配库名称。

```
public function display($search_method, $search_query){
    $this->load->model($search_method, 'currentSearchModel');
    $this->currentSearchModel->search($search_query);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T20:06:52.780

你在说什么驱动模型。事实上，你可以做你建议不能做的事情：

```
<?php
$this->{$search_method}->search($search_query); 
```

CodeIgniter 有`CI_Driver_Library`&`CI_Driver`类来执行此操作（请参阅[CodeIgniter 驱动程序](http://codeigniter.com/user_guide/general/drivers.html)）。

但是，我发现实现接口/扩展抽象类通常更简单，就像您正在做的那样。继承比 CI 的驱动更好。

# android - 我的 if 语句不起作用

> ID：10053033
> 
> 赞同：1
> 
> 时间：2012-04-07T08:36:09.150
> 
> 标签：android, service, if-statement

我正在编写一个服务应用程序`Android`。在这个应用程序中，我使用`onStartCommand`事件从主活动接收命令。该`IF`块正在检查一个变量。正如您在图片中看到的（调试模式），该值为“start”，但该`IF`语句不起作用并将重定向到`Else`. 为什么？

![在此处输入图像描述](../Images/ce66ed6780bdc603f256f95cfb3cf485.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T08:38:17.270

尝试`.equals`会帮助你...

`String is not Primary Data type in java`

始终使用`.equals() when you have Object`和`String is Object`

`==`仅用于`primitive data type`和`==`在对象中比较您的字符串引用...不是值...

```
if(ReceivedCommandFromUser.equals("start"))
    {

      } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T08:40:25.943

在 Java 中使用字符串时，请使用 .equals() 方法。

例如...

```
if(RecievedCommandFromUser.equals("start"){} 
```

应该管用。

# java - 如何获取特定时间间隔的位置

> ID：10053035
> 
> 赞同：0
> 
> 时间：2012-04-07T08:36:26.320
> 
> 标签：java, android

我正在android中做我的项目..

单击按钮时，我想获取特定时间间隔（固定时间）的位置

例如：每 10 分钟 4 小时我想获取当前位置地址。

如何得到这个？有没有像visual basic这样的定时器控制？或任何其他方法。提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T08:41:50.277

您可以使用`LocationListener`which 在您的位置发生变化时被调用，此外您还可以提供时间间隔

```
public void requestLocationUpdates (String provider, long minTime, float minDistance, LocationListener listener, Looper looper) 
```

参考[http://www.firstdroid.com/2010/04/29/android-development-using-gps-to-get-current-location-2/](http://www.firstdroid.com/2010/04/29/android-development-using-gps-to-get-current-location-2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T08:42:29.637

```
LocationManager mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

LocationListener mlocListener = new MyLocationListener(context);

mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1, 1,mlocL istener); 
```

//**语法：** mlocManager.requestLocationUpdates(provider, minTime, minDistance, listener)

您可以在此方法中设置时间和距离，请参阅语法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T08:45:51.080

您可以看到此链接[在特定时间间隔后获取当前设备位置](https://stackoverflow.com/questions/8352420/get-current-device-location-after-specific-interval)有一个如何在特定时间段获取位置信息的工作示例

# actionscript-3 - 自定义类中的 AS3 事件侦听器

> ID：10053036
> 
> 赞同：1
> 
> 时间：2012-04-07T08:36:30.230
> 
> 标签：actionscript-3, flash, flash-builder

我是 AS3 的新手。

对于图形表示，我使用 fla 文件作为资源。我在 Flash Builder 4.6 中工作以编写代码。

我尝试创建自己的包含点击事件的类面板。但是当我测试移动时，事件不起作用！

当我将事件处理程序（buttonClick）和事件侦听器移动到主类（测试）并将事件应用于卡对象（例如）时，一切正常。

我的代码有什么问题？

我的主要应用类：

```
package
{
import flash.display.Sprite;
import flash.events.*;
import flash.ui.Keyboard;

import ui.Panel;

public class test extends Sprite
{
    var card:Panel;

    public function test()
    {
        card = new Panel();
        addChild(card);
    }

}
} 
```

面板类：

```
package ui
{
import flash.display.MovieClip;
import flash.events.*;

public class Panel extends MovieClip
{

    var back:PanelBack;
    var button:PanelButton;

    public function Panel()
    {
        super();
        back = new PanelBack();
        button = new PanelButton();
        addChild(back);
        addChild(button);

        button.addEventListener(MouseEvent.CLICK,buttonClick);
    }

    private function buttonClick(event:MouseEvent):void
    {
        trace("Hello");
    }

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T05:11:21.647

![在此处输入图像描述](../Images/7dafeb4fa6e94e48139be91755a2fb3a.png)

确保在符号属性中，您的设置配置如上所示。在“类”部分中，您必须显式定义类（在外部 .as 文件中定义）以将符号链接到文件中的类。还要确保在您的项目目录（您的 FLA 所在的位置）中有一个名为“ui”的文件夹，其中包含一个“Panel.as”文件，其中定义了面板类。

# c# - C# - SELECT 查询受影响的行数始终为 -1

> ID：10053037
> 
> 赞同：2
> 
> 时间：2012-04-07T08:36:32.933
> 
> 标签：c#, sql-server

我有这段代码，它总是返回-1。我有三个表（一张图片更具暗示性）： ![在此处输入图像描述](../Images/5161f0dbbcd2028d4966275f075c4625.png)

我想看看该行是否已经在 ReservationDetails 表中，如果不是要插入它。

```
try
        {
            SqlConnection conn = new SqlConnection... 
            SqlCommand slct = new SqlCommand("SELECT * FROM ReservationDetails WHERE rID=@rID AND RNumber=@RNumber", conn);
            slct.Parameters.AddWithValue("@rID", (int)comboBox1.SelectedValue);
            slct.Parameters.AddWithValue("@RNumber", dataGridView1.SelectedRows[0].Cells[0].Value);

            int noRows;//counts if we already have the entry in the table
            conn.Open();
            noRows = slct.ExecuteNonQuery();
            conn.Close();
            MessageBox.Show("The result of select="+noRows);

            if (noRows ==0)    //we can insert the new row 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T08:42:14.063

你应该

1）将您的 TSQL 更改为

```
 SELECT COUNT(*) FROM ReservationDetails WHERE ... 
```

（更好的是，使用`IF EXISTS`...）

2）并使用[`ExecuteScalar()`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)：

```
noRows = (int) slct.ExecuteScalar(); 
```

另外：您将需要使用事务（或其他一些原子技术），否则有人可能会在您测试和尝试插入它之间插入一行......

综上所述，最好创建一个存储过程，给定您的参数，自动测试并插入表中，`1`如果成功则返回，或者`0`如果该行已经存在。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-07T08:42:32.540

您是否阅读过 的文档`SqlCommand.ExecuteNonQuery`？

> 对于 UPDATE、INSERT 和 DELETE 语句，返回值是受命令影响的行数。当正在插入或更新的表上存在触发器时，返回值包括受插入或更新操作影响的行数以及受一个或多个触发器影响的行数。**对于所有其他类型的语句，返回值为 -1。**如果发生回滚，则返回值也是 -1。

你的查询是SELECT。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T08:47:35.920

最好在单个查询中执行此操作，这样您就不需要两次请求服务器。

创建一个这样的过程并从代码中调用它。

```
IF EXISTS (SELECT 1 from ReservationDetails WHERE rID=@rID AND RNumber=@RNumber)
BEGIN
 insert into ReservationDetails values(@rID,@RNumber)
END 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-07T08:48:45.237

根据微软：

`You can use the ExecuteNonQuery to perform catalog operations (for example, querying the structure of a database or creating database objects such as tables), or to change the data in a database without using a DataSet by executing UPDATE, INSERT, or DELETE statements.`

您可能需要的是 ExecuteScalar 而不是 ExecuteNonQuery 并将 COUNT 放入您的选择查询中。

IE

```
SqlCommand slct = new SqlCommand("SELECT COUNT(*) FROM ReservationDetails WHERE   rID=@rID AND RNumber=@RNumber", conn); 
```

另外，尽量使用 C# 中的 using 语句，这样即使失败，您也不必担心手动关闭连接。

IE

```
using (SqlConnection conn = new SqlConnection(connString))
{
    SqlCommand cmd = new SqlCommand(sql, conn);
    try
    {
        conn.Open();
        newProdID = (Int32)cmd.ExecuteScalar();
    }
    catch (Exception ex)
    {
        //Do stuff
    }
} 
```

请参阅：http: [//msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-07T08:54:52.333

@尼克纳特拉

当你使用

> 选择命令

它将返回您的值。哪个可以被使用

> 数据集或 SqlDataReader

但

> command.ExecuteNonQuery()

仅在您使用时使用

> Insert ， Update ， Delete**行在表中生效的位置**

是的，如果您确实想知道查询中有多少记录。你可以执行

> *a）修改您的查询“从表中*选择计数（*）”

你只会得到一个值，即。行数。

> b) 使用此查询执行命令。ExecuteScalar() 将仅返回**第一行和第一列**，即**行数**

因此，这满足了您的要求。

干杯！！

# javascript - 在响应式布局中，如何让 div 均匀收缩？

> ID：10053044
> 
> 赞同：0
> 
> 时间：2012-04-07T08:39:17.340
> 
> 标签：javascript, jquery, css

[http://www.designobvio.us/GoldGrid2/](http://www.designobvio.us/GoldGrid2/)

这是一个示例页面。屏幕中间会有内容框。当调整浏览器窗口的大小时，您可以看到内容框从“仅右侧！”水平缩放。

1.  如何让我的内容框从左右均匀缩放？

2.  当浏览器窗口垂直缩放时，如何使框垂直缩放？

如果您使用谷歌浏览器，一个空白的新标签具有我正在寻找的效果[http://vvcap.net/db/4cqAV8lk02EkhsSerduF.htp](http://vvcap.net/db/4cqAV8lk02EkhsSerduF.htp)

我的代码超级干净。HTML：

```
<div id="container">
    <div class="inner-box">
        <!-- start of padder"-->
        <ul id='carousel_ul'>
            <li class="padder">
               <article class="web">
                <h2>01.03.12</h2>
                  <section>
                    <h1>Skollklubben.se</h1>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque facilisis elementum tellus, eget ullamcorper magna tristique ac. <a href=""><span>details</span></a> </p>
                  </section>
              </article>
            </li>
       </ul>
   </div>
</div> 
```

请从源代码浏览css。（发布太多了）我还能提供什么来帮助获得答案吗？我愿意做我只是不知道从哪里开始的工作/研究。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T10:05:06.917

这是一个使用 jQuery 的示例，这不是缩放正在调整大小的内容（如您的示例），除非具有相同的纵横比：

```
// The margin between the objects and the viewport when resized.
var objectMargin = 50;
// The minimum size our objects will shrink to (percentage).
var minSize = 50;
// Define our objects and get their dimensions and position on the page.
var objects = $('article.web');
var objectOffset = objects.filter(':first').offset();
var objectSize = {
   height: objects.filter(':first').height(),
   width: objects.filter(':first').width()
};
objectSize.ratio = objectSize.width / objectSize.height;

// This is our function which resizes the content
var scale = function() {
   var windowHeight = $(window).height();
   var objectHeight = objects.filter(':first').height();
   // Calculate objects new height
   var newHeight = windowHeight - objectOffset.top - objectMargin;
   // Check whether object needs to shrink or grow.
   if (newHeight < objectHeight) {
      // Change objects dimensons if it isn't below minimum height
      var minHeight = (minSize / 100 ) * objectSize.height
      if (newHeight < minHeight) {
         objects.each(function(){
            $(this).height(minHeight);
            $(this).width(minHeight * objectSize.ratio);
         });
      } else {
         objects.each(function(){
            $(this).height(newHeight);
            $(this).width(newHeight * objectSize.ratio);
         });   
      }
   } else {
      // Change objects dimensions if it isn't above maximum height
      if (newHeight > objectSize.height) {
         objects.each(function(){
            $(this).height(objectSize.height);
            $(this).width(objectSize.width);
         });
      } else {
         objects.each(function(){
            $(this).height(newHeight);
            $(this).width(newHeight * objectSize.ratio);
         });
      }
   }
}

// Bind the scale function to the browser resize event
$(window).resize(function() {
   scale();
});

// Call the scale function to make sure the screen isn't small already.
scale(); 
```

这并没有考虑到如果用户首先水平调整大小会发生什么，但是它应该为您提供从这里到哪里的好主意。

# c# - 使用 ksoap 协议不匹配的 Soap Web 服务和 android 客户端

> ID：10053046
> 
> 赞同：2
> 
> 时间：2012-04-07T08:39:23.163
> 
> 标签：c#, asp.net, web-services, soap, android-ksoap2

我有一个 android 客户端，它使用 ksoap 与用 c#asp.net 编写的 wsdl Web 服务进行通信。我在匹配 Web 服务和客户端之间的参数类型时遇到问题。Web 服务器期望这种请求（自动生成）：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <GetDetails xmlns="http://host.org/">
      <event_id>int</event_id>
    </GetDetails>
  </soap:Body>
</soap:Envelope> 
```

客户端使用 ksoap 发送请求，它们看起来像这样：

```
<v:Envelope xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns:d="http://www.w3.org/2001/XMLSchema" xmlns:c="http://schemas.xmlsoap.org/soap/encoding/" xmlns:v="http://schemas.xmlsoap.org/soap/envelope/">
   <v:Header />
       <v:Body>
           <n0:GetDetails id="o0" c:root="1" xmlns:n0="http://tempuri.org">
              <event_id i:type="d:int">1</event_id>
           </n0:GetDetails>
       </v:Body>
</v:Envelope> 
```

由于某种原因，当手动组装请求以看起来像第一个选项时，WS 将以下客户端的请求解析为 0（我猜是因为附加的类型属性 - i:type="d:int"），它可以正常工作。如何使 Web 服务正确读取 ksoap 格式，或者如何将其预期格式更改为类似于 ksoap 请求。（网络服务soap协议是自动生成的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T16:44:48.547

那么解决方案有两个部分：1.关于删除属性类型，我在这里找到了答案： [使用 addMapping without the "i:type=" attribute in ksoap2 for android](https://stackoverflow.com/questions/5410006/using-addmapping-without-the-itype-attribute-in-ksoap2-for-android) 我需要设置：

```
envelope.implicitTypes = true; 
```

2.  名称空间必须以退格结尾，我错过了。

# php - 从头开始制作 CMS 是否值得？

> ID：10053048
> 
> 赞同：4
> 
> 时间：2012-04-07T08:40:11.960
> 
> 标签：php, security, content-management-system

我从头开始编写自己的 Php 内容管理系统的代码大约已经完成了一半，但现在我即将完成编写新功能并使其看起来不错的代码，现在正面临着安全性的大问题。我对 Php 的安全方面知之甚少，除了它很容易受到 SQL 注入等攻击。假设我的网站将有大量用户生成的内容，就像 facebook，一个人可以自己保护的东西还是我最好付钱请人为我做这件事？如果是这样，有人知道那要花多少钱吗？

任何反馈将不胜感激。

[更新：对http://www.incapsula.com](http://www.incapsula.com)有任何意见吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-07T09:08:35.943

优点：

*   构建自己的 CMS 很有趣。
*   你会学到很多东西。这可能是学习 PHP 的最佳方式，因为您将不得不处理它的许多不同方面。

缺点：

*   您的第一个 CMS 将始终具有“有趣”的设计。
*   你会有错误和安全漏洞（但大多数时候，人们不会注意到安全漏洞）。;)
*   与使用现有 CMS 构建网站所需的时间相比，您将不得不在 CMS 上花费（更多）时间。

结论：

*   当然，您应该建立自己的 CMS！如果您从未构建过自己的 CMS，那么您就不是真正的 PHP 程序员。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-07T08:52:01.610

有这么多成熟的 PHP CMS 系统可用，我能想到自己编写一个的唯一原因是作为练习（学习一些东西）、作为挑战（看看你是否可以），或者如果你需要一些特定的现有的没有的功能。即使您确实想要一个特殊功能，我仍然会考虑扩展现有的 CMS，而不是从头开始编写一个 - 其中许多都适合模块和/或插件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-07T08:52:38.490

> 这值得么？

完全取决于你。我想说这取决于您对这个 CMS 的目标是什么（产生收入，只是为了好玩等）能够向某人展示并说“我从无到有！”真是太好了！

唯一的启动成本是您的域名和每月的网络托管（除非您雇用人员）。godaddy 域每年 1.18 美元，hostmonster 托管每年 8 美元。

安全是一个大问题，是的，但也许这不应该是做你想做或不做的决​​定点。有很多关于 stackoverflow 的文档和其他关于可以帮助您的主题的文档。

我最近从头开始创建了一个 CMS，除了基本的 HTML 之外没有任何先验知识。它在很多方面都是有益的，你甚至可能会发现自己走上了编程职业道路。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-07T08:54:48.223

我认为最好学习如何保护您的系统。考虑到您能够从头开始编写系统代码，保护 php 系统实际上并不是什么大问题。

请记住，为了防止 sql 注入：总是逃避输入到数据库的用户输入，`mysql_real_escape_string()`通常可以完成这项工作。并`htmlentities()`在 html 页面中显示内容之前使用。

阅读有关保护您的 PHP 的内容，您将省去花钱请人来做这件事的麻烦，而且它还会对其他项目有所帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-07T09:13:02.163

不相信任何人——尤其是匿名的人！因此，向您的市长资产注入一些安全数据。似乎相当明智的策略

为什么要制作自己的 CMS？Drupua，wordexpress。乔马拉可能会做一些调整？！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-07T08:46:38.700

是的，从头开始制作 CMS 是值得的。因为您拥有/仅拥有您只需要的功能。这使得脚本不那么广泛，并且**像 Armani 套装一样**适合您的需求。让我们以 Wordpress 为例，当您的网站变得非常大时，您需要对其进行非常大的调整。它有很多功能，**其中一些您可能不需要**。如果使用已经可用的，专业人士是*社区为您找到脚本的错误/漏洞，*您需要做的只是更新脚本。

至于安全部分，您​​可以尝试自己寻找漏洞或聘请价格可能有所不同的人。但是您可能不想将您的脚本委托给其他人，除非他们值得信赖。

# postgresql - Postgres 9.0 和 pgpool 复制：单点故障？

> ID：10053049
> 
> 赞同：9
> 
> 时间：2012-04-07T08:40:19.743
> 
> 标签：postgresql, failover, pgpool

我的应用程序使用 Postgresql 9.0，由一个或多个与全局数据库交互的站组成：它就像一个普通的客户端服务器应用程序，但为了避免任何额外的硬件，所有站都包括客户端和服务器：一个主站被提升为行动也作为服务器，任何其他行为作为它的客户端。该解决方案使我具有可扩展性：用户最初可能需要一个站点，但它可以决定将来扩展到更多站点，而在初始阶段没有无用的单独服务器。

如果主站出现故障，我会尽量避免所有其他人停止工作；要做到这一点，最好的解决方案可能是将主数据库连续复制到一个或多个站点上未使用的数据库。

搜索我发现 pgpool 可用于满足我的需要，但从所有示例和教程看来，**故障点似乎从主数据库移动到运行 pgpool 的服务器**。

我读了一些关于多个 pgpool 和心跳工具的东西，但不清楚如何去做。

考虑到我的架构，哪里不存在分离和专门的服务器，有人可以给我一些提示吗？如果发生故障转移，似乎 pgpool 会自动执行所有操作，我是否可以认为故障转移情况可以由标准用户处理而无需管理员干预？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-07T20:28:30.390

对于这类应用程序，我真的很喜欢[Amazon 的 Dynamo](http://www.allthingsdistributed.com/2007/10/amazons_dynamo.html)设计。链接的文档很大，但值得一读。事实上，有些应用程序已经实现了这种方法：

*   [MongoDB数据库](http://www.mongodb.org/)
*   [卡桑德拉](http://cassandra.apache.org/)
*   [伏地魔计划](http://project-voldemort.com/)

也许其他人，但我不知道。Cassandra 从 Facebook 开始，Voldemort 是 LinkedIn 使用的。使事物分布式并在数据分布中添加冗余，您将远离传统的主从复制方法。

如果您想继续使用 PostgreSQL，那么实施这种方法应该没什么大不了的。您将需要实现一个额外的层（代理），它将根据预先配置的选项决定如何检索/保存数据。

代理层可以实现在：

*   应用程序（需要大量的工作恕我直言）；
*   数据库;
*   作为中间件。

您可以在中间件层使用[PL/Proxy](http://wiki.postgresql.org/wiki/PL/Proxy)，该项目起源于 Skype。它已深度集成到 PostgreSQL 中，所以我会说它是选项 2 和 3 的组合。PL/Proxy 将要求您使用函数对数据库进行各种查询。如果您遇到性能问题，可以使用[PgBouncer 。](http://wiki.postgresql.org/wiki/PgBouncer)

最后一点：无论您决定采用哪种方式，都需要进行已知数量的开发。

**编辑：**

这完全取决于您所说的“故障”以及您认为系统处于中断状态的原因。

让我们看看[pgpool](http://www.pgpool.net/mediawiki/index.php/Main_Page)的特性。

1.  **连接池**PostgreSQL 每个会话使用一个进程（fork）。显然，如果您有一个非常繁忙的站点，您将达到操作系统限制。为了克服这个问题，使用了连接池。它们还允许您均匀地使用资源，因此通常最好在数据库*之前*使用 pooler 。
    如果 pgpool 中断，您将面临大量无法访问您的数据库的客户端。如果您将它们直接指向数据库，避免使用 pooler，您将面临性能问题。

2.  **复制**您的所有查询都将自动复制到从属实例。这对 DML 和 DDL 查询有意义。
    如果 pgpool 中断，您的复制将停止并且从属服务器将无法赶上主服务器，因为在 pgpool 之外没有进行任何更改跟踪（据我所知）。

3.  **负载平衡**您的只读查询将分布在多个实例中，从而实现良好的响应时间，从而使您可以在系统上增加更多带宽。
    在 pgpool 中断的情况下，如果系统能够处理这样的负载，您的查询将突然运行得更慢。这是在 master 数据库将追赶而不是失败的 pgpool 的情况下。

4.  **限制超出的连接**pgpool 会将连接排队，以防它们无法立即处理。
    在 pgpool 中断的情况下，所有此类连接都将被中止，这可能会破坏 DB/应用程序协议，即应用程序被设计为永远不会中止连接。

5.  **并行查询**在多个节点上执行单个查询以减少响应时间。
    在 pgpool 中断的情况下，将无法进行此类查询，从而导致处理时间更长。

如果你可以面对这样的情况并且你不认为它们是失败的，那么 pgpool 可以很好地为你服务。如果 5 分钟的中断将使您的公司损失数千美元，那么您应该寻求更可靠的解决方案。

中断的成本越高，故障转移系统的调整就应该越精细。通常，它不仅仅是用于实现故障转移自动化的单一工具。在每次失败中，您都必须进行调整：

*   DNS，除非您想要所有客户端的重新配置；
*   重新初始化备份和故障转移程序；
*   确保老主人不会试图为它的角色而战，以防万一它回来（[STONITH](http://en.wikipedia.org/wiki/STONITH)）；
*   根据我的经验，我们是来自 DBA、系统管理员、架构师和运营部门的人，他们决定适当的策略。

最后，在我看来，pgpool 是一个很好的工具，我确实使用它。但它并非设计为一个完整的故障转移解决方案，并非没有额外的思考、采取的措施、编写的脚本。因此，我提供了分布式数据库的链接，它们提供了更高级别的可用性。

并且由于它的可扩展性，PostgreSQL 可以很容易地分发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T00:37:18.540

首先，我建议查看[pgBouncer](http://pgfoundry.org/projects/pgbouncer/)而不是 pgpool。接下来，您试图达到什么级别的扩展？您可能只是选择在所有客户端系统上运行连接池（bouncer 足够轻，可以正常工作）。

也就是说，vyegorov 的答案可能是您在当今时代真正应该关注的方向。你确定你真的*需要*一个数据库吗？

编辑

因此，相当明显的答案是，如果您只有一个机器运行 pgPool，它会产生单点故障。显而易见的解决方案是跨多个盒子运行多个池化程序。然后，您需要设计您的应用程序代码来处理数据库断开连接。这听起来并不容易，但基本上您需要使用两阶段提交来进行非幂等更改。因此，您应该尽最大可能使您的更改具有幂等性。

根据您的评论，我猜您可能在处理数据库复制方面的经验有限？pgPool 执行基于语句的复制。这里有权衡。好处是它很容易设置。缺点是不能保证复制数据库上的数据是相同的。它也（我相信但最近没有检查过）与 2pc 不兼容。

我之前的评论询问您是否真的*需要*一个数据库，这是因为我认为您已经设计了一个系统，但没有详细介绍这部分的这一部分。我在处理类似系统的“这部分”方面拥有大约 2 年的经验。我希望您会发现没有开箱即用的解决方案，并且所涉及的问题变得非常复杂。换句话说，我建议你重新考虑你的设计。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-16T11:36:52.057

尝试阅读这个博客（包含大量关于 PostgreSQL 和 PgPool-II 的信息）：

[https://www.itenlight.com/blog/2016/05/21/PostgreSQL+HA+with+pgpool-II+-+Part+5](https://www.itenlight.com/blog/2016/05/21/PostgreSQL+HA+with+pgpool-II+-+Part+5)

在同一个博客上搜索“看门狗”。使用它，您可以配置 PgPool-II 集群。但是，需要同一子网上的两台机器，并且需要同一子网上的虚拟 IP。

希望这对任何尝试相同事情的人有用（即使这个答案已经很晚了）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-01T04:11:08.440

PGPool 肯定会成为单点故障，但它比 Postgres 实例小得多。

虽然我还没有尝试过，但应该可以有两台安装了 PGPool 的机器，但只能在一台机器上运行。然后，如果主服务器不可用，您可以使用 Linux-HA 在备用主机上重新启动 PGPool，并在主服务器恢复时可选择再次将其故障恢复。您还可以同时使用 Linux-HA 移动单个虚拟 IP，以便您的客户端可以连接到单个 IP 以获取其 Postgres 服务。

postgres 服务器的死亡将使 PGPool 向备份 Postgres 发送查询（必要时将其提升为 master）。

PGPool 服务器的死机将导致短暂的中断（可配置，但可能在 <1 分钟的范围内），直到 PGPool 在备用服务器上启动、声明 IP 地址并发送无偿 ARP。当然，客户端必须足够聪明才能重新连接而不会死亡。

# performance - 为什么 Solr 比 Postgres 快这么多？

> ID：10053050
> 
> 赞同：68
> 
> 时间：2012-04-07T08:40:25.693
> 
> 标签：performance, postgresql, solr, lucene, rdbms

我最近从 Postgres 切换到 Solr，发现我们的查询速度提高了约 50 倍。我们运行的查询涉及多个范围，我们的数据是车辆列表。例如：“查找所有里程 < 50,000, $5,000 < price < $10,000, make=Mazda... 的车辆

我在 Postgres 的所有相关列上创建了索引，所以这应该是一个相当公平的比较。查看 Postgres 中的查询计划，尽管它仍然只使用单个索引然后扫描（我假设是因为它无法使用所有不同的索引）。

据我了解，Postgres 和 Solr 使用模糊相似的数据结构（B 树），它们都将数据缓存在内存中。所以我想知道这么大的性能差异来自哪里。

架构上的哪些差异可以解释这一点？

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2012-04-07T11:31:43.813

首先，Solr 不使用 B 树。Lucene（Solr 使用的底层库）索引由只读[段组成](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/fileformats.html)。对于每个段，Lucene 维护一个术语字典，它由出现在该段中的术语列表组成，按字典顺序排序。在这个术语字典中查找一个术语是使用二分搜索进行的，因此单项查找的成本是`O(log(t))`其中 t 是术语的数量。相反，使用标准 RDBMS 的索引成本`O(log(d))`，其中 d 是文档数。当许多文档对某个字段共享相同的值时，这可能是一个巨大的胜利。

此外，Lucene 提交者 Uwe Schindler几年前增加了对高性能[数值范围查询的支持。](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/all/org/apache/lucene/search/NumericRangeQuery.html)对于[数字字段](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/all/org/apache/lucene/document/NumericField.html)的每个值，Lucene 会存储几个具有不同精度的值。这允许 Lucene 非常有效地运行范围查询。由于您的用例似乎大量利用数字范围查询，这可以解释为什么 Solr 如此之快。（有关更多信息，请阅读非常有趣的 javadocs 并提供相关研究论文的链接。）

但是 Solr 只能做到这一点，因为它没有 RDBMS 所具有的所有约束。例如，Solr 在一次更新单个文档方面非常糟糕（它更喜欢批量更新）。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-04-07T14:55:47.990

您并没有真正说明您为调整 PostgreSQL 实例或查询所做的工作。通过调整和/或以更优化的格式重述查询，可以看到 PostgreSQL 查询的 50 倍加速并不罕见。

就在本周，有人使用 Java 和多个查询编写了一份工作报告，根据它在四个小时内所取得的进展，大约需要一个月才能完成。（它需要访问五个不同的表，每个表都有数亿行。）我使用几个 CTE 和一个窗口函数重写了它，使它在不到十分钟的时间内运行并直接从查询中生成所需的结果。那是 4400 倍的加速。

也许对您的问题的最佳答案与如何在每种产品中*执行*搜索的技术细节无关，而更多地与您的特定用例的*易用性有关。*显然，您能够找到使用 Solr 进行搜索的快速方法，而且比 PostgreSQL 更轻松，而且它可能不会归结为更多。

我将包含一个简短的示例，说明如何在 PostgreSQL 中完成对多个条件的文本搜索，以及一些小的调整如何产生很大的性能差异。为了保持快速和简单，我只是将文本形式的*战争与和平*运行到一个测试数据库中，每个“文档”都是一个文本行。如果必须松散地定义数据，则可以对使用`hstore`类型或列的任意字段使用类似的技术。`JSON`在具有自己索引的单独列的情况下，使用索引的好处往往要大得多。

```
-- Create the table.
-- In reality, I would probably make tsv NOT NULL,
-- but I'm keeping the example simple...
CREATE TABLE war_and_peace
  (
    lineno serial PRIMARY KEY,
    linetext text NOT NULL,
    tsv tsvector
  );

-- Load from downloaded data into database.
COPY war_and_peace (linetext)
  FROM '/home/kgrittn/Downloads/war-and-peace.txt';

-- "Digest" data to lexemes.
UPDATE war_and_peace
  SET tsv = to_tsvector('english', linetext);

-- Index the lexemes using GiST.
-- To use GIN just replace "gist" below with "gin".
CREATE INDEX war_and_peace_tsv
  ON war_and_peace
  USING gist (tsv);

-- Make sure the database has statistics.
VACUUM ANALYZE war_and_peace; 
```

设置好索引后，我会展示一些搜索，其中包含两种类型的索引的行数和时间：

```
-- Find lines with "gentlemen".
EXPLAIN ANALYZE
SELECT * FROM war_and_peace
  WHERE tsv @@ to_tsquery('english', 'gentlemen'); 
```

84 行，要点：2.006 毫秒，杜松子酒：0.194 毫秒

```
-- Find lines with "ladies".
EXPLAIN ANALYZE
SELECT * FROM war_and_peace
  WHERE tsv @@ to_tsquery('english', 'ladies'); 
```

184 行，要点：3.549 毫秒，杜松子酒：0.328 毫秒

```
-- Find lines with "ladies" and "gentlemen".
EXPLAIN ANALYZE
SELECT * FROM war_and_peace
  WHERE tsv @@ to_tsquery('english', 'ladies & gentlemen'); 
```

1 行，要点：0.971 毫秒，杜松子酒：0.104 毫秒

现在，由于 GIN 索引比 GiST 索引快大约 10 倍，您可能想知道为什么有人会使用 GiST 来索引文本数据。答案是 GiST 通常维护起来更快。因此，如果您的文本数据高度不稳定，则 GiST 索引可能会在整体负载上胜出，而如果您只对搜索时间或以读取为主的工作负载感兴趣，则 GIN 索引会胜出。

如果没有索引，上述查询需要 17.943 毫秒到 23.397 毫秒，因为它们必须扫描整个表并检查每一行是否匹配。

GIN 索引搜索同时包含“女士”和“绅士”的行比在完全相同的数据库中进行表扫描快 172 倍以上。显然，索引的好处对于更大的文档比用于此测试的文档更为显着。

当然，设置是一次性的。使用触发器来维护`tsv`列，所做的任何更改都可以立即进行搜索，而无需重做任何设置。

对于慢速 PostgreSQL 查询，如果您显示表结构（包括索引）、问题查询以及查询运行的输出`EXPLAIN ANALYZE`，几乎总能有人发现问题并建议如何使其运行得更快。

* * *

**更新**（2016 年 12 月 9 日）

我没有提到我以前获得的时间，但根据日期可能是 9.2 主要版本。我刚刚遇到了这个旧线程，并使用版本 9.6.1 在相同的硬件上再次尝试，看看是否有任何干预性能调整有助于这个示例。仅对一个参数的查询只提高了大约 2% 的性能，但在使用 GIN（倒排）索引时，搜索同时包含“女士”*和*“绅士”的行的速度大约翻了一番，达到 0.053 毫秒（即 53 微秒）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-07T09:30:25.027

Solr 主要用于搜索数据，而不是用于存储。这使它能够放弃 RDMS 所需的大部分功能。所以它（或者更确切地说[lucene](http://lucene.apache.org/core/)）专注于纯粹的索引数据。

正如您毫无疑问地发现的那样，Solr 能够从其索引中搜索和检索数据。正是后者（可选）功能导致了自然问题……“我可以将 Solr 用作数据库吗？”

答案是肯定的，我建议您参考以下内容：

*   [https://stackoverflow.com/questions/5814050/solr-or-database](https://stackoverflow.com/questions/5814050/solr-or-database)
*   [使用 Solr 搜索索引作为数据库 - 这是“错误的”吗？](https://stackoverflow.com/questions/4258593/using-solr-search-index-as-a-database-is-this-wrong)
*   [对于守护者 solr 是新的数据库](http://lucidworks.com/blog/2010/04/29/for-the-guardian-solr-is-the-new-database/)

我个人的看法是，最好将 Solr 视为我的应用程序和数据库中掌握的数据之间的可搜索缓存。这样我就可以两全其美了。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-07T10:19:33.070

最大的不同是 Lucene/Solr 索引就像一个单表数据库，不支持任何关系查询 (JOIN)。请记住，索引通常仅用于支持搜索，而不是数据的主要来源。因此，您的数据库可能处于“第三范式”，但索引将完全被反规范化，并且主要包含需要搜索的数据。

另一个可能的原因是数据库通常存在内部碎片，它们需要在巨大的请求上执行太多的半随机 I/O 任务。

这意味着，例如，考虑到数据库的索引架构，查询会导致索引，而索引又会导致数据。如果要恢复的数据分布广泛，结果将需要很长时间，这似乎是数据库中发生的情况。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-07T08:52:29.947

请阅读[这个](https://stackoverflow.com/a/4394805/1150329)和[这个](https://stackoverflow.com/a/1441737/1150329)。

Solr (Lucene) 创建了一个[倒排索引](http://en.wikipedia.org/wiki/Inverted_index)，在该索引中检索数据变得相当快。我[读到](http://www.postgresql.org/docs/8.3/static/textsearch-indexes.html)PostgreSQL 也有类似的功能，但不确定你是否使用过。

您观察到的性能差异也可以归因于“正在搜索什么？”、“用户查询是什么？”

# javascript - 在响应式网页设计中，如何在用户缩小窗口时使用 Javascript 或 jQuery 来停止功能并重置？

> ID：10053052
> 
> 赞同：1
> 
> 时间：2012-04-07T08:40:35.867
> 
> 标签：javascript, jquery, responsive-design

我有一个响应式布局，并使用 jQuery 创建了一个渐变面板动画元素。我将 jQuery 函数设置为仅在用户超过特定屏幕尺寸时才激活。但是，如果我缩小窗口，该函数仍然运行。

这是我想要实现的目标：

1.  当用户滚动浏览器宽度为 1440 像素时，停止该淡入淡出的面板动画。
2.  动画停止后，我想重置该区域以显示第一个面板。
3.  如果用户向上滚动到该屏幕尺寸以上，请再次启动动画。

这是我的代码，提前感谢您的时间：

```
// Get the viewport size!
var viewport = $(document).width();

if (viewport >= 1140) {

var InfiniteRotator = 
{
    init: function() 
    {
        // hard set height of container
        $('#circles').height('286.717px');

        // initial fade-in time
        var initialInterval = 3000;

        // interval between items
        var itemInterval = 5000;

        // cross-fade time
        var fadeTime = 2000;

        // count number of items
        var numberOfItem = $('.rotating-item').length;

        // set current item
        var currentItem = 0;

        // create loop
        var infiniteLoop = setInterval(function() { 

            // initial fade out
            $('.rotating-item').eq(currentItem).fadeOut(fadeTime);

            // set counter
            if (currentItem == numberOfItem -1) {
                currentItem = 0;
            } else {
                currentItem++;
            }

            // next item fade in
            $('.rotating-item').eq(currentItem).fadeIn(fadeTime);

        }, itemInterval);
    }
}

// go Go GO!
InfiniteRotator.init();
} 
```

请注意：我使用这个很棒的教程来创建褪色面板：[http ://trendmedia.com/news/infinite-rotating-images-using-jquery-javascript/](http://trendmedia.com/news/infinite-rotating-images-using-jquery-javascript/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T09:47:01.813

```
window.onresize = function() {
    clearInterval(infiniteLoop)
} 
```

请注意，您必须仍在您的`init`函数中才能获取`infiniteLoop`变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T08:47:09.020

您可以使用

```
window.onresize = function(){ ... } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T08:47:28.527

```
$(window).resize(function() {
  //stop and reset animation in here.
}); 
```

# iphone - 根据 iPhone 中的正则表达式对文本字段执行电话号码验证

> ID：10053067
> 
> 赞同：1
> 
> 时间：2012-04-07T08:42:38.297
> 
> 标签：iphone, objective-c

我的应用程序中有一个文本字段，我正在对电话号码（+00-0000000000）执行验证，用户必须先输入“+”，然后输入超过 2 位的国家代码，然后是国家代码“-”和“ -' 将输入任何无数字的手机号码。

我已经使用正则表达式完成了代码，但是当我最初在文本字段中输入任何字母代替“+”时，我的应用程序崩溃，当我输入 +00- 即 +countrycode- 然后任何字母说“abc”时，它接受的是错误的。我希望只有数字和 + 和 - 必须在文本字段中输入。如果输入了除数字和 + 和 - 以外的任何内容，例如，如果在文本字段中输入了字母，则应显示警报视图“请输入有效的手机号码”。

这是我的代码：

```
- (BOOL)validateInputWithString:(NSString *)aString
{
    NSString * const regularExpression = @"^([+]{1})([0-9]{2,6})([-]{1})([0-9]{10})$";
    NSError *error = NULL;
}

-(IBAction)Check:(id)sender{
    BOOL check = [self validateInputWithString:TextField.text];

    if(check == YES){
        NSLog(@"Hii");
        NSString *string= [NSString stringWithFormat:@"%@", TextField.text];
        NSArray *first = [string componentsSeparatedByString:@"-"];
        NSString *second = [first objectAtIndex:1];
        NSString *third = [first objectAtIndex:0];
        if([second length] < 11){
            NSLog(@"bang");
        }
        else{
            NSLog(@"Fault");
        }
        if([third length] > 3 || [third length] < 7){ 
            NSLog(@"Bang");
        }
        else{
            NSLog(@"fault");
        }
    }
    else{
        NSLog(@"FAULT");
    }
} 
```

但是在我的代码中，当我在 +countrycode- 之后输入字母时，它会接受这是错误的，当我最初在我的文本文件中输入字母时，我的应用程序会在我的按钮单击时崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T08:58:24.253

您的应用程序因此崩溃：

```
NSString *string= [NSString stringWithFormat:@"%@", TextField.text];
NSArray *first = [string componentsSeparatedByString:@"-"];
NSString *second = [first objectAtIndex:1];
NSString *third = [first objectAtIndex:0]; 
```

首先你的变量名不好。为什么第一个是数组，第二个是第二个字符串，第三个是第一个字符串？没有意义，没有人会理解这段代码。

但是您的崩溃是因为您将字符串分开，然后在不检查它是否存在的情况下访问 objectAtIndex 1。如果字符串不包含，当然不存在`-`。

这样的事情会解决你的问题：

```
NSString *string= [NSString stringWithFormat:@"%@", TextField.text];
NSArray *components = [string componentsSeparatedByString:@"-"];
NSString *strBeforeDash = [components objectAtIndex:0];
if ([components count] > 2) {
    NSLog(@"More than one \"-\" found");
    return;
}
if ([components count == 1) {
    NSLog(@"No \"-\" found");
    return;
}
NSString *strAfterDash = [components objectAtIndex:1]; 
```

* * *

并且`- (BOOL)validateInputWithString:(NSString *)aString`不验证任何内容，因为它既没有验证码也没有返回值。

# html - 浏览器将遵循一系列步骤来读取缓存的图像/内容

> ID：10053068
> 
> 赞同：2
> 
> 时间：2012-04-07T08:42:45.757
> 
> 标签：html

假设我有这样的 img 标签，

```
<img src = "myimage.jpg" width ="50" height = "50"> 
```

当浏览器第一次遇到这种情况时，它会下载图像文件并渲染它。当再次刷新我的页面时，当浏览器遇到这一行时，它会发送再次下载文件的请求还是从缓存中读取。它将采取的所有过程顺序是什么。

我立即想到的另一个问题是，如果我更改图像内容而不是图像名称（myimage），如果浏览器读取缓存的图像，图像的内容将与我的服务器中的内容不同。如何克服这个问题？

对答案不满意。有人可以告诉我，在这些情况下，进程浏览器的所有顺序是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T08:56:16.657

即使已经缓存了图像，浏览器也会向服务器发送图像请求（至少根据 firebug 中的网络日志）。据我所知，服务器返回一个“最后下载/修改日期”，如果时间过长（通常在 3 天左右后浏览器将重新下载缓存的内容），它可以触发新的下载。

解决此问题的最简单方法是在文件名中添加版本或发布日期，以便浏览器忽略其缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T08:50:36.510

浏览器所做的取决于第一次与图像一起返回的 HTTP 标头。根据响应的缓存设置，浏览器可以：

*   再次请求图像，
*   请求图像是否已更改，或
*   在不询问服务器的情况下使用缓存中的图像

# grails - Grails 2.0 依赖 NoClassDefFound 问题

> ID：10053070
> 
> 赞同：1
> 
> 时间：2012-04-07T08:43:15.640
> 
> 标签：grails, groovy, dependencies, noclassdeffounderror, buildconfig

当我尝试使用来自外部 JAR 的库时，我在 Grails 2.0 中遇到了 NoClassDefFound 异常问题。

我检查了声明的 JAR 是否在创建的 WAR 中，grialsdependecies-report 也没有标记任何问题。

本地添加的 JAR 或从 Maven 存储库下载似乎没有区别。我也尝试过清理 IVY 缓存和清理 grails 项目，但没有成功。

您有任何解决方法的想法吗？

* * *

**BuildConfig.groovy**（部分）

```
grails.project.dependency.resolution = {

    inherits("global") {
        // uncomment to disable ehcache
        // excludes 'ehcache'
    }
    log "error" // log level of Ivy resolver, either 'error', 'warn', 'info', 'debug' or 'verbose'
    checksums true // Whether to verify checksums on resolve

    repositories {
        inherits true // Whether to inherit repository definitions from plugins
        grailsPlugins()
        grailsHome()
        grailsCentral()

        mavenCentral()
        mavenLocal()
        mavenRepo "http://snapshots.repository.codehaus.org"
        mavenRepo "http://repository.codehaus.org"
        mavenRepo "http://download.java.net/maven/2/"
        mavenRepo "http://repository.jboss.com/maven2/"
    }

    dependencies {

        compile (   "javax:activation:1.0",
                    "javax:mail:1.0",
                    "com.google.gdata:gdata-core:1.0",
                    "com.google.gdata:gdata-client:1.0",
                    "com.google.gdata:gdata-media:1.0",
                    "com.google.gdata:gdata-youtube:2.0"
        )

        runtime (   "javax:activation:1.0",
                    "javax:mail:1.0",
                    "com.google.gdata:gdata-core:1.0",
                    "com.google.gdata:gdata-client:1.0",
                    "com.google.gdata:gdata-media:1.0",
                    "com.google.gdata:gdata-youtube:2.0"
        )
    }

...

} 
```

* * *

**库控制器.groovy**

```
import com.google.gdata.client.youtube.YouTubeService
import com.google.gdata.data.youtube.VideoEntry
import com.google.gdata.util.ServiceException

class LibraryController {

    private YouTubeService service
    private static final API_URL = "http://gdata.youtube.com/feeds/api/videos/"

    def index = {
        service = new YouTubeService("app")
    }
} 
```

* * *

**例外**

```
Class
    java.lang.NoClassDefFoundError
Message
    Could not initialize class com.google.gdata.client.youtube.YouTubeServiceClass
java.lang.NoClassDefFoundError 
```

消息无法初始化类 com.google.gdata.client.youtube.YouTubeService

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T15:25:48.053

`NoClassDefFoundError`不一样`ClassNotFoundException`。获得一个`ClassNotFoundException`意味着类不存在，所以你有一个简单的 jar/依赖问题。`NoClassDefFoundError`表示找到了指定的类，但没有找到它引用的类。这是一个更令人沮丧的问题，因为 JVM 不会告诉您缺少什么。

您需要确保您拥有无法加载的类的所有依赖项，以及它们的所有依赖项等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T10:10:58.760

您已经在编译和运行时范围内声明了所有依赖项。每个依赖项只能声明一次。如果您在编译范围内声明依赖项，它也将在运行时可用。由于您需要此类进行编译，因此应将 com.google.gdata:gdata-youtube:2.0 保留在“编译”下，并将其从“运行时”中删除

可用范围的描述，取自[用户文档](http://grails.org/doc/latest/guide/conf.html#configurationsAndDependencies)：

*   build：仅构建系统的依赖项
*   compile：编译步骤的依赖项
*   运行时：运行时需要但编译不需要的依赖项（见上文）
*   测试：测试所需的依赖项，但在运行时不需要（见上文）
*   提供：开发时需要的依赖项，但在 WAR 部署期间不需要

# events - NodeJS 等待回调在事件发出时完成

> ID：10053073
> 
> 赞同：12
> 
> 时间：2012-04-07T08:43:26.060
> 
> 标签：events, node.js, express, eventemitter

我有一个用 Express 用 NodeJS 编写的应用程序，并且正在尝试使用 EventEmitter 创建一种插件架构，其中插件通过监听发出的事件连接到主代码中。

当插件函数发出异步请求（在这种情况下从 mongo 获取数据）时，我的问题就出现了，这会导致插件代码完成并将控制权返回给原始发射器，然后在插件代码中的异步请求之前完成执行完成。

例如：

主应用：

```
// We want to modify the request object in the plugin  
self.emit('plugin-listener', request); 
```

插入：

```
// Plugin function listening to 'plugin-listener', 'request' is an arg
console.log(request);

// Call to DB (async)
this.getFromMongo(some_data, function(response){
    // this may not get called until the plugin function has finished!
} 
```

我避免将回调函数从“getFromMongo”函数返回到主代码的原因是可能有 0 个或多个插件正在监听该事件。理想情况下，我想要某种方式来等待数据库内容完成，然后再将控制权返回给主应用程序

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T09:21:09.653

使用 EventEmitter 进行插件/中间件管理并不理想，因为如果侦听器具有异步代码，则无法确保它们按顺序执行。当这些侦听器与彼此或相同数据交互时，这尤其是一个问题。

这就是为什么 ie connect/express 中间件函数存储在一个数组中并一个接一个地执行，而不是使用 EventEmitter；他们每个人都需要调用一个 next(); 当他们完成任务时发挥作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T17:17:09.960

您不能将异步调用与同步行为混为一谈。如果您要坚持使用事件发射器（正如 Klovadis 指出的那样，这对您来说可能并不理想），您需要让您的插件发出一个事件来触发主应用程序中的一个函数，该函数包含您想要的代码'等待'执行。您还必须反过来跟踪您等待事件调用的所有插件调用，以便在所有插件调用完成其 MongoDB 回调之前，您的主代码不会运行。

```
var callList = ['pluginArgs1', 'pluginArgs2', 'pluginArgs3'];
for (var i = 0; i < callList.length; i++){
  self.emit('plugin-listener', callList[i], i);
}

self.on('plugin-callback', function(i){
  callList.splice(i, 1);
  if (callList.length < 1){
    //we're done, do something
  }
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-20T09:58:16.360

在将响应返回给客户端之前有时需要等待一些事件，有时不需要（当不在 HTTP 请求上下文中时）。

对我来说最简单的方法是添加回调作为事件的最后一个参数。

```
Stuff.emit('do_some_stuff', data, data2, callback); 
```

在事件中检查是否有回调：

```
Stuff.on('do_some_stuff', function(data, data2, callback) {
  // stuff to do
  // ...
  if (typeof callback === "function") return callback(err, result);
}); 
```

我知道混合事件和回调可能会很混乱，但这可以满足我的需要。我看到的另一种解决方案是@redben 提出的解决方案：在事件结束时添加一个发出函数。在 HTTP 上下文中的问题是您需要唯一的键，这样如果每个用户执行不同的操作，您的事件就不会混乱。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-12T00:10:18.833

自己没有尝试过，但您可以使用事件数据对象中的属性作为函数数组，由发出事件的代码执行：

听众

```
foo.on('your-event', function(data) {
  console.log(data);
  // Then add the asynchronous code to a callbacks array
  // in the event data object
  data.callbacks.push(function(next) {
    getFromMongo(some_data, function(err, result) { next(err) }
  }
}); 
```

发射器

```
self.emit('your-event', data);
// listeners have modified data object,
// some might have added callback to data.callbacks
// (suppose you use async)
async.series(data.callbacks); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-05T18:34:06.863

这似乎很危险，但无论如何我必须这样做......

```
const ee = new EventEmitter();
if (ee.listeners("async-event").length > 0) {
  await new Promise((resolve) => {
    ee.emit("async-event", data1, data2, resolve);
  });
} 
```

否则，只需来回发出事件。

# java - ArrayList - 如何修改对象的成员？

> ID：10053078
> 
> 赞同：39
> 
> 时间：2012-04-07T08:43:49.523
> 
> 标签：java, collections, pojo

我有许多`Customer`对象存储在 ArrayList 中。我的`Customer`班级有 2 个数据成员：`Name`和`Email`. 现在我只想`Email`为客户“Doe”修改。

现在，如果“Doe”位于列表中的索引 3，我知道我可以写下这一行：

```
myList.set( 3, new Customer( "Doe", "j.doe@supermail.com" ) ); 
```

但这意味着创建一个新对象。如果我有一个很大的列表，我想这个过程会很慢。有没有其他方法可以直接访问存储在 ArrayList 中的 Object 的数据成员，可能是使用除 ArrayList 之外的另一种集合？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-04-07T08:49:17.697

你可以这样做：

```
myList.get(3).setEmail("new email"); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-06-13T16:07:15.247

固定的。我错了：这只适用于元素重新分配。我认为返回的对象没有引用新的对象。

可以办到。

> ***问**：为什么？*
> ***答**：get() 方法返回一个引用原始对象的对象。*

> *因此，如果您编写`myArrayList.get(15).itsVariable = 7`
> or
> `myArrayList.get(15).myMethod("My Value")`，
> 您实际上是在使用返回的**对象引用**的对象中的方法分配值 / （这意味着更改将应用​​于原始对象）*

你唯一**不能**做的就是`myArrayList.get(15) = myNewElement`。为此，您必须使用`list.set()`方法。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-07T09:13:14.627

您可以遍历 arraylist 以识别索引以及最终需要修改的对象。您可以使用 for-each 如下所示：

```
for(Customer customer : myList) {
    if(customer!=null && "Doe".equals(customer.getName())) {
        customer.setEmail("abc@xyz.com");
        break;
    }
} 
```

这里的客户是对存在于 Arraylist 中的对象的引用，如果您更改此客户引用的任何属性，这些更改将反映在您存储在 Arraylist 中的对象中。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-07T08:46:48.603

假设`Customer`有一个电子邮件设置器 -`myList.get(3).setEmail("j.doe@supermail.com")`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-04-07T09:04:38.173

我给你写了两节课来告诉你它是如何完成的；主要和客户。如果你运行 Main 类，你会看到发生了什么：

```
import java.util.*;

public class Customer {

    private String name;
    private String email;

    public Customer(String name, String email) {
        this.name = name;
        this.email = email;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    @Override
    public String toString() {
        return name + " | " + email;
    }

    public static String toString(Collection<Customer> customers) {
        String s = "";
        for(Customer customer : customers) {
            s += customer + "\n";
        }
        return s;
    }

}

import java.util.*;

public class Main {

    public static void main(String[] args) {
        List<Customer> customers = new ArrayList<>();
        customers.add(new Customer("Bert", "bert@gmail.com"));
        customers.add(new Customer("Ernie", "ernie@gmail.com"));
        System.out.println("customers before email change - start");
        System.out.println(Customer.toString(customers));
        System.out.println("end");
        customers.get(1).setEmail("new.email@gmail.com");
        System.out.println("customers after email change - start");
        System.out.println(Customer.toString(customers));
        System.out.println("end");
    }

} 
```

为了让它运行，创建 2 个类，Main 和 Customer，并将两个类的内容复制粘贴到正确的类；然后运行 ​​Main 类。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-04-07T08:58:02.560

您可以对集合进行获取，然后只需修改您刚刚“获取”的客户的属性。无需修改集合，也无需创建新客户：

```
int currentCustomer = 3;

// get the customer at 3
Customer c = list.get(currentCustomer);
// change his email
c.setEmail("somethingelse@example.com"); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-04-07T08:46:57.430

用于`myList.get(3)`访问当前对象并对其进行修改，假设 的实例`Customer`可以修改。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-05-06T06:51:38.360

好吧，你已经使用了 Pojo Entity，所以你可以做到这一点。你需要得到那个对象并且必须设置数据。

```
myList.get(3).setEmail("email"); 
```

这样你就可以做到。或者你也可以设置其他参数。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-04-07T09:03:41.567

如果您需要快速查找存储在集合中的对象（基本上是恒定时间），您应该使用 Map 而不是 List。

如果您需要对象的快速迭代，您应该使用 List。

所以在你的情况下......

```
Map<String,Customer> customers = new HashMap<String,Customer>();

//somewhere in the code you fill up the Map, assuming customer names are unique
customers.put(customer.getName(), customer)

// at some later point you retrieve it like this; 
// this is fast, given a good hash
// been calculated for the "keys" in your map, in this case the keys are unique 
// String objects so the default hash algorithm should be fine
Customer theCustomerYouLookFor = customers.get("Doe");

// modify it
theCustomerYouLookFor.setEmail("newEmail@stackoverflow.com") 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-11-01T15:00:13.183

这里没有功能......它适用于充满对象的listArrays

示例`

```
al.add(new Student(101,"Jack",23,'C'));//adding Student class object  
      al.add(new Student(102,"Evan",21,'A'));  
      al.add(new Student(103,"Berton",25,'B'));  
      al.add(0, new Student(104,"Brian",20,'D'));
      al.add(0, new Student(105,"Lance",24,'D'));
      for(int i = 101; i< 101+al.size(); i++) {  
              al.get(i-101).rollno = i;//rollno is 101, 102 , 103, ....
          } 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-02-09T04:06:38.583

你使用的任何方法，总会有一个像 in`removeAll()`和的循环`set()`。

所以，我这样解决了我的问题：

```
for (int i = 0; i < myList.size(); i++) {

        if (myList.get(i).getName().equals(varName)) {

            myList.get(i).setEmail(varEmail);
            break;

        }
    } 
```

哪里`varName = "Doe"`和`varEmail = "j.doe@supermail.com"`。

我希望这对你有帮助。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-01-12T09:56:34.723

试试这个。这在遍历代码并一次修改 Arraylist 的所有元素的字段时有效。

```
public Employee(String name,String email){
this.name=name;
this.email=email;
}

public void setName(String name) {
this.name = name;
}

public String getName() {
return name;
}

public void setEmail(String email) {
this.email = email;
}

public String getEmail() {
return email;
}

for(int i=0;i++){
List.get(i).setName("Anonymous");
List.get(i).setEmail("xyz@abc.com");
} 
```

# jquery - jQuery serialize() 在 Rails 中抛出空字符串

> ID：10053079
> 
> 赞同：2
> 
> 时间：2012-04-07T08:43:56.787
> 
> 标签：jquery, ruby-on-rails

jQuery`serialize()`从表单中抛出空字符串，这里是表单的来源

```
<form accept-charset="UTF-8" action="/asdf" id="form_for_asdf_1_option_1" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓" /><input name="authenticity_token" type="hidden" value="asdfaaqwefasdfwefefsefefwew=" /></div>
    <input name="checkbox_update_vote[asdf_id]" type="hidden" value="0" /><input id="dbr_1_of_asdf_1" name="checkbox_update_vote[asdf_id]" type="checkbox" value="1" />
    <input id="option_1_of_asdf_1" name="checkbox_update_vote[option_id]" type="hidden" value="1" />
    <input id="del_1_of_asdf_1" name="checkbox_update_vote[del]" type="hidden" value="false" />
    <br />
</form> 
```

以及用于显示序列化输出的 JavaScript。

```
$(document).ready(function() {
  $('input[type="checkbox"]').change(function() {
    alert($($(this).parents("form")[0].id).serialize());
  });
}); 
```

有人能指出我在哪里做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T08:47:11.880

添加 '＃'：

```
$("#" + $(this).parents("form")[0].id) 
```

或删除`.id`：

```
$($(this).parents("form")[0]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T08:50:40.930

`#`在查找具有给定 ID 的表单时，您错过了。

但是，您可以避免此问题，只需使用[`.closest()`](http://api.jquery.com/closest/)来查找祖先`<form>`

```
$(this).closest('form').serialize(); 
```

# ios - 无法使用 UIBarButtonItem 显示弹出框控制器

> ID：10053081
> 
> 赞同：4
> 
> 时间：2012-04-07T08:44:31.413
> 
> 标签：ios, storyboard, uipopovercontroller

我使用故事板为我的项目开发 UI。有很多问题都解决了，但是这个问题让我很生气。我为 UIBarButtonItem 添加了操作：

```
- (IBAction)pressAddActionButton:(UIBarButtonItem *)sender {
if (_mode == itemSelect) {

    LookUpTableViewController *vc =  [self.storyboard instantiateViewControllerWithIdentifier:@"lookupTable"];
    vc.key = @"title";
    vc.data = [Linesheet MR_findAllSortedBy:@"title" ascending:YES];
    vc.lookUpDelegate = self;

    self.myPopoverController = [[UIPopoverController alloc] initWithContentViewController:vc];
    [self.myPopoverController presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];      
} else {
    self.mode = itemSelect;
} 
```

}

如果我使用storyBoard segue 来显示popover - 一切都很好，但如果我**在运行时这样做，popover 不会显示**。我应该手动创建 UIBarButtonItem。

感谢帮助！！！

**更新，按钮代码：**

```
- (void)setupNavigationItems {

    self.navigationController.navigationBarHidden = NO;

    UIBarButtonItem *addItem;
    if (_mode == itemSelect) {
        addItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd 
                                                                target:self 
                                                                action:@selector(pressAddActionButton:)];   
    } else {
        addItem = [[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStyleDone 
                                                  target:self 
                                                  action:@selector(pressDoneButton:)];
    }
    [addItem setStyle:UIBarButtonItemStyleBordered];

    UIBarButtonItem *separator = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace 
                                                                               target:self 
                                                                               action:nil];

    UIBarButtonItem *action = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAction 
                                                                            target:self 
                                                                            action:@selector(pressActionButton:)];
    [action setStyle:UIBarButtonItemStyleBordered];

    [toolbar setItems:[NSArray arrayWithObjects:separator, addItem, action, nil] animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T23:12:09.083

确保使用该`presentPopoverFromBarButtonItem`行上的断点按预期运行代码。此外，如果您使用 arc，请确保 myPopoverController 属性声明为 strong，否则在呈现行之前它将为 nil。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T03:44:38.817

您是否检查过是否`LookUpTableViewController *vc`确实获得了正确的实例？如果没有，请检查您的故事板是否已`@"lookupTable"`设置为控制器的标识符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T22:59:13.370

代码是对的。尝试用`self.navigationItem.leftBarButtonItem`或替换发件人`self.navigationItem.rightBarButtonItem`。发件人可能不是您所期望的。

还要删除`(_mode == itemSelect)`用于测试的 if 子句我不确定为什么需要直接访问 ivar _mode ivar。

# excel - 根据该行中第二个单元格的值为整行着色？

> ID：10053095
> 
> 赞同：0
> 
> 时间：2012-04-07T08:47:04.747
> 
> 标签：excel, excel-2007

我在 Excel 中有一个列表，我需要根据该行的单元格 2 中的值来格式化行。这就是数据的样子

```
No. | Name | Other data | Other data 2 | Date | Date 2 | 
```

例如, `if Name=John Tery => color row as Red`,`if Name=Mary Jane => color row as Pink`等。

我尝试使用条件格式，但我不知道如何使这项工作。我在 Excel 中处理此类任务的经验很少。

任何人都可以帮忙吗？

PS。所有名称都是两个单词的名称

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T11:27:23.840

如果只有几个名称需要处理，每个条件格式公式将如下所示

```
=$B2="John Tery" 
```

*   您需要从顶行向下选择受影响的行（因此当前活动单元格位于第二行，而不是最后一行）
*   对列的绝对引用`$B`意味着对于不同列中的所有单元格，将测试列 B
*   对行的相对引用`2`意味着对于不同行的单元格，将测试它自己的行（例如对于单元格A42，公式将测试$B42的值）
*   相等运算符`=`将返回 TRUE 或 FALSE（如果任何参数是错误，则返回错误）并且它与内部`IF`条件具有相同的用途......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T11:09:17.490

**编辑**重新阅读问题，我看到整行都将被着色，而不仅仅是名称。我还决定，如果一个可识别的名称被一个无法识别的名称替换，则应该从该行中删除该颜色。原始代码已被替换以解决这些问题。

我决定不关心我的问题的答案，因为对于我能识别的任何场景来说，下面的解决方案似乎是最简单的。

首先，您需要一些方法来确定“John Tery”将被涂成红色，而“Mary Jane”将被涂成粉红色。我决定最简单的方法是制作一个工作表`NameColour`，列出所需颜色的名称。所以例程知道“John Tery”是红色的，因为它在这个列表中是红色的。我在您的列表中添加了更多名称。该例程并不关心名称中有多少个单词。

![显示彩色名称的工作表 NameColour](../Images/b4ab71ffb88746c0765539864be75e4b.png)

下面的代码一定要进去`ThisWorkbook`。每当更改单元格时都会触发此例程。变量`MonitorColNum`并`MonitorSheetName`告诉例程要监视哪个表和列。任何其他单元格更改都将被忽略。如果找到匹配项，它会从 NameColour 复制名称的标准形式（如果不需要，请从代码中删除此语句）并根据需要为单元格着色。如果未找到匹配项，则将名称添加到 NameColour 以供以后指定其颜色。

希望这可以帮助。

```
Option Explicit
Private Sub Workbook_SheetChange(ByVal Sh As Object, ByVal Changed As Range)

  Dim CellCrnt As Variant
  Dim ColLast As Long
  Dim Found As Boolean
  Dim MonitorColNum As Long
  Dim MonitorSheetName As String
  Dim RowNCCrnt As Long

  MonitorSheetName = "Sheet2"
  MonitorColNum = 2

  ' So changes to monitored cells do not trigger this routine
  Application.EnableEvents = False

  If Sh.Name = MonitorSheetName Then
    ' Use last value in heading row to determine range to colour
    ColLast = Sh.Cells(1, Columns.Count).End(xlToLeft).Column
    For Each CellCrnt In Changed
      If CellCrnt.Column = MonitorColNum Then
        With Worksheets("NameColour")
          RowNCCrnt = 1
          Found = False
          Do While .Cells(RowNCCrnt, 1).Value <> ""
            If LCase(.Cells(RowNCCrnt, 1).Value) = LCase(CellCrnt.Value) Then
              ' Ensure standard case
              CellCrnt.Value = .Cells(RowNCCrnt, 1).Value
              ' Set required colour to name
              'CellCrnt.Interior.Color = .Cells(RowNCCrnt, 1).Interior.Color
              ' Set required colour to row
              Sh.Range(Sh.Cells(CellCrnt.Row, 1), _
                       Sh.Cells(CellCrnt.Row, ColLast)).Interior.Color = _
                                         .Cells(RowNCCrnt, 1).Interior.Color
              Found = True
              Exit Do
            End If
            RowNCCrnt = RowNCCrnt + 1
          Loop
          If Not Found Then
            ' Name not found.  Add to list so its colour can be specified later
            .Cells(RowNCCrnt, 1).Value = CellCrnt.Value
            ' Clear any existing colour
            Sh.Range(Sh.Cells(CellCrnt.Row, 1), _
                 Sh.Cells(CellCrnt.Row, ColLast)).Interior.ColorIndex = xlNone
          End If
        End With
      End If
    Next
  End If

  Application.EnableEvents = True

End Sub 
```

# ruby - Ruby on Rails 与 chargify

> ID：10053099
> 
> 赞同：1
> 
> 时间：2012-04-07T08:47:13.610
> 
> 标签：ruby, ruby-on-rails-3, chargify

我想将 chargify 集成到我的 rails 应用程序中。我有用户对象，我希望用户能够订阅一个月并更新用户对象上的布尔列。我更喜欢使用 API 而非托管页面。我怎样才能做到这一点？

是否有任何关于 ruby​​ on rails 的 chargify 示例来处理订阅，但有关于新手的 mvc 的详细信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T15:54:54.147

[这](http://www.railsinside.com/elsewhere/371-chargify-rails-powered-recurring-billing-service-with-an-activeresource-api.html)可能会让你继续前进。似乎 Chartify 本身是用 Rails 编写的，因此他们的 API 是 ruby​​ 代码，您可以使用它......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T15:57:58.147

基于这个[线程](http://help.chargify.com/entries/20126343-rails-3-code-example-to-implement-chargify)和谷歌看起来好像没有很多。

您可以尝试在[此处](https://github.com/npverni/chargify-demo)查看 Rails 2 示例并将其转换或在[此处使用 gem](https://github.com/pengwynn/chargify)（gem "chargify"、"~> 0.3.0"）。

我知道这些都不是针对新手的，但信息似乎很少。

# javascript - 为什么 array.push() 用于制作对象？

> ID：10053102
> 
> 赞同：7
> 
> 时间：2012-04-07T08:47:30.253
> 
> 标签：javascript

我在阅读[如何在 JavaScript 中获取查询字符串值？](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)在 Stackoverflow 上，第一个回复中的这段代码让我想知道为什么这样使用“vars.push()”？

```
function getUrlVars()
{
    var vars = [], hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for(var i = 0; i < hashes.length; i++)
    {
        hash = hashes[i].split('=');
        vars.push(hash[0]);
        vars[hash[0]] = hash[1];
    }
    return vars;
} 
```

但不是这样：

```
var vars=[];
...
vars.push(hash[0]);
vars[hash[0]] = hash[1]; 
```

我重写了如下代码：

```
var vars={};
...
vars[hash[0]] = hash[1]; 
```

它有效。现在的问题是：

*   为什么有人会使用数组来进行这种回复？
*   为什么有人会使用`ARR.push(KEY)`然后再使用`ARR[KEY]=VAL`格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T08:52:19.763

这导致`vars`既是键数组又是字典。
我能想到的唯一好理由是保持查询参数的*顺序*，这在字典 中[没有定义。](https://stackoverflow.com/questions/648139/is-the-order-of-fields-in-a-javascript-object-predictable-when-looping-through-t)

Either way, I would note this function removes duplicated query parameters - it only keeps the last value (though the key would be inserted multiple times to the array)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T08:59:19.787

The function uses the array both as an array and as an object.

As an array it contains the keys from the query string. As an object it contains properties named from the keys in the query string, and the properties have the values from the query string.

So,m if the query string for example looks like this: `a=1&b=2`, the array contains the two items "a" and "b", and it has the two properties `a` with the value `1` and `b` with the value `2`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T08:53:11.630

Push will push the key as the last key. So it allows you to have a logical order in the array.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-07T08:59:37.400

push() appends its arguments, in order, to the end of array. It modifies array directly, rather than creating a new array. push(), and its companion method pop(), use arrays to provide the functionality of a first in, last out stack.

# xml - 将具有属性的新节点添加到 xml 文件

> ID：10053107
> 
> 赞同：1
> 
> 时间：2012-04-07T08:48:43.067
> 
> 标签：xml, asp-classic

我有一个这样的 xml 架构：

```
<?xml version="1.0" encoding="utf-8"?>
<NEWS>
       <category title="title">
              <sbml title="title" value="SBML_NEWSBGCOLOR" version="7.26.23" />
              <sbml title="title" value="SBML_NEWSWIDTHTYPE" version="7.26.23" />
       </category>
</NEWS> 
```

我正在使用 asp Classic，并且我有一个传递 4 个变量来创建新`<sbml />`节点的表单。

```
Set objXML = Server.CreateObject("MSXML2.DOMDocument.3.0")
objXML.async = False
objXML.setProperty "ServerHTTPRequest", True
strXMLFile = Server.MapPath("\") & "\admin\sbml\72623.xml"
if objXML.Load(strXMLFile) Then
       If Request.ServerVariables("REQUEST_METHOD")="POST" Then
              Set new_sbml = objXML.createElement("sbml")
              objXML.selectSingleNode(noInj(rq("M")) & "/category").appendChild(new_sbml)
              objXML.save strXMLFile
       End if
End if 
```

通过这种方法，我只是添加了新节点但没有属性，如何设置该节点的属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T14:30:48.097

我刚刚找到我的答案

```
Set objXML = Server.CreateObject("MSXML2.DOMDocument.3.0")
objXML.async = False
objXML.setProperty "ServerHTTPRequest", True
strXMLFile = Server.MapPath("\") & "\admin\sbml\72623.xml"
if objXML.Load(strXMLFile) Then
       If Request.ServerVariables("REQUEST_METHOD")="POST" Then
              Set new_sbml = objXML.createElement("sbml")
              new_sbml.setAttribute "title", new_title 'Here i set attribute
              objXML.selectSingleNode("/category").appendChild(new_sbml)
              objXML.save strXMLFile
       End if
End if 
```

# c++ - C++11 的 long long 真的至少 64 位吗？

> ID：10053113
> 
> 赞同：38
> 
> 时间：2012-04-07T08:49:29.490
> 
> 标签：c++, c++11, long-long

它[在维基百科](//en.wikipedia.org/wiki/C++11#Type_long_long_int)和[Stroustrup 的常见问题解答](//www.stroustrup.com/C++11FAQ.html#long-long)中说 type`long long`至少与 an 一样长`int`并且**不少于 64 bits**。我一直在查看 C++11 标准 §3.9.1 基本类型部分，但找不到任何对 64 位的引用。我所能找到的只是它至少和 一样长`long int`，至少和 一样长`int`。标准列出`long long`了*标准*整数类型，而不是*扩展*类型，所以我想知道这个`long long`至少包含 64 位的断言是否正确。如果是，它在哪里说明？
请注意，我只是在谈论 C++11 标准`long long`。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-07T09:17:23.673

C++ 标准为此引用了 C 标准，请参阅 [c.limits]。`LLONG_MAX`的定义与 C's的`<climits>`含义相同。这就是 C 必须说的：`<limits.h>``LLONG_MAX`

> **5.2.4.2.1 整数类型的大小`<limits.h>`**
> 
> 下面给出的值应替换为适用于`#if`预处理指令的常量表达式。[...] 它们的实现定义值的大小（绝对值）应等于或大于所示值，且符号相同。
> 
> [...]
> 
> -- 类型对象的最大值`long long int`
> 
> `LLONG_MAX +9223372036854775807 //`2 ^(63) -1

必须能够表示值的有符号类型`9223372036854775807`需要 64 位或更多位。

# jquery - 进行 .ajax 调用时如何使 .scrollTop 不跳动

> ID：10053114
> 
> 赞同：1
> 
> 时间：2012-04-07T08:49:35.340
> 
> 标签：jquery, ajax

我正在做一些类似无限画廊的事情。我的 OnScroll 函数检测滚动是否位于页面底部 100px 处，如果是，则执行 ajax 调用，并且我将输出附加到 div。

问题是 closeToBottom 函数太快了，所以它有时会在滚动向上反弹之前从底部捕获滚动 100 像素两次甚至 4-5 次。

如何使 closeToBottom 更加微妙，以便一次只调用一次我的 ajax 调用，并且滚动会立即向上踢？

```
function onScroll(event) {
    // Check if we're within 100 pixels of the bottom edge of the browser window.
    var closeToBottom = ($(window).scrollTop() + $(window).height() > $(document).height() - 100);
    if(closeToBottom) {

        $.ajax({

                url: "<?php echo get_template_directory_uri() ?>/ajaxcall.php?offset="+offset,
                cache: false
        }).done(function( html ) {
            offset = offset + numberposts;
            $("#tiles").append(html);

        });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T09:02:19.770

您可以引入一个在 ajax 请求运行时设置的变量，并且仅在没有其他请求运行时启动另一个变量。像这样：

```
var ajaxLoading = false;
function onScroll(event) {
    // Check if we're within 100 pixels of the bottom edge of the browser window.
    var closeToBottom = ($(window).scrollTop() + $(window).height() > $(document).height() - 100);
    if(closeToBottom && !ajaxLoading) {
        ajaxLoading = true;
        $.ajax({

                url: "<?php echo get_template_directory_uri() ?>/ajaxcall.php?offset="+offset,
                cache: false
        }).done(function( html ) {
            offset = offset + numberposts;
            $("#tiles").append(html);
            ajaxLoading = false;

        });
} 
```

# jquery - 影响 WordPress 菜单的 jQuery 滑块

> ID：10053115
> 
> 赞同：2
> 
> 时间：2012-04-07T08:50:03.167
> 
> 标签：jquery, wordpress, menu, slider

我想知道是否有人可以帮助我解决这个问题。我已经下载了[NivoGallery](http://nivogallery.dev7studios.com/)并将其添加到我正在使用[Theme Framework](http://themeshaper.com/thematic/)构建的 WP 主题中，但是我有一个无法解决的小问题。正如标题所说，在滑块上添加的 jQuery 正在禁用标准 WP-Thematic 菜单的 JS。下面的代码包含在主题中的一个函数中。

```
 <div id="gallery" class="nivoGallery">
        <ul>
            <li>...</li>
            <li>...</li>
            <li>...</li>
            <li>...</li>
        </ul>
    </div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
<script src="<?php bloginfo('stylesheet_directory'); 
?>/admin/js/jquery.nivo.gallery.js"></script>

<script type="text/javascript">
    $(document).ready(function() {
        $('#gallery').nivoGallery();
    });
</script>` 
```

问题似乎主要是由

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js">
</script> 
```

我尝试过使用 jQuery noConflict，但似乎不起作用，它会中断。如果您需要整个 html 代码和 jquery.nivo.gallery.js 文件，请告诉我。

我找到了这个解决方案： function add_js_for_slider() { ?>
/admin/js/jquery.nivo.gallery.js"> $(document).ready(function() { $('#gallery_slider').nivoGallery(); });

是否可以摆脱 jquery 行，并且仍然保持工作？即使 WP 有 jquery，如果我从函数中删除该行，滑块也会中断。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T10:11:37.653

jquery 已经包含在 wordpress 中，因此您不需要从 googleapis 中包含它。

nivo 库可以处理 jQuery noConflict。如果您尝试这样做，您只需在代码中将 $ 更改为 jQuery。

# nginx - 如何从 http 响应头中删除 Nginx？

> ID：10053119
> 
> 赞同：20
> 
> 时间：2012-04-07T08:50:52.157
> 
> 标签：nginx, http-headers, hide

我想从 http 响应头中删除 Nginx。我可以隐藏我的 Nginx 版本，但我也想隐藏 Nginx。谢谢

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-18T04:24:43.300

使用该`ngx_headers_more`模块 - 请参阅[http://wiki.nginx.org/NginxHttpHeadersMoreModule](http://wiki.nginx.org/NginxHttpHeadersMoreModule)。

它允许您配置任何您想要的任意标头 - 请求和响应标头。一旦你安装了它（并因此重新编译了你的 Nginx 版本），使用以下配置：

```
more_set_headers 'Server: my-server'; 
```

或者，如果您根本不需要`Server`标题，请使用以下命令清除它：

```
more_clear_headers 'Server'; 
```

# machine-learning - 如何在 Weka 中进行适当的测试以及如何获得所需的结果？

> ID：10053125
> 
> 赞同：0
> 
> 时间：2012-04-07T08:51:53.737
> 
> 标签：machine-learning, weka, svm, prediction, neural-network

我目前正在研究应用 ANN、SVM 和线性回归方法来预测基于气象因素（13 个因素）的地区水果产量总数据集是：36

在 WEKA 上实施这些方法时，我得到了不好的结果：就像 MultilayerPreceptron 的情况一样，我的结果是：（我将数据集分为 28 个用于训练，8 个用于测试）=== 运行信息 ===

方案：weka.classifiers.functions.MultilayerPerceptron -L 0.3 -M 0.2 -N 500 -V 0 -S 0 -E 20 -H a -G -R 关系：apr6_data 实例：28 属性：15

构建模型所需时间：3.69 秒

=== 对测试集的预测 ===

inst# actual predicted error 1 2.551 2.36 -0.191 2 2.126 3.079 0.953 3 2.6 1.319 -1.281 4 1.901 3.539 1.638 5 2.146 3.635 1.489 6 2.533 2.917 0.384 7 2.54 2.744 0.204 8 2.82 3.473 0.653

=== 测试集评估 === === 总结 ===

相关系数 -0.4415 平均绝对误差 0.8493 均方根误差 1.0065 相对绝对误差 144.2248 % 相对方根误差 153.5097 % 实例总数 8

In case of SVM for regression : inst# actual predicted error 1 2.551 2.538 -0.013 2 2.126 2.568 0.442 3 2.6 2.335 -0.265 4 1.901 2.556 0.655 5 2.146 2.632 0.486 6 2.533 2.24 -0.293 7 2.54 2.766 0.226 8 2.82 3.175 0.355

=== 测试集评估 === === 总结 ===

相关系数 0.2888 平均绝对误差 0.3417 均方根误差 0.3862 相对绝对误差 58.0331 % 相对方根误差 58.9028 % 实例总数 8

我的应用程序中可能出现的错误是什么？请告诉我 ！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T22:30:34.100

> 我需要规范化数据吗？我猜它是由 WEKA 分类器完成的。

如果你想规范化数据，你必须这样做。预处理选项卡->过滤器（选择）->然后找到规范化，然后单击应用。

如果要离散化数据，则必须遵循相同的过程。

> 如果将预测离散化为低/中/高产量，您可能会更幸运。

您需要标准化或离散化——这不能根据您的数据或单次运行来说明。例如，离散化为朴素贝叶分类器带来了更好的结果。对于 SVM-不确定。

我没有从您的数据中看到您的 Precision、Recall 或 F 分数。但是正如您所说，您在测试集上的结果很差，那么您的分类器很可能正在经历过拟合。尝试增加训练实例（我猜 36 太少了）。当您增加培训实例时，请让我们发布正在发生的事情。

# jquery - 使用 .serialize() 的 Jquery Ajax 帖子引发 500 内部错误

> ID：10053128
> 
> 赞同：2
> 
> 时间：2012-04-07T08:52:12.647
> 
> 标签：jquery, serialization, post, internal

我正在尝试对所有表单字段进行简单的 ajax 表单发布。它发布字段，但引发错误。我在 firefox 上检查了 firebug，它显示**“500 内部错误”**

=========

# **HTML**

```
<form action="showResult.php" id="ShowResult">
  <input type="hidden" name="price" value="$110.99" />
  <input type="hidden" name="lang" value="English" />
  <input type="hidden" name="course" value="Course" />
  <input type="hidden" name="url" value="http://localhost/result.html" >
  <input type="hidden" name="id" value="pop30387" />

  <input type="button" id="postForm" value="Add items" />
</form> 
```

=========

# **脚本**

```
$("#postForm").click(function() {
    $.post($('form').attr('action'), $('form').serialize());
}); 
```

# geolocation - iOS：当应用程序从后台返回时检测用户位置

> ID：10053130
> 
> 赞同：0
> 
> 时间：2012-04-07T08:52:25.190
> 
> 标签：geolocation, mkmapview, ios5

我有一个 MKMapView & 我用它来显示用户的当前位置。当我第一次在应用程序中加载它时它工作正常。但是当我按下主页按钮将应用程序置于后台并从后台调用它时，地图提示它无法找到用户的位置。

我在想是 MKMapView 需要时间来搜索用户的位置，当我从后台调用它时，它没有足够的时间来加载位置服务？

使用 iOS5 SDK，xCode 4.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T09:02:06.057

如果我正确理解您的问题，您的问题是当您的应用程序恢复（变为活动状态）时，`mapView.userLocation`返回 nil。虽然我没有对此进行测试，但我怀疑这是因为 mapView 需要一些时间来重新定位用户。您可以通过将逻辑添加到适当的委托方法来解决此问题，`- (void) mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation`也就是说，如果记忆对我有用（不过，您可能想要验证这一点）。

编辑：确保您在设备上测试与位置相关的代码，因为它的行为可能与模拟器不同。

# extjs - 煎茶按钮停止

> ID：10053132
> 
> 赞同：0
> 
> 时间：2012-04-07T08:52:36.993
> 
> 标签：extjs

有人可以帮帮我吗？我在煎茶中有一张地图，可以跟踪我当前的位置并画线。但我也想要一个按钮来停止跟踪。所以我想设置`autoUpdate: false;`但我真的不知道该怎么做......

这是我的代码

```
Ext.application({
name: 'Applicatie3.',
launch: function() {
    var view = Ext.create('Ext.NavigationView', {
        fullscreen: true,
        items: [{
            title: "I'm lost",
            xtype: 'tabpanel',
            items:[{
                title               : 'Home',
                xtype               : 'map',
                iconCls             : 'home',
                mapOptions          : { zoom: 20  },
                useCurrentLocation  : true,
                listeners           : {
                    maprender: function(comp, map){
                        var marker = new google.maps.Marker({
                            position    : new google.maps.LatLng( ),
                            map         : map
                        }),
                        infowindow = new google.maps.InfoWindow({
                            content     : '........'
                        }),
                        route = [ ],
                        geo = Ext.create('Ext.util.Geolocation', {
                            frequency         : 3000,
                            autoUpdate        : true,
                            allowHighAccuracy : true,
                            listeners         : {
                                locationupdate : function(geo) {
                                    polyline = new google.maps.Polyline({
                                        path : route,
                                        strokeColor: "red",
                                        strokeOpacity: 1.0,
                                        strokeWeight: 5
                                    });
                                    polyline.setMap(map),

                                    //alert(route);
                                    route.push( new google.maps.LatLng( geo.getLatitude(),geo.getLongitude() ) );

                                    marker.setPosition(new google.maps.LatLng( geo.getLatitude(),geo.getLongitude() ) );

                                    google.maps.event.addListener(marker, 'click', function() {
                                         infowindow.open(map, marker);
                                    });

                                },
                                locationerror: function(geo, bTimeout, bPermissionDenied, bLocationUnavailable, message) {
                                    if(bTimeout){
                                        alert('Timeout occurred.');
                                    } else {
                                        alert('Error occurred.');
                                    }
                                }
                            } 
                        });
                        geo.updateLocation();
                    }                   
                } 
            } ]
        }]
    });
} 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T10:42:48.230

我用一个设置为假的全局变量解决了这个问题，当我按下开始按钮时，变量变为真。在函数中，我有一个 if(true) {do location update}，当变量设置为 false 时，位置更新不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T21:48:55.820

寻找 setAutoUpdate() 方法？- [http://docs.sencha.com/touch/2-1/#!/api/Ext.util.Geolocation-method-setAutoUpdate](http://docs.sencha.com/touch/2-1/#!/api/Ext.util.Geolocation-method-setAutoUpdate)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-11T04:33:42.107

您需要某种类型的侦听器来触发事件。

添加带有[按钮的](http://docs.sencha.com/touch/2.2.1/#!/api/Ext.Button)[工具栏](http://docs.sencha.com/touch/2.2.1/#!/api/Ext.Toolbar)（注意“处理程序”配置）或为来自 google.maps.Map 的事件添加侦听器（请参阅[getMap(0](http://docs.sencha.com/touch/2.2.1/#!/api/Ext.Map-method-getMap)获取该对象，[this](http://docs.sencha.com/touch/2.2.1/#!/api/Ext.Button)添加侦听器）。

但是，您决定这样做，在处理函数中为地图执行[Ext.ComponentQuery('map')](http://docs.sencha.com/touch/2.2.1/#!/api/Ext.ComponentQuery)并调用[setUserCurrentLocation(false)](http://docs.sencha.com/touch/2.2.1/#!/api/Ext.Map-method-setUseCurrentLocation)。

希望这可以帮助。

# javascript - Rails Gem 客户端验证 html 结构

> ID：10053144
> 
> 赞同：0
> 
> 时间：2012-04-07T08:54:42.047
> 
> 标签：javascript, ruby-on-rails-3, rubygems, gem, client-side

我的项目使用 Twitter Bootstrap CSS 框架，所以我的 html 是这样的。

```
<div class="control-group ">
  <label class="control-label" for="user_name">Username</label> 
  <div class="controls">
    <input data-validate="true" id="user_name" name="user[name]" size="30" type="text">
  </div>
</div> 
```

当验证失败时，客户端验证将其更改为：

```
<div class="control-group ">
  <div class="field_with_errors">
    <label class="control-label" for="user_name">Username</label>
  </div> 
  <div class="controls">
    <div class="field_with_errors">
      <input data-validate="true" id="user_name" name="user[name]" size="30" type="text">
      <label for="user_name" class="message">Please input Username</label>
    </div>
  </div>
</div> 
```

但我想使用 Bootstrap 表单验证 Css： html 是：

```
<div class="control-group error">
   <label class="control-label" for="inputError">Input with error</label>
   <div class="controls">
      <input type="text" id="inputError">
         <span class="help-inline">Please correct the error</span>
      </div>
   </div>
</div> 
```

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T06:09:11.403

试试这个宝石：[实时验证](http://rubygems.org/gems/realtime-validations)

# ruby - 如何避免在使用 javascript 抓取网页期间启动 firefox gui

> ID：10053150
> 
> 赞同：1
> 
> 时间：2012-04-07T08:55:28.383
> 
> 标签：ruby, web-scraping, firefox, watir

我正在尝试使用大量 javascript 抓取网页。在 pguardiano 的帮助下，我在 ruby​​ 中有这段代码。

```
 require 'rubygems'
 require 'watir-webdriver'
 require 'csv'
 @browser = Watir::Browser.new
 @browser.goto 'http://www.oddsportal.com/matches/soccer/'
 CSV.open('out.csv', 'w') do |out|
 @browser.trs(:class => /deactivate/).each do |tr|
    out << tr.tds.map(&:text)
 end
 end 
```

抓取是在后台递归完成的，睡眠时间约为 1 小时。我没有 ruby​​ 的经验，尤其是网页抓取，所以我有几个问题。

1.  每次打开一个新的 firefox 会话并消耗大量 cpu 和 ram 时，我怎样才能避免这种情况？

2.  是否可以在不使用他的 GUI 的情况下使用 firefox 引擎？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T16:30:56.013

您可以尝试[无头](http://watirwebdriver.com/headless/)选项。

```
require 'watir-webdriver'
require 'headless'
headless = Headless.new
headless.start
b = Watir::Browser.start 'www.google.com'
puts b.title
b.close
headless.destroy 
```

另一种方法是使用[selenium 服务器](http://seleniumhq.org/docs/03_webdriver.html)。第三种选择是使用像[Kapow](http://kapowsoftware.com/resources/index.php)这样的刮刀。

# java-me - J2ME 中的异常

> ID：10053153
> 
> 赞同：2
> 
> 时间：2012-04-07T08:56:09.943
> 
> 标签：java-me

我正在使用 j2me 开发一个移动应用程序。我正在使用 kxml 解析器。在我的应用程序中，我必须调用一个 url 来获取数据。当我调用该 url 时，它有时会显示：

```
java.lang.IllegalStateException: update of non-existent node   Exception. 
```

我的示例代码是：

```
 InputStreamReader isr=null;
        InputStream rssStream=null;
        InputStream is = null;
        HttpConnection conn=null;
        try
        {          
            conn = (HttpConnection)Connector.open(rssUrl);           
            rssStream = conn.openInputStream();---------->I think exception is shown here.         
            isr = new InputStreamReader( rssStream );
            parser.setInput(isr);
            parser.nextTag(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T20:44:11.717

rssUrl 返回的 XML 内容可能格式错误。将内容下载到本地文件并检查。

如果格式错误，您可以更改 url 内容吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T03:02:09.077

最好替换代码

```
 rssStream = conn.openInputStream();---------->I think exception is shown here.         
 isr = new InputStreamReader( rssStream ); 
```

使用以下代码

```
isr = conn.openInputStream(); 
```

那就试试吧。

# postgresql - 是否可以避免在 plpgsql 函数中对复合类型进行显式强制转换？

> ID：10053155
> 
> 赞同：1
> 
> 时间：2012-04-07T08:56:21.410
> 
> 标签：postgresql, plpgsql

我正在开发一个框架，可以在 PostgreSQL 9.1 上为内容存储动态创建表。API 函数之一允许调用者通过指定给定对象（例如，Web 表单）中的所有字段来保存新的内容条目。为了接收一组字段，框架创建了一个复合类型。

考虑以下代码：

```
CREATE SEQUENCE seq_contents MINVALUE 10000;
CREATE TABLE contents (
    content_id      int8        not null,
    is_edited       boolean     not null default false,
    is_published    boolean     not null default false,
    "Input1"        varchar(60),
    "CheckBox1"     int2,
    "TheBox"        varchar(60),
    "Slider1"       varchar(60)
);
CREATE TYPE "contentsType" AS (
    "Input1"        varchar(60),
    "CheckBox1"     int2,
    "TheBox"        varchar(60),
    "Slider1"       varchar(60)
);
CREATE OR REPLACE FUNCTION push(in_all anyelement) RETURNS int8 AS $push$
DECLARE
    _c_id   int8;
BEGIN
    SELECT nextval('seq_contents') INTO _c_id;

    EXECUTE $$INSERT INTO contents
    SELECT a.*, b.*
      FROM (SELECT $1, true, false) AS a,
           (SELECT $2.*) AS b$$ USING _c_id, in_all;

    RETURN _c_id;
END;
$push$ LANGUAGE plpgsql; 
```

现在，为了调用这个函数，我必须添加显式转换，如下所示：

```
SELECT push(('input1',1,'thebox','slider1')::"contentsType"); 
```

有没有办法避免显式转换？因为我希望外部调用者不要处理强制转换，即隐藏 PostgreSQL 函数背后的逻辑。目前我有这样的错误：

```
SELECT push(('input1',1,'thebox','slider1'));
ERROR:  PL/pgSQL functions cannot accept type record
CONTEXT:  compilation of PL/pgSQL function "push" near line 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T14:33:14.180

由于您正在对要插入的表名进行硬编码，并且您需要固定数量和类型的参数，所以我不清楚为什么需要“contentsType”类型。为什么不在函数调用中去掉多余的括号，直接传递四个参数呢？这让一切变得更简单。

```
CREATE OR REPLACE FUNCTION push(
    "Input1"        varchar(60),
    "CheckBox1"     int2,
    "TheBox"        varchar(60),
    "Slider1"       varchar(60)
) RETURNS int8 AS $push$
DECLARE
    _c_id   int8;
BEGIN
    SELECT nextval('seq_contents') INTO _c_id;

    EXECUTE $$INSERT INTO contents
    VALUES ($1, true, false, $2, %3, %4, $5)
      $$ USING _c_id, "Input1", "CheckBox1", "TheBox", "Slider1");

    RETURN _c_id;
END;
$push$ LANGUAGE plpgsql; 
```

这使得调用函数看起来像这样：

```
SELECT push('input1',1,'thebox','slider1'); 
```

如果您希望推广 push() 函数以使其适用于所有表，那么如果您超过了这个问题，您将遇到其他问题。您将无法忘记函数在执行期间需要知道表名的事实。如果您想重载该函数以便可以为每种记录类型提供单独的 push()，则需要以某种方式提供有关记录类型的信息。所以，如果你想做这样的事情，你的问题的简短回答是“不”。

另一方面，您可能会使这比需要的更难。我希望您知道，会自动为每个表创建一个类型，与该表同名。您可能可以利用它来避免显式声明类型并传递与您的表同名的记录 - 对于函数将填充的值具有虚拟条目。我认为您可以制作一个完全通用的推送功能，尽管可能很难克服 plpgsql 中的强类型问题；如果您熟悉它，用 C 编写函数可能会更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T01:31:43.200

您是否考虑过将记录变量作为其**文本表示形式**传递？理论上，每个记录变量都可以使用普通的 CAST 运算符转换为文本。

这是修改后的函数，使其`in_all`具有 text 类型并`"contentsType"`在 USING 子句中转换为：

```
CREATE OR REPLACE FUNCTION push(in_all text) RETURNS int8 AS $push$
DECLARE
    _c_id   int8;
BEGIN
    SELECT nextval('seq_contents') INTO _c_id;

    EXECUTE $$INSERT INTO contents
    SELECT a.*, b.*
      FROM (SELECT $1, true, false) AS a,
           (SELECT $2.*) AS b$$ USING _c_id, in_all::"contentsType";

    RETURN _c_id;
END;
$push$ LANGUAGE plpgsql; 
```

然后可以这样调用（没有显式引用类型）

```
select push( '(input1,1,thebox,slider1)' ); 
```

或类似的（显式记录转换为文本）

```
SELECT push(('input1',1,'thebox','slider1')::"contentsType"::text); 
```

这不仅适用于“contentsType”，还适用于任何其他记录类型，假设该函数能够将其转换回该类型。

同样在 plpgsql 中，我认为这也应该有效：

```
 ret := push(r::text); 
```

当 r 是记录变量时。

# ubuntu - 在 ubuntu 的集群上运行你的程序

> ID：10053156
> 
> 赞同：2
> 
> 时间：2012-04-07T08:56:39.497
> 
> 标签：ubuntu, parallel-processing, fortran, cluster-computing, hpc

我安装了一个用 fortran 编写的编程程序。它使用了诸如 Lapack（线性代数包）之类的包，这些包必须具有 root 权限才能安装。我可以访问我大学中没有安装所需软件包的集群。我可以在我的计算机上编译这个程序，但在集群中运行可执行的 .o 文件吗？

我也有其他计算机连接到网络。你能给我指出一个源/教程，以便我可以使用其他计算机来缩短我的程序执行时间。如果我让我的朋友在他们离开时让他们的电脑开机，我该如何使用它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T12:24:56.740

要在没有 root 权限的情况下轻松构建/安装（科学）软件，请参阅 EasyBuild (http://hpcugent.github.com/easybuild)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-08T19:21:33.920

这个问题有几个变量，但理论上是的，您应该能够在一个系统上编译以在另一个系统上使用，但是确保所有版本匹配并且跨系统兼容可能非常复杂且耗时。

一个更简单的解决方案可能是在您有权访问的集群上的主目录中编译您需要的库。一般来说，学术机构的大多数集群应该有相当多的编译器和库可用。

利用朋友的电脑过夜进行计算在理论上也是可行的，但很大程度上取决于正在运行的代码、计算节点的能力、网络环境和系统资源要求。

# actionscript-3 - AS#3 游戏开发

> ID：10053159
> 
> 赞同：0
> 
> 时间：2012-04-07T08:57:39.400
> 
> 标签：actionscript-3, flash, actionscript, flash-cs5, cs4

一段时间以来，我一直在制作或多或少的小游戏。通常一个级别，这些变得不完整，因为它们有时会惹恼我的废话，我得到一个想法而不是发现它很难实施。始终只是从一个问题运行到下一个问题。

无论如何，我最近的任务是一个等距游戏，比如 simcity 或类似的东西我的问题是我应该学习这些免费库，例如 ISOLIBS 来完成这个任务吗？

我一直犹豫是否要使用扩展库，因为我想创建自己的基础引擎，我想我会有更好的控制和理解。大多数时候，我一直在谷歌页面上发呆，试图想办法构建我的应用。

这更像是一个微不足道的问题，但我在一个微不足道的答案之后，可能会引导我采用更专业的方法，例如其他图书馆或个人的商业意见。请记住，我认为我对编程很有信心，但我根本没有正式的经验，所以这是我的教室。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T10:58:34.393

将一个项目作为一个整体来看，肯定会给你一种前方任务艰巨的感觉。

如果您要从任何项目开始，那么场景是相似的。

所以，这里的 AS3 并没有什么特别之处。但这是我的 2 美分：

*   由于您正在学习，因此甚至不要事先期望项目的商业方面。

*   拿起一个项目并坚持下去。确保永远不要并行启动其他任何东西。

*   不要决定预先使用任何库。

*   将您的项目分成最小的部分，一次只选择一个部分。

*   启动它。只需开始第一个子问题......一个接一个。

*   仅当您至少在理论上解决了问题并且不想花时间编写它时，才决定使用库来解决问题。

也许或者也许你不会从这个游戏中得到一个游戏，但下一次你肯定会。

# asp.net-mvc-3 - 每个请求的 MVC 下拉列表

> ID：10053161
> 
> 赞同：2
> 
> 时间：2012-04-07T08:58:19.647
> 
> 标签：asp.net-mvc-3

我正在使用 MVC 开发一个 Web 应用程序，其中所有页面都有标题部分，由三个下拉列表、一个文本框和一个图像按钮组成。所以无论用户在哪个页面上，他/她都可以从三个下拉列表中选择一个组合，在文本框中输入一些文本，然后点击图像按钮在数据库中搜索。

所以我使用了一个强类型（BaseViewModel）master _Layoutthought，然后在上面添加两个部分视图，一个显示用户信息，另一个显示所有下拉列表、文本框和图像按钮。现在，模型我有每个下拉选项/项目的 3 个模型，然后是一个 BaseViewModel，它将有 3 个属性作为每个模型的列表和 3 个 int 属性来保存选定的项目 ID。并且计划使用这个 baseViewModel 作为所有视图模型的父类，这样我就可以为每个请求和响应完成我的强绑定 _Layout。好的，我不确定我是否清楚地解释了我的要求:(。

所以这是所有型号的代码：

```
 namespace XYZNameSpace.Models
{
    public class ManageCompany
    {
        public long ManageCompanyID { get; set; }

        public string ManageCompanyName { get; set; }
    }
}

    namespace XYZNameSpace.Models
{
    public class SuperCompany
    {
        public long SuperCompanyID { get; set; }

        public string SuperCompanyName { get; set; }
    }
}

    public class User
{
    public long UserID { get; set; }

    public string UserName { get; set; }

    public string UserLoginName { get; set; }

    public string UserLevel { get; set; }

    public int UserLevelId { get; set; }
}

    namespace XYZNameSpace.Models
{
    public class SearchResult
    {
        public string CompanyName { get; set; }

        public string SubCompanyName { get; set; }

        public string UserName { get; set; }
    }
} 
```

视图模型

```
 namespace XYZNameSpace.ViewModels
{
    public class BaseViewModel : User
    {
        public long SelectedManageCompanyID { get; set; }

        public List<SelectListItem> ManageCompanyList { get; set; }

        public string SelectedManageCompanyName { get; set; }

        public long SelectedSuperCompanyID { get; set; }

        public List<SelectListItem> SuperCompanyList { get; set; }

        public string SelectedSuperCompnayName { get; set; }

        public int SelectedSearchOptionID { get; set; }

        public List<SelectListItem> SearchOptionsList { get; set; }

        public string SelectedSearchOptionName { get; set; }

        public string SearchWord { get; set; }
    }

    public class SearchOption
    {
        public int SearchOptionID { get; set; }

        public string SearchOptionName { get; set; }
    }
}

    namespace XYZNameSpace.ViewModels
{
    public class SearchResultsViewModel : BaseViewModel
    {
        public List<SearchResult> ResultsList { get; set; }
    }
} 
```

控制器

```
public class HomeController : Controller
{
    //
    // GET: /Home/

    public ActionResult Home()
    {
        BaseViewModel bVM = new BaseViewModel()
        {
            ManageCompanyList = (new List<ManageCompany>() {
                new ManageCompany()
                {
                    ManageCompanyID = 1,
                    ManageCompanyName = "MC 1"
                },
                                    new ManageCompany()
                {
                    ManageCompanyID = 2,
                    ManageCompanyName = "MC 2"
                },
                                    new ManageCompany()
                {
                    ManageCompanyID = 3,
                    ManageCompanyName = "MC 3"
                },
                                    new ManageCompany()
                {
                    ManageCompanyID = 4,
                    ManageCompanyName = "MC 4"
                },
                                    new ManageCompany()
                {
                    ManageCompanyID = 5,
                    ManageCompanyName = "MC 5"
                }
             }).Select(x => new SelectListItem { Value = x.ManageCompanyID.ToString(), Text = x.ManageCompanyName }).ToList(),
            SuperCompanyList = (new List<SuperCompany>(){
             new SuperCompany(){
                SuperCompanyID=6,
                SuperCompanyName="SC 6"
             },
             new SuperCompany(){
                SuperCompanyID=7,
                SuperCompanyName="SC 7"
             },
             new SuperCompany(){
                SuperCompanyID=8,
                SuperCompanyName="SC 8"
             },
             new SuperCompany(){
                SuperCompanyID=9,
                SuperCompanyName="SC 9"
             },
             new SuperCompany(){
                SuperCompanyID=10,
                SuperCompanyName="SC 10"
             }
             }).Select(y => new SelectListItem { Value = y.SuperCompanyID.ToString(), Text = y.SuperCompanyName }).ToList(),

            SearchOptionsList = (new List<SearchOption>(){
             new SearchOption(){
                SearchOptionID=11,
                SearchOptionName="SO 11"
             },
             new SearchOption(){
                SearchOptionID=12,
                SearchOptionName="SO 12"
             },
             new SearchOption(){
                SearchOptionID=13,
                SearchOptionName="SO 13"
             },
             new SearchOption(){
                SearchOptionID=14,
                SearchOptionName="SO 14"
             },
             new SearchOption(){
                SearchOptionID=15,
                SearchOptionName="SO 15"
             }
             }).Select(y => new SelectListItem { Value = y.SearchOptionID.ToString(), Text = y.SearchOptionName }).ToList()
        };

        return View(bVM);
    }

    [HttpPost]
    public ActionResult Search(BaseViewModel bVM)
    {
        SearchResultsViewModel sRVM = new SearchResultsViewModel();
        sRVM.ResultsList = new List<SearchResult>(){
            new SearchResult()
            {
             CompanyName = bVM.SelectedSuperCompanyID.ToString(),
             SubCompanyName = bVM.SelectedManageCompanyID.ToString(),
             UserName = "Duh"
            }
        };
        return View("SearchResults", sRVM);
    }
} 
```

视图 /Home/Home.cshtml

```
@{
    ViewBag.Title = "Home";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div style="float: left; vertical-align: top;">

</div>
<br /> 
```

/Home/SearchResults.cshtml

```
@model XYZNameSpace.ViewModels.SearchResultsViewModel
<table width="100%">
    <thead>
        <tr>
            <td>
                COMPANY
            </td>
            <td>
                SUB COMPANY
            </td>
            <td>
                USER NAME
            </td>
        </tr>
    </thead>
    <tbody>
        @foreach (XYZNameSpace.Models.SearchResult sr in Model.ResultsList)
        {
            <tr>
                <td>
                    @sr.CompanyName
                </td>
                <td>
                    @sr.SubCompanyName
                </td>
                <td>
                    @sr.UserName
                </td>
            </tr>
        }
    </tbody>
</table> 
```

/Shared/SearchDDLPartialView.cshtml

```
 @model XYZNameSpace.ViewModels.BaseViewModel
<div>
    <div style="float: left">
        <span class="Label">Search: </span>
        @using (Html.BeginForm("Search", "Home", FormMethod.Post))
        {
            @Html.DropDownListFor(x => x.SelectedSuperCompanyID, Model.SuperCompanyList)
            @Html.DropDownListFor(x => x.SelectedManageCompanyID, Model.ManageCompanyList)
            @Html.DropDownListFor(x => x.SelectedSearchOptionID, Model.SearchOptionsList)
            <input type="image" src="../../Content/images/search.gif" />

        }
    </div>
</div> 
```

/Shared/_Layout.cshtml

```
@model XYZNameSpace.ViewModels.BaseViewModel
<!DOCTYPE html>
<html>
<head>
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/BEClientProfile.css")" rel="Stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
</head>
<body>
    <table>
        <tr>
            <td>
                <img src="../../Content/images/logo124.gif" alt="Logo" />
            </td>
            <td valign="top">
                <div style="float: left; vertical-align: top; text-align: left">
                    <img src="../../Content/images/user-info.gif" alt="User Infor" />
                    <span class="Label">Welcome </span><span class="HeaderLabelText">@Model.UserLevel</span>
                </div>
                <div>
                    <div style="float: left; width: 100%;">
                        <u><span class="Label">Currently Editing:</span> </u>
                    </div>
                    <div style="float: left; width: 100%;">
                        <span class="Label">Company:</span> <span class="HeaderLabelText">@Model.SelectedManageCompanyID</span>
                    </div>
                    <div style="float: left; width: 100%;">
                        <span class="Label">User:</span> <span class="HeaderLabelText">@Model.UserLoginName</span>
                    </div>
                </div>
            </td>
            <td>
            </td>
            <td>
                @{Html.RenderPartial("SearchDDLPartialViews", Model);}
            </td>
        </tr>
        <tr>
            <td colspan="4">
                @RenderBody()
            </td>
        </tr>
    </table>
</body>
</html> 
```

/Shared/UserPartialView.cshtml

```
@model XYZNameSpace.Models.User
<div style="float: left; margin-left: .5em;">
    <img src="../../Content/images/user-info.gif" alt="User Infor" />
    <span style="font-weight: bold; float: left;">Welcome </span>
</div> 
```

好的，我能够从每个下拉列表中选择一个项目，但是当我在主页控件中的搜索操作中单击图像按钮时，BaseViewModel 除了 selectedIDs 之外什么都没有，所以当操作试图显示 SearchResults 视图时，它们会通过 _Layout.cshtml错误说下拉列表使用的列表中没有任何内容。

那么我们如何为每个请求保留这些信息......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T02:48:40.233

快速解决方案是将 List < SelectListItem > 或视图模型本身存储在会话中，并在每次返回视图模型时将它们重新引入视图。但是，对于基于云的解决方案，概念相同，但您需要使用其他缓存存储，例如 appfabric、memcache 或 PaaS 允许的其他插件。

# javascript - 意外令牌错误：在书签中

> ID：10053167
> 
> 赞同：2
> 
> 时间：2012-04-07T08:59:24.373
> 
> 标签：javascript, bookmarklet

这个想法是写一个简单的书签。如果问题可能重复，请指出我，因为我没有成功找到。

我正在尝试使用书签启用当前页面 jquery 并使用某些 jquery api。

> Uncaught SyntaxError: Unexpected token ILLEGAL

上面是我使用下面的示例小书签时遇到的错误

```
javascript:(function(){
 var d=document.createElement('script');
 d.setAttribute('src', 'http://code.jquery.com/jquery-latest.js');
 document.head.appendChild(d);
 $('a').each(function(){
  alert( $(this).attr('src') );
 });
})() 
```

如果我在控制台中逐行执行相同的代码，它就可以工作。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T09:26:57.830

要使页面等待 jQuery 完全加载，请向`script`元素添加加载处理程序。这在我的浏览器中有效：

```
javascript:(function(){
 var d=document.createElement('script');
 d.src = 'http://code.jquery.com/jquery-latest.js';
 d.onload = function(){ /* load handler here */
   $('a').each(function(){
     console.log( $(this).attr('href') );
   });
 };
 document.getElementsByTagName('head')[0].appendChild(d);
})() 
```

我稍微更改了您的代码（将`src`属性直接作为属性添加到创建的元素，以更经典的方式`script`检索元素，使用而不是并记录所有链接的属性）。`head``console.log``alert``href`

# .net - 重用 NSpec 规范

> ID：10053168
> 
> 赞同：1
> 
> 时间：2012-04-07T08:59:33.417
> 
> 标签：.net, bdd, nspec

我最近开始使用 NSpec，现在我不确定如何扩展它。

重用规范 ( ) 的最佳方式是什么`it["something"] = () => {};`？

假设我有一个接口`IMyService`和 2 个实现它的类：`Service1`和`Service2`.

现在我想编写适用于`IMyservice`级别的规范，并针对我的 2 个实现类运行它们。

也许我在这里遗漏了一些东西，但我可以找到一种简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T14:22:29.507

您可以使用抽象类来重用规范。这是一个例子：

```
/*
Output:

describe Service1
  it should do this
  it should also do this
  specify something unique to service1    
describe Service2
  it should do this
  it should also do this
  specify something unique to service2
*/

abstract class some_shared_spec : nspec
{
    public IMyservice service;

    void it_should_do_this()
    {

    }

    void it_should_also_do_this()
    {

    }
}

class describe_Service1 : some_shared_spec 
{
    void before_each()
    {
        service = new Service1();
    }

    void specify_something_unique_to_service1()
    {
    }
}

class describe_Service2 : some_shared_spec 
{
    void before_each()
    {
        service = new Service2();
    }

    void specify_something_unique_to_service2()
    {
    }
} 
```

# apache - URL 中未编码的百分比

> ID：10053169
> 
> 赞同：0
> 
> 时间：2012-04-07T08:59:33.627
> 
> 标签：apache, url, url-rewriting, urlencode

我有一个 php 脚本，而其他人正在为它生成 URL-s。

而且那个人不知道必须对 % 字符进行编码，所以我遇到了 apache 拒绝这些请求的问题。（错误的请求）

所以我的问题是，我如何将像 site.com/search/one two % 这样的 URL 转换为有效的 site.com/search/one two %25

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T09:08:33.827

像这样的东西可能会有所帮助？

```
preg_replace('/%(\D)/', '%25$1'); 
```

这应该用编码版本替换 % 后跟除数字之外的任何内容。

我稍后会编辑这篇文章，使其仅在 % 之后没有两个数字时才排除，但这可能会给出一个想法。

# python - 使用 Django 作为 openlayer UI 的地图源

> ID：10053174
> 
> 赞同：2
> 
> 时间：2012-04-07T09:00:09.927
> 
> 标签：python, django, openlayers, openstreetmap, geodjango

我正在考虑创建一个显示城市地图的 Web 应用程序（来自 openstreetmaps 数据）。我想在顶部创建一个代表标记的图层。我预计我将拥有一个包含大量标记的数据库，这些标记将作为图层显示在地图上。我遇到过openstreetmap、openlayers、geodjango等，但我无法弄清楚如何将所有这些组合在一起来解决我的问题。我很喜欢使用 Django 和 Python。有人可以帮我理解以下内容：

1.  如何使用 Django 在我自己的服务器上托管 OSM 数据并充当 openlayers 的 Mapserver（或地图源）？
2.  如何让 openlayer 与该服务器对话以渲染地图或叠加层？

如果我的问题的某些部分没有意义，我很抱歉；这是因为我目前对这些组件的理解非常模糊。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T18:59:36.387

在坐标处显示标记是容易的部分。更难的部分是托管您自己的底图。这是我认为你可以做到的一种方法：

1.  获取您感兴趣的区域的 OpenStreetMap 数据。
2.  为您的地图开发样式表，或使用现有的。Mapnik 是一种选择。
3.  使用 Tilecache 以各种比例级别提供地图的缓存图像切片。除了您的 django 应用程序之外，它还必须运行。

另一种选择是使用[Tiledrawer](http://tiledrawer.com/)设置 Amazon EC2 服务器来为您的基本地图提供服务，而无需手动配置所有内容。

Stack Overflow 只让我发布两个链接，所以你必须搜索 Tilecache 和 Mapnik 的网站，但它们很容易找到。

参考：

*   [https://gis.stackexchange.com/questions/10162/how-to-set-up-an-osm-server-with-tilecache-and-mapnik](https://gis.stackexchange.com/questions/10162/how-to-set-up-an-osm-server-with-tilecache-and-mapnik)

# django - 根据与对象列表的 m2m 关系获取模型实例

> ID：10053176
> 
> 赞同：0
> 
> 时间：2012-04-07T09:00:47.147
> 
> 标签：django, many-to-many, django-queryset

鉴于它们应该是与给定标签列表相关的 m2m，如何获取 Filter 的模型实例？

```
class Tag(models.Model):                           
    name=models.CharField(max_length=20)
    details=models.TextField(blank=True)
    parenttag=models.ForeignKey('self',null=True,related_name="childtags")   

class  Filter(models.Model):
    tags=models.ManyToManyField(Tag, related_name='infilters')
    parenttag = models.ForeignKey(Tag, related_name = 'child_filters') 
```

这一定是一个相对简单的问题，但我在谷歌上没有得到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T09:41:18.160

如果您有一个查询集`Tags`并且想要获取`Filter`与它们相关的对象，您可以使用[查询`in`查找](https://docs.djangoproject.com/en/dev/ref/models/querysets/#in)：

```
Filter.objects.filter(tags__id__in=tags.values_list('id')) 
```

# java - Amazon EC2 实例和其他 AWS 服务的性质

> ID：10053177
> 
> 赞同：3
> 
> 时间：2012-04-07T09:01:47.243
> 
> 标签：java, amazon-web-services, cloud, amazon-ami

我有一些关于 AWS EC2 实例或 AMI 的基本（愚蠢）问题。

我创建了一个目录和一些测试文件来检查文件是否在实例停止和启动之后持续存在。

当我即将停止我的 Ubuntu 实例时，我收到以下警告：

> 您确定要停止此实例吗？警告：请注意，实例的临时存储上的任何数据都将在停止时丢失。

但是当我再次启动 Ubuntu 实例时，我的测试目录和文件仍然存在，并且持续存在。这个警告是关于什么的？

如果我可以在此实例上安装 MySQL、GlassFish 服务器等，那么何时需要 Amazon Relational Database Service (RDS)、DynamoDB 和 Storage Gateway？最后提到的这些 AWS 服务是否适用于需要更高可靠性和可扩展性的大型企业，但实际上不适用于不需要太多存储的私人用户？

嗯，我目前的理解是 EC2 实例中的存储是安全的，只要（duh）我不删除它们，并且 RDS 和 Storage Gateway 等中的数据将在实例删除后继续存在。假设只要我完全控制了 EC2 实例的生命周期，我就不必担心。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T09:35:33.090

临时存储是一种特殊的存储，默认情况下是不活动的（在我的实例上）。

# html - 背景图片不显示？

> ID：10053178
> 
> 赞同：0
> 
> 时间：2012-04-07T09:01:52.940
> 
> 标签：html, css, sass, 960.gs

好的，我有以下 html 代码

```
<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="css/reset.css" type="text/css"/>
        <link rel="stylesheet" href="css/style.css" type="text/css"/>
        <title>marriage</title>
</head>
<body>
<div id="container">
    <div id="logo">
        <h1><a href="#">marriage logo</a></h1>
    </div> <!-- end logo -->
    <div id="input">    
        <input type="text" name="search" id="search" />
        <input type="submit" value="search .." />
        <p>search for words like: calm, honest ... etc</p>
    </div> <!-- end input -->
    <div id="questions">    
        <h2>Why our website ?</h2>
        <p>because you find your soulmate as easy as possible, just type the word you looking 
            for in your soulmate and press enter to start searching</p>
    </div> <!-- end questions -->
    <div id="side">
        <p>New User or signup if not</p>
    </div>  <!-- end sidebar -->
    <div id="footer">
        Copyrighted &copy; 2012
    </div> <!-- end footer -->
</div> <!-- end of container -->
    </body> 
    </html> 
```

这是用于样式的 scss 文件，我使用 960 网格系统进行布局

```
@import "compass";
@import "960/grid";

$ninesixty-columns: 12;

html, body {

  @include background-image(linear-gradient(#fcfad0, #FFF));
  width: 100%;
  height: 100%;
 }

#container {

@include grid_container;

#logo {
    @include grid(6);
    // @include clearfix;
    h1 {
        background: url(images/logo.jpg) no-repeat;
        width: 480px;
        height: 250px;
        text-indent: -9999px;

        a {

            text-decoration: none;
        }
    }   
}
  } 
```

标签中的背景图像`<h1>`没有与 html 文件一起显示，我不知道为什么..这里有什么遗漏吗？

```
h1 {
        background: url(images/logo.jpg) no-repeat;
        width: 480px;
        height: 250px;

   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T17:19:22.487

我看到你使用指南针。因此，您已经在配置文件中配置了包含图像（即`images_dir`）的目录。
而不是直接调用你的图像，你应该使用[image-url()](http://compass-style.org/reference/compass/helpers/urls/#image-url)帮助器，像这样（不指定目录图像）：

```
background: image-url(logo.jpg) no-repeat; 
```

另外，如果要隐藏文本，可以使用 mixin [@hide-text](http://compass-style.org/reference/compass/utilities/text/replacement/#mixin-hide-text)。最后，也许[@replace-text-with-dimensions](http://compass-style.org/reference/compass/utilities/text/replacement/#mixin-replace-text-with-dimensions) mixin 是你想要的：

```
h1 {
  @include replace-text-with-dimensions(logo.jpg, 0, 0);
} 
```

但是，我想您想让徽标可点击。在这种情况下，代码将是：

```
<h1 id="logo"><a href="/">marriage logo</a></h1> 
```

和：

```
#logo {
  a {
    @include replace-text-with-dimensions(logo.jpg, 0, 0);
    display: block;
  }
} 
```

# java - 我如何在java中将一个数字四舍五入到6位有效数字？

> ID：10053185
> 
> 赞同：1
> 
> 时间：2012-04-07T09:02:28.160
> 
> 标签：java, numbers, rounding

所以我有这个代码

```
 BigDecimal bd = new BigDecimal(i);
    bd = bd.round(new MathContext(6));
    double meters = bd.doubleValue();
    double km = bd.doubleValue()*0.001;
    double cm = bd.doubleValue()*100;
    double mm = bd.doubleValue()*1000;
    double miles = bd.doubleValue()*0.000621371192;
    double inches = bd.doubleValue()*39.3700787;
    double feet = bd.doubleValue()*3.2808399;
    double yards = bd.doubleValue()*1.0936133;
    double points = bd.doubleValue()*2834.64567; 
```

所以我在这里找到了一个例子，告诉我这样做

```
 BigDecimal bd = new BigDecimal(i);
    bd = bd.round(new MathContext(6));
    double meters = bd.doubleValue(); 
```

这就是我尝试的方法，它以米为单位，但英寸、英尺、码等数字不会四舍五入。我做错了吗？解决这个问题的正确方法是什么？

***编辑***：好的，所以我发现了一些有用的东西，以防其他人遇到问题，而不是使用：

```
double points = bd.doubleValue()*2834.64567; 
```

我这样做了：

```
BigDecimal points = new BigDecimal(i*2834.64567);
points = points.round(new MathContext(6)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T09:17:43.940

您可以使用 BigDecimal；例如：

```
double d = 15.3343243;
        BigDecimal bd = new BigDecimal(d);
        bd = bd.setScale(2, BigDecimal.ROUND_CEILING);
        bd = new BigDecimal(0.001 * bd.doubleValue());
        d = bd.doubleValue();
        System.out.println(d); 
```

或没有 BigDecimal 对象：

```
 System.out.println((double)((int) (d * 1000)) / 1000); 
```

# couchdb - 文档更新前的 CouchDB 附件操作

> ID：10053187
> 
> 赞同：5
> 
> 时间：2012-04-07T09:03:01.440
> 
> 标签：couchdb

我需要转换附加到每个文档的图像（实际上需要将图像缩小到 400px 宽度）。实现这一目标的最佳方法是什么？正在考虑让 nodejs 代码监听 _changes 并对文档保存执行必要的操作。但是，这有很多缺点：a）文档更改并不总是意味着添加了新附件 b）我们必须一直处理已经缩小的图像（至少检查图像宽度）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-07T12:51:59.673

我认为您基本上在数据库中有一些数据，而您的*大部分*问题只是应用程序逻辑和实现。我可以想象一个使用 Drizzle 的应用程序的非常相似的需求列表。无论如何，您的应用程序如何“切入正题”并利用 CouchDB 的优势？

Node.js`_changes`侦听器听起来是一个很好的起点。Node.js 有很多炒作和愚蠢的辩论。但是对于从 CouchDB 接收“待办事项列表”并同时执行该列表，Node.js 是理想的。

## 记忆

我立即认为文档中的图像元数据会对您有所帮助。获取图像并检查它是否为 400 像素可能会很昂贵。如果您可以在文档中指出`"shrunk":true`或`"width":400`或类似的内容，您将立即知道跳过该文档。（这是一种优化，您可以在项目的早期阶段跳过它。）

但是如何使元数据与图像保持同步呢？也许有人稍后会附上一张大图，元数据仍然显示`"shrunk":true`。一个答案是验证功能。`validate_doc_update()`有权检查新旧（候选）文件版本。如果不满足，可以`throw()`异常阻止改变。因此，它可以通过以下几种方式执行您的政策：

*   每次附加新图像时，`"shrunk"`也必须删除密钥
*   *或者，*您的外部 Node.js 工具具有访问 CouchDB 的专用用户名。文档绝不能设置`"shrunk":true`，除非用户是您的工具

另一个值得研究的想法是`"shrunk":true`，您将其设置为图像的 MD5 校验和，而不是设置。（这已经在文档中，在`._attachments`对象中。）因此，如果您的 Node.js 工具看到此文档，它就知道它有工作要做。

```
{ "_id": "a_doc"
, "shrunk": "md5-D2yx50i1wwF37YAtZYhy4Q=="
, "_attachments":
  { "an_image.png":
    { "content_type":"image/png"
    , "revpos": 1
    , "digest": "md5-55LMUZwLfzmiKDySOGNiBg=="
    }
  }
} 
```

换句话说：

```
if(doc.shrunk == doc._attachments["an_image.png"].digest)
  console.log("This doc is fine")
else
  console.log("Uh oh, I need to check %s and maybe shrink the image", doc._id) 
```

## 执行

我有偏见，因为我编写了以下工具。但是我已经成功了，其他人也报告了使用 Node.js 包成功跟随观看`_changes`事件：[https ://github.com/iriscouch/follow](https://github.com/iriscouch/follow)

然后在 CouchDB 文档中使用 Txn 进行 ACID 事务：[https ://github.com/iriscouch/txn](https://github.com/iriscouch/txn)

模式是，

*   `follow()`在 _changes URL 上运行，可能`"include_docs":true`在选项中。
*   对于每个更改，确定它是否需要工作。如果是这样，请执行一个函数来进行必要的更改，并让我们`txn()`负责获取和更新，如果出现临时错误，可能会重试。

例如，Txn 可以帮助您以原子方式调整图像大小并更新元数据，非常容易。

最后，如果您的程序崩溃，您可能会获取大量已处理的文档。这可能没问题（如果您的元数据正常工作）；但是您可能希望偶尔记录一个检查点。记住你看到了哪些变化。

```
var db = "http://localhost:5984/my_db"
var checkpoint = get_the_checkpoint_somehow() // Synchronous, for simplicity

follow({"db":db, "since":checkpoint}, function(er, change) {
  if(change.seq % 100 == 0)
    store_the_checkpoint_somehow(change.seq) // Another synchronous call
}) 
```

## 工作队列

再一次，我很尴尬地指向我自己的所有工具。但是图像处理是工作队列情况的一个典型例子。每个需要工作的文档都放在队列中。一个无限的、有弹性的工人大军收到一份工作，修复文件，并标记工作完成（删除）。

我自己经常使用它，这就是我制作 CQS（CouchDB 队列系统）的原因：[https ://github.com/iriscouch/cqs](https://github.com/iriscouch/cqs)

它适用于 Node.js，与 Amazon SQS 相同，只是它使用您自己的 CouchDB 服务器。如果您已经在使用 CouchDB，那么 CQS 可能会简化您的项目。

# objective-c - 如何从 Open SU RF 的匹配点获取 Pose 矩阵

> ID：10053188
> 
> 赞同：0
> 
> 时间：2012-04-07T09:03:01.703
> 
> 标签：objective-c, ios, computer-vision, 3d, augmented-reality

我想在 iPhone 的 AR 中使用 open SU​​RF 进行识别。匹配源图像和目标图像后，我不知道如何从相机帧中源图像和目标图像的匹配点获取姿势矩阵。喜欢这个博客[http:// /computer-vision-talks.com/2011/02/markerless-augmented-reality-on-iphone/#comment-993](http://computer-vision-talks.com/2011/02/markerless-augmented-reality-on-iphone/#comment-993) 但他没有解释这一点。请任何教程、代码或书籍，以便我了解这个概念。请指导我。提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T04:11:27.247

(^.^)"Hi sorry for my English is not good if someone like correct my redaction I would appreciate this"

Hi @Rehman I'm working with AR right now and I'm using one open source his name is Aurasma [aurasma](http://www.aurasma.com/) is very easy you don`t have to create an additional line of code just create one UIButton and launch the AR viewController is very easy to use. Take a look

# c++ - 我在 GoingNative2012 看到的 operator"" 是什么

> ID：10053192
> 
> 赞同：5
> 
> 时间：2012-04-07T09:05:01.613
> 
> 标签：c++, c++11, operator-keyword

我最近看了 GoingNative2012，当然是关于 C++11。

在 Bjarne Stroustrup 部分，我发现有一个有趣的运算符函数，如下所示。

```
constexpr Value<Second> operator""s(long double d)
{
     return Value<Second>(d);
} 
```

好吧，除了看起来像 C++11 中的新关键字的 constexpr 之外，

我从来不知道“”可以重载吗？

尽管我未能使用 VS 2010 对其进行测试，但这是 C++ 中的新功能之一吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T09:10:57.810

它是一个新的[C++11](http://en.wikipedia.org/wiki/C++11)核心语言特性：[用户定义的文字](http://en.wikipedia.org/wiki/C++11#User-defined_literals)

# iphone - 如何在 iOS 中捕获图像而不显示预览

> ID：10053197
> 
> 赞同：5
> 
> 时间：2012-04-07T09:05:53.370
> 
> 标签：iphone, ios, avfoundation, capture

我想在特定情况下捕获图像，例如按下按钮时；但我不想显示任何视频预览屏幕。我想 captureStillImageAsynchronouslyFromConnection 是我需要在这种情况下使用的。目前，如果我显示视频预览，我可以捕获图像。但是，如果我删除代码以显示预览，应用程序将崩溃并显示以下输出：

> 2012-04-07 11:25:54.898 imCapWOPreview [748:707] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“***-[AVCaptureStillImageOutput captureStillImageAsynchronouslyFromConnection:completionHandler:] - 已通过非活动/无效连接。 ' *** First throw call stack: (0x336ee8bf 0x301e21e5 0x3697c35d 0x34187 0x33648435 0x310949eb 0x310949a7 0x31094985 0x310946f5 0x3109502d 0x3109350f 0x31092f01 0x310794ed 0x31078d2d 0x37db7df3 0x336c2553 0x336c24f5 0x336c1343 0x336444dd 0x336443a5 0x37db6fcd 0x310a7743 0x33887 0x3382c) terminate called throwing an exception(lldb)

所以这是我的实现：

BIDViewController.h：

```
#import <UIKit/UIKit.h>
#import <AVFoundation/AVFoundation.h>

@interface BIDViewController : UIViewController
{
    AVCaptureStillImageOutput *stillImageOutput;
}
@property (strong, nonatomic) IBOutlet UIView *videoPreview;
- (IBAction)doCap:(id)sender;

@end 
```

BIDViewController.m 中的相关人员：

```
#import "BIDViewController.h"

@interface BIDViewController ()

@end

@implementation BIDViewController
@synthesize capturedIm;
@synthesize videoPreview;

- (void)viewDidLoad
{
[super viewDidLoad];
[self setupAVCapture];
}

- (BOOL)setupAVCapture
{
NSError *error = nil;

AVCaptureSession *session = [AVCaptureSession new];
[session setSessionPreset:AVCaptureSessionPresetHigh];

/*
AVCaptureVideoPreviewLayer *captureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];
captureVideoPreviewLayer.frame = self.videoPreview.bounds;
[self.videoPreview.layer addSublayer:captureVideoPreviewLayer];    
 */

// Select a video device, make an input
AVCaptureDevice *backCamera = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:backCamera error:&error];
if (error)
    return NO;
if ([session canAddInput:input])
    [session addInput:input];

// Make a still image output
stillImageOutput = [AVCaptureStillImageOutput new];
NSDictionary *outputSettings = [[NSDictionary alloc] initWithObjectsAndKeys: AVVideoCodecJPEG, AVVideoCodecKey, nil];
[stillImageOutput setOutputSettings:outputSettings];    
if ([session canAddOutput:stillImageOutput])
    [session addOutput:stillImageOutput];

[session startRunning];

return YES;
}

- (IBAction)doCap:(id)sender {
AVCaptureConnection *videoConnection = nil;
for (AVCaptureConnection *connection in stillImageOutput.connections)
{
    for (AVCaptureInputPort *port in [connection inputPorts])
    {
        if ([[port mediaType] isEqual:AVMediaTypeVideo] )
        {
            videoConnection = connection;
            break;
        }
    }
    if (videoConnection) { break; }
}

[stillImageOutput captureStillImageAsynchronouslyFromConnection:videoConnection 
  completionHandler:^(CMSampleBufferRef imageDataSampleBuffer, NSError *__strong error) {
      // Do something with the captured image
  }];

} 
```

使用上面的代码，如果调用了doCap，那么就会发生崩溃。另一方面，如果我在 setupAVCapture 函数中删除以下注释

```
/*
AVCaptureVideoPreviewLayer *captureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];
captureVideoPreviewLayer.frame = self.videoPreview.bounds;
[self.videoPreview.layer addSublayer:captureVideoPreviewLayer];    
 */ 
```

然后它可以正常工作。

总之，我的问题是，如何在受控实例中捕获图像而不显示预览？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-15T06:46:08.947

我使用以下代码从前置摄像头（如果可用）或使用后置摄像头进行捕获。在我的 iPhone 4S 上运行良好。

```
-(void)viewDidLoad{

    AVCaptureSession *session = [[AVCaptureSession alloc] init];
    session.sessionPreset = AVCaptureSessionPresetMedium;

    AVCaptureDevice *device = [self frontFacingCameraIfAvailable];

    NSError *error = nil;
    AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:device error:&error];
    if (!input) {
        // Handle the error appropriately.
        NSLog(@"ERROR: trying to open camera: %@", error);
    }
    [session addInput:input];

//stillImageOutput is a global variable in .h file: "AVCaptureStillImageOutput *stillImageOutput;"
    stillImageOutput = [[AVCaptureStillImageOutput alloc] init];
    NSDictionary *outputSettings = [[NSDictionary alloc] initWithObjectsAndKeys: AVVideoCodecJPEG, AVVideoCodecKey, nil];
    [stillImageOutput setOutputSettings:outputSettings];

    [session addOutput:stillImageOutput];

    [session startRunning];
}

-(AVCaptureDevice *)frontFacingCameraIfAvailable{

    NSArray *videoDevices = [AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo];
    AVCaptureDevice *captureDevice = nil;

    for (AVCaptureDevice *device in videoDevices){

        if (device.position == AVCaptureDevicePositionFront){

            captureDevice = device;
            break;
        }
    }

    //  couldn't find one on the front, so just get the default video device.
    if (!captureDevice){

        captureDevice = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
    }

    return captureDevice;
}

-(IBAction)captureNow{

    AVCaptureConnection *videoConnection = nil;
    for (AVCaptureConnection *connection in stillImageOutput.connections){
        for (AVCaptureInputPort *port in [connection inputPorts]){

            if ([[port mediaType] isEqual:AVMediaTypeVideo]){

                videoConnection = connection;
                break;
            }
        }
        if (videoConnection) { 
           break; 
        }
    }

    NSLog(@"about to request a capture from: %@", stillImageOutput);
    [stillImageOutput captureStillImageAsynchronouslyFromConnection:videoConnection completionHandler: ^(CMSampleBufferRef imageSampleBuffer, NSError *error){

         CFDictionaryRef exifAttachments = CMGetAttachment( imageSampleBuffer, kCGImagePropertyExifDictionary, NULL);
         if (exifAttachments){

            // Do something with the attachments if you want to. 
            NSLog(@"attachements: %@", exifAttachments);
        }
        else
            NSLog(@"no attachments");

        NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageSampleBuffer];
        UIImage *image = [[UIImage alloc] initWithData:imageData];

        self.vImage.image = image;
    }];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-29T12:24:07.123

好吧，我遇到了一个类似的问题，即`captureStillImageAsynchronouslyFromConnection:stillImageConnection`引发了一个异常，即通过`connection`无效。后来，我发现当我`properties`参加会议并`stillImageOutPut`保留价值观时，问题得到了解决。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-17T05:54:32.050

我是一名 JavaScript 开发人员。想为我的跨平台 Javascript 项目创建一个 iOS 原生框架

当我开始这样做时，我遇到了许多不推荐使用的方法和其他运行时错误的问题。

解决所有问题后，以下是符合 iOS 13.5 的答案

该代码可帮助您在没有预览的情况下单击按钮拍照。

你的 .h 文件

```
@interface NoPreviewCameraViewController : UIViewController <AVCapturePhotoCaptureDelegate> {
    AVCaptureSession *captureSession;
    AVCapturePhotoOutput *photoOutput;
    AVCapturePhotoSettings *photoSetting;
    AVCaptureConnection *captureConnection;
    UIImageView *imageView;
}
@end 
```

你的 .m 文件

```
 - (void)viewDidLoad {
    [super viewDidLoad];
    imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height - 140)];
    [self.view addSubview:imageView];
    UIButton *takePicture = [UIButton buttonWithType:UIButtonTypeCustom];
    [takePicture addTarget:self action:@selector(takePicture:) forControlEvents:UIControlEventTouchUpInside];
    [takePicture setTitle:@"Take Picture" forState:UIControlStateNormal];
    takePicture.frame = CGRectMake(40.0, self.view.frame.size.height - 140,  self.view.frame.size.width - 40, 40);
    [self.view addSubview:takePicture];
    [self initCaptureSession];
}

- (void) initCaptureSession {
    captureSession = [[AVCaptureSession alloc] init];
    if([captureSession canSetSessionPreset: AVCaptureSessionPresetPhoto] ) {
        [captureSession setSessionPreset:AVCaptureSessionPresetPhoto];
    }
    AVCaptureDeviceInput *deviceInput = [[AVCaptureDeviceInput alloc] initWithDevice:[AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo] error:nil];
    if ([captureSession canAddInput:deviceInput]) {
        [captureSession addInput:deviceInput];
    }
    photoOutput = [[AVCapturePhotoOutput alloc] init];
    if ([captureSession canAddOutput:photoOutput]) {
        [captureSession addOutput:photoOutput];
    }
    [captureSession startRunning];
}

-(void) setNewPhotoSetting {
    photoSetting = [AVCapturePhotoSettings photoSettingsWithFormat:@{AVVideoCodecKey : AVVideoCodecTypeJPEG}];
    [photoOutput setPhotoSettingsForSceneMonitoring:photoSetting];
}

- (IBAction)takePicture:(id)sender {
    captureConnection = nil;
    [self setNewPhotoSetting];
    for (AVCaptureConnection *connection in photoOutput.connections) {
        for (AVCaptureInputPort *port in [connection inputPorts]) {
            if ([[port mediaType] isEqual: AVMediaTypeVideo]) {
                captureConnection = connection;

                NSLog(@"Value of connection = %@", connection);
                NSLog(@"Value of captureConnection = %@", captureConnection);

                break;
            }
        }
        if (captureConnection) {
            break;
        }
    }
    [photoOutput capturePhotoWithSettings:photoSetting delegate:self];
} 
```

# scala - 如何在 playframework 2.0 上设置 eclipse-ide 工作

> ID：10053201
> 
> 赞同：9
> 
> 时间：2012-04-07T09:06:53.523
> 
> 标签：scala, playframework-2.0

在[Github](https://github.com/playframework/Play20/wiki/BuildingFromSource)上有一个描述如何从头开始构建框架。我想了解某些东西在内部是​​如何工作的，所以我想设置 Eclipse-IDE 以使其尽可能舒适。有没有人描述如何轻松完成？

为了清楚起见，我不想知道如何设置 eclipse 来处理 play-project。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T14:46:33.110

**此解决方案适用于 PLAY 2.0，您不能直接在 2.1 中使用它！至少命令 build-repository 不再有效。**

git clone git://github.com/playframework/Play20.git

添加

```
addSbtPlugin("com.typesafe.sbteclipse" % "sbteclipse-plugin" % "2.0.0") 
```

，`play20/framework/project/plugins.sbt`所以你得到

```
logLevel := Level.Warn

resolvers += Classpaths.typesafeResolver

addSbtPlugin("com.typesafe.sbtscalariform" % "sbtscalariform" % "0.3.0")

addSbtPlugin("com.typesafe.sbteclipse" % "sbteclipse-plugin" % "2.0.0") 
```

然后进行正常的构建过程。

```
$ cd Play20/framework
$ ./build
> build-repository
> eclipse 
```

创建一个 Scala-IDE 给她足够的空间，如果可以，请选择 64 位变体！

导入项目`play20/framework/src`

添加`/Play/target/scala-2.9.1/src_managed/main`为源文件夹。

你最终会得到少于 10 个编译错误:-(，但在 eclipse 中将拥有大部分代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T22:44:29.617

在针对 2.1 快照构建时，Eclipse 会保留 play 2.0.1 的 .ivy2/cache jar，在我的例子中，这就是错误的来源。

解决方案是从 Eclipse 构建路径中删除 play 2.0.1 jar，并添加您构建的 2.1 快照 jar（在 your-play20/repository/local/play/play_2.9.1/2.1-SNAPSHOT/jars 中）

得到一个无错误的 Eclipse + Scala-IDE 设置，很好 ;-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T11:48:56.113

看看 Sbt eclipse 插件。它将为您生成一个 Eclipse 项目。这应该很容易。只需按照插件 git 页面上的说明进行操作即可。问候。简

# php - 强制在公共目录中创建文件？

> ID：10053202
> 
> 赞同：3
> 
> 时间：2012-04-07T09:07:09.907
> 
> 标签：php, security, file-io, filesystems, chmod

这是一个想法。我正在尝试从 PHP 脚本创建文件。文件可以在服务器上的任何公共位置（在公共根目录或其子目录中）创建。归根结底，我想编写这样的函数（它必须在 unix 和 windows 服务器上都可以工作）。

```
function create_file($path, $filename, $content, $overwrite=false) {
  # body
  ...

  } 
```

**参数：**

*   **$path** - 文件路径（空或以 结尾`/`）
*   **$filename** - 任何有效的文件名（需要点+扩展名）
*   **$content** - 文件内容（任何东西）
*   **$overwrite** - 如果设置为**true**，现有文件将被覆盖（默认为**false**）。

**结果：**

函数返回`TRUE`并创建带有内容的文件，或者`FALSE`由于任何原因无法创建文件。

**问题描述：**

我希望这个函数返回并在路径**$path**`true`上创建文件**$filename**，或者如果由于任何原因不可能。此外，如果文件已成功打开以进行写入，则需要将**$content**放入其中。**`false`**

 ****参数**$path**是公共目录的相对路径，**$filename**是任何有效的文件名。当然，如果路径指向**public directory 之外**，我想避免创建文件。可以像这个例子一样从子目录脚本调用函数

```
# php script: /scripts/test.php
create_file('../data/', 'test.info', 'some contents');
# result file: /data/test.info 
```

**到目前为止我尝试了什么？**

我已经尝试使用[fopen()](http://php.net/manual/en/function.fopen.php)和[fwrite()](http://www.php.net/manual/en/function.fwrite.php)函数来执行此操作，并且在某些服务器上有效，而在某些服务器上无效。我想写入权限和[chmod()](http://www.php.net/manual/en/function.chmod.php)存在问题，但老实说，我对 chmod 属性不是很熟悉。我也无法检查**$path**是否指向服务器的公共目录之外。

简而言之，我希望此函数创建文件并`TRUE`在文件不存在或文件存在且`$owerwrite=true`. 否则，什么都不会发生并且函数返回`FALSE`。

另外，我想知道为什么无法在某些路径上创建文件的原因（理论上）。不正确的路径/文件名是我唯一想到的，我相信这个问题还有更多。

在此先感谢您提供任何示例/示例/建议。

## 更新代码

到目前为止，我有这个代码......

```
 function create_file($path, $filename, $content, $overwrite=false) {
    $reldir = explode('/', trim(str_replace('\\', '/', dirname($_SERVER['PHP_SELF'])), '/'));
    $dirdepth = sizeof($reldir);
    $rpadd = $dirdepth > 0 ? '(\.\./){0,' . $dirdepth . '}' : '';
    $ptpath = '#^/?' . $rpadd . '([a-z0-9]\w*/)*$#i';
    $ptname = '/^[a-z]\w*\.[a-z0-9]+$/i'; 
    if ($res = preg_match($ptpath, $path) && preg_match($ptname, $filename)) {
      $res = false;
      if ($overwrite === true || !file_exists($path.$filename)) {
        if ($f = @fopen($path.$filename, 'w')) {
          fwrite($f, $content);
          fclose($f);
          $res = true;
          }
        }
      }
    return $res;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T09:24:52.600

一些建议：

1.  设置 Web 服务器文档根的所有者： chown -R apache:apache /var/www （我想 /var/www 是您的文档根并且 Web 服务器 apache 与用户 apache 一起运行）。像这样设置文档根目录的权限，以便使用权限 755 来查看文档下的所有目录（只有用户 apache 的所有者可以写入文件夹 /var/www 和子文件夹）
2.  阻止指向 /var/www 文档根目录的路径：您遇到了称为[http://en.wikipedia.org/wiki/Directory_traversal_attack](http://en.wikipedia.org/wiki/Directory_traversal_attack)的问题。如果 $path 类似于：/var/www/../../../etc/passwd 呢？Basename php 函数可以帮助您识别这种恶意路径。看这个帖子：[php目录遍历问题](https://stackoverflow.com/questions/6085496/php-directory-traversal-issue)
3.  检查文件是否已经存在：http: [//php.net/manual/en/function.file-exists.php](http://php.net/manual/en/function.file-exists.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T09:59:15.517

php中的所有文件函数在两种情况下都不能正常工作

1.  如果您没有足够的应用程序用户权限，那么

2.  您可能没有正确使用/传递参数/参数。****

# iphone - 如何为一组图像设置动画？

> ID：10053207
> 
> 赞同：0
> 
> 时间：2012-04-07T09:08:20.027
> 
> 标签：iphone

如何为一组图像设置动画，但我有一大组图像，确切地说是 300 个，

```
 Background.animationImages = [NSArray arrayWithObjects:    
                                  [UIImage imageNamed:@"001.jpg"],
                                  [UIImage imageNamed:@"002.jpg"],
                                  [UIImage imageNamed:@"003.jpg"],
                                  [UIImage imageNamed:@"004.jpg"],
                                  [UIImage imageNamed:@"005.jpg"],
                                  [UIImage imageNamed:@"006.jpg"],
                                  [UIImage imageNamed:@"007.jpg"],
                                  [UIImage imageNamed:@"008.jpg"],
                                  [UIImage imageNamed:@"009.jpg"],
                                  [UIImage imageNamed:@"010.jpg"],
                                  nil]; 
```

而且我不想通过打字一直到300，有解决方案吗？我可以为此使用循环吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T09:14:36.723

循环可能看起来像这样

```
NSMutableArray *animationImages = [[NSMutableArray alloc] initWithCapacity:300];

for (int i = 1; i <= 300; i++) {
    NSString *imageName = [NSString stringWithFormat:@"%03d.jpg", i];
    [animationImages addObject:[UIImage imageNamed:imageName]];
}

Background.animationImages = animationImages; 
```

格式说明符`%03d`表示一个用 0 填充的整数，以给出最小字段宽度为 3。

**但**

根据图像的大小，您可能会耗尽内存并终止您的应用程序。

* * *

### 边注

`Background`对于 Objective-C 上的变量来说，这不是一个很好的名称。惯例是变量名以小写字母开头，然后使用驼峰式大小写。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-07T09:13:11.227

```
NSMutableArray *array = [NSMutableArray array];

for (int i = 0; i < 300; i++)
{
    NSString *imgName = [NSString stringWithFormat:@"%03d.jpg", i];
    UIImage *img = [UIImage imageNamed:imgName];
    [array addObject:img];
}

Background.animationImages = array; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T12:20:01.143

使用 GIF 图片播放动画。使用 OpenGLES 播放 GIF 文件是一种很好的做法，我相信这是播放动画的最佳方式。

关注 Git 链接：[https ://github.com/jamesu/glgif](https://github.com/jamesu/glgif)

# java - 不兼容的类型，预期的 hashmap 找到 String

> ID：10053213
> 
> 赞同：0
> 
> 时间：2012-04-07T09:09:30.173
> 
> 标签：java

```
public class Readparam
{
    private static String method_name;
    public static HashMap<String, Vector<String>> getParameters(String file_name)
    {
        HashMap temp_map = new HashMap();

        String current_dir = System.getProperty("user.dir");

        File new_file = new File(current_dir + "\\parameters\\" + file_name);

        StringTokenizer stringtok = null;
        StringBuffer temp_contents = new StringBuffer();

        BufferedReader input = null;
        try
        {
            input = new BufferedReader(new FileReader(new_file));
            String current_line = null;

            while (((current_line = input.readLine()) != null) && (current_line.length() > 0))
            {
                stringtok = new StringTokenizer(current_line, "(");

                method_name = stringtok.nextToken();

                String parsed_parameters = current_line.subSequence(current_line.indexOf("(") + 1, current_line.indexOf(")")).toString();

                StringTokenizer paramtok = new StringTokenizer(parsed_parameters, ",");

                String[] parsed_string = parsed_parameters.split(", ");
                String parsing = method_name + "(";

                for (int i = 0; i < parsed_string.length; i++)
                {
                    String[] temp_parse = parsed_string[i].split(" ");
                    if (i < parsed_string.length - 1)
                    parsing = parsing + temp_parse[0] + ", ";
                else {
                parsing = parsing + temp_parse[0];
                }
            }
                parsing = parsing + ")";

                Vector temp_vector = new Vector();
                for (String s : parsed_string) {
                temp_vector.add(s);
            }
                temp_map.put(parsing, temp_vector);
        }
    }
        catch (FileNotFoundException ex)
        {
        System.out.println("File not found: " + file_name);
        String method_name = null;
        return method_name;
    } 
```

对此有任何帮助，我有最后一行“返回不编译的方法名我收到错误不兼容的类型，预期 java.util.hashmap 发现 java.lang.String 最后一行返回方法名不编译

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T09:24:17.190

您的方法被声明为返回`HashMap<String, Vector<String>>`（这很奇怪 - 通常您会使用`List`而不是`Vector`使用 Java 2 集合）。但是你唯一的返回语句在这里：

```
String method_name = null;
return method_name; 
```

这显然不是返回 a `HashMap<String, Vector<String>>`，是吗？你期望它做什么？你*可以*写

```
return null; 
```

这将返回一个空引用作为`HashMap<String, Vector<String>>`. （就我个人而言，我只是让异常冒泡，但那是另一回事。）

（您还没有显示方法的结尾也无济于事，并且某些缩进显然很奇怪。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T09:26:51.580

```
System.out.println("File not found: " + file_name);
HashMap<String, Vector<String>> method_name = null;
return method_name; 
```

由于您的方法属于某种类型，因此您需要将返回的值“转换”为该类型。

如果您正在使用 Eclipse 进行编码，您只需单击小错误图标，它就会为您修复错误，并为您投射错误。如果您不使用 Eclipse，那么您将来可能会考虑使用它。（NetBeans 以类似的方式工作）

# asp.net-mvc - ASP.NET MVC 模型绑定器失败，字符串看起来像版本号？

> ID：10053214
> 
> 赞同：1
> 
> 时间：2012-04-07T09:09:32.780
> 
> 标签：asp.net-mvc, model-binding, asp.net-mvc-4

这应该是直截了当的，但是在这里 - 我们正在使用 MVC4 处理多部分表单请求，以通过 MVC4 中的强类型视图上传二进制文件和一些元数据。

其中一个字段是文件的版本号（例如**0.0.6**、**0.4.5-pre**等...）

当模型绑定器尝试将此版本号字段绑定到模型字段（字符串类型）时，我从模型绑定器中收到以下错误：

> {“从类型 'System.String' 到类型 'Models.NewFileVersion' 的参数转换失败，因为没有类型转换器可以在这些类型之间进行转换。”}

具体来说，错误可以追溯到我们的“VersionNumber”字段——关于为什么会发生这种情况的任何想法？

**编辑：**下面的源代码

新文件版本.cs

```
public class NewFileVersion
{
    [Display(Name = "Version # (0.67, 0.66-pre, etc...)")]
    [Required]
    public string Version { get; set; }

    [Required]
    [StringLength(2000, ErrorMessage = "ChangeLog must be between 30 an 2000 characters", MinimumLength = 30)]
    [Display(Name = "Version Notes (will be visible to end-users)")]
    [DataType(DataType.MultilineText)]
    public string ChangeLog { get; set; }

    [Display(Name = "Target Platform")]
    [UIHint("Enum")]
    public FileType PlatformTarget { get; set; }
} 
```

新建.cshtml

```
 @model ViewModels.NewFileVersion
@{
    ViewBag.Title = "New";
}
<div class="container" id="main-content">
    <div class="row">
        <h2>
            New</h2>
        @using (Html.BeginForm("Create", "Files", FormMethod.Post, new { enctype = "multipart/form-data" }))
        {
            @Html.ValidationSummary(true)

            <fieldset>
                <legend>NewFileVersion</legend>
                <div class="editor-label">
                    @Html.LabelFor(model => model.Version)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.Version)
                    @Html.ValidationMessageFor(model => model.Version)
                </div>
                <div class="editor-label">
                    @Html.LabelFor(model => model.ChangeLog)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.ChangeLog)
                    @Html.ValidationMessageFor(model => model.ChangeLog)
                </div>
                <div class="editor-label">
                    @Html.LabelFor(model => model.PlatformTarget)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.PlatformTarget)
                </div>
                <div class="editor-label">
                    <label for="">
                        File:</label></div>
                <div class="editor-field">
                    <input type="file" name="fileData" required="required" /></div>
                <p>
                    <input type="submit" value="Upload File" />
                </p>
            </fieldset>
        }
        <div>
            @Html.ActionLink("Back to List", "Index")
        </div>
    </div>
</div> 
```

文件控制器.cs

```
 [HttpPost]
    public ActionResult Create(NewFileVersion version, HttpPostedFileBase fileData)
    {
        //if our model is valid
        if(ModelState.IsValid)
        {
            //etc....             
        }

        ModelState.AddModelError("", "Invalid file submission");

        return View("New", version);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T18:10:25.667

尝试`version`为您的操作重命名参数`Create`，例如：

```
public ActionResult Create(NewFileVersion fileVersion, HttpPostedFileBase fileData) { ... } 
```

模型绑定器可能会混淆`string version`模型属性和`NewFileVersion version`操作参数。

* * *

您可以在方法中看到为什么会发生这种情况[`BindModel`](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/150e8b96e806#src%2fSystem.Web.Mvc%2fDefaultModelBinder.cs)，因为模型具有与它尝试绑定为简单类型/模型而不是复杂类型/模型的操作参数名称完全匹配的属性。

# java - 在彼此之间投射子实体

> ID：10053217
> 
> 赞同：1
> 
> 时间：2012-04-07T09:10:16.563
> 
> 标签：java, jpa

我有以下模型：

```
abstract Article {id, name, text}

final NewspaperArticle { printDate } extends Article

final ScientificArticle { quotations, publicationDate } extends Article

final ... { ... } extends Article 
```

我想知道如何在彼此之间实现最终实体的转换，以便设置 Article 超类的公共字段并且不同的字段保持为空。就像是：

```
ScientificArticle scientificArticle = ...;
NewspaperArticle newspaperArticle = new NewspaperArticle();
newspaperArticle.copyOf(scientificArticle); 
```

是否可以投射它或者我将不得不使用反射？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T09:18:49.340

你不能这样做，因为正如你所说，NewspaperArticle 有一些 ScientificArictle 没有的信息（例如字段）。我也不知道你想如何通过反思来实现这一目标。即使你可以，如果你不得不依赖这些东西，那将是糟糕的类设计的标志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T09:30:09.733

简而言之，回答您的问题：不，您不能将对象投射到另一个类。您只能转换为对象真实类的超类型。（类也是自身的超类型。）

但是，您可以使用组合而不是继承：

```
interface Article { ArticleData getArticleData(); }

final ArticleData {id, name, text}

final NewspaperArticle { articleData, printDate } implements Article

final ScientificArticle { articleData, quotations, publicationDate } implements Article

final ... { articleData, ... } implements Article 
```

然后，您可以`NewspaperArticle(Article createFrom)`为每个类添加一个构造函数，该构造函数设置文章数据字段并使其他字段为空：

```
class NewspaperArticle {
  ArticleData articleData;
  Date printDate = null;

  NewspaperArticle(Article createFrom) {
    this.articleData = createFrom.getArticleData();
  }
} 
```

您的示例将如下所示：

```
ScientificArticle scientificArticle = ...;
NewspaperArticle newspaperArticle = new NewspaperArticle(scientificArticle); 
```

# mysql - MySQL 订购在骗我

> ID：10053222
> 
> 赞同：1
> 
> 时间：2012-04-07T09:11:01.697
> 
> 标签：mysql, sql-order-by

是的，这是一个非常奇怪的问题，我想知道我将如何简洁地解释它。

我有一个 WP 插件，可以像这样在 mysql 表中记录行：

```
meta_id    post_id    meta_key    meta_value 
65387      605        _likes      9 
```

然后在我的一个页面上，我正在运行查询以选择最喜欢的帖子，即。按 meta_value DESC 排序。现在我在我的网站上注意到，每当帖子达到 10 时，它就不会再出现在顶部并从查询结果中消失。奇怪的。

我去了数据库并（在 PHPMyAdmin 中）按 meta_value 排序，它确实返回了 9 作为最高结果，但没有出现 10 个！？

我认为可能是字段类型（meta_value），这些是设置：

```
#   Column      Type        Collation           Attributes  Null    Default
4   meta_value  longtext    latin1_swedish_ci               Yes     NULL 
```

任何人都可以想到任何可能意味着当值为 10 或更高时 ORDER BY 不起作用！？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T09:17:54.010

如果您无法更改列数据类型，请不要担心......无需这样做

你只需要 `cast`它在`ORDER BY` 子句中的整数值。

用户技巧：

```
ORDER BY meta_value+0; 
```

或者

```
ORDER BY CAST(meta_value as SIGNED); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T09:13:03.037

文本字段不像数字字段那样排序。9 在降序时（用文本术语）比 10 的值更高，因为 10 从 1 开始，它是 1，而不是整数，所以 9 出现在 10 之前。

# c++ - 如何使用 GNU C++ 引用继承类的字段？

> ID：10053223
> 
> 赞同：1
> 
> 时间：2012-04-07T09:11:17.483
> 
> 标签：c++, templates

我是使用 g++ 编译的新手。但是，如果我使用 Visual Studio，则可以使用以下代码。

```
template <typename ValueType>
class ExprBase {
private:
    ExprBase () {}
protected:
    ValueType value;

public:
    explicit ExprBase (const ValueType& v) : value(v) {}

    virtual Value<ValueType> operator () (const map<const char*, ValueType>& values) const {
        return Value<ValueType>(ValueType(), "");
    }
};

template <typename ValueType>
class Const : public ExprBase<ValueType> {
public:
    Const (const ValueType& v) : ExprBase<ValueType>(v) {} 

    virtual Value<ValueType> operator () (const map<const char*, ValueType>& values) const {
        return Value<ValueType>(value, "");
    } 
}; 
```

错误是：“'值'未声明”。我需要纠正什么才能用 g++ 编译？感谢帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T09:13:06.267

你需要使用

```
this->value 
```

或者

```
ExprBase<ValueType>::value 
```

因为在这种情况下 base 是一个依赖类型（而 value 是一个非依赖名称）。Visual Studio 通过编译非标准代码来“帮助”您（这实际上非常无用，因为当您使用 g++ 编译相同的代码时，事情就会中断）。

有关详细信息，请参阅 Vandevoorde 和 Josuttis 的 C++ 模板：完整指南的第 136-8 页。

# validation - 应为“{”，但发现为“(”。块语句必须包含在“{”和“}”中

> ID：10053226
> 
> 赞同：0
> 
> 时间：2012-04-07T09:12:31.757
> 
> 标签：validation, webmatrix

在尝试验证我的表单时，我收到以下错误：期望一个“{”但发现一个“（”。块语句必须包含在“{”和“}”中。您不能在 CSHTML 中使用单语句控制流语句页面。我在这个页面的代码行是：

```
@{
var db= Database.Open("Games");
var sqlQ = "SELECT * FROM Games";
var data = db.Query(sqlQ);   
}
@{
    var fileerrorMessage = "";
    var NameerrorMessage = "";
    var Gamefile = "";
    var GameName = "";
    var isValid = true;
    if (IsPost) {
        if (file.IsEmpty()){
        fileerrorMessage = "Please upload a file.";
        isValid = false;
        }

    else (formName.IsEmpty()){
        NameerrorMessage = "Please give the game a name.";
        isValid = false;
    }

    if (isValid){
    var fileData = Request.Files[0];
    var fileName = Path.GetFileName(fileData.FileName);
    var fileSavePath = Server.MapPath("~/upload/" + fileName);
    fileData.SaveAs(fileSavePath);
    GameName=Request["formName"];
    Gamefile=fileName;
    var SQLINSERT = "INSERT INTO Games (Name, file_path) " + "VALUES (@0, @1)";
    db.Execute(SQLINSERT, GameName, Gamefile);
    Response.Redirect("default.cshtml");
    }

    else
    {
        <p class="message error">Please correct the errors and resubmit the form.</P> 
    }

    }
}
<form action="" method="post" enctype="multipart/form-data">

  <input type="file" name="file" id="file" /><p>
    @if(!fileerrorMessage.IsEmpty()) {
        <label for="file" class="validation-error">
            @fileerrorMessage
        </label>
    }
  <p><input type="text" name="formName" value="@GameName" />
     @if(!NameerrorMessage.IsEmpty()) {
        <label for="file" class="validation-error">
            @NameerrorMessage
        </label>
     }

  <input type="submit" value="Add Game" />
</form> 
```

错误页面显示错误出现在第 18 行，这表明存在问题：`if (file.IsEmpty()){`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T07:28:04.167

我来到这里遇到了类似的问题 - 对我来说问题是：

```
@{
    var stuff = getSomeStuff();

    if (stuff.Whatever)
        doThing();
}
@if (stuff.Condition) {
<button/>
} else {
<a href=""></a>
} 
```

问题是没有 if 语句，即使是上面明显代码块中的第一个语句，也不能在没有花括号的情况下使用。所以上面变成了：

```
@{
    var stuff = getSomeStuff();

    if (stuff.Whatever)
    {
        doThing();
    }
}
@if (stuff.Condition) {
<button/>
} else {
<a href=""></a>
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T09:14:59.527

```
else (formName.IsEmpty()){
    NameerrorMessage = "Please give the game a name.";
    isValid = false; 
```

应该：

```
else if (formName.IsEmpty()){
    NameerrorMessage = "Please give the game a name.";
    isValid = false; 
```

不见了`if`！

# python - @登录python方法调用

> ID：10053234
> 
> 赞同：1
> 
> 时间：2012-04-07T09:13:40.027
> 
> 标签：python, methods

我是 python 新手，在示例中看到了以下代码

```
import functools
...
..

def wrapper(func):
            @functools.wraps(func)
            .... 
```

@ 符号在这里是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T09:18:02.317

这就是[Python 装饰器](http://www.python.org/dev/peps/pep-0318/)的语法——函数或方法可以接受一个对象，比如一个函数、方法或类，并在对象被调用或返回结果时执行某些操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T09:18:14.597

您从示例中遗漏了一个重要部分。可以在[官方`functools.wrap`文档](http://docs.python.org/py3k/library/functools.html#functools.wraps)中找到类似的，如下所示：

```
from functools import wraps
def my_decorator(f):
    @wraps(f)
    def wrapper(*args, **kwds):
        print('Calling decorated function')
        return f(*args, **kwds)
    return wrapper 
```

在此示例中，名称与您的名称有些混淆。在这个`@wraps(f)`是装饰功能`wrapper`（紧随其后的那个）。

有很多关于 Python 装饰器是什么的资料。[这](http://wiki.python.org/moin/PythonDecorators)是其中之一。

# asp.net - 在 GridView (VB .Net) 上编辑和删除文本文件的行

> ID：10053237
> 
> 赞同：1
> 
> 时间：2012-04-07T09:14:47.487
> 
> 标签：asp.net, vb.net, gridview, text-files

我有一个gridview，其中包含从文本文件中读取的每一行的值。我想要做的是，编辑和删除gridview上的选定行。我已经有了显示文本文件每一行的代码：

```
<asp:GridView ID="GVAnnouncement" runat="server" 
  AutoGenerateColumns="True" EmptyDataText="- No file saved -">
  <Columns>
    <asp:TemplateField HeaderText="No.">
      <ItemTemplate>
        <%# Container.DisplayIndex + 1%>
      </ItemTemplate>
    </asp:TemplateField>
  </Columns>
</asp:GridView> 
```

关于背后的代码：

```
'''''Read every row then show it on gridview'''''

' Declarations  
Dim objStreamReader As New StreamReader(Server.MapPath("Announcement.txt"))
Dim arrText As New ArrayList

' Loop through the file and add each line to the ArrayList  
Do While objStreamReader.Peek() >= 0
    arrText.Add(objStreamReader.ReadLine)
Loop

' Close the reader  
objStreamReader.Close()

' Bind the results to the GridView  
GVAnnouncement.DataSource = arrText
GVAnnouncement.DataBind() 
```

我要问的是，如何获取所选行返回的索引并将值填充到文本框然后将其更新到文本文件？非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T09:46:37.857

您可以使用 void `RowDeleted`。我会在标识行的 Datakeys 中存储一些东西。您可以`keys`在其中使用它`RowDeleted`并做任何您想做的事情。像这样：

**ASPX**

```
<asp:GridView ID="GVAnnouncement" DataKeyNames="ID" runat="server" 
onrowdeleted="GVAnnouncement_RowDeleted" ... 
```

**CS**

```
Sub GVAnnouncement_RowDeleted(ByVal sender As Object, ByVal e As GridViewDeletedEventArgs)
   e.Keys("ID")
End Sub 
```

在文件中找到ID并删除该行然后再次绑定网格

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T09:46:51.667

一个建议首先：文件通常不是最好的存储。您可能会考虑改用[dbms](http://www.microsoft.com/sqlserver/en/us/editions/express.aspx)。

如果要编辑/删除文件中的行，可能最简单的方法是再次创建所有行。例如，您可以将索引存储在`HiddenField`.

```
<ItemTemplate>
    <asp:HiddenField runat="server" ID="HiddenIndex" Value="<%# Container.DataItem.Index %>" />
    <asp:Label ID="LblAnnouncement" Text="<%# Container.DataItem.Announcement %>" runat="server"></asp:Label>
</ItemTemplate>

Dim allAnnouncements = IO.File.ReadAllLines(Server.MapPath("Announcement.txt"))
Dim source = allAnnouncements.Select(Function(l, index) New With {.Index = index, .Announcement = l}).ToList

' Bind the results to the GridView  
GVAnnouncement.DataSource = source 
GVAnnouncement.DataBind() 
```

然后您可以通过以下方式编辑/删除它们：

```
Protected Sub GridView1_RowUpdated(ByVal sender As Object, ByVal e As GridViewUpdateEventArgs)  
    Dim grid = DirectCast(sender, GridView)
    Dim index = Int32.Parse(DirectCast(grid.Rows(e.RowIndex).FindControl("HiddenIndex"), HiddenField).Value)
    Dim oldAnnamouncement = e.OldValues(0).ToString
    Dim newAnnouncement = e.NewValues(0).ToString
    If Not oldAnnamouncement.Equals(newAnnouncement) Then
        Dim allAnnouncements = IO.File.ReadAllLines(Server.MapPath("Announcement.txt"))
        allAnnouncements(index) = newAnnouncement
        IO.File.WriteAllLines(Server.MapPath("Announcement.txt"), allAnnouncements)
    End If

    'Reset the edit index.
    GridView1.EditIndex = -1

    'Bind data to the GridView control.
    BindData()
End Sub

Protected Sub GridView1_RowDeleting(sender As Object, e As System.Web.UI.WebControls.GridViewDeleteEventArgs)
    Dim grid = DirectCast(sender, GridView)
    Dim index = Int32.Parse(DirectCast(grid.Rows(e.RowIndex).FindControl("HiddenIndex"), HiddenField).Value)

    Dim allAnnouncements = IO.File.ReadAllLines(Server.MapPath("Announcement.txt"))
    IO.File.WriteAllLines(Server.MapPath("Announcement.txt"), allAnnouncements.Where(Function(l, i) index <> i))

    'Bind data to the GridView control.
    BindData()
End Sub 
```

# php - 如何在 MAGENTO 中设置 CRON 作业？

> ID：10053241
> 
> 赞同：0
> 
> 时间：2012-04-07T09:15:35.313
> 
> 标签：php, magento, import, automation, cron

我想在 Magento中设置一个**CRON 作业。**我的要求-：在我们内置于 Magento 的商店中，**客户、产品和等级价格**以 .csv 文件的形式出现，我们手动导入该文件。

所以现在我们正在读取那个**.csv 文件，这是通过****PHP**放置 Magento 的地方。我们通过 php 获取 csv 文件中的数据并在 Magento 数据库的相关表中插入数据。

因此，为此我制作了外部连接到 Magento db 的 php 文件，并完成了获取和插入数据的必要任务。现在如何设置**CRON 作业**，以便此过程自动进行......我浏览了 Magento 网站，他们提到如何设置 cron 作业？

```
http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/how_to_setup_a_cron_job 
```

但仍然有很多疑问......所以任何人都可以解释我应该如何设置 cron 作业，以便这个示例 php 文件工作以及我们获取和插入客户、产品、定价等的过程变得**自动化**？

**请提供我基本信息。关于如何在 Magento 中为上述场景设置 cron 作业，或者我们可以使用在 PHP 的帮助下创建的 CRON 作业吗？**

```
http://net.tutsplus.com/tutorials/php/managing-cron-jobs-with-php-2/ 
```

如果有人有相同的示例代码，那真的会对我有很大帮助......

请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T09:23:37.483

它与 Magento 无关，它只是另一个 php 脚本。只需设置 cron 以从命令行运行适当的脚本

php /脚本路径/script.php

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T11:48:05.480

在 magento 中设置 cron 可以通过打开 cron 选项卡进行编辑然后指定路径来完成：-

`*/10 * * * * php -q /path/to/magento/cron.php`

它会每 10 分钟运行一次你的 cron。

您也可以检查 magento 管理员并更改所需的内容，例如清除日志等。

`System > Configuration > Advanced > System > Cron (Scheduled Tasks)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-19T11:39:27.547

如果您愿意从服务器上的 PHP 脚本发出 HTTP 请求，[SaturnAPI](https://saturnapi.com/)有一个可能适合您的安全调度解决方案。这是一个 REST API。您发出 HTTP 请求来安排、查看和删除作业。以下是调度作业的示例：

```
curl -X POST \
  https://saturnapi.com/cron/jobs \
    -H saturnapi-access-key:'YOUR_SATURNAPI_ACCESS_KEY' \ 
    -d dateTimeUTC='2015:09:25 14:30' \
    -d dateTimeFormat='YYYY:MM:DD HH:mm' \
    -d callbackURL='https://your.verified.domain.com' \ 
```

时机成熟时，`callbackURL`将收到一个 HTTP POST。这非常简单，无需在您的服务器上安装任何东西。

披露：我在[SaturnAPI工作](https://saturnapi.com/)

# python - Python新手生成随机字符串

> ID：10053243
> 
> 赞同：2
> 
> 时间：2012-04-07T09:15:38.653
> 
> 标签：python, string, random, windmill

我最近开始使用 windmill 和 python 来运行我的 Web 应用程序的自动化测试。这是 windmill 通过记录我的事件自动生成的 python 脚本：

```
# Generated by the windmill services transformer
from windmill.authoring import WindmillTestClient
import string
import random

    def test_recordingSuite0():
        client = WindmillTestClient(__name__)

        client.click(id=u'input-999052296848829736')
        client.type(text=u'btsr65ejdfgdjdfg', id=u'input-999052296848829736')
        client.click(id=u'input-999052296848829736-1')
        client.type(text=u'dfgdbdfgdfgjdfgjd', id=u'input-999052296848829736-1')
        client.click(name=u'_u911175390904082714')
        client.select(option=u'1', name=u'_u911175390904082714')
        client.click(value=u'1')
        client.click(id=u'input-497945674625883994')
        client.type(text=u'dfgbhdfbgxcvbz3@asdfvsevsdf54.com', id=u'input-497945674625883994')
        client.click(name=u'_u969737303932735624')
        client.radio(name=u'_u969737303932735624')
        client.type(text=u'asdg9a7e0g57wn4bgwsdfhsdfhsdfhssdhsd', id=u'input-542327653202413691')
        #client.click(name=u'submit')
        #client.waits.forPageLoad(timeout=u'20000') 
```

我对 python 完全陌生，我现在正在学习一些语法。但是有人可以帮我在各个字段中随机输入文本吗？

例如：第 2 行：在一项测试中我想要

```
client.type(text=u'LAKJSDOGUSDGSDGS', id=u'input-999052296848829736') 
```

在另一个方面：

```
client.type(text=u'908374098afsDGSGS', id=u'input-999052296848829736') 
```

（随机，不同）

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T09:30:13.170

在程序的顶部，导入必要的模块，然后获得要放入随机字符串的字符列表：

```
import string
import random

CANDIDATE_CHARS = string.ascii_letters+string.digits  # lowercase and uppercase letters, and digits 
```

在测试函数中，您创建一个随机的字母数字字符串，如下所示：

```
random_text = u''.join(random.choice(CANDIDATE_CHARS) for _ in range(16))  # 16 random characters
client.type(text=random_text, id=u'input-999052296848829736') 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-07T09:31:48.480

您正在寻找`random`包裹。它有一种`shuffle`方法可以就地打乱列表。

```
import string, random

def get_random_string(length):
    chars = list(string.lowercase+string.digits)
    random.shuffle(chars)

    return "".join(chars[:length])

for i in range(12):
    print get_random_string(10) 
```

string 模块提供了一些方便的字符串，它们是 string.uppercase, string.lowercase, string.digits, ... 您可以使用这些方便或编写自己的字符列表。 `"".join(L)`将列表 L 的所有字母分开，因此您可以在一个字符串中获得字符序列。

在您的情况下，您可以使用：

```
client.type(text=unicode(get_random_string(20)), id=u'input-999052296848829736') 
```

# android - 我如何在我的应用程序中检测它运行的设备是否是 Sony Xperia Play？

> ID：10053244
> 
> 赞同：0
> 
> 时间：2012-04-07T09:15:45.407
> 
> 标签：android, sony

我应该检查 android.os.Build.PRODUCT 或 android.os.Build.DEVICE 的特定值吗？这个值在所有固件版本上都相同吗？
还是有其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T19:00:20.897

以下是全球 Xperia PLAY 的所有型号名称。

Xperia™ PLAY (R800) R800i、R800a、R800x、R800at、Z1i、SO-01D

根据您想要做什么，还有其他方法可以检测它是否是 Xperia PLAY。

如果您希望您的应用程序仅在 Xperia PLAY 上运行，请尝试使用 Google PLAY（以前的 Android Market）开发人员控制台将您的应用程序限制为 Xperia PLAY。

如果您只想在设备为 Xperia PLAY 时从屏幕上移除控件，请尝试检测游戏手柄何时打开。

如果您想使用 DPAD 进行一些导航或其他操作，请尝试检测设备是否具有 DPAD。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T19:09:41.707

检查`android.os.Build.DEVICE`。如果等于`zeus`，则表示您的应用程序正在运行的设备是 Xperia Play。

像这样：

```
boolean isXperiaPlay = android.os.Build.DEVICE.equalsIgnoreCase("zeus"); 
```

更多信息：每部安卓手机都有一个代号，例如is的代号和`nexus s`is`crespo`的代号。这个值为。`nexus one``passion``Xperia Play``Zeus`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-07T09:22:38.903

尝试

```
String PhoneModel = android.os.Build.MODEL 
```

例如，在我的索尼 LT26i 上，它显示“LT26i”

# jquery - jQuery：我的形状在淡出后保持隐藏，但它们不应该

> ID：10053250
> 
> 赞同：0
> 
> 时间：2012-04-07T09:16:39.870
> 
> 标签：jquery, hover, fade

我使用[了本](http://tutorialzine.com/2010/01/halftone-navigation-menu-jquery-css/)教程。现在我想当鼠标没有悬停在菜单上时淡出。那行得通，但是当我再次悬停时它会消失。不幸的是，我不知道 jQuery ;)

很抱歉，我不得不复制整个代码。我注释掉了我的 fadeOut，因为我不认为它会以这种方式工作。我很感激任何帮助。

```
/* Set serviceMode to true to create your own shapes: */
var serviceMode = false;

$(document).ready(function(){
/* This code is executed after the DOM has been completely loaded */

var str=[];
var perRow = 16;

/* Generating the dot divs: */

for(var i=0;i<192;i++)
{
    str.push('<div class="dot" id="d-'+i+'" />');
}

/* Joining the array into a string and adding it to the inner html of the stage div: */

$('#stage').html(str.join(''));

/* Using the hover method: */

$('nav li a').hover(function(e){

    /* serviceDraw is a cut-out version of the draw function, used for shape editing and composing: */

    if(serviceMode)
        serviceDraw($(this).attr('class'));
    else
        draw($(this).attr('class'));

}, function(e){

/* ----- $(dots).fadeOut('slow', function() {}); ----- */

});

/* Caching the dot divs into a variable for performance: */
dots = $('.dot');

if(serviceMode)
{
    /* If we are in service mode, show borders around the dot divs, add the export link, and listen for clicks: */

    dots.css({
        border:'1px solid black',
        width:dots.eq(0).width()-2,
        height:dots.eq(0).height()-2,
        cursor:'pointer'
    })

    $('<div/>').css({
        position:'absolute',
        bottom:-20,
        right:0
    }).html('<a href="" onclick="outputString();return false;">[Export Shape]</a>').appendTo('#stage');

    dots.click(function(){
        $(this).toggleClass('active');
    });
}

});

var shapes={

/* Each shape is described by an array of points. You can add your own shapes here,
   just don't forget to add a coma after each array, except for the last one */

home:[38,53,54,55,68,69,70,71,72,83,84,85,86,87,88,89,98,99,100,101,102,103,104,105,106,115,116,120,121,131,132,136,137,147,148,152,153,163,164,166,167,168,169,179,180,182,183,184,185],

about:[37,38,52,53,54,55,67,68,71,72,83,88,102,103,104,117,118,133,134,165,166,181,182],

music:[38,39,54,55,56,70,71,72,73,86,89,90,102,118,131,132,133,134,146,147,148,149,150,163,164,165],

links:[40,41,42,51,55,56,57,66,67,70,71,72,82,83,85,86,87,98,99,100,101,102,114,115,116,117,130,131,132,133,134,135,136,137,146,147,148,149,150,151,152],

contact:[34,35,36,37,38,39,40,41,42,43,44,50,51,52,58,59,60,66,68,69,73,74,76,82,85,86,88,89,92,98,102,103,104,108,114,119,124,130,140,146,147,148,149,150,151,152,153,154,155,156],

info:[22,23,38,39,69,70,71,86,87,102,103,118,119,134,135,150,151,166,167,168]
}

var stopCounter = 0;
var dots;

function draw(shape)
{
/* This function draws a shape from the shapes object */

stopCounter++;
var currentCounter = stopCounter;

dots.removeClass('active').css('opacity',0);

$.each(shapes[shape],function(i,j){
    setTimeout(function(){

        /* If a different shape animaton has been started during the showing of the current one, exit the function  */
        if(currentCounter!=stopCounter) return false;

        dots.eq(j).addClass('active').fadeTo('slow',0.4);

        /* The fade animation is scheduled for 10*i millisecond in the future: */
    },10*i);

});
}

function serviceDraw(shape)
{
/* A cut out version of the draw function, used in service mode */

dots.removeClass('active');

$.each(shapes[shape],function(i,j){
    dots.eq(j).addClass('active');
});
}

function outputString()
{
/* Outputs the positions of the active dot divs as a comma-separated string: */

var str=[];
$('.dot.active').each(function(){

    str.push(this.id.replace('d-',''));
})

prompt('Insert this string as an array in the shapes object',str.join(','));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T09:38:20.300

添加此功能这可能会有所帮助

```
$('nav li a').mouseout(function(){
     $(this).removeAttr('class');
}); 
```

已编辑

服务绘制

```
$('nav li a').mouseout(function(){
     dots.removeClass('active').css('opacity',0);
}); 
```

# java - 添加当前日期时间逻辑后无法在java中的数据库中插入数据

> ID：10053252
> 
> 赞同：1
> 
> 时间：2012-04-07T09:17:04.063
> 
> 标签：java, sql, sql-server, database, jsp

我有以下代码

查询是

```
insert into discussions(title,description,usrid,date,uuid,rty,yu,visit) values(?,?,?,?,?,?,?,?) 
```

Java 代码是

```
java.util.Date utilDate=new java.util.Date();
java.sql.Date date=new java.sql.Date(utilDate.getTime());

ps.setString(1,t.getTitle()); //ps is prepared statement object,
ps.setString(2,t.getDescription());
ps.setString(3,t.getUsrID());
ps.setDate(4,date);
ps.setString(5,getUniqueID(usrType));
ps.setLong(6,Long.valueOf(t.getRty())); //t.getRty() is String and parsed to set a Bigint in database
ps.setLong(7,Long.valueOf(t.getyu())); //t.getyu() is String and parsed to set a Bigint in database
ps.setLong(8,Long.valueOf(t.getVisit())); //t.geVisit() is String and parsed to set a Bigint in database 
```

当我添加获取当前日期的代码时，如所有“ps”语句上方所示。代码将 SQLException 作为***com.microsoft.sqlserver.jdbc.SQLServerException：索引 6 超出范围。***

当我将日期作为字符串插入时，它工作正常。但由于排序问题，我需要日期格式的日期。请告诉我怎么了？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T06:37:13.230

查看您用于插入的日期格式`MS SQL`。您似乎正试图以其他格式插入日期，而不是`MS SQL`预期的格式。我没有太多`MS SQL`使用默认日期格式的经验。

检查并以该格式转换您的日期应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T13:24:19.940

当您将 to 转换`java.util.Date`为`java.sql.Date`内部时会发生什么`setDate()`

```
 String date = request.getParameter("date");//get the requested String
Date utilDate = new SimpleDateFormat("yyyy-mm-dd").parse(date);//format using java.util.Date

ps.setDate(4, new java.sql.Date(utilDate.getTime()));//insert 
```

# ruby-on-rails - Rails/Ruby Override to_s 用于数组对象

> ID：10053257
> 
> 赞同：0
> 
> 时间：2012-04-07T09:17:36.777
> 
> 标签：ruby-on-rails, ruby

在我的 Rails 表单中，我使用的是多选标签

代码看起来像

```
 <%= select_tag '[mycontroller][users]', @users, { :multiple => true, :size => 7} %>
  <p><%= submit_tag l(:button_apply)%></p> 
```

在表单提交参数传递是

```
 mycontroller[users][]=79&mycontroller[users][]=80&commit=Apply 
```

现在在我的视图文件中，当我检索参数时，它们被转换为字符串，所以我得到 [79,80] 被转换为“7980”

获取用户参数的代码看起来像

```
users =  params[:mycontroller][:users] unless params[:mycontroller].nil? 
```

*编辑*：

我想问题是“#{}”将数组转换为字符串。甚至 <%= %> 都会调用 to_s

那么如何覆盖它呢？这样 to_​​s 将返回“79,80”而不是“7980”

我错过了什么？请给点意见？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T09:33:22.677

压倒一切`to_s`似乎非常沉重。

您可以遍历单独显示每个元素的数组（如果您为每个元素呈现复杂的内容，通常更具可读性，或者`my_array.join(',')`如果您只想用逗号分隔数组元素，则使用类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T09:35:02.207

尝试调用 array.join(",") 并且 [79,80] 的数组应该变成像 "79,89" 这样的字符串

[Ruby 连接方法](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-join)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T09:43:59.700

我知道 Array.join 返回字符串，所以我试图以自己的方式解决它。这可能不是有效/有效的，但它是一种解决方法。

```
arr = [79,80]
a =arr.inject(0){|op,i| op.to_s + i.to_s + ","}.to_s  
a[1,a.length-2] # "79,80" 
```

# php - jquery 库在外部 php 文件中不起作用

> ID：10053262
> 
> 赞同：-3
> 
> 时间：2012-04-07T09:18:17.937
> 
> 标签：php, jquery, include, load

我有任何页面，并在此（索引）中包含 jquery 库和 css。

现在我有 twitter 的代码，比如加载更多。这行得通，但是当我需要使用 jQuery 删除它时，它不起作用（在我的索引中有另一个代码）。问题是：jquery 库未附加到外部 php 文件中。

我在彩盒中有同样的问题。当我在颜色框中加载 iframe 时，我的索引 jQuery 没有附加到外部文件，所以我将手动 jquery 放到外部文件中！

没有办法只使用jquery原始文件（我的索引）吗？

EX js 加载更多：

```
<script type="text/javascript">
$(function() {
//More Button
$('.more').live("click",function() 
{
var ID = $(this).attr("id");
if(ID)
{
$("#more"+ID).html('<img src="moreajax.gif" />');

$.ajax({
type: "POST",
url: "ajax_more.php",
data: "lastmsg="+ ID, 
cache: false,
success: function(html){
$("ol#updates").append(html);
$("#more"+ID).remove();
}
});
}
else
{
$(".morebox").html('The End');

}

return false;

});
});

</script> 
```

PHP：

```
 <?php
include("config.php");

if(isSet($_POST['lastmsg']))
{
$lastmsg=$_POST['lastmsg'];
$result=mysql_query("select * from messages where msg_id<'$lastmsg' order by msg_id desc limit 9");
$count=mysql_num_rows($result);
while($row=mysql_fetch_array($result))
{
$msg_id=$row['ms_gid'];
$message=$row['message'];
?>

<li>
<?php echo $message; ?>
</li>

<?php
}

?>

<div id="more<?php echo $msg_id; ?>" class="morebox">
<a href="#" id="<?php echo $msg_id; ?>" class="more">more</a>
</div>

<?php
}
?> 
```

HTML：

```
 <head><script type="text/javascript" src="./jquery.min.js"></script></head>
    <div id='container'>
    <ol class="timeline" id="updates">
    <?php
    $sql=mysql_query("select * from messages ORDER BY msg_id DESC LIMIT 9");
    while($row=mysql_fetch_array($sql))
    {
    $msg_id=$row['msg_id'];
    $message=$row['message'];
    ?>
    <li>
    <?php echo $message; ?>
    </li>
    <?php } ?>
    </ol>
    <div id="more<?php echo $msg_id; ?>" class="morebox">
    <a href="#" class="more" id="<?php echo $msg_id; ?>">more</a>
    </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T09:30:54.750

是因为您的 jquery 在文档准备好后加载，然后您调用另一个 php 文件。您应该使用不带 $(document).ready(); 的 jquery 函数；所以你将能够在任何地方使用 jquery 函数。另一个重要的事情是，而不是使用

```
$(function(){
    $('#selector').click(function(){
       'your other code'  

    });
}); 
```

像这样使用

```
function my_function(){
  your code
} 
```

和 html

```
<input type = "text" onclick = 'my_function();'> 
```

希望这会有所帮助。这样您就可以在任何地方调用这些函数。如果您在第一个 php 中调用或加载另一个 php 文件，请确保将其加载到位于第一个 php 文件中的 div 中。

# google-maps - 如何使用 google api 查找地点的类型

> ID：10053267
> 
> 赞同：2
> 
> 时间：2012-04-07T09:20:25.030
> 
> 标签：google-maps, google-places-api

我有一个位置的地址和纬度和经度。我能找到它是哪种类型的地方吗？无论是餐厅、医院等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T09:26:40.103

您可以使用[google places api 的地点搜索方法，该方法](https://developers.google.com/maps/documentation/places/#PlaceSearches)采用位置（纬度/经度）和半径并为您提供`types`喜欢

`"types" : [ "restaurant", "food", "establishment" ],`

结果。

# sql-server - SQL Server 2008 编写 TSQL 在早期版本中运行

> ID：10053268
> 
> 赞同：0
> 
> 时间：2012-04-07T09:20:32.757
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

在 Visual Studio 2010 中，在创建新项目时，我们可能会选择目标版本为 .Net Framework 2.0、.Net Framework 3.0 等。SQL Server 2008 Management Studio 中是否有任何可用的具有相同功能的东西，即创建的 T SQL 命令应该在 SQL Server 2000、SQL Server 2005 等中运行。

例如，在 SQL Server 2008 中，我创建了一个使用`data`数据类型的过程。当我尝试在 SQL Server 2005 中运行它时出现错误。所以我将数据类型更改为`datetime`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T10:20:19.977

您可以使用 SQL Server 2012 Data Tools 执行此操作 - 您可以针对 2005、2008、2012 甚至 Azure，当您使用对目标版本无效的语法时，它会警告您。不过，它不会为您重新编写它——它只是使用指定版本的 SQL 解析器来验证您编写的代码。

SSDT 是免费的：

[http://msdn.microsoft.com/en-us/data/gg427686](http://msdn.microsoft.com/en-us/data/gg427686)

我认为没有任何方法可以在 Management Studio 中模拟此功能，除非您实际针对 2005 实例执行 - 在这种情况下，它会再次告诉您哪里出错了，但它不会修复您的代码.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T09:26:19.267

我不知道“目标”，但是您可以在数据库上设置数据库兼容性级别。虽然这并没有完全隐藏新版本的所有功能，但它会使数据库在大多数情况下表现得“像”旧版本。

# active-directory - 如何通过 LDAP 请求启用或禁用 AD 用户帐户？

> ID：10053269
> 
> 赞同：4
> 
> 时间：2012-04-07T09:20:34.250
> 
> 标签：active-directory, ldap, ldap-query

到目前为止，我能够在 LDAP 中找到用户，但我不知道如何启用或禁用它们。

作为第二个问题，如果我的帐户具有域管理员权限，我将能够从 LDAP 启用或禁用帐户吗？

注意：这是关于在 Windows 2003 上运行的 Microsoft Active Directory。

我知道我可以通过以下方式检查**活跃用途**：

```
(!(useraccountcontrol:1.2.840.113556.1.4.803:=2)) 
```

残疾人使用：

```
(useraccountcontrol:1.2.840.113556.1.4.803:=2) 
```

问题是我如何设置属性，使其不会丢失内部的其他二进制标志。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T20:19:37.103

您需要在这里使用一些逻辑。因此，要禁用用户，请设置禁用位 (2)。所以：

```
const long ADS_UF_ACCOUNTDISABLE = 0x00000002;
long userAccountControl = //currentUacValue
long newUserAccountControl = (userAccountControl | ADS_UF_ACCOUNTDISABLE); 
```

要启用帐户，我们需要清除禁用位：

```
long userAccountControl = //currentUacValue
long newUserAccountControl = (userAccountControl & ~ADS_UF_ACCOUNTDISABLE) 
```

# maven - Maven 模块是否必须是父项目的子目录？

> ID：10053270
> 
> 赞同：7
> 
> 时间：2012-04-07T09:20:44.020
> 
> 标签：maven, module

我一直在研究 Maven 中的多模块项目，我只能找到作为父项目的子目录存在的模块示例。我是否会错误地推断出没有办法在两个 maven 项目之间共享一个模块而不必将其打包并将其部署到存储库？这会让我觉得不必要的麻烦。

例如，假设我正在积极从事两个相关的项目，除了通过我正在研究的 API 桥之外，它们彼此之间不交流，我打算将其用于未来的事情。随着这两个项目的工作进展，这座桥会不断更新。

所以，如果我想利用 Maven 模块来完成这项工作，一个项目 pom.xml 看起来像这样......

```
<groupId>net.syndog</groupId>
<artifactId>myproject</artifactId>
.
.
.
<modules>
    <module>myproject-bridge</module>
</modules> 
```

...另一个看起来像这样...

```
<groupId>net.syndog</groupId>
<artifactId>myotherproject</artifactId>
.
.
.
<modules>
    <module>myproject-bridge</module>
</modules> 
```

假设 Maven 中的模块必须是它们所在项目的子目录，那么 myproject 和 myotherproject 如何同时使用 myproject-bridge 模块？

这甚至可以使用 Maven，还是每次我对其进行调整时都必须打包并将 myproject-bridge 部署到存储库？也许我错了，但这似乎是一个司空见惯的问题，但似乎没有人在谈论它。我对这一切都错了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T11:08:51.327

使用这种依赖项的通常方法是定义一个依赖项，结果如下：

```
<dependency>
  <groupId>net.syndog</groupId>
  <artifactId>xyz-api</artifactId>
  <version>1.0-SNAPSHOT</version>
</dependency> 
```

但是这种方法的结果是你需要一个单独的项目，其中包含这个 api。这可以通过使用 IDE 来简化，该 IDE 通过工作区而不是存储库来解决项目之间的依赖关系。否则，您需要定期执行 mvn install（如果您仅在本地工作）或 mvn deploy（通过存储库管理器）。

另一种解决方案是使用一个真正的多模块项目，如下所示：

```
+-- pom.xml (root)
+-- myproject-bridge
     +--- pom.xml
+-- myproject-a
     +--- pom.xml
+-- myproject-b
     +--- pom.xml 
```

其中 project-a 和 project-b 通过简单的依赖项使用 myproject-bridge。在根目录中，您通过以下方式定义模块（如您所述）

```
<modules>
 <module>myproject-bridge</module>
 <module>myproject-a</module>
 <module>myproject-b</module>
</modules> 
```

在 myproject-a 中，您只需定义

```
<dependency>
  <groupId>net.syndog</groupId>
  <artifactId>xyz-api</artifactId>
  <version>${project.version}</version>
</dependency> 
```

并在 myproject-b 中以同样的方式。您必须知道，使用模块并不一定意味着定义依赖项。这也使您有机会在发布后或作为 SNAPSHOT 使用来自完全不同项目的 myproject-bridge。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-11-01T15:09:51.877

如果我们把这个问题放在标题中，那么问题是这样的：

> Maven 模块是否必须是父项目的子目录？

只要问题是关于 Maven 多模块项目而不是 Maven 继承项目，那么该问题的答案就是“否”。这就是为什么。

正如[matsev](https://stackoverflow.com/a/10054867/180088)上面的回答清楚地表明，“列出的每个模块都是包含该模块的目录的*相对路径**（强调添加）*。” 它不必是子目录，只要它是*从*超级项目（我避免使用术语“父”和“子”以免涉及继承项目的无关概念）到子项目的相对路径即可. 可以通过多种可能依赖于操作系统的方式来满足此约束。例如，您可能包含父目录路径元素 (..) 以遍历子模块目录。或者，您可以使用符号链接。在任何情况下，不，Maven 模块必须是 Maven 多模块项目目录的子目录并不是严格意义上的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-07T13:22:46.677

从[Maven 模式描述符](http://maven.apache.org/maven-v4_0_0.xsd)中的文档：

> 作为该项目的一部分构建的模块（有时称为子项目）。列出的每个模块都是包含该模块的目录的相对路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T11:06:09.600

据我所知，模块必须位于父项目的子目录中。

要共享您的桥接项目，您必须将其部署在您的存储库中，以便其他两个可以依赖它。

如果您正在使用 Eclipse，此解决方法将帮助您。

*   在您的工作区中安装 3 个项目。
*   确保所有项目都声明为 Maven 项目。
*   对于这两个项目，添加 mybridge 作为依赖项。
*   对于这两个项目，右键单击他们的项目，然后选择 Maven --> 启用工作区解析。

因此，Eclipse 会将 mybridge 依赖关系与 Eclipse 工作区中的依赖关系链接起来，而不是读取您的存储库。

每次更改 mybridge 时，其他两个项目都会受到影响。

也许有更好的方法，我不是 Maven 最大的专家。

问候。

# c# - 如何修改 JSON 格式的文件？

> ID：10053280
> 
> 赞同：0
> 
> 时间：2012-04-07T09:22:42.280
> 
> 标签：c#, .net, json

我想要做的是从`Preferences`Google Chrome 浏览器的文件中更改两个值。我现在使用的代码如下

```
[DataContract]
public class Mdata
{
    [DataMember(Name = "homepage")]
    public String homepage { get; private set; }
    [DataMember(Name = "homepage_is_newtabpage")]
    public Boolean isNewTab { get; private set; }
    [DataMember(Name = "keep_everything_synced")]
    public Boolean isSynced { get; private set; }
    public Mdata() { }
    public Mdata(String data)
    {
        homepage = data;
    }
}

public static Mdata FindData(String json)
{
    Mdata deserializedData = new Mdata();
    MemoryStream ms = new MemoryStream(Encoding.UTF8.GetBytes(json));
    DataContractJsonSerializer ser = new DataContractJsonSerializer(deserializedData.GetType());
    deserializedData = ser.ReadObject(ms) as Mdata;
    ms.Close();
    return deserializedData;
}

private void button1_Click(object sender, EventArgs e)
{
    const int LikeWin7 = 6;
    OperatingSystem osInfo = Environment.OSVersion;
    DirectoryInfo strDirectory;
    String path = null, file = null, data;

    if (osInfo.Platform.Equals(System.PlatformID.Win32NT))
        if (osInfo.Version.Major == LikeWin7)
            path = Environment.GetEnvironmentVariable("LocalAppData") +
                @"\Google\Chrome\User Data\Default";
    if (path == null || path.Length == 0)
        throw new ArgumentNullException("Fail. Bad OS.");
    if (!(strDirectory = new DirectoryInfo(path)).Exists)
        throw new DirectoryNotFoundException("Fail. The directory was not fund");
    if (!new FileInfo(file = Directory.GetFiles(strDirectory.FullName, "Preferences*")[0]).Exists)
        throw new FileNotFoundException("Fail. The file was not found.", file);

    Mdata info = FindData(data = System.IO.File.ReadAllText(file));
    Console.WriteLine(info.homepage); // show me http://www.google.com
    Console.WriteLine(info.isNewTab); // prints false
    MessageBox.Show(info.isSynced); // prints true
    } 
```

我现在要做的是将 info.homepage、info.isNewTab 和 info.isSynced 的值更改为其他值，类似于（在首选项文件中）：

```
"homepage": "http://www.myWebsite.com/",
"homepage_is_newtabpage": true,
...
"keep_everything_synced": false, 
```

我试图直接设置这样的新值：

```
 info.homepage = "www.mysite.com";
 info.isNewTab = true;
 info.isSynced = false; 
```

但是没有机会！

如何为上面的三个对象分配新值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T19:16:39.920

您发布的代码有两个问题：

1.  您永远不会将数据写回磁盘。
2.  您只映射了您感兴趣的三个属性。这意味着只有那些会被反序列化。当您更改它们并将其写回磁盘时，只有这些属性将被序列化，因为所有其他数据都没有进入您的数据结构。

您的问题有几种可能的解决方案：

1.  完全映射出`Mdata`结构中的首选项文件。这显然有点痛苦，因为首选项文件非常大。
2.  [这个问题](https://stackoverflow.com/questions/3142495/deserialize-json-into-c-sharp-dynamic-object)的公认答案显示了如何将任意 JSON 对象反序列化到字典中。
3.  根本不要使用 JSON 反序列化。只需打开文件逐行读取并使用正则表达式来匹配您想要的设置。找到一个值时替换该值。并将每一行写回（修改或未修改）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T09:29:35.323

一旦你有了反序列化的对象，就像你在这里所做的那样：

```
Mdata info = FindData(data = System.IO.File.ReadAllText(file)); 
```

将您想要的值分配给这些属性：

```
 info.homepage = "www.mysite.com";
 info.isNewTab = true;
 info.isSynced = false; 
```

然后将对象序列化回文件，覆盖它。**这是缺少的一点**——你永远不会将更改写回磁盘。

```
DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(Mdata));
using(var fs = new FileStream(filePath, FileMode.Create)
{
  ser.WriteObject(fs, info);
} 
```

# python - 整数（[x[，基数]]）。Python文档中函数中的方括号？

> ID：10053286
> 
> 赞同：23
> 
> 时间：2012-04-07T09:24:17.893
> 
> 标签：python, function, brackets

Python文档中函数圆括号内的方括号是什么意思？

例如：

[**帮助**](http://docs.python.org/library/functions.html#help)（ **[***对象***]**）

或者

[**int**](http://docs.python.org/library/functions.html#int) ( **[** *x* **[** ,*基数***]]** )

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-07T09:30:39.407

方括号中的所有内容都是可选的，即您可以省略它。如果方括号包含超过 1 个参数，则不能选择省略哪些参数，必须指定所有参数，或者不指定。
这就是嵌套括号派上用场的地方：

```
int( [ *x* [ ,*基数*]] )
```

例如，在这里，您可以`int()`不使用参数（通过省略整个外括号）或`int(x)`（通过省略内括号）或`int(x, base)`. 但不是`int(base)`（嗯，那只是意味着`int(x)`）。

这不是实际的 Python 语法，只是让文档更清晰的一种方式。Python 3 的文档尽量避免使用这些括号。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-07T09:27:03.813

这些是可选参数。您无需指定它们，但您可能希望将它们用于特定功能。

> 当一个或多个顶级参数具有形参 = 表达式时，该函数被称为具有“默认参数值”。对于具有默认值的参数，可以在调用中省略相应的参数，在这种情况下，将替换参数的默认值。如果一个参数有一个默认值，那么所有后面的参数也必须有一个默认值——这是一个语法限制，没有被语法表达。

[资源](http://docs.python.org/reference/compound_stmts.html#function-definitions)

# java - 使用套接字/多线程（java）的while循环不起作用（仅一次）

> ID：10053287
> 
> 赞同：1
> 
> 时间：2012-04-07T09:24:29.787
> 
> 标签：java, multithreading, sockets, concurrency, while-loop

正如您从 Client 类中看到的那样，如果 while 中断然后（客户端）系统打印一条消息，则永远不会打印此消息。

服务器打印的唯一内容是“fromClient = CLIENT：您刚刚告诉我以下内容...：服务器：您已连接，您的 ID 为 1”

*（参见“ThreadWorker”中的 try 块）*

然而，服务器不显示“已理解”消息（应作为对“101”的响应发送给客户端并且客户端以“已理解”响应），它也不会显示重复写入的客户端响应它应该在循环中包含一个递增的“num”值。

这告诉我线程或套接字出现故障，但我正在 atm 学习它，我真的希望这只是我想念的明显东西，但我花了大约两天时间尝试不同的东西，一些帮助，一些成功更差。

现在我知道有时发布大量代码并不是那么好，但我认为我需要在这里。对不起，如果我不这样做。

想法？谢谢 ：）

（顺便说一句，对不起，如果你已经读过这篇文章，这有点像帖子的残骸，希望我已经对以前的问题进行了分类）

客户

```
import java.io.*;
import java.net.*;

public class Client 
{
    public static void main(String[] args) throws IOException 
    {
        Socket clientSocket = null;
        DataOutputStream os = null;    
        BufferedReader is = null;
        String fromServer = null;

        try 
        {
            clientSocket = new Socket("localhost", 4444);
            os = new DataOutputStream(clientSocket.getOutputStream());
            is = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
        } 
        catch (UnknownHostException e) 
        {
            System.err.println("Don't know about host: localhost.");
            System.exit(1);
        } 
        catch (IOException e) 
        {
            System.err.println("Couldn't get I/O for the connection to: localhost.");
            System.exit(1);
        }    

        while(clientSocket != null && is != null && os != null)
        {
            fromServer = is.readLine();
                if(fromServer.equals("101"))
                {
                    os.writeBytes("Understood" + "\n");
                }
                else
                {
                    os.writeBytes("CLIENT: I was just told the following by you...: " + fromServer + "\n");
                }
        }
        System.out.println("If you're reading this then the while loop (line 30 - 48) has broken");
        os.close();
        is.close();
        clientSocket.close();
    }
} 
```

服务器

```
import java.io.*;
import java.net.*;

public class Server
{
    ServerSocket server = null; 
    Socket service = null;

    public Server()
    {       
        try
        {
            server = new ServerSocket(4444);
        }
        catch(IOException e)
        {
            System.err.println(e + "Could not listen on port 4444");
            System.exit(1);
        }

        System.out.println("Listening for clients on 4444");

        int id = 1;
        boolean b = true;
        while(b = true)
        {
            try
            {
                service = server.accept();

                ThreadWorker tW = new ThreadWorker(service, id);
                new Thread(tW).start();
            }
            catch(IOException e)
            {
                System.err.println("Exception encountered on accept. Ignoring. Stack Trace: ");

                e.printStackTrace();
                System.exit(1);
            }
            id++;
        }
    }

    public static void main(String args[]) throws IOException 
    {
        Server s = new Server();
    }
    } 
```

线工

```
import java.io.*;
import java.net.*;
public class ThreadWorker implements Runnable
{
    protected Socket clientSocket = null;
    protected int id;
    boolean running = true;
    DataOutputStream os = null;
    BufferedReader is = null;
    String fromClient;

    public ThreadWorker(Socket service, int i)
    {
        clientSocket = service;
        id = i;
    }

    public void run()
    {
        try
        {
            os = new DataOutputStream(clientSocket.getOutputStream());
            is = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
            os.writeBytes("Server: you are connected, your ID is " + id + "\n");
            fromClient = is.readLine();
            System.out.println("fromClient = " + fromClient);
            os.writeBytes("101");
            fromClient = is.readLine();
            System.out.println("fromClient = " + fromClient);
            if(fromClient.equals("Understood"))
            {
                System.out.println("please work(line 35 ThreadWorker)");
                while(is != null && os != null && clientSocket != null)//running)
                {
                    int num = 1;
                    os.writeBytes("Hello client, here is a number:" + num + " from thread: " + "\n");
                    fromClient = is.readLine();
                    System.out.println("'Hello client, here is a number: " + num + "' written to connected client with id of " + id + " (line 36 ThreadWorker)");
                    System.out.println(fromClient);
                    num++;
                }
            }
        }
        catch(IOException e)
        {
            System.err.println("Error line 38: " + e);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T09:46:59.410

调试这个，看起来有问题的代码是`os.writeBytes("101");`. 您需要发回`os.writeBytes("101\n");`，否则另一端的 readLine() 将无法继续。

# asp.net - Ninject，在ninject初始化的RegisterServices中注入Membership.Provider

> ID：10053289
> 
> 赞同：3
> 
> 时间：2012-04-07T09:24:40.060
> 
> 标签：asp.net, asp.net-mvc-3, ninject.web.mvc

有人知道如何在 ninject 初始化代码的 RegisterServices 中配置 Membership.Provider 吗？

在我的代码中：

```
 /// <summary>
    /// Load your modules or register your services here!
    /// </summary>
    /// <param name="kernel">The kernel.</param>
    private static void RegisterServices(IKernel kernel)
    {
        // Put additional bindings here
        kernel.Bind<IDatabaseFactory>().To<DatabaseFactory>();
        kernel.Bind<IUnitOfWork>().To<UnitOfWork>();
        kernel.Bind<IUserRepository>().To<UserRepository>();
        kernel.Bind<IRoleRepository>().To<RoleRepository>();
        kernel.Bind<ISecurityService>().To<SecurityService>();
        kernel.Inject(Membership.Provider);
        kernel.Inject(Roles.Provider);
    } 
```

除 kernel.Inject 行外，所有模块均已绑定。我收到错误消息：“在应用程序的预启动初始化阶段无法调用此方法”。

该文件是标准 nuget ninject.mvc 安装的 NinjectWebCommon。我正在尝试创建一个自定义成员资格提供程序并在提供程序中注入服务层（SecurityService）。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T14:24:35.760

我用同样的问题撞到了墙上，我终于在[这里](http://www.planetgeek.ch/2012/02/08/asp-net-provider-injection-with-ninject-3-0-0/)找到了一个相对干净的解决方案。

基本方法是：

1.  `[Inject]`对自定义成员资格提供程序类中的任何依赖项属性使用属性。

2.  创建一个 http 模块以立即解析/注入您的提供程序（Ninject 3 支持注入 HttpModules）。

3.  将方法中的最后两条`inject`语句替换`RegisterServices()`为提供程序和新 HttpModule 的绑定。

    `kernel.Bind<MembershipProvider>().ToMethod(ctx => Membership.Provider);` `kernel.Bind<IHttpModule>().To<ProviderInitializationHttpModule>();`

# android - ScrollView 导致 App 崩溃

> ID：10053291
> 
> 赞同：0
> 
> 时间：2012-04-07T09:24:43.643
> 
> 标签：android, scrollview

我正在测试一些可用的传感器，并在文本视图中显示每个传感器的值。

但是当我将所有文本视图包含在一个滚动视图中时，应用程序崩溃了。

注意：我的 scrollView 已经包含在一个 linearLayout 中

请在 .xml 文件下方找到。

**XML**：

```
<ScrollView
    android:isScrollContainer="true"
    android:scrollbars="vertical"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent">

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical" >

    <TextView
    android:id="@+id/accelerometer"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="    Accelerometer  " />
<TextView
    android:id="@+id/acc_tv01"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="X = " /> 
<TextView
    android:id="@+id/acc_tv01Value"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />
<TextView
    android:id="@+id/acc_tv02"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Y = " />
<TextView
    android:id="@+id/acc_tv02Value"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />
<TextView
    android:id="@+id/acc_tv03"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Z = " />
<TextView
    android:id="@+id/acc_tv03Value"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />
</LinearLayout>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical" >

    <TextView
    android:id="@+id/Orientation"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="    Orientation  " />
<TextView
    android:id="@+id/orient_tv01"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="X = " /> 
<TextView
    android:id="@+id/orient_tv01Value"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />
<TextView
    android:id="@+id/orient_tv02"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Y = " />
<TextView
    android:id="@+id/orient_tv02Value"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />
<TextView
    android:id="@+id/orient_tv03"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Z = " />
<TextView
    android:id="@+id/orient_tv03Value"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />
</LinearLayout>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical" >

    <TextView
    android:id="@+id/Magnetometer"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="    Magnetometer  " />
<TextView
    android:id="@+id/magnet_tv01"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="X = " /> 
<TextView
    android:id="@+id/magnet_tv01Value"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />
<TextView
    android:id="@+id/magnet_tv02"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Y = " />
<TextView
    android:id="@+id/magnet_tv02Value"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />
<TextView
    android:id="@+id/magnet_tv03"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Z = " />
<TextView
    android:id="@+id/magnet_tv03Value"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />
</LinearLayout>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical" >

    <TextView
    android:id="@+id/Gyroscope"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="    Gyroscope  " />
<TextView
    android:id="@+id/gyro_tv01"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="X = " /> 
<TextView
    android:id="@+id/gyro_tv01Value"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />
<TextView
    android:id="@+id/gyro_tv02"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Y = " />
<TextView
    android:id="@+id/gyro_tv02Value"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />
<TextView
    android:id="@+id/gyro_tv03"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Z = " />
<TextView
    android:id="@+id/gyro_tv03Value"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />
</LinearLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T09:39:24.620

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
 android:background="@drawable/background"
android:orientation="vertical"
 >

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="50dip"
android:orientation="horizontal"
android:background="@drawable/navbar" >  

 <TableRow
    android:id="@+id/tableRow1"
    android:layout_width="wrap_content"
    android:layout_height="50dip"
    android:gravity="left">        

 <Button  android:id="@+id/detailback"
 android:layout_width="70dip"
 android:layout_height="39dip"
 android:layout_marginTop="5dip"
 android:layout_marginLeft="5dip"
 android:background="@drawable/back"   
/>       
</TableRow>

</LinearLayout>

     <ScrollView
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:id="@+id/Scroll1"
   >

<LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
 >

<LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_marginTop="20px"
android:layout_height="100px"

android:orientation="horizontal" 
 >

    <ImageView
        android:id="@+id/Dicimage"
        android:layout_width="130px"
        android:layout_height="100px"
        android:padding="1dp"/>

    <TextView 
        android:id="@+id/DictionaryName"
        android:textSize="25px"
        android:textStyle="bold"
        android:gravity="center"
        android:layout_width="250px"
        android:layout_height="100px"
        android:textColor="#FFF"
        />

    <Button
        android:id="@+id/buy"
        android:background="@drawable/buy"
        android:text="Buy"
        android:textSize="20px"
        android:textStyle="bold"
        android:textColor="#FFF"
        android:layout_width="90px"
        android:layout_height="35px"

         />

 </LinearLayout>

    <LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="350px"
android:layout_marginTop="20px"
android:layout_marginLeft="5px"
android:layout_marginRight="5px"
android:background="@drawable/box"
android:orientation="vertical"
 >
    <ScrollView
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/Scroll2"
     android:layout_width="fill_parent"
     android:fillViewport="true"
     android:layout_height="wrap_content"
   >

    <LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="250px"
android:layout_marginTop="20px"
android:orientation="vertical"
 >
    <TextView 
        android:id="@+id/Description"
        android:textColor="#FFF"
        android:text="Description: "
        android:layout_marginLeft="15px"
        android:textSize="20px"
        android:textStyle="bold"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        />

    <TextView 
        android:id="@+id/Description1"
        android:textColor="#FFF"
        android:layout_marginLeft="15px"
        android:textSize="20px"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        />

   </LinearLayout>

     </ScrollView>

    </LinearLayout>

  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_marginTop="20px"
android:gravity="center"
android:layout_height="520px"
android:orientation="horizontal">

   <android.support.v4.view.ViewPager     
         android:layout_width="320px"
         android:layout_height="480px"
         android:id="@+id/myfivepanelpager"   
        />  

  </LinearLayout>

   </LinearLayout>

   </ScrollView>

    </LinearLayout> 
```

在这里我在另一个滚动视图中使用了滚动视图。它工作正常..它可能对你有帮助

# java - 如何从 actionListener 中获取字符串？

> ID：10053297
> 
> 赞同：0
> 
> 时间：2012-04-07T09:25:16.657
> 
> 标签：java

我无法获取我在动作侦听器中指定的字符串的值。

我正在尝试从此操作侦听器访问 UserMessage：

```
public class UpdateButtonListener implements ActionListener
{

    public void actionPerformed(ActionEvent e)
    {    
        String UserMessage;
        UserMessage = MessageTextArea.getText();
        System.out.println("This is your message: " + UserMessage);
    }
} 
```

然后从这个 actionListener 访问它：

```
private class EncodeButtonListener implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {   
        //print Message
        System.out.println("Your Message: " + UserMessage);
    }
} 
```

它们在同一个包中的不同类中。如果需要，我可以添加完整的代码。

谢谢

额外信息：我想要发生的是当我单击“编码”或“解码”按钮时。运行这些按钮的动作侦听器以访问更新按钮上的动作侦听器。我有更新按钮的原因是为了获取用户输入的文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T10:34:18.053

我推荐这个：只需使用 ActionListerns 来调用方法！

```
public ActionPanel() {
    // Actions
    private final Action aEncode = new AbstractAction("Encode") {
        public void actionPerformed(ActionEvent event) {
           encodeMessage();
        }
    }
    private final Action aUpdate = new AbstractAction("Update") {
        public void actionPerformed(ActionEvent event) {
           setMessage(messageTextArea.getText());
        }
    }

    // Buttons
    private final JButton encodeButton= new JButton(aEncode);
    private final JButton updateButton= new JButton(aUpdate);
    private final JTextArea messageTextArea= new JTextArea();

    private String message;

    public ActionPanel() {
        //Create two rows and one column
        setLayout(new GridLayout(2,1));

        //Add border to panel
        setBorder(BorderFactory.createTitledBorder("Excute"));

        //Add button to panel
        add(encodeButton);
        add(updateButton);
        //add(messageTextArea);
    }

    private void encodeMessage() { 
        System.out.println("Your Message: " + message.getMessage());
    }

    private void setMessage(String message) {
       this.message = message;
       System.out.println("This is your message: " + message);
    }

    public String getMessage() {
       retuen this.message;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T09:37:40.683

我认为这是范围的问题。UserMessage 的范围在 actionPerformed 内。

尝试在 actionPerformed 之外声明“String UserMessage”，然后您可以将其公开，在这种情况下，为了访问它，您应该编写“UpdateButtonListener.UserMessage”，或者创建一个返回 UserMessage 值的函数。

# php - 如何在 Codeigniter 中使用分页

> ID：10053298
> 
> 赞同：0
> 
> 时间：2012-04-07T09:25:42.163
> 
> 标签：php, codeigniter, pagination

我已经从 XML 中提取了数百条记录到一个数组变量中。当数组被回显时，它的输出是：

```
array(1) {
  [“photo”]=>
  array(2) {
  [”@attributes”]=>
  array(3) {
    [“baseURL”]=>
    string(36) “http://www.myurl.com/photos/event_name11”
    [“thumbDir”]=>
    string(5) “thumb”
    [“largeDir”]=>
    string(6) “images”
  }
  [“pr”]=>
  array(228) {
    [0]=>
    array(1) {
      [”@attributes”]=>
      array(5) {
      [“w”]=>
      string(3) “650”
      [“h”]=>
      string(3) “433”
      [“p”]=>
      string(10) “194393.JPG”
      [“n”]=>
      string(6) “194393”
      [“d”]=>
      string(0) “”
      }
    }
    [1]=>
    array(1) {
      [”@attributes”]=>
      array(5) {
      [“w”]=>
      string(3) “650”
      [“h”]=>
      string(3) “433”
      [“p”]=>
      string(10) “194394.JPG”
      [“n”]=>
      string(6) “194394”
      [“d”]=>
      string(0) “”
      }
    } 
```

我想在单页中总共显示 15 条记录，每行 5 条。图像的名称和尺寸在：

```
[“pr”]=>
  array(228) { 
```

我曾尝试使用其他 PHP 硬代码，但无法获得所需的结果。它在一个页面中显示所有记录。

如何在 CI 中使用分页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T09:32:21.147

关于什么：

```
$array = ...
$page = 0; // the page number you want to display
$entriesPerPage = 5;

for($i = 0; $i < $entriesPerPage; $i++)
{
    $entry = $array['pr'][$page * $entriesPerPage + $i];
    // output your $entry somehow
} 
```

或者，如果您想获得 3 行 â 5 信息：

```
$array = ...
$page = 0; // the page number you want to display
$entriesPerRow = 5;
$rowsPerPage = 3;

for($i = 0; $i < $rowsPerPage; $i++)
{
    for($j = 0; $j < $entriesPerRow; $j++)
    {
        $entry = $array['pr'][($page * $rowsPerPage + $i) * $entriesPerRow + $j];
        // output your $entry somehow
    }
    // make a new line
} 
```

# c# - 需要帮助理解这种动画精灵的方式

> ID：10053300
> 
> 赞同：0
> 
> 时间：2012-04-07T09:25:45.630
> 
> 标签：c#, xna, sprite

我正在使用“Learning XNA 4.0”这本书

[http://codepaste.net/f6w368](http://codepaste.net/f6w368)是代码

我没有得到的是 currentFrame.X * frameSize.X。看到任何东西如何被 0 = 0 相乘。我认为这是如何工作的唯一其他方式是，当 currentFrame++ 发生时，它变成 1*75 等等。但这对我来说仍然有点模糊，有人可以帮我理解这个吗？

纸张大小为 6 x 8 帧。精灵大小为 75x75。而且我对积分的经验并不完全，所以这让我更加困惑。

编辑：谢谢。我觉得有点愚蠢，因为它有点明显>_>。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T10:18:47.903

我认为这有点太笼统了，但也许这会有所帮助。

动画的左上角是`0,0`，因此第一个精灵将是一个矩形，其左上角为 at `0,0`，其宽度和高度为 75。下一帧将是一个左上角为 at 的矩形，`75,0`依此类推。当您将帧编号乘以帧宽度时，您将获得该帧的精灵的 x 坐标。

这张图片也可能对您有所帮助：

![描写](../Images/7274a3cf2617c4fd895cdbf54c6cffbd.png)

我还建议使用`Vector2`s 而不是`Point`s，它们的工作原理几乎相同，但是它们`Vector2`具有有用的运算符和方法，可以让您以后的生活更轻松。

# php - PHPDoc：是否可以从工厂方法 docblock 中引用对象属性描述？

> ID：10053306
> 
> 赞同：1
> 
> 时间：2012-04-07T09:26:56.027
> 
> 标签：php, phpdoc

如果我使用工厂方法来实例化对象，那么是否可以引用正在实例化的对象的类属性的文档块描述？

我发现自己正在查看类以提醒我为工厂方法提供哪些参数。如果我可以从工厂输出的所有对象中引用所有相关的文档块描述，那会很方便，然后我的 IDE 会在我调用工厂方法时提示我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:17:40.657

对于您描述的场景，我能看到的最佳路径是让所有这些潜在的类实现相同的接口，或者可能从相同的抽象父类扩展。然后，在工厂方法上使用 @return 表示它返回该接口/抽象的对象。这样，IDE 将能够从接口/抽象的代码中读取文档块并向您呈现信息。

# windows-phone-7 - 当我关闭我的模拟器时，Windows Phone 独立存储是永久的吗？

> ID：10053316
> 
> 赞同：2
> 
> 时间：2012-04-07T09:28:55.787
> 
> 标签：windows-phone-7, emulation, isolatedstorage

我在 Windows Phone 应用程序的独立存储中保存了一些文件？当我关闭模拟器并再次启动应用程序时，我的独立存储文件中没有任何内容。我已经在真实设备上阅读过它可以正常工作。有没有办法在模拟器上正常工作？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T09:33:46.703

存储在实际设备上是非易失性的。只要用户允许它持续存在，它就会持续存在。

模拟器的性质（它是在您的计算机上运行的设备的模拟）意味着隔离存储实际上是易失的，因为您每次运行它时都会创建一个新的模拟器实例。

您需要测试什么需要隔离存储才能持久化？您需要在执行测试时保持模拟器运行，或者在首次初始化模拟器时设置隔离存储。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T14:15:38.923

您可以使用此工具[http://wptools.codeplex.com/](http://wptools.codeplex.com/) 将文件添加到易于使用的存储中，当您使用设备时，存储将持续存在，直到应用程序被卸载。

# iphone - 隐藏表格视图中的中间单元格动画

> ID：10053317
> 
> 赞同：2
> 
> 时间：2012-04-07T09:29:26.310
> 
> 标签：iphone, cocoa-touch, uitableview

表格视图中有 3 个单元格。我需要隐藏并显示动画中间单元格。当中间单元格被隐藏时，第三个单元格将向上移动到中间单元格的位置。而当中间的单元格再次显示时，第三个单元格将移动到原来的位置。有什么方法可以实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T09:31:59.243

您可以使用

```
- (void)insertRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation 
```

和

```
- (void)deleteRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation 
```

但您`dataSource`还需要反映在拨打这些电话时所做的更改

```
// delete

NSArray *deleteIndexes = [[NSArray alloc] initWithObjects:[NSIndexPath indexPathForRow:1 inSection:0]];

UITableView *tableView = self.tableView;

[tableView beginUpdates];
[tableView deleteRowsAtIndexPaths:deleteIndexes withRowAnimation:UITableViewRowAnimationFade];
// Any other actions for updating the tableView
[tableView endUpdates]; 
```

# spring - 编写java客户端测试spring mvc multipart请求

> ID：10053318
> 
> 赞同：1
> 
> 时间：2012-04-07T09:29:31.053
> 
> 标签：spring

我编写了一个弹簧控制器来处理多部分请求并上传一个 csv 文件。如何用java编写客户端来测试这个控制器？

我需要调用我已映射到控制器的 url，但我应该在有效负载中发送什么（一个 csv 文件或带有逗号分隔文本的字符串并在标题中发送一个 contentType）。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T09:31:56.377

从命令行使用[curl](http://curl.haxx.se/docs/manpage.html)命令，您不需要编写 java 客户端。

样本

```
curl -F "file=@localfile;filename=nameinpost" www.myhost.com 
```

# asp.net-mvc - 是否可以检测文件是否实际下载

> ID：10053326
> 
> 赞同：3
> 
> 时间：2012-04-07T09:30:51.373
> 
> 标签：asp.net-mvc, fileresult

假设我有一个返回的控制器操作方法`FileResult`。是否可以检测文件是否**实际**完全下载到客户端？

```
public ActionResult GetFile(int id)
{
    DownloadInfo data = provider.GetInfo(id);
    this.provider.MarkDownloadStart(id);

    return File(Server.MapPath(data.Filename), "application/pdf");
} 
```

我确实在调用操作时存储信息，但这仅意味着有人启动了下载。它没有给我任何关于服务器是否下载完成的信息......

我还设置了内容处置标头，因此文件应该永远不会直接在浏览器中打开，而是浏览器要求打开/保存它。这使客户端更容易保存文件...

## 我的想法

我想不可能直接检测到下载确实发生了。但是是否可以通过某种其他方式来做到这一点：

1.  加载一个视图
2.  有`iframe`一个
3.  请求文件和
4.  主视图*监督*客户端上的下载，因为它可以访问，`iframe`因此它可以查看文件是否已完成下载。

尽管上面的场景看起来可行，但我不知道如何实际进行*监督*。也许还有其他更好的方法来完成这项任务。

## 主要问题是

是否可以在服务器上检测到客户端完全完成文件下载并且在下载之间没有取消它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T09:40:28.723

你可以使用cookies。这是[一个例子](http://webcache.googleusercontent.com/search?q=cache%3ahttp://geekswithblogs.net/GruffCode/archive/2010/10/28/detecting-the-file-download-dialog-in-the-browser.aspx&hl=en&strip=1)。以下是该过程中涉及的一些步骤：

1.  在客户端上生成一些唯一的 id。
2.  通过传递此唯一 ID 将请求发送到下载操作。
3.  使用 a`window.setInterval`定期查询 cookie 的存在并检查其值。
4.  如果创建了 cookie 并且其值与唯一 id 之一匹配，则下载完成。

一旦您完成将文件流式传输到响应，在服务器上将 cookie 值设置为唯一 id。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-09-24T08:25:21.620

请访问此网址

[http://odetocode.com/blogs/scott/archive/2010/06/23/checking-client-download-success-with-asp-net-mvc.aspx](http://odetocode.com/blogs/scott/archive/2010/06/23/checking-client-download-success-with-asp-net-mvc.aspx)

希望这对你有帮助

# android - 获取 java.lang.OutOfMemoryError 异常？

> ID：10053331
> 
> 赞同：2
> 
> 时间：2012-04-07T09:31:28.507
> 
> 标签：android, memory

安卓编程新手。出现以下错误。

```
04-07 14:49:05.452: ERROR/AndroidRuntime(1566): FATAL EXCEPTION: main
        java.lang.OutOfMemoryError
        at java.lang.AbstractStringBuilder.enlargeBuffer(AbstractStringBuilder.java:94)
        at java.lang.AbstractStringBuilder.append0(AbstractStringBuilder.java:145)
        at java.lang.StringBuilder.append(StringBuilder.java:216)
        at com.myapp.StartupActivity.onListItemClick(StartupActivity.java:87)
        at android.app.ListActivity$2.onItemClick(ListActivity.java:319)
        at android.widget.AdapterView.performItemClick(AdapterView.java:292)
        at android.widget.AbsListView.performItemClick(AbsListView.java:1058)
        at android.widget.AbsListView$PerformClick.run(AbsListView.java:2514)
        at android.widget.AbsListView$1.run(AbsListView.java:3168)
        at android.os.Handler.handleCallback(Handler.java:605)
        at android.os.Handler.dispatchMessage(Handler.java:92)
        at android.os.Looper.loop(Looper.java:137)
        at android.app.ActivityThread.main(ActivityThread.java:4340)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:511)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
        at dalvik.system.NativeStart.main(Native Method) 
```

使用选项卡布局，并且有三个用于控制选项卡的活动。我想我越过了我的应用程序可用的内存堆。当您离开标签时，有人可以告诉我如何销毁对象吗？以下代码中发生错误。

```
String separator = "|"
String myString = "";
for(String string : Mylist)
{
    myString += myString + string + separator;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T09:33:21.707

试试`String separator = "\\|"` 吧`String separator = "|"`

使用 java 使用管道符号时存在问题，或者您可以使用`Pattern.quote("|")`

**@Qerub** 值得注意的是，仅当表达式字符串编译到您的 java 代码中时，才需要双斜杠。

Java*编译器*需要一个斜线，以便它在表达式 String 对象中存储一个文字斜线。这不是正则表达式所独有的，在类文件中编译的所有 Java 字符串都以这种方式工作。如果您希望在编译的类文件中的字符串中有一个斜杠，请在 Java 源代码中键入两个斜杠。

如果在运行时将正则表达式传递给 Java 程序——通过命令行参数或属性值——则第一个斜杠不是必需的。

正则表达式解析器需要另一个斜杠，以便将管道视为文字字符。表达式解析器不关心字符串是编译到类文件中还是在运行时提供的。

```
Source code: \\|

which compiles to...

Class file: \| 
```

现在被正则表达式解析器读取为...

表达式解析器视为：`|`

虽然我们在 split() 中使用的相同，但它被视为*更改*，这意味着字符串被每个字符分割

源代码：“查询”

`"query".split("|")`给出类似的结果

```
q
u
e
r
y 
```

# silverlight - 在 XNA - Silverlight WP7 混合应用程序中使用 AdDuplex

> ID：10053335
> 
> 赞同：1
> 
> 时间：2012-04-07T09:32:06.117
> 
> 标签：silverlight, windows-phone-7, xaml, xna

可以证明，你们中的大多数人都知道 AdDuplex 可以交叉推广 WP7 应用程序和游戏。该广告引擎提供了两个 SDK，一个用于 XNA 游戏，另一个用于 Silverlight 应用程序。

我有一个 SL-XNA 混合游戏，我找不到让广告在这种环境下工作的方法。我已经能够在 XNA 图形环境中使用 Silverlight UIElementRenderer 呈现广告，但我找不到处理点击它的方法。

这是 XAML 的样子：

```
<Grid Name="root" Margin="0,0,0,7000" Width="480" Height="90" Background="Black" >
    <adduplex:AdControl x:Name="adDuplex" xmlns:adduplex="clr-namespace:AdDuplex;assembly=AdDuplex.AdControl.Silverlight"
        AppId="10675" 
    />
</Grid> 
```

我听说有些人在这样的环境中使用过 adDuplex。关于如何做的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:17:16.680

如果没有看到背后的代码和完整的 XAML，我不能肯定地说，但线索在 Margin="0,0,0,7000" 中。我的猜测是，您正在将 AdDuplex 控件绘制在与其实际位置不同的位置。

如果您正在初始化 UIElementRender 类似这样的东西

```
 renderer = new UIElementRenderer(adDuplex, 480, 90); 
```

像这样画

```
 renderer.Render();
    spriteBatch.Begin();
    spriteBatch.Draw(renderer.Texture, Vector2.Zero, Color.White);
    spriteBatch.End(); 
```

那么这将解释问题。相反，在 AdDuplex 控件上设置 Margin="0"（确保它在页面上可见）并使用页面上的根元素初始化 UIElementRenderer。默认情况下，这是一个名为“root”的网格，但您可能已将其更改为其他内容。

```
renderer = new UIElementRenderer(root, 480, 800); 
```

绘制代码应与上述相同。AdDuplex 控件现在应该绘制在与实际控件相同的位置，点击它应该会启动 Web 浏览器。

如果您不想每帧绘制 480,800 个位图，您可能需要调整此解决方案，但至少它会测试它是否解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T10:43:16.243

我在我的 SL-XNA 混合应用程序“Yaht 3D”中使用 AdDuplex，没有任何问题。听起来你做的一切都是正确的。只需将 Silverlight 控件放入您的 XAML（使用您自己的应用程序 ID）。

```
 <adduplex:AdControl xmlns:adduplex="clr-namespace:AdDuplex;assembly=AdDuplex.AdControl.Silverlight"
                        AppId="1234"/> 
```

并在 OnDraw 方法内的代码中使用 UIElementRenderer

```
 elementRenderer.Render();
    spriteBatch.Begin();
    spriteBatch.Draw(elementRenderer.Texture, Vector2.Zero, Color.White);
    spriteBatch.End(); 
```

AdDuplex 控件应该为您处理点击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T19:21:54.213

我使用了 Nick Gravelin 的这个助手类，现在它就像一个魅力：

[http://blogs.msdn.com/b/nicgrave/archive/2011/09/26/change-in-uielementrenderer-behavior-and-update-to-uielementrendererhelper.aspx](http://blogs.msdn.com/b/nicgrave/archive/2011/09/26/change-in-uielementrenderer-behavior-and-update-to-uielementrendererhelper.aspx)

谢谢！

# facebook - 从 facebook graph 获取 access_token 后

> ID：10053338
> 
> 赞同：1
> 
> 时间：2012-04-07T09:32:40.127
> 
> 标签：facebook, asp.net-mvc-3, c#-4.0, facebook-c#-sdk

我可以访问 access_token，但现在我坐在：

`https://graph.facebook.com/oauth/access_token?client_id=ID&redirect_uri=http://www.EXAMPLE.com/Home/FBTempIndex/&client_secret=SECRET&code=CODE-CODE-CODE#_=_`

在这个页面上，我可以看到：

```
access_token=ACTUAL-ACCESS-TOKEN&expires=5130106 
```

就这样。我不再从我的服务器访问此页面。我怎样才能做到这一点？

我的请求在 FB 服务器结束。我通过 Google Analytics 和 Fiddler 确认了这一点。这是提琴手图像：

![在此处输入图像描述](../Images/851074125e9fc1d654d980fb05fb2dad.png)

`GET me?acc...`为了更好地理解，当用户不再在我的网站上时，我该如何请求？

![在此处输入图像描述](../Images/6934c8e327bf7acfd6d523ac4f00199d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T12:29:20.817

你拿回你得到的 access_token，然后用它来查询 Graph API。

还是我在您的问题中遗漏了什么？

# wcf - 在此服务主机的已实施合同中未找到合同

> ID：10053340
> 
> 赞同：1
> 
> 时间：2012-04-07T09:32:49.213
> 
> 标签：wcf, mono, opensuse, wcf-configuration

我收到了标题中提到的错误，但不确定我到底做错了什么。我在 openSUSE 上运行 Mono 2.10.6。该问题仅在我尝试浏览 WCF 服务时发生（网页加载正常）。

服务代码为：

```
namespace CyberLane
{
    [ServiceContract]
    public class DataServices// : IDataServices
    {
        [OperationContract]
        public TweetDTO[] GetLatestTweets()
        {
            return MasterRepository.GetTweets().Select(x => new TweetDTO(x)).ToArray();
        }
    }
} 
```

我的 Web.config 具有以下内容：

```
<system.serviceModel>
    <behaviors>
        <endpointBehaviors>
            <behavior name="CyberLane.DataServicesAspNetAjaxBehavior">
                 <enableWebScript />
            </behavior>
        </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
    <services>
        <service name="CyberLane.DataServices">
            <endpoint address="" behaviorConfiguration="CyberLane.DataServicesAspNetAjaxBehavior" binding="webHttpBinding" contract="CyberLane.DataServices" />
        </service>
    </services>
</system.serviceModel> 
```

如果您需要更多信息，请询问我，我将非常乐意分享！这已经让我发疯了几个星期了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T09:36:19.623

首先，最佳实践和常用方法是使用 ServiceModel 属性装饰 IDataServices（接口），而不是实现它的类。

# java - 带有加速度计和方向计的简单代码的惊人行为

> ID：10053341
> 
> 赞同：0
> 
> 时间：2012-04-07T09:32:51.403
> 
> 标签：java, android, orientation, accelerometer, meter

我编写了一个简单的代码，它获取加速度计和方向计并根据值显示一些图形：

```
package pl.aadamczyk.enginesdriver;

import android.app.Activity;
import android.graphics.Color;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.Bundle;

public class EnginesDriverActivity extends Activity implements SensorEventListener
{
    private SensorManager sensorManager;
    private Sensor accelerometer;
    private Sensor orientation;
    private Panel panel;

    public EnginesDriverActivity()
    {
        sensorManager = null;
        accelerometer = null;
    }

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        sensorManager = (SensorManager)getSystemService(SENSOR_SERVICE);
        accelerometer = sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
        orientation = sensorManager.getDefaultSensor(Sensor.TYPE_ORIENTATION);

        panel = new Panel(this.getApplicationContext(), null);

        setContentView(panel);
    }

     protected void onResume()
     {
         super.onResume();
         sensorManager.registerListener(this, accelerometer, SensorManager.SENSOR_DELAY_NORMAL);
         sensorManager.registerListener(this, orientation, SensorManager.SENSOR_DELAY_NORMAL);
     }

     protected void onPause()
     {
         super.onPause();
         sensorManager.unregisterListener(this);
     }

    @Override
    public void onSensorChanged(SensorEvent se)
    {
        Sensor source = se.sensor;

        if (source == accelerometer)
        {
            System.out.println("Updating orientation: " + se.values[1]);
            panel.setOrientation(se.values);
        }
        else if (source == orientation)
        {
            System.out.println("Updating TYPE_ACCELEROMETER: " + se.values[1]);
            panel.setAccelerometer(se.values);
        }

        panel.postInvalidate();
    }

    @Override
    public void onAccuracyChanged(Sensor sensor, int arg1)
    {

    }
}

package pl.aadamczyk.enginesdriver;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.util.AttributeSet;
import android.view.View;

public class Panel extends View
{
    private Paint paint;
    private float[] orientation;
    private float[] accelerometer;

    public Panel(Context context, AttributeSet attrs)
    {
        super(context, attrs);
        paint = new Paint(Paint.ANTI_ALIAS_FLAG);
        orientation = new float[]{0, 0, 0};
        accelerometer = new float[]{0, 0, 0};
    }

    public void setOrientation(float[] _orientation)
    {
        orientation = _orientation;
    }

    public void setAccelerometer(float[] _accelerometer)
    {
        accelerometer = _accelerometer;
    }   

    @Override
    protected void onDraw(Canvas canvas)
    {
        // Some calculations here
        float y = orientation[1];
        float z = orientation[2];

        System.out.println(y);

        // Some graphics here
    }
} 
```

问题是它将方向的值与加速度计的值混合在一起，显示出奇怪的东西。代码中有两个 System.out.println() - 第一个在 onSensorChanged 中显示良好的值，但第二个在 onDraw 显示方向或加速度计值。

这怎么可能？

感谢您的建议，并对我的英语感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T09:55:08.977

我的猜测是 SensorEvent 对象被系统重用。因此，只需在 PanelView 中复制值 inOnSensorChanged 或您的 setter 方法

```
 System.arraycopy(ev.values, 0,copy, 0, 3); 
```

# open-source - 开源、多平台、基于浏览器的屏幕截图扩展？

> ID：10053342
> 
> 赞同：3
> 
> 时间：2012-04-07T09:32:56.320
> 
> 标签：open-source, cross-browser, screen-capture, browser-extension

我正在考虑一个项目，该项目涉及浏览器用户能够屏幕捕获任何网页的内容（最好是整个页面，而不仅仅是可见部分），在图像上做一些简单的注释（圆圈、箭头、下划线、文本标签）并将带注释的图像发送到服务器。

我看到有几个商业或免费软件基于浏览器的屏幕捕获实用程序（我不能在这个项目中使用它们，因为它需要与特定服务器的特定通信）。

我正在考虑编写我自己的一组扩展，但这有点令人生畏，部分原因是 IE 的 COM 复杂性，但更普遍的是因为这样的扩展似乎很容易随着浏览器更新而中断，而且因为我希望它能够跨越多个浏览器似乎很快就会成为维护的噩梦。

你知道任何基于浏览器的开源屏幕截图扩展吗？很好的代码示例展示了如何在各种浏览器上执行此操作。伟大的将是一个积极支持的图书馆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T09:41:45.307

米卡茨，

这很难，我个人会使用 BugDigger 在浏览器中捕获和注释页面。也就是说，我不确定它是否在足够广泛的程度上对您来说是跨浏览器兼容的。

不过，一个想法是安装它，然后扫描它的程序文件夹，看看您是否看到他们可能用于捕获的第 3 方库。如果你没有看到，可能是他们自己写的。

[http://bugdigger.com/](http://bugdigger.com/)

祝你好运！

# php - PHP - MySQL - 搜索日期，计算具有该日期的行

> ID：10053344
> 
> 赞同：0
> 
> 时间：2012-04-07T09:33:14.260
> 
> 标签：php, mysql

我有一个查询，它通过按日期搜索从数据库中提取计数，但它没有返回它应该返回的内容。数据库中有 3 条记录，类型为 Date，日期为 2012-04-06。

$day 作为那个日期在页面上回显，所以我知道它正在正确地传递给函数。

```
$countrows = "SELECT COUNT(*) FROM test_table WHERE startDate LIKE '" . $day. "'";
$countresult = mysql_query($countrows);
$count = mysql_fetch_row($countresult);
$finalcount = $count[0]; 
```

刚卡住，需要第二，第三，第四双眼睛。我显然错过了一些东西。

另外：我希望计数以整数形式出现，以便我可以用它进行数学运算。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T09:38:37.273

您不应该`LIKE`用于日期比较。你可以做

```
"SELECT COUNT(*) FROM test_table WHERE startDate = '" . $day. "'"; 
```

正如 Armatus 指出的那样，您也需要跟注`mysql_fetch_row`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T09:40:08.007

你错过了`$values = mysql_fetch_row($countresult)`. 您`$countresult`是类型`MYSQL_QUERYRESULT`（或某种类型）的变量，而不是数组。

[http://php.net/manual/en/function.mysql-fetch-row.php](http://php.net/manual/en/function.mysql-fetch-row.php)

除此之外，DB 查询的值在 PHP 中总是首先是字符串。`$var = (int)$var;`如果你想确保它是一个数字，就做一个。

# sql-server-2008 - 使用存储过程检索数据

> ID：10053350
> 
> 赞同：2
> 
> 时间：2012-04-07T09:34:13.340
> 
> 标签：sql-server-2008, stored-procedures

这个存储过程应该：

1.  将`userid`and`Date`作为输入参数

2.  检查这是`Id`属于老师还是学生

3.  如果用户是学生，它应该输出他一天的主题以及他们每个人将讨论的内容。

4.  如果用户是老师，它应该输出他一天的课程以及他将在每个课程中教什么。

5.  我使用的表格是：`WeeklyPlan (Id, Date, Lesson, Plan)`, `Subject (Name, Id)`, `Student (userid, name, class)`, `Teacher (name, userid)`, `TimeTable (subject, day, class)`.

现在我写了这个存储过程（它应该做上面写的），但它没有。

如果我写错了，请您检查一下并给我一些想法？如果我应该以另一种方式提出问题，请告诉我。

```
 ALTER PROCEDURE dbo.GetDaySubjects
   (
       @UserId int,
       @DateToday DateTime 
   )
   AS
   IF EXISTS(SELECT        Std_UserID
      FROM            Student
      WHERE        (Std_UserID = @UserId))

              BEGIN 
     SELECT        WeeklyPlan.Wkp_Body, WeeklyPlan.Wkp_Date, WeeklyPlan.Wkp_lesson
     FROM            Class INNER JOIN
                     Student ON Class.Cls_ID = Student.Std_Class INNER JOIN
                     TimeTable ON Class.Cls_ID = TimeTable.Ttb_Class INNER JOIN
                     Subject ON TimeTable.Ttb_Subject = Subject.sbj_ID INNER JOIN
                     WeeklyPlan ON Subject.sbj_Name = WeeklyPlan.Wkp_lesson
     WHERE        (WeeklyPlan.Wkp_Date = @DateToday)
       END

     ELSE IF EXISTS(SELECT        Tch_UserID
           FROM            Teacher
           WHERE        (Tch_UserID = @UserId))

           BEGIN

       SELECT        TimeTable.Ttb_Class, WeeklyPlan.Wkp_lesson, WeeklyPlan.Wkp_Body,              Teacher.Tch_ID

       FROM            Subject INNER JOIN
                     TimeTable ON Subject.sbj_ID = TimeTable.Ttb_Subject INNER JOIN
                     WeeklyPlan ON Subject.sbj_Name = WeeklyPlan.Wkp_lesson INNER JOIN
                     Teacher ON TimeTable.Ttb_Teacher = Teacher.Tch_ID
        WHERE        (WeeklyPlan.Wkp_Date = @DateToday)
           END 
```

太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T09:53:23.313

我能理解你的数据库结构和你想要什么。是您在 where 语句中遗漏了指定具有此计划的用户。

```
WHERE        (WeeklyPlan.Wkp_Date = @DateToday) 
             AND Student.Std_UserID=@UserId 
```

第二个：

```
WHERE        (WeeklyPlan.Wkp_Date = @DateToday)
             AND Teacher.Tch_UserID = @UserId 
```

但我同意你的问题的评论。所以我想你可以考虑把这个 PROC 分成两部分。一个获取`Student`，一个获取`Teacher`. 然后这两个都`EXISTS(..)`过时了。

# php - 在PHP中测量两个坐标之间的距离

> ID：10053358
> 
> 赞同：168
> 
> 时间：2012-04-07T09:35:26.483
> 
> 标签：php, coordinates, geocoding, haversine

嗨，我需要计算经纬度两点之间的距离。

我想避免对外部 API 的任何调用。

我试图在 PHP 中实现 Haversine 公式：

这是代码：

```
class CoordDistance
 {
    public $lat_a = 0;
    public $lon_a = 0;
    public $lat_b = 0;
    public $lon_b = 0;

    public $measure_unit = 'kilometers';

    public $measure_state = false;

    public $measure = 0;

    public $error = '';

    public function DistAB()

      {
          $delta_lat = $this->lat_b - $this->lat_a ;
          $delta_lon = $this->lon_b - $this->lon_a ;

          $earth_radius = 6372.795477598;

          $alpha    = $delta_lat/2;
          $beta     = $delta_lon/2;
          $a        = sin(deg2rad($alpha)) * sin(deg2rad($alpha)) + cos(deg2rad($this->lat_a)) * cos(deg2rad($this->lat_b)) * sin(deg2rad($beta)) * sin(deg2rad($beta)) ;
          $c        = asin(min(1, sqrt($a)));
          $distance = 2*$earth_radius * $c;
          $distance = round($distance, 4);

          $this->measure = $distance;

      }
    } 
```

用一些具有公共距离的给定点测试它我没有得到可靠的结果。

我不明白原始公式或我的实现是否有错误

* * *

## 回答 #1

> 赞同：318
> 
> 时间：2012-04-07T12:00:43.790

不久前，我写了一个半正弦公式的例子，并在我的网站上发布了它：

```
/**
 * Calculates the great-circle distance between two points, with
 * the Haversine formula.
 * @param float $latitudeFrom Latitude of start point in [deg decimal]
 * @param float $longitudeFrom Longitude of start point in [deg decimal]
 * @param float $latitudeTo Latitude of target point in [deg decimal]
 * @param float $longitudeTo Longitude of target point in [deg decimal]
 * @param float $earthRadius Mean earth radius in [m]
 * @return float Distance between points in [m] (same as earthRadius)
 */
function haversineGreatCircleDistance(
  $latitudeFrom, $longitudeFrom, $latitudeTo, $longitudeTo, $earthRadius = 6371000)
{
  // convert from degrees to radians
  $latFrom = deg2rad($latitudeFrom);
  $lonFrom = deg2rad($longitudeFrom);
  $latTo = deg2rad($latitudeTo);
  $lonTo = deg2rad($longitudeTo);

  $latDelta = $latTo - $latFrom;
  $lonDelta = $lonTo - $lonFrom;

  $angle = 2 * asin(sqrt(pow(sin($latDelta / 2), 2) +
    cos($latFrom) * cos($latTo) * pow(sin($lonDelta / 2), 2)));
  return $angle * $earthRadius;
} 
```

➽ 请注意，您以与传入参数相同的单位返回距离`$earthRadius`。默认值为 6371000 米，因此结果也将以 [m] 为单位。要获得以英里为单位的结果，例如，您可以通过 3959 英里，`$earthRadius`结果将以 [mi] 为单位。在我看来，如果没有特别的理由不这样做，坚持使用 SI 单位是一个好习惯。

编辑：

正如 TreyA 正确指出的那样，Haversine 公式由于舍入误差而具有对映点的弱点（尽管它[对于](https://en.wikipedia.org/wiki/Antipodal_point)小距离*是稳定的）。*要绕过它们，您可以改用[Vincenty 公式](http://en.wikipedia.org/wiki/Great-circle_distance#Formulas)。

```
/**
 * Calculates the great-circle distance between two points, with
 * the Vincenty formula.
 * @param float $latitudeFrom Latitude of start point in [deg decimal]
 * @param float $longitudeFrom Longitude of start point in [deg decimal]
 * @param float $latitudeTo Latitude of target point in [deg decimal]
 * @param float $longitudeTo Longitude of target point in [deg decimal]
 * @param float $earthRadius Mean earth radius in [m]
 * @return float Distance between points in [m] (same as earthRadius)
 */
public static function vincentyGreatCircleDistance(
  $latitudeFrom, $longitudeFrom, $latitudeTo, $longitudeTo, $earthRadius = 6371000)
{
  // convert from degrees to radians
  $latFrom = deg2rad($latitudeFrom);
  $lonFrom = deg2rad($longitudeFrom);
  $latTo = deg2rad($latitudeTo);
  $lonTo = deg2rad($longitudeTo);

  $lonDelta = $lonTo - $lonFrom;
  $a = pow(cos($latTo) * sin($lonDelta), 2) +
    pow(cos($latFrom) * sin($latTo) - sin($latFrom) * cos($latTo) * cos($lonDelta), 2);
  $b = sin($latFrom) * sin($latTo) + cos($latFrom) * cos($latTo) * cos($lonDelta);

  $angle = atan2(sqrt($a), $b);
  return $angle * $earthRadius;
} 
```

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2015-05-31T11:28:11.840

我发现[这段代码](http://www.geodatasource.com/developers/php)给了我可靠的结果。

```
function distance($lat1, $lon1, $lat2, $lon2, $unit) {

  $theta = $lon1 - $lon2;
  $dist = sin(deg2rad($lat1)) * sin(deg2rad($lat2)) +  cos(deg2rad($lat1)) * cos(deg2rad($lat2)) * cos(deg2rad($theta));
  $dist = acos($dist);
  $dist = rad2deg($dist);
  $miles = $dist * 60 * 1.1515;
  $unit = strtoupper($unit);

  if ($unit == "K") {
      return ($miles * 1.609344);
  } else if ($unit == "N") {
      return ($miles * 0.8684);
  } else {
      return $miles;
  }
} 
```

结果 ：

```
echo distance(32.9697, -96.80322, 29.46786, -98.53506, "M") . " Miles<br>";
echo distance(32.9697, -96.80322, 29.46786, -98.53506, "K") . " Kilometers<br>";
echo distance(32.9697, -96.80322, 29.46786, -98.53506, "N") . " Nautical Miles<br>"; 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2016-12-02T09:55:53.747

这只是对[@martinstoeckli](https://stackoverflow.com/a/10054282/2648942)和[@Janith Chinthana](https://stackoverflow.com/a/30556851/2648942)答案的补充。对于那些好奇哪种算法最快的人，我编写了[性能测试](https://github.com/nafigator/php-bench/blob/master/Tests/GeoDistance.php)。最佳性能结果显示来自[codexworld.com](http://www.codexworld.com/distance-between-two-addresses-google-maps-api-php/)的优化功能：

```
/**
 * Optimized algorithm from http://www.codexworld.com
 *
 * @param float $latitudeFrom
 * @param float $longitudeFrom
 * @param float $latitudeTo
 * @param float $longitudeTo
 *
 * @return float [km]
 */
function codexworldGetDistanceOpt($latitudeFrom, $longitudeFrom, $latitudeTo, $longitudeTo)
{
    $rad = M_PI / 180;
    //Calculate distance from latitude and longitude
    $theta = $longitudeFrom - $longitudeTo;
    $dist = sin($latitudeFrom * $rad) 
        * sin($latitudeTo * $rad) +  cos($latitudeFrom * $rad)
        * cos($latitudeTo * $rad) * cos($theta * $rad);

    return acos($dist) / $rad * 60 *  1.853;
} 
```

以下是测试结果：

```
Test name       Repeats         Result          Performance     
codexworld-opt  10000           0.084952 sec    +0.00%
codexworld      10000           0.104127 sec    -22.57%
custom          10000           0.107419 sec    -26.45%
custom2         10000           0.111576 sec    -31.34%
custom1         10000           0.136691 sec    -60.90%
vincenty        10000           0.165881 sec    -95.26% 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2016-04-19T08:45:09.570

这里是计算两个经纬度之间距离的简单而完美的代码。从这里找到以下代码 - [http://www.codexworld.com/distance-between-two-addresses-google-maps-api-php/](http://www.codexworld.com/distance-between-two-addresses-google-maps-api-php/)

```
$latitudeFrom = '22.574864';
$longitudeFrom = '88.437915';

$latitudeTo = '22.568662';
$longitudeTo = '88.431918';

//Calculate distance from latitude and longitude
$theta = $longitudeFrom - $longitudeTo;
$dist = sin(deg2rad($latitudeFrom)) * sin(deg2rad($latitudeTo)) +  cos(deg2rad($latitudeFrom)) * cos(deg2rad($latitudeTo)) * cos(deg2rad($theta));
$dist = acos($dist);
$dist = rad2deg($dist);
$miles = $dist * 60 * 1.1515;

$distance = ($miles * 1.609344).' km'; 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-10-30T16:47:54.210

相当老的问题，但对于那些对返回与谷歌地图相同的结果的 PHP 代码感兴趣的人，以下工作可以完成：

```
/**
 * Computes the distance between two coordinates.
 *
 * Implementation based on reverse engineering of
 * <code>google.maps.geometry.spherical.computeDistanceBetween()</code>.
 *
 * @param float $lat1 Latitude from the first point.
 * @param float $lng1 Longitude from the first point.
 * @param float $lat2 Latitude from the second point.
 * @param float $lng2 Longitude from the second point.
 * @param float $radius (optional) Radius in meters.
 *
 * @return float Distance in meters.
 */
function computeDistance($lat1, $lng1, $lat2, $lng2, $radius = 6378137)
{
    static $x = M_PI / 180;
    $lat1 *= $x; $lng1 *= $x;
    $lat2 *= $x; $lng2 *= $x;
    $distance = 2 * asin(sqrt(pow(sin(($lat1 - $lat2) / 2), 2) + cos($lat1) * cos($lat2) * pow(sin(($lng1 - $lng2) / 2), 2)));

    return $distance * $radius;
} 
```

我已经用各种坐标进行了测试，并且效果很好。

我认为它也应该比一些替代品更快。但没有测试。

提示：谷歌地图使用 6378137 作为地球半径。因此，将它与其他算法一起使用也可能会奏效。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2015-07-12T11:54:43.143

对于那些喜欢更短更快（不调用 deg2rad()）的人。

```
function circle_distance($lat1, $lon1, $lat2, $lon2) {
  $rad = M_PI / 180;
  return acos(sin($lat2*$rad) * sin($lat1*$rad) + cos($lat2*$rad) * cos($lat1*$rad) * cos($lon2*$rad - $lon1*$rad)) * 6371;// Kilometers
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-11-23T09:19:12.310

试试这个会产生很棒的结果

```
function getDistance($point1_lat, $point1_long, $point2_lat, $point2_long, $unit = 'km', $decimals = 2) {
        // Calculate the distance in degrees
        $degrees = rad2deg(acos((sin(deg2rad($point1_lat))*sin(deg2rad($point2_lat))) + (cos(deg2rad($point1_lat))*cos(deg2rad($point2_lat))*cos(deg2rad($point1_long-$point2_long)))));

        // Convert the distance in degrees to the chosen unit (kilometres, miles or nautical miles)
        switch($unit) {
            case 'km':
                $distance = $degrees * 111.13384; // 1 degree = 111.13384 km, based on the average diameter of the Earth (12,735 km)
                break;
            case 'mi':
                $distance = $degrees * 69.05482; // 1 degree = 69.05482 miles, based on the average diameter of the Earth (7,913.1 miles)
                break;
            case 'nmi':
                $distance =  $degrees * 59.97662; // 1 degree = 59.97662 nautic miles, based on the average diameter of the Earth (6,876.3 nautical miles)
        }
        return round($distance, $decimals);
    } 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-11-19T04:54:03.610

试试这个函数来计算纬度和经度点之间的距离

```
function calculateDistanceBetweenTwoPoints($latitudeOne='', $longitudeOne='', $latitudeTwo='', $longitudeTwo='',$distanceUnit ='',$round=false,$decimalPoints='')
    {
        if (empty($decimalPoints)) 
        {
            $decimalPoints = '3';
        }
        if (empty($distanceUnit)) {
            $distanceUnit = 'KM';
        }
        $distanceUnit = strtolower($distanceUnit);
        $pointDifference = $longitudeOne - $longitudeTwo;
        $toSin = (sin(deg2rad($latitudeOne)) * sin(deg2rad($latitudeTwo))) + (cos(deg2rad($latitudeOne)) * cos(deg2rad($latitudeTwo)) * cos(deg2rad($pointDifference)));
        $toAcos = acos($toSin);
        $toRad2Deg = rad2deg($toAcos);

        $toMiles  =  $toRad2Deg * 60 * 1.1515;
        $toKilometers = $toMiles * 1.609344;
        $toNauticalMiles = $toMiles * 0.8684;
        $toMeters = $toKilometers * 1000;
        $toFeets = $toMiles * 5280;
        $toYards = $toFeets / 3;

              switch (strtoupper($distanceUnit)) 
              {
                  case 'ML'://miles
                         $toMiles  = ($round == true ? round($toMiles) : round($toMiles, $decimalPoints));
                         return $toMiles;
                      break;
                  case 'KM'://Kilometers
                        $toKilometers  = ($round == true ? round($toKilometers) : round($toKilometers, $decimalPoints));
                        return $toKilometers;
                      break;
                  case 'MT'://Meters
                        $toMeters  = ($round == true ? round($toMeters) : round($toMeters, $decimalPoints));
                        return $toMeters;
                      break;
                  case 'FT'://feets
                        $toFeets  = ($round == true ? round($toFeets) : round($toFeets, $decimalPoints));
                        return $toFeets;
                      break;
                  case 'YD'://yards
                        $toYards  = ($round == true ? round($toYards) : round($toYards, $decimalPoints));
                        return $toYards;
                      break;
                  case 'NM'://Nautical miles
                        $toNauticalMiles  = ($round == true ? round($toNauticalMiles) : round($toNauticalMiles, $decimalPoints));
                        return $toNauticalMiles;
                      break;
              }

    } 
```

然后使用函数作为

```
echo calculateDistanceBetweenTwoPoints('11.657740','77.766270','11.074820','77.002160','ML',true,5); 
```

希望能帮助到你

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-04-07T10:28:21.120

对于确切的值，这样做：

```
public function DistAB()
{
      $delta_lat = $this->lat_b - $this->lat_a ;
      $delta_lon = $this->lon_b - $this->lon_a ;

      $a = pow(sin($delta_lat/2), 2);
      $a += cos(deg2rad($this->lat_a9)) * cos(deg2rad($this->lat_b9)) * pow(sin(deg2rad($delta_lon/29)), 2);
      $c = 2 * atan2(sqrt($a), sqrt(1-$a));

      $distance = 2 * $earth_radius * $c;
      $distance = round($distance, 4);

      $this->measure = $distance;
} 
```

嗯，我认为应该这样做......

编辑：

对于公式和至少 JS 实现尝试：[http ://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)

敢不敢...我忘了对圆函数中的所有值进行 deg2rad...

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-04-07T10:38:32.497

由于大圆距离理论，乘数在每个坐标处都会发生变化，如下所示：

[http://en.wikipedia.org/wiki/Great-circle_distance](http://en.wikipedia.org/wiki/Great-circle_distance)

您可以使用此处描述的公式计算最接近的值：

[http://en.wikipedia.org/wiki/Great-circle_distance#Worked_example](http://en.wikipedia.org/wiki/Great-circle_distance#Worked_example)

关键是将每个度-分-秒值转换为所有度值：

```
N 36°7.2', W 86°40.2'  N = (+) , W = (-), S = (-), E = (+) 
referencing the Greenwich meridian and Equator parallel

(phi)     36.12° = 36° + 7.2'/60' 

(lambda)  -86.67° = 86° + 40.2'/60' 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-07-19T07:06:28.037

你好这里使用两个不同的纬度和经度获取距离和时间的代码

```
$url ="https://maps.googleapis.com/maps/api/distancematrix/json?units=imperial&origins=16.538048,80.613266&destinations=23.0225,72.5714";

    $ch = curl_init();
    // Disable SSL verification

    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    // Will return the response, if false it print the response
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    // Set the url
    curl_setopt($ch, CURLOPT_URL,$url);
    // Execute
    $result=curl_exec($ch);
    // Closing
    curl_close($ch);

    $result_array=json_decode($result);
print_r($result_array); 
```

您可以使用 php 中的纬度和经度检查以下示例链接[获取两个不同位置之间的时间](http://myphpinformation.blogspot.in/2016/07/get-time-between-two-different-locations-using-latitude-and-longitude-in-php.html)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-03-14T09:40:40.027

最简单的方法之一是：

```
$my_latitude = "";
$my_longitude = "";
$her_latitude = "";
$her_longitude = "";

$distance = round((((acos(sin(($my_latitude*pi()/180)) * sin(($her_latitude*pi()/180))+cos(($my_latitude*pi()/180)) * cos(($her_latitude*pi()/180)) * cos((($my_longitude- $her_longitude)*pi()/180))))*180/pi())*60*1.1515*1.609344), 2);
echo $distance; 
```

它将四舍五入到小数点后 2 位。

# android - 如何在 android sqlite 'execSQL' 语句中设置整数和字符串值

> ID：10053361
> 
> 赞同：2
> 
> 时间：2012-04-07T09:36:28.877
> 
> 标签：android, sqlite

我正在尝试在 execSQL 语句中设置一个整数和一个字符串值：

```
mydb.execSQL("UPDATE emptable set age=? where name=?",new int[] {emp_age},new String[] {emp_name}); 
```

其中 emp_age 是一个整数，emp_name 是一个字符串。但这不起作用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-07T10:44:20.700

抱歉，我对给出的答案不满意，我会解释原因。

**@hotveryspicy**的答案不仅丑陋而且危险。[我会提醒您SQL 注入](http://de.wikipedia.org/wiki/SQL-Injection)的可能性，这可能会花费您存储的数据。**@john smith**的回答也是如此。

**@user1318091**答案不正确的原因与使所有这些答案（包括您给定的示例代码）错误的原因相同。如果您阅读文档，您会注意到它说：

> 执行**不是**SELECT/INSERT/ **UPDATE** /DELETE 的单个 SQL 语句。

在第一行。它还列出了上述操作的替代方案：

> 对于 UPDATE 语句，请改用以下任何一种。
> 
> *   更新（字符串，内容值，字符串，字符串 []）
> *   updateWithOnConflict(String, ContentValues, String, String[], int)

如果您选择使用简单的[`update()`-method](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#update%28java.lang.String,%20android.content.ContentValues,%20java.lang.String,%20java.lang.String%5B%5D%29)，您的查询将如下所示（未经测试！）：

```
ContentValues values = new ContentValues();
values.put("age", age); // your integer...
mydb.update("emptable", values, "name=?", new String[]{emp_name}); 
```

还要检查这个问题以获取正确的“where”-syntax: [update sql database with ContentValues and the update-method](https://stackoverflow.com/questions/3760774)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T10:06:57.483

SDK说

> bindArgs：在 bindArgs 中仅支持 byte[]、String、Long 和 Double

但是如果你想使用 bindArgs，那么你可以试试这个

```
mydb.execSQL("UPDATE emptable set age=? where name=?",new String[] {String.valueOf(emp_age)},new String[] {emp_name}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-07T09:45:26.817

```
 String sql = "UPDATE emptable  SET age = "+age + " WHERE name = '" + emp_name + "';";
 db.execSQL(sql); 
```

# android - 问题：401 - 未经授权：由于凭据无效而拒绝访问

> ID：10053364
> 
> 赞同：1
> 
> 时间：2012-04-07T09:36:56.307
> 
> 标签：android, https, ntlm

在 Android 中，我试图从“HTTPS”站点获取数据，并且该站点使用 NTLM 凭据、身份验证，当我连接站点（客户端。执行）时，它会给出响应：

> “401 - 未经授权：由于凭据无效，访问被拒绝。”

我正在设置 UsernamePasswordCredentials、networkcredential，但响应保持不变。

我也遵循了[http://hc.apache.org/httpcomponents-client-ga/ntlm.html](http://hc.apache.org/httpcomponents-client-ga/ntlm.html) 和 [http://hc.apache.org/httpcomponents-client-ga/tutorial/html/authentication的说明.html](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/authentication.html)

但反应保持不变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T11:01:18.380

我有同样的问题，我读了很多关于它的东西。但我有一个关于如何解决它的“答案”。

问题是 HttpClient 类，因为它不支持 NTLM 连接，但是，现在 HttpClient api (4.2) 可以支持它。

我在 Apache 页面上读到了它，所以您必须下载 HttpClient 4.2 版本并将其添加到您的项目中。使用该 HttpClient 类，然后继续工作。

[你可以在这里下载：](http://hc.apache.org/downloads.cgi)

我现在发布它是因为有些人可以在这里找到解决方案。

# javascript - ArrayBufferView 未捕获错误：INDEX_SIZE_ERR：DOM 异常 1

> ID：10053365
> 
> 赞同：2
> 
> 时间：2012-04-07T09:37:08.673
> 
> 标签：javascript, python, binary, websocket, arraybuffer

我从 python 服务器通过 websocket 发送二进制数据：

```
data = struct.pack('!BI', 2, 1)
channel.send(channel.BINARY, data) 
```

数据发送工作正常。在客户端javascript得到它是这样的：

```
onbinarydata: function(data) {
    alert(data.byteLength);
    >> 5
    var array = new Uint8Array(data,0,1);
    alert(array[0]);
    >> 2
    var array2 = new Uint32Array(data,1,5);
    >> Uncaught Error: INDEX_SIZE_ERR: DOM Exception 1
    alert(array2[0]); 
```

这怎么可能发生？字节长度减去字节偏移量是 4，BYTY_ELEMENT_SIZE 也是 4。第一个值被读取没有问题，但接下来总是引发错误，无论它是什么类型。即使我只像这样设置字节偏移

```
var array2 = new Uint32Array(data,1); 
```

有错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T09:53:55.903

不能创建偏移量不能被 4 整除的 int32/uint32 数组。int16/uint16 和 2 也是如此。

这是 CPU 架构的限制。

让这 2 个变量是`A:Uint16`和`B:Uint8`。您可以使用不同的方法将它们映射到字节：

*   `BBAA`（将值 B 放入 Uint16）
*   `0BAA`/ `B0AA`（跳过1个字节对齐）
*   `AAB`（重新排列对齐）。

如果您不想考虑 big-/little-endiad、重新排序和其他东西......即，如果您`BAA`出于某种原因仍想将变量放入字节中，请使用以下想法：

对于每个未对齐的变量，放入相应大小的缓冲区并逐字节复制。如果 misalign 为 2 个字节，则可以按字节对进行复制。

```
var array = new Uint8Array(data,0,1);
alert(array);

var array2 = new Uint8Array(data,1,5);
var abuf2 = new ArrayBuffer(4);
var abuf2_8 = new Uint8Array(abuf2);
// using `subarray` won't help, cause it doesn't create a copy like `slice`
// and the same data will have the same inconsistent memory alignment
for (var i = 0; i < 4; i++) abuf2_8[i] = array2[i];
var abuf2_32 = new Uint32Array(abuf2);
alert(abuf2_32[0]); 
```

顺便说一句，在 js 中打包/解包有一些现成的代码：

*   [矿](http://kirilloid.ru/sc2replay/packer.js)
*   [phpjs](http://phpjs.org/functions/pack:880)

类似于[php pack](http://php.net/manual/ru/function.pack.php)

我的代码对你来说可能更有趣，因为有 2 个类：打包成二进制字符串和打包成 arraybuffer。

# algorithm - 我需要帮助来分析这种编程技术来压缩数组

> ID：10053368
> 
> 赞同：5
> 
> 时间：2012-04-07T09:37:49.303
> 
> 标签：algorithm, compression

我希望读者知道香农的信息论，它说与概率为 p(a) 的事件 a 相关的信息内容是 -log(p(a))。用外行的话来说，如果您需要表示 0-7 范围内的数字，那么您至少需要 -log(1/8)=log(8) （其中基数为 2），即 3 位。

假设有一个整数数组，范围从 0 到 255。我不会将数组存储为 8 位数字，而是先按升序对数组进行排序（当然保留备份）。我不会将每个数组元素编码为 8 位整数，而是输出其在排序数组中的位置。现在的问题是让解码器或接收器知道这个排序后的数组。我将输出第一个（最小）整数值作为 8 位数字，然后很快将增量添加到该数字。首先是所有排序后的数组，然后是元素的顺序，即位置值。

例如：原始数组-> 231 , 3 , 45 , 0 , 23 , 32 , 78

排序数组-> 0,3,23,32,45,78,231

编码信息是 0（排序数组的第一个元素为 8 位 num），然后是 3（这是 0 的增量），然后是 20，然后是 9，然后是 13，然后是 33，然后是 153。

在发送第一个数字和连续的增量之后，我将发送订单，即因为这里有 7 个整数，我需要一个三位数字作为订单，3（原始数组中 0 的位置）然后 1（3 的位置）然后 4 （23 的位置）然后 5（32 的位置）然后 2（45 的位置）然后 6（78 的位置）然后 0（231 的位置）。

即位置值现在是 3 , 1 , 4 , 5 , 2 , 6 , 0

分析看这个方案会不会压缩：

第一个数字-> 8 位（实际上可能需要更少的位，因为它是最小的）

接下来 6 个数字 -> 5 位（问题是我们可以用 5 位编码 0、3、20、9、13，但不能将 33 和 153 编码为 31（最多 5 位））

7 个位置，每个 3 位->21 位

总计-> 8+6*5+21=59。这比我们编码 7 个 8 位数字所需的 56 位要多，而且我们实现了扩展而不是压缩，而且我们的方案是有损的，因为我们无法正确表示一些大数字。

让我们为这个方案增加一些复杂性。

我将第一个 0 编码为 8 位数字，紧随其后的是最后一个数字 231 的代码。然后我将发送代码为 3 的下一个增量超过 0 然后编码为 153 的减量超过 231 然后 20 然后 33、9,13

即我以不同的顺序发送-> 而不是 0,3,20,9,13,33,153 我将发送为 3,153,20,33,9,13

我得到的是动态范围的连续减小你观察到我们已经发送了 0 然后 231 然后 3 然后 153 到这个时候值的范围减小了我的意思是下一个增量到 3 将是 20 不能大于倒数第二个数字即 78 和数字 20 不能超过 75（如果超过，那么第三个数字（3+76（比如说））将大于 78，这显然违反了我们的排序假设。

如果你到目前为止已经理解了这个想法，我有一个进一步改进的方案来使用二进制搜索的想法来进一步减少动态范围并将这种技术放在类固醇上。这是排序后的数组

0 , 3 , 23 , 32 , 45 , 78 , 231

观察排序后的数组有 7 个数字，中间的数字是 32。所以现在我们将这个 32 编码为 8 位，然后我们将按顺序发送增量。即32之后的下一个数字将是3，它将被编码为29（即32-3），下一个将是78，编码为46（78-32），然后0编码为3（3-0），然后23编码为20 (23-3) 然后 45 编码为 33(78-45) 然后最后一个 231 编码为 153(231-78)。

如果您现在看到，我们可以根据具体情况决定每个数字使用多少位。

我们将把排序后的数组发送为 32（范围 0-255，所以 8 位），29（范围 0-32，所以 6 位），46（范围 32-255，所以 8 位），3（范围 0-3，所以 2 位） ) ,20(范围 3-32 所以 5 位),33(范围 32-78 所以 6 位),153(范围 78-255 所以 8 位)

所以总共 8+6+8+2+5+6+8=43 这是无损的，并且比我们最初估计的 38（8 位 + 5*6 位）多，所以这加上了 7 个位置值，每个位置值是 3 位总共 43+21=64 大于 56。我们的方案还在扩展中。

我们可以对 21 位的位置编号做哪些改进。因为每次我们发送位置信息时，如果我们有 7 个位置要发送，那么位置的数量就会减少 1，那么比特数就是 log(7)+log(6)+log(5).... 然后就是 log(fact (7)) 所有对数都以 2 为底的位。

注意我使用了公式 log(a)+log(b)=log(ab)

这等于 12.299，加上 43 等于 55.299，略低于 56。但这不切实际。我们至少需要 3(range 7)+3(range 6)+3(range 5)+2(range 4)+2(range 3)+1(range 2)+0(range 1)=14 当添加时与 43 给出 57 这是扩展。

这项工作的目标是使数据大小至少减少 1 位。如果我们在不假设数据的情况下将 56 位压缩为 55 位，那么我们可以将 55 位的输出再次压缩为 54 位，并且很快。这看起来是不可能的，这个想法类似于永动机。现在的任务是看看是什么阻止我们压缩更多。

我需要分析一个更大的数组的例子，看看排序数组的 43 位是否可以小于 43。另外，将数组分成许多部分并分别编码每个部分有什么好处。还有一个目标是找到计算表示排序数组所需的位数的公式是什么。即给定数组大小和数组元素范围如何找到像 43 这样的数字。

让我们再次把这个 3,1,4,5,2,6,0 作为一个未排序的数组，观察这个序列是从 0 到 6 的七个数字的 5040 个排列之一。我们可以将其表示为一个 13 位数字（12.299正如理论所暗示的那样）。

我需要知道是否可以进一步压缩这个数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T20:26:33.177

> 这项工作的目标是使数据大小至少减少 1 位。

这在所有输入上都是不可能的。您可能会浪费大量精力来尝试正确计算各种表示中的位、犯错误、修复它们等，而您真正需要做的只是计算有多少个案例。

有 2^k 个可能的输入，其中 k 是输入中的位数。假设您相信每个输入都有 k-1 位表示。然后有 2^(k-1) 种可能的表示。然后，如果您将这 2^(k-1) 个表示中的每一个都提供给您的解压缩器，那么您显然只会得到 2^(k-1) 个结果。其他 2^(k-1) 个可能的输入在操作中丢失。无法从您的表示中生成那些缺失的输入，这意味着实际上您的表示无法涵盖所有​​可能的 2^k 输入。其中至少有一半没有被覆盖。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T10:22:28.670

> 如果我们在不假设数据的情况下将 56 位压缩为 55 位，那么我们可以将 55 位的输出再次压缩为 54 位，并且很快。这看起来是不可能的，这个想法类似于永动机。现在的任务是看看是什么阻止我们压缩更多。

如果不对保证减小所有可能数据值大小的数据做任何假设，就不可能有无损压缩算法。简单的[鸽子洞原理](http://en.wikipedia.org/wiki/Pigeonhole_principle)我们可以看到以下内容。当您使用 n 位时，您可以表示 2^n 个值。使用 n-1 位，您只能表示 2^(n-1) 个值。因此，如果您对一半的原始值进行编码，则必须使用与已编码值之一相同的位对下一个值进行编码，因此您会丢失信息。当然，如果在原始数据中您只使用少于 2^(n-1) 个不同的值，您可以将该数据的大小减小一点（或更多），但这已经是对数据的假设。此外，您将无法使用该方法递归地减小数据的大小而不会造成任何损失。

因此，您可能会找到某种方式将数组压缩一点，但前提是当前的压缩方式最多使用一半可能的位模式。虽然这可能是压缩数组的一些模糊方式，但肯定会使用一些 k 位的一半以上的位模式。这个 k 将是您的阈值，您将无法再减小大小。

> 将数组分成许多部分并分别编码每个部分的好处是什么。

如果将数组拆分为更小的部分，则局部差异会更低，因此您可以使用更少的位来表示数字之间的差异。因此，在像 [1, 2, 3, 4, 2^30, 2^30+1, 2^30+2, 2^30+3] 这样的数组中，您可以节省一些空间。但是，您将不得不使用更多位来表示新的绝对值。它们再次可以表示为到某个任意绝对值的距离以节省一些空间。但我不确定在某些情况下是否真的值得你概述的所有努力来节省 1 位。

把它们加起来。如果你有一个像 [2^30, 2^30+1, 2^30+2, 2^30+3] 这样的数组，你显然可以通过取数字之间的差异来节省一些空间，但正如你在您的回答，在某些情况下，它会增加数据的大小。因此，您不能有一个压缩算法来存储任何（不做假设）使用少于 n 位的数字数组，其中 n 是数组中数字的对数的上限之和。

# python - 通过 Python 发送短信

> ID：10053375
> 
> 赞同：0
> 
> 时间：2012-04-07T09:39:44.480
> 
> 标签：python, www-authenticate

我正在使用以下代码连接到手机以发送 SMS 消息：

```
import serial
import time

phone = serial.Serial()
phone.baudrate = 38400
phone.bytesize = 8
phone.stopbits = 1
phone.xonxoff = 0
phone.rtscts = 0
phone.timeout = 0
phone.port = 3  #try different ports here, if this doesn't work.
phone.parity=serial.PARITY_NONE
phone.open()
print phone.portstr

recipient = "+929409778"
message = "We did it!"
print ("I did come after it")
try:
    time.sleep(0.5)
    phone.write(b'ATZ\r')
    time.sleep(0.5)

    phone.write(b'AT+CMGF=1\r')
    time.sleep(0.5)
    phone.write(b'AT+CMGS="' + recipient.encode() + b'"\r')
    time.sleep(0.5)
    phone.write(message.encode() + b"\r")

    print (message)
    time.sleep(0.5)
    phone.write(bytes([26]))

    time.sleep(0.5)
    phone.readall()

finally:
    phone.close() 
```

我可以连接手机，但无法发送消息。它没有给我一个错误，所以我不确定从哪里开始调试。

我的代码有什么问题我没有看到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T06:49:11.147

尝试使用 phone.flush() 刷新电话流，看看它是否通过。

# events - SSIS 包：OnTaskFailed 和 OnError 事件之间的区别？

> ID：10053379
> 
> 赞同：3
> 
> 时间：2012-04-07T09:39:58.910
> 
> 标签：events, event-handling, ssis

“OnTaskFailed”和“OnError”事件有什么区别？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-10-08T13:31:05.583

任何错误都会引发 OnError 事件，而 OnTaskFailed 事件仅在任务失败时引发。虽然这两者可能经常一起发生，但在某些情况下它们不会。如果任务将其`ForcedExecutionResult`属性设置为 Completion/Success 或该`MaximumErrorCount`值高于发生的错误数，则这些事件不会重叠的一些示例。

# android - Android：蓝牙accept（）失败错误

> ID：10053382
> 
> 赞同：0
> 
> 时间：2012-04-07T09:40:24.730
> 
> 标签：android, bluetooth

我有一个与 pc 连接的 android 应用程序。它适用于 win xp，但不适用于 Win 7。在 Windows 7 中，如果我使用蓝牙加密狗，它可以工作，但它不适用于我笔记本电脑中的 Bluetooth2.1 软件。

**我收到此错误** accept() failed 04-07 14:58:56.354: E/BluetoothService.cpp(196): stopDiscoveryNative: D-Bus error in StopDiscovery: org.bluez.Error.Failed (Invalid discovery session)

04-07 14:58:56.362：E/BluetoothEventLoop.cpp（196）：onCreateDeviceResult：D-Bus 错误：org.bluez.Error.AlreadyExists（已经存在）

代码：

```
private static final UUID MY_UUID = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB"); 
```

// 听

```
 public AcceptThread() {
        BluetoothServerSocket tmp = null;

        // Create a new listening server socket
        try {
            tmp = mAdapter.listenUsingRfcommWithServiceRecord(NAME, MY_UUID);
            //tmp = mAdapter.listenUsingInsecureRfcommWithServiceRecord(NAME, MY_UUID);

        } catch (IOException e) {
            Log.e(TAG, "listen() failed", e);
        }
        mmServerSocket = tmp;
    } 
```

// 连接

```
 public ConnectThread(BluetoothDevice device) {
        mmDevice = device;
        BluetoothSocket tmp = null;

        // Get a BluetoothSocket for a connection with the
        // given BluetoothDevice
        try {
            tmp = device.createRfcommSocketToServiceRecord(MY_UUID);

            //tmp = device.createInsecureRfcommSocketToServiceRecord(MY_UUID);
        } catch (IOException e) {
            Log.e(TAG, "create() failed", e);
        }
        mmSocket = tmp;
    }

    public void run() {
        if (D) Log.d(TAG, "BEGIN mAcceptThread" + this);
        setName("AcceptThread");
        BluetoothSocket socket = null;

        // Listen to the server socket if we're not connected
        while (mState != STATE_CONNECTED) {
            try {
                // This is a blocking call and will only return on a
                // successful connection or an exception
                socket = mmServerSocket.accept();
            } catch (IOException e) {
                Log.e(TAG, "accept() failed", e);
                break;
            }

            // If a connection was accepted
            if (socket != null) {
                synchronized (BluetoothService.this) {
                    switch (mState) {
                    case STATE_LISTEN:
                    case STATE_CONNECTING:
                        // Situation normal. Start the connected thread.
                        connected(socket, socket.getRemoteDevice());
                        break;
                    case STATE_NONE:
                    case STATE_CONNECTED:
                        // Either not ready or already connected. Terminate new socket.
                        try {
                            socket.close();
                        } catch (IOException e) {
                            Log.e(TAG, "Could not close unwanted socket", e);
                        }
                        break;
                    }
                }
            }
        }
        if (D) Log.i(TAG, "END mAcceptThread");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T11:01:39.900

已解决：必须使用反射

m = device.getClass().getMethod("createRfcommSocket", new Class[] {int.class});

# c++ - 仅在 C++ 中传递更改的变量

> ID：10053384
> 
> 赞同：0
> 
> 时间：2012-04-07T09:40:54.760
> 
> 标签：c++

我需要一些帮助来提高我的代码效率。代码行做我想做的事，但做得不好。我需要它更高效，因为我稍后会增加数据量，然后功能会太慢。

我也是 C++ 和编程的新手，因此欢迎任何建议，以便我了解更多信息。

因为大多数时候更改很少，我只希望函数 B 进一步发送函数 A 中更改的值。现在在我的代码中，即使根本没有更改，每个值也会进一步发送。我知道，这是对资源的浪费和不好的编程。

重要的！1）IOCP.sendVarData的第一个参数的值是静态的，不能改变。2) 函数 B 中的 PmdgGetVariable ("MCP_annunFD", &result) 启动一切。改善这一点的最佳方法是什么？

我有以下功能，可以检测上次运行时的任何更改并存储更改。

// NGX数据变化时调用该函数 void ProcessNGXData (PMDG_NGX_Data *pS) {

```
if (pS->MCP_Course[0]   != NGX_MCP_Course[0]){NGX_MCP_Course[0] = pS->MCP_Course[0];}
if (pS->MCP_Course[1]   != NGX_MCP_Course[1]){NGX_MCP_Course[1] = pS->MCP_Course[1];}
if (pS->MCP_IASMach     != NGX_MCP_IASMach){NGX_MCP_IASMach     = pS->MCP_IASMach;}
if (pS->MCP_Heading     != NGX_MCP_Heading){NGX_MCP_Heading     = pS->MCP_Heading;} 
if (pS->MCP_Altitude    != NGX_MCP_Altitude){NGX_MCP_Altitude   = pS->MCP_Altitude;}
if (pS->MCP_VertSpeed   != NGX_MCP_VertSpeed){NGX_MCP_VertSpeed = pS->MCP_VertSpeed;}

if (pS->MCP_annunLVL_CHG != NGX_MCP_annunLVL_CHG){NGX_MCP_annunLVL_CHG = pS->MCP_annunLVL_CHG;}

if (pS->MCP_annunN1         != NGX_MCP_annunN1)     {NGX_MCP_annunN1 =      pS->MCP_annunN1;}
if (pS->MCP_annunSPEED      != NGX_MCP_annunSPEED)  {NGX_MCP_annunSPEED =   pS->MCP_annunSPEED;}
if (pS->MCP_annunVNAV       != NGX_MCP_annunVNAV)   {NGX_MCP_annunVNAV =    pS->MCP_annunVNAV;}
if (pS->MCP_annunLVL_CHG    != NGX_MCP_annunLVL_CHG){NGX_MCP_annunLVL_CHG = pS->MCP_annunLVL_CHG;}
if (pS->MCP_annunHDG_SEL    != NGX_MCP_annunHDG_SEL){NGX_MCP_annunHDG_SEL = pS->MCP_annunHDG_SEL;}
if (pS->MCP_annunLNAV       != NGX_MCP_annunLNAV)   {NGX_MCP_annunLNAV =    pS->MCP_annunLNAV;}
if (pS->MCP_annunVOR_LOC    != NGX_MCP_annunVOR_LOC){NGX_MCP_annunVOR_LOC = pS->MCP_annunVOR_LOC ;}
if (pS->MCP_annunAPP        != NGX_MCP_annunAPP )   {NGX_MCP_annunAPP  =    pS->MCP_annunAPP ;}
if (pS->MCP_annunALT_HOLD   != NGX_MCP_annunALT_HOLD){NGX_MCP_annunALT_HOLD = pS->MCP_annunALT_HOLD ;}
if (pS->MCP_annunVS         != NGX_MCP_annunVS )    {NGX_MCP_annunVS  =      pS->MCP_annunVS ;}
if (pS->MCP_annunCMD_A      != NGX_MCP_annunCMD_A ) {NGX_MCP_annunCMD_A  =  pS->MCP_annunCMD_A ;}
if (pS->MCP_annunCWS_A      != NGX_MCP_annunCWS_A ) {NGX_MCP_annunCWS_A  =  pS->MCP_annunCWS_A ;}
if (pS->MCP_annunCMD_B      != NGX_MCP_annunCMD_B ) {NGX_MCP_annunCMD_B  =  pS->MCP_annunCMD_B ;}
if (pS->MCP_annunCWS_B      != NGX_MCP_annunCWS_B)  {NGX_MCP_annunCWS_B  =  pS->MCP_annunCWS_B ;}
} 
```

在另一个线程中，我现在有这个函数来发送

```
static UINT running_as_Thread(LPVOID lpvoid) {
            int  result;
            bool rep= true;
            while (rep){
            PmdgGetVariable ("MCP_annunFD", &result);       
            IOCP.sendVarData ( 2534, NGX_MCP_Course [0]);
            IOCP.sendVarData ( 2524,  NGX_MCP_Altitude);
            IOCP.sendVarData ( 2542, NGX_MCP_Heading);
            IOCP.sendVarData ( 2559, NGX_MCP_IASMach);
            IOCP.sendVarData ( 1140, NGX_MCP_VertSpeed);
            IOCP.sendVarData ( 2535, NGX_MCP_Course [1]);   
            IOCP.sendVarData ( 286, NGX_MCP_annunLVL_CHG);  
            IOCP.sendVarData ( 1143, NGX_MCP_VertSpeedBlank);   
            IOCP.sendVarData ( 1115, NGX_MCP_IASBlank); 
            IOCP.sendVarData ( 1117 , NGX_MCP_IASOverspeedFlash);       
            IOCP.sendVarData ( 1118, NGX_MCP_IASUnderspeedFlash);           
            IOCP.sendVarData ( 282, NGX_MCP_annunATArm);
            IOCP.sendVarData ( 283, NGX_MCP_annunN1);
            IOCP.sendVarData ( 284, NGX_MCP_annunSPEED);
            IOCP.sendVarData ( 285, NGX_MCP_annunVNAV);
            IOCP.sendVarData ( 286, NGX_MCP_annunLVL_CHG);
            IOCP.sendVarData ( 287, NGX_MCP_annunHDG_SEL);
            IOCP.sendVarData ( 288, NGX_MCP_annunLNAV);
            IOCP.sendVarData ( 289, NGX_MCP_annunVOR_LOC);
            IOCP.sendVarData ( 290, NGX_MCP_annunAPP);
            IOCP.sendVarData ( 291, NGX_MCP_annunALT_HOLD);
            IOCP.sendVarData ( 292, NGX_MCP_annunVS);
            IOCP.sendVarData ( 293, NGX_MCP_annunCMD_A);
            IOCP.sendVarData ( 294, NGX_MCP_annunCWS_A);
            IOCP.sendVarData ( 295, NGX_MCP_annunCMD_B);    
            IOCP.sendVarData ( 296, NGX_MCP_annunCWS_B);
Sleep (400);
}
    return THREAD_EXIT_OK;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T11:07:14.157

先说几点：

没有人想知道你同时拥有 a`NGX_MCP_annunCMD_A`和 a `NGX_MCP_annunCMD_B`。我们对说明问题的一小段代码感兴趣，最好使用尽可能少的领域特定信息。如果它真的编译，那就太棒了。

您没有提到但应该有的两件事：

1.  是`PMDG_NGX_Data` [POD](http://en.wikipedia.org/wiki/Plain_old_data_structure)的所有成员（int、float、持有 int、float 的结构...）吗？

2.  既然你提到线程，所有的成员都是`PMDG_NGX_Data`独立的，还是你需要一个锁定机制？

关于您的第一个功能，`ProcessNGXData`：

如果 的所有成员`PMDG_NGX_Data`都是 POD 并且它处理结构的所有成员，那么它等效于更短并且可能更快：

```
PMDG_NGX_Data NGX_MCP_bakup;
void ProcessNGXData (PMDG_NGX_Data *pS) 
{
    NGX_MCP_bakup = *pS;
} 
```

作为原始问题的解决方案，您可以尝试以下方法：

*   在 basic 上创建一个包装类`PMDG_NGX_Data`，这将负责跟踪更改。
*   这个包装器通过 getter 和 setter 公开底层结构的字段。
*   设置器检测设置的值是否与当前值不同，如果是，则更改该值并将其添加到更改列表（ID 和新值对的列表）。
*   包装类还有一个方法，它接受一个`IOCP`对象，调用`sendVarData`更改列表中的每个 ID 和值并清除更改列表。

确保添加必要的锁定并处理在调用“发送更改功能”之间多次更改相同参数的情况

与所有优化一样：“您确定有必要吗？” 和“确保测试并看到它实际上效果更好。”

# android - Wi-Fi Direct场景下如何获取每台设备的IP地址？

> ID：10053385
> 
> 赞同：20
> 
> 时间：2012-04-07T09:41:13.187
> 
> 标签：android, wifi, android-wifi, wifimanager, wifi-direct

从 ICS 开始，引入了 Wi-Fi Direct。正常情况下，我们使用`WifiP2pManager`该类在 Wi-Fi Direct 上进行操作，但它似乎只能在连接后检索 GroupOwner IP 地址。但是，实际上，任何设备都来协商成为GroupOwner。在上层应用程序中，我们需要获取对等体的 IP 地址，或组中每个对等体的 IP 地址，以便我们可以与它们进行发送/通信。

如何在 Wi-Fi Direct 中获取每个 IP 地址？包括自己的 IP 地址和组中的每个对等方？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-12T15:19:01.963

我遇到了同样的问题。由于两个设备都知道组所有者的 ip，因此已经可以向组所有者发送消息。您发送的第一条消息可以包含其他设备的 IP 地址；从此，双向通信成为可能。

这是在 java 中检索您的 ip 的一种可能性：

```
private byte[] getLocalIPAddress() {
    try { 
        for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) { 
            NetworkInterface intf = en.nextElement(); 
            for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) { 
                InetAddress inetAddress = enumIpAddr.nextElement(); 
                if (!inetAddress.isLoopbackAddress()) { 
                    if (inetAddress instanceof Inet4Address) { // fix for Galaxy Nexus. IPv4 is easy to use :-) 
                        return inetAddress.getAddress(); 
                    } 
                    //return inetAddress.getHostAddress().toString(); // Galaxy Nexus returns IPv6 
                } 
            } 
        } 
    } catch (SocketException ex) { 
        //Log.e("AndroidNetworkAddressFactory", "getLocalIPAddress()", ex); 
    } catch (NullPointerException ex) { 
        //Log.e("AndroidNetworkAddressFactory", "getLocalIPAddress()", ex); 
    } 
    return null; 
}

private String getDottedDecimalIP(byte[] ipAddr) {
    //convert to dotted decimal notation:
    String ipAddrStr = "";
    for (int i=0; i<ipAddr.length; i++) {
        if (i > 0) {
            ipAddrStr += ".";
        }
        ipAddrStr += ipAddr[i]&0xFF;
    }
    return ipAddrStr;
}

ip = getDottedDecimalIP(getLocalIPAddress()); 
```

将此 ip 包装在 Serializable 对象中并将其发送给组所有者，就像您发送任何其他对象一样。考虑这是您的 wifi-direct 协议的第一步......现在，组所有者也有一个 IP 可以发送答案。

这对我有用，尽管我认为我必须自己实现这一点很奇怪，而且我只能轻松找到组所有者 ip（info.groupOwnerAddress.getHostAddress(); //带有 WifiP2pInfo 实例的信息）。也许有一种类似的方法可以检索其他同行的 ip，但我找不到。如果有请联系我。

祝你好运...

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-25T16:10:39.493

您能得到的最佳答案可能来自 Mano：

> 我遇到了同样的问题。由于两个设备都知道组所有者的 ip，因此已经可以向组所有者发送消息。您发送的第一条消息可以包含其他设备的 IP 地址；从此，双向通信成为可能。

这是我实现它的方式。当我通过 WiFi Direct 将客户端连接到群组所有者时，我会获取群组所有者的 IP 地址，并通过套接字向群组所有者发送消息。就像是：

```
Socket socket = new Socket();
socket.setReuseAddress(true);
socket.connect((new InetSocketAddress(mIP, mPort)), SOCKET_TIMEOUT);
OutputStream os = socket.getOutputStream();
ObjectOutputStream oos = new ObjectOutputStream(os);
oos.writeObject(new String("BROFIST");
oos.close();
os.close();
socket.close(); 
```

您已经知道*mIP*（群组所有者的 IP 地址），只需确定一个*mPort*并接收群组所有者的连接，如下所示：

```
Socket serverSocket = new ServerSocket(mPort);
serverSocket.setReuseAddress(true);
Socket client = serverSocket.accept();
ObjectInputStream objectInputStream = new ObjectInputStream(client.getInputStream());
Object object = objectInputStream.readObject();
if (object.getClass().equals(String.class) && ((String) object).equals("BROFIST")) {
  Log.d(TAG, "Client IP address: "+client.getInetAddress());
} 
```

这是我正在使用的实际代码。我将用一些有用的信息替换此消息，例如包含发送者 MAC 的消息对象，它可用于了解 MAC-IP 关系，因为**WifiP2pDevice**仅提供 MAC 和**InetAddress** IP（有人知道是否有没有办法从**InetAddress**对象中获取 MAC？）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-03T06:28:22.610

我已经完成了一个演示项目，它能够获取每个设备的 ip 并将数据从一个设备发送到另一个设备（是否是组所有者）。网址是：

[https://github.com/ahmontero/wifi-direct-demo](https://github.com/ahmontero/wifi-direct-demo)

我希望它对你有帮助！

编辑：基本上在 ARP 缓存中查找 IP 地址，如下所示：

```
public static String getIPFromMac(String MAC) {
    BufferedReader br = null;
    try {
        br = new BufferedReader(new FileReader("/proc/net/arp"));
        String line;
        while ((line = br.readLine()) != null) {

            String[] splitted = line.split(" +");
            if (splitted != null && splitted.length >= 4) {
                // Basic sanity check
                String device = splitted[5];
                if (device.matches(".*p2p-p2p0.*")){
                    String mac = splitted[3];
                    if (mac.matches(MAC)) {
                        return splitted[0];
                    }
                }
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        try {
            br.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return null;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-14T18:11:35.397

我已经能够在 WiFi 直接网络中以两种方式连接和发送。所有设备都知道组所有者的 IP 地址。我们从为通信创建的套接字中获取对等 IP。不知何故，从服务器端（组所有者）的套接字获取 IP 对我不起作用。因此，我从该设备本身向群组所有者发送单个设备的 IP。要获取 IP，只需创建一个套接字并将其绑定到任何本地端口，然后从该套接字获取地址并将其发送给所有者。我使用了 UDP 套接字，但它与 TCP 套接字一起工作得很好。

```
DatagramSocket socket=null;
     try {
        socket=new DatagramSocket();
        socket.connect((new InetSocketAddress(host, port)));
        String address=socket.getLocalAddress().getHostAddress();
        ByteBuffer bb=ByteBuffer.allocate(2+address.length());
        bb.putChar('I');
        bb.put(address.getBytes());
        DatagramPacket pkt=new DatagramPacket(bb.array(),2+address.length());
        socket.send(pkt);
        Log.d(WiFiDirectActivity.TAG,"address"+address+"dest"+host);
        Log.d(WiFiDirectActivity.TAG,"send");
    } catch (SocketException e) {
        Log.e(WiFiDirectActivity.TAG,"error socketException");
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }finally {
        if (socket != null) {
            if (socket.isConnected()) {
                socket.close();
            }
    } 
```

`host`是我们从连接信息中获得的组所有者的地址。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-10-18T08:23:42.773

我有另一种方法！

当您在 2 个（或更多）设备之间创建连接时，您无法设置谁是所有者以及谁是（是）客户。

您拥有的唯一信息是连接广播接收器时，您会收到一个对象“WifiP2pInfo”。该对象包含 2 个有趣的信息：

*   所有者 IP 地址 (mWifiP2PInfo.groupOwnerAddress)。此字符串以“/”开头。不要忘记删除它！;)
*   如果您是所有者（mWifiP2PInfo.isGroupOwner）

从那里你有你需要的一切！

如果您是 groupOwner => 侦听连接

否则使用 ip 地址创建与所有者的连接。

```
if (mWifiP2PInfo.isGroupOwner) {
    serverSocket = new ServerSocket(port);
    socket = serverSocket.accept();
} else {
    // If the client is not listening when the server create the connection, the connection is not established => Try again
    int retry = 10;

    socket = new Socket();
    socket.bind(null);
    do {
        socket.connect((new InetSocketAddress(mWifiP2PInfo.groupOwnerAddress, port)), 500);
        retry--;
    } while (!socket.isConnected() && retry > 0);
} 
```

希望能帮到你！！！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-24T05:42:43.250

请使用此方法获取 IP 地址。

```
 public static String getIpAddress() {
    try {
        List<NetworkInterface> interfaces = Collections
                .list(NetworkInterface.getNetworkInterfaces());
        /*
         * for (NetworkInterface networkInterface : interfaces) { Log.v(TAG,
         * "interface name " + networkInterface.getName() + "mac = " +
         * getMACAddress(networkInterface.getName())); }
         */

        for (NetworkInterface intf : interfaces) {
            if (!getMACAddress(intf.getName()).equalsIgnoreCase(
                    Globals.thisDeviceAddress)) {
                // Log.v(TAG, "ignore the interface " + intf.getName());
                // continue;
            }
            if (!intf.getName().contains("p2p"))
                continue;

            Log.v(TAG,
                    intf.getName() + "   " + getMACAddress(intf.getName()));

            List<InetAddress> addrs = Collections.list(intf
                    .getInetAddresses());

            for (InetAddress addr : addrs) {
                // Log.v(TAG, "inside");

                if (!addr.isLoopbackAddress()) {
                    // Log.v(TAG, "isnt loopback");
                    String sAddr = addr.getHostAddress().toUpperCase();
                    Log.v(TAG, "ip=" + sAddr);

                    boolean isIPv4 = InetAddressUtils.isIPv4Address(sAddr);

                    if (isIPv4) {
                        if (sAddr.contains("192.168.49.")) {
                            Log.v(TAG, "ip = " + sAddr);
                            return sAddr;
                        }
                    }

                }

            }
        }

    } catch (Exception ex) {
        Log.v(TAG, "error in parsing");
    } // for now eat exceptions
    Log.v(TAG, "returning empty ip address");
    return "";
}

public static String getMACAddress(String interfaceName) {
        try {
            List<NetworkInterface> interfaces = Collections
                    .list(NetworkInterface.getNetworkInterfaces());

            for (NetworkInterface intf : interfaces) {
                if (interfaceName != null) {
                    if (!intf.getName().equalsIgnoreCase(interfaceName))
                        continue;
                }
                byte[] mac = intf.getHardwareAddress();
                if (mac == null)
                    return "";
                StringBuilder buf = new StringBuilder();
                for (int idx = 0; idx < mac.length; idx++)
                    buf.append(String.format("%02X:", mac[idx]));
                if (buf.length() > 0)
                    buf.deleteCharAt(buf.length() - 1);
                return buf.toString();
            }
        } catch (Exception ex) {
        } // for now eat exceptions
        return "";
        /*
         * try { // this is so Linux hack return
         * loadFileAsString("/sys/class/net/" +interfaceName +
         * "/address").toUpperCase().trim(); } catch (IOException ex) { return
         * null; }
         */
    } 
```

# ios - Fbconnect 在 ios 出现白色空白屏幕

> ID：10053387
> 
> 赞同：0
> 
> 时间：2012-04-07T09:41:28.443
> 
> 标签：ios, screen, sharekit, fbconnect

我需要 ios 应用程序的 facebook 共享组件。我使用 fbcoonect 但它不能正常工作。在登录屏幕之后，当我使用 fbdialog 时它会出现白屏。sharekit 示例也给出了相同的错误。照片共享有效，但文本、链接共享在 sharekit 默认示例中不起作用。当您想分享某些内容时，它会在登录对话框后显示白色的空白屏幕。任何想法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-07T10:38:31.987

试试这个代码，它会工作。不要忘记在 .plist 和代码中添加您的 APP_ID。

```
-(void)buttonPressed:(id)sender{
facebook = [[Facebook alloc] initWithAppId:@"YOUR_APP_ID" andDelegate:self];

 NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
        if ([defaults objectForKey:@"FBAccessTokenKey"] && [defaults objectForKey:@"FBExpirationDateKey"]) {
            facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
            facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
        }
if (![facebook isSessionValid]) {
    [facebook authorize:nil];
}else{
[self postWall];
}
// Pre 4.2 support
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    return [facebook handleOpenURL:url]; 
}
- (void)fbDidLogin {
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:[facebook accessToken] forKey:@"FBAccessTokenKey"];
    [defaults setObject:[facebook expirationDate] forKey:@"FBExpirationDateKey"];
    [defaults synchronize];
    [self postWall];
}
-(void)postWall{

    NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"https://developers.facebook.com/docs/reference/dialogs/",@"link",
                                   @"http://fbrell.com/f8.jpg",@"picture",
                                   @"Facebook Dialogs",@"name",
                                   @"Reference Documentation",@"caption",
                                   @"Using Dialogs to interact with users.",@"description",
                                   @"Facebook Dialogs are so easy!",@"message",
                                   nil];

    [[self facebook] dialog:@"feed" andParams:params andDelegate:self];

} 
```

# qt - 拥有多列 QTreeWidget 根项

> ID：10053388
> 
> 赞同：8
> 
> 时间：2012-04-07T09:41:37.273
> 
> 标签：qt, pyqt, qtreewidget

我正在使用 QTreeWidget 来显示类别中的项目。项目将使用几列，但我希望类别（即根项目）使用小部件的整个宽度。

我怎样才能做到这一点？

还有我的一段代码：

```
class BugsList(QtGui.QDialog):
    def __init__(self, parent, reports):
        super(BugsList, self).__init__(parent) # Call QDialog constructor
        self._tree = QtGui.QTreeWidget(self)
        self._tree.setColumnCount(NUMBER_OF_COLUMNS)
        # ...
        for category, bugs in reports:
            category_widget = QtGui.QTreeWidgetItem(self._tree, [category])
            # ... 
```

这是我的应用程序当前状态的屏幕截图： ![截屏](../Images/9d7060bc85cb0316c4dc3fcabe129dcb.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T11:02:29.463

使用 QTreeWidgetItem::setFirstColumnSpanned 修复。

# .net - 反序列化操作的回复消息正文时出错

> ID：10053391
> 
> 赞同：3
> 
> 时间：2012-04-07T09:42:06.600
> 
> 标签：.net, serialization, soap, axis

我在使用带有 dotNet 的服务引用方法与 SOAP Axis Web 服务进行通信时遇到了问题。

似乎当 dotNet 客户端反序列化传入的 xml 流时，它需要一个数组，但它实际上得到了一个对象。我认为从 Web 服务发送的 xml 消息可能存在问题，但看起来很正常。

错误信息：

```
Cannot assign object of type WebService.MessagingServices_SendMultiSMS_SendSuccess to an object of type WebService.MessagingServices_SendMultiSMS_SendSuccess[]. The error occurred while reading node with id='id1'. 
```

SOAP XML 消息：

```
<?xml version="1.0" encoding="utf-8"?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><soapenv:Body><ns1:sendMultiSMSResponse soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:ns1="http://DefaultNamespace"><sendMultiSMSReturn href="#id0"/></ns1:sendMultiSMSResponse><multiRef id="id0" soapenc:root="0" soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xsi:type="ns2:MessagingServices_SendMultiSMSResult" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:ns2="urn"><CallSuccess xsi:type="xsd:boolean">true</CallSuccess><CallErrorMessage xsi:type="xsd:string">Success</CallErrorMessage><SMSCount xsi:type="xsd:int">2</SMSCount><MultiSMSPostedList href="#id1"/><MultiSMSPostedList href="#id2"/></multiRef><multiRef id="id2" soapenc:root="0" soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xsi:type="ns3:MessagingServices_SendMultiSMS_SendSuccess" xmlns:ns3="urn" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/"><gRecipientName xsi:type="xsd:string">Me</gRecipientName><gRecipientMSISDNwithCC xsi:type="xsd:string">xxxxxx1</gRecipientMSISDNwithCC><gOutMsgID xsi:type="xsd:int">314437688</gOutMsgID></multiRef><multiRef id="id1" soapenc:root="0" soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xsi:type="ns4:MessagingServices_SendMultiSMS_SendSuccess" xmlns:ns4="urn" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/"><gRecipientName xsi:type="xsd:string">Me</gRecipientName><gRecipientMSISDNwithCC xsi:type="xsd:string">xxxxxx2</gRecipientMSISDNwithCC><gOutMsgID xsi:type="xsd:int">314437687</gOutMsgID></multiRef></soapenv:Body></soapenv:Envelope> 
```

# java - OSGI、Servlets 和 JPA hello world / 教程 / 示例

> ID：10053394
> 
> 赞同：3
> 
> 时间：2012-04-07T09:42:27.663
> 
> 标签：java, web-services, jpa, plugins, osgi

我想构建一个 Web 应用程序，它基本上是一个提供 json 消息的宁静 Web 服务。我希望它尽可能简单。我正在考虑使用 servlet（带注释）。JPA 作为数据库层是必须的——Toplink 或 Hibernate。最好在Tomcat上工作。我希望将应用程序划分为提供不同功能的模块（身份验证服务、客户服务等）。而且我希望能够更新这些模块而无需在服务器上重新安装整个应用程序 - 比如 eclipse 插件，通知用户（当他输入 webapp 的主页 url 时）更新可用，单击它，应用程序正在下载并安装更新的模块.

我认为这个功能可以用 OSGI 来实现，但我找不到任何示例代码，或简单的 hello world 可更新 servlet 教程，通过 jpa 从数据库提供一些数据。

我正在寻找一个建议： - OSGI 是正确的工具还是可以用更简单的方法来完成？- 我在哪里可以找到一些涵盖该项目所需主题（或多个主题）的示例。- 对于这项任务，哪种 OSGI 实现最简单。

*我的OSGI知识是基础的。我知道捆绑包是如何描述的，我了解 OSGI 容器的概念及其作用。我还没有创建任何 OSGI 应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T05:28:00.320

我认为 OSGi 非常适合您所描述的内容，是的。一旦您将 servlet 和 JPA 添加到组合中，您就会考虑使用所谓的企业 OSGi，它是核心 OSGi 之上的一层功能。有两个主要的实现，Apache Aries 和 Eclipse Gemini。这些已预先集成到各种服务器中，包括 Apache Geronimo，或者您可以推出自己的堆栈。（我是白羊座的提交者。）

有关使用 Aries 进行 Web 开发的教程，请查看[http://www.javabeat.net/articles/378-writing-an-osgi-web-application-1.html](http://www.javabeat.net/articles/378-writing-an-osgi-web-application-1.html)。白羊座本身有一个示例，您可以下载和使用，apache.org/downloads/blogsample-0.3.html。但是，它比 Hello World 稍微复杂一些，并且您可能需要比当前水平更多的 OSGi 知识才能充分利用它。作为一个起点，我建议您熟悉一个 OSGi 控制台（博客示例使用的是 Equinox 控制台）来了解您的系统中发生了什么。对于 Equinox，ss 命令最有用，而 bundle 命令是我接下来最常使用的命令。

如果您搜索企业 OSGi、servlet 和 JPA，您应该会找到一些有用的资源。DeveloperWorks 有几篇文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T18:18:52.967

如果您想让它尽可能简单，您可以使用 OSGi 框架，Jetty 作为 Web 引擎，EclipseLink 作为 JPA 引擎，Apache ACE 作为 OSGi 分发框架，而无需任何其他 OSGi 企业功能。

一些有用的链接：

*   [码头 OSGi 集成](http://wiki.eclipse.org/Jetty/Feature/Jetty_OSGi)
*   [阿帕奇王牌](http://ace.apache.org/user-doc/getting-started.html)
*   [OSGi JPA 示例](https://github.com/dpishchukhin/org.knowhowlab.tips.jpa)

# javascript - Ajax 响应动态加载特定 div 中返回的 javascript

> ID：10053398
> 
> 赞同：1
> 
> 时间：2012-04-07T09:43:36.650
> 
> 标签：javascript, ajax

我有一个返回 div 和 javascript 的 php 文件。我想更改一个特定的 div（实际上是它的内容），所以 Ajax 的代码如下

```
<script type="text/javascript">
function changemainpage(id) {

  if (window.XMLHttpRequest)
   { //code for IE7+. Ffirefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
   }  
   else { //code for IE6,IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
   }

   xmlhttp.onreadystatechange=function(){
    if (xmlhttp.readyState==4)
    { 
        HandleResponse(xmlhttp.responseText);
    }
   }

   xmlhttp.open("GET","./newgraph.php?id=unit"+id,true);
   xmlhttp.send(null);

}

function HandleResponse (response) {

    document.getElementById('content').innerHTML=response;
    document.getElementById('content').src=document.getElementById('content').src;
}

function ChangeMainContent(id, graph){
    $('#content').load('newgraph/index.php?id=' + id,'&graph='+graph);
}

</script> 
```

现在的问题在于，当内容更改时，它不会被解析为 javascript。这是 newgraph.php 中的 php 代码

```
<?php 
echo "<!--dygraphs are not happy when placed inside a <center> tag. If you want to center a Dygraph, put it inside a table a table with align=center set. For more options go to dygraphs.com/options-->\n
<div id=\"graphid\" onLoad='refresh()' style=\"width:320px; height:290px;\"></div>\n";

?>
<?php 
//$table="unit1";
$table=$_GET['id'];
$ylabel="EnergyReckVARh"; //Available are Error BIT(1), UTCOffsetMin SMALLINT, LocalDatetime DATETIME, EnergyDeliveredkWh INT, EnergyReceivedkWh INT, EnergyDelkVARh INT, EnergyReckVARh INT, ApparentPowerTotalkVA SMALLINT, RealPowerTotalkW SMALLINT, ReactivePowerTotalkVAR SMALLINT
$outfile='outfile.csv';

echo $table;
//delete file in case it exists
//unlink($outfile);

//show database table
    include './database/config.php';
    include './database/opendb.php';

    $csv_output.='LocalDatetime,';
    $csv_output.=$ylabel;
    $csv_output.="\n";

    $result=mysql_query("SELECT LocalDatetime,".$ylabel." FROM ".$table." ORDER BY LocalDatetime");
    $dbcols = mysql_num_fields($result);
    $dbrows = mysql_num_rows($result);
    while ($row=mysql_fetch_row($result)){
        for ($i=0;$i<$dbcols;$i++){
            $csv_output.=$row[$i].",";
        }
        $csv_output=substr_replace($csv_output,"",-1);  //remove that last ","
        $csv_output.="\n";
    };

    $handle=fopen($outfile, 'w') or die ("Can;t open file");
    fwrite($handle, $csv_output);
    fclose($handle);

    //close database
    include './database/closedb.php';

echo "<script type=\"text/javascript\">
    var datamatrix=[];\n";

    //\"2008-05-07 18:00:00,75\\n\" +
    //\"2008-05-07 18:05:00,90\\n\" +
    //\"2008-05-07 18:06:00,80\\n\",
echo    "var ylabel='".$ylabel."';
    var tablet='".$table."';";

 echo "  
   var opts =     {
    title: ylabel+' for '+tablet,   
    ylabel: ylabel,     
    //showRangeSelector: true,
    legend: 'always',
    //rollPeriod: 50,
    showRoller: true,
    rangeSelectorPlotFillColor: '#A7B1C4',
    rangeSelectorPlotStrokeColor: 'red',
    fillGraph: true,
    //rangeSelectorHeight: '30'

    };

    alert(\"New Javascript is running\");
    g = new Dygraph(

    // containing div
    document.getElementById(\"graphid\"),
    // CSV or path to a CSV file.
    //\"Date,$ylabel\\n\" +\".\"\n
    \"$outfile\",
    //\"outfile.csv\",
    opts
    );
";

echo "</script>";

echo "dbrows are $dbrows";

?> 
```

php文件返回代码但没有被解析为javascript，即alert没有弹出新窗口！如果我从一开始就运行它，一切都会很好。我虽然

```
 document.getElementById('content').src=document.getElementById('content').src; 
```

会做的伎俩，但事实并非如此。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T09:50:14.920

我不知道您为什么要创建自己的 Xml 请求，因为您已经在使用 jQuery。

只需扔掉完整的 JS 代码，然后执行以下操作：

```
function changemainpage(id) {
    $('#content').load('./newgraph.php?id=unit'+id);
} 
```

jQuery 也会执行传入页面中包含的 JS 代码。

# r - 安装 2.15 后 ggplot2 中的 alpha 通道不起作用

> ID：10053399
> 
> 赞同：6
> 
> 时间：2012-04-07T09:43:48.380
> 
> 标签：r, ggplot2

更新到 R 2.15 后，ggplot 中的 alpha 通道似乎不再起作用。

```
plot(rnorm(100),rnorm(100),bg="#cc000055",pch=21) 
```

工作得很好但是

```
qplot(rnorm(100),rnorm(100),color="#cc000044") 
```

才不是！此外，不再找到 ggplot2 包中的 alpha() 函数（我也尝试过 ggplot2::alpha()。

这是一个已知问题吗？我在网上找不到任何关于...

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T10:25:33.537

我可以使用 R-2.15.0 和 ggplot2 0.9.0 复制该问题。

正如 Ben 所指出的，在 ggplot2 中指定半透明的标准方法是提供一个明确的`alpha`参数。您应该尝试将其用于所有新的绘图代码。

我认为一个案例可以使 ggplot 应该通过 color 参数支持旧的 alpha 规范。如果您对此有强烈的感觉，请[提出问题](https://github.com/hadley/ggplot2/issues)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-23T16:38:08.210

上面的评论中引用了这一点，但是如果您正在使用一些旧的 ggplot 代码并且 R 在调用后抛出错误，则`alpha()`需要显式加载`library(scales)`到您的 R 环境中。

# java - 今天点击的图片

> ID：10053408
> 
> 赞同：1
> 
> 时间：2012-04-07T09:45:17.740
> 
> 标签：java, android

我想从今天单击的图库中提取所有图像我尝试使用托管查询我正在获取图像数据、路径和其他所有内容，但我无法获取添加的日期，因为它返回一个字符串值“date_added”

那么有什么办法可以解决这个问题吗？

这是我正在使用的查询

```
final String[] columns = { MediaStore.Images.Media.DATA, MediaStore.Images.Media._ID,
                                MediaStore.Images.DATE_ADDED };
final String orderBy = MediaStore.Images.Media._ID;
Cursor imagecursor = managedQuery(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, columns,
                        MediaStore.Images.Media.DATE_ADDED +"= '"+ + "'",
                        null, orderBy);// Couldn't get what to fill here 
```

# python - 互联网浏览器 Qt4 小部件？

> ID：10053409
> 
> 赞同：0
> 
> 时间：2012-04-07T09:45:19.537
> 
> 标签：python, windows, qt4, pyqt4

我想在 GUI 中显示一个小框（400x85），它在网络上以 HTML 文件的形式显示。这个`QtWebKit`类得到了他的`QWebView`小部件，但整个`QtWebKit`类非常重，重 16MB，并且在三秒内减慢了应用程序的初始化。

`QtWebKit`仅仅为了显示一个 HTML 页面就不需要加载整个类。可以使用 IE 内置的网络引擎吗？（通过 ActiveX 对象之类的？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T00:20:44.913

您可以通过 ActiveQT 使用 Internet Explorer。“yourqtdir\4.8.0\examples\activeqt\webbrowser”中有一个 c++ 示例。

# matlab - Matlab中的神经网络工具

> ID：10053414
> 
> 赞同：1
> 
> 时间：2012-04-07T09:46:23.723
> 
> 标签：matlab, neural-network

我希望在 MATLAB 中设计一个基于 fisheriris 数据集的多层前馈神经网络分类器。

怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T10:37:04.680

MATLAB 中两个最常用的神经网络工具箱是：

*   [神经网络工具箱](http://www.mathworks.com/products/neural-network/index.html)
*   [网络实验室](http://www1.aston.ac.uk/eas/research/groups/ncrg/resources/netlab/)

这是[Neural Network Toolbox](http://www.mathworks.com/products/neural-network/index.html)文档中的一个演示，它说明了使用神经网络作为分类器从螃蟹的物理尺寸识别螃蟹的性别，您可以从中获取 iris 数据集的灵感：[http://www .mathworks.com/products/neural-network/demos.html?file=/products/demos/shipping/nnet/classify_crab_demo.html](http://www.mathworks.com/products/neural-network/demos.html?file=/products/demos/shipping/nnet/classify_crab_demo.html)

# asp.net - 如何在asp .net mvc2中反序列化jqgrid多个组搜索条件

> ID：10053415
> 
> 赞同：2
> 
> 时间：2012-04-07T09:46:33.027
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-2, serialization, jqgrid

如果使用多个分组，jqgrid 高级搜索可以生成搜索条件，如

```
{"groupOp":"AND","rules":[],"groups":[{"groupOp":"AND","rules":[{"field":"Nimi","op":"cn","data":"kk"},{"field":"Nimi","op":"cn","data":"kkk"}],"groups":[]}]} 
```

尝试在 ASP .NET MVC2 中使用反序列化它

```
 var serializer = new JavaScriptSerializer();
            var filtersList = serializer.Deserialize<Filter>(_filters);

class Filter
{
    public GroupOp groupOp { get; set; }
    public List<Rule> rules { get; set; }
    public List<Filter> groups { get; set; }
}

class Rule
{
    public string field { get; set; }
    public Operations op { get; set; }
    public string data { get; set; }
}

enum GroupOp
{
    AND,
    OR
}

enum Operations
{
    eq, // "equal"
    ne, // "not equal"
    lt, // "less"
    le, // "less or equal"
    gt, // "greater"
    ge, // "greater or equal"
    bw, // "begins with"
    bn, // "does not begin with"
    @in, // "in"
    ni, // "not in"
    ew, // "ends with"
    en, // "does not end with"
    cn, // "contains"
    nc  // "does not contain"
} 
```

返回空的 filtersList.rules 属性

如何从这些数据中得到正确的规则？

**更新**

筛选

```
 {"groupOp":"AND","rules":[{"field":"Nimi","op":"cn","data":""},
{"field":"Nimi","op":"cn","data":""},{"field":"Nimi","op":"cn","data":""}],
"groups":[{"groupOp":"AND","rules":[],"groups":[]},{"groupOp":"AND","rules":
[{"field":"Nimi","op":"cn","data":""}],"groups":[{"groupOp":"AND","rules":[],
"groups":[{"groupOp":"AND","rules":[],"groups":[]},{"groupOp":"AND","rules":[],"groups":[{"groupOp":"AND","rules":[],"groups":[{"groupOp":"AND","rules":[],
"groups":[{"groupOp":"AND","rules":[],"groups":[{"groupOp":"AND","rules":[],"groups":[]},{"groupOp":"AND","rules":[],"groups":[]}]}]}]}]},{"groupOp":"AND","rules":[{"field":"Nimi","op":"cn","data":""}],"groups":[{"groupOp":"AND","rules":[{"field":"Nimi","op":"cn","data":""},{"field":"Nimi","op":"cn","data":""}],
"groups":[]}]},{"groupOp":"AND","rules":[],"groups":[]},{"groupOp":"AND","rules":[],"groups":[]},{"groupOp":"AND","rules":[],"groups":[]},{"groupOp":"AND","rules":[],"groups":[]}]}]}]} 
```

在引用的答案中使用更新部分的代码仍然会产生无效的 where

```
 ((klient.Nimi ILIKE ('%' || E'' || '%') ESCAPE '!')AND(klient.Nimi ILIKE
 ('%' || E'' || '%') ESCAPE '!')AND(klient.Nimi ILIKE ('%' || E'' || '%') ESCAPE '!'))AND
((((klient.Nimi ILIKE ('%' || E'' || '%') ESCAPE '!'))AND(((((())))AND(((klient.Nimi ILIKE ('%' || E'' || '%') ESCAPE '!'))AND(((klient.Nimi ILIKE ('%' || E'' || '%') ESCAPE '!')
AND(klient.Nimi ILIKE ('%' || E'' || '%') ESCAPE '!')))))))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T20:54:50.850

我看代码没问题

```
const string filters = "{\"groupOp\":\"AND\",\"rules\":[]," +
    "\"groups\":[{\"groupOp\":\"AND\",\"rules\":[" +
        "{\"field\":\"Nimi\",\"op\":\"cn\",\"data\":\"kk\"}," +
        "{\"field\":\"Nimi\",\"op\":\"cn\",\"data\":\"kkk\"}],\"groups\":[]}]}";

var serializer = new JavaScriptSerializer();
var filtersList = serializer.Deserialize<Filter>(filters); 
```

产生`filtersList`where`filtersList.rules`是空的列表。它对应于您拥有的输入数据。另一方面，该`filtersList.groups`部分不是空的。从上面的`filtersList`代码将产生`Filter`相当于以下直接初始化的对象：

```
var filtersList = new Filter {
    groupOp = GroupOp.AND,
    rules = new List<Rule>(0),
    groups = new List<Filter> {
        new Filter {
            groupOp = GroupOp.AND,
            rules = new List<Rule> {
                new Rule {field = "Nimi", op = Operations.cn, data = "kk"},
                new Rule {field = "Nimi", op = Operations.cn, data = "kkk"}
            },
            groups = new List<Filter>(0)
        }
    }
}; 
```

如果一个人从一个人那里解析信息，`filtersList`最后仍然可以得到`WHERE`如下语句

```
(Nimi LIKE '%kk%') AND (Nimi LIKE '%kkk%') 
```

[例如，请参阅答案](https://stackoverflow.com/a/10052736/315935)的更新部分的代码。确切地说，答案产生的代码`((Nimi LIKE '%kk%')AND(Nimi LIKE '%kkk%'))`实际上是相同的。

# android - 如何更改默认主屏幕

> ID：10053418
> 
> 赞同：0
> 
> 时间：2012-04-07T09:46:57.967
> 
> 标签：android, android-intent, homescreen

我创建了一个主屏幕应用程序并将其设置为默认主屏幕，但是如何调用选择器以从应用程序中再次将旧的主屏幕设为默认？我正在考虑一些意图..

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T09:57:03.983

转到您的应用程序 AndroidManifest.xml 文件并 - 应用程序选项卡 -> 选择您的活动 -> 转到右侧名称 * -> 浏览 -> 等待一段时间以加载活动列表 -> 选择您要保留为默认活动的活动 - > 如果该活动先前已添加到应用程序列表中，则删除该活动。

# java - 如何使用 POI SXSSF 读取大型电子表格

> ID：10053421
> 
> 赞同：13
> 
> 时间：2012-04-07T09:47:04.497
> 
> 标签：java, file, xls

我正在尝试使用 SXSSF 读取 xls 文件。我已经阅读了有关 SXSSF 的信息，但不明白如何使用它。所以我遇到了一些问题。

任何人都可以帮助我阅读大型 xls 文件（大约 100,000 行和 7-8 张）的 java 代码。

**（从评论中编辑）**

这是我尝试过的：

```
Workbook workBook = new SXSSFWorkbook(200); 
workBook = WorkbookFactory.create(inputStream); 
Sheet sheet = workBook.getSheetAt(0); 
int totalRows = sheet.getPhysicalNumberOfRows(); 

for (int i=0; i<totalRows; i++) { 
    Row row = sheet.getRow(i); 
    int totalCols = row.getPhysicalNumberOfCells(); 
    for(int j=0; j<totalCols; j++) { 
        Cell cell = row.getCell(j); 
    } 
 } 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-07-01T17:07:09.367

SXSSF 仅用于写入大型 excel 文件 (xlsx)，而不用于读取。

要读取大型 excel 文件，请参阅 Apache POI 的基于 SAX 解析的事件处理 API： [https](https://poi.apache.org/components/spreadsheet/how-to.html) ://poi.apache.org/components/spreadsheet/how-to.html 。

一个非常好的工作示例位于： [https ://svn.apache.org/repos/asf/poi/trunk/src/examples/src/org/apache/poi/examples/xssf/eventusermodel/XLSX2CSV.java](https://svn.apache.org/repos/asf/poi/trunk/src/examples/src/org/apache/poi/examples/xssf/eventusermodel/XLSX2CSV.java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-02T12:56:06.307

> SXSSF（自 3.8-beta3 起）– 是 XSSF 的 API 兼容的流式扩展，可在**必须生成非常大的电子表格时使用**

如您所见，当要生成大型电子表格时，明确指定使用 SXSSF。您可以使用**XSSF**。它是相似的，也足够好。

# google-maps - 谷歌地理定位

> ID：10053423
> 
> 赞同：0
> 
> 时间：2012-04-07T09:47:22.647
> 
> 标签：google-maps

从谷歌地图得到一个关于地理定位的问题。

假设我们有一个小城市，在谷歌地图上没有任何街道标记。当我在查询中不提供街道时，地理定位工作正常，但提供街道时，结果完全一团糟。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T09:53:58.687

前段时间我遇到了同样的问题。

我联系了谷歌并告诉他们如果没有找到结果，他们应该在没有街道名称的情况下重试地理定位。他们告诉我，他们正在为此研究解决方案，并且他们正在不断建立他们的街道名称数据库。

如果结果不合适，我最终会使用街道名称进行一次 API 调用，我会在没有街道名称的情况下重试。

# scala - 游戏中的模拟对象[2.0]

> ID：10053424
> 
> 赞同：8
> 
> 时间：2012-04-07T09:47:37.890
> 
> 标签：scala, testing, dependency-injection, playframework, playframework-2.0

我想通过在测试期间提供模拟对象来测试我的 Play 应用程序。在我的脑海中，有几种方法可以解决这个问题。

1.  在测试期间提供替代路由文件
2.  使用依赖注入，并在运行时检查全局值

我不确定哪个更可行，或者如何去做。任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-11T22:03:32.467

还有第三种方式；将您的控制器创建为用于测试的类或特征。这是一个简单的例子。

你的特质+实现：

```
package services

trait MyService {
  def getUser(id:String):User
}

class ConcreteService extends MyService {
  override def getUser(id:String):User = {
  //Do real stuff
  }
} 
```

在您的控制器类中：

```
package controllers

import services._

class Users(service: MyService) extends Controller {
  def show(id: String) = Action {
    val user = service.getUser(id)
    Ok(views.html.user(user))
  }
}

object Users extends controllers.Users(new ConcreteService()) {} 
```

现在你可以运行一些单元测试..

```
package test

import controllers.Users
import play.api.test._
import play.api.test.Helpers._

import org.specs2.mock.Mockito
import org.specs2.mutable.Specification

class UsersSpec extends Specification with Mockito {
  val service = mock[MyService]

  "Users controller" should {
    "list users" in {
      //Insert mocking stuff here

      val users = new Users(service)
      val result = users.show("somerandomid")(FakeRequest())
      status(result) must equalTo(OK)
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-03T13:38:48.150

我有同样的问题，并尝试了一些选项：

*   蛋糕图案
*   通过隐式注入
*   春天

[你可以在这里](https://github.com/yanns/play2-scala-DI)看到 github 上的代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-28T21:45:49.133

我的解决方案类似于 Blake 的解决方案，只是我在没有控制器作为类的情况下做到了。你可以在这里查看[源代码](https://github.com/kaeawc/play-cake-pattern)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-25T09:22:05.727

作为参考，我添加了一个使用 Play 的插件框架在测试期间注入模拟对象的示例。

1.  [http://www.underflow.ca/blog/935/mock-dependency-injection-in-play-2-0](http://www.underflow.ca/blog/935/mock-dependency-injection-in-play-2-0)

使用此方法可以在测试时提供模拟插件：

```
class Test extends Specification {
    "application" should {
        "load mock dependency" in {
            running(TestServer(9000, FakeApplication(

            // The plugin at this class replaces the default
            additionalPlugins = Seq("test.MockInjector")

            )), HTMLUNIT) { browser =>
                browser.goTo("http://localhost:9000")

                // Test mock controller

            }
        }
    }
} 
```

可`MockInjector`用于提供控制器对象或任何其他可注入组件。

*注意*：我写了博客条目，任何人都可以自由地将博客中的任何和所有内容迁移到这里。

# c# - 使用预定义的用户名和密码以管理员身份运行应用程序

> ID：10053428
> 
> 赞同：2
> 
> 时间：2012-04-07T09:48:27.467
> 
> 标签：c#, windows, file-io, permissions, administrator

在我的应用程序中，我有一些将数据存储在用户硬盘上的 Save 方法。一旦应用程序仍然可以访问、更改和删除这些文件，怎么可能阻止用户访问、更改或删除这些文件？

可能的解决方案是以管理员身份在一个受限用户上运行应用程序，该用户无权访问保存文件夹，但使用存储在应用程序中的系统管理员的预定义用户名和密码。

我已经阅读了与 UAC、Application Manifest 一起使用的其他主题。

正如我在标题中提到的，***是否可以在没有用户交互的情况下以管理员身份运行程序？***

编辑 1：我正在寻找适用于所有版本的 windows（XP、Vista 和 7）的解决方案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T19:40:07.563

我假设您已经研究了 ACL 的功能，但您无法让它们满足您的需求。例如，您可以设置一个 ACL，允许任何用户创建文件，任何用户修改或删除他们创建的文件，但不能修改或删除其他用户的文件。

* * *

解决这个问题的正确方法是将应用程序分成两部分。一个作为 Windows 服务、Activate-As-Configured-User DCOM 服务器或其他提升的进程运行，另一个作为哑老用户运行。

当客户端应用程序希望执行需要提升的操作时，它会将请求传递给应用程序的提升部分。这将执行所需的任何安全检查、应用程序逻辑检查等，然后执行操作。

通过这种方式，您可以防止用户通过后门进入并弄乱您的应用程序数据。然而，它并没有真正帮助他们通过前门弄乱数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:37:28.090

@HarryJohnston 在评论中说：

*“要执行您的要求，请编写一个启动器应用程序，该应用程序使用 CreateProcessWithLogonW（具有已知的管理员用户名和密码）来启动真正的应用程序。请注意，有能力的用户将能够提取管理员凭据并以身份登录管理员。Ben 的答案（拆分应用程序）是正确的方法。*

这是我选择的答案。

# c# - 带有左连接和 sum() 的 Linq To SQL 抛出异常

> ID：10053429
> 
> 赞同：2
> 
> 时间：2012-04-07T09:48:55.377
> 
> 标签：c#, sql, linq

我有以下（简化的）数据库表：

```
Products
- ProductID, int, PK
- Name, varchar(50)

Orders
- OrderID, int, PK
- ProductID, int, FK
- Quantity, int, not null 
```

我想阅读所有产品，如果有订单，请将该产品的所有订单数量相加。

SQL 查询如下所示：

```
select p.ProductID, p.Name, sum(o.Quantity) from Products p 
left join Orders o on p.ProductID = o.ProductID
group by p.ProductID, p.Name 
```

现在，我想在 Linq-to-SQL 查询中翻译它。到目前为止，我已经做到了这一点：

```
var query =
    from p in Products
    join o in Orders on p.ProductID equals o.ProductID into po
    from subOrder in po.DefaultIfEmpty()
    group subOrder by new
    {
      p.ProductID,
      p.Name,
    }
    into productGroup
    select new
    {
      productGroup.Key.ProductID,
      productGroup.Key.Name,
      Quantity = productGroup.Sum(subOrder => subOrder.Quantity)
    }; 
```

虽然生成的 SQL 看起来不错，但我得到以下异常：

> InvalidOperationException：无法将 null 值分配给 System.Int32 类型的成员，该类型是不可为 null 的值类型。

有人可以告诉我查询有什么问题。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T09:50:43.193

改为使用`productGroup.Sum(subOrder => (int?)subOrder.Quantity)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T10:05:26.423

用它：

```
Quantity = productGroup.Sum(subOrder => (int?)subOrder.Quantity ?? 0) 
```

# c# - CrystalReport 总是显示相同的数据

> ID：10053430
> 
> 赞同：0
> 
> 时间：2012-04-07T09:48:58.967
> 
> 标签：c#, crystal-reports

我需要以编程方式显示数据，但我的代码总是显示相同的数据。即使我更改 WHERE em.emp_id=5 或 6 也一样

```
private void Form1_Load(object sender, EventArgs e)
{
    try
    {
        SqlConnection c = frmMain.connect();

        rptEmpProf cryRpt = new rptEmpProf();
        TableLogOnInfos crtableLogoninfos = new TableLogOnInfos();
        TableLogOnInfo crtableLogoninfo = new TableLogOnInfo();
        ConnectionInfo crConnectionInfo = new ConnectionInfo();
        Tables CrTables ;
        crConnectionInfo.ServerName = frmMain.dbSrvrName;
        crConnectionInfo.DatabaseName = frmMain.dbName;
        crConnectionInfo.UserID = frmMain.dbUsrName;
        crConnectionInfo.Password = frmMain.dbPass;
        CrTables = cryRpt.Database.Tables ;
        foreach (CrystalDecisions.CrystalReports.Engine.Table CrTable in CrTables)
        {
            crtableLogoninfo = CrTable.LogOnInfo;
            crtableLogoninfo.ConnectionInfo = crConnectionInfo;
            CrTable.ApplyLogOnInfo(crtableLogoninfo);
        }

        string q = "SELECT em.emp_id 'Employee ID', " +
            "em.emp_fname 'First Name', " +
            "em.emp_lname 'Last Name', " +
            "em.emp_phone 'Phone', " +
            "em.emp_email 'Email', " +
            "em.emp_addr 'Address', " +
            "em.emp_join_dt 'Join Date', " +
            "em.emp_salary 'Salary'," +
            "em.emp_card_no 'Card No.', " +
            "ds.dsg_name 'Designation', " +
            "dp.dept_name 'Department', " +
            "sf.sft_name 'Shift', " +
            "sc.sec_name 'Section' " +
        "FROM employee em INNER JOIN designations ds ON ds.dsg_id=em.emp_dsg_id " +
            "INNER JOIN sections sc ON sc.sec_id = ds.dsg_sec_id " +
            "INNER JOIN departments dp ON dp.dept_id = sc.sec_dept_id " +
            "INNER JOIN shifts sf ON sf.sft_id = em.emp_sft_id " +
        "WHERE em.emp_id = 6;";

        SqlCommand cmd = new SqlCommand(q, c);
        SqlDataAdapter da = new SqlDataAdapter();
        da.SelectCommand = cmd;
        DataSet ds = new DataSet();
        da.Fill(ds);
        cryRpt.SetDataSource(ds);
        crystalReportViewer1.ReportSource = cryRpt;
        crystalReportViewer1.Refresh();

        frmMain.disconnect(c);
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message);
        this.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T05:16:51.223

终于解决了……

我在填充数据集时添加了表格。

```
da.Fill(ds.Tables[0]); 
```

代替

```
da.Fill(ds); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T09:50:52.597

你是硬编码的

```
 WHERE em.emp_id = 6 
```

请动态传递。调试：首先检查您的可数据数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T09:57:23.240

赖汉，

当您使用将 DataSet 提供给 Crystal Report 时，最重要的事情是：

1.  您最初从什么类型的数据源构建报告
2.  您现在提供的数据集是*完全*匹配的（相同的列和类型）

如果这样做正确，您不需要像在此处那样设置连接信息并将登录信息应用到报告中。（您只需要这些东西来构建您的数据集。Crystal Reports 不在乎，因为它只需要这些数据，当您提供已经查询的数据时，为什么它会关心服务器/数据库/密码？）

这是某人从 XML 数据源构建报告，然后传递数据的示例： [http ://www.crystalreportsbook.com/Forum/forum_posts.asp?TID=9](http://www.crystalreportsbook.com/Forum/forum_posts.asp?TID=9)

你会发现它比你的副本简单得多。事实上，我认为您一直看到相同数据的原因是因为它连接到服务器等，您的表登录信息正在指定并使用用于构建报告的默认查询。您的数据集被忽略。

Raihan，首先*删除*此代码。当你这样做时会发生什么？

```
TableLogOnInfos crtableLogoninfos = new TableLogOnInfos();
TableLogOnInfo crtableLogoninfo = new TableLogOnInfo();
ConnectionInfo crConnectionInfo = new ConnectionInfo();
Tables CrTables;

crConnectionInfo.ServerName = frmMain.dbSrvrName;
crConnectionInfo.DatabaseName = frmMain.dbName;
crConnectionInfo.UserID = frmMain.dbUsrName;
crConnectionInfo.Password = frmMain.dbPass;
CrTables = cryRpt.Database.Tables;
foreach (CrystalDecisions.CrystalReports.Engine.Table CrTable in CrTables)
{
crtableLogoninfo = CrTable.LogOnInfo;
crtableLogoninfo.ConnectionInfo = crConnectionInfo;
CrTable.ApplyLogOnInfo(crtableLogoninfo);
} 
```

Raihan，在做了我上面写的之后，如果它现在提示你，这意味着它不喜欢你的 DataSet。不要尝试通过向报告传递服务器名称等来解决问题。尝试修复 DataSet。

您正在为数据集的 select 语句中为列创建别名。水晶报表是这样的吗？如果 Crystal Reports 中的字段被命名为 'emp_id'、'emp_fname' 和 'emp_lname' 等，那么绝对不能将它们别名为 'Employee ID'、'First Name' 和 'Last Name' 等。

您的列集合有：

1.  太少，太多列。您需要建立报告的确切集合。（您可以在 Crystal Report 设计器中看到这一点。）

2.  命名错误的列。

3.  现在具有不同类型的列。例如，您更改了数据库中的列类型。如果报表尚未更新为使用这种新的列类型，那么如果您的数据集未传入相同类型的列，则它将会失败。

# asp.net-mvc - 使用 Razor 视图引擎在 ASP.NET MVC3 中使用传递参数运行更改 DropDownListFor 的操作

> ID：10053431
> 
> 赞同：3
> 
> 时间：2012-04-07T09:49:19.280
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, drop-down-menu, onchange

我很有趣在 DropDown 的变化中运行一个动作。现在我不想使用任何 Ajax 或 javascripts，我需要回发。这是我的编辑查看代码：

```
@Html.DropDownListFor(model => Model.Title, MySelectList) 
```

还有我的 html dom：

```
<select name="Title" id="Title">
    <option value="7" selected="selected">AV</option>
    <option value="9">HS</option>
    <option value="8">IT</option>
</select> 
```

所以我需要更改下拉运行动作，并 注意 DropDown 在编辑视图动作中`MajorCategoryChange`的参数 `PPId = Model.Id`和注意，并且在更改中我需要另一个动作运行它。`CategoryId = selectedoption.Value`

返回的 Url 是这样的：

```
"http://MyProject/Products/ProductPoint/MajorCategoryChange?PPId=1&CategoryId=123" 
```

你的建议是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T10:24:45.490

您必须在`onchange`-attribute 中放置一些 JavaScript 代码，而不仅仅是 URL。如果要将用户重定向到另一个页面，可以使用`location.href`.

```
@Html.DropDownListFor(model => Model.Title, MySelectList, new { @onchange = "location.href = http://MyProject/Products/ProductPoint/MajorCategoryChange?PPId=1&CategoryId=123;" }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T11:09:46.740

Your question is a little confusing, as you say you want to use `onchange` but also that you don't want to use javascript. `onchange` will only work with javascript. If you don't want to use javascript, you'll have to wrap the select in a form and have a submit button to get your postback.

e.g.

```
@using (Html.BeginForm("MajorCategoryChange", "YourController", FormMethod.Post))
{
    <input type="hidden" name="PPId" value="@Model.Id" />
    @Html.DropDownListFor(model => Model.Title, MySelectList)
    <input type="submit" value="Go" />
} 
```

As you have it set up the value that you want for your CategoryId will come in through model binding with the name `Title`, so you may want to change the parameter name on your model from `Title` to `CategoryId`. Or change your parameter names in your action method, e.g.

```
[HttpPost]
public ActionResult MajorCategoryChange(int PPId, int Title)
{
    // ...
} 
```

# jquery - jQuery单击时更改原始标题文本？

> ID：10053432
> 
> 赞同：2
> 
> 时间：2012-04-07T09:49:34.337
> 
> 标签：jquery, text, click

我有这个 html 行：

```
<div class="hide-btn top tip-s" original-title="Close sidebar"></div> 
```

当用户单击它时，我希望文本更改为“打开侧边栏”，我该怎么做？

这是我的 JS：

```
$(".hide-btn").click(function(){
    if($("#left").css("width") == "0px"){
        $("#left").animate({width:"230px"}, 500);
        $("#right").animate({marginLeft:"250px"}, 500);
        $("#wrapper, #container").animate({backgroundPosition:"0 0"}, 500);
        $(".hide-btn.top, .hide-btn.center, .hide-btn.bottom").animate({left: "223px"}, 500, function() { $(window).trigger("resize");});
    }
    else{
        $("#left").animate({width:"0px"}, 500);
        $("#right").animate({marginLeft:"20px"}, 500);
        $("#wrapper, #container").animate({backgroundPosition:"-230px 0px"}, 500);
        $(".hide-btn.top, .hide-btn.center, .hide-btn.bottom").animate({left: "-7px"}, 500, function() { $(window).trigger("resize");});
    }
}); 
```

感谢您的时间！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T09:53:07.870

要使用 jQuery 更改元素的属性，请使用[`attr`](http://api.jquery.com/attr). 在与 jQuery 挂钩的事件处理程序中，原始 DOM 元素以`this`. 要获得一个 jQuery 包装器，请使用`$(this)`. 例如：

```
$(this).attr("original-title", "new text"); 
```

* * *

旁注：该属性`original-title`对`div`元素无效。考虑改用[`data-*`属性](http://www.w3.org/TR/html5/global-attributes.html#embedding-custom-non-visible-data-with-the-data-attributes)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T09:55:41.587

我喜欢为那种事情做这个:-)

```
var a = $(".hide-btn.top");
a.attr('original-title', a.attr('original-title').replace(/Close/, 'Open') ); 
```

可能看起来过于复杂，但我经常在之后改变对确切标签的想法，这样我就不必回去调整一切。

# php - 使用 codeigniter 在 url 中添加动态 id

> ID：10053437
> 
> 赞同：0
> 
> 时间：2012-04-07T09:50:21.317
> 
> 标签：php, codeigniter

我有一个带有 url 的编辑页面

```
example.com/product/edit/11 
```

现在，如果验证为假，我打算重新加载编辑页面，但不知道如何在 url 中添加 id '11'

到目前为止我所做的事情

在 routes.php 中

```
$route['product/edit/(:num)'] = "product/edit/$1"; 
```

现在我如何从控制器的 url 中传递那个 id

我试过这个

```
$this->load->view('product/edit/'.$edit_id,$data); 
```

编辑：我没有尝试将 edit_id 传递给视图文件

我试图模拟这个：

```
<a href="example.com/product/edit/11">Edit</a> 
```

这样我的控制器中的功能

```
function edit($edit_id)
{
//some code
} 
```

将不得不`$edit_id`与之合作

它没有像我怀疑的那样工作。

我知道我可以将该 id 传递给视图文件并使其工作，但我想如果我可以在 url 中传递该 id。

谢谢

编辑：我认为即使我设法在 url 中传递它。我最终会遇到更多问题，例如设置表单属性和其他内容。我所做的是

```
redirect('product/edit/'.$edit_id); 
```

并通过设置`flashdata`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T10:13:42.890

你的`Product.php`控制器

```
function edit($edit_id) {

    //some codes

    //passing edit_id to view
    $data['edit_id'] = $edit_id;
    $this->load->view('product/edit', $data);
} 
```

在`view/product`文件夹中，`edit.php`查看文件

```
 //some codes
 echo $edit_id 
```

或直接从视图文件中的 url

```
echo $this->uri->segment(3); 
```

# wordpress - 如何在 smarty 模板文件中运行 php 代码？

> ID：10053438
> 
> 赞同：2
> 
> 时间：2012-04-07T09:50:21.513
> 
> 标签：wordpress, smarty

我想在 smarty 模板中加载 wordpress。我使用下面的代码将 wordpress 加载到一个 php 文件中并且它有效。但它不是一个聪明的模板。

在 php 文件中：

```
<?php
include $_SERVER['DOCUMENT_ROOT'].'/wordpress/wp-load.php';
get_header();
?> 
```

在 smarty 模板文件中：

```
{php}
include $_SERVER['DOCUMENT_ROOT'].'/wordpress/wp-load.php';
get_header();
{/php} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T10:13:24.820

你用的是Smarty3吗？看看**[这里](http://www.smarty.net/docs/en/language.function.php.tpl)**。

`{php}`标签已弃用，从 3.1 版开始，它只能使用`SmartyBC`类而不是`Smarty`类。它们是一样的，但是如果你实例化一个`new SmartyBC()`对象，你将拥有一个向后兼容的 Smarty 对象支持`{php}`标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-14T06:24:33.970

```
<?php
             if( isset($_SESSION['ERRMSG_ARR']) && is_array($_SESSION['ERRMSG_ARR']) && count($_SESSION['ERRMSG_ARR']) >0 ) 
             {
                echo '<ul class="err">';
                foreach($_SESSION['ERRMSG_ARR'] as $msg) 
                {
                    echo '<li>',$msg,'</li>'; 
                    }
                echo '</ul>';
                unset($_SESSION['ERRMSG_ARR']);
                }
            ?> 
```

# php - mktime VS 时间 PHP4 VS PHP5

> ID：10053441
> 
> 赞同：4
> 
> 时间：2012-04-07T09:50:46.237
> 
> 标签：php

[我从http://www.phpcodeworks.com/pec/installation](http://www.phpcodeworks.com/pec/installation)下载事件日历。我正在使用 PHP 5.3.X 因此浏览器说**F:\xampp\htdocs\msj\functions.php**所以我替换：

```
$days = date("t", mktime(0,0,0,$month,1,$year)); 
```

和：

```
$days = date("t",` time(0,0,0,$month,1,$year)); 
```

但是这样做每个日期都会返回 24 小时，如下所示。

使用时的图像`$days = date("t", mktime(0,0,0,$month,1,$year));`：

![在此处输入图像描述](../Images/ea49303211b1515e271f662dd045211a.png)

使用时的图像`$days = date("t", time(0,0,0,$month,1,$year));`：

![在此处输入图像描述](../Images/f35e9ffa1a17719c97195336cb8968d8.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-22T20:30:31.770

该[`mktime()`](http://us3.php.net/manual/en/function.mktime.php)函数返回从 Unix 纪元（格林威治标准时间 1970 年 1 月 1 日 00:00:00）到作为参数提供的日期和时间的时间（以秒为单位）。

该[`time()`](http://us3.php.net/manual/en/function.time.php)函数以秒为单位重新调整从 Unix 纪元（格林威治标准时间 1970 年 1 月 1 日 00:00:00）到函数运行的时间。没有要传入的参数。

因此，在浏览特定日期时，您将需要使用`mktime()`而不是`time()`，`time()`每次运行时都会不断返回不同的数字。因此，您的日历会在您每次查看时更改（即使您尝试查看特定日期）。

**亮点：**

`mktime()`- 表示指定日期的时间（以秒为单位）（有关所需参数，请参阅文档）。

`time()`- 以秒为单位表示现在的时间（此函数没有参数）。

`mktime()`看起来是适合这种情况的功能。

# amazon-s3 - Errors::SignatureDoesNotMatch，AWS-SDK gem 用于回形针 3.0.1 和 rails 3.2 上的 S3 支持

> ID：10053444
> 
> 赞同：13
> 
> 时间：2012-04-07T09:52:28.983
> 
> 标签：amazon-s3, paperclip, ruby-on-rails-3.2, ruby-1.9.3

我正在将我的应用程序从 Rails 3.0.9 迁移到 3.2.3 和 ruby​​ 1.9.3。我正在使用带有 aws-s3 gem 的回形针（2.3.11）来存储我的图片。

现在我想使用最后一个版本的回形针（3.0.1），然后我必须使用 aws-sdk gem。

我已将我的 aws.yml 文件设置为：

```
 development: &development
      bucket: bucket_name_for_dev
      access_key_id: *****
      secret_access_key: *******
    staging:
      <<: *development
      bucket: bucket_name_for_staging

    production:
      <<: *development
      bucket: bucket_name_for_prod 
```

我的模型包含：

```
 has_attached_file :picture, :styles => { :medium => "300x300>", :thumb => "50x50>" }, :default_url => 'picture_missing.png',
         :storage => :s3,
         :bucket => "bucket_name_for_dev",
         :s3_credentials => Rails.root.join("config/aws.yml"),
         :path => "/presentation_pictures/:id/:style/:filename",
         :url  => ":s3_eu_url"

    attr_accessible :picture
    attr_accessor :picture_url 
```

尝试上传文件时，出现错误：

`AWS::S3::Errors::SignatureDoesNotMatch` `The request signature we calculated does not match the signature you provided. Check your key and signing method.`

我确认我的密钥可以访问并设置为正确的值。

这也是我从控制台得到的：

```
 [paperclip] Saving attachments.
    [paperclip] saving /presentation_pictures/43/original/Image_1.png
    [AWS S3 200 0.813272 0 retries] put_object(:acl=>:public_read,:bucket_name=>"*******_dev",:content_type=>"image/png",:data=>#<Paperclip::UploadedFileAdapter:0x2e144b4 @target=#<ActionDispatch::Http::UploadedFile:0x2dbb1fc @original_filename="Image 1.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"presentation_picture[picture]\"; filename=\"Image 1.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<File:/var/folders/tb/tbmv4LE9EwGNPr1QqU2S0E+++TI/-Tmp-/RackMultipart20120407-33502-1gajfe9>>, @tempfile=#<File:/var/folders/tb/tbmv4LE9EwGNPr1QqU2S0E+++TI/-Tmp-/Image 1.png20120407-33502-an4dcy>>,:key=>"presentation_pictures/43/original/Image_1.png") 
```

你知道这个问题从哪里来吗？谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-06-19T03:52:02.390

我遇到过同样的问题。原来我使用了正确的访问密钥 ID，但我的密钥被错误地复制了。

仔细检查我的密钥并更正它为我修复了它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-07-10T20:47:57.020

我的错误是使用**root**访问密钥而不是**用户**访问密钥。AWS 最近对其进行了更改，因此您必须为自己创建一个单独的 AIM 用户，然后使用该用户的访问密钥（不是 root）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T07:45:20.353

似乎您无法以正确的方式访问您的 aws。您必须指定主机名，尤其是在非美国地区使用存储桶时。尝试使用

```
:s3_host_name => 's3-eu-west-1.amazonaws.com' 
```

在您的`has_attached_file`选择中。

如果您已将 S3 配置为使用 https，还请添加

```
:s3_protocol => 'https' 
```

如果没有，请忽略它。

如果您的存储桶是私有存储桶，请添加

```
:s3_permissions => :private 
```

您也不需要在 options 参数中显式配置您的存储桶，因为您已经在 aws.yml 中声明了它并通过`:s3_credentials => Rails.root.join("config/aws.yml")`.

希望这可以帮助。

# android - 在 as3 中访问 iPhone 和 android 电话簿

> ID：10053445
> 
> 赞同：1
> 
> 时间：2012-04-07T09:52:38.703
> 
> 标签：android, iphone, actionscript-3, flash-cs5.5

我想在我的 AS3 应用程序中获取 iPhone 和 android 电话簿中的所有联系人。如何在 as3 中做到这一点？

-提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T16:03:49.830

您将需要使用本机扩展。

看看这个：

[https://github.com/memeller/ContactEditor](https://github.com/memeller/ContactEditor)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T10:09:08.880

对于 iPhone，首先您必须添加 Addressbook 和 AddressbookUI 框架。

然后，为了获取联系人，您必须实现以下方法......

```
- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person property:(ABPropertyID)property identifier:(ABMultiValueIdentifier)identifier 
```

然后，，`- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person`

最后`- (void)peoplePickerNavigationControllerDidCancel:(ABPeoplePickerNavigationController *)peoplePicker`

现在，`return NO` 在**第二种**方法中设置，调用一种方法....就像

```
[self displayContact:person];
[self dismissModalViewControllerAnimated:YES];
return NO; 
```

在第三个视图中，设置这个..`[self dismissModalViewControllerAnimated:YES];`

现在，对于那个方法...

```
-(void)displayContact:(ABRecordRef)person
{

name = (__bridge_transfer NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty);
lblname.text = name;

ABMultiValueRef phNumbers = ABRecordCopyValue(person, kABPersonPhoneProperty);

if(ABMultiValueGetCount(phNumbers) > 0)
{
    //NSLog(@"Count is:%ld",ABMultiValueGetCount(phNumbers));
    phone = (__bridge_transfer NSString *)ABMultiValueCopyValueAtIndex(phNumbers, 0);
    btnsms.hidden = NO;
    btnedit.hidden = NO;
}
else
{
    phone = @"[NONE]";
}

lblphno.text = phone;

} 
```

通过实现这一点，您可以在标签中看到姓名和电话号码......:)

# wpf - wpf按钮单击作为键盘输出

> ID：10053446
> 
> 赞同：2
> 
> 时间：2012-04-07T09:52:42.830
> 
> 标签：wpf, button, keyboard, virtual

我有两个按钮名称“A”，“B”想要单击它们等于单击键盘 A 和 B 按钮。所以任何人都可以给我一个快速的方法来实现它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T10:23:44.503

我会按照以下方式进行。首先为窗口或其他父容器的按键事件添加事件处理程序：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" KeyDown="Window_KeyDown" Width="525"> [...] 
```

和事件处理程序：

```
private void Window_KeyDown(object sender, KeyEventArgs e)
{
        if (e.Key == Key.A)
            ButtonA.RaiseEvent(new RoutedEventArgs(Button.ClickEvent));
        else if (e.Key == Key.B)
            ButtonB.RaiseEvent(new RoutedEventArgs(Button.ClickEvent));
} 
```

# .net - 从字符串中提取数字

> ID：10053449
> 
> 赞同：1
> 
> 时间：2012-04-07T09:53:15.640
> 
> 标签：.net, string, c++-cli, string-matching, pathgeometry

我必须解析一个字符串来创建一个[PathSegmentCollection](http://msdn.microsoft.com/en-us/library/ms635305%28v=vs.90%29.aspx)。该字符串由逗号和/或（任何）空格（如换行符、制表符等）分隔的数字组成，数字也可以使用科学记数法编写。

这是一个例子：`"9.63074,9.63074 -5.55708e-006 0 ,0 1477.78"`

点是：P1(9.63074, 9.63074), P2(-0,555708, 0), P3(0, 1477.78)

要提取数字，我使用正则表达式：

```
Dim RgxDouble As New Regex("[+-]?\b[0-9]+(\.[0-9]+)?(e[+-]?[0-9]+)?\b")
Dim Matches As MatchCollection = RgxDouble.Matches(.Value)
Dim PSegmentColl As New PathSegmentCollection
Dim PFigure As New PathFigure

With Matches

  If .Count < 2 OrElse .Count Mod 2 <> 0 Then Exit Sub

  PFigure.StartPoint = New Point(.Item(0).Value, .Item(1).Value)

  For i As UInteger = 2 To .Count - 1 Step 2
    Dim x As Double = .Item(i).Value, y As Double = .Item(i + 1).Value
    PSegmentColl.Add(New LineSegment With {.Point = New Point(x, y)})
  Next

End With 
```

它有效，但我必须解析大约十万个（或更多）字符串，而且这种方式太慢了。我想找到一个更有效的解决方案，而：大多数时候数字不是用科学记数法写的，如果你认为这是更好的方法，我可以使用用 C++/CLI 编写的使用 C/C++ 的程序集非托管代码或 C# 不安全代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T10:16:56.350

你为什么要自己解析[路径标记语法](http://msdn.microsoft.com/en-us/library/ms752293%28v=vs.100%29.aspx)？这是一件复杂的事情，也许是将来要改变（至少扩展）的主题。WPF 可以为您做到这一点：http: [//msdn.microsoft.com/en-us/library/system.windows.media.geometry.parse.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.geometry.parse.aspx)，所以最好让框架工作。

* * *

编辑：
如果解析是您的瓶颈，您可以尝试自己解析。我建议尝试以下方法并检查它是否足够快：

```
char[] separators = new char[] { ' ', ',' }; // should be created only once
var parts = pattern.Split(separators, StringSplitOptions.RemoveEmptyEntries);
double firstInPair = 0.0;
for (int i = 0; i < parts.Length; i++ )
{
    double number = double.Parse(parts[i]);
    if (i % 2 == 0)
    {
        firstInPair = number;
        continue;
    }
    double secondInPair = number;
    // do whatever you want with the pair (firstInPair, secondInPair) ...
} 
```

# asp.net - 在下拉选择的索引更改上隐藏行

> ID：10053451
> 
> 赞同：0
> 
> 时间：2012-04-07T09:53:28.000
> 
> 标签：asp.net

我在我的 asp.net 页面和 updatepanel 中使用了 asp.net formsview。它有两个模板 Insertemplate 和 EditTemplate。独立的两个模板都有一个 id 为 ddlCountry 的下拉列表。我有一个包含所有国家的下拉列表。我正在显示州下拉列表，如果国家是美国并且想要隐藏显示州下拉列表的行如果国家是非美国。我正在使用以下代码，但它不起作用：

```
protected void ddlCountry_SelectedIndexChanged(object sender, EventArgs e)
    {

        Control c = (Control)sender;
        Control nc = c.NamingContainer;
        if (nc.ID == "fvBillTo" && rblShipSelect.SelectedValue == "billing")
        {
            setShippingAndTaxesDisplay();

            DropDownList ddlCountry = c as DropDownList;
            if (ddlCountry.SelectedItem != null && ddlCountry.SelectedItem.Value == "001")
            {
                HtmlGenericControl trState = nc.FindControl("trState") as HtmlGenericControl;
                trState.Visible = true;
            }
            else
            {
                HtmlGenericControl trState = nc.FindControl("trState") as HtmlGenericControl;
                trState.Visible = false; // code stops here
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T11:48:10.237

代码此时抛出异常，因为它没有对表行的引用。

确保将行引用为服务器端控件

```
<tr id="trState" runat="server"  > 
```

并将其转换为表格行而不是 HtmlGenericControl

```
 System.Web.UI.HtmlControls.HtmlTableRow trState = nc.FindControl("trState") as System.Web.UI.HtmlControls.HtmlTableRow; 
```

# qt - 更改 QHeaderView 中的部分名称

> ID：10053456
> 
> 赞同：2
> 
> 时间：2012-04-07T09:54:28.447
> 
> 标签：qt, pyqt, qtreewidget

我使用 QTreeWidget 来显示多列项目，并且我想要一个带有列名的标题。但是，我只得到数字，如下图所示： ![截屏](../Images/8e6836a056b3a29cc43c1c8958fbb2ca.png)

这是我的一段代码，应该这样做（但不这样做）：

```
class BugsList(QtGui.QDialog):
    def __init__(self, parent, reports):
        super(BugsList, self).__init__(parent) # Call QDialog constructor
        # ...
        self._tree = QtGui.QTreeWidget(self)
        self._tree.setColumnCount(4))
        header = QtGui.QHeaderView(QtCore.Qt.Horizontal)
        header.addActions([QtGui.QAction(x, header) for x in ('one', 'two', 'three', 'four')])
        self._tree.setHeader(header)
        # ... 
```

问候，

瓦伦丁·洛伦兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T10:54:13.997

使用 setHeaderLabels() 修复。

# sql - 在 LINQ 中将多行值转换为 Collection(List)

> ID：10053457
> 
> 赞同：1
> 
> 时间：2012-04-07T09:54:30.723
> 
> 标签：sql, database, linq, collections

我正在努力将属于同一用户的多行值转换为集合。

这是一个简单的场景。

用户表：用户名、密码

地址表：地址，用户ID

用户表和地址表是一对多相关的——一个用户可能有多个地址。假设用户的 ID 是 1001，而他/她有两个地址，一个在奥克兰，另一个在惠灵顿。我想将它们与用户 ID 一起选择。1001 奥克兰 1001 惠灵顿 所以问题是是否有任何方法能够将这两个值放入列表之类的集合中。

```
public class UserDetails{
    private List<String> _Address
    public string userid{get;set;}
    public List<String> Address{
    get{retrun _Address;}
    set{_Address=value;}
}
}

var user_address= from _user in users 

                  join _address in address on _user.userid=_address.userid

                  select new userDetails{
                  userid=_user.userid
                  **Address.add()**
}; 
```

有谁知道如何在 LINQ 中构造 List 并调用 add 方法。我想将列表对象放在一行中，以避免用户 ID 的冗余。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T10:00:14.403

也许是这样的：

```
var user_address= from _user in users 
                  select new userDetails{
                  userid=_user.userid,
                  Address=(from _address in address
                           where _user.userid=_address.userid
                           select _address.:address
                           ).ToList()
}; 
```

您不必加入地址表。

# android - Eclipse 中的 Android 模拟器 SQLite 数据库（Questoid）

> ID：10053458
> 
> 赞同：1
> 
> 时间：2012-04-07T09:55:01.737
> 
> 标签：android, sql, emulation

我一直在做一个项目，我必须获取一列的值并将它们相加以获得所有值。它不起作用，所以，根据我前辈对这篇文章的建议：[http](http://www.tylerfrankenstein.com/browse-android-emulator-sqlite-database-eclipse#comment-64,I) ://www.tylerfrankenstein.com/browse-android-emulator-sqlite-database-eclipse#comment-64，我决定安装

[http://www.questoid.com/Download.aspx](http://www.questoid.com/Download.aspx)

但是，为了使问题变得更糟，我可以看到除了我需要的 SQLite 浏览器图标之外的所有图标。我已经阅读了论坛，并且有人建议将文件存储在 dropin 文件夹中，但我看不到任何 dropin 文件夹。我也遵循产品的安装指南，我的 Eclipse 是 Eclipse SDK 3.6.2，我的 android 模拟器是 2.2 v.8：

> 如何安装：
> 
> 在下载的 .zip/.tar 文件中有一个名为 net.cellobject.sqlitexmlbrowser_1.2.0.jar 的 .jar 文件。只需将此 jar 文件复制到 eclipse 安装目录的“plugins”文件夹中，然后重新启动 eclipse。
> 
> 而已。

我的想法用完了，请帮忙！

错误信息如图所示。![在此处输入图像描述](../Images/86978e214f8e8b0cf3133874cbf73b08.png)

无法从 C:/Users/Thet Mon Aye/eclipse/etc 加载 Mainclass Manifest 属性

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:30:26.073

他们（Questoid）现在有一个[正常运行的站点](http://www.questoid.com/Tools/CellObjectSQLiteXMLBrowser.aspx)。您可以获得最新版本和支持。

# .htaccess - 如何使用 .htaccess 使用 Apache 进行重定向？

> ID：10053460
> 
> 赞同：-1
> 
> 时间：2012-04-07T09:55:11.427
> 
> 标签：.htaccess, redirect, url-rewriting

请帮助我使用 .htaccess 进行重定向，如下所示。

[http://info.domainname.com/blog/?Tag=somedynamictag](http://info.domainname.com/blog/?Tag=somedynamictag)

至

[http://domainname.com/tag/somedynamictag](http://domainname.com/tag/somedynamictag)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T10:08:17.093

首先，我不明白将[http://info.domainname.com/blog/?Tag=somedynamictag](http://info.domainname.com/blog/?Tag=somedynamictag)重写为[http://domainname.com/tag/somedynamictag](http://domainname.com/tag/somedynamictag)的目的，因为它必须反过来。人们重写 URL 以清理它们（即删除诸如`?`、`&`、`=`等字符），但您添加了所有这些并使 URL 变得繁琐。

我认为您没有正确理解 URL 重写的概念。让我稍微解释一下。

在您的网站上访问任何 URL 时，用户键入或单击的 URL（在您的情况下为[http://domainname.com/tag/somedynamictag](http://domainname.com/tag/somedynamictag)）将被重写。但是你的问题告诉我你的想法是相反的。你的理解是访问者点击 [http://info.domainname.com/blog/?Tag=somedynamictag](http://info.domainname.com/blog/?Tag=somedynamictag)会被改写为[http://domainname.com/tag/somedynamictag](http://domainname.com/tag/somedynamictag)。**这是错误的！**[如果您以这种方式设置您的网站，那么http://domain.com/](http://domain.com/)上的每个 URL必须作为一个单独的文件或目录存在，而您似乎正在开发的动态网站预计不会有。所以我假设你已经理解你要么错误地提出了问题，要么你误解了 URL 重写的概念。[以下是将http://domainname.com/tag/somedynamictag](http://domainname.com/tag/somedynamictag)重定向到[http://info.domainname.com/blog/?Tag=somedynamictag](http://info.domainname.com/blog/?Tag=somedynamictag)的 .htaccess 代码。

```
RewriteEngine On

RewriteCond %{HTTP_HOST} domainname.com
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([A-Za-z0-9]+)\/(.*)$ http://info.domainname.com/blog/?$1=$2 [L,R=301] 
```

如果您认为您已经正确输入了问题并正确理解了 url-rewriting 并且确定您尝试做的事情是正确的，那么这里是 htaccess 代码（如果您想重定向[http://info.domainname.com/blog/ ?tag=somedynamictag](http://info.domainname.com/blog/?Tag=somedynamictag)到[http://domainname.com/tag/somedynamictag](http://domainname.com/tag/somedynamictag)）。

```
RewriteEngine On

RewriteCond %{HTTP_HOST} info.domainname.com
RewriteRule ^blog\/\?([A-Za-z0-9]+)=(.*)$ http://domainname.com/$1/$2 [L,R=301] 
```

如果这不起作用，请在[http://info.domainname.com/blog/](http://info.domainname.com/blog/)的 index.php 中放置以下代码：

```
<?php
header("HTTP/1.1 301 moved permanently");
header("Location:http://domainname.com/blog/tag/".$_GET['Tag']);
?> 
```

感谢您提出这个问题。在回答的过程中，我学到了很多东西。

希望这能回答你的问题，

和平...

# jquery - 在我的桌子上应用高光效果 (jQuery)

> ID：10053465
> 
> 赞同：0
> 
> 时间：2012-04-07T09:56:59.540
> 
> 标签：jquery

我有一个带有斑马条纹的表（每个奇数行的背景颜色不同）。在编辑一行后，我应用了 jQuery 提供的高亮效果（改变背景颜色 3 秒）。它仅适用于白色行（无背景颜色）。

![在此处输入图像描述](../Images/1b27d9e323bd3ff6c6061e7c62af255e.png)

![在此处输入图像描述](../Images/555f3eb0887276d3e256ae474a2ea44d.png)

**这种高亮效果是否有可能应用于任何行？**

这是javascript文件的代码：

```
$('#MyRowToHighlight').effect("highlight", {}, 1500); 
```

这是我的桌子的负责人：

```
<table class="zebra-striped">
    <thead>
        <tr>
            <th>Company</th>
            <th>Username</th>
            ... 
```

这是斑马条纹的CSS：

```
.zebra-striped tbody tr:nth-child(odd) td{background-color:#f9f9f9;}
.zebra-striped tbody tr:hover td{background-color:#f5f5f5;} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T10:22:33.603

根据您的选择器，我从您展示的有限 html 和 JS 中*猜测*`"#MyRowToHighlight"`，您的突出显示效果正在行级别应用，即 tr，但您的样式表正在将背景颜色应用于奇数行在单元级别，即到 tds。tr 风格胜过 td 风格。假设我在正确的轨道上，突出显示在偶数行上起作用的原因是它们的 tds 上没有样式。

因此，尝试更改此行中的选择器：

```
$('#MyRowToHighlight').effect("highlight", {}, 1500); 
```

要将效果应用于行中的 tds：

```
$('#MyRowToHighlight td').effect("highlight", {}, 1500); 
```

# ruby-on-rails - 多次搜索分页

> ID：10053466
> 
> 赞同：1
> 
> 时间：2012-04-07T09:57:01.753
> 
> 标签：ruby-on-rails, search, pagination

我有以下代码：

```
def index
    @games = Game.gamsearch(params[:gamsearch])
    @games = Game.consearch(params[:consearch]) if params[:consearch].present?
    @games = Game.gensearch(params[:gensearch]) if params[:gensearch].present?
    @games = Game.where("game_name LIKE ?", "#{params[:game_name]}%") if params[:game_name].present?
    @games = Game.where("console = ?", params[:console]) if params[:console].present?
end 
```

我想做的是让所有这些结果分页。现在我知道如何从单个搜索中分页，就像我在这里所做的那样：

```
def index
   user_relation = case params[:username].present?
   when true then User.where("username LIKE ?", "#{params[:username]}%")
   else User
   end
   @users = user_relation.paginate :page=>params[:page], :order => 'created_at desc', :per_page => 10
end 
```

但是游戏控制器有 5 种可能的搜索方法，并且想知道如何对其应用分页。

任何帮助都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T10:03:56.827

这应该可以通过将搜索结果全部附加到同一个数组而不是对该数组进行分页来实现。

喜欢：

```
def index
    @games = Array.new()
    @games << Game.gamsearch(params[:gamsearch])
    @games << Game.consearch(params[:consearch]) if params[:consearch].present?
    @games << Game.gensearch(params[:gensearch]) if params[:gensearch].present?
    @games << Game.where("game_name LIKE ?", "#{params[:game_name]}%") if params[:game_name].present?
    @games << Game.where("console = ?", params[:console]) if params[:console].present?
end 
```

然后只是对`@games`对象进行分页。

希望这可以帮助！

# file-upload - 指数超出范围。必须是非负数且小于集合的大小

> ID：10053469
> 
> 赞同：0
> 
> 时间：2012-04-07T09:57:21.893
> 
> 标签：file-upload, validation, webmatrix

尝试验证页面上的表单数据时，出现以下错误：

> System.ArgumentOutOfRangeException：索引超出范围。必须是非负数且小于集合的大小。
> 参数名称：索引。

我这个页面的代码是：

```
@{
var db= Database.Open("Games");
var sqlQ = "SELECT * FROM Games";
var data = db.Query(sqlQ);
Page.Title = "Add Game"; 
}
@{
    var fileerrorMessage = "";
    var NameerrorMessage = "";
    var Gamefile = "";
    var GameName = "";
    var fileData = Request.Files[0];
    var fileName = Path.GetFileName(fileData.FileName);
    var fileSavePath = Server.MapPath("~/upload/" + fileName);
    GameName=Request["formName"];
    Gamefile=fileName;
    if (IsPost) {
    var isValid = true;
        if (Gamefile.IsEmpty()){
            fileerrorMessage = "Please upload a file.";
            isValid = false;
        }

        else if (GameName.IsEmpty()){
            NameerrorMessage = "Please give the game a name.";
            isValid = false;
        }

        if (isValid){

        fileData.SaveAs(fileSavePath);
        var SQLINSERT = "INSERT INTO Games (Name, file_path) " + "VALUES (@0, @1)";
        db.Execute(SQLINSERT, GameName, Gamefile);
        Response.Redirect("default.cshtml");
        }

        else
        {
            <p class="message error">Please correct the errors and resubmit the form.</P> 
        }

    }
}
<form action="" method="post" enctype="multipart/form-data">

  <input type="file" name="file" id="file" />
    @if(!fileerrorMessage.IsEmpty()) {
        <label for="file" class="validation-error">
            @fileerrorMessage
        </label>
    }
  <p><input type="text" name="formName" value="@GameName" />
     @if(!NameerrorMessage.IsEmpty()) {
        <label for="file" class="validation-error">
            @NameerrorMessage
        </label>
    }

  <input type="submit" value="Add Game" />
</form> 
```

错误显然与第 12 行有关。这意味着应该有问题：`var fileData = Request.Files[0];`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T04:42:22.313

如果您在没有上传文件的情况下尝试通过索引引用 Request.Files，您将收到此错误。您的代码在页面首次加载时运行，因此用户没有机会上传文件，这意味着 Request.Files 必然为空。

在尝试引用其中的任何内容之前，向上移动`if(IsPost)`您的声明并检查 Request.Files 的计数：`fileData`

```
if(IsPost){
    if(Request.Files.Count > 0){
        var fileData = Request.Files[0];
        var fileName = Path.GetFileName(fileData.FileName);
        var fileSavePath = Server.MapPath("~/upload/" + fileName);
        //etc 
```

# java - 如何开始，使用几个面板开发基于摇摆的应用程序，每个面板都有下一个按钮

> ID：10053471
> 
> 赞同：1
> 
> 时间：2012-04-07T09:57:35.783
> 
> 标签：java, swing, jpanel, jbutton, next

我是 java 新手。我正在创建一个基于摇摆的 UI。我创建了 2 个框架，每个框架都在同一个包内的单独 .java 文件中。

这两个框架代表应用程序的 2 个屏幕（面板）。单击第一帧中的下一步按钮时，它应该移动到第二帧。

当我检查时，这两个类都有 main 方法，我认为这应该是创建应用程序的正确方法。应该只有一种主要方法。

单击下一步时，我试图为第一帧的主面板设置 setVisible(false)，为第二帧的主面板设置 setVisible(true)。但这无法做到，因为类中的面板是私有的。上述问题有什么解决办法吗？

作为初学者，有人可以建议我如何开始使用这些应用程序吗？需要遵循哪些指导方针？请帮助我找到与开始开发此类应用程序相关的文档。

看完答案后，我的评论是：

我使用以下代码从第一个面板转到下一个面板，但没有奏效。

```
private void gotoNextPanel(){
//    jPanelFirstScreen.setVisible(false);
      JPanelSecondScreen jpanelSecondScreen= new JPanelSecondScreen();
      jpanelSecondScreen.setVisible(true);
      UpgradeUtilityGUI upgradeUtilityGUI = new UpgradeUtilityGUI();
      upgradeUtilityGUI.removeAll();
      validate();
      repaint();
//      upgradeUtilityGUI.add(jpanelSecondScreen);
            upgradeUtilityGUI.getContentPane().add(jpanelSecondScreen, "card2");
      jpanelSecondScreen.setVisible(true);
      validate();
      repaint();

    } 
```

我正在使用 netbeans，并在框架的卡片布局中添加了两个面板。当我使用上面的代码更改面板时，什么都没有发生，第一个面板仍然出现。有人可以告诉我，当两个面板都已添加到 jFrame 的卡片布局中时，如何编写从一个面板移动到另一个面板的代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T10:22:08.120

使用[CardLayout ，如此](http://download.oracle.com/javase/6/docs/api/java/awt/CardLayout.html)[处](https://stackoverflow.com/questions/5665156/calling-awt-frame-methods-from-subclass/5786005#5786005)所示 （和[一个 frame](https://stackoverflow.com/a/9554657/418556)），正如其他人所提到的。

![游戏视图](../Images/3e84734e45f9ce4d8da39f4e7796ef42.png) ![高分视图](../Images/108a81166d0c089a8de60cdb6ed2908a.png)

> 单击下一步时，我试图为第一帧的主面板设置 setVisible(false)，为第二帧的主面板设置 setVisible(true)。但这无法做到，因为类中的面板是私有的。上述问题有什么解决办法吗？

使面板`public`访问级别，它们将在其他包中可用。

* * *

该代码段中的一个问题隐含在以下行中：

```
UpgradeUtilityGUI upgradeUtilityGUI = new UpgradeUtilityGUI(); 
```

它在被添加到容器之前就超出了范围。此外，在向布局中添加新卡时，它们应该不需要删除任何东西，也不需要调用`repaint()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T10:03:43.383

如果您的应用程序像只有两个面板一样简单，那么您不应该创建两个 JFrame。您应该创建一个带有两个 JPanel 的 JFrame，每个 JPanel 都包含您所需的信息。如果您已准备好使用第一个面板，则可以在其上调用 setVisible(false)，并在第二帧上调用 setVisible(true)。它是最容易理解的解决方案之一。
但是，这仅取决于您是否对您有好处，或者您想使用一些更详细的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T10:05:04.243

您应该做的是为应用程序设置一个，然后在屏幕之间移动`JFrame`时添加和删除。`JPanels`

您的每个人`JPanels`基本上都应该具有以下内容... 1\. A`JButton`称为“下一步” 2.`ButtonListener`每个按钮都有 A，它告诉`JFrame`加载 panel2、panel3 等。

作为 的一部分`ButtonListener`，您基本上只想调用类似`JFrame.removeAll()`删除现有面板的方法，然后`JFrame.add(JPanel)`添加下一个面板。

通过拥有 1 `JFrame`，您也只有 1 个`main()`方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-07T10:16:38.767

不要使用两个或更多`JFrames`，也不要使用分离和编译`Jar files`，这是地狱之路，最好看看[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)，

# c++ - 谁能详细告诉我“*这个指针”？

> ID：10053473
> 
> 赞同：1
> 
> 时间：2012-04-07T09:59:03.223
> 
> 标签：c++, class, pointers

比如这个，我对this指针不是很了解，这个问题不是operator+重载，是this指针，和它的类之间的关系，

*这个指针指向什么东西？

非常感谢！

```
 class Integer {
        int i;
    public:
        Integer(int ii): i(ii) { }
        const Integer operator+(const Integer& rv) const {
            cout<<"operator+"<<endl;
        }

        Integer&
            operator+=(const Integer& rv) {
                i += rv.i;
                return *this;
        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T10:10:36.533

`operator+=`需要返回对当前对象的引用（在它增加之后），以便您仍然可以编写代码，例如

```
// UGLY CODE, ONLY TO ILLUSTRATE A POINT
Integer x, y;
x = (y += 10) + 1; 
```

这种形式的运算符（取一个`const`引用，返回一个引用）也称为*[规范](https://stackoverflow.com/questions/873216/canonical-form-of-operator-for-classes)*形式。

你从哪里得到返回的参考？你有`this`，它*指向*当前对象，但你不能返回一个指针。所以你取消引用指针`operator*`并返回结果：

```
return *this; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T10:16:49.993

`this`标识一种特殊类型的指针。如果您创建了一个名为 x 的类 A 的对象，并且类 A 有一个非静态成员函数 f()。如果调用函数 xf()，则 f() 主体中的关键字 this 存储 x 的地址。您不能声明 this 指针或对其进行赋值。基本上`this`，指针作为隐藏参数传递给所有非静态成员函数调用，并可作为所有非静态函数体内的局部变量使用。

# authentication - 使用 OpenID 时保持登录的安全策略

> ID：10053476
> 
> 赞同：0
> 
> 时间：2012-04-07T09:59:25.697
> 
> 标签：authentication, cryptography, openid

我有一个使用 OpenID 登录用户的网站。我正在使用的库在用户登录时返回用户配置文件。此配置文件包含用户的电子邮件、姓名、头像链接和OpenID 提供者返回的**ID 。**

我保持用户登录的策略是这样的：

*   当用户第一次登录时，我根据 OpenID 返回的 ID 创建一个哈希码
*   我将此哈希码与用户 ID 一起存储在 2 个 cookie 中。
*   当用户访问我的网站时，我会检查这些 cookie，如果它们可用，则尝试匹配 ID 和哈希码，如果正确，我会登录用户。

现在的*问题*是：如果这个 cookie 信息以某种方式从用户那里被盗，黑客可以很容易地登录而不是用户自己。每次用户登录并更新用户的 cookie 时，我都可以创建一个新的哈希码，但这会使其他浏览器/计算机 cookie 的信息无效。

由于 StackOverflow 网站没有遇到此类问题，我想知道我应该怎么做才能保护我的登录策略并添加功能以使用户保持登录状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T05:35:10.653

执行此操作的标准方法是分配一个无意义的会话 ID 并将其作为 cookie 发送；在您的数据库中，您可以将用户的凭据信息与该会话 ID 一起存储。当用户注销时，您可以使该会话 ID 无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T10:05:41.943

这不是让客户保持登录状态的所有机制的问题吗？如果你登录到你的 gmail，我窃取了你的 cookie，并将它们放在我自己的浏览器中，则无法区分我的浏览器和你的浏览器，我可以访问你的 gmail。我相信，没有办法阻止你建议的那种攻击（除了用户保持他们的计算机不受病毒等可能窃取 cookie 的影响）

# haskell - Haskell 的响应式香蕉中响应式网络的 flatMap 的等价物是什么？

> ID：10053477
> 
> 赞同：3
> 
> 时间：2012-04-07T09:59:31.547
> 
> 标签：haskell, reactive-programming, frp, reactive-banana

我正在寻找响应式香蕉中的函数，该函数将根据另一个事件流或信号的传入值（行为？）从下一个要发出的事件流中进行选择。在 scala 库中，reactive-web 是通过以下方式完成的：

```
 flatMap[U](f: T => EventStream[U]): EventStream[U] 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T10:42:07.947

这是*动态事件切换*。不幸的是，在那个公式中，它有[很多问题](http://apfelmus.nfshost.com/blog/2011/05/15-frp-dynamic-event-switching.html)，因此没有包含在反应香蕉中。[但是，很快就会添加](http://apfelmus.nfshost.com/blog/2012/01/01-frp-api-0-5.html)动态事件切换的变体。现在，你将不得不没有它。

特别`flatMap`是 Scala 的一元绑定函数的名称；行为`Monad`实例是有问题的，因为它提供了导致我链接的文章中解释的时间泄漏的动态事件切换功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T07:41:50.577

作为 ehird 答案的补充，我想提一下，通常可以避免动态事件切换，即当相关行为/事件在编译时范围内时。只有在动态计算新的行为/事件时才需要动态事件切换，而不是在已经在范围内的行为/事件之间切换时。

特别是，请查看[示例页面](http://www.haskell.org/haskellwiki/Reactive-banana/Examples)上的 TwoCounters.hs 示例，了解如何执行此操作。

# php - 一个php插件架构

> ID：10053479
> 
> 赞同：9
> 
> 时间：2012-04-07T09:59:41.523
> 
> 标签：php, plugins, architecture

我正在想办法为我自己的框架创建一个插件架构。我已经阅读了许多主题并在这里和其他网站上发帖。基本上我已经找到了以下解决方案，这似乎是 PHP 中唯一的好选择（目前）。

这个想法是每个类都扩展了一种类似于类的观察者。所以一个 Template 类、BaseController 等总是扩展一个 Plugin 类。

```
class BaseController extends Plugin
{
    public function __construct()
    {
        // Plugin check, notify all loaded plugins
        $this->checkForEarlyHooks();

        // Init some standard stuff
        $this->view = new Template();
        $this->baseLayout = 'layout.html';

        $this->something = new Something();

        // Plugin check, notify all loaded plugins
        $this->checkForLateHooks();
    }
} 
```

所以这里基本上发生的是，当 indexController 扩展 baseController 时，插件检查就完成了。在这种情况下为构造函数。当您想在实际调用 Action 方法之前使用插件进行某种登录检查时，这会很方便。

Plugin 类可以从调用的类中解析，并知道在加载的插件中查找哪些函数。

另请注意，它会检查加载的插件列表 2 次。在构造函数中（早期）加载任何内容之前，一个在加载所有变量时（晚期）。

我还可以将变量添加到“checkForLateHooks()”函数中。所以钩子函数也可以操纵它们，比如'baseLayout'变量。

挂钩函数如下所示：

```
public function hookConstruct ( &$baseLayout )
{
    $baseLayout = 'login.html';
} 
```

现在基本上我的问题是，这种方法有什么好处吗？我知道可能还有很多其他方法可以做到这一点。但我主要不想以后遇到设计问题。现在看来是个好主意，但你永远不知道以后会怎样……

如果我没记错的话（从我读过的所有帖子中），这有点像 WordPress 所做的（以及其他一些框架）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T11:04:43.387

**更新**：答案现在反映了最新的链接和更好的描述。

当然有很多不同的方法来设计一个插件系统，也许在[https://softwareengineering.stackexchange.com/](https://softwareengineering.stackexchange.com/)上提问会给你更多的想法，但我会尝试通过分享我的想法和经验来提供帮助。

我将分享一些我自己通过一系列自己的框架学到的经验。目前[Agile UI](http://github.com/atk4/ui)和[Agile Data](http://github.cmo/atk4/data)都支持很多wasy 的扩展，但我将重点关注“组件”

## 挂钩

当您希望将代码注入现有对象时，挂钩是一种标准方法。这是使用已建立的结构扩展应用程序或流程的最佳选择。

在重构我的框架时，我将钩子实现分离为一个单独的特征并在此处记录：http: [//agile-core.readthedocs.io/en/develop/hook.html](http://agile-core.readthedocs.io/en/develop/hook.html)

主机应用：

```
... some code here ..
$this->hook('beforeInit');
$this->init();
$this->hook('afterInit');
... code goes on .. 
```

插入：

```
$host_app->addHook('beforeInit', function($object) {
    echo "About to execute init of $object";
}); 
```

## 用户界面组件

组件呈现出不同的设计模式，适用于用户界面。您从页面/应用程序布局开始，然后将其分解为菜单、页眉、页脚、内容。

组件是可以与布局或其他组件相关联的对象。每个组件都能够呈现额外的 HTML/JS 并将其传递给其父级。大多数组件也将是交互式对象。

这种方法称为“渲染树”，应用程序执行经历了两个阶段——“渲染树的初始化”，然后是“渲染”。

主机应用：

```
$layout->menu = new \atk4\ui\Menu();
$layout->add($layout->menu, 'TopMenu'); 
```

上面的代码显示了如何初始化一个新的组件（菜单）并将其插入到`$layou`. 此外，$menu 的 HTML 输出被定向到 {$TopMenu} 标记中，该标记在 Layout 的 HTML 模板中定义。

插件可以通过以下方式与渲染树交互：

*   在树的任意位置添加更多组件
*   影响现有组件（例如添加新菜单项）
*   销毁任何现有组件

当这些方法结合起来时，你可以使用这样的东西：

```
$app->addHook('afterInitLayout', function($app) {

    $app->layout->menu->destroy(); // remove default menu
    $app->layout->menu = new \plugin\SuperMenu();
    $app->layout->add($app->layout->menu);
}); 
```

这可用于使用附加组件中更强大的实现替换标准菜单。

我的组件实现记录在这里：

[http://agile-ui.readthedocs.io/en/latest/view.html#initializing-render-tree](http://agile-ui.readthedocs.io/en/latest/view.html#initializing-render-tree)

## 用户界面/数据分离

虽然可能不是一个问题的太多答案，但另一种强大的扩展方式是关注点分离。[Agile UI](https://github.com/atk4/ui)中的所有 UI 组件都不知道如何处理数据。

虽然许多 UI 生成器需要开发人员手动构建它们并与数据链接，但我正在注入这样的“模型”对象：

```
$form->setModel(new User($db)); // populates name, surname and gender fields 
```

演示：[http](http://ui.agiletoolkit.org/demos/form2.php) ://ui.agiletoolkit.org/demos/form2.php （第二种形式）

在这种方法中，对象`User`包含足够的元数据以供表单填充其字段，标题执行验证并保存/加载数据。

由于“用户”类也可以在附加组件中声明，它通过添加对新数据实体的支持来扩展现有功能是一种非常强大的方式。

## 其他方法

使用附加组件进行扩展的其他一些方法包括：

工厂：

将指定为字符串的类解析为命名空间/文件的能力：

```
$api->add('MyClass'); 
```

使附加组件能够重新路由标准类，但对 IDE 中的类型提示不是很友好。

新类型/特性：

附加组件可以提供添加持久性、表格列、表单字段、操作等的新类。

## 结论

我认为附加设计归结为：

*   安装和使用简单
*   插件是否需要开箱即用？
*   避免附加组件之间的冲突
*   定义不同的附加类型 - 身份验证、UI、行为
*   可以附加组件扩展另一个附加组件
*   附加组件是否适合应用程序设计、数据和架构？
*   在不牺牲性能的情况下为附加组件提供强大的功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-18T12:29:16.063

[在https://github.com/gheevel/PHPPlugin](https://github.com/gheevel/PHPPlugin)上查看 PHPPlugin 。一个简单的 PHP 插件框架，灵感来自 eclipse 和 jira 插件架构。基本上，您的应用程序可以定义扩展点，插件实例可以在这些扩展点上注册以提供额外的功能。与作曲家和/或 symfony 结合使用效果很好。

# audio - 无法在 J2ME 中重放声音

> ID：10053484
> 
> 赞同：4
> 
> 时间：2012-04-07T10:00:54.900
> 
> 标签：audio, java-me, midp, mmapi

我在 J2ME 中有问题重启声音。我想在构造函数中创建播放器，然后调用 playExplosion() 播放它，但它只播放一次。我正在使用无线工具包。

*声音类*

```
public class Sound () {

    private Player playerExplosion;

    public Sound() throws IOException, MediaException {
        // Explosion
        InputStream is = getClass().getResourceAsStream("/explosion.mid");
        playerExplosion = Manager.createPlayer(is, "audio/midi");
        playerExplosion.realize();
        playerExplosion.setLoopCount(1);
    }

    public void playExplosion() {
        try {
            System.out.println(playerExplosion.getState());
            playerExplosion.start();
        } catch (MediaException ex) {
            ex.printStackTrace();
        }
    }
} 
```

*MyMIDlet 类*

```
public class MyMIDlet extends MIDlet() {

    public Sound sound;

    public MyMIDlet() {
        // Init sound object
        try {
            sound = new Sound(this);
        } catch (Exception ex) {
            ex.printStackTrace();
        }

        // Test
        System.out.println("Start");

        for (int i = 0; i < 5; i++) {
            sound.playExplosion();

            // My sound is less than 1 second.
            try {
                Thread.sleep(2000);
            } catch (InterruptedException ex) {
                ex.printStackTrace();
            }
        }

        System.out.println("End");
    }
} 
```

**输出**

```
Start
200
300
300
300
300
End 
```

第一次， start() 之前的 playerExplosion 状态为 200（REALIZED）。

对于第 2、3、4、5 次，start() 之前的 playerExplosion 状态为 300（PRE​​FETCH）。

目前，我必须在 playExplosion() 方法中再次创建 playerExplosion，但在真实设备中它太慢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:35:26.660

删除后试试

```
playerExplosion.setLoopCount(1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T22:57:48.903

意识到 Player 可能是一个资源和耗时的过程，必须创建`playerExplosion`将意味着`playerExplosion.realize();`再次调用，这就是该过程需要这么多时间的原因

当您的玩家处于`PREFETCHED State`您需要做的事情时，您只需跟注`playerExplosion.start();`但它不会再次支付，因为它应该支付的次数有一般限制

消除

```
 playerExplosion.setLoopCount(1); 
```

你可以多次支付你的文件

谢谢

:)

# blackberry - 黑莓开发-eclipse插件

> ID：10053486
> 
> 赞同：1
> 
> 时间：2012-04-07T10:01:03.327
> 
> 标签：blackberry

我想在我的 Blackberry 应用程序中使用 JAVA SE Color 类。

从`java.awt.Color package`

我有一个关于图像效果和控制（色调，对比度）的项目。我已经看到他们使用 Color.colorToHSV() 的 android 代码。我在 Blackberry Color 类中看到了同样的情况，但它没有方法。所以这就是为什么我需要 JAVA SE 颜色类以便我可以使用这些方法，....

我可以使用 JAVA SE 颜色类吗？
我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T13:09:18.560

BlackBerry SDK 中不支持 Java SE Color 类。

代替这个类的是`net.rim.device.api.ui.Color`类。它的功能不如 Java SE`java.awt.Color`类。

但是有一个解决方法。

在您的计算机上安装 Java SE SDK 后，在安装 Java SE SDK 的文件夹中就有`src.zip`文件。

该文件包含所有标准 Java SE 类的源代码，包括`java.awt.Color`class. 解压这个`src.zip`文件，找到`java/awt/Color.java`并检查它，它是如何工作的。

并为您的 BB 应用程序实现此功能。

# android - 在哪里可以找到 WIFI Direct 技术资料？

> ID：10053492
> 
> 赞同：1
> 
> 时间：2012-04-07T10:01:38.620
> 
> 标签：android, wifi, android-wifi, wifimanager, wifi-direct

我想更熟悉 WIFI Direct 的协议和 OTA 流。我搜索了谷歌，但似乎找不到任何详细讨论该协议的材料。至少不是免费的。有谁知道我在哪里可以找到这样的文章？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T10:34:57.710

看起来你可以从这里获得它们[WiFi Alliance specs](https://www.wi-fi.org/knowledge-center/published-specifications)，但它会花费你大约 300 美元。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T00:47:56.770

@nicefuture：您想了解有关 wifi 直连机制如何工作的低级技术细节吗？好吧，这听起来就像他们的 p2p 规范将包含的那种信息。你可能不需要其他规格，所以它应该只是 199 美元

但除此之外 - 您是否浏览过 wifi 联盟 wifi Direct 页面上的免费白皮书？这里有一些好的地方：

[https://www.wi-fi.org/register.php?file=wp_Wi-Fi_Direct_20101022_Consumer.pdf](https://www.wi-fi.org/register.php?file=wp_Wi-Fi_Direct_20101022_Consumer.pdf)

[http://www.wi-fi.org/register.php?file=wp_Wi-Fi_Direct_20101025_Industry.pdf](http://www.wi-fi.org/register.php?file=wp_Wi-Fi_Direct_20101025_Industry.pdf)

行业白皮书很好地概述了 wifi direct 包含的机制和功能，这些足以让我在我的工作中启动一个产品开发项目，并获得授权订购几部 wifi direct 电话和一些新的 wifi direct 嵌入式评估板，以便我可以进一步探索该技术。

# linux - 读取过程未正确显示数据

> ID：10053497
> 
> 赞同：0
> 
> 时间：2012-04-07T10:02:36.717
> 
> 标签：linux, linux-kernel, linux-device-driver

我正在查看 linux 内核模块中的以下代码：

```
static int proc_read_kernel(char *buffer, char **start, off_t offset, int length,int *eof, void *data)
 {
   int len=0;
   struct mem_rw_t *mem= (struct mem_rw_t *)data;

   switch(mem->flag)
   { 
```

从上面的代码它切换到另一个具有长度检查的函数，如下所示

```
static int func1(char *buffer, char **start, off_t offset, int length)
{
    printk ("The value for len is %d\n\r",len);
    printk ("The value for length is %d\n\r",length);

    if(len > length)
         goto list_finished; 
```

上述代码的输出如下所示。看起来 len 的长度大于最后一个值的长度，并且 proc read 无法正常工作：

```
The value for len is 0
The value for length is 3072
The value for len is 398
The value for length is 3072
The value for len is 796
The value for length is 3072
The value for len is 796
The value for length is 3072
The value for len is 1537
The value for length is 3072
The value for len is 1777
The value for length is 3072
The value for len is 1777
The value for length is 3072
The value for len is 2029
The value for length is 3072
The value for len is 2427
The value for length is 3072
The value for len is 3120
The value for length is 3072
<4>proc_file_read: Read count exceeded 
```

有什么建议可以消除上述错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T09:54:33.363

根据您的评论，我建议您查看`linux/seq_file.h`.
它导出的 API 允许您创建不受大小限制的多行 /proc 条目。
您需要提供一个返回一行数据的函数，它会被 I/S 重复调用，每次都有一个新的缓冲区。如果每行不超过 3K（如果超过了，那将是非常不可读的），它应该没问题。

# java - R.java 中的错误

> ID：10053500
> 
> 赞同：2
> 
> 时间：2012-04-07T10:03:24.453
> 
> 标签：java, android, textview, r.java-file

第二行此代码中的 R.java 有错误

```
 public static final class id {
    public static final int 2ndQ=0x7f05000a;
    public static final int FirstQuestion=0x7f050000;
    public static final int MainTitle=0x7f050003;
    public static final int SecondQuestion=0x7f050008;
    public static final int btnstrt=0x7f050007;
    public static final int editText1=0x7f050001;
    public static final int imageView1=0x7f050006;
    public static final int maindescrip=0x7f050004;
    public static final int radio0=0x7f05000b;
    public static final int radio1=0x7f05000c;
    public static final int radio2=0x7f05000d;
    public static final int radioGroup1=0x7f050009;
    public static final int toq1=0x7f050005;
    public static final int toq2=0x7f050002;
    public static final int toq3=0x7f05000e; 
```

它给了我这个错误

> 标记“2”的语法错误，删除此标记

我尝试删除该行，因为它是我不再拥有的 TextView 的 ID。事实上，我将 TextView 的 ID 从“2ndQ”更改为“SecondQuestion”。

如何摆脱错误？它阻止我测试我的应用程序。

编辑：只是为了澄清这一点，我的项目中根本不存在该 id。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/SecondQuestion"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:gravity="center"
        android:text="@string/secondQ"
        android:layout_marginTop="30dp"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="20dp"
        android:textSize="25dp"
        android:textStyle="bold" />

    <RadioGroup
        android:id="@+id/radioGroup1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/2ndQ"
        android:layout_below="@+id/2ndQ"
        android:layout_marginTop="74dp" >

        <RadioButton
            android:id="@+id/radio0"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:checked="true"
            android:text="@string/q2Answer1" />

        <RadioButton
            android:id="@+id/radio1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/q2Answer2" />

        <RadioButton
            android:id="@+id/radio2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/q2Answer3" 
            android:gravity="center" />
    </RadioGroup>

    <Button
        android:id="@+id/toq3"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:text="@string/buttonForQuestion3"
        android:textSize="20dp"
        android:clickable="false" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T10:07:48.387

> 我尝试删除该行，因为它是我不再拥有的 TextView 的 ID

听起来 R.java 文件没有更新，请尝试以下一些通用指针：

*   不要手动编辑文件`gen`夹中的任何文件，因为这些文件是为您自动构建的。
*   如果您发现它不同步，请尝试刷新项目。
*   如果那不起作用，请尝试清洁（项目->清洁）
*   如果这不起作用`gen`，请从 Eclipse 中删除该文件夹（不要惊慌），然后它将由 Eclipse 重建 - 但是如果存在某种编码错误，它可能不会立即执行此操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T15:04:48.440

从 Android 开发开始，我收到了一个非常相似的错误消息。就我而言，这是一个 res 字符串上的简单命名错误 - 我有 android:id="@+id/edit/message"。第二个 / 应该是一个下划线。

唯一的错误消息是在 R.java 中，所以在开始开发时非常混乱。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-13T14:25:01.470

5个小时后，我终于来到了这个地狱的底部！我也有这个错误，但上述方法都没有帮助，显然我错误地重命名了属于android内部的文件中的一个id，不仅如此 - 我重命名为非法（@+id/@+id /checkbox_spinner) 使用 notepad++ 搜索，我找到了 c:\Users\.android\build-cache 中的文件...我删除了 build-cache 文件夹，AS 的下一次启动自然会变慢，因为它创建了所有必要的文件，并且哇！问题已解决！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-07T10:10:44.487

清理并构建您的应用程序并尝试再次运行您的应用程序。不要在自动生成的 R.java 中执行任何操作。转到项目并清理它，构建它。然后尝试再次运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-20T13:24:03.523

确保 xml 文件中的元素不为空。当有一个未使用或没有值的空元素时，R 文件不喜欢它。例如：

第 1 行：平均高度

第 2 行：

当第 2 行有空值时，R 文件不喜欢它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-08T16:50:14.367

我也有这个确切的问题。我的 R.id 中有错误说要删除令牌，但我无法删除它，因为它不再在我的 xml 中的任何地方定义。所以我有一个

```
public static final int 2ndQ=0x7f05000a; 
```

在我的 R.java 中，即使我清理了我的项目，我也无法摆脱它。

为了摆脱它，我不得不

*   重新创建一个带有“2ndQ”这个错误 ID 的 TextView
*   清理项目并更新 R.java
*   然后删除我刚刚创建的牺牲的TextView

瞧，你的 R.java 应该是固定的。

# iphone - 当我在 Xcode 中使用 iPhone 调试应用程序时，“看门狗已过期”

> ID：10053503
> 
> 赞同：1
> 
> 时间：2012-04-07T10:03:35.850
> 
> 标签：iphone, ios, xcode, jailbreak, watchdog

从昨天开始，我的 iphone 无法调试任何应用程序。在 xcode 中，当我选择我的 iPhone 作为调试目标时，xcode 构建应用程序、链接并运行到我的手机中，几秒钟后，xcode 完成了在我的 iPhone 中的运行。下面的控制台显示“看门狗已过期。远程设备已断开连接？调试会话已终止。”

是iPhone4s，iOS版本是5.0.1，已经越狱，前几天更新Cydia。

它还不能在我的其他 MBP 上工作。我怎样才能恢复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T11:18:05.783

这是因为 Cydia 更新和越狱中的错误。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T18:05:15.477

参考这篇文章：

[应用程序崩溃并显示“看门狗已过期”。信息。没有堆栈跟踪或崩溃转储](https://stackoverflow.com/questions/3927310/app-crashes-with-watchdog-has-expired-message-no-stack-trace-or-crash-dump)

这里是**tc。**那个帖子的回答

> “看门狗已过期。” 可能意味着任何事情。消息的措辞方式表明“本地”GDB（在您的 Mac 上运行）GDB 超时等待来自“远程”GDB（在手机上运行）的数据。或者，“看门狗已过期”可能来自手机重新启动前不久的控制台输出。
> 
> 如果您在应用程序运行时断开设备连接，它会显示什么？如果你把它关掉怎么办？如果您发出硬重置（Sleep+Home 10 秒）怎么办？
> 
> 如果它导致设备重新启动，则说明发生了严重错误。您的应用程序不应该让手机关机，但有时会出现问题（IIRC，某些 2.x 版本上的 UIImagePickerController 存在问题，即您的应用程序会被杀死或手机会重新启动，具体取决于哪个启动第一的）。“大量位图”听起来可能会导致 CoreAnimation（或 IOSurface 或其他）耗尽视频内存。
> 
> 除非您非常注意线程安全性，否则我会犹豫是否在后台线程中绘图（首先近似，CoreAnimation 是，UIKit 不是，除了一些在 4.0 中被设为“线程安全”的函数）。

希望这对您有所帮助。

# jakarta-ee - Servlet 3.0 和资源

> ID：10053510
> 
> 赞同：2
> 
> 时间：2012-04-07T10:05:14.833
> 
> 标签：jakarta-ee, servlet-3.0

如果我按照 Servlet 3.0 规范创建 Web 应用程序片段，如何将资源文件（如 css 或图像）附加到片段 jsr？

是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T10:06:40.590

是的你可以。

您需要在 META-INF 文件夹下创建资源文件夹，并将文件放在那里。

也许这篇[文章](http://www.softwareengineeringsolutions.com/blogs/2010/08/13/pluggability-in-servlet-spec-3-0/)可以帮助你。

# java - 来自java类的jsp重定向错误

> ID：10053512
> 
> 赞同：-2
> 
> 时间：2012-04-07T10:05:21.373
> 
> 标签：java, spring, jakarta-ee

论坛成员

我遇到了问题，我需要你的帮助才能尽快解决。

实际上我正在尝试从我的 JAVA 类中打开 JSP。

**下面是我用来转发到我想要的 JSP 页面的代码**

```
@RequestMapping(value = "/login/GetLoginCheck.action")
    public void sitemap (HttpServletRequest request, HttpServletResponse response)  throws Exception {
        try {
            System.out.println("QUERY TO GET LOGIN");
            //response.sendRedirect(response.encodeRedirectURL("../index.jsp"));
            request.getRequestDispatcher("/index.jsp").forward(request, response);
            return;
        } catch (Exception e) {
            return;
        }
    } 
```

毫无疑问，下面的代码会执行。**但是在代码执行而不是转发到 jsp 页面之后，它只是在我的 firebug 控制台上显示 index.jsp 的代码**

下面是我的萤火虫控制台的图像。 ![在此处输入图像描述](../Images/f4e8b87e76f41c4e2c3d73e27bb2fe0b.png)

无法理解为什么它没有重定向到我的 index.jsp 页面。

**请建议我一些解决方案，以尽快完成我的工作。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T11:16:39.700

In spring you have to use like this. more info [here](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html)

```
@RequestMapping(value = "/login/GetLoginCheck.action")
    public String sitemap (HttpServletRequest request, HttpServletResponse response)  throws Exception {
        try {
            System.out.println("QUERY TO GET LOGIN");
            return "index";
        } catch (Exception e) {
            return;
        }
    } 
```

add this in your `dispatcher-servlet.xml`

```
<bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix">
            <value>/WEB-INF/jsps/</value> 
        </property>
        <property name="suffix">
            <value>.jsp</value>
        </property>
    </bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T10:09:16.697

我认为你应该简单地使用`response.sendRedirect("/index.jsp")`. 请注意，这`../index.jsp`不是基于[文档](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpServletResponse.html#sendRedirect%28java.lang.String%29)的有效重定向 URL 。

# sql - 过滤postgresql查询结果

> ID：10053515
> 
> 赞同：1
> 
> 时间：2012-04-07T10:05:30.997
> 
> 标签：sql, postgresql, filter

我有多个表需要合并为一个。

```
SELECT name, SUM(money) AS MONEY FROM transactions
JOIN results ON transactions.id = results.id
JOIN more ON results.per_id = more.per_id
GROUP BY name 
```

输出是人名（第一列）和人的钱（第二列）。

```
name | money
aaron  1220
mike   800
john   200
kate   600 
```

现在我尝试按金额过滤结果，即为“Sum(money) > 500”的人显示结果

出于这个原因，我尝试输入“WHERE money > 500 GROUP BY name”，但输出错误（aaron 1000、mike 610 等）。

您如何编写查询来过滤**最后/结束**结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T10:07:27.930

```
Group By Name
having sum(money) > 500 
```

编辑：“最后/最终结果”是什么意思？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-07T10:09:31.043

如果你想得到`SUM(money)`大于 500 的值，那么你可以这样做：

```
SELECT name, SUM(money) AS MONEY FROM transactions
JOIN results ON transactions.id = results.id
JOIN more ON results.per_id = more.per_id
GROUP BY name
HAVING SUM(money)>500 
```

# javascript - 单击 $(document) 时，如何使用 jquery 隐藏/关闭 div？

> ID：10053516
> 
> 赞同：0
> 
> 时间：2012-04-07T10:05:35.630
> 
> 标签：javascript, jquery, jquery-selectors

我有一个简单的下拉菜单，如果单击该菜单之外的任何区域，我希望该菜单自动关闭/隐藏。想不出一个简单的方法来做到这一点。如果可能的话，希望有一个关于 jfiddle 的解决方案/示例。

**查询：**

```
$('.micropostOptions').on('click',function(){
    var postMenu = $(this).find('.postMenu');

    if(postMenu.is(':hidden') ){
        $('.postMenu').hide();
        $('.micropostOptions').removeClass("postMenuHoverState");
        postMenu.show();
        $(this).hide().addClass('postMenuHoverState').show(60);

    }else{
        postMenu.hide() ;
        $(this).removeClass("postMenuHoverState");
    }

}); 
```

**sCSS：**

```
.micropostOptions {
    position:absolute;
    height:17px;
    width:17px  ;
    top:5px;
    right:5px;
    background:white url("/assets/arrow_down_alt1.png") no-repeat;
    background-position:0px 0px;

        &:hover {
            background: url("/assets/arrow_down_alt1_hover.png") no-repeat; 
            background-position:0px 0px;
            cursor:pointer !important;

        }

}

.postMenuActivate {
    display:block;
}

.postMenuHoverState {
    background: url("/assets/arrow_down_alt1_hover.png") no-repeat; 
    background-position:0px 0px;
    cursor:pointer !important;
}

.postMenu {
    position:absolute;
    display:none;
    padding-bottom:20px;
    background-color:white !important;
    border:1px solid $main-background-color;
    height:163px;
    width:170px;
    top:18px;
    right:2px;
    -webkit-box-shadow: 0 10px 6px -6px #777;
    -moz-box-shadow: 0 10px 6px -6px #777;
    box-shadow: 0 10px 6px -6px #777;
    color:gray;
    z-index:3000;

        li {

        font-size:12px;
        height:33px;
        background-color:white !important;

            a span {
                float:left;
                width:160px;
                height:33px;
                line-height:33px;
                padding-left:10px;
                color:gray;

                  &:hover {
                    background-color:#4D90FE !important;
                    color:white;
                    //  #DD4B39,#D14836
                    }
            }

            &:hover {
            background-color:#4D90FE;
            color:white;

            }
        }

        .deletePost {
            //position:relative;
            padding-top:0px !important;
            padding-left:0px !important;
            height:39px;
            width:170px;
            text-align:center;
            padding-bottom:7px;
            border-bottom:1px solid #d9d9d9;

                a {

                    span {
                    float:left;
                    padding-left:0px !important;                            
                        height:46px !important;
                        width:170px !important;
                        line-height:46px;
                    }
                }

                a span:hover {
                    background-color:#DD4B39 !important;
                    color:white;
                //  #DD4B39,#D14836
                }
        }

        .reportAbuse {
            border-top:1px solid #d9d9d9;

                a span:hover {
                    background-color:gray !important;;
                }

        }

} 
```

**HTML：**

```
 <nav class="micropostOptions">
     <ul class="postMenu">
       <li class="deletePost"><%= link_to content_tag(:span, "Delete post"), m, :method => :delete, :confirm => "Are you sure?", :title => m.content, :class => "message_delete" %>
       </li>
       <li class="disableCommenting"><%= link_to content_tag(:span, "Pause commenting"), "2" %></li>
       <li class="blockCommenter"><%= link_to content_tag(:span, "Block commenter"), "3" %></li>
       <li class="openInNewWindow"><%= link_to content_tag(:span, "Open in new window"), "4" %></li>
       <li class="reportAbuse"><%= link_to content_tag(:span, "Report abuse"), "5" %></li>
     </ul>  
   </nav> 
```

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T10:21:43.587

尝试这个：

```
// Fast way to attach handlers to body
$(document.body).click(function(ev) {
    // Get the clicked element through ev.target
    var clickedElement = $(ev.target);
    // If the element is a visible .postMenu, then ignore.
    if(clickedElement.is('.microPostOptions:visible')) {
        return;
    }
    // If not then slide it up. Note else not needed as we returned early.
    $('.microPostOptions').slideUp();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T10:22:13.113

基本上，您需要执行以下操作：

[http://jsfiddle.net/49N8s/1/](http://jsfiddle.net/49N8s/1/)

```
$(document).on('click', function(e){
    var menu = $('.postMenu');
    var target = $(e.target);
    if(menu.has(target).length > 0 || menu.is(target)){
        return false;
    }
    menu.hide();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T10:15:41.960

像这样的东西：

```
$('html').click(function() {
$('.postMenu').hide();
}); 
```

# visual-studio-2010 - 关于 Windows Phone 的 Visual Studio Express 2010

> ID：10053518
> 
> 赞同：1
> 
> 时间：2012-04-07T10:05:55.903
> 
> 标签：visual-studio-2010, windows-phone-7, f#

我有几个关于这个 IDE 的问题。

首先，当启动vs2010时，它会显示如下一些信息

![注册信息](../Images/6f53299b4fb40f1bc72f32a97d5c0e3c.png)

我想 VS2010 Express 是免费使用的，但为什么它告诉我它有 30 天的限制？

其次，在我为windows phone 安装了vs2010 express 之后，我还安装了从[这里](http://www.microsoft.com/download/en/details.aspx?id=11100)下载的F# （InstallFSharp.msi）。安装完成后，我启动了 vs2010，在新项目菜单中看不到模板之类的东西，我错过了什么吗？

第三，在这个windows phone的vs2010 express中，没有Tools->Extension这样的菜单，如果我需要添加[这里](https://stackoverflow.com/questions/9965072/how-to-set-up-windows-phone-develop-environment-and-using-f-to-develop-applicat)描述的一些F# windows phone模板怎么办？

最后，我必须为我的英语道歉，如果这里的问题不清楚，请发表评论，我会更加努力地把它说清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T10:15:20.783

您需要注册 VS Express 才能继续使用它。我不是 100% 确定微软*为什么*要这样做，但他们有。如果您想继续使用它，您别无选择，只能注册。没什么大不了的。

Express 版本中没有“工具”>“扩展”菜单，因为这是 Microsoft 实施的限制之一。

# java - 如何使 ANT 变得冗长？

> ID：10053519
> 
> 赞同：54
> 
> 时间：2012-04-07T10:06:13.243
> 
> 标签：java, ant, intellij-idea

尝试在想法 10 中使用 ANT 构建我的项目，我得到一个编译错误，但我没有看到实际错误。

如何使 ANT 变得冗长？

我所看到的是：

```
javac build.xml:303: Compile failed; see the compiler error output for
details. at
org.apache.tools.ant.taskdefs.Javac.compile(Javac.java:1150)
etc.... rest of ANT stack trace 
```

我的任务如下所示：

```
<javac includeantruntime="false" destdir="${webapp.classes.dir}" debug="true">
    <src path="${src.dir}"/>
    <classpath refid="project.classpath"/>
</javac> 
```

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-04-07T10:12:13.273

要为 ant 启用详细输出：

```
ant -v 
```

或者

```
ant -verbose 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-12-17T19:34:16.693

*您还可以使用 task record*启用 build.xml 本身的日志记录。这是有关它的文档[http://ant.apache.org/manual/Tasks/recorder.html](http://ant.apache.org/manual/Tasks/recorder.html)

```
<record name="/output/build.log" loglevel="verbose" action="start"/> 
```

这很简单而且有效！:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T22:00:03.140

还有可能进行更细微的日志记录，这意味着仅更改特定部分的噪声级别，而不是像 ant -v 或 ant -debug 那样更改整个 ant 脚本。请参阅 [在没有 -q 标志的情况下使 ant 安静吗？](https://stackoverflow.com/q/5462732/130683)对于另一个处理日志级别和答案的问题。

# c# - C# WinForms 透明点击控件进行绘制

> ID：10053521
> 
> 赞同：1
> 
> 时间：2012-04-07T10:06:45.023
> 
> 标签：c#, winforms, controls, transparent

我正在使用自定义 TreeView 类，因为我需要拖放功能。我在树视图上画线，以向用户显示拖动的项目将去哪里。这会产生很多可见的闪烁，因为每次“放置目标”发生变化时，我都必须重新绘制树视图（以清理之前绘制的任何内容）

不幸的是，TreeView 没有 DoubleBuffered 选项。

所以，我想到了这个解决方案：一个可以在自身上绘制的不可见控件，位于树视图上，但传递所有鼠标事件并且不接收焦点。我可以在该控件上绘画，从而防止闪烁。

但是，我完全不知道该怎么做。我知道我可以将面板颜色设置为透明，但这不会让它变成点击...

PS：我最终选择了简单的方法，即 - 用白色重新绘制我之前绘制的内容，然后用黑色绘制新的选择指示器，而不会使控件无效。这消除了闪烁。但是，由于 StackOverflow 迫使您选择一个答案，我会选择一个我认为最合适的答案......可能......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T11:12:44.757

Taking a look at the [Locus Effect library](http://www.codeproject.com/Articles/10879/Locus-Effects), they do paint transparent top-level windows that can be clicked-through.

In the heart of the solutions, this is done by a window that overrides the Window Procedure similar to this:

```
protected override void WndProc(ref Message m)
{
    // Do not allow this window to become active - it should be "transparent" 
    // to mouse clicks i.e. Mouse clicks pass through this window
    if ( m.Msg == Win32Constants.WM_NCHITTEST )
    {
        m.Result = new IntPtr( Win32Constants.HTTRANSPARENT );
        return;
    }

    base.WndProc( ref m ) ;
} 
```

With [`WM_NCHITTEST`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645618%28v=vs.85%29.aspx) being `0x0084` and `HTTRANSPARENT` being `-1`.

While I'm not sure whether this solution works for child controls, too, it might be worth giving it a try. Simply derive a control and override the `WndProc`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T21:59:21.807

```
 protected override void WndProc(ref Message m)
    {
        if (m.Msg == 0x84)
        {
            m.Result= new IntPtr(-1);
            return;
        }
        base.WndProc(ref m);
    } 
```

这是2012年的工作......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T10:42:20.077

即使是这样的透明画布也必须重新绘制其背景（包括其背后的东西）。也许这有一些技巧，但每次我遇到组件闪烁问题时，从来没有真正令人满意的解决方案，包括利用组件（甚至自定义）双缓冲。当像这样的实时图形交互成为应用程序的必要部分时，我总是发现最好的选择是转向以“正确方式”处理图形的东西。WPF、XNA 或 DirectX 可能是这个问题的最佳答案。WPF 还添加了诸如路由事件之类的东西，这使得这种单事件->多组件范例更易于编码。

以下是在 winforms 应用程序中使用 WPF 互操作性组件的示例：

1）在表单中添加一个新的 ElementHost（我在这里调用它`elementHost1`）

2）向您的项目添加一个新的 WPF UserControl（我称之为`TreeCanvas`）

XAML

```
<UserControl x:Class="WindowsFormsApplication1.TreeCanvas"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" Width="300" Height="300">
<Grid>
    <Canvas Name="Canvas1">
        <TreeView Canvas.Left="0" Canvas.Top="0" Height="300" Name="TreeView1" Width="300" />
    </Canvas>
</Grid> 
```

TreeCanvas 背后的代码不需要任何东西 - 生成的代码`InitializeComponent();`就是您现在所需要的。

还有你的表单代码

```
using System;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Shapes;
using System.Windows.Media;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        //make a new TreeCanvas

        private TreeCanvas MyTreeCanvas = new TreeCanvas();

        public Form1()
        {
            InitializeComponent();
            //attach the TreeCanvas component to the element host
            this.Width = 400;
            this.Height = 400;
            elementHost1.Child = MyTreeCanvas;
            elementHost1.Location = new System.Drawing.Point(30, 30);
            elementHost1.Height = 300;
            elementHost1.Width = 300;

            // Just adding some random stuff to the treeview
            int i = 0;
            int j = 0;
            for (i = 0; i <= 10; i++)
            {
                TreeViewItem nitm = new TreeViewItem();
                nitm.Header = "Item " + Convert.ToString(i);
                MyTreeCanvas.TreeView1.Items.Add(nitm);
                for (j = 1; j <= 3; j++)
                {
                    TreeViewItem itm = (TreeViewItem)MyTreeCanvas.TreeView1.Items[i];
                    itm.Items.Add("Item " + Convert.ToString(j));
                }
            }

            //Draw a line on the canvas with the treeview
            Line myLine = new Line();
            myLine.Stroke = System.Windows.Media.Brushes.Red;
            myLine.X1 = 1;
            myLine.X2 = 50;
            myLine.Y1 = 1;
            myLine.Y2 = 300;
            myLine.HorizontalAlignment = System.Windows.HorizontalAlignment.Left;
            myLine.VerticalAlignment = VerticalAlignment.Center;
            myLine.StrokeThickness = 2;
            MyTreeCanvas.Canvas1.Children.Add(myLine);
        }

    }
} 
```

这为您在画布内提供了一个树视图，您可以在其顶部进行绘制，同时仍然可以单击和操作下面的树视图（包括鼠标滚动事件等）。

如果您直接在一行上单击，则单击将不会通过，同样，如果鼠标直接悬停在画布上的一行上，则滚动事件之类的事情将不会通过，但是如果您阅读了[Routed Events](http://msdn.microsoft.com/en-us/library/ms742806.aspx)您可以很容易地连线在 TreeCanvas 类中将它们组合在一起。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-07T12:12:35.950

我将发布无聊但有效的答案。TreeView 已经有一种非常好的无闪烁方式来突出显示节点。只需为其 DragOver 事件实现一个事件处理程序即可使用它。像这样：

```
 private void treeView_DragOver(object sender, DragEventArgs e) {
        var tree = (TreeView)sender;
        var pos = tree.PointToClient(new Point(e.X, e.Y));
        var hit = tree.HitTest(pos);
        if (hit.Node == null) e.Effect = DragDropEffects.None;
        else {
            tree.SelectedNode = hit.Node;
            tree.SelectedNode.Expand();        // Optional
            e.Effect = DragDropEffects.Copy;
        }
    } 
```

注意代码中 TreeNode.Expand() 的使用。从问题中不清楚您是否需要它，但通常需要它，因为用户没有其他好的方法可以访问由于其父节点折叠而隐藏的子节点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-07T10:55:36.880

好吧，您的叠加层必须获得焦点才能将自己附加到鼠标点击和移动上。不确定这样做是否一定会解决您的问题。

但是，如果您创建自定义面板使其透明，请添加一个属性以提供指向自定义树视图的链接。添加说一个 onmouseclick 处理程序。此时，您可以解释单击方式并在面板上绘制内容并在关联的自定义树视图上调用方法。

所以它的基础设施部分是非常微不足道的，摆脱闪烁，虽然基本上是关于尽量减少绘制的数量，这就是频率和多少。

我怀疑如果你的透明面板和树视图一样大，它无论如何都会画出整个东西。您也许可以从需要 rect 的 Invalidate 过载中获得更多收益，也许......

# php - 用于在 SQL 数据库中插入/更新/删除条目的 PHP 代码

> ID：10053525
> 
> 赞同：0
> 
> 时间：2012-04-07T10:07:08.143
> 
> 标签：php, mysql, insert, sql-update, insert-update

我有两个数据库，一个很大（5 GB）和一个较小的数据库，它使用作为 cron 作业运行的 PHP 进行更新，以从大数据库中提取必要的数据。

到目前为止，如果该行不存在，我已经能够从大数据库中提取数据并将其插入到小数据库中。

这是数据库行的样子：

```
123456 TeamA-TeamB 1.14 4.30 7.60
(id, eventname, odds1, oddsX, odds2) 
```

PHP 需要 a) 检查行是否存在，b1) 如果不存在则添加，b2) 如果存在则检查值odds1、oddsX 和odds2 是否不同，c) 如果存在，更新值。

这是执行 a) 和 b1) 的代码：

```
$SQL_INSERT="INSERT IGNORE INTO oddsnavi_baby.calc (id, eventname, odds1, oddsX, odds2) VALUES ('$eventid', '$eventname', '$odds1', '$oddsX', '$odds2')";
mysql_db_query($database_baby, $SQL_INSERT) or die("Failed Query of " . $SQL_INSERT); 
```

如果odds1、oddsX 或odds2 的现有值与打算写入数据库的值不同，如何更改此部分以更新行？如果*任何*值不同，如果行更新也很好，因为前两个无论如何都不会改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T11:03:57.680

```
$SQL_INSERT="INSERT IGNORE INTO oddsnavi_baby.calc (id, eventname, odds1, oddsX, odds2) VALUES ('$eventid', '$eventname', '$odds1', '$oddsX', '$odds2')";
$SQL_UPDATE="update oddsnavi_baby.calc set odds1=\"$odds1\",oddsX=\"$oddsX\",odds2=\"$odds2\" where id=\"$eventid\");
$query="select * from oddsnavi_baby.calc where id=\"$eventid\"";
$process=mysql_query($query);
if(mysql_num_rows($process))       
        mysql_db_query($SQL_UPDATE);
else
        mysql_db_query($database_baby, $SQL_INSERT) or die("Failed Query of " . $SQL_INSERT); 
```

在这种情况下，如果行数据没有变化，则存在冗余，那么更新也将是开销。检查值可以减少它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:36:50.957

尝试：

```
REPLACE INTO 
```

而不是 INSERT IGNORE INTO。

此处的文档：http: [//dev.mysql.com/doc/refman/5.0/en/replace.html](http://dev.mysql.com/doc/refman/5.0/en/replace.html)

# php - 在 php 中初始化类成员的最佳实践

> ID：10053529
> 
> 赞同：1
> 
> 时间：2012-04-07T10:07:38.737
> 
> 标签：php, oop, class, constructor, initialization

我的构造函数中有很多这样的代码：-

```
function __construct($params) {

    $this->property = isset($params['property']) ? $params['property'] : default_val;

} 
```

一些默认值取自其他属性，这就是我在构造函数中这样做的原因。但我想它可以在 setter 中完成。

这种方法的优缺点是什么，还有更好的方法吗？

**编辑：**我有一些依赖关系，如果数组中未提供`$params`属性，则该值取自另一个属性，但是其他属性可能是可选的并且具有默认值，因此初始化属性的顺序很重要。

这意味着如果我使用 getter 和 setter，那么调用它们的顺序并不明显，因为依赖项在 getter 中被抽象出来，而不是在构造函数中......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T10:21:52.807

我建议您编写适当的 getter/setter 函数，它为您断言正确的数据类型和验证（并包含您提到的默认值逻辑）。这些应该在您的构造函数中使用。当设置多个相互依赖的字段时，为这些复杂数据设置一个单独的设置器似乎很好。无论如何，他们以哪种方式依赖？

例如：

```
// META-Config
protected $static_default_values = array(
  "price" => 0.0,
  "title" => "foobar"
  // and so on
);

protected $fallback_getter = array(
  "price" => "getfallback_price"
);

// Class Logic
public function __construct($params){
  $this->set_properties($params);
}

public set_properties($properties){
  // determines the sequence of the setter-calls
  $high_prio_fields = array("price", "title", "unimportant_field");

  foreach($high_prio_fields as $field){
    $this->generic_set($field, $properties[$field]);
    // important: unset fields in properties-param to avoid multiple calls
    unset($properties[$field]);
  }

  foreach($properties as $field => $value){
    $this->generic_set($field, $value);
  }
}

// this could also be defined within the magic-setter,
// but be aware, that magic-functions can't be resolved by your IDE completely
// for code-completion!
private function generic_set($field, $value){
  // check if setter exists for given field-key
   $setter_func = "set_".$v;
   if(method_exists($this, $setter_func){
     call_user_func_array(array($this, $setter_func), array($v));
   }
   // else => just discard  :)        
}

// same comment as generic-set
private function generic_get($field){
  // check if value is present in properties array
  if(isset($this->properties[$field]){
    return $this->properties[$field];
  }

  // check if fallback_getter is present
  if(isset($this->fallback_getter[$field]){
    return  call_user_func_array(array($this, $this->fallback_getter[$field]));
  }

  // check for default-value in meta-config
  if(isset($this->static_default_values[$field]){
    return $this->static_default_values[$field];
  }

  // else => fail (throw exception or return NULL)
  return null;
}

public function get_price(){
  // custom getter, which ovverrides generic get (if you want to)
  // custom code...
  return $this->generic_get("price");
}

private function getfallback_price(){
  return $this->properties["other_value"] * $this->properties["and_another_value"];
}

public function set_price($price){
  $price = (float) $price; // convert to correct data-type
  if($price >= 0.0){
    $this->properties["price"] = $price;
  }
  // else discard setting-func, because given parameter seems to be invalid
  // optional: throw exception or return FALSE on fail (so you can handle this on your own later)
} 
```

**更新您的编辑：** 修改后的源代码应该可以解决您的所有需求（setter-funcs 的顺序，get-value 的不同解析）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T10:17:36.267

创建“全球可用”功能`array_get`。

```
public static function array_get($array, $property, $default_value = null) {
    return isset($array[$property]) ? $array[$property] : $default_value;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T11:11:24.120

当有很多默认选项并且您需要能够覆盖它们时 - 正如您之前在 jQuery 中看到的那样`.extend()`- 我喜欢使用这种简单快捷的方法：

```
class Foo {
    private $options;

    public function __construct($override = array()) {
        $defaults = array(
           'param1' => 'foo', 
           'param2' => ..., 
           'paramN' => 'someOtherDefaultValue');
        $this->options= array_replace_recursive($defaults, $override);
    }
} 
```

特别是对于开始类来说，这是一种非常简单和灵活的方式，但正如已经提到的，如果该代码将被大量使用，那么使用 getter 和 setter 对这些选项进行更多控制可能不是一个坏主意，尤其是如果您需要在获取或设置其中一些选项时采取措施，例如在我正确理解您的问题的情况下依赖关系。

另请注意，您不必自己实现 getter 和 setter，在 PHP 中您可以使用 __get 和 __set 魔术方法。

它遵循一些无用的代码，希望能提供一些想法：

```
[...inside Foo...]
public function __set($key, $value){
    switch(true){
        //option exists in this class
        case isset($this->options[$key]):
           //below check if $value is callable
           //and use those functions as "setter" handlers
           //they could resolve dependencies for example 
           $this->options[$key] = is_callable($value) ? $value($key) : $value;  
        break;
        //Adds a virtual setter to Foo. This so called 'magic' __set method is also called if the property doesn't exist in the class, so you can add arbitrary things.
        case $key === 'someVirtualSetterProp': Xyzzy::Noop($value); break;
        default: 
           try{ parent::__set($key, $value); } catch(Exception $e){ /* Oops, fix it! */ }
    }
} 
```

请注意，在上面的示例中，我采用了不同的方法，这样混合它们通常没有意义。我这样做只是为了说明一些想法，希望您能够更好地决定什么更适合您的需求。

# shell - 编写一个 bash 重命名脚本

> ID：10053539
> 
> 赞同：0
> 
> 时间：2012-04-07T10:09:32.070
> 
> 标签：shell

我想不通，需要帮助完成以下任务：

现有的 Linux 程序 foo2bar 将单个 foo 文件的名称作为其唯一参数，并将其转换为适当命名的 bar 文件。提供一个脚本，该脚本在执行时将对当前目录中的所有 foo 文件运行 foo2bar。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T10:48:49.040

如果我理解正确：

```
#!/bin/sh

for f in *.foo; do
  foo2bar "$f"
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T07:02:41.527

您可以使用 "for r in `find . -name "*foo*"`; do mv $r $r"-" ; done" 重命名当前目录中的 foo 文件。

```
 # ls
 1.foo  2.foo  3.foo  foo  foo.1  foo.2  foo.3

 # for r in `find . -name "*foo*"` ; do mv $r $r"-" ; done

 # ls
 1.foo-  2.foo-  3.foo-  foo-  foo.1-  foo.2-  foo.3- 
```

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-21T07:10:31.620

我想这个[`rename`](http://unixhelp.ed.ac.uk/CGI/man-cgi?rename+1)命令可能是你的朋友。

IE

```
rename foo bar *foo* 
```

将更改所有文件名的`foo`to 。`bar``foo`

# python - 在给定输入中查找最大路线

> ID：10053540
> 
> 赞同：2
> 
> 时间：2012-04-07T10:09:35.493
> 
> 标签：python

我有这个作为家庭作业，我需要在 python 中完成。

```
Problem:
The Maximum Route is defined as the maximum total by traversing from the tip of the triangle to its base. Here the maximum route is (3+7+4+9) 23.

3
7 4
2 4 6
8 5 9 3

Now, given a certain triangle, my task is to find the Maximum Route for it. 
```

不知道该怎么做......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T12:13:53.330

我们可以使用回溯来解决这个问题。要对任何给定行中三角形的每个元素执行此操作，我们必须确定当前元素和下一行中三个连接的相邻元素之和的最大值，或者

> ```
> if elem = triangle[row][col] and the next row is triangle[row+1]
> 
> then backtrack_elem = max([elem + i for i in connected_neighbors of col in row]) 
> ```

首先尝试找到一种方法来确定`connected_neighbors of col in row`

对于位置 (row,col) 中的元素，将`[next[col-1],next[col],next[col+1]]`提供row = next 中的连接邻居，`col - 1 >=0`并且`col+1 < len(next)`. 这是示例实现

```
>>> def neigh(n,sz):
    return [i for i in (n-1,n,n+1) if 0<=i<sz] 
```

这将返回已连接邻居的索引。

现在我们可以`backtrack_elem = max([elem + i for i in connected_neighbors of col in row])`写成

```
triangle[row][i] = max([elem + next[n] for n in neigh(i,len(next))]) 
```

如果我们逐行迭代三角形并且 curr 是任何给定的行，那么 i 是该行的第 i 个 col 索引，那么我们可以写

```
curr[i]=max(next[n]+e for n in neigh(i,len(next))) 
```

现在我们必须迭代读取当前行和下一行的三角形。这可以作为

```
for (curr,next) in zip(triangle[-2::-1],triangle[::-1]): 
```

然后我们使用 enumerate 生成一个索引元组和元素本身

```
for (i,e) in enumerate(curr): 
```

然后我们一起泡吧

```
>>> for (curr,next) in zip(triangle[-2::-1],triangle[::-1]):
    for (i,e) in enumerate(curr):
        curr[i]=max(next[n]+e for n in neigh(i,len(next))) 
```

但是上述操作是破坏性的，我们必须创建原始三角形的副本并对其进行处理

```
route = triangle # This will not work, because in python copy is done by reference
route = triangle[:] #This will also not work, because triangle is a list of list
                    #and individual list would be copied with reference 
```

所以我们必须使用`deepcopy`模块

```
import copy
route = copy.deepcopy(triangle) #This will work 
```

并将 traverse 重写为

```
>>> for (curr,next) in zip(route[-2::-1],route[::-1]):
    for (i,e) in enumerate(curr):
        curr[i]=max(next[n]+e for n in neigh(i,len(next))) 
```

我们最终得到另一个三角形，其中每个元素都给出了可能的最高路线成本。要获得实际路线，我们必须使用原始三角形并向后计算

所以对于 index 处的元素`[row,col]`，最高的路由成本是 route[row][col]。如果它遵循最大路由，那么下一个元素应该是连接的邻居，并且路由成本应该是 route[row][col] - orig[row][col]。如果我们逐行迭代，我们可以写成

```
i=[x for x in neigh(next,i) if x == curr[i]-orig[i]][0]
orig[i] 
```

我们应该从峰值元素开始向下循环。因此我们有

```
>>> for (curr,next,orig) in zip(route,route[1:],triangle):
    print orig[i],
    i=[x for x in neigh(i,len(next)) if next[x] == curr[i]-orig[i]][0] 
```

让我们举一个复杂的例子，因为你的太微不足道了

```
>>> triangle=[
          [3],
          [7, 4],
          [2, 4, 6],
          [8, 5, 9, 3],
          [15,10,2, 7, 8]
         ]

>>> route=copy.deepcopy(triangle) # Create a Copy 
```

生成路线

```
>>> for (curr,next) in zip(route[-2::-1],route[::-1]):
    for (i,e) in enumerate(curr):
        curr[i]=max(next[n]+e for n in neigh(i,len(next)))

>>> route
[[37], [34, 31], [25, 27, 26], [23, 20, 19, 11], [15, 10, 2, 7, 8]] 
```

最后我们计算路线

```
>>> def enroute(triangle):
    route=copy.deepcopy(triangle) # Create a Copy
    # Generating the Route
    for (curr,next) in zip(route[-2::-1],route[::-1]): #Read the curr and next row
        for (i,e) in enumerate(curr):
            #Backtrack calculation
            curr[i]=max(next[n]+e for n in neigh(i,len(next)))
    path=[] #Start with the peak elem
    for (curr,next,orig) in zip(route,route[1:],triangle): #Read the curr, next and orig row
        path.append(orig[i])
        i=[x for x in neigh(i,len(next)) if next[x] == curr[i]-orig[i]][0]
    path.append(triangle[-1][i]) #Don't forget the last row which
    return (route[0],path) 
```

为了测试我们的三角形，我们有

```
>>> enroute(triangle)
([37], [3, 7, 4, 8, 15]) 
```

* * *

阅读 jamylak 的评论，我意识到这个问题类似于 Euler 18，但不同之处在于表示。Euler 18 中的问题考虑了一个金字塔，因为这个问题中的问题是一个直角三角形。正如您可以阅读我对他的评论的回复，我解释了结果会不同的原因。尽管如此，这个问题可以很容易地移植到 Euler 18 上。这里是移植

```
>>> def enroute(triangle,neigh=lambda n,sz:[i for i in (n-1,n,n+1) if 0<=i<sz]):
    route=copy.deepcopy(triangle) # Create a Copy
    # Generating the Route
    for (curr,next) in zip(route[-2::-1],route[::-1]): #Read the curr and next row
        for (i,e) in enumerate(curr):
            #Backtrack calculation
            curr[i]=max(next[n]+e for n in neigh(i,len(next)))
    path=[] #Start with the peak elem
    for (curr,next,orig) in zip(route,route[1:],triangle): #Read the curr, next and orig row
        path.append(orig[i])
        i=[x for x in neigh(i,len(next)) if next[x] == curr[i]-orig[i]][0]
    path.append(triangle[-1][i]) #Don't forget the last row which
    return (route[0],path)

>>> enroute(t1) # For Right angle triangle
([1116], [75, 64, 82, 87, 82, 75, 77, 65, 41, 72, 71, 70, 91, 66, 98])
>>> enroute(t1,neigh=lambda n,sz:[i for i in (n,n+1) if i<sz]) # For a Pyramid
([1074], [75, 64, 82, 87, 82, 75, 73, 28, 83, 32, 91, 78, 58, 73, 93])
>>> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T13:42:54.240

即使这是家庭作业，@abhijit 也给出了答案，所以我也会！

要理解这一点，您需要阅读 python 生成器，可能需要谷歌搜索；）

```
>>> triangle=[
          [3],
          [7, 4],
          [2, 4, 6],
          [8, 5, 9, 3]
         ] 
```

第一步是找到所有可能的路线

```
>>> def routes(rows,current_row=0,start=0): 
        for i,num in enumerate(rows[current_row]): #gets the index and number of each number in the row
            if abs(i-start) > 1:   # Checks if it is within 1 number radius, if not it skips this one. Use if not (0 <= (i-start) < 2) to check in pyramid
                continue
            if current_row == len(rows) - 1: # We are iterating through the last row so simply yield the number as it has no children
                yield [num]
            else:
                for child in routes(rows,current_row+1,i): #This is not the last row so get all children of this number and yield them
                    yield [num] + child 
```

这给

```
>>> list(routes(triangle))
[[3, 7, 2, 8], [3, 7, 2, 5], [3, 7, 4, 8], [3, 7, 4, 5], [3, 7, 4, 9], [3, 4, 2, 8], [3, 4, 2, 5], [3, 4, 4, 8], [3, 4, 4, 5], [3, 4, 4, 9], [3, 4, 6, 5], [3, 4, 6, 9], [3, 4, 6, 3]] 
```

现在获取最大值很简单，max 接受生成器，因为它们是可迭代的，因此我们不需要将其转换为列表。

```
>>> max(routes(triangle),key=sum)
[3, 7, 4, 9] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T10:40:38.147

我会给你一些关于这个具体案例的提示。尝试自己为 n 层三角形创建一个广义函数。

```
triangle=[
          [3],
          [7, 4],
          [2, 4, 6],
          [8, 5, 9, 3]
         ]

possible_roads={}

for i1 in range(1):
    for i2 in range(max(i1-1,0),i1+2):
        for i3 in range(max(i2-1,0),i2+2):
            for i4 in range(max(i3-1,0),i3+2):
                road=(triangle[0][i1],triangle[1][i2],triangle[2][i3],triangle[3][i4])
                possible_roads[road]=sum(road)

print "Best road: %s (sum: %s)" % (max(possible_roads), possible_roads[max(possible_roads)]) 
```

**[编辑]**因为每个人都在这里发布他们的答案是我的。

```
triangle=[
          [3],
          [7, 4],
          [2, 4, 6],
          [8, 5, 9, 3]
         ]

def generate_backtrack(triangle):
    n=len(triangle)
    routes=[[{'pos':i,'val':triangle[n-1][i]}] for i in range(n)]
    while n!=1:
        base_routes=[]
        for idx in range(len(routes)):
            i=routes[idx][-1]['pos'] #last node
            movements=range(
                                max(0,i-1),
                                min(i+2,n-1)
                            )
            for movement in movements:
                base_routes.append(routes[idx]+[{'pos':movement,'val':triangle[n-2][movement]}])

        n-=1
        routes=base_routes
    return [[k['val'] for k in j] for j in routes]

print sorted(generate_backtrack(triangle),key=sum,reverse=True)[0][::-1] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T10:05:28.277

我的答案

```
def maxpath(listN):
  liv = len(listN) -1
  return calcl(listN,liv)

def calcl(listN,liv):
  if liv == 0:
    return listN[0]
  listN[liv-1] = [(listN[liv-1][i]+listN[liv][i+1],listN[liv-1][i]+listN[liv][i]) \
            [ listN[liv][i] > listN[liv][i+1] ] for i in range(0,liv)]
  return calcl(listN,liv-1) 
```

输出

```
l5=[
      [3],
      [7, 4],
      [2, 4, 6],
      [8, 5, 9, 3],
      [15,10,2, 7, 8]
     ]
print(maxpath(l5)
>>>[35] 
```

# c# - 如何从用户控件访问页面控件？

> ID：10053541
> 
> 赞同：5
> 
> 时间：2012-04-07T10:09:53.057
> 
> 标签：c#, asp.net, user-controls

有没有办法从用户控件访问页面控件。我的页面中有一些控件，我想从用户控件访问这些控件。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-09T11:10:32.430

```
YourControlType ltMetaTags = null;
Control ctl = this.Parent;
while (true)
{
    ltMetaTags = (ControlType)ctl.FindControl("ControlName");
    if (ltMetaTags == null)
    {
        ctl = ctl.Parent;
        if(ctl.Parent == null)
        {
            return;
        }
        continue;
    }
    break;
} 
```

例子

```
System.Web.UI.WebControls.Literal ltMetaTags = null;
Control ctl = this.Parent;
while (true)
{
    ltMetaTags = (System.Web.UI.WebControls.Literal)ctl.FindControl("ltMetaTags");
    if (ltMetaTags == null)
    {
        if(ctl.Parent == null)
        {
            return;
        }
        ctl = ctl.Parent;
        continue;
    }
    break;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-07T10:25:47.393

实际上有几种方法可以做到这一点：

在用户控件中创建公共属性

```
public Button PageButton { get; set; } 
```

然后在页面的 OnInit 或 OnLoad 方法中赋值

```
myUserControl.PageButton = myPageButton; 
```

您可以将控件设为公开并取消装箱页面：

```
public Button PageButton { get { return this.myPageButton; } } 
```

在用户控件中：

```
MyPage myPage = (MyPage)this.Page;
myPage.PageButton.Text = "Hello"; 
```

最慢但最简单的方法是使用 FindControl：

```
this.Page.FindControl("myPageButton"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-07T10:15:40.947

```
 Parent.FindControl("hdnValue") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-07T11:37:49.587

**它对我的工作：**

我在我的`.aspx`页面中声明标签

```
 <asp:Label ID="lblpage" runat="server" Text="this is my page"></asp:Label>
  <asp:Panel ID="pnlUC" runat="server"></asp:Panel> 
```

在`.aspx.cs`我通过添加 UserControl`Panel`

```
 UserControl objControl = (UserControl)Page.LoadControl("~/ts1.ascx");
   pnlUC.Controls.Add(objControl); 
```

并像这样从`.ascx`UserControl 访问：

```
 Page page = this.Page;
 Label lbl = page.FindControl("lblpage") as Label;
 string textval = lbl.Text; 
```

# r - 如何通过 R 中的模型绘制估计值

> ID：10053548
> 
> 赞同：0
> 
> 时间：2012-04-07T10:10:54.727
> 
> 标签：r, plot, modeling

我正在尝试使用 R 进行一些建模，我已经开始使用 BodyWeight 库，因为我在网上看到了一些示例。只是为了理解和习惯命令。

我已经得出了我的最终模型，带有估计值，我想知道如何绘制这些估计值，但我没有在网上看到任何东西..

![在此处输入图像描述](../Images/0cfa91ad5a272f528181399af1a39719.png)

有没有办法用一条线绘制估计值，并为每个观察值绘制点？

我在哪里可以找到有关如何执行此操作的信息，我是否必须自己提取值，或者可以说绘制这些模型的估计值？

我只是从 R 开始。欢迎任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T11:22:35.537

没有仅绘制模型输出的函数，因为通常有许多不同的可能方式来绘制输出。

查看`predict`您使用的任何模型类型的函数（例如，使用函数的线性回归`lm`）`predict.lm`。

然后选择一个绘图系统（对于不同的饮食水平，您可能需要不同的面板，所以使用 ggplot2 或 lattice）。然后看看你是否可以用文字更清楚地描述你想要情节的样子。如果遇到困难，请更新您的问题。

* * *

现在我们已经确定了您使用的数据集，这是一个可能的图：

```
#Run your model
model <- lme(weight ~ Time + Diet, BodyWeight, ~ 1 | Rat)
summary(model)

#Predict the values
#predict.lme is a pain because you have to specify which rat
#you are interested in, but we don't want that
#manually predicting things instead
times <- seq.int(0, 65, 0.1)
mcf <- model$coefficients$fixed
predicted <- 
  mcf["(Intercept)"] + 
  rep.int(mcf["Time"] * times, nlevels(BodyWeight$Diet)) + 
  rep(c(0, mcf["Diet2"], mcf["Diet3"]), each = length(times))
prediction_data <- data.frame(
  weight = predicted,
  Time   = rep.int(times, nlevels(BodyWeight$Diet)),
  Diet   = rep(levels(BodyWeight$Diet), each = length(times))
)  

#Draw the plot (using ggplot2)
(p <- ggplot(BodyWeight, aes(Time, weight, colour = Diet)) + 
  geom_point() +
  geom_line(data = prediction_data)
) 
```

# .htaccess - 从 /news 重定向到 /news/

> ID：10053552
> 
> 赞同：1
> 
> 时间：2012-04-07T10:11:30.783
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我想知道如何以谷歌友好的方式重定向`/news`到`/news/`，因为谷歌将它们视为 2 个不同的页面。我已经在使用元规范 url，但是如何使用 RewriteRule 做到这一点？

```
RewriteRule ^news$ /news.php [NC]
RewriteRule ^news/$ /news.php [NC] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T10:21:07.300

尝试阅读此[链接](http://enarion.net/web/htaccess/trailing-slash/)，我相信它描述并解决了您的问题。

它建议添加到 .htaccess

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !example.php
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ http://domain.com/$1/ [L,R=301] 
```

在您的情况下，如果您只想要一个简单的规则

```
RewriteRule ^news$ ^news/$ [NC]
RewriteRule ^news/$ /news.php [NC] 
```

# php - mysql查询中的逗号分隔搜索

> ID：10053555
> 
> 赞同：1
> 
> 时间：2012-04-07T10:12:17.703
> 
> 标签：php, mysql, sql

我的网站中有搜索机制。为此，我编写了一个大型条件查询。

```
$sql = "select * from users where 
keyword like '%".$_POST['search']."%' 
OR name like '%".$_POST['search']."%'"; 
```

现在，我想我在网站上有以下数据：

```
ID    Name    Keyword
1     Sanjay  sanjay, surani
2     Ankit   ankit, shah
3     Ravi    ravi, kotwani 
```

现在，我需要这样的结果，当用户写入时`"sanjay, shah" ($_POST['search'] = 'sanjay, shah')`，应该显示记录 1 和 2。

我可以在单个 mysql 查询中实现这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T10:56:46.723

如果您要重组关键字字段并将其分解，使其只有一个名称，该怎么办？

所以而不是

```
ID    Name    Keyword
1     Sanjay  sanjay, surani
2     Ankit   ankit, shah
3     Ravi    ravi, kotwani 
```

你会有

```
ID    Name    KeyID
1     Sanjay  1
2     Sanjay  2
3     Ankit   3
4     Ankit   4
5     Ravi    5
6     Ravi    6

KeyID Keyword
1     sanjay
2     surani
3     ankit
4     shah
5     ravi
6     kotwani 
```

搜索会快得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T11:27:12.323

使用 php in_array 这将简化您的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T10:26:30.193

这里是 ：

```
$query_elems = explode(",", $query);
$searches = array();
foreach($query_elems as $qe){
    $searches[] = "keyword like '%" . trim($qe) . "%' or name like '%" . trim($qe) . "%'";
}
$query = "select * from users where " . implode(" or ",$searches);
$result = mysql_query($query) 
```

# c# - 如何设置/使用带有参数的 WPF 使用控件？

> ID：10053562
> 
> 赞同：0
> 
> 时间：2012-04-07T10:13:43.273
> 
> 标签：c#, wpf, user-controls

在我的 mainwindow.xaml 中有网格：

```
<CustomControl:GridControl ShowCustomGridLines="True" Grid.Column="2" Grid.Row="0">
   <local:_13cap/>
</CustomControl:GridControl> 
```

其中 13cap 是我的自定义控件：

```
<UserControl x:Class="TTTP._13cap"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:CustomControl="clr-namespace:WpfApplication1.CustomControl"
             mc:Ignorable="d">
        <CustomControl:GridControl ShowCustomGridLines="True">
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition />
                <RowDefinition />
            </Grid.RowDefinitions>
            <TextBlock Grid.Column="0" Grid.ColumnSpan="3" Grid.Row="0" HorizontalAlignment="Center" VerticalAlignment="Center" Text="ВСЕГО" />
            <CustomControl:GridControl ShowCustomGridLines="True" Grid.Column="2" Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition />
                </Grid.RowDefinitions>
                <TextBlock Grid.Column="0" Grid.Row="1" Text="П" HorizontalAlignment="Center" VerticalAlignment="Center" />
                <TextBlock Grid.Column="1" Grid.Row="1" Text="Ф" HorizontalAlignment="Center" VerticalAlignment="Center" />
                <TextBlock Grid.Column="2" Grid.Row="1" Text="%" HorizontalAlignment="Center" VerticalAlignment="Center" />
            </CustomControl:GridControl>
        </CustomControl:GridControl>
</UserControl> 
```

但是我只想用一个不同的文本参数（ Text="ВСЕГО" ）来调用它，就像我想调用 `<local:_13cap MyText="CustomText"/>`它来覆盖“ВСЕГО”一样。如何在其中创建带有此类参数的 UserControl？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T12:14:29.673

[实现一个 DependancyProperty](http://msdn.microsoft.com/en-us/library/ms752914.aspx)，您可以从代码隐藏更改并绑定到 XAML。

* * *

后面的代码：

```
public class MyUserControl : UserControl, INotifyPropertyChanged
{
    //INotifyPropertyChanged implementation
    public event PropertyChangedEventHandler PropertyChanged; 
    protected void OnPropertyChanged(string propertyName) 
    { 
        if (PropertyChanged != null) 
        { 
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName)); 
        } 
    } 

    //The XAML binding uses this
    public static readonly DependencyProperty CaptionProperty = 
         DependencyProperty.Register("Caption", typeof(string), typeof(MyUserControl), 
         new PropertyMetadata(string.Empty, OnCaptionPropertyChanged));

    //Your code-behind uses this
    public string Caption 
    {  
        get { return GetValue(CaptionProperty).ToString(); }  
        set 
        {
            SetValue(CaptionProperty, value);
            OnPropertyChanged("Caption");
        } 
    } 
```

xml:

```
<UserControl (...)>
    <Grid>
        <Label x:Name="labCaption" Content="{Binding Caption}"/>
    </Grid>
</UserControl> 
```

这里还有很多关于这个的其他问题，还有很多关于谷歌的好文章和教程，它们比我能更好地解释它。

# jmeter - Apache JMeter 连接错误

> ID：10053563
> 
> 赞同：1
> 
> 时间：2012-04-07T10:13:46.097
> 
> 标签：jmeter, load-testing

嗨，正在使用 apache testload 进行负载测试。我得到这个错误，但我的 tomcat 服务器上没有堆栈跟踪

```
 java.net.ConnectException: Connection timed out: connect
        at java.net.PlainSocketImpl.socketConnect(Native Method)
        at java.net.PlainSocketImpl.doConnect(Unknown Source)
        at java.net.PlainSocketImpl.connectToAddress(Unknown Source)
        at java.net.PlainSocketImpl.connect(Unknown Source)
        at java.net.SocksSocketImpl.connect(Unknown Source)
        at java.net.Socket.connect(Unknown Source)
        at java.net.Socket.connect(Unknown Source)
        at sun.net.NetworkClient.doConnect(Unknown Source)
        at sun.net.www.http.HttpClient.openServer(Unknown Source)
        at sun.net.www.http.HttpClient.openServer(Unknown Source)
        at sun.net.www.http.HttpClient.<init>(Unknown Source)
        at sun.net.www.http.HttpClient.New(Unknown Source)
        at sun.net.www.http.HttpClient.New(Unknown Source)
        at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(Unknown Source)
        at sun.net.www.protocol.http.HttpURLConnection.plainConnect(Unknown Source)
        at sun.net.www.protocol.http.HttpURLConnection.connect(Unknown Source)
        at org.apache.jmeter.protocol.http.sampler.HTTPJavaImpl.sample(HTTPJavaImpl.java:479)
        at org.apache.jmeter.protocol.http.sampler.HTTPSamplerProxy.sample(HTTPSamplerProxy.java:62)
        at org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:1054)
        at org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:1043)
        at org.apache.jmeter.threads.JMeterThread.process_sampler(JMeterThread.java:416)
        at org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:271)
        at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T12:17:21.577

似乎无法访问您输入的网址 - 您是否：

*   得到正确的主机名和端口号？
*   检查运行 JMeter 的桌面和 Tomcat 服务器之间是否有防火墙？
*   检查是否可以通过浏览器访问 tomcat 实例？
*   浏览器是否使用了您尚未在 JMeter 配置中镜像的任何代理设置？

# design-patterns - 如何使用第三方接口java创建类

> ID：10053566
> 
> 赞同：1
> 
> 时间：2012-04-07T10:13:54.007
> 
> 标签：design-patterns

我有一个界面

```
interface Sound  {
 createsound()
} 
```

我在另一个库中有第二个界面

```
interface Soundable
{
   makesound
} 
```

和实现其中一个接口的类我需要对代码进行更改才能像这样使用它

```
System.out.println(creature.createSound()); 
```

我应该使用女巫设计模式来使用实现`Soundable`接口的类吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T12:27:47.427

看起来像一个简单的[适配器](http://en.wikipedia.org/wiki/Adapter_pattern)就可以了。通过将调用委托给wrap 来创建一个包装和`Soundable`实现的类。`Sound``createsound``Soundable.makesound`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T12:43:13.170

您必须使用[适配器模式](http://it.wikipedia.org/wiki/Adapter_pattern)。

# android - Android ICS 对话框标题颜色

> ID：10053570
> 
> 赞同：4
> 
> 时间：2012-04-07T10:14:47.733
> 
> 标签：android, android-dialog, android-styles

我想为 ICS-Devices 中的对话框使用自定义颜色。默认的是蓝色（见图），我如何将它设置为适合我的应用配色方案的颜色，例如红色？

![示例对话框](../Images/ca41ce558a1967263fd068d709dfcfaf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T16:46:22.380

尝试这个：

```
alert.setTitle(Html.fromHtml("<font color='#FF0000'>User Agent</font>")); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-02T12:11:43.257

你可以试试这个：

```
AlertDialog alert = builder.create();
alert.show();
alert.getListView().setBackgroundColor(Color.RED); //This is for Color
alert.setCancelable(true); 
```

# java - 在 Ubuntu 中使用 com.sun.media.sound.javasoundaudioclip 类？

> ID：10053571
> 
> 赞同：0
> 
> 时间：2012-04-07T10:14:57.070
> 
> 标签：java, ubuntu

我尝试在 Ubuntu 中使用 JavaSoundAudioClip 类，但是在其中找不到它。我怎样才能将它带到 Ubuntu？它不是 Java 的默认库吗？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T00:19:32.310

您不应使用任何以 com.sun.* 为前缀的软件包，因为它们是 Sun 的内部软件包，不适合外部使用，因为它们可能会在没有警告的情况下更改：

[http://www.oracle.com/technetwork/java/faq-sun-packages-142232.html](http://www.oracle.com/technetwork/java/faq-sun-packages-142232.html)

支持外部使用的公共 API 是*javax.sound。**

此处的文档：http: [//docs.oracle.com/javase/1.5.0/docs/guide/sound/programmer_guide/contents.html](http://docs.oracle.com/javase/1.5.0/docs/guide/sound/programmer_guide/contents.html)

[您还可以在Apache Commons](http://commons.apache.org/)中找到很多有用的包。

# css - 特定页面上的粘页脚问题？

> ID：10053573
> 
> 赞同：0
> 
> 时间：2012-04-07T10:15:06.600
> 
> 标签：css, sticky-footer

我现在把头撞到墙上大约 4 个小时，我找不到为什么页脚不会粘在这个页面的底部：

[http://www.agrampeli.com/newsite/articles.php?artid=94&msg=cform](http://www.agrampeli.com/newsite/articles.php?artid=94&msg=cform)

任何人都可以告诉我到底我做错了什么？

提前致谢

卓然

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T10:19:38.767

```
#wrapper1{
    ...
    padding-bottom: 170px;    
}
#wrapper3 {
    width: 100%;
    margin: 0 auto;
    background-color: #BC141A;
    position: fixed;
    bottom: 0;
}

#footer {
    width: 960px;
    padding: 10px 0;
    background: #8D0308;    
} 
```

# jquery - 淡入淡出时缺少抗锯齿

> ID：10053574
> 
> 赞同：0
> 
> 时间：2012-04-07T10:15:12.867
> 
> 标签：jquery

我使用 Jquery fadeIn 效果，但它在 Chrome 中效果不佳（在 IE 中也不适用）。在动画结束时它失去（获得？）它的抗锯齿属性。请参阅下面的图片。

大的文字边框会呈拱形，小的文字边框会很锐利。

![抗锯齿](../Images/7d38eb4729995c8d7bce829003bbdcfc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T10:18:05.037

这是浏览器的一个“功能”，旨在加快渲染速度。如果文本没有以完全不透明的方式绘制，则不会消除锯齿。我相信 IE9 “修复”了这一点，以在部分字母文本中包含 AA。

# android - 如何从广播接收器引用应用程序上下文

> ID：10053576
> 
> 赞同：2
> 
> 时间：2012-04-07T10:15:15.737
> 
> 标签：android

我正在使用扩展应用程序的常用技术来存储全局常量。

所以在我的活动中，我可以简单地做（在​​ oncreate() 中）：

```
W = (WcmApplication) getApplicationContext(); 
```

但是，这不适用于广播接收器：

```
The method getApplicationContext() is undefined for the type MyReceiver 
```

所以，以为我很聪明，我试着做：

```
 W = (WcmApplication) context; 
```

...但这会在运行时引发错误，说我的广播接收器不允许访问该上下文

不放弃，我试试这个：

```
W = (WcmApplication) Context.getApplicationContext(); 
```

... 没有骰子

所以我最终不得不这样做：

```
W = (WcmApplication)context.getApplicationContext() ; 
```

...而且效果很好，但是我不知道为什么。

有人可以解释为什么一个有效而不是其他有效吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-19T17:35:21.293

`Activity`继承`Context`，因此您可以直接访问`getApplicationContext()`定义的方法`Context`。`BroadcastReceiver`另一方面，它不继承 from `Context`，这就是为什么它`context`在调用处理广播时必须从外部接收的原因。

通常，`Context`您可以从任何组件（`Activity`、`Service`、`ContentProvider`或`BroadcastReceiver`）访问的直接指令是特定于该特定组件的，并定义了该组件的执行*上下文*（因此得名:-)）。另一方面，应用程序上下文为整个应用程序定义了更通用的执行*上下文。*因此，应用程序*上下文*比组件*上下文*更广泛。

还要记住，在任何时间点都可能有超过这两个*上下文（应用程序和组件）的链接。*您可以通过尝试将每个节点（从组件*context*开始）强制转换为`ContextWrapper`并且如果成功使用来部分地遍历上下文链`getBaseContext`。但是，这是一种罕见的高级场景，而且大多数情况下，您关心的链中只有两个*上下文*- 直接组件和总体应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-22T19:06:39.083

我想我有一个全面的解决方案（*最后感谢@Franci Penov 的帖子*）

这是我的自定义应用程序子类的静态方法。

```
public static MyApp get( @NonNull final Context context )
{
    if( s_instance != null )
    {
        return s_instance;
    }
    else
    {
        if( context instanceof Activity )
        {
            final Activity activity = (Activity) context;
            s_instance = (MyApp) activity.getApplication();
        }
        else if( context instanceof Service )
        {
            final Service service = (Service) context;
            s_instance = (MyApp) service.getApplication();
        }
        else if( context instanceof ContextWrapper )
        {
            final ContextWrapper contextWrapper = (ContextWrapper) context;
            s_instance = (MyApp) contextWrapper.getBaseContext().getApplicationContext();
        }
        else
        {
            s_instance = (MyApp) context.getApplicationContext();
        }

        return s_instance;
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-19T17:24:30.500

这不是应用程序上下文：

```
(WcmApplication) context; 
```

而是动作的上下文。这就是为什么您需要调用：

```
(WcmApplication)context.getApplicationContext() ; 
```

# rest - 哪个 Logback Appender 用于通过 REST 接收器端点向 splunk 发送新事件？

> ID：10053578
> 
> 赞同：2
> 
> 时间：2012-04-07T10:15:22.267
> 
> 标签：rest, logback, splunk, appender

如果我正在使用 logback 框架，如果我想使用 Splunk 的 REST 接收器端点创建新事件，我应该使用哪个 Logback appender。我想为此制作一个自定义的基本附加程序？它是套接字附加器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:36:58.547

There is no built-in appender. However following [Which Logback Appender to use to send new events to splunk via REST reciever endpoint?](http://splunk-base.splunk.com/answers/44888) ^((which BTW has a surprisingly similar layout to SO)) I found [SplunkJavaLogging](https://github.com/damiendallimore/SplunkJavaLogging) project, specifically the [`SplunkRestAppender`](https://github.com/damiendallimore/SplunkJavaLogging/blob/master/src/com/dtdsoftware/splunk/logging/logback/appender/SplunkRestAppender.java).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T05:38:19.393

这是正确的 Tomasz ，SplunkJavaLogging 有 log4j 和 logback 附加程序，还有一个 java.util 日志处理程序，供仍在使用该框架的任何人使用。

[https://github.com/damiendallimore/SplunkJavaLogging](https://github.com/damiendallimore/SplunkJavaLogging)

[http://dev.splunk.com/view/community-projects/SP-CAAAED7](http://dev.splunk.com/view/community-projects/SP-CAAAED7)

# java - 如何使用子字符串在 Java 中获取我的数据？

> ID：10053579
> 
> 赞同：-1
> 
> 时间：2012-04-07T10:15:37.640
> 
> 标签：java, substring

我的字符串是这样的：

```
<Contestants Count = "4"><Contestant Name="EBI">7</Contestant><Contestant Name="ATILIA">13</Contestant><Contestant Name="HAFIZ">10</Contestant><Contestant Name="ESTRANGED">9</Contestant></Contestants> 
```

我需要根据名字取出号码。例如，我需要知道“ATILIA”的数字是多少，结果应该是 13。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T10:20:07.863

您可能不得不以一种或另一种方式阅读 XML 和 XPath。访问该参赛者的一种简单方法是使用[jOOX](http://code.google.com/p/joox/)，这是我编写的一个库，用于在 Java 中与 XML 进行类似 jquery 的简单交互。使用 jOOX，您可以编写：

```
// import the "$() and attr()" operators in your Java class
import static org.joox.JOOX.*;

// With CSS selector syntax, just as in jquery:
String result = $(xmlstring).find("Contestant[Name='ATILIA']").text();

// With XPath
String result = $(xmlstring).xpath("//Contestant[@Name='ATILIA']").text();

// With the jOOX API
String result = $(xmlstring).find("Contestant")
                            .filter(attr("Name", "ATILIA"))
                            .text(); 
```

当然，您还有很多其他选择。另一种方法是在没有任何第三方库的情况下解析 XML，如下所示：

```
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
DocumentBuilder builder = factory.newDocumentBuilder();
Document document = builder.parse(new InputSource(new StringReader(xmlstring)));

NodeList nodes = document.getElementsByTagName("Contestant");
for (int i = 0; i < nodes.getLength(); i++) {
  Element element = (Element) nodes.item(i);

  if ("ATILIA".equals(element.getAttribute("Name"))) {
    // Found it!
    System.out.println(element.getTextContent());
  }
} 
```

我建议您*不要*将 XML 视为纯字符串，然后使用您自己的子字符串方法开始解析/读取它。这种技术有很多地方会出错！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T10:23:45.357

首先，您需要找到名称的索引...

```
int nameIndex = line.indexOf(name); 
```

然后你需要找到名字后面的小于和大于...

```
int greaterThan = line.indexOf(">",nameIndex);
int lessThan = line.indexOf("<",greaterThan); 
```

然后最后得到它们之间的子字符串......

```
String substring = line.substring(greaterThan+1,lessThan); 
```

如果您需要将值转换为数字...

```
int substringNumber = Integer.parseInt(substring); 
```

所有这一切都假设您不想使用 XML 解析器来执行它 - 这只是简单的字符串操作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T10:52:09.603

您可以使用 java 的内置 XML 类。我给你写了一个小例子；一个名为 Main 的类，带有一个 getNumber 方法，如果未找到给定的名称，该方法将引发异常。

```
import java.io.StringReader;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;

public class Main {

    public static void main(String[] args) throws Exception {
        System.out.println(
                getNumber(
                        "<Contestants Count = \"4\">" +
                        "<Contestant Name=\"EBI\">7</Contestant>" +
                        "<Contestant Name=\"ATILIA\">13</Contestant>" +
                        "<Contestant Name=\"HAFIZ\">10</Contestant>" +
                        "<Contestant Name=\"ESTRANGED\">9</Contestant>" +
            "</Contestants>", "ATILIA"));
    }

    static int getNumber(String xml, String name) throws Exception {
        int number = 0;
        boolean found = false;
        DocumentBuilderFactory documentBuilderFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder documentBuilder = documentBuilderFactory.newDocumentBuilder();
        InputSource inputSourse = new InputSource();
        inputSourse.setCharacterStream(new StringReader(xml));
        Document document = documentBuilder.parse(inputSourse);
        NodeList nodeList = document.getElementsByTagName("Contestant");
        for(int i = 0; i < nodeList.getLength(); i++) {
            Element element = (Element)nodeList.item(i);
            if("ATILIA".equals(element.getAttribute("Name"))) {
                number = Integer.parseInt(element.getTextContent());
                found = true;
                break;
            }
        }
        if(!found)
            throw new Exception("Name not found.");
        return number;
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T10:41:09.687

只需解析您的 XML 并将您的值放入以参赛者元素的名称属性为键的 HashMap 中

解析 XML [Xom的建议](http://www.xom.nu/)

# android - Android Textview 内容大小

> ID：10053584
> 
> 赞同：2
> 
> 时间：2012-04-07T10:16:06.803
> 
> 标签：android, textview, size

是否可以有一个包含两种大小文本的 TextView 对象？

我们可以使用单个 TextView 对象使用`textViewObj.setText(Html.fromHtml());`方法来更改文本内容的颜色。但是是否可以在单个 TextView 对象中包含两种大小的文本，如下所示

![像这样](../Images/973f9c3c1153ee98616d4993139139f3.png)。

我得到的如下所示。我尝试了很多，但文本大小相同。

![像这样](../Images/5473839f47a710f8e80c9a855d16d009.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T10:52:36.070

您可以使用 Spannable：

```
Spannable span = new SpannableString("bigsmall");
span.setSpan(new RelativeSizeSpan(3f), 0, 3, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
tv.setText(span); 
```

你可以做同样的颜色

```
span.setSpan(new ForegroundColorSpan(Color.GRAY), 0, 3, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T10:53:35.110

我已经检查过Editext。然后我知道`Html.fromHtml()`不支持`<font>`标签。我使用这个代码

```
EditText text = (EditText) findViewById(R.id.title);
 text.setText(Html
            .fromHtml("<html><h3>hello</h3><h1>hello</h1>"
                    + "<p><font size=\"5\">Font</font><font 
                                        size=\"10\">size</font>"
                    + "</p></html>")); 
```

它显示不同大小的文本 hello 和 hello 但在两个不同的行中。但`<font>`标签值不会改变任何东西

![在此处输入图像描述](../Images/d3c92d46892094da32548c2b7c21940b.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T10:54:47.043

据我所知，对于 TextView，您可以使用 setsize() 方法更改整个文本大小。无论如何，我会建议你另一种方法：在线性布局中使用两个 Textsize，一个接一个，在水平模式下。通过这种方式，您可以更改每个 TextView 的颜色/大小/等。

编辑：由于您使用的是 html 模式，另一种方法如下（可能会随着您的 html 样式而变化）：

```
myTextView.setText(Html.fromHtml("<b>" + mNumbers + "</b>" +  "<small>" + mSpeed + "</small>" )); 
```

# lync-2010 - 在 Lync 2010 中终止呼叫

> ID：10053585
> 
> 赞同：0
> 
> 时间：2012-04-07T10:16:09.473
> 
> 标签：lync-2010

现在我在音频视频模式中使用 lync 2010 SDK，所以，

我想确定呼叫是由我连接到他的用户终止还是因为他没有回答

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:09:18.710

如果我正确理解您的要求，您想知道对话是如何终止的。您可以观察到每个参与者的 AV 模态的状态变化。如果您记录状态如何变化，您将得到答案。例如，您可以查看呼叫是否已接通。

# android - 如何在 Android 中发布数据？

> ID：10053586
> 
> 赞同：0
> 
> 时间：2012-04-07T10:16:16.767
> 
> 标签：android, http, postdata

我使用 http 找到了 PostData[这个](https://stackoverflow.com/questions/2938502/sending-post-data-in-android)主题。但它不起作用。

怎么了？

我也在`Android.permission.INTERNET`.`manifest`

```
 public void postData() {
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http:/mysite.com/postTest.php");
    try {
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
        nameValuePairs.add(new BasicNameValuePair("pw", "12456"));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);
        tv.setText(response.toString());
    } catch (ClientProtocolException e) {
        //
    } catch (IOException e) {
        //
    }
} 
```

**编辑**

我的应用程序将被此消息终止： `Unfortunately PostDataProject has stopped.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T10:24:02.510

尝试这个：

```
HttpResponse response = httpclient.execute(httppost);
HttpEntity entity = responce.getEntity();
// convert stream to String 
BufferedReader buf = new BufferedReader(new InputStreamReader(entity.getContent()));
StringBuilder sb1 = new StringBuilder();
String line = null;
while ((line = buf.readLine()) != null) {
sb1.append(line);
}
tv.setText(sb1.toString()); 
```

如果数据仅用于 textvew 或较小，您可以直接设置为 textview：

```
tv.setText(EntityUtils.toString(response.getEntity())); 
```

并使用这个：

```
HttpPost httppost = new HttpPost("http://mysite.com/postTest.php"); 
```

代替

```
HttpPost httppost = new HttpPost("http:/mysite.com/postTest.php"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T10:20:53.883

尝试通过`EntityUtils` [http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/util/EntityUtils.html获得响应](http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/util/EntityUtils.html)

```
 tv.setText(EntityUtils.toString(response.getEntity())); 
```

# php - 在php中定义一个词

> ID：10053590
> 
> 赞同：0
> 
> 时间：2012-04-07T10:16:31.580
> 
> 标签：php, html, word

我是php的新手，很抱歉我的简单问题。需要逐步了解。

示例：index.php

```
<html>

<header>
-including a file (/lang.php for example)
</header>

<body>

<div>
<a href="aboutus.php"> - word1 - </a> | <a href="contact.php"> - word2 - </a>
</div>

</body>
</html> 
```

示例：lang.php

```
word1 = ABOUT US
word2 = CONTACT 
```

如何以最简单的方式完成这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T10:21:08.853

lang.php 将类似于：

```
<?php
$word1 = "About us";
$word2 = "Contact";
?> 
```

在您的其他文件中，您将拥有

```
<?php
include "lang.php";
?>

<div>
<a href="aboutus.php"> - <?php echo $word1; ?> - </a> | 
   <a href="contact.php"> - <?php echo $word2; ?> - </a>
</div> 
```

记住：

1.  PHP 中的变量名总是以`$`
2.  PHP 代码需要在`<?php`and`?>`标记之间（或者`<?`如果`?>`您的服务器配置为接受短标记）
3.  HTML中没有`<header>`标签。也许你在想`<head>`。无论如何，`include`声明不一定需要在那里

# java - Java - 观察模式 - 观察一个类，但可以访问另一个类中观察到的内容

> ID：10053595
> 
> 赞同：0
> 
> 时间：2012-04-07T10:17:11.980
> 
> 标签：java

我正在创建一个空中交通管制系统。我有一个名为 plane 的类，它可以观察到任何变化，即随机生成飞机时名称会发生​​变化。问题是机场需要访问该名称以将其存储到一个数组列表中，如果我可以让它工作的话，可能是一个队列。无论如何，这是机场类的代码：

```
 /*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

package airtrafficcontrolv3;
import java.util.*;
import java.util.logging.Level;
import java.util.logging.Logger;

/**
 *
 * @author
 */
public class Airport
{
        Subject s = new SubjectImpl();

    Plane point = new Plane();
    Queue <String> waiting = new LinkedList<String>();

    public Airport()
    {
        //String name =
        s.getState();
        System.out.println(s);

        while (!waiting.isEmpty())
        {
            System.out.println("Waiting to take off: "+waiting);
            try
            {
                System.out.println("Preparing to taxi: "+waiting.remove());
                Thread.sleep(5000);
            }
            catch (InterruptedException ex)
            {
                Logger.getLogger(Airport.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    }

} 
```

我不确定我是否必须访问正在观察的主题，因为在主题中我有一个 getstate 方法，这是当前所指向的，但是它以随机数字和字母生成：

```
airtrafficcontrolv3.SubjectImpl@5a199939 
```

这是我在我的学科课上的：

```
 package airtrafficcontrolv3;

/*
 * @author S0082708
 */

import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

interface Subject
{

    public void addObserver(Observer o);

    public void removeObserver(Observer o);

    public String getState();

    public void setState(String state);
}

/*
 * Creates an observer that will watch for any changes
 */

interface Observer
{
    public void update(Subject o);
}

/*
 * Class implements the observer
 * Observer is what is doing the watching
 * The string is set to blank waiting ready for any updates that will occur
 * Anything in getState is then passed to state
 */
class ObserverImpl implements Observer
{
    private String state = "";

    public void update(Subject o)
    {
        state = o.getState();

        //Need to add text to the label
       // AirTrafficControlv3View.Incoming.add(state);

    }
}

/*
 * Subject is what is being watched
 * The array is then created to store the information ready to add further information
 * Or ready to delete
 * State is set to blank ready for whatever information is being passed
 */

class SubjectImpl implements Subject
{

    private List observers = new ArrayList();
    private String state = "";

    /*
     * Returns whatever is being passed to state
     */

    public String getState()
    {
        //System.out.println(state);
        return state;
    }

    /*
     * Sets the state to current state and then notifies the observer of the changes
     * Made to the state ready to update
     */
    public void setState(String state)
    {
        this.state = state;
        notifyObservers();
    }

    /*
     * Adds the observer along with the name, so several observers can be implemented
     */
    public void addObserver(Observer o)
    {
        observers.add(o);
    }

    /*
     * Removes the observer once it has been used
     */

    public void removeObserver(Observer o)
    {
        observers.remove(o);
    }

    /*
     * The iterator allows the ability to loop through the array
     * While the iterator has a next then it allows the ability to take in more
     * Changes to be observed. It is then updated with the current information
     */

    public void notifyObservers()
    {
        Iterator i = observers.iterator();
        while (i.hasNext())
        {
            Observer o = (Observer) i.next();
            o.update(this);
        }      
    }
} 
```

谁能指出我正确的方向，即如何从 get state 中获取字符串，该字符串以 KLM 的形式出现，但它不会在机场类中出现。

任何建议都将受到欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T10:32:23.507

您需要`toString()`在从您获得的随机数返回的对象的类中实现 a ，这是在呈现实例标识而不是内容的类中`getState()`的默认实现。`toString()``Object`

# javascript - 将 JS 滚动条与 DIV 中的 CSS 溢出属性集成

> ID：10053596
> 
> 赞同：0
> 
> 时间：2012-04-07T10:17:20.790
> 
> 标签：javascript, jquery, scroll, widget, styles

我正在尝试为我的“最近的推文”小部件使用 Facebook-ticker 样式的滚动条。[这是网站。](http://thinkrasta.com/home)

我找到了所需的脚本。它被称为[slimScroll](http://rocha.la/jQuery-slimScroll)。但是，即使下载了示例文件，我也无法将其集成到站点中。代码，供参考：

推文-widget.php：pastebin.com/bqefjDV4

jtwt.js：pastebin.com/ukkSWkhM

它说我必须加载 jQuery 1.6.8 和 jQuery UI，但加载其中一个文件会导致主页上基于 jQuery 的特色图像出现问题。你能告诉我如何在最近的推文 div 中加载这些文件而不引起冲突吗？

感谢您的任何帮助和建议！

PS 我知道，我可以使用 CSS 溢出：自动；属性来添加一个普通的滚动条，但我需要 facebook-ticker 样式的滚动条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T14:44:04.967

所以问题的症结在于，slimScroll 与您网站运行的 jquery 版本不兼容。

尝试向后移植 slimScroll.js 以使用您网站的 jQuery 版本。或者转发您的站点以使用最新的 jquery。

# objective-c - AFHTTPClient 多文件下载

> ID：10053598
> 
> 赞同：0
> 
> 时间：2012-04-07T10:17:43.420
> 
> 标签：objective-c, ios, afnetworking

我正在尝试使用 AFNetworking 类下载多个文件。我对此完全是新手，我试图弄清楚 AFHTTPClient 的工作原理，我已经用操作初始化了 AFHTTPClient 类的对象，但我就是不知道如何开始处理中的操作队列。我也尝试查看文档，但找不到任何东西。

这是我正在使用的代码：

```
-(void)downloadFiles:(NSArray *)files {
    if ([files count] > 0) {
        NSMutableArray *operationArray = [[NSMutableArray alloc] init];
        for (int i = 0; i < [files count]; i++) {
            ResourceFile *resourceFile = (ResourceFile*)[files objectAtIndex:i];

                NSString *urlString = [NSString stringWithFormat:@"%@views/ph_session?args=0", BASE_URL];
                NSURL *fileDownloadUrl = [[NSURL alloc] initWithString:urlString];
                NSMutableURLRequest *fileDownloadRequest = [[NSMutableURLRequest alloc] initWithURL:fileDownloadUrl];
                [fileDownloadRequest setValue:[SessionManager getSessionCookieForLogin] forHTTPHeaderField:@"Cookie"];
                void (^successBlock)(NSURLRequest *, NSHTTPURLResponse *, id) = ^(NSURLRequest *request, 
                                                                                  NSHTTPURLResponse *response, 
                                                                                  id JSON) {
                    NSLog(@"Success callback for file %@", resourceFile.filename);
                };
                void (^failureBlock)(NSURLRequest*, NSHTTPURLResponse*, NSError*, id) = ^(NSURLRequest *request, 
                                                                                          NSHTTPURLResponse *response, 
                                                                                          NSError *err_, 
                                                                                          id JSON) {
                    NSLog(@"Failure callback for file %@", resourceFile.filename);
                };
                AFJSONRequestOperation *operation = [AFJSONRequestOperation 
                                                     JSONRequestOperationWithRequest:fileDownloadRequest 
                                                     success:successBlock 
                                                     failure:failureBlock];
                [operationArray addObject:operation];
        }
        if ([operationArray count] > 0) {
            AFHTTPClient *requestHandler = [[AFHTTPClient alloc] init];
            void (^progressBlock)(NSUInteger numberOfCompletedOperations, NSUInteger totalNumberOfOperations) = ^(NSUInteger numberOfCompletedOperations, NSUInteger totalNumberOfOperations) {
                NSLog(@"%d proccesses completed out of %d", numberOfCompletedOperations, totalNumberOfOperations);
            };
            void (^completionBlock)(NSArray *operations) = ^(NSArray *operations) {
                NSLog(@"All operations completed");
            };

            [requestHandler enqueueBatchOfHTTPRequestOperations:operationArray 
                                                  progressBlock:progressBlock 
                                                completionBlock:completionBlock];
        }
    } else {
        NSLog(@"No file to download");
    }
} 
```

这是 ResourceFile 类，其数组被传递给此方法：

```
#import <Foundation/Foundation.h>

@interface ResourceFile : NSObject {
    NSInteger fid;
    NSString *filemime;
    NSString *filename;
    NSString *filesize;
    NSString *uri;
    NSString *timestamp;
}

@property NSInteger fid;
@property (retain, nonatomic) NSString *filemime;
@property (retain, nonatomic) NSString *filename;
@property (retain, nonatomic) NSString *filesize;
@property (retain, nonatomic) NSString *uri;
@property (retain, nonatomic) NSString *timestamp;

-(id)initWithData:(id)data;

@end 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T12:37:13.697

我发现了问题，我试图使用 AFHTTPClient enqueueBatchOfHTTPRequestOperations 将 AFJSONRequestOperation 排入队列，我应该将 AFHTTPOperations 排入队列......

# iphone - 向 UINavigationController 添加标题 + 按钮

> ID：10053600
> 
> 赞同：1
> 
> 时间：2012-04-07T10:18:05.150
> 
> 标签：iphone, uinavigationcontroller

我要疯了才能解决这个问题。

我在我的`AppDelegate.m` Basic a navigation controller + tab bar 中有以下代码，链接到 2 tableviewcontroller

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

    ElencoSpese *elenco=[[ElencoSpese alloc] init];
    elenco.tabBarItem.title=@"Prova 123";

    ElencoSpese *elenco2=[[ElencoSpese alloc] init];
    elenco2.tabBarItem.title=@"Prova 222";

    UITabBarController *tabMenu = [[UITabBarController alloc] init];
    tabMenu.viewControllers=[NSArray arrayWithObjects:elenco, elenco2, nil];

    UINavigationController *navig=[[UINavigationController alloc] initWithRootViewController:tabMenu];
    self.window.rootViewController=navig;

    [self.window makeKeyAndVisible];

    return YES;
} 
```

`ElencoSpese`是一个`TableViewController`，它工作正常。我想在`"title"`此窗口中添加“+”和`"Edit"`...顶部的按钮`NavigationBar`。

我试图在 tableviewcontroller 的 loadview 方法中取消注释以下内容：没有结果

```
// Uncomment the following line to display an Edit button in the navigation bar for this view controller.
self.navigationItem.rightBarButtonItem = self.editButtonItem; 
```

我也尝试在 appdelegate 中设置标题....什么都没有...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T08:41:04.150

像这样..

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

    ElencoSpese *elenco=[[ElencoSpese alloc] init];
    elenco.tabBarItem.title=@"Prova 123";

    ElencoSpese *elenco2=[[ElencoSpese alloc] init];
    elenco2.tabBarItem.title=@"Prova 222";
    UINavigationController *navig=[[UINavigationController alloc]     initWithRootViewController:elenco];
UINavigationController *navig1 =[[UINavigationController alloc] initWithRootViewController:elenco2];

    UITabBarController *tabMenu = [[UITabBarController alloc] init];
    tabMenu.viewControllers=[NSArray arrayWithObjects:navig, navig1, nil];

    self.window.rootViewController=tabMenu;

    [self.window makeKeyAndVisible];

    return YES;
} 
```

然后每个**TableViewController -viewDidLoad**像这样添加

```
-(void)viewDidLoad
{
   [super viewDidLoad];
   self.title = @"Calculator"; 
    UIBarButtonItem *item = [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(yourSelectorMethod)];

    UIBarButtonItem *item1 = [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemEdit target:self action:@selector(yourSelectorMethod1)];

    self.navigationItem.leftBarButtonItem = item;
    self.navigationItem.rightBarButtonItem = item1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T11:13:03.307

the title for the window can be given as below

after the line in your code

```
self.window.rootViewController=navig; 
```

just add

```
self.tabbarController.navigationItem.title = @"YOUR TITLE"; 
```

this will help you to give title

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T11:07:37.543

视图控制器嵌入在标签栏控制器中，该控制器被推送到导航控制器中。所以你应该像这样访问navigationitem：

```
self.tabBarController.navigationItem.rightBarButtonItem = self.editButtonItem; 
```

# c++ - 复制构造函数是如何工作的？

> ID：10053602
> 
> 赞同：0
> 
> 时间：2012-04-07T10:18:14.300
> 
> 标签：c++, constructor, copy

复制构造函数如何在 C++ 中工作

错误 1 ​​错误 C2064：术语不计算为采用 1 个参数的函数 c:\users\thuan\dropbox\homework\css 342\lab2\lab2\lab2\lab2.cpp 26

```
#include "intset.h"

int main() {
IntSet object1;
IntSet object2(9);  

object1(object2); //error here

   return 0;
}
//constructor
IntSet::IntSet(int a, int b, int c, int d, int e)
{
numOfArray++;
int tempArray[] = {a, b, c, d, e};
size = determineHighest(tempArray) + 1; 

arrayPtr = new bool[size]();

for (int i = 0; i < MAXINITIALSIZE; i++)
{
    if (tempArray[i] == -1)
        continue;
    arrayPtr[tempArray[i]]= true;
}   
}
//copy constructor
IntSet::IntSet(const IntSet &intsetObject)
{
numOfArray++;
size = intsetObject.size;

arrayPtr = new bool[size];

for (int i = 0; i < size; i++)
{
    if (intsetObject.arrayPtr[i])
        arrayPtr[i] = intsetObject.arrayPtr[i];
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T10:27:32.193

声明后

```
InSet object1; 
```

名为`object1`存在的对象（通过默认构造函数创建）。复制构造函数（就像常规构造函数一样）创建一个新对象。由于对象已经存在，因此表达式`object1(object2);`不能是复制构造函数调用。为此，您需要像这样声明变量：

```
InSet object2(9);
InSet object1(object2); 
```

如果你想复制`object2`到已经存在的`object1`，你需要一个*赋值运算符*( `InSet& InSet::operator=(const InSet& other);`)

*注意：*编译器错误告诉您该表达式`(object1(object2);`是一个函数调用表达式：您需要定义*函数调用运算符*( `void InSet::operator()(const InSet& obj)`) 以使其编译（返回类型可以是其他任何类型，而不仅仅是`void`，这取决于您的需要。）如果你定义了函数调用操作符，你就把你的对象变成了所谓的*仿函数*

编译器错误（*术语不评估为采用 1 个参数的函数*）是正确的，但会误导 wrt。解决您的问题（但编译器无法知道您想要使用复制构造函数，而不是函数调用）

*注意：*在许多编译器上，表达式

```
InSet object2(9);
InSet object1 = object2; 
```

如果可用，还会导致对复制构造函数的调用（而不是默认构造对象，然后对其调用赋值运算符）——这是一种可能的编译器优化。

注意：如果您拥有的唯一（常规）构造函数是您列出的那个，则声明`InSet object1;`和`InSet object2(9);`无效，除非您在类定义（声明构造函数的位置）中具有（常规）构造函数参数的默认值，而您没有包括。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T10:22:11.977

您将对象定义为变量，然后像函数一样使用它。您正在尝试构建已经构建的对象

尝试

```
IntSet object2(9);
IntSet object1(object2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T10:23:12.400

当您这样做时，您已经`object1`使用默认构造函数进行了构造

```
IntSet object1; 
```

要复制构造，您需要将其更改为

```
IntSet object1( object2 ); 
```

在定义*后*的某个时候`object2`（您可能想要交换两个变量的名称）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T10:35:33.747

它可能会帮助您理解复制构造函数

复制构造函数用于声明和集成来自另一个对象的对象。每当我们有类似的语句`demo d2-d1`（假设 demo 是类名，d1 是演示类的已声明对象）时，它们都会调用类中定义的复制构造函数

对于类演示复制构造函数写为

```
demo(demo & d)
 {
  //copy constructor code;
 } 
```

例子：

```
#include<iostream.h>
class demo
{
 int data;
public:
   demo(int x)
    {
      data=x;
    }

    demo(demo & d)
     {
       data=d.data;
        cout<<"copy constructor is called";
      }
    void show()
      {
        cout<<"data ="<<data<<endl;
       }
};

void main()
{ 
 demo d1(200);
 demo d2=d1;   //copy constructor is called and object passed as a reference not value 
 d2.show;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-07T10:25:09.837

由于复制构造函数的参数是一个常量对象，并且在调用它时在代码中传递的是不允许的非常量对象。

# mysql - apache mysql - 3306 上的“数据包乱序”

> ID：10053613
> 
> 赞同：31
> 
> 时间：2012-04-07T10:20:05.317
> 
> 标签：mysql, apache, mysql-error-1064

我刚刚重新安装了 Apache 服务器 2.2。一切正常。当我转到本地主机时，我得到：“它有效！”

我刚刚安装了 mySQL5.5，当我转到 localhost:3306 时，我得到了胡言乱语：

> J��� 5.5.22�'���4[LM{D~p�ÿ÷!�€������������6[I=4/+,9z{|�mysql_native_password�! ��ÿ„#08S01数据包乱序

我在互联网上看到很多用户有类似问题的帖子，但我无法找到解决方案。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-07T10:28:53.313

mysql 服务不是 Web 界面 - 您无法使用浏览器进行连接。您将需要安装某种 mysql 客户端。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-14T09:57:48.117

如果您尝试开始`phpmyadmin`，请这样做：

```
localhost/phpmyadmin 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T13:37:03.243

我是一个jsp初学者。我和你有同样的问题。估计是端口问题。

对我来说，我将 Apache 服务器连接器的端口设置为 9090。后来，当我安装 mysql 时，mysql 的端口是 3306 作为其默认端口。

在我的 jsp 文件中，我加载了 jdbc 驱动程序，例如“jdbc:mysql://localhost:9090/dbname”，然后在我的网络浏览器上调用“http://localhost:9090/my.jsp”。那时我和你有同样的问题。

我修复了我的 jsp 文件中的端口部分，例如“jdbc:mysql://localhost:3306/dbname”，我可以得到它。

我认为您需要检查 Apache 服务器的端口。您可以查看 Apache 目录中的 \conf\server.xml 文件。该部分以 server.xml 文件中的“连接器端口 = 8080 ....”开头。如果是这样，您需要在浏览器上输入 'http://localhost:8080...。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-27T09:22:26.750

尝试只写[http://localhost/](http://localhost/)没有端口，它会工作，或者去你的 phpmyadmin 并点击我的网站，它会立即带你到你的本地主机

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-27T11:27:25.700

我遇到了完全相同的问题，到目前为止我有： 1）手动更改排序规则（它似乎默认为 cp850）

2) 更改了 ini/cnf 文件（位于 services.msc -> MySQL 下）

3)将max_packet_size改为2G

3）重新启动服务器。

作为开始，请从 MySQL 'SHOW VARIABLES WHERE Variable_name LIKE 'character_set_%' OR Variable_name LIKE 'collat​​ion%';' 运行此脚本

它应该调出你的排序规则表，它们都应该是 utf8 [可能的原因](https://i.stack.imgur.com/l0bDd.png)

# adobe - 关于如何在 adobe cq 5.4 中开始开发移动网站的任何建议

> ID：10053617
> 
> 赞同：0
> 
> 时间：2012-04-07T10:20:27.140
> 
> 标签：adobe, aem, crx, day-cq

任何人都可以提供有关在 cq 日从哪里开始开发移动网站的任何指示吗？如果有教程的网站也请分享？任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T20:24:00.960

Adobe 文档可能是一个很好的起点：[http ://dev.day.com/docs/en/cq/5-4/developing/mobile.html](http://dev.day.com/docs/en/cq/5-4/developing/mobile.html)

# ruby - 随机 gsub 字符串 n 次

> ID：10053619
> 
> 赞同：2
> 
> 时间：2012-04-07T10:20:41.090
> 
> 标签：ruby, gsub

如何在 Ruby 中随机替换子字符串 n 次？

例如，我有一个文本：

> foo foo foo foo 酒吧 foo 酒吧 foo 酒吧

我想在上面字符串的任何部分用*boo替换两个随机**foo 。*

 *这些是可能的结果：

1.  foo foo boo foo bar bar foo bar boo bar
2.  嘘 foo foo foo 酒吧 嘘 酒吧 foo 酒吧
3.  foo boo foo boo bar bar foo bar foo bar
4.  ETC..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T11:12:55.333

```
str = "foo foo foo foo bar bar foo bar foo bar"
num = 2
# get an array of all foo's; replace 2 foos with boo; shuffle the array.
ar = (["boo"]*num + str.scan(/foo/)[num..-1]).shuffle
# replace each foo with the next element of the array.
str.gsub(/foo/){ ar.pop } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T15:10:40.487

最短的是：

```
str.gsub(/foo/){|v| rand(2) == 0 ? 'boo' : v} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T10:59:31.993

您可以找到要替换为的子字符串的所有匹配项`string.index("substring")`。您将获得子字符串第一个字符的索引。

然后您可以使用此索引之后的子字符串来查找要替换的字符串的下一个匹配项，依此类推。

存储要替换的子字符串开始的所有索引，并使用随机数来定义应替换的索引。*

# ruby - 如何从 Ruby 中的 csv 文件中读取 Doubles

> ID：10053620
> 
> 赞同：0
> 
> 时间：2012-04-07T10:20:47.200
> 
> 标签：ruby, arrays, csv, double

我的问题是，我无法从 csv 文件中读取双精度，而只能读取整数。因此，当我尝试使用增长数组进行计算时，会出现错误“-infinity”和“NaN”：

```
 require 'csv'
    filename = 'file.csv'

    csv_data = CSV.read(filename, :col_sep => ";")
    csv_data.shift
    price1, price2 = csv_data.transpose.map { |a| a.map(&:to_i)}

    #calulate yields
    yields1 = Array.new
    yields2 = Array.new

    price1.each_cons(2) { |c| 
    yields1.push(Math.log(c[1]/c[0]))
     }

    price2.each_cons(2) { |c| 
    yields2.push(Math.log(c[1]/c[0]))
     }

    # Statistics

    module Enumerable

     def mean
      mean = self.reduce(:+)/self.length.to_f
      return mean
     end
    end

    puts "mean yields1 = " + yields1.mean.to_s 
```

我的两个问题：

1.  如何从 CSV 文件中读取 Doubles？
2.  错误的错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T10:42:43.803

改变

```
price1, price2 = csv_data.transpose.map { |a| a.map(&:to_i)} 
```

至

```
price1, price2 = csv_data.transpose.map { |a| a.map(&:to_f)} 
```

# wpf - WPF - 数据网格中的网格线（也通过标题）

> ID：10053623
> 
> 赞同：0
> 
> 时间：2012-04-07T10:21:01.497
> 
> 标签：wpf, datagrid, gridlines

我需要在数据网格中显示网格线，也是一个传递网格。

我不能这样做，因为默认情况下，网格线只通过数据（不是一直到网格底部）。

我能想到的一种方法是有一个样式数据网格标题并将边框放在数据模板中。但手动执行此操作时，可能存在网格线和边框对齐的问题。

我如何优雅地实现同样的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T23:51:38.860

查看[Stack Overflow 问题*Vertical gridlines in a ListView*](https://stackoverflow.com/questions/10045966/vertical-gridlines-in-a-listview/10047450#10047450)的答案。

我在那篇文章中测试了这种方法，它将通过在数据之外绘制网格线来解决网格线问题。但是，在将新模板应用于

```
<ListView.ItemTemplate> 
```

你***会***失去标题。

# c++ - 并行前缀和 - 最快的实现

> ID：10053629
> 
> 赞同：12
> 
> 时间：2012-04-07T10:21:21.677
> 
> 标签：c++, algorithm

我想使用 C++ 实现并行前缀和算法。我的程序应该接受输入数组`x[1....N]`，并且应该在数组中显示输出`y[N]`。（注意 N 的最大值为 1000。）

到目前为止，我浏览了许多研究论文，甚至是维基百科中的算法。但我的程序还应该显示输出、步骤以及每个步骤的操作/指令。

我想要最快的实现，就像我想要最小化操作数量和步骤一样。

例如：：

```
x = {1, 2, 3,  4,   5,   6,   7,  8 } - Input
y = ( 1, 3, 6, 10, 15, 21, 28, 36) - Output 
```

但是除了将 y 数组显示为输出之外，我的程序还应该显示每个步骤的操作。我也参考了这个线程[计算前缀总和](https://stackoverflow.com/questions/4009596/calculate-prefix-sum)，但可以从中得到很多帮助。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-13T14:51:08.317

这个问题的答案在这里：[Parallel Prefix Sum (Scan) with CUDA](https://developer.nvidia.com/gpugems/GPUGems3/gpugems3_ch39.html)和这里：[Prefix Sums and their Applications](https://www.cs.cmu.edu/~guyb/papers/Ble93.pdf)。NVidia 文章提供了使用 CUDA GPU 的最佳实现，卡内基梅隆大学的 PDF 论文解释了该算法。我还使用 MPI 实现了 O(n/p) 前缀和，您可以在此处找到：[在我的 github 存储库](https://github.com/marcel-valdez/parallel/tree/master/prefix_sum)中。

这是通用算法的伪代码（与平台无关）：

示例 3\. 工作效率高的和扫描算法的上扫（减少）阶段（Blelloch 1990 之后）

```
 for d = 0 to log2(n) – 1 do 
      for all k = 0 to n – 1 by 2^(d+1) in parallel do 
           x[k +  2^(d+1) – 1] = x[k +  2^d  – 1] + x[k +  2^(d+1) – 1] 
```

示例 4\. 工作效率高的并行和扫描算法的下扫描阶段（Blelloch 1990 之后）

```
 x[n – 1] = 0
 for d = log2(n) – 1 down to 0 do 
       for all k = 0 to n – 1 by 2^(d+1) in parallel do 
            t = x[k +  2^d  – 1]
            x[k +  2^d  – 1] = x[k +  2^(d+1) – 1]
            x[k +  2^(d+1) – 1] = t +  x[k +  2^(d+1) – 1] 
```

其中**x**是输入数据，**n**是输入的大小，**d**是并行度（CPU 数量）。这是一个**共享内存**计算模型，如果它使用**分布式内存**，您需要向该代码添加通信步骤，就像我在提供的 Github 示例中所做的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-15T14:31:49.050

我只实现了数组中所有元素的总和（Blelloch 的向上扫描减少部分），而不是在 java/opencl 中使用 Aparapi（ [https://code.google.com/p/aparapi/ ）的完整前缀总和。](https://code.google.com/p/aparapi/)它可在[https://github.com/klonikar/trial-aparapi/blob/master/src/trial/aparapi/Reducer.java](https://github.com/klonikar/trial-aparapi/blob/master/src/trial/aparapi/Reducer.java)获得，它是针对一般块大小（在代码中称为 localBatchSize）而不是 2 编写的。我发现8 块大小最适合我的 GPU。

虽然实现有效（求和计算是正确的），但它的性能比顺序求和差得多。在我的**core-i7（8 核）CPU**上，8388608（8MB）个数字的顺序求和大约需要 12 毫秒，GPU（**具有 384 个内核的 NVidia Quadro K2000M**）上的并行执行大约需要 100 毫秒。我什至已经优化为仅在计算后传输最终总和，而不是整个数组。如果没有这种优化，它会多花 20 毫秒。该实现似乎是根据@marcel-valdez-orozco 回答中描述的算法。

* * *

## 回答 #3

> 赞同：-36
> 
> 时间：2012-04-07T12:21:23.493

以下代码将完成这项工作

```
void prfxSum()
{
    int *x=0;
    int *y=0;
    int sum=0;
    int num=0;
    int i=0;

    cout << "Enter the no. of elements in input array : ";
    cin >> num;

    x = new int[num];
    y = new int[num];

    while(i < num)
    {
        cout << "Enter element " << i+1 << " : ";
        cin >> x[i++];
    }

    cout << "Output array :- " << endl;
    i = 0;
    while(i < num)
    {
        sum += x[i];
        y[i] = sum;
        cout << y[i++] << ", ";
    }

    delete [] x;
    delete [] y;
} 
```

以下是执行时的输出

```
Enter the no. of elements in input array : 8
Enter element 1 : 1
Enter element 2 : 2
Enter element 3 : 3
Enter element 4 : 4
Enter element 5 : 5
Enter element 6 : 6
Enter element 7 : 7
Enter element 8 : 8
Output array :- 
1, 3, 6, 10, 15, 21, 28, 36 
```

您可以通过从文件中提供它来避免用户输入数组 x[] 的 1000 个元素。

# php - 按标签检索相关帖子

> ID：10053630
> 
> 赞同：1
> 
> 时间：2012-04-07T10:21:32.697
> 
> 标签：php, mysql, sql

我有一个`posts`这样结构的表：

```
id  |  title  |  content  |  tags 
```

和一张`tags`桌子

```
id  |  name  |  description 
```

`posts`我以这种方式将我的标签放在表格中：`3,2,5,8`数字是`tags`表格的相应行号。现在，我可以通过标签在我的帖子中选择相关帖子的好方法吗？

```
SELECT * FROM posts WHERE tags ? LIMIT 10 
```

我逻辑很差。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T10:30:44.347

这就是**数据库规范化**的用武之地。在单个列中存储多个标签 ID 不是一个好主意。您可能应该创建一个新表`post_tags`，其结构`post_id | tag_id`将多个标签链接到单个帖子。

然后，您可以执行以下查询：

```
SELECT * FROM posts
INNER JOIN post_tags ON post_tags.post_id = posts.id
WHERE post_tags.tag_id IN(id1,id2,etc.) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T10:29:23.923

你最好改变你的数据库设计。为帖子和标签的关系创建一个新表。

```
create table post_tags (
  post_id int,
  tag_id int
) 
```

然后您可以使用 join 来选择您的数据，例如：

```
SELECT 
    p.* 
FROM 
    posts p 
LEFT JOIN 
    post_tags pt ON p.id = pt.post_id 
WHERE 
    pt.tag_id IN (?,?,?) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T10:29:01.410

```
SELECT * FROM posts WHERE tags IN ( YOUR_COMMA_SEPRATED_TAG_IDS ); 
```

`YOUR_COMMA_SEPRATED_TAG_IDS`可以是：- 1 OR 1,2,3 或任何其他...

# delphi - delphi 应用程序作为服务运行时的短日期格式错误

> ID：10053634
> 
> 赞同：1
> 
> 时间：2012-04-07T10:22:04.937
> 
> 标签：delphi, windows-7

我们有一个 delphi 应用程序，它也可以作为服务运行。在 Windows 7 机器上将我们的应用程序作为服务运行时，我们遇到了短日期格式的问题。Delphi/Win 7 返回错误的短日期格式。无论我们选择何种语言环境，它总是返回“DD-MM-YYYY”格式。仅当我们将其作为服务运行并在 win 7 上运行时才会发生这种情况！当应用程序不作为服务运行时，我们没有问题！我们尝试了两次更改和保存格式的解决方法，但徒劳无功这里有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T10:27:37.487

您的服务将获取运行它的用户帐户的区域设置。我的猜测是您将服务作为 LOCALSYSTEM 运行。如果您将服务配置为作为交互式用户运行，那么您将获得所需的区域设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T16:55:59.767

如果您的服务需要某种日期格式，请在服务创建事件上使用 ShortDateFormat 全局变量设置格式。当您安装 Windows 7 时，您选择了国家和默认系统格式。安装后，您可以更改用户格式，但不能更改系统格式。也许通过一些注册表黑客你可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T17:20:49.817

您永远不应依赖用户区域设置进行数据处理。

如果必须使用固定格式处理数据，请创建一个显式实例 `TFormatSettings`并使用将 a`TFormatSettings`作为第二个参数的 SysUtils 过程/函数。

出于显示目的，情况恰恰相反，用户希望应用程序使用控制面板中的区域设置。

# android - WIFI Direct 和 3G 数据会话可以同时工作吗？

> ID：10053643
> 
> 赞同：1
> 
> 时间：2012-04-07T10:23:27.097
> 
> 标签：android, wifi, android-wifi, wifimanager, wifi-direct

3G Data Session 和 WIFI Direct 可以同时工作吗？如果是这样，那么两个IP地址存在，会不会造成混淆？一个例子：

A使用3G下载视频文件，现在进度50%。现在A选择一张图片，想用WIFIDirect分享给B，这样可以不中断视频文件下载成功吗？？说WIFI连接正常，那么A有2个IP地址，在图片分享中，使用哪个IP地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:55:52.097

我在我的 Galaxy Nexus 上运行我自己的 WiFi Direct 应用程序，而我的 3G 是开启的，到目前为止我还没有遇到任何问题。这肯定是因为 WiFi Direct 应用程序正在使用 android.net.wifi.p2p 包。当您通过 3G 获取 IP 时，将使用 android.net.wifi 包。因此，您的设备可以有两个不同的 IP 地址。并且对于图片共享，将使用本地IP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T10:59:37.593

我认为不可能有两个同时连接，因为当您打开 WiFi 时，它会自动关闭 3g 并使用 WiFi 作为默认连接。反之亦然。

至少这是我在所有安卓手机上都注意到的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T10:34:32.233

3G Data Session 和 WIFI Direct 可以同时工作吗？是的...可以工作

这会在不中断视频文件下载的情况下成功吗？是的..

在图片分享中，将使用哪个 IP 地址？我猜是本地IP。虽然没有检查

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T12:41:34.863

您可以使用 requestRouteToHost API 进行路由，即如果您知道存储视频的主机地址，则视频下载可以如下进行：

```
 ConnectivityManager connManager = null;

    if(mContext != null) {
        connManager = (ConnectivityManager)mContext.getSystemService(Context.CONNECTIVITY_SERVICE);

        NetworkInfo[] netInfos = connManager.getAllNetworkInfo();
        for(int loop_index=0;loop_index<netInfos.length;loop_index++){          
            switch(netInfos[loop_index].getType())
            {
            case ConnectivityManager.TYPE_MOBILE_HIPRI:
                if(netInfos[loop_index].getState()== NetworkInfo.State.CONNECTED){
                    connectionSet = connManager.requestRouteToHost(ConnectivityManager.TYPE_MOBILE_HIPRI, lookupHost("Video Stored Address"));
                }
                break;

            case ConnectivityManager.TYPE_WIFI:
                if(netInfos[loop_index].getState()== NetworkInfo.State.CONNECTED)

                break;

            default:
                if(netInfos[loop_index].getState()== NetworkInfo.State.CONNECTED)

                break;
            }
        }
    }

private static int lookupHost(String hostname) {
    InetAddress inetAddress;
    try {
        inetAddress = InetAddress.getByName(hostname);
    } catch (UnknownHostException e) {
        return -1;
    }
    byte[] addrBytes;
    int addr;
    addrBytes = inetAddress.getAddress();
    addr = ((addrBytes[3] & 0xff) << 24)
            | ((addrBytes[2] & 0xff) << 16)
            | ((addrBytes[1] & 0xff) << 8)
            |  (addrBytes[0] & 0xff);
    return addr;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-05T23:09:35.790

虽然Android手机不允许同时使用两个接口，但是可以通过应用开发来实现。我为 Windows 开发了一个下载加速器，它同时使用 WIFI 和以太网接口进行 TCP 连接。

这两个接口只能用于 TCP 连接，具有两个不同的 IP 地址。您可以为 Android 手机开发一个应用程序，该应用程序将首先确定文件的大小（以字节为单位）并在每个接口上发送字节请求。请记住，UDP 连接在并发接口中是不可能的。

# javascript - 如何使用 Java 脚本将 JSON Web 服务值转换为 HTML 页面

> ID：10053647
> 
> 赞同：1
> 
> 时间：2012-04-07T10:24:03.850
> 
> 标签：javascript, html, json

我有一个 JSON 格式页面和一个 HTML 页面。在 JSON 格式的页面中，我有员工数据。在 HTML 页面中，如果我单击提交按钮，页面必须将 JSON 格式的值显示为表格格式。

在 .html 页面中，我添加了 .js 文件的引用。之后我写代码

```
<table id="EmpNewTable" border="2"> 
<tr> 
  <th>First Name</th> 
</tr> 
</table><br /><br /> 
<input type="button" id="DisplyEmp" value="Display" onclick="test();" /> 
```

在 test() 方法中我必须写什么代码？我尝试使用`$.ajax`，`$.getJSON`但没有显示值

我的 json 页面是

```
{"SelectEmployeeResult": [
{
"Address":"Pune",
"DateOfBirth1":"11\/11\/1988 12:00:00 AM",
 "FirstName":"Balaji",
"LastName":"Nikam",
"Sex":"Male"
}, 
{
  "Address":"Hyd", 
  "DateOfBirth1":"11\/4\/1988 12:00:00 AM",
  "FirstName":"jaya",
  "LastName":"deokar",
  "Sex":"Female"
}, 
.
.
. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T14:09:01.557

你应该像这样使用 $.getJSON 获得价值，

```
$.getJSON("stackjson.json", function(data) {
    for(emp in data.SelectEmployeeResult) {
        //iterate array here
        alert(data.SelectEmployeeResult[emp].FirstName); 
    } 
}); 
```

这是整个工作代码，

```
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title> - jsFiddle demo</title>

  <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.js"></script>

<script type="text/javascript">
  $(document).ready(function(){
      $("#DisplyEmp").click(function() {
          $.getJSON("yourjsonurl", function(data) {
              for(emp in data.SelectEmployeeResult) {
                  console.log(data.SelectEmployeeResult[emp]);
                  var newRow = "<tr>"+
                                  "<td>"+data.SelectEmployeeResult[emp].FirstName+"</td>"+
                                  "<td>"+data.SelectEmployeeResult[emp].LastName+"</td>"+
                                  "<td>"+data.SelectEmployeeResult[emp].DateOfBirth1+"</td>"+
                                  "<td>"+data.SelectEmployeeResult[emp].Sex+"</td>"+
                                  "<td>"+data.SelectEmployeeResult[emp].Address+"</td>"+
                               "</tr>";
                  $("#EmpNewTable").append(newRow);
              } 
          });
      });
  });
</script>

</head>
<body>
<table id="EmpNewTable" border="2"> 
<tr> 
  <th>First Name</th>
  <th>Last Name</th>
  <th>Birthday</th>
  <th>Sex</th>
  <th>Address</th>
</tr> 
</table><br /><br /> 
<input type="button" id="DisplyEmp" value="Display" />

</body></html> 
```

和这样的结果，

![在此处输入图像描述](../Images/3d1fd826fc31a967d0cf3122fc5f1045.png)

# android - 当应用程序在后台运行时无法找到位置更新

> ID：10053649
> 
> 赞同：1
> 
> 时间：2012-04-07T10:24:43.447
> 
> 标签：android, gps, android-service

我正在尝试创建一个应用程序，我想在其中连续运行 Android 应用程序。

我创建了服务类以在后台运行应用程序以进行位置更新。该服务不会连续运行，但会在一段时间后停止。下面是启动服务的 Boot 接收器类。

我已经把两个类服务和引导接收器类。

我做错了什么或者我错过了什么？

```
/********************Boot receiver********************/

import java.util.Calendar;

import android.app.AlarmManager;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;
import android.widget.Toast;

public class BootReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {

        // TODO Auto-generated method stub
        Log.i("IntentReceiver", "Got intent " + intent.getAction() + " / data: " + intent.getDataString());

        try {
            Intent i = new Intent(context,MyService.class);

            PendingIntent  pendingIntent = PendingIntent.getService(context, 0, i, 0);

            AlarmManager alarmManager = (AlarmManager)context.getSystemService(Context.ALARM_SERVICE);

            Calendar calendar = Calendar.getInstance();
            calendar.setTimeInMillis(System.currentTimeMillis());
            calendar.add(Calendar.SECOND, 20);
            alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), 1000, pendingIntent);
            i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            context.startService(i);
        }
        catch (Exception e) {
            e.printStackTrace();
        }
    }
}

/**********************Myservice*********************/

import java.util.Date;

import com.safecell.dataaccess.InteruptionRepository;
import com.safecell.dataaccess.TempTripJourneyWayPointsRepository;
import com.safecell.model.SCProfile;
import com.safecell.model.SCWayPoint;
import com.safecell.receiver.LockReceiver;
import com.safecell.utilities.DateUtils;

import android.app.ActivityManager;
import android.app.ActivityManager.RunningServiceInfo;
import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;

import android.os.Bundle;
import android.os.IBinder;
import android.util.Log;
import android.widget.Toast;

import android.location.Location;

import android.location.LocationListener;

import android.location.LocationManager;
import android.media.AudioManager;

public class MyService extends Service {
    private static LocationManager mlocManager;
    private static final String TAG = "MyService";
    public static double x=0.0 ,y=0.0,last_x=0.0,last_y=0.0;
    SharedPreferences sharedPreferences;
    public static int j=0;
    public static TrackingScreenActivity trackingScreenActivity = null;
    public static TrackingService trackingService;
    static TempTripJourneyWayPointsRepository tempTripJourneyWayPointsRepository;
    double speed = 0.0;
    private float lastDistanceInMiles = 0;

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onCreate() {
        Toast.makeText(this, "My Service Created", Toast.LENGTH_LONG).show();
        Log.d(TAG, "onCreate");
    }

    @Override
    public void onDestroy() {
        Toast.makeText(this, "My Service Stopped", Toast.LENGTH_LONG).show();
        Log.d(TAG, "onDestroy");
    }

    @Override
    public void onStart(Intent intent, int startid) {
        //Toast.makeText(this, "start My Service Started", Toast.LENGTH_LONG).show();
        Log.d(TAG, "onStart");

        if(SplashScreenActivity.act_flag)
        {
        }
        else
        {
            Intent myStarterIntent = new Intent(getApplicationContext(), SplashScreenActivity.class);
            myStarterIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            getApplicationContext().startActivity(myStarterIntent);
        }
        sharedPreferences = getSharedPreferences("TRIP", MODE_WORLD_READABLE);

        mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);

        LocationListener mlocListener = new MyLocationListener();

        mlocManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, mlocListener);
    }

    /***********************To insert a record in an nsqlite table**********************/

    private void insertWaypoint(Location location) {
        // InteruptionRepository
        tempTripJourneyWayPointsRepository= new TempTripJourneyWayPointsRepository(
            getApplicationContext());

        double distanceInMiles = tempTripJourneyWayPointsRepository.getDistanceDifference(location);

        //Toast.makeText( getApplicationContext(),
        //                "didf=f"+distanceInMiles,
        //                Toast.LENGTH_SHORT).show();

        long currentTime = new Date().getTime();

        double timeDifference = tempTripJourneyWayPointsRepository.getTimeDiffernce(currentTime);
        double avarageSpeed = tempTripJourneyWayPointsRepository.getAvarageEstimatedSpeedForAutoTripStart();
        SharedPreferences sharedPreferences = getSharedPreferences("TRIP", MODE_WORLD_READABLE);

        boolean isTripStarted = sharedPreferences.getBoolean("isTripStarted", false);

        if (timeDifference != 0 && distanceInMiles!=0) {
            speed = distanceInMiles / timeDifference;
        }

        Toast.makeText( getApplicationContext(), "didf=f"+speed, Toast.LENGTH_SHORT).show();

        boolean background = true;
        if (isTripStarted)
        {
            AudioManager aManager = (AudioManager) getSystemService(AUDIO_SERVICE);
            aManager.setRingerMode(AudioManager.RINGER_MODE_SILENT);

            SCWayPoint wayPoint =
                new SCWayPoint(0, 0,
                               DateUtils.getTimeStamp(currentTime),
                               location.getLatitude(), location.getLongitude(), speed,
                               background);

            tempTripJourneyWayPointsRepository.intsertWaypoint(wayPoint);
        }// if trip started

        // trackingScreenActivity.dismProgressDialog();
    }

    /* Class My Location Listener */
    public class MyLocationListener implements LocationListener
    {
        @Override
        public void onLocationChanged(Location loc)
        {
            Log.d(TAG, "onlocationchnage");
            x=loc.getLatitude();
            y=loc.getLongitude();
            int d3= calcDistance(last_x,last_y,x,y);
            double speed;
            if (d3>20) {
                speed = d3/20;
            }
            else
            {
                speed=0.0;
            }
            j++;

            String Text ="My current location is: " +

            "Latitud1 = " +x +

            "Longitud1 = " +y+
            "Latitud2 = " + last_x +

            "Longitud2 = " + last_y+
            "j=" +j+
            "distance="+d3+" Speed  :  "+speed;

            Toast.makeText( getApplicationContext(), Text, Toast.LENGTH_SHORT).show();

            if(speed>10)
            {
                TempTripJourneyWayPointsRepository tempTripJourneyWayPointsRepository =
                    new TempTripJourneyWayPointsRepository(getApplicationContext());
                tempTripJourneyWayPointsRepository.deleteTrip();
                SharedPreferences.Editor editor = sharedPreferences.edit();
                editor.putBoolean("isTripPaused", false);
                editor.putBoolean("isTripStarted", true);
                editor.commit();
                insertWaypoint(loc);
                if(speed < 10.0)
                {
                    //Toast.makeText(getApplicationContext(), "hoooo service"+speed, Toast.LENGTH_LONG).show();
                    if(isMyServiceRunning())
                    {
                        //trackingService.saveTripAsyncTask(getApplicationContext());
                        //      Toast.makeText(getApplicationContext(), "hiiiiiiiiiiiiiiii Service", Toast.LENGTH_LONG).show();
                        //trackingScreenActivity.btnStop.performClick();
                        //trackingScreenActivity.stoptripinservice();

                        //      AddTripActivity.addTripActivity=

                        //SharedPreferences.Editor editor = sharedPreferences.edit();
                        //editor.putBoolean("isTripSaved", true);
                        //editor.commit();
                    }
                }

                last_x=loc.getLatitude();
                last_y=loc.getLongitude();
            }

        public  void editGenereateTripUniqueID(String uniqueId){
            SharedPreferences.Editor editorUniqueID =
                TrackingService.context.getSharedPreferences("TripJouneryUID", MODE_WORLD_WRITEABLE).edit();
            editorUniqueID.putString("UniqueIdForTrip", uniqueId);
            editorUniqueID.commit();
            //Log.v("Safecell : --UniqueIdForTrip", "ID = "+uniqueId);
        }

        private Double distance(double lat1, double lon1, double lat2, double lon2)
        {
            /* double theta = lon1 - lon2;
            double dist = Math.sin(deg2rad(lat1)) * Math.sin(deg2rad(lat2)) +
                          Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * Math.cos(deg2rad(theta));
            dist = Math.acos(dist);
            dist = rad2deg(dist);
            dist = dist * 60;
            dist = dist * 1852;*/
            double dlon = lon2 - lon1;
            double  dlat = lat2 - lat1;
            double a = Math.pow((Math.sin(dlat/2)),2) +
                       Math.cos(lat1) * Math.cos(lat2) *  Math.pow((Math.sin(dlon/2)),2);

            double c = 2 * Math.atan2( Math.sqrt(a), Math.sqrt(1-a) );
            double d = 6373  * c;
            return (d);
        }

        private boolean isMyServiceRunning() {
            ActivityManager manager = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
            for (RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE)) {
                if ("com.safecell.TrackingService".equals(service.service.getClassName())) {
                    return true;
                }
            }
            return false;
        }

        public int calcDistance(double latA, double longA, double latB, double longB) {

            double theDistance = (Math.sin(Math.toRadians(latA)) *
                    Math.sin(Math.toRadians(latB)) +
                    Math.cos(Math.toRadians(latA)) *
                    Math.cos(Math.toRadians(latB)) *
                    Math.cos(Math.toRadians(longA - longB)));

            return new Double((Math.toDegrees(Math.acos(theDistance))) * 69.09*1.6093).intValue();
        }

        private double deg2rad(double deg) {
            return (deg * Math.PI / 180.0);
        }

        private double rad2deg(double rad) {
            return (rad * 180.0 / Math.PI);
        }

        @Override
        public void onProviderDisabled(String provider)
        {
            // Toast.makeText( getApplicationContext(), "Gps Disabled", Toast.LENGTH_SHORT ).show();
        }

        @Override
        public void onProviderEnabled(String provider)

        {
            // Toast.makeText( getApplicationContext(), "Gps Enabled",  Toast.LENGTH_SHORT).show();
        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras)
        {

        }

    }/* End of Class MyLocationListener */

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T11:41:09.383

我没有信心，但我有一个想法。

1.  您应该设置 TIMEZONE_CHANGED 的广播。更改日期和时间时，PF 可能会重置警报管理器。并且某些 Android 设备默认日期和时间设置是自动的！

2.  您应该在低内存杀手的 Service#onCreate() 上编写重新启动操作代码。`Service#onCreate()`重启服务时可能会调用 PF 。PF 注册终止您的服务并重新启动您的服务。

3.  您可能会考虑将您的服务作为前台服务来执行。所以被低内存杀手杀死的优先级/潜力很低。
4.  您可以重新检查您的代码关于`NullPointerException`at `Service#onStart()`。PF 可能会将 null 设置为 onStart 意图参数。
5.  您可能会考虑设置`PowerManager#WakeLock`. PF 休眠时服务无法运行。

PS：您可以查看以下有关PowerManager和前台服务的Android bug。

*   *[WakeLock 超时导致 WakeLock 在超时时未锁定](http://code.google.com/p/android/issues/detail?id=14184)*
*   *[启动前台服务时不会将通知创建为正在进行](http://code.google.com/p/android/issues/detail?id=20035)*

# matlab - 获取属于某个形状的像素

> ID：10053651
> 
> 赞同：1
> 
> 时间：2012-04-07T10:25:09.727
> 
> 标签：matlab, image-processing

我有这张图片： ![在此处输入图像描述](../Images/b1934db97f10c62441372afc10f76eeb.png)

在这张图片中，我有 11 个形状（看起来像椭圆）。我想找到每个形状中每个像素的 RGB（包括白色边缘/边界，因为它是形状的一部分）。

如果有帮助，我有每个形状的中心坐标。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T14:49:54.300

这是我在审查问题时想到的一个 hacky 解决方案：

1.  如您的另一个问题中所述，用白色填充每个形状，[Matlab fill shapes by white](https://stackoverflow.com/questions/10054482/matlab-fill-shapes-by-white)。
2.  由于您仍然有形状的中心，现在再次使用图像中不存在的颜色填充每个形状，例如粉红色。
3.  现在每个感兴趣的像素（属于形状的那些：边缘和内部）都是粉红色的，并且没有其他像素具有这种颜色。
4.  现在您可以简单地获取粉红色像素列表：

    `foundPixels = find(img == pink); % pink holds the value for the pink color I used.`

5.  现在您可以在原始图像 ( ) 上使用这些索引`pixels = original(foundPixels);`来获得您想要的像素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T12:01:13.310

以下是使您的工作变得轻松的命令...

1.  正如“Superbest”所说，用命令填充图像

    ```
    %% Example%%
    img = imread('coins.png');
    BW4 = im2bw(img );
    BW5 = imfill(BW4,'holes');
    imshow(BW4), figure, imshow(BW5); 
    ```

2.  现在使用命令 bwlabeln()，找出簇或形状的数量。

    ```
    %% Example%%
     L = bwlabel(BW5);
     figure,imshow(L,[]); 
    ```

L 会给你相同数量的形状，所有像素都属于相同的形状。L 包含 BW 中连接组件的标签。BW 可以有任何维度；L 与 BW 大小相同。L 的元素是大于或等于 0 的整数值。标记为 0 的像素是背景。标记为 1 的像素构成一个对象，标记为 2 的像素构成第二个对象，依此类推。

1.  假设您有两个形状或区域然后找到原始颜色或灰度值 od 如下。

    ```
    %% Example%%
    cods = find(L==1);
    Shape1(1:size(img,1),1:size(img,2))=0;
    Shape1(cods) = img(cods);
    %% Now shape1 is same size as img, but will have gray scale values at region1   locations only,you will get RGB valuse in shape1 image.. repeate it for as many shapes as you have in your image. 
    ```

祝您编码愉快...

# java - 在处理数据之前强制 JDialog 可见？

> ID：10053655
> 
> 赞同：1
> 
> 时间：2012-04-07T10:25:30.077
> 
> 标签：java, swing, jdialog, swingworker

我`JDialog`在 NetBeans 中创建了一个和一个自定义构造函数，如下所示：

```
public AnimatedProgress(java.awt.Frame parent, boolean modal, JTable table) {
    super(parent, modal);
    initComponents();
    setLocationRelativeTo(parent);
    progressLabel.setText("Collecting Table Data. . .");
    Object[][] data = getJTableData(table); // Simple method to collect data and store in Object[][] array
    progressLabel.setText("Processing Data. . .");
    processData(data);
    progressLabel.setText("Data Processed. . .");
} 
```

现在我称之为`JDialog`：

```
new AnimatedProgress(this, true, dataTable).setVisible(True); 
```

我的问题是，当 Java 调用构造函数时，构造函数中的所有代码都会首先执行，然后出现最终结果对话框。

我怎样才能让我`JDialog`先出现然后处理方法：`getTableData()`和`processData()`??

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T10:46:49.300

这是一个使用示例`SwingWorker`：

```
public class BackgroundThread extends SwingWorker<Void, Void>
{
    private JTable table;

    public BackgroundThread(JTable table)
    {
        this.table = table;
    }

    @Override
    public Void doInBackground() throws Exception
    {
        /*
            If getJTableData() or processData() are not static,
            pass a reference of your class which has these methods
            and call them via that reference
        */
        Object[][] data = getJTableData(table);
        publish("Processing Data. . .");
        processData(data);
        publish("Data Processed. . .");
        return null;
    }

    @Override
    public void process(List<String> chunks)
    {
        for(String chunk : chunks) progressLabel.setText(chunk);
    }
} 
```

然后将您的构造函数更改为：

```
public AnimatedProgress(java.awt.Frame parent, boolean modal, JTable table)
{
    super(parent, modal);
    initComponents();
    setLocationRelativeTo(parent);
    setVisible(true);
    new BackgroundThread(table).execute();
} 
```

我没有测试它，但我希望它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T10:34:24.137

JDialog 在创建之前是不可见的 ==> 构造函数必须在可见性更改之前完全执行。
我认为您应该创建一个包含数据填充的 myInitialize() 方法。首先，您现在通过调用构造函数使对话框可见，之后您可以调用 myIntialize() 方法以使用正确的数据填充组件。

# wcf - WCF REST post方法中的特殊字符？

> ID：10053656
> 
> 赞同：-1
> 
> 时间：2012-04-07T10:25:31.653
> 
> 标签：wcf

有时我`400 bad request`在发送特殊字符（如“&”等）时会出错。就像 XML 格式的字符到 REST WCF 方法一样。

是什么原因以及为什么我会收到此错误？哪些字符不支持对 REST WCF post 方法的 XML 格式请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:22:41.637

通过使用[CDATA](http://en.wikipedia.org/wiki/CDATA)，我们可以传递所有字符。

句法：

```
<![CDATA[ Tax = 8 & of Subtotal ]]> 
```

# jquery - 如何从我的 Django 模板中调用 Dajax / Dajaxice 函数

> ID：10053660
> 
> 赞同：1
> 
> 时间：2012-04-07T10:25:50.880
> 
> 标签：jquery, python, ajax, django, dajaxice

我正在编写一个简单的 Django 应用程序，并希望使用 Dajax / Dajaxice 添加 ajax 分页。我已经开始尝试从 Dajax 网站 (http://dajaxproject.com/pagination/) 实现简单的分页示例 - 但没有设法让它工作。每当我按下“下一步”按钮时，我都会收到以下 js 错误：

```
Uncaught TypeError: Cannot call method 'pagination' of undefined 
```

我的 Django 项目名为“DoSomething”——它包含一个名为“core”的应用程序。

我已按照所有说明在此处安装 Dajaxice：[https ://github.com/jorgebastida/django-dajaxice/wiki/installation](https://github.com/jorgebastida/django-dajaxice/wiki/installation)

我在“core”目录中有一个名为“ajax.py”的python文件，其中包含以下代码：

```
from views import get_pagination_page
from dajax.core.Dajax import Dajax
from django.template.loader import render_to_string
from dajaxice.decorators import dajaxice_register
from django.utils import simplejson

@dajaxice_register
def pagination(request, p):
    try:
        page = int(p)
    except:
        page = 1
    items = get_pagination_page(page)
    render = render_to_string('posts_paginator.html', { 'items': items })

    dajax = Dajax()
    dajax.assign('#pagination','innerHTML',render)
    return dajax.json() 
```

我的 views.py 文件包含以下方法：

```
def index(request):
    posts = Post.objects.order_by('id').reverse()
    items = get_pagination_page(1)
    return render_to_response('index.html', locals(), context_instance=RequestContext(request))

def get_pagination_page(page=1):
    from django.core.paginator import Paginator, InvalidPage, EmptyPage
    from django.template.loader import render_to_string
    items = Post.objects.order_by('id').reverse()
    paginator = Paginator(items, 10)
    try:
        page = int(page)
    except ValueError:
        page = 1
    try:
        items = paginator.page(page)
    except (EmptyPage, InvalidPage):
        items = paginator.page(paginator.num_pages)
    return items 
```

我的索引模板包含以下内容：

```
<div id="pagination">
    {% include "posts_paginator.html" %}
</div> 
```

我的 posts_paginator.html 模板包含以下链接，用于触发分页方法：

```
{% for i in items.object_list %}
    {{ i }}<br>
{% endfor %}
{% if items.has_next %}
    <a href="#" onclick="Dajaxice.core.pagination(Dajax.process,{'p':{{ items.next_page_number }}})">next</a>
{% endif %} 
```

我的问题是，**在 onClick 值中，我应该如何引用分页方法（来自我的 ajax.py 文件）**。我找不到任何东西来解释这一点 - 我已经尝试了我能想到的所有项目名称/应用程序名称的组合！

谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:53:10.857

至少在我的情况下，我必须附加项目名称以及 app_label。

```
Dajaxice.MyProject.core.my_dajax_method(Dajax.process, {'form' : data}); 
```

# eclipse - 动态语法高亮

> ID：10053666
> 
> 赞同：9
> 
> 时间：2012-04-07T10:26:32.620
> 
> 标签：eclipse, dynamic, netbeans, ide, syntax-highlighting

我正在寻找一个允许我自定义***动态***语法高亮规则的工具：

**静态语法高亮的示例（大多数 IDE 已经这样做了）。**

1.  将所有出现的单词突出显示`int`为红色。

2.  以蓝色突出显示所有字符串（包含在 中`"`）。

**DYNAMIC 语法高亮示例**

1.  给定一个出现 > 两次的 txt 字符串，我希望它以紫色突出显示。

2.  如果我单击一个文本块，我希望同一文件上的所有 txt 块都以绿色突出显示。

我假设有人以前可能已经制作过这样的荧光笔，但我在网上找不到任何东西。关于如何的任何反馈：

1.  我可以*扩展现有项目*（理想情况下，我希望这是一个 IDE 插件）来自定义我的动态需求？

2.  如果情况 1 不存在，*任何可能对此类项目最有效的模板语言*？即任何动态突出显示文本的框架，同时支持编辑——这些框架很容易扩展。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T04:28:21.543

Emacs (www.gnu.org/s/emacs/) 应该能够做到这一点。

Emacs 是高度可定制的；你编写 (e)Lisp 函数来让它做你想做的事。许多 Emacs 的特定语言模式都会“固定”突出显示关键字；您应该能够劫持该机器并根据您的兴趣使突出显示动态化。GNU 提供了用于此类模式的大量 eLisp 代码库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T16:54:48.927

Eclipse 所做的事情可能正是您想要的，或者至少非常接近。

在 Preferences > Java > Editor > Mark Occurrences 中启用“标记出现”

一旦您单击局部变量之类的东西，您将在当前源文件中标记该变量的所有出现。

这与“注释”结合起来非常有用。对除“出现”之外的所有注释禁用“包含在下一个/上一个导航中”。最简单的方法是通过 UI 中的向上/向下箭头。您单击工具栏中黄色大向上或向下箭头旁边的黑色小向下箭头。现在您可以使用逗号和句点来浏览您突出显示的所有事件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-28T18:52:10.287

Netbeans 高亮工具也相当完整和可配置。

> 将所有出现的单词“int”突出显示为红色。

*   在 Netbeans 中，这个特定关键字没有默认条目，原语在`Keyword`.

> 用蓝色突出显示所有字符串（用 "'s 括起来）。

*   是的，这是可能的；类别 ：`String`

> 给定一个出现 > 两次的 txt 字符串，我希望它以紫色突出显示。

*   也许我不明白这一点，因为如果您多次突出显示所有编写的单词，我担心您的所有代码在某行代码后都会变成紫色！

> 如果我单击一个文本块，我希望同一文件上的所有 txt 块都以绿色突出显示。

*   当您通过双击选择一个单词时，所有出现的单词都将突出显示，并且在包含该关键字的每一行的右栏中都会出现一个标记。您可以单击该标记以快速转到包含该事件的行。
*   您还可以使用快捷方式`Ctrl+F3`查找选择并突出显示所有出现的内容（可以是您想要的所有内容，而不仅仅是关键字）。然后用于`Shift+F3`查找上一个出现并`F3`找到下一个

> 我可以扩展现有项目（理想情况下，我希望这是一个 IDE 插件）来定制我的动态需求？

*   我从来没有尝试过扩展高亮类别，这似乎是可能的，但需要做很多工作！请参阅此[链接](http://wiki.netbeans.org/SyntaxColoringANTLR)和此[链接](http://wiki.netbeans.org/How_to_create_support_for_a_new_language)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-29T14:21:47.640

我不确定你是否开始使用完整的 IDE，但 Sublime Text 2 有一些非常好的自动突出显示： http: [//www.sublimetext.com/2](http://www.sublimetext.com/2)

# android - 如何通过指定名称来搜索应用程序？

> ID：10053669
> 
> 赞同：-1
> 
> 时间：2012-04-07T10:27:22.260
> 
> 标签：android, search

所以我这样做是为了得到所有的应用程序：

```
final Intent mainIntent = new Intent();
final List<ResolveInfo> pkgAppsList = getApplicationContext()
    .getPackageManager().queryIntentActivities(mainIntent, 0); 
```

如何通过名称获取特定应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T10:43:59.403

使用以下代码获取列表中设备上安装的所有应用程序名称。您可以按名称查询列表。

```
 PackageManager pm = this.getPackageManager();
 Intent mainIntent  = new Intent(Intent.ACTION_MAIN, null);
 mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);
 List list = pm.queryIntentActivities(mainIntent , PackageManager.PERMISSION_GRANTED);
 for (ResolveInfo rInfo : list) {
     results.add(rInfo.activityInfo.applicationInfo
         .loadLabel(pm).toString());
     Log.w("Installed Applications Names", rInfo.activityInfo.applicationInfo
         .loadLabel(pm).toString());
 } 
```

# php - 如何使用 Codeigniter 链接三个 mysql 表

> ID：10053670
> 
> 赞同：0
> 
> 时间：2012-04-07T10:27:23.543
> 
> 标签：php, mysql, codeigniter, codeigniter-2

我有以下三个表。我正在尝试像这样在这三个表之间相互链接（加入）-

链接 1

```
table1.code=table2.account-code  
table1.code=table3.t-code      
table2.voucher_no=table3.voucher_no 
```

![在此处输入图像描述](../Images/0b9f5155e08263a563d0569d77b7a245.png)

我试图以 Codeignitier 的方式进行查询，但我收到一条错误消息，指出 table1 不是唯一的或类似的东西。

这是我尝试过的（并得到了错误）

```
 $this->db->select('*');
   $this->db->from('table2');
   $this->db->join('table3', 'table2.voucher_no = table3.voucher_no');
  $this->db->join('table1', '(table1.code = table2.account_code)');
  $this->db->join('table1', '(table1.code = table3.t_code)'); 
```

请你告诉我我哪里做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T10:38:06.233

```
$this->db->select('table1.* , table2.* , table3.*');
$this->db->from('table2');
$this->db->join('table3', 'table2.voucher_no = table3.voucher_no','left');
$this->db->join('table1', 'table1.code = table2.account_code AND table1.code = table3.t_code','left');
$this->db->get(); 
```

如果您想选择所有三个表 c 我的选择语句还请查看连接的使用方式，我已删除您在连接中使用的括号。

已编辑

这将产生这个查询

```
SQL: SELECT `table1`.*, `table2`.*, `table3`.* FROM (`table2`) LEFT JOIN `table3` ON `table2`.`voucher_no` = `table3`.`voucher_no` LEFT JOIN `table1` ON `table1`.`code` = `table2`.`account_code` AND table1.code = table3.t_code 
```

并出于测试目的

[http://brettdewoody.com/labs/active-check/index.php](http://brettdewoody.com/labs/active-check/index.php)

# javascript - 用于提取文本和数字的 JavaScript 正则表达式

> ID：10053672
> 
> 赞同：0
> 
> 时间：2012-04-07T10:27:36.527
> 
> 标签：javascript, regex

我还是正则表达式的新手（我应该学习），我只需要 JS 正则表达式从这样的文本中提取字符串和数字：`[number][string]`.

```
( /^(\d+).(\s+)/?) 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T11:24:36.687

我认为您正在寻找 ' `/\d+[a-z]+/gi`' ：

```
var x = "123123K, 333D".match(/\d+[a-z]+/gi); 
console.log(x)​;    //["123123K", "333D"] 
```

**更新**：`x`是数组。您可以对其进行迭代并提取数字和文本：

```
xitem.match(/\d+/)[0]      //number
xitem.match(/[a-z]+/i)[0]  //text 
```

PS：关于`\s`：

> 匹配一个空白字符，在 ASCII 中是制表符、换行符、换页符、回车符和空格；在 Unicode 中，还匹配不间断空格、下一行和可变宽度空格（等等）。

[http://en.wikipedia.org/wiki/Regular_expression#Examples](http://en.wikipedia.org/wiki/Regular_expression#Examples)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T10:32:05.683

如果方括号也在该行中，则执行以下操作：

```
/^\[(\d+)\]\[(\s+)\]$/ 
```

如果他们不是

```
/^(\d+)(\s+)$/ 
```

# mysql - 搜索三列

> ID：10053674
> 
> 赞同：1
> 
> 时间：2012-04-07T10:27:41.487
> 
> 标签：mysql, sql, search

我希望有人可以帮助解决以下问题。我正在尝试创建特定于用户的搜索功能。当有人登录时，他们可以运行搜索，该搜索应该从`customer_ref`或`order_details`列返回结果。

我尝试了以下方法，但它返回了来自不同客户的结果。

```
SELECT *
FROM `job` 
WHERE c_name = 'John Doe'
AND customer_ref LIKE '%do%'
OR order_details LIKE '%do%' 
```

我想将结果限制为特定客户（出于显而易见的原因）。如果我删除底线 ( `OR order_details LIKE '%do%'`)，结果将正确锁定到客户中，但是，当它在那里时，我会得到包括其他客户名称的结果。

请注意，这`%do%`只是一个通配符搜索词，表示 door 或 Doreen（用于测试）。在实际代码中，它将是在搜索框中输入的值。

提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T10:32:54.310

您需要在查询中包含圆括号，以阐明您正在搜索的术语：

```
SELECT *
FROM `job` 
WHERE c_name = 'John doe'
AND (customer_ref LIKE '%do%'
OR order_details LIKE '%do%') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T11:53:56.143

尝试使用 CONCAT 例如：

```
SELECT *
FROM job 
WHERE job.c_name = 'John doe' AND
(job.customer_ref LIKE CONCAT '%do' 
OR job.order_details LIKE CONCAT '%do') 
```

# java - 查找 SIM 卡运营商

> ID：10053677
> 
> 赞同：1
> 
> 时间：2012-04-07T10:28:17.843
> 
> 标签：java, at-command, javax.comm, sim-card

我的 JAVA 程序可以找到与串口连接的调制解调器。像：

```
COM1: Serial
COM3: Serial  // This is my modem
LPT1: Parallel
LPT2: Parallel 
```

是否有任何 AT 命令或其他过程可以帮助我找出运营商身份（姓名），调制解调器中正在使用谁的 SIM 卡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:12:09.090

找出您在哪个网络上注册的命令是

```
AT+COPS? 
```

在我的，输出

```
+COPS: 0,0,"giffgaff",2 
```

其中引号中的字符串是操作员的名称。

# json - bash 中的转义字符（对于 JSON）

> ID：10053678
> 
> 赞同：74
> 
> 时间：2012-04-07T10:28:18.830
> 
> 标签：json, bash, escaping

我正在使用 git，然后将提交消息和其他位作为 JSON 有效负载发布到服务器。

目前我有：

```
MSG=`git log -n 1 --format=oneline | grep -o ' .\+'` 
```

将 MSG 设置为：

```
Calendar can't go back past today 
```

然后

```
curl -i -X POST \
  -H 'Accept: application/text' \
  -H 'Content-type: application/json' \
  -d "{'payload': {'message': '$MSG'}}" \
  'https://example.com' 
```

我真正的 JSON 有另外几个字段。

这很好用，但当然，当我有一个提交消息（例如上面带有撇号的提交消息）时，JSON 是无效的。

如何转义 bash 中所需的字符？我不熟悉这种语言，所以不知道从哪里开始。替换`'`为`\'`我怀疑至少可以完成这项工作。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-11-20T03:25:55.653

**使用 Python：**

这个解决方案不是纯 bash，但它是非侵入性的并且可以处理 unicode。

```
json_escape () {
    printf '%s' "$1" | python -c 'import json,sys; print(json.dumps(sys.stdin.read()))'
} 
```

请注意，JSON 是标准 python 库的一部分，并且已经存在很长时间了，所以这是一个非常小的 python 依赖项。

**或使用 PHP：**

```
json_escape () {
    printf '%s' "$1" | php -r 'echo json_encode(file_get_contents("php://stdin"));'
} 
```

**像这样使用：**

```
$ json_escape "ヤホー"
"\u30e4\u30db\u30fc" 
```

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2018-05-16T22:18:14.260

[`jq`](https://stedolan.github.io/jq/)可以做到这一点。

轻量级、免费且用 C 语言编写，在[GitHub 上](https://github.com/stedolan/jq)`jq`拥有超过 15k 颗星，享有广泛的社区支持。我个人觉得它在我的日常工作流程中非常快速和有用。

## 将字符串转换为 JSON

```
$ echo '猫に小判' | jq -aRs .
"\u732b\u306b\u5c0f\u5224\n" 
```

```
$ printf 'ô\nè\nà\n' | jq -Rs .
"ô\nè\nà\n" 
```

解释，

*   `-a`表示“ascii 输出”（在第二个示例中省略）
*   `-R`意思是“原始输入”
*   `-s`表示“包括换行符”（助记符：“slurp”）
*   `.`表示“输出 JSON 文档的根”

## Git + Grep 用例

要修复 OP 给出的代码示例，只需通过 jq 进行管道传输。

```
MSG=`git log -n 1 --format=oneline | grep -o ' .\+' | jq -aRs .` 
```

* * *

## 回答 #3

> 赞同：59
> 
> 时间：2012-07-15T21:27:18.887

无需担心如何正确引用数据，只需将其保存到文件并使用允许选项的`@`构造即可。为确保 的输出正确转义以用作 JSON 值，请使用生成 JSON 之类的工具，而不是手动创建它。`curl``--data``git``jq`

```
jq -n --arg msg "$(git log -n 1 --format=oneline | grep -o ' .\+')" \
   '{payload: { message: $msg }}' > git-tmp.txt

curl -i -X POST \
  -H 'Accept: application/text' \
  -H 'Content-type: application/json' \
  -d @git-tmp.txt \
  'https://example.com' 
```

您也可以使用`-d @-`;从标准输入中直接读取 我将其作为练习留给读者构建读取`git`并生成正确的有效负载消息以上传的管道`curl`。

（提示：是`jq ... | curl ... -d@- 'https://example.com'`）

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2012-07-15T20:59:41.650

当我遇到这个时，我还试图在 Bash 中转义字符，以便使用 JSON 进行传输。我发现实际上有一个更大[的字符列表必须被转义](http://code.google.com/p/json-simple/wiki/EscapingExamples)——尤其是当你试图处理自由格式的文本时。

我发现有两个有用的技巧：

*   使用此线程中描述的 Bash`${string//substring/replacement}`语法。
*   对制表符、换行符、回车符等使用实际控制字符。在 vim 中，您可以通过键入`Ctrl`+`V`后跟实际控制代码来输入这些字符（例如， `Ctrl`+`I`用于制表符）。

我想出的结果 Bash 替换如下：

```
JSON_TOPIC_RAW=${JSON_TOPIC_RAW//\\/\\\\} # \ 
JSON_TOPIC_RAW=${JSON_TOPIC_RAW//\//\\\/} # / 
JSON_TOPIC_RAW=${JSON_TOPIC_RAW//\'/\\\'} # ' (not strictly needed ?)
JSON_TOPIC_RAW=${JSON_TOPIC_RAW//\"/\\\"} # " 
JSON_TOPIC_RAW=${JSON_TOPIC_RAW//   /\\t} # \t (tab)
JSON_TOPIC_RAW=${JSON_TOPIC_RAW//
/\\\n} # \n (newline)
JSON_TOPIC_RAW=${JSON_TOPIC_RAW//^M/\\\r} # \r (carriage return)
JSON_TOPIC_RAW=${JSON_TOPIC_RAW//^L/\\\f} # \f (form feed)
JSON_TOPIC_RAW=${JSON_TOPIC_RAW//^H/\\\b} # \b (backspace) 
```

在这个阶段，我还没有弄清楚如何正确地转义 Unicode 字符，这也是（显然）需要的。如果我解决了这个问题，我会更新我的答案。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2012-04-07T11:10:20.090

OK, found out what to do. Bash supports this natively as expected, though as always, the syntax isn't really very guessable!

Essentially `${string//substring/replacement}` returns what you'd image, so you can use

```
MSG=${MSG//\'/\\\'} 
```

To do this. The next problem is that the first regex doesn't work anymore, but that can be replaced with

```
git log -n 1 --pretty=format:'%s' 
```

In the end, I didn't even need to escape them. Instead, I just swapped all the ' in the JSON to \". Well, you learn something every day.

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2016-11-08T06:34:17.253

```
git log -n 1 --format=oneline | grep -o ' .\+' | jq --slurp --raw-input 
```

上面的行对我有用。更多工具请参考 [https://github.com/stedolan/jq](https://github.com/stedolan/jq)`jq`

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-04-07T10:34:45.640

我发现了类似的东西：

```
MSG=`echo $MSG | sed "s/'/\\\\\'/g"` 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-02-20T00:28:16.673

最简单的方法是使用[**jshon**](http://kmkeen.com/jshon/ "杰顺")，一个*用于解析、读取和创建 JSON 的命令行工具*。

`jshon -s 'Your data goes here.' 2>/dev/null`

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-03-27T17:10:36.547

> *[...] 中带有撇号的 JSON 无效。*

不是根据[https://www.json.org](https://www.json.org)。JSON 字符串中允许使用单引号。

> *如何转义 bash 中所需的字符？*

您可以使用[xidel](/questions/tagged/xidel "显示标记为“xidel”的问题")正确准备要发布的 JSON。
由于`https://example.com`无法测试，我将使用`https://api.github.com/markdown`（请参阅[此](https://superuser.com/a/733484)答案）作为示例。

让我们假设`'çömmít' "mêssågè"`作为 的奇异输出`git log -n 1 --pretty=format:'%s'`。

`"text"`使用正确转义的 -attribute值创建（序列化）JSON 对象：

```
$ git log -n 1 --pretty=format:'%s' | \
  xidel -se 'serialize({"text":$raw},{"method":"json","encoding":"us-ascii"})'
{"text":"'\u00E7\u00F6mm\u00EDt' \"m\u00EAss\u00E5g\u00E8\""} 
```

## 卷曲（可变）

```
$ eval "$(
  git log -n 1 --pretty=format:'%s' | \
  xidel -se 'msg:=serialize({"text":$raw},{"method":"json","encoding":"us-ascii"})' --output-format=bash
)"

$ echo $msg
{"text":"'\u00E7\u00F6mm\u00EDt' \"m\u00EAss\u00E5g\u00E8\""}

$ curl -d "$msg" https://api.github.com/markdown
<p>'çömmít' "mêssågè"</p> 
```

## 卷曲（管道）

```
$ git log -n 1 --pretty=format:'%s' | \
  xidel -se 'serialize({"text":$raw},{"method":"json","encoding":"us-ascii"})' | \
  curl -d@- https://api.github.com/markdown
<p>'çömmít' "mêssågè"</p> 
```

* * *

实际上，`curl`如果您已经在使用`xidel`.

## 西德尔（管）

```
$ git log -n 1 --pretty=format:'%s' | \
  xidel -s \
  -d '{serialize({"text":read()},{"method":"json","encoding":"us-ascii"})}' \
  "https://api.github.com/markdown" \
  -e '$raw'
<p>'çömmít' "mêssågè"</p> 
```

## Xidel（管道，查询中）

```
$ git log -n 1 --pretty=format:'%s' | \
  xidel -se '
    x:request({
      "post":serialize(
        {"text":$raw},
        {"method":"json","encoding":"us-ascii"}
      ),
      "url":"https://api.github.com/markdown"
    })/raw
  '
<p>'çömmít' "mêssågè"</p> 
```

## Xidel（全部在查询中）

```
$ xidel -se '
  x:request({
    "post":serialize(
      {"text":system("git log -n 1 --pretty=format:'\''%s'\''")},
      {"method":"json","encoding":"us-ascii"}
    ),
    "url":"https://api.github.com/markdown"
  })/raw
'
<p>'çömmít' "mêssågè"</p> 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-02-28T12:13:19.907

我在同样的问题上苦苦挣扎。我试图在 bash 中的 cURL 的有效负载上添加一个变量，它一直以 invalid_JSON 的形式返回。在尝试了很多逃避技巧之后，我找到了一个简单的方法来解决我的问题。答案都在单引号和双引号中：

```
 curl --location --request POST 'https://hooks.slack.com/services/test-slack-hook' \
--header 'Content-Type: application/json' \
--data-raw '{"text":'"$data"'}' 
```

也许它对某人有用！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-08-15T00:29:46.400

这是使用 Perl 的转义解决方案，将反斜杠 ( `\`)、双引号 ( `"`) 和控制字符转义`U+0000`为`U+001F`：

```
$ echo -ne "Hello, \n\tBye" | \
  perl -pe 's/(\\(\\\\)*)/$1$1/g; s/(?!\\)(["\x00-\x1f])/sprintf("\\u%04x",ord($1))/eg;'
Hello, \u000a\u0009Bye 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-03-18T14:05:29.193

我有同样的想法，在提交后发送一条带有提交消息的消息。首先，我在这里尝试过类似的尝试。但后来找到了更好更简单的解决方案。

刚刚创建了发送消息的 php 文件并使用 wget 调用它。在钩子/接收后：

```
wget -qO - "http://localhost/git.php" 
```

在 git.php 中：

```
chdir("/opt/git/project.git");
$git_log = exec("git log -n 1 --format=oneline | grep -o ' .\+'"); 
```

然后创建 JSON 并以 PHP 样式调用 CURL

# php - 文件 file_get_contents 是否执行自动 url_decode

> ID：10053682
> 
> 赞同：1
> 
> 时间：2012-04-07T10:28:41.600
> 
> 标签：php, file-get-contents, urldecode

我正在对 URL 进行以下操作

```
file_get_contents('https://xyz.com/login.php?app_data=%7B%22page%22%3A%22details%22%2C%22id%22%3A%2273%22%2C%22crp%22%3A%221%22%2C%22cip%22%3A%22%22%7D'); 
```

但我在另一端收到它

```
app_data={"page":"details","id":"73","crp":"1","cip":""} 
```

并不是

```
app_data=%7B%22page%22%3A%22details%22%2C%22id%22%3A%2273%22%2C%22crp%22%3A%221%22%2C%22cip%22%3A%22%22%7D' 
```

另一端的代码：

```
if(isset($_GET['url']))
{
    log($_GET['url']);
} 
```

`log`只是写入文件。

**回答**：不，但`$_GET` ***确实如此***。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T10:39:13.947

**解决方案 A：**

*在调用者脚本中编码你的`appdata`TWICE*

```
// Caller script
$appdata = '"page":"details","id":"73","crp":"1","cip":""';
$appdata = urlencode(urlencode($appdata));

file_get_contents("https://xyz.com/login.php?app_data=$appdata"); 
```

**解决方案 B：**

*在调用者脚本中编码您的`appdata`ONCE，在接收者脚本中编码 ONCE*

```
// Caller script
$appdata = '"page":"details","id":"73","crp":"1","cip":""';
$appdata = urlencode($appdata);

file_get_contents("https://xyz.com/login.php?app_data=$appdata"); 
```

* * *

```
// Receiver script
$appdata = urlencode($_GET['app_data']); 
```

你会得到你所期望的...... ;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T10:50:01.623

根据以下文档[`$_GET`](http://php.net/manual/en/reserved.variables.get.php)：

> **笔记：**
> 
> GET 变量通过[urldecode()](http://www.php.net/manual/en/function.urldecode.php)传递。

这适用于键和值（后者是导致您混淆的原因）。要获得您想要的结果，您*需要*在客户端上进行双重编码（这是一个非常难看的解决方法）：

```
$appdata = urlencode(urlencode('{"page":"details","id":"73","crp":"1","cip":""}'));
file_get_contents("https://xyz.com/login.php?app_data=$appdata"); 
```

或者只是正确执行并在服务器端对字符串进行后处理：

```
// $app_data will contain the nice, unescaped form
$app_data = $_GET['app_data']

// later if we need to pass $app_data in another request,
// we explicitly encode it again.
$app_data_encoded = urlencoded($app_data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T10:37:51.390

您可以使用[urlencode](http://php.net/manual/en/function.urlencode.php)返回编码形式。

```
$result = urlencode($app_data);
echo $result; 
```

# c - * 在 sscanf 中，* 在 [] 中

> ID：10053686
> 
> 赞同：2
> 
> 时间：2012-04-07T10:29:17.197
> 
> 标签：c, scanf

我正在学习`sscanf`并遇到如下格式字符串：

```
sscanf("%[^:]:%[^*=]%*[*=]%n",a,b,&c); 
```

我理解这部分`%[^:]`意味着扫描直到`':'`遇到 a 并将其分配给`a`. `:`在格式字符串中表示匹配 a `':'`。

但

1.  我理解这`%*d`意味着在遇到数字之前抑制分配。但是`%[^*=]`，`*`里面`[]`是什么意思呢？

2.  `%*[*=]`, 是否像抑制扫描直到遇到`=`. 如果是这样，它是否等同于`%[^=]`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T10:45:43.690

里面的`*`方括号只是一个文字 *。

此调用`sscanf`将匹配第二个指令中的所有内容，直到 * 或 =，并将结果分配给`b`. 然后第三个指令将获取所有 * 或 = 字符，并丢弃结果。

# objective-c - 如何将图像编码为字符串格式？

> ID：10053688
> 
> 赞同：0
> 
> 时间：2012-04-07T10:29:34.390
> 
> 标签：objective-c, ios, cocoa, xcode4.2, encode

我正在尝试使用以下代码对图像进行编码，但编码数据不正确。

我在这里写代码。如何更改我的代码并获得正确的编码数据？

```
NSData *imageData = UIImageJPEGRepresentation(myimages.image, 90);
// NSData *encrypteddata = [imageData dataUsingEncoding:NSASCIIStringEncoding];
NSString *encodedImage = [Base64 encode:imageData];
NSLog(@"my encoded image is 6666%@",encodedImage); 
```

它打印批量数据。每当我将此代码传递到 URL 时，都会显示一个空白图像而不是原始图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T21:02:39.123

要查看您的[Base64](http://en.wikipedia.org/wiki/Base64)编码图像字符串是否正确，并在服务器上显示为图像，请执行以下操作。

在 HTML 页面中，添加以下内容。

```
<html>
    <image src="Base64 data here"/>
</html> 
```

# windows-phone-7 - nlog 不适用于 wp7 模拟器

> ID：10053689
> 
> 赞同：0
> 
> 时间：2012-04-07T10:29:35.230
> 
> 标签：windows-phone-7, nlog

我正在开发 wp7.1 应用程序，我想记录一些操作。为此，我选择了**nlog**。我下载[了最新的 nlog 版本](http://nlog.codeplex.com/releases/view/32639) 并完全按照[本教程](http://nlog-project.org/2011/01/09/nlog-for-windows-phone-7.html)中的描述设置配置文件。所以日志目标是**LogReceiverService**。为了接收消息，我使用**NLogReceiverForwarderService**，这是一个包含在 nlog 源代码中的简单服务示例。

问题是当我尝试在 wp7 上记录某些内容时没有显示任何消息 - 仅显示带有“主机已打开”消息的控制台窗口。

我使用相同的 nlog 配置文件创建了 WPF 应用程序，它工作正常 - 所有消息都被记录下来。

所以我确信接收服务有效并且配置文件是正确的。

还：

*   我检查了 nlog config 是否设置为 Content 并将其复制到输出目录。
*   我以管理员身份运行 Visual Studio 和 WP7 模拟器。
*   我启用了模拟器控制台并将 nlog 目标设置为**控制台**- 不走运。控制台打开，显示一些调试信息，但没有我的日志消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T14:30:14.117

也许太明显了...检查您正在使用的日志级别。

我使用 nuget 包管理器在我的项目中安装库。您不必担心如何嵌入配置文件并自动获取依赖项。

这是我的控制台目标的 nlog 配置文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <targets>
    <target xsi:type="Console"  name="console" layout="${longdate} ${callsite} ${level} ${message}" header="-----------------"/>          
  </targets>
  <rules>
    <logger name="*" minlevel="Debug" writeTo="console" />
  </rules>
</nlog> 
```

# spotify - Spotify App API 内存泄漏

> ID：10053691
> 
> 赞同：0
> 
> 时间：2012-04-07T10:30:14.637
> 
> 标签：spotify

我目前正在使用 Spotify API 和一些对我的后端的定时请求构建一个应用程序。事实证明，随着时间的推移，该应用程序对内存的消耗是无限的。我隔离了以下代码片段

```
var player = models.player;
var leakTimer=setInterval(leak,500)
function leak(){
    player.playing=true;
} 
```

每次调用该函数都会增加 Spotify 使用的内存。我在使用 1.5Gb 后停止了测试，但它仍在增加。这是一个错误还是我的错误？

在 OSX 10.7.3、Spotify 0.8.2.610 上运行。

谢谢，

雨果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:44:14.183

有趣...我对其进行了测试，似乎也遇到了同样的问题。每次我按下一首歌曲时，它都会不断增加内存使用量。

在没有我的应用程序的情况下，我也使用 Spotify 对其进行了测试。同样的问题。完全没有任何应用程序对其进行了测试。没问题。

您可能想在未启用任何其他应用程序（Last.FM、Tune Wiki 等）的情况下测试您的应用程序，以测试它是否真的导致泄漏。顺便说一句，我的应用程序可以。

我想我知道它是为什么造成的。在我的应用程序中，我将使用 Last.FM api 以及其他一些功能提供有关当前播放歌曲的信息。当一首新歌开始时，信息 div 将被清空，并附加新信息。但是，之前调用的信息似乎存储在某个地方。这将堆积内存使用量。

我希望这能给你更多的见解。另外，谢谢指出。

# jquery - 如何添加 HTML jQuery 表来显示数据库？

> ID：10053693
> 
> 赞同：-1
> 
> 时间：2012-04-07T10:31:00.070
> 
> 标签：jquery, asp.net-mvc, model-view-controller, sql-server-2005

我需要在 ASP.NET 中的表中显示一个数据库。我得到了一些建议，例如 DataGridView 减慢了我们的进程。所以我使用 jQuery 表。但是如何从 SQL Server 数据库显示 ASP.NET MVC 网页中的 jQuery 表中的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T10:40:06.353

对于 jQuery 表，您可以实现对数据进行 JSON 编码的操作。然后可以将 jQuery 表配置为通过该源获取数据：

```
[HttpPost]
public JsonResult GetJsonData()
{
    var data = /* Get your data here */;

    return Json(data);
} 
```

然后，您将数据表配置为从远程源获取数据，如[文档](http://datatables.net/release-datatables/examples/data_sources/ajax.html)中指定的那样：

```
$(document).ready(function() {
    $('#example').dataTable( {
        "bProcessing": true,
        "sAjaxSource": 'http://www.yourdomain.com/yourController/GetJsonData',
        "sServerMethod": "POST"
    } );
}); 
```

**不确定这是否会提高您的表现。**

# ruby-on-rails - Rails“请稍候”页面

> ID：10053696
> 
> 赞同：3
> 
> 时间：2012-04-07T10:31:48.083
> 
> 标签：ruby-on-rails, redirect, rendering, pleasewait

我有一个 Rails 应用程序，可以导入你所有的 Facebook 联系人。这需要一些时间。我希望能够在后面继续导入时显示“请稍候”页面。

似乎我无法将 render 和 redirect_to 放在控制器中的同一操作上。我怎样才能做到这一点？

```
if @not_first_time
    Authentication.delay.update_contact_list(current_user)
else
    render 'some page telling the user to wait'
    Authentication.import_contact_list(current_user)
end
redirect_to :root_path, :notice => 'Succesfully logged in' 
```

如果它是用户第一次访问该站点，我想呈现一个“请等待页面”，开始导入，一旦完成重定向到根路径，就会对这些数据进行大量处理

如果不是第一次，则将联系人更新放在后台（使用delayed_jobs gem）并直接进入主页

我正在使用 fb_graph gem 来导入联系人。这是方法

```
def self.import_contact_list(user)
  user.facebook.friends.each do |contact|
  contact_hash = { 'provider' => 'facebook', 'uid' => contact.identifier, 'name' => contact.name, 'image' => contact.picture(size='large') }
  unless new_contact = Authentication.find_from_hash(contact_hash)
    ##create the new contact
    new_contact = Authentication.create_contact_from_hash(contact_hash)
  end
  unless relationship = Relationship.find_from_hash(user, new_contact)
    #create the relationship if it is inexistent
    relationship = Relationship.create_from_hash(user, new_contact)
  end
end 
```

结尾

**编辑**

我添加了下面建议的解决方案，它有效！

这是我在“等待”操作中的“在我们导入联系人时等待”视图

```
<script>
jQuery(document).ready(function() {
  $.get( "/import_contacts", function(data) {
    window.location.replace("/")
  });
});
</script>

<% title 'importing your contacts' %>

<h1>Please wait while we import your contacts</h1>
<%= image_tag('images/saving.gif') %> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T12:58:51.453

单个请求接收单个响应 - 您无法呈现内容和重定向。

如果我是你，我总是会在延迟工作中做冗长的过程——捆绑乘客/独角兽实例从来都不是一个好主意。呈现一个定期刷新的“请等待页面”以检查延迟作业是否已完成（如果您存储延迟作业的 id，您可以测试它是否仍在数据库中。当作业完成时，它将被删除）。作业完成后，重定向到结果页面。您还可以通过 ajax 进行定期检查。

# c# - C# GDI+ DrawString() 与 StringBuilder？

> ID：10053700
> 
> 赞同：1
> 
> 时间：2012-04-07T10:32:25.853
> 
> 标签：c#, garbage-collection, gdi, stringbuilder

是否有可能使用 GDI 将字符串绘制到使用 StringBuilder 而不是字符串的图像上？没有接受 StringBuilder 的 Graphics.DrawString() 重载。但在某些情况下，常规字符串会显着增加 GC 时间（根据 CLR Profiler，在我的情况下为 52%）。

注意：我不想使用从 4.0 开始支持 StringBuilders 的 XNA 框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T09:07:20.293

我不相信不使用一些替代图形库是可能的。

由于 .NET 4.0，内部`StringBuilder`不[使用`String`类](https://stackoverflow.com/questions/3564906/how-the-stringbuilder-class-is-implemented-does-it-internally-create-new-string)（即使使用反射也无法提取`String`对象）。

你是对的，调用`myStringBuilder.ToString()`会导致性能下降；它本质上是在每次调用它时复制你的字符串。但是在调用的代码中`Graphics.DrawString()`，我只是不认为这是一个瓶颈。

# php - 如何避免字符串中的“&”运算符

> ID：10053702
> 
> 赞同：2
> 
> 时间：2012-04-07T10:33:02.113
> 
> 标签：php, html

我有以下一段代码。

```
<?php
    $agentId = "LTH001";
    echo "&&" . $agentId;
?> 
```

输出是`&<H001`我预期的`&&LTH001`。我想有一个转换问题导致这个输出。为什么我会得到意外的输出？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T10:35:48.710

你的输出是：`&&LTH001`.

您的浏览器看到`&LT`并将其解释为字符代码（尽管格式错误），并将其替换为`<`.

请查看源代码或`htmlspecialchars`下次使用；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T10:35:49.753

您应该使用[http://www.php.net/htmlspecialchars](http://www.php.net/htmlspecialchars)以避免对不需要的字符串进行 HTML 转换：

```
echo htmlspecialchars("&&".$agentId); 
```

# ruby-on-rails - 在 Rails 3.2 中使用 .build 方法时如何设置 ActiveRecord 模型属性（多对多）

> ID：10053703
> 
> 赞同：1
> 
> 时间：2012-04-07T10:33:57.693
> 
> 标签：ruby-on-rails, ruby, activerecord

我正在使用 Rails 开发一种项目管理应用程序（我的 Rails 技能有点生疏）。我有两个模型对象，在本例中为 User 和 Account，它们具有多对多关系（Company 可能是 Account 的更好名称）。当用户注册一个新帐户时（使用 .build）创建一个嵌套表单的帮助。Account 模型有两个字段 name 和 account_admin。当初始用户创建它的帐户时，我想将 account_admin 设置为用户 ID。但我无法让它工作。

模型设置如下：

```
class Account < ActiveRecord::Base
  attr_accessible :name, :account_admin

  validates_presence_of :name 

  has_many :projects, dependent: :destroy
  has_many :collaborators
  has_many :users, through: :collaborators
end 

class User < ActiveRecord::Base
  has_secure_password
  attr_accessible :email, :name, :password, :password_confirmation, :accounts_attributes

  has_many :collaborators
  has_many :accounts, through: :collaborators
  accepts_nested_attributes_for :accounts
  [...] 
```

用户控制器看起来像这样：

```
def new
  if signed_in?
    redirect_to root_path
  else
    @user = User.new
    # Here I'm currently trying to set the account_admin value, but it seems to be nil. 
    account = @user.accounts.build(:account_admin => @user.id)
  end
end 
```

我也尝试过`account = @user.accounts.build(:account_admin => @user.id)`创建操作，但该字段从表单中消失了。

什么是完成我想要的适当方法（在创建时将 account_admin 设置为用户 ID）？还是有更好的方法来找出哪个用户创建了帐户（即对关系表做一些事情）？

**更新**

在@joelparkerhenderson 的帮助下，我想我已经成功了。我在我的用户模型中创建了一个方法，如下所示：

```
def set_account_admin
  account = self.accounts.last
  if account.account_admin == nil
    account.account_admin = self.id
    account.save
  end
end 
```

我打电话给`after_create :set_account_admin`. 这行得通，但是有没有更多的“Rails 方式”来做同样的事情？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T11:57:18.793

当您调用`#new`时，用户还没有 id（它是 nil）。

当你`#save`成为用户时，Rails 会自动给用户一个新的 id。

然后，您可以使用`after_create`Active Record 回调设置新帐户的`account_admin`

# asp.net-mvc - ASP.NET MVC：在控制器中访问 HttpContext 好吗？

> ID：10053713
> 
> 赞同：0
> 
> 时间：2012-04-07T10:35:18.493
> 
> 标签：asp.net-mvc, unit-testing, webforms

我使用 ASP.NET(WebForm) 已经有一段时间了，但对 ASP.NET MVC 来说是新手。从我读过的许多文章中，在大多数情况下，控制器难以测试的原因是因为它们正在访问运行时组件：HttpContext（包括请求、响应......）。在控制器中访问 HttpContext 似乎很糟糕。

但是，我必须在某个地方访问这些组件，从 Request 中读取输入，通过 Response 将结果发回，并使用 Session 来保存一些状态变量。

那么如果我们不在控制器中访问它们，那么访问这些运行时组件的最佳位置在哪里呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T10:50:24.427

当您在控制器中调用模型方法时，Request 和 Response 对象携带相同的值或输出到相同的源。“页面”对这些对象来说很重要。

还有一件事，`Request`和`Session`对象`Response`可能不会在您的模型中直接引用，因此您可以使用它`System.Web.HttpContext.Current`来获取对象。它们的功能与从控制器调用的相同。

**控制器是视图和模型之间的桥梁**，**即使这些对象中没有任何响应或请求值，模型也应该工作**，所以我会使用这些对象的值作为**建模方法的常用参数，**而不是引用它们模型内部。这是 MVC 概念的正确用法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T11:24:33.590

如果您真的必须从控制器访问这些对象，您总是可以将它们抽象出来并注入它们的模拟实例，以将您的测试隔离到控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T17:24:15.993

在 MVC 中，HttpContext 实际上是 HttpContextBase。直接使用这些类是完全可以的。如果您需要稍后测试您的控制器，您可以非常轻松地模拟这些类。

[http://www.hanselman.com/blog/ASPNETMVCSessionAtMix08TDDAndMvcMockHelpers.aspx](http://www.hanselman.com/blog/ASPNETMVCSessionAtMix08TDDAndMvcMockHelpers.aspx)

我认为你想做的事情没有错。

> 在控制器中访问 HttpContext 似乎很糟糕。

不，不是，它只需要你考虑如何测试你的行为。如果你不测试，那么你可能甚至没有问题。我建议你测试。

# java - 在 JTable 中只显示一列

> ID：10053720
> 
> 赞同：0
> 
> 时间：2012-04-07T10:35:54.200
> 
> 标签：java, swing, jtable

我有一个列表，需要显示为数据。但是[JTable](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JTable.html) with 接受数据作为`Object[][]`，但会给出`Object[]`。

如何在表格中只显示一列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T10:41:12.433

也许尝试以下...

```
DefaultTableModel model = new DefaultTableModel();
model.addColumn("MyColumnHeader",dataArray);
JTable table = new JTable(model); 
```

# android - 使用光标android获取自定义itemsAdapter id

> ID：10053722
> 
> 赞同：0
> 
> 时间：2012-04-07T10:36:18.963
> 
> 标签：android, database, cursor, cursor-position, custom-adapter

我正在尝试使用带有 sqlite 的自定义 itemsAdapter 将单击的项目传递给另一个活动，即从 A 到 B。

我怎样才能实现以下目标？

1）使用光标获取项目点击位置 2）将点击的项目传递给另一个活动

我正在尝试与[此](http://coenraets.org/blog/android-samples/androidtutorial/)示例类似，但使用我自己的自定义适配器到目前为止我已经完成了以下操作。

活动一：

```
public void onListItemClick(ListView parent, View view, int position, long id) {
Intent intent = new Intent(this,F32Activity.class);
Cursor cursor = (Cursor) itemsAdapter.getItem(position);
intent.putExtra("PROPERTY_ID", cursor.getInt(cursor.getColumnIndex("_id")));

startActivity(intent);
return;
 } 
```

活动 B：

```
 propertyId = getIntent().getIntExtra("PROPERTY_ID", 0);
    System.out.println(employeeId);
    SQLiteDatabase db = (new Helper(this)).getWritableDatabase();
    Cursor cursor = db
            .rawQuery("SELECT * from my_table WHERE pro._id = ?",
                    new String[] { "" + propertyId }); 
```

添加了适配器

```
private void getItemId(int position) {
    // TODO Auto-generated method stub

}

private void getDataAndPopulate() {
    // TODO Auto-generated method stub
    image = new ArrayList<byte[]>();       
    bedrooms= new ArrayList<String>();
    address= new ArrayList<String>();
    propType= new ArrayList<String>();

    Cursor cursor = getEvents(" gall,properties where  properties._id = gall._id  " );

    while (cursor.moveToNext()) {
        //String temp_id = cursor.getString(0);
        byte[] temp_image = cursor.getBlob(2);
        String temp_identifier = cursor.getString(1);
        String temp_price = cursor.getString(3);
        String temp_bedrooms = cursor.getString(4);
        String temp_address = cursor.getString(5);
        String temp_propType = cursor.getString(6);

        image.add(temp_image);
        //System.out.println(image);

        bedrooms.add(temp_bedrooms);
        address.add(temp_address);
        propType.add(temp_propType);

}
    String[] identifierArray = (String[]) bedrooms.toArray(new String[bedrooms
                                                                    .size()]);
   itemsAdapter = new ItemsAdapter(PropertyResult.this,
   cursor, R.layout.activity_f9, identifierArray);
   setListAdapter(itemsAdapter);

}

private class ItemsAdapter extends BaseAdapter {
    String[] items;

    public ItemsAdapter(Context context, Cursor cursor,int textViewResourceId,
            String[] items) {
        this.items = items;
    }

    public View getView(final int POSITION, View convertView,
            ViewGroup parent) {
        TextView desc;
        TextView cap;
        TextView ident;
        TextView pric;
        TextView bedroom;
        TextView addres;
        TextView propertytyp;
        View view = convertView;
        ImageView img;
        if (view == null) {
            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = vi.inflate(R.layout.activity_f9, null);

        }
        img = (ImageView) view.findViewById(R.id.image);        

        bedroom = (TextView) view.findViewById(R.id.bedrooms);
        addres = (TextView) view.findViewById(R.id.address);
        propertytyp = (TextView) view.findViewById(R.id.propertytype);          

        bedroom.setText("£"+bedrooms.get(POSITION));
        addres.setText(address.get(POSITION));
        propertytyp.setText(propType.get(POSITION));

        img.setImageBitmap(BitmapFactory.decodeByteArray(
        image.get(POSITION), 0, image.get(POSITION).length));

        return view;

    }

    public int getCount() {
        return items.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }
} 
```

请给我一个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T10:39:28.960

在`onListItemClick()`您已经拥有游标的行 ID 中，是第 4 个参数`id`（这仅适用于游标适配器）。

首先还要创建`ArrayList`并将保存`long`值（来自光标的行ID）：

```
ids = new ArrayList<Long>();
//...
while (cursor.moveToNext()) {
   String temp_id = cursor.getString(0);// if 0 is your column containing the id(check it)
   ids.add(temp_id);
   //...
} 
```

然后在您的适配器中覆盖该方法并根据提供的位置`getItemId`返回`long`值：`ids` `ArrayList`

```
 public long getItemId(int position) {
        return ids.get(position);
    } 
```

然后在你`onListItemClick()`简单地使用`id`参数：

```
public void onListItemClick(ListView parent, View view, int position, long id) {
   Intent intent = new Intent(this,F32Activity.class);
   intent.putExtra("PROPERTY_ID", id);
   startActivity(intent);
} 
```

然后在接收活动中：

```
propertyId = getIntent().getLongExtra("PROPERTY_ID", 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T10:47:16.560

你的 on Item 应该是这样的

```
public void onItemClick(AdapterView<?> arg0, View arg1, int position,
        long arg3) {

    String strEventName, strEventDate;
    int Id;
    Cursor c = (Cursor) arg0.getAdapter().getItem(position);
    intent.putExtra("PROPERTY_ID", cursor.getInt(cursor.getColumnIndex("_id")));
    startActivity(intent);} 
```

# batch-file - 从xml文件中读取坐标

> ID：10053724
> 
> 赞同：0
> 
> 时间：2012-04-07T10:36:56.107
> 
> 标签：batch-file, readfile

我有这个脚本，用来读取 xml 文件。该文件包含坐标，我想列出坐标：

```
@echo off
setlocal EnableDelayedExpansion

FOR %%K IN (*.xml) DO (
SET K=%%K
SET K=!K:~0,-4!
SET "prep=0"

    REM READ DATA
    FOR /F "tokens=*" %%X IN (!K!.kml) DO (
    if !prep! == 1 (
    echo %%X
    pause
      FOR /F %%L IN ("%%X") DO (
      SET L=%%L
      IF NOT "!L:~0,1!" == "<" (
        echo %%L
        )       
      )
      SET "prep=0"
    )
    if "%%X" == "<coordinates>" ( SET "prep=1" )
    )
) 
```

我得到了这些结果：

```
14.63778004128814,49.50141683426452,0 14.63696238385996,49.48348965654706,0 14.6
8840586504191,49.47901033971912,0 14.68589371304878,49.49939179836829,0 14.63778
004128814,49.50141683426452,0 </coordinates>
Press and key to continue...
14.63778004128814,49.50141683426452,0
Press and key to continue... 
```

首先，您会看到带有坐标的线。其次，在第三个循环中，打印了坐标。但是我只打印了一对坐标...如果我再次按下一个键，则批处理完成而不打印下一列。你能帮我吗？

**编辑** 发布答案后，我有问题1）我们可以使用这个：

```
SET LF=^

setlocal EnableDelayedExpansion
... (next code) ...
set "var=!var: =%LF%!" 
```

所以当没有延迟的LF变量时，我们可以嵌入它。或不？

2）为什么在你的代码中

```
for %%L in ("!LF!") do set "X=!X: =%%~L!" 
```

你有没有使用 %%~L 而不仅仅是 %%L

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T13:31:19.563

您的直接问题是 FOR /F 不会在一行中迭代标记。它只是解析您要求的每个令牌。如果你没有指定“tokens”选项，那么它默认为“tokens=1”——它只解析行中的第一个token。

但是，如果字符串包含换行符，FOR /F 会将字符串视为多行。然后它会像你想要的那样迭代每一行。诀窍是用换行符替换你的空格分隔符。有多种方法可以完成这项工作，但我将展示我认为最容易使用的方法。

首先定义一个包含单个换行符的变量

```
set LF=^

::The two blank lines above are critical for the definition of the line feed 
```

下一个技巧是用换行符替换变量中的空格。通常使用变量进行替换的替换看起来像`set "var=!var:search=%replaceVar%!"`. 但这不适用于 LF 变量 - 使用正常扩展很难使用 LF 变量。使用延迟扩展要容易得多。我们不能在延迟扩展中嵌入延迟扩展，但是我们可以将 LF 的值传递给一个简单的 FOR 变量并使用`for %%L in ("!LF!") do set "var=!var: =%%~L!"`

关于您的代码的一件事我不明白 - 您的初始 FOR 循环正在遍历所有 .KML 文件。您使用子字符串操作剥离扩展名。有一种更简单的方法可以在不使用环境变量的情况下做到这一点：`%%~nK`将给出不带扩展名的文件的基本名称。但是，当您转身并再次附加扩展名时，为什么要这样做呢？

我直接使用了 %%K 值——我添加了 USEBACKQ 选项并添加了引号以允许文件名中包含空格。

这是应该做你所期望的代码。

```
@echo off
setlocal EnableDelayedExpansion

::define a variable containing a linefeed character
set LF=^

::Above 2 blank lines are part of the LF definition, do not remove

for %%K in (*.kml) do (
  set "prep=0"
  for /f "usebackq tokens=*" %%X in ("%%K") do (
    if !prep! == 1 (
      echo %%X
      pause
      set "ln=%%X"
      for %%L in ("!LF!") do set "ln=!ln: =%%~L!"
      for /f %%L in ("!ln!") do (
        set L=%%L
        if not "!L:~0,1!" == "<" (
          echo %%L
        )
      )
      set "prep=0"
    )
    if "%%X" == "<coordinates>" ( set "prep=1" )
  )
) 
```

但是 - 我认为你有一个更大的问题。我担心您会通过使用批处理来解析 XML，从而让自己陷入痛苦的境地。您假设 XML 将始终以相同的方式布局。在 XML 文档中添加或减少换行符和空格的有效方法有无数种，它们会破坏您的算法。你能确定你所有的输入文件都来自同一个源并且总是按照你期望的那样格式化吗？我认为您确实应该使用 XSLT 将您的 XML 文档解析并转换为一个赤裸裸的坐标列表。

***其他问题的答案***

1)`set "var=!var: =%LF%!"`不起作用 - LF 的常规扩展需要转义序列和多次扩展。这将起作用：`set "var=!var: =^%LF%LF%!"`

%LF% 的转义序列可能会变得非常棘手，所以我尽量避免使用它们。

2) 关于`for %%L in ("!LF!") do set "X=!X: =%%~L!"`，请注意它是一个简单的 FOR，而不是 FOR /F。！LF！必须引用，否则 FOR 不会读取它。但是 FOR 语句保留了引号（与 FOR /F 不同），所以我需要 %%~L 来删除封闭的引号。

FOR 和 FOR /F 在换行方面有一个非常重要的区别。FOR 将保留引用的换行符，而 FOR /F 将换行符视为行分隔符并迭代每一行，因此不保留换行符。

# php - 如何使用两个以上的“WHERE”子句？MYSQL 错误

> ID：10053728
> 
> 赞同：1
> 
> 时间：2012-04-07T10:37:21.577
> 
> 标签：php, mysql, select

我用它来处理 PHP。

错误：-

`You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1`

**编辑1：**

```
$SQLQUERY = sprintf("SELECT pd_serial FROM product_details WHERE pd_model_type=%s AND pd_model_name=%s AND pd_model_version=%s AND pd_product_group=%s LIMIT 1",
GetSQLValueString($modeltype, "text"),
GetSQLValueString($modelname, "text"),
GetSQLValueString($modelversion, "text"),
GetSQLValueString($modelgroup, "text"));
$QUERYEXEC =  mysql_query($SQLQUERY, $dacreint) or die("OOPS! Please try again.");

while ($QUERYFETCH = mysql_fetch_array($QUERYEXEC))
{
    $pdserial = $QUERYFETCH['pd_serial'];
} 
```

**编辑2：**

```
while ($QUERYFETCH = mysql_fetch_array($QUERYEXEC))
{
    $pdserial = $QUERYFETCH['pd_serial'];
}
$SQLQUERY = sprintf("SELECT product_serial_no FROM products WHERE product_serial_no = '$product_serial_no'");
$TCcount_QE = mysql_query($SQLQUERY, $dacreint) or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T10:48:59.067

您应该将字符串放在单引号内。并确保您已经使用`mysql_real_escape_string()`或类似的函数转义了这些字符串值

```
SELECT pd_serial FROM product_details WHERE (pd_model_type='%s' AND pd_model_name='%s') AND (pd_model_version='%s' AND pd_model_group='%s') LIMIT 1 
```

**更新 1**

```
 while ($QUERYFETCH = mysql_fetch_array($QUERYEXEC))
            {
                $pdserial = $QUERYFETCH['pd_serial'];
            }
    // let's comment out the following line
        //    $SQLQUERY = sprintf("SELECT product_serial_no FROM products WHERE product_serial_no = '$product_serial_no'");
// and modifying it as:
            $SQLQUERY = sprintf("SELECT product_serial_no FROM products WHERE product_serial_no = %s", GetSQLValueString($product_serial_no, "text"));
            $TCcount_QE = mysql_query($SQLQUERY, $dacreint) or die(mysql_error()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T10:48:39.987

这是正确的查询

```
SELECT pd_serial FROM product_details WHERE pd_model_type=%s AND pd_model_name=%s AND pd_model_version=%s AND pd_model_group=%s LIMIT 1 
```

已编辑

```
SELECT pd_serial FROM product_details WHERE pd_model_type like '%s' AND pd_model_name like '%s' AND pd_model_version like '%s' AND pd_model_group like '%s' LIMIT 1 
```

抱歉，我忘了把类似的条件括在括号中，我错过了，因为我们在这里使用了通配符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T10:46:24.080

您能否添加“渲染”查询？您的参数是否应该在“%s”中设置在引号中？

顺便说一句：您不必在完全“与”链接的 WHERE 语句中设置括号。

# javascript - 切换地图类型时显示“没有此比例的地图数据”而不是更改缩放

> ID：10053729
> 
> 赞同：1
> 
> 时间：2012-04-07T10:37:29.253
> 
> 标签：javascript, google-maps, google-maps-api-3, gis

在谷歌地图 API v3 中，我通过调用创建自己的自定义地图类型

```
map.mapTypes.set('my map', new google.maps.ImageMapType({
    getTileUrl: ...
    minZoom: 12,
    maxZoom: 20,
    ...
})); 
```

图层当然具有有限的缩放范围（本例中为 12-20）。现在问题是谷歌地图的默认行为。例如，当我看到比例为 7 的地图并切换到我的地图时，**地图会自动放大到缩放 12**。

相反，当我在缩放 7 并切换到我的地图时，**我希望看到带有文本“没有此比例的地图数据，请放大”的图块。**

*   是否有一些标准选项/方法如何在 API v3 中执行此操作？
*   这个问题有一些常用的解决方案吗？
*   如果没有，最简单的方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T11:03:46.383

避免`minZoom`和`maxZoom`选项并尝试这样的事情：

```
map.mapTypes.set('my map', new google.maps.ImageMapType({
    getTileUrl: function( position, zoom ){
        if( zoom >= 12 && zoom <= 20 ){
            return "http://example.com/tileservice?x="+position.x+"&y="+position.y+"&zoom="+zoom;
        }else{
            return "http://example.com/no_map_data_in_this_scale_please_zoom_in.png";
        }
    },
    ...
})); 
```

# javascript - 在jQuery中获取输入值

> ID：10053731
> 
> 赞同：1
> 
> 时间：2012-04-07T10:37:36.103
> 
> 标签：javascript, jquery, input

单击复选框时，我想重定向到另一个页面。

```
<script type="text/javascript"><!--
$(document).ready(function(){
    jQuery(".cbno").click(function(e){
        e.preventDefault();
        alert('test');
        alert(this.val());
//      window.location = this.val();
    });
});
//-->
</script>

<input type="checkbox" class="cbno" name="content" value="/map/?filter=all" /> 
```

很简单——但我不明白为什么第二个警报没有产生任何输出？Internet Explorer 说：“该对象不支持方法 val”。

如果我使用 this.getAttribute('value') 它可以工作 - 为什么它不能与 jquery val() 一起工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T10:41:51.450

采用

```
alert(jQuery(this).val()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T10:41:09.083

任何一个`$(this).val()`或`$(this).attr("value")`或`this.getAttriute("value")`或`this.value`将起作用

请在 $() 和 jQuery() 上保持一致

```
<script type="text/javascript"><!--
$(document).ready(function(){
    $(".cbno").click(function(e){
        e.preventDefault();
        window.location = $(this).val();
    });
});
//-->
</script>

<input type="checkbox" class="cbno" name="content" value="/map/?filter=all" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T10:40:09.250

因为这不是一个 jQuery 对象。你需要使用 $(this).val();

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T10:40:22.377

改变：

```
alert(this.val()); 
```

到：

```
alert($(this).val()); 
```

`$(this)`指您所追求的复选框。

* * *

您也可以简单地使用：

```
this.value 
```

* * *

所以你可以像这样修改你的代码：

```
$(document).ready(function(){
    jQuery(".cbno").click(function(e){
        e.preventDefault();
        alert(this.value);
        //window.location = this.value;
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-07T10:40:53.063

```
$(document).ready(function(){
    jQuery(".cbno").click(function(e){
        e.preventDefault();
        alert('test');
        alert( $(this).val());
//      window.location = $(this).val();
    });
}); 
```

事件中的 this 函数是指向 DOM 元素的链接，因此您应该使用它的方法创建一个 jQuery 对象来获取它们

# google-chrome-extension - 为什么“等待”或“等待”在我的代码中消失了？

> ID：10053736
> 
> 赞同：0
> 
> 时间：2012-04-07T10:38:12.980
> 
> 标签：google-chrome-extension

好的，我已将代码更新为尽可能小，但仍然出现错误……尽管现在问题不太正确……现在应该是“为什么 waitFor 跳出沙箱？” （但我被告知不要更改帖子的问题，如果这是不好的形式，对不起）。如果您安装此扩展程序并按照以下说明进行操作，您将看到 waitFor 被转移到内容脚本沙箱之外。
要查看此错误.....
转到....
[https://www.facebook.com/groups/382415791793391/](https://www.facebook.com/groups/382415791793391/)
..等待页面完全加载。
然后单击选项卡“Testy Testy”以使页面刷新。
看看控制台，你会看到“你不应该看到这个”。
我的控制台输出看起来像这样......

```
chekcpage
waitFor
(19)waitFor
pop
attach contentNodeRemoved
chekcpage
waitFor
removing
added
attach contentNodeRemoved
chekcpage
waitFor
(156+)You shouldnt be able to see this 
```

**myscript.js**

```
script = function(old) {
    window.variableInUnsafeWindow = "You shouldnt be able to see this";
}
function exec(fn) {
    var script = document.createElement('script');
    script.setAttribute("type", "application/javascript");
    script.textContent = '(' + fn + ')();';
    document.documentElement.appendChild(script); // run the script
    document.documentElement.removeChild(script); // clean up
}
exec(script);

window.onpopstate = function(event) {
    console.debug('pop');
    checkPage();
};

function waitFor(query, delay) {
    if (typeof(variableInUnsafeWindow) == "undefined") {
        console.debug('waitFor');
        found = document.documentElement.querySelector(query);
        if (!found) {
            window.setTimeout("(" + waitFor + ")('" + query + "'," + delay + ");", delay);
        }
    } else {
        console.debug(variableInUnsafeWindow);
        window.setTimeout("(" + waitFor + ")('" + query + "'," + delay + ");", delay);
    }
}

function contentNodeRemoved() {
    console.debug('removing');
    document.querySelector('div#contentCol').removeEventListener('DOMNodeRemoved', contentNodeRemoved, false);
    document.querySelector('div#contentCol').addEventListener('DOMNodeInserted', contentNodeAdded, false);
}

function contentNodeAdded() {
    console.debug('added');
    document.querySelector('div#contentCol').removeEventListener('DOMNodeInserted', contentNodeAdded, false);
    checkPage();
}

function checkPage() {
    if (document.querySelector('div#contentCol')) {
        console.debug('attach contentNodeRemoved');
        var node = document.querySelector('div#contentCol');
        node.addEventListener('DOMNodeRemoved', contentNodeRemoved, false);
    }
    console.debug('chekcpage');
    waitFor('ul#group_mall_382415791793391', 300);
}

checkPage(); 
```

**清单.json**

```
{
    "name": "Facebook - Group member ban icon",
    "description": "Puts an X after a users name on the groups page for banning.  Unfortunately the X show on groups your not an Admin of still.",
    "content_scripts": [{
        "matches": ["*://*.facebook.com/*"],
        "js": ["myscript.js"],
        "run_at": "document_start"
    }],
    "permissions": ["tabs"],
    "icons": {
        "16": "icon.png",
        "48": "icon48.png",
        "128": "icon128.png"
    },
    "version": "1.0"
} 
```

# c++ - 如何在不使用“L”和“R”方向数组的情况下构建二叉树

> ID：10053737
> 
> 赞同：0
> 
> 时间：2012-04-07T10:38:21.517
> 
> 标签：c++, c

我想在不使用具有左右方向指令的数组的情况下构建二叉树（不是 BST）。因为，它严格来说不会使树成为动态分配的树。您将受到数组大小的限制。能有什么出路吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T10:46:59.403

我不是 100% 确定我理解了你的问题，但如果它是**二进制**的，那么要求一棵树的子节点数（每个节点）可以动态增加或减少是没有意义的。

但是，如果这是您需要的，那么不要将指向子节点的指针存储在一个简单的数组中，而是使用一个列表。

# mysql - #1064 mysql 错误 - DOUBLE NOT NULL

> ID：10053740
> 
> 赞同：0
> 
> 时间：2012-04-07T10:38:40.070
> 
> 标签：mysql, sql, database, double

我正在尝试创建一个名为“cartable”的 sql 表。我目前正在通过 MAMP（Mac 版本的 WAMP）使用 phpmyadmin。

当我单击保存按钮时，会出现此错误：

```
 SQL query:

CREATE TABLE `cardatabase`.`CARTABLE` (
`ID` VARCHAR( 10 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL ,
`SLOTNUMBER` VARCHAR( 10 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL ,
`STATUS` ENUM( 1 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL ,
`LATITUDE` DECIMAL( 20 ) NOT NULL ,
`LONGITUDE` DECIMAL( 20 ) NOT NULL ,
`LOCATION` VARCHAR( 40 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL ,
`DEVICEID` VARCHAR( 20 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL
) ENGINE = InnoDB CHARACTER SET utf8 COLLATE utf8_general_ci;

MySQL said: Documentation
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '1) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL, `LATITUDE` DECIMAL(20) N' at line 1 
```

双数据类型似乎是一个问题，因为当我将其更改为 varchar 时，表已创建。还有其他方法吗？在此先感谢，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T10:42:10.033

你的问题出在这里：

```
`STATUS` ENUM( 1 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL , 
```

`enum`类型应该是字符串*对象*，而不是数字对象。

从[MySQL 文档](http://dev.mysql.com/doc/refman/5.6/en/enum.html)中，

> ENUM 是一个字符串对象，其值选自创建表时列规范中明确枚举的允许值列表。
> 
> 枚举值必须是带引号的字符串文字；它可能不是一个表达式，即使是一个计算为字符串值的表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T10:44:21.090

您在枚举行中有错误，您需要预先定义枚举值，如下所示：

`STATUS`ENUM('ravi', 'kotwani') 字符集 utf8 COLLATE utf8_general_ci NOT NULL ,

完整查询：

创建表`cardatabase`。`CARTABLE`( `ID`VARCHAR(10) 字符集 utf8 排序 utf8_general_ci 非空， `SLOTNUMBER`VARCHAR(10) 字符集 utf8 排序 utf8_general_ci 非空， `STATUS`枚举('ravi'，'kotwani') 字符集 utf8 排序 utf8_general_ci 非空， `LATITUDE`十进制(20) 非空 `LONGITUDE`DECIMAL（20）非空， `LOCATION`VARCHAR（40）字符集utf8整理utf8_general_ci非空， `DEVICEID`VARCHAR（20）字符集utf8整理utf8_general_ci非空）引擎= InnoDB字符集utf8整理utf8_general_ci；

# objective-c - 如何使用 GLKMatrixStack？

> ID：10053742
> 
> 赞同：1
> 
> 时间：2012-04-07T10:38:59.797
> 
> 标签：objective-c, opengl-es, objective-c++, glkit

我正在编写一个在屏幕上绘制许多立方体的 iOS 游戏，但我在定位立方体时遇到了问题。

我有一个`draw_voxel`绘制立方体的函数：

```
void draw_voxel(Point location, Color color, GLKMatrixStackRef stack) {
  GLKMatrixStackPush(stack);
  GLKMatrixStackTranslate(stack, location.x, location.y, location.z);

  std::array<Color, 36> triangle_colors;
  triangle_colors.fill(color);

  glEnableVertexAttribArray(GLKVertexAttribPosition);
  glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, 0, static_cast<const GLvoid*>(triangle_vertices.data()));
  glEnableVertexAttribArray(GLKVertexAttribColor);
  glVertexAttribPointer(GLKVertexAttribColor, 4, GL_FLOAT, GL_FALSE, 0, static_cast<const GLvoid*>(triangle_colors.data()));
  glDrawArrays(GL_TRIANGLES, 0, 36);
  glDisableVertexAttribArray(GLKVertexAttribPosition);
  glDisableVertexAttribArray(GLKVertexAttribColor);

  GLKMatrixStackPop(stack);
} 
```

我通过它 a `GLKMatrixStackRef`，将当前矩阵推到顶部并用于`GLKMatrixStackTranslate`转换顶部矩阵。但是，所有立方体仍然在 (0, 0, 0) 处绘制。

我`draw_voxel`这样称呼：

```
[self.effect prepareToDraw];

GLKMatrixStackRef stack = GLKMatrixStackCreate(nullptr);
draw_voxel(Point(-1.0f, 0.0f, 0.0f), Color(1.0f, 0.0f, 0.0f, 1.0f), stack);
draw_voxel(Point(+0.0f, 0.0f, 0.0f), Color(0.0f, 1.0f, 0.0f, 1.0f), stack);
draw_voxel(Point(+1.0f, 0.0f, 0.0f), Color(0.0f, 0.0f, 1.0f, 1.0f), stack);
CFRelease(stack); 
```

我在互联网上找不到任何关于 GLKit 矩阵堆栈的有用信息，我真的被困住了。如何“应用”顶部矩阵以便平移立方体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T16:16:59.920

虽然我还没有完全掌握如何使用 GLKMatrixStack，但查看您的代码，我认为问题在于您没有将堆栈的顶部矩​​阵传递给着色器，或者用 GLKit 的话来说，您没有正确配置效果. 也许，在某些时候你应该做类似的事情：

```
self.effect.transform.modelviewMatrix = GLKMatrixStackGetMatrix4(stack); 
```

希望这有帮助，我也被困在那个堆栈上:)

# html - 带框架的力域

> ID：10053743
> 
> 赞同：0
> 
> 时间：2012-04-07T10:39:07.447
> 
> 标签：html, redirect, seo, dns, frames

我已经在[Loopia注册了](https://www.loopia.com/)*domain.com*并使用了他们的“重定向”，它实际上在一个框架中打开了一个网站——在这种情况下是*mysite.com/domain*。但是，如果我访问*mysite.com/domain*我想重定向到*domain.com*。

 ***这可能吗？它会如何影响搜索引擎？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T10:55:37.230

您可以**停放您的域**而不是**重定向**它或在 iframe 中打开您的网站。当您停放您的域时，实际上您的新域包含以前域中的所有数据，我认为这是一种更好的方法。

此外，您不会失去任何页面排名或 SEO 排名。***

# concurrency - 连接语言和并发 - 原则上有困难吗？

> ID：10053746
> 
> 赞同：2
> 
> 时间：2012-04-07T10:39:14.057
> 
> 标签：concurrency, actor, concatenative-language, factor-lang

[连接语言](http://concatenative.org/wiki/view/Concatenative%20language)中的并发性是否存在原则问题，还是只是缺少？

还是我只是错过了什么？

据我所知，目前最先进的连接语言是Factor，它仍然只有[*一个不使用多核的协作线程系统*](http://factor-language.blogspot.de/2008/02/some-changes-to-threads.html)。

也许 Factor 的发明者 Slava Pestiv 已经被 Google 消耗得如此之多，以至于他根本没有时间创建一个多核版本。

据我了解，演员模型应该非常适合连接语言。然而，这是一个相当困难的领域。知道什么样的模型会很好用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:12:08.293

[您可以将GreenArrays 芯片](http://www.greenarraychips.com/)的 144 个内核视为使用内核之间消息传递的“参与者”。实际上，这正是芯片的使用方式。一个单一的问题被分解成小的，同时运行的通信部分。这些都是在 Forth 中编程的，可以被认为是一种连接语言。

# c++ - Qt 当DOM由于ajax而改变时发出哪个信号

> ID：10053753
> 
> 赞同：0
> 
> 时间：2012-04-07T10:40:13.217
> 
> 标签：c++, ajax, qt, dom, signals-slots

在 QWebView 中，当页面的 DOM 结构发生变化时，会发出哪个信号？例如，ajax 表单可以在现有页面上生成新的 DOM 元素，而无需重新加载 URL 或其他内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T20:06:32.207

没有专门针对 DOM 更改发出信号。解决该问题的一种方法是，当我知道该事件何时发生时，我在加载页面时发出 loadFinished 信号后立即启动 QTimer，并将其超时信号连接到将再次发出 loadFinished 信号的函数。QTimer 的超时值是我知道更改发生时应该经过的时间。

# python - Python unicode 搜索未给出正确答案

> ID：10053756
> 
> 赞同：1
> 
> 时间：2012-04-07T10:40:47.393
> 
> 标签：python, unicode, unicode-string, hindi

我正在尝试搜索文件 1 中每个文件包含一行的印地语单词，并在文件 2 中的行中找到它们。我必须用找到的字数打印行号。这是代码：

```
import codecs

hypernyms = codecs.open("hindi_hypernym.txt", "r", "utf-8").readlines()
words = codecs.open("hypernyms_en2hi.txt", "r", "utf-8").readlines()
count_arr = []

for counter, line in enumerate(hypernyms):
    count_arr.append(0)
    for word in words:
        if line.find(word) >=0:
            count_arr[counter] +=1

for iterator, count in enumerate(count_arr):
if count>0:
    print iterator, ' ', count 
```

这是查找一些单词，但忽略了其他一些输入文件是： File-1：

```
पौधा  
वनस्पति 
```

文件 2：

```
वनस्पति, पेड़-पौधा  
वस्तु-भाग, वस्तु-अंग, वस्तु_भाग, वस्तु_अंग  
पादप_समूह, पेड़-पौधे, वनस्पति_समूह  
पेड़-पौधा 
```

这给出了输出：

```
0 1  
3 1 
```

显然，它忽略了वनस्पति，只搜索पौ​​धा。我也尝试过其他输入。它只搜索一个词。知道如何纠正这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T10:59:03.397

我认为问题出在这里：

```
words = codecs.open("hypernyms_en2hi.txt", "r", "utf-8").readlines() 
```

`.readlines()`将在末尾留下换行符，因此您不是在搜索 पौधा，而是在搜索`पौधा\n`，并且只会在行尾匹配。如果我`.read().split()`改用，我会得到

```
0   2
2   1
3   1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T11:20:11.017

那是因为您没有删除行尾的“\n”字符。所以你不要搜索“some_pattern\n”，而不是“some_pattern”。使用 strip() 函数将它们切断，如下所示：

```
import codecs

words = [word.strip() for word in codecs.open("hypernyms_en2hi.txt", "r", "utf-8")]
hypernyms = codecs.open("hindi_hypernym.txt", "r", "utf-8")
count_arr = []

for line in hypernyms:
    count_arr.append(0)
    for word in words:
        count_arr[-1] += (word in line)

for count in enumerate(count_arr):
    if count:
        print iterator, ' ', count 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T11:33:58.233

输入此代码，您将看到为什么会发生这种情况，因为有空格：在文件 1 中，第一个单词是 पौधा[space]....

```
for i in hypernyms:
    print "file1",i

for i in words:
    print "file2",i 
```

在 count_arr = [] 之后和计数器之前，行...

# validation - 为什么Firefox中的DOCTYPE行是红色的？

> ID：10053758
> 
> 赞同：9
> 
> 时间：2012-04-07T10:41:04.173
> 
> 标签：validation, firefox, utf-8, doctype

我以前设计的网站没有问题，但现在我在 Firefox 11 中看到 DOCTYPE 行红色。验证没有问题。我将编码更改为没有 BOM 的 UTF-8，但问题仍然存在。

[http://validator.w3.org/check?uri=genelvana.com](http://validator.w3.org/check?uri=genelvana.com)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-19T11:33:12.123

是不是因为`Transitional`doctype 不再有效，除非您使用的是遗留代码？

当然现在如果你现在建立一个网站，你应该使用**strict**还是**html5**？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T10:57:18.323

同样在这里，而 Fx6 没有将其着色为红色。

悬停在第一行时，会出现一个工具提示，说

> 几乎标准模式的文档类型。应为“<!DOCTYPE html>”。

您可以放心地忘记这个“建议”恕我直言。要做的重要事情是选择一个有效的文档类型，然后编写符合该文档类型的代码，就像你已经做的那样。没有浏览器关心后面的内容，`html`所以相反也是正确的：没有浏览器关心后面是否有任何东西`html`；）
当然，*如果*您使用 HTML5 元素和技术（`nav`元素`canvas`或其他），那么可以使用 HTML5 文档类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-28T22:37:45.470

这与其说是错误，不如说是*警告*。Firefox 只是提醒您，您正在使用的 DOCTYPE XHTML 1.0 Transitional 触发了*几乎*标准模式，而不是标准模式。
如果您希望页面以标准模式显示，您只需将 DOCTYPE 更改为 XHTML 1.0 Strict 或 HTML 5。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T11:25:17.653

您可能会遇到一些 CSS 验证错误，例如小数像素值或缺少单位声明，如下所示：

```
div {left:3.545253px;} 
```

或者

```
div {left: 50;} 
```

这些会导致 html doctype 验证错误。检查您的 CSS 文件和 jQuery CSS 设置（如果有）。

# actionscript-3 - 管理数据、类或数组的首选方式？

> ID：10053763
> 
> 赞同：2
> 
> 时间：2012-04-07T10:41:54.740
> 
> 标签：actionscript-3, design-patterns

我正在 Flash 中制作基于回合的 RPG，使用 AS 3 作为语言，但我很确定无论您使用哪种语言，您都可以帮助我。

基本上，我的想法是将我所有的武器数据放在一个多维数组中。现在，如果我想将武器添加到我的库存中，很简单，我只需使用`inventoryArray.push(weaponArray[1])`Easy，我只是将武器添加到我的库存中。

我一直在研究设计模式，似乎大多数 OOP 设计都使用类并从超类继承。`Component-->Weapon-->Sword-->LongSword.`

我应该怎么做，将所有数据放在一个数组中或使用继承样式，一个类包含一个武器？

欢迎任何想法！我基本上知道如何制作游戏本身，只是我不知道我应该遵循的一些模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T10:54:59.233

游戏中的大多数对象都会有一些共同的属性——例如，它们可能都有一个 ID、一个名称和一个描述。

如果您不使用继承，您的所有类中都会包含这些重复信息，这将使您的游戏难以维护。

如果你确实使用继承，你可以在一个基类（可能是抽象的）中拥有所有这些公共属性，并让所有其他类继承自它。所以是的，你看到的设计模式是要走的路。

`inventoryArray.push(weaponArray[1])`此外，您还应该使用方法创建一个`Inventory`类，而不是 do `add()`。这将允许您在将对象添加到清单时调度事件。然后前端可以监听这个事件，例如，更新库存图形。一般来说，您永远不应该将通用 Flash 对象（数组、对象等）用于可能很复杂的对象，例如物品栏、角色等。使用您自己的自定义类可以让您在游戏变得更加复杂时轻松扩展它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T18:27:03.007

我会说组合而不是继承是要走的路。

有一个基本的游戏对象类可以扩展到武器、戒指、头盔、盾牌、药水等。这些都有一组可以通过继承来管理的限制（比如你只能将武器放在手中和库存中） ）。但是所有这些能力（它们如何影响角色）都应该通过组合来完成。每次将对象添加到腰带、手、头等时，它们都会通过构图影响角色。因此，当您处理角色的动作时，您不会遍历每个对象，您只需使用像攻击这样的复合函数，它具有应用部分角色动作的库存的所有功能。

* * *

您可以研究的另一种设计模式是装饰器模式。我发现结果与作曲非常相似。*“虽然装饰器模式允许我们在没有子类化的情况下向对象添加职责，但复合模式有一个不同的目标：构造类以便以相同的方式处理相关对象，并且可以将多个对象视为一个对象。”* [资源](http://pages.cpsc.ucalgary.ca/~ayala/SENG/seng609-04/Assignments/decoratorNcomposite.htm)

装饰器模式示例： [http ://www.as3dp.com/2011/06/well-armored-warrior-decorator-for-beginners/](http://www.as3dp.com/2011/06/well-armored-warrior-decorator-for-beginners/)

# c# - C#更改列表的排序算法

> ID：10053767
> 
> 赞同：0
> 
> 时间：2012-04-07T10:42:24.023
> 
> 标签：c#, sorting

有没有办法可以`List<string>`在 C# 中更改 a 的排序算法？

如果我有清单

```
List<string> Names = new List<string>(); 
```

排序时我打电话

```
Names.Sort(); 
```

我可以覆盖使用的默认算法吗？

第二个问题

在 ASP.NET MVC3 中构建 webgrid 的排序怎么样？Webgrid 内置了排序功能，如果您指定，`canSort=true`您可以单击标题，行将按字母顺序排序。有没有办法我也可以改变它？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T10:44:58.253

有`List<>.Sort()`接受自定义比较器的重载。

*   [排序（比较）](http://msdn.microsoft.com/en-us/library/w56d4y5z.aspx)
*   [排序（IComparer）](http://msdn.microsoft.com/en-us/library/234b841s.aspx)

# jquery - 如何添加 之前的标签 jquery中的标签

> ID：10053773
> 
> 赞同：0
> 
> 时间：2012-04-07T10:43:35.520
> 
> 标签：jquery

现在输出是这样的

```
 <li id="socialprofiles-2" class="widget social-profiles">
       <a href="http://www.facebook.com"></a>
       <a href="http://www.yahoo.com"></a>
 </li> 
```

但我需要这样做

```
 <ul>
 <li id="socialprofiles-2" class="widget social-profiles">
       <a href="http://www.facebook.com"></a>
       <a href="http://www.yahoo.com"></a>
 </li>
 </ul> 
```

我不知道如何在 Jquery 中做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T10:45:04.030

使用[`wrap`](http://api.jquery.com/wrap/)功能：

```
$('#socialprofiles-2').wrap('<ul />'); 
```

**[工作示例](http://jsbin.com/iboxiq)**（您必须使用 Firebug 来检查新添加的`ul`元素）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T10:45:49.490

您可以使用 jQuery 的[`.wrap()`](http://api.jquery.com/wrap/)方法，用另一个元素包装选定的元素。在您的情况下，您可以`li`通过其 ID 选择您的：

```
$("#socialprofiles-2").wrap("<ul />"); 
```

# java - 递归回溯

> ID：10053775
> 
> 赞同：4
> 
> 时间：2012-04-07T10:44:05.497
> 
> 标签：java, recursion, backtracking

我正在开发高级 Petri 网编辑器/模拟器。首先，这里有一点词汇

圆圈=**地方**

矩形 =**过渡**

就地整数 =**标记**

过渡条件 =**守卫**

我坚持通过过渡的守卫。Guard 是一个条件，如果要执行转换，则必须为真。我知道我应该以某种方式使用回溯，但我不知道在程序开始之前进入转换的位置数量，所以我不能使用 for 循环，因为我不知道我需要多少个循环。

这是说明问题的图片 ![在此处输入图像描述](../Images/79d0eaf5545e9cd961de1276b4b9b20e.png)

所以，我想从第一个地方拿第一个令牌，从第二个地方拿第一个令牌，然后尝试通过警卫，如果通过，然后保存令牌，并打破循环，如果为假，继续第二个地方的第二个令牌..等等...我终于以第一名的最后一个令牌（4）和第二名的最后一个令牌（2）通过了守卫。

我会知道如何编码，如果我有恒定数量的地方进入过渡，它看起来像这样

```
for token in place 1
     for token in place 2
        try pass guard
        if (passed) 
            save tokens
             break; 
```

但正如我之前所说，我没有固定数量的地方进入过渡，所以我不能使用这种方法。所以，基本上，我需要尝试令牌的组合，并尝试通过警卫 - 直到我通过警卫，或者直到我尝试了所有组合。你有什么想法 ？伪代码就足够了。顺便说一句，我使用这些数据结构

地点列表 - 普通 java 列表，List places = new ArrayList();

并且每个地方都有自己的token列表，List tokens = new ArrayList();

///编辑：守卫具有以下格式：

op1 rel op2，其中 op1 是变量，op2 是常量或变量，rel 是关系 (<,>,=,...) 保护中可以有多个条件与逻辑运算符 AND 连接 - 例如：op1 rel op2 **&&** op3 相对 op4 ...

- - 编辑：

所以我尝试实现 Rusil 算法，但它有很多错误，所以我发布了 SSCCE，所以你可以尝试一下，也许会有所帮助。

首先，创建 Place 类：

```
public class Place {
public List<Integer> tokens ;

//constructor
public Place() {

  this.tokens = new ArrayList<Integer>();  
}

} 
```

然后测试类：

```
public class TestyParmutace {

/**
 * @param args the command line arguments
 */
public static void main(String[] args) {
    // TODO code application logic here

    List<Place> places = new ArrayList<Place>();

    Place place1 = new Place();
    place1.tokens.add(1);
    place1.tokens.add(2);
    place1.tokens.add(3);
    places.add(place1); //add place to the list

    Place place2 = new Place();
    place2.tokens.add(3);
    place2.tokens.add(4);
    place2.tokens.add(5);
    places.add(place2); //add place to the list

    Place place3 = new Place();
    place3.tokens.add(6);
    place3.tokens.add(7);
    place3.tokens.add(8);
    places.add(place3); //add place to the list

//so we have
    //P1 = {1,2,3}
    //P2 = {3,4,5}
    //P3 = {6,7,8}

    List<Integer> tokens = new ArrayList<Integer>();

    Func(places,0,tokens);

}

/**
 * 
 * @param places list of places
 * @param index index of current place
 * @param tokens list of tokens
 * @return true if we passed guard, false if we did not
 */

public static boolean Func( List<Place> places, int index, List<Integer> tokens) 

{

if (index >= places.size())
{

// if control reaches here, it means that we've recursed through a particular combination
// ( consisting of exactly 1 token from each place ), and there are no more "places" left

String outputTokens = "";
for (int i = 0; i< tokens.size(); i++) {

    outputTokens+= tokens.get(i) +",";
}
System.out.println("Tokens: "+outputTokens);

if (tokens.get(0) == 4 && tokens.get(1) == 5 && tokens.get(2) == 10) {
System.out.println("we passed the guard with 3,5,8");
return true;
}

else {
    tokens.remove(tokens.get(tokens.size()-1));
    return false;
}

}

Place p = places.get(index);

for (int i = 0; i< p.tokens.size(); i++)
{

tokens.add(p.tokens.get(i));
//System.out.println("Pridali sme token:" + p.tokens.get(i));

if ( Func( places, index+1, tokens ) ) return true;

}
if (tokens.size()>0)
tokens.remove(tokens.get(tokens.size()-1));

return false;

}
} 
```

这是这段代码的输出：

```
Tokens: 1,3,6,
Tokens: 1,3,7,
Tokens: 1,3,8,
Tokens: 3,4,6,
Tokens: 3,4,7,
Tokens: 3,4,8,
Tokens: 4,5,6,
Tokens: 4,5,7,
Tokens: 4,5,8,
Tokens: 2,3,6,
Tokens: 2,3,7,
Tokens: 2,3,8,
Tokens: 3,4,6,
Tokens: 3,4,7,
Tokens: 3,4,8,
Tokens: 4,5,6,
Tokens: 4,5,7,
Tokens: 4,5,8,
Tokens: 3,3,6,
Tokens: 3,3,7,
Tokens: 3,3,8,
Tokens: 3,4,6,
Tokens: 3,4,7,
Tokens: 3,4,8,
Tokens: 4,5,6,
Tokens: 4,5,7,
Tokens: 4,5,8, 
```

所以，你看，有些组合是正确的，比如 1,3,6 和 1,3,7...但是 4,5,8 绝对是胡说八道，因为 4 甚至不是放在首位...也是完全缺失的组合......像2,4,6等......有人知道为什么会这样吗？

编辑：现在它工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T14:24:59.237

递归方法会很容易：

```
boolean Func( ListOfPlaces places, int index ) // index points to the current "place"
{

 If index >= NumberOfTokens (if index points to a place, which doesn't exist)
   {
   // if control reaches here, it means that we've recursed through a particular combination ( consisting of exactly 1 token from each place ), and there are no more "places" left. You have all the tokens you need, in your stack.

   try pass guard; if passed, save tokens and return true

   else, remove token last added to the stack & and return false
   }

 place p = places[index] 

 foreach token in p
 {
   add token to your stack
   if ( Func( places, index+1 ) ) return true
 }

 remove last token added to the stack
 return false
} 
```

最初使用 index = 0 调用该函数。

希望这可以帮助。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T11:16:15.960

What about something like this:

```
method getPassed(places, tokens):
    if places are empty:
        try pass guard
            if (passed) 
                save tokens
                return true
            else return false
    else:
        for token in places[0]:
            if getPassed(places[1:].clone(), tokens.clone().append(token)):
                break 
```

Start it with call getPassed(places, []), where places is a list of places and [] is empty list. Note that you need to copy the lists always, so that you don't end up messing them up.

In the end, no need for pairs. If you keep the original places list you pass into the algorithm at the beginning, you know that token[i] was selected for originalPlaces[i].

But if you want to, you can keep tokenPlaces pairs instead of tokens, so something like this:

```
method getPassed(places, tokenPlacePairs):
    if places are empty:
        try pass guard
            if (passed) 
                save tokens
                return true
            else return false
    else:
        for token in places[0]:
            if getPassed(places[1:].clone(), tokens.clone().append((token, places[0]))):
                break 
```

EDIT: Still some confusion, hopefully this will make it clear. I am trying to generate the for loops recursively. So if places has only 2 elements, you get as you suggested:

```
for token in place 1
     for token in place 2
        try pass guard
        if (passed) 
            save tokens
             break; 
```

So what it does is that it takes the first place from the list and creates the "for token in place 1" loop. Then it cuts of that place from the places list and adds the current token to the tokens list. This recursive call now does the "for token in place 2" loop. And so on. Every recursive call we decrease the number of places by 1 and create 1 for loop. Hence, after the places list is empty we have n nested loops, where n is the number of places and as far as I understand, this is what you were looking for.

You can initiate the method in the following way:

```
originalPlaces = places.clone()
getPassed(places, []) 
```

This way you can keep the originalPlaces unchanged and you can assign tokens[i] to originalPlaces[i] when you get to the base case in the recursion, i.e. when you try to determine the passing the guard. Hence you do not really need the pairs.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T15:09:30.113

假设 Transition 有一个 isEnabled() 方法以及 input/outputArcs：

```
public boolean isEnabled() {
    // check for some special input/output conditions (no arcs, etc.)
    // return false if invalid

    // check to see if all input arcs are enabled
    for (Arc inputArc : inputArcs)
        if (!inputArc.isEnabled())
            return false;
    // should check if there's a guard first...
    return guard.evaluate();  // do the selection of tokens from inputs here and evaluate
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T14:59:13.933

您可以自己进行循环管理。我的意思是：你需要一个类来描述每个地方的迭代状态。让我们称之为 state_of_place。它将由两个值组成：current_index 和 max_index。

接下来，您将有一个我将命名为iteration_admin 的类，它由一个state_of_place 数组和一个称为iteration_in_progress 之类的布尔值组成。创建后，布尔值设置为 TRUE。您将创建与地点一样多的 state_of_place 对象。Current_index 将是 0，max_index 将是那个地方的令牌数。

迭代管理类需要一个方法来表示循环变量的增量。让我们称之为增量（）。如果 current_index 仍低于 max_index，此方法将增加具有最高索引的 state_of_place 元素的 current_index。如果 current_index 等于 max_index，则当前索引设置为 0，并且下一个较低索引的 state_of_place 的当前索引需要递增。如果那个已经达到它的 max_index，它将被设置为 0，并且下一个较低的将被递增，依此类推。当然，唯一的例外是 state_of_place[0]。如果该元素 current_index 将超过其 max_index，则 boolean iteration_in_progress 将设置为 FALSE。这意味着，所有令牌组合都已使用。

现在，您尝试守卫的代码将

*   初始化一个迭代管理类型的对象
*   而iteration_admin.iteration_in_progress 为TRUE
*   使用 state_of_place 元素中的 current_index 值构建 pass() 方法的参数列表
*   调用 pass()
*   如果没有通过，调用iteration_admin.increment()方法
*   结束时

编辑：试图用伪代码表达这个想法。我担心它看起来更像是 Java 和 PL/SQL 的混合，而不是抽象的伪代码。不过，它应该比我的文字描述更清楚一些。

```
 // iteration state for one place
class state_of_a_place 
{
   integer current_index;
   integer max_index;
}

   // iteration administration for one transition
class iteration_admin
{
   boolean iteration_in_progress
   state_of_a_place[] state_of_places

   procedure increment
   {
         // move index through tokens
      FOR i IN state_of_places.count-1 .. 0 LOOP     
         IF state_of_places[i].current_index < state_of_places[i].max_index THEN
            state_of_places[i].current_index += 1
            return
         ELSE
            state_of_places[i].current_index = 0
            IF i = 0 THEN
               iteration_in_progress = FALSE
            END IF
         END IF
      END FOR         
   }
}

handle_transition (list_of_places)
{
      // initialize an object of type iteration_admin
   iteration_admin ia
   ia.iteration_in_progress = TRUE
   FOR i IN 0..list_of_places.count LOOP
      ia.state_of_places[i].current_index = 0
      ia.state_of_places[i].max_index = list_of_places[i].number_of_tokens
   END FOR

   WHILE ia.iteration_in_progress LOOP
         // build the argument list for the pass() method 
      token[] arguments
      FOR i IN 0..list_of_places.count LOOP
         arguments[i] = list_of_places[i].token[ia.state_of_places[i].current_index]
      END FOR

         // try to pass the guard
      call pass(arguments)
      IF (passed)
         // do whatever you need to do here
      ELSE
         ia.increment()
      END IF         
   END WHILE
} 
```

# jquery - 单个页面上此轮播的多个实例 - 无法使其工作

> ID：10053780
> 
> 赞同：1
> 
> 时间：2012-04-07T10:44:43.787
> 
> 标签：jquery, carousel, jsfiddle

这段代码来自一个教程，所以它最初不是我自己的工作。我想要做的是在一个页面上多次实现这一点。我已经尝试过，但到目前为止都失败了 - 通过给 id “carousel” 编号等等。任何帮助将不胜感激。我在扯头发。

[http://jsfiddle.net/AndyMP/zcKDV/5/](http://jsfiddle.net/AndyMP/zcKDV/5/)

为了完整性.. 这是旋转木马 JQuery 的样子。

```
//rotation speed and timer
var speed = 5000;
var run = setInterval('rotate()', speed);   

//grab the width and calculate left value
var item_width = $('#slides li').outerWidth();
var left_value = item_width * (-1);

//move the last item before first item, just in case user click prev button
$('#slides li:first').before($('#slides li:last'));

//set the default item to the correct position
$('#slides ul').css({'left' : left_value});

//if user clicked on prev button
$('#prev').click(function() {

    //get the right position            
    var left_indent = parseInt($('#slides ul').css('left')) + item_width;

    //slide the item            
    $('#slides ul').animate({'left' : left_indent}, 200,function(){    

        //move the last item and put it as first item               
        $('#slides li:first').before($('#slides li:last'));           

        //set the default item to correct position
        $('#slides ul').css({'left' : left_value});

    });

    //cancel the link behavior            
    return false;

});

//if user clicked on next button
$('#next').click(function() {

    //get the right position
    var left_indent = parseInt($('#slides ul').css('left')) - item_width;

    //slide the item
    $('#slides ul').animate({'left' : left_indent}, 200, function () {

        //move the first item and put it as last item
        $('#slides li:last').after($('#slides li:first'));                  

        //set the default item to correct position
        $('#slides ul').css({'left' : left_value});

    });

    //cancel the link behavior
    return false;

});        

//if mouse hover, pause the auto rotation, otherwise rotate it
$('#slides').hover(

    function() {
        clearInterval(run);
    },
    function() {
        run = setInterval('rotate()', speed);   
    }
);

//a simple function to click next link
//a timer will call this function, and the rotation will begin :)  
function rotate() {
$('#next').click();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T11:07:21.427

当我复制代码、css 和 html 并且我工作多个时。你可以看看这个。（有一些CSS问题，但它的工作原理）

[http://jsfiddle.net/serkanalgur/mWe4c/](http://jsfiddle.net/serkanalgur/mWe4c/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T11:16:00.000

Hiya please try this using Jcarousal **Working Demo**: [http://jsfiddle.net/Znztg/](http://jsfiddle.net/Znztg/)

Hope this helps! and works for multiple carousal for less code. CHeers

[http://sorgalla.com/projects/jcarousel/](http://sorgalla.com/projects/jcarousel/) for more read if you keen!

**Library**

```
<!--

      jCarousel library
    -->
    <script type="text/javascript" src="http://sorgalla.com/projects/jcarousel/lib/jquery.jcarousel.min.js/lib/jquery.jcarousel.min.js"></script>
    <!--
      jCarousel skin stylesheets
    -->
    <link rel="stylesheet" type="text/css" href="http://sorgalla.com/projects/jcarousel/skins/tango/skin.css" />
    <link rel="stylesheet" type="text/css" href="http://sorgalla.com/projects/jcarousel/skins/ie7/skin.css" /> 
```

**JQuery Code**

```
$(document).ready(function() {
    // Initialise the first and second carousel by class selector.
    // Note that they use both the same configuration options (none in this case).
    $('.first-and-second-carousel').jcarousel();

    // If you want to use a caoursel with different configuration options,
    // you have to initialise it seperately.
    // We do it by an id selector here.
    $('#third-carousel').jcarousel();
    // alert('foo');
}); 
```

**HTML**

```
</head>
<body>
<div id="wrap">
  <h1>jCarousel</h1>
  <h2>Riding carousels with jQuery</h2>

  <h3>Multiple carousels on one page</h3>
  <p>
    This example shows how to use multiple carousels on one page with different
        skins and configurations.
  </p>

  <ul id="first-carousel" class="first-and-second-carousel jcarousel-skin-tango">
    <li><img src="http://static.flickr.com/66/199481236_dc98b5abb3_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/75/199481072_b4a0d09597_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/57/199481087_33ae73a8de_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/77/199481108_4359e6b971_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/58/199481143_3c148d9dd3_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/72/199481203_ad4cdcf109_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/58/199481218_264ce20da0_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/69/199481255_fdfe885f87_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/60/199480111_87d4cb3e38_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/70/229228324_08223b70fa_s.jpg" width="75" height="75" alt="" /></li>
  </ul>

  <hr size="1"/>

  <ul id="second-carousel" class="first-and-second-carousel jcarousel-skin-ie7">
    <li><img src="http://static.flickr.com/66/199481236_dc98b5abb3_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/75/199481072_b4a0d09597_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/57/199481087_33ae73a8de_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/77/199481108_4359e6b971_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/58/199481143_3c148d9dd3_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/72/199481203_ad4cdcf109_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/58/199481218_264ce20da0_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/69/199481255_fdfe885f87_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/60/199480111_87d4cb3e38_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/70/229228324_08223b70fa_s.jpg" width="75" height="75" alt="" /></li>
  </ul>

  <hr size="1"/>

  <ul id="third-carousel" class="jcarousel-skin-tango">
    <li><img src="http://static.flickr.com/66/199481236_dc98b5abb3_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/75/199481072_b4a0d09597_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/57/199481087_33ae73a8de_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/77/199481108_4359e6b971_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/58/199481143_3c148d9dd3_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/72/199481203_ad4cdcf109_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/58/199481218_264ce20da0_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/69/199481255_fdfe885f87_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/60/199480111_87d4cb3e38_s.jpg" width="75" height="75" alt="" /></li>
    <li><img src="http://static.flickr.com/70/229228324_08223b70fa_s.jpg" width="75" height="75" alt="" /></li>
  </ul>

</div>
</body>​ 
```

# c - 如何编译折扣 C 库？

> ID：10053785
> 
> 赞同：1
> 
> 时间：2012-04-07T10:45:39.787
> 
> 标签：c, markdown, discount

我想使用[折扣](http://www.pell.portland.or.us/~orc/Code/discount/)C 库将[Markdown](http://daringfireball.net/projects/markdown/)文本转换为 HTML。我已经成功编译并安装了库（版本 2.1.3）。

我试图编译这段代码

```
#include <mkdio.h>
int main(void)
{
 FILE *in, *out;
 MMIOT *doc;

 in = fopen("sample.md", "r");
 out = fopen("out.html", "w");

 doc = mdk_in(in, 0);
 markdown(doc, out, 0);

 ...
} 
```

*解释*：`mkd_in()`将输入文件读`in`入库工作类型`MMIOT doc`，markdown() 应转换`doc`为 HTML 并写入`out`文件。

使用命令`gcc -Wall -lmarkdown -o FILE FILE.c`，我总是得到以下输出：

```
undefined reference to `mkd_in(_IO_FILE*, unsigned int)'
undefined reference to `markdown(void*, _IO_FILE*, unsigned int)' 
```

**注意**：我已经运行了 Discount 的配置工具，并带有`--shared`构建动态库的选项。默认是一个静态库，但我遇到了同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T10:58:56.577

试试这个：

```
gcc -Wall -o FILE FILE.c -lmarkdown 
```

的位置`-l`很重要，因为许多链接器将仅使用库来满足未解析的引用（如果它们*在解析时存在`-l`）。*例如，这可能会导致各种循环依赖问题。

在你最初拥有它的地方，这些函数并不是未解决的，因为你还没有编译`FILE.c`. 当您*执行*compile`FILE.c`时，没有`-l`遵循该点来满足引用。

从`gcc`手册页：

> 当您使用多个相同类型的选项时，顺序确实很重要。例如，如果您多次指定 -L，则会按指定的顺序搜索目录。此外，-l 选项的位置也很重要。

并且，后来，在`-l`：

> 在命令中编写此选项的位置有所不同；链接器按照指定的顺序搜索和处理库和目标文件。因此，foo.o -lz bar.o 在文件 foo.o 之后但在 bar.o 之前搜索库 z。如果 bar.o 引用 z 中的函数，则可能不会加载这些函数。

# windows-phone-7 - 如何设置绑定到 ListBox 的 TextBlock 的可见性？

> ID：10053786
> 
> 赞同：1
> 
> 时间：2012-04-07T10:45:42.993
> 
> 标签：windows-phone-7, textblock, listboxitem

如何在 ListBox 中设置 TextBlock 可见性。例如

```
<Grid>
   <ListBox Name="myList">
     <ListBox.ItemTemplate>
          <DataTemplate>
             <TextBloxk Name="txtBlock1" Text="{Binding} First Name">
             <TextBloxk Name="txtBlock2" Text="{Binding} Last Name">
          </DataTemplate>
     </ListBox.ItemTemplate>
   </ListBox>
</Grid> 
```

在运行时，我想将任一文本块的可见性设置为可见或折叠。

我该怎么做，或者我可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T10:49:37.183

您可以使用[`BooleanToVisibilityConverter`](http://msdn.microsoft.com/en-us/library/system.windows.controls.booleantovisibilityconverter.aspx)（或其他自定义转换器）根据绑定值更改可见性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T11:56:42.123

如果您需要遍历 ListBox 中的每个项目，请使用[VisualTreeHelper 。](http://msdn.microsoft.com/en-us/library/system.windows.media.visualtreehelper.aspx)或者，将 ListBox 重新绑定到新的数据集并使用 MarcinJuraszek 关于使用 Converter 的建议（绝对是一个更简单的选择:)）

# c - 函数usleep的隐式声明

> ID：10053788
> 
> 赞同：31
> 
> 时间：2012-04-07T10:45:47.873
> 
> 标签：c, usleep

```
gcc (GCC) 4.6.3
c89 
```

我正在尝试使用`usleep`. 但是，我不断收到以下警告：

> 函数usleep的隐式声明

我已经包含了`unistd.h`头文件。

手册页提到了一些关于此的内容。但我不确定我是否理解它：

```
usleep():
   Since glibc 2.12:
       _BSD_SOURCE ||
           (_XOPEN_SOURCE >= 500 ||
               _XOPEN_SOURCE && _XOPEN_SOURCE_EXTENDED) &&
           !(_POSIX_C_SOURCE >= 200809L || _XOPEN_SOURCE >= 700)
   Before glibc 2.12:
       _BSD_SOURCE || _XOPEN_SOURCE >= 500 || _XOPEN_SOURCE && _XOPEN_SOURCE_EXTENDED 
```

但不确定我与上述内容有什么关系？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-07T10:49:50.717

该列表是已定义的先决条件`usleep`。它基本上是一个涉及`#define`变量的类 C 表达式，在包含头文件之前必须为真。

头文件本身只会`usleep`在通常是大量的语句嵌套中定义，`#ifdef`并且开发人员已经花时间告诉您需要做什么，这样您就不必花费数小时试图自己弄清楚:-)

假设您使用的是`glibc`2.12 或更高版本，这意味着您必须：

*   声明_BSD_SOURCE；或者
*   声明一个其他三件事的复杂组合，我不会费心去解码。

可能最简单的解决方法是简单地编译`gcc -D _BSD_SOURCE`或放置：

```
#define _BSD_SOURCE 
```

在代码中包含为您提供的头文件之前`usleep`。

您可能希望在*任何*包含之前定义这些，以防各种头文件之间存在依赖关系。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-04-07T12:11:11.010

这可能有效：`-std=gnu99`在 Linux 上使用 gcc 编译时添加。

例子：

```
arm-linux-gcc -lpthread -std=gnu99  -o test ArmLinuxDataPipe1.2.1.c 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-04-26T04:33:31.103

## Tl;博士

如果您需要获取`usleep()`用于编译的遗留代码，请将这些行添加到您在任何其他库之前包含的头文件中：

```
#define _XOPEN_SOURCE   600
#define _POSIX_C_SOURCE 200112L 
```

或者将编译器标志添加`-std=c11 -D_XOPEN_SOURCE=600 -D_POSIX_C_SOURCE=200112L`到您的 makefile 中。

这告诉环境您的程序使用[的是旧版本的 UNIX API](https://pubs.opengroup.org/onlinepubs/009695399/)，在该版本`usleep()`中未被弃用。

或者——如果这是新代码，肯定是——替换`usleep()`为[`nanosleep()`](http://pubs.opengroup.org/onlinepubs/9699919799/)，为您的库版本适当地设置功能测试宏，并检查您的代码库是否有其他错误。

在 Linux 上，您`_XOPEN_SOURCE`可以`_POSIX_C_SOURCE`检查`man feature_test_macros`.

## 完整的图片

更长的答案：这就是发生的事情。

从历史上看，有几种不同的 UNIX 标准，最终每个人都想到的最佳实践是让代码指定它是为哪个版本的 UNIX API 编写的。程序员通过定义一个功能测试宏来做到这一点。

UNIX 中最早的分裂之一是 AT&T 的 System V 和加州大学的伯克利标准分发 (BSD)。由于 System V 是正式版本并且它的行为成为默认，而 BSD Unix 是一些最早的免费软件并在许多大学中使用，因此看到遗留代码声明`_BSD_SOURCE`比`_SVID_SOURCE`. 该`_BSD_SOURCE`宏特别试图在 40 多年的时间里启用来自各种不同操作系统的扩展。有时，它甚至被用作非标准扩展的包罗万象。这两个宏都已弃用，并且与当前接受的答案相反，您永远不应该在新代码中使用任何一个。

在本世纪，有两个 UNIX 标准，POSIX 成为 IEEE 标准，以及来自开放组 (X/Open) 的单一 Unix 规范 (SUS)。X/Open SU​​S 是 POSIX 的超集，也是您通常编写的内容。曾经有许多不同的功能测试宏，您可以声明它们以启用这些标准的当前版本，并且仍然支持这些宏以实现向后兼容性。您可以在粘贴的条件中看到其中一些，但您在编写新代码时无需担心它们。代码检查的一个宏`_XOPEN_SOURCE_EXTENDED`现在已过时，但历史上选择了 1995 年的 SUS 版本。

理论上，在任何现代版本的 UNIX 或 Linux 上设置的正确功能测试宏是`_XOPEN_SOURCE`. 您应该查找您的库支持的最新版本号。在实践中，我认为还定义 是一种谨慎的防御性编码`_POSIX_C_SOURCE`，以*保证*没有其他人可以不一致地设置它并破坏您的代码。您的问题是一个很好的例子：如果您设置`_XOPEN_SOURCE`为向后兼容，但`_POSIX_C_SOURCE`在工具链的其他地方设置为更新的版本，则更高版本的`_POSIX_C_SOURCE`将优先且`usleep()`不起作用。

所以，这些条件的意思是它`usleep()`不是一个 POSIX 函数，但曾经出现在一些类似 BSD 的操作系统上，因此它在 1995 年进入了 SUS。它在 2008 年被弃用，并选择任何版本的 POSIX 或SUS 从那时起主动禁用它。因此，如果您选择 SUS 的 500 或 600 版本（并且另一个过时的同义词也将其打开），则启用它，但如果您选择任何最新版本的 POSIX 或 SUS，则不推荐使用。如果您选择“随心所欲”选项，它们也会启用，但这是个坏主意。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-04-26T03:00:28.350

将以下内容添加到代码的顶部：

```
// For `nanosleep()`:
#include <time.h>

#define __USE_POSIX199309
#define _POSIX_C_SOURCE 199309L 
```

然后[`nanosleep()`](http://man7.org/linux/man-pages/man2/nanosleep.2.html)改用，创建自己的`sleep_us()`函数来休眠一组微秒：

```
void sleep_us(unsigned long microseconds)
{
    struct timespec ts;
    ts.tv_sec = microseconds / 1000000ul;            // whole seconds
    ts.tv_nsec = (microseconds % 1000000ul) * 1000;  // remainder, in nanoseconds
    nanosleep(&ts, NULL);
} 
```

为了在 Linux Ubuntu 上编译和运行，我创建了一个**sleep_test.c**文件并使用：

```
gcc -Wall -g3 -std=c11 -o sleep_test sleep_test.c && ./sleep_test 
```

## 参考：

1.  （这是故意循环引用：请参阅我在此答案下的评论）：[C 中是否有替代睡眠函数到毫秒？](https://stackoverflow.com/questions/1157209/is-there-an-alternative-sleep-function-in-c-to-milliseconds/28827188#28827188)
2.  [http://man7.org/linux/man-pages/man2/nanosleep.2.html](http://man7.org/linux/man-pages/man2/nanosleep.2.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-04-13T20:31:06.053

问题答案：使用 `#define _BSD_SOURCE`或`#define _GNU_SOURCE`

对于那些有错误的人

```
warning: #warning "_BSD_SOURCE and _SVID_SOURCE are deprecated, use _DEFAULT_SOURCE" [-Wcpp]
 # warning "_BSD_SOURCE and _SVID_SOURCE are deprecated, use _DEFAULT_SOURCE"
   ^~~~~~~ 
```

使用后`#define _BSD_SOURCE`尝试使用

```
#define _GNU_SOURCE 
```

注意：在包含标题之前使用，`usleep()`即在包含之前`unistd.h`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-10-05T02:21:54.330

[使用 nanosleep() 代替对我有用。](https://stackoverflow.com/a/40451160/5165135)

> 在相关说明中：usleep() 自 POSIX-2008 以来已被删除，并建议使用 nanosleep() 代替。

# html - 如何在 bash 中从 html 中提取 td？

> ID：10053793
> 
> 赞同：2
> 
> 时间：2012-04-07T10:46:31.840
> 
> 标签：html, regex, bash, shell, screen-scraping

我正在从地名查询伦敦邮政编码数据：

[http://www.geonames.org/postalcode-search.html?q=london&country=GB](http://www.geonames.org/postalcode-search.html?q=london&country=GB)

我想将输出转换为仅包含邮政编码标识符（Bethnal Green、Islington 等）的列表。仅在 bash 中提取名称的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T11:52:19.810

我不确定您是指这个`\n`分隔列表（还是括号和逗号分隔的列表）

```
html='http://www.geonames.org/postalcode-search.html?q=london&country=GB'
wget -q "$html" -O - |
  w3m -dump -T 'text/html'|
    sed -nr 's/^ +[0-9]+ +(.*) +[A-Z]+[0-9]+ +United Kingdom.*/\1/p' 
```

`w3m`是：*“具有出色表格/框架支持的WWW 可浏览寻呼机”*

输出（前 10 行）

```
London Bridge   
Kilburn         
Ealing          
Wandsworth      
Pimlico         
Kensington      
Leyton          
Leytonstone     
Plaistow        
Poplar 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T11:18:13.930

我看到该站点提供（但不是免费的）带有 XML 或 JSON 数据的 Web 服务......这将是最好的方式，因为 HTML 页面并不意味着（容易）被解析。

无论如何，没有什么是不可能的，但是如果不是不可能的话，严格地只使用 bash 命令会非常困难；通常通过管道传输其他几个常用工具以实现结果。但是，有时坚持使用像 Perl 这样的单一工具会更方便，而不是结合 cat、grep、awk、sed 和其他任何工具。

就像是

```
sed -e 's/>/>\n/g' region.html |
   egrep -i "^\s*[A-Z]+[0-9]+</td>" |
   sed -e 's|</td>||g' 
```

假设代码的特定格式，提取了 200 行。

**添加**

如果您可以用来解析数据的软件没有限制，那么您可以使用如下行

```
wget -q "http://www.geonames.org/postalcode-search.html?q=london&country=GB" -O - |
     sgrep '"<table class=\"restable\"" .. "</table>"' | 
     sed -e 's|/tr>|/tr>\n|g; s|</td>\s*<td[^>]*>|;|g; s|</th>\s*<th[^>]*>|;|g; s|<[^>]\+>||g; s|;;&nbsp;.*$| |g' |
     grep -v "^\s*$" |
     tail -n+2 | cut -d";" -f2,3 
```

`;`它在 CSV 和 awk中提取由类似分隔的地点和邮政编码：

```
wget -q "$html" -O - | 
     w3m -dump -T 'text/html' |
     awk '/\s*[0-9]+ / { print substr($0, 11, 16); }' 
```

这是基于 Peter.O 的答案并提取相同的数据......等等。但在这些情况下，由于您不限于大多数 Unix 或 GNU 系统上的最小工具，我会坚持使用一个广泛使用的工具，例如 perl。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T17:35:23.323

如果您可以访问`mojo`Mojolicious 项目中的工具，这一切都会变得容易得多：

```
mojo get 'http://www.geonames.org/postalcode-search.html?q=london&country=GB' '.restable > tr > td:nth-child(2)' text | grep ^'[a-zA-Z]' 
```

最后`grep`的只是过滤掉一些垃圾结果；几乎（但不完全）每隔一行都是坏的，因为页面结构略有不一致。否则你可以说`tr:nth-child(even)`并得到很好的结果。

# php - MultyQuery 在 phpmyadmin 中工作，在 Mysqli 中不工作，在其他服务器上工作

> ID：10053794
> 
> 赞同：1
> 
> 时间：2012-04-07T10:46:43.470
> 
> 标签：php, mysql, phpmyadmin, mysqli

我正在使用 Msqli 进行多重查询，查询的工作方式与我在 phpmyadmin 中想要的完全一样。

它不再适用于 mysqli。查询在服务器之间没有改变。

下面的查询在以前的 LAMP 安装中有效，但在当前无效。

```
$SQLquery ='set @type = \'\';
set @num  = 1;
SELECT 
RA.`DATE` as DATES, 
RA.`ADDR` as ADDR,
RA.`QID` as QID, 
RT.`TAGS` as TAG,
Q.`id` AS QUID,
Q.`ADDR` AS QADDR, 
Q.`ORIGINALTEXT` AS QTEXTS, 
Q.`DATE` AS QDATES, 
cs.`id` AS CUID,
cs.`ADDR` AS CADDR, 
cs.`ORIGINALTEXT` AS CTEXTS, 
cs.`DATE` AS CDATES,
sol.`id` AS SUID, 
sol.`ORIGINALTEXT` AS STEXTS,
sol.`ADDR` AS SADDR, 
sol.`DATE` AS SDATES,
prj.`id` AS PUID,  
prj.`ORIGINALTEXT` AS PTEXTS, 
prj.`ADDR` AS PADDR,
prj.`DATE` AS PDATES, 
Max(Q.`DATE` ) AS Q, 
Max(cs.`DATE` ) AS C, 
Max(sol.`DATE` ) AS S, 
Max(prj.`DATE` ) AS P,
#@num as row_number 
@num:= if(@type = RA.`ADDR`, 1+@num, 1)  as v_number,
@type := RA.`ADDR` as dummy
FROM        (SELECT `id`,`TAGS`, `QID`    from `REL_TAG` ) AS RT 
 inner Join (SELECT `DATE`, `ADDR`, `QID` from `REL_ADDR` order by DATE) AS RA ON ( RT.`QID` = RA.`QID`) 
 Left outer Join (SELECT `id`,`DATE`, `ADDR`, `QID`, `ORIGINALTEXT` FROM `QUESTION`) AS Q ON ( RT.`QID` = Q.`QID`) and Q.`ADDR` = RA.`ADDR`
 Left outer Join (SELECT `id`,`DATE`, `ADDR`, `QID`, `ORIGINALTEXT` FROM `CASES` order by `CASES`.`DATE`) AS cs ON ( RT.`QID` = cs.`QID`) and cs.`ADDR` = RA.`ADDR` 
 Left outer Join (SELECT `id`,`DATE`, `ADDR`, `QID`, `ORIGINALTEXT` FROM `SOLUTION` order by `SOLUTION`.`DATE`) AS sol ON ( RT.`QID` = sol.`QID`) and sol.`ADDR` = RA.`ADDR`
 Left outer Join (SELECT `id`,`DATE`, `ADDR`, `QID`, `ORIGINALTEXT` FROM `PROJECT`  order by `PROJECT`.`DATE`) AS prj ON ( RT.`QID` = prj.`QID`) and prj.`ADDR` = RA.`ADDR`
where RT.`QID` = \''.NbOnly($Fetchmodifier).'\' Group by `QID`, addr, v_number LIMIT '.$Anstart.' ,'.$Ansnb.';'; 
```

**更新** 查询不会在日志中返回任何错误，它只是不返回任何内容（null）。

这是执行 MySQLi 多查询的 PHP 代码

```
$mysqlin = new mysqli("localhost", "user", "pass", "db");
if (mysqli_error($mysqlin)) {
     outputdataXML(sprintf("Connect Problem : %s\n", mysqli_error($mysqlin)));
     exit();
}
if ($mysqlin->multi_query($SQLquery)) {
    do {
          if ($result = $mysqlin->store_result()) {
               while ($row = $result->fetch_array(MYSQLI_BOTH)) {
                   if( $Foundrows = $row[0]){ //Maybe the problem is here ?
                     $Outputvalue[] = FormatFile($row);
                   }
               }
               $result->free();
          }
          if ($mysqlin->more_results()) {
          }
       } while ($mysqlin->more_results() && $mysqlin->next_result());
}
$mysqlin->close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:10:44.173

我发现了问题，一些但不是所有的表都是**EMPTY**，如没有任何记录，

我为每个表添加了一个虚拟记录，有些表有记录，但有些没有，现在即使查询不匹配连接现在仍然正确制作。

我希望这对很多人有帮助。

当您使用 MySQL **"Join"时，您需要在****每个**和**所有**连接表中都有1 条记录，无论它是否会被使用，例如：0、00-00-0000、Null、0、空

只有这样，查询中包含的所有连接表才会起作用。

# iphone - 在 UITableView 页脚中放置一个按钮，并使 UITableViewCell 不在页脚下方

> ID：10053802
> 
> 赞同：0
> 
> 时间：2012-04-07T10:47:06.887
> 
> 标签：iphone, objective-c, ios, xcode

所以，我已经实现了这个方法来为我的表格视图添加一个页脚：

```
- (CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section
{
    return 60;
} 
```

这是结果：

![在此处输入图像描述](../Images/1606f03106a2350f894f0dbd50c9a8f6.png)

现在，你看，有两个问题：

1）我想在表格视图页脚中添加一个按钮，但是当我在情节提要中拖动一个按钮控件时，它不起作用。如何在那里添加按钮？

2) 如您所见，页脚是透明的，并且在其下方可见一个表格视图单元格。我希望页脚下没有单元格（所以最后一个可见的单元格将是页脚上方的单元格）。其次，我希望页脚不透明。

我正在使用 Xcode 4.2 和雪豹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T11:03:40.770

```
-(CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section 
```

是一个委托方法。尝试访问table 的[sectionFooterHeight](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instp/UITableView/sectionFooterHeight)属性。

要添加按钮，您可以考虑在页脚中添加自定义视图。您可以访问[tableFooterView](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instp/UITableView/tableFooterView)并为其分配自定义视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T12:07:42.117

使用此函数为表格创建页脚视图

```
- (UIView *) createViewForTableFooter
{
    CGRect footerRect = CGRectMake(0, 0, self.view.frame.size.width, 60);
    UIView *tableFooter = [[[UIView alloc] initWithFrame:footerRect] autorelease];
    tableFooter.backgroundColor = [UIColor clearColor];

    UIButton* verifyButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [verifyButton setTitle:WNLocalizedString(@"Verify",@"") forState:UIControlStateNormal];
    [verifyButton.titleLabel setFont:[UIFont boldSystemFontOfSize:20]];
    [verifyButton addTarget:self action:@selector(verifyBtnTapped:)forControlEvents:UIControlEventTouchUpInside];
    verifyButton.autoresizingMask = UIViewAutoresizingFlexibleWidth;
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
        [verifyButton setFrame:CGRectMake(44, 10, self.view.frame.size.width - 88, 37)];
    }else {
        [verifyButton setFrame:CGRectMake(10, 10, self.view.frame.size.width - 20, 37)];
    }
    [tableFooter addSubview:verifyButton];

    return tableFooter;
} 
```

并在你的 viewDidLoad 方法中使用这个函数

```
yourTableObjectName.tableFooterView = [self createViewForTableFooter]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T11:04:58.693

您可以使用 tableView:viewForFooterInSection: 方法将按钮添加到页脚

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-07T12:40:04.513

增加tableviews底部的内容大小

```
UIEdgeInsets contentInset = self.tableView.contentInset;
contentInset.bottom = 50.0f; // **the height of the footer**
self.tableView.contentInset = contentInset; 
```

# c# - 如何获取 Google Plus 的帖子数据（点赞-分享-评论）？

> ID：10053804
> 
> 赞同：4
> 
> 时间：2012-04-07T10:47:20.327
> 
> 标签：c#, .net, api, c#-4.0, google-plus

使用 C#，我想阅读这样的 Google + 帖子的**Shares、Comments 和 Likes** [https://plus.google.com/107200121064812799857/posts/GkyGQPLi6KD](https://plus.google.com/107200121064812799857/posts/GkyGQPLi6KD)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-07T11:23:11.070

那个帖子是一个活动。[此页面](https://developers.google.com/+/api/latest/activities/get)包含有关如何获取有关活动的信息的信息。[此页面](https://developers.google.com/+/api/)提供了一些使用 API 的示例。[此页面](http://code.google.com/p/google-api-dotnet-client/wiki/APIs#Google+_API)包含 Google API .NET 库的下载，您可以使用它来访问 Google+ API，以及 XML 文档等。

您需要使用[API 控制台](https://code.google.com/apis/console/)来获取 API 密钥并管理您的 API 使用。

另请查看[API Explorer](http://code.google.com/apis/explorer/#_s=plus&_v=v1&_m=activities.get)。

这是一个工作示例：

* * *

引用 Google.Apis.dll 和 Google.Apis.Plus.v1.dll

```
 PlusService plus = new PlusService();
        plus.Key = "YOURAPIKEYGOESHERE";
        ActivitiesResource ar = new ActivitiesResource(plus);
        ActivitiesResource.Collection collection = new ActivitiesResource.Collection();

        //107... is the poster's id
        ActivitiesResource.ListRequest list = ar.List("107200121064812799857", collection); 
        ActivityFeed feed = list.Fetch();

        //You'll obviously want to use a _much_ better way to get
        // the activity id, but you aren't normally searching for a
        // specific URL like this.
        string activityKey = "";
        foreach (var a in feed.Items)
            if (a.Url == "https://plus.google.com/107200121064812799857/posts/GkyGQPLi6KD")
            {
                activityKey = a.Id;
                break;
            }

        ActivitiesResource.GetRequest get = ar.Get(activityKey);
        Activity act = get.Fetch();
        Console.WriteLine("Title: "+act.Title);
        Console.WriteLine("URL:"+act.Url);
        Console.WriteLine("Published:"+act.Published);
        Console.WriteLine("By:"+act.Actor.DisplayName);
        Console.WriteLine("Annotation:"+act.Annotation);
        Console.WriteLine("Content:"+act.Object.Content);
        Console.WriteLine("Type:"+act.Object.ObjectType);
        Console.WriteLine("# of +1s:"+act.Object.Plusoners.TotalItems);
        Console.WriteLine("# of reshares:"+act.Object.Resharers.TotalItems);

        Console.ReadLine(); 
```

输出：

```
 Title: Wow Awesome creativity...!!!!!
    URL:http://plus.google.com/107200121064812799857/posts/GkyGQPLi6KD
    Published:2012-04-07T05:11:22.000Z
    By:Funny Pictures & Videos
    Annotation:
    Content: Wow Awesome creativity...!!!!!
    Type:note
    # of +1s:210
    # of reshares:158 
```

# xml-parsing - 使用 xmllint 从 xml 文件中提取数据

> ID：10053811
> 
> 赞同：1
> 
> 时间：2012-04-07T10:48:56.107
> 
> 标签：xml, xmlliint, xml, xml-parsing, extract, xmllint

我有一个小的[xml](/questions/tagged/xml "显示标记为“xml”的问题")文档，我需要使用 xmllint 从中提取一些值。我能够使用`xmllint --shell xmlfilename`命令浏览 xml 层次结构。

但我无法提取这些值。我不想使用`grep /`任何模式匹配命令，因为这已经完成并且是成功的。

我将不胜感激有关[xmlliint](/questions/tagged/xmlliint "显示标记为“xmlliint”的问题")的任何帮助。

这是我的`png`格式文件。我想提取`300$`和`500$`（`value`）。

```
<?xml version="1`.`0" encoding="ISO-8859-1"?>
<adi>
    <asset>
        <electronics item="Mobile" name="Nokia" value="300$" />
        <electronics item="Mobile" name="Sony" value="500$" />
    </asset>
</adi> 
```

另一个疑问是，这两组是否是相同[xml](/questions/tagged/xml "显示标记为“xml”的问题")的不同表示？

```
<?xml version="1.0 encoding="ISO-8859-1"?>
<adi>
    <asset>
        <electronics>
            <item> Mobile </item>
            <name>Nokia</name>
            <value>300$</value>
        </electronics>
        <electronics>
            <item> Mobile </item>
            <name>Sony</name>
            <value>500$</value>
        </electronics>
    </asset>
</adi> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-04T21:34:46.950

关于您的第二个问题，这两个片段*不代表*相同的 XML 内容。属性和子元素是不等价的。子元素可以是任意 XML 树的根元素，但属性是原子的。

例如，我可以像这样修改第二个片段：

```
<?xml version="1.0 encoding="ISO-8859-1"?>
<adi>
    <asset>
        <electronics>
            <item>
               Mobile
               <sub-item>Phone</sub-item>
            </item>
            <name>Nokia</name>
            <value>300$</value>
        </electronics>
        <electronics>
            <item> Mobile </item>
            <name>Sony</name>
            <value>500$</value>
        </electronics>
    </asset>
</adi> 
```

我添加`<sub-item>Phone</sub-item>`到第一个`<item>`元素的地方。但是，没有等效的 if`item`是一个属性，就像在第一个片段中一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T22:23:40.363

迟到了，但当搜索标签*xmllint*与第一页匹配时，我现在回答你；）

使用 --xpath 代替 --xpath 如下

```
xmllint --xpath '//electronics/value/text()' second-xml_file.xml 
```

# visual-studio - 无法在 SQL Server 2008 中创建新的数据库图表

> ID：10053813
> 
> 赞同：4
> 
> 时间：2012-04-07T10:49:18.810
> 
> 标签：visual-studio, sql-server-2008

我正在使用 SQL Server Management Studio 2008 和 SQL Server 2008。

目前，我无法在 SQL Server 2008 实例上从 SSMS 2008 创建新的数据库图。

有没有人经历过这个？

在我尝试安装 Visual Studio 11 Beta 后问题开始了，显然 Beta 还安装了 SQL Server 2012 RC0。现在我已经卸载了 Visual Studio 11 Beta 和附带的 SQL Server 2012。

编辑：当我尝试创建新的数据库图表时显示的错误消息是：“找不到指定的模块（MS Visual Database Tools）”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T10:58:16.660

我有同样的问题，但从来没有找到错误的解释。我最终卸载了 SQL Server 2012，卸载了 Visual Studio 11 Beta，然后重新安装了 Visual Studio 11 Beta（保留 SQL Server 2008）。我现在可以从 SSMS 2008 创建 DB 图，但不能从 Visual Studio 11 Beta 中创建（我认为 Visual Studio 11 Beta 不支持该功能，至少不支持 SQL Server 2008）。

# cakephp-2.0 - cakephp 中 deleteAll 的问题..

> ID：10053814
> 
> 赞同：0
> 
> 时间：2012-04-07T10:49:28.813
> 
> 标签：cakephp-2.0

我正在使用 cakephp 2.0。使用 deleteAll 函数。我的记录没有从数据库中删除，我没有收到任何错误。

```
public function admin_deleteTutorial($tutorial_id = null){
    if($tutorial_id > 0){
        //          $this->Tutorial->delete($tutorial_id);

        $condition = array('TutorialDiscussion.tutorial_id' => $tutorial_id );
        $this->TutorialDiscussion->deleteAll($condition);

        $this->Session->write('message','Tutorial details deleted successfully.');
        $this->redirect('/admin/tutorials/index/');

    }
}

** Is it required to first find out list of all id's from TutorialDiscussion having tutoril id this $tutorial. or it will delete all itself.** Though records are deleted from TUtorials so I have commented that. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T10:17:22.487

尝试将`$cascade`第二个参数设置为true。因此，所有相关记录也将被删除，如果`dependent`在您的模型中也设置为 true。

[依赖](http://book.cakephp.org/2.0/en/models/deleting-data.html) [级联](http://book.cakephp.org/2.0/en/models/deleting-data.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T12:47:55.003

尝试这个

```
$this->TutorialDiscussion->deleteAll($condition,false); 
```

# generics - 如何在 Javadoc 链接中使用泛型类型参数？

> ID：10053820
> 
> 赞同：12
> 
> 时间：2012-04-07T10:50:17.690
> 
> 标签：generics, javadoc

我有以下代码：

```
/**
 * [...]
 *
 * @see #setShowOn(T, Device)
 */
 public static <T extends HasStyle> void setHideOn(T widget, Device device) {
     [...]
 } 
```

`setShowOn`具有与 相同的签名`setHideOn`。Javadoc 抱怨：

```
Tag @see: can't find setHideOn(T, Device) in com.github.[...] 
```

我尝试了不同的替代方案（`@see #setShowOn(<T>, Device)`, `@see #setShowOn(T extends HasStyle, Device)`, ...），但这些替代方案甚至在 Eclipse 中都不起作用。（`@see #setShowOn(T, Device)`确实。）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-08T17:18:46.123

我找到了答案。这有效：

```
@see #setHideOn(HasStyle, Device) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T16:00:18.423

我不得不求助于擦除具有通用参数的方法，例如：

```
@see #setHideOn(Object, Device) 
```

在[JOpt Simple](http://pholser.github.com/jopt-simple)中，我有一个例子——在 OptionSet.java 中，有一些`@linkplain`引用`ArgumentAcceptingOptionSpec#defaultsTo(V, V...)`我必须编码为`ArgumentAcceptingOptionSpec#defaultsTo(Object, Object[])`。

# c++ - 高效安全的资源管理

> ID：10053825
> 
> 赞同：0
> 
> 时间：2012-04-07T10:50:39.850
> 
> 标签：c++, architecture, resources

在我的游戏中，我有一个资源管理器的概念，这是一个存储和管理资源（字体、纹理、网格等）的类。非常粗略的有以下方法：

```
struct ResourceManager
{
template<class T>
std::shared_ptr<T> GetResource(id_type id) const
{
    auto pRes = std::dynamic_pointer_cast<T,Resource>(getResource(id));
    return pRes;
}

}
void load(); //loads resources from some storage
//etc.
}; 
```

后来，资源被一些游戏对象等获取。所以，很明显，Resource 必须被包裹到 shared_ptr 中。但是 Resource 的内部数据呢？它是否也应该被包装到 shared_ptr 中？

例如，Mesh 资源：

```
struct MeshResource : public Resource
{
std::vector<vertex>* vertices;
std::vector<unsigned int>* indexes;
}; 
```

应该将顶点和索引包装到 std::shared_ptr 中吗？如果是 - shared_ptr 是否有任何替代方法（成语或模式，任何东西）？这是非常巨大的开销，我想避免在资源子类中使用 shared_ptr。另一方面，我想以某种方式保护数据。例如，以下代码必须引发编译错误。

```
delete pMeshResource->vertices; 
```

有任何想法吗？

**我想出的解决方案：**

```
struct MeshResource : public Resource
{
    const std::vector<unsigned int>& indexes() const;
    const std::vector<vertex>& get_vertices() const;
private:
    std::vector<vertex> vertices;
    std::vector<unsigned int> indexes;
}; 
```

MeshResource 是常量（资产）资源。无法修改它，但您始终可以从中读取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T10:53:41.693

只保留真正需要在堆上共享的东西。其他所有内容都应该在堆栈上。困难的决定是要共享什么，不共享什么，这也很大程度上取决于实际用例。

如果两个网格共享顶点并且一个被一些变形修改，会发生什么？另一个是否也会使用变形的顶点，或者您是否实施写入时复制，以便在修改一个网格时立即为每个网格提供单独的一组顶点？

# javascript - 使用 jsTree 以编程方式检查复选框节点

> ID：10053827
> 
> 赞同：3
> 
> 时间：2012-04-07T10:50:54.110
> 
> 标签：javascript, jquery, jstree

在用 jsTree 构建的树中，我将标签中的文本放在`<a>`变量中。我想**检查**那个节点。我该怎么做？

我目前正在使用 jQuery 查找该节点并更改其类。但是，这不会通过使父节点在其类中**未确定来修复父节点。**我试过做`$('.colors').jstree("checkbox_repair")`，但这似乎没有做任何事情。

如果有人能真正回答这两个问题，那就太好了，因为它们与同一个问题有关。

这是一个 jsFiddle，说明了问题--> [http://jsfiddle.net/thapar/5XAjU/](http://jsfiddle.net/thapar/5XAjU/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T12:05:34.490

在 js_tree 中有`.check_node ( node )`和`.uncheck_node ( node )`功能，我认为这就是你所要求的。在这里查看文档：http: [//www.jstree.com/documentation/checkbox](http://www.jstree.com/documentation/checkbox)

这是上面链接中文档的摘录，“如何执行操作”：

```
/* METHOD ONE */
jQuery("some-selector-to-container-node-here")
    .jstree("operation_name" [, argument_1, argument_2, ...]);

/* METHOD TWO */
jQuery.jstree._reference(needle)
    /* NEEDLE can be a DOM node or selector for the container or a node within the container */
    .operation_name([ argument_1, argument_2, ...]); 
```

所以我认为这种语法应该有效

```
$.jstree._reference(".colors").check_node('li#tree_3'); 
```

另外我不确定你应该使用一个类来引用你的树。可能使用 ID 来引用您的树，然后使用以下语法：

```
$.jstree._reference("#colors").check_node('li#tree_3'); 
```

//编辑：请记住，最新版本的 jsTree 不再具有名为 _reference 的函数。它被重命名为引用（没有前导下划线）。（最后由@mkli90 于 24/08/2015 15:45 检查）链接：[https](https://www.jstree.com/api/#/?f=) ://www.jstree.com/api/#/?f= $.jstree.reference(needle)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-30T19:08:00.137

如果您想在加载时检查 jsTree 节点，例如：

```
$(document).ready(function()
{
  $.jstree._reference('#menu').check_node('#pih2');
}); 
```

这没用。对我来说，工作如下：

```
$(function () {
    $('#mainMenu1').bind('loaded.jstree', function(e, data){ //waiting for loading
          $.jstree._reference('#menu').check_node('#pih2');  //check node with id pih2
        $.jstree._reference('#menu').check_node('#pih6');  //check node with id pih6
  }); 
}); 
```

我使用 jsTree 1.0-rc3 和 JQuery 1.7.1。芦荟

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-16T09:37:45.853

在当前版本的 jstree 中，以下语法有效：

```
$("#my_tree").jstree("check_node", node_id); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-07T11:39:16.493

我想添加这个解决方案，该`select_node`函数的功能与`check_node`. 我们可以按如下方式使用它；

```
$('#jstree_id').on('loaded.jstree', function() {
    $("#jstree_id").jstree("select_node", ["list of nodes go here"]);
}); 
```

您可以使用它来选择数组中的多个节点或单个节点。

# android - 如何在服务中轮询当前时间？

> ID：10053832
> 
> 赞同：0
> 
> 时间：2012-04-07T10:51:45.827
> 
> 标签：android, service, time

我在询问之前进行了搜索，所以请不要告诉我这样做。我对 Android 比较陌生，所以很容易混淆。

我正在制作一个简单的应用程序，可以根据时间更改铃声音量。为此，我知道我需要一个在 bg 中持续运行并监控时间的服务。但是，我真的不知道如何处理这个问题。我有专业的 Android 应用程序开发书，但没有找到任何有用的东西。

我的问题：

*   如何在不损坏电池的情况下不断检查时间

如果需要我的代码（作为我实际工作的证明），我会发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T11:01:39.980

你不需要服务。使用 AlarmManager 类。它就像一个闹钟，正是您对此类应用程序所需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T11:03:03.597

> 需要一个在 bg 中持续运行并监控时间的服务

不，实际上这不是怎么做的。android 上的服务与普通的 windows 服务/unix 守护进程不同。他们应该完成他们的工作，然后停止自己，直到他们重新开始 - 以节省电池。

[您应该使用AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)在某个时间点启动您的服务，它会发送启动意图来运行该服务。当服务完成它应该做的事情时*（在此处更改 rintone 音量）*，使用`Service.stopSelf()`来杀死它。

# caching - 核对xib缓存

> ID：10053834
> 
> 赞同：0
> 
> 时间：2012-04-07T10:51:51.607
> 
> 标签：caching, localization, xib

由于一系列丑陋的代码签名问题，我决定将新文件导入从备份中检索到的应用程序的先前版本。最后一切都很好，但主控制器 xib 文件继续呈现原始布局，尽管我插入了本地化的新布局。我也尝试删除本地化的，但它根本不在乎：在我所有的系统中，我都没有那种形状的 xib，所以我认为它在某个选项卡的某个地方保留了一些奇怪的缓存，它使用的选项卡没有找到非本地化的 xib。按照这个想法，我还尝试从 Xib 文件中删除本地化，但它们仍然保留在语言文件夹中。

我尝试多次删除派生数据以及清理构建无济于事。我可以删除哪些其他目录来摆脱那些 xib 预处理文件？

# ruby - 在控制台中动态更改字体

> ID：10053836
> 
> 赞同：4
> 
> 时间：2012-04-07T10:52:06.107
> 
> 标签：ruby, fonts, console, terminal, irb

是否有适当的插件或类来更改通用输出控制台中的字体大小、字体类型和装饰？

您可以通过进入首选项来更改终端的字体，但这不是我在这里寻找的。我希望能够从代码中动态更改字体。

Ruby 中是否有任何内容或一些终端命令可以这样做（我使用 Mac OS X）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T19:20:58.567

ANSI 终端中使用的字体/字体大小是特定于实现的，而 ANSI 颜色/样式代码是提供装饰的唯一方法。我发现向控制台输出添加颜色和样式的最简单方法是使用`colorize`gem。

`gem install colorize`

例子：

```
puts "This is blue".colorize( :blue )
puts "This is light blue".colorize( :light_blue )
puts "This is also blue".colorize( :color => :blue )
puts "This is red on blue and underline".colorize( :red ).on_blue.underline
puts "This is blue text on red".blue.on_red.blink 
```

这是[着色自述文件](http://colorize.rubyforge.org/files/README_txt.html)。

或者，如果您想变得更漂亮并做一些 UI 元素，您可以使用`rbcurse`gem：

`gem install rbcurse`

这是一些[rbcurse 截图](https://github.com/rkumar/rbcurse/wiki/screenshots)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T11:20:18.253

无法在标准终端中动态更改字体或字体大小。他们大多只识别标准的[ANSI](http://en.wikipedia.org/wiki/ANSI_escape_code) /VT 转义码，只支持颜色和（某些）样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T10:57:13.770

我建议你可以使用 fancy_irb 模块，它可以装饰你的 irb 控制台。:)

`gem install fancy_irb`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-06T14:33:48.747

如果您正在寻找**rails 默认 web 控制台**（显示在浏览器中）的解决方案，我建议您获取一个浏览器扩展，您可以在其中向页面添加其他样式，然后只需覆盖以下类：

```
.console-prompt-label,
.console-prompt-display, 
.console-message {
  font-size: 16px;
  line-height: 16px;
} 
```

如果您使用的是 chrome，则可以使用[StyleBot](https://chrome.google.com/webstore/detail/stylebot/oiaejidbmkiecgbjeifoejpgmdaleoha)。然后你需要：

1.  安装 Stylebot
2.  `rails server`在浏览器中运行并打开 localhost
3.  单击 stylebot 扩展徽标 (CSS) 并单击`Open Stylebot...`
4.  一个sidenav应该打开，在左下角按下按钮`Edit CSS`
5.  从上面添加 CSS 并保存

**就是这样，再也没有小型控制台输出了。**

[![在此处输入图像描述](../Images/02969a8597063acb0ed3bb7aa2ba9a47.png)](https://i.stack.imgur.com/FS2bo.png)

# qt - 设计师如何创建 Line 小部件？

> ID：10053839
> 
> 赞同：18
> 
> 时间：2012-04-07T10:52:21.283
> 
> 标签：qt, qt4.7

在 Qt Designer 中，您可以拖动一个“Line”小部件，这将在您的布局中创建一条线。

但是我检查了文档和标题，我没有找到“行”标题/小部件，它是什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2017-02-09T14:48:05.180

在 Qt 5.7 中，Qt Designer 为水平线生成的代码（可以使用“Form/View Code...”在菜单中检查）是：

```
QFrame *line;
line = new QFrame(Form);
line->setFrameShape(QFrame::HLine);
line->setFrameShadow(QFrame::Sunken); 
```

这将创建您在 Qt Designer 中看到的行。

当前的答案似乎没有给出可行的解决方案，这里是所有答案的比较（这个解决方案是第一行）：

[![Qt中的水平线](../Images/29a9c92d745900267e89d46335baf426.png)](https://i.stack.imgur.com/tqIpO.png)

完整代码：

```
#include <QtWidgets>

int main(int argc, char **argv) 
{
  QApplication app(argc, argv);

  QWidget widget;
  auto layout = new QVBoxLayout;
  widget.setLayout(layout);
  widget.resize(200, 200);

  auto lineA = new QFrame;
  lineA->setFrameShape(QFrame::HLine);
  lineA->setFrameShadow(QFrame::Sunken);
  layout->addWidget(lineA);

  QWidget *lineB = new QWidget;
  lineB->setFixedHeight(2);
  lineB->setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Fixed);
  lineB->setStyleSheet(QString("background-color: #c0c0c0;"));
  layout->addWidget(lineB);

  auto lineC = new QFrame;
  lineC->setFixedHeight(3);
  lineC->setFrameShadow(QFrame::Sunken);
  lineC->setLineWidth(1);
  layout->addWidget(lineC);

  QFrame* lineD = new QFrame;
  lineD->setFrameShape(QFrame::HLine);
  layout->addWidget(lineD);

  widget.show();
  return app.exec();
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-06T08:05:37.613

我猜你的意思是水平/垂直线小部件：它只是一个简单的 QWidget，背景颜色为灰色，水平是固定高度（1-3 像素）和扩展宽度小部件，垂直是固定宽度扩展高度小部件。

横向示例代码：

```
QWidget *horizontalLineWidget = new QWidget;
horizontalLineWidget->setFixedHeight(2);
horizontalLineWidget->setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Fixed);
horizontalLineWidget->setStyleSheet(QString("background-color: #c0c0c0;")); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-05-22T17:22:48.363

查看**QFrame::setFrameShape()**。要获得一条线，请使用**QFrame::HLine**或**QFrame::VLine**作为函数的参数。

```
// Create a horizontal line by creating a frame and setting its shape to QFrame::HLine:
QFrame* hFrame = new QFrame;
hFrame->setFrameShape(QFrame::HLine);

// Create a vertical line by creating a frame and setting its shape to QFrame::VLine:
QFrame* vFrame = new QFrame;
vFrame->setFrameShape(QFrame::VLine); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-18T10:11:37.480

它是一个高度为 3，下沉阴影和线宽等于 1 的 QFrame。如果检查 uic 工具生成的 header，您可以看到它。

# css - CSS：正文边框不会像中间 div 那样扩展？

> ID：10053841
> 
> 赞同：0
> 
> 时间：2012-04-07T10:52:38.043
> 
> 标签：css, border

我有这样的规则：

```
body{border:1px solid gray;}

#middle{
float:left;
margin-left:3%;
margin-top:20px;
width:41%;
border-top:solid #aaaaaa 1px;
}

.message-content{
padding:0 10px 0 10px;
float:left;
} 
```

我的 HTML 就像：

```
<html>
<body>
<div id="middle">
  <div class="message-content">Loris ipsidum</div>
  <div class="message-content">Loris ipsidum</div>
<div id="clear"></div>
</div>
</body>
</html> 
```

我试图在 JSFiddle 中复制它，但我做不到。基本上，发生的事情是，在我得到许多消息内容的 div 之后，规则定义的边界`body`就通过了。基本上看起来内容中间有一条线。有任何想法吗？

我会试着举一个可行的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T10:54:48.703

由于您的`#middle`元素是浮动的，因此它们不计入父级（在本例中为主体）的高度，因此主体仅占用窗口的高度。

您似乎没有为元素定义`clear`样式。`#clear`即便如此，`clear`元素应该在浮动元素*之后*，而不是在浮动元素内部。

# iphone - 关闭应用程序后阻止屏幕截图

> ID：10053842
> 
> 赞同：1
> 
> 时间：2012-04-07T10:52:43.067
> 
> 标签：iphone, ios

我最近发现了一个问题，但找不到解决方案。通常，当我们在模拟器中运行应用程序时，我们会得到以下文件夹：文档、库、tmp 等。现在如果我在模拟器中突然关闭应用程序，然后在库文件夹中我们可以在该快照文件夹中找到缓存文件夹。在此文件夹中，我们得到一个具有捆绑标识符名称的文件夹，并且在其中我们获得了关闭它的应用程序的屏幕截图。现在我的要求是在我关闭应用程序时停止这些屏幕截图

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T11:20:06.603

您需要将视图隐藏在

```
- (void)applicationDidEnterBackground:(UIApplication *)application 
```

这是标准行为，因为它给人的印象是，如果应用程序似乎回到停止的位置，它会更快地恢复 - 即使从技术上讲，应用程序还没有响应。您需要做的就是在上面的方法中在屏幕上放一些其他东西，这将成为用户打开您的应用程序备份时首先出现的东西

# java - 从 Linked HashMap 中查找键并将其存储在列表中

> ID：10053843
> 
> 赞同：-2
> 
> 时间：2012-04-07T10:52:53.737
> 
> 标签：java, collections

你有两个 LinkedHashMap

```
Map m1 = new LinkedHashMap();
m1.put("1","One");
m1.put("3","Three");
Map m2 = new LinkedHashMap();
m2.put("2","Two");
m2.put("4","Four"); 
```

从 Linked HashMap 中查找键并将其存储在列表中。

该列表应包含 1、2、3、4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T11:41:54.983

真的听起来像家庭作业，所以我不会给你确切的代码。我认为到目前为止的答案是错误的，因为它们没有交错。尝试这个：

获取第一个地图的 Iterator iterator1。获取第二个地图的 Iterator iterator2。

使用 while 循环并询问 iterator1 和 iterator2 中的下一个元素。剩下的就等你自己去想了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T11:23:55.463

这是解决方案：

```
 List list = new ArrayList();
        list.addAll(m1.keySet());
        list.addAll(m2.keySet());
        Collections.sort(list); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T11:28:05.077

您可以创建一个列表并从您的地图中添加两个 keySet，如下所示：

```
import java.util.ArrayList;
import java.util.LinkedHashMap;
import java.util.List;
import java.util.Map;

public class Main {

    public static void main(String[] args) {
        Map m1 = new LinkedHashMap();
        m1.put("1","One");
        m1.put("3","Three");
        Map m2 = new LinkedHashMap();
        m2.put("2","Two");
        m2.put("4","Four");
        List<String> list = new ArrayList<String>();
        list.addAll(m1.keySet());
        list.addAll(m2.keySet());
        for(String s : list) {
            System.out.println(s);
        }
    }

} 
```

# c# - 心率监测模拟器

> ID：10053844
> 
> 赞同：0
> 
> 时间：2012-04-07T10:53:27.107
> 
> 标签：c#, simulation, azure-sql-database, windows-phone

我正在开发一个 Windows Phone 应用程序。我需要使用 C# 开发一个心率模拟器。该模拟器将生成一个值 (BPM)。每次生成一个值时，我都会将它发送到我的 SQL-Azure 数据库。我做了一些搜索，但找不到任何可以帮助我模拟的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T15:30:33.500

> 我正在开发一个 Windows Phone 应用程序

使用 Windows Phone 的手机是否具有内置心率监测器？

你似乎说的是：

*   我需要凭空想出一个数字

    > 模拟器将生成一个值（BPM）

*   然后将此值发送到 SQL 数据库。

我将留下“你为什么要这样做”部分。

最好的办法是找到各种情况下的典型 BPM 列表，并在这些值附近随机生成一个数字。

您可以使用加速度计来检测您所处的情况。如果它说手机正在疯狂移动，则选择“正在运行”BPM，否则选择“坐下”或“慢走”。

您可以使用您最喜欢的搜索引擎来寻找“心电波模拟器”来增加一些额外的真实感。

# php - php - 使用 preg_match 或 preg_match_all

> ID：10053850
> 
> 赞同：1
> 
> 时间：2012-04-07T10:53:59.343
> 
> 标签：php, regex, preg-match, preg-match-all

```
<font size="+1"><font size="+2" color="green"><b>1.</b> 
</font><b>If no head injury is too trivial to be neglected, then:</b></font> 
```

在 PHP 中使用`preg_match`或者`preg_match_all`我想检索文本“如果没有头部受伤太微不足道而无法忽视，那么：”

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T11:08:42.407

**代码 ：**

```
<?php

$str = '<font size="+1"><font size="+2" color="green"><b>1.</b></font><b>If no head injury is too trivial to be neglected, then:</b></font>';
$pattern = "/font><b>(.+)<\/b>/";
preg_match($pattern,$str,$matches);

echo $matches[1];

?> 
```

**输出 ：**

> 如果没有任何头部受伤是微不足道而不容忽视的，那么：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T11:27:54.010

我不确定，在什么条件下您选择要捕获的字符串，为什么 1\. 没有捕获，但您的 2\. 字符串呢？只要你不解释，我只能猜测，所以作为一个表达式：

`/<\w+(?:\s+\w+=(?:(?:"[^"]*")|(?:'[^']*')))*\s*>([^<]+)</\w+>/g`

将匹配所有仅包含文本节点的 html 标签（对于 xhtml 来说应该是这样，因为`<p>text<br /></p>`格式不正确......）。

so`<p>text</p><br>text2</br>`将被匹配，因此文本将在捕获组 1 中。

`<\w+(?:\s+\w+=(?:(?:"[^"]*")|(?:'[^']*')))*\s*>`将捕获每个打开的 xhtml 标记

`([^<]+)`将捕获除 < 之外的所有 cahrs 并将其放入捕获组

`</\w+>`终于抓住了结束标签...

这`g`是全局标志，以便表达式可以捕获多个结果...

祝你好运，如果你需要不同的东西，请更精确一点......

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-07T10:59:55.827

模式将是这样的：

```
/<\s*b\s*>(.+)<\s*\/b\s*>/ 
```

# c# - 在c#中连接变量名

> ID：10053852
> 
> 赞同：0
> 
> 时间：2012-04-07T10:54:40.277
> 
> 标签：c#, windows-phone-7

在我的 wp7 应用程序中，我执行了一个 Web 请求，该请求返回一个状态代码，如 100、110 等。每个状态代码都与一条状态消息相关联。此状态消息已在我的应用程序中本地化。

例如

```
m100 'OK'
m110 'Text was empty' 
```

我想在这样的消息框中显示此文本。`contents`给我们状态码作为字符串值。

```
var s = 
    MessageBox.Show(AppResources.m100, AppResources.Notice, MessageBoxButton.OK); 
```

但我不想为每条消息指定一个消息框。我想以这样的动态方式处理这个问题。

```
var s = 
    MessageBox.Show(AppResources.m+contents, AppResources.Notice, 
                    MessageBoxButton.OK); 
```

知道怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T10:58:21.247

您应该能够使用[`ResourceManager`](http://msdn.microsoft.com/en-us/library/system.resources.resourcemanager.aspx)来获取值：

```
AppResources.ResourceManager.GetString("m" + contents) 
```

# c++ - getline 不让我输入，C++

> ID：10053860
> 
> 赞同：0
> 
> 时间：2012-04-07T10:56:25.673
> 
> 标签：c++, getline

我尝试获取用户选择的游戏名称并将其存储在向量中。我使用 getline 以便用户可以使用空格。当我尝试键入要添加的新游戏时，它不会让我这样做。它会自动显示我的游戏库。请告诉我我做错了什么。问题在于 if(action == "add")

这是我的代码：

```
#include <iostream>
#include <string>
#include <vector>
#include <algorithm>
#include <ctime>
#include <cstdlib>

using namespace std;

int main()
{
     vector<string>::const_iterator myIterator;
vector<string>::const_iterator iter;                

vector<string> games;                                
games.push_back("Crysis 2");
games.push_back("GodOfWar 3");
games.push_back("FIFA 12");

cout <<"Welcome to your Games Library.\n";
cout <<"\nThese are your games:\n";
for (iter = games.begin(); iter != games.end(); ++iter)
{
    cout <<*iter <<endl;
}
//the loop!
string action;
string newGame;

cout <<"\n-Type 'exit' if you want to quit.\n-Type 'add' if you want to add a game.\n-Type 'delete' if you want to delete a game.\n-Type 'find' if you want to search a game.\n-Type 'game' if you don't know what game to play.\n-Type 'show' if you want to view your library.";

while (action != "exit")
{

    cout <<"\n\nWhat do you want to do: ";
    cin >> action;

              //problem is here
    if (action == "add")
    {
        cout <<"\nType the name of the game you want to add: ";
        getline (cin, newGame);

        games.push_back(newGame);

        for (iter = games.begin(); iter != games.end(); ++iter)
        {
            cout <<*iter <<endl;
        }

        continue;
    }
    else if (action == "show")
    {
        cout <<"\nThese are your games:\n";
        for (iter = games.begin(); iter != games.end(); ++iter)
        {
            cout <<*iter <<endl;
        }
    }
    else if (action == "delete")
    {
        cout <<"Type the name of the game you want to delete: ";
        cin >> newGame;
        getline (cin, newGame);

        iter = find(games.begin(), games.end(), newGame);

        if(iter != games.end())
        {
            games.erase(iter);
            cout <<"\nGame deleted!";
        }
        else
        {
            cout<<"\nGame not found.";
        }

        continue;
    }
    else if (action == "find")
    {
        cout <<"Which game you want to look for in your library: ";
        cin >> newGame;
        getline (cin, newGame);

        iter = find(games.begin(), games.end(), newGame);

        if (iter != games.end())
        {
            cout << "Game found.\n";
        }
        else
        {
            cout << "Game not found.\n";
        }

        continue;
    }
    else if (action == "game")
    {
        srand(static_cast<unsigned int>(time(0)));
        random_shuffle(games.begin(), games.end());
        cout << "\nWhy don't you play " << games[0];

        continue;
    }
    else if (action == "quit")
    {
        cout <<"\nRemember to have fun while gaming!!\n";
        break;
    }
    else
    {
        cout <<"\nCommand not found";
    }
}
return 0;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T11:01:20.433

我不明白你到底写了什么，但是：

*   `getline`在您的情况下，将在其第二个参数中获取整行`newGame`
*   当您`cin >> newGame;`在 getline 上方调用时，您首先使用`istream operator >>`of `string`。它一直读取到第一个分隔符。在您的情况下，这是和之间的`Tomb`空间`Raider`
*   `cin >> newGame;`之后，您使用覆盖读取的值`getline`。直到`getline`值是`Tomb`，之后它变成`Raider`

只需删除`cin`：

```
cin >> newGame;
getline (cin, newGame); 
```

->

```
getline (cin, newGame); 
```

**编辑**现在，当您发布所有代码时，我确信您的情况正是我所想的。在该行中`cin >> action;`，您提示用户选择一个操作。他进入它并点击进入，这样他就可以让你的程序再次激活。但是，`cin >>`将读取该值，但不会清除用户按下的输入。因此，`getline`您调用的第一个将只读取此输入，仅此而已。如果你这样做：

```
cin >> newGame;
getline (cin, newGame); 
```

->

```
cin.get();
getline (cin, newGame); 
```

这将起作用。我尝试过这个。基本上第一个`cin.get();`清除输入并`getline`提示用户输入。

**EDIT2**在处理尾随新行的布局上添加了一项改进。这可能是处理它们的最正确方法，但我故意不提供此解决方案，以免将 OP 与复杂代码混淆：

```
 if (cin.peek() == '\n' || cin.peek() == '\r') {
      cin.get();
   }
   getline (cin, newGame); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T11:25:15.317

混合

```
cin >> value1; 
```

和

```
getline(cin, value2); 
```

正在招惹麻烦。问题是`getline`读取到下一个 '\n' （并消耗它），而`>>`读取到下一个空白（并且不消耗它）。

这意味着当您读取`value1`via时`>>`，换行符仍保留在流中，然后您尝试读取整行并读取“无”（这`getline`将消耗作为流的直接输入的换行符）。

加倍的建议`getline`将起作用，但只有在您在另一个分支中阅读 via`getline`时，它才会中断，因为这`getline`会消耗换行符，与 相反`>>`，它不会。

`getline`如果需要进一步处理，我建议您通过 处理所有输入，然后标记读取的字符串。这样，您可以确保换行处理是一致的，并且可以正确读取空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T11:12:11.453

你能试试这个：

```
cout <<"Type the name of the game you want to add: "; 
```

而不是你的这段代码：

```
cout <<"\nType the name of the game you want to add: "; 
```

我不确定它是否有效。但请试一试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T11:22:05.673

问题可能是因为一个杂散的'\n'。顾名思义，getline 获取完整行的值。那么您的编译器如何知道您何时完成。它使用字符`\n`. 如果它读取一个left over `\n`，它将假设该行已经结束，所以如果你删除它我认为它应该可以工作。所以只需找出可能留下杂散\n的getline之前的行。

# c - C strcpy 到共享内存中的字符串数组

> ID：10053866
> 
> 赞同：0
> 
> 时间：2012-04-07T10:57:24.537
> 
> 标签：c, shared-memory, arrays

我想（或需要）做一些事情

```
char **my_array = malloc(1000*64);
strcpy(arr[0], "test"); 
```

虽然我知道 arr[0] 没有指向单独的分配内存，但我认为应该能够像这样将字符串复制到其中（但它是分段的）。这有效

```
arr[0] = "test"; 
```

然而那是行不通的，因为我的实际目标是在共享内存中做到这一点。

```
shm_array = shmget(IPC_PRIVATE, 1000 * 64, IPC_CREAT | 0644);
my_array = (char**) shmat(shm_array, (void**)0, 0); 
```

实际上，我的问题可以改写为：“如何在共享内存中创建字符串数组？”。我尝试创建 1000 个单独的“字符串”共享内存段，但除此之外它不起作用，它似乎也是错误的。此外，我认为应该能够简单地使用相对指针偏移量写入一个大的共享内存段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T11:02:05.857

您可以只创建一块内存并写入特定的偏移量：

```
char * const buf = malloc(HUGE);

strcpy(buf + offset1, "hello");
strcpy(buf + offset2, "world"); 
```

`strncpy`使用并传递一个大小可能会更好，`HUGE - offset`以确保你不会跑到最后。管理偏移量是您自己的责任。或者你可以使用`strncat`，如果效率不那么重要的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T11:08:11.277

看起来您正在寻找一个 1000 x 64 的二维数组。如果确实如此，您可以这样做：

```
struct shared_1000_by_64 {
    char strings[1000][64];
};

struct shared_1000_by_64 *shared = malloc(sizeof(struct shared_1000_by_64));
for (int i = 0 ; i != 1000 ; i++) {
    strcpy(shared->strings[i], "test");
} 
```

这使用了防止数组[*衰减为指针*](http://c-faq.com/aryptr/aryptrparam.html)的标准技巧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T11:47:32.080

如果要动态分配 64 字符数组的数组，则使用指向数组的指针而不是指向指针的指针：

```
char (*my_array)[64] = malloc(1000 * sizeof my_array[0]);
strcpy(my_array[0], "test"); 
```

或者对于共享内存的情况，

```
shm_array = shmget(IPC_PRIVATE, 1000 * sizeof my_array[0], IPC_CREAT | 0644);
my_array = shmat(shm_array, NULL, 0); 
```

# c# - 当鼠标在控件上方时如何消除 ToolStripDropDownButton 上的蓝色焦点

> ID：10053867
> 
> 赞同：1
> 
> 时间：2012-04-07T10:57:35.597
> 
> 标签：c#, focus, mouse, toolstripdropdown

我使用**ToolStripDropDownButton**，**Forecolor**是**white**，**Backcolor**是**trasparent**。当鼠标在控件上方时，“ToolStripDropDownButton”的文本不可读，因为“蓝色焦点”可见。

当鼠标在控件上方时，如何消除/移除**ToolStripDropDownButton**上的“**蓝色焦点” ？**如下图所示。谢谢你。

 **![在此处输入图像描述](../Images/a729fb3267664b280cbcfa0fd72a5353.png) 这会产生像 digEmAll 图片这样的输出。

```
using System;
using System.Windows.Forms;
using System.Drawing;

namespace WindowsFormsApplication1
{
   public partial class Form1 : Form
   {
       public Form1()
       {
           InitializeComponent();

           toolStrip1.BackColor = Color.Transparent;
           toolStrip1.GripStyle = ToolStripGripStyle.Visible;
           toolStrip1.Renderer = new MyRenderer();
       }

       private class MyRenderer : ToolStripSystemRenderer
       {
          protected override void OnRenderArrow(ToolStripArrowRenderEventArgs e)
          {
              e.ArrowColor = Color.White;
              base.OnRenderArrow(e);
          }

          protected override void OnRenderToolStripBorder(ToolStripRenderEventArgs e)
          {
             // remove white line bellow button (http://connect.microsoft.com/VisualStudio/feedback/details/92862/toolstrip-always-draws-a-border-on-the-bottom-with-rendermode-system-and-docked-left-or-right)
             //base.OnRenderToolStripBorder(e);
          }
       }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T12:32:06.737

您可以为 ToolStrip 重新分配 Renderer 属性以创建您自己的渲染器。然而，重写 OnRenderSplitButtonBackground() 非常痛苦，拆分按钮有很多需要绘制的装饰物，并且股票画家方法是私有的。在您的情况下，更简单的方法是覆盖颜色表。让它看起来像这样：

```
public partial class Form1 : Form {
    public Form1() {
        InitializeComponent();
        toolStrip1.Renderer = new MyRenderer();
    }

    private class MyRenderer : ToolStripProfessionalRenderer {
        public MyRenderer() : base(new MyColors()) {}
    }

    private class MyColors : ProfessionalColorTable {
        public override Color ButtonSelectedGradientBegin {
            get { return Color.Black; }
        }
        public override Color ButtonSelectedGradientMiddle {
            get { return Color.Black; }
        }
        public override Color ButtonSelectedGradientEnd {
            get { return Color.Black; }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T12:17:01.093

您可以更改`ToolStrip`. 例如使用`ToolStripSystemRenderer`而不是默认值`ToolStripProfessionalRenderer`：

```
this.toolStrip.Renderer = new ToolStripSystemRenderer(); 
```

你会得到以下结果：

![在此处输入图像描述](../Images/991ae3c0c21a9fa17a6198fdd35d3d71.png)

如果您想更深入地自定义它，您可以扩展 ToolStripSystemRenderer。例如，使用以下代码，您可以更改箭头的颜色：

```
class MyRenderer : ToolStripSystemRenderer
{
    protected override void OnRenderArrow(ToolStripArrowRenderEventArgs e)
    {
        e.ArrowColor = Color.White;
        base.OnRenderArrow(e);
    }
} 
```

结果：

![在此处输入图像描述](../Images/8e88dd72d344f48bcdd059ea66389e2f.png)**

# javascript - 从 XML 文件中剖析一组单词并将它们存储在 Javascript 中的数组中

> ID：10053869
> 
> 赞同：0
> 
> 时间：2012-04-07T10:58:01.357
> 
> 标签：javascript, jquery, xml, arrays, split

我这里有这个 XML 文件。

```
<?xml version="1.0" encoding="UTF-8"?> 
<xml> 

<word> 
  <threeletter>RIP</threeletter>
  <threeletter>PIE</threeletter>  
  <fourletter>PIER</fourletter>
  <fourletter>RIPE</fourletter>
  <fiveletter>SPIRE</fiveletter> 
  <sixletter>SPIDER</sixletter> 
 </word>

 <word> 
  <threeletter>SUE</threeletter> 
  <threeletter>USE</threeletter> 
  <fourletter>EMUS</fourletter>
  <fourletter>MUSE</fourletter>
  <fiveletter>SERUM</fiveletter> 
  <sixletter>RESUME</sixletter> 
 </word>
</xml> 
```

然后，一旦页面完成加载，我将加载它们并将这些单词存储在一个名为 word 的数组中

```
$(document).ready(function() {

    $.ajax
    ({ 
        url: "dictionary.xml", 
        success: function( xml )
        { 
            $(xml).find("word").each(function()
            { 
            words.push($(this).text());
            }); 
        }       
    }); 
```

})

然后当我访问`alert(word[0])`它的每个内容时，我会看到这个结果

```
RIP
PIE  
PIER
RIPE
SPIRE 
SPIDER 
```

所以我假设 word[0] 是这样的，`word[0] = "RIP PIE PIER RIPE SPIRE SPIDER "`

但是当我这样做时“

```
var x = word[0].split(" ");
                    alert(x[0]); 
```

它没有给我“RIP”这个词任何想法为什么会发生这种情况？我想剖析`words[0]`（来自xml）中的所有单词，然后拆分这些单词并将这些单词存储在一个数组中，但它似乎不知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T11:17:02.620

May be something like this

```
$.ajax({
    url: 'dictionary.xml',
    async: false,
    success: function(xml) {
        $(xml).find("word").each(function(index) {
            words[index] = [];
            $(this).children().each(function() {
                words[index].push($(this).text());

            });
        });

    },
    dataType: 'XML'
});
console.log(words[0]);
console.log(words[1]);​ 
```

# java - 使用 JAVA 查询 SQL - 没有任何反应

> ID：10053876
> 
> 赞同：2
> 
> 时间：2012-04-07T10:59:01.013
> 
> 标签：java, sql, eclipse, sql-server-2008

有人可以帮我吗？我正在尝试使用 JAVA 执行 SQL 查询（到 Microsoft SQL）。但是，我的桌子上什么也没有发生。同样，也不例外。但我很确定这段代码直接连接到我的数据库。这是我的代码。

```
package Testing;
//import java.sql.*;
import java.sql.Connection;

import java.sql.DriverManager;

import java.sql.PreparedStatement;

public class TestingClass {
   public static void main(String[] srg) 
   {
       String driverName = "com.microsoft.sqlserver.jdbc.SQLServerDriver"; // Start JDBC
       String dbURL = "jdbc:sqlserver://localhost:1433;DatabaseName=OPERATIONS";  //  Connect the server and the database
       String userName="AppControlTeam";
       String userPwd="*****";
       //
       Connection connection = null;
       try{
           Class.forName(driverName);
           connection = DriverManager.getConnection(dbURL,userName,userPwd); 
           String sql = "DELETE FROM GFR_GROWTH_RATE";
           PreparedStatement statement = connection.prepareStatement(sql);
           statement.executeUpdate();
           connection.close();
       }
       catch (Exception e){
           e.printStackTrace();
       }

}
} 
```

我已经在包中添加了 JDBC 驱动程序。另外，我很确定这不是类路径问题，因为通过此代码连接到 DB 已经成功。

在此先感谢可以提供帮助的人！:D

-次郎

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T11:06:32.143

如果您`DELETE`没有将 JDBC 驱动程序的自动提交属性设置为 `true`. 也许尝试打电话

```
connection.commit();
// right before...
connection.close(); 
```

或者：

```
connection.setAutoCommit(true);
// before...
PreparedStatement statement = connection.prepareStatement(sql); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T09:58:18.350

可能该行被不同的会话锁定，可能是已修改（删除/更新）表中记录的未提交会话。另一种可能性是通过一个工具打开锁定状态的行/记录 - 所以删除语句挂起。

# wpf - WPF“工具提示”弹出窗口闪烁

> ID：10053879
> 
> 赞同：5
> 
> 时间：2012-04-07T10:59:11.340
> 
> 标签：wpf, popup, flicker

长话短说：我有一个在 ListBox 中显示一堆图表的窗口。当鼠标悬停在图表上（使用 LineSeries）时，有一条线跟随 dataPoints（捕捉到 dataPoint 位置）。在那条线附近，我展示了一个由弹出窗口制作的工具提示，其中显示了有关这些数据点的信息。

![](../Images/ed26ac71827deaf193918a88d3356596.png)

到现在为止还挺好。问题是当我尝试将鼠标移到工具提示上时，弹出窗口开始闪烁（就像它在打开/关闭循环中一样）。我已经在 popup 和 children 上设置了`IsHitTestVisible="False"`。

作为临时解决方案，弹出窗口“退出”游标，如下所示：

![](../Images/9fc990dfceb3a4091ce71d40a617629a.png)

...但很难“理解”。

现在问题来了：怎么了？为什么当鼠标悬停时弹出窗口开始闪烁。

欢迎任何反馈

PS。工具提示 XAML（它是在代码中创建的，但在这里）：

图表的数据上下文是绑定到类的数据，也有一些图表的事件是通过 i 命令实现的。弹出窗口是在该类的构造函数中创建的，

```
ppchart = New Popup() With {.AllowsTransparency = True, .IsHitTestVisible = False,.StaysOpen = True} 
```

...在 MouseMoveCommand 中创建弹出窗口的孩子：

```
Dim ppCont As XElement = <Grid xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                                     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                                     xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk" IsHitTestVisible="False" VerticalAlignment="Top">
                                     <Grid.RowDefinitions>
                                         <RowDefinition Height="Auto"/>
                                         <RowDefinition Height="Auto"/>
                                     </Grid.RowDefinitions>
                                     <Rectangle Opacity="0.5" Grid.RowSpan="2" IsHitTestVisible="False" StrokeThickness="0" RadiusX="2" RadiusY="2" Fill="#FFBABABA"/>
                                     <TextBlock Text="{Binding Over, StringFormat=HH:mm}" FontSize="9" TextAlignment="Center" FontFamily="Segoe UI" IsHitTestVisible="False" Margin="1"/>
                                     <ListBox x:Name="listBox" ItemsSource="{Binding Points}" Background="{x:Null}" BorderBrush="{x:Null}" FontSize="8" Margin="1,0,1,1" Grid.Row="1" IsHitTestVisible="False" IsTextSearchEnabled="False" HorizontalAlignment="Stretch">
                                         <ListBox.ItemContainerStyle>
                                             <Style TargetType="{x:Type ListBoxItem}">
                                                 <Setter Property="Background" Value="Transparent"/>
                                                 <Setter Property="HorizontalContentAlignment" Value="{Binding HorizontalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
                                                 <Setter Property="VerticalContentAlignment" Value="{Binding VerticalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
                                                 <Setter Property="Padding" Value="0"/>
                                                 <Setter Property="IsHitTestVisible" Value="False"/>
                                             </Style>
                                         </ListBox.ItemContainerStyle>
                                         <ListBox.ItemTemplate>
                                             <DataTemplate>
                                                 <Grid IsHitTestVisible="False">
                                                     <Grid.ColumnDefinitions>
                                                         <ColumnDefinition Width="Auto"/>
                                                         <ColumnDefinition Width="Auto"/>
                                                         <ColumnDefinition Width="Auto"/>
                                                     </Grid.ColumnDefinitions>
                                                     <Rectangle Fill="{Binding Culoare}" Width="3" HorizontalAlignment="Left" Margin="1" IsHitTestVisible="False"/>
                                                     <TextBlock Text="{Binding Operation}" HorizontalAlignment="Stretch" IsHitTestVisible="False" Grid.ColumnSpan="1" Grid.Column="1"/>
                                                     <TextBlock Text="{Binding points.Value}" HorizontalAlignment="Stretch" Grid.Column="2" TextAlignment="Right" IsHitTestVisible="False"/>
                                                 </Grid>
                                             </DataTemplate>
                                         </ListBox.ItemTemplate>
                                     </ListBox>
                                 </Grid>

        ppchart.Effect = New Effects.DropShadowEffect() With {.Opacity = 0.5, .BlurRadius = 5, .Direction = 80, .Color = Colors.Black}
        ppchart.Child = CType(XamlReader.Load(New XmlTextReader(New StringReader(ppCont.ToString))), UIElement) 
```

重新编辑：这就是它的样子

![在此处输入图像描述](../Images/6fb1b9aa1307f8c0274b073d2383f742.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-22T14:10:16.947

**在使用MouseEnter**和**MouseLeave**事件时，我也遇到了类似的问题。**WPF上的MouseEnter**事件有一个奇怪的行为，不知道是不是bug。当您从顶部输入考虑的项目时，会发生闪烁。从任何其他方向输入项目会给您一个流畅的弹出窗口。所以为了避免它，我删除了：

```
AllowsTransparency = True 
```

部分。

**编辑：**

虽然仍然无法找到满足我需要的完美行为，但我发现这实际上并不是 Scott Hanselman[在这里描述的错误](http://www.hanselman.com/blog/MouseEnterAndMouseLeaveLoopsInWPF.aspx)

但是，我无法将问题与我的问题进行比较并解决。无论如何，为了拥有动画功能，我想出了一个解决方案，通过检查鼠标的当前位置，至少可以减少 Popup 控件的额外打开或关闭。我定义了一个变量

```
Point currPoint = new Point(); 
```

然后在 MouseEnter 事件或处理程序中：

```
 ListViewItem listViewItem = e.Source as ListViewItem;           
        if(currPoint!=e.GetPosition(listViewItem))
            compToStrategyVM.OpenPopup(listViewItem, listViewPopup); 
```

同样在 MouseLeave 事件或处理程序中：

```
ListViewItem listViewItem = e.Source as ListViewItem;
        if (currPoint != e.GetPosition(listViewItem))
            compToStrategyVM.ClosePopup(listViewPopup); 
```

这里`compToStrategyVM`指的是我的ViewMode，`listViewPopup`指的是Popup控件的名称。尽管问题仍然存在，但通过这种方法，闪烁效果已减少到相当大的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T14:30:21.653

阅读评论后，我相信您使用的事件不正确；将不断触发一个`MouseMove`事件，并且每次弹出窗口显示/隐藏或闪烁。

您想使用`MouseEnter`和`MouseLeave`事件。

# python - Python将源自一个模块的对象从另一个模块导入第三个模块

> ID：10053886
> 
> 赞同：11
> 
> 时间：2012-04-07T10:59:55.787
> 
> 标签：python, import

我正在阅读 python 项目的源代码并遇到以下行：

```
from couchexport.export import Format 
```

（来源：[https](https://github.com/wbnigeria/couchexport/blob/master/couchexport/views.py#L1) ://github.com/wbnigeria/couchexport/blob/master/couchexport/views.py#L1 ）

我过去`couchexport/export.py`看看是什么`Format`（Class？Dict？其他东西？）。不幸`Format`的是不在那个文件中。 *但是确实从有*类的couchexport.models`export.py`导入 a （来源：[https](https://github.com/wbnigeria/couchexport/blob/master/couchexport/models.py#L11) ://github.com/wbnigeria/couchexport/blob/master/couchexport/models.py#L11 ）。`Format`*`Format`*

 *当我在我的 IDE 中打开原始文件并让它查找声明时，按照我在这个问题开头提到的行，它直接导致 models.py。

这是怎么回事？如果没有明确说明，从一个文件 ( ) 的导入如何`export.py`实际上是从另一个文件 ( ) 的导入？`models.py`

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-07T11:04:54.660

如果 module`a`做了 a `from b import Foo`，则 then`Foo`是`a`later 的成员，并且可以作为`a.Foo`. 唯一的结果是您现在也可以使用`from a import Foo`.

如果您有一个分布在多个文件中的大型库，并且您希望它们可以从一个位置访问，这通常使用。假设您有一个`foo`具有以下布局的包：

```
foo/
    a.py
    b.py
    c.py
    __init__.py 
```

`a.py`, `b.py`, `c.py`, 分别定义类`A`,`B`和`C`。

如果您想使用这些类，通常必须编写

```
from foo.a import A
from foo.b import B
from foo.c import C 
```

这至少有两个问题：

1.  这个简单的导入需要很多代码（三行）
2.  库作者现在不能再更改文件/类关联，因为这会破坏现有代码。

因此，通常您只需将以下内容放入`__init__.py`：

```
from a import A
from b import B
from c import C 
```

现在你把所有的部分放在一个地方，所有的类都可以通过一次导入来访问：

```
from foo import A,B,C 
```*

# objective-c - 更改 CALayer 的填充颜色

> ID：10053890
> 
> 赞同：1
> 
> 时间：2012-04-07T11:00:53.453
> 
> 标签：objective-c, ios, svg

是否可以设置已在屏幕上绘制的 CALayer 的填充颜色？

我正在使用 SVGKit 将 SVG 图像加载到 UIView 中，一切运行良好，但我需要更改填充颜色。我已经阅读了 CAShapeLayer.fillColor 并认为它可以轻松完成，但我似乎没有看到使用 CALayer 的简单方法？我真的希望它可以做到。

可能有人甚至可以建议 CALayer 是否可以转换为 CAShapeLayer？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-07T11:14:24.483

Look at the docs for [CALayer](http://developer.apple.com/library/ios/#DOCUMENTATION/GraphicsImaging/Reference/CALayer_class/Introduction/Introduction.html) and you'll see

```
@property CGColorRef backgroundColor 
```

# ruby-on-rails - 我可以在生成器中运行 rake 任务吗？

> ID：10053891
> 
> 赞同：0
> 
> 时间：2012-04-07T11:01:09.023
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-engines

我有一个简单的 rails install generator 用于我正在制作的引擎：

```
module Bouncer
  module Generators
    class InstallGenerator < Rails::Generators::Base
      source_root File.expand_path("../../templates", __FILE__)

      desc "Copies locale file and migrations to your application."

      def copy_locale
        copy_file "../../../config/locales/en.yml", "config/locales/bouncer.en.yml"
      end

      def copy_migrations
        # I would like to run "rake bouncer_engine:install:migrations" right here
        # rather than copy_file "../../../db/migrate/blah.rb", "db/migrate/blah.rb"
      end
    end
  end
end 
```

当用户运行`rails g bouncer:install`时，一个语言环境文件被复制到他们的应用程序中。我也想复制我的迁移，但不是使用`copy_file`方法，我希望我可以`rake bouncer_engine:install:migrations`在生成器中运行，就像我从命令行做的那样。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T20:04:32.713

这样做的正确方法：

```
#!/usr/bin/env rake
module Bouncer
  module Generators
    class InstallGenerator < Rails::Generators::Base
      desc "Copies migrations to your application."
      def copy_migrations
        rake("bouncer_engine:install:migrations")
      end    
    end
  end
end 
```

这节省了很多麻烦，甚至可以确保每个迁移的名称都带有正确的时间戳。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T11:19:35.620

Well, I think it should be possible by just executing the shell command. [Here](http://tech.natemurray.com/2007/03/ruby-shell-commands.html) are 6 different ways to execute a shell command in ruby.

But my other suggestion would be instead of implementing it as a rake task, to direcly implement it as part of your generator... I don't know what your exact demands are, but given your description it seems to me that the migrations-task only runs once, when you execute the install task? Or is there a special need to offer it as a rake task as well?

# android - 将应用程序数据文件夹复制到外部存储器

> ID：10053895
> 
> 赞同：0
> 
> 时间：2012-04-07T11:01:33.050
> 
> 标签：android, file-io

我想构建一个导出另一个应用程序的用户数据的应用程序。数据存储在 /data/data/"name of the app package" 上。我的主要问题是如何检索该文件夹的路径以稍后将其导出/复制到外部存储器。据我所知，`getFilesDir()`返回包含应用程序文件的目录的路径，我自己的应用程序。但是其他应用程序数据呢？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T11:05:59.167

您不能从其他应用程序访问任意数据，除非它们将其存储在公开可用的地方，例如外部存储。

# java - 2 路 SSL :: SSL 握手失败错误

> ID：10053898
> 
> 赞同：0
> 
> 时间：2012-04-07T11:02:01.040
> 
> 标签：java, web-services, ssl, axis2

我创建了一个带有证书的信任库和带有私钥的密钥库。我已经放置了以下代码，加载了 trsustore 管理器和密钥库管理器，然后创建了 SSL 上下文的实例。

每当我向 web 服务发出请求时，都会调用下面的代码。我们正在使用axis2 API。

```
SSLContext context = SSLContext.getInstance(protocolVersion); 
context.init(keyManagers, trustManagers, null); 

SSLSocketFactory socketFactory = context.getSocketFactory(); 

SslContextedSecureProtocolSocketFactory secureProtocolSocketFactory = new SslContextedSecureProtocolSocketFactory(context); 

Protocol authhttps = new Protocol("https", secureProtocolSocketFactory, port);
HttpClient httpclient = new HttpClient();
httpclient.getHostConfiguration().setHost(hostname, port, authhttps);
GetMethod httpget  = new GetMethod("/RTAPService/RTAPService"); 
```

也试过这个 GetMethod httpget = new GetMethod("/");

```
httpclient.executeMethod(httpget); 
```

它给了我以下错误..

```
org.apache.axis2.AxisFault: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target 
```

其中主机名是“qartap.csnet.assurity.sg”，我的网络服务 URL 是“ [https://qartap.csnet.assurity.sg:8443/RTAPService/RTAPService](https://qartap.csnet.assurity.sg:8443/RTAPService/RTAPService) ”

问题是当我注册我的“HTTPS”协议时，它会影响我的整个应用程序，我可以以某种方式为特定主机或特定网络服务设置这些..???

我想使用主机名设置它还是自己创建新协议...我尝试了[此处](https://stackoverflow.com/questions/3712366/choosing-ssl-client-certificate-in-java/3713147#3713147)解决方案中给出的方法。但它给了我以下例外..

在将 web 服务 URl 传递给生成的存根构造函数时，我用自己定制的“myHTTPS”替换了 url 中的“HTTPS”。

```
The system cannot infer the transport information from the myhttps://serverUrl:7001/app/services/RTAPDevService.RTAPDevServiceHttpSoap12Endpoint/ URL. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-27T11:28:15.190

通过将证书添加到 cacerts 文件并将其指向 weblogic 来解决相同的问题。最初证书链未正确导入 cacerts 文件。还有一些关于证书导入的问题。

下面的链接可以参考

[http://ankursinghal86.blogspot.in/2014/06/authentication-with-client-certificate.html](http://ankursinghal86.blogspot.in/2014/06/authentication-with-client-certificate.html)

# python - 一个线性方程组，例如 matlab 反斜杠和 numpy.linalg.solve 产生不同的解

> ID：10053905
> 
> 赞同：4
> 
> 时间：2012-04-07T11:03:17.140
> 
> 标签：python, matlab, matrix, numpy, equation

我在使用 numpy 1.3.0 和 MATLAB 7.9.0 时遇到以下问题：python 代码

```
import numpy as np    
Lu = [[1.01250000000000,-0.00250000000000000,0,0,-0.00250000000000000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[-0.00250000000000000,1.01250000000000,-0.00250000000000000,0,0,-0.00250000000000000,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,-0.00250000000000000,1.01250000000000,-0.00250000000000000,0,0,-0.00250000000000000,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,-0.00250000000000000,1.01250000000000,0,0,0,-0.00250000000000000,0,0,0,0,0,0,0,0,0,0,0,0],[-0.00250000000000000,0,0,0,1.01000000000000,-0.00250000000000000,0,0,-0.00250000000000000,0,0,0,0,0,0,0,0,0,0,0],[0,-0.00250000000000000,0,0,-0.00250000000000000,1.01000000000000,-0.00250000000000000,0,0,-0.00250000000000000,0,0,0,0,0,0,0,0,0,0],[0,0,-0.00250000000000000,0,0,-0.00250000000000000,1.01000000000000,-0.00250000000000000,0,0,-0.00250000000000000,0,0,0,0,0,0,0,0,0],[0,0,0,-0.00250000000000000,0,0,-0.00250000000000000,1.01000000000000,0,0,0,-0.00250000000000000,0,0,0,0,0,0,0,0],[0,0,0,0,-0.00250000000000000,0,0,0,1.01000000000000,-0.00250000000000000,0,0,-0.00250000000000000,0,0,0,0,0,0,0],[0,0,0,0,0,-0.00250000000000000,0,0,-0.00250000000000000,1.01000000000000,-0.00250000000000000,0,0,-0.00250000000000000,0,0,0,0,0,0],[0,0,0,0,0,0,-0.00250000000000000,0,0,-0.00250000000000000,1.01000000000000,-0.00250000000000000,0,0,-0.00250000000000000,0,0,0,0,0],[0,0,0,0,0,0,0,-0.00250000000000000,0,0,-0.00250000000000000,1.01000000000000,0,0,0,-0.00250000000000000,0,0,0,0],[0,0,0,0,0,0,0,0,-0.00250000000000000,0,0,0,1.01000000000000,-0.00250000000000000,0,0,-0.00250000000000000,0,0,0],[0,0,0,0,0,0,0,0,0,-0.00250000000000000,0,0,-0.00250000000000000,1.01000000000000,-0.00250000000000000,0,0,-0.00250000000000000,0,0],[0,0,0,0,0,0,0,0,0,0,-0.00250000000000000,0,0,-0.00250000000000000,1.01000000000000,-0.00250000000000000,0,0,-0.00250000000000000,0],[0,0,0,0,0,0,0,0,0,0,0,-0.00250000000000000,0,0,-0.00250000000000000,1.01000000000000,0,0,0,-0.00250000000000000],[0,0,0,0,0,0,0,0,0,0,0,0,-0.00250000000000000,0,0,0,1.01250000000000,-0.00250000000000000,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,-0.00250000000000000,0,0,-0.00250000000000000,1.01250000000000,-0.00250000000000000,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,-0.00250000000000000,0,0,-0.00250000000000000,1.01250000000000,-0.00250000000000000],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-0.00250000000000000,0,0,-0.00250000000000000,1.01250000000000]]
rhs = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0, 0,0, 0,  0, 0, 0.0050, 0.0050, 0.0050, 0.0050]

Lu = np.array(Lu)
rhs = np.array(rhs)
ans = np.linalg.solve(Lu,rhs)
print ans 
```

产生输出

```
[  1.87241716e-13   1.89545264e-13   1.89545264e-13   1.87241716e-13
   7.56433496e-11   7.63890449e-11   7.63890449e-11   7.56433496e-11
   3.04833369e-08   3.07089522e-08   3.07089522e-08   3.04833369e-08
   1.22844835e-05   1.23451480e-05   1.23451480e-05   1.22844835e-05
   4.95055571e-03   4.96277946e-03   4.96277946e-03   4.95055571e-03] 
```

而在 MATLAB 中使用反斜杠会产生输出

```
 0.0000    0.0000    0.0000    0.0000    0.0000    0.0000    0.0000    0.0000    0.0000    0.0000    0.0000    0.0000    0.0000    0.0000    0.0000    0.0000    0.0050    0.0050    0.0050    0.0050 
```

我没有找到任何其他线性代数方程系统，其中 numpy 和 matlab 产生不同的解决方案。我目前不在城里，因此无法检查不同版本的 numpy（在不同的计算机上）是否会给出正确的结果。np.linalg.solve 不是解决这个系统的正确函数吗（系统矩阵 Lu 是稀疏的）？这是我的 numpy 版本中的错误吗？我的代码有问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T11:27:33.400

实际上，这些可能是相同的解决方案。MATLAB 舍入为 0.0000（至少在打印时），而 python 为您提供更详细的数字（一些问题可能来自浮点舍入错误）。唯一显示的数字`0.0050`是`e-03`。所有其他数字都小于 0.0005，因此可能会四舍五入为 0.0000。

# mysql - 将信息存储为 Mysql 中的序列化数据或单个字段

> ID：10053906
> 
> 赞同：0
> 
> 时间：2012-04-07T11:03:26.307
> 
> 标签：mysql, database-design

我对 MySql 上的数据存储有疑问，什么是存储这样的更好的方法：

我正在尝试创建一个应用程序，用户可以在其中存储不同的可自定义表单字段，例如，如果我需要一个联系表单，我可以使用 From textfield、Subject 下拉字段、Message textarea 字段创建一个表单，同样可以使用不同的表单表单元素。除此之外，用户可以为字段设置名称、值或其他表单属性。

但是，有什么更好的方法来存储这条信息，以便检索创建动态表单以便用户轻松更改内容以及使用它们？

我只能考虑两种存储它们的方法：

1.  在具有诸如 id、form、element、name、value 等模式的表中

    > element_id | form_id | 元素 | 姓名 | 价值 |
    > 1 | 1 | 文本框 | 到 | 空 |
    > 2 | 1 | 选择框 | 主题 | 一般，支持|

2.  作为表中的字段，数据类型为 BLOB，可以存储为序列化数据

好心提醒。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T11:12:12.520

Well, I myself prefer not to use serialized data in my designs. But it really depends on the things you will do with it.

I found [this blog article](http://www.mysqlperformanceblog.com/2010/01/21/when-should-you-store-serialized-objects-in-the-database/) describing the ups and downs, which may be helpful to your decision.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T11:09:23.613

Well i have a good idea but it involves different tables. First create a table Form_fields with fields id , field_name Second table Attributes with id, attribute Third table Field_attributes with id , form_field_id and attribute_id. This is a relation table. Now do thebackends with php and mysql.

# facebook - 是否可以使用 Facebook Graph API 查询过去的事件？

> ID：10053911
> 
> 赞同：3
> 
> 时间：2012-04-07T11:03:46.593
> 
> 标签：facebook, facebook-graph-api, facebook-fql

直到今天，我设法通过 FQL 在 Facebook 上检索过去的事件。但最近 FQL 发生了一些变化，现在无法查询过去的事件，包括我的朋友一次通话。

有谁知道如何通过 Graph API 检索过去的事件信息？/events 仅返回即将发生的事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:32:00.463

在**没有**`start_time > 0`. _ 似乎facebook进入了一个`start_time`不可见的限制，也许不是。因此，如果您运行查询，请不要忘记这一点。在我的情况下，没有`start_time > 0`，它返回 6 个事件，并返回 24 个。我不得不在互联网上搜索几个小时才找到这个并了解原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T11:32:27.800

实际上，我认为您可以通过`/events`调用获得相同的事件。如果您访问[Graph API 的 Facebook 链接](http://developers.facebook.com/docs/reference/api/)，您可以单击看起来像 的“事件”链接`Events: https://graph.facebook.com/me/events?access_token=...`。在返回的数据中，有一个`paging`包含`previous`和`next`链接的部分。您应该能够通过它获得过去的事件信息。

编辑：正如 Jeroen 指出的那样，您还可以使用`since`and`until`来过滤更多，并`limit`减少结果数量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-01T15:24:45.740

为我工作。

FQL 示例

从 eid 所在的事件中选择名称（SELECT eid from event_member WHERE uid = {you page or user id here} and start_time > '2001-11-02T12:35:00+0200'）

由于 FQL 不支持（ Select * ），地址 FQL 手册查询更多字段[https://developers.facebook.com/docs/reference/fql/](https://developers.facebook.com/docs/reference/fql/)

# iphone - 我在配置 XCODE 4.3.1 的代码签名部分看不到任何配置文件

> ID：10053921
> 
> 赞同：3
> 
> 时间：2012-04-07T11:05:49.493
> 
> 标签：iphone, xcode, provisioning

我的 xCode 有一个奇怪的问题，我是代码签名的标准，我没有看到任何配置文件，甚至更多我没有得到小箭头 ![xCode 签名部分](../Images/9a3af06781853f680ee4cfeb71f26b49.png)

在钥匙串里我有我的东西你可以在图片中看到

![钥匙链](../Images/caa98105943b55c7c91fd75a9d30e253.png)

在我的管理器中，我看到了我的个人资料，但在代码签名部分的 xcode 中，我堆满了旧的个人资料，看不到任何其他个人资料，并且没有允许选择个人资料的小箭头

![在此处输入图像描述](../Images/0282f231b1b92c754b9d25e5a8c579b4.png)

我已将我的个人资料拖放到我的设备中并重新启动了 xCode，但没有运气我添加了图片

![在此处输入图像描述](../Images/33450b976ddbdd34c6c1a0638e742251.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T13:13:28.110

您提供的最后一张图片是您插入的设备的配置文件。选择“库”部分下的“配置文件”，然后将配置文件拖到那里的主窗口中。应该能解决你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T11:21:45.923

您是否使用管理器导入了新的配置文件。您还需要将配置文件导入您的项目。你可以从

> 组织者 > 设备 > 库部分 > 配置文件 > 导入（在底部）

现在它们将出现在您的项目代码签名中。

# xpath - XPath 谓词中的双斜杠与路径本身的工作方式相同

> ID：10053928
> 
> 赞同：7
> 
> 时间：2012-04-07T11:06:39.620
> 
> 标签：xpath

我使用 XPather 处理了不同的 XPath 查询（仅适用于较旧的 firefox 版本），并注意到以下查询的结果之间存在差异

这显示了一些结果

```
//div[descendant::table/descendant::td[4]] 
```

这个列出了空列表

```
//div[//table//td[4]] 
```

它们是由于某些规则而不同，还是只是 XPath 解释器的特定实现的不当行为？（看起来像是从 FF 引擎中使用的，XPather 只是一个出色的简单 GUI 用于查询）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-07T11:15:48.767

XPath 1.0`//`是 的缩写，`/descendant-or-self::node()/`因此您的第一个路径是`/descendant-or-self::node()/div[descendant::table/descendant::td[4]]`，而第二个路径与`/descendant-or-self::node()/div[/descendant-or-self::node()/table/descendant-or-self::node()/td[4]]`. 所以主要区别在于，在第一个谓词中，您向下查找相对于`div`元素的后代，而在第二个谓词中，您从根节点`/`（也称为文档节点）向下查找后代。您可能希望`//div[.//table//td[4]]`第二个路径表达式更接近第一个。

[编辑] 这是一个示例：

```
<html>
  <body>
    <div>
      <table>
        <tbody>
          <tr>
            <td>1</td>
          </tr>
          <tr>
            <td>2</td>
          </tr>
          <tr>
            <td>3</td>
          </tr>
          <tr>
            <td>4</td>
          </tr>
        </tbody>
      </table>
    </div>
  </body>
</html> 
```

使用该示例，路径`//div[descendant::table/descendant::td[4]]`选择`div`元素，因为它有一个`table`具有第四个`td`后代的子元素。

但是，`//div[.//table//td[4]]`我们寻找`//div[./descendant-or-self::node()/table/descendant-or-self::node()/td[4]]`which 的缩写，`//div[./descendant-or-self::node()/table/descendant-or-self::node()/child::td[4]]`并且没有具有第四`td`个子元素的元素。

我希望能解释差异，如果你使用，`//div[.//table/descendant::td[4]]`那么你应该得到与原始表格相同的结果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-28T23:45:43.570

W3C 文档中有一条关于 XPath 1.0 的重要说明（W3C 建议 1999 年 11 月 16 日）：

> [XML 路径语言 (XPath) 版本 1.0](https://www.w3.org/TR/1999/REC-xpath-19991116/)
>     [2 位置路径](https://www.w3.org/TR/1999/REC-xpath-19991116/#location-paths)
>         [2.5 缩写语法](https://www.w3.org/TR/1999/REC-xpath-19991116/#path-abbrev)
> 
> **注意：**位置路径与位置路径`//para[1]`的含义不同`/descendant::para[1]`。后者选择第一个后代`para`元素；前者选择作为其父母`para`的第一个孩子的所有后代元素。`para`

XPath 3.1 文档中的类似说明（W3C 建议 2017 年 3 月 21 日）

> [XML 路径语言 (XPath) 3.1](https://www.w3.org/TR/2017/REC-xpath-31-20170321/)
>     [3 表达式](https://www.w3.org/TR/2017/REC-xpath-31-20170321/#id-expressions)
>         [3.3 路径表达式](https://www.w3.org/TR/2017/REC-xpath-31-20170321/#id-path-expressions)
>             [3.3.5 缩写语法](https://www.w3.org/TR/2017/REC-xpath-31-20170321/#abbrev)
> 
> **注意：**路径表达式与路径表达式`//para[1]`的含义不同`/descendant::para[1]`。后者选择第一个后代`para`元素；前者选择作为其各自父母`para`的第一个孩子的所有后代元素。`para`

这意味着路径中的双斜杠不仅是`/descendant-or-self::node()/`XML 树迭代下一级的快捷方式，而且是下一级迭代的起点，这意味着在`//`当前上下文节点的每个后代上重新运行 右侧的步骤表达式。

所以这条路径中谓词的确切含义

```
//div[ descendant::table/descendant::td[4] ] 
```

是：

*   构建`<table>`当前所有节点后代的序列`<div>`，
*   对于每一个这样`<table>`的构建所有后代`<td>`元素的序列**并将**它们连接成一个序列，
*   过滤该序列的第四项。

最后，该路径返回`<div>`文档中的所有元素，这些元素的所有嵌套表中至少有四个数据单元格。并且由于文档中有包含 4 个或更多单元格的表格（当然包括嵌套表格中的单元格），整个表达式选择它们各自的`<div>`祖先。

另一方面，谓词在

```
//div[ //table//td[4] ] 
```

方法：

*   扫描整个文档树的`<table>`元素（更准确地说，测试根节点和每个根的后代，如果它有一个`<table>`孩子），
*   对于找到的每个表，扫描其子树以查找具有第四个子元素的`<td>`元素（即测试该表或其任何后代是否至少有四个子元素`<td>`）。

请注意谓词子表达式不依赖于上下文节点。它是一个全局路径，解析为一些节点序列（可能为空），因此谓词布尔值仅取决于文档的结构。如果为真，则整个路径返回`<div>`文档中所有元素的序列，否则返回空序列。

最后，如果*任何*表中有一个元素，并且有 4 个（至少）数据单元格，则谓词为*真。* 据我所知，所有行都包含两个或三个单元格 - 没有具有 4 个或更多子级的元素，因此谓词子表达式返回一个空序列，谓词为*假*，整个路径被过滤掉。结果是：没有（空序列）。 *`<tr>``<td>`*

# algorithm - 图中从单个源到单个目的地的最短路径

> ID：10053931
> 
> 赞同：3
> 
> 时间：2012-04-07T11:07:18.403
> 
> 标签：algorithm, shortest-path

我的图不包含将顶点连接到自身的此类边。两个顶点之间只有一条边。从[维基百科](http://en.wikipedia.org/wiki/Shortest_path_problem)我了解了一些用于根据给定条件计算最短路径的算法。最著名的算法之一是`Dijkstra's algorithm`，它找到从源顶点到图中所有其他顶点的最短路径。
但是通过使用`Dijkstra's algorithm`，我没有必要探索所有的顶点，但是我的目标只是找到从单一来源到单一目的地的最短路径。我应该在这里使用哪种策略？这样我就不需要探索所有其他顶点。

我的一种方法是使用`bidirectional bfs`. `bidirectional bfs`我的意思是申请两个`bfs`来自，`source node`另一个来自。`destination node`当我第一次`child`在两棵树中找到相同的东西时，我可以停止两者`bfs`。现在从源到子`union`路径从子路径到目的地的路径将是我从源到目的地的最短路径。

但是在 Wikipedia 和 描述的所有方法中 `bidirectional bfs`，哪一种最适合我的图表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-07T11:29:47.090

这取决于您是否可以使用任何明显的启发式函数，或者您是否没有关于图表的任何进一步可用信息。

您的选择是：

*   BFS：在一般情况下，或者如果您不太关心计算时间。
*   Dijkstra（Dijkstra“是”具有优先级队列的 BFS）：如果您的边具有权重/价格（非负数）并且您关心 CPU 时间。
*   A*（A*“是”具有启发式功能的 Dijkstra - 例如城市地图上的距离）：如果您希望它在平均情况下非常快，但您必须提供良好的启发式功能。

对于某些图形问题，可以使用动态编程或其他算法工具。这取决于情况。更多信息可以在[http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=alg_index](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=alg_index) ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T11:14:29.440

来自算法简介 (CLRS) 第二版，第 581 页：

`u`找到给`v`定顶点`u`和的最短路径`v`。如果我们用 source vertex 解决单源问题`u`，我们也解决了这个问题。此外，在最坏的情况下，没有已知算法可以比最好的单源算法渐近地运行得更快。

所以，坚持 Dijkstra 的算法 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-24T12:13:05.997

维基[百科](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)文章为您说明了答案：

> If we are only interested in a shortest path between vertices source and target, we can terminate the search at line 13 if u = target.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-07T11:16:15.380

您可以使用 Dijkstra 的算法并对其进行优化，以停止探索已经比迄今为止发现的最短路径更长的路径。因为这些不会更短（前提是您的边缘没有负重）。

# unit-testing - Groovy：在 Unitils assertReflectionEquals 中对没有 equals() 的 Java bean 进行深度比较？

> ID：10053934
> 
> 赞同：2
> 
> 时间：2012-04-07T11:07:24.563
> 
> 标签：unit-testing, groovy, equals

Groovy 是否有一个简单的解决方案来比较两个 Java bean 和嵌套 bean，而不使用它们的 equals()，即比较它们中的所有原始/java.lang.* 字段，然后对剩余的字段递归地执行相同的操作？在不平等的情况下，我当然希望得到一份关于什么是 eqaul 和什么不是的很好的报告。Unitils 的[assertReflectionEquals](http://www.unitils.org/tutorial-reflectionassert.html)正是这样做的，但我想知道 Groovy 中是否有类似的东西。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T07:47:55.850

Groovy 运行时本身没有通用类这样的东西，没有。

# php - PHP MySQL动态搜索问题

> ID：10053945
> 
> 赞同：0
> 
> 时间：2012-04-07T11:09:16.400
> 
> 标签：php, mysql, dynamic, random

我有一个动态 SQL 搜索，我在“里程”列表选项上遇到问题：

```
 <?php
include('connection.php');

if(isset($_POST['Make']))
{
    $makeSearch = $_POST['Make'];
    $modelSearch = $_POST['Model'];
    $colourSearch  = $_POST['Colour'];
    $townSearch = $_POST['Town'];
    $regionSearch = $_POST['Region'];
    $regiSearch = $_POST['Reg'];
    $maxSearch = $_POST['MaxPrice'];
    $minSearch = $_POST['MinPrice'];
    $maxMilSearch = $_POST['MaxMil'];

}
else
{

    $makeSearch = $_GET['Make'];
    $modelSearch = $_GET['Model'];
    $colourSearch  = $_GET['Colour'];
    $townSearch = $_GET['Town'];
    $regionSearch = $_GET['Region'];
    $regiSearch = $_GET['Reg'];
    $maxSearch = $_GET['MaxPrice'];
    $minSearch = $_GET['MinPrice'];
    $maxMilSearch = $_GET['MaxMil'];

}

if(!isset($_GET['pageNo']))
{
    $pageNo = 0;
}

else
{
    $pageNo = $_GET['pageNo'];
}

$noOfRecords = 4;
$startRecord = $pageNo * $noOfRecords;
$nextPage = $pageNo + 1;
$prevPage = $pageNo - 1;
$curpage = $pageNo + 1;

        $sql2 = "SELECT * FROM cars WHERE 1=1";
    if($makeSearch !== "Select Make")
    {
        $sql2 .= " AND make = '$makeSearch'";
    }
    .....................
    if($maxMilSearch !== "Select Max Mileage")
    {
        $sql2 .= " AND miles <= '$maxMilSearch'";
    }

        $sql = "SELECT * FROM cars WHERE 1=1";
    if($makeSearch !== "Select Make")
    {
        $sql .= " AND make = '$makeSearch'";
    }
    .........................
    {
        $sql .= " AND miles <= '$maxMilSearch'";
    }

    $sql .= "LIMIT $startRecord, $noOfRecords";

    $result2 = mysql_query($sql2,$odbc) or die ("Can't run query1");
    $result = mysql_query($sql,$odbc) or die ("Can't run query2");

    echo"$sql";

    $num_rows = mysql_num_rows($result2);

echo"$num_rows";

$last = ceil($num_rows/$noOfRecords);

if(mysql_num_rows($result) == 0)
{
    echo "No cars found";

}

else

{
    echo "<table border = 1>";
    while($row=mysql_fetch_object($result))
    {
        echo "<tr>";
            echo"<td>";
                echo$row->make;
            echo"</td>";
            echo"<td>";
                echo$row->model;
            echo"</td>";
            echo"<td>";
                echo$row->Reg;
            echo"</td>";
            echo"<td>";
                echo$row->colour;
            echo"</td>";
            echo"<td>";
                echo$row->miles;
            echo"</td>";
            echo"<td>";
                echo$row->price;
            echo"</td>";
            echo"<td>";
                echo$row->dealer;
            echo"</td>";
            echo"<td>";
                echo$row->telephone;
            echo"</td>";
            echo"<td>";
                echo$row->description;
            echo"</td>";
            echo"<td>";
                echo$row->carIndex;
            echo"</td>";
            echo"<td>";
                echo$row->region;
            echo"</td>";
            echo"<td>";
                echo$row->town;
            echo"</td>";
            echo"<td><a href='look.php?carIndex=$row->carIndex&Reg=$row->Reg&make=$row->make&model=$row->model&colour=$row->colour&price=$row->price&miles=$row->miles&dealer=$row->dealer&telephone=$row->telephone&description=$row->description&region=$row->region'>More Info</a></td>";

    echo"</tr>";
    }
    echo "<tr>";
echo"$curpage";
echo"$last";
if($pageNo >= 1)
{

        echo "<td><a href='search.php?pageNo=$prevPage&Make=$makeSearch&Model=$modelSearch&Reg=$regiSearch&MaxMil=$maxMilSearch&Colour=$colourSearch&Town=$townSearch&Region=$regionSearch&MaxPrice=$maxSearch&MinPrice=$minSearch'>Previous</a></td>";
}

if($pageNo < $last - 1)
{
        echo "<td><a href='search.php?pageNo=$nextPage&Make=$makeSearch&Model=$modelSearch&Reg=$regiSearch&MaxMil=$maxMilSearch&Colour=$colourSearch&Town=$townSearch&Region=$regionSearch&MaxPrice=$maxSearch&MinPrice=$minSearch'>Next</a></td>";
}       
    echo"</tr>";
    echo"</table>";

} 
```

?>

据我所知，我遇到的问题是“里程”输入被忽略了。如果我输入（从我的下拉列表中）例如 5000 英里以返回所有低于此值的汽车，它会返回任何里程的随机结果。我要说的是，如果我选择例如汽车制造商然后选择里程，它将返回正确的结果。

真的不确定我在这里做错了什么，因为我的所有其他选项都可以正常工作。

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T11:34:49.833

如果一切正常，回显最终生成的查询将为您提供提示。通过 PHPMYADMIN 运行它还可以很好地表明您的查询是有效的并返回正确的结果。

这种组装查询的略有不同的方法可能会对您有所帮助。它还使 IMO 更易于阅读。

```
$sql = "SELECT * FROM cars WHERE ";
$whereClause = array();

if($makeSearch !== "Select Make"){
    $whereClause[] = "make = '$makeSearch'";
}

...

if($maxMilSearch !== "Select Max Mileage"){
    $whereClause[] = "miles <= '$maxMilSearch'";
}

$sql .= implode(" AND ",$whereClause) . "LIMIT $startRecord, $noOfRecords";

echo $sql;
exit(); 
```

那应该将最终查询打印到屏幕上并退出。

我正在使用 的简写版本`array_push()`将元素添加到`$whereClause`数组 - `$whereClause[] = VALUE`。这`[]`就像一个推动动作；在数组末尾添加一个附加元素。

我使用的另一个有用的函数是`implode()`函数。此方法采用一个数组并使用给定的字符串将它们连接成一个字符串以连接它们。像您在这里所做的那样组装查询时，它非常有用。

除了将它用于 where 子句之外，您还可以将它用于值列表 -

```
$cowDetails = array(
 '1',
 '"Cow"',
 '"Moo"'
);
$insertSql = "INSERT INTO `zoo` ('id','name','sound')  
              VALUES  (".implode(',',$cowDetails).")";

echo $insertSql;
exit(); 
```

> ***输出***：
> `INSERT INTO`动物园`('id','name','sound') VALUES (1,"Cow","Moo")`

验证查询正确后，您可以删除`echo`和`exit()`命令。

# javascript - 如何重新加载 jquery easyui 插件中的选项卡？

> ID：10053953
> 
> 赞同：0
> 
> 时间：2012-04-07T11:10:44.227
> 
> 标签：javascript, jquery, jquery-easyui

我正在使用 jquery easyui 来实现选项卡。但是，选项卡上没有重新加载功能。官方文档上有一个重新加载示例，但似乎只是添加了一个重新加载图标，而不是具有实际的重新加载功能：

```
<div title="Tab3" iconCls="icon-reload" closable="true" style="padding:20px;display:none;"> 
```

![在此处输入图像描述](../Images/1d69f8a5c2666e1c5f57d517c6706ced.png)

因此，当我按下重新加载图标时，如何才能拥有实际的重新加载功能？

这是那个文件，它很短，一分钟内读完 [标签文件](http://www.jeasyui.com/documentation/tabs.php)

**更新：**

刷新功能：

```
$(document).ready(function(){
    $('#tt').tabs({
        onSelect: function (title) {
            var currTab = $('#tabs').tabs('getTab', title);
            var iframe = $(currTab.panel('options').content);
            var src = iframe.attr('src');
            $('#tt').tabs('update', {
                tab: currTab, options: { content: createFrame(src)}
            });
         }
    });
}); 
```

添加选项卡将添加一个`icon-reload`：

```
function addTab(title, url){  
    if ($('#tt').tabs('exists', title)){  
        $('#tt').tabs('select', title);  
    } else {  
        var content = '<iframe scrolling="auto" frameborder="0"  src="'+url+'" style="width:100%;height:100%;"></iframe>';  
        $('#tt').tabs('add',{  
            title:title, 
            iconCls:'icon-reload', 
            content:content, 
            closable:true
        });  
    }  
} 
```

html中的图标：

```
<a href="javascript:void(0)" class="tabs-inner">
 <span class="tabs-title tabs-closable tabs-with-icon">Create List</span>
 <span class="tabs-icon icon-reload"></span>
</a> 
```

如何使用`icon-reload`调用函数重新加载选项卡？

[添加了jsfiddle链接](http://jsfiddle.net/DRJGM/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T13:58:05.383

此刷新图标不应该更新选项卡的内容，但您可以调整插件来这样做。

**HTML：**

```
<div id="tt" class="easyui-tabs" style="width:500px;height:250px;">  
</div> 
```

**CSS：**

```
.icon-reload {
    cursor: pointer;
}​ 
```

**jQuery：**

```
$('#tt').tabs({
    border: false,
    onSelect: function(title) {
        //alert(title+' is selected');  
    }
}); 

function addTab(title, url) {
    if ($('#tt').tabs('exists', title)) {
        $('#tt').tabs('select', title);
    } else {
        var content = 'added tab';
        $('#tt').tabs('add', {
            title: title,
            iconCls: 'icon-reload',
            content: content,
            closable: true
        });
    }
}

function myTabUpdate(index) {
    return Math.random() + ' index ' + index;
}

$(".icon-reload").live('click', function() {
    var t = $('#tt');  
    var tabs = t.tabs('tabs');  
    var tabIndex = $(this).closest('li').index();

    $('#tt').tabs('update', {
        tab: tabs[tabIndex],
        options: {
            content: myTabUpdate(tabIndex)
        }
    });
});

addTab('Tab1', 'http://google.com');
addTab('Tab2', 'http://google.com');
addTab('Tab3', 'http://google.com');​ 
```

在这里工作 jsFiddle：http: [//jsfiddle.net/YvdjR/4/](http://jsfiddle.net/YvdjR/4/)

`ressources tab`注意左侧的三个资源（在 jsFiddle 网站中）：

*   jquery.easyui.min.js
*   图标.css
*   易UI.css

# php - mysqli bind_param 给出错误：（1210）mysql_stmt_execute 的参数不正确

> ID：10053955
> 
> 赞同：12
> 
> 时间：2012-04-07T11:10:56.947
> 
> 标签：php, mysqli

我有这个完全相同的代码在另一台服务器上运行良好：

```
$mysqli_Cxn = new mysqli($SQL_HOST,$SQL_USER,$SQL_PASS,$SQL_DB);
if($mysqli_Cxn->connect_errno){
echo 'Unable to connect!!';
exit();
}

$userID=12345;
$userFirstName = 'Charley';
$userLocale = 'en_US';

$sql = "UPDATE userProfile SET userFirstName=?, userLocale=? WHERE id=?";

if($stmt = $mysqli_Cxn->prepare($sql)){
 if(!$stmt->bind_param('ssi',$userFirstName,$userLocale,$userID)){
  echo "<br/><br/>Binding parameters failed: (" . $stmt->errno . ") " . $stmt->error;
 }
 if($stmt->execute()){
  totalAffected=$stmt->affected_rows;
  if($totalAffected>=1){
   echo '<br/><br/>UPDATE OK: Affected rows = '. $totalAffected;
  }
 }else{
  echo "Execute failed: (" . $stmt->errno . ") " . $stmt->error;
 }
}
$stmt->close(); 
```

该代码给了我以下输出：执行失败：（1210）mysql_stmt_execute 的参数不正确

如果我改变这两行：

```
$sql = "UPDATE userProfile SET userFirstName=?, userLocale=? WHERE id=?";
$stmt->bind_param('ssi',$userFirstName,$userLocale,$userID); 
```

对此：

```
$sql = "UPDATE userProfile SET userFirstName=?, userLocale='en_US' WHERE id=12345";
$stmt->bind_param('s',$userFirstName); 
```

...然后更新成功，我没有收到任何错误。

**有谁知道为什么我不能在这段代码中绑定多个参数？**

我让这段代码在 Centos 4.9、PHP 5.3.3、MySQL 5.0.91/5.0.91-community-log 上完美运行

我需要在我当前的服务器 Centos 6.2、PHP 5.3.10、MySQL 5.0.95-community-log 上运行它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T16:56:49.140

我做了一些研究，结合您的 GCC 版本和您使用的优化标志，这似乎是 MySQL 源代码中报告的错误。如果您无法更改 MySQL 版本，请尝试在您的 CFLAGS 中添加 -fno-strict-aliasing 重新编译 MySQL。

有关更多详细信息，请参阅[http://bugs.mysql.com/bug.php?id=48284](http://bugs.mysql.com/bug.php?id=48284)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T05:39:29.967

关于这个问题的最后说明。

我使用以下配置启动并运行了一个新服务器：

```
PHP 5.3.10
MySQL 5.1.61-cll 
```

我使新服务器能够接受外部连接并在第一台服务器上测试了相同的代码（这次将“localhost”替换为我的新服务器的 IP）。

**当我尝试在查询中使用多个参数时，它给了我完全相同的错误。**

最后我在新服务器上测试了代码（使用多参数查询），它没有任何问题。

*我的逻辑可能有问题，但我想问题出在 mysqli 的客户端版本上：*

第一台服务器：

```
printf("Client library version: %d\n", mysqli_get_client_version());
//Output:
//Client library version: 50095 
```

新服务器：

```
printf("Client library version: %d\n", mysqli_get_client_version());
//Output:
//Client library version: 50161 
```

所以我可以提出两个建议：

1.  帮自己一个忙，去[**PDO**](http://www.php.net/manual/fr/intro.pdo.php)
2.  想要/必须只使用 mysqli？确保您的服务器的 mysqli 客户端版本不是**50095**

感谢大家的评论/帮助！

*PS：我正在使用带有 CPanel 的 VPS 服务器。我尝试在第一台服务器上使用 WHM 中的 EasyApache 重新编译 mysqli 客户端 - 并且完全是一个菜鸟 - 我想我坚持使用通过 Cpanel 提供的版本（直到我的下一次升级）。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T06:43:12.863

我建议你明确地`$userID`转换为整数并重新测试它是否仍然失败。

由于 PHP 变量默认是变量，因此在将非字符串（在本例中为整数）绑定到查询时可能会遇到问题。

你能试一下吗：

```
$sql = "UPDATE userProfile SET userFirstName=?, userLocale=? WHERE id=?";
$stmt->bind_param('ssi',$userFirstName,$userLocale,(int)$userID); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-19T23:56:23.987

我遇到了完全相同的问题。

（绑定参数不接受多个参数）

我使用这个命令的mysql版本：

```
printf ("Client library Version:% d \ n", mysqli_get_client_version ()); 
```

是：50094

50095 版本在此问题上存在争议：

[https://www.liketly.com/forum/thread/27005/mysqli-bind_param-giving-error-1210-incorrect-arguments-to-mysql_stmt_execute/](https://www.liketly.com/forum/thread/27005/mysqli-bind_param-giving-error-1210-incorrect-arguments-to-mysql_stmt_execute/)

将 PHP 5.4 更新到 5.6（在共享服务器上）后，mysql 版本也更新了，问题消失了。

我的新mysql版本是50011

# java - Use sun-codemodel to generate expression like b().c()

> ID：10053956
> 
> 赞同：0
> 
> 时间：2012-04-07T11:10:58.233
> 
> 标签：java, sun-codemodel

I'm trying to use [sun-codemodel](http://codemodel.java.net/) to generate source code, checking the API for a long time however no luck.

```
 JBlock body2 = method2.body();

  JInvocation arg = body2.invoke( "a" ).arg( xxx ).invoke( "c" ).arg( xxx ); 
```

only generate the first part, i.e. a(xxx)

Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T12:10:30.567

通过使用解决的问题

```
 JInvocation invoke = JExpr._this()
                .invoke( "fun" )
                .arg( "arg1" )
                .invoke( "fun2" )
                .arg( "arg2" );
method.body().add(invoke); 
```

# xpages - 在本地机器上运行 XPages 扩展库

> ID：10053959
> 
> 赞同：2
> 
> 时间：2012-04-07T11:12:11.247
> 
> 标签：xpages

我已经在我的本地机器上安装了 XPages 扩展库。它显示了“控件”选项卡中的所有组件。但是，当我使用 XPage 中的任何组件并在浏览器中运行它时，它会显示以下错误：

`Cannot find the library com.ibm.xsp.extlib.library, required by the application <DATABASE PATH>`

在 Application Proprties 中，在 XPage 库中的 Advanced 选项卡中，`com.ibm.xsp.extlib.library`&`com.ibm.xsp.extlibx.library`都被选中。我在这里错过了什么吗？

**更新：**为了安装扩展库，我使用了 updateSiteOpenNTF-designer.zip 文件。为了安装它，我去了我的侧边栏面板中的“我的小部件”，单击“选项菜单”，选择“从...配置小部件 > 更新站点上的功能和插件”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T12:35:01.397

纳文。这只会在 Designer 中安装 Extlib，而不是在本地预览引擎中。您必须将插件和功能目录（如下载中的安装说明中所述）复制到 [NotesData]/domino/workspace/applications/eclipse

# java - Java Drag and drop

> ID：10053963
> 
> 赞同：1
> 
> 时间：2012-04-07T11:12:43.213
> 
> 标签：java, swing

I'm new to the drag and drop features of java and I wanted to know if it is possible to drag and drop a short-cut from the desktop on a java jpanel and get info from it like icon .exe location and so on. I only found tutorials for text images and other java objects.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T11:28:38.350

您可以获得文件的位置以及 Java 能够获取的有关文件的所有数据。

但我相信你不能得到图标。

# ruby-on-rails - Rails - 在 Getter 中将数字格式设置为货币格式

> ID：10053967
> 
> 赞同：5
> 
> 时间：2012-04-07T11:13:03.687
> 
> 标签：ruby-on-rails, currency

我正在制作一个简单的零售商务解决方案，其中有几种不同型号的**价格**。这些价格构成了**总价格**。想象一下为您的酸奶选择浇头多付 0.30 美元。

当我将`price`字段设置为

```
t.decimal   :price, precision:8, scale:2 
```

数据库存储`6.50`为`6.5`. 我知道在标准 rails 方式中，您调用`number_to_currency(price)`以获取视图中的格式化值。我需要以编程方式调用该`price`字段以及格式化字符串，即 $6.50 一些不直接属于视图的地方。此外，我的需求很简单（没有货币转换等），我更喜欢在模型中对价格进行通用格式化，而无需在视图中重复调用 number_to_currency。

有没有一种好方法可以修改我的 getter 价格，使其始终返回带美元符号的小数点后两位，即调用时 6.50 美元？

提前致谢。

**更新**

谢谢大家。

我选择使用 Alex 的方法，因为仅仅为了格式化数字而进行包含似乎非常“骇人听闻”。使用他的方法，我做了：

```
 def price_change=(val)
      write_attribute :price_change, val.to_s.gsub(/[\$]/,'').to_d
  end

  def price_change
    "$%.2f" % self[:price_change]
  end 
```

干杯。

**更新 2**

买者自负。一旦你这样做了，你就失去了对数字进行操作的能力，因为它现在是一个字符串。

请注意是否有人面临与我相同的问题。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-07T11:28:01.823

只需在模型中添加一个方法，该方法的名称类似于数据库中的属性，例如：

```
def price
   "$%.2f" % self[:price]
end 
```

这使您可以完全控制格式或使用 Rails 提供的辅助方法

```
def price
   ActionController::Base.helpers.number_to_currency(self[:price])
end 
```

这应该可以解决问题。希望能帮助到你！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T11:37:51.953

您可以使用 helpers 模块，但不应包含整个模块，因为它包含许多您可能并不真正需要或覆盖您的某些方法的方法。但是你可以直接使用它们：

```
ActionController::Base.helpers.number_to_currency(6.5)   
#=> "$6.50" 
```

您还可以为帮助程序定义一个方法，以便您可以轻松地使用它们。

```
def helpers
  ActionController::Base.helpers
end

"#{helpers.number_to_currency(6.5)}" 
```

看看这个[railscast](http://railscasts.com/episodes/132-helpers-outside-views)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T11:28:51.810

我建议使用 Presenter 方法，例如 Draper（请参阅[此](http://railscasts.com/episodes/286-draper)realilscast）。

另一种解决方案是在您的模型中实现您自己的方法，即`formatted_price`自己进行格式化（即使用`ActionView::Helpers::NumberHelper`模块）。但是由于模型代表了您的 Rails 应用程序中的纯数据，所以我认为这样做有点阴暗，并且它会干扰约定优于配置的方法。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-07T11:25:44.317

尝试

```
include ActionView::Helpers::NumberHelper 
```

到你的模型

# c# - 按钮和事件的数量应该是单击或方法

> ID：10053972
> 
> 赞同：0
> 
> 时间：2012-04-07T11:15:14.840
> 
> 标签：c#, .net, visual-studio, window

有一个包含许多按钮的 Windows 表单（假设像计算器）应该编写一种方法来访问所有按钮，但是不应该编写每个按钮的按钮单击，你能帮我解决这个问题吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T11:23:21.437

1.  通过双击第一个按钮创建 1 个单击处理程序
2.  选择第二个按钮并在属性窗口中打开事件选项卡
3.  使用 Click 事件的下拉菜单从步骤 1 中选择处理程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T11:30:55.950

您可以使用 Henk 设计的方法，也可以深入研究表单设计器代码（假设您只想使用 Button2 点击事件）：

```
this.button2.Click += new System.EventHandler(this.Button2Click);
this.button1.Click += new System.EventHandler(this.Button2Click);
this.button3.Click += new System.EventHandler(this.Button2Click); 
```

# python - 如何为 django 管理员创建自定义页面？

> ID：10053981
> 
> 赞同：44
> 
> 时间：2012-04-07T11:16:47.177
> 
> 标签：python, django, django-admin

我想为没有模型的管理面板创建自定义页面。首先，我将 index.html 复制到项目文件夹：

```
mysite/
    templates/
        admin/
            index.html 
```

然后添加到应用程序阻止我的代码：

```
<div class="module">
    <table summary="{% blocktrans with name="preferences" %}Models available in the preferences application.{% endblocktrans %}">
        <caption><a href="preferences" class="section">{% blocktrans with name="preferences" %}Preferences{% endblocktrans %}</a></caption>
            <tr>
                <th scope="row"><a href="preferences">Preferences</a></th>
                <td><a href="preferences" class="changelink">{% trans 'Change' %}</a></td>
            </tr>
    </table>
</div> 
```

这很好用，然后我创建新页面 /templates/admin/preferences/preferences.html 并添加到 urls.py：

```
url(r'^admin/preferences/$', TemplateView.as_view(template_name='admin/preferences/preferences.html')), 
```

并将代码添加到preferences.html：

```
{% extends "admin/base_site.html" %}
{% block title %}Test page{% endblock %} 
```

运行它并查看错误消息“请求的管理页面不存在。”。我做错了什么？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-07T11:41:06.460

您需要在管理员本身的 URL 模式*之前添加您的管理员 URL：*

```
urlpatterns = patterns('',
   url(r'^admin/preferences/$', TemplateView.as_view(template_name='admin/preferences/preferences.html')),
   url(r'^admin/', include('django.contrib.admin.urls')),
) 
```

这样 URL 就不会被 Django 的管理员处理。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2018-10-31T14:17:41.770

多年过去了，仍然可以发布一个相关的答案。

使用 Django 1.10+ 你可以：

**security/admin.py（这是您应用的管理文件）**

```
from django.contrib import admin
from django.conf.urls import url
from django.template.response import TemplateResponse
from security.models import Security

@admin.register(Security)
class SecurityAdmin(admin.ModelAdmin):

    def get_urls(self):

        # get the default urls
        urls = super(SecurityAdmin, self).get_urls()

        # define security urls
        security_urls = [
            url(r'^configuration/$', self.admin_site.admin_view(self.security_configuration))
            # Add here more urls if you want following same logic
        ]

        # Make sure here you place your added urls first than the admin default urls
        return security_urls + urls

    # Your view definition fn
    def security_configuration(self, request):
        context = dict(
            self.admin_site.each_context(request), # Include common variables for rendering the admin template.
            something="test",
        )
        return TemplateResponse(request, "configuration.html", context) 
```

**安全/模板/configuration.html**

```
{% extends "admin/base_site.html" %}
{% block content %}
...
{% endblock %} 
```

请参阅[官方 ModelAdmin.get_urls 描述](https://docs.djangoproject.com/en/1.10/ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_urls)（确保选择正确的 Django 版本，此代码对以上 1.10 有效）

*   注意上面 get_urls() 的使用。
*   这个新的管理页面可以通过以下方式访问： [https://localhost:8000/admin/security/configuration/](https://localhost:8000/admin/security/configuration/)
*   此页面将受管理员登录区域保护

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-11-11T23:04:51.447

您应该使用管理员的[get_urls](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_urls)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-09-19T20:16:34.410

这是一个自定义管理页面应该需要的一切示例（从 Django 1.6 开始），该页面从对象详细信息页面右上角的“历史记录”按钮旁边的按钮链接到：

[https://gist.github.com/mattlong/4b64212e096766e058b7](https://gist.github.com/mattlong/4b64212e096766e058b7)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-03-18T09:02:33.347

完整示例：

```
from django.urls import path
from django.contrib import admin
from django.db import models

class DummyModel(models.Model):
    class Meta:
        verbose_name = 'Link to my shiny custom view'
        app_label = 'users'  # or another app to put your custom view

@admin.register(DummyModel)
class DummyModelAdmin(admin.ModelAdmin):
    def get_urls(self):
        view_name = '{}_{}_changelist'.format(
                DummyModel._meta.app_label, DummyModel._meta.model_name)
        return [
            path('my_view/', MyCustomView.as_view(), name=view_name)
        ] 
```

使用这种方法，Django 的**makemigrations**命令将创建 DB 迁移来为 DummyModel 创建表。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2021-01-15T02:43:32.027

如果你想创建一个自定义页面只是为了放置一个任意表单来处理用户输入，你可以试试[django-etc 。](https://pypi.python.org/pypi/django-etc)有`etc.admin.CustomModelPage`你可以使用：

```
 # admin.py
    from etc.admin import CustomModelPage

    class MyPage(CustomModelPage):

        title = 'My custom page'  # set page title

        # Define some fields you want to proccess data from.
        my_field = models.CharField('some title', max_length=10)

        def save(self):
            # Here implement data handling.
            super().save()

    # Register the page within Django admin.
    MyPage.register() 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-22T09:14:35.507

[根据django 的文档](https://docs.djangoproject.com/en/4.0/ref/contrib/admin/#adding-views-to-admin-sites)，扩展`AdminSite`课程对我来说效果最好。此解决方案保护管理站点登录机制下的页面，并且设置它比看起来更容易：

1.  如果您有其他管理代码（例如`myapp/admin.py`），请扩展默认类：

```
from django.contrib.admin import AdminSite

class CustomAdminSite(AdminSite):

    def get_urls(self):
        custom_urls = [
            path('admin/preferences/', self.admin_view(views.my_view)),
        ]
        admin_urls = super().get_urls()
        return custom_urls + admin_urls  # custom urls must be at the beginning

site = CustomAdminSite()

# you can register your models on this site object as usual, if needed
site.register(Model, ModelAdmin) 
```

2.  实现视图

```
def my_view(request):
    return render(request, 'admin/preferences/preferences.html') 
```

3.  在 中使用该管理站点`urls.py`，而不是默认站点

```
from myapp import admin

# now use admin.site as you would use the default django one
urlpatterns = [
    # ...
    path('admin/', admin.site.urls),
    # ...
] 
```

# c++ - change C++ code from Win32 platform to WinCE

> ID：10053984
> 
> 赞同：0
> 
> 时间：2012-04-07T11:17:24.793
> 
> 标签：c++, windows, windows-ce

I have a Win32 application in C++.

What I want to produce is an .exe for this application compatible with WinCE. I thought it is better to change my platform. But when I run the code in smart device platform, there are many errors! What is the best way to change the source code?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T16:44:28.733

这条路可能很简单，也可能很困难。取决于源代码。一开始就没有考虑设备而编写的代码很少能在不改变的情况下工作。第一步是将所有代码导入针对您的设备 SDK 的智能设备项目并尝试构建它。编译器和链接器将指示您必须完成的工作。

您可能面临的一些较大的痛点是：

*   Windows CE 是 Win32 的一个子集，因此代码使用 CE 中不可用的 API 是可能的，甚至是可能的。你必须为那些找到替代品。
*   Windows CE 非常偏向于 Unicode，大多数 Win32 API 在 CE 中甚至没有 ASCII 版本。大量桌面代码是基于 ASCII 的。您将不得不重新编写所有代码。使用 TCHAR 宏有助于保持代码向后兼容。
*   如果代码使用任何内联 ASM，这可能会让生活变得困难，特别是如果您要迁移到代码不同且不支持内联 ASM 的 ARM。
*   CE 中的 UI/GDI 内容比桌面下的要有限得多。UI 很难轻松移植。
*   你在使用第三方库吗？如果有，他们有 CE 支持吗，或者你能得到源代码吗？

还有很多其他的小“陷阱”，但是在不了解您的代码库的情况下，很难说更多。同样，编译器和链接器将首先让您了解您还有多少工作要做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T22:03:29.380

我建议保留 win32 版本，这样开发和调试代码会容易得多。在某些 Windows ce 设备上，您可能无法在调试器中运行代码。

如果您的应用程序是在没有 UNICODE 的情况下编译的，那么每次调用需要字符串的 API 函数时，您都必须将 CHAR* 字符串转换为 WCHAR* 字符串。如果您只是将您的应用程序转换为 UNICODE，您将节省大量时间。否则到处使用 TCHAR。

你会发现有些代码需要 Windows CE 平台的特殊版本和 Win32 不同的版本。然后你可以使用 if-defs：

```
#if defined(_WIN32_WCE)
/// windows ce code version
#else
/// win32 code version
#endif 
```

如果您想移植到 Windows CE 5.0，请为内存限制做好准备：每个进程 32MB，但实际上您的代码可用的内存要少。您的设备实际上可以有 120+MB 或 RAM，要访问它，您可以使用内存映射文件。

# android - Android中单选按钮的按钮设置为null时左侧的间隙

> ID：10053992
> 
> 赞同：0
> 
> 时间：2012-04-07T11:18:43.013
> 
> 标签：android, layout, text, radio-button, radio-group

我正在开发一个 Android 应用程序，其中有一个带有 3 个单选按钮的单选组。

以下是相同的代码：

```
<RadioGroup android:id="@+id/radioButtonGroup" android:layout_width="wrap_content" android:layout_height="wrap_content" android:orientation="horizontal" android:layout_alignParentBottom="true" android:layout_centerHorizontal="true" >

  <RadioButton android:id="@+id/oneRadioButton" android:layout_width="wrap_content"
  android:layout_height="wrap_content" android:button = "@null"
  android:text="@string/one_text"
  android:gravity="center" >
  </RadioButton>
  <RadioButton android:id="@+id/twoRadioButton" android:layout_width="wrap_content"
  android:layout_height="wrap_content" android:text="@string/two_text"
  android:button = "@null"  android:gravity="center">
  </RadioButton>
  <RadioButton android:id="@+id/threeRadioButton" android:layout_width="wrap_content"
  android:layout_height="wrap_content" android:text="@string/three_text"
   android:button = "@null"  android:gravity="center" >
  </RadioButton>
 </RadioGroup> 
```

从代码中你可以看到我设置了 android:button = "@null"。我这样做只是因为我不想要按钮而我只想要文本。

我的问题是，即使我将按钮设置为空，我也可以在每个单选按钮的左侧文本上看到一个空白，就像这样

```
|         (gap)rbt1(gap)rbt2(gap)rbt3     |
|                                         | 
```

如何消除这个差距？我尝试`android:layout_marginLeft="-20dp"`了使文本更接近的方法，但这也使按钮相互重叠。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T12:08:54.770

尝试`android:background="@android:color/transparent"`在这样的xml文件中使用单选`android:button = "@null"`按钮

# javascript - Hibernate @email 验证失败

> ID：10053993
> 
> 赞同：2
> 
> 时间：2012-04-07T11:18:54.130
> 
> 标签：javascript, email, gwt, hibernate-validator

我在使用休眠验证注释@Email 进行 GWT 客户端验证时遇到问题。我将此注释放在实体 getter 上，当我检查约束违规时（在我输入此电子邮件后：test@test），我收到一条错误消息“不是格式正确的电子邮件地址”。但是当我在服务器端测试这个时，这个电子邮件地址通过了。你们有人有这个问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-10T20:57:23.537

作为解决方法，使用 Pattern 注释：

```
@Pattern(regexp ="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.(?:[a-zA-Z]{2,6})$") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T15:20:32.527

`EmailValidator`Hibernate Validator 提供的实现`java.util.regex.Pattern`用于验证输入字符串。由于 GWT 将 Java 代码交叉编译为 Javascript，因此它只支持 JS 级别`RegEx`，因此不允许`java.util.regex.Pattern`使用。

因此，如果您看到 GWT 的重新实现`EmailValidator`，您会发现这个验证器特别没有实现/支持： http: [//grepcode.com/file/repo1.maven.org/maven2/com.google。 gwt/gwt-user/2.4.0/org/hibernate/validator/constraints/impl/EmailValidator.java?av=h](http://grepcode.com/file/repo1.maven.org/maven2/com.google.gwt/gwt-user/2.4.0/org/hibernate/validator/constraints/impl/EmailValidator.java?av=h)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T23:30:01.717

尝试使用以下邮件：

```
test@test.test 
```

并告诉我结果。

# hibernate - How to model relationships changing one to one relationships with Hibernate

> ID：10053994
> 
> 赞同：2
> 
> 时间：2012-04-07T11:18:57.577
> 
> 标签：hibernate, orm, data-modeling, foreign-key-relationship

I have 2 entities plug and socket which have one to one mapping.

Now, plug has a foreign key relationship to the socket it is plugged in to.

Hibernate generates unique constraint on the foreign key so as to ensure a one-to-one particpation.

I have say 10 plugs which are plugged into 10 sockets.

After some time, an update comes which informs the system about the change in arrangement.

The scenario is plugA which was plugged in to socketA is now plugged into SocketB and plugB which was plugged into SocketB is now plugged into socketA.

When doing the update, hibernate first tries to update plugA's foreign key column to SocketB which results in the violation of unique constraint. This is because the plugB to socketB relationship has not yet ben altered.

What is the most correct way to model the relationship?

Note that entire update needs to occur as a single transaction.

This is the code

Inside socket

```
@OneToOne(mappedBy="socket")
public Plug getPlug()
{
   return plug;
} 
```

Inside Plug @OneToOne(optional=false) public Socket getSocket() { return socket; }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T11:42:22.300

我建议你要么有 2 笔交易，如

```
first transction :  
set both plug.socket to null

second transaction:  
set both plug.socket to what you eventually want 
```

或者

利用`many-to-one`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T08:59:35.687

我喜欢你的问题，所以我不得不尝试解决它。所以我希望你还没有自己弄清楚.. :)

所以你需要做的是这样的：

```
@Override
public void swap(Socket s1, Socket s2) {
    s1 = em.find(Socket.class, s1.getId());
    s2 = em.find(Socket.class, s2.getId());
    Plug plug1 = s1.getPlug();
    Plug plug2 = s2.getPlug();
    plug1.setSocket(null); //This is to avoid duplicate key exception
    plug2.setSocket(null);
    em.flush(); //Without this the nullifying will just be overwritten by the next change.
    plug1.setSocket(s2);
    plug2.setSocket(s1);

} 
```

现在，套接字字段可以为空/可选，这一点很重要。所以你必须删除`optional=true`. 但这使您没有唯一的约束，这可能导致不一致，因为关系实际上变成了一对多的关系。所以您要做的是：

```
@OneToOne
@JoinColumn(nullable=true, unique=true)
private Socket socket; 
```

所以剩下的唯一问题是您现在可以在没有插座的情况下保留插头。这应该不是一个大问题，并且可以在您的 DAO 中轻松预防/验证。

# video - how to program some "dynamic" graphic image like most seen in movie

> ID：10053996
> 
> 赞同：0
> 
> 时间：2012-04-07T11:19:29.077
> 
> 标签：video, dynamic

Usually you can see a lot of "dynamic" graphic images displaying on computer screen or part of robot or somewhere in movie. It's cool. I want to know how to archive that. You can suggest some links like homepage or forums about this. Or you can suggest some books about this. In a word, you can give out any useful information about this. And you can give out some "keyword". I will search them hard. Maybe this is off-topic, but I think it should be relative with "program" (they can be drawn with code). A simple example is "Conky", it can display relative graphic about computer information. And I want to draw graphic depend on any information I add in.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T11:32:16.270

我已经使用了处理图表的小动画（特别是 JS impl ProcessingJS [http://processingjs.org/](http://processingjs.org/)）。As Processing as ProcessingJS 有丰富的设置来绘制图表和动画这些。

# c++ - 将局部变量绑定到闭包的最便宜方法

> ID：10053998
> 
> 赞同：5
> 
> 时间：2012-04-07T11:19:48.827
> 
> 标签：c++, c++11

我相信以下是将局部变量绑定到闭包的最便宜的方法：

```
void ByRValueReference(A&& a) {
}

std::function<void ()> CreateClosureByRValueReference() {
  A a;
  std::function<void ()> f = std::bind(&ByRValueReference, std::move(a)); // !!!
  return f;
} 
```

但是，它不能在 Clang 3.1 下编译：

```
error: no viable conversion from '__bind<void (*)(A &&), A>' to 'std::function<void ()>' 
```

和 gcc 4.6.1：

```
/usr/include/c++/4.6/functional:1778:2: error: no match for call to ‘(std::_Bind<void (*(A))(A&&)>) ()’ 
```

我是违反标准还是只是破坏了标准库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T11:38:16.980

这是设计的`std::bind`。完整的规范在 20.8.9.1.2 函数模板绑定 [func.bind.bind] 但在这种情况下第 10 段的最后一个项目符号（描述如何使用绑定参数）适用：

> — 否则，值为 is `tid`，其类型`Vi`为`TiD cv &`

所以换句话说，`std::move(a)`将导致调用包装器存储一个`A`（来自移动构造），然后在`operator()`使用此成员时将*作为左值*转发（附加的 cv 限定符与调用包装器的 cv 限定符匹配，但我离题）。即使它是作为右值传递的。

这种不匹配可以通过 lambda 解决：

```
std::bind([](A& a) { ByRValueReference(std::move(a)); }, std::move(a)) 
```

这可以说是更明确的是，对结果调用的进一步调用是可疑的（因为该`A`成员很可能已被移出），但我并不太喜欢`std::bind`整体的行为。

# google-chrome - 谷歌浏览器为任何 SSL 抛出 -Invalid Server Certificate-

> ID：10053999
> 
> 赞同：-1
> 
> 时间：2012-04-07T11:19:51.263
> 
> 标签：google-chrome, ssl, https

本月第三次出现奇怪的问题，当我重新启动我的电脑时，它正在解决：

Google Chrome 会为任何安全网站（例如 Facebook 或 live 甚至 Gmail）抛出 -Invalid Server Certificate-。我正在使用最新版本的 chrome。有没有人有同样的问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T03:48:14.883

我找到了一个解决方案，这是系统休眠后发生的 Chrome 中的一个错误，我通过终止 chrome 进程“End Process Tree for chrome.exe”来解决它而无需重新启动

我正在使用 Windows 7 家庭高级版 Chrome v18。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T18:34:09.040

它的新闻.. Google chrome 被 ssl 错误击中。

[http://www.slashgear.com/google-chrome-hit-by-ssl-bug-restricting-google-services-06221921/](http://www.slashgear.com/google-chrome-hit-by-ssl-bug-restricting-google-services-06221921/)

我们需要等待安全更新。

**更新**：

检查此[错误报告](http://code.google.com/p/chromium/issues/detail?id=118706)后。我终于解决了：

您只需执行 2 个步骤：

1.  从 chrome 中删除所有缓存。
2.  按 ctrl + w 关闭 chrome。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-17T05:04:21.033

看起来 Chrome 确实有一个错误 -

关闭有证书问题的站点。单击右上角的 3 个点进入设置 --> 关于 --> 更新 Chrome - 它会要求您重新启动以使更新生效.. 接受。

再次浏览该站点 - 如果您仍有问题 - 使用 sslshopper 或 Digicert SSL 检查器免费工具验证您的证书，以确保您的证书已正确安装。