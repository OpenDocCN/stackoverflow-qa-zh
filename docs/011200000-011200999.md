# StackOverflow 问答 11200000-11200999

# javascript - ClearBox 3 jQuery.noConflict(); 和/或 javascript 冲突？

> ID：11200006
> 
> 赞同：1
> 
> 时间：2012-06-26T02:25:37.337
> 
> 标签：javascript, jquery, joomla, mootools

我一直在尝试从[ClearBox3制作这个](https://web.archive.org/web/20120919094306/http://www.clearbox.hu:80/index_en.html)[脚本](http://pastebin.com/5zZRV6ex)以停止与[MooTools](https://mootools.net/core/builder/76bf47062d6c1983d66ce47ad66aa0e0)冲突。但我似乎无法在谷歌上找到如何做到这一点的解决方案。

预期（已删除 mootools 库）- 显示模态窗口 [（来源：][[iforce.co.nz](http://iforce.co.nz/i/hf1foynk.pvf.png)][）][![预期的](../Images/8af0c40734260bad4b5b7c37ed3215b5.png)](https://i.stack.imgur.com/vgvZQ.png)

实际（Joomla 2.5 环境）- 将我重定向到图像并且不显示模式窗口。 [（来源：][[iforce.co.nz](http://iforce.co.nz/i/zn2j3gxi.fpi.png)][）][![实际的](../Images/31a0a0c6b7ce079f9bb6788a4051f614.png)](https://i.stack.imgur.com/J0wMz.png)

到目前为止，我已经运行了代码，并将函数调用与with`jQuery.noConflict();`交换了，但我遇到了 error 。`$``jQuery.``missing ( before formal parameters line 1`

[![缺少正式](../Images/a800c1fdac736e656653d19efeccf380.png)](https://i.stack.imgur.com/91I3r.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/rpqr0ymo.nso.png)）]

[这是这里](http://pastebin.com/mMbeRAJj)脚本的修改。

更新：不确定它的 jquery 是否冲突..由于实现了这个[小提琴](https://jsfiddle.net/v3qWN/)（感谢[Joseph Silber](https://stackoverflow.com/users/825568/joseph-silber)）并且正在发生新的错误..

```
 Timestamp: 26/06/2012 3:22:34 p.m.
 Error: Event[cb[73]] is undefined
 Source File: http://localhost/components/com_autobase/js/clearbox/core/cb_core.js
 Line: 4 
```

所以问题是......我怎样才能停止冲突？ClearBox3 和 MooTools 之间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T02:44:08.457

你不应该替换`$`为`jQuery.`，只是`jQuery`。

你也可以试试

```
JQ = jQuery.noConflict(); 
```

然后将所有替换为`$`，`JQ`这将是您的本地标志。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T02:45:01.027

无需替换所有`$`符号。只需创建一个闭包：

```
(function($) {
    // put all the code in here,
    // the $ will refer to the local variable containing jQuery
})( jQuery.noConflict() ); 
```

这是小提琴：http: [//jsfiddle.net/v3qWN/](http://jsfiddle.net/v3qWN/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T04:24:20.010

我发现问题在于`mootools`覆盖`clearbox`joomla 2.5 上使用的一些变量。

通过使用`$document->addCustomTag('<script src="js/clearbox.js" type="text/javascript"></script>');`. 这在下面`mootools`而不是在上面声明。

# image - 如何停止从缩略图中自动刷新 onclick？

> ID：11200007
> 
> 赞同：0
> 
> 时间：2012-06-26T02:25:41.527
> 
> 标签：image, onclick, refresh, gallery

我的网站上有一个图片库，它使用的缩略图在单击时会放大到缩略图线上方。我遇到了自动刷新问题；每次我单击其中一个缩略图时，页面都会刷新，从而将其恢复为“主图像”。

尽管我对 HTML 的了解充其量只是业余爱好者，但我不会（并且有点拒绝，因为我相信这一切都可以通过简单的 CSS 和 HTML 来完成）使用任何花哨的东西来编写这段代码。

这是代码示例。让我知道您是否需要查看不同的部分。

```
<div id="rightcol"> 

<img name="ImageOnly. src='#' /><img src="#" />
</div>

<div id="leftcol"> <div>

<a href="" onclick="ImageOnly.src='#'"><img src="#" />
</div> 
```

**编辑：**不知何故，我似乎通过改变解决了这个问题

```
 <a href="" onclick="ImageOnly.src='#'"> 
```

至

```
 <a href="#" onclick="ImageOnly.src='#'"> 
```

不太确定为什么会这样，但希望得到解释......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T02:50:55.937

为什么不直接使用一些简单的 ajax/javascript`.innerHTML`呢？而不是尝试停止单击具有`#`. 这样你就可以`rightcol`同步更新。

**HTML**

```
<div id="rightcol"> 
<img name="ImageOnly.src" src='#' />
</div>

<div id="leftcol">
<a href="#" onclick="javascript:ajaxMove('ImageOnly.src')"><img src="#" /></a>
</div> 
```

**AJAX 脚本**

```
 function ajaxMove(src)
  {
  var image = '<img src="'+src+'" alt="my transferred image" />';
  document.getElementById('rightcol').innerHTML = image;
  } 
```

**它是如何使用的？**

1.  从 onclick 事件中请求对象。
2.  根据对象中的信息构建图像标签。
3.  将新的图像标签转移到 id 为“rightcol”的元素

**其他选项**

您还可以`href="#"`从`<a>`标签中删除 并直接从 the`onclick event`然后应用`style="cursor:pointer;"`。然后它将像常规超链接一样工作，但没有刷新。

```
<a onclick="javascript:ajaxMove('ImageOnly.src')" style="cursor:pointer;" >Click Me</a> 
```

# c# - TreeViewItem 和空值

> ID：11200012
> 
> 赞同：0
> 
> 时间：2012-06-26T02:26:26.433
> 
> 标签：c#, wpf

经过一整天的工作后不确定是我……或者 WPF 类型的树有什么不同。我正在向树中添加数据，然后当它是父节点时需要添加其子节点，但 SelectedItem 始终为空！

任何评论或指示都会有所帮助。

谢谢。

XAML：

```
 <TreeView x:Name="TreeView1" Grid.Row="0">
  </TreeView>

Code:
       TreeView myTree = FindChild<TreeView>(Application.Current.MainWindow, "TreeView1");

       myTree.Items.Add(ObjEmployee.Tag);
       TreeViewItem tvi = (TreeViewItem) myTree.SelectedItem;  
//my assumption was that when an item is added to tree most recent used node will be selected but it seems something is avoiding it or maybe works in a different way. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T03:01:39.417

你应该发布一些代码片段..我不明白你需要什么。

如果您使用分层模板 ( [http://msdn.microsoft.com/en-us/library/ms742521.aspx](http://msdn.microsoft.com/en-us/library/ms742521.aspx) ) SelectIedtem 的对象将是您放入 ItemsSource 的数据之一

* * *

否则，“SelectedItem”可以是您放在树视图中的任何类型的可视组件。

```
var treeItem = myTree.SelectedItem;
if (treeItem != null)
    treeitem.GetType().Name; 
```

通常在树视图中使用 TreeViewItem，所有对象都在 treeViewItem.Items

* * *

（编辑）你可以试试这个：

```
 var result = FindVisualChildren<TreeViewItem>(treeView);

            foreach (var item in result)
            {
                if (item.IsSelected)
                {
                    ....
                }
            } 
```

和

```
 public static IEnumerable<T> FindVisualChildren<T>(FrameworkElement depObj) where T : FrameworkElement
    {
        if (depObj != null)
        {
            for (int i = 0; i < VisualTreeHelper.GetChildrenCount(depObj); i++)
            {
                FrameworkElement child = (FrameworkElement)VisualTreeHelper.GetChild(depObj, i);
                if (child != null && child is T)
                {
                    yield return (T)child;
                }

                foreach (T childOfChild in FindVisualChildren<T>(child))
                {
                    yield return childOfChild;
                }
            }
        }
    } 
```

# emacs - emacs 和 dictionary.el

> ID：11200014
> 
> 赞同：2
> 
> 时间：2012-06-26T02:27:01.097
> 
> 标签：emacs, dictionary

我安装了 emacs 24.1 和 dictionary.el，它是 emacs 的 dictd 客户端插件。我可以在命令“dict xxx”中查找字典，它工作得很好。
但是，dictionary.el 无法正常工作，每当我使用“Mx dictionary-search”查找内容时，minibuffer 都会显示“dictionary-mode: Symbol's function definition is void: make-local-hook”。

这是我在 dot-emacs 中的内容： (setq dictionary-server "localhost") 有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T05:06:08.863

如果您指的是[http://me.in-berlin.de/~myrkr/dictionary/](http://me.in-berlin.de/~myrkr/dictionary/)

那么问题就在这里：

```
(make-local-hook 'kill-buffer-hook)
(add-hook 'kill-buffer-hook 'dictionary-close t t) 
```

由于该`add-hook`调用提供了`local`参数，因此您可以通过删除（或注释掉）调用的第一行来解决此问题`make-local-hook`。该行仅留在代码中以提供与非常旧版本的 Emacs 的向后兼容性，否则是多余的。

确保向他们发送错误报告。

**编辑**：tripleee 指出这个问题已经在当前版本的库中得到修复，现在位于以下 URL：

[https://github.com/myrkr/dictionary-el](https://github.com/myrkr/dictionary-el)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T04:22:16.827

“本地主机”定义在`/etc/dictd/dict.conf`. 删除或注释掉 setq 应该没问题。默认情况下，dictionary-el 指向 dict.org。

# ruby-on-rails - 可以创建一个应该运行查询来验证的自定义验证器吗？

> ID：11200016
> 
> 赞同：2
> 
> 时间：2012-06-26T02:27:16.210
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我需要验证一个表的会员卡号仅在当年是唯一的，因此我必须为我的模型列构建一个自定义验证器。

我的问题是：

*   每次更新/创建单行时，都要进行查询以检查当年的唯一性是否繁重？我应该如何处理这个问题？
*   我只在 CakePHP 上使用了自定义验证器，你能发布一个愚蠢的例子来给我看一个语法例子吗？

**编辑1：**

请注意，*当前年份*存储在名为`expire_date`年-月-日日期格式的列中。但是，该检查应仅针对该年度进行。我该如何处理？这就是为什么我想我应该使用自定义验证器，我认为`scope`在这种情况下不应该工作。

**编辑2：**

我刚刚注意到一个`:if`选项，我会检查我是否可以通过它来实现它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T02:38:28.063

Rails 3 提供了语法糖，所以你可以这样做：

```
validates :car_number, :uniqueness => {:scope => :expire_year, :message => 'has already been taken this year'}, :on => :update

def expire_year
  expire_date.strftime("%Y")
end 
```

查询的繁重程度取决于数据库模式和负载。不要忘记在 year 列上设置索引并检查 rails 日志。

请注意，这仅适用于更新，因为新对象在保存之前不会填充时间戳。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T02:34:26.300

ActiveRecord 已经有了！

```
validates_uniqueness_of :car_number, :scope => :year 
```

[validates_uniqueness_of](http://api.rubyonrails.org/classes/ActiveRecord/Validations/ClassMethods.html#method-i-validates_uniqueness_of)的文档

# python - 使用自定义状态代码在 Python Bottle 中发送 dict 作为响应

> ID：11200018
> 
> 赞同：4
> 
> 时间：2012-06-26T02:27:37.883
> 
> 标签：python, json, http, bottle

```
import bottle
from bottle import route, run

@route('/', method='GET')
def homepage():
    return {'foo' : 'bar'}

if __name__=='__main__':
    bottle.debug(True)
    run(host='0.0.0.0', port= 8080, reloader = True) 
```

此配置将返回一个 json 对象，该对象表示来自主页的带有 HTTP 状态代码 200 的 dict。我应该怎么做才能返回相同的内容但带有 202 状态代码？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-26T02:36:22.523

您可以设置`response.status`属性：

```
from bottle import response

@route('/', method='GET')
def homepage():
    response.status = 202
    return {'foo' : 'bar'} 
```

# gallio - 便携式 Gallio.Echo 和用户缓存

> ID：11200022
> 
> 赞同：0
> 
> 时间：2012-06-26T02:28:29.670
> 
> 标签：gallio

有没有办法通过 Gallio.Echo（或配置文件）禁用/重定向 Gallio 的插件缓存？

我正试图保持我的构建可移植，而缓存正在妨碍我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:31:33.917

目前，没有。它使用 LocalApplicationData 并且无法更改，甚至无法将其关闭。

它如何防止你的构建是可移植的？

# jquery - 使用jQuery和背景图像更改内容滑出的垂直导航

> ID：11200025
> 
> 赞同：0
> 
> 时间：2012-06-26T02:28:45.310
> 
> 标签：jquery

我正在尝试创建类似[这样](http://www.templatemonster.com/demo/38395.html)但没有任何子菜单的东西。[当我单击导航项时，背景图像会发生变化，并且内容会像这样](https://dl.dropbox.com/u/5291718/1.jpg)滑出（这是测试站点的样子），框内有各种内容。

当谈到 jQuery 时，我是非常初学者，希望从哪里开始获得一些帮助。我到处寻找教程，但没有这个具体的。如果有人能指出我正确的方向，或者我可以从中学习的模板，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T02:46:18.327

您正在寻找的是 jquery animate 函数。

```
$(document).ready(function() {
    $('#buttonID').click(function() {
        $('#divToSlide').animate({width: 'toggle'});
    });
}); 
```

您可以在这里找到更多信息：http: [//www.learningjquery.com/2009/02/slide-elements-in-different-directions](http://www.learningjquery.com/2009/02/slide-elements-in-different-directions)

至于背景的变化，可以用jquery来设置点击时的css背景属性

```
var $backgroundURL = www.imageURL.com/image.jpg;
$('#divToChange').css({'background-image':'url("'+$backgroundURL'")'}); 
```

完整的代码将如下所示：

```
$(document).ready(function() {
    $('#buttonID').click(function() {
        $('#divToSlide').animate({width: 'toggle'});
        var $backgroundURL = www.imageURL.com/image.jpg;
        $('#divToChange').css({'background-image':'url("'+$backgroundURL'")'});
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T02:45:17.207

[http://buildinternet.com/project/supersized/slideshow/3.2/fade.html](http://buildinternet.com/project/supersized/slideshow/3.2/fade.html)

一个很好的起点。使用选项禁用所有选项：[http ://buildinternet.com/project/supersized/docs.html#options_docs](http://buildinternet.com/project/supersized/docs.html#options_docs)

将您的菜单放在超级上方，然后单击使用 API 调用淡入相应的图像：http: [//buildinternet.com/project/supersized/docs.html#api_docs](http://buildinternet.com/project/supersized/docs.html#api_docs)

现在使用 css positiong 和 z-index 将您的菜单放在上面

将点击事件添加到您的菜单项，

单击菜单项时，请执行以下操作：

```
goto corresponding slide image
show corresponding content 
```

首先显示/隐藏相应的内容，然后使用 animate 函数为宽度或动画位置设置动画。

祝你好运。

# c# - dotnet 实体框架和 mysql 集群

> ID：11200030
> 
> 赞同：0
> 
> 时间：2012-06-26T02:30:25.043
> 
> 标签：c#, mysql, entity-framework, cluster-computing

在谷歌搜索和堆栈溢出一段时间后，我仍然找不到与该主题相关的任何内容。作为MySQL集群的新手，我希望有人有经验分享知识：

使用 .net EF 进行编程时，处理普通的 mysql 和处理 mysql 集群之间会有什么区别吗？在 mysql 集群上使用 EF 时应该注意什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T02:55:14.510

访问 MySQL 集群和非集群 MySQL 服务器之间的 dotnet 客户端代码应该没有差异。有些连接字符串可以具有以逗号分隔的主机名或地址列表，这将允许连接器使用多个服务器之一。请参阅[http://dev.mysql.com/doc/refman/5.1/en/connector-net-connection-options.html](http://dev.mysql.com/doc/refman/5.1/en/connector-net-connection-options.html)

# programming-languages - 函数式编程和强类型之间有什么联系吗？

> ID：11200032
> 
> 赞同：2
> 
> 时间：2012-06-26T02:31:11.110
> 
> 标签：programming-languages, functional-programming, strong-typing, duck-typing

所有“纯”函数式语言都是强类型的。这些之间有什么联系吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:02:02.777

非平凡的函数式编程技术大量使用一阶和高阶函数。一流的函数被实现为闭包。只有当您进行垃圾收集时，才能正常使用一流的函数和闭包。高效可靠的垃圾收集需要内存安全（我假设您的意思是“强类型”）。所以你去。

纯度对此并不重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T12:30:27.163

“纯”函数式语言是那些强制引用透明性的语言。强制执行可以是静态的（通过类型系统），也可以是动态的（例如运行时故障）。当你说“强类型”时，我猜你的意思是“静态类型”......

Sincbe 社区中出现了类型化的纯函数式编程，它们分别在减少运行时故障和使编程更安全、增加纯度而无需类型强制——这样运行时故障仍然是一种选择——是不协调的。

因此，您会看到类型和效果类型与默认情况下的纯度一起使用并不奇怪：这一切都是为了减少运行时故障。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T03:58:06.970

Mercury（您可以在其中进行函数式编程，但更像是一种纯逻辑编程语言）实际上具有明确的静态纯度系统。每个谓词或函数都静态地被认为是纯的或不纯的（或半纯的，但我不打算详细讨论）。在纯函数中调用不纯函数（纯函数是默认值）将导致在编译时检测到错误。

它还有一个静态类型系统，其中每个表达式/变量的类型都是编译器静态知道的，并且在编译时检测到类型错误。但是类型系统完全独立于纯度系统（因为您可以拥有任何给定类型的纯、不纯和半纯函数）。

因此，我们可以想象一种具有相同静态纯度系统的不同语言，但其中表达式/变量的类型不是静态已知的，并且可能在运行时动态变化。甚至可以想象这样一种语言在 PHP 的意义上具有“弱类型”（即，该语言将尝试转换值，以便可以实际执行对值的类型没有意义的操作），或者在某种意义上C（即您可以说服语言将一种类型的值存储在该语言将视为不同类型的变量中）。

人们还可以想象一种语言，其中纯度不是静态已知的，但仍然在运行时强制执行。该语言必须做一些事情，例如跟踪它是否在纯调用中，如果是，则拒绝对不纯原始操作的调用。

所以从这个意义上说，强类型和纯编程之间没有联系。

然而，实际上强制纯粹性的语言（而不是像 Scala 中那样仅仅鼓励它）传统上通过静态分析来实现这一点。确实，纯代码的动机之一是它比以任意方式不纯的代码更容易受到静态分析的影响。一个人为的例子是，如果一个函数接受一个布尔参数并返回一些东西，那么可以知道它最多返回两个结果之一，如果它是纯的。如果**不知道**要变得纯粹，那么语言必须假设它可能在每次调用时返回不同的东西。如果你有兴趣对你的代码进行静态分析，并且你有这个用于强制纯度的静态分析系统，你不妨让它也强制执行类型安全。因此，对于强制执行纯度但没有强大的静态类型系统的语言来说，“没有那么多要求”。我不知道实际存在的任何语言（据我所知，根本没有那么多语言可以强制执行纯洁性）。

# actionscript-3 - AS3 跟踪信息消息

> ID：11200033
> 
> 赞同：0
> 
> 时间：2012-06-26T02:31:17.120
> 
> 标签：actionscript-3

我是一名 AS3 开发人员，但我不确定如何在 firebug 中将这种消息作为[信息](http://d.pr/i/9pWs)消息进行跟踪。

我知道对于错误，我只需要继承错误，但我不确定如何跟踪此类消息。

这段代码：

```
trace("Hola") 
```

将在 Firebug 中显示“Hola”，但我想要花哨的 Info 图标开头也行的背景是蓝色的。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T02:37:46.583

你可以试试[https://addons.mozilla.org/en-US/firefox/addon/flashbug/](https://addons.mozilla.org/en-US/firefox/addon/flashbug/)

几年前，我使用过[http://www.sephiroth.it/firefox/flashtracer/](http://www.sephiroth.it/firefox/flashtracer/)不确定是否还有人使用它。

诀窍是使用 Flash 播放器的调试版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T19:05:59.510

如果您不想安装 Flash 调试播放器（性能？），而不是使用跟踪，请将其路由到跟踪并记录到控制台的 Debug 方法：

```
import flash.external.ExternalInterface;
var debug:Boolean = true;
function log(msg:String):void {
    if ( debug ) {
        trace(msg);
        ExternalInterface.call('console.log',msg);
    }
}
log('Hello World'); 
```

您应该可以将其放入框架中。如果您使用类定义，则必须将该代码块解释为片段。

另请注意，在没有 console.log 的浏览器（如 IE7）中，这将引发错误，因此也许您应该首先测试 console.log 并将结果存储在全局中。

注意调试变量。当您想关闭调试日志记录时，只需将 debug 设置为 false。这是一个过于简化的想法，但提供了基本概念。

增强此概念的另一种方法是包含一个调试“窗口”，如果您愿意的话……实际上只是一个可滚动的文本框，位于其他所有内容之上。这在处理不支持日志记录、调试闪存版本或难以调试的设备时很有帮助，例如移动设备和 AIR。

# ajax - 通过 Ajax 在 jQuery UI tabs() 中将“href”作为数据传递

> ID：11200042
> 
> 赞同：0
> 
> 时间：2012-06-26T02:33:25.163
> 
> 标签：ajax, jquery-ui, jquery, jquery-ui-tabs

我在页面的“index.php”中有一些选项卡（jQuery UI 选项卡）。此页面不仅显示内容，还检索`$_GET`变量以在选项卡下方显示一些其他内容。

问题是如何告诉 jQuery UI `href`(attr of the clicked) 是键 "href" 的值，它必须发送 (GET) 到当前 index.php 页面，在 JS 中调用有`window.location.pathname`（我不能使用PHP 生成的 JavaScript）。

代码是这样的，我没有办法让事情发挥作用。

```
jQuery('#front-tab').tabs({
    spinner: "Loading...",
    select: '#tab-one',
    cache: true,
    fx: {  height: 'toggle', opacity: 'toggle' },
    url: window.location.pathname,
    ajaxOptions: {
        type: 'get',
        success: function(){alert('Sucess');},
        error: function(){alert('I HAZ FAIL');};
        },
        dataType: 'html'
    }
}); 
```

的HTML：

```
<div id="front-tab">
    <ul>
        <li><a href="#tab-home"><span>Home</span></a></li>
        <li><a href="tab-1"><span>Tab Content 1</span></a></li>
        <li><a href="tab-2"><span>Tab Content 2</span></a></li>
        <li><a href="tab-3"><span>Tab Content 3</span></a></li>
        <li><a href="tab-4"><span>Tab Content 4</span></a></li>
    </ul>
    <div id="tab-home">
        content...
    </div>
</div> 
```

是的，每次我尝试加载其他选项卡时，这都会让我充满“I HAZ FAIL”。第一个选项卡是内联 HTML，但其余的是 Ajax。`url: window.location.pathname`似乎不起作用或指向正确的方向。好吧，我不知道这是否符合我的要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T02:45:32.100

```
function initTabs(elementHref) {
    jQuery('#front-tab').tabs({
        spinner: "Loading...",
        select: '#tab-one',
        cache: true,
        fx: {  height: 'toggle', opacity: 'toggle' },
        url: elementHref,
        ajaxOptions: {
            type: 'get',
            success: function(){alert('Sucess');},
            error: function(){alert('I HAZ FAIL');};
            },
            dataType: 'html'
        }
    });
}

jQuery('yourLink').on('click', function() {
    initTabs(jQuery(this).attr('href'));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T01:54:30.187

好吧，在注意到 jQuery UI 选项卡的不灵活之后，我不得不自己复制操作。更好的是，与两个插件相比，几行代码。

```
front_tab.click(function(e) {
    // Content parent
    tab_content = $('#tab-content');

    // other variables
    var tab_visible = tab_content.children('div.visible'),
        span = $(this).children('span'),
        span_value = span.html(),
        value = $(this).attr('href'),
        // This gets our target div (if exists)
        target = tab_content.children(value);

    // There is no anchor
    e.preventDefault();

    // Don't do nothing if we are animating or "ajaxing"
    if (tab_content.children().is(':animated') || is_ajaxing) { return; };

    // Put the "selected" style to the clicked tab
    if (!$(this).hasClass('selected')) {
        front_tab.removeClass('selected');
        $(this).addClass('selected');
    }

    // If is target div, call it
    if (target.length > 0) {
        is_ajaxing = true;
        span.html('Loading...');
        tab_content.children().removeAttr('class');
        tab_visible.slideUp('slow', 'swing', function(){
            // Some timeout to slow down the animation
            setTimeout(function() {
                target.attr('class', 'visible').slideDown('slow');
                if (value = '#tpopular') { update_postbox(); }
                is_ajaxing = false;
                span.html(span_value)
            }, 400);
        });
    // So, the target div doesn't exists. We have to call it.
    } else {
        is_ajaxing = true;
        span.html('Cargando...');
        $.get(
        window.location.pathname,
        { href : value },
        function(data) {
                tab_visible.slideUp('slow', 'swing', function(){
                    setTimeout(function() {
                        tab_content.children().removeAttr('class');
                        tab_content
                            .append(unescape(data))
                            .children(value)
                            .css('display', 'none')
                            .attr('class', 'visible')
                            .slideDown('slow');
                        if (value = '#tpopular') { update_postbox(); }
                        is_ajaxing = false;
                        span.html(span_value)
                    }, 800);
                });
            },
        'html');
    }
}); 
```

下一个问题是发出一个很好的错误警告，但这就是解决方案。

# php - 导致页面无法加载的附加查询字符串

> ID：11200045
> 
> 赞同：1
> 
> 时间：2012-06-26T02:33:53.180
> 
> 标签：php, url, query-string

我有一个我正在创建的链接，我希望有一些查询字符串来传递数据。我在 URL 中尝试了 1 个查询字符串，它工作正常：

`http://www.example.com/video/?video=VideoOne`

但是，每当我向 URL 添加额外的查询字符串参数时，我都会被发送到 404 页面：

```
http://www.example.com/video/?video=VideoOne&name=Something 
```

我错过了一些完全明显的东西吗？这可能是什么原因造成的？我在网站的其他地方使用过查询字符串，没有任何问题。

# jquery - 当我单击已绑定单击事件的删除按钮时，我无法删除我的克隆节点

> ID：11200047
> 
> 赞同：0
> 
> 时间：2012-06-26T02:34:41.980
> 
> 标签：jquery

我的代码的第一个片段，位于名为 sys_Param.aspx 的文件中：

```
<div id="div_water" style="display: none" align="center">  
<table width="100%" border="0" id="printTbl" align="center" cellpadding="5" cellspacing="1" class="table">
    <tr class="TR_BG_list" id="printsizescroll" style="display:none">
        <td align="right" class="list_link" style="width: 214px">
        Resize the pictrue：
        </td>
        <td align="left" class="list_link">
            Description:
        <asp:TextBox ID="PrintSizeDec" runat="server" CssClass="form"  style="width: 106px"/>
         width|height:
        <asp:TextBox ID="PrintSmallSize" runat="server" CssClass="form"  style="width: 50px"/>
&nbsp;
        <label>
             <input type="button" name="PintSizeAddClick" value="Add" class="form" id="ButtonAdd" style="width: 44px" onclick="createInputTexts(this)" />
        </label>
       <span class="helpstyle" style="cursor: help;" title="Click to get some help" onclick="Help('H_WaterParam_0008',this)">Help</span>
    </td>
    </tr>
    <tr class="TR_BG_list">
<td align="center" colspan="2" class="list_link">
    <label>
    <input type="submit" name="Savewater" value=" Submit " class="form" id="Savewater" runat="server" onserverclick="Savewater_ServerClick" />
    </label>
&nbsp;&nbsp;
        <label>
    <input type="reset" name="Clearwater" value=" Reset " class="form" id="Clearwater" runat="server" />
    </label>
</td>
</tr>
</table> 
```

另一部分：事件处理程序：

```
function createInputTexts() {

    var trOrigin = $("#printsizescroll");
    var trClone = trOrigin.clone(true);
    var target = $("#printTbl tr:last-child").prev();

    trClone.find(":button").val("delete");
    $('#printTbl').on('click', 'input[type="button"][value="delete"]', function () {
        $(this).parent().parent().parent().remove();
    });   
    trClone.css('display', '');
    // Here you can also set new ID.
    target.after(trClone);
} 
```

问题是：当我单击删除按钮时，它不会删除由 jQuery 动态创建的新克隆行。我很困惑，因为我已将单击事件绑定到每个删除按钮。我需要一些帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T04:41:01.833

看看这是不是你想要的效果：http: [//jsfiddle.net/qV4jG/16/](http://jsfiddle.net/qV4jG/16/)

克隆的按钮仍然具有该`onclick`属性，因此我在绑定单击事件之前删除了它们，如本部分所示：

```
 trClone.addClass("deleteBtn"+i).find(":button").val("delete").removeAttr('onclick').click(function() {
      $(this).parent().parent().parent().remove();
  }); 
```

# php - 使用 ODBC 连接其他计算机上的 Ms Access 数据库

> ID：11200052
> 
> 赞同：0
> 
> 时间：2012-06-26T02:35:30.493
> 
> 标签：php, database, ms-access, odbc

如何使用 ODBC 连接连接到其他计算机上的数据库？

假设，我有一个 MachineA（客户端）和 MachineB（服务器，我存储数据库）。我已经共享（设置为所有人：读/写）该文件夹，并且能够通过映射网络驱动器从 MachineA 访问该文件夹。

我已经尝试过：

*   使用映射网络驱动器：z:\DIVA-PC\database.mdb，连接数据库时出错（路径无效）。

    “（未知）”不是有效路径。确保路径名拼写正确并且您已连接到文件所在的服务器。

*   使用 UNC 路径，选择数据库名称时：\DIVA-PC\database.mdb，但出现错误（您无权打开此位置）

我正在使用：

*   XAMPP
*   Ms.Access数据库
*   PHP odbc_connect("DSN 名称", "用户名", "密码);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:47:56.130

这可能失败的原因有很多。

进入控制面板，选择 ODBC 或数据源并找到您正在使用的 MS Access DSN。它应该显示您正在使用的 MDB 的名称。

这个文件存在吗？它是否在不再映射的映射驱动器上？

如果文件存在：

o 检查文件的权限 - 它需要由运行 Apache 的用户读写。

o 如果在映射驱动器上，请检查运行 Apache 的用户是否与映射驱动器的用户相同。

o 检查您的 mdb 没有指向另一个 mdb 文件的链接。如果是这样，您可能还必须对该文件重复许多这些检查。

o 确保系统环境变量 TEMP 设置为 Apache 用户有权访问的现有目录。

o 确保您有权在与 mdb 文件相同的目录中创建临时文件。

o 检查另一个进程没有打开 mdb。

# javascript - 如何访问具有@符号作为对象名称的Json对象？

> ID：11200060
> 
> 赞同：2
> 
> 时间：2012-06-26T02:36:25.273
> 
> 标签：javascript, json

女士们，先生们，

使用 javascript，我如何访问 JSON 字符串中的“id”，如下所示：

```
 "graph": {
     "edges": {
        "edge": [
            {
                "@": {
                    "id": "3825279",
                    "label": "succeeds",
                    "source": "2746694",
                    "target": "2746515"
                }, 
```

我能够获得优势，但我被“@”符号阻止了：

```
alert(JSON.stringify(json.graph.edges.edge[0])); 
```

返回：

> “@”：{“id”：“3825279”，“标签”：“成功”，“源”：“2746694”，“目标”：“2746515”}，

如何访问此对象中的 id？我试过了：

```
json.graph.edges.edge[0].edge // undefined 
```

@ 符号是一个对象，表示指定标签上的所有属性，但是如何使用它呢？

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T02:37:54.530

你有没有尝试过：

```
json.graph.edges.edge[0]['@'] 
```

?

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T02:40:03.333

在 Javascript 中， `o.a`并且`o["a"]`是完全等价的，所以这将起作用：

```
json.graph.edges.edge[0]["@"] 
```

# android - Canvas.drawBitmap 绘制带有黄色色调的图像

> ID：11200062
> 
> 赞同：1
> 
> 时间：2012-06-26T02:36:37.183
> 
> 标签：android, bitmap, camera

我正在尝试从通过 onPreviewFrame 从相机获得的图像中将“Y”组件绘制为灰度。

我正在使用 Canvas.drawBitmap 的版本，它以“颜色”数组作为参数。Android 文档没有提到颜色的格式，所以我假设 ARGB 8888。

我确实显示了一张图像，但它显示出一种奇怪的黄色色调。

下面是我的代码：

```
 public void onPreviewFrame(byte[] bytes, Camera camera) {    
    Canvas canvas = null;
    try {
      synchronized(mSurfaceHolder) {
        canvas = mSurfaceHolder.lockCanvas();

        Size size = camera.getParameters().getPreviewSize();

        int width = size.width;
        int height = size.height;
        if (mHeight * mWidth != height * width)
        {
          mColors = new int[width * height];
          mHeight = height;
          mWidth = width;
          Log.i(TAG, "prewviw size = " + width + " x " + height);
        }
        for (int x = 0; x < width; x ++) {
          for (int y = 0; y < height; y++) {
            int yval = bytes[x + y * width];

            mColors[x + y * width] = (0xFF << 24) | (yval << 16) | (yval << 8) | yval;
          }
        }

        canvas.drawBitmap(mColors, 0, width, 0.f, 0.f, width, height, false, null);
      }
    }
    finally {
      if (canvas != null) {
        mSurfaceHolder.unlockCanvasAndPost(canvas);
      }
    }
  } 
```

我还尝试使用另一个版本的 Canvas.drawBitmap，它以位图为参数。我以类似的方式从同一个数组构造了位图，并告诉它显式使用 ARGB。但它最终还是被染成了黄色！

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-01T08:59:06.750

这是一种不同的方法，但以下方法有效，并且不会受到解决方案的颜色问题的影响：

```
 YuvImage yuv = new YuvImage(data, previewFormat, size.width, size.height, null);
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    yuv.compressToJpeg(new Rect(0, 0, size.width, size.height), 50, out);

    byte[] bytes = out.toByteArray();
    Bitmap bitmap = BitmapFactory.decodeByteArray(bytes, 0, bytes.length);
    canvas.drawBitmap(bitmap, null, new Rect(0, 0, size.width, size.height), null); 
```

注意：这可能需要为每一帧分配数据，而您的解决方案不需要。

# python - Django Csv Importer 整数错误

> ID：11200063
> 
> 赞同：0
> 
> 时间：2012-06-26T02:36:40.350
> 
> 标签：python, django, django-models

我正在使用在这里找到的最新 Django Csv Importer：http: [//django-csv-importer.readthedocs.org/en/latest/index.html](http://django-csv-importer.readthedocs.org/en/latest/index.html)

包含整数的 CSV 的第 2 行没有任何空行。都是数字。我进入 CSV 并将所有带有数字的行转换为整数，然后重新上传文件，但我仍然收到此错误：

```
line 182, in import_data
return importer.import_data(data)
File "/.../lib/python2.7/csvImporter/model.py", line 282, in import_data self.process_line(data, line, lines, line_number)
File "/.../lib/python2.7/csvImporter/model.py", line 299, in process_line
    raise CsvDataException(line_number, field_error =  e.message)

CsvDataException: Line 2: invalid literal for int() with base 10: '' 
```

我的模型设置如下：

```
class Character(models.Model):
    name = models.CharField(max_length=128)
    points = models.IntegerField()
    description = models.TextField()
    image = models.ManyToManyField(Image)
    dice = models.IntegerField(blank=True, null=True)

    def __unicode__(self):
        return self.name

class CsvCharacterUpload(CsvDbModel):
        name = models.CharField(max_length=128)
        points = models.IntegerField()
        description = models.TextField()
        image = models.ManyToManyField(Image)
        dice = models.IntegerField(blank=True, null=True)

    class Meta:
        dbModel = Character
        delimiter = ","
        has_header = True 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T09:08:12.987

CSVCharacterUpload 中的 CharField、IntegerField 等应该是 django-csv-importer 中定义的，而不是 django.models 中定义的。

即，从 csv_importer.fields 导入 CharField, IntegerField

我建议切换到[django-adaptors](https://github.com/anthony-tresontani/django-adaptors)，因为 django-csv-importer 不再维护。

# asp.net - 简单的 asp.net Facebook 身份验证示例

> ID：11200065
> 
> 赞同：-2
> 
> 时间：2012-06-26T02:37:13.063
> 
> 标签：asp.net, facebook, facebook-graph-api, facebook-c#-sdk

我已经阅读了大量有关 Facebook 身份验证的文档，但似乎一切正常。

我已经尝试了一切，包括 Facebook C# SDK 和许多其他选项。

我的应用程序是一个 asp.net 4.0 网站（在 facebook 之外）。

有人有工作样本吗？我只需要验证用户身份并获取基本用户信息，例如姓名、电子邮件和图片。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T03:10:30.510

您可以使用[http://www.dotnetopenauth.net/](http://www.dotnetopenauth.net/)非常好。您还可以使用非常易于使用的 facebook api javascript 库。也许你没有在 facebook 中正确配置你的应用程序。它需要回调 url。一些相关问题：

[Facebook/Twitter 与 dotnetopenauth？](https://stackoverflow.com/questions/4821747/facebook-twitter-with-dotnetopenauth)

[DotNetOpenAuth 获取 Facebook 电子邮件地址](https://stackoverflow.com/questions/5356409/dotnetopenauth-get-facebook-email-address)

[如何使用 DotNetOpenAuth 登录 Facebook](https://stackoverflow.com/questions/9164740/how-to-log-in-with-facebook-using-dotnetopenauth)

# ajax - 如何使用 express.js 在 Ajax 调用中实现 CSRF 保护（寻找完整示例）？

> ID：11200068
> 
> 赞同：23
> 
> 时间：2012-06-26T02:37:30.167
> 
> 标签：ajax, node.js, express, connect, csrf

我正在尝试使用 express.js 框架在使用 node.js 构建的应用程序中实现 CSRF 保护。该应用程序大量使用了对服务器的 Ajax 发布调用。我了解连接框架提供 CSRF 中间件，但我不确定如何在客户端 Ajax 发布请求的范围内实现它。

在 stackoverflow 中发布的其他问题中对此有一些零碎的内容，但我还没有找到一个相当完整的示例来说明如何从客户端和服务器端实现它。

有没有人有一个他们愿意分享如何实现这一点的工作示例？我见过的大多数示例都假设您在服务器端呈现表单，然后将其（连同嵌入式 csrf_token 表单字段）发送到客户端。在我的应用程序中，所有内容都通过 Backbone.js 在客户端（包括模板）呈现。服务器所做的只是提供 JSON 格式的值，这些值被客户端 Backbone.js 中的各种模型使用。据我了解，我需要先通过 ajax 检索 csrf_token，然后才能使用它。但是，我担心从安全角度来看这可能是个问题。这是一个有效的担忧吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-08-04T10:14:26.983

可以通过`meta`为 CSRF 令牌添加标签然后在每个 Ajax 请求中传递 CSRF 令牌来完成

# 服务器

添加 CSRF 中间件

```
app.use(express.csrf());
app.use(function (req, res, next) {
  res.locals.token = req.session._csrf;
  next();
}); 
```

您可以通过元标记将 CSRF 令牌传递给客户端。例如，在`Jade`

```
meta(name="csrf-token", content="#{token}") 
```

# 客户

jQuery 有一个称为 ajaxPrefilter 的功能，它允许您提供一个回调，以便在每个 Ajax 请求中调用。然后使用 ajaxPrefilter 设置标题。

```
var CSRF_HEADER = 'X-CSRF-Token';

var setCSRFToken = function (securityToken) {
  jQuery.ajaxPrefilter(function (options, _, xhr) {
    if (!xhr.crossDomain) {
      xhr.setRequestHeader(CSRF_HEADER, securityToken);
    }
  });
};

setCSRFToken($('meta[name="csrf-token"]').attr('content')); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-26T03:03:21.040

服务器.js

```
...
// All Cookies/Sessions/BodyParser go first
app.use(express.csrf());
...
// Get the request
app.post('/ajax', function(req, res){
    res.render('somelayout', {csrf_token: req.session._csrf});
}); 
```

在 somelayout.jade

```
input(type='hidden', name='_csrf', value=csrf_token) 
```

CSRF 中间件在每个会话中只生成一次 csrf 令牌，因此在用户访问期间它可能不会改变。

此外，它不会检查 GET 和 HEAD 请求上的令牌。只要令牌在请求中（标头、正文或查询），就可以了。这就是它的全部内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-15T20:21:05.647

由于您正在使用`Backbone.js`您的应用程序，我假设它是一个 SPA 并且您最初加载一个`index.html`文件，然后通过`ajax`调用发出任何其他请求。如果是这样，您可以将一小段 JS 代码添加到您的`index.html`文件中，以保存 crsf 令牌以供将来`ajax`调用。

例如：

**index.html**（使用 Handlebars 进行模板...）

```
<!DOCTYPE html>
<html>
    <head>
        ...
        <script type="text/javascript">
            $( function() {
                window.Backbone.csrf = "{{csrfToken}}";
            });
        </script>
    </head>
    <body>
        ...
    </body>
</html> 
```

渲染`index.html`文件时，`csrf`将 express 框架在此处生成的令牌提供给它：`req.session._csrf`

使用时`Backbone.js`，它会设置一个名为 的全局变量`Backbone`。前一个函数所做的只是设置一个调用`csrf`全局`Backbone`对象的属性。当您`ajax`调用`POST`数据时，只需将`Backbone.csrf`变量添加到`_csrf`通过`ajax`调用发送的数据中即可。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-23T16:00:47.287

在服务器中：

```
app.use(function (req, res) {
  res.locals._csrf = req.csrfToken();
  res.locals.csrf_form_html = '<input type="hidden" name="_csrf" value="' + req.csrfToken() + '" >';
  req.next();
}); 
```

在客户端：（swig 模板）

```
var csrf = {{ _csrf|json|safe }};

$.ajaxSetup({
  headers: {
    'X-CSRF-Token': csrf
  }
});

$.post("/create", data, function(result) {
  console.log(result);
}).fail(function(){
  console.log(arguments);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-06T09:37:12.743

**1.**添加csrf保护中间件：

```
app.use(csrf({cookie: true}));

// csrf middleware
app.use(function (req, res, next) {
   res.cookie('X-CSRF-Token', req.csrfToken());
   // this line below is for using csrfToken value in normal forms (as a hidden input)
   res.locals.csrfToken = req.csrfToken(); 
   next();
});

// routing setup goes here 
```

**2.**使用 :添加`beforeSend`回调`$.ajaxSetup`（在所有 ajax 调用之前添加）

```
$.ajaxSetup({
beforeSend: function (xhr, settings) {
    function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie != '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = jQuery.trim(cookies[i]);
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) == (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }

    if (!(/^http:.*/.test(settings.url) || /^https:.*/.test(settings.url))) {
        // Only send the token to relative URLs i.e. locally.
        xhr.setRequestHeader("X-CSRF-Token", getCookie('X-CSRF-Token'));
    }
}
}); 
```

**3.**就是这样！现在您可以发送 ajax 请求，并且不需要在标头中添加任何内容或作为请求参数来传递 csrf。

# php - 是否可以使用 html、jquery 或任何其他网络语言创建链接以使当前页面成为主页？

> ID：11200069
> 
> 赞同：0
> 
> 时间：2012-06-26T02:37:37.063
> 
> 标签：php, javascript, jquery, html

> **可能重复：**
> [如何通过 javascript 在 FF 和 Chrome 中设置默认主页？](https://stackoverflow.com/questions/946189/how-can-i-set-default-homepage-in-ff-and-chrome-via-javascript)

我想为链接创建一些脚本或代码，以便当有人点击该链接时，我的网站成为他/她的主页（抱歉英语不好）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T02:40:29.520

这里：[http](http://www.websitegoodies.com/tools/homepage.php) ://www.websitegoodies.com/tools/homepage.php 然而，这可能取决于浏览器。 `<a href="#" onClick="this.style.behavior='url(#default#homepage)';this.setHomePage('twythm.com');">Clicky</a>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T02:41:01.547

看到[这个问题](https://stackoverflow.com/questions/438108/set-default-home-page-in-javascript)。答案是在 IE 中使用是可能的，`this.setHomePage(url)`但在其他现代浏览器中无法做到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T02:41:09.450

```
<a href="javascript:if(document.all)window.external.AddFavorite(location.href,document.title);  
else if(window.sidebar)window.sidebar.addPanel (document.title,location.href,'');">Bookmark this page</a> 
```

查看此链接了解详情： http: [//www.hostingfanatic.com/webdev/add-to-bookmarks-javascript/](http://www.hostingfanatic.com/webdev/add-to-bookmarks-javascript/)

# python - 将while循环转换为for循环

> ID：11200077
> 
> 赞同：1
> 
> 时间：2012-06-26T02:38:38.347
> 
> 标签：python, loops

> 将以下 while 循环转换为 for 循环。您的代码应该这样编写，以便不需要更改 return 语句。您可以在 while 循环正确之前更改代码。string_list 是包含至少 15 个字符串实例的字符串列表`'***'`

```
j=0 
while i<15: 
  if string_list[j] ='***': 
    i +=1 
  j +=1 
return j 
```

我首先尝试这样做，它说while `i<15`，`i = i+1`所以我知道我的范围从（0...15）不包括15，所以基本上我们会喜欢`i = range(15)`所以我们会有类似的东西：

```
for i in range(15): 
```

我不知道那`j`在做什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T05:28:22.350

我会假设你打算写`string_list[j] == '***'`而不是`string_list[j] ='***'`. 我还将假设`i`已初始化为`0`.

```
i, j = 0, 0 
while i < 15: 
  if string_list[j] == '***': 
    i += 1 
  j += 1 
return j 
```

第一步是了解循环实际在做什么。它遍历`string_list`元素，每次`'***'`遇到an 时`i`都会递增。`i`循环将在到达时终止`15`，并且由于给出了`string_list`包含至少 15 个副本的前提条件，`'***'`我们确实希望循环应该终止。

当循环终止时，`i`将等于`15`并且`j`将简单地计算列表中的元素数，直到这一点。

因此，首先，您可以尝试像这样进行迭代：

```
for s in string_list:
  if s == `***`:
    # keep track of how many times this has happened
    # break if you've seen it happen 15 times
  j += 1
return j 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T03:18:31.787

```
j = [i for i,x in enumerate(string_list) if x=='***'][15]
return j 
```

受彼得和 astynax 评论启发的懒惰版本

```
from itertools import islice
j = next(islice((i for i,x in enumerate(string_list) if x=='***'), 15, None))
return j 
```

# ios - 长按 UIButton

> ID：11200079
> 
> 赞同：2
> 
> 时间：2012-06-26T02:38:44.660
> 
> 标签：ios, uibutton

我想知道如果有人按住 UIButton 的按键时间过长，我是否可以捕获 UIButton 的事件（通过通知或其他机制）；比单个按钮按下更长 - 假设有人按住按钮几秒钟......

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T02:44:35.690

您可以添加[`UILongPressGestureRecognizer`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UILongPressGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/cl/UILongPressGestureRecognizer)到您的按钮，在其 中传递一个选择器`initWithTarget:action:`，并通过设置其`minimumPressDuration`属性来选择持续时间。

# c# - 是否有可能对当前正在被“使用”块使用的引用进行 GC？

> ID：11200080
> 
> 赞同：1
> 
> 时间：2012-06-26T02:38:57.907
> 
> 标签：c#, .net, garbage-collection

鉴于，

```
using (var abc = new Abc())
{

    // abc is not used here at all.

 } 
```

abc 是否有可能在结束大括号之前被垃圾收集？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T02:40:13.583

不。在内部，有一个引用被保留到`abc`结束花括号。

生成的 IL 代码如下所示：

```
 IL_0001:  newobj     instance void ConsoleApplication1.Abc::.ctor()
  IL_0006:  stloc.0
  .try
  {
    IL_0007:  nop
    IL_0008:  nop
    IL_0009:  leave.s    IL_001b
  }  // end .try
  finally
  {
    IL_000b:  ldloc.0
    IL_000c:  ldnull
    IL_000d:  ceq
    IL_000f:  stloc.1
    IL_0010:  ldloc.1
    IL_0011:  brtrue.s   IL_001a
    IL_0013:  ldloc.0
    IL_0014:  callvirt   instance void [mscorlib]System.IDisposable::Dispose()
    IL_0019:  nop
    IL_001a:  endfinally
  }  // end handler 
```

当`using`语句转换为 IL 代码时，编译器实际上将其转换为一个完整的`try / finally`块，并`.Dispose()`在您的`Abc`. 所以基本上它变成了这样的东西：

```
Abc abc = new Abc();
try
{
}
finally
{
    abc.Dispose();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T02:41:38.843

`using`不，它的范围是从和`lock`块的左大括号到右大括号。因此，在这两个大括号之间，它非常存在，并且无论您是否使用它都不会被垃圾收集。

# java - 将文件实例传递给 Playframework 中的另一个方法时出现 NullPointerException

> ID：11200081
> 
> 赞同：0
> 
> 时间：2012-06-26T02:39:01.143
> 
> 标签：java, playframework, playframework-1.x

我正在尝试使用 playframework 上传文件。我创建了一个表单和相应的控制器，如下所示：

```
<form action="@{Admin.testUpload()}" method="POST" enctype="multipart/form-data">
    <input type="text" name="title" />
    <input type="file" name="f1" />
    <input type="file" name="f2" />    
    <input type="submit" value="Send it..." />
</form>

public static void testUpload(File f1, File f2) { 
    System.out.println(f1.getName());
    System.out.println(f2.getName());
} 
```

现在很好，我可以通过实例 f1 和 f2 获取文件。但是，当我想将文件实例传递给另一个方法时，就会发生空指针异常。如 ：

```
public static void testUpload(File f1, File f2) {
    test2(f1);
}

public static void test2(File f1) {
    System.out.println(f1.getName());
} 
```

它将导致 test2 方法中的异常。我发现 playframework 尝试从 tmp 文件夹中获取图像。似乎 playframework 会自动将文件上传到 tmp 文件夹并使用我上传的文件名创建一个文件夹。

是游戏机制吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T05:46:44.803

当您`public static method`在控制器中调用 a 时，Play 将执行 HTTP 重定向，因为它认为您正在调用另一个操作。

因此，当您重定向时，第二个文件对象不存在。您在这里有两个选择。

首先，您可以创建`test2`一个非公共方法。

其次，您可以使用 注释该方法`@Util`，这告诉 Play 它不是一个动作，因此不会尝试重定向。

# struts2 - Struts2——异常启动过滤器struts

> ID：11200082
> 
> 赞同：2
> 
> 时间：2012-06-26T02:39:06.547
> 
> 标签：struts2

我有一个与我刚才问的问题类似的问题。我正在尝试启动我的 Struts2 应用程序，但这次我刚刚下载并将 javassist-3.0.jar 添加到我的类路径（和 /WEB-INF/lib）中，但我仍然遇到同样的错误。有什么建议吗？这是我的 web.xml 中的过滤器引用。

```
<filter>
    <filter-name>struts2</filter-name>
    <filter-class>org.apache.struts2.dispatcher.FilterDispatcher</filter-class>
</filter>
<filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

这是我的控制台中的错误。

```
SEVERE: Exception starting filter struts2
java.lang.reflect.InvocationTargetException - Class: com.opensymphony.xwork2.inject.ContainerImpl$MethodInjector
File: ContainerImpl.java
Method: inject
Line: 295 - com/opensymphony/xwork2/inject/ContainerImpl.java:295:-1
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:449)
    at org.apache.struts2.dispatcher.FilterDispatcher.init(FilterDispatcher.java:195)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:275)
    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:397)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:108)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:3696)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4343)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:719)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)
    at org.apache.catalina.core.StandardService.start(StandardService.java:516)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:710)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:566)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)
Caused by: java.lang.RuntimeException: java.lang.reflect.InvocationTargetException
    at com.opensymphony.xwork2.inject.ContainerImpl$MethodInjector.inject(ContainerImpl.java:295)
    at com.opensymphony.xwork2.inject.ContainerImpl$ConstructorInjector.construct(ContainerImpl.java:431)
    at com.opensymphony.xwork2.inject.ContainerBuilder$5.create(ContainerBuilder.java:207)
    at com.opensymphony.xwork2.inject.Scope$2$1.create(Scope.java:51)
    at com.opensymphony.xwork2.inject.ContainerBuilder$3.create(ContainerBuilder.java:93)
    at com.opensymphony.xwork2.inject.ContainerBuilder$7.call(ContainerBuilder.java:487)
    at com.opensymphony.xwork2.inject.ContainerBuilder$7.call(ContainerBuilder.java:484)
    at com.opensymphony.xwork2.inject.ContainerImpl.callInContext(ContainerImpl.java:574)
    at com.opensymphony.xwork2.inject.ContainerBuilder.create(ContainerBuilder.java:484)
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.createBootstrapContainer(DefaultConfiguration.java:252)
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:193)
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:66)
    at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:390)
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:436)
    ... 19 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.opensymphony.xwork2.inject.ContainerImpl$MethodInjector.inject(ContainerImpl.java:293)
    ... 32 more
Caused by: java.lang.ExceptionInInitializerError
    at com.opensymphony.xwork2.ognl.OgnlValueStackFactory.setContainer(OgnlValueStackFactory.java:85)
    ... 37 more
Caused by: java.lang.IllegalArgumentException: Javassist library is missing in classpath! Please add missed dependency!
    at ognl.OgnlRuntime.<clinit>(OgnlRuntime.java:168)
    ... 38 more
Caused by: java.lang.ClassNotFoundException: javassist.ClassPool
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1358)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1204)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at ognl.OgnlRuntime.<clinit>(OgnlRuntime.java:165)
    ... 38 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:22:48.800

试试这个：

```
<filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping> 
```

**更新 1**

请检查是否包含所有依赖项：

![struts2-core dependencies](../Images/812a1bafb8ed9d1ac4b32f2dcb03d6ac.png)

或者如果您使用的是 Maven：

```
<dependency>
    <groupId>org.apache.struts</groupId>
    <artifactId>struts2-core</artifactId>
    <version>${struts.version}</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T07:36:05.447

**引起：java.lang.ClassNotFoundException: javassist.ClassPool**

you need javassist-3.11.0.GA.jar on your WEB-INF/lib

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T17:04:36.793

我将我拥有的所有 jar 文件替换为我拥有的另一个应用程序中的文件，该应用程序正在工作并且没有这个问题。这个应用程序现在可以工作了。我猜是导致问题的 jar 文件之间存在一些冲突。

# c++ - 覆盖继承类中的赋值运算符

> ID：11200084
> 
> 赞同：1
> 
> 时间：2012-06-26T02:39:24.410
> 
> 标签：c++, oop

```
class A
{
   int Avalue;
   A& operator=(A& copyMe)
   {
       Avalue = copyMe.Avalue;
       return *this;
   }
}

class B:public A
{
   int Bvalue;
   B& operator=(B& copyMe)
   {
       Bvalue = copyMe.Bvalue
       return *this;
   }
} 
```

如何从 B 的赋值运算符中调用 A 或基类赋值运算符？如何处理来自赋值运算符调用的 A 的返回引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T03:00:13.157

所有运算符都可以被认为是一些聪明的函数，但这只是编译器的礼貌，它足够聪明地推断给定的操作数是什么并将它们传递给你的覆盖。这是在有意义的情况下添加漂亮的语法糖的一种很好的可扩展方式，但是由于它们的常用用法，人们无法真正看到这是有效的，但是当您观察覆盖的定义时，它们看起来像函数并且行为像功能。因此，只需使用范围运算符`::`来访问 A 接口的公共部分。

```
A::operator=(copyMe) 
```

请注意，您缺少几个分号，并且类默认为`private`访问。要访问 A 中的复制赋值运算符，您需要将其指定为 public：

```
class A
{
  private:
   int Avalue;
  public:
   A& operator=(A& copyMe)
   {
       Avalue = copyMe.Avalue;
       return *this;
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T02:47:45.130

使用范围运算符显式调用赋值运算符（或任何其他函数）： A::operator=( someval );

查看：[http ://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B](http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T02:43:53.123

您只需要添加`A::operator=(copyMe)`派生的操作。此外，副本应该是*非常量*引用。

# php - 如何在php中显示类DOMElement的对象

> ID：11200088
> 
> 赞同：0
> 
> 时间：2012-06-26T02:40:18.570
> 
> 标签：php

需要你的帮助.. 我从[Dynamically replace the "src" attributes of all tags (redux)](https://stackoverflow.com/questions/3808746/dynamically-replace-the-src-attributes-of-all-img-tags-redux)看到了一个很好的答案，但我不知道如何从下面的代码中显示

```
$dom=new DOMDocument();
$dom->loadHTML($your_html);
$imgs = $dom->getElementsByTagName("img");
foreach($imgs as $img){
    $alt = $img->getAttribute('alt');
    if ($alt == 'pumpkin'){
        $src = 'http://myhost.com/cache/img001.gif'; 
    } else if ($alt== '*'){
        $src = 'http://myhost.com/cache/img002.gif';
    } else if ($alt== 'cool image'){
        $src = 'http://myhost.com/cache/img003.jpg';
    }
    $img->setAttribute( 'src' , $src );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T02:41:56.057

使用该[`DOMDocument::saveHTML()`](http://us3.php.net/manual/en/domdocument.savehtml.php)方法，在修改图像后，通过更改此行：

```
$img->setAttribute( 'src' , $src ); 
```

对此：

```
$img->setAttribute( 'src' , $src );
echo $dom->saveHTML( $img); 
```

# javascript - 挂钩到浏览器搜索

> ID：11200091
> 
> 赞同：1
> 
> 时间：2012-06-26T02:40:48.860
> 
> 标签：javascript, browser, cross-browser

我的网页是“无尽页面”——即，如果用户访问一个 URL，他们可能只会看到前 1000 次点击。当他们向下滚动到 900 时，javascript 代码将获取接下来的 1000 次点击并将其附加到之前的结果中。

我担心的一个问题是人们在浏览器中使用搜索（例如 Mac 上的 command-F，PC 上可能是 control-F）。如果我能捕捉到“到达页面末尾，从顶部开始”事件（使用 Firefox 作为我的示例浏览器），那将是超级骗子。然后我可以使用该事件（如滚动事件）来获取下一页。

有没有人做这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T05:12:39.740

因此，这不是您问题的直接答案，而是建议！

因此，您正在尝试将浏览器用作全文搜索。我可能会推荐一些更强大的东西。另外，我注意到几乎没有普通用户会想到在他们的浏览器中使用查找功能。我们可能会发现这很明显，但它似乎提供了糟糕的用户体验......

您可能想尝试使用 Solr 之类的东西并将其连接到 jQuery 自动完成功能中。您可以根据需要在数据库行的任何部分重新编制索引。它甚至可以防止你的数据库被击中，因为 Solr 查询是再次执行的，而不是你的普通数据库。

Solr 还具有模糊文本搜索功能，对于您提到的用例非常有用。

如果您使用的是 rails，它就像安装 gem 一样容易上手，我相信它甚至会使用 gem 预先打包一个 solr 版本（我认为）。

# java - antlr：我可以让生成的 java 文件扩展现有的类吗

> ID：11200092
> 
> 赞同：1
> 
> 时间：2012-06-26T02:40:59.787
> 
> 标签：java, antlr

问题很简单，我可以让从我的语法文件 Foo.g 生成的 java 源代码（例如 FooParser.java）扩展现有的 java 类吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T03:01:23.560

我认为选项 superClass=MySuperClass; 会为你工作。

# c# - C# Visual Studio 2010 中的面板可见性没有改变

> ID：11200097
> 
> 赞同：1
> 
> 时间：2012-06-26T02:41:35.707
> 
> 标签：c#, .net, visual-studio-2010, panel, show-hide

我正在尝试做一些我认为相当简单的事情。我有 2 个工具条项目。

test1：应该显示面板的 ToolStripMenuItem -> test_panel_1
test2：应该显示面板的 ToolStripMenuItem -> panel1

test_panel_1 包含按钮 -> panel_1_button1 应该隐藏 test_panel_1 并显示 test_panel_2

panel1 包含 button -> button1 应该隐藏 test_panel2 然后显示 panel2

但是，当我运行代码并单击 test1ToolStripMenuItem 时，它会按预期显示 test_panel_1，然后当我单击 panel_1_button_1 时，它只会清除 test_panel_1 而不会显示 test_panel_2。不管我先点击什么，test2ToolStripMenuItem 根本不显示 panel1。

这是我的代码...

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace panel_test
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void panel_1_button1_Click(object sender, EventArgs e)
        {
            test_panel2.Visible = true;
            test_panel_1.Visible = false;
        }

        private void test1ToolStripMenuItem_Click(object sender, EventArgs e)
        {
           test_panel_1.Visible = true;
           panel1.Visible = false;
        }

        private void button1_click(object sender, EventArgs e)
        {
            test_panel_1.Visible = false;
            test_panel2.Visible = true;
        }

        private void test2ToolStripMenuItem_Click(object sender, EventArgs e)
        {
            test_panel2.Visible = false;
            panel1.Visible = true;
        }

        private void button1_Click_1(object sender, EventArgs e)
        {
            this.panel1.Visible = false;
            this.panel2.Visible = true;
        }
    }
} 
```

而且，不确定这是否有帮助，但是...

```
namespace panel_test
{
    partial class Form1
    {
        /// <summary>
        /// Required designer variable.
        /// </summary>
        private System.ComponentModel.IContainer components = null;

        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        #region Windows Form Designer generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            this.menuStrip1 = new System.Windows.Forms.MenuStrip();
            this.testToolStripMenuItem = new System.Windows.Forms.ToolStripMenuItem();
            this.test1ToolStripMenuItem = new System.Windows.Forms.ToolStripMenuItem();
            this.test2ToolStripMenuItem = new System.Windows.Forms.ToolStripMenuItem();
            this.test3ToolStripMenuItem = new System.Windows.Forms.ToolStripMenuItem();
            this.test_panel_1 = new System.Windows.Forms.Panel();
            this.panel1 = new System.Windows.Forms.Panel();
            this.button1 = new System.Windows.Forms.Button();
            this.panel2 = new System.Windows.Forms.Panel();
            this.label3 = new System.Windows.Forms.Label();
            this.test_panel2 = new System.Windows.Forms.Panel();
            this.label2 = new System.Windows.Forms.Label();
            this.panel_1_button1 = new System.Windows.Forms.Button();
            this.label1 = new System.Windows.Forms.Label();
            this.menuStrip1.SuspendLayout();
            this.test_panel_1.SuspendLayout();
            this.panel1.SuspendLayout();
            this.panel2.SuspendLayout();
            this.test_panel2.SuspendLayout();
            this.SuspendLayout();
            // 
            // menuStrip1
            // 
            this.menuStrip1.Items.AddRange(new System.Windows.Forms.ToolStripItem[] {
            this.testToolStripMenuItem});
            this.menuStrip1.Location = new System.Drawing.Point(0, 0);
            this.menuStrip1.Name = "menuStrip1";
            this.menuStrip1.Size = new System.Drawing.Size(467, 24);
            this.menuStrip1.TabIndex = 0;
            this.menuStrip1.Text = "menuStrip1";
            // 
            // testToolStripMenuItem
            // 
            this.testToolStripMenuItem.DropDownItems.AddRange(new System.Windows.Forms.ToolStripItem[] {
            this.test1ToolStripMenuItem,
            this.test2ToolStripMenuItem,
            this.test3ToolStripMenuItem});
            this.testToolStripMenuItem.Name = "testToolStripMenuItem";
            this.testToolStripMenuItem.Size = new System.Drawing.Size(38, 20);
            this.testToolStripMenuItem.Text = "test";
            // 
            // test1ToolStripMenuItem
            // 
            this.test1ToolStripMenuItem.Name = "test1ToolStripMenuItem";
            this.test1ToolStripMenuItem.Size = new System.Drawing.Size(99, 22);
            this.test1ToolStripMenuItem.Text = "test1";
            this.test1ToolStripMenuItem.Click += new System.EventHandler(this.test1ToolStripMenuItem_Click);
            // 
            // test2ToolStripMenuItem
            // 
            this.test2ToolStripMenuItem.Name = "test2ToolStripMenuItem";
            this.test2ToolStripMenuItem.Size = new System.Drawing.Size(99, 22);
            this.test2ToolStripMenuItem.Text = "test2";
            this.test2ToolStripMenuItem.Click += new System.EventHandler(this.test2ToolStripMenuItem_Click);
            // 
            // test3ToolStripMenuItem
            // 
            this.test3ToolStripMenuItem.Name = "test3ToolStripMenuItem";
            this.test3ToolStripMenuItem.Size = new System.Drawing.Size(99, 22);
            this.test3ToolStripMenuItem.Text = "test3";
            // 
            // test_panel_1
            // 
            this.test_panel_1.Controls.Add(this.test_panel2);
            this.test_panel_1.Controls.Add(this.panel_1_button1);
            this.test_panel_1.Controls.Add(this.label1);
            this.test_panel_1.Location = new System.Drawing.Point(44, 28);
            this.test_panel_1.Name = "test_panel_1";
            this.test_panel_1.Size = new System.Drawing.Size(442, 317);
            this.test_panel_1.TabIndex = 1;
            this.test_panel_1.Visible = false;
            // 
            // panel1
            // 
            this.panel1.Controls.Add(this.button1);
            this.panel1.Location = new System.Drawing.Point(218, 187);
            this.panel1.Name = "panel1";
            this.panel1.Size = new System.Drawing.Size(328, 318);
            this.panel1.TabIndex = 1;
            this.panel1.Visible = false;
            // 
            // button1
            // 
            this.button1.Location = new System.Drawing.Point(86, 155);
            this.button1.Name = "button1";
            this.button1.Size = new System.Drawing.Size(75, 23);
            this.button1.TabIndex = 0;
            this.button1.Text = "panel 3 to 4";
            this.button1.UseVisualStyleBackColor = true;
            this.button1.Click += new System.EventHandler(this.button1_Click_1);
            // 
            // panel2
            // 
            this.panel2.Controls.Add(this.panel1);
            this.panel2.Controls.Add(this.label3);
            this.panel2.Location = new System.Drawing.Point(95, 194);
            this.panel2.Name = "panel2";
            this.panel2.Size = new System.Drawing.Size(398, 260);
            this.panel2.TabIndex = 1;
            this.panel2.Visible = false;
            // 
            // label3
            // 
            this.label3.AutoSize = true;
            this.label3.Location = new System.Drawing.Point(86, 118);
            this.label3.Name = "label3";
            this.label3.Size = new System.Drawing.Size(71, 13);
            this.label3.TabIndex = 0;
            this.label3.Text = "this is panel 4";
            // 
            // test_panel2
            // 
            this.test_panel2.Controls.Add(this.panel2);
            this.test_panel2.Controls.Add(this.label2);
            this.test_panel2.Location = new System.Drawing.Point(154, 101);
            this.test_panel2.Name = "test_panel2";
            this.test_panel2.Size = new System.Drawing.Size(358, 237);
            this.test_panel2.TabIndex = 3;
            this.test_panel2.Visible = false;
            // 
            // label2
            // 
            this.label2.AutoSize = true;
            this.label2.Location = new System.Drawing.Point(70, 118);
            this.label2.Name = "label2";
            this.label2.Size = new System.Drawing.Size(71, 13);
            this.label2.TabIndex = 0;
            this.label2.Text = "this is panel 2";
            // 
            // panel_1_button1
            // 
            this.panel_1_button1.Location = new System.Drawing.Point(86, 155);
            this.panel_1_button1.Name = "panel_1_button1";
            this.panel_1_button1.Size = new System.Drawing.Size(75, 23);
            this.panel_1_button1.TabIndex = 2;
            this.panel_1_button1.Text = "button1";
            this.panel_1_button1.UseVisualStyleBackColor = true;
            this.panel_1_button1.Click += new System.EventHandler(this.panel_1_button1_Click);
            // 
            // label1
            // 
            this.label1.AutoSize = true;
            this.label1.Location = new System.Drawing.Point(28, 21);
            this.label1.Name = "label1";
            this.label1.Size = new System.Drawing.Size(42, 13);
            this.label1.TabIndex = 0;
            this.label1.Text = "panel 1";
            // 
            // Form1
            // 
            this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.ClientSize = new System.Drawing.Size(467, 357);
            this.Controls.Add(this.test_panel_1);
            this.Controls.Add(this.menuStrip1);
            this.MainMenuStrip = this.menuStrip1;
            this.Name = "Form1";
            this.Text = "Form1";
            this.menuStrip1.ResumeLayout(false);
            this.menuStrip1.PerformLayout();
            this.test_panel_1.ResumeLayout(false);
            this.test_panel_1.PerformLayout();
            this.panel1.ResumeLayout(false);
            this.panel2.ResumeLayout(false);
            this.panel2.PerformLayout();
            this.test_panel2.ResumeLayout(false);
            this.test_panel2.PerformLayout();
            this.ResumeLayout(false);
            this.PerformLayout();

        }

        #endregion

        private System.Windows.Forms.MenuStrip menuStrip1;
        private System.Windows.Forms.ToolStripMenuItem testToolStripMenuItem;
        private System.Windows.Forms.ToolStripMenuItem test1ToolStripMenuItem;
        private System.Windows.Forms.ToolStripMenuItem test2ToolStripMenuItem;
        private System.Windows.Forms.ToolStripMenuItem test3ToolStripMenuItem;
        private System.Windows.Forms.Panel test_panel_1;
        private System.Windows.Forms.Panel test_panel2;
        private System.Windows.Forms.Label label2;
        private System.Windows.Forms.Button panel_1_button1;
        private System.Windows.Forms.Label label1;
        private System.Windows.Forms.Panel panel2;
        private System.Windows.Forms.Label label3;
        private System.Windows.Forms.Panel panel1;
        private System.Windows.Forms.Button button1;
    }
} 
```

我玩过一点用户控件，我喜欢编辑和查看它们的方式比面板好得多；但是，我不知道如何控制隐藏和显示它们。

谢谢您的帮助。我知道这一定是编码 101，但我还没有完全弄清楚。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T02:59:38.440

看起来你`test_panel_2`是 的孩子`test_panel_1`。`panel1`是 的孩子`panel2`。这可能不是您想要的。事情是这样的，因为`test_panel_2`在*里面* `test_panel_1`，躲`test_panel_1`也躲`test_panel_2`。那里有等级制度。

有一两个地方您再次将可见性设置为 false - 我不确定这些是否正确。

# git - 从上次提交中删除文件

> ID：11200102
> 
> 赞同：0
> 
> 时间：2012-06-26T02:42:14.533
> 
> 标签：git

如何从上次提交中删除文件，但保留其他所有内容？请注意，我还没有将任何东西推送到远程存储库，所以我只需要在本地执行此操作。

我的工作流程：

*   编辑几个文件
*   不小心创建了一个名为`untitled.txt`
*   提交一切
*   注意不需要的`untitled.txt`文件
*   删除它
*   ？？？
*   从此过上幸福的生活

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T02:44:04.450

您可以使用[`git commit --amend`](http://evadeflow.com/2011/04/git-commit-amend/).

所以你会做这样的事情：

```
git rm untitled.txt
git commit --amend 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T02:44:32.120

为什么不让下一次提交删除文件？编辑提交历史记录通常被认为是不好的做法，并且在后续提交中删除文件并没有什么可耻的。

```
git rm untitled.txt
git commit -m "Woopsy" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-12T23:20:40.430

The other answers are fine if you want to not only remove the file from the last commit, but completely.

But what if the creation of the file is not accidental, only the addition of that file to the commit?

If you want to just delete the file from the last commit, but keep the file in your working copy so that you can `git add` it to another commit, you can add `--cached` to the `rm` command:

```
git rm --cached wanted-for-another-commit-but-not-this-one.txt
git commit -a --amend 
```

Now verify that it's gone from the commit:

```
git show -p   # no more diff between /dev/null and the file! 
```

Verify it's still there:

```
ls -l wanted-for-another-commit-but-not-this-one.txt 
```

Verify it's in the list of untracked files, eligible for a `git add`:

```
git status 
```

Basically what we have done is removed the file from the index of staged files, while keeping the working copy. The `git commit -a --amend` command is aware not only of changes in the working copy, but in the index also. It notices a removal from the index and propagates that change to the newly rewritten commit.

# asp.net-mvc - 从 vs2012 发布 mvc4 应用程序没有获取发布设置

> ID：11200106
> 
> 赞同：2
> 
> 时间：2012-06-26T02:42:58.513
> 
> 标签：asp.net-mvc, web-config

我正在使用 VS2012 并且在发布 mvc4 网站时遇到了一些麻烦。

我的发布设置均未应用。

在我的配置中，我有这个

网络配置

```
 <compilation debug="true" targetFramework="4.0" />
  <authentication mode="Forms">
    <forms loginUrl="~/Account/Login" timeout="2880" name="***" enableCrossAppRedirects="true" /> 
```

发布

```
 <?xml version="1.0"?>
 <!-- For more information on using Web.config transformation visit http://go.microsoft.com/fwlink/?LinkId=125889 -->
 <configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
<appSettings>
    <add key="ApiBaseUrl" value="https://api.mydomain.com/api/"  xdt:Transform="Replace" xdt:Locator="Match(key)" />
</appSettings>
<!--
In the example below, the "SetAttributes" transform will change the value of 
"connectionString" to use "ReleaseSQLServer" only when the "Match" locator 
finds an atrribute "name" that has a value of "MyDB".
    <connectionStrings>
  <add name="MyDB" 
    connectionString="Data Source=ReleaseSQLServer;Initial Catalog=MyReleaseDB;Integrated Security=True" 
    xdt:Transform="SetAttributes" xdt:Locator="Match(name)"/>
</connectionStrings>
      -->
<system.web>
  <compilation xdt:Transform="RemoveAttributes(debug)" />
  <authentication mode="Forms" xdt:Transform="Replace">
      <forms loginUrl="~/Account/Login" timeout="2880" name="***" enableCrossAppRedirects="true" domain="www.mydomain.com"/>
  </authentication>
   <!--
  In the example below, the "Replace" transform will replace the entire 
  <customErrors> section of your Web.config file.
  Note that because there is only one customErrors section under the 
  <system.web> node, there is no need to use the "xdt:Locator" attribute.

  <customErrors defaultRedirect="GenericError.htm"
    mode="RemoteOnly" xdt:Transform="Replace">
    <error statusCode="500" redirect="InternalError.htm"/>
  </customErrors>
-->
</system.web>
<system.net>
<mailSettings>
  <smtp xdt:Transform="Replace">
    <network host="localhost"/>
  </smtp>
</mailSettings>
 </system.net>
 <dotless xdt:Transform="Replace" minifyCss="true" cache="true" web="false"  />
 </configuration> 
```

我在设置为发布时发布。

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T01:23:42.460

如果您的 web.config 包含位置标签，您需要确保在发布配置中也包含这些标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T00:19:06.613

在 Web 发布向导中检查您的发布配置文件。在 VS2010 中，web.config 转换是根据发布时选择的构建配置应用的，但是对于新的 Web 发布向导，我相信它存储在发布配置文件中。我相信这是他们包含在 VS2012 中的那个

# ios - 如何提高 NSFetchedResultsController performFetch: 性能？

> ID：11200108
> 
> 赞同：3
> 
> 时间：2012-06-26T02:43:10.777
> 
> 标签：ios, nsfetchedresultscontroller, uisearchdisplaycontroller

我在数据库中只有 3237 条记录，我使用 UISearchDisplayController 和 NSFetchedResultsController 进行搜索。但是当我输入关键字进行搜索时，速度非常慢：

```
2012-06-26 10:26:25.264 KYBD[3863:707] CoreData: sql: SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZARTICLEPARTCHINESE, t0.ZARTICLEPARTENGLISH, t0.ZARTICLEPARTNUMBER, t0.ZARTICLE FROM ZARTICLECONTENT t0 LEFT OUTER JOIN ZARTICLES t1 ON t0.ZARTICLE = t1.Z_PK WHERE ( NSCoreDataStringSearch( t0.ZARTICLEPARTENGLISH, ?, 257, 0) OR  NSCoreDataStringSearch( t0.ZARTICLEPARTCHINESE, ?, 257, 0)) ORDER BY t1.ZARTICLETITLE, t0.ZARTICLEPARTNUMBER
2012-06-26 10:26:26.438 KYBD[3863:707] CoreData: annotation: sql connection fetch time: 0.5325s
2012-06-26 10:26:26.446 KYBD[3863:707] CoreData: annotation: total fetch execution time: 1.1821s for 2549 rows.
2012-06-26 10:26:26.489 KYBD[3863:707] CoreData: sql: SELECT  t1.ZARTICLETITLE, COUNT (DISTINCT  t0.Z_PK) FROM ZARTICLECONTENT t0 LEFT OUTER JOIN ZARTICLES t1 ON t0.ZARTICLE = t1.Z_PK WHERE ( NSCoreDataStringSearch( t0.ZARTICLEPARTENGLISH, ?, 257, 0) OR  NSCoreDataStringSearch( t0.ZARTICLEPARTCHINESE, ?, 257, 0)) GROUP BY  t1.ZARTICLETITLE ORDER BY t1.ZARTICLETITLE
2012-06-26 10:26:26.874 KYBD[3863:707] CoreData: annotation: sql connection fetch time: 0.3733s
2012-06-26 10:26:26.879 KYBD[3863:707] CoreData: annotation: total fetch execution time: 0.3904s for 100 rows. 
```

我的 NSFetchedResultsController 代码：

```
- (NSFetchedResultsController *)fetchedResultsController {
    if (!_fetchedResultsController) {
        NSFetchRequest *request = [[NSFetchRequest alloc] init];
        request.entity = [NSEntityDescription entityForName:@"ArticleContent" inManagedObjectContext:self.managedObjectContext];
        NSSortDescriptor *sort = [NSSortDescriptor sortDescriptorWithKey:@"article.articleTitle" ascending:YES];
        NSSortDescriptor *sort2 = [NSSortDescriptor sortDescriptorWithKey:@"articlePartNumber" ascending:YES];
        request.sortDescriptors = [NSArray arrayWithObjects:sort, sort2, nil];
        request.predicate = nil;

        [NSFetchedResultsController deleteCacheWithName:@"searchResults"];
        _fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request managedObjectContext:self.managedObjectContext sectionNameKeyPath:@"article.articleTitle" cacheName:@"searchResults"];
    }

    return _fetchedResultsController;
} 
```

和搜索代码：

```
- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString {
    if ([searchString length] > 0) {
        [NSObject cancelPreviousPerformRequestsWithTarget:self.fetchedResultsController selector:@selector(performFetch:) object:nil];
        NSPredicate *predicate = [NSPredicate predicateWithFormat:@"articlePartEnglish CONTAINS[c] %@ OR articlePartChinese CONTAINS[c] %@", searchString, searchString];
        self.fetchedResultsController.fetchRequest.predicate = predicate;
        [NSFetchedResultsController deleteCacheWithName:@"searchResults"];
        [self.fetchedResultsController performFetch:nil];

    }

    return YES; 
} 
```

有什么问题吗？以及如何提高性能？此致。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T05:46:20.330

使用`CONTAINS`谓词很慢，特别是在它不区分大小写的情况下。使用两个会使它变得更慢。

Apple 通过实际上不进行全文搜索，使其应用​​程序中的“全文”搜索看起来很快。他们的大多数应用程序都使用前缀搜索，依赖于如果您搜索“Frank”，则不会输入“ran”的概念。此外，它们对属性进行规范化并改为进行基于排序的搜索：例如，如果您有一个`firstName`内容如“François”的`normalizedFirstName`属性，则创建一个丢失大小写和变音符号（“francois”）的派生属性。然后您对“法郎”的搜索得到谓词：

```
normalizedFirstName >= "franc" AND normalizedFirstName < "frand" 
```

这个谓词要快得多。

如果您有一个可以包含多词字符串的属性，并且您想对字符串上的任何单词进行类似的前缀匹配，您可以为关键字创建相关实体并使用子查询来匹配关键字与谓词匹配的实体。

有关详细信息，请参阅 DerivedProperty 示例代码和/或 WWDC 2010 第 137 场会议的视频（均位于 developer.apple.com）。

# c++ - 如何在 C\C++ 中重新调整 .bmp 文件的大小？

> ID：11200110
> 
> 赞同：0
> 
> 时间：2012-06-26T02:43:37.657
> 
> 标签：c++, c, resize, bmp, cbir

我正在做一个 CBIR 系统作为作业。有 100 个 .bmp 文件，但它们有不同的大小，如何将它们重新调整为相同的大小？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T02:57:06.257

看看[CImg Library](http://cimg.sourceforge.net/)，它很容易使用。您可以加载位图文件，然后使用其中一个`resize`功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T05:30:34.613

可能有点矫枉过正，但你可以看看 ImageMagick。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T12:06:32.097

你应该看看 G'MIC，一个用于批量图像处理操作的命令行工具。它甚至比 ImageMagick 的转换工具更先进。

基本上，你可以这样称呼它：

```
gmic *.bmp -resize 128,128,1,3,3 -outputp resized_ 
```

将所有 bmp 图像调整为 128x128 彩色图像，并使用以“resized_”为前缀的文件名保存它们。

G'MIC 可用于 Linux、Windows 和 Mac，网址为：http: [//gmic.sourceforge.net](http://gmic.sourceforge.net)

# c# - C# 数组与 C++ 数组和垃圾收集器的比较

> ID：11200112
> 
> 赞同：0
> 
> 时间：2012-06-26T02:43:44.450
> 
> 标签：c#, arrays

我是一名 C++ 程序员，试图围绕 C# 进行思考，并发现了一些我关心的问题。要声明一个数组，您必须使用 New 运算符对吗？但这不会让垃圾收集器参与进来吗？

假设我有一个函数正在创建一个仅在该函数中使用的数组，并且每帧被调用数千次，那么所有这些对 New 运算符的调用不会给垃圾收集器带来很大的开销吗？

在 C++ 中，这些将是在堆栈上声明的数组，一旦函数结束就会退出范围，并且性能开销将是最小的，但在 C# 中，我担心在这种情况下垃圾收集器可能会占用多少性能。

那么我是否以正确的方式思考这个问题？这里涉及到垃圾收集器吗？它会引起问题吗？有没有更好的“C#方式”来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T02:49:42.210

基本上，不用担心垃圾收集器，它知道自己在做什么，而且非常擅长。

如果你正在做图像的东西，那么是的，你可能会遇到问题......你可以绕过这个，例如你可以使用 stackalloc [http://msdn.microsoft.com/en-us/library/cx9s2sy4.aspx](http://msdn.microsoft.com/en-us/library/cx9s2sy4.aspx)

但这意味着您的代码必须设置为“不安全”。

```
int* frameData;
frameData = stackalloc int[200]; 
```

# google-app-engine - 用于 GAE 的 GAS UI 构建器

> ID：11200117
> 
> 赞同：0
> 
> 时间：2012-06-26T02:44:07.647
> 
> 标签：google-app-engine, google-apps-script

众所周知，谷歌电子表格的 Appscript 现在有一个 UI 构建器，尽管您可以使用脚本本身编写 UI，但构建器是一个重要因素。现在

GAS 应用程序托管在 google drive 中，可以共享或发布为 Webapp。这很棒，但是这种类型的应用程序非常仅限于将您的数据存储在电子表格中，设计一个好的数据库电子表格对于小型应用程序就足够了，但对于 SME 到企业应用程序来说是不可扩展的。

现在有谷歌应用引擎，它有一个非常好的和可扩展的 webapp 平台。

无论如何可以移植 UI 库功能并将其用于应用程序引擎应用程序。将 GAS UI 作为 javascript 基础（客户端），它可以与 GAE 中的任何服务器端语言集成。

有人对此有任何例子吗？或者现在可行吗？

在我看来，这可能是 GAE 的未来，将 GAS 作为客户端库会很棒吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T04:13:25.223

好吧，我认为你应该反过来看。Apps Script 的所有 UI 小部件都是从 GAE 中的 GWT 借来的。事实上，Apps Script 文档在某些地方建议我们在发现 GWT 文档不足时查找 GWT 文档。

说到 UI bilder，我不是 GAE 专家，但是由于您获得了 Eclipse 的 GWT 工具包，您应该能够使用任何 Eclipse 的 UI 创建工具（我可能在这里错了）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:50:01.830

GWT 被编译为 javascript。它不关心后端是什么。我认为您可以使用 json 与您的 python AE 实例进行通信。我在 java AE 上做 GWT，所以没有我自己的例子，但这里有一个在 AE 上使用 python 来使用 App Scripts 的例子[https://developers.google.com/apps-script/articles/appengine](https://developers.google.com/apps-script/articles/appengine)

# spring - 不是日期的有效值

> ID：11200119
> 
> 赞同：0
> 
> 时间：2012-06-26T02:44:17.457
> 
> 标签：spring, date, soap, jaxb

我正在使用 spring ws 2.0.2.RELEASE

我有一个创建销售订单的 Web 服务

SOAP 调用中的两个元素是日期：

```
<ns3:requestedDate>2012-06-06T01:00:00.000+10:00</ns3:requestedDate>

<ns3:orderDate>2012-06-06T10:25:09.681+10:00</ns3:orderDate> 
```

这两个字段都在模式中定义为 xs:dateTime

当我通过 SOAP 调用发送到我的服务时，我得到：

```
 <SOAP-ENV:Fault>

     <faultcode>SOAP-ENV:Client</faultcode>

     <faultstring xml:lang="en">Validation error</faultstring>

     <detail>

        <spring-ws:ValidationError xmlns:spring-ws="http://springframework.org/spring-ws">cvc-datatype-valid.1.2.1: '2012-06-06T01:00:00.000+10:00' is not a valid value for 'date'.</spring-ws:ValidationError>

        <spring-ws:ValidationError xmlns:spring-ws="http://springframework.org/spring-ws">cvc-type.3.1.3: The value '2012-06-06T01:00:00.000+10:00' of element 'ns3:requestedDate' is not valid.</spring-ws:ValidationError>

        <spring-ws:ValidationError xmlns:spring-ws="http://springframework.org/spring-ws">cvc-datatype-valid.1.2.1: '2012-06-06T10:25:09.681+10:00' is not a valid value for 'date'.</spring-ws:ValidationError>

        <spring-ws:ValidationError xmlns:spring-ws="http://springframework.org/spring-ws">cvc-type.3.1.3: The value '2012-06-06T10:25:09.681+10:00' of element 'ns3:orderDate' is not valid.</spring-ws:ValidationError>

     </detail>

  </SOAP-ENV:Fault> 
```

知道为什么 Spring 将这些有效日期报告为无效吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T00:08:51.197

It seems if I pass in just the date portion '2012-06-06' it all works. I suppose the clue here should have been 'date' as opposed to 'datetime'. The end point being called must be expecting only a date.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T02:57:53.483

可能是日期格式。它以格式解析日期，`YYYY-MM-DD`但许多验证器通过了基本上普遍接受的互联网格式`DD-MM-YYYY`. 最近在移动 safari 中验证表单时遇到了类似的问题。尝试更改日期格式，看看是否有效。

# groovy - Gremlin/Groovy groupCount 结果

> ID：11200124
> 
> 赞同：2
> 
> 时间：2012-06-26T02:45:06.720
> 
> 标签：groovy, neo4j, gremlin

我对`groupCount`使用结果节点执行更多查询感到有些困惑。我一直在 Neo4j 控制台中这样做。例如，使用 TinkerGraph 数据集：

```
gremlin> g = TinkerGraphFactory.createTinkerGraph()
==> tinkergraph[vertices:6 edges:6]

gremlin> g.V.getClass()
==> class com.tinkerpop.gremlin.groovy.GremlinGroovyPipeline

gremlin> m = [:]

gremlin> g.V.out.groupCount(m)
==> v[2]
==> v[4]
==> v[3]
==> v[3]
==> v[5]
==> v[3]

gremlin> m
==> v[2]=1
==> v[4]=1
==> v[3]=3
==> v[5]=1

gremlin> m.getClass()
==> class java.util.LinkedHashMap

gremlin> m = m.keySet()
==> v[2]
==> v[4]
==> v[3]
==> v[5]

gremlin> m.getClass()
==> class java.util.HashMap$KeySet

gremlin> m.outE
==> [StartPipe, OutEdgesPipe]
==> [StartPipe, OutEdgesPipe]
==> [StartPipe, OutEdgesPipe]
==> [StartPipe, OutEdgesPipe]

gremlin> m.outE.map
==> [StartPipe, OutEdgesPipe, PropertyMapPipe]
==> [StartPipe, OutEdgesPipe, PropertyMapPipe]
==> [StartPipe, OutEdgesPipe, PropertyMapPipe]
==> [StartPipe, OutEdgesPipe, PropertyMapPipe] 
```

如何`m`用作`GremlinGroovyPipeline`对象？我期待与此类似的结果：

```
gremlin> m.outE
==> e[7][1-knows->2]
==> e[8][1-knows->4]
==> e[9][1-created->3]
==> e[12][6-created->3]
==> e[10][4-created->5]
==> e[11][4-created->3] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T06:48:46.400

我在与问题完全无关的论坛帖子上随机找到了答案。

尽管如此，这里的答案是：

```
gremlin> m.keySet()_().outE.map
==> {weight=1.0}
==> {weight=0.4} 
```

`_()`在方法调用之后简单地添加文本`keySet()`似乎可以直接将其转换回`GremlinGrrovyPipeline`对象：

```
gremlin> m.keySet()_().getClass()
==> class com.tinkerpop.gremlin.groovy.GremlinGroovyPipeline 
```

# php - 将一个 SQL 表的最高值连接到另一个 SQL 表

> ID：11200127
> 
> 赞同：1
> 
> 时间：2012-06-26T02:45:24.617
> 
> 标签：php, mysql, codeigniter, activerecord, join

好吧，伙计们，我会尽力解释这一点。我有一份学校名单和这些学校的成员名单。我正在构建的应用程序让用户在网站上的操作获得积分。现在我有一个排行榜页面，显示曾经的学校，按总分的顺序排列，但我还想显示该学校的最高个人得分手......

所以现在，使用 CodeIgniter ActiveRecord 我正在这样做......

```
$this->load->database();
$this->db->select('school_name, points')->order_by('points', 'desc');
$query = $this->db->get( 'schools_final' );
return $query; 
```

但是，如果可能的话，我还希望在此查询中显示来自该特定学校的用户表中的最高得分者。我很想避免在 foreach 语句中进行子查询。

我的桌子是这样的...

学校...

```
id | school_name | points 
```

用户...

```
id | first_name | last_name | school_id | points 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T04:56:05.080

我不知道如何用 CI 编写，但你必须使用子查询。在 mysql 中为此目的的简单查询是 { select * from user,school where user.school_id = school.id and user.points = (select max(user.points) from user where user.school_id = school.id) group by school_id } 我相信你会在 CI 中找到一些方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:38:53.493

如果我没有弄错你的问题，那么你想要的结果会在 CI Hope 中给你这个查询所以

```
$query=$this->db->query("SELECT
  school_name.school_name AS School_Name,
  school_name.points      AS Total_point,
  users.first_name        AS Top_Scorer,
  users.points            AS Total_Point
FROM school_name
  LEFT JOIN users
    ON users.school_id = school_name.id
GROUP BY (users.school_id)
ORDER BY school_name.points,users.points DESC");
                return $query->result(); 
```

# javascript - 在javascript中将函数写为字符串

> ID：11200131
> 
> 赞同：0
> 
> 时间：2012-06-26T02:45:39.480
> 
> 标签：javascript, jquery

我想创建一个上下文驱动的菜单。当用户单击树中的任何节点时，就会出现此菜单。每个节点都有一个类“treedropdownmenu”。单击节点时，应打开上下文驱动菜单。我正在使用“删除”菜单选项传递一个方法“_deleteClick”。但它给我一个错误：找不到“_deleteClick”菜单。

我的小部件中有以下代码：

```
$(".treedropdownmenu").live("click", function (event) {
    var pos;
    if(($(window).height() - event.pageY) < 80) {
        pos = {
            left: event.pageX + 20,
            top: event.pageY - 60
        };
    } else {
        pos = {
            left: event.pageX + 20,
            top: event.pageY + 20
        };
    }
    if(ko.dataFor(this).nodeId() && ko.dataFor(this).nodeId() !== 0) {
        var item = ko.dataFor(this);
        var strHtml = "<a href='#' onclick='_deleteClick(item)'>Delete:</a> " + "<br/>" + "<b>Create Date:</b>" + "<br/>" + "<b>Exposed Party Name:</b>" + "<br/>" + "<b>Portfolio Type:</b>" + "<br/>" + "<b>Owner:</b>";
        $("#dataManagerMenuItem1234").show().offset(pos).html(strHtml);
    }
}); 
```

我的删除菜单是：

```
function _deleteClick(item) {
    alert("delete clicked");
} 
```

谁能让我知道我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T02:51:10.383

是的，我认为这行不通。尝试这个：

```
var strHtml = "<a href='#'>Delete:</a> " + "<br/>" + "<b>Create Date:</b>" + "<br/>" + "<b>Exposed Party Name:</b>" + "<br/>" + "<b>Portfolio Type:</b>" + "<br/>" + "<b>Owner:</b>";
 $("#dataManagerMenuItem1234").show().offset(pos).html(strHtml).find('a').click(function() { _deleteClick(item); }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T02:54:00.103

这是向链接添加事件处理程序的一种笨拙方式，尤其是因为无论如何您都是以编程方式创建它。为什么不像这样动态添加点击处理程序？

```
var item = ko.dataFor(this);
var deleteLink = $('<a>', {
    href: '#',
    click: function() {
        _deleteClick(item);
    },
    text: 'Delete:'
});
$("#...").show().offset(pos).append(deleteLink); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T02:51:56.493

不要在字符串中添加事件处理程序，这是不好的做法。

```
var strHtml = "<a href='#'>foo</a>;
var lnk = jQuery(strHtml);
lnk.on("click", function(){ _deleteClick(item); });
$("#dataManagerMenuItem1234").show().offset(pos).append(lnk); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T02:59:24.127

您尚未在此处发布所有代码，但我假设您已`_deleteClick`在本地范围内定义了该函数，并且您的 onclick 处理程序无法从全局范围内访问它。这就是为什么不应该使用`onclick`属性将事件附加到 DOM 元素的原因之一！您的 onclick 属性（以字符串形式写出）不会在正确的上下文中执行。改为使用 jQuery 进行订阅。

看起来您正在使用 KnockoutJS。一个更好的方法是使用[Knockout 模板](http://knockoutjs.com/documentation/template-binding.html)来写出你的菜单。

# php - 简单的 PHP + MySQL 表单不起作用

> ID：11200132
> 
> 赞同：1
> 
> 时间：2012-06-26T02:45:42.150
> 
> 标签：php, mysql

好吧，最近我看了一个教程，并用 Notepad++ 编写了代码。我正在尝试一个简单的 MYSQL 登录/注册表单，但是当我登录时，它给了我我写的“错误的 U/P”错误回显。它将数据库中的所有内容保存为 md5 等。这是我的代码。

注册.php

```
<?php
require('config.php');

if(isset($_POST['submit'])){

//Preform the verification of the nation
$email1 = $_POST['email1'];
$email2 = $_POST['email2'];
$pass1 = $_POST['pass1'];
$pass2 = $_POST['pass2'];

if($email1 == $email2) {
if($pass1 == $pass2) {
//All good.  Carry on.

$name = mysql_escape_string($_POST['name']);
$lname = mysql_escape_string($_POST['lname']);
$uname = mysql_escape_string($_POST['uname']);
$email1 = mysql_escape_string($_POST['email1']);
$email2 = mysql_escape_string($_POST['email2']);
$pass1 = mysql_escape_string($_POST['pass1']);
$pass2 = mysql_escape_string($_POST['pass2']);

$pass1 = md5($pass1);

$sql = mysql_query("SELECT * FROM `users` WHERE `uname` = '$uname'");
if(mysql_num_rows($sql) > 0) {
echo "Sorry, that user already exists!";
exit();
}

mysql_query("INSERT INTO `users` (`id`, `name`, `lname`, `uname`, `email`, `pass`) VALUES (NULL, '$name',  '$lname',  '$uname',  '$email1',  '$pass1')");

}else{
echo "Sorry, your passwords do not match<br><br>";
exit();

}
}else{
echo "Sorry, your emails do not match.<br><br>";

}

}else{

$form = <<<EOT
<form action="register.php" method="POST">
First Name: <input type="text" name="name" /><br />
Last Name: <input type="text" name="lname" /><br />
Username: <input type="text" name="uname" /><br />
Email: <input type="text" name="email1" /><br />
Confirm Email: <input type="text" name="email2" /><br />
Password: <input type="password" name="pass1" /><br />
Confirm Password: <input type="password" name="pass2" /><br />
<input type="submit" value="Register" name="submit" />
</form>
EOT;

echo $form;

}

?> 
```

登录.php

```
<?php
require('config.php');

if(isset($_POST['submit'])){
$uname = mysql_real_escape_string($_POST['uname']);
$pass = mysql_real_escape_string($_POST['pass']);
$pass = md5($pass);

$sql = mysql_query("SELECET * FROM `users` where `uname` = '$uname' and `pass` = '$pass'");
if(mysql_num_rows($sql) > 0){
echo "You are now logged in.";

exit();
}else{
echo "Wrong U/P combination";
}

}else{
$form = <<<EOT
<form action="login.php" method="POST">
Username: <input tye="text" name="uname" /><br>
Password: <input type="password" name="pass" /><br>
<input type="submit" name="submit" value="Login" />
</form>
EOT;

echo "$form";
}

?> 
```

和 config.php

```
<?php
mysql_connect("localhost", "X", "X");
mysql_select_db("X");

?> 
```

config.php 代码是正确的，但我不会放弃 X。

如您所见，此代码会在 login.php 不正确时回显错误。即使它是正确的，它也会给我这个错误。我使用了 MD5 哈希通行证，所以请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T02:51:32.483

首先，您在其中使用 ` 标签 - 这应该是 ' 。

您需要插入或连接变量；IE; 代替

```
mysql_query("INSERT INTO `users` (`id`, `name`, `lname`, `uname`, `email`, `pass`) VALUES (NULL, '$name',  '$lname',  '$uname',  '$email1',  '$pass1')"); 
```

利用;

```
mysql_query("INSERT INTO 'users' ('id', 'name', 'lname', 'uname', 'email', 'pass') VALUES (NULL, '{$name}',  '{$lname}',  '{$uname}',  '{$email1}',  '{$pass1}')"); 
```

无论如何，除了一些好的做法，看看这条线；

```
$sql = mysql_query("SELECET * FROM `users` where `uname` = '$uname' and `pass` = '$pass'"); 
```

只是一个小错字毁了你的一切。将 SELECET 更改为 SELECT ，您应该一切顺利。

祝你好运！

*   伊根

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T02:54:13.980

1.  您不需要以下几行：

    `$email2 = mysql_escape_string($_POST['email2']);`

和

```
`$pass2 = mysql_escape_string($_POST['pass2']);` 
```

2\. 运行`SELECET * FROM users`以查看用户/密码是否真正进入数据库
3\. 添加`echo "$uname $pass <br>";`到登录表单以确保它正确传递

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T02:54:26.997

其他两个答案是正确的，但是您对此有一个更根本的问题：您使用的是旧的、已弃用的 mysql_* 函数。这些函数是 MySQL 的旧程序接口，不支持该 RDBMS 的现代特性。我建议使用 mysqli 或 PDO 进行数据库访问的 OOP 方法。

如果你要坚持这个古老的代码，你至少应该使用`mysql_real_escape_string()`而不是`mysql_escape_string()`.

# telephony - PSTN 问题。调制解调器没有拨号音

> ID：11200136
> 
> 赞同：-1
> 
> 时间：2012-06-26T02:45:55.013
> 
> 标签：telephony, modem

我在连接到调制解调器的 pstn 线路时遇到问题。调制解调器无法获得拨号音，但当我插入普通电话时，它可以。此问题和潜在修复的故障排除步骤是什么？线路过滤器有什么好处吗？

**PSTN有中继器这样的东西吗？**还是DSL过滤器有帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T03:04:34.913

它是 DSL 调制解调器吗？如果是，您可能需要一个过滤器。

1.  检查调制解调器上的端口，确认没有损坏。
2.  在同一栋楼（相同号码）中尝试使用不同电话线的调制解调器
3.  在不同的建筑物（不同的号码）中使用不同的电话线尝试调制解调器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T03:05:08.640

尝试从终端程序向调制解调器发出重置：

AT&F

然后尝试拨打一个号码：

ATDT8005551234

一些常用的 AT 命令在这里： [AT 命令参考](http://www.computerhope.com/atcom.htm)

# python - 使用 Python 2.7.3 在 64 位 Windows 7 上安装 Numpy

> ID：11200137
> 
> 赞同：108
> 
> 时间：2012-06-26T02:45:57.943
> 
> 标签：python, windows, python-2.7, numpy

看起来 Numpy 的唯一 64 位 Windows 安装程序适用于 Numpy 版本 1.3.0，它仅适用于 Python 2.6

[http://sourceforge.net/projects/numpy/files/NumPy/](http://sourceforge.net/projects/numpy/files/NumPy/)

让我感到奇怪的是，我必须回滚到 Python 2.6 才能在 Windows 上使用 Numpy，这让我觉得我错过了一些东西。

我是吗？

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2012-06-26T02:48:00.917

尝试此站点中的（非官方）二进制文件：

[http://www.lfd.uci.edu/~gohlke/pythonlibs/#numpy](http://www.lfd.uci.edu/~gohlke/pythonlibs/#numpy)

您可以获得`numpy`适用于 Python 2.7 或 Python 3 的带有或不带有英特尔 MKL 库的最新 x64。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2015-03-13T21:12:46.570

假设您的计算机上有 python 2.7 64bit 并已从[此处](http://www.lfd.uci.edu/~gohlke/pythonlibs/)下载 numpy ，请按照以下步骤操作（根据需要进行更改`numpy‑1.9.2+mkl‑cp27‑none‑win_amd64.whl`）。

1.  下载（通过右键单击并“保存目标”）[get-pip](https://bootstrap.pypa.io/get-pip.py)到本地驱动器。

2.  在命令提示符下，导航到包含`get-pip.py`并运行在

    `python get-pip.py`

    中创建文件的目录，`C:\Python27\Scripts`包括和。`pip2``pip2.7``pip`

3.  把下载好的复制`numpy‑1.9.2+mkl‑cp27‑none‑win_amd64.whl`到上面的目录（`C:\Python27\Scripts`）

4.  仍然在命令提示符下，导航到上述目录并运行：

    `pip2.7.exe install "numpy‑1.9.2+mkl‑cp27‑none‑win_amd64.whl"`

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2015-08-14T09:29:25.993

从[http://www.lfd.uci.edu/~gohlke/pythonlibs/#numpy](http://www.lfd.uci.edu/~gohlke/pythonlibs/#numpy)下载**numpy-1.9.2+mkl-cp27-none-win32.whl**。

将文件复制到**C:\Python27\Scripts**

从上述位置运行 cmd 并键入

```
pip install numpy-1.9.2+mkl-cp27-none-win32.whl 
```

您将希望得到以下输出：

```
Processing c:\python27\scripts\numpy-1.9.2+mkl-cp27-none-win32.whl
Installing collected packages: numpy
Successfully installed numpy-1.9.2 
```

希望这对你有用。

**编辑 1**
添加@oneleggedmule 的建议：

您还可以在 cmd 中运行以下命令：

```
pip2.7 install numpy-1.9.2+mkl-cp27-none-win_amd64.whl 
```

基本上，单独编写 pip 也很有效（如原始答案所示）。为了清晰或规范，也可以编写 2.7 版本。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-01-09T14:52:05.443

（非官方）二进制文件[（http://www.lfd.uci.edu/~gohlke/pythonlibs/#numpy）](http://www.lfd.uci.edu/~gohlke/pythonlibs/#numpy) 对我有用。
我试过 Mingw，Cygwin，由于各种原因都失败了。我使用的是 64 位 Windows 7 企业版。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-03-20T16:52:39.577

你也可以试试这个，anaconda [http://continuum.io/downloads](http://continuum.io/downloads)

但是你需要修改你的环境变量PATH，让anaconda文件夹在原来的Python文件夹之前。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-10-03T18:40:51.140

在 Windows 上寻找 Python 的程序员也使用 Visual Studio 的 Python 工具并非不可能。在这种情况下，通过利用包含的“Python 环境”窗口，可以轻松安装附加包。默认情况下在窗口中选择“概览”。您可以在那里选择“点”。

然后，您可以通过在搜索窗口中输入 numpy 来安装 numpy，而无需额外的工作。已经建议了相应的“安装 numpy”指令。

尽管如此，我一开始有两个容易解决的问题：

*   “错误：无法找到 vcvarsall.bat”：这个问题已经在[这里](https://stackoverflow.com/questions/2817869/error-unable-to-find-vcvarsall-bat)解决了。虽然我当时没有找到，而是安装了[C++ Compiler for Python](http://www.microsoft.com/en-us/download/details.aspx?id=44266)。
*   然后安装继续，但由于额外的内部异常而失败。安装 .NET 3.5 解决了这个问题。

最后安装完成。这需要一些时间（5 分钟），所以不要提前取消该过程。

# java - 使用 ObjectOutputStream 时估计磁盘上文件的大小

> ID：11200140
> 
> 赞同：3
> 
> 时间：2012-06-26T02:46:41.277
> 
> 标签：java, size, fileoutputstream, objectoutputstream

我正在尝试将我的空间数据从表写入文件。但在写入磁盘之前，我需要知道磁盘上数据的确切大小。例如，假设我正在使用以下代码写入磁盘：

```
 FileOutputStream fos = new FileOutputStream("t.tmp",false);
    ObjectOutputStream oos = new ObjectOutputStream(fos);
    oos.writeInt(gid);
    oos.writeUTF(fullname);
    oos.writeInt(d.shape.length);
    oos.write(d.shape);

    oos.close();
    fos.close(); 
```

我在想磁盘上的文件大小等于：

```
size= 4B {for gid, int} + fullname.getBytes.length() {string} + 4B {d.shape.length, int} + d.shape.length 
```

但实际上，这与磁盘上的实际文件大小有很大不同。

我还注意到，即使使用 ObjectOutputstream 创建一个空文件也会导致磁盘上有 4B 空间。

有关如何计算磁盘上文件大小的任何帮助？

（我不能将数据写入磁盘然后读取实际大小。这会降低性能。相反，我需要根据存储在内存中的数据值来计算磁盘上的数据大小。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T04:22:44.800

> 我正在尝试将我的空间数据从表写入文件。但在写入磁盘之前，我需要知道磁盘上数据的确切大小。

你不应该使用`ObjectOutputStream`. 可以`ObjectOutputStream`为您自动序列化复杂的对象图 - 但这似乎不是您的要求之一。作为此序列化的一部分，`ObjectOutputStream`写入一些流标头信息（这是您在开始时发现的 4 个字节），并且还跟踪先前写入的对象，以便它可以写入特殊的标记值，而不是再次写出整个对象。

相反，只需使用[`DataOutputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/DataOutputStream.html). 它提供了您想要的相同功能：

> 数据输出流允许应用程序以可移植的方式将原始 Java 数据类型写入输出流。然后，应用程序可以使用数据输入流来读回数据。

```
FileOutputStream fos = new FileOutputStream("t.tmp",false);
DataOutputStream dos = new DataOutputStream(fos);
dos.writeInt(gid);                 // write 4 bytes
dos.writeUTF(fullname);            // write 2 bytes of length, then variable length string (UTF encoded)
dos.writeInt(d.shape.length);      // write 4 bytes
dos.write(d.shape);                // write a variable length byte array

dos.close();
fos.close(); 
```

这里不会有任何意外（前提是您知道 UTF 编码的 String 将结束多少字节），并且您可以通过算术计算出确切的文件大小。

（如果您处理的字符串不仅仅等同于一个字符一个字节，您可以首先使用字符集编码器将字符串呈现为字节数组）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T02:53:59.817

假设您不介意浪费一些内存，您可以先将其全部写出`ByteArrayOutputStream`，然后再获取大小。

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
ObjectOutputStream oos = new ObjectOutputStream(boas);
oos.writeInt(gid);
oos.writeUTF(fullname);
oos.writeInt(d.shape.length);
oos.write(d.shape);

oos.close();
boas.close();
int size = boas.size(); 
```

# regex - dijit.form.ComboBox / dijit.form.FilteringSelect 子类上的模糊匹配

> ID：11200142
> 
> 赞同：0
> 
> 时间：2012-06-26T02:47:04.997
> 
> 标签：regex, dojo, dijit.form

我试图扩展`dijit.form.FilteringSelect`它的所有实例都应该匹配输入的要求，无论字符在输入文本中的位置，并且还应该忽略空格和标点符号（主要是句点和破折号）。

例如，如果一个选项是“JP Morgan”，我希望能够在输入“JP”或“P Morgan”后选择该选项。

现在我知道关于匹配字符串中任何位置的部分可以通过在`queryExpr: "*${0}*"`创建实例时传入来完成。

我还没有弄清楚如何让它忽略空格、句点和破折号。我有一个我在这里的例子 - [http://jsfiddle.net/mNYw2/2/](http://jsfiddle.net/mNYw2/2/)。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T03:49:06.063

在这种情况下要掌握的是商店获取查询字符串。它会调用附加商店中的一个函数来提取任何匹配的项目，所以如果你在自动填充输入字段中输入了一个值，它最终会类似于这个在代码中：

```
 var query = { this.searchAttr: this.get("value") }; // this is not entirely accurate
    this._fetchHandle = this.store.query(query, options);
    this._fetchHandle.then(  showResultsFunction  ); 
```

因此，当您定义选择时，覆盖 _setStoreAttr 以在存储查询 api 中进行更改

```
dojo.declare('CustomFilteringSelect', [FilteringSelect], {
    constructor: function() {
        //???
    },
    _setStoreAttr: function(store) {
          this.inherited(arguments); // allow for comboboxmixin to modify it
          // above line eventually calls this._set("store", store);
          // so now, 'this' has 'store' set allready
          // override here
          this.store.query = function(query, options) {
               // note that some (Memory) stores has no 'fetch' wrapper
          };
    }
}); 
```

**编辑**：覆盖 queryEngine 函数而不是查询函数

查看 dojo/store/util 下的文件 SimpleQueryEngine.js。这本质上是从给定*查询中过滤接收到的*`Array` *项目*。好的，它是这样的：`String` *`FilteringSelect`*

 *```
var MyEngine = function(query, options) {
        // create our matching query function
        switch(typeof query){
                default:
                        throw new Error("Can not query with a " + typeof query);
                case "object": case "undefined":
                       var queryObject = query;
                        query = function(object){
                                for(var key in queryObject){
                                        var required = queryObject[key];
                                        if(required && required.test){
                                                if(!required.test(object[key])){
                                                        return false;
                                                }
                                        }else if(required != object[key]){
                                                return false;
                                        }
                                }
                                return true;
                        };
                        break;
                case "string":
  /// HERE is most likely where you can play with the reqexp matcher.
                        // named query
                        if(!this[query]){
                                throw new Error("No filter function " + query + " was found in store");
                        }
                        query = this[query];
                        // fall through
                case "function":
                        // fall through
        }
        function execute(array){
                // execute the whole query, first we filter
                var results = arrayUtil.filter(array, query);
                // next we sort
                if(options && options.sort){
                        results.sort(function(a, b){
                                for(var sort, i=0; sort = options.sort[i]; i++){
                                        var aValue = a[sort.attribute];
                                        var bValue = b[sort.attribute];
                                        if (aValue != bValue) {
                                                return !!sort.descending == aValue > bValue ? -1 : 1;
                                        }
                                }
                                return 0;
                        });
                }
                // now we paginate
                if(options && (options.start || options.count)){
                        var total = results.length;
                        results = results.slice(options.start || 0, (options.start || 0) + (options.count || Infinity));
                        results.total = total;
                }
                return results;
        }
        execute.matches = query;
        return execute;
};

new Store( { queryEngine: MyEngine }); 
```

当在此函数的底部设置 execute.matches 时，发生的情况是，字符串在每个项目上都被调用。每个项目都有一个属性 - Select.searchAttr - 像这样由 RegExp 测试：`new RegExp(query).test(item[searchAttr]);`或者可能更容易理解；item[searchAttr].matches(query);

我没有测试环境，但是找到上面的内联注释并开始使用console.debug..

例子：

```
Stpre.data = [ 
   { id:'WS', name:  'Will F. Smith' },
   { id:'RD', name:'Robert O. Dinero' },
   { id:'CP', name:'Cle    O. Patra' }
];
Select.searchAttr = "name";
Select.value = "Robert Din"; // keyup->autocomplete->query 
```

Select.query 将变为`Select.queryExp.replace("${0]", Select.value)`，在您的简单 queryExp 案例中，' *Robert Din* '.. 这将变得模糊，由您来填写正则表达式，这是开始的内容

```
 query = query.substr(1,query.length-2); // '*' be gone
 var words = query.split(" ");
 var exp = "";
 dojo.forEach(words, function(word, idx) {
    // check if last word
    var nextWord = words[idx+1] ? words[idx+1] : null;
    // postfix 'match-all-but-first-letter-of-nextWord'
    exp += word + (nextWord ? "[^" + nextWord[0] + "]*" : "");
 });
 // exp should now be "Robert[^D]*Din";
 //  put back '*'
 query = '*' + exp + '*'; 
```*

# c# - 将 sql_variant 与实体框架 4 一起使用

> ID：11200143
> 
> 赞同：4
> 
> 时间：2012-06-26T02:47:06.543
> 
> 标签：c#, .net, entity-framework, sql-variant

我的用例非常简单。我有一个小桌子，里面有一列像这样：

```
dtgTestValue sql_variant not null 
```

我创建了一个实体框架模型（.edmx 文件），它跳过了该列说：

> 不支持数据类型“sql_variant”；表 'databaseFoo.dbo.Foobar' 中的列 'dtgTestValue' 被排除在外。

我需要能够在此特定列中读取和写入值。关于如何处理这个相当简单的用例有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T02:56:36.483

EF 4 没有对类型的内置支持`sql_variant`。[本文](http://www.codeproject.com/Articles/137509/Reading-sql_variant-in-Entity-Framework)解释了如何通过将实体映射到自定义查询，分别捕获类型和值，然后在代码中手动解码值来进行读取。

不幸的是，这个解决方案不能适用于写回数据。您可以尝试[将插入/更新/删除映射到存储过程](http://msdn.microsoft.com/en-us/library/bb738695.aspx)，但我不能确定它会起作用，因为我从未尝试过。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-18T14:18:34.240

聚会有点晚了，但还有另一种方法可以做到这一点，可以为您存储在数据库表中的每个变体“类型”创建一个单独的 LINQ 表类。这允许您执行插入操作。例如;

```
[Table(Name = "tVariant")]
public class tVariantDouble
{
    [Column(IsPrimaryKey = true, IsDbGenerated = true)]
    public int variantID { get; set; }

    [Column(CanBeNull = true)]
    public double? myVariant { get; set; }

    [Column(CanBeNull = true)]
    public string name { get; set; }

    [Column(CanBeNull = false)]
    public int typeID { get; set; }

    public tVariantDouble() { typeID = 1; }
};

[Table(Name = "tVariant")]
public class tVariantInteger
{
    [Column(IsPrimaryKey = true, IsDbGenerated = true)]
    public int variantID { get; set; }

    [Column(CanBeNull = true)]
    public int? myVariant { get; set; }

    [Column(CanBeNull = true)]
    public string name { get; set; }

    [Column(CanBeNull = false)]
    public int typeID { get; set; }

    public tVariantInteger() { typeID = 2; }
}; 
```

然后，这些类允许您插入传统的 LINQ-to-SQL 方法。我还在插入期间将 typeID 设置为唯一值，这对于使用 LINQ where 语句再次选择适当类型的数据很有用。

我建议为同一个表创建一个基本模板类，但是 LINQ 在继承方面充其量是笨重的，它根本不起作用。

这种方法确实会造成一些重复，但仍然是一种非常巧妙的方法，与其他建议的方法相比，缺点更少。

如果您想从表中选择所有数据，无论变体类型如何，我建议使用带有单独中间类的联合运算符来连接所有结果。

# android - android java堆空间

> ID：11200145
> 
> 赞同：3
> 
> 时间：2012-06-26T02:47:49.623
> 
> 标签：android, heap-memory, dex

当我包含超过 5 个 jar 时，由于堆内存，eclipse 在编译时会停止。

```
An internal error occurred during: "Activity Monitor Job".
Java heap space
Unable to execute dex : java heap space 
```

我的电脑有2GB内存，eclipse.ini如下

```
-startup
plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.100.v20110502
-showsplash
org.eclipse.platform
-vm
C:/Program Files/Java/jdk1.7.0/bin/javaw.exe
--launcher.XXMaxPermSize
512m
--launcher.defaultAction
openFile
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Xms256m
-Xmx700m 
```

我试图将罐子放在 Eclipse 构建路径设置的库中。但它给了我VerifyError。

我需要增加内存吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T02:52:14.403

`-Xmx700m`您可以尝试通过将值更改为更大的值来增加 Eclipse 允许的最大堆空间。Eclipse ini 中的此设置当前将 JVM 限制为 700MB。我不确定要告诉你分配多少金额。但是，通过反复试验，您应该能够找到适合您的数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T06:05:25.430

这是一个简短而精确的解决方案： [https ://www.simplified.guide/eclipse/fix-gc-overhead-limit-exceeded](https://www.simplified.guide/eclipse/fix-gc-overhead-limit-exceeded)

# ironpython - 分析 IronPython 范围

> ID：11200151
> 
> 赞同：1
> 
> 时间：2012-06-26T02:48:39.493
> 
> 标签：ironpython, dynamic-language-runtime

我正在尝试使用嵌入式 IronPython 脚本编写 C# 代码。然后要分析脚本的内容，即列出所有变量、函数、类及其成员/方法。

假设我已经定义了一个范围并且已经在其中执行了代码，那么有一个简单的方法可以开始：

```
dynamic variables=pyScope.GetVariables();
foreach (string v in variables)
{
    dynamic dynamicV=pyScope.GetVariable(); /*seems to return everything. variables,     functions, classes, instances of classes*/
} 
```

但是我如何弄清楚变量的类型是什么？对于以下 python '对象'，

```
dynamicV.GetType() 
```

将返回不同的值：

x=5 --system.Int32

y="asdf" --system.String

def func():... --IronPython.Runtime.PythonFunction

z=class() -- IronPython.Runtime.Types.OldInstance，我如何识别真正的 python 类是什么？

class NewClass -- 抛出错误，GetType() 不可用。

这几乎就是我要找的。我可以捕获不可用时抛出的异常并假设它是一个类声明，但这似乎不干净。有更好的方法吗？

要发现一个类的成员/方法，我可以使用：

```
ObjectOperations op = pyEngine.Operations;
object instance = op.Call("className");
foreach (string j in op.GetMemberNames("className"))
{
    object member=op.GetMember(instance, j);
    Console.WriteLine(member.GetType());
    /*once again, GetType() provides some info about the type of the member, but returns null sometimes*/
} 
```

另外，如何获取方法的参数？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:11:51.990

这不是真正支持的东西，但所有信息都在那里。你有两个选择：

1.  将对象转换为 IronPython 的类，如 PythonFunction，并使用它们的方法。这些没有记录，所有必要的方法可能都不是公开的，但是您可以阅读源代码以了解如何使用它们。
2.  使用[普通的 Python 技术进行自省](http://docs.python.org/reference/datamodel.html)，例如`__class__`和`__dict__`。这可能是更好的选择。

# grep - 带有基于缩进的上下文的 grep

> ID：11200153
> 
> 赞同：3
> 
> 时间：2012-06-26T02:48:54.990
> 
> 标签：grep, indentation, utility

是否有基于缩进显示上下文的 grep 工具？对于每场比赛，我希望看到所有最近缩进级别较低的行，但跳过其间具有相同缩进级别的所有行。例子：

```
$ contextgrep rstrip pep8.py
class Checker(object):
    def check_logical(self):
        if self.verbose >= 2:
            print(self.logical_line[:80].rstrip()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T00:05:32.030

这是[一篇](http://limpet.net/mbrubeck/2010/01/12/outline-grep.html)关于“大纲 grep”的[字面 Haskell 实现的博客文章。](https://github.com/mbrubeck/outline-grep/blob/master/OutlineGrep.lhs)

# iphone - 从没有文件扩展名的服务器下载图像（NSData 到 UIImage）

> ID：11200154
> 
> 赞同：1
> 
> 时间：2012-06-26T02:49:11.917
> 
> 标签：iphone, ios, uiimage, nsdata, nsurl

从我的服务器上，我正在拉下一个应该只是个人资料图片的 url。从 url 中拉下图像的相关代码是这样的：

```
NSString *urlString = [NSString stringWithFormat:@"%@%@",kBaseURL,profile_image_url];
profilePic = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:urlString]]]; 
```

我的网址是格式（注意最后没有文件扩展名，因为它是动态呈现的）

```
localhost:8000/people/1/profile_image 
```

如果我在浏览器中加载 url，图像会显示；但是上面用于下拉 UIImage 的代码不起作用。我已经验证该代码确实从互联网上的随机站点中提取图像。

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T02:57:33.730

如果您提供 NSURL 是否有效

```
http://localhost:8000/people/1/profile_image 
```

我想 http:// 在这里很重要（以便 NSURL 知道它是指向文件还是远程 URL）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T02:57:21.077

您无法在 UIImageView 中显示它的原因是因为`UIImageView`不知道它的格式（jpeg、png 等）。
未来编码的好方法*总是*使用扩展。*不要*走捷径，它们总是会变得更糟，你必须一遍又一遍地修复它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T03:12:01.703

首先检查以下内容：

**权限：从只读更改为可读写。**

我在我的项目中尝试了很多方法来显示来自服务器的图片，我发现的最突出的问题是，默认情况下，您的 localhost 文件夹是只读的，您还需要更改权限......最初我认为只读 wudnt不管我是否只是加载图片，因为从技术上讲，我只是在阅读内容，对。但这确实很重要。

**白色空间**

您可以检查的另一件事是包含空格的图像名称，如果是，那么您需要在发出 URL 请求时从图像名称中删除空格。

**如果没有任何效果，请尝试添加扩展如果一切** 正常，请尝试使用显然可以使用的扩展加载图像。

**也为我们提供一些初始编码**

让我们知道您的**代码片段和控制台输出**，它们可以帮助社区以更突出的方式解决问题。

# ruby-on-rails - 在 Ruby on Rails 3 Web 应用程序中生成图表的首选方式是什么？

> ID：11200155
> 
> 赞同：3
> 
> 时间：2012-06-26T02:49:16.080
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我知道这个问题是 3 年前提出的，所以我想知道有什么新的和/或比 3 年前更好的东西。

目前，我正在使用 GoogleVisualr ( [http://googlevisualr.herokuapp.com/](http://googlevisualr.herokuapp.com/) )，我喜欢它……它简单易行，但缺少雷达图 :(

所以，我想知道还有其他免费且简单的图表解决方案吗？Javascript 或 flash 对我有好处，但我需要有雷达图。

谢谢多里扬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T02:54:24.613

我使用并推荐[Highcharts](http://www.highcharts.com/)。它不是免费的，但它运行良好并且有很多功能。此外，它有很好的文档记录，并且在网站上有大量的工作代码示例。

开发许可证（我相信）是免费的，因此您可以免费试用，然后仅在您决定使用它时付费。考虑到它节省的时间，价格也不算太高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:58:41.307

你看过[d3.js](http://d3js.org/)吗？

还发现有人 [shared] (https://groups.google.com/forum/m/#!msg/protovis/GsFB1l1Mo_g/geLerhwvbdQJ) 使用[protovis](http://mbostock.github.com/protovis/)创建雷达图的代码仍然可用。

最后，别人的[sample]（https://gist.github.com/1630683）使用d3的雷达图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T04:04:34.403

检查以下代码，

```
 <html>
      <head>
        <script type='text/javascript' src='https://www.google.com/jsapi'></script>
        <script type='text/javascript'>
        google.load("visualization", "1.0", {packages:["imagechart"]});
        </script>
        <script type='text/javascript'>
          google.setOnLoadCallback(drawChart);
          function drawChart() {
            var dataTable = new google.visualization.DataTable();
            dataTable.addColumn('number');
            dataTable.addColumn('number');
            dataTable.addRows([
              [100,10],
              [80,20],
              [60,30],
              [30,40],
              [25,50],
              [20,60],
              [10,70],
            ]);

            var chart = new google.visualization.ImageChart(document.getElementById('radar_div'));

            var options = {cht: 'rs', chco: '00FF00,FF00FF', chg: '25.0,25.0,4.0,4.0', chm: 'B,FF000080,0,1.0,5.0|B,FF990080,1,1.0,5.0',};
            chart.draw(dataTable, options);
          }
        </script>
      </head>
      <body>
        <div id='radar_div'></div>
      </body>
    </html> 
```

[参考](https://developers.google.com/chart/interactive/docs/gallery/genericimagechart)更多信息

# database-project - 在 Visual Studio 数据库项目中，在我向项目添加新的外键后，如何阻止它根据这些键检查数据？

> ID：11200159
> 
> 赞同：0
> 
> 时间：2012-06-26T02:50:05.733
> 
> 标签：database-project

以前没有外键时，我向数据库项目添加了一堆外键。在生成的 sql 文件（sql/debug/$projectname.sql）中，我看到一个以

```
PRINT N'Checking existing data against newly created constraints';
GO
USE [$(DatabaseName)];

GO
ALTER TABLE [dbo].[table1] WITH CHECK CHECK CONSTRAINT [FK_1];

ALTER TABLE [dbo].[table1] WITH CHECK CHECK CONSTRAINT [FK_2]; 
```

然后继续。

如何阻止数据库项目生成此部分以根据新约束检查数据？我尝试使用创建外键

```
ALTER TABLE dbo.table1 WITH NOCHECK
ADD CONSTRAINT [FK_1]
FOREIGN KEY (blah)
REFERENCES Table2 (blah2) 
```

但没有骰子。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T03:02:29.207

啊哈，在属性文件夹下的 Database.sqldeployment 属性页面中有一个名为 checkNewConstraints 的高级选项。这应该够了吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-28T07:34:27.767

在 VS 2019 中，您可以在下面的屏幕截图中找到它。取消选中“新约束的脚本验证”。

右键单击您的项目，您将在上下文菜单中找到发布。这将打开“发布数据库”对话框。按照 1、2、3（取消选中此选项），您将能够通过对表中现有数据的验证进行约束检查。

[![禁用 SQL 表中现有数据的检查约束](../Images/d4ea1f010f116ab1dda9a03889b3f2ba.png)](https://i.stack.imgur.com/922op.png)

# html - PhoneGap/Cordova：防止水平滚动

> ID：11200160
> 
> 赞同：8
> 
> 时间：2012-06-26T02:50:12.290
> 
> 标签：html, cordova, scroll

我有一个基于 Cordova 的应用程序，在我的一些页面上，我可以将内容水平滚动到空白区域。

这很奇怪，因为我那里没有任何东西超出我`#wrapper`的设置，它设置为`width: 100%`.

所以我想知道是否有一种方法可以完全禁用应用程序中的水平滚动？

更新：

页面上的代码按要求：

```
body {
    background-color: #fff;
    font-family:Arial, Helvetica, sans-serif;
    color: #b7b8b9;
    height: 100%;
    width: 100%;
}

iframe{
    border: none;
    width: 100%;
    /*margin-top: 50px;*/

   }

#header{
    height: 50px;
    width: 100%;
}

<body>
         <div id="wrapper">
        <div id="header">
            <div class="headerback"><a href="index.html">Home</a></div>
            <div class="headerrefresh"><script>var pathname = window.location.pathname;</script><script>document.write('<a href="'+pathname+'">Refresh</a>')</script></div>
            <div class="headertitle"><h2>Get the Look</h2></div>

        </div><!--HEADER-->
    <iframe src="http://www.mbff.com.au/getthelook"></iframe>
    </div>
    </body> 
```

![这是水平滚动时发生的情况](../Images/5b2a28599a4ff488182f3c10120d2d58.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T09:36:43.673

尝试使用您设备的确切尺寸在 Chrome (webkit) 中调试您的页面。这为我解决了大多数渲染问题。

我不知道这里的具体问题，但看起来您的元素之一正在包装器之外流动。例如，您可以在您的`css`:

```
div.wrapper { overflow: hidden; width: inherit; } 
```

尽管找出页面水平扩展的原因可能是一个更好的主意？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-07-09T14:19:17.297

我一直在寻找这个问题的解决方案。最后我通过以下方式解决了它。`body`我为和`html`标签设置样式：

```
position: fixed;
width: 100%;
height: 100%;
overflow: hidden; 
```

之后，我添加`div`并`body`设置了它的样式：

```
overflow-y: auto;
height: 100%; 
```

所以，我有固定的身体，其中包含带有垂直滚动条的 div。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-25T07:39:59.843

```
// Phone Gap disable only horizontal scrolling in Android.

// Add this code in your Phone Gap  Main Activity.Initially Declare the variable 

private float m_downX;

//Then add this code after loadUrl

this.appView.setOnTouchListener(new View.OnTouchListener() {
    public boolean onTouch(View v, MotionEvent event) {

        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN: {
                // save the x
                m_downX = event.getX();
            }
            break;

            case MotionEvent.ACTION_MOVE:
            case MotionEvent.ACTION_CANCEL:
            case MotionEvent.ACTION_UP: {
                // set x so that it doesn't move
                event.setLocation(m_downX, event.getY());
            }
            break;
        }
        return false;
    }
}); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-26T18:37:53.870

尝试将以下代码添加到您的 .html 文件中：

```
document.body.addEventListener('touchmove', function(event) {
    event.preventDefault();
}, false); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-07-13T13:35:32.000

为了完整起见，我认为`preference`应该添加使用官方方法通过标签执行此类操作的答案：

```
<preference name="DisallowOverscroll" value="true"/> 
```

根据[文档](https://cordova.apache.org/docs/en/latest/config_ref/)，由 Android 和 iOS 支持。

> 默认值：假
> 
> 如果您不希望界面在用户滚动超过内容的开头或结尾时显示任何反馈，请设置为 true。在 iOS 上，过度滚动手势会导致内容弹回其原始位置。在 Android 上，它们会在内容的顶部或底部边缘产生更微妙的发光效果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-16T18:35:36.713

就我而言，它的样式如下所示

```
<body>
  <div style="margin-left:5%; width:100%">Content</div>
</body> 
```

这导致 div 在水平方向上变得比 body 大。当应用程序在浏览器中运行时，我可以看到滚动。将宽度设置为 90%（如最初预期的那样）解决了这个问题。

[通常，正如这里](https://stackoverflow.com/a/11326379/2534191)已经指出的那样，足以找到样式错误的元素，从而使您的页面水平扩展并修复它。

BTW *DisallowOverscroll*在上述情况下没有帮助。

# jquery-ui-tabs - 如何让 Jquery UI 选项卡为空白

> ID：11200164
> 
> 赞同：0
> 
> 时间：2012-06-26T02:50:39.510
> 
> 标签：jquery-ui-tabs

我有一个 JQuery UI 选项卡对话框，它是 Master-Detail 界面的详细信息。当有人在主文件中选择一个元素时，所有选项卡都会在其 href 中填充 URL，提供该选定项目的详细信息。

例如，访问 [http://www.trirand.com/blog/jqgrid/jqgrid.html](http://www.trirand.com/blog/jqgrid/jqgrid.html)并浏览到 Advanced->Master Detail。

但是，我没有更新第二个网格，而是更新了 jquery-ui 选项卡元素的链接，如下所示：

```
var urls = {
        0 : "/url1",
        1 : "/url2",
};

jqgrid(....

onSelectRow: function(location_id) { 
    for (url in urls){
        $('#tabs').tabs('url', url , urls[url]+location_id );
    }
    var selectedTab = $('#tabs').tabs("option", "selected");
    $('#tabs').tabs('load', selectedTab);       
} 
);

$(#tabs.tabs({}); 
```

使用 html 如下：

```
<div id="tabs">
<ul>
    <li><a id="URL1" href="blank.html">Info</a></li>
    <li><a id="URL2" href="blank.html">History</a></li>
    </ul>
</div> 
```

我不应该使用 blank.html 虚拟链接。有什么我可以做的（当我没有在主控中选择任何东西时）不会导致我的选项卡导致提取而只是空的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T02:53:46.653

如果您在编码中将选项卡设置为空白，则不会出现任何内容（显然），但如果您需要在页面加载时将其清空，请使用以下命令：

```
$(document).ready(function() {
    $('#divID').empty();
}); 
```

# c# - 在运行时从 xsd 获取类型

> ID：11200165
> 
> 赞同：0
> 
> 时间：2012-06-26T02:50:46.373
> 
> 标签：c#, xml, xsd

我的问题是半相关的：[是否可以获得在 XSD 中定义的 XML 节点的类型？](https://stackoverflow.com/questions/4799838/is-it-possible-to-get-the-type-of-an-xml-node-as-it-was-defined-in-xsd)

...但是这个问题没有得到回答，它针对 python，而我对 C#.Net 解决方案感兴趣。我的问题是：**如何获得在 XSD 中定义的类型，在 .Net 中表示为类型？**

背景：如果有帮助，我的目标是使用 xpath 在 XML 文档中定位一个部分，在支持的 XSD 中找到该部分的相应类型，最后使用该类型将该部分反序列化为一个 .Net 对象。

一般来说，如果我在编译时知道类型，我可以反序列化 xml，但在运行时，必须使用 xpath 查询来推断类型。我认为这可以使用反射来实现，但我也想知道 .Net 框架中是否已经存在我可以利用的东西。

换句话说，我想做与此相反的事情：

```
private void ExtractXsdFromType(Type type, FileInfo xsd)
{
    XmlReflectionImporter importer = new XmlReflectionImporter();
    XmlTypeMapping mapping = importer.ImportTypeMapping(type);
} 
```

...与其传入一个类型来获取映射，我将传入一个字符串来获取类型。我希望这足够清楚，但如果没有，请要求澄清，我将提供更多细节。

感谢您的体验！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T21:06:07.790

> 我不是传入一个类型来获取映射，而是传入一个字符串来获取类型。

给定一个合格的程序集名称，您可以使用 检索相应的`Type`对象`Type.GetType()`。例如，返回命名空间中定义`Type.GetType("ReflectionTest.TestClass")`的类的类型。`TestClass``ReflectionTest`

# dependency-injection - Spring.net IoC - 按状态改变注入类

> ID：11200166
> 
> 赞同：1
> 
> 时间：2012-06-26T02:50:49.397
> 
> 标签：dependency-injection, spring.net

我正在尝试注入因传入的州而异的依赖项。例如，如果州是威斯康星州，我想注入一个类，但如果是伊利诺伊州，我想要另一个。这不是 1 对 1，而是 7 个状态为一个，3 个为另一个。

Spring.net 中有没有一种方法可以在配置 xml 中检查值列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T07:54:26.420

[这是.NET 中的依赖注入](http://manning.com/seemann/)一书的第 6.1 章“将运行时值映射到抽象”的主题。建议的解决方案是使用`Abstract Factory`. 您的抽象工厂可能如下所示：

```
public interface IStateAlgorithmFactory
{
    IStateAlgorithm Create(string state);
} 
```

并将这个工厂注入你的消费者，它知道要处理哪个状态。要获得`IStateAlgorithm`他的消费者，然后调用 y

```
alg = _factory.Create("Illnois"); 
```

或者，如果您想要完全配置控制，您可以创建一个简单的工厂，将状态名称映射到 Spring 容器管理的实例。

### 简单的例子

我想你有几个类实现了某个`IStateAlgorithm`：

```
public interface IStateAlgorithm
{
    string ProcessState(string stateName);
}

public class EchoingStateAlgorithm : IStateAlgorithm
{
    public string ProcessState(string stateName)
    {
        return stateName;
    }
}

public class ReverseEchoingStateAlgorithm : IStateAlgorithm
{
    public string ProcessState(string stateName)
    {
        return new string(stateName.Reverse().ToArray());
    }
} 
```

并且有一定`Consumer`的需要根据运行时值选择算法。消费者可以被注入一个工厂，它可以从中检索它需要的算法：

```
public class Consumer
{
    private readonly IStateAlgorithmFactory _factory;

    public Consumer(IStateAlgorithmFactory factory)
    {
        _factory = factory;
    }

    public string Process(string state)
    {
        var alg = _factory.Create(state);
        return alg.ProcessState(state);
    }
} 
```

一个简单的工厂实现将简单地打开状态值、使用 if 或查看内部列表：

```
public interface IStateAlgorithmFactory
{
    IStateAlgorithm Create(string state);
}

public class StateAlgorithmFactory : IStateAlgorithmFactory
{
    private string[] _reverseStates = new[] {"Wisconsin", "Alaska"};

    public IStateAlgorithm Create(string state)
    {
        if(_reverseStates.Contains(state))
            return new ReverseEchoingStateAlgorithm();

        return new EchoingStateAlgorithm();
    }
} 
```

### Spring.Net 可配置示例

如果你希望能够`IStateAlgorithm`在你的 spring 配置中配置你的，你可以引入一个`LookupStateAlgorithmFactory`. 此示例假设您`IStateAlgorithm`的 s 是无状态的，并且可以在消费者之间共享：

```
public class LookupStateAlgorithmFactory : IStateAlgorithmFactory
{
    private readonly IDictionary<string, IStateAlgorithm> _stateToAlgorithmMap;
    private readonly IStateAlgorithm _defaultAlgorithm;

    public LookupStateAlgorithmFactory(IDictionary<string, IStateAlgorithm> stateToAlgorithmMap, 
                                        IStateAlgorithm defaultAlgorithm)
    {
        _stateToAlgorithmMap = stateToAlgorithmMap;
        _defaultAlgorithm = defaultAlgorithm;
    }

    public IStateAlgorithm Create(string state)
    {
        IStateAlgorithm alg;
        if (!_stateToAlgorithmMap.TryGetValue(state, out alg))
            alg = _defaultAlgorithm;

        return alg;
    }
} 
```

xml 配置可以是：

```
<object id="lookupFactory"
        type="LookupStateAlgorithmFactory, MyAssembly">
  <constructor-arg ref="echo" />
  <constructor-arg>
    <dictionary key-type="string" value-type="IStateAlgorithm, MyAssembly">
      <entry key="Alaska" value-ref="reverseEcho"/>
      <entry key="Wisconsin" value-ref="reverseEcho"/>
    </dictionary>
  </constructor-arg>
</object>

<object id="echo" type="EchoingStateAlgorithm, MyAssembly" />
<object id="reverseEcho" type="ReverseEchoingStateAlgorithm, MyAssembly" /> 
```

# java - antlr：将生成的解析器集成到系统中的最佳实践

> ID：11200171
> 
> 赞同：1
> 
> 时间：2012-06-26T02:51:27.023
> 
> 标签：java, antlr

这是背景，我正在尝试创建一个 DSL 以允许客户编写简单的脚本来查询我们基于 mongodb 的数据库。我选择antlr来实现DSL。

根据我的理解（如果不正确，请告诉我）有两种方法可以将 antlr 生成的解析器集成到系统中：

1.  将代码嵌入到语法文件中，以便生成的解析器可以直接用于查询数据库并以某种格式（例如json编码）返回结果
2.  在将 DSL 文件提供给它之后，保持解析器纯粹是一个解析器，并通过从生成的解析器类中检索 AST 在另一个类中构造查询

所以antlrers，你认为我作为一个antlr新手应该走哪一条路？您能否列出每种方法的优缺点，或者您有其他方法可以推荐？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T03:11:55.267

您不应该将业务逻辑嵌入到您的解析器中，因为潜在的维护难题：您不想重新编译语法来修复业务逻辑中的错误，更不用说在生成的解析器中调试业务逻辑的噩梦前景了。因此，除了最小的玩具项目之外，选项一应该是不可能的。

选项 2 可以通过多种方式实现：您可以 (A) 让 ANTLR 为您生成 AST 节点，然后编写一个树解析器，或者 (B) 您可以跳过树解析器，并在解析器。我在生产项目中尝试了这两种方法，包括 Java 和 C#，这两种方法都非常有效。我认为 (A) 和 (B) 之间的选择很大程度上取决于您的个人喜好，只要业务逻辑不受解析器的影响。

# iphone - 应用程序图标在模拟器中显示正常，但在 iPhone 上运行时，启动图像显示为图标而不是所需的图标

> ID：11200172
> 
> 赞同：2
> 
> 时间：2012-06-26T02:51:31.273
> 
> 标签：iphone, ios, xcode

我的应用程序图标在 IOS 模拟器中显示良好，并且也显示了启动图像。但是，当我在 iPhone 4 上运行该应用程序时，它会将启动图像显示为应用程序图标。

如果我删除启动图像的 .plist 值，这似乎解决了在 iPhone 上运行的问题。但我应该这样做吗？

我需要在手机上更改一些设置吗？我尝试清理项目无济于事——仅删除 plist Default.png 值似乎可以解决问题，我不喜欢这样做，因为我认为 xcode 必须将它复制到那里是有原因的。

系统详情：

IOS 5.1 Xcode 4.3.3（虽然 4.3.2 也有问题） iPhone 4

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T02:56:36.303

您的图标是否命名为 Icon.png（及其关联的 Icon@2x.png 等）？根据[Apple 文档](http://developer.apple.com/library/ios/#qa/qa1686/_index.html)，这是 iPhone 应用程序所需的名称。

# javascript - jquery ajax 仅在 IE 中失败

> ID：11200174
> 
> 赞同：2
> 
> 时间：2012-06-26T02:51:41.863
> 
> 标签：javascript, jquery, ajax, internet-explorer

我最近重构了一些 ajax 代码以使其异步。它以前工作得很好，但我想使用 jQuery 承诺，所以我对它进行了 jQuerified。然而，现在，ajax 调用可以在除 IE 之外的所有浏览器中使用。

IE9 会在为 ajax 函数分配变量名的情况下引发错误。IE中的错误是：

“对象不支持第 99 行的此方法或属性。”

这是发生错误的块：

```
if (screen.width > 525 && svgSupported) {
    $loadingSvg = $.ajax({
        type: 'GET',
        url: 'images/mypicture.svg',
        dataType: 'xml',
        success: function(data){
            console.log("Ajax request successfully returned: " + data);
            console.log(data);
        },
    error: function(data){
        console.log("Ajax request failed: " + data);
        }
});
} 
```

我已经尝试了其他人在类似情况下建议的一些明显的事情，比如将所有内容包装在 jQ $(document).ready 中。那不能解决问题。该`$loadingSvg`变量是在脚本顶部全局声明的，不是吗。有什么想法吗，伙计们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T02:56:40.427

问题实际上是你的`console.log`线：

```
console.log("Ajax request successfully returned: " + data); 
```

更具体地说，IE 似乎无法将 XML 文档与字符串连接起来，或者实际上无法将 XML 文档与字符串连接起来。他们不支持`.toString()`。只需删除该部分并继续工作`:)`

# php - 完全在服务器端运行 PHP 脚本

> ID：11200178
> 
> 赞同：4
> 
> 时间：2012-06-26T02:53:06.027
> 
> 标签：php, linux, amazon-ec2, cron

我遇到了腻子经常断开连接的问题。因此，当我从终端运行 PHP 脚本时，它总是会被中断。该脚本应该运行几个小时，所以我没有任何运气。

我怎样才能从服务器端完全运行它？我正在阅读有关 cron 作业的信息，但此时我很难理解。有什么替代 cron 来满足我的需要吗？

我有几个脚本 PHP 文件需要一个一个运行，或者一次运行两个。有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T02:55:51.467

您不需要让它在 cron 作业中运行 - 您可以在屏幕内运行 php 脚本。

只需键入；

```
screen php /path/to/myphpscript.php 
```

即使您从 PuTTY 断开连接后，屏幕仍会继续运行。如果您需要检查它，您可以使用；

```
screen -r 
```

重新加入这个过程，并查看任何输出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T02:55:56.307

您需要防止进程在会话断开连接时终止。

像这样的东西会起作用：

`nohup php myscript.php`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T02:56:08.573

您可以创建一个 cron 作业以根据时间任务列表定期启动 php 脚本。[更多信息](http://en.wikipedia.org/wiki/Cron)。您还可以从控制台在后台启动任务。即`php-cgi script.php&`这将使脚本成为后台任务

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T02:56:17.793

看看[GNU 屏幕](http://www.gnu.org/software/screen/)；它允许您稍后分离和重新附加会话，这非常适合长时间运行的脚本。如果您希望它以重复的方式发生，Cron 是一个不错的选择；一次性批处理作业可以使用[at](http://en.wikipedia.org/wiki/At_%28Unix%29)之类的东西来安排。对于更密集的计算需求，您可能需要研究更成熟的作业调度系统，例如[TORQUE](http://en.wikipedia.org/wiki/TORQUE_Resource_Manager)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T02:57:51.923

你可以在后台运行你的程序

```
php ./yourscript.php & 
```

# python - 使用 Django 模型创建子类别

> ID：11200183
> 
> 赞同：3
> 
> 时间：2012-06-26T02:53:50.180
> 
> 标签：python, django, models, categories

我正在尝试扩展我的 Django 模型中的关系。我有一个系统，其中元素存储在类别中。我如何构建我的`models.py`，以便每个类别都与一个子类别相关？

这是我的类别模型的样子：

```
class Category(models.Model):
   site = models.ForeignKey(Site)
   template_prefix = models.CharField(max_length=200, blank=True)
   name = models.CharField(max_length=200)
   slug = models.SlugField() 
   description = models.TextField(default='')
   sortby_fields = models.CharField(max_length=200,
                                 help_text=_(u'A comma separated list of field names that should show up as sorting options.'),
                                 blank=True)
   sort_order = models.PositiveIntegerField(default=0)

   def __unicode__(self):
       return self.name + u' Category'

   class Meta:
       verbose_name_plural = u'categories' 
```

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-26T03:06:13.590

您可以为自己创建一个外键：

```
class Category(models.Model):
   ...
   parent_category = models.ForeignKey('self', null=True, blank=True) 
```

然后，您可以将任何现有`Category`实例分配`parent_category`为该实例的。然后，如果您想查找给定`Category`实例的所有子类别，您可以执行以下操作：

```
subcategories = Category.objects.filter(
    parent_category__id=target_category.id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T05:24:58.043

您也可以尝试[django-mptt](https://github.com/django-mptt/django-mptt/)。它有一些额外的功能。

# iphone - 在 UITextView 上单击并长按一个单词时没有调用 textViewDidChangeSelection？

> ID：11200190
> 
> 赞同：1
> 
> 时间：2012-06-26T02:54:18.880
> 
> 标签：iphone, ios, uitextview, uitextviewdelegate

如果我在 UITextView 上双击一个单词，就会调用 textViewDidChangeSelection。但是，短按然后长按一个单词会选择该单词，但不会调用 textViewDidChangeSelection。

当我短按并长按一个单词时，如何调用 textViewDidChangeSelection？

如果无法做到这一点，我想要一个短按并长按一个单词而不选择该单词。我怎样才能做到这一点？

谢谢。

# vim - Vim E488：函数中的尾随字符

> ID：11200195
> 
> 赞同：2
> 
> 时间：2012-06-26T02:54:39.947
> 
> 标签：vim

我在以下代码行中收到“for 循环”的尾随字符错误，我不知道为什么。

```
function! s:HashID(str)  "{{{
    let l:hash_id = 0
    for i in split(a:str, '\zs')
        l:hash_id += float2nr(pow(2, stridx('abcdefg', i)))
    endfor
    return l:hash_id
endfunction 
```

我在这里胡闹什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T03:47:55.520

您需要`let`命令来为变量赋值。

# blackberry - 黑莓手机 (RIM) 是否提供 API 来访问其 bbm (black berry messsnger) 功能？

> ID：11200201
> 
> 赞同：-1
> 
> 时间：2012-06-26T02:55:33.153
> 
> 标签：blackberry, bb-messenger

RIM 的黑莓手机是否提供了一个 API，可以让开发人员访问他们的 bbm 消息内容并通过它发送和接收消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:30:45.533

是的，他们这样做，在[单独的 BBM SDK中](http://us.blackberry.com/sites/developers/blackberry-messenger.html)

# eclipse - 如何在没有 Eclipse 的情况下运行 Eclipse 项目？

> ID：11200207
> 
> 赞同：0
> 
> 时间：2012-06-26T02:56:19.583
> 
> 标签：eclipse

我想将我在 Eclipse 中制作的项目发送给其他人，所以我尝试在我的工作区中运行该项目。但是我没有运行它的软件。（除了eclipse）我应该使用什么软件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T03:01:25.340

> 我没有运行它的软件。（除了eclipse）我应该使用什么软件？

你应该使用Java。Eclipse 只是一个 IDE，因此它不会运行您的 Java 程序。Java 可以。将您的程序导出为 JAR，如果您安装了 Java，您可以通过双击它来运行 JAR，或者从命令行运行它：

```
java -jar file.jar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-01T20:44:04.337

[第一步](https://i.stack.imgur.com/8sZMw.png)

[第二步](https://i.stack.imgur.com/kzAYK.png)

[第三步](https://i.stack.imgur.com/6Nklw.png)

瞧！

# html - 从一个 Wordpress 页面的标题中删除链接/从标题中删除小文本

> ID：11200213
> 
> 赞同：1
> 
> 时间：2012-06-26T02:57:19.823
> 
> 标签：html, css, wordpress

我想使用 CSS 从我的标题中删除链接，以便只显示文本“我的内在瑜伽”，但它不是超链接。我试着做

```
#post-28 .site-title.a {display:none;} 
```

但它没有用。我知道它与站点标题有关，因为我不知道如何在 CSS 中说我只想让“a”标签不起作用，而只是在站点标题 div 中。

另外，是否可以从我的标题右侧删除“了解更多”文本？我不了解 PHP，所以这部分让我感到困惑。我不知道它是否可能与css有关。

链接是： http: [//myinneryoga.com/strange-exotic-fruit-supplement/](http://myinneryoga.com/strange-exotic-fruit-supplement/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T03:09:09.063

无法使用 CSS 完成，但您可以使用显示网站标题本身

```
 <?php echo $bloginfo('name'); ?> 
```

如果您只想在一个页面上删除它，请使用条件 IF 语句查询页面 ID 或 slug 并设置不附加站点 URL 的版本，并使用 ELSE 设置带有 URL 的版本。

要删除了解更多文本，请将此代码添加到 functions.php 文件的末尾：

```
function improved_trim_excerpt($text) { // Fakes an excerpt if needed
global $post;
if ( '' == $text ) {
    $text = get_the_content('');
    $text = apply_filters('the_content', $text);
    $text = str_replace(']]>', ']]&gt;', $text);
    $text = strip_tags($text, '<p>');
    $excerpt_length = 100;
    $words = explode(' ', $text, $excerpt_length + 1);
    if (count($words)> $excerpt_length) {
        array_pop($words);
        array_push($words, '');
        $text = implode(' ', $words);
    }
}
return $text;
}
remove_filter('get_the_excerpt', 'wp_trim_excerpt');
add_filter('get_the_excerpt', 'improved_trim_excerpt'); 
```

如果我是正确的，主题开发人员添加了一个自定义摘录结尾。或者它只是一个硬编码链接，在这种情况下，进入头文件并使用您正在使用的任何编辑器的查找功能并搜索“了解更多”文本，然后删除它和它周围的标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T03:19:22.847

不确定您是如何生成“立即学习”的，但如果它只是一个链接，您应该能够执行以下操作（假设帖子 ID 为 17）。

```
<?php if (!is_single(17)) { ?>
    <a href="http://myinneryoga.com/about/">Learn More</a>
<?php } ?> 
```

就像Corey上面说的，`<?php echo $bloginfo('name'); ?>`用来显示名字。删除任何`<a>`可能围绕它的标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T16:53:54.863

试试这个..

修改style.css第482行

```
#site-title a {
    color: #FFFFFF;
    cursor: default;
    pointer-events: none;
} 
```

# javascript - Yii submitButton i18n

> ID：11200224
> 
> 赞同：2
> 
> 时间：2012-06-26T02:58:24.900
> 
> 标签：javascript, internationalization, yii

我找到了如何 i18n 提交按钮的消息，例如：

```
echo CHtml::submitButton(Yii::t('tr','Print'),array('confirm'=>Yii::t('tr','Please confirm printing'),)); 
```

那么设置语言也能很好的翻译系统消息但是如何翻译提交确认弹出消息框的CANCEL/OK按钮呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T05:09:45.130

使用[CJuiDialog](http://www.yiiframework.com/doc/api/1.1/CJuiDialog)的替代解决方案：

1.  [jqueryui对话框](http://jqueryui.com/demos/dialog/)的代码（CJuiDialog 是一个带有一些额外 yii 细节的包装器）：

    ```
    <?php
        $this->beginWidget('zii.widgets.jui.CJuiDialog', array(
            'id'=>'mydialog',
            // additional javascript options for the dialog plugin
            'options'=>array(
                'title'=>Yii::t('tr', 'Title'),
                'autoOpen'=>false,
                'modal'=>true,
                'closeOnEscape'=>true,
                'closeText'=>Yii::t('tr', 'Cancel'),
                'resizable'=>false,
                'buttons'=>array(
                    Yii::t('tr', 'Ok')=>'js:function(){$("#myform-id").submit();$(this).dialog("close");}',
                    Yii::t('tr', 'Cancel')=>'js:function(){$(this).dialog("close");}'
                )
            ),
        ));

        echo Yii::t('tr','Please confirm printing');

        $this->endWidget('zii.widgets.jui.CJuiDialog');
    ?> 
    ```

2.  `onclick`为提交按钮的事件显示此对话框：

    ```
    echo CHtml::submitButton(Yii::t('tr','Print'),array('onclick'=>'$("#mydialog").dialog("open"); return false;')); 
    ```

当然，这个对话框看起来不像默认的浏览器/js 确认对话框，但如果需要，可以使用它。正如 ors 在评论中已经提到的，**默认的确认对话框不能更改，本地化的浏览器应该有本地化的消息。**

在这个示例中，我刚刚提交了一个带有 id 的表单`myform-id`，但是任何事情都可以在 ok 按钮的功能中完成。

# python - web2py中的三字段复合键

> ID：11200225
> 
> 赞同：1
> 
> 时间：2012-06-26T02:58:45.070
> 
> 标签：python, web2py, composite-key

我有三个字段在表中必须是唯一的，并且根据对[这个问题的回答，](https://stackoverflow.com/q/11194331/1480618)我尝试了以下操作（我*想*我理解这一点，但显然不是......猴子看，猴子做）：

```
db.define_table('Person_certification',
                Field('Person', db.Person),
                Field('Certification', db.Certification),
                Field('Start_date', 'date',
                  requires=IS_NOT_IN_DB(db(db.Person_certification.Person==request.vars.Person
                                           & dp.Person_certification.Certification==request.vars.Certification),
                                        'Person_certification.Start_date')),
                Field('End_date', 'date'),
                format='%(Person)s %(Certification)s') 
```

这三个字段是 Person、Certification 和 Start_date。当我尝试使用它时，我得到：

`<type 'exceptions.KeyError'> 'Person_certification'`

回溯指的是“需要”行。（表中已经有数据（三个字段上没有重复数据）；代码是否试图在 SELECT 期间进行检查？）

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T03:37:57.137

抱歉，原始答案不正确（现已修复）。由于该表尚未定义，因此您无法在表定义本身中引用它。相反，在表定义之后设置验证器：

```
db.Person_certification.start_date.requires = IS_NOT_IN_DB(...) 
```

# ios - 并发请求的 AFNetworking + NSOperation 问题

> ID：11200229
> 
> 赞同：2
> 
> 时间：2012-06-26T02:59:24.673
> 
> 标签：ios, nsoperationqueue, afnetworking

在我的项目中使用 AFNetworking 时遇到了一些问题。让我们来看看：

```
NSOperationQueue* queue = [[NSOperationQueue alloc] init];

AFJSONRequestOperation* op1 = [self operationSyncLeagues]; //URL=http://pm[dot]mvdigital[dot]vn/sandbox/zozo/smartphone.php?lastsynced=1340362261&task=league.listall_syncable&session_id=1946a6504e90f80cb3bd21fb90b0be85

AFJSONRequestOperation* op2 =[self operationSyncMatches]; // URL = http://pm[dot]mvdigital[dot]vn/sandbox/zozo/smartphone.php?pagesize=10&session_id=1946a6504e90f80cb3bd21fb90b0be85&page=1&league_id=51&lastsynced=1340362314&task=match.schedule_syncable

[queue setMaxConcurrentOperationCount:4];
[queue addOperations:[NSArray arrayWithObjects: op1, op2, nil] waitUntilFinished:NO]; 
```

现在，让我们看看我的日志（我在 AFURLConnectionOperation.m 中放了一些 NSLog 用于调试）：

> 2个操作同时开始。美好的！

2012-06-26 00:28:21.688 zozo[11726:18d03] *** [开始] URL：http://pm[dot]mvdigital[dot]vn/sandbox/zozo/smartphone.php?lastsynced=1340362261&task=league。 listall_syncable&session_id=1946a6504e90f80cb3bd21fb90b0be85

2012-06-26 00:28:21.689 zozo[11726:18d03] *** [开始] URL: http://pm[dot]mvdigital[dot]vn/sandbox/zozo/smartphone.php?pagesize=10&session_id=1946a6504e90f80cb3bd21fb90b0be85&page= 1&league_id=51&lastsynced=1340362314&task=match.schedule_syncable

> 没有重定向，但为什么会触发 willSendRequest？可以检查我的 API 的 url 以了解详细信息

2012-06-26 00:28:21.689 zozo[11726:18d03] willSendRequest [redirectResponse 描述]:(null) 2012-06-26 00:28:21.690 zozo[11726:18d03] willSendRequest [redirectResponse 描述]:(null)

2012-06-26 00:28:21.913 zozo[11726:18d03] *** [90 bytes] URL: http://pm[dot]mvdigital[dot]vn/sandbox/zozo/smartphone.php?lastsynced=1340362261&task=league .listall_syncable&session_id=1946a6504e90f80cb3bd21fb90b0be85

2012-06-26 00:28:21.913 zozo[11726:18d03] *** [完成] URL：http://pm[dot]mvdigital[dot]vn/sandbox/zozo/smartphone.php?lastsynced=1340362261&task=league。 listall_syncable&session_id=1946a6504e90f80cb3bd21fb90b0be85

2012-06-26 **00:28:21** .914 zozo[11726:15203] 同步联赛成功

> 操作 1 完成但操作 2 在 5 秒后开始获取数据。为什么？

2012-06-26 **00:28:26** .421 zozo[11726:18d03] *** [92 bytes] URL: http://pm[dot]mvdigital[dot]vn/sandbox/zozo/smartphone.php?pagesize=10&session_id =1946a6504e90f80cb3bd21fb90b0be85&page=1&league_id=51&lastsynced=1340362314&task=match.schedule_syncable

2012-06-26 00:28:26.422 zozo[11726:18d03] *** [完成] URL: http://pm[dot]mvdigital[dot]vn/sandbox/zozo/smartphone.php?pagesize=10&session_id=1946a6504e90f80cb3bd21fb90b0be85&page= 1&league_id=51&lastsynced=1340362314&task=match.schedule_syncable

2012-06-26 00:28:26.423 zozo[11726:15203] 同步匹配成功

> 来自 AFNetworking 文档：“另一种选择是利用 AFJSONRequestOperation 与 AFNetworking 中的所有请求操作一样是 NSOperation 的子类这一事实。结合 NSOperationQueue，您可以轻松地同时运行多个请求（您有能够设置同时运行的最大操作数，以防止您的网络陷入困境）。”

<== 那么这里有什么问题呢？我刚收到 2 个请求（每个 92 个字节），我不能让它们像**同时**运行一样。这里有任何错误吗？

p/s：我已经尝试使用 sharedclient 使用 AFHTTPClient，但我没有运气。我的服务器很好，我的 Android 客户端没有任何问题有人遇到同样的问题吗？并发请求数是否有任何限制？

http://pm[dot]mvdigital[dot]vn/ <== [http://pm.mvdigital.vn/](http://pm.mvdigital.vn/)

谢谢。

编辑：

> 我自己找到了答案，点击这里：http: [//github.com/AFNetworking/AFNetworking/issues/387](http://github.com/AFNetworking/AFNetworking/issues/387)

# java - 3D 到 2D 投影

> ID：11200230
> 
> 赞同：3
> 
> 时间：2012-06-26T02:59:31.987
> 
> 标签：java, 3d

我正在尝试用 Java（实际上是[Processing ）编写一个带有一些很酷的 3D 效果的游戏。](http://processing.org)

我可以选择两个 3D 渲染器，但都没有默认渲染器的质量或灵活性。我在想，如果我能得到一个功能来进行项目

假设我有一组浮动在 3D 空间中的坐标 (x, y, z)。我将如何获得应该在 2D 屏幕上绘制该点的位置（透视）？

只是为了澄清，我只需要**最低限度**（不考虑相机的位置，我可以通过偏移点来获得这种效果） - 我不是重写 OpenGL。

是的，我看到这方面还有很多其他问题——但似乎没有一个问题真正有明确的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-24T05:33:55.840

这是你的最低限度。

```
column = X*focal/Z + width/2
row = -Y*focal/Z  + height/2 
```

符号是：

**X、Y、Z**是距离单位（如毫米或米）的 3D 坐标；

**焦距**是以像素为单位的相机焦距（对于 VGA 分辨率，焦距 = 500 是一个合理的选择，因为它会产生大约 60 度的视野；如果图像尺寸较大，则按比例缩放焦距）；请注意，物理焦点~1cm << Z，这简化了上一个答案中提出的公式。

**高度和宽度**是图像或传感器的尺寸（以像素为单位）；

**行、列**- 是图像像素坐标（注意：行从顶部开始向下，而 Y 向上）。这是一组以相机中心（X、Y、Z）和图像左上角（行、列，见绿线）为中心的标准坐标系。 ![坐标系](../Images/c0b2fada494598f1a3ac1caeb89816c1.png)

您确实不需要使用 OpenGL，因为这些公式很容易实现。但是会有一些副作用，例如当您的对象有多个表面时，它们将无法正确显示，因为您无法模拟遮挡。因此，您可以添加一个深度缓冲区，它是一个简单的二维数组，具有浮点 Z 值，可以跟踪哪些像素更近，哪些更远；如果尝试在同一投影位置多次写入，则总是越靠近的像素获胜。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T05:57:43.253

查看针孔相机型号

[http://en.wikipedia.org/wiki/Pinhole_camera_model](http://en.wikipedia.org/wiki/Pinhole_camera_model)

ProjectedX = WorldX * D / ( D + worldZ )

ProjectedY = WorldY * D / ( D + worldZ )

其中 D 是投影平面和眼睛之间的距离

# asp.net-mvc-3 - MVC 3 和抽象工厂模式

> ID：11200232
> 
> 赞同：1
> 
> 时间：2012-06-26T02:59:46.640
> 
> 标签：asp.net-mvc-3, abstract-factory

我想直接进入我的观点，那么是否可以使用 MVC3 和 Abstract Factory 一起开发一个网站？

请原谅我的提问，但 MVC3 对我来说是新的，我想学习它，所以我为我的新网站选择了它。但问题是我不知道它是否适用于抽象工厂模式。

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T03:03:35.133

是的......您可以指定与 IoC 容器混合的自定义控制器工厂来完成您想要的...... [http://codeblitz.wordpress.com/2012/03/19/asp-net-mvc-3-agnostic-控制反转/](http://codeblitz.wordpress.com/2012/03/19/asp-net-mvc-3-agnostic-inversion-of-control/)

[http://develoq.net/2010/custom-controller-factory-in-asp-net-mvc/](http://develoq.net/2010/custom-controller-factory-in-asp-net-mvc/)

# git - 如何让 git 默认为 ssh 而不是 https 对于新的存储库

> ID：11200237
> 
> 赞同：285
> 
> 时间：2012-06-26T03:00:18.053
> 
> 标签：git, github, ssh

这些天，当我在 GitHub 上的设置页面上创建一个新存储库时，我得到：

```
git remote add origin https://github.com/nikhilbhardwaj/abc.git
git push -u origin master 
```

每当我必须推送一个提交时，我都需要输入我的 GitHub 用户名和密码。

我可以手动将其更改为

```
git@github.com:nikhilbhardwaj/abc.git 
```

在`.git/config`. 我觉得这很烦人 -**有什么方法可以将 git 配置为默认使用 SSH？**

* * *

## 回答 #1

> 赞同：391
> 
> 时间：2012-06-26T05:19:52.527

### 将存储库的源分支设置为 SSH

GitHub 存储库设置页面只是一个建议的命令列表（GitHub 现在建议使用 HTTPS 协议）。除非您对 GitHub 的站点具有管理权限，否则我不知道有什么方法可以更改他们建议的命令。

如果您更愿意使用 SSH 协议，只需像这样添加一个远程分支（即使用此命令*代替*GitHub 建议的命令）。要修改现有分支，请参阅下一节。

```
$ git remote add origin git@github.com:nikhilbhardwaj/abc.git 
```

* * *

### 修改预先存在的存储库

如您所知，要将预先存在的存储库切换为使用 SSH 而不是 HTTPS，您可以更改`.git/config`文件中的远程 URL。

```
[remote "origin"]
    fetch = +refs/heads/*:refs/remotes/origin/*
    -url = https://github.com/nikhilbhardwaj/abc.git
    +url = git@github.com:nikhilbhardwaj/abc.git 
```

一个快捷方式是使用以下`set-url`命令：

```
$ git remote set-url origin git@github.com:nikhilbhardwaj/abc.git 
```

* * *

### 有关 SSH-HTTPS 开关的更多信息

*   [“为什么 Git 总是要求我输入密码？”](https://help.github.com/articles/why-is-git-always-asking-for-my-password) - GitHub 帮助页面。
*   [GitHub 切换到 Smart HTTP](https://stackoverflow.com/questions/11197576/github-uses-smart-http) - 相关 StackOverflow 问题
*   [Credential Caching for Wrist-Friendly Git Usage](https://github.com/blog/1104-credential-caching-for-wrist-friendly-git-usage) - 关于 HTTPS 以及如何避免重新输入密码的 GitHub 博客文章

* * *

## 回答 #2

> 赞同：269
> 
> 时间：2014-02-25T22:36:09.607

*   GitHub

    ```
    git config --global url.ssh://git@github.com/.insteadOf https://github.com/ 
    ```

*   比特桶

    ```
    git config --global url.ssh://git@bitbucket.org/.insteadOf https://bitbucket.org/ 
    ```

这告诉 git 在连接到 GitHub/BitBucket 时始终使用 SSH 而不是 HTTPS，因此默认情况下您将通过证书进行身份验证，而不是提示输入密码。

* * *

## 回答 #3

> 赞同：92
> 
> 时间：2016-04-08T13:27:40.793

Trevor 提供的[答复是正确的](https://stackoverflow.com/questions/11200237/how-do-i-get-git-to-default-to-ssh-and-not-https-for-new-repositories/22027731#22027731)。

但这是您可以直接添加的内容`.gitconfig`：

```
# Enforce SSH
[url "ssh://git@github.com/"]
  insteadOf = https://github.com/
[url "ssh://git@gitlab.com/"]
  insteadOf = https://gitlab.com/
[url "ssh://git@bitbucket.org/"]
  insteadOf = https://bitbucket.org/ 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-04-04T16:08:55.537

您需要在 ssh 中克隆，而不是在 https 中。

为此，您需要设置 ssh 密钥。我准备了这个自动化的小脚本：

```
#!/usr/bin/env bash
email="$1"
hostname="$2"
hostalias="$hostname"
keypath="$HOME/.ssh/${hostname}_rsa"
ssh-keygen -t rsa -C $email -f $keypath
if [ $? -eq 0 ]; then
cat >> ~/.ssh/config <<EOF
Host $hostalias
        Hostname $hostname *.$hostname
        User git
    IdentitiesOnly yes
        IdentityFile $keypath
EOF
fi 
```

像这样运行它

```
bash script.sh myemail@example.com github.com 
```

更改您的远程网址

```
git remote set-url origin git@github.com:user/foo.git 
```

将内容添加`~/.ssh/github.com_rsa.pub`到 github.com 上的 ssh 密钥

检查连接

```
ssh -T git@github.com 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-01-26T21:42:55.920

您可能不小心在 https 而不是 ssh 中克隆了存储库。我在github上多次犯过这个错误。确保在克隆时首先复制 ssh 链接，而不是 https 链接。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-10-15T15:10:54.423

SSH 文件

```
~/.ssh/config file
Host *
    StrictHostKeyChecking no
    UserKnownHostsFile=/dev/null
    LogLevel QUIET
    ConnectTimeout=10
Host github.com
        User git
        AddKeystoAgent yes
        UseKeychain yes
        Identityfile ~/github_rsa 
```

编辑 reponame/.git/config

```
[remote "origin"]
        url = git@github.com:username/repo.git 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-11-09T23:28:45.047

仅供参考 - 由于 github 不再允许 ssh，我正在使用它：

```
[url "git@github.com:"]
    insteadOf = https://github.com/
[url "git@gist.github.com:"]
    insteadOf = https://gist.github.com/ 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-24T19:44:18.947

虽然这里的其他答案直接回答了名义上的问题（以一种我不知道的方式是可能的！TIL 一些新的东西`git`！）关于自动将`https`基于遥控器`git+ssh`的遥控器变成一个，但从开始`git`是不给`https`网址。

GitHub（以及其他流行的 git 托管服务）总是有一个小按钮，可以让您获取`git`应该克隆的 URL。你只需要点击小的“SSH”按钮：

[![获取现有项目的 SSH url 的示例](../Images/a6f664df37869ca575c2fffc1c48f436.png)](https://i.stack.imgur.com/scVYE.png)

或者对于一个新项目

[![获取新项目的 SSH url 的示例](../Images/411049d314a62d5df0599e6de73fcef1.png)](https://i.stack.imgur.com/DIIeP.png)

一旦您选择“SSH”选项，GitHub（和其他人）将记住（只要您登录）并在未来将其设为默认值。

# silverlight - 在 Silverlight 中访问剪贴板

> ID：11200238
> 
> 赞同：0
> 
> 时间：2012-06-26T03:00:20.877
> 
> 标签：silverlight, image, clipboard

我可以从 Silverlight 中的剪贴板获取图像吗？我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T04:06:32.800

在 Silverlight 5 中，对剪贴板信息的访问是**`limited to Unicode text access`**. 这与剪贴板的 WPF 实现不同，后者允许访问其他特定类型（例如，流或图像）或数据对象。

详细信息：http: [//msdn.microsoft.com/en-us/library/system.windows.clipboard (v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.clipboard(v=vs.95).aspx)

这可能对您有所帮助：[如何将图表图像从 Silverlight 应用程序复制到剪贴板？](https://stackoverflow.com/questions/2801130/how-to-copy-image-of-a-chart-from-silverlight-application-to-clipboard)

# c# - 如何在 ASP.Net MVC 中创建自定义 HTML Helper 方法 DropDownFor

> ID：11200243
> 
> 赞同：1
> 
> 时间：2012-06-26T03:01:03.260
> 
> 标签：c#, asp.net-mvc, lambda, html-helper, expression-trees

我正在尝试创建一个下拉框，当用户无权访问它时，它将在某些条件下呈现标签。

到目前为止，我已经想出了这个

```
public static MvcHtmlString ReadOnlyCapableDropDownFor<TModel, TProperty>(
        this HtmlHelper<TModel> htmlHelper,
        Expression<Func<TModel, TProperty>> expression, 
        IEnumerable<SelectListItem> selectList, 
        bool enabled, 
        object htmlAttributes
)
{
     return !enabled ? htmlHelper.DisplayFor(expression)
          : htmlHelper.DropDownListFor(expression, selectList, htmlAttributes);
} 
```

这会在启用为 false 时正确呈现标签，而在为 true 时呈现下拉列表，问题是标签的文本是所选选择列表值的 id，而不是通常显示在下拉列表中的文本。

这是有道理的，因为我将表达式用于显示的值，如何使用此表达式来获取选择列表项文本值而不是数据值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T03:48:22.617

您可以编译表达式并从模型中检索值。然后，从*selectList*中选择正确的文本。

```
TProperty val = expression.Compile().Invoke(htmlHelper.ViewData.Model);
SelectListItem selectedItem = selectList.Where(item => item.Value == Convert.ToString(val)).FirstOrDefault();
string text = "";
if (selectedItem != null) text = selectedItem.Text;

return !enabled ? new MvcHtmlString("<span>" + text + "</span>")
      : htmlHelper.DropDownListFor(expression, selectList, htmlAttributes); 
```

我认为在这种情况下返回一个临时*MvcHtmlString*就足够了，因为无论如何你拥有的所有信息都包含在该*selectList*字符串中。（这不像您的辅助方法可以访问任何数据注释等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T03:22:59.573

您需要自己查找文本值。您应该能够在此例程中执行此操作，因为您有可用的选择列表：

```
? htmlHelper.DisplayFor(selectList.Single(x=>x.Value == expression).Text 
```

尽管您可能必须在上面的代码中使用它之前评估表达式。

# jvm - IBM J9 JVM 中是否默认启用环境变量 IBM_HEAPDUMP？

> ID：11200255
> 
> 赞同：0
> 
> 时间：2012-06-26T03:02:58.020
> 
> 标签：jvm, websphere, j9

我想知道`IBM_HEAPDUMP`IBM J9 中是否默认启用了环境变量？我在网上搜了一下，有人说是，有人说不是。让我假设它是否默认处于活动状态，这意味着基于信号的堆转储已启用。JVM 会捕获所有预定义的信号并相应地生成 heapdump。但是，如果像上面那样，为什么我们仍然需要配置 with `-Xdump:what`？就像链接描述的那样`http://www-304.ibm.com/support/docview.wss?uid=swg21246238`。另一个问题是这里的功能是否`IBM_HEAPDUMP`重叠`-Xdump:what`？或者我对这两个完全理解错误。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T14:19:01.427

你误会了:-)

-Xdump：什么不配置任何东西。它只是显示了在相关 JVM 上启用了哪些转储。因此，您可以查看 -Xdump:what 的输出以查看启用了什么。默认情况下，是的，启用了类似 IBM_HEAPDUMP 的转储，但您可能需要更多控制/详细信息。

# java - 运行 jar 时出现内存不足错误，但在 netbeans/apache poi 中运行时没有

> ID：11200256
> 
> 赞同：0
> 
> 时间：2012-06-26T03:03:06.493
> 
> 标签：java, apache, apache-poi, out-of-memory

我基本上有一个程序，它使用 apache poi 将记录从一个 excel 文件过滤到另一个 excel 文件。我的程序在使用 netbeans 运行时运行良好。但是，在进行清理和构建并双击 dist 文件夹中的 .jar 文件后，它运行了很长时间（太长了！）并给了我以下错误（我是通过从命令提示符运行程序得到的）。

有什么解决办法吗？在清理和构建之前，我已经在 netbeans 中将堆大小增加到 -Xms1500m。

```
Exception in thread "AWT-EventQueue-0" java.lang.OutOfMemoryError: Java heap space
    at org.apache.xmlbeans.impl.store.Saver$TextSaver.resize(Saver.java:1592)
    at org.apache.xmlbeans.impl.store.Saver$TextSaver.preEmit(Saver.java:1223)
    at org.apache.xmlbeans.impl.store.Saver$TextSaver.emit(Saver.java:1144)
    at org.apache.xmlbeans.impl.store.Saver$TextSaver.emitElement(Saver.java:926)
    at org.apache.xmlbeans.impl.store.Saver.processElement(Saver.java:456)
    at org.apache.xmlbeans.impl.store.Saver.process(Saver.java:307)
    at org.apache.xmlbeans.impl.store.Saver$TextSaver.saveToString(Saver.java:1727)
    at org.apache.xmlbeans.impl.store.Cursor._xmlText(Cursor.java:546)
    at org.apache.xmlbeans.impl.store.Cursor.xmlText(Cursor.java:2436)
    at org.apache.xmlbeans.impl.values.XmlObjectBase.xmlText(XmlObjectBase.java:1455)
    at org.apache.poi.xssf.model.SharedStringsTable.getKey(SharedStringsTable.java:130)
    at 

org.apache.poi.xssf.model.SharedStringsTable.addEntry(SharedStringsTable.java:176)
    at org.apache.poi.xssf.usermodel.XSSFCell.setCellType(XSSFCell.java:755)

    at equity.EquityFrame_Updated.copyRowsFromOldToNew(EquityFrame_Updated.java:646)
    at equity.EquityFrame_Updated.init(EquityFrame_Updated.java:133)
    at equity.EquityFrame_Updated.createAndShowGUI(EquityFrame_Updated.java:71)
    at equity.EquityFrame_Updated.<init>(EquityFrame_Updated.java:50)
    at equity.FileOpener.generateButtonPressed(FileOpener.java:160)
    at equity.FileOpener.access$100(FileOpener.java:17)
    at equity.FileOpener$2.actionPerformed(FileOpener.java:61)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T03:11:28.420

'-Xms1500m' 标志是运行时标志，而不是编译时标志。您已在 Netbeans 中设置它，因此只有在您通过 Netbeans 运行时它才会获得该标志。

当您在 Netbeans 之外运行程序时，您需要像这样运行它：

java -Xms1500m -jar [你的程序在这里]。

# sql-server-2008 - 查询编辑器窗口的 SSMS 更改连接

> ID：11200257
> 
> 赞同：18
> 
> 时间：2012-06-26T03:03:12.403
> 
> 标签：sql-server-2008, ssas, ssms

通常，当我想更改 SQL Server Management Studio 中查询编辑器窗口的连接时，我可以从顶部的菜单中选择一个新连接 - *Query > Connection > Change Connection*。

但是，当我使用分析服务连接处理多维数据集时 - 然后打开保存的 SQL 脚本（例如基础 SQL 视图），可用数据库组合框为空白，并且该菜单中的“更改连接”和其他 3 个选项（连接、断开连接、断开所有查询）都显示为灰色。

我发现能够运行保存的 SQL 脚本的唯一解决方法是从我要在对象资源管理器中访问的 SQL 数据库中打开一个“新查询”，然后将我的脚本复制到其中，或者重新打开脚本 -现在使用新查询的数据库正常打开。

似乎将最后一个查询编辑器窗口的数据库连接作为任何新查询的默认连接 - 当您的最后一个“查询”正在浏览多维数据集时，它会中断吗？有没有人可以正确地取消“更改连接”选项的灰色？

我正在使用 SQL Server 2008 R2，并通过*File > Open > File*菜单打开保存的 SQL 脚本

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-17T08:33:38.920

幸运的是，在 SSMS 2008-R2、2012 中有一个更改连接功能。放置在 DB 下拉列表之前。或通过菜单查询>连接>更改连接。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T09:06:29.350

好吧，SSMS 不允许轻松管理连接（特别是当您想要在服务器之间切换连接时）。我为 SSMS 开发了插件：SSMSBoost - 它使用您最喜欢的连接向工具栏添加了额外的组合框（您必须定义它们）。在您的情况下，打开脚本后，您必须从这个新的组合框中选择正确的连接，它将被建立。Addin 目前是免费的。

# database - 将所有 mysql 文本转换为 ascii 形式

> ID：11200258
> 
> 赞同：0
> 
> 时间：2012-06-26T03:03:20.900
> 
> 标签：database, ascii, data-conversion

我有一个 mysql 数据库，其中存储了带有非编码特殊字符的文本。例如，表格中的单元格包含如下文本`Texas A&M`

我希望数据库中的所有文本都具有适当的 ascii 格式。例如，`Texas A&M`应该是`Texas A&#38;M`。

这是一个大型数据库，我想确保[这个 ASCII 图表](http://www.ascii-code.com/)中的所有字符都被计算和转换。

有什么好方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T03:10:04.470

你说你想确保“这个 ASCII 图表”中的所有字符，但是那里的图表包括所有可打印的字符，所以我认为你实际上并不想按照你所说的去做。相反，您可能想要为 XML、URL 或 HTML 进行编码。

最简单的方法是将数据加载到您拥有的任何 XML 处理工具中，然后让它完成工作。也就是说，我发现 99% 的时间，当人们存储“预编码”数据时，他们实际上并不想要这样：他们想要对数据进行编码以获得某些输出。以本机形式存储数据然后在使用/输出时进行编码要好得多。

原因很简单：你见过窗口标题看起来像这样的应用程序`"Installing X&amp;Y Application"`吗？这是因为数据被认为“仅用于 Web 输出”并进行了预编码。但即便如此，Web 输出在 HTML、URL 和 XML 交换上下文中是不同的，因此预编码的数据确实将您限制在这些选择之一中，而不是在输出时进行正确的编码。

但是，如果您确实想这样做，则需要提供有关您正在使用的环境的更多详细信息（可用的实际数据库类型和编程语言）。

# iphone - Photomania-斯坦福保罗赫加蒂的班级

> ID：11200263
> 
> 赞同：1
> 
> 时间：2012-06-26T03:03:47.673
> 
> 标签：iphone, objective-c, xcode

核心数据有问题吗，因为`xcode 4.3.2` 我正在按照我在[此处](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/system/files/sample_code/Photomania_0.zip) 下载文件`Stanford Paul Hegarty class for ios 5.0` 的核心数据演练进行操作`(Video 14 Core data demo)`

我运行了它，`xcode 4.3.2`但核心数据似乎不起作用，因为`tableview`没有出现。我试图在另一台计算机上运行它，`xcode 4.2`并且`ios 5.0` 遇到相同问题的任何人都可以正常工作？我很确定这`xcode`是错的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T05:45:16.930

Paul Hegarty after his class, has published an update version of his code which have a call to SAVE the CoreData database! This may be the reason why your CoreData informations doesn't persist.

His update note was:

```
// should probably saveToURL:forSaveOperation:(UIDocumentSaveForOverwriting)completionHandler: here!
// we could decide to rely on UIManagedDocument's autosaving, but explicit saving would be better
// because if we quit the app before autosave happens, then it'll come up blank next time we run
// this is what it would look like (ADDED AFTER LECTURE) ...
[document saveToURL:document.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:NULL]; 
```

So, you have to Add the 'document saveToURL' line in the 'fetchFlickrDataInDocument' function like this:

```
- (void)fetchFlickrDataIntoDocument:(UIManagedDocument *)document
    {
        dispatch_queue_t fetchQ = dispatch_queue_create("Flickr fetcher", NULL);
        dispatch_async(fetchQ, ^{
            NSArray *photos = [FlickrFetcher recentGeoreferencedPhotos];
            [document.managedObjectContext performBlock:^{

// perform in the NSMOC's safe thread (main thread)
                for (NSDictionary *flickrInfo in photos) {
                    [Photo photoWithFlickrInfo:flickrInfo inManagedObjectContext:document.managedObjectContext];
                    // table will automatically update due to NSFetchedResultsController's observing of the NSMOC
                }

                // should probably saveToURL:forSaveOperation:(UIDocumentSaveForOverwriting)completionHandler: here!
                // we could decide to rely on UIManagedDocument's autosaving, but explicit saving would be better
                // because if we quit the app before autosave happens, then it'll come up blank next time we run
                // this is what it would look like (ADDED AFTER LECTURE) ...
                [document saveToURL:document.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:NULL];
                // note that we don't do anything in the completion handler this time

            }];
        });

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T06:59:23.240

有趣的。我遇到了同样的问题，我也在使用 XCode 4.3，但只是认为这是因为你需要的 Flickr 许可证，而我没有。（在`FlickAPIKey.h`中，有一个`#define FlickrAPIKey @""`，如果您没有该密钥，您将不会下载任何内容。）

***更新***：我给自己弄了一个 Flickr API 密钥（你可以从他们的网站上获得一个）并尝试了 XCode 4.3 上的 Photomania 应用程序：它就像一个魅力，所以看起来 XCode 不是你的问题。（尽管有时我发现我必须停止并重新启动 XCode 才能摆脱奇怪的错误或编译器错误。）无论如何，在重试之前先删除数据可能是一个想法：在运行之前删除应用程序它和数据库文件也将被删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-10T18:40:35.830

如果有人在使用 Objective-C 时仍然面临同样的问题，那么在获取 API 密钥后您还需要做一件事：将所有内容更改`http://`为`https://`FlickrFetcher 文件夹中的文件内。这对我有用。

# c++ - '&' 标记之前的 C++ 预期构造函数、析构函数或类型转换

> ID：11200269
> 
> 赞同：-1
> 
> 时间：2012-06-26T03:05:00.940
> 
> 标签：c++, compiler-errors

当我执行运算符重载时，我在'&'token 之前得到了这个错误，预期构造函数、析构函数或类型转换。错误发生在 fixed.cpp 的最后 8 行中，我不确定我错过了什么。任何帮助表示赞赏。

这是固定的.hpp

```
 #ifndef FIXED_HPP_
    #define FIXED_HPP_

    typedef float value_type ;  

    class fixed
    {
     public:
       fixed();
       fixed(value_type integer, value_type fraction); 
       fixed(double val);
       void as_string();
       value_type integer();
       value_type fraction();
       value_type value();
       //~fixed();
       fixed& operator+=(fixed other);

       static const int places=4;   
       static const int places10=10000;  

     private:
       value_type integer_;
       value_type fraction_;   
       value_type value_;
    };

    fixed operator+(fixed a, fixed b);

    #endif 
```

这是固定的.cpp：

```
 #include "fixed.hpp"

    #include <iostream>
    #include <ostream>
    #include <stdexcept>
    #include <string>
    #include <algorithm>

    using namespace std;

    fixed::fixed():integer_(0), fraction_(0), value_(0){}

    fixed::fixed(value_type integer,  value_type                 fraction):integer_(integer),         fraction_(fraction) 
           {try
       {
        if (fraction_ <0)                          
           throw invalid_argument("Invalid argument. Must be positive.");
       }
            catch (exception& e)
              {
                cout <<"\n"<< e.what() << std::endl;
      }
             while (fraction_>= places10)
                {
                 if(int(fraction_)%10 >=5 && fraction_< (places10*10) )
            fraction_=int(fraction_/10+1);               
         else
            fraction_ =int(fraction_/10);
        }

     value_ = integer_*places10 + fraction_;  
           } 

    fixed::fixed(double val):integer_(int (val)), fraction_( (val- int(val))*places10) 
           { if (val <0)
                {    val = val*(-1);
             if ( int(val*places10*10)%10>=5)
              fraction_ = (fraction_*(-1) +1)*(-1);
        }     
     else
         {
          if (int(val*places10*10)%10>=5)
              fraction_ = fraction_ +1;
         }

     value_ = integer_*places10 + fraction_;  
           }

    void fixed::as_string()
           {    string str;
                string str2;
        while( (int(integer_)/10) >=0 and int(integer_)>0 )
             {
             str.push_back(int(integer_)%10 + 48);
             integer_ = integer_/10;
             //cout<<str<<endl;
             }
        //cout<<"String format: "<<str<<endl;
        reverse(str.begin(), str.end());
        //cout<<"Reversed format: "<<str<<endl;
        str.push_back('.');
        //cout<<"New string: "<<str<<endl;
        while( (int(fraction_)/10 )>=0 and int(fraction_)>0)
             {
             str2.push_back(int(fraction_)%10 + 48);
             fraction_ = fraction_/10;
             //cout<<str<<endl;
             }
        //cout<<"String format: "<<str<<endl;
        reverse(str2.begin(), str2.end());
        str.append(str2);
        cout<<"String representation: "<<str<<endl;
           }   

    value_type fixed::value()
         {
          return   value_;     
         }
    value_type fixed::integer()
         {
          return integer_;
         }
    value_type fixed::fraction()
                {
          return fraction_;
         }
    fixed& fixed::operator+=(fixed other) // error
           { value_ += other.value();
             return *this;     
           }

    fixed operator+(fixed a, fixed b)  //error
          { a+=b;
          return a;} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T03:17:59.683

你的代码有很多问题。主要问题如下：

[`fixed`](http://www.cplusplus.com/reference/iostream/manipulators/fixed/)是`namespace`std 的成员；您正在声明相同的名称并在您的代码中`class`有一个邪恶。`using namespace std;`

其他几点：

1.  **始终，不要** `using namespace std`在全球范围内进行练习。如果需要，请放置`std::`前缀或放在`using`函数范围内。
2.  `fixed::operator+=(Fixed)`, 应该是`fixed::operator+=(const Fixed&)`; 否则会造成不必要的复制。
3.  上面的评论也是正确的`operator+(fixed a, fixed b)`，而且确实如此`a += b`，这是错误的。它应该是`a + b`等价的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T03:20:02.357

Clang 提供了以下错误，这应该使正在发生的事情更加明显：

```
fixed.cpp:90:1: error: reference to 'fixed' is ambiguous
fixed& fixed::operator+=(fixed other) // error
^
./fixed.hpp:6:11: note: candidate found by name lookup is 'fixed'
    class fixed
          ^
/usr/include/c++/4.2.1/bits/ios_base.h:950:3: note: candidate found by name lookup is 'std::fixed'
  fixed(ios_base& __base)
  ^ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T03:32:33.263

这是为什么不应该使用的经典示例，因为`using namespace std;`在同一个命名空间中具有相同的标识符（因为从 std 中提取了所有内容），您会导致称为命名空间污染的事情。

首先，`std`仅在需要时才拉入部分命名空间`using std::something;`。或者更好的是，学会欣赏 . `std::`，当您在 C++ 生活和呼吸其标准库的情况下变得更好时，它将使您的生活变得更加轻松。

其次，当考虑到风格时，你的很多代码都是灾难性的，更不用说糟糕的做法了。您正在介绍以下内容：

```
fixed& operator+=(fixed other); 
```

这样做有很多问题，但最突出的问题是缺乏 const 性，事实上您实际上是按值传递类的实例，调用复制构造函数并进行不必要的重复。您需要使用的原因`const`更多是程序员的安全问题和良好实践。你看，你只需要读取传入的值来制定一个答案，一个运算符的返回。因此，使其不可变使您能够安全地计算结果并返回它。

```
fixed& operator+=(const fixed& other); // preferably call *other* rhs (righthandside) 
```

当您`using namespace std;`完全删除或更改班级名称时，您最初的问题就会消失。但是您的运算符重载有很多问题。具体来说，你如何接受参数，如何返回它们以及管理情况以只做实际需要做的事情（避免不必要的副本和临时性）。

# jquery - 通过jquery添加冗余

> ID：11200274
> 
> 赞同：0
> 
> 时间：2012-06-26T03:06:05.533
> 
> 标签：jquery

我使用 jquery 创建了一个表：

```
 <div class="productlist" style="float:left;" id="productlist">
 <script type="text/javascript" language="javascript">
    function loadMore() {
       var $parent = $("#productlist").empty();
       $parent.append('<table id="myTable" cellpadding="0" cellspacing="0" width="100%" class="productlist" style="margin-left:4px; padding-top:2px;"><tbody>');
       var $table = $parent.find("#myTable > tbody");
       var htmlRow = [
                     '<tr align="center">',
                     '<td align="center" id="colunm-product">',
                     '<br />',
                     '<div id="brand-item"><a href="#" class="brand_id"><img src="' + value.BrandImage + '" width = "85px"/></a></div>',
                     '<div id="product_image"><a href="'+'<%: Url.Content("~/") %>' +'Products/ProductSpec/' + value.ID +'?dep='+ value.DepartmentID +'&cat='+value.CategoryID+'&tab=2" style="text-decoration:none"><img src="' + value.PictureName + '" alt="Product" width="135px"/></a></div>',
                     '</td>',
                     '</tr>'
                      ];
      $table.append(htmlRow.join(''));
      $("#myTable > tbody").append('</tbody></table>');
   }
  </script> 
```

我在 document.ready 中调用该函数。但结果在我看来是出乎意料的：

```
 <table id="myTable" cellpadding="0" cellspacing="0" width="100%" class="productlist" style="margin-left:4px; padding-top:2px;">
    <tbody>
      <br/><br/>
      <tr> my data </tr>
    </tbody></table> 
```

我不知道为什么`<br><br>`桌子上有。如何避免这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T03:30:31.263

您试图插入 DOM，就好像您在文本编辑器中编写 html 一样，这是错误的方法。您插入的任何元素都是完整的元素，并且已经“关闭”。您不能插入表格的开始 html，添加一些行，然后添加结束标签……就像您编写它一样。

当您使用 jQuery 插入一个空表作为示例时，有几种编写标签的方法：

```
 $('<table>') 
 $('<table/>')
 $('<table></table>') // skipping over tbody issues for now 
```

所有 3 产生相同的东西......一个完整的表 DOM 节点。这个表已经被关闭了，因为我们认为它带有 html 标签，并且在 IE 的情况下，可能还有其他浏览器，它也有一个 tbody。将其视为 html 的顶部和底部都已到位。

现在当我们追加内部元素时，它们也需要是完整的。

表格示例是单个标签，一次插入多个标签需要有效的封闭 html，因为我们在编辑器中知道它。

$('') 不起作用，在这种情况下，两个标签都需要按正确的顺序关闭。类似地，我们不会像您尝试的那样附加许多行，然后尝试为 tbody 和 table 添加结束标签。

我相信这应该让您更好地了解如何调整代码，使其不至于支离破碎。

尝试插入碎片代码会产生不必要的行为，甚至可能会被拒绝

# php - if isset 函数如何设置

> ID：11200275
> 
> 赞同：0
> 
> 时间：2012-06-26T03:06:06.523
> 
> 标签：php, html

如果用户已上传到数据库，我有以下代码设置背景。如果用户尚未上传图片，则结果为空白 img src=''

我需要将此设置为 if isset 函数，以便在用户未上传任何内容时插入备用图像。

这是当前代码：

```
<div id="background"><?php echo isset($background_image) && file_exists(ROOT.$background_image)?"<img src='$background_image' alt='' />":'';?></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T03:15:28.010

您的代码有点脏，打开 php 并关闭它的 mid-html 标记只会让您在未来感到困惑。

您正在回显一个 isset，它只是回显一个布尔值。

尝试这个;

```
$background_image = ""; // Not sure what you're using here - their username? Dump it in here anyway.
if (file_exists($background_image))
{
    echo "  <div id=\"background\">
            <img src=\"{$background_image}\" alt=\"\" title=\"\" />
        </div>";
} 
```

希望这可以帮助。

*   伊根

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T03:14:11.930

我不确定您的意思，但是您尝试做的另一种方法是：

```
<div id="background">
<?php 
$optionalImage = 'background.png';
$userImage = getUserImage();
if(empty($userImage)) {
    $userImage = $optionalImage;
}
?>
<img src="<?php echo $userImage; ?>" />
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T03:18:14.493

设置图片的空白源真的有必要吗？

但是你正在尝试的一个可以理解和更正的代码是这个

```
<div id="background">

    <?php
    echo "<img src='"; 
        echo isset($background_image) && file_exists(ROOT.$background_image) ? $background_image : '';
    echo "' alt='' />";
    ?>

</div> 
```

问题是，要么你是`echo`整个`<img>`标签，要么只是显示`' '`（空白）带有附加的结尾。

简短的形式：

```
 echo "<img src='".(isset($background_image) && file_exists(ROOT.$background_image) ? $background_image : '')."' alt='' />"; 
```

# iphone - 是否可以返回不同类型的对象

> ID：11200276
> 
> 赞同：0
> 
> 时间：2012-06-26T03:06:11.007
> 
> 标签：iphone

我有一个希望返回不同类型的函数

```
-(UIButton *)returnObject1 ;
{

    //dosomething

    return aUIButton;

}

-(UIView *)returnObject2 ;
{

    //dosomething

    return aUIView;
} 
```

我希望将这两个函数合并为一个并返回不同的 NSObject(UIButton,UIView) 可以吗？

欢迎任何评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T03:11:44.977

您可以简单地创建自己的包含两者的自定义对象并返回该对象

编辑：我知道 OP 想要返回 2 个对象。这个答案只适用于这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T03:12:05.943

这是您想要的示例：

```
-(id)returnObject:(int)type
{
    if (type == 1)
        return aUIButton;
    else if (type == 2)
        return aUIView;
    return nil;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T03:13:26.880

只是不要声明返回类型。改为：

```
- (id)returnObject
{
  if (something) {
    return aUIButton;
  }

  return aUIView;
} 
```

但是...`UIButton`是 的子类`UIView`，这意味着您可以这样做：

```
- (UIView *)returnObject
{
  if (something) {
    return aUIButton;
  }

  return aUIView;
} 
```

请注意，在 Objective-c 中，方法的返回类型在代码执行时完全不相关。整个目的是告诉编译器你的代码期望什么，这样它就可以避免崩溃。因此，在可能的情况下指定返回类型是一个好主意，但不是必需的。

# ruby-on-rails - 如何使用 Rspec/Capybara 检查跨度标记中是否有特定的文本？

> ID：11200278
> 
> 赞同：2
> 
> 时间：2012-06-26T03:06:16.353
> 
> 标签：ruby-on-rails, rspec, capybara

我目前正在使用以下代码来检查我的页面是否有特定的文本：

```
it { should have_selector('test_container', text: 'hiya') } 
```

我正在检查的只是我页面上的一个跨度：

```
<span id="test_container">hiya</span> 
```

我该如何测试这样的特定跨度标签的内容？我不想检查整个页面是否有文本“hiya”，而是像上面这样的特定跨度标签。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T05:24:57.870

Capybara 在这里为您提供了两种可能性，您可以使用 find 方法：

```
find('#text_container').should have_content('hiya') 
```

或者您可以将块限制为 html 容器：

```
within '#text_container' do
  page.should have_content 'hiya'
end 
```

请注意，尽管您`page.should`在块中说，但它仅限于作用域元素。

# javascript - 从匿名包装器返回一个函数？

> ID：11200279
> 
> 赞同：4
> 
> 时间：2012-06-26T03:06:25.057
> 
> 标签：javascript, jquery

我正在尝试理解代码

```
for(var i = 0; i < 10; i++) {
    setTimeout((function(e) {
        return function() {
            console.log(e);
        }
    })(i), 1000)
} 
```

从这里[http://bonsaiden.github.com/JavaScript-Garden/#function.closures](http://bonsaiden.github.com/JavaScript-Garden/#function.closures)

我理解这种方法：

```
for(var i = 0; i < 10; i++) {
    (function(e) {
        setTimeout(function() {
            console.log(e);  
        }, 1000);
    })(i);
} 
```

谁能帮我解释一下第一个？

我将尝试解释我如何理解第一个，

```
first i is 0,
setTimeout is called,
self calling function "function(e)" is called with i=0,
Im stuck!! what happens when this function returns a function? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T03:09:07.070

第一个所做的只是返回一个将在超时发生后调用的函数。

它的目的是为 for 循环的每次迭代创建一个子范围，以便每次迭代`i`都不会覆盖增量。

更多解释：

让我们把它分成两个不同的部分：

```
for(var i = 0; i < 10; i++) {
    setTimeout((function(e) {
        return function() {
            console.log(e);
        }
    })(i), 1000)
} 
```

这是第一部分：

```
for(var i = 0; i < 10; i++) {
    setTimeout(function(){
        console.log(i); //9-9
    },1000);
} 
```

现在，当您运行此循环时，您将始终得到包含 9 而不是 0 到 9 的 console.log()。这是因为每个 setTimeout 都使用相同的对`i`.

如果将其中的 setTimeout 部分包装在匿名函数中，它会为每次迭代创建一个范围，允许每个 setTimeout 都有自己的`i`值。

```
for(var i = 0; i < 10; i++) {
    setTimeout((function(i) {
        return function() {
            console.log(i); // 0-9
        }
    })(i), 1000)
} 
```

setTimeout 内部的外部函数立即执行，第一次迭代的 i 为 0，第二次迭代为 1，依此类推。然后该函数又返回一个函数，该函数是 setTimeout 使用的函数。正在为循环的每次迭代使用不同的值生成并返回一个函数 for `i`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T03:10:12.460

两者最终得到相同的结果：使用要调用的函数调用 setTimeout，该函数会在控制台上写入一个从 0 到 9 的数字。两者都使用嵌套函数将 i 的当前值放入闭包中，因此您最终不会记录 10 个 9。

第一个代码选择有一个函数返回 setTimeout 将调用的函数。第二个更改嵌套顺序，以便封闭函数调用 setTimeout 本身。净效果是一样的。

除了风格原因和个人选择之外，我认为没有理由选择其中一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T04:19:11.983

> **“您能否检查更新的问题，说明我在哪里感到困惑”**

好的，这里是*长*解释。请记住，第一个参数`setTimeout()`必须是对要在指定延迟后执行的函数的引用。最简单的情况是只命名在别处定义的函数：

```
function someFunc() {
   console.log("In someFunc");
}

setTimeout(someFunc, 100); 
```

`someFunc`请注意，将其作为参数传递给时没有括号，`setTimeout`因为需要对函数本身的引用。对比：

```
setTimeout(someFunc(), 100);   // won't work for someFunc() as defined above 
```

*它用*括号*调用* `someFunc()`并将其返回值传递给`setTimeout`. 但是我`someFunc()`上面的定义并没有显式返回一个值，所以它隐式返回`undefined`- 这就像说`setTimeout(undefined, 100)`.

`someFunc()`但是，如果更改为返回函数而不是返回，它将起作用`undefined`：

```
function someFunc() {
   return function() {
      console.log("In the function returned from someFunc");
   };
} 
```

所以现在（最后）我们从你的问题中得到代码：

```
setTimeout((function(e) {
    return function() {
        console.log(e);
    }
})(i), 1000) 
```

而不是按名称引用函数并调用它，因为`someFunc(i)`它定义了一个匿名函数并立即将其调用为`(function(e) {})(i)`. 该匿名函数返回另一个函数，并且返回的函数成为`setTimeout()`. 当时间到时，将执行返回的函数。因为被返回的（内部）函数是在（外部）匿名函数的范围内定义的，所以它可以访问`e`参数。

# cocoa - 通过系统偏好设置日历更改时是否有通知？

> ID：11200281
> 
> 赞同：2
> 
> 时间：2012-06-26T03:06:41.653
> 
> 标签：cocoa, nscalendar

我的应用程序绘制了一个日历。我有一个 ivar，_cal，设置为，`-[NSCalendar autoupdatingCurrentCalendar]`因为如果用户在系统偏好设置中进行更改，我想重绘日历。例如，他们可以将一周的第一天从星期日更改为其他日期。

目前，我正在使用每秒触发一次的 NSTimer。我根据缓存副本检查 [_cal firstWeekday] 以查看它是否已更改。如果是这样，我重画。

我想知道如果影响日历的系统偏好设置已更改，是否有办法通知我。然后，我可以摆脱我的 NSTimer。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T04:42:04.583

看起来您可以观察 NSCurrentLocaleDidChangeNotification。

请参阅[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSLocale_Class/Reference/Reference.html#//apple_ref/doc/uid/TP30001224-DontLinkElementID_1](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSLocale_Class/Reference/Reference.html#//apple_ref/doc/uid/TP30001224-DontLinkElementID_1)

# php - php：mysql查询解析错误

> ID：11200282
> 
> 赞同：-1
> 
> 时间：2012-06-26T03:07:14.883
> 
> 标签：php

我收到以下错误：

> 解析错误：语法错误，第 48 行 /home/a4999406/public_html/willingLog.html 中的意外 T_VARIABLE

在以下代码上（第 48 行是此代码的第一行）：

```
$rows = mysql_num_rows($result);
for ($j=0; $j<$rows: ++$j)
{
    echo 'ID: '     . mysql_result($result, $j, 'id') . '<br />';
    echo 'First: '  . mysql_result($result, $j, 'first') . '<br />';
    echo 'Last: '   . mysql_result($result, $j, 'last') . '<br />';
    echo 'Email: '  . mysql_result($result, $j, 'email') . '<br />';
} 
```

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T03:08:31.407

您可能在上面的一行或多行中缺少分号、右大括号或右括号。对该错误的唯一合乎逻辑的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T03:11:51.653

问题是：`for ($j=0; $j<$rows: ++$j)`将冒号更改为分号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T03:20:28.730

有两个错误：1）在第 48 行使用冒号而不是分号，以及 2）我在上面缺少分号。

完全的业余机动。很抱歉浪费了大家的时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T03:22:57.773

你的代码有点奇怪 - 在那个循环中有这么多单独的 mysql 查询，你可以只使用 fetch_assoc 代替。看起来你会从那个 for 循环中过早地停止一排。改用这个；

```
$sql = "SELECT id, first, last, email FROM table";
while ($mysql_array = mysql_fetch_assoc($sql))
{
    echo "  ID: {$mysql_array['id']} <br />
            First: {$mysql_array['first']} <br />
            Last: {$mysql_array['last']} <br />
            Email: {$mysql_array['email']} <br />";
} 
```

另外，考虑切换到 Mysqli_ - Mysql_ 已弃用。

# c# - 你如何制作一个与它相关的数据的“枚举”？

> ID：11200286
> 
> 赞同：2
> 
> 时间：2012-06-26T03:08:17.147
> 
> 标签：c#, .net, asp.net-mvc, enums

我有一个投票类，它可以拥有的属性之一是投票类型。例如一致、3/4 投票、简单多数等。每种类型都需要有一个与之关联的字符串来描述投票类型（例如“简单多数需要 51% 才能通过”等）。我需要将这些投票类型/描述与我的视图模型一起传递给我的视图，然后我可以用它制作我的下拉列表。

然后，当提交创建投票的表单时，我只需要将投票类型（没有描述）绑定到 Vote 模型（它是视图模型的一部分）。

我只使用 C# 很短的时间，我不太了解枚举是如何在其中工作的。也许 enum 不是解决这个问题的方法。

```
public class VoteViewModel
{
    public VoteViewModel()
    {
        Vote = new Vote();
    }

    public Vote Vote { get; set; }
    public int EligibleVoters { get; set; }
} 
```

这就是我将下拉的地方。

```
<section class="vote-type">
    <select name="">
        <option value="">Select Vote Type</option>
    </select>
    <section class="vote-type-info">
        <p class="vote-rules">To pass this vote, at least 51% of Eligible Voters must vote to approve it.</p>
    </section>
</section> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T03:26:59.930

您可以在枚举周围创建一个“常量”字典（或者更确切地说是只读静态的，因为您无法创建常量字典）。

```
public enum VoteType { Unanimous = 1, SimpleMajority = 2, ... }

public static readonly Dictionary<VoteType, string> VoteDescriptions = new Dictionary<VoteType, string>
{
    { VoteType.Unanimous, "Unanimous description" },
    { VoteType.SimpleMajority, "Simple majority" },
    ...
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T03:43:37.390

请注意，我只显示字符串，因为它可以是任何类型。在每种情况下，如果可能，我都会提到如何将其扩展为更多值。

* * *

## 使用枚举作为键

您可以将枚举类型用作字典的键（您希望是唯一的，因此在某些帮助程序类中将其设为静态和只读）：

```
private static readonly Dictionary<MyEnum, string> _dict =
{
    //Using dictionary initialization
    {MyEnum.MyValue, "The text for MyValue"},
    {MyEnum.MyOtherValue, "Some other text"},
    {MyEnum.YetAnotherValue, "Something else"}
}

public static readonly Dictionary<MyEnum, string> Dict
{
    get
    {
        return _dict;
    }
} 
```

并访问关联的值：

```
string text = Dict[MyEnumEmu.MyValue]; 
```

或与：

```
string text;
if (Dict.TryGetValue(MyEnumEmu.MyValue, out text))
{
    //It has the value
}
else
{
    //It doesn't have the value
} 
```

通过这种方式，您可以访问与枚举值关联的字符串。然后您可以公开您的字典，以便您可以读取相应的值。

您将需要一种复杂类型来存储多个值。只需使用您的自定义类型而不是字符串。或者，如果可用，您可以使用`Tuples`.

访问`Dictionary`可能意味着额外的烦恼，希望它也不会意味着线程问题。

* * *

## 枚举.GetName

您可以使用[Enum.GetName](http://msdn.microsoft.com/en-us/library/system.enum.getname.aspx)读取枚举值的名称：

```
string text = Enum.GetName(MyEnum.MyValue);
//text will have the text "MyValue"

//or
var some = MyEnum.MyValue;
string text = Enum.GetName(some); 
```

注意：`ToString()`应该也可以。

可悲的是，这不适用于字符串以外的其他东西。

它还有一个缺点，就是您不能在其中放置任何文本（它必须是有效的标识符）。

* * *

## 自定义属性

您必须声明一个属性类型：

```
[AttributeUsage(AttributeTargets.Field)]
public class EnumValueAttribute : System.Attribute 
{
    public readonly string _value;

    public string Value
    {
        get
        {
            return _value;
        }
    }

    public HelpAttribute(string value)  // value is a positional parameter
    {
        //beware: value can be null...
        // ...but we don't want to throw exceptions here
        _value = value;
    }
} 
```

现在您将属性应用于您的枚举：

```
public enum MyEnum
{
    [EnumValue("The text for MyValue")]
    MyValue = 1,
    [EnumValue("Some other text")]
    MyOtherValue = 2,
    [EnumValue("Something else")]
    YetAnotherValue = 3
} 
```

最后，您需要回读属性：

```
public static string GetValue(MyEnumenumValue)
{
    FieldInfo fiendInfo = typeof(MyEnum).GetField(enumValue.ToString());
    if (!ReferenceEquals(fiendInfo, null))
    {
        object[] attributes = fieldInfo.GetCustomAttributes(typeof(EnumValueAttribute), true);
        if (!ReferenceEquals(attributes, null) && attributes.Length > 0)
        {
            return ((EnumValueAttribute)attributes[0]).Value;
        }
    }
    //Not valid value or it didn't have the attribute
    return null;
} 
```

现在你可以调用它：

```
string text = GetValue(MyEnum.MyValue);
//text will have the text "MyValue"
//or
var some = MyEnum.MyValue;
string text = GetValue(some); 
```

您可以向属性类添加更多字段，并使用它们传递您可能需要的任何其他值。

但这需要反思，如果你在沙箱中运行，它可能不可用。此外，它每次都会检索属性，在过程中创建一些短暂的对象。

* * *

## 模拟枚举

您可以使用没有公共构造函数并公开其自身的静态只读实例的密封类来模拟枚举：

```
public sealed class MyEnumEmu
{
    private static readonly string myValue = new MyEnumEmu("The text for MyValue");
    private static readonly string myOtherValue = new MyEnumEmu("Some other text");
    private static readonly string yetAnotherValue = new MyEnumEmu("Something else");

    public static MyEnumEmu MyValue
    {
        get
        {
            return myValue;
        }
    }

    public static MyEnumEmu MyOtherValue 
    {
        get
        {
            return myOtherValue;
        }
    }

    public static MyEnumEmu YetAnotherValue
    {
        get
        {
            return yetAnotherValue;
        }
    }

    private string _value;

    private MyEnumEmu(string value)
    {
        //Really, we are in control of the callers of this constructor...
        //... but, just for good measure:
        if (value == null)
        {
            throw new ArgumentNullException("value");
        }
        else
        {
            _value = value;
        }
    }

    public string Value
    {
        get
        {
            return _value;
        }
    }
} 
```

一如既往地使用它：

```
var some = MyEnumEmu.MyValue; 
```

并访问关联的值：

```
string text = MyEnumEmu.MyValue.Value;
//text will have the text "MyValue"
//or
string text = some.Value; 
```

这是最灵活的，您可以使用复杂类型而不是字符串，也可以添加额外的字段来传递多个值。

但是......它并不是真正的枚举。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T03:30:06.700

```
public class Vote()
{
     public VoteType VoteSelectType { get; set; }
}

public enum VoteType
{
    [Display(Name = "Enter Text Here")]
    unanimous = 1,
    [Display(Name = "Enter Text Here")]
    threequatervote = 2,
    [Display(Name = "Enter Text Here")]
    simplymajority = 3
} 
```

转到此处，这几乎是您的解决方案 [如何使用枚举值填充下拉列表？](https://stackoverflow.com/questions/3705330/mvc-net-how-to-populate-dropdownlist-with-enum-values)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T03:29:55.523

这个我以前用过，真的好用。

[http://www.codeproject.com/Articles/13821/Adding-Descriptions-to-your-Enumerations](http://www.codeproject.com/Articles/13821/Adding-Descriptions-to-your-Enumerations)

简而言之，它可以让你做的是：

```
public enum MyColors{
   [Description("The Color of my skin")]
   White,
   [Description("Bulls like this color")]
   Red,
   [Description("The color of slime")]
   Green
} 
```

然后通过简单地调用来获取描述：

```
String desc = GetDescription(MyColor.Green); 
```

不过它确实使用了反射，因此在简单性和轻微的性能影响之间需要进行权衡。大多数时候我会受到性能的打击......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T03:32:02.083

如果需要，您可以使用枚举，但您需要决定如何在枚举值和要显示的内容之间建立联系。例如，您希望将 SimpleMajority 的枚举值显示为“Simple Majority”。一种方法是使用 Description 属性和帮助程序类，如此[处](https://stackoverflow.com/questions/4367723/get-enum-from-description-attribute)所述。

但是，您可能会发现设置一个轻量级集合类来存储投票类型值及其描述更容易。这可能很简单，`Dictionary<int, string>`您可能会发现这是一种更直接的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-26T03:37:48.550

既然你有`type`，`description`我会更好地建议你创建一个`class`包装两者而不是`enum`. 优点是你可以减少更多的工作，而且非常灵活。

```
public class VoteType
{
   public string Name{ get; set; }
   public string Description{ get; set; }
} 
```

现在您的`Vote`班级将参考 this `VoteType`。

```
public class Vote
{
   ...
   public VoteType Type{ get; set; }
} 
```

在你的`VoteViewModel`你最好有一个包含所有`VoteType`s 的类。

```
public class VoteViewModel
{
   ...
   public IEnumerable<SelectListItem> VoteTypes{ get; set; }
} 
```

`VoteTypes`现在您可以轻松地在下拉列表中绑定。

```
@model VoteViewModel

@Html.DropDiwnListFor(m => m.VoteTypes,...) 
```

# ruby-on-rails - 批量分配受保护的属性（嵌套形式）Ruby/Rails

> ID：11200294
> 
> 赞同：-1
> 
> 时间：2012-06-26T03:09:07.190
> 
> 标签：ruby-on-rails, ruby, forms, nested-forms

我正在尝试创建嵌套表单，但在尝试分配参数时出现此错误。我读了一堆类似的帖子，但无法弄清楚问题所在。有什么问题？

`Can't mass-assign protected attributes: detalle_poliza`

我的模型：

poliza_contable.rb

```
class PolizaContable < ActiveRecord::Base 
has_many :detalle_polizas
accepts_nested_attributes_for :detalle_polizas
  attr_accessible :concepto_poliza, :estatus, :fecha_aplicacion, :fecha_poliza, :no_poliza, :tipo, :tota_de_cargos, :total_de_abonos
end 
```

detelle_poliza.rb

```
class DetallePoliza < ActiveRecord::Base
      belongs_to :cuenta_contable
      belongs_to :poliza_contable 
      attr_accessible :abono, :cargo,:cuenta_contable_id, :poliza_contable_id, :user_id, :id, :updated_at, :created_at
    end 
```

我的表格：

```
<%= form_for @poliza_contable, :html => { :class => 'form-horizontal' } do |f| %>
## OTHER FIELDS

<%= f.fields_for :detalle_poliza_attributes  do |builder| %>
   <% render :partial => "detalle_polizas/form", :locals => { :f => builder } %>
   <% end %>

<% end %> 
```

呈现形式：

```
 <div class="control-group">
    <%= f.label :cargo, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :cargo, :class => 'text_field' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :abono, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :abono, :class => 'text_field' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :poliza_contable_id, :class => 'control-label' %>
    <div class="controls">
      <%= f.number_field :poliza_contable_id, :class => 'number_field' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :cuenta_contable_id, :class => 'control-label' %>
    <div class="controls">
      <%= f.number_field :cuenta_contable_id, :class => 'number_field' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :user_id, :class => 'control-label' %>
    <div class="controls">
      <%= f.number_field :user_id, :class => 'number_field' %>
    </div>
  </div> 
```

请求参数：

```
{"utf8"=>"✓",
 "authenticity_token"=>"mI23Nnj4oPX+IW3mCvvIV7Auij+pjX/a7bl/HsudEW8=",
 "poliza_contable"=>{"tipo"=>"Diario",
 "concepto_poliza"=>"",
 "fecha_poliza"=>"2012-06-25",
 "detalle_poliza"=>{"cargo"=>"34",
 "abono"=>"34",
 "poliza_contable_id"=>"34",
 "cuenta_contable_id"=>"34",
 "user_id"=>"1"}}
 "commit"=>"Create Poliza contable"}` 
```

我会很感激任何评论来解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T23:23:30.177

刚刚做了一些研究，终于找到了[nestes_form gem](https://github.com/ryanb/nested_form)

这是一个非常直接的实现！

希望它可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T03:17:30.493

根据[railscast 196 Nested Model Form Part 1](http://railscasts.com/episodes/196-nested-model-form-part-1)，您需要允许 DetallePoliza 属性与父级一起保存。要实现这个目标，只需将**attr_accessible :detalle_polizas_attributes**添加到 PolizaContable 模型中：

poliza_contable.rb

```
class PolizaContable < ActiveRecord::Base 
  has_many :detalle_polizas
  accepts_nested_attributes_for :detalle_polizas
  attr_accessible :concepto_poliza, :estatus, :fecha_aplicacion, :fecha_poliza, :no_poliza, :tipo, :tota_de_cargos, :total_de_abonos, :detalle_polizas_attributes
end 
```

# jquery - jQuery - 表格和链接检测显示和隐藏

> ID：11200296
> 
> 赞同：0
> 
> 时间：2012-06-26T03:09:35.443
> 
> 标签：jquery

当我将鼠标悬停在 tr 上时，该块将显示，但当鼠标移动到标记时，该块将隐藏。悬停链接或文字时，块保持显示怎么办？

**CSS**

```
.block{ display:none;width:50px; height:50px; background-color:#CCC;}
td{ border:1px solid #999;} 
```

**HTML**

```
<table width="300" border="0" cellspacing="0" cellpadding="15">
  <tr>
    <td><a href="#">Test1</a><div class="block">1</div></td>
  </tr>
  <tr>
    <td><a href="#">Test2</a><div class="block">2</div></td>
  </tr>
  <tr>
    <td><a href="#">Test3</a><div class="block">3</div></td>
  </tr>
  <tr>
    <td><a href="#">Test4</a><div class="block">4</div></td>
  </tr>
  <tr>
    <td><a href="#">Test5</a> && <strong>BoldText</strong><div class="block">5</div>
    </td>
  </tr>
</table> 
```

**JS**

```
$(document).ready(function () {

        $("tr").hover(function(){
             $(this).find(".block").show();
        });

        $("tr").mouseout(function(){
             $(this).find(".block").hide();
        });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T03:14:29.547

您希望同时使用处理程序的 in 和 out 部分，[`hover`](http://api.jquery.com/hover/)而不是[`mouseout`](http://api.jquery.com/mouseout/)使用 out 处理程序。原因是`mouseout`如果事件目标更改为内部元素，则会触发，但您不希望这样。

```
 $("tr").hover(function(){
         $(this).find(".block").show();
    }, function(){
         $(this).find(".block").hide();
    }); 
```

## [​查看演示](http://jsfiddle.net/ZWT7c/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T03:19:15.070

只需添加：

```
$("a").hover(function(){
             $(this).parent().find(".block").show();
}); 
```

准备好给你的文件

# javascript - 与 django sweetpie 和骨干约会

> ID：11200297
> 
> 赞同：0
> 
> 时间：2012-06-26T03:09:42.990
> 
> 标签：javascript, django, backbone.js

我的 django 模型中有一个`models.DateTimeField()`字段。

我正在使用主干来显示这个模型。我希望能够漂亮地打印日期。

我尝试了以下但它说无效日期：

```
App.House = Backbone.Model.extend({
    url: function() {
        return API_URL + this.id;
    },
    initialize: function() {
        // displays Invalid Date when printed in template
        this.set('pretty_created_at',new Date(this.get('created_at')));  
    },
}); 
```

在查看来自服务器的 API 响应时，我看到日期具有以下格式：

```
"created_at": "2012-06-24T05:00:00+00:00" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T03:14:48.777

您需要以 Javascript 喜欢的形式提供日期：

```
new Date("Month dd, yyyy hh:mm:ss");
new Date("Month dd, yyyy");
new Date(yy,mm,dd,hh,mm,ss);
new Date(yy,mm,dd);
new Date(milliseconds); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T03:44:02.313

调试后，我意识到正在发生的事情是模型被这样初始化：

```
house = new House() 
```

因此，该`created_at`属性未定义。

我决定用它`timeago.js`来显示信息。但是，此问题的解决方法可能是：

```
App.House = Backbone.Model.extend({
    url: function() {
        return API_URL + this.id;
    },
    created_at: function() {
        // further processing could be performed here
        // before returning. You might want to return a 
        // formatted string or something...
        return new Date(this.get('created_at'));

    },
}); 
```

# android - 将 ProgressBar 添加到一次调用的 ListView/OnClick

> ID：11200299
> 
> 赞同：6
> 
> 时间：2012-06-26T03:10:05.337
> 
> 标签：android, android-4.0-ice-cream-sandwich

这个想法是有一个项目列表，在单击项目后，进度条将随着任务完成而慢慢填充。例如，描绘一个文件列表，每个文件都有一个下载按钮。单击下载按钮时，文件会在后台下载，并且会填充一个进度条，显示文件距离完成有多近。

为此，我创建了一个 AsyncTask，它偶尔会在适配器上调用 notifyDataSetChanged 来重绘它。虽然这在单击一个按钮后有效，但在 AsyncTask 完成之前，我无法单击 ListView 中的其他按钮。有人可以告诉我我做错了什么吗？

我在 Ice Cream Sandwich 的模拟器 (x86) 上运行它。

我有一个 DownloadItem 来表示下载的进度（为简洁起见，下面的代码被简化了）：

```
class DownloadItem {
    public String name;       // Name of the file being downloaded
    public Integer progress;  // How much is downloaded so far
    public Integer length;    // Size of the file
} 
```

然后我有一个 ArrayAdapter，它为 ListView 调整了 DownloadItem 列表：

```
class DownloadArrayAdapter extends ArrayAdapter<DownloadItem> {
    List<DownloadItem> mItems;
    public DownloadArrayAdapter(List<DownloadItem> items) {
      mItems = items;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        if(row == null) {
            // Inflate
            Log.d(TAG, "Starting XML inflation");
            LayoutInflater inflater = (LayoutInflater) this.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            row = inflater.inflate(R.layout.download_list_item, parent, false);
            Log.d(TAG, "Finished XML inflation");
        }

        DownloadItem item = mItems.get(position);

        ProgressBar downloadProgressBar = (ProgressBar) row.findViewById(R.id.downloadProgressBar);
        Button downloadButton = (Button) row.findViewById(R.id.downloadButton);

        downloadButton.setTag(item);
        downloadProgressBar.setMax(item.length);
        downloadProgressBar.setProgress(item.progress);

        return row;
    }
} 
```

到目前为止，一切都很好 - 这可以正确呈现列表。在我的活动中，我有 onClickListener：

```
class DownloadActivity extends Activity {
    //...
    public void onDownloadButtonClick(View view) {
        DownloadItem item = (DownloadInfo)view.getTag();
        DownloadArrayAdapter adapter = (DownloadArrayAdapter) view.getAdapter();
        new DownloadTask(adapter, item).execute();
        //new DownloadTask(adapter, item).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR)
    }
} 
```

我已经用 executeOnExecutor 尝试过这个，也只是执行，但没有运气。下载任务是：

```
class DownloadTask extends AsyncTask<Void, Integer, Void> {
    ArrayAdapter<?> mAdapter;
    DownloadItem mItem;

    public DownloadTask(ArrayAdapter<?> adapter, DownloadItem item) {
        mItem = item;
    }

    //Dummy implementation
    @Override
    public Void doInBackground(Void ... params) {
        for(int i=0; i<mItem.length; ++i) {
            Thread.sleep(10); publishProgress(i);
        }
        return null;
    }

    @Override
    public void onProgressUpdate(Integer ... values) {
        mItem.progress = values[0];
        mAdapter.notifyDataSetChanged();
    }
} 
```

这有效 - 几乎。当我这样做时，单击一个按钮后，ProgressBar 会正常更新 - 但在 AsyncTask 返回之前，我无法单击 ListView 中的其他按钮。也就是说，永远不会调用 onDownloadButtonClick。如果我从 onProgressUpdate 函数中删除 mAdapter.notifyDataSetChanged() 调用，多个任务会同时更新，但当然，列表不会失效，因此我必须滚动查看更改。

我做错了什么，我该如何解决这个问题？

编辑：我又玩了一些，似乎调用 notifyDataSetChanged 的​​频率会影响 onClick 是被调用还是丢失。使用上面的代码，通过疯狂的点击，我偶尔可以得到第二个下载栏来启动。如果我将 Thread.Sleep 增加到更大的值，例如 2000，则该列表将按我最初的预期工作。

所以新问题 - 我如何让 ProgressBars 顺利更新而不阻止 onClick 被调用？

编辑#2：我已将一个有此问题的示例项目推送到我的 GitHub 帐户：[https ://github.com/mdkess/ProgressBarListView](https://github.com/mdkess/ProgressBarListView)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-01T20:52:11.287

我已经想通了。

我没有调用 notifyDataSetChanged()，而是在 DownloadItem 对象中存储了对每个 ProgressBar 的引用。然后，当滚动 ListView 时，当旧对象作为 convertView 传递时，我从旧的 DownloadInfo 中删除了 ProgressBar 并将其放在新的上。

因此，我的数组适配器的 getView 就变成了：

```
 @Override
 public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    final DownloadInfo info = getItem(position);
    // We need to set the convertView's progressBar to null.

    ViewHolder holder = null;

    if(null == row) {
      LayoutInflater inflater = (LayoutInflater)getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
      row = inflater.inflate(R.layout.file_download_row, parent, false);

      holder = new ViewHolder();
      holder.textView = (TextView) row.findViewById(R.id.downloadFileName);
      holder.progressBar = (ProgressBar) row.findViewById(R.id.downloadProgressBar);
      holder.button = (Button)row.findViewById(R.id.downloadButton);
      holder.info = info;

      row.setTag(holder);
    } else {
      holder = (ViewHolder) row.getTag();

      holder.info.setProgressBar(null);
      holder.info = info;
      holder.info.setProgressBar(holder.progressBar);
    }

    holder.textView.setText(info.getFilename());
    holder.progressBar.setProgress(info.getProgress());
    holder.progressBar.setMax(info.getFileSize());
    info.setProgressBar(holder.progressBar);

    holder.button.setEnabled(info.getDownloadState() == DownloadState.NOT_STARTED);
    final Button button = holder.button;
    holder.button.setOnClickListener(new OnClickListener() {
      @Override
      public void onClick(View v) {
        info.setDownloadState(DownloadState.QUEUED);
        button.setEnabled(false);
        button.invalidate();
        FileDownloadTask task = new FileDownloadTask(info);
        task.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);
      }
    });
    return row;
  } 
```

然后，下载 AsyncTask 将在 progressBar 上设置进度，如果它不为空，并且这按预期工作。

我将更正后的代码上传到 GitHub，您可以在这里查看：[https ://github.com/mdkess/ProgressBarListView](https://github.com/mdkess/ProgressBarListView)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T04:22:59.543

您是否尝试设置单击侦听器以在适配器本身中下载项目，如下所示：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    if(row == null) {
        // Inflate
        Log.d(TAG, "Starting XML inflation");
        LayoutInflater inflater = (LayoutInflater) this.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        row = inflater.inflate(R.layout.download_list_item, parent, false);
        Log.d(TAG, "Finished XML inflation");
    }

    final DownloadItem item = mItems.get(position);

    ProgressBar downloadProgressBar = (ProgressBar) row.findViewById(R.id.downloadProgressBar);
    Button downloadButton = (Button) row.findViewById(R.id.downloadButton);

    downloadButton.setTag(item);
    downloadProgressBar.setMax(item.length);
    downloadProgressBar.setProgress(item.progress);

    downloadButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            new DownloadTask(DownloadArrayAdapter.this, item).execute();
        }
    });

    return row;
} 
```

# php - PHP将列表从Powershell放入数组

> ID：11200309
> 
> 赞同：0
> 
> 时间：2012-06-26T03:11:49.690
> 
> 标签：php, list, powershell, exchange-server

代码：

```
$exchangesnapin = "Add-PSSnapin Microsoft.Exchange.Management.PowerShell.E2010";
$output = shell_exec('powershell '.$exchangesnapin.';"get-mailboxdatabase" 2>&1'); 
echo( '<pre>' );
echo( $output );
echo( '</pre>' ); 
```

结果：

```
Name                           Server          Recovery        ReplicationType 
----                           ------          --------        --------------- 
Mailbox Database 0651932265    EGCVMADTEST     False           None        
Mailbox Database 0651932266    EGCVMADTEST     False           None 
```

我试过了

```
echo( $output[1] ); 
```

结果只有一个字母'N'。我相信它使用名称列，但一次只有一个字符。

```
$output[1] is 'N', $output[2] is 'a'. 
```

有什么办法可以将邮箱列表放入数组中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T04:01:26.060

您正在尝试从 PHP 执行外部程序（powershell）并将输出作为数组。为了在 PHP 中执行外部程序，您可以使用：

*   [执行（）](http://www.php.net/manual/en/function.exec.php)函数
*   [shell_exec()](http://www.php.net/manual/en/function.shell-exec.php)函数
*   [系统（）](http://www.php.net/manual/en/function.system.php)函数
*   [反引号运算符](http://www.php.net/manual/en/language.operators.execution.php)
*   [过程控制扩展](http://www.php.net/manual/en/refs.fileprocess.process.php)

使用过程控制扩展（PCNTL、popen）可以为您提供更多控制，但需要更多代码和时间。使用执行函数更简单。

在这种情况下，使用 exec() 可以帮助您将 powershell 的输出放在一个数组中，该数组的每个索引都是 powershell 输出中的一行。

```
<?php
$output = array(); // this would hold the powershell output lines
$return_code = 0; // this would hold the return code from powershell, might be used to detect execution errors
$last_line = exec("powershell {$exchangesnapin} get-mailboxdatabase 2>&1", $output, $return_code);
echo "<pre>";
// print_r($output); view the whole array for debugging
// or iterate over array indexes
foreach($output as $line) {
    echo $line . PHP_EOL;
}
echo "</pre>";
?> 
```

请注意（如文档所述）如果您只想回显 powershell 的输出，则可以使用[passthru()](http://www.php.net/manual/en/function.passthru.php)函数。使用 exec() 使用内存来存储外部程序的输出，但使用 passthru 不会使用此存储，导致内存使用量减少。但输出不能用于进一步处理，并以一种方式发送到 PHP 标准输出。

最后，请注意，外部程序执行需要仔细的数据验证，以降低不必要的系统影响的风险。确保对构造执行命令的数据使用[escapeshellarg() 。](http://www.php.net/manual/en/function.escapeshellarg.php)

# datagridview - 如何使用 datagridview 更新数据库？

> ID：11200319
> 
> 赞同：0
> 
> 时间：2012-06-26T03:12:38.317
> 
> 标签：datagridview, vb.net-2010

我们如何使用 datagridview 更新表格？假设 datagridview 在运行时是可编辑的？任何形式的帮助表示赞赏。

```
 Dim con As New OleDb.OleDbConnection
    Dim dbProvider As String
    Dim dbSource As String
    Dim ds As New DataSet
    Dim da As OleDb.OleDbDataAdapter
    Dim sql As String

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

        dbProvider = "PROVIDER=Microsoft.ACE.OLEDB.12.0;"
        dbSource = "Data Source = C:\record.accdb"

        con.ConnectionString = dbProvider & dbSource

        con.Open()

        sql = "SELECT * FROM StudentRecords"
        da = New OleDb.OleDbDataAdapter(sql, con)
        da.Fill(ds, "AddressBook")
        MsgBox("Database is now open")

        con.Close()

        MsgBox("Database is now Closed")

        DataGridView1.DataSource = ds
        DataGridView1.DataMember = "AddressBook"
    End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T03:15:36.717

请按照以下步骤操作：

1.  使用 For Each 或简单的 For 循环迭代 DataGridView 的 Rows 集合
2.  编写 UPDATE 语句以保存更改。

# orm - 奇怪的错误：[语义错误]第 0 行，'提交'附近的第 75 列：错误：'提交'未定义

> ID：11200321
> 
> 赞同：2
> 
> 时间：2012-06-26T03:12:47.683
> 
> 标签：orm, symfony, doctrine-orm, repository

我的控制器是：

```
 /**
   * @Route("/product/submit", name="product_submit") 
   * @Template("GaorenVendorsBundle:Product:index.html.twig")
   */
  public function submitAction()
  {
        $em = $this->getDoctrine()->getManager();
        $uid = $this->getUser()->getId();
        $em->getRepository( 'GaorenVendorsBundle:Product' )->updateStatus( $uid, Product::STATUS_FREE, Product::STATUS_PENDING );

        return $this->redirect( $this->generateUrl( 'product' ) );
  } 
```

我的回购是：

```
class ProductRepository extends EntityRepository
{

  public function updateStatus($uid, $status, $setter)
  {
        $st = $this->getEntityManager()->getRepository( 'GaorenVendorsBundle:Product' )
              ->createQueryBuilder( 'p' )
              ->update( 'GaorenVendorsBundle:Product', 'p' )
              ->set( 'p.status', ':setter' )
              ->where( 'p.status= :status AND p.user= :user' )
              ->setParameters( array(
                      'user' => $uid,
                      'status' => $status,
                      'setter' => $setter
              ) )
              ->getQuery()
              ->execute()

        return $st;
  } 
```

枝条：

```
 <a class="btn btn-large btn-primary " href="{{ path('product_submit') }}">
        <i class="icon-plus icon-white"></i>
        {{ 'create a new entry'|trans }}
    </a> 
```

当请求“提交”操作时，它会提示我：

```
[Semantical Error] line 0, col 75 near 'submit': Error: 'submit' is not defined. 
```

“提交”与Doctrine ORM查询无关，为什么会出现错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T08:48:16.920

可能是您有一条与`/product/{id}`上述类似的路线相匹配的路线吗？

这将匹配您的`/product/submit`路线并认为是`$id`string `"submit"`。第一个匹配的路由在 Symfony 中获胜。然后，如果您尝试从此 id 检索 Product 对象，则可能会引发此类错误。

解决方案是将您的提交操作移到处理`/product/{id}`路由的操作之上。

# iphone - 为 HTML5 Canvas 的高度宽度设置了哪些 iOS 最大值？

> ID：11200325
> 
> 赞同：2
> 
> 时间：2012-06-26T03:13:44.407
> 
> 标签：iphone, ios, ipad, html, canvas

我想出了一个设计，在我的主要画布中嵌套了一个更大的画布。主要的我将称为 ctx。我移动了较大的一个，ctx 很好地掩盖了它。我在 chrome 和 safari 中进行了开发，效果很好。

当我托管它并检查我的 iPad3 时，我发现了一些限制。
*显然，iOS 中 html5 画布的高度和宽度设置了最大限制！*

所以我将我的代码精简为几行基本的代码来进行测试。2000 x 2000 的画布可以很好地嵌套并显示在 iPad3 上，但是当我达到 3000 x 3000 时，它显示为空白。

我现在有一个亟待解决的问题——这些最大值是多少？它们对于旧 iOS 设备有什么不同？

我确实尝试过搜索，但找不到答案，所以我求助于 stackoverflow。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T03:16:29.687

我以前也遇到过这个问题，我认为问题在于可用视频内存的数量。问题不是特定的宽度/高度，而是宽度乘以高度，实际数字可能是特定于硬件的。

讨厌这么说，但我认为你只需要尝试一下，看看你能/不能摆脱什么。围绕该限制设计您的应用程序。

请注意，iPad 3 的视网膜显示意味着它的视频性能实际上比老一代稍差。

# ruby-on-rails - 为什么 Rspec/Capybara 会给我一个预期的 css ...返回一些错误？

> ID：11200327
> 
> 赞同：0
> 
> 时间：2012-06-26T03:13:57.427
> 
> 标签：ruby-on-rails, rspec, capybara

我正在使用的测试是：

```
it { should have_link('Logout', href: logout_url) } 
```

我只是在测试是否存在带有作为文本的`<a>`标签，以及作为路径的 href。我应该为此使用另一种语法吗？`Logout``logout_url`

宝石：

```
rails 3.2.6
rspec-rails 2.10.1
capybara 1.1.2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T04:25:29.537

有多种方法可以做到这一点。我建议（如果您还没有）熟悉整个[capybara dsl](http://rubydoc.info/github/jnicklas/capybara/master)以及一些特定部分，例如[capybara matchers](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Matchers)。

我相信你的测试写得很好：

```
it { should have_link('Logout', href: logout_url) } 
```

只要链接文本确实是“注销”并且正确指定了 href（见下文）。

根据[capybara docs](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Matchers#has_link?-instance_method)，第一个参数`have_link`是所谓的`locator`. 在您的情况下，它是“注销”。这可以是链接本身的文本，也可以是 dom 元素的#id。因此，在您的情况下，您需要在具有链接的链接中包含文本“注销” `logout_url`。

请注意，capybara 中的定位器*区分大小写*，因此请确保您匹配大小写。

`logout_url`您可能还需要考虑是否应该使用`logout_path`. 默认情况下，rails 并不总是为大多数链接生成完整的 url。它只是生成路径。区别如下：

```
users_url: http://localhost/users
users_path: /users 
```

检查您的页面以查看您的应用正在生成哪些类型的 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:51:04.110

Probably it should be logout_path.

Also you can try to use save_and_open_page to understand what's going wrong.

# ruby-on-rails - Kaminari 和 Rails 分页 - 未定义的方法“current_page”

> ID：11200330
> 
> 赞同：31
> 
> 时间：2012-06-26T03:14:23.773
> 
> 标签：ruby-on-rails, ruby, kaminari

我搜索和搜索，但没有解决我的问题。这是我的控制器：

```
def show
    @topic = Topic.find(params[:id])
    @topic.posts = @topic.posts.page(params[:page]).per(2) # 2 for debugging
end 
```

这功能很好，因为主题视图减少到两个帖子。但是，当我将其添加到 show.html.erb 时：

```
<%= paginate @topic.posts %> 
```

我收到了这个错误：

```
undefined method `current_page' for #<ActiveRecord::Relation:0x69041c9b2d58> 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-06-26T03:31:14.423

尝试：

```
def show
  @topic = Topic.find(params[:id])
  @posts = @topic.posts.page(params[:page]).per(2)
end 
```

进而：

```
<%= paginate @posts %> 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-04-30T06:10:54.833

如果您在 Kaminari 中遇到分页错误，例如

> 未定义的方法“total_pages”

或者

> 未定义的方法`current_page'

这可能是因为您传入的 AR 范围`paginate`没有`page`调用该方法。

确保您始终调用`page`您将传递给的范围`paginate`！

如果您有一个使用 Array 进行修饰的数组，这也适用`Kaminari.paginate_array`

坏的：

```
<% scope = Article.all    # You forgot to call page :(  %>
<%= paginate(scope)       # Undefined methods...        %> 
```

好的：

```
<% scope = Article.all.page(params[:page]) %>
<%= paginate(scope) %> 
```

或者使用您自己的非 AR 阵列...

坏的：

```
<% data = Kaminari.paginate_array(my_array)   # You forgot to call page :(        %>
<%= paginate(data)                            # Undefined methods...     %> 
```

同样，这很好：

```
<% data = Kaminari.paginate_array(my_array).page(params[:page]) %>
<%= paginate(data) %> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-26T03:40:26.443

前段时间，我遇到了 kaminari 的一个小问题，我通过为每个动作使用不同的变量名解决了这个问题。

假设在`index`您调用的操作中，例如：

```
def index
  @topic = Topic.all.page(params[:page])
end 
```

该`index`视图可以正常工作，`<%= paginate @topic %>`但是如果您想在任何其他操作中使用相同的变量名，则会出现这样的错误。

```
def list
  # don't use @topic again. choose any other variable name here
  @topic_list = Topic.where(...).page(params[:page])
end 
```

这对我有用。

请试一试。

# c - fscanf() 的输出无效

> ID：11200335
> 
> 赞同：0
> 
> 时间：2012-06-26T03:14:58.103
> 
> 标签：c, scanf

我使用的语言是 C 我正在尝试从文件中扫描数据，代码段如下：

```
char lsm;
long unsigned int address;
int objsize;
while(fscanf(mem_trace,"%c %lx,%d\n",&lsm,&address,&objsize)!=EOF){
    printf("%c %lx %d\n",lsm,address,objsize);
} 
```

我从中读取的文件的第一行如下：

```
 S 00600aa0,1
I  004005b6,5
I  004005bb,5
I  004005c0,5
 S 7ff000398,8 
```

标准输出中显示的结果是：

```
 8048350 134524916
S 600aa0 1
I 4005b6 5
I 4005bb 5
I 4005c0 5
S 7ff000398,8 
```

显然，结果有一条额外的线，无处可去。有没有人知道这是怎么发生的？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T04:45:22.133

这适用于您提供的数据：

```
#include <stdio.h>

int main(void)
{
    char lsm[2];
    long unsigned int address;
    int objsize;
    while (scanf("%1s %lx,%d\n", lsm, &address, &objsize) == 3)
        printf("%s %9lx %d\n", lsm, address, objsize);
    return 0;
} 
```

有多种变化。最简单和最不重要的是从 更改`fscanf()`为`scanf()`; 这是为了我的方便。

一个重要的变化是将类型`lsm`从单个`char`字符变为两个字符的数组。格式字符串然后使用`%1s`读取一个字符（加上 NUL `'\0'`）到字符串中，但它也（这是至关重要的）跳过前导空格。

另一个变化是在条件中使用了`== 3`代替`!= EOF`。如果出现问题，则`scanf()`返回成功匹配的数量。假设它读到了一个字母，但后面不是一个十六进制数字；它会返回 1（不是 EOF）。此外，它会在每次迭代中返回 1，直到找到与十六进制数匹配的内容。始终测试您期望的值的数量。

输出格式用`%9lx`. 我在 64 位系统上进行测试，所以 9 位十六进制转换得很好。一个问题`scanf()`是，如果您在转换时出现溢出，则行为是未定义的。

输出：

```
S    600aa0 1
I    4005b6 5
I    4005bb 5
I    4005c0 5
S 7ff000398 8 
```

### 你为什么得到你得到的结果？

第一次转换将空格读入`lsm`，但随后未能转换`S`为十六进制数，因此将其留给下一个循环。因此，您在地址和对象大小列中打印了剩余的垃圾。第二次迭代读取`S`并与数据同步，直到最后一行。格式末尾的换行符（与格式字符串中的任何其他空格一样）吃掉空格，这就是为什么最后一行尽管有前导空格仍然有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T04:49:01.943

> 作为转换规范的指令定义了一组匹配的输入序列，如下面的每个说明符所述。转换规范按以下步骤执行：
> 
> 输入空白字符（由 isspace 函数指定）将被跳过，除非规范包含 [、c 或 n 说明符。
> 
> 从流中读取输入项，除非规范包含 n 说明符。
> 
> [...]

第一次调用 fscanf 时，%c 会读取文件中的第一个空格。您的空白字符读取零个或多个空白字符，这次是零个。您的 %lx 无法匹配文件中的 S 字符，因此 fscanf 返回。你不检查结果。您的变量包含它们从早期操作中获得的值。

第二次调用 fscanf 时，%c 读取文件中的第一个 S 字符。从那时起，其他一切也都成功了。

在编辑中添加，这是对格式字符串的最简单更改以解决您的问题：

```
" %c %lx,%d\n" 
```

开头的空格将读取零个或多个空白字符，然后 %c 将读取文件中的第一个非空白字符。

这是另一种格式字符串，也可以解决您的问题：

```
" %c %lx,%d" 
```

原因是如果您连续两次读取并丢弃零个或多个空白字符，结果与只执行一次相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T03:47:00.413

我认为 fsanf 将第一个字符 [空格] 读入`lsm`然后无法读取`address`，`objsize`因为格式转换与该行的其余部分不匹配。

然后它会打印一个空格，然后打印出任何内容`address`以及`objsize`何时声明

编辑 -

fscanf 在每次调用后使用空格，如果你调用 ftell 你会看到

```
printf("%c %lx %d %d\n",lsm,address,objsize,ftell(mem_trace)); 
```

# iphone - 如何将视图从容器视图内部移动到另一个容器视图内部？

> ID：11200336
> 
> 赞同：3
> 
> 时间：2012-06-26T03:15:12.407
> 
> 标签：iphone, ios, uiview, nested, coordinates

我有一个主要观点。主视图内部有两个容器视图：按钮容器和显示容器。每个容器内部分别是按钮和显示字段。

简而言之，我有三个级别的视图：主视图、子视图（容器）和子子视图（按钮和字段）。

当按下按钮时，我想将该按钮的图像从按钮区域动画到显示区域。也就是说，我需要将它向上移动两层，然后再向下移动两层。

目前，我正在按钮顶部创建一个与自定义按钮的 UIImage 相同的 UIImage。我移动它，然后在动画结束时将其销毁，因此我不必更改实际按钮（我想将其保留在原位以便重复使用它）。

显然我可以得到这个 UIImageView 的中心/边界/框架。

但是，我无法确定目的地的坐标。Frame 和 Center 是相对于 superview 的，但这只是上一层。似乎需要做很多数学运算才能将正确的 X 和 Y 偏移量相加才能到达目的地。

这是 UIView 的 convertRect:toView: 或 convertRect:fromView: 的工作吗？我很难确定如何使用它们，或者确定它们是否真的是正确的使用方法。

似乎是一个很常见的问题——将某些东西从一个“嵌套”视图移动到另一个“嵌套”视图——但我已经搜索过但找不到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T04:37:57.437

那些 convertRect 方法很难掌握。您的视图包含两个子视图 subA 和 subB，并且 subA 包含一个按钮，并且您希望为从 subA 移动到 subB 的按钮设置动画。让我们在具有主视图的视图控制器中制作动画......

```
// subA is the receiver.  that's the coordinate system we care about to start
CGRect startFrame = [subA convertRect:myButton.frame toView:self.view];

// this is the frame in terms of subB, where we want the button to land
CGRect endFrameLocal = CGRectMake(10,10,70,30);
// convert it, just like the start frame
CGRect endFrame = [subB convertRect:endFrameLocal toView:self.view]; 

// this places the button in the identical location as a subview of the main view
// changing the button's parent implicitly removes it from subA
myButton.frame = startFrame;
[self.view addSubview:myButton];

// now we can animate in the view controller's view coordinates
[UIView animateWithDuration:1.0 animations:^{
    myButton.frame = endFrame;  // this frame in terms of self.view
} completion^(BOOL finished) {
    myButton.frame = endFrameLocal;  // this frame in terms of subB
    [subB addSubview:myButton];
}]; 
```

# android - 如何将数据发布到 android youtube 应用程序

> ID：11200340
> 
> 赞同：-1
> 
> 时间：2012-06-26T03:15:52.683
> 
> 标签：android, webview

我正在 android WebView 中创建视频音乐搜索，我希望用户可以在单击 WebView 中的搜索结果后启动 android Youtube 应用程序。

# 例子：

*   活动 A 用户输入搜索文本后列出的搜索结果
*   活动 B 启动带有用户从活动 A 中单击的搜索结果的 youtube 应用程序。

无论如何，身体知道如何做到这一点？

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T03:28:18.930

您可以使用此在默认播放器中启动 youtube 视频

```
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("{url}"))); 
```

将 {url} 替换为 youtube 网址

请参阅this [question](https://stackoverflow.com/questions/3250034/android-webview-intercept-clicks) on how to intercept click in a webview，以便在单击某些 URL 时调用上述内容

# java - 使用 3 点的抛物线方程

> ID：11200346
> 
> 赞同：0
> 
> 时间：2012-06-26T03:17:56.210
> 
> 标签：java, math, graphics

好的，所以我需要制作一条横跨我的世界长度的抛物线。(W) 我在左上角为 (0,0) 的世界中创建这个

我的 3 个点是从左到右，(x,y)

(0,H) (W/2,0) << 顶点 (W,H)

这将从世界的左下角，到世界顶部中心的顶点，再到世界的右下角。

我确信我把它弄得比它需要的复杂得多，但我绞尽脑汁想弄明白。

另外，这将起作用的方式是我希望图形在给定的时间内通过抛物线。

所以我会创建一个函数来获取 Y，然后我会将 X 发送给它，范围从 0 到 W，具体取决于经过的时间。

所以我会调用这个函数，

```
 GetPathY((WorldWidth*Percentage));
private int getPathY(double X) {
    int y = (int) ScreenHeight-((4 * ScreenHeight* X)/(WorldWidth^2))
    return(y);
} 
```

我认为这行得通吗？

所以：y=(((-4*ScreenHeight)/(WorldWidth^2))(x-(WorldWidth/2)^2)) 或：y = H-((4Hx)/(W^2));

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T03:24:43.643

抛物线的方程是什么？

```
y(x) = c0 + c1*x + c2*x^2 
```

你有三点：

```
y(0) = c0 = H 
```

还有一个：

```
y(W/2) = H + c1*(W/2) + c2*(W/2)^2 = 0 
```

您可以为 c1 或 c2 解决此问题。让我们为 c2 做：

```
c2 = -4H/W^2 - 2c1/W 
```

然后是最后一个等式：

```
y(W) = H + c1*(W) + c2*(W^2) = H 
```

从两边减去 H 得到：

```
c1*W + c2*W^2 = = 0 
```

简化这个得到 c1：

```
c1 = -c2*W 
```

将你在第二个方程中求解的系数代入这个方程得到第三个，你就完成了。

这只是代数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:46:18.603

我实际上做了第二种方法。

我通过重新排列 y=a(xh)^2+k 得到的第一种方法来解决“a”

```
 y=(WindowHeight/((WindowWidth/2)^2)*(x-(WindowWidth/2))^2 
```

第二种方式，只需制作两个百分位数，一个用于向上，一个用于水平。随着时间的推移，X 轴百分位数从 0-100% 和 Y 轴从 0-100% 到一半时间，然后从 100-0% 回落，您所要做的就是为 Y 轴添加一个修改器，使其开始快速并在达到 100% 时减速。这将提供曲线。

当然，等式更容易:)

如果您不删除此帖子，我将不胜感激，因为我的回答与其他人根本不同，而且我的解决方案都是有效的，而且也不同。我没有使用他的答案来获得我自己的答案，这两种解决方案都可以帮助将来尝试解决类似问题的其他人。也是因为第一个答案无助于以描述的方式解决问题。

# php - PHP，通过唯一值识别提交的表单

> ID：11200355
> 
> 赞同：0
> 
> 时间：2012-06-26T03:18:32.747
> 
> 标签：php, html, forms, post

我试图想出一种方法来区分由唯一 POST 值提交的表单。虽然这本身并不是一个复杂的问题，但我的情况可能会导致它们成为一个问题。

```
while(!isset($_SESSION['user']) || empty($_SESSION['user'])){
    require_once('login_form.php');
} 
```

当用户进入需要用户登录才能查看的页面时。如果有人登陆这些页面之一并且尚未登录，我将显示登录表单。登录表单的操作是它本身，或者更确切地说是正在显示的页面。现在，当显示的页面也有一个表单时，我的问题就来了。我需要一种方法来确保登录表单中的 $_POST 数据不会进入页面表单中的 $_POST 数据。通常这不会是一个问题，除非表单输入共享相同的名称。

我想要一种使用一些独特值来区分表单的方法。我一直在考虑使用 HTML 按钮进行提交。

```
while(!isset($_SESSION['user']) || empty($_SESSION['user'])){
    require_once('login_form.php');
}
if(isset($_POST['PAGE_FORM']) && !empty(PAGE_FORM)){
    unset($_POST);
}

<form name="PAGE_FORM">
    <button valuye="PAGE_FORM">Submit</button>
</form> 
```

我也想过做这样的事情。

```
while(!isset($_SESSION['user']) || empty($_SESSION['user'])){
    require_once('login_form.php');
    if(isset($_SESSION['user']) && !empty($_SESSION['user'])){
        unset($_POST);
    }
}

<form name="PAGE_FORM">
    <button valuye="PAGE_FORM">Submit</button>
</form> 
```

让我知道你的想法。我会对你可能有的任何其他想法感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T03:24:05.843

不包括 login_form，而是将 http 重定向到单独的登录表单。

# java - Java 游戏中 Random() 实例的持久性？

> ID：11200358
> 
> 赞同：2
> 
> 时间：2012-06-26T03:19:05.143
> 
> 标签：java, random, persistence

当为两个完全独立的机制（例如攻击掷骰和表面随机动画）获取 Random().nextInt(int) 整数时，是否有任何理由为每个机制使用单独的 Random() 实例？例如，它是否有助于确保每个机制的随机值分布更均匀？

-

同样，在随机值的均匀分散很重要的持续游戏中，是否有任何理由将 Random() 的实例或种子与保存的游戏数据一起存储 - 并在游戏加载时从中断处继续 - - 而不是每次都创建一个新实例？

例如，在一个回合制游戏中，玩家每回合可能幸运或不幸，是否有可能在游戏加载时创建一个新的 Random() 实例可能会导致玩家异常幸运或不幸的情况？

-

（注意：当我说“创建一个新实例”时，我的意思是只使用“Random random = new Random()”，没有指定种子。）

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T03:23:29.260

不，没有理由。使用*相同*的实例。

除了一些例外：

1.  期望模式*的*可预测性。例如，播种特定的“纸牌游戏编号”或“确保发生相同的随机事件”（例如停止保存/加载“作弊”；-) 可能需要额外的工作来利用 PRNG 可重复性，因为内部状态不是裸露。这是一条*商业规则*。
2.  使用了线程，使用相同的 Random 实例存在*性能*问题。（随机在 Java 中是线程安全的，我之前说错了。）

相同种子的问题是 PRNG 序列将开始相同（因此是已知的，或者通常更常见的是，导致相同的 [冲突] 序列和“缺乏随机性”）。*然而，序列随机性*的质量不受影响。

顺便说一句：幸运的是，Java 有一个*非常好的*默认 Random 构造函数：

> 创建一个新的随机数生成器。此构造函数将随机数生成器的种子设置为一个很可能与此构造函数的任何其他调用不同的值。

在 JDK 6 中，它被实现为：

```
this(++seedUniquifier + System.nanoTime()); 
```

（当然，也可以用上述实现来想象/设计一个*退化*的场景......）

快乐编码。

# android - 将 EXIF 元数据从 Android 应用程序写入图像到 Windows

> ID：11200364
> 
> 赞同：0
> 
> 时间：2012-06-26T03:20:19.097
> 
> 标签：android, windows, sqlite, exif

我想从 Android 应用程序中编写 EXIF 图像。可以通过右键单击图像的属性在 Windows 中显示 EXIF 信息。我的应用程序中的相机方法可以为我提供一个位图，我将其存储在存储（MediaStore）设备中，用户捕获的照片的位置，以及图片字符串的属性。以上信息存储在 SQLite 数据库中

除此之外，我想通过从数据库中写入数据或对 Text.setText() 进行硬编码，在其元数据中为图片添加一些标签。

EXIF 是一种非常流行的方式，但我找不到有关如何执行此操作的良好参考。

如果在Android编程中有一些工具可以实现这个任务，请告诉我。

谢谢

# perl - 在 Mojolicious 控制器单元测试中将文件作为参数传递

> ID：11200374
> 
> 赞同：0
> 
> 时间：2012-06-26T03:23:03.170
> 
> 标签：perl, testing, file-upload, mojolicious

我有一个文件上传应用程序。我想测试我的`Upload`控制器。为此，我如何将文件传递给我的测试？对于我的应用程序中的文件上传，我使用外部应用程序/插件（Flash/HTML5/HTML4）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T04:49:52.107

不知何故像这样：

```
use Test::Mojo;

my $t = Test::Mojo->new('MyApp');

$t->post_form_ok('/my_action', {my_upload => {file => '/path/to/file'}}); 
```

# pdf - 如何使用 sencha 在 ipad 中加载 pdf 文件？

> ID：11200375
> 
> 赞同：0
> 
> 时间：2012-06-26T03:23:07.480
> 
> 标签：pdf, sencha-touch, sencha-touch-2

如何使用 sencha 在 ipad 中加载 pdf 文件？

我尝试了以下方法：

```
 html:'<div id="scroller" style="width:99%;overflow:scroll;">' +
            '<img style="width:100%;overflow:scroll;"' +
               'src="resources/pdfFiles/help.pdf">' +
               '</img></div>' 
```

和

```
 html:'<div id="scroller" style="width:99%;overflow:scroll;">' +
            '<iframe style="width:100%;overflow:scroll;"' +
               'src="resources/pdfFiles/help.pdf">' +
               '</iframe></div>' 
```

和

```
html:'<div style="height:99%;width:99%;overflow:scroll;">' +
       '<embed type="application/pdf" width="100%" height="100%" src="resources/pdfFiles/help.pdf" /></div>' 
```

和

```
 html:'<object data="resources/pdfFiles/help.pdf" TYPE="application/x-pdf" width="100%" height="100%" </object>' 
```

iframe 在 chrome 浏览器中工作正常并打开 pdf。但是在ipad中它打开了空白。img 标签仅在 ipad 中打开 pdf 的第一页。如何通过点击按钮在 ipad 中加载整个 pdf？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T05:27:53.603

据我所知，Sencha Touch 应用程序不能很好地与`iframe`.

您最好在浏览器中打开一个新链接，让浏览器完成剩余的任务。

这是官方论坛的讨论：[在 Sencha Touch 2 中显示 PDF 和其他非 HTML 内容](http://www.sencha.com/forum/showthread.php?211954-Displaying-PDF-s-and-other-non-HTML-content-in-a-Sencha-Touch-App)

# php - 如何让 mail() 函数在 php 5.3 中从头开始工作？

> ID：11200378
> 
> 赞同：1
> 
> 时间：2012-06-26T03:24:06.353
> 
> 标签：php, function, email, php-5.3

我是 php 世界的新手（实际上不是很多，但差不多）。

我制作了小块网，这样我就可以测试我需要的每个功能。现在我在使用 PHP 附带的 mail() 函数时遇到了问题，我在许多站点中查找了解决方案。我在这里搜索过，但没有任何帮助，每次我找到一些似乎有效的答案时，都会出现一个新问题。

先说明一下我的情况：

我开始编写一些代码，其中包含 HTML 表单，以便我可以获得邮件结构的用户信息，其想法是生成一种跟踪，用户在特定时刻触发并加载一些信息。后来，我注意到如果我无法解决 de mail() 问题，我将无法正常工作。所以我尽量减少了我的问题，只是写道：

```
<?php
     mail($mail, $subject, $body);
?> 
```

好吧，你可以想象，自从安装 xampp（我之前没有提到）后我没有修改 php.ini，我得到了一些 SMTP 和 sendmail_path 错误；所以我在这里查找并获得了一些配置 php.ini 的说明。然后又试了几次，还是不行。

尝试使用 PEAR 的 Mail_mime，但它只是让一切变得更加模糊，存在非静态问题。

希望你能帮忙。

我编辑了 php.ini 文件，所以我得到了

```
SMTP = localhost
smtp_port = 25 
```

我现在没有收到任何错误消息，只是没有收到电子邮件，我还设置了 from 标头，我忘了指出这一点。我在 phph.ini 文件中设置了 From 标头，当它不起作用时，我在新代码的变量中对其进行了编辑。更详细的图片如下所示：

```
<?php
     $to = 'rojas.damian.brz@gmail.com';
     $headers = array("From"=>"rojas.damian.brz@gmail.com");
     $subject = 'This is the subject.';
     $body = 'Here is the message.';

     mail($mail, $subject, $body, $headers);
?> 
```

那是众多试验之一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T03:39:45.143

您需要发送`From`标头。它可能设置为回退到默认地址，但我的直觉是它不是。当然，这可能不是问题。

`mail($mail, $subject, $body, $headers);`

示例`From`标题将是`From: noreply@example.com`. 用 .分隔字符串中的标题`\r\n`。

# android - 如何在 SurfaceView 中绘制自定义视图？

> ID：11200381
> 
> 赞同：2
> 
> 时间：2012-06-26T03:24:40.773
> 
> 标签：android, surfaceview, android-custom-view

我很难把所有的部分放在一起。我有 3 个类：`DefaultActivity`扩展`Activity`、`MyView`扩展`SurfaceView`和`ResistorView`扩展 a `View`。

我想知道的是，每次点击课堂上的按钮时如何画一个`bAddResistor`电阻`DefaultActivity`？以下是 3 个类的一些部分：

DefaultActivity.java

```
public class DefaultActivity extends Activity {

    //MyView myView;
    TextView myText;
    ResistorView myResistor;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);      

        //myView = (MyView) findViewById(R.id.my_view);
        //myView = new MyView(this, null);    
        //myResistor = new ResistorView(this);
        //myView.setBackgroundColor(Color.WHITE);
        //myView.setScrollContainer(true);
        setContentView(R.layout.main); 

        final Button bAddResistor = (Button) findViewById(R.id.bAdd);

        bAddResistor.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
            // Perform action on click                 

            Global.numberOfResistors++;                
            Log.d("ButtonADD", "Button Add has been clicked");
            }
        });
    }
} 
```

我的视图.java

```
public class MyView extends SurfaceView implements SurfaceHolder.Callback { 
    public MyView(Context context, AttributeSet attrs) {
        super(context, attrs);    
        getHolder().addCallback(this);    
    }        

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);        
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
        // TODO Auto-generated method stub
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        Canvas c = holder.lockCanvas();
        onDraw(c);
        holder.unlockCanvasAndPost(c);        
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        // TODO Auto-generated method stub    
    }
} 
```

电阻视图.java

```
public class ResistorView extends View {
    private Path mSymbol;
    private Paint mPaint;

    //...Override Constructors...
    public ResistorView(Context context) {
        super(context);
        init();
    }

    public ResistorView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    private void init() {
        mSymbol = new Path();
        mPaint = new Paint();

        mPaint.setAntiAlias(true);        
        mPaint.setStrokeWidth(2);
        mPaint.setColor(-7829368);
        mPaint.setStyle(Paint.Style.STROKE);

        //...Your code here to set up the path,
        //...allocate objects here, never in the drawing code.

        mSymbol.moveTo(0.0F, 0.0F);
        mSymbol.lineTo(0.0F, 50.0F);
        mSymbol.lineTo(16.666666F, 58.333332F);
        mSymbol.lineTo(-16.666666F, 75.0F);
        mSymbol.lineTo(16.666666F, 91.666664F);
        mSymbol.lineTo(-16.666666F, 108.33333F);
        mSymbol.lineTo(16.666666F, 124.99999F);
        mSymbol.lineTo(-16.666666F, 141.66666F);
        mSymbol.lineTo(0.0F, 150.0F);
        mSymbol.lineTo(0.0F, 200.0F);
        mSymbol.offset(100.0F, 20.0F);
    }

    //...Override onMeasure()...
    @Override
    public void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        //Use this method to tell Android how big your view is
        setMeasuredDimension(50, 50);
    }

    //...Override onDraw()...
    @Override
    public void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        canvas.drawPath(mSymbol, mPaint);
    }        
} 
```

和 main.xml 布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/RelativeLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    tools:ignore="HardcodedText" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/RightLayout"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_alignParentRight="true"
        android:background="#00000000"
        android:orientation="vertical" >

        <Button
            android:id="@+id/bAdd"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Add RES" />

        <Button
            android:id="@+id/bDeleate"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Del RES" />

    </LinearLayout>

    <com.defaul.android.MyView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_toLeftOf="@id/RightLayout"
        android:background="#ff000000" />

</RelativeLayout> 
```

如果我将绘图代码放入`MyView.onDraw`它工作正常，则电阻器被绘制。我想要的是单击一个按钮并在表面上绘制电阻器，因此每次单击时我都希望将一个电阻器添加到表面视图中。

可能我正在以相反的方向解决这个问题。如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T01:45:47.060

由于我找不到一种方法来做我想做的事，`SurfaceView`我只是创建了一个扩展 View 的类，然后将该视图添加到我的主布局中。

如果它可能对某人有帮助，下面是我的代码的简化版本：

```
public class CircuitSolverActivity extends Activity {
/** Called when the activity is first created. */ 

RelativeLayout mLayout; 
MyView mView;

@Override    
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);        

    mLayout = (RelativeLayout)findViewById(R.id.elementContainer);                

}

public void bAddView(View view){

        mView = new MyView(context);            
        mView.setBackgroundColor(Color.TRANSPARENT);            
        mLayout.addView(mView); 
} 
```

`MyView`班级：

```
public class ResistorView extends View {

public ResistorView(Context context, AttributeSet attrs) {
    super(context, attrs);                
    init();        
}

public ResistorView(Context context){
    super(context);         
    init();
}

private void init() {

    mSymbol = new Path();
    mPaint = new Paint();        

    mPaint.setAntiAlias(true);      
    mPaint.setStrokeWidth(2);
    mPaint.setColor(-7829368);      
    mPaint.setStyle(Paint.Style.STROKE);       

    mSymbol.moveTo(0.0F, 0.0F);
    mSymbol.lineTo(0.0F, 50.0F);        

}

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    canvas.drawPath(mSymbol, mPaint);
} 
```

# c++ - atoi 没有正确转换字符串？

> ID：11200385
> 
> 赞同：0
> 
> 时间：2012-06-26T03:25:43.287
> 
> 标签：c++, stack, atoi, rpn

所以，我有以下（kludgy！）代码用于后缀表达式转换器和计算器的中缀（正如我在上一篇文章中提到的：[简单的数值表达式求解器](https://stackoverflow.com/questions/11162902/simple-numerical-expression-solver)，感谢大家！）：

```
#include <iostream>
#include <string>
#include <stack>

using namespace std;

int main()
{
    stack<char> operators;  
    stack<char> output;
    stack<char> temp;       
    stack<char> answer; 

    string command;

    cout << "=>";
    cin >> command;

    // "Shunting Yard" algorithm
    // source: http://en.wikipedia.org/wiki/Shunting-yard_algorithm
    for(int i=0; i<command.size(); i++)
    {
        switch(command[i])
        {
        case '*': case '+': case '-': case '/': case'(': 
            operators.push(command[i]);
            break;

        case ')':
            while(operators.top() != '(')
            {
                output.push(operators.top());
                operators.pop();
            }
            operators.pop();
            break;

        default:
            output.push(command[i]);
            break;
        }
    }

    while(!operators.empty())
    {
        output.push(operators.top());
        operators.pop();
    }

    while(!output.empty())
    {
        temp.push(output.top());
        output.pop();
    }

    while(!temp.empty())
    {
        if(temp.top() == '+')
        {
            int a = atoi(&answer.top());
            cout << "A=" << a << endl;
            answer.pop();
            int b = atoi(&answer.top());
            cout << "B=" << b << endl;
            answer.pop();
            answer.push(b+a);
        } else {
            answer.push(temp.top());
        }
        temp.pop();
    }

    cout << answer.top() << endl;

    system("pause");
    return 0;
} 
```

无论如何，问题是：如果我输入，例如，3+4，结果是“&”，而正确的结果是“7”。那么，我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T03:36:02.577

替换这部分代码：

```
if(temp.top() == '+')
    {
        int a = atoi(&answer.top());
        cout << "A=" << a << endl;
        answer.pop();
        int b = atoi(&answer.top());
        cout << "B=" << b << endl;
        answer.pop();
        answer.push(b+a);
    } 
```

和：

```
 if(temp.top() == '+')
    {
        int a = answer.top() - '0';
        cout << "A=" << a << endl;
        answer.pop();
        int b = answer.top() - '0';
        cout << "B=" << b << endl;
        answer.pop();
        answer.push(b+a);
    } 
```

将解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T04:38:19.113

这里有两个问题。

第一的：

```
int a = atoi(&answer.top()); 
```

atoi 采用指向以空字符结尾的字符串的指针。但是 &answer.top() 只是一个指向单个字符的指针。所以 atoi 将从那个字符开始读取，然后继续遍历内存，直到找到一个 '\0' 字符（或非数字）。根据您的平台上堆栈的实现方式，这可能意味着它读取“4”，然后是“3”，然后是“\0”，所以它以“43”结尾。或者它可能会读取“4”，然后是一些恰好以“8675309j”开头的未初始化内存，所以它以“48675309”结尾。

如果你想知道为什么编译器没有警告你这个错误，问题是 C 风格的字符串和指向单个字符的指针在语法上是完全相同的类型 (char*)，所以编译器不能告诉你'除非它理解 atoi 的语义，否则将它们混合在一起。这是最好使用 C++ 字符串类和函数而不是基于 C char* 的函数的众多原因之一。

第二：

```
answer.push(b+a); 
```

b+a 是一个 int，但您将它推入一堆字符中。因此，即使它具有正确的值，您也会推送字符“\007”，而不是字符“7”。您需要对其进行重新字符串化。但是在这种情况下，您显然得到了类似 305419814 的内容，当转换为 char 时，它会被截断为低 8 位 (38)，而 38 是“&”。

# asp.net-mvc-3 - MVC3 Validation 属性：在反射中丢失；有点通用

> ID：11200386
> 
> 赞同：0
> 
> 时间：2012-06-26T03:26:07.407
> 
> 标签：asp.net-mvc-3, generics, reflection, data-annotations

我正在尝试`NotAttribute`为我的 MVC3 项目编写验证器属性。我想像这样使用它：

```
[Not("00000000-0000-0000-0000-000000000000", typeof(Guid), ErrorMessage = "You must select a valid id.")]
public Guid ObjectId { get; set; } 
```

现在我不想将 a 绑定`NotAttribute`到 a `Guid`，但是该对象应该可以从字符串中解析；我想先找`TryParse`方法，再找`Parse`方法；如果两者都失败，并且类型还不是字符串，我想抛出一个错误。到目前为止，一切顺利，没有并发症。

我的课看起来像这样：

```
public class NotAttribute : ValidationAttribute, IClientValidatable
{
    public Type PropertyType { get; set; }
    public string NotEqualTo { get; private set; }
    public bool IgnoreWhitespace { get; set; }
    public bool CaseInsensitive { get; set; }

    public NotAttribute(string notEqualTo)
    {
        NotEqualTo = notEqualTo;
    }

    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        if (PropertyType == null) PropertyType = typeof(string);
        if (PropertyType == typeof(string))
        {
            //this is the easy case.  We can compare easy enough
            var leftSide = value.ToStringOrEmpty();
            var rightSide = NotEqualTo ?? string.Empty;

            if (IgnoreWhitespace)
            {
                leftSide = leftSide.Trim();
                rightSide = rightSide.Trim();
            }

            if (CaseInsensitive)
            {
                leftSide = leftSide.ToUpperInvariant();
                rightSide = rightSide.ToUpperInvariant();
            }

            if (leftSide != rightSide) return null; // all is well
        }

        var tryParseMethod = PropertyType.GetMethod("TryParse",
            Reflection.BindingFlags.Static | Reflection.BindingFlags.Public, null,
            new Type[] {typeof(string), PropertyType.MakeByRefType()}, null);

        //This is where I get lost

        return base.IsValid(value, validationContext);
    }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        throw new NotImplementedException();
    }
} 
```

我很确定我`tryParseMethod`会返回对理论上可以调用的对象方法的引用，但这是我遇到问题的地方。

我将如何调用它，传入在运行时确定的类型？这似乎是在为泛型实现而尖叫，但我不知道我可以在哪里注入它。此外，一旦我有了需要与“非”值进行比较的值，我需要在运行时以某种方式强制转换它，这也需要泛型。

我怎样才能使这项工作？我这样做完全错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T05:29:21.850

它是一个静态方法，因此您应该能够调用它而无需调用该类型的类的实例`PropertyType`（请参阅[MSDN 页面](http://msdn.microsoft.com/en-us/library/a89hcwhh.aspx)）。因此，您可以调用`Invoke`.`tryParseMethod`

但是，该`TryParse`方法本身将需要该类型的一个类的实例`PropertyType`作为它的`out`参数，因此您需要使用`System.Activator.CreateInstance()`它。

所以，大概是这样的

```
var parsedObject = System.Activator.CreateInstance(PropertyType);
bool parseSuceeded = tryParseMethod.Invoke(null, new [] { value, parsedObject }); 
```

将完成这项工作。

# python - 在 Python 中使用类列表和字典实现数据树

> ID：11200388
> 
> 赞同：-1
> 
> 时间：2012-06-26T03:26:14.993
> 
> 标签：python, list, dictionary

我正在写两个动画类，一个是字典，另一个是列表？遇到第二个问题，dict 的工作方式如下，

```
class Field( dict ):        
    def __keys__(self): 
        self.k = self.keys()
        return list(self.k)

    def __setattr__( self, attr, value):
        self[attr] = value 
```

我想而不是添加为下一个，

```
class Store(list): 
```

相反，我想对`dict()`某些索引对象和列表子参数使用相同的高性能

实现数据树的最正确方法是什么？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T04:12:54.590

我要给出一个答案。我*认为*您希望快速访问某些对象集合，同时能够使它们保持有序。您*可能*能够摆脱像`ordereddict`. 如果没有，这样的事情可能会接近。这将取决于您的数据。

```
class Container(object):
  def __init__(self):
    self.data = []
    self.byid = {}

  def setData(self, listofdicts):
    for item in listofdicts:
      id = item['id'] # Something here that's meaningful.
      self.data.append(item)
      self.byid[id] = item

  def getByPos(self, idx):
    return self.data[idx]

  def getById(self, itemid):
    return self.byid[itemid] 
```

# c# - Windows Mobile 的“确定”按钮

> ID：11200390
> 
> 赞同：2
> 
> 时间：2012-06-26T03:26:18.880
> 
> 标签：c#, windows-mobile

我发现*了如何*禁用 Windows Mobile 应用程序中的“确定”按钮（通过设置`ControlBox`为*false*）。

我遇到的问题是，我可以通过按下这个“确定”按钮来关闭我的应用程序，但是 FormClosing、FormClosed 事件没有被触发，最令人担忧的是，表单的 Dispose() 方法也没有被调用。这使得清理线程和其他资源之类的东西变得非常困难。

现在我可以强制用户使用我自己的“退出”按钮，这些方法都会按我的预期执行。

**问题**：为什么Windows Mobile 应用程序中的“确定”按钮会在绕过我提到的方法时关闭应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:55:32.420

`FormClosing`当您为和事件编写代码时`FormClosed`，您是否记得将实际表单连接起来以使用它们？

我有几个我维护的 Windows Mobile 应用程序，它们调用我为它们创建的方法。

我经常忘记设置控件以使用我为它们编写的代码，所以这是我想到的第一件事。

**编辑：**我不使用 Microsoft 的`OK`按钮，而是使用具有 EXIT 菜单项的菜单。

![图形用户界面中的 Wm5](../Images/cb1a5f04b15c97b35c30144dafa1ce99.png)

`Program.cs`在我的主程序执行之前，我还通过 P/Invoking 文件中的“coredll”文件来关闭软输入面板 (SIP) 和任务栏。

这可能是您的解决方案。如果是这样，这应该是我使用的所有代码。请务必对其进行测试，如果缺少某些内容，请告诉我，我会更新它。

```
const string COREDLL = "coredll.dll";

[DllImport(COREDLL, EntryPoint = "FindWindowW", SetLastError = true)]
public static extern IntPtr FindWindowCE(string lpClassName, string lpWindowName);

[DllImport(COREDLL, SetLastError = true)]
[return: MarshalAs(UnmanagedType.Bool)]
public static extern bool SetWindowPos(IntPtr hWnd, IntPtr hWndInsertAfter, int x, int y, int cx, int cy, uint uFlags);

private static Form1 objForm = null;
private static IntPtr _taskBar = IntPtr.Zero;
private static IntPtr _sipButton = IntPtr.Zero;

[MTAThread]
static void Main() {
  ShowWindowsMenu(false);
  try {
    objForm = new Form1();
    Application.Run(objForm);
  } catch (Exception err) {
    objForm.DisableTimer();
    if (!String.IsNullOrEmpty(err.Message)) {
      ErrorWrapper("AcpWM5 Form (Program)", err);
    }
  } finally {
    ShowWindowsMenu(true); // turns the menu back on
  }
}

private static void ShowWindowsMenu(bool enable) {
  try {
    if (enable) {
      if (_taskBar != IntPtr.Zero) {
        SetWindowPos(_taskBar, IntPtr.Zero, 0, 0, 240, 26, (int)WindowPosition.SWP_SHOWWINDOW); // display the start bar
      }
    } else {
      _taskBar = FindWindowCE("HHTaskBar", null); // Find the handle to the Start Bar
      if (_taskBar != IntPtr.Zero) { // If the handle is found then hide the start bar
        SetWindowPos(_taskBar, IntPtr.Zero, 0, 0, 0, 0, (int)WindowPosition.SWP_HIDEWINDOW); // Hide the start bar
      }
    }
  } catch (Exception err) {
    ErrorWrapper(enable ? "Show Start" : "Hide Start", err);
  }
  try {
    if (enable) {
      if (_sipButton != IntPtr.Zero) { // If the handle is found then hide the start bar
        SetWindowPos(_sipButton, IntPtr.Zero, 0, 0, 240, 26, (int)WindowPosition.SWP_SHOWWINDOW); // display the start bar
      }
    } else {
      _sipButton = FindWindowCE("MS_SIPBUTTON", "MS_SIPBUTTON");
      if (_sipButton != IntPtr.Zero) { // If the handle is found then hide the start bar
        SetWindowPos(_sipButton, IntPtr.Zero, 0, 0, 0, 0, (int)WindowPosition.SWP_HIDEWINDOW); // Hide the start bar
      }
    }
  } catch (Exception err) {
    ErrorWrapper(enable ? "Show SIP" : "Hide SIP", err);
  }
} 
```

# java - 在 NetBeans IDE 上将组件添加到调色板

> ID：11200391
> 
> 赞同：2
> 
> 时间：2012-06-26T03:26:46.507
> 
> 标签：java, swing, netbeans, netbeans-platform, jcalendar

我正在查看使用 NetBeans IDE 创建 Swing UI 应用程序的 NetBeans 平台。

我正在尝试将 jCalendar 组件放入调色板并放到我的窗口中。问题是，如果我试图将它拖到表单上，我会收到一个错误，说它不包含在我的模块上。

![在此处输入图像描述](../Images/616432fcd7e03baf0707d6ed3703cb26.png)

所以我认为没问题，我会添加它，但是，即使它在调色板中并且将其添加到那里涉及将其创建为库，当我​​尝试转到项目属性/库下的添加依赖项时，它不在可供选择的库列表！

![在此处输入图像描述](../Images/14fccbbac6d73b8525dcc2fcb123113d.png)

该项目是一个 NetBeans 模块，当我在常规 java 项目中创建它时，我可以在列表中找到它。我也可以在库管理器中看到它，但在 NetBeans 模块的属性中看不到。

![在此处输入图像描述](../Images/c0f489de6b0eabf824cacdf98a5affbe.png)

任何想法为什么我不能在这里添加这个库？

PS 我试图使用本教程将这个选择器放到我的调色板上。我认为不同之处在于，他的项目不是 NetBeans 平台吗？ [http://greenxgene.blogspot.co.uk/2012/04/how-to-use-jcalendar-date-picker-in.html](http://greenxgene.blogspot.co.uk/2012/04/how-to-use-jcalendar-date-picker-in.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T13:01:52.663

我认为问题的根源是您需要创建一个“库包装模块”

这将包装您的 jCalendar jar 并从中创建一个 NetBeans 模块。

![新建项目对话框](../Images/eb21877ce732cee5c05001391d7aaf2a.png)

之后，您应该能够将该项目添加到您的表单中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-09T17:04:16.960

有一种比编写包装器更简单的方法。

1.  去`Tools -> Palette -> Swing / AWT Components.`

2.  创建名为的新类别`JCalender`

3.  从 JAR 中点击添加，然后按照简单的步骤进行操作。

就这样。你会看到这个甜蜜的景色：

[托盘中的 JCalender](http://i.stack.imgur.com/wG3Yx.jpg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T09:08:11.103

要将您的库添加到库调色板，请执行以下操作：

*   转到工具/库
*   按新图书馆
*   设置库名称并选择类库作为库类型
*   按下 Add JAR/Folder 按钮并添加将形成您的库的所有 jar（也使用其他选项卡添加源和 java 文档）
*   按确定，你就完成了

如果您想使用该库进行 Netbeans 平台开发，请按照 Tim 所说的进行操作。

# c# - Ajax 自动完成代码不起作用（使用数据库）

> ID：11200394
> 
> 赞同：0
> 
> 时间：2012-06-26T03:27:10.213
> 
> 标签：c#, asp.net

我在 Asp.net ( C# ) 中编写了一个简单的 ajax 自动完成代码

这是代码

**ASPX**

```
<asp:TextBox ID="TextBox1" runat="server" Height="21px" Width="80px"></asp:TextBox>
<asp:AutoCompleteExtender ID="TextBox1_AutoCompleteExtender" runat="server" MinimumPrefixLength="1" ServiceMethod="GetCompletionList" TargetControlID="TextBox1" UseContextKey="True"></asp:AutoCompleteExtender> 
```

**代码隐藏**

```
string connString = ConfigurationManager.ConnectionStrings["Station"].ToString();
string selectString = "SELECT *from Station";

List<String> CustList = new List<string>(count);
using (SqlConnection sqlConn = new SqlConnection(connString))
{
    sqlConn.Open();

    using (SqlCommand sqlCmd = new SqlCommand(selectString, sqlConn))
    {
        SqlDataReader reader = sqlCmd.ExecuteReader();
        while (reader.Read())
            CustList.Add(reader["DBRT"].ToString());//DBRT is the Column name

    }
}
return (CustList.ToArray()); 
```

当我执行并运行程序时，什么也没有发生。我不知道出了什么问题。请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T03:41:31.277

在返回部分修改您的代码

```
return Custlist; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T04:13:19.170

确保方法上有这两个属性：

```
[System.Web.Services.WebMethod]
[System.Web.Script.Services.ScriptMethod]
public string[] GetCompletionList................{} 
```

编辑：我在您的代码中注意到的几件事： `string selectString = "SELECT *from Station";`是错误的，应该是`SELECT * from`（缺少 * 和 from 之间的空格）。

此外，您只需要选择那些以您的方法接收的前缀字符串值开头的名称。您的方法签名应该是：

```
[System.Web.Services.WebMethodAttribute(), System.Web.Script.Services.ScriptMethodAttribute()]  
public static string[] GetCompletionList(string prefixText, int count, string contextKey) { 
```

prefixText 是您想在数据库中查找的内容。您的选择查询应该是：

```
string selectString = "SELECT * from Station where @Name like"; 
```

然后在定义命令后使用： cmd.Parameters.AddWithValue(NAME, prefixText + "%");

这将根据从文本框中输入的值从表中选择值。它类似于： `Select * from station where Name like 'some%';`

另外，我建议您使用[Top](http://blog.sqlauthority.com/2008/03/02/sql-server-how-to-retrieve-top-and-bottom-rows-together-using-t-sql/)关键字限制结果，因为该表可能包含太多行，并且您的 AutoComplete 扩展程序将无法按预期执行。

# ruby-on-rails - MapReduce 与在 Ruby 中处理数据？

> ID：11200395
> 
> 赞同：0
> 
> 时间：2012-06-26T03:27:20.620
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mapreduce

根据[本文](http://bit.ly/MwKxl8)和[本文](http://bit.ly/Mxp60x)，显然 MapReduce 查询是在 MongoDB 中可以做的最慢的事情之一。

1.  如果数据集很大，那么执行 MapReduce 而不是将整个数据集发送到客户端并在那里进行处理不是更好吗？

2.  MapReduce 查询是否会锁定数据库并因此阻止它响应其他请求？

3.  我发现 MapReduce 非常合乎逻辑且易于理解，而 2.1 版中的[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)似乎有点压倒性！这是 MongoDB 对没有高性能 MapReduce 设施的回应，因此建议完全放弃 MapReduce？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T04:45:59.647

1.  取决于您对“大”的定义，但我仍然会选择运行 map-reduce（在辅助服务器上，这样主服务器不会被阻塞）

2.  Map-reduce 作业需要大量的短期锁。

    2.1。他们在读取数据时获取读取锁，这不会阻塞任何东西。

    2.2\. 他们在写入数据（临时或最终集合）时使用写锁。这会阻止其他操作。

    2.3\. 他们在需要执行 javascript 时使用 JS 锁。他们一直在执行，因为 map 和 reduce 函数在 javascript 中。这是 map 阶段的一个典型序列：“获取读锁，从输入集合中获取文档，释放读锁，获取 js 锁，将 map 函数应用于该文档，释放 js 锁，获取写锁，将条目写入临时集合，释放写锁”。

3.  是的，map-reduce 的基本思想很简单。但我发现聚合管道很简单。也许更简单。“获取此数据，对其应用此转换数组，我将获取结果”。还有什么比这更简单的？

# php - 如何在 PHP 4.3.8 上启用 SOAP

> ID：11200397
> 
> 赞同：0
> 
> 时间：2012-06-26T03:27:57.743
> 
> 标签：php, php4

**当前 PHP 版本 4.3.8**

快速提问：只是想知道我是否可以在 php.ini 下启用soap文件。因为目前它向我抛出了这个错误消息：

```
Fatal error: Cannot instantiate non-existent class: soapclient in /var/www/html/xxx on line 78 
```

我认为这是因为 SOAP 被禁用，因为当我执行 phpinfo() 时，它也没有列出。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T23:58:05.437

找到的解决方案只是得到 nusoap 并且工作正常

# css - z-index 问题：svg 元素不应该出现在画布元素后面

> ID：11200403
> 
> 赞同：0
> 
> 时间：2012-06-26T03:28:41.023
> 
> 标签：css, html, svg, html5-canvas, z-order

在过去的几个小时里，我一直在尝试制作《黑暗骑士归来》（带有闪电的那个）封面的 HTML5 版本。

我已经完成了，但我制作的 svg 蝙蝠侠拒绝出现在画布前！

有问题的页面位于：[http ://scaryg.nom.es/playthings/lightningbadsvg](http://scaryg.nom.es/playthings/lightningbadsvg)

我已经看过了，svg 元素似乎正在定位正确的 css 规则，并且我尝试在初始化过程中将画布重置为正确的 z-index（以及在样式中设置为正确的 z-index床单）。

一切都在一页上（甚至是svg），我很难过。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T04:11:42.710

您的样式被应用于`svg`：

```
position:absolute: top:30%; 
```

注意后面的冒号而不是分号`absolute`。解决这个问题，蝙蝠侠就会出现在前面。

尝试使用开发人员工具或 Firebug 等工具来检测这些类型的问题。

# iphone - 如何获取存储在设备中的所有图像并将它们显示为 iPhone sdk 中的图库

> ID：11200404
> 
> 赞同：1
> 
> 时间：2012-06-26T03:28:48.040
> 
> 标签：iphone, objective-c, ios

我想获取存储在设备中的所有图像并将它们显示为我的 iPhone 应用程序中的图库。UIImagePickerController 在缩略图视图中显示所有照片，在选择每张照片时，我们只获取该特定选定图像的数据，而不是我想一次获取所有照片并将它们显示为图库。这可能吗，如果可以，请告诉我该怎么做。AssetLibrary 有什么用？它对我需要实现的目标有帮助吗？如果是，请告诉我如何使用 AssetLibrary 实现这一目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T04:08:45.160

[ALAssetsLibrary](http://developer.apple.com/library/ios/#DOCUMENTATION/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html)的一个实例提供对照片应用程序控制下的视频和照片的访问。

资料库包括“已保存照片”相册中的照片、来自 iTunes 的照片以及直接导入设备的照片。您可以使用它来检索所有资产组的列表，并将图像和视频保存到“已保存的照片”相册中。

[ELCImagePickerController](https://github.com/elc/ELCImagePickerController)是一个示例项目，用于获取 iPhone 相册中的所有照片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-24T06:22:24.083

您可以使用资产库从设备中获取所有照片。我在我的应用程序中实现了这个

```
-(void)getAllPhotos{
   NSArray  *imageArray=[[NSArray alloc] init];
   NSMutableArray *mutableArray =[[NSMutableArray alloc]init];
    NSMutableArray* assetURLDictionaries = [[NSMutableArray alloc] init];

   ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];

    void (^assetEnumerator)( ALAsset *, NSUInteger, BOOL *) = ^(ALAsset *result, NSUInteger index, BOOL *stop) {
        if(result != nil) {
            if([[result valueForProperty:ALAssetPropertyType] isEqualToString:ALAssetTypePhoto]) {
                [assetURLDictionaries addObject:[result valueForProperty:ALAssetPropertyURLs]];
               // NSLog(@"assestlibrarymurari%@",assetURLDictionaries);

                NSURL *url= (NSURL*) [[result defaultRepresentation]url];

                [library assetForURL:url
                         resultBlock:^(ALAsset *asset) {
                             UIImage *img = [UIImage imageWithCGImage:[[asset defaultRepresentation] fullScreenImage]];
                             if(img){
                                 [mutableArray addObject:img];
                             }
//                                 [mutableArray addObject:[UIImage imageWithCGImage:[[asset defaultRepresentation] fullScreenImage]]];

                             if ([mutableArray count]==count)
                             {
                                 imageArray=[[NSArray alloc] initWithArray:mutableArray];
                                 [self allPhotosCollected:imageArray];
                             }
                         }
                        failureBlock:^(NSError *error){ NSLog(@"operation was not successfull!"); } ];

            }
        }
    };

    NSMutableArray *assetGroups = [[NSMutableArray alloc] init];

    void (^ assetGroupEnumerator) ( ALAssetsGroup *, BOOL *)= ^(ALAssetsGroup *group, BOOL *stop) {
        if(group != nil) {
            [group enumerateAssetsUsingBlock:assetEnumerator];
            [assetGroups addObject:group];
            NSLog(@"AssetGroup%@",assetGroups);
            count=[group numberOfAssets];
        }
    };

    assetGroups = [[NSMutableArray alloc] init];

    [library enumerateGroupsWithTypes:ALAssetsGroupAll
                           usingBlock:assetGroupEnumerator
                         failureBlock:^(NSError *error) {NSLog(@"There is an error");}];

} 
```

在 ViewDidLoad 或您需要的地方调用此方法。我希望这能帮到您。

# jquery - 为什么我的下拉菜单在 ie 上的幻灯片后面？

> ID：11200407
> 
> 赞同：0
> 
> 时间：2012-06-26T03:29:28.683
> 
> 标签：jquery, html, css, z-index, cycle

我希望那里的人可以偷看我的页面，并可能建议我如何让我的下拉菜单显示在我的幻灯片顶部？将鼠标悬停在“质量”上以获取菜单，并注意它位于 png 后面。这在 IE 上显示出来，但在 Chrome/FF 中效果很好。

[http://molded.jasonscms.com/Home.aspx](http://molded.jasonscms.com/Home.aspx)

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T03:41:09.327

给父 div 比子 div 更高的 z-index 并使父 div 的 position:absolute 和子 div 的 position:absolute

像这样：

```
<div style="position: relative; z-index: 2">
    <div style="position:absolute;z-index: 1;">

    </div>
</div> 
```

顺便说一下，这个错误在 IE9+ 中不存在

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T03:49:47.403

关键部分是使菜单的父级 ( `<header>`) 具有比它的兄弟容器更高的 z-index，它是幻灯片的父级（您的横幅元素）。整个问题与 IE 如何处理绝对位置元素的 z-index 有关，除非明确设置，否则它会从页面顶部向下增加它们。

您不必以这种方式对菜单的内部元素做任何事情，主容器会处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T04:41:33.453

尝试一下这个： `#div{ background:#fff; //desired background color. You can also try transparent. opacity:0; }`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T15:30:32.147

这是由于我的浏览器处于兼容模式，我删除了它并且它呈现得很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-25T23:27:14.123

只需在你的 div 标签上添加属性——它对我有用 CSS：#iefix { position:relative; z-index:1000;}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-07T23:23:41.973

是的，这是兼容模式的问题，但您仍然应该知道有些人有意或无意地在兼容模式下运行。这就是为什么你仍然应该解决这个问题。

**给菜单以下样式的父 DIV：**

```
#parentDiv{position:relative; z-index:999;} 
```

它应该有一个技巧，但是 z-index 必须大于父 div 的任何其他子 div 的 z-index。

# python - 插入新元素时如何跟踪列表索引？

> ID：11200412
> 
> 赞同：-6
> 
> 时间：2012-06-26T03:30:06.730
> 
> 标签：python, list, insert, indexing

我有一个很大的清单，像这样：

```
['a', 'b', 'c', 'd', 'e', 'f', 'g', ...] 
```

我想使用字典来跟踪它的索引。字典看起来像这样：

```
{1:'a', 2:'b', 3:'c', 4:'d', 5:'e', 6:'f', 7:'g', ...} 
```

但随后我需要插入新元素。我希望插入点之后的列表元素的索引在插入时自动增加 1。有没有一种快速或传统的方法来做到这一点？我通常使用python，但其他形式的算法就可以了。

更新：请不要无缘无故地否决这个问题。我认为即使省略了一些上下文（为简单起见），问题本身也很清楚。我认为可以提供答案，而不必知道我为什么需要这样做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T03:32:16.647

为什么有一个 dict 将索引映射到值？这就是列表已经做的：

```
>>> x = ['a', 'b', 'c', 'd', 'e', 'f', 'g', ...]
>>> x[0]
'a'
>>> x[4]
'e' 
```

如果您修改列表，例如通过插入新值，则索引会自动正确。

您的 dict 和列表本身之间的唯一区别是列表是 0 索引的，而您的 dict 是 1 索引的（'a' 是 1）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T05:17:10.313

这是一个封装整数重新编号和基于 1 的索引的类。请参阅最后的示例，了解此类的实例如何模拟 dict 的接口，即使它本身不是 dict。

```
# define DEFAULT value that is very unlikely to be a list value
DEFAULT=object()

class IndexedList(object):
    def __init__(self, seq=None):
        self._seq = list(seq) if seq is not None else []
    def __contains__(self, key):
        if isinstance(key, int):
            return 1 <= key <= len(self._seq)
        else:
            return key in self._seq
    def __getitem__(self, index):
        return self._seq[index-1]
    def __setitem__(self, index, value):
        self._seq[index-1] = value
    def __str__(self):
        return str(self._seq)
        # or if you'd rather have it look like a dict
        # return "{%s}" % ', '.join("%d: '%s'" % (i,s) for i,s in self.iteritems())
    def iterkeys(self):
        i = 1
        while i <= len(self._seq):
            yield i
            i += 1
    def keys(self):
        return list(self.iterkeys())
    def itervalues(self):
        return iter(self._seq)
    def values(self):
        return list(self.itervalues())
    def iteritems(self):
        return enumerate(self._seq, start=1)
    def items(self):
        return list(self.iteritems())
    def insert(self, i, value):
        self._seq.insert(i-1, value)
    def pop(self, i, default=DEFAULT):
        if i in self:
            return self._seq.pop(i-1)
        else:
            if default is not DEFAULT:
                return default
            else:
                raise KeyError("%s not a valid key" % i)
    # everything else, just delegate to owned list object
    def __getattr__(self, attr):
        return getattr(self._seq, attr)

# make an instance of IndexedList; print items just like it was a dict
il = IndexedList("abcdefg")
print il
print il.items()
# Prints
# ['a', 'b', 'c', 'd', 'e', 'f', 'g']
# [(1, 'a'), (2, 'b'), (3, 'c'), (4, 'd'), (5, 'e'), (6, 'f'), (7, 'g')]
#   or if you choose to show dict-ish output
# {1: 'a', 2: 'b', 3: 'c', 4: 'd', 5: 'e', 6: 'f', 7: 'g'}
# [(1, 'a'), (2, 'b'), (3, 'c'), (4, 'd'), (5, 'e'), (6, 'f'), (7, 'g')]

# insert an item into the middle of the sequence, note that
# remaining items get incremented keys
il.insert(4,'x')
print il
print il.items()
# Prints
# ['a', 'b', 'c', 'x', 'd', 'e', 'f', 'g']
# [(1, 'a'), (2, 'b'), (3, 'c'), (4, 'x'), (5, 'd'), (6, 'e'), (7, 'f'), (8, 'g')]

# test dict.pop
print il.pop(3)
print il
print il.items()
# Prints
# c
# ['a', 'b', 'x', 'd', 'e', 'f', 'g']
# [(1, 'a'), (2, 'b'), (3, 'x'), (4, 'd'), (5, 'e'), (6, 'f'), (7, 'g')]

# test 'key in dict' behavior
print 0 in il
print 3 in il
print 100 in il
print il.keys()
print il.values()
# Prints
# False
# True
# False
# [1, 2, 3, 4, 5, 6, 7]
# ['a', 'b', 'x', 'd', 'e', 'f', 'g']

# so you can treat il directly as a dict, but if you really really need a dict
# object, make one using il.iteritems
ildict = dict(il.iteritems())
print ildict
# Prints
# {1: 'a', 2: 'b', 3: 'x', 4: 'd', 5: 'e', 6: 'f', 7: 'g'} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T05:07:50.553

您声明要使用索引来跟踪到其他列表的映射。这是一个大数据集，所以查找速度可能很重要（字典在这里有很大的优势）。

如果索引不是数据的绝对必要部分——而且只是一种方便的引用关系的方式——那么为什么要将事物存储在单独的列表中呢？您是否考虑过嵌套字典，以便将所有相关数据保存在一起？例如，

```
dataset = { 'a': { 'name':'Alice' , 'food':'pie' } , 'b': { 'name':'Bob' , 'food':'cake' , 'friend':'Eve' } }

>>> dataset['a']['food']
'pie' 
```

这更具可读性，并且字典为给定的任意数据块提供比大型列表更快的查找。但是，如果不了解您的目标，就很难推荐量身定制的解决方案。例如，了解是否所有数据都可以通过键引用（您总是在寻找“a”）或者您是否有时想要查找特定值（每个喜欢 pie 的人）都会有所帮助。

# java - 如何通过 jdbc 从数据流中将数据加载到 postgresql

> ID：11200415
> 
> 赞同：0
> 
> 时间：2012-06-26T03:30:36.007
> 
> 标签：java, postgresql

如何通过jdbc将数据流中的数据加载到postgresql中，我们将在内存中获得一个数据流或一个数组，有没有什么方法可以将流数据加载到postgresql中？使用插入太低效了。</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T03:54:26.307

您需要使用带有批量插入的准备好的语句。看一下页面： http: [//viralpatel.net/blogs/batch-insert-in-java-jdbc/](http://viralpatel.net/blogs/batch-insert-in-java-jdbc/)，它描述了这种方法的性能和安全优势。下面的代码来自该页面。

```
String sql = "insert into employee (name, city, phone) values (?, ?, ?)";
Connection connection = new getConnection();
PreparedStatement ps = connection.prepareStatement(sql);

final int batchSize = 1000;
int count = 0;

for (Employee employee: employees) {

    ps.setString(1, employee.getName());
    ps.setString(2, employee.getCity());
    ps.setString(3, employee.getPhone());
    ps.addBatch();

    if(++count % batchSize == 0) {
        ps.executeBatch();
    }
}
ps.executeBatch(); // insert remaining records
ps.close();
connection.close(); 
```

# database - 在生产中重构数据库的最佳实践？

> ID：11200416
> 
> 赞同：2
> 
> 时间：2012-06-26T03:30:38.067
> 
> 标签：database, refactoring, production-environment

我目前正在开展一个项目，我们当前版本的产品部署在多个客户站点。更多时候，我们不是在我们的开发/测试环境中测试和废弃（又名重构：）数据库设计。不可能跟踪数据库的每个增量更改以创建相应的“迁移文件”。现在，当我们对数据库设计（相对稳定）感到满意时，我们需要将生产数据库更新到当前状态。

我们在生产中的系统不能只发出一个`DROP/CREATE SCHEMA`命令来更新模式（想想会丢失的工作，包括我的：）所以我们要么编写 MySQL 转储，要么应用程序包装器来备份数据并重新输入它进入数据库。相当麻烦，尤其是当多个“客户端”不在同一个数据库版本时。为客户拥有的每个版本编写一个非常麻烦。

那么，您在生产环境中重构数据库时采用了哪些最佳实践，尤其是当您不能只删除该数据但需要重新输入数据并让系统在“停机”后无缝继续运行时？

如果有任何用途，后端是 Java/Restlet 和 MySQL

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T13:42:22.377

您可以使用[Refactoring Databases](https://rads.stackoverflow.com/amzn/click/com/0321293533)一书中描述的数据库重构模式，并查看数据库重构网站[http://databaserefactoring.com/](http://databaserefactoring.com/)。使用迁移方法，您无需删除和创建数据库。[dbdeploy]、[dbmaintain]、[ibatis migrator]、[liquibase] 等工具可以在这里为您提供帮助。

# c# - 如果 catch 块包含 continue 语句，finally 块何时执行？

> ID：11200417
> 
> 赞同：5
> 
> 时间：2012-06-26T03:30:45.683
> 
> 标签：c#, control-flow, try-catch-finally

我有一些看起来像这样的代码：

```
foreach(var obj in collection)
{
   try
   {
      // WriteToFile returns the name of the written file
      string filename = WriteToFile(obj); 
      SendFileToExternalAPI(filename);
   }
   catch ( ArbitraryType1Exception e )
   {
      LogError(e);
      continue;
   }
   ...
   catch ( ArbitaryTypeNException e )
   {
      LogError(e);
      continue;
   }
   finally
   {
      try
      {
         File.Delete(filename);
      }
      catch (Exception e)
      {
         LogError(e);
      }
   }
} 
```

目标是尝试为集合中的每个对象写出一个临时文件，尝试将该文件加载到需要文件名的外部 API 中，然后在完成后清理临时文件。如果在将文件写入磁盘或将其加载到外部 API 时发生错误，我只想记录错误并转到下一个对象；我不能问用户该怎么做。

当您在 catch 处理程序中有 continue 语句时，我有点不确定 finally 块的时间是如何工作的。无论 try 块中是否引发异常，此代码是否会（尝试）删除*正确的文件？*或者 catch 语句中的 continue 是否在 finally 块运行之前生效？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-26T03:41:30.890

将其视为带有可选捕获表达式的 try/finally 块。代码中的两个 continue 语句都会将执行堆栈从 catch 中弹出，这会将执行放在 finally 块中，然后再允许循环继续。任何时候有一个 try/finally 块，finally 都会被执行。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-26T03:33:34.560

无论是否抛出异常，都会执行您的 finally 块。因此，您的 finally 块将始终被执行。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-26T03:37:28.057

将`finally`作为完成前的最后一步执行`try`。因此它会在正确的时间发生。为了更容易概念化，想想如果所有`continue`语句都被替换会发生什么`return`-`finally`仍然会执行。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-26T03:41:26.477

来自[C# 语言规范](http://msdn.microsoft.com/en-us/library/ms228593.aspx)：

> 8.9.2 continue 语句
> 
> ...
> 
> continue 语句不能退出 finally 块（第 8.10 节）。当 continue 语句出现在 finally 块中时， continue 语句的目标必须在同一个 finally 块中；否则会发生编译时错误。
> 
> continue 语句执行如下：
> 
> · 如果 continue 语句退出一个或多个带有相关 finally 块的 try 块，则控制最初转移到最里面的 try 语句的 finally 块。当控制到达 finally 块的终点时，控制将转移到下一个封闭 try 语句的 finally 块。重复此过程，直到所有介入的 try 语句的 finally 块都已执行。
> 
> ...

# php - 显示每个用户的数据

> ID：11200420
> 
> 赞同：1
> 
> 时间：2012-06-26T03:31:05.107
> 
> 标签：php, sql

我想显示每个用户的数据。但它显示每个表和每个用户的所有数据。所以我想要实现的是为该用户显示表上的所有数据这是我的代码

```
<?php foreach ($employee as $emp) { ?>

  <table id="employee-content">
     <h3 class="color-orange"><?php echo $emp['members']['username']; ?></h3>
        <tr>
          <td><p class="personal-management-content"><?php echo $emp['posts']['title']; ?></p></td>
          <td><p class="personal-management-content padding-left50" class="padding-left50"><?php echo $emp['posts']['title']; ?></p></td>
          <td><p class="personal-management-content padding-left50" class="padding-left50"><?php echo $emp['posts']['deadline']; ?></p></td>
        </tr>

<?php } ?>' 
```

这是 $employee 的 sql 查询

```
* on controller 
   public function employee_management() {
        $posts = $this->Post->getPostByMember();
        $this->set("employee", $posts);
    }

* on model
    public function getPostByMember() {
        $post = "SELECT username, content, deadline, title FROM members INNER JOIN posts ON posts.member_id=members.id";
//        debug($user);
        $con = $this->getDataSource();
        $get = $con->fetchAll($post);
//        debug($get);
        return $get;
    } 
```

和 print_r $employee

```
Array (
 [0] => Array (
   [members] => Array (
     [username] => admin )
   [posts] => Array (
     [content] => asdsadsad
     [deadline] => 2012-06-01
     [title] => sad ) ) 
 [1] => Array (
   [members] => Array (
     [username] => admin )
   [posts] => Array (
     [content] => asd
     [deadline] => 2012-06-20
     [title] => sad ) ) 
 [2] => Array (
   [members] => Array (
     [username] => admin )
   [posts] => Array (
     [content] => dasdw2
     [deadline] => 2012-06-19
     [title] => sdas ) ) 
 [3] => Array (
   [members] => Array (
     [username] => guest )
   [posts] => Array (
     [content] => s
     [deadline] => 2012-06-08
     [title] => wara ) ) 
```

输出是示例屏幕截图 [http://i46.tinypic.com/209n56s.jpg](http://i46.tinypic.com/209n56s.jpg)

所以我想要实现的是例如用户“管理员”他的所有标题、描述、截止日期将显示在单个框或 . 其他用户也是如此。

请帮助提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T13:56:15.730

所以...看起来您的数据库结果当前的结构如下：

*   结果 1
    *   用户名 1
    *   邮政
*   结果 2
    *   用户名 1
    *   邮政
*   结果 3
    *   用户名 2

等等，你希望你的显示器看起来像：

*   用户名 1
    *   邮政
    *   邮政
*   用户名 2
    *   邮政

在我看来，实现你想要的最简单的方法是从你的 SELECT 的结果中创建一个新数组。

```
<?php

$posts_by_emp=array();
foreach ($employee as $emp) {
  $posts_by_emp[$emp['members']['username']][]=array(
    'title' => $emp['posts']['title'];
    'descr' => $emp['posts']['title'];
    'deadline' => $emp['posts']['deadline']
  );
}

$hfmt = "<tr>\n    <th colspan='3' class='color-orange'>%s</th>\n  </tr>";
$bfmt = "<tr>\n"
      . "    <td class='personal-management-content'>%s</td>\n"
      . "    <td class='personal-management-content padding-left50'>%s</td>\n"
      . "    <td class='personal-management-content padding-left50'>%s</td>\n"
      . "  </tr>";

print "  <table id='employee-content'>";
foreach ($posts_by_emp as $username => $items) {
  // Print header
  printf($hfmt, $username);
  foreach ($items as $item) {
    // Print post
    printf($bfmt, $item['title'], $item['descr'], $item['deadline']);
  }
}
print "</table>\n"; 
```

这当然是未经测试的，因为我没有你的数据。根据您的数据库的结构，您可以通过创建一个更容易解析的不同 SQL 查询来使用更少的 PHP 来做到这一点。

# javascript - 使用 javascript (Appcelerator) 的 github 基本身份验证

> ID：11200422
> 
> 赞同：0
> 
> 时间：2012-06-26T03:31:16.763
> 
> 标签：javascript, appcelerator, github-api

我的问题是我相信我已经正确构建了请求，但是我得到 [400 {"message":"Problems parsing JSON"}]

这是我的代码：

```
var xhr = Ti.Network.createHTTPClient({
        onload : function() {
             Ti.API.debug(this.responseText);

            json = JSON.parse(this.responseText);

            callback(json);
        },
        onerror : function(e) {
            alert('error!');
            Ti.API.info(e.error + " " + this.status + " " + this.responseText);
        }
    });

    xhr.validatesSecureCertificate = true;
    xhr.open("POST", "https://api.github.com/authorizations");
    xhr.setTimeout(10000);
    authstr = 'Basic ' + Titanium.Utils.base64encode(User.username + ':' + User.password);
    xhr.setRequestHeader('Authorization', authstr);
    xhr.send({username: User.username, password: User.password}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T03:44:08.437

我只是错过了 JSON.stringify 方法......在我的身体上：P。谢谢！

# python - sre.findall() 解析网页

> ID：11200424
> 
> 赞同：-2
> 
> 时间：2012-06-26T03:31:31.660
> 
> 标签：python, parsing, findall

我在 Python 中使用 urllib2 和 sre 来解析来自 aprs.fi 的数据，因此我可以在我正在处理的一些实时高海拔气球代码中使用天气数据。解析代码非常简单：

```
import urllib2
import sre

APRStracking = urllib2.urlopen( "http://api.aprs.fi/api/get?name=KD8REX&what=loc&apikey=42457.M4AFa3hdkXG31&format=xml" )

APRSxml = APRStracking.read()

latitude = sre.findall( '<la.*>(.*)</la.*>', APRSxml )
print latitude 
```

我试图解析的数据是一个 XML，它看起来像：

```
<xml>
   <command>get</command>
   <result>ok</result>
   <what>loc</what>
   <found>1</found>
   <entries>
      <entry>
         <name>KD8REX</name>
         <type>l</type>
         <time>1339339410</time>
         <lasttime>1339339410</lasttime>
         <lat>41.95550</lat>
         <lng>-83.65567</lng>
         <altitude>2204.62</altitude>
         <course>15</course>
         <speed>15</speed>
         <symbol>/O</symbol>
         <srccall>KD8REX</srccall>
         <dstcall>APT311</dstcall>
         <status>UofM H.A.S. - Go Blue!</status>
         <status_lasttime>1339339600</status_lasttime>
         <path>WIDE1-1,WIDE3-3,qAR,W8SGZ</path>
      </entry>
   </entries>
</xml> 
```

我对 Python 不是很熟悉，但我对 ser.findall() 的理解是，它通过 APRSxml 查找与正则表达式匹配的任何字符串，然后将括号之间的内容附加到列表“纬度”中。所以，在这个例子中，匹配正则表达式的两个值是“lasttime”和“lat”。但是，当我运行此代码时，它只输出`<lat>`值，而不是`<lasttime>`. 坦率地说，这就是我真正需要的代码才能工作，但出于好奇，如果有人能告诉我为什么它没有按预期运行，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T04:18:41.743

查看`form`参数，我注意到您可以指定`form=xml`. 我将其更改为`json`并查看，您得到了 JSON！

```
{
  "command":"get",
  "result":"ok",
  "what":"loc",
  "found":1,
  "entries":[
    {
      "name":"KD8REX",
      "type":"l",
      "time":"1339339410",
      "lasttime":"1339339410",
      "lat":"41.95550",
      "lng":"-83.65567",
      "altitude":"2204.62",
      "course":"15",
      "speed":"15",
      "symbol":"\/O",
      "srccall":"KD8REX",
      "dstcall":"APT311",
      "status":"UofM H.A.S. - Go Blue!",
      "status_lasttime":"1339339600",
      "path":"WIDE1-1,WIDE3-3,qAR,W8SGZ"
    }
  ]
} 
```

很容易解析。比 XML 更简单：

```
import urllib2, json

url = 'http://api.aprs.fi/api/get?name=KD8REX&what=loc&apikey=42457.M4AFa3hdkXG31&format=json'
data = json.loads(urllib2.urlopen(url).read())

for entry in data['entries']:
  print 'Latitude:', entry['lat'] 
```

这真的很容易使用。`data`只是一个 Python 字典。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T05:27:45.240

Python 包含一个易于使用的 XML 解析器，非常适合此任务：

```
>>> import urllib2
>>> from xml.etree.ElementTree import parse
>>> APRStracking = urllib2.urlopen("http://api.aprs.fi/api/get?name=KD8REX&what=loc&apikey=42457.M4AFa3hdkXG31&format=xml")
>>> tree = parse(APRStracking)
>>> tree.find('entries/entry/lat').text
'41.95550' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T04:07:52.890

您需要将贪婪的星星更改为惰性匹配（*？）。

```
>>> re.findall('<la.*?>(.*?)</la.*?>', APRSxml )
['1339339410', '41.95550'] 
```

当前发生的是`<la.*>`匹配从第一次`la`到最后一次出现的所有内容`>`，仍然允许表达式的其余部分找到匹配项。所以，`<la.*>`匹配

```
<lasttime>1339339410</lasttime><lat> 
```

解释为什么不报告 lasttime 值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T04:08:17.303

试试这个非贪婪版本：

```
latitude = re.findall('<la.*?>(.*?)</la.*?', APRSxml)
>>> print latitude
['1339339410', '41.95550'] 
```

但是，如果您想要“纬度”，为什么不这样做呢？

```
latitude = re.findall('<lat>(.*?)<', APRSxml) 
```

# java - Java物理引擎？

> ID：11200428
> 
> 赞同：4
> 
> 时间：2012-06-26T03:31:51.623
> 
> 标签：java, physics

我一直在玩 Java 游戏开发，特别是 Slick 2d 游戏引擎。我有一个简单游戏的想法，但我需要一个物理引擎。

我一直在互联网上寻找一个有据可查的免费物理引擎。我从来没有使用过物理引擎，所以我正在寻找一些相对简单的东西，有很多例子和文档。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T03:35:50.153

Box2D 几乎是大多数游戏的标准 2d 物理库。这里有一个非常容易使用的 Java 端口：

[http://www.jbox2d.org/](http://www.jbox2d.org/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T03:35:50.537

[JBox2d](http://www.jbox2d.org/)呢？它是用 C++ 编写的更臭名昭著的 Box2D 的直接移植。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-25T04:58:01.237

For 2D and 100% java, [dyn4j](https://github.com/dyn4j/dyn4j) can be considerred.

# python - 我的变色龙模板如何接受来自金字塔框架的消息闪烁？

> ID：11200430
> 
> 赞同：6
> 
> 时间：2012-06-26T03:32:13.657
> 
> 标签：python, pyramid, chameleon, template-tal

我正在学习金字塔，似乎他们正试图让人们使用变色龙而不是 mako，所以我想我会给变色龙一个机会。到目前为止我喜欢它，我可以在模板中做一些基本的事情，比如 if 和 for 循环，但我不确定如何让消息闪烁出现。

在金字塔教程中，他们在[待办事项列表](http://docs.pylonsproject.org/projects/pyramid_tutorials/en/latest/single_file_tasks/single_file_tasks.html)中执行此操作，但在[wiki](http://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/tutorials/wiki2/index.html)示例中，他们没有。根据[有关会话的说明](http://docs.pylonsproject.org/projects/pyramid/en/1.0-branch/narr/sessions.html)并以 todolist 教程为例，我已经能够让我的应用程序创建消息，但我无法在我的模板中接收它们。简而言之，我想知道变色龙是否有相当于这个 mako 代码：

```
 % if request.session.peek_flash():
  <div id="flash">
    <% flash = request.session.pop_flash() %>
    % for message in flash:
    ${message}<br>
    % endfor
  </div>
  % endif 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T12:30:44.743

变色龙中的（未经测试的）等价物是：

```
<div id="flash" tal:condition="request.session.peek_flash()">
  <span tal:omit-tag="" 
        tal:repeat="message request.session.pop_flash()">
      ${message}<br>
  </span>
</div> 
```

该[`tal:omit-tag`属性](http://chameleon.repoze.org/docs/latest/reference.html#tal-omit-tag)是可选的；它从输出中删除`<span>`标签，因为它仅用作附加重复的虚拟标签。通过删除它，Chameleon 模板的输出将匹配 Mako 示例。

有关模板语言如何工作的介绍和完整规范，请参阅[Chameleon 文档。](http://chameleon.repoze.org/docs/latest/)

# c++ - 尝试创建命名管道失败并显示 ERROR_IS_SUBSTED

> ID：11200431
> 
> 赞同：0
> 
> 时间：2012-06-26T03:32:13.857
> 
> 标签：c++, visual-studio-2010, named-pipes, getlasterror

我从一个 msdn 博客中获取了这段代码：

```
#include <windows.h> 
#include <stdio.h>
#include <conio.h>
#include <tchar.h>

#define BUFSIZE 512

int _tmain(int argc, TCHAR *argv[]) 
{ 
   HANDLE hPipe; 
   LPTSTR lpvMessage=TEXT("Default message from client."); 
   TCHAR  chBuf[BUFSIZE]; 
   BOOL   fSuccess = FALSE; 
   DWORD  cbRead, cbToWrite, cbWritten, dwMode; 
   LPTSTR lpszPipename = TEXT("H:\\Users\\uname\\Documents\\fff.txt"); 

   if( argc > 1 )
      lpvMessage = argv[1];

// Try to open a named pipe; wait for it, if necessary. 

   while (1) 
   { 
      hPipe = CreateFile( 
         lpszPipename,   // pipe name 
         GENERIC_READ |  // read and write access 
         GENERIC_WRITE, 
         0,              // no sharing 
         NULL,           // default security attributes
         OPEN_ALWAYS,  // opens existing pipe 
         0,              // default attributes 
         NULL);          // no template file 

   // Break if the pipe handle is valid. 

      if (hPipe != INVALID_HANDLE_VALUE) 
         break; 

      // Exit if an error other than ERROR_PIPE_BUSY occurs. 

      if (GetLastError() != ERROR_PIPE_BUSY) 
      {
         _tprintf( TEXT("Could not open pipe. GLE=%d\n"), GetLastError() ); 
         return -1;
      }

      // All pipe instances are busy, so wait for 20 seconds. 

      if ( ! WaitNamedPipe(lpszPipename, 20000)) 
      { 
         printf("Could not open pipe: 20 second wait timed out."); 
         return -1;
      } 
   } 

// The pipe connected; change to message-read mode. 

   dwMode = PIPE_READMODE_MESSAGE; 
   fSuccess = SetNamedPipeHandleState( 
      hPipe,    // pipe handle 
      &dwMode,  // new pipe mode 
      NULL,     // don't set maximum bytes 
      NULL);    // don't set maximum time 
   if ( ! fSuccess) 
   {
      _tprintf( TEXT("SetNamedPipeHandleState failed. GLE=%d\n"), GetLastError() ); 
      return -1;
   }

// Send a message to the pipe server. 

   cbToWrite = (lstrlen(lpvMessage)+1)*sizeof(TCHAR);
   _tprintf( TEXT("Sending %d byte message: \"%s\"\n"), cbToWrite, lpvMessage); 

   fSuccess = WriteFile( 
      hPipe,                  // pipe handle 
      lpvMessage,             // message 
      cbToWrite,              // message length 
      &cbWritten,             // bytes written 
      NULL);                  // not overlapped 

   if ( ! fSuccess) 
   {
      _tprintf( TEXT("WriteFile to pipe failed. GLE=%d\n"), GetLastError() ); 
      return -1;
   }

   printf("\nMessage sent to server, receiving reply as follows:\n");

   do 
   { 
   // Read from the pipe. 

      fSuccess = ReadFile( 
         hPipe,    // pipe handle 
         chBuf,    // buffer to receive reply 
         BUFSIZE*sizeof(TCHAR),  // size of buffer 
         &cbRead,  // number of bytes read 
         NULL);    // not overlapped 

      if ( ! fSuccess && GetLastError() != ERROR_MORE_DATA )
         break; 

      _tprintf( TEXT("\"%s\"\n"), chBuf ); 
   } while ( ! fSuccess);  // repeat loop if ERROR_MORE_DATA 

   if ( ! fSuccess)
   {
      _tprintf( TEXT("ReadFile from pipe failed. GLE=%d\n"), GetLastError() );
      return -1;
   }

   printf("\n<End of message, press ENTER to terminate connection and exit>");
   _getch();

   CloseHandle(hPipe); 

   return 0; 
} 
```

我浏览了代码中使用的大部分函数的文档。我没有发现任何可能导致麻烦的操作。显然，在循环中打开文件是不应该存在的。但是当我编译代码（VS 2010 Ultimate）并运行它时，它失败并出现
**ERROR_IS_SUBSTED**错误。GetLastError 返回此错误的点在这里：

```
while (1) 
       { 
          hPipe = CreateFile( 
             lpszPipename,   // pipe name 
             GENERIC_READ |  // read and write access 
             GENERIC_WRITE, 
             0,              // no sharing 
             NULL,           // default security attributes
             OPEN_ALWAYS,  // opens existing pipe 
             0,              // default attributes 
             NULL);          // no template file 
```

我还是 Windows 编程新手，这些错误代码让我感到困惑。此错误的 [msdn](http://msdn.microsoft.com/en-us/library/cc231199%28v=prot.10%29.aspx)文档说，`An attempt was made to use a JOIN or SUBST command on a drive that has already been substituted.` 请来自社区的人

1.明确什么是ERROR_IS_SUBSTD？[msdn](http://msdn.microsoft.com/en-us/library/cc231199%28v=prot.10%29.aspx)给出的描述对我来说太神秘了。:(

2.为什么我会收到这个错误？

3.（有点跑题了）我错过了 strace 实用程序，它在我的编程生涯中一直是我跟踪/纠正此类错误的救星。我们在Windows中有类似的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T05:07:59.587

除非您的 H 盘是网络共享，否则该错误消息看起来像是胡说八道。但即使错误消息看起来像是胡说八道，您的管道名也是如此。

要创建命名管道，请参阅此处的 MSDN： [CreateNamedPipe](http://msdn.microsoft.com/en-us/library/aa365150%28VS.85%29.aspx)

管道名称必须类似于

```
"\\\\.\\pipe\\pipename" 
```

# delphi - Delphi：重命名无效文件夹

> ID：11200433
> 
> 赞同：12
> 
> 时间：2012-06-26T03:32:21.877
> 
> 标签：delphi, directory, file-rename

我有一个创建无效目录的应用程序...例如`c:\Program Files\somedirectory.` - 句点是目录名称的一部分。

现在，我已经尝试了我所知道的关于在 delphi 中重命名文件的所有方法。

*   重命名文件（文件 1，文件 2）
*   移动文件（文件 1，文件 2）
*   ETC...

我试过获取 Windows 短路径`ExtractShortPathName`，但这只是返回一个空字符串。（调用命令提示符：“RENAME ShortOldName NewName”）

现在我知道我可以在 cmd 中手动执行此操作，但我不打算花时间浏览所有文件并执行此操作；）

这是我的一些代码：

```
xshortname := ExtractFileName(ExtractShortPathName(ns + oldName));
  xNewName := newName;

  cmdTxt :=  PWideChar('/C cd ' + ns);
  cmdTxt2 := PWideChar(cmdTxt + '&&' + ' RENAME ' + xshortname + ' ' + #34 + xNewName + #34);
  ShellExecute(0, nil, 'cmd.exe', cmdTxt2, nil, SW_SHOWNORMAL); 
```

我知道 shellExecute 不是在这里使用的最佳方法。我只是想让臭臭的人工作。稍后我会担心优化和正确的 Delphi 编码。

所以我的问题是：有谁知道允许我重命名无效目录的函数？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-26T03:54:31.923

如果您以特殊方式传递文件夹的名称，则可以使用标准 Windows API 函数[MoveFile() ：](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365239%28v=vs.85%29.aspx)

```
MoveFile('\\?\D:\invalid_dir.', '\\?\D:\invalid_dir.fixed'); 
```

代替

```
MoveFile('D:\invalid_dir.', 'D:\invalid_dir.fixed'); 
```

可以在 MSDN 上的[“命名文件、路径和命名空间”](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247%28v=vs.85%29.aspx)主题下找到有关它的更多信息。请注意，它特别建议不要在文件名中放置尾随点。

# javascript - jQuery 全日历。默认为有事件的第一个月

> ID：11200435
> 
> 赞同：1
> 
> 时间：2012-06-26T03:32:42.177
> 
> 标签：javascript, jquery, fullcalendar

我正在使用下面的代码来初始化一个 jQuery FullCalendar。

但是，并非所有月份都有任何事件。我希望日历的初始月份视图是有事件的第一个月。

举个例子。目前是 6 月，在 8 月之前日历中没有任何事件，所以我希望日历的初始视图默认为 8 月而不是 6 月。

同样，如果 6 月有事件，我希望它默认为 6 月。

```
$('#fullCalendar').fullCalendar({
            selectable: true,
            selectHelper: true,
            header: {
                left: 'prev',
                center: 'title',
                right: 'next'
            },
            events: function(start, end, callback) {

                $.getJSON(jSONCalendarURL, {
                            token:jSONAPItoken,
                            productID: $('#fullCalendar').attr("data-id"),
                            startDate: $.fullCalendar.formatDate(start, 'yyyy-MM-dd'),
                            endDate: $.fullCalendar.formatDate(end, 'yyyy-MM-dd')
                        }, function(data){
                        var calevents = [];
                        $.each(data.response, function(index,item){
                            calDate = index;
                            child = item.Variations;
                            if (child.length > 0 ){
                                if (!$.isEmptyObject(child)){
                                    calPrice = child[0].Price;
                                    calID = child[0].ID;
                                    calAvailable = child[0].Available;
                                    calevents.push({
                                        'id': calID,
                                        'title': buildEventTitle(calAvailable,calDate.substring(calDate.length,calDate.length-2),child[0].Price, calID, child[0].RRP),
                                        'start': $.fullCalendar.parseDate(calDate),
                                        'end': $.fullCalendar.parseDate(calDate),
                                        'allDay': true
                                    });

                                }
                            }
                        });
                        callback(calevents);
                        highlightExisting();

                    }
                );
            },

            eventRender: function (event, element, view) {
                if (event.start.getMonth() != view.start.getMonth())
                    return false;
            },
            weekMode:'liquid'
        }); 
```

我想做的事情可以实现吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T04:26:02.290

绝对可以实现！您需要首先对事件数组进行排序并找到下一个注册的事件对象。然后您可以使用 .fullCalendar('gotoDate') 方法跳转到该日期。

像这样的东西：

```
function custom_sort(a, b) {
    return new Date(a.start).getTime() - new Date(b.start).getTime();
}

events_array.sort(custom_sort);

$('#calendar').fullCalendar('gotoDate', events_array[0].start); 
```

请参阅此[FIDDLE](http://jsfiddle.net/100thGear/YhEBx/)以获取有效的静态示例。

希望这可以帮助！

# php - PHP - intval() 的用途？

> ID：11200441
> 
> 赞同：1
> 
> 时间：2012-06-26T03:34:08.610
> 
> 标签：php, casting

确切地说，`intval()`函数以 10 为底计算的目的是什么？它不是与类型转换完全相同，只是更慢吗？在我所有的谷歌搜索中，我没有发现任何好处。我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T03:35:03.737

`intval()`允许您指定要转换的基础。

```
$decimal_value = intval("FF", 16) 
```

对于简单的 base-10 转换，没有理由使用`intval()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T03:35:48.407

`intval()`可以接受基本参数，但不能转换为 int。

# ios - 如何从 presentModalViewController 函数制作更小的 UIView？

> ID：11200445
> 
> 赞同：1
> 
> 时间：2012-06-26T03:35:04.403
> 
> 标签：ios, uiview, addsubview

我想问我是否想创建一个自定义 UIView 就像一个气泡弹出窗口，我可以使用 presentModalViewController 吗？

如何自定义尺寸？

如果没有，那我需要使用 addsubView 吗？但是controller还是之前那个，怎么从新创建的uiview中关闭呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:58:15.497

我可以自己解决。

我添加了一个新的 UIViewController，并由 BI 自定义它。并设置在几行以下，

```
controller.view.frame = CGRectMake(10, 30, controller.view.frame.size.width,controller.view.frame.size.height);
[self.view addSubview:controller.view];
[self addChildViewController:controller]; 
```

如果你想在下面删除它们，

```
UIView* subview = [self.view viewWithTag:STORE_VIEW_TAG];
[subview removeFromSuperview];
[self removeFromParentViewController]; 
```

# php - SQLSTATE[HY093]：找不到我缺少的东西，我需要一双全新的眼睛

> ID：11200447
> 
> 赞同：1
> 
> 时间：2012-06-26T03:35:28.367
> 
> 标签：php, pdo

不知道我在这里缺少什么，但我不断收到错误消息。

SQLSTATE[HY093]：参数号无效：参数未定义

```
$sth = $dbh->prepare("INSERT INTO time (student_id, super_id, d1-date, d2-date, d3-date, d4-date, d5-date, d1-hours, d2-hours, d3-hours, d4-hours, d5-hours) VALUES(:value-1,:value-2,:value-3,:value-4,:value-5,:value-6,:value-7,:value-8,:value-9,:value-10,:value-11,:value-12)");
    $pass = array
    (
        ':value-1'=>$user_id,
        ':value-2'=>$super_id,
        ':value-3'=>$data_array[0][0],
        ':value-4'=>$data_array[0][1],
        ':value-5'=>$data_array[0][2],
        ':value-6'=>$data_array[0][3],
        ':value-7'=>$data_array[0][4],
        ':value-8'=>$data_array[1][0],
        ':value-9'=>$data_array[1][1],
        ':value-10'=>$data_array[1][2],
        ':value-11'=>$data_array[1][3],
        ':value-12'=>$data_array[1][4]
    );
    $sth->execute($pass); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T03:52:20.493

您不能使用破折号作为参数名称的一部分（根据[这篇文章](http://news.php.net/php.cvs/46848,)，我认为这是为了保持与 Oracle 的兼容性）。

也许是这样的：

```
 $sth = $dbh->prepare("INSERT INTO time (student_id, super_id, d1-date, d2-date, d3-date, d4-date, d5-date, d1-hours, d2-hours, d3-hours, d4-hours, d5-hours) VALUES (:value1,:value2,:value3,:value4,:value5,:value6,:value7,:value8,:value9,:value10,:value11,:value12)");
    $pass = array
    (
        ':value1'=>$user_id,
        ':value2'=>$super_id,
        ':value3'=>$data_array[0][0],
        ':value4'=>$data_array[0][1],
        ':value5'=>$data_array[0][2],
        ':value6'=>$data_array[0][3],
        ':value7'=>$data_array[0][4],
        ':value8'=>$data_array[1][0],
        ':value9'=>$data_array[1][1],
        ':value10'=>$data_array[1][2],
        ':value11'=>$data_array[1][3],
        ':value12'=>$data_array[1][4]
    );
    $sth->execute($pass); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T03:52:39.553

使用`_`（下划线）代替连字符。

```
$sth = $dbh->prepare("INSERT INTO `time` (`student_id`, `super_id`, `d1-date`, `d2-date`, 
      `d3-date`, `d4-date`, `d5-date`, `d1-hours`, `d2-hours`, `d3-hours`, `d4-hours`, 
       `d5-hours`) 
       VALUES(:value_1,:value_2,:value_3,:value_4,:value_5,:value_6,:value_7,
       :value_8,:value_9,:value_10,:value_11,:value_12)"); 
```

# javascript - 按 utf-8 字节位置提取子字符串

> ID：11200451
> 
> 赞同：10
> 
> 时间：2012-06-26T03:35:58.223
> 
> 标签：javascript, string, utf-8, character-encoding, utf-16

我有一个字符串以及用于提取子字符串的开头和长度。两个位置（开始和长度）都基于原始 UTF8 字符串中的字节偏移量。

但是，有一个问题：

开始和长度以字节为单位，所以我不能使用“子字符串”。UTF8 字符串包含几个多字节字符。有没有一种超高效的方法来做到这一点？（我不需要解码字节......）

例子： var orig = '你好吗？'

s,e 可能是 3,3 以提取第二个字符（好）。我在找

```
var result = orig.substringBytes(3,3); 
```

帮助！

**更新 #1**在 C/C++ 中，我只是将其转换为字节数组，但不确定 javascript 中是否有等价物。顺便说一句，是的，我们可以将其解析为字节数组并将其解析回字符串，但似乎应该有一种快速的方法将其剪切到正确的位置。想象一下“orig”是 1000000 个字符，s = 6 个字节，l = 3 个字节。

**更新 #2**感谢 zerkms 有用的重定向，我最终得到了以下结果，它**不能**正常工作 - 适用于多字节，但对于单字节却搞砸了。

```
function substrBytes(str, start, length)
{
    var ch, startIx = 0, endIx = 0, re = '';
    for (var i = 0; 0 < str.length; i++)
    {
        startIx = endIx++;

        ch = str.charCodeAt(i);
        do {
            ch = ch >> 8;   // a better way may exist to measure ch len
            endIx++;
        }
        while (ch);

        if (endIx > start + length)
        {
            return re;
        }
        else if (startIx >= start)
        {
            re += str[i];
        }
    }
} 
```

**更新#3**我不认为改变字符代码真的有效。当正确答案是三个时，我正在读取两个字节......不知何故我总是忘记这一点。UTF8 和 UTF16 的代码点相同，但编码占用的字节数取决于编码！！！所以这不是正确的方法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-26T18:06:09.620

我玩得很开心。希望这可以帮助。

因为 Javascript 不允许对字符串进行直接字节访问，所以找到起始位置的唯一方法是前向扫描。

* * *

> **更新#3**我不认为改变字符代码真的有效。当正确答案是三个时，我正在读取两个字节......不知何故我总是忘记这一点。UTF8 和 UTF16 的代码点相同，但编码占用的字节数取决于编码！！！所以这不是正确的方法。

这是不正确的 - 实际上 javascript 中没有 UTF-8 字符串。根据 ECMAScript 262 规范，所有字符串 - 无论输入编码如何 - 都必须在内部存储为 UTF-16（“[sequence of] 16-bit unsigned integers”）。

考虑到这一点，8 位移位是正确的（但没有必要）。

假设您的字符存储为 3 字节序列是错误的……
**事实上，JS（ECMA-262）字符串中的*所有字符都是 16 位（2 字节）长。***

这可以通过手动将多字节字符转换为 utf-8 来解决，如下面的代码所示。

* * *

请参阅我的示例代码中解释的详细信息：

```
function encode_utf8( s )
{
  return unescape( encodeURIComponent( s ) );
}

function substr_utf8_bytes(str, startInBytes, lengthInBytes) {

   /* this function scans a multibyte string and returns a substring. 
    * arguments are start position and length, both defined in bytes.
    * 
    * this is tricky, because javascript only allows character level 
    * and not byte level access on strings. Also, all strings are stored
    * in utf-16 internally - so we need to convert characters to utf-8
    * to detect their length in utf-8 encoding.
    *
    * the startInBytes and lengthInBytes parameters are based on byte 
    * positions in a utf-8 encoded string.
    * in utf-8, for example: 
    *       "a" is 1 byte, 
            "ü" is 2 byte, 
       and  "你&quot; is 3 byte.
    *
    * NOTE:
    * according to ECMAScript 262 all strings are stored as a sequence
    * of 16-bit characters. so we need a encode_utf8() function to safely
    * detect the length our character would have in a utf8 representation.
    * 
    * http://www.ecma-international.org/publications/files/ecma-st/ECMA-262.pdf
    * see "4.3.16 String Value":
    * > Although each value usually represents a single 16-bit unit of 
    * > UTF-16 text, the language does not place any restrictions or 
    * > requirements on the values except that they be 16-bit unsigned 
    * > integers.
    */

    var resultStr = '';
    var startInChars = 0;

    // scan string forward to find index of first character
    // (convert start position in byte to start position in characters)

    for (bytePos = 0; bytePos < startInBytes; startInChars++) {

        // get numeric code of character (is >128 for multibyte character)
        // and increase "bytePos" for each byte of the character sequence

        ch = str.charCodeAt(startInChars);
        bytePos += (ch < 128) ? 1 : encode_utf8(str[startInChars]).length;
    }

    // now that we have the position of the starting character,
    // we can built the resulting substring

    // as we don't know the end position in chars yet, we start with a mix of
    // chars and bytes. we decrease "end" by the byte count of each selected 
    // character to end up in the right position
    end = startInChars + lengthInBytes - 1;

    for (n = startInChars; startInChars <= end; n++) {
        // get numeric code of character (is >128 for multibyte character)
        // and decrease "end" for each byte of the character sequence
        ch = str.charCodeAt(n);
        end -= (ch < 128) ? 1 : encode_utf8(str[n]).length;

        resultStr += str[n];
    }

    return resultStr;
}

var orig = 'abc你好吗？';

alert('res: ' + substr_utf8_bytes(orig, 0, 2)); // alerts: "ab"
alert('res: ' + substr_utf8_bytes(orig, 2, 1)); // alerts: "c"
alert('res: ' + substr_utf8_bytes(orig, 3, 3)); // alerts: "你&quot;
alert('res: ' + substr_utf8_bytes(orig, 6, 6)); // alerts: "好吗" 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-02T17:17:12.253

[@Kaii](https://stackoverflow.com/users/43959/kaii)的答案几乎是正确的，但其中有一个错误。它无法处理 Unicode 从 128 到 255 的字符。这是修改后的版本（只需将 256 更改为 128）：

```
function encode_utf8( s )
{
  return unescape( encodeURIComponent( s ) );
}

function substr_utf8_bytes(str, startInBytes, lengthInBytes) {

   /* this function scans a multibyte string and returns a substring. 
    * arguments are start position and length, both defined in bytes.
    * 
    * this is tricky, because javascript only allows character level 
    * and not byte level access on strings. Also, all strings are stored
    * in utf-16 internally - so we need to convert characters to utf-8
    * to detect their length in utf-8 encoding.
    *
    * the startInBytes and lengthInBytes parameters are based on byte 
    * positions in a utf-8 encoded string.
    * in utf-8, for example: 
    *       "a" is 1 byte, 
            "ü" is 2 byte, 
       and  "你" is 3 byte.
    *
    * NOTE:
    * according to ECMAScript 262 all strings are stored as a sequence
    * of 16-bit characters. so we need a encode_utf8() function to safely
    * detect the length our character would have in a utf8 representation.
    * 
    * http://www.ecma-international.org/publications/files/ecma-st/ECMA-262.pdf
    * see "4.3.16 String Value":
    * > Although each value usually represents a single 16-bit unit of 
    * > UTF-16 text, the language does not place any restrictions or 
    * > requirements on the values except that they be 16-bit unsigned 
    * > integers.
    */

    var resultStr = '';
    var startInChars = 0;

    // scan string forward to find index of first character
    // (convert start position in byte to start position in characters)

    for (bytePos = 0; bytePos < startInBytes; startInChars++) {

        // get numeric code of character (is >= 128 for multibyte character)
        // and increase "bytePos" for each byte of the character sequence

        ch = str.charCodeAt(startInChars);
        bytePos += (ch < 128) ? 1 : encode_utf8(str[startInChars]).length;
    }

    // now that we have the position of the starting character,
    // we can built the resulting substring

    // as we don't know the end position in chars yet, we start with a mix of
    // chars and bytes. we decrease "end" by the byte count of each selected 
    // character to end up in the right position
    end = startInChars + lengthInBytes - 1;

    for (n = startInChars; startInChars <= end; n++) {
        // get numeric code of character (is >= 128 for multibyte character)
        // and decrease "end" for each byte of the character sequence
        ch = str.charCodeAt(n);
        end -= (ch < 128) ? 1 : encode_utf8(str[n]).length;

        resultStr += str[n];
    }

    return resultStr;
}

var orig = 'abc你好吗？©';

alert('res: ' + substr_utf8_bytes(orig, 0, 2)); // alerts: "ab"
alert('res: ' + substr_utf8_bytes(orig, 2, 1)); // alerts: "c"
alert('res: ' + substr_utf8_bytes(orig, 3, 3)); // alerts: "你"
alert('res: ' + substr_utf8_bytes(orig, 6, 6)); // alerts: "好吗"
alert('res: ' + substr_utf8_bytes(orig, 15, 2)); // alerts: "©" 
```

顺便说一句，这是一个错误修复，它应该对有同样问题的人有用。为什么审稿人会因为修改“太多”或“太小”而拒绝我的编辑建议？[@Adam Eberlin](https://stackoverflow.com/users/927844/adam-eberlin) [@Kjuly](https://stackoverflow.com/users/904365/kjuly) [@Jasonw](https://stackoverflow.com/users/775849/jasonw)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T09:56:44.330

```
function substrBytes(str, start, length)
{
    var buf = new Buffer(str);
    return buf.slice(start, start+length).toString();
} 
```

AYB

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-11T12:06:55.407

对于 IE 用户，上述答案中的代码将输出`undefined`. 因为在 IE 中是不支持`str[n]`的，也就是说不能用字符串作为数组。您需要替换`str[n]`为`str.charAt(n)`. 代码应该是；

```
function encode_utf8( s ) {
  return unescape( encodeURIComponent( s ) );
}

function substr_utf8_bytes(str, startInBytes, lengthInBytes) {

    var resultStr = '';
    var startInChars = 0;

    for (bytePos = 0; bytePos < startInBytes; startInChars++) {
        ch = str.charCodeAt(startInChars);
        bytePos += (ch < 128) ? 1 : encode_utf8(str.charAt(startInChars)).length;
    }

    end = startInChars + lengthInBytes - 1;

    for (n = startInChars; startInChars <= end; n++) {
        ch = str.charCodeAt(n);
        end -= (ch < 128) ? 1 : encode_utf8(str.charAt(n)).length;

        resultStr += str.charAt(n);
    }

    return resultStr;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-07T03:37:26.283

也许用它来计算字节和示例。它计算你的字符是 2 个字节，而不是 3 个字节跟随@Kaii 的函数：

```
jQuery.byteLength = function(target) {
    try {
        var i = 0;
        var length = 0;
        var count = 0;
        var character = '';
        //
        target = jQuery.castString(target);
        length = target.length;
        //
        for (i = 0; i < length; i++) {
            // 1 文字を切り出し Unicode に変換
            character = target.charCodeAt(i);
            //
            // Unicode の半角 : 0x0 - 0x80, 0xf8f0, 0xff61 - 0xff9f, 0xf8f1 -
            // 0xf8f3
            if ((character >= 0x0 && character < 0x81)
                    || (character == 0xf8f0)
                    || (character > 0xff60 && character < 0xffa0)
                    || (character > 0xf8f0 && character < 0xf8f4)) {
                // 1 バイト文字
                count += 1;
            } else {
                // 2 バイト文字
                count += 2;
            }
        }
        //
        return (count);
    } catch (e) {
        jQuery.showErrorDetail(e, 'byteLength');
        return (0);
    }
};

for (var j = 1, len = value.length; j <= len; j++) {
    var slice = value.slice(0, j);
    var slength = $.byteLength(slice);
    if ( slength == 106 ) {
        $(this).val(slice);
        break;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-26T04:22:41.410

System.ArraySegment 很有用，但您需要使用数组输入、偏移量和索引器来构造函数。

# php - 尝试使用 PHP 在 WordPress 上创建热门帖子页面

> ID：11200455
> 
> 赞同：1
> 
> 时间：2012-06-26T03:36:44.573
> 
> 标签：php, wordpress, wordpress-theming

非常感谢以下信息： [不使用插件的 Wordpress 热门帖子，](https://stackoverflow.com/questions/9472602/wordpress-popular-posts-without-using-plugins)这极大地帮助我为我的 WordPress 网站整理了自己的热门帖子页面模板。但是，我认为我需要更改代码以使其表现更好，但不知道该怎么做。

新页面位于[http://sassyginger.com/most-popular-posts](http://sassyginger.com/most-popular-posts)。它显示了两个帖子（当它应该显示五个时），然后将它们都与“零视图”相关联，我知道这是不对的。

我对 PHP 很陌生，所以如果任何人都可以在如何调整[Wordpress 热门帖子而不使用插件](https://stackoverflow.com/questions/9472602/wordpress-popular-posts-without-using-plugins)代码来显示五个帖子并去掉不正确的 0 视图位，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:57:30.693

默认情况下，Wordpress 不跟踪帖子的视图，因此如果您不想使用插件，则需要为所有帖子创建一个自定义字段，其中包含视图。然后编写一个函数，该函数采用该值并将某人加载该页面的所有内容添加一个。（假设你把函数放在你的functions.php中）并从你的单一模板中调用它并发送postid。

函数可能看起来像这样：

```
function addPostView($postID) {
$views = 'post_views'; // post_views is the custom field name
$count = get_post_meta($postID, $views, true); // grab the value from that custom field

// Now we need to check that the value we just grabbed isn't blank, if it is we need to set it to 1, since it would be our first view on this post.
if($count==''){
    $count = 0;
    update_post_meta($postID, $views, '1');
}else{
    // else we can just add one to the number.
    $count++;
    update_post_meta($postID, $views, $count);
}
} 
```

在我们的单模板中，我们会在某处调用该函数，例如：

```
addPostView(get_the_ID()); 
```

然后问题二，你不能用操作符查询帖子，所以你不能只查询浏览量最高的五个帖子，所以你可能必须查询所有帖子，将视图自定义字段和帖子 ID 存储在一个数组中，然后对数组进行排序（使用 php 的排序函数）。现在你得到了每个帖子的 ID，并且在一个数组中发布了视图。因此，取前五个（或最后一个，取决于您的排序方式），您将获得查看次数最多的五个 postID。

```
//ordinary wp_query
$i = 0; // keeping track of our array
//while(post-> etc....
    global $post;
    $views = get_post_meta($post->ID, 'post_views', true); // Grab our value
    /* You could also use an object here */
    $postArray[$i][0] = $views; // set it in slot $i of our array
    $postArray[$i][1] = $post->ID; // and also set the postID in the same slot

    $i++;
//endwhile; 
```

对数组进行排序：

```
 rsort($postArray);
 $postArray = array_slice( $postArray, 0, 5 ); // grab only the first 5 values, which will be the ones with highest views. 
```

现在您需要进行第二次查询，您只需查询这些 ID（使用 'post__in' 选择器，然后您可以根据需要将它们循环出来。

请注意我没有尝试过这段代码，但我过去做过类似的事情。这可能不是最好的解决方案，但它会完成工作。查询所有帖子（如果你有很多帖子），只获取五个左右的帖子，这不是一个好习惯:)

# javascript - 我在输入什么元素？

> ID：11200458
> 
> 赞同：0
> 
> 时间：2012-06-26T03:37:14.557
> 
> 标签：javascript, jquery, html, css

在此页面上，当您键入时，哪个元素正在接收文本？

我需要获取元素的文本值，但似乎找不到。

[http://featuredfotografer.com/](http://featuredfotografer.com/)

如果有人可以向我展示如何使用 jQuery 获取这个特定的文本值，那将非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T03:43:05.140

`$(".CodeMirror-lines div:last").text();`

它不是一个单一的元素。它正在动态创建标签和缩进......但上面将返回最后一个内所有内容的文本值`div`，`.CodeMirror-lines`我相信这就是你所追求的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T03:44:16.803

```
$('.CodeMirror > div').find('textarea').val() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T03:46:20.387

如果你有一些像[萤火虫](http://getfirebug.com/)这样的工具，它会很容易找到这样的元素

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T03:47:00.477

使用 Chrome 的（很棒的）开发工具，我发现它是一个隐藏的`textarea`，然后它使用 div 和 spans 在一个单独的元素中动态设置颜色（**不在**textarea 中，因为你不能在正常的文本中设置样式`textarea`) 键入文本时：

![在此处输入图像描述](../Images/31b81f292571a08a8750d02f4bc6caee.png)

因此，您可以使用此代码来获取输入的文本：

```
$('#code').val(); 
```

希望有帮助！

# iphone - 苹果拒绝，因为应用内购买未实施恢复

> ID：11200460
> 
> 赞同：16
> 
> 时间：2012-06-26T03:37:21.893
> 
> 标签：iphone, objective-c, in-app-purchase, restore

我被 Apple 拒绝，并显示一条消息：

> ...此外，我们发现虽然您的应用提供可以恢复的应用内购买，但它不包括允许用户恢复之前购买的应用内购买所需的“恢复”功能，如 In-App Purchase Programming Guide 的恢复交易部分所述：
> 
> “...如果您的应用程序支持必须可恢复的产品类型，则您必须包含一个允许用户恢复这些购买的界面。此界面允许用户将产品添加到其他设备，或者，如果原始设备被擦除，则可以在原始设备上恢复交易。”
> 
> 要恢复以前购买的应用内购买产品，最好提供一个“恢复”按钮，并在用户点击“恢复”按钮时启动恢复过程。
> 
> 有关恢复交易和验证商店收据的更多信息，请参阅应用内购买编程指南。...

我找到了这个[页面](https://stackoverflow.com/questions/10975312/no-restore-button-for-in-app-purchase-causes-rejection)，我按照示例代码，但是在我打电话之后

```
- (void) checkPurchasedItems{
   [[SKPaymentQueue defaultQueue] restoreCompletedTransactions];
} 
```

另一位代表没有被解雇！

```
- (void) paymentQueueRestoreCompletedTransactionsFinished:(SKPaymentQueue *)queue 
```

它只会弹出一个警报视图，让您输入您的 Apple ID……但什么也没发生？

我设置了一个断点，但它不会像示例所说的那样停止。

关于我的代码有什么问题的任何想法？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-26T03:47:00.367

除了添加之外`restoreCompletedTransactions`，您还需要处理您的 iaps 是如何实际恢复给用户的，以及内容是如何提供给用户的。

基本上，您需要回忆您在用户最初购买商品时向他们提供商品的方式。

## [**这是一个很好的教程。**](http://nixsolutions.com/blog/development/iphone/in-app-purchase-tutorial/)

例如，这**就是**我在我的一个应用程序中恢复产品的方式。

## 恢复事务

```
- (void)restoreTransaction:(SKPaymentTransaction *)transaction
{
    isRestoring = YES;

    [self recordTransaction: transaction];

    /* This is where I provide the content to the user: */
    [self provideContent: transaction.originalTransaction.payment.productIdentifier];

    [[SKPaymentQueue defaultQueue] finishTransaction: transaction];
} 
```

## 交易完成

```
- (void)completeTransaction:(SKPaymentTransaction *)transaction
{
    [self recordTransaction: transaction];
    [self provideContent: transaction.payment.productIdentifier];
    [[SKPaymentQueue defaultQueue] finishTransaction: transaction];
} 
```

## 支付队列

```
- (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions
{
    for (SKPaymentTransaction *transaction in transactions)
    {
        switch (transaction.transactionState)
        {
            case SKPaymentTransactionStatePurchased:
                [self completeTransaction:transaction];
                break;
            case SKPaymentTransactionStateFailed:
                if (transaction.error.code == SKErrorPaymentCancelled) {
                    /// user has cancelled
                    [[NSNotificationCenter defaultCenter] postNotificationName:@"hideRestoring" object:nil];
                }
                [self failedTransaction:transaction];
                break;
            case SKPaymentTransactionStateRestored:
                [self restoreTransaction:transaction];
            default:
                break;
        }
    }
} 
```

## 提供内容

```
- (void)provideContent:(NSString *)productIdentifier
{
    int index;

    NSMutableDictionary * purchased = [NSMutableDictionary dictionaryWithContentsOfFile:EXTRAS_PATH];

    NSArray * availableProducts = [NSArray arrayWithContentsOfURL:[NSURL URLWithString:SCANNER_IN_APP_PURCHASES]];

    if ( isRestoring )
    {
        for ( index = 0; index < [availableProducts count]; index++ )
        {
            //NSLog(@"productIdentifier: %@",productIdentifier);
            //NSLog(@"Product: %@",[availableProducts objectAtIndex:index]);

            if ( [productIdentifier isEqualToString:[[availableProducts objectAtIndex:index] objectForKey:@"BundleID"]] )
            {
                [purchased setObject:[availableProducts objectAtIndex:index] forKey:productIdentifier];

                [purchased writeToFile:EXTRAS_PATH atomically:YES];

                [_purchasedProducts addObject:productIdentifier];
            }
        }
    }
    else
    {
        index = [[[NSUserDefaults standardUserDefaults] objectForKey:@"kTempProductPurchasingIndex"] intValue];

        if ( [productIdentifier isEqualToString:[[availableProducts objectAtIndex:index] objectForKey:@"BundleID"]] )
        {
            [purchased setObject:[availableProducts objectAtIndex:index] forKey:productIdentifier];

            [purchased writeToFile:EXTRAS_PATH atomically:YES];

            [_purchasedProducts addObject:productIdentifier];
        }
    }

    [[NSNotificationCenter defaultCenter] postNotificationName:kProductPurchasedNotification object:productIdentifier];
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-26T04:10:59.403

```
[[SKPaymentQueue defaultQueue] addTransactionObserver:self];
[[SKPaymentQueue defaultQueue] restoreCompletedTransactions]; 
```

也添加上一行。你的`paymentQueueRestoreCompletedTransactionsFinished`函数应该被调用。

# php - PHP 数组在 foreach 语句中消失 - 范围问题？

> ID：11200467
> 
> 赞同：0
> 
> 时间：2012-06-26T03:38:54.553
> 
> 标签：php, arrays, codeigniter

所以，我有一个非常奇怪的错误——一些高级 PHP 开发人员也可能被认为有些奇怪。

在第二个 foreach 语句中，我在该 foreach 语句中创建了一个数组“$reply_each”，它应该是“array_push()”-ed 到另一个名为“$recent_discussion_each['discussion_replies_array']”的数组中。这在第二个 foreach 语句中有效。但是一旦第二个 foreach 语句完成，“$reply_each”数组就消失了——就好像它超出了范围一样。为了确保这不是范围问题，我在函数的开头初始化了 $reply_each 但这没有帮助 - 它必须是别的东西。

请帮忙？

更新：我可能应该补充一点，当我在第二个 foreach 语句中对 $recent_discussion_each['discussion_replies_array'] 执行 count() 时，我得到正确的值 1。但是当我执行相同的 count() 时，但这次在外面在第二个 foreach 语句中，我得到了一个不正确的值 0。如果之前不清楚的话，这就是问题所在。

```
public function getRecentDiscussions($num_recent_discussions, $course_id) {
    //
    $this->load->database();
    //
    $recent_discussions_array = array();
    //
    // Construct query to fetch recent discussions along with their replies and some
    // basic user info about the authors
    $query_recent_discussions = $this->db->select('course_discussion.id AS course_discussion_id,
                                                   user.f_name,
                                                   user.l_name,
                                                   course_discussion.text,
                                                   course_discussion.posted_datetime,
                                                   course_discussion.is_reply,
                                                   course_discussion.parent_id
                                                  ')
                                         ->join('user', 'course_discussion.owner = user.id')
                                         ->where('course_discussion.course', $course_id)
                                         ->limit($num_recent_discussions)
                                         ->get('course_discussion');
    //
    foreach($query_recent_discussions->result_array() as $row) {
        //
        // Figure out of this comment is a parent or a reply. If it is a parent (meaning is_reply
        // is equal to 0), then treat it like one
        if($row['is_reply'] == '0') {
            //
            $recent_discussion_each = array();
            //
            $recent_discussion_each['discussion_id'] = $row['course_discussion_id'];
            $recent_discussion_each['discussion_owner_f_name'] = $row['f_name'];
            $recent_discussion_each['discussion_owner_l_name'] = $row['l_name'];
            $recent_discussion_each['discussion_body'] = $row['text'];
            $recent_discussion_each['discussion_posted_datetime'] = $row['posted_datetime'];
            $recent_discussion_each['discussion_replies_array'] = array();
            //
            array_push($recent_discussions_array, $recent_discussion_each);
        }
        //
        // Else, it must be a reply since is_reply is not a 0
        else {
            //
            // Look for the parent comment by going through the entire list of comments
            foreach($recent_discussions_array as $potential_parent) {
                //
                // Check to see if this comment's (now known as a reply's) id matches 
                // the id of the comment currently in the position in the list of comments
                if($row['parent_id'] == $potential_parent['discussion_id']) {
                    //
                    $reply_each = array();
                    //
                    $reply_each['reply_id'] = $row['course_discussion_id'];
                    $reply_each['reply_owner_f_name'] = $row['f_name'];
                    $reply_each['reply_owner_l_name'] = $row['l_name'];
                    $reply_each['reply_text'] = $row['text'];
                    $reply_each['reply_posted_datetime'] = $row['posted_datetime'];
                    $reply_each['reply_is_reply'] = $row['is_reply'];
                    $reply_each['reply_parent_id'] = $row['parent_id'];
                    //
                    array_push($potential_parent['discussion_replies_array'], $reply_each);
                }
            }
        }
    }
    //
    foreach($recent_discussions_array as $recent_discussion) {
        echo ($recent_discussion['discussion_id'].' has the following replies: ');
        foreach($recent_discussion['discussion_replies_array'] as $reply) {
            echo($reply['reply_id']);
        }
    }
    //
    return $recent_discussions_array;
    //
    // end
    //
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T03:42:15.327

`foreach`创建项目的副本以在循环体内使用。这意味着这`$potential_parent`实际上不是来自 的原始数组`$recent_discussions_array`，而是它们的副本。

因此，当您修改它们时，一旦`foreach($recent_discussions_array as $potential_parent)`循环完成，这些副本就会消失。

作为我的意思的一个简化示例，请注意这里明显缺乏任何“baz”打印：

[http://ideone.com/WlDru](http://ideone.com/WlDru)

然后比较如果您实际按键访问原始数组会发生什么：

[http://ideone.com/etvr5](http://ideone.com/etvr5)

正如 Ben 在评论中指出的那样，您真正可能想要的是使用`&`运算符：

[http://ideone.com/2TphI](http://ideone.com/2TphI)

# php - 使用 php 和 json 的 MySql 产品和类别表

> ID：11200469
> 
> 赞同：0
> 
> 时间：2012-06-26T03:39:20.127
> 
> 标签：php, mysql, json

我刚刚开始学习所有这些编码语言，老师要求我们做以下事情。我知道对于全职或有更多时间编码的人来说，这听起来很容易。老师总是告诉我们一切都用谷歌搜索，我尝试了太多网站，但我根本没有找到任何对我有帮助的东西。

我需要使用 PHP 编写两个 JSON 文档（产品和类别），它们将从我的 MySQL 数据库中动态读取值。当调用每个文档时，它将返回格式完美的 JSON，该 JSON 将使用[http://jsonlint.com/进行验证](http://jsonlint.com/)

老实说，我不知道该怎么办。我不懂 PHP，现在这个 JSON 事情让它变得更加混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:12:40.433

您只需要向您的数据库发出 MySQL 请求：

（这是简单的代码，没有优化）

```
// Make a MySQL Connection
mysql_connect("localhost", "admin", "1admin") or die(mysql_error());
mysql_select_db("test") or die(mysql_error());

// Retrieve the data from the "example" table
$result = mysql_query("SELECT products, categories FROM example")
or die(mysql_error());  

// store all the records of the "example" table into $rows[]
while($ds = mysql_fetch_array( $result )) {
    $rows[] = $ds
} 
```

有了这个，你就有了一个`$rows`包含数据的数组：

在此之后，您可以将数据输出为 JSON：

```
echo json_encode($rows); 
```

我希望这会对你有所帮助。

# c++ - c++中最合适的表表示？

> ID：11200470
> 
> 赞同：0
> 
> 时间：2012-06-26T03:39:20.733
> 
> 标签：c++, database, boost

我需要经常用 c++ 表示一个表。例如，在一个应用程序中，我需要维护一个表，如下所示。

```
int analog_channel;
int operator_channel;
state channel_state;
string phone_number; 
```

但我需要制作`analog_channel`和`operator_channel`索引。对于这种数据，c++ 中最合适的表表示形式是什么，`boost_multiindex`或者其他什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:07:23.273

[boost::multi_index](http://www.boost.org/doc/libs/1_50_0/libs/multi_index/doc/index.html)将是一个不错的选择。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-26T03:42:52.153

你试过qT吗？我认为它具有一些 boost 的功能，但这就是我使用的，而且很可爱 :D

[http://qt.nokia.com/products/](http://qt.nokia.com/products/)

您可以查看该网站上的功能列表，了解每个课程的详细信息...

# c# - 将 excel 列作为文本读取

> ID：11200472
> 
> 赞同：0
> 
> 时间：2012-06-26T03:39:28.473
> 
> 标签：c#, excel

我只想从 web 应用程序中的 excel 文件中读取所有列作为文本值，而不管数据的类型（日期、数字等）。

请查看使用的连接字符串。仅安装了 ACE 驱动程序，我们不能在生产服务器中使用任何其他驱动程序。

```
Provider=Microsoft.ACE.OLEDB.12.0;Data Source=c:\myFolder\myOldExcelFile.xls;
                             Extended Properties="Excel 12.0;HDR=YES;IMEX=1"; 
```

设置`IMEX=1`不起作用。它为某些值返回 null。

我可以看到很多文章，但我看不到正确的答案。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T04:21:17.453

我认为这就是你在[ACE 工作之后的样子](https://stackoverflow.com/questions/4551203/help-with-a-oledb-connection-string-for-excel-files/4663674#4663674)

不幸的是，您不能从连接字符串中设置 ImportMixedTypes 或 TypeGuessRows，因为这些设置是在注册表中定义的。对于**ACE** OleDb 驱动程序，它们存储在

> HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Office\14.0\Access Connectivity Engine\Engines\Excel

在注册表中。因此，您可以简化连接字符串以摆脱其中一些扩展属性。

在注册表中设置`TypeGuessRows`为 0 和`ImportMixedTypes`Text 后，您应该会得到您期望的行为。

* * *

或者您可以使用`Microsoft.Office.Interop.Excel`来读取文件。示例代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

using Excel = Microsoft.Office.Interop.Excel;

namespace ExcelTut
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            Excel.Application xlApp = new Excel.Application();
            Excel.Workbook xlWorkbook = xlApp.Workbooks.Open(@"D:/C.xlsx");
            Excel._Worksheet xlWorksheet = xlWorkbook.Sheets[1];
            Excel.Range xlRange = xlWorksheet.UsedRange;

            int rowCount = xlRange.Rows.Count;
            int colCount = xlRange.Columns.Count;

            for (int i = 1; i <= rowCount; i++)
            {
                for (int j = 1; j <= colCount; j++)
                {
                    MessageBox.Show(xlRange.Cells[i, j].Value2.ToString());
                }
            }

        }

    }
} 
```

通过互操作从[读取的 excel 文件中获取的代码](http://dontbreakthebuild.com/2011/01/30/excel-and-c-interop-with-net-4-how-to-read-data-from-excel/)

# vhdl - 生成语句中的信号或变量计数器

> ID：11200473
> 
> 赞同：0
> 
> 时间：2012-06-26T03:39:33.120
> 
> 标签：vhdl, hdl

我对生成语句有疑问。我正在生成一个管道架构，基本问题是除了 for 索引之外我还需要另一个计数器或变量：

```
architecture behav of blockPipelineCordic is
    constant total: integer := stepNumber + stepNumber/pipeStep;
    signal signVector: std_logic_vector( (stepNumber - 1) downto 0);
    signal lx: std_logic_vector( ((total + 1)*dataSize - 1) downto 0);
    signal ly: std_logic_vector( ((total + 1)*dataSize - 1) downto 0);
    signal signCounter: integer := stepNumber - 1;
begin

stepGen:
for i in (total - 1) downto 0 generate
    begin

      signCounter <= signCounter - 1 when ((total - i) mod (pipeStep + 1) /= 0) else signCounter;

        stepGen0: if( (total - i) mod (pipeStep + 1) /= 0 ) generate
        begin U1: entity work.cordicStep(behav)
        generic map ((totalStepNumber - 1) - i,dataSize)
        port map(signVector(signCounter),lx(((i+2)*dataSize-1) downto (i+1)*dataSize),ly(((i+2)*dataSize-1) downto (i+1)*dataSize),lx(((i+1)*dataSize-1) downto i*dataSize),ly(((i+1)*dataSize-1) downto i*dataSize));
        end generate stepGen0;

        stepGen1: if( (total - i) mod (pipeStep + 1) = 0 ) generate
        begin U2: entity work.registerModule(behav)
        generic map (dataSize)
        port map(clk,lx(((i+2)*dataSize-1) downto (i+1)*dataSize),lx(((i+1)*dataSize-1) downto i*dataSize));
        end generate stepGen1;

        stepGen2: if( (total - i) mod (pipeStep + 1) = 0 ) generate
        begin U3: entity work.registerModule(behav)
        generic map (dataSize)
        port map(clk,ly(((i+2)*dataSize-1) downto (i+1)*dataSize),ly(((i+1)*dataSize-1) downto i*dataSize));
        end generate stepGen2;

end generate stepGen;
. . . 
```

在生成第一个结构时，我需要对 signVector 使用不同的索引，我创建了一个用作计数器的信号 (port map(signVector(signCounter),lx(((i+2)*dataSize-1) downto ) 但它不能用作索引错误是：“正式“子”的实际（索引名称）不是静态信号名称。”

任何帮助将不胜感激:)，ty

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:10:19.733

抱歉，你不能使用这样的中间信号。

您可以编写一个函数，给定一个值`i`将返回正确的`signCounter`，而无需存储中间值。

您可以尝试在生成中声明信号，但我认为它不会得到您想要的（信号最终会带有`total`驱动程序的数量，而不是在循环期间有几个不同的值。）生成是用于“制作静态事物”，而不是动态事物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:46:49.397

虽然我在遵循您的代码时遇到了一些问题，但似乎`signCounter`可以从`i`. 如果您从 0 到 total-1 运行生成，所涉及的数学将更容易理解。

或者尝试将其分成两个生成语句，第一个生成`from 0 to stepNumber - 1`你`cordicSteps`的，第二个`from 0 to total - 1`生成你的`registerModules`。

此外，您可以结合`stepGen1`和`stepGen2`

# actionscript-3 - 在 ActionScript 3 中解析 RSS 2.0 源

> ID：11200475
> 
> 赞同：0
> 
> 时间：2012-06-26T03:39:49.687
> 
> 标签：actionscript-3, flash-cs5

我正在尝试将这些类[http://www.mikechambers.com/blog/2008/01/22/parsing-rss-20-feeds-in-actionscript-3/](http://www.mikechambers.com/blog/2008/01/22/parsing-rss-20-feeds-in-actionscript-3/)与 Flash Professional 一起使用。我遇到的问题是一些解析类使用了我似乎无法在 flash Professional 中使用的 mx 类。任何能够让这些类在没有 mx 的情况下工作的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T04:59:55.733

此示例有两个 SWC 库依赖项。

[xmlsyndication](http://as3syndicationlib.googlecode.com/files/xmlsyndication-.85.zip) SWC 已构建并可从 ZIP 文件的 bin/ 文件夹中获得。

[as3corelib](https://github.com/mikechambers/as3corelib)可从 GitHub 获得，但尚未构建；但是，我已经[为您编译了一个版本](http://jasonsturges.com/labs/stack-overflow/builds/as3corelib.swc)。请注意，它包含 AIR 类，如果您以 Flash Player 为目标，则会引发构建错误。如果您正在为 Flash Player 而不是 AIR 构建，请从 src/com/adobe/air 中删除 air 文件夹。

将这些 SWC 链接到您的 Flash 项目。

![动作脚本设置](../Images/30cfe2c19e4e9fd3ce7178ae10fe040b.png)

将Mike Chambers 示例[RSSExampleClass](http://www.mikechambers.com/blog/2008/01/22/parsing-rss-20-feeds-in-actionscript-3/)类粘贴到关键帧的操作中，并添加`outputField`文本字段和要调用的按钮`onLoadPress`。

![闪光](../Images/b89adc2a1a56b093163b36bbff6e4dc8.png)

运行，你会看到：

![瑞士法郎](../Images/2bcd706ef652de88814c3bdad1f3106c.png)

此示例的 Flash Professional CS5 FLA 位于：http:
[//jasonsturges.com/labs/stack-overflow/examples/rss-reader/rss-reader.zip](http://jasonsturges.com/labs/stack-overflow/examples/rss-reader/rss-reader.zip)

我的示例项目包括：

*   垃圾桶/
    *   RSS.swf
*   库/
    *   as3corelib.swc
    *   xmlsyndication.swc
*   源/
    *   RSS.fla

# javascript - setInterval 变量范围

> ID：11200477
> 
> 赞同：0
> 
> 时间：2012-06-26T03:40:21.133
> 
> 标签：javascript

我在函数顶部声明了一个变量 as `this.current_test = null;`，然后下一行我有一个 setInterval 函数，我需要将变量设置为一个新参数...

`this.current_test.failed = true;`

代码：

```
timer = this.window.setInterval(function() 
   {
      this.window.clearInterval(timer);
      this.current_test.failed = true;
   },1000);
 } 
```

但是我收到一个`TypeError: 'undefined' is not an object (evaluating 'this.current_test.failed = true'`错误

我认为这是因为 this.current_test 没有在 setInterval 函数中定义，那么我该如何编辑该变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T03:46:20.560

计时器函数中“this”的范围不会引用 this.window。此范围仅适用于您可以执行的功能

```
var wnd=this.window; // take your widow to local variable
timer = this.window.setInterval(function() 
{
   this.window.clearInterval(timer);
   wnd.current_test.failed = true; // use your local variabe in the function
   },1000);
} 
```

顺便说一下，为什么你需要'this'以及如果 cuurent_test 是一个全局变量，那么你可以像这样声明

```
var current_test; 
```

你可以在定时器函数中使用全局变量

# iphone - 通过点击表格单元更改pickerview的数据

> ID：11200480
> 
> 赞同：0
> 
> 时间：2012-06-26T03:40:43.573
> 
> 标签：iphone, uitableview, uipickerview

我有一个带有 3 个 UITableViewCells 和 3 个带有其他数据的 Picker 视图的 UITableView。

Picker1 有 Data1

Picker2 有 Data2

Picker3 有 Data3

这与代码：

```
- (NSString *)pickerView:(UIPickerView *)thePickerView titleForRow:(NSInteger)row      forComponent:(NSInteger)component;
{
if (thePickerView.tag == 1) {
    return [data1 objectAtIndex:row];
} else if (thePickerView.tag == 2) {

return [data2 objectAtIndex:row];        

} else if (thePickerView.tag == 3) {

    return [data3 objectAtIndex:row];

}
return [data1 objectAtIndex:row];

} 
```

我想用 UITableViewCell 更改选择器视图的数据。我怎么能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T04:44:24.643

这样做在 .h 文件中创建 memberVariable **NSIndexPath *selectedIndexPath并创建其属性。**

现在在 tableViewDelegate 方法中：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    selectedIndexPath = [indexPath retain];
    //reload pickerview here
} 
```

Picker View Delegate 方法将是这样的：

```
- (NSString *)pickerView:(UIPickerView *)pickerView 
          titleForRow:(NSInteger)row forComponent:(NSInteger)component 
{
  switch (selectedIndexPath.row) 
  {
    case 0:
        //first cell selected picker view
        break;
    case 1:
        //second cell selected picker view
        break;
    case 2:
        //third cell selected picker view
        break;
     default:
     break;
  }
} 
```

# javascript - 如何在日期选择器中获取选定的年份？

> ID：11200491
> 
> 赞同：0
> 
> 时间：2012-06-26T03:43:00.450
> 
> 标签：javascript, jquery, jquery-ui, datepicker

我正在使用 datepicker 作为我的输入名称`birth_day`。我想从当前年份和选定年份计算年龄。

`current_yr - selected_yr`

但我不知道如何从日期选择器中获取选定的年份。

这是我的代码样子。

```
<script>
    function dateYear(){
        var d = new Date();
                var year = d.getFullYear();
                return year;
    }
    $(function() {
        $( "#id_birth_date" ).datepicker({ dateFormat: 'yy-mm-dd' });

        //how can I get the selected year?
    });

</script>

<input type="text" name="birth_day" id="bd">
<input type="text" name="age" id="ag"> 
```

有人可以给我一个关于我的案子的想法吗？

任何帮助将不胜感激 ...

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T03:58:54.583

你的意思是：

```
$(function() {
     $("#id_birth_date").datepicker({
           onSelect: function(dateText, inst) {
              var startDate = new Date(dateText);
              var selectedYear = startDate.getFullYear(); // selected year
           }
     });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T03:51:58.450

您应该能够使用该[`val()`](http://api.jquery.com/val/)功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T03:53:20.387

有可能..从日期选择器中选择日期后

您将获得 datepicker1.year 的属性，这将帮助您获得年份

或者

将日期检索为字符串后，使用 Convert.Toint32(strDate1)-Convert.Toint32(strDate2) ；

..尝试一下...否则发布您的代码，...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-14T15:27:58.957

所选答案有问题：可能无法解析 dateText，因为它取决于可以自定义的文本。以下是增强的准确答案。否则，您最终将使用未定义的日期对象：

```
$(function() {
     $("#id_birth_date").datepicker({
           onSelect: function(dateText, inst) {
              var startDate = new Date(inst.selectedYear, inst.selectedMonth, inst.selectedDay);
              var selectedYear = startDate.getFullYear(); // selected year
           }
     });
}); 
```

# phpmyadmin - 如何在 phpMyAdmin 中恢复已删除的书签查询？

> ID：11200493
> 
> 赞同：10
> 
> 时间：2012-06-26T03:43:07.970
> 
> 标签：phpmyadmin

我不小心删除了 phpMyAdmin 中的书签查询。有什么办法可以恢复吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-26T06:15:31.677

以下是您访问 sql 历史记录的方式。请注意，这仅在我的本地计算机上进行了测试；

![在此处输入图像描述](../Images/7af6ebe53953f29ef99967c238bad4ff.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-01T20:42:02.587

在较新版本的 phpMyAdmin 上，历史记录和书签位于控制台中。

屏幕转储：

[![在此处输入图像描述](../Images/81723d42f5c00726ac6820a3926edf6d.png)](https://i.stack.imgur.com/Cz7ci.png)

# php - ADODB 连接不上

> ID：11200494
> 
> 赞同：0
> 
> 时间：2012-06-26T03:43:19.067
> 
> 标签：php, mysql, adodb

我在两个站点上使用了 ADOdb。首先它完美无缺，其次，除了站点使用不同的数据库和登录信息之外，一切都相同，它甚至似乎都没有尝试连接。

使用不正确的表名或登录信息，不会导致错误输出或任何事情。

这是我的代码：

```
$DBTYPE = 'mysql';
$DBHOST = '***';
$DBUSER = '***';
$DBPASS = '***';
$DBNAME = 'fe';
// End Configuration

require_once($config['basedir'].'/libraries/adodb/adodb.inc.php');

$conn = &ADONewConnection($DBTYPE);
$conn->PConnect($DBHOST, $DBUSER, $DBPASSWORD, $DBNAME);
@mysql_query("SET NAMES 'UTF8'"); 
```

知道为什么这行不通吗？我现在完全不知所措。正如我所说，除了两个单独的网络主机之外没有什么区别，一个有效，一个无效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T00:07:23.603

这将起作用：

```
$conn = &NewADOConnection($DBTYPE);
$conn->PConnect($DBHOST, $DBUSER, $DBPASSWORD, $DBNAME);
@mysql_query("SET NAMES 'UTF8'"); 
```

`NewADOConnection`代替`ADONewConnection`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T18:13:03.687

试试这个 ：

```
$conn = NewADOConnection($DBTYPE);
$conn->Connect($DBHOST, $DBUSER, $DBPASSWORD, $DB_NAME) or die("ERROR CONNECT " . $DBNAME);
$query = "SET NAMES 'UTF8'";

$rs = $db->Execute($query) or ("Error SQL. " . $db->ErrorMSG()); 
```

# ember.js - 在模板循环中绑定到 Ember.Select

> ID：11200501
> 
> 赞同：1
> 
> 时间：2012-06-26T03:44:15.260
> 
> 标签：ember.js, model-binding, handlebars.js

我有一个场景需要将数据的值（通常在运行时检索）绑定到表单元素。在这种情况下，元素是一个 Ember.Select，它将针对任意长度的数据集重复呈现。

jsFiddle可以在这里找到[简单的例子](http://jsfiddle.net/urDtrain/Yt7u7/66/)

```
<script type="text/x-handlebars">
{{#each App.simpleSelectionArray.content}}
{{this.firstName}}
  {{view Ember.Select
         contentBinding="App.peopleController.content"
         selectionBinding="this"
         optionLabelPath="content.fullName"
         optionValuePath="content.id"}}

  <p>Selected: {{this.fullName}}
    (ID: {{this.id}})</p>
{{/each}}

{{#each App.selectionArray.content}}
{{this.person.firstName}}
  {{view Ember.Select
         contentBinding="App.peopleController.content"
         selectionBinding="this.person"
         optionLabelPath="content.fullName"
         optionValuePath="content.id"}}

  <p>Selected: {{this.person.fullName}}
    (ID: {{this.person.id}})</p>
{{/each}}
</script> 
```

​</p>

```
window.App = Ember.Application.create();

App.Person = Ember.Object.extend({
    id: null,
    firstName: null,
    lastName: null,

    fullName: function() {
        return this.get('firstName') + " " + this.get('lastName');
    }.property('firstName', 'lastName').cacheable()
});

App.peopleController = Ember.ArrayController.create({
    content: [
        App.Person.create({id: 1,firstName: 'Yehuda',lastName: 'Katz'}),
        App.Person.create({id: 2,firstName: 'Tom',lastName: 'Dale'}),
        App.Person.create({id: 3,firstName: 'Peter',lastName: 'Wagenet'}),
        App.Person.create({id: 4,firstName: 'Erik',lastName: 'Bryn'})
    ]
});

App.simpleSelectionArray = Ember.ArrayController.create({
    content: [
         App.peopleController.objectAt(1)
    ]});

App.selectionArray = Ember.ArrayController.create({
    content: [
         {
            id: '2',
            person: Ember.computed(function(key, value) {
                if (arguments.length === 1){
                    var personId = this.get('id');
                    console.log(personId);
                    var listedPerson = App.peopleController.content.findProperty("id", personId);
                    return listedPerson ;
                 }else{
                     this.set(key,value);
                     return value;
                 }
            }).property('id').cacheable() 
        },                     
    ]});

​ 
```

这两个生成的选择元素基于不同的数据结构。第一个（大部分）表现如预期，除了绑定后的选择。

第二种数据结构更典型，对我来说根本不起作用。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T21:27:35.673

我有一些语法问题，需要为绑定项目提供一个设置器。工作版本可以在[这里找到](http://jsfiddle.net/urDtrain/tUxpm/)

html

```
<script type="text/x-handlebars">
    {{#each App.selectedPersonController.content}}
    {{this.personId}}
      {{view Ember.Select
             contentBinding="App.peopleController.content"
             selectionBinding="person"
             optionLabelPath="content.fullName"
             optionValuePath="content.id"}}

      <p>Selected: {{person.fullName}}
        (ID: {{person.id}})</p>

    {{/each}}
</script>​ 
```

脚本

```
window.App = Ember.Application.create();

Ember.ArrayProxy.reopen({
    /**
     * returns either an item or index for the current array based on a
     * requested field name and value
     *
     * @param fieldName
     * @param value
     * @param type
     */
    getItemFromField: function(fieldName, value, isIndex){
        var index = -1, aData = this.toArray();

        for(var i= 0, max=aData.length; i<max ; i++){
            var item = aData[i];
            if(item.hasOwnProperty(fieldName) && item[fieldName].toString() === value.toString()){
                if(isIndex){
                    return i;
                }
                return this.objectAt(i);
            }
        }

        if(isIndex){
            return -1;
        }
        return null;
    }
});

App.Person = Ember.Object.extend({
    id: null,
    firstName: null,
    lastName: null,

    fullName: function() {
        return this.get('firstName') + " " + this.get('lastName');
    }.property('firstName', 'lastName').cacheable()
});

App.selectedPersonController = Ember.ArrayProxy.create({
    content:[Ember.Object.create({
        personId: 2,

        person: function(item, value) {
            if(arguments.length === 1){
                var personId = this.get('personId');
                person = App.peopleController.getItemFromField("id", personId);
                return person;
            }else{
                return value;
            }
        }.property('personId').cacheable()
    })]
    });

App.peopleController = Ember.ArrayController.create({
    content: [
        App.Person.create({
        id: 1,
        firstName: 'Yehuda',
        lastName: 'Katz'
    }),
        App.Person.create({
        id: 2,
        firstName: 'Tom',
        lastName: 'Dale'
    }),
        App.Person.create({
        id: 3,
        firstName: 'Peter',
        lastName: 'Wagenet'
    }),
        App.Person.create({
        id: 4,
        firstName: 'Erik',
        lastName: 'Bryn'
    })
        ]
});​ 
```

我的基本关注是绑定到未绑定到具有固定路径但通过嵌套生成的全局变量的上下文。

# android - 如何将录制的文件存储在 res 文件夹中？

> ID：11200507
> 
> 赞同：0
> 
> 时间：2012-06-26T03:45:50.323
> 
> 标签：android

我试图在我的应用程序中录制声音，然后将其存储在 res 文件夹中。我做的更少：

```
private MediaRecorder recorder;

    static final String OUTPUT_FILE = "/MediaPlayer/res/raw/recordoutput.3gpp"; //MediaPlayer is the java class and raw is the folder that I would like to put my recorded voice in

private void beginRecording() throws Exception{
        killMediaRecorder();   //I implemented this function to kill the existing recorder
        File outFile = new File(OUTPUT_FILE);

        if(outFile.exists())
        {
            outFile.delete();
        }

        recorder = new MediaRecorder();
        recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
        recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
        recorder.setOutputFile(OUTPUT_FILE);
        recorder.prepare();
        recorder.start();

    } 
```

显现：

```
<uses-permission android:name="android.permission.RECORD_AUDIO" /> 
```

但是在我运行模拟器后，原始文件中没有创建文件，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T03:47:43.790

不可以，应用程序不能写入其他应用程序的内部存储。

你也可以，

1.  将文件写入应用的内部存储。
2.  将文件写入设备的外部存储。

两者都在[**文档**](http://developer.android.com/guide/topics/data/data-storage.html)中进行了详细描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T04:03:27.563

您**不能**写入**res**文件夹，apk 中的所有内容都是**只读**的。您必须将文件保存在*内部存储器*或*SD 卡中*

# jquery - jquery - 如何按类获取元素的值？

> ID：11200508
> 
> 赞同：1
> 
> 时间：2012-06-26T03:46:01.863
> 
> 标签：jquery

我在这里有一个表格中的项目列表。每个项目的右侧都有一个“选择”按钮。每当用户单击“选择”按钮时，按钮左侧的项目或文本应显示在`span`. 当我单击“选择”按钮时会发生什么，所有项目都显示在`span`.

查看实际场景：http: [//jsfiddle.net/HnAnu/](http://jsfiddle.net/HnAnu/)

我的代码如下：

```
<html>
<head>
 <script type="text/javascript" src="jquery.1.7.2.min.js"></script>
 <script type="text/javascript">
  $(function() {
   $(".btnSelectItem").click(function () {
    $("#spanItemDescription").html("<u>"+$(".tdItemDescription").text()+"</u>");
   });
  });
 </script>
</head>
<body>
 <div>
  <span>Item: </span>
  <span id="spanItemDescription">____________________________</span>
 </div>
 <table border=1>
  <tr>
   <td class="tdItemDescription">Shin Guard Small</td>
   <td><input type="button" class="btnSelectItem" value="Select"/></td>
  </tr>

  <tr>
   <td class="tdItemDescription">Shin Guard Medium</td>
   <td><input type="button" class="btnSelectItem" value="Select"/></td>
  </tr>

  <tr>
   <td class="tdItemDescription">Shin Guard Large</td>
   <td><input type="button" class="btnSelectItem" value="Select"/></td>
  </tr>
 </table>
</body>
</html> 
```

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T03:50:32.397

请试试这个

```
 $(function() {
            $(".btnSelectItem").click(function () {
                $("#spanItemDescription").html("<u>"+$(this).parent('td').siblings('.tdItemDescription').text()+"</u>");
            });
        }); 
```

[小提琴演示](http://jsfiddle.net/HnAnu/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T03:50:41.643

你只需要得到正确的 td

```
$("#spanItemDescription").html("<u>"+$(this).parent('td').prev(".tdItemDescription").text()+"</u>"); 
```

[小提琴](http://jsfiddle.net/HnAnu/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T03:55:41.933

```
$(function() {
        $(".btnSelectItem").click(function () {
            var text = $(this).parent().prev().text(); //the previous node of the parent of button
            $("#spanItemDescription").html("<u>"+text+"</u>");
        });
    }); 
```

这有效:)

# javascript - 如何用 Greasemonkey 改变这个 javascript？

> ID：11200509
> 
> 赞同：0
> 
> 时间：2012-06-26T03:46:04.157
> 
> 标签：javascript, firefox, greasemonkey, uploadify

这是脚本：

```
<script type="text/javascript">
// <![CDATA[
$(document).ready(function() {
  $('#file_upload').uploadify({
    'uploader'  : '/uploadify/uploadify.swf',
    'script'    : '/upload2.php',
    'cancelImg' : '/uploadify/cancel.png',
    'folder'    : '/uploads',
    'auto'      : false,

    'onError'     : function (event,ID,fileObj,errorObj) {
      alert(errorObj.type + ' Error: ' + errorObj.info);
    },
    'fileExt'     : '*.wma;*.mp3',
    'fileDesc'    : 'Audio Files',
    'scriptData'  : {'fileID':'20541','hash':'2e1177c09a6503d11b1a401177022de50409e96279a2dbb11c5aef5783d231c975da22e2ddfd480b5e050f4fb09d9b7caa47a71ab0150b7c462b06d06e61e664','hashit':'fe458d423c6d1c18248b73dad776a9d4a6ff1ac9fc4b07674b3715b4992a80b9d2b4e3a340973642497d66ac8e8d57d7aa737f8911a784888b164e84961f177a'},
    'onComplete'  : function(eventID,ID,fileObj,response,data) {
        window.location = "http://www.messageshare.com/welcome/file_farm/20541/fe458d423c6d1c18248b73dad776a9d4a6ff1ac9fc4b07674b3715b4992a80b9d2b4e3a340973642497d66ac8e8d57d7aa737f8911a784888b164e84961f177a";
    }
  });
});
// ]]>
</script> 
```

我需要从`'auto'` 更改`false`为`true`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T06:05:32.073

由于所有这些`scriptData`值似乎都可能从页面加载到页面加载发生变化，因此您想要做的是`<script>`即时拦截该节点，克隆它并仅使用 RegEx 更改`'auto'`为`true`。

在 Firefox Greasemonkey 上，您可以使用[极其出色的 (^_^) *checkForBadJavascripts*实用程序](https://gist.github.com/2620135)来做到这一点。像这样：

```
// ==UserScript==
// @name     _Modify JS as it's loaded
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @require  https://gist.github.com/raw/2620135/checkForBadJavascripts.js
// @run-at   document-start
// @grant    GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/

function replaceTargetJavascript (scriptNode) {
    var scriptSrc   = scriptNode.textContent;
    scriptSrc       = scriptSrc.replace (
        /'auto'\s+\:\s+false/,
        "'auto'      : true"
    );

    addJS_Node (scriptSrc);
}

checkForBadJavascripts ( [
    [false, /'auto'\s+\:\s+false/, replaceTargetJavascript]
] ); 
```

# c - 如何模拟linux中socket/tcp编程的异常情况，比如终止一侧的连接？

> ID：11200510
> 
> 赞同：6
> 
> 时间：2012-06-26T03:46:07.107
> 
> 标签：c, linux, sockets, tcp

我正在学习使用**SO_SNDTIMEO**和**SO_RCVTIMEO**来检查超时。**与读取**套接字一起使用很容易。但是当我想检查**写入**超时时，它总是返回成功。这是我所做的：（全部处于阻塞模式）

1.  ****在服务器开始写入之前****关闭**客户端读取套接字并退出**
*****   在服务器开始**写入之前终止客户端***   **在接受**之后但在**写入**之前拔下服务器的电缆****

 ******好吧，似乎所有这些案例都**成功**返回了。我认为原因应该是端口是由os管理的资源，并且在客户端，程序消失后，tcp连接仍然显示**FIN_WAIT2**状态。

那么，有没有什么方便的方法来模拟某些**write**可以接收错误的情况，例如**EPIPE**，**EAGAIN**？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T05:20:03.790

**如何得到错误EAGAIN？**
要获得 EAGAIN 错误，您需要使用非阻塞套接字。使用非阻塞套接字，您需要写入大量数据（并停止在对等端接收数据），以便您的内部 TCP 缓冲区被填满并返回此错误。

**如何得到错误 EPIPE？**
要得到错误EPIPE，需要在对端关闭socket后发送大量数据。您可以从此 SO [Link](https://stackoverflow.com/questions/4584904/what-causes-the-broken-pipe-error)获得有关 EPIPE 错误的更多信息。我在提供的链接中询问了有关 Broken Pipe Error 的问题，接受的答案给出了详细的解释。需要注意的是，要获得 EPIPE 错误，您应该将 send 的 flags 参数设置为 MSG_NOSIGNAL。否则，异常发送会产生 SIGPIPE 信号。

**附加说明**
请注意，很难模拟写入失败，因为 TCP 通常会将您尝试写入的数据存储到其内部缓冲区中。因此，如果内部缓冲区有足够的空间，那么您不会立即收到错误消息。最好的方法是尝试写入大量数据。您还可以尝试使用带有 SO_SNDBUF 选项的[setsockopt函数设置较小的发送缓冲区大小](http://www.manpagez.com/man/2/setsockopt/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T05:37:06.157

[您可以使用故障注入](http://en.wikipedia.org/wiki/Fault_injection)来模拟错误。例如，[libfiu](http://blitiri.com.ar/p/libfiu/)是一个故障注入库，它带有一个示例项目，允许您模拟来自 POSIX 函数的错误。基本上，它用于`LD_PRELOAD`在常规系统调用（包括 ）周围注入一个包装器`write`，然后可以将包装器配置为传递给真正的系统调用，或者返回您喜欢的任何错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T05:18:57.567

您可以在一侧将接收缓冲区大小设置为非常小，而在另一侧发送一个大缓冲区。或者一方面将发送缓冲区设置为小，然后尝试发送大消息。

否则最常见的测试（我认为）是让服务器和客户端通话一段时间，然后拔掉网线。******

# regex - 用于解析句子部分的正则表达式

> ID：11200511
> 
> 赞同：0
> 
> 时间：2012-06-26T03:46:13.633
> 
> 标签：regex, pcre, splunk

我正在尝试创建一个正则表达式，它将解析 Windows 日志事件中句子的一部分。

例如，EventCode=7035 生成以下内容：

```
The Network Location Awareness (NLA) service was.....sent a start
The Network Connection service was....sent a stop
The HTTP service was....sent a start
The HTTP service was....sent a stop
etc... 
```

我想解析的是，只是“The”和“service”之间的信息，以及工作的开始或停止。

这样我就可以建立一个已经启动或停止的服务列表。

对此有什么想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T03:50:17.207

Python 中的一个示例（问题中的文本在 中`s`）：

```
re.findall("(The.*?service).*?(start|stop)",s) 
```

给出：

```
[('The Network Location Awareness (NLA) service', 'start'),
 ('The Network Connection service', 'stop'),
 ('The HTTP service', 'start'), ('The HTTP service', 'stop')] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T03:50:17.530

我认为您可以使用此正则表达式提取数据：

```
The (.*?) service .*? (start|stop) 
```

数据在捕获组 1 和 2 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T14:28:15.770

我使用了 Splunk Interactive 字段提取器。

在您的搜索中使用以下正则表达式

对于服务类型

```
| rex "(?i)^The\s(?P<ServiceType>[^ ]+)\sservice" 
```

服务状态

```
| rex "(?i)sent\sa\s(?P<ServiceStatus>[^ ]+)" 
```

使用“ServiceType”和“ServiceStaus”字段获取更多结果和图表。

\s 是空间或可以使用实际空间“”。

# javascript - Jquery滑动框在IE8中不起作用

> ID：11200515
> 
> 赞同：2
> 
> 时间：2012-06-26T03:46:26.630
> 
> 标签：javascript, jquery, html, css, jquery-animate

在我的 html 标记上方添加 doctype 时，我的 Jquery 代码似乎在 IE8 中不起作用。

也许有一种方法可以重组这些代码以使其在 ie8 中工作。

```
$(document).ready(function(){
            //Caption Sliding (Partially Hidden to Visible)
            $('.boxgrid.caption').hover(function(){
                $(".cover", this).stop().animate({top:'0px'},{queue:false,duration:160});
            }, function() {
                $(".cover", this).stop().animate({top:'161px'},{queue:false,duration:160});
            });
        });

The website can be seen here: 
```

[http://www.keencloudmedia.com/sample/test.html](http://www.keencloudmedia.com/sample/test.html)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:43:13.317

试试这个

```
$(document).ready(function(){
        $('.boxgrid.caption').mouseenter(function(){
            $(".cover", this).stop().animate({'top':'0px'},160);
        });
        $('.boxgrid.caption').mouseleave(function() {
            $(".cover", this).stop().animate({'top':'161px'},160);
        });
    }); 
```

你可以使用这个元标记（与 jquery 一起使用非常好）

```
 <meta http-equiv="content-type" content="text/html;charset=UTF-8" /> 
```

# svn - 将 VSS 6.0 迁移到 SVN

> ID：11200517
> 
> 赞同：0
> 
> 时间：2012-06-26T03:46:36.023
> 
> 标签：svn, migration, visual-sourcesafe

尝试使用此工具[VSSMigrate](http://vssmigrate.codeplex.com/releases/view/32081)将 VSS 6.0 转换为 SVN 。我得到以下错误。

```
System.InvalidCastException: Unable to cast COM object of type 'SourceSafeTypeLib.VSSDatabaseClass' to interface type 'SourceSafeTypeLib.IVSSDatabase'. This operation failed because the QueryInterface call on the COM component for the interface with IID '{2A0DE0EE-2E9F-11D0-9236-00AA00A1EB95}' failed due to the following error: No such interface supported (Exception from HRESULT: 0x80004002 (E_NOINTERFACE)).   at SourceSafeTypeLib.VSSDatabaseClass.Open(String SrcSafeIni, String Username, String Password) 
```

我所知道的这个错误是当前的迁移工具不能支持 VSS 6.0 并且只支持 VSS 2005。那么，是否有任何其他工具可以将 VSS 6.0 迁移到 SVN

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:32:51.603

您可以使用此工具：

[http://www.polarion.com/products/svn/svn_importer_features.php#VSS](http://www.polarion.com/products/svn/svn_importer_features.php#VSS)

它是免费的，但我不知道它是否有用。

他们声称：

vss2svn 工具将数据从 MS Visual SourceSafe 迁移和转换到 Subversion。

*   外部工具 ss 用于访问 VSS 存储库（VSS 客户端分发的一部分）
*   转换保留修订、作者、提交消息和提交日期
*   日志（输出到控制台，日志级别）可以在配置文件中调整（使用 log4j 配置）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T14:10:31.197

我帮助在现有应用程序中编写了一个关于[codeplex的内容。](http://vss2svn.codeplex.com/)它对我来说效果很好，很容易，但需要很长时间才能获取千兆字节的历史数据并将其全部提交给 SVN。

我试图让它尽可能简单。当然，如果您不想要任何历史记录，最简单的方法就是检查整个 VSS 数据库并使用[就地提交](https://stackoverflow.com/questions/678437/svn-in-place-import-and-checkout)将其添加到新的 SVN 存储库中。

# html - HTML 表单获取方法 - 忽略可选字段

> ID：11200518
> 
> 赞同：1
> 
> 时间：2012-06-26T03:46:45.530
> 
> 标签：html, forms, wordpress, drop-down-menu

新手在这里，所以提前感谢您的帮助！我有一个包含多种分类法的 Wordpress 网站。我想创建一个非常简单的表单，其中包含两个选择框，每个分类一个。然后，我想使用带有 get 方法的 HTML 表单来显示符合他们从选择框中请求的条件的帖子。

如果填写了两个选择框中的每一个，我就可以很容易地做到这一点，我会得到一个永久链接，例如：

```
testsite.com/?tax1=value1&tax2=value2 
```

（丑陋，我知道，但它有效）。

我不知道如果他们不填写两个选择框该怎么办。理想情况下，它只会为他们填写的那个提供永久链接，所以要么：

```
testsite.com/?tax1=value1 or testsite.com/?tax2=value2 
```

但相反，我得到

```
testsite.com/?tax1=value1&tax2=Select+tax 
```

这是我的 HTML

```
<form action="http://www.testsite.com/" method="get">
Season: <select name="season">
<option>Select season</option>
<option value="">Select season</option>
<option value="spring">Spring</option>
<option value="summer">Summer</option>
<option value="fall">Fall</option>
</select><br/>
Vacation type: <select name="vacations">
<option value="">Select vacation type</option>
<option value="beach">Beach</option>
<option value="ski">Ski</option>
</select><br/>
<input type="submit" />
</form> 
```

我意识到答案可能很简单，但我正在把头撞到墙上，所以非常感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T04:04:08.213

您可以进行一些 Javascript 或 Php 验证，以确保在提交表单之前选择了两个下拉列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:56:51.157

您仍然可以传递一个空参数，例如

`testsite.com/?tax1=&tax2=whatever_was_selected`

或者

`testsite.com/?tax1=whatever_was_selected&tax2=`

但是，您必须为他们预先选择其中一个选项，例如

```
<option selected="selected" value="">Select vacation type</option> 
```

这样，如果提交了表单并且用户没有更改他们的选择，它仍然应该传递参数 of 但没有值。

# ruby-on-rails - 脚本/插件：不在 Windows 上运行

> ID：11200523
> 
> 赞同：0
> 
> 时间：2012-06-26T03:47:13.697
> 
> 标签：ruby-on-rails, paperclip

我正在使用 Paperclip，一个用于文件上传的 Rails 插件。我正在关注 Railscast 关于它的设置。在[http://railscasts.com/episodes/134-paperclip](http://railscasts.com/episodes/134-paperclip)的 Railscast 中，RB 运行以下命令来安装插件：

```
script/plugin install git://github.com/path_to_plugin 
```

当我尝试运行时：

```
ruby script/plugin install git://github.com/path_to_plugin 
```

在我的 Windows PC 上，一开始什么也没发生。所以我去检查脚本/插件的文件内容，但没有，所以我继续创建一个，因为它是在演员阵容中使用的源代码中完成的

```
https://github.com/railscasts/134-paperclip/blob/master/store/script/plugin 
```

所以现在我的现在我收到以下错误消息：

```
<internal:lib/rubygems/custom_require>:29:in `require': no such file to load --
script/../config/boot (LoadError)
    from <internal:lib/rubygems/custom_require>:29:in `require'
    from script/plugin:2:in `<main>' 
```

请问有什么建议吗？

# grails - Apache2 反向代理，为什么我的解决方案与示例不匹配？

> ID：11200524
> 
> 赞同：2
> 
> 时间：2012-06-26T03:47:17.980
> 
> 标签：grails, tomcat7, reverse-proxy, apache2.2

我需要将反向代理返回到运行 grails 应用程序的 tomcat 服务器。我总是看到这样的反向代理示例：

```
ProxyRequests Off
ProxyPass / http://localhost:8080/appname/
ProxyPassReverse / http://localhost:8080/appname/
ProxyPreserveHost On 
```

但是，在我所有的应用程序中，当我这样做时，页面会出现并且我的静态数据会像这样加载上下文：/ appname/static/ **[jsapp.js][mycss.css]**

因此，样式和功能都丢失了。所以我的解决方法是这样做：

```
ProxyRequests Off
ProxyPass /appname/ http://localhost:8080/appname/
ProxyPass / http://localhost:8080/appname/
ProxyPassReverse /appname/ http://localhost:8080/appname/
ProxyPassReverse / http://localhost:8080/appname/
ProxyPreserveHost On 
```

我猜这是一个反向反向代理；无论哪种方式，它看起来都很老套，并且（我认为）有副作用；它在其中创建带有 tomcat 上下文的 URL：[http://servername.com/appname/user/username](http://servername.com/appname/user/username)而不是[http://servername.com/user/username](http://servername.com/user/username)。如果可能的话，我会更喜欢后者，而不会丢失样式。

笔记：

*   当我转到基本 URL：http://servername.com 时，它工作正常，之后我单击的任何链接都会在 URL 中添加“/appname/”名称。
*   我相信我可以通过将tomcat上的应用程序设置为ROOT应用程序来解决这个问题，但是，我不希望这样做。
*   此示例使用 HTTP，我通常使用 AJP 协议，但我最后尝试 HTTP 只是为了好玩
*   这是在 NameVirtualHost 配置中。
*   Apache 2.2.15、Tomcat 7.0.27、CentOS 6.2 版（最终版）、java 版本“1.7.0_04”、Grails 2.0.4

关于我需要做不同的事情有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:21:35.497

有几种方法，如何解决这种情况。我在 TomCat 中使用虚拟主机，所以我删除了 URL 中的应用程序名称。将此添加到您的 server.xml

```
<Host name="myapp.com"  appBase="myappbase" unpackWARs="true" autoDeploy="false">
    <Alias>www.myapp.com</Alias>

    <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"
           prefix="myapp_access_log" suffix=".txt"
           pattern="%h %l %u %t &quot;%r&quot; %s %b" />

    <Context path="/thumbnails" docBase="/var/www/myapp/thumbnails" reloadable="true">

</Host> 
```

在您的 $TOMCAT_HOME 中创建一个目录“myappbase”，将您的应用程序 WAR 上传为 ROOT.war。您的应用程序可通过[http://myapp.com:8080/](http://myapp.com:8080/)获得。

您的代理配置非常简单；-) 您还可以在 1 个 TomCat 中创建更多虚拟主机。

在上述配置中还有一个目录别名（缩略图），可通过[http://myapp.com/thumbnails/](http://myapp.com/thumbnails/)访问，您可以通过以下方式在 GSP 中使用它：

```
${ resource( dir: 'thumbnails', file: 'image01.png' ) } 
```

最后一点，可以帮助您在 UrlMappings.groovy 中设置“静态”目录。将 URL 转换为控制器时会忽略这些目录，反之亦然：

```
static excludes = [
        '/css*', '/js*', '/thumbnails*'
] 
```

# mysql - Speedwise，哪个更好，日期时间或时间戳？

> ID：11200525
> 
> 赞同：1
> 
> 时间：2012-06-26T03:47:25.387
> 
> 标签：mysql, performance, optimization, time

我的数据库当前使用`datetime`时间，并针对它们进行了一些选择。

切换到`timestamp`字段类型会影响查询速度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T03:51:00.270

找出答案的最好方法是测量。这实际上取决于您所做的查询，但是我怀疑这会对您的整个程序产生明显的性能差异。您应该使用最准确地描述您希望存储的数据的一种，而不必担心性能差异，因为它可能可以忽略不计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T03:51:23.040

MySQL 中的时间戳一般用于跟踪记录的更改，并且每次记录更改时都会更新。如果要存储特定值，则应使用`datetime`字段。

资源 -

[我应该使用字段“日期时间”还是“时间戳”？](https://stackoverflow.com/questions/409286/datetime-vs-timestamp)

# php - MySQL 和 PHP 基本表单回显

> ID：11200532
> 
> 赞同：1
> 
> 时间：2012-06-26T03:48:53.133
> 
> 标签：php, mysql, html

我是初学者 PHP 编码器。我希望当他们注册我的 php 代码时，它会回显“您已注册”，而不仅仅是显示空白页面。这是我的代码：

```
<?php
    require('config.php');

    if(isset($_POST['submit'])){

      //Preform the verification of the nation
      $email1 = $_POST['email1'];
      $email2 = $_POST['email2'];
      $pass1 = $_POST['pass1'];
      $pass2 = $_POST['pass2'];

      if($email1 == $email2) {
         if($pass1 == $pass2) {
           //All good.  Carry on.

            $name = mysql_escape_string($_POST['name']);
            $lname = mysql_escape_string($_POST['lname']);
            $uname = mysql_escape_string($_POST['uname']);
            $email1 = mysql_escape_string($_POST['email1']);
            $email2 = mysql_escape_string($_POST['email2']);
            $pass1 = mysql_escape_string($_POST['pass1']);
            $pass2 = mysql_escape_string($_POST['pass2']);
            $pass1 = md5($pass1);

            $sql = mysql_query("SELECT * FROM `users` WHERE `uname` = '$uname'");
            if(mysql_num_rows($sql) > 0) {
                 echo "Sorry, that user already exists!";
                 exit();
             }
             mysql_query("INSERT INTO `users` (`id`, `name`, `lname`, `uname`, `email`, 
                         `pass`) VALUES (NULL, '$name',  '$lname',  '$uname',  '$email1',  
                         '$pass1')");

           }else{
               echo "Sorry, your passwords do not match<br><br>";
               exit();
         }
     }else{
        echo "Sorry, your emails do not match.<br><br>";
    }
   }else{
    $form = <<<EOT
    <form action="register.php" method="POST">
    First Name: <input type="text" name="name" /><br />
    Last Name: <input type="text" name="lname" /><br />
    Username: <input type="text" name="uname" /><br />
    Email: <input type="text" name="email1" /><br />
    Confirm Email: <input type="text" name="email2" /><br />
    Password: <input type="password" name="pass1" /><br />
    Confirm Password: <input type="password" name="pass2" /><br />
    <input type="submit" value="Register" name="submit" />
    </form>
    EOT;
    echo $form;
   }
?> 
```

如您所见，如果一切正常，则没有回声。如果他们的注册被注册，请帮我添加回声！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T02:23:12.237

before the last

```
}else{ 
```

in your code put

```
echo "You have signed up"; 
```

and that's it :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T03:50:42.283

只需检查插入查询的返回。

```
$result = mysql_query("INSERT ...");
if ($result) {
    echo "Created!";
} else {
    echo "Uh oh!  Something went wrong!";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T03:58:13.733

在你的情况下 - 你可以输入：

```
echo "Congratulations, You've been submitted"; 
```

或者你想说的就在插入语句下

# iphone - 我如何定义边缘？

> ID：11200535
> 
> 赞同：0
> 
> 时间：2012-06-26T03:49:07.207
> 
> 标签：iphone, background, cocos2d-iphone, scroll, edges

我已经在 Cocos2d 中编写了一个滚动背景的代码来创建相机的效果，但是我无法阻止相机超出我的背景边缘。我的背景是 1440*1080 的图像。我的代码是：

```
+(id) scene

{
    CCScene* scene = [CCScene node];
    TileDemo* layer = [TileDemo node];
    [scene addChild: layer];
    return scene;
}

-(id) init

{

    if ((self = [super init]))

    {
        self.isTouchEnabled = YES;
        CCSprite *Nivel1 = [CCSprite spriteWithFile:@"Nivel1.png"];
        Nivel1.position = ccp(0.5f, 0.5f);
        [self addChild:Nivel1 z:0 tag:1];
    }

    return self;

}

-(void) dealloc

{
    [super dealloc];

}

-(void) registerWithTouchDispatcher

{

    [[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self priority:0 swallowsTouches:YES];

}

-(BOOL) ccTouchBegan:(UITouch*)touch withEvent:(UIEvent*)event

{
    return YES;
}

-(void) ccTouchEnded:(UITouch*)touch withEvent:(UIEvent*)event

{

}

-(void) ccTouchCancelled:(UITouch*)touch withEvent:(UIEvent*)event

{

}

-(void) ccTouchMoved:(UITouch*)touch withEvent:(UIEvent*)event

{
    CGPoint touchLocation = [touch locationInView: [touch view]];
    CGPoint prevLocation = [touch previousLocationInView: [touch view]];

    touchLocation = [[CCDirector sharedDirector] convertToGL: touchLocation];
    prevLocation = [[CCDirector sharedDirector] convertToGL: prevLocation];

    CGPoint diff = ccpSub(touchLocation,prevLocation);

    CCNode* node = [self getChildByTag:1];
    CGPoint currentPos = [node position];
    [node setPosition: ccpAdd(currentPos, diff)];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:38:49.300

你必须计算你的精灵的最大和最小可能位置并在你的`touchMoved:withEvent:`方法中检查它。在我看来，当你的 sprite 的 anchorPoint 在 (0.f, 0.f) 中而不是标准 (0.5f, 0.5f) 时，计算这些值会更容易。那么你的职位将是

```
CGPoint maxPos = ccp(0.f, 0.f);
CGPoint minPos = ccp((spriteWidth - screenWidth) * (-1), (spriteHeight - screnHeight) * (-1)); 
```

然后在设置之前检查你的精灵的新位置是否在有效范围内。

# android - 按下主页按钮时存在 Android 应用程序。单击应用程序图标启动应用程序。我希望它只是取消暂停

> ID：11200536
> 
> 赞同：2
> 
> 时间：2012-06-26T03:49:20.747
> 
> 标签：android, restart, android-homebutton

在我的游戏中，如果用户点击后退按钮，我会弹出一个对话框，询问他们是否真的要退出。但是，我不能对主页按钮做同样的事情，因为没有办法覆盖它。

如果用户知道任务管理器的技巧，他们可以按住 home 并切换回应用程序而不会失去位置。

如果他们不知道诀窍，他们只需再次选择该图标，该图标将从主菜单重新启动应用程序。

有没有办法覆盖这种行为，而不是从主菜单开始，如果应用程序当前正在运行，它会回到原来的位置？

我知道我可以在应用程序暂停时保存所有内容的状态，然后以编程方式重新加载所有内容并将它们发送到它们所在的位置。如果可能的话，我想避免做所有这些工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T03:53:31.517

> 但是，我不能对主页按钮做同样的事情，因为没有办法覆盖它。

实际上，您可以覆盖主页按钮。

```
 @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if ((keyCode == KeyEvent.KEYCODE_HOME)) {
            //do your stuff
            return true;
        }
        return super.onKeyDown(keyCode, event);
    } 
```

> 有没有办法覆盖这种行为，而不是从主菜单开始，如果应用程序当前正在运行，它会回到原来的位置？

关于这一点，你最好的办法是覆盖`onPause()`every 中的方法`Activity`。但是不能保证它，因为当用户离开它时，操作系统可能会选择杀死你的应用程序（可能是为了资源需求）。因此，在这种情况下，您的应用程序将从主菜单开始，您无能为力。

# javascript - 在另一个文本元素中重复输入文本

> ID：11200540
> 
> 赞同：0
> 
> 时间：2012-06-26T03:49:56.293
> 
> 标签：javascript, css, html, input, duplicates

我正在使用具有预定义代码的购物车。我无法更改 html，但可以使用元素的 css。以下是我必须使用的元素信息。
我想复制用户在同一页面上作为另一个（仅显示类型）文本元素离开该字段时输入到该元素中的信息。

我希望不要使用 Jquery 来做到这一点。

有没有办法使用 value="" 做到这一点？

```
 <input id="ecwid-productoption-12821213-I:0027M_______:00a0:0025_PORTUGU:00caSE" 
    class="gwt-TextBox ecwid-productBrowser-details-optionTextField ecwid-productoption- I:0027M_______:00a0:0025_PORTUGU:00caSE" type="text" maxlwngth="200"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:51:15.903

恐怕，但您必须为此使用 JavaScript。您不能将纯 CSS 用于此类工作。

在 JavaScript 中，你会写：

```
function myFunction() {
    var val = document.getElementById("ecwid-productoption-12821213-I:0027M_______:00a0:0025_PORTUGU:00caSE").value;
    document.getElementById("txt").innerHTML = val;
}​ 
```

html如下：

```
<input id="ecwid-productoption-12821213-I:0027M_______:00a0:0025_PORTUGU:00caSE" 
class="gwt-TextBox ecwid-productBrowser-details-optionTextField ecwid-productoption- I:0027M_______:00a0:0025_PORTUGU:00caSE" type="text" maxlwngth="200" onBlur="myFunction()"> 
```

注意**onBlur="myFunction()"**

假设您有一个跨度作为要填充的文本元素

```
<span id="txt"></span>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:30:46.463

这是一个纯 JavaScript 解决方案。这将覆盖现有的 onload，因此您应该在 Google 上搜索“multiple onload simon willison”。

```
function copyToDest(src, dest) {
    var text = document.getElementById(src).value;
    var destNode = document.getElementById(dest);

    destNode.innerHTML = text;
}

window.onload = function() {
    var srcNode = document.getElementById("ecwid-productoption-12821213-I:0027M_______:00a0:0025_PORTUGU:00caSE");

    srcNode.onblur = function() { copyToDest("ecwid-productoption-12821213-I:0027M_______:00a0:0025_PORTUGU:00caSE", "dest"); };
} 
```

# php - 从 PHP 函数更新 HTML

> ID：11200542
> 
> 赞同：0
> 
> 时间：2012-06-26T03:50:14.867
> 
> 标签：php, jquery

我在使用 PHP 文件的结果更新 HTML 中的 SPAN 时遇到问题。在下面的 HTML 中是一个链接，该链接调用 php 文件，该文件将使用新值更新其上方的 SPAN。

**HTML**

```
 <div class="link-votes">
            <span id="v<?php echo $link_id; ?>"><?php echo $votes; ?></span>
        </div>
        <a href="#" class="vote" id="<?php echo $link_id; ?>" name="up" title="Up vote"></a> 
```

**PHP**

```
if($_POST['id']) {
    $up_value=$row['vote_count'];
    $("#v"+id).html(html) = $up_value;
} 
```

如果我 echo $up_value 打印正确的整数。但我无法更新 SPAN 中的值。\

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T04:00:01.480

您正在将 Javascript 代码与 PHP 代码混合。您正在使用看起来可能来自 JQuery 库的 html() 函数。您可能希望在 PHP 中使用 echo()，然后使用 Javascript 处理该 echo() 语句的返回值。它应该工作，因为 echo() 将在 Javascript 生效之前完成，所需的执行流程也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T04:26:45.197

正如对您问题的评论所示，您正在混合 php 和 jquery 代码。

您的 php 代码应如下所示：

```
if(isset($_POST['id'])) {
  $up_value=$row['vote_count'];
  echo "<script>$('#v".id."').html('".$up_value."');</script>";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T06:56:08.113

谢谢大家，您的建议帮助我解决了这个问题。我为其他新手参考所做的是

```
echo $up_value; 
```

在 php 文件的末尾，然后在我的 jquery 中：

```
success: function(html) {$("#v"+id).html(html);} 
```

# iphone - 将免费应用升级为通过应用内购买付费？

> ID：11200549
> 
> 赞同：2
> 
> 时间：2012-06-26T03:50:54.537
> 
> 标签：iphone, xcode, app-store, in-app-purchase

所以我有一个付费应用程序已经在应用商店出售。我正在使用同一个项目并为免费/精简版创建一个新目标。对于安装免费版的用户，我将有一个购买按钮让他们购买该应用程序。我假设当他们点击购买按钮时，我会提示他们输入密码，然后新的应用程序 ID 会被识别为允许付费版本？这是如何实现免费和付费版本的吗？到目前为止，我只有免费目标和付费目标中的购买按钮。到目前为止，我这样做对吗？我该如何从这里开始？喜欢为完整版的应用内购买编程我的按钮吗？这当然不是一个明确的问题。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T04:31:56.210

过去我制作了一个可以免费下载的目标。在应用程序中，您有一个按钮，用于启动应用程序内购买过程（当您拨打适当的电话时，您无需使用名称和密码进行任何操作）。`NSUserDefaults`用户成功购买应用程序后，我会在“isPurchased”中设置一个布尔值。

在您的代码中，只要您允许用户使用专业升级或免费试用，只需检查布尔值“isPurchased”的值并显示额外内容或不显示。

**编辑尝试按照本教程进行操作。它向您展示了如何在应用程序购买中进行设置以及如何使用按钮开始该过程。 [应用内教程](http://www.raywenderlich.com/2797/introduction-to-in-app-purchases)

# c# - mvc按钮值单击不起作用

> ID：11200551
> 
> 赞同：0
> 
> 时间：2012-06-26T03:50:59.960
> 
> 标签：c#, asp.net-mvc-3, razor

在过去的几天里，我陷入了一个问题，这让我感到困惑。因此，在这种形式中，我有两个文件上传输入，三个按钮，一个具有创建、取消和填充的值。用户浏览并选择一个文件，然后点击上传按钮，其提交的值填充在我的操作方法中，我保存文件，有一个静态类来使用状态机产量等和一些 json 序列化来解析数据并将文件保存在 appdata /uploads 文件夹。当他们点击取消时，我执行了一些功能，当他们点击创建时，我不解析数据，而只是保存它。所有按钮输入都发布到此页面上的相同操作方法。发生的事情是在本地机器上一切正常，在我的服务器上的测试环境中，似乎填充例程甚至没有运行。我什至添加了一个尝试捕获并记录到异常表，但没有任何效果。我无法在测试环境中调试。更不用说解析了，如果用户选择了一个文件并点击了填充，它首先检查文件格式是否是正确的格式，我尝试通过附加无效格式来抛出异常，它甚至没有捕捉到。现在有趣的是在我的保存按钮中单击相同的操作方法，如果我附加无效文件，我的错误处理会捕获错误。我只是感到困惑。请建议！我的错误处理捕获了错误。我只是感到困惑。请建议！我的错误处理捕获了错误。我只是感到困惑。请建议！

```
 <legend>Enter a new Run Log Entry</legend>
            @using (Html.BeginForm("Create", "RunLogEntry", FormMethod.Post, new { enctype = "multipart/form-data" }))
            {

                @Html.ValidationSummary(true)
                <div class="exception">@(ViewBag.ErrorMessage)</div>
                <div class="bodyContent">
                    <span class="leftContent">Load List File (Select): </span><span class="rightContent">
                        <input type="file" name="file" id="file1" style="width: 500px" />
                    </span>
                </div>
                if (Model.LoadListStoredFileName != null)
                                   {
                <div class="bodyContent">
                    <span class="leftContent">Attached Load List: </span><span class="rightContent">
                        @Html.ActionLink(Model.LoadListStoredFileName, "Download", new { @file = Model.LoadListStoredFileName })
                    </span>
                </div>
                                   }
                <div class="bodyContent">
                    <span class="leftContent">Output File (Select): </span><span class="rightContent">
                        <input type="file" name="file" id="file2" style="width: 500px" />
                    </span>
                </div>
                if (Model.OutputStoredFileName != null)
                                   {
                <div class="bodyContent">
                    <span class="leftContent">Attached Output: </span><span class="rightContent">
                        @Html.ActionLink(Model.OutputStoredFileName, "Download", new { @file = Model.OutputStoredFileName })
                    </span>
                </div>
                                   }
                <div class="bodyContent">
                    <span class="leftContent">Import Files: </span>
                    <button name="submit" class="art-button" type="submit" value="Populate" style="width: 100px">
                        Upload</button>
                    <button name="submit" class="art-button" type="submit" value="Remove" style="width: 100px">
                        Remove</button>
                </div>
                <div class="bodyContent">
                    <span class="leftContent">
                        @Html.Label("Operator")
                    </span><span class="rightContent">
                        @Html.DropDownList("OperatorID", String.Empty)
                    </span>
                </div>
                <div class="bodyContent">
                    <span class="leftContent">
                        @Html.Label("Run ID")
                    </span><span class="rightContent">[Generated] </span>
                </div>
                <div class="bodyContent">
                    <span class="leftContent">
                        @Html.Label("Run Start Date / Time")
                    </span><span class="rightContent">
                        @Html.EditorFor(model => model.RunDate)
                        &nbsp;
                        @Html.DropDownList("Hour", ListHelpers.HourList())
                        :
                        @Html.DropDownList("Minute", ListHelpers.Minute15List())
                        &nbsp;
                        @Html.DropDownList("AMPM", ListHelpers.AMPMList())
                    </span>
                </div>
                <div class="bodyContent">
                    <span class="leftContent">
                        @Html.Label("System")
                    </span><span class="rightContent">
                        @Html.DropDownList("SystemID", String.Empty)
                    </span>
                </div>
                <div class="bodyContent">
                    <span class="leftContent">
                        @Html.Label("Run Type")
                    </span><span class="rightContent">
                        @Html.DropDownList("RunTypeID", String.Empty)
                    </span>
                </div>
                <div class="bodyContent">
                    <span class="leftContent">
                        @Html.Label("Run Description")
                    </span><span class="rightContent">
                        @Html.TextAreaFor(model => model.RunDescription, new { style = "width: 600px; height=30px" })
                    </span>
                </div>
                <div class="bodyContent">
                    <span class="leftContent">
                        @Html.Label("Assay Performance Issues")
                    </span><span class="rightContent">
                        @Html.DropDownList("AssayPerformanceIssues1", ListHelpers.YesNoList())
                    </span>
                </div>
                <div class="bodyContent">
                    <span class="leftContent">
                        @Html.Label("Tests/Cycles Requested")
                    </span><span class="rightContent">
                        @Html.EditorFor(model => model.SPTestsRequested)
                    </span>
                </div>

                <div class="bodyContent">
                    <span class="leftContent">
                        @Html.Label("Tests/Cycles Completed")
                    </span><span class="rightContent">
                        @Html.EditorFor(model => model.SPTestsCompleted)
                    </span>
                </div>

                <div class="bodyContent">
                    <span class="leftContent">
                        @Html.Label("Run Status")
                    </span><span class="rightContent">
                        @Html.DropDownList("RunStatusID", String.Empty)
                    </span>
                </div>
                <div class="bodyContent">
                    <span class="leftContent">
                        @Html.Label("Assay")
                    </span><span class="rightContent">
                        @Html.ListBoxFor(model => model.SelectedAssayIDs, new MultiSelectList(RunLog.Domain.Lists.GlobalList.AssayListItems(), "ID", "Name", Model.SelectedAssayIDs))
                    </span>
                </div>
                <div class="bodyContent">
                    <span class="leftContent">
                        @Html.Label("Error Code")
                    </span><span class="rightContent"><span id="ChildDialogLink" class="treeViewLink">Click
                        here to Select Error Codes</span>
                        <br />
                        <span id="ErrorCodeDisplay" style="cursor: pointer; text-decoration: underline;">@(Model.ErrorDescription)</span>
                        @Html.HiddenFor(model => model.ErrorDescription)
                    </span>
                </div>
                <div class="bodyContent">
                    <span class="leftContent">
                        @Html.Label("Service Entry Request")
                    </span><span class="rightContent">
                        @Html.DropDownList("ServiceRequest", ListHelpers.YesNoList())
                    </span>
                </div>
                <div class="bodyContent">
                    <span class="leftContent">
                        @Html.Label("Problem Description")
                    </span><span class="rightContent">
                        @Html.TextArea("ProblemDescription", new { style = "width: 600px; height: 30px" })
                    </span>
                </div>
                <p>
                    <input id="LogType" type="hidden" value="Run" />
                    <input id="ID" type="hidden" value="0" />
                    @if (Model.ExitCode == "1")
                    {
                        @Html.Hidden("ExitCode", Model.ExitCode)
                    }
                    else
                    {
                        <input id="ExitCode" type="hidden" value='0' />
                    }
                </p>
                @Html.HiddenFor(model => model.MaxReplicateId)
                @Html.HiddenFor(model => model.MinReplicateId)
                @Html.HiddenFor(model => model.OutputFileName)
                @Html.HiddenFor(model => model.OutputStoredFileName)
                @Html.HiddenFor(model => model.LoadListFileName)
                @Html.HiddenFor(model => model.LoadListStoredFileName)
                @Html.HiddenFor(model => model.MinTestCompletionDate)
                @Html.HiddenFor(model => model.MaxTestCompletionDate)
                <div class="bodyContent">
                    <span class="leftContent"></span><span class="rightContent">
                        <button name="submit" class="art-button" type="submit" value="Create">
                            Create</button></span>
                </div>
            }
        </fieldset>

Now the controller action method as follows:

   [HttpPost]
        public ActionResult Create(RunLogEntry runLogEntry, String ServiceRequest, string Hour, string Minute, string AMPM,
                                     string submit, IEnumerable<HttpPostedFileBase> file, String AssayPerformanceIssues1)
        {

 if (submit == "Create")
            {

                    if (file.ElementAt(0) != null && !file.ElementAt(0).FileName.Contains("json"))
                    {
                        ModelState.AddModelError(string.Empty, "Please attach a valid .JSON file for Load List selection");
                    }

                    if (file.ElementAt(1) != null && !file.ElementAt(1).FileName.Contains("out"))
                    {
                        ModelState.AddModelError(string.Empty, "Please attach a valid .OUT file for Load List selection");
                    }

           }

if (submit == "Populate")
            {
try
{
if (file.Count() > 0)
    {
                        foreach (var modelValue in ModelState.Values)
                        {
                            modelValue.Errors.Clear();
                        }

                        if (file.ElementAt(0) != null && !file.ElementAt(0).FileName.Contains("json"))
                        {
                            ModelState.AddModelError(string.Empty, "Please attach a valid .JSON file for Load List selection");
                        }
                        else if (file.ElementAt(0) != null)
                        {
                            //If users are attaching another file, delete previous one
                            if ((System.IO.File.Exists(runLogEntry.LoadListStoredFileName)))
                                System.IO.File.Delete(runLogEntry.LoadListStoredFileName);

                            //Save LoadList File:
                            DateTime uploadDate = DateTime.Now;
                            string destinationPath = string.Format("{0}\\{1}\\{2}\\{3}\\", Server.MapPath("~/App_Data/uploads"), uploadDate.ToString("yyyy"), uploadDate.ToString("MMM"), uploadDate.ToString("dd"));
                            if (!Directory.Exists(destinationPath))
                                Directory.CreateDirectory(destinationPath);

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:53:17.273

将记录器添加到应用程序（例如 log4net）并观察这里到底发生了什么。您有几个具有相同名称的标签。有没有可能，它会触发一些副作用？

# css - CSS：格式化容器内的两个浮动div

> ID：11200553
> 
> 赞同：0
> 
> 时间：2012-06-26T03:51:16.473
> 
> 标签：css

我有一个容器：divA。

divB 和 divC 在 divA 内。

divB 和 divC 都是向左浮动的，所以它们是并排的。

```
#divA
height:500px;
width:1000px;

#divB 
width:200px;
height:100%;
float:left;

#divC
height:100%;
float:left;
width:???? 
```

我希望 divC 动态填充 divA 的剩余空间，即我需要它具有动态宽度。我怎样才能做到这一点？

PS 如果我将它的宽度设置为 100%，它会填满整个 divA。我想要的是它填充 divA 的整个宽度，但减去 divB。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T03:52:25.537

给`overflow:hidden`你的`#divc`.Write 像这样：

```
#divB{ 
width:200px;
height:100%;
float:left;
}
#divC{
height:100%;
overflow:hidden;
} 
```

检查这个[http://jsfiddle.net/yY388/](http://jsfiddle.net/yY388/)

# windows - 什么是部署可移植 HTML/JavaScript Windows 应用程序的好框架？

> ID：11200554
> 
> 赞同：2
> 
> 时间：2012-06-26T03:51:17.137
> 
> 标签：windows, user-interface, portability

我需要在一些 Windows 机器上部署一个应用程序，以便从一群人那里收集数据（即，该应用程序将用于收集对一系列调查问题的回答）。该过程是交互式的，在具有特定时序要求的文本和图像显示之间交替显示。我已经使用 HTML 和 JavaScript 编写了一个原型应用程序来实现调查。但是，部署环境有一些独特的限制让我陷入困境：

*   当机器连接到 Internet 时，客户端要求调查应用程序必须在其运行的 PC 上完全本地运行。因此，不允许将调查结果发送到远程服务器。显然，出于安全原因，通常不允许从 Web 浏览器保存到本地文件。

*   不允许在将运行调查的机器上安装应用程序。

*   机器的配置不是*事先知道的*，但我可以假设一些带有 IE8+ 的最新版本的 Windows。

“无远程访问”要求是迟来的，并且已经对编写一个可以将结果发布到 HTTP 服务器的简单 Web 应用程序的计划造成了影响。我现在正在寻找最简单的前进方式。我想到了两种主要方法：

1.  使用提供可以显示 HTML/JavaScript 的控件的 GUI 框架；在 PC 上运行一个成熟的应用程序可以让我将结果保存到文件系统。我从来没有这样做过，但在这个时代，这似乎不应该太难。这将允许我重用我现有的大部分原型实现，但我需要某种方式将 Web 控件之外的结果（将存储在 JavaScript 数据结构中）传输到应用程序的其余部分可以访问它的地方。

2.  使用一些 GUI 框架重新实现整个应用程序（我之前成功使用过 PyQt，虽然不是在 Windows 上）。由于缺乏重用，这种方法显然不如#1 可取。但是，如果 #1 不可行，则可能有必要。

有什么建议最好的方式吗？理想情况下，我正在寻找一种可以从 USB 拇指驱动器或类似设备以“便携式”方式运行的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:47:16.730

也许您可以在服务器端使用带有脚本语言的便携式 Web 服务器。[http://code.google.com/p/mongoose/](http://code.google.com/p/mongoose/) Mongoose，例如可以运行PHP、CGI等..脚本。然后，只需创建一个脚本即可将文件保存到您的硬盘。并让应用程序的其余部分以相同的方式进行。

使用脚本启动 Web 服务器，也可以使用像 K-Meleon 这样的便携式 Web 浏览器来启动应用程序[http://kmeleon.sourceforge.net/](http://kmeleon.sourceforge.net/)这是高度可配置的。或者启动系统资源管理器到您的本地主机 URL。

唯一的问题可能是用户第一次运行服务器时必须修改防火墙？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T03:59:17.497

您看过[HTML 应用程序](http://en.wikipedia.org/wiki/HTML_Application)(HTA) 吗？它们在 IE5+ 中工作，并且可以使用 Windows 脚本主机[写入](http://msdn.microsoft.com/en-us/library/z9ty6h50%28v=vs.84%29)本地驱动器和 UNC 共享...

# c# - DataReader 关联在哪里？如何关闭它？

> ID：11200559
> 
> 赞同：1
> 
> 时间：2012-06-26T03:51:37.063
> 
> 标签：c#, mysql, asp.net-mvc-3

当我运行我的 MVC(C#,use entity Framework+MySql) 项目时，它显示：已经有一个打开的 DataReader 与此 Connection 关联，必须先关闭它。错误代码是：

```
get
  {
  return ((IEntityWithRelationships)this)
                .RelationshipManager
                .GetRelatedReference<users>("blogModel.uid", "users")
                .Value;
   }
set
 {} 
```

此代码在模型文件xx.Designer.cs中，我想知道如何结束GetRelateReference或关闭DataReader，xx.Designer.cs中没有DataReader。.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T03:59:55.053

您可能正在遍历一个结果集（不一定是这个，但共享相同的上下文）。最简单的解决方案是确保`.ToList()`在遍历它们之前调用任何列表（来自 DataContext）。

# c# - 使用 C#，比较/合并两个相同类型的通用列表的有效方法是什么？

> ID：11200561
> 
> 赞同：0
> 
> 时间：2012-06-26T03:52:02.197
> 
> 标签：c#, generics

如果我有两个通用列表 List，并且我想基于 Place.Id 属性将所有唯一的 Place 对象合并到一个 List 中，那么有什么好的方法可以有效地做到这一点？

一个列表将始终包含 50 个，另一个列表可能包含更多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T04:03:14.313

```
result = list1.Union(list2, new ElementComparer()); 
```

您需要创建 ElementComparer 来实现 IEqualityComparer。例如看到[这个](http://msdn.microsoft.com/en-us/library/bb358407.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T03:58:27.293

[Enumerable.Distinct 方法](http://msdn.microsoft.com/en-us/library/bb348436.aspx)

注意：.NET 3.5 及更高版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T04:26:23.280

如果你想强调效率，我建议你自己写一个小方法来做合并：

```
List<Place> constantList;//always contains 50 elements. no duplicate elements
List<Place> targetList;
List<Place> result;

Dictionary<int, Place> dict;
for(var p in constantList)
   dict.Put(p.Id,p);

result.AddRange(constantList);

for(var p in targetList)
{
   if(!dict.Contains(p.Id))
       result.Add(p)       
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T05:04:07.667

如果您想避免必须定义自己的 ElementComparer 而只使用 lambda 表达式，可以尝试以下方法：

```
List<Place> listOne = /* whatever */;
List<Place> listTwo = /* whatever */;
List<Place> listMerge = listOne.Concat(
                           listTwo.Where(p1 => 
                               !listOne.Any(p2 => p1.Id == p2.Id)
                           )
                        ).ToList(); 
```

本质上，这只会将 Enumerable listOne 与 listTwo 中的所有元素的集合连接起来，这样这些元素就不会在 listOne 和 listTwo 之间的交集中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T16:44:50.643

如果您需要速度，则需要使用散列机制进行比较。我要做的是维护您已经读取的 id 的 Hashset，然后如果尚未读取 id，则将元素添加到结果中。您可以根据需要对任意数量的列表执行此操作，并且如果您想在合并结束之前开始使用，则可以返回 IEnumerable 而不是列表。

```
 public IEnumerable<Place> Merge(params List<Place>[] lists)
 {
     HashSet<int> _ids = new HashSet<int>();
     foreach(List<Place> list in lists)
     {
         foreach(Place place in list)
         {
             if (!_ids.Contains(place.Id))
             {
                 _ids.Add(place.Id);
                 yield return place;
             }
         }
     }
 } 
```

一个列表有 50 个元素，而另一个列表有更多元素这一事实没有任何含义。除非你知道这些列表是有序的......

# json - 如何在 Spring Web 应用程序中配置 Netty 客户端处理程序

> ID：11200567
> 
> 赞同：0
> 
> 时间：2012-06-26T03:52:40.270
> 
> 标签：json, spring, jsf, jsf-2, netty

在 Spring JSF Web Application 中将 Netty Client Handler 配置为消息接收点是否有特定的方法？

如果某些独立的 Java 应用程序充当 Netty 服务器 我如何才能接收到 Spring JSF Web 应用程序的消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:40:28.003

我假设您的问题是如何在使用 JSF 的 Web 应用程序中使用 spring 配置 netty。如果是这样，请参阅此链接[Using JAVA NIO framework in SPRING server](https://stackoverflow.com/questions/3758970/using-java-nio-framework-in-spring-server/5778212#5778212)。

# api - 我应该向没有足够访问权限的 REST API 用户返回 401 或 405 响应代码吗？

> ID：11200570
> 
> 赞同：22
> 
> 时间：2012-06-26T03:53:07.500
> 
> 标签：api, http, rest, httpresponse, http-status-codes

我正在开发一个 API，它也将具有身份验证/授权组件。

任何人，无论身份验证状态如何，都可以写入（POST），但取决于您是未经身份验证、作为普通用户身份验证还是作为管理员身份验证以及您尝试访问的资源我将返回不同的响应获取、删除和放置。

我正在尝试为未经过身份验证和/或授权的用户找出最合适的响应代码。

请记住[http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)：

> 未经授权-> 401
> 
> 禁止 -> 403
> 
> 方法不允许 -> 405

让我们使用一个具体的例子：

*   John Doe 未经身份验证，在 DELETE 上他应该收到 401 还是 405？
*   Amy 已通过身份验证但未授权，在 DELETE 时她应该收到 403 还是 405？

（请记住，即使 John 和 Amy 被禁止或未经授权，这并不意味着他们无法使用不同的 HTTP VERB 访问相同的资源。）

谢谢。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2016-02-02T15:25:22.480

在这种情况下，我认为提供一些示例以进行澄清是有用的：

*   未经身份验证 + 支持的方法 =`401`
*   未经身份验证 + 不支持的方法 =`405`
*   认证 + 授权 + 支持的方法 =`2xx`
*   认证 + 授权 + 不支持的方法 =`405`
*   已认证 + 未授权 + 支持的方法 =`403`
*   已认证 + 未授权 + 不支持的方法 =`405`

换句话说，从程序的角度来看：

1.  检查是否支持方法。如果不：`405`
2.  如果支持，请检查用户是否已通过身份验证。如果不：`401`
3.  如果已通过身份验证，请检查用户是否已获得授权。如果不：`403`
4.  如果授权：`2xx`

**编辑：**我偶然发现了这张图，并认为它可能对任何可能偶然发现这篇文章的人有用。点击放大。

[![在此处输入图像描述](../Images/32803d60224e224ab438a5a460588d68.png)](https://i.stack.imgur.com/s0JJB.jpg)

原文[在这里](https://raw.githubusercontent.com/for-GET/http-decision-diagram/master/httpdd.png)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-26T04:15:32.303

`405 Method Not Allowed`*仅当您*不支持该方法时才应使用。它不应该用来告诉*客户*他们不能使用这种方法。

因此，在您的情况下，唯一好的 HTTP 代码是`401 Unauthorized`. 它指示客户端该方法存在并且他们需要登录才能访问它。

# r - ddply 调用中的 prop.table

> ID：11200571
> 
> 赞同：2
> 
> 时间：2012-06-26T03:53:07.750
> 
> 标签：r, plyr

所以这是一个简单的问题，我不清楚这个 plyr 调用出了什么问题。

```
library(plyr) 
```

一些带有二项式结果（`y1`）和两个四级分类因子（`x1`和`x2`）的愚蠢数据：

```
df <- data.frame(x1 = sample(letters[1:4], 4000,T),
                 x2 = sample(LETTERS[5:8], 4000,T),
                 y1 = rbinom(n=4000,1,.5)) 
```

我想要一个包含每个结果的行比例的表格 - 我认为以下内容会起作用

```
foo <- ddply(df, .(x1,x2), function(i) prop.table(table(i$y1),1)) 
```

但它给了我：

```
head(foo)

  x1 x2 0 1
1  a  E 1 1
2  a  F 1 1
3  a  G 1 1
4  a  H 1 1
5  b  E 1 1
6  b  F 1 1 
```

这显然不是我想要的。我的遗漏是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T04:10:38.983

尝试

```
foo<-ddply(df, .(x1,x2), function(i) prop.table(table(i$y1)))

> head(foo)
  x1 x2         0         1
1  a  E 0.5365854 0.4634146
2  a  F 0.4936170 0.5063830
3  a  G 0.5176471 0.4823529
4  a  H 0.4568966 0.5431034
5  b  E 0.4780702 0.5219298
6  b  F 0.5617530 0.4382470 
```

不知道这是否是你想要的

# android - 获取钛金属日期选择器

> ID：11200577
> 
> 赞同：1
> 
> 时间：2012-06-26T03:54:27.733
> 
> 标签：android, datepicker, titanium-mobile

我想在日期选择器中获取值并添加到 textfield_date..我使用的代码如下..它运行良好，但显示：2012 年 2 月 1 日星期三...但我想显示：2012 年 1 月 4 日我必须如何改变属性？

```
 var minDate = new Date();
                minDate.setFullYear(2012);
                minDate.setMonth(0);
                minDate.setDate(1);

                var maxDate = new Date();
                maxDate.setFullYear(2012);
                maxDate.setMonth(11);
                maxDate.setDate(31);

                var value = new Date();
                value.setFullYear(2012);                    
                value.setMonth(0);
                value.setDate(1);

                var picker = Ti.UI.createPicker({
                type:Ti.UI.PICKER_TYPE_DATE,
                minDate:minDate,
                maxDate:maxDate,
                value:value
                });

                picker.addEventListener('change',function(e)
                {
                    textfield_date.value = e.value.toLocaleString();
                }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T04:21:44.630

用这个：

```
picker.addEventListener('change',function(e){
    var pickerdate = e.value;
    var day = pickerdate.getDate();
    var month = pickerdate.getMonth();
    var year = pickerdate.getFullYear();
    var newdate = day + "/" + month + "/" + year ;
}); 
```

# iphone - 应用启动后保存联系人

> ID：11200581
> 
> 赞同：-1
> 
> 时间：2012-06-26T03:55:22.557
> 
> 标签：iphone, objective-c, ios

我不知道这是否可能。

我想在第一个视图中启动应用程序后保存一个数字（当然会提示用户）。这将在直接从应用程序发送消息时使用。

有人试过这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T04:04:19.383

我相信您可以通过将[地址簿 UI](http://developer.apple.com/library/ios/#documentation/AddressBookUI/Reference/AddressBookUI_Framework/_index.html)框架与[地址簿](http://developer.apple.com/library/ios/#documentation/AddressBook/Reference/AddressBook_iPhoneOS_Framework/_index.html)框架结合使用来做到这一点。地址簿 UI 框架便于在地址簿数据库中显示、编辑、选择和创建记录，并在后台使用地址簿框架。

因此，在您的情况下，您将在启动时启动通讯簿 UI。

希望这可以帮助！

# javascript - 如何快速清空 IMG 元素？

> ID：11200583
> 
> 赞同：2
> 
> 时间：2012-06-26T03:55:52.330
> 
> 标签：javascript, image

我已经建立了一个模态图像库。当用户单击下一步查看下一张图片时，我运行如下内容：

```
document.getElementById('gallery-image').src = newSRC; 
```

我的问题是，当用户单击图像实际更改的位置旁边时会有延迟。（由于正在加载新图像）。我想在用户单击下一步时“清空”图像元素。我试过这样做：

```
 document.getElementById('gallery-image').src = '';
    setTimeout(function(){
        document.getElementById('gallery-image').src = newSRC;
        }, 100); 
```

无济于事。在新图像开始加载之前，如何“清空” IMG 元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T05:02:32.207

有三种主要方法可以做到这一点。您的问题似乎暗示您想要创建类似于[幻灯机](https://en.wikipedia.org/wiki/Carousel_slide_projector)更改幻灯片的效果，所以我在写这个答案时考虑到了这一点。

1.  暂时将`src`属性设置为 1x1 透明 GIF 而不是空字符串。这与您尝试做的最相似，也许是最简单的方法。

    下面的数据 URI 来自[编码为 data-uri 的空白图像](https://stackoverflow.com/questions/9126105/blank-image-encoded-as-data-uri)，应该可以在 Internet Explorer 8 或更高版本以及其他主要浏览器中使用。使用数据 URI 可以避免在 Web 服务器上存储单独的文件并在页面加载时预加载它。您可能需要设置 img 元素的`width`和`height`属性来保留页面的布局。

    此代码不会在时间延迟开始时预加载图像（尽管可以这样做），因此观看者的*明显*延迟是编程时间延迟和加载图像所用时间的总和。只有当浏览器已经缓存了图像或者 Web 服务器在本地网络上时，加载时间才会接近于零。

    ```
    var gi = document.getElementById('gallery-image');
    gi.src = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';
    setTimeout(function(){
        document.getElementById('gallery-image').src = newSRC;
    }, 100); 
    ```

2.  临时设置，并在时间延迟过去且图像已加载后`display: none;`使用函数撤消更改。`onload`下面的代码在时间延迟开始时开始加载图像，这取决于查看器的连接速度，可能会导致更一致的明显延迟。

    ```
    var gi = document.getElementById('gallery-image');
    var delayElapsed = false;
    var imageLoaded = false;

    gi.style.display = 'none';

    setTimeout(function(){
        delayElapsed = true;
        maybeShowImage();
    }, 100);

    gi.onload = function() {
        imageLoaded = true;
        maybeShowImage();
    };
    gi.src = newSRC;

    function maybeShowImage() {
        if (!delayElapsed || !imageLoaded) {
            return;
        }
        gi.style.display = '';
    } 
    ```

3.  执行上述操作，但`visibility: hidden;`改为设置。这可能具有不影响页面布局的优点`display: none;`。

    ```
    // [...]

    gi.style.visibility = 'hidden';

    // [...]

    function maybeShowImage() {
        if (!delayElapsed || !imageLoaded) {
            return;
        }
        gi.style.visibility = '';
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T03:59:39.180

您可以隐藏图像然后重新显示它...

```
// Hide
document.getElementById('gallery-image').style.display = "none";

// Show
document.getElementById('gallery-image').style.display = ""; 
```

# iphone - NSMutableArray 难度

> ID：11200584
> 
> 赞同：2
> 
> 时间：2012-06-26T03:56:02.087
> 
> 标签：iphone, ios, xcode, nsmutablearray, icarousel

如果您想查看我遇到问题的代码，请点击以下链接： [代码](http://pastebin.com/SKZvawqV)

我的问题与我[过去的问题有关](https://stackoverflow.com/questions/10767569/icarousel-stop-at-user-picked-index)。

我的 确实有问题`NSMutableArray`，我目前正在`iCarousel`用于我的`slotMachine`对象（slot1 和 slot2）。我的应用程序是这样工作的：

从`PhotoViewController`我制作了一个包含缩略图的视图，然后将其框架分配给按钮。因此，如果按下 1 个图像，它将通过`NSUserDefaults`. 然后我会在我的`carouselViewController`

我想调整阵列，但我不能。我也在这里尝试过我的问题： [与 NSMutableArray 比较](https://stackoverflow.com/questions/11389619/comparing-with-nsmutablearray) 如果我能做到这一点，`Array 2`那将很容易，但仍然无法正常工作。

（**附加信息**:)

我已经这样做了，有一个 Viewcontroller 包含 UIImageView 和一个按钮，所以当用户点击它时，我的`CustomPicker`弹出。My`CustomPicker`包含用户在相机胶卷上选取的图像。所以每个按钮都有一个特定的值发送给我`iCarouselView`using `NSUserDefaults`。carousel1 用于第一个插槽，carousel2 用于第二个插槽。

这是我想做的：我想强制让它停止到用户选择的索引。（我在我做的`carouselDidEndScrollingAnimtaion`）

在我的`carouselDidEndScrollingAnimation`方法中，我测试了我的所有条件（单独），它在比较方面非常有效。然后当我结合条件时，前两个比较或STOP是正确的，但后面两个总是错误的。或者有时搞混了。

我需要滚动用户选择的两个特定索引/整数（我已经这样做了）能够滚动其中的 2 对，但接下来的两个总是错误的，因为我认为索引正在调整。

**图片：**

下面的图片是我的`PhotoViewController`，其中包含我的游戏的比较阶段`SETTING`。`UIImageVIew`带有`UIButton`.Image的，将根据它输入的数字将被强制显示，并且应该强制显示。

![在此处输入图像描述](../Images/91c728e5668984a52e90f5dcce7c88df.png)

当我的 iCarousel 启动时，它会在下图中停止（与上图不同）： ![在此处输入图像描述](../Images/9c57607130c7b678232512a3cb4fd589.png)

将强制滚动到输入的图像中`PhotoViewController`

进入： ![在此处输入图像描述](../Images/f0399440fd87e469688921f177a7e1e6.png)

**总结：** 就是这样。我有一个`settingsView`从那里，我将为`Slot1`&导入我的图像（多个） `Slot2`。然后在另一个视图中`PhotoViewController`显示上面的图像。第一列对应于第一个插槽，然后是第二个插槽。如果按下视图（例如`No. 1`，`Slot 1`它将加载图像的缩略图，加载从`Picker`.`Slot 1`

你必须做 4 次（对）----> 这里显示的我通过 NSUserDefaults 通过 button.tag 获取他们的索引，然后发送到`iCarouselView`.

然后当你完成（按下`Done`按钮）时，它会转到`iCarouselView`then，如上图所示，这就是它的视图。按下时它将旋转几秒钟，然后当完成但不停留在用户选择的位置时`PhotoView`，它将强制滚动到该索引。

**问题：**

有没有办法让我的数组或我的 iCarousel.view 在我删除时不调整它们的索引。仍然以正确的方式保留我的索引。或者是否有其他解决方案，比如调整我的数组，就像调整我`PhotoViewController`选择的索引一样。因为我认为当我的数组保留它们的索引时，即使删除我也能解决这个问题。但还是不行。

希望你能理解我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T17:02:33.043

很难知道这里的问题是什么。您是否对图像使用单个 NSMutableArray 并使用 NSUserDefaults 值来获取数组索引处的对象？

我不能 100% 确定正在发生的事情。用户做什么（以及在什么视图中）以及之后触发了什么（呈现哪个视图）。

您是否试图阻止图像上与从前一个视图中选取的图像相同的“旋转”图像？

根据您上面的图像，图像被一个索引关闭。每次都是这样吗？您从数组中提取可能存在问题。

如果您给我更多信息，我可以提供帮助。

我再次查看了您粘贴的代码，我认为这可能是您的问题

```
if (twoSlot1 > [(UIImageView*)[self.carousel2 currentItemView] tag]){            
                [self.carousel1 scrollToItemAtIndex:(-twoSlot1)-2 duration: 3.5f];
            } else {
                [self.carousel1 scrollToItemAtIndex:-twoSlot1 duration: 3.5f];
            } 
```

在所有其他类似的代码块上，您都可以在其中调用每个轮播。在上面的代码中，您调用 carousel 1 两次。

```
if (slot2 > [(UIImageView*)[self.carousel1 currentItemView] tag]){
            [self.carousel1 scrollToItemAtIndex:(-slot2)-2 duration: 3.0f];
            } else {
            [self.carousel1 scrollToItemAtIndex:-slot2 duration: 3.0f];    
            }

            if (twoSlot2 > [(UIImageView*)[self.carousel2 currentItemView] tag]){
            [self.carousel2 scrollToItemAtIndex:(-twoSlot2)-2 duration: 3.5f];    
            } else {
            [self.carousel2 scrollToItemAtIndex:-twoSlot2 duration: 3.5f];
            } 
```

当您应该呼叫号码 2 时，您呼叫 self.carousel1。

这个对吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T08:40:37.753

参考你的问题。您需要一个在从数组中删除成员时不更改其成员索引的数组。

我想你可以使用 NSMutableDictionary。可以说它是一个关联数组，其中的索引是您选择的，当您从中间删除一个成员时，它们保持不变。您仍然可以使用 0..n 作为您的索引。你仍然可以使用一些你熟悉的 NSArray 中的方法，例如 count。您可以使用枚举器来遍历字典的所有成员。另一方面，你仍然可以使用你的 for 循环，因为你习惯于将它们与数组一起使用。只需准备好 a) objectForKey:i 如果键/索引不存在（例如被删除）可能会返回 nil，并且该计数会重新调整对象的数量，但不会像数组那样返回最高索引+1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T20:30:15.383

> 有没有办法让我的数组或我的 iCarousel.view 在我删除时不调整它们的索引。仍然以正确的方式保留我的索引。或者还有其他解决方案，比如调整我的数组，就像调整我的 PhotoViewController 选择的索引一样。因为我认为当我的数组保留它们的索引时，即使删除我也能解决这个问题。但还是不行。

您必须修改 iCarousel 管理其索引的方式的唯一方法是修改代码。实际上，如果您查看`removeViewAtIndex`iCarousel.m 中的方法，您会看到索引是通过 NSDictionary 管理的，并且在删除时，字典会重新排列（项目重新排序）。你可以采取这种方法：

```
- (void)removeViewAtIndex:(NSInteger)index
{
    NSMutableDictionary *newItemViews = [NSMutableDictionary dictionaryWithCapacity:[itemViews count] - 1];
    for (NSNumber *number in [self indexesForVisibleItems])
    {
        NSInteger i = [number integerValue];
        if (i < index)
        {
            [newItemViews setObject:[itemViews objectForKey:number] forKey:number];
        }
        else if (i > index)
        {
            [newItemViews setObject:[itemViews objectForKey:number] forKey:[NSNumber numberWithInteger:i - 1]];
        }
    }
    self.itemViews = newItemViews;
} 
```

您可以对阵列应用相同的逻辑，以便轮播和阵列保持同步。当然，如果您将索引存储在某处（slot1/slot2/slot2/slot4？），您还应该在删除元素后更新它们的值。

另一方面，我认为您在这里要问的是如何做一些您认为可以解决您遇到的问题的事情，但您并没有真正解释问题是什么。事实上，如果我理解正确，你所做的是：

1.  旋转旋转木马；

2.  当轮播停止时，如果它不是偶然出现在所需的项目上，则“强制”它滚动到该项目。

没有理由在删除某些元素后这不应该工作（除非 iCarousel 有一些错误，那么解决方案就是捕捉错误）。唯一的部分是知道您想要移动到哪个索引。

作为建议，我将从简化您的委托`carouselDidEndScrollingAnimation`方法开始。确实，您`carouselDidEndScrollingAnimation`有一个名为 的参数`carousel`，我认为这是您在该方法中应该引用的唯一轮播。如果你没有看到它，这就是推理：你的每个轮播将停止滚动并且`carouselDidEndScrollingAnimation`将被调用；这样该方法将被调用两次。每次执行该方法时，您都将修改 carousel1 和 carousel2 的状态（通过调用`scrollToItemAtIndex`）；因此，在每个轮播上，您将调用`scrollToItemAtIndex`两次。

这对我来说听起来不太正确。因此，您应该找到一种方法，在 carousel1`carouselDidEndScrollingAnimation`调用时仅滚动 carousel1，而在 carousel2 调用时仅滚动`carouselDidEndScrollingAnimation`carousel2。

更一般地说，我想提出的另一点是：

1.  让旋转木马停下来；

2.  再次滚动它以使其到达所需位置；

似乎不是最好的实现，因为用户会看到轮播停止然后重新开始。

我解决这个问题的方法是直接修改 iCarousel 实现，以便它支持您需要的这种特定行为。

具体看一下`step`iCarousel.m中的方法。这在每一帧被调用以产生轮播动画。现在，在这个方法中有一个`decelerating`分支：

```
else if (decelerating)
{
    CGFloat time = fminf(scrollDuration, currentTime - startTime);
    CGFloat acceleration = -startVelocity/scrollDuration;
    CGFloat distance = startVelocity * time + 0.5f * acceleration * powf(time, 2.0f);
    scrollOffset = startOffset + distance;

    [self didScroll];
    if (time == (CGFloat)scrollDuration)
    {
        decelerating = NO;
        if ([delegate respondsToSelector:@selector(carouselDidEndDecelerating:)])
        {
            [delegate carouselDidEndDecelerating:self];
        }
        if (scrollToItemBoundary || (scrollOffset - [self clampedOffset:scrollOffset]) != 0.0f)
        {
            if (fabsf(scrollOffset/itemWidth - self.currentItemIndex) < 0.01f)
            {
                //call scroll to trigger events for legacy support reasons
                //even though technically we don't need to scroll at all
                [self scrollToItemAtIndex:self.currentItemIndex duration:0.01];
            }
            else
            {
                [self scrollToItemAtIndex:self.currentItemIndex animated:YES];
            }
        }
        else
        {
            CGFloat difference = (CGFloat)self.currentItemIndex - scrollOffset/itemWidth;
            if (difference > 0.5)
            {
                difference = difference - 1.0f;
            }
            else if (difference < -0.5)
            {
                difference = 1.0 + difference;
            }
            toggleTime = currentTime - MAX_TOGGLE_DURATION * fabsf(difference);
            toggle = fmaxf(-1.0f, fminf(1.0f, -difference));
        }
    }
} 
```

您会看到，当轮播停止减速时，它会再次滚动。这与您所做的完全相同，因此您可能会找到一种方法来修改此代码并使轮播精确地滚动到您需要的索引。通过这种方式，您将获得更顺畅的旋转木马旋转。

希望这有助于并为冗长的回复道歉。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T06:48:41.923

我很难理解你的整体问题，但我可以收集到你问题的症结在于：

> 有没有办法让我的数组或我的 iCarousel.view 在我删除时不调整它们的索引。

我不知道它是否会解决您更大的问题，但是使用 NSMutableDictionary 来模拟数组应该允许您这样做。您可以简单地将索引用作字典的键，然后当您删除与索引关联的项目时，不会调整其他索引。例如：

```
NSMutableDictionary *arrayDict = [[NSMutableDictionary alloc] init];
[arrayDict setValue:foo forKey:[NSNumber numberWithInt:[arrayDict count]]];
[arrayDict setValue:bar forKey:[NSNumber numberWithInt:[arrayDict count]]];
[arrayDict setValue:fooBar forKey:[NSNumber numberWithInt:[arrayDict count]]]; 
```

然后您可以使用 .at 索引访问对象`[arrayDict objectForKey:[NSNumber numberWithInt:index]]`。

请注意，对 setValue:forKey: 的 key 参数使用 NSNumber 会产生警告，但您可以放心地忽略它（或者如果它打扰您，请使用字符串表示）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T15:46:45.280

不确定我是否完全理解，但是当你的可变数组中的一个元素被删除时，而不是仅仅删除它，也许将它与另一个“虚拟”占位符对象一起插入？这样，当删除发生时，您的索引根本不会改变

# java - 向 JTextfield 添加提示文本属性

> ID：11200585
> 
> 赞同：5
> 
> 时间：2012-06-26T03:56:27.810
> 
> 标签：java, swing, netbeans, jtextfield

我正在使用 Netbeans IDE。我想以`JTextfield`这样一种方式提供提示文本，即当用户输入文本时，`JTextField`它会被清除并接受用户输入。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-25T18:50:53.387

我不知道 David Kroukamp 已经看到了什么 propt-text-fields，但是使用以下代码我创建了我知道的那些 textFields ;)

```
import java.awt.event.FocusEvent;
import java.awt.event.FocusListener;

import javax.swing.JTextField;

public class PTextField extends JTextField {

    public PTextField(final String proptText) {
        super(proptText);
        addFocusListener(new FocusListener() {

            @Override
            public void focusLost(FocusEvent e) {
                if(getText().isEmpty()) {
                    setText(proptText);
                }
            }

            @Override
            public void focusGained(FocusEvent e) {
                if(getText().equals(proptText)) {
                    setText("");
                }
            }
        });

    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T04:35:13.750

您可以向文本字段添加一个简单的焦点侦听器，并在焦点丢失时验证文本字段的数据，如下所示：

```
import java.awt.EventQueue;
import java.awt.GridLayout;
import java.awt.event.FocusEvent;
import java.awt.event.FocusListener;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JTextField;

/**
 *
 * @author David
 */
public class Test extends JFrame {

    private JTextField textField, textField2;

    public Test() {
        createAndShowUI();
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                Test test = new Test();
            }
        });
    }

    private void createAndShowUI() {
        setTitle("Test");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        createComponents();
        addComponentsToContentPane();
        addListeners();

        pack();
        setVisible(true);
    }

    private void addComponentsToContentPane() {
        getContentPane().setLayout(new GridLayout(2, 1));

        getContentPane().add(textField);
        getContentPane().add(textField2);
    }

    private void createComponents() {
        textField = new JTextField(10);
        textField2 = new JTextField("Click here to lose focus of above textField");
    }

    private void addListeners() {
        textField.addFocusListener(new FocusListener() {

            @Override
            public void focusGained(FocusEvent fe) {
            }

            @Override
            public void focusLost(FocusEvent fe) {
                if (textField.getText().length() >=1) {
                    JOptionPane.showMessageDialog(null, "You entered valid data");
                    textField.setText("");
                }else {
                    JOptionPane.showMessageDialog(null, "You entered invalid data");
                    textField.grabFocus();//make the textField in foucs again
                }
            }
        });
    }
} 
```

为此，请在 NetBeans 中右键单击`Component`，选择*Events* -> *Focus* -> *focusLost*。

# ruby-on-rails - 在 Rails SQL 缓存中使用 Octopus gem

> ID：11200586
> 
> 赞同：0
> 
> 时间：2012-06-26T03:56:39.953
> 
> 标签：ruby-on-rails, ruby-on-rails-3, caching, octopus

我们在 Rails 应用程序中使用 octopus 将读取查询直接转发到我们的从盒，并写入我们的主盒。不得不说它是一个很棒的宝石，但我们注意到对从属服务器的查询放弃了 Active Record 的默认 SQL 缓存。有点违背了水平扩展数据库服务器的目的，只是失去了有助于扩展的缓存层。

有没有人知道如何解决这个问题，或者有更好的宝石可以使用。我们不需要章鱼提供的分片功能；只是复制。

提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:38:32.387

为连接打开 SQL 缓存的方式是通过执行类似的操作

```
ActiveRecord::Base.connection.cache do
    # the query cache is used here
end
# and turned off by here 
```

对于主要的 activerecord 连接，rails 有一个机架中间件，可以为每个请求设置它。如果您希望从属连接发生这种情况，那么您需要自己做一些类似的事情来为您的第二个连接启用缓存（比机架中间件稍微容易一些`around_filter`）

我对章鱼不是很熟悉，但是这两个连接似乎很可能是独立的——activerecord 不会仅仅因为你在另一个连接上做了一些写操作就知道它在你的读连接上的缓存无效

# winforms - MSDN 上已退休的内容模型视图演示者

> ID：11200587
> 
> 赞同：3
> 
> 时间：2012-06-26T03:56:51.830
> 
> 标签：winforms, mvp

我正在学习使用模型视图演示者模式使用实体框架开发 windows 窗体应用程序，因为它是在 stackoverflow 上开发 windows 窗体的建议设计模式。另一方面，MSDN 上每篇关于 MVP 的文章都有一个“已停用的内容”注释。这很令人困惑，因为我不知道是否应该继续学习 MVP 并尝试在 Windows 窗体开发中实现它，还是应该遵循另一种更好的设计模式。有什么建议吗？

链接： http: [//msdn.microsoft.com/en-us/library/ff647543.aspx](http://msdn.microsoft.com/en-us/library/ff647543.aspx)
[http://msdn.microsoft.com/en-us/library/ff649820.aspx](http://msdn.microsoft.com/en-us/library/ff649820.aspx)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T04:12:43.677

对于 WinForms，您应该坚持使用[MVP（监督控制器）](http://martinfowler.com/eaaDev/SupervisingPresenter.html)。

[您看到已停用内容的原因是，Microsoft 在新的 Windows 8 Metro Style 应用程序](http://msdn.microsoft.com/en-us/library/windows/apps/hh464920.aspx)上投入了大量资金。使用 C++、C# 和[WPF](http://msdn.microsoft.com/en-us/library/ms754130.aspx)或[HTML5 + JavaScript构建的](http://msdn.microsoft.com/en-us/library/windows/apps/br211385.aspx)[WinRT将成为您未来构建应用程序的方式，因此](http://msdn.microsoft.com/en-us/library/windows/apps/br211377.aspx)*至少*学习其中的一种是有意义的。

 *WinForms 没有被正式弃用，但不要指望它会得到 MS 的喜爱。我会花一些时间学习[XAML](http://msdn.microsoft.com/en-us/library/ms752059.aspx)和[MVVM 模式](http://wpftutorial.net/MVVM.html)。话虽如此，所有[UI 设计模式](http://martinfowler.com/eaaDev/uiArchs.html)（MVC、MVP、MVVM）的概念都非常相似，因此学习一个将帮助您理解其他的。*

# php - CakePHP 2.x 异常可以以相同的请求格式响应吗？

> ID：11200588
> 
> 赞同：1
> 
> 时间：2012-06-26T03:56:51.720
> 
> 标签：php, cakephp

我正在使用文档中的 REST 指令在 Cake2.1.3 中编写 API。之前在 Cake1.3 中编写过一个，我将使用现在已弃用的 cakeError 类以请求格式的 HTTP 代码发出响应。例如，如果我请求[http://example.com/widgets/ view/invalid-code.json](http://example.com/widgets/view/invalid-code.json)， cakeError 会以 JSON 格式发送 400 错误代码（和消息）。Cake 2.x 使用异常来处理这个问题。[根据文档](http://book.cakephp.org/2.0/en/development/exceptions.html)：

```
throw new BadRequestException() 
```

发出带有“错误请求”消息的 400 HTTP 代码，但它似乎只在 HTML 格式中这样做。它可以自动以请求的格式响应吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-10T18:09:43.427

虽然您可以使用选定的答案来完成，但更简单的方法是让 Cake 自动呈现它。Cake 在渲染异常时使用相同的视图查找规则。这意味着只需将“json”文件夹添加到视图中的错误文件夹，并创建适当的视图文件。

```
/View
  /Errors
    /json
      error404.ctp
  error404.ctp 
```

错误视图可能很简单，如下所示：

```
<?php

echo json_encode(array(
    'error' => array(
        'name' => $name,
        'url' => $url
    )
)); 
```

然后访问`/users/missing-page.json`将呈现以下json：

```
{"code":404,"url":"\/users\/missing-page.json","name":"Action UsersController::missing-page() could not be found."} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T17:07:01.380

据我所知，没有办法自动执行此操作，但您可以[编写自己的异常处理程序](http://book.cakephp.org/2.0/en/development/exceptions.html#create-your-own-exception-handler-with-exception-handler)来检查请求并输出适当的内容类型。

# iphone - 替代默认的 Open GLES 线 (3D)？

> ID：11200593
> 
> 赞同：0
> 
> 时间：2012-06-26T03:57:59.213
> 
> 标签：iphone, c++, opengl-es, 3d

我目前正在尝试在我的项目中实现剪影算法（使用 Open GLES，它适用于移动设备，目前主要是 iPhone）。其中一个要求是绘制一组 3D 线。默认 OpenGL 线的问题在于，当它们很粗时（出现间隙），它们不能很好地以某个角度连接。其他微妙的伪影也很明显，它们降低了线条的视觉吸引力。

现在，我已经研究过使用某种四边形条作为替代方案。但是，在屏幕空间中绘制四边形需要某种可见性检测——在实际 3D 世界中被遮挡的线条不应该是可见的。

有许多方法可以解决这个问题 - 即定量不可见性。但考虑到需要采用光线投射，这种方法很难有效实施，尤其是在处理能力有限的移动设备上。环顾四周，我发现[了这篇论文](http://gfx.cs.princeton.edu/pubs/Cole_2010_TFM/cole_tfm_preprint.pdf)，它描述了几种使用 z-buffer 采样来实现这种效果的方法。但是，我不是这方面的专家，虽然我在一定程度上了解这些技术背后的理论，但我不确定如何进行实际实施。我想知道是否有人可以在技术层面指导我 - 在 OpenGLES 方面。我也愿意接受有关一般 3D 线可见性的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T04:12:17.157

我制定了一个在 iPhone 4S 上运行良好的解决方案（未在任何其他设备上测试）。它建立在渲染世界空间四边形的思想之上，并在 GPU 上进行轮廓检测。它按照以下方式工作（双关语不是故意的）：

*   我们生成边缘信息。这由网格中的边/“线”列表组成，对于每个我们关联两个法线，它们代表边两侧的 tris。
*   这被处理成一组上传到 GPU 的四边形 - 每个四边形代表一条边。每个四边形的每个顶点都伴随着三个属性（vec3s），即边缘方向向量和两个相邻的三法线。所有四边形都通过无“厚度” - 即两端的顶点位于相同的位置。然而，对于相同位置的每个顶点，边缘方向向量是相反的。这意味着它们将在需要时以相反的方向挤出以形成四边形。
*   我们通过在每个三范数和视图向量之间执行两个点积并检查它们是否具有相反的符号来确定顶点是否是顶点着色器中可见边的一部分。（有关详细信息，请参阅网络周围的标准轮廓算法）
*   对于属于可见边缘的顶点，我们采用边缘方向向量与视图向量的叉积来获得面向屏幕的“挤出”向量。我们将此向量添加到顶点，但除以投影顶点的 w 值以创建恒定厚度四边形。

这并不能直接解决相邻边缘之间可能出现的间隙，但在解决这个问题时要灵活得多。一种解决方案可能涉及用另一个四边形桥接大角度线之间的顶点，我目前正在探索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:28:37.720

对于 iOS 设备来说，使用 z-buffer 的技术太复杂了——它需要大量的像素着色器，并且（恕我直言）它会带来一些视觉伪影。

如果您的模型不复杂，您可以在运行时找到几何轮廓 - 例如通过比较多边形的法线与公共边：如果视图空间中方向的 z 值具有不同的信号（一个法线指向相机，另一个来自相机）然后此边缘应用于轮廓。

另一种方法更“FPS 友好”：保留模型的挤压版本。并首先渲染具有轮廓颜色（没有纹理和照明）和正常模型的挤压模型。顶点需要更多内存，但不需要实时计算。

PS：在我看过的所有游戏中，剪影都是几何的。

# ruby - 水豚has_css？当它应该失败时通过

> ID：11200596
> 
> 赞同：1
> 
> 时间：2012-06-26T03:58:15.823
> 
> 标签：ruby, capybara

为什么会通过以下步骤：

```
page.has_css?("doesnt exist") 
```

当这正确失败时：

```
page.should have_css("doesnt exist") 
```

如果我运行：

```
puts page.has_css?("doesnt exist") 
```

它打印“假”，但该步骤仍然通过。

知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T05:17:40.113

你可能应该有：

```
assert page.has_css?("doesnt exist") 
```

如果您在测试中写“2 == 3”，它将评估为假，但测试方法不一定会失败。你需要一个断言。我认为“应该”风格的语法也在幕后做某种断言。

# ruby-on-rails - Human_resources/leaves#index 中的 NoMethodError

> ID：11200604
> 
> 赞同：0
> 
> 时间：2012-06-26T04:01:08.590
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

前几天还在用，不知道怎么回事。。。

```
**undefined method `name' for nil:NilClass**

Extracted source (around line #26):

23:             %td= number_with_precision(employee.compensation_leave_balance, precision:1)
24:   #calendar.tab-pane.fade
25:     = calendar(:year => 2012, :month => 6, :first_day_of_week => 1, summary: "Leave Calendar", calendar_title: "June", month_header: true) do |date|
26:       - render_leave_calendar_cell(date)
27:   #trash.tab-pane.fade
28:     = render 'table', leaves: @leaves.where(deleted: true)

app/helpers/leaves_helper.rb:11:in `block in events_for'
app/helpers/leaves_helper.rb:10:in `events_for'
app/helpers/leaves_helper.rb:4:in `render_leave_calendar_cell'
app/views/human_resources/leaves/index.html.haml:26:in `block in _app_views_human_resources_leaves_index_html_haml__145883348_88978910'
app/helpers/calendar_helper.rb:146:in `call'
app/helpers/calendar_helper.rb:146:in `block in calendar'
app/helpers/calendar_helper.rb:145:in `upto'
app/helpers/calendar_helper.rb:145:in `calendar'
app/views/human_resources/leaves/index.html.haml:25:in `_app_views_human_resources_leaves_index_html_haml__145883348_88978910' 
```

真的不知道出了什么问题

```
a/h/leaves_helper.rb                                                                                                                        
   1 module LeavesHelper
   2   def render_leave_calendar_cell(date)
   3     html = content_tag(:span, date.day, class: 'dayDisplay')
   4     html += content_tag(:div, events_for(date))
   5     raw(html)
   6   end
   7 
   8   def events_for(date)                                                                                                                  
   9     html = ""
  10     current_company.leaves.where("start_date <= '#{date}' and return_date > '#{date}'").where(deleted: false).each do |leave|
  11       html += content_tag(:div, leave.applicant.name, class: 'leaveName')
  12     end
  13     raw html
  14   end 
```

可能是日期为零吗？如何解决这个问题><

非常感谢比利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:48:17.467

正如 abha 已经说过的，`leave.applicant`至少有一片叶子是 nil。

转到您的数据库并找出它是哪个。然后弄清楚如何处理你的叶子。也删除它们，重新添加丢失的申请人或任何数据迁移可能是明智的。

如果申请人失踪，一个快速的解决办法是跳过：

```
html += content_tag(:div, leave.applicant.name, class: 'leaveName') if leave.applicant.present? 
```

如果您在应用程序中正确配置了删除级联，我也会看看。这通常会导致此类问题。如果您想在这方面强制执行安全性，您应该添加数据库约束，以确保不会删除任何引用的实体。

# java - 打印自己的源代码的 Java 应用程序

> ID：11200607
> 
> 赞同：6
> 
> 时间：2012-06-26T04:01:32.203
> 
> 标签：java, quine

我有一个小测验，我自己无法解决。我想构建一个程序，用java打印自己的源代码。任何人都知道如何做到这一点？像这个例子：

```
public class SourcePrint {

    private static final long serialVersionUID = 1L;

    public void test(){
        System.out.println("Hi I'm test");

    }
    public static void main(String[] args) {
        new SourcePrint().test();
    }

} 
```

当我们运行它时，输出将是这样的：

```
public class SourcePrint {

    private static final long serialVersionUID = 1L;

    public void test(){
        System.out.println("Hi I'm test");

    }
    public static void main(String[] args) {
        new SourcePrint().test();
    }

} 
```

我不知道该怎么做。有人知道解决方案或至少是提示吗？这不是反编译器，测验制作者告诉我提示是“静态”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T04:09:32.807

[http://en.wikipedia.org/wiki/Quine_%28computing%29](http://en.wikipedia.org/wiki/Quine_%28computing%29)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-20T07:37:15.407

```
import java.io.*;  
class Source  
{  
    public static void main(String args[])  
    {  
        try{  

            //open the file  
        FileInputStream fstream=new FileInputStream("D://Springs WorkSpace/Testing/src/Source.java");//here pass the own java file name with full path 

            // use DataInputStream to read binary NOT text  
        // DataInputStream in=new DataInputStream(fstream);  

            //  
        BufferedReader br=new BufferedReader(new InputStreamReader(fstream));  
            //read data line by line from the file  
            String s;  
            while((s = br.readLine() ) != null)  
            {  
                System.out.println(s);  
            }  
            in.close();  
        }  
        catch(Exception e){  
            e.printStackTrace();  
        }  
    }  
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-26T04:17:00.827

这是一个可能对 java 中的 Quine 有用的示例：

```
public class Quine {

    static String s = "public class Quine { public static void main(String[] args) { char c=34; System.out.println(s+c+s+c+';'+'}'); } static String s=";

    public static void main(String[] args) {
        char c = 34;
        System.out.println(s + c + s + c + ';' + '}');
    }
} 
```

当然还有看似强制性的维基百科链接：[维基百科：Quine](http://en.wikipedia.org/wiki/Quine_%28computing%29)。取决于程序有多大，这里的链接也可能有一些很好的例子：[Java Quine](https://web.archive.org/web/20120505011341/http://cs.utsa.edu/~mshonle/JavaQuine.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-26T04:07:39.770

一个快速的谷歌搜索出现了以下链接：

[http://en.wikipedia.org/wiki/Quine_%28computing%29](http://en.wikipedia.org/wiki/Quine_%28computing%29)

您要查找的程序类型通常称为 quine。

# .htaccess - .htaccess 论坛文件

> ID：11200609
> 
> 赞同：0
> 
> 时间：2012-06-26T04:01:59.313
> 
> 标签：.htaccess

我需要编写一个满足以下条件的 .htcaccess 文件：

1) 将*site.com*重定向到*www.site.com*

2) 将*site.com/forum/index.php*重定向到*www.site.com/forum*（没有尾部斜杠）

3) 将*site.com/forum/*重定向到*www.site.com/forum*（没有尾部斜杠）

4) 将 *site.com/wiki/index.php?title=Main_Page* 重定向到*site.com/wiki*（没有尾部斜杠）*

5) 将所有 404 重定向到*site.com*

此外，我需要第二个版本的 .htaccess 以供临时使用，该版本将满足上述条件并进行以下修改

*6) 将*site.com*或*www.site.com*重定向到*www.site.com/forum*（没有尾部斜杠）

*7) 将所有 404 重定向到*www.site.com/forum*（没有尾部斜杠）

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:26:05.443

版本 1：

```
RewriteEngine On
RewriteBase /

# 1) redirect site.com to www.site.com
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule (.*) http://www.%{HTTP_HOST}/$1 [L,R]

# 2) redirect site.com/forum/index.php to www.site.com/forum (no trailing slash)
# 3) redirect site.com/forum/ to www.site.com/forum (no trailing slash)
RewriteRule ^forum/(index.php)?$ forum [L]

# 4) redirect *site.com/wiki/index.php?title=Main_Page* to site.com/wiki (no trailing slash)*
RewriteCond %{REQUEST_URI} ^wiki/index\.php$
RewriteCond %{QUERY_STRING} ^title=Main_Page$
RewriteRule .* wiki [L]

# 5) redirect all 404s to site.com
ErrorDocument 404 / 
```

版本 2：

```
# 6) redirect site.com or www.site.com to www.site.com/forum (no trailing slash)
RedirectMatch ^/$ http://www.site2.com/forum

# 7) redirect all 404s to www.site.com/forum (no trailing slash)
ErrorDocument 404 forum 
```

# html - HTML的内部工作？

> ID：11200610
> 
> 赞同：1
> 
> 时间：2012-06-26T04:02:04.910
> 
> 标签：html, compilation

HTML 是如何工作的？它会被解析、编译然后执行吗？它是否被转换为高级语言，如`C`, `C++`, `Python`, `Java'，然后 C 代码被编译和执行？

如果是这样的话，为什么我们不能保留一个非常接近架构代码的代码，它可以被虚拟机解释，因为编译和解析具有`n^3`复杂性。

如果不是这种情况，那么它是如何工作的。浏览器是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T04:09:04.067

> html是如何工作的？它会被解析、编译然后执行吗？它是否被转换为高级语言，如 C、C++，如 python、java；然后c代码被编译并执行。

这些都没有。它由 Web 浏览器解析并转换为（特定于浏览器的）内部数据结构，这些数据结构不是任何编程语言的源代码。然后浏览器计算屏幕布局并根据该数据结构绘制屏幕。执行此操作的 Web 浏览器组件称为渲染引擎。例如 WebKit 和 Gecko 就是例子。

细节很复杂，但许多 Web 浏览器都是开源的，因此您可以检查源代码以了解实际情况。

# c# - 使用 C# 设置 Windows 帐户密码时如何设置密码提示

> ID：11200611
> 
> 赞同：3
> 
> 时间：2012-06-26T04:02:13.063
> 
> 标签：c#

我有 .NET 应用程序，旨在为现有 Windows 用户帐户设置密码或更改密码。我已经完成了设置/更改密码的编码，它工作正常。我的问题是，当我们为用户帐户设置新密码时，我们需要创建密码提示，但是有没有办法在我的 C#.NET 应用程序中保存密码提示？

我可以使这个编码操作系统独立，即在 Win7 和 WinXP 上都可以工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:37:16.863

您是否尝试过使用 Active Directory 属性编辑器？您可以将属性添加到您的活动目录对象，例如 Skype 用户名或密码提示。

据我所知，域安全不会像 Windows Workstation 那样提供密码提示。

有些公司将他们的代码注入到 Windows 的登录屏幕可执行文件中，这使得用户能够根据填写带有问题的表单来重置他/她的密码。

您的应用程序需要先通过 Microsoft 认证，然后才能让您使用登录屏幕。

第 3 方应用程序 :: [http://www.specopssoft.com/products/specops-password-reset](http://www.specopssoft.com/products/specops-password-reset)

Microsoft Forefront 身份管理器 :: [http://technet.microsoft.com/en-us/library/ff621362(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/ff621362(v=ws.10).aspx)

# python - 有没有人使用软木库进行身份验证？

> ID：11200617
> 
> 赞同：3
> 
> 时间：2012-06-26T04:03:31.020
> 
> 标签：python, authentication, authorization, wsgi, bottle

我正在为[Bottle](http://bottlepy.org/docs/dev/)寻找一个好的身份验证/授权框架。我会喜欢快速且易于使用的东西。

我已经看到关于[repoze.what](http://what.repoze.org/docs/1.0/)和[repoze.who](http://docs.repoze.org/who/1.0/)的建议，但是他们的文档看起来很吓人（我什至不确定 repoze.who 文档应该做什么）。

似乎有一个名为[Cork](http://cork.firelet.net/)的新框架正在发挥作用。它看起来超级好用。这里有人在项目中实际使用过它吗？另外，你们如何看待将用户凭据保存在文件中（而不是数据库表）？

# sql-server-2008 - Lucene.Net 产品关键字搜索

> ID：11200618
> 
> 赞同：0
> 
> 时间：2012-06-26T04:03:37.630
> 
> 标签：sql-server-2008, search, lucene, lucene.net, keyword

我正在寻找产品搜索引擎。每个人都建议使用 Lucene.NET，但我想知道它是否按我的预期工作。我想为 Lucene 文档提供 MSSQL 数据库中的字段，以便可以搜索五个不同的产品字段。

1) 我可以从 SQL 数据库创建文档吗？

我能找到的所有样本都使用硬编码值。我想从数据库的五个产品列中填充文档。

如何设置 text var 以便它从该特定字段中的数据库中获取所有内容？

```
Document doc = new Document();
doc.Add(new Field("id", i.ToString(), Field.Store.YES, Field.Index.NO));
doc.Add(new Field("ProductDescription", text, Field.Store.YES, Field.Index.TOKENIZED));
writer.AddDocument(doc); 
```

2) 如何用一个查询搜索多个字段？

```
var queryParser = new QueryParser(Version.LUCENE_30, "ProductName", analyzer);
queryParser += new QueryParser(Version.LUCENE_30, "ProductDescription", analyzer);
queryParser += new QueryParser(Version.LUCENE_30, "ProductSpecification", analyzer);
queryParser += new QueryParser(Version.LUCENE_30, "ProductDetails", analyzer);
queryParser += new QueryParser(Version.LUCENE_30, "ProductKeywords", analyzer);

var query = queryParser.Parse("plasma tv");
//should return results for Sony Plasma TV, Sony HD Plasma, Sony 32 inch Plasma, Philips Plasma TV 
```

有关于 MS SQL 到 Lucene 的教程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:10:04.983

要使用 Lucene.Net 搜索多个字段，您可以手动构造布尔查询并向其中添加单个字段查询，或者使用 MultiFieldQueryParser 为您构造布尔查询，或者使用[查询解析器语法](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_0/queryparsersyntax.html)。例子：

1) 手动构建，用于 2 个字段：

```
var query = new BooleanQuery();
Query nameQuery = 
     new QueryParser(Version.LUCENE_30, "ProductName", analyzer).Parse(keyword);
Query descriptionQuery = 
     new QueryParser(Version.LUCENE_30, "ProductDescription", analyzer).Parse(keyword);
query.Add(nameQuery, BooleanClause.Occur.SHOULD);
query.Add(descriptionQuery, BooleanClause.Occur.SHOULD); 
```

2）多字段查询解析器：

```
Query query = new MultiFieldQueryParser(                        
                            Version.LUCENE_30,   
                            new string[] { "ProductName", "ProductDescription" },
                            analyzer)
              .Parse(keyword); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-26T04:11:21.243

也许您也可以尝试 SQL Server 提供的全文搜索索引。

# c# - 在 asp.net MVC (c#) 中使用 xml 提要的最佳方式

> ID：11200621
> 
> 赞同：1
> 
> 时间：2012-06-26T04:04:05.567
> 
> 标签：c#, xml, asp.net-mvc-3, xmlserializer

我有一个 MVC 网站，当您单击按钮时，将使用 Get 方法从另一个网站获取 xml 数据。然后我需要在我的网页中显示此 XML 的一部分。

我目前的方法是将 XML 反序列化为对象，并将对象传递给 View，然后 View 将获取适当的数据。

我的问题是我的类不完全匹配 XML 数据（它没有每个元素/属性/等）。数据太长，元素和属性太多，所以我不想把所有的东西都写到类中。而且我无法使用 XSD.exe 从 XML 数据创建类，因为数据中有一些错误（尽管当我的网页正在读取 xml 数据时它工作正常）。

有没有更有效的方法来做到这一点？

在此链接中阅读 IXmlSerializable 可能会消失，尽管评论也指出了它的一些问题。看起来它可能非常复杂。 [如何在 C# 中仅反序列化 XML 文档的一部分](https://stackoverflow.com/questions/369792/how-to-deserialize-only-part-of-an-xml-document-in-c-sharp)

非常感谢您的帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:21:36.480

使用框架来使用 Atom 提要。请参阅以下内容：System.ServiceModel.Syndication 命名空间 - msdn.microsoft.com/en-us/library/system.servicemodel.syndication.aspx

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:36:37.930

不是直接将 atom feed xml 反序列化到对象中，而是首先将 xml 加载到`XDocument`对象中，然后`XDocument`使用 Xlinq 查询对象并创建需要传递给视图的必要 ViewModel。

例如。

**查看模型**

```
public class FeedViewModel
{
   ..
   public FeedItem[] FeedItems { get; set; }
}

public class FeedItem
{
   public string Title { get; set; }
   public string Description { get; set; }
   public DateTime Date { get; set; }
} 
```

在你的行动中

```
var feedDocument = XDocument.Load(feedUrl);

var feedItems = feedDocument.Descendants("item")
    orderby DateTime.Parse(feed.Element("pubDate").Value) descending
    select new FeedItem
    {
      Title = feed.Element("title").Value,
      Description = feed.Element("description").Value,
      Date = DateTime.Parse(feed.Element("pubDate").Value)
    }.ToArray();

return View(new FeedViewModel{ FeedItems = feedItems }); 
```

[http://deepumi.wordpress.com/2010/02/21/how-to-consume-an-atom-rss-feed-using-asp-net-c-with-linq/](http://deepumi.wordpress.com/2010/02/21/how-to-consume-an-atom-rss-feed-using-asp-net-c-with-linq/)

# java - 为什么返回 List只读而返回 List只写？

> ID：11200625
> 
> 赞同：0
> 
> 时间：2012-06-26T04:04:48.370
> 
> 标签：java

> **可能重复：**
> [< 之间有什么区别？超级 E> 和 <? 扩展 E>?](https://stackoverflow.com/questions/1368166/what-is-a-difference-between-super-e-and-extends-e)

我所在团队中的一些 Java 程序员正在编写函数，这些函数返回类型的对象`List<? extends T>`以创建只读列表，并返回类型的对象`List<? super T>`以创建只写列表。

在 Java 中，什么使`List<? extends T>`只读和只`List<? super T>`写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T04:37:26.800

请阅读“生产者扩展，消费者超级”（PECS） - 我可能需要做同样的事情:)

只读：

如果您想确保方法将项目集合（使用泛型）作为参数 - 当您使用时`List<? extends T>`- 列表可以包含 T 的任何子类型但不能添加到集合中，因为它在运行时不知道具体的List 包含的 T 类型。

只写：

对于`List<? super T>`，列表可以包含 T 而不管实际的参数化类型（使用 super 将允许这种情况发生）。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T05:19:28.577

该定义的`List<? extends T>`意思是“一个`List<X>`实现，`X`必须在哪里`T`或其子类/实现。换句话说，您唯一的保证是已经存储在列表中的对象将适合类型的变量`T`。但是，由于列表可能已被声明为扩展或实现 T 的类，您无法保证类型`T`本身的对象将适合列表。

简单的例子：`List<String>`is a `List<? extends T>`if `T`is `Object`。您可以安全地从中绘制`Object`-type 对象，但显然不能将其他`Object`-type 对象放入其中，除非它们绝对是字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T04:23:37.687

您可以`T`从 a 中获得 a `List<? extends T>`，但您唯一可以放入其中的是`null`文字。您可以将 a`T`放入 a `List<? super T>`，但您唯一能从中得到的是 a `Object`（然后将其转换为 是不安全的`T`）。

因此，这些限制使这些尽管不完美但很好地提醒了意图。使用 a `List<? extends T>`，您不能将大多数内容放入其中 - 所以它有点只读。使用 a `List<? super T>`，您无法从中得到非常有用的东西——所以它有点只写。

请注意，其中任何一个*实际上*都不是只读或只写的。我在上面提到了一些可以将事物放入或取出它们的方法，并且使用“只读”构造，您仍然`remove`可以在对象本身或其迭代器上调用函数。

# java - 你用什么来编写跨平台的客户端应用程序？

> ID：11200628
> 
> 赞同：2
> 
> 时间：2012-06-26T04:05:15.213
> 
> 标签：java, python, qt

我正在编写一个客户端应用程序，相当老派，相当保守。在 Windows 上，我可能会使用 .NET Forms，或者 WPF，我不确定。在 Mac 上，我会使用 Objective-C、Cocoa 和所有这些东西。但我希望这个应用程序同时适用于两者，我宁愿只写一次。

我应该用QT写吗？我听说当你开始使用它时，当你跨平台使用 QT 时它是错误的。我必须担心连续性，诺基亚最近的麻烦是什么？社区对 Digia 有什么看法？

我应该用Java写吗？较新的 Mac OS 不再附带 Java，而 Windows 从来没有。我怎样才能创造出这样的良好设置体验？USB设备呢？有一些 Java USB 项目，但它们都是基于 Windows 或 Linux 的，没有 Mac。我也担心获得原生的外观和感觉，但我想 Swing 已经涵盖了那里。

我应该用 Python 写吗？我担心这里的表现。此外，我之前编写过大型 Python 应用程序，我发现 Python 无法很好地适应大型代码库，因为缺乏静态分析。

你用什么写你的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T04:45:26.757

几周前我问了一个类似的问题[Building a Mac and Windows GUI Application](https://stackoverflow.com/questions/11026541/building-a-mac-and-windows-gui-application)。

关于“原生外观”：如果你想要这个，不要使用跨平台的 GUI 库。为每个平台编写一次 GUI 层。您可以共享核心应用程序逻辑。您可能可以在 Windows 和 Linux 上使用 Qt 或 wxWidgets，因为对外观和感觉的要求更加宽松，但在 Mac 上看起来会相当不合适。

如果“原生外观和感觉”不是必需的，我会说使用 Qt 或 wxWidgets 并为自己省去麻烦。我不会担心 Qt 的连续性。它的桌面框架非常成熟，诺基亚不维护（他们维护移动部分）。开源社区将使其保持活力。不知道它有多bug，但是哪个跨平台框架没有它的bug？

如果“原生外观”是必不可少的，请继续阅读核心应用程序逻辑的语言选择。

爪哇：不要。Swing 实际上并没有提供原生的外观和感觉。只需尝试使用它制作任何全面的 GUI。Swing 编程也很痛苦。Swing 有很多替代品，但我怀疑它们中的任何一个都会比 Qt 更好。此外，大多数应用程序可能需要连接到操作系统。Mac 上的 Java 桥接已弃用。您必须将 JNI 用于任何扩展。对于 Windows 来说可能是一样的。

Python：这就是我选择的路径。Python 不仅是跨平台的，它还带有一组丰富的跨平台库。也很容易在任何操作系统上编写 C/C++ 扩展。缺点是启动速度相对较慢，并且比原生 C++ 应用程序占用更多内存。尝试建立一个可部署的应用程序也是相当痛苦的。除非您计划进行认真的数据处理，否则我不会太担心性能。

C++：也是一个不错的选择。如果你使用 Qt 或 Boost 之类的跨平台库（没有尝试过，问题和研究得出的结论），用 C++ 编写跨平台应用程序并不太难。还兼容 xCode、Visual Studio 等，因此很容易设置项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T04:25:35.360

作为一名主要的 Java 开发人员，我非常依赖 Java。您对 java 的担忧在很大程度上可以得到解决。

一是我会用 JavaFX 而不是 Swing。它仍然是相当新的，但我最近一直在玩它，它非常好。你应该能够创造出你喜欢的东西，而且它非常一致。另一个额外的好处是，他们正在[为 JavaFX 添加本机打包](https://blogs.oracle.com/talkingjavadeployment/entry/native_packaging_for_javafx)。现在还为时过早，据我了解，这还没有出现在稳定版本中。

无论你做什么，都会有障碍和问题。所以不管我上面说什么，你应该选择你最舒服的东西。哎呀，如果你甚至可以走 .net 路线并使用 Mono。我听说 Mono 运行良好，尤其是从一开始就使用它构建的项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T05:25:56.760

有多种选择可供您使用

*   Java 应用程序
*   Web应用程序
*   使用像 App Accelerator 这样的包装器

## Java 应用程序

编写独立于平台的 Java 应用程序将满足您的需求。但在开发方面，您可能会遇到问题。特别是GUI体验。

## Web应用程序

Web 应用程序是正确的方法，但在本地机器上安装和设置 Web 服务器可能有点棘手。此外，如果您想托管应用程序，这是要走的路。

## 应用程序包装器（[应用程序加速器](http://www.appcelerator.com/)）

如果您可以使用应用程序包装器，它几乎可以在任何平台上运行——windows、mac os。一个很好的例子可能是[Wunderlist](http://www.6wunderkinder.com/wunderlist/)。

# regex - 如何从两个文本文件中获取互补行？

> ID：11200630
> 
> 赞同：0
> 
> 时间：2012-06-26T04:05:17.383
> 
> 标签：regex, text, comparison, diff, complement

如何从两个文本文件中获取互补行？

文件`file1.txt`有

```
123 foo
234 bar
... 
```

文件`file2.txt`有

```
123 foo
333 foobar
234 bar
... 
```

我想把所有的线都放进去`file1.txt`而不是`file2.txt`. 这两个文件有数百 MB 大，并且包含非 ASCII 字符。有什么快速的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T05:01:47.153

为了获得大文件的良好性能，不要将大量文件读入内存；尽可能使用磁盘上的内容。

字符串匹配可以通过散列有效地完成。

一种策略：

1.  逐行扫描第一个文件。对于每一行：
    *   散列该行的字符串。您使用的哈希算法很重要；`djb2`是一个例子，但有很多。
    *   将密钥放入哈希集结构中。不要保留字符串数据。
2.  逐行扫描第二个文件。对于每一行：
    *   散列该行的字符串。
    *   如果在第一个文件的集合中找不到哈希键：
        *   将此行的字符串数据写入您正在跟踪不同行的输出（例如标准输出或另一个文件）。哈希不匹配，因此该行出现在第二个文件中，但不在第一个文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T04:19:12.523

“数百MB”不是那么多。

我会以这种方式解决这个任务（在 Perl 中）：

```
$ cat complementary.pl 
my %f;

open(F, "$ARGV[1]") or die "Can't open file2: $ARGV[1]\n";
$f[$_] = 1 while(<F>);
close(F);

open(F, "$ARGV[0]") or die "Can't open file1: $ARGV[0]\n";
while(<F>) {
    print if not defined $f[$_];
} 
```

使用示例：

```
$ cat file1.txt 
100 a
200 b
300 c

$ cat file2.txt 
200 b
100 a
400 d

$ perl complementary.pl file1.txt file2.txt 
300 c 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T04:21:53.587

线，具体？

```
fgrep -vxf file2.txt file1.txt 
```

# php - 这在 PHP 中意味着什么？

> ID：11200634
> 
> 赞同：0
> 
> 时间：2012-06-26T04:05:52.720
> 
> 标签：php

我是php新手。我正在尝试从我的公司项目中学习 php，但我真的不知道下面的含义是什么。

```
<?php
$channel = $channel ;
$live_channels = $live_channels ;
$octo_link = $octo_link;
$payment_status= $payment_status ;
$is_programme_on = $is_programme_on;
$cc = $cc;
$member_profile = $member_profile ;
$nielsen_data = $nielsen_data ; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T04:07:44.810

这不代表任何意思。它只是为自己分配了一堆变量。

# python - 如何在 python 中读取 /dev/random

> ID：11200636
> 
> 赞同：9
> 
> 时间：2012-06-26T04:06:01.717
> 
> 标签：python, unix

我读过一本`/dev/random`像无限文件的书，但是当我设置以下代码以查看内容的样子时，它什么也没打印。

```
with open("/dev/random") as f:
    for i in xrange(10):
        print f.readline() 
```

顺便说一句，当我尝试使用 时`/dev/urandom`，它起作用了。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-26T04:41:48.570

FWIW，以半便携式方式访问此流（或类似的东西）的首选方式是*[os.urandom()](http://docs.python.org/library/os.html#os.urandom)*

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-26T04:19:44.757

它输出随机字节，而不是随机行。在你得到一个换行符之前你什么都看不到，平均每 256 个字节才会发生一次。原因`/dev/urandom`似乎很简单，因为它运行得更快。等待更长的时间，减少阅读，或使用`/dev/urandom`.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-26T04:12:13.273

```
with open("/dev/random", 'rb') as f:
    print repr(f.read(10)) 
```

# javascript - Url.Action 在 MVC 中将字符串数组从视图传递到控制器#

> ID：11200637
> 
> 赞同：0
> 
> 时间：2012-06-26T04:06:12.207
> 
> 标签：javascript, arrays, asp.net-mvc-3, jquery, url-routing

我有一个返回数组 ( `string[]`) 的方法，我正在尝试将这个字符串数组传递给 Action。目前我无法传递我的参数。我是 MVC3 的新手。请让我知道为什么我不能将参数传递给 ActionResult..我已经用相同的参数名称定义了 ActionResult..提前谢谢大家....

```
$('#export-button').click(function () {

            var columnLength = $("#grid")[0].p.colNames.length;
            var columnNames = "";
            for (var i = 0; i < columnLength; i++) {
                if ($("#grid")[0].p.colModel[i].hidden == false) {
                    columnNames = columnNames + $("#grid")[0].p.colModel[i].name + ',';
                }
            }
            var Val1 = jQuery(txt_search1).val();
            alert(Val1); alert(columnNames);
            document.location = '@Url.Action("OrgDataExport","Search", new { Val1 = Val1 , columnNames = columnNames})';

        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:10:23.660

尝试这个，

```
$('#export-button').click(function () {

    var columnLength = $("#grid")[0].p.colNames.length;

    // columnNames is an object now
    var columnNames = {};

    for (var i = 0; i < columnLength; i++) {
        if ($("#grid")[0].p.colModel[i].hidden == false) {
            columnNames[i] = $("#grid")[0].p.colModel[i].name;
        }
    }

    var Val1 = jQuery(txt_search1).val();

    document.location = "Home/Index/" + $.param({ Val1 = Val1 , columnNames = columnNames });
}); 
```

您`columnNames`作为字符串数组执行的操作

```
public ActionResult Index(string val1, string[] columnNames)
{
// Your code
} 
```

**更新：**

如果 URL 变得太大，您可以使用 POST 方法通过表单提交值。如果您的视图已经有一个表单，请使用其他动态创建动态表单并通过 POST 提交值。

```
$('#export-button').click(function () {

    var Val1 = jQuery(txt_search1).val();    

    $("#hidden-form").remove();

    // create a form dynamically
    var form = $('<form>')
            .attr({ id: "hidden-form",
              action: "/Home/Index",
              method: "post",
              style: "display: none;"
            })
            .appendTo("body");            

    // add the "Val1" as hidden field to the form.
    $('<input>').attr({ name: "Val1 ", value: Val1, type: "hidden" }).appendTo(form);

    var columnLength = $("#grid")[0].p.colNames.length;

    // add the "columnNames" as hidden fields to the form
    for (var i = 0; i < columnLength; i++) {
        if ($("#grid")[0].p.colModel[i].hidden == false) {
            var t = $("#grid")[0].p.colModel[i].name;
            $('<input>').attr({ name: "columnNames", value: t, type: "hidden"
             }).appendTo(form);
        }
    };

    // submit the form
    form.submit();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:25:12.950

```
 for (var i = 0; i < columnLength; i++) {
                if ($("#grid")[0].p.colModel[i].hidden == false) {
                    columnNames = columnNames + $("#grid")[0].p.colModel[i].name + ',';
                }
            }
            var Val1 = jQuery(txt_search1).val();
            alert(Val1); alert(columnNames);
            document.location = '@Url.Action("OrgDataExport","Search", new { Val1 = Val1 , columnNames = columnNames})'; 
```

嗨，路易斯，

您正在尝试从服务器端标记访问 javascript 变量 Val1 和 columnNames，但这是不可能的。更多详情，请参考此[网址](https://stackoverflow.com/questions/9989993/access-javascript-variable-in-razor-code)。

您可以通过以下方式做到这一点。

```
 var jsonData = { val1 : Val1, columnNames : columnNames };

$.ajax({
          type: "GET", //GET or POST or PUT or DELETE verb
                url: "Home/Index", // Location of the service
                data: jsonData,
                contentType: "application/json; charset=utf-8", // content type sent to server
                processdata: true, //True or False
                success: function () {
                  alert("success")
                }
       }); 
```

在您的控制器方面，您必须像这样写

```
public ActionResult Index(string val1, string columnNames)
{
// Your code
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T06:25:32.317

您标记了 JQuery-Ajax 但我在代码示例中没有看到任何 ajax 尝试？所以我猜你想知道一个面向 Ajax 的解决方案。您可能没有使用 Zend Framework，但我希望这个答案能帮助您找到解决方案的正确方向。

根据 JS/Zend 框架经验，您可以查看类似

```
$('#export-button').click(function () {
   ....
   var actionUrl= "/controller/action/";
   $.ajax({
      url: actionUrl,
      data: {
        variable1: "OrgDataExport",
        variable2: "Search",
        Val1: Val1,
        columnNames: columnNames            
      },
      dataType: "json",
      success: function(json) {
        //do stuff
      }
   });
   ....
}); 
```

在 ZendFramework 控制器中，您可以获取请求中的变量：

```
$Val1 = $this->_request->getparam("Val1"); 
```

# haskell - 如何在亚马逊网络服务上托管 haskell 应用程序？

> ID：11200638
> 
> 赞同：4
> 
> 时间：2012-06-26T04:06:15.153
> 
> 标签：haskell, amazon-web-services

我如何在亚马逊上托管，比如 Snap 网络应用程序？换句话说，我需要采取的第一步是什么——因为我完全一无所知。

任何提示表示赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T04:12:45.660

首先，您需要有一个亚马逊 aws 帐户。然后根据您的要求，您可以选择实例并托管它。您可以使用 AWS 管理控制台设置实例。看看这个。[http://aws.amazon.com/console/](http://aws.amazon.com/console/) 这也将对您有所帮助[需要分步指南来在 AWS 上托管网站](https://stackoverflow.com/questions/5620119/need-a-step-by-step-guide-to-host-a-website-on-aws)

# forms - 访问表单输入值的cakephp链接外部

> ID：11200647
> 
> 赞同：0
> 
> 时间：2012-06-26T04:08:20.440
> 
> 标签：forms, cakephp

我有这个带有日期输入的表格。

```
echo $this->Form->create('Nodata');
echo $this->Form->input('date1', array('type' => 'date', 'label' => 'From:'));
echo $this->Form->input('date2', array('type' => 'date', 'label' => 'To:'));
echo $this->Form->end('Get Hours'); 
```

提交表单后，我将在表单下方的同一视图中显示结果。

我的问题是我有一个不属于表单的链接，需要从表单上的日期字段中读取值（在视图中）以将其用作此链接的参数。

```
// date1 is the param I need to take the value from date input
<th> <?php echo $this->Html->link(__('Agents Detail'), array('controller' => 'qcas', 'action' => 'hours', 'paramProject' => $hour['Qca']['dir_id'], 'date1' => $this->data)); ?> </th> 
```

请注意，此链接在表单之外，我需要一种方法来读取表单上的输入以在我的链接中用作参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:50:10.540

您需要引用对象中的字段，而不是仅`$this->data`用于您的元素。`date1``$this->data`

CakePHP < 2.0

```
'date1' => $this->data['Nodata']['date1'] 
```

CakePHP 2.0+

```
'date1' => $this->request->data['Nodata']['date1'] 
```

我不确定您要在目标链接上做什么，但您可能还需要格式化日期：

```
'date1' => date('Y-m-d', $this->request->data['Nodata']['date1']) // you may need strtotime 
```

# wcf - 无法在 WCF 中定义服务合同

> ID：11200656
> 
> 赞同：0
> 
> 时间：2012-06-26T04:09:22.310
> 
> 标签：wcf

我有下面提到的代码，我需要将其放入服务合同中，以便将其公开以供使用

```
 ListTemplateCollection ltc = web.ListTemplates;
           var listTemplates = clientContext.LoadQuery(
           ltc.Where(p => p.InternalName == name));
           clientContext.Load(ltc);
           clientContext.ExecuteQuery();
           return listTemplates.FirstOrDefault(); 
```

* * *

我已经定义了上面的代码，但我仍然无法拨打电话。

任何指针将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T05:36:38.793

您可以按照以下步骤创建操作合同。

假设您的“ListTemplateCollection”是 ListTemplate 类的集合，然后用 DataContract 声明这个 Class，并用 DataMember 属性声明它的属性。

你的操作契约就像 ListTemplate FindTemplate(string templateName);

# regex - 结束 x/ 的回溯步骤

> ID：11200661
> 
> 赞同：0
> 
> 时间：2012-06-26T04:09:43.693
> 
> 标签：regex

我正在阅读 Jeffrey Friedl 的《Mastering Regular Expressions 3rd Ed》一书。在第 274 页，Jeffrey 要求他的读者调查为什么正则表达式**/x([^/]|[^x]/)*x/**匹配字符串（匹配的字符以粗体标记）“years = days **/x 除 x// 365; /x 假设为非闰年 x/** "。

我从正则表达式中删除了结尾的**x/**。所以正则表达式**/x([^/]|[^x]/)***的输出是**"/x 除 x//365; "**。但是在我添加**x/**后，正则表达式**/x([^/]|[^x]/)*x/**的输出是**“/x 除 x//365；/x 假设非闰年 x/”** .

谁能告诉我 Perl 的正则表达式引擎对结尾**x/**的回溯步骤？

这是我针对这个问题的 perl 脚本。

```
my $str = "years = days /x divide x//365; /x assume non-leap year x/";
if ($str =~ m{(/x([^/]|[^x]/)*)}) {
    print "\$1: '$1'\n"; # output: $1: '/x divide x//365; '
} else {
    print "not matched.\n";
}

$str = "years = days /x divide x//365; /x assume non-leap year x/";
if ($str =~ m{(/x([^/]|[^x]/)*x/)}) {
    print "\$1: '$1'\n"; # output: $1: '/x divide x//365; /x assume non-leap year x/'
} else {
    print "not matched.\n";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T04:20:05.040

这是纲要：

> **/x** - 匹配 / 后跟 x
> **([^/]|[^x]/)*** - 匹配任何不是 / 或不是 x 后跟斜杠的内容 - 尽可能多地匹配
> **x/** -匹配一个 x 后跟一个 /

所以基本上它说：从 开始`/x`，然后匹配除之外的所有内容`x/`，并以 . 结尾`x/`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T00:51:41.400

我得到了它。约瑟夫是对的。当第二个“/x”匹配失败时，正则表达式引擎回溯到“/x”尝试并成功。

# java - Web 容器中的类加载器

> ID：11200664
> 
> 赞同：0
> 
> 时间：2012-06-26T04:10:20.143
> 
> 标签：java, servlets, classloader

对于独立的 java 应用程序，我可以使用以下代码在运行时根据库路径动态加载 jar lib。如果我在 Java Web 容器中部署相同的代码并作为 servlet 运行，它似乎不起作用。我实际上希望能够根据 servlet 请求中的 jar 库路径加载不同的 jar 库。

这意味着单个 servlet 必须能够在运行时动态加载不同的 jar 库并运行向前的 biz 逻辑

user1 可能会请求在 /tmp/lib/v1.0/ *.jar下加载 jar 文件
user2 可能会请求在 /tmp/lib/v1.1/* .jar下加载 jar 文件
（v1.0 和 v1.1 中的 jar 文件得到完全相同的类名）

谢谢！！！

**=== 主要 ==============**

```
LibraryLoader loader = new LibraryLoader();
loader.addClassPath(<jar lib root path>);

// below will run biz logic 
```

**=== LibraryLoader.java ==========**

```
public class LibraryLoader {

    URLClassLoader urlClassLoader;

    public LibraryLoader() {
        urlClassLoader = (URLClassLoader) ClassLoader.getSystemClassLoader();
    }

    public void addClassPath(String jarLibPath) throws Exception {
        Class urlClass = URLClassLoader.class;
        File jarPath = new File(jarLibPath);

        FileFilter jarFilter = new FileFilter() {
            public boolean accept(File f) {
                if (f.isDirectory())
                    return true;
                String name = f.getName().toLowerCase();
                return name.endsWith("jar");
            }
        };

        File[] files = jarPath.listFiles(jarFilter);
        for (File file : files) {
            if (file.isFile()) {
                URI uriPath = file.toURI();
                URL urlPath = uriPath.toURL();
                Method method = urlClass.getDeclaredMethod("addURL", new Class[] { URL.class });
                method.setAccessible(true);
                method.invoke(urlClassLoader, new Object[] { urlPath });
                System.out.println(file.getCanonicalPath());
            } else {
                addClassPath(file.getCanonicalPath());
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T04:36:45.750

那不是你想做的。即使在您的独立程序中，这也不会真正起作用（因为您可能会将同一个 jar 的多个版本推送到主类加载器中）。您要做的是创建一个包含新 jar 的新类加载器，然后在新类加载器中调用某个类。

例如：

```
// get relevant jar urls
URL[] urls = ...;

ClassLoader oldLoader = Thread.currentThread().getContextClassLoader();
try {
  URLClassLoader loader = new URLClassLoader(urls);
  Thread.currentThread().setContextClassLoader(loader);

  Class<?> entryClass = loader.loadClass("entry.class.name");
  // do something here w/ entryClass (e.g. instantiate it) ...

} finally {
  Thread.currentThread().setContextClassLoader(oldLoader);
} 
```

当然，您可能希望缓存这些类加载器并在后续请求中重新使用它们。

当然，我不确定您为什么不使用不同版本的 jar 部署多个版本的 servlet（因为您指出该版本是 servlet 路径的一部分）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T04:47:03.660

您应该为不同的用户创建不同的类加载器并设置为当前线程。

```
ClassLoader ctxLoader = Thread.currentThread().getContextClassLoader();
ClassLoader currentLoader;
if(user1){
   //initialize classloader with jar files under /tmp/lib/v1.0/.jar
   currentLoader  = user1ClassLoader;
} else if(user2){
   //initialize classloader with jar files under /tmp/lib/v1.1/.jar
   currentLoader  = user2ClassLoader;
}
Thread.currentThread().setContextClassLoader(currentLoader  );

//invoke business logic

//reset the actual loader
Thread.currentThread().setContextClassLoader(ctxLoader ); 
```

# php - 返回数组推送值

> ID：11200665
> 
> 赞同：1
> 
> 时间：2012-06-26T04:10:21.640
> 
> 标签：php, javascript, jquery, arrays, push

我有一个由这个脚本填充的数组：

```
var imgs = document.getElementsByTagName("img");
var imgSrcs = [];

for (var i = 0; i < imgs.length; i++) {
    imgSrcs.push(imgs[i].src);
} 
```

当我从 PHP 中回显此内容时，它会为我提供所有 img src，并用逗号分隔它们。它似乎不像典型的数组格式，更像是文本。当我尝试这样做时：

```
for ($i = 0; $i < count($img); ++$i) {
    echo "<img src='".$img."'/><br>";
} 
```

它只是`<img src`与 中的每个图像 src 相呼应`imgSrcs`。

我正在尝试回显 img src 和 1 个 img 链接。这样，如果我有 5 个链接`imgSrcs`，我将输出 5 个图像。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T04:14:06.033

如果您将数组作为逗号分隔列表传递，请尝试[爆炸以恢复您的数组。](http://php.net/manual/en/function.explode.php)

```
$img = explode(",",$img);
for ($i = 0; $i < count($img); ++$i) {
    echo "<img src='".$img."'/><br>";
} 
```

# jquery-mobile - 意外页面事件执行顺序

> ID：11200668
> 
> 赞同：0
> 
> 时间：2012-06-26T04:10:49.630
> 
> 标签：jquery-mobile

我对以下的执行顺序感到困惑：

```
$('#home').live('pageinit',function(){
    $('#test').hide();

    $(function() { 
        alert('test1');
    });

    $('#button').click(function(event) {
        event.preventDefault();
    });
});

$('#home').live('pageshow',function(){
    alert('test3');
}); 
```

这是顺序：

1.  `pageinit`被解雇
2.  `$('#test').hide()`被执行
3.  `$('#button').click()...`被执行
4.  `pageshow`然后 `alert('test3')`走开
5.  `alert('test1')`被解雇

为什么不`alert('test1')`作为数字 3 执行？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T04:44:50.093

我不确定代码中是否有任何拼写错误，但它应该在 Inspect Element 或 Developer Console 中给您一个错误。尝试像这样封闭函数：

```
(function() { 
   alert('test1');
})(); 
```

用完整的源代码检查这个[小提琴](http://jsfiddle.net/dhavaln/g8UW5/)

# xcode - NSMutableArray 不添加对象

> ID：11200672
> 
> 赞同：0
> 
> 时间：2012-06-26T04:11:26.053
> 
> 标签：xcode, nsmutablearray

我有一个主视图控制器，它由一个按钮组成，当点击该按钮时，它会推动一个详细视图控制器和另一个按钮，它只是启动一个具有表格的模态视图控制器。此详细视图控制器有一个按钮，当点击该按钮时，应将一个新对象添加到由模态视图控制器中的表加载的数组中。

问题是，添加新对象按钮不会添加到 NSMutableArray。

当我在主视图中放置一个按钮并分配将对象添加到 NSMutableArray 的相同方法时，它就可以工作了。当按钮放置在通过导航控制器和模态视图呈现的另一个视图控制器上时，它只是不起作用。

这是我在详细视图控制器中按下按钮时的代码：

```
- (IBAction)confirmBtnPressed
{
    // Gets the current time and formats it
    NSDate *timeNow = [NSDate date];
    NSDateFormatter *timeFormatter = [[NSDateFormatter alloc] init];
    [timeFormatter setDateFormat:@"hh:mm a"];

    // Gets the current date and formats it
    NSDate *dateNow = [[NSDate alloc] init];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"MMM dd, yyyy"];

    NSString *currentTime = [timeFormatter stringFromDate:timeNow];
    NSString *currentDate = [dateFormatter stringFromDate:dateNow];
    NSString *timestamp = currentTime;
    NSString *date = currentDate;

    // This is where values gets saved
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:timestamp       forKey:kTimeStampText];
    [defaults setObject:date            forKey:kDateText];
    [defaults synchronize];

    NSString *timeToday = [defaults objectForKey:kTimeStampText];
    NSString *dateToday = [defaults objectForKey:kDateText];

    tableVC.tableDict = [[NSMutableDictionary alloc] initWithObjectsAndKeys:timeToday, @"Time", dateToday, @"Date", nil];
    [tableVC.tableArray addObject:tableVC.tableDict];
    [tableVC.table reloadData];
} 
```

当按下模态加载表格的按钮时，这是我在主视图控制器中的代码：

```
// Table loaded
- (IBAction)viewHistoryPressed:(id)sender
{
    if (!self.historyViewController)
    {
        self.historyViewController = [[HistoryViewController alloc] initWithNibName:@"HistoryViewController" bundle:nil];
    }

    [self presentModalViewController:historyViewController animated:YES];
} 
```

这是我的表视图控制器中的 viewDidLoad：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSString *time = [defaults objectForKey:kTimeStampText];
    NSString *date = [defaults objectForKey:kDateText];

    tableDict = [[NSMutableDictionary alloc] initWithObjectsAndKeys:time, @"Time", date, @"Date", nil];

    tableArray = [[NSMutableArray alloc] initWithObjects:tableDict, nil];
} 
```

主视图截图：

![在此处输入图像描述](../Images/5cdb306563447c61433fa57ae360b3e3.png)

详细视图：

![在此处输入图像描述](../Images/9b4407f12d1596bf2576456a5bbf23b6.png)

表视图：

![在此处输入图像描述](../Images/30bb4fc7e369035d8c91fc8c13368e55.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:25:31.537

尝试初始化你`NSMutableArray`的：

```
NSMutableArray *array = [NSMutableArray array]; 
```

现在您可以添加条目了。

让我知道这是否适合您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:13:08.593

在 viewDidLoad 方法中...请在分配时使用 self.tableDict 和 self.tableArray。'self' 调用 getter 和 setter 方法，所以它是 imp。

# sql - 后台 SQL 服务器探查器，数据保存到表中

> ID：11200673
> 
> 赞同：0
> 
> 时间：2012-06-26T04:11:28.617
> 
> 标签：sql, iis, profiler

我想在后台运行 sql server profiler。我知道您可以使用 SQL Trace，但我希望将跟踪信息保存在表中而不是文件中，据我所知，您只能使用 SQL Trace 保存到文件中。

我想要做的是让 sql 跟踪在后台运行，每当一个 ASP 页面生成 500 错误时，我都会向管理员发送一封电子邮件。在电子邮件中的 IIS 相关信息中，我还想包括跟踪中的最后 50 行。这就是为什么我需要表格中的信息，以便我可以轻松地将其发送到电子邮件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T04:35:04.343

`Save to table`您可以使用 SQL Profiler（在 2005 / 2008 中）通过在创建跟踪时选中复选框来将结果保存到表中。

注意：在继续之前，您应该阅读[这篇文章](http://weblogs.sqlteam.com/tarad/archive/2008/08/06/SQL-Profiler-best-practices.aspx)

# c# - 我可以使用 Linq to DataSet 对数据库执行插入/删除/更新吗？

> ID：11200687
> 
> 赞同：0
> 
> 时间：2012-06-26T04:13:03.600
> 
> 标签：c#, dataset, crud, linq-to-dataset

我不是在谈论 Linq to SQL。只是 Linq 到数据集。

假设我按照此处的说明填写了一个数据集：http: [//support.microsoft.com/kb/314145/en-us](http://support.microsoft.com/kb/314145/en-us)

现在，我如何使用 Linq 对数据集执行插入、更新和删除操作。

我按照这里的解释做了：http: [//support.microsoft.com/kb/307587/en-us](http://support.microsoft.com/kb/307587/en-us)，但我想用 Linq 来做。这是可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T04:15:46.703

LINQ to DataSet 仅用于查询数据集。

[LINQ 到数据集](http://msdn.microsoft.com/en-us/library/bb386977.aspx)

> LINQ to DataSet 使查询缓存在 DataSet 对象中的数据变得更加容易和快捷。具体来说，LINQ to DataSet 通过使开发人员能够从编程语言本身编写查询，而不是使用单独的查询语言来简化查询。

要对数据库执行插入/更新/删除操作，您可以使用[Linq to SQL](http://msdn.microsoft.com/en-us/library/bb386931.aspx)或[实体框架](http://blogs.msdn.com/b/wriju/archive/2008/08/21/ado-net-entity-insert-update-and-delete.aspx)。

# java - 在 Java 中静态键入脚本语言

> ID：11200691
> 
> 赞同：2
> 
> 时间：2012-06-26T04:13:35.463
> 
> 标签：java, parsing, interpreter, scripting-language, static-typing

我正在为游戏构建 Java 脚本语言，目前正在研究解析器。玩家/模组制作者/我自己将使用该语言来创建自定义咒语和效果。但是，我很难想象如何在当前系统中顺利实现静态类型（性能需求驱动的痛苦必要性）。我不太在乎编译是否很快，但实际执行需要尽可能快（至少在合理范围内。我希望很快完成。）

因此，解析器具有 迭代令牌流的方法`next()`。`peek()`它目前由层次结构方法构建，这些方法以保留类型优先级的方式相互调用（“最底层”方法返回常量、变量等）。每个方法都返回一个`IResolve`具有`<T>`它“解析”到的泛型类型。例如，这是一个处理“或”表达式的方法，其中“和”的耦合更紧密：

```
protected final IResolve checkGrammar_Or() throws ParseException
{
    IResolve left = checkGrammar_And();

    if (left == null)
        return null;

    if (peek().type != TokenType.IDENTIFIER || !"or".equals((String)peek().value))
        return left;

    next();

    IResolve right = checkGrammar_Or();

    if (right == null)
        throwExpressionException();

    return new BinaryOperation(left, right, new LogicOr());
} 
```

问题是当我需要实现一个依赖于类型的函数时。您可能已经注意到，解析器没有指定泛型类型，而是设计问题的一部分。在这个函数中，我希望执行以下操作（尽管由于泛型类型的擦除，这不起作用......）

```
protected final IResolve checkGrammar_Comparison() throws ParseException
{
    IResolve left = checkGrammer_Term();

    if (left == null)
        return null;

    IBinaryOperationType op;

    switch (peek().type)
    {
    default:
        return left;

    case LOGIC_LT:

        //This ain't gonna work because of erasure
        if (left instanceof IResolve<Double>)
            op = new LogicLessThanDouble();

        break;

    //And the same for these
    case LOGIC_LT_OR_EQUAL:
    case LOGIC_GT:
    case LOGIC_GT_OR_EQUAL:
    }

    next();

    IResolve right = checkGrammar_Comparison();

    if (right == null)
        throwExpressionException();

    return new BinaryOperation(left, right, op);
} 
```

我希望可以建立连接的问题点在 switch 语句中。我已经确定我需要将 IResolve 设为非泛型并给它一个“getType()”方法来返回一个`int`或其他东西，特别是如果我想在将来支持用户定义的类。

## 问题是：

鉴于我当前的结构和对混合继承的渴望（用户定义的类和接口，如 Java 和 C#），实现静态类型的最佳方法是什么？如果没有好的方法，我该如何改变甚至重建我的结构来实现它？

注意：我不声称自己知道自己陷入了什么，建设性的批评非常受欢迎。如果我需要澄清任何事情，请告诉我！

另一个注意事项：我知道你在想“为什么要使用静态类型？”，通常我会同意你的看法——但是，游戏世界是由体素组成的（准确地说是 Minecraft 模组），并且与它们一起工作需要**快点**。_ 想象一个脚本，它是一个 O(n^2) 算法，每秒 20 次迭代超过 100 个块，为 30 多个玩家在一个*已经*几乎没有吱吱声的廉价服务器上......或者，不可避免地影响数千个块的单个大规模爆炸导致可怕的滞后峰值。因此，后端类型检查或任何形式的鸭式打字都不会削减它（尽管我非常渴望它atm。）在这种特殊情况下，低级别的好处是必要的，尽管它是痛苦的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T05:25:03.257

您可以通过向;添加一个方法`Class<T> getType()`来获得两全其美的效果。`IResolve`它的实现者应该简单地返回适当的`Class`对象。（如果实现者本身是通用的，则需要在构造函数或其他东西中获取对该对象的引用。）

然后你可以做`left.getType().equals(Double.class)`，等等。

这与您是否应该使用静态类型构建自己的解析器的问题完全不同，这是非常值得一问的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T21:11:26.290

正如一些人在评论中所建议的那样，我要采用的解决方案是将解析和键入分成单独的阶段，以及使用`enum`我最初认为应该的类型来表示类型。

虽然我很欣赏 Taymon 的回答，但如果我希望将来支持用户定义的类，我就不能使用它。

如果有人有更好的解决方案，我会非常乐意接受！

# javascript - 返回标签的文本值并在每个标签上附加一个换行符

> ID：11200692
> 
> 赞同：2
> 
> 时间：2012-06-26T04:14:02.247
> 
> 标签：javascript, jquery, html

所以如果我调用这个函数：

```
$("#item").text() 
```

在这个 HTML 代码上：

```
<div id="item">
<pre><span class="cm-tag">&lt;html&gt;</span></pre><pre><span class="cm-tab">    </span>asdf</pre><pre><span class="cm-tag">&lt;/html&gt;</span></pre>
</div> 
```

它返回：

```
'<html>    asdf</html>' 
```

我希望它返回：

```
'<html>
    asdf
</html>' 
```

基本上我需要在每个`<pre>`标签后换行......我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T04:26:50.770

一个可能的解决方案，获取每个 pre 的文本并用新行加入它们：

```
var text = $("#item pre").map(function(){
    return $(this).text();
}).get().join('\n'); 
```

这是jsfiddle：http: [//jsfiddle.net/uGGFe/](http://jsfiddle.net/uGGFe/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T05:26:06.943

```
var text = '';
$("#item pre").map(function(i, el) {
    return $(el).text().replace(/\s/g, '')
}).each(function(i, val) {
    if (i == 0) 
        text += val.concat('\n\t');
    else
        text += val.concat('\n');
}); 
```

​工作 **[样本](http://jsfiddle.net/thesystemrestart/XQwB3/15/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T06:45:55.827

因为 jQuery 搜索匹配 htmlElement 使用正则表达式，当正则表达式匹配内容时首先删除“\r\n”，所以你看到的内容没有“\r\n”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T04:48:17.913

您的另一个选择：

```
var clone = $("#item").clone(); //create a clone we can manipulate
clone.find('pre').after('\n');  //stick new lines in after <pre> tags
alert(clone.text());            //behold the alert glory 
```

[http://jsfiddle.net/SrV9c/1/](http://jsfiddle.net/SrV9c/1/)

# c++ - 代码分段错误

> ID：11200695
> 
> 赞同：0
> 
> 时间：2012-06-26T04:14:08.100
> 
> 标签：c++

```
#include<iostream>
#include<stdlib.h>
#include<string.h>
#include<stdio.h>

using namespace std;

union type{
            int a;
            char b;
            int *p;
            char *s;
            int arr[10];
};

int fn(union type *exp){

    exp->p = exp->p+1;
    cout << *(exp->p);
    cout << "\n";
return 0;
}

int main(){

    union type *str;
    str->a = 10;
    str->b = 'n';
    str->p = &(str->a);
    cout << (str->p);
    cout << "\n";
    fn(str);
    cout << str->p;
    cout << "\n";
return 0;
} 
```

这段代码给了我分段错误。是因为我需要使用 malloc 显式地为联合分配内存吗？我是编码和尝试学习 C++ 的新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T04:18:05.973

> 这段代码给了我分段错误。是因为我需要使用 malloc 显式地为联合分配内存吗？

正确的。您的`str`指针没有指向有效的内存位置，甚至没有初始化。所以，在写作之前，`str->a`你需要设置`str`一些东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T04:18:01.917

您正在声明一个指向联合的指针，但该指针未指向任何有效内存，您需要 malloc/new。它指向的是未定义的（垃圾指针）。

# javascript - 可以使用 Javascript 来测试要上传的文件的大小吗？

> ID：11200700
> 
> 赞同：1
> 
> 时间：2012-06-26T04:14:56.063
> 
> 标签：javascript

> **可能重复：**
> [如何确定 JavaScript 中的文件大小？](https://stackoverflow.com/questions/1126905/how-can-you-determine-the-file-size-in-javascript)
> [如何在上传前验证文件大小？](https://stackoverflow.com/questions/7146816/how-to-validate-file-size-before-uploading)

如果应该上传的文件大于限制，Javascript 是否支持发布警报的功能？

# json - 具有重复键名的 JSON 在解析时会丢失信息

> ID：11200702
> 
> 赞同：2
> 
> 时间：2012-06-26T04:15:18.000
> 
> 标签：json, groovy

所以要么我回去告诉某人他们应该修复他们的 JSON，要么我需要找出我做错了什么。这是 JSON，请注意**参数**出现了 3 次：

```
String j= '''{
    "jobname" : "test",
    "parameters" : {
    "parameter": {"name":"maxErrors", "value":"0"},
    "parameter": {"name":"case", "value":"lower"},
    "parameter": {"name":"mapTable", "value":"1"}
    }
} ''' 
```

我正在尝试获取每个名称和值。我的代码

```
def doc = new JsonSlurper().parseText(j)
def doc1 = doc.entrySet() as List
def doc2 = doc.parameters.entrySet() as List
println "doc1.size===>"+doc1.size()
println "doc1===>"+doc1
println "doc2.size===>"+doc2.size()
println "doc2===>"+doc2 
```

我的结果：

```
doc1.size===>2
doc1===>[jobname=test, parameters={parameter={name=mapTable, value=1}}]
doc2.size===>1
doc2===>[parameter={name=mapTable, value=1}] 
```

为什么我只得到一个参数？另外两个在哪里？看起来 JSON 只保留一个**参数**并丢弃其他参数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T05:31:50.053

JSON 格式不正确。在同一层次结构中不应有重复的键，否则它们将相互覆盖。

它应该是一个参数数组。

像这样，

```
String j= '''{
 "jobname" : "test",
 "parameters" : [
 {"name":"maxErrors", "value":"0"},
 {"name":"case", "value":"lower"},
 {"name":"mapTable", "value":"1"}
 ]
} 
```

# python - 在 wxPython 中显示另一个窗口/框架

> ID：11200703
> 
> 赞同：0
> 
> 时间：2012-06-26T04:15:24.243
> 
> 标签：python, wxpython

我对编程以及 python 和 wxpython 相当陌生。我已经查看了这个代码几个小时，并尝试在网上到处寻找答案。单击菜单项后，我无法显示新窗口。到目前为止，这是我的代码...

```
import wx

class MainWindow(wx.Frame):

    def __init__(self,parent,id):
        wx.Frame.__init__(self,parent,id,'Python Test App',size=(600,400))
        panel=wx.Panel(self)
        wx.Frame.CenterOnScreen(self)
        ##wx.Frame.Maximize(self)

        status=self.CreateStatusBar()
        menubar=wx.MenuBar()
        file_menu=wx.Menu()
        edit_menu=wx.Menu()

        ID_FILE_NEW = 1
        ID_FILE_OPEN = 2

        ID_EDIT_UNDO = 3
        ID_EDIT_REDO = 4

        file_menu.Append(ID_FILE_NEW,"New Window","This is a new window")
        file_menu.Append(ID_FILE_OPEN,"Open...","This will open a new window")

        edit_menu.Append(ID_EDIT_UNDO,"Undo","This will undo your last action")
        edit_menu.Append(ID_EDIT_REDO,"Redo","This will redo your last undo")

        menubar.Append(file_menu,"File")
        menubar.Append(edit_menu,"Edit")
        self.SetMenuBar(menubar)

        self.Bind(wx.EVT_MENU, NewWindow.new_frame, None, 1)

class NewWindow(wx.Frame):

    def __init__(self,MainWindow,id):
        wx.Frame.__init__(self, None, id, 'New Window', size=(600,400))
        wx.Frame.CenterOnScreen(self)
        self.Show(False)

    def new_frame(self, event):
        NewWindow.Show(True)

if __name__=='__main__':
        app=wx.PySimpleApp()
        frame=MainWindow(parent=None,id=-1)
        frame.Show()
        app.MainLoop() 
```

当我尝试运行此代码时，一旦单击菜单项“新窗口”，就会收到此错误消息

```
TypeError: unbound method new_frame() must be called with NewWindow instance as first argument (got CommandEvent instance instead) 
```

同样，我对编程还很陌生。非常感谢任何帮助，而且，我知道我的代码可能不是“最干净”的代码。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T04:34:24.557

您似乎不了解 Python 中的类是如何工作的。您尝试调用`NewWindow.new_frame`，但实际上从未创建该类的实例。

错误消息是因为您在类而不是类的实例上调用方法。你想要做的是这样的：

```
newWin = NewWindow(...) # replace ... with the appropriate parameters
newWin.Show(True) 
```

您在示例中没有提供足够的信息来了解 NewWindow 调用的适当参数是什么（例如，您没有显示创建主窗口的位置），但`MainWindow`and`id`参数`NewWindow.__init__`不仅仅用于外观： wxPython 需要知道父窗口。您应该查看 wxPython 文档以了解如何创建 wxFrame。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T05:43:10.630

在某种程度上修改您的代码，当用户单击新窗口选项时，我能够显示一个新窗口，

请检查我修改过的东西，让我知道这是否是您想要的？

```
import wx

class MainWindow(wx.Frame):

    def __init__(self,parent,id):
        wx.Frame.__init__(self,parent,id,'Python Test App',size=(600,400))
        panel=wx.Panel(self)
        wx.Frame.CenterOnScreen(self)

        status=self.CreateStatusBar()
        menubar=wx.MenuBar()
        file_menu=wx.Menu()
        edit_menu=wx.Menu()

        ID_FILE_NEW = 1
        ID_FILE_OPEN = 2

        ID_EDIT_UNDO = 3
        ID_EDIT_REDO = 4

        file_menu.Append(ID_FILE_NEW,"New Window","This is a new window")
        file_menu.Append(ID_FILE_OPEN,"Open...","This will open a new window")

        edit_menu.Append(ID_EDIT_UNDO,"Undo","This will undo your last action")
        edit_menu.Append(ID_EDIT_REDO,"Redo","This will redo your last undo")

        menubar.Append(file_menu,"File")
        menubar.Append(edit_menu,"Edit")
        self.SetMenuBar(menubar)

        self.Bind(wx.EVT_MENU, self.test, None, 1)

    def test(self, event):
        self.new = NewWindow(parent=None, id=-1)
        self.new.Show()

class NewWindow(wx.Frame):

    def __init__(self,parent,id):
        wx.Frame.__init__(self, parent, id, 'New Window', size=(400,300))
        wx.Frame.CenterOnScreen(self)
        #self.new.Show(False)

if __name__=='__main__':
        app=wx.PySimpleApp()
        frame=MainWindow(parent=None,id=-1)
        frame.Show()
        app.MainLoop() 
```

# php - 小部件使用

> ID：11200705
> 
> 赞同：0
> 
> 时间：2012-06-26T04:15:36.040
> 
> 标签：php, html, css

[http://www.christywhiteheadphotography.com/CWPTEST/（wordpress](http://www.christywhiteheadphotography.com/CWPTEST/)网站）

我的部分主题使用滑块下显示的小部件。前任。雨天促销、狂欢等

我希望标题全部显示为`<h3>'s`而不是`<h2>'s`.

感谢有关如何执行此操作的任何指导。

谢谢，肯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T04:21:53.880

您应该能够执行这样的操作（前提是您知道用于该小部件区域的侧边栏的名称）。此代码被添加到`functions.php`：

```
if( function_exists('register_sidebar') ) {
    register_sidebar(array('name'=>'your_sidebar_name',
        'before_title' => '<h3>', 
        'after_title' => '</h3>'
    ));
} 
```

但是，您最好只重新设置`h2's`该小部件区域内部的样式。您可以忘记上面的代码并在您的`style.css`:

```
.grid_4 h2 { font-size: 30px } 
```

# ios - iOS 多模块应用

> ID：11200707
> 
> 赞同：2
> 
> 时间：2012-06-26T04:15:43.100
> 
> 标签：ios, cocoa-touch, app-store

是否可以创建一个具有多个动态模块的业务应用程序（不是公共的，如应用商店中的其他公共应用程序），我不想将此模块保留在应用程序中，而是我想通过网络下载它根据用户角色，将其保存在文件系统中并动态加载，下次从文件系统加载。是否也可以使用应用内购买来为此模块收取一些费用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T04:22:15.083

iOS 安全模型旨在防止您执行从 Internet 下载的代码。Windows/Mac/Linux 存在巨大的安全问题，因为它们能够执行呈现给它们的任何代码，而 iOS 从一开始就是为了防止这种情况而设计的。

越狱完全禁用了所有安全性，如果您有企业开发者帐户，您将能够在其中打几个非常小的洞......

但一般来说，不——除非模块是用 javascript 编写并由内置的 WebKit 引擎执行的，否则您尝试做的事情是不可能的。

您只需将其编译到应用程序中。如果您有企业帐户，那么您可以在每次启动时检查新版本，并强制用户安装最新版本，然后才能使用它（创建一个描述新版本的 xml 文件并带有指向实际版本的 URL ipa 文件，告诉系统打开 xml 文件的 URL，会要求用户确认应用程序安装，然后它会自行安装）。

关于应用内购买，我不这么认为。你只需要设定一个足够低的价格，没有人会犹豫买两次。

# c# - 找不到请求的 .Net Framework 数据提供程序 + 实体框架

> ID：11200709
> 
> 赞同：2
> 
> 时间：2012-06-26T04:16:04.807
> 
> 标签：c#, sqlite, entity-framework-4.1

我使用实体框架开发了一个 Windows 应用程序，作为数据库，我使用了 SQLite。在我将安装项目添加到我的解决方案中为我的应用程序制作安装程序文件并添加 .net Framework 3.5 和 .net Framework 4.0 以及 Windows Installer 作为安装的先决条件之前，我开发它没有问题。

在其他计算机上，安装成功，但当用户尝试执行应用程序时，他们收到此异常

> 找不到请求的 .Net Framework 数据提供程序

我用谷歌搜索了这个例外，大多数答案都谈到了`web.config`. 谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T04:54:21.853

您必须在安装程序包中包含 System.Data.SQLite.dll 提供程序程序集（或在单击一次下载应用程序中使它们成为必需），然后您必须通过将其添加到配置文件中的提供程序部分来注册提供程序.

```
<system.data>
<DbProviderFactories>
    <remove invariant="System.Data.SQLite"/>
    <add name="SQLite Data Provider" invariant="System.Data.SQLite" description=".Net Framework Data Provider for SQLite" type="System.Data.SQLite.SQLiteFactory, System.Data.SQLite"/>
</DbProviderFactories> 
```

# c++ - 有没有办法通过 C++ 程序在特定时间获取文件部分加载内容的大小？

> ID：11200711
> 
> 赞同：0
> 
> 时间：2012-06-26T04:16:38.783
> 
> 标签：c++, file

我没有在文件流中打开文件。有一个“浏览”按钮，单击它后，您可以选择文件，就像所有其他浏览按钮一样。然后文件将在已定义为打开该类型文件的应用程序中打开。例如 pdf 文件将在 adobe 中打开，.txt 将在记事本（或记事本++或任何其他设置为打开的文本编辑器中打开.txt 文件）。我想获取在特定时间加载了该文件的多少内容。有没有办法获取该文件部分加载内容的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T04:39:28.397

我将做出以下假设：

*   您的“预定义应用程序”实际上是一个不受您控制的库，但正在为您读取文件
*   您想知道文件的读取指针前进了多远
*   您可以访问表示“预定义应用程序”正在使用的文件（a`FILE *`或 a `ifstream`、POSIX 文件描述符或 Windows 文件）的底层对象`HANDLE`

如果您使用打开文件`fopen`进行阅读，您将`ftell`使用`FILE *`.

```
FILE *infile;
//...
long position = ftell(infile); 
```

如果您有`ifstream`，请使用该`tellg`方法。

```
std::ifstream infile;
//...
long position = infile.tellg(); 
```

如果打开文件以供读取`open`，则可以`lseek`在文件描述符上使用。

```
int infile;
//...
long position = lseek(infile, 0, SEEK_CUR); 
```

如果在 Windows 上打开文件以供阅读`OpenFile`，您将`SetFilePointer`在`HANDLE`.

```
HANDLE infile;
//...
long position = SetFilePointer(infile, 0, 0, FILE_CURRENT); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T05:15:14.590

如果您使用的是 C++ 流，则可以使用该[`tellg`](http://en.cppreference.com/w/cpp/io/basic_istream/tellg)函数获取文件中的位置。

请注意，这将返回相对于流字符大小的位置。例如，读取 10 个字符`istream`（使用`char`）然后`tellg`将报告 10，但是从 a 读取 10 个字符`wistream`（使用`wchar_t`）然后报告的数量将是 20 或 40，具体取决于 的大小`wchar_t`。

# sql-server - 将自动递增的主键从 TableA 插入到 TableB 的 FK

> ID：11200717
> 
> 赞同：0
> 
> 时间：2012-06-26T04:17:25.540
> 
> 标签：sql-server, primary-key

我有两张桌子：`TableA`和`TableB`

```
CREATE TABLE TableA (
[TableAId] [int] IDENTITY(1,1) NOT NULL...

CREATE TABLE TableB (
[TableBId] [int] IDENTITY(1,1) NOT NULL,
[TableAID] [int] NOT NULL... -- this is the FK 
```

问题：（作为 C# 开发人员）

我正在编写一个插入到`TableA`. 我需要获取新创建的主键并将其与其他数据一起`TableA`插入到 FK 中。`TableB`

我以前做过，但我不喜欢我所做的，即`TableA`在插入后立即查找 PK 值，将其存储为变量，然后将其插入`TableB`.

有人可以告诉我一个更有效的方法吗？也许在存储过程中使用 scope_identity()？触发器不起作用，因为我需要在我的 C# 中返回新的 PK，因此我可以在插入`TableB`. 另外，我想在运行时锁定两个表。

谢谢你，罗伯特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T04:25:26.127

```
Declare @TableAId int

Insert TableA ( ... )
Values( ... )

Set @TableAId = Scope_Identity();

Insert TableB( TableAId, ... )
Values( @TableAId, ... ) 
```

应该注意的是，可以将它一次性发送到 SQL Server。即，您可以将整个命令文本发送到 SQL Server 并立即执行。当然，您需要为表 A*和*表 B 的所有非标识列使用参数。例如：

```
const string sql = @"Declare @TableAId int

Insert TableA ( ... )
Values( ... )

Set @TableAId = Scope_Identity();

Insert TableB( TableAId, ... )
Values( @TableAId, ... )";

using ( var conn = new SqlConnection( ... ) )
{
    using ( var cmd = new SqlCommand( sql, conn ) )
    {
        cmd.Parameters.AddWithValue( @TableACol, ... );
        cmd.Parameters.AddWithValue( @TableACol2, ... );
        ...
        cmd.Parameters.AddWithValue( @TableBCol, ... );

        cmd.ExecuteNonQuery();
    }
} 
```

如果您使用 SQL Server 2005 或更高版本，另一个选择可能是使用[OUTPUT 子句](http://msdn.microsoft.com/en-us/library/ms177564%28v=sql.90%29.aspx)：

```
Insert TableA( ... )
    Output Inserted.TableAId, @TableBCol1, @TableBCol2, ...
    Into TableB
Values( ... ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T14:43:16.967

这有效...

* * *

```
USE [TestDB01] 

GO 

SET ANSI_NULLS ON 

GO 

SET QUOTED_IDENTIFIER ON 

GO

CREATE PROCEDURE [dbo].[sp_INSERT_INTO_Cars_And_Owners] 
```

-- 这里添加存储过程的参数

```
 @PartnerId INT  
        , @Title NVARCHAR(100)  
        , @Description TEXT  
        , @IPAddress NVARCHAR(16)   
        , @IsCarOwner BIT
        , @OwnerTypeTypeID INT

AS 

BEGIN 

-- SET NOCOUNT ON added to prevent extra result sets from interfering with SELECT statements.
SET NOCOUNT ON; 

DECLARE @CarId INT 

INSERT INTO [dbo].[Cars] ( 
    PartnerId 
    , Title 
    , Description 
    , IPAddress 
    , IsCarOwner 
    ) 
VALUES ( 
    @PartnerId 
    , @Title 
    , @Description 
    , @IPAddress 
    , @IsCarOwner 
    )  

SET @CarId = SCOPE_IDENTITY() 

INSERT INTO [dbo].[Owners] ( 
    OwnerTypeTypeID 
    , CarId 
    ) 

VALUES ( 
    @OwnerTypeTypeID 
    , @CarId 
    )  

END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T04:24:29.420

如果您有一个存储过程同时插入两组数据，则使用此代码。

```
DECLARE @id INT

INSERT INTO [dbo].[TableA] VALUES (...)
SET @id = SCOPE_IDENTITY()

INSERT INTO [dbo].[TableB] VALUES (@id ...) 
```

如果您使用的是原始 ADO，则设置`@id`为 OUTPUT 参数并在第二个 DB 调用中使用返回值。有关如何使用输出参数[的示例](https://stackoverflow.com/questions/290652/get-output-parameter-value-in-ado-net)，请参阅此处。

至于锁定两个表，您可以将调用包装在事务（TSQL 或 ADO.NET）中，也可以`SET TRANSACTION ISOLATION LEVEL SERIALIZABLE`为存储过程设置。

# php - 如何在php中传递选中复选框的值

> ID：11200720
> 
> 赞同：1
> 
> 时间：2012-06-26T04:17:43.663
> 
> 标签：php

嗨，我正在使用 for each 循环生成复选框列表，我想将`value`选中的复选框传递到数据库中。

```
foreach($this->lis as $lst)
 {?>
  <tr>
    <td>
     <input type="checkbox" name="list" value="1" />
         <label for="list_32"><?php echo $list->nList ?></label>
    </td>
  </tr>
 <?php } ?> 
```

当我选中复选框时，我想将标签名称传递到数据库中，有人可以帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T04:36:39.507

检查此代码。您需要将数组作为复选框名称，即列表[]。提交表单后，您可以使用它的值插入数据库。

```
<? 
    if(isset($_POST['submit'])) // once form is submitted build your logic
    {
        $list = $_POST['list'];
        foreach($list as $value)
        {
            echo "<br />Checked: $value";
            // use $value to insert into database
            $sql = "insert into...";
            mysql_query($sql);
        }
    }
?>
<form name="frm" method="post">
<table>
<? foreach($this->lis as $lst)
 {?>
  <tr>
    <td>
     <input type="checkbox" name="list[]" value="<?php echo $list->nList ?>" />
         <label for="list_32"><?php echo $list->nList ?></label>
    </td>
  </tr>
 <?php } ?>
 <tr>
    <td><input name="submit" value="Submit" type="submit" /></td></tr></table>
</form> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T04:37:03.340

好吧，你有几个问题在那里..

首先，请避免打开php标签并不断关闭它们。只需回显 HTML。频繁进出php会导致性能问题。

因此，首先，您需要在此处设置一个表单，您的表单需要指向第二个页面（或使用 isset 函数进行自我处理，但为了清楚起见，让我们使用前一个解决方案）。第二页是根据用户勾选的内容为您将内容转储到数据库中的内容。

因此，这是您的表单的 HTML；

```
<form action="database.php" method="POST">
    <div>
        <label for="checkbox1">This is the first option:</label>
        <input type="checkbox" id="checkbox1" name="checkbox1" />
    </div>
    <div>
        <label for="checkbox2">This is the second option:</label>
        <input type="checkbox" id="checkbox2" name="checkbox2" />
    </div>
    <div>
        <input type="submit" />
    </div>
</form> 
```

同样，我建议在你的 foreach 循环中回显这个 - 一个简短的函数可以为你完成这个。

因此，一旦有人点击“提交”按钮，他们将被带到您的第二页（我们称之为 database.php），他们的选项将存储在 POST 数组中。为获得良好的实践，在处理数据库条目时始终使用 POST 而不是 GET。

所以在这个页面上，我们会检查哪些复选框被选中，然后根据需要更新数据库；

```
if (isset($_POST['checkbox1']))
{
    // user ticked checkbox1
    $sql = "UPDATE table
            SET 'checkbox1' = 1
            WHERE 'user' = 'username';"
    mysqli_query($sql); 
} 
```

请注意，这只是一个粗略的解决方案-您还没有确切地告诉我您是如何执行此操作的，因此我假设您的数据库与用户的投票等相关。您还可以通过增加值来更新 checkbox1 等等等等。

希望这可以帮助。

*   伊根

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T04:26:07.827

在名称中您应该使用 [] （因为它是一个数组）。所以在这种情况下，它将是 name="list[]"。然后，当您提交它（发布或获取）时，您只需在 list[] 数组中获取检查的数据。我不确定我是否理解你的问题。如果我没有；请分享更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T04:32:39.440

我想这就是你要找的：

```
foreach($this->lis as $lst)
 {?>
  <tr>
    <td>
     <input type="checkbox" name="list[<?php echo $list->nList ?>]" value="1" />
     <label for="list_32"><?php echo $list->nList ?></label>
    </td>
  </tr>
 <?php } ?> 
```

然后在 PHP 中，你会`foreach($_POST['list'] as $listval)`再次循环它。如果您在表单中使用，请替换`$_POST`。`$_GET``GET`

**编辑：**我刚刚注意到你在哪里做`echo $list->nList`的这个变量要么不会在你的循环中改变，要么是一个错字。假设这是一个错字，它应该是`echo $lst->nList`。如果它不是错字，那么您只想删除它并`name="list[]"`在您的 HTML 中添加

# c# - 使用 HwndSource 在 Win32 应用程序中托管 WPF UserControl

> ID：11200721
> 
> 赞同：4
> 
> 时间：2012-06-26T04:17:54.587
> 
> 标签：c#, wpf, interop, hwndsource

我需要通过 Handle 在其他窗口中托管我的 WPF UserControl。我尝试使用 HwndSource：

```
var userControl = new MyUserControl();
var parameters = new HwndSourceParameters();
parameters.WindowStyle = 0x10000000 | 0x40000000;
parameters.SetPosition(5, 5);
parameters.SetSize(300, 300);
parameters.ParentWindow = parentWindowHwnd;
var src = new HwndSource(parameters);
src.RootVisual = userControl; 
```

但在这种情况下，箭头和制表键不起作用。

如果我使用 ElementHost 一切正常：

```
[DllImport("user32.dll", SetLastError = true)]
static extern IntPtr SetParent(IntPtr hWndChild, IntPtr hWndNewParent);

var userControl = new UserControl1();
var elementHost = new ElementHost();
elementHost.Child = userControl;
elementHost.Left = 5;
elementHost.Top = 5;
elementHost.Width = 300;
elementHost.Height = 300;

SetParent(elementHost.Handle, parentWindowHwnd); 
```

如何使用 HwndSource 获得全部功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T13:20:13.703

当您使用 HwndSource 时，您必须为 windows 消息注册一个处理程序。

这可以通过调用来完成：

```
src.AddHook(this.messageHook); 
```

挂钩必须检查 wm_getdlgcode 消息。

```
 private IntPtr messageHook(IntPtr hwnd, int msg, IntPtr wparam, IntPtr lparam, ref bool handled)
    {
        switch (msg)
        {
            case WmGetDlgCode:
                {
                    handled = true;
                    return (IntPtr)(DlgcWantChars | DlgcWantTab | DlgcWantArrows | DlgcWantAllKeys);
                }
        }
        return IntPtr.Zero;
    } 
```

通过 Dlgc_WantChars、Dlgc_WantTab、Dlgc_WantArrows 和 Dlgc_WantAllKeys 返回您需要的内容。

检查此消息和代码： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms645425 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645425(v=vs.85).aspx)

```
 private const int WmGetDlgCode = 0x0087;

    private const int DlgcWantChars = 0x0080;

    private const int DlgcWantTab = 0x0002;

    private const int DlgcWantAllKeys = 0x0004;

    private const int DlgcWantArrows = 0x0001; 
```

# ubuntu - Ubuntu 12.04 VNC 问题

> ID：11200722
> 
> 赞同：0
> 
> 时间：2012-06-26T04:17:56.703
> 
> 标签：ubuntu, vnc-viewer

我在多台机器和多个版本的 Ubuntu 桌面（都是 10.04 或更高版本）上遇到过这个问题。通常它发生在我安装了 Ubuntu 的旧笔记本电脑上，但现在它发生在我的主要开发机器上（最近升级到 Ubuntu 12.04 桌面的四核 PC）。问题是这样的 - 我可以连接到机器并使用密码登录，初始屏幕看起来很好但从不刷新。我可以看到房间对面的机器显示器，可以看到鼠标移动和菜单弹出，但我面前运行 VNC 查看器的 PC 上的屏幕图像永远不会更新。所以鼠标和键盘命令正在工作。

*   Ubuntu 12.04 桌面
*   Ultra VNC 查看器（也可以通过 RealVNC 的免费 VNC 查看器查看）
*   eth0 上的桌面共享静态 IP；eth1 上的动态 ID

我认为这是一个 Ubuntu 配置问题，因为这台 PC 曾经在 9.04、10.04 和 11.10（过去几年）中运行良好。我也有几台笔记本电脑曾经在较旧的 Ubuntu 上出现这个问题，但在 12.04 上没有。

附加信息：

*   我试图用来控制 Ubuntu PC 的 Win7 PC 通过 2 个 DLink 8 端口千兆路由器连接。我通常通过 VNC 控制的 Ubuntu 笔记本电脑通常只通过无线连接到网络。屏幕刷新不稳定但可用。
*   我在通过以太网和无线连接的 Win7 笔记本电脑上重复了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T22:22:58.047

Turns out this is fixed by changing the Ubuntu 12.04 desktop to Unity 2D.

# ios - UITextView 中的文本显示不正确，不可见，但占用空间

> ID：11200726
> 
> 赞同：9
> 
> 时间：2012-06-26T04:18:22.770
> 
> 标签：ios, uikit, uitextview, word-wrap

视图中有一个 UITextView，视图控制器以 Modal 样式显示。在我的 viewDidLoad 方法中，我设置了这个 UITextView 的文本，但是没有显示文本。下图显示了错误。***文字颜色为黑色***。

奇怪的是，当我在文本视图中长按或在键盘上点击 [return] 时，文本变得可见。***我注意到的一件事是，仅当我设置的文本长于 UITextView 框架宽度时***才会发生此错误，并且最后一个单词没有损坏，例如 long url 。

我认为问题***可能是自动换行无法正常工作***。

提前致谢。

![在此处输入图像描述](../Images/59699d21dc263214eb30fbfe4bd19370.png)

代码如下：

```
UITextView *myTextView = [[UITextView alloc]initWithFrame:CGRectMake(10, 10, 520, 220)];
myTextView.textColor = [UIColor blackColor];    
myTextView.font = [UIFont systemFontOfSize:20];
myTextView.layer.cornerRadius = 5;
myTextView.delegate = self;
myTextView.text = @"long text should some like http://stackoverflow.com/posts/11200726/edit";

[self.view addSubview:myTextView];
[myTextView release]; 
```

已解决。在 viewDidLoad 方法中，添加以下代码：

```
CGRect tempFrame = myTextView.frame;
[myTextView setFrame:CGRectZero];
[myTextView setFrame:tempFrame]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T21:38:18.683

将 UITextView 子类化为您自己的类，比如 MyUITextView:UITextView。

在屏幕外初始化它

> [[MyUITextView alloc] initWithFrame:CGRectZero]

在 MyUITextView 中覆盖该方法

> -(void)willMoveToWindow:(UIWindow *)newWindow

并在其中将 self.frame 设置为适当的值。

这对我有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T23:43:39.997

我认为问题在于：

```
self.view 
```

尝试在顶部添加此代码行

```
self.view = [[[UIView alloc] initWithFrame:[UIScreen mainScreen].bounds] autorelease]; 
```

如果没有帮助，请尝试删除此代码行

```
myTextView.layer.cornerRadius = 5; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T06:59:31.967

我认为在这种情况下， viewDidLoad 在 modelViewController 出现之前被调用。

*   在 modalViewController 出现后设置文本。
*   如果这也不起作用，那么在呈现模型之后，调用一个方法来显式设置文本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T11:32:18.667

检查您的视图层次结构。您可能在该视图上方添加了另一个 textView。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T12:14:16.563

尝试更改 textView 的背景颜色。它必须出现是在那里添加了 UITextView。并确保您没有在 UITextView 上方添加另一个视图作为子视图。如果 textColor 为黑色，则它必须是可见的，除非您更改属性，否则默认情况下自动换行。如果添加，请尝试检查 XIB 中的属性设置，如果以编程方式添加，请显示代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-26T04:22:59.747

你确定文字颜色是黑色的吗？还要确保图像位于视图层次结构中的 textView 后面。TextView 自动处理自动换行。

# android - Webview 在 Android 中将图像显示为一个点（tabactivity）

> ID：11200731
> 
> 赞同：1
> 
> 时间：2012-06-26T04:19:12.147
> 
> 标签：android, webview

我正在使用 a`webview`从 URL 加载图像，但是当 webview 加载时，它将图像显示为顶角的点。放大/缩小操作后，我得到了原始大小的图像。

这是我的代码：

```
 web = (WebView) findViewById(R.id.wvcalendar);
    progressBar = (ProgressBar) findViewById(R.id.progressBar1);

    web.setInitialScale(1);
    web.getSettings().setJavaScriptEnabled(true);
    web.getSettings().setSupportZoom(true);
    web.getSettings().setBuiltInZoomControls(true); 
    web.getSettings().setDomStorageEnabled(true);
    web.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
    web.getSettings().setUseWideViewPort(false); 
    web.loadUrl("http://www.hellotravel.com/sites/default/files/fraser-island.jpg"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T04:32:19.597

试试这个：

```
web.setInitialScale(30);
web.getSettings().setJavaScriptEnabled(true);
web.getSettings().setSupportZoom(true);
web.getSettings().setBuiltInZoomControls(true); 
web.getSettings().setDomStorageEnabled(true);
web.getSettings().setLoadWithOverviewMode(true);
web.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
web.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
web.setScrollbarFadingEnabled(true);
web.getSettings().setUseWideViewPort(true); 
web.loadUrl("http://www.hellotravel.com/sites/default/files/fraser-island.jpg"); 
```

# python - 咆哮 iNotify 不工作

> ID：11200741
> 
> 赞同：0
> 
> 时间：2012-06-26T04:20:56.450
> 
> 标签：python, growl

我刚刚下载了 Growl 1.2.2 dog，试图获得额外的 GrowlInotify，这样我就可以开始使用 pyautotest。问题！我没有收到来自[自定义测试](http://www.ianlewis.org/en/modipyd-growl-test-driven-development)运行器的任何咆哮通知。我尝试直接在 cmd 行上运行 growlinotify 并且它是无声的。

```
growlnotify -m "testing" 
```

无声运行，不产生咆哮窗口。我错过了一些明显的东西吗？我应该提一下，几个月前我以 1.99 美元的价格从 Appstore 购买了最新版本的 Growl，并且一直保持最新状态，但我还没有购买硬件咆哮者。（我什至不知道它是什么或有什么区别。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:18:30.867

我终于弄清楚了为什么事情对我不起作用。我从不兼容的 Growl 1.2.2 下载并安装了 growliNotify。在重新访问 Growl 下载页面并向下滚动一点后，我发现了 Growl 1.3+ 的 growliNotify 包。我安装了它，现在growlinotify 按预期从命令行工作。此外，自定义测试运行器现在也在发送咆哮消息！

# php - PHP 更好的替换/匹配方法 $1

> ID：11200761
> 
> 赞同：1
> 
> 时间：2012-06-26T04:23:07.393
> 
> 标签：php

我正在尝试`$1, $2, $3`用另一个 URL 替换 URL 中的变量。您可以在下面复制粘贴我的示例并查看我的解决方案。

但我觉得数组映射类型函数或更好的 preg_replace 类型的东西有一种更优雅的方式。我只需要朝正确的方向踢一脚，你能帮忙吗？

```
 <?php
    /**
    *  Key = The DESIRED string
    *  Value = The ORIGINAL value
    *
    * Desired Result: project/EXAMPLE/something/OTHER
    */
    $data = array(
        'project/$1/details/$2' => 'newby/EXAMPLE/something/OTHER'
    );

    foreach($data as $desiredString => $findMe)
    {
        /**
        * Turn these URI's into arrays
        */
        $desiredString = explode('/', $desiredString);
        $findMe = explode('/', $findMe);

        /**
        * Store the array position of the match
        */
        $positions = array();
        foreach($desiredString as $key => $value) {
            /**
            * Look for $1, $2, $3, etc..
            */
            if (preg_match('#(\$\d)#', $value)) {
                $positions[$key] = $value;
            }
        }

        /**
        * Loop through the positions
        */
        foreach($positions as $key => $value){
            $desiredString[$key] = $findMe[$key];
        }

        /**
        * The final result
        */
        echo implode('/', $desiredString);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T05:41:01.923

有时你运气不好，直接解决问题所需的功能不存在。每种语言都会发生这种情况，无论它有多少库和内置函数。

我们将不得不编写一些代码。我们还需要解决一个特定的问题。最终，我们希望我们对问题的解决方案就像我们最初拥有理想的功能一样干净。因此，无论我们编写什么代码，我们都希望大部分代码不碍事，这可能意味着我们希望将大部分代码放在单独的函数或类中。但是我们不只是想随便乱扔任意代码，因为我们所有的函数和类都应该是可重用的。

然后我的方法是从解决方案中提取一个有用的通用模式，将其编写为一个函数，然后使用该函数重写原始解决方案（这将简化它）。为了找到一般模式，我把问题放大了，所以它可能适用于更多情况。

我最终制作了这个功能`array array_multi_walk(callback $callback [, array $array1 [, array $array2 ... ]])`。此函数同时遍历每个数组并用于`$callback`选择要保留的元素。

这就是使用此功能的解决方案的样子。

```
$chooser = function($a, $b) {
  return strlen($a) >= 2 && $a[0] == '$' && ctype_digit($a[1])
    ? $b : $a;
};

$data = array(
  'project/$1/details/$2' => 'newby/EXAMPLE/something/OTHER'
);

$explodeSlashes = function($a) { return explode('/', $a); };
$find = array_map($explodeSlashes, array_keys($data));
$replace = array_map($explodeSlashes, array_values($data));

$solution = array_multi_walk(
    function($f, $r) use ($chooser) {
        return array_multi_walk($chooser, $f, $r);
    },
    $find, $replace); 
```

并且，根据需要，`array_multi_walk`可以用于其他问题。例如，这对所有元素求和。

```
$sum = function() {
  return array_sum(func_get_args());
};

var_dump(array_multi_walk($sum, array(1,2,3), array(1,2,3), array(10)));
// prints the array (12, 4, 6) 
```

您可能想要对`array_multi_walk`. 例如，如果回调按数组而不是单独的参数获取元素，可能会更好。也许应该有选项标志在任何数组用完元素时停止，而不是填充空值。

这是`array_multi_walk`我想出的实现。

```
function array_multi_walk($callback)
{
  $arrays = array_slice(func_get_args(), 1);
  $numArrays = count($arrays);
  if (count($arrays) == 0) return array();
  $result = array();
  for ($i = 0; ; ++$i) {
    $elementsAti = array();
    $allNull = true;
    for ($j = 0; $j < $numArrays; ++$j) {
      $element = array_key_exists($i, $arrays[$j]) ? $arrays[$j][$i] : null;
      $elementsAti[] = $element;
      $allNull = $allNull && $element === null;
    }
    if ($allNull) break;

    $result[] = call_user_func_array($callback, $elementsAti);
  }
  return $result;
} 
```

所以在一天结束时，我们不得不编写一些代码，但不仅原始问题的解决方案很巧妙，而且我们还获得了一段通用的、可重用的代码来帮助我们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T06:07:40.827

为什么不应该有 $2,$4 而是 $1,$2 ？如果你可以改变你的数组，那么它可以用 3 或 4 行代码来解决。

```
$data = array(
    'project/$2/details/$4' => 'newby/EXAMPLE/something/OTHER'
);

foreach($data as $desiredString => $findMe)
{
    $regexp = "#(".implode(')/(',explode('/',$findMe)).")#i";
    echo preg_replace($regexp,$desiredString,$findMe);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T05:57:13.050

我通过删除注释来缩短您的代码以提高可读性。我正在使用`array_map`并且映射函数决定返回什么值：

```
<?php

function replaceDollarSigns($desired, $replace)
{
    return preg_match('#(\$\d)#', $desired) ? $replace : $desired;
}

$data = array(
    'project/$1/details/$2' => 'newby/EXAMPLE/something/OTHER',
);

foreach($data as $desiredString => $findMe)
{
    $desiredString = explode('/', $desiredString);
    $findMe = explode('/', $findMe);
    var_dump(implode('/', array_map('replaceDollarSigns', $desiredString, $findMe)));
}
?> 
```

工作示例：http: [//ideone.com/qVLmn](http://ideone.com/qVLmn)

您还可以使用以下方法省略该函数`create_function`：

```
<?php

$data = array(
    'project/$1/details/$2' => 'newby/EXAMPLE/something/OTHER',
);

foreach($data as $desiredString => $findMe)
{
    $desiredString = explode('/', $desiredString);
    $findMe = explode('/', $findMe);
    $result = array_map(
        create_function(
            '$desired, $replace',
            'return preg_match(\'#(\$\d)#\', $desired) ? $replace : $desired;'
        ),
        $desiredString,
        $findMe);
    var_dump(implode('/', $result));
}
?> 
```

工作示例：http: [//ideone.com/OC0Ak](http://ideone.com/OC0Ak)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T18:08:49.713

只是说，为什么不在 preg_replace 中使用数组模式/替换？像这样的东西：

```
<?php
/**
*  Key = The DESIRED string
*  Value = The ORIGINAL value
*
* Desired Result: project/EXAMPLE/something/OTHER
*/
$data = array(
    'project/$1/details/$2' => 'newby/EXAMPLE/details/OTHER'
);
$string = 'project/$1/details/$2';

$pattern[0] = '/\$1/';
$pattern[1] = '/\$2/';
$replacement[0] = 'EXAMPLE';
$replacement[1] = 'OTHER';
$result = preg_replace($pattern, $replacement, $string);

echo $result; 
```

我认为这比您要寻找的要容易得多。你可以看到它在这里工作：[http ://codepad.org/rCslRmgs](http://codepad.org/rCslRmgs)

也许有一些理由保留数组键 => 值来完成替换？

# iphone - iOS Twitter 帐户访问

> ID：11200762
> 
> 赞同：1
> 
> 时间：2012-06-26T04:23:17.843
> 
> 标签：iphone, ios, ios5, twitter

*当第一次提示“示例*希望访问 Twitter 帐户”时，我如何处理单击“不允许”的用户？

![推特弹出窗口](../Images/dde9f0a6c7c171644931446e736657a8.png)

是否只能给他们一个弹出窗口，解释他们现在必须进入“设置”并允许访问该应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:52:23.140

您可以使用 [TWTweetComposeViewController canSendTweet]。如果返回 NO，则将用户定向到他们的帐户页面。

# c++ - 什么时候适合使用 C++11 *_until 超时函数而不是相应的 *_for 函数？

> ID：11200763
> 
> 赞同：24
> 
> 时间：2012-06-26T04:23:24.657
> 
> 标签：c++, c++11, timeout

在 C++11 中，`*_until`只有在使用稳定时钟（即仅以不变的速率向前移动的时钟）时，超时函数才会“按预期”运行。因为`system_clock`不是一个稳定的时钟，这意味着这样的代码可能会表现得非常令人惊讶：

```
using namespace std::chrono;
std::this_thread::sleep_until(system_clock::now() + seconds(10)); 
```

这将导致当前线程休眠 10 秒，除非在休眠期间调整系统时钟，例如夏令时。如果在睡眠期间将时钟调回一小时，则当前线程将睡眠一小时十秒。

据我所知，`*_until`C++11 中的每个超时函数都有一个相应的`*_for`函数，它需要一个持续时间而不是一个时间点。例如，上面的代码可以改写如下：

```
using namespace std::chrono;
std::this_thread::sleep_for(seconds(10)); 
```

这些`*_for`函数不必担心在函数执行时会调整时钟，因为它们只是说明等待多长时间，而不是等待结束时应该是什么时间。

这个问题影响的不仅仅是 sleep 函数，对于基于超时的 future 等待和 try_lock 函数也是如此。

`*_until`我可以设想使用具有不稳定时钟的函数的唯一情况是当您*想要*考虑时钟调整时，例如，您想睡到下周三凌晨 3:30，即使有变化从现在到那时的夏令时。在其他情况下，`*_until`函数比函数更有意义`*_for`吗？如果不是，是否可以肯定地说，一般来说，`*_for`超时函数应该优先于`*_until`函数？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T08:39:06.527

*xxx*`_until`电话是在您有截止日期时进行的。典型的用例是您对包含多个等待的一段代码有严格的时间限制，或者等待之前每个步骤所消耗的时间是不可预测的。

例如

```
void foo() {
  std::chrono::steady_clock::time_point const timeout=
    std::chrono::steady_clock::now()+std::chrono::milliseconds(30);

  do_something_which_takes_some_time();

  if(some_future.wait_until(timeout)==std::future_status::ready)
    do_something_with(some_future.get());
} 
```

这只会处理从`some_future`开始后 30 毫秒内准备好的值，包括`do_something_which_takes_some_time()`.

*如本例所示， xxx*函数的大多数用例`_until`将使用稳定的时钟，以实现可预测的超时。

我可以想象将*xxx*`_until`函数与非稳定时钟（例如`std::chrono::system_clock`）一起使用的唯一情况是超时是用户可见的，并且取决于所选时钟的值。闹钟或提醒程序是一个例子，“午夜”运行的备份程序是另一个例子。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T05:10:12.313

该功能的一个用例`sleep_until`是，如果您想睡到特定时间，而不是特定持续时间。

例如，如果您有一个只应在每天下午 3 点激活的线程，您要么必须计算与 一起使用的持续时间（包括处理夏令时和闰年）`sleep_for`，或者您可以使用`sleep_until`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-24T10:43:52.000

for 的一个很好的用途`sleep_until`是稳定时间循环（如游戏循环）。如果您不确定处理一个周期需要多长时间，但它*通常*必须具有某个最小长度，您可以增加要休眠的 time_point 直到周期周期。例如：

```
// requires C++14
#include <iostream>
#include <thread>
#include <chrono>

using namespace std;
using namespace std::chrono;
using namespace std::literals;

int main()
{
  auto start_time = steady_clock::now();

  for (auto i = start_time; i <= start_time + 1s; i += 50ms) {
    this_thread::sleep_until(i);
    cout << "processing cycle..." << endl;
  }

  return 0;
} 
```

*但是，当一个周期花费的时间*比增量时间长时，您可能必须跟踪滞后。

这个想法是，如果你天真`sleep_for`，你将在你的周期*加上*运行循环代码所需的时间。

# vba - 如何使用vba在excel中创建隐藏工作表的实例？

> ID：11200769
> 
> 赞同：2
> 
> 时间：2012-06-26T04:24:24.860
> 
> 标签：vba, excel

我正在创建一个启用宏的 Excel 作为生成“创建表”sql 脚本的工具。在需要输入列名、数据类型等的地方创建工作表，然后单击按钮将生成脚本。此表称为“脚本生成器”。现在我需要一个包含表名和按钮的“索引”表。当我单击按钮时，我需要为每个表名打开“脚本生成器”表，这些表应重命名为表名。

索引表代码如下所示：

```
Sub Add_sheets()
On Error Resume Next
Dim count As Integer
Dim r As Range
Dim sh As Worksheet

For Each r In Range("A3:A103")
If Not r = "" Then
  count = 0
For Each sh In ActiveWorkbook.Sheets
 If sh.Name = r.Value Then
   count = count + 1
 End If
Next sh
If count = 0 Then
With ActiveWorkbook.Sheets
.Add(after:=Worksheets(Worksheets.count), Type:="C:\Macro\Script_Template.xltm").Name =  r.Value
End With

ActiveSheet.Hyperlinks.Add Anchor:=r, Address:="", _
SubAddress:=Sheets(r.Value).Name & "!A1"
End If
End If
Next r
End Sub 
```

现在，问题是我在外部添加了保存为“Script_Template.xltm”的脚本生成器。我只需要一个 Excel 就可以完成这一切。意味着，索引文件应该在内部打开/添加格式“脚本生成器”的新工作表，以便它形成一个完整的工具。也许通过隐藏此工作表并通过宏调用其实例并重命名这些工作表。如何通过VBA做到这一点？有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T08:22:13.303

使用 True 和 False 设置工作表的 Visible 属性不是好的做法。您应该使用已经提供的常量 - xlSheetHidden、xlSheetVeryHidden 和 xlSheetVisible。

xlSheetVisible 将使您的工作表可见，而 xlSheetHidden 将隐藏您的工作表。将其设置为 xlSheetVeryHidden 将确保使工作表可见的唯一方法是通过 VBA 而不是通过 Excel 菜单栏格式 -> 工作表 -> 取消隐藏。

用法：

```
Sheets("Script_Template").Visible = xlSheetVisible 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T06:57:22.063

您可以创建一个“Script_Template”表并将其隐藏，然后使用此代码创建一个副本

```
Sheets("Script_Template").Visible = True
Sheets("Script_Template").Copy After:=Sheets(ThisWorkbook.Sheets.count)
ActiveSheet.Name = r.Value
Sheets("Script_Template").Visible = False 
```

# mysql - 合并2个mysql表数据库

> ID：11200776
> 
> 赞同：4
> 
> 时间：2012-06-26T04:25:42.070
> 
> 标签：mysql, select, merge

我需要从`table1`where中选择所有`active=1`并替换为in`t1cid,t2cid,L1cid,L2cid---L10cid`的相应名称。`cid``table2`

我有两张桌子，

**表 1 列名**

```
id
name
t1cid
t2cid
L1cid
L2cid
L3cid
L4cid
L5cid
L6cid
L7cid
L8cid
L9cid
L10cid
active 
```

**表2**

```
cid       
ctype    
cname 
```

我需要合并这两个表并产生如下输出，

**决赛桌**

```
id  
name 
t1cname  
t2cname 
L1cname  
L2cname  
L3cname  
L4cname 
L5cname 
L6cname
L7cname 
L8cname 
L9cname 
L10cname 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T04:50:30.187

您可以[加入](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html) `Table2`多次`Table1`，每列一次：

```
SELECT Table1.id,
       Table1.name,
       Table2_t1.cname  AS t1cname,
       Table2_t1.cname  AS t2cname,
       Table2_L1.cname  AS L1cname,
       Table2_L2.cname  AS L2cname,
       Table2_L3.cname  AS L3cname,
       Table2_L4.cname  AS L4cname,
       Table2_L5.cname  AS L5cname,
       Table2_L6.cname  AS L6cname,
       Table2_L7.cname  AS L7cname,
       Table2_L8.cname  AS L8cname,
       Table2_L9.cname  AS L9cname,
       Table2_L10.cname AS L10cname
FROM   Table1
  JOIN Table2 AS Table2_t1  ON Table2_t1.cid  = Table1.t1cid
  JOIN Table2 AS Table2_t2  ON Table2_t2.cid  = Table1.t2cid
  JOIN Table2 AS Table2_L1  ON Table2_L1.cid  = Table1.L1cid
  JOIN Table2 AS Table2_L2  ON Table2_L2.cid  = Table1.L2cid
  JOIN Table2 AS Table2_L3  ON Table2_L3.cid  = Table1.L3cid
  JOIN Table2 AS Table2_L4  ON Table2_L4.cid  = Table1.L4cid
  JOIN Table2 AS Table2_L5  ON Table2_L5.cid  = Table1.L5cid
  JOIN Table2 AS Table2_L6  ON Table2_L6.cid  = Table1.L6cid
  JOIN Table2 AS Table2_L7  ON Table2_L7.cid  = Table1.L7cid
  JOIN Table2 AS Table2_L8  ON Table2_L8.cid  = Table1.L8cid
  JOIN Table2 AS Table2_L9  ON Table2_L9.cid  = Table1.L9cid
  JOIN Table2 AS Table2_L10 ON Table2_L10.cid = Table1.L10cid
WHERE  Table1.active = 1 
```

或者，您也可以加入表格一次，然后对结果进行分组：

```
SELECT   Table1.id,
         Table1.name,
         MAX(IF(Table1.t1cid =Table2.cid, Table2.cname, NULL)) AS t1cname,
         MAX(IF(Table1.t2cid =Table2.cid, Table2.cname, NULL)) AS t2cname,
         MAX(IF(Table1.L1cid =Table2.cid, Table2.cname, NULL)) AS L1cname,
         MAX(IF(Table1.L2cid =Table2.cid, Table2.cname, NULL)) AS L2cname,
         MAX(IF(Table1.L3cid =Table2.cid, Table2.cname, NULL)) AS L3cname,
         MAX(IF(Table1.L4cid =Table2.cid, Table2.cname, NULL)) AS L4cname,
         MAX(IF(Table1.L5cid =Table2.cid, Table2.cname, NULL)) AS L5cname,
         MAX(IF(Table1.L6cid =Table2.cid, Table2.cname, NULL)) AS L6cname,
         MAX(IF(Table1.L7cid =Table2.cid, Table2.cname, NULL)) AS L7cname,
         MAX(IF(Table1.L8cid =Table2.cid, Table2.cname, NULL)) AS L8cname,
         MAX(IF(Table1.L9cid =Table2.cid, Table2.cname, NULL)) AS L9cname,
         MAX(IF(Table1.L10cid=Table2.cid, Table2.cname, NULL)) AS L10cname
FROM     Table1 JOIN Table2 ON Table2.cid IN (
           Table1.t1cid,
           Table1.t2cid,
           Table1.L1cid,
           Table1.L2cid,
           Table1.L3cid,
           Table1.L4cid,
           Table1.L5cid,
           Table1.L6cid,
           Table1.L7cid,
           Table1.L8cid,
           Table1.L9cid,
           Table1.L10cid
         )
WHERE    Table1.active = 1
GROUP BY Table1.id 
```

我认为第一个解决方案应该更快，特别是如果你有索引`Table2.cid`和外键列`Table1`- 但也许值得对这两种方法进行基准测试，看看哪个更好？

# java - 找不到类型的验证器：java.lang.Object

> ID：11200778
> 
> 赞同：3
> 
> 时间：2012-06-26T04:25:52.583
> 
> 标签：java, validation, generics

我`javax.validation`在我的项目中使用 API，并且在一些开发人员机器和测试服务器上遇到了名义上的问题。在其他开发人员机器上，尽管我们使用由 maven 处理的相同 Glassfish 版本、IDE 和库堆栈，但无法重现此错误。

在调试这个问题时，我们怀疑可能是问题的原因（我们无法在编译的类中调试，因此“怀疑”） - 我们有一个用于持久实体的接口：

```
public interface PersistableEntity<T> {

    public T getId();

    public void setId(T id);
} 
```

实现类按“id”字段类型划分：`String`或`BigDecimal`。`@Pattern`约束附加到实现中的`id`字段的getter `PersistableEntity<String>`。

如果这是原因，是否可以同时使用`javax.validation`和使用泛型来维护验证？

**更新** 我们决定从 JSR303 转移到自定义可配置验证机制。如果有名义问题的人找到了解决方案，请让我知道它是哪一个，我会将其标记为答案（欢迎有经验的 SO 用户对此困境的任何其他解决方案）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:56:07.497

我通常使用[`Persistable`](http://static.springsource.org/spring-data/commons/docs/current/api/org/springframework/data/domain/Persistable.html)Spring Data的接口，但想法似乎和你自定义的一样。

假设我的`user`表有两个字段：`user_id`（PK）和`email`（NN）。JAVA`User`实体将有一个`getUserId()`getter 和`getEmail()`一个。

实现`Persistable`接口时，`getId()`必须重写 getter，而表`user`不包含`id`字段。[`@Transient`](http://docs.oracle.com/javaee/6/api/javax/persistence/Transient.html)您可以使用注解明确告诉 JAVA 对应的表不包含这样的字段：

```
@Entity
@Table(name = "user")
public class User implements Persistable<Integer> {

    // Persistable implementation

    @Override
    @Transient // <-- means "not a database field"
    public Integer getId() {
        return getUserId();
    }

    // user_id

    @Column(name = "user_id", precision = 10)
    @GeneratedValue
    @Id
    public Integer getUserId() {
        return userId;
    }

    // email

    @NotNull
    @Column(name = "email", nullable = false, unique = true)
    public String getEmail() {
        return email;
    }

} 
```

也许这可以解决你的问题。

# java - 更改油漆颜色会更改所有圆圈颜色

> ID：11200779
> 
> 赞同：0
> 
> 时间：2012-06-26T04:25:57.967
> 
> 标签：java, android, graphics, colors, paint

所以我试图制作一个在 touchevent 发生时绘制圆圈流的 android 应用程序。如果我在屏幕左侧绘制它应该绘制一个绿色圆圈，如果它在右侧，它应该绘制一个蓝色圆圈。该应用程序正在执行此操作，但它会更改已绘制的所有圆圈的颜色。所以我制作了一个 Draw circle Class 和一个对象数组列表，将每个 cricle 视为一个单独的对象，即使在 Touchup 事件之后仍然无法工作。它的代码如下

```
 private class Drawcirlce  {

        public Drawcirlce(Canvas c) {
        // TODO Auto-generated constructor stub

        for (Point point : points) {

             if(flag==true)
                    c.drawCircle(point.x, point.y, 5, paint);
                    else
                    c.drawCircle(point.x, point.y, 5, p2);
        }
    invalidate();
    }
    /*for (Point point : points) {
     if(flag==true)
        mcan.drawCircle(point.x, point.y, 5, paint);
        else
        mcan.drawCircle(point.x, point.y, 5, p2);
}*/

}

public void onDraw(Canvas canvas) {

    i++;
     //Drawcirlce d=new Drawcirlce();
dc.add(new Drawcirlce(canvas));

Log.d(TAG, "i: " + i);invalidate();
}
public boolean onTouch(View view, MotionEvent event) {
    // if(event.getAction() != MotionEvent.ACTION_DOWN)
    // return super.onTouchEvent(event);
    Point point = new Point();
    point.x = event.getX();
    point.y = event.getY();
    if(point.x>200){
        paint.setColor(Color.BLUE);
    flag=true;
    }
    else{
        p2.setColor(Color.GREEN);
    flag=false;
    }

    points.add(point);
    //dc.add(new Drawcirlce(mcan));

    invalidate();
    Log.d(TAG, "point: " + point);
    return true;
}

public boolean onTouch(View view, MotionEvent event) {
    // if(event.getAction() != MotionEvent.ACTION_DOWN)
    // return super.onTouchEvent(event);
    Point point = new Point();
    point.x = event.getX();
    point.y = event.getY();
    if(point.x>200){
        paint.setColor(Color.BLUE);
    flag=true;
    }
    else{
        p2.setColor(Color.GREEN);
    flag=false;
    }

    points.add(point);
    //dc.add(new Drawcirlce(mcan));

    invalidate();
    Log.d(TAG, "point: " + point);
    return true;
} 
```

任何人都知道我做错了，或者是否有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T04:43:38.893

你的`Drawcirlce`类需要有一个`Paint`对象。（您可以将其公开给类，或将其提供`getPaint()`和`setPaint()`，无论哪种方式。）然后，当您调用 时，请使用类中的对象来`c.drawCircle(point.x, point.y, 5, paint);`调用它。`Paint`

像这样的东西：

```
private class Drawcirlce {
    public Paint myPaint;

    public void draw(Canvas c) { // Don't use a constructor here...
        if (myPaint == null)
            return;

        for (Point point : points) {
            c.drawCircle(point.x, point.y, 5, myPaint);
            invalidate();
        }
    }
} 
```

然后，在您的`onTouch`事件中，您执行以下操作：

```
Drawcirlce myCircle = new Drawcirlce();
if (flag == true)
    myCircle.myPaint = new Paint(paint); // Copies the current paint object.
else
    myCircle.myPaint = new Paint(p2); // Copies the current p2 object.
dc.add(); // Adds our circle with its own Paint object. 
```

最后，您必须更改您的`onDraw`活动。

```
for (Drawcirlce d : dc) { // Loop through everything in the dc array.
    d.draw(canvas); // Draw it to this canvas!
} 
```

这段代码实际上赋予了一个圆拥有自己`Paint`对象的能力。然后，当触摸时，你创造一个`Paint`给予它。最后，在绘图时，您使用它`Paint`而不是当前的。

# iphone - 只运行一次方法（在启动时）？

> ID：11200784
> 
> 赞同：0
> 
> 时间：2012-06-26T04:26:27.117
> 
> 标签：iphone, ios, cocoa, methods

我有一个模态视图控制器和一个嵌入在普通视图控制器中的导航视图控制器。现在，当有人在我的导航栏上单击 UIBarButtonItem 时，他们会转到模态视图控制器。我有一个自定义 UIAlertView，它是一个用于检索我的应用程序数据的加载栏。我把它放在 ViewWillAppear 方法中。问题是如果有人进入模态视图控制器并返回导航控制器，UIAlertView 会再次弹出。有什么方法可以使方法仅在启动时发生？任何帮助，将不胜感激。谢谢！

这里有更多信息：我最初在 ViewDidLoad（而不是 ViewDidAppear）中拥有它，并且同样的事情不断出现。我有一种感觉，我可能在实现模态视图控制器时做错了。我有自己的自定义导航栏，所以我隐藏了正常的导航栏，并以编程方式调用 performSeguewithIdentifier。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T04:33:26.870

`ViewDidLoad`使用此方法代替`viewWillAppear`.

`ViewDidLoad`加载时调用一次，而`viewWillAppear`每次进入该视图时调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T06:04:35.843

ViewDidLoad 将在每次视图加载时触发，每个会话可能不止一次（即释放视图的内存泄漏）。我要做的是创建一个布尔实例变量，并在您的 init 方法中将其设置为 true。然后在显示警报视图（来自 viewWillAppear 或 viewDidLoad）之前检查该布尔变量是否为真。

例如：

```
@interface YourViewController : UIViewController {
   BOOL showAlert;
}
@end

@implementation YourViewController
- (id) init {
   // initiate everything else and add this line
   showAlert = true;
   return self;
}

- (void) viewDidLoad {
   if(showAlert) {
      //UIAlertView... blah blah blah, show your view
      showAlert = false;
   }
}
@end 
```

这可确保您的警报在每个会话中仅显示一次。除非出于某种原因，您的 ViewController 应该被释放。在这种情况下，您应该将此 BOOL 存储在 AppDelegate.h 类中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-02T20:17:17.390

我经常遇到类似的问题，所以我在我大量使用的包装器 arround Async 中添加了一个函数包装器，称为[Alinex-Async](http://alinex.github.io/node-async/README.md.html#function%20wrapper)。

有了这个，我可以轻松地将任何函数定义为一个可以经常调用但只会运行一次的函数，并且所有进一步的调用都会返回相同的结果。如果在第一次运行时多次调用它，它也会正确响应。

在 CoffeeScript 伪代码中，它的用法如下：

```
async = require 'alinex-async'
fn = async.once (cb) ->
  result = do something
  cb null, result 
```

在第二次调用时出错或多次返回但同时只返回一次的替代实现也是可用的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T15:31:03.900

如果您使用 GCD，您可以尝试“dispatch_once”。

```
static dispatch_once_t onceToken;
dispatch_once(&onceToken, ^{
    <#code to be executed once#>
}); 
```

[https://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html](https://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)

# asp.net-mvc-3 - 如何使用 LINQ 在 MVC3 中查找两个不同日期之间的值？

> ID：11200789
> 
> 赞同：-2
> 
> 时间：2012-06-26T04:27:14.160
> 
> 标签：asp.net-mvc-3

在控制器中，我需要获取在 2 个文本框中选择的 Datetime 的值，并针对我的数据库处理这些值并将结果传递给视图。

请指导我如何做到这一点..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T04:32:18.870

你的意思是这样的？

**CSHTML**

```
<select name="select1" id="select1">
...
</select>

<select name="select2" id="select2">
...
</select> 
```

**MVC**

```
public ActionResult Index(string select1, string select2)
{
    DateTime date1;
    DateTime date2;

    bool isDate1 = DateTime.TryParse(select1, out date1);
    bool isDate2 = DateTime.TryParse(select2, out date2);

    ... do some checking to see if both are valid dates

    var timeSpanBetweenDates = date1.Subtract(date2);

    ... call your DB
} 
```

# php - 将标题标签与数据库连接并使其自动刷新，就像在 facebook 标题中一样

> ID：11200792
> 
> 赞同：0
> 
> 时间：2012-06-26T04:28:24.880
> 
> 标签：php, javascript, ajax

我的网站有关于标题标签的问题`<title></title>`。我想将它连接到数据库，以便我的网页标题的值来自数据库，它有效。但是当我想让我的网页标题（不是整个页面）自动刷新时发生了另一个问题。我从 ajax 找到了脚本，但它并没有像在 facebook 标题标签中那样真正成功，假设我从另一个浏览器（即 Opera 等）输入新数据，然后回到我的主浏览器（Firefox）标题标签根本不改变或不自动刷新和改变值。我真的需要你们的帮助......！？这是我试过的脚本..

```
setInterval(function() {
$.ajax({
  url: '{BASE_URL}/system/back-end/main.php',
  url: 'main.html',
  //data: {name: 'username', password: 'userpass'},
  success: function() { document.title = '$value';},
  dataType: 'text'
});
}, 1000);

function getXHR() { 
  if (window.XMLHttpRequest) {
    // Chrome, Firefox, IE7+, Opera, Safari
    return new XMLHttpRequest(); 
  } 
  // IE6
  try { 
    // The latest stable version. It has the best security, performance, 
    // reliability, and W3C conformance. Ships with Vista, and available 
    // with other OS's via downloads and updates. 
    return new ActiveXObject('MSXML2.XMLHTTP.6.0');
  } catch (e) { 
    try { 
      // The fallback.
      return new ActiveXObject('MSXML2.XMLHTTP.3.0');
    } catch (e) { 
      alert('This browser is not AJAX enabled.'); 
      return null;
    } 
  } 
}
function setPageTitle(newValue) {
  document.title = '$value';
}

function messageCountAsPageTitle(msgCount) {
  // TODO: determine where 'another text in the page title' should be defined
  msgCount = '{PESAN_ENTRY} {BERKAS} {BERKAS}';
  setPageTitle('(' + msgCount + ') - another text in the page title');
}
<!--</tpl:tmpl>

function getMessageCount(callback) {
  var url = 'main.html?' + 'main.php?' + (new Date()).getTime(), // prevent caching
    xhr = getXHR();
  xhr.onreadystatechange = function() {
    if (xhr.readyState == 4 && xhr.status == 200) {
      callback(xhr.responseText);
    }
  };
  xhr.timeout = 2000; // Set the timeout to be less than the frequency we call this
  xhr.open("GET", url, true);
  xhr.send();
}
setInterval(function() {getMessageCount(messageCountAsPageTitle);}, 3000); 
```

请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:03:07.717

如果您使用的是 jQuery（顶部 $.ajax() 调用），那么您应该只使用它，而不是底部。确保在 HTML 的源代码中包含 jQuery（google jQuery on how to do that）

您需要创建一个返回新标题的 php 文件。

```
// script.php
echo 'My New Title';
exit(); 
```

然后在您的源代码中使用 jQuery 访问新标题：

```
setInterval(function() { 
  $.ajax({ 
     url: 'http://UrlToGetTheTitleFrom/script.php', 
     success: function(data) { document.title = data; }, 
     dataType: 'text' 
  }); 
}, 10000); 
```

（注意：SetInterval 中的每秒钟 1000 - 它是毫秒。很确定你不希望它这么快地锤击你的服务器！）

# android - Android中的身份验证机制？

> ID：11200793
> 
> 赞同：1
> 
> 时间：2012-06-26T04:28:36.843
> 
> 标签：android, authentication

我基本上不是安卓开发者。我是一名 dot net 开发人员，如果有人向我提供一些关于

> 如何使用 Android 应用程序验证和管理用户凭据。

考虑如下。

*   我在 SQL 数据库中有用户凭据。
*   如何对用户进行身份验证
*   如何管理记住密码以供以后使用。

有人可以给出一些指导吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T04:54:42.643

**我在 SQL 数据库中有用户凭据。如何对用户进行身份验证**

为了提供登录功能，大多数用户名和密码以 Base64 字符串形式发送以确保安全。我不知道它们是如何在服务器端完成的，但我们通常这样做来验证用户凭据和 Web 服务返回响应，如该用户的 id。[试试这个链接](http://webdesignergeeks.com/mobile/android/android-login-authentication-with-remote-db/)

**如何管理记住密码以供以后使用。**

这就是[SharedPreferences所需要的](http://developer.android.com/guide/topics/data/data-storage.html#pref)

检查这个问题：

[如何在android Activity的登录中实现Remember me功能？](https://stackoverflow.com/questions/2154438/how-to-implement-remember-me-function-in-login-of-android-activity)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T04:36:04.877

为安全而设计。[看看这里](http://developer.android.com/guide/practices/security.html#UserData)

# android - 为什么我无法启动我的 IntentService？

> ID：11200801
> 
> 赞同：1
> 
> 时间：2012-06-26T04:30:27.357
> 
> 标签：android, android-intent, intentservice

我有两个相对简单的代码。一项主要活动和一项意向服务。

主要活动

```
public class IntentServiceTest1Activity extends Activity {
/** Called when the activity is first created. */

public class ResponseReceiver extends BroadcastReceiver {

public static final String ACTION_RESP =      
"com.mamlambo.intent.action.MESSAGE_PROCESSED";
@Override
public void onReceive(Context context, Intent intent) {
// TODO Auto-generated method stub
TextView result = (TextView) findViewById(R.id.txt_result);       
String text = intent.getStringExtra(SimpleIntentService.PARAM_OUT_MSG);       
result.setText(text);
}
}
private ResponseReceiver receiver;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

IntentFilter filter = new IntentFilter(ResponseReceiver.ACTION_RESP);
filter.addCategory(Intent.CATEGORY_DEFAULT);
receiver = new ResponseReceiver();
registerReceiver(receiver, filter);

Button button = (Button) findViewById(R.id.button);
button.setOnClickListener(new OnClickListener(){
public void onClick(View v){
EditText input = (EditText) findViewById(R.id.txt_input);
String strInputMsg = input.getText().toString();
Intent msgIntent = new Intent(IntentServiceTest1Activity.this, SimpleIntentService.class);
msgIntent.putExtra(SimpleIntentService.PARAM_IN_MSG, strInputMsg);
startService(msgIntent);
}
});
}
} 
```

意向服务

```
public class SimpleIntentService extends IntentService {

public static final String PARAM_IN_MSG = "imsg";    
public static final String PARAM_OUT_MSG = "omsg";     
public SimpleIntentService() {        
super("SimpleIntentService");    
}
@Override
protected void onHandleIntent(Intent intent) {
// TODO Auto-generated method stub
String msg = intent.getStringExtra(PARAM_IN_MSG);        
SystemClock.sleep(30000); // 30 seconds        
String resultTxt = msg + " "            
+ DateFormat.format("MM/dd/yy h:mmaa", System.currentTimeMillis());

Intent broadcastIntent = new Intent();
broadcastIntent.setAction(ResponseReceiver.ACTION_RESP);
broadcastIntent.addCategory(Intent.CATEGORY_DEFAULT);
broadcastIntent.putExtra(PARAM_OUT_MSG, resultTxt);
sendBroadcast(broadcastIntent);
}
} 
```

Logcat 说

```
 06-26 04:16:00.545: W/ActivityManager(67): Unable to start service Intent { 
cmp=com.intentservicetest1/.SimpleIntentService (has extras) }: not found 
```

我能做些什么来纠正这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-26T04:33:30.970

确保您`IntentService`在 AndroidManifest.xml 中注册为：

```
<service android:name=".SimpleIntentService" /> 
```

# backbone.js - Backbone.js 中的集合与模型混淆

> ID：11200802
> 
> 赞同：10
> 
> 时间：2012-06-26T04:30:50.587
> 
> 标签：backbone.js

我刚开始学习backbone.js。我无法理解如何/何时使用模型和集合。我在网上找到了几个教程，每个教程都使用不同的方法来构建应用程序。在某些情况下，数据是从 Collection 对象中的 REST API 检索的，在其他示例中是在 Model 对象中？我还注意到，在每个示例中，json 数据的格式都类似于 `{'id':1, 'name':'some name'}`. 我的 api 返回一个更复杂的数据结构——比如`{'message':'response message', 'error':'', 'data': [{list of data objects to be manipulated},{}]}`. 是否可以在backbone.js 中使用这种格式化的数据。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-26T04:36:53.300

嗯，是的，对于你的两个问题。通常这里是关系数据库系统与backbone.js的关系：

*   您的**模型**是数据库表中的记录。
*   你的**收藏**就是桌子本身。因此，一组模型构成了集合。
*   **视图**用于定义**模型的外观**和**功能**。您的模型、集合和中间数据都有视图。

您的回复（如果不同）；因此，您需要在将数据设置为模型、集合之前解析数据。使用[parse](http://documentcloud.github.com/backbone/#Model-parse)方法并定义数据键。

# shell - awk 解析错误

> ID：11200804
> 
> 赞同：0
> 
> 时间：2012-06-26T04:31:02.567
> 
> 标签：shell, awk

> **可能重复：**
> [awk 块中的解析错误](https://stackoverflow.com/questions/11201565/parsing-errors-in-awk-blocks)

执行 awk 脚本时出现解析错误。我不确定这一点。这是脚本

```
`awk 'BEGIN 
{ 
INPUTFILE ='XXX'; iterator =0;
requestIterator =0;
storageFlag =T;
printFlag =F;
currentIteration =F;
recordCount =1;
   while (getline < "'"$INPUTFILE"'") 
   { 
         requestArray[requestIterator]++; 
         requestIterator++;
   }
 } 
 if ($1 ~ /RequestId/) 
 {  
        FS = "="; 
        if($2 in requestArray) 
        {
              storage[iterator] =$0;
              printFlag =T;
              next
        }
        else 
        {
              storageFlag =F;
              next
        }
  }
  else 
  {
       if((storageFlag =='T' && $0 != "EOE"))   
       {
            storage[iterator]=$0; iterator++;
       } 
       else {if(storageFlag == 'F')
       {
            next
       } 
       else
       {
           if(printFlag == 'T')
           {
                for(details in storage) 
           {
                print storage[details] >> FILE1;
                delete storage[details];
           } 
           printFlag =F;
           storageFlag =T;
           next
       }
 } 
```

} }'文件2`

**错误** zsh: `}' 附近的解析错误

你能告诉我这个脚本有什么问题吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T04:35:57.397

您的括号不匹配（13 x`{`与 12 x `}`），因此您错过了`}`脚本末尾的最终关闭。

IE，

```
next}}}}' FILE2 
```

应该

```
next}}}}}' FILE2 
```

# c++ - 对内联函数有不同的定义是一种未定义的行为吗？

> ID：11200805
> 
> 赞同：9
> 
> 时间：2012-06-26T04:31:08.900
> 
> 标签：c++, inline, undefined-behavior, function-prototypes

最小代码：

```
// --------inline.h--------
struct X { 
  static inline void foo ();
};   
#ifdef YES
inline void X::foo () { cout << "YES\n"; }
#else
inline void X::foo () { cout << "NO\n"; }
#endif

// --------file1.cpp--------
#define YES    // <---- 
#include"inline.h"
void fun1 ()
{
  X::foo();
}

// --------file2.cpp--------
#include"inline.h"
void fun2 ()
{
  X::foo();
} 
```

如果我们调用`fun1()`and `fun2()`，那么它们将分别打印`YES`and `NO`，这意味着它们引用了相同的不同函数体`X::foo()`。

不管这是否应该编码，我的问题是：
这是一个定义明确的行为还是未定义的行为？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-26T04:46:11.750

是的，它是未定义的行为。

**参考：**

C++03 标准：

**7.1.2 函数说明符 [dcl.fct.spec]**
**第 4 段：**

> **内联函数应在使用它的每个翻译单元中定义，并且在每种情况下都应具有完全相同的定义 (3.2)**。[注意：在其定义出现在翻译单元之前，可能会遇到对内联函数的调用。] 如果具有外部链接的函数在一个翻译单元中声明为内联，则应在其出现的所有翻译单元中声明为内联；不需要诊断。具有外部链接的内联函数在所有翻译单元中应具有相同的地址。外部内联函数中的静态局部变量始终引用同一个对象。外部内联函数中的字符串文字是不同翻译单元中的相同对象。

注：3.2 指的是单一定义规则，其中规定：

**3.2 一个定义规则 [basic.def.odr]**
**第 1 段：**

> 任何翻译单元不得包含一个以上的任何变量、函数、类类型、枚举类型或模板的定义。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-26T04:38:58.760

不明确的。您违反了 ODR。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-26T05:05:12.327

> 如果我们调用 fun1() 和 fun2()，那么它们将分别打印 YES 和 NO，这意味着它们指的是同一个 X::foo() 的不同函数体。

你试过了吗？具有不同的优化级别？

我得到 YES 和 NO、YES 和 YES，或 NO 和 NO，具体取决于优化级别和编译对象呈现给链接器的顺序。

不用说，这是未定义的行为。

# php - 在 php 中按文件名对文件进行排序

> ID：11200806
> 
> 赞同：0
> 
> 时间：2012-06-26T04:31:24.940
> 
> 标签：php, filesort, file-listing

如何使用 PHP 按文件名对目录中的文件进行排序？我在一个目录中有很多文件，我必须在页面中按名称排序它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T04:33:29.923

存储`filenames`到数组中并对其[进行排序](http://php.net/manual/en/function.sort.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T04:51:31.850

将文件存储在数组中并按文件名排序或使用 scandir() [http://uk3.php.net/manual/en/function.scandir.php](http://uk3.php.net/manual/en/function.scandir.php)

# ruby - 使用heroku OSX终端命令时使用ruby中止陷阱分段错误

> ID：11200807
> 
> 赞同：2
> 
> 时间：2012-06-26T04:31:38.107
> 
> 标签：ruby, ssl, heroku, segmentation-fault

注意：我什至没有使用 ruby​​（使用 django），但是 ruby​​ 在我的计算机路径中，所以它似乎会出现错误。

当我运行任何 heroku 命令（heroku 状态、heroku 登录）时，我收到以下错误：

```
/usr/local/heroku/vendor/gems/excon-0.14.0/lib/excon/ssl_socket.rb:74: [BUG] Segmentation fault
ruby 1.8.7 (2009-06-12 patchlevel 174) [universal-darwin10.0]

Abort trap 
```

即使 ruby​​ -v 返回：

```
ruby 1.9.2p290 (2011-07-09 revision 32553) [x86_64-darwin10.8.0] 
```

我确实 rvm 删除了 ruby​​-1.8.7。

有人知道修复吗？已经四处寻找无济于事。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T20:42:01.700

Apple 不赞成在 OSX Lion 中使用 OpenSSL。

您必须指定在哪里可以找到 openssl 的新位置。

如果您使用的是 Macports：

```
port install openssl
rvm reinstall 1.9.3 -C --with-openssl-dir=/opt/local
rvm use 1.9.3 
```

如果您使用的是自制软件：

```
brew install openssl
rvm reinstall 1.9.3 -C --with-openssl-dir=/usr/local
rvm use 1.9.3 
```

另一种选择是将 OpenSSL 构建为 RVM 中的一个包：

```
rvm pkg install openssl
rvm reinstall 1.9.3 -C --with-openssl-dir=~/.rvm/usr
rvm use 1.9.3 
```

这应该适用于任何 Ruby 版本，只需替换版本号。

# sql - SQL LIMIT，但从头到尾

> ID：11200808
> 
> 赞同：5
> 
> 时间：2012-06-26T04:31:41.513
> 
> 标签：sql, postgresql

你`LIMIT`能从结果的末尾而不是从头开始查询吗？特别是，我正在寻找一个带有 Postgresql 的解决方案，如果这有所作为的话。

请允许我用一个例子来澄清一下。

假设我想返回`people`表中年龄最大的 3 个人，但按年龄升序排列。我知道如何选择 3 个人的最佳方式返回正确的记录，但顺序相反：

```
SELECT * FROM people
ORDER BY age DESC
LIMIT 2 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T04:34:45.127

应该是这样——

```
SELECT * FROM (
SELECT *
FROM PEOPLE
ORDER BY AGE DESC
LIMIT 3 ) X
ORDER BY AGE ASC 
```

# xslt - 按数据类型下拉列表顺序排序列表

> ID：11200811
> 
> 赞同：0
> 
> 时间：2012-06-26T04:32:07.583
> 
> 标签：xslt, drop-down-menu, umbraco

如何以与我的数据类型下拉列表相同的顺序对 XSLT 中的列表进行排序？

我尝试了以下方法但没有成功：

```
<xsl:variable name="tarrifs" select="umbraco.library:GetPreValues(1601)//preValue" />
<xsl:sort select="tarrifs" order="descending" /> 
```

我的数据类型“关税类别”中有一个选项列表，我想在我的 XSLT 中以与我的数据类型相同的顺序对列表进行排序。

我的数据类型的顺序：

*   UE资费标准

*   UE定价建议

*   UE资费表

*   UE其他费用

*   UE资费策略报告

*   MG关税表

*   MG关税报告

*   MG辅助及其他费用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:43:24.970

首先，`<xsl:sort...`必须出现在 a`<xsl:apply-templates...`或`<xsl:for-each...`标签内。

要按照您的需要使用主观逻辑进行排序，您可以采用几种方法。最简单的大概是这样的：

**XML**

```
<root>
    <item>dog</item>
    <item>cat</item>
    <item>horse</item>
    <item>dragonfly</item>
</root> 
```

**XSL**

```
<!-- this sheet vars -->
<xsl:variable name='sort_order' select='"dragonfly|horse|dog|cat"' />

<!-- root and static content -->
<xsl:template match="/">
    <xsl:apply-templates select='root/item'>
        <xsl:sort select='string-length(substring-before($sort_order, current()/text()))' data-type='number' />
    </xsl:apply-templates>
</xsl:template>

<!-- iteration content - animal -->
<xsl:template match='item'>
    <p><xsl:value-of select='.' /></p>
</xsl:template> 
```

您可以在[此 XMLPlayground 会话](http://www.xmlplayground.com/xtX0PB)中对其进行测试。

正如您可能看到的那样，这个概念是将所需的排序顺序声明为一个字符串，然后根据每个节点的文本值在该排序字符串中的位置迭代地对我们的节点进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T08:46:29.890

您是否正在寻找这样的东西：-

假设你的 xml 是这样的： -

## XML:

```
<preValues>
    <preValue id="19">Value 1</preValue>
    <preValue id="20">Value 2</preValue>
    <preValue id="21">Value 3</preValue>
</preValues> 
```

## XSLT：

如果您想按顺序排序，`id`请`descending`这样做

```
<xsl:for-each select="umbraco.library:GetPreValues(1601)//preValue">
    <xsl:sort select="@id" order="descending" />
    <!-- Do Your Stuff --> 
</xsl:for-each> 
```

按照相同的方法按多个属性值排序。

# r - 在 knitr 中使用布局

> ID：11200818
> 
> 赞同：6
> 
> 时间：2012-06-26T04:33:01.613
> 
> 标签：r, markdown, knitr

我想在 R 中制作一个带有两个图的降价文件中的单个数字`knitr`。`layout(t(1:2))`通常，使用or很容易做到这一点`par(mfrow=c(1,2))`。我可以用 来做到这一点`knitr`，还是它总是会产生两个单独的数字？

这是一个最小的工作示例，它在您的工作目录中创建一个名为`./junk.Rmd`and的文件以及两个文件（仅包括第一个图）和（包括我想要的两个图）。`./junk.md``./figure/junkislands1.png``./figure/junkislands2.png`

```
require(knitr)
temp <- "```{r junkislands, fig.width=8, fig.height=5}
layout(t(1:2))
pie(islands)
barplot(islands)
```"
cat(temp, file="junk.Rmd")
knit("junk.Rmd", "junk.md") 
```

问题不在于它创建了两个 .png 文件，而在于 markdown 文件`junk.md`包含了这两个文件。

当我将该降价转换为 html 时，它包含两个 .png 文件，而我只想要一个同时绘制两个数字的文件。

这是从 knitr 生成的文件`junk.md`：

```
```r
par(mfrow = c(1, 2))
pie(islands)
```

![plot of chunk junkislands](figure/junkislands1.png) 

```r
barplot(islands)
```

![plot of chunk junkislands](figure/junkislands2.png) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-26T04:39:41.343

看看[http://yihui.name/knitr/options](http://yihui.name/knitr/options)，特别是`fig.keep`。我想你想要`fig.keep = 'last'`

```
require(knitr)
temp <- "```{r junkislands, fig.width=8, fig.height=5, fig.keep = 'last'}
layout(t(1:2))
pie(islands)
barplot(islands)
```"
cat(temp, file="junk.Rmd")
knit("junk.Rmd", "junk.md") 
```

给

```
```r
layout(t(1:2))
pie(islands)
barplot(islands)
```

![plot of chunk junkislands](figure/junkislands.png) 
```

# exchangewebservices - 无法使用 EWS java api 获取重复结束日期

> ID：11200822
> 
> 赞同：0
> 
> 时间：2012-06-26T04:33:34.197
> 
> 标签：exchangewebservices, recurrence

我想使用 EWS java api 获取重复结束日期。

EWS java api 支持方法称为 Recurrence.getEndDate()。

但它不适用于我的项目。

复习班有 4 次获得`method(getStartDate, getEndDate, getNumberOfOccurences, getClass)`。

我可以获得开始日期和课程，但其他人无法获得。

请任何人帮助我。

以下代码在我的项目中重复出现。谢谢：）

```
PropertySet propSet = new PropertySet(TaskSchema.Recurrence);

Task task = Task.bind(service,new ItemId(task_id),propSet);

Recurrence rec = task.getRecurrence();

rec.getEndDate();

rec.getNumberOfOccurrences(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:56:13.937

我最近遇到了这个问题，发现这是因为 EWS Java API 中的一个错误。

## 修复

要修复该错误，您需要对 EWS Java API 1.2 中的两个地方的源代码进行更改（更改在注释中）：

`EndDateRecurrenceRange.java`（第 63 行）

```
protected void setupRecurrence(Recurrence recurrence) throws Exception {
    super.setupRecurrence(recurrence);
    this.endDate = recurrence.getEndDate(); // remove this line
    recurrence.setEndDate(this.endDate); // add this line
} 
```

`NumberedRecurrenceRange.java`（第 61 行）

```
protected void setupRecurrence(Recurrence recurrence) throws Exception {
    super.setupRecurrence(recurrence);
    this.numberOfOccurrences = recurrence.getNumberOfOccurrences(); // remove this line
    recurrence.setNumberOfOccurrences(this.numberOfOccurrences); // add this line
} 
```

## 说明

`RecurrencePropertyDefinition`是从 EWS XML 响应中解析重复出现的类。在解析 XML 响应时，`RecurrenceRange`类（例如上面列出的类）用于设置重复字段，指定重复结束的时间（例如结束日期、出现次数、无结束）。这是通过调用来完成的`setupRecurrence()`。

不幸的是，在上面提到的两个地方，开发人员错误地将`RecurrenceRange`字段设置为*空* `Recurrence`字段，而不是相反。因此，返回对象中的`endDate`and`numberOfOccurrences`字段`Recurrence`永远不会被设置，因此总是`null`。

# ruby-on-rails-3 - AJAX 使用 Rails 3.2 提交表单

> ID：11200824
> 
> 赞同：0
> 
> 时间：2012-06-26T04:34:05.350
> 
> 标签：ruby-on-rails-3, jquery, shopify

这是我的表单，它工作正常，但现在我想 AJAX 它。

```
<%= form_tag variant_path(variant.id), :method => :put, :class => 'update_inv_form' do %>  
  <%= text_field_tag :inventory_quantity, variant.inventory_quantity %>
  <%= submit_tag 'Update'  %>
<% end %> 
```

当我添加 :remote => true 属性时，表单通过 AJAX 成功提交（我可以看到它在服务器上发生，刷新页面时我可以看到更改）。我想正确更新视图以显示更改而不刷新页面。这是我的更新操作：（请注意，我在这里没有使用 ActiveRecord 模型。）

```
def update
  variant = ShopifyAPI::Variant.find(params[:id])
  variant.inventory_quantity = params[:inventory_quantity]
  variant.save
  redirect_to root_path
end 
```

**更新** 感谢您帮助我解决这个问题的答案，结果证明解决方案与他所说的完全一样，但是我遇到了一个小问题。我想要更新的视图存在`app/views/home/index.html.erb` 并且我正在处理这个：Variants#update。（变体控制器，更新操作）

我将 update.js.html 放在与我的视图相同的目录中：`app/views/home`并且我的服务器抛出 500 错误：缺少模板。事实证明，我必须创建一个`app/views/variants/`目录并将 update.js.html 文件放在那里。问题解决了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T11:51:52.627

您需要更改您的操作以响应 JS 格式：

```
def update
  @variant = ShopifyAPI::Variant.find(params[:id])
  @variant.inventory_quantity = params[:inventory_quantity]
  @variant.save

  respond_to do |format|
    format.html { redirect_to root_path }
    format.js
  end
end 
```

然后，您可以`update.js.erb`使用 JavaScript 创建一个文件来更新页面。假设您有一个`_variant.html.erb`部分，您可以将变体附加到这样的 div 中（假设您使用的是 jQuery）：

```
$('.variant-list').append('<%= escape_javascript(render(:partial => "variant", :object => @variant)) %>'); 
```

**更新**

下面是一个如何使用`update.js.erb' file (Note: I have not tried this code). Let's say you have the following code in your`index.html.erb` 的示例：

```
<ul class="variants">
    <li id="101">Variant 1</li>
    <li id="102">Variant 2</li>
    <li id="103">Variant 3</li>
</ul> 
```

你`updated.js.erb`可能看起来像这样：

```
$('.variants #<%= @variant.id %>').text('<%= @variant.title %>'); 
```

这样做是在列表中找到您刚刚更新的变体，并将变体标题更改为新的。

# sql - 如何将日期时间转换为字符串并在sql server中声明为参数？

> ID：11200833
> 
> 赞同：0
> 
> 时间：2012-06-26T04:35:54.330
> 
> 标签：sql, sql-server

我的表中有日期时间字段。我想转换成字符串并声明为参数。

例如，当 datetime 字段不为空时，“OPEN”和 datetime 字段为空，然后“CLOSED”，当我输入参数时，我想键入“OPEN”或“CLOSED”，然后结果将在表中显示文本。

怎么做？。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T05:25:41.837

这就是我理解你的问题的方式：你想要一个带有接受两个固定值的字符串参数的查询，要么是`'OPEN'`or `'CLOSED'`，并且你希望一个匹配表中某个`datetime`列的非 NULL 值，另一个匹配 NULL 值同一列。并且您还希望将该列的值显示为`'OPEN'`或`'CLOSED'`相应地显示。

如果这是正确的，您可以尝试以下方法：

```
DECLARE @QueryParam varchar(20);
SET @QueryParam = 'OPEN';

SELECT *
FROM (
  SELECT
    OpenOrClosed = CASE WHEN DateTimeColumn IS NULL THEN 'CLOSED' ELSE 'OPEN' END,
    *other columns as necessary*
  FROM yourtable
) s
WHERE OpenOrClosed = @QueryParam; 
```

您可能还需要考虑将子选择重写为视图：

```
CREATE VIEW YourTableView
AS
SELECT
  OpenOrClosed = CASE WHEN DateTimeColumn IS NULL THEN 'CLOSED' ELSE 'OPEN' END,
  *other columns as necessary*
FROM yourtable 
```

然后您只需从该视图中选择：

```
DECLARE @QueryParam varchar(20);
SET @QueryParam = 'OPEN';

SELECT *
FROM YourTableView
WHERE OpenOrClosed = @QueryParam; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T04:39:33.530

我不太了解您有关使用“参数”的问题，但希望这将为您提供所需的大部分内容。

```
SELECT CASE 
           WHEN [Date_Column] IS NULL THEN 'CLOSED'
           ELSE 'OPEN'
       END
FROM [Your_Table] 
```

# plone - Plone 4 数据库可以有多大？

> ID：11200837
> 
> 赞同：3
> 
> 时间：2012-06-26T04:36:39.223
> 
> 标签：plone, scalability

2004 年，Mahendra 发表了关于使用 Plone 和 DSpace 管理数字资产的演讲。

[http://linux-bangalore.org/2004/schedules/talkdetails.php?talkcode=C0300032](http://linux-bangalore.org/2004/schedules/talkdetails.php?talkcode=C0300032)

马亨德拉说：

> Zope 为处理数字内容提供了许多功能和出色的架构。但是，Zope 存在问题，因为存储的数据扩展到 Giga/Tera 字节的数量级。Zope + Plone 的组合非常适合作为门户管理系统，但如果尝试使用它来存储数字资产，性能可能会下降。

所以他建议使用 DSpace 来管理数字资产，而不是使用 Plone。但也许今天已经改变了。现在使用 Plone 作为数字资产管理器有什么限制？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T05:11:50.357

自从写了那篇文章以来，ZODB（Zope 的数据存储系统）已经增加了对在文件系统上存储为单独文件的 blob 的支持，这基本上意味着您受到正在使用的文件系统功能的限制。我知道有多个安装超过 20GB 的数据，这是文章中提到的数字。

现在，如果您想对资产进行分类以便轻松找到它们，那么您将根据目录算法和数据结构的复杂性达到其他限制。Plone 可以处理相当多的数据，但一旦超过 50,000 个左右的内容项，它往往需要大量 RAM 和仔细调整（可能还需要自定义）。

# git - 为什么 git 不能通过路径进行硬/软重置？

> ID：11200839
> 
> 赞同：165
> 
> 时间：2012-06-26T04:36:45.507
> 
> 标签：git, git-reset

`$ git reset -- <file_path>`可以通过路径重置。

但是，`$ git reset (--hard|--soft) <file_path>`会报如下错误：

```
Cannot do hard|soft reset with paths. 
```

* * *

## 回答 #1

> 赞同：169
> 
> 时间：2012-06-26T04:39:54.010

因为没有意义（其他命令已经提供了该功能），并且它减少了意外做错事的可能性。

刚刚完成了路径的“硬重置” `git checkout HEAD -- <path>`（检查文件的现有版本）。

路径的软重置没有意义。

路径的混合重置就是这样`git reset -- <path>`做的。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-12-22T21:30:26.170

您可以使用`git checkout HEAD <path>`.

也就是说，提供的错误消息对我来说毫无意义（因为`git reset`在子目录上工作得很好），我认为没有理由`git reset --hard`不完全按照你的要求去做。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-09-20T18:23:05.680

问题*如何*已经[回答](https://stackoverflow.com/questions/7147270/hard-reset-of-a-single-file)，我将解释*为什么*部分。

那么，[git reset](https://git-scm.com/docs/git-reset)有什么作用呢？根据指定的参数，它可以做两种不同的事情：

*   如果您指定路径，它会将索引中的匹配文件替换为来自提交的文件（默认为 HEAD）。此操作根本不会影响工作树，通常用作 git add 的反面。

*   如果您不指定路径，它会将当前分支头移动到指定的提交，*并与此一起*选择性地将索引和工作树重置为该提交的状态。此*附加*行为由 mode 参数控制：
    **--soft**：不要触及索引和工作树。
    **--mixed**（默认）：重置索引但不重置工作树。
    **--hard**：重置索引和工作树。
    还有其他选项，请参阅文档以获取完整列表和一些用例。

    当您不指定提交时，它默认为 HEAD，因此`git reset --soft`不会执行任何操作，因为它是将头部移动到 HEAD（到其当前状态）的命令。`git reset --hard`另一方面，由于它*的副作用*，它是有意义的，它说将头部移动到 HEAD*并将*索引和工作树重置为 HEAD。

    我认为现在应该清楚为什么此操作本质上不适用于特定文件 - 它旨在首先移动分支头，重置工作树和索引是次要功能。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-01-21T01:50:51.650

这背后有一个非常重要的原因：**and****的原理`checkout``reset`**。

在 Git 术语中，*checkout*的意思是“带入当前的工作树”。并且我们可以使用来自***任何***`git checkout`区域的数据填充工作树，无论是来自存储库中的提交还是来自提交或**暂存区域**（甚至是默认值）的单个文件。

 ***反过来， git *reset*没有这个角色。顾名思义，它将重置当前引用，但*始终*将**存储库**作为源，独立于“范围”（--soft、--mixed 或--hard）。

回顾：

*   ***结帐***：从任何地方（索引/回购提交）-> 工作树
*   ***重置***：回购提交 -> 覆盖 HEAD（以及可选的索引和工作树）

因此，可能有点令人困惑的是，`git reset COMMIT -- files`因为只用一些文件“覆盖 HEAD”是没有意义的！

在没有官方解释的情况下，我只能推测 git 开发人员发现这`reset`仍然是放弃对暂存区所做更改的命令的最佳名称，并且鉴于唯一的数据源是存储库，那么“*让我们扩展功能*”而不是创建新命令。

所以不知何故`git reset -- <files>`已经有点例外：它不会覆盖 HEAD。恕我直言，所有这些变化都是例外。即使我们可以构思一个`--hard`版本，其他版本（例如`--soft`）也没有意义。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-07-27T23:33:15.983

确保在源或上游（源）和实际分支之间放置一个斜线：

```
git reset --hard origin/branch 
```

或者

```
git reset --hard upstream/branch` 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-03-09T02:03:21.677

> 为什么 git 不能通过路径进行硬/软重置？

它可以。它只需要几个命令就是全部，而不仅仅是一个。方法如下：

## TLDR

如何`--soft`通过路径进行重置：

```
git reset commit_hash -- path/to/some/file_or_dir
git checkout-index -fa
git clean -fd 
```

如何`--hard`通过路径进行重置：

```
git reset commit_hash -- path/to/some/file_or_dir
git checkout-index -fa
git clean -fd
git commit -m "hard reset path/to/some/file_or_dir to its state \
as it was at commit_hash" 
```

## 完整答案：

在 git 版本 2.17.1 中测试（检查你的`git --version`）。

> 为什么 git 不能通过路径进行硬/软重置？

我不知道究竟是*为什么*，但我猜是因为`git`要么做出了你和我都不同意的开发决定，要么因为`git`根本不完整，仍然需要实现这一点。另请参阅下面“`--hard`按路径重置”部分下方提供的有关此内容的其他见解。单个路径上的真正`--hard`重置不能与`--hard`整个分支的重置相同。

但是，我们可以使用一些命令手动完成所需的行为。请注意`git checkout commit_hash -- path/to/some/file_or_dir`，由于下面解释的原因，单独不是其中之一。

*在继续之前，您应该了解做什么`git reset`、什么是**工作树**、**索引**`--soft`以及`--hard`通常做什么`git reset`。如果您对这些主题有任何疑问，请先阅读下面的“**背景知识**”部分。*

## 如何按路径执行`--soft`或git 重置`--hard`

又名：如何*手动*完成这些无效命令的等效项：

```
# hypothetical commands not allowed in git, since `git` does NOT 
# allow `--soft` or `--hard` resets on paths

git reset --soft commit_hash -- path/to/some/file_or_dir
git reset --hard commit_hash -- path/to/some/file_or_dir 
```

由于上述命令是不允许的，并且由于此`checkout`命令与上述假设命令的*作用不同*，因此此`checkout`命令也不会**删除**本地存在的不在以下位置的文件或文件夹`commit_hash`：

```
git checkout commit_hash -- path/to/some/file_or_dir 
```

...然后，您可以一起完成上面的假设命令与下面的这几个命令一起执行的操作。

### 1.`--soft`按路径重置

*描述：*使您的本地`path/to/some/file_or_dir`与. 最后将所有更改“暂存”（添加但未提交）。`file_or_dir``commit_hash``path/to/some/file_or_dir``commit_hash`

```
git reset commit_hash -- path/to/some/file_or_dir
git checkout-index -fa
git clean -fd 
```

`--soft`如果允许这样的命令，上述结果正是我对路径重置的期望。

有关`git checkout-index -fa`和`git clean -fd`部分的更多信息，请在此处查看我的其他答案：[使用 git，如何将工作树（本地文件系统状态）重置为索引状态（“暂存”文件）？](https://stackoverflow.com/questions/3107789/using-git-how-do-you-reset-the-working-tree-local-file-system-state-to-the-st/66589020#66589020).

请注意，*您应该`git status`在每个单独的命令之后运行 a 以查看每个命令在执行时执行的操作*。以下是各个命令的解释：

```
# Stage some changes in path/to/some/file_or_dir, by adding them to the index,
# to show how your local path/to/some/file_or_dir SHOULD look in order to
# match what it looks like at `commit_hash`, but do NOT actually _make_ 
# those changes in yourlocal file system. Rather, simply "untrack" files 
# which should be deleted, and do NOT stage for commit changes which should 
# NOT have been made in order to match what's in `commit_hash`.
git reset commit_hash -- path/to/some/file_or_dir
git status

# Now, delete and discard all your unstaged changes.

# First, copy your index (staged/added changes) to your working file 
# tree (local file system). See this answer for these details:
# https://stackoverflow.com/a/66589020/4561887
# and https://stackoverflow.com/a/12184274/4561887
git checkout-index -fa
git status

# 'f'orce clean, including 'd'irectories. This means to **delete** 
# untracked local files and folders. The `git reset` command above
# is what made these untracked. `git clean -fd` is what actually 
# removes them.
git clean -fd
git status 
```

### 2.`--hard`按路径重置

*描述：*执行上述`--soft`重置步骤，然后提交更改：

```
git reset commit_hash -- path/to/some/file_or_dir
git checkout-index -fa
git clean -fd
git commit -m "hard reset path/to/some/file_or_dir to its state \
as it was at commit_hash" 
```

现在，为了更好地衡量和作为最终检查，您可以运行`git reset commit_hash -- path/to/some/file_or_dir`，然后运行`git status`​​。你会看到`git status`没有任何变化，因为`--hard`上面的路径重置是成功的，所以这个调用`git reset commit_hash -- path/to/some/file_or_dir`什么也没做。优秀的; 有效！

这些结果与真正的重置并不完全相同*，*`--hard`因为真正的`--hard`重置不会添加新的提交`git commit`。相反，它只是强制您当前签出的分支指向另一个`commit_hash`. 但是，当仅像这样“硬重置”几个文件或路径时，您*不能*只将分支指针移动到指向 other `commit_hash`，因此除了添加如上所述，带有这些“未添加”或“重置”更改的新提交。

这种见解也可能是`git`本机不支持`--hard`按路径重置选项的原因；也许是因为`--hard`通过路径重置需要添加一个新的提交，这与`--hard`不添加新提交的正常行为略有不同，而只是“重置”到（将分支指针移动到）给定的提交。

但是，这本身并不能解释为什么`git`至少不允许`--soft`通过路径重置 git，因为这对我来说似乎更标准。

## 背景知识

### 1\. 基本`git`术语

在阅读这些`man git reset`页面时，您需要了解一些 git 术语：

1.  *工作树*= 本地文件系统；这是指您在终端或 GUI 文件管理器（如`nemo`、`nautilus`或`thunar`.
2.  `<tree-ish>`= 提交哈希或分支名称
3.  *index* = 你在运行时看到*的绿色*`git status`。这些都是`git add`ed（“暂存”）但尚未提交的所有更改。当您运行时，您通过将其更改移动到*index*`git add some_file`来“暂存” 。您现在可以说是“添加”、“暂存”或“在索引中”（都是一样的东西）。`some_file`*`some_file`*

 *### 2.`man git reset`页面

**当您阅读这些解决方案时，请注意以下`man git reset`状态（重点添加）：**

> **`git reset <paths>`是相反的`git add <paths>`。**

换句话说，`git reset commit_hash -- some_file_or_dir`可以“取消添加”，或添加相反的更改（从而撤消这些更改）`some_file_or_dir`，包含在 commit 或 branch`commit_hash`中，同时还设置`HEAD`为指向`commit_hash`，或者好像它指向`commit_hash`指定的文件或目录（同样，通过添加必要的更改以`some_file_or_dir`在*工作树*中进行看起来像`some_file_or_dir`.`commit_hash`

此外，在`git`术语中，*“工作树”*表示“您的本地文件系统”（因为您的计算机通常会在文件夹管理器中或在终端中导航时看到文件和文件夹），而*“索引”*或*“索引文件”*表示“位置文件在你的时候去哪里`git add`，或者‘暂存’它们。” 当你运行时`git status`，所有以绿色显示的文件都是“暂存”的，或者在“索引”或“索引文件”中（同样的事情）。（来源：[Git 中 HEAD、工作树和索引有什么区别？](https://stackoverflow.com/questions/3689838/whats-the-difference-between-head-working-tree-and-index-in-git/3690796#3690796)）。

现在，考虑到这一点，这里有一些重要的部分来自`man git reset`：

> ```
> git reset [--soft | --mixed [-N] | --hard | --merge | --keep] [-q] [<commit>] 
> ```
> 
> 在第三种形式[如上所示的形式]中，将当前分支头（`HEAD`）设置为`<commit>`，可选地修改索引和工作树以匹配。`<tree-ish>/<commit>`默认为所有`HEAD`形式。

和：

> ```
> git reset [-q] [<tree-ish>] [--] <paths>...
>     This form resets the index entries for all <paths> to
>     their state at <tree-ish>. (It does not affect the working
>     tree or the current branch.)
>     
>     **This means that `git reset <paths>` is the opposite of `git
>     add <paths>`.**
>       
>     After running git reset <paths> to update the index entry,
>     you can use git-checkout(1) to check the contents out of
>     the index to the working tree. Alternatively, using git-
>     checkout(1) and specifying a commit, you can copy the
>     contents of a path out of a commit to the index and to the
>     working tree in one go. 
> ```

和：

> ```
> git reset [<mode>] [<commit>]
>     This form resets the current branch head to <commit> and
>     possibly updates the index (resetting it to the tree of
>     <commit>) and the working tree depending on <mode>. If
>     <mode> is omitted, defaults to "--mixed". The <mode> must
>     be one of the following:
>      
>     --soft
>         Does not touch the index file or the working tree at
>         all (but resets the head to <commit>, just like all
>         modes do). This leaves all your changed files "Changes
>         to be committed", as git status would put it.
>      
>     --mixed
>         Resets the index but not the working tree (i.e., the
>         changed files are preserved but not marked for commit)
>         and reports what has not been updated. This is the
>         default action.
>      
>         If -N is specified, removed paths are marked as
>         intent-to-add (see git-add(1)).
>      
>     --hard
>         Resets the index and working tree. Any changes to
>         tracked files in the working tree since <commit> are
>         discarded. 
> ```

### 3.您还应该熟悉该`man git checkout-index`页面。

请记住，“索引”包含所有添加或“暂存”的文件（运行时显示*为绿色*`git status`），而“工作树”指的是您实际的本地文件系统（还包含运行时显示*为红色*`git status`的更改）。

在最基本的层面上，它的作用如下：

来自`man git checkout-index`：

> ```
> NAME
>        git-checkout-index - Copy files from the index to the working tree 
> ```

和：

> ```
> -f, --force
>     forces overwrite of existing files
> 
> -a, --all
>     checks out all files in the index. Cannot be used together with
>     explicit filenames. 
> ```

## 参考：

1.  [我的答案——直接适用，以及我需要能够在上面写出整个答案的前导答案！]**[使用 git，如何将工作树（本地文件系统状态）重置为索引状态（“staged “文件）？](https://stackoverflow.com/questions/3107789/using-git-how-do-you-reset-the-working-tree-local-file-system-state-to-the-st/66589020#66589020)**
2.  [如何从当前 Git 工作树中删除本地（未跟踪）文件](https://stackoverflow.com/questions/61212/how-to-remove-local-untracked-files-from-the-current-git-working-tree/64966#64966)
3.  [如何丢弃 Git 中未暂存的更改？](https://stackoverflow.com/questions/52704/how-do-i-discard-unstaged-changes-in-git/12184274#12184274)
4.  [Git中的HEAD，工作树和索引有什么区别？](https://stackoverflow.com/questions/3689838/whats-the-difference-between-head-working-tree-and-index-in-git/3690796#3690796)

## 有关的：

1.  [我的回答][如何从另一个分支只获取一个文件](https://stackoverflow.com/questions/2364147/how-to-get-just-one-file-from-another-branch/65258783#65258783)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-09-13T12:07:16.343

### 解释

[`git reset`手册](https://manned.org/git-reset)列出了3 种调用方式：

*   2 是文件方面的：**这些不影响工作树**，但仅对由 指定的索引中的文件进行操作`<paths>`：

    *   `git reset [-q] [<tree-ish>] [--] <paths>..`
    *   `git reset (--patch | -p) [<tree-ish>] [--] [<paths>...]`
*   1 是提交方式：对引用的**所有文件**`<commit>`进行操作，并*可能*影响工作树：

    *   `git reset [<mode>] [<commit>]`

没有只对指定文件运行*并*影响工作树的调用模式。

### 解决方法

如果你想要两者：

*   重置文件的索引/缓存版本
*   签出文件（即，使工作树与索引和提交版本匹配）

你可以在你的 git 配置文件中使用这个别名：

```
[alias]
  reco   = !"cd \"${GIT_PREFIX:-.}\" && git reset \"$@\" && git checkout \"$@\" && git status --short #"  # Avoid: "fatal: Cannot do hard reset with paths." 
```

然后，您可以执行以下操作之一：

```
$ git reco <paths>

$ git reco <branch/commit> <paths>

$ git reco -- <paths> 
```

（助记符`reco`：`re`set && `c`heck `o`ut）

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2021-11-22T23:37:02.400

```
git reset --hard "origin/username/feature"
git --version # 2.14.1 
```

在 Mac 上为我工作。当我的分支不包含斜杠时，我使用这个不带引号的命令。

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2015-08-25T21:21:11.470

git reset --soft HEAD~1 **filename**撤消提交，但更改保留在本地。**文件名**可以是 -- 对于所有提交的文件****

# php - PHP未定义索引错误$_FILES？

> ID：11200843
> 
> 赞同：6
> 
> 时间：2012-06-26T04:37:05.317
> 
> 标签：php, file, upload, error-handling, undefined

我是 PHP 新手，正在关注 YouTube 上的教程。除了文件上传之外，我在这个文件中拥有一切工作，任何帮助将不胜感激。这是我得到的错误：

*注意：我已经找了很多次了，但找不到与 $_FILES 相关的未定义索引错误...

> 注意：未定义索引：第 95 行 /Applications/xxx 中的头像
> 
> 注意：未定义索引：第 96 行 /Applications/xxx 中的头像
> 
> 注意：未定义索引：第 97 行 /Applications/xxx 中的头像
> 
> 注意：未定义索引：第 98 行 /Applications/xxx 中的头像

抱歉，如果这是一个简单的修复...

```
 <?php $title = "Register";?>
        <?php require ("styles/top.php") ; ?>           
        <?php //de-bugging remove this after script works as desired>
        error_reporting(E_ALL);
         ini_set("display_errors", 1); 
        //end de-bugging//

        $form = "<form action='register.php' method='post'>
        <table cellspacing='5px'>
            <tr>
                <td></td>
                <td><font color='red'>*</font> are required fields.</td>
            </tr>
            <tr>
                <td>First Name:</td>
                <td><input type='text' name='firstname' class='textbox'><font color='red'> *</font></td>
            </tr>
            <tr>
                <td>Last Name:</td>
                <td><input type='text' name='lastname' class='textbox'><font color='red'> *</font></td>
            </tr>
            <tr>
                <td>Username:</td>
                <td><input type='text' name='username' class='textbox'><font color='red'> *</font></td>
            </tr>
            <tr>
                <td>Email:</td>
                <td><input type='text' name='email' class='textbox'><font color='red'> *</font></td>
            </tr>
            <tr>
                <td>Password:</td>
                <td><input type='password' name='password' class='textbox'><font color='red'> *</font></td>
            </tr>
            <tr>
                <td>Confirm Password:</td>
                <td><input type='password' name='repassword' class='textbox'><font color='red'> *</font></td>
            </tr>
            <tr>
                <td>Profile Picture:</td>
                <td><input name='avatar' type='file' ></td>
            </tr>
            <tr>
                <td>Profile Message:</td>
                <td><textarea name='bio' cols='35' rows='5' class='textbox'></textarea></td>
            </tr>
            <tr>
                <td></td>
                <td><input type='submit' name='submitbtn' value='Submit' class='button'></td>

            </tr>
        </table>
        </form>";

        if ($_POST['submitbtn']) {

            $firstname = strip_tags($_POST['firstname']);
            $lastname = strip_tags($_POST['lastname']);
            $username = strip_tags($_POST['username']);
            $email = strip_tags($_POST['email']);
            $class = ($_POST['class']);
            $password = strip_tags($_POST['password']);
            $repassword = strip_tags($_POST['repassword']);
            $bio = strip_tags($_POST['bio']);
            //AVATAR UPLOAD
            $name = $_FILES['avatar'] ['name'];
            $type = $_FILES['avatar'] ['type'];
            $size = $_FILES['avatar'] ['size'];
            $tmpname = $_FILES['avatar'] ['tmpname'];
            $ext = substr($name, strrpos($name, '.'));

            if ($firstname && $lastname && $username && $email && $password && $repassword) {
                if ($password == $repassword) {
                    if (strstr($email, "@") && strstr($email, ".") && strlen($email) >= 6) {

                        require("scripts/connect.php");

                        $query = mysql_query("SELECT * FROM users WHERE username ='$username'");
                        $numrows = mysql_num_rows($query);
                        if ($numrows == 0) {

                            $query = mysql_query("SELECT * FROM users WHERE email ='$email'");
                            $numrows = mysql_num_rows($query);
                            if ($numrows == 0) {

                                $pass = (md5(md5($password)));
                                $date = date("F j, Y");

                                if($name){
                                        move_uploaded_file($tmpname, "avatars/$username.$ext");
                                        $avatar = "$username.$ext";
                                        }
                                        else
                                            $avatar = "default_avatar.png";

                                    $code = substr(md5(rand(111111111111, 99999999999999999)), 2, 25);  

                                mysql_query("INSERT INTO users VALUES ('', '$firstname', '$lastname', '$username', '$email', '$pass', '$avatar', '$bio', '', '', '$code', '', '$date')"); 

                                    $webmaster = "xxxx";
                                    $subject = "xxxx";
                                    $headers = "From:xxx<$webmaster>";
                                    $message = "xxx";

                                    mail($email, $subject, $message, $headers);

                                    echo "xxx";

                            }
                            else
                                echo "That email is already taken. $form";
                        }
                        else
                            echo "That username is already taken. $form";

                    }
                    else
                        echo "You did not enter a valid email. $form";

                }
                else
                    echo "Your passwords did not match. $form";
            }
            else
                echo "You did not fill in all of the required fields. $form";

            }
            else
                echo "$form";

            ?>

            </div>
            <?php require ("styles/bottom.php") ; ?> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-26T04:40:48.573

对于上传文件，您必须使用 enctype in form 标签。

```
<form enctype="multipart/form-data" action='register.php' method='post'> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-26T04:41:22.590

第一：尽量严格编程

```
error_reporting(E_ALL | E_STRICT); 
```

你也必须使用 isset 来检查数组的索引是否可用

```
if (isset($_POST['submitbtn']) && isset($_FILES['avatar'])) {
     // ...
} 
```

还要检查 php 配置

```
file_uploads    "1"
upload_max_filesize     "2M"
post_max_size   "8M"
max_file_uploads    20 
```

帖子最大大小必须大于上传最大文件大小。

也正如人们所说的检查表格**enctype**

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-26T04:42:27.917

您应该添加表单属性`enctype="multipart/form-data"`来上传文件

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-11-19T15:41:13.727

这是 1 年前的帖子，但您可能仍然感兴趣 .. 在 PHP.ini 中检查此选项： enable_post_data_reading=off 它应该是： on 否则 $_FILES 将永远为空 PHP 是否会读取 POST 数据 此选项由以下人员启用默认。很可能，您不想全局禁用此选项。它会导致 $_POST 和 $_FILES 始终为空。

# asp.net - 当您需要共享规则时，如何管理同一解决方案中不同项目中的 web.config 文件？

> ID：11200846
> 
> 赞同：4
> 
> 时间：2012-06-26T04:38:14.313
> 
> 标签：asp.net, visual-studio-2010, web-config

在我的解决方案中，我有 2 个项目，分别调用它们`Foo`和`Bar`. 部署后，`Foo`它是根站点 (http://mycompany.com) 并且`Bar`是子目录 (http://mycompany.com/sub)。

当我在本地计算机上的 IIS Express 中本地处理它们时，我需要将内容复制到两个项目的 web.config 中，因为我分别处理它们。例如，我的重写规则中有“缓存破坏”的 HMTL5 样板规则之一：

```
<rewrite>
    <rules>
        <rule name="Cachebusting">
            <match url="^(.+)\.\d+(\.(js|css|png|jpg|gif)$)" />
              <action type="Rewrite" url="{R:1}{R:2}" />
        </rule>
    </rules>
</rewrite> 
```

如果我只是将它留在 web.config for 中`Foo`，那么当我处理 时`Bar`，它不会被应用，并且由于没有发生重写而出现错误。因此，我已将两个项目的部分复制到 web.config 中。

但是当我将解决方案发布到 Azure 时，由于 web.config for`Foo`位于根目录中，因此由于继承规则而发生冲突。

管理此问题的最佳方法是什么？我试图搜索这个主题，但找不到描述的这个确切问题。

**更新：**

我`applicationhost.config`的 IIS Express 是这样的：

```
 <site name="Bar" id="3">
            <application path="/" applicationPool="Clr4IntegratedAppPool">
                <virtualDirectory path="/" physicalPath="E:\Code\mycompany\Bar\Bar" />
            </application>
            <bindings>
                <binding protocol="http" bindingInformation="*:65052:localhost" />
            </bindings>
        </site>
        <site name="Foo" id="4">
            <application path="/" applicationPool="Clr4IntegratedAppPool">
                <virtualDirectory path="/" physicalPath="E:\Code\mycompany\foo" />
            </application>
            <bindings>
                <binding protocol="http" bindingInformation="*:50477:localhost" />
            </bindings>
        </site> 
```

我尝试对其进行编辑以使两个应用程序成为同一站点的一部分，进行了这些更改但没有运气。似乎打破了一切:)

```
 <site name="Foo" id="3">
            <application path="/" applicationPool="Clr4IntegratedAppPool">
                <virtualDirectory path="/" physicalPath="E:\Code\mycompany\foo" />
            </application>
            <application path="/Sub" applicationPool="Clr4IntegratedAppPool">
                <virtualDirectory path="/" physicalPath="E:\Code\mycompany\Bar\Bar" />
            </application>              
            <bindings>
                <binding protocol="http" bindingInformation="*:65052:localhost" />
            </bindings>
        </site> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:04:40.210

使用`web.debug.config`和`web.Release.config`管理开发和发布环境的差异。有关更多信息，请关注[此 SO POST](https://stackoverflow.com/a/2791271/405673)或[此 MSDN 博客](http://blogs.msdn.com/b/webdevtools/archive/2009/05/04/web-deployment-web-config-transformation.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T04:49:35.307

将您的根站点 (http://mycompany.com) 设为 IIS 中的网站，将您的子目录设为 IIS 中的虚拟目录。

IIS 与虚拟目录共享根网站（的 web.config）中定义的规则。

# arrays - 如何在 Arduino 中编写关联数组？

> ID：11200853
> 
> 赞同：2
> 
> 时间：2012-06-26T04:39:04.523
> 
> 标签：arrays, arduino

我想创建一个关联数组。出于简单的原因，我相信我可以受益于数组的键/值类型。例如，我可以有键/值：

PH/2.85、
EC/700、
TEMP/72

我从未在 Arduino 中处理过数组，并且完全不知道从哪里开始。我正在进行的项目有三个传感器，分别是 ph、ec 和 temp 传感器。他们计算数据，然后将其发送到侦听串行数据的 C# 程序。C# 应用程序运行良好，但我无法确定存储传感器数据的策略。任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T13:16:10.023

如果可以的话，将哈希/关联数组保存在 C# 中，内存便宜，而 Arduino 则很贵。相反，让 Arduino 使用简单的打印语句以易于生成的格式序列化其数据。在 C# 端，如果需要，您可以使用库来反序列化数据。

最简单的可能是以[CSV](http://en.wikipedia.org/wiki/Comma-separated_values)格式序列化数据：

```
2.85,700,72 
```

或者您可以将数据序列化为[JSON](http://en.wikipedia.org/wiki/JSON)格式：

```
{"ph": 2.85, "ec": 700, "temp": 72} 
```

然后，在 C# 端，使用[json 库](http://json.codeplex.com/)通过一个简单的步骤将其转换为哈希。

# css - Facebook Javascript SDK 在 Firefox 的响应式 Twitter Bootstrap 页面中导致额外的边距/填充

> ID：11200858
> 
> 赞同：0
> 
> 时间：2012-06-26T04:39:50.037
> 
> 标签：css, facebook, html, twitter-bootstrap, facebook-javascript-sdk

我一直在努力弄清楚为什么我的基于 Bootstrap 响应式的页面**在 Firefox 和 IE 的右侧有一个额外的 25-30 像素，当窗口宽度小于 600 像素时。**我开始一一删除我的部分代码，直到我只剩下流畅的导航栏和 Facebook SDK。一旦我删除了 Facebook JS SDK 引用，右侧的填充就消失了。

你可以在这里看到这个：

包括 FB JS SDK，额外的右侧填充： [https ://dl.dropbox.com/u/571515/chewsy/Test/FB-with.htm](https://dl.dropbox.com/u/571515/chewsy/Test/FB-with.htm)

如果删除 FB JS SDK，它会按预期工作（右侧没有填充）： [https ://dl.dropbox.com/u/571515/chewsy/Test/FB-without.htm](https://dl.dropbox.com/u/571515/chewsy/Test/FB-without.htm)

由于我的页面上的类似按钮需要 Facebook JS SDK，我该如何解决这个问题？

奇怪的是，在 Safari 和 Chrome 中，这不会重现。

火狐的截图：

![在此处输入图像描述](../Images/b5b619703e7dcb16a0f26acdcfd0f55f.png)

来自 IE 的截图：

![在此处输入图像描述](../Images/b32eed3825c62edf5947b5e6c147bc13.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:48:49.977

正如 CBroe 所建议的，您可以*尝试*更改`#fb-root`样式，但可能有一些 JS 操作会再次更改它，或者它可能只是禁用某些功能。

所以我建议将此添加到您的样式中：

```
html { overflow-x: hidden; } 
```

使用此修复程序，如果您的窗口非常小并且需要水平滚动条，您可能会遇到一个小问题。你可以试试这个，虽然填充重新出现在 200px 下：

```
@media (max-width: 200px) {
    html { overflow-x: auto; }
} 
```

在 FF13 和 IE9 上测试（无法将 IE9 窗口大小调整为小于 200 像素）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:43:48.700

这是导致此问题的 Facebook DIV 元素`#fb-root`- 一旦您通过 Firebug 将其设置或`display:none`定位，额外的边距就会消失。`absolute``left:-200px`

但是，在您的样式表中这样做可能不是一个好主意，因为 SDK 使用此元素来显示它的对话框等 - 所以这些可能会停止工作（将其设置`display:none`为应该完全停止它在旧 IE 中的工作），或者SDK 本身可能会再次覆盖此类格式。

如果您尝试添加自己的格式，您应该彻底测试它。

# tfs - TFS 2012 RC 构建工作流有哪些资源？

> ID：11200859
> 
> 赞同：0
> 
> 时间：2012-06-26T04:39:50.160
> 
> 标签：tfs, tfs-2012

自 2005 年以来，我一直是 TFS 的狂热用户，但我决定跳过 2010 年的升级并直接跳到 2012 年。有没有人有任何推荐的资源来学习关于 TFS 构建的 Workflow Foundation？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:32:37.767

我将从我在[此答案](https://stackoverflow.com/a/11048228/383710)中建议的链接开始。[Wrox TFS 2012](http://www.amazon.co.uk/gp/product/1118314093/ref=ox_sc_act_title_1?ie=UTF8&m=A3P5ROKL5A1OLE)书可从亚马逊预购，因此可能值得等待并获得该书而不是 2010 年的书。据我所知，2010 年和 2012 年构建过程之间的差异远没有 2008 年和 2010 年之间的差距那么大。

# php - 在 PHP 中，是否可以使用对代码具有完全访问权限的人不知道的密钥来加密字符串？

> ID：11200861
> 
> 赞同：1
> 
> 时间：2012-06-26T04:39:58.427
> 
> 标签：php, encryption

我正在寻找加密安全数据，例如社会安全号码，但是会有其他人（例如我的网络主机，员工）可以完全访问加密的源代码。是否可以使用不需要包含在原始源中的密钥以某种方式加密，这样只有我（谁知道密钥）才能解密？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T05:20:45.947

按照你的想法，不，做不到。不，只是说“非对称加密”也无济于事。当某些操作将累积在这些数据上（由合法用户）时，您必须解密它们，并且无论您的解密密钥存储在哪里，您的代码都会尝试访问它（这意味着服务器上的任何管理员都可以访问它也）。

当然，如果您想以半永久性方式加密客户的数据（用户将无法再次更改或读取数据），那么是的，建议与您（开发人员）进行非对称加密的人保留私钥秘密，100% 正确。

一种方法如下：

1.  用户注册：生成密钥对（私人和公共）将公共存储在数据库中，用用户密码的哈希加密私人并将其存储在数据库中。现在再次散列哈希密码并将其存储在数据库中。

2.  用户输入敏感数据：获取输入并使用数据库中的公钥对其进行加密（按照 Hugo 的建议，使用用户的密码作为该过程的密码）并将其存储在数据库中。

3.  用户访问/编辑他的信息：取用户密码，哈希2次并认证他，然后如果他是合法用户，则使用第一个哈希解密私钥并使用私钥解密数据（使用用户密码作为进程的密码）。

请记住，没有 100% 的安全性，请采纳这个想法并加以改进。

**更新**：我和一位在支付处理公司工作的朋友交谈，他描述了现实生活中的情况如下：

没有办法，运行服务器的人总是可以访问数据，无论是否加密。您必须将私钥保存在某个地方。我们将 SSN 和信用卡号保存在单独服务器上的单独数据库中，该服务器具有物理安全性，并且只允许授权人员访问该服务器。除了在同一台服务器上使用脚本外，我们不会查询安全数据库，这些脚本为我们提供了处理所有付款的最低限度的 API。在我们的纯文本数据库中，我们仅保留部分信息 (XXXX-XXXX-XXXX-4569) 仅供查看。所有编辑、读取、附加、添加、删除都通过 API 发生在该安全服务器（安全软件、上锁的门、安全摄像头）上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T04:43:40.757

最简洁的答案是不。

但是，您可以使用非对称密钥，例如 GPG 密钥（或 SSL 密钥）。

你有一个私钥和公钥。公钥用于加密，私钥用于解密。您可以在源代码中包含公钥，并且只保留您自己的私钥。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T06:18:06.260

你可以使用[mcrypt](http://www.php.net/manual/en/mcrypt.examples.php)

**示例编码：**

```
$key = "mykey";
$data = "my data";
$enc_data = mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $key, $data, MCRYPT_MODE_ECB, md5($key)); 
```

**示例解码：**

```
$data = mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $key, $enc_data, MCRYPT_MODE_ECB); 
```

$key 可以在源代码之外给出，也可以通过 html 表单记住和给出。

# groovy - 在 groovy context.expand 表达式中使用变量

> ID：11200869
> 
> 赞同：1
> 
> 时间：2012-06-26T04:42:06.123
> 
> 标签：groovy, expand

我尝试使用 groovy 脚本和soapUI 自动化测试用例。

发送一个肥皂请求，我得到一个包含公司列表的响应。我想做的是核实上市公司的名字。响应数组的大小不固定。

所以我一开始就尝试了下面的脚本，但我被卡住了..

```
def count = context.expand( '${Properties#count}' )
count = count.toInteger()
def i = 0
while (i<count)
    (
def response = context.expand( '${getCompanyList#Response#//multiRef['+i+']/@id}' )
 log.info(response)
i=İ+1   
    ) 
```

我明白了

```
org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed: Script12.groovy: 6: unexpected token: def @ line 6, column 1\. def response = context.expand( '${getCompanyList#Response#//multiRef['+i+']/@id}' ) ^ org.codehaus.groovy.syntax.SyntaxException: unexpected token: def @ line 6, column 1\. at 
```

我应该以某种方式将“i”放在“响应”定义中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T05:56:26.700

您在 while 语句中使用了错误的字符，它应该是大括号 ( `{}`)，而不是括号 ( `()`)。

这就是为什么错误与第6 行有关，与变量**`def`**无关。`i`

您的示例中也有`İ`，这在 Groovy 中不是有效的变量名。

我想你想要这个：

```
def count = context.expand( '${Properties#count}' )
count = count.toInteger()
def i = 0
while (i<count) {
    def response = context.expand( '${getCompanyList#Response#//multiRef['+i+']/@id}' )
    log.info(response)
    i=i+1   
} 
```

但是，这是 Groovy，您可以使用以下方法更清洁：

```
def count = context.expand( '${Properties#count}' )
count.toInteger().times { i ->
    def response = context.expand( '${getCompanyList#Response#//multiRef['+i+']/@id}' )
    log.info(response)
} 
```

（如果你用 替换`i`闭包内部`it`，你也可以删除`i ->`。）

# jquery - 制作一个函数全选jquery

> ID：11200874
> 
> 赞同：1
> 
> 时间：2012-06-26T04:43:02.503
> 
> 标签：jquery, checkbox, selectall

我有一个从站点获得的全选 jquery 脚本（我忘记了链接）。确实，脚本没有问题。有用。但是，我打算将其重写为一个函数。只是，我被困住了。

这是ori脚本

```
 $("#selectall").click(function () {
     $('.case').attr('checked', this.checked);
});

$(".case").click(function(){
    if($(".case").length == $(".case:checked").length) {
        $("#selectall").attr("checked", "checked");
    } else {
        $("#selectall").removeAttr("checked");
    }
}); 
```

这是我写的函数：

```
function klikAll(id){
   var header = $('#' + id);
   $('.foo_' + hid).attr('checked', header.prop('checked') );
}

function klikSub(hid){
   var heder = $('#' + hid);
   var subheder = $('.foo_' + hid);
   var subhederc = $('.foo_' + hid + ':checked');

   if(subheder.length == subhederc.length) {
      heder.attr("checked", "checked");
   } else {
      heder.removeAttr("checked");
   }
} 
```

问题是，该功能完全不起作用。在 jsfiddle 中，我重写了它[http://jsfiddle.net/iamthom/aCJSY/6/](http://jsfiddle.net/iamthom/aCJSY/6/)。任何人都可以给我一个线索，我应该在哪一部分修复？或者我的功能有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T04:51:00.063

请检查这个

**[演示](http://jsfiddle.net/aCJSY/9/)**

***代码***

```
<script type="text/javascript">
function klikAll(id) {
    var header = $('#' + id);
    $('.foo_' + id).attr('checked', header.prop('checked'));
}

function klikSub(hid) {
    var heder = $('#' + hid);
    var subheder = $('.foo_' + hid);
    var subhederc = $('.foo_' + hid + ':checked');

    if (subheder.length == subhederc.length) {
        heder.attr("checked", "checked");
    } else {
        heder.removeAttr("checked");
    }
}
</script> 
```

将您的功能放在`<script>`块内。

# php - 用php上传图片会报错

> ID：11200877
> 
> 赞同：0
> 
> 时间：2012-06-26T04:43:25.037
> 
> 标签：php, json, forms, xhtml

我有一个位于此处的表格，[http://brandybrowauto.com/npo3.html](http://brandybrowauto.com/npo3.html)，代码如下。第一部分是 html 表单本身，它只是收集一些信息，然后调用 npo3.php 来收集数据并上传图像并将一些 json 添加到文件中。虽然它仍然很混乱并且需要大量清理，但我只想让功能本身正常工作。我有一些小的验证，但在我的测试过程中，进入一个具有完整 777 权限的文件夹，我继续收到“不允许此扩展程序，请仅上传图像”的错误。这是我在 php 页面中的扩展检查器。当文件绝对是我在批准的数组中的类型之一时，我不知道为什么我一直收到这个。我在表单上有正确的 enctype 并将文件名存储在我在脚本中使用的变量中。每次我尝试上传时，有什么想法会导致这种情况发生吗？

```
<form action="npo3.php" method="post" enctype="multipart/form-data" name="add_car" onsubmit="checkForm();">
                                <table cellspacing="8" cellpadding="8" style="margin:0 auto;">
                                    <tr>
                                        <td>
                                            <table cellspacing="8" cellpadding="8">
                                                <tr>
                                                    <td>
                                                        <select name="make" id="make">
                                                            <option value="">- Select Make -</option>
                                                            <option value="Acura">Acura</option>
                                                            <option value="Audi">Audi</option>
                                                            <option value="BMW">BMW</option>
                                                            <option value="Buick">Buick</option>
                                                            <option value="Cadillac">Cadillac</option>
                                                            <option value="Chevrolet">Chevrolet</option>
                                                            <option value="Chrysler">Chrysler</option>
                                                            <option value="Daewoo">Daewoo</option>
                                                            <option value="Dodge">Dodge</option>
                                                            <option value="Eagle">Eagle</option>
                                                            <option value="Fiat">Fiat</option>
                                                            <option value="Ford">Ford</option>
                                                            <option value="Geo">Geo</option>
                                                            <option value="GMC">GMC</option>
                                                            <option value="Honda">Honda</option>
                                                            <option value="Hyundai">Hyundai</option>
                                                            <option value="Infiniti">Infiniti</option>
                                                            <option value="Isuzu">Isuzu</option>
                                                            <option value="Jaguar">Jaguar</option>
                                                            <option value="Jeep">Jeep</option>
                                                            <option value="Kia">Kia</option>
                                                            <option value="Land_Rover">Land Rover</option>
                                                            <option value="Lexus">Lexus</option>
                                                            <option value="Lincoln">Lincoln</option>
                                                            <option value="Mazda">Mazda</option>
                                                            <option value="Mercedes">Mercedes</option>
                                                            <option value="Mercury">Mercury</option>
                                                            <option value="Mitsubishi">Mitsubishi</option>
                                                            <option value="Nissan">Nissan</option>
                                                            <option value="Oldsmobile">Oldsmobile</option>
                                                            <option value="Plymouth">Plymouth</option>
                                                            <option value="Pontiac">Pontiac</option>
                                                            <option value="Porsche">Porsche</option>
                                                            <option value="Saab">Saab</option>
                                                            <option value="Saturn">Saturn</option>
                                                            <option value="Scion">Scion</option>
                                                            <option value="Subaru">Subaru</option>
                                                            <option value="Suzuki">Suzuki</option>
                                                            <option value="Toyota">Toyota</option>
                                                            <option value="Volkswagen">Volkswagen</option>
                                                            <option value="Volvo">Volvo</option>
                                                        </select>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <input class="gray" type="text" name="stock" id="stock" value="Stock#" onfocus="inputFocus(this);" onblur="inputBlur(this);"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <input class="gray" type="text" name="name" id="name" value="Name" onfocus="inputFocus(this);" onblur="inputBlur(this);"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <input class="gray" type="text" name="year" id="year" value="Year" onfocus="inputFocus(this);" onblur="inputBlur(this);"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <input class="gray" type="text" name="mileage" id="mileage" value="Mileage" onfocus="inputFocus(this);" onblur="inputBlur(this);"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <input class="gray" type="text" name="price" id="price" value="Price" onfocus="inputFocus(this);" onblur="inputBlur(this);"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <input class="gray" type="text" name="desc" id="desc" value="Description" onfocus="inputFocus(this);" onblur="inputBlur(this);"/>
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                        <td>
                                            <table cellspacing="8" cellpadding="8">
                                                <tr>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        Image 1:&nbsp;<input type="file" name="image1" id="image1" value="Image1"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        Image 2:&nbsp;<input type="file" name="image2" id="image2" value="Image2"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        Image 3:&nbsp;<input type="file" name="image3" id="image3" value="Image3"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        Image 4:&nbsp;<input type="file" name="image4" id="image4" value="Image4"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        Image 5:&nbsp;<input type="file" name="image5" id="image5" value="Image5"/>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <input type="submit" name="submit" id="submit" value="Submit"/>
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                </table>
                            </form> 
```

这是下面的 npo3.php 页面。它也做了很多其他的事情，但是在扩展检查期间的 for 循环期间，我一直在点击该死消息。

```
<?php
$stock = $_POST["stock"];
$name = $_POST["name"];
$year = $_POST["year"];
$mileage = $_POST["mileage"];
$price = $_POST["price"];
$desc = $_POST["desc"];
$make2 = $_POST["make"];

$path2 = "images/PartsCars/".$make2."/info.json";
$string2 = file_get_contents($path2);
$data2 = json_decode($string2, true);

if($stock == ""){
    die('You need to enter a Stock # to match the image name. Please go back and fill in the Stock#.');
}
else {
    $data2[$stock] = array("name" => $name, "year" => $year, "mileage" => $mileage, "price" => $price, "description" => $desc);
}

for($i = 1; $i <= 5; $i++) {

    if($_FILES['image1']['name'] != "") {
        $filename = $_FILES['image'.$i]['name'];
        $filetmpname = $_FILES['image'.$i]['tmp_name'];
        $filetype = $_FILES['image'.$i]['type'];
        $filetype = strtolower($filetype);

        //check if files contain php or asp and kill it 
        $pos1 = strpos($filename,'php');
        $pos2 = strpos($filename,'asp');
        if(!($pos1 === false) && !($pos2 === false)) {
            die('You cannot upload that type of file to our system. Images only.');
        }

        //get the file ext
        $file_ext = strrchr($filename, '.');

        //check if extension is allowed or not
        $allowedExt = array(".jpg",".jpeg",".gif",".png",".JPG",".PNG"); 
        if (!(in_array($file_ext, $allowedExt))){
            die('This extension is not allowed, please upload images only.');
        }

        //check upload type
        $pos = strpos($filetype,'image');
        if($pos === false) {
            die('Only images types are allowed to be uploaded.');
        }
        $imageinfo = getimagesize($_FILES['image'.$i]['tmp_name']);
        if($imageinfo['mime'] != 'image/gif' && $imageinfo['mime'] != 'image/jpeg' && $imageinfo['mime'] != 'image/jpg' && $imageinfo['mime'] != 'image/png') {
            die('Only images types are allowed to be uploaded.');
        }

        //check double file type (image with comment)
        if(substr_count($filetype, '/')>1){
            die('Only images types are allowed to be uploaded.');
        }

        // upload to upload direcory 
        $uploaddir = 'images/PartsCars/'.$make2.'/' ;
        move_uploaded_file($filetmpname, $uploaddir.$filename);
    }
    else {
        die('Image 1 did not have any file selected. Please go back and select an image.');
    }
}

file_put_contents($path2, json_encode($data2));

$path = "images/PartsCars/".$make2."/";
$temp_files = scandir($path);
$string = file_get_contents("images/PartsCars/".$make2."/info.json");

$data = json_decode($string);
natsort($temp_files);
//$temp_files = array_reverse($temp_files);

echo '<a href="npo3.html"><button>+Add Car</button></a>';
echo '<table style="padding-left:20px;width:930px;">';

foreach($temp_files as $file) 
{
    if($file != "." && $file != ".." && $file != "Thumbs.db" && $file != basename(__FILE__) && $file != "info.json") 
    {
        echo '<tr>';        
        $info = pathinfo($file);
        $file_name =  basename($file,'.'.$info['extension']);
        $findme  = array(" (2)"," (3)"," (4)"," (5)");
        $findme2  = array(" (1)");
        $pos1 = strpos($file_name, $findme[0]);
        $pos2 = strpos($file_name, $findme[1]);
        $pos3 = strpos($file_name, $findme[2]);
        $pos4 = strpos($file_name, $findme[3]);
        $subpictures = str_replace($findme, "", $file_name);
        $subpictures2 = str_replace($findme2, "", $file_name);

        if ($pos1 !== false || $pos2 !== false || $pos3 !== false || $pos4 !== false) {
            echo '<script type="text/javascript">document.getElementById("'.$subpictures.'").innerHTML += "<a href=\"'.$path.$file.'\"><img src=\"'.$path.$file.'\" style=\"width:100px;height:80px;padding:10px;\"/></a>";</script>';
        }
        else {
            echo '<td style="border-bottom:1px #fff solid;width:240px;"><a href="'.$path.$file.'"><img src="'.$path.$file.'" alt="'.$file.'" style="width:200px;height:150px;padding:20px;"/></a></td>';
            echo '<td style="border-bottom:1px #fff solid;width:440px;">';
            echo '<span style="font-size:2em;padding:10px;color:#fff;font-weight:bold;">'.$data->{$file_name}->{'name'}.'</span><br/>';
            echo '<br/><span style="padding-left:10px;">Year: '.$data->{$file_name}->{'year'}.'</span>';
            echo '<br/><span style="padding-left:10px;">Mileage: '.$data->{$file_name}->{'mileage'}.'</span>';
            echo '<br/><span style="padding-left:10px;">Price: '.$data->{$file_name}->{'price'}.'</span>';
            echo '<br/><span style="padding-left:10px;">Description: '.$data->{$file_name}->{'description'}.'</span>';
            echo '<br/><br/><span style="padding-left:10px;">Please <a href="contact.php">contact us</a> for more details.</span></td>';
            echo '<td style="border-bottom:1px #fff solid;width:250px;" id="'.$subpictures2.'"></td></tr>';
        }
    }
}
echo '</table>'; 

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T04:56:17.453

我认为这

```
for($i = 1; $i <= 5; $i++) {
    if($_FILES['image1']['name'] != "") { 
```

应该

```
for($i = 1; $i <= 5; $i++) {
    if($_FILES['image'.$i]['name'] != "") { 
```

还调试你得到的扩展：

```
echo "Image $i:". $file_ext = strrchr($filename, '.'); 
```

如果您希望至少上传一个文件，您可以添加一个标志，如下所示。

```
$fileUpload = false;
for($i = 1; $i <= 5; $i++) 
{
    if($_FILES['image'.$i]['name'] != "") 
    {
        .....
        .....
        move_uploaded_file($filetmpname, $uploaddir.$filename);
        $fileUpload = true;
    }    
}
if(!$fileUpload) 
{
    die('Please go back and select atleast one image.');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T04:50:52.060

如果您收到扩展名检查错误，那么您没有正确检查扩展名，因为我们不确定扩展名是小写字母还是大写字母，然后将文件名设置为一种格式以使用`strtolower()`功能，请参阅[图片上传和调整大小](http://blog.webtech11.com/2012/04/21/upload-and-resize-an-image-with-php.html)的帖子：

```
 $filename = strtolower($filename); // Name of the file uploaded by you
        $extension = strrchr( $filename, '.' );
        $auth_exten = array('.jpg', '.jpeg', '.png', '.gif');

        if( in_array( $extension, $auth_exten ) ){
            return true;
        }
        else{
            return false;
        } 
```

# iphone - 将类存储在数组中

> ID：11200881
> 
> 赞同：0
> 
> 时间：2012-06-26T04:44:21.713
> 
> 标签：iphone, objective-c

我需要一个包含我的类列表的数组，以便按索引分配它们。我制作的第一个是简单的数组，`NSStrings`带有方便键入的类名称。然后，我只是做了以下事情：

```
id classAllocator = NSClassFromString([namesArray objectAtIndex:index]);
id classEntranse = [[classAllocator alloc] init]; 
```

但是这个系统在重构的情况下非常有用。我尝试执行以下操作：

```
@class myClass;
@class enotherClass;
classesArray = [[NSArray alloc] initWithObjects: [myClass class], [enotherClass class], nil];
id classEntranse = [[[classesArray objectAtIndex:index] alloc] init]; 
```

但是现在，我收到警告“Reciver 'myClass' 是一个转发类，@interface 可能不存在”。 **我不能#import我的类**：这将通过循环导入。

如何在 NSArray 中动态存储类或名称？

# javascript - JS/jquery 在 HTML/CSS 中隐藏内容

> ID：11200882
> 
> 赞同：0
> 
> 时间：2012-06-26T04:44:23.593
> 
> 标签：javascript, jquery, html

是否有“最佳实践”如何隐藏除 HTML5 网站的一个内容 DIV 之外的所有内容？是否还有“最常用”的图书馆/图书馆？还是经常用自己的 JS 代码编写？

我的目标是加载 9 个 DIV。中间的一个是导航，其他的是内容。选择NAM点时，将隐藏特定的div“幻灯片”和所有其他div都是隐藏的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T04:49:39.430

我通常这样做：

```
$('.your_div').show().siblings().hide(); 
```

用你想要的效果替换`.show()`和。`.hide()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T04:49:03.503

Jquery 的[`hide`](http://api.jquery.com/hide/)，[`.show`](http://api.jquery.com/show/)或者[`.toggle`](http://api.jquery.com/toggle/)已经足够好了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T04:51:51.943

我会为所有隐藏和显示的 div 添加一个类，可能是一个类名，如部分。

```
<div class="section" id="home"> home content here... </div>
<div class="section" id="page-slug"> another page here... </div>
<div class="section" id="contact"> contact information here... </div> 
```

然后给每个 div 一个 id。最后，为了显示联系部分，您将：

```
$('#contact').show().siblings('.section').hide(); 
```

这种为相似元素赋予相同元素`class`并赋予容器元素 an 的`id`方法实际上只是一种很好的做法，无论选择 jQuery 元素时是否易于使用。

# html - 背景图像大小在 IE 8 中不起作用

> ID：11200887
> 
> 赞同：1
> 
> 时间：2012-06-26T04:45:14.833
> 
> 标签：html, css, background

我的html代码

```
<div id="content_main"></div> 
```

css

```
 #content_main
{
    width:1024px;
    height:150px;
    background:url('../images/Orange.jpg');
    background-repeat:no-repeat;
    background-size:1024px 150px;
    -moz-background-size: 1024px 150px;
    -o-background-size: 1024px 150px;
} 
```

background-size 在 IE8 中不起作用，如何解决这个问题，我不知道，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T04:50:02.247

IE8 不支持背景图像选项。您可以使用[caniuse.com](http://caniuse.com/background-img-opts)网站查看各种 HTML5 功能的浏览器支持矩阵，例如`background-size`. 或者，如果需要 IE8 支持，您需要`<img>`在您的`<div id="content_main">`

按照@ahsan 的建议查看[其他类似问题](https://stackoverflow.com/q/2991623/527096)，其中包含一些 polyfill 建议和IE8 中`ms-filter`的解决方法`background-size`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T04:54:27.980

请检查有关背景属性的参考： [http ://www.jacklmoore.com/notes/ie-transparency-problems](http://www.jacklmoore.com/notes/ie-transparency-problems)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-12T18:33:26.983

```
#content_main{

width:1024px;
height:150px;
background:url('../images/Orange.jpg');
background-repeat:no-repeat;
background-size:1024px 150px;
-moz-background-size: 1024px 150px;
-o-background-size: 1024px 150px;
filter: progid:DXImageTransform.Microsoft.AlphaImageLoader( src='images/Orange.jpg', sizingMethod='scale');
-ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader( src='images/Orange.jpg', sizingMethod='scale')"; 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-28T11:55:25.617

在 IE8 中也使用 CSS3`background-size: cover;`和,拉伸背景图像。`background-size: contain;`

如何使用它？

上传`backgroundsize.min.htc`到您的网站，连同`.htaccess`将发送 IE 所需的 mime 类型（仅限 Apache - 它内置在 nginx、node 和 IIS 中）。

在 CSS 中使用的任何地方`background-size`，都添加对这个文件的引用。

```
.selector { 
    background-size: cover;
    /* The url is relative to the document, not to the css file! */
    /* Prefer absolute urls to avoid confusion. */
    -ms-behavior: url(/backgroundsize.min.htc);
} 
```

以这种方式设置样式的元素应该有一个`position: relative;`or`position: fixed;`和一个`z-index.`如果没有，它们将被赋予一个`position: relative;`and `z-index: 0;`。

# java - 使用 Java 的条件 xpath

> ID：11200898
> 
> 赞同：0
> 
> 时间：2012-06-26T04:46:54.797
> 
> 标签：java, xml, xpath

我有一个示例 xml 文件，如下所示：

```
<Root>
    <SubOne>
       <book author="george" />
       <indiv name="abc" />
       <indiv name="khh" />
       <indiv name="ioo" />
    </SubOne>
    <SubTwo>
       <indiv book author="hamle" />
       <indiv name="kok"/>
       <indiv name="ppp" />
    </SubTow>

</Root> 
```

XPATH 中有没有办法检查，如果 author="george" 选择 /Root/SubOne/indiv/@name，或者如果 author="hamle"，选择 /Root/SubTwo/indiv/@name。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:25:13.283

首先我注意到你`XML`的无效。

假设您的 XML 如下所示。

## XML:

```
<Root>
    <SubOne>
        <book author="george"/>
        <indiv name="abc"/>
        <indiv name="khh"/>
        <indiv name="ioo"/>
    </SubOne>
    <SubTwo>
        <book author="hamle"/>
        <indiv name="kok"/>
        <indiv name="ppp"/>
    </SubTwo>
</Root> 
```

## 路径：

对于`@author='george'`，使用这个 XPATH：

```
//*[book[@author='george']]/indiv 
```

对于`@author='hamle'`，使用这个 XPATH：

```
//*[book[@author='hamle']]/indiv 
```

对于两个 XPATH，要打印名称，请使用`@name`

## 爪哇：

使用 Java，您需要为两个 xpath 实现这种方式

对于`@author='george'`,

```
String xpath = "//*[book[@author='george']]/indiv";
NodeList nl = (NodeList) xpath.evaluate(xpath, xml, XPathConstants.NODESET);
for (int i = 0; i < nodes.getLength(); i++) {
    System.out.println(nodes.item(i).getAttributes().getNamedItem("name").getNodeValue()); 
} 
```

对于`@author='hamle'`,

```
String xpath = "//*[book[@author='hamle']]/indiv";
NodeList nl = (NodeList) xpath.evaluate(xpath, xml, XPathConstants.NODESET);
for (int i = 0; i < nodes.getLength(); i++) {
    System.out.println(nodes.item(i).getAttributes().getNamedItem("name").getNodeValue()); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T05:55:51.507

我猜你在节点 /Root/SubTwo/indiv 中有错字。这应该有效（我没有检查）

```
/Root/SubOne/book[@author='george']/following-sibling::1/@name | /Root/SubTwo/book[@author='hamle']/following-sibling::1/@name 
```

它使用联合，所以这不完全是你正在寻找的。

# android - Webview 在浏览器窗口中加载 url 而不是 Webview

> ID：11200905
> 
> 赞同：2
> 
> 时间：2012-06-26T04:48:35.633
> 
> 标签：android

我想在同一页面中显示 webview、admob 和一个包含编辑文本和 2 个按钮的导航栏。但是页面会自动转到 webview（如在浏览器中）隐藏活动中定义的其他元素....代码如下...请提出您的宝贵建议...提前谢谢...

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="fill_parent" android:layout_height="fill_parent" android:orientation="vertical">
    <include android:id="@+id/nav_bar_layout" layout="@layout/nav_bar" android:layout_above="@+id/web_view" />
    <WebView android:layout_width="fill_parent" android:layout_height="fill_parent" android:id="@+id/web_view" android:layout_centerInParent="true" />
    <include android:id="@+id/admob_layout" layout="@layout/admob_layout" android:layout_below="@+id/web_view" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T05:25:53.510

您可以使用 setWebViewClient()。设置您自己的自定义 WebViewClient 可让您处理 onPageFinished、shouldOverrideUrlLoading。

```
webview=(WebView)findViewById(R.id.webView1);
webview.getSettings().setJavaScriptEnabled(true);
webview.loadUrl("file:///android_asset/index.htm");
webview.setWebViewClient(new WebViewClient()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T05:07:56.400

使用滚动视图。由于 webview 的内容会更多，因此如果您指定为 android:layout_height="wrap_content" 它将占据整个屏幕

或者 Else 给 webview 固定高度

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" android:background="@drawable/bg_2">

<RelativeLayout
    android:id="@+id/mainLayout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/txtTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="right"
        android:text="Title"
       />

    <WebView
        android:id="@+id/txtDescription"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/txtTitle"
        android:layout_margin="10dp"/>

    <TextView
        android:id="@+id/txtDate"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/txtDescription"
      />

 </RelativeLayout>

</ScrollView> 
```

# javascript - 退出弹出重定向并出现异常

> ID：11200906
> 
> 赞同：1
> 
> 时间：2012-06-26T04:48:49.427
> 
> 标签：javascript, jquery, html, redirect

我也不喜欢退出弹出窗口，但我想在即将到来的节日日进行整合，所以要感谢我的访客并给他们一些特别的东西。我是下面的这段代码，用于在退出时进行重定向。

```
var exitPop = false;
var nonFire = false;
window.onbeforeunload = function () {
    if(!exitPop){
        exitPop=true;
        return 'Happy Festival Day!';
    }
};

setInterval(function(){
    if(exitPop && !nonFire){
        nonFire = true;
        window.location.href = 'http://google.com';
    }
}, 200); 
```

我在下面使用这段代码，它基本上重定向到做评论

```
<script type="text/javascript"> 

window.fbAsyncInit = function() {
    FB.Event.subscribe('comment.create',
    function (response) {
        window.location = "http://domain.com";
    });
    FB.Event.subscribe('comments.remove',
    function (response) {
        window.location = "http://domain.com";
    });   
};

(function() {
    var e = document.createElement('script');
    e.async = true;
    e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
    document.getElementById('fb-root').appendChild(e);
}());
//]]>
</script> 
```

而且我不想将退出重定向显示给评论的访问者，因为这让我的访问者很恼火，我希望该代码仅在单击退出时执行。那么我应该包含哪些代码会创建评论重定向异常并且不应该向评论者显示弹出窗口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T05:05:57.200

只有在某些链接打开它时才会阻止弹出窗口。因此，如果您尝试在退出时加载某些内容，它将无法正常工作。

这是一个工作示例：[http](http://swip.codylindley.com/popupWindowDemo.html) ://swip.codylindley.com/popupWindowDemo.html使用某人编写的 jquery 中的一个小库。您可以查看源代码。

基本上，如果弹出窗口打开 onclick 你应该没问题，但在任何其他情况下它将被阻止。

我不确定某些公司是如何侥幸逃脱的，但任何形式的黑客行为最终都会被堵上。我尝试这样做的一种方法是在链接上触发 onclick 操作，即使这样也不起作用。所以这是相当愚蠢的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T05:07:44.620

您可以通过在 javascript 中设置 cookie 来做到这一点。您可以使用直接的 javascript 来执行此操作，但使用 jquery.cookies 插件的代码更短，因此无法演示该方法。

在您的 comment.create 函数中，设置一个 cookie 以显示该用户发表了评论：

```
 FB.Event.subscribe('comment.create',
    function (response) {
        $.cookie('has_commented', 'true');
        window.location = "http://domain.com";
 }); 
```

然后检查退出函数上的 cookie 值：

```
if($.cookie('has_commented') == true) {
    return 'Happy Festival Day!';
} 
```

Jquery Cookies 插件在这里：[https ://github.com/carhartl/jquery-cookie/blob/master/README.md](https://github.com/carhartl/jquery-cookie/blob/master/README.md)

或者如果你想用直接的 javascript 做同样的事情 - 相同的概念 - 但有点混乱......这里的信息：http: [//www.w3schools.com/js/js_cookies.asp](http://www.w3schools.com/js/js_cookies.asp)

# iphone - 我的第一个 iPhone 应用程序测试

> ID：11200913
> 
> 赞同：0
> 
> 时间：2012-06-26T04:49:46.163
> 
> 标签：iphone, ios, xcode

其实我的 iPhone 是 2g 型号，iOS 版本是 3.1.3。

我有 Mac OS X 和 Xcode 4.2。

我是一名注册的 Apple iOS 开发人员，我完成了我的测试应用程序。我正在尝试将我的应用程序部署到 iPhone。

当我将我的 iPhone 连接到我的 Mac 时，我进入 Xcode，窗口 - 管理器，然后我收到一条消息“iPhone 需要 ios 3.0 - 3.2.2 设备调试支持”。

要使用 Lion 用户的 iPhone 进行开发，Xcode 必须下载并安装 iOS 3.0 - 3.2.2 设备调试支持。您可以在 Xcode 的“下载”首选项面板中查看所有可用的下载。

不知道在哪里下载这个包？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T04:55:32.400

您需要转到`XCode` `preferences`然后转到`Downloads`选项卡 -`Components`

![在此处输入图像描述](../Images/7ba3653d185db96a19faa6dec084b25e.png)

表格在这里，您可以下载设备支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T04:53:49.663

您需要将部署目标设置为 3.1。

以下是路径-

项目 - 摘要 - 部署目标

# ios - 何时使用 CC_CONTENT_SCALE_FACTOR()？

> ID：11200916
> 
> 赞同：0
> 
> 时间：2012-06-26T04:50:13.830
> 
> 标签：ios, debugging, cocos2d-iphone, box2d

我对何时在我的应用程序中使用 CC_CONTENT_SCALE_FACTOR() 有点困惑。我使用 Box2D 进行碰撞检测，并制作了一个 b2Body 顶点。现在我应该只将每个点除以 PTM_Ratio 还是 PTM_Ratio 乘以 CC_CONTENT_SCALE_FACTOR()？

如果我不处理像素，我应该在我的应用程序的任何地方使用 CC_CONTENT_SCALE_FACTOR() 吗？我应该只像这样对 GLESDebugDraw 使用 CC_CONTENT_SCALE_FACTOR() 吗？

`_debugDraw = new GLESDebugDraw( ptmRatio * CC_CONTENT_SCALE_FACTOR());`?

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:36:33.463

Box2D 世界并不关心渲染的像素数。Box2D 完全不考虑屏幕分辨率，因此无论您是否使用 Retina 显示设备，您都不应也不应该缩放任何内容。

目前只有一个方面您可能需要 CC_CONTENT_SCALE_FACTOR，那就是在使用 tilemap 时。如果我没记错的话，tileset 的宽度和高度属性以像素而不是点为单位给出。因此，您需要除以 CC_CONTENT_SCALE_FACTOR 以获得正确的点数。不知道为什么 cocos2d 内部没有这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:47:08.080

cocos2d 使用的所有位置都以点为单位。在视网膜设备的情况下，一个点等于两个像素。需要直接使用 CC_CONTENT_SCALE_FACTOR() 的情况很少见，并且与 box2d 无关。在使用 box2d 的情况下，您只需使用 ptmRatio 在 box2d 的米坐标和 cocos2d 的点坐标之间进行转换

# php - 访问全局变量

> ID：11200924
> 
> 赞同：1
> 
> 时间：2012-06-26T04:51:02.137
> 
> 标签：php, iframe, global

I have a page that is included as an `iframe` in my site. I need to supply the searched keyword to that page for DFP attribute and so I am setting the searched keyword as a global variable and now I need to retrieve the global variable in that iframe. So is it possible, and if so, how?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T05:32:53.037

You can not access global variable in iframe because both will be separate request to server.

Either you need to pass variable as paramater in iframe src or you need to bind session variable in parent page and use that session value in iframe page.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T05:12:51.347

You don't access this global variable in iframe because of limited scope. You can pass this variable in quarystring parameter. As like for example :-

```
<?php 
  var $param="test";
  echo "<iframe src='test.php?param=".$param."'></iframe>";
?> 
```

I hope it may helps!!

# python - 使用cookies进行身份验证登录

> ID：11200926
> 
> 赞同：11
> 
> 时间：2012-06-26T04:51:23.010
> 
> 标签：python, authentication, selenium, login, scrapy

我是scrapy的新手，因为在线评论很好，我决定尝试一下。我正在尝试使用scrapy登录网站。通过使用 selenium 收集所需的 cookie 并将它们添加到 mechanize，我已成功使用 selenium 和 mechanize 的组合登录。现在我正在尝试用 scrapy 和 selenium 做类似的事情，但似乎无法正常工作。我什至无法判断是否有任何工作正常。谁能帮帮我吗。下面是我开始的内容。我什至可能不需要用 scrapy 传输 cookie，但我不知道这件事是否真的登录过。谢谢

```
from scrapy.spider import BaseSpider
from scrapy.http import Response,FormRequest,Request
from scrapy.selector import HtmlXPathSelector
from selenium import webdriver

class MySpider(BaseSpider):
    name = 'MySpider'
    start_urls = ['http://my_domain.com/']

    def get_cookies(self):
        driver = webdriver.Firefox()
        driver.implicitly_wait(30)
        base_url = "http://www.my_domain.com/"
        driver.get(base_url)
        driver.find_element_by_name("USER").clear()
        driver.find_element_by_name("USER").send_keys("my_username")
        driver.find_element_by_name("PASSWORD").clear()
        driver.find_element_by_name("PASSWORD").send_keys("my_password")
        driver.find_element_by_name("submit").click()
        cookies = driver.get_cookies()
        driver.close()
        return cookies

    def parse(self, response,my_cookies=get_cookies):
        return Request(url="http://my_domain.com/",
            cookies=my_cookies,
            callback=self.login)

    def login(self,response):
        return [FormRequest.from_response(response,
            formname='login_form',
            formdata={'USER': 'my_username', 'PASSWORD': 'my_password'},
            callback=self.after_login)]

    def after_login(self, response):
        hxs = HtmlXPathSelector(response)
        print hxs.select('/html/head/title').extract() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T05:55:20.953

你的问题更多的是调试问题，所以我的回答只会对你的问题有一些注释，而不是确切的答案。

```
def parse(self, response,my_cookies=get_cookies):
    return Request(url="http://my_domain.com/",
        cookies=my_cookies,
        callback=self.login) 
```

`my_cookies=get_cookies`- 你在这里分配一个函数，而不是它返回的结果。我认为您根本不需要在这里传递任何函数作为参数。它应该是：

```
def parse(self, response):
    return Request(url="http://my_domain.com/",
        cookies=self.get_cookies(),
        callback=self.login) 
```

[`cookies`](http://doc.scrapy.org/en/latest/topics/request-response.html#scrapy.http.Request)for 的论点`Request`应该是一个字典 - 请验证它确实是一个字典。

> 我什至无法判断是否有任何工作正常。

在回调中放置一些打印以跟踪执行。

# java - 使用 for 循环将文件中的数字行读取到二维数组

> ID：11200930
> 
> 赞同：0
> 
> 时间：2012-06-26T04:51:38.433
> 
> 标签：java, arrays, multidimensional-array, integer

我想从文件中读取数字行。代码如下，但 IDE 显示`NullPointerException`运行时异常。不知道我做错了什么。

```
//reading the contents of the file into an array
public static void readAndStoreNumbers() {
    //initialising the new object
    arr = new int[15][];

    try {
        //create file reader
        File f = new File("E:\\Eclipse Projects\\triangle.txt");
        BufferedReader br = new BufferedReader(new FileReader(f));

        //read from file
        String nums;
        int index = 0;
        while ((nums = br.readLine()) != null) {
            String[] numbers = nums.split(" ");

            //store the numbers into 'arr' after converting into integers
            for (int i = 0; i < arr[index].length; i++) {
                arr[index][i] = Integer.parseInt(numbers[i]);
            }
            index++;
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T04:55:09.337

您的第二维`arr`未初始化，您正在调用

```
arr[index].length 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T05:08:17.537

出于两个原因，您可能会遇到 NPEX。

1.  您没有完成您的定义`arr`- 在您声明`arr`为的代码中并不明显`int arr[][]`；

2.  即使您有上述条件，您也不会为第二个阵列留出空间。你现在拥有的是一个[锯齿状数组](https://stackoverflow.com/a/10271559/1079354)；您可以在第二个数组中包含您希望在第二个维度中任意长度的元素。

    我对您的代码进行的唯一修改以使其正常工作是以下行：

    ```
    arr[index] = new int[numbers.length]; 
    ```

    ...在将元素拉入之后`numbers`，进入循环之前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T05:13:00.420

Java 没有真正的多维数组。您使用的实际上是一个 int 数组数组：实际上为类型对象`new int[n][]`创建了一个包含空间的数组。`n``int[]`

因此，您将不得不分别初始化这些`int`数组中的每一个。从您从未在程序中的任何位置实际指定第二维的长度这一事实来看，这一点很明显。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T05:06:30.913

你需要改变——

`for(int i=0; i<arr[index].length; i++) {`

至

```
arr[index] = new int[numbers.length];
for (int i = 0; i < numbers.length; i++) { 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T04:57:18.070

我认为你应该使用`StringBuilder`..

```
//reading the contents of the file into an array
public static void readAndStoreNumbers() {
    //initialising the StringBuffer 
    StringBuilder sb = new StringBuilder();

    try {
        //create file reader
        File f = new File("E:\\Eclipse Projects\\triangle.txt");
        BufferedReader br = new BufferedReader(new FileReader(f));

        //read from file
        String nums;
        int index = 0;
        while ((nums = br.readLine()) != null) {
            String[] numbers = nums.split(" ");

            //store the numbers into 'arr' after converting into integers
            for (int i = 0; i < arr[index].length; i++) {
                sb.append(Integer.parseInt(numbers[i])).append("\n");
            }
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

# bash - 写入标准输出而不是文件

> ID：11200931
> 
> 赞同：4
> 
> 时间：2012-06-26T04:51:44.600
> 
> 标签：bash

如何将数据写入标准输出而不是写入文件？

我正在使用 GPG 并希望将加密文本打印到标准输出，而不保存文件。

但是，使用 gpg 命令，加密文本以普通方式写入文件：

```
$> gpg --recipient someone@example.com --armor --output encrypted.txt --encrypt example.pdf 
```

（使用上述命令，加密文件保存在 encrypted.txt 中）

我想做的是如下：

```
$> gpg --recipient someone@example.com --armor --output <STDOUT> --encrypt example.pdf 
```

和加密的消息显示在控制台中。

我不想保存硬盘以避免性能损失。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T04:57:25.253

通常你使用“-”来指定标准输出，但并不是所有的命令都接受这个，我不关心 gpg。

例如：

```
tar -cvzf - foo/ ¦ split -b 50k foobar_ 
```

将“tar 文件”通过管道传输到标准输出，将其拆分并保存到“foobar_<123...>”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T08:03:40.147

如果您的应用程序不支持 '-' 作为文件名（它应该支持），那么另一种方法是使用命名管道，尽管我承认这看起来像使用大锤来破解坚果：

```
pipe='/tmp/pipe'
mkfifo "$pipe"

gpg --recipient someone@example.com --armor --output "$pipe" --encrypt example.pdf &

while read 
do
    echo "$REPLY"
done < $pipe

rm "$pipe" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T05:02:44.610

基于[gnupg 手册](http://www.gnupg.org/gph/en/manual/x110.html)

只需省略 --output。

# php - Joomla jdoc 包括不被识别

> ID：11200932
> 
> 赞同：-1
> 
> 时间：2012-06-26T04:51:48.250
> 
> 标签：php, joomla

我已将代码放在 Joomla 模板顶部的代码下方，但该位置未被识别。

```
<jdoc:include type="modules" name="topbanner" style="xhtml" /> 
```

我需要做些什么才能让这个职位出现在模块下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T05:00:22.867

确保您在 templateDetails.xml 中创建了上述位置

如果您还没有创建职位请这样做

```
<position>topbanner</position> 
```

# jquery - AJAXify：强制某些链接在没有 AJAX 的情况下加载

> ID：11200939
> 
> 赞同：0
> 
> 时间：2012-06-26T04:53:00.950
> 
> 标签：jquery, ajax, history.js

我正在使用 history.js 在我正在处理的网站上实现页面转换。

我有几个页面类型不能与 AJAXify 一起正常工作，因为它们需要额外的 javascript 文件并且它们没有主菜单。当它们被加载时，JavaScript 不会被拉入，AJAXify 会尝试保留菜单。如果我刷新页面，这些页面会按预期加载，所以我希望能够以标准方式加载页面。使用 AJAX 链接回网站的主要区域也会导致问题，因为它不会加载主导航。

我想知道的是：有没有像 jQuery Mobile 这样的东西`[data-ajax="false"]`可以添加到我不想用 AJAX 加载 URL 的链接中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:40:24.080

在 ajaxify-html5.js 中有：

```
// Ajaxify
$this.find('a:internal:not(.no-ajaxy)').click(function(event){
....
} 
```

这会将 AJAX 应用于每个没有“no-ajaxy”类的链接，所以我只是将这个类添加到我不想与 AJAX 链接的链接中。

简单的

# winapi - InvalidateRect/UpdateWindow 失败但 RedrawWindow 工作正常，为什么？

> ID：11200951
> 
> 赞同：1
> 
> 时间：2012-06-26T04:54:39.180
> 
> 标签：winapi, assembly

我是 Windows 编程的新手，几个月前开始研究文字游戏。我决定重写我的代码的 WM_PAINT 部分，我通常会不断地重绘整个客户区，但我想我会尝试重绘特定区域来减少闪烁。我注意到在我的代码的一个特定部分，InvalidateRect/UpdateWindow 似乎不想工作，但如果我用 RedrawWindow 替换这两个函数，它会完美显示。是否应该存在 InvalidateRect/UpdateWindow 无法工作但 RedrawWindow 可以正常工作的情况？

将我的代码中的所有 InvalidateRect/UpdateWindow 调用替换为 RedrawWindow 会有什么缺点吗？

感谢您的信息！

```
.if uMsg==WM_PAINT
    invoke BeginPaint,hWnd,ADDR ps
    mov hdc,eax

  .if (PAINT_DMGMSG>0)    ;contains ->to a char's DMGMSG     
    invoke CreateFont,16,12,0,0,400,0,0,0,OEM_CHARSET,OUT_DEFAULT_PRECIS,CLIP_DEFAULT_PRECIS,DEFAULT_QUALITY,DEFAULT_PITCH,NULL   
    invoke SelectObject,hdc,eax
    mov hfont,eax
    invoke SetTextColor,hdc,COLOR_SNOWWHITE

    mov esi,TS_MSG2
    mov edi,TS_MSG1
    mov ecx,len(TS_MSG2)
    rep movsb
    mov BYTE ptr [edi],0
    mov esi,TS_MSG3
    mov edi,TS_MSG2
    mov ecx,len(TS_MSG3)
    rep movsb
    mov BYTE ptr [edi],0
    mov esi,PAINT_DMGMSG
    mov edi,TS_MSG3
    mov ecx,len(esi)
    rep movsb
    mov BYTE ptr [edi],0

    invoke TextOut,hdc,0,500,TS_MSG1,len(TS_MSG1)
    invoke TextOut,hdc,0,518,TS_MSG2,len(TS_MSG2)
    invoke TextOut,hdc,0,536,TS_MSG3,len(TS_MSG3)
    mov PAINT_DMGMSG,0
  .endif

    invoke EndPaint,hWnd,ADDR ps

.elseif uMsg==WM_CHAR           ;used to handle keyboard input
  push wParam 
  pop  char

            .if(SDWORD ptr [ebx+OFFSET_ALLEGIANCE]<0)&&(DWORD ptr [ebx+OFFSET_STATUS]!=STAT_DEAD)
                invoke Combat,[esi+12],ebx
                mov ebx,[edi+4]
                mov eax,[human.color]
                mov [ebx+OFFSET_CHARCOLOR],eax

                mov ebx,pChar
                mov ebx,[ebx+OFFSET_MOBMEM]
                .if (DWORD ptr [ebx+OFFSET_MOBMEM_DMGMSG]>0)
                    mov ebx,[ebx+OFFSET_MOBMEM_DMGMSG]
                    mov XYrc.left,0
                    mov XYrc.top,500
                    push wWin
                    pop XYrc.right
                    mov XYrc.bottom,560       ;+font height

                    mov PAINT_DMGMSG,ebx
;                   invoke InvalidateRect,hWnd,ADDR XYrc,TRUE
;                   invoke UpdateWindow,hWnd
                    invoke RedrawWindow,hWnd,ADDR XYrc,NULL,NULL    ;<- WORKS FINE!  
                .endif                              
            .endif 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:24:00.567

假设您将`0`其用作（如您所做的那样）的最后一个参数`RedrawWindow()`，确实存在一个重要区别：

*   `UpdateWindow()``WM_PAINT`在函数返回之前立即发送。
*   `RedrawWindow()`（除非使用标志`RDW_UPDATENOW`）只是放置`WM_PAINT`到消息队列中，因此绘画实际上会在以后发生。

如果您使矩形无效，但随后更改窗口状态，这可能会有所不同。在情况 (1) 中，控件是使用“旧”数据绘制的，但 (2)“有效”。

如果您的问题是由这种差异引起的，您可以尝试`InvalidateRect()`仅使用 (不要调用`UpdateWindow()`, 也不`RedrawWindow()`。当队列中没有其他事件时，矩形失效将导致 then`WM_PAINT`将出现。(最初`UpdateWindow()`阻止了这种情况，因为立即`WM_PAINT`验证窗口作为绘画的副作用）。

# android - 蓝牙连接状态

> ID：11200955
> 
> 赞同：0
> 
> 时间：2012-06-26T04:54:56.887
> 
> 标签：android, bluetooth

我一直在寻找一段时间，似乎没有办法。但..

蓝牙设备的连接状态是否有任何意图过滤器？我尝试使用。`BluetoothAdapter.ACTION_CONNECTION_STATE_CHANGED`但这从未收到过。是的，我确实注册了意图过滤器。

在 logcat 中，我看到 BluetoothService 在设备连接后立即为“UUID”进行回调，结果为 1，但没有收到任何操作系统

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T05:04:29.043

试试下面，

```
import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.os.Bundle;
import android.widget.Toast;

public class BluetoothStatus extends Activity {
 /** Called when the activity is first created. */
 @Override
 public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);

  BluetoothAdapter bluetooth = BluetoothAdapter.getDefaultAdapter();

  String toastText;
  if (bluetooth.isEnabled()) {
   String address = bluetooth.getAddress();
   String name = bluetooth.getName();
   toastText = name + " : " + address;
  } else
   toastText = "Bluetooth is not enabled";

  Toast.makeText(this, toastText, Toast.LENGTH_LONG).show();

  bluetooth.setName("Enrichware");

 }
} 
```

详情： http: [//learnandroiddevelopment.blogspot.in/2011/02/android-how-to-find-bluetooth-status.html](http://learnandroiddevelopment.blogspot.in/2011/02/android-how-to-find-bluetooth-status.html)

使用 IntentFilter，示例：[如何以编程方式判断蓝牙设备是否已连接？(安卓 2.2)](https://stackoverflow.com/questions/4715865/how-to-programmatically-tell-if-a-bluetooth-device-is-connected-android-2-2)

# iphone - 更改 UIButton Images 获取按钮位置已更改

> ID：11200958
> 
> 赞同：0
> 
> 时间：2012-06-26T04:55:15.427
> 
> 标签：iphone, xcode, uibutton

我正在更改按钮单击时的 UIButton 图像，但它会从原始位置更改为左侧。我不知道为什么会这样。下面是按钮。当我选择第二个按钮时，它会改变图像并到达左侧。我该如何解决这个错误？

下面是我的代码

```
 -(IBAction)locationOneButtonAction{

UIImage *buttonImage = [UIImage imageNamed:@"radiogreen.png"];

UIImage *buttonImageOne=[UIImage imageNamed:@"radiowhite.png"];

[locationOneButton setImage:buttonImage forState:UIControlStateNormal];

[locationOneButton setImage:buttonImage forState:UIControlStateNormal];

[locationThreeButton  setImage:buttonImageOne forState:UIControlStateNormal];
[locationTwoButton  setImage:buttonImageOne forState:UIControlStateNormal];

[locationFourButton  setImage:buttonImageOne forState:UIControlStateNormal];

[locationFiveButton  setImage:buttonImageOne forState:UIControlStateNormal];
[locationSixButton  setImage:buttonImageOne forState:UIControlStateNormal];

resturantLocation=@"Common Man - Bedford, MA"; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T04:58:18.450

我不是百分百确定你的情况，但它通常是因为两个图像中的透明空间而发生的，请在 Photoshop 中重叠你的图像，并确保两个图像应该具有相同的边距并且应该具有相同的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T04:59:28.590

`setImage`不会拉伸您的图像以填充按钮的框架，它将设置为按钮的中心。

确保您的按钮的图像大小和框架相等。

否则，您可以使用`setBackgroundImage`它将拉伸您的图像以填充按钮框架。

# java - 从字符串中获取值

> ID：11200959
> 
> 赞同：0
> 
> 时间：2012-06-26T04:55:16.347
> 
> 标签：java, xml, regex, string

我有字符串值，因为我只需要获取没有逗号或分号的文本，如下面的示例输入：

```
<LINE>002:OR,004:0001,002:01,007:SCEM_02,000:, 002:PC;/</LINE> 
```

我的输出应该是这样的：

```
OR 0001 01 SCEM_02 PC 
```

(ie) 不用任何逗号、分号、冒号。

为此，我需要使用什么功能？等待你的回复。

问候， 喜悦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T05:15:52.260

在python中使用正则表达式

```
import re
re.findall(r'.*(:[\w]+,?)+', "<LINE>002:OR,004:0001,002:01,007:SCEM_02,000:, 002:PC;/</LINE> "); 
```

希望有帮助！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T01:06:34.350

解决方案是单行：

```
input.replaceAll("(^|,|;).*?(:(?!,)|$)", " ").trim(); 
```

这是正确使用正则表达式的问题。这个正则表达式基本上用空格替换“逗号/分号和冒号之间的所有内容，考虑开始/结束问题”

下面是一些测试代码：

```
public static void main( String[] args ) {
    String input = "<LINE>002:OR,004:0001,002:01,007:SCEM_02,000:, 002:PC;/</LINE>";
    input = input.replaceAll("(^|,|;).*?(:(?!,)|$)", " ").trim();
    System.out.println( input);
} 
```

输出：

```
OR 0001 01 SCEM_02 PC 
```

# java - java, oracle - 当一个数据库宕机时切换数据库

> ID：11200960
> 
> 赞同：0
> 
> 时间：2012-06-26T04:55:32.120
> 
> 标签：java, oracle

我曾经有一个带有两个数据库和一个集群的 RAC，所以我使用带有集群 ip 的 jdbc 瘦 url，它工作正常。

```
jdbc:oracle:thin:@(DESCRIPTION=
(ADDRESS=(PROTOCOL=TCP)(HOST=host)(PORT=1521))
(CONNECT_DATA=(SERVICE_NAME=service_name))) 
```

但由于某些原因，集群 ip 已关闭。

所以我想连接到两个数据库，所以我使用 jdbc 瘦 url 和两个主机，如下所示。

```
jdbc:oracle:thin:@(DESCRIPTION=
(LOAD_BALANCE=on)
(ADDRESS_LIST=
(ADDRESS=(PROTOCOL=TCP)(HOST=host1) (PORT=1521))
(ADDRESS=(PROTOCOL=TCP)(HOST=host2)(PORT=1521)))
(CONNECT_DATA=(SERVICE_NAME=service_name))) 
```

但是使用它有时连接到数据库有时会引发网络错误。但是，如果我与个别主机一起检查它们，两者都可以正常工作。

所以，我需要一种解决方法，当一个数据库宕机时，我可以在数据库之间动态切换。

# php - 我可能在哪里搞砸了 for 循环？

> ID：11200971
> 
> 赞同：-1
> 
> 时间：2012-06-26T04:57:46.500
> 
> 标签：php

这是我正在做的事情（php）

```
<?php

for($i = 0; $i <= 30; $i+2)
{
  echo $i;
}
?> 
```

它让我发疯，因为它不起作用[什么都不打印，浏览器一直试图加载]。但是，如果我更改`$i+2`为`$i++`，它可以工作，如果我将其更改为`$i+1`，那也不起作用。

我疯了。出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T05:01:47.043

> 它让我发疯，因为它不起作用[什么都不打印，浏览器一直试图加载]。但是，如果我更改`$i+2`为`$i++`，它可以工作，如果我将其更改为`$i+1`，那也不起作用。

`$i++`相当于`$i = $i + 1`，注意赋值运算符`=`，它不存在这里`$i + 2`添加但不更新...

因为`$i`永远不会更新，所以你有一个无限循环，脚本可能会达到允许的处理时间并终止。

[http://php.net/manual/en/function.set-time-limit.php](http://php.net/manual/en/function.set-time-limit.php)

> 设置允许脚本运行的秒数。如果达到此值，脚本将返回致命错误。默认限制为 30 秒，如果存在，则为 php.ini 中定义的 max_execution_time 值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T05:00:26.813

您需要更改`$i+2`为`$i = $i + 2`或`$i += 2`。 `$i++`意味着`$i += 1`。

```
for($i = 0; $i <= 30; $i += 2)
{
  echo $i;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T06:28:25.953

您需要在每次迭代后为 for 循环提供一些增量/减量值。$i+2 不会改变 i 的值。因此，在您的情况下发生的是 for 循环为每次连续迭代找到相同的 i 值。因此，永远不会满足终止条件。**因此 for 循环陷入了无限循环。**

更改：`$i+1`或。`$i=$i+1``$i+=1`

`$i++`实际上的意思`$i=$i+1`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T05:04:33.777

您必须更改为`$i=$i+2`，因为`$i++`等于`$i=$i+1`。

# dynamics-crm - 在 MS CRM 2011 的父页面中打开现有帐户记录

> ID：11200976
> 
> 赞同：-3
> 
> 时间：2012-06-26T04:58:14.163
> 
> 标签：dynamics-crm, dynamics-crm-2011

如何在父页面本身中打开现有帐户记录，而不是在新的弹出窗口中打开。

请。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:56:40.580

[CRM SDK](http://msdn.microsoft.com/en-us/library/gg328483.aspx)向您展示了如何在给定记录 ID 的情况下获取记录的 URL 。

`window.location`使用 JScript，您可以通过（[请参阅此处](http://www.tizag.com/javascriptT/javascriptredirect.php)）设置当前页面位置：

```
window.location = myNewUrl; 
```

# php - 防止数据库中的重复

> ID：11200978
> 
> 赞同：-6
> 
> 时间：2012-06-26T04:58:35.300
> 
> 标签：php, database

我正在制作一个简单的学生管理系统，它有四种形式。如何防止数据库中的重复条目？我想防止重复，我应该在代码中添加什么？

```
<html>
 <head>
      <title>Student list</title>
          <link href="stylesheets/public.css" media="all" rel="stylesheet" type="text/css"/>
 </head>
<body id="background">
  <table >
     <tr>
     <td>
     <img src=" images/Picture3.png" width="1300" height="150"/>
 </td>
     </tr>
  </table>
             <table>
             <tr>

 <td id="structure">
 <? 
  $name=$_POST['name']; 
  $email=$_POST['email']; 
  $shift=$_POST['shift'];
  $class=$_POST['class'];
  $id=$_POST['id'];
  ?><?php

 $var= mysql_connect("localhost", "root", "") or die(mysql_error()); 
  mysql_select_db("database") or die(mysql_error());

$username = $_POST['name']; // you must escape any input. Remember.

$query = "SELECT * FROM `data` WHERE `$name` = '{name}'";

$result = mysql_query($query);

if ( mysql_num_rows ( $result ) > 1 )
{
    /* Username already exists */
    echo 'Username already exists';
}
else
{

  mysql_query("INSERT INTO `data`(name,email,shift,class) VALUES ('$name', '$email', '$shift','$class')"); }

  Print "Your information has been successfully added to the database."; 
  ?>
  <?php 
  // Connects to your Database 
  mysql_connect("localhost", "root", "") or die(mysql_error()); 
  mysql_select_db("database") or die(mysql_error()); 
  $data = mysql_query("SELECT * FROM data") 
  or die(mysql_error()); 
  Print "<table border cellpadding=5>"; 
  while($info = mysql_fetch_array( $data )) 
  {

  Print "<tr>";
  Print "<th>Id:</th><td>".$info['id']."</td>";
  Print "<th>Name:</th> <td>".$info['name'] . "</td> "; 
  Print "<th>Email:</th> <td>".$info['email'] . " </td>";
  Print "<th>shift:</th> <td>".$info['shift'] . " </td>";
  Print "<th>class:</th> <td>".$info['class'] . " </td>";
  Print "<tr><td><a href='update.php?id={$info['id']}'>EDIT</a></td></tr>";
  PRINT "<tr><td><a href='delete.php?id={$info['id']}'>DELETE</a></td></tr>";

  } 
  Print "</table>"; 
  ?>
  </td></tr>
  </table>
 </body></html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T07:25:42.843

我更新你的代码。

```
<?php
    mysql_connect("localhost", "root", "") or die(mysql_error()); 
    mysql_select_db("database") or die(mysql_error());
?>
<html>
<head>
<title>Student list</title>
<link href="stylesheets/public.css" media="all" rel="stylesheet" type="text/css"/>
</head>
<body id="background">
<table >
  <tr>
    <td><img src=" images/Picture3.png" width="1300" height="150"/></td>
  </tr>
</table>
<table>
  <tr>
    <td id="structure">
    <? 
    // check for post data
    if( isset($_POST['name']) && isset($_POST['email']) && isset($_POST['shift']) && isset($_POST['class']) && isset($_POST['id']) )
    {
        $name=$_POST['name']; 
        $email=$_POST['email']; 
        $shift=$_POST['shift'];
        $class=$_POST['class'];
        $id=$_POST['id'];

        $username = $_POST['name']; // you must escape any input. Remember.

        $query = "SELECT * FROM `data` WHERE `name` = '".$username."'";

        $result = mysql_query($query);
        // check for duplicate
        if ( mysql_num_rows ( $result ) > 1 )
        {
            echo 'Username already exists';
        }
        else
        {
            // insert new record
            mysql_query("INSERT INTO `data`(name,email,shift,class) VALUES ('".$name."', '".$email."', '".$shift."','".$class."')");  
            print "Your information has been successfully added to the database."; 
        }
    }

    // list data
    $data = mysql_query("SELECT * FROM data")  or die(mysql_error()); 
    print "<table border cellpadding=5>"; 
    while($info = mysql_fetch_array( $data )) 
    {
        print "<tr>";
        print "<th>Id:</th><td>".$info['id']."</td>";
        print "<th>Name:</th> <td>".$info['name'] . "</td> "; 
        print "<th>Email:</th> <td>".$info['email'] . " </td>";
        print "<th>shift:</th> <td>".$info['shift'] . " </td>";
        print "<th>class:</th> <td>".$info['class'] . " </td>";
        print "<tr><td><a href='update.php?id={$info['id']}'>EDIT</a></td></tr>";
        print "<tr><td><a href='delete.php?id={$info['id']}'>DELETE</a></td></tr>";
    } 
    print "</table>"; 

  ?>
  </td>
  </tr>
</table>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T05:01:29.743

创建数据库时，可以为任何列指定“唯一”约束。例如，请参阅[http://www.w3schools.com/sql/sql_unique.asp](http://www.w3schools.com/sql/sql_unique.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T05:18:36.540

首先，您必须确定不应重复记录的哪一列。就像名字可以有重复一样，出生日期也可以。但 SSN 不能重复。或者可能基于您的业务逻辑，列集不能重复，例如 firstname、lastname、dob 和 FathersName 的组合不能重复。

在您在数据库中创建表时决定这一点后，您必须应用[唯一约束](http://www.w3schools.com/sql/sql_unique.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T05:24:55.610

如果您想只显示**唯一记录**，那么：

```
SELECT DISTINCT (Column1,Column2, ...) FROM Data 
```

如果您正在考虑以添加/插入/仅使用唯一记录的方式修改表，那么 [**唯一约束**](http://www.w3schools.com/sql/sql_unique.asp)就可以了。

问候。

---X----
*在您的代码中：*

```
$username = $_POST['name']; // you must escape any input. Remember.

$query = "SELECT * FROM `data` WHERE `$name` = '{name}'"; 
```

您已将名称存储在 $username 并使用 $name
它应该：

```
$query = "SELECT * FROM `data` WHERE `name` = '$username'"; 
```

# c# - 如果选定的单元格在同一列中，请执行某些操作

> ID：11200979
> 
> 赞同：0
> 
> 时间：2012-06-26T04:58:49.527
> 
> 标签：c#, winforms, datagridview

只有在同一列中选择的DGVCells时，才能执行某些内容：

```
foreach (DataGridViewCell c in dgvC.SelectedCells)
if (c.ColumnIndex is the same) // how to say this ? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T05:07:13.433

一段时间没有回复，这是我的解决方案，我认为它不够优化，但我认为它可以完成工作

```
int columnIndex = dgvC.SelectedCells[0].ColumnIndex;
bool sameCol = true;
for(int i=0;i<dgvC.SelectedCells.Count;i++)
    {
        if(dgvC.SelectedCells[i].ColumnIndex != columnIndex)
         {
           sameCol = false;
           break;
          }
     }
 if (sameCol)
     {
       MessageBox.Show("Same Column");
     }
  else
     {
       MessageBox.Show("Not same column");
     } 
```

编辑：您也可以尝试：

```
 int columnIndex = dgvC.SelectedCells[0].ColumnIndex;
    if (dgvC.SelectedCells.Cast<DataGridViewCell>().Any(r => r.ColumnIndex != columnIndex))
    {
        //Not same
    }
    else
    {
        //Same
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T05:09:04.640

您可以使用 GroupBy 确保单元格来自同一列

```
if(dgvC.SelectedCells.Cast<DataGridViewCell>()
            .GroupBy(c => c.ColumnIndex).Count() == 1)
{
   foreach (DataGridViewCell c in dgvC.SelectedCells)
     //your code
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T05:06:48.240

像这样的基本东西应该可以工作：

```
 Boolean allCells = true;
        int colIndex = dgvC.SelectedCells[0].ColumnIndex;

        foreach (DataGridViewCell c in dgvC.SelectedCells)
        {
            if(c.ColumnIndex != colIndex)
            {
                allCells = false;
            }
        }

        if(allCells)
        {
            //do stuff here
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T05:12:39.920

试试这个。

```
for (int i=0; i < dgvC.SelectedCells.Count; i++ )
{
    int currentCellColumnIndex = dgvC.SelectedCells[i].ColumnIndex;
    for (int j=i+1; j < dgvC.SelectedCells.Count-1; j++) 
    {
         if(currentCellColumnIndex ==  dgvC.SelectedCells[j])
         {
            //Same column 
            //dgvC.SelectedCells[i] and all dgvC.SelectedCells[j] have same column

         } 
    }
} 
```

# yii - 在 yii 应用程序的上下文中在 yii shell 中执行 yii 类方法

> ID：11200980
> 
> 赞同：0
> 
> 时间：2012-06-26T04:58:53.723
> 
> 标签：yii

是否可以在 yii shell 中执行 yii 类或实例方法。

比如说，我想打印一个表的所有记录，这个命令是`Post::model()->findAll`. 但是我可以在 yii 的 shell 中，在 yii web 应用程序的上下文中执行这个吗？

此外，是否可以在 yii shell 中访问 yii 应用程序（如 db）的组件。

简而言之，我想在 yii 应用程序的上下文中执行一些 yii 方法（很像在 firebug 控制台中执行小的 javascript 语句）。

**编辑 1** 找到一个解决方案，如下所述：

```
php C:\xampp\htdocs\trackstar\protected\yiic shell C:\xampp\htdocs\trackstar\protected\config\main.php 
```

然后执行 yii 命令。

**编辑 2**

```
echo Project::model()->findByPk(3); 
```

给出错误`object of class project cant be converted to string`。有什么方法可以在控制台中打印或漂亮地打印 yii 对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:00:59.363

这与 Yii 无关。这是一个php问题。无论如何，你可以试试这个 -

```
var_dump(Project::model->findByPk(3));
    // or 
print_r(Project::model->findByPk(3)); 
```

或者更好的是仍然使用 yii 的 CVarDumper -

```
CVarDumper::dump(Project::model->findByPk(3); 
```

CVarDumper 文档 - [http://www.yiiframework.com/doc/api/1.1/CVarDumper](http://www.yiiframework.com/doc/api/1.1/CVarDumper)

# c# - 如何使用 MVVM 将数据正确绑定到 WPF 按钮

> ID：11200990
> 
> 赞同：0
> 
> 时间：2012-06-26T05:00:54.597
> 
> 标签：c#, wpf, mvvm

这是我的设置，看来我没有正确绑定数据。结果应该是一个显示图像和文本的按钮。什么都没有显示。

```
<UserControl x:Class="AmebaPrototype.UI.LandingPivot.featureControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="330" d:DesignWidth="960"
         DataContext="{Binding Source={StaticResource viewModelLocator}, Path=VideoViewModel}"
         >
<UserControl.Resources >
    <DataTemplate x:Key="custTemplate" >
        <StackPanel >
            <Image Source="{Binding ImagePath}"/>
            <TextBlock Text="{Binding MyTitle}"/>
        </StackPanel>          
    </DataTemplate>
</UserControl.Resources>

<Grid x:Name="LayoutRoot" Background="{x:Null}" >
    <Button Content="Button" Height="316" 
            HorizontalAlignment="Left" Margin="12,2,0,0" 
            Name="button1" VerticalAlignment="Top" 
            Width="423" Click="button1_Click" 
            ContentTemplate="{DynamicResource custTemplate}"
            />
    <Button Content="Button" Height="156" HorizontalAlignment="Left" Margin="441,2,0,0" Name="button2" VerticalAlignment="Top" Width="208" Click="button2_Click" />
    <Button Content="Button" Height="156" HorizontalAlignment="Left" Margin="669,2,0,0" Name="button3" VerticalAlignment="Top" Width="208" />
    <Button Content="Button" Height="156" HorizontalAlignment="Left" Margin="441,162,0,0" Name="button4" VerticalAlignment="Top" Width="208" />
    <Button Content="Button" Height="156" HorizontalAlignment="Left" Margin="669,162,0,0" Name="button5" VerticalAlignment="Top" Width="208" />
</Grid> 
```

* * *

模型：

```
public class Video
    {
        public string  MyTitle { get; set; }
        public string ImagePath { get; set; }
    } 
```

* * *

视图模型

```
 public ViewModel VideoViewModel 
    {
        get 
        {
            if(viewmodel == null)
            {
                viewmodel = new ViewModel();
                viewmodel.ListData.Clear();
                viewmodel.ListData.Add(new Video { MyTitle = "Title1", ImagePath = "exampleimage.com/image.png" });
                 viewmodel.ListData.Add(new Video { MyTitle = "Title2", ImagePath = "exampleimage.com/image.png" });

            }

            return viewmodel;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T05:15:05.273

如果您真的想使用 DataTemplate 执行此操作，则：

```
<Button>
        <Button.Content>
            <x:Type TypeName="Visual"/>
        </Button.Content>
        <Button.Template>
            <ControlTemplate TargetType="{x:Type Button}">
                <Grid>
                    <ContentPresenter ContentSource="Content"/>
                </Grid>
            </ControlTemplate>
        </Button.Template>
        <Button.ContentTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Path=Name}"/>
            </DataTemplate>
        </Button.ContentTemplate>
    </Button> 
```

您的 ViewModel 绑定应该可以在这里使用，因此在 DataTemplate 中您可以调整它以包含您的 Image 和 TextBlock。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T14:27:58.090

资源中的数据模板：

```
<DataTemplate x:Key="bTemplate">
        <Button Label="{Binding MyTitle}" 
                Command="{Binding Execute}"> 
           <Image Source="{Binding ImagePath}"   />
        </Button>
 </DataTemplate> 
```

与您的问题不完全一样，但是您可以使用带有 ItemSource 的控件，例如 ListView：

```
<ListView 
  ItemsSource="{Binding ListData}"  
  ItemTemplate="{StaticResource bTemplate}" 
>
</ListView> 
```

我添加了一个 Command ，因为如果你想实现 MVVM 而不是事件点击，这是必要的。

# objective-c - NSButton 和 NSImageView 中的图像模糊

> ID：11200992
> 
> 赞同：4
> 
> 时间：2012-06-26T05:01:24.470
> 
> 标签：objective-c, macos, image, cocoa, interface-builder

我在这里完全被难住了；我有一系列我正在修补并制作成按钮的小图像：

![在此处输入图像描述](../Images/3bc0e0f529dc4f2bd33cc6d1801a78ae.png)

正如你所看到的，它们都非常清晰和锐利，当我在预览中打开 png 文件时，它们都保留了这一点。

但是，当我在 Interface Builder 中使用它们时，将 Scaling 设置为 None `NSButtons`：`NSImageViews`

![在此处输入图像描述](../Images/46244fdf8750ef89c0149e7a9f08d5eb.png)

图像变得非常模糊。我究竟做错了什么？我不知道从哪里开始以及尝试什么；我应该回到图标并尝试使它们像素完美吗？它是否与抗锯齿或类似的东西有关？

* * *

**编辑：** 出于某种原因，似乎 NSButtons 和 NSImageViews 正在加载图像的高分辨率版本，即使我在正常显示上，这可以通过我添加到它们的浅蓝色笔划来识别。出于某种原因，Quartz Debug 不会将这些识别为高分辨率图像，并且没有红色调。删除对@2x 图像的引用确实可以解决问题……但是……

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T08:20:32.143

如果您查看第一部分`WWDC 2012`视频中的会话 245，您会发现原因。`Advanced Tips and Tricks for High Resolution on OS X``NSImage`

`NSImage`没有任何高分辨率的概念——它只使用像素比它必须填充的空间更多的最小图像——所以如果你`NSImageView`的尺寸大于你的 1x 图像，它将使用 2x 图像，因为它有更多像素.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T07:46:29.240

我以前有这个问题。看起来如果你的图像的 DPI 不是 72，那么图像大小就会出错。您可以使用下面的代码获得实际尺寸。

```
NSImage *image = [NSImage imageNamed:@"image"];
NSBitmapImageRep *rep = [NSBitmapImageRep imageRepWithData:[image TIFFRepresentation]];
NSSize size = NSMakeSize([rep pixelsWide], [rep pixelsHigh]);
[image setSize: size]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T13:57:35.947

在 Interface Builder 和 中指定图像名称时`[NSImage imageNamed:]`，请确保使用`foo`而不是`foo.png`. 虽然 iOS 足够聪明，可以`@2x`在后一种情况下添加，但 Mac OS X 不是。它将在后一种情况下加载非视网膜图像，但会`@2x`在第一种情况下添加（如果存在这样的图像）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T14:34:42.990

您是`Buttons`在 IB 中还是在 Code 中分配图像？

如果您在代码中执行此操作，则可能会创建图像的副本（例如`[myImage copy]`），并将该副本分配给您的按钮可能会解决此问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T12:33:39.387

就我而言（在自定义 NSOutlineView 中绘制图标），我必须确保 drawRect 的 x,y 原点四舍五入为 int 值：

```
NSMakeRect( round(NSMinX(cellFrame)-iconSize.width), 
round(NSMidY(cellFrame)-(iconSize.height/2.0f)), …); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T18:12:31.857

这实际上是对之前关于 DPI 的帖子的回应，但我无法直接回复它。那篇文章中的代码为我提供了真实的像素尺寸（也就是说，它没有表示任何问题）。但是，图像 DPI 绝对是我的罪魁祸首。我看到的症状是：

*   当我的 NSImageViews 设置为 No Scaling 时，图像会被压扁。
*   将我的 NSImageViews 设置为 Axes Independently，如果 NSImageViews 的尺寸设置为与图像的尺寸完全匹配，大多数图像都会正确显示。
*   然而，即使在这种情况下，一些图像中也有奇怪的伪影，当通过 Preview 或其他地方（或者甚至通过 Interface Builder，就此而言——它们只出现在运行时）查看相同的图像时，这些伪影并不存在。

出现问题的图像的 DPI 不是 72。当我以 72 DPI 重新创建图像时，上述所有行为都消失了。

这是一个非常令人困惑的问题——我希望这对某人有所帮助！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-03T05:52:02.547

对我来说，我只需要将图像缩放设置为无：

在界面生成器中

![在此处输入图像描述](../Images/718128ba89cddc92bff6befe66c8e592.png)

在代码中

```
NSImageCell *image;
[image setImageScaling:NSImageScaleNone];

NSButtonCell *button;
[button setImageScaling:NSImageScaleNone]; 
```