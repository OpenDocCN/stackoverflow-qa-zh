# StackOverflow 问答 11114000-11114999

# android - Android图像幻灯片，翻转

> ID：11114004
> 
> 赞同：0
> 
> 时间：2012-06-20T06:31:32.687
> 
> 标签：android, image, flip

我看到很少有安卓应用程序的界面与 itune 相似（如附件），用户可以通过向左或向右滑动搜索图像，并通过单击查看大图。我尝试在 google 上找到带有几个关键字的示例，例如`viewflipper, image slideshow... etc`，我在过去 2 小时内一直在这样做。结果？没有任何。:(

![iTunes](../Images/2ba643b738a53ef79292a52e057f5dcd.png)

有人可以给我一个正确的关键字如何在 android 上执行此操作吗？非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T06:33:58.760

它被称为“CoverFlow”（是的，感谢 Apple！）。[这里](http://code.google.com/p/android-coverflow/)有一个关于 Google Code 的小部件（我没试过），或者你可以试试用[谷歌搜索](https://www.google.ca/search?q=android+coverflow)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T06:34:06.650

试试这个关键字“coverflow”。它可以帮助你。

谢谢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T06:36:05.923

尝试图像轮播android关键字

# c# - Gridview 不接受 dd.MM.yyyy 值，但在使用 MM.dd.yyyy 进行 1 次更新后，它允许

> ID：11114005
> 
> 赞同：0
> 
> 时间：2012-06-20T06:31:44.673
> 
> 标签：c#, asp.net, sql

我有一个gridview 和sqldatasource。我有一个列类型：日期。该列是 itemtemplate

```
<asp:TextBox ID="IRR" runat="server" MaxLength="10" 
                        Text='<%# Bind("IRR", "{0:d}") %>'></asp:TextBox> 
```

区域设置，日期设置为格式：`dd.MM.yyyy`

当我在 gridview 中添加日期值时，格式`dd.MM.yyyy`出现错误：

```
Conversion failed when converting date and/or time from character string. 
```

但是，如果我以格式添加日期值，`MM.dd.yyyy`并且在 update 之后再次编辑该值，它将允许`dd.MM.yyyy`值。

有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:27:31.813

@Jax：使用以下代码：

```
<asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("DOB", "{0:dd/MM/yyyy}") %>'></asp:TextBox> 
```

# c# - 使用 Entity Framework 4.0 添加标量属性得到 3004 错误

> ID：11114006
> 
> 赞同：2
> 
> 时间：2012-06-20T06:31:46.527
> 
> 标签：c#, asp.net, entity-framework, entity-framework-4, entity-framework-4.1

我使用 Entity Framework 4.0 在表中添加了标量属性，出现与表映射相关的 3004 错误。如何在表中手动添加映射？

我学到了很多东西并了解了许多技巧，例如删除和更新模型等，但我想知道添加手动映射。

我已经在 SSDL 和 MSL 文件中添加了与新标量实体相关的属性，但仍然出现错误。

知道为什么吗？

# android - 如何跟踪 Gmail 用户的 Online_Status？

> ID：11114008
> 
> 赞同：3
> 
> 时间：2012-06-20T06:31:51.893
> 
> 标签：android, gmail, contacts, status

嗨，我正在制作一个需要获取用户的 gmail 帐户联系人列表和 online_status 的应用程序。我已经在网上搜索了最后我从这段代码中获得了与我的帐户相关的所有联系人的列表

```
Cursor emailCur = cr.query( ContactsContract.CommonDataKinds.
                                                  Email.CONTENT_URI, null,
ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = ?", 
                                                  new String[]{_id}, null);         
while (emailCur.moveToNext()) { 

   String email = emailCur.getString(
                emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));          
   String emailType = emailCur.getString(
   emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.TYPE)); 

} 
emailCur.close(); 
```

现在，我想获取这些联系人的在线状态**（可用、忙碌、空闲、不可用）** .. 我该怎么做...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:54:06.680

```
String status=ContactsContract.CommonDataKinds.Email.CONTACT_PRESENCE; 
```

这将给出状态。

联系 IM 在线状态。这些值为：

*   离线 0
*   隐形 1
*   客场2
*   空闲 3
*   DO_NOT_DISTURB 4
*   可用 5

# php - mysql select查询选定字段中多个值的1

> ID：11114013
> 
> 赞同：0
> 
> 时间：2012-06-20T06:32:14.193
> 
> 标签：php, mysql

我有另一个表格来上传具有多个值 (10) 的 1 个产品的详细信息，但假设我们选择 New Arrival、Black、White 并上传到数据库。所以现在我的数据库将字段名称为“类别”，其值为新到货、黑色、白色。

现在我想做一个搜索功能，但每当我尝试运行它时，它就不会显示结果。所以我做了2条记录，其中：

具有字段类别和值“新到货”的第一个记录 第二个具有字段类别和值“新到货，黑色，白色”的记录

当我再次尝试运行我的代码时，它确实返回了第一条记录的结果，我尝试为几行复制相同的记录，结果它只能返回类别字段只有 1 个值的结果。

以下只是我的代码的一小部分：

我为类别字段添加记录表单输入是：

add_new.html

```
<select name="category[]" size="10" multiple="multiple">
<options>New Arrival</options>
<options>Black</options>
<options>White</options>
</select> 
```

add_process.php

```
$category = implode(", ", $_POST['category']);
$strSQL = "INSERT INTO products_list (category) VALUES ('$category')"; 
```

search_form.html

```
<input type="text" name="search_text" />
<input type="submit" name="submit" /> 
```

search_process.php

```
$category = mysql_real_escape_string($_POST['product_category']);
$select = mysql_query("select image1, image2, image3, image4 from products_list WHERE category IN ('new arrival') ORDER BY id ASC");

while($row=mysql_fetch_array($select)) {

    echo $row['image1'];
    echo $row['image2'];
    echo $row['image3'];
    echo $row['image4'];

} 
```

重复我的问题，如何获得该类别字段中包含（期望值）的行的结果？

下一个问题是，类别值仅在数据库中存储为“新到货”，如果我只输入“到货”而不是全名，如何获得返回结果？目前，如果我只输入“到达”，它也不会返回任何结果。

希望你们明白我想说什么。提前谢谢各位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T06:58:32.573

塞尔 说：

```
$select = mysql_query("select image1, image2, image3, image4 from products_list WHERE category like '%new arrival%' ORDER BY id ASC"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T07:53:37.547

为了方便参考，我把解释放在这里。

```
$catsearch = $_POST["category"]; 
$keywords = explode(' ', $catsearch);  //if keywords entered is "white black new", will convert to array of "white","black","new". The delimiter here is the space.
$keywordsBits = array(); 
foreach ($keywords as $keyword) { 
          $keyword = trim($keyword); 
          if (!empty($keyword)) { 
                $keywordsBits[] = "category LIKE '%$keyword%'"; 
          } 
} 

$result = mysql_query("SELECT * FROM products_list WHERE ".implode(' OR ', $keywordBits)); 
```

这将导致类似的查询

```
SELECT * FROM products_list WHERE category LIKE '%white%' OR category LIKE '%black%' OR category LIKE '%new%' 
```

如果你想用“，”分隔关键字，你可以使用

```
$keywords = explode(',', $catsearch);  //if keywords entered is "white,black,new arrival", will convert to array of "white","black","new arrival". The delimiter here is the comma. 
```

谢谢。

# javascript - 有没有办法在 Internet Explorer 上更快地加载 javascript 和选择表

> ID：11114014
> 
> 赞同：1
> 
> 时间：2012-06-20T06:32:15.403
> 
> 标签：javascript, jquery, jquery-ui

我正在尝试用表格制作脚本，更快地在 Internet Explorer 上工作！！在铬上工作正常。有什么建议么？？

您可以在此处查看现场演示[http://megatrixads.com/cbm](http://megatrixads.com/cbm)

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T07:00:09.953

正如上面的答案所说。尝试使用分析器。我一直在阅读 JS 的性能改进。这是一本[很棒的书](http://shop.oreilly.com/product/9780596802806.do)

我检查了你的代码，你可以做一些事情。

更快地呈现页面。首先添加所有 JS，而不是在 HEAD 中，但在所有 te 标记之后。所以在中心标签之后！这样 HTML/css 将在 JS 开始执行之前被加载/渲染。JS 的加载将停止所有渲染，因为 JS 能够更改 DOM 中的内容。

尝试使用 document.ready()

尝试将所有 JS 放在 1 个文件中并最小化或打包它 => 它将改善对服务器的请求的负载/nr。

我看到在您的 selectable() 语句中，您经常调用 $('.ui-selected') 和 $('.ui-selected').length() => 将此 el 存储在变量中。所以只要做 var $ui_selected = $('.ui-selected'); 这样 Jquery 就不会每次都搜索 DOM 来选择这个元素！（顺便说一下，使用类来查找元素的性能不如使用 #ID

我希望这些技巧对你有用！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T06:49:41.313

考虑在 IE9 中使用内置的 Profiler：

F12（或工具-> 开发者工具）-> 探查器-> 开始探查。

如果您需要 IE7/IE8 更快地渲染，您仍然可以尝试在 IE9 中进行分析，看看是否存在明显的性能问题（例如对特定函数的调用过多）。请注意，大多数库对于 IE6-8 等旧版浏览器都有特殊的代码路径，因此在 IE9 中使用开发工具时可能需要强制浏览器/文档模式为 IE7/8 以查找特定问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T11:28:49.317

我已经测试过从 js 对象生成地图，它在 IE 中就像一个魅力。

这是我用来从您的 html 生成地图对象的代码（我在运行它之前已经编辑了第一个 tr，所以它会生成正确的结果，tr 与 td 的格式与所有其他格式相同，使用 colspan）

```
$(document).ready(function() {

   var trIndex = 0,
       mapObj = {},
       tdIndex = 0;; 

   $table = $('.selectable');

   $('tr', $table).each(function() {
       mapObj[trIndex] = [];
       tdIndex = 0;
       $('td', $(this)).each(function() {
           if($(this).attr('colspan') > 0) {
               mapObj[trIndex][tdIndex] = {colspan: $(this).attr('colspan')}
           } else {
               mapObj[trIndex][tdIndex] = {id: $(this).attr('id')}
           }
           tdIndex++;
       });
       trIndex++;
   })
   console.log(JSON.stringify(mapObj));
}); 
```

然后我用这个对象来生成表，你需要的表是：

```
<table width="1160px" height="695px" class="selectable"></table> 
```

生成地图的 JavaScript，因为生成的对象太大而无法在此处发布，所以我放了一把。这是链接：http: [//jsfiddle.net/u8AwJ/](http://jsfiddle.net/u8AwJ/)

当然代码可以优化更多，但目前时间对我来说是有限的。

这仅与生成地图有关（我已经删除了您的操作，因此我可以使其工作 - 我的意思是渲染）。你可以把那部分加回去。

# silverlight - Silverlight DomainContext 使用两个单独的 DomainDataSources 加载

> ID：11114015
> 
> 赞同：0
> 
> 时间：2012-06-20T06:32:15.630
> 
> 标签：silverlight, submitchanges, domaindatasource, domaincontext

我对 DataContext 感到困惑，希望有人确认或发表评论。

用简单的英语来说，我相信 DataContext 是一个容器，可以在加载时填充实体。

例如，我有两个名为`Customers`和的实体`Orders`。我现在声明一个新的 DomainContext

```
var ctx = new MyWebServices.MyDomainContext(); 
```

`Customers`我像这样加载`DomainDataSource`：

```
DomainDataSource ddsCustomer = new DomainDataSource();
ddsCustomer.context = ctx;
ddsCustomer.query = ctx.LoadCustomerQuery();
ddsCustomer.Load(); 
```

**现在，如果我使用相同的域上下文**加载订单

 **```
DomainDataSource ddsOrder = new DomainDataSource();
ddsCustomer.context = ctx;
ddsCustomer.query = ctx.LoadOrdersQuery();
ddsCustomer.Load(); 
```

在我提交更改后`ctx.SubmitChanges()`，DomainContext 会返回服务器并将**所有更改**提交到服务器，包括客户和订单吗？甚至对这两个实体都添加了新记录并对其进行了现有编辑？

我是 Silverlight 的新手，想要对 DataContext 的工作原理有一个明确的概念，我已经阅读了白皮书，但可能找不到我正在寻找的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:34:09.733

是的，`myDataContext.SubmitChanges()`对已加载到 DomainContext 集合中的任何实体调用受保护的 Ria.Entity.AcceptChanges() 方法。**

# x86 - __popcnt() 和 _mm_popcnt_u32() 有什么区别？

> ID：11114017
> 
> 赞同：11
> 
> 时间：2012-06-20T06:32:26.317
> 
> 标签：x86, sse, intrinsics, sse4

MS Visual C++ 在 SSE4.2 的 CPU 上支持 2 种 popcnt 指令：

1.  [`__popcnt()`](http://msdn.microsoft.com/en-us/library/bb385231%28v=vs.90%29.aspx)
2.  [`_mm_popcnt_u32()`](http://msdn.microsoft.com/en-us/library/bb514083%28v=vs.90%29.aspx)

我发现的唯一区别是文档`__popcnt()`被标记为“Microsoft 特定”，并且`_mm_popcnt_u32()` [似乎是一个内在命令名称](http://software.intel.com/sites/products/documentation/hpc/composerxe/en-us/cpp/lin/intref_cls/common/intref_sse42_ATA.htm)（非 MS 特定）。

这是唯一的区别，MS`__popcnt()`只调用 HW`_mm_popcnt_u32()`吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-21T02:07:10.130

**多亏了 Intel 和 AMD，这是同一机器指令的两个不同的内在名称。** 该指令在所有支持它的 CPU 上都是相同的，并且不同的内在函数在 C 或 C++ 中也没有区别。

* * *

__popcnt*() 内置函数用于 AMD 的高级位操作 (ABM) 指令。请参阅[http://blogs.amd.com/developer/2007/09/26/barcelona-processor-feature-advanced-bit-manipulation-abm/](http://blogs.amd.com/developer/2007/09/26/barcelona-processor-feature-advanced-bit-manipulation-abm/)

_mm_popcnt_u*() 内部函数用于 Intel 的实现，它本身不是 SSE4.2 的一部分，但大约在同一时间实现。见[http://en.wikipedia.org/wiki/SSE4#POPCNT_and_LZCNT](http://en.wikipedia.org/wiki/SSE4#POPCNT_and_LZCNT)

根据[https://www.chessprogramming.org/Population_Count](https://www.chessprogramming.org/Population_Count)，这两种实现都是二进制兼容的，尽管它们的内在名称不同。

英特尔的[架构手册](http://download.intel.com/products/processor/manual/325462.pdf)指出：

> 在应用程序尝试使用 POPCNT 指令之前，它必须检查处理器是否支持 SSE4.2（如果 CPUID.01H:ECX.SSE4_2[bit 20] = 1）和 POPCNT（如果 CPUID.01H:ECX.POPCNT[bit 23 ] = 1)。

AMD 的[AMD64 架构程序员手册第 3 卷：通用和系统说明](http://support.amd.com/us/Processor_TechDocs/24594_APM_v3.pdf)说

> CPUID 函数 0000_0001h 返回的 ECX 位 23 (POPCNT) 指示对 POPCNT 指令的支持。在使用 POPCNT 指令之前，软件必须在每个程序或库初始化时检查一次 CPUID 位，否则可能会导致不一致的行为。

我看不出 popcnt 需要 SSE4.2 存在的任何原因，所以我认为检查 ECX 的第 23 位足以确定 popcnt 的存在。

* * *

AMD 的巴塞罗那，第一个拥有 popcnt 的 AMD CPU，没有完全实现 SSE4，所以英特尔的架构手册有可能提出了一种确定存在的方法，该方法适用于英特尔 CPU，但即使在合格的 AMD CPU 上也会失败。

**英特尔在其第 2 卷指令集参考手册中的当前[文档`popcnt`](http://www.felixcloutier.com/x86/POPCNT.html)`#UD If CPUID.01H:ECX.POPCNT [Bit 23] = 0`**`popcnt`仅说明了导致软件无法在没有 SSE4.2 的某些 AMD CPU 上利用的反竞争建议已不复存在。

# c - Eclipse中C/C++的编译错误

> ID：11114019
> 
> 赞同：0
> 
> 时间：2012-06-20T06:32:39.197
> 
> 标签：c, build, include-path

我正在尝试编译一个包含目录的代码，其中包含一些头文件。一个头文件被引用为：

```
#include <include/A/example.h> 
```

在其中一个文件中。我还添加了`example.h`Eclipse 中文件夹的正确路径： `Project -> Properties -> Includes`

但是，当我尝试构建时出现此错误：

> 致命错误：home/TJ/workspace/myProject/include/A/example.h：没有这样的文件或目录

有人知道我为什么会收到此错误吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T06:37:05.843

您是否将目录**/home/TJ/workspace/myProject 添加**到路径中，而不是其他内容，例如**home/TJ/workspace/myProject**（注意缺少的前导斜杠）或**/home/TJ/workspace/myProject/include/一个**？

另外，请记住 #include 指令中的 <> 表示标准包含文件，所以也许您应该使用“”？

# c# - Silverlight - 从用户控件保存鼠标悬停数据

> ID：11114022
> 
> 赞同：0
> 
> 时间：2012-06-20T06:32:56.417
> 
> 标签：c#, asp.net, silverlight

我有silverlight屏幕，其中包括单个屏幕和一个屏幕中的多个用户控件，当用户在该用户控件的鼠标焦点移出事件的文本框中输入任何内容时，我正在保存数据。

但是有时，如果用户单击该复选框并将鼠标光标从该用户控件中移出，则不会触发事件，因为焦点已经不在。

将数据保存在每个控件失去焦点或任何其他方式上的好方法是什么？

# mysql - 按范围或按列表分区 - Mysql？

> ID：11114023
> 
> 赞同：2
> 
> 时间：2012-06-20T06:33:03.767
> 
> 标签：mysql, database, partitioning

在我的情况下，我可以为我的新网站按范围或列表分区，下面是我可以选择的两个示例，

```
partition BY LIST(`category`)( 
PARTITION p0 VALUES IN(0), 
PARTITION p1 VALUES IN(1), 
PARTITION p2 VALUES IN(2), 
PARTITION p3 VALUES IN(3),
PARTITION p4 VALUES IN(4),
PARTITION p5 VALUES IN(5),
PARTITION p6 VALUES IN(6)
); 
```

或者我可以，

```
PARTITION BY RANGE (`category`)(
PARTITION p0 VALUES LESS THAN (1),
PARTITION p1 VALUES LESS THAN (2),
PARTITION p2 VALUES LESS THAN (3),
PARTITION p3 VALUES LESS THAN (4),
PARTITION p4 VALUES LESS THAN (5),
PARTITION p5 VALUES LESS THAN (6),
PARTITION p6 VALUES LESS THAN (7)
); 
```

因为我对分区一无所知，选择哪个更好？

我也发现我也可以做这样的事情，

```
partition BY HASH(`category`)
partitions 7; 
```

有没有更好的选择或者真的没关系？

作为最后一个问题 - 我有 7 个不同的类别。选择最后一个选项 如果我使用超过 7 个分区会发生什么？这样做会很愚蠢，还是会提高性能。

感谢您花时间阅读我的问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:02:55.603

MySQL 中有 4 种可用的分区策略：RANGE、LIST、KEY 和 HASH。

如果您需要按分区列的特定值进行分区，RANGE 和 LIST 就是为此目的而设计的。如果您不需要通过列的特定值将行分配给文件，那么 KEY 和 HASH 更适合您。

在您的情况下，所有三种方法（LIST、RANGE 和 HASH）的工作方式完全相同，因为您有 7 个分区，并且 `category` = 0 的行将存储在 p0 中，`category` = 1 存储在 p1 中，依此类推.

在 HASH 分区中，为了确定将使用哪个文件来存储特定行，MySQL 使用**模**（mod）操作：

`partition_number = hash(partitioning_column) mod number_of_partitions`

在您的 HASH 情况下，分区号为：

`partition_number = category mod 7`（您没有使用任何哈希函数，因此默认使用**身份）。**

创建比值更多（或更少）的分区可以使分区列不一定没用，但如果您使用身份作为哈希函数，那么创建**更多**分区是无用的。

假设您只有 7 个类别，但定义了 20 个分区：

```
PARTITION BY HASH(`category`)
PARTITIONS 20; 
```

由于 0 mod 7 = 0、1 mod 7 = 1、2 mod 7 = 2、3 mod 7 = 3、4 mod 7 = 4、5 mod 7 = 5 和 6 mod 7 = 6，其余分区（p7- p19) 永远不会被使用。它不会增加或降低性能，它只是没用。

现在假设您仍然有 7 个类别，但您只有 4 个分区：

```
PARTITION BY HASH(`category`)
PARTITIONS 4; 
```

0 模 4 = 0, 1 模 4 = 1, 2 模 4 = 2, 3 模 4 = 3, **4 模 4 = 0, 5 模 4 = 1, 6 模 4 = 2**。

发生了什么？文件 p0 将包含 `category` = 0 和 `category` = 4 的行，p1 将包含 `category` = 1 和 `category` = 5 的行，p2 将包含 `category` = 2 和 `category' 的行` = 6 和 p3 将仅包含 `category` = 3 的行。

这会提高还是降低性能？它取决于您在此表上运行的 SELECT 查询。如果您运行这样的查询：

```
SELECT * FROM `table_name` WHERE `category` = 0 or `category` = 4; 
```

这是完美的，因为只有一个分区将被访问。但另一个例子是相反的：

```
SELECT * 
FROM `table_name` 
WHERE `category` = 0 OR `category` = 1 OR `category` = 2 OR`category` = 3; 
```

需要访问所有分区才能检索数据。

如果您键入以下内容，MySQL 会为您提供此信息：

```
EXPLAIN PARTITIONS SELECT_QUERY;
example: EXPLAIN PARTITIONS SELECT * FROM `table_name` WHERE `category` = 0 or `category` = 4; 
```

关于使用哪种替代方案，因为 LIST 和 RANGE 分区旨在指定一个列表或一系列值，并且每个分区只有一个值，在这种情况下我会选择**HASH 分区。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:37:40.407

分区方法的选择应该基于我们正在对表进行分区的候选者，如果您对该候选者有一些固定值（一年中的前一个月），您可以选择列表分区，或者您有一个广泛的范围候选人的值，然后去范围分区。

# javascript - JavaScript Raphaël，多个数组共享相同的功能

> ID：11114024
> 
> 赞同：0
> 
> 时间：2012-06-20T06:33:08.350
> 
> 标签：javascript, arrays, raphael

javascript 新手，使用 Raphaël 库。我使用的 SVG 图像有一堆不同颜色的方块。我想为每种颜色设置不同的集合（例如 bluepath、pinkpath）并共享相同的悬停和单击功能。弹出框工作正常，但我不确定如何加入多个数组以共享相同的悬停和单击功能。如果有人愿意帮助我，我将非常感激...... :)

```
arr = new Array();
for (var block in bluepaths) {
    var obj = r.path(bluepaths[block].path);
    obj.attr(attributes);
    arr[obj.id] = block, attributes = {
        fill: '#00CCFF',
        stroke: '#3899E6',
        'stroke-width': 1,
        'stroke-linejoin': 'round'
    }
}

arr = new Array();
for (var blocktwo in pinkpaths) {
    var obj = r.path(pinkpaths[blocktwo].path);
    obj.attr(attributes);
    arr[obj.id] = blocktwo, attributes = {
        fill: '#00F',
        stroke: '#3899E6',
        'stroke-width': 1,
        'stroke-linejoin': 'round'
    }

    obj.hover(function () {
        this.animate({ fill: '#fff' }, 300);
    }, function () {
        this.animate({ fill: attributes.fill }, 300);
    }).click(function () {
        document.location.hash = arr[this.id];
        var point = this.getBBox(0);

        $('#map').next('.point').remove();
        $('#map').after($('<div />').addClass('point'));

        $('.point').html(bluepaths[arr[this.id]].name).prepend(
            $('<a />').attr('href', '#').addClass('close').text('Close')
        ).prepend(
            $('<img />').attr('src', 'flags/' + arr[this.id] + '.png')
        ).css({
            left: point.x + (point.width / 2) - 80,
            top: point.y + (point.height / 2) - 20
        }).fadeIn();
    });

    $('.point').find('.close').live('click', function () {
        var t = $(this),
        parent = t.parent('.point');

        parent.fadeOut(function () {
            parent.remove();
        });

        return false;
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:07:10.497

查看 Raphaël 的`set`，它是一个能够获得多种形状的逻辑组，旨在通过一次调用来操作多个对象。这似乎非常适合您的需求。

**例子：**

您可以使用`set`s 将事件处理程序绑定到多个形状，如下所示：

```
var set = paper.set();

set.push(
    r.circle(240, 120, 60),
    r.rect(50,100,60,60),
    r.path('m160 200 l60 80 l-120 0 z')
);    

set.hover(
    function() {
        // use the magic of hover in!
    },
    function() {
        // do some crazy stuff on hover out!
    }
); 
```

**[jsFiddle 上的演示](http://jsfiddle.net/eliranmal/ecFWb/)**

**参考：**

*   [`Set`在 Raphaël 官方文档上](http://raphaeljs.com/reference.html#Set)

# c# - ¶ 的 codeURI 值是多少？

> ID：11114025
> 
> 赞同：1
> 
> 时间：2012-06-20T06:33:10.163
> 
> 标签：c#, javascript

有人可以告诉我换行符的 CodeURI 值是什么吗？(¶)

**如果您在下面查看评论测试，您将看到我想要实现的目标。**

```
public static string unescapeForEncodeUriCompatability(string str) {
      return str.Replace("%21", "!").Replace("%7e", "~")
          .Replace("%27", "'").Replace("%28", "(").Replace("%29", ")")
          .Replace("%3b", ";").Replace("%2f", "/").Replace("%3f", "?")
          .Replace("%3a", ":").Replace("%40", "@").Replace("%26", "&")
          .Replace("%3d", "=").Replace("%2b", "+").Replace("%24", "$")
          .Replace("%2c", ",").Replace("%23", "#"); //test .Replace("¶"," ")
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T06:44:36.107

我相信它`%B6`

文本中的换行符通常以三种方式表示为 \r\n 或 \n 或 \r。

[看看](http://www.w3schools.com/tags/ref_urlencode.asp)这个

**稍后添加** @w0lf 说我遇到了[这个](http://www.web-manual.net/lamp-architecture/security/url-encoded-characters-such-as/)问题和一个[stackoverfow 问题](https://stackoverflow.com/questions/7751155/how-to-replace-0a-with-br-from-querystring)，所以看起来像

```
%B6 is the character "¶". For newlines use %0A or %0D%0A (LF or CRLF) 
```

希望这对某人有帮助。谢谢@w0lf

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T06:38:56.340

尝试使用

```
 encodeURIComponent('yoursymbolgoeshere'); 
```

我在 chrome 控制台中运行了“%C2%B6”

# git - 使存储库历史保持较小的最明智的方法是什么？

> ID：11114027
> 
> 赞同：2
> 
> 时间：2012-06-20T06:33:23.037
> 
> 标签：git, github, history

我知道存储历史记录更适合为 vcs 保留，我知道 git 允许克隆的不是完整的历史日志，但是：

*   恐怕 GitHub 空间有限（主要原因）
*   它是通过脚本自动提交处理
*   我只对历史上最近 10 或 5 次提交感兴趣
*   服务器空间可能有限

然而我不能完全理解为什么我想要它，但我尝试了一下：我想分叉这个（自动化的）存储库并使用 git merge （是的，作为一个工具）来处理它并让自己与上游保持更新。所以在这种情况下，我将正确使用 git。理想情况下，我必须在没有这个自动化上游存储库的情况下做出“git merge”所做的事情，但这是另一项任务。

目前我只发现了一种使用 git rebase 清除所有历史记录的棘手方法

```
git checkout --orphan temp $1
git commit -m "Truncated history"
git rebase --onto temp $1 origin/master
git checkout master
git branch -D temp 
```

但这既复杂又无用，创建新存储库并直接在那里推送文件更容易。所以需要一些东西来保持 git 存储库的历史很小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T06:44:39.887

你这样做是非常错误的。

[VCS](http://en.wikipedia.org/wiki/Revision_control)可帮助您保留代码的历史记录、合并编码人员的工作、管理分支、检索旧版本、查找错误的根源、测试新策略等等。它在备份代码方面也很有用，但这远非它的唯一功能。

您似乎只是对将 git 作为保存最近工作的工具感兴趣。这根本不是 git 所致力于的。

你的论点是无效的。如果你只在 git 中存储你的代码（以及参数化和小资源），你就不会冒 github 存储空间或任何类型的服务器空间爆炸的风险。我在git上有很多项目，有很多编码员，占用的空间可以忽略不计。您不应该仅仅为了节省空间而尝试擦除历史记录。

如果你正在编码，正常使用 git，尊重它的最佳实践，你不会后悔，因为它是一个非常有价值的工具。

# excel - 使用批处理脚本合并两个excel文件

> ID：11114030
> 
> 赞同：2
> 
> 时间：2012-06-20T06:33:52.893
> 
> 标签：excel, merge, batch-file

有没有办法我可以编写一个批处理脚本（windows .bat 文件），它将两个 excel 文件（xls、xlsx、csv）合并到一个 excel 文件中？这两个文件都有共同的列，每个文件都有一张。我需要合并的 excel 有一张包含两个文件内容的工作表。此外，这两个文件可以有不同的格式，比如一个是 xls，另一个是 csv。

对此有什么帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-21T16:39:33.630

您可以使用 Alacon - [Alasql](http://github.com/agershun/alasql)数据库的命令行实用程序来完成。

它适用于 Node.js，因此您需要安装[Node.js](http://nodejs.org/)，然后安装[Alasql](https://www.npmjs.com/package/alasql)包：

要连接 Excel 文件和 CSV 文件中的两个数据，您可以使用以下命令：

```
> node alacon "SELECT * INTO XLSX("main.xls",{headers:true}) 
               FROM XLSX('data1.xlsx', {headers:true}) data1
               JOIN CSV('data2.csv', {headers:true}) data2 ON data1.id = data2.id" 
```

这是一条很长的线。在此示例中，所有文件在“Sheet1”工作表中都有数据。

# symfony - 扩展样式表块

> ID：11114033
> 
> 赞同：2
> 
> 时间：2012-06-20T06:34:01.947
> 
> 标签：symfony, twig

我在基本布局中有样式表块：

```
 {% stylesheets
       filter='cssrewrite'
      'bundles/static/css/main.css'
  %}
  <link rel="stylesheet" href="{{ asset_url }}" />
  {% endstylesheets %} 
```

我想知道我是否可以在子模板中扩展这个块。添加另一个 CSS 链接或链接。

有人可以给我任何建议吗？这甚至可能吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-20T06:52:18.990

当然，这是可能的。

但是目前，您没有样式表块。您使用样式表标签。

只需添加这样的块：

```
{% block stylesheets %}
    {% stylesheets
       filter='cssrewrite'
      'bundles/static/css/main.css'
    %}
        <link rel="stylesheet" href="{{ asset_url }}" />
    {% endstylesheets %}
{% endblock %} 
```

在其他模板中：

```
{% block stylesheets %}
    {{ parent() }}
    {% stylesheets
       filter='cssrewrite'
      'another-css-file'
    %}
        <link rel="stylesheet" href="{{ asset_url }}" />
    {% endstylesheets %}
{% endblock %} 
```

不要忘记调用该`parent`函数以不覆盖父样式表。

# .net - 错误 2835：在对话框 ErrorDialog 上找不到控件 ErrorIcon

> ID：11114039
> 
> 赞同：1
> 
> 时间：2012-06-20T06:34:17.977
> 
> 标签：.net, visual-studio-2010, installation, windows-installer

以下来自 MSI 错误日志

```
DEBUG: Error 2835:  The control ErrorIcon was not found on dialog ErrorDialog
The installer has encountered an unexpected error installing this package. This may indicate a problem with this package. The error code is 2835\. The arguments are: ErrorIcon, ErrorDialog, 
Office 2010 PIA is not installed.
MSI (c) (08:54) [12:57:24:883]: Product: ExcelAddin -- Office 2010 PIA is not installed.

Action ended 12:57:24: LaunchConditions. Return value 3.
MSI (c) (08:54) [12:57:24:915]: Doing action: FatalErrorForm
Action 12:57:24: FatalErrorForm. 
Action start 12:57:24: FatalErrorForm.
MSI (c) (08:54) [12:57:24:915]: Note: 1: 2235 2:  3: ExtendedType 4: SELECT `Action`,`Type`,`Source`,`Target`, NULL, `ExtendedType` FROM `CustomAction` WHERE `Action` = 'FatalErrorForm' 
DEBUG: Error 2826:  Control BannerBmp on dialog FatalErrorForm extends beyond the boundaries of the dialog to the right by 3 pixels
The installer has encountered an unexpected error installing this package. This may indicate a problem with this package. The error code is 2826\. The arguments are: FatalErrorForm, BannerBmp, to the right
Info 2898.For VsdDefaultUIFont.524F4245_5254_5341_4C45_534153783400 textstyle, the system created a 'MS Sans Serif' font, in 0 character set, of 13 pixels height.
Info 2898.For VSI_MS_Sans_Serif16.0_1_0 textstyle, the system created a 'MS Sans Serif' font, in 0 character set, of 20 pixels height.
DEBUG: Error 2826:  Control Line1 on dialog FatalErrorForm extends beyond the boundaries of the dialog to the right by 3 pixels
The installer has encountered an unexpected error installing this package. This may indicate a problem with this package. The error code is 2826\. The arguments are: FatalErrorForm, Line1, to the right
DEBUG: Error 2826:  Control Line2 on dialog FatalErrorForm extends beyond the boundaries of the dialog to the right by 3 pixels
The installer has encountered an unexpected error installing this package. This may indicate a problem with this package. The error code is 2826\. The arguments are: FatalErrorForm, Line2, to the right
Action 12:57:24: FatalErrorForm. Dialog created 
```

我在运行 64 位 Win7 和 Office 2010 的虚拟 PC 上进行 Excel 插件安装。.net 4 CP、office2010 PIA 和 vsto 4 运行时都包含在安装程序中。根据错误消息，似乎有什么东西阻止了 Office 2010 PIA 的安装。知道这里的错误提示什么吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T20:45:17.010

遇到同样的问题，似乎真正的错误出现在此之前。

我的错误来自我的自定义安装程序类，所以如果你有其中之一，你应该在那里调查。

参考：[错误 2835：在对话框 ErrorDialog 上找不到控件 ErrorIcon](http://social.msdn.microsoft.com/Forums/en-US/winformssetup/thread/5958b64a-6083-4327-bb94-4c3c90626f51/)

仔细查看我的安装日志后，我发现错误 2826（ConfirmInstallForm 上的行超出边界）和 2769（未关闭 1 MSIHANDLES）。

# android - 在谷歌地图上显示天气和云

> ID：11114041
> 
> 赞同：1
> 
> 时间：2012-06-20T06:34:34.873
> 
> 标签：android, google-maps

我在 Android 中制作了一个天气应用程序，它根据 JSON 响应显示当前温度和预报。现在我想添加一张显示温度和云的天气图，但我不知道从哪里开始。

它应该看起来像这个问题：[How to hide or display a Google Maps Layer?](https://stackoverflow.com/questions/10318316/how-to-hide-or-display-a-google-maps-layer)

我已经尝试寻找解决方案，但没有找到任何东西。请帮帮我？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T06:37:59.890

这是谷歌给出的 [https://developers.google.com/maps/documentation/javascript/layers#WeatherLayer](https://developers.google.com/maps/documentation/javascript/layers#WeatherLayer)

要显示云，请使用此 Google API 参考 [https://developers.google.com/maps/documentation/javascript/reference#CloudLayer](https://developers.google.com/maps/documentation/javascript/reference#CloudLayer)

要显示天气，请使用此 Google API 参考 [https://developers.google.com/maps/documentation/javascript/reference#WeatherLayer](https://developers.google.com/maps/documentation/javascript/reference#WeatherLayer)

对于寻找如何使用此 api 示例的 Android 开发人员，请参考以下链接中给出的示例：- [http://www.anddev.org/viewtopic.php?t=337](http://www.anddev.org/viewtopic.php?t=337)

# iphone - 将照片上传到 Facebook 问题。照片方向错误

> ID：11114053
> 
> 赞同：0
> 
> 时间：2012-06-20T06:35:46.430
> 
> 标签：iphone, facebook, image, facebook-graph-api

我将照片上传到 Facebook。如果照片宽度 > 高度，一切正常。但是如果高度 > 宽度，facebook 会显示照片，所以在 facebook 帐户照片中会出现宽度 > 高度，但是（当然）方向是错误的。我的代码：

```
- (void)postImageToFaceBook:(UIImage *)imgSource
{
    [self login];

    currentAPICall = kAPIGraphUserPhotosPost;

    NSString *strMessage = @"This is the photo caption";
    NSMutableDictionary* photosParams = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                         imgSource,@"source",
                                         strMessage,@"message",
                                         nil];

    NSLog(@"Begin sending photo\n\n");
    [_facebook requestWithGraphPath:@"me/photos"
                          andParams:photosParams
                      andHttpMethod:@"POST"
                        andDelegate:self];
}

- (void)login
{
    if (![_facebook isSessionValid]) {
        NSArray *permissions = [[NSArray alloc] initWithObjects:
                                @"user_photos",
                                nil];
        [_facebook authorize:permissions];
        [permissions release];
    }
}

- (void)logout
{
    [_facebook logout];
}

#pragma mark - FBRequestDelegate

- (void)request:(FBRequest *)request didLoad:(id)result {
    NSLog(@"Request load\n\n");
    [self hideHud];

    if ([result isKindOfClass:[NSArray class]] && ([result count] > 0)) {
        result = [result objectAtIndex:0];
    }

    switch (currentAPICall) {
        case kAPIGraphPhotoData: // step 3
        {
            NSLog(@"sending to wall\n\n");
            // Facebook doesn't allow linking to images on fbcdn.net.  So for now use default thumb stored on Picasa

            NSString *thumbURL = kDefaultThumbURL;
            NSString *imageLink = [NSString stringWithFormat:[result objectForKey:@"link"]];    

            currentAPICall = kDialogFeedUser;

            NSMutableDictionary* dialogParams = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                                 kAppId, @"app_id",
                                                 imageLink, @"link",
                                                 thumbURL, @"picture",
                                                 @"Photo from my iPhone application", @"name",
                                                 @"The app", @"caption",
                                                 @"it is fun to use", @"description",
                                                 nil];

            [_facebook dialog:@"feed" 
                    andParams:dialogParams 
                  andDelegate:self];

            break;
        }
        case kAPIGraphUserPhotosPost: // step 2
        {
            NSLog(@"getting data\n\n");
            [self showHudWithMessage:@"Getting image data"];
            NSString *imageID = [NSString stringWithFormat:[result objectForKey:@"id"]];            
            NSLog(@"id of uploaded screen image %@",imageID);

            currentAPICall = kAPIGraphPhotoData;

            [_facebook requestWithGraphPath:imageID
                                andDelegate:self];

            break;
        }
        default:
            break;
    }
}

#pragma mark - FBDialogDelegate

- (void)dialogDidComplete:(FBDialog *)dialog {
    switch (currentAPICall) {
        case kDialogFeedUser:
        {
            NSLog(@"Feed published successfully.");
        }
            break;
        default:
            break;
    }
} 
```

在 postImageToFaceBook 中，我检查了图像大小以完全确保我的图像宽度 < 高度。宽度约为 2200，高度为 3300，facebook 相册图像出现宽度 > 高度。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T06:42:57.867

实际上 facebook 在 Image 上没有做任何事情。iPhone 在纵向模式下显示所有图像，它是在横向模式下。所以请检查您系统上的图像。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:47:06.867

我解决了这个问题。这种行为是图像的宽度约为 2000 像素，但如果宽度小于 1000 像素，则一切正常。

# regex - 重命名文件 - 在文件名中将 'yyyyMMdd' 转换为 'MMM-yy'

> ID：11114055
> 
> 赞同：1
> 
> 时间：2012-06-20T06:35:51.397
> 
> 标签：regex, date, powershell, filenames

我有一长串文件，它们都以“yyyyMMdd”格式的日期结尾，需要将它们更改为“MMM-yy”。解决这个问题的最佳方法是什么？

**例如**“file_one_20120620.pdf”>“file_one_JUN-12.pdf”

1.  使用正则表达式查找“​​日期”
2.  提取和操作日期
3.  重新命名文件

Joey 在下面建议了一个 Powershell 脚本，它看起来应该可以工作，但我一直在碰壁，即使在更改提供的代码时也是如此。任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T06:43:39.837

您可以使用 PowerShell 执行此操作：

```
gci | # get files
  foreach {
    $newName = [Regex]::Replace($_.BaseName, '\d{8}$', {
      param($m)
      [datetime]::ParseExact($m.Value, 'yyyyMMdd', $null).ToString('dd-MMM')
    }) + $_.Extension
    Rename-Item $_ $newName
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T06:33:51.397

```
Get-ChildItem | # get files
foreach {
$newName = [Regex]::Replace($_.BaseName, '\d{8}$', {
  param($m)
  [datetime]::ParseExact($m.Value, 'yyyyMMdd', $null).ToString('dd-MMM')
}) + $_.Extension
Rename-Item $_ $newName -WhatIf
$_
$newname
} 
```

这适用于我的测试列表，我所做的只是将 gci 更改为 get-childItem ..

如果：对目标“项目：C:\ab\file_four_20120701.txt 目标：C:\ab\file_four_01-Jul.txt”执行“重命名文件”操作。

如果：对目标“项目：C:\ab\file_one_20120620.txt 目标：C:\ab\file_one_20-Jun.txt”执行“重命名文件”操作。

如果：对目标“项目：C:\ab\file_three_20120622.txt 目标：C:\ab\file_three_22-Jun.txt”执行“重命名文件”操作。

如果：对目标“项目：C:\ab\file_two_20120621.txt 目标：C:\ab\file_two_21-Jun.txt”执行“重命名文件”操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T06:34:46.083

[多亏了上面的乔伊](https://stackoverflow.com/users/73070/joey)，这对我的情况很有帮助。

基于以下文件命名约定：

> 'file_one_20120622.pdf'**转换为**'file_one_JUN-22.pdf'

```
gci | #get files
  foreach {
    $newDate = [DateTime]::ParseExact($_.Name.Split('_')[2].Split('.')[0],'yyyyMMdd',$null).ToString('MMM-yy').ToUpper()
    $newFilename = $_.Name.Split('_')[0] + '_' + $_.Name.Split('_')[1] + '_' + $newDate + ".pdf"
    Rename-Item $_ $newFilename -WhatIf
  } 
```

# jquery - 复选框绑定 CHANGE 事件

> ID：11114056
> 
> 赞同：7
> 
> 时间：2012-06-20T06:35:54.653
> 
> 标签：jquery, events, bind

我想在用户单击/触摸复选框后提交我的表单：

HTML

```
<input type="checkbox" name="chkSales" id="chkSales" class="custom" data-inline="true" data-mini="true"/><label for="chkSales">Sales</label>                                         
<input type="checkbox" name="chkArrival" id="chkArrival" class="custom" data-inline="true" data-mini="true"/><label for="chkArrival">New Arrival</label> 
```

​ Js：

```
$("input[type='checkbox']").change(function() {
    alert(e);
    print(e);
});​ 
```

从我在这里阅读的内容来看，它应该真的可以工作，但是没有！我的问题在哪里？

（它应该改变，因为移动设备不点击，他们使用触摸...... [http://jsfiddle.net/usTHG/2/](http://jsfiddle.net/usTHG/2/)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-20T06:39:16.620

```
$("input[type='checkbox']").change(function(e) {
                                            ^---- you missed e here
    alert(e.type); 
    print(e);
});​ 
```

**[工作示例](http://jsfiddle.net/usTHG/3/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T06:39:26.103

请试试这个：

`e`你在你的函数中缺少（ `e`）

**代码**

```
$("input[type='checkbox']").change(function(e) {
    alert(e);
    print(e);
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T06:40:19.863

尝试：

```
$(document).ready(function() {
        $("input[type='checkbox']").change(function(e) {
            alert(e);
            print(e);
        });
    }); 
```

# javascript - 为什么在迭代中会出现原型函数？

> ID：11114068
> 
> 赞同：2
> 
> 时间：2012-06-20T06:36:48.883
> 
> 标签：javascript, prototype

所以有这个功能

```
Array.prototype.containsCaseInsensitive = function(obj) {
  var i = this.length;
  while (i--) {
    if (this[i].toUpperCase() === obj.toUpperCase()) {
      return true;
    }
  }
  return false;
} 
```

然后我创建这个数组：

```
ary = [0,1,2,3];
for (item in ary){
  console.log(ary[item])
} 
```

输出如下：

```
0
1
2
3
function(obj) {
    var i = this.length;
    while (i--) {
       if (this[i].toUpperCase() === obj.toUpperCase()) {
           return true;
       }
    }
    return false;
 } 
```

为什么函数在迭代？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T06:43:29.007

`for ... in ...`您的属性是可枚举的（尽管无论如何您都不应该枚举数组的键）。

在 ES5 兼容的浏览器上，您可以使用以下命令安全地将该函数添加为不可枚举的属性[`Object.defineProperty`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/defineProperty)：

```
Object.defineProperty(Array.prototype, 'containsCaseInsensitive', {
    value: function() {
        ...
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T06:40:24.013

当您使用`for .. in`数组时，它会被视为一个对象，这就是为什么它会向您显示所有属性的原因。使用正则 for 来达到你想要的效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T06:40:46.953

因为`containsCaseInsensitive`是数组的成员，并且您正在遍历数组的所有成员。您不应该编写`for ... in`迭代来迭代数组中的项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T06:41:02.583

因为`for..in`输出对象的所有可枚举属性。

如果你只想要数组的值，你可以使用：

```
for (item in ary){
   if ( ary.hasOwnProperty( item ) )
      console.log(ary[item])
} 
```

在受支持的环境中，您还可以使用`defineProperty`将函数设置为不可枚举，如下所示：

```
Object.defineProperty( Array.prototype, 'containsCaseSensitive', {
    value: function( obj ) {},
    enumerable: false
    // ^ this is default when you use defineProperty, so you don't need it
    // but it is to show you how that works :-)
} ); 
```

但是，通常不建议将其`for..in`用于数组，您只能将其用于文字对象。

对于数组，建议使用：

```
for ( var i = 0, l = arr.length; i < l; i++ ) {
    console.log( arr[ i ] );
} 
```

或者，如果支持：

```
arr.forEach( function( el ) {
    console.log( el );
} ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T06:41:36.423

您正在迭代对象的所有属性。你需要看看[这个](https://stackoverflow.com/questions/135448/how-do-i-check-to-see-if-an-object-has-an-attribute-in-javascript)。

# http-unit - 如何在 httpunit 中处理 webimage 上的 onclick

> ID：11114071
> 
> 赞同：1
> 
> 时间：2012-06-20T06:37:10.173
> 
> 标签：http-unit

我正在使用 httpunit。在我的应用程序中，我有一个只有一个 src 和一个 onclick 的图像。在图像的 onclick 上调用一个 javascript。它进一步调用下一页。代码片段如下

WebImage image = response.getImageWithSource("abc/xyz.png"); image.getScriptableObject().handleEvent("onclick");

我无法获得下一页。谁能帮我吗。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:11:48.640

httpunit 只有有限的 javascript 支持。您的测试是否成功取决于使用“onclick”事件调用的脚本的复杂性。您可能想检查 httpunit 的单元测试用例以获取成功的示例。

# javascript - 在 JavaScript 中只允许数字

> ID：11114073
> 
> 赞同：3
> 
> 时间：2012-06-20T06:37:17.497
> 
> 标签：javascript

> **可能重复：**
> [HTML 文本输入仅允许数字输入](https://stackoverflow.com/questions/469357/html-text-input-allow-only-numeric-input)

我用了这个脚本

```
function isNumberKey(evt)
  {
    var e = event || evt; // for trans-browser compatibility
    var charCode = e.which || e.keyCode;                        
    if (charCode > 31 && (charCode < 47 || charCode > 57))
    return false;
    if (e.shiftKey) return false;
    return true;
 } 
```

但是这个脚本不能单独在 Firefox 中运行。在javascript中限制用户使用shift键的任何替代方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T06:49:39.243

`event`没有在 Firefox 中定义，它破坏了你的代码。在测试后放置它`evt`：

```
function isNumberKey(evt)
  {
    var e = evt || window.event; //window.event is safer, thanks @ThiefMaster
    var charCode = e.which || e.keyCode;                        
    if (charCode > 31 && (charCode < 47 || charCode > 57))
    return false;
    if (e.shiftKey) return false;
    return true;
 } 
```

[**小提琴**](http://jsfiddle.net/ult_combo/ZabPy/1/)

下次检查您的错误控制台。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T06:47:38.983

**试试这个代码..**

```
$(document).keydown(function (e) {
    if (e.shiftKey) {
        e.preventDefault();
    }
}); 
```

检查小提琴..

[http://jsfiddle.net/kabichill/8FgH4/](http://jsfiddle.net/kabichill/8FgH4/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-20T06:43:57.253

您可以使用 jQuery 限制任何按键（也可以是一组按键）

```
$(document).ready(function()
{
     $('#PHONE_NUMBER').keypress(function(e) {
            var a = [];
            var k = e.which;

            for (i = 48; i < 58; i++)
            a.push(i);
            a.push(8);
            if (!(a.indexOf(k)>=0))
                e.preventDefault();
            });
}); 
```

其中#phone number 是输入元素的id，for 循环和push 函数只推送允许的字符。48 到 58 是键盘上数字 0-9 的键值

# sharepoint - 我可以使用客户端对象模型在 Sharepoint 2010 中重新托管文件吗？

> ID：11114076
> 
> 赞同：0
> 
> 时间：2012-06-20T06:37:28.177
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-clientobject

我正在尝试使用 Sharepoint 2010 的客户端对象模型在 C# 中编写控制台应用程序。我想重新托管或重置站点定义一些文件。这可能吗？如果可以，怎么办？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:02:45.447

我认为[SPFile.RevertContentStream()](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfile.revertcontentstream)可以做到这一点。

# oop - 为支持多协议的服务器设计客户端

> ID：11114079
> 
> 赞同：2
> 
> 时间：2012-06-20T06:37:50.083
> 
> 标签：oop, design-patterns

这是我第一次参与为外部服务器编写完整的客户端（我对设计模式非常陌生）。

该服务器提供了几种协议来连接和发送命令，例如 REST、SOAP 等等。

所有这些协议都执行几乎相同的一组操作，但有所不同。我需要为它设计和实现一个完整的客户端框架，它将支持所有这些协议。

正如了解并通过几个互联网链接，在我看来，它使用了抽象工厂模式和接口。

我目前实施它的想法如下：

1.  为 Connection (ConnectionFactory) 创建一个抽象工厂类。根据输入，提及要使用的协议，将创建相应的 Connection 对象。这个抽象类将有一个抽象方法（processMessage）。该方法必须在所有协议的连接类中实现。这个单一的方法（processMessage）将接受一个参数，提到要执行的请求类型。每个协议都有一个单独的请求名称。我如何使用常量来处理它？

2.  为请求、响应和客户端定义一个接口。所有协议都有自己的请求、响应和客户端类，它们将实现各自的接口。

请提供您对此设计的宝贵意见；请给我一些更好的建议，我可以在这里做。我仍然无法最终确定目录结构，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T06:50:13.347

如果您计划为不同的协议定义类层次结构，请尽量避免为数据类型（请求、响应等）创建并行层次结构。这通常被认为是一种反模式，被称为“并行继承层次结构”。这是一个示例[问题](https://stackoverflow.com/q/10964148/1158895)。这种方法的主要缺点是必须维护多个并行的类层次结构。

创建 Connection 工厂听起来很合理。***它很可能会返回一个类实例，该实例具有用于向***服务器发送消息的 createMessage() 方法和用于***从***服务器接收消息的 processMessage() 方法，并且工厂将插入接下来解释的 ProtocolHandler。

至于请求和响应，您可以使用[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)在 Connection 类中定义一个 ProtocolHandler 成员，其中每个实现都是一个可以处理、解析、编组等各个协议（REST、SOAP 等）细节的类. Connection 类 processMessage() 和 createMessage() 方法将使用 ProtocolHandler 类层次结构。

这是 c++ 中的一些伪代码，我没有编译也没有测试过，但我希望它能让你很好地了解我试图解释的内容。

```
// Your factory will create the Connection instance and fill in the
// corresponding ProtocolHandler concrete implementation instance

class Connection
{
public:
    // Depending on what else you need for the Connection,
    // the constructors may be different
    Connection() : handler_(NULL) {}
    Connection(ProtocolHandler *handler) : handler_(handler) {}

    inline void setProtocolHandler(ProtocolHandler *handler) {handler_ = handler;}
    inline ProtocolHandler *getProtocolHandler() {return handler_;}

    void processMessage(const string &msg) {
        handler_->decode(msg);
        // any extra logic here
    }

    string createMessage() {
        // any extra logic here
        return handler_->encode();
    }

    // Put the rest of your connection stuff here

private:
    ProtocolHandler *handler_;

};

// Notice that Im handling the protocol msg buffers in a std::string, this
// may or may not work for you, replace accordingly depending on your needs

class ProtocolHandler
{
public:

    // abstract methods
    // name these accordingly as handle, parse, marshal, etc
    virtual string encode() = 0;
    virtual void decode(const string &msg) = 0;

    // Other methods you may need here
};

class RestProtocolHandler : public ProtocolHandler
{
public:
    virtual string encode() { /* your rest msg encode impl here */ }
    virtual void decode(const string &msg) { /* your rest msg decode impl here */ }

    // Other methods and/or attributes you may need here
};

// More concrete ProtocolHandler implementations here 
```

# opengl - 有没有办法在 freeglut（或 glut）中插入退出回调函数？

> ID：11114081
> 
> 赞同：2
> 
> 时间：2012-06-20T06:37:53.080
> 
> 标签：opengl, glut, freeglut

在我的 freeglut 项目中，我分配了很多内存，当用户关闭 freeglut（或 glut）窗口时，我无法释放它，有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T06:52:53.673

FreeGLUT 提供了几种解决方案：

1.  你可以调用`glutSetOption(GLUT_ACTION_ON_WINDOW_CLOSE, GLUT_ACTION_CONTINUE_EXECUTION)`and`glutLeaveMainLoop()`让`glutMainLoop()`函数返回，然后你可以在`glutMainLoop()`调用后释放你想要的所有内存。

2.  `glutMainLoop()`您可以像这样创建自己的事件循环，而不是调用：

    ```
    bool running = true;
    while (running)
    {
        glutMainLoopEvent();
    }And whenever you want to exit application - just set running variable to false, and free the allocated memory after while loop. 
    ```

3.  或者你什么也不做——任何现代操作系统都会在进程终止时正确地释放所有分配的内存。当然，如果您需要在终止时做一些特殊的事情——比如写入日志文件、发送网络数据包，那么您必须手动执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-10T23:00:59.073

Register an exit function with **atexit(onexit)** before the main loop.

# objective-c - 我正在尝试从目标 c 中的控制台读取整数值

> ID：11114083
> 
> 赞同：0
> 
> 时间：2012-06-20T06:38:08.770
> 
> 标签：objective-c

当我读取第一个值时，它不会取值并继续循环。当我按“esc”和“enter”时，它将读取第二个数字但不取第二个数字，程序执行完成..

```
int main (int argc, const char * argv[])
{

    // insert code here...
    int firstNumber = 0,secondNumber = 0,result = 0;

    printf("\nEnter first number");
    scanf("%d", &firstNumber);

    printf("\nEnter second number");
    scanf("%d", &secondNumber);

    result = firstNumber+secondNumber;

    printf("\nResult is %d", result);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:23:02.773

您的代码有效，请再次检查！您可以稍微修改它以在新行中输入数字

```
 int first = 0, second = 0, result = 0;
    printf("Enter the first number: \n");
    scanf("%d",&first);
    printf("Enter the second number: \n");
    scanf("%d",&second);
    result = first + second;
    printf("Result is: %d \n", result);
    cout << "\nEnd";
    return 0; 
```

# c# - 将多个文件关联到同一个 io 完成端口，同时保持文件流顺序 c#

> ID：11114084
> 
> 赞同：1
> 
> 时间：2012-06-20T06:38:10.923
> 
> 标签：c#, io, iocp, io-completion-ports

我需要将从另一个进程发送给我的对象写入磁盘上的多个文件。每个对象都带有 fileID（要写入的文件的名称）和数据块。

我想使用 IO 完成端口 (IOCP) 来优化文件写入，使用并发异步 I/O，但我必须同步写入每个文件，例如我必须在写入时保持每个文件的块顺序磁盘但不是文件顺序。

我了解 .Net 在执行 IO 操作时使用 IOCP，但我如何让它按我想要的方式工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:55:37.677

这很容易做到，您只需要跟踪每个文件的写入位置并在写入每个块时更新它。您在结构中为异步写入指定写入偏移量，`OVERLAPPED`因此只要您跟踪您在每个文件中的位置，您就应该能够只写入块并更新每个文件的写入偏移量。

# vb.net - 有没有更快的方法在 VB 解决方案中搜索特定文本？

> ID：11114086
> 
> 赞同：0
> 
> 时间：2012-06-20T06:38:24.610
> 
> 标签：vb.net

我需要扫描我们解决方案上的所有文件（aspx、js、ascx 等）我们的解决方案总共包含 22 个项目。

我需要完成的是搜索其内容中包含“img =”的所有文件（不是包含inf“img”的文件名）

我当然不想手动执行此操作（逐个打开和检查文件）...任何人都可以分享有关如何更快地执行此操作的任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T06:41:55.993

我倾向于使用免费的 Agent Ransack：

[http://www.mythicsoft.com/page.aspx?type=agenttransack&page=home](http://www.mythicsoft.com/page.aspx?type=agentransack&page=home)

或者，您可以在 Visual Studio 中执行 Ctrl+Shift+F 并选择 'Look In' = 'Entire Solution'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-22T10:09:06.060

TextSeek 是您的问题的另一种解决方案。您可以使用 Ctrl+箭头键跨文件浏览所有命中结果。

[https://www.textseek.net/](https://www.textseek.net/)

# css-float - 为什么当子元素具有“浮动”时“文本溢出”不起作用？

> ID：11114090
> 
> 赞同：4
> 
> 时间：2012-06-20T06:38:46.543
> 
> 标签：css-float, css

我有一段HTML代码如下：

```
<div style="width:100px;border: 1px solid red;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin:0 auto">
    <span style="float: left">LeftLeftLeftLeftLeftLeftLeftLeftLeftLeftLeftLeft</span>
</div> 
```

但`ellipsis`似乎不起作用。如果我删除 的`float`属性`span`，它可以用“LeftLeft...”以正常方式显示。`text-overflow`和是否`float`相互冲突？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-07T22:39:16.320

[`text-overflow`财产规范](http://dev.w3.org/csswg/css-ui/#text-overflow)说

> 此属性指定当**内联内容**在其具有“溢出”而不是“可见”的内联进展方向上溢出其块容器元素（“块”）时呈现。

浮动孩子不是*内联内容*，它们被认为是一种特殊的块内容（它们的计算值`display`是`block`）。这就是为什么他们需要拥有自己的`text-overflow`（因为这个属性不是继承的）以及宽度限制。例如

```
<div style="width:100px;border: 1px solid red;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin:0 auto">
    <span style="float: left; max-width: 100%; overflow:hidden;text-overflow:ellipsis;">LeftLeftLeftLeftLeftLeftLeftLeftLeftLeftLeftLeft</span>
</div> 
```

（[见 JSfiddle](http://jsfiddle.net/RyyMs/)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-07T21:38:07.653

是的，考虑到父元素上的溢出 CSS 属性，并且属性设置为自动或隐藏，然后父元素将展开以包含浮动，有效地将其清除为后续元素。

所以浮动属性根本不起作用。

不确定是否有人对此有任何破解。

检查文档，[http://www.w3.org/TR/css3-box/#float](http://www.w3.org/TR/css3-box/#float) 它适用于 CSS3，但也适用于 CSS2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T06:43:26.293

尝试在 span 元素上使用此样式：

```
<span style="float:left; overflow:hidden"><!--Content--></span> 
```

# lua - 如何获取电话信息，例如 Corona 中电话和电话运营商的语言？

> ID：11114093
> 
> 赞同：0
> 
> 时间：2012-06-20T06:39:00.597
> 
> 标签：lua, coronasdk

我想从它使用的运营商的电话中检索信息以及电话的语言是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:13:40.947

您可以通过使用获取语言

```
system.getPreference( "ui", "language" ) 
```

在这里阅读 [http://developer.anscamobile.com/reference/index/systemgetpreference](http://developer.anscamobile.com/reference/index/systemgetpreference)

而且我很确定（还）没有办法检索操作员信息。

# html - 在 DIV 中垂直居中多行文本

> ID：11114095
> 
> 赞同：1
> 
> 时间：2012-06-20T06:39:11.393
> 
> 标签：html, css, alignment

我有一个`<div id="outer">`具有以下CSS：

```
position:relative;
width:300px;
height:125px;
float:left;
background:url(../images/callto-button1.png) no-repeat #185E7D; 
```

其中是**多行**文本。如何在外部 div 中垂直居中文本？

我已经尝试过`display:table-cell`css 方法，但它与页面的其他元素冲突。

文字大小未知。

是否有适用于 IE6 及更高版本的所有浏览器的方法或技巧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T06:45:23.763

尝试垂直居中时，我总是回到此页面： [http ://www.jakpsatweb.cz/css/css-vertical-center-solution.html](http://www.jakpsatweb.cz/css/css-vertical-center-solution.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T06:53:04.367

**方法一：**

在此方法中，让 div 显示表格单元格和垂直对齐：中间。但它不适用于 IE7 和 IE6。这里有一些技巧。

教程：[http ://css-tricks.com/vertically-center-multi-lined-text/](http://css-tricks.com/vertically-center-multi-lined-text/)

**方法二：**

您可以将外部包裹在 div 中并使其位置绝对添加样式 top:50% 并且 margin-top 应该是 div 高度的一半。

教程：[http ://css-tricks.com/centering-in-the-unknown/](http://css-tricks.com/centering-in-the-unknown/)

# java - OCR 库可识别仪表设备上的数字

> ID：11114097
> 
> 赞同：13
> 
> 时间：2012-06-20T06:39:18.413
> 
> 标签：java, android, c++, ocr

我需要 OCR 库（最好是 Java），它将能够确定仪表设备上可视化的数字。请看图片。我在 Java 中尝试了一些库，但他们无法确定这种字体。

![在此处输入图像描述](../Images/f7404189d1bcbf03d0fd2278b30e8bf2.png)

**更新 1：** Tesseract 和 Asprise 库未能执行此任务

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T06:45:04.400

你可以看看[Tesseract](http://code.google.com/p/tesseract-ocr/)，它是 Google 维护的开源 OCR。但是，我认为如果您只提供图像，OCR 可能会出现一些问题，原因是您的数字大小不同，这很可能会在神经网络学习时引起问题。

所以，我认为如果你先过滤你的图像并尝试删除你不需要识别的项目并尝试使你需要读取相同大小的数字，你会有更大的成功机会。

编辑：根据您的编辑，您还可以查看[Java OCR](http://sourceforge.net/projects/javaocr/)：

> Java OCR 是一套用于图像处理和字符识别的纯 Java 库。较小的内存占用和缺乏外部依赖使其适用于 android 开发。提供模块化结构，便于部署

话虽如此，我仍然认为您应该先对图像进行一些处理。

# c# - 如何从 Oracle 中的函数返回数据集结果

> ID：11114100
> 
> 赞同：1
> 
> 时间：2012-06-20T06:39:34.020
> 
> 标签：c#, oracle11g

我们如何在不使用 curson 和 type 的情况下从 oracle 中的函数返回数据集结果。

我的问题是当我的函数返回结果时，结果以逗号（，）分隔。我想要表格格式的结果...

我的示例查询：

```

创建或替换函数 res_set_2(obj_id VARCHAR2)
   返回 SYS_REFCURSOR
作为
   my_cursor SYS_REFCURSOR;
开始
   打开 my_cursor FOR
   SELECT t1.*, t2.* FROM table1 t1 JOIN table2 t2 ON t1.id = t2.id WHERE t2.bankingId=obj_id;
  返回我的光标；
结尾;

```

建议我最好的解决方案..

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:08:07.127

您可以使用[amlagg](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions215.htm)获取 XML 中的查询结果：

```
CREATE OR REPLACE FUNCTION res_set_2(obj_id VARCHAR2)
   RETURN varchar2 AS
   my_xml varchar2(32767);
BEGIN

   SELECT xmlelement("DATASET", xmlagg(
                       xmlelement("ROW", xmlforest(t1.col1, t1.col2, ..., t2.col1, ...))
                                      )).getStringVal()
     INTO my_xml 
     FROM table1 t1 JOIN table2 t2 ON t1.id = t2.id 
    WHERE t2.bankingId=obj_id;

   RETURN my_xml;
END; 
```

请注意，为简单起见，我返回了 varchar2，我从未尝试在 C# 中获取 XMLTYPE

至于数据集，也许[这篇文章](https://stackoverflow.com/questions/4668364/how-to-fill-the-dataset-with-c-sharp-from-oracle-database)可以提供帮助

# matlab - 如何在 matlab 中将 Mupad 符号 'I' {sqrt(-1)} 转换为 'i'

> ID：11114101
> 
> 赞同：0
> 
> 时间：2012-06-20T06:39:38.113
> 
> 标签：matlab, symbolic-math, complex-numbers

我正在尝试在 matlab 中评估这个积分 ![在此处输入图像描述](../Images/e9ad8b42f98b9494868c79c6381007dd.png)

由于“我”，matlab 将“ans”视为符号。如何将这个 'I' 转换成 'i' 让 ans 变成一个复数。

非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:42:27.017

符号数学工具箱有一个重载`double`函数，可用于从 转换`sym`为`double`表示（如果表达式是符号常量或常量表达式）。

例如：

```
ans_sym = vpa(1+1*i);
ans_double = double(ans_sym); 
```

在这里查看更多信息： http: [//www.mathworks.se/help/toolbox/symbolic/double.html](http://www.mathworks.se/help/toolbox/symbolic/double.html)。

# ruby - 在 Rails 应用程序中使用第三方 gem

> ID：11114103
> 
> 赞同：0
> 
> 时间：2012-06-20T06:39:49.087
> 
> 标签：ruby, ruby-on-rails-3, gem

我是新来的。

当我想使用一些第三方宝石时，我遇到了一些问题。

例如，我尝试在我的系统中使用“cancan”，而我现在使用的是 rails 3.2.5。

当我像这样安装“cancan”时：

```
gem install cancan. 
```

我发现它取决于“activepack 3.2.6”，这与我使用的不同（3.2.5）

所以我想知道如果我在我的应用程序中使用“cancan”会发生什么？

另外，如何将'cancan'导入我的cpp？由于在java中我会将相关`.jar`文件放在`/web-info/lib`路径中，并将`import`其放在源代码中。红宝石怎么样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:58:41.410

当您编写时`gem install cancan`，您不会将此 gem 添加到您的项目中，您只需下载并安装到系统中。

如果您想在您的应用程序中安装 gem，请写入`gem 'cancan'`您的 Gemfile（在您的项目文件夹中），然后写入`bundle install`控制台。Bundle 尝试解决您所有的 gem 依赖项并将 gem 添加到您的项目中。如果您的 gem 不兼容，bundler 将返回带有问题描述的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:08:57.207

看看[bundler](http://gembundler.com/rails3.html)来管理你的 gem 安装。

至于版本不兼容，请查看 Ahbay Kumar 的回答。

# neo4j - 节点关系和属性的空间复杂度

> ID：11114108
> 
> 赞同：1
> 
> 时间：2012-06-20T06:40:17.320
> 
> 标签：neo4j, space

有人可以在图数据库的上下文中阐明节点关系和属性的空间复杂度。我目前正在使用 Neo4j。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T06:45:54.587

我认为您应该熟悉 Chris Gioran 的“ [Neo4j internals](http://nosql.mypopescu.com/post/1396301953/neo4j-internals) ”文章。例如，在第一个名为“ [Neo4j Internals: File Storage](http://digitalstain.blogspot.com/2010/10/neo4j-internals-file-storage.html) ”的文章中，您可以阅读以下内容（引自文章）：

> 在这篇文章中，我将尝试解释 Neo4j 的存储子系统，揭示图形所在的所有“neostore.*”文件的结构和用途。

这是他的博客：[digitalstain.blogspot.com](http://digitalstain.blogspot.com/)

# node.js - 定期递归调用函数

> ID：11114112
> 
> 赞同：11
> 
> 时间：2012-06-20T06:40:37.833
> 
> 标签：node.js

所以我想知道什么是定期递归调用函数的更好方法（就堆栈增长和性能而言）？例如，假设我想每 200 毫秒读取一次文件内容。我有以下两种方法，想知道它们是否有什么不同？

方法一：使用普通ols setTimeout 不带process.nextTick

```
var fs = require('fs');
(function loop() {
  // Print to time to indicate something is happening
  console.log(new Date().toString());

  // Read a 51MB file
  fs.readFile('./testfile', function (err, data) {
    if (err) console.log(err);
  });

  // Call the same function again
  setTimeout(function () {
    loop();
  }, 200);
})(); 
```

方法2：在setTimeout里面调用process.nextTick

```
var fs = require('fs');
(function loop() {
  // Print to time to indicate something is happening
  console.log(new Date().toString());

  // Read a 51MB file
  fs.readFile('./testfile', function (err, data) {
    if (err) console.log(err);
  });

  // Call the same function again
  setTimeout(function () {
    process.nextTick(function () {
      loop();
    });
  }, 200);
})(); 
```

我想知道的是在 setTimeout 中添加 process.nextTick 是否有帮助？调用 process.nextTick 中的函数是否会减轻堆栈的使用？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-20T08:43:05.160

以下简化示例中没有递归：

```
function test()
{
   console.trace();
   setTimeout(test, 1000);
}

test(); 
```

输出（注意堆栈没有增长）

```
Trace
    at test (/private/tmp/rec.js:3:12)
    at Object.<anonymous> (/private/tmp/rec.js:7:1)
    at Module._compile (module.js:449:26)
    at Object..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function._load (module.js:312:12)
    at module.js:487:10
    at EventEmitter._tickCallback (node.js:238:9)
Trace
    at Object.test [as _onTimeout] (/private/tmp/rec.js:3:12)
    at Timer.ontimeout (timers.js:101:19)
Trace
    at Object.test [as _onTimeout] (/private/tmp/rec.js:3:12)
    at Timer.ontimeout (timers.js:101:19)
Trace
    at Object.test [as _onTimeout] (/private/tmp/rec.js:3:12)
    at Timer.ontimeout (timers.js:101:19)
Trace
    at Object.test [as _onTimeout] (/private/tmp/rec.js:3:12)
    at Timer.ontimeout (timers.js:101:19)
Trace
    at Object.test [as _onTimeout] (/private/tmp/rec.js:3:12)
    at Timer.ontimeout (timers.js:101:19)
Trace
    at Object.test [as _onTimeout] (/private/tmp/rec.js:3:12)
    at Timer.ontimeout (timers.js:101:19) 
```

# macos - 如何在 Mac 上使用 ABPersonView

> ID：11114117
> 
> 赞同：0
> 
> 时间：2012-06-20T06:40:58.420
> 
> 标签：macos, osx-lion

你知道如何在 Mac 上使用 ABPersonView 吗？

我在 mac 上的通讯录中加载了人员列表。

但我不知道如何显示人员详细信息视图以使用“通讯录人员视图”。

mac 应用程序不能使用“地址簿人员视图”吗？

操作系统 x：10.7.4 xcode：4.3.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T05:48:34.667

我自己解决这个问题。

*   将“通讯簿人员视图”拖到容器视图。
*   也许“地址簿人员视图”在容器视图上更改为“自定义视图”。
*   在 xib 中选择“自定义视图”，并在身份检查器的类字段中强制将“NSView”更改为“ABPersonView”
*   在代码和“自定义视图”类中强制将“自定义视图”更改为“ABPersonView”。
*   强制导入 <AddressBook/ABPersonView.h>
*   用这个：

```
ABAddressBook* kAddressBook = [ABAddressBook addressBook];
ABPerson* kPerson = [kAddressBook.people objectAtIndex:row];
[personView setPerson:kPerson]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T10:01:47.737

107/108 中的班级在选择联系人时存在错误。它不会滚动到它，所以它通常不可见

提醒一下：

[http://www.openradar.me/radar?id=1854415](http://www.openradar.me/radar?id=1854415)

# java - 范围“提供”不会在类路径中添加罐子

> ID：11114118
> 
> 赞同：5
> 
> 时间：2012-06-20T06:41:01.973
> 
> 标签：java, maven, classpath

我正在使用工件的范围“提供”pom 文件的依赖项。由于“提供”范围，这些依赖 jar 不会添加到 MANIFEST.MF 的类路径中。

你能帮我吗，这样 jar 不应该被下载，而是应该添加到类路径中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T06:46:34.840

好吧，如果您希望它在语义上正确，请将`<scope>provided</scope>`其删除并保留默认值 ( `<scope>compile</scope>`)。然后`<optional>true</optional>`为依赖项设置，因此它将包含在清单的类路径中。

通过使用`provided`范围，您实际上是说您不希望它出现在清单的类路径中，因为它无论如何都是由容器提供的。

# javascript - 在jQuery中满足if条件后加载函数不起作用

> ID：11114122
> 
> 赞同：0
> 
> 时间：2012-06-20T06:41:09.997
> 
> 标签：javascript, jquery

在下面的代码中，if 条件正在工作，因为我已经检查了警报，但加载功能不起作用。

我的代码：

```
$("a").click(function() {                            
    hreff = $(this).attr('href');
    if(hreff == "something" )
    {
        $("#dump").load("someurl");
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T06:44:23.047

```
$("a").click(function(e) {
    e.preventDefault();  // prevent page reload
    var hreff = $(this).attr('href');
    if (hreff == "something") {
        $("#dump").load("someurl");
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T06:47:04.233

函数 load 将从定义的 url 加载响应，但您尚未定义 url。如果 $(this).attr('href') 有一个真实的 url，那么你永远不会得到它们，因为你在 if 中检查“某事”

```
$("a").click(function() {
    href = $(this).attr('href');
    if (href.length >0) {
        $("#dump").load(href, function() {
            alert('Load was performed.');
        });
    }
}); 
```

这将起作用。

# c# - 以编程方式创建文件并从 WP7 隔离存储中获取文件名

> ID：11114123
> 
> 赞同：2
> 
> 时间：2012-06-20T06:41:14.340
> 
> 标签：c#, windows-phone-7

我正在构建一个应用程序，该应用程序需要在用户输入详细信息时保存表单。我希望每个表单都存储在单独的 .dat 文件中。使用 GUID 作为文件名，我现在可以将数据存储在单独的文件中。但是我无法检索所有文件名并将其绑定到超链接按钮的列表框，单击该列表框将显示存储在特定文件中的所有数据。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T07:00:52.293

也许你想看看： http: [//msdn.microsoft.com/en-us/library/cc190395 (v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/cc190395(v=vs.95).aspx)

“GetFileNames”是“IsolatedStorageFile”的一种方法，它显示了它指向的目录中的所有文件。

在这个问题中，您可以获得一个示例： [如何读取存储在隔离存储中的文件的名称](https://stackoverflow.com/questions/8967263/how-to-read-names-of-files-stored-in-isolatedstorage)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T07:05:21.497

尝试使用您的[IsolatedStorageFile的](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragefile.getuserstoreforapplication%28v=vs.95%29.aspx)[GetFilesNames](http://msdn.microsoft.com/en-us/library/cc190395%28v=vs.95%29.aspx)方法。使用通配符 (*.dat) 检索文件列表。

例如：

```
using (var store = IsolatedStorageFile.GetUserStoreForApplication())
{
    string pattern = "*.dat";
    string[] files = store.GetFileNames(pattern);
} 
```

# c# - 如何使用 colorstream 在 WPF kinect 应用程序中流式传输图像上的 RGB 数据？

> ID：11114125
> 
> 赞同：2
> 
> 时间：2012-06-20T06:41:26.940
> 
> 标签：c#, kinect

我想在 WPF kinect 应用程序中查看图像上的 RGB 数据“颜色流”流，我该怎么做？

谢谢

* * *

这是我的代码和xaml，所以你可以看到骨架是在图像上绘制的，我想要的是在骨架之外的图像上添加颜色流，那么我该怎么做呢？

非常感谢，

```
namespace Microsoft.Samples.Kinect.SkeletonBasics
{
    using System.IO;
    using System.Windows;
    using System.Windows.Media;
    using Microsoft.Kinect;
    using System.Windows.Media.Media3D;
    using System;
    using System.Data;
    using System.Globalization;
    using System.Linq;

    public partial class MainWindow : Window
    {

        private const float RenderWidth = 640.0f;

        private const float RenderHeight = 480.0f;

        private const double JointThickness = 3;

        private const double BodyCenterThickness = 10;

        private const double ClipBoundsThickness = 10;

        private readonly Brush centerPointBrush = Brushes.Blue;

        private readonly Brush trackedJointBrush = new SolidColorBrush(Color.FromArgb(255, 68, 192, 68));

        private readonly Brush inferredJointBrush = Brushes.Yellow;

        private readonly Pen trackedBonePen = new Pen(Brushes.Green, 6);
        private readonly Pen trackedBonePenwrong = new Pen(Brushes.White, 6);

        private readonly Pen inferredBonePen = new Pen(Brushes.Gray, 1);

        private KinectSensor sensor;

        private DrawingGroup drawingGroup;

        private DrawingImage imageSource;

        public MainWindow()
        {
            InitializeComponent();
        }

        private static void RenderClippedEdges(Skeleton skeleton, DrawingContext drawingContext)
        {
            if (skeleton.ClippedEdges.HasFlag(FrameEdges.Bottom))
            {
                drawingContext.DrawRectangle(
                    Brushes.Red,
                    null,
                    new Rect(0, RenderHeight - ClipBoundsThickness, RenderWidth, ClipBoundsThickness));
            }

            if (skeleton.ClippedEdges.HasFlag(FrameEdges.Top))
            {
                drawingContext.DrawRectangle(
                    Brushes.Red,
                    null,
                    new Rect(0, 0, RenderWidth, ClipBoundsThickness));
            }

            if (skeleton.ClippedEdges.HasFlag(FrameEdges.Left))
            {
                drawingContext.DrawRectangle(
                    Brushes.Red,
                    null,
                    new Rect(0, 0, ClipBoundsThickness, RenderHeight));
            }

            if (skeleton.ClippedEdges.HasFlag(FrameEdges.Right))
            {
                drawingContext.DrawRectangle(
                    Brushes.Red,
                    null,
                    new Rect(RenderWidth - ClipBoundsThickness, 0, ClipBoundsThickness, RenderHeight));
            }
        }

        private void WindowLoaded(object sender, RoutedEventArgs e)
        {
            // Create the drawing group we'll use for drawing
            this.drawingGroup = new DrawingGroup();

            // Create an image source that we can use in our image control
            this.imageSource = new DrawingImage(this.drawingGroup);

            // Display the drawing using our image control
            Image.Source = this.imageSource;

            // Look through all sensors and start the first connected one.
            // This requires that a Kinect is connected at the time of app startup.
            // To make your app robust against plug/unplug, 
            // it is recommended to use KinectSensorChooser provided in Microsoft.Kinect.Toolkit
            foreach (var potentialSensor in KinectSensor.KinectSensors)
            {
                if (potentialSensor.Status == KinectStatus.Connected)
                {
                    this.sensor = potentialSensor;
                    break;
                }
            }

            if (null != this.sensor)
            {
                // Turn on the skeleton stream to receive skeleton frames
                this.sensor.ColorStream.Enable(ColorImageFormat.RgbResolution640x480Fps30);
        //    this.sensor.ColorFrameReady += this.SensorColorSkeletonFrameReady;
                this.sensor.SkeletonStream.Enable();

            //    this.sensor.ColorFrameReady += new EventHandler<ColorImageFrameReadyEventArgs>(kinectSensor_ColorFrameReady);
                // Add an event handler to be called whenever there is new color frame data
                this.sensor.SkeletonFrameReady += this.SensorSkeletonFrameReady;

                // Start the sensor!
                try
                {
                    this.sensor.Start();
                }
                catch (IOException)
                {
                    this.sensor = null;
                }
            }

            if (null == this.sensor)
            {
                this.statusBarText.Text = Properties.Resources.NoKinectReady;
            }
        }
        private void WindowClosing(object sender, System.ComponentModel.CancelEventArgs e)
        {
            if (null != this.sensor)
            {
                this.sensor.Stop();
            }
        }

        private void SensorSkeletonFrameReady(object sender, SkeletonFrameReadyEventArgs e)
        {
            Skeleton[] skeletons = new Skeleton[0];

            using (SkeletonFrame skeletonFrame = e.OpenSkeletonFrame())
            {
                if (skeletonFrame != null)
                {
                    skeletons = new Skeleton[skeletonFrame.SkeletonArrayLength];
                    skeletonFrame.CopySkeletonDataTo(skeletons);

                }
            }

            using (DrawingContext dc = this.drawingGroup.Open())
            {
                // Draw a transparent background to set the render size
                //dc.DrawImage();
                dc.DrawRectangle(Brushes.Black, null, new Rect(0.0, 0.0, RenderWidth, RenderHeight));

                if (skeletons.Length != 0)
                {

                    foreach (Skeleton skel in skeletons)
                    {
                        Skeleton first = FindSkeleton(e);

                        if (first == null)
                            return;

                        int firstSkeleton = first.TrackingId;
                        RenderClippedEdges(skel, dc);

                        if (skel.TrackingState == SkeletonTrackingState.Tracked)
                        {

                            this.DrawBonesAndJoints(skel, dc);

                        }
                        else if (skel.TrackingState == SkeletonTrackingState.PositionOnly)
                        {
                            dc.DrawEllipse(
                            this.centerPointBrush,
                            null,
                            this.SkeletonPointToScreen(skel.Position),
                            BodyCenterThickness,
                            BodyCenterThickness);
                        }

                    }
                }

                // prevent drawing outside of our render area
                this.drawingGroup.ClipGeometry = new RectangleGeometry(new Rect(0.0, 0.0, RenderWidth, RenderHeight));
            }
        }

        private void DrawBonesAndJoints(Skeleton skeleton, DrawingContext drawingContext)
        {
            // Render Torso
            this.DrawBone(skeleton, drawingContext, JointType.Head, JointType.ShoulderCenter);
            this.DrawBone(skeleton, drawingContext, JointType.ShoulderCenter, JointType.ShoulderLeft);
            this.DrawBone(skeleton, drawingContext, JointType.ShoulderCenter, JointType.ShoulderRight);
            this.DrawBone(skeleton, drawingContext, JointType.ShoulderCenter, JointType.Spine);
            this.DrawBone(skeleton, drawingContext, JointType.Spine, JointType.HipCenter);
            this.DrawBone(skeleton, drawingContext, JointType.HipCenter, JointType.HipLeft);
            this.DrawBone(skeleton, drawingContext, JointType.HipCenter, JointType.HipRight);

            // Left Arm
            this.DrawBone(skeleton, drawingContext, JointType.ShoulderLeft, JointType.ElbowLeft);
            this.DrawBone(skeleton, drawingContext, JointType.ElbowLeft, JointType.WristLeft);
            this.DrawBone(skeleton, drawingContext, JointType.WristLeft, JointType.HandLeft);

            // Right Arm
            this.DrawBone(skeleton, drawingContext, JointType.ShoulderRight, JointType.ElbowRight);
            this.DrawBone(skeleton, drawingContext, JointType.ElbowRight, JointType.WristRight);
            this.DrawBone(skeleton, drawingContext, JointType.WristRight, JointType.HandRight);

            // Left Leg
            this.DrawBone(skeleton, drawingContext, JointType.HipLeft, JointType.KneeLeft);
            this.DrawBone(skeleton, drawingContext, JointType.KneeLeft, JointType.AnkleLeft);
            this.DrawBone(skeleton, drawingContext, JointType.AnkleLeft, JointType.FootLeft);

            // Right Leg
            this.DrawBone(skeleton, drawingContext, JointType.HipRight, JointType.KneeRight);
            this.DrawBone(skeleton, drawingContext, JointType.KneeRight, JointType.AnkleRight);
            this.DrawBone(skeleton, drawingContext, JointType.AnkleRight, JointType.FootRight);

            // Render Joints
            foreach (Joint joint in skeleton.Joints)
            {
                Brush drawBrush = null;

                if (joint.TrackingState == JointTrackingState.Tracked)
                {
                    drawBrush = this.trackedJointBrush;                    
                }
                else if (joint.TrackingState == JointTrackingState.Inferred)
                {
                    drawBrush = this.inferredJointBrush;                    
                }

                if (drawBrush != null)
                {
                    drawingContext.DrawEllipse(drawBrush, null, this.SkeletonPointToScreen(joint.Position), JointThickness, JointThickness);
                }
            }
        }

        private Point SkeletonPointToScreen(SkeletonPoint skelpoint)
        {
            // Convert point to depth space.  
            // We are not using depth directly, but we do want the points in our 640x480 output resolution.
            DepthImagePoint depthPoint = this.sensor.MapSkeletonPointToDepth(
                                                                             skelpoint,
                                                                             DepthImageFormat.Resolution640x480Fps30);
            return new Point(depthPoint.X, depthPoint.Y);
        }

        private void DrawBone(Skeleton skeleton, DrawingContext drawingContext, JointType jointType0, JointType jointType1)
        {
            Joint joint0 = skeleton.Joints[jointType0];
            Joint joint1 = skeleton.Joints[jointType1];

            // If we can't find either of these joints, exit
            if (joint0.TrackingState == JointTrackingState.NotTracked ||
                joint1.TrackingState == JointTrackingState.NotTracked)
            {
                return;
            }

            // Don't draw if both points are inferred
            if (joint0.TrackingState == JointTrackingState.Inferred &&
                joint1.TrackingState == JointTrackingState.Inferred)
            {
                return;
            }

            // We assume all drawn bones are inferred unless BOTH joints are tracked
            Pen drawPen = this.inferredBonePen;
            if (joint0.TrackingState == JointTrackingState.Tracked && joint1.TrackingState == JointTrackingState.Tracked)
            {
               // int uuu=0;
                //if (uuu==0)
                //    drawPen = this.trackedBonePenwrong;
                //else
                drawPen = this.trackedBonePen;
            }

            drawingContext.DrawLine(drawPen, this.SkeletonPointToScreen(joint0.Position), this.SkeletonPointToScreen(joint1.Position));

        }

        private void CheckBoxSeatedModeChanged(object sender, RoutedEventArgs e)
        {
            if (null != this.sensor)
            {
                if (this.checkBoxSeatedMode.IsChecked.GetValueOrDefault())
                {
                    this.sensor.SkeletonStream.TrackingMode = SkeletonTrackingMode.Seated;
                }
                else
                {
                    this.sensor.SkeletonStream.TrackingMode = SkeletonTrackingMode.Default;
                }
            }
        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {
            Application.Current.Shutdown();
        }

    }
} 
```

xml:

```
<Window x:Class="Microsoft.Samples.Kinect.SkeletonBasics.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Skeleton Basics" Height="735" Width="1151" Loaded="WindowLoaded" Closing="WindowClosing">

    <Window.Resources>
        <SolidColorBrush x:Key="MediumGreyBrush" Color="#ff6e6e6e"/>
        <SolidColorBrush x:Key="KinectPurpleBrush" Color="#ff52318f"/>
        <SolidColorBrush x:Key="KinectBlueBrush" Color="#ff00BCF2"/>
        <Style TargetType="{x:Type CheckBox}" x:Key="SquareCheckBox" >
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type CheckBox}">
                        <Grid>
                            <StackPanel Orientation="Horizontal" Background="Transparent">
                                <Grid x:Name="SquareCheckBoxChecked">
                                    <Image x:Name="CheckedNormal" Source="Images\CheckedNormal.png" Stretch="None" HorizontalAlignment="Center"/>
                                    <Image x:Name="CheckedHover" Source="Images\CheckedHover.png" Stretch="None" HorizontalAlignment="Center" Visibility="Collapsed"/>
                                </Grid>
                                <Grid x:Name="SquareCheckBoxUnchecked" Visibility="Collapsed">
                                    <Image x:Name="UncheckedNormal" Source="Images\UncheckedNormal.png" Stretch="None" HorizontalAlignment="Center"/>
                                    <Image x:Name="UncheckedHover" Source="Images\UncheckedHover.png" Stretch="None" HorizontalAlignment="Center" Visibility="Collapsed"/>
                                </Grid>
                                <TextBlock x:Name="SquareCheckBoxText" Text="{TemplateBinding Content}" TextAlignment="Left"  VerticalAlignment="Center" Foreground="{StaticResource KinectPurpleBrush}" FontSize="15"  Margin="9,0,0,0"/>
                            </StackPanel>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="false">
                                <Setter Property="Visibility" Value="Collapsed" TargetName="SquareCheckBoxChecked"/>
                                <Setter Property="Visibility" Value="Visible" TargetName="SquareCheckBoxUnchecked"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="true">
                                <Setter Property="Visibility" Value="Collapsed" TargetName="CheckedNormal"/>
                                <Setter Property="Visibility" Value="Collapsed" TargetName="UncheckedNormal"/>
                                <Setter Property="Visibility" Value="Visible" TargetName="CheckedHover"/>
                                <Setter Property="Visibility" Value="Visible" TargetName="UncheckedHover"/>
                                <Setter Property="Foreground" Value="{StaticResource KinectBlueBrush}" TargetName="SquareCheckBoxText"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid Name="layoutGrid" Margin="10 0 10 0" Width="1094">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <DockPanel Grid.Row="0" Margin="0 0 0 20">
            <Image DockPanel.Dock="Left" Source="Images\Logo.png" Stretch="None" Margin="0 10 0 5"/>
            <TextBlock DockPanel.Dock="Right" VerticalAlignment="Bottom" Foreground="{StaticResource MediumGreyBrush}" FontFamily="Segoe UI" FontSize="18">Skeleton Basics</TextBlock>
            <Image Grid.Column="1" Source="Images\Status.png" Stretch="None" HorizontalAlignment="Center" Margin="0 0 0 5"/>
        </DockPanel>
        <Viewbox Grid.Row="1" Stretch="Uniform" HorizontalAlignment="Left">
            <Image Name="Image" Width="640" Height="480"/>
        </Viewbox>
        <CheckBox Grid.Row="2" Style="{StaticResource SquareCheckBox}" Content="Seated Mode" Height="Auto" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="0 10 10 10" Name="checkBoxSeatedMode" Checked="CheckBoxSeatedModeChanged" Unchecked="CheckBoxSeatedModeChanged"/>
        <StatusBar Grid.Row="3" HorizontalAlignment="Stretch" Name="statusBar" VerticalAlignment="Bottom" Background="White" Foreground="{StaticResource MediumGreyBrush}">
            <StatusBarItem Padding="0 0 0 10">
                <TextBlock Name="statusBarText" Margin="0">Click 'Seated' to change skeletal pipeline type!</TextBlock>
            </StatusBarItem>
        </StatusBar>

</Window> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T07:50:28.730

您是否尝试过 Microsoft 示例？甚至是互联网样本（那里有很多）

由于您使用 c# 进行开发，我假设您使用的是 WPF 和 SDK1.0（或更多）：

这是一种解决方案：

首先启用颜色流：

```
 KinectSensor kinectSensor = KinectSensor.KinectSensors[0];
 kinectSensor.ColorStream.Enable(ColorImageFormat.RgbResolution640x480Fps30);
 kinectSensor.Start();
 kinectSensor.ColorFrameReady += this.ColorImageReady; 
```

然后处理事件：

```
 private static readonly int Bgr32BytesPerPixel = (PixelFormats.Bgr32.BitsPerPixel + 7) / 8;
    private byte[] pixelData;
    private WriteableBitmap CameraSource;

private void ColorImageReady(object sender, ColorImageFrameReadyEventArgs e)
        {
           bool receivedData = false;
            using (ColorImageFrame imageFrame = e.OpenColorImageFrame())
            {
                if (imageFrame != null)
                {

                    if (pixelData == null)
                    {
                        this.pixelData = new byte[imageFrame.PixelDataLength];
                    }

                    imageFrame.CopyPixelDataTo(this.pixelData);
                    receivedData = true;

                    // A WriteableBitmap is a WPF construct that enables resetting the Bits of the image.
                    // This is more efficient than creating a new Bitmap every frame.
                    if (receivedData)
                    {

                    this.CameraSource.WritePixels(
                        new Int32Rect(0, 0, imageFrame.Width, imageFrame.Height),
                        this.pixelData,
                        imageFrame.Width * Bgr32BytesPerPixel,
                        0);
                    }

                }
            }
        } 
```

在你的xml中：

```
 <Image Name="Camera" Width="160" Height="120" Margin="0,0,0,0"  RenderOptions.BitmapScalingMode="HighQuality" /> 
```

在代码隐藏中：

```
kinectSensor.ColorFrameReady += new EventHandler<Microsoft.Kinect.ColorImageFrameReadyEventArgs>(ColorImageFrameReady_handler); 
```

和相应的处理程序：

```
public void ColorImageFrameReady_handler(object sender, Microsoft.Kinect.ColorImageFrameReadyEventArgs e)
        {
            Camera.Source = CameraSource;
        } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-21T15:09:00.977

我不会粘贴所有代码，因为它差不多，但 Coding 4 Fun 有一个 Kinect for Windows 快速入门系列，它们在**摄像机基础知识中处理 RGB 视频**

系列链接：[http ://channel9.msdn.com/Series/KinectQuickstart](http://channel9.msdn.com/Series/KinectQuickstart)

链接到**相机基础知识**：[http ://channel9.msdn.com/Series/KinectQuickstart/Camera-Fundamentals](http://channel9.msdn.com/Series/KinectQuickstart/Camera-Fundamentals)

# javascript - Backbone.js 解析未修改的响应

> ID：11114127
> 
> 赞同：5
> 
> 时间：2012-06-20T06:41:41.207
> 
> 标签：javascript, caching, jquery, backbone.js, etag

我有一个使用标头 ETag 的服务器。Backbone 首次引用 API：一切正常，响应接收并解析。第二次：主干向服务器发送 ETag，作为响应收到 NotModified。并且 Backbone 试图解析这个响应，从而产生一个名为 reset 的集合。

有什么办法可以重置收藏吗？

在 fetch 方法中添加添加选项的方法将不起作用。由于我需要完全刷新集合，如果我来到服务器的响应。

```
var recommendCollection = Backbone.Collection.extend({
    model : Event,
    etag : null,
    urlRoot : '/api/users',
    initialize: function() {
        this.etag = null;
    },
    parse: function(response) {
        return response.data;
    },      
    url : function () {
        return (this.urlRoot + "/"+window.me.get('id')+ "/recommendation");
    },
    beforeSend : function (jqXHR, settings) {
        jqXHR.setRequestHeader('if-none-match', this.etag);
    },
    complete : function (jqXHR, textStatus) {
        if (jqXHR.status == 200 || jqXHR.status == 304) {
            this.etag = jqXHR.getResponseHeader('ETag');
        }
    },
    update : function () {
        this.fetch({
            beforeSend : this.beforeSend.bind(this),
            complete : this.complete.bind(this),
            data : {
                cityId : window.me.get('cityId'),
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T08:44:52.117

据我所知，没有简单的解决方案来捕获 304 响应。我想出了什么：

*   `parse`接收[第二个参数](http://backbonejs.org/#Collection-parse)，`options`您可以使用它来检查请求的状态，并在必要时使用相同的模型重新填充您的集合。它有效，但它会触发一个`reset`

    ```
    parse: function(response, options) {
        if (options.xhr.status === 304)
            return this.models

        return response.data;
    } 
    ```

    [http://jsfiddle.net/nikoshr/sxv9P/12/](http://jsfiddle.net/nikoshr/sxv9P/12/)

*   jQuery 接受一个`ifModified`可以帮助你的选项

    > **ifModified** *默认值：false*
    > 
    > 仅当自上次请求以来响应已更改时，才允许请求成功。这是通过检查 Last-Modified 标头来完成的。默认值为 false，忽略标题。在 jQuery 1.4 中，此技术还检查服务器指定的“etag”以捕获未修改的数据。

*   或覆盖[`fetch`函数](http://backbonejs.org/docs/backbone.html#section-112)以停止 304 响应

    ```
    fetch: function(options) {
          options = options ? _.clone(options) : {};
          if (options.parse === undefined) options.parse = true;
          var collection = this;
          var success = options.success;
          options.success = function(resp, status, xhr) {
            if (xhr.status!==304)
                collection[options.add ? 'add' : 'reset'](collection.parse(resp, xhr), options);
            if (success) success(collection, resp);
          };
          options.error = Backbone.wrapError(options.error, collection, options);
          return (this.sync || Backbone.sync).call(this, 'read', this, options);
    } 
    ```

    [http://jsfiddle.net/sxv9P/1/](http://jsfiddle.net/sxv9P/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:57:04.910

304 响应不能包含消息体。抱歉，太着急回答了，我的话在这里没有用。

# c++ - DWORD64 如果设置为 -1，则为 32 个 1，即 0xffffffffffffffffffffffffffffffff

> ID：11114128
> 
> 赞同：3
> 
> 时间：2012-06-20T06:41:44.523
> 
> 标签：c++, dword

C++ 代码（Visual Studio 以 devenv /useenv (x64) 开头，isWOW64 为假）

```
DWORD64 check;

check = -1;
printf("value %u", check); 
```

它打印值 4294967295 即 0x(32)f 如果我在 x32 环境中使用简单的 DWORD 执行此操作，则它是相同的

**是的，我知道 DWORD64 是无符号的 __int64，**但它不应该是 0x(64)f 吗？

装配工在那里做了什么？反汇编代码对我没有多大帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T06:43:56.940

您的问题在于`printf`格式字符串。使用`%u`tell`printf`打印 32 位值。因此，它仅使用`DWORD64`. 要打印已压入堆栈的所有 64 位，请使用`%llu`(for `unsigned long long`)。

另请注意，`DWORD64`不能`unsigned long`。在所有 Windows 版本上，即使在 Windows 64 位上，`long`也是 32 位。

参见[LLP64 模型](http://en.wikipedia.org/wiki/64-bit#64-bit_data_models)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T06:47:39.327

如果您查看[手册页](http://msdn.microsoft.com/en-us/library/hf4y5e3w.aspx)，`%u`格式规范是 type `int`。这意味着`printf`将值读取为`int`，即使在 64 位平台上仍然是 32 位。

添加一个或的[大小规范](http://msdn.microsoft.com/en-us/library/tcxf1dw6.aspx)`ll`，`I64`因此格式将是`%I64u`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T06:47:24.297

应该是`-1LL`因为`-1`存储为 32bit int

# sed - sed 脚本：如何在 n 号之后搜索。行数？

> ID：11114129
> 
> 赞同：0
> 
> 时间：2012-06-20T06:41:44.463
> 
> 标签：sed

如何在大型文件中的“n”行之后使用 grep 捕获模式的第一次出现？

例如，我有 1000 行代码，其中 'wire' 出现在第 451 行之前和之后。我想在第 451 行之后获取第一次出现的电线。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T06:49:49.410

您可以使用 sed 的范围表达式轻松执行此任务。例如：

```
sed -n '452,$ { /wire/ {p;q} }' /tmp/foo 
```

这将跳过前 451 行，然后扫描每一行，直到 EOF 找到“wire”。找到后，它将打印模式空间然后退出。

# ruby - 如何在 Ruby 中返回值或有条件地引发错误？

> ID：11114131
> 
> 赞同：3
> 
> 时间：2012-06-20T06:41:54.057
> 
> 标签：ruby

我正在从 Rails 模型调用 API，如果 API 返回非 200 代码，我想引发错误。否则我想缓存/延迟加载数据。这是我的方法：

```
def data
    @data ||= SNL.get_list(name)
    raise StandardError, @data.inspect unless @data.success?
    @data
end 
```

这行得通，但我想知道我是否可以在一行中完成此操作。我尝试将`and`运算符与 an 结合使用，`unless`但无法正常工作。

更新：我接受了 tokland 的回答，因为我要求一行，他/她提供了两个非常好的解决方案。最后我实际上要使用

```
def data
  @data ||= SNL.get_list(name)
  @data.success? ? @data : (raise StandardError, @data.inspect)
end 
```

为了可读性。我只是讨厌有第三行只是为了 return `@data`，因为很少会引发异常。我觉得 odiszapc 的答案是简洁和可读性的最佳折衷。谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T07:16:46.647

我不会紧张写一个单行，但`tap`如果你绝对必须使用，你可以使用：

```
def data
  (@data ||= SNL.get_list(name)).tap { |d| d.success? or raise StandardError.new(d.inspect) }
end 
```

也有短路逻辑：

```
def data
  (@data ||= SNL.get_list(name)).success? && @data or
    raise StandardError.new(@data.inspect) }
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T06:58:53.620

您可以只使用三元运算符。但是，我认为让您的代码尽可能具有可读性非常重要。一般来说，根据我的经验，水平扩展太多的代码通常有点难以理解。

您需要确定一件事。如果`SNL.get_list(name)`返回 nil 并且您尝试将`and`运算符与它一起使用，则它将不起作用。

这个问题在我身上发生过无数次。一个示例：

```
nil and puts 'hello' 
```

在你的 irb 试试这个。它行不通。这个问题在我身上发生过无数次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T06:52:33.493

也许

```
def data
  @data ||= SNL.get_list(name)
  @data.success? ? @data : (raise StandardError, @data.inspect)
end 
```

或者我不确定，比如：

```
def data
  (@data ||= SNL.get_list(name)).success? ? @data : (raise StandardError, @data.inspect)
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T07:15:05.110

尝试

```
def data
    (@data ||= SNL.get_list(name)).success? ? @data :  raise(StandardError, @data.inspect)
end 
```

同样@Sohaib 的观点是有效的，这不太可读！而不是垃圾的方式，很多括号

# windows - 在 utf-8 中运行 scala 脚本保存会出错

> ID：11114135
> 
> 赞同：1
> 
> 时间：2012-06-20T06:42:34.870
> 
> 标签：windows, scala, utf-8

我是 scala 的新手，我在“Scala 编程”一书中尝试了一些小程序，当 scala 脚本保存在 ANSI 中时，它运行良好。但是当我将它保存为 UTF-8 时，会抛出一个错误为“错误：非法字符？导入”。我在 Windows 上运行这个小示例程序。示例程序就像

```
import scala.io.Source
if(args.isEmpty){

}else{
    Source.fromFile(args(0)).getLines.toList.zipWithIndex.foreach { case (line, i) => println(i + "    "+line)}
} 
```

那里发生了什么事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T08:34:50.337

我猜你用[BOM](http://en.wikipedia.org/wiki/Byte_order_mark)保存了你的文件。

如果您在没有 BOM 的情况下保存源代码（如何操作取决于您使用的文本编辑器），它将正常工作。

# android - 如何在运行时找出自定义对话框的宽度和高度android

> ID：11114138
> 
> 赞同：4
> 
> 时间：2012-06-20T06:42:45.250
> 
> 标签：android, dialog

您好我正在创建一个自定义对话框。它工作正常。我分配到的宽度是

```
填充父
```

和高度是

```
包装内容
```

如何在运行时找出它们的宽度和高度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T06:47:27.933

对于任何视图，您都可以使用 getHeight() 和 getWidth() 方法来获取高度和宽度信息。

有关更多信息，请参阅[此](http://android-coding.blogspot.in/2011/05/get-size-width-height-of-view.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T06:58:05.570

尝试这个;

```
AlertDialog.Builder a = new AlertDialog.Builder(this);

View v = a.create().getCurrentFocus();
v.measure(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);

int height = v.getMeasuredHeight();
int width = v.getMeasuredWidth(); 
```

# c - 在结构中写入数组

> ID：11114143
> 
> 赞同：0
> 
> 时间：2012-06-20T06:43:16.090
> 
> 标签：c, arrays, struct

我是C语言的初学者。我有以下结构

```
typedef struct
{
    zuint8                      u8ZCLVersion;

 #ifdef CLD_BAS_ATTR_LOCATION_DESCRIPTION
    tsZCL_CharacterString       sLocationDescription;
    uint8                       au8LocationDescription[16];
 #endif

 #ifdef CLD_BAS_ATTR_PHYSICAL_ENVIRONMENT
    zenum8                      u8PhysicalEnvironment;
 #endif

 #ifdef CLD_BAS_ATTR_DEVICE_ENABLED
    zbool                       bDeviceEnabled;
 #endif
} tsCLD_Basic; 
```

现在我想设置 au8LocationDescription[16] 字段。我正在使用这段代码。

```
tsCLD_Basic sCombined;
sCombined.au8LocationDescription[16] = {0x42,0x65,0x64,0x20,0x52,0x6f,0x6f,0x6d}; 
```

但它显示错误错误：“{”标记之前的预期表达式

我怎么能写值..???

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T07:01:14.457

正如 Als 的评论所说，你试图做的事情是不可能的。您将需要像这样单独分配每个数组元素

```
 sCombined.au8LocationDescription[0] = 0x42;
    sCombined.au8LocationDescription[1] = 0x65;
    ... 
```

依此类推，直到每个元素都具有您想要的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T07:09:06.557

```
sCombined.au8LocationDescription[16] = {0x42,0x65,0x64,0x20,0x52,0x6f,0x6f,0x6d}; 
```

这一行告诉编译器要做的是分配`{0x42,0x65,0x64,0x20,0x52,0x6f,0x6f,0x6d}`给数组 au8LocationDescription 的第 16 个元素。

它行不通。首先，au8LocationDescription[16] 不是有效位置。在那里写任何东西都会导致未定义的行为。你的数组只有 16 个元素，所以你只能使用从 0 到 15 的索引。它甚至不代表一个数组，它是一个 int。

但是由于您试图用一些值填充数组，所以这是无关紧要的。你可以试试

```
 sCombined.au8LocationDescription = {0x42,0x65,0x64,0x20,0x52,0x6f,0x6f,0x6d}; 
```

但这也行不通。您不能以这种方式分配给数组。这个技巧只允许在初始化时使用。

剩下的就是一一分配数组的元素。但是，如果您想保存 LOC，您可以按照以下方式进行操作：

```
static uint8 values[] = {0x42,0x65,0x64,0x20,0x52,0x6f,0x6f,0x6d};
memcpy(sCombined.au8LocationDescription, values, sizeof(values)); 
```

# java - 将字节数组大小减少到原来的一半

> ID：11114145
> 
> 赞同：0
> 
> 时间：2012-06-20T06:43:19.573
> 
> 标签：java

我有一个长度为 14 的字节数组。我可以将第一个两个元素合并为一个，依此类推，使其大小为 7？即 <{730C5454000160}> 应该看起来像

```
<{73,0C,54,54,00,01,60}>. 
```

或者，如果没有，我有一个字符串“730C5454000160”，我需要它作为字节数组

```
<{73,0C,54,54,00,01,60}>. 
```

请哪位大神帮帮我，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T06:58:33.287

让 JDK 帮助您：

```
byte[] bytes = new byte[7];
System.arraycopy( ByteBuffer.allocate(8).putLong( Long.parseLong( s, 16 ) ).array(), 1, bytes, 0, 7); 
```

下面是一些测试代码：

```
public static void main( String[] args ) {
    String s = "730C5454000160";

    byte[] bytes = new byte[7];
    System.arraycopy( ByteBuffer.allocate(8).putLong( Long.parseLong( s, 16 ) ).array(), 1, bytes, 0, 7);

    System.out.println( Arrays.toString(bytes ));
} 
```

输出：

```
[115, 12, 84, 84, 0, 1, 96] 
```

# java - Javabean 约定 - 属性 gId 的方法命名

> ID：11114147
> 
> 赞同：3
> 
> 时间：2012-06-20T06:43:26.247
> 
> 标签：java, naming-conventions, javabeans, conventions, convention

如果我的 Java 类中有一个属性“gId”，访问器方法应该命名为什么？

`getGId`是我假设的。

如果有一个属性`gURL`，我认为它会是`getGURL`，哪种看起来很丑（虽然不是指女孩的替代拼写）。

如果该属性只是`url`方法名称`getUrl`看起来不错，是的，我不会首先将该属性命名为 URL，这会使访问器再次变得丑陋 -`getURL`

我记得在某处读过 Javabean Specification PDF，内容是关于属性的大写以及涉及首字母缩略词的案例，但在 PDF 中找不到了。

有没有人提到它或请确认我所说的是否正确？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T06:55:18.973

您感兴趣的参考资料可以在[Beans 规范](http://download.oracle.com/otn-pub/jcp/7224-javabeans-1.01-fr-spec-oth-JSpec/beans.101.pdf)的第 8.8 节中找到。

话虽如此，它并没有明确涵盖您的特殊情况`gId`/ `gURL`。规范说要提供 getter/setter，我们只需将第一个字母大写。要从 getter/setter 中恢复属性，如果前两个字母是大写的，则整个属性保持原样。否则，我们将第一个字母取消大写。因此，您的 getter 将变为`getGURL`，但您的属性将从 getter 错误地恢复为`GURL`。你有同样的问题`gId`。

因此，该规范似乎不允许您提供任何属性的一致翻译，即第一个小写字符后跟一个大写字符。

我的建议是要么采用完全小写的属性，要么将小写前缀扩展为两个字母（`glURL`例如）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-06T12:44:55.873

为了更具体（正如 Luca 和[这里](https://stackoverflow.com/q/1991316)所说的），规范告诉你有一个方法可以告诉你：[java.beans.Introspector.decapitalize(String)](http://docs.oracle.com/javase/6/docs/api/java/beans/Introspector.html#decapitalize%28java.lang.String%29)。

# hadoop - 什么是 Facebook 的 HiPal 数据分析工具，它是如何工作的？

> ID：11114149
> 
> 赞同：0
> 
> 时间：2012-06-20T06:43:26.357
> 
> 标签：hadoop, hive

Facebook 的 HiPal 数据分析工具有哪些知识管理功能，它是如何工作的？它是纯粹为 hadoop 环境构建的还是可以与其他数据库一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T14:23:24.000

虽然这只是猜测，因为 HiPal 尚未向公众发布。

HiPal 是一个名为 HIVE 的类 SQL 程序的 UI。Hive 是一个程序，它允许您对 Hadoop 文件系统中的文件运行类似 SQL 的查询。Hadoop 是用于大型（数 TB）数据集的分布式 map/reduce 架构。

但由于它不是开源的，我们无法掌握它。但这不会用于其他数据库系统。

[http://www.facebook.com/note.php?note_id=89508453919](http://www.facebook.com/note.php?note_id=89508453919)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T13:01:45.287

Facebook 使用 Hive ( [http://borthakur.com/ftp/hadoopworld.pdf](http://borthakur.com/ftp/hadoopworld.pdf) ) 来处理数据。Hive 是一个类似 SQL 的框架接口，运行在 Hadoop 之上，由 Facebook 团队自己创建，后来捐赠给 apache 社区。

他们说他们使用 Hive/Hadoop 分析了 20 PB 的数据。

这是一个快速入门指南： [https ://cwiki.apache.org/confluence/display/Hive/GettingStarted](https://cwiki.apache.org/confluence/display/Hive/GettingStarted)

# ios - 清理数据库条目

> ID：11114150
> 
> 赞同：0
> 
> 时间：2012-06-20T06:43:27.790
> 
> 标签：ios, xcode, core-data, nsmanagedobjectcontext

在 App v1.0 上，我让用户可以在数据库中添加数据，一次只能添加一个属性。例如，假设用户可以添加人名和他/她的姓氏。稍后，假设他/她增加了年龄。数据库将如下所示：

![在此处输入图像描述](../Images/596548844e820abfd3a496cc50287de0.png)

（其中属性“名称”是唯一的）

我将更新代码，以便在保存另一个属性（比如“别名”）之前，它会检查该名称是否已被使用。如果是，它将在同一个条目中添加别名，如果不是，它将创建一个新条目。

我还想做的是清理数据库。在此示例中，它将合并条目 #1 和 #2，以获得类似：

![在此处输入图像描述](../Images/9cf2d8d5c399da4aa6f0ccc72f0ad418.png)

（以前的条目 #2 将被删除）。

我似乎记得有一种自动的方法可以做到这一点，但我不确定我是否想象过它，或者它是否在其他地方，例如 MS Access，因为我无法再次找到它。

那么，有没有办法自动做到这一点，或者我应该探索一种编程方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T06:59:58.067

```
 NSError *err = nil;
 NSUInteger count = [managedObjectContext countForFetchRequest:request error:&err];
 [request release];
 if (!err)
 {
   return count;
 }
  else
   return 0; 
```

# java - 在组件下方绘制图形

> ID：11114156
> 
> 赞同：0
> 
> 时间：2012-06-20T06:43:45.493
> 
> 标签：java, swing, animation, background, jtextfield

因此，我目前正在制作一个登录屏幕，该屏幕具有使用 Graphics 对象和“游戏循环”制作的酷炫背景效果。当我添加`JTextField`虽然时，它会在所有内容下方而不是上方看到。有没有办法让图形在里面的所有组件下面绘制`JFrame`？

这是图形的图像：

![在此处输入图像描述](../Images/26ac1e03057894e89448d7bdf1fe8fa5.png)

文本字段就在那里，就在被绘制到框架表面的所有内容的下方。我想以某种方式重新排序它，以便它在组件下方绘制。

这是我当前的帧代码：

```
 frame = new JFrame("Login");
    frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
    frame.getContentPane().setPreferredSize(new Dimension(450, 200));
    frame.getContentPane().setBackground(Color.black);
    frame.setBackground(Color.black);
    frame.setLayout(new FlowLayout());

    JTextField user = new JTextField(20);
    user.setLocation(100, 200);
    user.setVisible(true);
    frame.add(user);

    frame.pack();
    frame.setVisible(true);

    frame.createBufferStrategy(2);
    buff = frame.getBufferStrategy();

    Painter painter = new Painter();
    frame.add(painter); 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T07:00:55.860

[`AnimationTest`](https://stackoverflow.com/a/3256941/230513)显示了一种方法。它覆盖`paintComponent()`并调用`super.paintComponent()`以确保组件呈现在背景之上。单击任意位置以定位文本字段；调整大小以查看默认值如何`FlowLayout`工作。`JPanel`默认情况下使用现有的缓冲策略进行双缓冲。

# gimp - 如何获得 Gimp 的权限

> ID：11114162
> 
> 赞同：2
> 
> 时间：2012-06-20T06:44:10.523
> 
> 标签：gimp

我使用 gimp 创建了自定义画笔。当我尝试将其保存在 gimp 目录中时，出现以下错误。“'C:\Program Files\GIMP 2\share\gimp\2.0\brushes\mybrush.gbr' for writing: Permission denied ”。请帮助我如何获得访问权限。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T06:46:47.180

我假设您使用的是 Windows 7。每当您在保存项目/文件时遇到错误，表明您没有正确的权限，您需要在 GIMP 上获得管理员/root 访问权限。

在 Windows 中，您可以通过右键单击 .exe/图标并查找“使用管理权限打开/运行”选项来执行此操作。

不确定如何在 Linux 中执行此操作，但我假设您必须使用 sudo 和/或 -su 的 root 访问权限运行您的程序。

当您拥有管理权限时，您应该可以将所有内容保存在所需位置

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T19:31:21.570

默认情况下，在普通用户无法在磁盘上的任何位置创建文件的操作系统（如任何时代的 Linux 或 Windows 7）中，GIMP 的默认资源文件夹与程序一起安装，并且是系统范围的。没有管理权限的用户无法写入这些文件夹。

当然，以管理权限运行 GIMP 可以解决这个问题，但这不是“正确的做法”。您要做的是转到编辑->首选项并在适当的文件夹资源上，创建一个新文件夹，这次作为普通用户，这些资源将被保留。

从它们开始，写入操作将发生在新创建的文件夹上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-29T05:10:55.783

右键单击.exe（.exe-icon）--->属性--->兼容性--->输入设置=取消选中“关闭此程序的高级文本服务” - 希望有帮助！

# java - 将 url 参数从 android 应用程序发送到 servlet

> ID：11114164
> 
> 赞同：0
> 
> 时间：2012-06-20T06:44:18.607
> 
> 标签：java, android, http, url

我想将此 url 从一个 android 类发送到我的 servlet。我已经为 servlet 编写了代码，它捕获了参数的值，但我无法发送这个 url。执行此操作的代码是什么？

```
 double lat = Double.parseDouble(coordinates[0]);
    double lng = Double.parseDouble(coordinates[1]);
    URL url;
    try {
    URL url = new URL("http://localhost:8080/ExtraServ/AssessmentServlet?param1="+lat+lng);

    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

我的小服务程序代码：

```
 req.setCharacterEncoding("UTF-8");
            resp.setCharacterEncoding("UTF-8");
            final String par1 =  req.getParameter("param1");
            final String par2 = req.getParameter("param2");
            FileWriter fstream = new FileWriter("C:\\Users\\Hitchhiker\\Desktop\\out2.txt");
            BufferedWriter out = new BufferedWriter(fstream);
            out.write(par1);
            out.append(" ");
            out.append(par2);
            out.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T06:51:04.340

localhost 将是您自己的设备 (127.0.0.1)。您必须选择您的 servlet 的 ip 并连接到同一个网络。

您的代码中缺少连接部分：

```
URLConnection urlConnection = url.openConnection();
urlConnection.connect(); 
```

# java - Windows 7 中的内部路径映射

> ID：11114168
> 
> 赞同：0
> 
> 时间：2012-06-20T06:44:25.673
> 
> 标签：java, windows-7, 64-bit

我有一台 windows7 机器，我在其中通过以下路径中的 java 代码创建文件

**C:\用户\123\应用程序数据\XYZ**

但实际上它是在这里创建的

**C:\Users\123\AppData\Roaming\XYZ**

请告诉我为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T06:55:38.290

因为一个是旧路径，另一个是当前首选文件夹路径。两者都通向相同的位置。

参见例如[应用程序兼容性：连接点和备份应用程序](http://msdn.microsoft.com/en-us/library/windows/desktop/bb756982.aspx)：

> 在 Windows Vista® 和 Windows Server® 2008 中，用户数据的默认位置已更改。此更改的一个示例是 Documents and Settings 目录，该目录已从 %systemdrive%\Documents and Settings 移动到 %systemdrive%\Users。

和：

> ..\Documents and Settings\\Application Data\ [映射到] ..\Users\\AppData\Roaming

# oracle - Oracle 客户端版本 9 和 11 可以安装在同一台机器上吗？

> ID：11114170
> 
> 赞同：0
> 
> 时间：2012-06-20T06:44:31.340
> 
> 标签：oracle, oracle-call-interface, odac

我有一个使用 odac(11.2) 和 oracle 客户端 11.2 的程序。现在我想将它部署到一个已经安装了 oracle 9i 客户端的盒子上。

一些现有的程序依赖于它，所以我担心新客户会损害现有的程序。这是真的？我怎样才能让它们都正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T07:05:03.010

通常，您将 oracle 产品安装在不同目录（如`/ora/app/oracle/product/9.2`和`/ora/app/oracle/product/11.2`）中的专用 ORACLE_HOME 中。然后你将`$ORACLE_HOME`and`$PATH`变量设置到那个可以正常工作的目录。

我们在一台机器上使用从 8.1.6 到 11.2 的许多不同客户端版本。每个应用程序都有一个自己的 shell 脚本，用于在启动之前设置正确的环境。

# c# - 如何使用使用 VS 2008 报告向导创建的 .rdlc 报告？

> ID：11114175
> 
> 赞同：0
> 
> 时间：2012-06-20T06:44:39.670
> 
> 标签：c#, visual-studio-2008, crystal-reports

我有一个 ac# 项目，我在其中创建了一个数据集，然后通过报告向导创建 3 个报告的步骤。rdlc 文件现在在我的项目中，并且我的 Winforms 项目中有一个 reportviewer 控件。问题是，在完成设置数据集和报告的过程之后，我如何让它们中的任何一个显示在报告查看器中？当我尝试将 ReportEmbeddedResource 设置为 rdlc 文件之一时，我在查看器中收到一条消息，指出尚未设置数据源。我在创建数据集和报告时这样做了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T07:05:01.180

以下是有关如何使用本地报告的详细教程：http: [//msdn.microsoft.com/en-us/library/ms252075%28v=vs.90%29](http://msdn.microsoft.com/en-us/library/ms252075%28v=vs.90%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T07:16:48.737

去年我不得不这样做，本地报道有点头疼。问题是 .rdlc 文件没有填充他们的数据集（他们忽略了所有的`<Query`标签。所以，我要做的是编写一个自定义的 .ascx 来解析`<Query>`.rdlc 中的标签，填充数据集，并传递新的文件到 ReportViewer 控件。

`<Query>`基本步骤： 1\. 根据任意标签内的 QueryParameters 构建一组输入字段。这通常涉及级联组合框，因为参数可能是相关的。2.当用户提交表单时，填写每个关联的DataSet `<Query>`。

如果您在测试 RDL 时查看 VS 2008 中输入参数的方式，您将制作的控件正是这样做的。所有这些都必须完成，因为客户端请求在运行报告时不必进行身份验证......呃。有趣的是，我从未找到 RLD/RDLC XML 的完整架构，因此我不得不查看大量报告文件以找出所有变化。

编辑：我错过了你说 WINFORMS 的部分。我的场景是针对 Webforms，尽管它可能仍然适用我从未在 Winforms 中使用过 ReportViewer 控件。

# java - 如何在Java中以编程方式记录传递给方法的参数

> ID：11114179
> 
> 赞同：4
> 
> 时间：2012-06-20T06:44:50.867
> 
> 标签：java, logging

如何记录在运行时传递给方法的参数？是否有任何 Java 库为此或可以引发任何异常来监视它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T07:06:52.480

您可以使用 javassist 的[`ProxyFactory`](http://www.javassist.org/html/javassist/util/proxy/ProxyFactory.html)或[`Translator`](http://www.javassist.org/html/javassist/Translator.html)更改以在运行时打印参数：

* * *

## 使用`Translator`（带有新的`ClassLoader`）：

```
public static class PrintArgumentsTranslator implements Translator {

    public void start(ClassPool pool) {}

    @Override
    public void onLoad(ClassPool pool, String cname)
            throws NotFoundException, CannotCompileException {
        CtClass c = pool.get(cname);

        for (CtMethod m : c.getDeclaredMethods()) 
            insertLogStatement(c, m);
        for (CtConstructor m : c.getConstructors())
            insertLogStatement(c, m);
    }

    private void insertLogStatement(CtClass c, CtBehavior m) {
        try {
            List<String> args = new LinkedList<String>();
            for (int i = 0; i < m.getParameterTypes().length; i++)
                args.add("$" + (i + 1));

            String toPrint = 
                "\"----- calling: "+c.getName() +"." + m.getName() 
                + args.toString()
                .replace("[", "(\" + ")
                .replace(",", " + \", \" + ")
                .replace("]", "+\")\""); 
            m.insertBefore("System.out.println("+toPrint+");");
        } catch (Exception e) { 
            // ignore any exception (we cannot insert log statement)
        }
    }
} 
```

*请注意，您需要更改默认值`ClassLoader`，以便您可以检测类，因此在调用您之前，`main`您需要插入以下代码：

```
public static void main(String[] args) throws Throwable {
    ClassPool cp = ClassPool.getDefault();
    Loader cl = new Loader(cp);
    cl.addTranslator(cp, new PrintArgumentsTranslator());
    cl.run("test.Test$MyApp", args);  // or whatever class you want to start with
}

public class MyApp {

    public MyApp() {
        System.out.println("Inside: MyApp constructor");
    }

    public static void main(String[] args) {
        System.out.println("Inside: main method");
        new MyApp().method("Hello World!", 4711);
    }

    public void method(String string, int i) {
        System.out.println("Inside: MyApp method");
    }
} 
```

输出：

```
----- calling: test.Test$MyApp.main([Ljava.lang.String;@145e044)
Inside: main method
----- calling: test.Test$MyApp.Test$MyApp()
Inside: MyApp constructor
----- calling: test.Test$MyApp.method(Hello World!, 4711)
Inside: MyApp method 
```

* * *

## 使用`ProxyFactory`

```
public class Test {

    public String method(String string, int integer) {
        return String.format("%s %d", string, integer);
    }

    public static void main(String[] args) throws Exception {

        ProxyFactory f = new ProxyFactory();
        f.setSuperclass(Test.class);

        Class<?> c = f.createClass();
        MethodHandler mi = new MethodHandler() {
            public Object invoke(
                    Object self, Method m, Method proceed, Object[] args)
                throws Throwable {

                System.out.printf("Method %s called with %s%n", 
                                  m.getName(), Arrays.toString(args));

                // call the original method
                return proceed.invoke(self, args);
            }
        };

        Test foo = (Test) c.newInstance();
        ((Proxy) foo).setHandler(mi);
        foo.method("Hello", 4711);
    }
} 
```

输出：

```
Method method called with [Hello, 4711] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T07:15:18.993

您应该尝试使用 AOP。这是一个或多或少做你想要的例子：[How to use AOP with AspectJ for logging?](https://stackoverflow.com/questions/8839077/how-to-use-aop-with-aspectj-for-logging)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T06:56:57.957

我认为您可以注册您的`MBean`然后只有您才能使用 JMX 进行检查。

**链接：** [http ://docs.oracle.com/cd/E19159-01/819-7758/gcitp/index.html](http://docs.oracle.com/cd/E19159-01/819-7758/gcitp/index.html)

# asp.net - asp如何更改时区

> ID：11114183
> 
> 赞同：0
> 
> 时间：2012-06-20T06:45:00.220
> 
> 标签：asp.net, time

我正在寻找一种在 asp 中更改时区的方法，在搜索时，我认为我们可以通过 web.config 文件来完成，但不知道如何将其设置为与约旦时间同步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:00:19.310

“更改时区”是什么意思？当前时区设置是 Windows 配置文件的属性，因此属于运行 w3wp.exe 进程的用户身份。没有像 CultureInfo 那样的每线程设置。

在我的应用程序中，当我需要自定义时区支持时，我将 TimeZoneInfo 对象存储为应用程序用户设置的一部分（并存储在会话状态中）。在内部，所有日期和时间都是 UTC，我只是在渲染时使用用户的 TimeZoneInfo 实例将这些 UTC 值转换为本地值。我建议你做类似的事情：

```
// At user login or session start
Session["TimeZone"] = TimeZoneInfo.FindSystemTimeZoneById("Jordan Standard Time");

// Static helper extension method to make local
public static DateTime ToLocal(this DateTime utcDateTime) {
    TimeZoneInfo tz = Session["TimeZone"];
    return TimeZoneInfo.ConvertTimeFromUtc( utcDateTime, tz );
}

// Use in ASP.NET page
<%= myDateTimeValue.ToLocal() %> 
```

# c# - GridView 列验证，显示错误信息不要失去焦点

> ID：11114191
> 
> 赞同：3
> 
> 时间：2012-06-20T06:45:31.170
> 
> 标签：c#, winforms, gridview, devexpress

我需要验证一个 gridView 列，例如该列中所有元素的总和 <=100;

如果用户输入一个值并且总和超过了我想显示自定义错误消息的限制。

我尝试在列的存储库上使用此事件编辑：

```
 void pinEditRepositoryItem_Validating(object sender, System.ComponentModel.CancelEventArgs e)
    {
        e.Cancel = true;
        gridview1.SetColumnError(m_imixGridView.Columns["MyColumn"], "ColumnSum must be <= 100", DevExpress.XtraEditors.DXErrorProvider.ErrorType.Critical);
    } 
```

但是，当设置

```
 e.Cancel = true; 
```

我收到默认消息“无效值”。

如果我使用

```
 gridview1.SetColumnError(m_imixGridView.Columns["MyColumn"], "ColumnSum must be <= 100", DevExpress.XtraEditors.DXErrorProvider.ErrorType.Critical); 
```

只是，错误消息是正确的，但是如果我在焦点之外单击，则会丢失。

我已经看到有多种验证行的方法，但没有找到最适合这种情况的解决方案。

如果验证失败，是否可以禁用单元格上的“不聚焦”？

非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T09:47:32.353

[Source](http://www.devexpress.com/Support/Center/p/Q384408.aspx)

> I am afraid it is difficult to determine the cause of the issue based on the provided information. Generally, the `ValidatingEditor` event fires when an *active editor is closed*, and its *value is changed*. The `ValidateRow` event fires when a `current row loses focus`, and some of its values has been changed.

I suggest you to go through following links:
[Validating Rows](http://documentation.devexpress.com/#WindowsForms/CustomDocument749)
[Validating Editors](http://documentation.devexpress.com/#WindowsForms/CustomDocument748)
[BaseView.ValidatingEditor Event](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridViewsBaseBaseView_ValidatingEditortopic)

Check this example:

```
using DevExpress.XtraGrid.Views.Grid;
using DevExpress.XtraEditors.Controls;

private void gridView1_ValidatingEditor(object sender, BaseContainerValidateEditorEventArgs e) {
    GridView view = sender as GridView;
    if(view.FocusedColumn.FieldName == "Discount") {
        //Get the currently edited value 
        double discount = Convert.ToDouble(e.Value);
        //Specify validation criteria 
        if(discount < 0) {
            e.Valid = false;
            e.ErrorText = "Enter a positive value";
        }
        if(discount > 0.2) {
            e.Valid = false;
            e.ErrorText = "Reduce the amount (20% is maximum)";
        }
    }
}

private void gridView1_InvalidValueException(object sender, InvalidValueExceptionEventArgs e) {
    //Do not perform any default action 
    e.ExceptionMode = DevExpress.XtraEditors.Controls.ExceptionMode.NoAction;
    //Show the message with the error text specified 
    MessageBox.Show(e.ErrorText);
} 
```

**Editor validation** takes place when attempting to save the edit value (using the `PostEditor` method) or when closing the active editor. First, the automatic validation is performed. The editor determines whether it can accept the entered value. After the automatic validation has been performed, the `ValidatingEditor` event is raised. Handle this event to implement custom constraints on cell values.

If your condition fails then set the `e.Valid = false;` and the `e.ErrorText = "ColumnSum must be <= 100";` and also handle the `InvalidValueException` event of gridview.

# excel - 在 VBA 中编写下标值

> ID：11114192
> 
> 赞同：5
> 
> 时间：2012-06-20T06:45:37.637
> 
> 标签：vba中进行, excel, vba

我有一个字符串：
`Range("T4").Value = "Rule 13s voilation"`

我想写`13s`像 1 [3] [s]
ie`3`并且`s`是`1`.

请建议我应该如何在[vba中进行](/questions/tagged/vba "显示标记为“vba”的问题")

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-20T06:54:28.537

尝试以下操作：

```
Range("T4").Value = "Rule 13s voilation"
Range("T4").Characters(Start:=7, Length:=2).Font.Subscript = True 
```

我不确定这对您使用动态字符串长度有何帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-20T06:55:55.273

尝试在录制宏时手动执行此操作，然后查看生成的代码。那会给你答案。

这是一个干净的答案：

```
With Range("T4")
    .Value = "Rule 13s voilation" ' (sic)
    .Characters(Start:=7, Length:=2).Font.Subscript = True
End With 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-19T13:08:28.340

我使用此功能将 2 个单元格连接为一个。第一个是文本，第二个是一系列参考评论

```
Sub setRefWithRemark()

Dim aCellRef, aCellRem, aCelTarget As Range
Dim aRow As Range

For Each aRow In Range("rgtensileRefWithRemark").Rows
    Set aCellRef = aRow.Cells(1, 1)
    Set aCellRem = aRow.Cells(1, 12)
    Set aCellTarget = aRow.Cells(1, 17)
    If aCellRef.Text <> "" Then
        With aCellTarget
           .value = aCellRef.Text & cTextSeparator & aCellRem.Text ' (sic)
           .Characters(Start:=Len(aCellRef.Text) + 2, Length:=Len(aCellRem.Text)).Font.Superscript = True
        End With
    End If
    Next
End Sub 
```

# mysql - 连接来自两个不同服务器的表

> ID：11114197
> 
> 赞同：41
> 
> 时间：2012-06-20T06:46:05.203
> 
> 标签：mysql

我有两个不同的服务器`server1`，`server2`现在我有`db1`in`server1`和`db2`in `server2`。我正在尝试像这样在 MySQL 中加入这两个表。

```
Select a.field1,b.field2  
FROM  [server1, 3306].[db1].table1 a  
Inner Join [server2, 3312].[db2].table2 b  
ON a.field1=b.field2 
```

但我收到错误。在 MYSQL 中是可能的。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-06-21T06:22:05.923

### 是的，在 MySQL 中是可能的。

[以前](https://stackoverflow.com/questions/810349/mysql-cross-server-select-query)也有类似的问题。您必须使用[FEDERATED ENGINE](http://dev.mysql.com/doc/refman/5.1/en/federated-storage-engine.html)来执行此操作。这个想法是这样的：

您必须有一个基于另一个远程位置的表的联合表才能以您想要的方式使用。表的结构必须完全相同。

```
CREATE TABLE federated_table (
    id     INT(20) NOT NULL AUTO_INCREMENT,
    name   VARCHAR(32) NOT NULL DEFAULT '',
    other  INT(20) NOT NULL DEFAULT '0',
    PRIMARY KEY  (id),
    INDEX name (name),
    INDEX other_key (other)
)
ENGINE=FEDERATED
DEFAULT CHARSET=latin1
CONNECTION='mysql://fed_user@remote_host:9306/federated/test_table'; 
```

[[来源答案]](https://stackoverflow.com/a/1546339/295264)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-08T09:24:25.657

复制将是替代且合适的解决方案。

server1 - db1 -> 复制到 server2。（现在 db1 和 db2 将位于同一服务器 server2 中。加入将很容易）。

注意：如果 server2 在存储/进程等方面有足够的能力承担 db1 的负载，那么 wen 可以进行复制。正如@brilliand 提到的，是的，Federated 将进行大量的手动工作并且过程缓慢。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-02-12T22:24:23.643

这是一种 hack，它不是连接，但我使用 bash 函数让它感觉就像我在做跨服务器查询：

显式版本：

```
tb2lst(){
    echo -n "("
    tail -n +2 - | paste -sd, | tr -d "\n"
    echo ")"
}

id_list=$(mysql -h'db_a.hostname' -ume -p'ass' -e "SELECT id FROM foo;" | tb2lst)
mysql -h'db_b.hostname' -ume -p'ass' -e "SELECT * FROM bar WHERE foo_id IN $id_list"

+--------|-----+
| foo_id | val |
+--------|-----+
| 1      | 3   |
| 2      | 4   |
+--------|-----+ 
```

我写了一些包装函数，我保存在我的 bashrc 中，所以我认为它只是一个命令：

```
db_b "SELECT * FROM bar WHERE foo_id IN $(db_a "SELECT id FROM foo;" | tb2lst);"

+--------|-----+
| foo_id | val |
+--------|-----+
| 1      | 3   |
| 2      | 4   |
+--------|-----+ 
```

至少对于我的用例，这将两个查询拼接在一起的速度足够快，以至于输出等同于连接，然后我可以将输出通过管道传输到需要它的任何工具中。

请记住，一个查询中的 id 列表最终会作为另一个查询中的查询文本。如果您以这种方式“加入”太多数据，您的操作系统可能会限制查询的长度 ( [https://serverfault.com/a/163390](https://serverfault.com/a/163390) )。所以请注意，对于非常大的数据集，这不是一个糟糕的解决方案。我发现用 pymysql 之类的 mysql 库做同样的事情可以解决这个限制。

# javascript - on 和 hover 不一起工作

> ID：11114199
> 
> 赞同：1
> 
> 时间：2012-06-20T06:46:13.153
> 
> 标签：javascript, jquery, html

我的 jquery 代码它不工作时

```
 $("a").on("hover",function(){$(this).css("background","#ccc");},function(){$(this).css("background","#fff")}); 
```

但是在工作的时候

```
$("a").hover(function(){$(this).css("background","#ccc");},function(){$(this).css("background","#fff")}); 
```

如何使它与悬停一起工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T06:48:13.873

在`.on()`悬停的情况下，它看起来像

```
$("a").on('hover', function(e) {
  if(e.type =='mouseenter') {
   // code for mouseenter
  } else {
   // code for mouseleave
  }
}); 
```

但是 for`.hover()`是接受两个功能，第一个 for`mouseenter`和第二个 for `mouseleave`。

```
$('a').hover(
  // for mouseenter
  function() {

  },
  // for mouseleave
  function() {

  }
); 
```

因此，如果您想使用，`.on()`那么您的代码将：

```
$("a").on('hover', function(e) {
  if(e.type =='mouseenter') {
     // code for mouseenter
     $(this).css("background","#ccc");
  } else {
     // code for mouseleave
     $(this).css("background","#fff")
  }
}); 
```

正如**[@ThiefMaster](https://stackoverflow.com/users/298479/thiefmaster)**评论，如果你想单独绑定`mouseenter`，`mouseleave`那么你可以尝试：

```
$('a')
     .mouseenter(function() {
        $(this).css('background', '#ccc');
      })
     .mouseleave(function() {
         $(this).css('background', '#fff');
      }); 
```

或者使用`.on()`你可以做

```
$('a').on({
  mouseenter: function() {
     $(this).css('background', '#ccc');
  },
  mouseleave: function() {
     $(this).css('background', '#fff');
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T06:49:35.503

悬停是事件的快捷`mouseenter`方式`mouseleave`。所以你可以绑定那些使用 on like

```
$("a").on({ 
           mouseenter: function(){$(this).css("background","#ccc");},
           mouseleave: function(){$(this).css("background","#fff");}
         }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T06:55:16.910

这是一个现场[演示](http://jsfiddle.net/NB7Yb/)

和代码

```
$("a").on('hover', function(e) {
  if(e.type =='mouseenter') {
      // do something when mouse enter
      alert("mouse enter");
  } else {
      // do something when mouse leave
      alert("mouse leave");
  }
});​ 
```

# html - 在浏览器中显示不同的单词

> ID：11114208
> 
> 赞同：0
> 
> 时间：2012-06-20T06:46:42.843
> 
> 标签：html, character-encoding

我正在一个有一些挪威语单词的网站上工作。当我在 a 中使用“På”时，`<span>`它在浏览器中显示为“PÃ¥”。这只发生在特定页面上。对于其他人来说它工作正常。我试图从其他工作页面复制粘贴。但没有效果。它显示“PÃ¥”而不是“På”。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T06:49:55.300

你需要使用`&aring`insead of`å`

请参阅此链接以获取 html 代码 - [http://www.ascii.cl/htmlcodes.htm](http://www.ascii.cl/htmlcodes.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T06:50:22.117

尝试使用此[转换器将您的特殊字符转换为等效的 HTML 实体](http://www.coach-tech.com/entityconverter.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T08:41:32.117

页面的字符编码错误：实际编码与声明的编码不同。*对所有*非 Ascii 字符使用实体引用会隐藏症状（具有相关风险，稍后当有人插入“å”时，事情会再次出错）。但*解决方案*是消除冲突。

查看教程[在 HTML 中声明字符编码](http://www.w3.org/International/questions/qa-html-encoding-declarations)。如果您需要进一步的帮助，发布 URL（不仅仅是所有代码的副本）是必不可少的。

# jquery - 带有队列功能的Jquery动画只执行一次

> ID：11114219
> 
> 赞同：0
> 
> 时间：2012-06-20T06:47:36.713
> 
> 标签：jquery, queue, jquery-animate

我有一个盒子，当我点击它时，我希望盒子先动画然后将其返回到原始位置，代码：

```
$('#test').click(function () {    //#test is the box
        var o ={       //remember the original position
            "x":"0px",
            "y":"0px"           
        }

        $(this).animate({
            "left": "15px",
            "top": "15px"           
        }).queue(function () { //afte execute the animate, return to its origin position
            $(this).css({  
                'left': o.x,
                'top': o.y
            })               
        })
    }) 
```

但问题是，这个效果只能执行一次，当我第二次点击它时，它永远不会执行，那为什么会这样呢？我该如何解决这个问题？

这是唯一的[例子](http://jsfiddle.net/hh54188/f5ZUJ/)：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T06:53:58.087

请试试[这个](http://jsfiddle.net/79Nqp/1/)演示

我使用了回调。我希望我理解正确。

编辑：

这是javascript代码：

```
$(function() {
    $('#test').click(function() {
        var o = {
            "x": "0px",
            "y": "0px"
        }

        $(this).animate({
            "left": "15px",
            "top": "15px"
        }, function() {
            $(this).css({
                'left': o.x,
                'top': o.y
            })
        });
    })
})​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T08:09:40.187

KiroSora09 的答案可能更简单，但使用队列函数的正确方法是在执行后从队列中删除函数，如下所示：

```
$('#test').click(function () {    //#test is the box
    var o ={       //remember the original position
        "x":"0px",
        "y":"0px"           
    }

    $(this).animate({
        "left": "15px",
        "top": "15px"           
    }).queue(function(next) { //after execute the animate, return to its origin position
        $(this).css({  
            'left': o.x,
            'top': o.y
        })               
        next();
    });
})​; 
```

或像这样：

```
$('#test').click(function () {    //#test is the box
    var o ={       //remember the original position
        "x":"0px",
        "y":"0px"           
    }

    $(this).animate({
        "left": "15px",
        "top": "15px"           
    }).queue(function() { //after execute the animate, return to its origin position
        $(this).css({  
            'left': o.x,
            'top': o.y
        }).dequeue();
    });
})​; 
```

在这里工作演示：http: [//jsfiddle.net/jfriend00/qM2CJ/](http://jsfiddle.net/jfriend00/qM2CJ/)

文档[在](http://api.jquery.com/queue/)`.queue(fn)`这里。

# mysql - MySQL排名查询

> ID：11114224
> 
> 赞同：2
> 
> 时间：2012-06-20T06:47:56.673
> 
> 标签：mysql

询问：

```
SELECT u.user_id,r.totalVotes votes,r.totalPoints rating,@row:=@row+1 rank 
FROM mismatch_user u 
LEFT JOIN ratingItems r ON u.user_id=r.uniqueName,
(SELECT @row:=0) pos 
ORDER BY votes DESC,rating DESC 
```

输出：

```
user_id    votes   rating  rank
2            2      10      2
6            2      9       6
3            2      5       3
1            1      5       1
4            1      5       4
27           1      5       27
9            0      0       9 
```

排名悲惨地没有告诉我真相，它基于user_id。谁能帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T07:02:17.640

这有帮助吗？

```
select r.*, @row:=@row+1 rank 
  from 
    (SELECT u.user_id,r.totalVotes votes,r.totalPoints rating
       FROM mismatch_user u 
         LEFT JOIN ratingItems r ON u.user_id=r.uniqueName
    ) r
    join (SELECT @row:=0) pos 
ORDER BY r.votes DESC, r.rating DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T07:00:05.570

您正在生成一个序列，这可能会导致棘手的行为。

如果您的查询是正确的，那么现在按排名排序的**最安全**方法是将其嵌入另一个 SELECT 中：

```
SELECT *
FROM (
    SELECT u.user_id,r.totalVotes votes,r.totalPoints rating,@row:=@row+1 rank 
    FROM mismatch_user u 
    LEFT JOIN ratingItems r ON u.user_id=r.uniqueName,
    (SELECT @row:=0) pos 
    ORDER BY votes DESC,rating DESC) T
ORDER BY rank; 
```

# python - 使用 pip 安装 SciPy 和 NumPy

> ID：11114225
> 
> 赞同：161
> 
> 时间：2012-06-20T06:48:00.180
> 
> 标签：python, numpy, scipy, pip, apt

我正在尝试在我分发的包中创建所需的库。它需要[SciPy](http://en.wikipedia.org/wiki/SciPy)和[NumPy](http://en.wikipedia.org/wiki/NumPy)库。在开发时，我安装了两者

```
apt-get install scipy 
```

它安装了 SciPy 0.9.0 和 NumPy 1.5.1，并且运行良好。

我想使用`pip install`- 来做同样的事情，以便能够在我自己的包的 setup.py 中指定依赖项。

问题是，当我尝试时：

```
pip install 'numpy==1.5.1' 
```

它工作正常。

但是之后

```
pip install 'scipy==0.9.0' 
```

惨败，与

```
raise self.notfounderror(self.notfounderror.__doc__)

numpy.distutils.system_info.BlasNotFoundError:

Blas (http://www.netlib.org/blas/) libraries not found.

Directories to search for the libraries can be specified in the

numpy/distutils/site.cfg file (section [blas]) or by setting

the BLAS environment variable. 
```

我如何让它工作？

* * *

## 回答 #1

> 赞同：334
> 
> 时间：2015-08-05T18:51:21.053

这在 Ubuntu 14.04 上对我有用：

```
sudo apt-get install libblas-dev liblapack-dev libatlas-base-dev gfortran
pip install scipy 
```

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2015-02-11T16:32:30.917

如果您使用的是 Ubuntu，则需要 libblas 和 liblapack 开发包。

```
aptitude install libblas-dev liblapack-dev
pip install scipy 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2013-02-01T04:52:24.430

我假设我的回答中有 Linux 经验；我发现要`pip install scipy`顺利进行，需要三个先决条件。

去这里：[安装 SciPY](http://www.scipy.org/Installing_SciPy/BuildingGeneral)

按照说明下载、构建和导出[BLAS](http://en.wikipedia.org/wiki/Basic_Linear_Algebra_Subprograms)的环境变量，然后是[LAPACK](http://en.wikipedia.org/wiki/LAPACK)。注意不要只是盲目地剪切'n'粘贴shell命令-根据您的体系结构等，您需要选择几行，并且您需要修复/添加它错误地假定为的正确目录好。

您可能需要的第三件事是**yum install numpy-f2py**或等效的。

哦，是的，最后，您可能需要**yum install gcc-gfortran**因为上面的库是[Fortran](http://en.wikipedia.org/wiki/Fortran)源代码。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-05-18T04:19:03.027

由于先前使用 yum 安装的说明已被破坏，因此此处是在 Fedora 等设备上安装的更新说明。我已经在“Amazon Linux AMI 2016.03”上对此进行了测试

```
sudo yum install atlas-devel lapack-devel blas-devel libgfortran
pip install scipy 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-12-24T20:39:29.830

我正在做一个依赖 numpy 和 scipy 的项目。在 Fedora 23 的全新安装中，使用 Python 3.4 的 python 虚拟环境（也适用于 Python 2.7），并在我的 setup.py 中使用以下内容（在`setup()`方法中）

```
setup_requires=[
    'numpy',
],
install_requires=[
    'numpy',
    'scipy',
], 
```

我发现我必须运行以下命令才能`pip install -e .`开始工作：

```
pip install --upgrade pip 
```

和

```
sudo dnf install atlas-devel gcc-{c++,gfortran} subversion redhat-rpm-config 
```

这`redhat-rpm-config`是 scipy 使用的`redhat-hardened-cc1`，而不是常规的`cc1`

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-04-08T15:20:53.727

在**windows** `python` **3.5**上，我设法`scipy`使用`conda` **not** `pip`进行安装：

```
conda install scipy 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-06-20T06:51:59.943

这是什么操作系统？答案可能取决于所涉及的操作系统。但是，您似乎需要找到这个[BLAS](http://en.wikipedia.org/wiki/Basic_Linear_Algebra_Subprograms)库并安装它。它似乎不在 PIP 中（因此您必须手动完成），但是如果您安装它，它应该可以让您进行 SciPy 安装。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-17T15:36:43.673

就我而言，升级 pip 就可以了。另外，我已经使用 -U 参数安装了 scipy（将所有软件包升级到最后一个可用版本）

# jquery - Jquery插入图像使我的表单崩溃

> ID：11114229
> 
> 赞同：1
> 
> 时间：2012-06-20T06:48:16.233
> 
> 标签：jquery, css, jquery-validate

我正在使用 jQuery 验证我有这样的问题：我插入图像，当输入有效与否时。当他们插入一个图像时，它会完全显示，但要设置边距并让我的 div 崩溃，而第二个 - 具有相同的 css 属性 - 会部分显示并且不会崩溃任何东西。

我正在使用 Rails，我的表单在 Bootstrap 模式上。

这是屏幕截图 - [http://i.imgur.com/06phr.png](http://i.imgur.com/06phr.png)

这是CSS：

```
label.error {
color:transparent;
display: inline;  
background: url('not_valid.png') no-repeat;
padding: 10px;
margin-left: 5px;
width: 47px;
height: 36px;
}
label.valid {
background: url('valid.png') no-repeat;
display: inline;  
padding: 10px;
margin-left: 5px;
color:transparent;
width: 47px;
height: 36px;
}
input{
    font-size: 14px;
    border: 1px solid rgba(98,141, 40, 0.5);
    border-radius:10px;
    -moz-box-shadow: inset 0 0 1px 1px rgba(98,141, 40, 0.2);
    -webkit-box-shadow: inset 0 0 1px 1px rgba(98,141, 40, 0.2);
    box-shadow: inset 0 0 2px 1px rgba(98,141, 40, .2);
}
input.valid{
    border: 1px solid rgb(98,141, 40);
    font-size: 14px;
    -moz-box-shadow: 0 0 3px 3px rgba(98,141, 40, 0.2);
    -webkit-box-shadow: 0 0 3px 3px rgba(98,141, 40, 0.2);
    box-shadow: 0 0 3px 3px rgba(98,141, 40, 0.2);    
    border-radius:5px;
} 
```

**HTML**

```
<html>
  <head>

    <title>JCheck</title>
    <link href="application.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="jcheck.css?body=1" media="all" rel="stylesheet" type="text/css" />
    <script src="/assets/jquery-1.7.2.js?body=1" type="text/javascript"></script>
<script src="jquery.validate.min.js?body=1" type="text/javascript"></script>
<script src="jquery.js?body=1" type="text/javascript"></script>
<script src="jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="jquery-1.7.2.js?body=1" type="text/javascript"></script>
<script src="jquery.validate.min.js?body=1" type="text/javascript"></script>
<script src="application.js?body=1" type="text/javascript"></script>
    <meta content="authenticity_token" name="csrf-param" />
<meta content="EoQ2xPXGeDJpKsf22dPZcFQDUfj8cAfV8owQ493TkGU=" name="csrf-token" />
  </head>
  <body>
    <script type="text/javascript"> jQuery(function() { var validator = jQuery('#new_user').jcheck({'field_prefix': 'user'}); validator.validates('email', {'presence': {'if': 'email_required?'}, 'format': {'with': /\A[^@]+@([^@\.]+\.)+[^@\.]+\z/, 'allow_blank': true, 'if': 'email_changed?'}, 'presence': true}); validator.validates('password', {'presence': {'if': 'password_required?'}, 'confirmation': {'if': 'password_required?'}, 'length': {'allow_blank': true, 'minimum': 6, 'maximum': 128}}); validator.validates('name', {'presence': true}); validator.field('email').custom_label = 'Email'; validator.field('password').custom_label = 'Password'; validator.field('name').custom_label = 'Name'; }); </script>

<h2>Sign up</h2>

<form accept-charset="UTF-8" action="/users" class="sign_up" id="new_user" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="EoQ2xPXGeDJpKsf22dPZcFQDUfj8cAfV8owQ493TkGU=" /></div>

<div><label for="user_name">Name</label><br />
    <input id="user_name" name="user[name]" size="30" type="text" /></div>

  <div><label for="user_email">Email</label><br />
    <input id="user_email" name="user[email]" size="30" type="text" value="" /></div>

  <div><label for="user_password">Password</label><br />
    <input id="user_password" name="user[password]" size="30" type="password" /></div>

  <div><label for="user_password_confirmation">Password confirmation</label><br />
    <input id="user_password_confirmation" name="user[password_confirmation]" size="30" type="password" /></div>

  <div><input name="commit" type="submit" value="Sign up" /></div>
</form>
  <a href="/users/sign_in">Sign in</a><br />
  <a href="/users/password/new">Forgot your password?</a><br />
  </body>
</html> 
```

我的所有文件： [https](https://www.dropbox.com/sh/1ea9k2z6vmsvg58/Pz5X0qRNDv) ://www.dropbox.com/sh/1ea9k2z6vmsvg58/Pz5X0qRNDv （“成功”后删除昏迷）

当我为 label.valid 提供更多填充时，它正在显示。我不明白为什么他们的行为不一样？问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:43:26.947

我忘记了默认错误消息。所以我只是删除它们（因为它们是透明的，这是我的项目所需要的）——只显示没有文字的图像。

# active-directory - 特定计算机中组的用户成员？

> ID：11114236
> 
> 赞同：0
> 
> 时间：2012-06-20T06:49:00.527
> 
> 标签：active-directory, local, membership, active-directory-group

我正在编写一个 Web 应用程序，并且正在尝试对管理员用户进行身份验证。我希望通过在我将域用户添加到的服务器上拥有一个本地组来做到这一点。我有一个名为的组`ProductionManagers`，我将具有管理员权限的人添加到该组中。其他用户只有查看权限。

我想要做的是搜索查询服务器上的 AD（对吗？），并找出当前登录的用户是否是`ProductionManagers`组的成员（这是服务器上的组，而不是域组）。

这样做的最佳方法是什么？或者，也许你有一个比我添加管理员的本地组更好的机制的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T19:54:57.537

如果使用 ASP.NET 和表单身份验证，

```
WindowsPrincipal principal = new WindowsPrincipal(new WindowsIdentity("youruser@domain.com"));
if (principal.IsInRole("ProductionManagers"))
{
   // Authenticated
} 
```

如果使用 ASP.NET 和 Windows 身份验证，

```
WindowsPrincipal principal = new WindowsPrincipal(WindowsIdentity.GetCurrent());
if (principal.IsInRole("ProductionManagers"))
{
   // Authenticated
} 
```

如果使用 Java、PHP、Ruby 等其他工具，则需要调用 .NET API 或 Win32 API 来执行此操作。您不能简单地通过 LDAP 查询来检索该信息。原因是本地组的组成员信息实际上存储在本地计算机上，而不是 Active Directory 上。

您需要调用类似[NetLocalGroupGetMembers](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370601%28v=vs.85%29.aspx)的方法来从本地存储中检索组成员身份信息。

# c - C 使用 ssl 链接的应用程序失败

> ID：11114242
> 
> 赞同：0
> 
> 时间：2012-06-20T06:49:24.290
> 
> 标签：c, sockets

我在 C 中遇到套接字编程问题。我有一个使用 C 连接函数打开套接字的应用程序，我不希望对套接字进行任何加密。此应用程序还使用 openssl 库的函数（用于其他目的），因此我必须在编译时与 lssl 链接。由于与 lssl 的这种链接，应用程序失败。我不知道发生了什么，openssl 链接覆盖了 C 的连接还是什么？使用 C 的套接字函数和使用 ssl 库是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T18:59:49.403

```
strncpy(serverip,"127.0.0.1",strlen("127.0.0.1")); 
```

那是坏了。最后一个参数`strncpy`应该是缓冲区的大小，而不是要复制的字符串的长度。如果它不*大于*字符串的长度（在这种情况下不是），就会发生不好的事情。正如`strncpy`的文档所说：

> **警告**：如果 src 的前 n 个字节中没有空字节，则放在 dest 中的字符串不会以空值结尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T05:44:59.793

打开套接字直到连接的代码如下。

```
int memfsnode_init()
{
    int sockfd, portno, n,len,i,x,y;
    long l;
    struct sockaddr_in serv_addr;

    portno = METADATASERVER_PORT; //port = 5000
    char *serverip;
    serverip=(char*)malloc(20*sizeof(char));
    strncpy(serverip,"127.0.0.1",strlen("127.0.0.1"));
    sockfd = socket(AF_INET, SOCK_STREAM, 0);
    if (sockfd < 0)
        error("ERROR opening socket");
    bzero((char *) &serv_addr, sizeof(serv_addr));
    serv_addr.sin_family = AF_INET;
    serv_addr.sin_addr.s_addr = inet_addr(serverip);
    serv_addr.sin_port = htons(portno);
    if (connect(sockfd,(struct sockaddr*)&serv_addr,sizeof(serv_addr)) < 0)
        error("ERROR connecting");
    return(sockfd);
} 
```

# android - Db4oClientServer 无法打开服务器

> ID：11114244
> 
> 赞同：0
> 
> 时间：2012-06-20T06:49:29.647
> 
> 标签：android, db4o

嘿，我是 anrdoid 的新手。几乎我在 db4o 中遇到了问题。当我使用

```
public static void main(String[] args) {

            ServerConfiguration configuration=
                Db4oClientServer.newServerConfiguration();
        configuration.common().allowVersionUpdates(true);
            configuration.common().activationDepth(4);
        try{

        server=Db4oClientServer.openServer(
                configuration,"test",0);
        System.out.println("It's ok");

        }catch(Exception e){
            System.out.println(e.toString());
        }
     } 
```

只是一个简单的java文件。它工作正常。（我没有名为“test”的文件）。它帮助我创建测试文件。但是当我在android项目中使用相同的代码时。

```
private ServerDDBB(){
    try{
        if(QSLog.DEBUG_I)
            QSLog.i(CLASS_NAME,"Before to open the DDBB");

        ServerConfiguration configuration=
            Db4oClientServer.newServerConfiguration();
    configuration.common().allowVersionUpdates(true);
        configuration.common().activationDepth(DEEP);
    try{
    server=Db4oClientServer.openServer(
            configuration,"ddbb",0);
    }catch(Exception e){
        Log.e("Can't pass the openServer",e.toString());
    }
        if(server==null)
            if(QSLog.DEBUG_W)
                QSLog.w(CLASS_NAME, "Serer Null");

    }catch(Exception e){
        if (QSLog.DEBUG_E)QSLog.e("hey", ExceptionUtils.exceptionTraceToString(
                e.toString(),
                e.getStackTrace()));
    }
} 
```

它提示我有一个 IO 异常。

> 这是我的错误警告：com.db4o.io.RandomAccessFileFactory.newRandomAccessFile(RandomAccessFileFactory.java:26) com.db4o.io.FileStorage$FileBin.(FileStorage.java:43) com.db4o.io.FileStorage.open(FileStorage. java:22) com.db4o.io.StorageDecorator.open(StorageDecorator.java:27) com.db4o.io.CachingStorage.open(CachingStorage.java:52) com.db4o.internal.IoAdaptedObjectContainer.openImpl(IoAdaptedObjectContainer.java: 56) com.db4o.internal.ObjectContainerBase$1.run(ObjectContainerBase.java:134) com.db4o.foundation.DynamicVariable.with(DynamicVariable.java:47) com.db4o.foundation.Environments.runWith(Environments.java:28) ) com.db4o.internal.ObjectContainerBase.withEnvironment(ObjectContainerBase.java:155) com.db4o.internal.ObjectContainerBase.open(ObjectContainerBase.java:125) com.db4o.internal.IoAdaptedObjectContainer。(IoAdaptedObjectContainer.java:35) com.db4o.internal.ObjectContainerFactory.openObjectContainer(ObjectContainerFactory.java:18) com.db4o.Db4o.openFile(Db4o.java:224) com.db4o.cs.internal.config.StandardClientServerFactory.openServer (StandardClientServerFactory.java:35) com.db4o.cs.Db4oClientServer.openServer(Db4oClientServer.java:52) com.hlh.ddbb.ServerDDBB.(ServerDDBB.java:37) com.hlh.ddbb.ServerDDBB.createInstance(ServerDDBB. java:84) com.hlh.ddbb.ServerDDBB.getServer(ServerDDBB.java:78) com.hlh.ddbb.ClientDDBB.(ClientDDBB.java:20) com.hlh.SettingsTab.initActivity(SettingsTab.java:196) com .hlh.SettingsTab.onCreate(SettingsTab.java:91) android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459) android.app.ActivityThread。handleLaunchActivity(ActivityThread.java:2512) android.app.ActivityThread.access$2200(ActivityThread.java:119) android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863) android.os.Handler.dispatchMessage(Handler.java :99) android.os.Looper.loop(Looper.java:123) android.app.ActivityThread.main(ActivityThread.java:4363) java.lang.reflect.Method.invokeNative(Native Method) java.lang.reflect. Method.invoke(Method.java:521) com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860) com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618) dalvik。 system.NativeStart.main（本机方法）Looper.loop(Looper.java:123) android.app.ActivityThread.main(ActivityThread.java:4363) java.lang.reflect.Method.invokeNative(Native Method) java.lang.reflect.Method.invoke(Method.java :521) com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860) com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618) dalvik.system.NativeStart.main(Native方法）Looper.loop(Looper.java:123) android.app.ActivityThread.main(ActivityThread.java:4363) java.lang.reflect.Method.invokeNative(Native Method) java.lang.reflect.Method.invoke(Method.java :521) com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860) com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618) dalvik.system.NativeStart.main(Native方法）

任何回复都会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:48:00.030

看起来您只是尝试使用常规文件名。在 Android 中，您需要将数据库存储在可以访问的[位置：](http://community.versant.com/documentation/reference/db4o-8.1/java/reference/Content/platform_specific_issues/android/getting_started.htm)

```
String filePath = this.getFilesDir() + "/android.db4o";
    final EmbeddedConfiguration config = Db4oEmbedded.newConfiguration();
    config.common().add(new AndroidSupport());
    ObjectContainer db = Db4oEmbedded.openFile(config,filePath); 
```

顺便提一句。您不需要嵌入式客户端服务器的服务器 jar。[您可以使用常规容器](http://community.versant.com/documentation/reference/db4o-8.1/java/reference/Content/advanced_topics/session_containers.htm)打开一个新的会话容器：

```
ObjectContainer session = rootContainer.ext().openSession();
try {
    // do the operations on the session-container
    session.store(new Person("Joe"));
} finally {
    // close the container. For example when the request ends
    session.close();
} 
```

# iphone - 删除/清除以前的缓冲区/流视频 mpmovieplayer iphone

> ID：11114254
> 
> 赞同：-1
> 
> 时间：2012-06-20T06:50:03.153
> 
> 标签：iphone, video-streaming, buffer, mpmovieplayercontroller

我正在使用 mpmovieplayercontroller 应用程序在我的 iPhone/iPad 中播放视频，并且视频大小非常大（大约 2-3 小时）。由于内存警告，应用程序在播放一半后崩溃。所以请任何人建议我如何从内存中清除/删除以前的缓冲视频。

请建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T04:17:19.570

根据我的经验，无需清除/删除缓冲区视频。尝试运行内存分析器以查看您的代码是否没有泄漏。

项目菜单 > 配置文件 -> 选择内存分析器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T04:21:27.377

内存警告仅发生在**模拟器**中。**在设备**中尝试。可以正常工作，没有问题。所以你不需要清除任何东西。发生这种情况是因为**模拟器**给出了一堆虚假泄漏（例如在 AudioToolbox、CoreVideo 等中）。Ans模拟器似乎缓存了整个视频并且没有正确释放它，而设备只缓冲它需要的东西。希望有意义

# jsf - 当我选择一个组件时，同一表单中的两个 FileUpload 组件同时更新

> ID：11114255
> 
> 赞同：0
> 
> 时间：2012-06-20T06:50:11.060
> 
> 标签：jsf, primefaces

我有两个相同形式的文件上传，我也为它们使用不同的 id。问题是当我使用任何一个上传组件并选择和删除文件时。两个组件都在更新。我一个一个地给组件。上传1：

```
<p:growl id="messages" showSummary="true" showDetail="true" />
                    <p:fileUpload id="upload2" fileUploadListener="#{editBean.relatedFileEditUpload}"
                        rendered="#{editBean.uploadFileRender}"
                        process="studyPlanEditForm:relatedFileType"
                        update="studyPlanEditForm:messages studyPlanEditForm:relatedFileType">
                    </p:fileUpload> 
```

文件上传2：

```
<p:column
                    style="padding-bottom: 10px;background: none repeat scroll 0 0 #EDEDED;width:30px;">
                    <p:growl id="messages1" showSummary="true" showDetail="true" />
                    <p:fileUpload  id="upload1" fileUploadListener="#{editBean.editFileUpload}" 
                        process="studyPlanEditForm:displayname1"
                        update=":studyPlanEditForm">
                    </p:fileUpload>
                </p:column> 
```

当我选择任何一个上传并浏览并选择一个文件时，两个组件都显示文件名。请帮助。

# java - 在 Java 中创建故障转储和堆栈跟踪

> ID：11114257
> 
> 赞同：1
> 
> 时间：2012-06-20T06:50:13.343
> 
> 标签：java

在我的 Java 应用程序中，我有一些`try` `catch`异常块，我试图在其中捕获异常。其中许多是经过处理的，因此对用户完全透明，但我想创建一个包含变量值和整个调用堆栈的转储文件，以便我可以诊断导致此问题的原因。这可能吗？一段代码不起作用，因为它应该在前面看起来一切都很好我想用这些转储文件调试应用程序。

到目前为止，我没有做任何这样的事情，几乎不可能查明导致错误的原因。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:19:53.823

首先要看的是你的堆栈转储，它对诊断一些问题很有帮助。尝试向您的 Java 进程发送 QUIT 信号（通过在终端中按 Ctrl-\ 或 kill 命令）。

您还可以设置 JVM 在发生内存错误时执行堆转储，方法是在命令行中传递 -XX:+HeapDumpOnOutOfMemoryError 选项。完成此操作后，请尝试在适当的时候在代码中引发 OutOfMemoryError。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T06:51:59.387

您需要为此类任务使用一些日志记录框架。我通常使用这个：[Apache Log4J](http://logging.apache.org/log4j/1.2/manual.html)和[SLF4J](http://www.slf4j.org/)。您可以在记录您认为可能导致问题的异常之前记录变量值。

# mysql - 如何处理数据库中的大量记录以供用户授权使用？

> ID：11114261
> 
> 赞同：7
> 
> 时间：2012-06-20T06:50:26.810
> 
> 标签：mysql, sql, ruby-on-rails, ruby, ruby-on-rails-3

我正在使用 Ruby on Rails 3.2.2 和 MySQL。我想知道在与一个类相关的数据库表中存储与它们实例的每个“*组合”相关的其他两个类的所有记录是否是“可取的”/“可取的”。*

也就是说，我有`User`和`Article`模型。为了存储所有用户文章授权对象，我想实现一个`ArticleUserAuthorization`模型，以便给定 N 个用户和 M 篇文章，有 N*M`ArticleUserAuthorization`条记录。

这样做，我可以声明和使用`ActiveRecord::Associations`如下：

```
class Article < ActiveRecord::Base
  has_many :user_authorizations, :class_name => 'ArticleUserAuthorization'
  has_many :users, :through => :user_authorizations
end

class User < ActiveRecord::Base
  has_many :article_authorizations, :class_name => 'ArticleUserAuthorization'
  has_many :articles, :through => :article_authorizations
end 
```

但是，上述存储所有组合的方法将导致包含数十亿行的大数据库表！！！此外，理想情况下，我计划在创建一个或一个对象时创建*所有*授权记录（也就是说，我计划一次创建*所有*前面提到的“*组合*”，或者更好的是，在“延迟”批次中......无论如何，这个过程会创建其他数十亿个数据库表行！！！）并在销毁时反之亦然（通过删除数十亿个数据库表行！！！）。此外，我计划在更新或对象时立即读取和更新这些行。`User``Article`**`User``Article`**

 **所以，我的疑问是：

*   这种方法“可取”/“可取”吗？例如，可能会出现什么样的性能问题？或者，管理/管理具有非常大数据库表的数据库是一种不好的“方式”/“处方”？
*   在我的情况下，我可以/可以/应该如何进行（也许，通过“重新思考”如何以更好的方式处理用户授权）？

*注意*：我会使用这种方法，因为为了在检索或对象时*只*检索“授权对象” ，我认为我需要“原子”用户授权规则（即每个用户和文章对象的一个​​用户授权记录），因为系统不基于“admin”、“registered”等用户组。因此，我认为表的可用性*避免了在**每个*检索到的对象上运行与用户授权相关的方法（注意：这些方法涉及一些可能会降低性能的 MySQL 查询 - 请参阅[我以前的问题](https://stackoverflow.com/questions/11074008/what-is-a-common-approach-to-scope-records-by-those-that-an-user-can-read)以获取示例“授权”方法实现）通过“简单地”访问/加入`User``Article``ArticleUserAuthorization`**`ArticleUserAuthorization`表以便仅检索“用户授权”对象。**

 *** * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T15:29:14.380

事实是，如果您想要**每个用户的文章级权限，**那么您需要一种将`User`s 与`Article`他们可以访问的 s 相关联的方法。这需要您*至少*需要 N*A（其中 A 是唯一许可的文章的数量）。

正如您所建议的那样，3NF 方法将是一个`UsersArticles`集合......这将是一个非常大的表（如您所述）。

考虑到这个表会被大量访问......在我看来，这似乎是一种稍微非规范化的方法（甚至是 noSQL）更合适的情况。

考虑 Twitter 用于其用户关注者表的模型：

[杰夫阿特伍德谈这个话题](http://www.codinghorror.com/blog/2008/07/maybe-normalizing-isnt-normal.html)

[和高可扩展性博客](http://highscalability.com/scaling-twitter-making-twitter-10000-percent-faster)

这些片段中的一个示例是 Twitter 上的一个教训，即从规范化表中查询关注者会给表带来巨大压力`Users`。他们的解决方案是对追随者进行非规范化，以便将用户的追随者存储在他们的个人用户设置中。

> 非规范化很多。单枪匹马救了他们。例如，他们将一个用户 ID 的所有朋友 ID 存储在一起，从而避免了很多代价高昂的连接。- 避免复杂的连接。- 避免扫描大量数据。

我想可以使用类似的方法来提供文章权限并避免压力很大的`UsersArticles`单个表。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-25T19:01:49.113

您不必重新发明轮子。**ACL（访问控制列表）框架**处理相同类型的问题已经很久了，如果你问我，效率最高。您有资源（文章）甚至更好的资源组（文章类别/标签/等）。另一方面，您有用户（用户）**和**用户组。然后，您将拥有一个相对较小的表，将资源组映射到用户组。您将拥有另一个相对较小的表，其中包含此一般映射的例外情况。或者，您可以有规则集来满足访问文章。您甚至可以有动态组，例如：authors_friends，具体取决于您的用户-用户关系。

只要看看任何像样的 ACL 框架，您就会知道如何处理此类问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-22T21:24:23.150

如果确实存在“包含数十亿行的大型数据库表”的前景，那么也许您应该围绕（相对）人口稀少的表为您的特定需求制定解决方案。

大型数据库表对系统定位相关行的速度提出了重大的性能挑战。这里确实需要索引和主键；但是，它们增加了存储要求，并且还需要在添加、更新和删除记录时维护 CPU 周期。即使如此，重型数据库系统也具有解决此类行位置性能问题的分区功能（请参阅[http://en.wikipedia.org/wiki/Partition_(database](http://en.wikipedia.org/wiki/Partition_(database) )）。

假设只要没有返回任何行，就可以使用一些（可计算的或恒定的）默认值，一个稀疏填充的表可能可以达到目的。仅在需要非默认值的地方插入行。一个稀疏填充的表将需要更少的存储空间，并且系统将能够更快地定位行。（使用用户定义的函数或视图可能有助于保持查询的直接性。）

如果你真的不能让一个人烟稀少的桌子为你工作，那么你就陷入了困境。也许您可以将那个巨大的表变成一组较小的表，但我怀疑如果您的数据库系统支持分区，这是否会有所帮助。此外，一组较小的表会使查询更加混乱。

因此，假设您有数百万或数十亿用户，他们或可能没有对您系统中数百万或数十亿文章的某些特权。那么，在业务层面，什么决定了用户有权对给定的文章做什么？用户必须是（付费）订阅者吗？或者他或她可能是客人？用户是否申请（并支付）某些文章的包裹？是否可以授予用户编辑某些文章的特权？等等等等。

因此，假设某个用户想要对某个文章做某事。对于人口稀少的表，`SELECT`该大表 UsersArticles 上的 a 将返回 1 行或无。如果它返回一行，则立即知道 ArticleUserAuthorization，并可以继续进行其余操作。

如果没有行，那么说用户不能对这篇文章做任何事情就足够了。或者，用户可能是某个用户组的成员，该用户组有权对任何具有某些 ArticleAttribute（本文具有或不具有）的文章具有某些特权。或者，对于在 UsersArticles 中没有此类记录的任何用户，文章可能具有默认的 ArticleUserAuthorization（存储在其他表中）。管他呢...

关键是，许多情况都有一个结构和规律，可用于帮助减少系统所需的资源。例如，人类可以将两个数字相加，每个数字最多 6 位，而无需查阅超过 5 万亿个条目的表格；这是利用结构。至于规律性，大多数人都听说过帕累托原则（“80-20”规则 - 请参阅[http://en.wikipedia.org/wiki/Pareto_principle](http://en.wikipedia.org/wiki/Pareto_principle)）。你真的需要“十亿十亿行”吗？或者更准确地说，大约 80% 的用户每个人都只拥有可能数百或数千篇文章的（特殊）特权 - 在这种情况下，为什么要浪费其他“数十亿亿”（四舍五入：-P） .

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T12:49:02.380

您应该查看基于分层角色的访问控制 (RBAC) 解决方案。您还应该考虑合理的默认值。

*   默认情况下是否允许所有用户阅读文章？然后存储`deny`异常。

*   默认情况下不允许所有用户阅读文章吗？然后存储`allow`异常。

*   `allow`默认是还是取决于文章`deny`？然后将其存储在文章中，并存储两者`allow`和`deny`异常。

*   文章是否被放入问题，问题是否被收集到期刊中，期刊是否被收集到知识领域？`users`然后在这些对象之间存储授权。

*   如果`User`允许 a 读取 a`Journal`但拒绝特定的`Article`怎么办？然后 store `User-Journal:allow`，`User-Article:deny`最*具体*的指令（在这种情况下是文章）优先于更*一般*的指令（在这种情况下是默认值和日志）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T06:21:01.080

通读所有评论和问题，我仍然怀疑存储所有组合的有效性。以另一种方式思考这个问题 - 谁将填充该表？文章的作者或版主，还是其他人？并基于什么规则？你可以想象那是多么困难。不可能填充所有组合。

Facebook 也有类似的功能。撰写帖子时，您可以选择要与谁分享。您可以选择“朋友”、“朋友的朋友”、“所有人”或自定义列表。自定义列表允许您定义将包括和排除谁。所以同样的，你只需要存储特殊情况，比如'include'和'exclude'，剩下的所有组合都属于默认情况。通过 dong 这个，N*M 可以显着减少。![发布可见性](../Images/85af59a61e15ddda8d1916015d7ec907.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-25T15:54:44.187

首先，最好考虑默认值和行为，而不是将它们存储在数据库中。例如，如果默认情况下，除非指定，否则用户无法阅读文章，则不必将其存储`false`在数据库中。

我的第二个想法是你可以在你的表中有一个`users_authorizations`列，在你的表`articles`中有一个列。这 2 列将在表单中存储用户 ID 和文章 ID 。例如，对于表格，这意味着具有 id的用户可以访问文章。然后，您将不得不修改查询以通过这种方式检索用户：`articles_authorizations``users``3,7,65,78,29,78``articles``3,7,65,78,29,78`

```
@article = Article.find(34)
@users = User.find(@article.user_authorizations.split(',')) 
```

每次保存或销毁文章和用户时，您都必须创建回调来更新授权列。

```
class User < ActiveRecord 
   after_save :update_articles_authorizations
   def update_articles_authorizations
     #...
   end
end 
```

`Article`对模型做同样的事情。

最后一件事：如果您有不同类型的授权，请不要犹豫创建更多列，例如`user_edit_authorization`.

使用这些组合技术，对数据库的数据量和命中率将降至最低。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-23T17:26:11.437

按 user_id 对 ArticleUserAuthorization 表进行分片。其原理是减少访问路径上的有效数据集大小。某些数据将比其他数据更频繁地访问，并且以特定方式访问。在该路径上，结果集的大小应该很小。在这里，我们通过分片来做到这一点。此外，如果它是读取工作负载，则可能通过索引来优化该路径，缓存它等

如果您想要用户授权的所有文章，则此特定分片很有用。
如果您也想按文章查询，那么也可以通过 article_id 复制表和分片。当我们有了第二个分片方案时，我们已经对数据进行了非规范化。数据现在被复制了，应用程序需要做额外的工作来维护数据的一致性。写入也会更慢，使用队列进行写入

分片的问题是跨分片的查询无效，您将需要一个单独的报告数据库。选择一个分片方案并考虑重新计算分片。

对于真正庞大的数据库，您可能希望将其拆分到物理机器上。例如。每个用户的文章一台或多台机器。

一些 nosql 建议是：

1.  关系是图表。所以看看图形数据库。特别是
    [https://github.com/twitter/flockdb](https://github.com/twitter/flockdb)
2.  redis，通过将关系存储在列表中。
3.  面向列的数据库，例如 hbase。可以将其视为稀疏嵌套哈希

这一切都取决于数据库的大小和查询的类型

编辑：修改后的答案。该问题以前有“had_one”关系还添加了 nosql 建议 1 和 2****

# javascript - 为什么 jQuery .after() 不链接新元素？

> ID：11114266
> 
> 赞同：15
> 
> 时间：2012-06-20T06:50:41.587
> 
> 标签：javascript, jquery, html, jquery-after

我很好奇为什么 jQuery 的 .after() 不链接或“为您提供”您使用它创建的新元素。在我看来应该是这样，但我不是专家，希望有人能阐明为什么这是一个坏主意。这是一个示例，可以从 .after() 中查看我想要的内容：

这是一些标记：

```
<div id="content1">
    <p id="hello1">Hello</p>
</div>
<div id="content2">
    <p id="hello2">Hello</p>
</div> 
```

这就是我想要的，但这将“Hello”替换为“World！”：

```
$('#hello1').after('<p />').text('World!'); 
```

这可以完成工作，但它肯定很丑：

```
$('#hello2').after('<p />');
var $newParagraph = $('#content2 p').last();
$newParagraph.text('World'); 
```

这更好，但我并没有完全被卖掉：（也许我应该是？）

```
$('#hello1').after( $('<p />').text('World') ); 
```

请注意，这显然是一个简化的示例，即“<p>World!</p>”不是我要添加的，我的现实世界问题比这更复杂。

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-20T07:04:49.707

据推测`.after()`，它允许您链接更多适用于最初选择的元素的方法：

```
$('#hello1').after( $('<p />').text('World') )
            .before( $('<p />').text('Before text') )
            .remove(); 
```

这使行为与其他方法保持一致，因此您不必尝试记住哪些返回原始对象，哪些返回其他对象。

请注意，在您的情况下，`$('#hello1')`由于您是按 id 选择的，因此只选择了一个元素，但是您可以将其应用于`.after()`包含许多元素的 jQuery 对象，以便在多个元素之后添加（克隆）内容：

```
$('div.someclass').after( $('<p/>').text('whatever') ); 
```

在这种情况下，我认为将链接上下文保持为原始 jQuery 对象绝对是有意义的。

该[`.insertAfter()`方法](http://api.jquery.com/insertAfter/)可能更接近您想要的：

```
$('<p/>').insertAfter('#hello1').text('World'); 
```

（它还返回它应用到的 jQuery 对象，但它以“反向”方式插入。）

您可以编写自己的插件方法来返回要添加的元素，但这会令人困惑，因为它会与所有标准方法相反。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T06:55:04.967

大多数 jQuery 方法就是这样。jQuery最好保持一致并返回原始对象。

修复是这样的：

```
$('#hello1').after(
    $('<p/>', { text: 'World!' })
); 
```

或者：

```
$('#hello1').after(
    $('<p/>').text('World!')
); 
```

甚至：

```
$('<p/>').text('World!').insertAfter('#hello1'); 
```

后者实际上可能是首选，因为它会继续从新`<p>`元素链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T06:57:29.517

它不会为您提供创建的元素，因为您并不总是创建一个元素，JQuery 需要大量的处理能力来检测一个元素已创建，并且总是让它返回更有意义元素女巫是这次行动的目标。

# database - 数据库连接和回滚过程

> ID：11114273
> 
> 赞同：0
> 
> 时间：2012-06-20T06:51:37.827
> 
> 标签：database, transactions

我想知道一个案例。我有一个使用数据库（Oracle 和 Mssql）的项目。我的项目有一个我管理事务的框架。在线程中，我打开一个数据库连接并启动一个事务。（在事务中，有许多更新和插入查询。）在代码运行时，连接以某种方式关闭。因为我有 try-catch 块，所以我捕获异常和回滚事务。但; 如果我的连接由于某些原因而关闭，回滚查询如何在数据库上运行？我该如何处理这种情况？如果我打开一个新连接并回滚，它会起作用吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T07:01:22.917

您应该知道一个术语 - **ACID 合规性**：

*   **原子性**是一个全有或全无的命题。
*   **一致性**保证事务永远不会使您的数据库处于半完成状态。
*   **隔离**使事务彼此分离，直到它们完成。
*   **持久**性保证数据库将跟踪挂起的更改，以便服务器可以从异常终止中恢复。

**关于 MySQL**

为了在 MySQL 中获得此功能，您必须使用事务安全表 (TST)。事务安全表的[优点：](http://www.mysqlfaqs.net/mysql-faqs/Table-Types-or-Storage-Engines/What-are-transaction-safe-tables-and-not-transaction-safe-tables-in-MySQL)

*   更安全。即使 MySQL 崩溃或您遇到硬件问题，您也可以通过自动恢复或从备份 + 事务日志中取回数据。
*   您可以组合许多语句并使用 COMMIT 命令一次性接受这些语句。
*   您可以执行 ROLLBACK 以忽略您的更改（如果您未在自动提交模式下运行）。
*   如果更新失败，您的所有更改都将恢复。

**关于 SQL Server**

您应该阅读“[丢失连接的事务行为](http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/12cd8704-4133-4329-b909-dc9e54ca854e/)”MSDN 论坛主题。要更好地了解 MS SQL Server 事务背后的内容，请阅读一篇好文章“ [MS SQL Server 中的事务锁定和持续时间](http://www.manjuke.com/2012/03/locks-and-duration-of-transactions-in.html)”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T06:54:58.373

确保您没有使用任何自动提交功能（我认为在某些 MySQL 安装中默认启用该功能）。如果您“手动”完成所有提交，那么断开的连接只会导致您永远不会提交事务，因此永远不会被写入。

在大多数数据库系统中，您无法重新连接回滚。

# php - 在 PHP 中执行 perl

> ID：11114277
> 
> 赞同：11
> 
> 时间：2012-06-20T06:52:06.050
> 
> 标签：php, perl, shell, exec

> **可能重复：**
> [从 PHP 调用 Perl 脚本并传入变量，同时还使用可变的 perl 脚本名称](https://stackoverflow.com/questions/3438626/calling-perl-script-from-php-and-passing-in-variables-while-also-using-variabli)

我想通过 PHP 执行一个 perl 脚本。我`exec()`用来执行 perl 脚本。它可以在我的机器上工作，但不能在服务器上工作。该服务器基于 CentOS Linux。

我对 PHP 和 perl 脚本文件都给予了完全许可 (777)。当我尝试执行时，我在 error_log 中收到以下错误

```
sh: /perl: No such file or directory 
```

我尝试使用以下方式执行

```
exec("perl -w Script.pl $username $password",$output);
exec("/usr/bin/perl -w Script.pl $username $password",$output);
exec("/usr/bin/perl Script.pl $username $password",$output); 
```

我也尝试过使用该`system`功能

```
$output = system("perl Script.pl $username $password"); 
```

当我尝试这个时没有任何反应。

我还尝试使用该`passthru()`函数执行 perl

```
passthru("/usr/bin/perl -w Script.pl $username $password",$output); 
```

当我执行这一行时，`$output`打印 127 并且脚本中没有任何反应。

`is_executable()`我使用该功能检查了文件是否可执行。它表明该文件不可执行。

代码如下

```
$file = 'Script.pl';

if (is_executable($file))
{
    echo $file.' is executable';
}
else
{
    echo $file.' is not executable';
} 
```

如果我通过终端执行 perl，它可以正常工作，但是当我尝试通过 PHP 执行时，它不起作用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T07:19:16.883

使用完整路径执行脚本。

```
exec("/usr/bin/perl /full/path/to/Script.pl $username $password",$output); 
```

问候，

# jquery - 拖动 Jquery 滑块时如何显示舍入值？

> ID：11114280
> 
> 赞同：4
> 
> 时间：2012-06-20T06:52:17.830
> 
> 标签：jquery, jquery-ui, jquery-mobile, coldfusion, slider

我有一个 Jquery Mobile 滑块，我正在为其设置最小值/最大值和默认值。

数据库中的所有值都是 xxx,yy 所以我将所有放置到页面中的默认值四舍五入（使用 Coldfusion8）：

```
<input  type="range" 
        data-mini="true" 
        name="xxx" 
        id="xxx" 
        class="max" 
        value="#XMLFormat(trim( Round(var.max_price )))#" 
        min="#var.min_price#" 
        max="#var.max_price#" /> 
```

我的问题是，当我开始拖动滑块时，“拖动”值以小数**,95**结尾。

![在此处输入图像描述](../Images/55e71ea2674eb6836fd682f870bde284.png)

**问题：**
如何舍入“拖动值”？不能是数据库，因为我没有在拖动时轮询它。这是我需要在 HTML 中做的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T12:04:45.730

我总是将最低价格`fix()`四舍五入，并将最高价格四舍五入`ceiling()`。然后设置`step="1"`范围滑块。

```
<input  type="range" 
        data-mini="true" 
        name="xxx" 
        id="xxx" 
        class="max" 
        value="#XMLFormat(trim( Round(var.max_price )))#" 
        min="#fix(var.min_price)#" 
        max="#ceiling(var.max_price)#"
        step="1" /> 
```

# android - 首选移动设备而不是 WiFi 连接

> ID：11114285
> 
> 赞同：2
> 
> 时间：2012-06-20T06:52:25.883
> 
> 标签：android, wifi

我的应用程序执行 WiFi 操作，因此它需要在整个会话期间保持相同的连接。

我查看了 ConnectivityManager 类，但还没有弄清楚使用它是否是个好主意。

有什么方法可以让应用程序更喜欢移动设备而不是 WiFi 连接？

ConnectivityManager.startUsingNetworkFeature 会强制所有应用程序使用移动连接吗？ConnectivityManager.setNetworkPreference 怎么样？

完成后我应该调用 ConnectivityManager.stopUsingNetworkFeature 吗？

requestRouteToHost 是如何工作的？它是否在路由表中添加了一个条目？如果是这样，这是否试图使所有到指定主机的数据都通过那个接口？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T07:02:07.017

> 有什么方法可以让应用程序更喜欢移动设备而不是 WiFi 连接？

您可以设置偏好。

```
ConnectivityManager connectivityManager = (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);

connectivityManager.setNetworkPreference(ConnectivityManager.TYPE_MOBILE);  // Preferring mobile over wifi 

Dont forget to change it to default in onStop or onDestroy

connectivityManager.setNetworkPreference(ConnectivityManager.DEFAULT_NETWORK_PREFERENCE); 
```

# cloud-foundry - 将 node.js 应用程序部署到 api.cloudfoundry.com。并得到一个错误

> ID：11114286
> 
> 赞同：0
> 
> 时间：2012-06-20T06:52:26.817
> 
> 标签：cloud-foundry

错误 402：应用打包失败：“同步资源池失败”

将 node.js 应用程序部署到 api.cloudfoundry.com 时出现此错误。我使用的 vmc 是：vmc 0.3.10

我想知道这个错误是怎么发生的。我的vmc有问题吗？还是我的 node.js 应用程序有问题？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:31:36.990

你肯定想升级到最新的 vmc。“gem update”应该为你刷新到 0.3.18，但如果没有，“gem install vmc”来获取最新的。

您执行了哪些步骤来部署应用程序 - 您是否只是运行 vmc push 并按照提示操作，是否有一个 manifest.yml 文件（可能不是因为 vmc 0.3.10 可能有提前的清单支持），您是为 vmc push 提供额外的参数？

# php - file_get_contents 挂起

> ID：11114291
> 
> 赞同：7
> 
> 时间：2012-06-20T06:53:03.977
> 
> 标签：php, google-maps

我正在使用谷歌地理编码服务。我有一个调用 Google Maps API 并接收 JSON 数据的 PHP 应用程序。调用谷歌地图主机的功能会挂起，直到超时，但只有当我推送到 Godaddy 虚拟专用服务器时。

我已经 ssh 进入服务器并编辑了 php.ini 我将“安全模式”更改为“关闭”

我收到此错误消息：

> 消息：file_get_contents（http://maps.googleapis.com/maps/api/geocode/json?address=xYxY&sensor=false）：无法打开流：连接超时

这在我的 WAMP 服务器中运行良好，但在实时服务器上失败。任何想法为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T04:41:23.247

我找到了答案。一周过去了，现在？我希望其他人找到这个解决方案。GoDaddy 的虚拟专用服务器启用了 ipv6，但谷歌地图 API 却没有。所以告诉 Curl 强制执行 v4 请求，如下所示：

```
curl_setopt($ch, CURLOPT_IPRESOLVE, CURL_IPRESOLVE_V4 ); 
```

功劳部分归功于我发现以下信息的博客：

[http://www.businesscorner.co.uk/disable-ipv6-in-curl-and-php/](http://www.businesscorner.co.uk/disable-ipv6-in-curl-and-php/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-08T14:25:28.923

除了禁用 IPv6，您还可以尝试通过一个 IP 版本连接，然后在第一次尝试失败时切换到另一个版本。这使您的实现对您和远程端的临时路由问题更加健壮。

You can get this behavior in `file_get_contents()` by binding the connection to an interface with either inet6 or inet, and then try the other address family if the first attempt returns FAIL. I wrote up [how to make `file_get_contents()` more routing-robust and dual-stack](https://www.slightfuture.com/webdev/php-file-contents-dual-stack) for anyone that is interested. I also shows you how to force connections to use IPv4 or IPv6 if you prefer to go down that route.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-20T07:24:11.420

使用 curl 获取外部数据。由于安全风险，许多共享服务器会阻止将 file_get_contents 用于外部数据 (http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)。

网上有很多 curl 的例子。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-20T07:26:25.460

检查您的网络。Google 不会阻止此类请求。

[在这里](http://codepad.viper-7.com/NVu68l)检查。

# c# - 从数据库错误中检索 C# 数据

> ID：11114298
> 
> 赞同：0
> 
> 时间：2012-06-20T06:53:16.877
> 
> 标签：c#

我试图将数据加载到文本框中，在选择下拉列表时，我创建了一个用于检索的类，并在下拉列表中调用它选择的索引已更改。但我无法得到我想要的答案。如果我在按钮单击事件中调用了该类，它就可以正常工作。所以请纠正我。我犯了什么错误。这是我的代码：

```
public void so()
    {
        con.Open();
        string s2;
        s2 = "select Source from tbl_component where Componetcode='" + Mcodeddl.SelectedItem.Text + "'";
        SqlCommand c2 = new SqlCommand(s2, con);
        SqlDataReader d2;
        d2 = c2.ExecuteReader();
        while (d2.Read())
        {
            TextBox1.Text = d2["Source"].ToString().Trim(); 

        }
        d2.Close();
        con.Close();
    }

//i have called the so class here

 protected void Mcodeddl_SelectedIndexChanged(object sender, EventArgs e)
    {
        so();   
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T07:07:59.213

您应该在`Mcodeddl_SelectedIndexChanged`方法中设置断点以查看是否触发了事件，同时确保包含`AutoPostBack="true"`在您的下拉列表定义中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T07:02:35.677

确保您已`OnSelectedIndexChanged`为 aspx 页面中的下拉菜单指定事件

```
<asp:DropDownList ID="Mcodeddl" runat="server" 
    OnSelectedIndexChanged= "Mcodeddl_SelectedIndexChanged">
</asp:DropDownList> 
```

还可以使用[参数化](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)SQL 查询。

PS。你`SO();` 是一个方法而不是一个类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T07:12:32.753

我得到了答案。我详细说明了我所做的事情。 **“设置 AutoPostBack=True”**

# java - 如何处理样式中的时间数据，就像“Wed Jun 20 11:01:05 +0800 2012”一样？

> ID：11114299
> 
> 赞同：1
> 
> 时间：2012-06-20T06:53:17.823
> 
> 标签：java, json, time

在我的项目中，我从服务器获取 json 数据，json 中有一个名为“creat_at”的字段，其样式类似于“Wed Jun 20 11:01:05 +0800 2012”

如何将其更改为更易于阅读的样式，例如“2012/06/20”？

（我试过 'DateFormat.parse' 但它不起作用：new SimpleDateFormat("EEE MMM dd HH:mm:ss Z yyyy").parse(dateString) cause java.text.ParseException: Unparseable date: "Wed Jun 20 11:00:53 +0800 2012")

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T06:56:14.947

见[`SimpleDateFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)API

```
Date date  = new SimpleDateFormat("EEE MMM dd HH:mm:ss Z yyyy").parse(dateString);
String formattedDate = new SimpleDateFormat("yyyy/MM/dd").format(date); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T07:00:50.400

您需要尝试 SimpleDateFormat

```
SimpleDateFormat sdf = new SimpleDateFormat("EEE MMM dd HH:mm:ss Z yyyy");
SimpleDateFormat sdf2 = new SimpleDateFormat("yyyy/MM/dd");
System.out.println(sdf2.format(sdf.parse("Wed Jun 20 11:01:05 +0800 2012"))); 
```

印刷

```
2012/06/20 
```

您可能还需要设置适当的时区。

# android - android listview或scrollview：用于具有动态字段数的表单

> ID：11114304
> 
> 赞同：2
> 
> 时间：2012-06-20T06:53:36.583
> 
> 标签：android, android-listview, android-scrollview

假设我需要取该人喜欢的电影的名称。我不知道他喜欢多少，所以我只想给他一个文本字段。他可以单击一个按钮并添加更多要填写的字段。我当然可以使用`ScrollView`，但我应该考虑使用 a`ListView`吗？如果是这样，我似乎无法理解如何。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T06:59:14.997

更好的是，在滚动视图中动态添加edittext，单击按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T07:08:40.070

试试这个：

```
 public class TestingActivity extends ListActivity {
/** Called when the activity is first created. */

EditText value;
    Button insert;

    ArrayList<String> data=new ArrayList<String>();
    /** Called when the activity is first created. */

    @SuppressWarnings("unchecked")
    @Override

    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

          insert = (Button) findViewById(R.id.button2);
          value=(EditText)findViewById(R.id.value);
          insert.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                data.add(value.getText().toString());
                getListView().setAdapter(new  ArrayAdapter(getApplicationContext(), android.R.layout.simple_list_item_1, data));

                    }
        });
          getListView().setAdapter(new  ArrayAdapter(getApplicationContext(), android.R.layout.simple_list_item_1, data));

    }

        } 
```

xml 是：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <EditText
            android:id="@+id/value"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1" />

        <Button
            android:id="@+id/button2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="insert" />
    </LinearLayout>

    <ListView
        android:id="@android:id/list"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:scrollingCache="false" >
    </ListView>

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T06:54:57.257

您可以实现一个自己的[BaseAdapter](http://developer.android.com/reference/android/widget/BaseAdapter.html)，它使用 EditText-Views 让人们输入数据。 [以下是](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/List14.html)如何实现一个好的适配器。

如果按钮被点击，您可以在列表中添加另一个条目，用于将另一个视图添加到您的适配器。

# html - 背景图像部分之间的间距

> ID：11114306
> 
> 赞同：2
> 
> 时间：2012-06-20T06:53:42.713
> 
> 标签：html, css, behavior, css3pie

```
.cornerBox {    
    background: url(../img/main-part.png) repeat-x top left ;   
    width: 400px;
    height:100px;
    border-radius: 80px;
    padding: 0 0; 
    behavior: url(PIE/PIE.htc);
} 
```

在IE8中，背景图片部分之间的间距是1px，如何去掉这个空间，图片宽度是`28px`我想要的`repeat-x`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T07:05:42.467

我用您的代码创建了一个[**jsfiddle 示例**](http://jsfiddle.net/libinvbabu/QmmFy/2/)，但使用了其他图像。在 IE8 中测试，发现没有问题。

所以我相信问题可能出在你的`main-part.png`. 图像可能有白色边框或其他东西。仔细检查您的图像。

**编辑：**

你的形象也没有问题。单击`ctrl+0`IE 以确保您正在查看 100%

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-17T21:20:57.397

我对两个背景图像相邻的 div 有类似的问题。我通过分配解决了它：

```
background-size: cover 
```

哪个拉伸了您的图像以覆盖整个 div

# php - 正则表达式：一起删除非字母数字字符、多个空格和 trim()

> ID：11114307
> 
> 赞同：4
> 
> 时间：2012-06-20T06:53:47.473
> 
> 标签：php, regex

我有一个 $text 去除所有非字母数字字符，用单个空格替换多个空格和换行符，并消除开始和结束空格。

到目前为止，这是我的解决方案。

```
$text = '
some-    text!! 

for testing?
'; // $text to format

//strip off all non-alphanumeric chars
$text = preg_replace("/[^a-zA-Z0-9\s]/", "", $text);

//Replace multiple white spaces by single space 
$text = preg_replace('/\s+/', ' ', $text);

//eliminate beginning and ending space
$finalText = trim($text);
/* result: $finalText ="some text for testing";
without non-alphanumeric chars, newline, extra spaces and trim()med */ 
```

是否可以在一个正则表达式中组合/实现所有这些？因为我会在一行中得到所需的结果，如下所示

```
$finalText = preg_replace(some_reg_expression, $replaceby, $text); 
```

谢谢

编辑：用测试字符串澄清

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T07:16:58.147

当然可以。这很容易。

重新看起来像：

```
((?<= )\s*)|[^a-zA-Z0-9\s]|(\s*$)|(^\s*) 
```

我手头没有 PHP，我用过 Perl（只是为了测试 re 并证明它有效）（你可以[在这里](http://ideone.com/epDJW)玩我的代码）：

```
$ cat test.txt 
         a       b       c    d
a b c e f g             fff  f

$ cat 1.pl 
while(<>) {
    s/((?<= )\s*)|[^a-zA-Z0-9\s]|(\s*$)|(^\s*)//g;
    print $_,"\n";
}

$ cat test.txt | perl 1.pl 
a b c d
a b c e f g fff f 
```

对于 PHP，它将是相同的。

什么是RE？

```
((?<= )\s*)       # all spaces that have at least one space before them
|
[^a-zA-Z0-9\s]    # all non-alphanumeric characters
|
(\s*$)            # all spaces at the end of string
|
(^\s*)            # all spaces at the beginning of string 
```

这里唯一棘手的部分是`((?<= )\s*)`lookbehind *assertion*。当且仅当空格的子字符串之前有空格时，您才删除空格。

如果您想了解前瞻/后瞻断言的工作原理，请查看[http://www.regular-expressions.info/lookaround.html](http://www.regular-expressions.info/lookaround.html)。

**讨论更新**：

什么时候发生`$text ='some ? ! ? text';`？然后生成的字符串在“some”和“text”之间包含多个空格。

解决这个问题并不是那么容易，因为需要具有可变长度的积极的后向断言，而目前这是不可能的。不能简单地检查空格，因为它可能会发生，因此它不是空格而是非字母数字字符，并且无论如何都会被删除（例如：符号`" !"`将`"!"`被删除，但 RE 一无所知；一个人需要类似的东西，`(?<=[^a-zA-Z0-9\s]* )\s*`但不幸的是将不起作用，因为 PCRE 不支持后视可变长度断言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T07:01:54.160

我不认为你可以用一个正则表达式来实现。您基本上需要坚持一个`if else`条件，而仅通过正则表达式是不可能的。

您基本上需要一个正则表达式来删除非字母数字数字，另一个来折叠空格，这基本上是您已经在做的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T07:05:07.670

如果这是您正在寻找的东西，请检查这个---

```
$patterns = array ('/[^a-zA-Z0-9\s]/','/\s+/');
$replace = array ("", ' ');
trim( preg_replace($patterns, $replace, $text) ); 
```

可能它可能需要一些修改，如果这是你想做的事情，请告诉我？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T07:37:41.680

为了您自己的理智，您将希望保留以后仍然可以理解和编辑的正则表达式:)

```
$text = preg_replace(array(
    "/[^a-zA-Z0-9\s]/", // remove all non-space, non-alphanumeric characters
    '/\s{2,}/', // replace multiple white space occurrences with single 
), array(
    '', 
    ' ',
), trim($originalText)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-30T20:20:39.887

```
$text =~ s/([^a-zA-Z0-9\s].*?)//g; 
```

不必比这更难。

# hadoop - Hadoop中的副本

> ID：11114308
> 
> 赞同：0
> 
> 时间：2012-06-20T06:53:53.907
> 
> 标签：hadoop, hdfs

我可以将两个块的总和存储为 HDFS 中的副本，即如果我有两个块 1 和 2。副本可以是 1,1,1+2 吗？如果可能，对源代码进行哪些更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:30:41.150

Hadoop 在 contrib/raid 中有 RAID 实现，因此您可以查看源代码是如何实现的。 [https://github.com/apache/hadoop-common/tree/trunk/hadoop-mapreduce-project/src/contrib/raid](https://github.com/apache/hadoop-common/tree/trunk/hadoop-mapreduce-project/src/contrib/raid)

# git - 修改使用合并以使用变基的 git 主题分支的历史记录

> ID：11114309
> 
> 赞同：6
> 
> 时间：2012-06-20T06:53:57.020
> 
> 标签：git, git-merge, git-rebase

我们的 git 开发工作流程是主题分支不断地重新基于最新的 master 直到它们被合并。

然而，一位新开发人员创建了主题分支，他在其中多次将 master 合并到他的主题分支中，以使它们保持最新。

```
 A---B---C---D---E topic
   /       /   /
  F---G---H---I master 
```

虽然将这个主题分支合并到 master 是完全正确的，但它会导致一个非常混乱的历史。我想将这些主题分支转换为一个干净的线性 rebased 历史，它可以通过一个`--no-ff`合并提交干净地合并到 master 中，即：

```
 A'---B'---E' topic
               /
  F---G---H---I master 
```

理想情况下，会有一些 git-fu 允许我进行变基，按原样接受主题分支上的提交，同时自动应用主题合并提交中已经可用的合并冲突解决信息，例如 C 和 D。

我知道我可以简单地应用“git diff master..topic”的补丁，然后使用 rebase 向后工作并手动将单个补丁拆分为单独的提交，但是有没有更简单和更优雅的方法？

我已经尝试过直接`git rebase`和`git rebase -p`命令，但没有运气。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T06:53:57.300

我发现以下过程似乎运行良好，尽管并不完美。可能需要一些小的冲突解决方案——见下文。

1.  如果尚未完成，请通过从 master 进行最终合并，确保主题分支与最新的 master 是最新的：

    ```
    git checkout topic
    git merge master 
    ```

2.  通过排除合并来简化主题分支的历史：

    ```
    git log --no-merges 
    ```

3.  从上面的日志中，确定分支点（第一个主题分支commit之前在master上的commit，应该是commit F）。

4.  将主题分支重新定位*到*master 上，忽略合并（这是默认设置，即不使用`--preserve-merges`/`-p`选项），解决任何冲突。

    ```
    git checkout master
    git rebase --onto HEAD F topic 
    ```

    我发现在 rebase 期间，通常会发生冲突，导致文件处于冲突的“Both Modified”状态，但它不包含冲突标记，因此简单`git add`且`git rebase --continue`足以解决冲突并继续。我相信 git 正在使用以前的解决方案来解决冲突。

    此外，在一些更复杂的分支中，`git rebase --onto HEAD ...`将需要多个命令，或者`git cherry-pick`可用于挑选单个提交。只需通过步骤 #2 中给出的日志，将范围重新定位到 HEAD 和/或根据需要可能会挑选个别提交。

5.  当前的 HEAD 现在应该代表重新定位的主题分支。通过检查 diff 是否没有输出来验证结果是否与原始主题分支匹配：

    ```
    git diff topic..HEAD 
    ```

6.  将 HEAD 命名为重新定位的主题分支名称：

    ```
    git checkout -b rebased-topic 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-08T23:24:36.327

拉曼的回答对我来说非常有用，但我想我会在第 4 步周围添加更多细节，这对我来说很棘手......

我有一个更复杂的回购，就像这样

```
 Q-R-S-T-U-V-W-X
       /   /     /   /
A-B-C-D-E-F-G-H-I-J-K 
```

我想要这个：

```
 Q'-R'-S'-T'-U'-V'-W'-X'
                     /
A-B-C-D-E-F-G-H-I-J-K 
```

什么工作`git rebase --onto HEAD Q R`，然后，所以基本上抓住了我合并到`git rebase --onto HEAD S U`的地方之间的提交范围。在我这样做的整个过程中，我都处于超然状态，所以如果你看到这一点，请不要担心。有几次我遇到合并冲突，但它们都是我希望看到的合法冲突。`master``topic`

最后，我有一个看起来正确的分支（拉曼回答中的第 6 步），但由于某种原因，我不得不再次重新定位到 master 以实际移动提交。我不知道为什么我必须这样做，但它进行得很顺利。

我认为这样做基本上相当于摘樱桃，所以这样做可能更简单。

# iphone - 如何将静态库包含到另一个项目中

> ID：11114313
> 
> 赞同：0
> 
> 时间：2012-06-20T06:54:13.647
> 
> 标签：iphone, ipad, static-libraries

我正在使用 Xcode 4.2.1。

我确实有一个静态库 libSignatureLibrary.a（内存为 58k）！

我创建了一个新项目 SingleViewBased 并打开 Link Binary With Libraries 单击“+”添加了 libSignatureLibrary.a，它存储在我在应用程序中添加的桌面上。

我打开目标依赖项单击“+”我在我的项目中看不到 libSignatureLibrary.a 库！

我不知道我在哪里做错了！

任何人都可以给我解决这个问题的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:10:41.233

它很简单，只需将此 libSignatureLibrary.a 物理复制到您的项目文件夹，然后从那里添加您的项目即可。它会工作。

# iphone - 防止触摸通过CCLayer

> ID：11114316
> 
> 赞同：1
> 
> 时间：2012-06-20T06:54:40.357
> 
> 标签：iphone, ios, cocos2d-iphone

我有一个 CCLayer，用作暂停菜单。它占据了整个屏幕，但目前允许触摸通过它。

我想防止触摸通过它，但我遇到了一些困难。这是我所拥有的：

```
-(id)init{
    if(self = [super init]){
        CGSize s = [[CCDirector sharedDirector] winSize];
        self = [CCLayerColor layerWithColor: ccc4(11, 153, 223, 255) width: s.width height: s.height];
        self.position = CGPointZero;
        self.isTouchEnabled = YES;
        [[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self priority:0 swallowsTouches:YES];

    }
    return self;
} 
```

不过，碰触层会导致崩溃，而且似乎也能通过它。

```
Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Layer#ccTouchBegan override me' 
```

防止触摸通过此 cclayer 的最简单方法是什么？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T07:43:36.817

添加图层作为目标触摸代理后，您必须实现 CCTargetedTouchDelegate 方法。至少

```
- (void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
```

这个方法是必需的。其他是可选的。而且您不应该以这种方式将图层添加为触摸委托。CCLayer 类中有一个方法

```
- (void) registerWithTouchDispatcher 
```

覆盖它并将你的线放在那里

```
[[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self priority:0 swallowsTouches:YES]; 
```

如果你想在一段时间内通过这一层进行触摸，你可以写这行

```
[myLayer setIsTouchEnabled: NO]; 
```

或者，如果您想在某个矩形中捕捉触摸，则必须在`ccTouchBegan:withEvent:`方法中实现您的逻辑。如果此方法返回`NO`，则此触摸可由任何其他触摸委托处理。如果此方法返回`YES`，此触摸将不会传递给任何其他触摸委托

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T07:36:23.943

基本上所有的 cocos2d 层都在一个单一的 UIView 中，所有的触摸都不是这个层，而是这个 UIView。为了防止触摸，您可以尝试从`CCTouchDicpatcher`设置图层的`isTouchEnabled`属性中删除委托`NO`。

# c++ - c++ 应用程序中的 openssl 错误 SSL_ERROR_SSL

> ID：11114318
> 
> 赞同：2
> 
> 时间：2012-06-20T06:54:42.897
> 
> 标签：c++, sockets, openssl

当我使用 openssl 创建一个基于 ssl 的服务器-客户端程序时，服务器端的 SSL_accept 和客户端的 SSL_connect 都返回一个名为“SSL_ERROR_SSL”的错误，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T10:53:15.627

检查`OpenSSL_add_all_algorithms()`之后调用`SSL_library_init().`

许多芯片套件需要证书才能使用套件。请检查证书是否存在。

# javascript - 根据内容中的位置调整图像大小

> ID：11114319
> 
> 赞同：0
> 
> 时间：2012-06-20T06:54:43.213
> 
> 标签：javascript, css, image, css-float

我有一个来自客户的非常奇怪的要求：

基本上我有一篇博客文章，在文章的开头有一个浮动到右侧的“元数据”框。所以在文章的开头，内容的宽度是 300px，框结束后，宽度是 500px。所以内容围绕那个盒子包裹/流动，就像一个 L 形。

客户希望，如果将图像插入到帖子中，如果它在框下方，则为 100% 宽度（500 像素），如果在框旁边，则应为 300 像素宽。自动地。他们不想自己调整图像的大小。

我不能在后端（PHP）中做到这一点，是否可以在 CSS / JS 中做到这一点？这里棘手的部分是我不知道图像在内容中的位置 - 它可以是内容中的第一个元素，它可以在中间，最后，无论在哪里......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:12:41.550

不确定我是否足够了解上下文，但这可能会让您朝着正确的方向前进....

```
var offsetOfBottomOfBox = 700; //you would figure this out a different way

$("#contentDiv img").each(function(idx,el){
    //get image position in document
    var y = $(this).offset().top;

    if(y < offsetOfBottomOfBox) {
        $(this).css("width","300px");
    }
}); 
```

注意：我没有测试过这段代码......

# php - 使用 PHP 在 MySQL 中一次更新多行

> ID：11114339
> 
> 赞同：0
> 
> 时间：2012-06-20T06:56:00.843
> 
> 标签：php, mysql

我有一个文本文件，其中包含例如公司名称、产品和价格。数据库中有大约 200 条记录，文本文件中只有一点点。现在我想通过一个 sql 查询将所有价格更新到 db。我试过这个：

```
for($i = $start_row; $i < $stop_row; $i += 3)
...
$prices = array($price1, $price2, price3);
$pricesfloat = array_map('floatval', $prices);
...
$query = "UPDATE test3 SET price1 = $pricesfloat[0], price2 = $pricesfloat[1], price3 = $pricesfloat[2] WHERE company = '$company' AND product = '$product'";
mysql_query($query, $connection) or die(mysql_error()); 
```

`mysql_affected_rows()`返回 0 行。我可以使用 INSERT INTO 将所有值插入到 db，但在这种情况下，我必须更新现有值并稍后添加缺失值。有人可以帮忙吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:12:29.770

`INSERT ... ON DUPLICATE KEY UPDATE`, [http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)，可能适合您的情况：

```
INSERT INTO table (product_id, price) VALUES (1, 1.323),(2, 3434) ... (200, 2.333) ON DUPLICATE KEY UPDATE price = VALUES(price) 
```

批量更新的另一种方式是：

```
UPDATE table
INNER JOIN (
    (SELECT 'company1' AS company, 'product1' AS product, 'price1' AS price
    UNION ALL SELECT 'company2', 'product2', 'price2'
    ....
    UNION ALL SELECT 'companyN', 'productN', 'priceN') AS tmp 
) USING (company, product)
SET table.price = tmp.price 
```

# javascript - 为什么我的 JQuery DIV 是透明的？

> ID：11114340
> 
> 赞同：-5
> 
> 时间：2012-06-20T06:56:02.257
> 
> 标签：javascript, jquery, html, css

我的 Jquery ajax 页面加载并显示在 DIV 中，该 DIV 将自身置于其他页面元素之上，但 DIV 是透明的，或者它实际上位于其他组件的后面，看起来它是透明的并且需要在顶部呈现。如何在具有白色背景的其他页面上实现正常 DIV？为什么使元素不透明很难？这怎么可能是页面元素的默认行为？

![在此处输入图像描述](../Images/7382e96b3f74b21b90afbc4cd80b98fd.png)

Javascript

```
function popup() {
    alert('opening popup');
    var popup = $('.newpopup');

  $.ajax({url:'/PandoraArendeWeb/popup.jsp',
            error: function() {
                alert('Error');
            },
            success: function(data) {   
                popup.html(data); 
                popup.show('fast');
            }
       }
   ); 

   /*
    popup.html("test"); 
    popup.show('fast');
    */
    var screen_width = $(document).width();
var screen_height = $(document).height();
var box_width = popup.width();
var box_height = popup.height();

var top = (screen_height - box_height) / 2; // you might like to subtract a little to position it slightly higher than half way
var left = (screen_width - box_width) / 2;
    popup.css({ 'position': 'absolute', 'top':top, 'left':left });
}
$(document).ready(function(){
  $('button').click(function(){
     popup();
  });
}) 
```

我尝试创建一个 jsfiddle 来重现该问题，但似乎 jsfiddle 不能这样做，`.get`或者`.ajax`因为它无法将页面从 Internet 加载到 DIV。

你能提出什么建议？应该有一个明确的解决方案，透明度真的不应该是元素的默认状态，那么元素如何以透明度呈现？

HTML 是微不足道的

```
<div class="newpopup">
</div>
<button id="mypopup">popup</button> 
```

我的 CSS 就像它永远无法达到一样是这个

```
.newpopup {
z-index:100;
 position: absolute; 
  top:50%;
  left:50%;
  background-color:#ffffff; //not working
} 
```

而作为实际弹出/ div 的 HTML 是这样的

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head><link href="css_js/styles.css" rel="stylesheet" type="text/css">
<title>popup</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
</head>
<body>

<table width="100%" border="0" cellspacing="0" cellpadding="2" align="center" class="TB_nb">
  <tr>
  <td colspan="3" class="pusher TB_nb"><h2>Sök person/företag</h2> 
</td>
  <td><a href="javascript:void(0)" onclick="document.getElementById('popupSokNamn').style.display = 'none';" >X</a></td>
</tr>
</table>
<br><br>
<h2 class="pusher">Sök person/företag</h2>
<div id="Vsok">

<div style="text-align: right; width: 100%; padding-right: 5%; padding-top: 5px;">
<span onClick="getElementById('sokF').style.display='', getElementById('bottomA').style.display='none', getElementById('bottomV').style.display='', getElementById('Vsok').style.display='none'" class="link_sm">Visa s&ouml;kformul&auml;r</span>
</div>

</div>

<div id="sokF">

<div style="text-align: right; width: 100%; padding-right: 5%; padding-top: 5px;; padding-bottom: 5px;">
<span onClick="getElementById('sokF').style.display='none', getElementById('bottomA').style.display='none', getElementById('bottomV').style.display='', getElementById('Vsok').style.display=''" class="link_sm">D&ouml;lj s&ouml;kformul&auml;r</span>
</div>

<div style="width: 100%; margin-left: 15px; margin-right: 80px;" class="fontS80">
<fieldset style="border: 1px solid Grey; display:inline;"><legend class="small">Fysisk</legend> 
<div class="fl30">&nbsp;F&ouml;rnamn:</div>
<div class="fl50"><input type="text" size="60" name="searchFornamn" onkeyup="doSubmitByEnter('Namnsokning', 'search')"></div>
<div class="clear"></div>
<div class="fl30">&nbsp;Efternamn:</div>
<div class="fl50"><input type="text" size="60" name="searchEfternamn" onkeyup="doSubmitByEnter('Namnsokning', 'search')"></div>
</fieldset>

<fieldset style="border: 1px solid Grey; display:inline;"><legend class="small">Juridisk</legend> 
<div class="fl30">&nbsp;F&ouml;retag:</div>
<div class="fl50"><input type="text" size="60" name="searchForetag" onkeyup="doSubmitByEnter('Namnsokning', 'search')"></div>
<div class="clear"></div>
<div class="fl30">&nbsp;Organisationsnummer:</div>
<div class="fl50"><input type="text" size="60" name="searchOrgNummer" onkeyup="doSubmitByEnter('Namnsokning', 'search')"></div>
</fieldset> <br><br>

<!-- <div class="fl30">Attention, c/o etc.:</div>
<div class="fl50"><input type="text" size="60"></div>
<div class="clear"></div>

<div class="fl30">Postadress:</div>
<div class="fl50"><input type="text" size="60"></div>
<div class="clear"></div>

<div class="fl30">Postnummer:</div>
<div class="fl50"><input type="text" size="30"></div>
<div class="clear"></div> -->

<div class="fl30">Postort:</div>
<div class="fl50"><input type="text" size="40" name="searchPostort" onkeyup="doSubmitByEnter('Namnsokning', 'search')"></div>
<div class="clear"></div>

<div class="fl30">Land:</div>
<div class="fl50"><input type="text" size="2" name="searchLandKod" onkeyup="doSubmitByEnter('Namnsokning', 'search')">&nbsp;
                    <select name="searchLand" onkeyup="doSubmitByEnter('Namnsokning', 'search')">
                        <option value="1" SELECTED></option>
                        <option value="2"></option>
                        <option value="3"></option>
                        <option value="4"></option>
                        <option value="5">---------------------------------</option>
</select></div>
<div class="clear"></div>

<!-- <div class="fl30">Region:</div>
<div class="fl20"><select name="">
                        <option value="1" SELECTED></option>
                        <option value="2"></option>
                        <option value="3"></option>
                        <option value="4"></option>
                        <option value="5">-----------------------------------------------</option>
</select></div>
<div class="clear"></div>
<div class="fl30">Tel:</div>
<div class="fl50"><input type="text" size="40"></div>
<div class="clear"></div>

<div class="fl30">Fax:</div>
<div class="fl50"><input type="text" size="40"></div>
<div class="clear"></div>

<div class="fl30">E-post:</div>
<div class="fl50"><input type="text" size="60"></div>
<div class="clear"></div>
 -->
<div class="fl50">&nbsp;</div>
<div class="fl5"><input type="button" value="Rensa"></div>
<div class="fl10"><input type="button" value="  S&ouml;k  " onclick="javascript:doSubmit('Namnsokning', 'search')"></div>
<div class="clear">&nbsp;</div>
<div class="clear">&nbsp;</div>
</div>

</div>

<table width="100%" border="0" cellspacing="0" cellpadding="4" align="center">
<tr>    
    <td><h3>Sökresultat:</h3></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
</tr>
<tr>    
    <td colspan="4">En massa text <span class="link">Hj&auml;lp!</span> </td>
</tr>
<tr>    
    <td><input type="button" value="Visa alla"></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
</tr>
<tr class="smallb">
    <td>Antal &auml;renden: 527</td>
    <td>&nbsp;</td>
    <td>Visa &auml;renden: &#60;&#60; 1-200 201-400 401-527 &#62;&#62; </td>
<td>&nbsp;</td>
</tr>
</table>

<table width="100%" cellspacing="0" align="center" class="sortable" id="unique_id">
<tr>
    <th class="thkant">F&ouml;rnamn</th>
    <th class="thkant">Efternamn</th>
    <th class="thkant">Adress</th>
    <th class="thkant">Postnr</th>
    <th class="thkant">Postort</th>
    <th class="thkant">Region</th>
    <th class="thkant">Land</th>
    <th class="thkant">Telefonnummer</th>
</tr>

</table>

<div id="bottomV">
<table width="100%" align="center">
<tr>
<td align="left"><input type="button" id="visaknapp" value="Visa" disabled style="width:150px;" onClick="getElementById('sokR').style.display='', getElementById('bottomA').style.display='', getElementById('bottomV').style.display='none', getElementById('Vsok').style.display='', getElementById('sokF').style.display='none'"></td>
<td align="right"><input type="button" value="Avbryt" style="width:150px;" class="checkmargin"><input type="button" value="Infoga" disabled style="width:150px;"></td>
</tr>
</table>
</div>

<div id="bottomA" style="display: none">
<table width="100%" align="center">
<tr>
<td align="left"><input type="button" value="&Auml;ndra i register" style="width:150px;"></td>
<td align="right"><input type="button" value="Avbryt" style="width:150px;" class="checkmargin"><input type="button" value="Infoga" style="width:150px;"></td>
</tr>
</table>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T07:03:37.070

> 应该有一个明确的解决方案，透明度真的不应该是元素的默认状态，那么元素如何以透明度呈现？

实际上，除非您为元素指定明确的背景颜色，否则默认情况下*它们*是透明的。这样才能显示真实的页面背景。

*只需在弹出 div上*放置背景颜色（如果合适，还可以添加 z-Index），就可以使其按预期显示为叠加层。

如果它不起作用，那么*某些东西*会阻止您提供的（正确的）CSS 被使用。

也许您应该从加载的页面中删除额外的 HTML 正文等？页面中不应同时存在两个`<body>`标签。如果您无法更改加载的页面（例如，如果它也用作独立页面），请尝试以下操作：

```
popup.empty().append($('body', data).children()); 
```

代替：

```
popup.html(data); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T07:11:30.627

使用以下代码将背景颜色应用于 div

$(".newpopup").css('背景色', '白色');

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T07:07:24.963

所以，如果我没看错，您的 jQuery 脚本正在读取一个`.jsp`文件，该文件具有完整的标题集、正文等...

您应该将弹出窗口的内容放入 an`iFrame`或删除之前（包括）`<body>`和之后（包括）的所有标签`</body>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T07:01:54.010

您将在 .newpopup 类中尝试此属性

```
'overlayShow'   : true,
'transitionIn'  : 'elastic',
'transitionOut' : 'elastic',
'opacity'       : '0.80'; 
```

或者

```
#popup {
margin: 0 auto;
height:100%;
width: 100%;
z-index:501;
background: #effeef;
position: absolute;
padding:0;
top: 0;
-moz-opacity:0.80;
-khtml-opacity: 0.80;

opacity: 0.80;
filter:alpha(opacity=100);
}

#window {
padding:0;
width: 200px;
height: 200px;
margin: 0 auto;
border: 3px solid #d3d4d3;
background:url(sign_in_bg.gif) repeat-x;
position: absolute;
top: 200px;
left: 45%;
}

<div id="popup" align="center" style="display:none">
<div id="window" align="center">
content....
</div> 
```

# android - 强制视频在 Android 上的 Youtube 应用中打开

> ID：11114341
> 
> 赞同：12
> 
> 时间：2012-06-20T06:56:06.993
> 
> 标签：android, android-intent, youtube

我有一个链接到 youtube 视频的移动网站。在 Android 上，单击此链接会弹出一个对话框，要求用户“使用”他们的浏览器或 Youtube 应用程序“完成操作”。

有没有办法绕过这个屏幕，只在 Youtube 应用程序中播放视频？（例如使用 youtube:// URL。）

谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-20T07:01:20.610

您可以这样做：

```
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("vnd.youtube://" + id));
startActivity(intent); 
```

id 是 url 中问号后面的标识符。例如：youtube.com/watch?v= *ID*

另一种方法是：

```
Intent videoIntent = new Intent(Intent.ACTION_VIEW);
videoIntent.setData(url);
videoIntent.setClassName("com.google.android.youtube", "com.google.android.youtube.WatchActivity");
startActivity(videoIntent); 
```

……

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-02-06T07:51:40.607

最好的办法

```
try {

     Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("vnd.youtube://" + id));
     intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
     startActivity(intent);

} catch (ActivityNotFoundException e) {

    // youtube is not installed.Will be opened in other available apps

    Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse("https://youtube.com/watch?v=" + id));
    startActivity(i);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-07-22T06:30:23.077

尝试使用 JavaScript 重定向，如下所示：

```
window.location = "vnd.youtube://the.youtube.video.url"; 
```

更全面：

```
if( /Android/i.test(navigator.userAgent ) ) {
    // If the user is using an Android device.
    setTimeout(function () { window.location = "market://details?id=com.google.android.youtube"; }, 25);
    window.location = "vnd.youtube://www.youtube.com/watch?v=yourVideoId";
} 
```

如果 Youtube 应用程序被禁用，超时功能会将您重定向到 Play 商店中的 youtube 应用程序，让您启用该应用程序。第二个重定向将弹出并在 Android Youtube 应用上播放 youtube 视频。

如果您在超时时间间隔内已经切换到 YouTube 应用，则不会调用超时函数，您不会切换到 Play 商店而是留在 YouTube 应用中。

# iphone - 如何在循环中指定按钮标题——objective-C'iOS'

> ID：11114344
> 
> 赞同：1
> 
> 时间：2012-06-20T06:56:26.427
> 
> 标签：iphone, objective-c, xcode

嗨，我想为我的按钮设置 2 个不同的标题，我有 7 个按钮，带有 1 到 7 个数字标题，还有 8 个按钮，我想将“设置”作为标题，

你能帮我知道如何在循环中指定标题吗？

提前致谢！

这是我的图片，我想**在我的最后一个按钮中使用“设置”标题而不是 8**。

这是我的代码：

```
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
int rows = 4, columns = 2;
UIView *buttonView = [[UIView alloc] initWithFrame:CGRectMake(0.f, 0.f, 200*columns, 105*rows)];
int currentTag = 0;

for (int y = 0; y < rows; y++) {
    //     currentTag++;

    for (int x = 0; x < columns; x++) {

        UIButton * button = [UIButton buttonWithType:UIButtonTypeCustom]; 
        button.backgroundColor=[UIColor colorWithRed: 201.0/255.0 green: 201.0/255.0 blue:201.0/255.0 alpha: 1.0];
        button.tag = currentTag; // ADDED
        currentTag++;
        [button.layer setBorderColor: [[UIColor blackColor] CGColor]];
        [button.layer setBorderWidth: 1.0];
        [button setTitle:[NSString stringWithFormat:@"%d",currentTag] forState:UIControlStateNormal];
        button.frame = CGRectMake(200*x, 105*y, 200, 105);
        [button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
        [buttonView addSubview: button];

    }
}

// Center the view which contains your buttons
CGPoint centerPoint = buttonView.center;
centerPoint.x = self.view.center.x;
buttonView.center = centerPoint;
[self.view addSubview:buttonView];    

}

-(void)buttonPressed:(UIButton *)button
{
NSLog(@"button %u -- frame: %@", button.tag, NSStringFromCGRect(button.frame));
} 
```

**编辑 2 以将另一个视图连接到按钮**

第一视图控制器.h

```
 @interface FirstViewController : UIViewController{
SecondViewController *createViewController;
}

-(void)buttonPressed:(UIButton *)button;

@end 
```

我的按钮代码

```
-(void)buttonPressed:(UIButton *)button
{
NSLog(@"button %u -- frame: %@", button.tag, NSStringFromCGRect(button.frame));
{ if (!createViewController) { createViewController = [[TDDSecondViewController alloc]        initWithNibName:@"TDDSecondViewController" bundle:nil]; 

}
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T07:01:54.493

在您的内部循环中：

```
 for (int x = 0; x < columns; x++) {

        UIButton * button = [UIButton buttonWithType:UIButtonTypeCustom]; 
        button.backgroundColor=[UIColor colorWithRed: 201.0/255.0 green: 201.0/255.0 blue:201.0/255.0 alpha: 1.0];
        button.tag = currentTag; // ADDED
        currentTag++;
        [button.layer setBorderColor: [[UIColor blackColor] CGColor]];
        [button.layer setBorderWidth: 1.0];
        if (x == 1 && y == 3) {
           [button setTitle:@"Set" forState:UIControlStateNormal];
        } else {
           [button setTitle:[NSString stringWithFormat:@"%d",currentTag]forState:UIControlStateNormal];
        }

        button.frame = CGRectMake(200*x, 105*y, 200, 105);
        [button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
        [buttonView addSubview: button];

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T07:05:45.007

您可以检查 currentTag 的值是否等于 8，然后设置不同的标题：

```
if (currentTag == 8) {
    [button setTitle:@"Set" forState:UIControlStateNormal];
} else {
    [button setTitle:[NSString stringWithFormat:@"%d",currentTag]forState:UIControlStateNormal];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T07:06:38.100

```
if (button.tag==yournumber) {
           [button setTitle:@"Set" forState:UIControlStateNormal];
        } else {
           [button setTitle:[NSString stringWithFormat:@"%d",currentTag]forState:UIControlStateNormal];
 } 
```

像这样试试。我想这会对你有所帮助。

# python - 如何在python中使用opencv模块可视化描述符匹配

> ID：11114349
> 
> 赞同：9
> 
> 时间：2012-06-20T06:57:22.947
> 
> 标签：python, opencv, image-processing, descriptor

我正在尝试将 opencv 与 python 一起使用。我在 C++ 版本的 opencv 2.4 中编写了一个描述符（SIFT、SURF 或 ORB）匹配代码。我想用python将此代码转换为opencv。我找到了一些关于如何在 c++ 中使用 opencv 函数的文档，但是 python 中的许多 opencv 函数我找不到如何使用它们。这是我的python代码，我目前的问题是我不知道如何在python中使用opencv c++的“drawMatches”。我找到了 cv2.DRAW_MATCHES_FLAGS_DEFAULT 但我不知道如何使用它。这是我使用 ORB 描述符匹配的 python 代码：

```
im1 = cv2.imread(r'C:\boldt.jpg')
im2 = cv2.cvtColor(im1, cv2.COLOR_BGR2GRAY)
im3 = cv2.imread(r'C:\boldt_resize50.jpg')
im4 = cv2.cvtColor(im3, cv2.COLOR_BGR2GRAY)

orbDetector2 = cv2.FeatureDetector_create("ORB")
orbDescriptorExtractor2 = cv2.DescriptorExtractor_create("ORB")
orbDetector4 = cv2.FeatureDetector_create("ORB")
orbDescriptorExtractor4 = cv2.DescriptorExtractor_create("ORB")

keypoints2 = orbDetector2.detect(im2)
(keypoints2, descriptors2) = orbDescriptorExtractor2.compute(im2,keypoints2)
keypoints4 = orbDetector4.detect(im4)
(keypoints4, descriptors4) = orbDescriptorExtractor4.compute(im4,keypoints4)
matcher = cv2.DescriptorMatcher_create('BruteForce-Hamming')
raw_matches = matcher.match(descriptors2, descriptors4)
img_matches = cv2.DRAW_MATCHES_FLAGS_DEFAULT(im2, keypoints2, im4, keypoints4, raw_matches)
cv2.namedWindow("Match")
cv2.imshow( "Match", img_matches); 
```

“img_matches = cv2.DRAW_MATCHES_FLAGS_DEFAULT(im2, keypoints2, im4, keypoints4, raw_matches)”行的错误消息

```
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
TypeError: 'long' object is not callable 
```

我花了很多时间搜索在 python 中使用 opencv 函数的文档和示例。但是，我很沮丧，因为在 python 中使用 opencv 函数的信息很少。如果有人能教我在哪里可以找到有关如何在 python 中使用 opencv 模块的每个功能的文档，那将非常有帮助。感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-10-07T15:59:30.600

我自己也写了一些只使用 OpenCV Python 接口而我没有使用`scipy`. `drawMatches`是 OpenCV 3.0.0 的一部分，而不是我目前使用的 OpenCV 2 的一部分。即使我迟到了，这是我自己的实现，`drawMatches`尽我所能模仿。

我提供了自己的图像，其中一张是摄影师，另一张是相同的图像，但逆时针旋转了 55 度。

我写的基本前提是我分配了一个输出 RGB 图像，其中行数是两个图像中的最大值，以适应将两个图像放在输出图像中，并且列只是两个列的总和一起。我将每个图像放在它们对应的位置，然后遍历所有匹配的关键点的循环。我提取两个图像之间匹配的关键点，然后提取它们`(x,y)`的坐标。然后我在每个检测到的位置画圆圈，然后画一条线将这些圆圈连接在一起。

请记住，在第二张图像中检测到的关键点是相对于它自己的坐标系的。如果要将其放置在最终输出图像中，则需要将列坐标偏移第一个图像的列数，以便列坐标相对于输出图像的坐标系.

无需再费周折：

```
import numpy as np
import cv2

def drawMatches(img1, kp1, img2, kp2, matches):
    """
    My own implementation of cv2.drawMatches as OpenCV 2.4.9
    does not have this function available but it's supported in
    OpenCV 3.0.0

    This function takes in two images with their associated 
    keypoints, as well as a list of DMatch data structure (matches) 
    that contains which keypoints matched in which images.

    An image will be produced where a montage is shown with
    the first image followed by the second image beside it.

    Keypoints are delineated with circles, while lines are connected
    between matching keypoints.

    img1,img2 - Grayscale images
    kp1,kp2 - Detected list of keypoints through any of the OpenCV keypoint 
              detection algorithms
    matches - A list of matches of corresponding keypoints through any
              OpenCV keypoint matching algorithm
    """

    # Create a new output image that concatenates the two images together
    # (a.k.a) a montage
    rows1 = img1.shape[0]
    cols1 = img1.shape[1]
    rows2 = img2.shape[0]
    cols2 = img2.shape[1]

    out = np.zeros((max([rows1,rows2]),cols1+cols2,3), dtype='uint8')

    # Place the first image to the left
    out[:rows1,:cols1,:] = np.dstack([img1, img1, img1])

    # Place the next image to the right of it
    out[:rows2,cols1:cols1+cols2,:] = np.dstack([img2, img2, img2])

    # For each pair of points we have between both images
    # draw circles, then connect a line between them
    for mat in matches:

        # Get the matching keypoints for each of the images
        img1_idx = mat.queryIdx
        img2_idx = mat.trainIdx

        # x - columns
        # y - rows
        (x1,y1) = kp1[img1_idx].pt
        (x2,y2) = kp2[img2_idx].pt

        # Draw a small circle at both co-ordinates
        # radius 4
        # colour blue
        # thickness = 1
        cv2.circle(out, (int(x1),int(y1)), 4, (255, 0, 0), 1)   
        cv2.circle(out, (int(x2)+cols1,int(y2)), 4, (255, 0, 0), 1)

        # Draw a line in between the two points
        # thickness = 1
        # colour blue
        cv2.line(out, (int(x1),int(y1)), (int(x2)+cols1,int(y2)), (255, 0, 0), 1)

    # Show the image
    cv2.imshow('Matched Features', out)
    cv2.waitKey(0)
    cv2.destroyAllWindows() 
```

* * *

为了说明这一点，这是我使用的两张图片：

![在此处输入图像描述](../Images/a09b458cc5276e87f1c6dd879b9863c4.png)

![在此处输入图像描述](../Images/ee943a7d9d7537b8f328a3fedea04951.png)

我使用 OpenCV 的 ORB 检测器来检测关键点，并使用归一化的汉明距离作为相似度的距离度量，因为这是一个二进制描述符。像这样：

```
import numpy as np
import cv2

img1 = cv2.imread('cameraman.png') # Original image
img2 = cv2.imread('cameraman_rot55.png') # Rotated image

# Create ORB detector with 1000 keypoints with a scaling pyramid factor
# of 1.2
orb = cv2.ORB(1000, 1.2)

# Detect keypoints of original image
(kp1,des1) = orb.detectAndCompute(img1, None)

# Detect keypoints of rotated image
(kp2,des2) = orb.detectAndCompute(img2, None)

# Create matcher
bf = cv2.BFMatcher(cv2.NORM_HAMMING, crossCheck=True)

# Do matching
matches = bf.match(des1,des2)

# Sort the matches based on distance.  Least distance
# is better
matches = sorted(matches, key=lambda val: val.distance)

# Show only the top 10 matches
drawMatches(img1, kp1, img2, kp2, matches[:10]) 
```

* * *

这是我得到的图像：

![在此处输入图像描述](../Images/fe75441d8a78a99a1081663855dee485.png)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-28T12:27:16.353

您可以将 Python 中的特征匹配可视化如下。注意 scipy 库的使用。

```
# matching features of two images
import cv2
import sys
import scipy as sp

if len(sys.argv) < 3:
    print 'usage: %s img1 img2' % sys.argv[0]
    sys.exit(1)

img1_path = sys.argv[1]
img2_path = sys.argv[2]

img1 = cv2.imread(img1_path, cv2.CV_LOAD_IMAGE_GRAYSCALE)
img2 = cv2.imread(img2_path, cv2.CV_LOAD_IMAGE_GRAYSCALE)

detector = cv2.FeatureDetector_create("SURF")
descriptor = cv2.DescriptorExtractor_create("BRIEF")
matcher = cv2.DescriptorMatcher_create("BruteForce-Hamming")

# detect keypoints
kp1 = detector.detect(img1)
kp2 = detector.detect(img2)

print '#keypoints in image1: %d, image2: %d' % (len(kp1), len(kp2))

# descriptors
k1, d1 = descriptor.compute(img1, kp1)
k2, d2 = descriptor.compute(img2, kp2)

print '#keypoints in image1: %d, image2: %d' % (len(d1), len(d2))

# match the keypoints
matches = matcher.match(d1, d2)

# visualize the matches
print '#matches:', len(matches)
dist = [m.distance for m in matches]

print 'distance: min: %.3f' % min(dist)
print 'distance: mean: %.3f' % (sum(dist) / len(dist))
print 'distance: max: %.3f' % max(dist)

# threshold: half the mean
thres_dist = (sum(dist) / len(dist)) * 0.5

# keep only the reasonable matches
sel_matches = [m for m in matches if m.distance < thres_dist]

print '#selected matches:', len(sel_matches)

# #####################################
# visualization of the matches
h1, w1 = img1.shape[:2]
h2, w2 = img2.shape[:2]
view = sp.zeros((max(h1, h2), w1 + w2, 3), sp.uint8)
view[:h1, :w1, :] = img1  
view[:h2, w1:, :] = img2
view[:, :, 1] = view[:, :, 0]  
view[:, :, 2] = view[:, :, 0]

for m in sel_matches:
    # draw the keypoints
    # print m.queryIdx, m.trainIdx, m.distance
    color = tuple([sp.random.randint(0, 255) for _ in xrange(3)])
    cv2.line(view, (int(k1[m.queryIdx].pt[0]), int(k1[m.queryIdx].pt[1])) , (int(k2[m.trainIdx].pt[0] + w1), int(k2[m.trainIdx].pt[1])), color)

cv2.imshow("view", view)
cv2.waitKey() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T06:48:34.657

正如错误消息所述，DRAW_MATCHES_FLAGS_DEFAULT 的类型为“long”。它是 cv2 模块定义的常量，而不是函数。不幸的是，你想要的函数“drawMatches”只存在于 OpenCV 的 C++ 接口中。

# c# - Asp.net 形成经过身份验证的 Web 服务

> ID：11114353
> 
> 赞同：4
> 
> 时间：2012-06-20T06:57:41.890
> 
> 标签：c#, .net

我有一个小难题，我有一个使用基于表单的身份验证的 asp.net 应用程序。在应用程序内部，我有一个 Web 服务，它检查 User.IsInRole("somerole") 自从用户登录以来，该服务与来自应用程序的 ajax 调用配合良好，而 ajax 调用来自他登录的浏览器。

现在，我想让胖客户端调用 webservices（初学者的 c# 控制台客户端），但不知道如何将凭证信息传递给它。

我已经考虑过执行以下操作但无济于事：

```
SomeWebService svc = new SomeWebService();
svc.Credentials = new NetworkCredential("formsusername","formspassword","");
String returnValue = svc.CallMyWebMethod(); 
```

有谁能告诉我这个的诀窍吗？:-)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T07:41:22.820

表单身份验证通过让客户端在每个请求中发送一个 Cookie 来工作。当客户端通过发送正确的凭据成功进行身份验证时，服务器会发出此 cookie。

因此，为了使用表单身份验证对用户进行身份验证，您需要在控制台应用程序中执行以下步骤：

1.  向传递用户名和密码的某个网页发送 HTTP POST 请求。`Set-Cookie`作为响应，Web 服务器将为您提供您需要捕获的身份验证 cookie（ HTTP 响应标头）。这通常是您的日志页面。
2.  调用 Web 服务时，您需要传递此 cookie（`Cookie`HTTP 请求标头）。为了在请求中设置 cookie，您必须覆盖`GetWebRequest`为您生成的客户端代理类上的方法：

    ```
    protected override WebRequest GetWebRequest(Uri uri)
    {
        var request = (HttpWebRequest)base.GetWebRequest(uri);

        request.CookieContainer.Add(
            new Cookie(
                ".ASPXAUTH", 
                "THE VALUE YOU HAVE RETRIEVED WHEN YOU SEND YOUR FIRST LOGON REQUEST"
            )
        );

        return request;
    } 
    ```

# arrays - 在向量前面添加零

> ID：11114356
> 
> 赞同：5
> 
> 时间：2012-06-20T06:57:58.653
> 
> 标签：arrays, r, vector, row, zero

我们试图将 730 个零值放在一个 365 X 1 的向量前面。我从另一个矩阵中剪下这个向量。因此，行索引号现在不再有用和令人困惑，例如具有值的向量以 50 开头。如果我创建另一个具有零值的向量或数组，然后使用 rbind 将其绑定到向量之前，它将产生的值由于混合了行索引号而产生的奇怪值，并将其作为 3d 元素处理。

感谢您提供如何实现这一目标或如何重置行索引号的任何想法。最好的费边！

示例：这是我的带有值的向量

```
 pred_mean_temp
 366     -3.0538333
 367     -2.8492875
 368     -3.1645825
 369     -3.5301074
 370     -1.2463058
 371     -1.7036682
 372     -2.0127239
 373     -2.9040319
 .... 
```

我想在它前面添加一个 730 行的零向量。所以它应该是这样的：

```
 1        0
 2        0
  ....
 731     -3.0538333   
 732     -2.8492875
 733     -3.1645825
  .... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T07:19:15.570

像这样的东西？

```
# create a vector
a <- rnorm(730)
# add the 0
a <- c(rep(0,730), a) 
```

然后你可以制作一个矩阵：

```
m <- cbind(1:length(a), a) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T07:20:48.260

您需要使用该`c()`函数连接两个向量。要创建一个零向量，请使用`rep()`：

这是一个例子：

```
x <- rnorm(5)
x <- c(rep(0, 5), x)
x
 [1]  0.0000000  0.0000000  0.0000000  0.0000000  0.0000000  0.1149446  0.3839601 -0.5226029  0.2764657 -0.4225512 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-20T07:50:54.107

根据您的示例，您的向量似乎具有 class `matrix`。如果这是一个要求，那么以下应该工作：

```
set.seed(1)

# Create an example 2-column, 500-row matrix
xx<-matrix(rnorm(1000,-2),ncol=2,dimnames=list(1:500,
  c("pred_mean_temp","mean_temp")))

# Subset 365 rows from one column of the matrix, keeping the subset as a matrix
xxSub<-xx[50:(50+365-1),"pred_mean_temp",drop=FALSE]

xxSub[1:3,,drop=FALSE]
#    pred_mean_temp
# 50      -1.118892
# 51      -1.601894
# 52      -2.612026

# Create a matrix of zeroes and rbind them to the subset matrix
myMat<-rbind(matrix(rep(0,730)),xxSub)

# Change the first dimnames component (the row names) of the rbinded matrix
dimnames(myMat)[[1]]<-seq_len(nrow(myMat))

myMat[c(1:2,729:733),,drop=FALSE]
#     pred_mean_temp
# 1         0.000000
# 2         0.000000
# 729       0.000000
# 730       0.000000
# 731      -1.118892
# 732      -1.601894
# 733      -2.612026 
```

# python - 如何从 python 中具有重复字段的列表中删除字典？

> ID：11114358
> 
> 赞同：5
> 
> 时间：2012-06-20T06:58:12.890
> 
> 标签：python, list, dictionary, duplicates

假设我有一个字典列表。我将“重复”定义为列表中具有相同值的字段“id”的任何两个字典（即使其他字段不同）。如何删除这些重复项。

一个示例列表将类似于：

```
[{'name': 'John' , 'id':1}, {'name': 'Mike' , 'id':5},{'name': 'Dan' , 'id':5}] 
```

在这种情况下，“Mike”和“Dan”将是重复的，需要删除其中一个。不管是哪一个。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-20T07:00:26.477

将它们转储到另一个字典中，然后将它们拉出来。

```
dict((x['id'], x) for x in L).values() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T07:44:19.187

以下函数的列表理解应该可以解决您的问题。

```
def f(seq):
    s = set()
    return [x for x in seq if x['id'] not in s and not s.add(x['id'])] 
```

# flash - 从 Swish Max 3 窗口中的文本框中加载网站 URL

> ID：11114359
> 
> 赞同：0
> 
> 时间：2012-06-20T06:58:13.577
> 
> 标签：flash, url, swish

感谢您提前阅读。

我正在制作一个虚拟的移动屏幕，用户应该在文本框中输入一个 URL，并且该 URL 应该加载到一个移动窗口中。我做了所有的设计。但是有人可以请建议如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:04:49.450

您可以通过其`text`属性获取文本框内容。如果您使用的是名为**myTextBox**的普通文本输入字段：

```
var myUrl:String = myTextBox.text.trim(); // Use trim to strip white spaces!!
getURL(myUrl, "_blank"); 
```

# delphi - 在 Devexpress 列标题提示中使用自定义字体

> ID：11114365
> 
> 赞同：0
> 
> 时间：2012-06-20T06:58:39.457
> 
> 标签：delphi, grid, devexpress, delphi-2007, hint

我使用 D2007 和 Devexpress QuantumGrid v2011 2.3。我想在这样的代码中分配列标题提示。

```
colGoodsMasks.HeaderHint :=
Format('%s %-30s %-30s%s' +
'%s %-30s %-30s%s' +
'%s %-30s %-30s%s' +
'%s %-30s %-30s%s' +
'%s %-30s %-30s%s' +
'%s %-30s %-30s%s' +
'%s %-30s %-30s%s' +
'%s %-30s %-30s%s' +
'%s %-30s %-30s%s' +
'%s %-30s %-30s%s' +
'%s %-30s %-30s%s' +
'%s %-30s %-30s%s',
['! ', 'Parcel', 'Express goods', sLineBreak,
'*', 'Parcel', 'Require cold transport', sLineBreak,
'¤', 'Parcel', 'Require heat transport', sLineBreak,
'€', 'Parcel', 'Fragile goods', sLineBreak,
'A', 'Party role', 'Sender', sLineBreak,
'M', 'Party role', 'Receiver', sLineBreak,
'S', 'Party role', 'Seller', sLineBreak,
'K', 'Party role', 'Buyer', sLineBreak,
'/', 'Party property', 'Require tail lifter', sLineBreak,
'1⁄2', 'Party property', 'Require only hauler', sLineBreak,
'¿', 'Party property', 'Require (un)loading from top', sLineBreak,
'%', 'Party property', 'Require (un)loading from back', sLineBreak,
'@', 'Party property', 'Require Avi', sLineBreak]); 
```

结果应该是提示中的 3 个左对齐列，但边距不直。我认为这是因为字体是成比例的。如何更改提示中的字体以使边距笔直？

**EDIT1：** 从文档中得到这个：

*每当应用程序中出现全局属性设置为 True 的活动提示样式控制器时，显示其提示的每个控件都使用此提示样式控制器的样式，除非在表单中定义了另一个（称为“本地”）提示样式控制器。*

但我不想更改应用程序或此表单中任何其他提示的字体。也许我必须为此使用 HitTest 并调用 ShowHint ？但不确定如何实现这一点。

![网格提示](../Images/6c44c8b828546c20b0ad93a2fce5070f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T17:03:19.750

使用 TcxHintStyleController 实例。然后将 HintStyle.CaptionFont 属性更改为等宽字体。

# c++ - firebreath npplugin中的文件写入权限被拒绝

> ID：11114369
> 
> 赞同：0
> 
> 时间：2012-06-20T06:59:00.393
> 
> 标签：c++, c, linux, firebreath

源代码已经在 Fedora 15,16 和 Ubuntu 10,11,12 中测试过，没有问题。

但是在 Fedora 17 中，文件写入功能不起作用。

1)

```
int fd;
if ( 0 < ( fd = open("/home/test/temp/opentest.html", O_CREAT | O_EXCL, 0777))) {
    write(fd, "test", strlen("test"));
    close(fd);
    return "Success";
} else {
    return "Error";
} 
```

返回值：错误

2)

```
FILE *pFile;
pFile = fopen("/home/test/temp/opentest.html", "w+");
if (pFile == NULL) {
    return "Pointer is NULL";
} else {
    fputs("fopen test", pFile);
    fclose(pFile);
    return "Success";
} 
```

返回值：“指针为空”

我猜目录的权限会出错并设置 777 权限。但什么都没有改变。

相同的代码在普通的 C 程序中工作。

为什么它在 firebreath npPlugin 中不起作用？

许可有什么区别吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:21:19.897

最有可能的是，该目录不存在，或者您没有写入它的权限。

这个命令有用吗？
`echo 123 > /home/test/temp/opentest.html`

# api - 如何从 iTunes Search API 过滤音频播客？

> ID：11114381
> 
> 赞同：4
> 
> 时间：2012-06-20T06:59:47.770
> 
> 标签：api, itunes, podcast

通过使用 iTunes API (http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html) 搜索播客，结果包含音频和视频播客。有没有办法从 API 中只检索音频播客？

提前致谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-21T18:24:41.027

从文档看来，过滤音频和视频播客似乎是不可能的。但是，您可以遍历生成的项目并检查每个项目是音频还是视频以进行过滤。您可以从 RSS 提要中查找其他信息，或者使用 subscribePodcast url 再次调用 iTunes（参见示例）。

```
使用系统；
        使用 System.Collections.Generic；
        使用 System.Linq；
        使用 System.Text；
        使用 System.Net；
        使用 System.Web.Script.Serialization；
        使用 System.Xml.Linq；
        使用 System.IO；

        命名空间 ConsoleTest
        {
            课堂节目
            {
                静态无效主要（字符串 [] 参数）
                {

                    //搜索 Windows 周刊
                    字符串 url = "https://itunes.apple.com/search?term=Windows%20Weekly&media=podcast&attibute=audio";

                    字符串 json = FetchHTML(url);

                    JavaScriptSerializer s = new JavaScriptSerializer();
                    var 结果 = s.Deserialize(json);

                    var audioOnly = new List();

                    foreach（结果中的变量项。结果）
                    {

                    if (!IsVideo(item.TrackId))
                    {
                        audioOnly.Add(item);
                    }

                }

                foreach（audioOnly 中的 var au）
                {
                    Console.WriteLine(au.TrackName);
                }

                Console.ReadLine();
            }

            静态布尔 IsVideo（字符串 id）
            {
                string req = "https://buy.itunes.apple.com/WebObjects/MZFinance.woa/wa/com.apple.jingle.app.finance.DirectAction/subscribePodcast?id=" + id + "&wasWarnedAboutPodcasts=true";

                字符串 xml = FetchHTML(req,true);

                布尔 isVideo = false;

                var re = XElement.Load(new StringReader(xml)).Elements("dict").Elements("dict");

                布尔下一个=假；
                foreach（re.Elements() 中的变量 e）
                {
                    如果（下一个）
                    {
                        //这是视频值
                        isVideo = e.Name.LocalName.Trim().ToLower() == "true";
                        下一个=假；
                        休息;
                    }
                    if (e.Value == "is-video")
                    {
                        下一个=真；
                    }
                }

                返回是视频；
            }

            静态字符串 FetchHTML(字符串 url,bool doItAsITunes = false)
            {
                字符串 htmlCode = "";

                使用（WebClient 客户端 = 新 WebClient()）
                {
                    如果（doItAsITunes）
                    {
                        client.Headers.Add("user-agent", "iTunes/9.1.1");
                    }

                    htmlCode = client.DownloadString(url);
                }

                返回html代码；
            }

        }

        公共类搜索结果
        {
            公共搜索结果（）
            {
                结果=新列表（）；
            }

            公共 int ResultCount { 设置；得到; }
            公开列表结果{集；得到; }
        }

        公共类项目
        {
            公共项目（）
            {
                GenreIDs = 新列表（）；
                流派 = 新列表（）；

            }

            公共字符串 WrapperType { 设置；得到; }
            公共字符串种类 { 设置；得到; }
            公共字符串 ArtistID { 设置；得到; }
            公共字符串 CollectionID { 设置；得到; }
            公共字符串 TrackId { 设置；得到; }
            公共字符串 ArtistName { 设置；得到; }
            公共字符串 CollectionName { 设置；得到; }
            公共字符串 TrackName { 设置；得到; }
            公共字符串 CollectionCensoredName { 设置；得到; }
            公共字符串 TrackCensoredName { 设置；得到; }
            公共字符串 ArtistViewUrl { 设置；得到; }
            公共字符串 FeedUrl { 设置；得到; }
            公共字符串 TrackViewUrl { 设置；得到; }
            公共字符串 PreviewUrl { 设置；得到; }
            公共字符串 ArtworkUrl60 { 设置；得到; }
            公共字符串 ArtworkUrl100 { 设置；得到; }
            公共浮动 CollectionPrice { set; 得到; }
            公共浮动 TrackPrice { 设置；得到; }
            公共字符串 CollectionExplicitness { set; 得到; }
            公共字符串 TrackExplicitness { 设置；得到; }
            公共字符串 DiscCount { 设置；得到; }
            公共字符串 DiscNumber { 设置；得到; }
            公共字符串 TrackCount { 设置；得到; }
            公共字符串 TrackNumber { 设置；得到; }
            公共字符串 TrackTimeMillis { 设置；得到; }
            公共字符串国家{集; 得到; }
            公共字符串货币 { 设置；得到; }
            公共字符串 PrimaryGenreName { 设置；得到; }
            公共列表 GenreIDs { set; 得到; }
            公共列表流派{设置；得到; }
        }

    }

```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-30T13:32:37.570

是的。在常规搜索中，您会得到一切： [https ://itunes.apple.com/search?term=jack+johnson](https://itunes.apple.com/search?term=jack+johnson)

但是您可以添加一些参数来请求例如（针对您的情况）

```
&entity=song 
```

所以请求将是：

```
https://itunes.apple.com/search?term=jack+johnson&entity=song 
```

有关更多信息，请查看[本文档](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html)中的*搜索部分*

# wcf - WCF 服务行为向我的服务添加操作

> ID：11114383
> 
> 赞同：0
> 
> 时间：2012-06-20T06:59:49.600
> 
> 标签：wcf, servicebehavior

我想创建一个服务行为，为我的服务添加额外的服务操作。通过这种方式，我可以将行为添加到我的任何服务（现有的和未来的）中，并且我的服务都能够执行这个额外的服务操作。（例如 ping 或返回一些其他服务信息）

我不确定在这里做什么来实现我想要的，到目前为止我试图做的是实现一个试图修改服务描述的服务行为。我应该添加一个端点，然后在其上指定一个新合同吗？

```
 public class MyOperationBehavior : IServiceBehavior
{
   void IServiceBehavior.ApplyDispatchBehavior(
                    ServiceDescription desc, ServiceHostBase host)
    {
       ServiceEndpointCollection sec = svcDesc.Endpoints;
       ServiceEndpoint se = new ServiceEndpoint()
       {
            se.Address = "DoMyOperation";
            se.Binding = "basicHttpBinding";
            se.Contract = MyCustomContract;           
       }

    }
} 

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:21:36.980

使用服务的好处之一是您向消费者公开了一组定义明确且相当静态的操作。

我不确定能够在运行时动态添加服务操作如何使您的消费者受益。

我建议，如果您需要根据每个消费者更改服务合同，那么这可能表明您的服务组合可能不适合您的消费者需求。

很抱歉，这并没有直接回答您的问题，并感谢建议的规模返工可能超出当前的开发范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T03:26:36.853

我在这篇关于[动态地将方法添加到 WCF 服务的](http://zamd.net/2010/02/05/adding-dynamic-methods-to-a-wcf-service/)文章中找到了我正在寻找的内容，而无需将其添加到每个服务合同中。

但我也相信使用 WS-Discovery 是实现我想要的更好的方法：公开有关服务的信息而无需接触服务合同

# c# - 错误：从 XML 获取节点的值时，令牌无效

> ID：11114389
> 
> 赞同：0
> 
> 时间：2012-06-20T07:00:12.740
> 
> 标签：c#, .net

在下面的代码中，我需要获取根节点内的节点值

```
Root Node :   <basemap:AlterationService xmlns:basemap="http://www.xxx.com/basemap"> 
```

为此，我需要向 XmlNodeList 提供节点名称，以便获取数据。我正在使用下面的 c# 代码来获取值，但是，我得到了错误，

```
'<basemap:AlterationService xmlns:basemap="http://www.xxx.com/basemap"' has an invalid token. 
```

C＃ ：

```
 XmlDocument xml = new XmlDocument();
    xml.Load("C:/Test/Sample.xml");

    string RootNode = "basemap:AlterationService xmlns:basemap=\"http://www.xxx.com/basemap\"";
     XmlNodeList xnList = xml.SelectNodes(RootNode); //Error in this line
     foreach (XmlNode xn in xnList)
     {
        ................
        ................
     }

XML : 

   <?xml version="1.0"?>
   <basemap:AlterationService xmlns:basemap="http://www.xxx.com/basemap">
      .....
      .....
   </basemap:AlterationService> 
```

# windows-7 - 在我的机器上实现我自己的电子邮件服务器

> ID：11114391
> 
> 赞同：0
> 
> 时间：2012-06-20T07:00:19.813
> 
> 标签：windows-7, iis-7, smtp, sendmail

我对电子邮件服务器配置字段非常陌生。

我的数据库中有 10 000 个电子邮件地址。我唯一的要求是向每个电子邮件地址发送一封邮件。但我不需要接收任何邮件（不需要静态 IP）。我知道这对于 Gmail 或 hotmail 等普通邮件是不可能的。我该怎么做 ？

我试过 SMTP。安装了 IIS 7。当我要配置 SMTP 时，它会询问一个电子邮件地址。我相信它是作为客户端和前言邮件到真正的电子邮件服务器。

如何在我的机器上实现我自己的电子邮件服务器？或者如果我使用 Linux 内核会发生什么事情？

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T14:00:01.797

嗯......我们正在谈论发送邮件，对吗？:]

嘿，现在是 2012 年，在垃圾邮件大战中！我超过 100% 确信您会浪费大量时间并最终导致您的 ISP 阻止您的电子邮件帐户发送电子邮件。因为您必须使用现有的 SMTP 服务器/帐户或您自己的加密发送，本地服务器将只能使用端口 25，该端口在大多数目标服务器上被阻止。

想知道最佳解决方案吗？查找任何网站（如 freelancer.com），您可以在其中提供一次性发送电子邮件的工作，并为这些收件人付款。这是最简单、最快、最省心的方法。而且对于只有 10k 个地址来说，它应该是相当便宜的（我在自由职业者上找到了一些印地语公司，我花了 10 美元（10 美元！）邮寄到 500k+ 个地址，尽管做这项工作的质量和时间真的很差）。

我有同样的问题。我浪费了几个小时来尝试设置自己的邮件服务器或使用一些特定的邮件软件。我考虑了很多解决方案，浪费了太多时间，最终从 freelancer.com 找人为我做这项工作并为此付费。

您还可以考虑使用专业的邮件发送服务，例如[MailChimp](http://mailchimp.com/pricing/free/)。

MailChimp 允许您每月发送多达 12 000 封电子邮件，完全免费（作为其付费服务的演示）。但是由于您的地址簿中每次只能有 2k 个地址，因此您必须将 10k 数据库分成五个部分，并在五天之内发送整个邮件。不过，还是免费的。

# core-data - 不相关实体的CoreData Fetch Predicate

> ID：11114392
> 
> 赞同：0
> 
> 时间：2012-06-20T07:00:23.733
> 
> 标签：core-data, ios5, nspredicate

我无法为不相关的实体执行 CoreData 获取请求。假设我有一个包含 3 个实体的对象模型`Message`：`User`和`Advisor`.

我希望这 3 个对象彼此无关。所以 a`Message`确实有一个属性`senderEmail`，`receiverEmail`而 while`User`和`Advisor`确实有这个属性`email`。
但同样，这些对象之间没有进一步的关系。
例如，我现在想`Message`通过顾问或用户获取最新（新闻）。但是，由于对象未连接，我应该如何执行此获取谓词？

这甚至可以在一个 Fetch Request 中实现，还是我需要将每个对象分别提取到一个数组中，然后进行进一步的操作以获得我想要的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:26:20.673

亚历山大，

如果这些实体彼此不相关，您需要执行不同的获取请求来获取您的数据。

因此，例如，您可以获取最新的`Message`设置请求，如下所示：

```
NSPredicate* predicate = [NSPredicate predicateWithFormat:@"senderEmail == %@", grabbedEmail];

NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"insertionDate" ascending:YES];
NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];

NSFetchRequest *messageFetch = [[NSFetchRequest alloc] init];
[messageFetch setEntity:[NSEntityDescription entityForName:@"Message" inManagedObjectContext:yourContext]];
[messageFetch setPredicate:predicate];
[messageFetch setSortDescriptors:sortDescriptors];
[messageFetch setFetchLimit:1]; 
```

要检索`grabbedEmail`（如果没有），您需要使用特定谓词设置请求。这同样适用于接收方电子邮件。例如。

```
NSPredicate* predicate = [NSPredicate predicateWithFormat:@"userId == %@", @"someUserId"];

NSFetchRequest* userFetch = [[NSFetchRequest alloc] init];
[userFetch setEntity:[NSEntityDescription entityForName:@"User" inManagedObjectContext:yourContext]];
[userFetch setPredicate:predicate];
[userFetch setFetchLimit:1];

NSArray* userResults = [userFetch executeFetchRequest:&error];

User* retrievedUser = (User*)[userResults objectAtIndex:0];
NSString* grabbedEmail = [retrievedUser email]; 
```

要按日期排序，您可以简单地向`Message`实体添加一个名为`insertionDate`（类型`NSDate`）的属性，该属性允许您按日期排序。

当你执行请求时

```
NSArray* results = [messageFetch executeFetchRequest:&error]; 
```

该数组`results`将包含`Message`您要查找的（唯一）元素。

为什么您需要维护单独的这些实体？

希望有帮助。

# xpages - Xpage源代码重复

> ID：11114393
> 
> 赞同：1
> 
> 时间：2012-06-20T07:00:25.457
> 
> 标签：xpages

在 Xpages 中 有时，当元素在设计窗格中移动时，它会被重复（重复出现在源代码中）。这也发生在复制粘贴期间。所以我在我的 xpages 中遇到了很多错误。

*   谁能解释我为什么会这样？

*   有什么解决方案可以防止这种情况发生吗？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T07:38:21.310

您使用的是 8.5.3 吗？我在早期版本中经常遇到这种情况，但在 8.5.3 中没有看到。仅在源模式下使用剪切和粘贴来移动元素，这通常会有所帮助。

# javascript - 获取 chrome 中所有打开选项卡的 url，并将其发送到 Web 服务

> ID：11114395
> 
> 赞同：3
> 
> 时间：2012-06-20T07:00:27.993
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在制作一个 chrome 扩展来获取所有打开的选项卡的 url 并将它们全部保存以将它们发送到域。所以我需要 2 个步骤：

1.  获取所有打开选项卡的 url 并将它们存储在数组或类似的东西中。
2.  将所有 url 的数组发送到域。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T07:37:46.407

查看[`chrome.windows.getAll`](http://code.google.com/chrome/extensions/windows.html#method-getAll)以获取打开的窗口列表。每个窗口都有一个`tabs`属性，该属性包含窗口中的选项卡列表。每个选项卡都有一个`url`属性。请参阅[标签文档](http://code.google.com/chrome/extensions/tabs.html#type-Tab)。

您将要遍历窗口，然后是每个窗口中的选项卡，并将它们添加到您的数组中，然后执行您想做的任何事情。

通常你不能这样做，但是允许具有必要权限的 chrome 扩展来做[Cross-Origin XMLHttpRequest](http://code.google.com/chrome/extensions/xhr.html)。您需要将列表发送到其他域。

您可以使用`JSON.stringify`将数组转换为可以发送的字符串，然后在服务器端使用一些类似的函数将其转换回数组。

# java - 相当于加载 teradata 表的 Sql struct 是什么

> ID：11114396
> 
> 赞同：0
> 
> 时间：2012-06-20T07:00:37.893
> 
> 标签：java, teradata

我有一个将 XML 中的数据加载到 Oracle 表中的应用程序。现在我们正在转向 teradata。使用 Java 填充 DAO，并且 DAO 在将 DTO 映射到 sql 结构对象后调用 oracle 存储过程。如果我想对 Teradata 做同样的事情，没有我可以通过 Java 加载的 sql struct 对象这样的对象。无论如何我可以使用某种方法直接从 DTO 与 Teradata 进行交互。

有没有办法将 XML 直接填充到 teradata 而不加载到任何登陆表？

# iphone - 核心数据获取：按关系计数排序

> ID：11114399
> 
> 赞同：2
> 
> 时间：2012-06-20T07:00:45.450
> 
> 标签：iphone, core-data, nsfetchrequest, kvc

我正在尝试获取其中一个关系中计数最少的实体。该实体称为解决方案，它具有称为 gamesFeaturedIn 的一对多关系，其中链接到 Game 对象。所以我这样做（使用 RestKit 便利方法）：

```
Solution* lowestPlayedSolution = [Solution findFirstWithPredicate: nil sortedBy: @"gamesFeaturedIn.@count" ascending: NO];
NSUInteger lowestPlayedCount = [lowestPlayedSolution.gamesFeaturedIn count]; 
```

这会引发错误：

> '包含不应该有的 KVC 聚合的密钥路径；无法处理 gamesFeaturedIn.@count'

几年前我发现了一些类似问题的帖子。也许事情已经发生了变化，旧帖子没有给出任何明确的答案来说明如何在不将所有对象提取到内存并手动执行计算的情况下做到这一点。任何人？

编辑：核心数据存储是 SQLite 支持的，所以我不能使用瞬态属性进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:11:09.123

很抱歉告诉你这个坏消息，但事情并没有改变，至少在 iOS5 中是这样。主要有两种解决方法，都相当不优雅。

1.  你提到的那个，你在内存中进行排序。
2.  您创建一个非瞬态属性来存储计数并在每次添加或删除关系中的项目时更新它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T07:38:26.693

为该属性创建一个临时属性 (relationshipCount) 和一个访问器，您可以在其中返回该关系的计数。您现在可以对此属性进行排序。

# regex - SAP GUI 在用户界面中使用了什么样的“正则表达式”系统？

> ID：11114400
> 
> 赞同：0
> 
> 时间：2012-06-20T07:00:45.660
> 
> 标签：regex, user-interface, sap-gui, sap-r3

我正在尝试在文档中搜索其描述包含字符串 '* *hh:mm* ' 但不包含 ' **mm:ss* ' 的数据元素（其中 '* ' 是任意数量字符的通配符）。

我不知道该怎么做，所以我想知道你们中是否有人知道 SAP GUI 使用的正则表达式系统，所以我可以看看我能用它做什么。

Thx，你们统治！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:27:31.040

GUI 没有让您有机会使用正则表达式。您仅限于使用`*`and进行简单的模式匹配`?`。此外，使用描述文本进行搜索是个坏主意，因为文本和搜索是区分大小写的——您会找到“hh:mm”，而不是“HH:MM”。在您提到的特殊情况下，您可以使用存储库信息系统根据数据类型 TIMS 搜索域，但输出长度为 5，然后使用 where-used 索引查找相应的数据元素。（甚至可以根据某种数据类型搜索数据元素，我不完全确定。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T01:07:56.330

从 7.0 版开始，ABAP 支持符合 POSIX 标准 1003.2 的扩展正则表达式。

CL_ABAP_REGEX 和 CL_ABAP_MATCHER 类允许面向对象使用正则表达式。

更多细节[在这里](http://help.sap.com/abapdocu_70/en/ABENREGULAR_EXPRESSIONS.htm)

# python - “ImportError：没有名为jobs.models的模块”具有相对路径

> ID：11114404
> 
> 赞同：1
> 
> 时间：2012-06-20T07:00:54.607
> 
> 标签：python, django, django-1.4

django 1.4，python 2.6.6。
我有一个应用程序“工作”。
我的文件树：

```
djproject/
|-- djproject
|   |-- db
|   |   `-- tdata.db
|   |-- __init__.py
|   |-- __init__.pyc
|   |-- jobs
|   |   |-- admin.py
|   |   |-- admin.pyc
|   |   |-- __init__.py
|   |   |-- __init__.pyc
|   |   |-- models.py
|   |   |-- models.pyc
|   |   |-- tests.py
|   |   `-- views.py
|   |-- settings.py
|   |-- settings.pyc
|   |-- urls.py
|   |-- urls.pyc
|   |-- wsgi.py
|   `-- wsgi.pyc
`-- manage.py 
```

我的 manage.py 文件：

```
#!/usr/bin/env python

import os
import sys

if __name__ == "__main__":
    os.environ.setdefault("DJANGO_SETTINGS_MODULE", "djproject.settings")

    from django.core.management import execute_from_command_line

    execute_from_command_line(sys.argv) 
```

然后我运行“python manage.py shell”，其中与文件“manage.py”在同一级别的文件夹中。
然后我输入“from jobs.models import Job”。
错误如下（相对路径）：

```
>>> from jobs.models import Job
Traceback (most recent call last):
  File "<console>", line 1, in <module>
ImportError: No module named jobs.models 
```

但是，如果我使用完整路径

```
>>> from djproject.jobs.models import Job 
```

错误消失，为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T07:08:55.453

这是符合预期的，因为您现在`manage.py`从与以前版本的 Django 不同的目录运行。有关更多详细信息，请参阅Django 文档中的[更新的默认项目布局和 manage.py](https://docs.djangoproject.com/en/dev/releases/1.4/#updated-default-project-layout-and-manage-py)。

您现在从树中更高的目录开始，因此在导入代码时`manage.py`需要包含。`djproject`该文档还提供了有关如何以不同方式执行此操作的建议（如果您愿意）：

> 任何作为顶级模块导入的东西都可以放在新的 manage.py 附近。例如，要将“myapp”与项目模块分离并将其作为 myapp 导入，请将其放在 mysite/ 目录之外：

```
manage.py
myapp/
    __init__.py
    models.py
mysite/
    __init__.py
    settings.py
    urls.py 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:06:36.767

将*manage.py*向下移动 1 级（在 djproject/djproject/ 内）应该会有所帮助。然后，您将能够根据需要导入模块：

```
from jobs.models import Job 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-20T07:38:52.187

```
import sys
sys.path.append('/home/python/djproject/djproject') 
```

在我将它添加到setting.py之后，它就可以工作了。（正如内部服务器错误所说。）我将myapp（jobs）“mv”到与manage.py相同的文件夹中，它也可以工作。（正如Simeon Visser所说。）

# glassfish - Glassfish：如何调查角色/组问题

> ID：11114410
> 
> 赞同：0
> 
> 时间：2012-06-20T07:01:17.227
> 
> 标签：glassfish, security-roles, jdbcrealm

我在生产中有一个 Glassfish 服务器，它使用 JDBC Realm 进行身份验证。它运作良好，但需要更改所有角色/组。我在测试环境中开发了一个新版本的 Web 应用程序，更改 glassfish-web.xml 和 web.xml 以将它们与数据库上的组表中包含的组对齐以进行测试。一切都完美无缺。因此，我将 Web 应用程序移至生产环境并更新了生产数据库中组表的内容。身份验证运行良好，但无法识别角色。我该如何调查这个问题？我检查了生产数据库，组表很好，可以访问以进行选择。Glassfish-web.xml 和 web.xml 与测试环境相同。这是一个真正的脑筋急转弯。我能给出的唯一解释是 Glassfish-web。

谢谢你的帮助

菲利波

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:29:34.680

浏览 GlassFish 根文件夹 + 下的域文件夹`\domains`。如果您不确定自己在哪个域上，则`domain1`默认为该域。在此文件夹下，您应该有一个名为`applications`. 此文件夹包含所有应用程序的部署版本，它是检查应用程序`Glassfish-web.xml`配置文件的地方。

无论如何，如果您遇到此类问题，`Clean & Build`您的项目中的一个，然后是重新部署，通常可以工作。

# jmeter - 如何将一个文件从一个目录复制到 JMeter 中的另一个目录？

> ID：11114412
> 
> 赞同：0
> 
> 时间：2012-06-20T07:01:18.973
> 
> 标签：jmeter, telnet, beanshell

我正在尝试使用 Telnet 服务器将一个文件从一个目录复制到另一个目录。我们可以在 Jmeter 中做到这一点吗？我为此使用 Beanshell Sampler。请任何人指导我。

提前致谢， 安托

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:08:36.513

Anto，不，你不能用 Beanshell 采样器做到这一点。我不知道 telnet，但你可以用 SSH 做到这一点。

但是，您确实拥有 SSHSampler：

*   [http://code.google.com/p/jmeter-ssh-sampler/wiki/SshSamplerTutorial](http://code.google.com/p/jmeter-ssh-sampler/wiki/SshSamplerTutorial)
*   [http://code.google.com/p/jmeter-ssh-sampler/](http://code.google.com/p/jmeter-ssh-sampler/)

因此，在您填写连接详细信息后，`execute`底部有一个带有命令的选项卡，因此您可以在里面写`cp /path/to/dir1/file /path/to/dir2`

# java - Java：计算员工工资

> ID：11114414
> 
> 赞同：0
> 
> 时间：2012-06-20T07:01:21.197
> 
> 标签：java

关于如何显示员工的计算工资，我又遇到了一个问题。当我输入小时工资时，总工资不会显示。

这是我到目前为止所做的..

WageCalcu.java

```
 public class WageCalcu
  {
      private String employeeName;
      private int hours;
      private double rate, pay;

      public void setEmployeeName ( String name )
      {
          employeeName = name;
      }
      public String getEmployeeName()
      {
          return employeeName;
      }
      public double calculatePay( int hours, double rate )
      {
          if ( hours > 40 )
          { 
              int extraHours = hours - 40;
              pay = ( 40 * rate ) + ( extraHours * rate );
          }
          else pay = hours * rate;

          return pay;
      }
      public void displayEmployee()
      {
          System.out.printf( "Employee's name: %s", getEmployeeName() );
          System.out.printf( "\nGross Salary: ", + pay );
      }
  } 
```

Employee.java

```
 import java.util.Scanner;
  public class Employee 
  {    
      public static void main(String[] args) 
      {
          Scanner input = new Scanner( System.in);
          WageCalcu employee = new WageCalcu();

          System.out.print( "Enter Employee %s name: " );
          String name = input.nextLine();
          employee.setEmployeeName( name );

          System.out.print( "Enter how many hours worked: " );
          int hours = input.nextInt();

          System.out.print( "Enter hourly rate: " );
          double rate = input.nextInt();

          employee.calculatePay( hours, rate );
          employee.displayEmployee();

          System.out.println();

      }
  } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T07:06:42.587

我确定你的意思是：

> System.out.printf("\n总工资: %f", pay);

还有一件事

```
double rate = input.nextInt(); 
```

应该

```
double rate = input.nextDouble(); 
```

如果你真的期待一个实数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T07:08:24.337

你错过了 %s`printf( "\nGross Salary: ", + pay );`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-10T17:23:59.873

这次聚会晚了五年，但我会说我的。

您已将其设置为确定员工有多少加班时间，但您没有计算他们的加班工资。

你有什么：

```
pay = ( 40 * rate ) + ( extraHours * rate ); 
```

它应该是什么：

```
pay = ( 40 * rate ) + ( extraHours * rate * 1.5); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-29T02:00:18.613

我会说：`System.out.printf( "\nGross Salary: %.2f", pay);` 显示2位小数。

# jquery - 如何在 paper.clear() 之后重绘 raphael 对象

> ID：11114416
> 
> 赞同：0
> 
> 时间：2012-06-20T07:01:49.450
> 
> 标签：jquery, raphael

这是我的代码。我试过但找不到任何答案。所以任何人都可以帮助我

```
 move = function (dx, dy) {
                paper.clear();
                this.attr({x: this.ox + dx, y: this.oy + dy});
                    var arrow = paper.arrow(this.ox,this.oy,this.attrs.x,this.attrs.y,8);

                }
          rect2.drag(move, start); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T10:10:56.957

我不认为你需要清理（除非你有特定的理由这样做......）。Raphael 不像在 html5 画布上作画。当您想要制作动画时，您不需要清除和重绘所有内容。Raphael（和 SVG）中的每个元素本身就是一个对象。更改圆心将自动更新该圆在绘图中的位置。

只要您有对象的句柄，您就可以随意操作它，而无需请求重绘它。

# python - 字典对象列表的数字排序

> ID：11114422
> 
> 赞同：2
> 
> 时间：2012-06-20T07:02:12.997
> 
> 标签：python, sorting, numeric, alphanumeric

我对 python 编程很陌生，还没有买一本关于这件事的教科书（我今天从商店或亚马逊买了一本）。同时，您能帮我解决我遇到的以下问题吗？

我有一个这样的字典对象列表：

```
stock = [ 
  { 'date': '2012', 'amount': '1.45', 'type': 'one'},
  { 'date': '2012', 'amount': '1.4', 'type': 'two'},
  { 'date': '2011', 'amount': '1.35', 'type': 'three'},
  { 'date': '2012', 'amount': '1.35', 'type': 'four'}
] 
```

我想按金额日期列然后按金额列对列表进行排序，以便排序列表如下所示：

```
stock = [ 
  { 'date': '2011', 'amount': '1.35', 'type': 'three'},
  { 'date': '2012', 'amount': '1.35', 'type': 'four'},
  { 'date': '2012', 'amount': '1.4', 'type': 'two'},
  { 'date': '2012', 'amount': '1.45', 'type': 'one'}
] 
```

我现在认为我需要使用 sorted() 但作为初学者，我很难理解我看到的概念。

我试过这个：

```
from operator import itemgetter
all_amounts = itemgetter("amount")
stock.sort(key = all_amounts) 
```

但这导致列表按字母数字而非数字排序。

有人可以告诉我如何实现这种看似简单的排序吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T07:03:55.307

您的排序条件对于`operator.itemgetter`. 您将不得不使用 lambda 函数：

```
stock.sort(key=lambda x: (int(x['date']), float(x['amount']))) 
```

或者

```
all_amounts = lambda x: (int(x['date']), float(x['amount']))
stock.sort(key=all_amounts) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T07:09:51.773

首先将您的数据转换为适当的格式：

```
stock = [
    { 'date': int(x['date']), 'amount': float(x['amount']), 'type': x['type']}
    for x in stock
] 
```

现在`stock.sort(key=all_amounts)`将返回正确的结果。

由于您似乎是编程新手，如果可以的话，这里有一个一般性建议：

> 正确的数据结构是成功的 90%。不要试图通过编写更多代码来解决损坏的数据。创建一个适合您的任务的结构并尽可能少地编写代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T07:09:11.873

[您还可以使用 python 的排序是稳定](http://wiki.python.org/moin/HowTo/Sorting/#Sort_Stability_and_Complex_Sorts)的事实：

```
stock.sort(key=lambda x: int(x["amount"]))
stock.sort(key=lambda x: int(x["date"])) 
```

由于具有相同键的项目在排序时保持其相对位置（它们从不交换），因此您可以通过多次排序来构建复杂的排序。

# php - 如何使用 jquery 选择特定字段

> ID：11114423
> 
> 赞同：1
> 
> 时间：2012-06-20T07:02:16.240
> 
> 标签：php, jquery

我的代码是

```
<div id="fields">
<form id="question-form">  <input type="hidden" name="question-main" value="<?php echo mysql_prep($_GET['ques']);?>" /></form>

<a class="vote-up-off">up vote</a>

<span class="vote-count-post"><?php echo $row["upvotes"]+$row["downvotes"];?></span>

 <a class="vote-down-off" id="<?php echo mysql_prep($_GET['ques']);?>" >down vote</a>

 <a class="star-off" href="#">favorite</a>
</div> 
```

我的jQuery代码是

```
$("document").ready(function(){
$(".vote-up-off").click(function(){
// here i want the id of form field and votecountpost field which is up and down to this field
})
}) 
```

div 字段作为数据库中存在的字段一次又一次地重复。所以我想使用 jquery 获取特定的字段 id，并将使用 jquery 执行一些操作。如何找到这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T07:09:58.920

```
 $("document").ready(function () {
            $('.vote-up-off').live('click', function () {
                var formId = $(this).parents('form').attr('id');
                var voteCountPost = $(this).next('.vote-count-post').attr('id');
            });
        }); 
```

对于表单，您可以添加 class="VoteForm"。以便它在父母（''）中采用该形式的属性id。

```
 $("document").ready(function () {
            $('.vote-up-off').live('click', function () {
                var formId = $(this).parents('form.VoteForm').attr('id');
                var voteCountPost = $(this).next('.vote-count-post').attr('id');
            });
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T07:09:02.927

每个 div 都需要自己的`id`. 如果 div 是在 PHP 循环中创建的，您可以通过增加一个变量来做到这一点：

```
$divNumber=1;
while ( $row = mysql_fetch_array($results) )
{
    echo '<div id="fields-'.$divNumber.'">';
    // echo div content here
    echo '</div>';
    ++$divNumber;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T07:06:07.497

在这一行：

```
$(".vote-up-off).click(function(){... 
```

它应该是：

```
$(".vote-up-off").click(function(){... 
```

# c++ - 为什么这些增量会给出不同的结果？

> ID：11114427
> 
> 赞同：0
> 
> 时间：2012-06-20T07:02:49.780
> 
> 标签：c++, increment

运算符`++`应该等价于`+ 1`，那么为什么下面的例子会产生不同的结果呢？

```
#include <iostream>
#include <string>

int main()
{
    int i, n=25;
    std::string s1="a", s2="a", s1p="", s2p="";

    for (i=0;i<=n;i++)
    {
        s1p += s1;
        s1 = s1.at(0) + 1;

        s2p += s2;
        s2 = s2.at(0)++;
    }
    std::cout << "s1p = " << s1p << "\n" << "s2p = " << s2p << "\n";

    return 0;
}

Ouput:
s1p = abcdefghijklmnopqrstuvwxyz
s2p = aaaaaaaaaaaaaaaaaaaaaaaaaa 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T07:03:36.080

后增量返回变量先前保存的值。

将`x++`（**后增量**）视为

```
int y = x;
x = x+1;
return y; 
```

和`++x`( **pre-increment** ) 为

```
x = x+1;
return x; 
```

为了达到你想要的结果，你需要预先增加。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T07:27:24.853

该声明：

```
s2 = s2.at(0) ++; 
```

至少可以说是好奇。您`s2`在同一个语句中修改了两次。在内置类型上，这将是未定义的行为；在用户定义的类型（如`std::string`）上，它只是令人困惑。并且因为 ++ 的副作用必须在调用 之前发生`operator=`，所以`++`实际上是无操作；对 in 任何字符的任何修改都会 `s2`被赋值覆盖。

如果您的目标是根据字符串的第一个字符（并忽略它可能包含的任何其他字符）为字符串分配一个全新的值，那么您的修改`s1`是正确的解决方案。如果您的目标是修改字符串中的第一个字符，而保留任何其他字符不变，那么正确的解决方案是简单的 `s.at(0) ++`,`++ s.at(0)`或`s.at(0) += 1`, 没有任何赋值。（第二个是最惯用的，当结果没有被使用时。）当然，如果你想建立一个字母表中连续字符的字符串：

```
std::string s;
for ( char ch = 'a'; ch <= 'z'; ++ ch ) {
    s += ch;
} 
```

将是最惯用的（即使它在形式上是错误的，并且在某些环境中不起作用：不能保证字母表中的字母在编码中占据连续的代码点）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T07:23:19.550

++ 和 +1 不等价。要替代`n++;`您必须使用`n = n+1;`（或者`n+=1`如果您愿意）。++ 实际上增加了一个变量，而 +1 只是返回算术运算的结果。还要注意 n++ 和 ++n 有不同的行为。

```
n = 1;
i = 1;

a = ++n;
b = i++;
c = i; 
```

a、b 和 c 的输出为

```
a: 2
b: 1
c: 2 
```

# java - JAXB XMLAdapter 方法不抛出异常

> ID：11114428
> 
> 赞同：18
> 
> 时间：2012-06-20T07:02:56.227
> 
> 标签：java, jaxb, unmarshalling, xmladapter

我正在使用 JAXB XMLadapter 编组和解组布尔值。C# 应用程序也将访问应用程序的 XML 文件。我们必须验证这个 XML 文件，这是使用 XSD 完成的。C# 应用程序为布尔节点写入“True”值。但是我们的 XSD 也验证了这一点，因为它只允许“真/假”或“1/0”。因此，我们在 XSD 中为布尔值保留了 String，并且该字符串将由 XMLAdapter 验证以在我们这边编组和解组。XML 适配器如下：

```
public class BooleanAdapter extends XmlAdapter<String, Boolean> {

    @Override
    public Boolean unmarshal(String v) throws Exception {

        if(v.equalsIgnoreCase("true") || v.equals("1")) {
            return true;
        } else if(v.equalsIgnoreCase("false") || v.equals("0")) {
            return false;
        } else {
            throw new Exception("Boolean Value from XML File is Wrong.");
        }
    }

    @Override
    public String marshal(Boolean v) throws Exception {
        return v.toString();        
    }
} 
```

上面的代码在正常情况下工作，但是当从 xml 文件中读取无效数据（例如：“abcd”或“”）时，“throw new Exception();” 没有得到传播，Unmarshal 进程继续读取下一个节点。我希望应用程序在抛出异常后立即停止。看来我的例外被吃掉了。任何帮助深表感谢。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-20T07:13:18.697

从 JavaDoc 的[`XMLAdapter#unmarshal(ValueType)`](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/2.0/api/javax/xml/bind/annotation/adapters/XmlAdapter.html#unmarshal%28ValueType%29)：

> 抛出： `java.lang.Exception`- 如果在转换过程中出现错误。调用者负责**通过 ValidationEventHandler 向用户报告错误**。

所以，是的 - 异常被*吃掉*，然后使用 报告[`ValidationEventHandler`](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/2.0/api/javax/xml/bind/ValidationEventHandler.html)，而不是扔到堆栈的顶部。

检查您是否已经在使用任何（可能是自定义的）`ValidationEventHandler`将您的异常分组或使用[`DefaultValidationEventHandler`](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/2.0/api/javax/xml/bind/helpers/DefaultValidationEventHandler.html)，如下所示：

```
unmarshaller.setEventHandler(new DefaultValidationEventHandler()); 
```

它会在第一个错误时导致解组失败。

# java - LineNumberReader setLineNumber 不起作用

> ID：11114429
> 
> 赞同：1
> 
> 时间：2012-06-20T07:02:59.000
> 
> 标签：java, android

我使用 LineNumberReader 读取文本文件，当调用 setLineNumber 和 getLinenumber 时它打印 == 0 但是当再次调用 readLine ์Nit 事情发生了我该如何修复它这是我的代码

```
 BufferedWriter writer = new BufferedWriter(new FileWriter("text.txt"));
    writer.write("This is a line1\n" +
            "This is a line2\n" +
            "This is a line3");
    writer.newLine();
    writer.close();
    File myFile = new File("text.txt");
    FileReader fileReader = new FileReader(myFile);
    LineNumberReader reader = new LineNumberReader(fileReader);

    // Read from the FileReader.
    String lineRead = "";
    while ((lineRead = reader.readLine()) != null) {
        System.out.println(lineRead);
    }

    // Determine the number of lines that were read.
    System.out.println("Total lines read: " +
            reader.getLineNumber());

    // Reset the number of lines read.
    reader.setLineNumber(0);
    System.out.println("Total lines read after reset: " +
            reader.getLineNumber());

    String lineRead2 = "";
    while ((lineRead2 = reader.readLine()) != null) {
        System.out.println(lineRead2);
    }
    System.out.println("End");
    // Close the LineNumberReader and FileReader.
    fileReader.close();
    reader.close(); 
```

感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T07:07:28.917

您只是设置`LineNumberReader`的行号计数器，而不是基础流中的位置。请参阅[Java 的 LineNumberReader 类](http://docs.oracle.com/javase/6/docs/api/java/io/LineNumberReader.html)的文档。

您已经处理了您的流，因此后续调用`readLine()`返回 null。

如果您想重新读取流，您将不得不调用`fileReader.reset()`, 或`reader.reset()`，这将导致您`LineNumberReader`调用 reset 为您的`FileReader`.

# android - 错误：设置环境变量 JAVA_HOME 指向它？

> ID：11114430
> 
> 赞同：2
> 
> 时间：2012-06-20T07:03:05.470
> 
> 标签：android

我正在尝试将 android 插入我的笔记本电脑配置：vista OS、64 位和 RAM 4GB 我从 android 站点安装 Eclipse、JDK 7 和 installer_r18_windows.exe 文件。当我尝试运行 Windows 安装程序时，它会显示消息

**Error:Failed to find the java version for C:\Windows\System32\java.exe: 系统找不到指定的文件。**最后 **，如果您认为自己安装了 JDK 并且没有被正确识别，只需设置一个环境变量 JAVA_HOME 指向它**

我不知道如何设置环境变量。如何解决这个问题呢 ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-20T07:08:18.293

**步骤 1** 确保您已安装 Java 64 位版本

**Step2 复制 c:\windows\system32\java.exe 到 c:\windows\syswow64**

最后学习如何在这里设置环境变量

[http://java.com/en/download/help/path.xml](http://java.com/en/download/help/path.xml)

最后一件事

如果是安装 32bit java 版本安装路径为

> C:\Program Files (x86)\Java\jdk1.6.0_21\bin

如果你安装的是64但java版本安装路径将是

> C:\Program Files\Java\jdk1.6.0_21\bin

所以在环境变量中设置这个路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T07:07:38.077

检查以下链接，该链接解释了如何设置`environment variable JAVA_HOME`：

[http://wso2.org/project/wsas/java/1.1/docs/setting-java-home.html](http://wso2.org/project/wsas/java/1.1/docs/setting-java-home.html)

# iphone - BitmapData.draw 忽略 iphone AIR 上的矩阵

> ID：11114437
> 
> 赞同：0
> 
> 时间：2012-06-20T07:03:42.077
> 
> 标签：iphone, actionscript-3, air, bitmapdata

我已经创建了一个应用程序，我正在截图

`var bitmapData:BitmapData = new BitmapData(blah, blah) bitmapData.draw(blah, matrix);`

当我在我的电脑上运行它时它工作正常，但是当我将它导出并放在我的 iPhone 上时，bitmapData 完全错误，奇怪的是位置不正确，并且通过我的所有测试，有时大小不同。

我正在尝试做的事情非常简单易行，我只是不明白为什么它不能在 iPhone 上运行。帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:27:36.323

你如何创建你的矩阵？

试试这个：我前段时间找到了它......并且改进了一点......

```
 /** create a bitmap from a displayObject */
    public static function toBitmap(value:DisplayObject, inverse:Boolean = true):Bitmap
    {
        // help: http://darylteo.com/blog/2006/12/17/bitmapdatadraw/

        var defaultMartix:Matrix = value.transform.matrix;

        //Find occupied region
        var region:Rectangle = new Rectangle();
        region = value.getBounds(value);

        //Build Matrix Transform
        var matrix:Matrix = new Matrix(1, 0, 0, 1, -region.x, -region.y);

        value.transform.matrix = matrix;

        var bmpData:BitmapData = new BitmapData(value.width, value.height, true, undefined);
        bmpData.draw(value, matrix, null, null, null, true);

        var bmp:Bitmap = new Bitmap(bmpData, "auto", true);

        if (inverse)
        {
            //Re apply an Inverse Matrix
            matrix = new Matrix(1, 0, 0, 1, region.x, region.y);
            bmp.transform.matrix = matrix;
        }

        value.transform.matrix = defaultMartix;

        return bmp;
    } 
```

# sql - 如何在 SQL Server 中使用选择查询创建表？

> ID：11114441
> 
> 赞同：44
> 
> 时间：2012-06-20T07:03:51.157
> 
> 标签：sql, sql-server, sql-server-2008

我尝试使用 SYS 查询创建 50-100 个表

```
SELECT windows_release, windows_service_pack_level, 
       windows_sku, os_language_version
FROM sys.dm_os_windows_info OPTION (RECOMPILE);     -- DEĞİŞİRSE INSERT ETSIN AYNI ISE DEĞİŞMESİN

-- Gives you major OS version, Service Pack, Edition, and language info for the operating system

-- SQL Server Services information (SQL Server 2008 R2 SP1 or greater)
SELECT servicename, startup_type_desc, status_desc, 
last_startup_time, service_account, is_clustered, cluster_nodename
FROM sys.dm_server_services OPTION (RECOMPILE);

-- Hardware information from SQL Server 2008 
-- (Cannot distinguish between HT and multi-core)
SELECT cpu_count AS [Logical CPU Count], hyperthread_ratio AS [Hyperthread Ratio],
cpu_count/hyperthread_ratio AS [Physical CPU Count], 
physical_memory_in_bytes/1048576 AS [Physical Memory (MB)], 
sqlserver_start_time --, affinity_type_desc -- (affinity_type_desc is only in 2008 R2)
FROM sys.dm_os_sys_info OPTION (RECOMPILE); 
```

如何从 SYS 表查询结果创建表？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-06-20T07:07:21.190

```
select <column list> into <table name> from <source> where <whereclause> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-20T07:08:13.707

```
select <column list> into <dest. table> from <source table>; 
```

你可以这样做。

```
SELECT windows_release, windows_service_pack_level, 
       windows_sku, os_language_version
into   new_table_name
FROM   sys.dm_os_windows_info OPTION (RECOMPILE); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2019-02-14T22:41:15.387

使用 sub-select 的示例语句：

```
select * into MyNewTable
from
(
select 
  * 
from 
[SomeOtherTablename]
where 
  EventStartDatetime >= '01/JAN/2018' 
)
) mysourcedata
; 
```

请注意，必须为子查询指定名称.. 任何名称.. 例如，上面的示例为子查询指定了 mysourcedata 的名称。如果没有这个，SQL*server 2012 中就会出现语法错误。

数据库应回复如下消息：（9999 行受影响）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-17T14:31:40.430

或者，

您可以使用导入数据（您需要 dba 权限）

您要在其上创建表的数据库名称 -> 鼠标右键单击 -> 任务 -> 导入数据 -> 源和目标信息 -> 编写查询（第二个选项） -> 粘贴您的查询。

这将在目标上创建一个表

# facebook - 如何在 Facebook 中显示用户名

> ID：11114442
> 
> 赞同：1
> 
> 时间：2012-06-20T07:03:51.683
> 
> 标签：facebook

进行一些搜索似乎是在此处描述的 Facebook 页面中显示当前用户名的旧方法：http: [//developers.facebook.com/docs/reference/fbml/userlink/](http://developers.facebook.com/docs/reference/fbml/userlink/)

所以做类似的事情

```
<fb:userlink uid="loggedinuser" /> 
```

我想知道不使用 fb 标签的新方法是什么。即使他们没有对应用程序进行身份验证，我也想向用户展示。

# iphone - ScrollView addSubview：很慢

> ID：11114444
> 
> 赞同：0
> 
> 时间：2012-06-20T07:03:57.960
> 
> 标签：iphone, xcode, uiscrollview

我正在使用滚动视图来显示视图控制器视图。如果用户到达缓存视图的末尾，我的方法会重新加载新视图。我的 NSLogs 说该方法已完成，但显示视图需要额外的 5 秒。我认为 [scrollView addSubview:vc.view] 非常慢，但我没有发现可以改进它。

整个方法在 -(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView 中调用

```
 scrollView.userInteractionEnabled = NO;

    UIActivityIndicatorView *activityIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    [activityIndicator setFrame:CGRectMake((320.f*index)+135.f, 151, 50, 50)];
    [activityIndicator setHidesWhenStopped:YES];
    [activityIndicator startAnimating];

    [scrollView addSubview:activityIndicator];

    MBBAppDelegate *delegate = (MBBAppDelegate *)[UIApplication sharedApplication].delegate;

    [delegate fetchDealsWithFilter:dealFilter fromIndex:index toIndex:(index+3) onSuccess:^(id object){

        MBBDealList *list = object;

        int i = 0;

        ProductDetailViewController *vc;

        for (MBBDeal *deal in [list deals]) {

            NSLog(@"start %i",i);
            int indexInArray = i;//[list.deals indexOfObject:deal];

            if (indexInArray+index >= numDeals) {
                return;
            }

            vc = [[ProductDetailViewController alloc] init];

            //fetch the deal and insert
            vc.numberOfDeals = numDeals;
            vc.dealIndex = index+1+indexInArray;
            vc.dealFilter = dealFilter;
            vc.deal = deal;

            vc.view.frame = CGRectMake(320.f*(index+indexInArray), 0.f, 320.f, 436.f);

            [scrollView addSubview:vc.view];

            [productDetailViewControllers insertObject:vc atIndex:(index+indexInArray)];

            i++;
        }
        [activityIndicator stopAnimating];
        scrollView.userInteractionEnabled = YES;

    }];

} 
```

有谁知道我可以如何改进我的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:03:12.723

从您的问题中我可以理解的是，您用于显示数据获取过程的活动指示器未正确使用。即使活动指示器消失，您的数据提取过程仍在工作。

You can do 2 things for that: ether call the data fetch method in background using performSelectorInBackground method or place the activity indicator in the app delegate where you have created your data fetch method.

# javascript - JavaScript / HTML中的对比层

> ID：11114445
> 
> 赞同：0
> 
> 时间：2012-06-20T07:04:05.010
> 
> 标签：javascript, html, contrast

我的 Web 应用程序的基础是一张地图，由许多苍白的瓷砖组成。因此，使用黑白打印机打印此页的结果非常糟糕。

是否有可能放置在地图上的某个图层上，这会使其更具对比性？

（在打印模式下更换瓷砖是个坏主意，是的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:44:13.460

你有两条路线。首先是添加打印样式表，如下所示：

```
<link rel="stylesheet" href="printstyle.css" media="print" /> 
```

或者，在没有媒体声明的常规 css 文件中，

```
@media print { 
    #my-map-element {
        display: none; /* just for an example */
    }
} 
```

另一种方法是在打印事件发生时调用 javascript 函数。但是，据我所知，这仅受 Firefox 6+ 和 IE 支持：

```
window.onbeforeprint = function() { /* ... */ } 
```

如果您从 javascript 生成打印事件，则可以使用以下代码解决浏览器兼容性问题：

```
(function(){

  // make a copy of the native window.print
  var _print = this.print;

  // create a new window.print
  this.print = function () {
    // if `onbeforeprint` exists, call it.
    if (this.onbeforeprint) onbeforeprint(this); 
    // call the original `window.print`.
    _print(); 
    // if `onafterprint` exists, call it.
    if (this.onafterprint) onafterprint(this);
  }

}()) 
```

（来源：[https](https://stackoverflow.com/a/3339821/300011) ://stackoverflow.com/a/3339821/300011 ）

# android - 在多个活动上重用 Android AsnycTask 的模式？

> ID：11114447
> 
> 赞同：5
> 
> 时间：2012-06-20T07:04:38.563
> 
> 标签：android, design-patterns, android-activity, android-asynctask, reusability

我的项目中有几个 Activity 子类，每个子类都调用一个基于 SOAP 的 Web 服务，处理和显示结果。SOAP 序列化、调用处理和结果解析成各种 POJO 对象都封装在 MyWebService 类中。此类通过 AsyncTask 执行实际的 Web 服务调用。

为了能够将结果传回给调用的 Activity 子类，我认为我强制所有这些活动都应该实现一个 WebServiceResultProcessor 接口，定义一个单独的函数 (processWebServiceResults) 作为 AsyncTask 的回调，从 onPostExecute 调用。

我还想在 Web 服务调用期间显示 ProgressDialog。我的问题来了。为了能够显示 ProgressDialog（来自 MyWebService 或它的 AsyncTask），我需要将引用传递给调用者 Activity 的 Context。为了能够从 AsyncTask 执行回调函数，我*还*需要传递相同的对象引用，但这次是作为 WebServiceResultProcessor。在我看来，这似乎是一种代码气味，两次传递同一个对象，但看不到任何解决方法。我可以创建一个新的基类，而不是接口，扩展 Activity 类并强制从扩展类继承，但这意味着我将排除 ListActivity 等使用此 MyWebService 类。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T07:36:06.257

+1，一个很好的问题！

这不是您问题的直接答案。但是，让我说我认为`AsyncTask`这不是这些东西的正确选择。我是这么认为的，因为在这种情况下，它`AsyncTask`包含对`Activity`（通过`ProgressDialog`实例或要从中调用的回调`onPostExecute()`）的引用。

试想一下：在 Android 中，操作系统可能会`Activity`在`AsyncTask`执行其`doInBackground()`. 当然，这是某种极端情况，但这并非不可能。考虑一个场景：用户接到来电，您的活动变得不可见，操作系统需要更多 RAM，因此它决定终止您的活动。至少是一个内存泄漏案例。

我不知道为什么 Google 从字面上隐藏了有关如何将 UI 与后台任务正确分离的信息。是的，他们说“使用服务”。但这不是一项微不足道的工作。遗憾的是，谷歌几乎为每个开发主题都提供了很好的指南，但没有在这个主题上提供。尽管如此，我还是建议您查看“ [Google I/O 2010 - Android REST 客户端应用程序](http://www.youtube.com/watch?v=xHXn3Kg2IQE)”演示文稿以获得灵感。看起来他们给出了如何在 Android 中完成这些事情的关键。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T07:57:01.873

您可以查看这篇博客文章（[第 1](http://neilgoodman.net/2011/12/26/modern-techniques-for-implementing-rest-clients-on-android-4-0-and-below-part-1/)部分和[第 2 部分](http://neilgoodman.net/2012/01/01/modern-techniques-for-implementing-rest-clients-on-android-4-0-and-below-part-2/)），它使用 AsyncTaskLoader 实现了一个 Web 服务，并使用一个 Service 组件实现了相同的 Web 服务。此外，它显示了两种方法之间的差异，并且对文章也有有趣的评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T23:59:54.270

尽管有 Arhimed 的警告，我最终还是使用了 AsyncTask，因为它仍然符合我的目的。我只是确保所有调用 Web 服务的活动都在它们的`onDestroy()`上发送一个`cancel()`到调用的 AsyncTask。AsyncTask 实现本身通过在必要时检查 isCancelled() 来优雅地处理取消请求。

至于最初的问题，我一定是有失误——解决方案真的很简单。我将 Activity 子类实例作为对象传递给 AsyncTask，并根据需要将其转换为 Context 或 WebServiceResultProcessor。显示其工作原理的片段：

```
if (callerActivity instanceof Context) {
    ProgressDialog dialog = new ProgressDialog((Context)callerActivity);
} 
```

...

```
if (callerActivity instanceof WebServiceResultProcessor) {
    ((WebServiceResultProcessor)callerActivity).processWebServiceResults(soapObject);
} 
```

# templates - 使用 YUI 3 Loader Utility 加载 HTML 模板

> ID：11114459
> 
> 赞同：2
> 
> 时间：2012-06-20T07:05:09.893
> 
> 标签：templates, yui, requirejs, loader, yui3

ReqireJS 允许[依赖文本文件](http://requirejs.org/docs/api.html#text)，在 YUI3 加载器实用程序中有类似的方法吗？我一直在尝试使用 YUI.io 模块来做到这一点。但如果我可以扩展 YUI3 Loader 模块以满足需要，我会更喜欢。

# jquery - 使带有淡入淡出元素的 div 块消失并在设定时间后重新出现

> ID：11114464
> 
> 赞同：2
> 
> 时间：2012-06-20T07:05:40.403
> 
> 标签：jquery, show-hide

我试图让一个 div 在一段时间后消失并重新出现。

div 内部是淡入淡出的 div 元素。

我认为这会起作用：

```
setTimeout(function() {
$( "#productDiv" ).removeAttr( "style" ).show().fadeIn();
}, 1000 ); 
```

但事实并非如此，所以我很确定我做错了。我也无法弄清楚如何在设定时间后再次显示 div。

任何人都可以看看这个并给我指点吗？

[http://jsfiddle.net/linuxbastard/nGCNJ/5/](http://jsfiddle.net/linuxbastard/nGCNJ/5/)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T07:38:57.217

你可以试试这个： - 这将在每 2 秒后链接效果

```
 $(document).ready(function(){
    setInterval(function() {
        $("#productDiv").show().delay(1000).fadeOut();
    }, 2000 );
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T07:09:12.897

像这样做 ：

```
$("#productDiv").hide().delay(1000).fadeIn(); 
```

这会隐藏 div，并编程在 1000 毫秒后应用淡入效果。这是链接 jquery 效果的自然而惯用的方式。

# javascript - 使用 javascript 在 (div 格式) html 中添加行

> ID：11114469
> 
> 赞同：-4
> 
> 时间：2012-06-20T07:06:04.977
> 
> 标签：javascript, jquery, html, twitter-bootstrap

我想通过**html** div格式中的**javascript添加带有删除按钮的行。**

 **任何帮助表示赞赏！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T07:10:51.663

```
$('<div>').append(
  $('<button>').text('remove').click(function(){$(this).parent().remove()})
).appendTo($(document.body)) 
```**

# delphi - 如何为 Delphi Xe2/OExport XLSX/ODS 本机 Delphi/Lazarus 导入/导出库安装 OmniXml

> ID：11114474
> 
> 赞同：2
> 
> 时间：2012-06-20T07:06:35.127
> 
> 标签：delphi, delphi-xe2, omnixml

我知道这可能是一个简单的问题，但我在互联网上搜索并找不到答案。我正在尝试安装 OExport - XLSX/ODS 本机 Delphi/Lazarus 导入/导出库[http://www.kluug.at/xlsx-ods-delphi.php](http://www.kluug.at/xlsx-ods-delphi.php)，但为了安装它，我需要事先安装 OmniXMl。所以我也从这里下载了[http://www.kluug.at/xlsx-ods-delphi.php](http://www.kluug.at/xlsx-ods-delphi.php)。我已经提取了存档并从 dpk 文件夹中打开了 OmniXml_Dxe2 包。在 Delphi IDE 中，我知道我需要右键单击项目名称（分别为 OmniXml_Dxe2.bpl ），然后单击安装；但缺少安装选项（附图片）；然后我认为我需要运行该项目。所以我在运行项目时出现错误***“除非定义了宿主应用程序，否则无法运行项目。使用运行|参数..对话框..框”***

有人可以告诉我我在哪里做错了，我应该怎么做才能安装 OmniXml

![错误图片 1 点击放大](../Images/4d8edfab555369decabfe84832d264c8.png) ![错误图片2 点击放大](../Images/e0b67254834749b0e54c711ab25c82b0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:19:09.880

您看到的错误是因为您正在制作 DLL 或包，并且它们无法运行。它们仅在主机应用程序加载它们时运行，您可以使用“运行/参数”对话框进行设置。但我建议您真的在寻找项目的“安装”选项，以将其作为包加载到 Delphi 中。

# codeigniter - Codeigniter 分页需要解决方案 - 数字链接有效，但页面未正确显示

> ID：11114480
> 
> 赞同：1
> 
> 时间：2012-06-20T07:07:08.653
> 
> 标签：codeigniter, pagination

我在 CodeIgniter 2.x 中遇到分页问题这是我在 Controller 中的代码：

```
$config['base_url'] = base_url().'crawl/all/'.$file.'/';
$config['total_rows'] = $total;
$config['per_page'] = 10;
$config['num_links'] = 3;
$config['uri_segment'] = 4;
$config['full_tag_open'] = '<ul id="pagination">';
$config['full_tag_close'] = '</ul>';
$config['first_tag_open'] = '<li>';
$config['first_tag_close'] = '</li>';
$config['last_tag_open'] = '<li>';
$config['last_tag_close'] = '</li>';
$config['prev_tag_open'] = '<li class="prev">';
$config['prev_tag_close'] = '</li>';
$config['next_tag_open'] = '<li class="next">';
$config['next_tag_close'] = '</li>';
$config['cur_tag_open'] = '<li class="active">';
$config['cur_tag_close'] = '</li>';
$config['num_tag_open'] = '<li>';
$config['num_tag_close'] = '</li>';

$this->pagination->initialize($config);

$data['total'] = $total;
$data['path'] = $this->path.'/'.$file;
$data['file'] = $file;
$data['batch'] = $this->batch->all($file, $config['per_page'], $config['uri_segment']); 
```

我的观点是：`<?php echo $this->pagination->create_links() ?>`

页码的链接有效（它们从 1 移动到 2 等），但数据显示不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:14:27.947

您错过了页面 id，因为当您单击页面时，页面 no 必须作为查询字符串发送，并且必须为配置添加。

示例代码：

```
$limit = $this->config->item('paging_limit');
$offset = $id * $limit;

$data['rows'] = $this->news_model->get_moreNews($limit, $offset);
$config["image_url"]=$this->config->item("base_url");
$config['base_url'] = base_url().'/news/morenews/';
$config['total_rows'] = $this->db->count_all('news');
$config['per_page'] = $limit;
$config['chapter'] = $this->input->post('chapter');
$config['page'] = $id;

$this->paginationsimple->initialize($config);
$paginator=$this->paginationsimple->create_links();

$data['paginator'] = $paginator; 
```

# sql-server - 清醒的工作企业

> ID：11114483
> 
> 赞同：1
> 
> 时间：2012-06-20T07:07:19.473
> 
> 标签：sql-server, solr, lucene

我正在使用 lucid works 企业搜索服务器，我想从数据库中导入数据，但从数据库中读取数据似乎有问题。我使用 microsoft 的 jdbc4，服务器给出以下错误：

无法创建 jdbc 连接。请重新检查驱动程序、URL、用户名和密码。数据库异常：与主机 127.0.0.1/Vasael、端口 1433 的 TCP/IP 连接失败。错误：“null。验证连接属性。确保 SQL Server 实例正在主机上运行并在端口接受 TCP/IP 连接。确保与端口的 TCP 连接未被防火墙阻止。”。

有人有解决方案吗？

谢谢

# python - 检查文件是否未打开或未被其他进程使用

> ID：11114492
> 
> 赞同：69
> 
> 时间：2012-06-20T07:07:37.123
> 
> 标签：python, file

我的应用程序，我有以下要求： 1\. 有一个线程会定期在文件中记录一些日志。日志文件将在一定的时间间隔内翻转。用于保持日志文件较小。2.还有另外一个线程也会定期处理这些日志文件。例如：将日志文件移动到其他地方，解析日志内容以生成一些日志报告。

但是，有一个条件是第二个线程无法处理用于记录日志的日志文件。在代码方面，伪代码类似如下：

```
#code in second thread to process the log files
for logFile in os.listdir(logFolder):
     if not file_is_open(logFile) or file_is_use(logFile):
          ProcessLogFile(logFile) # move log file to other place, and generate log report.... 
```

那么，我如何检查文件是否已经打开或被其他进程使用？我在互联网上做了一些研究。并有一些结果：

```
try:
   myfile = open(filename, "r+") # or "a+", whatever you need
except IOError:
    print "Could not open file! Please close Excel!" 
```

我试过这段代码，但不管我使用“r+”还是“a+”标志，它都不起作用

```
try:
   os.remove(filename) # try to remove it directly
except OSError as e:
    if e.errno == errno.ENOENT: # file doesn't exist
        break 
```

这段代码可以工作，但它无法达到我的要求，因为我不想删除文件来检查它是否打开。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-06-20T08:23:44.207

试图找出文件是否正在被另一个进程使用的问题是可能出现竞争条件。你可以检查一个文件，确定它没有被使用，然后在你打开它之前，另一个进程（或线程）跳进来抓住它（甚至删除它）。

好的，假设您决定接受这种可能性并希望它不会发生。检查其他进程正在使用的文件取决于操作系统。

在 Linux 上这相当容易，只需遍历 /proc 中的 PID。这是一个生成器，它迭代用于特定 PID 的文件：

```
def iterate_fds(pid):
    dir = '/proc/'+str(pid)+'/fd'
    if not os.access(dir,os.R_OK|os.X_OK): return

    for fds in os.listdir(dir):
        for fd in fds:
            full_name = os.path.join(dir, fd)
            try:
                file = os.readlink(full_name)
                if file == '/dev/null' or \
                  re.match(r'pipe:\[\d+\]',file) or \
                  re.match(r'socket:\[\d+\]',file):
                    file = None
            except OSError as err:
                if err.errno == 2:     
                    file = None
                else:
                    raise(err)

            yield (fd,file) 
```

在 Windows 上，它不是那么简单，API 没有发布。有一个 sysinternals 工具 ( `handle.exe`) 可以使用，但我推荐 PyPi 模块`psutil`，它是可移植的（即它也可以在 Linux 上运行，并且可能在其他操作系统上运行）：

```
import psutil

for proc in psutil.process_iter():
    try:
        # this returns the list of opened files by the current process
        flist = proc.open_files()
        if flist:
            print(proc.pid,proc.name)
            for nt in flist:
                print("\t",nt.path)

    # This catches a race condition where a process ends
    # before we can examine its files    
    except psutil.NoSuchProcess as err:
        print("****",err) 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2016-05-16T14:17:04.727

我喜欢[Daniel 的回答](https://stackoverflow.com/a/24286322/2662901)，但对于**Windows 用户**，我意识到将文件重命名为它已有的名称更安全、更简单。这解决了评论中对他的回答提出的问题。这是代码：

```
import os

f = 'C:/test.xlsx'
if os.path.exists(f):
    try:
        os.rename(f, f)
        print 'Access on file "' + f +'" is available!'
    except OSError as e:
        print 'Access-error on file "' + f + '"! \n' + str(e) 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2017-06-18T13:07:19.483

您可以使用下一个函数检查文件是否具有句柄（请记住将完整路径传递给该文件）：

```
import psutil

def has_handle(fpath):
    for proc in psutil.process_iter():
        try:
            for item in proc.open_files():
                if fpath == item.path:
                    return True
        except Exception:
            pass

    return False 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-08-18T19:56:58.483

我知道我迟到了，但我也遇到了这个问题，我使用[lsof](https://www.freebsd.org/cgi/man.cgi?query=lsof)命令来解决它（我认为这是上述方法的新方法）。使用[lsof](https://www.freebsd.org/cgi/man.cgi?query=lsof)我们基本上可以检查正在使用这个特定文件的进程。这是我的做法：

```
from subprocess import check_output,Popen, PIPE
try:
   lsout=Popen(['lsof',filename],stdout=PIPE, shell=False)
   check_output(["grep",filename], stdin=lsout.stdout, shell=False)
except:
   #check_output will throw an exception here if it won't find any process using that file 
```

只需在 except 部分编写您的日志处理代码，您就可以开始了。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-20T10:50:36.643

您可以使用**[inotify](http://github.com/seb-m/pyinotify)**监视文件系统中的活动。您可以观察文件关闭事件，表明发生了翻转。您还应该在文件大小上添加附加条件。确保从第二个线程中过滤掉文件关闭事件。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-06-18T13:02:25.103

而不是使用 os.remove() 您可以在 Windows 上使用以下解决方法：

```
import os

file = "D:\\temp\\test.pdf"
if os.path.exists(file):
    try:
        os.rename(file,file+"_")
        print "Access on file \"" + str(file) +"\" is available!"
        os.rename(file+"_",file)
    except OSError as e:
        message = "Access-error on file \"" + str(file) + "\"!!! \n" + str(e)
        print message 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-03-12T11:18:46.593

[上面的答案之一的](https://stackoverflow.com/a/37256114/9536151)稍微完善的版本。

```
from pathlib import Path

def is_file_in_use(file_path):
    path = Path(file_path)

    if not path.exists():
        raise FileNotFoundError

    try:
        path.rename(path)
    except PermissionError:
        return True
    else:
        return False 
```

# dictionary - Erlang 直方图求和 2 个地图

> ID：11114495
> 
> 赞同：1
> 
> 时间：2012-06-20T07:07:46.093
> 
> 标签：dictionary, erlang, sum, histogram, superset

如何在 erlang 中创建两个字典的直方图总和？例如，如果您有 2 个字典：

```
{a: 1, c: 4, d:7} and {a:5, b:8, d:1} 
```

总和将是：

```
{a:6, b:8, c:4, d:8} 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T07:12:29.337

假设您的 dicts 被绑定到`A`和`B`变量，那么：

```
Result = dict:merge(fun (_Key, V1, V2) -> V1 + V2 end, A, B) 
```

# c# - 对象在通过/作为另一个对象的字段访问时只读

> ID：11114496
> 
> 赞同：0
> 
> 时间：2012-06-20T07:07:58.543
> 
> 标签：c#, object, properties, readonly

## 情况：

我经常遇到这个问题，不知道如何解决。虽然我不知道在哪里以及如何寻找答案。所以就在这里。当您将一些对象存储到其他对象中时，您可以将它们设置为只读，或者仅使用 getter，这是相同的。这样你就不能改变 MyInt 的值

```
public class ClassA {

    public readonly int MyInt;

    public string MyString;

} 
```

如果我想把它放在一个容器中没问题，如下所示：

```
public class ClassB {

    public readonly ClassA MyClassA;

    public string MyString;

} 
```

这仍将按预期工作。MyInt 是只读的，而 MyStringA 不是。

## 问题：

但我仍然可以获取 MyClassA 并设置 MyClassA.MyStringA。有没有办法拥有一个“更严格”的只读系统？对于上面的示例，如果 MyClassA 是，我希望 MyClassA 的字段都是只读的。

我能想到的唯一解决方案是拥有另一个类 MyClassAreadonly。但这看起来很丑陋，也不方便。

## 语境：

我寻找这种行为的原因是我希望 MyClassB.MyString 在设置 MyClassB.MyClassA.MyString 之前添加逻辑（如触发事件）。因此，另一种解决方案是通过将 ClassB.MyClassA 设置为私有来简单地不显示它。但是能够检索 MyClassA 真是太好了！但是如果我检索并修改它，我会错过 ClassB 逻辑！

PS：尽管我无法弄清楚，但我希望已经足够清楚了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T07:20:29.910

您可以将 的属性包装`ClassA`成`ClassB`这样的属性：

```
public class ClassB
{
    private readonly ClassA _myClassA = new ClassA();
    private string _myString;

    public string MyString 
    { 
        get
        {
            // your logic here
            return _myString;
        } 
        set 
        {
            // your logic here
            _myString = value;
        }
    }
    public string MyStringA { get { return _myClassA.MyString;}}
    public int MyIntA { get { return _myClassA.MyInt; }}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T07:56:03.217

## “深度”不变性

正如@Damien_The_Unbeliever 在评论中所述，[这](http://blogs.msdn.com/b/ericlippert/archive/2007/11/13/immutability-in-c-part-one-kinds-of-immutability.aspx "Eric Lippert 的博客文章")是我问题的完美“答案”。我把答案放在引号之间，因为目前 C# 中没有内置的解决方案。

解决我的问题的最接近的替代方法是为我想以这种方式使用的对象（MyClassA）设置一个*不可变外观。*

谢谢达米安。

关于该主题的另一篇文章：http: [//www.bluebytesoftware.com/blog/2007/11/11/ImmutableTypesForC.aspx](http://www.bluebytesoftware.com/blog/2007/11/11/ImmutableTypesForC.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T07:57:17.753

如何将事件添加到 ClassA 然后 ClassB 可以处理以实现附加逻辑？

```
public class ClassA
{
    public readonly int MyInt;

    private string _myString;

    public string MyString
    {
        get
        {
            return _myString;
        }
        set
        {
            _myString = value;
            if (MyStringChanged != null)
            {
                MyStringChanged(this, new EventArgs());
            }
        }
    }

    public event EventHandler MyStringChanged;
}

public class ClassB
{
    public readonly ClassA MyClassA;

    //It sounds like you wanted to use ClassB.MyString to manipulate ClassA.MyString, so you probably won't need this anymore?
    //public string MyString;

    public ClassB()
    {
        MyClassA = new ClassA();
        MyClassA.MyStringChanged += new EventHandler(MyClassA_MyStringChanged);
    }

    private void MyClassA_MyStringChanged(object sender, EventArgs e)
    {
        //Add your logic here
    }
} 
```

# ruby-on-rails - 用户指定的地址与使用omniauth 时注册为重定向URI 的地址不同

> ID：11114499
> 
> 赞同：0
> 
> 时间：2012-06-20T07:08:03.707
> 
> 标签：ruby-on-rails, omniauth

我已将“http://example.com/auth/google_oauth2/callback”注册为 Google 的回调 URI。如果用户访问地址为“example.com”的网站，这可以正常工作，但如果用户访问的是“www.example.com”，Google 会返回一个错误，指出此 URI 未注册。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:10:33.160

解决方案是在 config/initializers/omniauth.rb 中添加以下行

```
OmniAuth.config.full_host = "http://example.com" 
```

现在，无论用户如何访问网站，omniauth 都使用“http://example.com/auth/google_oauth2/callback”作为重定向 uri。

# ios - 是否可以在不越狱的情况下访问 iPhone/iPad 应用程序文件？

> ID：11114502
> 
> 赞同：0
> 
> 时间：2012-06-20T07:08:09.400
> 
> 标签：ios, xcode, resources

我的意思是不是代码内访问。例如，我已经安装了应用程序（通过 Testflight 服务）并且我想查看/修改它的资源。

我可以从 XCode 管理器下载库数据，但不能从整个应用程序下载。也许有办法下载应用程序（修改后上传回来）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T16:42:09.003

如果您正在开发应用程序，则可以查看应用程序沙箱中的文件。要在 Xcode 中执行此操作，请在设备连接时打开 Xcode 管理器，选择“设备”选项卡，打开设备名称下方的下拉按钮，选择应用程序，然后选择要检查沙盒的应用程序。然后点击下载按钮。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:52:10.800

您可以将应用程序的 .app 传输到 windows 机器。在windows机器上就能提取.app里面的内容

# c# - 将流转换为数组的问题

> ID：11114504
> 
> 赞同：0
> 
> 时间：2012-06-20T07:08:17.513
> 
> 标签：c#

```
for (myBitmap.col = 0; myBitmap.col < myBitmap.Height; myBitmap.col++)            
{
    for (myBitmap.row = 0; myBitmap.row < myBitmap.Height; myBitmap.row++)                
    {
        myBitmap.data[myBitmap.row * (int)myBitmap.ScanLineWidth + myBitmap.col + myBitmap.offset] += 5;
    }
}

MemoryStream ms = new MemoryStream(myBitmap.data);

pictureBox1.Image = Image.FromStream(ms);

//pictureBox1.Image = new Bitmap(returnimage);

MessageBox.Show("The image brightness conversion is successful"); 
```

我面临将内存流对象转换为图像的问题。错误来自无效参数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T07:18:01.023

在创建图像之前尝试重置流指针：

```
ms.Seek( 0, SeekOrigin.Begin ); 
```

# c# - 调用函数直到满足 C# 中的条件

> ID：11114507
> 
> 赞同：3
> 
> 时间：2012-06-20T07:08:28.877
> 
> 标签：c#

我得到了一个调用函数的代码，直到满足条件，但我还没有处于非常先进的阶段，所以我对我完全不清楚的代码。在这里，我将提交我得到的代码...请有人详细讨论代码的工作原理。

```
public static void RunToFirstMatch<T>(Func<T, bool> sentry, params Func<T>[] functions)
{
     functions.Any(f => match(f()));
} 
```

代码调用如下

```
RunToFirstMatch(v => (v >= 5), Step1, ()=>Step2(1,1), Step3, Step4, ()=>0+1); 
```

**RunToFirstMatch**函数有 2 个参数，但是当这个函数被调用时，许多参数正在传递....我只是不明白函数的调用。请讨论谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T07:18:44.467

这有几个部分，我可以理解为什么新手可能会觉得这段代码有点难以理解。

首先，该方法不接受 2 个参数，第二个被标记`params`，这意味着将任意数量的参数传递给该方法，除了第一个参数之外的所有参数都作为数组发送到参数`functions`（进一步阅读[C#`params`关键字](http://msdn.microsoft.com/en-us/library/w5zay9db.aspx)）。

接下来，该方法使用枚举任何可枚举（例如参数）的`IEnumerable<T>`扩展方法，直到其中一个方法返回 true。`Any``functions`

我认为您随后混淆了一些参数，我认为您已更改`sentry`为`match`，并假设发生的情况是`functions`执行数组中的每个函数，并将结果传递给`match`函数（将返回 true 或 false）。第一个返回true，方法退出。

所以举个例子，大致基于你自己的：

```
RunToFirstMatch(v => (v >= 5), // match
                  () => 1, () => 4, () => 9, () => 20, () => 40); //function(s) 
```

步骤 1、2 和 3 将执行（3 是第一个返回 false），但 4 和 5 不会。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T07:20:20.500

我认为代码中存在轻微错误，因为我认为它应该是

```
public static void RunToFirstMatch<T>(Func<T, bool> sentry, params Func<T>[] functions)
{
     functions.Any(f => sentry(f()));
} 
```

但让我们一步一步来：

sentry 是一个谓词，它根据它的输入（T 类型）决定是否为真 - 这是你给函数的第一件事 - 在你的例子中这是`v >= 5`- 所以我想它需要一个 int （从你的不清楚示例 - 例如也可以是双精度数）并检查它是否大于 5

接下来你得到一个函数的*参数数组*，每个函数都给你这样一个 T 参数数组就是为什么你可以提供多个函数的原因。

Any 是一个不错的技巧：这将通过您提供的函数（在 param 数组中），评估它们，然后与哨兵检查结果。如果哨兵说真的任何停止，那么函数就会完全按照它所说的那样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T07:16:35.090

第二个参数 ,`params Func<T>[] functions`实际上意味着“允许许多`Func<T>`s 作为后续参数传递，并将它们呈现在一个名为 的数组中” `functions`。这是由[params 关键字](http://msdn.microsoft.com/en-us/library/w5zay9db.aspx)引起的。

因此，当你打电话

```
RunToFirstMatch(v => (v >= 5), Step1, ()=>Step2(1,1), Step3, Step4, ()=>0+1) 
```

你得到

```
sentry = v => (v >= 5); /* or should this be called match? */
functions = new Func<T>[]
    {
        Step1,
        ()=>Step2(1,1),
        Step3,
        Step4,
        ()=>0+1
    }; 
```

# c# - Process.Start 创建一个弹出窗口

> ID：11114508
> 
> 赞同：0
> 
> 时间：2012-06-20T07:08:36.320
> 
> 标签：c#, process

我有一个 exe，它运行一个进程来打开 DeviceManager。但不幸的是，它要求确认提供“是”或“否”，这会长时间等待用户输入并且不会继续执行。

如何摆脱这个？我不想再次提供确认，因为我不想暂停 EXE 运行。

`StartInfo.CreateWindow = false`不会因为它只是在另一个 cmd 窗口中启动而成立。

下面的代码：

```
Process p = new Process();
p.StartInfo.FileName = "devcon.exe";
p.StartInfo.CreateNoWindow = false;
p.Start(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:30:10.140

您看到的消息框是自 Vista 以来实施的[UAC](http://en.wikipedia.org/wiki/User_Account_Control)（用户帐户控制）。

要绕过该框，您可能可以在启动该过程之前尝试以编程方式提供凭据，但我无法测试，但如下所示：

```
var processInfo = new ProcessStartInfo 
{ 
    FileName = "devcon.exe", 
    UserName = "Administrator", 
    Domain = "yourdomain or leave blank", 
    Password = adminpassword, 
    UseShellExecute = false,
}; 
Process.Start(processInfo); 
```

否则用户将必须具有管理员权限或密码！

另一个选项是禁用 UAC。但是，这不允许用户做任何他们不能正常做的事情，它可能会告诉你，如果没有以管理员身份运行的进程，你就无法进行任何更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T07:23:46.190

父进程应由管理员帐户运行。请同时显示所有代码。

# sharepoint - 如何获取 SPFolder 的关联组？

> ID：11114521
> 
> 赞同：0
> 
> 时间：2012-06-20T07:09:14.690
> 
> 标签：sharepoint, sharepoint-2010

我参与了一项从网站集中获取文件夹列表及其许可组的任务。我正在使用 SPWeb.Folders 获取文件夹列表。我没有任何线索来获取对每个 SPFolder 具有权限的组。

```
foreach(SPFolder folder in SPWeb.Folders)
{
   Console.WriteLine(folder.Name);

   // Here I need to get the associated groups of folder.
} 
```

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:29:10.030

这有帮助吗？

```
SPContext.Current.Web.GetFolder("/foldername").Item.CheckPermissions(...); 
```

# iphone - 保存和检索图像使应用程序运行缓慢

> ID：11114522
> 
> 赞同：0
> 
> 时间：2012-06-20T07:09:20.087
> 
> 标签：iphone, objective-c, ios, xcode, uiimage

`UIImagePicker`我通过这种方式保存图片：

将图片保存在文件中，然后我在 NSUserDefaults 中保存失败的路径，然后在另一个类中通过这个保存的路径检索图片。

**代码：**

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{    
    ideaImage.image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];

    [picker dismissModalViewControllerAnimated:YES];
}

-(void)saveIdea_alt
{
    [self performSelector: @selector(saveIdea)  withObject:nil afterDelay:0.1];
}
-(void)saveIdea
{
    UIImage *ideaPhoto = ideaImage.image;

    NSData *imageData = UIImagePNGRepresentation(ideaPhoto);

    NSString* imageName = @"MyImage.png";

    NSArray* paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString* documentsDirectory = [paths objectAtIndex:0];

    NSString* fullPathToFile = [documentsDirectory stringByAppendingPathComponent:imageName];

    [imageData writeToFile:fullPathToFile atomically:NO];

    NSArray *arrayKeys = [[NSArray alloc]initWithObjects:@"ideaName",@"ideaCost",@"ideaNote", @"ideaImage", nil];
    NSArray *arrayObjects = [[NSArray alloc]initWithObjects:ideaName.text,ideaCost.text,ideaNote.text,fullPathToFile ,  nil];

    NSDictionary *dictionary = [[NSDictionary alloc]initWithObjects:arrayObjects forKeys:arrayKeys];
    NSMutableArray *ideasArray = [[NSMutableArray alloc]initWithArray:[[NSUserDefaults standardUserDefaults]objectForKey:@"ideasArray"]];

    [ideasArray addObject:dictionary];

    [[NSUserDefaults standardUserDefaults]setObject:ideasArray forKey:@"ideasArray"];

    [self dismissModalViewControllerAnimated:YES];
} 
```

但是，在那之后我的应用程序变慢了，它保存和加载图像的速度很慢。我做错了什么？

我真的不想使用**核心数据**，因为我已经保存了想法的所有其他属性`NSUserDefaults`（如成本、名称、颜色等）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T07:17:15.357

在设置值后`NSUserDefaults`，只需写下这一行：

```
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:00:09.873

您是否尝试过使用

```
[self performSelectorInBackground: @selector(saveIdea)  withObject:nil]; 
```

代替

```
[self performSelector: @selector(saveIdea)  withObject:nil afterDelay:0.1]; 
```

# .net - 使用 Postsharp 和 log4net 记录到多个日志文件

> ID：11114530
> 
> 赞同：3
> 
> 时间：2012-06-20T07:10:00.080
> 
> 标签：.net, c#-4.0, log4net, autofac, postsharp

我有一个从多个服务提供商获取数据（通常是 exe 文件和文本文件）的系统，我的系统获取这些数据并对其进行一些工作（基本上分析其行为）。

我`Log4Net`用来生成日志文件，我想为每个服务提供商提供单独的日志文件。

直到现在（因为我只有一个服务提供商）我曾经`Postsharp`记录/跟踪我的系统。基本上我创建了包含以下代码的属性：

```
Public class LogAttribute : OnMethodBoundaryAspect 
{
     private static ILog = LogManager.GetLogger();

     public override void OnEntry(MethodExecutionEventArgs eventArgs)
     {
           //Log some stuff...
     }

     //some other code
} 
```

我添加了这个，或者这种属性（我对不同的日志记录策略有不同的属性），并将这个属性附加到我想要记录的不同方法/程序集。

**问题**

我可以`Postsharp`根据使用正在记录的方法的服务来解码相关的日志文件吗？（一些方法和类被不止一个服务提供商使用）。

如果它有助于我使用 Autofac 注入我的依赖项，那么也许我可以在运行时解决日志？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:59:29.670

您可以根据当前类或命名空间明确选择不同的日志文件。我无法帮助您使用 Autofac 或 log4net，但是，关于 PostSharp，我建议：

1.  使日志字段成为 [NonSerialized] 实例字段（而不是静态字段）。
2.  重写 RuntimeInitialize 方法并根据需要初始化日志字段（您将收到目标方法的 MethodInfo 作为参数）

# php - PHP mysql 显示4个结果一目标

> ID：11114531
> 
> 赞同：0
> 
> 时间：2012-06-20T07:10:08.357
> 
> 标签：php, mysql

我想在 PDF 文件中显示结果。现在的问题是 PDF 文件只能捕获 while 循环的第一行。`row[0]['rates']`第一行和`row[1]['rates']`第二行有类似的东西吗？所以我可以只取一次并`row[0]['rates']`显示`row[1]['rates']`...

**创建 PDF：**

```
<?php
session_start();

if( empty( $_POST['compare'] ) ) 
include"connect_to_mysql.php";
$packages = mysql_query("SELECT*FROM package_creation WHERE id IN (". implode(',', $_POST['compare']) ." ) LIMIT 4"); 

while($row=mysql_fetch_array($packages)){
 $compare ='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Compare Packages</title>
<style type="text/css">
.print_title{
    font-family:Arial, Helvetica, sans-serif;
    font-size:20px;
    font-weight:bold;
    color:#000; 
}
.print_text{
    font-family:Arial, Helvetica, sans-serif;
    font-size:10px;
    color:#000000;
}
.print_bold{
    font-family:Arial, Helvetica, sans-serif;
    font-size:10px;
    color:#000000;
    font-weight:bold;
}
.print_footer{
    font-family:Arial, Helvetica, sans-serif;
    font-size:9px;
    color:#000000;
}
.print_big{
    font-family:Arial, Helvetica, sans-serif;
    font-size:14px;
    color:#000000;
    font-weight:bold;
}
body{
    margin:0px;
}
table td{
    height:1px;
}
</style>
</head>

<body>
<table class="print_text" align="left">
<tr>
<td width="200px" class="print_bold" align="right">Package</td><td width="100px" class="print_bold" align="center">Package 1</td><td width="100px" class="print_bold" align="center">Package 2</td><td width="100px" class="print_bold" align="center">Package 3</td><td width="100px" class="print_bold" align="center">Package 4</td>
</tr>
<tr>
<td class="print_bold" align="right">Bank Code:</td><td width="100px" align="center">'.$row['bank_name'].'</td><td width="100px" align="center">display 2nd bank</td><td width="100px" align="center">display 3rd bank</td><td width="100px" align="center">display 4th bank</td>
</tr>
</table>
</body>
</html>';

}
include_once('dompdf/dompdf_config.inc.php');
$dompdf = new DOMPDF();
$dompdf->load_html($compare);
$dompdf->render();
$dompdf->stream('Compare_Packages.pdf');

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T07:17:16.537

问题是你的while循环。每次循环时，您都会覆盖 $compare 的值。你想要做的是像

```
 $compare = '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Compare Packages</title>
<style type="text/css">
....//you styles here
</style>
</head>

<body>
<table class="print_text" align="left">
<tr>
<td width="200px" class="print_bold" align="right">Package</td><td width="100px"  class="print_bold" align="center">Package 1</td><td width="100px" class="print_bold" align="center">Package 2</td><td width="100px" class="print_bold" align="center">Package 3</td><td width="100px" class="print_bold" align="center">Package 4</td>
</tr>';

while($row=mysql_fetch_array($packages)){

    $compare .= '<tr>
 <td class="print_bold" align="right">Bank Code:</td><td width="100px" align="center">'.$row['bank_name'].'</td><td width="100px" align="center">display 2nd bank</td><td width="100px" align="center">display 3rd bank</td><td width="100px" align="center">display 4th bank</td>
</tr>';
} //end while

$compare .= '</table>
 </body>
  </html>';

//rest of your code 
```

这样，它将循环的结果添加到 $compare 字符串的中间，而不是每次都覆盖它。查找字符串连接以获取更多详细信息[http://php.net/manual/en/language.operators.string.php](http://php.net/manual/en/language.operators.string.php)。抱歉，如果这里有任何小代码问题，因为它未经测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T07:27:43.567

您可以在表格行上循环，而不是在 while 循环中创建一个全新的文档：

首先设置您的 $compare 变量（注意`[TABLE_ROWS]`在字符串变量 $compare 中）：

```
$compare = '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Compare Packages</title>
<style type="text/css">
.print_title{
    font-family:Arial, Helvetica, sans-serif;
    font-size:20px;
    font-weight:bold;
    color:#000; 
}
.print_text{
    font-family:Arial, Helvetica, sans-serif;
    font-size:10px;
    color:#000000;
}
.print_bold{
    font-family:Arial, Helvetica, sans-serif;
    font-size:10px;
    color:#000000;
    font-weight:bold;
}
.print_footer{
    font-family:Arial, Helvetica, sans-serif;
    font-size:9px;
    color:#000000;
}
.print_big{
    font-family:Arial, Helvetica, sans-serif;
    font-size:14px;
    color:#000000;
    font-weight:bold;
}
body{
    margin:0px;
}
table td{
    height:1px;
}
</style>
</head>

<body>
<table class="print_text" align="left">
<tr>
<td width="200px" class="print_bold" align="right">Package</td><td width="100px" class="print_bold" align="center">Package 1</td><td width="100px" class="print_bold" align="center">Package 2</td><td width="100px" class="print_bold" align="center">Package 3</td><td width="100px" class="print_bold" align="center">Package 4</td>
</tr>
[TABLE_ROWS]
</table>
</body>
</html>'; 
```

然后获取所有要显示的行：

```
while($row=mysql_fetch_array($packages)){
$table_rows .= '<tr>
<td class="print_bold" align="right">Bank Code:</td><td width="100px" align="center">'.$row['bank_name'].'</td><td width="100px" align="center">display 2nd bank</td><td width="100px" align="center">display 3rd bank</td><td width="100px" align="center">display 4th bank</td>
</tr>';
}

$compare = str_replace('[TABLE_ROWS]', $table_rows, $compare); 
```

然后调用其余代码：

```
include_once('dompdf/dompdf_config.inc.php');
$dompdf = new DOMPDF();
$dompdf->load_html($compare);
$dompdf->render();
$dompdf->stream('Compare_Packages.pdf'); 
```

# css - ie7/ie8 中的多个背景图像问题

> ID：11114533
> 
> 赞同：0
> 
> 时间：2012-06-20T07:10:21.883
> 
> 标签：css, internet-explorer-8, background, internet-explorer-7, cross-browser

我正在尝试解决 ie7/ie8 中针对多个背景图像的错误...

我知道最初它不支持 ie，但我在网上搜索了一些有趣的东西，例如，[跨浏览器多背景](http://www.pziecina.com/design/turorial_demos/multi_bg_images.php)

基本上它有两个图像背景，但我想通过 css 获得 3 个图像，这些图像具有定义的图像位置和大小......小提琴代码在 ie7/ie8 中不起作用......

[http://jsfiddle.net/CsKhy/4/](http://jsfiddle.net/CsKhy/4/)

有人可以帮忙吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T07:23:27.257

使用嵌套 div 实现跨浏览器兼容的解决方案。

演示：http:
[//jsfiddle.net/CsKhy/5/](http://jsfiddle.net/CsKhy/5/)

注意：`background-size`在 IE8 或更低版本中不兼容，因此使用图像而不是背景图像可能会更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T10:48:31.453

我用

```
<style>
  .bgImage{width:100%;}
</style> 
```

在body标签之后和任何其他代码之前插入这个

```
<img src="yourimage" class="bgImage"/> 
```

不是理想的解决方案，但兼容且有效，我已经使用过很多次了。（确保您的图像是一个大图像开始，否则它会在大屏幕上失真）

# c# - 如何在我的“CustomControl's”标记中指定“Mode”和“UpdateSourceTrigger”？

> ID：11114534
> 
> 赞同：1
> 
> 时间：2012-06-20T07:10:24.033
> 
> 标签：c#, xaml, data-binding, custom-controls, devexpress

拥有一个`CustomControl`由 a`ComboBox`和 a组成的拥有`Button`。

绑定工作正常，但似乎`Set`只发生在它上面。`LostFocus`

这是我的 CustomControl 的标记：

```
<Style TargetType="{x:Type cba:CustomComboBoxEditView}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type cba:CustomComboBoxEditView}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <dxe:ComboBoxEdit x:Name="ComboBoxEdit"
                                      Height="Auto" 
                                      Width="Auto"
                                      Grid.Column="0"
                                      ImmediatePopup="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=ImmediatePopup}"
                                      AutoComplete="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=AutoComplete}"
                                      IsEnabled="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=IsEnabled}"
                                      Visibility="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Visibility}"
                                      VerticalAlignment="Stretch" 
                                      HorizontalAlignment="Stretch"
                                      ItemsSource="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=ItemsSource}"
                                      DisplayMember="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=DisplayMember}"
                                      ValueMember="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=ValueMember}"
                                      EditValue="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=EditValue}"/>

                    <dxe:ButtonEdit ShowText="False"
                                    Grid.Column="1"
                                    AllowDefaultButton="False"
                                    IsEnabled="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=IsEnabled}"
                                    Visibility="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Visibility}">
                        <dxe:ButtonInfo x:Name="PART_btnView" GlyphKind="Search" ToolTipService.ToolTip="View" />
                    </dxe:ButtonEdit>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

对于一个正常的`ComboBoxEdit`. 绑定如下所示：

`EditValue="{Binding Path=SomePath, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"`

这是我使用以下标记时的标记`CustomControl`：

```
<cba:CustomComboBoxEditView Name="someName"
                     ItemsSource="{Binding Path=SomeSource, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                     DisplayMember="DisplayMember"
                     ValueMember="ValueMember"
                     EditValue="{Binding Path=SomePath, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=False}"/> 
```

1.  如何在我的`CustomControl's`标记中指定“模式”和“UpdateSourceTrigger”？
2.  我做错了什么，只发生在`CustomControl`我`Set`身上`LostFocus`？

**编辑：**

后面的代码`CustomControl`：

```
public class CustomComboBoxEditView : Control
{
    #region Fields

    public static readonly DependencyProperty ImmediatePopupProperty;
    public static readonly DependencyProperty AutoCompleteProperty;
    public static readonly DependencyProperty ItemsSourceProperty;
    public static readonly DependencyProperty DisplayMemberProperty;
    public static readonly DependencyProperty ValueMemberProperty;
    public static readonly DependencyProperty EditValueProperty;

    public static readonly DependencyProperty SystemAppEntityViewCodeProperty;

    #endregion

    #region Constructor

    /// <summary>
    /// Default constructor.
    /// </summary>
    static CustomComboBoxEditView()
    {
        // Initialize as lookless control
        DefaultStyleKeyProperty.OverrideMetadata(typeof(CustomComboBoxEditView), new FrameworkPropertyMetadata(typeof(CustomComboBoxEditView)));

        // Initialize dependency properties
        ImmediatePopupProperty = DependencyProperty.Register("ImmediatePopup",
           typeof(bool), typeof(CustomComboBoxEditView), new UIPropertyMetadata(null));

        AutoCompleteProperty = DependencyProperty.Register("AutoComplete", typeof(bool),
           typeof(CustomComboBoxEditView), new UIPropertyMetadata(null));

        ItemsSourceProperty = DependencyProperty.Register("ItemsSource", typeof(object),
           typeof(CustomComboBoxEditView), new UIPropertyMetadata(null));

        DisplayMemberProperty = DependencyProperty.Register("DisplayMember", typeof(string),
           typeof(CustomComboBoxEditView), new UIPropertyMetadata(null));

        ValueMemberProperty = DependencyProperty.Register("ValueMember", typeof(string),
           typeof(CustomComboBoxEditView), new UIPropertyMetadata(null));

        EditValueProperty = DependencyProperty.Register("EditValue", typeof(object),
           typeof(CustomComboBoxEditView), new UIPropertyMetadata(null));

        SystemAppEntityViewCodeProperty = DependencyProperty.Register("SystemAppEntityViewCode", typeof(string),
           typeof(CustomComboBoxEditView), new UIPropertyMetadata(null));
    }

    #endregion

    #region Custom Control Properties

    public bool ImmediatePopup
    {
         get { return (bool)GetValue(ImmediatePopupProperty); }
         set { SetValue(ImmediatePopupProperty, value); }
    }

    public bool AutoComplete
    {
         get { return (bool)GetValue(AutoCompleteProperty); }
         set { SetValue(AutoCompleteProperty, value); }
    }

    public object ItemsSource
    {
        get { return (object)GetValue(ItemsSourceProperty); }
        set { SetValue(ItemsSourceProperty, value); }
    }

    public string DisplayMember
    {
        get { return (string)GetValue(DisplayMemberProperty); }
        set { SetValue(DisplayMemberProperty, value); }
    }

    public string ValueMember
    {
        get { return (string)GetValue(ValueMemberProperty); }
        set { SetValue(ValueMemberProperty, value); }
    }

    public object EditValue
    {
        get { return (object)GetValue(EditValueProperty); }
        set { SetValue(EditValueProperty, value); }
    }

    public string SystemAppEntityViewCode
    {
        get { return (string)GetValue(SystemAppEntityViewCodeProperty); }
        set { SetValue(SystemAppEntityViewCodeProperty, value); }
    }

    #endregion
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:14:24.673

找到了解决方法：

注册`PopupClosed Event`然后设置`Property`。

```
public override void OnApplyTemplate()
    {
        base.OnApplyTemplate();

        var btnComboBoxEdit = Template.FindName("ComboBoxEdit", this) as ComboBoxEdit;
        btnComboBoxEdit.PopupClosed +=new ClosePopupEventHandler(btnComboBoxEdit_PopupClosed);
    }

private void btnComboBoxEdit_PopupClosed(object sender, ClosePopupEventArgs e)
    {
        EditValue = e.EditValue;
    } 
```

# asp.net - 添加 auth cookie 后 User.Identity.IsAuthenticated 为 false

> ID：11114536
> 
> 赞同：1
> 
> 时间：2012-06-20T07:10:31.897
> 
> 标签：asp.net

我有以下代码将身份验证cookie添加到响应并重定向到主页

```
HttpCookie authCookie = FormsAuthentication.GetAuthCookie(username, true);
Response.Cookies.Add(authCookie);
Response.Redirect("~/Home/Home.aspx"); 
```

但是在Home.aspx中，`User.Identity.IsAuthenticated`仍然是假的。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T06:52:57.577

终于让它工作了。简而言之，这是

```
FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(1,
        username,
        DateTime.Now,
        DateTime.Now.AddMinutes(30),
        isPersistent,
        userData,
        FormsAuthentication.FormsCookiePath);

      // Encrypt the ticket.
      string encTicket = FormsAuthentication.Encrypt(ticket);

      // Create the cookie.
      Response.Cookies.Add(new HttpCookie(FormsAuthentication.FormsCookieName, encTicket)); 
```

我遵循了[此](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthenticationticket.aspx)MSDN 页面中的代码示例：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T07:59:38.887

您不必自己将 cookie 添加到响应中。

你正在这样做：

```
HttpCookie authCookie = FormsAuthentication.GetAuthCookie(username, true);
Response.Cookies.Add(authCookie);
Response.Redirect("~/Home/Home.aspx"); 
```

但是，您可以使用以下命令，而不是执行 a`GetAuthCookie`然后添加它`SetAuthCookie`：

```
HttpCookie authCookie = FormsAuthentication.SetAuthCookie(username, true);
Response.Redirect("~/Home/Home.aspx"); 
```

当您查看[SetAuthCookie 的 MSDN 页面时](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.setauthcookie.aspx)，您会看到它不仅将 cookie 添加到响应（或 URL），而且还创建和加密票证：

> 为提供的用户名创建一个身份验证票证，并将其添加到响应的 cookie 集合中，如果您使用的是无 cookie 身份验证，则将其添加到 URL。

这可能就是为什么当您尝试自己添加 cookie 时它不起作用的原因。

# html - 无法为视频元素绑定错误事件

> ID：11114541
> 
> 赞同：1
> 
> 时间：2012-06-20T07:11:03.987
> 
> 标签：html, html5-video, jquery

我有一个视频标签，下面是 html

```
<video  id="videoId" controls="controls">
<source src="../video/trailer.mp4" type="video/mp4" />
</video> 
```

我想在这个视频元素上添加 onError 事件。我已经编写了触发但它不起作用的代码我该如何绑定它。可能是我错过了什么

```
window.onerror=function(){
            var myvid = document.getElementById('videoId');
            if (myvid.error) {
             switch (myvid.error.code) {
               case myvid.error.MEDIA_ERR_ABORTED:
                  alert("You stopped the video.");
                  break;
               case myvid.error.MEDIA_ERR_NETWORK:
                  alert("Network error - please try again later.");
                  break;
               case myvid.error.MEDIA_ERR_DECODE:
                  alert("Video is broken..");
                  break;
               case myvid.error.MEDIA_ERR_SRC_NOT_SUPPORTED:
                  alert("Sorry, your browser can't play this video.");
                  break;
             }
            }
        } 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:08:35.793

well, i m not sure if you can get the error over the window element... but if you look in the html5 specififation here: [http://www.w3.org/TR/2010/WD-html5-20100624/video.html#video](http://www.w3.org/TR/2010/WD-html5-20100624/video.html#video) , you ll find following script block:

```
<script>
function failed(e) {
   // video playback failed - show a message saying why
   switch (e.target.error.code) {
 case e.target.error.MEDIA_ERR_ABORTED:
   alert('You aborted the video playback.');
   break;
 case e.target.error.MEDIA_ERR_NETWORK:
   alert('A network error caused the video download to fail part-way.');
   break;
 case e.target.error.MEDIA_ERR_DECODE:
   alert('The video playback was aborted due to a corruption problem or because the video used features your browser did not support.');
   break;
 case e.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:
   alert('The video could not be loaded, either because the server or network failed or because the format is not supported.');
   break;
 default:
   alert('An unknown error occurred.');
   break;
 }
}
</script>
<p><video src="tgif.vid" autoplay controls onerror="failed(event)"></video></p>
<p><a href="tgif.vid">Download the video file</a>.</p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:24:06.740

重要的是，加载错误不是发生在视频标签上，而是发生在视频标签内的源标签上，并且事件必须附加到源标签的 src 属性，然后您可以使用 parentNode.id 来处理正确的视频标签并做一些事情错误发生的时间以及发生的确切位置。

我使用一系列带编号的视频标签和带有 Popcorn.js 对象的数组来处理页面上的视频。

这里有我的解决方案：

```
 $("source").error(function () {
    var tagStr = this.parentNode.id;
    var pop = videos[tagStr.charAt(str.length-1)];
    if (pop.media.networkState == pop.media.NETWORK_NO_SOURCE) {
      doSomething;
    }
  }).attr("src"); 
```

# jquery - 在悬停时显示/隐藏 div 并悬停

> ID：11114543
> 
> 赞同：30
> 
> 时间：2012-06-20T07:11:21.923
> 
> 标签：jquery, html, css, hover

我想在悬停和悬停期间显示和隐藏一个 div。

这是我最近所做的。

css

```
$("#menu").hover(function() {
  $('.flyout').removeClass('hidden');
}, function() {
  $('.flyout').addClass('hidden');
});
```

```
.flyout {
  position: absolute;
  width: 1000px;
  height: 450px;
  background: red;
  overflow: hidden;
  z-index: 10000;
}

.hidden {
  visibility: hidden;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script>
<div id="menu" class="margint10 round-border">
  <a href="#"><img src="images/menu.jpg" alt="" id="menu_link" /></a>
</div>
<div class="flyout hidden">&nbsp;</div>
```

我的问题是，当我将鼠标悬停在菜单 id 上时，弹出 div 正在闪烁。这是为什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-20T07:15:06.603

为什么不直接使用`.show()/.hide()`呢？

```
$("#menu").hover(function(){
    $('.flyout').show();
},function(){
    $('.flyout').hide();
}); 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-06-20T07:14:58.307

可能不需要JS。您也可以使用 css 来实现这一点。像这样写：

```
.flyout {
    position: absolute;
    width: 1000px;
    height: 450px;
    background: red;
    overflow: hidden;
    z-index: 10000;
    display: none;
}
#menu:hover + .flyout {
    display: block;
} 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-06-20T07:25:31.733

这是执行此操作的不同方法。而且我发现您的代码甚至可以正常工作。

你的代码：http: [//jsfiddle.net/NKC2j/](http://jsfiddle.net/NKC2j/)

Jquery 切换类演示：http: [//jsfiddle.net/NKC2j/2/](http://jsfiddle.net/NKC2j/2/)

Jquery 淡入淡出切换：http: [//jsfiddle.net/NKC2j/3/](http://jsfiddle.net/NKC2j/3/)

Jquery 幻灯片切换：http: [//jsfiddle.net/NKC2j/4/](http://jsfiddle.net/NKC2j/4/)

你可以用**Sandeep回答的 CSS 来做到这一点**

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-11-30T00:12:25.733

我发现使用 css opacity 更适合简单的显示/隐藏悬停，您可以添加[css3](http://css3generator.com/)过渡来制作漂亮的悬停效果。过渡只会被较旧的 IE 浏览器丢弃，因此它会优雅地降级为。

### [JS小提琴演示](http://jsfiddle.net/unknown601/bk64sLa6/1/)

## CSS

```
#stuff {
    opacity: 0.0;
    -webkit-transition: all 500ms ease-in-out;
    -moz-transition: all 500ms ease-in-out;
    -ms-transition: all 500ms ease-in-out;
    -o-transition: all 500ms ease-in-out;
    transition: all 500ms ease-in-out;
}
#hover {
    width:80px;
    height:20px;
    background-color:green;
    margin-bottom:15px;
}
#hover:hover + #stuff {
    opacity: 1.0;
} 
```

## HTML

```
<div id="hover">Hover</div>
<div id="stuff">stuff</div> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-20T07:36:45.270

```
<script type="text/javascript">
    var IdAry=['reports1'];
    window.onload=function() {
     for (var zxc0=0;zxc0<IdAry.length;zxc0++){
      var el=document.getElementById(IdAry[zxc0]);
      if (el){
       el.onmouseover=function() {
         changeText(this,'hide','show')
        }
       el.onmouseout=function() {
         changeText(this,'show','hide');
        }
      }
     }
    }
    function changeText(obj,cl1,cl2) {
       obj.getElementsByTagName('SPAN')[0].className=cl1;
       obj.getElementsByTagName('SPAN')[1].className=cl2;
    }
</script> 
```

你的 html 应该是这样的

```
<p id="reports1">
                <span id="span1">Test Content</span>
                <span class="hide">

                    <br /> <br /> This is the content that appears when u hover on the it
                </span>
            </p> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-19T19:19:55.293

您可以使用 jQuery 显示 div，并将其设置在鼠标所在的任何位置：

html:

```
<!DOCTYPE html>
<html>

  <head>
    <link href="style.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  </head>

  <body>
    <div id="trigger">
      <h1>Hover me!</h1>
      <p>Ill show you wonderful things</p>
    </div>
    <div id="secret">
     shhhh
    </div>
    <script src="script.js"></script>
  </body>

</html> 
```

款式：

```
#trigger {
  border: 1px solid black;
}
#secret {
  display:none;
  top:0;  
  position:absolute;
  background: grey;
  color:white;
  width: 50%;
} 
```

js：

```
$("#trigger").hover(function(e){
    $("#secret").show().css('top', e.pageY + "px").css('left', e.pageX + "px");
  },function(e){
    $("#secret").hide()
}) 
```

您可以在此处找到示例干杯！ [http://plnkr.co/edit/LAhs8X9F8N3ft7qFvjzy?p=preview](http://plnkr.co/edit/LAhs8X9F8N3ft7qFvjzy?p=preview)

# java - jsp显示后在jsp中显示java列表数据

> ID：11114544
> 
> 赞同：1
> 
> 时间：2012-06-20T07:11:25.987
> 
> 标签：java, ajax, jsp, jakarta-ee, servlets

我是 Java EE 编程的新手。按照我对jsp的理解。如果我错了 ，请纠正我
- JSP 页面首先转换为 servlet，然后转换为 html，结果 html 页面显示在浏览器中。

现在假设jsp页面显示在浏览器中，即现在它是html页面，我有一个java列表，其中包含我想在当前加载的页面上打印的名称或某种数据。我可以使用 ajax 获取 List 对象，但是我将如何在 html 上显示它，因为 html 无法呈现 java 集合。

纠正我误解流程或基本概念的地方。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T07:18:09.900

您可以使用 ajax（使用 jQuery 很容易）来调用您的 Servlet

```
function callMe(){
    $.ajax({
      type: "POST",
      url: "/someServlet",
      data: { param1: "val1" , param2: "val2" }
    }).done(function( data) {
       //TODO
    });
} 
```

现在在 Servlet 中`doPost()`，使用 Gson 为您的集合生成 JSON 表示

```
String parameter1 = request.getParameter(param1);
String parameter2 = request.getParameter(param2);
//call to service to generate the collection
//for example List<Employee>
List<Employee> employees  = someService(parameter1, parameter2);
//using google's gson
Gson gson = new Gson();
String json = new Gson().toJson(employees);
response.setContentType("application/json");
response.setCharacterEncoding("UTF-8");
response.getWriter().write(json); 
```

现在我们在 javascript 函数中有一个 javascript 对象数组的响应，所以将其修改为

```
 }).done(function( data) {
        //some processing for display
        var len = data.length
        for (var i=0; i<len; ++i) {
               var employeeFirstName =  data[i].firstName;
               var employeeLastName =  data[i].lastName;
               //set it to some DIV, or do the processing you want
        }
      }

    }); 
```

* * *

**另见**

*   [如何通过单击html页面中的菜单从jsp调用java方法？](https://stackoverflow.com/questions/10983961/how-to-call-a-java-method-from-jsp-by-clicking-a-menu-in-html-page)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T07:17:13.313

您需要将列表的内容作为文本发送到用户的浏览器（通常会发生这种情况）。

[JSON](http://www.json.org/)是一种在浏览器和服务器之间传输列表内容的便捷格式，因为它使用 JavaScript 具有简单的可读性并且易于在服务器上生成。

然后，您可以使用 JavaScript 以您喜欢的任何方式显示返回的文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T07:25:29.720

一个 JSP 被编译成一个 java servlet 类，它可以处理 HTTP 请求。当 servlet 部署到应用程序服务器时，HTTP 请求被传递给 servlet 进行处理：生成 HTTP 响应，通常包含一些 HTML、状态代码等。

因此，servlet 中的 java 代码循环遍历您的列表并可能生成适当的 HTML 以在浏览器中呈现该列表。

它是否是 AJAX 请求并不重要。AJAX 请求可能会由不同的 servlet 处理，而不是呈现完整的 HTML 页面，它只生成部分页面 - 可能只是`<ul><li>...</li></ul>`呈现您的列表。然后，您 HTML 页面中的 javascript 可以通过替换旧版本的列表来更新用户界面。

# c - 在 C 中以更高的精度存储数字

> ID：11114548
> 
> 赞同：4
> 
> 时间：2012-06-20T07:11:54.917
> 
> 标签：c, precision, double-precision, math.h

我正在编写一个程序，我需要以非常高的精度（大约`10^-10`）存储数字，然后进一步使用它们作为参数（`create_bloomfilter ([yet to decide the type] falsePositivity, long expected_num_of_elem)`）。
我能得到的最高精度是`double`（周围的东西`10^-6`），这还不够。

我们如何在 c 中以更高的精度存储数字？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T07:25:56.413

你被误导了`double`。

您可以存储在 a 中的最小正数`double`约为 2⨯10 ^(-308)，不包括非规格化数，它可以更小。非正规下降到 5⨯10 ^(-324)。它们具有大约 15-17 位数的精度，足以将地球的直径测量到红细胞大小，这是人体中最小的细胞。

如果你真的需要更高的精度，你需要 MPFR。（如果您的算法在数值上不稳定，MPFR 可能无济于事。）

**编辑：**我知道你做错了什么。

在 C 中，`10^-7`是一个整数表达式。在大多数系统上它应该等于 -13。该`^`运算符是按位 XOR 运算符，**而不是**幂运算符。C 中没有求幂运算符，因为 C 运算符通常对应于更原始的操作，至少在硬件实现方面是这样。

你想要`1e-7`，或`pow(10, -7)`。

```
#include <stdio.h>
#include <math.h>
int main(int argc, char *argv[])
{
    printf("2e-308 = %g\n", 2e-308);
    printf("2 * pow(10, -308) = %g\n", 2 * pow(10, -308));
    printf("10^-7 = %d\n", 10^-7);
    return 0;
} 
```

输出：

```
2e-308 = 2e-308
2 * pow(10, -308) = 2e-308
10^-7 = -13

```

请注意，浮点数有很多陷阱。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T07:16:27.930

试试[GNU MPFR 库](http://www.mpfr.org/)和[GNU GMP 库](http://gmplib.org/)

MPFR 库是一个用于具有正确舍入的多精度浮点计算的 C 库。

GMP 是用于任意精度算术的免费库，可对有符号整数、有理数和浮点数进行操作。除了运行 GMP 的机器中的可用内存所暗示的精度外，对精度没有实际限制。GMP具有丰富的功能集，并且功能具有规则的接口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T07:15:18.537

长双足吗？一些实现使用 128 位长双精度，应该可以轻松满足您的要求。

[http://en.wikipedia.org/wiki/Quadruple_precision](http://en.wikipedia.org/wiki/Quadruple_precision)

如果您正在寻找非常强大的东西，请查看 MPFR

# jquery - 单击链接时滑动面板未关闭

> ID：11114549
> 
> 赞同：0
> 
> 时间：2012-06-20T07:12:01.593
> 
> 标签：jquery, ajax

我有一个带有 jquery 的滑动面板登录框，它工作正常只有关闭链接在这里不起作用是 javascript 代码。

```
 <script type="text/javascript">
$(document).ready(function(){
    $("#login-link").click(function(){
        $("#login-panel").slideToggle(200);
    })
})
$(document).keydown(function(e) {
    if (e.keyCode == 27) {
        $("#login-panel").hide(0);
    }

});

$("#login-close").click(function() {
$("#login-panel").hide(0);
return false;
});

</script> 
```

这是HTML

```
<a id="login-link" href="#" title="Login">Login</a>   
<div id="login-panel">
<div style="padding-left:10px;width:190px; height:163px; background-color:#2a2a2a; text-align:left; vertical-align:text-top;">
<form id="login" action="<?php echo osc_base_url(true) ; ?>" method="post">
<table border="0" style="font: normal 10pt Tahoma; color:#fff;">
  <tr>
    <td height="20" valign="top">Email <br>
    <input id="email" type="text" value="" name="email"></td>
  </tr>
  <tr>
    <td height="20" valign="top">Password<br>
    <input id="password" type="password" value="" name="password">
  </tr>
   <tr>
  <td><input type="submit" name="submit" value="Sign In" /></td>
  </tr>
  <tr>
    <td height="25" valign="top">
     <small><a href="#login-close">press ESC or close</a></small></td>
  </tr>
</table>
</form>
</div> 
```

它工作得很好，当我按下**ESC时也会关闭登录框。**但它没有在链接点击时关闭，它只在 url 中添加**#login-close**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T07:17:23.807

您没有任何 id 为 login-close 的元素。尝试将您的关闭锚更改为：

```
<a href="#login-close" id="login-close">press ESC or close</a> 
```

此外，请确保您的*所有*代码都在文档就绪函数中。

```
$(document).ready(function(){
    $("#login-link").click(function(){
        $("#login-panel").slideToggle(200);
    });

    $(document).keydown(function(e) {
        if (e.keyCode == 27) {
            $("#login-panel").hide(0);
        }
    });

    $("#login-close").click(function() {
        $("#login-panel").hide(0);
        return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T07:16:27.413

这行得通吗？

```
$("#login-close").click(function(e) { // added e to function arguments
    e.preventDefault(); // added method here
    $("#login-panel").hide(0);
    // remove return false here.
}); 
```

还要在链接中添加一个 id：

```
<a id="login-close" href="#login-close">press ESC or close</a> 
```

您的 JS（并非所有内容都在 ready 函数中）和 HTML（未关闭的标签）中有错误 - [http://jsfiddle.net/dtctu/](http://jsfiddle.net/dtctu/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T07:17:26.733

你没有给你的链接一个ID，所以`$("#login-close")`找不到它。

添加`id="login-close"`到您的链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T07:18:52.500

**工作演示** [http://jsfiddle.net/WhSTh/5/](http://jsfiddle.net/WhSTh/5/)

`id`登录关闭丢失：我还添加`<td>`了丢失的内容

`<td height="25" valign="top"> <small><a href="#login-close" id="login-close"> press ESC or close</a></small></td>`

希望这会有所帮助，干杯！

**代码**

```
$(document).ready(function() {
    $("#login-link").click(function() {
        $("#login-panel").slideToggle(200);
    })
})
$(document).keydown(function(e) {
    if (e.keyCode == 27) {
        $("#login-panel").hide(0);
    }

});

$("#login-close").click(function() {
    $("#login-panel").hide(0);
    return false;
});​ 
```

# algorithm - 如何更好地解决动态规划问题

> ID：11114550
> 
> 赞同：21
> 
> 时间：2012-06-20T07:12:05.447
> 
> 标签：algorithm, dynamic-programming

我最近遇到了这个问题：“给你一个布尔表达式，由一串符号'true'、'false'、'and'、'or'和'xor'组成。计算括号括起来的方法的数量表达式，使其计算结果为真。例如，有两种方法可以将“真假异或真”括起来，使其计算结果为真。”

我知道这是一个动态编程问题，所以我尝试自己想出一个解决方案，如下所示。假设我们有一个表达式为 ABC....D where '.' 表示任何操作，或，xor 和大写字母表示真或假。假设这个大小为 K 的表达式产生真值的方法数是 N。当一个新的布尔值 E 被添加到这个表达式时，有 2 种方法可以给这个新表达式 1 加上括号。 ((ABC....D) .E) 即。在所有可能的 ABC....D 括号中，我们在末尾添加 E。2\. (ABC(DE)) 即。首先计算 DE，然后找出这个大小为 K 的表达式可以产生真值的方法的数量。

假设 T[K] 是大小为 K 的表达式产生 true 的方式数，那么 T[k]=val1+val2+val3 其中 val1,val2,val3 的计算如下。

1）当 E 与 D 分组时。

i) 它不会改变 D 的值

ii) 它反转了 D 的值

在第一种情况下 val1=T[K]=N.（因为这简化为初始 ABC...D 表达式）。在第二种情况下，重新评估 dp[K]，将 D 的值反转，即 val1。

2）当 E 与整个表达式分组时。

//val2 包含 E 将产生的“真”的数量，在所有带括号的 ABC 实例中给出“真”的表达式......D i) if true.E = true then val2 = N

ii) 如果 true.E = false 那么 val2 = 0

//val3 包含 'true' E 将在所有带括号的 ABC 实例中使用给出 'false' 的表达式生成的数量......D

iii) 如果 false.E=true 则 val3=( 2^(K-2) - N ) = M 即。大小为 K 的表达式产生错误的方式数 [ 2^(K-2) 是括号大小为 K 的表达式的方式数]。

iv) 如果 false.E=false 则 val3 = 0

这是我想到的基本想法，但是当我检查其解决方案[http://people.csail.mit.edu/bdean/6.046/dp/dp_9.swf](http://people.csail.mit.edu/bdean/6.046/dp/dp_9.swf)时，方法完全不同。有人能告诉我我做错了什么吗？我怎样才能更好地解决 DP，以便我能想出像上面自己给出的解决方案。

提前致谢。

# facebook - Facebook Linter 返回“解析 URL 时出错：解析输入 URL 时出错，没有数据被抓取。”

> ID：11114562
> 
> 赞同：1
> 
> 时间：2012-06-20T07:13:18.367
> 
> 标签：facebook, debugging, facebook-graph-api, scrape

facebook 返回“解析 URL 时出错：解析输入 URL 时出错，没有数据被抓取。” 当我使用 Facebook Linter 时。我已经尝试删除元标记，然后将它们放回原处。我无法让它工作，请帮忙。

[http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fstaging.eyp.ph%2Fmoms](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fstaging.eyp.ph%2Fmoms)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T05:17:15.310

事实证明，我有一个缓慢的 SQL 查询，导致加载时第一个字节很慢。这导致facebook超时。谢谢你，利克斯。

# python - 减少绘制图表的numpy数组

> ID：11114566
> 
> 赞同：3
> 
> 时间：2012-06-20T07:13:48.943
> 
> 标签：python, numpy, scipy

我想在我的 python 应用程序中绘制图表，但源 numpy 数组太大而无法执行此操作（大约 1'000'000+）。我想取相邻元素的平均值。第一个想法是用 C++ 风格来做：

```
step = 19000 # every 19 seconds (for example) make new point with neam value
dt = <ordered array with time stamps>
value = <some random data that we want to draw>

index = dt - dt % step
cur = 0
res = []

while cur < len(index):
    next = cur
    while next < len(index) and index[next] == index[cur]:
        next += 1
    res.append(np.mean(value[cur:next]))
    cur = next 
```

但这个解决方案工作得很慢。我试着这样[做](https://stackoverflow.com/questions/4676029/numpy-array-mapping-and-take-average)：

```
step = 19000 # every 19 seconds (for example) make new point with neam value
dt = <ordered array with time stamps>
value = <some random data that we want to draw>

index = dt - dt % step
data = np.arange(index[0], index[-1] + 1, step)
res = [value[index == i].mean() for i in data]
pass 
```

此解决方案比第一个解决方案慢。这个问题的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T10:27:33.003

`np.histogram`可以提供任意箱的总和。如果您有时间序列，例如：

```
import numpy as np

data = np.random.rand(1000)          # Random numbers between 0 and 1
t = np.cumsum(np.random.rand(1000))  # Random time series, from about 1 to 500 
```

然后您可以使用以下方法计算 5 秒间隔内的合并总和`np.histogram`：

```
t_bins = np.arange(0., 500., 5.)       # Or whatever range you want
sums = np.histogram(t, t_bins, weights=data)[0] 
```

如果您想要平均值而不是总和，请删除权重并使用 bin 计数：

```
means = sums / np.histogram(t, t_bins)][0] 
```

此方法类似于[此答案](https://stackoverflow.com/a/6163403/317172)中的方法。

# objective-c - NSMutableArray 排序 - 不区分大小写

> ID：11114567
> 
> 赞同：24
> 
> 时间：2012-06-20T07:13:57.207
> 
> 标签：objective-c, cocoa, nssortdescriptor

我排序`NSMutableArray`如下：

```
 NSSortDescriptor *sortDescriptor;
    sortDescriptor = [[[NSSortDescriptor alloc] initWithKey:str_key ascending:bool_asc_desc] autorelease];
    NSArray *sortDescriptors = [NSArray arrayWithObject:sortDescriptor];
    NSArray *sortedArray;
    sortedArray = [ads_printers_array sortedArrayUsingDescriptors:sortDescriptors]; 
```

问题是这是区分大小写的，我想让它不区分大小写。我怎样才能做到这一点？我尝试阅读文档并发现如下内容：

```
sortDescriptor = [[[NSSortDescriptor alloc] initWithKey:str_key ascending:bool_asc_desc selector: @selector(caseInsensitiveCompare)] autorelease]; 
```

但是，我不知道应该在选择器参数中添加什么。谢谢！

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-22T13:23:14.543

```
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:str_key 
    ascending:YES selector:@selector(caseInsensitiveCompare:)];

ads_printers_array = [ads_printers_array sortedArrayUsingDescriptors:[NSArray 
    arrayWithObject:sortDescriptor]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-03T22:25:35.057

对于 Swift，请执行以下操作：

`let sortDescriptor = NSSortDescriptor(key: sortDescriptorKey, ascending: true, selector: #selector(NSString.caseInsensitiveCompare(_:)))`

# hibernate - 检索涉及多个连接的数据的标准

> ID：11114568
> 
> 赞同：0
> 
> 时间：2012-06-20T07:14:02.033
> 
> 标签：hibernate, criteria, one-to-many, many-to-one

我有四个表，其中包含彼此相关的示例数据，如下所示

**员工**

```
EMP_ID|EMP_NAME
---------------
101   |John 
```

**EmployeeDtl**

```
EMP_DTL_ID  |EMP_SKILLS |EMP_ID
-----------------------------------
1001        |Java       |101
1002        |SQL        |101 
```

**EmpDeptDtl**

```
EMP_DTL_ID  |DEPT_ID
--------------------
1001        |22
1002        |33 
```

**部门**

```
DEPT_ID |DEPT_NAME
----------------------
22      |XYZ
33      |PQR 
```

下面是我对应的pojos

```
@Entity
public class Employee {
   private static final long serialVersionUID = 1L;

   @Id
   @Column(name="EMP_ID")
   private Long empId;

   @Column(name="EMP_NAME")
   private String empName;

   //bi-directional many-to-one association to EmployeeDtl 
   @OneToMany(mappedBy="employee", cascade=CascadeType.ALL, fetch=FetchType.EAGER)
   private Set<EmployeeDtl> empDtls;

@Entity
@Table(name="EMP_DTL")
public class EmployeeDtl {

   @Id
   @Column(name="EMP_DTL_ID")
   private Long empDtlId;

   @Column(name="EMP_GRP")
   private String employeeGrp;

   //bi-directional many-to-one association to Employee 
    @ManyToOne
   @JoinColumn(name="EMP_ID")
   private Employee employee;

    @Column(name="EMP_ID", insertable=false, updatable=false)
   private Long empId;

   //bi-directional many-to-one association to EmpDeptDtl
   @OneToMany(mappedBy="id.empDtlId", cascade= CascadeType.ALL)
   private Set<EmpDeptDtl> empDeptDtls;

@Entity
public class EmpDeptDtl {

   @EmbeddedId
   private EmpDeptDtlPK id;

   @Column(name="EMP_DTL_ID", insertable = false, updatable = false)
   private Long empDtlId;

   //bi-directional many-to-one association to Dept
    @ManyToOne(fetch=FetchType.LAZY)
   @JoinColumn(name="DEPT_ID", insertable = false, updatable = false)
   private Dept deptId;

@Embeddable
public class EmpDeptDtlPK implements Serializable {
   //default serial version id, required for serializable classes.
   private static final long serialVersionUID = 1L;

   @Column(name="DEPT_ID")
   private Long deptId;

   //bi-directional many-to-one association to EmpDeptDtl
    @ManyToOne(fetch=FetchType.LAZY)
   @JoinColumn(name="EMP_DTL_ID")
   private EmployeeDtl employeeDtl;

@Entity
public class Dept  {

   @Id
   @Column(name = "DEPT_ID")
   private Long deptId;

   @Column(name = "DEPT_NAME")
   private String deptName;

        // bi-directional many-to-one association to EmpDeptDtl 
   @OneToMany(mappedBy = "deptId")
   private Set<EmpDeptDtl> empDeptDtls; 
```

现在，**谁能建议我如何使用 CRITERIA 检索给定 EMP_ID 的 Dept 记录列表**。在上面给出的示例数据中，对于 EMP_ID=101，应返回 dept_ids 为 22 和 33 的部门记录。

我使用命名查询和本机 SQl 查询得到了解决方案。但我无法通过休眠标准得到它。有人可以帮我吗？

谢谢哈里什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:32:17.267

这是从 .net 到 java 的直接翻译，我不确定语法是否正确，但您可以围绕它进行操作（不确定，因为从外观上看，您似乎不太了解 abt 标准，我建议您阅读abt 因为这是最容易编写的查询之一）

```
session.createCriteria(Employee.class,"emp")
.createAlias("emp.empDtls","empDetail")
.createAlias("empDetail.empDeptDtls","empDetail")
.createAlias("empDetail.deptId","dept")
.add(Restrictions.Eq("emp.empId", 101))
.setProjection(projections.property("dept.deptId"))
.toList<long>(); 
```

答案并不一定意味着我同意你的数据模型..也可以更改一些成员名称以表示它们真正代表的内容..

# bash - 从另一个具有不同权限的 bash 脚本运行 bash 脚本

> ID：11114572
> 
> 赞同：-2
> 
> 时间：2012-06-20T07:14:28.907
> 
> 标签：bash, user-permissions

我有一个 bash 脚本**archive.sh**属于**User1**并具有**755**的权限。在同一目录中还有另外两个脚本**archive1.sh**和**archive2.sh**，属于同一用户（**User1**），但权限为**744**。脚本**archive1.sh**和**archive2.sh从脚本****archive.sh**内部调用。

现在这个脚本**archive.sh从与****User1**同一组中的另一个用户**User2**执行。由于**archive.sh**有755的权限，所以可以毫无问题地执行。**但在该脚本中，有对archive1.sh**和**archive2.sh**的调用，它们有 744 个权限。所以如果我从User2调用**archive.sh**，那么它会执行里面的两个脚本吗？

 ******当我尝试时，子脚本运行正常，但我不确定如何

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T07:27:49.713

取决于如何称呼这两个“孩子”。

`./child.sh`将失败，因为您没有正确的权限。

`/bin/sh child.sh`会起作用，因为您只需要读取权限。******

# algorithm - 查找文档中每个单词的出现次数？

> ID：11114574
> 
> 赞同：1
> 
> 时间：2012-06-20T07:14:49.580
> 
> 标签：algorithm

我在一次采访中被问到这个问题。面试官告诉我假设存在一个函数 getNextWord() 来返回给定文档中的下一个单词。我的任务是设计一个数据结构来实现这个任务，并给出一个算法来构造一个包含所有单词及其频率的列表。

来自 C++ 背景，我的答案是创建一个`multimap`of`string`然后在其中插入所有单词，然后显示`count`它。然而，后来有人告诉我，以更*通用*的方式执行此操作。泛指他不希望我使用库功能。另外我猜多图在内部实现为 2-3 树左右，因此为了使多图解决方案具有通用性，我还需要对 2-3 树进行编码。

尽管确实想到了尝试，但在面试中实施一个对我来说是不可能的。所以，我只是想知道是否有更好的方法来实现它？或者有没有办法使用尝试以平滑的方式实现它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T08:10:55.387

任何基于[**直方图**](http://en.wikipedia.org/wiki/Histogram)的算法在这里都是有效的和通用的。这个想法很简单：根据数据构建直方图。**直方图的通用接口是`Map<String,Integer>`**

迭代文档一次（使用 nextDoc() 方法），同时保持直方图。

就大 O 表示法而言，此接口的最佳实现可能是**使用[trie](http://en.wikipedia.org/wiki/Trie)**，并在每个叶节点中添加出现计数器。

从 trie 中获取实际`(word,number)`对将由 trie 上的简单 DFS 完成。

此解决方案为您提供`O(n * |S|)`时间复杂度，其中 |S| 是字符串的平均大小。

**每个单词的插入算法：**
每次添加一个新单词时：检查它是否已经存在，如果存在 - 增加计数器，否则 - 将单词添加到字典中，计数器值为 1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T07:18:58.837

我会尝试实现一个[B-Tree](http://en.wikipedia.org/wiki/B-tree)（或者非常相似的）来存储所有的单词。因此我可以很容易地找到下一个单词，如果已经有了它并增加节点中的关联计数器。或者只是插入一个新的。

这种情况下的时间复杂度是：`O(nlogn)`，`n`所有单词都在哪里计算，并且`logn`对于这种树来说是一个大哦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T08:34:19.887

我认为最简单的解决方案是 aa [Trie](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=usingTries)。在这种情况下给出 O(N) （用于插入和获取计数）。只需将计数存储在每个节点的额外空间中。

基本上树中的每个节点都包含 26 个链接到 26 个可能的子节点（每个字母 1 个）+ 1 个计数器（对于在当前节点中终止的词）。只需查看链接以获取特里的图形图像。

# linux - 访问 ext3 / ext4 期刊

> ID：11114575
> 
> 赞同：10
> 
> 时间：2012-06-20T07:14:54.110
> 
> 标签：linux, filesystems, ext3, ext4, journaling

ext3 和 ext4 文件系统具有日志功能。是否有一些 API 可以获取有关文件的详细信息或事件？

某种 API，允许用户空间程序访问文件的日志条目。甚至是日志事件，例如“文件 x 已删除”。

这似乎是[某种文档](https://www.kernel.org/doc/Documentation/filesystems/ext4.txt)，但我不确定它是否正确。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2021-02-19T18:54:01.023

# 和[`debugfs`](https://www.man7.org/linux/man-pages/man8/debugfs.8.html)

## `logdump`

`logdump`您可以使用命令 from显示有关文件系统日志的信息`debugfs`。

例如，`sudo debugfs -R 'logdump -S' /dev/sda3`产量

```
Journal features:         journal_incompat_revoke journal_checksum_v3
Total journal size:       512M
Total journal blocks:     131072
Max transaction length:   131072
Fast commit length:       0
Journal sequence:         0x004bd0ae
Journal start:            109412
Journal checksum type:    crc32c
Journal checksum:         0x157eebb7

Journal starts at block 109412, transaction 4968622
Found expected sequence 4968622, type 5 (revoke table) at block 109412
Found expected sequence 4968622, type 1 (descriptor block) at block 109413
Found expected sequence 4968622, type 2 (commit block) at block 109419
Found expected sequence 4968623, type 1 (descriptor block) at block 109420
Found expected sequence 4968623, type 2 (commit block) at block 109422
Found expected sequence 4968624, type 1 (descriptor block) at block 109423
Found expected sequence 4968624, type 2 (commit block) at block 109425
Found expected sequence 4968625, type 1 (descriptor block) at block 109426
// rest omitted 
```

我意识到这`debugfs`不是 API，但它可以访问日志。

## 读取日志的字节

要获取日志的原始字节，您可以`debugfs`再次使用。它的`cat`命令接受一个 inode 编号并打印 inode 指向的地址的数据。

假设期刊的 inode 号为 8：

```
sudo debugfs -R 'cat <8>' /dev/sda3 | hexdump -C 
```

这以十六进制打印日志的字节。您应该在开头看到[日志格式的幻数](https://www.kernel.org/doc/html/latest/filesystems/ext4/globals.html#block-header)jbd2：

```
c0 3b 39 98 
```

日志使用[big-endian 字节顺序](https://en.wikipedia.org/wiki/Endianness)，而 ext4 使用 little-endian。

# 和[`jls`](http://www.sleuthkit.org/sleuthkit/man/jls.html)

`jls`来自[The Sleuth Kit](https://en.wikipedia.org/wiki/The_Sleuth_Kit)还打印有关该期刊的信息。

例如，`sudo jls /dev/sda3`产量

```
JBlk    Description
0:  Superblock (seq: 0)
sb version: 4
sb version: 4
sb feature_compat flags 0x00000000
sb feature_incompat flags 0x00000011
        JOURNAL_REVOKE
sb feature_ro_incompat flags 0x00000000
1:  Unallocated Commit Block (seq: 4936768, sec: 1613471034.3277057792)
2:  Unallocated Descriptor Block (seq: 4936769)
3:  Unallocated FS Block 42991838
4:  Unallocated FS Block 0
5:  Unallocated Commit Block (seq: 4949171, sec: 1613574032.1117509120)
6:  Unallocated Descriptor Block (seq: 4949172)
7:  Unallocated Commit Block (seq: 4960433, sec: 1613729975.4288594432)
8:  Unallocated Descriptor Block (seq: 4960434)
// rest omitted 
```

的源代码`jls`在[这里](https://github.com/sleuthkit/sleuthkit/blob/master/tools/fstools/jls.cpp)。

# DIY

或者，您可以参考[ext4 wiki](https://www.kernel.org/doc/html/latest/filesystems/ext4/index.html)使用您必须自己编写的程序来解析日志。步骤大致如下：

1.  读取文件系统后 1024 字节开始的 ext4 超级块。
2.  从超级块的偏移量 0xE0 读取日志 inode 号。日志的 inode 编号通常为 8。这[在此处](https://www.kernel.org/doc/html/latest/filesystems/ext4/globals.html#super-block)记录。
3.  从日志中读取您需要的数据，记住它是大端的，而不是 ext4 是小端的。[此处](https://www.kernel.org/doc/html/latest/filesystems/ext4/globals.html#journal-jbd2)描述了期刊的结构。

# mvvm-light - 将 DataContext 传递给 Silverlight 5 中的转换器参数

> ID：11114578
> 
> 赞同：0
> 
> 时间：2012-06-20T07:14:58.580
> 
> 标签：mvvm-light, silverlight-5.0

我是 silverlight 以及 MVVM 的新手。我正在使用 Silverlight 5 和 MVVM Light 工具包。

我的用户控件的绑定是从视图应用的，并且希望将此绑定作为 ConverterParameter 发送到 Converter。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:54:05.440

我认为你不能这样做，因为 ConverterParameter 不是 DependencyProperty。我的建议是将另一个东西作为参数值传递。

# javascript - 如何编辑附加的 div

> ID：11114581
> 
> 赞同：0
> 
> 时间：2012-06-20T07:15:10.627
> 
> 标签：javascript

我有一个在 click 上创建表单元素的按钮。

我的`addelement`功能看起来像这样

```
function addElement(){
    to = document.getElementById('top');
    newId = document.createElement('div');
    id = 'my'+this.num;
    newId.setAttribute('id', id );
    newId.innerHTML = "<input type = 'text' value = ''>";
    to.appendChild(newId);
    this.num++;
} 
```

...它将文本输入字段呈现为 ID = 'top' 的表单，并为每个表单元素创建一个动态 div

现在，一旦元素在表单内，我想知道一种编辑该元素的方法。那怎么可能呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T07:27:46.647

当您分配`id`给此元素时：

```
newId.setAttribute('id', id ); 
```

`getElementById`您可以使用以下函数通过 id 获取此元素：

```
var elementToEdit = document.getElementById('my123'); 
```

如果您需要获取`input`元素，只需编写：

```
var inputToEdit = elementToEdit.childNodes[0]; 
```

但我会建议你不要从字符串创建元素。IE：

```
newId.innerHTML = "<input type = 'text' value = ''>"; 
```

更好的是使用`createElement`函数，然后将其附加到新创建的`div`

# objective-c - 使用 AVCaptureSession 返回的异常值

> ID：11114582
> 
> 赞同：1
> 
> 时间：2012-06-20T07:15:12.683
> 
> 标签：objective-c, ios, image-processing, avcapturesession, avcapture

我正在使用 AVCapture Session 实时检测一些图像，并通过我的应用程序中的 XML 数据和 SURF 算法（SURF 代码可用开源）匹配图像数据。

现在我的 XML 由 Img Data（表示图像特征的浮点数）和 imgid（从 1 到 9 的整数值）组成。

逻辑是，每当我将相机对准图像时，它应该检测 rgb 值并将其发送到 SURF 算法，其中图像的 rgb 值已经使用 XML 的特征点数据进行了操作。匹配特征并返回该特定图像的相应 img id（介于 1 到 9 之间）。使用该图像 ID，将返回匹配 ID。如果匹配 id 是任何正值，则图像被称为匹配，如果为零则不匹配。

现在我得到像这样的图像ID AVCaptureConnection: 0x59f3da0

avcapture 会话代码与 Apple 技术问答中使用的代码相同。

# ios - 为 UINavigationBar 设置背景颜色

> ID：11114583
> 
> 赞同：5
> 
> 时间：2012-06-20T07:15:18.290
> 
> 标签：ios, navigationbar

我想开发`UINavigationBar`并为此设置背景颜色。我已经创建了，`UINavigationBar`但我在设置背景色时遇到了问题。任何人请帮助我。谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-20T07:22:10.207

```
[self.navigationController.navigationBar setBackgroundColor:[UIColor redColor]]; 
```

像这样试试。我想这会对你有所帮助。

编辑：更新代码以实际编译。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-04-23T14:19:53.603

在新的 iOs 中，它是如何工作的：

```
self.navigationController.navigationBar.barStyle  = UIBarStyleBlackOpaque;
self.navigationController.navigationBar.barTintColor =[UIColor colorAzulNavegacion]; 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-08-03T07:23:50.330

我每次都必须查看这个，所以在这里添加我的答案（Swift）。下面的代码为应用程序中的所有导航栏设置了此项。如果您愿意，您也可以在单独的导航栏上设置其中的每一个。

您可以设置半透明度、标题文本颜色、背景颜色（这称为 barTintColor，谢谢，Apple！）和条形按钮项目前景色，如下所示：

```
 // Title text color Black => Text appears in white
    UINavigationBar.appearance().barStyle = UIBarStyle.Black

    // Translucency; false == opaque
    UINavigationBar.appearance().translucent = false

    // BACKGROUND color of nav bar
    UINavigationBar.appearance().barTintColor = UIColor.redColor()

    // Foreground color of bar button item text, e.g. "< Back", "Done", and so on.
    UINavigationBar.appearance().tintColor = UIColor.whiteColor() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-20T07:18:54.217

你可以使用 tint 属性`UINavigationBar`来改变它的颜色。检查这篇[文章](http://blog.whitepeaksoftware.com/2010/09/11/customizing-the-look-of-uinavigationbar-and-uinavigationcontroller/)。还有`UIAppearance`，它允许您更改每个`UINavigationBar`应用程序的背景，这在我看来非常强大。你可以检查[这个](http://www.ioslearner.com/uiappearance-proxy-protocol-tutorial/)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-20T07:19:20.097

您可以使用设置色调颜色`navbar.tintColor = [UIColor redColor];`

请参阅此处的参考：[apple docs](http://developer.apple.com/library/ios/documentation/uikit/reference/UINavigationBar_Class/Reference/UINavigationBar.html#//apple_ref/occ/instp/UINavigationBar/tintColor)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-20T07:20:14.400

试试这个：

```
navigationBar.tintColor = [UIColor blackColor]; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-10-28T06:16:29.387

self.navigationController?.navigationBar.translucent = false

self.navigationController?.navigationBar.barTintColor = UIColor.redColor()

self.navigationController?.navigationBar.barStyle = UIBarStyle.BlackTranslucent

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-20T07:21:57.097

您可以`UINavigationBar`使用以下属性自定义 a：

*   `@property(nonatomic, assign) UIBarStyle barStyle`
*   `@property(nonatomic, retain) UIColor *tintColor`
*   `setBackgroundImage:forBarMetrics:`
*   `@property(nonatomic, copy) UIColor *backgroundColor`

`UINavigationBar`有关更多方法和属性，请查看和的类参考`UIView`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-07T13:26:29.033

```
self.navigationController.navigationBar.tintColor = [UIColor blackColor]; 
```

# linux - 无法使用 meld 进行 svn diff

> ID：11114586
> 
> 赞同：8
> 
> 时间：2012-06-20T07:15:19.617
> 
> 标签：linux, svn, meld

我想使用 meld 查看修订之间的差异。我安装了meld，然后在项目目录中执行：

```
svn diff -r 2165:2182 --diff-cmd meld 
```

但它会出现以下错误：

```
Index: app/models/college_friends_count.rb
===================================================================
svn: E200012: Process 'meld' failed (exitwhy 2) 
```

谁能告诉我这里出了什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T07:57:03.883

我相信 E200012 意味着底层进程（融合）以非零退出代码退出。许多差异工具这样做是为了指示差异操作的结果（0 = 无差异 1 = 差异等）。

尽管我的 meld 版本似乎没有使用非零退出代码，但我知道 colordiff 确实如此，它会在目录爬行“svn diff”期间停止 SVN，就像上面的示例一样。在没有任何更改要测试的文件上尝试。

一个很好的解决方法是创建自己的 diff 命令，假设你称之为 meld_svn：

```
#!/bin/bash
meld "$6" "$7" 
exit 0 
```

所以我们正在做的是忽略 meld 的退出代码，并使用我们自己的退出代码（这不会停止 SVN）。参数周围的引号意味着其中包含空格的文件名不会破坏您的脚本。

使其可执行，然后编辑您的 ~/.subversion/config 并将 diff-cmd 设置为“meld_svn”。这对 colordiff 很有用，如果 meld 确实以非零退出代码退出，应该可以解决 meld 的问题。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-03T15:38:10.343

对我来说，问题是默认情况下 svn 将 -u 作为外部 diff 命令的选项传递，而 meld 并不期望或该标志。

`-x`标志`svn-diff`允许您覆盖此默认标志：

```
 svn diff -x \"\" --diff-cmd meld 
```

这替换`-u`为`""`在 melds 命令行上，转义是必需的，这样您的外壳就不会在第一轮解析引号，而是将它们传递给 SVN，后者将其传递到 meld 命令行。

*（顺便说一句，使用`echo`diff-cmd 可以让您轻松检查 SVN 将发送给 meld 的内容）*

# jquery-ui - 基础设施 Jquery 树

> ID：11114587
> 
> 赞同：0
> 
> 时间：2012-06-20T07:15:25.047
> 
> 标签：jquery-ui, infragistics

当 LoadOnDemand 设置为 true 时，在使用 igTree 时我需要您的帮助。我有一个 WCF REST 服务，它为我提供要在 igTree 中填充的数据。

请找到示例代码..

```
$.ajax(
            {
                type: "GET",
                url: "AssessmentProcWCFService.svc/GetAllEntities",
               contentType: "application/json; charset=utf-8",
                dataType: 'json',
                data: '{}',
                cache: false,
                success: OnGetAllEntitiesSuccess,
                error: OnGetAllEntitiesFailure
            }); 
```

====================================================

```
function OnGetAllEntitiesSuccess(categoryList) {
   $("#APTreeView").igTree({
                    animationDuration: 0,
                    dataSourceType: 'json',
                    dataSource: categoryList.d,
                    initialExpandDepth: false,
                    loadOnDemand: true,
                    dataSourceUrl: "AssessmentProcWCFService.svc/GetAllCategories?EntityID=primaryKey:id",
                    bindings: {
                        textKey: 'text',
                        valueKey: 'id',
                        primaryKey: 'id',
                        expanded: 'expanded',
                        childDataProperty: 'children'
                    }
                });
            } 
```

==================================================== =======

问题：-

1.  当树的任何节点正在扩展时，如何将选定的节点 ID 发送到服务？当我在服务“public List GetAllCategories()”如“string entityID = HttpContext.Current.Request.QueryString["EntityID"];”中检索它时，我在上面的示例中发送的方式不起作用 我将实体 ID 设为空。

2.  如果 LoadOnDemand 为真，当任何节点展开时如何渲染树？

请帮助我，我已经花了很多时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:36:29.697

基本上，您可以在对服务的请求中对您喜欢的任何内容进行编码：

以下是解释的默认请求参数：http: [//www.infragistics.com/community/forums/t/65356.aspx](http://www.infragistics.com/community/forums/t/65356.aspx)

以下是添加请求参数的方法：

```
function OnGetAllEntitiesSuccess(categoryList) {
   $("#APTreeView").igTree({
                    animationDuration: 0,
                    dataSourceType: 'json',
                    dataSource: categoryList.d,
                    initialExpandDepth: false,
                    loadOnDemand: true,
                    dataSourceUrl: "AssessmentProcWCFService.svc/GetAllCategories?EntityID=primaryKey:id",
                    bindings: {
                        textKey: 'text',
                        valueKey: 'id',
                        primaryKey: 'id',
                        expanded: 'expanded',
                        childDataProperty: 'children'
                    },
                    nodePopulating: function (event, ui) {
                        var node = '&SelectedNodeID=' + $("#APTreeView").igTree('selectedNode').element.attr('data-value'),
                            myNewUrl = 'AssessmentProcWCFService.svc/GetAllCategories?EntityID=primaryKey:id' + node;
                        $('#myTree').igTree('option', 'dataSourceUrl', myNewUrl);
                    }
                });
            } 
```

# c# - 在 C# 中检查贝宝订阅状态

> ID：11114588
> 
> 赞同：2
> 
> 时间：2012-06-20T07:15:26.200
> 
> 标签：c#, paypal, payment, subscription, recurring

我想在 Paypal 中检查用户的订阅状态。我的意思是，如果用户支付了他最后的订阅费，我希望贝宝重定向到选定的页面，这样我就可以延长他的订阅日期。

如果不可能，我只想知道用户的订阅何时被取消。或者也许只是向贝宝发送请求并检查该用户的订阅状态，无论它是否在本月支付。

我将如何实现这样的事情？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:34:54.050

如果您实施 IPN（即时付款通知），PayPal 将调用您网站上的一个页面，其中包含状态、收到的付款、退款等。我不确定您是否可以请求最后的 IPN 状态，但值得关注。高温高压

# python - 使用 Python argparse 创建隐藏参数

> ID：11114589
> 
> 赞同：131
> 
> 时间：2012-06-20T07:15:27.677
> 
> 标签：python, argparse

[`argparse.ArgumentParser`](http://docs.python.org/library/argparse.html#module-argparse)是否可以在没有出现在用法或帮助（ ）中的情况下向 python 添加参数`script.py --help`？

* * *

## 回答 #1

> 赞同：188
> 
> 时间：2012-06-20T07:19:44.540

是的，您可以将`help`选项设置`add_argument`为`argparse.SUPPRESS`。[这是argparse 文档](http://docs.python.org/dev/library/argparse.html#help)中的一个示例：

```
>>> parser = argparse.ArgumentParser(prog='frobble')
>>> parser.add_argument('--foo', help=argparse.SUPPRESS)
>>> parser.print_help()
usage: frobble [-h]

optional arguments:
  -h, --help  show this help message and exit 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-06T18:19:22.230

我通过添加一个选项来启用隐藏的选项来做到这一点，然后通过查看`sysv.args`.

如果你这样做，`sys.argv`如果你假设选项是`-s`启用隐藏选项，你必须在解析列表中直接包含你选择的特殊参数。

```
parser.add_argument('-a', '-axis',
                    dest="axis", action="store_true", default=False,
                    help="Rotate the earth")
if "-s" in sys.argv or "-secret" in sys.argv:
    parser.add_argument('-s', '-secret',
                        dest="secret", action="store_true", default=False,
                        help="Enable secret options")
    parser.add_argument('-d', '-drill',
                        dest="drill", action="store_true", default=False,
                        help="drill baby, drill") 
```

# iphone - 如何在不选择的情况下获取所有歌曲

> ID：11114593
> 
> 赞同：1
> 
> 时间：2012-06-20T07:15:46.000
> 
> 标签：iphone

我正在开发一个应用程序。我使用 MPMediaPickerController 从选择器中获取所有选定的歌曲。但是我需要在没有选择的情况下获取所有歌曲信息。这意味着在不显示选择器的情况下我需要获取所有歌曲信息。所以请任何人告诉我如何获取这些信息。

# python - Python findall 在一个字符串中

> ID：11114594
> 
> 赞同：1
> 
> 时间：2012-06-20T07:15:46.433
> 
> 标签：python, string, find

在这里必须有一种更简单的方法或功能来执行此代码：

```
 #!/usr/bin/env python

    string = "test [*string*] test [*st[ *ring*] test"

    points = []

    result = string.find("[*")
    new_string = string[result+1:]

    while result != -1:
      points.append(result)
      new_string = new_string[result+1:]
      result = new_string.find("[*")

    print points 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T07:22:50.547

```
 import re
  string = "test [*string*] test [*st[ *ring*] test"

  points = [m.start() for m in re.finditer('\[', string)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T07:22:59.630

看起来您正在尝试获取字符串中匹配的索引`'[*'`...

```
indices=[i for i in range(len(string)-1) if string[i:i+2] == '[*'] 
```

但是此输出与您的代码将产生的不同。您能否验证您的代码是否符合您的要求？

另请注意，这`string`是标准库中 python 模块的名称——虽然它不经常使用，但最好避免将其用作变量名。（也不要使用`str`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T07:38:13.337

```
>>> indexes = lambda str_, pattern: reduce(
...    lambda acc, x: acc + [acc[-1] + len(x) + len(pattern)],
...    str_.split(pattern), [-len(pattern)])[1:-1]
>>> indexes('123(456(', '(')
[3, 7]
>>> indexes('', 'x')
[]
>>> indexes("test [*string*] test [*st[ *ring*] test", '[*')
[5, 21]
>>> indexes('1231231','1')
[0, 3, 6] 
```

# php - MySQL：根据另一个表数据选择一个表（用于电子邮件）

> ID：11114609
> 
> 赞同：1
> 
> 时间：2012-06-20T07:16:47.383
> 
> 标签：php, mysql, database

这是问题所在：我在数据库中有 4 个表。一个是“呼叫”，另外三个是支持团队“IT”、“维护”、“工程”。在“呼叫”表中创建一行时，有一个名为“支持团队”的字段，并且该字段有 3 个可能的选项，维护和工程。我需要能够根据“呼叫”表中请求的团队向这些团队发送电子邮件。所有电子邮件信息都存储在各个团队的表格中。我希望这是有道理的。如果没有，我可以绘制问题图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-05-01T23:16:18.760

创建 3 个字符串变量以进入调用表的 support_team 字段：it、maintenance、engineering。让变量与数据库表同名吧，维护工程。在调用表中插入新记录后，使用此

```
$team = "Select calls.support_team from calls where id = $last_id ";
"Select * from $team "; 
```

`$last_id`调用表中最近插入的记录的 id 在哪里。由于`$team`获取了表的名称：id、maintenance 或 engineering；第二行代码只是获取团队成员的姓名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T07:27:20.093

由于表是有限的，你可以做一堆左连接：

```
SELECT * FROM calls
LEFT JOIN team_it ON calls.`support team` = 'it' AND calls.id = team_it.id
... etc 
```

我不知道加入条件是什么，所以我猜到了`calls.id = team_it.id`

如果这三个表已经有一个“外键”来调用，你可以直接`left join`使用它。

# javascript - 有什么方法可以知道 Servlet 是否在浏览器上启用了 JS？

> ID：11114612
> 
> 赞同：1
> 
> 时间：2012-06-20T07:16:56.323
> 
> 标签：javascript, flash, servlet-3.0

有什么方法可以知道 Servlet 是否在浏览器上启用了 JS？还想要安装在浏览器上的 Flash 版本。我只想要 Servlet 中的所有这些信息。我们需要在最后记录这些信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:22:58.583

有一种方法，

1.  添加一个具有类似名称的新 Servlet`JsServlet`
2.  添加无脚本标签

    <无脚本>

    ```
     < img src="{PATH TO YOUR SERVLET}" >

    < /noscript> 
    ```

3.  从 Servlet 返回一些空白图像

4.  如果调用此 Servlet，您会发现浏览器不支持脚本。

**编辑**：servlet 代码将是，

```
public class JsServlet extends HttpServlet{

  protected void service(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {

  /*Write your code that you wan't */
  /*You are here means the browser dose not support javaScript*/

  BufferedImage buffer = new BufferedImage(1, 1,
                            BufferedImage.TYPE_INT_RGB);
  response.setContentType("image/png");
                        OutputStream os =   response.getOutputStream();
                        ImageIO.write(bufferedImage, "png", os);
                        os.close();

} 
```

# javascript - jQuery ID 选择器仅适用于第一个元素

> ID：11114622
> 
> 赞同：19
> 
> 时间：2012-06-20T07:17:24.777
> 
> 标签：javascript, jquery, html

我有 3 个具有相同 ID 的按钮。我需要在单击每个按钮时获取它的值。

```
<button id="xyz" type="button" class="btn btn-primary" value="1">XYZ1</button>
<button id="xyz" type="button" class="btn btn-primary" value="2">XYZ2</button>
<button id="xyz" type="button" class="btn btn-primary" value="3">XYZ3</button> 
```

这是我当前的`jQuery`脚本：

```
$("#xyz").click(function(){
      var xyz = $(this).val();
      alert(xyz);
}); 
```

但它只适用于第一个按钮，点击其他按钮被忽略。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-06-20T07:18:21.007

> 我有 3 个具有相同 ID 的按钮...

您的 HTML 无效。页面中不能有多个具有相同`id`属性值的元素。

[引用规范](http://www.w3.org/TR/html401/struct/global.html#h-7.5.2)：

> *7.5.2**元素标识符：id 和 class 属性***
> 
> **id = name [CS]**
> 此属性为元素分配名称。此名称在文档中必须是唯一的。

**解决方案**：从更改`id`为`class`：

```
<button type="button" class="btn btn-primary xyz" value="1">XYZ1</button>
<button type="button" class="btn btn-primary xyz" value="2">XYZ2</button>
<button type="button" class="btn btn-primary xyz" value="3">XYZ3</button> 
```

和**jQuery 代码**：

```
$(".xyz").click(function(){
    alert(this.value);
    // No need for jQuery :$(this).val() to get the value of the input.
}); 
```

> 但它仅适用于第一个按钮

jQuery`#id`选择器[文档](http://api.jquery.com/id-selector/)：

> 每个 id 值只能在文档中使用一次。**如果为多个元素分配了相同的 ID，则使用该 ID 的查询将仅选择 DOM 中第一个匹配的元素。**但是，不应依赖此行为；具有多个使用相同 ID 的元素的文档无效。

如果您查看 jQuery 源代码，您可以看到当您`$`使用 id selecor-( `$("#id")`) 调用时，jQuery 调用了本机 javascript`document.getElementById`函数：

```
// HANDLE: $("#id")
} else {
    elem = document.getElementById( match[2] );
} 
```

虽然，在他们的[规范](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-getElBId)中`document.getElementById`没有提到它必须返回第一个值，但这就是大多数（也许是全部？）浏览器实现它的方式。

**[演示](http://jsfiddle.net/CAnxW/)**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-20T07:20:31.720

ID 表示“标识符”，每个文档仅有效一次。由于此时您的 HTML 是错误的，因此某些浏览器会选择第一个出现的元素，一些最后出现的具有该 ID 的元素。

更改名称的 id 将是一个很好的步骤。

然后使用`$('button[name="xyz"]').click(function(){`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-25T11:11:32.900

根据我的经验，如果您改用`$('button#xyz')`选择器，它将起作用。这是一个 hack，但它仍然是无效的 HTML。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-09T17:21:11.160

尽管将 id 更改为类更好，但您可以使用[属性 equals 选择器](https://api.jquery.com/attribute-equals-selector/)获取具有相同 id 的所有元素：

```
$('[id="xyz"]') 
```

或者只获取 id xyz 的按钮：

```
$('button[id="xyz"]') 
```

或者 id 为 xyz 的 div：

```
$('div[id="xyz"]') 
```

等等

或者，您可以使用[“属性包含选择器”](http://api.jquery.com/attribute-contains-selector/)来获取 id 包含“xyz”的所有元素：

```
$('[id*="xyz"]') 
```

当然，这意味着所有 id 部分包含“xyz”的元素都将被选中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-04T11:32:31.977

如果您有多个具有相同 ID 的元素，这也有效。

```
 $("button#xyz").click(function(){
  var xyz = $(this).val();
  alert(xyz);
 }); 
```

你可以在[这里查看](https://jsfiddle.net/ocnuLxds/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-06-12T14:16:12.110

如果容器中有相同的 id，则可以使用 on() 访问每个事件的每个元素

```
$("#containers").on("click","#xyz",function(){
  alert($(this).val())
  })
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<div id="containers">

<button id="xyz" type="button" class="btn btn-primary" value="1">XYZ1</button>
<button id="xyz" type="button" class="btn btn-primary" value="2">XYZ2</button>
<button id="xyz" type="button" class="btn btn-primary" value="3">XYZ3</button>

</div>
```

关于 on() 的信息在[这里](http://api.jquery.com/on/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-20T07:52:28.443

您不能拥有相同的 id，因为 id 在页面 HTML 中是唯一的。将其更改为类或其他属性名称。

```
$('attributename').click(function(){ alert($(this).attr(attributename))}); 
```

# android - Android Canvas 重做和撤消操作

> ID：11114625
> 
> 赞同：24
> 
> 时间：2012-06-20T07:17:33.020
> 
> 标签：android

我正在做一个绘图项目。除了画布重做和撤消操作之外，我的代码运行良好。我的撤消操作从 ArrayList 中删除路径`paths`并保存到`undonePaths`ArrayList，而重做操作从 中删除最后一个元素`undonePaths`并保存到`paths`.

这是我的代码：

```
import java.util.ArrayList;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Path;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;

public class DrawView extends View implements OnTouchListener {
    private Canvas  mCanvas;
    private Path    mPath;
    private Paint       mPaint;   
    private ArrayList<Path> paths = new ArrayList<Path>();
    private ArrayList<Path> undonePaths = new ArrayList<Path>(); 

    private Bitmap im;
    public DrawView(Context context) 
    {
        super(context);
        setFocusable(true);
        setFocusableInTouchMode(true);      
        this.setOnTouchListener(this);
        mPaint = new Paint();
        mPaint.setAntiAlias(true);
        mPaint.setDither(true);
        mPaint.setColor(0xFFFFFFFF);
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(6);
        mCanvas = new Canvas();
        mPath = new Path();
        paths.add(mPath);

        im=BitmapFactory.decodeResource(context.getResources(),R.drawable.ic_launcher);

    }               
        @Override
        protected void onSizeChanged(int w, int h, int oldw, int oldh) {
            super.onSizeChanged(w, h, oldw, oldh);
        }

        @Override
        protected void onDraw(Canvas canvas) {
            //mPath = new Path();
            //canvas.drawPath(mPath, mPaint);
            for (Path p : paths){
                canvas.drawPath(p, mPaint);
            }
        }

        private float mX, mY;
        private static final float TOUCH_TOLERANCE = 4;

        private void touch_start(float x, float y) {
            mPath.reset();
            mPath.moveTo(x, y);
            mX = x;
            mY = y;
        }
        private void touch_move(float x, float y) {
            float dx = Math.abs(x - mX);
            float dy = Math.abs(y - mY);
            if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
                mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
                mX = x;
                mY = y;
            }
        }
        private void touch_up() {
            mPath.lineTo(mX, mY);
            // commit the path to our offscreen
            mCanvas.drawPath(mPath, mPaint);
            // kill this so we don't double draw            
            mPath = new Path();
            paths.add(mPath);
        }

        public void onClickUndo () { 
            if (paths.size()>0) 
            { 
               undonePaths.add(paths.remove(paths.size()-1));
               invalidate();
             }
            else
            {

            }
             //toast the user 
        }

        public void onClickRedo (){
           if (undonePaths.size()>0) 
           { 
               paths.add(undonePaths.remove(undonePaths.size()-1)); 
               invalidate();
           } 
           else 
           {

           }
             //toast the user 
        }

    @Override
    public boolean onTouch(View arg0, MotionEvent event) {
          float x = event.getX();
          float y = event.getY();

          switch (event.getAction()) {
              case MotionEvent.ACTION_DOWN:
                  touch_start(x, y);
                  invalidate();
                  break;
              case MotionEvent.ACTION_MOVE:
                  touch_move(x, y);
                  invalidate();
                  break;
              case MotionEvent.ACTION_UP:
                  touch_up();
                  invalidate();
                  break;
          }
          return true;
    }
} 
```

此代码非常适合绘图，但不适用于撤消和重做操作。我的代码有什么问题？

这是我的完整源代码：

[http://www.4shared.com/rar/8PQQEZdH/test_draw.html](http://www.4shared.com/rar/8PQQEZdH/test_draw.html)

## **更新：**

**终于解决了我的问题；这是我的绘画课：**

```
import java.util.ArrayList;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Path;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;

public class DrawView extends View implements OnTouchListener {
    private Canvas  mCanvas;
    private Path    mPath;
    private Paint       mPaint;   
    private ArrayList<Path> paths = new ArrayList<Path>();
    private ArrayList<Path> undonePaths = new ArrayList<Path>(); 

    private Bitmap im;
    public DrawView(Context context) 
    {
        super(context);
        setFocusable(true);
        setFocusableInTouchMode(true);      
        this.setOnTouchListener(this);
        mPaint = new Paint();
        mPaint.setAntiAlias(true);
        mPaint.setDither(true);
        mPaint.setColor(0xFFFFFFFF);
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(6);
        mCanvas = new Canvas();
        mPath = new Path();

        im=BitmapFactory.decodeResource(context.getResources(),R.drawable.ic_launcher);

    }               
        @Override
        protected void onSizeChanged(int w, int h, int oldw, int oldh) {
            super.onSizeChanged(w, h, oldw, oldh);
        }

        @Override
        protected void onDraw(Canvas canvas) {
            //mPath = new Path();
            //canvas.drawPath(mPath, mPaint);
            for (Path p : paths){
                canvas.drawPath(p, mPaint);
            }
            canvas.drawPath(mPath, mPaint);
        }

        private float mX, mY;
        private static final float TOUCH_TOLERANCE = 4;

        private void touch_start(float x, float y) {
            undonePaths.clear();
            mPath.reset();
            mPath.moveTo(x, y);
            mX = x;
            mY = y;
        }
        private void touch_move(float x, float y) {
            float dx = Math.abs(x - mX);
            float dy = Math.abs(y - mY);
            if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
                mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
                mX = x;
                mY = y;
            }
        }
        private void touch_up() {
            mPath.lineTo(mX, mY);
            // commit the path to our offscreen
            mCanvas.drawPath(mPath, mPaint);
            // kill this so we don't double draw
            paths.add(mPath);
            mPath = new Path();            

        }

        public void onClickUndo () { 
            if (paths.size()>0) 
            { 
               undonePaths.add(paths.remove(paths.size()-1));
               invalidate();
             }
            else
            {

            }
             //toast the user 
        }

        public void onClickRedo (){
           if (undonePaths.size()>0) 
           { 
               paths.add(undonePaths.remove(undonePaths.size()-1)); 
               invalidate();
           } 
           else 
           {

           }
             //toast the user 
        }

    @Override
    public boolean onTouch(View arg0, MotionEvent event) {
          float x = event.getX();
          float y = event.getY();

          switch (event.getAction()) {
              case MotionEvent.ACTION_DOWN:
                  touch_start(x, y);
                  invalidate();
                  break;
              case MotionEvent.ACTION_MOVE:
                  touch_move(x, y);
                  invalidate();
                  break;
              case MotionEvent.ACTION_UP:
                  touch_up();
                  invalidate();
                  break;
          }
          return true;
    }
} 
```

**该代码运行良好......！**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-20T07:40:02.957

乍一看，我看到以下问题：

*   通过在创建后立即添加空`Path`，`paths`一旦撤消就会遇到问题：您`Path`首先弹出空，使第一个撤消似乎不起作用。然后，如果您将其绘制到 中`Path`，则它不会添加到`paths`. 解决方案是在创建新路径之前添加已完成`Path`的路径。`touch_up()`

也就是去掉

```
paths.add(mPath); 
```

从构造函数，并在`touch_up()`，改变

```
mPath = new Path();
paths.add(mPath); 
```

到

```
paths.add(mPath);
mPath = new Path(); 
```

您还需要添加

```
canvas.drawPath(mPath, mPaint); 
```

在你的`for`循环之后`onDraw()`，为了绘制 in-progress `Path`。

*   `undonePaths`当用户再次开始绘图时，您并没有清空。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-20T07:44:55.093

请检查下面的代码它正在工作..

```
package com.testpath;

import java.util.ArrayList;

import android.app.Activity;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Path;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnTouchListener;
import android.widget.Button;
import android.widget.LinearLayout;

public class TesUndoPaintActivity extends Activity {
    /** Called when the activity is first created. */
    LinearLayout linearLayout2;
    private ArrayList<Path> undonePaths = new ArrayList<Path>();
    private ArrayList<Path> paths = new ArrayList<Path>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        linearLayout2 = (LinearLayout) findViewById(R.id.linearLayout2);
        final DrawingPanel dp = new DrawingPanel(this);
        linearLayout2.addView(dp);
        ((Button) findViewById(R.id.button1))
                .setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                        if (paths.size() > 0) {
                            undonePaths.add(paths
                                    .remove(paths.size() - 1));
                            dp.invalidate();
                        }
                    }
                });
        ((Button) findViewById(R.id.button2))
        .setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                 if (undonePaths.size()>0) { 
                       paths.add(undonePaths.remove(undonePaths.size()-1));
                       dp.invalidate();
                   } 
            }
        });
    }

    public class DrawingPanel extends View implements OnTouchListener {

        private Canvas mCanvas;
        private Path mPath;
        private Paint mPaint, circlePaint, outercirclePaint;

        // private ArrayList<Path> undonePaths = new ArrayList<Path>();
        private float xleft, xright, xtop, xbottom;

        public DrawingPanel(Context context) {
            super(context);
            setFocusable(true);
            setFocusableInTouchMode(true);

            this.setOnTouchListener(this);

            circlePaint = new Paint();
            mPaint = new Paint();
            outercirclePaint = new Paint();
            outercirclePaint.setAntiAlias(true);
            circlePaint.setAntiAlias(true);
            mPaint.setAntiAlias(true);
            mPaint.setColor(0xFFFFFFFF);
            outercirclePaint.setColor(0x44FFFFFF);
            circlePaint.setColor(0xAADD5522);
            outercirclePaint.setStyle(Paint.Style.STROKE);
            circlePaint.setStyle(Paint.Style.FILL);
            mPaint.setStyle(Paint.Style.STROKE);
            mPaint.setStrokeJoin(Paint.Join.ROUND);
            mPaint.setStrokeCap(Paint.Cap.ROUND);
            mPaint.setStrokeWidth(6);
            outercirclePaint.setStrokeWidth(6);
            mCanvas = new Canvas();
            mPath = new Path();
            paths.add(mPath);
        }

        public void colorChanged(int color) {
            mPaint.setColor(color);
        }

        @Override
        protected void onSizeChanged(int w, int h, int oldw, int oldh) {
            super.onSizeChanged(w, h, oldw, oldh);
        }

        @Override
        protected void onDraw(Canvas canvas) {

            for (Path p : paths) {
                canvas.drawPath(p, mPaint);
            }

        }

        private float mX, mY;
        private static final float TOUCH_TOLERANCE = 0;

        private void touch_start(float x, float y) {
            mPath.reset();
            mPath.moveTo(x, y);
            mX = x;
            mY = y;
        }

        private void touch_move(float x, float y) {
            float dx = Math.abs(x - mX);
            float dy = Math.abs(y - mY);
            if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
                mPath.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);
                mX = x;
                mY = y;
            }
        }

        private void touch_up() {
            mPath.lineTo(mX, mY);
            // commit the path to our offscreen
            mCanvas.drawPath(mPath, mPaint);
            // kill this so we don't double draw
            mPath = new Path();
            paths.add(mPath);
        }

        @Override
        public boolean onTouch(View arg0, MotionEvent event) {
            float x = event.getX();
            float y = event.getY();

            switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                // if (x <= cx+circleRadius+5 && x>= cx-circleRadius-5) {
                // if (y<= cy+circleRadius+5 && cy>= cy-circleRadius-5){
                // paths.clear();
                // return true;
                // }
                // }
                touch_start(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_MOVE:
                touch_move(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_UP:
                touch_up();
                invalidate();
                break;
            }
            return true;
        }
    }
} 
```

在 XML 文件下方。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Undo" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Redo" />

    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout2"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

    </LinearLayout>

</LinearLayout> 
```

请检查一下。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-12T07:03:12.893

## 问题

该路径仅在您完成绘制时显示，这使用户对他正在绘制的内容一无所知

## 解决方案

```
@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);

   for (Path p : paths){
        canvas.drawPath(p, mPaint);
    }

    //Draw path along with the finger
    canvas.drawPath(mPath, mPaint);
} 
```

添加**`canvas.drawPath(mPath,mPaint)`**到**`onDraw()`**这样用户就可以获得在画布上实际绘画的感觉。

# ruby-on-rails - 如何在 Rails 应用程序中设置复合键

> ID：11114627
> 
> 赞同：6
> 
> 时间：2012-06-20T07:17:45.557
> 
> 标签：ruby-on-rails

我在我的应用程序中使用'foriegner' gem 来设置主键，现在我可以在表中设置复合主键。

我在网上搜索了这个，但无法找到一个明确的解决方案。

如果可以使用外国人 gem 或任何其他方式在 Rails 应用程序中设置复合键，请建议我。

**注意：我正在使用 Postgres**

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-02-12T09:14:25.340

### 活动记录

ActiveRecord有一个名为[`composite_primary_keys`](https://github.com/composite-primary-keys/composite_primary_keys)并集成了这些功能的 gem。

它支持[广泛的 ActiveRecord 版本](https://github.com/composite-primary-keys/composite_primary_keys#versions)。

```
# Gemfile
gem 'composite_primary_keys', '=<version for your AR version>' 
```

像下面的例子一样使用它：

```
class Membership < ActiveRecord::Base
  self.primary_keys = :user_id, :group_id
end

membership = Membership.find([1,1])  # composite ids returns single instance
# => <Membership:0x39218b0 @attributes={"user_id"=>"1", "group_id"=>"1"}> 
```

我很高兴在生产中使用它，保持我的架构干净整洁。

### 更好的选择：续集

与往常一样，如果您正在寻找一个出色的 Ruby + PostgreSQL 解决方案，那么[`jeremyevans/sequel`](https://github.com/jeremyevans/sequel).

它具有大量功能，包括**复合主键**。盒子外面。

因此，如果您正在开始一个新项目（显然是在 PostgreSQL 上），请省去 ActiveRecord 的麻烦，并使用 Sequel。

```
class Post < Sequel::Model
  set_primary_key [:category, :title]
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-19T13:56:53.350

简短的回答：不要在 Rails 中使用复合 PK（除非您因为遗留数据库而被迫这样做）。

虽然（目前）可能有可用的 gem 解决方案，但这并不是 ActiveRecord 的工作方式。除非有充分的理由，否则我也不会在 Rails 之外使用复合 PK。它们使很多事情变得更加复杂。

但是：没有什么能阻止您将您认为的复合主键作为替代键并拥有 Rails 默认 PK（postgres：伪类型'serial'，它从序列中提取其值）。只需确保为构成您的键的那些列添加唯一索引。

# android - 带有 iframe 的视频不会显示在 Android Webview 上

> ID：11114630
> 
> 赞同：7
> 
> 时间：2012-06-20T07:17:58.490
> 
> 标签：android, video, iframe, webview, video-streaming

我正在处理`WebView`从另一个网站显示的 Android 项目（API 级别 8），我无法更改这些网站的代码。`WebView`我在某些未启用强制 GPU 渲染的设备上遇到视频剪辑问题（在设置 --> 开发人员选项中）。以下代码是我从网站上阅读的代码

```
<center><iframe width=\"500\" height=\"315\" src=\"http:\/\/www.youtube.com\/embed\/bf7wpubnyIE\" frameborder=\"0\" allowfullscreen><\/iframe><\/center>  <br \/> 
```

和

```
<center> <iframe frameborder=\"0\" width=\"480\" height=\"323\" src=\"http:\/\/www.dailymotion.com\/embed\/video\/xrmnk1\"><\/iframe> <\/center><br \/> 
```

在 Android 方面，我已经启用了几个设置，它们是

```
webview.setWebChromeClient(new WebChromeClient()); 
webview.setWebViewClient(new WebViewClient()); 
webview.getSettings().setJavaScriptEnabled(true);
webview.getSettings().setPluginsEnabled(true); 
```

我相信我不能使用`android:hardwareAccelerated="true"`，因为我正在使用 API 级别 8

当我关闭 Force GPU rendering 时，logcat 上的错误如下所示

```
06-20 14:04:24.455: W/webview(28201):   at android.webkit.WebView.checkThread(WebView.java:9468)
06-20 14:04:24.455: W/webview(28201):   at android.webkit.WebView.loadDataWithBaseURL(WebView.java:2186)
06-20 14:04:24.455: W/webview(28201):   at com.tss.one.MainDetail$1.run(MainDetail.java:144)
06-20 14:04:24.455: W/webview(28201):   at java.lang.Thread.run(Thread.java:856)
06-20 14:04:24.533: V/PhoneStatusBar(10977): setLightsOn(true)
06-20 14:04:24.697: I/ActivityManager(10909): Displayed com.tss.one/.MainDetail: +614ms
06-20 14:04:27.197: D/libEGL(28201): loaded /system/lib/egl/libGLES_android.so
06-20 14:04:27.205: D/libEGL(28201): loaded /vendor/lib/egl/libEGL_POWERVR_SGX540_120.so
06-20 14:04:27.221: D/libEGL(28201): loaded /vendor/lib/egl/libGLESv1_CM_POWERVR_SGX540_120.so
06-20 14:04:27.229: D/libEGL(28201): loaded /vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so
06-20 14:04:27.729: E/Web Console(28201): Unsafe JavaScript attempt to access frame with URL about:blank from frame with URL http://www.youtube.com/embed/bf7wpubnyIE. Domains, protocols and ports must match.
06-20 14:04:27.729: E/Web Console(28201):  at null:1
06-20 14:04:27.838: E/libEGL(28201): call to OpenGL ES API with no current context (logged once per thread)
06-20 14:04:27.838: D/ShaderProgram(28201): couldn't load the vertex shader!
06-20 14:04:27.838: D/ShaderProgram(28201): couldn't load the vertex shader!
06-20 14:04:27.838: D/ShaderProgram(28201): couldn't load the vertex shader!
06-20 14:04:27.838: D/ShaderProgram(28201): couldn't load the vertex shader!
06-20 14:04:27.838: D/ShaderProgram(28201): couldn't load the vertex shader!
06-20 14:04:28.213: D/dalvikvm(28201): GC_CONCURRENT freed 3468K, 17% free 20475K/24519K, paused 3ms+2ms
06-20 14:04:29.783: E/Web Console(28201): Uncaught Error: INDEX_SIZE_ERR: DOM Exception 1 at http://static1.dmcdn.net/js/gen/widget/pack/player.js.v91ec0434953824904:1
06-20 14:04:29.791: D/MediaPlayer(28201): Couldn't open file on client side, trying server side
06-20 14:04:29.791: I/AwesomePlayer(10888): setDataSource_l('http://www.dailymotion.com/cdn/H264-512x384/video/xrmnk1.mp4?auth=1340348666-9f8ec9001ccce92feec18d9419b07065&helper=0')
06-20 14:04:29.791: V/ChromiumHTTPDataSource(10888): connect on behalf of uid 10124
06-20 14:04:29.791: I/ChromiumHTTPDataSource(10888): connect to http://www.dailymotion.com/cdn/H264-512x384/video/xrmnk1.mp4?auth=1340348666-9f8ec9001ccce92feec18d9419b07065&helper=0 @0
06-20 14:04:33.291: I/SampleTable(10888): There are reordered frames present.
06-20 14:04:33.299: I/OMXCodec(10888): [OMX.TI.DUCATI1.VIDEO.DECODER] AVC profile = 66 (Baseline), level = 30
06-20 14:04:33.299: I/OMXCodec(10888): [OMX.TI.DUCATI1.VIDEO.DECODER] video dimensions are 512 x 344
06-20 14:04:33.299: I/OMXCodec(10888): [OMX.TI.DUCATI1.VIDEO.DECODER] Crop rect is 512 x 344 @ (0, 0)
06-20 14:04:34.432: I/OMXCodec(10888): [OMX.TI.DUCATI1.VIDEO.DECODER] video dimensions are 640 x 448
06-20 14:04:34.432: I/OMXCodec(10888): [OMX.TI.DUCATI1.VIDEO.DECODER] Crop rect is 512 x 344 @ (0, 0)
06-20 14:04:34.604: I/OMXCodec(10888): [OMX.TI.DUCATI1.VIDEO.DECODER] video dimensions are 640 x 448
06-20 14:04:34.604: I/OMXCodec(10888): [OMX.TI.DUCATI1.VIDEO.DECODER] Crop rect is 512 x 344 @ (32, 24)
06-20 14:04:34.612: W/SoftAAC(10888): Sample rate was 44100 Hz, but now is 22050 Hz
06-20 14:04:39.666: I/NuCachedSource2(10888): ERROR_END_OF_STREAM 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:14:33.333

可能是硬件加速的问题。尝试禁用它：

```
@TargetApi(11)
private void disableHardwareAcceleration() {
    if(getCustomApp().isHarwareAccelerateDisable() && android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.HONEYCOMB) {
        Log.e(TAG, "disable HardwareAcceleration");
        webview.setLayerType(View.LAYER_TYPE_SOFTWARE, null);
    }
} 
```

# javascript - facebook 发送按钮不适用于 localhost

> ID：11114635
> 
> 赞同：0
> 
> 时间：2012-06-20T07:18:30.613
> 
> 标签：javascript, facebook, jsp

我在我的jsp页面中包含了以下代码，

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
 js = d.createElement(s); js.id = id;
 js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-send" data-href="http://www.172.28.188.com" data-font="tahoma"></div> 
```

但它不起作用，我认为它不接受 data-href 作为“http://www.172.28.188.com”，请帮我找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:29:39.593

这里有两件事要考虑。

1.  您是否尝试从网址中删除 www。
2.  是为您指定的 url 配置的 fbid 和 fbkey。[https://developers.facebook.com/apps](https://developers.facebook.com/apps)

再次检查您的配置

# xml - Opera + 边框半径 + svg 背景 = 错误？

> ID：11114636
> 
> 赞同：3
> 
> 时间：2012-06-20T07:18:33.903
> 
> 标签：xml, svg, opera

我在 Opera 11.64 浏览器中有错误。在这里查看[http://jsfiddle.net/wqCDm/13/](http://jsfiddle.net/wqCDm/13/)

按钮具有`background: url(data:image/svg+xml;base64...`并且位于带有 的块中`position: fixed`。当您开始滚动页面时，背景会滚开，当您回到顶部后，它会再次出现。

没有`border-radius`它可以正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T14:13:49.670

我确认这是一个错误，并且在 Opera 12 中仍然如此。您是否在[Opera 错误报告系统](https://bugs.opera.com/wizard/)上报告了它？

**2012-06-21 更新**：好的。确认的。它现在是 Opera 内部错误跟踪系统中的 CORE-47072。

# mysql - 如何在 MySQL 中剪切部分字符串？

> ID：11114638
> 
> 赞同：4
> 
> 时间：2012-06-20T07:18:41.223
> 
> 标签：mysql, sql, select

在 MySQL 中，我有一个带有“bla bla bla YYY=76767 bla bla bla”的文本列。

我需要删掉 76767 的号码。

我怎样才能在 SQL 中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T07:21:26.417

您可以使用

```
select substring_index(substring(mycol, instr(mycol, "=")+1), " ", 1) 
```

获得`=`.

这返回 `76767`。

* * *

这分为两个步骤：

```
substring(mycol, instr(mycol, "=")+1) 
```

返回从后面开始的字符串`=`

和

```
substring_index( xxx , " ", 1) 
```

得到你从“”分割得到的虚拟数组的第一个元素，因此返回 xxx 的第一个标记。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T07:26:30.327

消除您所在领域的数字的最简单方法就是使用[`REPLACE`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_replace)它。

```
SELECT REPLACE(yourcolumn, '76767', '')
FROM yourtable; 
```

您也可以使用[`SUBSTRING`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_substring)和的组合[`INSTR`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_instr)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-26T07:57:25.230

如果您不想更新，请使用

```
UPDATE table_name SET column_name = REPLACE(column_name, '76767', ''); 
```

如果您不想在数据库中替换`76767`为`bla bla bla`，请使用

```
UPDATE table_name SET column_name = REPLACE(column_name, '76767', 'bla bla bla'); 
```

# sql - 如何识别和删除 SQL Server 数据库中的无效对象？

> ID：11114640
> 
> 赞同：1
> 
> 时间：2012-06-20T07:18:44.887
> 
> 标签：sql, sql-server, invalid-object-name

我必须在一个数据库上工作，其中有许多引用不存在的表和列的存储过程和视图。如何获取无效对象（表、列）的列表，以便我可以相应地修复它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T07:30:17.863

您可以使用Red Gate 的[SQL 提示符](http://www.red-gate.com/products/sql-development/sql-prompt/)。它具有*查找无效对象*功能，可识别引用不存在对象的存储过程和视图（以及其他）并告诉您原因。

SQL Prompt 是一种商业产品——不过，您可以使用其 14 天的全功能免费试用期来立即整理您的数据库。

免责声明：我为 Red Gate 工作（在 SQL Prompt 团队中）。

# objective-c - 在标头和实现中声明方法原型

> ID：11114641
> 
> 赞同：1
> 
> 时间：2012-06-20T07:18:44.933
> 
> 标签：objective-c, ios5, coding-style, implementation, declaration

我正在从斯坦福在线课程中学习面向对象的编程，其中有一部分关于声明我不确定。我以为你必须总是在头文件中声明原型，然后在实现文件中编写代码，但是教授在实现中写了一个方法，而在头文件中没有声明原型，怎么会？

另外，有人可以澄清一下私有和公共之间的区别，以及没有原型的方法是公共的还是私有的？没有原型的方法不是来自超类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T07:24:49.310

如果您在头文件中编写该方法，则它是公共的并且可供其他类/对象访问。如果您没有在头文件中声明它，则该方法是一个私有方法，这意味着您可以在您的类内部访问它，但没有其他类可以使用此方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T07:33:31.510

这是一种完全合法的方式来声明不能在类实现本身之外使用的方法。

只要方法在使用它们的方法之前，编译器就会在实现文件中找到方法。然而，情况并非总是如此，因为新的 LLVM 编译器允许以任何顺序声明方法并从给定文件中引用。

在实现文件中声明方法有几种不同的风格：

```
//In the Header File, MyClass.h
@interface MyClass : NSObject
@end

//in the implementation file, MyClass.m
//Method Decls inside a Private Category
@interface MyClass (_Private)
    - (void)doSomething;
@end

//As a class extension (new to LLVM compiler)
@interface MyClass ()
    - (void)doSomething;
@end

@implementation MyClass
//You can also simply implement a method with no formal "forward" declaration
//in this case you must declare the method before you use it, unless you're using the
//latest LLVM Compiler (See the WWDC Session on Modern Objective C)
- (void)doSomething {
}

- (void)foo {
    [self doSomething];
}
@end 
```

# regex - Markdown 到 BBCode 的正则表达式（简单）

> ID：11114647
> 
> 赞同：1
> 
> 时间：2012-06-20T07:19:10.003
> 
> 标签：regex, markdown, bbcode

假设我有一个 Markdown 字符串：

```
* Bullet has *bold [code]*test[/code] part*. *Another\nbold* item. 
```

我想将其转换为 BBCode，例如：

```
* Bullet has [b]bold [code]*test[/code] part[/b]. [b]Another\nbold[/b] item. 
```

...并且，正如您在上面所说的，保留 [code] 中的内容。我将如何做到这一点？

**背景**

看，我正在尝试调整 FluxBB 论坛。它默认允许 BBCode。但是，我还想允许新手使用 Markdown 的一小部分，例如粗体和斜体。至少对于粗体，这可以通过如下语句实现：

```
$out = preg_replace('/\*(\S.*?\S)\*/s','[b]$1[/b]',$in); 
```

...但是该部分也有问题`*test`，它也想翻译它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:02:35.710

以下代码似乎有效。我保留使用`preg_replace_callback()`and `bin2hex()`，然后`pack()`通过另一个`preg_replace_callback()`.

```
$a = "* Bullet\n* Bullet has *bold [code]*test[/code] part*. *Another\nbold* item.";
echo $a;
echo "\n";
// PRESERVE CODE BLOCK
$a = preg_replace_callback('/\[code\](.*?)\[\/code\]/s',create_function('$a','return "[code]" . bin2hex($a[1]) . "[/code]";'),$a);
// HANDLE MARKDOWN FOR BOLD
$a = preg_replace('/\*(\S.*?\S)\*/s','[b]$1[/b]',$a);
// RESTORE CODE BLOCK
$a = preg_replace_callback('/\[code\](.*?)\[\/code\]/s',create_function('$a','return "[code]" . pack("H*",$a[1]) . "[/code]";'),$a);
echo $a;
echo "\n"; 
```

# c# - 如何通过 X% 匹配 2 个字符串（即 >90% 匹配）

> ID：11114651
> 
> 赞同：3
> 
> 时间：2012-06-20T07:19:18.490
> 
> 标签：c#, java, javascript, regex

例如：

`S1: "some filename contains few words.txt"`
`S2: "some filename contains few words - draft.txt"`
`S3: "some filename contains few words - another draft.txt"`
`S4: "some filename not contains few words.txt"`

需要注意的是，我可以获得第一个字符串的 S2 或 S3 以及其他匹配的字符串。

编辑：我有“主”字符串，我需要找到匹配项。

可以说，在第一轮中，我发现了错别字。

现在我只需要匹配整个单词。

我希望能够确定 7 个单词中有 5 个匹配，或者 10 个单词中有 7 个匹配。“X out of Y”的确切数量不太重要。

重要的是如何找到不同的 X 个单词，无论它们在句子中的哪个位置。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T07:30:14.917

这不是正则表达式问题。

你不指定语言，但如果你使用 java，有[`getLevenshteinDistance`](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#getLevenshteinDistance%28java.lang.String,%20java.lang.String%29)StringUtils 的方法。从javadocs：

> 求两个字符串之间的 Levenshtein 距离。
> 
> 这是将一个字符串更改为另一个字符串所需的更改次数，其中每次更改都是单个字符修改（删除、插入或替换）。

用法：

```
int distance = StringUtils.getLevenshteinDistance(
    "some filename contains few words.txt",
    "some filename not contains few words.txt"
); 
```

要匹配某个百分比，您必须确定哪个字符串是“主”字符串，因为输入字符串可以有不同的长度：`distance`可能都是删除，所以`"cat"`和`"cataract"`的距离为`5`. 定义“90% 匹配”应该是什么也有点困难。看看我们的`cat`例子；100% 的字符串“cat”出现在“cataract”中，但它们不是完全相同的字符串。您必须根据您的用例来决定这些规则。

**更新**

如果您的“差异”应该是基于单词的，那么在单词边界上拆分字符串并`Map`从结果单词构造 a 到每个单词的计数会相对容易。比较每个字符串生成的地图应该会给你一个粗略的“相似性”测量。例如：

```
public HashMap<String, Integer> countWords(String str) {
    HashMap<String, Integer> counts = new HashMap<String, Integer>();
    for(String s : str.split("\\s+")) {
        if(!s.isEmpty()) {
            if(counts.containsKey(s)) {
                counts.put(s, counts.get(s) + 1);
            } else {
                counts.put(s, 1);
            }
        }
    }
    return counts;
}

// ...

String s1 = "some filename contains few words.txt";
String s2 = "some filename not contains few words.txt";
HashMap<String, Integer> s1Counts = countWords(s1);
HashMap<String, Integer> s2Counts = countWords(s2);
// assume s1 is "master" string, count the total number of words
int s1Total = 0, s2Total = 0;
for(Integer i : s1Counts.values()) {
    s1Total += i;
}
// iterate over words in s1, find the number of matching words in s2
for(Map.Entry<String, Integer> entry : s1Counts.entrySet()) {
    if(s2Counts.containsKey(entry.getKey())) {
        if(s2Counts.get(entry.getKey()) >= entry.getValue()) {
            s2Total += entry.getValue();
        } else {
            s2Total += s2Counts.get(entry.getKey());
        }
    }
}
// result
System.out.println(s2Total + " out of " + s1Total + " words match."); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-26T20:16:35.387

我认为值得一提的是看一下 Apache commons-text 类[JaroWinklerDistance](https://commons.apache.org/proper/commons-text/javadocs/api-release/org/apache/commons/text/similarity/JaroWinklerDistance.html)

```
Find the Jaro Winkler Distance which indicates the similarity score between two CharSequences.
 distance.apply(null, null)          = IllegalArgumentException
 distance.apply("","")               = 0.0
 distance.apply("","a")              = 0.0
 distance.apply("aaapppp", "")       = 0.0
 distance.apply("frog", "fog")       = 0.93
 distance.apply("fly", "ant")        = 0.0
 distance.apply("elephant", "hippo") = 0.44
 distance.apply("hippo", "elephant") = 0.44
 distance.apply("hippo", "zzzzzzzz") = 0.0
 distance.apply("hello", "hallo")    = 0.88
 distance.apply("ABC Corporation", "ABC Corp") = 0.93
 distance.apply("D N H Enterprises Inc", "D & H Enterprises, Inc.") = 0.95
 distance.apply("My Gym Children's Fitness Center", "My Gym. Childrens Fitness") = 0.92
 distance.apply("PENNSYLVANIA", "PENNCISYLVNIA")    = 0.88 
```

# sqlite - 如何避免未处理的异常：System.EntryPointNotFoundException：在 monodroid

> ID：11114653
> 
> 赞同：0
> 
> 时间：2012-06-20T07:19:38.290
> 
> 标签：sqlite, xamarin.android

我正在使用以下代码

创建数据库 oncreate

```
 private void chech_database_exist_or_not()
    {

        string dbPath = Path.Combine(System.Environment.GetFolderPath(System.Environment.SpecialFolder.Personal), "validation.db3");
        bool exists = File.Exists(dbPath);
        if (!exists)
            SqliteConnection.CreateFile(dbPath);
        var connection = new SqliteConnection("Data Source=" + dbPath);
        connection.Open();
        if (!exists)
        {
            // This is the first time the app has run and/or that we need the DB.
            // Copy a "template" DB from your assets, or programmatically create one.
            var commands = new[]{

      "CREATE TABLE [user_detail] (_id integer NOT NULL PRIMARY KEY AUTOINCREMENT,user_name varchar,pass varchar,designation varchar,email varchar);",

    "insert into user_detail(user_name,pass) values('testuser','testpass') "

            };
            foreach (var command in commands)
            {
                using (var c = connection.CreateCommand())
                {
                    c.CommandText = command;
                    c.ExecuteNonQuery();
                }
            }
        }

        connection.Close();

    } 
```

在按钮上单击我调用下面的函数

```
 private  bool validate_user(string username, string password)
    {
        bool i;
        i = true;
        string str;

        DataTable dt = new DataTable();
        string dbPath1 = System.IO.Path.Combine(System.Environment.GetFolderPath(System.Environment.SpecialFolder.Personal), "validation.db3");

        SqliteConnection con = new SqliteConnection("Data Source=" + dbPath1);
        str = "select pass from user_detail where user_name='" + username + "' and pass='" + password + "'";
        SqliteCommand cmd = new SqliteCommand(str, con);
       // SqliteDataAdapter da = new SqliteDataAdapter(cmd);

        FillDatatable(cmd, dt);

        if (dt != null)
        {
            if (dt.Rows.Count > 0)
            {
                i = true;

            }
            else
            {
                i = false;
            }

        }
        else
        {
            i = false;
        } 

        return i;

    } 
```

我使用以下课程

```
using System;
using Android.App;
using Android.Content;
using Android.Runtime;
using Android.Views;
using Android.OS;
using Mono.Data.Sqlite;
using System.Data;
using System.IO;
using Android.InputMethodServices; 
```

谁能帮助我为什么会收到此错误以及如何克服它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:32:33.370

取自我对[这个问题](https://stackoverflow.com/questions/8329593/system-entrypointnotfoundexception-on-sqldataadapter-fill-method)的回答：

> 不幸的是，Android 的 SQLite 库不支持 sqlite3_column_origin_name() 方法，因此依赖它的 Mono.Data.Sqlite 的任何部分都会失败。Xamarin 在 [此处](http://bugzilla.xamarin.com/show_bug.cgi?id=2128)跟踪了一个错误，用于修改实现以绕过限制，但据我所知，还没有时间表。

问题中的代码不包括 的实现`FillDatatable()`，但我猜测调用`DataTable.Fill()`已知存在此问题。目前的解决方法基本上只是为了避免使用依赖于 Android 中缺少的功能的 ADO.NET 部分，例如`DataTable.Fill()`.

# c# - HashTable 数据结构替代方案，它使用更少的内存

> ID：11114657
> 
> 赞同：0
> 
> 时间：2012-06-20T07:19:56.600
> 
> 标签：c#, data-structures

我有大量的对象。每个对象都有一个唯一的 GUID。我需要这个 GUID 的地图对象。我现在使用 System.Collections.Hashtable。问题是添加对象 hashset 会改变其大小并导致大对象堆的碎片。它也需要两倍于我拥有的对象的内存。我需要减少内存使用量。

我需要的数据结构的特点：

*   添加对象
*   按 ID 移除对象
*   按 ID 查找对象
*   运行数据结构中的所有对象（foreach）

为此目的最好的数据结构是什么？我知道有红黑树和 AVL 树，但我不知道哪种树更好用。也许还有另一种适合通过唯一标识符或字符串映射的树数据结构？哪种数据结构工作得更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:27:31.663

哈希表中的 500,000 个条目实际上并不多。只需告诉哈希表在您创建它时它会很大：

```
var myDict = new Dictionary<key,val>(1000000); 
```

这将创建一个可容纳近 1,000,000 个元素的字典。当您接近 1,000,000 时，它将调整大小。旧的非泛型`Hashtable`为您提供更多控制，允许您指定负载因子来控制重新分配。看[这里](http://msdn.microsoft.com/en-us/library/aa318157%28v=vs.71%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T07:25:37.833

数据结构是静态的还是动态的？如果它是静态的，请考虑使用[完美散列](http://en.wikipedia.org/wiki/Perfect_hash_function)。您将获得哈希表的好处，而无需太多内存开销。

不要指望树来解决您的问题……它们也具有相当高的内存开销，并且查询和更新的速度往往较慢。

# c++ - pantheios 会捕获段错误吗？

> ID：11114658
> 
> 赞同：0
> 
> 时间：2012-06-20T07:20:00.580
> 
> 标签：c++, segmentation-fault, pantheios

我在 C++ 中使用 pantheios 日志库，我没有发现 pantheios 是否可以捕获段错误，然后在退出之前强制打印缓冲区数据。

我可以捕捉到段错误，但我没有找到最终打印包含我的日志的缓冲区的方法。

Rgds,

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T07:28:19.533

我很确定图书馆尝试注册信号处理程序是不好的做法，所以如果 pantheios 这样做我会感到惊讶。

如果你认为你可以有效地处理它，你应该自己捕捉信号。您确定有一个待清空的日志缓冲区，并且不是尝试记录一些首先触发段错误的数据的操作吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T08:54:49.287

我担心这里有一个可怕的误解：您了解导致段错误的原因吗？

在普通情况下，段错误是由空取消引用引起的。这很容易解决，因为问题通常很容易发现。

然而，在令人讨厌的情况下，内存损坏会触发段错误，该内存损坏会在您期望常规指针的地方写入垃圾，并导致您尝试访问您不应该拥有的内存。

现在，假设您为段错误注册了一个处理程序。显然，您无法区分您是在微不足道的情况下还是令人讨厌的情况下，因此您应该假设内存已损坏并且您无法信任它...

> 是什么让您认为日志消息不会被破坏？

*没有理智的图书馆应该尝试处理段错误。*

如果发生段错误，请将内存状态转储到核心转储文件中并严重崩溃。如果你不能相信记忆，那么无论如何你都无法采取任何有意义的行动。

# java - org.xml.sax.SAXParseException：*VALID* XML 的文件过早结束

> ID：11114665
> 
> 赞同：56
> 
> 时间：2012-06-20T07:20:32.313
> 
> 标签：java, xml, xml-parsing

我越来越奇怪“文件过早结束”。最近几天在我们的一台服务器上例外。*相同*的配置 XML 在另一台服务器上工作正常。我们在这两台服务器上都使用 Tomcat 5.0.28。这段代码已经工作了很长时间（7 年以上），只是在最近的服务器崩溃之后，我们在其中一台服务器上遇到了这个问题。XML 和 Java 解析代码没有变化。:(

我能看到的唯一区别是 Java 版本 -

**问题服务器** java 版本 "1.6.0_16" Java(TM) SE Runtime Environment (build 1.6.0_16-b01) Java HotSpot(TM) 64-Bit Server VM (build 14.2-b01, mixed mode)

**工作服务器** java 版本“1.6.0_07” Java(TM) SE 运行时环境（构建 1.6.0_07-b06） Java HotSpot(TM) 64 位服务器 VM（构建 10.0-b23，混合模式）

这是已经工作了几年的Java代码 -

```
private void readSource(final InputSource in ) {
    try {
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document doc = db.parse(in);
        Element elt = doc.getDocumentElement();

        this.readElement( elt );
    } catch ( Exception ex ) {
        ex.printStackTrace();
        throw new ConfigurationException( "Unable to parse configuration information", ex );
    }
} 
```

这是一个例外。

```
[Fatal Error] :-1:-1: Premature end of file.
org.xml.sax.SAXParseException: Premature end of file.
        at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)
        at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source)
        at com.circus.core.Configuration.readSource(Configuration.java:706) 
```

我已经尝试过验证 XML 并没有发现任何错误。知道我还能在哪里寻找可能的问题吗？

任何指针将不胜感激！

TIA, - 马尼什

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-12-06T21:29:18.633

这是 Java InputStream 的问题。当文件偏移位置计数器移动到文件末尾时读取流时。在随后使用相同的流读取时，您将收到此错误。因此，您必须再次关闭并重新打开流或调用`inputStream.reset()`将偏移计数器重置为其初始位置。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-02-11T10:17:31.800

这解决了。问题出在其他地方。cron 作业中的另一个代码是将 XML 截断为长度为 0 的文件。我已经处理好了。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2016-10-14T09:35:49.583

只有在解析空字符串/空字节数组时才会发生此异常。

以下是有关如何重现它的片段：

```
String xml = ""; // <-- deliberately an empty string.
ByteArrayInputStream xmlStream = new java.io.ByteArrayInputStream(xml.getBytes());
Unmarshaller u = JAXBContext.newInstance(...)
u.setSchema(...);
u.unmarshal( xmlStream ); // <-- here it will fail 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-06-11T10:49:55.597

请确保`inputstream`在解析之前您没有在任何地方使用您的任何内容。示例代码如下：下面的响应是`httpresponse`（即响应），主要内容是包含在里面`StringEntity (i.e. getEntity())in form of inputStream(i.e. getContent())`。

```
InputStream rescontent = response.getEntity().getContent();
tsResponse=(TsResponse) transformer.convertFromXMLToObject(rescontent ); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-08-11T22:30:13.763

如果输入流未正确关闭，则可能会发生此异常。确保：如果使用的输入流未以某种方式使用“之前”，那么您打算阅读的位置。即，如果在单个操作中从同一输入流中第二次读取，则第二次调用将获得此异常。还要确保在 finally 块或类似的东西中关闭输入流。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-20T20:54:43.020

您确定 XML 文件的字符编码正确吗？`FileReader`始终使用平台默认编码，因此如果“工作”服务器的默认编码为（例如）ISO-8859-1，而“问题”服务器使用 UTF-8，如果 XML 包含任何非 ASCII，您将看到此错误人物。

如果您从 FileInputStream 而不是 FileReader 创建 InputSource，它会起作用吗？

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-12-06T17:28:58.673

2021 年 12 月 6 日再次出现同样的错误！！！

样本痕迹：

```
XmlBeanDefinitionStoreException: Line -1 in XML document from ServletContext resource [<here a reference to spring context .xml file>] is invalid; nested exception is org.xml.sax.SAXParseException; Premature end of file.
Caused by: org.xml.sax.SAXParseException; Premature end of file.
at org.apache.xerces.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:201)
at org.apache.xerces.util.ErrorHandlerWrapper.fatalError(ErrorHandlerWrapper.java:175)
at org.apache.xerces.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:398)
at org.apache.xerces.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:325)
at org.apache.xerces.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:282)
at org.apache.xerces.impl.XMLVersionDetector.determineDocVersion(XMLVersionDetector.java:204)
at org.apache.xerces.impl.xs.opti.SchemaParsingConfig.parse(SchemaParsingConfig.java:576)
at org.apache.xerces.impl.xs.opti.SchemaParsingConfig.parse(SchemaParsingConfig.java:679)
at org.apache.xerces.impl.xs.opti.SchemaDOMParser.parse(SchemaDOMParser.java:527)
at org.apache.xerces.impl.xs.traversers.XSDHandler.getSchemaDocument(XSDHandler.java:2148)
at org.apache.xerces.impl.xs.traversers.XSDHandler.parseSchema(XSDHandler.java:557) 
```

**提示：**

1.  Apache CAMEL 团队决定按照 XML Spring 上下文中通常引用的方式重新组织 CAMEL 模式文件。他们不只是删除（这将需要一个简单的例外，很容易发现）[http://camel.apache.org/schema/spring/camel-spring-2.16.4.xsd](http://camel.apache.org/schema/spring/camel-spring-2.16.4.xsd)通常的模式位置，他们实现了一个 HTTP 301将响应重定向到 HTTPS。

2.  Apache XERCES 库在 HTTP 301 的情况下不会引发错误，但假定它已收到一个空文件！这需要奇怪和错误的异常/将您置于错误的轨道上，因为它们报告链接到顶级 XML 文件的故障，而不是实际有问题的架构描述符

3.  在我们的应用服务器平台中，在 WAR 重新加载/部署时（来自数据/内容 repo 缓存）对所有模式描述符及其 XSD 依赖项的完全重新验证是完全出乎意料的……而且完全没用！更糟糕的是：创建运行时公共网络依赖项，仅用于重新加载已验证的组件和描述符（在构建时）

1+2+3 以上，砰！主要服务中断：生产服务器无法重新加载依赖于 CAMEL 的任何组件

**固定装置：**

两名候选人：

a) 在 XML 中的 xsi:schemaLocation 属性中，只需将“s”添加到[http://camel.apache.org/schema/etc](http://camel.apache.org/schema/etc)变为 https://.... 但接受对每个组件的公共网络依赖重新加载

b) 用 classpath: 替换所有 http://... shema 位置。您将下载所有 XSD 和子依赖模式，并将它们与 WAR 一起部署，以确保对类加载器的可见性。例如，将文件放入 java/main/resources/somename.xsd 并提供 classpath:somename.xsd 作为模式位置路径

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-10-26T12:51:32.353

在我们的例子中，它是一个空的**AndroidManifest.xml**。

在升级 Eclispe 时，我们遇到了[常见的问题](https://stackoverflow.com/questions/24437564/update-eclipse-with-android-development-tools-v-23)，并且 AndroidManifest.xml 必须在被破坏后被构建脚本签入到 SVN。

通过从 Eclipse 内部而不是从命令行编译找到它。

# jquery - 我无法在 Jquery 验证插件中验证表单

> ID：11114668
> 
> 赞同：0
> 
> 时间：2012-06-20T07:20:50.313
> 
> 标签：jquery, validation, jquery-validate

我一直在尝试验证此表格：

```
<table>
<form action="test.html" method="post" id="contactform" name="contactform">
<tr>
    <td>
    <label for="fname">First Name :</label>
    </td>

    <td>
    <input name="fname" id="fname" type="text" /> 
    </td>
</tr>
<tr>
    <td>
    <label for="lname">Last Name :</label>
    </td>

    <td>
     <input name="lname" id="lname" type="text" /> 
    </td>
</tr>

<tr>
    <td>
     <label for="gender">Gender :</label>
    </td>

    <td>
     <input name="gender" id="genderm" type="radio" /> Male  <input name="gender" id="genderf" type="radio" /> Female
    </td>

</tr>

<tr>
    <td>
      <label for="email">Email :</label> 
    </td>

    <td>
     <input name="email" id="email" type="text" /> 
    </td>
</tr>

<tr>
    <td>
    <label for="address">Address :</label>
    </td>

    <td>
    <input name="addr" id="addr" type="text" /> 
    </td>
</tr>

<tr>
    <td>
    <label for="mob">Mobile Phone :</label>
    </td>

    <td>
    <input name="mob" id="mob" type="text" /> 
    </td>
</tr>

<tr>
    <td>
     <label for="dob">Date Of Birth (mm/dd/YYYY):</label>
    </td>

    <td>
    <input name="dob" id="dob" type="text" />     
    </td>
</tr>

<tr>
    <td>
     <label for="agreeT">By Checking This you agree to our Terms  :</label>
    </td>

    <td>
     <input name="agreeT" id="agreeT" type="checkbox" />

    </td>
</tr>

   <tr>
    <td>
     <input type="submit" value="Sumbit" />
    </td>

</tr> 
```

但我无法使用 Jquery Validation Plugin 验证它我在我的文件中添加这些脚本代码：

```
<script src="jquery.js"></script>
<script src="jquery.validate.js"></script>

<script language="javascript">

$(document).ready(function(e) {

    var validator = $("#contactform").validate({ 

    rules : {
        fname: "required",
        lname: "required",
        email: {
            email: true,
            required: true
        },
        gender:" required",
        addr: "required",
        dob: {
            required: true,
            date: true
        },
        agreeT: "required"
    }

    }
    );

});

</script> 
```

谁能告诉我为什么我要在不验证表单的情况下访问 test.html....？？有语法错误吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T07:28:54.337

工作代码..检查::---

你试一试： -

要遵循的步骤：-

1.  您必须查看源代码并查看是否有任何脚本不正常。
2.  尝试调试您的错误或警告。
3.  检查您是否传递了正确的 id 。
4.  尝试检查您的插件
5.  尝试显示您的错误消息。

您的 HTML 代码：-

```
<form action="test.html" method="post" id="contactform" name="contactform">
    <table>

<tr>
    <td>
    <label for="fname">First Name :</label>
    </td>

    <td>
    <input name="fname" id="fname" type="text" /> 
    </td>
</tr>
<tr>
    <td>
    <label for="lname">Last Name :</label>
    </td>

    <td>
     <input name="lname" id="lname" type="text" /> 
    </td>
</tr>

<tr>
    <td>
     <label for="gender">Gender :</label>
    </td>

    <td>
     <input name="gender" id="genderm" type="radio" /> Male  <input name="gender" id="genderf" type="radio" /> Female
    </td>

</tr>

<tr>
    <td>
      <label for="email">Email :</label> 
    </td>

    <td>
     <input name="email" id="email" type="text" /> 
    </td>
</tr>

<tr>
    <td>
    <label for="address">Address :</label>
    </td>

    <td>
    <input name="addr" id="addr" type="text" /> 
    </td>
</tr>

<tr>
    <td>
    <label for="mob">Mobile Phone :</label>
    </td>

    <td>
    <input name="mob" id="mob" type="text" /> 
    </td>
</tr>

<tr>
    <td>
     <label for="dob">Date Of Birth (mm/dd/YYYY):</label>
    </td>

    <td>
    <input name="dob" id="dob" type="text" />     
    </td>
</tr>

<tr>
    <td>
     <label for="agreeT">By Checking This you agree to our Terms  :</label>
    </td>

    <td>
     <input name="agreeT" id="agreeT" type="checkbox" />

    </td>
</tr>

   <tr>
    <td>
     <input type="submit" value="Sumbit" />
    </td>

</tr> </table>
    </form> 
```

你的js代码： -

```
<script type="text/javascript">

$().ready(function() {
    $("#contactform").validate({ 

    rules : {
        fname: "required",
        lname: "required",
        email: {
            email: true,
            required: true
        },
        gender:" required",
        addr: "required",
        dob: {
            required: true,
            date: true
        },
        agreeT: "required"
    },
messages: {
    fname: "Please enter your name",
    lname: "Please enter your last name",
    email: "Please enter a valid email address"
}
    });

});

</script> 
```

- - - - - - 或者 - - - - - - - - - -

```
 <script language="javascript">
$(document).ready(function() {
    $("#contactform").validate({ 

rules : {
    fname: {required: true},
    lname: {required: true},
    email: {
        email: true,
        required: true
    },
    gender:{required: true},
    addr: {required: true},
    dob: {
        required: true,
        date: true
    },
    agreeT:{required: true}
},
messages: {
    fname: "Please enter your name",
    lname: "Please enter your last name",
    email: "Please enter a valid email address"
} 
```

}); });

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T09:05:43.397

只是搬出`<form..>`去`<table>` 喜欢...

```
<form ...>
   <table>
   ...
   </table>
</form> 
```

希望它有效

# iphone - 将子视图添加到 UITableViewCell：滚动时添加了几次

> ID：11114674
> 
> 赞同：1
> 
> 时间：2012-06-20T07:21:31.170
> 
> 标签：iphone, ios, xcode, uitableview

我的 tableView 中有一些不同的单元格，每个单元格都有不同的子视图。每次一个单元格消失和重新出现时，子视图都会添加到旧视图之上，并且还会添加到其他单元格中。在不使用自定义单元格的情况下向单元格添加子视图的正确方法是什么？

提前致谢

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"StatisticsCell";

    StatisticsCell *cell = (StatisticsCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {        
        NSArray *topLevelObject = [[NSBundle mainBundle] loadNibNamed:@"StatisticsCell" owner:nil options:nil]; 
        for (id currentObject in topLevelObject)
        {
            if ([currentObject isKindOfClass:[UITableViewCell class]])
            {
                cell = (StatisticsCell *)currentObject; 

                break; 
            }
        }
    }

    if (indexPath.section == 0 && indexPath.row == 0)
    {
       //Add a subview here 
       [cell addsubview .... 
    }
    else if (indexPath.section == 0 && indexPath.row == 1)
    {
         //Add a subview here 
         [cell addsubview .... 
    }

     etc.... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T07:26:12.720

每当您滚动单元格以调用行方法时，因此当您的单元格可见时，它将向单元格添加子视图。放置一个已添加视图的检查，创建一个 bool 的 ivar，并在添加视图时将其设置为 true，在删除时将其设置为 false。像这样：

```
.
.
.

 if (indexPath.section == 0 && indexPath.row == 0 && isFirstViewAlreadyAdded== NO)
    {
       //Add a subview here 
       [cell addsubview .... 
       isFirstViewAlreadyAdded = YES;
    }
    else if (indexPath.section == 0 && indexPath.row == 1 && isSecondViewAlreadyAdded == NO)
    {
         //Add a subview here 
         [cell addsubview .... 
       isSecondViewAlreadyAdded = YES;

    }

.
.
. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T07:22:38.003

您可以检查该 subView 是否已添加到单元格中。

```
UIView *subView = [tableCell viewWithTag:tagOfYourSubView];    
if (subView) {
     //subView exists
}
else {
     //subView does not exist
} 
```

如果没有添加，则可以添加。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T07:55:35.150

不要每次都添加子视图。您应该在 if(cell==nil) 块中添加子视图。之后，您可以根据 indexpath.row 将 hidden 属性设置为 true 或 false。像：

```
if (indexpath.row == 0)
img1.hidden = FALSE;
else
img1.hidden = TRUE; 
```

# nginx - 使用 ngnix 下载 zip 的问题

> ID：11114675
> 
> 赞同：0
> 
> 时间：2012-06-20T07:21:33.420
> 
> 标签：nginx

我昨晚毫不费力地安装了ngnix。它可以毫无问题地提供 html 文件，但是当我添加一个 zip 文件并尝试下载它时，网络浏览器开始下载（它不会超过 0%），并且在 5 或 6 秒后它报告“下载文件错误”。我将 sendifle 选项设置为 on，并在同一目录中有一个 mime 类型的文件，该文件有一行“application/zi zip”，让浏览器知道如何处理 zip 文件。有人能猜到发生了什么吗？我有点沮丧。

如果我将 .zip 文件重命名为 .cfg ，则可以毫无问题地下载它。唯一的问题是 .zip 扩展名：/。这真的很奇怪。

提前致谢。

# java - 如何从树上获取面包屑？

> ID：11114678
> 
> 赞同：2
> 
> 时间：2012-06-20T07:21:45.990
> 
> 标签：java, tree, breadcrumbs

我有像下面的例子一样的树，每片叶子都是对象。

```
[1]
 |--[2]
 |   |--[3]
 |   |--[4]
 |       |--[5]
 |--[6] 
```

类结构是：

```
public class Node {
    private Integer id;
    private List<Node> children;
    public Integer getId()
    {
        return id;
    }
    public void setId(Integer id)
    {
        this.id = id;
    }
    public List<Node> getChildren()
    {
        return children;
    }
    public void setChildren(List<Node> children)
    {
        this.children = children;
    }
} 
```

如果选择叶子 3，则面包屑为 1 2 3。如何从这棵树创建面包屑？我知道如何递归地创建树，但我不知道如何为面包屑选择正确的叶子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T07:23:40.390

您需要在子级中使用父级指针。添加子节点时，父节点可以将子节点的父指针设置为自身。

```
public class Node {
    private Integer id;
    private Node parent;
    private List<Node> children;
    public Integer getId()
    {
        return id;
    }
    public void setId(Integer id)
    {
        this.id = id;
    }
    public List<Node> getChildren()
    {
        return children;
    }
    public void setChildren(List<Node> children)
    {
        this.children = children;
        for (Node child : children) {
            child.parent = this;
        }
    }
    public Node getParent() {
        return parent;
    }
} 
```

然后，您可以轻松地使用它从选定的叶节点构建您的面包屑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T07:23:20.097

您可以在创建过程中将父节点作为字段添加到每个节点。这样你就可以从每个对象到根。

# css - Django Compressor 不重新生成压缩的 CSS

> ID：11114679
> 
> 赞同：9
> 
> 时间：2012-06-20T07:21:50.440
> 
> 标签：css, django, minify, django-compressor

我在开发一块 css 文件时尝试使用 Django Compressor。我首先在一个文件周围放置 {% compress %} 标签，生成 f6527e81a37c.css。然后我在标签之间添加了两个 css 文件，但不是一个缩小文件，而是两个缩小文件：f6527e81a37c.css 和 ee906624f953.css。

最后，我想将所有 css 块合并并压缩成一个缩小文件，但是将更多文件移动到压缩标签中似乎不会重新生成与 css 文件关联的密钥，即它仍然压缩成多个 css 文件即使它们被包裹在同一个 {% compress %} 块中。

我尝试清除 Django 的 memcache，删除 Compressor 生成的 /static/CACHE/ 目录，并使用 Django Compressor 附带的 compress 管理命令，但是当我运行开发环境时，我仍然得到多个压缩的 css 文件。是否可以进行某种刷新，以便 Django Compressor 重新生成与 {% compress %} 块中的文件关联的 css 键？压缩器必须将以前的压缩文件密钥存储在某处。

压缩结果：

```
<link rel="stylesheet" href="/static/CACHE/css/f6527e81a37c.css" type="text/css" media="screen, projection" />
<link rel="stylesheet" href="/static/CACHE/css/ee906624f953.css" type="text/css" />
<link rel="stylesheet" href="/static/CACHE/css/7147db857125.css" type="text/css" media="screen, projection" />
<link rel="stylesheet" href="/static/CACHE/css/043e7d82b775.css" type="text/css" /> 
```

设置.py：

```
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
    #other
    'compressor.finders.CompressorFinder',
)
COMPRESS_ENABLED = True
COMPRESS_OFFLINE = True
COMPRESS_CSS_FILTERS = [
    #creates absolute urls from relative ones
    'compressor.filters.css_default.CssAbsoluteFilter',
    #css minimizer
    'compressor.filters.cssmin.CSSMinFilter'
]
COMPRESS_JS_FILTERS = [
    'compressor.filters.jsmin.JSMinFilter'
] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T08:33:58.380

为所有 CSS 声明设置相同`media`的属性会有所帮助。

结果是这样的：

```
<link rel="stylesheet" href="/static/CACHE/css/f6527e81a37c.css" type="text/css" media="all" /> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T17:49:48.937

我找到了答案：

Django Compressor 将 css 文件分解为属性中包含 media="screen, projection" 和不包含的那些文件。

感谢您的回复。

# java - 类的静态块中的Android getSharedPreferences

> ID：11114684
> 
> 赞同：1
> 
> 时间：2012-06-20T07:22:00.457
> 
> 标签：java, android, static, sharedpreferences

在我的应用程序中，我需要根据用户在 SharedPreference 变量中存储的值声明一个数组。问题是数组需要在静态块中声明，因为需要在我的类中调用 onCreate() 之前声明数组的大小。

我的 Activity 中有一个 ExpandableList，其父数组是接下来 7 天的日期。

```
static int plannerSlotCount=7;
static public String[] parent = new String[plannerSlotCount];
static
{

    Calendar cal = Calendar.getInstance();
    String strdate = null;
    SimpleDateFormat sdf = new SimpleDateFormat("dd-MM-yyyy");

    int i;
    for(i=0;i<plannerSlotCount;i++)
    {

        if (cal != null) {
            strdate = sdf.format(cal.getTime());
            }
            parent[i] = strdate;
            cal.add(Calendar.HOUR_OF_DAY,24);
    }

} 
```

如果我没有在静态块内声明数组，那么我会在

```
public View getGroupView(int groupPosition, boolean isExpanded,
            View convertView, ViewGroup parent) {
        TextView textView = getGenericView();
        textView.setText(getGroup(groupPosition).toString());
        return textView;
    } 
```

所以，我猜我必须在静态块本身中声明数组的内容。

问题是我想更改要显示的天数（当前设置为 7）。所以，我想到了将数字保存在 SharedPreference 变量中并访问它来初始化数组。

我面临的问题是

```
 SharedPreferences preferences = getSharedPreferences(Settings.PREF_SETTINGS_FILE_NAME, MODE_PRIVATE);
    final int slotCounter = preferences.getInt("slotCount", 7); 
```

给我一个错误说

```
Cannot make a static reference to the non-static method getSharedPreferences(String, int) from the type ContextWrapper 
```

有没有可能的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T07:36:35.650

你不能。由于

```
static {
} 
```

当您第一次引用该类时会调用块。所以，我认为，在`onCreate`si 打电话之前。为了访问`SharedPreference`，您需要一个`context`，并且.`context`之后有效`onCreate`。所以你不能`SharedPreference`在静态块中访问

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T07:28:29.483

首先，我不得不说你的方法听起来有点奇怪。为什么要将数组声明为静态并在 onCreate 之前对其进行初始化？如果这确实是一个要求，那么我不确定是否有解决方案，因为 onCreate() 是您第一次访问上下文。

我可以建议您将数组定义为静态，然后在 onCreate 中对其进行初始化（在使用之前）。除非该数组在您的活动之外使用，否则应该可以。

也许如果您分享更多细节（例如为什么它必须是静态的并在 onCreate 之前启动），您可以获得更多帮助。

# playframework - 我怎么能叫Play！没有渲染（）的框架模板？

> ID：11114685
> 
> 赞同：1
> 
> 时间：2012-06-20T07:22:00.343
> 
> 标签：playframework, playframework-1.x

我的Play Framework 应用程序的*app/views/Application/movie.json*下有一个 JSON 模板。

通常您使用 render() 来访问此模板，但这需要向服务器发出请求。如何在不执行其他请求的情况下使用此模板服务器端并获取 JSON 输出？有没有类似的东西`JsonArray movies = Templates.render("movie.json")`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T07:50:25.287

```
Map<String, Object> params = new HashMap<String, Object>();
// prepare your template arguments
String s = TemplateLoader.load("Application/movie.json").render(params);
// the string s is the rendered output, you can do further processing 
// to convert it into JSON object 
```

# math - 动态无法正常工作

> ID：11114686
> 
> 赞同：0
> 
> 时间：2012-06-20T07:22:04.123
> 
> 标签：math, wolfram-mathematica, mathematica-frontend

我在使用 Mathematica 中的 Dynamic 命令时遇到了一些问题，下一个代码显示了函数 f(x) = 1 - x^2 的交互式图形。图形的标题还显示了使用滑块修改的曲线（定积分）下的当前区域。

```
 Manipulate[Show[Plot[1 - x^2, {x, 0, 1}, PlotLabel -> Integrate[1 - x^2, {x, 0, Limite - 0.000000000001}]],   
 Plot[-x^2 + 1, {x, 0, Limite}, PlotRange -> {0, 1}, Filling -> Axis] ], {Limite, 0.000000000001, 1}, LocalizeVariables -> False] 
```

我想使用以下命令显示当前区域：

```
Integrate[1 - x^2, {x, 0, Dynamic[Limite]}] 
```

但结果不是我所期望的。Mathematica 像这样评估这 `0.529 - (0.529)^3 / 3` 是正确的，但我不明白为什么它显示一个表达式而不是单个数字。`//FullSimplify`and命令并`//N`不能解决问题。

有没有更好的方法来获得结果？

我是否正确使用了动态命令？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:20:36.780

在您的示例中，使用符号上限执行一次 Integrate 命令。当该上限的值发生变化时，不会重新计算积分。如果您从迭代器规范中移动 Dynamic[] 包装器并将其包装在 Integrate 命令周围，您将获得所需的结果，这将导致在 Limite 更改时重新计算积分。

```
Dynamic[Integrate[1 - x^2, {x, 0, Limite}]] 
```

# java - 如果 hashCode() 没有被覆盖，HashSet 允许重复项插入

> ID：11114693
> 
> 赞同：22
> 
> 时间：2012-06-20T07:22:26.707
> 
> 标签：java

```
class temp {
int id;

public int getId() {
  return id;
}

temp(int id) {
  this.id = id;
}

public void setId(int id) {
  this.id = id;
}

@Override
public boolean equals(Object obj) {
  if (this == obj)
      return true;
  if (obj == null)
      return false;
  if (getClass() != obj.getClass())
      return false;
  temp other = (temp) obj;
  if (id != other.id)
      return false;
  return true;
}
}

public class testClass {

    public static void main(String[] args) {
      temp t1 = new temp(1);
      temp t2 = new temp(1);
      System.out.println(t1.equals(t2));
      Set<temp> tempList = new HashSet<temp>(2);
      tempList.add(t1);
      tempList.add(t2);
      System.out.println(tempList);
} 
```

该程序将这两个元素都添加到 Set 中。一开始我很震惊，因为在添加 set 方法时，调用了 equals 方法。

但后来我覆盖了 hashCode 方法：

```
@Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + id;
        return result;
    } 
```

然后它没有添加。这是令人惊讶的，因为 Set 和 add() 方法的 Javadoc 说它在添加到 Set 时只检查 equals()。

这是 add() 的 javadoc：

```
/**
     * Adds the specified element to this set if it is not already present.
     * More formally, adds the specified element <tt>e</tt> to this set if
     * this set contains no element <tt>e2</tt> such that
     * <tt>(e==null&nbsp;?&nbsp;e2==null&nbsp;:&nbsp;e.equals(e2))</tt>.
     * If this set already contains the element, the call leaves the set
     * unchanged and returns <tt>false</tt>.
     *
     * @param e element to be added to this set
     * @return <tt>true</tt> if this set did not already contain the specified
     * element
     */
    public boolean add(E e) {
      return map.put(e, PRESENT)==null;
    } 
```

然后我意识到 HashSet 是作为 HashMap 实现的，并且在 map 中，对象的 hashCode 用作键。因此，如果您不覆盖 hashCode，它将使用不同的键来处理它们。

这不应该在 add() 方法或 HashSet 的文档中吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-20T07:24:53.387

它有点记录在案。请参阅[java.lang.Object](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html)的文档，其中说`hashCode()`：

> 如果两个对象**根据 equals(Object)**方法相等，则对两个对象中的每一个调用**hashCode 方法必须产生相同的整数**结果。

此外，在该`Object.equals(Object)`方法的文档中还可以找到以下内容：

> 请注意，每当重写该方法时，通常都需要重写 hashCode 方法，以维护 hashCode 方法的一般约定，即**相等的对象必须具有相等的哈希码**。

换句话说，如果与你的班级在一起时`instanceA.equals(instanceB) == true`，`instanceA.hashCode() != istanceB.hashCode()`你实际上违反了 Object 班级的合同。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-20T07:25:53.730

只需看看`equals()`文档：

> 请注意，每当重写该方法时，通常都需要重写 hashCode 方法，以维护 hashCode 方法的一般约定，即**相等的对象必须具有相等的哈希码**。

事实是，`equals()`和`hashCode()`密切相关。与其中之一一起工作时应始终考虑两者，以避免这些一致性问题。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-20T07:26:36.517

如果你覆盖 equals()，你也**必须**覆盖 hashCode()。

对 equals() 和 hashCode() 的行为施加了一些限制，这些限制在 Object. 特别是，equals() 方法必须具有以下属性：

*   对称性：对于两个引用，a 和 b，a.equals(b) 当且仅当 b.equals(a)
*   自反性：对于所有非空引用，a.equals(a)
*   传递性：如果 a.equals(b) 和 b.equals(c)，那么 a.equals(c)
*   与 hashCode() 的一致性：两个相等的对象必须具有相同的 hashCode() 值

有关更多详细信息，请参阅[此](http://www.ibm.com/developerworks/java/library/j-jtp05273/index.html)内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T07:30:33.857

他们（javadoc 家伙）可能已经预先假设当他们说（在`add()`方法的文档中`HashSet`）

```
(e==null ? e2==null : e.equals(e2)) 
```

这`hashCode()`对他们来说本质上是平等的。

# asp.net - Asp.Net 在中继器的特定行中设置控件？

> ID：11114698
> 
> 赞同：0
> 
> 时间：2012-06-20T07:22:56.570
> 
> 标签：asp.net, repeater, findcontrol

中继器代码：

```
<asp:Repeater ID="Repeater_sorular" runat="server" OnItemCommand="Repeater_sorular_ItemCommand"
        OnItemDataBound="Repeater_sorular_ItemBound">
        <HeaderTemplate>
        </HeaderTemplate>
        <ItemTemplate>
            <table>
                <tr>
                    <td>
                        <rad:RadChart ID="RadChart1" runat="server" DefaultType="Pie" Width="700" >
                            <PlotArea Appearance-FillStyle-FillType="Gradient" Appearance-FillStyle-MainColor="#D90420"
                                Appearance-FillStyle-SecondColor="#FFAD4A" Appearance-Border-Visible="false">
                                <EmptySeriesMessage>
                                    <TextBlock Text="Seçilen anket henüz oylanmamıştır.">
                                        <Appearance TextProperties-Font="Tahoma, 10pt, style=Bold">
                                        </Appearance>
                                    </TextBlock>
                                </EmptySeriesMessage>
                            </PlotArea>
                            <ChartTitle>
                                <TextBlock Appearance-TextProperties-Font="Tahoma">
                                </TextBlock>
                            </ChartTitle>
                            <Appearance ImageQuality="HighQuality" Border-Color="#DFDDDD" TextQuality="ClearTypeGridFit">
                            </Appearance>
                            <Series>
                                <rad:ChartSeries Type="Pie" Appearance-TextAppearance-TextProperties-Color="#FFFFFF"
                                    Appearance-TextAppearance-TextProperties-Font="Tahoma">
                                </rad:ChartSeries>
                            </Series>
                            <Legend Visible="True">
                                <TextBlock Visible="True">
                                </TextBlock>
                            </Legend>
                        </rad:RadChart>
                    </td>
                    <td>
                        <div style="font-weight: bolder; padding: 5px;">
                            <%#(((RepeaterItem)Container).ItemIndex+1).ToString() %>.
                            <%#Eval("Subject")%>
                        </div>
                        <asp:BulletedList ID="BulletedList_secenekler" runat="server" DataSource='<%#Eval("Secenekler")%>'
                            DataTextField="OptionName" DataValueField="OptionId" CssClass="sira_numarali">
                        </asp:BulletedList>
                    </td>
                </tr>
            </table>
        </ItemTemplate>
        <FooterTemplate>
        </FooterTemplate>
    </asp:Repeater> 
```

中继器ItemDataBound：

```
protected void Repeater_sorular_ItemBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
    {
        int SurveyId = Int32.Parse(Request.QueryString["anket_id"]);

        var sorular = from sr in db.TableSurveyQuestions
                      where sr.SurveyId == SurveyId
                      select sr;

        //int repeater_satir = 0;
        foreach (var soru in sorular)
        {
            RadChart RadChart1 = new RadChart();
            RadChart1 = (RadChart)e.Item.FindControl("RadChart1");

            ChartSeries s = RadChart1.Series.GetSeries(0);
            s.Appearance.LegendDisplayMode = ChartSeriesLegendDisplayMode.ItemLabels;
            s.Clear();
            s.Appearance.ShowLabels = true;
            s.Appearance.LabelAppearance.Dimensions.Margins.Bottom = 7;
            s.PlotArea.IntelligentLabelsEnabled = true;
            s.DataYColumn = "VoteCount";

            int oy_sayisi = 0;

            foreach (var secenek in soru.TableSurveyOptions)
            {
                int toplam_cevap_sayisi = secenek.TableSurveyVotes.Count;
                int dogru_cevap_sayisi = secenek.TableSurveyVotes.Where(a => a.VoteStatus == true).Count();
                double yuzde = ((double)dogru_cevap_sayisi / (double)toplam_cevap_sayisi) * 100;

                ChartSeriesItem seriesItem = new ChartSeriesItem();
                seriesItem.YValue = Math.Round(yuzde, 2);
                seriesItem.Name = secenek.OptionName;
                seriesItem.ActiveRegion.Tooltip = secenek.OptionName;
                seriesItem.Label.TextBlock.Text = secenek.OptionName + " %" + Math.Round(yuzde, 2).ToString();
                seriesItem.Appearance.Border.Color = Color.Silver;
                seriesItem.Appearance.FillStyle.FillType = Telerik.Charting.Styles.FillType.Solid;
                s.Items.Add(seriesItem);
                RadChart1.Series.Add(s);

                oy_sayisi = secenek.TableSurveyVotes.Count;
            }
            RadChart1.ChartTitle.TextBlock.Text = db.TableSurveyQuestions.Where(a => a.SurveyId == SurveyId).FirstOrDefault().TableSurvey.Title;
            RadChart1.Legend.TextBlock.Text = "Toplam : " + oy_sayisi + " Oy ";

            //repeater_satir++;
        }
    }
} 
```

当我编写这段代码时，所有图表都显示了最后一个对象值。我想为每个图表设置不同的数据。

我怎样才能做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T07:38:01.653

您可以使用该`ItemIndex`物业

```
<asp:Repeater runat="server" ID="myRepeater" OnItemDataBound="myRepeater_ItemDataBound">
    <ItemTemplate>
        <asp:Label Text='<%# Eval("Id") %>' runat="server" ID="myRepeaterLabel" />
    </ItemTemplate>
</asp:Repeater> 
```

后面的代码：

```
 protected void myRepeater_ItemDataBound(object sender, RepeaterItemEventArgs e)
    {
        if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
        {
            switch (e.Item.ItemIndex)
            {
                case 3:
                    Label l = (Label)e.Item.FindControl("myRepeaterLabel");
                    l.Text += "whatever";
                    break;
                default:
                    break;
            }

        }
    } 
```

输出：

![在此处输入图像描述](../Images/368318e6477c768f9041d80aacaf1393.png)

**已编辑**

我不确定这是否有帮助，但您应该像这样绑定中继器：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!this.IsPostBack)
        {
            this.BindRepeater();
        }
    }

    private void BindRepeater()
    {
        var r = Builder<Product>.CreateListOfSize(20).Build();
        this.myRepeater.DataSource = r;
        this.myRepeater.DataBind();
    } 
```

并且只需修改事件中**已经绑定**的特定值`ItemDataBound`

# iphone - 在 NSData 中获取异常

> ID：11114703
> 
> 赞同：0
> 
> 时间：2012-06-20T07:23:17.627
> 
> 标签：iphone, objective-c, ios

我有以下用于从网络获取图像的代码：

```
 NSURL *ImageURL = [NSURL URLWithString:@"http://url/image.jpg"];

 NSData *data = [[NSData alloc] initWithContentsOfURL: ImageURL]; 
```

我收到以下异常：

```
 *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[__NSPlaceholderDictionary initWithCapacity:]: capacity (4294967295) is ridiculous' 
```

如果我删除第二行 nsdata 则不会发生异常。请给我解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:34:41.183

您的 url 路径可能有空格。所以像这样使用

```
NSString *url=@"http://url/image.jpg";

url=[url stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSData *data=[[NSData alloc]initWithContentsOfURL:[NSURL URLWithString:url]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T07:39:44.550

只要您的图像尺寸很小，就可以从另一个 SO 问题（[mbm30075 的答案）中尝试这段代码。](https://stackoverflow.com/a/10473960/692507)如果没有，为了使 UI 具有交互性，请使用异步连接首先下载图像`NSURLConnection`

# ruby-on-rails - 机架或导轨问题？

> ID：11114708
> 
> 赞同：0
> 
> 时间：2012-06-20T07:23:24.883
> 
> 标签：ruby-on-rails, ubuntu, encoding, rack

我不确定发生了什么。我的应用程序运行良好，现在它经常因此错误而失败。我正在使用 Capistrano 和 Unicorn。

每次只需`cap deploy`再次运行即可解决问题，但不久之后它就会中断。

```
Started POST "/monitorings" for 21.987.109.224 at 2012-06-20 08:05:49 +0100
Processing by MonitoringsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"#", "monitoring"=>{"inspection_type"=>"Intensive", "is_revoked"=>"0", "note_attributes"=>{"content"=>"", "attention_required"=>"0", "resolved"=>"0"}, "scenario_ids"=>[""], "outlet_id"=>"560"}, "commit"=>"Save"}
Expire fragment (?-mix:daily) (7.7ms)
Completed 500 Internal Server Error in 26ms

ArgumentError (invalid %-encoding (0607214051%2Fregions%2F11-20120607201444%2Fregions%2F38-20120618184202%2Fregions%2F3-20120409175338%2Fregions%2F36-20120618184137%2Fregions%2F12-20120607202042%2Fregions%2F13-20120607202050%2Fregions%2F37-20120618184150%2Fregions%/2F14-20120607202100%2Fregions%2F6-20120607201339%2Fregions%2F15-20120607202119%2Fregions%2F1-20120409175338%2Fregions%2F16-20120607202129%2Fregions%2F39-20120618184218%2Fregions%2F17-20120607202139%2Fregions%2F40-20120618184229%2F/regions%2F4-20120603182949%2Fregions%2F18-20120607202152%2Fregions%2F19-20120607202200%2Fregions%2F20-20120607202209%2Fregions%2F21-20120607202215%2Fregions%2F22-20120607202223%2Fregions%2F23-20120607202229%2Fregions%2F24-20120607/202236%2Fregions%2F41-20120618184240%2Fregions%2F25-20120607202245%2Fregions%2F26-20120607202253%2Fregions%2F42-20120618184248%2Fregions%2F43-20120618184256%2Fregions%2F27-20120607202301%2Fregions%2F28-20120607213722%2Fregions%2F2/9-20120607202317%2Fregions%2F30-20120607202324%2Fregions%2F44-20120618184306%2Fregions%2F31-20120607202332%2Fregions%2F45-20120618184313%2Fregions%2F32-20120607202339%2Fregions%2F34-20120607202355)):
  app/sweepers/outlet_sweeper.rb:13:in `expire_cache'
  app/sweepers/outlet_sweeper.rb:5:in `after_update'
  app/controllers/monitorings_controller.rb:114:in `after_create'
  app/controllers/monitorings_controller.rb:54:in `create'
  config/initializers/quiet_assets.rb:6:in `call_with_quiet_assets' 
```

该应用程序托管在运行 Ubuntu 10.04 的 VPS 上，据我所知，它是完全最新的（我运行过`apt-get upgrade && apt-get install`）。

以防万一有人想知道，扫地机是：

```
class OutletSweeper < ActionController::Caching::Sweeper
  observe Outlet

  def after_update(outlet)
    expire_cache
  end

  # expire_fragment calls moved to their own method
  def expire_cache

    @controller ||= ActionController::Base.new

    expire_fragment(%r{daily})
    puts "Expired Daily Cache"

    expire_fragment(%r{weekly})
    puts "Expired Weekly Cache"
  end

  # Allows us to call the expire_cache method from rake
  def self.rake_sweep
    puts "Begining Expire Cache"
    new.expire_cache
  end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:22:00.973

这可以通过在清扫器中更改以下内容来解决：

```
expire_fragment(%r{daily})
puts "Expired Daily Cache"

expire_fragment(%r{weekly})
puts "Expired Weekly Cache" 
```

到：

```
expire_fragment "daily"
puts "Expired Daily Cache"

expire_fragment "weekly"
puts "Expired Weekly Cache" 
```

# sql - 优化 SELECT-query - index-use 等

> ID：11114710
> 
> 赞同：1
> 
> 时间：2012-06-20T07:23:29.207
> 
> 标签：sql, sqlite

有一个由 8 个字段组成的非常大的表（我知道，不精确）。

在我的应用程序中，我反复运行此 SELECT：

```
SELECT d1, time, s1, s2 from Collection WHERE (d1 = 1) and (s1 = 1) and (time BETWEEN 5666300000 AND 566630700); 
```

我用不同的时间范围运行这个 SELECT。d1 是一个具有 200-300 个不同值的字段，与 s1 相同。主键是 d1、时间、s1。

我正在寻找优化我的表结构和查询的技巧。问题是时间字段不是按升序/降序排列的。所以这可能是一个需要一些时间的查询。我想知道索引我的时间字段。那么我是否必须更改我的查询？我这种情况，怎么办？

我没有看到的查询是否有任何 obv 错误？这在我的应用程序中运行缓慢。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:08:14.890

我不同意其他答案中提出的主键顺序。

您的理想方案*（对于您的确切示例查询）*是将所有相关记录彼此相邻。这将启用对您的数据的单次搜索。例如，`(d1, s1, time)`用作*集群*主键，您将存储数据如下...

```
 d1 | s1 | time 
----+----+------
  1 |  1 | 1234
  1 |  1 | 1235    \
  1 |  1 | 1236     SELECT * FROM table WHERE d1 = 1 AND s1 = 1 AND time BETWEEN 1235 AND 1237
  1 |  1 | 1237    /
  1 |  1 | 1238
  1 |  2 | 1234
  1 |  2 | 1235
  1 |  2 | 1236
  1 |  2 | 1237
  1 |  2 | 1238 
```

如果按照其他人的建议，您`time`将聚集索引中的第一个字段作为第一个字段，那么您*不会*将所有数据放在一个连续的块中。相反，您会为每个单独的时间值获得一次搜索...

```
 time | d1 | s1
------+----+----
 1234 |  1 |  1     *Desired Row 1
 1234 |  1 |  2
 1235 |  1 |  1     *Desired Row 2
 1235 |  1 |  2
 1236 |  1 |  1     *Desired Row 3
 1236 |  1 |  2
 1237 |  1 |  1     *Desired Row 4
 1237 |  1 |  2
 1238 |  1 |  1     *Desired Row 5
 1238 |  1 |  2 
```

这种结构实际上非常适合不同的查询......

```
SELECT * FROM yourTable WHERE time = 1234 AND d1 = 1 AND s2 BETWEEN 2 AND 3 
```

这表明不存在单一的普遍完美的聚集索引。那么，由于只能有一个聚集索引，您如何选择创建聚集索引？

这取决于您的数据和查询。对于每个查询，您需要查看要提取多少不同的连续数据块。尽量减少这些块的数量是一个非常好的主意。但是维护数据的顺序也是如此，以便它适合您的 GROUP BY 或 ORDER by 子句。JOIN 进一步加重了这一点。

对于您的示例查询，我建议的第一个索引确实是最好的。但不适用于您的所有查询。

此外，您需要考虑碎片。数据存储在页面中，您需要考虑插入数据的方式（考虑时将更新视为删除和插入）。因为很*可能*任何插入通常会比现有数据更新时间值，所以`time`在聚集索引中具有第一个将减少碎片。

例如，假设每个页面只能容纳三行数据。上面建议的两个索引看起来像这样......

```
 d1 | s1 | time            time | d1 | s1 
----+----+------          ------+----+----
  1 |  1 | 1234 \          1234 |  1 |  1   \
  1 |  1 | 1235  Page 1    1234 |  1 |  2    Page 1
  1 |  1 | 1236 /          1235 |  1 |  1   /
----+----+------          ------+----+----
  1 |  1 | 1237 \          1235 |  1 |  2   \
  1 |  1 | 1238  Page 2    1236 |  1 |  1    Page 2
  1 |  2 | 1234 /          1236 |  1 |  2   /
----+----+------          ------+----+----
  1 |  2 | 1235 \          1237 |  1 |  1   \
  1 |  2 | 1236  Page 3    1237 |  1 |  2    Page 3
  1 |  2 | 1237 /          1238 |  1 |  1   /
----+----+------          ------+----+----
  1 |  2 | 1238 -Page 4    1238 |  1 |  2   -Page 4 
```

现在，尝试插入`d1 = 1, s1 = 1, time = 1239`.

```
 d1 | s1 | time            time | d1 | s1 
----+----+------          ------+----+----
  1 |  1 | 1234 \          1234 |  1 |  1   \
  1 |  1 | 1235  Page 1    1234 |  1 |  2    Page 1
  1 |  1 | 1236 /          1235 |  1 |  1   /
----+----+------          ------+----+----
  1 |  1 | 1237 \          1235 |  1 |  2   \
  1 |  1 | 1238  Page 2    1236 |  1 |  1    Page 2
 *1 |  1 | 1239*/          1236 |  1 |  2   /
----+----+------          ------+----+----
  1 |  2 | 1234 -Page 3    1237 |  1 |  1   \
----+----+------           1237 |  1 |  2    Page 3
  1 |  2 | 1235 \          1238 |  1 |  1   /
  1 |  2 | 1236  Page 4   ------+----+---- 
  1 |  2 | 1237 /          1238 |  1 |  2   -Page 4
----+----+------           1239 |  1 |  1   /
  1 |  2 | 1238 -Page 5 
```

左边的版本必须创建一个新页面。右边的版本只是继续填充现有页面。

当出现碎片时，通常有可以修复碎片的维护计划。这通常是一个通宵的过程。

这有点复杂不是吗？嗯，有整本书都是关于这个主题的。

在它成为一个问题之前，我通常不会太担心碎片化。但这确实是值得牢记的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T07:31:42.260

我建议您按时间 + d1 + s1（按此顺序）构建聚集索引（主键）。这将确保数据按时间顺序物理存储，然后是 d1 和 s1

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T07:34:54.320

首先，正如 npe 所说，您不应该将时间用作 Primary。我认为在`time - d1 - s1`. 这样，您将有时间作为一种主要的主索引，因此所有中间索引都会非常快。只有这样才会出现 d1 和 s1。此外，将 d1 和 s1 放在尽可能小的数据类型中。如果只有 1 和 0，则放入 bool 等。这将加快检查速度。

# .net - 可以从 Windows 窗体应用程序访问 HTML5 本地存储吗？

> ID：11114715
> 
> 赞同：0
> 
> 时间：2012-06-20T07:23:59.520
> 
> 标签：.net, winforms, html

我有一个在 HTML5 localStorage 中创建和存储数据的 Web 应用程序。在同一客户端上运行的 Windows 窗体应用程序可以访问此存储吗？

Web 应用程序只能通过 IE9 访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:26:16.417

HTML5 数据库是浏览器实现细节。因此，访问此数据库的方式可能是可行的，但这取决于用于访问 Web 应用程序的浏览器。

# eclipse - 从 jar 文件 PushScreen 到屏幕

> ID：11114718
> 
> 赞同：0
> 
> 时间：2012-06-20T07:24:06.753
> 
> 标签：eclipse, blackberry, jar

我已经为我的几个类创建了一个 jar 文件，并在黑莓中也对它们进行了预验证。现在我已经成功地将它们导入到另一个项目中。但是，当我创建一个新项目并导入它时，我想将 pushScreen 推送到其中一个 jar 文件中存在的屏幕类。但每次它打开我当前的项目屏幕。我想知道是否可以将屏幕推送到 jar 类。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T07:58:25.723

我自己解决了。jar 文件未正确预验证。在我再次预先验证并导入 jar 之后，我可以将 screen 推送到 jar 文件的 screen 类。我在当前项目中创建了一个按钮，点击后，我将其推送到 Jar 文件的主屏幕。有效。

# python - 如果我将两种编码字符串（比如 utf-8 和 utf-16）放在一个文件中会怎样？

> ID：11114720
> 
> 赞同：3
> 
> 时间：2012-06-20T07:24:16.943
> 
> 标签：python, unicode, utf-8, utf-16

在 Python 中，例如：

```
f = open('test','w')
f.write('this is a test\n'.encode('utf-16'))
f.write('another test\n'.encode('utf-8'))
f.close() 
```

当我重新打开该文件时，它会变得混乱：

```
f = open("test")
print f.readline().decode('utf-16')  # it leads to UnicodeDecodeError
print f.readline().decode('utf-8')   # it works fine 
```

但是，如果我将文本编码为一种样式（仅说 utf-16），则可以正常读取。所以我猜在同一个文件中混合两种类型的编码是错误的并且不能被解码回来，即使我知道每个特定字符串的编码规则？欢迎任何建议，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T08:48:58.403

这通常是一个坏主意，但在您的情况下它不起作用，因为您也编码换行符。

在 UTF-16 中，*每个*字符都被编码为两个字节，包括您编写的换行符。因为您逐行读取文件，python 将为您提供文件中的所有数据，直到下一个换行字节，但在 UTF-16 中，这可能意味着两个字节之一仍包含在返回的数据中，导致不完整UTF-16 字节流。

要理解这一点，您需要更详细地了解 UTF-16 编码。当将 16 位数据写为 8 位的 2 个字节时，计算机需要决定先将哪个字节写入文件。这个决定可以有两种方式，称为[endianess](https://en.wikipedia.org/wiki/Endianess)；像 Gulliver 的 Lilliputs 一样，计算机系统更喜欢 Big endian 或 Little endian 排序。

因此，UTF-16 数据流以两种顺序之一写入，并且首先写入[字节顺序标记](https://en.wikipedia.org/wiki/Byte_order_mark)或“BOM”以标记选择了哪个。

因此，您的换行符要么被编码为`'\n\x00'`or `'\x00\n'`，并且在读取该空字节 ( `\x00`) 时要么是您解码的 UTF-16 数据的一部分，要么是 UTF-8 数据（它被忽略的地方）。因此，如果您将 UTF-16 编码为大端序，则一切正常（但您有一个杂散的空字节），但如果您将 UTF-16 编码为小端序，事情就会中断。

基本上，编码数据应该被严格地视为二进制数据，并且您应该使用不同的方法来描绘不同的编码文本片段，*或者*您应该只使用将换行符严格编码为换行符的编码。

我会使用长度前缀，先读取它，然后从文件中读取每个编码数据的字节数。

```
>>> import struct
>>> f = open('test', 'wb')
>>> entry1 = 'this is a test\n'.encode('utf-16')
>>> struct.pack('!h', len(entry1)))
>>> f.write(entry1)
>>> entry2 = 'another test\n'.encode('utf-8')
>>> f.write(struct.pack('!h', len(entry2)))
>>> f.write(entry2)
>>> f.close() 
```

我已经使用该[`struct`模块](http://docs.python.org/library/struct.html)来编写定长长度的数据。请注意，我也将文件编写为二进制文件。

阅读：

```
>>> f = open('test', 'rb')
>>> fieldsize = struct.calcsize('!h')
>>> length = struct.unpack('!h', f.read(fieldsize))[0]
>>> print f.read(length).decode('utf-16')
this is a test

>>> length = struct.unpack('!h', f.read(fieldsize))[0]
>>> print f.read(length).decode('utf-8')
another test

>>> 
```

该文件再次以二进制模式打开。

在现实生活中的应用程序中，您可能还必须包含每个条目的编码信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T09:29:09.940

您的代码的工作版本。基本上不编码换行符，并在调用 readline() 方法时删除它们：

```
f = open('test','w')
f.write('this is a test'.encode('utf-16'))
f.write("\n")
f.write('another test'.encode('utf-8'))
f.write("\n")
f.close()

f = open("test")
print f.readline().strip("\n").decode('utf-16')
print f.readline().strip("\n").decode('utf-8') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T07:34:19.030

你不能在行首使用一些标记吗？

```
>>> f = open('test','w')
f.write('16 - this is a test\n'.encode('utf-16'))
f.write('8 - another test\n'.encode('utf-8'))
f.close()
>>> f = open('test')
>>> for line in f:
    if line.startswith('8 - '):
        print line.replace('8 - ', '').decode('utf-8')
    elif line.startswith('16'):
        print line.replace('16 - ', '').decode('utf-16') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T07:35:53.553

人们普遍认为，在同一个文件中使用两种不同的编码是一个坏主意。我认为它可能有用的唯一一次是如果您有一个结构化文件（例如 XML.JSON 等），其中元素可以指定编码。

```
<entries>
    <entry encoding="utf-16">
        <text>私&lt;/text>
        <meaning>I, myself</meaning>
    </entry>
    <entry encoding="utf-8">
        <text>あなた&lt;/text>
        <meaning>you, yourself</meaning>
    </entry>
</entries> 
```

伪代码：

```
for entry in entries:
    text += entry.text.decode(entry.encoding) 
```

此外，您的示例失败了，因为您的系统是 Little Endian 并且 readline 在 utf-16 字符中间断行。这导致第一行缺少最后一个 \x00 并且最后一行被 utf-16 行中的 \x00 前置。这是快速修复：

```
f = open("test")
print (f.readline()+'\x00').decode('utf-16')  # it leads to UnicodeDecodeError
print f.readline()[1:].decode('utf-8')   # it works fine 
```

# eclipse - 在 Eclipse 中自动构建 GWT

> ID：11114721
> 
> 赞同：1
> 
> 时间：2012-06-20T07:24:17.163
> 
> 标签：eclipse, gwt, automated-tests, build-automation

有没有办法使用 eclipse 项目自动化 GWT 构建？

目标是自动构建： * 从版本控制系统中签出 * 构建 GWT 项目 * 部署 GWT 项目 * 运行测试

我读过关于 ant 的文章，但是有没有办法为 GWT 项目重用 Eclipse 项目文件？

# jsf - 使用 Facelets 而不是 JSP 会导致 javax.servlet.http.HttpServletRequestWrapper.getSession() 处的 java.lang.StackOverflowError

> ID：11114723
> 
> 赞同：2
> 
> 时间：2012-06-20T07:24:30.933
> 
> 标签：jsf, facelets, jsf-1.2

我在 Eclipse IDE 中使用 JBoss4.2。当我`hellojsf`使用 JSP 视图技术运行程序时，它运行良好。当我尝试使用相同组件的 Facelets 时，出现以下异常：

```
2012-06-20 12:41:30,941 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[localhost].[/HelloJSF].[Faces Servlet]] Servlet.service() for servlet Faces Servlet threw exception
java.lang.StackOverflowError
    at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:216)
    at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:545)
    at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:216)
    at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:545)
    at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:216)
    at org.apache.catalina.core.ApplicationHttpRequest.getSession(ApplicationHttpRequest.java:545) 
```

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T14:04:15.910

已`FacesServlet`在无限循环中运行。如果您使用旧的 JSF 1.2 而不是新的 JSF 2.x 并且没有正确配置 JSF 以使用 XHTML 而不是 JSP，则可能会发生这种情况。JSF 1.2 不支持 Facelets，而 JSF 2.x 捆绑了 Facelets。

如果[升级](http://javaserverfaces.java.net)到 JSF 2.0 不是一个选项（JBoss 4.2 作为 Servlet 2.5 兼容的容器应该支持它），那么您需要单独安装 Facelets 1.x。下载[jsf-facelets-1.1.15.jar](https://repository.jboss.org/nexus/content/repositories/thirdparty-releases/com/sun/facelets/jsf-facelets/1.1.15/jsf-facelets-1.1.15.jar)并将其放入`/WEB-INF/lib`并编辑`web.xml`以告诉 JSF`.xhtml`用作默认后缀。

```
<context-param>
    <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
    <param-value>.xhtml</param-value>
</context-param> 
```

`FacesServlet`映射 URL 模式**不能**是，这`*.xhtml`会导致它在无限循环中运行。就留着吧`*.jsf`。

```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>
</servlet-mapping> 
```

此外不要忘记在`faces-config.xml`.

```
<application>
    <view-handler>com.sun.facelets.FaceletViewHandler</view-handler>    
</application> 
```

现在您可以像打开 JSP 文件一样使用通常的方式打开 Facelets 文件`http://localhost:8080/context/page.jsf`，唯一的区别是您应该有一个`page.xhtml`文件而不是`page.jsp`.

使用 JSF 2.x 时，不需要上下文参数和视图处理程序，因为它们已经是 JSF 2.x 的默认值。此外，在使用 JSF 2.x 时，可以安全地将 URL 模式设置为`*.xhtml`.

### 也可以看看：

*   [Facelets 1.x 开发者文档](http://facelets.java.net/nonav/docs/dev/docbook.html#gettingstarted-setup)
*   [从 JSF 1.2 迁移到 JSF 2.0](https://stackoverflow.com/questions/4441713/migrating-from-jsf-1-2-to-jsf-2-0/4532870#4532870)

# javascript - window.location.reload(); 不适用于谷歌浏览器

> ID：11114725
> 
> 赞同：13
> 
> 时间：2012-06-20T07:24:48.520
> 
> 标签：javascript, google-chrome

我在收到响应后使用 AJAX 操作，我想重新加载我正在使用的当前页面：

```
 window.location.reload(); 
```

它在 Firefox 和 IE 上运行良好，但不适用于 Chrome；我要显示的内容为空。

有没有办法在chrome中重新加载页面？

```
window.opener.document.location.reload();
self.close(); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-08-27T10:24:37.237

不知道为什么，但在我的情况下，我通过将 reload() 调用包装在一个 100 毫秒的 setTimeout 中来修复它。

```
setTimeout(function(){
    window.location.reload();
},100); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-20T07:35:26.350

试试下面的：

```
window.location = self.location; 
```

以上代码不适用于某些浏览器，您甚至可以尝试：

```
location.reload( true ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T09:19:02.707

你也可以试试

```
window.location.href = window.location; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-22T01:36:02.480

尝试：
`parent.window.location.reload();`
这对我来说在 Firefox 17 中不起作用。

我知道适用于所有浏览器的唯一另一种方法是重定向到另一个空白页面并重定向回当前页面。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-05-19T10:49:28.723

尝试使用 JavaScript 重新加载页面。

```
window.location.href = window.location.href; 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-10-22T19:49:11.867

尝试这个：

```
window.opener.location.reload(true);
window.self.close(); 
```

这适用于所有主要浏览器。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2015-11-13T14:42:44.047

如果您使用 AJAX，则必须在成功函数中进行重新加载。

```
$.ajax({
    type: 'POST',
    data: '',
    url: '',
    success: function(data){
        setTimeout(function(){
            window.location.reload();
        },100);
    },
    error: function(){
} 
```

# javascript - 外部 JavaScript 渲染

> ID：11114731
> 
> 赞同：0
> 
> 时间：2012-06-20T07:25:04.510
> 
> 标签：javascript, html, javascript-events

一个页面上有两个 javascript 文件，它们都来自不同的域。现在第二个文件在第一个文件之前加载，因为第二个 javascript 文件的服务器响应时间大于第一个 javascript 文件的响应时间。第二个 javascript 文件依赖于第一个 javascript 文件中设置的某些函数，因此它会引发错误。

现在我的问题是：javascript 文件排序发生了吗？即它们是否按顺序执行？如果是，那么为什么首先执行第二个 javascript 文件并引发错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T07:27:52.790

如果您有脚本元素，它们将按照放置的顺序执行，除非您以编程方式加载它们或明确告诉它们使用 HTML5`async`属性异步加载（低于 10 版的 IE 不支持该属性）。

脚本本身可能在它们内部具有异步行为，这可能导致它们以错误的顺序执行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-20T10:11:03.790

如果您通过 AJAX 加载两个脚本，则有两个函数（每个加载一个）并在第一个加载时调用第二个。像这样（下面只是一个例子）：

```
function loadfirstscript()
{
var http = new XMLHttpRequest();
var url = "get_data.php";
http.open("GET", url, true);

http.onreadystatechange = function() {//Call a function when the state changes.
     if(http.readyState == 4 && http.status == 200) {
          //do something here...

          loadsecondscript() //Call the second script
     }
}
http.send(params);
} 
```

**编辑：**对不起，如果这不能回答你的问题，但如果这不能回答你的问题，我不太确定你在问什么。

# android - 将数据从活动传递到其他 [不工作]

> ID：11114732
> 
> 赞同：1
> 
> 时间：2012-06-20T07:25:05.800
> 
> 标签：android, android-intent

从我的 StartActivity 类（一个 Activity）中，我正在使用意图调用另一个活动。

```
Intent intent = new Intent(getApplicationContext(), TabsActivity.class);
intent.putExtra(CHANGE_PACK, changePack);
startActivity(intent); 
```

CHANGE_PACK 是静态最终字符串，changePack 值为 true。（我已经通过调试检查过）

但是当我在 TabsActivity 中获取这个值时

```
boolean packChanged = getIntent().getBooleanExtra(StartActivity.CHANGE_PACK, false); 
```

packChanged 的​​值为 false。我在网上查了一下，但没有找到帮助。基本上我在我的应用程序中使用完全相同的东西，它工作正常。

任何人都可以说出为什么它不起作用。

附加：两个活动都在清单中注册，我在两个活动的 onResume() 方法中这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T07:31:01.247

尝试`getIntent().getBooleanExtra(...)`在 onCreate 中运行。或者覆盖`protected void onNewIntent(Intent intent)`并从该意图对象中检索您的布尔值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T07:33:50.113

检查清单中的 TabsActivity`android:launchMode`是如何声明的。如果是`singleTop`, 或者`singleTask`您应该`onNewIntent()`在 TabsActivity 中使用（而不是 onResume）来从新意图中获得新的附加功能。在这种情况下，getIntent 将返回用于创建此 Activity 实例的第一个原始意图

[http://developer.android.com/reference/android/app/Activity.html#onNewIntent(android.content.Intent](http://developer.android.com/reference/android/app/Activity.html#onNewIntent(android.content.Intent) )

PS示例：

```
public class MyActivity extends Activity {

...

@Override
protected void onNewIntent(final Intent intent) {
    super.onNewIntent(intent);
    boolean packChanged = intent.getBooleanExtra(StartActivity.CHANGE_PACK, false);
} 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T22:22:11.317

我也有这个问题，无法很好地解决。我最终使用了以下技巧：

```
Intent intent = new Intent(getApplicationContext(), TabsActivity.class);
intent.putExtra(CHANGE_PACK, Boolean.toString(changePack));
startActivity(intent); 
```

接着

```
boolean packChanged = Boolean.parseBoolean(getIntent().getStringExtra(StartActivity.CHANGE_PACK)); 
```

哈克，但它的工作原理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T07:35:06.143

你的代码看起来不错。您处理`CHANGE_PACK`变量的唯一方式。尝试将它与类名一起使用（因为它声明为静态）。使用 `intent.putExtra(StartActivity.CHANGE_PACK, changePack);`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T07:48:34.950

尝试使用这个

```
boolean packChanged;

Bundle extra=getIntent().getExtras();
    if(extra!=null){
        packChanged=extra.getBoolean("enter your key which u have used in StartActivity");

    } 
```

# python - 将网格子图添加到 WxPython GUI (Matplotlib)

> ID：11114733
> 
> 赞同：1
> 
> 时间：2012-06-20T07:25:18.763
> 
> 标签：python, wxpython, matplotlib, subplot

我正在为多边超声波测距仪开发一个简单的演示 GUI。设备从几个不同的传感器捕获超声波信号，对这些信号执行飞行时间处理，然后使用检测到的目标的范围信息在二维笛卡尔坐标中定位对象。

我想创建一个 wxPython GUI，它使用 matplotlib 来显示每个传感器信号并绘制目标位置。我找到了一些示例代码，它们的布局与我想要的大致相同，并删除了一些代码的不必要组件。python代码如下：

```
import sys,os,csv
import numpy as N
import wx
import matplotlib
from matplotlib.figure import Figure
from matplotlib.backends.backend_wxagg import \
    FigureCanvasWxAgg as FigCanvas, \
    NavigationToolbar2WxAgg as NavigationToolbar
class FinalProject(wx.Frame):
    title = ' Ultrasound Demo '
    def __init__(self):
        wx.Frame.__init__(self, None, -1, self.title)
        self.create_menu()
        self.create_status_bar()
        self.create_main_panel()
    def create_menu(self):
        self.menubar = wx.MenuBar()
        menu_file = wx.Menu()
        m_expt = menu_file.Append(-1, "&Save plot\tCtrl-S", "Save plot to file")
        self.Bind(wx.EVT_MENU, self.on_save_plot, m_expt)
        menu_file.AppendSeparator()
        m_exit = menu_file.Append(-1, "E&xit\tCtrl-X", "Exit")
        self.Bind(wx.EVT_MENU, self.on_exit, m_exit)
        self.menubar.Append(menu_file, "&File")
        self.SetMenuBar(self.menubar)
    def create_main_panel(self):
        self.panel = wx.Panel(self)
        self.dpi = 100
        self.fig = Figure((9.5, 5.0), dpi=self.dpi)
        self.canvas = FigCanvas(self.panel, -1, self.fig)
#        self.axes1 = self.fig.add_subplot2grid((2,2), (0,0))
        self.axes1 = self.fig.add_subplot(2,1,1)
#        self.axes2 = self.fig.add_subplot2grid((2,2), (1,0))
        self.axes2 = self.fig.add_subplot(2,1,2)

        self.toolbar = NavigationToolbar(self.canvas)
        self.vbox = wx.BoxSizer(wx.VERTICAL)
        self.vbox.Add(self.canvas, 1, wx.LEFT | wx.TOP | wx.GROW)
        self.vbox.AddSpacer(10)
        self.hbox = wx.BoxSizer(wx.HORIZONTAL)
        flags = wx.ALIGN_LEFT | wx.ALL | wx.ALIGN_CENTER_VERTICAL
        self.panel.SetSizer(self.vbox)
        self.vbox.Fit(self)
    def create_status_bar(self):
        self.statusbar = self.CreateStatusBar()
    def on_draw_button1(self, event):
        self.axes1.clear()
        self.axes2.clear()
        i = N.arange(0,4,1)
        q = i
        w = N.arange(-4,0,1)
        self.axes1.plot(q,i,'red')
        self.axes2.plot(w,i,'yellow')
        self.canvas.draw()
    def on_draw_button2(self, event):
        self.axes1.clear()
        self.axes2.clear()
        a = [0,1,2,3,4,]
        b = [5.5,4.5,3.5,2.5,1.5]
        c = [7.5,2.5,4,6.8,10.6]
        self.axes1.plot(b,a,'purple')
        self.axes2.plot(c,a,'black')
        self.canvas.draw()
    def on_save_plot(self, event): 
        file_choices = "PNG (*.png)|*.png"
        dlg = wx.FileDialog(
            self, 
            message="Save plot as...",
            defaultDir=os.getcwd(),
            defaultFile="plot.png",
            wildcard=file_choices,
            style=wx.SAVE)

        if dlg.ShowModal() == wx.ID_OK:
            path = dlg.GetPath()
            self.canvas.print_figure(path, dpi=self.dpi)
            self.flash_status_message("Saved to %s" % path)

    def on_exit(self, event):
        self.Destroy()
if __name__ == '__main__':
    app = wx.PySimpleApp()
    app.frame = FinalProject()
    app.frame.Show()
    app.MainLoop()
    del app 
```

因此，此代码对于显示两个捕获的信号很有用，并且添加额外的子图相对容易，只要它们存在于对称网格上，但我想做的是在这两个图的右侧添加第三个子图跨越两者的高度。

要清楚我想做的是在现有图的右侧添加第三个子图，其高度等于当前画布高度。

通读 matplotlib 文档，看起来合适的函数是 plt.subplot2grid()。不幸的是，当我尝试使用此函数定义当前子图时出现错误（我尝试使用的代码在下面注释掉：

```
self.axes1 = self.fig.add_subplot2grid((2,2), (0,0))) 
```

有没有其他人尝试过这个？关于我可能出错的地方有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:15:13.583

听起来你已经想出了一些事情来做你想做的事。

明确地说，在此示例中您使用 WX python 这一事实并没有什么特别之处 - 本质上，问题归结为如何将轴添加到与其他两个轴具有相同高度的图形中。

这可以通过以下方式非常简单地完成：

```
import matplotlib.pyplot as plt
ax1 = plt.subplot(2, 2, 1)
ax2 = plt.subplot(2, 2, 3)
ax3 = plt.subplot(1, 2, 2)
plt.show() 
```

高温高压

# iphone - 使用石英为 CALayer 绘制内容时发生硬崩溃

> ID：11114746
> 
> 赞同：0
> 
> 时间：2012-06-20T07:26:18.800
> 
> 标签：iphone, memory-management, crash, quartz-graphics, gdc

我试图弄清楚为什么 iOS 会以粗暴的方式使我的应用程序崩溃（没有崩溃日志，立即关闭并出现黑屏死机，并显示一段时间的微调器）。当我使用 Quartz 为 CALayer 渲染内容时会发生这种情况。我怀疑内存问题（仅在设备上测试时发生），但内存日志以及仪器分配日志看起来还不错。让我过去的致命功能：

```
- (void)renderTiles{

    if (rendering) {
        //NSLog(@"====== RENDERING TILES SKIP =======");
        return;
    }
    rendering = YES;

    CGRect b = tileLayer.bounds;
    CGSize s = b.size;
    CGFloat imageScale = [[UIScreen mainScreen] scale];
    s.height *= imageScale;
    s.width *= imageScale;

    dispatch_async(queue, ^{

        NSLog(@"");
         NSLog(@"====== RENDERING TILES START =======");

        NSLog(@"1\. Before creating context");
        report_memory();

        CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
        NSLog(@"2\. After creating color space");
        report_memory();

        NSLog(@"3\. About to create context with size: %@", NSStringFromCGSize(s));
        CGContextRef ctx = CGBitmapContextCreate(NULL, s.width, s.height, 8, 0, colorSpace, kCGImageAlphaPremultipliedLast);

        NSLog(@"4\. After creating context");
        report_memory();

        CGAffineTransform flipTransform = CGAffineTransformMake(1.0, 0.0, 0.0, -1.0, 0.0, s.height);
        CGContextConcatCTM(ctx, flipTransform);

        CGRect tileRect = CGRectMake(0, 0, tileImageScaledSize.width, tileImageScaledSize.height);
        CGContextDrawTiledImage(ctx, tileRect, tileCGImageScaled);

        NSLog(@"5\. Before creating cgimage from context");
        report_memory();

        CGImageRef cgImage = CGBitmapContextCreateImage(ctx);
        NSLog(@"6\. After creating cgimage from context");
        report_memory();

        dispatch_sync(dispatch_get_main_queue(), ^{
            tileLayer.contents = (id)cgImage;        
        });

        NSLog(@"7\. After asgning tile layer contents = cgimage");
        report_memory();

        CGColorSpaceRelease(colorSpace);
        CGContextRelease(ctx);
        CGImageRelease(cgImage);

        NSLog(@"8\. After releasing image and context context");
        report_memory();

        NSLog(@"====== RENDERING TILES END =======");
        NSLog(@"");
        rendering = NO;

    });
} 
```

**以下是日志：**

```
====== RENDERING TILES START =======
1\. Before creating context
    Memory in use (in bytes): 28340224 / 519442432 (5.5%)
2\. After creating color space
    Memory in use (in bytes): 28340224 / 519442432 (5.5%)
3\. About to create context with size: {6324, 5208}
4\. After creating context
    Memory in use (in bytes): 28344320 / 651268096 (4.4%)
5\. Before creating cgimage from context
    Memory in use (in bytes): 153649152 / 651333632 (23.6%)
6\. After creating cgimage from context
    Memory in use (in bytes): 153649152 / 783159296 (19.6%)
7\. After asgning tile layer contents = cgimage
    Memory in use (in bytes): 153653248 / 783253504 (19.6%)
8\. After releasing image and context context
     Memory in use (in bytes): 21688320 / 651288576 (3.3%)
====== RENDERING TILES END ======= 
```

应用程序在随机位置崩溃。有时在到达函数的 en 时，有时在随机步骤中。

我应该向哪个方向寻找解决方案？GDC是否可能导致问题？或者可能是上下文大小或一些核心动画底层引用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T21:36:16.597

After accurate debugging and experimenting with the rendered context size it turned out to be memory related issue. The solution was to restrict the size of the context to maximum 2048 width and 1024 height

# php - PDF 到 JPG 图像页面选择

> ID：11114747
> 
> 赞同：2
> 
> 时间：2012-06-20T07:26:19.817
> 
> 标签：php, pdf, image-processing, imagemagick, imagick

关于如何为命令行执行此操作的大量答案

```
convert /path/to/file/file.pdf[3] output.jpg 
```

太好了...但是如果我在内存处理中使用，我将使用 PDFlib 生成 PDF，然后将其缓冲区输出到我想要生成所选页面的 jpg 预览的函数。如何？我的代码：

```
 [...]
    $buf = $pdf->get_buffer();

    //$buff is just a PDF stored in a string now.

    $im = new Imagick();
    $im->readimageblob($buf);

    $im->setImageFormat("jpg");
    $im->setimagecompressionquality(60);

    $len = strlen($im);
    header("Content-type: image/jpeg");
    header("Content-Length: $len");      
    header("Content-Disposition: inline; filename=test.jpg");

    echo $im; 
```

这会创建一个 jpeg，但总是返回 PDF 的最后一页。我希望能够选择将转换哪一个。不保存临时文件和使用命令行`(exec('convert /path/to/file/file.pdf[3] output.jpg'))`语法是否可行？

让我补充一下我试过

```
 $im->readimageblob($buf[2]); 
```

它没有用:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-26T21:46:01.110

对于那些仍在寻找从 blob 中读取特定页码的解决方案的人，请检查这个问题[使用 PHP 和 ImageMagick 创建由 PDF 中的图像填充的数组](https://stackoverflow.com/questions/11004718/creating-array-populated-by-images-from-a-pdf-using-php-and-imagemagick)

```
$img_array = array();
$im = new imagick();
$im->setResolution(150,150);
$im->readImageBlob($pdf_in);
$num_pages = $im->getNumberImages();
for($i = 0;$i < $num_pages; $i++) 
{
    $im->setIteratorIndex($i);
    $im->setImageFormat('jpeg');
    $img_array[$i] = $im->getImageBlob();
}
$im->destroy(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-05-26T04:05:50.210

我正在将 PDF 二进制文件从 Amazon S3 加载到内存中，然后使用**setIteratorIndex()**和**getImage()选择我想要的特定页面**

```
function get_image_from_pdf($pdf_bytes, $page_num){
    $im = new \Imagick();
    $im->setResolution(150, 150);
    $im->readImageBlob($pdf_bytes);
    $im->setIteratorIndex($page_num);
    $im = $im->getImage();
    $im->setImageFormat('png');
    return $im->getImageBlob();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-28T00:22:43.993

版本 3.0.1 在 imagic 对象中的最后一个图像或第一个图像上

`$image_obj = new Imagick("test.pdf");`然后你在 $image_obj 中的最后一张图片上

如果你使用

```
fp_pdf = fopen("test.pdf", 'rb');
$image_obj = new Imagick();
$image_obj -> readImageFile($fp_pdf); 
```

然后你在 $image_obj 中的第一张图片上

在第二种情况下，您可以切换到最后一张图片

```
fp_pdf = fopen("test.pdf", 'rb');
$image_obj = new Imagick();
$image_obj -> readImageFile($fp_pdf,2); // 2 can be any positive number? 
```

然后你在 $image_obj 中的最后一张图片上

```
echo $image_obj->getNumberImages() // Returns the number of images in the object 
```

然后

```
 if ($image_obj->hadPreviousImage)
       $image_obj->previousImage() //Switch to the previous image in the object
    } 
```

或者

```
if ($image_obj->hasNextImage()) {
   $image_obj->nextImage())  //Switch to the next image in the object
} 
```

例如，如果您总共有 6 张图片并且需要第 4 张图片，则从最后开始

```
$image_obj->previousImage()
$image_obj->previousImage()
$image_obj->setImageFormat("png");
header("Content-Type: image/png");
echo $image_obj; 
```

**编辑：**另一个发现是你可以

```
foreach($image_obj as $slides) {
    echo "<br>".$Obj_img->getImageWidth();
    //or wehatever you need to do.
} 
```

**编辑2：**非常简单的解决方案是使用此函数`$image_obj->setIteratorIndex(4)`计数从零开始。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-27T12:30:59.250

不幸的是，这不是好消息，但我可以肯定地说，截至撰写本文时，ImageMagick（和 PHP 库）不支持您尝试使用的页面符号。（对于未来发现这一点的人：我正在检查 php-imagick-3.0.1 和 imagemagick-6.6.0.4）。

我正在尝试做和你完全相同的事情，我刚刚花了最后几个小时浏览源代码，试图弄清楚它的作用以及它是如何获取页面的，看起来它根本就不会从流中读取时不要使用它（即 readBlob() 调用）。

因此，我只是将它放在一个临时文件中并从那里读取它。不那么优雅，但它会工作。

# android - 在表格中插入线性布局

> ID：11114751
> 
> 赞同：0
> 
> 时间：2012-06-20T07:26:26.503
> 
> 标签：android

我想在表格行中添加线性布局，该线性布局将包含一些按钮和文本视图。我如何实现这一点。我正在使用它，但它不显示任何内容

```
 TableRow tr = new TableRow(this);
tr.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
final CheckBox checkbox = new CheckBox(this);
checkbox.setPadding(10, 5, 0, 0);
checkbox.setTextSize(TypedValue.COMPLEX_UNIT_PX, 15);
checkbox.setOnClickListener(new View.OnClickListener() {
TextView tv = new TextView(this);
tv.setText("Hello");
tv.setTextSize(TypedValue.COMPLEX_UNIT_PX, 14);
tv.setPadding(0, 0, 0, 0);
tv.setOnClickListener(new View.OnClickListener() {
checkbox.setLayoutParams(new LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT,LinearLayout.LayoutParams.WRAP_CONTENT));
tv.setLayoutParams(new LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT,LinearLayout.LayoutParams.WRAP_CONTENT));
LinearLayout linearLayout = new LinearLayout(tr.getContext());
linearLayout.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
linearLayout.setOrientation(LinearLayout.HORIZONTAL);
linearLayout.addView(checkbox, new LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT,LinearLayout.LayoutParams.WRAP_CONTENT));
linearLayout.addView(tv, new LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT,LinearLayout.LayoutParams.WRAP_CONTENT));
tr.addView(linearLayout);
table.addView(tr, new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT)); 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T07:38:07.233

尝试像这样添加行参数

```
TableRow row = new TableRow(this);

row.addView(linearLayout,  new TableRow.LayoutParams(1)); 
```

添加 relativeLayout 而不是 linearlayout 并为 textview 设置这样的参数

```
RelativeLayout.LayoutParams rel_lp = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
rel_lp.addRule(RelativeLayout.BELOW);
tv.setLayoutParams(rel_lp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T07:33:29.927

首先，您需要在正确的位置关闭花括号。在设置 onClickListener 时，您没有关闭花括号，甚至没有在其中放置分号。因此，您似乎正在侦听器中创建一个 textView 。以下行

```
checkbox.setOnClickListener(new View.OnClickListener() { 
```

应该是这样的

```
checkbox.setOnClickListener(new View.OnClickListener() { 
    protected void onClick(View v){
        //your listener code here.
    }
}); 
```

而且当布局如此复杂时，您应该使用 XML 文件而不是动态编码，除非您必须这样做。

# php - 将网站转换为移动网站格式

> ID：11114757
> 
> 赞同：0
> 
> 时间：2012-06-20T07:26:52.387
> 
> 标签：php, html, mobile, web

我想在我的移动 web 应用程序中显示其他 we 页面，但有些网页太笨重，无法在移动设备的小屏幕上使用。所以实现某种谷歌动员功能。PHP中是否有任何可用的API，以便我可以使用它将这些页面转换为移动兼容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:31:42.087

不，您必须手动完成。您应该研究响应式 CSS 布局。这些将随着浏览器宽度的变化而调整页面的内容。因此，同一页面将在完整的浏览器窗口和移动设备中运行。

看着

*   [http://www.columnal.com/](http://www.columnal.com/)
*   [http://lessframework.com/](http://lessframework.com/)
*   [http://speckyboy.com/2011/11/17/15-responsive-css-frameworks-worth-considering/](http://speckyboy.com/2011/11/17/15-responsive-css-frameworks-worth-considering/)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-26T09:44:03.960

我明白了，我们可以为此使用 skweezer API。如果您想以移动兼容格式查看您的网站，请尝试此操作

```
http://www.skweezer.com/s.aspx?q=www.example.com 
```

将 www.example.com 替换为您的网站 URL。

有关详细信息，请访问[http://company.skweezer.com/](http://company.skweezer.com/)

# wpf - WPF DataGrid ItemsSource 不会在更改源时更新

> ID：11114759
> 
> 赞同：2
> 
> 时间：2012-06-20T07:26:57.957
> 
> 标签：wpf, datagrid, viewmodel, observablecollection, itemssource

我已经阅读了一些帖子，但没有人帮助我解决我的问题。所以，我有一个带有 Viewmodel 的视图，并且在 View 内部有一个 DataGrid 绑定到 viewmodel 内的 ObservableCollection。所选项目也绑定到类型 T == ObservableCollection

```
public ObservableCollection<TableProperty> TableProperties
    {
        get
        {
            return tableProperties;
        }
        set
        {
            if (tableProperties != value)
            {
                tableProperties = value;
                OnPropertyChanged("TableProperties");
            }
        }
    }

public TableProperty Property
    {
        get
        {
            return property;
        }
        set
        {
            property = value;
            OnPropertyChanged("Property");
        }
    } 
```

这里是DataGrid：

```
<toolkit:DataGrid AutoGenerateColumns="False" 
                      UseLayoutRounding="True" 
                      ItemsSource="{Binding Path=TableProperties,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,NotifyOnTargetUpdated=True}"
                      SelectedItem="{Binding Path=Property,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" 
                      [...]>
        <toolkit:DataGrid.Columns> 
```

现在我想实现一个逻辑，改变一个复选框触发一个命令设置所选项目的一些值：

```
<toolkit:DataGridTemplateColumn Header="Mandatory" IsReadOnly="False">
                <toolkit:DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                            <CheckBox IsChecked="{Binding Path=Mandatory,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}">
                                <CheckBox.Style>
                                    <Style TargetType="{x:Type CheckBox}">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Path=MandatoryDB}" Value="True">
                                                <Setter Property="IsEnabled" Value="False" />
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Path=MandatoryDB}" Value="False">
                                                <Setter Property="IsEnabled" Value="True" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </CheckBox.Style>
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="Checked">
                                        <cmd:EventToCommand Command="{Binding Path=DataContext.SetMandatory, Mode=OneWay, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}}" />
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                            </CheckBox>
                        </StackPanel>
                    </DataTemplate>
                </toolkit:DataGridTemplateColumn.CellTemplate>
            </toolkit:DataGridTemplateColumn> 
```

这是它背后的命令：

```
 private void OnSetMandatory()
    {
        property.Visible = true;
        property.ReadOnly = false;
        property.VisibleInGrid = true;
        property.UIPropertyName = DateTime.Now.TimeOfDay.ToString();
        OnPropertyChanged("Property");
        OnPropertyChanged("TableProperties");
    } 
```

问题是：当我更改属性时，集合内的项目也已更新，并且它在 Property Getter 中正常运行... **如果我直接在视图内调用 Datagrid.Items.Refresh()**它也会正确显示值，但不会自动更新集合。

那么你有什么想法吗？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T08:06:03.150

TableProperty 类必须实现 INotifyPropertyChanged 并正确提升它。

# android - java.lang.RuntimeException：无法序列化：[] ----KSoap android

> ID：11114760
> 
> 赞同：0
> 
> 时间：2012-06-20T07:27:10.173
> 
> 标签：android, ksoap

我想按以下代码访问 wcf webservice：

```
void farmCreate(String userName,
        String authToken) {
    String resultData = null;
    Hashtable<String, String> responseHashTable = new Hashtable<String, String>();
    try {
        FarmClass farm = new FarmClass();
        StringBuilder sb = null;
        SoapObject request = new SoapObject(Controller.NAMESPACE,  "MethodName");
        request.addProperty("aaaa", userName);
        request.addProperty("aaaa", authToken);
        request.addProperty("aaaa", farm);
        request.addProperty("aaaaa", "Add");

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);

          MarshalDate md = new MarshalDate();
            md.register(envelope);

            MarshalFloat md1 = new MarshalFloat();
            md1.register(envelope);

        HttpTransportSE androidHttpTransport = new HttpTransportSE(Controller.URL6767);
        androidHttpTransport.call(Controller.SOAP_ACTION + "method name", envelope);

        //new MarshalBase64().register(envelope);
        Object result = (Object) envelope.getResponse();

        resultData = result.toString();

    } catch (Exception e) {
        // TODO: handle exception
        e.printStackTrace();
        System.out.println("error is occured :-" + e.getMessage());
    }

} 
```

但作为回应，产生如下错误：-

```
 06-20 12:50:03.673: W/System.err(596): java.lang.RuntimeException: Cannot serialize: []
06-20 12:50:03.673: W/System.err(596):  at org.ksoap2.serialization.SoapSerializationEnvelope.writeElement(SoapSerializationEnvelope.java:679)
06-20 12:50:03.684: W/System.err(596):  at org.ksoap2.serialization.SoapSerializationEnvelope.writeProperty(SoapSerializationEnvelope.java:663)
06-20 12:50:03.684: W/System.err(596):  at org.ksoap2.serialization.SoapSerializationEnvelope.writeObjectBody(SoapSerializationEnvelope.java:632)
06-20 12:50:03.684: W/System.err(596):  at org.ksoap2.serialization.SoapSerializationEnvelope.writeElement(SoapSerializationEnvelope.java:675)
06-20 12:50:03.684: W/System.err(596):  at org.ksoap2.serialization.SoapSerializationEnvelope.writeProperty(SoapSerializationEnvelope.java:663)
06-20 12:50:03.684: W/System.err(596):  at org.ksoap2.serialization.SoapSerializationEnvelope.writeObjectBody(SoapSerializationEnvelope.java:632)
06-20 12:50:03.684: W/System.err(596):  at org.ksoap2.serialization.SoapSerializationEnvelope.writeObjectBody(SoapSerializationEnvelope.java:616)
06-20 12:50:03.684: W/System.err(596):  at org.ksoap2.serialization.SoapSerializationEnvelope.writeElement(SoapSerializationEnvelope.java:673)
06-20 12:50:03.684: W/System.err(596):  at org.ksoap2.serialization.SoapSerializationEnvelope.writeBody(SoapSerializationEnvelope.java:597)
06-20 12:50:03.684: W/System.err(596):  at org.ksoap2.SoapEnvelope.write(SoapEnvelope.java:192)
06-20 12:50:03.694: W/System.err(596):  at org.ksoap2.transport.Transport.createRequestData(Transport.java:101)
06-20 12:50:03.694: W/System.err(596):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:114)
06-20 12:50:03.694: W/System.err(596):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:90)
06-20 12:50:03.694: W/System.err(596):  at com.track.controller.SoapWebService.farmCreate(SoapWebService.java:113)
06-20 12:50:03.694: W/System.err(596):  at com.track.view.LiveStock.onCreate(LiveStock.java:82)
06-20 12:50:03.694: W/System.err(596):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-20 12:50:03.694: W/System.err(596):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
06-20 12:50:03.704: W/System.err(596):  at android.app.ActivityThread.startActivityNow(ActivityThread.java:2503)
06-20 12:50:03.704: W/System.err(596):  at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)
06-20 12:50:03.704: W/System.err(596):  at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339) 
```

所以拜托，任何人都对序列化概念有想法，所以请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:45:00.837

要序列化任何对象，您应该实现 Serializable。尝试为 FarmClass 实现 Serializable 类。

# php - 网页请求中止

> ID：11114768
> 
> 赞同：3
> 
> 时间：2012-06-20T07:27:45.037
> 
> 标签：php, mysql, apache, firebug

在 www.tongguitar.co.kr 上，您可以在 Firebug (Firefox)的*Net选项卡中看到：*

```
GET www.tongguitar.co.kr, Status: Aborted
GET www.tongguitar.co.kr, Status: Aborted
[...]
GET www.tongguitar.co.kr, Status: Aborted
GET www.tongguitar.co.kr, Status: 200 OK 
```

它并不总是发生，但只是有时，我不知道为什么。我使用 PHP 和 MySQL 和 Apache。是服务器端的问题，还是 DNS 的问题？PHP源代码有错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-04T18:57:04.037

有时，如果您有简单的事情，例如 CSS 翻转（您翻转图像，请求已发送，但您在返回响应之前移动了一个），或者如果您的页面的 JavaScripting 请求资源但不等待响应，则有时会发生这种情况返回。通常，后者与 JS 分析调用有关。当您点击“停止”按钮时也会发生这种情况。

无论哪种方式，这都不是错误。这只是浏览器如何使用 HTTP 的一部分。

# sql-server - 该文件位于数据库文件不支持的网络路径上

> ID：11114772
> 
> 赞同：2
> 
> 时间：2012-06-20T07:27:51.093
> 
> 标签：sql-server

从位于网络驱动器上的文件`.mdf`创建数据库时，我收到此错误消息。`.ldf`

执行的查询：

```
create database DatabaseName ON
  (FileName = '\\gyancluster-sql\g$\Backup\WSS_Content_DB.mdf'),
  (FileName = '\\gyancluster-sql\g$\Backup\WSS_Content_DB_log.ldf')
  for attach
GO 
```

错误

> 文件“\gyancluster-sql\g$\Backup\WSS_Content_DB.mdf”位于数据库文件不支持的网络路径上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T07:34:22.680

那么你的问题是什么？问题是什么？毫无疑问 - 只是倾倒一个句子;）

我的意思是，不想听起来太讽刺，但你可以阅读，或者？

> 文件“\gyancluster-sql\g$\Backup\WSS_Content_DB.mdf”位于数据库文件不支持的网络路径上。

这很清楚，不是吗？不支持它 - 出于很好的理由，顺便说一句，直到现在。

您现在是在问我们 MS 是否在撒谎吗？不，他们不会撒谎 - 这是不支持的。他们说的是真的。

有很多方法（http://support.microsoft.com/kb/304261），但就是这样；）

你想让我们改写错误信息吗？也许会变成“老兄，那不会工作，不酷，看”？更清晰？

说真的 - 听起来很刺耳，但我总是想知道为什么人们实际上并没有阅读错误信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-10T07:04:48.143

在尝试创建数据库之前使用 DBCC TRACEON(1807)。

此外，您可以在 MSSQL 服务器启动参数中添加 linea“-t 1807”，它将使更改永久化。上面的命令允许您使用网络存储，但在重新启动时您将丢失标志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T16:40:13.427

You are lucky that the OS is warning you that opening database files directly over a network is a bad idea. Older database api's let you do that with no warning and then network users of that database application are forever blighted with corrupt databases.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T18:04:30.330

如果 \gyancluster-sql\g$ 指的是计算机 gyancluster-sql 上的本地磁盘 G，它也恰好是运行 sql 服务的地方，那么你真的应该使用

```
create database DatabaseName ON
  (FileName = 'G:\Backup\WSS_Content_DB.mdf'),
  (FileName = 'G:\Backup\WSS_Content_DB_log.ldf')
  for attach
 GO 
```

请注意，即使您是从另一台计算机运行脚本，这仍然适用。

这仍然是一个坏主意，但您可以使用 UNC 名称，但前提是运行 sql 的服务能够访问共享（例如，如果在域管理员帐户下运行），但通常会考虑不必要的安全风险。

如果您真的想将数据库存储在网络设备上，那么显然这意味着 sql 服务确实需要访问共享，所以这是首先要检查的，但您还需要阅读 Chris Dickson 的 Microsoft 文章向您指出（即[http://support.microsoft.com/kb/304261](http://support.microsoft.com/kb/304261)），其中详细说明了何时支持此功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-30T19:41:02.813

您需要启用通过网络共享的数据库文件，下面的帖子将逐步解释如何做到这一点。

[https://blogs.msdn.microsoft.com/varund/2010/09/02/create-a-sql-server-database-on-a-network-shared-drive/](https://blogs.msdn.microsoft.com/varund/2010/09/02/create-a-sql-server-database-on-a-network-shared-drive/)

同一篇文章解释了这样做的风险。

我希望这有帮助

问候

# ubuntu-11.10 - 安装马特宏峰时出错

> ID：11114773
> 
> 赞同：2
> 
> 时间：2012-06-20T07:27:51.983
> 
> 标签：ubuntu-11.10, bigbluebutton

我正在使用 BigBlueButton (BBB)。

我想录制和播放BBB[在这里](http://www.diigo.com/annotated/74d0863b1c08348003d94c09e024d8e6)展示的视频文件，但该功能直到 BBB 的下一个版本才准备好，正如其所有者 Fred Dixon 所说的[那样](https://groups.google.com/d/msg/bigbluebutton-dev/NYT703eaLyw/QpWwo4ddRvsJ)。

按照建议，我开始使用 Matterhorn 进行处理和播放。

我正在按照本指南在 Ubuntu 11.10 上安装 Matterhorn 1.3：http: [//opencast.jira.com/wiki/display/MHDOC/Install+Source+Linux+v1.3](http://opencast.jira.com/wiki/display/MHDOC/Install+Source+Linux+v1.3)

当步跑马特宏峰

```
sh /opt/matterhorn/felix/bin/start_matterhorn.sh 
```

然后我收到错误消息：

```
Auto-properties start: file:lib/org.apache.felix.scr-1.6.0.jar (org.osgi.framework.BundleException: Unable to cache bundle: file:lib/org.apache.felix.scr-1.6.0.jar - java.io.FileNotFoundException: lib/org.apache.felix.scr-1.6.0.jar (No such file or directory))
Auto-properties start: file:lib/org.apache.felix.eventadmin-1.2.12.jar (org.osgi.framework.BundleException: Unable to cache bundle: file:lib/org.apache.felix.eventadmin-1.2.12.jar - java.io.FileNotFoundException: lib/org.apache.felix.eventadmin-1.2.12.jar (No such file or directory))
Auto-properties start: file:lib/org.apache.felix.metatype-1.0.4.jar (org.osgi.framework.BundleException: Unable to cache bundle: file:lib/org.apache.felix.metatype-1.0.4.jar - java.io.FileNotFoundException: lib/org.apache.felix.metatype-1.0.4.jar (No such file or directory))
Auto-properties start: file:lib/org.apache.felix.http.bundle-2.0.4.jar (org.osgi.framework.BundleException: Unable to cache bundle: file:lib/org.apache.felix.http.bundle-2.0.4.jar - java.io.FileNotFoundException: lib/org.apache.felix.http.bundle-2.0.4.jar (No such file or directory))
... 
```

和上面显示的类似错误消息

我已经研究过它并尝试运行命令行，`sudo java -jar opt/matterhorn/felix/bin/felix.jar` 然后得到上面显示的错误消息

启动 Matterhorn 服务器时如何修复错误？

# wxpython - 可以/如何创建一个类面板并在我的主框架中使用它（wxpython）

> ID：11114774
> 
> 赞同：0
> 
> 时间：2012-06-20T07:27:52.950
> 
> 标签：wxpython, frames, panels

我目前的设置

```
class AppFrame(wx.Frame):
    def__init__(self,parent,id=-1,title='program'):
        wx.Frame.__init__(self,parent,id,title,size=((400,400)))
        # Panels
        self.AppPanel = wx.Panel(self,-1)
        self.AppPanel.SetBackgroundColour('grey')

class NBPanel(wx.Notebook):
     def__init__(etc) 
```

如何在我的 AppFrame 中添加这个 NBPanel 类（我试图制作一个笔记本面板），以便它在我的 AppFrame 中显示两个面板。在试图弄清楚这一点时，我的头脑变得疯狂。我是否想让 NBPanel 类成为 AppPanel 的子类？

如：

```
class AppFrame(wx.Frame):
    def__init__(self,parent,id=-1,title='Mango'):
        wx.Frame.__init__(self,parent,id,title,size=((400,400)))

        # Panels
        self.AppPanel = wx.Panel(self,-1)
        self.AppPanel.SetBackgroundColour('grey')

        **self.AppPanel2 = NBPanel(self.AppPanel,-1)** 
```

我尝试了一些变体，基本上得到了几种错误。

顺便说一句，（AppPanel）并不像这段代码显示的那样裸露，它有一个设置为左垂直的尺寸器，带有几个按钮等。我希望笔记本面板占据 AppFrame 的大部分中间区域，因为我仍然需要在笔记本面板的右侧添加另一个面板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:11:05.343

您仍然需要一个覆盖整个框架的面板，如果面板是框架的唯一子级，这将自动发生。

要获得所需的布局，您需要在水平盒子大小调整器 ( `wx.BoxSizer(wx.HORIZONTAL)`) 中安排内容。如果您首先添加带有按钮的 sizer，然后添加 NBPanel，然后在右侧添加您想要的面板，您应该会获得所需的布局。

所有这些控件都需要 AppPanel 作为父控件，并且您需要将水平大小调整器设置为 AppPanels 大小调整器。

为了让笔记本占据框架中的大部分空间，您需要将其添加到比例为 1 的尺寸器中，而其他项目的比例为 0。

如果这会让事情变得更清楚，我很乐意制作一个快速演示:)

## 编辑：

这是一个简单的示例，它应该为您所追求的布局提供一个大纲，如果您有任何问题，请告诉我。另请查看[本指南](http://wiki.wxpython.org/AnotherTutorial)，它真的很棒，并提供了大量示例来帮助您开始使用不同的程序和布局。

```
import wx

class NoteBookPage(wx.Panel):
    def __init__(self,parent,message):
        wx.Panel.__init__(self,parent)
        sizer= wx.BoxSizer(wx.VERTICAL)
        message= wx.StaticText(self,label=message)
        sizer.Add(message,1,wx.ALIGN_CENTRE)
        self.SetSizer(sizer)

class AppFrame(wx.Frame):
    def __init__(self,parent,id=-1,title='program'):
        wx.Frame.__init__(self,parent,id,title,size=((400,400)))
        # Panels
        self.AppPanel = wx.Panel(self,-1)
        self.AppPanel.SetBackgroundColour('grey')

        main_sizer= wx.BoxSizer(wx.HORIZONTAL)

        button_sizer= wx.BoxSizer(wx.VERTICAL)

        #buttons
        self.button1= wx.Button(self.AppPanel,label="Button 1")
        button_sizer.Add(self.button1,0,wx.EXPAND)
        self.button2= wx.Button(self.AppPanel,label="Button 2")
        button_sizer.Add(self.button2,0,wx.EXPAND)
        self.button3= wx.Button(self.AppPanel,label="Button 3")
        button_sizer.Add(self.button3,0,wx.EXPAND)
        main_sizer.Add(button_sizer,0,wx.ALL,5)

        #notebook
        self.Notebook= wx.Notebook(self.AppPanel)
        page1= NoteBookPage(self.Notebook,"I'm on page 1")
        page2= NoteBookPage(self.Notebook,"I'm on page 2")
        self.Notebook.AddPage(page1,"Page 1")
        self.Notebook.AddPage(page2,"Page 2")
        main_sizer.Add(self.Notebook,1,wx.ALL|wx.EXPAND,5)

        #panel on the right (I'm just re-using the NoteBookPage panel to save making a new one)
        right_panel= NoteBookPage(self.AppPanel,"right panel")
        main_sizer.Add(right_panel,0,wx.ALL,5)

        self.AppPanel.SetSizer(main_sizer)

        self.Show()

if __name__ == "__main__":
    app= wx.App(False)
    frame= AppFrame(None)
    app.MainLoop() 
```

# firefox - Mozilla Developer Network 的 Demo Studio 在哪里保存用户数据？

> ID：11114776
> 
> 赞同：0
> 
> 时间：2012-06-20T07:27:53.247
> 
> 标签：firefox

我刚刚访问了[https://developer.mozilla.org/en-US/demos/detail/the-planetarium/launch](https://developer.mozilla.org/en-US/demos/detail/the-planetarium/launch)

然后我点击顶部栏中的“喜欢它”按钮。它显示“你喜欢”。然后我清除了 Chrome 的用户数据。但我仍然可以看到按钮显示“你喜欢”。

如果我在另一个浏览器上打开此页面，它会显示“喜欢它”。

那么 Mozilla 开发者网络的 Demo Studio 将用户数据保存在哪里呢？用户如何删除他们的数据？我认为用户几乎不可能删除这些数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:04:25.007

你想多了 - 数据根本没有存储在浏览器中。服务器似乎使用您的 IP 地址和用户代理字符串的组合来记住您的选择。如果我启动不同的浏览器，我不会看到我的选择被记住。一旦我将用户代理字符串操作为与第一个浏览器相同，我就会在那里看到“你喜欢”。换句话说，要“删除”您的数据，您只需将浏览器更新到较新的版本（使用某些扩展程序操作用户代理字符串将具有相同的效果）或重新连接到 Internet 以获取新的 IP 地址。

**更新**：这个应用程序的源代码显然在 Mozila 的[kuma 存储库](https://github.com/mozilla/kuma/)中。“点赞计数器”是一个`ActionCounterField`，管理唯一性的代码是[`ActionCounterUniqueManager`](https://github.com/mozilla/kuma/blob/7eba73f58d/apps/actioncounters/models.py#L36)。如果您检查[`get_unique`实现](https://github.com/mozilla/kuma/blob/7eba73f58d/apps/actioncounters/utils.py#L43)，您会发现它确实使用 IP 地址和用户代理为未经过身份验证的用户构建“用户标识符”。更改IP地址似乎没有效果的事实可能是一个错误（可能与Mozilla负责缓存的反向代理有关）。

**Update2**：确认这是一个错误。我启动 Chrome 并立即看到我喜欢这个演示 - 显然代码当前看到每个人的相同 IP 地址。对此提交了[错误 766492](https://bugzilla.mozilla.org/show_bug.cgi?id=766492)。

# c++ - Valgrind 在应用程序变为守护进程时退出

> ID：11114778
> 
> 赞同：0
> 
> 时间：2012-06-20T07:28:01.403
> 
> 标签：c++, linux, daemon, valgrind

[我有一个基于此守护程序示例http://www.itp.uzh.ch/~dpotter/howto/daemonize](http://www.itp.uzh.ch/~dpotter/howto/daemonize)的代码的 Linux 守护程序（我使用单个 fork 使其成为守护程序）的 C++ 应用程序。我正在尝试使用 valgrind 查找内存泄漏：

```
/usr/bin/valgrind.bin --suppressions=/usr/lib/valgrind/debian-libc6-dbg.supp --tool=memcheck --child-silent-after-fork=no --trace-children=yes --leak-check=full --show-reachable=yes /usr/sbin/<my daemon> 
```

但是 valgrind 在初始进程终止后立即退出，而应用程序仍在子进程中工作。如果我注释掉退出初始进程的代码，那么 valgrind 将继续工作。但这不是一个干净的解决方案。没有它，我如何让 valgrind 继续工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:36:03.703

Valgrind 的常见问题解答特别指出它不能附加到已经运行的进程。我想他们所有的仪器设置在 fork() 上也丢失了。
他们确实提到了一个听起来非常复杂的解决方法（[在这里](http://valgrind.org/docs/manual/faq.html#faq.attach)），但我认为它会增加更多不需要的复杂性，而不仅仅是不进行守护进程。

# haskell - Snap 0.9 路由行为

> ID：11114781
> 
> 赞同：3
> 
> 时间：2012-06-20T07:28:06.987
> 
> 标签：haskell, haskell-snap-framework

我无法弄清楚 Snap 0.9（很可能还有其他版本）中的路由异常

我知道“/”是一个捕获所有内容的模式，除非我将 ifTop 函数放在处理程序中，对吧？因此，使用 ("/", blah) 路由，任何 URL 都应该由 blah 处理程序处理，对吗？

使用 snap init 生成的默认应用程序，除了根请求的 index.tpl 之外，我无法快速渲染任何内容。

给定根（“/”，等等）和处理程序

```
blah :: Handler App App ()
blah = render "blah" 
```

它为除根 URL 之外的任何 URL 呈现 blah 模板！所以“/anything”呈现blah模板，但“/”呈现索引模板。

将 blah 处理程序更改为

```
blah = ifTop $ render "blah" 
```

不会改变任何行为。只有在这种情况下，我无法路由到“/anything”。路由到“/”仍然呈现索引模板。我错过了什么？如何获得“/”来呈现我选择的模板？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T09:07:24.057

如果你有“index.tpl”模板，那么无论如何它都会被用来渲染根页面。问题是`heistInit`功能：

```
heistInit :: FilePath                 -- ^ Path to templates
          -> SnapletInit b (Heist b)
heistInit templateDir = do
    makeSnaplet "heist" "" Nothing $ do
        hs <- heistInitWorker templateDir defaultHeistState
        addRoutes [ ("", heistServe) ]
        return hs 
```

您会看到它调用`addRoutes`. 因此，如果您`heistInit`在添加自己的路由之前调用（默认模板*会这样做*），那么如果存在具有相同名称的模板（或 index.tpl 为根），您的处理程序甚至没有机会。

所以只需放在`addRoutes routes`上面`heistInit`（`app`在默认模板中的 Site.hs 中）。

# jvm - 来自 Valgrind 的 JVM 泄漏

> ID：11114784
> 
> 赞同：1
> 
> 时间：2012-06-20T07:28:28.580
> 
> 标签：jvm, memory-leaks, valgrind

第一次使用 JNI 访问 ac 库时，我想到了使用 valgrind 来检查任何内存泄漏。Valgrind 在 jvm 中报告了很多泄漏。:(

使用 Push/Poplocal 框架来管理本地引用，当然还需要从 Get(UTFChars/Arrays) 释放引用。除此之外，它还报告 AttachCurrentThread 方法可能丢失，而实际上我通过回调函数中的 DetachCurrentThread 成功分离了它。

现在我只需要建议/解释报告的泄漏根本不是真的，不会影响我的应用程序，尤其是它在服务器端的应用程序。对我来说，我怀疑在我的应用程序退出并且 valgrind 已经完成检查部分之后，库的卸载和销毁尚未完成。希望听到任何有过这种情况的人的意见。

//示例代码

```
void event_callback(void .., int ..)
{

printf("--Enter event_callback Function--\n");  
int detach = 0;

//store our jnienv for this thread
JNIEnv *g_env = NULL;

// if our jni env is not attached for this thread, then we will attach it
int getEnvStat = (*g_jvm)->GetEnv(g_jvm, (void **)&g_env, JNI_VERSION_1_6);
if (getEnvStat == JNI_EDETACHED) 
{
    //if not attached, then lets attached g_env
    printf("JNIEnv not attached. Attaching..\n");

    if ((*g_jvm)->AttachCurrentThread(g_jvm, (void **) &g_env, NULL) != 0)
    {
        printf("Failed to attach\n");
        return;
    }
    else
    {
        detach = 1;
    }
}
else if (getEnvStat == JNI_OK)
{
    printf("GetEnv: jenv is just OK, already attached.\n");

} 
else if (getEnvStat == JNI_EVERSION) 
{
    printf("GetEnv: version not supported\n");
    return;
}

if((*g_env)->PushLocalFrame(g_env, 10)<0)
{
    printf("Out of memory\n");

}

//...some useful code here

(*g_env)->PopLocalFrame(g_env, NULL);

if(detach == 1)
{
        int result = (*g_jvm)->DetachCurrentThread(g_jvm);
    printf("DetachCurrentThread result: %d\n", result);
}   

printf("--Exit event_callback Function--\n");
} 
```

报告：

**==20914== 1 块中的 432 字节可能在 1,035 的丢失记录 903 中丢失**

==20914== 在 0x4028876: malloc (vg_replace_malloc.c:236)

==20914== by 0x4950461: os::malloc(unsigned int) (在/usr/lib/jvm/java-7-openjdk-i386/jre/lib/i386/client/libjvm.so)

==20914== by 0x464470C: CHeapObj::operator new(unsigned int) (在/usr/lib/jvm/java-7-openjdk-i386/jre/lib/i386/client/libjvm.so)

==20914== by 0x496BB13: ParkEvent::Allocate(Thread*) (在/usr/lib/jvm/java-7-openjdk-i386/jre/lib/i386/client/libjvm.so)

==20914== by 0x4A13CCD: Thread::Thread() (在/usr/lib/jvm/java-7-openjdk-i386/jre/lib/i386/client/libjvm.so)

==20914== by 0x4A15091: JavaThread::JavaThread(bool) (在 /usr/lib/jvm/java-7-openjdk-i386/jre/lib/i386/client/libjvm.so)

==20914== 0x4853723：attach_current_thread.isra.103.part.104（在 /usr/lib/jvm/java-7-openjdk-i386/jre/lib/i386/client/libjvm.so 中）

==20914== by 0x7B17791: event_callback (在/home/Wrapper/TJNIBridge/libJNIBridge.so)

==20914== 由 0x7B44431: xmpp_event_main (my_xmpp.c:562)

==20914== by 0x412146D: 克隆 (clone.S:130)

**我还在 jvm lib 的下方粘贴了一些报告的泄漏。**

**==20914== 1 块中的 4,612（1,284 直接，3,328 间接）字节在 1,035 的丢失记录 1,009 中肯定丢失**

==20914== 在 0x4028876: malloc (vg_replace_malloc.c:236)

==20914== by 0x4950461: os::malloc(unsigned int) (在/usr/lib/jvm/java-7-openjdk-i386/jre/lib/i386/client/libjvm.so)

==20914== by 0x464470C: CHeapObj::operator new(unsigned int) (在/usr/lib/jvm/java-7-openjdk-i386/jre/lib/i386/client/libjvm.so)

==20914== by 0x4A14BE9：WatcherThread::start()（在 /usr/lib/jvm/java-7-openjdk-i386/jre/lib/i386/client/libjvm.so 中）

==20914== by 0x4A192DF: Threads::create_vm(JavaVMInitArgs*, bool*) (在 /usr/lib/jvm/java-7-openjdk-i386/jre/lib/i386/client/libjvm.so)

==20914== 0x4865BD8：JNI_CreateJavaVM（在 /usr/lib/jvm/java-7-openjdk-i386/jre/lib/i386/client/libjvm.so 中）

==20914== 由 0x41ECD30: start_thread (pthread_create.c:304)

==20914== by 0x412146D: 克隆 (clone.S:130)

**==20914== 1 个块中的 8 个字节在 1,035 的丢失记录 41 中肯定丢失了**

==20914== 在 0x4028876: malloc (vg_replace_malloc.c:236)

==20914== by 0x4950461: os::malloc(unsigned int) (在/usr/lib/jvm/java-7-openjdk-i386/jre/lib/i386/client/libjvm.so)

==20914== by 0x464470C: CHeapObj::operator new(unsigned int) (在/usr/lib/jvm/java-7-openjdk-i386/jre/lib/i386/client/libjvm.so)

==20914== by 0x470E29D: CSpaceCounters::CSpaceCounters(char const*, int, unsigned int, ContiguousSpace*, GenerationCounters*) (在 /usr/lib/jvm/java-7-openjdk-i386/jre/lib/i386 /client/libjvm.so)

==20914== by 0x47A3BF9: DefNewGeneration::DefNewGeneration(ReservedSpace, unsigned int, int, char const*) (在 /usr/lib/jvm/java-7-openjdk-i386/jre/lib/i386/client/libjvm 。所以）

==20914== by 0x47FC623: GenerationSpec::init(ReservedSpace, int, GenRemSet*) (在/usr/lib/jvm/java-7-openjdk-i386/jre/lib/i386/client/libjvm.so)

==20914== by 0x47EF9D4: GenCollectedHeap::initialize() (在/usr/lib/jvm/java-7-openjdk-i386/jre/lib/i386/client/libjvm.so)

==20914== 由 0x4B95FF3: ??? （在/usr/lib/jvm/java-7-openjdk-i386/jre/lib/i386/client/libjvm.so）

**Ubuntu 11.10 OpenJDK 7**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T16:50:30.380

JVM 和 Valgrind 相处不来。只需在 Valgrind 下运行 JVM 而不给我任何输入，就会产生大量警告。

您将需要为 JVM 错误生成抑制。

尝试禁用 JIT。

# sql-server - SQL Server 在同一查询中使用多种日期语言

> ID：11114787
> 
> 赞同：2
> 
> 时间：2012-06-20T07:28:56.240
> 
> 标签：sql-server, date, translation, ssas

在使用 SSIS/SSAS 的数据仓库项目中，我必须生成自己的时间维度，因为我有要集成的个人数据。

我的问题在于 SSAS，因为我还需要集成翻译。阅读文档后，我找到了一个命令来设置当前会话的语言，`SET LANGUAGE ENGLISH`但我无法为查询的不同字段更改语言。

有没有办法`MONTH_NAME`用法语生成并`MONTH_NAME_DE`用德语生成？

这是我在互联网上找到的脚本

```
WITH Mangal as 
( 
    SELECT Cast ('1870-01-01' as DateTime) Date --Start Date 
    UNION ALL 
    SELECT Date + 1 
    FROM Mangal 
    WHERE Date + 1 < = '2015-12-31' --End date 
) 

SELECT 
    Row_Number() OVER (ORDER BY Date) as ID
    , Date  as DATE_TIME
    , YEAR (date) as YEAR_NB 
    , MONTH (date) as MONTH_NB 
    , DAY (date) as DAY_NUMBER 
    , DateName (mm, date) as MONTH_NAME 
    , LEFT ( DateName (mm, date), 3) KMONTH_NAME 
    , DateName (dw, date) as DAY_NAME 
    , LEFT (DateName (dw, date), 3) as KDAY_NAME
    , (SELECT TOP 1 FIELD
        FROM TABLEXY
        WHERE Date BETWEEN TABLEXY.DATE_FROM AND LEGISLATUR.DATE_TO
            AND LANGAGE = 'FR'
    ) as PERSONAL_FIELD
    , (SELECT TOP 1 FIELD
        FROM TABLEXY
        WHERE Date BETWEEN TABLEXY.DATE_FROM AND LEGISLATUR.DATE_TO
            AND LANGAGE = 'DE'
    ) as PERSONAL_FIELD_DE

FROM Mangal 

OPTION (MAXRECURSION 0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T07:39:51.013

SQL Server 有一个包含月份和工作日名称的表。但是，它们存储为逗号分隔值：

```
select
    months,
    shortmonths,
    days
from
    master.dbo.syslanguages
where
    alias in ('English','French', 'German') 
```

您可以在查询中使用它。

# python - Bash：安装 virtualenvwrapper [不重新启动 shell] 后如何刷新 shell？

> ID：11114788
> 
> 赞同：7
> 
> 时间：2012-06-20T07:29:13.213
> 
> 标签：python, bash, ubuntu, fabric, apt-get

我`python-fabric`用来设置我的服务器，它以编程方式配置服务器。

所以，我安装`virtualenvwrapper`为：

```
sudo apt-get install virtualenvwrapper 
```

安装 - Virtualenvwrapper 并将其初始化脚本添加到 shell 启动。

通常我们重新启动 shell 并初始化它，但在我的情况下，我无法重新启动 shell `fabric`。

由于它是随它一起安装的，因此`apt-get`我无法在`~/.bashrc`or`~/.bash_profile`或 or中找到初始化脚本条目`/etc/bash.bashrc`

那么，在哪里`apt-get`添加了对初始化脚本的调用？

如何在`shell`不重新启动 shell 的情况下刷新？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-21T05:20:22.203

解决了问题：

```
source /etc/bash_completion.d/virtualenvwrapper 
```

这是它存储所有`.bashrc`自动包含的魔法的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T09:04:41.160

试试`hash -r`。它是一个内置的 bash。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T09:22:04.080

尝试

```
source /usr/local/bin/virtualenvwrapper.sh 
```

但我不确定从 apt-get 安装的 virtualenvwrapper.sh 的路径。（我通常使用easy_install）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T07:33:19.193

试试`rehash`。(http://www.computerhope.com/unix/urehash.htm)

# django - 找不到 django 和 riak 引擎

> ID：11114789
> 
> 赞同：2
> 
> 时间：2012-06-20T07:29:20.123
> 
> 标签：django, riak

我对 django riak 引擎有这个错误：

django.core.exceptions.ImproperlyConfigured: 'django_riak_engine.riak' 不是可用的数据库后端。尝试使用 django.db.backends.XXX，其中 XXX 是以下之一：

我已经安装了所有需要的依赖项。

这是我的 settings.py ：

```
# Django settings for Lin project.

DEBUG = True
TEMPLATE_DEBUG = DEBUG

ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE': 'django_riak_engine.riak',
        'NAME': 'mydatabase',
        'USER': '',
        'PASSWORD': '',
        'HOST': 'localhost',
        'PORT': '8091',
        'SUPPORTS_TRANSACTIONS': False,
    },
}

# Local time zone for this installation. Choices can be found here:
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
# although not all choices may be available on all operating systems.
# On Unix systems, a value of None will cause Django to use the same
# timezone as the operating system.
# If running in a Windows environment this must be set to the same as your
# system time zone.
TIME_ZONE = 'America/Chicago'

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'en-us'

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# If you set this to False, Django will not format dates, numbers and
# calendars according to the current locale
USE_L10N = True

# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
MEDIA_ROOT = ''

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = ''

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = ''

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

# URL prefix for admin static files -- CSS, JavaScript and images.
# Make sure to use a trailing slash.
# Examples: "http://foo.com/static/admin/", "/static/admin/".
ADMIN_MEDIA_PREFIX = '/static/admin/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

# Make this unique, and don't share it with anybody.
SECRET_KEY = ''

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
)

ROOT_URLCONF = 'Lin.urls'

TEMPLATE_DIRS = (
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    'django.contrib.admindocs',
    'contacts',
)

# A sample logging configuration. The only tangible logging
# performed by this configuration is to send an email to
# the site admins on every HTTP 500 error.
# See http://docs.djangoproject.com/en/dev/topics/logging for
# more details on how to customize your logging configuration.
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
} 
```

你有什么想法吗？

问候

比西埃

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:18:01.227

您是否安装了所有依赖项？从标准的 Python shell 尝试

```
from django_riak_engine import riak 
```

看看你是否得到错误。

# vb.net - 保存和加载数据结构项

> ID：11114793
> 
> 赞同：1
> 
> 时间：2012-06-20T07:29:47.207
> 
> 标签：vb.net, console, structure

我对 VB.NET 很陌生，我正在尝试创建一个可以编写、保存、加载和编辑数据集的控制台应用程序。

可以说我有这样的事情：

```
Imports System
Module Module1

    Public Structure EMPLOYEE
        Dim Firstname As String
        Dim Middlename As String
        Dim Lastname As String
        Dim ID As String
    End Structure

    Sub Main()
        Dim John As New EMPLOYEE
        John.Firstname = "John"
        John.Middlename = vbNullString
        John.Lastname = "Smith"
        John.ID = "000230"
    End Sub

End Module 
```

我想要做的是将信息保存到以后可以读取并格式化为 EMPLOYEE 结构的文件中，问题是我不知道该怎么做。我想我可以将它保存到一个格式化的 .txt 中，如下所示：

```
000230.txt
FIRSTNAME=John
MIDDLENAME=
LASTNAME=Smith
ID=000230 
```

但是，我不知道如何加载数据，以便可以在 EMPLOYEE 结构系统中对其进行操作。请帮忙？

我不确定我的问题是否足够清楚，因为如您所见，我对编程很陌生，并且基本上不熟悉语音术语。请问有什么我没有说清楚的，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:33:22.100

节省：

```
Dim objStreamWriter As StreamWriter
objStreamWriter = New StreamWriter("C:\" & John.ID & ".txt")
objStreamWriter.WriteLine("FIRSTNAME=" & John.Firstname & vbcrlf & "Lastname=" & John.Lastname )
objStreamWriter.Close() 
```

使用 System.IO 和 System.text

# dll - dll文件可以记住一个值吗？

> ID：11114795
> 
> 赞同：0
> 
> 时间：2012-06-20T07:29:52.263
> 
> 标签：dll

我有这个代码：

```
static int nr = 0;

public static void MyMethod() {
if (nr == 0) nr = 1;
} 
```

我构建了项目并获得了 dll 文件。我第一次使用 dll 文件，我确定 nr 为 0，并且 nr 将获得“1”值。我破坏了 AppDomain，我失去了那个价值。

我的问题：我有 dll 文件。
我第一次使用 dll 文件，我的代码生成了一个值。我可以在不编码或不保存在文件或注册表中的情况下在我的代码中维护该值或任何值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:44:23.337

如果您只想在该特定页面上维护该值，则将其存储在全局变量或 ViewState 内部对象中。用于会话中的用户级存储。

# iphone - iPhone中的AES加密

> ID：11114805
> 
> 赞同：0
> 
> 时间：2012-06-20T07:30:27.363
> 
> 标签：iphone, ios, encryption, aes, itunes

在我的 iphone 应用程序中，我必须使用 AES128 加密标准加密文本数据。此加密数据将在 POST 请求中发送到服务器，来自服务器的数据将以加密形式在应用程序中解密。现在的问题是，如果我在我的 iphone 应用中实现此行为并将其提交到应用商店，苹果会批准/授权我的应用吗？所有答案将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T07:36:45.570

[这](http://tigelane.blogspot.it/2011/01/apple-itunes-export-restrictions-on.html)是我在谷歌上搜索同一问题时能够找到的最新信息。

基本上，您需要获得一个*加密注册号*( **ERN** )，在回答与在应用程序中使用加密相关的问题时，您将通过 iTunesConnect 发送该号码。请注意，我不确定这是否可以从美国以外的人那里完成，但我想没有问题。

# sharepoint - 如何强制 Sharepoint 使用桌面版而不是移动版网站？

> ID：11114809
> 
> 赞同：0
> 
> 时间：2012-06-20T07:30:51.217
> 
> 标签：sharepoint

我已经安装了sharepoint，并且正在将它与一些移动终端一起使用。我需要强制sharepoint“发送”网站的桌面版本，而不是移动版本。是否可以 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:02:47.707

是的，

您可以编辑 web.config 并在 system.web 节点结束之前添加

```
<browserCaps>
<result type="System.Web.Mobile.MobileCapabilities, System.Web.Mobile, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"/>
<filter>isMobileDevice=false</filter>
</browserCaps> 
```

或者，您可以在 Web 应用程序目录中编辑 compat.browser 以指定每个设备是否应被理解为移动设备

```
<capability name="isMobileDevice" value="false" /> 
```

希望它有所帮助！

# c#-4.0 - 我们如何从 csv 文件中删除/删除空白行而不将其加载到 C# 中的内存中？

> ID：11114810
> 
> 赞同：1
> 
> 时间：2012-06-20T07:30:52.660
> 
> 标签：c#-4.0, csv

我有一个可能有空行或空白行的 csv 文件。我想删除这样的行，但问题是 csv 文件可能非常大。因此，我正在寻找一种无需将其加载到内存中的方法。

对我有用的解决方案是使用 DataTable 或 StreamReader，但它们都将使用不可取的内存。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T07:35:48.240

我不认为你可以在不加载文件的情况下做到这一点。

我会使用来自[http://www.filehelpers.net](http://www.filehelpers.net)的快速 CSV 读取器/写入器- 我相信您可以将写入器流链接到读取器流，这样您就可以边阅读边写，而无需*将整个文件*加载到一次。

# javascript - 是否可以让 javascript 使用 nav.html 中的锚点正确执行平滑滚动？

> ID：11114815
> 
> 赞同：0
> 
> 时间：2012-06-20T07:31:37.440
> 
> 标签：javascript, jquery, html, modularity

我正在尝试创建一个采用平滑滚动的模块化 html 文档。

如果我不直接将锚点放在文档中，它不会平滑滚动。

[http://www.cincitucky.com/](http://www.cincitucky.com/)是网站。

[http://www.cincitucky.com/_scripts/script.js](http://www.cincitucky.com/_scripts/script.js)显示了已加载的 html 元素，其中“nav.html”已弃用，因为我必须将其直接放在 index.html 中才能正常工作。

是否可以让 javascript 使用 nav.html 中的锚点正确执行平滑滚动？

我在这里问之前彻底检查了。我希望有人可以在这方面帮助我。

此外，是否有一个很棒的网站可以解释如何改善/解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:34:05.177

由于您通过（异步）ajax 调用加载 nav 元素，因此您的链接在文档就绪事件中不可用，因此在您的外部`script.js`更改此

```
$('a[href^="#"]').click(function(event) {
... 
```

进入这个

```
$('body').on('click', 'a[href^="#"]', function(event) {
... 
```

这样做您将`body`通过其传播捕获元素上的事件（这种技术称为*事件委托*）

# android - 在 android 的 HorizantalListView 中突出显示选定的图像，它将保持选中状态，直到没有单击另一个图像

> ID：11114818
> 
> 赞同：4
> 
> 时间：2012-06-20T07:31:51.433
> 
> 标签：android, android-listview, horizontalscrollview

我正在使用 HorizantalListView，但是当我点击列表中的任何元素时，我想显示它已被选中，并且它应该保持选中状态，直到未单击另一个图像如何可能请帮助我。

![在此处输入图像描述](../Images/f9a35a585716db932ba086385baa7982.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T07:39:46.847

使其成为切换按钮而不是 imageView。然后在 xml 上创建一个选择器，其中包含您希望在每个对应状态下的各种图像。（我现在不确定是否可以对 imageView 进行同样的操作，这就是我告诉你使用切换按钮的原因）。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true"
        android:drawable="@drawable/button_pressed"/>
    <item android:state_pressed="false"
            android:drawable="@drawable/button_rested"/>
    <item android:state_enabled="false"
            android:drawable="@drawable/button_disabled"/>
</selector> 
```

在布局上

```
<ToggleButton android:id="@+id/image" android:layout_width="fill_parent"
     android:layout_height="wrap_content" android:background="@null" android:gravity="center_horizontal" 
     android:src="@drawable/button_selector"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T07:38:54.287

这是我的做法 - 我的图像来自 cursorAdapter 所以

1.) 在适配器中，写了一个函数

```
/***
     * To change the colour of list item selected
     * 
     * @param position
     */
    public void setSelected(int position) {
        selectedPosition = position;
    } 
```

2.) 在 BindView 中为继承游标适配器的类

```
// Change the background color
        if (x == selectedPosition) {
            holder.title.setBackgroundResource(R.color.red);
        } 
```

如果您的图像是固定的，您可以在 xml 布局中使用选择器

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T07:45:49.340

您可以使用选择器对 XML 执行此操作，或者使用**onItemClickListener(..)以编程方式执行此操作**

一个不完整的例子：

**item_selector.xml**

```
<item android:state_focused="true" android:state_pressed="true"
    android:drawable="@drawable/list_selector_background_transition" />

<item android:state_focused="true" android:state_pressed="false"
    android:drawable="@drawable/list_selector_background_transition" /> 
```

并且，为了这个目的，而不是 ImageViews，而是使用 ImageButtons。

```
<ImageButton
android:id="@+id/icon"
android:layout_width="50px"
android:layout_height="wrap_content"
android:src="@drawable/item_selector"/> 
```

# r - 改进从一个数据帧到另一个数据帧的数据提取

> ID：11114819
> 
> 赞同：1
> 
> 时间：2012-06-20T07:31:54.870
> 
> 标签：r, for-loop, reshape

我正在寻找一些想法/功能来改进我以非常低效的方式编写的任务。

我的原始数据框如下所示：

```
 CUSIP       Date        Pclose  TRI
1       30161N101   2011-01-03  38.8581 2011-01-03
2       06738G878   2011-01-03  48.4040 2011-01-03
3       74339G101   2011-01-03  24.0880 2011-01-03
4       74348A590   2011-01-03  81.7200 2011-01-03
5       26922W109   2011-01-03  87.8700 2011-01-03
... 
```

“TRI”列包含日期格式的日期。

我想获得的看起来像：

```
 Date        233052109   126650100   251566105   149123101 ...
1   2011-01-03  22.8031     34.3034     11.2645      91.6178
2   2011-01-04  22.6843     34.2740     11.1862      91.1897
3   2011-01-05  22.7933     34.6362     10.9948      91.9779
4   2011-01-06  22.8034     34.2838     11.0470      91.0242
5   2011-01-07  22.6248     34.3034     11.0644      91.2091
.
.
. 
```

在第二个数据框中，每一列（除了日期）都有第一个数据框中的 CUSIP 名称，并填充了来自 Pclose 的数据。

我正在使用常规循环制作我的第二个数据框，但我确信有一种方法可以使编译函数做得更好（也许是子集）

我的职能是：

要构建第二个数据框：

```
function(cusippresent,cusiplist){
    workinglist=list()
    workinglist[1]=as.character('Date')
    position = 2
    for (i in 2:length(cusippresent)) {
        if(cusippresent[i] %in% cusiplist) {
            workinglist[position]=as.character(cusippresent[i]);
            position=position+1
        }
    }

    rm(position)

    Data=data.frame()

    #On remplit la première ligne du dataframe
    #avec des éléments du bon type sinon il y a des problèmes

    Data[1,1]=as.character('1987-11-12')

    Data[1,2]=as.numeric(1)
    for (i in 2:length(workinglist)){Data[1,i]=as.numeric(1)}
    for (i in 1:length(workinglist)){colnames(Data)[i]=workinglist[i]}

    return(Data)    
} 
```

要填充数据框：

```
function(DATA11C,TCusipC){
    nloop = 1
    positionorigine = 1
    positioncible = 1

    #copy of dates
    datelist = DATA11C[,"Date"]
    datelist = unique(datelist)
    for (i in 1:length(datelist)) {
        TCusipC[i,"Date"]=as.character(datelist[i])
    }

    #creation of needed columns
    TCusipC[,ncol(TCusipC)+1] = as.Date(TCusipC[,"Date"])
    colnames(TCusipC)[ncol(TCusipC)] = 'TRI'

    #ordering of tables
    DATA11C=DATA11C[with(DATA11C,order(TRI)),]
    TCusipC=TCusipC[with(TCusipC,order(TRI)),]

    longueur = nrow(TCusipC)

    #filling of the table 
    while(nloop<longueur) {
        while(DATA11C[positionorigine,"TRI"]==TCusipC[positioncible,"TRI"]){
            nom = as.character(DATA11C[positionorigine,"CUSIP"]);
            TCusipC[positioncible,nom]=as.numeric(DATA11C[positionorigine,"Pclose"]);
            positionorigine=positionorigine+1
        };
        nloop=nloop+1;
        positioncible=positioncible+1
    }

    return(TCusipC)
} 
```

关于挖掘什么功能的任何建议？潜在的改进？

非常感谢，

文森特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T07:51:11.237

这正是 reshape 包所做的

```
library(reshape)
cast(Date ~ CUSIP, data = DATA11C, value = "Pclose") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:46:43.240

这是基础 R 中的解决方案`reshape()`：

```
dat = read.table(header=TRUE, text="        CUSIP       Date        Pclose  TRI
1       30161N101   2011-01-03  38.8581 2011-01-03
2       06738G878   2011-01-03  48.4040 2011-01-03
3       74339G101   2011-01-03  24.0880 2011-01-03
4       74348A590   2011-01-03  81.7200 2011-01-03
5       26922W109   2011-01-03  87.8700 2011-01-03")
reshaped.dat = reshape(dat, direction="wide", 
                       timevar="CUSIP", idvar="Date", 
                       drop="TRI")
names(reshaped.dat) = gsub("Pclose.", "", names(reshaped.dat)) 
```

输出：

```
reshaped.dat
#         Date 30161N101 06738G878 74339G101 74348A590 26922W109
# 1 2011-01-03   38.8581    48.404    24.088     81.72     87.87 
```

## 更新：`xtabs()`方法

这也很容易使用`xtabs()`：

```
xtabs(Pclose ~ Date + CUSIP, dat)
#             CUSIP
# Date         06738G878 26922W109 30161N101 74339G101 74348A590
#   2011-01-03   48.4040   87.8700   38.8581   24.0880   81.7200

as.data.frame.matrix(xtabs(Pclose ~ Date + CUSIP, dat))
#            06738G878 26922W109 30161N101 74339G101 74348A590
# 2011-01-03    48.404     87.87   38.8581    24.088     81.72 
```

# c# - System.Web.UI.WebControls.TextBox 多行边框

> ID：11114820
> 
> 赞同：-1
> 
> 时间：2012-06-20T07:32:04.863
> 
> 标签：c#, asp.net, styles

> **可能重复：**
> [默认文本框边框样式和宽度](https://stackoverflow.com/questions/1232188/default-textbox-border-style-and-width)

我的页面上有一些文本框，它应该与后面的代码加红色边框。但是呈现垂直滚动条的多行文本框不会从其侧面显示边框。

这是我设置边框的代码：

```
 foreach (var str in idsRequired)
            {
                var ctrl = (WebControl)FindControl(str);
                if (ctrl != null)
                    ctrl.Style.Add(HtmlTextWriterStyle.BorderColor, "red");
            } 
```

我通过 ID 获取控件并设置它们的边界。问题是：我怎样才能正确地为所有 TextBox 控件加边框？

**编辑**

我最终将边框样式设置为 2px 并出现右边框。正如你在这里看到的：

![在此处输入图像描述](../Images/f89ee6bcd71e9b282cdaf5766a7cb2c7.png)

你怎么解释这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:10:56.503

作为建议，尝试将控件的样式委托给 CSS 文件或 ASP.Net 主题。为什么？因为您通常希望在您的网站上重用相同的样式并想象当您想再次更改样式时（在实际应用程序中经常发生这种情况），您将不得不直接编辑您的代码可能会引入一些不希望的错误，因此避免这只是将您的设计与您的代码分开

*   您可以在 CSS 文件中声明样式并将其导入您的页面：

    使用 CSS

    ```
     .txtWithRedBorder
      {
    border-style: solid;
    border-color: #FF0000; 
    ```

    }

    在你的控制

    ```
     <asp:TextBox runat="server" Rows="5" TextMode="MultiLine" CssClass="txtWithRedBorder" /> 
    ```

    请记住将您的 CSS 文件放在 Theme 文件夹下，并将以下指令添加到页面以自动将所有 CSS 文件导入您的页面

    ```
     <%@ Page Theme="Theme1".... 
    ```

*   或者您可以创建一个 ASP.Net 主题来实现相同的效果：

    ```
    <%@ Page Theme="Theme1"....

    <asp:TextBox runat="server" Rows="5" SkinID="someSkinID" TextMode="MultiLine" /> 
    ```

    在你的皮肤文件中：

    ```
    <asp:TextBox runat="server" BorderColor="Red" BorderStyle="Solid" SkinID="someSkinID" /> 
    ```

    请记住，您需要指定主题：

    ![在此处输入图像描述](../Images/003ac92c1f42fdc0cf9e4ed2fc16d8f2.png)

    这就是结果

    ![在此处输入图像描述](../Images/a2ea1aa94eb5f4dfafc2dfa158261b34.png)

# ruby-on-rails - One Rails 应用程序中的 MongoDB 和 PostgreSQL

> ID：11114822
> 
> 赞同：9
> 
> 时间：2012-06-20T07:32:30.667
> 
> 标签：ruby-on-rails, ruby, mongodb, postgresql, mongohq

我可以在一个 Rails 应用程序中使用 MongoDB 和 PostgreSQL 吗？具体来说，我最终会想要使用像 MongoHQ 这样的东西。到目前为止，我还没有在实验中得到这个工作。令我担心的是，MongoDB 文档特别指出我必须禁用 ActiveRecord。任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-20T07:53:10.067

您无需禁用 ActiveRecord 即可使用 MongoDB。查看[Mongoid](http://mongoid.org/en/mongoid/index.html)，只需将 gem 和任何模型添加到您现有的任何 ActiveRecord 模型旁边。您应该注意，MongoHQ 只是 MongoDB 的托管服务，可以与任何对象文档映射器 (ODM) 一起使用。

有关详细信息，请查看[http://mongoid.org/en/mongoid/docs/installation.html](http://mongoid.org/en/mongoid/docs/installation.html)。只需跳过可选的“摆脱 Active Record”步骤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-02T05:24:48.513

在最近的一个客户端站点上，我使用了一个生产系统，该系统将 MySQL 和 MongoDB 数据与单个 Java 应用程序合并。老实说，这是一场噩梦。在两个数据库之间连接数据需要复杂的 Java 数据结构和大量代码，这实际上是数据库最擅长的。

两个数据库系统的一个用例是在 SQL 数据库中拥有纯事务数据，并将数据聚合到 MongoDB 以进行报告等。事实上，这一直是客户端的原始计划，但沿途数据库交易数据变得相互关联。

该系统变得非常难以维护，因此计划废弃并用一个仅限 MongoDB 的解决方案（使用 Meteor.js）替换。

Postgres 通过它的 jsonb 数据类型对 JSON 文档有很好的支持，并且在 Rails 4.2 下完全支持，开箱即用。我也使用过这个，我觉得它很容易，我会推荐这种方法。

这允许 SQL 和 NoSQL 事务的简单组合，例如

```
select id, blast_results::json#>'{"BlastOutput2","report","results","search","hits"}' 
from blast_caches 
where id in 
(select primer_left_blast_cache_id
from primer3_output_pairs where id in (185423,185422,185421,185420,185419) ) 
```

它不提供完整的 MongoDB 数据操作功能，但可能足以满足大多数需求。

这里有一些有用的链接：http:
[//nandovieira.com/using-postgresql-and-jsonb-with-ruby-on-rails](http://nandovieira.com/using-postgresql-and-jsonb-with-ruby-on-rails)
[https://dockyard.com/blog/2014/05/27/avoid-rails-when-生成-json-responses-with-postgresql](https://dockyard.com/blog/2014/05/27/avoid-rails-when-generating-json-responses-with-postgresql)

也有报道称它在 json 上的性能优于 MongoDB：
[http ://www.slideshare.net/EnterpriseDB/the-nosql-way-in-postgres](http://www.slideshare.net/EnterpriseDB/the-nosql-way-in-postgres)

另一种选择是将您的 Rails 应用程序完全迁移到 MongoDB，Rails 对 MongoDB 有很好的支持。

我不建议运行两个数据库，基于个人对它如何变坏的观察。

# python - python twitter 库 - 使用哪一个？

> ID：11114824
> 
> 赞同：2
> 
> 时间：2012-06-20T07:32:54.983
> 
> 标签：python, twitter, libraries

我想使用 Python 从 Twitter 中提取信息。有一个包含几个 twitter 库的页面：

[https://dev.twitter.com/docs/twitter-libraries](https://dev.twitter.com/docs/twitter-libraries)

现在我不确定该使用哪一个。有没有人有他们的经验？我尝试了 Twython，它很容易处理，但其他的也值得一试吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T07:39:17.847

Tweepy 值得一试，因为它非常方便地将用户、推文、状态等包装到易于访问的 Python 对象中。我使用的另一个是普通的 python-twitter，它确实使接口更容易，但更接近原始骨骼 JSON 查询，并且您必须记住要查询的正确 URL。IIRC，都支持标准交互和使用跟踪和搜索引擎的能力。

看看[http://pypi.python.org/pypi?%3Aaction=search&term=twitter&submit=search](http://pypi.python.org/pypi?%3Aaction=search&term=twitter&submit=search)其他选项 - 但这真的取决于你想做什么以及如何做。我在上述方面取得了成功，但我不能推荐任何*理想*的Python twitter 库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T23:09:14.423

在过去的几周里，我一直在使用 Twitter-Python——通过 Google 托管的那个。我真的很喜欢这个图书馆，虽然我没有用过 tweepy 或 twython。我对 Python 还是很陌生，我发现使用 Twitter-Python 非常直观和简单——这个库有很多方法可以返回几乎任何你想要的数据点。它可能有点令人生畏，因为它有很多代码，但是一旦你熟悉了这个库，我认为它真的很容易使用。正如其他用户所指出的，Twitter-Python 没有流式 API（据我所知），所以如果你需要使用 tweepy。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T07:39:01.943

取决于你到底想做什么。Twython 很好，并且会定期更新。除此之外，

Python Tweeter 应该处理您想要实现的大部分内容。此外，它使用起来既简单又有趣。

如果你需要某种流 API 支持，Tweepy 是你应该去的。

# c# - C# Facebook API 获取所有状态或最后状态消息

> ID：11114825
> 
> 赞同：1
> 
> 时间：2012-06-20T07:32:59.673
> 
> 标签：c#, facebook, facebook-graph-api

我正在尝试使用以下代码获取所有状态消息：

```
public dynamic downloadStatuses(FacebookOAuthResult facebookOAuthResult, string userInput)
    {
        dynamic result = null;
        if (facebookOAuthResult != null)
        {
            if (facebookOAuthResult.IsSuccess)
            {
                this.accessToken = facebookOAuthResult.AccessToken;
                var fb = new FacebookClient(facebookOAuthResult.AccessToken);
                result = fb.Get(userInput + "/statuses?format=json&limit=1500");
                return result;

            }
            else
            {
                MessageBox.Show(facebookOAuthResult.ErrorDescription);
                return result;
            }
        }
        return result;
    } 
```

userInput 将是我的 Facebook ID。一些状态被返回，但绝对没有达到我所指出的 1500。想知道是否有人知道如何通过稍微修改代码中的请求 url 来访问您的第一个 facebook 状态消息或检索所有状态消息。必须使用fql吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T14:21:05.473

当您查询 /statuses 时，您不会从您的流中获得与照片/相册/视频相关的状态/条目（包括他们的评论等）。这还包括事件创建和问题。

您将不得不通过单独的调用（即 /me/photos）查询 API 以获取所有内容。如果您想拥有某个人或页面或组的几乎完整流。考虑使用 FQL，查询流表。

编辑：刚刚看到这个问题可能已经过时了，我的错

# c++ - 如何序列化成原始内存块？

> ID：11114827
> 
> 赞同：5
> 
> 时间：2012-06-20T07:33:07.270
> 
> 标签：c++, serialization, boost

使用 boost 将 c++ 对象序列化到文件中真的很容易，

```
std::ofstream ofile( lpszFileName );
boost::archive::text_oarchive oa(ofile);
oa << m_rgPoints; 
```

但是我怎么能将一个 c++ 对象序列化为一个原始内存块呢？

我应该将输出文件流读入内存还是有其他更好的方法？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T08:03:21.763

**针对 James Kanze 的评论进行了编辑：**

您可以序列化为`std::ostringstream`：

```
std::ostringstream oss;
boost::archive::text_oarchive oa(oss);
oa << m_rgPoints; 
```

然后通过获取`std::streambuf`(calling `oss.rdbuf()`) 并调用`streambuf::sgetn`它以将数据读取到您自己的缓冲区中。

[http://www.cplusplus.com/reference/iostream/ostringstream/rdbuf/](http://www.cplusplus.com/reference/iostream/ostringstream/rdbuf/)

这避免了不必要的临时文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-20T08:16:38.230

您可以编写自己的`streambuf`课程，直接在您的记忆中起作用：

```
class membuf : public std::streambuf
{
public:
  membuf( char * mem, size_t size )
  {
    this->setp( mem, mem + size );
    this->setg( mem, 0, mem + size );
  }
  int_type overflow( int_type charval = traits_type::eof() )
  {
    return traits_type::eof();
  }
  int_type underflow( void )
  {
    return traits_type::eof();
  }
  int sync( void )
  {
    return 0;
  }
}; 
```

使用这个类：

```
 membuf buf(address,size);
  ostream os(&buf);
  istream is(&buf);

  oss << "Write to the buffer"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-28T04:31:13.330

实际上有一个二进制原始数据的序列化包装器，[`binary_object`](https://www.boost.org/doc/libs/1_73_0/libs/serialization/doc/wrappers.html).

你可以像这样使用它：

```
// buf is a pointer to a raw block of memory, size its size
// oa is a boost archive
boost::serialization::binary_object buf_wrap(buf, size);
oa << buf_wrap 
```

使用 c++17 的另一种选择是将缓冲区转换`std::vector`为`std::byte`. 如[参考中`reinterpret_cast`](https://en.cppreference.com/w/cpp/language/reinterpret_cast)所述，允许将指针强制转换为 a`byte *`并取消引用它。因此，可以使用如下代码：

```
// buf is a pointer to a raw block of memory, size its size
// oa is a boost archive
auto start_buf = reinterpret_cast<byte *>(buf);
std::vector<std::byte> vec(start_buf, start_buf + size);
oa << vec; 
```

然而，这意味着副本。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-20T07:52:13.280

如果我了解您需要二进制序列化`boost::archive::binary_oarchive`。然后您可以从流中复制数据。

# c# - Log4Net SmtpAppender 不发送邮件

> ID：11114829
> 
> 赞同：2
> 
> 时间：2012-06-20T07:33:19.577
> 
> 标签：c#, log4net

我正在使用 log4net。

当应用程序给出错误时，我想发送电子邮件只是为了错误。我该怎么做？

我的配置文件：

```
<configuration>
  <configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,log4net" />
  </configSections>
  <log4net>
    <appender name="SMTPAppender" type="log4net.Appender.SMTPAppender">
      <authentication value="Basic" />
      <to value="xxx@xxx" />
      <from value="yyy@yyy" />
      <username value="user" />
      <password value="pass" />
      <subject value="ERROR" />
      <smtpHost value="host" />
      <port value="25" />
      <lossy value="true" />
      <evaluator type="log4net.Core.LevelEvaluator">
        <threshold value="WARN" />
      </evaluator>
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%newline%date [%thread] %-5level %logger %newline %message%newline%newline%newline" />
      </layout>
    </appender>
    <root>
      <level value="INFO"></level>
    </root>
    <logger name="SMTPAppender">
      <level value="INFO"></level>
      <appender-ref ref="SMTPAppender"></appender-ref>
    </logger>
  </log4net>
</configuration> 
```

我正在尝试在 NUnit 中进行测试：

```
[TestFixture]
public class TestClass
{
    [Test]
    public void Test()
    {
        ILog logger = LogManager.GetLogger(typeof(TestClass));
        logger.Error("test mail");
    }
} 
```

我可能做错了什么。

编辑：

```
<logger name="Yuartz.Tests.TestClass">
  <level value="INFO"></level>
  <appender-ref ref="SMTPAppender"></appender-ref>
</logger> 
```

```
namespace Yuartz.Tests
{
    using log4net;
    using log4net.Config;

    [TestFixture]
    public class TestClass
    {
        [Test]
        public void Test()
        {
            XmlConfigurator.Configure();
            var logger = LogManager.GetLogger("SMTPAppender");
            logger.Error("test mail");
            logger.Info("test mail");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T07:39:42.713

在您的示例中，您使用类型的全名 (TestClass) 来检索您的记录器。它将使用此名称来解析记录器或在未找到时创建一个新记录器。

```
ILog logger = LogManager.GetLogger(typeof(TestClass)); 
```

如果您希望这行代码返回 SMTPAppender 记录器，那么您需要在配置中重命名它，如下所示：

```
<logger name="Yuartz.Tests.TestClass">
    ...
</logger> 
```

如果您不想更改配置，则需要按实际名称检索记录器。以下返回名为“SMTPAppender”的记录器。

```
var logger = LogManager.GetLogger("SMTPAppender"); 
```

我的建议是只更改配置中的名称，并像现在一样继续按类型检索记录器。

还要确保您阅读了您的配置。

```
log4net.Config.XmlConfigurator.Configure(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T07:47:16.153

您需要在单元测试运行之前阅读 Log4Net 配置。

请参阅这篇文章[如何在单元测试中使用 Log4Net](http://blog.developerslog.net/?p=61)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T07:38:45.037

你在哪里打电话`XmlConfigurator.Configure()`？如果是这样，有时发送简单的邮件会失败，因为反垃圾邮件会捕获它，因此请确保您与系统管理员核实某处是否有标记为垃圾邮件的内容。

# ruby - 无法理解 ruby 代码

> ID：11114830
> 
> 赞同：2
> 
> 时间：2012-06-20T07:33:26.050
> 
> 标签：ruby

我不明白下面的 ruby​​ 代码是做什么的。谁能给我一些解释。谢谢！

```
 map '/healthz' do
        run Healthz.new(logger)
      end 
```

Healthz 是：

```
 class Healthz
    def initialize(logger)
      @logger = logger
    end

    def call(env)
      @logger.debug "healthz access"
      healthz = Component.updated_healthz
      [200, { 'Content-Type' => 'application/json', 'Content-Length' => healthz.length.to_s }, healthz]
    rescue => e
      @logger.error "healthz error #{e.inspect} #{e.backtrace.join("\n")}"
      raise e
    end
  end 
```

使用的库是：

```
require "eventmachine"
require 'thin'
require "yajl"
require "nats/client"
require "base64"
require 'set' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T07:43:37.887

由于您使用的是 eventmachine 和 Thin，我猜该代码是用于简单 Web 应用程序的某种路由代码。

也就是说，它将`/healtz`应用程序的路由映射到`Healtz`类，因此如果您启动应用程序并将浏览器指向`localhost:<whatever_port_thin_uses>/healtz`，它将`Healtz.new`为您启动一个实例。

因为我不知道`Healtz`实际做了什么，所以我不知道实际会发生什么，但我的猜测是它是某种机架应用程序。

而且，正如我已经说过的，这只是我的猜测，来自查看您正在使用的库列表。

# c# - 使用 c# 将两个数据集中的特定列合并到第三个数据集中的方法

> ID：11114835
> 
> 赞同：1
> 
> 时间：2012-06-20T07:33:34.443
> 
> 标签：c#, asp.net, dataset

假设我有两个`Dataset ds1 & ds2`都持有来自两个不同的数据`Tables`

```
Sql1 = "Select sTitle, sDate,active,color FROM TABLE1"
Sql2 = "Select eName, eDate FROM TABLE2" 
```

将这两个合并`ds1, ds2`到第三个数据集的最佳方法是什么，我想从中获取以`ds3`下列 。`EventTitle, BlockedDate``sTitle, sDate``ds1``eName, eDate``ds2`

我需要知道一种快速的方法，考虑到每个查询可能最多有 200 行

实际的 sql1 是

```
;with Calendar as (
    select EventID, EventTitle, EventStartDate, EventEndDate, EventEnumDays,EventStartTime, EventRecurring, EventStartDate as PlannedDate
    ,EventType from EventCalender
    where EventActive = 1 AND LanguageID =1 AND EventBlockDate = 1 AND(  EventStartDate >= GETDATE() OR EventEndDate >= GETDATE() )
    union all
    select EventID, EventTitle, EventStartDate, EventEndDate, EventEnumDays,EventStartTime, EventRecurring, dateadd(dd, 1, PlannedDate)
    ,EventType from Calendar
    where (EventRecurring = 1
        and dateadd(dd, 1, PlannedDate) <= EventEndDate ) OR (EventRecurring = 0
        and dateadd(dd, 1, PlannedDate) <= EventEndDate) 
)
select EventID, EventStartDate, EventEndDate, PlannedDate as [EventDates], Cast(PlannedDate As datetime) +''+ Cast(EventStartTime As time) AS DT, EventTitle
,EventType from Calendar
where (PlannedDate >= GETDATE()) AND ',' + EventEnumDays + ',' like '%,' + cast(datepart(dw, PlannedDate) as char(1)) + ',%'
    AND PlannedDate <= DATEADD(month, 2, GETDATE())
    or EventEnumDays is null
order by EventID, PlannedDate
option (maxrecursion 0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:36:21.793

我认为您应该`query string`使用`join`or加入它`Union`，而不是合并`datatable`.

# css - 覆盖 jquery 移动字段包含选择菜单 CSS

> ID：11114845
> 
> 赞同：1
> 
> 时间：2012-06-20T07:34:07.703
> 
> 标签：css, jquery-mobile

我想修改 jquery 移动选择菜单的宽度。我对输入文本字段做了同样的事情，创建了一个名为**cod1**的新类，并将标签宽度设置为 25%，将输入字段设置为 55%：

```
.cod1 label.ui-input-text { vertical-align: middle; display: inline-block;  width: 25%;  margin: 0 2% 0 0; }
.cod1 input.ui-input-text, 
.cod1 textarea.ui-input-text, 
.cod1 .ui-input-search { width: 55%; display: inline-block; } 
```

现在我想对选择菜单做同样的事情，但是在 jquerymobile css 文件中，这个属性在@media 中，我不知道它是如何工作的：

```
@media all and (min-width: 450px){  
.ui-field-contain label.ui-select { vertical-align: top;  display: inline-block;  width: 20%;  margin: 0 2% 0 0; }
.ui-field-contain .ui-select { width: 60%; display: inline-block; }
} 
```

我试图覆盖它以使用我的 cod1 类修改宽度，但它不起作用。我成功修改宽度的唯一方法是直接修改原始CSS文件......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:16:07.043

[正如这个问题的答案所解释](https://stackoverflow.com/questions/5781957/jqm-jquerymobile-custom-css-for-invalid-select?rq=1)的那样，选择、复选框和单选元素完全被 jquery mobile 取代。

我的问题的答案很简单，只需忽略字段包含：

```
.cod1 label.ui-select { width:25%; }
.cod1 .ui-select { width:55%; } 
```

[用于无效选择的 JQM (jQueryMobile) 自定义 css](https://stackoverflow.com/questions/5781957/jqm-jquerymobile-custom-css-for-invalid-select?rq=1)

# php - PHP 添加 2 个小数点数字（钱）在总金额中给出错误的结果

> ID：11114861
> 
> 赞同：6
> 
> 时间：2012-06-20T07:35:34.027
> 
> 标签：php

我的 MySQL 数据库中有一个客户发票表，其中包含一个名为 price 的 DECIMAL(10,2) 字段。

在 php 中获取这些值并计算总金额时，

例如：在脚本中

```
$totalAmount = 0; // initialised them to 

   while(records){              

       $amount = $inv_amount - ($pay_amount + $onamount); //float i guess. 2.22, 14.22
       $totalAmount = $totalAmount + $amount; //float i guess. 2.22, 14.22 ..etc

    } 
```

当`echo $totalAmount;`它在最终数量 0.01 中有一个小错误但是在处理 20,000 左右的大型数据集时，这个错误变得非常可观，例如 200+

在 PHP 中处理价格等这些数字时，最安全的方法是什么？或者我最终会出现潜在的舍入错误以及在处理浮点数据类型时常见的问题？

正在使用

```
round 
number_format 
```

是最适合此类金融应用的解决方案吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-20T07:39:13.630

事实上，浮点数并不精确。
以美分计算（乘以 100 并以整数计算），或使用[BC Math](http://php.net/bcmath)以字符串计算。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T07:48:50.083

试试这个：

```
$totalAmount = number_format($totalAmount, 2, '.', ''); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T07:39:14.940

如果您需要小数点后 2 位的精度：

1.  将值乘以 100
2.  做你的操作
3.  除以 100 并`number_format`在适当时使用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T07:39:37.550

你试过了吗

```
round(totalAmount, 2, PHP_ROUND_HALF_ODD); 
```

它应该看到最后一个十进制数字 - 如果它是奇数 - 向下舍入，如果是偶数 - 向上

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T07:39:46.347

好吧，首先，当您可以在 mysql 中执行此操作时，为什么要在 php 循环中求和？此外，只需使用整数乘以 100，然后在需要最终结果时除以 100。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-20T07:45:15.157

## 我建议使用查询或视图在 SQL 级别上进行计算。

首先，在 PHP 上使用 64 位整数是有风险的，因为：在溢出时，它会切换到浮动并且您会失去精度。如果是钱，问题就更严重了。您应该用 sql 计算一列并从那里获取值。Money 是一种长期类型，它通常会转换为浮动在 php 上，您的人会根据 php 引擎的心情输掉或赢取一些美分。您不能在 php 上使用小数类型，即使您乘以 100 并将其保留为整数，带有溢出的长数字将自动转换为浮点数。如果您想使用十进制数字或将您的字段转换为 int，请在 MYSQL 上计算您的值。

如果您的服务器有 32 位 cpu，则 WORD 长度为 32 位，因此 php 引擎中的整数是 32 位整数。这使得溢出的可能性更高。在 64 位系统上，您可以更舒适地工作。

在这种情况下，对货币价值使用舍入函数是荒谬和不专业的。不要这样做。

阅读[本文档](http://www.php.net/manual/en/language.types.integer.php)将对您有很大帮助。

[整数的](http://www.php.net/manual/en/language.types.integer.php)php文档说

> 整数溢出
> 
> 如果 PHP 遇到超出整数类型范围的数字，它将被解释为浮点数。此外，导致数字超出整数类型范围的操作将改为返回浮点数。

SQL 级别的计算将确保货币类型的准确性。将货币类型设置为 php 将产生一个浮点值，您可以将其乘以 100 然后再除以 100 但它再次增加了溢出的风险，因为 php 将使用 32 位浮点数进行存储。如果您使用 32 位浮点数，为什么数据字段是十进制的？所以如果你这样做是不一致的。一个 32 位数字我已经不是那么大了，一个 32 位浮点数在浮点数上失去了一些容量，所以当你乘以 100 时它更有可能达到容量过剩。

## 使用 SQL

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-20T07:49:01.253

你可以使用`number_format`

例如：（两位小数）

```
$number = 12345.5667;
echo $result = number_format($number, 2); 
```

或者你可以`round`在 MySql 中使用函数：

```
ROUND(number,2) 
```

# c - 缓冲区溢出期间 EIP 值不正确

> ID：11114863
> 
> 赞同：4
> 
> 时间：2012-06-20T07:35:37.047
> 
> 标签：c, 32bit-64bit, buffer-overflow

我正在使用 ubuntu 12.04 和 64 位机器。我正在读一本关于缓冲区溢出的好书，在玩一个例子时发现了一个奇怪的时刻。

我有这个非常简单的 C 代码：

```
 void getInput (void){ 
    char array[8];    
    gets (array); 
    printf("%s\n", array); 

 }   
 main() { 
    getInput();    
    return 0;    
 } 
```

在文件overflow.c

我用 32 位标志编译它，因为书中的所有示例都假定为 32 位机器，我这样做是这样的

```
 gcc -fno-stack-protector -g -m32 -o ./overflow ./overflow.c 
```

在代码中 char 数组只有 8 个字节，但查看反汇编时我发现该数组从堆栈上保存的 EBP 开始 16 个字节，所以我执行了这一行：

```
 printf "aaaaaaaaaaaaaaaaaaaa\x10\x10\x10\x20" | ./overflow 
```

并得到：

```
 aaaaaaaaaaaaaaaaaaaa 
 Segmentation fault (core dumped) 
```

然后我打开核心文件：

```
 gdb ./overflow core
 #0  0x20101010 in ?? ()
 (gdb) info registers
 eax            0x19    25
 ecx            0xffffffff  -1
 edx            0xf77118b8  -143583048
 ebx            0xf770fff4  -143589388
 esp            0xffef6370  0xffef6370
 ebp            0x61616161  0x61616161
 esi            0x0 0
 edi            0x0 0
 eip            0x20101010  0x20101010 
```

正如你所见，EIP 实际上获得了我想要的新价值。但是当我想输入一些有用的值时，比如 0x08048410

```
 printf "aaaaaaaaaaaaaaaaaaaa\x10\x84\x04\x08" | ./overflow 
```

程序像往常一样崩溃，但是当我试图观察 EIP 寄存器中的值时，会发生一些奇怪的事情：

```
 #0  0xf765be1f in ?? () from /lib/i386-linux-gnu/libc.so.6
 (gdb) info registers
 eax            0x61616151  1633771857
 ecx            0xf77828c4  -143120188
 edx            0x1 1
 ebx            0xf7780ff4  -143126540
 esp            0xff92dffc  0xff92dffc
 ebp            0x61616161  0x61616161
 esi            0x0 0
 edi            0x0 0
 eip            0xf765be1f  0xf765be1f 
```

突然 EIP 开始看起来像这个 0xf765be1f，它看起来不像 0x08048410。事实上，我注意到将任何从 0 开始的十六进制值都足以得到这个崩溃的 EIP 值。你知道为什么会发生这种情况吗？是因为我在64位机器上吗？

**UPD**

评论中的好人要求更多信息，这里是 getInput 函数的反汇编：

```
 (gdb) disas getInput
 Dump of assembler code for function getInput:
    0x08048404 <+0>:    push   %ebp
    0x08048405 <+1>:    mov    %esp,%ebp
    0x08048407 <+3>:    sub    $0x28,%esp
    0x0804840a <+6>:    lea    -0x10(%ebp),%eax
    0x0804840d <+9>:    mov    %eax,(%esp)
    0x08048410 <+12>:   call   0x8048310 <gets@plt>
    0x08048415 <+17>:   lea    -0x10(%ebp),%eax
    0x08048418 <+20>:   mov    %eax,(%esp)
    0x0804841b <+23>:   call   0x8048320 <puts@plt>
    0x08048420 <+28>:   leave  
    0x08048421 <+29>:   ret 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T09:06:29.457

可能 处的代码`0x08048410`已执行，并跳转到`0xf765be1f`.

这个地址有什么？我猜它是一个函数（libC？），所以你可以检查它的汇编代码，看看它会做什么。

另请注意，在成功运行中，您设法超出了 EBP，而不是 EIP。EBP 包含`0x61616161`, 即`aaaa`, EIP 包含`0x20101010`, 即`\n\n\n`。看起来腐败的 EBP 间接地使 EIP 腐败了。
尝试使溢出的 4 个字节更长，然后它也应该溢出返回地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T07:45:29.607

这可能是由于现代操作系统（Linux 至少有，我不知道 Windows）和现代 libc[具有](http://www.drdobbs.com/security/240001832)不允许执行堆栈中的代码的机制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T07:51:03.303

缓冲区溢出正在调用未定义的行为，因此任何事情都可能发生。推测可能发生的事情是徒劳的。

# image - 在我的画廊中分享另一位用户的照片

> ID：11114868
> 
> 赞同：0
> 
> 时间：2012-06-20T07:36:05.613
> 
> 标签：image, drupal, share

> 我想以这样一种方式共享另一个用户图库图片，即单击共享时，该图像应存储在我的图像库中。除此之外，我还应该提供一个选项，即我要在哪个库中存储（添加）这张照片取决于我个人资料中的画廊列表。我正在使用 Drupal。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T18:40:58.987

Sounds like you are looking for IMCE module: [http://drupal.org/project/imce](http://drupal.org/project/imce)

# ruby-on-rails - 使用缓存时出现Rails字符编码问题

> ID：11114872
> 
> 赞同：2
> 
> 时间：2012-06-20T07:36:21.573
> 
> 标签：ruby-on-rails, ruby-on-rails-3, caching, character-encoding

我正在使用 rails fragemnet 缓存来缓存一些 html。

下面是我的代码

```
 <% if @link.social_tags.present? %>
    <% cache(:action =>'pageui', :action_suffix => "#{@link.id}_tags") do %>
      <% @link.social_tags.each_with_index do |tag, index| %>
        <%= ", " if index > 0 %>
        <%= link_to tag.name, some_path(:tag => tag.id), :title => tag.name, :target => "_blank" %>
      <% end %>
    <% end %>
  <% else %>
    Still no tag for this Page.
  <% end %> 
```

我遇到了一些奇怪的问题。第一次没有缓存片段时，它会给出错误“不兼容的字符编码：UTF-8 和 ASCII-8BIT”

但是后续请求工作正常。只有第一个请求给出错误。

有什么提示吗？

# struts-config - 速度定位配置

> ID：11114874
> 
> 赞同：1
> 
> 时间：2012-06-20T07:36:23.057
> 
> 标签：struts-config

这是我的struts配置

```
<constant name="struts.enable.DynamicMethodInvocation" value="false" />
<constant name="struts.devMode" value="false" />
<constant name="struts.ui.theme" value="simple" />
<constant name="struts.custom.i18n.resources" value="ApplicationResources"/>
<constant name="struts.locale" value="ms_MY" />
<constant name="struts.multipart.maxSize" value="200097152" /> 
```

*.properties 的此配置

但是对于 *.vm 我不知道如何配置它。

请帮我。

# iphone - 我最近对 NIB 文件的更改未显示在 ios 模拟器中关闭

> ID：11114876
> 
> 赞同：0
> 
> 时间：2012-06-20T07:36:30.263
> 
> 标签：iphone, xcode, ios5, ios-simulator

我已经为我的应用程序应用了界面构建器的更改，其中包含标签。我刚刚更改了标签的名称和位置，除此之外，我还更改了应用程序中文本视图的字体。当我开始运行我的应用程序时，字体与之前的字体保持一致，并且没有任何标签显示在其中。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T07:42:20.030

相当你的xcode，然后再次打开你的项目。清除您的构建，然后运行您的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T07:49:10.840

在 Xcode 中试试这个：主菜单：产品：清洁

如果还不够：主菜单：Xcode：首选项：-> 单击位置图标：单击小灰色右箭头以获取派生数据：

这将向您显示查找器文件夹“DerivedData”：将其删除。

要尝试的另一件事：在模拟器中，删除您的应用程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T07:49:22.863

您还应该确保 interfacebuilder 文件链接到您在模拟器中启动的目标。为此，请选择您的 xib 并打开文件检查器。在那里，您应该会看到一个名为“Target Membership”的下拉菜单，您可以在其中将 xib 链接到您想要的目标。

还要确保在头文件中将标签定义为 IBOutlets，并在 xib 中正确链接它们。最简单的方法是使用助手编辑器并将插座拖到头文件中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-05T17:32:54.813

我有同样的问题 - 但仅限于模拟器中的 iPhone 非视网膜。清理代码没有帮助。重新启动和重新启动没有帮助。但是从模拟器中删除该应用程序有效。现在，我下次运行时会显示我的 UI 更改。要从模拟器中删除应用程序，我就像在真手机上一样。我用鼠标选择应用程序图标并按住鼠标按钮几秒钟。然后图标会显示一个您可以选择的小删除图标（应用程序图标也会抖动）。

# url - 如何从黑莓浏览器获取网址？

> ID：11114877
> 
> 赞同：-1
> 
> 时间：2012-06-20T07:36:32.837
> 
> 标签：url, blackberry, browser, browserfield

在 BB 中，当用户在浏览器中输入任何 URL 并按回车键时...。那么是否可以获取/跟踪/获取该 url..???

我是否应该在我的应用程序中实现任何 iinterface ......当用户打开浏览器并传递一个 url 时，它可以跟踪。

我只想告诉我我的应用程序将在后台运行......从后台我想从 BB 的本机浏览器获取 URL。意味着当用户打开浏览器并传递一个 url 时，我必须获取该 url 并检查我的应用程序是否应该阻止它。

我的申请需求是 -

1）获取url，无论用户在浏览器的浏览器字段中输入什么......

2) 将该 url 以 xml 的形式发送到服务器

3）检查来自服务器的响应......

4）如果响应值为“是”，则什么也不做......

5）但如果响应值为“否”，则阻止该 URL（将 - URL 注册到 HttpFilterRegistery 中）

* * *

我已经开发了将我自己的菜单项添加到浏览器中的代码。通过单击该自定义菜单项，我成功接收了 URL。但这实际上不符合我的要求。

正如我之前所说，我想通过第三方应用程序以编程方式跟踪浏览器应用程序。那么有没有办法，每当浏览器应用程序进入前台时，我们都可以获得浏览器（本机应用程序）的菜单项实例。这样我就可以以编程方式运行自定义菜单项。

我使用了以下代码：

```
Screen screen = Ui.getUiEngine().getActiveScreen();
System.out.println("\n\n**** " + screen.getClass().getName());
Menu menu = screen.getMenu(1);
for (int i = 0, cnt = menu.getSize(); i < cnt; i++)
           System.out.println(" menu item : " + menu.getItem(i).toString());
System.out.println("\n\n"); 
```

我通过我的应用程序的后台线程成功地跟踪了进入前台的应用程序，但即便如此，我的第三方应用程序的线程也无法获得前台原生应用程序的菜单实例。它总是返回我的应用程序屏幕的实例......

上述代码的输出：

* *** mypackage.AppDemoScreen 菜单项：显示键盘菜单项：切换应用程序菜单项：完整菜单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:01:21.303

您可以使用 ApplicationDescriptor ，这是一个添加新菜单项的示例，该菜单项具有避免重复自定义菜单项的能力，也是从浏览器接收数据并将其发送到您想要的类的代码
[http:// pastebin.com/BTSBL8AN](http://pastebin.com/BTSBL8AN)

# php - NicEdit 在您自己的服务器上上传

> ID：11114887
> 
> 赞同：1
> 
> 时间：2012-06-20T07:37:54.537
> 
> 标签：php, javascript, ajax, nicedit

我在使用 nicEdit 所见即所得编辑器在我自己的服务器上上传时遇到问题。

当您点击上传图片时，您将在其他网站上上传图片。这里：imgur dot com

就是这样： http: [//nicedit.com/demos.php](http://nicedit.com/demos.php)

我想使用它们 php 脚本在我自己的服务器/域上上传图像。有人可以告诉我该怎么做吗？

这是脚本：[http ://svn.nicedit.com//trunk/nicUpload/php/nicUpload.php](http://svn.nicedit.com//trunk/nicUpload/php/nicUpload.php)

仍然显示消息“上传图片失败”。

在萤火虫的控制台中显示这个：

```
<script>
        try {
            top.nicUploadButton.statusCb({"error":"Invalid Upload ID"});
        } catch(e) { alert(e.message); }

</script> 
```

POST 没问题，但我不明白这一点。:(

有人给我很好的答案吗？

非常感谢。PS：对不起我的英语。:)

丹尼尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T20:14:11.723

NicEditor 使用 imgur 作为默认的图片上传服务。源代码遵循此处描述的 API 格式：http: [//api.imgur.com/resources_anon#upload](http://api.imgur.com/resources_anon#upload)

我的建议是实现那里定义的 API 请求和响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T21:57:52.960

您是否在服务器上安装了 PHP APC 库？我认为您需要生成此 ID。 `$id = $_POST['APC_UPLOAD_PROGRESS'];`

# javascript - 可以同步文件的 Node.js 的 FTP 模块？

> ID：11114890
> 
> 赞同：4
> 
> 时间：2012-06-20T07:38:06.190
> 
> 标签：javascript, node.js, ftp, npm

我正在寻找 Node.js 的模块 - 最好通过 npm 获得，它可以与 FTP 服务器同步文件。ftp 模块具有所有基本功能，但在其上编写一个完整的同步系统似乎需要大量工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T14:23:56.493

我是[jsftp](https://github.com/sergi/jsftp)的作者。只需浏览要上传的目录即可轻松同步。Jsftp 可以处理并行的被动请求（在内部它们仍然是顺序的，但您不必担心），因此您可以只使用顺序`ftp.put`调用，它应该可以在您不需要太多脚本工作的情况下工作。

在节点中更好、更惯用的方法是使用尚未记录的`ftp.getPutSocket`方法，它允许您获取原始`PASV`套接字并直接推入它（例如，使用流）。对于这种情况的特定示例，您可以查看[vfs-ftp](https://github.com/c9/vfs-ftp)是如何做到的。

如果您在实施同步方面需要更多帮助，请随时与我联系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T12:18:06.990

我通过搜索 npm、github 和 web 进行了一些研究，但找不到任何好看的同步解决方案。

我会简单地从使用一些好的 ftp 库编写我自己的（简单的）同步库开始。我个人认为 jsftp 是最吸引人的（[http://sergi.github.com/jsftp/](http://sergi.github.com/jsftp/)）。只需将 jsftp 与一些文件系统遍历结合起来 - 特别是如果您对简单的单向同步很好，这应该不是不可能的。

实现的一些想法（从本地文件系统到 ftp 的单向同步）：

*   打开与 ftp 服务器的连接
*   遍历本地文件系统`fs.readdir`
*   `Ftp.ls`从相应的 ftp 文件中获取统计信息并上传，如果本地版本较新（`Ftp.put`如果使用`jsftp`）

或者，问问自己你真的需要使用 node.js 执行同步吗？例如，如果您可以在您的系统中运行 Python 脚本，您可以简单地使用`ftpsync2d`一个支持 ftp 的双向同步工具 ( [http://code.google.com/p/ftpsync2d/](http://code.google.com/p/ftpsync2d/) )。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-27T10:17:38.867

## **看看[node-ftpsync](https://github.com/evanplaice/node-ftpsync)和[grunt-ftpsync](https://npmjs.org/package/grunt-ftpsync)**

它利用 Sergi 的[jsftp](https://github.com/sergi/jsftp)库将文件智能同步到远程服务器。

*注意：目前，推送支持所需的一切都已实现，除了基于时间戳的更新比较。目前更新仅通过比较文件大小来确定。*

**node-ftpsync**提供 CLI 支持和编程 API。首选的解决方案是全局安装它并在包含 config.json 的目录中运行它。或者，它也被实现为一个可以在代码中轻松配置、扩展和启动的库。

**grunt-ftpsync**的工作方式相同，除了配置和运行应用程序是通过 grunt 完成的。它甚至可以输出精美的彩色日志。

*免责声明：我是 node-ftpsync 和 grunt-ftpsync 的作者*

# javascript - 将 xml 加载到 extjs4 树存储中

> ID：11114893
> 
> 赞同：0
> 
> 时间：2012-06-20T07:38:15.360
> 
> 标签：javascript, xml, extjs, extjs4

我需要将数据加载到我的树库中。我的 ajax 请求给了我没有叶子和文本属性的 XML 数据。我如何映射它们？

```
<items>
   <item>mytext</item>
   <item>mytext2</item>
   ...
</items> 
```

我知道叶子属性，但对于文本我尝试在我的模型中进行映射：

```
fields: [
    { name: 'leaf' ,  type: 'boolean' , defaultValue: true } ,
    { name: 'text', mapping: 'item'}, 
] 
```

和我的代理商店中的读者：

```
reader: { type: 'xml',root: 'items' , record: 'item' } 
```

我有所有节点但没有文本=/

请帮我 ！

-kyrillos

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T18:52:16.403

查看源代码，问题在于 Extjs 4 期望模型具有子元素，而您的 xml 具有模型最顶层的数据。您要么必须将返回的 xml 重组为以下内容：

```
<items>
   <item>
       <text>mytext</text>
   </item>
   <item>
       <text>mytext</text>
   </item>
   ...
</items> 
```

并使用映射到那里的文本节点。

另一种选择是创建一个自定义映射函数，它将与您的结构一起使用（可能不是 Extjs 希望您这样做的方式，但如果您无法更改 xml，这是唯一的方法）：

```
fields: [
    { name: 'leaf' ,  type: 'boolean' , defaultValue: true } ,
    { name: 'text', mapping: function(node){
        if(node.firstChild && node.firstChild.nodeValue)
            return node.firstChild.nodeValue;
        return "";
    }}, 
] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T11:37:27.610

我找到了另一个解决方案：

```
fields: [
    { name: 'leaf' ,  type: 'boolean' , defaultValue: true } ,
    { name: 'text', mapping: '/' }
] 
```

# ruby - 如何将其他机架应用程序（例如 Grape API）安装到 Padrino 应用程序？

> ID：11114896
> 
> 赞同：3
> 
> 时间：2012-06-20T07:38:30.587
> 
> 标签：ruby, api, rack, padrino

我正在四处寻找如何将其他机架应用程序（例如葡萄 API）安装到我的 padrino 应用程序。我试着四处寻找，但不可能找到答案。

我尝试了以下方式：

```
Padrino.mount("API", :app_file => "path_to_api_rb", :app_class => "MyApp::API").to("/") 
```

但帕德里诺并不是从这个设置开始的。似乎该设施仅适用于 Padrino-sub 应用程序。有没有人试过这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T05:12:38.547

这是一个展示如何将 Grape 用作子应用程序的项目： [PadrinoEatsGrape](https://github.com/eivan/PadrinoEatsGrape)

（我猜其他 Rack 应用程序也可以工作）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T07:08:43.550

你可以使用 Rack::Cascade: 来混合葡萄、rails 和 pandrino 应用程序：

```
rails_app = Rack::Builder.new do
  use Rails::Rack::LogTailer #Optional
  use rails::Rack::Static    #Optional
  run ActionController::Dispatcher.new
end

run Rack::Cascade.new([
  MyApp::API,
  rails_app,
  Padrino.application
]) 
```

# iphone - 这种应用程序会被接受吗？

> ID：11114898
> 
> 赞同：-1
> 
> 时间：2012-06-20T07:38:41.383
> 
> 标签：iphone, ios, ipad

我正在为一家公司开发一个应用程序。该公司旨在将国外模型引入国内，该公司希望将其拥有的所有模型展示在ipad上，以便其他可能感兴趣的公司可以浏览这些模型。

但是当我阅读《[App Store Review Guidelines](https://developer.apple.com/appstore/resources/approval/guidelines.html)》时，我不确定这种应用是否可以被接受：

2.12 不是很有用、只是捆绑为应用程序的网站或不提供任何持久娱乐价值的应用程序可能会被拒绝。

这种非娱乐非普通用户的APP恐怕不会被接受。有人可以给我一些建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T07:52:40.440

如果该应用程序适用于合法的模特经纪公司，我认为 AppStore 接受该应用程序不会有任何问题。

然而，对我来说，本书中的每一个危险信号都会在此处给出您的简短描述 - 我希望 Apple 的评论者会对听起来像是冒险的操作有同样的下意识反应。

您可以制作一个基于 HTML 5 的网络应用程序，而不是针对 iPhone 和 iPad。使用网络应用程序，您不必处理 Apple 审核流程。

确保您的客户不会无意中将您拖入任何合法的灰色区域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T07:44:58.293

根据经验，如果您是通过 iOS 的 Web 应用程序制作应用程序，那么您实际上并不仅仅是将网站添加到应用程序中。我解释的指导方针意味着你应该小心为 Web 应用程序或 iOS 就绪的网站制作 iOS 应用程序就足够了。当您说您让公司浏览产品时，听起来用户将能够以 iOS 原生方式与产品交互，这就是我们开发人员制作应用程序的原因。我不确定苹果在娱乐价值方面的发展方向，但我确信这无论如何都不适用于商业应用程序。

# c# - 如何从存储过程中获取特定的参数值

> ID：11114900
> 
> 赞同：0
> 
> 时间：2012-06-20T07:38:45.383
> 
> 标签：c#, sql-server, winforms, stored-procedures, ado.net

我有点卡在这里。我创建了一个存储过程，它根据`AccountID`不同的表获取所有结果。我也想`AffinityID`通过这个存储过程和其他人一起获得一个特定的参数。

为了得到这个，我使用了 Data Director，如果我`AffinityID`在存储过程中添加一个 OUTPUT 参数然后在我的代码中使用该属性`AddOutParameter`来获取`AffinityID`. 但我不想使用`DataDirector`而不是输出参数。

我将如何`AffinityId`在`AccountID`.

存储过程如下：

```
ALTER PROCEDURE [dbo].[GetAffinityIDByAccountID]
    @AccountID INT= NULL

AS
SELECT 
    acct.AcctID, 
    lua.AffinityID,
    bws.DocumentTypeSettingsID,
    bws.DocumentTypeID,
    bws.AddAccountAttachment,
    bws.SaveAtLocation,
    bws.SaveLocation,
    bws.AddAccountNote,
    bws.NoteReasonID,
    bws.NoteText,
    bws.SendEmail,
    bws.EmailToAddress,
    bws.EmailFromAddress,
    bws.EmailSubject,
    bws.EmailBody
FROM BWSDocumentTypeSettings bws 
Join luAffinity lua on bws.AffinityID=lua.AffinityID
    Join AFFINITYGROUP ag on ag.AffinityID=lua.AffinityID
    join Applicant a on ag.AffGroupID=a.AffGroupID
    join APPLICANTACCOUNT aa on a.ApplID=aa.ApplID
    join Account acct on aa.AcctID=acct.AcctID   
WHERE acct.AcctID=COALESCE(@AccountID, acct.AcctID) 
```

我可以在这里添加一个输出参数`AffinityID`来获取`AffinityID`. 但我不想使用它。我将如何获得具体的参数值？

# ruby - ruby Proc/lambda 有像 javascript 闭包这样的“this”函数吗？

> ID：11114901
> 
> 赞同：1
> 
> 时间：2012-06-20T07:38:48.393
> 
> 标签：ruby, lambda, proc

在 javascript 闭包中，“this”引用了实际调用函数的对象。

ruby Proc/lambda 也有“this”功能吗？

如果没有，如果我想要 ruby​​ 中的“this”，我该怎么办？除了通过参数将当前对象传递给 Proc/lambda。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T19:53:59.037

`this`通常不是函数或闭包概念的一部分。函数只是你可以用参数调用的东西；“当前对象”与它有什么关系？`this`JavaScript 中所有函数中的存在来自于方法在该语言中工作的特殊方式。

在 JavaScript 中，所有函数都有一个概念，`this`因为在 JavaScript 中，*方法和函数之间没有分离*。任何函数都可能被用作方法；您可以简单地通过将函数分配为对象的属性来向对象添加方法。此外，在 JavaScript 中，函数没有针对当前对象的显式参数（与 Python 不同）；那么方法如何访问其对象呢？当你运行一个方法调用表达式时，它会将你调用它的对象作为隐式`this`参数传递给函数。但是，如果您使用属性获取函数并像任何其他函数一样手动调用它，`this`则将是全局对象（或在严格模式下，未定义）。

换句话说，在 JavaScript 中，当您通过属性从对象中获取方法时，它是一个“未绑定方法”——它不知道它来自哪个对象；相反，当您将函数作为按属性的方法放入对象时，该函数不需要知道要从哪个对象开始-对象将在调用时通过方法调用语法神奇地传递给它。您还可以使用函数上的or方法人为`this`地向函数提供参数（等效于）。`.call()``.apply()``obj.foo(x)``obj.foo.call(obj, x)`

在 Ruby 中，方法和匿名函数是完全分离的。`lambda`使用、`proc`或等创建的匿名函数`Proc.new`是数据，可以存储在变量中。它们的调用语法（`call`或`[]`）与方法不同。方法是使用 定义的`def`，您不能通过简单地写它的名称（将调用它）将其作为数据获取。可以使用对象`method`上的方法从对象中获取方法，给出方法名称，然后返回一个`Method`对象。您可以像使用`Method`对象一样使用`Proc`对象，例如您可以调用`call`它；您甚至可以将其转换为`Proc`with `to_proc`。与 JavaScript 不同，绑定方法（类`Method`）和未绑定方法（类`UnboundMethod`）。当你从一个对象中得到一个方法时，它就被绑定了——它知道它的对象；如果需要，您可以取消绑定并将其绑定到另一个对象。

此外，在 Ruby 中，您不能只获取 a`Proc`并将其附加到对象并使其成为方法，因为方法的语法（例如`@some_var`）在`Proc`. 要向对象添加方法，您可以使用`instance_exec`方法定义 ( `def`) 并将其放入块中。

所以简而言之，`this`in 闭包的概念处理了 JavaScript 中在大多数语言中都没有的独特情况。尤其是 Ruby 中没有出现这个问题，因为 Ruby 的对象的方法是绑定方法，而且不能任意插入闭包作为方法。

PS其他人评论了`self`将闭包定义到闭包的位置。然而，这根本不是`this`JavaScript 的意义所在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T07:45:41.693

`self`如果您在 Ruby 对象中初始化 lambda 或 proc，则可以使用。例如：

```
class Example

  def name
    "Example"
  end

  def test
    lambda{ puts self.name}.call
  end

end

example = Example.new
example.test # "Example" 
```

有关 Ruby 的更详细说明，`self`请参见：[http](http://sidtalk.wordpress.com/2008/10/06/what-exactly-is-ruby-self/) ://sidtalk.wordpress.com/2008/10/06/what-exactly-is-ruby-self/ 。

# sql - Oracle 功能索引创建

> ID：11114903
> 
> 赞同：0
> 
> 时间：2012-06-20T07:38:53.567
> 
> 标签：sql, oracle, indexing

如何为以下情况创建功能索引。

> CREATE INDEX index1 ON table1(MIN(col1));

它给出以下错误：`SQL Error: ORA-00934: group function is not allowed here`

请帮忙！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T08:06:01.793

如果您想在其上创建一个索引`col1`，将加快这样的查询：

```
SELECT MIN(col1)
  FROM table1 
```

那么您不需要功能索引。只需像这样创建普通索引：

```
CREATE INDEX index1 ON table1(col1); 
```

如果可能的话，在上创建功能索引将导致索引对于每一行都`MIN(col1)`具有相同的值（ 的最小值）。`col1`这样的索引将完全没有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T08:47:04.903

如果您希望能够`col1`更快地获得最小值（就像我假设的那样），那么您可以使用*物化视图*：

```
create materialized view table1_mat
       refresh on commit 
       as
       select min(col1) min_col1
         from table1; 
```

您获得 col1 的最小值，然后像这样：

```
 select min_col1 from table1_mat; 
```

但是请注意，虽然选择最小值可能会加快，但插入和更新时间`table1`可能会变慢。

通过*查询重写*，甚至可以在不链接原始查询的情况下使用物化视图：

```
alter materiazlied view table1_mat enable query rewrite; 
```

然后

```
select min(col1) from table1 
```

应该使用物化视图。

# iphone - 分配给 'id '来自不兼容的类型'MainViewController *'

> ID：11114906
> 
> 赞同：4
> 
> 时间：2012-06-20T07:38:58.720
> 
> 标签：iphone, ios, xcode, ios4, xcode4.3

我的代码中有以下警告（XCode 4.3 / iOS 4/5） -

从不兼容的类型“MainViewController *”分配给“id”

本节提出警告 -

```
- (IBAction)sendInAppSMS:(id)sender
{
MFMessageComposeViewController *controller = [[[MFMessageComposeViewController alloc] init] autorelease];
if([MFMessageComposeViewController canSendText])
{
    controller.body = @"A test message from http://www.macoscoders.com";
    controller.recipients = [NSArray arrayWithObjects:@"9880182343",nil];
    controller.messageComposeDelegate = self;
    [self presentModalViewController:controller animated:YES];
}
} 
```

特别是这条线 -

```
controller.messageComposeDelegate = self; 
```

对我的代码有什么问题感到有些困惑。谷歌搜索警告我找到了一些参考资料，但我很难理解答案。

任何指针/解释将不胜感激。

最好的祝福

抢

我完整的 .h 文件 -

```
#import <UIKit/UIKit.h>
#import <AVFoundation/AVFoundation.h>
#import <AudioToolbox/AudioToolbox.h>
#import <MessageUI/MessageUI.h>
#import "EasyTracker.h"

@interface MainViewController : TrackedUIViewController <MFMailComposeViewControllerDelegate> {

IBOutlet UIView *volumeSlider;  
AVPlayer *radiosound;

IBOutlet UIButton *playpausebutton;

IBOutlet UIActivityIndicatorView *activityIndicator;
NSTimer *timer;

}

@property(nonatomic, retain) AVPlayer                   *radiosound;
@property(nonatomic, retain) UIButton                   *playpausebutton;

- (void)updatebuttonstatus;

- (void)playCurrentTrack;
- (void)pauseCurrentTrack;
- (IBAction)playbutton;
- (IBAction)openMail:(id)sender;
- (IBAction)sendInAppSMS:(id)sender;

@end 
```

我的 .m 文件中的亮点 -

```
#import "MainViewController.h"
#import <AVFoundation/AVFoundation.h>
#import <AudioToolbox/AudioToolbox.h>
#import <MediaPlayer/MediaPlayer.h>
#import "radio99AppDelegate.h"

@implementation MainViewController

- (IBAction)sendInAppSMS:(id)sender
{
MFMessageComposeViewController *controller = [[[MFMessageComposeViewController alloc] init] autorelease];
if([MFMessageComposeViewController canSendText])
{
    controller.body = @"A test message from http://www.macoscoders.com";
    controller.recipients = [NSArray arrayWithObjects:@"9880182343",nil];
    controller.messageComposeDelegate = self;
    [self presentModalViewController:controller animated:YES];
}
}

- (void)messageComposeViewController:(MFMessageComposeViewController *)controller didFinishWithResult:(MessageComposeResult)result
{
switch (result) {
    case MessageComposeResultCancelled:
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"SMSTester" message:@"User cancelled sending the SMS"
                                                      delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
        [alert show];
        [alert release];
    }
        break;
    case MessageComposeResultFailed:
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"SMSTester" message:@"Error occured while sending the SMS"
                                                       delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
        [alert show];
        [alert release];
    }
        break;
    case MessageComposeResultSent:
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"SMSTester" message:@"SMS sent successfully..!"
                                                       delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
        [alert show];
        [alert release];
    }
        break;
    default:
        break;
}

[self dismissModalViewControllerAnimated:YES];
}

- (IBAction)openMail:(id)sender 
{
if ([MFMailComposeViewController canSendMail])
{
    MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc] init];

    mailer.mailComposeDelegate = self;

    [mailer setSubject:@"A Message from MobileTuts+"];

    NSArray *toRecipients = [NSArray arrayWithObjects:@"fisrtMail@example.com", @"secondMail@example.com", nil];
    [mailer setToRecipients:toRecipients];

    UIImage *myImage = [UIImage imageNamed:@"mobiletuts-logo.png"];
    NSData *imageData = UIImagePNGRepresentation(myImage);
    [mailer addAttachmentData:imageData mimeType:@"image/png" fileName:@"mobiletutsImage"]; 

    NSString *emailBody = @"Have you seen the MobileTuts+ web site?";
    [mailer setMessageBody:emailBody isHTML:NO];

    [self presentModalViewController:mailer animated:YES];

    [mailer release];
}
else
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Failure" 
                                                    message:@"Your device doesn't support the composer sheet" 
                                                   delegate:nil 
                                          cancelButtonTitle:@"OK" 
                                          otherButtonTitles: nil];
    [alert show];
    [alert release];
}

}

#pragma mark - MFMailComposeController delegate

- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error 
{   
switch (result)
{
    case MFMailComposeResultCancelled:
        NSLog(@"Mail cancelled: you cancelled the operation and no email message was queued");
        break;
    case MFMailComposeResultSaved:
        NSLog(@"Mail saved: you saved the email message in the Drafts folder");
        break;
    case MFMailComposeResultSent:
        NSLog(@"Mail send: the email message is queued in the outbox. It is ready to send the next time the user connects to email");
        break;
    case MFMailComposeResultFailed:
        NSLog(@"Mail failed: the email message was nog saved or queued, possibly due to an error");
        break;
    default:
        NSLog(@"Mail not sent");
        break;
}

[self dismissModalViewControllerAnimated:YES];
}

@end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T07:43:19.120

您正在使用：

```
MFMailComposeViewControllerDelegate 
```

它应该在哪里：

```
MFMessageComposeViewControllerDelegate 
```

在这里更改：

```
@interface MainViewController : TrackedUIViewController <MFMessageComposeViewControllerDelegate> { 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T07:49:10.333

在头文件中实现 UINavigationControllerDelegate。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T07:46:08.620

不适用于此库，但正如我所见，您的 MainViewController 是 MF* *Mail* *ComposeViewControllerDelegate，但您将其设置为 MF* *Message* *ComposeViewControllerDelegate。

# c++ - 使用 FreeType2 在 Eclipse CDT 中完成代码

> ID：11114908
> 
> 赞同：0
> 
> 时间：2012-06-20T07:39:09.950
> 
> 标签：c++, eclipse, code-completion, freetype

我目前正在编写一个在 Eclipse CDT 中使用 Freetype2 的 C++ 项目。我喜欢 Eclipse 的自动头部解析和代码完成。但是 Eclipse 无法解析标准的 FreeType2 包含代码：

```
#include <ft2build.h>
#include FT_FREETYPE_H 
```

Eclipse 不理解这`FT_FREETYPE_H`是一个指向头文件的宏，因此不会解析它并将其标记添加到自动完成中。由于 Eclipse 不知道我在代码中使用的标记，因此它表明代码中有很多错误。但是代码编译没有问题。有没有办法让 eclipse 解析那些 FreeType2 头文件？

简单地替换`FT_FREETYPE_H`它指向的包含文件不是一种选择，因为在 FreeType2 标头中使用了相同的包含技术，我不想编辑它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:56:46.787

尝试右键单击您的项目，转到`Properties`-> `C/C++ General`-> `Paths and Symbols`-> `Symbols`。然后将（对于您的编译器类型）定义`FT_FREETYPE_H`为您的实际头文件名。

# android - 在 Android 中停止不必要的操作

> ID：11114909
> 
> 赞同：1
> 
> 时间：2012-06-20T07:39:10.013
> 
> 标签：android

我是安卓新手。我想编写一个实时程序，将数据流从 wi-fi 传输到 usb。流应该在 5 毫秒内通过。为此，我需要停止任何其他操作（如 UI）。有办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T11:02:06.127

> 有办法吗？

除非可能通过自定义固件。正如评论者所指出的，Android 不是 RTOS。RTOS 应用程序应使用 RTOS 操作系统。

# c# - ApplicationDataCompositeValue 的大小

> ID：11114912
> 
> 赞同：7
> 
> 时间：2012-06-20T07:39:15.063
> 
> 标签：c#, windows-8, microsoft-metro

我正在将我在 Windows Phone 中发布的应用程序移植到 Win 8。在尝试写入`IsolatedStorage`等效应用程序时 `ApplicationDataContainer`，我遇到了一个异常。例外说

> 错误：状态管理器设置的大小已超出限制

我不确定这是否是使用`ApplicationDataContainer`.

```
public void WriteToIsolatedStorage()
    {
        try
        {

            ApplicationDataContainer localSettings = ApplicationData.Current.LocalSettings;
            ApplicationDataCompositeValue composite = new ApplicationDataCompositeValue();

            if (localSettings.Containers.ContainsKey("LoveCycleSetting"))
            {
                localSettings.DeleteContainer("LoveCycleSetting");
            }

            composite["GetWeekStart"] = m_bWeekStart;

            composite["iHistCount"] = m_iHistCount;

            composite["dtHistory"] = this.DateTimeToString(m_dtHistory);

            composite["avgCycleTime"] = m_iAvgCycleTime;
       }
    } 
```

异常发生在倒数第二行。m_dtHistory 是一个大小为 400 的字符串数组。那么它`ApplicationDataCompositeValue`有固定大小吗？还是我必须将 m_dtHistory 数组写入文件？因为在 WindowsPhone 中我可以直接将数组写入`IsolatedStorageSettings`.

如果有人可以指导我或提供链接，那将非常有帮助。

阿尔法

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T13:09:57.843

是的，具有讽刺意味的是，手机上的设置存储比 WinRT 更容易。您可以只序列化到文件。这是我所做的（部分复制自 中的代码`SuspensionManager.cs`），它适用于值类型和引用类型。

```
 internal static async Task<bool> SaveSetting(string Key, Object value)
    {
        var ms = new MemoryStream();
        DataContractSerializer serializer = new DataContractSerializer(value.GetType());
        serializer.WriteObject(ms, value);
        await ms.FlushAsync();

        // Uncomment this to preview the contents being written
        /*char[] buffer = new char[ms.Length];
        ms.Seek(0, SeekOrigin.Begin);
        var sr = new StreamReader(ms);
        sr.Read(buffer, 0, (int)ms.Length);*/

        ms.Seek(0, SeekOrigin.Begin);
        StorageFile file = await ApplicationData.Current.LocalFolder.CreateFileAsync(Key, CreationCollisionOption.ReplaceExisting);
        using (Stream fileStream = await file.OpenStreamForWriteAsync())
        {
            await ms.CopyToAsync(fileStream);
            await fileStream.FlushAsync();
        }
        return true;
    }

    // Necessary to pass back both the result and status from an async function since you  can't pass by ref
    internal class ReadResults
    {
        public bool Success { get; set; }
        public Object Result { get; set; }
    }
    internal async static Task<ReadResults> ReadSetting<type>(string Key, Type t)
    {
        var rr = new ReadResults();

        try
        {
            var ms = new MemoryStream();
            DataContractSerializer serializer = new DataContractSerializer(t);

            StorageFile file = await ApplicationData.Current.LocalFolder.GetFileAsync(Key);
            using (IInputStream inStream = await file.OpenSequentialReadAsync())
            {
                rr.Result = (type)serializer.ReadObject(inStream.AsStreamForRead());
            }
            rr.Success = true;  
        }
        catch (FileNotFoundException)
        {
            rr.Success = false;
        }
        return rr;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-11T07:21:39.137

> 每个设置的名称最长为 255 个字符。每个设置的大小最大为 8K 字节，每个复合设置的大小最大为 64K 字节。

[https://msdn.microsoft.com/library/windows/apps/windows.storage.applicationdata.localsettings.aspx](https://msdn.microsoft.com/library/windows/apps/windows.storage.applicationdata.localsettings.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T18:02:56.897

我在某处读到但丢失了大小为 64KB 的参考

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-05T12:19:30.087

```
 public static void StoreConfig(string content)
    {
        IEnumerable<string> strs = Split(content, 2000);
        int i = 1;
        foreach(var s in strs)
        {
            AppLocalSettings.Values["test" + (i++)] = s;
        }

        AppLocalSettings.Values["test_count"] =  i-1 +"";
    }

    public static string ReadConfig()
    {
        string s = "";
        int count = Convert.ToInt32(AppLocalSettings.Values["test_count"]);
        for(int i = 1; i<=count; i++)
        {
            s += Convert.ToString(AppLocalSettings.Values["test" + (i)]);
        }
        return s;
    } 
```

# xml - WPF 从 XML 读取数据到列表<>

> ID：11114927
> 
> 赞同：0
> 
> 时间：2012-06-20T07:39:51.507
> 
> 标签：xml

我需要从 XML 读取数据到 List<>。XML 文件包含三种表格格式的 XML：

```
<?xml version="1.0" standalone="yes"?>
<Test>
  <Table1>
    <Column_tb1>8</Column_tb1>
  </Table1>
  <Table2>
    <Column_tb2_AA>1</Column_tb2_AA>
    <Column_tb2_BB>11</Column_tb2_BB>
  </Table2>
  <Table2>
    <Column_tb2_AA>2</Column_tb2_AA>
    <Column_tb2_BB>22</Column_tb2_BB>
  </Table2>
  <Table3>
    <Column_tb3_AA>2</Column_tb1_AA>
    <Column_tb3_BB>1</Column_tb1_BB>
    <Column_tb3_CC>25</Column_tb1_CC>
  </Table3>
</Test> 
```

数据集可以很简单地读取，

```
DataSet dsProfile = new DataSet();
dsProfile.ReadXml(strProfile); 
```

通过这种方式，三个数据表将自动在 dsprofile 中。如何使用列表作为容器来保存 XML 文件数据？如果只有一种表格格式，我可以这样做：

```
List<Table1> listtable1 = new List<Table1>();
XmlSerializer serializer = new XmlSerializer(typeof(List<Table1>));
FileStream stream = File.OpenWrite("data.XML");
serializer.Serialize(stream, listtable1); 
```

但是文件中有3种类型的表。如果我仍然想使用 List<>，我该怎么办？

最好的祝福。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T07:47:07.323

我认为您的方法不是很安全。您可以选择将所有内容设为强类型并由以下方式定义：

1.  为 XML 文件创建 XSD
2.  使用 XSD.EXE 生成可序列化的类
3.  用于`XmlSerializer`将 XML 反序列化为类实例
4.  修改实例
5.  用于`XmlSerializer`序列化回 XML

另一种选择是为三个派生类创建一个基类。这样，列表仍然可以将其内容序列化为其派生类型。但是，序列化程序随后将序列化类型信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-08T21:36:00.680

你可以使用这个例子

```
 using (XmlTextReader xmlReader = new XmlTextReader(your file.xml))
      {
          XDocument xdoc = XDocument.Load(xmlReader);
          var programs= from programItem in xdoc.Root.Elements()
                      select new yourclass {
            Id  = Convert.ToInt32( programItem.Attribute("Id").Value),
            value1 = programItem.Attribute("value1").Value,
            value2 = programItem.Attribute("value2").Value
        };

        result = programs.ToList();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-16T13:07:05.320

试试这个：

```
ViewModelSerializer viewModelData = ViewModelSerializer.Deserialize(path);
            foreach(ViewModelBase view in viewModelData.Views) {
                WidgetList.Add(view);
            } 
```

viewModelBase.cs 文件

```
 /// <summary>
    /// Provides common functionality for ViewModel classes
    /// </summary>
    public abstract class ViewModelBase : INotifyPropertyChanged, IMVVMDockingProperties
    {
        #region Data

        public event PropertyChangedEventHandler PropertyChanged;

        #endregion // Data

        #region Protected Methods

        /// <summary>
        /// Raises event property changed.
        /// </summary>
        /// <param name="propertyName">An property expression representation.</param>
        protected void OnPropertyChanged<T>(Expression<Func<T>> action)
        {
            var propertyName = GetPropertyName(action);
            OnPropertyChanged(propertyName);
        }

        /// <summary>
        /// Raises event property changed.
        /// </summary>
        /// <param name="propertyName">A property name.</param>
        protected void OnPropertyChanged(string propertyName)
        {
            PropertyChangedEventHandler handler = PropertyChanged;

            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs(propertyName));
            }
        }

        /// <summary>
        /// Helper to set dependency property value.
        /// </summary>
        /// <typeparam name="T">Property type</typeparam>
        /// <param name="target">Target Dependency property</param>
        /// <param name="value">Value to set</param>
        /// <param name="changedProperties">argument list on changed property names we going notify about notify</param>
        /// <returns></returns>
        protected virtual bool SetValue<T>(ref T target, T value, params string[] changedProperties)
        {
            if (Object.Equals(target, value))
            {
                return false; // no changes, same value
            }

            target = value;

            foreach (string property in changedProperties)
            {
                OnPropertyChanged(property);
            }

            return true;
        }

        #endregion // Protected Methods

        #region Private Methods

        /// <summary>
        /// Helper method to get Property name from Expression.
        /// </summary>
        /// <typeparam name="T">Generic type.</typeparam>
        /// <param name="action">Expression.</param>
        /// <returns>A property name.</returns>
        private static string GetPropertyName<T>(Expression<Func<T>> action)
        {
            var expression = (MemberExpression)action.Body;
            var propertyName = expression.Member.Name;
            return propertyName;
        }

        #endregion // Private Methods

        #region IMVVMDockingProperties Members

        public string TargetName { get; set; }

        #endregion
    }
} 
```

# html - 锚标签在 Safari 浏览器中不起作用

> ID：11114929
> 
> 赞同：0
> 
> 时间：2012-06-20T07:40:02.900
> 
> 标签：html

在我的项目中，我所有的锚标记都可以在 IE 和 Chrome 中完美运行，但它们都不能在 Safari 浏览器中运行。

下面是我的标签。

```
<a id="btnNewCompany" href="#" onclick="btnNewCompany_OnClick()"
 runat="server"> Add Company </a> 
```

从上面我调用 btnNewCompany_ OnClick() javascript。

```
function btnNewCompany_OnClick() {    
    $get('btnEdit').click(); -----> onserverclick event
        } 
```

任何人都可以帮助我为什么 Anchors 在 Safari 中不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:58:36.260

如果@thebiffboff 不正确，请尝试这样声明：

```
btnNewCompany_OnClick = function() {

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:53:55.030

我认为在 asp.net webforms onclick 将在服务器端代码中查找该方法，尝​​试将其更改为 OnClientClick

# java - Applet 是否使用浏览器进行 HTTP 请求？

> ID：11114933
> 
> 赞同：13
> 
> 时间：2012-06-20T07:40:37.627
> 
> 标签：java, caching, browser, applet, urlconnection

发出 HTTP 请求时，applet 与其托管浏览器之间是否有任何交互，或者请求是否完全独立于本机浏览器代码？

具体来说，在浏览器中运行的 Java 小程序是否有某种隐含的方式来共享浏览器的会话状态和缓存？

我从非权威来源阅读了一些帖子，说当一个小程序发出 HTTP 请求时，它将使用浏览器的缓存，并且它还将（以某种方式）访问浏览器的 cookie。

我使用的测试`URLConnection`表明情况并非如此，我的直觉是这听起来太方便了，不可能是真的。我会假设 JVM 中对 JVM 之外的世界一无所知，这意味着唯一可行的方法是，如果 JVM 实现特定于浏览器，则它的 URL 相关方法的实现委托给本机浏览器代码?

如果 cookie 数据不是隐式共享或可用的，最好将`param`标签中的会话 ID 传递给小程序？这种方法是否存在安全问题？如果小程序不使用浏览器的缓存来处理请求，那么在小程序*中*缓存请求是如何工作的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T08:40:46.497

Applet 由 Java Plugin 执行，Java Plugin 是一个浏览器插件。小程序确实是浏览器加载的 HTML 页面的一部分，可以与浏览器 DOM 和页面中的 JavaScript 代码通信，并使用浏览器向其原始服务器发送请求。

有关详细信息，请参阅[http://docs.oracle.com/javase/tutorial/deployment/applet/appletExecutionEnv.html](http://docs.oracle.com/javase/tutorial/deployment/applet/appletExecutionEnv.html)和[http://docs.oracle.com/javase/tutorial/deployment/applet/server.html](http://docs.oracle.com/javase/tutorial/deployment/applet/server.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T07:52:21.163

我对 Windows 7、Java 1.6.23 和 Firefox、Chrome 和 Internet Explorer 的测试是，`HttpURLConnection`来自 applet 的 JVM 内的 s不会与浏览器*交互。*他们*不*使用缓存，*也没有*添加 cookie 标头。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T08:35:57.500

我认为这取决于Java插件。我的经验是，它通常使用浏览器缓存进行网络连接，通常它会传输 cookie。我必须先清空浏览器缓存才能在小程序中获取新文件。

如果您查看 Oracle Java 7 插件控制面板，您将在网络参数中看到一个选项，用于对小程序使用直接连接，但默认设置是使用“浏览器参数”。

至于 cookie，我过去曾见过一些不传输会话 cookie 的 Java 插件，特别是在 MacOS X 上（Apple 甚至提出了一种解决方法）。但是大多数开发人员现在都假设它们是被传输的，并且在实践中它通常是有效的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T08:36:52.853

Applet 默认不共享会话信息，但您可以在初始化时通过 Applet 参数传递会话 ID。并为每个 HTTP 请求使用会话 ID。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-01T19:22:45.683

Applet 可以与浏览器交互，通过 JavaScript 调用发出 HTTP 请求。

如果您使用任何 Java HTTP API，例如 UrlConnection、Apache HTTPClient、java.net.Socket，这些库将不会与浏览器交互。它们的行为就好像它们在独立的 JVM 中一样。缓存 id 取决于您使用的 API，Apache HttpClient 有一个缓存。URLConnection 让您可以轻松地编写自己的缓存。

您还不能直接访问 JavaScript 中的现有缓存，它即将推出。[https://developer.mozilla.org/en-US/docs/Web/API/CacheStorage](https://developer.mozilla.org/en-US/docs/Web/API/CacheStorage)。

一旦页面被渲染，参数标签就不能改变，例如 OAuth 令牌需要定期刷新。您可以通过 JavaScript 从浏览器中获取 cookie，然后手动将它们添加到 Java 发起的 HTTP 请求中。这种机制允许它们被更新。

共享 cookie 不会增加太多风险。如果 cookie 上有 HTTPOnly 标志，则必须删除该标志。

如果您在浏览器中允许使用 Java，那么您的用户几乎可以让您做任何事情。浏览器中的 Java 确实有一个沙箱，但它很容易被破解。如果您可以在没有 Java 的情况下设计应用程序，那么它们对用户来说会更加安全。

从编写 Applet 的人的角度来看，Java 比浏览器中的 JavaScript 更安全且更灵活。

# reflection - 通过 MetadataType 属性获取应用于生成实体的自定义属性

> ID：11114939
> 
> 赞同：6
> 
> 时间：2012-06-20T07:40:53.130
> 
> 标签：reflection, entity-framework-4, metadatatype

在我们的应用程序中，我们使用 EF4.0 和 POCO 实体生成器从数据库生成实体。为了应用数据注释，我们正在创建接口并在我们创建的部分类上实现这些接口，以匹配使用 EF 生成的部分类。

```
/*Entity Generated Type*/
public partial class SomeEntity : EntityBase
{
    public virtual string SomeProperty
    {
        get {...}
        set {...}
    }
}

/*Interface containing metadata*/
public interface ISomeEntityMetadata
{
    [SomeCustomAttribute]
    string SomeProperty { get; set; }
}

/*Partial matching class for interface*/
[MetadataType(typeof(ISomeEntityMetadata))]
public partial class SomeEntity : ISomeEntityMetadata
{
} 
```

现在，使用反射，当我们尝试获取是否在“SomeEntity.SomeProperty”上应用了“SomeCustomAttribute”时，它会返回未应用该属性。

如果我们编辑生成的代码并直接应用属性，它就可以工作。
如果我们检查部分类合并形成单一类型，它确实如此。
如果我们检查要应用于类型的 MetadataType 属性（使用反射），它就是。
此外，当实体绑定到任何 WPF 的 UI 元素时，验证会正常工作，但使用反射我们无法找到应用于属性的验证属性和/或自定义属性。

任何帮助或指示都会拯救一个灵魂。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T09:01:56.183

但是标有属性的接口/类`MetadataType`永远不会将这些属性添加到您的原始类中，因此您永远无法在具有反射的类上找到它们。那不是`MetadataType`属性的目的。如果要使用反射，您必须首先找到`MetadataType`属性，检查传递给该属性的类型并在该类型中搜索您的自定义属性。这就是验证使用的方式`MetadataType`。

# ios - 如何在 Xcode 中捕获代码指标？

> ID：11114944
> 
> 赞同：8
> 
> 时间：2012-06-20T07:41:06.483
> 
> 标签：ios, xcode, code-metrics

我想把我的代码写得更干净。为此，我正在寻找一种在 Xcode 中生成代码指标的工具。我想要一个统计数据，显示添加了多少测试、课程等。主要目标是检索程序的圈复杂度。

有谁知道可以为我提供一些代码指标的好的 Xcode 工具或插件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T10:37:24.140

看看[Xcode Statistician](http://www.literatureandlatte.com/freestuff/XcodeStatistician.zip)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-11T22:34:52.473

一个付费（约 5 美元）但很好的解决方案：[Xcode 的 Project Statistics](http://www.lamobratory.com/project-statistics-xcode/)。

# node.js - Express.js 可以在同一个“res”对象上呈现不同的路由吗？

> ID：11114945
> 
> 赞同：0
> 
> 时间：2012-06-20T07:41:13.613
> 
> 标签：node.js, express, ejs

我可以在 route/index.js 中有以下配置吗？

```
exports.PageA = function(req, res) {
...
...
    if(req.method == 'GET') {
        if (condition1) {
            //PageA has 2 .js files
            res.render('PageA', { title: 'A', layout: false});
        }
        else {
            //PageB has 2 + 2 .js files
            res.render('PageB', { title: 'B', layout: false});
        }
    }
    else {
        res.render('PageC', { title: 'B', layout:'some_other_layout' });
    }
}; 
```

案例：mywebsite.com/PageA 在 condition1 通过时正确呈现（所有脚本都正确加载并执行）

问题：但是当条件 1 失败时，我得到了 PageB 渲染，PageB.ejs 中的 javascripts 被渲染但不执行，比如说，在 $document.Ready() 上。奇怪的是，如果我在浏览器中“刷新”已经呈现的 PageB，那么 JavaScript 就会正确执行。

作为一条信息：我在所有“< script >...”中使用 defer="defer" 标签

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:56:40.930

您的问题完全出在客户端。目前仅 Internet Explorer 和 Firefox 支持属性“defer”。我认为您的问题是脚本以错误的顺序加载。检查您的浏览器控制台是否有错误。当您重新加载页面时，将从浏览器缓存中加载脚本。它更快。因此，在这种情况下可能不会出现错误。

# sql - 打印格式化字符串的 SQL 查询

> ID：11114946
> 
> 赞同：0
> 
> 时间：2012-06-20T07:41:21.043
> 
> 标签：sql

我想使用以下格式的查询“打印”输入名称：

假设我的输入字符串是`"Sujeet Kumar Panda"`那么我应该得到`"s.k.panda"`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:09:24.260

尝试这个

```
select substring('Sujeet Kumar Panda',1,1) + '.' 
    + substring('Sujeet Kumar Panda',(CHARINDEX ( '_','Sujeet Kumar Panda')+1),1) + '.' 
    + substring(substring('Sujeet Kumar Panda',(CHARINDEX ( ' ','Sujeet Kumar Panda')+1),20), charindex(' ',substring('Sujeet Kumar Panda',(CHARINDEX ( ' ','Sujeet Kumar Panda')+1),20)),20) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:04:11.797

考虑到`FIRST_NAME,MIDDLE_NAME,LAST_NAME`数据库中的SQL语句..

```
substr(FIRST_NAME,1,1) + '.' + substr(MIDDLE_NAME) + '.' + LAST_NAME 
```

所以`substr(FIRST_NAME,1,1)`会打印 's' 的 sujeet ..

另外，如果某些名称没有 MIDDLE_NAME，则需要使用 DECODE 函数来纠正此问题。

另外，检查 USER 是否也没有姓氏..

# android - 以编程方式将 Android 库项目添加到 Eclipse

> ID：11114953
> 
> 赞同：0
> 
> 时间：2012-06-20T07:41:41.757
> 
> 标签：android, eclipse

我即将为Android项目编写一个小型轻量级的依赖管理工具。有了它，您将能够编译所需的 jar 文件和 Android 库项目列表。然后应该自动下载这些 jar 和库项目并将其添加到您的项目设置中。

Android库项目的“添加到您的项目设置”部分是我的问题。是否有某种设置文件（例如 .classpath 文件）可以插入其中？我在项目文件夹中找不到任何东西。

把事情弄清楚。我不是在谈论 ant 构建过程。很清楚如何在那里添加库项目。我只是在谈论 Android 库项目的 Eclipse 设置。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T07:58:50.623

对于 jars，将 classpathentry 添加到项目的 .classpath 文件中，例如：

```
<classpathentry kind="lib" path="libs/myjarlibrary.jar"/> 
```

请注意，jar 需要位于项目的 libs 文件夹中。

对于 Android 项目，将它们添加到 project.properties 文件中，例如：

```
android.library.reference.1=../myandroidlibrary 
```

（增加每个 android 库的数量）

# tomcat - 访问 tomcat 别名中的符号链接

> ID：11114961
> 
> 赞同：0
> 
> 时间：2012-06-20T07:42:45.687
> 
> 标签：tomcat, tomcat7

在 Meta-inf 内的我的应用程序的 context.xml 中，

我创建了如下所示的别名。

```
<Context aliases="/a=/d/e/a"/> 
```

该路径`/d/e/a`是 Web 应用程序外部的共享挂载路径。

现在的问题是当我尝试访问以下内容时

`/d/e/a/h/zzz.pdf`，我收到 404 错误。原因是 h 是 mount 中的符号链接，它指向 mount 中的另一条路径`/i/j/k`。

那么如何访问在tomcat别名中具有符号链接的文件夹呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:11:07.367

请参阅： [为 Tomcat 中的单个目录配置符号链接](https://stackoverflow.com/questions/315093/configure-symlinks-for-single-directory-in-tomcat)

[http://isocra.com/2008/01/following-symbolic-links-in-tomcat/](http://isocra.com/2008/01/following-symbolic-links-in-tomcat/)

# iphone - Twitter.framework 问题

> ID：11114962
> 
> 赞同：0
> 
> 时间：2012-06-20T07:42:54.037
> 
> 标签：iphone, image, twitter, twrequest

我正在使用 Twitter.framework 将图像发布到 Twitter。我使用此代码

```
 // Create an account store object.
        ACAccountStore *accountStore = [[ACAccountStore alloc] init];

        // Create an account type that ensures Twitter accounts are retrieved.
        ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

        // Request access from the user to use their Twitter accounts.
        [accountStore requestAccessToAccountsWithType:accountType withCompletionHandler:^(BOOL granted, NSError *error) {
            if(granted) {
                // Get the list of Twitter accounts.
                NSArray *accountsArray = [accountStore accountsWithAccountType:accountType];

                if ([accountsArray count] > 0) {
                    // Grab the initial Twitter account to tweet from.
                    ACAccount *twitterAccount = [accountsArray objectAtIndex:0];

                    UIImage *image =[UIImage imageNamed:@"logo"];

                    TWRequest *postRequest = [[TWRequest alloc] initWithURL:[NSURL URLWithString:@"https://upload.twitter.com/1/statuses/update_with_media.json"] 
                                                                 parameters:[NSDictionary dictionaryWithObject:@"Hello. This is a tweet." forKey:@"status"] requestMethod:TWRequestMethodPOST];

                    // "http://api.twitter.com/1/statuses/update.json" 

                    [postRequest addMultiPartData:UIImagePNGRepresentation(image) withName:@"media" type:@"multipart/png"];

                    // Set the account used to post the tweet.
                    [postRequest setAccount:twitterAccount];

                    [postRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
                        NSString *output = [NSString stringWithFormat:@"HTTP response status: %i", [urlResponse statusCode]];
                        NSLog(@"output = %@\n\n", output);
                    }];
                }
            }
        }]; 
```

在日志中，我看到“HTTP 响应状态：200”。这意味着成功！来自[推特网站](https://dev.twitter.com/docs/error-codes-responses)。但我不明白，如果我什至不输入任何登录名和密码，它怎么能成功。我应该在哪里设置登录名和密码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T08:18:46.017

您在“设置”应用中进行身份验证。我假设它使用 xAuth，因此您的应用无需知道用户名和密码。

# bash - Bash获取文件夹中所有文件的md5sum

> ID：11114968
> 
> 赞同：4
> 
> 时间：2012-06-20T07:43:19.727
> 
> 标签：bash, md5sum

嗨，我正在查看目录中正在更改的文件，我想获取每个文件的 md5sum 并将其写入文本文件。然后在我知道文件已更改后，我想再次运行它，以便我可以比较输出文件以查看确切更改的内容。这是我尝试过的，但它不能按我的需要工作。

此外，我不仅需要获取文件夹中每个文件的 md5sum，包括子目录，我还需要它不遵循符号链接

```
#!/bin/bash
#

cd /sys/class
for i in $(find . -type f)
do
    ls -lt "$i" >> /home/george/Desktop/before.txt
done
echo "Finished!" 
```

感谢您的任何帮助

**===编辑===**

我把我的实际路径放进去，因为我真的认为不需要隐藏它们。无论如何，运行它只返回几个文件（下面的输出文件），这些文件是文件夹中的文件，这意味着它不会进入子目录并找到这些文件。顺便说一句，对不起，我的 bash 生锈了

```
--w------- 1 root root 4096 Jun 20 03:03 ./gpio/export
--w------- 1 root root 4096 Jun 20 03:03 ./gpio/unexport
-rw-r--r-- 1 root root 4096 Jun 20 03:03 ./firmware/timeout
-r--r--r-- 1 root root 4096 Jun 20 03:04 ./drm/version 
```

**===编辑2===**

不完全确定为什么找不到其中一些文件，例如 /sys/class/backlight/intel_backlight/brightness

还有许多其他类似的文件，由于某种原因找不到很多文件

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-20T07:55:34.853

`cd`是不必要的，`type -f`实际上您已经在绕过符号链接。所以循环也是不必要的：

```
find /path/to/directory -type f -exec md5sum {} + >before.txt 
```

如果您的`find`年龄太大而无法支持，请`-exec {} +`尝试使用`-exec {} \;`。

为了`md5sum`比较，您可以尝试简单地删除相同的行；

```
fgrep -vxf before.txt after.txt | less 
```

这是假设列表`before.txt`适合`fgrep`；但如果你要处理几十万个文件，它可能可以应付。但是，这不会识别已删除的文件`before.txt`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T07:47:48.730

如果您的文件列表大小足够小，可以在内存中完成所有操作，则可以考虑按哈希对 before.txt 进行排序。如果您这样做，`after.txt`即使文件名已更改，您也可以逐行处理每个文件并识别匹配项。您还可以跳过已删除或添加的文件，而问题比必须解释`diff before.txt after.txt`

如果使用文件修改日期是一个选项，您可以做的是`ls -lt | head`过滤掉最新的文件并保留它。然后，当您想检查更改时，`ls -lt`再次检查比您存储日期更新的任何内容。无论文件列表大小如何，这都应该可以很好地工作，但容易受到修改最后修改日期的人的攻击（这将需要 root 权限）

# php - Fuel PHP Orm，加入

> ID：11114975
> 
> 赞同：0
> 
> 时间：2012-06-20T07:43:41.427
> 
> 标签：php, database, orm, fuelphp

我最近一直在玩fuelphp，并且正在尝试使用ORM。以前从未使用过 ORM，所以我认为我不太了解。

我的数据库由具有多个对象元的对象类型组成。

所以我有三张桌子。

`object_types`其中有多个`object_types_meta`这是一个连接表`objects_meta_type`

但我不知道如何将其转换为 ORM。有人可以指出我正确的方向吗？

我以为会是： `object_types`有很多`object_types_meta`，然后`object_types_meta`属于，`objects_types`但我该怎么办`object_meta_type`？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:10:24.780

看起来您可能正在使用`many to many`与 object_types_meta 之间的关系表？

[http://fuelphp.com/docs/packages/orm/relations/many_many.html](http://fuelphp.com/docs/packages/orm/relations/many_many.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T09:27:43.407

如果连接表不包含除两个外键之外的任何额外列，则应使用多对多关系，并将连接表用作“通过”表。

如果它确实包含您需要访问的列，您还必须为连接表创建一个模型，并创建两个从连接表到其他两个模型的一对多关系。

# ruby-on-rails - Rails 和 Selenium：如何在浏览器中停止/暂停执行测试？

> ID：11114986
> 
> 赞同：16
> 
> 时间：2012-06-20T07:44:38.820
> 
> 标签：ruby-on-rails, selenium, bdd

我正在使用 Cucumber、RSpec、Selenium 和 Rails 进行行为驱动开发，这很艰难（但非常有趣）。

我已经准备好使用 Selenium 进行测试，看到 Firefox 弹出并在我的场景中自动运行很有趣。但我想做的一件事是在某个点暂停或停止执行，这样我就可以检查 Selenium 在某个点看到的内容。

我知道 save_and_open_page 命令，但这只会显示没有格式化的纯 HTML。所以也许有一个 stop_execution 方法或什么东西可以在**不**关闭浏览器的情况下停止 Selenium？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-12T18:46:53.100

安装[pry](https://rubygems.org/gems/pry)，然后将`binding.pry`测试放在您希望暂停的地方。完成后，按`Ctrl`+`D`或输入`exit`打开的 REPL 以继续执行。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-10-27T22:54:05.783

要不就：

```
 visit '/'
 sleep(inspection_time=5)
 visit '/dreamland' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T10:41:12.493

在要执行的地方使用**调试器**`stop/pause`。

或者

在 Selenium IDE 中，您可以右键单击**命令行**，然后可以选择**设置/清除开始点**来`stop/pause`执行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T07:02:33.360

好的，我通过安装 ruby​​-debug19（适用于 Ruby 1.9.3），然后在 Cucumber 步骤中的某处设置断点来使其工作。

[http://rails.vandenabee.com/blog/2011/12/21/installing-ruby-debug19-with-ruby-1-dot-9-3-on-rvm/](http://rails.vandenabeele.com/blog/2011/12/21/installing-ruby-debug19-with-ruby-1-dot-9-3-on-rvm/)

另一种选择是使用 Capybara-firebug gem，它添加了一个“然后停止并让我调试”步骤，基本上看起来是一样的（我不知道它是否依赖于 ruby​​-debug gems）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T07:48:40.847

尝试使用 selenium.sleep(ms) 这将使测试执行等待指定的时间

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-30T10:38:03.727

所有答案都需要安装新的 gem，甚至设置睡眠，这不是最好的方法。您可以将此行放在步骤中的任何位置：

```
ask "Continue?" 
```

它将停止执行，直到您输入`y`（是）

因此，例如，它看起来像这样：

```
expect(page).to have_button('Submit')
ask "Continue?"
click_button('Submit') 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-05T01:44:48.480

您可以使用 byebug 来执行此操作，而无需在 rails 5 或更高版本中安装任何 gem。只需`byebug`在您希望测试暂停的行上键入。

例子：

```
visit post_url(id: posts(:one).id)
byebug
click_on "...", match: :first 
```

这样做会在新页面加载后但在单击下一步按钮之前暂停测试。如果使用旧版本的 Rails，您可能必须安装`byebug`gem，但它对于故障排除很有用，我建议无论如何都使用它。

# c# - 使用 INNER JOIN 时出现意外的数据库输出

> ID：11114987
> 
> 赞同：1
> 
> 时间：2012-06-20T07:44:40.480
> 
> 标签：c#, sql, sql-server-2008

我有以下 SQL 查询

```
SELECT 
       r.BEZEICHNUNG AS BEZEICHNUNG, r.ID AS ID,
       ra.BEZEICHNUNG AS raumBEZEICHNUNG, ra.ID AS raumID
FROM 
       RAUM r
       INNER JOIN RAZUORDNUNG rz ON rz.RAUM_ID = r.ID
       INNER JOIN RAUMATTRIBUTE ra ON rz.RAUMATTRIBUTE_ID = ra.ID 

WHERE
       RAUMKLASSE_ID = ISNULL(@Raumklasse_ID, RAUMKLASSE_ID) 
AND    STADT_ID = ISNULL(@Stadt_ID, STADT_ID) 
AND    GEBAEUDE_ID = ISNULL(@Gebaeude_ID, GEBAEUDE_ID) 
AND    REGION_ID = ISNULL(@Region_ID, REGION_ID)
AND    RAUMATTRIBUTE_ID = ISNULL(@Raumattribute_ID, RAUMATTRIBUTE_ID) 
```

但我认为这有问题。

例如：

如果我`three`在浏览器中输入`RAUMKLASSE_ID`文本字段并调用我的方法，它只会返回一个房间。但是有六个房间有那个ID。奇怪的是，如果我删除我的两`INNER JOIN`行和第二行`SELECT`，如下所示：

```
SELECT 
       r.BEZEICHNUNG AS BEZEICHNUNG, r.ID AS ID
FROM 
       RAUM r
WHERE
       RAUMKLASSE_ID = ISNULL(@Raumklasse_ID, RAUMKLASSE_ID) 
AND    STADT_ID = ISNULL(@Stadt_ID, STADT_ID) 
AND    GEBAEUDE_ID = ISNULL(@Gebaeude_ID, GEBAEUDE_ID) 
AND    REGION_ID = ISNULL(@Region_ID, REGION_ID)
AND    RAUMATTRIBUTE_ID = ISNULL(@Raumattribute_ID, RAUMATTRIBUTE_ID) 
```

它是返回六间房间，这是正确的。我不知道我的查询有什么问题。也许有人可以帮助我？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T07:53:10.193

这是预期的行为，因为：

```
FROM RAUM r
INNER JOIN RAZUORDNUNG rz ON rz.RAUM_ID = r.ID
INNER JOIN RAUMATTRIBUTE ra ON rz.RAUMATTRIBUTE_ID = ra.ID 
```

只会让您找到在 tables 中找到的房间`RAUM`，`RAZUORDNUNG`并且`RAUMATTRIBUTE`tables，删除这些`INNER JOIN`s 将从`RAUM`table 中获得满足您条件的所有房间，请查看这些页面以获取有关`JOIN`s 的更多详细信息：

*   [`JOIN`s的视觉解释](https://blog.codinghorror.com/a-visual-explanation-of-sql-joins/)。
*   [维基百科关于`JOIN`s 的文章](https://en.wikipedia.org/wiki/Join_%28SQL%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T07:52:51.400

INNER JOIN 不会返回没有相应 RAZUORDUNG 或 RAUMATTRIBUTE 的 RAUM 条目。您可能需要 LEFT JOIN 代替；在这种情况下，返回集中的 raumBEZEICHNUNG 和 raumID 可能为空。

# ssas - 如何在数据仓库中建模过程和状态历史？

> ID：11114988
> 
> 赞同：5
> 
> 时间：2012-06-20T07:44:44.233
> 
> 标签：ssas, data-modeling, data-warehouse, dimension, fact

假设我们有`D_PROCESS`和作为维度，以及将流程（什么）与工人（负责人）和“当前”状态联系起来的`D_WORKER`事实。`D_STATUS``F_EVENT`

进程状态随时间而变化。我们应该在`F_EVENT`每个进程/状态/工作者存储一行，还是每个进程/工作者一行，并且“其他地方”为给定进程/工作者的每个状态更改存储一行？

我是 Datawarehouse 的新手，很难找到与数据建模相关的最佳实践/教程。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T12:56:15.817

阅读Ralph Kimball 的[The Data Warehouse Toolkit](https://rads.stackoverflow.com/amzn/click/com/0471200247)，了解维度建模的良好介绍。

听起来您将流程更改事件存储在 F_EVENT 中。如果这个过程有一个定义的开始和结束，我会构建一个快照事实表，它可以让你随着时间的推移跟踪这个过程（只需在每次过程从一个步骤移动到另一个步骤时更新行）。

编辑：

我将尝试使用您的尺寸作为示例来制作一般情况。

对于 D_PROCESS，建模“流程”通常不建模为维度，您称其为“什么”，因此我将其重命名为“D_ACCOUNT”。

基本数据模型将用于“税务处理系统”，其中 WORKERS 正在处理 ACCOUNTS，并且每个 ACCOUNT/WORKER 组合具有该流程当前所处位置的几个可能的“状态”。

```
D_ACCOUNT
    ACCOUNT_NUMBER
    ACCOUNT_TYPE

D_WORKER
    WORKER_ID
    FIRST_NAME
    LAST_NAME
    BADGE_NUMBER
    SHIFT

D_STATUS
    STATUS_ID
    STATUS_NAME 
```

现在，如果我想报告由工作人员执行的帐户发生的所有“事件”，我可以构建一个事务级事实表 F_EVENT：

```
F_EVENT
    ACCOUNT_ID
    WORKER_ID
    STATUS_ID
    EVENT_TIME_ID
    Metrics taken at time of the measurement (Cost, Worker time spent, etc) 
```

我们将标识行的唯一维度组合称为事实表的*粒度*或*粒度*。

此表的粒度是 Account、Worker、Status 和 Time。它回答了诸如“我在 3 班轮班的员工在周三花了多少时间处理账户？”之类的问题。或“发生了多少事件将处理状态更改为“已关闭”？

我不确定这种类型的桌子会有多大帮助。

相反，假设您有兴趣在流程通过各种状态时跟踪流程本身。我将假设状态总是及时向前移动，从“未开始”到“处理中”再到“关闭”。

我将构建 Kimball 所说的“累积快照事实表”。

```
F_TAXPROCESSING
    ACCOUNT_ID
    WORKER_ID 
    CURRENT_STATUS_ID
    NOT_STARTED_DTTM
    NOT_STARTED_FLAG
    IN_PROCESS_DTTM
    IN_PROCESS_FLAG
    CLOSED_DTTM
    CLOSED_FLAG 
```

该表的粒度是 Account, Worker。此表通过更新状态更改的日期/时间以及达到该状态时的标志来跟踪“过程”。

这使您可以随着时间的推移跟踪流程，让您查看有多少帐户对“处理中”状态做出反应，到达那里需要多长时间等等。

# c# - 成功构建时找不到方法

> ID：11114989
> 
> 赞同：1
> 
> 时间：2012-06-20T07:44:48.423
> 
> 标签：c#, methods, build, assemblies

我使用 VS2008 构建了一个 C# Web 应用程序。构建成功，但由于某种未知原因，它不包含曾经存在的方法之一。尝试调用触发该方法的 Web 服务时出现以下错误：

`System.Web.Services.Protocols.SoapException: System.Web.Services.Protocols.SoapException: Server was unable to process request. ---> System.ApplicationException: UpdateDataObject failed with message: An error occurred (1000691): Method "DeprovisionHandling2" could not be found in class "Assignments" --->`

一旦我生成了一个新版本，该方法就回到了 DLL 中，并且 Web 服务和以前一样工作得很好。

有人遇到过这个奇怪的问题吗？可能是什么原因以及如何确保我们将来避免它？

构建是由 TFS 制作的。

谢谢！