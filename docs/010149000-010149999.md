# StackOverflow 问答 10149000-10149999

# c++ - C++ 定时器、线程、周期性调用

> ID：10149010
> 
> 赞同：0
> 
> 时间：2012-04-13T22:16:04.770
> 
> 标签：c++, multithreading, winapi, timer

我有线程安全回调的问题。

```
void draw_something() { /* draws something */ } 
```

问题是，如何`draw_something`在每个指定的时间段内调用主应用程序线程，而不考虑其他代码（因此它会像 C# Timer 和主线程中的触发函数一样）？早些时候，我使用 CreateWindow 创建（在主线程中）辅助窗口，该窗口处理来自 SendMessage 的消息（从另一个计时器线程发送）：

```
void MainThreadFunction(){
    CreateThread(0, NULL, GoProc, NULL, NULL, NULL);
}

DWORD WINAPI GoProc(LPVOID lpParam){
    while(1){
        SendMessage(auxiliary_window_hWnd, ADDINATIONAL_MESSAGE, 0, 0);
        Sleep(30);
    }
    return 0;
} 
```

因此，window 的 MessageQueue 处理安全线程调用，但我认为这不是一种非常有效和优雅的方式。我知道有更好的方法（也许是提升？）但我不知道。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T22:21:41.427

您可以使用 Windows[`SetTimer`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644906.aspx)调用来获取定期[`WM_TIMER`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644902.aspx)消息并完全跳过第二个线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T22:54:58.597

您不能只是神奇地“中断”正在运行的线程并“注入”您自己的代码，而不是在用户空间中。

如果您没有特别严格的时间要求，您已经拥有的解决方案（本质上是一种[消息传递形式）很好。](http://en.wikipedia.org/wiki/Message_passing)

如果时间对您*很*重要，即您必须保证事件（在您的情况下经过时间）和处理该事件之间有一定的延迟，您必须在“检测到”事件的线程中进行处理或维护准备好唤醒并立即进行处理的工作线程池。但我猜`draw_something()`必须在 UI 线程上完成，所以这个解决方案可能已经过时了。

# css - windows上的firefox中的大字体不平滑

> ID：10149022
> 
> 赞同：3
> 
> 时间：2012-04-13T22:17:26.480
> 
> 标签：css, fonts, stylesheet, cleartype

所以，我正在制作一个小型投资组合网站 (http://www.cip.ifi.lmu.de/~fritschd/testDebo/)，在那里我有一个带有大字体的大盒子。在 mac 上，一切都很好，但是在 windows 上，这取决于浏览器，它真的很糟糕。Windows 上的 Firefox 就是其中之一。

有没有办法平滑这个大字体？我还有什么其他选择？（出于 SEO 的原因，我不想使用图像）。顺便说一句，其他（系统）字体也有同样的问题。

编辑：该示例可以在链接[页面](http://www.cip.ifi.lmu.de/~fritschd/testDebo/)中找到。字体大小约为 ca。180px，所以它很大。似乎有问题的浏览器是 windows 上最新版本的 firefox。如果您查看页面中带有名称的 div，则边框是像素化的。我读到这是 Windows 真字体选项和没有自己的设置（即 chrome）的浏览器的问题。那么此时我的选择是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T04:30:16.833

不幸的是，据我所知，您无法在代码中做任何可以提供帮助的事情，但可以在您自己的浏览器中通过`about:config`切换`gfx.direct2d.disabled`到 true 来稍微补救一下。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T05:13:47.173

在 Windows 上使用 ClearType 字体是一个众所周知的问题，它不受任何特定的 Web 浏览器的约束。阅读这个非常清楚的解释[font-face-loaded-on-windows-look-really-bad-which-fonts-are-you-using-that-rend](https://graphicdesign.stackexchange.com/questions/265/font-face-loaded-on-windows-look-really-bad-which-fonts-are-you-using-that-rend)

此问题不应影响 Windows 7 和/或 IE9 用户。

我的建议是使用满足 SEO 要求的 -9999px 技术使用透明 PNG 来实现您的大文本块。查看原始著名的 -9999px [css-image-replacement-technique/](http://www.sitepoint.com/new-css-image-replacement-technique/)或新开发的技术[Replacing-the-9999px-hack-new-image-replacement/](http://www.zeldman.com/2012/03/01/replacing-the-9999px-hack-new-image-replacement/)

# html - Div 不能换行图像

> ID：10149026
> 
> 赞同：1
> 
> 时间：2012-04-13T22:17:56.197
> 
> 标签：html, css, user-interface

我自己无法解决，所以我决定使用 UI 黑客的帮助。

我试图通过创建一个**div**来做一个简单的设计，插入一个图像（它将留在左边，**比**第二张图片大），然后是一个文本（基本上包括带有**p's 的**文本），然后是一个小图片在右边。文本在左侧包裹图像就好了，但问题是右侧的图像**没有**被图片包裹。

这是我正在处理的代码：

```
<html>
<head>
</head>
<body>
<div style='overflow:hidden;width:600px;border:1px solid black;padding:5px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;'>
    <img src='../images/monkey.jpg' style='margin-right:7px;border:1px solid #C0C0C0;padding:5px;float:left;height:100px;width:125px;'/>
    <div style='word-wrap:break-word;'>
         this is the second paragraph that has not even made it to the actual,this is the second paragraph that has not even made it to the actual, live, brutal online life.this is the second paragraph that has not even made it to the actual, live, brutal online life..This is the first paragraph to demonstrate how awesome-ly our products being built. Like w/e this is the second paragraph that has not even made it to the actual,this is the second paragraph that has not even made it to the actual, live, brutal online life.this is the second paragraph that has not even made it to the actual, live, brutal online life..This is the first paragraph to demonstrate how awesome-ly our products being built. Like w/e this is the second paragraph that has not even made it to the actual,this is the second paragraph that has not even made it to the actual, live, brutal online life.this is the second paragraph that has not even made it to the actual, live, brutal online life..This is the first paragraph to demonstrate how awesome-ly our products being built. Like w/e <img src='../images/monkey.jpg' style='margin-right:7px;border:1px solid #C0C0C0;padding:5px;float:right;height:50px;width:60px;'/>
    </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T22:46:39.453

它实际上工作正常，您只需要将图像放在文本中的较高位置。我删除了 div 包装器并将图像放在更高的位置，它可以工作：

***[jsFiddle 演示](http://jsfiddle.net/DotNetScott/uR34H/1/)***

## HTML：

```
<html>
<head></head>
<body>
    <div style='overflow:hidden;width:600px;border:1px solid black;padding:5px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;word-wrap:break-word;text-align:justify'>
        <img src='../images/monkey.jpg' style='margin:7px;border:1px solid #C0C0C0;padding:5px;float:left;height:100px;width:125px;'/>
        this is the second paragraph that has not even made it to the actual, this is the second paragraph that has not even made it to the actual, live, brutal online life.this is the second paragraph that has not even made it to the actual, live, brutal online life..This is the first paragraph to demonstrate how awesome-ly our products being built. Like w/e this is the second paragraph that has not even made it to the actual,this is the second paragraph that has not even made it to the actual, live, brutal online life.this is the second paragraph that has not even made it to the actual, live, brutal online life..This is the first paragraph to demonstrate how awesome-ly our products being built. 
        <img src='../images/monkey.jpg' style='border:1px solid #C0C0C0;padding:5px;float:right;height:50px;width:60px;margin:7px;'/> 
        Like w/e this is the second paragraph that has not even made it to the actual,this is the second paragraph that has not even made it to the actual, live, brutal online life.this is the second paragraph that has not even made it to the actual, live, brutal online life..This is the first paragraph to demonstrate how awesome-ly our products being built. Like w/e.
    </div>
</body>
</html> 
```

## 输出：

![jsFiddle 演示截图](../Images/7e10ab26c349b35b796640f5a3181137.png)

# scala - 为什么我在 Scala 中得到 Some 而不是 String

> ID：10149027
> 
> 赞同：5
> 
> 时间：2012-04-13T22:18:07.047
> 
> 标签：scala

为什么我得到的是 [Some] 对象而不是 [String] 对象？
Some 对象在方法调用中不能用作字符串参数。

`config def`返回 a所以`String`我希望类型是`String`。
但是当我输入“Hello”时，Scala 是正确的。

代码

```
 def config(s: String) = Play.current.configuration.getString(s).toString()
    Logger.info(config("recaptcha.publicKey"))
    Logger.info("Hello") 
```

输出

```
[info] application - Some(6LeDMdASAAAAAC4CFIDY-5M7NEZ_WnO0NO9CSdtj)
[info] application - Hello 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-13T22:24:03.797

您不必要地调用`toString()`（`Option[String]`返回`Play.current.configuration.getString()`），试试这个：

```
def config(s: String) = Play.current.configuration.getString(s).get 
```

或者~~也许~~最好：

```
Play.current.configuration.getString(s).getOrElse("some default") 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-13T22:22:48.447

getString返回一个Option[String]，这样在没有返回的时候可以返回一个空值。当有东西要返回时，它会返回 Some(string) ，您可以使用 get() 方法获取内部字符串。

# java - Java - 在 Mongo 中将字符串存储为没有任何类型的对象

> ID：10149028
> 
> 赞同：0
> 
> 时间：2012-04-13T22:18:09.863
> 
> 标签：java, mongodb, mongodb-java

我有

```
String  toInsert = "somestring";

insert(toInsert); 
```

和

```
insert(String toInsert) {

     DBObject dbo = new BasicDBObject();

     dbo.put("value" : toInsert);
} 
```

在 Mongo 中，这被保存为

```
{"value" : "somestring"} 
```

但我希望它被保存为

```
{"value" : somestring} 
```

我怎样才能改变它以像这样保存它Mongo？

我试图插入的“somestring”是一个 Javascript 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:22:13.880

您可以通过将包含 javascript 方法的字符串传递给构造函数来创建 CodeWScope 对象。另请参阅此[问题](https://stackoverflow.com/questions/10037569/under-mongodb-java-driver-mapreduce-command-scope-add-functions-to-scope/10045887#10045887)以获取有关如何执行此操作的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T01:25:31.277

您可以将函数名称存储为字符串，然后当您想要实际运行该函数时，您可以使用反射来加载该方法并运行它。

请参阅：[将方法名称作为字符串给出时如何调用 Java 方法？](https://stackoverflow.com/questions/160970/how-do-i-invoke-a-java-method-when-given-the-method-name-as-a-string)如何。

编辑：我可能误解了这个问题，您的意思是您的示例中的“somestring”是*Java*函数的名称，还是您的意思是它是一个实际的*Javascript*函数？如果是后者，那么没有理由不将其存储为字符串，并且需要更多上下文来理解问题。

# emacs - 如何自动设置 Emacs 的最佳帧宽？

> ID：10149035
> 
> 赞同：0
> 
> 时间：2012-04-13T22:18:57.417
> 
> 标签：emacs, configuration, resize, zooming, elisp

如何自动设置 Emacs 的最佳帧宽？

从命令行使用 Emacs 打开文件时，如何让它自动设置帧大小，使得

*   宽度比最宽行或计算机屏幕宽度宽 2 个字符，以较小者为准

*   高度是 80 行，还是计算机屏幕高度，哪个更小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T02:19:28.943

您可以使用 a`find-file-hook`来设置框架的大小。您将需要诸如显示宽度和显示高度之类的东西，并且您需要遍历整个文件来计算每行的宽度（`forward-line`用于移动到下一行，`end-of-line`走到行尾并`current-column`找到宽度）。而且您可能需要处理一些细节，以解决菜单栏、边缘等问题。

我？我更喜欢声明文件不应超过 80 列，因此我不需要调整框架宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T02:23:05.953

这正是图书馆[`fit-frame.el`](http://www.emacswiki.org/emacs-en/download/fit-frame.el)的[`autofit-frame.el`](http://www.emacswiki.org/emacs-en/download/autofit-frame.el)用途。另请参阅[http://www.emacswiki.org/FrameSize](http://www.emacswiki.org/FrameSize)。

# c# - 使NHibernate覆盖集合中的数据

> ID：10149041
> 
> 赞同：1
> 
> 时间：2012-04-13T22:19:42.693
> 
> 标签：c#, nhibernate, fluent-nhibernate, nhibernate-mapping, fluent-nhibernate-mapping

假设我有一堂课：

```
public class Entity
{
  ...
  public IEnumerable<Cousin> Cousins { get; set; }
} 
```

...我已经映射了它...

```
public class EntityMap : ClassMap<Entity>
{
  public EntityMap()
  {
    ...
    HasMany(x => x.Cousins).Cascade.AllDeleteOrphan();
  }
} 
```

Cousin 没有自己的存储库（至少目前没有）。我不想通过 Entity 及其存储库来节省所有费用。

我已经存储了表兄弟的列表，因此实体在表兄弟中有项目。

下次我想保存实体时，它可能会有新的表亲。因此，我希望现有的 Cousins 消失并为新的 Cousins 收藏腾出空间。

我正在尝试执行此操作，但遇到此错误消息：

```
A collection with cascade="all-delete-orphan" was no longer referenced by the owning entity instance: Cousins 
```

每次我保存实体时，如何让 NHibernate 覆盖 Cousins？此外，如果这是不好的做法 - 说出来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T22:34:05.977

看起来您正在更改集合的参考，我的意思是制作类似的东西`x.Cousings = new List<Cousin>()`

你应该做`x.Clear()`然后添加每个元素`x.Add(someCousin)`

# symfony - 在 Symfony 2 中设置 number_format 的默认值

> ID：10149045
> 
> 赞同：6
> 
> 时间：2012-04-13T22:20:06.057
> 
> 标签：symfony, twig

twig[文档](http://twig.sensiolabs.org/doc/filters/number_format.html)描述了如何为`number_format`扩展设置默认参数。如何在 Symfony 2 中进行设置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T08:45:26.103

Symfony2 不允许访问 twig 的核心扩展。您可以创建一个`kernel.request`事件侦听器，注入`twig`服务并在`onKernelRequest`您必须添加的侦听器的方法中

```
$this->twig->getExtension('core')->setNumberFormat(3, ',', '.'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-16T13:26:37.540

由于 Symfony 2.7，通过我正在运行的 Symfony 4.2-dev，**现在可以配置**.

```
# app/config/config.yml
twig:
    number_format:
        decimals: 3
        decimal_point: ','
        thousands_separator: '.' 
```

请参阅 Symfony 博客文章：[https ://symfony.com/blog/new-in-symfony-2-7-default-date-and-number-format-configuration](https://symfony.com/blog/new-in-symfony-2-7-default-date-and-number-format-configuration)

# objective-c - 使用 NSDictionary 将索引存储为值的更快的 NSArray 查找

> ID：10149049
> 
> 赞同：3
> 
> 时间：2012-04-13T22:20:27.543
> 
> 标签：objective-c, ios, data-structures, nsarray, nsdictionary

假设我有一个学生课程，如下所示：

```
class Student {
    NSNumber *id;
    NSString *lastName;
    NSString *firstName; 
} 
```

现在，当我从 Web 服务获取所有学生的记录时，我有一个 NSArray 来存储所有学生的记录。在某些时候，我需要查找数组以根据名字查找特定学生的记录。

假设我创建了一个名为 studentsFirstNameDictionary 的字典。

所以在将对象添加到学生数组时，我可以做

```
Student objStudent = [[Student alloc] init];
objStudent.Id = someId;
objStudent.firstName = someName;
objStudent.lastName = someLastName;
[studentsDictionary setValue:iterationCounter forKey:objStudent.firstName];
[students addObject:objStudent]; 
```

我想知道创建此字典以加快查找速度是否是个好主意，如下所示。还请假设在任何情况下都需要数组，并且为了快速查找，我正在创建其他字典，也将姓氏和 id 作为键和索引存储为上面的值：

```
-(Student*)getStudentByFirstName:(NSString *)firstName {
  int idxOfStudent = [ studentsDictionary valueForKey:firstName];
  return [students idxOfStudent];
} 
```

您是否认为这种方法比遍历学生数组并比较名字并返回匹配的学生记录在性能方面更好？

我总是需要学生数组，因为我需要用该数组填充表格视图。我想知道在填充数组时创建多个字典是否明智，以便我可以通过名字、姓氏或 ID 更快地查找学生记录？

PS：为简单起见，考虑到所有学生都有唯一的名字、姓氏和 ID，因此在创建存储名字、姓氏或 ID 作为值的字典时不会有任何问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-13T23:00:17.880

这听起来比它需要的更复杂。一般来说，在 Cocoa 中，如果您发现自己正在查阅数据结构教科书来完成这项常见任务，那么您可能错过了[Foundation 文档](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Collections/Collections.html)中的某些内容，或者您​​正在[过早地进行优化](http://en.wikiquote.org/wiki/Donald_Knuth)。

给定一组`Student`对象，至少有两种快速简便的方法可以获取具有唯一属性的对象：

### 使用块测试：

```
NSUInteger index = [studentArray indexOfObjectPassingTest:^(id obj, NSUInteger idx, BOOL *stop) {
    if ([obj.firstName isEqualToString:desiredFirstName]) {
        *stop = YES;  // keeps us from returning multiple students with same name
        return YES;
    } else
        return NO;
}];
if (index != NSNotFound)
    Student *desiredStudent = [studentArray objectAtIndex:index]; 
```

### 使用谓词：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"firstName LIKE %@", desiredFirstName];
NSArray *filteredArray = [studentArray filteredArrayUsingPredicate:predicate];
Student *desiredStudent = [lastObject]; // only object if we assume firstNames are unique 
```

这两个都假设您的`Student`类已经为这些字段（即，不仅仅是实例变量）声明了属性（或符合 KVC 的访问器）。

如果您发现自己经常按名称访问学生，您可能需要考虑使用字典将名称映射到`Student`对象：

```
NSMutableDictionary *studentsByName = [NSMutableDictionary dictionaryWithCapacity:[students count]];
for (Student *student in students)
    [studentsByName setObject:student forKey:[student firstName]]; 
```

如果你有大量的学生并且想通过各种属性搜索他们，你可以考虑学习 Core Data。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T23:31:03.857

我认为您根本不需要数组。

创建您的学生对象：

```
Student objStudent = [[Student alloc] init];
objStudent.Id = someId;
objStudent.firstName = someName;
objStudent.lastName = someLastName;
[studentsDictionary setObject:student forKey:objStudent.firstName]; 
```

通过以下方式查找学生`firstName`：

```
Student * theStudent = [ studentsDictionary objectForKey:firstName ] ; 
```

要从中获取所有 Student 对象`studentsDictionary`，请使用

```
NSArray * allStudents = [ studentsDictionary allValues ] ; 
```

这假设您只能通过他们的`firstName`属性找到学生。@rickster 的解决方案通常可能会更好

# visual-studio-2008 - 从添加 WinForm1 的 WinForm1 实例化 WinForm2 在实例化时会引发未定义的类错误

> ID：10149055
> 
> 赞同：0
> 
> 时间：2012-04-13T22:20:47.120
> 
> 标签：visual-studio-2008, visual-c++, c++-cli

这是 Winform1：

```
#include "Winform2.h"
#include "Winform3.h"

namespace Winform1 {

    /// <summary>
    /// Summary for Winform1
    ///
    /// WARNING: If you change the name of this class, you will need to change the
    ///          'Resource File Name' property for the managed resource compiler tool
    ///          associated with all .resx files this class depends on.  Otherwise,
    ///          the designers will not be able to interact properly with localized
    ///          resources associated with this form.
    /// </summary>
    public ref class Winform1: public System::Windows::Forms::Form
    {
    public:

    private: System::Windows::Forms::Button^  button1;
    private: System::Windows::Forms::Button^  button2;
    private: System::Windows::Forms::Label^  label1;
    private: System::Windows::Forms::Label^  label3;
    private: System::Windows::Forms::Button^  button3;
    private: System::Windows::Forms::Label^  label2;
    private: System::Windows::Forms::Label^  label4;
    private: System::Windows::Forms::Button^  button4;
    public: 
        unordered_map<int, std::string>* fb_contas_email;
        Usuario* usuario;

        WinForm1(Usuario* user, 
            unordered_map<int, std::string>* fb_contas_)
        {
            this->fb_contas_email = fb_contas_;
            this->usuario = user;
            InitializeComponent();
            //
            //TODO: Add the constructor code here
            //
        }
private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {

             this->Visible = false;
             this->Close();
             WinForm2 wf2(this->usuario);  
                         wf2.ShowDialog();

         }

       private: System::Void button2_Click(System::Object^  sender, System::EventArgs^  e) {

             this->Visible = false;
             this->Close();
             WinForm3 wf3(this->usuario);  
                         wf3.ShowDialog();

         }
 //... 
```

这是 Winform2：

```
#include "Winform1.h"

namespace Winform2 {

    /// <summary>
    /// Summary for Winform2
    ///
    /// WARNING: If you change the name of this class, you will need to change the
    ///          'Resource File Name' property for the managed resource compiler tool
    ///          associated with all .resx files this class depends on.  Otherwise,
    ///          the designers will not be able to interact properly with localized
    ///          resources associated with this form.
    /// </summary>
    public ref class Winform2: public System::Windows::Forms::Form
    {
    public:

    private: System::Windows::Forms::Button^  button1;
    private: System::Windows::Forms::Button^  button2;
    private: System::Windows::Forms::Label^  label1;
    private: System::Windows::Forms::Label^  label3;
    private: System::Windows::Forms::Button^  button3;
    private: System::Windows::Forms::Label^  label2;
    private: System::Windows::Forms::Label^  label4;
    private: System::Windows::Forms::Button^  button4;
    public: 
        unordered_map<int, std::string>* fb_contas_email;
        Usuario* usuario;

        WinForm2(Usuario* user, 
            unordered_map<int, std::string>* fb_contas_)
        {
            this->fb_contas_email = fb_contas_;
            this->usuario = user;
            InitializeComponent();
            //
            //TODO: Add the constructor code here
            //
        }
private: System::Void button4_Click(System::Object^  sender, System::EventArgs^  e) {

             this->Visible = false;
             this->Close();
             WinForm1 wf1(this->usuario);  
                         wf1.ShowDialog();

         }
 //... 
```

这是 Winforms 3：

```
namespace Winform3 {

    /// <summary>
    /// Summary for Winform3
    ///
    /// WARNING: If you change the name of this class, you will need to change the
    ///          'Resource File Name' property for the managed resource compiler tool
    ///          associated with all .resx files this class depends on.  Otherwise,
    ///          the designers will not be able to interact properly with localized
    ///          resources associated with this form.
    /// </summary>
    public ref class Winform3: public System::Windows::Forms::Form
    {
    public:

    private: System::Windows::Forms::Button^  button1;
    private: System::Windows::Forms::Button^  button2;
    private: System::Windows::Forms::Label^  label1;
    private: System::Windows::Forms::Label^  label3;
    private: System::Windows::Forms::Button^  button3;
    private: System::Windows::Forms::Label^  label2;
    private: System::Windows::Forms::Label^  label4;
    private: System::Windows::Forms::Button^  button4;
    public: 
        unordered_map<int, std::string>* fb_contas_email;
        Usuario* usuario;

        WinForm3(Usuario* user, 
            unordered_map<int, std::string>* fb_contas_)
        {
            this->fb_contas_email = fb_contas_;
            this->usuario = user;
            InitializeComponent();
            //
            //TODO: Add the constructor code here
            //
        }
 //... 
```

我该如何解决这个错误？我需要从 Winform1 到 Winform2 来回切换，反之亦然。但这在显示对话框时会引发未定义类的错误，这可能是因为我包含了其中包含自身的东西。但是我需要包含才能再次调用该对话框以返回。

我应该怎么办？我需要使一个对话框可见，以便在 winform1 和 winform2 之间来回切换

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T16:25:40.330

这些代码示例是代码 (.cpp) 文件还是头文件？

在我看来，您需要对头文件和代码文件进行 C++ 风格的分离。获取您的代码，并将其分为仅在头文件中的类定义，仅在 .cpp 文件中的类实现，并且此编译器错误将消失。

* * *

这就是我认为正在发生的事情：您已经在同一个文件中声明并实现了 Winform 1、2 和 3。当两个类都需要相互引用时，这会导致问题。查看此代码示例，其中两个类相互引用：

类1.h：

```
#pragma once
#include "Class2.h"
public ref class Class1
{
public:
    void Foo() { Class2^ two = gcnew Class2(); two->Bar() }
    void Baz() { }
} 
```

类2.h：

```
#pragma once
#include "Class1.h"
public ref class Class2
{
public:
    void Bar() { Class1^ one = gcnew Class1(); one->Baz() }
} 
```

现在，编译这两个文件时会发生这种情况吗？Class1.h 将尝试包含 Class2.h。Class2.h 将尝试包含 Class1.h，但不会因为`#pragma once`. （我假设你的头文件中有那个或#ifdef 保护。）当它尝试编译时，它会看到 Class2 的定义，然后是 Class1 的定义。当它编译 CLass2 时，Class1 还没有被定义，所以你会得到一个编译器错误。

这里的解决方案是将每个类分成单独的头文件和代码文件。请参阅固定示例：

类1.h：

```
#pragma once
public ref class Class1
{
public:
    void Foo();
    void Baz();
} 
```

Class1.cpp：

```
#include "Class1.h"
#include "Class2.h"

void Class1::Foo() { Class2^ two = gcnew Class2(); two->Bar() }
void Class1::Baz() { } 
```

类2.h：

```
#pragma once
public ref class Class2
{
public:
    void Bar();
} 
```

类2.cpp：

```
#include "Class2.h"
#include "Class1.h"

void Class2::Bar() { Class1^ one = gcnew Class1(); one->Baz() } 
```

# javascript - 如何围绕圆圈抓取和拖动元素？

> ID：10149057
> 
> 赞同：1
> 
> 时间：2012-04-13T22:20:52.217
> 
> 标签：javascript, jquery, css

到目前为止，我有一个带标记的圆圈。

[http://jsfiddle.net/x5APH/1/](http://jsfiddle.net/x5APH/1/)

我想抓住并拖动圆圈周围的标记，但是当前的功能只会在您单击标记时轻推标记。

我可以对代码进行哪些更改，以便在按住鼠标时可以围绕圆圈拖动标记？

**笔记**

如果您可以用您的解决方案更新小提琴，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T23:18:54.863

更改了一些代码

```
 $(document).ready(function(){               

            $('#marker').on('mousedown', function(){
                $('body').on('mousemove', function(event){
                    rotateAnnotationCropper($('#innerCircle').parent(), event.pageX,event.pageY, $('#marker'));    
                });

            });                    
        }); ​ 
```

还添加此代码

```
$('body').on('mouseup', function(event){ $('body').unbind('mousemove')}); 
```

在函数中

这是 jsfiddle [http://jsfiddle.net/sandeeprajoria/x5APH/11/](http://jsfiddle.net/sandeeprajoria/x5APH/11/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T22:27:00.240

做这种事情：

在`mousedown`所需元素上，设置：

*   `mousemove`文档上的事件以更新目标的位置
*   `mouseup`文档上的事件以删除您刚刚设置的`mousemove`和事件。`mouseup`

纯 JS 中的示例：

```
elem.onmousedown = function() {
    document.body.onmousemove = function(e) {
        e = e || window.event;
        // do stuff with e
    };
    document.body.onmouseup = function() {
        document.body.onmousemove = document.body.onmouseup = null;
    };
}; 
```

就我个人而言，我喜欢通过在整个页面上创建一个“掩码”元素来捕获事件来进一步改进这一点，以便（例如）拖动选择或图像不会触发默认浏览器操作（奇怪的是，这些操作不受所有事件取消方法的影响）这个案例...）

# python - Python 中的单元测试装饰器

> ID：10149058
> 
> 赞同：5
> 
> 时间：2012-04-13T22:21:08.347
> 
> 标签：python, django, unit-testing, decorator

我编写了以下装饰器，用于一些我不希望用户登录的 Django 视图（如*register*和*forgot-password*）：

```
def not_logged_in(view, redirect_url=None):
    def _wrapper(request, *args, **kwargs):
        if request.user.is_authenticated():
            return HttpResponseRedirect(
                redirect_url or '/'
            )
        return view(*args, **kwargs)

    return _wrapper 
```

一旦我有了它，我可以很容易地写：

```
@not_logged_in
def register(request):
    ... 
```

我已经为使用它的视图编写了单元测试，并且它可以正常工作，但是我想知道`not_logged_in`单独对函数进行单元测试的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T03:44:13.237

我想您可以轻松地模拟该`request`对象，然后用您的装饰器装饰一个简单的函数并将该请求传递一个参数。

我还假设您`_wrapper`实际上没有未使用的`request`参数？

# c++ - 'operator==' C++ 编译错误不匹配

> ID：10149059
> 
> 赞同：6
> 
> 时间：2012-04-13T22:21:11.580
> 
> 标签：c++, compiler-errors

来自 C++ 新手的另一个问题。

我收到以下代码块的编译器错误“'operator==' 不匹配”

```
void swap(Team t1, Player p1, Team t2, Player p2){
    Player new_t1[11];
    Player new_t2[11];
    for(int i=0; i<11; i++){
        new_t1[i] = t1.get_player(i);
        new_t2[i] = t2.get_player(i);
        if(new_t1[i] == p1){
            new_t1[i] = p2;
        }
        if(new_t2[i] == p2){
            new_t2[i] = p1;
        }
    }

    cout << "Players swapped.";
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-13T22:23:46.683

编译器不知道两个玩家相同意味着什么。如果它们的名字相同，它们是否相同？还是他们的身份证？您需要为`class Player`.

```
bool operator == (const Player &p1, const Player &p2)
{
   if( / * evaluate their equality */)
     return true;
   else
     return false;
} 
```

另外，我认为您的`swap()`功能现在没有任何效果。您可能希望将其更改为通过引用接受`Team`s 和s。`Player`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-13T22:26:45.187

您需要为您的 Player 类“重载” == 运算符。在其他情况下，您需要告诉编译器要在 Player 对象中比较什么。

例子 ：

`bool MyClass::operator==(const MyClass &other) const { ... // Compare the values, and return a bool result. }`

可能对您有所帮助：[运算符重载](http://courses.cms.caltech.edu/cs11/material/cpp/donnie/cpp-ops.html)

问候， 厄瓦尔德

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T22:24:04.140

问题在这里：

```
if(new_t1[i] == p1){ 
```

编译器不知道如何比较两个`Player`对象，除非您通过实现`operator==`. [请参阅本指南](http://courses.cms.caltech.edu/cs11/material/cpp/donnie/cpp-ops.html)的“比较运算符”部分。

# jquery - 动画在 jQuery >1.4.x 中被破坏

> ID：10149060
> 
> 赞同：2
> 
> 时间：2012-04-13T22:21:23.970
> 
> 标签：jquery, animation, countdown

为什么在包含最新的 jQuery 版本而不是 1.4.2 版本时，倒计时的翻转动画不起作用？

[动画演示](http://richardandkath.co.uk/wedding//Rich_+_Kath_Wedding_2012_files/widget0_markup.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T03:38:21.287

尽管我在发行说明中没有看到任何内容，但广泛的测试似乎表明，从 jQuery 1.5.0 及更高版本开始，您必须分别设置*动画*`background-position-x`和. 看到这个问题：[jquery animate background position](https://stackoverflow.com/questions/5171080/jquery-animate-background-position)`background-position-y`

 *此代码适用于 jQuery 1.5.0：

```
// Animation function
function animateDigit(which, oldDigit, newDigit){
    var speed = 80;
    var pos = getPos(which, oldDigit);
    var newPos = getPos(which, newDigit);
    // Each animation is 5 frames long, and 103px down the background image.
    // We delay each frame according to the speed above.
    for (var k = 0; k < animationFrames; k++){
        pos -= frameShift;
        if (k == (animationFrames - 1)){
            $("#" + which).delay(speed).animate({'background-position-y': pos + 'px'}, 0, function(){
                // At end of animation, shift position to new digit.
                $("#" + which).css({'background-position': '0 ' + newPos + 'px'}, 0);
            });
        }
        else{
            $("#" + which).delay(speed).animate({'background-position-y': pos + 'px'}, 0);
        }
    }
} 
```*

# ruby-on-rails - 如何改进围绕代码块设置和获取临时变量？

> ID：10149062
> 
> 赞同：0
> 
> 时间：2012-04-13T22:21:38.830
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, block, globalize3

我正在使用 Ruby on Rails v3.2.2 和 globalize3 v0.2.0 ruby​​-gems。由于我想更新对象的翻译数据（以便使用 globalize3 存储正确的数据），我在控制器文件中使用以下代码：

```
# Note how I set locale variables.
def update
  temp_locale = I18n.locale
  I18n.locale = 'it' # 'it' stands for italian

  @article = Article.find(params[:id])

  respond_to do |format|
    if @article.update_attributes(params[:article])
      format.html { redirect_to article_path(@article), notice: 'Article was successfully updated.' }
    else
      format.html { render action: "edit" }
    end
  end

  I18n.locale = temp_locale
end 
```

上面的代码按预期工作（即，它更新数据库中意大利语的翻译数据），但我认为我设置局部变量的方式是错误的，或者至少根本不正确，或者，也许，不可维护/可读。**有办法改善吗？或者，一般来说，有一种方法可以改进围绕代码块设置和获取临时变量？你有什么建议？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T01:49:33.163

我查看了 i18n 的代码，发现了这个：

```
I18n.with_locale('it') do
  # Italian stuff
end 
```

它甚至会验证您的输入并使用确保子句来恢复，以防黑色引发错误。

这是文档：[http ://rubydoc.info/docs/rails/2.3.8/I18n.with_locale](http://rubydoc.info/docs/rails/2.3.8/I18n.with_locale)

# facebook-graph-api - 查找访问令牌的过期时间

> ID：10149065
> 
> 赞同：21
> 
> 时间：2012-04-13T22:21:47.490
> 
> 标签：facebook-graph-api

有什么方法可以使用图形 api 找出页面访问令牌或应用程序令牌何时到期？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-13T23:04:02.733

**更新：**有一个新的 API 端点可以访问有关访问令牌的信息。您可以在此处找到信息：**[调试访问令牌和处理错误](https://developers.facebook.com/docs/facebook-login/access-tokens/debugging-and-error-handling)**

`https://graph.facebook.com/debug_token?input_token=INPUT_TOKEN&access_token=ACCESS_TOKEN`

*   input_token：要调试的访问令牌
*   access_token：您的应用访问令牌或来自应用开发者的有效用户访问令牌。

--

您应该尝试确保在获取每个令牌时将其与访问令牌一起存储。对于页面访问令牌，这意味着存储用户访问令牌的到期时间。如果您想手动发现您今天拥有的令牌的到期时间，您应该使用 Facebook 的[Access Token Debugger](https://developers.facebook.com/tools/debug/access_token)工具。但是，您不应该只依赖到期时间——实际上，许多令牌的到期时间会比其到期时间早得多。

**应用程序访问令牌永远不会过期**，除非应用程序密钥被重置。

**页面访问令牌的持续时间长达 60 天**（5184000 秒），但更重要的是，它们的持续时间与用于获取它们的用户访问令牌一样长。因此，一旦您从以下用户那里获得它们，[它们就会失效：](https://developers.facebook.com/docs/authentication/access-token-expiration/)

*   退出FB。
*   更改密码。
*   取消对您的应用程序的授权。

基本上，当您丢失用户的令牌时，您将丢失页面的令牌。相反，您应该为每个用户访问令牌检索一次页面访问令牌。如果您丢弃用户访问令牌，请丢弃页面令牌。**您不应尝试在任何重要时间段内存储页面访问令牌。**相反，您应该根据需要获取它们，并在用户会话结束时忘记它们。

要获取新的页面访问令牌：

```
https://graph.facebook.com/PAGEID?fields=access_token&access_token=USER_ACCESS_TOKEN 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-17T23:44:01.577

访问令牌调试器

[https://developers.facebook.com/tools/debug/access_token](https://developers.facebook.com/tools/debug/access_token)

不使用 Graph API……但对于手动调试来说是一个非常有用的工具。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-25T09:07:45.253

现在有一个 API 版本的调试器工具。

请参阅[https://developers.facebook.com/docs/authentication/access-token-debug/](https://developers.facebook.com/docs/authentication/access-token-debug/)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-12-16T00:32:26.210

我想针对当前版本的 API 重复这个问题，因为我遇到了 Facebook 文档明确没有描述正在发生的事情的情况：

*   请求新的长寿命令牌时没有到期日期`fb_exchange_token`
*   请求 debug_token 信息时没有到期日期 ( `expires_at = 0`)
*   第一次将用户重定向到身份验证页面时，它会回复到期日期，但这无济于事，因为我无法提取长期有效的到期日期，也不会第二次回复此信息

这里的调试工具：[https](https://developers.facebook.com/tools/debug/accesstoken) ://developers.facebook.com/tools/debug/accesstoken说“过期：从不”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-14T10:43:50.287

试试这个，它对我有用。使用您的应用获取令牌并将其粘贴到图形资源管理器中作为用于查询的令牌。单击信息以查看到期日期。 [示例图像](https://i.stack.imgur.com/M4Sdd.png)

我希望它也适合你。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-02T19:58:33.073

[https://developers.facebook.com/docs/facebook-login/access-tokens/expiration-and-extension](https://developers.facebook.com/docs/facebook-login/access-tokens/expiration-and-extension)

从上面的页面：

> 网络上的访问令牌通常有大约两个小时的生命周期，但会在需要时自动刷新。如果您想将访问令牌用于长期存在的 Web 应用程序，尤其是服务器端，则需要生成一个长期存在的令牌。长寿命令牌通常持续约 60 天。

# c - 如何让 Lua Lanes 与我的游戏服务器一起工作？

> ID：10149066
> 
> 赞同：1
> 
> 时间：2012-04-13T22:22:08.290
> 
> 标签：c, multithreading, api, lua, lua-lanes

我整天都在绞尽脑汁，我就是想不通。我的服务器使用单一状态将我的所有脚本作为全局变量加载（用于随时调用，而不必`luaL_dofile`每次我想运行脚本时都调用）。当我尝试使用车道时，问题就出现了。`require "lanes"`可以正常工作（我认为？它会适当地返回一个表给 package.loaded ...），因为我在 Linux（Ubuntu 11.10 x86）上的相应目录中有 lanes.lua。然而，当我去做的时候，`lanes.gen("", functionName)`它告诉我`attempt to index global 'lanes': a nil value`...... 此时我决定尝试`package.loaded["lanes"].gen("", functionName)`，它告诉我...`attempt to index field 'gen': a nil value`如果您需要更多信息，请告诉我。预先感谢您至少尝试提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T07:25:09.623

如果您使用的是[最新的 LuaLanes](https://github.com/LuaLanes)（这是您所获得的`luarocks install lanes`），则支持的加载模块的方式是：

```
local lanes = require "lanes".configure() 
```

`configure()`将创建所有必要的函数，然后调用`configure()`模块表为空，这似乎是您的问题。

# ruby-on-rails - 没有错误，但没有使用太阳黑子宝石增加速度

> ID：10149069
> 
> 赞同：0
> 
> 时间：2012-04-13T22:22:27.670
> 
> 标签：ruby-on-rails, ruby, sunspot, sunspot-rails, sunspot-solr

我进行了速度测试，将传统`Post.all(...)`和 Sunspot 的结果`Post.search(...)`与大约 3000 条记录的表进行了比较。在这两种情况下，加载都需要 12 秒。一切似乎都正常，除了速度的任何改进。

环境：Ruby 1.8.7，Rails 2.3.14

太阳黑子.yml：

```
production:
  solr:
    hostname: localhost
    port: 8984
    log_level: FINEST
    auto_commit_after_request: false

development:
  solr:
    hostname: localhost
    port: 8982
    log_level: INFO
    auto_commit_after_request: false
test:
  solr:
    hostname: localhost
    port: 8981
    log_level: WARNING
    auto_commit_after_request: false 
```

宝石文件：

```
gem "rsolr", "0.12.1"
gem "sunspot", "1.2.1"
gem "sunspot_solr", "1.3.1"
gem "sunspot_rails", "1.2.1" 
```

控制器：

```
 @users = User.search do
    with :client_id, current_user.client.id
    paginate :page => params[:page] if params[:page]
    paginate :page => 1 if not params[:page]
    paginate :per_page => PAGINATION_COUNT
 end 
```

看法：

```
concat will_paginate(@users) 
```

我怀疑我忽略了一些非常基本的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T22:30:23.357

为什么要加载所有 3000 个帖子？那个基准没有意义。如果您必须加载整个表，那么使用 Solr 不会有任何区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T19:13:19.627

Whitespace is significant in YAML. Are you sure the `auto_commit_after_request` line belongs under `solr`? I've seen [a few](http://outoftime.github.com/sunspot/rails/docs/classes/Sunspot/Rails/Configuration.html) [examples](https://github.com/mauricio/sunspot_tutorial/blob/master/config/sunspot.yml) where it falls under the development/production/test element:

```
development:
  solr:
    hostname: localhost
    port: 8983
    log_level: INFO
  auto_commit_after_request: false 
```

# http - 浏览器在文本之后请求图像

> ID：10149077
> 
> 赞同：0
> 
> 时间：2012-04-13T22:23:25.843
> 
> 标签：http, browser, mozilla

浏览器在完成基本文本和背景后是否请求图像。如果是，这个请求的行为是否像一个单独的 HTTP 请求，比如通过单击链接等出现的请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T14:05:26.557

> 浏览器在完成基本文本和背景后是否请求图像。

不会。当浏览器看到标签时，立即开始对图像的请求，`<img>`浏览器不会等到页面完成加载。[例如，您可以通过Firebug 网络监控](http://getfirebug.com/network)轻松查看它。

> 这个请求的行为是否像一个单独的 HTTP 请求

是的，图像请求是通常的 HTTP 请求。但是，大多数情况下，现有连接会被重用（请参阅[持久 HTTP 连接](http://en.wikipedia.org/wiki/HTTP_persistent_connection)）。

# javascript - 使用 html 输入标签显示文件上传加载进度的最简单方法

> ID：10149083
> 
> 赞同：0
> 
> 时间：2012-04-13T22:23:57.963
> 
> 标签：javascript, html

我想从jsp页面上传文件，我知道基础知识。

```
 <form name="someForm" id="someFormId" method="post" enctype="multipart/form-data"> 
    <input type="file" name="somename" size="chars"> 
    <input id="anyid" name="anyName" type="submit" value="UploadFile" class="button" /> 
```

我想制作某种进度条，但我不知道它是否可能，我读到你可以使用 flash 来完成，但是在项目中使用 flash 会很麻烦。有什么方法可以捕获负载的进度吗？

谢谢阅读

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T22:27:58.027

不是这样的。基本上，JavaScript 必须控制发送文件才能报告进度。如果您只是发帖请求，您唯一的进度指标是“加载”和“完成”。

使用`FileReader`object 和`FormData`object，您可以让 JavaScript 发送文件并获取进度结果。但它在旧浏览器中不起作用，所以要小心。

谷歌了解更多信息，那里有一些标准解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T22:49:55.577

仅当浏览器支持多种方法之一时，您才能执行此操作。FileReader/FormData（如 Frits 所述），或通过 Flash 或其他浏览器插件。您还需要在服务器端进行后期处理。

我在许多需要此类功能的领域中使用[Plupload 。](http://www.plupload.com/)我正在使用稍微修改过的 jQueryUI 脚本/css 版本。它工作得很好，插件/脚本作者已经处理了客户端工作的繁重工作。

注意：对于没有 flash 的直接 html+javascript 帖子，或限制支持的浏览器，您能做的最好的事情是显示动画 flash（动画 gif 停止在浏览器中动画）作为表单“onsubmit”操作的一部分。

# java - JPA 1.2 createQuery Where 子句标准

> ID：10149090
> 
> 赞同：0
> 
> 时间：2012-04-13T22:24:28.150
> 
> 标签：java, jakarta-ee, jpa, jpa-2.0

嗨，我是 JPA 的新手。我正在尝试使用一列作为标准来选择一组特定的记录。我的实体代码是根据表结构自动生成的，如下所示：

```
create table TEST.COMPUTERS(
       "COLUMN1" VARCHAR2(6) not null,
       "COLUMN2" VARCHAR2(10) not null,
       "COLUMN3" VARCHAR2(5) not null,
       "COLUMN4" VARCHAR2(8) not null,
       "COLUMN5" VARCHAR2(48),
        constraint "PK" primary key ("COLUMN1","COLUMN2")
    ); 
```

整个类的构造函数代码：

```
@Table(name = "COMPUTERS", schema = "TEST") 
public class Computers implements java.io.Serializable {

 /** full constructor */
        public Computers(ComputersId id, String column3, String column4,
                String column5) {
            this.id = id;
            this.column3 = column3;
            this.column4 = column4;
            this.column5 = column5;
        }

          @EmbeddedId
          public ComputersId getId() {
            return this.id;
       }

      public void setId(ComputersId id) {
        this.id = id;
      }
        // and then ....getter and setter methods for Column 3-5 
```

然后我执行以下操作：

```
Query query  =   EntityManagerHelper.getEntityManager().createQuery("SELECT s from Computers s where s.column1 = :column1").setParameter("column1", "SONY LAPTOPS"); 
```

在运行上面我得到以下错误：

```
An error occurred while parsing the query filter "SELECT s from Computers where s.column1 = :column1". Error message: No field named "column1" in class "class Computers". 
```

请对此有任何指示吗？非常感谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T23:56:04.460

由于 Column1 是 embededId 的一部分，因此您必须通过 id 字段：

```
Query query  =   EntityManagerHelper.getEntityManager().createQuery("SELECT s from Computers s where s.id.column1 = :column1").setParameter("column1", "SONY LAPTOPS"); 
```

PS：您的专栏似乎选择了相当糟糕的名称..？也许你应该给他们一些更具描述性的名字？

# javascript - 使用javascript在html5表单中进行必填字段验证

> ID：10149097
> 
> 赞同：0
> 
> 时间：2012-04-13T22:25:53.577
> 
> 标签：javascript, html

我正在创建一个注册表单，其中有 7 个必填字段，我想使用 javascript 验证这些必填字段。我尝试了 if-else 块，但它既麻烦又令人困惑，有没有其他方法可以在 javascript 中进行那些必需的字段验证，而不使用 jQuery 验证库？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T22:28:13.123

如果您使用的是 html5，您可能需要查看较新的输入标签属性。

[http://www.w3schools.com/html5/att_input_required.asp](http://www.w3schools.com/html5/att_input_required.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T22:32:34.870

您可以使用`pattern`属性是一个正则表达式，该属性会根据字段的内容进行检查，以确定该字段是否有效。此外，要确保该字段不为空，您可以使用该`required`属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T22:29:27.030

见[http://www.w3schools.com/js/js_form_validation.asp](http://www.w3schools.com/js/js_form_validation.asp)

和[http://php.net/manual/en/filter.examples.validation.php](http://php.net/manual/en/filter.examples.validation.php)

两个站点的表单验证都很容易，PHP 是内置的

# php - PHP：删除带有任何扩展名的文件？

> ID：10149101
> 
> 赞同：0
> 
> 时间：2012-04-13T22:26:26.103
> 
> 标签：php, file

当用户上传一张照片时，它会检查他们是否已经有一张照片；如果他们这样做，我希望它删除旧的（可能有任何扩展名），然后放入新的。有没有办法在不从数据库中获取旧扩展的情况下做到这一点？目前的代码：

```
 $del = $members->prepare("insert into profiles(userid, path, width, height, type, rtu, ext) values(?, ?, ?, ?, ?, ?, ?) 
                                    ON DUPLICATE KEY UPDATE path = ?, width = ?, height = ?, type = ?, rtu = ?, ext = ?, time = NOW()");
        $del->bind_param('sssssssssssss', $_SESSION['token'], $title, $file_info[0], $file_info[1], $file_info[2], $rh, $extension, 
        $title, $file_info[0], $file_info[1], $file_info[2], $rh, $extension);

        $del->execute();

        $new_file_name = "bb-x".$_SESSION['token'].".".$extension;

        if ($del->affected_rows > 0) {

            unlink('profiles/bb-x62'<any extension>);
        }

        $move_file = move_uploaded_file($file['tmp_name'], $upload_image_to_folder.$new_file_name); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-13T22:36:49.003

代替`unlink('profiles/bb-x62'<any extension>);`

使用这两行：

```
$file_pattern = "profiles/bb-x62.*" // Assuming your files are named like profiles/bb-x62.foo, profiles/bb-x62.bar, etc.
array_map( "unlink", glob( $file_pattern ) ); 
```

这应该够了吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T22:32:42.880

您可以从受影响目录中的服务器获取文件列表，并在其中搜索具有相同文件名的条目，直到点和扩展名。从服务器数据中获取完整的文件名并删除该文件。删除非常相似的文件名存在一些风险，但您可以内置检查以确定文件名除了扩展名之外是相同的。

听起来从数据库中获取完整的文件名可能会减少麻烦并加载到服务器上......

# javascript - 在javascript中将DOMString转换为String

> ID：10149104
> 
> 赞同：2
> 
> 时间：2012-04-13T22:26:34.303
> 
> 标签：javascript, string, dom

我正在使用 javascript 为 displaytag 表中的一组列标题添加工具提示。我正在尝试使用数组将相应的描述映射到标题，但它不起作用。

```
 var columnHeaderCells = document.getElementById("tableMES").getElementsByTagName("thead")[0].rows[0].cells; 

        var myArray = new Array();
        myArray['Seller ID'] = "this is seller ID";
        myArray['Clicks'] = "this is clicks";
        myArray['Sales'] = "this is Sales";

        var i = 0;
        while (columnHeaderCells[i]){

            var cellText = columnHeaderCells[i].textContent;
            //cellText is not text

            //alert(myArray[cellText] + "---" + cellText);

            columnHeaderCells[i].setAttribute('title', myArray[cellText]);

            i++;
        } 
```

问题似乎是 cellText 不是 String 而是 DOMString 对象，这就是 myArray[cellText] 返回 null 而不是获取我想要的数组值的原因。如果我这样做了：。

```
myArray['Seller ID'] 
```

它会返回“这是卖家 ID”

关于处理 DOMString 和 String 的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T22:29:47.323

在 IE`textContent`中应该可以工作（在文本节点上！），在其他浏览器中，使用`nodeValue`.

* * *

还：

```
var myArray = new Array();
myArray['Seller ID'] = "this is seller ID";
myArray['Clicks'] = "this is clicks";
myArray['Sales'] = "this is Sales"; 
```

这不是一个数组。这是一个对象。改为这样写：

```
var myObject = {};
myObject['Seller ID'] = "this is seller ID";
myObject['Clicks'] = "this is clicks";
myObject['Sales'] = "this is Sales"; 
```

和

```
myObject[cellText] 
```

这*应该*有效。

在 JavaScript`Arrays`中只能有数字索引：`[ "zero", "one", 2, "3" ]`

如果您想要一个关联数组（或 HashMap 或属性，或者您想调用它们），请使用对象`{}`：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T22:31:39.213

一些在黑暗中刺伤，但试试这个：

```
var cellText = columnHeaderCells[i].textContent + ""; 
```

或这个：

```
var cellText = String(columnHeaderCells[i].textContent); 
```

或这个：

```
var cellText = [columnHeaderCells[i].textContent].join(""); 
```

或这个：

```
var cellText = columnHeaderCells[i].textContent.toString(); 
```

其中任何一个都应该将其转换为 JS 字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T23:38:33.870

尝试`innerHTML`代替`textContent`.

# html - Office Communicator 2007：通过选项卡中的链接打开对话窗口

> ID：10149105
> 
> 赞同：1
> 
> 时间：2012-04-13T22:26:45.017
> 
> 标签：html, office-2007, office-communicator

我在 Communicator 客户端中集成了一个 Web 应用程序作为“上下文相关的自定义选项卡”。

我们的应用程序需要能够通过单击网页中的链接打开与给定用户的对话窗口。在 Communicator 2005 中，我们可以只使用`<a>`带有用户 SIP URI 的标签：

```
<a href="sip:user@ourcompany.com">User</a> 
```

使用 Communicator，这些链接不再在我们的选项卡中起作用。但是，如果我在 Internet Explorer 中加载网页，链接就会起作用。

知道我需要做什么才能让他们在 Communicator 2007 的选项卡中工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T14:12:51.557

我的解决方案是这样

```
`<a href="im:<sip:user@ourcompany.com>">User</a>` 
```

你也可以像这样和很多人聊天：

```
`<a href="im:<sip:user1@ourcompany.com><sip:user2@ourcompany.com><sip:user3@ourcompany.com>">Chat to Us</a>` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:57:57.890

好吧，经过一段时间的搜索，我无法想出比以下更好的东西。它基于[MDSN 这个线程中](http://social.msdn.microsoft.com/Forums/en-US/communicatorsdk/thread/99d5bec4-cddc-463d-adff-59c45c92a529)给出的答案。

我`onlick`在链接中添加了一个事件处理程序：

```
<a href="#" onclick="openConversationWindow(sip:user@ourcompany.com);">User</a> 
```

哪个电话：

```
function openConversationWindow(sip)
{
    var newWindow = window.open(sip);
    newWindow.close();
} 
```

这具有快速打开然后关闭 Internet Explorer 窗口的明显缺点，但这是我能够看到的使这些链接在 Communicator 2007 中再次工作的唯一方法。

# ios - ICECAST 数据的 NSRegularExpression 模式

> ID：10149106
> 
> 赞同：0
> 
> 时间：2012-04-13T22:26:45.063
> 
> 标签：ios, regex, regex-group

我正在尝试使用 NSRegularExpression 从音频流中提取 ICECAST 数据，但我认为我的模式存在一般问题。

这是我的代码：

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"StreamTitle='(.*)';" 
                                                                       options:NSRegularExpressionCaseInsensitive 
                                                                         error:nil];

NSMutableString *messageAsText = [NSMutableString stringWithUTF8String:[messageAsRawData bytes]];
NSTextCheckingResult *match = [regex firstMatchInString:messageAsText 
                                                options:0
                                                  range:NSMakeRange(0, [messageAsText length])];
NSString *message = [messageAsText substringWithRange:[match rangeAtIndex:1]];
NSLog(@"Input: '%@', Output: '%@'", messageAsText, message); 
```

说输入是：

```
StreamTitle='Thomas Newman - Awkward Talk [The Horse Whisperer]';StreamUrl=''; 
```

我希望得到这个：

```
Thomas Newman - Awkward Talk [The Horse Whisperer] 
```

但我明白了：

```
Thomas Newman - Awkward Talk [The Horse Whisperer]';StreamUrl=' 
```

这与 NSRegularExpression 无关，因为如果在这里测试，正则表达式会显示相同的结果： [http ://regex.larsolavtorvik.com/](http://regex.larsolavtorvik.com/)

有人能指出我正确的正则表达式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T22:43:30.700

尝试`*`通过以下方式使限定词变得懒惰`?`：

```
StreamTitle='(.*?)' 
```

# loops - 执行嵌套循环+foreach+csh

> ID：10149111
> 
> 赞同：0
> 
> 时间：2012-04-13T22:27:36.683
> 
> 标签：loops, for-loop, foreach, nested

自从我使用 csh 格式以来已经有一段时间了，我在一些事情上遇到了一些麻烦。在 Matlab 中执行起来似乎要容易得多，但是由于我试图与之交互的程序，我需要在终端上执行此操作。

所以这就是我想要做的：我有一个结构如下的文件 del.txt

1

2

3

4

等等。所以每个值都在它自己的行中，并且所有数据都有一列。我的目录中有很多其他文件。我想将值 1（在本例中为 1）与文件 1 匹配，将值 2 与文件 2 匹配，依此类推。所以这就是我所做的......

代码：

# !/bin/csh

为一个 ( `cat del.txt`)

foreach sta( `ls *.HHZ`)

```
echo a is $a

echo $sta

cat <<END>>macro.m 
```

r$a

r$sta

结尾

```
sac macro.m

rm macro.m 
```

结尾

结尾

然而，我实现的是它遍历 del.txt 和每个文件中的所有值，然后移动到我目录中的下一个文件并遍历所有值。我无法弄清楚这应该采用的格式以匹配正确的值。在我可以让它们匹配之前，我在脚本中没有做太多事情。请帮助有人可以告诉我我做错了什么吗？我读到 foreach 命令将执行每个文件上的所有命令..但无法找到解决此问题的方法。我想要它做的是从 del.txt 中获取值 1 并将其与目录中的文件 1（sta）匹配完成循环，然后从 del.txt 中获取值 2 并将其与目录中的文件 2 匹配（站）。我从来没有做的不仅仅是在一个文件子集上使用 csh 进行简单的迭代，而且我不确定如何将这些值相互引用。任何帮助将不胜感激。我还没有找到一种简单的方法来做到这一点而不把所有的东西都写出来。我查看了“for”和“while”命令..如果有一种简单的方法可以做到这一点，我没有看到它。

干杯，K

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T13:01:48.337

如果我理解正确，您有一个 txt 文件将列出字符串，并且您希望它与文件匹配。

我假设你的这个特殊陈述：

> 我想将值 1（在本例中为 1）与文件 1 匹配

您的意思是将 1 处的字符串与文件 1 的文件名匹配。

这是基于此假设的可能解决方案（无论如何，这将对您有所帮助）：

```
#Store value in file.txt in a array
set file_var = `cat file.txt`
#Store file list in my_dir in a var
set my_dir = <your dir path>
set file_list_var = `ls $my_dir`

#Let's print "file Match: for every match
foreach var1 ($file_var)
     foreach var2 ($file_list_var)
          if("$var1" == "$var2") echo $var1 = $var2 : Match Found.
     endif
endif 
```

# ruby - 使用 Omniauth 在 Ruby 中请求 Google 联系人

> ID：10149117
> 
> 赞同：3
> 
> 时间：2012-04-13T22:28:05.157
> 
> 标签：ruby, oauth, contacts, omniauth

我已经使用 Omniauth 成功地对 Google 进行了身份验证，现在我的身份验证记录中包含会话令牌和机密，其中：scope => "https://www.google.com/m8/feeds/"。

我不知道如何使用这些凭据而不是要求用户输入密码来访问用户的联系人列表。

有这样做的宝石吗？我尝试了 gdata，但仍然无法弄清楚使用什么方法来请求联系提要，以及如何提供令牌信息。以前有人处理过这个问题并且可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T00:39:44.140

[这里](https://stackoverflow.com/questions/5646547/rails-3-getting-gmail-contacts-using-omniauth)有一个很好的答案。身份验证将由 OmniAuth 处理，因此您基本上可以跳到联系人请求。

# java - Java 泛型类型参数

> ID：10149120
> 
> 赞同：8
> 
> 时间：2012-04-13T22:28:15.030
> 
> 标签：java, generics

我有一个以 a`List<?>`作为参数的方法。

```
public static String method(List<?> arg){
     // Do something based on type of the list
}

//I call the method as below
List<ClassA> listA = new ArrayList<ClassA>();
List<ClassB> listB = new ArrayList<ClassB>();
method(listA);
method(listB); 
```

在`method`中，我怎么知道`arg`是 a `List`of`ClassA`还是 a `List`of `ClassB`？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-13T22:38:43.287

从技术上讲，您可以***使用***它`instanceof`来检查对象是否为某种类型。

然而......这***不是***一个好主意。

您声明方法的方式，它可以接受任何类型的 List，因此它不一定是 A 或 B。

很难说出你想要做什么，但你可能应该让你的方法通用。

你可以这样做：

```
public static <T> String method(List<T> arg) {
    // We now know that the type of the list is T, which is
    // determined based on the type of list passed to this
    // method.  This would demonstrate the point better if
    // the return type was T, but I'm leaving the return type
    // as String, because that's what your code returns.
} 
```

* * *

**这是一个更好的例子**：

如果你想创建一个返回列表第一个元素的通用方法，你可以这样做：

```
public static <T> T firstElement(List<T> theList) {
    if (theList == null) {
        return null;
    }
    T objectOfTypeT = theList.get(0);
    return objectOfTypeT;
} 
```

请注意，返回类型是 now `T`。

因为我们将此方法设为通用，所以它可以返回 List 中使用的相同类型。

您通常只会 return `theList.get(0)`，但我添加了一行以使泛型的目的更加明显。

**语法解释：**

*   `<T>`表示此方法采用一个名为 T 的类型参数。

*   紧随其后的`T`是返回类型（就像您通常会返回字符串、整数等...）。

*   List 参数中的`T`是编译器如何知道 a 到底`T`是什么。

这允许编译器说：“*这个方法需要 T 类型的东西。哦，看......这个列表也是 T 类型的。如果有人将一个字符串列表传递给这个方法，那么 T 必须是一个字符串。如果有人通过此方法的整数列表，T 必须是整数。* "

相反，您的方法**只能**返回一个字符串，并且它不知道列表中使用的是什么类型。

* * *

还...

如果 A 和 B 都扩展同一个类，名为 TheParentClass，你可以像这样声明你的方法：

```
public static String method(List<? extends TheParentClass> arg) 
```

这样，您将对参数的可能类型了解更多（并且可以从编译时类型检查中受益）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T22:31:40.707

从名为[Romain](https://stackoverflow.com/users/223339/romain)的用户的回答中 “如果您使用 <?>，您的意思是您不会在任何地方使用参数化类型。要么转到特定类型（在您的情况下，它似乎是 List<String>），要么转到非常通用的 List<Object>"

另外，我相信如果您使用问号，编译器不会在运行时之前捕获类型不匹配（reified；有效 Java 的第 119 页），绕过擦除，并有效地消除您从使用泛型类型中获得的好处？？？

回答提问者的问题：如果您使用 List< Object> 然后尝试将其强制转换为 A 或 B ，可能使用 instanceOf ，这可能是一种判断它是什么的方法。我敢打赌，有比这更好的方法。

# javascript - 从对象列表中获取数据的最有效方法？

> ID：10149124
> 
> 赞同：0
> 
> 时间：2012-04-13T22:28:43.717
> 
> 标签：javascript

我有一个这样的对象列表（从 PHP 创建然后 json 编码）：

```
{"10":{"10":["4","7","2","2","0","32"],"11":["5","22","1","1","0","0"]}}

translated:

{"X":{"Y":["unique_id","data","data","data","data","data"],"Y":["unique_id","data","data","data","data","data"] 
```

但是我试图找到一种方法来通过寻找 unique_id 来获得 X:Y 让我们说它是 4。

最有效的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T22:37:17.800

如果它们是唯一 ID，则创建一个单独的查找表。

```
var id_lookup = {};

for(var x in data)
    for(var y in data[x])
        id_lookup[data[x][y][0]] = [x,y]

var coords = id_lookup[4];

alert(coords);  // [10,10]

alert(data[coords[0]][coords[1]]); // ["4","7","2","2","0","32"] 
```

***演示：http:*** [//jsfiddle.net/LXE3B/](http://jsfiddle.net/LXE3B/)

# javascript - 使用 AJAX 加载和返回数据以供以后使用

> ID：10149126
> 
> 赞同：0
> 
> 时间：2012-04-13T22:28:58.490
> 
> 标签：javascript, jquery, xml, ajax

我正在尝试编写一个简单的函数来从 javascript 中的 XML 加载数组。我已经成功地将 AJAX 结果发送到`success:`调用时使用该字段的函数`$.ajax(...)`。

另外，我注意到函数的返回值`$.ajax(...)`是 an `Object`，它有字段`responseText`and `responseXML`（我很乐意使用）。但是，即使我可以在控制台的树中看到它们，尝试通过它们访问它们`.responseText`也不起作用（因此打印`undefined`，如果我要尝试查找一些垃圾字符串，则相同`.this_does_not_exist`）。

我将使用几个不同的 XML 文件几乎完全相同地执行此操作，我想使用代码来执行此操作。我不满足于简单地让`success:`参数将结果踢到单独的函数的原因是因为我可能会多次使用数据，但只想加载一次。我正在尝试将加载和使用 XML 分开，这样它就不会被加载多次。

你能告诉我为什么`responseText`在我输出时出现`xml_ret`，但无法访问`xml_ret.responseText`吗？

非常感谢您的帮助和耐心。

* * *

**注意：**`test.xml`要从同一目录加载，您需要以这种方式启动 Chrome 或 Chromium：

```
chromium-browser --allow-file-access-from-files 
```

**测试.html：**

```
<html>
<head>
<script type="text/javascript" 
        src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

    <script type="text/javascript">
      function print_XML(xml)
      {
      console.log( "in printXML" );
      console.log(xml);

      $(xml).find("point").each(function()
      {
      var loaded_row = [ parseInt($(this).attr("number_protein_groups")), parseInt( $(this).attr("log_likelihood") ) ];
      console.log( loaded_row );
      });
      }

      function load_and_print_XML(fname)
      {
    console.log( "in load_and_print_XML" );

      xml_ret = $.ajax({
      type: "GET",
      url: fname,
      dataType: "xml",
      success: print_XML
       });

    console.log( "xml_ret" );
    console.log( xml_ret );
    console.log( xml_ret.responseText );
      }

    </script>

</head>
  <body>
    <script type="text/javascript">
      xml_data = load_and_print_XML("test.xml");
      /* do something with xml_data here */
    </script>
  </body>
</html> 
```

**测试.xml**

```
<?xml version="1.0" encoding="utf-8" ?>
<results>
  <replicate_result graph_filename="yeast_1.pivdo">
    <point number_protein_groups="10" log_likelihood="20"/>
    <point number_protein_groups="20" log_likelihood="40"/>
    <point number_protein_groups="40" log_likelihood="60"/>
    <point number_protein_groups="50" log_likelihood="50"/>
    <point number_protein_groups="60" log_likelihood="55"/>
  </replicate_result>
</results> 
```

**我的控制台：**

```
in load_and_print_XML
test.html:30xml_ret
test.html:31
Object
abort: function (a){a=a||"abort",p&&p.abort(a),w(0,a);return this}
always: function (){i.done.apply(i,arguments).fail.apply(i,arguments);return this}
complete: function (){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this}
done: function (){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this}
error: function (){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this}
fail: function (){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this}
getAllResponseHeaders: function (){return s===2?n:null}
getResponseHeader: function (a){var c;if(s===2){if(!o){o={};while(c=bG.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c}
isRejected: function (){return!!i}
isResolved: function (){return!!i}
overrideMimeType: function (a){s||(d.mimeType=a);return this}
pipe: function (a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()}
progress: function (){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this}
promise: function (a){if(a==null)a=h;else for(var b in h)a[b]=h[b];return a}
readyState: 4
responseText: "<?xml version="1.0" encoding="utf-8" ?>↵&lt;results>↵  <replicate_result graph_filename="yeast_1.pivdo">↵    <point number_protein_groups="10" log_likelihood="20"/>↵    <point number_protein_groups="20" log_likelihood="40"/>↵    <point number_protein_groups="40" log_likelihood="60"/>↵    <point number_protein_groups="50" log_likelihood="50"/>↵    <point number_protein_groups="60" log_likelihood="55"/>↵  </replicate_result>↵&lt;/results>"
responseXML: Document
setRequestHeader: function (a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this}
state: function (){return e}
status: 200
statusCode: function (a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this}
statusText: "success"
success: function (){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this}
then: function (a,b,c){i.done(a).fail(b).progress(c);return this}
__proto__: Object
test.html:32undefined
test.html:9in printXML
test.html:10
Document
<results>​
<replicate_result graph_filename=​"yeast_1.pivdo">​…​&lt;/replicate_result>​
</results>​
test.html:15[10, 20]
test.html:15[20, 40]
test.html:15[40, 60]
test.html:15[50, 50]
test.html:15[60, 55] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T23:10:50.600

对于这个问题：

> 你能告诉我为什么在我输出 xml_ret 时出现 responseText，但 xml_ret.responseText 无法访问吗？

发生这种情况是因为当您对一个对象（例如在 chrome 中）执行 console.log 时，会在控制台中保留对该对象的引用。如果对象发生更改，这些更改将由 chrome 的控制台反映。

所以发生的事情是当你这样做时：

```
console.log( "xml_ret" );
console.log( xml_ret );
console.log( xml_ret.responseText ); 
```

ajax 请求尚未完成，responseText 仍未分配，这就是它显示为未定义的原因。但是，打印的 xml_ret 对象是对对象的引用，因此当 ajax 请求完成时，如果您检查控制台上的值，它具有“responseText”属性，因为它已经设置。

你可以看到，如果你调试代码并在这一行添加一个断点：

```
console.log( xml_ret.responseText ); 
```

查看文件 xml_ret 时，它没有“responseText”属性。

PS：我肯定需要查看此评论。想得太晚了：P

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T22:53:44.390

问题是控制台将更新对象，如果它们得到更新而不是字符串。

因此，如果您调用 ajax 调用，该函数将直接返回一个对象，但`responseText`由于调用尚未完成，所以该对象将是未定义的。

因此，如果您想使用，`responseText`您应该在成功时使用：

```
function print_XML(xml, s, jqXHR) { // there are 3 arguments past the third one is the same as the return of $.ajax
    console.log( "in printXML" );
    console.log(xml);

    $(xml).find("point").each(function()
    {
    var loaded_row = [ parseInt($(this).attr("number_protein_groups")), parseInt( $(this).attr("log_likelihood") ) ];
    console.log( loaded_row );
    });

    console.log(jqXHR);
    console.log(jqXHR.responseText); // now it works!
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T23:04:52.633

responseText 在您输出 xml_ret 时显示，因为这就是 ajax 函数在 jQuery 中的工作方式。这是回调中返回的内容

成功（数据，文本状态，jqXHR）

因此，当您尝试获取 xml_ret 的属性时，它会失败，因为它只是 XML 数据而不是对象。第三个参数是你所期望的，因为它是一个 jquery ，所以它也略有修改。

# ruby-on-rails - 表格不保存！导轨

> ID：10149127
> 
> 赞同：0
> 
> 时间：2012-04-13T22:29:06.903
> 
> 标签：ruby-on-rails, forms, routes

我的目标是半定期更新网站的 about 部分。我想使用命名资源来做到这一点。我的问题是表单不会保存到数据库，并且在我单击“创建文本”按钮后会转发到关于页面。

我查看了我的路线、控制器和视图，但我不知道我做错了什么。任何帮助表示赞赏。

这是控制台输出：

```
Started POST "/about" for 127.0.0.1 at 2012-04-13 17:45:29 -0700
Processing by StaticPagesController#about as HTML
Parameters: {"utf8"=>"✓", "authenticity_token"=>"kmkSyhhqrHiwtIEMd8R1+EEh1ic7688h7lNFW9FnMUM=", "text"=>   {"title"=>"", "text"=>"asdfasd"}, "commit"=>"Create Text"}
Text Load (0.2ms)  SELECT "texts".* FROM "texts" WHERE "texts"."id" = ? LIMIT 1  [["id", 6]]
Text Load (0.2ms)  SELECT "texts".* FROM "texts" WHERE "texts"."id" = ? LIMIT 1  [["id", 7]]
Text Load (0.1ms)  SELECT "texts".* FROM "texts" WHERE "texts"."id" = ? LIMIT 1  [["id", 8]]
Rendered static_pages/about.html.erb within layouts/application (0.7ms)
Rendered shared/_header.html.erb (1.5ms)
Rendered shared/_footer.html.erb (1.1ms)
Completed 200 OK in 30ms (Views: 15.5ms | ActiveRecord: 1.1ms) 
```

这是 about.html.erb 视图：

```
 1 <div id="container_about">
 2   <%= image_tag "chocolate_lady.jpg", id: "about_image" %>  
 3   <div id="right_column_about" > 
 4     <h1> Who we are </h1>
 5     <%= @text1.text %> 
 6     <br /> 
 7     <br /> 
 8     <%= @text2.text %>
 9     <br />
 10     <br /> 
 11     <%= @text3.text %>
 12   </div> 
 13 </div> 
```

这是表单视图：

```
4   <%= flash[:notice] %>
5   <%= flash[:status] %>
6   
7 <%= form_for @about, :url => { :action => 'save_about'}  do |f| %>
8 
9   <div class="field">
10     <%= f.label :title %><br />
11     <%= f.text_field :title %>
12   </div>
13   <div class="field">
14     <%= f.label :text %><br />
15     <%= f.text_area :text %>
16   </div>
17 
18   <div class="actions">
19     <%= f.submit %>
20   </div>
21 <% end %>
22 
```

表单html：

```
<form accept-charset="UTF-8" action="/about" class="new_text" id="new_text" method="post"><div    style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"><input name="authenticity_token"   type="hidden" value="kmkSyhhqrHiwtIEMd8R1+EEh1ic7688h7lNFW9FnMUM="></div>

<div class="field">
<label for="text_title">Title</label><br>
<input id="text_title" name="text[title]" size="30" type="text">
</div>
<div class="field">
<label for="text_text">Text</label><br>
<textarea cols="40" id="text_text" name="text[text]" rows="20"></textarea>
</div>

 <div class="actions">
<input name="commit" type="submit" value="Create Text">
 </div>
</form> 
```

这是我的耙子路线：

```
product_photos GET    /product_photos(.:format)          product_photos#index
               POST   /product_photos(.:format)          product_photos#create
new_product_photo GET    /product_photos/new(.:format)      product_photos#new
edit_product_photo GET    /product_photos/:id/edit(.:format) product_photos#edit
product_photo GET    /product_photos/:id(.:format)      product_photos#show
               PUT    /product_photos/:id(.:format)      product_photos#update
               DELETE /product_photos/:id(.:format)      product_photos#destroy
          root        /                                  static_pages#home
      products        /products(.:format)                ProductPhotos#index
         about        /about(.:format)                   static_pages#about
       contact        /contact(.:format)                 static_pages#contact
        policy        /policy(.:format)                  static_pages#policy
      new_text        /about/new(.:format)               static_pages#new_about
     show_text        /about/:id(.:format)               static_pages#show_about
               POST   /about(.:format)                   static_pages#save_about 
```

这是我的路线：

```
 7   match '/products' => 'ProductPhotos#index'
 8   match '/about' => 'static_pages#about' 
 9   match '/contact' => 'static_pages#contact' 
10   match '/policy' => 'static_pages#policy'
11   match '/about/new/' => 'static_pages#new_about', :as => :new_text
12   match '/about/:id' => 'static_pages#show_about', :as => :show_text
13   match '/about/' => 'static_pages#save_about', via: 'post' 
```

这是我的控制器：

```
12   def show_about
13     @about = Text.find(params[:id])
14 
15     respond_to do |format|
16       format.html
17       format.json { render json: @about }
18     end 
19   end
20 
21   def new_about  
22     @about = Text.new 
23     respond_to do |format|
24       format.html # new_about.html.erb
25       format.json { render json: @about }
26     end
27   end
28 
29   def save_about
30     @about = Text.new(params[:text]) 
31     
32     respond_to do |format|
33       if @about.save
34         format.html { redirect_to show_about_path(@about), notice: 'Product photo was successfully created.' }
35         format.json { render json: @about, status: :created, location: @about }
36       else
37         format.html { redirect_to action: 'new_about',  notice: 'Product photo wasn\'t save'}
38         format.json { render json: @about.errors, status: :unprocessable_entity }
39       end
40     end
41   end
42 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T08:30:00.270

`8 match '/about' => 'static_pages#about'`匹配相同的路线`13 match '/about/' => 'static_pages#save_about', via: 'post'`

由于它们都匹配`/about`并且通用的是第一个，因此将使用这个。要么先放更具体的路由`match '/about/' => 'static_pages#save_about', via: 'post'`，然后放通用路由，或者更改通用路由以使其听`:get`喜欢`match '/about' => 'static_pages#about', via: :get`。通过`:get`专门添加，它永远不会消耗`:post`.

基本上，当您运行时，`rake routes`您希望查看每个路径的 HTTP 方法，例如

```
    用户 GET /users(.:format) users#index
          POST /users(.:format) users#create
 new_user GET /users/new(.:format) users#new
edit_user GET /users/:id/edit(.:format) users#edit

```

# ios - 我可以从 iPhone 上的其他应用程序启动一个应用程序吗

> ID：10149129
> 
> 赞同：19
> 
> 时间：2012-04-13T22:29:27.670
> 
> 标签：ios, launch, url-scheme

我想创建必须启动另一个应用程序并最后运行一些功能的应用程序。

我的意思是我的应用程序 A 调用应用程序 B 并在 B 中运行某种方法。

我可以这样做吗？

我知道我想使用 URL 方案，但我可以在另一个应用程序中运行一些方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-14T00:22:50.963

是的，您可以使用自定义 URL 方案来实现这一点。请参阅[与其他应用程序通信](https://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/Inter-AppCommunication/Inter-AppCommunication.html#//apple_ref/doc/uid/TP40007072-CH6-SW1)。

应用 B 需要注册一个自定义 URL 方案，应用 A 使用该方案来启动 B 并向其传递命令。

以下代码片段说明了一个应用程序如何请求另一个应用程序的服务。此示例中的“todolist”是 App B 注册的假设自定义方案。

```
NSURL *myURL = [NSURL URLWithString:@"todolist://www.acme.com?Quarterly%20Report#200806231300"];
[[UIApplication sharedApplication] openURL:myURL]; 
```

* * *

## 回答 #2

> 赞同：-17
> 
> 时间：2012-04-13T22:41:53.497

不..apple对这种事情非常严格。ios沙箱设计无论如何都不允许这样做。我能想到的唯一方法是弹出一个警报视图并很好地要求用户这样做:) ....要么这样做，要么调用服务器并做你的该服务器上的方法，但从一个应用程序到另一个应用程序触发方法是肯定的。见鬼……你甚至无法检测到用户安装了哪些应用程序……

# c# - Mono：是否可以共同创建基于 xaml 的 chromeless 窗口，该窗口可以从相同的代码库在 Mac Win 和 Linux 上运行？

> ID：10149132
> 
> 赞同：1
> 
> 时间：2012-04-13T22:29:35.887
> 
> 标签：c#, xaml, mono, cross-platform

我想知道如何在 Mono 中创建 windowless\chromeless 应用程序：是否可以共同创建基于 xaml 的 chromeless 窗口，该窗口将在同一代码库的 Mac Win 和 Linux 上运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T12:11:51.753

也许，我*可以*在 Windows 和 linux 上执行此操作，但不确定 OSX。

![在此处输入图像描述](../Images/6b43f04af1fe0d94a9a8c680f0276cae.png)

请参阅 MoonBase - [https://github.com/inorton/MoonBase](https://github.com/inorton/MoonBase)。然而，这都是几个月前的事了。我不确定月光和月光桌面（这是基于）的当前状态。

[我设法创建了使用来自相同来源的 xaml 的](https://github.com/inorton/MoonBase/blob/master/Examples/hello/Views/Views/Home.xaml)跨平台 MVVM 示例应用程序。

# php - 使用 crypt 进行不同的加密。盐应该是什么格式等

> ID：10149134
> 
> 赞同：1
> 
> 时间：2012-04-13T22:29:46.617
> 
> 标签：php, encryption, hash, salt, crypt

我正在构建我的开发课程，并且正在研究加密课程。我一直在阅读 php 的 crypt 函数和不同的加密类型，但有一些地方被模糊地解释了。

我的理解是有这些加密选项`CRYPT_STD_DES`, `CRYPT_EXT_DES`, `CRYPT_MD5`, `CRYPT_BLOWFISH`,`CRYPT_SHA256`和`CRYPT_SHA512`. 要查看它们是否已启用，您只需检查

```
if(CRYPT_FOO==1)
{
   //is enabled
} 
```

**问题**

不同加密的盐要求/格式是什么？ SO上的[河豚要求。](https://stackoverflow.com/questions/2225644/what-is-the-correct-format-for-a-blowfish-salt-using-phps-crypt)

为了澄清起见，我假设如果您使用河豚盐`crypt()`会自动进行河豚加密吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T12:42:44.953

该[函数的](http://php.net/manual/en/function.crypt.php)[官方文档`crypt`](http://php.net/manual/en/function.crypt.php)有很多关于各种模式的信息，以及应该作为`salt`参数传递的内容：

*   `CRYPT_STD_DES`: 字母表中的两个字符盐`./0-9A-Za-z`，即 12 位盐。
*   `CRYPT_EXT_DES`: 一个`_`字符，然后是 4 个字符的迭代计数，然后是 4 个字符的盐（每个使用相同的字母表）。
*   `CRYPT_MD5`: 一个标记`$1$`，然后是 9 个盐字符（我想使用与上面相同的字母表）。
*   `CRYPT_BLOWFISH`: 标记，然后是04 到 31 范围内`$2a$`的两位数*成本参数（意味着 2* ⁴到 2 ^(31)次迭代），然后`$`是 22 位盐（同样，使用与上述相同的字母表）。
*   `CRYPT_SHA256`: 一个标记`$5$`，一个可选的圆形参数表示`rounds=`*数字*`$`（十进制数介于 1000 和 999999999 之间），以及一个 16 个字符的盐（使用与上述相同的字母表）。
*   `CRYPT_SHA512`: 一个标记`$6$`，一个可选的圆形参数表示`rounds=`*数字*`$`（十进制数介于 1000 和 999999999 之间），以及一个 16 个字符的盐（使用与上述相同的字母表）。

salt 参数的开头唯一标识了此处要使用哪种密码哈希算法 - 所以是的，如果您使用 bcrypt 格式的 salt（以 $2a$ 开头），它将自动使用 bcrypt。

# python - 子进程弹出标准输出锁定？

> ID：10149149
> 
> 赞同：3
> 
> 时间：2012-04-13T22:31:42.193
> 
> 标签：python, subprocess, python-2.7

嗨，使用 subprocess.Popen 时读取标准输出有一些问题

```
daniel@desktop:~$ python -V
Python 2.7.3 
```

继承人代码：（注释代码是我尝试过的一些东西）

```
import subprocess

RUN = './hlds_run -game cstrike -maxplayers 11'

p = subprocess.Popen(RUN.split(), shell=False, stdout=subprocess.PIPE, stdin=subprocess.PIPE, stderr=subprocess.PIPE)

while 1:
    try:
        out = p.stdout.readline()
        #if out == '':
        #   out = p.stdout.read()
        #p.stdout.flush()
    except: 
        p.terminate()
        break

    try:
        err = p.stderr.readline()
        #if err == '':
        #   err = p.stderr.read()
        #p.stderr.flush()
    except:
        p.terminate()
        break
    if out != '':
        print out.rstrip()

    if err != '':
        print err.rstrip()

    #print '\n' #constantly prints new lines until "Calling BreakpadMiniDumpSystemInit." 
```

这是连接到服务器并断开连接时得到的输出：

```
daniel@desktop:~/hlds$ python hlds.py 
Auto detecting CPU
Using breakpad crash handler
Using Pentium II Optimised binary.
Setting breakpad minidump AppID = 10
Auto-restarting the server on crash
Forcing breakpad minidump interfaces to load

Looking up breakpad interfaces from steamclient
Console initialized.
Calling BreakpadMiniDumpSystemInit
scandir failed:/home/daniel/hlds/./valve/SAVE
Installing breakpad exception handler for appid(10)/version(5447)
scandir failed:/home/daniel/hlds/./platform/SAVE
Looking up breakpad interfaces from steamclient
Protocol version 48
Calling BreakpadMiniDumpSystemInit 
```

while 循环在以下之后锁定：

```
Calling BreakpadMiniDumpSystemInit. 
```

但服务器仍在运行，我可以连接、运行命令等...

* * *

如果我运行：

```
 ./hlds_run -game cstrike -maxplayers 11 >> stdout.log 2>&1 
```

我在 stdout.log 中得到以下输出：

```
daniel@desktop:~/hlds$ cat stdout.log 
Auto detecting CPU
Using Pentium II Optimised binary.
Auto-restarting the server on crash

Console initialized.
Using breakpad crash handler
Setting breakpad minidump AppID = 10
Forcing breakpad minidump interfaces to load
Looking up breakpad interfaces from steamclient
Calling BreakpadMiniDumpSystemInit
Installing breakpad exception handler for appid(10)/version(5447)
scandir failed:/home/daniel/hlds/./valve/SAVE
scandir failed:/home/daniel/hlds/./platform/SAVE
Protocol version 48
Exe version 1.1.2.6/Stdio (cstrike)
Exe build: 14:06:24 Sep 23 2011 (5447)
STEAM Auth Server
Server IP address 127.0.1.1:27015
couldn't exec listip.cfg
couldn't exec banned.cfg
Looking up breakpad interfaces from steamclient
Calling BreakpadMiniDumpSystemInit
scandir failed:/home/daniel/hlds/./valve/SAVE
scandir failed:/home/daniel/hlds/./platform/SAVE

Could not establish connection to Steam servers.
Reconnected to Steam servers.
   VAC secure mode is activated.
ERROR: couldn't open custom.hpk.
JAMES HETFIELD : hello!
Dropped JAMES HETFIELD from server
Reason:  Client sent 'drop'
Sat Apr 14 00:10:54 CEST 2012: Server Quit 
```

但是，如果我不执行 2>&1，我仍然会在 stdout 中获得此输出，而其余的则在 stdout.log 中：

```
daniel@desktop:~/hlds$ ./hlds_run -game cstrike -maxplayers 11 >> stdout.log
Using breakpad crash handler
Setting breakpad minidump AppID = 10
Forcing breakpad minidump interfaces to load
Looking up breakpad interfaces from steamclient
Calling BreakpadMiniDumpSystemInit
Installing breakpad exception handler for appid(10)/version(5447)
Looking up breakpad interfaces from steamclient
Calling BreakpadMiniDumpSystemInit 
```

尝试创建一个 servermanager 和 dispatcher 作为子流程的学习体验：]

所有帮助表示赞赏！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T23:31:14.003

发生的情况是其中一个管道被数据填满，从而阻塞了子进程，而您的 python 进程被阻止试图从另一个管道读取一行，从而导致死锁。您可能想要使用某种轮询（select/poll/epoll）而不是在管道上进行阻塞读取。

一个快速的技巧是在你的while循环中进行非阻塞读取，但这会导致你的python进程使用大量的CPU。

查看[select](http://docs.python.org/library/select.html)模块的文档以获取有关以非 hacky 方式解决问题的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T14:50:29.577

您是否能够使用 select 解决此问题？我发现当我启动 SRCDS 时，即使是非阻塞的，它也不会超过“调用 BreakpadMiniDumpSystemInit”：

```
p = subprocess.Popen(cmd, shell=False, stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.STDOUT, close_fds=True)
fcntl.fcntl(p.stdout, fcntl.F_SETFL, fcntl.fcntl(p.stdout, fcntl.F_GETFL) | os.O_NONBLOCK)
print p.stdout.read() 
```

This prints up to the "BreakpadMiniDumpSystemInit" message, further calls to read() throw "Resource temporarily unavailable" until something is written to p.stdin.

# asp.net - ASP.NET 在查询字符串之前的链接中添加 /

> ID：10149150
> 
> 赞同：1
> 
> 时间：2012-04-13T22:31:54.327
> 
> 标签：asp.net, hyperlink, query-string

我只是被难住了，不知道发生了什么。我也很难研究这个问题，因为我不知道如何提出正确的问题。对于你们中的任何人来说，这应该是一个简单的问题，但您的回答将非常感激！

我有一个包含以下元素的 asp.net 页面：

```
<a href="http://www.mysite.com?id=1">Link</a> 
```

伟大的。

但是当我将鼠标悬停在输出页面上的链接上时，ASP 发生了一些事情，该链接将导航到这个 url：[http ://www.mysite.com/?id=1](http://www.mysite.com/?id=1)

它在查询字符串之前添加了额外的“/”。我怎样才能解决这个问题？我为什么会发生这种情况并不直观。这是 web.config 问题吗？即使我只是开始一个新项目，创建一个新页面并将那个元素放在那里，它也会发生。

非常感谢！

它似乎发生在各种浏览器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T22:42:14.333

我不确定你是否愿意这样做。

这可能正在发生，因为这在技术上是形成 URL 的正确方法。见[RFC-1738](http://www.ietf.org/rfc/rfc1738.txt)

> HTTP URL 采用以下形式：
> 
> ```
>  http://<host>:<port>/<path>?<searchpart> 
> ```
> 
> 其中`<host>`和`<port>`在第 3.1 节中描述。如果`:<port>` 省略，则端口默认为 80。不允许使用用户名或密码
> 。 `<path>`是一个 HTTP 选择器，`<searchpart>`是一个查询
> 字符串。是可选的，`<searchpart>`和它
> 前面的“？”一样。如果两者`<path>`都不`<searchpart>`存在，“/”也可以省略。

由于存在 searchpart，因此斜杠是必需的。没有它它可能会工作，但无论如何它可能应该在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T22:47:34.410

该斜线是必要的，查询字符串不能立即跟随域。请参阅[http://en.wikipedia.org/wiki/URL#Syntax](http://en.wikipedia.org/wiki/URL#Syntax)

您的特定 URL 省略了路径，但您不能省略域和路径之间的斜线，除非域后面没有其他内容。

# javascript - 组合框项目符号上升

> ID：10149155
> 
> 赞同：0
> 
> 时间：2012-04-13T22:32:40.267
> 
> 标签：javascript, jquery, html, css

我的组合框方形项目符号像下面的图像一样显示在顶部，我想让它与关联的文本对齐：
![在此处输入图像描述](../Images/8575c1165e772ee03a4f434f08604ab2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T22:34:15.327

你可以在 CSS 中做到这一点，下面可能会完成这项工作

```
position:relative;
top:10px; /* adjust as needed */ 
```

# java - 如何安排后台线程在我的应用程序中播放声音？

> ID：10149162
> 
> 赞同：1
> 
> 时间：2012-04-13T22:33:22.983
> 
> 标签：java, android, multithreading

我有一个应该对某些事件做出反应的过程。所以当`playFromList()`被调用时，它会从 soundpool 播放一些声音。然后在一个线程中，我设置了一个标志，并且在 3.5 秒内它不应该播放任何声音。

我得到的是：它会播放声音，然后等待 3.5 秒。如果`playFromList()`在 3.5 秒内被调用 5 次，它仍然会到达`SoundManager.playSound(listNr)`，并且仍然在 17.5 秒内完成。这不正是我想要的。我想要`SoundManager.playSound(listNr)`只调用一次的方法。

```
public class Settings{
    public static boolean flag = false;
}

 public class Main{
 public void playFromList(int listNr,int g){

        if(!Settings.flag){
            SoundManager.playSound(listNr);
            if(g ==0){
                mpVolume((float) 0.3);
                t5sec.run();
            }else{pauseMus();}      
        }           
    }

        private Handler vijfSeconden = new Handler(){
            public void handleMessage(Message msg){
                mpVolume((float)0.8);
            }
        };
        Thread t5sec = new Thread(){
            public void run(){
                if(Settings.flag == false){
                    Settings.flag = true;
                    try {
                        Thread.sleep(3500); 
                    } catch (InterruptedException e) {
                        Settings.flag = false;
                        e.printStackTrace();
                    }
                    vijfSeconden.sendEmptyMessage(0);

                    Settings.flag = false;
                }
            }
        };
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T22:48:04.643

代码几乎没有问题。可能最奇怪的最重要的事情是 t5sec.run()，在 Java 中，您应该在 Thread 对象上使用 start 方法来启动新线程。如所写，它将在调用线程中执行。第二个问题是绝对缺乏同步，我想解决这个问题的一种方法是在 Settings.flag 中使用 AtomicBoolean 而不是 boolean

另一个问题是每次启动新线程都非常昂贵。从描述中准确地说出你想要做什么有点困难，但如果我的理解是正确的，你应该做这样的事情：

```
if ( (System.currentTimeInMillis() - lastTimePlayed) < 3500) {
 playSound();
 lastTimePlayed = System.currentTimeInMillis();
} 
```

就是这样，不需要线程。如果您希望您的类是线程安全的，您可能希望使用 AtomicInteger 来保存 lastTimePlayed 值。

# iphone - UIImage 解压导致滚动滞后

> ID：10149165
> 
> 赞同：29
> 
> 时间：2012-04-13T22:33:29.007
> 
> 标签：iphone, ios, core-graphics

我有一个带有全屏 tableView 的应用程序，它显示一堆小图像。这些图像是从网络上提取的，在后台线程上处理，然后使用类似的东西保存到磁盘：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    UIGraphicsBeginImageContextWithOptions(rect.size, YES, 0);
    // code that adds some glosses, shadows, etc 
    UIImage *output = UIGraphicsGetImageFromCurrentImageContext();

    NSData* cacheData = UIImagePNGRepresentation(output);
    [cacheData writeToFile:thumbPath atomically:YES];

    dispatch_async(dispatch_get_main_queue(), ^{
        self.image = output; // refreshes the cell using KVO
    });
}); 
```

此代码仅在第一次显示单元格时执行（因为之后图像已经在磁盘上）。在这种情况下，使用以下方式加载单元格：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    UIImage *savedImage = [UIImage imageWithContentsOfFile:thumbPath];

    if(savedImage) {
        dispatch_async(dispatch_get_main_queue(), ^{
            self.image = savedImage; // refreshes the cell using KVO
        });
    }
}); 
```

我的问题是，在第一种情况下，滚动很流畅。但是在第二种情况下（直接从磁盘读取图像），滚动是超级生涩的，即使加载了图像也是如此。绘图是导致滞后的原因。使用 Instruments，我看到了`copyImageBlockSetPNG`，`png_read_now`并且占用了大部分 cpu（分配给`inflate`时它们不是）`self.image``UIGraphicsGetImageFromCurrentImageContext()`

我假设会发生这种情况，因为在第一种情况下 UIImage 是绘图的原始输出，而在第二种情况下，它必须在每次绘制 PNG 时解压缩它。我尝试使用 JPG 而不是 PNG，得到了类似的结果。

有没有办法解决这个问题？也许让它只在第一次绘制 PNG 时解压缩它？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-13T22:41:30.777

您的问题是`+imageWithContentsOfFile:`缓存和延迟加载。如果您想做这样的事情，请在后台队列中使用此代码：

```
// Assuming ARC
NSData* imageFileData = [[NSData alloc] initWithContentsOfFile:thumbPath];
UIImage* savedImage = [[UIImage alloc] initWithData:imageFileData];

// Dispatch back to main queue and set image... 
```

现在，使用此代码，图像数据的实际解压缩仍然会是惰性的，并且会花费一点点，但不会像代码示例中的延迟加载所带来的文件访问命中率那么高。

由于您仍然看到性能问题，您还可以强制 UIImage 在后台线程上解压缩图像：

```
// Still on background, before dispatching to main
UIGraphicsBeginImageContext(CGSizeMake(100, 100)); // this isn't that important since you just want UIImage to decompress the image data before switching back to main thread
[savedImage drawAtPoint:CGPointZero];
UIGraphicsEndImageContext();

// dispatch back to main thread... 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-05-31T18:35:23.350

Jason 关于预绘制图像以解压缩它的提示是关键，但是通过复制整个图像并丢弃原始图像，您将获得更好的性能。

在 iOS 上运行时创建的图像似乎比从文件加载的图像更适合绘图，即使在您强制它们解压缩之后也是如此。出于这个原因，您应该像这样加载（将解压缩的图像放入 NSCache 也是一个好主意，这样您就不必不断重新加载它）：

```
- (void)loadImageWithPath:(NSString *)path block:(void(^)(UIImage *image))block
{
    static NSCache *cache = nil;
    if (!cache)
    {
        cache = [[NSCache alloc] init];
    }

    //check cache first
    UIImage *image = [cache objectForKey:path];
    if (image)
    {
        block(image);
        return;
    }

    //switch to background thread
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{

        //load image
        UIImage *image = [UIImage imageWithContentsOfFile:path];

        //redraw image using device context
        UIGraphicsBeginImageContextWithOptions(image.size, YES, 0);
        [image drawAtPoint:CGPointZero];
        image = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();

        //back to main thread
        dispatch_async(dispatch_get_main_queue(), ^{

            //cache the image
            [cache setObject:image forKey:path];

            //return the image
            block(image);
        });
    });
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-13T14:16:54.357

图像解压的另一种方式：

```
 NS_INLINE void forceImageDecompression(UIImage *image)
 {
  CGImageRef imageRef = [image CGImage];
  CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
  CGContextRef context = CGBitmapContextCreate(NULL, CGImageGetWidth(imageRef), CGImageGetHeight(imageRef), 8, CGImageGetWidth(imageRef) * 4, colorSpace,kCGImageAlphaPremultipliedFirst | kCGBitmapByteOrder32Little);
  CGColorSpaceRelease(colorSpace);
  if (!context) { NSLog(@"Could not create context for image decompression"); return; }
  CGContextDrawImage(context, (CGRect){{0.0f, 0.0f}, {CGImageGetWidth(imageRef), CGImageGetHeight(imageRef)}}, imageRef);
  CFRelease(context);
} 
```

使用：

```
 dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
  UIImage *image = [UIImage imageWithContentsOfFile:[NSString stringWithFormat:@"%u.jpg", pageIndex]];
  forceImageDecompression(image);

  dispatch_async(dispatch_get_main_queue(), ^{ 
    [((UIImageView*)page)setImage:image];
  });
} 
```

# c# - 如何使用 WCF 在 WSO2 消息代理上进行发布/订阅

> ID：10149167
> 
> 赞同：1
> 
> 时间：2012-04-13T22:33:56.997
> 
> 标签：c#, .net, wcf, wso2

一般而言，似乎很少有关于与 WCF 或 .Net 的 WSO2 产品交互的信息。我正在尝试订阅 WSO2 消息代理中定义的主题，但我不知道从哪里开始。最终，我想从 C# 应用程序发布事件，但同样，我可以使用一些帮助来寻找起点。

我已经使用 RabbitMQ .net 库成功地编写了一些东西，但仅用于读取/写入队列，而不是主题。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:13:08.663

我认为您可以通过编写 C# 客户端使用 WS-Eventing API 来做到这一点。您可以参考本文中有关 WS-Eventing 的[部分](http://wso2.org/library/articles/2011/08/messaging-eventing-soa#eventing)。不幸的是，示例代码是用 Java 编写的。

# php - 贝宝 IPN 订阅

> ID：10149170
> 
> 赞同：0
> 
> 时间：2012-04-13T22:34:14.853
> 
> 标签：php, paypal, subscription, paypal-sandbox, paypal-ipn

有没有办法设置贝宝 IPN，这样每次我的贝宝账户发生变化时它都会触发我的脚本。例如新付款、取消订阅、定期付款等？

我知道这只是对在 paypal 上为开发人员 webby 发布的脚本进行的一些修改。但是，我在使用他们的沙箱测试脚本时遇到了麻烦。似乎它重置了连接和 IPN、订阅按钮等的设置。

有没有人可以帮助编写脚本或手册？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T22:36:05.887

我过去曾成功使用过 IPN。让它工作是正确的 b$！@#，我感觉到你的痛苦。

我不知道 IPN 还可以用于支付通知以外的任何内容。

在沙盒环境中，您应该有一个单独的帐户，请确保正确设置它。

# javascript - 如何在下面取消此文件上传

> ID：10149172
> 
> 赞同：1
> 
> 时间：2012-04-13T22:34:41.487
> 
> 标签：javascript, jquery, file-upload

我有一个包含文件输入、上传按钮和取消按钮的表单：

```
<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='stopImageUpload(this);' class='imageuploadform' >
<p class='imagef1_upload_form' align='center'><label>Image File: <input name='fileImage' type='file' class='fileImage' /></label>
<input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label>
</p>
<p class='imagef1_cancel' align='center'>
<label><input type='button' name='imageCancel' class='imageCancel' value='Cancel' /></label>
</p> 
<iframe class='upload_target' name='upload_target' src='#' style='width:0;height:0;border:0px;solid;#fff;'></iframe>
</form> 
```

我已经设置了 php 来上传文件和所有这些，并且上传工作完美。由于下面的 javascript 函数，上传开始和停止，但我的问题是如何对其进行编码，以便当用户开始上传（startImageUpload() 函数）时，如果用户希望在上传期间通过单击取消上传取消按钮，然后它停止上传（我相信它需要导航到 stopImageUpload() 函数，但我不确定这是否正确）。

我已将所有内容设置为正确显示在屏幕上，我只需要知道能够成功取消上传以及显示已在 stopImageUpload 中的消息“上传期间出错”的正确功能是什么（） 功能。

下面是开始上传的函数：

```
function startImageUpload(imageuploadform){

  $(imageuploadform).find('.imagef1_upload_process').css('visibility','visible');
  $(imageuploadform).find('.imagef1_cancel').css('visibility','visible');
  $(imageuploadform).find('.imagef1_upload_form').css('visibility','hidden');
  sourceImageForm = imageuploadform;
      return true;
} 
```

以下是上传完成的函数：

```
function stopImageUpload(success){
      var result = '';
      if (success == 1){
         result = '<span class="msg">The file was uploaded successfully!</span><br/><br/>';
      }
      else {
         result = '<span class="emsg">There was an error during file upload!</span><br/><br/>';
      }
      $(sourceImageForm).find('.imagef1_upload_process').css('visibility','hidden');
      $(sourceImageForm).find('.imagef1_cancel').css('visibility','hidden');

      return true;   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T22:50:14.987

好的，所以你已经有了函数和点击处理程序，那么是什么阻止你在事件处理程序中调用你的函数呢？

假设 stopImageUpload 函数在同一个文件中（或至少在该页面上加载）：

```
$(".imagecancel").on("click", function(event) {
    console.log("clicked");
    event.preventDefault();
    stopImageUpload(); // Just call it?!
}); 
```

此外，请确保让浏览器在您的 stopImageUpload 函数中停止发送它的当前请求（上传）：

```
if(navigator.appName == "Microsoft Internet Explorer") {
    window.document.execCommand('Stop');
} else {
    window.stop();
} 
```

# java - 比较并删除java中两个字符串中的相同字符，然后将剩余字符输出为数字

> ID：10149174
> 
> 赞同：2
> 
> 时间：2012-04-13T22:34:58.383
> 
> 标签：java, string

假设我有用户输入 2 个不同的名称。例如：

```
firstName = "Stack Overflow"
secondName = "Stack Exchange" 
```

我想要做的是比较它们，这意味着单词`"Stack"`将被消除，然后剩余的字符串字符将输出为数字。

`"overflow"`将输出为`8`，与`"Exchange"`应该输出相同`8`。

有没有我可以使用的方法？我只是一个新手，所以我会欣赏非`array`方法或一些高级 Java 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T22:45:25.830

一些有用的方法：

*   [`String.substring()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring)
*   [`String.equalsIgnoreCase()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equalsIgnoreCase%28java.lang.String%29)
*   [`String.compareToIgnoreCase()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#compareToIgnoreCase%28java.lang.String%29)
*   [`String.split()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)

对不同字符长度的迭代会给你一个数字，但我不确定你想要输出更长的字符串还是更短的字符串。（无论哪种情况，使用循环都会有所帮助。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T22:55:23.453

您可以尝试遍历两个字符串中的字符，逐步比较它们，直到找到不同的字符。此时，您只需返回字符串的长度减去公共前缀中的字符数。

尝试这样的事情（代码未经测试，你可能需要做一些调整——这也只返回第一个参数字符串的长度减去前缀）：

```
public int stringLength( String s1, String s2 )
{
  for ( int i = 0 ; i < Math.min( s1.length(), s2.length() ) ; i++ )
  {
    if ( s1.charAt( i ) != s2.charAt( i )
    {
      return s1.length() - i;
    }
  }

  return s1.length();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-12T04:11:35.257

据我了解，您想从两个字符串中删除公共元素：如果是这样，则解决方案： String str1 = "Stack Overflow"; 字符串 str2 = "堆栈交换";

```
 ArrayList arr1 = new ArrayList();
    ArrayList arr2 = new ArrayList();
        for(int i = 0; i < str1.length(); i++) {
            arr1.add(str1.charAt(i));
        }

        for(int i = 0; i < str2.length(); i++) {
            arr2.add(str2.charAt(i));
        }
        arr1.retainAll(arr1);

     java.util.List<ArrayList> chars = Arrays. asList(arr1);
     String str = chars.toString().replace(",","");
 return str; 
```

# html - 从哲学上讲，为什么标记不能是二进制数据？ie 为什么我们不能为 web 编译 HTML？

> ID：10149180
> 
> 赞同：11
> 
> 时间：2012-04-13T22:36:06.477
> 
> 标签：html

鉴于为使 Web 尽可能高效而付出的巨大努力，为什么不能将 HTML（以及所有其他各种纯文本文件，例如 CSS、JavaScript）编译成单一资源并通过网络发送？（我知道[.chm 文件](http://en.wikipedia.org/wiki/Microsoft_Compiled_HTML_Help)——这些文件符合这个概念）。

我理解网络的开放性——我支持的一项努力——但是人们可以设想一个需要将多个资源编译成二进制的开放规范。规范可能需要用户代理的去复杂化（这允许个人查看 DOM 等）

我想我只是感到惊讶，考虑到其他领域的性能努力，我们仍然依靠纯文本来推动页面，还是我只是高估了二进制格式可以提供的节省？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T22:53:29.573

网络发展的一个重要因素是网络语言的可扩展性。浏览器供应商可以支持比标准要求更多的功能。尽管这一直是开发人员的麻烦，但它*帮助*Web 向前发展。

通过编译网页，您会将功能限制在编译器支持的范围内。在编译器赶上开发之前，不可能在任何浏览器中使用任何新功能。这将减缓网络的发展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T23:46:01.723

通常网络“文本”资产（HTML、CSS、JavaScript、XML、JSON）**是“二进制”**的，因为它们是通过 GZIPped 提供的：[http](http://duckduckgo.com/?q=gzip+files+server) ://duckduckgo.com/?q=gzip+files+server 很难得到比那; 能够被人阅读，同时非常压缩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T23:58:01.193

对此进行了尝试 - 请参阅 WBXML。然而，当有人试图扩展 XML 定义时，问题就来了——ID 35 对应于 microsoft 扩展 <foo> 还是 netscape <bar>？

当您试图找出您错了哪一点 HTML 时，阅读二进制文件也变得更加困难。

数据大小的主要问题是通过在数据离开 Web 服务器之前对其进行 gzip 压缩来解决的。

# asp.net - 如何进行延迟回发？

> ID：10149181
> 
> 赞同：5
> 
> 时间：2012-04-13T22:36:25.127
> 
> 标签：asp.net

我在假设页面上有 5 个复选框，如果选中其中任何一个，我想执行回发。但是，我想稍微延迟回发，以便如果用户选中一个框，它会等待一秒钟左右，以确保用户在往返服务器之前不想检查更多框。因此，如果您快速连续检查所有五个，则可以在发送回发之前检查所有五个。

有没有人这样做，看到这样做，知道如何做到，或者有充分的理由不这样做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T22:49:32.723

您没有说您使用的是 jQuery，但为了讨论和清楚起见，我假设它是可用的。类似的东西应该适合你：

```
var timeout = null;

// Set up code to respond to when the checkbox is checked/unchecked
$('input[type="checkbox"]').change(function() {
    // If this is the second check box in a row, clear previous timeout
    if (timeout != null) 
        clearTimeout(timeout);

    // Set a timeout that will fire in 5 seconds 
    timeout = setTimeout(function() {
          // Post back the form
        __doPostBack();
    }, 5000);
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-14T01:45:16.843

为什么不`AutoPostBack="false"`打开复选框并通过按钮触发回发？这样，用户就有机会检查他们想要的一切，并在他们想要的时候提交结果。

* * *

由于您对回发的 1 个按钮的评论对用户来说是违反直觉的，为什么不将每个复选框包装在 UpdatePanel 中？它可能需要更多的标记，但它会完全按照您的意愿行事，而无需执行“延迟回发”方案。

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
    <asp:CheckBox ID="CheckBox1" runat="server" AutoPostBack="true" />
</asp:UpdatePanel>

<asp:UpdatePanel ID="UpdatePanel2" runat="server" UpdateMode="Conditional">
    <asp:CheckBox ID="CheckBox2" runat="server" AutoPostBack="true" />
</asp:UpdatePanel>

<asp:UpdatePanel ID="UpdatePanel3" runat="server" UpdateMode="Conditional">
    <asp:CheckBox ID="CheckBox3" runat="server" AutoPostBack="true" />
</asp:UpdatePanel>

<asp:UpdatePanel ID="UpdatePanel4" runat="server" UpdateMode="Conditional">
    <asp:CheckBox ID="CheckBox4" runat="server" AutoPostBack="true" />
</asp:UpdatePanel>

<asp:UpdatePanel ID="UpdatePanel5" runat="server" UpdateMode="Conditional">
    <asp:CheckBox ID="CheckBox5" runat="server" AutoPostBack="true" />
</asp:UpdatePanel> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T04:48:51.557

> 有没有人这样做，看到这样做，知道如何做到，或者有充分的理由不这样做？

我反对任何重新加载或修改页面结构的延迟操作。原因如下：

**原因 #1**
人们使用各种输入法以截然不同的速度点击。

**原因 #2**
行为应该是一致的，不受只有你知道的隐藏规则的约束。有时用户受过大量训练并且可以利用优化，但大多数时候他们不是。

**原因 #3**
结构更改（尤其是异步执行的更改）可能会撤消后续操作。

例子：

*   用户选中一个框。
*   页面在短暂延迟后异步回发。
*   用户取消选中同一个框。
*   异步回发完成，重新选中该框。

这是任何异步回发的设计考虑因素，但延迟使其更不直观。

**替代方案**
如果操作要求在回发发生时执行整个生命周期，那么我会主张立即执行回发。

如果该操作不需要执行页面的整个生命周期，我建议使用某种 AJAX 调用在后台执行逻辑，并完全消除回发。然后，您可以使用结果值来更新浏览器（如有必要）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T14:53:43.280

我也遇到过一次这个问题。我设法使用存储在隐藏字段中的标志使其工作。考虑一下：

```
<%-- SomePage.aspx --%>
<asp:HiddenField ID="checkboxClicked" runat="server" Value="false" />

<asp:CheckBox ID="checkBox1" runat="server" Text="Check 1" AutoPostBack="true" OnClientClick="return onCheckboxClick();" OnClick="OnCheckBoxClick" />
<asp:CheckBox ID="checkBox2" runat="server" Text="Check 2" AutoPostBack="true" OnClientClick="return onCheckboxClick();" OnClick="OnCheckBoxClick" />
<asp:CheckBox ID="checkBox3" runat="server" Text="Check 3" AutoPostBack="true" OnClientClick="return onCheckboxClick();" OnClick="OnCheckBoxClick" />
<asp:CheckBox ID="checkBox4" runat="server" Text="Check 4" AutoPostBack="true" OnClientClick="return onCheckboxClick();" OnClick="OnCheckBoxClick" />
<asp:CheckBox ID="checkBox5" runat="server" Text="Check 5" AutoPostBack="true" OnClientClick="return onCheckboxClick();" OnClick="OnCheckBoxClick" />

<%
    protected void OnCheckBoxClick(object sender, EventArgs args)
    {
        // Your code here...

        checkboxClicked.Value = "false";
    }
%>

<script type="text/javascript">

    function onCheckboxClick() {
        var canPostBack = true;

        if ($('#checkboxClicked').val() === 'true') {
            canPostBack = false;
        }
        else {
            $('#checkboxClicked').val('true');
            canPostBack = true;
        }

        return canPostBack;
    }

</script> 
```

# java - Java Applet 在没有互联网的情况下无法加载

> ID：10149183
> 
> 赞同：0
> 
> 时间：2012-04-13T22:36:33.590
> 
> 标签：java, php, javascript, applet, sip

当我使用 WAMP 服务器和其他服务器运行它时，我正在使用 MizuTech 网络电话，它说**找不到 java 小程序处理程序..！**.
但如果我连接我的互联网，它工作正常。
你能告诉Java小程序是否有必要使用互联网吗？
如果不能，请告诉我如何摆脱它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T23:15:18.400

您绝对可以在不连接到 Internet 的情况下运行小程序。

...只要它的所有 jars 和代码在本地可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T06:02:51.640

虽然可以从本地资源加载小程序，但我对 SIP 呼叫的理解是它们通常通过互联网进行。因此，当没有互联网连接时，“SIP 电话小程序”的要点就丢失了。它就像一部没有信号的手机，或者是“暴风雨把电话线吹断了”的固定电话。

# intellij-idea - Intellij IdeaVim 更改键

> ID：10149187
> 
> 赞同：36
> 
> 时间：2012-04-13T22:37:01.610
> 
> 标签：intellij-idea, vim, ideavim

我真的很想能够使用 IdeaVIM，但我无法弄清楚我可以在哪里设置我的自定义 vim 键映射。例如，不使用`Esc`我想使用`Ctrl`-`C`而不是使用`h``j``k``l`我喜欢使用`w``a``s``d`.

我已经设置了所有这些，`.vimrc`但 IdeaVIM 无法加载它们。我可以手动将它们复制到所需的任何文件中，但没有关于如何执行此操作的文档。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-04-29T17:20:12.670

从 IdeaVim 0.35（2014-05-15 发布）开始，`~/.ideavimrc`支持键映射。如果您`source ~/.vimrc`想包含来自`~/.vimrc`.

[发布公告](https://twitter.com/ideavim/status/460815026413404160)

[维姆-288](http://youtrack.jetbrains.com/issue/VIM-288)

（注意：这个问题可能被认为是[另一个](https://stackoverflow.com/q/5585687/2562319)StackOverflow 问题的重复。）

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-04-17T16:59:43.493

我自己已经完成了这项工作，并且在 IntelliJ 11 中非常容易。我知道在以前的版本中（可能是 9 版？）设置键映射值有很大不同。

在 IntelliJ 11 中，您可以执行以下操作：

1.  去`Settings`
2.  `Keymap`从左侧菜单中选择
3.  `Exit Insert Mode`在右侧搜索并关联您要使用的任何键，例如`CTRL-C`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-01-19T09:18:28.973

如果你喜欢安装 Vim 插件（我觉得它在打字时非常方便），同时又要`Ctrl+C`进行`Ctrl+V`复制和粘贴操作，请执行以下操作：

在 IntelliJ Idea 中，单击`File`> `Setting`。在左侧窗格中，展开`Editor`并单击`Vim Emulation`。

在这里，在`Shortcut`列下，找到`Ctrl+C`并将其 Handler（在`Handler`列下）更改为`IDE`而不是`Vim`.

重复它`Ctrl+V`并点击`Apply`and `Ok`。

现在，您应该能够使用键盘快捷键进行复制和粘贴，同时保持 Vim Emulator 处于启用状态。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-04T22:26:25.730

智能 12.1：

1.  去`Settings`
2.  `Keymap`从左侧菜单中选择
3.  *`Escape`*在该部分下找到`Editor Actions`并在那里添加`Ctrl-C`快捷方式。（“IdeaVim”部分下的“Escape”对我不起作用）

遵循相同的步骤，但将“Escape”替换为“Exit Insert Mode”仅对我部分有效。它正确退出了插入模式，但忽略了以下击键。因此，键入`Ctrl-C`, `j`,`j`将退出插入，但只会上升一行而不是两行。

# ios5 - UIWebView youtube 视频响应 UIAppearance

> ID：10149191
> 
> 赞同：2
> 
> 时间：2012-04-13T22:37:32.313
> 
> 标签：ios5, mpmovieplayercontroller, uiappearance

我开始变得非常沮丧......

第一个 MFMessageComposeViewController 和 MFMailComposeViewController 继承了我对视图控制器所做的 UIAppearance 更改...

我终于通过子类化我的 navigationController 并将我的 UIAppearance 更改包含到自定义 navigationController 的类来解决这个问题......

但是现在我的 uiwebview 中的 youtube 视频再次遇到了这个问题。我再次有一个子类视图控制器，我正在使用外观时包含：myViewController，但 youtube 视频似乎包含在我的自定义视图控制器中......

这真的开始困扰我了。苹果明确表示不要自定义这些视图，在 youtube 视频的情况下，我什至没有使用 mpmovieplayer，它就在 uiwebview 之外......我真的不想将整个 mpmovieplayer 框架放到我的项目中只是为此类的 uiappearance 设置 nil 值...

即使我这样做，我也不确定如何让默认的 titletextattributes 重新应用它们....

为什么这些视图首先响应 uiappearance？苹果不应该明确禁止他们继承 uiappearance 更改吗？

如果有人有建议，请告诉我

# codeigniter - 复杂的 RBAC Codeigniter 库（用于细粒度的用户权限和基于组的限制）

> ID：10149192
> 
> 赞同：3
> 
> 时间：2012-04-13T22:37:32.273
> 
> 标签：codeigniter, authentication, codeigniter-2, rbac

我正在进行一个项目，该项目需要某种与身份验证集成的 RBAC，但具有高级功能（根据角色/组设置“上限”或“用户限制”）。SaaS GitHub、Basecamp 等具有付费和免费计划的网站就是一个很好的例子。

我已经测试过：

离子认证 - [http://github.com/benedmunds/CodeIgniter-Ion-Auth](http://github.com/benedmunds/CodeIgniter-Ion-Auth)

Wolf Auth - [http://github.com/Vheissu/Wolfauth---A-Codeigniter-Auth-Library](http://github.com/Vheissu/Wolfauth---A-Codeigniter-Auth-Library)

烫发火花 - [http://getsparks.org/packages/perm/versions/HEAD/show](http://getsparks.org/packages/perm/versions/HEAD/show)

Codeigniter-RBAC - [https://github.com/pdiddy/CodeIgniter-RBAC](https://github.com/pdiddy/CodeIgniter-RBAC)

和其他一些（所有人：篝火）。其中一些只有身份验证功能，一些缺少身份验证但提供 RBAC。这些都没有使用或提及设置用户限制的可能性。

我自己开始开发一个类似的库（尽量不破坏 Ion Auth 函数命名，因为我要从那里搬出去），但是，考虑到我只是完成了数据库模式的规划并在迁移中实现它，我认为它更好使用已准备好并经过测试（如果存在）的东西，而不是重新发明轮子。有谁知道一个图书馆来完成这个特定的任务？

我正在使用 CI：2.1.0 + HMVC，考虑为此特定目的添加 DataMapper 或 RedBean。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-02T12:15:45.880

除了 cibonfire，现在想不出别的了。cibonfire 同时提供 Auth 和 RBAC。现在已经使用2年多了。

# windows - 类似于批处理文件中的函数/方法？

> ID：10149194
> 
> 赞同：74
> 
> 时间：2012-04-13T22:37:53.230
> 
> 标签：windows, command-line, batch-file

有什么可以模仿 Java、C# 等中的方法吗？我在批处理文件中有 5 行命令，这 5 行在批处理文件中的多个位置使用。我不能使用 goto，因为根据这 5 行创建的错误级别，我有不同的操作。我尝试将我的 5 行放在批处理文件 5lines.bat 中，但原始批处理文件 original.bat 仅调用 5lines.bat 并且在调用 5lines.bat 后不执行命令）：这就是我 original.bat 的外观像：

```
5lines.bat
echo this gets never called, how to make sure this gets called? 
```

5lines.bat 中没有出口或类似的东西！如何确保调用 5lines.bat 之后的行？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-04-13T22:42:10.450

您可以使用调用命令：

```
call:myDosFunc 
```

然后以这种方式定义函数：

```
:myDosFunc    - here starts the function
echo.  here the myDosFunc function is executing a group of commands
echo.  it could do a lot of things
goto:eof 
```

来源：[批处理函数](http://www.dostips.com/DtTutoFunctions.php)

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2018-01-27T11:32:21.650

为了完整起见，您还可以将参数传递给函数：

**函数调用**

```
call :myDosFunc 100 "string val" 
```

**函数体**

```
:myDosFunc
echo. Got Param#1 %~1
echo. Got Param#2 %~2
goto :eof 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2012-04-13T22:42:22.197

将可重用函数放入单独的批处理文件中肯定可以模拟一个函数。

问题是您必须使用该`call`命令来确保在第二个批处理文件完成执行后控制权返回给调用者。

```
call 5lines.bat
echo this will now get called 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2015-07-01T15:23:34.907

**解决方案：**

```
@ECHO OFF     

call:header Start Some Operation

... put your business logic here
... make sure EXIT below is present
... so you don't run into actual functions without the call

call:header Operation Finished Successfully

EXIT /B %ERRORLEVEL%

:: Functions

:header
ECHO ================================================= 
ECHO %*
ECHO ================================================= 
EXIT /B 0 
```

将 EXIT /B 放在每个函数的末尾以及函数定义开始之前很重要，在我的示例中是：

**退出 /B %ERRORLEVEL%**

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-04-13T22:43:18.623

您可以尝试使用[DOS Batch - Function Tutorial中列出的示例](http://www.dostips.com/DtTutoFunctions.php)

或者，您可以将公共行放入您从主文件调用的另一个批处理文件中

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-01-14T15:44:55.117

这是一个“hack”，可让您在批处理文件中拥有[“匿名”功能：](http://www.dostips.com/forum/viewtopic.php?f=3&t=3803&start=15)

```
@echo off
setlocal 
set "anonymous=/?"

:: calling the anonymous function
call :%%anonymous%% a b c 3>&1 >nul

:: here the anonymous function is defined
if "%0" == ":%anonymous%" (
  echo(
  echo Anonymous call:
  echo %%1=%1 %%2=%2 %%3=%3
  exit /b 0
)>&3
::end of the anonymous function 
```

匿名功能块应该放在 call 语句之后，并且必须以 exit 语句结束

诀窍是`CALL`内部使用`GOTO`然后返回到`CALL`执行的行。使用双扩展 GOTO 帮助消息被触发（带`%%/?%%`参数），然后继续脚本。但是在它完成后它会返回到`CALL`- 这就是为什么需要 if 语句的原因。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2020-10-12T20:31:00.663

来自 Java 背景，我尝试在为`.bat`脚本创建过程时加入一些熟悉的约定。

下面的脚本演示了两个过程的定义。

```
@ECHO OFF
SET firstInstanceVariable="Hello world!"
SET secondInstanceVariable="Good bye world!"
GOTO:MAIN

:firstMethodName
    SETLOCAL ENABLEDELAYEDEXPANSION
        SET firstArgumentPassedIn=%~1
        SET secondArgumentPassedIn=%~2

        ECHO %firstInstanceVariable%
        ECHO "The first argument passed in was %firstArgumentPassedIn%"
        ECHO "The second argument passed in was %secondArgumentPassedIn%"
    ENDLOCAL
EXIT /B 0

:secondMethodName
    SETLOCAL ENABLEDELAYEDEXPANSION
        SET firstArgumentPassedIn=%~1
        SET secondArgumentPassedIn=%~2

        ECHO %secondInstanceVariable%
        ECHO "The first argument passed in was %firstArgumentPassedIn%"
        ECHO "The second argument passed in was %secondArgumentPassedIn%"
    ENDLOCAL
EXIT /B 0

:MAIN
call:firstMethodName "The Quick Brown" "Fox Jumps Over"
call:secondMethodName "1 2 3 4" 3.14 
```

请注意，`GOTO:MAIN`跳过过程定义需要显式。这是因为您必须在决定阅读之前跳过该过程。否则，将执行该过程。

下面的代码演示了与上述`.bat`脚本非常接近的 Java 等效项。

```
public class MyObject {
    private String firstInstanceVariable = "Hello world!";
    private String secondInstanceVariable = "Good bye world!";
    public void firstMethodName(Object... arguments) {
        String firstArgumentPassedIn = arguments[0].toString();
        String secondArgumentPassedIn = arguments[1].toString();
        System.out.println(firstInstanceVariable);
        System.out.format("The first argument passed in was %s", firstArgumentPassedIn);
        System.out.format("The second argument passed in was %s", secondArgumentPassedIn);
    }

    public void secondMethodName(Object... arguments) {
        String firstArgumentPassedIn = arguments[0].toString();
        String secondArgumentPassedIn = arguments[1].toString();
        System.out.println(secondInstanceVariable);
        System.out.format("The first argument passed in was %s", firstArgumentPassedIn);
        System.out.format("The second argument passed in was %s", secondArgumentPassedIn);
    }

    public static void main(String[] args) {
        MyObject myObject = new MyObject();
        myObject.firstMethodName("The Quick Brown", "Fox Jumps Over");
        myObject.secondMethodName(new Integer[]{1,2,3,4}, 3.14);
    }
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-04-22T14:47:15.050

有关编写可重用批处理文件代码的另一个很棒的教程 - 请参阅[Richie Lawrence 的优秀库](https://ritchielawrence.github.io/batchfunctionlibrary/)。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-08-14T07:41:33.323

我不确定其他答案是否很明显，但为了明确起见，我发布了这个答案。我发现其他答案有助于编写以下代码。

```
echo what
rem the third param gives info to which label it should comeback to
call :myDosFunc 100 "string val" ComeBack

:ComeBack
echo what what
goto :eof

:myDosFunc
echo. Got Param#1 %~1
echo. Got Param#2 %~2
set returnto=%~3
goto :%returnto% 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-11-05T09:05:04.457

下面可能使它看起来像一个函数。

```
call :myFunc %para1% %para2%

:myFunc <para1> <para2>
    echo %1
    echo %2
    EXIT /B 
```

## 例子

```
@echo off
echo PROGRAM_NAME:%~nx0 Start
echo.
================================

SET debugMode=%1
call :myFunc1 %debugMode%
call :myFunc2 para1 "para2 hello"

================================
echo PROGRAM_NAME:%~nx0 End & pause>nul
EXIT /B

::  define the function under below
:myFunc1 <isDebug>
    :: So that you can know the %1 means: isDebug.
    if "%1" == "1" (
        echo debug mode
    )
    EXIT /B

:myFunc2 <para1> <para2>
    :: output: para1
    echo %1

    :: output: "para2 hello"
    echo %2
    EXIT /B 
```

# wpf - WPF - 为标准样式的控件使用控件继承？

> ID：10149195
> 
> 赞同：0
> 
> 时间：2012-04-13T22:37:57.863
> 
> 标签：wpf

我有一个带有许多窗口和用户控件的 WPF 应用程序，我想为整个应用程序中出现的某些控件实现标准样式。例如，假设我在整个应用程序中需要两个标准 TextBlock：一个用于大标题，一个用于小标题。它们之间的唯一区别是字体大小，分别是 36 和 24。所有其他属性（颜色、字体系列等）都可以通过 TextBlock 模板或全局 TargetType="{x:Type TextBlock}" 样式设置。

当然，我可以创建两个全局命名样式，它们只设置字体大小并将这些静态资源样式在整个 XAML 中自由地应用到我的 TextBlocks，或者在不会干扰其他 TextBlocks 的 TextBlocks 之上的最高级别。但是作为替代方案，这将消除在许多地方设置 Style 标签的要求，从 TextBlock 继承是一个好方法吗？

文本块控件：

```
class TextBlockLargeHeading : TextBlock
{
    public TextBlockLargeHeading()
    { }
}

class TextBlockSmallHeading : TextBlock
{
    public TextBlockSmallHeading()
    { }
} 
```

全球资源：

```
<Application.Resources>
    <Style TargetType="TextBlock">
        <Setter Property="Foreground" Value="Red" />
    </Style>
    <Style TargetType="MyApp:TextBlockLargeHeading" BasedOn="{StaticResource {x:Type TextBlock}}" >
        <Setter Property="FontSize" Value="36" />
    </Style>
    <Style TargetType="MyApp:TextBlockSmallHeading" BasedOn="{StaticResource {x:Type TextBlock}}" >
        <Setter Property="FontSize" Value="24" />
    </Style>
</Application.Resources> 
```

然后，要在任何地方使用它们，只需引用自定义文本块：

```
<StackPanel>
    <MyApp:TextBlockLargeHeading Text="Large" />
    <MyApp:TextBlockSmallHeading Text="Small" />
</StackPanel> 
```

这将创建两个具有适当字体大小的红色文本块。

这是一个合理的方法吗？如果我有 100 个这些实例，可维护性或其他方面，是否有任何问题？有没有更好（更安全或更少代码/XAML）的方法？也许改用用户控件？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T22:49:23.757

没有理由做这一切。创建您的样式并直接使用它们。

```
....
<Style x:Key="DefaultTextBlockStyle" TargetType="TextBlock">
    <Setter Property="Foreground" Value="Red" />
    <Setter Property="FontSize" Value="24" />
</Style>
<Style x:Key="LargeTextBlockStyle" TargetType="TextBlock" BasedOn="{StaticResource DefaultTextBlockStyle}">
    <Setter Property="FontSize" Value="36" />
</Style>

<!-- Style applies to all TextBoxes -->
<Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource DefaultTextBlockStyle}" />
...

<StackPanel>
    <TextBlock Text="Large" Style="{StaticResource LargeTextBlockStyle}"/>
    <TextBlock Text="Small"/>
</StackPanel> 
```

# android - 什么相当于 iOS 中的 onDraw

> ID：10149197
> 
> 赞同：3
> 
> 时间：2012-04-13T22:38:50.110
> 
> 标签：android, ios

在 android 上，我们有 onDraw()。iOS 中的等价物是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T22:42:55.347

您可能想要`drawRect:`，但根据您在视图中想要的内容，可能还有其他感兴趣的选项（子视图和核心动画层）。请参阅[查看编程指南](http://developer.apple.com/library/ios/#DOCUMENTATION/WindowsViews/Conceptual/ViewPG_iPhoneOS/Introduction/Introduction.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T22:44:02.977

如果您正在编写自定义视图，则基本上`-drawRect:`每次系统想要重绘时都会在视图上调用它（例如，每次运行循环转动并`-setNeedsDisplay`设置标志时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T22:43:31.620

您覆盖 a 的`-drawRect`方法`UIView`以直接绘制到屏幕上。但是，对于许多用例来说，这通常不是必需的。如果您愿意，请提供有关您想要实现的目标的更多详细信息。可能有更多的iOS方式。

# javascript - 如何在 jQuery 中阻止 keyup() 事件一秒钟？

> ID：10149198
> 
> 赞同：0
> 
> 时间：2012-04-13T22:39:09.580
> 
> 标签：javascript, jquery

我正在 jQuery 中进行表单验证，当用户输入像 #$@% 这样的禁止字符时会发出警报。问题是，当用户输入这些字符时，他使用 SHIFT 键，所以有两个键。

如何防止第二次发生？

```
if (!regex.test(lastCharacter)
     alert('forbidden character'); 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T22:43:49.123

我不知道这是否可行，但你明白了：

```
$("#myInput").keyup(function(e) {
    if(e.which == 16) {
        $(this).keyup(function(event) {
            if(event.which==16) event.preventDefault();
        });

        setTimeout(function() { 
            $("#myInput").off('keyup');
        },1000);
    }
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T22:51:19.540

您可以绑定在输入更改时发出的输入事件，但仅从 IE9 开始支持。在此之前，您可以绑定在输入值更改时发生的 propertychange 事件（仅在 IE 中）。下面的示例适用于大多数浏览器，也可能在 IE9 中触发两次回调，因此可能需要检查输入事件支持并采取相应措施。

[http://jsfiddle.net/X4qNf/](http://jsfiddle.net/X4qNf/)

我的坏处是其中带有属性更改的那个，如果它不起作用，请在 IE 中尝试，您可能必须以旧方式分配它。

```
 $('#boo')[0].onpropertychange = function() {}; 
```

[http://jsfiddle.net/X4qNf/2/](http://jsfiddle.net/X4qNf/2/)

# jquery - 如何在完整的函数中获取 jQuery ajax 数据？

> ID：10149199
> 
> 赞同：3
> 
> 时间：2012-04-13T22:39:24.480
> 
> 标签：jquery

我知道这是已知主题，解决方案之一是将调用更改为同步。我仍然不清楚是否有任何其他方法可以异步执行并获取完整函数中的数据？示例函数在成功函数中创建了一个新的资产对象，我想在完整函数中获取对它的引用。

```
 function getPresentation(item) {
        $.ajax({
            type: "GET",
            url: item.Url,
            success: function (data) {
                assets.push(new asset(item.Type, item.Url, data));
            },
            complete: function () {
                /// How to get here the reference for the newly created asset object?
                /// how to alert(asset)?
            },
            error: function (req, status, error) {
                alert('error');
            }
        });

    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T22:49:39.250

您可以简单地使用在事件中`jQXhr`获得的对象。`complete`完整事件的实际签名是`complete(jqXHR, textStatus)` 这样的

```
complete:function(jqXHR,status)
{
    if(status == 'success' || status=='notmodified')
    {
        var asset = new asset(item.Type, item.Url, $.parseJSON(jqXHR.responseText))
    }
} 
```

# semantic-web - RDFa 对比 微数据

> ID：10149200
> 
> 赞同：18
> 
> 时间：2012-04-13T22:39:25.410
> 
> 标签：semantic-web, microdata, rdfa

XHTML 中的 RDFa 是 w3c 标准。微数据被称为 HTML 5 API。我的问题是：

1.  微数据也是 w3c 标准吗？如果是，为什么我们需要 2 个类似的标准？

2.  人们说使用微数据比 RDFa 更简单。除此之外，这两者之间的主要区别是什么？

提前谢谢你

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-14T13:35:06.430

1.  是的，Microdata 也是 W3C 标准：[HTML Microdata](http://www.w3.org/TR/microdata/)。有两个标准，因为 RDFa 旨在满足 RDF 社区的要求，而 WHATWG HTML5 编辑器发现现行的 RDFa 规范过于先进，因此设计了自己的东西。

2.  这是一个非常主观的问题，但我想说 RDFa 的优点是：它更容易组合多个词汇表/模式，它对数据类型等有更好的支持，并且与所有其他基于 RDF 的标准兼容以防你在乎。Microdata 的优势在于 HTML 作者更容易掌握。[这是两种格式的大比较](http://manu.sporny.org/2011/uber-comparison-rdfa-md-uf/)（由 RDFa 人完成，所以可能有点偏颇）。

# file - 用于删除名称在文本文件中的文件的 Shell 命令/脚本

> ID：10149203
> 
> 赞同：15
> 
> 时间：2012-04-13T22:40:34.070
> 
> 标签：file, shell, scripting, delete-file

我有一个 .txt 文件（比如 list.txt）中的文件列表。我想删除该列表中的文件。我以前没有写过脚本。有些人可以提供我可以使用的shell脚本/命令。我有 bash 外壳。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-04-14T03:08:13.177

```
while read -r filename; do
  rm "$filename"
done <list.txt 
```

是缓慢的。

```
rm $(<list.txt) 
```

如果参数太多，将失败。

我认为它应该工作：

```
xargs -a list.txt -d'\n' rm 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-13T22:45:49.423

试试这个命令：

```
rm -f $(<file) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-13T23:10:29.380

如果文件名中有空格，则其他答案都不起作用；他们会将每个单词视为单独的文件名。假设文件列表在 中`list.txt`，这将始终有效：

```
while read name; do
  rm "$name"
done < list.txt 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-17T10:34:49.273

为了在无法使用`xargs`自定义分隔符的macOS 上快速执行：`d`

```
<list.txt tr "\n" "\0" | xargs -0 rm 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-13T22:44:38.233

以下应该可以工作，并在您循环时为您留出做其他事情的空间。

编辑：不要这样做，见这里： http: [//porkmail.org/era/unix/award.html](http://porkmail.org/era/unix/award.html)

~~对于 $(cat list.txt) 中的文件；做rm $文件；完毕~~

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-02-11T13:57:26.967

我今天只是在寻找解决方案，最终使用了一些答案和我拥有的一些实用程序功能的修改后的解决方案。

```
// This is in my .bash_profile

# Find
ffe () { /usr/bin/find . -name '*'"$@" ; } # ffe: Find file whose name ends with a given string

# Delete Gradle Logs
function delete_gradle_logs() {
   (cd ~/.gradle; ffe .out.log | xargs -I@ rm@)
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-18T18:01:26.933

在linux上，您可以尝试：

```
printf "%s\n" $(<list.txt) | xargs -I@ rm @ 
```

就我而言，我的 .txt 文件包含此类项目的列表`*.ext`并且运行良好。

# php - 致命错误：调用未定义函数：MDB2_Driver_MYSQL::getAll()

> ID：10149205
> 
> 赞同：0
> 
> 时间：2012-04-13T22:40:59.747
> 
> 标签：php, mysql, pear, mdb2

我正在将站点从 Fedora 14、PHP4 和 PEAR DB 升级到 Fedora 16、PHP 5.4 和 PEAR MDB2 2.5.0b3，我收到了错误

> 致命错误：调用未定义函数：MDB2_Driver_MYSQL::getAll()。在第 1892 行的 /usr/share/php/MDB2.php 中

显然，我已经检查了 MDB2.php 文件的第 1892 行，它包含了`__call`魔术方法的错误报告代码（允许您通过将特定函数传递给来调用它`__call`）

我检查了 的用法`__call`，似乎没有。同样，当我尝试查找`MDB2_Driver_MYSQL`来自何处时，唯一提到它的地方是 MDB2.php（作为关于 MySQL 驱动程序的注释）、类声明 ( `class MDB2_Driver_mysql extends MDB2_Driver_Common`) 和 .xml 中的描述标题文件。

我已经手动将文件包含在定义类`/usr/share/php/MDB2/Extended.php`的文件中`MDB2_Driver_mysql`，但这没有帮助（并不是说这将是一个永久修复......）

有没有人遇到过这个错误，如果有，你做了什么来解决它？事实证明，谷歌几乎毫无用处，因为唯一[特别提到](http://www.sitepoint.com/forums/showthread.php?462193-PEAR-MDB2-Error)它的地方并没有真正解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-27T06:50:04.360

将类中的 getAll() 更改为 queryAll()，导致 DB 和 MDB2 之间存在一些差异，getOne、getRow 也是如此——它们都更改为 queryOne、queryRow。在这里你可以阅读它[http://www.phpied.com/db-2-mdb2/](http://www.phpied.com/db-2-mdb2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T15:37:24.507

确保在进行查询之前在代码中加载扩展模块，类似于以下内容：

```
$db->loadModule('Extended'); 
```

# facebook - Facebook Graph API - 从 Facebook 页面 URL 获取 ID

> ID：10149209
> 
> 赞同：39
> 
> 时间：2012-04-13T22:41:32.217
> 
> 标签：facebook, facebook-graph-api

我见过[这个问题](https://stackoverflow.com/questions/3581488/facebook-graph-api-get-id-for-a-url)，但我想要的是不同的。

我想不是从一般 URL 获取 Facebook ID（因此如果它有 Like 按钮是有条件的）。我想使用 Graph API 获取给定 Facebook 页面的 Facebook ID。

请注意，Facebook 页面可以有多种格式，例如：

```
http://www.facebook.com/my_page_name
http://www.facebook.com/pages/my_page_name
http://www.facebook.com/my_page_ID 
```

我知道我可以做一些正则表达式来获取 my_page 名称或 my_page_ID，但我想知道是否有人知道 GraphAPI 是否支持我想要的。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-13T23:02:19.580

在我看来，您所描述的最简单的解决方案是从您使用*lastIndexOf("/")*（大多数语言都有对应的）的 url 中获取 id/name，然后获取*"https://graph .facebook.com/" + id*。

此 url 返回的数据具有 id（即：6708787004）和用户名（即：southpark），因此无论您使用哪个标识符（使用 lastIndexOf 从 url 中提取的内容），您都应该得到相同的结果。

* * *

# 编辑

这段代码：

```
identifier = url.substring(url.lastIndexOf("/"))
graphUrl = "https://graph.facebook.com/" + identifier
urlJsonData = getGraphData(graphUrl) 
```

两者的工作方式应该相同（即具有相同数据的结果）：

```
url = http://www.facebook.com/southpark 
```

和

```
url = http://www.facebook.com/6708787004 
```

（您显然需要实现*getGraphData*方法）。

此外，问题中的第二个 url 形式不是页面的有效 url，至少不是来自我的测试，我得到：

> 您可能单击了过期的链接或输入了错误的地址。一些网址区分大小写。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-07-14T09:08:51.073

问题的答案已在上面发布，但下面显示的方法可以正常工作，我们不必`regex`在 facebook 页面 url 上执行

我通过这种方法得到了答案

```
FB.api('/any_fb_page_url', function(response){
  console.log(response);
}); 
```

any_fb_page_url 可以是以下任何类型

```
https://www.facebook.com/my_page_name
https://www.facebook.com/pages/my_page_name
https://www.facebook.com/my_page_ID 
```

这也列在上面的问题中

此代码在[Facebook 开发人员站点工具上可用的 JS 控制台上进行了测试](https://developers.facebook.com)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-08-19T08:50:55.060

您可以使用以下 api 获取页面 id

[https://graph.facebook.com/v2.7/smhackapp?fields=id,name,fan_count,picture,is_verified&access_token=access_token](https://graph.facebook.com/v2.7/smhackapp?fields=id,name,fan_count,picture,is_verified&access_token=) &format= **json**

[参考图像](http://i.stack.imgur.com/yqP5z.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-05-08T06:36:39.753

这个答案在 2019 年更新并检查：它非常简单，因为您不需要从链接中提取任何内容。举些例子：

1.  [https://www.facebook.com/pg/Vaireo-Shop-2138395226250622/about/](https://www.facebook.com/pg/Vaireo-Shop-2138395226250622/about/)
2.  [https://www.facebook.com/withminta](https://www.facebook.com/withminta)
3.  [https://www.facebook.com/2138395226250622](https://www.facebook.com/2138395226250622)

[https://graph.facebook.com/?id=link&access_token=xxxxxxxx](https://graph.facebook.com/?id=link&access_token=xxxxxxxx)

响应：{“名称”：“Vaireo 商店”，“id”：“2138395226250622”}

完整的nodeJS答案：

```
async function getBusinessFromFBByPageURL(pageURL: string) {
    const accessToken = process.env.fb_app_access_token;
    const graphUrl = `https://graph.facebook.com/?id=${pageURL}? access_token=${accessToken}`;
    const fbGraphResponse = await Axios.get(graphUrl); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-25T16:04:51.783

```
<?php

function getFacebookId($url) {

    $id =  substr(strrchr($url,'/'),1); 

    $json = file_get_contents('http://graph.facebook.com/'.$id);

    $json = json_decode($json);

    return $json->id;

}

echo getFacebookId($_GET['url']);

?> 
```

那是如何获取 ID 的 PHP 示例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-24T23:23:48.383

这个答案考虑到 URL 可以以斜杠结尾，Facebook 事件页面现在似乎在其 URL 中具有这种东西。

```
function getId(url) {
  var path = new URL(url).pathname;
  var parts = path.split('/');

  parts = parts.filter(function(part) {
    return part.length !== 0;
  });

  return parts[parts.length - 1];
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-20T10:14:35.990

您可以在**python中使用****请求**和**重新**模块

 **代码：

```
import requests,re

profile_url = "https://www.facebook.com/alanwalker97"

idre = re.complie('"entity_id":"([0-9]+)"')

con = requests.get(profile_url).content

id = idre.findall(con)

print("\n[*] ID: "+id[0]) 
```

输出：

> [*] 编号：100001013078780

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-26T18:50:15.930

截至 2021 年 11 月 26 日，这些解决方案都不起作用。Facebook 已锁定 API，因此您需要 App Review。

[https://developers.facebook.com/docs/pages/overview/permissions-features#features](https://developers.facebook.com/docs/pages/overview/permissions-features#features)

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-04-13T23:02:22.313

也许您可以查看[https://developers.facebook.com/docs/reference/api/#searching](https://developers.facebook.com/docs/reference/api/#searching)文档：针对几种类型进行搜索，如果您找到所需的内容，请从那里开始。**

# jsf - primefaces p:selectOneMenu 截断长选项（选中时）

> ID：10149210
> 
> 赞同：1
> 
> 时间：2012-04-13T22:41:36.037
> 
> 标签：jsf, select, primefaces, drop-down-menu

Has anyone had the issue of p:selectOneMenu truncating long options when those long options are selected? [请参阅http://i.imgur.com/scxLv.jpg](http://i.imgur.com/scxLv.jpg)上的 jpg

此特定输入具有 130 像素的内联样式宽度，看起来是在运行时计算的（基于特定选项）。对于具有不同选项的其他选择，我遇到了同样的问题 - 最长的选项在被选中时会在显示中被截断。

XHTML 很简单，我已经更改了此处发布的值，但就是这样：

```
<p:selectOneMenu id="selectPaymentAcct2" value="#{myBean.myProp}"> 
    <f:selectItems value="#{myBean.myOptions}"  />
</p:selectOneMenu> 
```

# jquery-mobile - 如何在 JQUERY MOBILE 中刷新选择菜单

> ID：10149213
> 
> 赞同：5
> 
> 时间：2012-04-13T22:41:42.277
> 
> 标签：jquery-mobile

我正在使用 JQuery 创建一个 Web 表单。

我想使用链接将以前的选择字段复制到另一个选择字段中。我让它改变了 DOM，select1.selectedIndex 的值被改变了。但是它仍然在视觉上显示旧值。显然你需要刷新它，以便它在视觉上更新。我不明白我一直在阅读的刷新方法的语法。这就是我尝试这样做的方式，但它不起作用。

这是链接的 html

```
 <select name="entry.14.single" id="entry_14">      
      <option value="1"></option>      
      <option value="2">2</option>       
      <option value="3">3</option>       
      <option value="4">4</option>       
      <option value="5">5</option></select> 
    <select name="entry.16.single" id="entry_16">      
      <option value=1""></option>      
      <option value="2">2</option>      
      <option value="3">3</option>       
      <option value="4">4</option>       
      <option value="5">5</option></select> 
    <a href="#" onclick="setSelect('entry_16', 'entry_14');return false;">Same as above</a> 
```

这是我的javascript：

```
 function setSelect(id1, id2){
      var select1 = document.getElementById(id1); 
      var select2 = document.getElementById(id2); 
      select1.selectedIndex = select2.selectedIndex;
      $('#select1').selectmenu('refresh');
    } 
```

有人可以告诉我为什么我的刷新声明不起作用吗？

ps 我知道在同一个问题上还有其他线程，我也阅读了“文档”。请不要将我链接到其他地方。我已经阅读了其他来源，但它没有让我到任何地方。请告诉我要更改哪些内容才能使刷新正常工作。

编辑：这是一个 jsfiddle，你可以在 [http://jsfiddle.net/AFzqt/7/上搞砸](http://jsfiddle.net/AFzqt/7/)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-14T02:56:30.403

利用 jQuery 事件处理程序！

您正在寻找的功能是：

```
selectmenu("refresh") 
```

在您的示例中，它看起来像这样：

```
$(function() {
    $("#changeButton").on("click", function(e) {
        $("#entry_16").val($("#entry_14").val());
        $("#entry_16").selectmenu("refresh");
        e.preventDefault();
    });
}); 
```

[http://jsfiddle.net/AFzqt/8/](http://jsfiddle.net/AFzqt/8/)

# sinatra - 西纳特拉 + 蒙古人

> ID：10149215
> 
> 赞同：0
> 
> 时间：2012-04-13T22:42:04.177
> 
> 标签：sinatra, mongoid

我正在创建一个使用 sinatra + mongoid 的应用程序。我有两个[型号](https://gist.github.com/2380428)，联系人有很多电话。为了测试我的 sinatra 控制器，我使用这个命令发布我的数据`

```
curl -X POST -d "contact[name]=nome&contact[email]=email@dominio.com&contact[phone][0][number]=88888888&contact[phone][0][type]=1&contact[phone][2][number]=77777777&contact[phone][3][type]=1" 
```

但是当我在 mongodb 中进行一次查询时，我发现它没有按预期保存。我需要将电话类保存为数组，但现在电话是一个哈希，其中键是“0”、“1”、N，就像我的帖子数据一样。我该如何解决这个问题？我想保存数据，所以：

```
{
"_id":"4f889875b336e722a0000003",
"email":"diego.dias2@dominio.com.br",
"github":"diegodfsd",
"name":"diego2",
"phone":{
"0":{
"number":"89311768",
"type":"cellphone"
},
"1":{
"number":"55555555",
"type":"home"
}
},
"twitter":"diegodfsd"
} 
```

[要旨](https://gist.github.com/gists/2380572)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T07:42:00.353

您需要使用phones_attributes 参数而不是电话

```
curl -X POST -d "contact[name]=nome&contact[email]=email@dominio.com&contact[phones_attributes][0][number]=88888888&contact[phones_attributes][0][type]=1&contact[phones_attributes][2][number]=77777777&contact[phones_attributes][3][type]=1" 
```

# oracle - 增加序列的正确语法是什么？

> ID：10149216
> 
> 赞同：3
> 
> 时间：2012-04-13T22:42:04.287
> 
> 标签：oracle, plsql

我有一个看起来像这样的功能。

```
 Function GetNewBatch ( CourseName Varchar2 ) Return RefCursor
    As
      Results RefCursor;
      CourseId Number;
    Begin

      CourseId := Courselist.GetId( CourseName );

      Open    Results For 
      Select  q.user_abn           UserAbn,
              q.completed_t        DateCompleted,
                                   CourseName,
              q.batch_n            BatchId
      From    GAK.GAKHR02_ACK q
      Where   q.crse_i  = CourseId
      And     q.batch_n is null
      And     rownum < 1000;

      GAK.SEQ1_GAKHR03.NextVal;
      Return Results;
    End; 
```

我想在选择后增加序列，但 SQL Developer 给了我错误：

“错误（194,5）：PLS-00313：'NEXTVAL' 未在此范围内声明。”

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T22:52:24.783

这是因为您没有将 分配`nextval`给变量。*假设*这`.nextval`是某个描述的函数。不是，Oracle 实际上将其描述为伪列；在与列相同的上下文中使用但未写入磁盘的东西。

如何[增加序列](http://docs.oracle.com/cd/E11882_01/server.112/e25494/views002.htm#ADMIN11796)取决于您使用的 Oracle 版本。在 11G 之前，您可以在 PL/SQL 块中执行以下操作：

```
declare    
   i number;    
begin

   select my_sequence.nextval
     into i
     from dual;

   insert into my_table(id)
   values(my_sequence.nextval);

   update my_table
      set id = my_sequence.nextval;

end; 
```

在 11G 中，这略有变化，因此您还可以将“返回”值分配给`.nextval`变量：

```
declare
   l_next_val number;
begin
   l_next_val := my_sequence.nextval;
end; 
```

PLS-00313 的原因是 Oracle 假设它`SEQ1_GAKHR03`是一个包或其他对象，并且`.nextval`是该对象的子类型。

在不实际使用值的情况下增加序列是非常不寻常的。这是预期的行为吗？

# objective-c - 从代码中在 UITableView 中插入行

> ID：10149222
> 
> 赞同：0
> 
> 时间：2012-04-13T22:42:39.157
> 
> 标签：objective-c, ios, uitableview

这似乎很荒谬，但我似乎无法解决。我需要在表格视图中插入一行以响应推送通知。实现应该很简单

```
- (void)didSaveMessage:(Message*)message atIndex:(int)index
{
//check to make sure I have an array to populate the table from...
    if (self.messageManager.messages != nil)
    {   
        self.indexRow = index;
        NSLog(@"refresh table view from code");
        //remove a label that says "You have no messages"...
        [[messageTable tableFooterView] removeFromSuperview];

        [messageTable beginUpdates];
        [messageTable insertRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:index inSection:0]] 
                            withRowAnimation:UITableViewRowAnimationFade];
        [messageTable endUpdates];

        [self scrollToNewestMessage];

    }
} 
```

当我收到远程通知并且它触发时调用此方法。日志语句打印。但是，UITableView 不会更新。对我来说特别奇怪的是，如果我将相同的代码放在 IBAction 中并将其链接到情节提要中的刷新按钮，它就可以工作。以编程方式更新 UITableView 是否需要做一些特别的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T22:45:05.740

尝试向表格发送`reloadData`消息。这应该强制表视图更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T00:55:54.737

这似乎很简单，但是您传递给 didSaveMessage 的 Message* 是否有可能为零？它将解释为什么 NSLog 语句有效，并且我假设您在从 IBAction 进行测试时必须手动创建消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T19:24:09.210

这解决了。我在 AppDelegate 中调用了从 didReceiveRemoteNotification: 更新 UI 的方法，但更新到了我的视图控制器的不同实例。所以我在应用程序委托上添加了一个 viewController 属性，在我的视图控制器的视图中设置它的值确实加载了，现在一切正常。

# php - PHP实体类生成器

> ID：10149224
> 
> 赞同：31
> 
> 时间：2012-04-13T22:42:58.280
> 
> 标签：php, mysql, oop

我正在创建理论上与我拥有的数据库表匹配的实体（实体视图控制器）（换句话说，MVC 模型）类。是否有读取 mysql 表并创建模型类代码的工具？（不是在执行时，需要代码输出）我希望输出像

```
class{
public $columnname1;
public $columnname2;
public $columnname3;
public $columnname4;
public $columnname5;
public $columnname6;
function __construct(&$columnname1, &$columnname2){...}
function insert(&$columnname1, &$columnname2){}
function delete(&$columnname1){}
...
} 
```

一个还可以通过 id 函数创建插入、更新和删除的工具对我有很大帮助。

该工具可能是免费的或付费的。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-13T22:48:15.580

~~PDO 可以将**[结果提取到对象](http://php.net/manual/en/pdostatement.fetch.php)**中。~~

~~设计一个与您的数据库/查询结构匹配的类，并用于`PDO::FETCH_INTO`将结果集提取到已实例化的对象中。~~误读了这个问题，我的错。

* * *

要从数据库结构中生成类本身，有几个项目（我没有测试过，但这是一个非常简单的搜索）。

*   [db2php](http://code.google.com/p/db2php/)
*   [PHP MySQL 类生成器](http://www.phpclasses.org/package/2802-PHP-Generate-classes-to-manipulate-MySQL-table-rows.html)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-20T17:57:55.217

下面的代码是我长期以来用来为 MySQL 和 DB2 表创建 PHP 模型的代码。我已经为 MSSQL、PGSQL 和 SQLite 准备了存根，但从来不需要完成它们。

这是代码生成器类：

```
<?php
/**
 * @license http://opensource.org/licenses/MIT The MIT License
 * @version 1.0.0_20130220000000
 */

/**
 * This class will generate PHP source code for a "model" that interfaces with 
 * a database table.
 * 
 * @license http://opensource.org/licenses/MIT The MIT License
 * @version 1.0.0_20130220000000
 */
class db_code_generator{
    private $closing_tag;
    private $columns;
    private $database;
    private $host;
    private $password;
    private $port;
    private $table;
    private $type;
    private $username;

    /**
     * Constructor. By default we will try to connect to a MySQL database on 
     * localhost.
     * 
     * @param string $database The name of the database the user wants to connect
     * to.
     * 
     * @param string $table The name of the table to generate code for.
     * 
     * @param string $username The username we should use to connect to the 
     * database.
     * 
     * @param string $password The password we need to connect to the database.
     * 
     * @param string $host The host or server we will try to connect to. If the 
     * user doesn't give us a host we default to localhost.
     * 
     * @param string $port The port we should try to connect to. Typically this 
     * will not be passed so we default to NULL.
     * 
     * @param string $type The type of database we are connecting to. Valid 
     * values are: db2, mssql, mysql, pgsql, sqlite.
     */
    public function __construct($database = NULL,
                                         $table = NULL,
                                         $username = NULL,
                                         $password = NULL,
                                         $host = 'localhost',
                                         $type = 'mysql',
                                         $port = NULL,
                                         $closing_tag = TRUE){
        $this->database = $database;
        $this->table = $table;
        $this->username = $username;
        $this->password = $password;
        $this->host = $host;
        $this->port = $port;
        $this->type = $type;
        $this->closing_tag = $closing_tag;
    }

    /**
     * Generate the code for a model that represents a record in a table.
     * 
     * @return string The PHP code generated for this model.
     */
    public function get_code(){
        $this->get_data_definition();
        $code = $this->get_file_head();
        $code .= $this->get_properties();
        $code .= $this->get_ctor();
        $code .= $this->get_dtor();
        $code .= $this->get_method_stubs();
        $code .= $this->get_file_foot();
        return $code;
    }

    /**
     * Create the code needed for the __construct function.
     * 
     * @return string The PHP code for the __construct function.
     */
    private function get_ctor(){
        $code = "\t/**\n";
        $code .= "\t * Constructor.\n";
        $code .= "\t *\n";
        $code .= "\t * @param mixed \$id The unique id for a record in this table. Defaults to NULL\n";
        if ('db2' === $this->type){
            $code .= "\n\t * @param string \$library The library where the physical file resides. Defaults to LIBRARY\n";
        }
        $code .= "\t *\n";
        $code .= "\t * @see base_$this->type::__construct\n";
        $code .= "\t */\n";
        if ('db2' === $this->type){
            $code .= "\tpublic function __construct(\$id = NULL, \$library = 'LIBRARY'){\n";
            $code .= "\t\tparent::__construct(\$id, \$library);\n";
        }else{
            $code .= "\tpublic function __construct(\$id = NULL){\n";
            $code .= "\t\tparent::__construct(\$id);\n";
        }
        $code .= "\t}\n\n";
        return $code;
    }

    /**
     * Connect to the requested database and get the data definition for the
     * requested table.
     */
    private function get_data_definition(){
        try{
            switch ($this->type){
                case 'db2':
                    $this->get_data_definition_db2();
                    break;
                case 'mssql':
                    $this->get_data_definition_mssql();
                    break;
                case 'mysql':
                    $this->get_data_definition_mysql();
                    break;
                case 'pgsql':
                    $this->get_data_definition_pgsql();
                    break;
                case 'sqlite':
                    $this->get_data_definition_sqlite();
                    break;
            }
        }catch(PDOException $e){
        }
    }

    /**
     * Get data definition information for a DB2 table.
     */
    private function get_data_definition_db2(){
        $con = new PDO("odbc:DRIVER={iSeries Access ODBC Driver};SYSTEM=$this->host;PROTOCOL=TCPIP", $this->username, $this->password);
        $sql = "SELECT COLUMN_NAME, COLUMN_SIZE, COLUMN_TEXT, DECIMAL_DIGITS, ORDINAL_POSITION, TYPE_NAME FROM SYSIBM.SQLCOLUMNS WHERE TABLE_SCHEM = '". strtoupper($this->database) ."' AND TABLE_NAME = '". strtoupper($this->table) ."'";
        $statement = $con->prepare($sql);
        if ($statement->execute()){
            while ($row = $statement->fetch()){
                if (NULL !== $row['DECIMAL_DIGITS']){
                    $decimal = $row['DECIMAL_DIGITS'];
                }else{
                    $decimal = NULL;
                }
                if ('DECIMAL' === $row['TYPE_NAME'] && NULL !== $row['DECIMAL_DIGITS'] && '0' !== $row['DECIMAL_DIGITS']){
                    $type = 'float';
                }else if ('DECIMAL' === $row['TYPE_NAME']){
                    $type = 'integer';
                }else{
                    $type = strtolower($row['TYPE_NAME']);
                }
                if ('1' === $row['ORDINAL_POSITION']){
                    $key = 'PRI';
                }else{
                    $key = NULL;
                }
                $this->columns[$row['COLUMN_NAME']] = array('allow_null' => TRUE,
                                                                          'decimal' => $decimal,
                                                                          'default' => NULL,
                                                                          'extra' => NULL,
                                                                          'key' => $key,
                                                                          'length' => $row['COLUMN_SIZE'],
                                                                          'name' => $row['COLUMN_NAME'],
                                                                          'text' => $row['COLUMN_TEXT'],
                                                                          'type' => $type);
            }
            ksort($this->columns);
        }
    }

    /**
     * Get data definition information for a MS SQL table.
     */
    private function get_data_definition_mssql(){
        return "The code for generating MS SQL models is not yet implemented.\n";
    }

    /**
     * Get data definition information for a MySQL table.
     */
    private function get_data_definition_mysql(){
        $dsn = "mysql:host=$this->host;";
        if (NULL !== $this->port){
            $dsn .= "port=$this->port;";
        }
        $dsn .= "dbname=$this->database";
        $con = new PDO($dsn, $this->username, $this->password);
        $sql = "SHOW COLUMNS FROM $this->table";
        $statement = $con->prepare($sql);
        if ($statement->execute()){
            while ($row = $statement->fetch()){
                $this->columns[$row['Field']] = array('allow_null' => $row['Null'],
                                                                  'decimal' => NULL,
                                                                  'default' => $row['Default'],
                                                                  'extra' => $row['Extra'],
                                                                  'key' => $row['Key'],
                                                                  'length' => NULL,
                                                                  'name' => $row['Field'],
                                                                  'text' => NULL,
                                                                  'type' => $row['Type']);
            }
            ksort($this->columns);
        }
    }

    /**
     * Get data definition information for a PostgreSQL table.
     */
    private function get_data_definition_pgsql(){
        return "The code for generating PostgreSQL models is not yet implemented.\n";
    }

    /**
     * Get data definition information for a SQLite table.
     */
    private function get_data_definition_sqlite(){
        return "The code for generating SQLite models is not yet implemented.\n";
    }

    /**
     * Create the code needed for the __destruct function.
     * 
     * @return string The PHP code for the __destruct function.
     */
    private function get_dtor(){
        $code = "\t/**\n";
        $code .= "\t * Destructor.\n";
        $code .= "\t */\n";
        $code .= "\tpublic function __destruct(){\n";
        $code .= "\t\tparent::__destruct();\n";
        $code .= "\t}\n\n";
        return $code;
    }

    /**
     * Generate the code found at the end of the file - the closing brace, the 
     * ending PHP tag and a new line. Some PHP programmers prefer to not have a 
     * closing PHP tag while others want the closing tag and trailing newline - 
     * it probably just depends on their programming background. Regardless it's 
     * best to let everyone have things the way they want.
     */
    private function get_file_foot(){
        $code = '';
        if ($this->closing_tag){
            $code .= "}\n?>\n";
        }else{
            $code .= '}';
        }
        return $code;
    }

    /**
     * Generate the code found at the beginning of the file - the PHPDocumentor 
     * doc block, the require_once for the correct base class and the class name.
     * 
     * @return string The code generated for the beginning of the file.
     */
    private function get_file_head(){
        $code  = "<?php\n";
        $code .= "/**\n";
        $code .= " * Please enter a description of this class.\n";
        $code .= " *\n";
        $code .= " * @author XXX <XXX@domain.com>\n";
        $code .= " * @copyright Copyright (c) ". date('Y') ."\n";
        $code .= " * @license http://www.gnu.org/licenses/gpl-3.0.html GPLv3\n";
        $code .= " * @version ". date('Ymd') ."\n";
        $code .= " */\n\n";
        $code .= "require_once('base_$this->type.php');\n\n";
        $code .= "class ". strtolower($this->table) ." extends base_$this->type{\n";
        return $code;
    }

    /**
     * Generate the code for a delete method stub.
     * 
     * @return string The PHP code for the method stub.
     */
    private function get_method_stub_delete(){
        $code  = "\t/**\n";
        $code .= "\t * Override the delete method found in the base class.\n";
        $code .= "\t *\n";
        $code .= "\t * @param mixed \$id The unique record ID to be deleted.\n";
        $code .= "\t *\n";
        $code .= "\t * @return bool TRUE if a record was successfully deleted from the table, FALSE otherwise.\n";
        $code .= "\t */\n";
        $code .= "\tpublic function delete(\$id){\n";
        $code .= "\t\treturn parent::delete(\$id);\n";
        $code .= "\t}\n\n";
        return $code;
    }

    /**
     * Generate the code for an insert method stub.
     * 
     * @return string The PHP code for the method stub.
     */
    private function get_method_stub_insert(){
        $code  = "\t/**\n";
        $code .= "\t * Override the insert method found in the base class.\n";
        $code .= "\t *\n";
        $code .= "\t * @param array \$parms An array of data, probably the \$_POST array.\n";
        $code .= "\t * @param bool \$get_insert_id A flag indicating if we should get the autoincrement value of the record just created.\n";
        $code .= "\t *\n";
        $code .= "\t * @return bool TRUE if a record was successfully inserted into the table, FALSE otherwise.\n";
        $code .= "\t */\n";
        $code .= "\tpublic function insert(\$parms, \$get_insert_id = FALSE){\n";
        $code .= "\t\treturn parent::insert(\$parms, \$get_insert_id);\n";
        $code .= "\t}\n\n";
        return $code;
    }

    /**
     * Generate the code for an update method stub.
     * 
     * @return string The PHP code for the method stub.
     */
    private function get_method_stub_update(){
        $code  = "\t/**\n";
        $code .= "\t * Override the update method found in the base class.\n";
        $code .= "\t *\n";
        $code .= "\t * @param array &\$parms An array of key=>value pairs - most likely the \$_POST array.\n";
        $code .= "\t *\n";
        $code .= "\t * @param integer \$limit The number of records to update. Defaults to NULL.\n";
        $code .= "\t *\n";
        $code .= "\t * @return bool TRUE if a record was successfully updated, FALSE otherwise.\n";
        $code .= "\t */\n";
        $code .= "\tpublic function update(\$parms, \$limit = NULL){\n";
        $code .= "\t\treturn parent::update(\$parms, \$limit);\n";
        $code .= "\t}\n\n";
        return $code;
    }

    /**
     * Create method stubs for create, delete and update.
     * 
     * @return string The PHP code for these stubs.
     */
    private function get_method_stubs(){
        $code = $this->get_method_stub_delete();
        $code .= $this->get_method_stub_insert();
        $code .= $this->get_method_stub_update();
        return $code;
    }

    private function get_properties(){
        $code = '';
        if (count($this->columns)){
            foreach ($this->columns AS $index => $col){
                $code .= "\t/**\n";
                if (NULL !== $col['text']){
                    $code .= "\t * $col[text]\n";
                }else{
                    $code .= "\t * Description\n";
                }
                $code .= "\t * @var ". $col['type'];
                if (NULL !== $col['length']){
                    $code .= " ($col[length]";
                    if (NULL !== $col['decimal']){
                        $code .= ",$col[decimal]";
                    }
                    $code .= ")";
                }
                $code .= "\n\t */\n";
                $temp_name = str_replace('#', '_', $col['name']);
                $code .= "\tpublic \$$temp_name;\n\n";
            }
        }
        return $code;
    }
}
?> 
```

这是一个使用它的简单页面：

```
<?php
/**
 * @license GPLv3 (http://www.gnu.org/licenses/gpl-3.0.html)
 * @version 1.0.0_20130220000000
 */

require_once('db_code_generator.php');

$table_type = array();
$table_type['db2'] = 'DB2/400 (db2)';
$table_type['mssql'] = 'Microsoft SQL Server (mssql)';
$table_type['mysql'] = 'MySQL (mysql)';
$table_type['pgsql'] = 'PostGRESQL (pgsql)';
$table_type['sqlite'] = 'SQLite (sqlite)';

$database = (isset($_POST['database'])) ? $_POST['database'] : 'my_database';
$host = (isset($_POST['host'])) ? $_POST['host'] : 'localhost';
$username = (isset($_POST['username'])) ? $_POST['username'] : 'root';
$password = (isset($_POST['password'])) ? $_POST['password'] : '';
$table = (isset($_POST['table'])) ? $_POST['table'] : '';
$type = (isset($_POST['type'])) ? $_POST['type'] : 'mysql';

$library = (isset($_POST['library'])) ? $_POST['library'] : 'LIBRARY';
$file = (isset($_POST['file'])) ? $_POST['file'] : 'STATES';
//---------------------------------------------------------------------------
?>
<div class="data_input">
    <form action="" method="post">
        <fieldset class="top">
            <legend>Code Generator</legend>
            <label for="host">Hostname or IP:
            <input id="host" maxlength="32" name="host" tabindex="<?php echo $tabindex++; ?>" title="Enter the database host name" type="text" value="<?php echo $host; ?>" />
            </label>
            <br />

            <label for="username">Username:
            <input id="username" maxlength="32" name="username" tabindex="<?php echo $tabindex++; ?>" title="Enter the database username" type="text" value="<?php echo $username; ?>" />
            </label>
            <br />

            <label for="password">Password:
            <input id="password" maxlength="32" name="password" tabindex="<?php echo $tabindex++; ?>" title="Enter the database password" type="password" value="<?php echo $password; ?>" />
            </label>
            <br />

            <label for="type">Type:
            <select id="type" name="type" tabindex="<?php echo $tabindex++; ?>">
                <?php
                foreach ($table_type AS $key=>$value){
                    echo('<option ');
                    if ($key == $type){
                        echo 'selected="selected" ';
                    }
                    echo 'value="'. $key .'">'. $value .'</option>';
                }
                ?>
            </select>
            </label>
            <br />

        </fieldset>

        <fieldset class="top">
            <legend>PostGRESQL/MSSQL/MySQL Parameters</legend>

            <label for="database">Database:
            <input id="database" maxlength="100" name="database" tabindex="<?php echo $tabindex++; ?>" title="Enter the database name" type="text" value="<?php echo $database; ?>" />
            </label>
            <br />

            <label for="table">Table:
            <input id="table" maxlength="100" name="table" tabindex="<?php echo $tabindex++; ?>" title="Enter the table name" type="text" value="<?php echo $table; ?>" />
            </label>
            <br />

        </fieldset>
        <fieldset class="top">
            <legend>DB2 Parameters</legend>

            <label for="library">Library:
            <input id="library" maxlength="10" name="library" tabindex="<?php echo $tabindex++; ?>" title="Enter the library name" type="text" value="<?php echo $library; ?>" />
            </label>
            <br />

            <label for="file">Physical File:
            <input id="file" maxlength="10" name="file" tabindex="<?php echo $tabindex++; ?>" title="Enter the file name" type="text" value="<?php echo $file; ?>" />
            </label>
            <br />

        </fieldset>
        <fieldset class="bottom">
            <button tabindex="<?php echo $tabindex++; ?>" type="submit">Generate!</button>
        </fieldset>
    </form>
</div>
<?php

if (isset($_POST['host'])){
    if ('db2' == $_POST['type']){
        $_POST['database'] = strtoupper($_POST['library']); // Library
        $_POST['table'] = strtoupper($_POST['file']); // Physical file
        $_POST['host'] = 'db2_host';
        $_POST['username'] = 'db2_username';
        $_POST['password'] = 'db2_password';
    }
    $object = new db_code_generator($_POST['database'], $_POST['table'], $_POST['username'], $_POST['password'], $_POST['host'], $_POST['type']);
    echo('<textarea rows="75" style="margin-left : 50px; width : 90%;" onfocus="select()">'. $object->get_code() .'</textarea>');
}
?> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-17T12:57:04.143

我知道您正在寻找一种 ORM 的东西。

希望这可以帮助

[http://www.doctrine-project.org/](http://www.doctrine-project.org/)

[http://propelorm.org/](http://propelorm.org/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-13T22:44:04.400

[symfony](http://www.symfony-project.org/)呢？它完全按照你说的做，并且你得到了一个非常好的框架来配合它。

symfony 根据您提供的数据模型为您“编译”类。它将确保编译的类和 MySQL 数据库结构是同步的。

这种方法优于`Reflection`基于方法的方法，因为它太慢了。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-21T00:07:07.560

对于它的价值，[Rafael Rocha](http://www.phpclasses.org/package/5357-PHP-Generate-code-to-access-MySQL-records-as-objects.html)[在这里](http://www.phpclasses.org/package/5357-PHP-Generate-code-to-access-MySQL-records-as-objects.html)分享代码。

尽管如此，我还是强烈**建议使用 ORM**。将 MySQL 结构转换回数据库抽象层绝非好事……

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-01-17T22:46:56.073

试试这个 [https://github.com/rcarvello/mysqlreflection](https://github.com/rcarvello/mysqlreflection)

我为 MySQL 数据库的对象关系映射构建的一个有用的实用程序。

该实用程序为给定数据库模式的任何表自动生成 PHP 类。

该包是从我个人的 PHP Web MVC 框架中提取的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-20T15:35:26.967

是的，教义就是你所需要的。

1.  **运行命令，您将获得 XML 或 YML 格式的所有表元数据**（由您选择）

    $ php 应用程序/控制台原则：映射：转换 xml ./src/Bundle/Resources/config/doctrine/metadata/orm --from-database --force

2.  生成元数据后，**命令 Doctrine 导入模式以构建您需要的相关实体类。您会在其中找到所有 GET 和 SET 功能**（读取**SELECT**、**UPDATE**和**INSERT**）。

    1.$ php app/console 学说:mapping:import Bundle注解

    2.$ php app/console 学说:generate:entities Bundle

    [在此处阅读示例的详细信息](http://symfony.com/doc/2.0/cookbook/doctrine/reverse_engineering.html)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-20T16:02:36.897

[无脂肪框架](https://github.com/bcosca/fatfree)允许您使用以下代码处理现有表：

```
$user=new DB\SQL\Mapper($db,'users');
// or $user=new DB\Mongo\Mapper($db,'users');
// or $user=new DB\Jig\Mapper($db,'users');
$user->userID='jane';
$user->password=md5('secret');
$user->visits=0;
$user->save(); 
```

*上面的代码在用户*表中创建新记录

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-02-28T08:01:25.933

我编写了一个 PHP 代码，它将自动检测 MYSQL 数据库中的所有数据库，在选择任何一个数据库时，它的所有相关表都会被加载。您可以选择所有表或任何相应的表来生成模态类。

以下是我的仓库的链接

[https://github.com/channaveer/EntityGenerator](https://github.com/channaveer/EntityGenerator)

这将自动创建实体文件夹并将所有实体类转储到该文件夹​​中。

注意 - 目前仅支持 MYSQL

希望能帮助到你。快乐编码！

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-02-21T09:25:17.723

我想你应该在你的身上做出来。在我看来，模型代码的每个项目和要求都是不同的。两个 mysql 查询将使您轻松。

1.  `SHOW TABLES FROM db_NAME //this gives the table listing, so its Master Looper`
2.  `DESC tbl_name //detail query that fetches column information of given table`

`DESC tbl_name`将给出 Field、Type、Null、Key、Default 和 Extra Columns。

例如，在管道 (|) 中分隔的值：

身份证 | 整数(11) | 否 | 优先级 | 空 | 自动增量 |

我按照这些方法在 Codeigniter 2 中制作了支持 CRUD 操作的模型、控制器和查看器文件。它工作得很好。

# objective-c - 覆盖 openAboutPanel：NSDictionary 键/值长度限制？

> ID：10149226
> 
> 赞同：2
> 
> 时间：2012-04-13T22:43:19.543
> 
> 标签：objective-c, macos, cocoa

Apple 提供的此方法中使用的 NSDictionary 中任何值的长度似乎有一个任意（似乎约为 238 个字符）限制，以在 OS X Cocoa 应用程序中以编程方式实现“关于面板”。有没有办法覆盖这个限制？谢谢...

```
- (IBAction)openAboutPanel:(id)sender
{
    NSDictionary *options;
    NSImage *img;

    img = [NSImage imageNamed: @"Picture 1"];
    options = [NSDictionary dictionaryWithObjectsAndKeys:
                @"1.1", @"Version",
                @"Super App", @"ApplicationName",
                img, @"ApplicationIcon",
                @"Copyright 2005-2006, My Great Company", @"Copyright",
                @"Super App v1.1", @"ApplicationVersion",
                nil];

    [[NSApplication sharedApplication] orderFrontStandardAboutPanelWithOptions:options];
} 
```

# python - 虽然循环代码继续运行

> ID：10149229
> 
> 赞同：0
> 
> 时间：2012-04-13T22:43:43.867
> 
> 标签：python, list, while-loop

由于某种原因，这段代码没有打印任何东西，也没有停止运行，有人能告诉我这里出了什么问题吗？

```
l = [1,2]
i = 0
k = l[i]+l[i+1]
while k <= 10:
    l.append(k)
    i += 1

print l 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T22:45:35.333

的值`k`（以及循环条件）在循环之前使用当前值`i`(0) 设置，并且在循环执行期间永远不会更改。您必须`k`根据循环内的新值重新分配`i`它才能更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T22:49:17.440

Python 计算的值`k`不是`k`表达式，而是该表达式的*结果*：

```
k = l[i]+l[i+1]   # In your case it's l[0] + l[1] = 3 
```

您可能想要评估`k`每个循环：

```
l = [1,2]
i = 0

for i in range(0, 10 + 1):
  l.append(l[i] + l[i + 1])

print l 
```

只是为了好玩，一个更 Pythonic 的 Fibonacci 序列生成器（字面意思）：

```
def Fibonacci():
  a, b = 0, 1

  while True:
    yield a

    a += b
    a, b = b, a

for n in Fibonacci():
  raw_input(n) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T22:48:17.000

只需移动其中包含 k 的行：

```
l = [1,2]
i = 0
k = l[i]+l[i+1]
while k <= 10:
    l.append(k)
    i += 1
    k = l[i]+l[i+1]

print l 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T22:45:58.717

您没有对 k 变量进行任何更改。一旦你计算了 K 的值，代码就会在 while 循环中获取库存，因为 k 的值永远不会改变，你只需将 k 的值附加到列表中。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-13T22:46:27.547

不确定python，但看起来你也更新了K的值，不确定python语法中while循环的范围是什么。

# javascript - Javascript/PHP 我可以获取 GPS 位置并将其发送给我吗？

> ID：10149233
> 
> 赞同：-2
> 
> 时间：2012-04-13T22:44:01.993
> 
> 标签：javascript, iphone, security, gps, location

好的，这就是我想要的：

我需要 Javascript 或 PHP 脚本之类的东西来从访问者那里获取 gps 位置，然后偷偷发送给我（我不会用这个坏的，它是用于防止我的 iPhone 被盗的网站）

我希望如果小偷打开网站（我将使用 webclip、命名 Safari 并给出 safari 图标）我会自动获取他的位置并将他重定向到谷歌或其他

所以基本上是这样的：

```
navigator.geolocation.getCurrentPosition(GetLocation);
function GetLocation(location) {
    //Some script that sends the location secretly to me
}
{
    windows.location="http://google.com";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T11:19:46.360

除了未经同意访问私人位置信息的道德问题外，浏览器明确设计为不会无意中披露这一点。这就是为什么系统会要求您授予对尝试访问坐标的 HTML 5 站点的访问权限。

您可以做的最好的事情是使用将 IP 地址解析为物理位置并基于此做出一些假设的服务，尽管这种做法的可靠性充其量只是零星的。

# javascript - 根据父 div 内部剩余空间的大小设置 div 的初始高度

> ID：10149237
> 
> 赞同：1
> 
> 时间：2012-04-13T22:44:26.503
> 
> 标签：javascript

**我有 3 个 div：**

**.main_content、.content_top、.content_bottom**

.main_content 设置为 100% 但 100% 不是浏览器窗口的大小，它在我的页面中间。

.content_top 设置为 60% 的高度。

**我想通过 javascript 将 .content_bottom 的高度设置为 .main_content 内部可用空间的其余部分。**

例如，如果 .main_content 是 800px 高，而 .content_top 是 600px 高，我想将 .content_bottom 设置为 200px。

这是一个简化的例子，我的情况并不像指定 40% 或让浏览器决定那么简单。一方面，.content_top 上当前有 46px 的填充。我在 .content_top 和 .content_bottom 之间做一个分屏界面，拖动一个条来调整两者的大小。这主要是有效的，只是底部有问题。能够将 .content_bottom 设置为特定高度（即 198 像素）将解决我当前的所有问题。很高兴详细说明这个例子，并深入研究一些实际代码，但希望有一种简单的方法来计算这个，并且很难找到一个跨浏览器工作的好例子，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T22:57:01.363

假设您使用的是 vanilla JavaScript（而不是库），我建议：

```
​var cBs = ​document.getElementsByClassName('content_bottom');

for (var i=0,len=cBs.length; i<len; i++){
    var p = cBs[i].parentNode;
    cBs[i].style.height = (parseInt(p.offsetHeight,10) - parseInt(p.getElementsByClassName('content_top')[0].offsetHeight,10)) + 'px';
}​​​​​​​​​​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/yErdx/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T22:46:54.913

简单的 jQuery 解决方案：

```
$("content_bottom").css({"height": $("main_content").height() + $("content_top").height()); 
```

# knockout.js - KnockoutJS 和映射插件使用模板后渲染进行数据更新的特定逻辑

> ID：10149239
> 
> 赞同：0
> 
> 时间：2012-04-13T22:44:51.900
> 
> 标签：knockout.js, knockout-mapping-plugin

这是一个两部分的问题。

首先，我在模板绑定上使用 afterrender 来完成每次模板呈现新数据时的操作。这工作正常......除了它工作得太正常了。除非添加或删除数据，否则它不会触发。

其次，为了解决第一个“问题”，我认为我需要编写自定义“更新”并检测数据是否已更改。这又是有道理的，但是我意识到映射中的更新函数也遵循“仅在添加或删除数据时运行”的想法。

所以我想我需要围绕映射模型的一个特定属性进行更新，例如：

```
var dataMappingOptions = {
    key: function(data) {
        return data.id;        
    },
    create: function(options) {
        return new Person(options.data);
    },
    update: function(options) {
        // if first changed, doSomething();
        return options.target;
    },
    'first': {
        update: function(options) {
            // if first changed, doSomething();
            return options.target.first;
        }
    }   
}; 
```

但这只会变成一团糟，甚至不起作用。

如果你想检查一下，这里是[FIDDLE 。](http://jsfiddle.net/farina/bVPwM/10/)

长话短说，我确定必须有一种方法可以在属性更新时订阅它？我想也许你只需要制作计算出的 observables？我要把这个扔出去，看看[瑞恩](http://www.knockmeout.net/)是否想教我，因为他已经教过很多次了：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T00:17:45.937

您也许可以解释您是否尝试完成一些不同的事情，但这是我将如何处理它：

我会使用手动订阅`firstName`并在那里执行我的操作。`Person`我会在你的构造函数中设置这个订阅。

就像是：

```
var Person = function(data) {
    this.id = data.id;
    this.first = ko.observable(data.first);
    this.last = ko.observable(data.last);
    this.full = ko.computed(function() {
        return this.first() + " " + this.last();
    }, this);    
    this.first.subscribe(function(newValue) {
         alert(this.full() + " had his/her first name changed");
    }, this);        
}; 
```

就像这个样本：http: [//jsfiddle.net/rniemeyer/EDC7q/](http://jsfiddle.net/rniemeyer/EDC7q/)

这足够了吗？当值发生变化时，您希望采取什么类型的操作？

# wpf - 尝试让 WPF 组合框绑定到列表时出现问题

> ID：10149240
> 
> 赞同：0
> 
> 时间：2012-04-13T22:44:54.023
> 
> 标签：wpf, xaml, combobox

我有一个名为 ApplicationUser 的自定义类，它有许多属性。这里重要的是 GivenName 和 Surname。

在窗口的ctor中，我有代码返回一个名为_allUsers的列表。此调用成功，列表中填充了适当数量的 ApplicationUser

所以我然后做类似的事情：

```
_allUsers = CachingLayer.Get<List<ApplicationUser>>("allUserInformation");
cboListOfUsers.DataContext = _allUsers; 
```

和 XAML：

```
 <ComboBox Name="cboListOfUsers" ItemsSource="{Binding}" IsEnabled="{Binding Path = IsChecked, ElementName=rbAssignedTo}">
            <ComboBox.ItemTemplate>
                <DataTemplate>
                    <TextBlock>
                    <TextBlock.Text >
                        <MultiBinding StringFormat=" {0}, {1} ">
                            <Binding Path="Surname" />
                            <Binding Path="GivenName" />
                        </MultiBinding>
                    </TextBlock.Text>
                    </TextBlock>
                </DataTemplate>
            </ComboBox.ItemTemplate>
        </ComboBox> 
```

但是没有快乐（组合框仍然是空的）

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T15:16:22.743

最终为我解决了它的`BindingExpression path error: 'GivenName' property not found on 'object' ''ApplicationUser'`错误消息！

这会让每个人都感到恶心，但是当我准备编辑我的问题以包含一些屏幕截图以证明“*该死的东西确实有一个名为 x 和 y 的属性以及输出窗口到底知道什么！* ”我说我最好检查一下我是否正确地实现了对象 ApplicationUser。

果然我没有，我把我认为的属性作为公共可变字段（！）。我把它们变成了自动道具，然后我最初发布的代码就可以工作了。

我想向所有阅读问题、评论和建议答案的人道歉并感谢他们。我在这里留下这个答案的目的是双重的，以帮助其他可能发现自己处于类似情况的人，并提醒自己，有时如果您看不到树木的树林，那么您可能需要退后一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T13:15:10.637

好的，那么您需要将 DataContext 设置为 Window 顶部的整体代码

```
 DataContext="{Binding RelativeSource={RelativeSource self}}" 
```

使 AllUsers 成为返回 allUsers 的公共属性

绑定到所有用户

```
 ItemsSource="{Binding Path=AllUsers}" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T23:42:08.863

我认为您的问题在于时间问题，这是由您分配 DataContext 的位置引起的。XAML 解析

```
ItemsSource="{Binding}" 
```

在 InitializeComponent() 期间，但您可能会在之后初始化列表，这为时已晚。

当 XAML 得到构建/解析时，comboBox 采用 Binding，但那里什么都没有。解决方法很多：

1.  最简单的方法是在 XAML 中进行：

2.  为什么甚至设置 DataContext，看起来你没有做任何特别的事情，它只是一个列表，而不是一个完整的 ViewModel..

    消除：

    ```
    cboListOfUsers.DataContext = _allUsers; 
    ```

    添加/替换为

    ```
    cboListOfUsers.ItemsSource = _allUsers; 
    ```

3.在InitializeComponent()之前初始化你的_allUsers，然后将它分配给DataContext

还有一个建议 - 在 xaml 中调试您的绑定，添加：

```
ItemsSource="{Binding, diagnostics:PresentationTraceSources.TraceLevel=High}" 
```

检查你的输出窗口，如果你有一个异常，那么我是对的，绑定试图解决，但那里什么都没有......

我认为这应该工作..

另外，看看这篇文章： [为什么 DataContext 和 ItemsSource 不是多余的？](https://stackoverflow.com/q/793340/452941)

# c# - 如何格式化我的 Stream Writer 以写入我的文本文件？

> ID：10149250
> 
> 赞同：0
> 
> 时间：2012-04-13T22:46:02.230
> 
> 标签：c#, asp.net, forms, stream

文本文件用于描述网络浏览器上的游戏状态。所以我需要格式化我的 nameWriter.WriteLine 看起来像。

```
Output to text file:
playerOneName, playerTwoName, _ , _ , _ , _ , _ , _ , _ , _ 
```

我知道这听起来可能像“哦，就这样写吧！” 但是不，下划线是一个空字段，将由我的 StreamWriter 替换，它跟踪玩家在井字游戏中的移动。我可以使用什么来代替下划线来使该空间可用于我的读写？

这是我的 StreamWriter，现在我只有添加播放器名称。

### 你能告诉我如何将输出格式化为文本吗？

也许将它分成一个数组？并使用数组 DelimiterList 来键入逗号？

```
 string[] lineParts... and reference the linePart[0-11] 
and then do a lineParts = line.Split(delimiterList)? 
```

这是我的编写代码。

```
private void WriteGame(string playerOneName, string playerTwoName, string[] cells)
    {
        StreamWriter gameStateWriter = null;
        StringBuilder sb = new StringBuilder();
        try
        {
            gameStateWriter = new StreamWriter(filepath, true);
            gameStateWriter.WriteLine(playerOneName + " , " + playerTwoName);
            string[] gameState = { playerOneName, 
            playerTwoName, null, null, null, null, 
    null, null, null, null, null };//I cannot use null, they will give me errors
            foreach (string GameState in gameState)
            {
                sb.Append(GameState);
                sb.Append(",");
            }
            gameStateWriter.WriteLine(sb.ToString());
        }
        catch (Exception ex)
        {
            txtOutcome.Text = "The following problem ocurred when writing to the file:\n"
               + ex.Message;
        }
        finally
        {
            if (gameStateWriter != null)
                gameStateWriter.Close();
        }
    } 
```

**最后，如果 playerOneName 已经在文本文件中，我该如何在它之后专门写 playerTwoName 并检查它是否存在？**

使用 Visual Studio '08 ASP.NET 网站和表单

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T22:59:05.230

首先，定义下划线是一个特殊的东西，对你来说是空的，逗号是你的分隔符：

```
const string EMPTY = "_";
const string DELIMITER = ","; 
```

其次，不要在逗号和值之间写空格，这只会让你以后的生活更加困难：

```
// removed spaces
gameStateWriter.WriteLine(playerOneName + DELIMITER + playerTwoName); 
```

现在您的 GameState 已准备好创建：

```
string[] gameState = { playerOneName, playerTwoName, EMPTY, EMPTY, EMPTY, EMPTY, 
                       EMPTY, EMPTY, EMPTY, EMPTY, EMPTY,  }; 
```

要检查玩家二是否已经存在，您需要打开并读取现有文件，并检查第二个令牌是否不为空。也就是说，如果您已阅读该文件；

```
var line = "..."; // read the file until the line that .StartsWith(playerOne)
var playerTwo = line.Split(DELIMITER)[1];

if (playerTwo == EMPTY)
{
     // need to store the real playerTwo, otherwise leave as is
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T23:33:01.557

您可以保留您的代码，但不要保留`sb.Append(GameState);`在`sb.Append(GameState??"_");`当前代码中。

“？？” 是C# 中的[空合并运算符](http://msdn.microsoft.com/en-us/library/ms173224.aspx)- 所以结果`null ?? "_"`是“_”并且`"SomeValue"??"_"`是“SomeValue”。

# java - 为什么 TomEE Java EE6 获得认证而 TomEE+ 没有获得认证？

> ID：10149256
> 
> 赞同：6
> 
> 时间：2012-04-13T22:46:42.413
> 
> 标签：java, tomcat7, apache-tomee

正如标题所说。我对 Java EE6 认证的内部工作了解不多。但是，TomEE+ 似乎只是 TomEE 的超集，那么 TomEE+ 不应该也通过 Java EE6 认证吗？

我们刚刚决定为我们内部开发的管理应用程序构建 Tomcat（相对于不使用 Glassfish 中的很多功能），并且对 TomEE+ 非常感兴趣，因为它几乎拥有我们想要的一切。

仅供参考，我们最初只是查看 Tomcat7，并安装 Jersey 和 Hibernate。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T23:09:22.533

长话短说，适用于所包含功能的整套 TCK 测试必须通过 TCK 才能被标记为“认证”。

TomEE+ 通过了与 TomEE 通过相同的测试（实际上更是如此），但由于它包含更多的东西并且并非所有的东西都通过了各自的测试，因此 TomEE+ 没有通过认证。

我们实际上只有一个发行版，只是简单的“TomEE”，但对于认证要求，它变成了两个，TomEE（现在精简版）和 TomEE+（原始版）。

TomEE+ 实际上通过了 JAX-RS TCK，我们每天都运行这些测试。为了获得包含 JAX-RS 的经过认证的二进制文件，我们必须创建第三个 TomEE 发行版，即 Web Profile + JAX-RS，或者只是将 JAX-RS 添加到普通的 TomEE 二进制文件中。我们在 JCP 级别将 JAX-RS 添加到 JavaEE 7 中的 Web Profile 中，因此将 JAX-RS 添加到普通 TomEE 只是时间问题。

目前，我们只是试图将 1.0.0 推出门外——实际上休息一下，来检查一下 stackoverflow :) 深入扫描代码，需要休息一下 :) 即将到来的 1.0。 0 的部署速度已经比发布的 beta-2 快了 20%，但经过这一轮的黑客攻击，它应该会快得多。在完成之前我不敢说多少钱，但到目前为止看起来真的很棒。

不管怎样，试试 TomEE+。如果出于某种原因您觉得自己将所有部件组合在一起还有更多好处，请务必告诉我们，我们会想办法解决的。我们的整个交易都是成功的，所以您不必再自己做这件事了。所以如果上面的东西不太适合你，我们会做一些适合你的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T17:54:43.697

openejb 战争的名称已更改为 tomee，而且 dropin-war 部分的下载页面似乎没有更新。

这些站点将链接到适当的镜像，或者对于任何下载链接，将文本“openejb-tomcat”替换为“tomee”，它们应该可以工作。

[http://www.apache.org/dyn/closer.cgi/openejb/4.0.0-beta-2/tomee-plus-webapp-4.0.0-beta-2.war](http://www.apache.org/dyn/closer.cgi/openejb/4.0.0-beta-2/tomee-plus-webapp-4.0.0-beta-2.war) http://www.apache.org /dyn/closer.cgi/openejb/4.0.0-beta-2/tomee-webapp-4.0.0-beta-2.war

我会让 TomEE 的人知道...

# javascript - 在 Ajax 成功时强制下载 .mp3 或 .zip 文件

> ID：10149260
> 
> 赞同：4
> 
> 时间：2012-04-13T22:47:03.883
> 
> 标签：javascript, jquery, download

用户填写电子邮件验证表（通过 AJAX 提交）后，如果 AJAX 调用响应成功，我想强制在当前浏览器窗口中开始下载。

电子邮件验证表如下所示：

```
<form id="form_download_email" method="POST" action="music_email_verification.php">
    <input id="download_email" type="text" tabindex="1" /> <br/>
    <a href="javascript:void(0);" id="download_email_button">
        Download!
    </a>
</form> 
```

单击“download_email_button”后的 js/jquery 如下所示：

```
$("#download_email_button").click(function() {

    var action = $("#form_download_email").attr('action');
    var form_data = {email: $("#download_email").val()};

    $.ajax({
        type: "POST",
        url: action,
        data: form_data,
        success: function(response){
            if(response == 'success'){    
                window.location.assign('URL to .mp3 or ZIP');
            }
        }
    });
}); 
```

输入了 response=='success' 块，现在我发现的唯一解决方案是使用 window .location.assign 如上所示。这是通过JS强制下载文件的正确方法吗？

但是，使用 window.location.assign 方法我只能下载 1 个文件，如果我尝试用两个 mp3 放入两行，它就不起作用。又名：

```
window.location.assign('http://song1.mp3');
window.location.assign('http://song2.mp3'); 
```

我不希望用户在提交表单后必须单击另一个链接才能下载 .mp3/.zip，我想尝试在 JS/jQuery 中完成所有操作。

我想到的最后一个方法是在 response=='success' 上让浏览器点击文档上的两个隐藏标签，这些标签的 href 指向 mp3。但是，似乎“问题是您无法通过单击触发链接的默认操作”与 jquery，只是 onclick 属性。

我应该用js做这个吗？如果没有办法做到这一点，我应该尝试 PHP 之类的东西吗？

任何关于我目前的做法的建议或关于如何下载多个 mp3 文件的建议都会有所帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T01:43:04.387

为每个 url 创建一个 iframe 以下载并将 iframe 的源设置为 files url :)

```
var 
    urls = ['url_1.mp3', 'url_2.mp3', /* ... , */ 'url_N.mp3'],

    doLoad = function(url){
        $("<iframe />")
            .css("display", "none")
            .bind("load", function(e){
                this.src == url && $(this).remove();
            })
            .attr("src", url)
            .appendTo($(document.body));
    };

for( var i=0; i < urls.length; i++ ) {
    doLoad( urls[i] );
} 
```

# python - 在 Python 中提取文件路径（一个目录）的一部分

> ID：10149263
> 
> 赞同：210
> 
> 时间：2012-04-13T22:48:00.680
> 
> 标签：python, directory, filepath

我需要提取某个路径的父目录的名称。这是它的样子：

```
C:\stuff\directory_i_need\subdir\file.jpg 
```

我想提取`directory_i_need`.

* * *

## 回答 #1

> 赞同：289
> 
> 时间：2012-04-13T23:01:11.660

```
import os
## first file in current dir (with full path)
file = os.path.join(os.getcwd(), os.listdir(os.getcwd())[0])
file
os.path.dirname(file) ## directory of file
os.path.dirname(os.path.dirname(file)) ## directory of directory of file
... 
```

您可以根据需要继续执行此操作多次...

**编辑：**从[os.path](http://docs.python.org/library/os.path.html)，您可以使用 os.path.split 或 os.path.basename：

```
dir = os.path.dirname(os.path.dirname(file)) ## dir of dir of file
## once you're at the directory level you want, with the desired directory as the final path node:
dirname1 = os.path.basename(dir) 
dirname2 = os.path.split(dir)[1] ## if you look at the documentation, this is exactly what os.path.basename does. 
```

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2016-01-19T10:37:36.857

对于 Python 3.4+，请尝试以下[`pathlib`模块](https://www.python.org/dev/peps/pep-0428/)：

```
>>> from pathlib import Path

>>> p = Path('C:\\Program Files\\Internet Explorer\\iexplore.exe')

>>> str(p.parent)
'C:\\Program Files\\Internet Explorer'

>>> p.name
'iexplore.exe'

>>> p.suffix
'.exe'

>>> p.parts
('C:\\', 'Program Files', 'Internet Explorer', 'iexplore.exe')

>>> p.relative_to('C:\\Program Files')
WindowsPath('Internet Explorer/iexplore.exe')

>>> p.exists()
True 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2019-05-31T10:45:49.110

如果`parent`您使用[`pathlib`](https://docs.python.org/3/library/pathlib.html).

```
from pathlib import Path
p = Path(r'C:\Program Files\Internet Explorer\iexplore.exe')
print(p.parent) 
```

将输出：

```
C:\Program Files\Internet Explorer 
```

如果您需要所有部分（已在其他答案中介绍），请使用`parts`：

```
p = Path(r'C:\Program Files\Internet Explorer\iexplore.exe')
print(p.parts) 
```

然后你会得到一个列表：

```
('C:\\', 'Program Files', 'Internet Explorer', 'iexplore.exe') 
```

节省时间。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-13T23:00:33.297

首先，看看您是否`splitunc()`在`os.path`. `os`返回的第一个项目应该是你想要的......但是我在Linux上，当我导入并尝试使用它时我没有这个功能。

否则，完成工作的一种半丑陋的方法是使用：

```
>>> pathname = "\\C:\\mystuff\\project\\file.py"
>>> pathname
'\\C:\\mystuff\\project\\file.py'
>>> print pathname
\C:\mystuff\project\file.py
>>> "\\".join(pathname.split('\\')[:-2])
'\\C:\\mystuff'
>>> "\\".join(pathname.split('\\')[:-1])
'\\C:\\mystuff\\project' 
```

它显示检索文件正上方的目录，以及正上方的目录。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-02-07T15:37:19.190

```
import os

directory = os.path.abspath('\\') # root directory
print(directory) # e.g. 'C:\'

directory = os.path.abspath('.') # current directory
print(directory) # e.g. 'C:\Users\User\Desktop'

parent_directory, directory_name = os.path.split(directory)
print(directory_name) # e.g. 'Desktop'
parent_parent_directory, parent_directory_name = os.path.split(parent_directory)
print(parent_directory_name) # e.g. 'User' 
```

这也应该可以解决问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-16T17:14:59.217

这就是我提取目录部分所做的：

```
for path in file_list:
  directories = path.rsplit('\\')
  directories.reverse()
  line_replace_add_directory = line_replace+directories[2] 
```

感谢您的帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-13T22:54:36.280

您必须将整个路径作为 os.path.split 的参数。请参阅[文档](http://docs.python.org/library/os.path.html#os.path.split)。它不像字符串拆分那样工作。

# c++ - “未定义的引用”

> ID：10149269
> 
> 赞同：0
> 
> 时间：2012-04-13T22:48:49.343
> 
> 标签：c++, compiler-errors

我知道有很多与此相关的问题，但它们的答案对我来说有点难以理解。对于几行不同的代码，我收到以下错误：

```
C:\Users\Jeff\AppData\Local\Temp\ccAixtmT.o:football.cpp:(.text+0x6f0): undefined 
reference to `Player::set_values(int, std::string, float)' 
```

从这些代码块：

```
class Player {
int playerNum;
string playerPos;
float playerRank;
public:
    void set_values(int, string, float);
    float get_rank(){ return playerRank; };
    bool operator == (const Player &p1/*, const Player &p2*/) const
    {
    if(&p1.playerNum == &playerNum &&
       &p1.playerPos == &playerPos &&
       &p1.playerRank == &playerRank)
       return true;
    else
       return false; };
}; 
```

这是引用子类的主要函数：

```
int main() {

ifstream infile;
infile.open ("input.txt", ifstream::in);
int numTeams;
string command;
while(!infile.fail() && !infile.eof()){
    infile >> numTeams;
    string name;
    Player p;
    int playNum;
    string playPos;
    float playRank;
    Player all[11];
    float ranks[11];
    Team allTeams[numTeams];
    for(int i=0; i<numTeams; i++){
        infile >> name;
        for(int j=0; j<11; j++){
            infile >> playNum;
            infile >> playPos;
            infile >> playRank;
            if(playPos == "QB")
                p.set_values(playNum, playPos, (playRank*2.0));
            else if(playPos == "RB")
                p.set_values(playNum, playPos, (playRank*1.5));
            else if(playPos == "WR")
                p.set_values(playNum, playPos, (playRank/1.8));
            else if(playPos == "TE")
                p.set_values(playNum, playPos, (playRank*1.1));
            else if(playPos == "GD")
                p.set_values(playNum, playPos, (playRank/2.0));
            else if(playPos == "TC")
                p.set_values(playNum, playPos, (playRank/2.2));
            else if(playPos == "CR")
                p.set_values(playNum, playPos, (playRank/1.2));
            all[j] = p;
            allTeams[i].set_values(all, name);
        }
    }
    infile >> command;
    if (command == "play"){ 
        int t1;
        int t2;
        infile >> t1;
        infile >> t2;
        play(allTeams[t1], allTeams[t2]); 
    }
    else { 
        int t1;
        int p1;
        int t2;
        int p2;
        swap(allTeams[t1], allTeams[t1].get_player(p1), allTeams[t2], allTeams[t2].get_player(p2)); }
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T22:51:41.303

您`set_values`在课堂上声明，但从未像其他人那样为它提供正文。当您调用该函数时，没有什么可以执行！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T22:52:39.150

好吧，这里有几个错误，但关于你的问题，这里是 set_value 应该如何实现：

```
 void set_values(int playerNumParam, string playerPosParam, float playerRankParam){
     playerNum = playerNumParam;
     playerPos = playerPosParam;
     playerRank = playerRankParam;
} 
```

请参阅此链接：[构造函数和析构函数](http://www.fredosaurus.com/notes-cpp/oop-condestructors/constructors.html)

此外，为了获得良好的实践，最好通过以下划线结尾来命名您的类成员变量

```
playerNum_
playerPos_
playerRank_ 
```

希望它有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T23:07:50.203

无法找到函数的几种不同可能原因。

一，您在另一个 c++ 文件中声明了该类，这意味着当前的 c++ 文件在您声明的 main.c++ 文件中找不到它。此问题的可能解决方案是将类及其函数声明在与 main.xml 相同的文件中。

第二，您实际上并没有实现/声明函数 setvalues。可能的解决方案是在类内实现 setvalues 或在类外实现它。

第三，您在命名空间中声明了函数和类，但没有限定函数。

如果您需要示例，请告诉我。

# iphone - 如何检测 iAd 何时被关闭？

> ID：10149273
> 
> 赞同：1
> 
> 时间：2012-04-13T22:49:24.347
> 
> 标签：iphone, ios, iad

新手iOS程序员在这里，如果我无法在我面前看到答案，请提前道歉。:)

我刚刚将 iAd 添加到我的示例应用程序中。我遇到了一个问题，当用户关闭广告时，我在点击广告之前显示的数字键盘不会重新出现。我需要在广告被关闭后显示小键盘。您能否解释一下如何捕获广告关闭事件以便重新显示小键盘？我一直无法找到解决这个简单问题的方法。

我的应用程序非常简单，旨在教我 iOS 编程。这是一个每小时英里数和每小时公里数之间的速度转换器应用程序。对于这些数据中的每一个，我都有两个字段。我一直都显示小键盘并且效果很好，直到我放入 iAds。

我注意到当我点击广告时，小键盘在显示更大的添加之前被关闭。然后当更大的广告被关闭时，我返回到之前的屏幕，但不显示小键盘。当我点击英里或公里字段时，我可以让小键盘重新出现。

在 viewDidLoad 上，我最初将小键盘显示为 [mile becomeFirstResponder]。“英里”是每小时英里数字段的名称。如果我知道如何捕捉用户点击广告以将其关闭，然后我可以重新发出命令：[mile becomeFirstResponder] 以显示小键盘。

我希望您了解我的情况以及我想要完成的工作。也许我的问题在不同的领域。还有另一种更简单的方法可以让键盘始终显示吗？

我正在使用 Xcode 4.2。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T00:08:45.090

查看 ADBannerViewDelegate 及其属性：

```
-(void) bannerViewActionDidFinish:(ADBannerView *)banner 
```

[http://developer.apple.com/library/ios/DOCUMENTATION/UserExperience/Reference/ADBannerViewDelegate_Ref/Reference/Reference.html#//apple_ref/occ/intfm/ADBannerViewDelegate/bannerViewActionDidFinish](http://developer.apple.com/library/ios/DOCUMENTATION/UserExperience/Reference/ADBannerViewDelegate_Ref/Reference/Reference.html#//apple_ref/occ/intfm/ADBannerViewDelegate/bannerViewActionDidFinish)：

# javascript - Javascript来确定我在哪个页面

> ID：10149274
> 
> 赞同：0
> 
> 时间：2012-04-13T22:49:30.077
> 
> 标签：javascript

所以我有一个显示在每个页面上的图像，但是我想编写一个脚本，根据页面将图像替换为另一个图像。我将如何以编程方式确定我在哪个页面上？我已经可以进行实际的图像替换。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T22:50:28.313

你可以使用`location`

```
<script type="text/javascript">
   alert(window.location);
   // and you can set the location to move to another page
   window.location = "http://stackoverflow.com"
</script> 
```

# c# - 将自定义类型发送到 wcf 服务

> ID：10149278
> 
> 赞同：1
> 
> 时间：2012-04-13T22:49:41.913
> 
> 标签：c#, wcf

我需要将未知类型从我的客户端传递给 wcf 服务，

服务不知道该类型。

例如，我有一个类 Customer，我创建了一个序列化实例并将其发送到服务，当我需要反序列化时，问题就出现了，我必须提供类型才能将反序列化的对象转换为。

类型无法序列化，尝试时出现以下错误：

```
{"Type 'System.RuntimeType' with data contract name 
 'RuntimeType:http://schemas.datacontract.org/2004/07/System' is not expected. Consider 
  using a DataContractResolver or add any types not known statically to the list of 
  known types - for example, by using the KnownTypeAttribute attribute or by adding 
  them to the list of known types passed to DataContractSerializer."} 
```

我需要找到解决这个问题的方法，有什么想法吗？

总结一下：

我正在寻找一种将未知类型发送到 WCF 服务的解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T23:14:03.887

如果另一端对此一无所知（评论），那么您可能无法反序列化。即使使用基于类型的序列化程序（BinaryFormatter/NetDataContractSerializer），您也无法做到这一点。

如果您要发送完全外国的数据，那么您基本上仅限于 XML 或 JSON 之类的东西，即使这样，含义也有些模糊（是`<id>123<id>`字符串？int？float？long？）。

WCF 不太适合您的方案（大多数其他基于合同的堆栈也不适合；大多数系统都希望能够理解传入的数据）。

# ios - VPN 阻止传入读取 CFReadStreamRef iOS

> ID：10149290
> 
> 赞同：1
> 
> 时间：2012-04-13T22:51:25.970
> 
> 标签：ios, vpn, cfreadstream

CFReadStreamRef 用于 CFStream 连接到 websocket。

属性集：

// 确保关闭流时关闭 CF 和 BSD 套接字。CFReadStreamSetProperty(theReadStream, kCFStreamPropertyShouldCloseNativeSocket, kCFBooleanTrue);

// 所以当应用程序在后台时处理来自流的消息 CFReadStreamSetProperty(theReadStream, kCFStreamNetworkServiceType, kCFStreamNetworkServiceTypeVoIP);

需要应用程序在后台处理传入的消息。

在 wifi 上我没有问题...连接已建立，当应用程序在后台时，任何传入的消息都会立即被读取和处理。

当通过 VPN 连接到同一网络时，会建立连接，但任何传入的消息都会排队，直到应用程序返回前台。

我试图找出原因。这是我可以在代码中修复的流设置问题还是 VPN 设置的问题？

# asp.net - 从 xml 文件中选择多个元素，并在多个标签中显示

> ID：10149291
> 
> 赞同：1
> 
> 时间：2012-04-13T22:51:33.240
> 
> 标签：asp.net

我需要从 xml 文件中选择多个元素的帮助。我目前只知道如何选择一个，并且试图找出不止一个正在伤害我微不足道的kopri。谢谢你的时间。

```
Imports System.Xml

Partial Class ex01_Default
    Inherits System.Web.UI.Page

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        'instantiate a reader'
        Dim reader As New XmlTextReader(Server.MapPath("~/ex01/docP.xml"))
        'declare variable to record when a <name> element is found'
        Dim bName As Boolean = False
        'iterate through all of the nodes in the XML document'
        While reader.Read()
            'look at the node type of each node'
            Select Case reader.NodeType
                'if node is a <name> element, remember it'
                Case XmlNodeType.Element
                    If reader.Name = "title" Then
                        bName = True
                    End If

                    'if node is text & previous node was <name>, add it to Label'
                Case XmlNodeType.Text
                    If bName Then
                        lblDisplayXml.Text &= reader.ReadString & "<br/>"
                        bName = False

                    End If
            End Select
        End While
    End Sub
End Class 
```

xml文件：

```
<book_club>
  <book>
    <isbn>0-13-129014-2</isbn>
    <title>JAVA How to Program (6th Ed)</title>
    <author>PJ &amp; HM Deitel</author>
    <price>£39.99</price>
  </book>
  <book>
    <isbn>0-67-232238-2</isbn>
    <title>Teach Yourself UML</title>
    <author>J Schmuller</author>
    <price>£9.99</price>
  </book>
  <book>
    <isbn>0-27-365575-2</isbn>
    <title>Practical Business Systems Development using SSADM</title>
    <author>P Weaver, N Lambrou &amp; M Walkley</author>
    <price>£34.99</price>
  </book>
  <book>
    <isbn>0-67-232422-9</isbn>
    <title>XML Primer Plus</title>
    <author>N Chase</author>
    <price>£32.99</price>
  </book>
  <book>
    <isbn>0-78-972476-6</isbn>
    <title>XML and Java from Scratch</title>
    <author>N Chase</author>
    <price>£19.99</price>
  </book>
  <book>
    <isbn>1234567890</isbn>
    <title>ASP.NET for Dummies</title>
    <author>RUA Dummy</author>
    <price>free!!</price>
  </book>
</book_club> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T23:45:45.363

我对VB不太了解，因为我使用C#。我使用了 LinQ，因为它提供了一种使用 XDocument 类读取 XML 的新方法。这是我从字符串中读取的内容：

返回 IEnumerable() 的方法

```
XDocument doc = XDocument.Parse(myString);
            var query= from x in doc.Descendants("Book")
                            select new Location
                            {
                                ISBN= Double.Parse(
                                    x.Descendants("isbn").First().Value),
                                Author= Double.Parse(
                                    x.Descendants("author").First().Value) ......
                            };

            return query; 
```

* * *

为书创建一个类

公共类图书{公共图书（）{}

```
public string Author {
    get; set; 
}
..... 
```

}

# emacs - 如何使计划和截止日期的待办事项仅在 emacs org-mode 的议程视图中显示一次

> ID：10149294
> 
> 赞同：9
> 
> 时间：2012-04-13T22:51:45.403
> 
> 标签：emacs, lisp, elisp, org-mode

在 org 模式下，如果您创建一个待办事项，并首先为其分配一个截止日期，可能提前一周，然后几天后，开始安排它，计划的待办事项和最后期限的待办事项都会出现在我的议程中。如何摆脱 DEADLINE 项目？它使我的议程视图混乱。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-14T00:54:38.980

在提交`8d6aa8f3`(2010-02-17) 中引入了一个特定的变量。这应该把它放在版本 6.35 左右。

> org-agenda-skip-deadline-prewarning-if-scheduled 是在“org-agenda.el”中定义的变量。它的值为 nil
> 
> 文档：非零意味着当条目也被安排时跳过截止日期预警。这将适用于所有显示截止日期预警的日子，但不适用于实际应提交的日期。在那一天，无论如何都会显示截止日期。该变量可以设置为 nil、t 或一个数字，该数字将给出实际截止日期之前应恢复预警的天数。这可以用于第一次显示截止日期将触发您安排它的工作流程，然后您不希望被提醒它，因为您将在安排的那天处理它。
> 
> 您可以自定义此变量。

我无法在手册中找到它，但`M-x apropos RET org-agenda-skip-`确实列出了它以及提供类似过滤的其他变量。

# gwt - 使用 GWT 的强度图

> ID：10149298
> 
> 赞同：0
> 
> 时间：2012-04-13T22:52:22.787
> 
> 标签：gwt, google-maps-api-3, gwt-visualization

谷歌有一个用于 GWT gwt-visualization 的库（可以在[这里](http://code.google.com/p/gwt-google-apis/wiki/Downloads?tm=2)获得）。我试图找到一个关于如何绘制强度热（[IntensityMap](http://gwt-google-apis.googlecode.com/svn/javadoc/visualization/1.1/com/google/gwt/visualization/client/visualizations/IntensityMap.html)）图的示例，但找不到任何东西。我想要实现的是创建一个城市地图和城市上空的强度圈。类似于下面的[示例](https://developers.google.com/chart/interactive/docs/gallery/geochart#markersexample)图像。

![强度图](../Images/e31b64315cf16aaad2c9e29323ee1786.png)

所以，我的问题是如何使用 GWT 使用 gwt-visualization 库制作这样的地图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T08:58:17.137

在您的屏幕截图`GeoChart`中使用 a 而不是`IntensitiyMap`. 因此，如果您使用`IntensityMap`from gwt-visualization ，它将看起来像[这样](https://developers.google.com/chart/interactive/docs/gallery/intensitymap)，而不是像您发布的屏幕截图那样。不幸的是，gwt-visualization 中没有“GeoChart”包装器（旧的 GeoMap 只有一个[）](https://developers.google.com/chart/interactive/docs/gallery/geomap)。

为现有的谷歌图表实现包装器非常容易（有关更多详细信息，请参见[此处](http://code.google.com/p/gwt-google-apis/wiki/VisualizationNewWrapper)）。您可以以现有的包装器为例并对其进行修改。

我为“GeoChart”创建了一个[包装器](https://github.com/timeu/maven-repos/tree/master/releases/at/gmi/nordborglab/widgets/geochart/0.1.2)，因为我的一个项目需要一个包装器。您可以使用它，也可以根据需要对其进行修改。

# html - Sencha Touch 在导航栏中水平居中搜索字段

> ID：10149304
> 
> 赞同：1
> 
> 时间：2012-04-13T22:53:13.093
> 
> 标签：html, model-view-controller, sencha-touch

这个问题非常愚蠢，我可能偶然发现了一个错误，但我需要将我的搜索字段集中在 Sencha Touch 的导航栏中，但我无法让它工作。这是我的代码：

```
Ext.define('Myapp.view.MyNav', {
extend: 'Ext.navigation.View',

xtype: 'mynav',

requires: [
    'Ext.field.Search', 'Ext.Button'
],

config: {
    fullscreen: true,
        navigationBar: {
            items: [
                {
                    xtype: 'searchfield',
                    placeHolder: 'Search...',
                    listeners: {
                        keyup: function(field) {

                        }
                    },
                    align: 'right'
                }
            ]
        },

    items: [ 
        {
            title: 'MyNav',
            xtype: 'list',
            fullscreen: true,
            grouped: true,

            store: {
                fields: ['name', 'html'],
                sorters: 'name',
                data: [
                    {name: 'Alfa', html: '<p>alfa</p>'},
                    {name: 'Beta', html: '<p>beta</p>'},
                    {name: 'Gamma', html: '<p>gamma</p>'},
                    {name: 'Mupp', html: '<p>mupp</p>'},
                    {name: 'Tupp', html: '<p>tupp</p>'}
                ],
                grouper: {
                groupFn: function(record) {
                    return record.get('name')[0];
                },
                indexBar: true
            },
            },

            listeners: {
                select: function(view, record) {
                    var test = Ext.create('Ext.Panel', {                        fullscreen: true,
                        title: record.get('name'),
                        layout: {
                            type:'vbox'
                        },
                        items: [
                            {
                                xtype: 'panel',
                                html: record.get('html')
                            }
                        ]
                    });

                    var mainnav = Ext.ComponentQuery.query('bookmarksmainnav')[0];
                    mainnav.setActiveItem(test);
                }
            },

            itemTpl: '{name}'
        }
    ]
}

}); 
```

专注于实际的导航栏，其他东西只是粘贴代码（我对其进行了一些修改），但我很确定这是一个错误。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T18:13:31.393

您可以尝试使用停靠在页面底部的工具栏，其中搜索字段居中，我不知道为什么，但导航栏忽略了居中属性。

像这样的东西：

```
config: {
    fullscreen: true,
    navigationBar: {

    },

    items: [ 
        {
            xtype: 'toolbar',
            docked: 'bottom',
            items: [
                {
                    xtype: 'searchfield',
                    placeHolder: 'Search...',
                    listeners: {
                        keyup: function(field) {

                        }
                    },
                    centered: true
                }
            ],
        },
        {
            title: 'MyNav',
            xtype: 'list', 
```

如果您需要屏幕顶部的搜索字段，您可以尝试隐藏导航栏`hidden: true`并更改`docked`工具栏中的属性。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T00:03:50.360

一个更好的答案（对我来说）只是将您添加到导航栏中的任何内容居中，是：

```
this.getNavigationBar().leftBox.setCentered(true); 
```

不过，您可能希望管理每个页面的导航栏的居中性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T00:17:03.383

我用了

```
layout: {
    align: 'center',
    pack: 'center',
    type: 'hbox'
} 
```

这将在停靠的下方：'bottom'，行是上面的示例。

问候

杰克

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-29T17:48:11.020

每当我发现难以将所需字段居中时，我只需在前后添加一个垫片，再加上我想要居中的项目的 flex，它永远不会失败。在这种情况下：

```
 items: [
            {
                xtype: 'spacer',
            },
            {
                xtype: 'searchfield',
                placeHolder: 'Search...',
                listeners: {
                    keyup: function(field) {

                    }
               flex: 0.7

             },
            {
                xtype: 'spacer',
            }, 
```

# xcode - 在 Xcode 4.3.1 的图标编辑器中找不到大小 57 x 57？

> ID：10149317
> 
> 赞同：0
> 
> 时间：2012-04-13T22:55:04.733
> 
> 标签：xcode, icons

这是我第一次使用图标作曲家，我完全迷路了。我从 Xcode 应用程序 -> 打开开发者工具中得到它。

有 256、48、32、24、16 的大小窗口。但我找不到 57，这是我的应用程序需要的！请帮忙~~~~！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T23:18:21.120

57x57 不会出现在 Icon Composer 中。此分辨率适用于非视网膜 iPhone 图标，而 Icon Composer 用于为 OS X 应用程序制作`.ICNS`和文件。`.ICO`

# java - 为什么 jList 中的 selectedIndex 大于集合大小？

> ID：10149322
> 
> 赞同：0
> 
> 时间：2012-04-13T22:55:40.037
> 
> 标签：java, swing, selection, jlist, indexoutofboundsexception

我正忙于 Java 中的 GUI 应用程序，当将值添加到 jList 时，有时会遇到 IndexOutOfBoundsExceptions。

选中值时似乎发生异常，然后添加另一个。我有一个选择更改的侦听器，因为当用户选择索引时需要发生一些事情，但是当添加新值时也会触发此事件。我使用一个自定义`ListModel`，它只是以一种完全有效的方式扩展`AbstractListModel`和覆盖必要的方法。

1.  为什么将值添加到列表中时程序中的选择会发生变化？这在视觉上没有表现出来。
2.  为什么 jList 允许选择实际上并不存在的索引？

我现在已经使用了两次 jList（我们最近开始在学校做 GUI），两次都遇到了问题。我第一次通过在添加值之前清除选择来解决它，但这不是一个很好的解决方案。我不认为这应该是必要的。

我不知道为什么会这样，我没有奇怪的代码或任何东西。在伪代码中，会发生以下情况：

```
listmodel.addValue(object);
listmodel.fireIntervalAdded();
//selection event occurs
selectedObject = listmodel.getValueAt(list.getSelectedIndex()); //indexoutofboundsexception
//index = 5, size = 3 (for example) when there are 2 objects in list and first is selected. 
```

我现在不提供更多代码，因为我认为它并不真正相关。我认为任何完全理解 jList、它的 listmodel 和它的 selectionmodel 工作原理的人都会明白哪里出了问题。对此的任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T23:15:16.700

问题很可能是您在将**单个**项目添加到列表模型`fireIntervalAdded(this, 0, list.size())`时调用的。[签名](http://docs.oracle.com/javase/6/docs/api/javax/swing/AbstractListModel.html#fireIntervalAdded%28java.lang.Object,%20int,%20int%29)是：

 **```
protected void fireIntervalAdded(Object source, int index0, int index1) 
```

请注意，这`index0`是添加项目的起始索引，`index1`是结束索引。因此对于单个项目`index0`应该是相同的`index1`。当您使用 调用`fireIntervalAdded`时`0, list.size()`，您是在告诉 JList 已添加 N 个项目，其中 N= `list.size()`。因此，`JList`认为有比您的列表模型中更多的项目。

删除项目时也是如此。**

# sap-ase - 在 sybase 中，我需要将行值转换为 varchar 类型的单列

> ID：10149328
> 
> 赞同：1
> 
> 时间：2012-04-13T22:56:01.737
> 
> 标签：sap-ase

你能给我一个查询，它将 varchars 类型的行值转换为带有任何分隔符的单列。例如有 2 列的表

```
col1 |col2
1 | m10
1 | m31
2 | m20
2 | m50 
```

现在我想要输出为

```
col1| col2
1|m10:m31
2|m20:m50 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:40:38.067

你总是有配对的，不多不少？

```
select
  col1,
  count(*)
from table
group by col1
having count(*) <> 2 
```

**会给你零结果吗？**

如果是这样，你可以自己加入......

```
declare @delimiter varchar(1)

set @delimiter = :

select
t1.col1, t1.col2 + @delimiter + t2.col2
from tablename t1
inner join tablename t2
  on t1.col1 = t2.col1
  and t1.col2 <> t2.col2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-19T16:24:16.973

使用此解决方案：

> SELECT list(col2, ':') as col2 FROM table_name group by col1 ;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T09:15:39.367

一种方法是使用游标。

使用游标，您可以一次获取一行！

伪代码将是：

```
if actual_col1 = last_col1
then col2_value = col2_value + actual_col2
else
insert into #temptable value(col1, col2_value)
col2_value = actual_col2
end 
```

* * *

检查[这里](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.dc20020_1251/html/databases/X61512.htm)了解如何使用它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-23T02:01:40.377

请使用以下逻辑，该表`#t1`将是最终表。

```
create table #t123(a char(2), b char(2))        
go       
create table #t1(a char(2), c char(100)  default '')       
go       
Insert into #t123 values ('a','1')       
Insert into #t123 values ('a','2')       
Insert into #t123 values ('a','3')       
Insert into #t123 values ('b','1')       
Insert into #t123 values ('c','1')       
Insert into #t123 values ('d','1')       
Insert into #t123 values ('d','1')       
go       
insert into #t1 (a) Select distinct a from #t123       
go       
Select distinct row_id = identity(8), a into #t1234 from #t123       
go       
Declare @a int, @b int, @c int, @d int, @e int, @f char(2), @g char(2), @h char(2)       
Select @a =min(row_id), @b=max(row_id) from #t1234       
While @a <= @b       
Begin       
Select @f = a , @h = '', @g = '' from #t1234 where row_id = @a       
Update #t1 set c = '' where a = @f       

Select row_id = identity(8), b into #t12345 from #t123 where a = @f       
Select @c =min(row_id), @d=max(row_id) from #t12345       
While @c <= @d       
begin       
Select @g = b from #t12345 where row_id = @d       
Update #t1 set c = @g +'     '+ c  where a = @f --change delimiter       
Select @d = @d-1       
End       

Drop table #t12345       
Select @a = @a+1       

End       
go       
Select * from #t1 -- final table with transposed values 
```

# css - 使用 CSS 将非等宽字体强制为固定宽度

> ID：10149330
> 
> 赞同：71
> 
> 时间：2012-04-13T22:56:29.087
> 
> 标签：css, fonts, typography

有没有办法强制使用 CSS 等宽字体？

我的意思是，使用非等宽字体，您可以强制浏览器以固定宽度呈现每个字符吗？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2017-11-18T04:01:29.203

如果这是为了对齐表格中的数字，其中某些字体（使用传统版式）默认以可变宽度呈现它们（例如 Windows 上的 Segoe UI），您应该查看 CSS 属性：

```
font-variant-numeric: tabular-nums; 
```

（这会禁用至少 OpenType 字体支持`proportional-nums`的变体的默认值，并且可能会禁用特定平台的 Web 浏览器的文本渲染器支持的其他字体格式）`numeric-spacing`

无需 JavaScript！这是禁用这些字体中的可变宽度字形并强制它们使用表格数字的最干净的方法（这通常在相同字体的相同字形中使用，但它们的前导和尾随间隙增加了，因此 10 个数字从 0 到9 将以相同的宽度呈现；但是某些字体可能会避免视觉可变的数字间间距，并且会稍微加宽一些数字，或者可能会在数字 1 的脚下添加底部衬线。

请注意，这不会禁用 Segoe UI 观察到的可变高度（例如，某些数字将仅像小写字母一样为 x 高度，其他数字将具有升序或降序）。这些传统的数字形式也可以用 CSS 禁用，使用

```
font-variant-numeric: lining-nums; 
```

（这会禁用至少 OpenType 字体支持的变体的默认`oldstyle-nums`值，并且可能会禁用特定平台的 Web 浏览器的文本渲染器支持的其他字体格式）`numeric-figure`

您可以将两者结合起来：

```
font-variant-numeric: tabular-nums lining-nums; 
```

--

下面的代码片段使用具有数字形状变体的单一比例字体（不是等宽字体！）演示了这一点，例如 Windows 上的“Segoe UI”，并显示了产生的不同水平和垂直对齐方式。

请注意，如果应用粗体或斜体等不同样式而不是如下所示的中等罗马字体，则此样式不会禁止数字更改宽度，因为这些将使用具有自己不同度量的不同字体（这不适用于所有等宽字体） .

```
html { font-family: 'Segoe UI'; /* proportional with digit variants */ }
table { margin: 0; padding: 0; border: 1px solid #AAA; border-collapse: collapse; }
th, td { vertical-align:top; text-align:right; }
.unset       { font-variant-numeric: unset; }
.traditional { font-variant-numeric: proportional-nums oldstyle-nums; }
.lining      { font-variant-numeric: proportional-nums lining-nums;   }
.tabular-old { font-variant-numeric: tabular-nums      oldstyle-nums; }
.tabular-new { font-variant-numeric: tabular-nums      lining-nums;   }
.normal      { font-variant-numeric: normal; }
```

```
<table>
<tr><th>unset<td><table width="100%" class="unset">
  <tr><td>Rs12,34,56,789.00/Gal<td><i>Difference Rs86,41,97,532.11/Gal
  <tr><td>Rs98,76,54,321.11/Gal<td><b>Total Rs1,11,11,11,110.11/Gal
  </table>
<tr><th>traditional<td><table width="100%" class="traditional">
  <tr><td>Rs12,34,56,789.00/Gal<td><i>Difference Rs86,41,97,532.11/Gal
  <tr><td>Rs98,76,54,321.11/Gal<td><b>Total Rs1,11,11,11,110.11/Gal
  </table>
<tr><th>lining<td><table width="100%" class="lining">
  <tr><td>Rs12,34,56,789.00/Gal<td><i>Difference Rs86,41,97,532.11/Gal
  <tr><td>Rs98,76,54,321.11/Gal<td><b>Total Rs1,11,11,11,110.11/Gal
  </table>
<tr><th>tabular-old<td><table width="100%" class="tabular-old">
  <tr><td>Rs12,34,56,789.00/Gal<td><i>Difference Rs86,41,97,532.11/Gal
  <tr><td>Rs98,76,54,321.11/Gal<td><b>Total Rs1,11,11,11,110.11/Gal
  </table>
<tr><th>tabular-new<td><table width="100%" class="tabular-new">
  <tr><td>Rs12,34,56,789.00/Gal<td><i>Difference Rs86,41,97,532.11/Gal
  <tr><td>Rs98,76,54,321.11/Gal<td><b>Total Rs1,11,11,11,110.11/Gal
  </table>
<tr><th>normal<td><table width="100%" class="normal">
  <tr><td>Rs12,34,56,789.00/Gal<td><i>Difference Rs86,41,97,532.11/Gal
  <tr><td>Rs98,76,54,321.11/Gal<td><b>Total Rs1,11,11,11,110.11/Gal
  </table>
</table>
```

参考：[https ://developer.mozilla.org/docs/Web/CSS/font-variant-numeric](https://developer.mozilla.org/docs/Web/CSS/font-variant-numeric)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-13T23:23:33.270

为什么不跳出框框思考一下：

```
<table cellpadding="0" cellspacing="0">
<tr><td>T</td><td>h</td><td>e</td><td></td><td>r</td><td>a</td><td>i</td><td>n</td><td></td><td>i</td><td>n</td><td></td><td>S</td><td>p</td><td>a</td><td>i</td><td>n</td><td></td><td>s</td><td>t</td><td>a</td><td>y</td><td>s</td></tr>
<tr><td>m</td><td>a</td><td>i</td><td>n</td><td>l</td><td>y</td><td></td><td>i</td><td>n</td><td></td><td>t</td><td>h</td><td>e</td><td></td><td>p</td><td>l</td><td>a</td><td>i</td><td>n</td><td>s</td><td>.</td></tr>
</table> 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-04-13T23:04:28.193

你不能用 CSS 做到这一点。即使可以，结果也会看起来很糟糕：

![在此处输入图像描述](../Images/b09e80be1c185ef8f32b2c01d9e37b39.png)

如果你真的需要这样做，你可以使用 JavaScript 将每个单独的字符包装在一个元素中（或者只是手动完成）：

```
function wrap_letters($element) {
    for (var i = 0; i < $element.childNodes.length; i++) {
        var $child = $element.childNodes[i];

        if ($child.nodeType === Node.TEXT_NODE) {
            var $wrapper = document.createDocumentFragment();

            for (var i = 0; i < $child.nodeValue.length; i++) {
                var $char = document.createElement('span');
                $char.className = 'char';
                $char.textContent = $child.nodeValue.charAt(i);

                $wrapper.appendChild($char);
            }

            $element.replaceChild($wrapper, $child);
        } else if ($child.nodeType === Node.ELEMENT_NODE) {
            wrap_letters($child);
        }
    }
}

wrap_letters(document.querySelectorAll('.boxes')[0]);
wrap_letters(document.querySelectorAll('.boxes')[1]);
```

```
.char {
    outline: 1px solid rgba(255, 0, 0, 0.5);
}

.monospace .char {
    display: inline-block;
    width: 15px;
    text-align: center;
}
```

```
<h2 class="boxes">This is a title</h2>
<h2 class="boxes monospace">This is a title</h2>
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2018-12-30T18:54:46.057

我刚刚找到了`text-transform: full-width;` **实验性关键字**，它：

> [...] 强制在正方形 [...] 内写入字符 [...]
> 
> [文本转换 | MDN](https://developer.mozilla.org/en-US/docs/Web/CSS/text-transform)

结合negative `letter-spacing`，你可以获得不那么可怕的结果：

[![固定宽度的无衬线字体模拟等宽字体](../Images/ee3d719fa7b80e0e396db5dd21063c6b.png)](https://i.stack.imgur.com/XLDP0.png)

```
<style>
pre {
  font-family: sans-serif;
  text-transform: full-width;
  letter-spacing: -.2em;
}
</style>

<!-- Fixed-width sans-serif -->
<pre>
. i I 1  | This is gonna be awesome.
ASDFGHJK | This is gonna be awesome.
</pre>

<!-- Default font -->
. i I 1  | This is gonna be awesome.
<br>
ASDFGHJK | This is gonna be awesome. 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-01-27T12:44:53.233

好吧，你没有说*只*使用CSS。只需一点点 Javascript 就可以做到这一点，将每个字母包装在`span`. 其余的在 CSS 中......

```
window.onload = function() {
  const secondP = document.getElementById('fixed');
  const text = secondP.innerText;
  const newText = text.split('').map(c => {
    const span = `<span>${c}</span>`;
    return span;
  }).join('');
  secondP.innerHTML = newText;
}
```

```
p {
  position: relative;
  border: 1px solid black;
  border-radius: 1em;
  padding: 1em;
  margin: 3em 1em;
}

p::after {
  content: attr(name);
  display: block;
  background-color: white;
  color: green;
  padding: 0 0.5em;
  position: absolute;
  top: -0.6em;
  left: 0.5em;
}

#fixed span {
  display: inline-block;
  width: 1em;
  text-align: center;
}
```

```
<p id="variable" name="Variable Width">It might not look nice, but with a little Javascript, I can force a variable width font to act like a fixed-width font.</p>
<p id="fixed" name="Fixed Width">It might not look nice, but with a little Javascript, I can force a variable width font to act like a fixed-width font.</p>
```

在带有常规文本的段落中，它看起来很糟糕，但是在某些情况下这是有意义的。图标字体和 Unicode 符号都可以使用这种技术。

我在尝试为 Unicode 符号寻找解决方案时发现了这个问题，这些符号在被其他 Unicode 符号替换时将常规文本向右移动。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-12-04T15:55:45.250

我有时为倒计时做了一件非常漂亮的事情：

HTML：

```
<div class="counter">
    <span class="counter-digit counter-digit-0">2</span>
    <span class="counter-digit counter-digit-1">4</span>
    <span class="counter-digit counter-digit-divider">/</span>
    <span class="counter-digit counter-digit-2">5</span>
    <span class="counter-digit counter-digit-3">7</span>
</div> 
```

SCSS：

```
$digit-width: 18px;
.counter {

    text-align: center;
    font-size: $digit-width;

    position: relative;

    width : $digit-width * 4.5;
    margin: 0 auto;
    height: 48px;
}
.counter-digit {

    position: absolute;
    top: 0;
    width: $digit-width;
    height: 48px;
    line-height: 48px;
    padding: 0 1px;

    &:nth-child(1) { left: 0; text-align: right; }
    &:nth-child(2) { left: $digit-width * 1; text-align: left;}
    &:nth-child(3) { left: $digit-width * 2; text-align: center; width: $digit-width / 2} // the divider (/)
    &:nth-child(4) { left: $digit-width * 2.5; text-align: right;}
    &:nth-child(5) { left: $digit-width * 3.5; text-align: left;}
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-12-04T21:35:48.430

您可以将秒位数字包装在一个跨度中，并将其设置为... `.time-seconds {display: inline-block;width: .52em;text-align: center;}` 请参阅代码段。

```
function padlength(what) {
  var output = (what.toString().length == 1) ? "0" + what : what;
  return output;
}

function displaytime() {
  var serverdate = new Date();
  var dd = "am";
  var hh = serverdate.getHours();
  var h = hh;
  if (h >= 12) {
    h = hh - 12;
    dd = "pm";
  }
  if (h == 0) {
    h = 12;
  }
  h = parseInt(h);
  var sec = String(padlength(serverdate.getSeconds()));
  var timeFixed = h + ':' + padlength(serverdate.getMinutes()) + ':<span class="time-seconds">' + sec.charAt(0) + '</span><span class="time-seconds">' + sec.charAt(1) + '</span> ' + dd;
  timeVariable = h + ':' + padlength(serverdate.getMinutes()) + ':' + sec + ' ' + dd;
  document.getElementById("servertime-fixed").innerHTML = timeFixed;
  document.getElementById("servertime-variable").innerHTML = timeVariable;
}

window.onload = function() {
  displaytime();
  setInterval("displaytime()", 1000);
};
```

```
center {
  font-size: 3em;
  font-family: Cursive;
}

.time-seconds {
  display: inline-block;
  width: .52em;
  text-align: center;
}
```

```
<html>

<body>
  <center id="servertime-fixed">H:MM:SS mm</center>
  <center id="servertime-variable">H:MM:<span class="time-seconds">S</span><span class="time-seconds">S</span> mm</center>
</body>

</html>
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-13T22:58:42.470

不，除非它是实际的等距字体。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-13T23:00:01.257

不，没有办法在 CSS 中强制执行任何操作。甚至没有办法建议将非等宽字体呈现为等宽字体。

# delphi - 创建面积图用其他颜色着色溢出值的部分

> ID：10149340
> 
> 赞同：4
> 
> 时间：2012-04-13T22:58:34.137
> 
> 标签：delphi, teechart

你能帮我创建面积图，图表的部分（顶部）有其他颜色吗？我想指出任何数值上的值都是至关重要的。

这是一个屏幕截图： ![在此处输入图像描述](../Images/cf00c3b2fa881b425430fd5a28f96c8e.png)

我创建了两个面积图，但如您所见，每个图表都有自己的左轴。最好的解决方案是在特定值之上着色图表。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-14T09:06:11.923

有一个名为 TSeriesBandTool 的工具可以通过一些工作完成此操作。

添加一个额外的系列并使其与您的系列相同，但有最大限制。

这是它在工具编辑器中的外观：

![在此处输入图像描述](../Images/d59ef9bb785ca6ce5a4f5b706db2fe0b.png)

它将用您选择的颜色填充两个系列之间的差异。

**更新**

做了一个概念证明，见图。

添加了第三个系列和第二个 TSeriesBandTool 以用第二种颜色填充底部。我确信可以用更少的代码来做，但这对于演示来说已经足够了。

**更新 2**

做了一些代码更新。

**更新 2.5**

现在也可以处理任意 X 值，而不仅仅是整数。

![在此处输入图像描述](../Images/e0dd4cfa42cac4d49e1fca26aaa8cb11.png)

这是代码：

```
uses Series, TeeTools, TeeSeriesBandTool;

Procedure DrawLimitAreaChart(S1, S2, S3: TLineSeries; YLimit: Double;
  BT1, BT2: TSeriesBandTool; OutlineWidth: Integer;
  OutlineCL, TopCl, BottomCL: TColor);
Var
  i: Integer;
  iX: Double;
Begin
  S1.LinePen.Width := OutlineWidth;
  S1.Color := OutlineCL;
  S2.Color := OutlineCL;
  S3.Color := OutlineCL;
  for i := 0 to S1.Count - 1 do
    if (S1.YValue[i] > YLimit) then
    begin
      if (i > 0) and (S1.YValue[i - 1] < YLimit) then
      begin // Last point below limit
        iX := (S1.XValue[i] - S1.XValue[i - 1]) * (YLimit - S1.YValue[i - 1]) /
          (S1.YValue[i] - S1.YValue[i - 1]) + S1.XValue[i - 1];
        S2.AddXY(iX, YLimit);
        if (i < S1.Count - 1) then
          Continue;
      end;
      S2.AddXY(S1.XValue[i], YLimit); // Set to Ylimit
    end
    else // Below Ylimit
    begin
      if (i > 0) and (S1.YValue[i - 1] > YLimit) then
      begin // Last point above limit
        iX := (S1.XValue[i] - S1.XValue[i - 1]) * (YLimit - S1.YValue[i - 1]) /
          (S1.YValue[i] - S1.YValue[i - 1]) + S1.XValue[i - 1];
        S2.AddXY(iX, YLimit);
      end;
      S2.AddXY(S1.XValue[i], S1.YValue[i]);  // Same value
    end;

  for i := 0 to S2.Count - 1 do
  begin
    S3.AddXY(S2.XValue[i], 0.0);
  end;

  { - First TSeriesBandTool }
  BT1.Series := S1;
  BT1.Series2 := S2;
  BT1.Brush.BackColor := TopCl;
  BT1.DrawBehindSeries := True;
  BT1.Transparency := 50;

  { - Second TSeriesBandTool }
  BT2.Series := S2;
  BT2.Series2 := S3;
  BT2.Brush.BackColor := BottomCL;
  BT2.DrawBehindSeries := True;
  BT2.Transparency := 50;

End;

procedure TForm1.Button1Click(Sender: TObject);
const
  // Example data
  YVAL: array [0 .. 10] of Double = (10,40,45,20,48,5,47,47,47,47,30);
var
  i: Integer;
  YLimit: Double;
  S1, S2, S3: TLineSeries;
begin
  Chart1.SeriesList.Clear;
  S1 := TLineSeries.Create(Self); // Contains real data
  Chart1.AddSeries(S1);
  S2 := TLineSeries.Create(Self); // Data below Ylimit
  Chart1.AddSeries(S2);
  S3 := TLineSeries.Create(Self); // baseline data
  Chart1.AddSeries(S3);
  for i := 0 to 10 do
    S1.AddXY(i, YVAL[i]);
  YLimit := S1.MaxYValue * 0.75;
  DrawLimitAreaChart(S1, S2, S3, YLimit, ChartTool1, ChartTool2, 2, clBlack,
    TColor($0024FF){clOrangeRed}, TColor($FF4D4D){clNeonBlue});

end; 
```

那么代码的作用是：

将 X,Y 数据填充到 series[0] 中。调用`DrawLimitAreaChart`从 series[0] 计算新系列的过程，使得没有部分高于 Ylimit。最后将第三个系列用作第二个系列的基线。这三条曲线与两条曲线`TSeriesBandTools`现在形成了一个双色区域面积图。

**更新 3**

根据要求，这里是一个以 X 轴为时间的图表示例。执行此操作的代码在我下面的评论中。

![在此处输入图像描述](../Images/a3f0782b3fa5379338c2e33ef4d1fe28.png)

# python - Python：通用 getter 和 setter

> ID：10149344
> 
> 赞同：15
> 
> 时间：2012-04-13T22:59:15.853
> 
> 标签：python

**TL;DR：必须为每个 property() 的变量定义一组唯一的 getter 和 setter 很糟糕。我可以定义通用的 getter 和 setter 并将它们与我想要的任何变量一起使用吗？**

假设我用一些不错的 getter 和 setter 创建了一个类：

```
class Foo
    def getter(self):
        return _bar+' sasquatch'

    def setter(self, value):
        _bar = value+' unicorns'

    bar = property(getter, setter) 
```

非常棒，对吧？

现在假设我放入了另一个名为“baz”的变量，我不希望它被这个野人/独角兽的乐趣所遗漏。好吧，我想我可以制作另一组 getter 和 setter：

```
class Foo
    def bar_getter(self):
        return _bar+' sasquatch'

    def bar_setter(self, value):
        _bar = value+' unicorns'

    bar = property(bar_getter, bar_setter)

    def baz_getter(self):
        return _baz+' sasquatch'

    def baz_setter(self, value):
        _baz = value+' unicorns'

    baz = property(baz_getter, baz_setter) 
```

但这不是很干，并且不必要地使我的代码混乱。我想我可以让它更干燥一点：

```
class Foo
    def unicornify(self, value):
        return value+' unicorns'

    def sasquatchify(self, value):
        return value+' sasquatch'

    def bar_getter(self):
        return self.sasquatchify(_bar)

    def bar_setter(self, value):
        _bar = self.unicornify(_bar)

    bar = property(bar_getter, bar_setter)

    def baz_getter(self):
        return self.sasquatchify(_baz)

    def baz_setter(self, value):
        _baz = self.unicornify(_baz)

    baz = property(baz_getter, baz_setter) 
```

尽管这可能会使我的代码更干燥，但这并不理想。如果我想将另外两个变量进行 unicornify 和 sasquatchify，我将不得不再添加四个函数！

必须有更好的方法来做到这一点。我可以跨多个变量使用单个通用 getter 和/或 setter 吗？

**Unicorn-less 和 sasquatch-less 实际实现：** 我正在使用 SQLAlchemy ORM，并且希望在从数据库中存储和检索数据时转换一些数据。一些转换适用于多个变量，我不想让我的类与 getter 和 setter 混淆。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-13T23:04:03.313

怎么样：

```
def sasquatchicorn(name):
    return property(lambda self: getattr(self, name) + ' sasquatch',
                    lambda self, val: setattr(self, name, val + ' unicorns'))

class Foo(object):
    bar = sasquatchicorn('_bar')
    baz = sasquatchicorn('_baz') 
```

更笼统地说：

```
def sasquatchify(val):
    return val + ' sasquatch'

def unicornify(val):
    return val + ' unicorns'

def getset(name, getting, setting):
    return property(lambda self: getting(getattr(self, name)),
                    lambda self, val: setattr(self, name, setting(val)))

class Foo(object):
    bar = getset('_bar', sasquatchify, unicornify)
    baz = getset('_baz', sasquatchify, unicornify) 
```

或者，只需稍加工作，您就可以使用完整的描述符协议，如[agf 的回答](https://stackoverflow.com/a/10149431/344821)中所述。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-13T23:11:56.630

这就是[描述符协议](http://docs.python.org/howto/descriptor.html) `property`所基于的用途：

```
class Sasicorn(object):                              
    def __init__(self, attr):                        
        self.attr = "_" + attr                       
    def __get__(self, obj, objtype):                 
        return getattr(obj, self.attr) + ' sasquatch'
    def __set__(self, obj, value):                   
        setattr(obj, self.attr, value + ' unicorns') 

class Foo(object):                                   
    def __init__(self, value = "bar"):               
        self.bar = value                             
        self.baz = "baz"                             
    bar = Sasicorn('bar')                            
    baz = Sasicorn('baz')                            

foo = Foo()                                          
foo2 = Foo('other')                                  
print foo.bar                                        
# prints bar unicorns sasquatch
print foo.baz                                        
# prints baz unicorns sasquatch
print foo2.bar                                       
# prints other unicorns sasquatch 
```

虽然`property`对于您的玩具示例来说，工厂函数可能很好，但听起来您可能需要对实际用例进行更多控制。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-06-06T18:54:43.420

使用[getattribute](https://docs.python.org/2/reference/datamodel.html#object.__getattribute__)和[setattr](https://docs.python.org/2/reference/datamodel.html#object.__setattr__)您可以为过去和未来的所有属性定义它。

```
class Foo(object):                                                                                                                           

  x = 3 

  def __getattribute__(self, attr):
    return str(object.__getattribute__(self, attr)) + ' sasquatch'

  def __setattr__(self, attr, value):
    object.__setattr__(self, attr, str(value) + ' unicorn')

print Foo.x
f = Foo()
print f.x 
f.y = 4 
print f.y 
```

这打印：

```
3
3 sasquatch
4 unicorn sasquatch 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-14T03:05:56.003

我的一位同事建议使用闭包来返回 getter 和 setter 函数，这是我决定使用的。

```
class Foo(object):
    def setter(var):
        def set(self, value):
            setattr(self, var, value+' unicorn')
        return set

    def getter(var):
        def get(self):
            return getattr(self, var)+' sasquatch'
        return get

    bar = property(getter('_bar'), setter('_bar'))

f = Foo()
f.foo = 'hi'
print f.foo 
```

但是谢谢大家的回答:)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-12-05T18:56:29.100

```
# coding=utf-8
__author__ = 'Ahmed Şeref GÜNEYSU'

class Student(object):
    def __init__(self, **kwargs):
        for k, v in kwargs.iteritems():
            self.__setattr__(k, v)

if __name__ == '__main__':
    o = Student(first_name='Ahmed Şeref', last_name='GÜNEYSU')
    print "{0} {1}".format(o.first_name, o.last_name)
    print o.email 
```

给

```
Ahmed Şeref GÜNEYSU
  File "/Users/ahmed/PycharmProjects/sanbox/abstract_classes/object_initializer/__init__.py", line 13, in <module>
    print o.email
AttributeError: 'Student' object has no attribute 'email'

Process finished with exit code 137 
```

# ruby-on-rails-3 - 使用资源关键字后，rails 中缺少路线

> ID：10149346
> 
> 赞同：1
> 
> 时间：2012-04-13T22:59:41.873
> 
> 标签：ruby-on-rails-3, routes

不确定这里的问题是什么，但我的 routes.rb 中有一条基本线：

```
resource :videos 
```

但我没有看到所有的路径。即：

```
GET /videos/:id 
```

运行“rake routes”时，我只看到以下内容：

```
videos      POST   /videos(.:format)              videos#create
new_videos  GET    /videos/new(.:format)          videos#new
edit_videos GET    /videos/edit(.:format)         videos#edit
            GET    /videos(.:format)              videos#show
            PUT    /videos(.:format)              videos#update
            DELETE /videos(.:format)              videos#destroy 
```

我错过了什么？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T23:31:59.303

您使视频成为一种单一资源，但视频是一个集合，因此您必须这样做：

```
resources :videos 
```

[http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions](http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T23:32:24.513

将您的线路更改为`resources :videos`，丢失的路线将神奇地出现

# java - 使用 Guava 反射对私有字段的引用

> ID：10149352
> 
> 赞同：2
> 
> 时间：2012-04-13T23:00:34.450
> 
> 标签：java, reflection, guava

我想澄清一件事。

使用“普通”Java 反射技术（不使用库）afaik 无法获得对私有字段的引用（我的意思是`java.lang.reflect.Field`对象，没有字段值）。

例如，如果我有这个类：

```
public class MyClass {
  private String field1;
} 
```

如果我尝试执行此操作：

```
Field field = MyClass.class.getField("field1"); 
```

正如预期的那样，我会得到一个`NoSuchFieldException`例外。

使用[Guava Reflection library](http://code.google.com/p/guava-reflection/)，如果我尝试执行此操作：

```
Object o = new MyClass();
Property property = Properties.getPropertyByName(o, "field1");
Field f = property.getField(); 
```

我得到以下异常：

```
java.lang.IllegalStateException: Unknown property: field1 in class MyClass 
```

这也是意料之中的。但是，如果我添加一个 getter 方法，如下所示：

```
public class MyClass {
  private String field1;
  public String getField1() {return field1;}
} 
```

然后番石榴反射代码正在工作。我不得不承认我对此有点茫然。我知道反射库可以使用 getter 来返回私有实例变量的值，但是 Field 对象本身只是因为 getter 存在？有人知道这是怎么发生的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T23:10:47.740

您可以使用标准 java 反射来反映私有字段，这可能是 Guava 在幕后所做的：

```
Class<?> c = ... some class ...
Field field = c.getDeclaredField("name");
field.setAccessible(true);
Object value = field.get(object); 
```

`getDeclaredField`允许您获取私有字段。 `setAccessible`需要防止安全问题。

无论如何，作为最佳实践，请考虑仅对公共成员使用反射，因此请尽可能使用 getter/setter。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T23:15:18.860

[Field](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/reflect/Field.html)扩展[了 AccesibleObject](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/reflect/AccessibleObject.html)，它有一个方法[setAccessible()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/reflect/AccessibleObject.html#setAccessible%28java.lang.reflect.AccessibleObject%5B%5D,%20boolean%29)，允许您访问私有字段的值。

Guava-Reflection（请注意，此库与 Guava 不同）使您的私有字段可以在 Property.getFieldValue() 等方法中访问

# c# - 如何在选项卡控制选项卡内嵌套多个组框？

> ID：10149357
> 
> 赞同：1
> 
> 时间：2012-04-13T23:01:04.763
> 
> 标签：c#, wpf, mvvm

我根据 Josh Smiths MVVM 演示创建了一个 MVVM Stock 应用程序。在右侧窗格的选项卡中，我放置了一个由两个数据网格组成的股票期权链——一个用于看涨期权，一个用于看跌期权。这些代表单个到期月份的所有选项。

但是，我想在同一个选项卡中显示多个月份 - 并排显示（我正在考虑将每个月的数据放在一个分组框中），并且能够一次查看几个月的数据。

根据 Josh 的演示，每个选项卡都包含由视图模型呈现的数据，并作为工作区添加到选项卡控件中。

我相信我可以在单个 WorkSpace 选项卡中嵌套多个 MonthlyChainSpaces，但我不确定 xaml 的外观。我有一个与视图模型相关联的用户控件，因此我认为不需要太多更改（如果有的话），因为每个 GroupBox 中的数据将由我当前的视图模型呈现，而不是每个都出现在单独的选项卡上，它们将嵌套在单个选项卡中。

我不确定我需要在“MonthlyChainSpaces”DataTemplate 中放置哪些控件才能完成此操作。我知道每个分组框（并且我需要在每个选项卡中使用可变数量的分组框）只能有一个项目 - 所以我在考虑分组框内的堆栈面板或网格。但我不确定如何完成我想要的。我是否需要一个“主组框”（位于选项卡内）并且在该组框内，我有嵌套的组框，每个组框代表“主组框”的一个组框项？

由于我对 WPF 相当陌生，如果有更多经验的人可以就如何实现这一点提供一些指导，我将不胜感激？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T22:30:20.020

鉴于以下 xaml...

```
 <Window x:Class="NestedGroupBoxes.MainWindow"
        xmlns:datagrid="http://schemas.microsoft.com/wpf/2008/toolkit"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="525" Width="767">
  <Window.Resources>
    <XmlDataProvider x:Key="chainProvider" Source="/MinimalOptions.XML" XPath="/query/results">
    </XmlDataProvider>
  </Window.Resources>

  <DockPanel>
    <GroupBox MaxWidth="500" HorizontalAlignment="Left">
      <GroupBox.HeaderTemplate>
        <DataTemplate>
          <StackPanel Orientation="Vertical">
            <TextBox Text="{Binding Source={StaticResource chainProvider}, XPath=optionsChain/@symbol}"/>
          </StackPanel>
        </DataTemplate>
      </GroupBox.HeaderTemplate>
      <Grid DockPanel.Dock="Bottom" Margin="4">
        <StackPanel Orientation="Vertical">
          <Label Content="AllOptions"  HorizontalAlignment="Left" Name="outerOptionChainDataGrid" VerticalAlignment="Top"  />
          <datagrid:DataGrid   MinHeight="200"
                  MinWidth="200"
                  MaxWidth="500"
                  Width="Auto"
                  HorizontalAlignment="Left"
                  AutoGenerateColumns="False"
                  EnableRowVirtualization="True"
                  AlternatingRowBackground="LightGray"
                  SelectionUnit="FullRow"
                  Name="dgridCallOptionChain"
                  IsSynchronizedWithCurrentItem="True"  
                  ItemsSource="{Binding Source={StaticResource chainProvider},XPath=optionsChain/option}"                  
                  SelectedItem="{Binding Path=SelectedOption, Mode=TwoWay}"
                  VerticalAlignment="Stretch"                          
                  HorizontalScrollBarVisibility="Visible" VerticalScrollBarVisibility="Visible" IsManipulationEnabled="True" >
            <datagrid:DataGrid.Columns>
              <datagrid:DataGridTemplateColumn Header="Date" MinWidth="100">
                <datagrid:DataGridTemplateColumn.CellTemplate>
                  <DataTemplate>
                    <DockPanel>
                      <GroupBox MaxWidth="500" HorizontalAlignment="Left">
                        <GroupBox.HeaderTemplate>
                          <DataTemplate>
                            <StackPanel Orientation="Vertical">
                              <TextBox Text="{Binding Source={StaticResource chainProvider}, XPath=optionsChain/@symbol}"/>
                            </StackPanel>
                          </DataTemplate>
                        </GroupBox.HeaderTemplate>
                        <Grid DockPanel.Dock="Bottom" Margin="0,2,4,2">
                          <StackPanel Orientation="Vertical">
                            <Label Content="Monthly Options"  HorizontalAlignment="Left" Name="innerOptionChainDataGrid" VerticalAlignment="Top"  />
                            <datagrid:DataGrid   MinHeight="200"
                  MinWidth="200"
                  MaxWidth="500"
                  Width="Auto"
                  HorizontalAlignment="Left"
                  AutoGenerateColumns="False"
                  EnableRowVirtualization="True"
                  AlternatingRowBackground="LightGray"
                  SelectionUnit="FullRow"
                  Name="dgridCallOptionChain"
                  IsSynchronizedWithCurrentItem="True"  
                  ItemsSource="{Binding Source={StaticResource chainProvider},XPath=optionsChain/option}"                  
                  SelectedItem="{Binding Path=SelectedOption, Mode=TwoWay}"
                  VerticalAlignment="Stretch"                          
                  HorizontalScrollBarVisibility="Visible" VerticalScrollBarVisibility="Visible" MaxHeight="200" IsManipulationEnabled="True" >
                              <datagrid:DataGrid.Columns>
                                <datagrid:DataGridTextColumn Header="Symbol" Binding="{Binding XPath=@symbol}"/>
                                <datagrid:DataGridTextColumn Header="Strike" Binding="{Binding XPath=strikePrice}"/>
                                <datagrid:DataGridTextColumn  Header="Bid" Binding="{Binding XPath=bid}"/>
                                <datagrid:DataGridTextColumn Header="Ask" Binding="{Binding XPath=ask}"/>
                                <datagrid:DataGridTextColumn Header="Volume" Binding="{Binding XPath=vol}"/>
                                <datagrid:DataGridTextColumn Header="OpenInt" Binding="{Binding XPath=openInt}"/>
                              </datagrid:DataGrid.Columns>
                            </datagrid:DataGrid>
                          </StackPanel>
                        </Grid>
                      </GroupBox>
                    </DockPanel>
                  </DataTemplate>
                </datagrid:DataGridTemplateColumn.CellTemplate>
              </datagrid:DataGridTemplateColumn>
            </datagrid:DataGrid.Columns>
          </datagrid:DataGrid>
        </StackPanel>
      </Grid>
    </GroupBox>
  </DockPanel>

</Window> 
```

以及以下 xml 数据文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<query xmlns:yahoo="http://www.yahooapis.com/v1/base.rng"
yahoo:count="1" yahoo:created="2012-01-10T00:51:10Z" yahoo:lang="en-US">
<diagnostics>
    <publiclyCallable>true</publiclyCallable>
    <url execution-start-time="21" execution-stop-time="286"
        execution-time="265" proxy="DEFAULT"><![CDATA[http://www.datatables.org/yahoo/finance/yahoo.finance.options.xml]]></url>
    <url execution-start-time="291" execution-stop-time="1179"
        execution-time="888" proxy="DEFAULT"><![CDATA[http://finance.yahoo.com/q/op?s=YHOO&m=2012-01]]></url>
    <log>results.length(): 2</log>
    <javascript execution-time="987" instructions-used="406004" table-name="yahoo.finance.options"/>
    <user-time>1276</user-time>
    <service-time>1153</service-time>
    <build-version>24402</build-version>
</diagnostics> 
<results>
    <optionsChain expiration="2012-01-20" symbol="YHOO">
        <option symbol="YHOO120121C00002500" type="C">
            <strikePrice>2.5</strikePrice>
            <lastPrice>13.65</lastPrice>
            <change>0</change>
            <changeDir/>
            <bid>12.9</bid>
            <ask>13</ask>
            <vol>8</vol>
            <openInt>73</openInt>
        </option>
        <option symbol="YHOO120121C00005000" type="C">
            <strikePrice>5</strikePrice>
            <lastPrice>11.30</lastPrice>
            <change>0</change>
            <changeDir/>
            <bid>10.4</bid>
            <ask>10.5</ask>
            <vol>NaN</vol>
            <openInt>289</openInt>
        </option>
        <option symbol="YHOO120121C00007500" type="C">
            <strikePrice>7.5</strikePrice>
            <lastPrice>8.70</lastPrice>
            <change>0</change>
            <changeDir/>
            <bid>7.9</bid>
            <ask>8</ask>
            <vol>5</vol>
            <openInt>1416</openInt>
        </option>
    </optionsChain>
</results> 
```

现在它将显示多个带有数据网格的组框。但是，xml 文件中每个对应的“选项”节点都有一个单独的组框/数据网格。我想要的 xml 文件是一个单独的组框，其中一个数据网格被另一个数据网格包围。我的方法是让外部数据网格绑定到视图模型的集合，每个视图模型都将生成内部组框/数据网格。换句话说，内部组框/数据网格将水平堆叠 - 每个都在外部数据网格的一列中。外部数据网格将有一行多列，具体取决于外部数据网格绑定集合中视图模型的数量。

因此，假设外部数据网格绑定到一个集合，例如： ObservableCollection allOptions = new ObservableCollection();

该集合将使用 OptionChainViewModel 类型的视图模型对象填充外部数据网格。这些“内部”对象本身就是 GroupBox/DataGrid 视图，每个视图都包含一个月的选项。结果将是一个带有多列单行数据网格的外部组框。每个外部 DataGrid 列将依次包含由 OptionChainViewModel 呈现的 GroupBox/DataGrid 视图。
希望这有助于触发一些回复......

# magento - 使用 mangento 基础产品价格添加附加产品价格

> ID：10149362
> 
> 赞同：1
> 
> 时间：2012-04-13T23:01:55.110
> 
> 标签：magento, product

我想用产品（简单）价格添加额外的价格，我试图在自定义属性的帮助下做到这一点。我添加了一个自定义属性“保证金价格”，我想将此自定义属性值（保证金价格）与模板文件中产品的基本价格相加。

我每 5 分钟通过 cron 作业更新所有产品价格，这就是为什么我认为我必须通过这种方式将保证金价格与基本产品价格相加。

我在产品列表页面和产品视图页面中成功添加了它，但是如何在购物车和单页结帐中添加此保证金价格与基本价格有问题？

这是产品列表页面上的代码，产品详细信息页面的代码在 magento 1.6.x 中对我来说很好。

 `````
$regularPrice = number_format($_product->getFinalPrice(), 2); 
 //echo $regularPrice =  $this->getPriceHtml($_product, true 
$priceWithoutComma = str_replace(",", "",$regularPrice);
settype($priceWithoutComma, "float");
$marPrice = $_product->getMarginPrice();
settype($marPrice, "integer");
$finalPrice = $priceWithoutComma + $marPrice;
echo $finalPrice.Mage::app()->getLocale()->currency(Mage::app()->getStore()->
getCurrentCurrencyCode())->getSymbol(); 
````  `我这样做是正确的，还是我必须改变整个过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T04:08:40.367

看起来你可能需要考虑一种不同的方法。原因是从模板文件中回显价格不会以任何方式修改商品的价格。它只是输出一个计算。

您需要了解一些有关事件侦听器的知识才能使其正常工作。

[这是我的一篇关于如何做到这一点的博客文章。](http://mikebywaters.wordpress.com/2012/03/30/add-an-item-to-the-cart-with-a-custom-price-in-magento/)``

# objective-c - 填充 IKImageBrowserView

> ID：10149365
> 
> 赞同：0
> 
> 时间：2012-04-13T23:02:23.590
> 
> 标签：objective-c, macos, ikimagebrowserview, imagekit

我目前正在构建一个显示图标的视图，以及图标右侧的文本标签。经过一番搜索，我决定 IKImageBrowserView 最合适。因此，我继续创建了我的 IKImageBrowserView 并将其数据源设置如下：

```
// Setup image browser view
IKImageBrowserView *browser = [IKImageBrowserView new];

// Build our datasource delegate
MyDataStore *ds = [[MyDataStore alloc] init];
[browser setDelegate:ds];
[browser setDataSource:ds];

NSImage *image    = // . . . File path
NSString *imageID = // . . . Filename
IKBBrowserItem *item = [[IKBBrowserItem alloc] initWithImage:image imageID:imageID];
[[ds images] addObject:item]; 
```

我还创建了我的数据源，在协议中实现了两个必需的方法：

```
import "MyDataStore.h"

@implementation MyDataStore

- (id) init {  
    if ([super init] != nil) {
               images = [NSMutableArray new];
    }

    return self;
}

- (NSUInteger) numberOfItemsInImageBrowser:(IKImageBrowserView *) aBrowser {  
  return [images count];
}

- (id) imageBrowser:(IKImageBrowserView *) aBrowser itemAtIndex:(NSUInteger)index {
  return [images objectAtIndex:index];
}

- (NSMutableArray *) images {
  return images;
}

@end 
```

但是，当我尝试添加一个项目时（如第一个代码块所示），我的 IKImageBrowserView 中没有显示任何内容。我怀疑我在用这种观点做一些明显不正确的事情。有谁知道那可能是什么？

# iphone - 如何将 SQlite 中的数据显示到 iPhone 应用程序的表格视图中

> ID：10149368
> 
> 赞同：7
> 
> 时间：2012-04-13T23:03:07.663
> 
> 标签：iphone, ios, sqlite, sdk

我正在使用 SQlite3 在 Xcode 4.3 中开发一个 iPhone 项目，SQlite 和 Xcode 之间的连接已经完成，现在我想将我的数据显示到一个表格视图（三个视图）中并且它是只读的！所以我有主表视图，选择 raw --> 进入第二个视图并从 DB 加载其他数据 select raw --> 进入详细视图以显示长文本和图像！

任何帮助表示赞赏。

> AppDelegate.h

```
#import "AppDelegate.h"

#import "MasterViewController.h"

@implementation AppDelegate

@synthesize window = _window;
@synthesize navigationController = _navigationController;

- (void)dealloc
{
    [_window release];
    [_navigationController release];
    [super dealloc];
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,    NSUserDomainMask, YES);
    NSString *documentsDir = [paths objectAtIndex:0];

    NSString *dbPath = [documentsDir stringByAppendingPathComponent:@"cities.sqlite"];

    NSFileManager *fileManager = [NSFileManager defaultManager];

    BOOL success = [fileManager fileExistsAtPath:dbPath];

    if (success) {

        NSLog(@"we have the database");

    } else {

        NSLog(@"we have no database");

        NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"cities.sqlite"];

        BOOL moved = [fileManager copyItemAtPath:defaultDBPath toPath:dbPath error:nil];

        if (moved) {
            NSLog(@"database copied");
        }

    }

    MasterViewController *masterViewController = [[[MasterViewController alloc] initWithNibName:@"MasterViewController" bundle:nil] autorelease];
    self.navigationController = [[[UINavigationController alloc] initWithRootViewController:masterViewController] autorelease];
    self.window.rootViewController = self.navigationController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

主视图控制器.h

```
#import <UIKit/UIKit.h>
#import <sqlite3.h> 

@class DetailViewController;

@interface MasterViewController : UITableViewController {
    NSMutableArray *cities;
}

@property (strong, nonatomic) DetailViewController *detailViewController;

@end 
```

主视图控制器.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    students = [[NSMutableArray alloc] init];
    countries = [[NSMutableArray alloc] init];

    // Do any additional setup after loading the view, typically from a nib.
    self.navigationItem.leftBarButtonItem = self.editButtonItem;

    UIBarButtonItem *addButton = [[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(insertNewObject:)] autorelease];
    self.navigationItem.rightBarButtonItem = addButton;

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [paths objectAtIndex:0];
    NSString *dbPath = [documentsDir stringByAppendingPathComponent:@"cities.sqlite"];

    sqlite3 *database;

    if (sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK) {

        const char *sqlStatement = "select * from cities_info";

        sqlite3_stmt *compileStatement;

        if (sqlite3_prepare_v2(database, sqlStatement, -1, &compileStatement, NULL) == SQLITE_OK) {

            while (sqlite3_step(compileStatement) == SQLITE_ROW) {

                NSLog(@"one record");

                NSString *cityName = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compileStatement, 1)];

                [cities addObject:cityName];

            }

            NSLog(@"cities: %@",cities);  

        }

    } else {

        NSLog(@"error in database");

    }
} 
```

> 块引用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T16:31:01.017

我建议在 SQLite 上使用轻量级包装器 - 请参阅[https://github.com/JohnGoodstadt/EasySQLite](https://github.com/JohnGoodstadt/EasySQLite)

这将允许：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return _personTable.rows.count;
} 
```

和

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    ...

     NSArray* row= _personTable.rows[indexPath.row];
     cell.textLabel.text = row[[_personTable colIndex:@"lastname"]];
     ... 
```

使用表示 SQL 表的 iVar 进行设置：

```
self.personTable = [_db  ExecuteQuery:@"SELECT firstname , lastname , age , salary FROM person"]; 
```

以及传入您的 SQL 文件名的 DB Connection iVar：

```
self.db = [DBController sharedDatabaseController:@"DataTable.sqlite"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:49:40.853

首先，我建议使用[FMDB](https://github.com/ccgus/fmdb)，它是一个围绕 sqlite3 的 Objective-C 包装器。其次，我将创建一个带有共享实例的自定义数据访问对象，如下所示：

```
@interface MyDatabaseDAO : NSObject
    @property (nonatomic, strong) FMDatabase *database;
@end

@implementation MyDatabaseDAO
@synthesize database = _database;

+ (MyDatabaseDAO *)instance {
    static MyDatabaseDAO *_instance = nil;

    @synchronized (self) {
        if (_instance == nil) {
            _instance = [[self alloc] init];
        }
    }

    return _instance;
}

- (id)init {
    self.database = [FMDatabase databaseWithPath:myDatabasePath];
    [self.database open];
}

- (void)dealloc {
    [self.database close];
}
@end 
```

此 DAO 必须具有 3 种访问方法：一种用于数据库中的每个数据对象。因为你不是特定的，所以我制作了这些没有任何特定属性的对象。

```
- (NSArray *)retrieveAllFirstViewItems {
    NSMutableArray *items = [NSMutableArray array];
    FMResultSet *resultSet = [FMDBDatabase.database executeQuery:@"SELECT * FROM myFirstViewItemTable"];    

    while ([resultSet next]) {
        // extract whatever data you want from the resultset
        NSString *name = [resultSet stringForColumn:@"name"]
        [items addObject:name];
    }
    [resultSet close];

    return items;
}

- (MySecondViewItem *)retrieveSecondViewItemFromIndexPath:(NSIndexPath *)indexPath {

    FMResultSet *resultSet = [FMDBDatabase.database executeQuery:@"SELECT * FROM mySecondViewItemTable WHERE pid = ?", [indexPath indexAtPosition:0]];
    if ([resultSet next]) {
        // extract whatever data you want from the resultset
        NSString *name = [resultSet stringForColumn:@"name"]
        MySecondViewItem *mySecondViewItem = [[MySecondViewItem alloc]
                initWithName:name withPID:[indexPath indexAtPosition:0]];
        [resultSet close];
        return mySecondViewItem;
    } else {
        return nil;
    }
}

- (MyThirdViewItem *)retrieveThirdViewItemFromIndexPath:(NSIndexPath *)indexPath {

    FMResultSet *resultSet = [FMDBDatabase.database executeQuery:@"SELECT * FROM mySecondViewItemTable WHERE pid = ?", [indexPath indexAtPosition:1]];
    if ([resultSet next]) {
        // extract whatever data you want from the resultset
        NSString *name = [resultSet stringForColumn:@"name"]
        MyThirdViewItem *myThirdViewItem = [[MyThirdViewItem alloc]
                initWithName:name withPID:[indexPath indexAtPosition:1]];
        [resultSet close];
        return myThirdViewItem;
    } else {
        return nil;
    }
} 
```

由于它是只读的，因此这些都是必需的方法。在您的第一个 UITableView 中，只需实现方法：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    MySecondViewItem *mySecondViewItem = [[MyDatabaseDAO instance] retrieveSecondViewItemFromIndexPath:indexPath];
    //instantiate a view from this item and use [UINavigationController pushViewController:animated:] to navigate to it
} 
```

剩下的就是以某种方式在视图中显示您的数据对象。我建议在数据访问对象中尽可能多地进行数据检索，以便视图控制器可以读取数据对象的属性而不必担心后端。

这里的所有都是它的！我希望这有帮助

# iphone - 如何删除 NSMutableString 的结尾？

> ID：10149370
> 
> 赞同：3
> 
> 时间：2012-04-13T23:03:19.503
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我有以下内容`NSMutableString`：

```
@"1*2*3*4*5" 
```

我想找到第一个 * 并删除它之后的所有内容，所以我`string = @"1";`该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T23:10:46.723

```
NSMutableString *string = [NSMutableString stringWithString:@"1*2*3*4*5"];
NSRange range = [string rangeOfString:@"*"];
if (range.location != NSNotFound)
{
    [string deleteCharactersInRange:NSMakeRange(range.location, [string length] - range.location)];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T23:12:39.500

您可以尝试将此字符串除以分隔符并获取第一个对象

```
NSString *result = [[MyString componentsSeparatedByString:@"*"]objectAtIndex:0]; 
```

调用后 `componentsSeparatedByString:@"*"`你会得到一个字符串数组，用*分隔，第一个对象就是你需要的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T23:13:56.183

这是另一种策略，使用非常灵活的`NSScanner`.

```
NSString* beginning;
NSScanner* scanner = [NSScanner scannerWithString:@"1*2*3*4*5"];
[scanner scanUpToString:@"*" intoString:&beginning]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T23:12:11.373

您可以使用`-rangeOfString:`查找第一个星号的索引，并使用它`-substringToIndex:`从原始输入中提取子字符串。大概是这样的……

```
NSMutableString *input = @"1*2*3*4*5";

// Finds the range of the first instance. See NSString docs for more options.
NSRange firstAsteriskRange = [input rangeOfString:@"*"];
NSString *trimmedString = [input substringToIndex:firstAsteriskRange.location + 1]; 
```

# web-applications - 如何与另一台服务器上的 Web 应用程序通信？

> ID：10149371
> 
> 赞同：0
> 
> 时间：2012-04-13T23:03:20.933
> 
> 标签：web-applications

我开发了一个 Web 应用程序并使用服务器 A 的 Web 服务。服务器 A 需要与另一台服务器 B 通信？服务器 A 和服务器 B 之间如何通信？

运行在服务器端的应用程序，如何与另一台服务器上的 Web 应用程序通信？（在另一台服务器上没有定义任何网络服务，因为我使用对方的网络服务。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T23:15:52.073

我认为您在谈论回调。

回调是从服务器到客户端的通知。如果有任何回调发送到所有客户端，称为“广播”。

ZeroC-ICE、WCF、.Net Remothing、Corba 和大多数中间件实现都支持回调。

但是如果你使用soap 作为你的网络服务，你就不能使用回调。

# python - 如何在嵌套循环中返回最小平均值

> ID：10149374
> 
> 赞同：0
> 
> 时间：2012-04-13T23:03:39.143
> 
> 标签：python, function, loops, nested, minimum

我需要返回列表中单词相似度的最小平均值（我可以这样做），但我不知道如何将单词字符串值分配给平均值，例如在列表`['my', 'bro', 'myline']`中当然 bro 会最少word比较值，因此我需要`'bro'`与比较值一起返回（我已经知道如何......只需要知道如何在嵌套循环中分配值）。

```
final_tup = ()
ave_list = []
for word in final_list:
    word1 = word
    sum = 0
    for word in final_list:
        word2 = word
        if word2 != word1:
            num = cossim(word1,word2)
            sum = sum + num
    average = float(sum/(len(final_list)-1))
    ave_list.append(average) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T23:13:37.207

```
from operator import itemgetter

# Make the word list.
word_list = ['my', 'bro', 'myline'] 

# Do your code here to create ave_list

# Fetch the min index and min value of ave_list
min_index, minvalue = min(enumerate(ave_list), key = itemgetter(1) )

# Now get the word at the same min index location.
min_word = word_list[min_index] 
```

# android - 用于设置墙纸的 Android 代码耗时过长

> ID：10149380
> 
> 赞同：1
> 
> 时间：2012-04-13T23:04:44.607
> 
> 标签：android, optimization, wallpaper

基本上一直在尝试通过基于位置的应用程序设置壁纸。

```
WallpaperManager wManager;
Bitmap bitmap;
try {
    bitmap = BitmapFactory.decodeFile(wallSrc);
    wManager = WallpaperManager.getInstance(getApplicationContext());
    wManager.setBitmap(bitmap);
}
catch (Exception e) {
    e.printStackTrace();
} 
```

分析代码指出该行

```
wManager.setBitmap(bitmap); 
```

是这里的罪魁祸首。这似乎花费了不合理的大量时间来执行。有更快的机制来做同样的事情吗？或改写问题-知道图像的路径，将其设置为墙纸的最快方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T23:20:08.447

[`setStream`](http://developer.android.com/reference/android/app/WallpaperManager.html#setStream%28java.io.InputStream%29)可能会更快，因为您不必手动解码位图。但实际上，必须对其进行解码……很*可能*您只是使用了太大的位图。

# excel - 使用 Excel VBA 检测非空的最后一个单元格位置

> ID：10149382
> 
> 赞同：1
> 
> 时间：2012-04-13T23:04:56.663
> 
> 标签：excel, vba

![在此处输入图像描述](../Images/4bcda391aac846e098d9c6d4b5e5fd05.png)

在我的 Excel 表中，我有 VBA 代码来检测 A 列中的最后一个非空单元格，并在该单元格中添加增量序列号值（在下面的示例中，单元格 A6 的值应该是 SN104）。

此处理仅限于 A 列，在此图像示例中，第一个非空最后一个单元格位于 A6，有时它可能在 100 个单元格或 1000 个单元格之后。

有没有简单的方法来处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T23:59:51.193

```
Public Function GetLastCell(ByVal startRng as Range) as Range

    With startRng
        Set GetLastCell = IIf(.Offset(1).Value = "", .Offset(0), .End(xlDown))
    End With

End Function 
```

对于您的示例，您可以定义一个 Range 变量 rng，并以这种方式调用上述函数：

```
Dim rng as Range
Set rng = GetLastCell( Range("A1") ) 
```

然后 rng 指的是 A 列的最后一个单元格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T23:31:05.717

就像是

```
Dim lngLastUsedRow as Integer
lngLastUsedRow = Range("A65536").End(xlUp).Row

Dim lngFirstEmptyRow as Integer
lngFirstEmptyRow = Range("A65536").End(xlUp).Offset(1,0)

// do your increment
newValue = Cint(Mid(CurrentWorkSheet.Range("A" + lngLastUsedRow).Value,2)) + 1

CurrentWorkSheet.Range("A" & lngFirstEmptyRow).Value = "SN" + newValue 
```

我没有excel，我现在无法测试它。但这应该让你开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T02:53:27.690

像这样的东西

1.  在任何 Excel 版本中查找真正最后使用的单元格，并处理空白结果
2.  解析最后一个非空白单元格中的字符串（处理任何长度的字母然后数字）以更新下一个空白单元格

    ```
    Sub GetTrueLastCell()
    Dim rng1 As Range
    Dim objRegex As Object
    Dim strFirst As String
    Set rng1 = Columns("A").Find("*", [a1], xlFormulas)
    If Not rng1 Is Nothing Then
        Set objRegex = CreateObject("vbscript.regexp")
        With objRegex
            .Pattern = "^(.+?[^\d])(\d+)$"
            If .test(rng1.Value) Then
                strFirst = .Replace(rng1.Value, "$1")
                rng1.Value = strFirst & (Val(Right$(rng1.Value, Len(rng1.Value) - Len(strFirst)) + 1))
            End If

        End With
    Else
        MsgBox "Data range is blank"
    End If
    End Sub 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-09T14:03:57.867

假设：

*   列表中的下一个单元格为空
*   序列 N 的 ' ' 字符串后只有三位数字`SN`（即，如果达到 1000，则较早的不需要填充，如 ' `0100`'

-

```
Dim rAll As Range, rLast As Range, rNext As Range, iNextSN As Integer

Set rAll = Intersect(Sheet1.Cells(1).CurrentRegion, Sheet1.Columns(1)) ' Column 'A' can be contiguous with others
Set rLast = rAll.Cells(rAll.Cells.Count) ' Last cell in current list
Set rNext = rLast.Offset(1) ' Next cell below current list

iNextSN = CInt(Right(rLast.Value, 3)) ' Get value of last serial N
rNext.Value = "SN" & iNextSN + 1 ' Assemble next SN with increment 
```

-

# php - 从字符串中删除多个重复字符

> ID：10149383
> 
> 赞同：3
> 
> 时间：2012-04-13T23:04:56.680
> 
> 标签：php, string

我有这样的字符串：

```
$str = 'This -----is a bbbb test'; 
```

如果重复出现超过 3 次，如何删除所有重复字符？

因此，例如，上面的字符串必须如下所示：

```
'This is a  test'; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T23:07:01.467

您可以使用[正则表达式](http://php.net/manual/en/book.pcre.php)和[`preg_replace()`](http://php.net/preg_replace)：

```
$new_str = preg_replace('/(.)\1{3,}/', '', $str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T23:07:56.743

```
$t = preg_replace('/(\S)\1{3,}/', '', $t); 
```

每个超过 3 个字符*的非空格都将被替换为**空*

# javascript - 使用 jquery ajax 请求拦截响应标头

> ID：10149386
> 
> 赞同：0
> 
> 时间：2012-04-13T23:05:09.253
> 
> 标签：javascript, jquery, ajax, header, response

正是标题所暗示的：

我对我的服务器执行 ajax 请求，它以 403 响应，但是我想检索并保存在 localStorage 上的标头。这适用于 phonegap 应用程序（Android 和 iOS），因此启动域是本地 (file://)。执行调用时，我使用以下代码尝试拦截响应，但它返回未定义或空字符串。

阿贾克斯：

```
 $.ajax({
        url: serverLink+action,
        type: "POST",
        data: "access_token="+accessToken+"&uid="+uid,
        crossDomain: true,
        complete: function(resp){
            var header = resp.getAllResponseHeaders();
            var match = header.match(/(Set-Cookie|set-cookie): (.+?);/);
            if (match) session = match[2];
            console.log(header, session)
        }
    }) 
```

响应标头

```
Connection  Keep-Alive
Content-Encoding    gzip
Content-Length  1198
Content-Type    text/html
Date    Fri, 13 Apr 2012 22:51:02 GMT
Keep-Alive  timeout=15, max=100
Server  Apache/2.2.14 (Ubuntu)
Set-Cookie  sessionid=ebd26167e32bada2d2ed0bd3cc16d8a2; expires=Fri, 27-Apr-2012 22:51:02 GMT; Max-Age=1209600; Path=/
Vary    Cookie,Accept-Encoding 
```

进一步阅读将我带到了[这里](https://stackoverflow.com/questions/5100539/django-csrf-check-failing-with-an-ajax-post-request)，它谈到了 django 服务器上的 CSRF。我们正在使用 django 服务器，我怀疑这个或 403 是问题所在。似乎没有办法（从那里的示例答案中）从 webview 收集 cookie 并在后续请求中将其发送回服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T23:07:54.890

使用 jquery XHR 对象作为 getAllResponseHeaders() 方法，它应该提供你所追求的。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:22:39.300

这个问题肯定是由 django 服务器上的 CSRF 保护引起的。根据 django 禁用或实施解决方法是解决此问题的唯一方法。

实际上这篇文章帮助很大：[Django CSRF check failed with an Ajax POST request](https://stackoverflow.com/questions/5100539/django-csrf-check-failing-with-an-ajax-post-request)

# c# - 不使用 Log() 查找位位置

> ID：10149388
> 
> 赞同：1
> 
> 时间：2012-04-13T23:06:04.140
> 
> 标签：c#, sql, bit-manipulation

我有一个整数输入，它是 2 的幂（1、2、4、8 等）。我希望函数在不使用 log() 的情况下返回位位置。例如，对于上面的输入将分别返回 {0, 1, 2, 3} 对于 C#。另外，如果这可以在 SQL 中完成。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T23:11:32.627

我的 Mac 上没有 VS 来测试这个，但是你想要这样的东西吗？

```
public static int Foo(int n)
{
    if (n <= 0)
    {
        return -1; // A weird value is better than an infinite loop.
    }
    int i = 0;
    while (n % 2 == 0)
    {
        n /= 2;
        i++;
    }

    return i;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T04:26:14.013

我发现执行此操作的最快代码来自 Bit Twiddling Hacks 网站。具体来说，基于 DeBruijn 序列的查找。见[http://graphics.stanford.edu/~seander/bithacks.html#IntegerLogDeBruijn](http://graphics.stanford.edu/~seander/bithacks.html#IntegerLogDeBruijn)

我测试了一种简单的方法、一种基于开关的方法和两种 Bit Twiddling Hacks 方法：DeBruijn 序列和另一个说“如果你知道你的值是 2 的幂”的方法。

我对一组 3200 万次方的 2 进行了所有这些操作。即 2^N 形式的整数，其中 N 在 0..30 范围内。2^31 的值是一个负数，这会导致天真的方法进入无限循环。

我在发布模式下使用 Visual Studio 2010 编译了代码，并在没有调试器的情况下运行它（即 Ctrl+F5）。在我的系统上，几十次运行的平均值是：

*   朴素方法：950 毫秒
*   切换方式：660ms
*   Bithack 方法 1：1,154 毫秒
*   德布鲁因：105 毫秒

很明显，DeBruijn 序列方法比其他任何方法都快得多。另一种 Bithack 方法在这里较差，因为从 C 到 C# 的转换会导致一些低效率。例如，C 语句`int r = (v & b[0]) != 0;`最终需要`if`C# 中的一个或一个三元运算符（即 ?:）。

这是代码。

```
class Program
{
    const int Million = 1000 * 1000;
    static readonly int NumValues = 32 * Million;

    static void Main(string[] args)
    {
        // Construct a table of integers.
        // These are random powers of two.
        // That is 2^N, where N is in the range 0..31.
        Console.WriteLine("Constructing table");
        int[] values = new int[NumValues];
        Random rnd = new Random();
        for (int i = 0; i < NumValues; ++i)
        {
            int pow = rnd.Next(31);
            values[i] = 1 << pow;
        }

        // Run each one once to make sure it's JITted
        GetLog2_Bithack(values[0]);
        GetLog2_DeBruijn(values[0]);
        GetLog2_Switch(values[0]);
        GetLog2_Naive(values[0]);

        Stopwatch sw = new Stopwatch();
        Console.Write("GetLog2_Naive ... ");
        sw.Restart();
        for (int i = 0; i < NumValues; ++i)
        {
            GetLog2_Naive(values[i]);
        }
        sw.Stop();
        Console.WriteLine("{0:N0} ms", sw.ElapsedMilliseconds);

        Console.Write("GetLog2_Switch ... ");
        sw.Restart();
        for (int i = 0; i < NumValues; ++i)
        {
            GetLog2_Switch(values[i]);
        }
        sw.Stop();
        Console.WriteLine("{0:N0} ms", sw.ElapsedMilliseconds);

        Console.Write("GetLog2_Bithack ... ");
        sw.Restart();
        for (int i = 0; i < NumValues; ++i)
        {
            GetLog2_Bithack(values[i]);
        }
        Console.WriteLine("{0:N0} ms", sw.ElapsedMilliseconds);

        Console.Write("GetLog2_DeBruijn ... ");
        sw.Restart();
        for (int i = 0; i < NumValues; ++i)
        {
            GetLog2_DeBruijn(values[i]);
        }
        sw.Stop();
        Console.WriteLine("{0:N0} ms", sw.ElapsedMilliseconds);

        Console.ReadLine();
    }

    static int GetLog2_Naive(int v)
    {
        int r = 0;
        while ((v = v >> 1) != 0)
        {
            ++r;
        }
        return r;
    }

    static readonly int[] MultiplyDeBruijnBitPosition2 = new int[32]
    {
        0, 1, 28, 2, 29, 14, 24, 3, 30, 22, 20, 15, 25, 17, 4, 8, 
        31, 27, 13, 23, 21, 19, 16, 7, 26, 12, 18, 6, 11, 5, 10, 9
    };

    static int GetLog2_DeBruijn(int v)
    {
        return MultiplyDeBruijnBitPosition2[(uint)(v * 0x077CB531U) >> 27];
    }

    static readonly uint[] b = new uint[] { 0xAAAAAAAA, 0xCCCCCCCC, 0xF0F0F0F0, 0xFF00FF00, 0xFFFF0000};

    static int GetLog2_Bithack(int v)
    {
        int r = (v & b[0]) == 0 ? 0 : 1;
        int x = 1 << 4;
        for (int i = 4; i > 0; i--) // unroll for speed...
        {
            if ((v & b[i]) != 0)
                r |= x;
            x >>= 1;
        }
        return r;
    }

    static int GetLog2_Switch(int v)
    {
        switch (v)
        {
            case 0x00000001: return 0;
            case 0x00000002: return 1;
            case 0x00000004: return 2;
            case 0x00000008: return 3;
            case 0x00000010: return 4;
            case 0x00000020: return 5;
            case 0x00000040: return 6;
            case 0x00000080: return 7;
            case 0x00000100: return 8;
            case 0x00000200: return 9;
            case 0x00000400: return 10;
            case 0x00000800: return 11;
            case 0x00001000: return 12;
            case 0x00002000: return 13;
            case 0x00004000: return 14;
            case 0x00008000: return 15;
            case 0x00010000: return 16;
            case 0x00020000: return 17;
            case 0x00040000: return 18;
            case 0x00080000: return 19;
            case 0x00100000: return 20;
            case 0x00200000: return 21;
            case 0x00400000: return 22;
            case 0x00800000: return 23;
            case 0x01000000: return 24;
            case 0x02000000: return 25;
            case 0x04000000: return 26;
            case 0x08000000: return 27;
            case 0x10000000: return 28;
            case 0x20000000: return 29;
            case 0x40000000: return 30;
            case int.MinValue: return 31;
            default:
                return -1;
        }
    }
} 
```

如果我通过展开循环并使用常量而不是数组查找来优化 Bithack 代码，则它的时间与 switch 语句方法的时间相同。

```
static int GetLog2_Bithack(int v)
{
    int r = ((v & 0xAAAAAAAA) != 0) ? 1 : 0;
    if ((v & 0xFFFF0000) != 0) r |= (1 << 4);
    if ((v & 0xFF00FF00) != 0) r |= (1 << 3);
    if ((v & 0xF0F0F0F0) != 0) r |= (1 << 2);
    if ((v & 0xCCCCCCCC) != 0) r |= (1 << 1);
    return r;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T23:13:23.733

0] 如果数字为零或负数，则返回/抛出错误

1] 在您的语言中，找到将数字转换为基数 2 的结构。

2] 将 base-2 值转换为字符串

3] 返回字符串长度减1。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T23:23:37.373

冗长的代码，但可能是最快的：

```
if (x < 1)
    throw SomeException();
if (x < 2)
    return 0;
if (x < 4)
    return 1;
if (x < 8)
    return 2;
//.... etc. 
```

这不涉及除法，也不涉及双重转换。它只需要比较，这是非常快速的。有关讨论，请参见[Code Complete，第 2 版](http://cc2e.com/)，第 633 页。

如果您知道输入始终是 2 的幂，您可能会从 switch 块中获得更好的性能：

```
switch (input)
{
    case 1:
        return 0;
    case 2:
        return 1;
    case 4:
        return 2;
    case 8:
        return 3;
    //...
    default:
        throw SomeException();
} 
```

我在 1000 万个随机整数和 1000 万个随机选择的 2 次方上测试了性能。结果：

> *   Bithacks 1：1360 毫秒
> *   Bithacks 2：1103 毫秒
> *   如果：1320 毫秒
> *   Bithacks 1（2 的幂）：1335 毫秒
> *   Bithacks 2（2 的幂）：1060 毫秒
> *   Bithacks 3（2 的幂）：1286 毫秒
> *   如果（2 的幂）：1026 毫秒
> *   开关（2 的幂）：896 毫秒

我将迭代次数增加了十倍，得到了这些结果：

> *   Bithacks 1：13347 毫秒
> *   Bithacks 2：10370 毫秒
> *   如果：12918 毫秒
> *   Bithacks 1（2 的幂）：12528 毫秒
> *   Bithacks 2（2 的幂）：10150 毫秒
> *   Bithacks 3（2 的幂）：12384 毫秒
> *   如果（2 的幂）：9969 毫秒
> *   开关（2 的幂）：8937 毫秒

现在我没有做任何分析来查看我是否在将位黑客转换为 C# 代码时做了一些愚蠢的事情，也没有查看计算日志的函数花费了多少执行时间。所以这只是一种粗略的计算，但它确实表明 if 方法与 bit hacks 算法大致相同，并且 switch 更快一些。此外，*if 和 switch 方法更容易理解和维护。*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-14T11:00:56.770

这是一种 CPU 友好的方式：

```
int bitpos=-1;
while(num>0) {
    num = num>>1;
    bitpos++;
}
return bitpos; 
```

对于 SQL，使用`CASE`. `IF....ELSE`如果性能是一个问题，您可以使用嵌套进行二进制搜索。但是只有 32 个可能的值，实现它的开销可能远远超过简单的顺序搜索。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-12-03T14:07:10.233

在用 C 编码的 2 字节幂（仅设置一个位的 uint8 标志）中查找位位置（不了解 C#）

这将返回位位置 1..8 - 您可能需要减少索引 0..7 的结果。

```
int pos(int a){
    int p = (a & 3) | ((a >> 1) & 6) | ((a >> 2) & 5) | ((a >> 3) & 4) | ((a >> 4) & 15) | ((a >> 5) & 2) | ((a >> 6) & 1);
    return p;
} 
```

有关代码片段“演变”的信息，请参阅我的博文[http://blog.edutoolbox.de/?p=263](http://blog.edutoolbox.de/?p=263)

**编辑：**

deBruijn 样式大约快 100 倍...

# objective-c - RE：带有属性字符串的自动旋转、滚动、项目符号、缩进 UIScrollView

> ID：10149389
> 
> 赞同：1
> 
> 时间：2012-04-13T23:06:13.517
> 
> 标签：objective-c, ios, uiscrollview, calayer, core-text

这制作起来很麻烦，而且由于我从 SO 贡献者那里得到了很多帮助，所以发布结果似乎是公平的（作为答案，如下）。如果您正在寻找涉及 iOS 和 Core Text 中的属性字符串和滚动的示例，这里将它们组合在一起。

一些额外的点：

**包装：**

这是由属性字符串的 lineBreakMode 完成的，默认为换行。您将无法从字符串中检索软换行符（与 Cocoa 中不同，其中 NSTextView 将 '\n' 字符放入字符串中）。但你不需要。您可以依靠 Core Text 的 Framesetter 为您提供给定帧中字符串的高度——只要您将前导信息放入属性字符串中。

**CATextLayer：**

使用起来很方便。您所要做的就是分配一个属性字符串，然后它会包装和绘制。如果您有一个短字符串要使用选定的字体显示，那就太好了。但是 CATextLayer 不识别前导或缩进，所以对于这个项目，我直接绘制到 CALayer。

**字体：**

我在很大程度上坚持使用 CTFontRef，因为它是在 iOS 中构建属性字符串所必需的，并且它提供了准确的引导，但有时使用 UIFont 更容易。这是一种将 CTFontRef ( `fontr`) 转换为 UIFont 的方法：

```
NSString *sFontName = (NSString *)CTFontCopyName(fontr, kCTFontPostScriptNameKey);
UIFont *font = [UIFont fontWithName:sFontName size:CTFontGetSize(fontr)];
CGSize sizeString = [string sizeWithFont:font];
[sFontName release]; 
```

如果您从头开始创建 UIFont，请注意它将接受字体名称的系列部分中的空格，或者您可以将它们拼凑在一起，但“粗体”必须用连字符分隔：

```
self.fontTickerNormal = [UIFont fontWithName:@"Helvetica Neue" 
                                        size:18.0f]; // OK
self.fontTickerIndent = [UIFont fontWithName:@"HelveticaNeue" 
                                        size:16.0f]; // OK too 
self.fontTickerBold = [UIFont fontWithName:@"HelveticaNeue-Bold" 
                                      size:18.0f];   // both the smash and the hyphen are required 
```

CTFontRef 更直接。所有名称部分都可以用空格分隔。以下工作正常：

```
 self.fontrTickerBold = CTFontCreateWithName((CFStringRef)@"Helvetica Neue Bold", 18.0f, NULL); 
```

Answer-example to follow...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T23:23:32.337

Prepare the Components: Most examples are easier to read because they assemble the strings and their attributes all in one place (i.e. [clear example](https://stackoverflow.com/questions/6644501/objective-c-nsattributedstring-inserting-a-bullet-point)), but if you don’t hang onto all the components, you’ll get bad-access exceptions when the views use the strings, so it seems best to set everything up in the UIViewController’s viewDidLoad:

```
- (void)viewDidLoad {
[super viewDidLoad];

// FONTS ETC.

// Prepare fonts for the ticker display.
self.fontrTickerNormal = CTFontCreateWithName((CFStringRef)@"Helvetica Neue", 18.0f, NULL);
self.fontrTickerBold = CTFontCreateWithName((CFStringRef)@"Helvetica Neue Bold", 18.0f, NULL);
self.fontrTickerIndent = CTFontCreateWithName((CFStringRef)@"Helvetica Neue", 16.0f, NULL);
// Determine width of bullet sub-indent
// (Use a UIFont and UIKit's sizeWithFont. No need to fuss with framesetter and leading here; all we need is width.)
UIFont *fontTickerIndent_uif = [UIFont fontWithName:@"Helvetica Neue" size:16.0f]; 
NSString *stringWithBullet = [NSString stringWithUTF8String:"\u2022"]; // bullet char
NSString *stringWithBulletPlusSpace = [stringWithBullet stringByAppendingString:@"  "];
CGSize sizeBulletPlusSpace = [stringWithBulletPlusSpace sizeWithFont:fontTickerIndent_uif];
self.fWidthBulletPlusSpace = sizeBulletPlusSpace.width;
// Prepare bulleted string to which text can be appended
NSString *stringBulletBuild = [@"\n" stringByAppendingString:stringWithBullet];
stringBulletBuild = [stringBulletBuild stringByAppendingString:@"\t"];
self.sBulletedLineBreak = stringBulletBuild;

// Initialize the collections that will hold onto the individual strings and dicts via alloc, as opposed to an autoreleased method, so that we can control the order in which they are released in viewDidUnload. (If dicts were to be released before the strings that use them, there would be a bad-access crash):
NSMutableArray *asmarrTickerStringsNew = [[NSMutableArray alloc] initWithCapacity:20]; // guess
self.asmarrTickerStrings = asmarrTickerStringsNew;
[asmarrTickerStringsNew release];
NSMutableArray *dmarrTickerAttributesNew = [[NSMutableArray alloc] initWithCapacity:20]; // one per string
self.dmarrTickerAttributes = dmarrTickerAttributesNew;
[dmarrTickerAttributesNew release];
// Don't initialize the cumulative-string ppty (mattrStgr) here. There is no way of appending to an empty CFMutableAttributedStringRef, so you have to wait till the first string goes through addProgressTickerLine.

// STYLE SETTINGS:

// paragStyleNormal:
CFIndex countSettings = 3; // normal and bold styles both have 3 settings
// - left alignment (the default, but just in case)
CTTextAlignment alignment = kCTLeftTextAlignment;
CTParagraphStyleSetting styleAlignLeft = { kCTParagraphStyleSpecifierAlignment, sizeof(CTTextAlignment), &alignment };
// - wrapping (again the default, but just in case)
CTLineBreakMode wrapping = kCTLineBreakByWordWrapping;
CTParagraphStyleSetting styleWrapped = { kCTParagraphStyleSpecifierLineBreakMode, sizeof(CTLineBreakMode), &wrapping };
// - normal leading (so framesetter calculates the correct height)
CGFloat fLeadingNormal = CTFontGetLeading(self.fontrTickerNormal);
CTParagraphStyleSetting styleLeadingNormal = { kCTParagraphStyleSpecifierLineSpacingAdjustment, sizeof(CGFloat), &fLeadingNormal };
CTParagraphStyleSetting arrSettingsNormal[] = { styleAlignLeft, styleWrapped, styleLeadingNormal };
self.paragStyleNormal = CTParagraphStyleCreate(arrSettingsNormal, countSettings);
// paragStyleBold:
// - bold leading (otherwise this style is same as normal)
CGFloat fLeadingBold = CTFontGetLeading(self.fontrTickerBold);
CTParagraphStyleSetting styleLeadingBold = { kCTParagraphStyleSpecifierLineSpacingAdjustment, sizeof(CGFloat), &fLeadingBold };
CTParagraphStyleSetting arrSettingsBold[] = { styleAlignLeft, styleWrapped, styleLeadingBold };
self.paragStyleBold = CTParagraphStyleCreate(arrSettingsBold, countSettings);
// paragStyleIndent:
// - indented leading (font is smaller)
CGFloat fLeadingIndent = CTFontGetLeading(self.fontrTickerIndent);
CTParagraphStyleSetting styleLeadingIndent = { kCTParagraphStyleSpecifierLineSpacingAdjustment, sizeof(CGFloat), &fLeadingIndent };
// - Indent the first line up to the bullet.
CGFloat indentFirstLineHead = 15.0f; 
CTParagraphStyleSetting styleFirstLineHeadIndent = { kCTParagraphStyleSpecifierFirstLineHeadIndent, sizeof(CGFloat), &indentFirstLineHead };
// - Add a tab stop to allow for the bullet and some following space.  
self.tabStop = CTTextTabCreate(alignment, (double)self.fWidthBulletPlusSpace, NULL); 
CTTextTabRef tabStopPtr[] = { self.tabStop };
self.cfarrTabStop = CFArrayCreate(NULL, (const void **) tabStopPtr, 1, NULL); 
CTParagraphStyleSetting styleTabStops = { kCTParagraphStyleSpecifierTabStops, sizeof(CTTextTabRef), &cfarrTabStop };
// - Indent the wrapped lines to the same point as the tab stop.
CGFloat indentHead = indentFirstLineHead + self.fWidthBulletPlusSpace;
CTParagraphStyleSetting styleHeadIndent = { kCTParagraphStyleSpecifierHeadIndent, sizeof(CGFloat), &indentHead };
// Put paragStyleIndent together.
countSettings += 3; // 3 style settings added (firstLineHeadIndent, tabStop, and HeadIndent)
CTParagraphStyleSetting arrSettingsIndent[] = { styleAlignLeft, styleWrapped, styleLeadingIndent, styleFirstLineHeadIndent, styleTabStops, styleHeadIndent };  
self.paragStyleIndent = CTParagraphStyleCreate(arrSettingsIndent, countSettings);

// LAYER AND SCROLLVIEW

// Set up the layer for the progress ticker.
CGSize sizeTicker = self.svProgressTicker.layer.bounds.size;
// Frame the layer:
/*
 - Don't add any padding to the X origin; the scrollview apparently figures some into its bounds automatically.
 - Do add some padding to the Y origin; otherwise the first string will hug the top.
 - Decrease the width to allow for the scrollbar, which the scrollview bounds do not account for.
 - Height is 0 for now, since it doesn't have any strings yet.
 */
CGRect rectTickerInset = CGRectMake(0.0f, kMargin, sizeTicker.width - kMargin, 0.0f);
CALayer *layerTicker = [CALayer layer];
[layerTicker setFrame:rectTickerInset];
// Assign this controller as the delegate and add it to the scrollview's root layer. 
// (See headnote to the drawLayer method.)
[layerTicker setDelegate:self];
self.layProgressTicker = layerTicker;
[svProgressTicker.layer addSublayer:self.layProgressTicker];
// Set the scrollView's contentSize per the layer's frame -- which will become taller with each appended string until it exceeds the scrollView's bounds.
[self.svProgressTicker setContentSize:CGSizeMake(rectTickerInset.size.width, rectTickerInset.size.height)];
[self.svProgressTicker setClipsToBounds:YES]; // otherwise the contents will overflow the border.

} 
```

Append the Strings:

(using these constants:)

```
#define kTickerStyleNormal           0
#define kTickerStyleIndent           1
#define kTickerStyleBold             2
#define kTickerStyleFirstLine        3

/**
 Appends the string arg to the Progress Ticker scrollView, styled per uiStyle.
 Note: String arg should NOT have any line breaks.
 */
- (void) addProgressTickerLine:(NSString *)string 
                       inStyle:(uint8_t)uiStyle {

// Determine the font.
CTFontRef fontr = nil;
switch (uiStyle) {
    case kTickerStyleNormal:
        fontr = self.fontrTickerNormal;
        break;
    case kTickerStyleIndent:
        fontr = self.fontrTickerIndent;
        break;
    case kTickerStyleBold:
        fontr = self.fontrTickerBold;
        break;
    case kTickerStyleFirstLine:
        fontr = self.fontrTickerBold;
        break;
    default:
        fontr = self.fontrTickerNormal;
        break;
}

// Prepare the paragraph style (preassembled in viewWillAppear), to govern inter-line height and indentation. 
// At the same time, add the initial line break.
CTParagraphStyleRef paragStyle = NULL; 
switch (uiStyle) {
    case kTickerStyleNormal:
        string = [@"\n" stringByAppendingString:string];
        paragStyle = self.paragStyleNormal;
        break;
    case kTickerStyleBold:
        // For main un-indented lines, simply add a line break.
        string = [@"\n" stringByAppendingString:string];
        paragStyle = self.paragStyleBold;
        break;
    case kTickerStyleFirstLine: {
        paragStyle = self.paragStyleBold;
        // No line break for the first line.
        // (Q: Why not avoid this case by putting line break at the end, rather than the beginning?)
        // (A: The indented string would then require 2 steps to sandwich it between the bullet-tab and the line break.)
        break;
    }
    case kTickerStyleIndent: {
        // For indented bullet lines, prepend lineBreak-bullet-tab to the string.
        string = [self.sBulletedLineBreak stringByAppendingString:string];
        // Assign the indented paragStyle.
        paragStyle = self.paragStyleIndent; 
        break;
    }
    default: // just in case
        paragStyle = self.paragStyleNormal;
        break;
}

// Determine the text (foreground) color per...
UIColor *colorHSV = [UIColor blueColor]; // switch-case omitted

// PUT IT ALL TOGETHER.

// Combine the above into a dictionary of attributes.
CFStringRef keys[] = { kCTFontAttributeName, kCTParagraphStyleAttributeName, kCTForegroundColorAttributeName };
CFTypeRef values[] = { fontr, paragStyleIndent, colorHSV.CGColor };
CFDictionaryRef dictr = CFDictionaryCreate(NULL, 
                                           (const void **)&keys, 
                                           (const void **)&values,
                                           sizeof(keys) / sizeof(keys[0]), 
                                           &kCFTypeDictionaryKeyCallBacks, 
                                           &kCFTypeDictionaryValueCallBacks);
[self.dmarrTickerAttributes addObject:(id)dictr]; // provides for release

// Use the attributes dictionary to make an attributed string out of the plain string.
CFAttributedStringRef attrStgr = CFAttributedStringCreate(kCFAllocatorDefault, (CFStringRef)string, dictr);    
[self.asmarrTickerStrings addObject:(id)attrStgr]; // provides for release
// Adding an object to a collection increments its retain count, so attrStgr are now at count 2 and should be decremented to 1; they will be brought to 0 upon release of the collections.
CFRelease(attrStgr);
CFRelease(dictr);

// If cumulative attrStg is nil, initialize it with a maxLength of 0 to indicate that it is unlimited.
if (!self.mattrStgr)
    self.mattrStgr = CFAttributedStringCreateMutableCopy(kCFAllocatorDefault, 0, attrStgr); 
// Else append the newly completed attrStg, using the method suggested in the CFMutableAttributedString class ref overview.
else {
    CFRange rangeAppend = CFRangeMake(CFAttributedStringGetLength(self.mattrStgr), 0);
    CFAttributedStringReplaceAttributedString(self.mattrStgr, rangeAppend, attrStgr);
}

// DISPLAY IT. 

// Now that the new string has been appended, call the method that will adjust the contentSize, trigger the draw method, and scroll to the end.
[self adjustProgressTickerFrame];

// Do NOT release attrstg or any of its styling components here. They are needed cumulative string property is voided. They have been propertized so that they can be released in dealloc (here in viewDidUnload).

} 
```

Adjust the height, call drawLayer, and scroll to bottom:

```
/**
 Adjust the height of the scrollView and its content layer to accommodate newly appended strings and/or orientation change, redraw the layer, and scroll to the bottom.
 Called at the end of addProgressTickerLine and upon willAnimateRotationToInterfaceOrientation.
 */
- (void) adjustProgressTickerFrame {

// Get the width within which the text has to fit in the view's current frame.
CGSize sizeTickerView = self.svProgressTicker.layer.bounds.size;
CGFloat fWidthInset = sizeTickerView.width - kMargin;

// Make a framesetter in order to get the size of the cumulative string.
/*
 Note re Leading: 
 - The framesetter will suggest too short a height unless the attributed string has paragraphStyle attributes that specify the leading.
 - But if you attempt to do an efficient setNeedsDisplay:InRect routine, drawing only the last-appended string per its individual height, framesetter will report the the hard line breaks as a full line, not just as leading, so you'll end up with dimensions that are much too tall. There's no choice but to get the full size and draw the full cumulative string each time.
 */
CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString(self.mattrStgr);
CFIndex length = CFAttributedStringGetLength(self.mattrStgr);
CFRange textRange = CFRangeMake(0, length);
CFRange fitRange;
CGSize sizeString = CTFramesetterSuggestFrameSizeWithConstraints(framesetter, textRange, NULL, CGSizeMake(fWidthInset, CGFLOAT_MAX), &fitRange);

// Round the reported height up. Dimensions are reported as very precise fractions, but framing and drawing is by whole pixels.
CGFloat fHeight = ceilf(sizeString.height);

// Reframe the layer.
CGRect rectTickerInset = CGRectMake(0.0f, kMargin, sizeTickerView.width - kMargin, fHeight); 
[self.layProgressTicker setFrame:rectTickerInset];

// Adjust the scrollView's contentSize.
// (It should be slightly taller than the layer, to add padding at top and bottom.)
[self.svProgressTicker setContentSize:CGSizeMake(fWidthInset, (fHeight + (kMargin*2)))];

// Redraw the entire layer.
[self.layProgressTicker setNeedsDisplay];

// If the layer is now taller than the scrollView's bounds, scroll down.
// Do NOT use animation. 
// (If you do when the view first appears, it won't scroll down far enough, should the view be assigned lots of string content initially. (Presumably the initial autorotation anim prevents this one from being completed.) And afterwards, it doesn't make any difference; there's a spring action that happens regardless.)
CGFloat fHeightExcess = fHeight - (sizeTickerView.height - (kMargin*2)); 
if (fHeightExcess > 1.0f)
    [self.svProgressTicker setContentOffset:CGPointMake(0.0f, fHeightExcess) animated:NO];

} 
```

Draw:

```
/**
 CALayer's delegate method for drawing its content, triggered by calling setNeedsDisplay on the layer. 

 This controller is assigned as the layer's delegate, and calls setNeedsDisplay when:
 1) a string is appended
 2) the device is rotated into a different aspect ratio

 Q: Why not subclass UIScrollView and have IT be the delegate? After all, the class ref says the view associated with the layer must be the delegate.
 A1: Apparently "associated" in Apple-speak means as in view to its ROOT layer. Sublayers can have any delegate you choose.
 A2: If scrollView is the delegate and does the content drawing, the app will crash. ScrollView probably issues setNeedsDisplay:inRect: gazillions of times as it scrolls, overwhelming the processor.
 */
- (void)drawLayer:(CALayer *)layer inContext:(CGContextRef)ctx {

// Get the rect of the entire area available for drawing.
// (We cannot use the layer's frame rect directly because it has origin insets; they would be doubled if used here too.)
CGRect drawingRect = CGRectMake(0.0f, 0.0f, self.layProgressTicker.frame.size.width, self.layProgressTicker.frame.size.height); 

// Turn the context upside down to match the layer's orientation.
// (The context origin is at the lower left, whereas the layer origin is at the upper left.)
CGContextSetTextMatrix(ctx, CGAffineTransformIdentity);
CGContextTranslateCTM( ctx, drawingRect.origin.x, drawingRect.size.height );
CGContextScaleCTM( ctx, 1, -1 );

// Make a rectangular path in which to draw.
CGMutablePathRef path = CGPathCreateMutable(); 
CGPathAddRect(path, NULL, drawingRect);

// Use Core Text's framesetter to frame the cumulative (mutable) attributed string inside the rectangular path.
CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString(self.mattrStgr);
CTFrameRef frame = CTFramesetterCreateFrame(framesetter, CFRangeMake(0, 0), path, NULL);    
CFRelease(framesetter); // ok to release here; it's not part of "frame"
CFRelease(path);

// Draw the framesetter frame.
CTFrameDraw(frame, ctx);
CFRelease(frame);

} 
```

Autorotation:

```
/*
 Autorotation methods are called in this order:
    1) shouldAutorotate
    2) willRotate
    3) willAnimate
    4) didRotate
 */
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {  
// Return YES to support all 4 orientations.
return YES;
}

- (void) willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
// "When this method is called, the interfaceOrientation property still contains the view’s original orientation." (So hang onto it.)
// You can't wait until willAnimate because, by then, that property will have been set to the new orientation.
// Which leaves a mystery: The didRotateFromInterfaceOrientation is called AFTER willAnimate, and at that point the view controller still is able to send in the fromInterfaceOrientation arg.
self.bFromPortrait = UIInterfaceOrientationIsPortrait([self interfaceOrientation]);    
}

- (void) willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {

// If rotating from portrait to landscape or vice versa, the text layers need adjustment. 
BOOL bToPortrait = UIInterfaceOrientationIsPortrait(toInterfaceOrientation);

if (self.bFromPortrait != bToPortrait) 
    [self adjustProgressTickerFrame];

} 
```

I think I’ve got this right: Here’s how to unload all this stuff (the retained properties are also released in dealloc):

```
- (void)viewDidUnload {

// It's unlikely that this view will go away and then come back, so viewDidLoad assumes all properties are null -- therefore nullify/release EVERYTHING here.

self.svProgressTicker = nil;
self.layProgressTicker = nil;
self.vSyncInstructions = nil;
self.tlSyncInstructions = nil;
self.btnSyncEtc = nil;

// Release the cumulative attributed string BEFORE releasing any of its component strings.
CFRelease(self.mattrStgr);
// Nullifying the retained collections will release them -- and their contents, whose retainCounts were incremented upon addition to the collection. So it's important to nullify the strings collection first, then the attr dicts.
self.asmarrTickerStrings = nil;
self.dmarrTickerAttributes = nil;
// Now we can release the "created" settings, then their components.
CFRelease(self.paragStyleNormal);
CFRelease(self.paragStyleBold);
CFRelease(self.paragStyleIndent);
CFRelease(self.tabStop);
CFRelease(self.cfarrTabStop);
CFRelease(self.fontrTickerNormal);
CFRelease(self.fontrTickerBold);
CFRelease(self.fontrTickerIndent);
CFRelease(self.fontrInstructions);
self.fontInstructionsBenchmark = nil;

[super viewDidUnload];

} 
```

![portrait scrolled down](../Images/a2c92c549b4202138ab35aca96cbb422.png) ![portrait scrolled up](../Images/83201701f9a6592762fa898139fdd599.png) ![landscape scrolled down](../Images/60723402f332ac283956851da9842cc6.png) ![landscape scrolled up](../Images/c4de8caf7becf7b790791f960c8c1c4a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-24T10:01:10.653

Here is nice solution with Swift

```
let label = UILabel()
label.frame = CGRect(x: 40, y: 100, width: 280, height: 600)
label.textColor = UIColor.lightGray
label.numberOfLines = 0

let arrayString = [
    "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
    "Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.",
    "Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.",
    "Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
]

label.attributedText = add(stringList: arrayString, font: label.font, bullet: "")

self.view.addSubview(label) 
```

Add bullet attributes

```
func add(stringList: [String],
         font: UIFont,
         bullet: String = "\u{2022}",
         indentation: CGFloat = 20,
         lineSpacing: CGFloat = 2,
         paragraphSpacing: CGFloat = 12,
         textColor: UIColor = .gray,
         bulletColor: UIColor = .blue) -> NSAttributedString {

    let textAttributes: [NSAttributedStringKey: Any] = [NSAttributedStringKey.font: font, NSAttributedStringKey.foregroundColor: textColor]
    let bulletAttributes: [NSAttributedStringKey: Any] = [NSAttributedStringKey.font: font, NSAttributedStringKey.foregroundColor: bulletColor]

    let paragraphStyle = NSMutableParagraphStyle()
    let nonOptions = [NSTextTab.OptionKey: Any]()
    paragraphStyle.tabStops = [
        NSTextTab(textAlignment: .left, location: indentation, options: nonOptions)]
    paragraphStyle.defaultTabInterval = indentation
    //paragraphStyle.firstLineHeadIndent = 0
    //paragraphStyle.headIndent = 20
    //paragraphStyle.tailIndent = 1
    paragraphStyle.lineSpacing = lineSpacing
    paragraphStyle.paragraphSpacing = paragraphSpacing
    paragraphStyle.headIndent = indentation

    let bulletList = NSMutableAttributedString()
    for string in stringList {
        let formattedString = "\(bullet)\t\(string)\n"
        let attributedString = NSMutableAttributedString(string: formattedString)

        attributedString.addAttributes(
            [NSAttributedStringKey.paragraphStyle : paragraphStyle],
            range: NSMakeRange(0, attributedString.length))

        attributedString.addAttributes(
            textAttributes,
            range: NSMakeRange(0, attributedString.length))

        let string:NSString = NSString(string: formattedString)
        let rangeForBullet:NSRange = string.range(of: bullet)
        attributedString.addAttributes(bulletAttributes, range: rangeForBullet)
        bulletList.append(attributedString)
    }

    return bulletList
} 
```

Here is result:

![enter image description here](../Images/d3e3b9c7203724ae255849c6f1095299.png)

# android - 带有 ListView 的 EditText

> ID：10149390
> 
> 赞同：0
> 
> 时间：2012-04-13T23:06:23.800
> 
> 标签：android, listview, simplecursoradapter

我知道这已经被介绍过很多次了，但我无法让它发挥作用。搜索过滤功能似乎不适用于我的`ListView`. 谁能帮我理解我的代码有什么问题？结果从我的数据库中提取得很好，但即使在我在我的`EditText`字段中输入文本后也没有过滤。我尝试`EditText`使用 Watcher 测试 on 关键更改，它工作正常，除了我的列表过滤。

非常感激。

```
public class Interface extends Activity implements OnClickListener,
    AdapterView.OnItemClickListener {

MyDbHelper mHelper;
SQLiteDatabase mDb;
Cursor mCursor;
SimpleCursorAdapter mAdapter, madapter;
ListView mList;
EditText returnsearch;
int textlength = 0;

public static final String TABLE_NAME = "hohom";
public static final String COL_SanID = "SandIdc";
public static final String COL_SanTitle = "SandTitleC";
public static final String COL_SanCat = "SandCatC";
public static final String COL_SanReadyin = "SandReadyinC";
public static final String COL_SandServing = "SandServingC";
public static final String COL_SandIngred = "SandIngredC";
public static final String COL_SandDirect = "SandDirectC";

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.recipesearch);

    mHelper = new MyDbHelper(this);
    mList = (ListView) findViewById(R.id.listlist);
    mList.setOnItemClickListener(this);
    mList.setTextFilterEnabled(true);

    returnsearch = (EditText) findViewById(R.id.searchrecipe);

    Bundle extrass = getIntent().getExtras();

    mDb = mHelper.getWritableDatabase();

    String Type = extrass.getString("CategoryType");

    String[] columns = new String[] {

    "_id", COL_SanID, COL_SanTitle, COL_SanCat, COL_SanReadyin,
            COL_SandServing, COL_SandIngred, COL_SandDirect };

    mCursor = mDb.query(TABLE_NAME, columns, COL_SanCat + "=" + "?",
            new String[] { Type }, null, null, null);

    final String[] headers = new String[] { MyDbHelper.COL_SanTitle,
            MyDbHelper.COL_SanReadyin, MyDbHelper.COL_SandServing };

    mAdapter = new SimpleCursorAdapter(this, R.layout.listtype, mCursor,
            headers, new int[] { R.id.listmaintitle, R.id.listreadyin,
                    R.id.listserving });

    mList.setAdapter(mAdapter);

}

@Override
protected void onResume() {

    super.onResume();

    returnsearch.addTextChangedListener(new TextWatcher() {

        public void onTextChanged(CharSequence s, int start, int before,
                int count) {

            mAdapter.getFilter().filter(s);
        }

        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        public void afterTextChanged(Editable s) {

            mAdapter.getFilter().filter(s);
            mAdapter.notifyDataSetChanged();
        }
    });
}

public void onClick(View v)

{

}

public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
    mCursor.moveToPosition(position);

    Intent b = new Intent(Interface.this, Recipe.class);

    String rowId = mCursor.getString(0);
    String Title = mCursor.getString(2);
    String Category = mCursor.getString(3);
    String Readyin = mCursor.getString(4);
    String Serving = mCursor.getString(5);
    String Ingredients = mCursor.getString(6);
    String Directions = mCursor.getString(7);

    b.putExtra("Title", Title);
    b.putExtra("Category", Category);
    b.putExtra("Readyin", Readyin);
    b.putExtra("Serving", Serving);
    b.putExtra("Ingredients", Ingredients);
    b.putExtra("Directions", Directions);

    startActivity(b);

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T00:04:27.717

也许这就是你需要的：

```
mAdapter.setFilterQueryProvider(
    new FilterQueryProvider() {
        public Cursor runQuery(CharSequence constraint) {
            return mDb.query(TABLE_NAME, columns, COL_SanCat + " = ? AND " + COL_SandIngred + " = ?", new String[] { Type, "%" + constraint + "%" }, null, null, null);
        }
    }
); 
```

**编辑**

我添加了关键字 return 以便它可以编译，抱歉。无论如何，如果用户输入“泡菜”，这应该会显示所有包含泡菜的三明治。

# c++ - 如何从封装发出它的对象的对象中捕获 C++ boost::signal？

> ID：10149391
> 
> 赞同：0
> 
> 时间：2012-04-13T23:06:24.027
> 
> 标签：c++, boost, containers, boost-signals

我有一个封装 TCP 连接的**TcpDevice**类，它有一个*onRemoteDisconnect*方法，只要远程端挂断，就会调用该方法。然后，有一个**SessionManager**对象创建**TcpSession**对象，该对象将 **TcpDevice**作为通信通道并将它们插入到内部指针容器中以供应用程序使用。如果任何托管的**TcpSessions**应该结束，我希望**SessionManager**实例得到通知，然后从容器中删除相应的会话，释放与其关联的资源。

我发现我的问题与这个问题非常相似：

[对象从容器中删除自身](https://stackoverflow.com/q/862093/1007502)

但由于他有一个用于检查连接状态的线程，它与我的有点不同，而且我打算使用*boost::signals*解决它的方式，所以我决定针对它提出一个新问题 - 如果它是我道歉错误的方法......我仍然对如何正确使用 SO 有感觉 :)

由于我对 QT 信号/插槽有点熟悉，我发现**boost::signals**提供了类似的机制（我已经在使用*boost::asio*并且在这个项目中没有 QT），所以我决定实现一个***remoteDeviceDisconnected***信号由**TcpDevice 的** *onRemoteDisconnect*发出，为此我将在**SessionManager**中有一个插槽，然后从容器中删除断开连接的会话和设备。

为了最初尝试，我在*tcpdevice.hpp 中将信号声明为***TcpDevice**的公共成员：

 *```
class TcpDevice
{
             (...)
  public:
    boost::signal <void ()> remoteDeviceDisconnected;
             (...)
} 
```

然后我从**TcpDevice 的** *onRemoteDisconnect*方法发出它，如下所示：

```
remoteDeviceDisconnected(); 
```

现在，有没有办法从会话管理器***内部*****将此信号连接到我的SessionManager**插槽？我试过这个：

 *```
unsigned int SessionManager::createSession(TcpDevice* device)
{
  unsigned int session_id = session_counter++;
  boost::mutex::scoped_lock lock(sessions_mutex);
  sessions.push_back(new TcpSession(device, session_id));
  device->remoteDeviceDisconnected.connect(boost::bind(&SessionManager::removeDeadSessionSlot, this));
  return session_id;
} 
```

它编译得很好，但在链接时它抱怨多个目标代码文件中的*remoteDeviceDisconnected的多个定义：*

```
tcpsession.cpp.o:(.bss+0x0): multiple definition of `remoteDeviceDisconnected'
tcpdevice.cpp.o: (.bss+0x0): first defined here
sessionmanager.cpp.o:(.bss+0x0): multiple definition of `remoteDeviceDisconnected'
tcpdevice.cpp.o: (.bss+0x0): first defined here 
```

我觉得这很奇怪，因为我没有在任何地方重新定义信号，只是在上面的*createSession*方法中使用它。

任何提示将非常感谢！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T21:57:21.640

我的错！就像我们都应该预料的那样，链接器是正确的......确实有第二个定义，我只是无法立即发现它，因为它没有由我的任何类定义，而只是“浮动”在我的一个.cpp 文件，如[*boost::signals*示例](http://www.boost.org/doc/libs/1_49_0/doc/html/signals/tutorial.html#id3137144)中的文件。

只是为了记录，最初的想法就像一个魅力：当给定的**TcpDevice**与远程端断开连接时，它会发出*remoteDeviceDisconnected*信号，然后被包含指向该**TcpDevice的****TcpSession实例的****SessionManager**对象捕获。一旦收到通知，*SessionManager 的*方法**removeDeadSessionSlot**就会被执行，遍历*会话***ptr_list**容器并删除断开连接的容器：

 ********```
void SessionManager::removeDeadSessionSlot()
{
  boost::mutex::scoped_lock lock(sessions_mutex);
  TcpSession_ptr_list_it it = sessions.begin();
  while (it != sessions.end()) {
    if (!(*it).device->isConnected())
      it = sessions.erase(it);
    else
      ++it;
  }
} 
```

希望可以作为参考！**********

# json - Firefox 试图从 grails 下载 json

> ID：10149393
> 
> 赞同：0
> 
> 时间：2012-04-13T23:07:04.683
> 
> 标签：json, firefox, grails

我有一个 grails 控制器，其最后一行是

```
render results as JSON 
```

它正在渲染到 iframe。当 firefox 处理这个时，它会尝试下载 json 文件。这是正常的吗？我能够解决这个问题的唯一方法是将其转换为字符串，然后在 javascript 端处理它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T00:15:25.803

我有一个 grails 控制器，我在其中编写了类似这样的内容，并且收到了 String 消息。试试这个例子。

```
String msg = g.message(code: "default.errors.login.fail")
render([error: msg] as JSON) 
```

# c# - 我们可以使用 Parallel.ForEach() 将新元素添加到列表中吗？

> ID：10149395
> 
> 赞同：4
> 
> 时间：2012-04-13T23:07:47.540
> 
> 标签：c#, multithreading, linq, plinq

我的代码做了非常简单的事情

列表已经有元素。我在列表中有大约 25000 个元素（我希望有更多），每个元素都很小（DateTime）。

```
List<DateTime> newList = new List<DateTime>();
Parallel.ForEach(list, l => newlist.Add(new DateTime(l.Ticks + 5000))); 
```

即，基于每个元素，我正在创建新元素并将它们添加到不同的列表中。但是，这似乎不是一个好的编程方法。***我有时***会遇到此异常，但不是每次都遇到这种情况。

```
IndexOutOfRangeException : {"Index was outside the bounds of the array."} 
```

我们可以使用 Parallel.ForEach() 将元素添加到列表中吗？如果是，为什么我会遇到错误？如果不是，为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T23:43:13.743

在这种情况下你真正想要的更像是这样的：

```
newlist = list.AsParallel().Select(l => new DateTime(l.Ticks + 5000)).ToList(); 
```

尽管您应该测量性能以查看这种情况是否甚至可以从并行化中受益。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T02:57:44.237

尝试使用最终结果的线程局部变量，将所有线程局部变量添加到 newList 中......

```
Parallel.ForEach(list, () => DateTime.MinValue, (l, state, date) =>
{
    date = new DateTime(l.Ticks+5000);
    return date;
},
finalresult =>
{
   lock (newList)
   {
       newList.Add(finalresult);
   }
}); 
```

第一个参数是您的旧列表，第二个参数是每个线程的初始值（我刚刚初始化为 datetime min）。第三个参数块如下 - l 与您的代码相同；state 是一个 Paralleloption 对象，如果您选择，您可以退出并行循环；最后一个是代表线程局部变量的stand in 变量。finalresult 参数代表每个线程局部变量的最终结果，并为每个线程调用 - 在那里您可以放置​​ newList 的锁并添加到 newList 共享变量。理论上这是可行的。我在自己的代码中使用了类似的编码。希望这对您或其他人有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T23:30:24.420

正如每个人都提到的那样，似乎没有理由这样做。它肯定会慢得多，慢得多。但是，为了完成，有时会失败的原因是多个线程正在写入的列表对象上没有锁定。添加这个：

```
object _locker = new object();
List<DateTime> newList = new List<DateTime>();
Parallel.ForEach(list, l => lock (_locker) newlist.Add(new DateTime(l.Ticks + 5000))); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-13T23:16:18.227

这将有效地`List<T>.Add`同时调用，但根据[MSDN 文档`List<T>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)：

*“不保证任何实例成员都是线程安全的。”*

即使它是（线程安全的），这也太便宜而无法从并行执行中受益（与并行执行的开销相反）。你真的衡量过你的表现吗？25000 个元素并不*多*。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-13T23:11:00.300

根本没有足够的工作来保证使用`Parallel.ForEach`并且也不`List<T>`是线程安全的，因此如果您想并行添加到同一个列表中，则必须锁定。只需使用常规 for 循环。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-13T23:16:59.017

你真的需要这些在列表中吗？如果您只需要在 foreach 中枚举列表，您可能应该这样做，因为它将使用更少的内存：

```
IEnumerable<DateTime> newSequence = list.Select(d => new DateTime(d.Ticks + 5000)); 
```

如果您真的需要这些列表，只需在末尾添加 .ToList() ：

```
var newSequence = list.Select(d => new DateTime(d.Ticks + 5000)).ToList(); 
```

这几乎肯定会足够快，您不需要并行化它。事实上，这可能比并行执行要快，因为它具有更好的内存性能。

# javascript - 删除默认操作

> ID：10149397
> 
> 赞同：0
> 
> 时间：2012-04-13T23:07:52.397
> 
> 标签：javascript, jquery, html

 当有人点击标签时，有什么方法可以阻止页面加载下一页，`<a>` 而不是我希望它提供 href 值，例如“www.google.com”，然后执行`.load()` 类似这样的 jquery

```
$(".window").load(hrefvalue); 
```

我知道我可以更改所有 href 值来启动一个 javascript 函数，但这需要一些时间，所以我只是在寻找最简单的方法。

所以我想要它做 

*   **`<a href`**单击停止页面加载下一部分。
2.  获取 href 值，例如[http://www.google.com](http://www.google.com)。
3.  然后执行 jquery`(.load()`或`$.ajax()`) 调用 href 页面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T23:09:44.497

这应该让你开始：

```
$(document).on('click', 'a', function(event) {
  event.preventDefault();    // Now the link doesn't do anything
  var href = this.href;      // The link's URL is in this variable
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T23:10:12.190

可以做类似的事情

```
$(document).on('click', '*[href]', function(e) {
   // Whatever you're trying to do
   e.preventDefault();
   return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T23:10:57.690

```
$(document).on('click','a[href]',function(){
    var href = $(this).attr('href');

    $.ajax(href,function(data){
        $(your_container).html(data);
        //data is the HTML returned
        //note that ajax is bound to the
        //same origin policy
        //any request outside your domain won't work
    })

    return false;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T23:12:25.990

```
<a href="javascript:void(0);">...</a> 
```

然后你可以为这个锚编写脚本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T23:14:46.267

这应该这样做：

```
$("a").click(function(event) {
  event.preventDefault();
  var href = $(this).attr("href");
  $.ajax({
     url: href,
     success: function(data) {
      alert('Load was performed.');
    }
  });
}); 
```

# android - 将文件写入 sd 卡而不是 USB 存储

> ID：10149402
> 
> 赞同：7
> 
> 时间：2012-04-13T23:08:03.900
> 
> 标签：android

我正在开发一个需要将文件写入 SD 卡的应用程序。我正在使用 GetExternalStoragePublicDirectory() 来确定要写入的目录。

我有两部正在开发的手机。在运行 Android 4.0.4（冰淇淋三明治）的 Google Nexus S 上，它返回 SD 卡上的目录。但是，在运行 Android 2.3.5 的 Samsung Exhibit 2 上，它直接写入手机上的 USB 存储。

有没有办法强制SD卡？

**编辑：**

我发现 getExternalStoragePublicDirectory() 和 getExternalStorageDirectory() 总是返回“/mnt/sdcard/”。这实际上不是 sd 卡的安装位置。在 Samsung Exhibit 2 上，这是 USB 存储位置。卡安装位置是“/mnt/sdcard/external_sd”。有没有办法返回这个实际的 sd 位置？

**我看到相机和其他应用程序已经找到了一种方法。相机应用程序有一个“存储”设置，带有“手机”和“存储卡”选项。如果指定“存储卡”，图像实际上存储在 sd 卡上。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T15:17:39.627

> 有没有办法返回这个实际的 sd 位置？

不，抱歉，不在当前的 Android SDK 中。

> 我看到相机和其他应用程序已经找到了一种方法。

大多数情况下，它们要么是设备制造商编写的，要么是通过 读取信息`MediaStore`，这应该索引两个来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T23:11:40.847

如果您只想写入 SD 卡，请使用

```
File mySdCardPath = Environment.getExternalStorageDirectory();
File dir = new File (mySdCardPath.getAbsolutePath() + "/yourDirectoryName"); 
```

# ios - 移动 Safari 越狱调整开发

> ID：10149405
> 
> 赞同：1
> 
> 时间：2012-04-13T23:08:27.870
> 
> 标签：ios, mobile-safari, jailbreak

我似乎找不到解释如何为移动 safari 开发越狱调整的在线教程。有人可以为我提供任何类型的资源来学习如何开发移动 safari 调整吗？任何移动 safari 调整的源代码也将是一个很好的资源。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T00:21:24.750

没有“针对 Mobile Safari 的开发人员调整的在线资源”。据我所知，没有任何开源项目或公共代码片段与 Mobile Safari 相关。

您需要拆开 Mobile Safari 的标头，其中有很多！

# php - 使用图像流确定扩展类型

> ID：10149407
> 
> 赞同：1
> 
> 时间：2012-04-13T23:09:10.690
> 
> 标签：php, image-processing, gd

我正在为我的上传服务（在 PHP 中）开发一个 API 系统。目前，我支持将图像数据作为二进制数据从 file_get_contents、fread 等发送的选项，或者通过基于 64 的系统对其进行编码。我试图从这个二进制/base64 数据中确定上传到我的服务的图像的扩展类型。如果它是base64，那么我对其进行解码然后处理它。

我目前有以下内容：

```
// We need to figure it out ourselves
if ($type === "")
{
    // Let's see if it is a base64 file
    $base64 = $this->checkBase64Encoded($file_data);

    // We got a 64 based file or binary
    $type = $base64 === TRUE ? "base64" : "binary";
}

if ($type == "binary")
{
    $im = imagecreatefromstring($file_data);

} 
```

我想看看是否可以确定保存文件的图像扩展类型。你们有什么建议？我读了一些关于使用 getimagesize() 的内容？虽然我不确定这一点。有没有办法暂时保存文件，处理它，然后重命名它？

在我检查扩展之前，我还计划使用它来测试图像是否是有效图像，但我不确定如何使用 getimagesize() 函数：

```
try
        {
            // Get the width and height from the uploaded image
            list($width, $height) = getimagesize($file['tmp_name']); // I'm not sure what to put here instead of $file['tmp_name']
        }
        catch (ErrorException $e)
        {
            // Ignore read errors
        }

        if (empty($width) OR empty($height))
        {
            // Cannot get image size, cannot validate
            return FALSE;
        } 
```

如果我不清楚，请随时要求任何澄清。非常感谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T23:22:06.343

您正在寻找[fileinfo](http://php.net/manual/en/book.fileinfo.php)函数，尤其是`finfo_buffer()`.

# python - Numpy修改数组到位？

> ID：10149416
> 
> 赞同：37
> 
> 时间：2012-04-13T23:10:30.317
> 
> 标签：python, arrays, numpy, in-place

我有以下代码试图规范化`m x n`数组的值（它将用作神经网络的输入，其中`m`是训练示例`n`的数量和特征的数量）。

但是，当我在脚本运行后检查解释器中的数组时，我发现这些值没有标准化；也就是说，它们仍然具有原始值。我猜这是因为`array`函数内部变量的赋值只能在函数内部看到。

我怎样才能做到这一点正常化？还是我必须从 normalize 函数返回一个新数组？

```
import numpy

def normalize(array, imin = -1, imax = 1):
    """I = Imin + (Imax-Imin)*(D-Dmin)/(Dmax-Dmin)"""

    dmin = array.min()
    dmax = array.max()

    array = imin + (imax - imin)*(array - dmin)/(dmax - dmin)
    print array[0]

def main():

    array = numpy.loadtxt('test.csv', delimiter=',', skiprows=1)
    for column in array.T:
        normalize(column)

    return array

if __name__ == "__main__":
    a = main() 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-13T23:20:58.763

如果您想就地对 numpy 数组应用数学运算，您可以简单地使用标准的就地运算符`+=`、`-=`、`/=`等。例如：

```
>>> def foo(a):
...     a += 10
... 
>>> a = numpy.arange(10)
>>> a
array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
>>> foo(a)
>>> a
array([10, 11, 12, 13, 14, 15, 16, 17, 18, 19]) 
```

这些操作的就地版本启动起来要快一点，尤其是对于较大的阵列：

```
>>> def normalize_inplace(array, imin=-1, imax=1):
...         dmin = array.min()
...         dmax = array.max()
...         array -= dmin
...         array *= imax - imin
...         array /= dmax - dmin
...         array += imin
...     
>>> def normalize_copy(array, imin=-1, imax=1):
...         dmin = array.min()
...         dmax = array.max()
...         return imin + (imax - imin) * (array - dmin) / (dmax - dmin)
... 
>>> a = numpy.arange(10000, dtype='f')
>>> %timeit normalize_inplace(a)
10000 loops, best of 3: 144 us per loop
>>> %timeit normalize_copy(a)
10000 loops, best of 3: 146 us per loop
>>> a = numpy.arange(1000000, dtype='f')
>>> %timeit normalize_inplace(a)
100 loops, best of 3: 12.8 ms per loop
>>> %timeit normalize_copy(a)
100 loops, best of 3: 16.4 ms per loop 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-01-10T21:19:35.313

这是一个技巧，它比此处的其他有用答案更通用：

```
def normalize(array, imin = -1, imax = 1):
    """I = Imin + (Imax-Imin)*(D-Dmin)/(Dmax-Dmin)"""

    dmin = array.min()
    dmax = array.max()

    array[...] = imin + (imax - imin)*(array - dmin)/(dmax - dmin) 
```

在这里，我们将值分配给视图，`array[...]`而不是将这些值分配给函数范围内的某个新局部变量。

```
x = np.arange(5, dtype='float')
print x
normalize(x)
print x

>>> [0\. 1\. 2\. 3\. 4.]
>>> [-1\.  -0.5  0\.   0.5  1\. ] 
```

编辑：

它更慢；它分配一个新数组。但是，如果您正在做一些更复杂的事情，而内置的就地操作很麻烦或不够用，那么它可能会很有价值。

```
def normalize2(array, imin=-1, imax=1):
    dmin = array.min()
    dmax = array.max()

    array -= dmin;
    array *= (imax - imin)
    array /= (dmax-dmin)
    array += imin

A = np.random.randn(200**3).reshape([200] * 3)
%timeit -n5 -r5 normalize(A)
%timeit -n5 -r5 normalize2(A)

>> 47.6 ms ± 678 µs per loop (mean ± std. dev. of 5 runs, 5 loops each)
>> 26.1 ms ± 866 µs per loop (mean ± std. dev. of 5 runs, 5 loops each) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-13T23:23:46.123

```
def normalize(array, imin = -1, imax = 1):
    """I = Imin + (Imax-Imin)*(D-Dmin)/(Dmax-Dmin)"""

    dmin = array.min()
    dmax = array.max()

    array -= dmin;
    array *= (imax - imin)
    array /= (dmax-dmin)
    array += imin

    print array[0] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-29T15:54:46.730

使用 numpy 时，有一种很好的方法来进行就地规范化。`np.vectorize`is`lambda`在应用于数组时与函数结合使用时非常有用。请参见下面的示例：

```
import numpy as np

def normalizeMe(value,vmin,vmax):

    vnorm = float(value-vmin)/float(vmax-vmin)

    return vnorm

imin = 0
imax = 10
feature = np.random.randint(10, size=10)

# Vectorize your function (only need to do it once)
temp = np.vectorize(lambda val: normalizeMe(val,imin,imax)) 
normfeature = temp(np.asarray(feature))

print feature
print normfeature 
```

可以将性能与生成器表达式进行比较，但是可能还有许多其他方法可以做到这一点。

```
%%timeit
temp = np.vectorize(lambda val: normalizeMe(val,imin,imax)) 
normfeature1 = temp(np.asarray(feature))
10000 loops, best of 3: 25.1 µs per loop

%%timeit
normfeature2 = [i for i in (normalizeMe(val,imin,imax) for val in feature)]
100000 loops, best of 3: 9.69 µs per loop

%%timeit
normalize(np.asarray(feature))
100000 loops, best of 3: 12.7 µs per loop 
```

所以矢量化绝对不是最快的，但在性能不那么重要的情况下可以很方便。

# java - 如何将 Spring 中的所有属性注入到 bean 中？

> ID：10149420
> 
> 赞同：1
> 
> 时间：2012-04-13T23:10:51.953
> 
> 标签：java, spring

我想将包含 spring 知道的所有属性（由库插入）的映射注入到我通过 spring xml 拥有的配置类中。那可能吗？

```
<bean class="Config">
  <constructor-arg name="env">
    <map>
    //inject all properties?
    </map>
  </constructor-arg>
</bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T23:39:45.363

为什么不直接注入 Spring Context？通过 Context，您可以通过名称查找任何 bean。

**编辑：**

从这个[答案](https://stackoverflow.com/questions/1599086/reading-a-list-from-a-java-properties-using-spring-properties-place-holder)中，您还可以使用以下内容：

```
<bean class="Config">
  <constructor-arg name="env">
    <util:properties location="${path.to.properties.file}"/>
  </constructor-arg>
</bean> 
```

您的“env”构造函数参数是 java.util.Properties 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:13:05.390

您不能扩展您使用的库类并实例化您的 bean 而不是默认库类吗？然后您将能够检查所有值。

否则，如果您知道库的签名，您总是可以使用 AOP 在库周围编织一些代码并访问那里的属性。有点复杂，但仍然可以让你到达你需要去的地方。您绝对可以使用[AspectJ](http://www.eclipse.org/aspectj/doc/released/progguide/index.html)（需要更多配置）甚至[Spring AOP](http://static.springsource.org/spring/docs/3.0.5.RELEASE/reference/aop.html)，具体取决于访问方式。

如果您想/需要对此有更多了解，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-07T09:49:59.790

对于支持[环境](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/env/Environment.html)注入的更高版本的 Spring（包括 spring-boot），您可以使用它来访问所有加载的属性。

要回答这个问题，请注入 a`AbstractEnvironment`以便您能够调用 getPropertySources() 方法，该方法将允许您查看从何处加载属性（例如文件、操作系统变量等）

```
@Autowired
public Config(AbstractEnvironment environment)
{
    MutablePropertySources propertySources = environment.getPropertySources();

    // inspect propertySources to see all properties loaded by Spring
} 
```

# python - 访问字典中的元组

> ID：10149424
> 
> 赞同：0
> 
> 时间：2012-04-13T23:11:00.203
> 
> 标签：python

我有这本字典，它存储成对的两个测验分数和参与者的 ID。结构是 {(quiz1, quiz2): ID}

```
scoredict = {('83', '93'): '81937', ('88', '86'): '33576', ('96', '97'): '01084', 
('81', '95'): '48534', ('84', '72'): '11235', ('77', '80'): '01835', ('90', '83'): 
'39488', ('75', '74'): '31049', ('80', '62'): '10188', ('85', '86'): '63011', 
('66', '89'): '58272'} 
```

我想让这个程序通过输入一对测验分数来查找 ID。例如，如果用户为测验 1 和测验 2 输入 83 和 93，它将返回 81937。自过去 48 小时以来我一直在研究这个，但我的代码都没有工作......

是否可以为两个测验找到最接近的可用分数并打印 ID？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T23:12:43.790

我验证了您的解决方案已经适用于[ipython](http://ipython.org/)：

```
In [1]: scoredict = {('83', '93'): '81937', ('88', '86'): '33576', ('96', '97'): '01084', 
   ...: ('81', '95'): '48534', ('84', '72'): '11235', ('77', '80'): '01835', ('90', '83'): 
   ...: '39488', ('75', '74'): '31049', ('80', '62'): '10188', ('85', '86'): '63011', 
   ...: ('66', '89'): '58272'}

In [2]: scoredict['83','93']
Out[2]: '81937' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T23:17:19.977

对于*最接近*的分数，您可以尝试以下操作：

```
test = (83, 93)

deviation = float('inf')
best_match = None

for score1, score2 in scoredict:
  error = abs(int(score1) - test[0]) + abs(int(score2) - test[1])

  if error < deviation:
    deviation = error
    best_match = (score1, score2)

print scoredict[best_match] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T23:12:59.920

只需这样做：

```
>>> scoredict[(score1,score2)] 
```

# codeigniter - 从 codeigniter 2 url 路径中删除控制器名称

> ID：10149427
> 
> 赞同：1
> 
> 时间：2012-04-13T23:11:31.550
> 
> 标签：codeigniter, url

我无法从本地主机上的 url 路径中删除控制器名称。

```
i have this url - localhost:8888/localhost/site_name/ 
```

我已经能够使用类似于[http://codeigniter.com/wiki/mod_rewrite](http://codeigniter.com/wiki/mod_rewrite)的 htaccess 从 url 中删除 index.php，以便：

```
localhost:8888/localhost/site_name/index.php/controller_name 
```

就是现在：

```
localhost:8888/localhost/site_name/controller_name/ 
```

但我无法从路径中删除控制器名称，以便：

```
localhost:8888/localhost/site_name/controller_name/function_name/ 
```

变成：

```
localhost:8888/localhost/site_name/function_name/ 
```

我只使用一个控制器，并且我添加了：

```
$route['^(function_name1|function_name2|function_name3)(/:any)?$'] = 'controller_name/$0'; 

$route['^(?!ezstore|ezsell|login).*'] = "home/$0"; /*similar variation i tried*/ 
```

和我的路线文件的其他变体，但它没有任何效果。我也尝试使用 _remap 函数，但在这种情况下没有帮助。

任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T01:46:50.063

您可以使用通配符路由，

`$route['(:any)'] = "controller_name/$1";`

那么如果你去`http://localhost/function_one/param1`

它将调用控制器`controller_name`函数并作为第一个参数 `function_once`传递。`param1`

* * *

nb：我必须指出，整个站点只使用一个控制器确实给我敲响了警钟，您可能希望检查您的代码设计，但这只是我。

# sql-server - 获取存储数据增量的表的最新记录？

> ID：10149432
> 
> 赞同：0
> 
> 时间：2012-04-13T23:12:07.773
> 
> 标签：sql-server, tsql

我有一个表`Actions`，架构打击：

```
[Actions]
ActionID
Date
Status <--Nullable, a delta column, only stores value when status changes 
```

现在我想检索最新的记录，但是很可能该`Stutus`记录为空，因此我想获取它的最后状态更改（按 排序`Date`）。

这是一个例子：

```
ActionID | Date | Status
------------------------
1        | 04/12| 'Bon'
2        | 04/13| NULL
3        | 04/14| NULL
4        | 04/15| NULL 
```

我的最新记录应如下所示：`ActionID: 4`, `Date: 04/15`,`Status: 'Bon'`

我知道可以使用嵌套的 select 语句，但是在我的真实表中，我有大约 10 个这样的列，当进行大量这样的查询时，它会极大地影响性能。我想知道是否有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T23:29:03.750

不确定我是否理解你的规则，但试试这个：

```
SELECT TOP 1
ActionID,
Date,
(SELECT TOP 1 Status FROM Actions WHERE Status IS NOT NULL ORDER BY ActionID DESC) AS Status
FROM Actions
ORDER BY ActionID DESC 
```

* * *

你说你有 10 列.. 它是如何工作的？

就像场景 A)

```
 ActionID | Date  | StatusA | StatusB | StatusC
        1 | 04/11 | DELTA_A | NULL    | DELTA_C
        2 | 04/12 | NULL    | DELTA_B | DELTA_C
        3 | 04/13 | DELTA_A | NULL    | NULL 
```

..然后多个 SELECT TOP 1 子查询仍然是我认为的最佳选择..

但如果它像场景 B)

```
 ActionID | Date  | StatusA | StatusB | StatusC
        1 | 04/11 | NULL    | NULL    | NULL
        2 | 04/12 | DELTA_A | DELTA_B | DELTA_C
        3 | 04/13 | NULL    | NULL    | NULL 
```

..那么您可以像这样“反转”您的查询：

```
SELECT TOP 1
(SELECT TOP 1 ActionID FROM Actions WHERE Status IS NOT NULL ORDER BY ActionID DESC) AS ActionID,
(SELECT TOP 1 Date FROM Actions WHERE Status IS NOT NULL ORDER BY ActionID DESC) AS Date,
StatusA,
StatusB,
StatusC
FROM Actions
WHERE StatusA IS NOT NULL -- then StatusB and StatusC are also NOT NULL
ORDER BY ActionID DESC 
```

..但请注意，如果没有 StatusA = NOT NULL 的行，您可能会得到空结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T23:41:43.853

也许这对你有帮助，虽然我不确定我是否理解你的要求：

```
WITH Actions AS(
   SELECT ROW_NUMBER()OVER(Order By Date DESC)AS DateRank
        , ActionsID
        , Date
        , Status
    FROM [Actions]
)
SELECT TOP 1 a1.ActionsID,a1.Date,a2.Status 
FROM Actions a1 INNER JOIN Actions a2 
    ON a1.DateRank < a2.DateRank AND a2.Status IS NOT NULL
WHERE a1.DateRank=1 
```

# c# - 以下情况的最佳 C# 数据结构是什么

> ID：10149435
> 
> 赞同：8
> 
> 时间：2012-04-13T23:12:25.730
> 
> 标签：c#, data-structures

我的申请要求如下。我需要存储如下所示的订单：

*   每个订单都与特定的股票代码（字符串）相关，并具有与其相关的价格、数量以及是否被买入或卖出（布尔值）。

*   我需要对与特定股票相关的所有订单执行多项操作，例如获取股票代码“abc”的订单量总和。

*   我需要能够向数据结构添加订单

*   我需要能够从数据结构中删除订单

*   在添加或删除订单后，我需要能够找出哪个订单提供最优惠的价格。

到目前为止，这是我的想法：

```
public class Order : IComparable
{

   private string _StockCode;
   private bool _BidSide;
   private int _Volume;
   private decimal _Price;
   private int _ExchangeOrderId;

   public int CompareTo(Order other)
   {
        if (_BidSide != other.BidSide)
        {
            return _BidSide ? 1 : -1;
        }
        return decimal.Compare(_Price, other.Price);
   }
} 
```

然后我会将订单存储在 Dictionary<string, List<Order>> 中。每个股票代码都是字典中的一个键，指向该股票的订单列表。我还将维护将订单 ID 与股票代码匹配的字典。

*   要添加新订单，我只需根据当前股票代码在字典中找到适当的订单列表，然后插入订单。我还将在 orderstock 字典中添加一个条目，将当前订单与适当的列表匹配。

*   为了找到最好的价格，我在字典中查找当前股票代码的订单列表，对列表进行排序并打印出最高的订单。

*   删除很棘手。我首先需要按股票代码查找适当的列表。然后，我需要遍历该股票代码的所有订单，并找到与当前订单 ID 匹配的订单并将其删除。如果当前股票代码有很多订单，这显然是低效的。这是存储这些信息的最佳方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T23:47:31.453

我将添加一个额外的字典，其中包含 key = orderid，value = 对股票代码初始字典中列表中订单的引用。

这将像一个索引，并给你不断的时间删除。假设您的订单 ID 不同，它将按 1:1 映射。只要确保从两个字典中删除它即可。

正如评论中所建议的那样，我会推荐一个额外的字典，其中包含您需要通过股票代码访问的计算总和。这是权衡内存的恒定时间访问。除非内存是一个问题，否则这似乎有利于每次需要时计算它。如果您收到新订单，您只需更新总和、平均值等。请记住，如果您正在并行执行操作，您将需要一些锁定以确保您没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T23:27:18.073

如果您要对大量数据执行此操作，请将其放入数据库中。这不是你想在课堂上做的事情。

但是，如果您使用的是一小组数据，则可以使用 LINQ 在代码中执行此操作。

我认为您应该让 Order 实现`IEnumerable`，然后使用 a`List<Order>`来存储您的订单。在`StockCode`上创建一个公共属性`Order`，然后您可以使用 Linq 检索订单：

```
List<Order> orders = GetOrderList();

var ibmOrders = from o in orders
    where o.StockCode == "IBM"
    select o; 
```

从列表中删除项目非常简单：

```
List<Order> orders = GetOrderList();

var orderToRemove = (from o in orders
  where o.ExchangeId == 1315
  select o).FirstOrDefault();

if (orderToRemove != null) {
    orders.Remove(orderToRemove);
} 
```

使用 Linq 以最优惠的价格查找非常好：

```
Order bestPricedOrder = (from o in orders 
        orderby Price 
        select o).FirstOrDefault(); 
```

有关更多出色的 LINQ 技巧，请参阅[101 LINQ 示例](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T23:30:38.880

我同意数据库将是最佳选择的评论；它们是为这种类型的东西设计的。

如果您需要在内存中保存这些数据，并且每个代码确实有很多订单，那么我会选择`Dictionary<string, SortedSet<Order>>`. SortedSet 将使查找最小值/最大值变得容易，以及快速插入/删除。

# java - Java 日期不保留毫秒转换为简单的日期格式

> ID：10149442
> 
> 赞同：5
> 
> 时间：2012-04-13T23:13:00.077
> 
> 标签：java, date, simpledateformat

我正在尝试将以下字符串转换`"2012-04-13 04:08:42.794"`为日期类型：

```
 SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss.SSS");

    Date convertedDate;
    try {
        convertedDate = dateFormat.parse(dateString);
        System.out.println(" in utils: "+convertedDate.toString());
    } catch (ParseException e) {
        e.printStackTrace();
        return null;
    }

  //----------------- i think this is the problem
java.sql.Date sqlDate = new java.sql.Date(convertedDate.getTime());
        System.out.println("sql: "+sqlDate.toString());
        return sqlDate; 
```

但这是打印以下内容：

```
in utils: Fri Apr 13 04:08:42 PDT 2012 
```

如何获取此日期以保留毫秒？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-13T23:18:57.267

convertDate 对象实际上包含毫秒信息。这里的问题是 toString() 方法格式不打印毫秒。

做

```
 System.out.println(" in utils: " + dateFormat.format(convertedDate)); 
```

您还可以检查 ms 是否设置为

```
 System.out.println("millis: " + convertedDate.getTime()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T23:18:36.580

```
 Calendar now = Calendar.getInstance();
 System.out.println("Current milliseconds since Jan 1, 1970 are :"
              + now.getTimeInMillis()); 
```

只需使用 java.util.Calendar [http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T23:19:23.147

他是我的目标（试图保持与你相同的代码风格）：

```
import java.util.*;
import java.text.*;
public class main {
 public static void main(String[] args)throws Exception {
 long yourmilliseconds = 1119193190;
SimpleDateFormat sdf = new SimpleDateFormat("MMM dd,yyyy HH:mm:ss.SSS");

Date resultdate = new Date(yourmilliseconds);
System.out.println(sdf.format(resultdate));  } 
} 
```

输出 ：

```
Jan 13,1970 17:53:13.190 
```

问候， 厄瓦尔德

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T23:21:25.113

您可以制作自己的打印方法，而不是使用 toString() 打印，因此它会打印您特别想要的信息。另请注意，大多数 Date 类已被弃用 - 查看[http://docs.oracle.com/javase/6/docs/api/java/util/Date.html](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-25T21:32:41.673

# drupal-7 - Drupal Commerce 2CheckOut 模块 - 逐步集成/配置？

> ID：10149445
> 
> 赞同：0
> 
> 时间：2012-04-13T23:13:35.350
> 
> 标签：drupal-7

使用 drupal 我只想集成一次结帐功能。我看到了集成 2checkout 网关的 Commerce 2CheckOut 模块。是否可以在我们的网站中获取集成/配置此模块的步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T20:29:52.290

我最近在这个模块中修复了一堆东西，并打开了一个问题来添加更改。如果您仍然需要它们，可以在[此 URL找到分步说明和固定模块](https://github.com/craigchristenson/drupal-commerce-2checkout)

# regex - 这些正则表达式如何写得更简洁？

> ID：10149448
> 
> 赞同：1
> 
> 时间：2012-04-13T23:13:55.177
> 
> 标签：regex

我可以以某种方式组合这些正则表达式吗？：

```
 _regexes = new List<Regex>();
        _regexes.Add(new Regex("[0-9]*th Fl$"));
        _regexes.Add(new Regex("[0-9]*th Floor$"));
        _regexes.Add(new Regex("[0-9]*st Fl$"));
        _regexes.Add(new Regex("[0-9]*st Floor$"));
        _regexes.Add(new Regex("[0-9]*nd Fl$"));
        _regexes.Add(new Regex("[0-9]*nd Floor$"));
        _regexes.Add(new Regex("[0-9]*rd Flr$"));
        _regexes.Add(new Regex("[0-9]*rd Floor$")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T23:22:29.263

```
\d+(?:st|th|nd|rd) Fl(?:r|oor)?$ 
```

*   匹配至少一个或多个数字，而不是零个数字（这可能是原始的一个缺点）
*   不要忘记`st`
*   匹配`Fl`，`Floor`或`Flr`
*   使用非捕获组`(?:`而不是捕获组
*   假设 perl 兼容正则表达式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T23:16:41.340

```
[0-9]*(st|th|nd|rd) (Fl|Floor)$ 
```

应该有同样的效果。使用`|`运算符，您实际上说您想要一种可能性。

[假设`_regexes.Add(new Regex("[0-9]*rd Flr$"));`- r 是错字] 是吗？

# ios - iOS 文件下载库

> ID：10149453
> 
> 赞同：0
> 
> 时间：2012-04-13T23:14:14.197
> 
> 标签：ios, svn, download

在我的 iOS 应用程序中，我使用 HTML5 文件作为游戏关卡。将来会添加新的关卡，因此我需要创建一个智能解决方案，每次添加新文件或更新服务器上的现有文件时，该解决方案都会将设备上的文件与服务器上的文件同步。理想情况下，它应该像 SVN 更新一样工作。是否有任何现有的库可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T23:21:42.130

你可以使用网络服务，你必须在你的服务器上实现它[使用你最喜欢的语言框架，即：php-codeigniter、python-django、ruby-rails]

为了简单起见，我建议使用 JSON。

在您的 iOS 端，您可以使用 iOS 5`NSJSONSerialization`

# javascript - 衡量用户连接 Twitter 的次数

> ID：10149454
> 
> 赞同：0
> 
> 时间：2012-04-13T23:14:23.693
> 
> 标签：javascript, twitter, twitter-anywhere

我在我的网站上使用了一个连接 twitter 按钮，没有 OAuth，但我想要一种方法来准确判断有多少人按下了连接。有一种方法可以像[这样](https://dev.twitter.com/docs/anywhere/welcome#login-signup)使用 twitter 按钮进行自定义连接。所以我在想这个按钮可能会把你带到一个 url 来记录访问，然后重定向回主页。我不确定这个想法如何甚至*是否会奏效。*我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T23:29:15.720

正如 twitter 网站上的那样，像这样的方法可以启用自定义登录

```
document.getElementById("signin-btn").onclick = function () {
      T.signIn();
    }; 
```

只需从这个方法内部调用一个 url 来跟踪这个按钮的点击次数，就像这样。

```
document.getElementById("signin-btn").onclick = function () {
          T.signIn();
$.get("UR_LINK");
        }; 
```

现在在服务器端。因为我不知道使用伪代码的技术是什么

```
On_Request()
{
clicked++;
saveTODataBaseClickedNumber(clicked);
} 
```

# html - HTML(5) 与流星

> ID：10149459
> 
> 赞同：2
> 
> 时间：2012-04-13T23:15:01.407
> 
> 标签：html, meteor

知道为什么将流星网站上包含的示例 html 文件放入带有顶级标签的 HTML 5 模板时会失败吗？

```
<!DOCTYPE html>
<html lang="en"> 
```

我看到他们搜索正文/模板标签等并连接但不确定如何添加其他标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T15:54:40.840

您在 Meteor 应用程序中编辑的“.html”文件根本不是 HTML 文件，而是由 Meteor 解析为 HTML 的 DSL（域特定语言）。

一旦你运行meteor来启动或部署一个服务器，它就会被解析和解释，所有的文档都会被输出为HTML5（使用.html）。

您可以在任何部署的流星应用程序上看到，这是第一行，即使将其输入到项目中的“.html”文件中也会导致编译器崩溃。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T05:06:34.780

起初我也对此感到困惑，显然它们包含的“.html”示例文件旨在由 html**片段**组成，而不是作为 html 文档本身。根据[文档](http://docs.meteor.com/#structuringyourapp)：

> Meteor 应用程序中的 HTML 文件的处理方式与服务器端框架有很大不同。Meteor 扫描目录中的所有 HTML 文件以查找三个顶级元素：`<head>`、`<body>`和 `<template>`. 头部和身体部分分别连接成一个单独的头部和身体，在初始页面加载时传输给客户端。

据我所知，任何不包含在这三个标签中的任何 html（包括`<!doctype html>`声明、`<html>`标签甚至`<!--html comments-->`）都会导致应用程序崩溃。希望这是他们最终会解决的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T13:47:31.983

当服务器启动并访问页面时，它会自动添加 DOCTYPE。

# java - JAR 文件：找不到主类

> ID：10149463
> 
> 赞同：6
> 
> 时间：2012-04-13T23:15:36.907
> 
> 标签：java, executable-jar

好吧，我有一个奇怪的问题。我想将我的一个程序作为 .jar 文件运行，但是当我通过双击打开它时，我收到一条错误消息，例如“找不到主类，程序正在关闭”。我很确定我做的一切都是正确的，罐子应该可以正常工作。我还尝试了其他程序，每个程序都一样。（我正在通过 BlueJ 创建 .jar）当我通过 .bat 运行它们时没有问题。最奇怪的事情来了：.jar 已经在一段时间前工作了（我猜一两个月），我不记得做过什么不同的事情。这是相同的 BlueJ 版本。好吧，也许 Java 更新了，有些东西搞砸了……我用谷歌搜索，但找不到解决方案。（有些人似乎有类似的问题，而且似乎只有他们无法运行他们的 . 罐子的；他们上传了它们，其他人说 .jar 运行良好。）可能是什么问题？我该如何解决？

我真的很感激这里的一些帮助。谢谢 ：）

孔径T3CH

编辑：好吧，伙计们，你让我不确定。在这个邪恶的时间（凌晨 1 点 34 分），我再次检查清单：P

EDIT2：这是我的 MANIFEST.MF 清单版本：1.0 类路径：主类：LocalChatClientGUI [空行] [空行]

Main 类是正确的。

EDIT3：感谢 hgrey：罐子没有问题。我可以从 bat 文件中运行它，这实际上应该与双击 jar 没有什么不同，对吧？然而，当我点击它时，我得到了错误，它通过蝙蝠工作正常。

EDIT4：我终于解决了这个问题。我重新安装了 JRE，现在它可以工作了，虽然我看不到任何版本差异。

谢谢大家！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-13T23:20:10.683

当 java 运行 jar 时，它会查看 jar 的 META-INF 目录中的 manifest.mf 文件，并在其中读取 MainClass 属性。如果未指定，您将收到您描述的消息。因此，尝试将正确的 manifest.mf 包含到 jar 中。流行的 Java 构建工具（如 Ant 或 Maven）支持生成 manifest.mf。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T01:16:24.120

您的程序是否使用任何外部 jar 文件？如果是这样，您需要在清单文件和主类中设置类路径属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T23:18:22.760

通常，您必须指定 jar 文件中的哪个类具有 main 方法。如果您检查 bat 文件是否有效，您可能会看到为了运行它而缺少的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T23:22:37.860

建议检查您的清单。

[http://docs.oracle.com/javase/tutorial/deployment/jar/appman.html](http://docs.oracle.com/javase/tutorial/deployment/jar/appman.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T15:29:49.573

清单文本文件必须以换行符或回车符结尾。如果最后一行没有以新行或回车结束，则不会正确解析。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-30T21:10:27.477

还要在清单中添加一个类路径属性并为该值添加一个点。这将告诉 vm 查看当前目录中的类。

# xcode - 在 Mac OS App 中创建文件夹

> ID：10149464
> 
> 赞同：0
> 
> 时间：2012-04-13T23:15:40.830
> 
> 标签：xcode, macos

我想要一个“自包含”的应用程序（我不知道我是否使用了正确的词。“将应用程序放入垃圾箱将删除所有内容”就是我的意思）。但是该应用程序需要一些资源才能运行。我通常将这些资源放入一个文件夹中。我想将这些资源移动到 App 文件夹（包内容）中。我可以这样做吗？这样做是个好习惯吗？

当我测试直接从 Xcode 运行的应用程序时，该应用程序运行良好。但是如果我从 finder 运行它，应用程序会说因为权限被拒绝而无法创建资源文件夹。我检查了应用程序的文件夹权限 - 用户（我）具有读/写权限。我想知道是什么导致了这种不同的行为。

最后一个选项是使用 Application Support 文件夹，但我不想在用户删除应用程序时留下痕迹。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T23:24:34.160

应用程序存在于目录`/Applications`中，用户通常没有写入权限。要求应用程序在系统文件夹中具有写入权限是非常糟糕的做法。

运行时文件应该存在于`~/Library/Application Support`. 虽然该文件夹往往会积累一些杂物，但除非您的应用程序留下非常大的文件，否则这应该不是问题。

如果您希望您的应用程序是独立的，它需要从一开始就包含它需要的所有文件，而不是向磁盘写入任何内容。

# java - 如何在层次结构方法中实现我的代码？

> ID：10149468
> 
> 赞同：0
> 
> 时间：2012-04-13T23:16:12.243
> 
> 标签：java, swing, refactoring, jframe

我正在制作一款游戏，我开始在一个班级中完成所有工作。但现在我想分开不同的班级。我对以下代码有一个问题。我在 GameView 类中创建了一个 JFrame，其中一半的代码我想将其复制到另一个类，但它找不到变量帧，因为它在 GameView 中？下面是我的代码：

游戏视图类：

```
public void gui()
    {
        BorderLayout borderlayout = new BorderLayout();      

        //Creates the frame, set the visibility to true, sets the size and exit on close
        JFrame frame = new JFrame("Games");
        frame.setVisible(true);
        frame.setSize(600,400);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Creates the Throw Dice button
        Panel p = new Panel();
        p.setLayout(new GridLayout());
        p.add(new Button("Throw Dice"));
        p.add(new Label("Dice Draw")); 
        p.setBackground(new Color(156, 93, 82));
        frame.add(p, BorderLayout.SOUTH); 
```

骰子类：

//创建掷骰子按钮 //从 GameView 类中移出

```
Panel p = new Panel();
p.setLayout(new GridLayout());
p.add(new Button("Throw Dice"));
p.add(new Label("Dice Draw")); 
p.setBackground(new Color(156, 93, 82));
frame.add(p, BorderLayout.SOUTH);// cannot find variable frame when i put this section into a different class 
```

所以我希望框架窗口位于 GameView 类中，而骰子部分位于 Dice 类中。但随后它给出的错误找不到变量帧，因为它在 GameView 类中。我该如何实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T23:33:11.223

你可能想要这样的东西：

在你的`gui()`方法中：

```
JFrame frame = new JFrame("Games");
...
frame.add(new Dice(), BorderLayout.SOUTH); 
```

和骰子类

```
public class Dice extends Panel {

    public Dice() {
        setLayout(new GridLayout());
        add(new Button("Throw Dice"));
        // add more stuff here
    }
... 
```

# ruby-on-rails - ruby 可以在 markdown 中渲染吗？Ruby on Rails 应用程序

> ID：10149476
> 
> 赞同：0
> 
> 时间：2012-04-13T23:17:28.753
> 
> 标签：ruby-on-rails, markdown, redcarpet

是否可以在我的 Ruby on Rails 应用程序的 markdown 中使用 ruby​​？我正在使用 RedCarpet gem，我的应用程序控制器中有以下内容。

```
class ApplicationController < ActionController::Base
  before_filter :get_contact_info

  private
    def get_contact_info
      @contact = Contact.last
    end
  end 
```

这是联系人的架构

```
create_table "contacts", :force => true do |t|
  t.string   "phone"
  t.string   "email"
  t.string   "facebook"
  t.string   "twitter"
end 
```

所以我有联系信息可以使用，有没有办法告诉降价渲染器将 <%= @contact.phone %> 渲染为 @contact.phone 的值而不是纯文本？或者我需要使用其他东西然后降价吗？

**编辑1：**

在此处渲染降价：

app/helpers/application_helper.rb

```
def markdown(text)
  options = [:hard_wrap, :filter_html, :autolink, :no_intraemphasis]
  Redcarpet.new(text, *options).to_html.html_safe
end 
```

应用程序/视图/站点/show.html.erb

```
<%= markdown(site.description) %> 
```

**编辑2：**

这是我的解决方案，谢谢。我将您的代码集成到我的标记助手中，这似乎到目前为止有效。

```
def markdown(text)
  erbified = ERB.new(text.html_safe).result(binding)
  options = [:hard_wrap, :filter_html, :autolink, :no_intraemphasis]
  Redcarpet.new(erbified, *options).to_html.html_safe
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T23:27:29.227

您可以使用 ERb 预处理您的 Markdown，然后将该结果传递给 RedCarpet。我建议把它放在一个辅助方法中，如下所示：

```
module ContactsHelper
  def contact_info(contact)
    content = "Hello\n=====\n\nMy number is <%= contact.phone %>"
    erbified = ERB.new(content).result(binding)
    Redcarpet.new(erbified).to_html.html_safe
  end
end 
```

如果内容很多，您可能会考虑编写部分内容并渲染该部分内容，而不是像我在上面所做的那样在字符串中嵌入大量 HTML，但这取决于您。

# parsing - LR(0) 或 SLR(1) 或 LALR(1)

> ID：10149477
> 
> 赞同：4
> 
> 时间：2012-04-13T23:17:39.683
> 
> 标签：parsing, compiler-construction, context-free-grammar

我在一个编译器期末考试样本中尝试的问题上遇到了严重的问题。如果有人可以帮助我解释，我将不胜感激。谢谢

考虑下面列出的语法 G

1.  S = E`$`
2.  E = E `+`T | 吨
3.  T = T `*`F | F
4.  F = `ident`| `(`乙`)`

其中 + * ident ( ) 是终端符号并且`$`是文件的结尾。a) 这个语法是 LR(0) 吗？证明你的答案。b) 是语法 SLR(1) 吗？证明你的答案。c) 这个语法是 LALR(1) 吗？证明你的答案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-13T23:46:06.847

如果您可以证明语法是 LR(0)，那么它当然是 SLR(1) 和 LALR(1)，因为 LR(0) 更具限制性。

不幸的是，语法不是 LR(0)。

例如，假设您刚刚识别出 E：

```
S -> E . $ 
```

如果后面是`+`or`*`符号，则不能将此 E 简化为 S，因为`E`后面可以跟着`+`or`*`继续构建一个更大的表达式：

```
S -> E . $
E -> E . + T
T -> T . * F 
```

这要求我们向前看一个标记以知道在该状态下要做什么：转移（`+`或`*`）或减少（`$`）。

SLR(1) 增加了lookahead，并利用follow-set信息进行归约（总比没有好，但是从语法中全局获得的follow-set信息不是上下文敏感的，就像LALR中的state-specific lookahead sets（ 1))。

在 SLR(1) 下，上面的冲突就消失了，因为`S -> E`只有在前瞻符号在后面的集合中时才考虑归约，而在后面的集合中`S`唯一的东西`S`是 EOF 符号`$`。如果输入符号不是`$`，比如`+`，则不考虑归约；发生了与减少不冲突的转变。

所以语法不会因为`SLR(1)`这种冲突而失败。但是，它可能还有其他一些冲突。扫了一眼，一个也看不见；但是要正确地“证明该答案的合理**性”，您必须生成所有 LR(0) 状态项，并通过验证 SLR(1) 约束没有违反的例程**。（您对 SLR(1) 使用简单的 LR(0) 项，因为 SLR(1) 不会以任何新方式扩充这些项。请记住，它只是使用从语法中抄录而来的后续集合信息来消除冲突。）

如果是 SLR(1)，则 LALR(1) 属于子集关系。

**更新**

红龙书（*编译器：原理、技术和工具*，Aho，Sethi，Ullman，1988 年）在一组示例中使用完全相同的语法，这些示例显示了规范 LR(0) 项集和相关 DFA 的推导，以及填写解析表的一些步骤。这在第 4.7 节中，从示例 4.34 开始。

# ruby-on-rails - 如何逐行逐步建立 ActiveRecord 查询？

> ID：10149485
> 
> 赞同：6
> 
> 时间：2012-04-13T23:18:39.093
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, arel

我想使用运行时数据拼凑一个 ActiveRecord 查询。我的想法是......

```
r = Person.where('last_name LIKE ?', foo)
r.where('created_at < ?', Time.now - 100.days)
r.where( ...some other conditions... ) 
```

但这并没有按预期工作。为了让它工作，你必须将它们全部链接在一条线上......

```
Person.where('last_name LIKE ?', foo) \
  .where('created_at < ?', Time.now - 100.days) \
  .where( ...some other conditions... ) 
```

我试图找出一种方法将其分布在多行的单独操作中。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-13T23:21:27.933

[查询接口](http://guides.rubyonrails.org/active_record_querying.html)方法（如`.where`）返回一个新对象。所以你只需要坚持下去。看：

```
r = Person.where('last_name LIKE ?', foo)
r = r.where('created_at < ?', Time.now - 100.days)
r = r.where( ...some other conditions... ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T23:22:31.040

令人沮丧的是，当您调用其方法时，Arel 不会改变对象或基础查询。但是每个方法都返回允许链接的 Arel 对象。你所要做的：

```
r = Person.where(...
r = r.where('created_at...') 
```

等等等等

# php - 注销重定向

> ID：10149486
> 
> 赞同：0
> 
> 时间：2012-04-13T23:18:39.733
> 
> 标签：php, facebook, logout

嗨，我是 facebook api 的新手，并设法让用户使用 facebook 登录，但是我正在尝试注销重定向到不同的页面，例如。**logout.php**问题是当它注销时重定向到同一页面。

我用来获取注销链接的代码是：

```
$logoutUrl = $facebook->getLogoutUrl(); 
```

我怎样才能做到这一点，以便注销 url 自动将您从 facebook 注销并将您重定向到 logout.php？

提前致谢！

**更新**

我目前从**getLogoutUrl()**函数获得的 url 示例：

[https://www.facebook.com/logout.php?next=](https://www.facebook.com/logout.php?next=) *http%3A%2F%2FMYDOMAINHERE.com%2F* &access_token=MYACCESSTOKENHERE

我的猜测是，如果我可以将重定向 URL 传递给它以使用该函数自动生成，它看起来像这样：

[https://www.facebook.com/logout.php?next=http%3A%2F%2FMYDOMAINHERE.com%2F](https://www.facebook.com/logout.php?next=http%3A%2F%2FMYDOMAINHERE.com%2F) **LOGOUT.PHP** %2F&access_token=MYACCESSTOKENHERE

**更新**

没关系，我只是想通了。与登录的工作方式相同

```
getLogoutUrl(array(
                   'next' => 'http://' . $_SERVER['HTTP_HOST'] . '/logout.php'
                   )); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T23:20:11.260

你是这个意思吗：

```
header ("Location: $logoutUrl")
exit; 
```

# android - AnimationDrawable 以编程方式没有动画列表 xml

> ID：10149487
> 
> 赞同：17
> 
> 时间：2012-04-13T23:18:49.250
> 
> 标签：android, android-animation

我处于想要从动态图像列表中显示动画的情况。我想为此目的使用 AnimationDrawable，但不幸的是我被卡住了...... :(我的代码是

```
ImageView globe = (ImageView) findViewById(R.id.globe);

AnimationDrawable animation = new AnimationDrawable();
animation.setOneShot(true);

Resources res = this.getResources();

while (from <= to) {
    String name = "globe_" + String.format("%03d", from);
    int globeId = res.getIdentifier(name, "drawable",
            this.getPackageName());
    animation.addFrame(res.getDrawable(globeId), 200);
    from++;
}

globe.setBackgroundDrawable(animation);
globe.post(new Runnable(){
        @Override
        public void run() {
            animation.start();
        }
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T10:38:48.103

我只是`animation.start()`在循环之后做了并从可运行的函数中调用了该函数并且它工作了

```
while (from <= to) {
    String name = "globe_" + String.format("%03d", from);
    int globeId = res.getIdentifier(name, "drawable",
            this.getPackageName());

    animation.addFrame(res.getDrawable(globeId), 200);
    from++;
}

globe.setBackgroundDrawable(animation);

animation.start() 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-14T06:16:21.947

因此 Animation.addFrame(Drawable frame, int duration) 采用您可以从位图创建的可绘制对象。

如果您的图像列表是动态加载的：

```
List<Bitmap> images;
int duration = 200;    

for(Bitmap image: images){
    BitmapDrawable frame = new BitmapDrawable(image);
    animation.addFrame(frame, duration);
} 
```

试试这个，肯定可以的。

# java - Photoshop“起皱工具”算法

> ID：10149490
> 
> 赞同：0
> 
> 时间：2012-04-13T23:19:03.147
> 
> 标签：java, algorithm, photoshop, effect

谁能告诉我 Photoshop 中的“Pucker Tool”应用的这种效果的名称是什么？我需要缩小这个验证码中出现的字符。

使用的算法或 Java 类也将非常受欢迎。

谢谢！

![在此处输入图像描述](../Images/ede285e830c95a6efba4f022ef897387.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T00:19:47.263

这不完全是一种花哨的算法，而是一种简单的失真。正如@Erwald 指出的那样，它迭代地将像素移向画笔的中心。

因此，如果我们想实现这一点，我们需要一个失真场来将输出像素映射到输入像素位置以进行采样。

因此，对于每个输出坐标 (x,y)，定义结果颜色：

c' = 样本( f([x,y]) )

其中样本在给定坐标处从输入图像中获取线性或其他插值值（可能是分数）

您正在寻找的特征是：

1.  朝向输出中心的像素从远离外部的像素中拉出（向内拉图像）

2.  旋转对称

3.  效果应该随着距离而下降（在一定半径之外，输入位置与输出位置相同）

4.  效果应在边缘平滑地逐渐变细，但不能无限延伸

5.  在中心，任何一侧都不应从过滤器的另一侧采样（它不能在中心挤压太多，否则会变得很奇怪）

确切的方程式是留给读者的练习:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T23:23:54.113

不确定它是否真的被认为是一种算法......

> **褶皱工具** 当您按住鼠标按钮或拖动时，将像素移向画笔区域的中心。

# single-sign-on - SAML 2 主题名称标识符的用途是什么？

> ID：10149492
> 
> 赞同：10
> 
> 时间：2012-04-13T23:19:14.460
> 
> 标签：single-sign-on, saml, saml-2.0, shibboleth

对 SAML 2 IdP 执行身份验证时，主题名称标识符应该用于什么？它是否跟踪每个用户的登录？

我想知道我的 SAML 2 服务提供商应用程序是否应该为不同的用户跟踪这些。由于它们是瞬态的，因此对于不同的登录，它们可能会有所不同（因此我需要使用挂起用户帐户的集合进行跟踪）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T18:37:51.220

该`<NameIdentifier>`元素是一个 SAML 1.1 概念。它已被`<NameID>`标识主题的元素所取代。NameID 不一定是临时的 - 请参阅 SAML 2.0 核心[规范的第 8.3 节](http://docs.oasis-open.org/security/saml/v2.0/saml-core-2.0-os.pdf)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-09T14:17:52.770

Name Identifier 包含几个属性。

第一个属性是*NameQualifier*，它指定用户在 IDP 的安全域。安全域有助于区分使用相同名称标识符的不同用户。

第二个属性是*SPNameQualifier*，它指定了用户在 SP 的安全域。

第三个属性是*Format*，它指定应该如何解释名称标识符。

例如，当用户希望在 IDP 和 SP 中使用相同的名称标识符时，使用*电子邮件地址名称标识符格式。*这意味着如果用户在 IDP 中以 alice@domain.com 登录，则用户在 SP 中也以 alice@domain.com 登录。

另一个例子，当用户不想在 IDP 和 SP 中使用相同的名称标识符时，使用持久标识符。这意味着用户可以在 IDP 中以 alice@idp.com 身份登录，但在 SP 中以 bob@sp.com 身份登录。这是通过使用IDP和SP同意的标识符来实现的，例如12345，该标识符在IDP中映射到alice@idp.com，在SP中映射到bob@sp.com。当您不希望 SP 知道 IDP 中用户的名称标识符时，持久标识符很有用。

# compiler-construction - 用于悬空 else 的 LL(1) 语法

> ID：10149493
> 
> 赞同：3
> 
> 时间：2012-04-13T23:19:22.990
> 
> 标签：compiler-construction, dangling-else

在编译器构造中，主要的歧义问题之一是**悬空 else**。正如 Aho、Lam、Sethi 和 Ullman 在编译器：原理、技术和工具一书中所提到的，悬空 else 的语法不能与 LL(1) 解析器一起使用。

真的不能处理为LL(1)吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T23:32:47.587

没错，它不能被 LL(k) 或 LALR(k) 以纯粹的形式解析。问题是悬空的 else 有两种可能的解释；这是一个模棱两可的问题（“else”属于最近的“if”，或者不属于）。

它通常通过坚持两种解释中的一种来*治愈*，例如，“else 属于最近的 if”。

许多解析器生成器可以“偶然”得到这个；LL 的解决方案是接受第一个有效的解析并首先尝试“其他附加到最近”。LR 的解决方案是“shift on else”，这很容易导致，只需在“reduce”操作之前检查“shift”操作。

它只会成为真正会提取模棱两可解析的解析器的问题，例如 GLR。在这里可以提供额外的语法提示，例如“shift on else”。

# php - 带有php加载文件的jquery

> ID：10149495
> 
> 赞同：-3
> 
> 时间：2012-04-13T23:19:36.470
> 
> 标签：php, jquery

我正在尝试将 jquery 与一个简单的 php 代码一起使用：

```
$('#some').click(function() {
    <?php
    require_once('some1.php?name="some' + index + '"');
    ?>
}); 
```

它没有显示错误，所以我不知道出了什么问题。

在 some1 我有：

```
<?php
    //Start session
    session_start();

    //Include database connection details
    require_once('../sql/config.php');

    //Connect to mysql server
    $link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
    if(!$link) {
        die('Failed to connect to server: ' . mysql_error());
    }

    //Select database
    $db = mysql_select_db(DB_DATABASE);
    if(!$db) {
        die("Unable to select database");
    }

    //Function to sanitize values received from the form. Prevents SQL injection
    function clean($str) {
        $str = @trim($str);
        if(get_magic_quotes_gpc()) {
            $str = stripslashes($str);
        }
        return mysql_real_escape_string($str);
    }

    //Sanitize the POST values
    $name = clean($_GET['name']);
?> 
```

它不完整，因为我想做一个 sql 命令（插入）。

我希望当我单击#some 来执行该文件时（在尚未定义的表中创建一个条目）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T23:25:55.360

您使用的功能`require_once()`不正确。它[需要一个文件](http://php.net/manual/en/function.require-once.php)，而不是 URL。因此`?name=...`，您传递给它的 URL 参数不会做任何事情（并且可能会破坏整个语句）。

作为一个 PHP 函数，它是在服务器端处理的。因此，如果该`index`变量来自 JavaScript 代码，那么它根本不会被服务器端知道。因此，无论你试图包含什么，无论它服务于什么目的，都需要以不同的方式完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T23:30:45.293

我认为您需要在这里做的是向您的页面发出 ajax 请求，如下所示：

```
 $('#some').click(function() {
    $.ajax({
      url: 'some1.php?var=' + index,
      success: function(data) {
        alert('success.');
      }
    });
  }); 
```

# image - R plot expot 实际大小

> ID：10149496
> 
> 赞同：-1
> 
> 时间：2012-04-13T23:19:46.063
> 
> 标签：image, r, plot

我是 R 编码的新手，所以我需要帮助或建议。我正在基于坐标构建绘图（最初这是眼动追踪数据）。我只导出没有任何轴或文本的点。稍后我将不得不将这些点与人们正在看的图像进行比较。

所以我的目标是 1）导出的图像具有非常特定的尺寸（与原始图像相同）并且没有任何失真（它似乎在导出对话框窗口中手动输入尺寸后出现）。2）让这个情节在没有额外字段的情况下导出，这显然出现在每一边。

先感谢您

UPD我现在在想是否有任何方法可以将零点移动到图像的左下角？我试图通过削减边距来解决我的问题：par(mar=c(0, 0, 0, 0), xaxs='i', yaxs='i')，但它似乎削减了所有空白部分图片。我想保持潜在的工作部件安全并保持尺寸和比例。

那是我的源代码

```
 card1 <- "D:/01_experiment/02.04/p02/card1.txt" 
    table01 <- read.table(card1, strip.white = TRUE, sep="\t", header = TRUE)

    jpeg('card81.jpg', 
         width = 842, 
         height = 595)

    par(mar=c(0, 0, 0, 0), xaxs='i', yaxs='i')

    plot(x = table01[,10], 
         y = table01[,11], 

         pch=20,
         type="o",

         #xaxt='n',
         yaxt='n',
         ann=FALSE,

         bty="n",
         xlab = "desity.x",
         ylab = "desity.y"
         )
    dev.off() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T23:31:48.090

尝试这个，

```
library(grid)

pdf("points.pdf", width=5, height=3)
grid.points(x <- runif(10), y <- runif(10), vp=dataViewport(x, y, extension = 0))
dev.off() 
```

![在此处输入图像描述](../Images/5d84fd3138e2de52613e4cbc185eb6cd.png)

# c# - 如何使用 LINQ 查询平均 DateTime 字段？

> ID：10149497
> 
> 赞同：6
> 
> 时间：2012-04-13T23:19:53.333
> 
> 标签：c#, linq, linq-to-sql

我有一个数据库，在 DateTime 字段中有以下记录：

```
2012-04-13 08:31:00.000
2012-04-12 07:53:00.000
2012-04-11 07:59:00.000
2012-04-10 08:16:00.000
2012-04-09 15:11:00.000
2012-04-08 08:28:00.000
2012-04-06 08:26:00.000 
```

我想运行 linq to sql 查询以从上面的记录中获取平均时间。我尝试了以下方法：

```
(From o In MYDATA Select o.SleepTo).Average() 
```

由于“SleepTo”是一个日期时间字段，我在 Average() 上出现错误。如果我试图获得一个整数的平均值，则上述 linq 查询有效。

我需要做什么才能让它在日期时间工作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-14T21:27:55.673

在内部，每个 DateTime 实际上都存储为许多滴答声。DateTime的`Ticks`属性定义为“自 0001 年 1 月 1 日午夜 12:00:00 以来经过的 100 纳秒间隔数。” （参见[http://msdn.microsoft.com/en-us/library/system.datetime.ticks.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.ticks.aspx)）

您可以将 DateTimes 转换为刻度，然后平均，然后转换回日期时间。

```
var averageTicks = (long) dates.Select(d => d.Ticks).Average();
var averageDate = new DateTime(averageTicks); 
```

使用您的数据结构和格式，它看起来像这样：

```
var averageTicks = (long)(from o in MYDATA select o.SleepTo.Ticks).Average();
var averageDate = new DateTime(averageTicks); 
```

如果您想获取每个 SleepTo 值的平均时间（忽略 Date 组件），您可以获取时间的刻度：

```
var averageTicks = (long)(from o in MYDATA select o.SleepTo.TimeOfDay.Ticks).Average();
var averageTime = new TimeSpan(averageTicks); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T15:33:08.750

这里有几个可以帮助解决这个问题的扩展方法......有一个核心问题，如果列表中有很多 DateTimes，那么滴答声（`long`vars ）的 LINQ 平均值将溢出。

```
 public static long Average(this IEnumerable<long> longs)
    {
        long count = longs.Count();
        long mean = 0;
        foreach (var val in longs)
        {
            mean += val / count;
        }
        return mean;
    }

    public static DateTime Average(this IEnumerable<DateTime> dates)
    {
        return new DateTime(dates.Select(x => x.Ticks).Average());
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T23:24:42.533

数据库 LINQ 提供程序似乎不了解如何对绝对日期进行平均。如果您考虑一下，这是有道理的（平均值是总和除以计数-总和是多少？）。

因此，如果您无法运行以下命令：

`(From o In MYDATA Select o.SleepTo).Sum()`

那你也做不到`.Average()`。

由于您想要的实际上是 SleepTo 的平均*时间*，因此您只需将日期的时间部分作为 TimeSpan （时间可能减去午夜）并将其取平均值。你有没有机会`SleepFrom`？

同时，您可能会发现这篇文章很有启发性：[LINQ 平均时间跨度？](https://stackoverflow.com/questions/3086087/linq-average-timespan)

# html - 在填充区域外放置滚动条

> ID：10149503
> 
> 赞同：4
> 
> 时间：2012-04-13T23:20:28.840
> 
> 标签：html, css

如何放置垂直滚动条，同时在内容区域中始终保持所有方向的填充？下面的图片更好地描述了我在寻找什么。

[我只有明显的“填充：x”来显示我的工作:(](http://jsfiddle.net/3V2HP/)我尝试嵌套填充，这很有趣:)

除非真的需要，否则我想避免使用 JavaScript。

![页面的当前和所需外观](../Images/88a527b5572d6591366f869c011eda2e.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-17T14:31:25.247

这个小提琴可能是你想要的：**[小提琴](http://jsfiddle.net/3V2HP/9/)**

此示例包含顶部和底部的渐变，但如果您愿意，当然可以是纯色。

您可以尝试使用元素的填充`#content`，但请注意，如果您想创建路路通效果，则需要在右侧添加一个附加元素。

```
#container{
position:relative;
height:300px;
width:300px;
}
#content{
height:200px; 
width: 200px;
padding: 50px;
overflow-y: auto;
background-color: #cef;
}
.bar {
position:absolute;
width: 280px;
height: 50px;
background-color:#bcd;
}
.vbar {
position:absolute;
width: 50px;
height: 280px;
background-color:#bcd;
}
#topbar{
top:0;        
}
#bottombar{
bottom:0;
}
#leftbar{
top:0;        
}
#rightbar{
right:20px;        
top:0;
}
```

```
<div id="container">
    <div id="topbar" class="bar"> </div>
    <div id="content" class="pad">
        1<br> 2<br> 3<br> 4<br> 5<br> 6<br> 7<br> 8<br> 9<br> 10<br> 11<br> 12<br> 13<br> 14<br> 15<br> 16<br> 17<br> 18<br> 19<br> 20<br> 21<br> 22<br> 23<br> 24<br> 25<br> 26<br> 27<br> 28<br> 29<br> 30<br> 31<br> 32<br> 33<br> 34<br> 35<br> 36<br> 37<br> 38<br> 39<br> 40<br> 41<br> 42<br>
    </div>
    <div id="bottombar" class="bar"></div>
</div>
```

编辑：更改了小提琴链接，带有渐变的旧链接如下：[小提琴](http://jsfiddle.net/3V2HP/6/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T13:53:14.970

用 Div 来做。CSS：

```
<style type="text/css">
div#top {
    margin: 0px;
    padding: 0px;
    height: 100px;
    width: 100%;
    background-color: #97cee0;
    position: fixed;
    top: 0px;
    left: 0px;
    z-index: 100;
}
div#left {
    margin: 0px;
    padding: 0px;
    height: 100%;
    width: 100px;
    background-color: #97cee0;
    position: fixed;
    top: 0px;
    left: 0px;
    z-index: 100;
}
div#right {
    margin: 0px;
    padding: 0px;
    height: 100%;
    width: 100px;
    background-color: #97cee0;
    position: fixed;
    top: 0px;
    right: 0px;
    z-index: 100;
}
div#bottom {
    margin: 0px;
    padding: 0px;
    height: 100px;
    width: 100%;
    background-color: #97cee0;
    position: fixed;
    bottom: 0px;
    right: 0px;
    z-index: 100;
}
div#content {
    z-index: 0;
    padding: 100px;
}
div#wrapper {
overflow: scroll;
}
</style> 
```

HTML：

```
<div id="wrapper">
    <div id="top"></div>
    <div id="left"></div>
    <div id="right"></div>
    <div id="bottom"></div>
    <div id="content">Long list of stuff.</div>
</div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T14:59:08.793

浏览器负责渲染原生滚动条。我所知道的所有浏览器都会将垂直滚动直接呈现到您的盒子模型的右侧。

因此，如果您想要一个不直接附加到您的内容的滚动条，您将不得不使用某种 JavaScript 滚动条。看看[如何使用 JQuery UI 中的 Slider 控件作为滚动条](http://jqueryui.com/demos/slider/#side-scroll)。

如何做到这一点的本质是处理某种滚动事件，无论是从滑块还是从某处的实际滚动条，然后使用它的值来改变`margin-top`另一个 div 内部的 div 的 css 值`overflow:hidden`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T23:27:43.470

我想到的一种方法是在滚动区域内使用两个 div

类似的东西

```
<div>
    <div class="top"></div>
    <div class="content">1, 2, 3, 4, 5, 6 ....</div>
    <div class="bottom"></div>
</div> 
```

然后使用 css 给“顶部” div 一个固定在顶部的位置，“底部” div 一个固定在底部的位置。您还需要为“内容”div 提供顶部和底部填充，以说明“顶部”和“底部”div。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T23:28:06.637

如果我理解这一点，您可以定义 div 的大小或包含数字的任何内容，然后使用 css 溢出属性：

```
div{
   overflow:scroll;
} 
```

# c++ - 如何使用 C++ 在 Windows 上创建具有 UNICODE 路径的文件

> ID：10149505
> 
> 赞同：2
> 
> 时间：2012-04-13T23:20:40.327
> 
> 标签：c++, windows, winapi, unicode, filesystems

我想知道哪个 Win32 API 调用正在使用 UNICODE 路径创建文件。只是为了确保，我不是在谈论这里的内容，只是文件路径。如果有人用 MSDN url 打我，我将不胜感激，我的 google fu 这次失败了。

提前一百万谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T23:27:52.380

请参阅`CreateFile`msdn 链接： http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)，如果您将 unicode 字符串传递给 lpFileName 参数，则为 unicode 版本of`CreateFile`将被使用。

您还需要以二进制模式打开文件，请参阅 msdn 论坛上的此讨论：http: [//social.msdn.microsoft.com/forums/en-US/vclanguage/thread/71fa98ca-e757-4099-8f7f-fefcfe645298](http://social.msdn.microsoft.com/forums/en-US/vclanguage/thread/71fa98ca-e757-4099-8f7f-fefcfe645298)其中指出这篇 msdn 文章：http: [//msdn.microsoft.com/en-us/library/c4cy2b8e%28vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/c4cy2b8e%28vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-14T09:28:02.730

这个问题的主要标签是“c++”而不是“windows。现在，除非这只是一个非常常见的作弊，以便在更大的 - 大部分不相关的 - 观众面前获得一个 windows api 问题，否则答案应该有点相关到 C++。

因此，在 C++ 应用程序中，有许多可以采用 wchar_t 的 std:: 特化。[例如wofstream](http://msdn.microsoft.com/en-us/library/f1d6b0fk%28v=vs.80%29.aspx)。

# php - 替换字符串之间的字符

> ID：10149506
> 
> 赞同：0
> 
> 时间：2012-04-13T23:20:44.007
> 
> 标签：php, regex

也许我这样做为时已晚，但我正在尝试用 PHP 中的正则表达式替换 2 个字符串之间的一个字符。

示例字符串：

```
other | text [tag]text|more text|and more[/tag] end | text 
```

我的目标是`|`用`<br/>`between `[tag]`and替换`[/tag]`。

试过这个，但似乎并不那么容易：

```
/<td>(\|)<td>/gsi 
```

搜索了一下，但无法用我找到的东西做出答案。

希望能帮到你，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T23:25:36.623

首先，找到 s 里面的东西`[tag]`，*然后*找到管道。PHP 5.3：

```
$result = preg_replace_callback('/\[tag\](.+?)\[\/tag\]/i', function($match) {
    return str_replace('|', '<br />', $match[1]);
}, $str); 
```

# mysql - MySQL：条件 INSERT ... SELECT 用于具有常量值的多行

> ID：10149507
> 
> 赞同：0
> 
> 时间：2012-04-13T23:20:56.373
> 
> 标签：mysql, select, insert

我知道如何在单个查询中插入具有常量值的多行：

```
INSERT INTO table
VALUES
  (1, 'a', 'x'),
  (2, 'b', 'y'),
  (3, 'c', 'z'); 
```

但是我如何有条件地做到这一点？我想确保只插入不存在的*行。甚至可以在单个查询中完成吗？

**当所有列与我们插入的列相同时，该行存在*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T23:25:05.437

使用`INSERT IGNORE INTO`而不是`INSERT INTO`. 如果没有违反唯一键约束，前者只会插入行。

```
INSERT IGNORE INTO table
VALUES
  (1, 'a', 'x'),
  (2, 'b', 'y'),
  (3, 'c', 'z'); 
```

# c - Glut 和使用纹理图集

> ID：10149509
> 
> 赞同：0
> 
> 时间：2012-04-13T23:21:00.763
> 
> 标签：c, textures, glut, texture-mapping

我的问题可能很容易回答

我正在导入一个 128x128 纹理图集 RAW 文件。我想让我的立方体的一个面成为存储在该纹理图集中的图像。我从像素 ( 10 , 5 ) 开始绘制尺寸为 10x5 的图像

所以我的图像显示在左上角 (10, 5) 和右下角 (20, 10)

图像角看起来像这样

(10 , 5) ----- (20 , 5)

(20 , 5) ----- (20 , 10)

如果我没看错

glTexCoord2f() 在实现时将整个图像从 0 缩放到 1。如果我想在该纹理图集中获得子图像，我是否只需选择要绘制的像素并将其除以 128？

```
GLuint textAtlas = LoadTextureRAW("TextAtlas128", 1, 128,128 );

glPushAttrib(GL_ENABLE_BIT);
    glEnable( GL_TEXTURE_2D );
    glBindTexture( GL_TEXTURE_2D, textAtlas );
    glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_REPLACE);
    glPushMatrix();
        glBegin(GL_QUADS);
.
.
.

glTexCoord2f(10.0f/128, 05.0f/128); glVertex3d(...

glTexCoord2f(10.0f/128, 10.0f/128); glVertex3d(...

glTexCoord2f(20.0f/128, 10.0f/128); glVertex3d(...

glTexCoord2f(20.0f/128, 05.0f/128); glVertex3d(... 
```

任何帮助都会很棒。

```
void drawBlocks(){
    float percentage = .3;
    int i , j ,k;
    int sX = -80; int sY = 90; int sZ = -620;
    GLuint textAtlas = LoadTextureRAW("TextAtlas128", 1, 128,128 );

    glPushAttrib(GL_ENABLE_BIT);
        glEnable( GL_TEXTURE_2D );
        glBindTexture( GL_TEXTURE_2D, textAtlas );
        glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_REPLACE);
        glPushMatrix();
            glBegin(GL_QUADS);
                for(i = 0; i < 4; i++){
                    for(j = 0; j < 8; j++){
                        for(k = 0; k < 9; k++){
                            if(block[i][j][k].exists == 1){
                                //Front Face
                                glNormal3f(0,0,1);
                                glTexCoord2f(10.0/128, 05.0/128); glVertex3d( sX + (i * 40)      , sY - (j * 20)     , sZ - (k * 20));
                                glTexCoord2f(10.0/128, 10.0/128); glVertex3d( sX + (i * 40)      , sY - (j * 20) -20 , sZ - (k * 20));
                                glTexCoord2f(20.0/128, 10.0/128); glVertex3d( sX + (i * 40) + 40 , sY - (j * 20) -20 , sZ - (k * 20));
                                glTexCoord2f(20.0/128, 05.0/128); glVertex3d( sX + (i * 40) + 40 , sY - (j * 20)     , sZ - (k * 20));

                                //Back Face
                                glVertex3d( sX + (i * 40)      , sY - (j * 20)     , sZ - (k * 20) - 20);
                                glVertex3d( sX + (i * 40)      , sY - (j * 20) -20 , sZ - (k * 20) - 20);
                                glVertex3d( sX + (i * 40) + 40 , sY - (j * 20) -20 , sZ - (k * 20) - 20);
                                glVertex3d( sX + (i * 40) + 40 , sY - (j * 20)     , sZ - (k * 20) - 20);

                                //Top Face
                                glVertex3d( sX + (i * 40)      , sY - (j * 20)  , sZ - (k * 20) - 20);
                                glVertex3d( sX + (i * 40)      , sY - (j * 20)  , sZ - (k * 20)     );
                                glVertex3d( sX + (i * 40) + 40 , sY - (j * 20)  , sZ - (k * 20)     );
                                glVertex3d( sX + (i * 40) + 40 , sY - (j * 20)  , sZ - (k * 20) - 20);

                                //Bottom Face
                                glVertex3d( sX + (i * 40)      , sY - (j * 20) - 20 , sZ - (k * 20) - 20);
                                glVertex3d( sX + (i * 40)      , sY - (j * 20) - 20 , sZ - (k * 20)     );
                                glVertex3d( sX + (i * 40) + 40 , sY - (j * 20) - 20 , sZ - (k * 20)     );
                                glVertex3d( sX + (i * 40) + 40 , sY - (j * 20) - 20 , sZ - (k * 20) - 20);

                                //Right Face
                                glVertex3d( sX + (i * 40) + 40 , sY - (j * 20)      , sZ - (k * 20)     );
                                glVertex3d( sX + (i * 40) + 40 , sY - (j * 20) - 20 , sZ - (k * 20)     );
                                glVertex3d( sX + (i * 40) + 40 , sY - (j * 20) - 20 , sZ - (k * 20) - 20);
                                glVertex3d( sX + (i * 40) + 40 , sY - (j * 20)      , sZ - (k * 20) - 20);

                                //Left Face
                                glVertex3d( sX + (i * 40) , sY - (j * 20)      , sZ - (k * 20)     );
                                glVertex3d( sX + (i * 40) , sY - (j * 20) - 20 , sZ - (k * 20)     );
                                glVertex3d( sX + (i * 40) , sY - (j * 20) - 20 , sZ - (k * 20) - 20);
                                glVertex3d( sX + (i * 40) , sY - (j * 20)      , sZ - (k * 20) - 20);
                            }
                        }
                    }
                }
            glEnd();
        glPopMatrix();
    glPopAttrib();
}

void drawPlanes(){
    /*GLuint texture  =  LoadTextureRAW( "Wall Texture", 1 );*/
    GLuint texture  =  LoadTextureRAW( "walls", 1, 32,32 );

    glPushAttrib(GL_ENABLE_BIT);
        glEnable( GL_TEXTURE_2D );
        glBindTexture( GL_TEXTURE_2D, texture );
        glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_REPLACE);

        glBegin(GL_QUADS);
            //Floor
            glNormal3f( 0.0f , 1.0f, 0.0f);

            glTexCoord2f(0.0f, 0.0f);   glVertex3f( -100.0f , -100.0f , -725.0f);
            glTexCoord2f(0.0f, 10.0f);  glVertex3f(100.0f , -100.0f , -725.0f);
            glTexCoord2f(10.0f, 10.0f); glVertex3f(100.0f , -100.0f ,  000.0f);
            glTexCoord2f(10.0f, 0.0f);  glVertex3f( -100.0f , -100.0f ,  000.0f);

            //Ceiling
            glNormal3f(0.0f,-1.0f,0.0f);

            glTexCoord2f(0.0f, 0.0f);   glVertex3f( 100.0f, 100.0f, -725.0f);
            glTexCoord2f(0.0f, 10.0f);  glVertex3f(-100.0f, 100.0f, -725.0f);
            glTexCoord2f(10.0f, 10.0f); glVertex3f(-100.0f, 100.0f,  000.0f);
            glTexCoord2f(10.0f, 0.0f);  glVertex3f( 100.0f, 100.0f,  000.0f);

            //Right Wall
            glNormal3f( -1.0f , 0.0f, 0.0f);

            glTexCoord2f(10.0f, 10.0f); glVertex3f(100.0f , 100.0f ,  000.0f);
            glTexCoord2f(0.0f, 10.0f);  glVertex3f(100.0f , 100.0f , -725.0f);
            glTexCoord2f(0.0f, 00.0f);  glVertex3f(100.0f ,-100.0f , -725.0f);
            glTexCoord2f(10.0f, 0.0f);  glVertex3f(100.0f ,-100.0f,   000.0f);

            //LeftWall
            glNormal3f( 1.0f , 0.0f, 0.0f);

            glTexCoord2f(10.0f, 10.0f); glVertex3f(-100.0f ,  100.0f , -725.0f);
            glTexCoord2f(0.0f, 10.0f);  glVertex3f(-100.0f ,  100.0f ,  000.0f);
            glTexCoord2f(0.0f, 00.0f);  glVertex3f(-100.0f , -100.0f ,  000.0f);
            glTexCoord2f(10.0f, 0.0f);  glVertex3f(-100.0f , -100.0f , -725.0f);

            //Back Wall
            glNormal3f( 0.0f , 0.0f, 1.0f);

            glTexCoord2f(10.0f, 10.0f); glVertex3f( 100.0f ,  100.0f , -725.0f);
            glTexCoord2f(0.0f, 10.0f);  glVertex3f(-100.0f ,  100.0f , -725.0f);
            glTexCoord2f(0.0f, 00.0f);  glVertex3f(-100.0f , -100.0f , -725.0f);
            glTexCoord2f(10.0f, 0.0f);  glVertex3f( 100.0f , -100.0f , -725.0f);

        glEnd();
    glPopAttrib();

}
/**
    Done Drawing Stuff
*/

/**
    Texture Stuff
*/

// load a 256x256 RGB .RAW file as a texture
GLuint LoadTextureRAW( const char * filename, int wrap , int width, int height )
{
    GLuint texture;
    GLbyte *data;
    FILE * file;

    // open texture data
    file = fopen( filename, "rb" );
    if ( file == NULL ) {
        printf("Not found");
        return 0;
    }

    data = (GLbyte*)malloc(width * height * 3);

    // read texture data
    fread( data, width * height * 3, 1, file );
    fclose( file );

    // allocate a texture name
    glGenTextures( 1, &texture );

    // select our current texture
    glBindTexture( GL_TEXTURE_2D, texture );

    // select modulate to mix texture with color for shading
    glTexEnvf( GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE );

    // when texture area is small, bilinear filter the closest mipmap
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER,
                     GL_LINEAR_MIPMAP_NEAREST );
    // when texture area is large, bilinear filter the first mipmap
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );

    // if wrap is true, the texture wraps over at the edges (repeat)
    //       ... false, the texture ends at the edges (clamp)
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S,
                     wrap ? GL_REPEAT : GL_CLAMP );
    glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T,
                     wrap ? GL_REPEAT : GL_CLAMP );

    // build our texture mipmaps
    gluBuild2DMipmaps( GL_TEXTURE_2D, 3, width, height,
                       GL_RGB, GL_UNSIGNED_BYTE, data );

    // free buffer
    free( data );

    return texture;
} 
```

编辑：屏幕截图

[http://dl.dropbox.com/u/12914798/Texture%20Atlas.png](http://dl.dropbox.com/u/12914798/Texture%20Atlas.png)

[http://dl.dropbox.com/u/12914798/ingame.png](http://dl.dropbox.com/u/12914798/ingame.png)

[http://dl.dropbox.com/u/12914798/Code%20Example.png](http://dl.dropbox.com/u/12914798/Code%20Example.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T00:19:33.800

> 我会选择我想要绘制的像素并将其除以 128 吗？

是的。那不适合你吗？好像你知道该怎么做，不知道你为什么不试试:)

# nusoap - NuSoap 中的请求消息大小是否有默认限制？

> ID：10149520
> 
> 赞同：0
> 
> 时间：2012-04-13T23:22:07.920
> 
> 标签：nusoap

NuSoap 中的请求消息大小是否有默认限制？我问这个是因为当我使用 NuSOAP 客户端将大小为 194 KB 的 CSV 数据发送到 NuSOAP 服务器时，我从服务器收到以下响应。

HTTP/1.1 100 继续

HTTP/1.0 500 内部服务器错误日期：2012 年 4 月 13 日星期五 04:36:36 GMT 服务器：Apache/2.2.3 (CentOS) X-Powered-By：PHP/5.2.6 内容长度：0 连接：关闭内容-类型：文本/html

我曾尝试查看 apache 和 PHP 的错误日志文件，但在那里找不到任何东西。我已经与这个问题斗争了几个小时。我已经尝试四处寻找答案。一些帖子建议增加 php.ini 中的内存限制，但我没有运气。非常感谢您的帮助。

——阿卜杜勒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:20:19.273

我认为消息大小将受到 PHP 内存限制而不是某些硬编码值的限制。至少我可以毫无问题地发送一个 6.5MB 的字符串。当我尝试发送一个 8MB 的字符串时，我在 nusoap.php 中遇到了内存不足的异常（我的服务器对 PHP 有 64MB 的限制）。

# php - 生成数字组合

> ID：10149523
> 
> 赞同：1
> 
> 时间：2012-04-13T23:22:36.780
> 
> 标签：php, algorithm, loops, combinations

我有一个带有两个变量的 PHP 页面：`$nbRank`和`$nbNumeric`. 根据这两个变量，我想生成一个包含所有现有组合的数组。例如：

如果我会`$nbRank = 3`：`$nbNumeric = 2`

```
0 0 0
0 0 1
0 0 2
0 1 0
0 1 1
0 1 2
0 2 0
0 2 1
0 2 2
1 0 0
1 0 1
1 0 2
1 1 0
1 1 1
1 1 2
1 2 0
1 2 1
1 2 2
2 0 0
2 0 1
2 0 2
2 1 0
2 1 1
2 1 2
2 2 0
2 2 1
2 2 2 
```

因此，我创建了不同的循环和公式来获得最终结果，但它不起作用。这就是我所做的：

```
$result = array();

$nbIntRank = 0;
$nbIntNumeric = 0;
$nbRank = array();
$nbNumeric = array();

$nb_rangs = 3;
$nb_chiffres = 2;

for ($i = 1; $i <= $nb_rangs; $i++){
    $nbRank[$i] = 0;
}

$nbIntRank = count($nbRank);

for ($i = 0; $i <= $nb_chiffres; $i++){
    $nbNumeric[$i] = $i;
}

$nbIntNumeric = count($nbNumeric);

$algo = ($nb_rangs * ($nb_chiffres + 1)) * ($nb_rangs * ($nb_chiffres + 1));
$nbLine = $algo / ($nb_rangs);

$occ = 0;
for ($i = 0; $i < $nbLine; $i++){
    foreach ($nbRank as $nbrItem => $nbrValue){
        $result[$i][] = $nbrValue;
        $occ++;
    }
}

echo '#############<br />';
echo '### DATAS ###<br />';
echo '#############<br /><br />';

echo '- Nb Elements : '.$algo.'<br />';
echo '- Nb Lines : '.$nbLine.'<br />';
echo '- Nb Valuable Occurency : '.$occ.'<br />';

echo '<br /><hr /><br />';
echo '##############<br />';
echo '### PARSER ###<br />';
echo '##############<br /><br />';

echo '<pre>';
var_dump($result);
echo '</pre>'; 
```

我设法用空值（81 个值，27 行，每行 3 个元素）创建了我的最终数组，但它只包含 0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T23:39:51.643

您表示您可以使用伪代码。抱歉，我无法为您的 php 代码提供具体的更正[如果出现这些答案 - 它们可能更具教育意义]，但我选择了一个[递归](http://en.wikipedia.org/wiki/Recursion)解决方案来解决这个问题。

在递归的每一级中，**尝试所有可能性，并调用相同的函数来找到一个较小尺寸的所有组合**。

**伪代码：**

```
findCombinations(range,size,sol,resultList):
  if (size ==0): #base clause
     resultList.append(copy(sol)) #making a copy of sol and appending it as a solution
     return
  for each i in (0,range):
     sol.append(i)
     findCombinations(range,size-1,sol,resultList) #recursive invokation, with smaller size
     sol.deleteLast() #clean up environment before next calls 
```

调用`findCombinations(3,3,[],resultList)`where`[]`只是空列表，并且`resultList`在算法完成后将保存组合列表。此调用将获得大小为 3 和元素 0、1、2 的所有组合。

**复杂性说明：** 可能性的数量呈指数级增长 [O(range ^(size) )]，因此如果您尝试使用 20,20 来调用它 - 对于任何解决方案都可能需要一些 [非常长] 时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T23:45:03.837

```
$nbRank = 3;
$nbNumeric = 2;

foreach (range(0, base_convert(str_pad('', $nbRank, $nbNumeric), $nbNumeric+1, 10)) as $i) {
  echo str_pad(base_convert($i, 10, $nbNumeric+1), 3, 0, STR_PAD_LEFT) . PHP_EOL;
} 
```

简单的想法：你想要的是从 0 到 X 的每个数字`$nbNumeric`，因此我们只需将最大数字转换为以 10 为底，使用常见的基于 10 的运算符对其进行迭代，然后`$nbNumeric`再次将其转换回基数。

可能更具可读性，但实际上完全相同

```
$nbRank = 3;
$nbNumeric = 2;

// Top is "base_convert(222, 3, 10);" and therefore the upper limit
$top = base_convert(str_pad('', $nbRank, $nbNumeric), $nbNumeric+1, 10);
for ($i = 0; $i <= $top; $i++) {
    echo str_pad(base_convert($i, 10, $nbNumeric+1), 3, 0, STR_PAD_LEFT) . PHP_EOL;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T23:41:54.633

这是一个递归解决方案：

```
$nbRank = 3;
$nbNumeric = 2;

function getCombinations ($length, $min, $max, $aStartingCombinations)
{
    if ($length == 1)
    {
        return range ($min, $max);
    }

    $final = array ();
    foreach (getCombinations ($length - 1, $min, $max, $aStartingCombinations) as $combination)
    {
        for ($i = $min; $i <= $max; $i++)
        {
            $final [] = $combination . $i;
        }
    }
    return $final;
}

print_r (getCombinations ($nbRank, 0, $nbNumeric, array ())); 
```

# mysql - 使用外连接返回多个空值

> ID：10149526
> 
> 赞同：1
> 
> 时间：2012-04-13T23:22:48.073
> 
> 标签：mysql, join, null, outer-join

我正在尝试使用我的两个表之间的 LEFT OUTER JOIN 来获取 SQL 查询以返回 NULL 值。

一个表包含用户信息，另一个包含点名信息。本质上，我正在尝试生成一个 HTML 表格来显示是否有人每个月都签了名。如果值为 NULL，则表示他们在点名时不是成员。

我现在遇到的问题是查询只会返回一个 NULL 值，即使他们不是一个以上点名的成员。这是我正在使用的查询，其中用户不是多次点名的成员：

```
SELECT m.userid, r.status, r.rollcallid
FROM fleetmgr_members AS m
     LEFT OUTER JOIN fleetmgr_rollcall_log AS r 
     ON m.userid = r.userid AND r.rollcallid IN(1, 5)
WHERE m.userid = 2089
ORDER BY m.currentName, r.rollcallid; 
```

此查询返回：

```
userid  status  rollcallid
2089    NULL    NULL 
```

我希望它返回：

```
userid  status  rollcallid
2089    NULL    1
2089    NULL    5 
```

出于某种奇怪的原因，实现我想要它返回的东西完全让我感到难过 - 所以提前感谢您提供的任何帮助。

Fleetmgr_rollcall_log 表：

```
 id     rollcallid  userid    date_signed   status  activity        comments    
  2     1           652       1330563886    signed  6-8 hrs/week    -
  29    1           2462      1330565521    signed  9-11 hrs/week   -
  1823  5           731       1333300321    signed  0-2 hrs/week    -
  2293  5           166       1333901983    exempt  0-2 hrs/week    - 
```

Fleetmgr_members 表：

```
 id     userid      currentName
 1          3       SomeUsername
 2          5       DifferentUsername 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T09:42:42.343

这样的事情怎么样

```
SELECT r1.rollcallid, r2.status
FROM (
    SELECT DISTINCT rollcallid
    FROM fleetmgr_rollcall_log
    ) AS r1 
 LEFT JOIN fleetmgr_rollcall_log AS r2 
 ON r1.rollcallid=r2.rollcallid AND r2.userid=2089
ORDER BY r1.rollcallid; 
```

我没有返回任何用户数据，因为您在示例结果中获得的唯一用户数据是您在查询中已经知道的 user_id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T23:59:15.550

将 r.rollcallid IN(1, 5) 移动到 where 子句，而不是 join 子句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T10:43:27.613

为什么这不起作用？

```
SELECT m.userid, r.status, r.rollcallid
FROM fleetmgr_members AS m
     LEFT OUTER JOIN fleetmgr_rollcall_log AS r 
     ON m.userid = r.userid 
WHERE m.userid = 2089 AND r.rollcallid IN(1, 5)
ORDER BY m.currentName, r.rollcallid; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T23:39:20.297

尝试这个

```
SELECT m.userid, r.status, r.rollcallid
FROM fleetmgr_members  m, fleetmgr_rollcall_log  r 
WHERE m.userid = 2089  AND r.rollcallid IN(1, 5)
ORDER BY m.currentName, r.rollcallid; 
```

那么这个（使用CROSS JOIN）怎么样：

```
SELECT m.userid, r.status, r.rollcallid
FROM fleetmgr_members  m cross join fleetmgr_rollcall_log  r 
WHERE m.userid = 2089  AND r.rollcallid IN(1, 5)
ORDER BY m.currentName, r.rollcallid; 
```

# jquery-mobile - 拉动动态 ajax 内容时如何显示加载动画？> jQuery 手机

> ID：10149528
> 
> 赞同：0
> 
> 时间：2012-04-13T23:23:21.023
> 
> 标签：jquery-mobile

在 jquerymobile 中加载普通页面时，我得到了很好的加载动画，但是当我从 ajax 源中提取时，我没有得到动画，用户可能会因为他们没有提交表单而感到困惑。

我无法从谷歌搜索中找到任何可以调用动画的内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T03:38:13.023

如果您像往常一样提交表单，JQM 会自动对表单进行 ajax 处理，您就会得到您所指的整洁的小动画。IE

```
<form action="processMyForm.php" method="post">
    ...inputs here
</form> 
```

您还可以访问以下方法。

```
$.mobile.showPageLoadingMsg("b", "This is only a test"); // options are (theme, text, boolean text only)
$.mobile.hidePageLoadingMsg(); 
```

# php - 对于 php mysqli 代码，num_rows 应该为 >0 时为 0

> ID：10149533
> 
> 赞同：0
> 
> 时间：2012-04-13T23:23:34.267
> 
> 标签：php, mysqli, mysql-num-rows

我的 num_rows 以 0 的形式返回，我尝试了几种方式调用它，但我被卡住了。这是我的代码：

```
 $conn = new mysqli($dbserver, "dbuser", "dbpass", $dbname);

    // get the data 
    $sql = 'SELECT AT.activityName, AT.createdOn
            FROM userActivity UA, users U, activityType AT  
            WHERE U.userId = UA.userId
            and AT.activityType = UA.activityType
            and U.username = ?
            order by AT.createdOn';             
    $stmt = $conn->stmt_init();
    $stmt->prepare($sql);
    $stmt->bind_param('s', $requestedUsername);
    $stmt->bind_result($activityName, $createdOn);
    $stmt->execute();

    // display the data
    $numrows = $stmt->num_rows;
    $result=array("user activity report for:  " . $requestedUsername . " with " . $numrows . " rows:");
    $result[]="Created On --- Activity Name";
    while ($stmt->fetch())
    {
        $msg = " " . $createdOn . " --- " . $activityName . " ";
        $result[] = $msg;
    }

    $stmt->close(); 
```

找到了多行，提取循环处理它们就好了。关于什么可以让我获得查询中返回的行数的任何建议？

非常感谢您的建议。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T23:30:27.247

你需要先打电话`$stmt->store_result()`，就在`$stmt->num_rows`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T23:27:36.060

在调用 num_rows; 之前尝试添加它。

`$stmt->store_result();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T23:31:18.477

我不知道这是否会解决它，但如果我没记错的话，你可以在查询之后*才能*`bind_results`解决。*`execute`*

 *还有你的while循环：

```
while ($stmt->fetch())
 {
     $msg = " " . $createdOn . " --- " . $activityName . " ";
     $result[] = $msg;
 } 
```

您将在循环的每次迭代中丢失所有`$msg`变量，除了最后一个设置，因为您需要做`$msg .=`或制作`$msg`一个数组`$msg[] =`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T23:35:06.943

```
$stmt->store_result();
$numrows = $stmt->num_rows; 
```

检查这个： http: [//php.net/manual/en/mysqli-result.num-rows.php](http://php.net/manual/en/mysqli-result.num-rows.php)和这个 [http://php.net/manual/en/mysqli-stmt.num-rows.php](http://php.net/manual/en/mysqli-stmt.num-rows.php)*

# c++ - 将一行delphi代码转换为c++

> ID：10149537
> 
> 赞同：1
> 
> 时间：2012-04-13T23:24:18.747
> 
> 标签：c++, delphi

我怎样才能用 C++ 写那一行？

使用delphi代码（不是此处发布的此代码）我将写入填充了一些信息的记录到exe文件并使用c ++代码我将读取此记录并将信息传递给结构

这是delphi中的代码

```
type
 TSettings = record
    sFileName: String[50]; 
    siInstallFolder: Byte; 
    bRunFile: Boolean;
   ...
  end;

..
var
i: dword;
sZdData: PChar;
Settings :Tsettings;
begin
....
     ZeroMemory(@Settings, sizeof(Tsettings));
      settings := Tsettings(Pointer(@sZdData[i])^); // this code to c++ 
```

c ++代码（希望其余的都可以）

```
struct TSettings{
    char sFileName[50]; 
    byte siInstallFolder; 
    bool bRunFile;
   ...
}  Settings;

...
DWORD i;
LPBYTE sZdData;

         ZeroMemory(&Settings, sizeof(TSettings));
      Settings = ????? // im failing here i dunno what to do // i need same as in delphi code above 
```

对不起我的英语不好.. :(

这是德尔福代码

```
function GetInfoSettings(FileName: String; // filename from where to get data
                        var lpData: PChar; // where to write data
                        var dwSettingsLen: DWORD // returns the length of all bound files
                        ): Boolean;
var
  hFile: THandle;
  DosHeader: TImageDosHeader;
  NtHeaders: TImageNtHeaders;
  SectionHeader: TImageSectionHeader;
  dwReadBytes, dwOrginalFileSize, dwFileSize, dwSettingsLength: DWORD;
begin
  Result := False;
  hFile :=  Createfile(PChar(FileName), GENERIC_READ, FILE_SHARE_READ, nil, OPEN_EXISTING, 0, 0);
  SetFilePointer(hFile, 0, nil, FILE_BEGIN);
  ReadFile(hFile, DosHeader, sizeof(DosHeader), dwReadBytes, nil);
  if dwReadBytes = sizeof(DosHeader) then
  begin
    SetFilePointer(hFile, DosHeader._lfanew, nil, FILE_BEGIN);
    ReadFile(hFile, NtHeaders, sizeof(NtHeaders), dwReadBytes, nil);
    if dwReadBytes = sizeof(NtHeaders) then
    begin
      SetFilePointer(hFile, sizeof(SectionHeader) * (NtHeaders.FileHeader.NumberOfSections -1), nil, FILE_CURRENT);
      ReadFile(hFile, SectionHeader, sizeof(SectionHeader), dwReadBytes, nil);
      dwOrginalFileSize := SectionHeader.PointerToRawData + SectionHeader.SizeOfRawData;
      dwFileSize := GetFileSize(hFile, nil);
      dwSettingsLength := dwFileSize - dwOrginalFileSize;
      if dwSettingsLength > 0 then
      begin
        SetFilePointer(hFile, dwOrginalFileSize, nil, FILE_BEGIN);
        GetMem(lpData, dwSettingsLength);
        ReadFile(hFile, lpData^, dwSettingsLength, dwReadBytes, nil);
        if dwReadBytes = dwSettingsLength then
        begin
          Result := True;
          dwSettingsLen := dwSettingsLength;
        end;
      end;
    end;
  end;
  CloseHandle(hFile);
end; 
```

在这里我得到信息或绑定文件......

var i, // 这里将保存已经完成的字节数 .. dwDaSize: DWORD; // 所有部分之后的数据长度 .. dwFilenaam,sFileName :string; sZdData：PChar；// 这里将是“EOF”之后的所有数据（所有部分数据结束） // 将提取文件的文件名 ..

```
 Settings: Tsettings;

// writting
  hFile: THandle;
  lpNumberOfBytesWritten: DWORD;
begin
  GetMem(dwFilenaam, MAX_PATH);
  GetModuleFileName(GetModuleHandle(nil), dwFilenaam, MAX_PATH);
  if GetInfos(dwFilenaam, sZdData, dwDaSize) then
  begin
    i := 0;
    repeat

      ZeroMemory(@Settings, sizeof(Tsettings));
      settings := Tsettings(Pointer(@sZdData[i])^); 
```

我的尝试（我知道这段代码看起来很垃圾哈哈）也许不是？

```
bool getSettingsInfo(LPSTR FileName, LPBYTE lpdata, DWORD dwSettingsLen)
{
    HANDLE HandleFile ;
    DWORD  dwReadBytes;
    DWORD dwOrginalFileSize;
    DWORD dwFileSize;
    DWORD dwSettingsLength; 
    PIMAGE_DOS_HEADER pidh ;
    PIMAGE_NT_HEADERS pinh ;
    PIMAGE_SECTION_HEADER pish;

    return  false;
    HandleFile =  CreateFile(FileName, GENERIC_READ, FILE_SHARE_READ, 0,OPEN_EXISTING,0, NULL); 
    SetFilePointer(HandleFile, 0,0, FILE_BEGIN);
        ReadFile(HandleFile, pidh, sizeof(pidh), &dwReadBytes,NULL); 
    if (dwReadBytes == sizeof(pidh))
     {
     SetFilePointer(HandleFile, pidh->e_lfanew , NULL, FILE_BEGIN);
     ReadFile(HandleFile, pidh,sizeof(pinh), &dwReadBytes, NULL); 
    if (dwReadBytes == sizeof(pinh)) 
    {
      SetFilePointer(HandleFile, sizeof(pish) * (pinh->FileHeader.NumberOfSections -1), NULL, FILE_CURRENT);
      ReadFile(HandleFile, pish, sizeof(pinh), &dwReadBytes, NULL);
      dwOrginalFileSize = pish->PointerToRawData + pish->SizeOfRawData;
      dwFileSize = GetFileSize(HandleFile, NULL);
      dwSettingsLength = dwFileSize - dwOrginalFileSize;
      if (dwSettingsLength > 0) 
      {

        SetFilePointer(HandleFile, dwOrginalFileSize, NULL, FILE_BEGIN);
        realloc(lpdata, dwSettingsLength);
        ReadFile(HandleFile, lpdata, dwSettingsLength, &dwReadBytes, NULL);
        if (dwReadBytes == dwSettingsLength) 
        {
         return true;
          dwSettingsLen = dwSettingsLength;
        }
      }
    }
  }
  CloseHandle(HandleFile);
} 
```

提取信息的代码...

```
 DWORD i; // here will be saved how much bytes are already done ..
  DWORD dwDaSize; // length of data after all sections ..

  LPSTR dwFilenaam; 
  LPBYTE sZdData; // here will be all data after "EOF" (End of all sections data)
  LPSTR sFileName;// the filename where the file will be extracted ..

  char * Installpath;
  char * buffer;

  HFILE hFile;
  DWORD lpNumberOfBytesWritten;

  memset(dwFilenaam,0, MAX_PATH);
  GetModuleFileName(GetModuleHandle(NULL), dwFilenaam, MAX_PATH);
  if (getSettingsInfo(dwFilenaam, sZdData, dwDaSize) == true)
  {
      i = 0;
    //  REPEAT

      ZeroMemory(&Settings, sizeof(TSettings));

Settings = ??? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T03:25:41.550

在 C 中应该比 Delphi 更容易：

```
typedef struct 
{
     uchar length ; // shortstrings have an implicit length byte
     char sFileName[50]; 
     byte siInstallFolder; 
     bool bRunFile;  // one byte, 1=true, 0=false  any other value undefined
     ...
} TSettings;

TSettings settings;
DWORD i;
LPBYTE sZdData;

settings = *(TSettings*)(&sZdData[i]); 
```

这将调用 memcpy，不是因为强制转换，而是因为分配了 TSettings 结构。如果使用指向 TSettings 的指针，则无需复制即可访问：

```
TSettings* pSettings;
DWORD i; 
LPBYTE sZdData;

pSettings = (TSettings*)(&sZdData[i]);
printf("%d\n", pSettings->siInstallFolder); // example 
```

**顺便说一句，注意对齐。由于项目之间的差距，总结构大小可能会超出您的预期。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T23:36:31.640

```
 struct TSettings{
     uchar length ; // shortstrings have an implicit length byte
     char sFileName[50]; 
     byte siInstallFolder; 
     bool bRunFile;  // one byte, 1=true, 0=false  any other value undefined
     ...
   }  Settings;

  DWORD i;
  LPBYTE sZdData;

  ZeroMemory(&Settings, sizeof(TSettings));   

  literally it is something like
    Settings = (struct Settings)  (*((void *)&sZDData[i])

  essentially it does

  memcpy (&sZDData[i],&settings,sizeof(TSettings)); 
```

它所做的是获取 sZSdata (@sZDDATA[i]) 的第 i 个元素的地址并将其转换为无类型指针。（等效于 C++ (void*)(&sZDData[i]))）

然后是时髦的部分，取消引用它（^ 作为 pascal 中的后缀运算符，* 作为 C 中的前缀运算符）（本质上是 (void) ptr 指向的地址，一块没有附加长度数据的内存块）。

当将其分配给设置时，这显然意味着将与左值 (= sizeof(settings)) 字节的大小一样多的字节从该地址移动到左值（设置）中。

这是一个非常时髦的结构，我不确定我以前是否见过它。我检查了 Delphi 和 FPC 中的 asm 级别，它们的行为相同。

# maven-3 - maven pom.xml 中的条件配置

> ID：10149539
> 
> 赞同：6
> 
> 时间：2012-04-13T23:24:23.440
> 
> 标签：maven-3, pom.xml, maven-war-plugin

当属性“skipCompress”设置为 true 时，我只想使用 maven-war-plugin 排除某些文件。我认为以下规范可能有效，但事实并非如此。顺便说一句，我不能使用配置文件来实现这一点。我想使用 skipCompress 在开发和部署配置文件中打开和关闭压缩。

```
<plugin>
    <artifactId>maven-war-plugin</artifactId>
    <configuration>
    <if>
        <not>
        <equals arg1="${skipCompress}" arg2 = "true"/>
        </not>
        <then>
        <warSourceExcludes>**/external/dojo/**/*.js</warSourceExcludes>
        </then>
    </if>
    </configuration>
</plugin> 
```

谢谢，

大卫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T09:08:56.827

在没有真正了解 maven 配置文件的情况下，我使用如下模式解决了类似的问题。也许它对您的情况也有帮助。

```
<profiles>
  <profile>
    <id>skipCompress</id>
    <activation>
      <property>
        <name>skipCompress</name>
        <value>true</value>
      </property>
    </activation>
    <build>
      <plugins>
        <plugin>
          <artifactId>maven-war-plugin</artifactId>
          <configuration>
            <warSourceExcludes>**/external/dojo/**/*.js</warSourceExcludes>
          </configuration>
        </plugin>
      </plugins>
    </build>
  </profile>
</profiles> 
```

# vb.net - 如何使用 vb.net 在 google chrome 或其他网络浏览器中粘贴链接？

> ID：10149547
> 
> 赞同：0
> 
> 时间：2012-04-13T23:24:52.990
> 
> 标签：vb.net, visual-studio-2010, google-chrome

我已经成功地使用以下代码从 vb.net 应用程序打开了 firefox 或 google chrome 等程序

`Dim X As Long`

```
X = Shell("C:\Program Files\Mozilla Firefox\firefox.exe", 1) 
```

可以告诉我如何通过单击我的 vb.net 应用程序的按钮将特定链接粘贴到浏览器中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T13:33:04.693

[http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)

# bugzilla - 自定义 Bugzilla 4.0.2 错误 ID 号

> ID：10149556
> 
> 赞同：1
> 
> 时间：2012-04-13T23:26:46.933
> 
> 标签：bugzilla

是否可以自定义 Bugzilla 错误编号并添加字母指示符，以便立即知道它来自 Bugzilla？

我的公司正在评估 Bugzilla，现在添加了许多新错误。我们还使用了另外 2 个错误数据库。这不是我的决定，我相信他们正试图纳入更好的报告等。

通过将“bugs”表中的“AUTO_INCREMENT”字段设置为不同的值，我在这里阅读了关于“播种”Bugzilla 错误编号的答案。我希望我能早点想到这个并找到这个板。将该值设置为从 9000 或某个非凡的值开始可以确保我们确切知道哪些错误来自 Bugzilla。

但是，是否可以将“错误”表中的字段也更改为接受字母？当然，这可能只会弄乱数字的整个自动递增。

非常感谢任何帮助或建议。谢谢你。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-16T16:07:31.707

做你所要求的并不是一件小事。

但是，您仍然可以根据需要更改 Bugzilla 数据库的“种子”值。将现有的 bug 导出到 xml，然后创建一个新的 Bugzilla 数据库。改变种子。然后重新导入错误。他们现在都将使用大错误编号。

# mysql - 玩！框架 1.2.4 --- C3P0 设置避免通信链路故障做空闲时间

> ID：10149557
> 
> 赞同：3
> 
> 时间：2012-04-13T23:26:55.017
> 
> 标签：mysql, hibernate, playframework, c3p0, playframework-1.x

我正在尝试自定义我的 C3P0 设置以避免出现在这篇文章底部的错误。

建议在此 url --- [http://make-it-open.blogspot.com/2008/12/sql-error-0-sqlstate-08s01.html](http://make-it-open.blogspot.com/2008/12/sql-error-0-sqlstate-08s01.html) --- 调整设置如下：

在 hibernate.cfg.xml 中，写

```
<property name="c3p0.min_size">5</property>
<property name="c3p0.max_size">20</property>
<property name="c3p0.timeout">1800</property>
<property name="c3p0.max_statements">50</property> 
```

然后在您的根类路径文件夹中创建“c3p0.properties”并写入

```
c3p0.testConnectionOnCheckout=true
c3p0.acquireRetryDelay=1000
c3p0.acquireRetryAttempts=1 
```

我已经尝试按照 Play 的方向进行这些调整！框架文档，他们说使用“db.pool ...”，如下所示：

```
db.pool.timeout=1800
db.pool.maxSize=15
db.pool.minSize=5
db.pool.initialSize=5
db.pool.acquireRetryAttempts=1
db.pool.preferredTestQuery=SELECT 1
db.pool.testConnectionOnCheckout=true
db.pool.acquireRetryDelay=1000 
db.pool.maxStatements=50 
```

这些设置不会起作用吗？我应该尝试以不同的方式设置它们吗？使用这些设置，我仍然会收到如下所示的错误，这是由于长时间的空闲时间。

错误的完整堆栈跟踪：

```
23:00:44,932 WARN  ~ SQL Error: 0, SQLState: 08S01
2012-04-13T23:00:44+00:00 app[web.1]: 23:00:44,932 ERROR ~ Communications link failure
2012-04-13T23:00:44+00:00 app[web.1]: 
2012-04-13T23:00:44+00:00 app[web.1]: The last packet successfully received from the server was 274,847 milliseconds ago.  The last packet sent successfully to the server was 7 milliseconds ago.
2012-04-13T23:00:44+00:00 app[web.1]: 23:00:44,934 ERROR ~ Why the driver complains here?
2012-04-13T23:00:44+00:00 app[web.1]: com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: No operations allowed after connection closed.Connection was implicitly closed by the driver.
2012-04-13T23:00:44+00:00 app[web.1]:   at com.mysql.jdbc.Util.handleNewInstance(Util.java:407)
2012-04-13T23:00:44+00:00 app[web.1]:   at com.mysql.jdbc.Util.getInstance(Util.java:382)
2012-04-13T23:00:44+00:00 app[web.1]:   at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1013)
2012-04-13T23:00:44+00:00 app[web.1]:   at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:987)
2012-04-13T23:00:44+00:00 app[web.1]:   at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:982)
2012-04-13T23:00:44+00:00 app[web.1]:   at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:927)
2012-04-13T23:00:44+00:00 app[web.1]:   at com.mysql.jdbc.ConnectionImpl.throwConnectionClosedException(ConnectionImpl.java:1213)
2012-04-13T23:00:44+00:00 app[web.1]:   at com.mysql.jdbc.ConnectionImpl.getMutex(ConnectionImpl.java:3101)
2012-04-13T23:00:44+00:00 app[web.1]:   at com.mysql.jdbc.ConnectionImpl.setAutoCommit(ConnectionImpl.java:4975)
2012-04-13T23:00:44+00:00 app[web.1]:   at org.hibernate.jdbc.BorrowedConnectionProxy.invoke(BorrowedConnectionProxy.java:74)
2012-04-13T23:00:44+00:00 app[web.1]:   at $Proxy49.setAutoCommit(Unknown Source)
2012-04-13T23:00:44+00:00 app[web.1]:   at play.db.jpa.JPAPlugin.closeTx(JPAPlugin.java:368)
2012-04-13T23:00:44+00:00 app[web.1]:   at play.db.jpa.JPAPlugin.onInvocationException(JPAPlugin.java:328)
2012-04-13T23:00:44+00:00 app[web.1]:   at play.plugins.PluginCollection.onInvocationException(PluginCollection.java:447)
2012-04-13T23:00:44+00:00 app[web.1]:   at play.Invoker$Invocation.onException(Invoker.java:240)
2012-04-13T23:00:44+00:00 app[web.1]:   at play.jobs.Job.onException(Job.java:124)
2012-04-13T23:00:44+00:00 app[web.1]:   at play.jobs.Job.call(Job.java:163)
2012-04-13T23:00:44+00:00 app[web.1]:   at play.jobs.Job$1.call(Job.java:66)
2012-04-13T23:00:44+00:00 app[web.1]:   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
2012-04-13T23:00:44+00:00 app[web.1]:   at java.util.concurrent.FutureTask.run(FutureTask.java:166)
2012-04-13T23:00:44+00:00 app[web.1]:   at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:165)
2012-04-13T23:00:44+00:00 app[web.1]:   at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:266)
2012-04-13T23:00:44+00:00 app[web.1]:   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
2012-04-13T23:00:44+00:00 app[web.1]:   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
2012-04-13T23:00:44+00:00 app[web.1]:   at java.lang.Thread.run(Thread.java:636)
2012-04-13T23:00:44+00:00 app[web.1]: Caused by: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T20:45:26.337

在“conf”目录中创建“c3p0.properties”。

这个对我有用。

我认为 application.conf 中的 'db.pool' 只读取了几个选项，请查看播放源代码（*DBPlugin.onApplicationStart()*）：

```
ComboPooledDataSource ds = new ComboPooledDataSource();
ds.setDriverClass(p.getProperty("db.driver"));
ds.setJdbcUrl(p.getProperty("db.url"));
ds.setUser(p.getProperty("db.user"));
ds.setPassword(p.getProperty("db.pass"));
ds.setAcquireRetryAttempts(10);
ds.setCheckoutTimeout(Integer.parseInt(p.getProperty("db.pool.timeout", "5000")));
ds.setBreakAfterAcquireFailure(false);
ds.setMaxPoolSize(Integer.parseInt(p.getProperty("db.pool.maxSize", "30")));
ds.setMinPoolSize(Integer.parseInt(p.getProperty("db.pool.minSize", "1")));
ds.setMaxIdleTimeExcessConnections(Integer.parseInt(p.getProperty("db.pool.maxIdleTimeExcessConnections", "0")));
ds.setIdleConnectionTestPeriod(10);
ds.setTestConnectionOnCheckin(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-22T13:29:33.163

`idleConnectionTestPeriod`不会从 c3p0.properties 文件中获取。所以你需要把你的play框架升级到1.3或者1.4

# jquery - jquery fancybox 没有正确显示覆盖

> ID：10149558
> 
> 赞同：0
> 
> 时间：2012-04-13T23:27:13.097
> 
> 标签：jquery, fancybox

我在这个 wordpress 网站上设置了 fancybox：http: [//melisayavas.com/web/](http://melisayavas.com/web/) 当用户单击底部链接新闻订阅时，会出现 ajax 弹出框，但覆盖不会浮在主要内容上。

这是我使用的 fancybox 代码：

```
<script type="text/javascript">
$(document).ready(function() {
    $(".fancybox").fancybox();
});

$(document).ready(function() {
$(".various").fancybox({
    maxWidth    : 800,
    maxHeight   : 600,
    fitToView   : true,
    width       : '70%',
    height      : '70%',
    autoSize    : true,
    closeClick  : false,
    openEffect  : 'none',
    closeEffect : 'none'
});
});
</script> 
```

这是fancybox AJAX 显示的链接：http://melisayavas.com/web/wp-content/themes/murtaugh-HTML5-Reset-Wordpress-Theme-8aa6329/subscribe.html [-](http://melisayavas.com/web/wp-content/themes/murtaugh-HTML5-Reset-Wordpress-Theme-8aa6329/subscribe.html)这是一个 mailchimp 表单。

我不知道为什么覆盖不能正常工作......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T23:33:13.093

你有一个 404 错误`fancybox_sprite.png`

[http://melisayavas.com/web/wp-content/themes/murtaugh-HTML5-Reset-Wordpress-Theme-8aa6329/fancybox_sprite.png](http://melisayavas.com/web/wp-content/themes/murtaugh-HTML5-Reset-Wordpress-Theme-8aa6329/fancybox_sprite.png)

**编辑：**

现在你有一个 404 错误`jquery.fancybox.css`

[http://melisayavas.com/web/wp-content/themes/murtaugh-HTML5-Reset-Wordpress-Theme-8aa6329/_/js/fancybox/source/jquery.fancybox.css?v=2.0.5](http://melisayavas.com/web/wp-content/themes/murtaugh-HTML5-Reset-Wordpress-Theme-8aa6329/_/js/fancybox/source/jquery.fancybox.css?v=2.0.5)

**编辑2：**

现在您的页面工作正常。没事做。

# facebook - FB-api：用户尚未授权应用程序执行此操作

> ID：10149566
> 
> 赞同：0
> 
> 时间：2012-04-13T23:28:06.230
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

我尝试使用 facebook api 和离线访问令牌在我的墙上发帖。每次我犯一个错误：

> Uncaught OAuthException: (#200) 用户尚未授权应用程序执行此操作

这是我的代码：

```
require 'api/facebook.php';

    $facebook = new Facebook(array(
        'appId'  => "app_id",
        'secret' => "app_sec",
        "cookie" => true,
        'fileUpload' => true
    ));

    $facebook->setFileUploadSupport(true);  

    $access_token = $facebook->getAccessToken();
    $user_id = $facebook->getUser();

$result = mysql_query("UPDATE users SET user_id_facebook='".$user_id."' WHERE id='".$myrow2['id']."'",$db);
$result = mysql_query("UPDATE users SET access_token_facebook='".$access_token."' WHERE id='".$myrow2['id']."'",$db);

    if($user_id == 0 || $user_id == "")
    {
        $login_url = $facebook->getLoginUrl(array(
        'redirect_uri'         => "http://apps.facebook.com/rapid-apps/",
        'scope'      => "email,publish_stream,user_hometown,user_location,user_photos,friends_photos,
                    user_photo_video_tags,friends_photo_video_tags,user_videos,video_upload,friends_videos,offline_access"));

        echo "<script type='text/javascript'>top.location.href = '$login_url';</script>";
        exit();
    }

    $post =  array(
    'access_token' => $access_token,
    'message' => 'This message is posted with access token - '
);

$res = $facebook->api('/me/feed', 'POST', $post); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T23:35:04.637

自 5 月 2 日起，offline_access 权限将被弃用，不应再使用

与此同时，您可以选择通过开发​​人员网站为您的应用程序禁用此弃用 ( [https://developers.facebook.com/apps/330955886953999](https://developers.facebook.com/apps/330955886953999) )...

有关删除的更多信息，请参阅：http: [//developers.facebook.com/roadmap/offline-access-removal/](http://developers.facebook.com/roadmap/offline-access-removal/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:31:48.187

您需要在发送给用户的初始应用授权请求中调整权限。默认情况下，您只能获得对其基本信息的只读访问权限。

请参阅[http://developers.facebook.com/docs/authentication/permissions/](http://developers.facebook.com/docs/authentication/permissions/)

# python - 为什么添加到列表会做不同的事情？

> ID：10149568
> 
> 赞同：13
> 
> 时间：2012-04-13T23:28:08.823
> 
> 标签：python, list

```
>>> aList = []
>>> aList += 'chicken'
>>> aList
['c', 'h', 'i', 'c', 'k', 'e', 'n']
>>> aList = aList + 'hello'

Traceback (most recent call last):
  File "<pyshell#16>", line 1, in <module>
    aList = aList + 'hello'
TypeError: can only concatenate list (not "str") to list 
```

我不明白为什么要做 a`list += (something)`和`list = list + (something)`做不同的事情。另外，为什么要将`+=`字符串拆分为要插入到列表中的字符？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T23:35:44.210

`list.__iadd__()`可以采用任何可迭代的；它对其进行迭代并将每个元素添加到列表中，从而将字符串拆分为单个字母。`list.__add__()`只能拿一个清单。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-13T23:35:58.790

`aList += 'chicken'`是 python 的简写`aList.extend('chicken')`。`a += b`和之间的区别在于python 在调用之前`a = a + b`尝试调用`iadd`with 。这意味着这将适用于任何可迭代的 foo。`+=``add``alist += foo`

```
>>> a = []
>>> a += 'asf'
>>> a
['a', 's', 'f']
>>> a += (1, 2)
>>> a
['a', 's', 'f', 1, 2]
>>> d = {3:4}
>>> a += d
>>> a
['a', 's', 'f', 1, 2, 3]
>>> a = a + d
Traceback (most recent call last):
  File "<input>", line 1, in <module>
TypeError: can only concatenate list (not "dict") to list 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T23:39:22.327

要解决您的问题，您需要将列表添加到列表中，而不是将字符串添加到列表中。

尝试这个：

```
a = []
a += ["chicken"]
a += ["dog"]
a = a + ["cat"] 
```

请注意，它们都按预期工作。

# pthreads - “主”线程监控“从”线程的简单方法

> ID：10149569
> 
> 赞同：1
> 
> 时间：2012-04-13T23:28:38.367
> 
> 标签：pthreads, posix

作为我第一次真正尝试使用 pthreads，我正在寻找调整我已经编写的应用程序以使用线程。

我想到的范式基本上是有一个“主”线程，它遍历要处理的数据项列表，为每个线程启动一个新线程，在任何给定时间运行 MAX_THREADS 个线程（直到剩余任务数为小于这个），每个都对列表中的单个数据元素执行相同的任务。

主线程需要知道何时任何线程已完成其任务并返回（或 pthread_exit()'ed），立即启动一个新线程以执行列表中的下一个任务。

我想知道的是人们使用这种设计的首选方法是什么？除了数据方面的考虑，用于完成此任务的最简单的 pthreads 函数集是什么？显然， pthread_join() 是作为“检查”线程的一种手段。

早期的实验一直在使用一个结构，作为 pthread_create() 的最后一个参数传递，它包含一个名为“running”的元素，线程在启动时设置为 true，并在返回之前重置。主线程只是为循环中的每个线程检查此结构元素的当前值。

以下是程序用于线程管理的数据：

```
typedef struct thread_args_struct  
{  
    char *data;         /* the data item the thread will be working on */
    int index;          /* thread's index in the array of threads */  
    int thread_id;      /* thread's actual integer id */  
    int running;        /* boolean status */  
    int retval;         /* value to pass back from thread on return */  
}   thread_args_t;  

/*  
 * array of threads (only used for thread creation here, not referenced  
 * otherwise)  
 */  
pthread_t       thread[MAX_THREADS];  

/*  
 * array of argument structs  
 *  
 * a pointer to the thread's argument struct will be passed to it on creation,  
 * and the thread will place its return value in the appropriate struct element  
 * before returning/exiting  
 */  
thread_args_t   thread_args[MAX_THREADS]; 
```

这看起来像一个声音设计吗？是否有更好、更标准化的方法来监视线程的运行/退出状态，一种更“pthreads-y”的方式？我希望使用最简单、最清晰、最干净的机制，这不会导致任何意外的并发症。

感谢您的任何反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T00:48:54.830

没有像（通用）多线程方式那样的“pthreads-y”方式。你所拥有的并没有什么问题，但它比它需要的更复杂和低效。

更标准的设计是使用线程池。主线程产生一堆读取队列的工作线程。主人将工作放入队列中，所有工作人员都在处理队列中的工作。这消除了不断启动和终止线程的需要（尽管更复杂的池可以有一些机制来根据工作负载增加/减少池的大小）。如果线程必须返回数据或状态信息，它们可以使用 master 可以读取的输出队列（可能只是指向实际数据的指针）。

这仍然留下了在完成处理后如何摆脱线程的问题。再次，这是一种主从关系，因此建议主人告诉奴隶关闭自己。这相当于使用某些程序开关（例如您当前拥有的），在某处使用条件变量，发送信号或取消线程。这里有很多关于这个主题的问题（和很好的答案）。

# r - 一种总是躲避直方图的方法？

> ID：10149571
> 
> 赞同：13
> 
> 时间：2012-04-13T23:28:44.217
> 
> 标签：r, ggplot2

使用 ggplot2 我正在创建一个直方图，其中水平轴上的一个因子和填充颜色的另一个因子，使用一个闪避的位置。我的问题是，填充因子有时只取一个值作为水平因子的值，并且没有什么可以躲避的，条形图占据了整个宽度。有没有办法让它不闪避任何东西，以便所有条形宽度都相同？或者等效地绘制0？

例如

```
ggplot(data = mtcars, aes(x = factor(carb), fill = factor(gear))) +
geom_histogram(position = "dodge") 
```

![在此处输入图像描述](../Images/997aa2db18e671d2c2e479be2546b1bb.png)

[这个答案](https://stackoverflow.com/a/9101710/903061)有几个想法。在新版本发布之前也有人问过，所以也许有什么变化？使用方面（也显示[在这里](https://stackoverflow.com/a/7104847/903061)）我不喜欢我的情况，虽然我认为编辑数据和使用`geom_bar`可以工作，但感觉不优雅。此外，当我尝试刻面时

```
ggplot(mtcars, aes(x = factor(carb), fill = factor(gear))) +
    geom_bar() + facet_grid(~factor(carb)) 
```

我收到错误“layout_base 中的错误（数据，cols，drop = drop）：至少一层必须包含用于构面的所有变量”

我想我可以生成一个计数数据框，然后使用`geom_bar`，

```
mtcounts <- ddply(subset(mtcars, select = c("carb", "gear")),
    .fun = count, .variables = c("carb", "gear")) 
```

用 0 填充不存在的级别。有谁知道这是否可行或是否有更好的方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-28T01:34:41.687

**更新** `geom_bar`需求`stat = "identity"`

我不确定这对您来说是否为时已晚，但请参阅[此处](https://stackoverflow.com/questions/10326729/dont-drop-zero-count-dodged-barplot/10329045#10329045)最近帖子的答案 也就是说，我会采纳 Joran 的建议，在`ggplot`通话之外预先计算计数并使用`geom_bar`. 与其他帖子的答案一样，计数分两步获得：首先，使用 获得计数的交叉表`dcast`；其次，`melt`交叉制表。

```
library(ggplot2)
library(reshape2)

dat = dcast(mtcars, factor(carb) ~ factor(gear), fun.aggregate = length)
dat.melt = melt(dat, id.vars = "factor(carb)", measure.vars = c("3", "4", "5"))
dat.melt

(p <- ggplot(dat.melt, aes(x = `factor(carb)`, y = value, fill = variable)) + 
  geom_bar(stat = "identity", position = "dodge")) 
```

图表：

![在此处输入图像描述](../Images/32234f5c9f01201276371ec1ec318ae8.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-13T14:25:19.453

如[this answer](https://stackoverflow.com/a/48343620/903061)`ggplot2`所示，在(version >= 2.2.1.900)的较新版本中，有一种更简单的方法：`position_dodge`获取一个`preserve`参数，如果设置为`"single"`将始终躲避。

```
ggplot(data = mtcars, aes(x = factor(carb), fill = factor(gear))) +
  geom_bar(position = position_dodge(preserve = "single")) 
```

[![在此处输入图像描述](../Images/20b90dbdbb772e83e4ddb4f7cb8490d7.png)](https://i.stack.imgur.com/hhUfQ.png)

# jquery-mobile - 使用 jQuery Mobile 将查询参数传递给内部/嵌入式页面

> ID：10149572
> 
> 赞同：0
> 
> 时间：2012-04-13T23:28:53.330
> 
> 标签：jquery-mobile

我非常需要将参数传递给内部页面，例如从 div 到 jqm 中的另一个页面。jqm有这个功能吗？？？像往常一样依靠您的专业答案。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T05:24:17.990

我猜[如何在 Jquery Mobile 中的两个页面之间传递和获取参数的副本？](https://stackoverflow.com/questions/7582781/how-to-pass-and-get-parameters-between-two-pages-in-jquery-mobile)或[将参数传递给 jQuery Mobile 中的页面 ID](https://stackoverflow.com/questions/8238762/passing-parameters-to-a-page-id-in-jquery-mobile/8295488#8295488)或更多帮助，如果您使用“jquery mobile 在页面之间传递参数”进行谷歌搜索。

传递参数还有问题吗？-> 请分享您尝试过的代码示例。

# python - 如何使浮点数在 python 3 中具有特定范围（或者我可以完全）？

> ID：10149577
> 
> 赞同：1
> 
> 时间：2012-04-13T23:29:51.830
> 
> 标签：python, python-3.x, floating-point

我一直试图让这个程序工作，它运行，但一旦我让它运行，我发现了这个问题。现在它要求输入成绩点和学分，并按预期打印出 GPA，但我可以在成绩点中输入任何内容，它会输出一个值。我想要的是仅当用户输入介于 0.0-4.0 之间的数字时，gradePoint 才能工作。我在考虑某种循环，比如 if 循环，但有没有更简单的方法（或首选方法）来做到这一点？

这是代码：

```
def stu():
stu = Student

class Student:
def __init__(self, name, hours, qpoints):
    self.name = name
    self.hours = float(hours)
    self.qpoints = float(qpoints)

def getName(self):
    return self.name

def getHours(self):
    return self.hours

def getQpoints(self):
    return self.qpoints

def getStudent(infoStr):
    name, hours, qpoints = infoStr.split("\t")
    return Student(name, hours, qpoints)

def addGrade(self, gradePoint, credits):
    self.qpoints = gradePoint * credits
    self.hours = credits
    self.gradePoint = float(gradePoint)
    self.credits = float(credits)

def gpa(self):
    return self.qpoints/self.hours

def main():
stu = Student(" ", 0.0, 0.0)
credits = int(input("Enter Credit Hours "))
gradePoint = float(input("Enter Grade Point"))
if gradePoint > 4.0:
        print("Please enter a Grade Point that is less then 4.")
stu.addGrade(gradePoint,credits)
output = stu.gpa()
print("\nStudent GPA is: ", output)

main() 
```

这是外壳打印输出（我知道 GPA 中重复了成​​绩点，这是针对一门课的，我们应该使用框架程序并更改一些东西）：

```
Enter Credit Hours 4
Enter Grade Point 3.5
Student GPA is:  3.5

Enter Credit Hours 12
Enter Grade Point 3.2
Student GPA is:  3.2 
```

谢谢！

编辑：我只是按照评论中的建议做了一个 if 循环，它有点工作，因为它打印出我想要的东西，但没有让它停止并等待正确的输入。我不完全确定如何让它做到这一点。

这是来自外壳的新打印：

```
Enter Credit Hours 4
Enter Grade Point 3.5
Student GPA is:  3.5

Enter Credit Hours 4
Enter Grade Point 4.5
Please enter a Grade Point that is less then 4.
Student GPA is:  4.5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T23:38:18.193

您可以检查用户输入是否符合您的要求，如果不符合则抛出异常。这将使程序记录错误消息并在无效的用户输入时停止。

最基本的方法是使用断言语句：

```
def main():
    stu = Student(" ", 0.0, 0.0)
    credits = int(input("Enter Credit Hours "))
    assert credits > 0 and credits < 4, "Please enter a number of Credit Hours between 0 and 4." 
```

如果您希望应用程序在输入有效输入之前一直提示用户，则至少需要一个`while`循环。

举个例子：

```
def main():
    stu = Student(" ", 0.0, 0.0)
    while True:
        credits = int(input("Enter Credit Hours "))
        if credits > 0 and credits < 4:
            break
        else:
            print("Please enter a number of Credit Hours between 0 and 4")

    while True:
        gradePoint = float(input("Enter Grade Point"))
        if gradePoint <= 4.0:
            break
        else:
            print("Please enter a Grade Point that is less then 4.")

    stu.addGrade(gradePoint,credits)
    output = stu.gpa()
    print("\nStudent GPA is: ", output) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T02:45:25.253

创建一个函数，从用户那里收集一个范围内的有效浮点数：

```
def getValidFloat(prompt, error_prompt, minVal, maxVal):
    while True:
        userInput = raw_input(prompt)
        try:
            userInput = float(userInput)
            if minVal <= userInput <= maxVal:
                return userInput
            else: raise ValueError
        except ValueError:
            print error_prompt 
```

然后像这样使用：

```
gpa = getValidFloat(
    "Enter Grade Point ",
    "You must enter a valid number between 1.0 and 4.0",
    1,
    4) 
```

输出看起来像这样：

```
Enter Grade Point 6.3
You must enter a valid number between 1.0 and 4.0
Enter Grade Point 3.8 
```

# android - 在 ListView 中重置背景颜色

> ID：10149581
> 
> 赞同：2
> 
> 时间：2012-04-13T23:30:40.223
> 
> 标签：android, android-listview, android-ui

我有一个 ListView，我在其中使用`onListItemClick`事件更改所选项目的背景颜色：

```
@Override
public void onListItemClick(final ListView l, final View v, final int position, final long id)
{
    v.setBackgroundColor(Color.GRAY);
} 
```

在更改单个视图的背景颜色之前，是否可以将 ListView 的所有行重置回原始颜色？问题是每个选定的项目都保留了它们的背景颜色，我只希望用户点击的最新项目发生变化。

**更新：**

然而，JRaymond 的响应似乎是最好的方法，并且在使用 Android 布局时通常是这样，我已将代码放入其中，但没有任何反应。没有办法调试它，没有错误消息，什么都没有。我绝对讨厌处理 Android 布局，它是处理 UI 的最复杂、最糟糕的实现设计。

无论如何，这就是我到目前为止所拥有的：

列表显示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="wrap_content"  
    android:layout_height="fill_parent" 
    > 

        <ListView android:id="@android:id/list"
            android:layout_width="wrap_content"  
            android:layout_height="fill_parent" 
            android:choiceMode="singleChoice"
            android:listSelector="@drawable/listing_selector"           
        />

        <TextView android:id="@android:id/empty"
            android:layout_width="wrap_content"  
            android:layout_height="fill_parent" 
            android:padding="5dp"
        />

</LinearLayout> 
```

列表选择器.xml

```
<?xml version="1.0" encoding="utf-8"?>

<selector xmlns:android="http://schemas.android.com/apk/res/android" >

   <item android:state_focused="true" android:drawable="@android:color/transparent" />

   <item android:state_pressed="true" android:drawable="@android:color/transparent" />

   <item android:state_selected="true" android:state_activated="true" android:drawable="@android:color/black" />

   <item android:state_activated="true" android:drawable="@android:color/transparent" />    

   <item android:state_selected="true" android:drawable="@android:color/transparent" />

   <item android:drawable="@android:color/transparent" />

</selector> 
```

就像我说的，当我点击项目时什么都没有发生，甚至内置的突出显示也消失了。我什至尝试将所有颜色更改为黑色，但没有任何反应。

**更新2：**

我越来越近了。阅读本文后[，](http://android-codes-examples.blogspot.com/2011/03/customized-listview-items-selection.html)您必须将您的`selector`xml 放在名为`color`under的文件夹中`res`，然后将 设置`selector`为布局中每个项目的背景`ListView`，而不是`ListView`本身：

```
<?xml version="1.0" encoding="UTF-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"  
    android:layout_height="fill_parent" 
    android:orientation="horizontal"
    android:background="@color/listing_selector"    
>
    <TextView 
        android:id="@+id/text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
    />

</RelativeLayout> 
```

当我触摸其中的每个项目时，我看到背景颜色变化闪烁，`ListView`但是它们不会停留并恢复为原始背景颜色。这是我正在使用的选择器：

```
<?xml version="1.0" encoding="utf-8"?>

<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item  android:state_selected="false" android:state_pressed="false" android:drawable="@android:color/transparent" />

    <item android:state_pressed="true" android:drawable="@color/blue" />

    <item android:state_selected="true" android:state_pressed="false" android:drawable="@color/blue" />

</selector> 
```

颜色.xml：

```
<?xml version="1.0" encoding="UTF-8"?>

<resources>    
    <color name="blue">#ff33b5e5</color>        
</resources> 
```

这是多么让人头疼的事情。任何想出这个糟糕的系统来处理 UI 的人都应该被解雇。

**解决方案：**

不能 100% 确定，但这可能仅适用于 Android 3.0+ 设备。`state_activated`是什么设置背景颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T23:51:06.630

您正在寻找的是 stateListDrawable（也称为选择器）和choiceMode 的组合。

在您的`drawables`文件夹中包含一个像这样的 xml（我使用其他可绘制对象作为我的背景，但颜色也可以）：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
        <item android:state_focused="true"
          android:drawable="@drawable/list_item_pressed" />
    <item android:state_pressed="true"
          android:drawable="@drawable/list_item_pressed" />
    <item android:state_selected="true"
          android:state_activated="true"
          android:drawable="@drawable/list_item_selected" />
    <item android:state_activated="true"
          android:drawable="@drawable/list_item_selected" />
    <item android:state_selected="true"
          android:drawable="@android:color/black" />
    <item android:drawable="@android:color/transparent" />
</selector> 
```

然后将您的列表视图设置`choiceMode`为`singleChoice`

```
<ListView
  ...
  android:choiceMode="singleChoice" 
```

这让操作系统可以为您处理您的背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T02:29:43.427

一个简单的解决方案是在 onitemclick 中只需记住项目的单击位置并调用 notifydatachanged() 并在自定义适配器的 getView() 中在 retrun 语句之前进行 if 循环比较，如下所示:::

```
if(postion == itemclickedposition)
    converterView.setBackgroundColor(Color.GRAY); 
```

# jquery - 如何在此 html5/css3 页面中强制/启用垂直滚动？

> ID：10149587
> 
> 赞同：1
> 
> 时间：2012-04-13T23:31:19.867
> 
> 标签：jquery, html, css

[已编辑] 是我正在使用的样本。

[ redacted ] 是相关的 css 文件。

它只是填充文本和示例图像，但我是新手，不知道我在做什么。

我想要：徽标图像和 3 个彩色动画链接固定在页面的左上角。一个蓝色条，在页面上水平运行，位于徽标+链接下方。内容以流动的方式流动（动态调整大小？）滚动工作。

我在最后一部分遇到了麻烦。通过 CSS 巫术和负边距，我可以让它在我的 1280x1024 Chromium 浏览器上看起来“正确”，但是如果我在 Firefox 中打开它或更改分辨率，内容会溢出并且没有滚动条可以查看其余的内容。我什至不能使用 [DOWN] 键滚动。

我究竟做错了什么？如何强制显示和导航其余内容？我是否不正确地实施 CSS？

请指教。

编辑：我使用的是`position:fixed`而不是`position:absolute`. 将所有这些引用从固定更改为绝对（然后修改边距）效果很好。

成品在 [ [http://blasdev.heliohost.org/apx/about.html](http://blasdev.heliohost.org/apx/about.html) ]。

谢谢，埃尔约博！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T23:39:44.870

使用 position:absolute 而不是 position:fixed 设置#content div 的样式将解决您的滚动问题，但您需要调整其他内容。绝对位置将内容完全拉出正常流程，因此滚动不再起作用；A List Apart 上有[一个很好的 CSS 定位示例。](http://www.alistapart.com/articles/css-positioning-101/)

# c# - C# 应用程序似乎无法在与我类似的计算机上运行

> ID：10149588
> 
> 赞同：0
> 
> 时间：2012-04-13T23:31:25.060
> 
> 标签：c#, windows, compatibility, requirements

不幸的是，我还没有在搜索部分或任何其他编码论坛中完全找到我正在寻找的遮阳篷，所以我将把我的问题留在这里等待结束。

我开发了一个非常简单的 C# 应用程序，它是 Windows 的启动项目之一 - 迷宫项目，它使用带有标签和简单鼠标事件的简单面板来触发指针位置重新开始的放置。

我已经成功发布了我的应用程序，它可以在我的计算机和其他一些计算机上顺利运行，但由于某些奇怪的原因，它根本无法加载到我朋友的笔记本电脑上。

我们共享相同的操作系统（Windows 7），我们都有 x64 版本，框架似乎相同，但即使进程显示在任务管理器中，它也不会加载，即使安装后也是成功的。

所以，程序确实运行了，但它似乎不会加载，也不会抛出任何要分析的异常或错误。

因此我的问题是，我的程序与其他计算机完全兼容的要求是什么？

感谢您的关注，我在这件事上花了很多时间，但似乎找不到正确的遮阳篷。

我还将显示我的表单代码以供进一步分析：

```
 using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Drawing;
    using System.Linq;
    using System.Text;
    using System.Windows.Forms;

    namespace Labirinto
    {
        public partial class frmLabirinto : Form
        {
            // Toca um som sempre que o utilizador bater numa parede
            System.Media.SoundPlayer startSoundPlayer = new System.Media.SoundPlayer(@"C:\Users\Ricardo Borges\Documents\Visual Studio 2010\Projects\Labirinto\Labirinto\Resources\doh.wav");
            // Toca um som sempre que o utilizador chegar ao final do labirinto
            System.Media.SoundPlayer finishSoundPlayer = new System.Media.SoundPlayer(@"C:\Users\Ricardo Borges\Documents\Visual Studio 2010\Projects\Labirinto\Labirinto\Resources\tada.wav");

    public frmLabirinto()
    {
        InitializeComponent();
        MoveToStart();
    }

    private void frmLabirinto_Load(object sender, EventArgs e)
    {

    }

    /// <summary>
    /// O método permite que o ponteiro do rato volte ao ponto inicial
    /// </summary>
    private void MoveToStart()
    {
        startSoundPlayer.Play(); //Toca o som de reinicio do jogo
        Point startingPoint = panel1.Location; //ponto inicial
        startingPoint.Offset(10, 10); //localizacao do ponto inicial
        Cursor.Position = PointToScreen(startingPoint); //coloca o cursor no local inicial
    }

    private void finishLabel_MouseEnter(object sender, EventArgs e)
    {
        finishSoundPlayer.Play(); //Toca o som de fim de jogo
        // Congratula o utilizador através de uma mensagem no ecrã
        MessageBox.Show("Parabéns, encontrou a saída do labirinto");
        Close();
    }

    private void wall_MouseEnter(object sender, EventArgs e)
    {
        MoveToStart(); //recoloca o ponteiro no ponto inicial ao embater numa parede
    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T00:37:49.090

我感觉初始化两个 SoundPlayer 对象时使用的硬编码值会导致错误。例如，如果运行应用程序的机器上没有名为“Ricardo Borges”的用户怎么办？

```
System.Media.SoundPlayer startSoundPlayer = new System.Media.SoundPlayer(@"C:\Users\Ricardo Borges\Documents\Visual Studio 2010\Projects\Labirinto\Labirinto\Resources\doh.wav"); 
System.Media.SoundPlayer finishSoundPlayer = new System.Media.SoundPlayer(@"C:\Users\Ricardo Borges\Documents\Visual Studio 2010\Projects\Labirinto\Labirinto\Resources\tada.wav"); 
```

[基于](http://msdn.microsoft.com/en-us/library/ms143771.aspx)SoundPlayer 对象的 MSDN 文档**“如果路径或 URL 无效，SoundPlayer 仍将被构造，但对加载或播放方法的后续调用将失败”。**

MoveToStart 函数中的第一行包含以下行：

```
startSoundPlayer.Play(); 
```

参考 MSDN 的[SoundPlayer.Play](http://msdn.microsoft.com/en-us/library/system.media.soundplayer.play.aspx)方法，它可以根据错误的原因引发三种不同的异常之一 - **FileNotFoundException**似乎是一个可能的罪魁祸首。

您能否确认指定位置和实际文件都存在于有问题的机器上？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T23:36:10.610

您是否尝试过使用[Fusion Log 查看器](http://msdn.microsoft.com/en-us/library/e74a18c4%28v=VS.90%29.aspx)来诊断任何程序集加载错误？

[使用 Fusion Log Viewer 调试晦涩的加载程序错误](http://www.hanselman.com/blog/BackToBasicsUsingFusionLogViewerToDebugObscureLoaderErrors.aspx)

如果这不是问题，请将日志记录代码添加到您的应用程序中，并检查您的代码中是否存在任何“吞咽”错误的 try/catch 块。

# c++ - 通过 Xbee 网络传输浮点值

> ID：10149589
> 
> 赞同：4
> 
> 时间：2012-04-13T23:31:31.523
> 
> 标签：c++, arduino, wireless, xbee

我无法通过简单的 2 节点 Xbee 网络传输浮点数。

我知道 Xbee 系统通过字节传输包，所以我可以发送一个字符，但我无法发送更多的东西，而且我似乎在任何地方都找不到任何文档。

这是我当前的（基本）代码。

发件人：

```
(... appropriate setup...)
void loop()
{
  sensorValue = analogRead(analogInPin);
  sensorValueTemp = sensorValue / 9.31; //LM35 measurement into Centigrade
  Serial.print(sensorValueTemp);
  delay(1000);
} 
```

接收者：

```
(...appropriate setup...)
void loop() { 
  lcd.setCursor(0, 0);
    if (Serial.available() > 0) {
    lcd.print(incomingByte);
  }
  delay(1000);
} 
```

任何关于成功传输浮点数的提示都会很棒吗？或者如果它已经被正确传输，如何正确读取它？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T10:45:09.957

您可以发送`float`in 字节并在接收器处重建`float`。

以下示例可能对您有所帮助：

发送方：

```
float x = 1128.476;

char b[sizeof(x)];
memcpy(b, &x, sizeof(x));

// Iterate over b and send bytes
// [...] 
```

接收方：

```
float y = 0;

char b[sizeof(x)];

// Store 4 bytes representing the float into b
// [...]

// Rebuild the float
memcpy(&y, b, sizeof(y)); 
```

最后，您`float y`在接收方有与`float x`发送方相同的表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T02:38:45.903

您的原始发件人正在发送一个代表浮点值的 ASCII 字符串。

为了接收和显示值，您需要修改如下所示的行：

```
(...appropriate setup...)
void loop() { 
  lcd.setCursor(0, 0);
  while (Serial.available() > 0) {       //Changed Line
      incomingByte = Serial.read();      //Added Line
      lcd.print(incomingByte);
  }
  delay(1000);
} 
```

注意：如果最好用 CR 终止串行输出以同步设备而不是延迟（1000）；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T14:50:43.457

您可以在具有相同架构、内存布局、字节顺序等的两台机器之间发送所需的所有二进制数据，只需`(char *)`在“发送”端获取一个字节大小的指针，然后遍历引用的对象以获取数字该对象中的字节数。在“接收”方面，您分配一个相同大小的对象（float、long、struct foo），并将字节一个一个地接收到一个字节大小的指针中，该指针在每个字节被接收后递增。

在发送方——

```
void sendObject(const void *object, size_t size) {
  char *outputCursor = (char *) object;

  for (;size > 0;size--)
    yourSendAByteFunction(*outputCursor++);
} 
```

在接收端，假设 yourReceiveAByteFunction() 为有效字节返回 0..255，为“接收错误”返回 -1，您可以这样做——

```
int receiveObject(void *object, size_t size) {
  char *inputCursor = (char *) object;

  for (;size > 0;size--) {
    int nextByte = yourReceiveAByteFunction();
    if (nextByte < 0)
      return FALSE;

    *inputCursor++ = nextByte;
  }
  return TRUE;
} 
```

您可以在`sendObject()`函数中执行相同的 I/O 错误检查，方法是声明`yourSendAByteFunction()`它返回`TRUE`或`FALSE`取决于输出中是否发生错误。这完全取决于您能承受多少复杂性，以及您是否拥有可靠的传输链路。

如果您有无法传输的字节，您还可以进行一些数据封装，方法是使用“shift”字节和以“shift”字节为前缀的一组字节值来表示其他字节。

# iphone - iOS：有条件地加载视图控制器

> ID：10149592
> 
> 赞同：2
> 
> 时间：2012-04-13T23:31:57.743
> 
> 标签：iphone, objective-c, ios, cocoa-touch

有没有办法从 App Delegate 有条件地加载视图控制器？

例如，这可以做到吗？

```
 if (hasUserSignedUp) {
        nav = [[navController alloc] initWithNibName:nil bundle:nil];
        [window addSubview:nav.view];
        [window makeKeyAndVisible];
    }
    else {
        su = [[SignUpViewController alloc] initWithNibName:nil bundle:nil];
        [window addSubview:su.view];
        [window makeKeyAndVisible];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T23:34:08.130

是的，这很方便，您这样做没有任何限制。

但我认为，您最好设置 rootViewController 而不是添加视图。

```
self.window.rootViewController = nav;//or su; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T23:41:19.203

虽然这当然是可能的，但更好的主意是在两种情况下都加载您的导航控制器，并根据他们是否已注册，使用不同的根视图控制器。

```
if (hasUserSignedUp) {
    nav = [[UINavigationController alloc] initWithRootViewController:rootViewController];
}
else {
    su = [[SignUpViewController alloc] initWithNibName:nil bundle:nil];
    nav = [[UINavigationController alloc] initWithRootViewController:su];
}

[window addSubview:nav.view];
[window makeKeyAndVisible]; 
```

应用程序删除应该创建视图层次结构的根，然后您可以从那里按照您认为合适的方式对其进行操作。

如果我是你，我会使用上面的代码，一旦他们登录或注册，推送常规根视图控制器，然后修改导航堆栈堆栈：

```
[self.navigationController pushViewController:rootViewController animated:YES];

double delayInSeconds = 0.5f;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
    self.navigationController.viewControllers = [NSArray arrayWithObject:self.navigationController.viewControllers.lastObject];
}); 
```

这不是最干净的方法（`dispatch_after`），但您会看到它是如何完成的。确保 rootViewController 已`hidesBackButton`设置为`YES`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T19:45:36.360

是的，你当然可以这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T01:26:04.693

设置 rootViewController 是个好习惯

# regex - 正则表达式匹配以下任何一个 - “a”、“p”、“am”、“pm”等

> ID：10149595
> 
> 赞同：2
> 
> 时间：2012-04-13T23:32:22.173
> 
> 标签：regex, debugging, syntax

我正在寻找匹配 "a","p","a","p","am","pm","am","pm" 的正则表达式。

请注意，我正在寻找的是空白不可知论。我在一个字符串中有一个正则表达式分组，我现在拥有的，不适用于 a/m/am/pm 是这样的：

`/^(\d{1,2}):(\d{2})(\s(am|pm|a|p)$)/i;`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T23:35:09.380

```
/^(\d{1,2}):(\d{2})(\s*[ap]m?)$/i 
```

主要变化是后面的星号 ( `*`) `\s`。这意味着 - 允许任意数量的空格，或者没有空格。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T23:35:18.397

试试改这个...

```
\s(am|pm|a|p) 
```

对这个...

```
\s?(am|pm|a|p) 
```

使`?`空白字符可选。如果您想潜在地允许多个空格，您也可以使用`*`而不是。`?`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T23:35:43.980

这是一个与空白无关的：

```
/^\s*(\d{1,2})\s*:\s*(\d{2})\s*([ap]m?)\s*$/i 
```

火柴：

*   `1:23 PM`
*   `01:03 A`
*   `10:50 pm`
*   `12:20 p`
*   等等

# frequency - C8051F996 的 UART 和 FSK 实现

> ID：10149599
> 
> 赞同：0
> 
> 时间：2012-04-13T23:32:52.577
> 
> 标签：frequency, shift, interrupt, 8051, uart

我正在尝试发送一个 UART 信号，但 FSK 编码。我有 UART 工作，波特率 290。我在 P0.7TX 上发送。当连接到计算机时，我得到了预期的结果。但是，我想生成这个 UART 的 FSK 信号以通过音频发送并在那里解码。目前，我只专注于发送数据。

我创建了两个基于 PCA 的函数来创建零频率和一频率。大约 1.2kHz 和 2.4kHz。我还发现“loopOne”和“loopZero”必须在中断内完成，否则 MCU 会依次背靠背调用 loopOne 和 loopZero 来扭曲波形。

所以，我的问题是我无法弄清楚如何通过中断线获取 UART 的输出，既调用中断，然后根据 TX 是低电平还是高电平让中断调用函数。

我可以使用两个外部中断来做到这一点：一个用于输出低电平时，一个用于输出高电平时，但我需要其中一个中断用于其他目的，因此我需要连接并使用相同的中断或单独的中断和它需要区分调用哪个函数。

我正在使用 c 代码中的 Silicon Laboratories IDE。MCU 是 SiLabs C8051F996。

# mysql - SQL：按时间对 GROUP 进行排序并限制结果

> ID：10149603
> 
> 赞同：0
> 
> 时间：2012-04-13T23:33:03.000
> 
> 标签：mysql, sql, phpmyadmin

我有一个表结构，如：

```
Name    Time

Joe     2012-02-22 22:11:26.0
Joe     2012-02-22 21:01:23.0
Sue     2012-02-22 20:57:10.0
john    2012-02-22 18:13:36.0
Fred    2012-02-22 16:56:57.0
Joe     2012-02-22 14:38:45.0
Joe     2012-02-22 14:38:45.0
Ralph   2012-02-22 14:26:20.0
...     ...
(more Names and Times)
...     ...
john    2010-03-10 15:27:39.0
john    2010-03-10 15:46:59.0 
```

我正在寻找按时间排序的前 3 个名称。所以结果是：

```
Joe, Sue, john 
```

我从如下查询开始：

`SELECT Name FROM table ORDER BY LOWER(TIME) DESC`

所以我想限制结果：

`SELECT Name FROM table ORDER BY LOWER(TIME) DESC LIMIT 0 , 3`

但结果显示了前 3 行：

```
Joe, Joe, Sue 
```

现在我尝试先按名称对查询进行分组：

```
SELECT Name FROM table GROUP BY Name ORDER BY LOWER(TIME) DESC LIMIT 0 , 3 
```

是的，这给了我 3 个不同的名字，但顺序不可复制。我在这里错过了什么吗？这里的正确语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T23:41:32.233

```
SELECT DISTINCT Name
FROM table
ORDER BY Time DESC
LIMIT 3 
```

所以基本上，您只需要添加`DISTINCT`到您的第二个查询 - 这告诉 MySQL 只选择唯一值。不需要分组。**UPD**：这是错误的，因为`ORDER BY`将在之后应用`DISTINCT`，因为在大多数情况下`DISTINCT`会使用`GROUP BY`.

PS我不明白你为什么使用`LOWER`. 此函数使字符串小写。但是您不是在操作字符串，因为第二列是类型`DATETIME`（我假设）？

**UPD：**您应该使用分组，这是一个示例：

```
SELECT Name
FROM table
GROUP BY Name
ORDER BY MAX(Time) DESC
LIMIT 3 
```

这里重要的是从每个组中获取最大日期/时间并按此排序。

# java - 遍历整数树集并将值从 next() 存储到 Integer 变量

> ID：10149608
> 
> 赞同：0
> 
> 时间：2012-04-13T23:33:27.013
> 
> 标签：java, iterator, integer, treeset

为了简单起见，我删减了我的程序，但是有必要将 next() 的值存储在一个变量中，因为我在迭代器循环中执行了其他一些操作来检查该值是否与某些东西相匹配。但是我在存储该值时遇到了麻烦，我收到一条错误消息，说“不兼容的类型”。

```
import java.util.*;

public class test
{
    public static void main (String [] args)
    {
        String data="34 23 13 5 2 6 9 11";
        Scanner input=new Scanner(data);
        TreeSet set=new TreeSet();
        while (input.hasNextInt())
        {
            Integer num=new Integer(input.nextInt());
            set.add(num);
        }
        Iterator itr=set.iterator();
        while (itr.hasNext())
        {
            Integer num2=itr.next();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T23:35:31.097

你应该使用：

`TreeSet<Integer> set = new TreeSet<Integer();`

一旦你有了它，那么当你添加时，你不需要实例化`Integer`，你可以这样做：

```
set.add(input.nextInt()); 
```

感谢自动装箱。

然后当你最后迭代时，你可以这样做：

```
for (Integer num2 : set) {
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-21T09:55:48.297

该行存在编译错误

> 整数 num2 = itr.next();

因为 Iterator 类的 next 方法返回的 Object 等同于 Integer 类型。Integer 属于 Object 类型，但 Object 不属于 Integer 类型。因此，Object 类型不能转换为 Integer 类型，因为 Object 是 Java 中所有类的超类。在这里，类型不兼容/彼此不匹配。您可以将 Object 类型转换为 String，然后将 String 转换为 Integer，或者您可以简单地将 Object 转换为 Integer。

> 整数 num2 = Integer.parseInt(itr.next().toString());
> 
> 整数 num2 = Integer.valueOf(itr.next().toString());
> 
> 整数 num2 = (整数)itr.next();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T23:36:43.247

您必须将其转换为`Integer`类型对象

```
 Integer num2= (Integer) itr.next(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T23:37:14.543

一个简单的演员应该可以解决问题

```
 Integer num2=(Integer) itr.next();
            System.out.println(num2); 
```

问候， 厄瓦尔德

# c - 有界缓冲区程序引入了数据竞争：它们在哪里？我该如何修复它们？

> ID：10149609
> 
> 赞同：1
> 
> 时间：2012-04-13T23:33:43.700
> 
> 标签：c, synchronization, buffer

我正在编写一个程序，该程序仅演示从有界缓冲区写入和读取，因为它输出预期的值和实际读取的值。当我将 N 定义为低值时，程序按预期执行。但是，当我增加值时，我开始看到意想不到的结果。据我了解，我正在使用两个线程创建数据竞争。

通过查看输出，我认为我已将其范围缩小到大约三个数据竞争示例，如下所示：

1.  一个线程写入缓冲区，而另一个线程读取。
2.  两个线程同时写入缓冲区。
3.  两个线程同时从缓冲区读取。

下面是我的代码。#include 语句的格式真的很奇怪，所以我把它们排除在外。

```
#define BUFFSIZE 10000
#define N   10000

int Buffer[BUFFSIZE];

int numOccupied = 0;    //# items currently in the buffer
int firstOccupied = 0;  //where first/next value or item is to be found or placed

//Adds a given value to the next position in the buffer
void buffadd(int value)
{

Buffer[firstOccupied + numOccupied++] = value;
}

 int buffrem()
{

numOccupied--;
return(Buffer[firstOccupied++]);

}

void *tcode1(void *empty)
{
int i;

//write N values into the buffer

for(i=0; i<N; i++)
    buffadd(i);
}

void *tcode2(void *empty)
{
int i, val;

//Read N values from the buffer, checking the value read with what is expected for testing

for(i=0; i<N; i++)
{
    val = buffrem();
    if(val != i)
        printf("tcode2: removed %d, expected %d\n", val, i);

}
}

main()
{
pthread_t tcb1, tcb2;

pthread_create(&tcb1, NULL, tcode1, NULL);
pthread_create(&tcb2, NULL, tcode2, NULL);

pthread_join(tcb1, NULL);
pthread_join(tcb2, NULL);
} 
```

所以这是我的问题。

1.  这些数据竞争发生在哪里（在我的代码中）？
2.  我该如何修复它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T23:43:04.773

您有比赛，因为两个线程都访问相同的全局变量`numOccupied`和`firstOccupied`. 您需要使用某种形式的锁定来同步对变量的访问。例如，您可以在执行添加/删除操作时使用信号量或互斥锁来锁定对共享全局状态的访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T23:45:48.083

使用互斥锁来同步对共享数据结构的访问。您将需要以下内容：

```
pthread_mutex_t mutex;
pthread_mutex_init(&mutex, NULL);
pthread_mutex_lock(&mutex);
pthread_mutex_unlock(&mutex);
pthread_mutex_destroy(&mutex); 
```

作为基本原则，在读取/写入线程间共享的数据结构之前锁定互斥体，然后解锁。在这种情况下，`Buffer`加元数据`numOccupied`和`firstOccupied`是您需要保护的共享数据结构。所以在`buffadd()`and`buffrem()`中，一开始就锁定互斥量，最后解锁。并在`main()`启动线程前初始化互斥锁，加入后销毁。

# c# - 如何从像素着色器 XNA 4.0 返回 vector4

> ID：10149611
> 
> 赞同：0
> 
> 时间：2012-04-13T23:33:53.107
> 
> 标签：c#, xna, shader, pixel

我创建了两个 RenderTarget2D：

```
currentWorldState = new RenderTarget2D(graphicsDevice, width, height, false, SurfaceFormat.Vector4, DepthFormat.None);
nextWorldState = new RenderTarget2D(graphicsDevice, width, height, false, SurfaceFormat.Vector4, DepthFormat.None); 
```

我正在尝试在 GPU 上编写模拟代码。我的目标是能够在这些渲染目标之间传递 vector4 信息。我创建了一个着色器，它从第一个目标读取信息，并将其输出到下一个目标。我的问题是 float4 被转换为颜色信息并且丢失了很多精度。

这是我的像素着色器的标题：

```
float4 CreateActions(in float2 uv : TEXCOORD0) : COLOR 
```

我可以以任何方式更改它以输出 float4 数据，将 COLOR 更改为其他任何内容都不会编译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:54:18.873

您必须更改渲染目标格式，这决定了精度：

[肖恩·赫格雷夫（ Shawn Heargrave](http://blogs.msdn.com/b/shawnhar/archive/2010/07/09/rendertarget-formats-in-xna-game-studio-4-0.aspx)）写过，这里是[SurfaceFormat 文档](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.surfaceformat%28v=xnagamestudio.40%29.aspx)

# html - 绝对定位的元素位置不相对于 Chrome 中的父容器

> ID：10149618
> 
> 赞同：-1
> 
> 时间：2012-04-13T23:34:22.793
> 
> 标签：html, css

我有一个简单的表格，我试图水平对齐两个字段，这将需要资金输入。我想用 $ 标记输入（不应该是可编辑的），以便人们知道投入资金。我最终用一个绝对定位的 span 元素来做到这一点。jsfiddle 位于[http://jsfiddle.net/7tCfe/2/](http://jsfiddle.net/7tCfe/2/)。

在 Internet Explorer 和 Firefox 中一切正常，但在 Chrome 中，第二个货币输入的货币标签一直位于左侧，而不是在第二个输入内。在 jsfiddle 中，第二个符号位于第一个货币字段的符号之上。

如何让 Chrome 相对于父元素绝对定位元素？我试过弄乱`.two-column`课堂并改变它的显示和位置，但它最终破坏了表格的其余部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T23:38:29.113

也将`one-column`类添加到第二个`<div>`，并添加`clear: both;`到下面`<div>`的样式中。您可以使用[内联`style`属性](http://jsfiddle.net/mattball/3gXpL/) *(meh)*或[使用附加类](http://jsfiddle.net/mattball/NczJb/)或[使用以下 CSS 规则](http://jsfiddle.net/mattball/gw5Cj/)来执行此操作：

```
.one-column + div:not(.one-column) {
    clear: both;
} 
```

但是，[`:not`在 IE <9 中不起作用](http://www.quirksmode.org/css/contents.html#t30)，因此（如果您关心 IE）您可能想要[使用不同的选择器](http://jsfiddle.net/mattball/tm6se/)，例如

```
.one-column + .one-column + div {
    clear: both;
} 
```

是的，IE 的 CSS 3 选择器支持非常糟糕。

# c - 在哪里可以找到系统调用源代码？

> ID：10149621
> 
> 赞同：34
> 
> 时间：2012-04-13T23:34:36.870
> 
> 标签：c, linux, assembly, linux-kernel, system-calls

在 Linux 中，如果我有源代码树，我在哪里可以找到所有系统调用的源代码？此外，如果我想查找特定系统调用的源代码和程序集，是否可以在终端中键入类似的内容 `my_system_call`？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-14T00:07:14.780

您需要 Linux 内核源代码才能查看系统调用的实际源代码。手册页，如果安装在您的本地系统上，只包含调用的文档，而不是它们的源代码本身。

不幸的是，系统调用并不仅仅存储在整个内核树中的一个特定位置。这是因为各种系统调用可以引用系统的不同部分（进程管理、文件系统管理等），因此将它们与与系统特定部分相关的树的部分分开存储是不可行的。

你能做的最好的事情就是寻找`SYSCALL_DEFINE[0-6]`宏。它（显然）用于将给定的代码块定义为系统调用。例如，`fs/ioctl.c`具有以下代码：

```
SYSCALL_DEFINE3(ioctl, unsigned int, fd, unsigned int, cmd, unsigned long, arg)
{
/* do freaky ioctl stuff */
} 
```

这样的定义意味着`ioctl`系统调用被声明并接受三个参数。旁边`SYSCALL_DEFINE`的数字表示参数的数量。例如，在, 中`getpid(void)`声明的情况下`kernel/timer.c`，我们有以下代码：

```
SYSCALL_DEFINE0(getpid)
{
        return task_tgid_vnr(current);
} 
```

希望能把事情弄清楚一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T06:18:33.660

从应用程序的角度来看，[系统调用](http://en.wikipedia.org/wiki/System_calls)是[内核](http://en.wikipedia.org/wiki/Kernel_%28computing%29)完成的基本原子操作。

[Assembly Howto](http://tldp.org/HOWTO/Assembly-HOWTO/)根据机器指令解释了正在发生的事情。

当然，内核在处理系统调用时会做很多事情。

实际上，您几乎可以相信整个内核代码都专用于处理所有系统调用（这并不完全正确，但几乎；从应用程序的角度来看，内核仅通过系统调用可见）。Daniel Kamil Kozar的另一个[答案](https://stackoverflow.com/a/10149838/841108)是解释什么内核函数开始处理某些系统调用（但通常，内核的许多其他部分间接参与系统调用；例如，调度程序间接参与实现 `fork`，因为它管理由成功的`fork`系统调用创建的子进程）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-04T14:50:20.850

我知道它很旧，但我也在寻找它的来源`_system_call()`并找到了这个花絮

> system_call 入口点的实际代码可以在 /usr/src/linux/kernel/sys_call.S 中找到 许多系统调用的实际代码可以在 /usr/src/linux/kernel/sys.c 中找到，其余的在别处可以找到。找到是你的朋友。

我认为这是过时的，因为我什至没有那个文件。但是，`ENTRY(system_call)`在 arch/x86/kernel/entry_64.S 中找到的 grep 似乎是调用各个系统调用的东西。我现在不了解我的 intel-syntax x86 asm，所以你必须看看这是否是你想要的。

# php - PHP IF 语句与多个规则发生冲突

> ID：10149635
> 
> 赞同：0
> 
> 时间：2012-04-13T23:35:40.253
> 
> 标签：php, string, if-statement

我有一个文本框，用于根据输入的代码进行计算。此代码将添加一个前缀或后缀。我的问题是，在一个代码中，前缀和后缀规则会发生冲突并导致两种操作发生，而我只希望前缀操作发生。这是代码：

```
//get suffix and prefix from input box
$suffix = $inputbox[strlen($inputbox)-1];
$prefix = $inputbox[0];

if($inputbox!="" && $suffix=="L" or $suffix=="P" or $suffix="Y" or $suffix=="T")
{
//do this
}

if($inputbox!="" && $inputbox=="NT")
{
//do that
} 
```

就这样的代码，脚本两者都做，因为输入框是NT，它也有一个后缀T。我想要的是忽略第一条规则，或者在第一条规则中放一个运算符来表示它仅当后缀为 T 且前缀不是 N 时才应运行。

我知道有一种简单的方法可以做到这一点，但现在已经快凌晨 1 点了，我想在睡觉前完成这个！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T23:40:26.350

我不明白你到底想做什么，但试试这个：

```
 if($inputbox!="" ){
 //get suffix and prefix from input box
    $suffix = $inputbox[strlen($inputbox)-1];

    $suffixes = array("L","P","Y","T");
    if($inputbox=="NT") {
        //do that
    } else if(in_array($suffix, $suffixes)){
        //do this
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T23:40:10.563

所以切换顺序并使用`else`. 另外，您有一条多余的规则，我已将其删除。此外，您`&&`的优先级高于您`or`的 s; 但这也是不必要的。您还混合了具有条件的作业。（也许休息一下？）

```
// Get suffix and prefix from input box
$suffix = $inputbox[strlen($inputbox)-1];
$prefix = $inputbox[0];

if($inputbox == "NT") {
    //do that
} elseif($suffix == "L" or $suffix == "P" or $suffix == "Y" or $suffix == "T") {
    //do this
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T23:39:48.753

如果你想要一个动作或另一个动作发生，你可能想要使用一个`else`块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T23:39:46.460

```
$suffix = $inputbox[strlen($inputbox)-1];
$prefix = $inputbox[0];

if($suffix == 'T' and $prefix <> 'N') : 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T23:44:03.330

首先检查特殊情况“NT”，然后检查所有其他情况：

```
//get suffix and prefix from input box
$suffix = $inputbox[strlen($inputbox)-1];
$prefix = $inputbox[0];

if($inputbox!="" && $inputbox=="NT")
{
  //do that
} else if ($inputbox!="" && $suffix=="L" or $suffix=="P" or $suffix="Y" or $suffix=="T")
{
  //do this
} 
```

# c# - 鼠标位置异常

> ID：10149645
> 
> 赞同：0
> 
> 时间：2012-04-13T23:36:36.320
> 
> 标签：c#, visual-studio, xna

我最近在引用鼠标在 Windows 游戏（XNA 框架）中的位置时遇到了问题。我创建一个变量：

```
Mouse mouse = Mouse.GetState(); 
```

然后尝试获取鼠标的 x 和 y 坐标的位置。有一段时间没关系，给我正确的坐标。但是总有一些断点，在到达之后，鼠标返回并且 x 和 y 大于鼠标的实际坐标。这是第四次发生这种情况，我已经改变了任何其他应该干扰它的东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T18:02:46.100

你在使用某种相机吗？如果是这种情况，请务必从
鼠标位置中减去相机位置。Mouse.GetState().Position 代表鼠标在您的窗口内的位置，而不是您的游戏世界。

# c# - 在新 AppDomain 中建立的第一个 WCF 连接非常慢

> ID：10149651
> 
> 赞同：18
> 
> 时间：2012-04-13T23:37:45.807
> 
> 标签：c#, wcf, performance, c#-4.0, appdomain

我有一个使用 WCF 调用 http 服务来获取设置的库。通常第一次调用大约需要 100 毫秒，随后的调用只需要几毫秒。但是我发现当我创建一个新的 AppDomain 时，来自该 AppDomain 的第一个 WCF 调用需要 2.5 秒以上。

有没有人解释或修复为什么在新的 AppDomain 中首次创建 WCF 通道需要这么长时间？

这些是基准测试结果（当在 64 位版本中未附加调试器运行时），请注意在第二组数字中，第一个连接如何花费 25 倍的时间

```
Running in initial AppDomain
First Connection: 92.5018 ms
Second Connection: 2.6393 ms

Running in new AppDomain
First Connection: 2457.8653 ms
Second Connection: 4.2627 ms 
```

这不是一个完整的示例，但显示了我如何生成这些数字的大部分内容：

```
class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine("Running in initial AppDomain");
        new DomainRunner().Run();

        Console.WriteLine();
        Console.WriteLine("Running in new thread and AppDomain");
        DomainRunner.RunInNewAppDomain("test");

        Console.ReadLine();
    }
}

class DomainRunner : MarshalByRefObject
{
    public static void RunInNewAppDomain(string runnerName)
    {
        var newAppDomain = AppDomain.CreateDomain(runnerName);
        var runnerProxy = (DomainRunner)newAppDomain.CreateInstanceAndUnwrap(typeof(DomainRunner).Assembly.FullName, typeof(DomainRunner).FullName);

        runnerProxy.Run();
    }

    public void Run()
    {
        AppServSettings.InitSettingLevel(SettingLevel.Production);
        var test = string.Empty;

        var sw = Stopwatch.StartNew();
        test += AppServSettings.ServiceBaseUrlBatch;
        Console.WriteLine("First Connection: {0}", sw.Elapsed.TotalMilliseconds);

        sw = Stopwatch.StartNew();
        test += AppServSettings.ServiceBaseUrlBatch;
        Console.WriteLine("Second Connection: {0}", sw.Elapsed.TotalMilliseconds);
    }
} 
```

对 AppServSettings.ServiceBaseUrlBatch 的调用正在创建一个服务通道并调用一个方法。我使用了wireshark 来观看通话，只需要几毫秒就可以得到服务的响应。它使用以下代码创建通道：

```
public static ISettingsChannel GetClient()
{
    EndpointAddress address = new EndpointAddress(SETTINGS_SERVICE_URL);

    BasicHttpBinding binding = new BasicHttpBinding
    {
        MaxReceivedMessageSize = 1024,
        OpenTimeout = TimeSpan.FromSeconds(2),
        SendTimeout = TimeSpan.FromSeconds(5),
        ReceiveTimeout = TimeSpan.FromSeconds(5),
        ReaderQuotas = { MaxStringContentLength = 1024},
        UseDefaultWebProxy = false,
    };

    cf = new ChannelFactory<ISettingsChannel>(binding, address);

    return cf.CreateChannel();
} 
```

从分析应用程序可以看出，在第一种情况下，构建通道工厂、创建通道和调用方法所需的时间不到 100 毫秒

在新建的 AppDomain 中构建通道工厂耗时 763 毫秒，创建通道耗时 521 毫秒，调用接口上的方法耗时 1098 毫秒。

TestSettingsRepoInAppDomain.DomainRunner.Run() 2,660.00 TestSettingsRepoInAppDomain.AppServSettings.get_ServiceBaseUrlBatch() 2,543.47 Tps.Core.Settings.Retriever.GetSetting(string,!!0,!!0,!!0) 2,542.66 Tps.Core.Settings.Retriever.TryGetSetting (string,!!0&) 2,522.03 Tps.Core.Settings.ServiceModel.WcfHelper.GetClient() 1,371.21 Tps.Core.Settings.ServiceModel.IClientChannelExtensions.CallWithRetry(class System.ServiceModel.IClientChannel) 1,098.83

**编辑**

在将 perfmon 与 .NET CLR Loading 对象一起使用后，我可以看到，当它加载第二个 AppDomain 时，它会将比最初更多的类加载到内存中。第一条平线是我在第一个 appdomain 之后的暂停，它加载了 218 个类。第二个 AppDomain 总共加载了 1,944 个类。

我假设所有这些类的加载都占用了所有时间，所以现在的问题是，它加载了哪些类，为什么？

![在此处输入图像描述](../Images/07e100a870b84400493d2b305a283a33.png)

**更新**

答案原来是因为只有一个 AppDomain 能够利用本机图像系统 dll。因此，第二个 appdomain 的缓慢之处在于它必须重新启动 wcf 使用的所有 System.* dll。第一个 appdomain 可以使用这些 dll 的预先生成的本机版本，因此它没有相同的启动成本。

在调查 Petar 建议的[LoaderOptimizationAttribute](http://msdn.microsoft.com/en-us/library/system.loaderoptimizationattribute.aspx)之后，这似乎确实解决了问题，使用[MultiDomain 或 MultiDomainHost](http://www.guidanceshare.com/wiki/.NET_2.0_Performance_Guidelines_-_What%27s_New_in_2.0#Load_Assemblies_As_Domain_Neutral_In_Multiple_Domain_Scenarios)会导致第二个 AppDomain 花费与第一次通过 wcf 访问内容相同的时间

在这里你可以看到默认选项，注意在第二个 AppDomain 中没有一个程序集说 Native，这意味着它们都必须重新设置，这是一直以来所花费的

![在此处输入图像描述](../Images/123491ae8eea155c2e1cec1f37656bde.png)

这是在将 LoaderOptimization(LoaderOptimization.MultiDomain) 添加到 Main 之后。您可以看到所有内容都加载到共享的 AppDomain 中

![在此处输入图像描述](../Images/cd23c0641b1bdaf5ddb2011a065a8dc3.png)

这是在用户 LoaderOptimization(LoaderOptimization.MultiDomainHost) 到 main 之后。您可以看到所有系统 dll 都是共享的，但是我自己的 dll 以及任何不在 GAC 中的 dll 都被单独加载到每个 AppDomain 中

![在此处输入图像描述](../Images/038057dcd5b130d83a77cb2cf582d496.png)

因此，对于使用 MultiDomainHost 提示此问题的服务是答案，因为它具有快速启动时间，并且我可以卸载 AppDomains 以删除该服务使用的动态构建的程序集

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-19T07:18:16.980

[您可以使用LoaderOptimization](http://msdn.microsoft.com/en-us/library/system.loaderoptimization.aspx)属性装饰您的 Main以告诉 CLR 加载器如何加载类。

```
[LoaderOptimization(LoaderOptimization.MultiDomain)]
MultiDomain - Indicates that the application will probably have many domains that use the same code, and the loader must share maximal internal resources across application domains. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T00:08:14.967

你有在 IE 中定义的 HTTP 代理吗？（也许是一个自动配置脚本）。这可能是一个原因。

否则我猜这是加载所有 dll 所需的时间。尝试将代理创建从对服务的实际调用中分离出来，看看是什么花费了时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T21:11:51.270

我发现[以下文章](http://msdn.microsoft.com/en-us/magazine/cc163655.aspx#S8)讨论了如何只有第一个 AppDomain 可以使用本机图像 dll，因此子 appdomain 将始终被迫 JIT 初始 AppDomain 不需要的许多东西。这可能会导致我看到的性能影响，但是有可能以某种方式不得到这种性能损失吗？

> 如果程序集有原生镜像，则只有第一个 AppDomain 可以使用原生镜像。所有其他 AppDomain 都必须对代码进行 JIT 编译，这可能会导致大量 CPU 成本。

# jquery - 将列表中的前 10 个项目转换为图像，然后使用 jQuery 在单击时转换后续组

> ID：10149653
> 
> 赞同：0
> 
> 时间：2012-04-13T23:38:00.577
> 
> 标签：jquery, image, anchor

我正在将锚点转换为图像，将它们按顺序淡入页面，然后从页面中删除锚点（和 parent `li`）。

我想加载列表中的前 10 个项目，然后通过单击加载更多按钮加载额外的 10 个组。不太确定最好的方法是什么。

标记如下，一切正常。

HTML：

```
<section class="userGallery headers">
  <ul>    
    <li>
      <a href="path/to/image.jpg" title="image_name"></a>
    </li>    
    <li>
      <a href="path/to/image.jpg" title="image_name"></a>
    </li>
  </ul>
</section> 
```

进入：

```
<section class="userGallery headers">
  <ul>    
  </ul>
  <img class="user" src"path/to/image.jpg" alt="image_name" />
  <img class="user" src"path/to/image.jpg" alt="image_name" />
</section> 
```

JavaScript：

```
$(window).load(function(){

// User Uploads

    $('.userGallery li').each(function(){
        var loc = $(this).find('a').attr('href'),
            img = $('.userGallery').append($('<img/>', { class: 'user', src: loc }));

        $(this).remove();

        setTimeout(function(){
            $('.user').animate({ opacity:1 },400);
        }, 100);
    }); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T23:50:12.163

你想要这样的东西吗？

```
<a href="#" id="load10more">load 10 more</a>

$("#load10more").click(function(event) {
  event.preventDefault();
   for(i=0;i<10;i++)
   {
     $("ul").append.('<li><a href="path/to/image_' + i + '.jpg" title="image_name"></a></li>');
   }
}); 
```

# javascript - 使用javascript加载本地文件

> ID：10149658
> 
> 赞同：0
> 
> 时间：2012-04-13T23:38:30.767
> 
> 标签：javascript, jquery, windows-phone-7

我正在尝试使用 javascript 函数在我的 WP7 项目中加载本地文件。到目前为止，以下代码有效，但它从我的 WP7 应用程序 (Resources/Icons/appbar.go.rest.png) 中的 Web 地址而不是本地目录加载图像文件。我已经研究了如何从我项目的本地目录中正确加载本地图像文件，但尚未成功。我的代码如下

Javascript

```
var body = document.getElementsByTagName("body")[0]; 
var s = document.createElement("input"); 
/loads image file from web address
s.src = "http://www.gravatar.com/avatar/a4d1ef03af32c9db6ee014c3eb11bdf6?        s=32&d=identicon&r=PG"; 
s.type = "image"; 
body.appendChild(s); 
```

正如我所说，上面的代码有效，但我想在我的项目中使用本地图像文件，而不是上面的网址。有谁知道如何正确实施此解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T23:48:58.797

您不能直接从客户端机器加载图像（请记住，javascript 代码将在客户端的本地机器上运行）。您应该在提供 Javascript 文件时提供图像文件，然后将“src”指向那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T07:14:23.913

您可以阅读这篇提供解决方案的文章`WebClient`：

在 Windows Phone 7 应用程序中使用图像文件
[http://dotnet.dzone.com/articles/operating-image-files-windows](http://dotnet.dzone.com/articles/operating-image-files-windows)

jQuery .load() 方法可以很好地加载文件，但不幸的是我没有在 Windows Phone 7 环境中使用它，它将文件保存在其本地存储中。

[http://api.jquery.com/load/](http://api.jquery.com/load/)

# css - 资源解释为字体，但使用 MIME 类型 application/octet-stream 传输

> ID：10149659
> 
> 赞同：1
> 
> 时间：2012-04-13T23:38:32.450
> 
> 标签：css, font-face

根据我对此所做的研究，似乎我的一些标题设置不正确，我不知道如何解决这个问题。我需要更改服务器上的一些配置文件吗？

背景故事：有一个网站有几个页面托管在另一台服务器上（我知道，这太可怕了）。该网站正在使用自定义字体。它在包含字体的服务器上的页面上工作正常，但另一台服务器没有加载字体。在 Firebug 中查看后，我了解到当页面请求字体文件时，服务器返回状态 200OK，但响应字段为空白。这适用于所有字体格式（eot、woff、otf、ttf）。

我真的需要一些帮助。任何事情都会非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T22:16:36.547

字体和文件不需要在同一台服务器上才能工作吗？

我知道“资源解释为字体但使用 MIME 类型应用程序/八位字节流传输”警告是因为 mime 类型尚未在 chrome 中设置，我通常不担心。基本上是 Chrome 说“我不知道这是什么”。如果需要，您可以设置自定义 mime 类型以消除警告。

# ios - 如何在 iphone iOS 中使用参数在 SQLITE 中形成 LIKE 语句？

> ID：10149661
> 
> 赞同：4
> 
> 时间：2012-04-13T23:38:38.553
> 
> 标签：ios, iphone, sqlite, parameters, sql-like

比如说，我有一个名为 name 的搜索字段。如果用户在搜索字段中键入“John”，我应该检查“名称”字段中的值“John”并选择所有相应的字段值。'John' 将是从 searchBar.text 获得的 NSString，它必须作为参数添加到查询中。我构建了一个这样的 sql 语句，它从来没有工作过。

```
NSString *query = [NSString stringWithFormat:@"select * from Employee where EmployeeName LIKE '%%@%'", searchText.text];
const char *sqlStatement = [query UTF8String]; 
```

我也试过这个

```
NSString *query = [NSString stringWithFormat:@"select * from Employee where EmployeeName LIKE %'%@'%", searchText.text];
const char *sqlStatement = [query UTF8String]; 
```

没有任何效果。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-14T00:18:04.177

诀窍是在那里获得百分比。这很尴尬，但你可以这样做：

```
@"select * from Employee where EmployeeName LIKE '%%%@%%'" 
```

%% 是百分比，%@ 是替换字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T01:19:23.620

我尝试了所有可能的方法，但没有形成确切的查询并最终以这种方式实现。它的方法是圆的，但效果很好。

```
NSString *query = [NSString stringWithFormat:@"select * from Employee where EmployeeName LIKE"];
query = [query stringByAppendingString:@" '%"];
NSString  *addParameter = [NSString stringWithFormat:@"%@",searchText];
query = [query stringByAppendingString:addParameter];
query = [query stringByAppendingString:@"%'"]; 
```

这感觉有点冗长的代码，但工作正常。

感谢**@danh**的精彩回答。现在，我可以将我的四行代码替换为单行..

# regex - 根据 Linux 中的文件数重命名目录

> ID：10149665
> 
> 赞同：5
> 
> 时间：2012-04-13T23:39:36.300
> 
> 标签：regex, linux, bash, rename

我有以下布局：

*   d1
    *   f1
    *   f2
    *   f3
*   d2
    *   f4
    *   f5
*   d3
    *   f6
    *   f7
    *   f8
    *   d4
        *   f9

我想要做的是重命名根目录以包含其中包含的（递归）文件的数量。格式不是很重要，只要它不太长。我希望能够每隔一小时左右将这个脚本作为 cron 运行以更新目录名称，因此在第一次运行后它会如下所示：

*   3-d1
    *   f1
    *   f2
    *   f3
*   2-d2
    *   f4
    *   f5
*   4-d3
    *   f6
    *   f7
    *   f8
    *   d4
        *   f9

然后在第二次运行之后，可能会添加和删除更多文件，现在看起来像这样：

*   1-d1
    *   f1
*   4-d2
    *   f2
    *   f3
    *   f4
    *   f5
*   10-d3
    *   f6
    *   f7
    *   f8
    *   d4
        *   f9
        *   f10
        *   f11
        *   f12
        *   f13
        *   f14
        *   f15

到目前为止，我有以下 bash 脚本，但我不知道如何对文件名进行正则表达式替换

```
#!/bin/bash

TARGETPATH=/home/pritchea/test
for CURDIR in `ls -l $TARGETPATH`
do
  if [ -d $TARGETPATH/$CURDIR ]; then
    echo "$CURDIR is a directory"
    FILECOUNT=`find $TARGETPATH/$CURDIR -type f | wc -l`
    echo " and there are $FILECOUNT file(s)";
  fi
done 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T00:40:40.143

### 前

```
.
├── d1
│   ├── f1
│   ├── f2
│   └── f3
├── d2
│   ├── f4
│   └── f5
└── d3
    ├── d4
    │   └── f9
    ├── f6
    ├── f7
    └── f8 
```

### 在顶级目录运行命令

```
cd /home/pritchea/test

for i in *
do
    [[ -d $i ]] || continue
    n=${i#*-}
    c=$(find "$i" -type f -printf x | wc -c)
    [[ $i == $c-$n ]] && continue
    mv -f "$i" "$c-$n"
done 
```

### 后

```
.
├── 2-d2
│   ├── f4
│   └── f5
├── 3-d1
│   ├── f1
│   ├── f2
│   └── f3
└── 4-d3
    ├── d4
    │   └── f9
    ├── f6
    ├── f7
    └── f8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T12:50:28.953

我就是这样做的。我遍历 中的所有目录`$TARGETPATH`，`ls -l`用于检查每个目录中存在多少非目录文件`$CURDIR`。注意：这可能不是最好的方法（`find -f`可能会产生更好的结果；我没有检查过符号链接等）。

因为`wc -l`倾向于给出看起来类似于的输出`[ 1]`，而不是`[1]`我使用`sed`.

从目录中删除数字（如果存在），因此我们可以多次重新运行它，而不是最终得到如下所示的名称：`2-3-dir`，并检查 是否`newdirname`与`CURDIR`;不同 如果是，那么运行没有意义`mv`。

```
 #!/bin/bash

TARGETPATH=.
for CURDIR in `ls -l $TARGETPATH`
do
  if [ -d $TARGETPATH/$CURDIR ]; then
    echo "$CURDIR is a directory"
    #Also strip whitespace from FILECOUNT
    FILECOUNT=$(ls -l $CURDIR | grep ^- | wc -l | sed -e 's/[ \t]*//')
    echo " and there are $FILECOUNT file(s)";

    # We should remove the number from the directory.
    newdirname="$FILECOUNT"-"$(echo "$CURDIR" | sed -e 's/^[0-9]*-//')"
    echo " New directory name: ["$newdirname"]"
    # Now we move the old-dir to the new-dir. 
    if [[ "$CURDIR" != "$newdirname" ]]; then
    mv $TARGETPATH/$CURDIR $TARGETPATH/$newdirname
    fi  
  fi  
done 
```

# ruby-on-rails - Ruby - 一切都评估为真

> ID：10149672
> 
> 赞同：2
> 
> 时间：2012-04-13T23:39:53.543
> 
> 标签：ruby-on-rails, ruby

根据我在网上阅读的文献，除了 false 和 nil 之外，Ruby 中的所有内容都评估为 true。我试图找出这可能有什么好处？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T23:46:59.763

我将在检查用户是否输入值时总结这一优势。

PHP：

```
if($somevalue !== null) { # '' and '0' are falsy. 
```

红宝石：

```
if somevalue 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-13T23:53:24.557

它使该语言的真值概念非常简单——唯一被认为是“假”的东西是在逻辑上确实代表“否”答案的东西：假本身和 nil，它代表“虚无”的概念。在像 Ruby 这样的语言中，我发现很难争论让更多的值变得虚假，除非它只是为了让有其他语言经验的人感觉更熟悉。

（顺便说一句，我也认为 C 的真值模型非常简单：如果某物等于零，则为假。但在 Ruby 中，我们主要处理对象而不是数字，这会使`false`真值！）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T23:56:44.247

它使大多数逻辑语句更易于阅读。（写下来，但我认为这不那么重要。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T23:46:16.457

Ruby 中的一切都是对象。[这是一个体面的阅读](http://www.skorks.com/2009/09/true-false-and-nil-objects-in-ruby/)。

# c++ - 使用多键遍历容器

> ID：10149673
> 
> 赞同：1
> 
> 时间：2012-04-13T23:40:01.780
> 
> 标签：c++, iterator, containers, traversal

请找到更好的标题

* * *

如果你知道 Mathematica，我想做一些与此相关的事情：

```
m = {{a, b, c}, {d, e}, {f, g, h}};
m[[All, 2]] (* returns: {b, e, g} *) 
```

* * *

假设我有一些对象，它们排列在 N 维网格上，比如说 3D 并调用维度`x,y,z`。此外`x,y,z`，还有对象的属性，每个对象与对象之间存在 1-1 关系`(x,y,z)`。

现在我想在一个方向上迭代一个容器，用迭代器接口保持其他两个属性固定，例如：

```
Container<MyObject> container;
...
container::iterator it1 = container.begin(undefined, 1, 2);
container::iterator it2 = container.end(undefined, 1, 2);
// now the range [it1, it2] contains all the objects with y=1 and z=2
// ordered by x 
```

我已经看过了，但在我的示例中，您`boost::multi_index_container`似乎无法修复。`y``z`

我不想重新发明轮子，有什么好的解决方案？

*   更现实的场景：`x,y,z`是泛型类型（通常是`int`,`string`或`enum`）
*   更现实的场景：我想`w`轻松添加键（ ）
*   更困难的场景：`MyObject`对象不是可排序的（是的，我可以用`x,y,z`它来排序）

# php - 通过 PHP 查看 MySQL 数据库流量

> ID：10149678
> 
> 赞同：4
> 
> 时间：2012-04-13T23:40:45.490
> 
> 标签：php, mysql

我只是想知道是否有办法使用 php 查看 MySQL 数据库的当前带宽使用情况？

例如，目前我通过 MySQL 工作台看到我的使用 7mbps 和 4 个连接等，我希望能够使用 PHP 打印这些数据。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T00:25:58.850

我想说，如果您使用本机驱动程序，然后利用[它必须提供的统计信息，](http://www.php.net/manual/en/mysqlnd.stats.php)您最多可以获得。据我所知，所有其他 mysql 驱动程序都没有可比性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T23:46:57.773

不知道`MySQL workbench`在做什么。我想知道它是否只是定期运行并绘制输出。

```
select BYTES_RECEIVED, BYTES_SENT from information_schema.GLOBAL_STATUS; 
```

来自：[http ://dev.mysql.com/doc/refman/5.1/en/server-status-variables.html](http://dev.mysql.com/doc/refman/5.1/en/server-status-variables.html)

> Bytes_received
> 
> *   从所有客户端接收的字节数。
> 
> Bytes_sent
> 
> *   发送给所有客户端的字节数。

另请参阅[显示状态页面](http://dev.mysql.com/doc/refman/5.1/en/show-status.html)。

# android - 从 SQLite 数据库 Android 读取

> ID：10149696
> 
> 赞同：2
> 
> 时间：2012-04-13T23:43:47.847
> 
> 标签：android, database, sqlite

我不确定为什么这会使我的应用程序崩溃。我已经导入了在 sqlite 上创建的数据库，现在我只想从中读取信息。

这是我的代码

```
public class goodwillDatabase {

        private static final String DATABASE_NAME="goodwill";   
        private SQLiteDatabase ourDatabase;

        //set up variables
         static final String candidate_id = "_id"; 
         static final String candidate_name = "name"; 
         static final String candidate_street_address = "email"; 

        //set up the table...store different tables in database 
        private static final String DATABASE_TABLE = "candidate";
        private static final int DATABASE_VERSION = 1;

        //create instance of this class
        //creates, opens and closes database
        private DbHelper ourHelper;

        private final Context ourContext;

        //create database on a different thread

        private static class DbHelper extends SQLiteOpenHelper{

            public DbHelper(Context context) {
                super(context, DATABASE_NAME, null, DATABASE_VERSION);
                // TODO Auto-generated constructor stub

            }

            //first time we ever create database, this is called
            @Override
            public void onCreate(SQLiteDatabase db) {

            }

            //if already created, just update
            @Override
            public void onUpgrade(SQLiteDatabase db, int oldVersion,
                    int newVersion) {
                // TODO Auto-generated method stub

                db.execSQL("DROP TABLE IF EXISTS" + DATABASE_TABLE);
                onCreate(db);
            }

        }

        public goodwillDatabase(Context c){
            //make context of this class equal to whatever is being passed in
            ourContext = c;

        }

        //opens database
        //sql excpetion for the try catch
        public goodwillDatabase open() throws SQLException{

            //create a new helper, pass in context from the method above
            ourHelper = new DbHelper(ourContext);
            ourDatabase = ourHelper.getWritableDatabase();

            return this;
        }

        //closes the class...sqlite helper, dbhelper
        public void close(){

            ourHelper.close();
        }

        public String getData() {
            // TODO Auto-generated method stub

            //create a new helper, pass in context from the method above

            String [] columns = new String []{ candidate_name, candidate_street_address};

            Cursor d = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);

            String result = " ";
            //String[] result = columns;
            /*

            int iRow = c.getColumnIndex(canadiate_id);
            int iName = c.getColumnIndex(canadiate_name);
            int iStreet = c.getColumnIndex(canadiate_street_address);*/
            /*
            //start at the beginning, keep moving if you haven't made it to the last
            for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext())
            {
                result = result + c.getString(iRow) + " " + c.getString(iName) + 
            " " + c.getString(iStreet) + "\n";

            }

            */
            return result; 

        } 
```

}

*Cursor d = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null); * 行是它崩溃的地方。是光标不知道指向哪里的东西吗？我对数据库或编程不是非常熟悉，所以您能给我的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:11:28.030

尝试

```
Cursor d = ourDatabase.rawQuery("select name,email from candidate",null); 
```

query 和 rawQuery 具有相同的目的，但有时它们中的任何一个都可以工作，而其他的则不能:(

# c# - 防止按钮回发

> ID：10149700
> 
> 赞同：4
> 
> 时间：2012-04-13T23:44:24.350
> 
> 标签：c#, asp.net, post, web, back

我有一组接受输入的控件，其中一些需要验证。

但是，这个表单底部的一些控件，实际上与表单本身没有任何关系，但仍然进行回发，这需要对表单进行验证。这是一个障碍。

我希望能够触发一个函数来更新表单视图，而无需填写任何信息。

像这样的东西，如果我想从下拉列表中将多个产品添加到一个页面，但又不想导致表单回发，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T23:56:01.957

您有多种选择，但您的问题尚不清楚。哪些控件不应导致回发？

1.  大多数控件都有一个`AutoPostback`可以设置的属性`false`（尽管这是大多数情况下的默认值）
2.  另一种选择是使用不回发到服务器的 HTML 控件
3.  您也可以设置`CausesValidation`为`false`
4.  您可以[`ValidationGroups`](http://msdn.microsoft.com/en-us/library/ms227424.aspx)用来防止验证不同的控件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T00:01:37.650

你可以简单地使用像这样的 HTML 控件

```
<input type="Button">value</input> 
```

这不会发回

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T02:33:03.743

您可以使用 ajax 库控件来防止自动回发。在 ajax 库中，有一个控件 **更新面板，您只放置了一些需要回发的控件，而其他控件则没有您放出侧面更新面板...

# c# - ModelVisual3D 与 DiffuseMaterial 的透明度

> ID：10149701
> 
> 赞同：5
> 
> 时间：2012-04-13T23:44:33.440
> 
> 标签：c#, wpf, 3d

我遇到了一个对我来说似乎是错误的问题。我正在制作一个可视化晶体中原子的应用程序。那个问题是它绘制了一个透明对象并将对象隐藏在后面。

![在此处输入图像描述](../Images/53a0e265ba8f2351b09331ed735dae13.png)

这是代码：

```
 foreach (var atom in filteredAtoms)
        {
            var color = new Color();

            color.ScR = (float)atom.AluminiumProbability;
            //color.G = 50;
            color.ScB = (float)atom.MagnesiumProbability;
            //setting alpha channel but Opacity doens't work as well
            color.ScA = (float)(1.0 - atom.VacancyProbability); //(float)1.0;//
            DiffuseMaterial material = new DiffuseMaterial(new SolidColorBrush(color));
            //material.Brush.Opacity = 1.0 - atom.VacancyProbability;

            // make visuals and add them to
            atomBuldier.Add(new Point3D(atom.X * Atom.ToAngstrom, atom.Y * Atom.ToAngstrom, atom.Z * Atom.ToAngstrom), material);
        } 
```

当我将材料更改为例如 EmissiveMaterial 时，没有“切割”原子。我用谷歌搜索[了这篇文章](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/6d7da6bb-3b97-4e2f-9e55-f3128ceef69b)，但给出的建议不适用于这种情况。

这是将 2D 画笔应用于 3D 的错误吗？

完整的源代码可以在这里找到[http://alloysvisualisation.codeplex.com](http://alloysvisualisation.codeplex.com)的 dll 和一个测试文件[http://alloysvisualisation.codeplex.com/releases](http://alloysvisualisation.codeplex.com/releases) beta 链接。

重现步骤：

1.  午餐应用
2.  单击打开文件按钮
3.  打开测试文件（xyzT2000.chmc）
4.  单击蒙版按钮
5.  检查11（一系列原子几乎是透明的）
6.  重新绘制

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-14T00:16:17.647

对于透明原子，您必须禁用 z-buffer-writing。*我不熟悉 WPF，但您可能可以在 Appearance 或 Material 对象中设置它。*

出现此问题的原因如下：

渲染透明原子时，它将其深度写入 z 缓冲区。被渲染并应该出现的后续非透明原子不会被写入帧缓冲区，因为它们的 z 值无法通过 z 测试，因为 z 值已经在透明原子的 z 缓冲区中。

简而言之，显卡将透明原子视为不透明的，并在其后面隐藏任何东西。

**编辑**：在查看 WPF 时，它似乎非常高级，没有直接控制 z 缓冲区行为。

根据[此链接](http://social.msdn.microsoft.com/forums/en-us/wpf/thread/C3A5C288-F31E-42E0-BF2C-ED48E7452EF1)，自发光和高光材质不会写入 z 缓冲区，因此在处理透明对象时使用这些是您的解决方案。

# ruby - 如何针对 Heroku 设置 Pit 设置？

> ID：10149702
> 
> 赞同：0
> 
> 时间：2012-04-13T23:44:49.937
> 
> 标签：ruby, heroku

我使用 Pit 开发了一个 Rails 3.2 应用程序。它适用于我的本地盒子。我想在 Heroku 上部署它，但我不知道如何设置配置。请告诉我。

这是我使用 Pit 的代码：

```
pit = Pit.get(
  'my_app',
  :require => {
    'twitter.consumer_key' => '',
    'twitter.consumer_secret' => '',
    'twitter.oauth_token' => '',
    'twitter.oauth_token_secret' => '',
})
Twitter.configure do |config|
  config.consumer_key       = pit["twitter.consumer_key"]
  config.consumer_secret    = pit["twitter.consumer_secret"]
  config.oauth_token        = pit["twitter.oauth_token"]
  config.oauth_token_secret = pit["twitter.oauth_token_secret"]
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T18:06:33.973

我放弃了使用 Pit 对抗 Heroku。所以我正在使用环境变量。

```
pit = Pit.get(
  "my_app",
  :require => {
    "twitter.consumer_key"       => '', 
    "twitter.consumer_secret"    => '', 
    "twitter.oauth_token"        => '', 
    "twitter.oauth_token_secret" => '', 
})
pit["twitter.consumer_key"] ||= ENV["twitter.consumer_key"]
pit["twitter.consumer_secret"] ||= ENV["twitter.consumer_secret"]
pit["twitter.oauth_token"] ||= ENV["twitter.oauth_token"]
pit["twitter.oauth_token_secret"] ||= ENV["twitter.oauth_token_secret"]

Twitter.configure do |config|
  config.consumer_key       = pit["twitter.consumer_key"]
  config.consumer_secret    = pit["twitter.consumer_secret"]
  config.oauth_token        = pit["twitter.oauth_token"]
  config.oauth_token_secret = pit["twitter.oauth_token_secret"]
end 
```

# c# - 泛型中的动态类型

> ID：10149704
> 
> 赞同：0
> 
> 时间：2012-04-13T23:45:04.003
> 
> 标签：c#, generics

我目前正在研究 C# 泛型，我有几个问题。

1）在下面的代码中，比较“Test”中T的类型会减慢程序的速度吗？在其他语言中，这是在编译时处理的，但我不了解 C#。

2) 由于 sizeof 显然不起作用，我必须使用 System.Runtime.InteropServices.Marshal.SizeOf。它是否正确？

3) 我还没有在 C# 中看到过这样的代码，有什么问题吗，或者我在这里做的完全没问题？最后，此示例中的方法将采用少数类型，如果无法处理，则抛出异常。一些类型将被独立处理，其他类型如 short/int/long 将一起处理，具体取决于它们的大小。

```
using System;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            Test<int>();
            Test<long>();
            Test<string>();
            Console.ReadLine();
        }

        static void Test<T>()
        {
            Type type = typeof(T);

            if (type == typeof(int) || type == typeof(long))
            {
                Console.WriteLine("int");
                Console.WriteLine(System.Runtime.InteropServices.Marshal.SizeOf(type).ToString());
            }
            else if (type == typeof(string))
            {
                Console.WriteLine("string");
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T23:50:54.893

1）它将在运行时完成，而不是编译时。这不是 C++ 模板。也就是说，这是一个非常快的操作。

3）如果有固定数量的类型，你需要支持你更好地使用方法重载而不是泛​​型。

对于您需要支持的每种类型都有`Test(int input)`, `Test(string input)`, 等等。如果有“一般情况”来支持其他所有方法，那么除了那些方法之外，您还可以使用通用方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T23:53:39.307

是的，类型比较会减慢它的速度，并不是说这样的操作只会显着影响一次所做的任何事情。如果您在某个地方的紧密循环中执行此操作……请考虑*不*执行此操作。这是因为它创建了一个`Type`对象并比较这些`Type`对象——它不是编译时检查。

是的，`Marshal.SizeOf`是正确的¹。不过，我不知道 C# 的`sizeof`作用，因为我是 VB.NET 人员。

至于在 C# 中很少看到这种类型的代码，那可能是因为它不是人们经常遇到的情况。**而且，您应该为每种类型提供方法*重载，而不是做您正在做的事情；*更干净，并且错误发生在编译时，而不是运行时。**

[¹你只是打印出来，打印出来是对的。不过，我不知道这一切的目的是什么。]

# msbuild - 在 MSBuild 中，为什么不解析属性中的项元数据？

> ID：10149705
> 
> 赞同：2
> 
> 时间：2012-04-13T23:45:08.753
> 
> 标签：msbuild

下面是我正在处理的**MSBuild文件的一部分：**

```
<ItemGroup>
  <Tests Include="$(SolutionDir)\**\bin\$(TestPlatform)\$(Configuration)\*.Tests.dll" />
</ItemGroup>

<PropertyGroup>
  <TestProperties>/testcontainer:%(Tests.FullPath)</TestProperties>
</PropertyGroup> 
```

我想要一个包含命令行开关的属性。但是，当我尝试`$(TestProperties)`在**Exec Command**字符串中使用时，`%(Tests.FullPath)`永远不会解析为 Tests 项的绝对路径。相反，它总是按字面意思处理，如`"%(Tests.FullPath)"`.

我做错了什么还是这是标准的**MSBuild**行为？如果是后者，我有办法解决这个问题吗？

谢谢

PS - 我意识到我可能不需要访问 FullPath 属性，因为我的 Include 值是绝对路径。但是，我仍然想了解这个问题，以及如何处理它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-14T05:06:05.833

您有语法错误。项目列表通过 @ 字符引用，项目元数据通过 % 引用。[有关详细信息，请参阅MSBuild 特殊字符](http://msdn.microsoft.com/en-us/library/bb383819.aspx)参考。要访问众所周知的项目元数据，您需要在属性本身内应用转换。

```
<ItemGroup>
  <Tests Include="MyFile.txt" />
</ItemGroup>

<PropertyGroup>
  <TestProperties>/testcontainer:@(Tests->'%(FullPath)')</TestProperties>
</PropertyGroup> 
```

[你可以在这里](http://msdn.microsoft.com/en-us/library/dd997067.aspx)找到更多帮助

# django - 为什么 git 不推送文件夹的内容？

> ID：10149706
> 
> 赞同：1
> 
> 时间：2012-04-13T23:45:29.827
> 
> 标签：django, git, heroku

将文件夹“myapp”复制到我的工作文件夹后，我执行以下操作将其添加到我的暂存区域：

```
git add . 
```

然后提交更改：

```
git commit 
```

然后我将我的更改推送到 Heroku：

```
git push heroku master 
```

所以我的文件夹，称为“myapp”存在于heroku上，但问题是它完全是空的。

当我执行以下操作时，

```
git clone myapp myapp2 
```

该文件夹在我的本地计算机上正确克隆，包含所有预期的子内容。

有谁知道为什么子文件夹的内容没有被正确推送到 Heroku？我究竟做错了什么？

要回答以下问题：

1.  我正在`git add .`我的顶级文件夹（包含文件夹的文件夹`myapp`）中执行此操作。执行`git status`显示`没有添加到提交的更改（使用“git add”和/或“git commit -a”）
2.  是的，`myapp`包含文件/文件夹（我的 django 项目）
3.  我删除了我的 .gitignore 文件，因为我将虚拟环境放在了另一个地方，所以它不再在我的项目文件夹中，所以我认为这不会影响它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T19:43:55.537

好的，我似乎已经解决了这个问题。不知何故，git 进入了一个奇怪的状态。我真的不明白如何，但由于某种原因，它没有在文件夹中添加任何文件。

我只是复制了那个文件夹并给它一个新名称，然后按照我一直在做的完全相同的过程，它终于正确上传了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T01:55:57.953

默认情况下，您不能将更改推送到存储库的签出分支。它通常会导致重大问题！以下是通常发生的情况：

```
$ git push heroku master
 *...错误消息...*
到*heroku*
 ！[远程拒绝] master -> master（当前已签出分支）
错误：未能将一些引用推送到“ *heroku* ”

```

由于您没有提到任何*错误消息*，我假设您已将以下内容添加到`heroku`存储库配置中，或者您正在运行相当旧的 Git 版本：

```
[收到]
        拒绝当前分支 = 假

```

每当您将新版本推送到存储库时，听起来您都想检查主分支的新副本`heroku`。这可以通过接收后挂钩来实现。`heroku`在您的存储库中创建一个文件`.git/hooks/post-receive`，并为其`+x`授予权限。

```
#!/bin/sh
while read oldrev newrev refname
do
    if test "$refname" = refs/heads/master
    then
        ( cd ..; GIT_DIR=.git; git reset --hard )
    fi
done 
```

现在，每当您将新`master`分支推送到`heroku`时，钩子都会运行并检查新分支。有更好的方法来做这种事情，但这很简单。

**摘要：**默认情况下，当您推送更改时，它只会更改*历史记录*，而不会更改*工作树*。假设有人可能在那棵树上工作，所以对它做任何事情都可能具有破坏性。

# django - Django 模板大纲

> ID：10149713
> 
> 赞同：3
> 
> 时间：2012-04-13T23:46:07.190
> 
> 标签：django, templates, inheritance, graph, django-templates

我正在尝试获取 Django 项目模板的可视化表示，作为层次结构。

主要思想是获取模板名称列表，因为默认模板加载机制将返回（即尊重`TEMPLATE_DIRS`,`TEMPLATE_LOADERS`等），然后解析模板查找`{% block %}`和 {% extends %} 标签，以创建树结构。最后使用 grapviz 进行可视化。

我不确定这是否是一种可行的方法。但刚开始，我怎样才能按照我描述的方式加载模板？

或者，类似的东西是否已经存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T03:46:07.980

通常，模板是通过名称在线查找的，每个可能使用的模板都没有根条目。

因此，如果您想 grep 项目中所有使用的模板，您需要扫描 TEMPLATE_LOADERS 中的加载程序可能检查的每个地方，以生成可能的条目以供以后自下而上检查。这会很困难，一些加载程序的后端甚至可能不允许按目录获取操作。
或者您可以将 INSTALLED_APPS 中的视图和 urls 文件解析为 grep 模板名称，但这仅适用于模板的硬编码名称，而且更加困难。此外，可能有从硬编码字符串加载的模板......

对于给定的模板名称，正如您的想法一样，更容易加载模板并检查其中的节点。你可以检查`django.template.base`一下它是如何工作的。

此外，您可以利用 django-debug-toolbar 来显示用于请求的模板。而且，IMO，保持模板结构平坦、简单并因此确定，更容易实现。

# mysql - mySQL“无效列”错误

> ID：10149722
> 
> 赞同：0
> 
> 时间：2012-04-13T23:47:49.387
> 
> 标签：mysql, inner-join

当'products'表中满足条件时，我试图在表'products_to_categories'中插入关系（master_categories_id = 500）我的猜测是因为我的SELECT语句应该是JOIN？

```
table: products_to_categories
columns: products_id, categories_id

table: products
columns: products_id, master_categories_id

INSERT INTO products_to_categories (products_id, categories_id)  
SELECT products.products_id, 500 FROM products  
WHERE products.master_categories_id=500 HAVING count(categories_id) < 1; 
```

返回错误：`categories_id is an invalid column`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T23:49:27.970

几种方法：

```
SELECT products.products_id, 500, products.categories_id FROM products
WHERE products.master_categories_id=500 HAVING count(categories_id) < 1; 
```

或者

```
SELECT products.products_id, 500, count(products.categories_id) as cat_count FROM products
WHERE products.master_categories_id=500 HAVING cat_count < 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T23:49:45.587

该`categories_id`列需要在您的`SELECT`. 在这种情况下， only`products`存在，因此唯一有效的列是`products_id`or `master_categories_id`。

# jquery - IE 和 Chrome 在 ajax 发布之前忽略 jQuery 调用

> ID：10149725
> 
> 赞同：0
> 
> 时间：2012-04-13T23:48:21.697
> 
> 标签：jquery, post

使用以下代码：

```
 $('#langHref').html("Translating...").css("color","#FF9933");

            jQuery.ajax({
                type: "post"
                 , url: someUrl
                 , data: { "text": $('body').html() }
                 , async: false 
                 , success: function (data, status) {  
                     $('body').html(data);                      
                 },
                error: function () {
                    alert('We are sorry, there was an error in the translation service.');
                    //console.log("ERROR", arguments);
                }
            });

            $('#langHref').html("Select Language").css("color","");
        } 
```

我有一个`<a>`id 为“langHref”的标签，这里的想法是在调用 ajax 之前，链接文本设置为“Translating...”，其颜色变为橙色。ajax 完成后，链接文本更改回标准的“选择语言”。

这在 FF 中运行良好，但在 IE 和 Chrome 中失败。我已经尝试了所有 beforeSend jQuery 选项和 ajaxSend 事件来尝试在 ajax 消失之前设置它，但无济于事。

如果我关闭 async: false ，那么显然它会立即将文本改回“选择一种语言”，而您看不到它起作用。我还尝试了 async: true 并在 beforeSend 中调用了“Translating ....”，这在我尝试过的任何浏览器中都不起作用。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T23:53:32.177

我认为您想将 beforeSend 添加到您的 ajax 请求中并在此处执行此操作，如下所示：

```
beforeSend: function ( xhr ) {
    $('#langHref').html("Translating...").css("color","#FF9933");
 } 
```

还有一个完整的方法：

```
complete : function(jqXHR, textStatus) {
            $('#langHref').html("Select Language").css("color","");
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T23:54:07.897

可以通过将 `async`属性更改为`true` 并将最后一行放在完成的事件中来完成。像这样的东西：

```
 jQuery.ajax({
                type: "post"
                 , url: someUrl
                 , data: { "text": $('body').html() }
                 , async: true
                 , success: function (data, status) {  
                     $('body').html(data);                      
                 },
                error: function () {
                    alert('We are sorry, there was an error in the translation service.');
                    //console.log("ERROR", arguments);
                },
               completed:function(){
                   $('#langHref').html("Select Language").css("color","");
                },
                beforeSend:function(){
                $('#langHref').html("Translating...").css("color","#FF9933");
                 }
            }); 
```

也许正在发生的事情是在更改 UI 之前，因为 jQuery ajax 函数是异步的，它阻塞了 UI，因此无法更改。

# ruby-on-rails - ActiveRecord::RecordNotUnique (PG::Error: ERROR

> ID：10149727
> 
> 赞同：1
> 
> 时间：2012-04-13T23:48:29.623
> 
> 标签：ruby-on-rails, activerecord, heroku

在 heroku 上调用该函数时出现此错误，无法弄清楚为什么会导致它损坏。如您所见，该功能是在 echos 表中创建一个值。奇怪的是，它在我的本地开发中运行良好。下面是我的heroku日志。任何想法？？？

> 在 13 毫秒内完成 500 内部服务器错误
> 
> ActiveRecord::RecordNotUnique (PG::Error: ERROR: 重复键值违反唯一约束“index_echos_on_user_id_and_yell_id”
> 
> 插入“回声”（“created_at”、“is_yell”、“纬度”、“经度”、“updated_at”、“user_id”、“yell_id”）值（1 美元、2 美元、3 美元、4 美元、5 美元、6 美元、7 美元）返回“id”）：

* * *

我试过`validates_uniqueness_of`了，但还是不行。

```
class Echo < ActiveRecord::Base
  belongs_to :user
  belongs_to :yell

  attr_accessible :user_id, :yell_id, :longitude, :latitude, :is_yell 
  validates_uniqueness_of :is_yell, :scope => [:yell_id, :user_id]
  validates :user_id, :yell_id, :presence => true
end

# == Schema Information
#
# Table name: echos
#
#  id         :integer(4)      not null, primary key
#  is_yell    :boolean(1)
#  user_id    :integer
#  yell_id    :integer
#  created_at :datetime
#  updated_at :datetime
# 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-17T18:17:57.840

我很确定你正在制作一个非回调 sql，比如 update_all，这不会运行验证，所以你需要捕获错误并处理它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T01:53:56.690

您的唯一性约束允许`(user_id,yell_id,is_yell)` `(1,1,true)`和`(1,1,false)`，而`UNIQUE`索引将拒绝这组行。我不知道哪个适合您的应用程序。

如果索引是正确的（任何组合最多一行`user_id, yell_id`），那么您应该更改您的验证：

```
validate_uniqueness_of :yell_id, :scope => :user_id 
```

如果当前验证是正确的（允许使用相同的 yell 和非yell `user_id, yell_id`），那么您应该删除索引并创建一个新索引：

```
remove_index :echo, [:user_id,:yell_id], :unique => true    
add_index :echo, [:user_id,:yell_id,:is_yell], :unique => true 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-14T00:05:15.670

如果您尝试避免在数据库更新查询之前保存重复项怎么办？我的意思是，在 Echo 模型上使用“validates_uniqueness_of”。

你在做这个吗？您可以将 Echo 模型的源代码粘贴到此处或要点中吗？

问候。

# c - C语言中的函数原型

> ID：10149734
> 
> 赞同：1
> 
> 时间：2012-04-13T23:49:58.397
> 
> 标签：c, clang, function-prototypes

今天 Clang，试图编译一个程序，给了我一个奇怪的信息。我对 C 并没有真正的经验，所以我可能做错了什么，但我实际尝试过的代码是这样的：

```
#include <stdio.h>
#include <stdlib.h>

int sum(a,b);

int main ()
{
    printf(sum(1,2));
    return 0;
}

int sum (int a, int b)
{
    return a + b;
} 
```

您可能已经注意到，在声明函数“sum”时，我不包括参数。类型，所以会出现错误，但 Clang 给我的实际消息是这样的：

```
ind.c:4:9: error: a parameter list without types is only allowed in a function definition
int sum(a,b);
        ^
ind.c:12:5: error: redefinition of 'sum' as different kind of symbol
int sum (int a, int b)
    ^
ind.c:4:5: note: previous definition is here
int sum(a,b);
    ^
2 errors generated. 
```

当 Clang 说它只允许在函数定义中时是什么意思？不是`int sum(a,b);`函数定义吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T23:59:09.800

不，`int sum(a, b);`是，或者更像是一个函数*声明*，而不是一个*定义*。

函数声明为编译器提供了足够的信息来生成对函数的调用。定义提供了一个声明，此外，还定义了调用函数时将执行的代码（和之间的东西`{`）`}`。

函数声明（不是定义的一部分）可能包括参数的类型，或类型及其名称，但不仅仅是它们的名称。（如果它包括类型，它是一个*原型*。）

*旧式*函数定义可以只有参数的名称，例如：

```
int sum(a, b)
int a;
int b;
{
    return a + b;
} 
```

但是旧式定义和声明已经过时，最好避免使用。旧式声明没有指定参数类型的数量，因此编译器无法验证调用的正确性。

您的声明*可能*如下所示：

```
int sum(); 
```

但它*应该*是这样的：

```
int sum(int a, int b); 
```

甚至这个：

```
int sum(int, int); 
```

哦，`int main ()`最好写成`int main(void)`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T23:53:02.607

`int sum();`是一个函数*声明*。它为函数命名，但不告诉编译器它做了什么。告诉编译器它做了什么就是*定义*函数，这就是它的意思。如果您使用带有语句的大括号而不是分号，那么您将拥有一个函数定义。

# git - 不明白分叉

> ID：10149736
> 
> 赞同：5
> 
> 时间：2012-04-13T23:50:10.153
> 
> 标签：git, bitbucket

我们刚刚用 bitbucket 建立了一个项目。我们将我们的“生产”[P] 代码放在一个 repo 上，然后我创建了一个 fork[m]，然后我的同事 [C] 也创建了一个 fork。

```
 [P]
   /   \
 [M]   [C] 
```

我做了一些更改，创建了一个拉取请求并接受了它，所以 [P] 现在有了我的代码，[M]。

这是我感到困惑的地方。[C]，我的同事回购如何获得更新的代码？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-13T23:52:10.777

你的同事需要从 P 那里拉出来。

如果您正在`master`P 中的分支上工作，那么命令将是...

```
git pull origin master 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T09:54:05.403

注意：如果我们实际上是在谈论**[分叉](http://confluence.atlassian.com/display/BITBUCKET/Forking+a+bitbucket+Repository#ForkingabitbucketRepository-Step-by-StepExample%E2%80%93NowthePullRequest)***（这是在服务器*端克隆 repo 的行为）而不是简单的克隆，那么架构是：

```
 BitBucket

    ------------[P]-----------
    |            ^           |
    |            |           |
 (forked) (pull request)  (forked)
    |                        |
    v                        v
   [M]                      [C]
    |                        |
----|------------------------|-----  
    |   Local workstations   |
    |                        |
 (git clone)             (git clone)
    |                        |
    v                        v
 [MLocal]                  [CLocal] 
```

换句话说，`M`并且`C`在 BitBucket 服务器上，而不是在`Muser`本地`Cuser`工作站上。
' `origin`' 将是它们各自的[上游](https://stackoverflow.com/questions/2739376/definition-of-downstream-and-upstream/2749166#2749166)存储库`MLocal`and `CLocal`，即 M 或 C，**而不是`P`**。
（参见“[源和上游有什么区别](https://stackoverflow.com/questions/9257533/what-is-the-difference-between-origin-and-upstream-in-github/9257901#9257901)”，对于 GitHub，但也适用于 BitBucket）

这对 Muser 很有用，因为：

*   `Muser`可能不想直接推送到`P`（他可以，但他是`P`BitBucket 的所有者），所以在这里，repo`M`充当他的“缓冲区”
*   `Cuser`无权推动`P`，他也必须分叉

在这种情况下，`Cuser`要查看 上的任何更新`P`，他需要添加`P`为远程`CLocal`仓库（即他的 fork 的克隆本地仓库）

```
git remote add P https://bitbucket.org/Puser/P
git pull P master 
```

一旦这些新的变化在本地（在`CLocal`）被集成和测试，它们就可以被推回`C`，以及`Cuser`. 只有那些新的修改将成为[拉取请求](http://confluence.atlassian.com/display/BITBUCKET/Forking+a+bitbucket+Repository#ForkingabitbucketRepository-Step-by-StepExample%E2%80%93NowthePullRequest)的一部分，供`Muser`（和`P`所有者）检查并添加到 P。

同样，`Muser`需要将`P`其作为远程添加到，以便从接受的`MLocal`任何修改中取回.`C``P`

# ios - iOS - 空块

> ID：10149740
> 
> 赞同：0
> 
> 时间：2012-04-13T23:50:34.177
> 
> 标签：ios, objective-c-blocks

我有一个奇怪的问题。我今天早些时候犯了一个标记错误，实际上为我解决了一个问题。它解决的问题无关紧要，我的主要问题是......这是合法的Objective-C吗？为什么？注意第二条语句周围的空块。我没有用任何东西打开块，没有 if、else、for、while、switch 等。有什么理由这样做吗？

```
 if (condition) {
        statement;
    } {
    statement;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T23:53:40.387

是的，您可以`;`在 Objective-C 中添加一个空块

```
{}
; 
```

这两个都可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T00:03:47.497

重新格式化：

```
if (condition) {
    statement;
}
{statement;} 
```

正如其他人所说：这只是额外的像素。

# c - malloc 的全局数组

> ID：10149746
> 
> 赞同：1
> 
> 时间：2012-04-13T23:51:25.197
> 
> 标签：c, malloc, global-variables

我正在做一个需要 malloc 一些数据的项目。我试图通过改变我使用的主要结构值来减少程序的堆峰值。我正在使用链接列表。我的结构是这样的：

```
struct myS{

int a,b;
float a,b;
struct myS *next;

}; 
```

我在想，不是分配结构指针，而是将它存储在一个全局数组中，因为我没有太多数据。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T23:59:01.180

如果你有你需要的元素数量的上限，你可以**创建一个全局数组**[不是动态分配的]，让它成为`struct myS heap[]`，和一个整数`idx`，初始化为`0`。分配元素后，您需要增加`idx`，并将此元素附加到请求者。

注意 -**只有当您不希望删除元素**[或者您可以负担**每个元素只分配一次**] 时，它才是一个很好的解决方案。
如果您确实需要删除，您将需要分配一个额外的数组来告诉您当前正在使用哪些元素，使`idx`循环 [increase with `idx = (idx + 1) % size`]，并在给它之前检查每个元素是否已分配，但正如我所说 - 它可能会更耗时！

**代码快照[不支持删除]：**

```
struct myS heap[SIZE];
int idx = 0;

...

struct myS* allocate() {
  return &(heap[idx++]);
} 
```

注意：上面的代码快照是危险的——如果你尝试分配更多的元素，它可能会溢出`SIZE`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T23:57:35.353

你可以这样做：

```
struct myS myArray[ARRAY_SIZE];

/* ... */

struct myS *head = &myArray[0];

head->next = &myArray[1];
head->next->next = &myArray[2];

/* etc... */ 
```

使用的数组索引不必是连续的，例如`head`可以是索引`3`，`head->next`也可以是索引`21`

如果要初始化列表以一次使用数组中的所有条目，可以循环执行：

```
struct myS *node = head;
for (int i = 1; i < ARRAY_SIZE; i++)
{
    node->next = &myArray[i];
    node = &myArray[i];
}
node->next = NULL;  /* Make sure the tail of the list doesn't have a 'next' pointer */ 
```

# python - Python中的和/或？

> ID：10149747
> 
> 赞同：40
> 
> 时间：2012-04-13T23:51:29.207
> 
> 标签：python, logic

我知道python中存在`and`and`or`表达式，但是有`and/or`表达式吗？或者以某种方式将它们组合起来以产生与`and/or`表达式相同的效果？

我的代码看起来像这样：

```
if input=="a":        
    if "a" or "á" or "à" or "ã" or "â" in someList:            
        someList.remove("a") or someList.remove("á") or someList.remove("à") or someList.remove("ã") or someList.remove("â") 
```

有了这个，我的意思是如果用户输入“a”并且任何类型的“a”包含在先前定义的列表中，我可以从给定列表中删除所有类型的“a”吗？

python告诉我有一个问题：

```
someList.remove("a") or someList.remove("á") or someList.remove("à") or someList.remove("ã") or someList.remove("â") 
```

他告诉我：`ValueError: list.remove(x): x not in list`

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-14T00:13:16.037

正如[Matt Ball](https://stackoverflow.com/a/10149756/577088)的回答所解释的那样，`or` *是*“和/或”。但`or`不适`in`用于您在上面使用它的方式。你不得不说`if "a" in someList or "á" in someList or...`。或者更好的是，

```
if any(c in someList for c in ("a", "á", "à", "ã", "â")):
    ... 
```

这就是您所问问题的答案。

### 其他注意事项

但是，对于您发布的示例代码，还有一些话要说。首先，这里的语句链`someList.remove... or someList remove...`是不必要的，并且可能导致意外行为。也很难读！最好把它分成几行：

```
someList.remove("a")
someList.remove("á")
... 
```

然而，即使这样还不够。正如您所观察到的，如果该项目不在列表中，则会引发错误。最重要的是，使用`remove`非常慢，因为每次调用它时，Python 都必须查看列表中的每一项。因此，如果您要删除 10 个不同的字符，并且您有一个包含 100 个字符的列表，则必须执行 1000 次测试。

相反，我会建议一种非常不同的方法。使用 过滤列表`set`，如下所示：

```
chars_to_remove = set(("a", "á", "à", "ã", "â"))
someList = [c for c in someList if c not in chars_to_remove] 
```

或者，在不创建副本的情况下就地更改列表：

```
someList[:] = (c for c in someList if c not in chars_to_remove) 
```

它们都使用列表理解语法来创建一个新列表。他们查看 中的每个字符`someList`，检查该字符是否在 中`chars_to_remove`，如果不是，则将该字符包含在新列表中。

这是此代码最有效的版本。它有两个速度优势：

1.  它只通过`someList`一次。在上述场景中，它只执行 100 次，而不是执行 1000 次测试。
2.  `chars_to_remove`它可以通过一次操作测试所有字符，因为`set`. 如果`chars_to_remove`是`list`or `tuple`，那么在上述场景中，每个测试实际上是 10 个测试——因为列表中的每个字符都需要单独检查。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-13T23:53:31.087

`or`不是排他性的（例如[`xor`](http://en.wikipedia.org/wiki/Xor)），所以`or`与`and/or`.

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-04-13T23:53:32.417

`x and y`如果两者`x`和`y`都是则返回真`true`。
`x or y`如果其中一个是 则返回`true`。

由此我们可以得出结论，它`or`包含`and`在自身之中，除非你的意思是`xOR`（或者除非`and`是真的）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-13T23:53:31.853

你在寻找...

```
a if b else c 
```

或者你可能误解了 Python 的`or`？`True or True`是`True`。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-04-14T00:23:36.733

对于更新后的问题，您可以使用以下内容替换您想要的内容：

```
someList = filter(lambda x: x not in ("a", "á", "à", "ã", "â"), someList) 
```

`filter`通过将列表中的每个元素传递给提供的 lambda 来评估它。在这个 lambda 中，我们检查元素是否不是提供的字符之一，因为这些字符应该保留在列表中。

或者，如果其中的项目`someList`应该是唯一的，您可以制作`someList`一个集合并执行以下操作：

```
someList = list(set(someList)-set(("a", "á", "à", "ã", "â"))) 
```

这本质上是集合之间的差异，它可以满足您的需求，但也确保每个元素只出现一次，这与列表不同。请注意，在这种情况下，您可以从一开始就将其存储`someList`为一组，它会稍微优化一下。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-21T08:24:57.137

试试这个解决方案：

```
for m in ["a", "á", "à", "ã", "â"]:
    try:
        somelist.remove(m)
    except:
        pass 
```

仅供您参考。`and`和`or`运算符也用于返回值。当您需要为变量赋值但您有一些先决条件时，它很有用

运算符`or`首先返回非空值

```
#init values
a,b,c,d = (1,2,3,None)

print(d or a or b or c)
#output value of a - 1

print(b or a or c or d)
#output value of b - 2 
```

`and`如果任何成员没有`None`值或者如果它们至少有一个我们得到的 None 值，则运算符返回序列中的最后一个值`None`

```
print(a and d and b and c)
#output: None

print(a or b or c)
#output value of c - 3 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-04-14T13:11:34.833

```
if input == 'a':
    for char in 'abc':
        if char in some_list:
            some_list.remove(char) 
```

# javascript - 使用带有多个参数的 onclick 函数从 javascript 添加按钮

> ID：10149748
> 
> 赞同：0
> 
> 时间：2012-04-13T23:52:01.853
> 
> 标签：javascript, html

我正在尝试从具有另一个函数作为 onClick 函数的 javascript 函数（使用 innerHTML 方法）添加一个按钮。此 onClick 函数必须采用多个参数：

```
area.innerHTML += "<input type='image' src='images/del.jpg' width='15' height='15' " +
           "onClick='del(" + info['_id'] + "," + key + "," + value + ")' />"; 
```

这是（我认为）最合乎逻辑的方法，但是当我尝试单击按钮时没有函数调用。这适用于单个参数，因此问题必须在于参数与“，”的组合。有谁知道如何解决这个问题？

**update** del 函数是一个临时的测试函数

```
function del(id, key, value) {
    console.log(id + key + value);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T00:12:02.137

我认为您只需要将变量作为字符串传递即可。甚至将 onclick 编辑为：

```
onClick='del(\"" + info['_id'] + "\",\"" + key + "\",\"" + value + "\")' />" 
```

# android - Flex项目中有很多MXML组件

> ID：10149750
> 
> 赞同：0
> 
> 时间：2012-04-13T23:52:12.483
> 
> 标签：android, flash, apache-flex, adobe, flash-builder

我开发了一个小型应用程序，其中包含我所在国家/地区的新闻和充电站列表。但是我是编程的初学者，所以...当用户单击 HomeView 上的充电站按钮时，会在 RegionView 上推送视图（这里是 7 个 MXML 子文件），然后用户选择 Region 并在充电站列表上推送视图在这个地区。这里有 10+ 个 MXML 子组件，每个子组件对应一个充电站，因为当用户点击充电站时，会在 DetailsViewOfCH 上推送视图（每个子组件的唯一详细信息）。

我的问题：这个方法好还是应用程序太大？！[在此处输入图像描述][1]

这是一个插图

http://shrani.si/f/2k/Qc/2fOE4oro/untitled-1.jpg

简短说明：一个 HomeView MXML -> 区域 MXML（7 个 MXML 组件，每个用于一个区域）-> 充电站 MXML（一个区域 10+ 个 MXML 组件）-> 我有一个 60 个充电站，所以 60 个 MXML 组件文件了解详细信息的充电站。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:14:40.553

我听到您所说的视图过多 - 请尝试以下操作：

为 Home 制作一个 mxml，为 Region 制作一个，为 Charge Station 制作一个，为 Components 制作一个。到处都有硬编码的数据，用变量替换。然后，您可以将所有 50 多个 mxml 文件中的所有数据放入某种数据模型中 - sqlite、xml、localstore 等。

编写一个类来访问数据，然后您可以将使用您的数据填充的引用传递给 4 个视图中的每一个。因此，每次在每个视图中进行选择时，都会根据需要将数据缩小到更具体的位置。

[传递数据](http://help.adobe.com/en_US/flex/mobileapps/WSa122979b4619725672e48c412a3e152164-7fff.html#WSe11993ea1bd776e577ad4b2d12a42c5858a-7fff)

[通过额外的代码帮助传递更多数据](http://cookbooks.adobe.com/post_Passing_data_between_Views-18854.html)

[访问数据](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf5f39f-7ff7.html#WS2db454920e96a9e51e63e3d11c0bf5f39f-7fef)

[有关数据模型的更多信息](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7b51.html)

[这是您的本地数据存储选项](http://blog.crankybit.com/notes-adobe-air-local-data-storage-options/)

[在这里您可以找到入门帮助](http://www.adobe.com/devnet/flex/documentation.html)

希望这会让你走上正确的道路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T06:11:42.963

您的应用程序在真正的 Android 设备上表现如何？

视图之间的导航是否很慢？对此有[一些很好的阅读](http://polygeek.com/4774_air-mobile_performance-tip-using-flex)。我还听说有人等到`viewActivated`派出后才将“更昂贵”的视图组件添加到`View`类中，以加快转换速度。

此外，您应该在显示 60 个充电站列表的屏幕上使用一个[`List`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/List.html)组件和一个`LabelItemRenderer`或。`IconItemRender`Flex`List`组件只创建显示屏幕内容所需的项目渲染器。当您滚动列表时，它会使用列表中的新数据重新填充项目渲染器。如果您已经在使用它，请不要担心:)

请注意，标签/图标项渲染器已针对移动应用程序进行了优化。

*   [使用 Flex Mobile 的 MobileIconItemRenderer 的 List 中的 CheckBox](http://www.flex-blog.com/checkbox-in-list-using-mobileiconitemrenderer-for-flex-mobile/)
*   [使用 Flex 和 Flash Builder 构建移动员工目录示例](http://www.adobe.com/devnet/flex/articles/employee-directory-android-flex.html)
*   [`IconItemRenderer`文档中的示例](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/IconItemRenderer.html#includeExamplesSummary)

# postgresql - 是否有适用于 node.js 和 PostgreSQL 的 ActiveRecord 框架？

> ID：10149752
> 
> 赞同：1
> 
> 时间：2012-04-13T23:52:53.397
> 
> 标签：postgresql, node.js, activerecord

我是 Node.js 的新手，来自 Rails 世界，我喜欢它提供的 ActiveRecord 模式/框架。节点有类似的东西吗？还是我坚持构建查询？此外，Postgres 是我选择的数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T06:12:48.637

看看 Tower.js。更多的是建立在 Express 之上的全栈框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T00:32:20.877

我知道的最接近 Node 中类似 Rails 的框架的是 Express [http://expressjs.com/](http://expressjs.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T16:56:50.380

[Railway.js](http://railwayjs.com/)就像 padrino，一个用于 Node.js 的全栈模块化框架。Tower.js 受到 Rails 的启发，因此是最接近的匹配。

我会说 Express 比 Rails 更适合 Sinatra，它基本上提供视图渲染引擎和 url 路由。

# javascript - 在 startPage 方法上从 Objective C 获取 HTML5 本地存储项

> ID：10149759
> 
> 赞同：5
> 
> 时间：2012-04-13T23:53:32.197
> 
> 标签：javascript, objective-c, html, cordova

我正在使用 html5 localstorage 上的 javascript 在我的 phonegap 应用程序上编写一些键/值，但我想在我的应用程序启动时访问它们，特别是从我的 objective-c +(NSString*) startPage 方法。我知道我可以从 -(void) webViewDidFinishedLoad 中做到这一点，但我需要从 startPage 方法中读取值，以便我可以检索将存储和使用的页面名称，如起始页。有没有办法做到这一点？如果没有，有没有办法用保存在本地存储中的字符串设置起始页？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T22:40:27.703

您必须编写本机代码才能访问本地存储。我相信 HTML 本地存储数据作为 SQLLite 数据库存储在您的应用程序的库文件夹中，因此您应该能够使用本机 SQLLite 接口访问它，尽管这对于您正在尝试做的事情来说听起来有点困难。

一个更简单的解决方案可能是使用 PhoneGap 使用插件将数据写入 NSUserDefaults，而不是将其存储在本地存储中。一旦使用插件接口加载数据，就可以很容易地将数据传入和传出 webview，并且从本地代码访问 NSUserDefaults 比本地存储数据库要简单得多。

# django - Heroku + Django + 活塞

> ID：10149763
> 
> 赞同：0
> 
> 时间：2012-04-13T23:53:57.677
> 
> 标签：django, rest, amazon-web-services, heroku, django-piston

我将 Heroku 与 Django 一起使用，并将 Piston 用于 API 的东西。

我们从普通的 Amazon EC2 迁移到 Heroku。除了一些 API 调用外，一切正常（网站的各个方面）。

当我运行 API 调用以获取用户拥有的对象（树）列表时，我得到以下信息：

```
RuntimeError at /api/tree.json
maximum recursion depth exceeded while calling a Python object 
```

任何人都知道为什么会这样？在此先感谢，我非常感谢任何提示/建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T04:37:20.873

这是一个棘手的调试问题。原来问题在于 Heroku dynos 看不到对方的临时目录。这意味着在迁移到 Heroku 之后，即使我们将文件写入临时目录，当我们安排一个任务来处理该文件时，该文件也会神秘地不存在。我们通过将文件直接写入 S3（而不是使用临时目录）解决了这个问题。

此外，Piston 的新版本对数据库架构进行了更改，因此请确保更新正确！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T08:51:24.250

这基本上意味着您的三个有点过于结构化，并且解码它的函数（递归）超过了递归调用的最大深度限制（例如，递归深度 = 3 的示例是调用函数的函数，调用另一个函数，它调用另一个函数）。如果您使用自定义算法来解码 json，只需确保从递归方法切换到迭代方法（可以通过许多实现提示的算法来完成）。尝试查看递归操作的限制：

```
>>> import sys
>>> sys.getrecursionlimit()
1000 #on my mac but this is system dependent. 
```

如果您对它不满意，请按如下方式更改：

```
>>> sys.setrecursionlimit(...) 
```

避免设置为高数字，因为它们可能会使您的系统崩溃；我敢打赌，heroku 以某种方式限制了最大深度递归。

# php - 如何使用 concat 或任何类似功能实现此类别输出

> ID：10149764
> 
> 赞同：0
> 
> 时间：2012-04-13T23:53:58.730
> 
> 标签：php, sql

我想实现这个输出：

第一类

-field1

类别 2

-field2

使用连接或任何函数。

我有一个嵌套循环，第一个循环将循环一个针对类别的 sql 查询，而第二个循环将通过一个查询循环，当找到一个类别匹配时，它将相应地对它们进行分组。现在我能够正确地对它进行分组，但它仅限于一个循环，意味着大于 1 的循环，它最终得到最后一个类别并且只显示它，所以我想知道是否有办法让我这样做.

代码是这样的：

```
 $unsize is the size of the array for the number of categories
 $un is the category array
for($x=0;$x<$unsize;$x++)
 {
  foreach(loop in db)
   {
     if($p->category == $un[$x])
      {
         do some really long code.
         summary:
         $a = "<tr><td>$un[$x]</td></tr>";
         $b = "<tr><td>$p->field</td></tr>";
      }
   }
 } 
```

尝试使用这个：

```
 $a .= "<tr><td>Dog</td></tr><tr><td>Dogie</td></tr>";

  $a .= "<tr><td>Dog1</td></tr><tr><td>Dogie1</td></tr>"; 
```

结束了

猫1

-field1

猫1

-field3

其中 field1 和 field3 属于 cat1

表有一个 id、字段、排序顺序、类别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T23:55:31.540

您可以执行 sql 查询并对类别进行分组。

```
Select col, col2, col3 FROM table GROUP BY cat ORDER BY cat ASC 
```

# arrays - Matlab：根据数组b修改数组a

> ID：10149767
> 
> 赞同：0
> 
> 时间：2012-04-13T23:54:15.570
> 
> 标签：arrays, matlab

我在matlab中有两个数组

```
a = [1 1.1 1.2 1.1 1.3] 
b = [-2 0 1 2 -4] 
```

对于数组中的负值`b`，例如-2 -4，我想将数组转换`a`为负数，-1 和-1.3。

我使用了一个“for”循环，对于 700 000 列（可能是几个小时）寻找更快的方法来完成此操作需要太长时间。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T00:02:26.810

`a .* sign(b)`如果`b`没有零元素，`a`可以有任意元素。

**解释：**

逐项乘以`a`的符号`b`。

**空修复：**

要修复空错误，您可以像这样自己编写一个函数（伪代码）：

```
function r = test_sign(b)
if b==0
   r = 1;
else
   r = sign(b);
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T00:01:57.810

您可以使用逻辑索引。

（首先我假设`a`并且`b`长度相同，否则您的问题没有意义）。

要获得一个`TRUE`何时`b`为负的向量，`FALSE`否则，您可以这样做：

```
b < 0 % depending on what you want, b <= 0 
```

您可以使用它作为索引`a`来获取那些相应的元素：

```
a( b < 0 ) 
```

现在您已经选择了正确的元素，使它们成为负数并将它们分配回去：

```
a ( b < 0 ) = - a ( b < 0 ); 
```

在效率方面，您可能希望存储向量`b < 0`以避免重新计算它（您必须尝试查看您更喜欢哪个）：

```
idx = b < 0;
a(idx) = -a(idx); 
```

Matlab 是一种矢量化语言，所以大多数时候都有一个`for`循环，你可以避免它。[在此处](http://www.mathworks.com.au/company/newsletters/articles/Matrix-Indexing-in-MATLAB/matrix.html)阅读有关此类矩阵索引的信息。

# php - 可以使用 PHP PDO 将 MSSQL 备份恢复到不同的数据库名称吗？

> ID：10149768
> 
> 赞同：-1
> 
> 时间：2012-04-13T23:54:18.097
> 
> 标签：php, sql-server, windows, pdo

是否可以仅使用 PHP PDO 和 FTP 访问将 MSSQL Express 备份文件恢复到另一台运行 MSSQL Server 的服务器上的**不同数据库名称？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T01:24:03.213

如果没有数据库的副本，您将无法做到这一点。使用分离、复制、重新附加方法。

我建议以下这些都应该可以使用 PHP PDO。但首先您必须使用新名称分离、复制和重新附加。

1.  为了安全起见，使用 php 中的 TSQL 进行备份。
2.  使用 php.ini 中的 TSQL 分离要复制的数据库。（这将使其离线）
3.  将原始数据库中的文件复制到新名称。使用 php 函数进行复制。
4.  重新附加原始文件，使用 php 中的 TSQL
5.  使用来自 php.ini 的 TSQL 附加新名称的副本。

一定要先在某个地方练习这个，这样你就知道它会起作用。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-14T00:28:38.130

是的，这是可能的，但您需要在目标中创建一个与备份数据库文件名相同的源名称的数据库，然后让您创建的目标数据库脱机并用旧的备份数据库文件替换它。完成后，将目标数据库联机。我希望它有所帮助

# javascript - 当我点击“上传”按钮时没有任何反应

> ID：10149769
> 
> 赞同：0
> 
> 时间：2012-04-13T23:54:26.990
> 
> 标签：javascript, jquery, file-upload, alert

下面是我的javascript代码，我想要发生的是，当用户点击表单中的“上传”按钮时，它会检查“imageValidation”以查看文件输入是否正确，如果是，那么它会去在“startImageUpload()”函数上，如果文件输入不正确，那么它应该显示一条警告，指出“不是图像”，它不应该进入“startImageUpload”函数。

问题是它根本没有这样做。当用户单击“上传”按钮时，不会出现任何警报，不会发生上传，也不会发生任何事情。我需要什么才能实现上述段落？

下面是表格：

```
var $fileImage = $("<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='imageClickHandler(this); return false;' class='imageuploadform' >" + 
"<label> Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/>" +
"<input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label></form>"); 
```

以下是当用户单击“上传”按钮时的功能，它遵循以下功能：

```
 function imageClickHandler(){ 
     if(imageValidation()){ 
     startImageUpload(imageuploadform); 
     } 
} 
```

下面是用于验证文件输入的 imageValidation() 函数，但我不知道这是否正常工作？

```
function imageValidation() {

        $(".fileImage").change(function() {

          var val = $(this).val();

        switch(val.substring(val.lastIndexOf('.') + 1).toLowerCase()){
            case 'gif': case 'jpg': case 'png':
                return true;
                break;
            default:
                $(this).val('');
                // error message here
                alert("not an image");
                return false;
                break;
        }

    });

    } 
```

下面是“startImageUpload()”函数，我知道它在尝试验证输入文件之前有效。

```
function startImageUpload(imageuploadform){

  $(imageuploadform).find('.imagef1_upload_process').css('visibility','visible');
  $(imageuploadform).find('.imagef1_cancel').css('visibility','visible');
  $(imageuploadform).find('.imagef1_upload_form').css('visibility','hidden');
  sourceImageForm = imageuploadform;

      return true;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T00:28:30.037

你`onsubmit`总是回来`false`...

更改它以返回结果`imageClickHandler`

```
 <form .... onsubmit="return imageClickHandler(this);"> 
```

并将JS函数更改为返回值

```
 function imageClickHandler(form){ 
      if(imageValidation()){ 
          return startImageUpload(form); 
      } 
      return false;
  } 
```

还 - 确保您的`imageValidation`函数具有默认返回值（`return false;`在函数的最后一行添加）

# 编辑：

为了防止在用户选择文件时发生验证，删除对更改事件的侦听，并将验证更改为：

```
function imageValidation() {
    var val = $(".fileImage").val();
    switch(val.substring(val.lastIndexOf('.') + 1).toLowerCase()){
        case 'gif':
        case 'jpg': 
        case 'png':
             return true;
        default:
            $(".fileImage").val('');
            // error message here
            alert("not an image");
            return false;
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T00:21:31.567

有几件事。首先，验证的结果可能会触发以下两种结果之一：执行或提醒。但是 alert 的结果在 validate 函数内部，而不是在使用 result 返回的结果返回之后。建议将其向上移动并使用 if-then-else。代码风格的东西。

其次，imageClickHandler 使用了一个名为 imageuploadform 的 JS 对象。在任何地方都看不到这样的 JS 对象。有一个附加了 imageuploadform 类的 dom 元素。但这不是一回事。授予整个 html/js 没有显示。

第三，将参数传递给 imageClickHandler 但函数定义没有定义任何参数。意图是什么？

如果您遇到困难，请尝试在各处临时散布警报消息以跟踪程序执行情况。这可能会告诉你执行的去向，或者不是。

正如 Yaron 所说，如果 startUpload 没有在后台进行实际上传，那么您必须从 onClick 返回潜在的“真实”结果。返回 '​​false' 确保它永远不会进入 php 页面。

```
function imageClickHandler(){ 
   var imageuploadform = $('form.imageuploadform').get(0);
   if(imageValidation()){  
      startImageUpload(imageuploadform); 
      return true; 
   } 
   else {
      alert("not an image");
      return false;
   } 
}

function imageValidation() { 

   $(".fileImage").change(function() { 

      var val = $(this).val(); 

      switch(val.substring(val.lastIndexOf('.') + 1).toLowerCase()){ 
         case 'gif': case 'jpg': case 'png': 
            return true; 
            break; 
         default: 
            return false; 
            break; 
      } 

   }); 

}

var $fileImage = $("<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='return imageClickHandler();' class='imageuploadform' >" +  
"<label> Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/>" + 
"<input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label></ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T00:10:36.540

您是否尝试过从验证中完全删除开关并仅返回 alert() 用于测试目的？

也许您的“val”变量与 jQuery val() 混淆了？尝试使用不同的 var 名称？

```
 var val = $(this).val();
            $(this).val(''); 
```

# c++ - OSX Eclipse CDT - 根风格包括

> ID：10149776
> 
> 赞同：1
> 
> 时间：2012-04-13T23:56:18.590
> 
> 标签：c++, eclipse-cdt

在 C++ 项目中，在 Eclipse CDT 中，我经常遇到的一个争论点是删除文件的痛苦，因为它处理包含的方式。在 Xcode 中，可以使用文件名或项目目录中的相对名称，但是 Eclipse 要求我经常使用向后的“..”相对路径，这些路径可能难以阅读，随着项目复杂性的增长进行跟踪。

包括目前看起来像这样：

```
`../../model/geometry/Square.h` 
```

理想情况下，我希望包含所有内容，假装它们是从“src 目录的根目录”调用的，例如

```
`model/geometry/Square.h` 
```

我知道 include 本质上是一个预处理器，查找替换指令，但是这是 2012 年，必须有办法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T00:13:37.910

当然有一种方法可以这样做：

右键单击您的**项目 -> 属性 -> 打开 C/C++ 常规选项卡 -> 路径和符号 -> 在左侧选择您的语言 (C++/C/Assembly) -> 在右侧，单击添加**...选择您的文件夹位置！

希望它有所帮助！

*编辑：请记住，如果您包含一个文件夹，则可以直接包含该特定文件夹中的文件*

```
#include "file.h" and not #include "folderIncluded/file.h" 
```

问候， 厄瓦尔德

# javascript - 清除所有并删除样式

> ID：10149780
> 
> 赞同：1
> 
> 时间：2012-04-13T23:57:52.643
> 
> 标签：javascript, jquery, forms

我有一个脚本可以清除所有字段，但不会删除所有样式属性。如何删除表单中的所有样式属性？

这是我的代码：

```
function clear_form_elements(ele) {

$(ele).find(':input').each(function() {
    switch(this.type) {
        case 'password':
        case 'select-multiple':
        case 'select-one':
        case 'text':
        case 'textarea':
            $(this).val('');
            break;
        case 'checkbox':
        case 'radio':
            this.checked = false;
    }
 });

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T00:00:18.403

只需添加要从中删除样式属性的元素的元素/选择器在`$(elem).removeAttr("style");`哪里`elem`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T00:01:44.707

试试这个

```
function clear_form_elements(ele) {
$(ele).find(':input').each(function() {
    switch(this.type) {
        case 'password':
        case 'select-multiple':
        case 'select-one':
        case 'text':
        case 'textarea':
            $(this).val('');
            $(this).removeAttr("style");
            break;
        case 'checkbox':
        case 'radio':
            this.checked = false;
    }
 });

} 
```

通常，您可以使用 jQuery 的 removeAttr("your attribute name") 删除 html 标记中的属性...这里是有关 removeAttr() [JQuery 的 removeAttr() 的更多信息](http://api.jquery.com/removeAttr/)

# apache-flex - 未定义属性的访问 - Flex 4.6

> ID：10149784
> 
> 赞同：0
> 
> 时间：2012-04-13T23:58:07.720
> 
> 标签：apache-flex, mobile, actionscript

Flex 4.6 移动应用程序

我收到错误“访问未定义的属性 PrepForDisplay”

在我的声明标签中，我有

```
 <s:CurrencyFormatter id="PrepForDisplay"
     currencySymbol="" 
     useCurrencySymbol="true"
     negativeCurrencyFormat="0"
     positiveCurrencyFormat="0"/> 
```

在我的 MXML 部分中，我有

```
<s:List id="lst" dataProvider="{dp}" useVirtualLayout="true" width="100%" height="95%" top="30" alternatingItemColors="[#66FFFF, #33CCCC]">
<s:itemRenderer>
<fx:Component>
       <s:ItemRenderer>
    <s:HGroup  gap="10">
    <s:Label text="{data.Period}" />
    **<s:Label text="{PrepForDisplay.format(data.Payment)}" />**
    </s:HGroup>
  </s:ItemRenderer>
</fx:Component> 
```

错误出现在粗体线上。如果我将其更改为 Number(data.Payment).toFixed(2) 一切正常。我已经成功地使用了currencyFormatter，就像在其他视图上一样。我什至可以在函数中的这个视图上使用它，但是当我尝试在标签中应用它时，我得到了错误。

有任何想法吗？

干杯，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T00:06:11.627

我的猜测是，这是一个范围错误，换句话说，格式化程序是在组件范围内创建的，它创建了列表，并且 itemrenderer 被实例化为列表。所以它不知道在 itemrenderer 中引用的变量 (PrepForDisplay)。

要解决它，只需在 itemrenderer 中移动 CurrencyFormatter 标签：

```
<s:ItemRenderer>
<fx:Declarations>
<s:CurrencyFormatter id="PrepForDisplay"
 currencySymbol="" 
 useCurrencySymbol="true"
 negativeCurrencyFormat="0"
 positiveCurrencyFormat="0"/>
</fx:Declarations>
<s:HGroup  gap="10">
    <s:Label text="{data.Period}" />
    <s:Label text="{PrepForDisplay.format(data.Payment)}" />
</s:HGroup> 
```

或者只是在单独的文件中定义 itemrenderer。

# c# - 跨 REST 服务

> ID：10149785
> 
> 赞同：0
> 
> 时间：2012-04-13T23:58:24.107
> 
> 标签：c#, wcf, web-services, rest

所以在下面我有一个学生/组服务正在运行，但现在我想让两个服务运行，一个将保存“组”，另一个将保存“学生”，基本上将服务分成两部分。但是当我想将一个学生添加到一个组时，我的困惑就出现了，你是怎么做的`cross service`？

例如，这段代码将一个学生添加到一个组中，所有这些都在一个其余的 web 服务中：

```
 public void AddStudentToGroup(string group, string studentID, string firstName, string lastName)
    {
        var result = Groups.Where(n => String.Equals(n.GroupName, group)).FirstOrDefault();
        var result1 = students.Where(n => String.Equals(n.StudentID, studentID)).FirstOrDefault();
        if (result != null)
        {
            result.Groupsz.Add(new Student() { StudentID = studentID, FirstName = firstName, LastName = lastName });
        }
        if (result1 != null)
        {
            result1.StudentGroup.Add(new Group() { GroupName = group });
        }

    } 
```

所以我的问题是，如果我将我的服务分成两个服务，一个包含组，一个包含学生，我如何实现我在上面的代码中所做的（将学生添加到组）但跨两个服务？客户端 POST 在哪里尝试实现这一目标？

我的整个一项服务看起来像下面的代码，但我将寻求取出组，只留下学生信息，并将组变成它自己的宁静 Web 服务。我只是不知道您在尝试实现上述目标时如何从一项服务与另一项服务进行通信？

```
using System;
using System.Collections.Generic;
using System.Text;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.ServiceModel.Description;
using System.IO;
using System.Net;
using System.Drawing;
using System.Runtime.Serialization;
using System.Linq;

namespace WcfServiceLibrary1
{
    [ServiceContract(Namespace = "http://tempuri.org")]
    [XmlSerializerFormat]
    public interface IReceiveData
    {
        #region DELETE
        [OperationContract]
        [WebInvoke(Method = "DELETE", BodyStyle = WebMessageBodyStyle.Bare, RequestFormat = WebMessageFormat.Xml, ResponseFormat = WebMessageFormat.Xml, UriTemplate = "/Student/{studentID}")]
        void removeStudent(string studentID);
        #endregion

        #region POST
        [OperationContract]
        [WebInvoke(Method = "POST", BodyStyle = WebMessageBodyStyle.Bare, RequestFormat = WebMessageFormat.Xml, ResponseFormat = WebMessageFormat.Xml, UriTemplate = "/Group")]
        void AddGroup(Group group);
        [OperationContract]
        [WebInvoke(Method = "POST", BodyStyle = WebMessageBodyStyle.Bare, RequestFormat = WebMessageFormat.Xml, ResponseFormat = WebMessageFormat.Xml, UriTemplate = "/Student")]
        void AddStudent(Student student);
        [OperationContract]
        [WebInvoke(Method = "POST", BodyStyle = WebMessageBodyStyle.Bare, RequestFormat = WebMessageFormat.Xml, ResponseFormat = WebMessageFormat.Xml, UriTemplate = "/AddStudentToGroup/{group}/{studentID}/{firstName}/{lastName}")]
        void AddStudentToGroup(string group, string studentID, string firstName, string lastName);
        #endregion

        #region GET
        [OperationContract]
        [WebInvoke(Method = "GET", BodyStyle = WebMessageBodyStyle.Wrapped, ResponseFormat = WebMessageFormat.Xml, UriTemplate = "picture/{width}/{height}")]
        Stream GetImage(string width, string height);
        [OperationContract]
        [WebInvoke(Method = "GET", BodyStyle = WebMessageBodyStyle.Bare, RequestFormat = WebMessageFormat.Xml, ResponseFormat = WebMessageFormat.Xml, UriTemplate = "/Student")]
        List<Student> GetStudentCollection();
        [OperationContract] 
        [WebInvoke(Method = "GET", BodyStyle = WebMessageBodyStyle.Bare, RequestFormat = WebMessageFormat.Xml, ResponseFormat = WebMessageFormat.Xml, UriTemplate = "/Group")]
        List<Group> GetGroups();
        [OperationContract]
        [WebInvoke(Method = "GET", BodyStyle = WebMessageBodyStyle.Bare, RequestFormat = WebMessageFormat.Xml, ResponseFormat = WebMessageFormat.Xml, UriTemplate = "/GetStudentCollectionByGroup/{anything}")]
        List<Group> GetStudentCollectionByGroup(string anything);
        [OperationContract]
        [WebInvoke(Method = "GET", BodyStyle = WebMessageBodyStyle.Bare, RequestFormat = WebMessageFormat.Xml, ResponseFormat = WebMessageFormat.Xml, UriTemplate = "/GetGroupCollectionByStudent/{groupName}")]
        List<Student> GetGroupCollectionByStudent(string groupName);
        #endregion 
    }
    #region Data Contacts
    [DataContract(Name="Student")]
    public class Student
    {
        public Student()
        {
            StudentGroup = new List<Group>();
        }
        [DataMember(Name = "StudentID")]
        public string StudentID { get; set; }
        [DataMember(Name = "FirstName")]
        public string FirstName { get; set; }
        [DataMember(Name = "LastName")]
        public string LastName { get; set; }
        [DataMember(Name = "TimeAdded")]
        public DateTime TimeAdded;
        public string TimeAddedString
        {
            get
            {
                return this.TimeAdded.ToString("dd/MM/yyyy hh:mm:ss");
            }
        }
        public List<Group> StudentGroup { get; set; }
    }
    [DataContract(Name = "Group")]
    public class Group
    {
        public Group() 
        {
            Groupsz = new List<Student>();
        }
        [DataMember(Name = "GroupName")]
        public string GroupName { get; set; }
        public List<Student> Groupsz { get; set; }
    }
    #endregion 

    #region Service work
    [ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)] 
    public class Service : IService
    {
        #region Lists
        List<Student> students = new List<Student>();
        List<Group> Groups = new List<Group>();
        int eCount = 0;
        #endregion 

        #region Do Work
        public void AddStudent(Student student)
        {
            student.StudentID = (++eCount).ToString();
            student.TimeAdded = DateTime.Now;
            students.Add(student);
        }
        public void UpdateStudent(Student student) 
        {
            var findStudent = students.Where(s => s.StudentID == student.StudentID).FirstOrDefault();

            if (findStudent != null)
            {
                ///findStudent values with student values --- like
                findStudent.FirstName = student.FirstName;
                findStudent.LastName = student.LastName;
            }

        }
        public void AddGroup(Group group)
        {
            Groups.Add(group);
        }
        public void removeStudent(string studentID)
        {
            students.RemoveAll(s => s.StudentID == studentID);
            Groups.ForEach(g => g.Groupsz.RemoveAll(gs => gs.StudentID == studentID));
        }

    public void AddStudentToGroup(string group, string studentID, string firstName, string lastName)
    {
        var result = Groups.Where(n => String.Equals(n.GroupName, group)).FirstOrDefault();
        var result1 = students.Where(n => String.Equals(n.StudentID, studentID)).FirstOrDefault();
        if (result != null)
        {
            result.Groupsz.Add(new Student() { StudentID = studentID, FirstName = firstName, LastName = lastName });
        }
        if (result1 != null)
        {
            result1.StudentGroup.Add(new Group() { GroupName = group });
        }

    } 
        public List<Student> GetStudentCollection()
        {
            return students;
        }
        public List<Group> GetGroups()
        {
            return Groups;
        }
        public List<Student> GetGroupCollectionByStudent(string groupName)
        {
            List<Student> student = (from g in students
                                  where
                                      (from t in g.StudentGroup where t.GroupName == groupName select t).Count() > 0
                                  select g).ToList();
            return student;
        }
        public List<Group> GetStudentCollectionByGroup(string anything)
        {

            List<Group> groups = (from g in Groups
                                  where
                                      (from t in g.Groupsz where
                                              string.Equals(t.StudentID, anything, StringComparison.CurrentCultureIgnoreCase)
                                           || string.Equals(t.FirstName, anything, StringComparison.CurrentCultureIgnoreCase)
                                           || string.Equals(t.LastName, anything, StringComparison.CurrentCultureIgnoreCase)
                                       select t).Count() > 0
                                  select g).ToList();
            return groups;
        }

        #endregion
    }
}
    #endregion 
```

# php - PHP将时间（）向上（未来）到下一个5分钟的倍数

> ID：10149792
> 
> 赞同：11
> 
> 时间：2012-04-13T23:59:57.573
> 
> 标签：php, time, rounding

如何将`time()`向上（朝向未来）的结果四舍五入到下一个 5 分钟的倍数？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-04-14T00:18:03.693

```
 $now = time();     
 $next_five = ceil($now/300)*300; 
```

这将为您提供下一轮五分钟（始终大于或等于当前时间）。

根据您的描述，我认为这是您所需要的。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-14T00:03:17.057

尝试：

```
$time = round(time() / 300) * 300; 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-09-29T15:05:32.133

试试这个功能：

```
function blockMinutesRound($hour, $minutes = '5', $format = "H:i") {
   $seconds = strtotime($hour);
   $rounded = round($seconds / ($minutes * 60)) * ($minutes * 60);
   return date($format, $rounded);
}

//call 
 blockMinutesRound('20:11');// return 20:10 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-06-05T20:48:48.977

对于使用[Carbon](https://carbon.nesbot.com/docs/)的人（例如使用 Laravel 的人），这可以帮助：

```
/**
 * 
 * @param \Carbon\Carbon $now
 * @param int $nearestMin
 * @param int $minimumMinutes
 * @return \Carbon\Carbon
 */
public static function getNearestTimeRoundedUpWithMinimum($now, $nearestMin = 30, $minimumMinutes = 8) {
    $nearestSec = $nearestMin * 60;
    $minimumMoment = $now->addMinutes($minimumMinutes);
    $futureTimestamp = ceil($minimumMoment->timestamp / $nearestSec) * $nearestSec; 
    $futureMoment = Carbon::createFromTimestamp($futureTimestamp);
    return $futureMoment->startOfMinute();
} 
```

这些测试断言通过：

```
public function testGetNearestTimeRoundedUpWithMinimum() {
    $this->assertEquals('2018-07-07 14:00:00', TT::getNearestTimeRoundedUpWithMinimum(Carbon::parse('2018-07-06 14:12:59'), 60, 23 * 60 + 10)->format(TT::MYSQL_DATETIME_FORMAT));
    $this->assertEquals('2018-07-06 14:15:00', TT::getNearestTimeRoundedUpWithMinimum(Carbon::parse('2018-07-06 14:12:59'), 15, 1)->format(TT::MYSQL_DATETIME_FORMAT));
    $this->assertEquals('2018-07-06 14:30:00', TT::getNearestTimeRoundedUpWithMinimum(Carbon::parse('2018-07-06 14:12:59'), 30, 10)->format(TT::MYSQL_DATETIME_FORMAT));
    $this->assertEquals('2018-07-06 16:00:00', TT::getNearestTimeRoundedUpWithMinimum(Carbon::parse('2018-07-06 14:52:59'), 60, 50)->format(TT::MYSQL_DATETIME_FORMAT));
    $this->assertEquals(Carbon::parse('tomorrow 15:00:00'), TT::getNearestTimeRoundedUpWithMinimum(Carbon::parse('16:30'), 60, 60 * 22 + 30));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-29T04:55:13.000

对于使用[碳](https://carbon.nesbot.com/docs/)：

```
Carbon::createFromTimestamp(round(time() / 300) * 300) 
```

# windows-phone-7 - WP7 将样式应用于多个按钮

> ID：10149794
> 
> 赞同：1
> 
> 时间：2012-04-14T00:00:12.203
> 
> 标签：windows-phone-7, xaml

我正在尝试将样式应用于我的所有按钮。一旦我将我的样式分配给第二个按钮并尝试运行我的应用程序，我就会收到一个错误：

```
A first chance exception of type 'System.InvalidOperationException' occurred in System.Windows.dll
A first chance exception of type 'MS.Internal.WrappedException' occurred in System.Windows.dll
A first chance exception of type 'MS.Internal.WrappedException' occurred in System.Windows.dll 
```

将我的样式应用到单个按钮，将起作用。

这是我的风格：

```
<phone:PhoneApplicationPage.Resources>
        <Style x:Key="ButtonStyle1" TargetType="Button">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Grid Background="Transparent">
                            <VisualStateManager.VisualStateGroups>
                                <!--Define the states for the common states. The states in a 
                                        VisualStateGroup are mutually exclusive to each other.-->
                                <VisualStateGroup x:Name="CommonStates">
                                    <!--Define the VisualStates in this VistualStateGroup.-->
                                    <VisualState x:Name="Normal"/>
                                    <VisualState x:Name="MouseOver" />
                                    <VisualState x:Name="Pressed">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentContainer">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneBackgroundBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="ButtonBackground">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneForegroundBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ColorAnimation Duration="0" To="White" Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)" Storyboard.TargetName="ButtonBackground" d:IsOptimized="True"/>
                                        </Storyboard>                                        
                                    </VisualState>
                                    <VisualState x:Name="Disabled">
                                        <Storyboard>
                                            <DoubleAnimation Duration="0" Storyboard.TargetName="DisabledVisualElement" Storyboard.TargetProperty="Opacity" To="1"/>
                                        </Storyboard>
                                    </VisualState>
                                    </VisualStateGroup>
                                <!--Define the states for the focus states. The states in a 
                                        VisualStateGroup are mutually exclusive to each other.-->
                                <VisualStateGroup x:Name="FocusStates">
                                    <!--Define the VisualStates in this VistualStateGroup.-->
                                    <VisualState x:Name="Focused" />
                                    <VisualState x:Name="Unfocused" />
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <Border x:Name="ButtonBackground" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="0" Margin="{StaticResource PhoneTouchTargetOverhang}" Background="{TemplateBinding Background}">
                                <ContentControl x:Name="ContentContainer" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Foreground="{TemplateBinding Foreground}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Padding="{TemplateBinding Padding}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                            </Border>
                        </Grid>
                        <!--The parts of the button control will be defined here.-->
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </phone:PhoneApplicationPage.Resources> 
```

这是我的按钮：

```
<Button Height="121" HorizontalAlignment="Left" Margin="14,61,0,0" Name="but1" VerticalAlignment="Top" Width="197" Background="#FF7D0000" BorderBrush="Black" Foreground="Red" BorderThickness="0" Padding="0" Style="{StaticResource ButtonStyle1}" />
<Button Height="121" HorizontalAlignment="Left" Margin="217,61,0,0" Name="but2" VerticalAlignment="Top" Width="200" Background="#FF7D0000" BorderBrush="Black" Foreground="Red" BorderThickness="0" Padding="0" Style="{StaticResource ButtonStyle1}" /> 
```

**解决方案**

我将其更改为反映“ContentContainer”，这是我要在我的样式中修改的对象的名称。

```
<VisualState x:Name="Disabled">
   <Storyboard>
      <DoubleAnimation Duration="0" Storyboard.TargetName="ContentContainer" Storyboard.TargetProperty="Opacity" To="1"/>
   </Storyboard>
</VisualState> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T00:32:47.223

如果它只是上面的代码，它应该可以正常工作，但是如果您将任何按钮设置为禁用（`IsEnabled = false`），它将失败，因为您的样式处于禁用状态，情节提要正在寻找一个名为`DisabledVisualElement`动画的元素，

```
<VisualState x:Name="Disabled"> 
  <Storyboard> 
    <DoubleAnimation Duration="0" Storyboard.TargetName="DisabledVisualElement" Storyboard.TargetProperty="Opacity" To="1"/> 
  </Storyboard> 
</VisualState> 
```

但是，范围内不存在此类元素。

删除此情节提要或添加具有正确名称的元素都可以解决您的问题。

# windows - 是否可以确定哪个键盘发送了按键？

> ID：10149796
> 
> 赞同：2
> 
> 时间：2012-04-14T00:00:46.763
> 
> 标签：windows, winapi

我有一个 Windows 识别为键盘的 Windows Media Center 遥控器。当我使用 Windows Media Center 在一个屏幕上播放视频运行多显示器设置时，遥控器的输入与常规键盘一起被定向到活动窗口。因此，当我在另一个屏幕上做某事时，Windows Media Center 不会响应遥控器。所以我想我会写一个简单的低级键盘钩子来捕获所有键事件，确定哪些按键来自遥控器，并将它们重定向到打开的媒体中心窗口。

唯一的问题是，我似乎在 Windows API 中找不到任何东西。除了编写驱动程序之外，有什么方法可以确定按键的来源吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T03:14:43.123

您可以处理原始输入以处理击键并识别它们来自哪个设备。[这篇文章](http://www.codeproject.com/Articles/17123/Using-Raw-Input-from-C-to-handle-multiple-keyboard)解释了如何。

# javascript - 在 JavaScript 中截断/舍入整数？

> ID：10149806
> 
> 赞同：70
> 
> 时间：2012-04-14T00:02:40.067
> 
> 标签：javascript, decimal, rounding

对于我正在编写的脚本，我需要显示一个四舍五入的数字，而不是小数点或任何超过它的数字。我已经开始将它四舍五入到第三位，但我不确定如何只删除小数点和超过它的所有内容，因为 JavaScript 似乎没有`substr`PHP 那样的功能。

有什么建议吗？

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-04-14T00:04:37.307

如果您有**一个 string**，请将其解析为整数：

```
var num = '20.536';
var result = parseInt(num, 10);  // 20 
```

如果你有**数字**，ECMAScript 6 提供`Math.trunc`了完全一致的截断，已经在 Firefox 24+ 和 Edge 中可用：

```
var num = -2147483649.536;
var result = Math.trunc(num);  // -2147483649 
```

如果你不能依赖它并且总是有一个正数，你当然可以使用`Math.floor`：

```
var num = 20.536;
var result = Math.floor(num);  // 20 
```

最后，如果 [−2147483648, 2147483647] 中有一个数字，则可以使用任何位运算符将其截断为 32 位。`| 0`很常见，`>>> 0`可用于获取无符号 32 位整数：

```
var num = -20.536;
var result = num | 0;  // -20 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-08-11T06:23:17.700

`trunc2`考虑到 JavaScript 如何以科学计数法表示非常小的或非常大的浮点数，Travis Pessetto 的答案以及 mozey 的函数是唯一正确的答案。

例如，`parseInt(-2.2043642353916286e-15)`不会正确解析该输入。`0`它不会返回，而是返回`-2`。

这是正确的（也是最不疯狂的）方法：

```
function truncate(number)
{
    return number > 0
         ? Math.floor(number)
         : Math.ceil(number);
} 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-05-27T19:21:45.980

我将在这里添加我的解决方案。我们可以在值大于 0 时使用 floor，当它们小于零时使用 ceil：

```
function truncateToInt(x)
{
    if(x > 0)
    {
         return Math.floor(x);
    }
    else
    {
         return Math.ceil(x);
    }
 } 
```

然后：

```
y = truncateToInt(2.9999); // results in 2
y = truncateToInt(-3.118); //results in -3 
```

**注意**：这个答案是在`Math.trunc(x)`相当新的时候写的，很多浏览器都不支持。今天，现代浏览器支持`Math.trunc(x)`.

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-07-09T14:38:27.843

将数字转换为字符串并丢弃小数点后的所有内容。

```
trunc = function(n) { return Number(String(n).replace(/\..*/, "")) }

trunc(-1.5) === -1

trunc(1.5) === 1 
```

**编辑 2013-07-10**

正如 minitech 所指出的，再三考虑，字符串方法似乎有点过分。因此，比较此处和其他地方列出的各种方法：

```
function trunc1(n){ return parseInt(n, 10); }
function trunc2(n){ return n - n % 1; }
function trunc3(n) { return Math[n > 0 ? "floor" : "ceil"](n); }
function trunc4(n) { return Number(String(n).replace(/\..*/, "")); }

function getRandomNumber() { return Math.random() * 10; }

function test(func, desc) {
    var t1, t2;
    var ave = 0;
    for (var k = 0; k < 10; k++) {
        t1 = new Date().getTime();
        for (var i = 0; i < 1000000; i++) {
            window[func](getRandomNumber());
        }
        t2 = new Date().getTime();
        ave += t2 - t1;
    }
    console.info(desc + " => " + (ave / 10));
}

test("trunc1", "parseInt");
test("trunc2", "mod");
test("trunc3", "Math");
test("trunc4", "String"); 
```

结果可能因硬件而异，如下所示：

```
parseInt => 258.7
mod      => 246.2
Math     => 243.8
String   => 1373.1 
```

Math.floor / ceil 方法比 parseInt 和 mod 稍快。与其他方法相比，String 的性能确实很差。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-14T00:13:19.803

使用[`Math.floor()`](http://msdn.microsoft.com/en-us/library/sw6w4wz7%28VS.94%29.aspx)：

```
var f = 20.536;
var i = Math.floor(f);  // 20 
```

[http://jsfiddle.net/J4UVV/1/](http://jsfiddle.net/J4UVV/1/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-02-06T06:56:23.437

**Math.trunc()**函数删除所有小数位数。

对于正数，它的行为与 Math.floor() 完全相同：

```
console.log(Math.trunc(89.13349)); // output is 89 
```

对于负数，它的行为与 Math.ceil() 相同：

```
console.log(Math.trunc(-89.13349)); //output is -89 
```

# objective-c - 为什么 NSURLConnection 无法到达后端？

> ID：10149811
> 
> 赞同：13
> 
> 时间：2012-04-14T00:03:30.303
> 
> 标签：objective-c, ios

我正在开发一个带有自定义通信层的应用程序。我的助手类依赖 NSURLConnection 来处理与后端的通信。

我遇到了一个随机错误，其中发送了请求，但应用程序没有从我们的服务器得到响应。另外， NSURLConnection 的超时永远不会被触发。

此外，当应用程序进入此状态时，Mixpanel（一个跟踪器框架）会记录连接错误以及 TestFlight。

如果您终止该应用程序并启动 Safari，您仍然可以访问 google.com。

目前，我们的应用程序不支持多任务处理。然而，我们发现 TestFlight 正在强制应用程序“不终止”。

是否有可能由于 TF 库的这种副作用，应用程序进入不一致的状态......其中任何传出连接都失败了？

有没有人遇到过这样的问题？

提前致谢！！

...

作为旁注，我想补充一点，后端已经过检查（托管在亚马逊上），一切似乎都很好。

=======

编辑：

TestFlight 研究员刚刚确认此错误是由他们的库引起的（我在 TF 1.0 beta 版本中遇到了它）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T00:29:14.593

TestFlight SDK（1.0 和更早版本）存在一个已确认的错误，导致 NSURLConnection 永远不会返回任何异步回调（成功/超时错误）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:45:12.253

有关此问题的更多信息：[https](https://github.com/AFNetworking/AFNetworking/issues/307) ://github.com/AFNetworking/AFNetworking/issues/307，http : [//blog.applecorelabs.com/2012/05/29/bug-llvm-optimizer-asihttprequest-arc/](http://blog.applecorelabs.com/2012/05/29/bug-llvm-optimizer-asihttprequest-arc/)

# java - 使用 Ehcache 缓存来自 Amazon S3 的对象

> ID：10149813
> 
> 赞同：2
> 
> 时间：2012-04-14T00:03:53.627
> 
> 标签：java, amazon-s3, ehcache

我在 Amazon S3 上有大量对象，其中只有一小部分被定期访问。因此，我真的很想使用分布式缓存系统，比如 Ehcache。（注意，我会使用 Cloudfront，但需要从 API 服务器而不是最终用户访问数据，并且上次我检查时 Cloudfront 不支持身份验证。）

谁能告诉我这是否可行、实用，或者是否存在使用 Ehcache 缓存来自 Amazon S3 的对象的库或示例？

当然，我的应用服务器是用 Java 实现的，并且运行在 Linux 环境中。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T14:45:57.363

有趣的想法 - 但是，在最终深入研究之前，我想强调自 2009 年 9 月以来[Amazon CloudFront](http://aws.amazon.com/cloudfront/)中提供了身份验证，尽管可能不像您想象的那样，即您可以使用[签名 URL 来提供私有内容](http://docs.amazonwebservices.com/AmazonCloudFront/latest/DeveloperGuide/PrivateContent.html)：

> 您可以使用静态签名 URL 或动态签名 URL 分发私有内容。在向已知的最终用户分发私有内容时，您使用静态签名 URL [...]。在这种情况下，您可以创建一个签名 URL 并根据需要将该 URL 提供给您的最终用户。您使用动态签名 URL 将内容即时分发给最终用户以用于有限目的 [...] 在这种情况下，您的应用程序会生成签名 URL。

[这在私有内容概述中](http://docs.amazonwebservices.com/AmazonCloudFront/latest/DeveloperGuide/PrivateContentOverview.html)进一步详细说明：

> CloudFront 私有分配基于指定以下任何或所有约束的策略声明：
> 
> *   指定签名 URL 有效的日期和时间的开始日期
> *   签名 URL 无效的结束日期和时间
> *   **可以使用签名 URL 的 IP 地址或 IP 地址范围**
> 
> *[强调我的]*

这种方法是否适用于您的用例取决于您的解决方案的架构，只要您需要通过某种方式生成这些签名的 URL 并依次使用来自 API 服务器的那些；鉴于您的“最终用户”是 API 服务器，您可能会按照建议预先生成静态 URL，另一方面，最明显的方法可能是在 API 服务器本身中动态执行签名 URL 生成过程并缓存生成的*URL<- > 为最终重用而签名的 URL*映射（即确实通过 Memcached 或 Ehcache）。

例如，这种身份验证方案显然比简单的 HTTP 身份验证更麻烦，另一方面，它也提供了更大的灵活性，例如，参见教程[Restricting Access to Files in a CloudFront Distribution Based on Geographic Location (Geoblocking)](http://docs.amazonwebservices.com/AmazonCloudFront/latest/DeveloperGuide/RestrictingCFDistributionsByLocation.html)以获得高级用例，这也在 AWS 博客上的访客帖子中进行了总结[：使用 Amazon CloudFront 对内容进行地理封锁。](http://aws.typepad.com/aws/2012/01/guest-post-geo-blocking-content-with-amazon-cloudfront.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T22:22:47.063

我最终使用[JetS3t](http://www.jets3t.org/)从 S3 读取文件并将它们存储在分布式 ehcache 集群中。到目前为止，这种方法效果很好，尽管我发现 JetS3t 创建了[大量](https://stackoverflow.com/questions/10391267/jets3t-fills-up-my-tmp-directory-how-should-i-remove-the-old-files)必须处理的临时文件。

# c - 返回字符

> ID：10149816
> 
> 赞同：1
> 
> 时间：2012-04-14T00:04:18.540
> 
> 标签：c, getchar

*这是来自Ritchie & Kernighan 的 The C Programming Language 的*一些示例代码。

```
int c;
        while((c=getchar())!=EOF) {
            putchar(c);
        } 
```

请注意， putchar 指的是*int*类型的变量。为什么可以使用此代码返回和显示字符和整数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T00:06:34.390

An`int`通常由 4 个字节表示，而 a`char`实际上只是 1 个字节的数据。`int`您可以轻松地在返回的单曲中存储完整的字符以及更多内容`getchar()`。当一个 int 被传递给`putchar(int)`它时，它只是在显示它之前去掉额外的空间。这种技术对于传递`EOF`实际上根本不是 a`char`而是`int`表示文件结束的 an 非常有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T00:32:32.570

char 类型只不过是一个整数，在大多数情况下只是一个 8 位字节。int 类型是一个整数，它通常更宽，因此可以保留 char 可以保留的所有可能值。为了使检查工作，它必须保持`sizeof(int) > sizeof(char)`. 几乎总是如此。但如果我记得很清楚，据说该标准并没有强制要求这样做；这意味着检查已读取的 EOF 是否为真正的文件结尾的唯一可移植且安全的方法是检查`feof(FILE *)`. （例如，如果在您的系统上 CHAR_BIT 为 16，则 sizeof(char) == 1 根据定义，但 sizeof(int) 也可能为 1）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T00:33:46.113

`getchar()`返回`int`，以便它可以*可靠地*保存该`EOF`值（定义为任何负整数，在大多数实现中为-1）。根据`char`实现，类型可以是有符号的或无符号的。如果它是有符号的，那么它*可能*能够保存在类型范围内`EOF`提供的值，如果它是无符号的，那么在转换为类型时它可能与实际的字符值无法区分。`EOF``signed char``EOF``unsigned char`

# assembly - 我无法让这个加法子例程工作

> ID：10149821
> 
> 赞同：3
> 
> 时间：2012-04-14T00:05:26.543
> 
> 标签：assembly, subroutine, addition, 68000

我正在用 Easy68k 为我的汇编语言类编写一个附加程序，但我一直遇到同样的问题。每当我运行该程序时，它允许我输入最多 10 个数字（分配给我的数组的大小），然后它输出消息说它正在计算，但我只是得到一个无休止的 y 与变音符号的打印输出。您可以立即看到我的程序导致它执行此操作的任何问题？

我已经搜索了子例程的语法，因为我很肯定那是我做错了，但我找不到任何东西。

```
ORG $2000
ARRAY   DS.W    10
ZDONE       DC.W    'Enter values. Zero when done.'
FULL        DC.W    'That is all the input allowed. Calculating sum now...'
OERROR      DC.W    'The values you entered caused an overflow condition.'
REPEAT      DC.W    'Do you want to repeat? [0=No, 1=Yes].'

START       ORG     $2800

MAIN    LEA         ZDONE,A1
        MOVE.B      #14,D0          ;
        TRAP        #15
        LEA         ARRAY,A0

        MOVE.B      #0,D3
INPUT   MOVE.B      #4,D0
        TRAP        #15
        MOVE.W      D1,(A0)+
        BEQ         SUB
        ADD.B       #1,D3
        CMPA        #$2012,A0
        BNE         INPUT
        LEA         FULL,A1
        MOVE.B      #14,D0           ; Outputs the FULL string
        TRAP        #15

SUB     SUB.W       A0,A0
        BSR         SUM              ; Begins to calculate sum

        CMP         #1,D0
        BNE         NoV
        LEA         OERROR,A1
        MOVE.B      #14,D0
        TRAP        #15
        BRA         AGAIN

NoV     LEA         $D1,A1
        MOVE.B      #14,D0
        TRAP        #15

AGAIN   LEA         REPEAT,A1
        MOVE.B      #14,D0
        TRAP        #15
        MOVE.B      #4,D0
        TRAP        #15
        MOVE.B      #1,D0
        CMP.B       D0,D1
        BEQ         START
        STOP        #$3800

        ORG         $3800        
SUM     LEA         ARRAY,A0
        ADD.W       #$A0,D1
        BVC         NoV
        SUB.B       #1,D3
        BNE         SUM
        MOVE.B      #1,D0
        BRA         RETURN
        CLR.B       D0
RETURN  RTS
        END         START 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T00:26:47.257

ÿ的洪水来自这里：

```
NoV     LEA         $D1,A1
        MOVE.B      #14,D0
        TRAP        #15 
```

您正在将0xD1的*立即值加载到 A1 中。*这就是 $ 的用途：它意味着立即寻址。调试器在这里很有用：如果您将程序运行到 MOVE.B 行，您将看到 A1 的值为 0x000000D1。这是使用 TRAP 打印的字符串的地址，对吗？0x000000D1 的内存中有什么？这是未定义的；在这种情况下，模拟器将内存初始化为 0xFF，对应于 ÿ 字符。

这可能是错误的：

```
SUB     SUB.W       A0,A0 
```

您从 A0 中减去 A0，实际上将 A0 设置为 0。

我怀疑这也是错误的：

```
SUM     LEA         ARRAY,A0
        ADD.W       #$A0,D1 
```

ADD 将*立即值*0xA0 添加到寄存器 D1。您可能想要直接添加：

```
 ADD.W       A0,D1 
```

* * *

还有几件事：

您在 SUM 中的每个循环开始时将 ARRAY 加载到 A0 中。您可能应该在循环之前执行此操作：

```
SUB     LEA         ARRAY,A0
        BSR         SUM 
```

在 SUM 内部，忽略我所说的并使用间接寻址。这将从数组中获取实际值并将其添加到累加器中（我假设这是 D1）：

```
SUM     ADD.W       (A0)+,D1 
```

NoV 看起来像是在显示累加器的当前值，对吧？您正在使用它的条件分支：好的，您可能只希望它在完成求和后显示。但 BVC 实际上并不是一个子分支！它不会保存返回指针。相反，我会将其移至计数器达到 0 后执行的 SUM 部分，并且我将使用 BSR：

```
SUM     ADD.W       (A0)+,D1
        SUB.B       #1,D3
        BNE         SUM
        BSR         NoV
        MOVE.B      #1,D0
        BRA         RETURN
        CLR.B       D0
RETURN  RTS 
```

请注意，您仍然会得到溢出的东西。我不明白你在做什么，所以我会让你弄清楚。另请注意，由于您使用无条件分支返回，CLR 将永远不会被执行，因此 SUM 不可能返回 0。

在此更改之后，重要的是通过返回 RTS 将 NoV 修改为像子例程一样。请注意，有一个 TRAP 值用于将 D1 的整数值显示为字符串，这可能是您想要的：

```
NoV     MOVE.B      #3,D0
        TRAP        #15
        RTS 
```

此时我可以让它添加数字并显示结果，但它总是显示溢出的东西。修复您的子程序，然后重新评估程序的逻辑流程。

# spring - 寻找基于轻量级 spring 3.x 的 CMS/博客引擎

> ID：10149828
> 
> 赞同：5
> 
> 时间：2012-04-14T00:06:02.610
> 
> 标签：spring, spring-mvc, blogs

我想维护一个在 Java 上运行的博客，最好是轻量级的。因为我经常使用 Spring，所以我认为拥有一个基于 Spring 3.x 的 CMS/博客引擎（而不是我自己的）会很好。

我会很感激你的意见。我可以选择小众项目，只要它们具有良好的基本结构并希望有所贡献

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:44:24.760

找了几个基于Spring的CMS

[玉兰](http://www.magnolia-cms.com/),[海象](http://walrus.lt/), [Dotcms](http://dotcms.com/)

对于 Spring 3.x，请使用 Magnolia CMS。[您可以在这里](http://www.developer.com/java/web/spring-framework-and-magnolia-cms-creating-complex-java-based-websites.html)快速了解这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:23:44.563

dotCMS 具有 Spring 3.x 支持和基于 OSGI 的 Spring 支持，允许您即时部署和取消部署 spring webapps，而无需重新启动服务器。看：

[http://dotcms.com/docs/latest/DynamicPluginsSpring](http://dotcms.com/docs/latest/DynamicPluginsSpring)

# java - Java web Start 应用程序不使用 jnlp 文件中指定的 JRE

> ID：10149829
> 
> 赞同：3
> 
> 时间：2012-04-14T00:06:04.577
> 
> 标签：java, jnlp, java-web-start

# 环境：

## 操作系统：Windows Vista 6.0 (SP2)

安装的 Java 版本（在控制面板中检查）：

*   jre1.6.0，Java 更新 2，
*   Java 更新 3，
*   Java 更新 5，
*   Java 更新 31

（在C:/Program Files/Java相关文件夹中找到：jre1.6.0、jre1.6.0_02、jre1.6.0_03、jre1.6.0_05、jre6）

```
java -version response:
Java (TM) SE Runtime Environment (build 1.6.0_31-b05) 
```

## 问题：

根据[http://docs.oracle.com/javase/1.5.0/docs/guide/javaws/developersguide/syntax.html](http://docs.oracle.com/javase/1.5.0/docs/guide/javaws/developersguide/syntax.html)和[http://webstartfaq.com/#49](http://webstartfaq.com/#49)我可以指定要运行的 JRE 版本。我想使用 JRE 1.6.0_31（Java 1.6，更新 31）。为此，我需要设置

```
j2se version="1.6.0_31+" href="http://java.sun.com/products/autodl/j2se" 
```

在 JNLP 文件中。我这样做了，但 Java web start 应用程序使用的 JRE 版本不正确。

## 重现步骤：

使用提到的设置启动“C:/Program Files/Java/jre6/javaws.exe my_jnlp_file”

### 预期结果：

该过程应从：Java Web Start 版本 1.6.0_31 和 JRE 版本 1.6.0_31 开始。

### 实际结果：

该过程开始于：Java Web Start 版本 1.6.0_31 和 JRE 版本 1.6.0-oem-b104 Java HotSpot(TM) 客户端。

我认为这没有任何意义。将不胜感激一些想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T00:31:38.230

问题是我试图更改 jnlp 文件并在本地启动我的应用程序。但它一直从服务器加载新设置。一旦我更改了服务器端的 jnlp 设置，它就开始正常工作。

# macos - Emacs：如何指定 Emacs 24 的“向下滚动行”的 F3 键？

> ID：10149836
> 
> 赞同：1
> 
> 时间：2012-04-14T00:07:02.423
> 
> 标签：macos, emacs

我在 Emacs 24 (Mac OS X 10.7.3) 中`scroll-down-line`找到了这些功能。`scroll-up-line`我可以执行`M-x scroll-down-line`，但我没有设法将它绑定到 F3 键。

我试过了：

```
(global-set-key [f3] 'scroll-down-line)
(global-set-key (kbd "<f3>") 'scroll-down-line) 
```

如何正确指定 F3 键以使上述功能起作用？

注意：我已将 Mac OS X 设置为接受 F 键作为正确的 F 键，因此我不必按“fn-F3”即可获得“F3”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T02:06:19.570

您将其指定为

```
(global-set-key [f3] 'scroll-down-line) 
```

其他事情正在发生。`C-h k f3`运行上述行后运行时看到什么？

# windows - 作为 Win7 命令行批处理文件的一部分，一次移动一个文件

> ID：10149837
> 
> 赞同：0
> 
> 时间：2012-04-14T00:07:05.837
> 
> 标签：windows, file, command-line, batch-file, move

我需要将文件从一个文件夹移动到另一个文件夹 - 但一次一个，而不是一次全部 - 以便在继续处理下一个文件之前可以使用命令行工具单独处理每个文件。我需要按名称按顺序移动的文件。

我已经弄清楚了批处理文件的其余部分（处理每个文件的部分），但是如果我不必自己移动每个文件，并且可以自动化整个过程，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T12:14:30.390

代替

```
move \from\*.* \to 
```

阅读`HELP FOR`并尝试这个 bat 文件

```
@echo off
for %%a in (d:\from\*.*) do (
  echo move %%a d:\to
  echo command-line-tool d:\to\%%~xna
) 
```

从不同的位置和一些极端情况下尝试它，`from`不`to`存在，空`from`，`to`非空等），当绝对满意时删除`echo`命令。

# c++ - C++ 数组和 make_unique

> ID：10149840
> 
> 赞同：13
> 
> 时间：2012-04-14T00:07:51.813
> 
> 标签：c++, arrays, c++11, unique-ptr, raii

[作为这篇](https://stackoverflow.com/questions/7038357/make-unique-and-perfect-forwarding)文章的后续，我想知道它的实现如何`make_unique`分配函数临时缓冲区数组，例如以下代码。

```
f()
{
  auto buf = new int[n]; // temporary buffer
  // use buf ...
  delete [] buf;
} 
```

这可以用一些调用来代替，`make_unique`然后会使用 delete 的`[]`-version 吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-14T01:14:03.337

这是另一个解决方案（除了迈克的）：

```
#include <type_traits>
#include <utility>
#include <memory>

template <class T, class ...Args>
typename std::enable_if
<
    !std::is_array<T>::value,
    std::unique_ptr<T>
>::type
make_unique(Args&& ...args)
{
    return std::unique_ptr<T>(new T(std::forward<Args>(args)...));
}

template <class T>
typename std::enable_if
<
    std::is_array<T>::value,
    std::unique_ptr<T>
>::type
make_unique(std::size_t n)
{
    typedef typename std::remove_extent<T>::type RT;
    return std::unique_ptr<T>(new RT[n]);
}

int main()
{
    auto p1 = make_unique<int>(3);
    auto p2 = make_unique<int[]>(3);
} 
```

笔记：

1.  new T[n] 应该只是默认构造 n 个 T。

所以 make_unique(n) 应该只是默认构造 n 个 T。

1.  此类问题导致 make_unique 未在 C++11 中提出。另一个问题是：我们是否处理自定义删除器？

这些不是无法回答的问题。但它们是尚未完全回答的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T01:03:54.827

我让它使用以下代码：

```
#include <memory>
#include <utility>

namespace Aux {
    template<typename Ty>
    struct MakeUnique {
        template<typename ...Args>
        static std::unique_ptr<Ty> make(Args &&...args) {
            return std::unique_ptr<Ty>(new Ty(std::forward<Args>(args)...));
        }
    };

    template<typename Ty>
    struct MakeUnique<Ty []> {
        template<typename ...Args>
        static std::unique_ptr<Ty []> make(Args &&...args) {
            return std::unique_ptr<Ty []>(new Ty[sizeof...(args)]{std::forward<Args>(args)...});
        }
    };
}

template<typename Ty, typename ...Args>
std::unique_ptr<Ty> makeUnique(Args &&...args) {
    return Aux::MakeUnique<Ty>::make(std::forward<Args>(args)...);
} 
```

# java - Slick2d 形状包含另一个形状

> ID：10149842
> 
> 赞同：0
> 
> 时间：2012-04-14T00:08:18.993
> 
> 标签：java, slick2d

我正在玩[Slick 2d](http://slick.cokeandcode.com/) Java 游戏引擎。我正在尝试编写一些渲染逻辑，如果一个圆圈在一个正方形内，则它是绿色的。否则它是红色的。您可以在这张图片中看到我想要实现的目标：

![](../Images/87ef367e11c47b2ade592299e504960d.png)

我的问题是，当我使用 Slick2d 的[Shape.contains(Shape)](http://slick.cokeandcode.com/javadoc/org/newdawn/slick/geom/Shape.html#contains%28org.newdawn.slick.geom.Shape%29)方法时，无论圆圈是否在正方形中，它总是返回 false。每当我使用 Java AWT [Rectangle.contains(Rectangle)](http://docs.oracle.com/javase/6/docs/api/java/awt/Rectangle.html#contains%28java.awt.Rectangle%29)方法时，它都会正确返回 true。

这是我正在使用的一些（垃圾）代码。如果这会有所不同，我会将坐标存储为浮点数（因此对于 Java AWT 的矩形将转换为 int）。

> ```
> public boolean contains(final Entity entity) {
>     Rectangle me = new Rectangle(x, y, width, height);
>     Rectangle them = new Rectangle(entity.getX(), entity.getY(), entity.getWidth(), entity.getHeight());
>     java.awt.Rectangle awtMe = new java.awt.Rectangle((int) x, (int) y, (int) width, (int) height);
>     java.awt.Rectangle awtThem = new java.awt.Rectangle((int) entity.getX(), (int) entity.getY(), (int) entity.getWidth(), (int) entity.getHeight());
>     return awtMe.contains(awtThem); // returns true correctly
>     //return me.contains(them); // never returns true
> } 
> ```

我使用的是 Slick 版本 274。在游戏开发方面我非常绝望，所以这让我感到困惑。我曾尝试查看[Shape.contains 的 Slick 源代码，](https://bitbucket.org/kevglass/slick/src/9d7443ec33af/trunk/Slick/src/org/newdawn/slick/geom/Shape.java)但在这个阶段它有点超出我的想象。任何关于为什么会发生这种情况的建议将不胜感激。

**编辑**

好的，所以当我使用 Slick2d 方法时，如下所示......

> 返回我。相交（他们）|| 我.包含（他们）；

...它按预期工作。我仍然不确定为什么 contains 不能单独工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:50:28.973

有同样的问题，有点。我看到这里有一个问题：[https ://bitbucket.org/kevglass/slick/issue/15/circle1intersects-circle2-returns-true](https://bitbucket.org/kevglass/slick/issue/15/circle1intersects-circle2-returns-true)

# java - 在编辑器中创建智能感知 - 如何？提示？

> ID：10149844
> 
> 赞同：1
> 
> 时间：2012-04-14T00:08:37.770
> 
> 标签：java, grails, intellisense, code-completion

我需要创建一个智能地址编辑器。我想添加类似智能感知的东西。

在我的国家哥伦比亚，地址通常有“Calle（街道）”、“Carrera”、“Avenida（Avenue）”、“Conjunto（Set）”、“Interior”、“Transversal”等词以及名称。这个想法是使用户能够按照标准输入地址。标准有好几种，但一般都是缩写：CL、CR、AV、CJ、IN、TV等。

我发现了这篇关于这个主题的有趣文章：

[http://wiki.codeblocks.org/index.php?title=Code_Completion_Design](http://wiki.codeblocks.org/index.php?title=Code_Completion_Design)

但它是用 C 语言编写的，我认为它不需要如此复杂。就我而言，编辑应该检测和翻译标准的只有大约 60 个特殊词。没有参数、包等，比较简单。

我还认为 API 或框架也可以在其他环境中有许多应用程序或用途。

有人知道 Java 或 Grails 中的一些代码吗？一个API？你能给我一些建议或想法吗？非常感谢您提前。

编辑：我刚刚找到了另一个承诺很多的教程：http: [//platform.netbeans.org/tutorials/nbm-code-completion.html](http://platform.netbeans.org/tutorials/nbm-code-completion.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T05:46:07.887

不太确定在服务器端执行此操作会获得什么。

我会查看一些 javascript 自动完成功能（例如 jQuery UI 的[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)）来尝试在客户端执行此操作。您必须对其进行调整，使其不会替换整个字符串，但这些想法非常相似。

# cakephp-2.1 - 将来自两个相关模型的字段合并到显示字段 Cake PHP 2.0

> ID：10149848
> 
> 赞同：2
> 
> 时间：2012-04-14T00:09:08.600
> 
> 标签：cakephp-2.1

好吧，我彻底被难住了。我正在构建一个轻量级应用程序来帮助我的一个朋友处理他的业务。我不会详细介绍，但对于一些背景，他从几个品牌中获取组件并用这些组件构建一个小部件。

由于每个小部件都有多个组件，并且其中几个不同的组件选项由同一品牌制造，因此我想将品牌与组件分开，以便您可以轻松地按品牌查看产品。

我有以下表格

*   品牌
*   成分
*   小部件

品牌包含“id”和“名称”组件包含“id”“模型”“brand_id”小部件包含“id”“compoennt_id”

品牌的显示字段是“名称” 组件的显示字段是“型号”

而这里的问题是，添加新产品时，蛋糕显然只会在表格中显示“模型”。我可以创建一个虚拟显示字段来显示以结合“brand_id”和“model”，但这并不能真正解决用户不知道该模型来自哪个品牌的问题。

看似懒惰的解决方案：一起删除品牌表并将该信息存储在组件表中。

有没有办法以不同的方式做到这一点，以便在添加新小部件时的表单中，他们可以在下拉框中看到“品牌模型”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T00:10:35.127

我解决了一个类似的问题，但对我来说，有问题的模型没有有用的数据，我需要从其他两个相关模型中获取名称。我对 CakePHP 很陌生，所以我不能保证这个解决方案有多“合适”，它的扩展性如何等等......但它似乎有效。我也在 CakePHP 1.3 中使用它，所以我的解决方案甚至可能不适用于你。

无论如何，这是我添加到模型中的内容：

```
 function __construct($id = false, $table = null, $ds = null) {
            parent::__construct($id, $table, $ds);
            $list = parent::find('all', array('contain' => array(
                    'OtherModelA.name', 'OtherModelB.name')));
            if( !empty( $list) ) { //just in case there are no results
                    $this->virtualFields['name'] = sprintf("'%s - %s'",$list[0]['ProductionCompany']['name'],$list[0]['Musical']['name']);
                    $this->displayField = 'name';
            }
    } 
```

编辑：当数据库完全为空时，我注意到一些错误，所以我添加了一个条件并将 displayField 移动到构造函数中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T16:51:55.103

我昨天花了太多时间研究同样的事情。

我认为你可以做的是在你的小部件模型中设置一个虚拟显示字段[，它会在 book.cakephp.com 的这个部分的限制虚拟字段限制部分中](http://book.cakephp.org/2.0/en/models/virtual-fields.html#limitations-of-virtualfields)建议执行类似的操作：

```
 $this->virtualFields['cool_display_name'] = 
        sprintf('CONCAT(%s.name, " - ", %s.model)', $this->Brands->alias, $this-  >Components->alias); 
```

但是：除非您的“查找”功能在进行查询时收集到足够的数据，否则这将不起作用。find('list')，这可能是您对下拉列表的要求，它的默认递归设置为 -1，因此它不会向下遍历来获取它。我最终覆盖了在我的情况下是您的 Widget 模型的 find()，例如：

```
 public function find($type = 'first', $query = array()) {
    $return = array();
    switch ($type) {
        case 'list': // having to deal with a virtual field, seems like the least-messy workaround right now.
            $query['contain'] = 'User.full_name';
            $results = parent::find('all', $query);
            foreach($results as $k => $r) {
                $return[$r[$this->alias]['id']] = $r['User']['full_name'];
            }
            break;
        default:
            $return = parent::find($type, $query);
            break;
    }
    return $return;
} 
```

我在那里所做的是手动构建元素列表框所期望的数组，就像： `array( 'id' => 'display text')` 你还会在那里看到我使用了 cakephp 的包含功能，所以不是*所有*的数据都被返回，而只是我需要的为了提供所有的虚拟场数据。

# python - Python 在对包含 unicode 字符串的列表调用 remove() 时给出 UnicodeWarning

> ID：10149850
> 
> 赞同：2
> 
> 时间：2012-04-14T00:09:20.797
> 
> 标签：python, string, list, unicode

我有两个包含 unicode 字符串的列表。我正在尝试从也出现在最近歌曲中的可用歌曲中删除所有元素。

以下代码导致了问题（为调试而注释掉的异常子句）：

```
for x in recentsongs:
    #try:
        availablesongs.remove(x)
    #except ValueError:
    #   pass 
```

当列表包含纯 ASCII 字符串时，此代码可以正常工作，但是当引入其他语言的字符时，它会失败：

```
UnicodeWarning: Unicode equal comparison failed to convert both arguments to Unicode - interpreting them as being unequal
  availablesongs.remove(x)
ValueError: list.remove(x): x not in list 
```

错误来自 remove() 函数本身，这让我很难过。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T07:00:40.443

我会做什么：

```
list(set(availablesongs)-set(recentsongs)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T04:36:34.650

os.listdir() 导致了我的一些问题，因为它有时会返回 unicode 字符串，有时不会。函数[to_unicode_or_bust](https://stackoverflow.com/questions/10149850/python-giving-unicodewarning-when-calling-remove-on-a-list-containing-unicode#comment13016466_10149850)用于修复其余部分。

# wcf - 优化 WCF 调用

> ID：10149851
> 
> 赞同：0
> 
> 时间：2012-04-14T00:09:29.330
> 
> 标签：wcf

我有一个数据库调用，它给了我 40 列和 75000 行，我正在使用 WCF 服务将数据获取到客户端，我的方法将此对象返回给客户端，然后在获取数据并放入一个对象以发送到前端至少需要 5 秒。我该如何优化这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T15:47:45.793

听起来您正在将整个数据库下载到客户端。

最好的优化是只将信息下载到您真正需要下载的客户端，直到需要时才下载。

*   一个人不会浏览 75000 条记录。即使他们这样做了，您也可以使用分页。
*   如果客户端使用这些数据进行计算，那么这些计算应该在服务器上完成。

# real-time - 如果仅将其视为纯文本，操作转换是否适用于 HTML 等结构化文档？

> ID：10149861
> 
> 赞同：19
> 
> 时间：2012-04-14T00:12:04.950
> 
> 标签：real-time, distributed-computing, google-wave, real-time-systems, operational-transform

Google Wave 协议的常见问题解答说 [HTML]“没有理想的属性”并且“HTML 使 OT（操作转换）即使不是不可能也很困难”[1]。为什么会这样？如果 HTML 被简单地视为纯文本然后应用 OT 会出现什么问题？

1.  [http://www.waveprotocol.org/faq#TOC-What-s-the-XML-schema-for-waves-Why](http://www.waveprotocol.org/faq#TOC-What-s-the-XML-schema-for-waves-Why)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-16T08:28:03.343

我在这里假设您了解 OT 的基础知识。以纯文本形式在 HTML 上进行 OT 的主要问题是合并 html 标签。举个简单的例子，假设我们有一个文档如下：

```
Hello world 
```

Alice 然后决定世界应该是粗体：

```
Hello <b>world</b> 
```

这可以用 OT 中的双插入操作来表示，示意性地表示：

```
Edit A: Keep 6 : Insert "<b>" : Keep 5 : Insert "</b>" 
```

如果 Bob 在看到 Alice 的编辑之前决定“世界”应该是斜体，他将添加操作

```
Edit B: Keep 6 : Insert "<i>" : Keep 5 : Insert "</i>" 
```

如果服务器在 Alice 之后收到 Bob 的编辑，则需要将 B 与 A 转换为 B'。

Keep 语句通过转换保持不变，但 Insert "" 转换为 Insert "" 可以成为 Keep 3 : Insert "" 或 Insert "" : Keep 3。通常服务器将配置为在第一次编辑之后放置稍后的编辑。

```
Edit B': Keep 6 : Keep 3 : Insert "<i>" : Keep 5 : Keep 3 : Insert "</i>" 
```

这里问题变得很明显。将 A 然后 B' 应用于原始字符串会给出无效的 html：

```
Hello <b><i>world</b></i> 
```

理论上，这可以通过改变前后插入来解决，但是对于更复杂的示例，这会变得很麻烦，可能涉及对每个转换的完整文档扫描。

正如另一个答案所指出的，使用带外注释+纯文本可以避免这种混乱。到目前为止，我只在学术论文中看到的另一种方法是将 XML 结构视为具有 OT 操作的树，用于添加、删除节点，例如：

[http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.100.74](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.100.74)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-20T00:08:39.600

我没有完整的答案，但我有兴趣看到在使现有开源操作转换库与富文本一起工作方面所做的更多工作，所以我将贡献我所知道的。

HTML 和 Wave 模式之间的重要区别似乎在于标记文本格式的方式：HTML 的嵌套标签层次结构与 Wave XML 范围的带外注释（在文档的页脚中）。带外注释可能是标记文本格式的一种更自然的方式，因为它们允许重叠（非嵌套）格式。它允许这样的事情（在伪标记中），这不是使用嵌套表示的有效 XML：

`(b) This is bold (i) while this range is both bold and italic (/b) and this last bit is just italic (/i)`

相关，这里是[ShareJS](http://sharejs.org/)项目中的[相关问题。](https://github.com/josephg/ShareJS/issues/1)也许他们可以通过采用部分 Wave XML 模式来实现富文本支持。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-25T01:06:29.093

[OT中](http://dl.acm.org/citation.cfm?id=587088)有一些方法支持 SGML（XML 的超集），但没有实现。因此，这并非不可能！不过，我同意，OT 并不是启用 XML 的最佳方法。这是因为 OT 是为线性数据结构设计的。但是 HTML/XML 要复杂得多：它具有属性，并且像树一样构建。它是一棵树的事实是可以解决的，但是 OT 不支持属性（实现为有序关联数组）。仅仅是因为 OT（目前）不支持关联数组。上面的方法实际上建议将属性视为字符串：例如“id='myid' value='mystuff'” 但是当一个用户删除所有属性时，您可以轻松破坏“attributes-string”的整个语法，并且另一个在“mystuff”之后直接插入一个“字符。`<div ">`，这是无效的语法。

也许这会让你感兴趣：

CEFX 是一个旨在支持 XML 的项目——据我所知，它已经死了。但它使用了 OT 方法。由于某种原因，无法编辑字符串 - 只有 xml 元素。

Google 的 Drive SDK 支持类似图形的数据结构。然而，它是专有的，没有人知道它是如何工作的。

我正在开发一个支持任意数据结构的框架。目前支持 Text、Json、XML 和 HTML。它有不同的方法：检查一下：[Yatta！](https://github.com/DadaMonad/Yatta)

顺便说一句：Wave 协议和 Eric Drechsel 所描述的内容在 OT 中被称为注释。它通常用于支持富文本。

# hash - 二进制散列 - 它是什么？

> ID：10149862
> 
> 赞同：10
> 
> 时间：2012-04-14T00:12:28.783
> 
> 标签：hash

我试图了解二进制散列是什么。我的理解是，你将你的信息分成四个部分，D1-D4，然后你分别拥有这些部分并获得 H1-H4。然后散列 H1+H2 和 H3+H4 以创建 H5 和 H6。然后对 H5 和 H6 进行哈希处理以生成最终哈希值 H。这是否正确？如果没有请告诉我哪里出错了，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-13T03:45:46.357

看看这个描述 CRC32 的页面 -[古老的维基百科](http://en.wikipedia.org/wiki/CRC32)

这可能是最简单的散列算法（当然不是最好的！），但它应该让您大致了解散列是如何工作的。

所有其他散列算法基本上做同样的事情，但算法要么更难逆转（sha256 等），要么给出更均匀的结果分布和更小的冲突可能性（perlhash 等）。

哪个最好取决于您想要哈希的目的：

*   证明文件未被篡改 --> sha256/512。
*   存储要保密的密码或其他值 --> sha256/512
*   从字符串中获取数组或数据库记录的数字键 --> perlhash 或类似的。
*   快速混淆或屏蔽帐号 --> crc32

这是一篇很好的文章，描述了 perl 编程语言[bob burtle 的哈希使用的哈希函数](http://burtleburtle.net/bob/hash/doobs.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-13T01:46:19.907

二进制散列算法有很多“md5”、“sha256”、“sha512”、“haval160”等。

这是MD5算法的描述。这个伪代码及其完整的 c 实现可以在[http://en.wikipedia.org/wiki/MD5](http://en.wikipedia.org/wiki/MD5)找到。乍一看，似乎在此过程中使用 A、B、C 和 D 来创建 F 和 g。在此过程之前，输入被分解为 512 位块的块。然后，进一步分成十六个 32 位字。

MD5 哈希就是按照这个算法计算出来的。所有值都是小端的。

```
//Note: All variables are unsigned 32 bit and wrap modulo 2^32 when calculating
var int[64] s, K

//s specifies the per-round shift amounts
s[ 0..15] := { 7, 12, 17, 22,  7, 12, 17, 22,  7, 12, 17, 22,  7, 12, 17, 22}
s[16..31] := { 5,  9, 14, 20,  5,  9, 14, 20,  5,  9, 14, 20,  5,  9, 14, 20}
s[32..47] := { 4, 11, 16, 23,  4, 11, 16, 23,  4, 11, 16, 23,  4, 11, 16, 23}
s[48..63] := { 6, 10, 15, 21,  6, 10, 15, 21,  6, 10, 15, 21,  6, 10, 15, 21}

//Use binary integer part of the sines of integers (Radians) as constants:
for i from 0 to 63
    K[i] := floor(abs(sin(i + 1)) × (2 pow 32))
end for
//(Or just use the following table):
K[ 0.. 3] := { 0xd76aa478, 0xe8c7b756, 0x242070db, 0xc1bdceee }
K[ 4.. 7] := { 0xf57c0faf, 0x4787c62a, 0xa8304613, 0xfd469501 }
K[ 8..11] := { 0x698098d8, 0x8b44f7af, 0xffff5bb1, 0x895cd7be }
K[12..15] := { 0x6b901122, 0xfd987193, 0xa679438e, 0x49b40821 }
K[16..19] := { 0xf61e2562, 0xc040b340, 0x265e5a51, 0xe9b6c7aa }
K[20..23] := { 0xd62f105d, 0x02441453, 0xd8a1e681, 0xe7d3fbc8 }
K[24..27] := { 0x21e1cde6, 0xc33707d6, 0xf4d50d87, 0x455a14ed }
K[28..31] := { 0xa9e3e905, 0xfcefa3f8, 0x676f02d9, 0x8d2a4c8a }
K[32..35] := { 0xfffa3942, 0x8771f681, 0x6d9d6122, 0xfde5380c }
K[36..39] := { 0xa4beea44, 0x4bdecfa9, 0xf6bb4b60, 0xbebfbc70 }
K[40..43] := { 0x289b7ec6, 0xeaa127fa, 0xd4ef3085, 0x04881d05 }
K[44..47] := { 0xd9d4d039, 0xe6db99e5, 0x1fa27cf8, 0xc4ac5665 }
K[48..51] := { 0xf4292244, 0x432aff97, 0xab9423a7, 0xfc93a039 }
K[52..55] := { 0x655b59c3, 0x8f0ccc92, 0xffeff47d, 0x85845dd1 }
K[56..59] := { 0x6fa87e4f, 0xfe2ce6e0, 0xa3014314, 0x4e0811a1 }
K[60..63] := { 0xf7537e82, 0xbd3af235, 0x2ad7d2bb, 0xeb86d391 }

//Initialize variables:
var int a0 := 0x67452301   //A
var int b0 := 0xefcdab89   //B
var int c0 := 0x98badcfe   //C
var int d0 := 0x10325476   //D

//Pre-processing: adding a single 1 bit
append "1" bit to message    
/* Notice: the input bytes are considered as bits strings,
  where the first bit is the most significant bit of the byte.[41]

//Pre-processing: padding with zeros
append "0" bit until message length in bit ≡ 448 (mod 512)
append length mod (2 pow 64) to message

//Process the message in successive 512-bit chunks:
for each 512-bit chunk of message
    break chunk into sixteen 32-bit words M[j], 0 ≤ j ≤ 15
//Initialize hash value for this chunk:
    var int A := a0
    var int B := b0
    var int C := c0
    var int D := d0
//Main loop:
    for i from 0 to 63
        if 0 ≤ i ≤ 15 then
            F := (B and C) or ((not B) and D)
            g := i
        else if 16 ≤ i ≤ 31
            F := (D and B) or ((not D) and C)
            g := (5×i + 1) mod 16
        else if 32 ≤ i ≤ 47
            F := B xor C xor D
            g := (3×i + 5) mod 16
        else if 48 ≤ i ≤ 63
            F := C xor (B or (not D))
            g := (7×i) mod 16
        dTemp := D
        D := C
        C := B
        B := B + leftrotate((A + F + K[i] + M[g]), s[i])
        A := dTemp
    end for
//Add this chunk's hash to result so far:
    a0 := a0 + A
    b0 := b0 + B
    c0 := c0 + C
    d0 := d0 + D
end for

var char digest[16] := a0 append b0 append c0 append d0 //(Output is in little-endian)

//leftrotate function definition
leftrotate (x, c)
    return (x << c) binary or (x >> (32-c)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-09T22:19:29.397

你是对的。维基百科的图片几乎描述了它：[https ://en.wikipedia.org/wiki/Merkle_tree](https://en.wikipedia.org/wiki/Merkle_tree)

这取决于您如何拆分原始消息的实现。显然，如果你的消息比较小，把它分成几百万个块是没有用的，同样，如果你的消息很大，把它分成一个字节的块是很尴尬的。

不要忘记您确实需要将您的拆分传达给所有使用它的人。否则哈希不匹配

# jquery - 使用 JSONP 的 Jquery 移动自动完成

> ID：10149863
> 
> 赞同：4
> 
> 时间：2012-04-14T00:12:33.663
> 
> 标签：jquery, autocomplete, jsonp

任何人都有一个使用 jquery 移动自动完成的远程 JSONP 调用（例如 ws.geonames.com）的工作示例？

我已经找到并且可以使用其他组合（没有 jqm 的 jsonp 远程，jqm 本地自动完成等），但是带有 jsonp 远程调用的 jqm 自动完成正在破坏请求（编码功能代码并将其发送到本地主机）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-13T09:44:34.330

尝试这个 ：

```
$( document ).on( "pageinit", "#myPage", function() {
            $( "#autocomplete" ).on( "listviewbeforefilter", function ( e, data ) {
                var $ul = $( this ),
                    $input = $( data.input ),
                    value = $input.val(),
                    html = "";
                $ul.html( "" );
                if ( value && value.length > 2 ) {
                    $ul.html( "<li><div class='ui-loader'><span class='ui-icon ui-icon-loading'></span></div></li>" );
                    $ul.listview( "refresh" );
                    $.ajax({
                        url: "http://gd.geobytes.com/AutoCompleteCity",
                        dataType: "jsonp",
                        crossDomain: true,
                        data: {
                            q: $input.val()
                        }
                    })
                    .then( function ( response ) {
                        $.each( response, function ( i, val ) {
                            html += "<li>" + val + "</li>";
                        });
                        $ul.html( html );
                        $ul.listview( "refresh" );
                        $ul.trigger( "updatelayout");
                    });
                }
            });
        }); 
```

# javascript - 使用纯javascript从另一个（php）文件中获取JSON？

> ID：10149864
> 
> 赞同：1
> 
> 时间：2012-04-14T00:12:46.667
> 
> 标签：javascript, json

我是 JavaScript 新手。我有一个列出目录中所有文件的 php 文件。我想调用该文件并获取它仅使用 javascript 回显的 json 数组。我知道 jquery 可以做到……但这是我唯一需要做的事情。它不值得为它学习 jquery，我也不想用一个我只会用于这件事的库来膨胀我的页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T00:20:08.780

我想说只使用 jquery 因为为 AJAX 处理所有不同的浏览器是一件痛苦的事情，我相信从长远来看你也会将它用于其他事情。

如果您真的想这样做，这里有一个本机 js 请求的示例：

```
function ajaxRequest(){
 var activexmodes=["Msxml2.XMLHTTP", "Microsoft.XMLHTTP"] //activeX versions to check for in IE
 if (window.ActiveXObject){ //Test for support for ActiveXObject in IE first (as XMLHttpRequest in IE7 is broken)
  for (var i=0; i<activexmodes.length; i++){
   try{
    return new ActiveXObject(activexmodes[i])
   }
   catch(e){
    //suppress error
   }
  }
 }
 else if (window.XMLHttpRequest) // if Mozilla, Safari etc
  return new XMLHttpRequest()
 else
  return false
} 
```

你会像这样使用它：

```
var mygetrequest=new ajaxRequest()
mygetrequest.onreadystatechange=function(){
 if (mygetrequest.readyState==4){
  if (mygetrequest.status==200 || window.location.href.indexOf("http")==-1){
   var jsondata=eval("("+mygetrequest.responseText+")") //retrieve result as an JavaScript object
   var rssentries=jsondata.items
  }
  else{
   alert("An error has occured making the request")
  }
 }
}

mygetrequest.open("GET", "mypage.php", true)
mygetrequest.send(null) 
```

# .net - DirectShow 视频质量问题

> ID：10149866
> 
> 赞同：1
> 
> 时间：2012-04-14T00:12:55.403
> 
> 标签：.net, video, directshow

使用 directshow 视频控件显示来自摄像机的实时视频，一切正常，但运动失真非常严重。它会在视频边缘产生锯齿状锯齿。从usb换成PCI采集卡，没有改善。相机供应商的应用程序显示了漂亮的全动态视频，所以看起来硬件还可以。有任何想法吗？

```
using System;
using System.Diagnostics;
using System.Drawing;
using System.Runtime.InteropServices;
using System.Windows.Forms;
using DirectShowLib;
using System.Runtime.InteropServices.ComTypes;

namespace VideoDisplayControl
{
//    [Guid("43878F19-1E0E-42d2-B72B-88A94418A302"), ComVisible(true)]
    public partial class VideoDisplayControl : UserControl
    {
        public enum PlayState : int
        {
            Stopped,
            Paused,
            Running,
            Error,
            Init
        }

        private static int WM_GRAPHNOTIFY = Convert.ToInt32("0X8000", 16) + 1;

        private PlayState _currentState = PlayState.Stopped;
        private IVideoWindow _videoWindow = null;
        private IMediaControl _mediaControl = null;
        private IMediaEventEx _mediaEventEx = null;
        private IGraphBuilder _graphBuilder = null;
        private ICaptureGraphBuilder2 _captureGraphBuilder = null;
        private float _imageAspectRatio = 0f;
        private System.Windows.Forms.Label labelError;

        public PlayState State
        {
            get { return _currentState; }
        }

        public VideoDisplayControl()
        {
            components = new System.ComponentModel.Container();

            this.labelError = new System.Windows.Forms.Label();
            this.SuspendLayout();

            // Error label
            this.labelError.BorderStyle = System.Windows.Forms.BorderStyle.None;
            this.labelError.ForeColor = Color.DimGray;
            this.labelError.Font = new System.Drawing.Font("Microsoft Sans Serif", 14.25F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
            this.labelError.Location = new System.Drawing.Point(0, 0);
            this.labelError.Name = "labelError";
            this.labelError.Size = new System.Drawing.Size(50, 50);
            this.labelError.TabIndex = 1;
            this.labelError.Text = "Video Source Not Available";
            this.labelError.TextAlign = System.Drawing.ContentAlignment.MiddleCenter;
            this.labelError.Visible = false;

            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
//            System.Resources.ResourceManager resources = new System.Resources.ResourceManager(typeof(VideoDisplayControl));
            this.Controls.Add(this.labelError);
            this.ResumeLayout(false);
            this.PerformLayout();

            this.Load += new System.EventHandler(VideoDisplayControl_Load);
        }

        private void VideoDisplayControl_Load(object sender, System.EventArgs e)
        {
            this.Resize += new System.EventHandler(VideoDisplayControl_Resize);
            CaptureVideo();
        }

        private void VideoDisplayControl_Resize(object sender, System.EventArgs e)
        {
            if (this._videoWindow == null)
                return;

            // Attempt to keep aspect ratio of source
            if (_imageAspectRatio > 0)
            {
                int width = Math.Min(this.Width, (int)(this.ClientSize.Height * _imageAspectRatio));
                int height = Math.Min(this.ClientSize.Height, (int)(this.Width / _imageAspectRatio));
                int posX = (this.Width - width) / 2;   // Center within control
                int posY = (this.ClientSize.Height - height) / 2;
                this._videoWindow.SetWindowPosition(posX, posY, width, height);
            }
            else // resize to size of control
                this._videoWindow.SetWindowPosition(0, 0, this.Width, this.ClientSize.Height);

            this.labelError.Size = new System.Drawing.Size(this.Width, this.ClientSize.Height);
        }

        private void CaptureVideo()
        {
            int hr = 0;
            IBaseFilter sourceFilter = null;
            try
            {
                GetInterfaces(); // Interface with DirectShow

                hr = _captureGraphBuilder.SetFiltergraph(_graphBuilder);
                DsError.ThrowExceptionForHR(hr);

                sourceFilter = FindCaptureDevice();

                hr = _graphBuilder.AddFilter(sourceFilter, "VideoDisplay Filter");
                DsError.ThrowExceptionForHR(hr);

                hr = _captureGraphBuilder.RenderStream(PinCategory.Preview, MediaType.Video, sourceFilter, null, null);
                Debug.WriteLine(DsError.GetErrorText(hr));
                DsError.ThrowExceptionForHR(hr);

                Marshal.ReleaseComObject(sourceFilter);

                SetupVideoWindow();

                hr = _mediaControl.Run();
                DsError.ThrowExceptionForHR(hr);

                int width, height;
                hr = _videoWindow.GetMaxIdealImageSize(out width, out height);
                if ((hr == 0) && (width > 0) && (height > 0))
                {
                    _imageAspectRatio = (float)width / (float)height;
                    VideoDisplayControl_Resize(this, null);
                }

                _currentState = PlayState.Running;
            }
            catch (Exception)
            {
                _currentState = PlayState.Error;   // Set error state
                this.labelError.Visible = true;    // Display the "video not available" label
                VideoDisplayControl_Resize(this, null); // resize control to center label
            }
        }

        private IBaseFilter FindCaptureDevice()
        {
            IEnumMoniker classEnum = null;
            IMoniker[] moniker = new IMoniker[1];
            object source = null;

            ICreateDevEnum devEnum = (ICreateDevEnum)(new CreateDevEnum());
            int hr = devEnum.CreateClassEnumerator(FilterCategory.VideoInputDevice, out classEnum, CDef.None);
            DsError.ThrowExceptionForHR(hr);
            Marshal.ReleaseComObject(devEnum);

            if (classEnum == null)
            {
                throw new ApplicationException("No video capture device was detected.\\r\\n\\r\\n" + "This sample requires a video capture device, such as a USB WebCam,\\r\\nto be installed and working properly.  The sample will now close.");
            }

            System.IntPtr none = System.IntPtr.Zero;

            if (classEnum.Next(moniker.Length, moniker, none) == 0)
            {
                Guid iid = typeof(IBaseFilter).GUID;
                moniker[0].BindToObject(null, null, ref iid, out source);
            }
            else
            {
                throw new ApplicationException("Unable to access video capture device!");
            }

            Marshal.ReleaseComObject(moniker[0]);
            Marshal.ReleaseComObject(classEnum);

            return (IBaseFilter)source;
        }

        private void GetInterfaces()
        {
            _graphBuilder = (IGraphBuilder)(new FilterGraph());
            _captureGraphBuilder = (ICaptureGraphBuilder2)(new CaptureGraphBuilder2());
            _mediaControl = (IMediaControl)_graphBuilder;
            _videoWindow = (IVideoWindow)_graphBuilder;
            _mediaEventEx = (IMediaEventEx)_graphBuilder;

            // send notification messages to the control window
            int hr = _mediaEventEx.SetNotifyWindow(this.Handle, WM_GRAPHNOTIFY, IntPtr.Zero);

            DsError.ThrowExceptionForHR(hr);
        }

        private void HandleGraphEvent()
        {
            int hr = 0;
            EventCode evCode = 0;
            IntPtr evParam1;
            IntPtr evParam2;

            while (this._mediaEventEx != null && _mediaEventEx.GetEvent(out evCode, out evParam1, out evParam2, 0) == 0)
            {
                // Free event parameters to prevent memory leaks associated with
                // event parameter data.  While this application is not interested
                // in the received events, applications should always process them.
                hr = _mediaEventEx.FreeEventParams(evCode, evParam1, evParam2);
                DsError.ThrowExceptionForHR(hr);

                // Insert event processing code here, if desired (see http://msdn2.microsoft.com/en-us/library/ms783649.aspx)
            }
        }

        private void ReleaseInterfaces()
        {
            if (this._mediaControl != null)
                this._mediaControl.StopWhenReady();

            this._currentState = PlayState.Stopped;

            // stop notifications of events
            if (this._mediaEventEx != null)
                this._mediaEventEx.SetNotifyWindow(IntPtr.Zero, WM_GRAPHNOTIFY, IntPtr.Zero);

            //// Relinquish ownership (IMPORTANT!) of the video window.
            //// Failing to call put_Owner can lead to assert failures within
            //// the video renderer, as it still assumes that it has a valid
            //// parent window.
            if (this._videoWindow != null)
            {
                this._videoWindow.put_Visible(OABool.False);
                this._videoWindow.put_Owner(IntPtr.Zero);
            }

            // Release DirectShow interfaces
            Marshal.ReleaseComObject(this._mediaControl);
            this._mediaControl = null;

            Marshal.ReleaseComObject(this._mediaEventEx);
            this._mediaEventEx = null;

            Marshal.ReleaseComObject(this._videoWindow);
            this._videoWindow = null;

            Marshal.ReleaseComObject(this._graphBuilder);
            this._graphBuilder = null;

            Marshal.ReleaseComObject(this._captureGraphBuilder);
            this._captureGraphBuilder = null;
        }

        private void SetupVideoWindow()
        {
            int hr = 0;

            //set the video window to be a child of the main window
            //putowner : Sets the owning parent window for the video playback window. 
            hr = _videoWindow.put_Owner(this.Handle);
            DsError.ThrowExceptionForHR(hr);

            hr = _videoWindow.put_WindowStyle(WindowStyle.Child | WindowStyle.ClipChildren);
            DsError.ThrowExceptionForHR(hr);

            //Use helper function to position video window in client rect of main application window
            VideoDisplayControl_Resize(this, null);

            //Make the video window visible, now that it is properly positioned
            //put_visible : This method changes the visibility of the video window. 
            hr = _videoWindow.put_Visible(OABool.True);
            DsError.ThrowExceptionForHR(hr);
        }

        protected override void WndProc(ref Message m)
        {
            if (m.Msg == WM_GRAPHNOTIFY)
            {
                HandleGraphEvent();
            }
            if (_videoWindow != null)
            {
                _videoWindow.NotifyOwnerMessage(m.HWnd, m.Msg, m.WParam, m.LParam);
            }
            base.WndProc(ref m);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:52:48.823

事实证明这是隔行扫描的问题。相机正在输出隔行扫描视频，但采集卡没有去隔行扫描。我在 vid cap 卡驱动程序上启用了去隔行扫描，一切都很好。这是由采集卡供应商 Osprey (Viewcast) 提出的。

# android - 向 Apache 发送 Expect 100 标头的 Android 应用 POST 请求

> ID：10149871
> 
> 赞同：0
> 
> 时间：2012-04-14T00:13:33.977
> 
> 标签：android, apache, http-headers

我有一个 android 应用程序向一个 apache 服务器发出 POST 请求。但是应用程序发送了“Expect: 100”标头，apache 以 417 状态消息响应，并且连接完成并且什么也没做......

我在 .htaccess 和 pre_virtualhost_global.conf 文件上使用了 mod_header 来删除期望的标头，但不起作用。

最好的方法是什么？在服务器上还是在应用程序上？以及如何修复？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T23:48:44.517

我已经使用以下代码解决了我的问题，其中 mClient 是 DefaultHttpClient 类的一个对象。

```
mClient.getParams().setParameter(CoreProtocolPNames.USE_EXPECT_CONTINUE, false); 
```

如果有人有面糊解决方案，请分享。

# python - python中二维数组的初始化

> ID：10149875
> 
> 赞同：1
> 
> 时间：2012-04-14T00:14:23.630
> 
> 标签：python, arrays, initialization

我昨天问了一个关于初始化二维数组的问题，这是链接： [How to implement this C++ source in python?](https://stackoverflow.com/questions/10137652/how-to-implement-this-c-source-in-python)

回答有问题，有朋友提了一个办法：

```
G = [[0]*11]*11 
```

但是这样，当我将 to 更改为`G[0][0]`时`2`，所有的`G[i][0](0<=i<11)`都会更改为`2`，但我不知道为什么？

**补充：**

这就是我的想法：`0`或其他数字是`immutable`，所以我们改变其中一个，其他的不会改变。但是列表 [0, 0 ,0 ,.....] 是`mutable`，所以当我们 [0, 0, ...] * 11 时，所有的 [0, 0, ...] 列表都是一样的，因为`is`函数为真。我对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T00:16:36.000

因为您有 11 个对同一个列表的引用。

```
G = [[0] * 11 for x in range(11)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T00:55:47.700

该`*11`符号对同一对象进行了 11 次引用。如果对象是不可变的，您不会注意到，因为任何更改它的尝试都会更改对不同对象的引用。当对象是可变的时，您可以修改它，例如分配给列表的成员；由于所有引用都指向同一个对象，因此它们都会同时被修改。

可变/不可变似乎会改变一些事情，但事实并非如此——Python 在这两种情况下都是一致的。考虑这个例子：

```
G[0] = [3]*11 
```

你会看到 G[1] 没有改变。

# c - 用于图形的 C 库

> ID：10149878
> 
> 赞同：3
> 
> 时间：2012-04-14T00:14:59.213
> 
> 标签：c, ruby, directed-acyclic-graphs, ruby-c-extension

是否有用于图论操作的良好 C 库？我特别需要计算有向图的[强连通分量](http://en.wikipedia.org/wiki/Strongly_connected_component)。我在 Ruby 中实现了[Tarjan 的算法](http://en.wikipedia.org/wiki/Tarjan%27s_strongly_connected_components_algorithm)，如下所示：

```
 def strongly_connected_components graph
        @index, @stack, @indice, @lowlink, @scc = 0, [], {}, {}, []
        @graph = graph
        vertices(@graph).each{|v| strong_connect(v) unless @indice[v]}
        @scc
    end
    def strong_connect v
        @indice[v] = @index
        @lowlink[v] = @index
        @index += 1
        @stack.push(v)
        @graph.each do |vv, w|
            next unless vv == v
            if !@indice[w]
                strong_connect(w)
                @lowlink[v] = [@lowlink[v], @lowlink[w]].min
            elsif @stack.include?(w)
                @lowlink[v] = [@lowlink[v], @indice[w]].min
            end
        end
        if @lowlink[v] == @indice[v]
            i = @stack.index(v)
            @scc.push(@stack[i..-1])
            @stack = @stack[0...i]
        end
    end 
```

它正在处理小图，但随着图变大，由于递归调用方法，它开始返回“堆栈级别太深”错误`strong_connect`。我想我需要一个 C 库并从编写主程序的 Ruby 访问它。

除了库之外，任何在 Ruby 库中使用它的建议都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T18:12:34.533

我遇到了[igraph](http://igraph.sourceforge.net/documentation.html)库。它是用 C 语言编写的，并具有 Ruby、Python 和 R 的包装器。对您而言，这意味着您可以享受 C 语言的速度和 Ruby 的舒适性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T00:19:42.927

[Ruby Graph Library (RGL)](http://rgl.rubyforge.org/rgl/index.html)（用 Ruby 编写）是需要考虑的一种选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-05T14:01:09.620

**在 C++ 中有[CXXGraph](https://github.com/ZigRazor/CXXGraph)库**，它是一个仅用于图形操作和算法的标头库。

# google-app-engine - GAE Go 和长轮询？

> ID：10149881
> 
> 赞同：2
> 
> 时间：2012-04-14T00:15:28.890
> 
> 标签：google-app-engine, function, web-applications, go, long-polling

在 Google App Engine 上的 Golang 中实现长轮询的有效方法是什么？我遇到了[这段代码](https://gist.github.com/1039785)，但它是为非 GAE 应用程序制作的（使用通道和 goroutine，据我所知，这对 GAE 来说并不是最好的）。

编辑：

我特别需要为我无法控制的应用程序实现长轮询（请参阅[此](https://deepbit.net/longpolling.php)参考资料），因此使用[Channel API](https://developers.google.com/appengine/docs/go/channel/)作为轮询的替代品是行不通的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:54:57.700

前端实例对 http 请求的请求期限为 60 秒。

您可以尝试使用[后端](https://developers.google.com/appengine/docs/go/backends/overview)实现长轮询，因为它们没有相同的限制（无限期限）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T00:21:28.093

您想使用[Channel API](https://developers.google.com/appengine/docs/go/channel/)。

# jquery - 无限滚动中断闪烁

> ID：10149882
> 
> 赞同：1
> 
> 时间：2012-04-14T00:15:58.487
> 
> 标签：jquery, flash, tumblr

我几乎完成了创建下面的不倒翁主题。该主题使用无限滚动插件，这适用于不包含 Flash（照片、文本...）的帖子。视频和音频帖子使用 Flash，当无限滚动开始加载更多帖子时，它不会加载到 Flash 帖子中。我无法理解为什么，由于截止日期迫在眉睫，有人可以帮忙吗？

[http://penguinenglishlibrary.tumblr.com/](http://penguinenglishlibrary.tumblr.com/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T00:35:35.243

结果我需要遍历帖子并调用 tumblr api 来获取音频帖子的嵌入代码。

我已将代码放在下面，希望对某人有所帮助：

1.  我在 tumblr 主题中有以下 html 代码：

    {块：帖子}

    ```
    <div id="{PostID}" class="posts {block:Photo}photo-post{/block:Photo} {block:Video}video-post{/block:Video} {block:Audio}audio-post{/block:Audio} {block:Photoset}photoset-post{/block:Photoset}"> 
    ```

2.  然后在砌体的回调（见下文）中，我有以下代码：

    ```
    /* repair audio players*/
    $('.audioplayerinto').each(function(){
        var audioID = $(this).attr("id");
        var $audioPost = $(this);
        $.ajax({
            url: 'http://myblog.tumblr.com/api/read/json?id=' + audioID,
            dataType: 'jsonp',
            timeout: 50000,
            success: function(data){

                $audioPost.html(data.posts[0]["audio-player"]);

                /*
                $audioPost.append('\x3cdiv style=\x22background-color:white;height:30px\x22 class=\x22audio_player\x22\x3e' + data.posts[0]['audio-player'] +'\x3c/div\x3e');
                alert("It worked");
                */
            }
        } 
    ```

回调代码如下所示：

```
if($content.infinitescroll) {

    $content.masonry({
        itemSelector: '.posts',
        //columnWidth: 235,
        isAnimated: true
    }),    
    $content.infinitescroll({
        navSelector    : 'div#pagination',  
        nextSelector   : 'div#pagination div#nextPage a', 
        itemSelector   : '.posts',
        loading: {
            finishedMsg: '',
            img: 'http://static.tumblr.com/dbek3sy/pX1lrx8xv/ajax-loader.gif'
        },
        bufferPx       : 500,
        debug          : false,
    },
    // call masonry as a callback.
    function( newElements ) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T11:54:21.123

当对下一页进行 ajax 调用时，会从请求中去除内联脚本标记。因此闪光灯无法工作的原因。

.find 方法在插件中使用，隐式地作为 .load 方法和回调阶段的一部分：

[jquery：在 .find() 之后保留 <script> 标记](https://stackoverflow.com/questions/5791420/jquery-keep-script-tag-after-find)

对您而言，最好的选择是隔离 JS 代码，查看 Flash 视频工作所需的内联 JS，这似乎是合理的。

# c++ - 我正在尝试重载运算符<<

> ID：10149884
> 
> 赞同：1
> 
> 时间：2012-04-14T00:16:11.277
> 
> 标签：c++, class, polymorphism, operator-overloading, virtual

基本上我的问题是：我有一个基类和一个派生类。我需要在派生类上调用 operator<< 但它一直在调用基类，因为在主类中它被创建为 Order* order Order 是静态类型，但它被更改为 order= new SpecialOrder;

所以现在我需要它来调用派生类

提前非常感谢：D

```
//SpecialOrder.h
#include"Order.h"
class SpecialOrder : public Order// derived class
{
  char* string;
  public:
   SpecialOrder();
   SpecialOrder(const ISBN& isbn, const char* instr);
   SpecialOrder(const SpecialOrder& source);
   bool add(istream& is);
   void display(ostream& os) const;
   SpecialOrder& operator=(const SpecialOrder& source);
   ~SpecialOrder();

};
ostream& operator<<(ostream& os, SpecialOrder obj);

//Order.h
#include "ISBN.h"
class Order // base class
{
  int ordered;
  int delivered;
  ISBN isbn;
  public:
  Order();
  Order(const ISBN& isbn);
  bool has(const ISBN& isbn) const;
  int outstanding() const;
  virtual bool add(istream& is);
  bool add(int n);
  bool receive(istream& is);
  void display(ostream& os) const;
};
ostream& operator<<(ostream& os, Order obj); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T00:24:09.683

我不认为你可以直接做你所寻求的。但是您可以在每个类中都有一个虚拟 print() 成员，并让 operator << (stream & os, Order obj) 调用 obj 的 print() 方法。

将 print() 声明为

```
virtual ostream &print( ostream &s ) const; 
```

在每个类中。

然后

```
inline ostream & operator << ( ostream &os, const Order &obj )
    {
    return obj.print( os );
    } 
```

（并且您不需要单独的 operator<< 子类）。

# javascript - 我可以使用 onload 函数 -Javascript 一次显示 2 个项目吗？

> ID：10149886
> 
> 赞同：2
> 
> 时间：2012-04-14T00:16:16.547
> 
> 标签：javascript, html, jquery, onload

我使用 onload 函数来显示页面打开的日期，并且它工作正常。但是当我将用户名添加到此函数时，它不会显示任何内容（我希望用户名也显示在页面顶部。）

这是我正在使用的功能：

```
 window.onload = function () {
    var newDate = new Date();
    $('#dateday').val(newDate.getFullYear() + '-' + newDate.getMonth() + '-' + newDate.getDate()); // This is showed correctly 
    alert(localStorage["username"]); // It's alerted correctly
    $('#usernamethename').val(localStorage["username"]); //This is not displayed. 
```

html代码：

```
 <h3 id="usernamethename"></h3>
    <input id="dateday" type= text></input> 
```

你知道为什么不显示用户名吗？＆如果有任何更好的想法可以在页面顶部显示名称，如果您提到它们，我将不胜感激。

非常感谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T00:22:29.743

做这个

```
$('#usernamethename').html(localStorage["username"]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T00:18:32.040

尝试这个：

```
$('#usernamethename').text(localStorage["username"]); 
```

# java - 安装JDK 7u3后找不到tools.jar

> ID：10149889
> 
> 赞同：0
> 
> 时间：2012-04-14T00:16:23.700
> 
> 标签：java

我刚刚安装完新的 Java JDK 版本 7u3，现在我找不到 tools.jar 文件。

我知道我安装了正确的版本“jdk-7u3-windows-x64.exe”并搜索了它的安装目录但没有找到该文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T00:24:09.443

你在看哪个目录？默认为 C:\Program Files\Java\jdk1.7.03\lib。

确保您没有查看 JRE 的目录，该目录嵌套在 JDK 的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T05:42:58.277

什么告诉你你缺少 tools.jar？如果它是 Eclipse，您的 JAVA_HOME 是否已使用新的 JDK 进行了更新，而您的 Eclipse 32 位现在默认为您的 32 位 JRE 而不是它应该使用的某些 JDK？

# php - 使用 php twitterOAuth API 在一台机器上运行良好，但在另一台机器上运行良好

> ID：10149890
> 
> 赞同：1
> 
> 时间：2012-04-14T00:16:29.003
> 
> 标签：php, twitter, twitter-oauth

我遇到了一个奇怪的问题，我的本地服务器在 mamp 上的 mac 上运行，另一台服务器在 windows 机器上运行 uniserver，我正在使用 twitteroAuth 来使用 twitter API，现在在我的机器上一切正常，但在uniserver 每当我尝试发出 getRequestToken 时，我都会收到 401，我所做的就是

```
 GLOBAL $twitter_key, $twitter_secret;
    $twitteroauth = new TwitterOAuth($twitter_key,$twitter_secret );

    $request_token = $twitteroauth->getRequestToken("http://".$_SERVER['HTTP_HOST'].""); 
```

有人知道这里会发生什么吗？

谢谢！

丹尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T00:21:19.477

确保 uniserver 上的时钟正确同步。如果它与 Twitter 服务器上的时间相差超过 5 分钟，请求将失败。[NTP](https://en.wikipedia.org/wiki/Network_Time_Protocol)通常用于保持时钟同步。

# c# - 如何让启动画面在开始淡出之前等待几秒钟？

> ID：10149893
> 
> 赞同：0
> 
> 时间：2012-04-14T00:16:55.393
> 
> 标签：c#, .net, splash-screen

我有一个为我的初始屏幕创建的 Windows 表单，我在这个表单中添加了一个计时器，启用它并在我的代码中添加了以下行：

```
 private void timer1_Tick(object sender, EventArgs e)
    {
        this.Opacity -= 0.01;

        if (this.Opacity <= 0)
        {
            this.Close();
        }   
    } 
```

闪屏淡出，但问题是我希望它在 5 秒内 100% 可见（不透明度 = 1.0），然后它开始淡出直到关闭！

我试图在我的代码开头添加这一行：

```
 Using System.Threading; 
```

我禁用了 timer1，然后我在表单加载事件中添加了下面的行

```
 Thread.Sleep(5000);
      timer1.Enabled = true; 
```

但不幸的是，这对我不起作用，这使得应用程序在显示启动屏幕之前等待 5 秒，然后显示它并立即淡化它。

如何让启动画面出现 5 秒然后淡出？

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T00:26:15.033

最初将计时器的间隔设置为 5000。

```
private void timer1_Tick(object sender, EventArgs e) 
{ 
    timer1.Enabled = false;
    timer1.Tick -= timer1_Tick;
    timer1.Tick += FadeOut;
    timer1.Interval = /* whatever your original interval was */
    timer1.Enabled = true;
} 

private void FadeOut(object sender, EventArgs e) 
{ 
    this.Opacity -= 0.01; 

    if (this.Opacity <= 0) 
    { 
        this.Close(); 
    }    
} 
```

这将导致计时器首先延迟 5 秒，然后重新使用计时器来执行不透明度更改。

如果 Thread.Sleep() 调用阻塞了您的应用程序，则表明您没有在单独的 UI 线程上运行启动画面。通常，您希望在应用程序初始化时并行显示初始屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T00:25:30.130

一种方法是添加*另一个*变量来控制该五秒内的不透明度，例如`myOpacity`初始化为（假设您的计时器是百分之一秒）`6`：

```
private void timer1_Tick(object sender, EventArgs e)
{
    this.myOpacity -= 0.01;
    if (this.myOpacity <= 0)
        this.Close();
    else
        if (this.myOpacity <= 1)
            this.Opacity -= this.myOpacity;
} 
```

这样在前五秒（`myOpacity`从 6 秒到 1 秒），什么都不会改变。然后，在最后一秒，它会淡出。

# wcf - 设置 MaxReceivedMessageSize（远程服务器返回意外响应：（400）错误请求。） web.config 不起作用

> ID：10149908
> 
> 赞同：1
> 
> 时间：2012-04-14T00:20:35.423
> 
> 标签：wcf

我已经为这个错误工作了一个星期，但搜索后仍然无法解决。错误是：

> 远程服务器返回意外响应：(400) 错误请求。

我尝试通过 WCF 从 Windows 手机应用程序保存图像，我知道我需要设置`MaxReceivedMessageSize`高于默认值！我已经尝试了一切，但没有运气！

我的`web.config`文件（wcf 服务）

```
<configuration>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_IService1"
                maxReceivedMessageSize="2147483647"
                maxBufferSize="2147483647"
                maxBufferPoolSize="2147483647"
                hostNameComparisonMode="StrongWildcard"
                receiveTimeout="00:10:10"
                sendTimeout="00:10:00"
                openTimeout="00:10:00"
                closeTimeout="00:10:00"
                transferMode="Buffered"
                messageEncoding="Text"
                textEncoding="utf-8"
                bypassProxyOnLocal="false"
                useDefaultWebProxy="true" >
          <readerQuotas
             maxDepth="2147483647"
             maxStringContentLength="2147483646"
             maxArrayLength="2147483647"
             maxBytesPerRead="2147483647"
             maxNameTableCharCount="2147483647"/>
        </binding>
      </basicHttpBinding>
    </bindings>
   <services>
     <service name="Service1" behaviorConfiguration="Service1Behavior">
       <endpoint
          address=""
         binding="basicHttpBinding"
          bindingConfiguration="BasicHttpBinding_IService1"  
          contract="IService1" />
        <endpoint
          address="mex"
          binding="mexHttpBinding"
          contract="IMetadataExchange"
        />
     </service>
   </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="Service1Behavior">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
        <behavior>
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
</configuration> 
```

在我的 Windows 手机应用程序上只有`ServiceReferences.ClientConfig`

```
<configuration>
   <system.serviceModel>
      <bindings>
         <basicHttpBinding>
            <binding name="BasicHttpBinding_IService1" maxBufferSize="2147483647"
                    maxReceivedMessageSize="2147483647">
               <security mode="None" />
            </binding>
         </basicHttpBinding>
       </bindings>
       <client>
            <endpoint address="http://localhost:1772/Service1.svc" 
                binding="basicHttpBinding"
                bindingConfiguration="BasicHttpBinding_IService1" 
                contract="ServiceReference1.IService1"
                name="BasicHttpBinding_IService1" />
       </client>
   </system.serviceModel>
</configuration> 
```

我也尝试在代码中设置绑定：

```
BasicHttpBinding binding = new BasicHttpBinding();
binding.MaxReceivedMessageSize = 2147483647;
binding.MaxBufferSize = 2147483647;

EndpointAddress endpointAddress = new EndpointAddress("http://localhost:1772/Service1.svc");

Service1Client  proxy = new Service1Client(binding, endpointAddress); 
```

我真的不知道如何解决这个问题......看起来服务器没有使用我的 web.config 文件？？？如果是这种情况，我该如何更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T01:00:01.647

您必须验证这确实是问题所在。要开始在服务器上打开 WCF 跟踪 ( [http://blogs.msdn.com/b/madhuponduru/archive/2006/05/18/601458.aspx](http://blogs.msdn.com/b/madhuponduru/archive/2006/05/18/601458.aspx) ) 并查看有什么错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T07:09:25.790

乍一看，一切似乎都很好——除了我有一种预感，也许你的服务配置没有被选中，因为你的服务名称很奇怪......

你有：

```
 <service name="Service1" > 
```

您的服务类 - 实现服务合同的服务类 - 真的只是被调用`Service1`并且不存在于任何命名空间中吗？

节点`name=`上的属性值**必须**完全是您的服务类类型的**完全限定**名称 - 所以很可能是这样的：`<service>`

 ****```
 <service name="MyNamespace.Service1" > 
```

或您的类所在的任何**.NET 命名空间**`Service1`

如果该名称不匹配，则 WCF 运行时将**不会使用**该服务配置并回退到 WCF 默认值，这将解释为什么它适用于较小的文件 - 但不适用于较大的文件。****

# powershell - 使用 Powershell 将数据表保存为 csv

> ID：10149910
> 
> 赞同：11
> 
> 时间：2012-04-14T00:21:10.913
> 
> 标签：powershell, csv, datatable

必须有一个简单的方法来做到这一点。我有一个连接到数据库的 Powershell 脚本，我想将生成的数据表保存为 CSV。这是到目前为止的代码：

```
$connString = "Provider=msdaora;Data Source=MyDatabase;User Id=test;Password=test    
$qry = "select * from employees"
$OLEDBConn = New-Object System.Data.OleDb.OleDbConnection($connString)            
$OLEDBConn.open()            
$readcmd = New-Object system.Data.OleDb.OleDbCommand
$readcmd.Connection = $OLEDBConn
$readcmd.CommandTimeout = '300'
$readcmd.CommandText = $qry
$da = New-Object system.Data.OleDb.OleDbDataAdapter($readcmd)            
$dt = New-Object system.Data.datatable            
[void]$da.fill($dt)            
$OLEDBConn.close() 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-14T00:28:56.903

我认为应该这样做：

```
$ds = New-Object System.Data.DataSet
$da.Fill($ds) >$null| Out-Null
$ds.Tables[0] | export-csv tofile.csv -notypeinformation 
```

# android - 如何在android中创建自定义下拉菜单

> ID：10149912
> 
> 赞同：2
> 
> 时间：2012-04-14T00:21:22.700
> 
> 标签：android, android-layout

我想制作一个在用户触摸按钮时出现的自定义菜单。这是我想要做的事情的图像。

![在此处输入图像描述](../Images/0d4428686b4ebae1b3b171c4c22c7f79.png)

如果有人能指出我如何做到这一点的方向，我将不胜感激。我希望他们能够单击它，然后输入特定的文本。谢谢你能给我的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T21:38:53.820

您可以使用滑动抽屉：

[http://developer.android.com/reference/android/widget/SlidingDrawer.html](http://developer.android.com/reference/android/widget/SlidingDrawer.html)

![在此处输入图像描述](../Images/1c65419c085bf35e1262aba5a0d6c6eb.png)

* * *

或者新的“功能区菜单”也有其他名称，它是新的 YubTube 应用程序或 Facebook 应用程序的菜单。

[https://github.com/darvds/RibbonMenu](https://github.com/darvds/RibbonMenu)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T01:13:12.293

你有几个选择：你可以创建一个带有半透明背景的对话活动，并根据你的喜好进行布局。然后你可以在它上面调用 startActivityForResult() 。

这是一个例子：

[http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/TranslucentActivity.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/TranslucentActivity.html)

# objective-c - 在 iPhone 的 Box2D / Cocos2D 中，你如何判断给定的 touchjoint / mousejoint 是否正在触摸给定的身体？

> ID：10149918
> 
> 赞同：0
> 
> 时间：2012-04-14T00:21:40.203
> 
> 标签：objective-c, cocos2d-iphone, box2d

说你有`B2body *bodyA`和`b2MouseJoint *mousejointA`。

如何检查 bodyA 是否连接到 mousejointA 或被 mousejointA 触摸？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T00:25:49.750

```
 if(mouseJointA->GetBodyB() == bodyA){ //Bingo}; 
```

# java - 为什么我们有非静态函数/方法？

> ID：10149920
> 
> 赞同：0
> 
> 时间：2012-04-14T00:21:58.540
> 
> 标签：java, c++, oop

我突然想知道为什么我们有非静态函数/方法？方法不是对象的属性（如属性/数据成员），并且该类的所有实例都使用相同的方法，那么为什么静态方法和非静态方法之间存在差异？这是否意味着当一个对象被实例化时，它拥有方法的副本——对于该类的所有实例来说这些方法完全相同？

编辑：所有负面因素是什么？我的观点是正确的——方法的行为不会因对象的每个实例而改变。每个对象的方法都是一样的，只是不同的对象调用了方法，那我们为什么要让方法成为对象的一部分呢？？为什么方法不能只存储一次（如静态方法），然后在使用“this”时我们在相关对象上执行？对于每个实例，将非静态方法存储为对象的一部分似乎很愚蠢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T00:24:30.363

静态方法通常不依赖或改变对象的状态。非静态方法通常这样做。

至于方法代码是否包含在对象的每个实例中，不，不是。

基本上每个方法都定义一次，然后`this`作为参数静默传入。有点过于简单化了，但希望能传达这个想法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T00:24:14.160

这样我们就可以`this`在方法中使用关键字......简单。它属于那个特定的实例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T00:40:47.053

好吧，让我们看看...

> 我突然想知道为什么我们有非静态函数/方法？方法不是对象的属性（如属性/数据成员），并且该类的所有实例都使用相同的方法，那么为什么静态方法和非静态方法之间存在差异？

**需要注意的关键是它是*概念上*的差异。实例*方法**在被调用时*与特定对象“关联” ——它具有某种形式的“this”上下文——而*静态方法*则不是。**

> 这是否意味着当一个对象被实例化时，它拥有方法的副本——对于该类的所有实例来说这些方法完全相同？

这取决于语言，但通常不会。

例如，在 Java 中，*类的所有实例共享的方法只有一个副本*。方法不是类实例*数据的“一部分”。*在 JavaScript 中，可以通过使用 [[prototype]] 链或在较小程度上通过在不同实例中为相同方法重用*相同函数对象来获得这种共享。*（然而，也可以在 JavaScript 中为每个*新实例创建一个**新*方法，但这是程序员的选择。）

 *在 Java 中，发送“消息”以调用*实例方法*；也就是说，它查看特定*类型*并将消息与适当的“this”实例一起发送给它。（由于虚拟调度，这比这更复杂，但是......要注意的关键是只有*一个*特定类型的方法的副本被加载到内存中。）

在 JavaScript 中，方法是一*等值*动态*绑定*到接收者（即“this “ inside 是根据它的调用方式建立的*）*。Python 的工作方式与 JavaScript 类似，因为方法是被获取和调用*的一流函数*（但方法仍然“绑定”到一个类，这与 JavaScript 不同）。Ruby 的工作方式更像 Java，因为“发送消息”反过来调用一个方法（这*不是*Ruby 中的一等值）并将上下文隐式关联到接收者。所有这些语言都支持各种形式的“子类化”（你可以怎么称呼它）来调整 MRO 并共享实例通用的方法。

> 每个对象的方法都是一样的，只是不同的对象调用了方法，那我们为什么要让方法成为对象的一部分呢？？为什么方法不能只存储一次（如静态方法），然后在使用“this”时我们在相关对象上执行？对于每个实例，将非静态方法存储为对象的一部分似乎很愚蠢。

这就是许多语言所做的——包括 Java、C++、Python（通常）和 Ruby（通常）和 JavaScript（通常），它是*节省内存和开销的一个*非常有效的点。**

 *快乐编码！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-14T00:27:09.390

非静态方法可以访问实例的数据（属性/属性）。静态方法不能，因为它们不“属于”类的实例。这是面向对象编程的重点。您正在封装数据和适用于该数据的功能..

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-14T00:27:31.047

非静态方法不像字段那样属于类的实例。非静态方法仅仅意味着它可以访问实例字段。就副本而言，只有一个，与每个对象只有一个副本的字段不同。

现在在具有功能支持的 OO 语言中，方法可以是对象的字段，但这完全不同。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-14T00:27:37.527

在类的特定实例上调用非静态方法。静态方法在没有实例的情况下调用，即使不存在类的实例也可以运行。

这些实例实际上并不保存方法代码的单独副本，而只是因为存储相同事物的重复副本没有意义。您可以将非静态方法视为属于实例而不是属于类。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-14T00:28:25.437

静态函数不与对象的实例相关联。成员函数是，这是`this`关键字的来源；编译器将其作为隐藏参数传递给成员函数，但不会传递给静态函数。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-04-14T00:29:02.227

OOP 的关键思想之一是使数据靠近对其进行操作的代码。非静态方法使您能够做到这一点：您可以定义与一组属性密切相关的功能，以便您的类的用户（这是属性和这些属性的功能的组合）可以关注功能而不是数据本身。**

# wordpress - 在一个循环中输出循环内容两次？

> ID：10149924
> 
> 赞同：0
> 
> 时间：2012-04-14T00:22:31.147
> 
> 标签：wordpress

我真的很困惑要搜索什么才能开始。

我希望能够在一个循环中输出 2 个帖子，所以我可以一次 DIV 包装 2 个帖子......

我在下面所做的只是纯粹的例子——我试图解释我需要它做什么。如果有人知道方法或在哪里可以找到教程，那就太棒了！谢谢。

**循环**

感谢@Rob帮助我走到了这一步，但它似乎奇怪地输出了重复......

```
<?php $latest = new WP_Query(array(

    'category_name'  => 'news',
    'order'          => 'DESC',
    'orderby'        => 'date',
    'posts_per_page' => 6

)); ?>

<?php $i = 0; if ( $latest->have_posts()) : while ($latest->have_posts()) : $latest->the_post(); ?>

    <?php $odd = ++$i % 2; ?>

    <?php if($odd) : ?>
    <div class="dual-post-wrapper">
    <?php endif; ?>

        <div class="post-<?php the_ID(); ?>">

            <?php the_content(); ?>

        </div>

    <?php if(!$odd) : ?>
    </div>
    <?php endif; ?>

<?php endwhile; unset($latest); endif; ?> 
```

**已发布的 HTML**

这就是输出的 HTML 的样子——由于某种原因，它复制了帖子 1、2、3 和 4？奇怪的！

```
<div class="dual-post-wrapper">

    <div class="post-1">

        Post 1 Content

    </div>

    <div class="post-2">

        Post 2 Content

    </div>

</div>

<div class="dual-post-wrapper">

    <div class="post-3">

        Post 3 Content

    </div>

    <div class="post-4">

        Post 4 Content

    </div>

</div>

<div class="dual-post-wrapper">

    <div class="post-5">

        Post 5 Content

    </div>

    <div class="post-6">

        Post 6 Content

    </div>

</div>

<div class="dual-post-wrapper"> <!-- these are duplicates?? -->

    <div class="post-1">

        Post 1 Content

    </div>

    <div class="post-2">

        Post 2 Content

    </div>

</div>

<div class="dual-post-wrapper"> <!-- these are duplicates?? -->

    <div class="post-3">

        Post 3 Content

    </div>

    <div class="post-4">

        Post 4 Content

    </div>

</div> 
```

再次感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T15:02:27.433

Wordpress 内置了用于计算循环和倒回帖子的功能。

要计算你的循环使用：

```
//Create a custom query var:

$displayposts = new WP_Query(); 

//start loop with it
<?php if ($displayposts->have_posts()) :while ($displayposts->have_posts()) : $displayposts->the_post();

//count it
$count_id = $displayposts->current_post + 1; 

//loop stuff <?php endwhile; else:?>

//rewind the post 
rewind_posts(); 
```

[http://codex.wordpress.org/Function_Reference/rewind_posts](http://codex.wordpress.org/Function_Reference/rewind_posts)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T02:00:31.973

您可以使用简单的计数器和模数来完成此操作。

```
<?php $i = 0; if (have_posts()) : while (have_posts()) : the_post(); ?>
<?php $odd = ++$i % 2; ?>

    <?php if($odd) : ?>
        <div class="dual-post-wrapper">
    <?php endif; ?>

            <div class="post-<?php the_ID(); ?>">
                         <?php the_content(); ?>
            </div>

    <?php if(!$odd) : ?>
        </div>
    <?php endif; ?>

<?php endwhile; endif; ?> 
```

如果您总是有偶数个帖子，那应该可以。您可能应该事先计算帖子的数量并关闭 div`if(!$odd || $last)`

# java - 从另一个 JFrame 获取变量信息时遇到问题

> ID：10149925
> 
> 赞同：3
> 
> 时间：2012-04-14T00:22:40.247
> 
> 标签：java, swing, jframe, joptionpane

我正在尝试创建类似于 JOptionPane 的东西，但会从输入中获得不止一 (3) 个变量。所以我想我会使用一个单独的具有三个文本字段的 JFrame。我使用 Get 和 Set 之类的访问方法将变量从一个类获取到另一个类，但我得到了一个空指针异常。我想我会以错误的方式获取变量，并且很难找到可行的解决方案。

```
public class Instructor()
{
public void Insert(JPanel panel)
{
panel.removeAll();
panel.updateUI();
//ResultSet resultSet = null;
    String bNum = "";
String fName = "";  
String lName = "";

    InsertFrame insert = new InsertFrame();
    insert.setVisible(true);
    bNum = insert.getBNumber();
fName = insert.getFirstName();  
lName = insert.getLastName();

    /*
    String bNum = JOptionPane.showInputDialog("Enter BNumber");
    String fName = JOptionPane.showInputDialog("Enter First Name");
    String lName = JOptionPane.showInputDialog("Enter Last Name");*/
try
{
    connection = DriverManager.getConnection(URL);
    insertNewInstructor = connection.prepareStatement(
    "INSERT INTO Instructor" + "(BNumber, FirstName, LastName)" + "VALUES           (?,?,?)");
}catch(SQLException sqlException){
    sqlException.printStackTrace();
    System.exit(1);
}//end catch

try
{
    insertNewInstructor.setString(1, bNum);
    insertNewInstructor.setString(2, fName);
    insertNewInstructor.setString(3, lName);
    insertNewInstructor.executeUpdate();
}catch(SQLException sqlException){
        sqlException.printStackTrace();
}//end of catch
finally
{
    close();
}//end 

Display(panel);

 }//end of insert method
 }//end of class Instructor

class InsertFrame extends JFrame implements ActionListener
{

private JTextField bNumber;
private JLabel bNum;
private JTextField firstName;
private JLabel fName;
private JTextField lastName;
private JLabel lName;
private JButton ok;
private JPanel fieldPanel;
    private JPanel buttonPanel;
    private String bNumr = "";
    private String frName = "";
    private String lsName = "";

public InsertFrame()
{
bNumber = new JTextField(10);
bNum = new JLabel();
firstName = new JTextField(10);
fName = new JLabel();
lastName = new JTextField(10);
lName = new JLabel();

fieldPanel = new JPanel();
fieldPanel.setLayout(new GridLayout(3,2,4,4));
bNum.setText("B-Number:");
fieldPanel.add(bNum);
fieldPanel.add(bNumber);
fName.setText("First Name:");
fieldPanel.add(fName);
fieldPanel.add(firstName);
lName.setText("Last Name:");
fieldPanel.add(lName);
fieldPanel.add(lastName);
    ok = new JButton("Ok");
    ok.addActionListener(this);

this.add(fieldPanel, BorderLayout.CENTER);
this.add(buttonPanel,BorderLayout.SOUTH);

this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
this.setSize(310,300);
this.setResizable(false);
this.setVisible(false);
}//end of constructor
public void actionPerformed(ActionEvent e)
{
bNumr = bNumber.getText();
frName = firstName.getText();
lsName = lastName.getText();
}//end of method actionPerformed

public void setBNumber(String number)
{
bNumr = number;
}//end of setBNumber
public String getBNumber()
{
return bNumr;
}//end of getBNumber method
public void setFirstName(String firstN)
{
frName = firstN;
}//end of setFirstName
public String getFirstName()
{
return frName;
}//end of getFirstName method
public void setLastName(String lastN)
{
lsName = lastN;
}//end of setLastName method
public String getLastName()
{
return lsName;
}//end of getLastName method
}//end of InsertFrame 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-14T01:42:46.220

同样，为什么不使用 JOptionPane？许多人误解了这些有用的结构，认为它们只能用于最简单的 gui，而事实并非如此。使用这些以获得最大功能的关键是要了解大多数 JOptionPane 方法中的第二个参数是`Object`，并且这个 Object 可以是一个非常复杂的甚至是一个包含其他组件的大型 JPanel，包括其他 JPanel、JTables、JComboBoxes 等。 . 我用它来向用户展示复杂的模态输入对话框，就像你想要做的一样。然后，当 JOptionPane 被处理并且程序流程返回到您的程序时，您查询显示在 JOptionPane 中的复杂 GUI 的属性并提取其信息。[再次，请在此处](https://stackoverflow.com/a/9952457/522444)查看我的链接，看看我的意思。

例如，对于您的情况，如果您想要一个包含 3 个 JTextField 的 JPanel 来获取您的 b 编号、名字和姓氏信息，只需创建一个包含 JTextField 及其相应 JLabel 的 JPanel：

```
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.util.HashMap;
import java.util.Map;

import javax.swing.BorderFactory;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;

class PlayerEditorPanel extends JPanel {
   enum FieldTitle {
      B_NUMBER("B Number"), FIRST_NAME("First Name"), LAST_NAME("Last Name");
      private String title;

      private FieldTitle(String title) {
         this.title = title;
      }

      public String getTitle() {
         return title;
      }
   };

   private static final Insets WEST_INSETS = new Insets(5, 0, 5, 5);
   private static final Insets EAST_INSETS = new Insets(5, 5, 5, 0);
   private Map<FieldTitle, JTextField> fieldMap = new HashMap<FieldTitle, JTextField>();

   public PlayerEditorPanel() {
      setLayout(new GridBagLayout());
      setBorder(BorderFactory.createCompoundBorder(
            BorderFactory.createTitledBorder("Player Editor"),
            BorderFactory.createEmptyBorder(5, 5, 5, 5)));
      GridBagConstraints gbc;
      for (int i = 0; i < FieldTitle.values().length; i++) {
         FieldTitle fieldTitle = FieldTitle.values()[i];
         gbc = createGbc(0, i);
         add(new JLabel(fieldTitle.getTitle() + ":", JLabel.LEFT), gbc);
         gbc = createGbc(1, i);
         JTextField textField = new JTextField(10);
         add(textField, gbc);

         fieldMap.put(fieldTitle, textField);
      }
   }

   private GridBagConstraints createGbc(int x, int y) {
      GridBagConstraints gbc = new GridBagConstraints();
      gbc.gridx = x;
      gbc.gridy = y;
      gbc.gridwidth = 1;
      gbc.gridheight = 1;

      gbc.anchor = (x == 0) ? GridBagConstraints.WEST : GridBagConstraints.EAST;
      gbc.fill = (x == 0) ? GridBagConstraints.BOTH
            : GridBagConstraints.HORIZONTAL;

      gbc.insets = (x == 0) ? WEST_INSETS : EAST_INSETS;
      gbc.weightx = (x == 0) ? 0.1 : 1.0;
      gbc.weighty = 1.0;
      return gbc;
   }

   public String getFieldText(FieldTitle fieldTitle) {
      return fieldMap.get(fieldTitle).getText();
   }

} 
```

然后在 JOptionPane 中显示它，如下所示：

```
PlayerEditorPanel playerEditorPanel = new PlayerEditorPanel();

int result = JOptionPane.showConfirmDialog(null, playerEditorPanel,
    "Edit Player JOptionPane", JOptionPane.OK_CANCEL_OPTION,
    JOptionPane.PLAIN_MESSAGE); 
```

然后从 JPanel 中提取必要的信息：

```
 if (result == JOptionPane.OK_OPTION) {
           for (PlayerEditorPanel.FieldTitle fieldTitle : PlayerEditorPanel.FieldTitle
                 .values()) {
              textArea.append(String.format("%10s: %s%n",
                    fieldTitle.getTitle(),
                    playerEditorPanel.getFieldText(fieldTitle)));
           }
        } 
```

主类可能如下所示：

```
import java.awt.*;
import java.awt.event.*;
import java.util.HashMap;
import java.util.Map;

import javax.swing.*;

@SuppressWarnings("serial")
public class ComplexOptionPane extends JPanel {
   private PlayerEditorPanel playerEditorPanel = new PlayerEditorPanel();
   private JTextArea textArea = new JTextArea(12, 30);

   public ComplexOptionPane() {
      textArea.setEditable(false);
      textArea.setFocusable(false);
      textArea.setFont(new Font(Font.MONOSPACED, Font.PLAIN, 16));
      JPanel bottomPanel = new JPanel();
      bottomPanel.add(new JButton(new AbstractAction("Get Player Information") {

         @Override
         public void actionPerformed(ActionEvent arg0) {
            int result = JOptionPane.showConfirmDialog(null, playerEditorPanel,
                  "Edit Player JOptionPane", JOptionPane.OK_CANCEL_OPTION,
                  JOptionPane.PLAIN_MESSAGE);
            if (result == JOptionPane.OK_OPTION) {
               for (PlayerEditorPanel.FieldTitle fieldTitle : PlayerEditorPanel.FieldTitle
                     .values()) {
                  textArea.append(String.format("%10s: %s%n",
                        fieldTitle.getTitle(),
                        playerEditorPanel.getFieldText(fieldTitle)));
               }
            }
         }
      }));
      setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
      setLayout(new BorderLayout(5, 5));
      add(new JScrollPane(textArea), BorderLayout.CENTER);
      add(bottomPanel, BorderLayout.PAGE_END);
   }

   private static void createAndShowGui() {
      ComplexOptionPane mainPanel = new ComplexOptionPane();

      JFrame frame = new JFrame("ComplexOptionPane");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

# python - 带有 Django 设置的 Mysql

> ID：10149927
> 
> 赞同：0
> 
> 时间：2012-04-14T00:22:58.967
> 
> 标签：python, mysql, django, terminal

我在我的 mac os x 10.5 上设置 django 项目时遇到问题。我一直在遵循[本网站](http://anthonyscherba.com/site/blog/django-mysql-install-mac)上的建议并取得了一些成功。我已经能够分别成功安装mysql、mysql-python和django。当我尝试运行`Applications/mysql/bin/mysql -u root -p`以设置 mysql 服务器时（如链接文章中的第 8 点），我收到错误消息：

`ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)`

有关如何解决此问题的任何帮助，以便我可以连接 django / mysql 并开始在本地开发？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T03:41:01.257

有时 mysql.sock 位于不同的位置。您可以将其符号链接到 /tmp/mysql.sock

关闭mysql。

执行：ln -s /var/lib/mysql/mysql.sock /tmp/mysql.sock

启动mysql备份。

希望有帮助。

# android - 你如何从另一个活动中调用主启动器活动？

> ID：10149939
> 
> 赞同：5
> 
> 时间：2012-04-14T00:24:46.780
> 
> 标签：android, android-intent, main

在我的程序中，我有一个在应用程序打开时启动的活动。如果我再打开几个活动，我怎样才能回到主要活动？在意图过滤器中，活动的名称是“android.intent.action.MAIN”，它不允许我对其调用 startActivity()。我该怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-14T02:41:27.837

您可以通过[Intent](http://developer.android.com/reference/android/content/Intent.html)做到这一点。

```
Intent startMain = new Intent(Intent.ACTION_MAIN);
startMain.addCategory(Intent.CATEGORY_HOME);
startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(startMain); 
```

此 Intent 将启动用户定义的启动器应用程序。请注意这一点，因为如果用户不希望发生这种情况，这看起来就像您的应用程序崩溃了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T01:16:31.060

```
Intent intent = new Intent(this, MainActivity.class);
            intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(intent); 
```

假设您的活动堆栈如下... MainActivity > Activity1 > Activity2> Activity3，运行上面的代码将关闭活动 1 和 2 并恢复 MainActivity

# php - Symfony 2 中的 Doctrine 2 - 通过关联过滤 QueryBuilder

> ID：10149941
> 
> 赞同：5
> 
> 时间：2012-04-14T00:25:41.893
> 
> 标签：php, symfony, doctrine-orm, dql, query-builder

我有两个类`User`和`Role`，我需要创建一个`QueryBuilder`返回具有该`ROLE_PROVIDER`角色的用户的查询。我需要在 Symfony 2 中的实体表单字段中使用它。在表单类定义中，我对提到的字段有以下片段：

```
$builder->add('provider', 'entity', array(
    'class'    => 'ElCuadreAccountBundle:User',
    'property' => 'username',
    'query_builder' => function(UserRepository $ur) {
                         return $ur->getUsersByRoleQB('ROLE_PROVIDER');
                       },
    'required' => true,
)); 
```

然后在我的自定义中，`UserRepository`我有以下函数，它应该返回一个`QueryBuilder`对象：

```
public function getUsersByRoleQB($role) {
    $qb = $this->createQueryBuilder('u');
    return $qb->join('u.roles','r')
              ->where($qb->expr()->in('r.role',$qb->expr()->literal($role)))
              ->orderBy('u.username', 'ASC');
} 
```

当然这不起作用，但我粘贴它以说明我的需求。

我一直在环顾四周，似乎 Doctrine2 不支持通过关联进行本地过滤。在[此页面](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.1/reference/faq.html)中，他们这样说，并建议使用`DQL`这种过滤。我的问题是我还没有找到如何从一个句子中制造一个`QueryBuilder`对象。`DQL`如果您也可以向我提供正确的`DQL`查询，我将非常感激...

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-14T17:15:29.650

实际上应该在哪里做你想做的事。你只是有'in'的语法错误：

这

```
->where($qb->expr()->in('r.role',$qb->expr()->literal($role))) 
```

应该

```
->where($qb->expr()->in('r.role',$role)) 
```

我知道这可能看起来有点奇怪，但由于准备好的语句不直接支持数组，所以 IN 子句的参数总是必须单独转义（哪个学说适合你）。因此，对于需要文字的 eq 表达式来说，语法有点不同。

您确实提出了一个很好的问题，因为我需要按关联进行过滤。我认为 D2.2 将允许这个开箱即用。我还没有真正尝试过，但我怀疑

```
$dql = 'a,b FROM whatever...'; // Don't start with SELECT
$qb->select($dql); 
return $qb; 
```

只要您将实际的 'SELECT' 字符串从 $dql. 未经测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T19:46:44.280

更简单的是你还可以这样做：

```
->where('r.role IN (:role)' )
->setParameter( 'role', $role ); 
```

我发现这比添加 $qb->expr()... 更清晰。

# jquery - 在浏览器窗口底部自动隐藏导航

> ID：10149952
> 
> 赞同：1
> 
> 时间：2012-04-14T00:27:29.757
> 
> 标签：jquery, navigation

让我的导航 div 正确自动隐藏时遇到问题。

我想要发生的是：

默认情况下，我的导航是隐藏的。

当用户单击链接或用户在浏览器窗口底部附近使用鼠标时，导航将出现（向上滑动）。我的导航位于 id 为“tS2”的 div 中。当用户将鼠标移离导航 div 时，导航将在短暂延迟后隐藏（向下滑动）。

我的鼠标位置脚本正常工作

```
$(document).mousemove(function(ev){
 var ev = ev || window.event;
 //console.log('Mouse y ='+ev.pageY);
 if(ev.pageY>(_windowHeight-120)){
    console.log('YES triggered show nav!');
    showNav(true,1000)
 } 
```

});

这是我的 showav 函数，它在文档加载时可以正常工作。但是当我调用 showNav(true,1000) 时，导航会立即跳转到视图中，而不是逐渐超过 1 秒（我的持续时间）。谁能发现我的错误？

```
function showNav(bflag,dur,delay){
if(bflag===true){
    $("#tS2").stop(true,true).animate({
                'bottom':'0'
            }, dur);
}else{
    $("#tS2").stop(true,true).animate({
                'bottom':'-125px'
            }, dur);
}
}

showNav(false,1000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T01:11:58.127

根据你的描述，我把这个小提琴放在一起

[http://jsfiddle.net/zPs4G/3/](http://jsfiddle.net/zPs4G/3/)

试试看 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T00:40:01.543

您没有提供很多细节，但听起来您希望导航执行以下操作：

```
$('#tS2').slideToggle('slow', function() {
    // Animation complete.
}); 
```

把它放在你的 console.log 的位置，我想你差不多完成了。您只需要一个相应的 if 语句来触发鼠标移出事件，但您已经知道如何做到这一点。

# asp.net - 如何在网格视图中显示大量数据而不导致页面崩溃？

> ID：10149956
> 
> 赞同：0
> 
> 时间：2012-04-14T00:27:42.133
> 
> 标签：asp.net, sql, linq

**我正在使用 linq 连接到数据库，这是我第一次显示来自数据库的大量数据，所以我不知道如何处理它..你能给我提示吗？谢谢！**

```
public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if(!Page.IsPostBack)

        rebind();
    }

    private void rebind()
    {
        using ( var db = new linqDataContext())
        {
            GridView1.DataSource = db.Orders.Select(p => new { p.OrderID, p.CustomerID, p.ShipName, p.ShipCity }).ToList();
            GridView1.DataBind();
        }
    }

    protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        GridView1.PageIndex = e.NewPageIndex;
        rebind();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T00:40:09.563

提示：不要在您的 Web 应用程序中一次显示大量数据。使用分页控件一次只检索和显示数据库中的几行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T00:45:09.680

你有没有考虑分页？您应该能够将 LINQ 结果绑定到 Gridview 数据源。我相信您需要做的就是在 gridview 上设置页面大小，它就会起作用。

我以前做过，但实际上我自己在后面的代码中跟踪页面（和页面大小）并且有类似 LINQ 的东西 `gv.DataSource = (From s In Results Select s).Skip(pageSize * (currPage-1)).Take(pageSize)`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T11:27:38.200

For paging through large amount of data, you need to make use of custom paging.

Custom paging ensures that only the precise set of records needed for a particular page of data is retrieved from the database at a time.

The following link explains in detail how to perform custom paging using the ObjectDataSource control: [http://msdn.microsoft.com/en-us/library/bb445504.aspx](http://msdn.microsoft.com/en-us/library/bb445504.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-15T16:25:51.353

**Paging**. Look at two amazing JQuery based tables (that handle a whole lot of other stuff, for you, like ordering and filtering):

*   [TableSorter](http://tablesorter.com/docs/)
*   [Datatables](http://datatables.net/)

# javascript - 将列表框中的选定项目传递给javascript函数

> ID：10149958
> 
> 赞同：0
> 
> 时间：2012-04-14T00:27:48.233
> 
> 标签：javascript, asp.net-mvc, listbox

我有一个 Html.ListBox 并且在选择一个项目时，我希望它传递项目 ID，以便我可以调用并加载所选项目的信息。将此 id 传递给脚本的最佳方法是什么，或者是否有其他方法？

```
 @Html.ListBox("ListBoxName", new SelectList((IEnumerable<Epic>)ViewData["selectedestimate"], "Id", "Name"), new {@class = "ListBoxClass"})

        <script type="text/javascript">
        $(function () {
            $(".ListBoxClass").click(function (event) {
        event.preventDefault(); // Stop the browser from redirecting as it normally would
        $("#editid").load(this.href, function (response) {
            alert('hello'); //this just for testing
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T00:34:57.383

我认为你不需要将它传递给函数，你应该能够做到这一点：

```
$(this).find("option:selected").val(); 
```

# java - 在 Java 中使用 == 运算符比较包装器对象

> ID：10149959
> 
> 赞同：60
> 
> 时间：2012-04-14T00:28:04.870
> 
> 标签：java, integer, wrapper, equals, operator-keyword

我正在阅读 Kathy Sierra 和 Bert Bates 的 SCJP Java 6，这本书让我非常困惑。在第 245 页上，他们声明下面的代码。

```
Integer i1 = 1000;
Integer i2 = 1000;
if(i1 != i2)
System.out.println("different objects");

//Prints output
different objects 
```

然后在下一页他们有以下代码

```
Integer i3 = 10;
Integer i4 = 10;
if(i3 == i4)
System.out.println("same objects");

//Prints output
same objects 
```

我很混乱！当我自己尝试时，您似乎无法使用 == 来比较使用 equals() 方法的相同方式。即使整数变量设置为相同的值（即 10），使用 == 总是会给我“假”。我对么？使用 == 比较相同的 Integer 对象（具有相同的值）将始终导致 'false'

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-04-14T00:32:28.203

答案的关键被称为*对象实习*。Java 实习生人数很少（小于 128），因此实习生范围内的所有`Integer(n)`with实例`n`都是相同的。大于或等于 128 的数字不会被保留，因此`Integer(1000)`对象彼此不相等。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-04-14T00:57:37.503

如果您查看源代码，`Integer`您会发现`Integer.valueOf(int)` **池**化所有值 -128 到 127。原因是经常使用小的 Integer 值，因此值得被池化/缓存。

直接取自`Integer.java`：

```
public static Integer valueOf(int i) {
    if(i >= -128 && i <= IntegerCache.high)
        return IntegerCache.cache[i + 128];
    else
        return new Integer(i);
} 
```

请注意，此池是特定于实现的，并且不能保证池范围。

关于实习的答案在概念上是正确的，但在术语上是错误的。Java 中的实习通常意味着 Java 运行时正在执行池化（例如 String 的实习生）。在 Integer 的情况下，是类本身进行池化。不涉及 JVM 魔法。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-14T00:43:37.997

上面关于实习的答案是正确的。如果你这样做，需要考虑的事情：

```
Integer i3 = new Integer(10);
Integer i4 = new Integer(10); 
```

由于您已明确创建新对象，因此您将不会拥有新对象。如果您按如下方式编写代码，它将被实习：

```
Integer i3 = Integer.valueOf(10);
Integer i4 = Integer.valueOf(10); 
```

它们现在将再次成为同一个对象。如果您查看 src.zip 文件中 Integer.java 类中的 valueOf 方法，您可以看到它在哪里检查 int 的值是否在 -128 到 127 之外，否则它会调用新的 Integer 类它从缓存中加载它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-16T19:22:51.273

```
Integer i1 = 1000;
Integer i2 = 1000; 
```

编译器将 int 1000“装箱”为 Integer 对象。为此，它将源转换为以下内容：

```
Integer i1 = Integer.valueOf(1000);
Integer i2 = Integer.valueOf(1000); 
```

现在`valueOf`可能是一个简单的调用，`new Integer(1000)`但是每次`int`装箱时创建一个新的 Integer 对象会花费时间和空间。为了避免这种情况，Integer 类为有限范围的 int 值保留了一个 Integer 对象数组。

```
if(value> maxRange || value< minRange){
     //not in pool return new Integer
     return new Integer(value);
}else{
     //return pooled Integer object
     //for the value, pool contains all Integer
     //values from minRange to maxRange
     return integerPool[value-minRange];
} 
```

可以通过在程序启动时使用 jvm 参数设置范围（afaik 默认为 -127 到 128）来调整获得的速度与丢失的内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-23T18:06:10.023

当 Java == 运算符用于比较原始类型以外的任何内容时，它会检查引用相等；即使被比较的东西是包装的原语，这也适用。此外，该`valueOf`方法和编译器生成的自动装箱语句通常可以自由地任意返回一个新对象，该对象将不与任何其他先前存在的引用相等，或者返回对现有对象的引用（当然，与标识同一对象的任何预先存在的引用相同）。实现需要`Integer`为值 -128 到 127 维护一个实例“池”，以便所有调用`Integer.valueOf`在该范围内的任何特定数字上都将返回对同一对象的引用，但除此之外，实现可以自由地做类似的事情

```
static Integer [] intPool = new Integer[256];

public Integer valueOf(int n)
{
  int hash = (n*0x18675309) >>> 24;
  Integer instance = intPool[n];
  if (instance == null && instance.value != n)
  {
    instance = new Integer(n);
    intPool[hash] = instance ;
  }
  return instance;
} 
```

我并不特别期望 Java 实现会做这样的事情，因为在许多情况下，“缓存命中率”可能接近 0%，而在缓存中查找实例所花费的额外时间将被浪费掉。尽管如此，永远不能保证返回的引用`instanceOf`不会匹配该方法返回的某个先前引用（即使它不匹配该方法返回的*最后一个*引用，某些缓存算法可能会导致它返回一个*较早的*引用，特别是如果池由多个线程共享而没有锁定。缺少锁定将永远不会导致代码返回对具有正确值的整数的引用以外的任何内容，但可能会导致返回的引用比较相等的不可预测的变化）。只有对`Integer`直接使用构造函数创建的对象的引用才能`new Integer(n)`保证是唯一的；期望返回的任何引用`valueOf`不匹配返回的任何引用的代码`valueOf`，而实际上没有观察到它不匹配，应该被认为是损坏的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-07T17:11:52.457

使用 == 和 != 的字符串比较和整数比较给出的布尔结果与我们预期的不同。所以要小心并确保可能的未知结果不会影响软件的性能、可靠性和准确性。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-01T17:12:12.790

“==”总是比较值的内存位置或对象引用。equals 方法总是比较值。但 equals 也间接使用“==”运算符来比较值。Integer 使用 Integer 缓存来存储从 -128 到 +127 的值。如果使用 == 运算符检查 -128 到 127 之间的任何值，则返回 true。如果 -128 到 127 之间的任何值作为

```
Integer i1 = -128; 
Integer i2 = -128; 
System.out.println(i1 == i2); // returns true 
```

除了上述范围之外，它返回 false

```
Integer i1 = 1000;
Integer i2 = 1000;
System.out.println(i1 == i2); // returns false 
```

[请参阅链接](https://vijayanbu001.blogspot.com/2016/07/identity-vs-equality-comparison-of.html)以获取更多信息

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-12T10:18:32.660

根据[jls-5.1.7](https://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.7)

```
If the value p being boxed is true, false, a byte, or a char in the range \u0000 to \u007f,   
or an int or short number between -128 and 127 (inclusive), then let r1 and r2 
be the results of any two boxing conversions of p. It is always the case that r1 == r2. 
```

因此，**-128**到**127**之间的任何数字都被 Interger 类缓存。
请记住，比较两个对象时总是使用`equals`方法。

缓存代码写在作为`IntegerCache`类成员的`Integer`类中。

这是代码片段：

```
 /**
 * Cache to support the object identity semantics of autoboxing for values between
 * -128 and 127 (inclusive) as required by JLS.
 *
 * The cache is initialized on first usage.  The size of the cache
 * may be controlled by the {@code -XX:AutoBoxCacheMax=<size>} option.
 * During VM initialization, java.lang.Integer.IntegerCache.high property
 * may be set and saved in the private system properties in the
 * sun.misc.VM class.
 */

private static class IntegerCache {
    static final int low = -128;
    static final int high;
    static final Integer cache[];

    static {
        // high value may be configured by property
        int h = 127;
        String integerCacheHighPropValue =
            sun.misc.VM.getSavedProperty("java.lang.Integer.IntegerCache.high");
        if (integerCacheHighPropValue != null) {
            try {
                int i = parseInt(integerCacheHighPropValue);
                i = Math.max(i, 127);
                // Maximum array size is Integer.MAX_VALUE
                h = Math.min(i, Integer.MAX_VALUE - (-low) -1);
            } catch( NumberFormatException nfe) {
                // If the property cannot be parsed into an int, ignore it.
            }
        }
        high = h;

        cache = new Integer[(high - low) + 1];
        int j = low;
        for(int k = 0; k < cache.length; k++)
            cache[k] = new Integer(j++);

        // range [-128, 127] must be interned (JLS7 5.1.7)
        assert IntegerCache.high >= 127;
    }

    private IntegerCache() {}
} 
```

### 参考

*   [jls-5.1.7](https://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.7)
*   [整数类代码](http://www.docjar.com/html/api/java/lang/Integer.java.html)
*   [整数 Java 文档](https://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html)

# python - 如何使用 httplib 发布 unicode 字符？

> ID：10149961
> 
> 赞同：8
> 
> 时间：2012-04-14T00:28:25.177
> 
> 标签：python, unicode, httplib

我尝试使用以下`httplib.request`功能发布 unicode 数据：

```
s = u"עברית"
data = """
<spellrequest textalreadyclipped="0" ignoredups="1" ignoredigits="1" ignoreallcaps="0">
<text>%s</text>
</spellrequest>
""" % s

con = httplib.HTTPSConnection("www.google.com")
con.request("POST", "/tbproxy/spell?lang=he", data)
response = con.getresponse().read() 
```

然而这是我的错误：

```
Traceback (most recent call last):
  File "C:\Scripts\iQuality\test.py", line 47, in <module>
    print spellFix(u"╫á╫נ╫¿╫ץ╫ר╫ץ")
  File "C:\Scripts\iQuality\test.py", line 26, in spellFix
    con.request("POST", "/tbproxy/spell?lang=%s" % lang, data)
  File "C:\Python27\lib\httplib.py", line 955, in request
    self._send_request(method, url, body, headers)
  File "C:\Python27\lib\httplib.py", line 989, in _send_request
    self.endheaders(body)
  File "C:\Python27\lib\httplib.py", line 951, in endheaders
    self._send_output(message_body)
  File "C:\Python27\lib\httplib.py", line 815, in _send_output
    self.send(message_body)
  File "C:\Python27\lib\httplib.py", line 787, in send
    self.sock.sendall(data)
  File "C:\Python27\lib\ssl.py", line 220, in sendall
    v = self.send(data[count:])
  File "C:\Python27\lib\ssl.py", line 189, in send
    v = self._sslobj.write(data)
UnicodeEncodeError: 'ascii' codec can't encode characters in position 97-102: or
dinal not in range(128) 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-14T00:58:46.903

http 不是根据特定的字符编码定义的，而是使用八位字节。您需要将数据转换为编码，然后您需要告诉服务器您使用了哪种编码。让我们使用 utf8，因为它通常是最好的选择：

此数据看起来有点像 XML，但您跳过了 xml 标记。某些服务可能会接受这一点，但无论如何您都不应该接受。事实上，编码实际上属于那里；所以请确保包含它。标题看起来像`<?xml version="1.0" encoding="`*encoding*`"?>`。

```
s = u"עברית"
data_unicode = u"""<?xml version="1.0" encoding="UTF-8"?>
<spellrequest textalreadyclipped="0" ignoredups="1" ignoredigits="1" ignoreallcaps="0">
<text>%s</text>
</spellrequest>
""" % s

data_octets = data_unicode.encode('utf-8') 
```

出于礼貌，您还应该使用`content-type`标头告诉服务器本身格式和编码：

```
con = httplib.HTTPSConnection("www.google.com")
con.request("POST",
            "/tbproxy/spell?lang=he", 
            data_octets, {'content-type': 'text/xml; charset=utf-8'}) 
```

编辑：它在我的机器上运行良好，你确定你没有跳过什么吗？完整的例子

```
>>> from cgi import escape
>>> from urllib import urlencode
>>> import httplib
>>> 
>>> template = u"""<?xml version="1.0" encoding="UTF-8"?>
... <spellrequest textalreadyclipped="0" ignoredups="1" ignoredigits="1" ignoreallcaps="0">
... <text>%s</text>
... </spellrequest>
... """
>>> 
>>> def chkspell(word, lang='en'):
...     data_octets = (template % escape(word)).encode('utf-8')
...     con = httplib.HTTPSConnection("www.google.com")
...     con.request("POST",
...         "/tbproxy/spell?" + urlencode({'lang': lang}),
...         data_octets,
...         {'content-type': 'text/xml; charset=utf-8'})
...     req = con.getresponse()
...     return req.read()
... 
>>> chkspell('baseball')
'<?xml version="1.0" encoding="UTF-8"?><spellresult error="0" clipped="0" charschecked="8"></spellresult>'
>>> chkspell(corpus, 'he')
'<?xml version="1.0" encoding="UTF-8"?><spellresult error="0" clipped="0" charschecked="5"></spellresult>' 
```

我确实注意到，当我粘贴您的示例时，它在终端上的显示顺序与它在浏览器中的显示顺序相反。考虑到希伯来语是一种从右到左的语言，这并不奇怪。

```
>>> corpus = u"עברית"
>>> print corpus[0]
ע 
```

# javascript - 添加事件监听器跨浏览器

> ID：10149963
> 
> 赞同：0
> 
> 时间：2012-04-14T00:28:27.230
> 
> 标签：javascript, events

我的问题在这里：为什么这段代码不起作用？？？？？？...消息没有出现

我正在尝试在事件单击时将事件侦听器添加到元素 x

```
 function test()
    {
    alert("test");
    }

var EventsCrossBrowsers = 
 {
    addEvents:(function(element,event,func)
              {
                    if(element.addEventListener)
                    {
                        return elemenet.addEventListener(event,func,false);
                    }
                    else if(elemenet.attachEvent)
                    {
                        return elemenet.attachEvent("on"+event,func);
                    }
              }());
 }

 var x =document.getElementById("test");

EventsCrossBrowsers.addEvents(x,"click",test); 
```

非常感谢 jfriend00 .... 我认为最简单的方式：-

```
function test()
{
    alert("test");
}

function addEventsCrossBrowsers(elemenet,event,func)
{
    if(elemenet.addEventListener)
    {
        elemenet.addEventListener(event,func,false);
    }
    else if(elemenet.attachEvent)
    {
        elemenet.attachEvent("on"+event,func);
    }
}
var x =document.getElementById("test");
addEventsCrossBrowsers(x,"click",test); 
```

您的第二种方式几乎相同，只是我不明白返回...再次感谢您...

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-14T00:43:22.363

在您的功能中，我看到您同时使用`elemenet`和`element`它们应该是相同的拼写。这至少是问题的一部分。

我也看到你的`addEvents`函数是一个自执行函数，在这方面没有意义。看起来它应该只是一个正常的功能。

这是我的跨浏览器事件函数。除了创建一个用于添加事件处理程序的函数之外，它还对`this`指针和`events`对象进行了规范化，因此它们也可以在任何浏览器中被同等对待。

```
// add event cross browser
function addEvent(elem, event, fn) {
    // avoid memory overhead of new anonymous functions for every event handler that's installed
    // by using local functions
    function listenHandler(e) {
        var ret = fn.apply(this, arguments);
        if (ret === false) {
            e.stopPropagation();
            e.preventDefault();
        }
        return(ret);
    }

    function attachHandler() {
        // set the this pointer same as addEventListener when fn is called
        // and make sure the event is passed to the fn also so that works the same too
        var ret = fn.call(elem, window.event);   
        if (ret === false) {
            window.event.returnValue = false;
            window.event.cancelBubble = true;
        }
        return(ret);
    }

    if (elem.addEventListener) {
        elem.addEventListener(event, listenHandler, false);
        return {elem: elem, handler: listenHandler, event: event};
    } else {
        elem.attachEvent("on" + event, attachHandler);
        return {elem: elem, handler: attachHandler, event: event};
    }
}

function removeEvent(token) {
    if (token.elem.removeEventListener) {
        token.elem.removeEventListener(token.event, token.handler);
    } else {
        token.elem.detachEvent("on" + token.event, token.handler);
    }
} 
```

`this`如果您想要一个没有传播和默认预防选项但具有`event`规范化的更简单的版本，那就是：

```
// add event cross browser
function addEvent(elem, event, fn) {
    if (elem.addEventListener) {
        elem.addEventListener(event, fn, false);
    } else {
        elem.attachEvent("on" + event, function() {
            // set the this pointer same as addEventListener when fn is called
            return(fn.call(elem, window.event));   
        });
    }
} 
```

# ruby-on-rails - 如何根据多对多相关模型的属性查找记录？

> ID：10149970
> 
> 赞同：2
> 
> 时间：2012-04-14T00:29:04.697
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, arel

楷模...

```
InternalUser
  has_many :internal_user_roles
  has_many :roles, :through => :internal_user_roles

InternalUserRole
  belongs_to :internal_user
  belongs_to :role

Role
  has_many :internal_user_roles
  has_many :internal_users, :through => :internal_user_roles 
```

使用新的 ActiveRecord 查询 API，我如何找到所有`InternalUser`具有“ADMIN”角色的 s？

换句话说，我如何生成这个查询......

```
SELECT
  *
FROM
  internal_users i, internal_user_roles ir, roles r
WHERE
  i.id = ir.internal_user_id
AND
  r.id = ir.internal_user_id
AND
  r.name = 'ADMIN' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-14T01:04:39.913

理想情况下，您应该从一个作为管理员角色的对象开始：

```
role = Role.find_by_name('ADMIN') 
```

然后您可以简单地查询该角色的内部用户：

```
role.internal_users 
```

如果你想更进一步，你应该注意 ActiveRecord 中的所有关联都可以进一步查询：

```
role.internal_users.where(:first_name => 'Bill').limit(5) 
```

回到最初的问题，或者您可以查询 InternalUser 模型：

```
InternalUser.includes(:roles).where(['roles.id = ?', role]) 
```

或者可能更快一点，但更复杂的代码：

```
InternalUser.includes(:internal_user_roles).where(['internal_user_roles.role_id = ?', role]) 
```

要直接翻译你的 SQL 查询，你也可以这样做：

```
InternalUser.includes(:roles).where("roles.name = 'ADMIN'") 
```

您还可以通过在末尾放置一个“to_sql”调用来查看 ActiveRecord 将生成的 SQL（对于这些查询中的任何一个），如下所示：

```
InternalUser.includes(:roles).where("roles.name = 'ADMIN'").to_sql 
```

# php - 如何从多个 MySQL 数据库中添加值

> ID：10149973
> 
> 赞同：3
> 
> 时间：2012-04-14T00:29:36.493
> 
> 标签：php, mysql, count

我正在尝试添加来自多个 mysql 数据库的项目数（我还没有添加部分）以打印我主页上的记录总数。

我已经从谷歌搜索的几个网站中获取了“计数”代码基础知识，但有些地方不太对劲。如果我在 phpMyAdmin 中单独运行下面的查询，它可以正常工作（我从这 1 个数据库中获得 36 个结果），但是当我通过下面的代码在我的 php 页面中运行它时，它只返回计数 1。

知道我在搞砸什么吗？谢谢。

```
$connection="localhost";
$username="myusername";
$password="mypassword";
$database1="mydb1";
$database2="mydb2";

$db1 = mysql_connect($connection,$username,$password) or die(mysql_error());
$sel1 = mysql_select_db($database1, $db1);
$query1 = "SELECT count(postID) FROM my_table";
$result1 = mysql_query($query1, $db1);

$db2 = mysql_connect($connection,$username,$password) or die(mysql_error());
$sel2 = mysql_select_db($database2, $db2);
$query2 = "SELECT count(postID) FROM my_table";
$result2 = mysql_query($query2, $db2) or die(mysql_error());

$total_rows = mysql_num_rows($result2);
print $total_rows; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T00:41:02.230

由于它们位于同一数据库主机 (localhost) 上，因此您可以在一次查询中获取它们。此方法使用子`UNION`查询将来自每个数据库的查询组合在一起，然后进行聚合`SUM()`以将它们加在一起。

```
SELECT SUM(postcounts) AS total
FROM (
  SELECT COUNT(postId) AS postcounts FROM mydb1.my_table
  UNION ALL 
  SELECT COUNT(postId) AS postcounts FROM mydb2.my_table
) allposts 
```

您`mysql_num_rows()`返回计数 1 的原因是因为您的每个查询只返回一行 - 聚合`COUNT(postIdD)`。如果要检索实际计数，则需要获取该行。

假设上面的查询存储在 中`$result`，您需要的值别名为`total`：

```
if ($result) {
  $row = mysql_fetch_assoc($result);
  echo $row['total'];
} 
```

整个事情看起来像：

```
$db1 = mysql_connect($connection,$username,$password) or die(mysql_error());
mysql_select_db($database1, $db1);
$query = "    
    SELECT SUM(postcounts) AS total
    FROM (
      SELECT COUNT(postId) AS postcounts FROM mydb1.my_table
      UNION ALL 
      SELECT COUNT(postId) AS postcounts FROM mydb2.my_table
    ) allposts ";

$result = mysql_query($query, $db1);

// Fetch the resultant row
if ($result) {
  $row = mysql_fetch_assoc($result);
  echo $row['total'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T00:34:15.617

您正在建立 2 个连接，但您只打印来自连接 2 的结果：

```
$total_rows = mysql_num_rows($result2);
print $total_rows; 
```

执行以下操作：

```
$total_rows = mysql_num_rows($result2 + $result1);
print $total_rows; 
```

# css - 如何使用内联内容制作 div？

> ID：10149977
> 
> 赞同：2
> 
> 时间：2012-04-14T00:30:44.350
> 
> 标签：css, html

[http://i.imgur.com/37miZ.png](http://i.imgur.com/37miZ.png)这里是截图

我正在尝试对其进行样式设置，使 h1 位于左侧，输入位于中间，然后我想在右侧有一些链接。

我尝试使用浮动，它只是破坏了一切。

**编辑**

当我使用 float:left 或 float:right 时，我得到 2 个 div 来分开，但定位很糟糕。

我有一些html：

```
<div id="container">
            <div id="header">
                <div id="nytm">
                    <h1>New York Tech Map</h1>
                </div>
                <div id="form">
                    <form>
                        <input type="text" name="zip">
                        <input type="submit" value="Search By Zip">
                    </form>
                </div>
                <div id="navlinks">
                </div>
            </div>
</div> 
```

这是CSS：

```
#container {
    min-height: 100%;
    position: relative;
}
#header {
    background: #EDEDED;
    height: 79px;
    border-bottom: 1px solid #666;  
}

#nytm{
    display: inline;
}

#form{
    margin-top: 24px;
    display: inline;
}

#navlinks{
    display: inline;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T00:47:28.580

好的，请按照以下步骤操作：

在你的 css 文件中，放置这个`clearfix`样式类：

```
 .clearfix:after{content:".";display:block;clear:both;visibility:hidden;line-height:0;height:0;}
    .clearfix{display:inline-block;}
    html[xmlns] .clearfix{display:block;}
    * html .clearfix{height:1%;}

    .fr{float:right;display:inline-block;}
    .fl{float:left;display:inline-block;} 
```

下一部分将需要这个类。

现在让我们看看我们在该`HTML`部分中需要什么：

```
 <div class="clearfix container">
        <div class="fl search-zone">
            <!-- YOUR SEARCH INPUT AND BUTTON HERE -->
            <input type="text" /> <button>SEARCH</button>
        </div>
        <div class="fr links">
            <!-- YOUR LINKS HERE -->
            <a href="">LINK 1</a> <a href="">LINK 2</a> <a href="">LINK 3</a>
        </div>
    </div> 
```

*   该类`clearfix`将帮助您在其中定位任何浮动元素，这是一个跨浏览器的解决方案。*强烈建议给课程`search-zone`和`links`a`width`以防止IE问题。

希望这就是你要找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T00:50:37.423

在这里检查一下，为什么他们的定位在使用浮动时很糟糕。我调整css并查看输出

```
http://jsfiddle.net/Bq9eq/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T21:01:13.673

我这样做的方法是首先制作一个大 div，然后将每个字段放入自己的 div 中，这将创建一个内部具有相等间距 div 的大 div，然后在其上执行 css 会更容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-14T00:55:05.230

我认为您的意思是您希望在标题中有三列。

一种方法是创建三个单独的 div。

```
<div class="top-container"></div> 
<div class="top-container"></div> 
<div class="top-container"></div> 
```

Clearfix 容器并浮动孩子

```
#header .top-container{
  width:33%;
  float:left;
} 
```

检查这个小提琴的完整代码：http: [//jsfiddle.net/xZC3G/2/](http://jsfiddle.net/xZC3G/2/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-14T00:37:03.713

不太清楚你的意思，但请记住，每个新 div 都是块级元素，所以它有自己的行，除非你另有说明。尝试使用 display:inline 与您的浮动。

# c++ - 我不想在使用 std::cin 后跳到换行符

> ID：10149978
> 
> 赞同：0
> 
> 时间：2012-04-14T00:30:56.217
> 
> 标签：c++, xcode, newline, cin

我正在写一个带有一些终端轮廓的简单名称。但是，当我使用 using 获得输入时`cin`，我的边框就会混乱。通过 using 输入输入后，有什么方法可以防止换行符`cin`？

我正在使用 XCode 4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T02:03:19.120

如果您想完全控制终端显示，您可能需要使用`curses`库或类似的东西（`ncurses`例如在 GNU 系统上）。这允许您控制字符的显示并在输入过程中抑制字符的自动回显，因此不会有任何换行符。但是，你也不会再使用`stdin::cin`了。

使用`std::cin`意味着您必须接受您的程序在输入换行符之前看不到任何数据，并且终端通常会在该点滚动。（并非总是如此；如果当前行位于屏幕顶部附近，则不会滚动。）

# c# - 控制创建实体框架 ObjectContext 的频率

> ID：10149980
> 
> 赞同：2
> 
> 时间：2012-04-14T00:30:57.993
> 
> 标签：c#, .net, entity-framework, entity-framework-4.1, edmx

我有一个相当大的 SQL 支持的 ASP.NET 项目，它使用实体框架与数据库进行交互。

我的问题是，我应该创建一个由每个类/方法中的 edmx/designer 文件定义的 ObjectContext 的实例 - 还是 - 将它包装在一个静态类周围，该类将实例化 onload 并基本上通过一个实例处理所有请求。

我将有多个用户使用 ObjectContext 来读取和更新数据库，并发性和线程安全是我最关心的问题。

**编辑：** 此代码最终将在 IIS 中运行并且容易被回收。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T09:45:36.017

在大多数情况下，每个请求只需要一个上下文。只有特殊场景才能在每个请求中需要更多上下文，但[绝不会在请求之间共享上下文](https://stackoverflow.com/questions/3653009/entity-framework-and-connection-pooling/3653392#3653392)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T10:00:48.040

> ObjectContext 类不是线程安全的。在多线程场景下，无法保证 ObjectContext 中数据对象的完整性。

来源：http: [//msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.aspx](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.aspx)

因此，最好的方法是对每个 HTTP 请求使用 ObjectContext。创建一个`RepositoryBase`类，每个存储库都在`RepositoryBase`定义通用 CRUD 操作（**最好是通用**的）中扩展，并仅`null`在请求时创建一个新实例。

# python - 试图将一个字符串插入另一个字符串的 ax 位置

> ID：10149981
> 
> 赞同：1
> 
> 时间：2012-04-14T00:31:50.237
> 
> 标签：python

这是我到目前为止所拥有的。是为了做功课。我们不能使用切片。我似乎无法弄清楚。

```
def insert(s1, s2, pos):
    s3 = list(s1)
    for i,s in enumerate(s3):
        if i == pos:
            s3[pos + 1] = s
            s3[i] = s2
    "".join(s3)     
    return s3 
```

使用上述方法，字符串的最后一个字符`s1`被删除，并且该`join`方法不会加入`s3`单个字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T00:35:56.897

注意线条

```
"".join(s3)     
return s3 
```

如果您查看[join 文档](http://docs.python.org/library/stdtypes.html#str.join)，您会发现 join 不会修改其参数，而是生成一个包含参数列表内容的字符串，所有内容都连接在一起。所以你扔掉了结果

```
"".join(s3) 
```

并返回`s3`（列表）。因此，您需要将最后两行更改为

```
return ''.join(s3) 
```

由于这是作业，我不会对其余代码发表评论，但返回 join 调用的结果肯定会有所帮助。

# c# - LINQ 先选择

> ID：10149982
> 
> 赞同：24
> 
> 时间：2012-04-14T00:31:54.990
> 
> 标签：c#, linq, lambda

嗨，我有这段 linq 代码

```
var fp = lnq.attaches.First(a => a.sysid == sysid).name; 
```

分析时，它会生成以下 t-sql

```
SELECT TOP (1) [t0].[sysid], [t0].[name], [t0].[att_size], [t0].[cid], [t0].[flags], [t0].[contents] 
FROM [lntmuser].[attach] AS [t0] 
```

在我看来，它像 select * 一样返回，这将导致查询执行表扫描而不是使用索引。对性能不利。

我怎么能只选择名称列，例如：

```
SELECT TOP (1)[t0].[name] FROM [lntmuser].[attach] AS [t0] 
```

提前致谢

* * *

编辑：根据需要破碎的眼镜解决方案配置文件

```
SELECT TOP (1) [t0].[name]
FROM [lntmuser].[attach] AS [t0]
WHERE [t0].[sysid] = @p0 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-14T00:35:20.403

在使用之前项目到`name`属性`First()`：

```
var fp = lnq.attaches.Where(a => a.sysid == sysid)
                     .Select(a => a.name)
                     .First(); 
```

不过，这不会改变索引的使用 - 因为您的`Where`子句负责（在您的初始查询中，您传递给 lambda `First()`）。两个查询都受益于`name`列上的索引，第二个查询更快，因为只需实现一个列值。

# matlab - 在 MATLAB 中绘图时循环颜色

> ID：10149988
> 
> 赞同：7
> 
> 时间：2012-04-14T00:32:50.107
> 
> 标签：matlab, colors, plot

当我使用 在同一个图上绘制多条曲线时`hold on`，每条曲线默认为相同的颜色（蓝色）。我希望它们有所有不同的颜色。

我见过的一个解决方案是制作一个颜色矢量，例如`c = ['k', 'g', 'r', ...]`并循环它，但我不喜欢这个解决方案。如果我的绘图数量大于颜色向量的长度，事情就会中断`c`，而且我不想`c`在每个文件中都定义。

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-14T00:39:00.487

尝试`hold all`改用。您的曲线应自动在颜色图上循环。来自[`help hold`](http://www.mathworks.com/help/techdoc/ref/hold.html)：

> hold all 保存图形和当前线条颜色和线条样式，以便后续绘图命令不会将 ColorOrder 和 LineStyleOrder 属性值重置到列表的开头。绘图命令继续在列表中最后一个图形停止处的预定义颜色和线型之间循环。

您可以使用 来检查颜色图`get(gca,'ColorOrder')`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-14T15:07:47.980

您还可以更改`'ColorOrder'`全局环境的默认属性：

```
set(0,'DefaultAxesColorOrder',hsv(10)) 
```

我将默认颜色替换为`hsv`colormap 给出的一组 10 种颜色。当然，您也可以像我之前所做的那样，使用颜色图颜色生成器（ `hsv`, `hot`, `cooper`, `lines`, ...，用于更多详细信息）中的任何一个来放置任何其他颜色集，或者只是放置任何 nx 3 矩阵。`doc colormap`如果您想为当前轴使用颜色列表：{black, green, red}，您可以：

```
set( gca,'ColorOrder', [0 0 0; 1 0 0; 0 1 0] ) 
```

# ruby-on-rails - 为什么friendly_id 默认为两个破折号？

> ID：10149990
> 
> 赞同：1
> 
> 时间：2012-04-14T00:33:13.790
> 
> 标签：ruby-on-rails, ruby-on-rails-3, friendly-id

好奇为什么[友好](https://github.com/norman/friendly_id)ID 鼓励 2 个破折号，而不是 1 个？

我很感兴趣为什么这是默认逻辑。为什么他们选择两个破折号而不是一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T01:35:23.493

我最近考虑了这一点，并尝试将序列分隔符更改为 1 破折号，而 FriendlyId 抱怨，显然是有正当理由的。

此链接不能准确回答您的问题： [https ://github.com/norman/friendly_id/blob/master/lib/friendly_id/slugged.rb#L87-92](https://github.com/norman/friendly_id/blob/master/lib/friendly_id/slugged.rb#L87-92)

但是，这里有更多信息： [https ://github.com/norman/friendly_id/blob/master/lib/friendly_id/slugged.rb#L293-305](https://github.com/norman/friendly_id/blob/master/lib/friendly_id/slugged.rb#L293-305)

我还看到，当我使用历史模块并执行创建时，它会通过在末尾附加一个序列分隔符来检查最近的 slug。

例如：

```
Category.create(:name => 'foo') 
```

返回以下 sql 查询

```
(0.1ms)  BEGIN
FriendlyId::Slug Load (49.9ms)  SELECT "friendly_id_slugs".* FROM "friendly_id_slugs" WHERE "friendly_id_slugs"."sluggable_type" = 'Category' AND (slug = 'foo' OR slug LIKE 'foo--%') ORDER BY LENGTH(slug) DESC, slug DESC LIMIT 1 
```

如果您将序列分隔符更改为 1 破折号，它将匹配带有 'foo-bar' 和 'foo-moo' 等 slug 的项目......

希望这有助于满足您的好奇心：D

# c# - 我需要关于 ---> If 语句的帮助：页面加载后，然后执行此操作

> ID：10149992
> 
> 赞同：0
> 
> 时间：2012-04-14T00:33:38.707
> 
> 标签：c#, load, click, execute

请我在“if (webBrowser1.DocumentCompleted);”下面的代码上需要帮助

这是我单击按钮后想要发生的事件：1.）检索网页 2.）如果网页已完成加载，则填写表单属性

我被困在第 2 位。加载后如何做出与页面有关的“IF”语句

```
 private void button1_Click(object sender, EventArgs e)
 {
webBrowser1.Navigate("costco.com/Common/Login.aspx?cm_re=1_en-_-Top_Right_Nav-_-Top_login&topnav=&whse=BC&lang=en-US")

  if (webBrowser1.DocumentCompleted);
   webBrowser1.Document.GetElementById("_ctl0_EmailAddress").SetAttribute("value", "RogerWilliams"); 
```

}

“if (webBrowser1.DocumentCompleted);”有错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T00:39:03.887

`DocumentCompleted`不是布尔属性，它是一个异步发生的事件。您应该创建一个回调，一旦事件被触发，它将被调用。

```
private void button1_Click(object sender, EventArgs e)
{
    webBrowser1.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(OnDocumentCompleted);
    webBrowser1.Navigate("costco.com/Common/Login.aspx?cm_re=1_en-_-Top_Right_Nav-_-Top_login&topnav=&whse=BC&lang=en-US");
}

private void OnDocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    ((WebBrowser)sender).Document.GetElementById("_ctl0_EmailAddress").SetAttribute("value", "RogerWilliams");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T00:39:51.110

您也可以在 jquery 中使用 ajax 来执行此操作，如下所示：

```
 $('#yourlink').click(function() {
    $.ajax({
      url: 'costco.com/Common/Login.aspx?cm_re=1_en-_-Top_Right_Nav-_-Top_login&topnav=&whse=BC&lang=en-US',
      success: function(data) {
        $('#_ctl0_EmailAddress').val('RogerWilliams');
      }
    });
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T02:46:29.677

谢达尔的回答是正确的。DocumentCompleted 是一个事件处理程序，在浏览器完成加载文档时调用。但是，如果您明确需要获取文档的当前状态，则可以使用 WebBrowser.ReadyState 并检查文档是否已加载。以下是不同 ReadyState 属性的链接：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowserreadystate.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowserreadystate.aspx)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-14T00:37:08.737

去掉`if`语句末尾多余的分号：

```
if (webBrowser1.DocumentCompleted)
   webBrowser1.Document.GetElementById("_ctl0_EmailAddress").SetAttribute("value", "RogerWilliams"); 
```

# python - 使用python，如何读取文件的“创建日期”？

> ID：10149994
> 
> 赞同：5
> 
> 时间：2012-04-14T00:33:53.430
> 
> 标签：python, image, exif, datecreated

我正在用 python 编写一个简短的脚本，它将扫描文件夹列表中的图像文件，然后重新组织它们。

我希望拥有的一种可选的组织方式是在它们创建的日期之前。

目前，我正在尝试读取图像创建日期如下

```
import os.path, time

f = open("hi.jpg")
data = f.read()
f.close()
print "last modified: %s" % time.ctime(os.path.getmtime(f))
print "created: %s" % time.ctime(os.path.getctime(f)) 
```

但我得到一个错误，上面写着

```
Traceback (most recent call last):
  File "TestEXIFread.py", line 6, in <module>
    print "last modified: %s" % time.ctime(os.path.getmtime(f))
  File "/usr/lib/python2.7/genericpath.py", line 54, in getmtime
    return os.stat(filename).st_mtime
TypeError: coercing to Unicode: need string or buffer, file found 
```

谁能告诉我这是什么意思？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-14T00:39:02.740

您需要使用字符串作为文件名而不是文件对象。

```
>>> import os.path, time
>>> f = open('test.test')
>>> data = f.read()
>>> f.close()
>>> print "last modified: %s" % time.ctime(os.path.getmtime('test.test'))
last modified: Fri Apr 13 20:39:21 2012
>>> print "created : %s" % time.ctime(os.path.getctime('test.test'))
created : Fri Apr 13 20:39:21 2012 
```

# javascript - :hover { cursor: pointer } 在通过borderradius创建的圆上将使其成为即使在圆外的指针

> ID：10149995
> 
> 赞同：5
> 
> 时间：2012-04-14T00:34:06.290
> 
> 标签：javascript, css

我使用边框半径创建了一个圆形按钮。我的问题是，当使用以下代码时： `button:hover {cursor: pointer}`光标甚至是圆外的指针（但在“矩形 div”内）。我很确定我需要javascript来解决这个问题（尽管我已经包含了CSS标签以防我错了），但除此之外我是空白的，如果有人能指出我正确的方向，那就太好了！

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-14T00:43:37.133

您可以为此使用 SVG。SVG 支持跨浏览器。

```
<svg>
    <circle cx="40" cy="40" r="24"/>
</svg>

circle:hover{
    cursor: pointer;
    background: yellow;
} 
```

演示： http: [//jsfiddle.net/DerekL/Jpnre/](http://jsfiddle.net/DerekL/Jpnre/)
MDN：[https ://developer.mozilla.org/en/CSS/Getting_Started/SVG_graphics](https://developer.mozilla.org/en/CSS/Getting_Started/SVG_graphics)

# javascript - 当没有可用的 javascript 时，在 drupal 中优雅地降级 jquery。想法？

> ID：10149997
> 
> 赞同：0
> 
> 时间：2012-04-14T00:34:17.190
> 
> 标签：javascript, jquery, drupal, views

当 javascript 不可用时，我希望 Drupal 中的按钮通过将用户定向到完整节点来优雅降级。

我的 Drupal node-type-tpl.php 头部有这个 jquery javascript 代码；

```
 Drupal.behaviors.infobutton = function(context) {
  $("button").click(function () {
  $('.more').hide();
  $('.more').eq( $('button').index( $(this) ) ).show();
  });
  } 
```

这是我的 node-type-tpl.php 表格中一行中的按钮；

```
 <button>More</button> 
```

这是表格中的下一行，在我单击按钮之前被 css 隐藏；

```
 <tr class="more"><td>some php content</td></tr> 
```

当前，用户在视图中看到一个修剪过的节点。当他们单击按钮时，此节点会打开以显示更多内容。我想拥有它，以便在关闭 javascript 时将用户定向到完整节点。

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T07:21:49.300

我认为最简单的方法是使用`<a>`标签而不是`<button>`标签，然后调用`e.preventDefault()`您的函数。您可以像这样创建链接：

```
<php print l('More', 'node/' . $node->nid, array('attributes' => array('class' => array('morelink'))); ?> 
```

请注意，Drupal 6 和 7 中的类格式不同，请参阅 [http://api.drupal.org/api/drupal/includes%21common.inc/function/l/7](http://api.drupal.org/api/drupal/includes%21common.inc/function/l/7)

然后像这样的javascript：

```
Drupal.behaviors.morelink = function(context) {
  $("a.morelink").click(function (e) {
    e.preventDefault();
    $('.morelink').hide();
    $('.morelink').eq( $('a.morelink').index( $(this) ) ).show();
  });
} 
```

如果你希望它是一个实际的按钮控件，你应该使用一个实际的表单，因为一个`<button>`元素本身不能在没有 Javascript 的情况下重定向浏览器。可能看起来像

```
<form action="<?php print url('node/' . $node->nid); ?>">
  <input type="submit" class="more" value="More" />
</form> 
```

你仍然需要`e.preventDefault()`这里。不过，我并不是很赞成这种做法，链接方法是更常见的优雅降级方法。

Finally, I'd include your Javascript using `drupal_add_js()` instead of directly in the node template, so you can take advantage of automatic caching and compression.