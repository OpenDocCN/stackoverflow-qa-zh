# StackOverflow 问答 11477000-11477999

# c# - WP7 Silver Light Gesture Listener 可以添加到 StackPanel 中吗？

> ID：11477003
> 
> 赞同：0
> 
> 时间：2012-07-13T19:20:27.703
> 
> 标签：c#, silverlight, windows-phone-7, windows-phone-7.1

我正在开发一个小型 Windows Phone 7 Silver Light 应用程序。当用户点击并按住相应的条目时，我只想在列表框中的项目上弹出一个上下文菜单。我已经阅读了几篇文章，给出的最常见答案是使用 Silverlight 工具包。我很兴奋，因为我已经设置好它并将它用于应用程序中的其他一些事情。所以我找到了一个教程，解释了如何在按钮上进行设置。我尝试时失败了，因为我为按钮设置了两次内容：

```
 <Button Width="Auto" MinWidth="460" Height="Auto" HorizontalAlignment="Stretch">
        <Button.Content>
            <toolkit:GestureListener Hold="GestureListener_Hold" />
            <StackPanel ..... >
                .......
            </<StackPanel>
        </Button.Content>
    </Button> 
```

这告诉我“属性‘内容’不止一次。所以再次搜索后，我发现了一篇不错的文章，[http](http://forums.create.msdn.com/forums/t/85263.aspx) ://forums.create.msdn.com/forums/t/85263.aspx ，这表明我可以移动语句看起来更像：

```
 <StackPanel Orientation.....>
        <toolkit:GestureListener Hold="GestureListener_Hold" />  
        <TextBlock
            Text="{Binding ItemName}" FontSize="{StaticResource PhoneFontSizeLarge}"
            HorizontalAlignment="Stretch" VerticalAlignment="Center" Height="40"/>
    </StackPanel> 
```

这告诉我“‘GestureListener’类型的值不能添加到‘UIElementCollection’类型的集合或字典中。

我将不胜感激任何一种方法或全新方法的帮助。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:30:34.460

您需要将 GestureListener 设置为 GestureService.GestureListener 附加属性的值：

```
<Button Width="Auto" MinWidth="460" Height="Auto" HorizontalAlignment="Stretch"> 
    <Button.Content> 
        <StackPanel ..... > 
            <toolkit:GestureService.GestureListener>
                <toolkit:GestureListener Hold="GestureListener_Hold" />
            </toolkit:GestureService.GestureListener>
            ....... 
        </<StackPanel> 
    </Button.Content> 
</Button> 
```

值得一提的是，该工具包已经包含一个 ContextMenu 助手。看[这里](http://windowsphonegeek.com/articles/WP7-ContextMenu-in-depth--Part1-key-concepts-and-API)

# ruby-on-rails - 如何调用类方法

> ID：11477004
> 
> 赞同：0
> 
> 时间：2012-07-13T19:20:29.667
> 
> 标签：ruby-on-rails

我对 Ruby 完全陌生，一段时间以来，我一直在努力思考应该是一个愚蠢的简单问题。

我从一个简单的博客应用程序（Ruby on Rails 文档中的那个）开始，我正在尝试对其进行扩充，以便用户可以通过电子邮件发送帖子。我在 post 类中有一个电子邮件方法工作得很好，当用户单击链接/按钮时，我很难调用它。

我意识到这不是 JavaScript，我不能只使用 onclick。也许一个想法是路由到像 blog/posts/2/email 这样的链接，但我什至不知道从哪里开始，如果有更简单的方法，我不会感到惊讶。

有人可以帮助一个菜鸟吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T20:10:37.807

为电子邮件传递创建控制器操作

```
def email_post
  @post = Post.find(params[:id])
  @post.send_to(params[:email]) #send to is instance method on the model
  #assumes email address is being put in a form of some kind
end 
```

然后在 routes.rb 中为新的控制器方法创建一个路由

```
resources :posts do
  member do
    post 'email_post'
  end
end 
```

最后在您的视图中制作表单并将其链接到您的控制器操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T11:09:23.243

以下代码将在帖子创建时发送邮件。如果你想用一个单独的按钮（“给我发电子邮件”）绑定它，你可以将创建操作中的代码移动到一个新操作（send_mail）并绑定“给我发电子邮件”和“send_mail”

应用程序/控制器/posts_controller.rb

```
def create
  post = Post.new(params[:post])
  Mailer.post_it(post).deliver
end 
```

应用程序/mailers/mailer.rb

```
class Mailer < ActionMailer::Base
   default :from => "noob@railstutorial.com"

   def post_it(post)
      @post = post

      mail(:to => "reader@hisdomain.com",
           :subject => "New Post: #{@post.title}",
           :cc => "admin@yourdomain.com")

   end
end 
```

应用程序/views/mailer/post_it.erb

```
<!DOCTYPE html>
<html>
   <head>
     <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
   </head>
   <body>
     <p><%= @post.content %></p>
   </body>
</html> 
```

# android - 应用内结算不起作用（您的请求无法处理）

> ID：11477005
> 
> 赞同：12
> 
> 时间：2012-07-13T19:20:33.293
> 
> 标签：android, in-app-purchase, in-app-billing

今天我发布了我的应用，当我的朋友尝试购买应用内内容时，市场说：“您的请求无法处理。请再试一次”。

一些澄清：

1.  该应用程序已于 10 多个小时前发布，并且在 google play 商店中可见。
2.  使用谷歌静态代码进行的测试一直有效
3.  购买帐户不是发布者帐户
4.  大部分代码都是从谷歌的应用内计费示例中复制的
5.  尝试购买时，应用内产品显示正确。
6.  买家有一张有效的信用卡

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-19T12:44:26.877

您来自 Google Play 应用内购买接受的国家之一吗？ [https://support.google.com/googleplay/android-developer/answer/150324](https://support.google.com/googleplay/android-developer/answer/150324)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T19:24:19.403

您必须考虑几件事。

1.  检查**公钥**[必须是您的帐户公钥。]
2.  检查您的朋友是否在该产品的测试帐户列表中。（删除它）
3.  在您的代码中使用 logcat 来查找状态代码。（对任何购买请求代码使用计费接收器）。或错误：**开发人员错误。**

4.  确保您使用正确的**密钥库**进行签名。

**仅供参考Dungeon.java**中的onRequestPurchaseResponse()获取响应。

希望能帮到你。

# ios - 我应该对屏幕上可能发生的一切使用 IBAction 吗？

> ID：11477006
> 
> 赞同：1
> 
> 时间：2012-07-13T19:20:44.110
> 
> 标签：ios, ios5

当我在情节提要中创建 UISwitch 元素并将其附加到 .h 文件时，控制器中生成了以下行：

```
@property (weak, nonatomic) IBOutlet UISwitch *wantHelp; 
```

而且我试图弄清楚如何在值更改时让系统通知，所以我尝试在原始语句下方手动添加如下内容：

```
- (IBAction)wantHelp:(id)helpToggle; 
```

在控制器中，我有这样的东西：

```
-(IBAction)helpToggle:(id)sender
{
    NSLog(@"sender is: %@", sender);

    if (wantHelp.on) 
    {
        NSLog(@"yes");
    }
    else 
    {
        NSLog(@"No");
    }
} 
```

我想要做的是将 helpToggle IBAction 与特定的 UISwitch 元素连接起来，但是当我运行它时，我得到一个错误：`unrecognized selector sent to instance`据我所知，这意味着我在一个不正确的对象上调用了一个操作。

有人可以帮我理解我在这里做错了什么吗？

谢谢！！

这就是我的 .m 文件的样子：

```
@interface PlanBusinessController ()

@end

@implementation PlanBusinessController
@synthesize businessDescription;
@synthesize personName;
@synthesize personEmail;
@synthesize privacy;
@synthesize wantHelp;

-(IBAction)helpToggle:(id)sender
{
    NSLog(@"sender is: %@", sender);

    if (wantHelp.on) 
    {
        NSLog(@"yes");
    }
    else 
    {
        NSLog(@"No");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T19:25:23.110

发生的事情是您的 UISwitch 已被告知要调用，`wantHelp:`但是因为在您的实现文件（.m 文件）中不存在调用此方法的方法，这就是调用“无法识别的选择器发送到实例”错误的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T19:51:54.870

好的，所以所有答案都没有给你“简单的方法”

按住您的控件`UISwitch`并将其拖到您的`.h`文件中。

然后您将看到一个对话框，允许您选择“连接”

![在此处输入图像描述](../Images/b47888b127af70cfb18143ff2a8902f8.png)

此连接确定您是在创建 IBOutlet 还是 IBAction。

将其更改为“Action”后，您将自动选择“ValueChanged”作为事件，您可以给它起任何您想要的名称：

![在此处输入图像描述](../Images/15c0bd4a0981fbc2b8c15e14979fbf56.png)

我命名它`helpSwitchToggled`。然后，您将在 .h 和 .m 文件中拥有您的 IBAction。

![在此处输入图像描述](../Images/b61820a31b0d2394d504c87209e39119.png)

在您的`.m`文件中，您可以为值更改操作编写代码：

![在此处输入图像描述](../Images/b945d767820c4b5ecb48a64dcd937688.png)

对于复制粘贴：

```
- (IBAction)helpSwitchToggled:(id)sender {

    if(self.helpSwitch.on)
    {
        //Do the On stuff
    } else {
        //Do the Off Stuff
    }

} 
```

这是在您的界面上进行与某事相关联的操作的“简单方法”。

IBAction 和 IBOutlet 之间的区别已在其他答案中指出，但基本上 Actions 是对控制事件的响应，而 Outlets 是与视图中元素的连接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T19:29:24.450

因此，您可以拥有任意数量的数量，`IBAction`或者一个没关系。最重要的是在您的 .h 文件中声明它，进入界面构建器并将所需的操作链接到该 .h 文件`IBAction`。所以你有你的`IBAction`

```
-(IBAction)WHATEVERNAME:(id)sender 
```

然后转到界面生成器并单击您的文件所有者对象（有点左上角）。然后单击 Connections Inspector（右上角）并从显示 WHATEVERNAME 的点拖动到您的对象（`UISwitch wantHelp`），当您这样做时，它会询问您要接收什么操作

请记住，原因`(id)sender`是您应该投射您的对象

```
UISwitch * tempSwitch = (UISwitch*) sender; 
```

这样你就有了一个指向 switch 对象的指针，这是因为你可以让这个相同的 IBAction 方法处理许多不同类型的对象

* * *

虽然这都是好东西，但实际错误来自多个选择器被调用。一旦我们进入连接检查器，我们就能看到它调用了 2 个不同的方法。一个是有效的 IBAction，另一个是之前声明的方法 wantHelp

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T19:35:28.277

IBAction 只是一个标签，让 Interface Builder 知道它可以附加到该操作。

IBAction 被定义为 void 但名称 Interface Builder 允许您将连接拖到它上面并将对象的事件连接到该函数。

除此之外，您的操作应该具有有意义的名称。helpToggle 在我看来是一个开关。但通常我也会在该消息中包含一些描述。如

```
- (IBAction) helpSwitchToggled:(id) sender{
} 
```

此消息为您提供了一个非常有意义的名称，阅读它会告诉您确切的名称以及对象发送的消息类型。

同时，我还将为该开关提供一个名为 helpSwitch 的 IBOutlet，就像这个一样。

```
@property (nonatomic, weak) IBOutlet UISwitch *helpSwitch; 
```

如你看到的。该对象显然是一个开关。而 IBOutlet 实际上被定义为什么都没有。但它又是一个标签，Interface Builder 使用它来知道您有一个可以与 Interface Builder 链接的属性。

IBAction 和 IBOutlet 只不过是元数据，它告诉接口构建器这是一个可能的连接。连接它们取决于您，编译器将它们视若无睹。

我希望这些信息对你有帮助:)

# debugging - ASP 经典应用程序在函数调用时挂起

> ID：11477007
> 
> 赞同：0
> 
> 时间：2012-07-13T19:20:48.903
> 
> 标签：debugging, function, asp-classic

再会！

我遇到了我们拥有的 ASP 经典应用程序的问题。我们正在处理 SQL 连接管理，一切都很完美，所以我们部署在另一个环境中供用户测试，其中一个 ASP 页面挂起 90 秒，结果：

```
Active Server Pages error 'ASP 0113' 

Script timed out 
```

所以，我尝试添加一些调试代码。我用的是：

```
Response.End 
```

检查它挂在哪里。我终于发现，显然是我们开发的新功能挂了！这里有一点摘录：

```
Dim sqlConn
Set sqlConn = SessionConnection("SQLConnection")
set rsIDXMDL = SQLQuery(sqlConn, sQuery) 
```

如果我在调用 SessionConnection() 之前放置一个 Response.End，则该过程停止。如果我在调用 SessionConnection() 之后放置 Response.End，页面会挂起 90 秒。这让我想到：“Bingo！里面的东西失败了！” 所以，只是为了好玩，我在函数的第一行放了一个 Response.End ，比如：

```
Function SessionConnection(SessVarName)
    Response.End
    [...] 
```

我相信你能猜到发生了什么！！！页面仍然挂起！！！这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:30:33.907

理想情况下，您需要提高代码的效率，使其根本不会超时，但是如果作为创可贴无法做到这一点，您可以尝试增加超时：

```
Server.ScriptTimeout = 180 
```

此值指示服务器将让 ASP 脚本运行多长时间（以秒为单位），直到它被服务器停止。默认值为 90 秒。

```
Set conn = CreateObject("ADODB.Connection") 
    conn.ConnectionTimeout = 120 
    conn.Open <connectionString> 
```

其中 conn 是尚未打开的 ADODB.Connection 对象，connectionTimeout 属性将指示等待 ASP 应用程序初始连接到数据源的时间量（以秒为单位）。默认值为 15 秒

```
Set conn = CreateObject("ADODB.Connection") 
    conn.Open <connectionString> 
    conn.CommandTimeout = 120 
```

CommandTimeout 告诉服务器等待多长时间（以秒为单位），以完成发送到数据源的任何命令。在打开连接之前和之后，此值都是可编辑的。默认值为 30 秒

希望这可以帮助。

# java - JTabbedPane - 无法删除单个选项卡

> ID：11477008
> 
> 赞同：1
> 
> 时间：2012-07-13T19:21:21.927
> 
> 标签：java, swing, jtabbedpane

我有一个简单`JTabbedPane`的显示文本文件。每个选项卡都包含一个`JList`包裹，`JScrollPane`我希望能够通过右键单击关闭各个选项卡，但我无法让这个看似简单的行为起作用。

这是我迄今为止尝试过的：

**将侦听器添加到窗格**

```
public class RightClickListener extends MouseAdapter {
    public void mouseClicked(MouseEvent e) {
        if (SwingUtilities.isRightMouseButton(e)) { 
            remove(getComponentAt(e.getPoint()));
        }
    }
} 
```

**添加到各个选项卡**

```
public class RightClickListener extends MouseAdapter {
    public void mouseClicked(MouseEvent e) {
        if (SwingUtilities.isRightMouseButton(e)) { 
            remove((Component) e.getSource());
        }
    }
} 
```

我尝试了其他几种变体，但似乎没有任何效果。有谁知道为什么这些组件没有被删除？我很乐意在必要时提供任何其他详细信息。

**更新**更多细节：

```
public void loadCode(String cFile, String cLine) {
    Scanner scan = null;
    try {
        scan = new Scanner(new File(cFile));
    } catch (FileNotFoundException e) { e.printStackTrace();}

    DefaultListModel<String> model = new DefaultListModel<String>();
    JList<String> list = new JList<String>(model);

    while(scan.hasNext()) {
        model.addElement(scan.nextLine());
    }

    JScrollPane newTab = new JScrollPane(list);
    tp.add(cFile, newTab);
    tp.addMouseListener(new RightClickListener());
}

public class RightClickListener extends MouseAdapter {

    public void mouseClicked(MouseEvent e) {
        if (SwingUtilities.isRightMouseButton(e)) { 
            remove(indexAtLocation(e.getX(), e.getY()));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:51:51.560

现在，在您的侦听器中，您正在使用`getComponentAt`- 它将返回单击点处的组件（如果您单击选项卡标题，您将返回 JTabbedPane）。由于从未将 JTabbedPane 添加到自身，因此无法删除该组件...

尝试改用该`indexAtLocation`方法 - 这将检查单击的 x/y 坐标是否对应于选项卡标题并返回该选项卡的索引（请参阅[http://docs.oracle.com/javase/7/docs/api/javax/ swing/JTabbedPane.html](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTabbedPane.html)了解更多详情）

```
public class RightClickListener extends MouseAdapter {
    public void mouseClicked(MouseEvent e) {
        if (SwingUtilities.isRightMouseButton(e)) {
            tp.remove(tp.indexAtLocation(e.getX(), e.getY()));
        }
    }
} 
```

# android - 更新到 ADT 20 后导出 Android 项目时出现 Proguard 错误

> ID：11477010
> 
> 赞同：5
> 
> 时间：2012-07-13T19:21:37.903
> 
> 标签：android, adt, proguard

更新到 ADT 20 后，我无法再成功导出任何 Android 项目。我得到：

```
Proguard returned with error code 1\. See console 
```

在控制台中，我收到大量`can't find referenced class`警告，偶尔还会收到`can't find superclass or interface`警告。在警告结束时，我得到如下信息：

```
 You should check if you need to specify additional program jars.
Warning: there were 199 unresolved references to classes or interfaces.
    You may need to specify additional library jars (using '-libraryjars').
java.io.IOException: Please correct the above warnings first.
 at proguard.Initializer.execute(Initializer.java:321)
 at proguard.ProGuard.initialize(ProGuard.java:211)
 at proguard.ProGuard.execute(ProGuard.java:86)
 at proguard.ProGuard.main(ProGuard.java:492) 
```

每次我尝试构建时，都会收到不同数量的警告（不是很一致）。此外，当我在导出前执行清理时，导出完成时不会产生任何警告，但生成的 APK 在启动时经常崩溃，原因是`ClassNotFoundException`.

My`proguard-project.txt`包括 Android 支持库和 ActionBarSherlock 的必要`-keep class`规则。

我在 ADT 20 之前构建这个项目没有任何问题。我什至尝试构建我的最后一个版本（当我发布它时它显然构建得很好），但我得到了相同的 proguard 警告和失败的导出。

我已经尝试像许多其他 SO 问题所建议的那样添加`-libraryjars`和/或`-dontwarn`规则，但无济于事。它有时会成功构建，但 APK 在启动时会导致崩溃。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T23:47:11.073

AAPT 中有一个错误，它只会处理

```
<fragment android:name"..." /> 
```

但不是

```
<fragment class="..." /> 
```

我们将修复 AAPT，但同时您可以使用其他属性并且它会起作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T22:41:26.633

在 ADT 20 中，我们使用 aapt 的一个特性（参见 -G 标志），它可以创建一个 proguard 文件，其中包含代码使用的自定义视图的**确切规则。**

旧的 proguard 配置文件将保留**所有**视图。当您使用诸如兼容性库之类的库项目时，您可能只使用了可用代码的一小部分，这最终可能会包含很多您不需要的东西。通过删除通用保留规则并根据您的应用程序添加新的保留文件，您的 .apks 将变得更小，因为可以删除许多未使用的内容。

如果您更新到工具 20（因此您有新的较小的 proguard-android.txt 文件）并且您继续使用 ADT 18，则可能会出错的一个区域。确保使用 ADT 20，因为它不会添加只是在 project.properties 设置中指定的 proguard 文件，但生成的 proguard 文件也列出了来自 aapt -G 的保留文件。我相信 ant 构建也将使用 -G 功能。

（注意 - 请参阅[http://code.google.com/p/android/issues/detail?id=35107](http://code.google.com/p/android/issues/detail?id=35107)了解任何后续行动）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T22:48:28.167

据报道，最近更新 ADT 中的 Eclipse 插件存在问题，该插件无法正确重新编译所有源代码。在这种情况下，ProGuard 将打印出有关您的程序类（而不是库类）的警告。您应该检查导出（和​​生成的应用程序）是否在没有 ProGuard 的情况下工作。您还应该检查 Ant 构建是否有效（“ant release”）。那可能是一种解决方法。

# c# - 我从哪里获得 x509 证书？

> ID：11477011
> 
> 赞同：9
> 
> 时间：2012-07-13T19:21:39.223
> 
> 标签：c#, networking, ssl, ssl-certificate

我目前正在尝试基于 SslStream 类创建聊天。我正在浏览那个 msdn 链接：[点击这里](http://msdn.microsoft.com/en-us/library/system.net.security.sslstream.aspx)

我意识到我需要获得 X509Certificate 来建立该任务。但我真的不知道我怎样才能得到一个？我知道有些是花钱的，但没有免费的？

PS：我在谷歌搜索该主题后来到这里，但没有找到任何有用的信息。

所以我的问题是：我在哪里可以获得 x509 证书？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T19:41:49.933

[`makecert`](http://msdn.microsoft.com/en-us/library/bfsktky3.aspx)您可以使用该工具创建证书。

或者，如果您只对加密流量感兴趣，而不对其进行签名，并且您控制客户端和服务器，则只需使用[`CryptoStream`](http://msdn.microsoft.com/library/system.security.cryptography.cryptostream.aspx).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-13T19:43:28.040

您可以使用 openssl 生成您自己的并自己签名，但请记住，如果客户端尝试验证它，并且客户端我通常指的是浏览器，因为这是它们最常见的用途，尽管不是唯一的，它们将无法。

> 我知道有些是花钱的，但没有免费的？

基本上，您所支付的是 CA，证书颁发机构对其进行签名，因此当客户去验证您与 CA 的关系时，它将通过。

openssl: [http://www.openssl.org/](http://www.openssl.org/)
这是我通常使用的命令`openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout server.key -out server.pem`

`server.pem`是您的证书，`server.key`也是您的私钥。

假设您可能已经安装了 .NET SDK，makecert 可能是一种更好/更简单的方法，因为您需要构建 openssl。

仍然我去了他们的文档，但我找不到如何设置密钥大小，虽然显然默认值是`1028`并且我认为 using `RSA`，但我确实找到了这个： `makecert -pe -ss MY -$ individual -n "CN=your name here" -len 2048 -r`

来自[MakeCert - 是否可以更改密钥大小？](https://stackoverflow.com/questions/463657/makecert-is-it-possible-to-change-the-key-size)到[http://www.mazecomputer.com/sxs/help/shared.htm](http://www.mazecomputer.com/sxs/help/shared.htm)

openssl 不仅支持 RSA，还支持许多类型，也许您不需要它们。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-06T02:06:34.730

这些家伙[http://www.cacert.org/](http://www.cacert.org/)多年来一直在赠送免费证书。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T19:48:17.583

为了清楚起见，请通读[此](http://www.zytrax.com/tech/survival/ssl.html)内容。[您可以使用 Symantec 的Verisign](https://www.symantec.com/theme.jsp?themeid=verisign-ssl-certificates&inid=vrsn_symc_ssl_Buy)服务签署您的公钥。它绝对不便宜。对于测试，您可以使用虚拟 CA 制作自己的证书。

# android - 单击android中的后退活动时停止进度对话框

> ID：11477013
> 
> 赞同：0
> 
> 时间：2012-07-13T19:21:54.427
> 
> 标签：android

我正在开发一个 android 应用程序，其中我有 3 个编辑文本和一个按钮。我已经在按钮单击时实现了进度对话框。我想在按下后退按钮时停止一个对话框，但是那个进度对话框没有关闭，，，，我试过了解雇，结束对话，但没用

我试过 setcancellable false,,,, 它不工作

代码是

[http://pastie.org/4251606](http://pastie.org/4251606)

谁能推荐我,,,

在此先感谢 TUshar

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:55:48.590

试试 setcancellable true.......

# c# - HttpConfiguration.get_ServiceResolver() 缺失

> ID：11477015
> 
> 赞同：2
> 
> 时间：2012-07-13T19:21:56.600
> 
> 标签：c#, ninject, asp.net-mvc-4

我正在用 MVC4 连接 Ninject 并让它工作到它试图真正解决依赖关系的地步。但是，我收到以下异常：

> 找不到方法：“System.Web.Http.Services.DependencyResolver System.Web.Http.HttpConfiguration.get_ServiceResolver()”。

有人遇到过这个并有解决方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T19:25:26.017

`GlobalConfiguration.Configuration.ServiceResolver``GlobalConfiguration.Configuration.DependencyResolver`在 RC 中被替换为。所以我猜你使用的 Ninject 包根本不是为 RC 设计的。这是重大变化之一。

下面是使 Ninject 与 ASP.NET MVC 4 Web API RC 一起工作的步骤：

1.  使用 Empty 模板创建一个新的 ASP.NET MVC 4 应用程序
2.  声明一个接口：

    ```
    public interface IFoo
    {
        string GetBar();
    } 
    ```

3.  然后是一个实现：

    ```
    public class Foo : IFoo
    {
        public string GetBar()
        {
            return "the bar";
        }
    } 
    ```

4.  然后添加一个 API 控制器：

    ```
    public class ValuesController : ApiController
    {
        private readonly IFoo _foo;
        public ValuesController(IFoo foo)
        {
            _foo = foo;
        }

        public string Get()
        {
            return _foo.GetBar();
        }
    } 
    ```

5.  安装`Ninject.Mvc3`NuGet 包 ( `Install-Package Ninject.Mvc3`)

6.  定义一个自定义 API 依赖解析器，如下图[所示](https://gist.github.com/2417226)：

    ```
    public class NinjectDependencyScope : IDependencyScope
    {
        private IResolutionRoot resolver;

        internal NinjectDependencyScope(IResolutionRoot resolver)
        {
            Contract.Assert(resolver != null);

            this.resolver = resolver;
        }

        public void Dispose()
        {
            IDisposable disposable = resolver as IDisposable;
            if (disposable != null)
                disposable.Dispose();

            resolver = null;
        }

        public object GetService(Type serviceType)
        {
            if (resolver == null)
                throw new ObjectDisposedException("this", "This scope has already been disposed");

            return resolver.TryGet(serviceType);
        }

        public IEnumerable<object> GetServices(Type serviceType)
        {
            if (resolver == null)
                throw new ObjectDisposedException("this", "This scope has already been disposed");

            return resolver.GetAll(serviceType);
        }
    }

    public class NinjectDependencyResolver : NinjectDependencyScope, IDependencyResolver
    {
        private IKernel kernel;

        public NinjectDependencyResolver(IKernel kernel)
            : base(kernel)
        {
            this.kernel = kernel;
        }

        public IDependencyScope BeginScope()
        {
            return new NinjectDependencyScope(kernel.BeginBlock());
        }
    } 
    ```

7.  在`~/App_Start/NinjectWebCommon.cs/CreateKernel`安装 NuGet 时创建的方法中，在行后添加以下`RegisterServices(kernel);`行：

    ```
    GlobalConfiguration.Configuration.DependencyResolver = new NinjectDependencyResolver(kernel); 
    ```

8.  配置内核：

    ```
    private static void RegisterServices(IKernel kernel)
    {
        kernel.Bind<IFoo>().To<Foo>();
    } 
    ```

9.  点击`F5`并导航到`/api/values`

10.  您会看到`the bar`.

显然，当 RC 达到 RTM 时，我希望会有一个`Ninject.Mvc4`NuGet 将这 10 个步骤缩短到最多 5 个。

# android - 为什么这里不显示软键盘？

> ID：11477016
> 
> 赞同：0
> 
> 时间：2012-07-13T19:22:06.550
> 
> 标签：android, android-softkeyboard, android-dialogfragment

我在`DialogFragment`对话框打开时`onCreateDialog`使用来显示键盘。`InputMethodManager`但是，由于某种原因它不起作用。有谁知道为什么？

```
 @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        AlertDialog.Builder b = new Builder(getActivity());

        b.setMessage("Enter a 5 digit zipcode");
        final EditText et = new EditText(getActivity());
        et.setInputType(InputType.TYPE_CLASS_NUMBER);
        et.requestFocus();
        et.setHint("Zipcode");
        InputMethodManager imm = (InputMethodManager)getActivity().getSystemService(INPUT_METHOD_SERVICE);
        imm.showSoftInput(et, InputMethodManager.SHOW_FORCED);
        b.setView(et);          
        return b.create();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:35:19.790

您可能需要请求关注 EditText。如果在 Dialog 上可用，我还发现 getWindow() 更可靠。

```
 InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
    et.requestFocus();
    getWindow().setSoftInputMode(LayoutParams.SOFT_INPUT_STATE_VISIBLE); 
```

更新我的答案。您的对话框可能已经在运行。所以请求是在当前窗口发出的，然后你创建对话框。对话框可能有自己的窗口，所以它不显示？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:55:34.230

您是否尝试过在 Android 设备上运行代码？如果您使用的是 android 模拟器，则很可能您的模拟器的硬件属性中的键盘支持已关闭。

要启用它，请转到 AVD Manager-> Edit AVD-> Hardware-> Add Keyboard Support / Edit Keyboard Support 并启用其值

# android - SoundPool 带偏移量和长度参数的加载方法有什么优势？

> ID：11477018
> 
> 赞同：0
> 
> 时间：2012-07-13T19:22:08.167
> 
> 标签：android

我`SoundPool.load(FileDescriptor fd, long offset, long length, int priority)`对 Android API 中的方法很感兴趣。它的存在只是为了方便已经以这种方式存储音频的人们吗？它对性能有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T23:22:27.927

在游戏开发中，有精灵表——带有大量动画帧的大图像。看看这个[例子](http://gamesprite.files.wordpress.com/2008/01/iris.gif)。将精灵存储在大表上的优点是您只需将其加载到内存中一次，并且只显示所需帧的特定部分，因为磁盘操作很昂贵。
我认为您所询问的方法具有相同的目的，但适用于声音。因此，当您有很多短声音时，您可以将它们连接到一个文件中并只播放其中需要的部分。

# jquery-ui - jQuery UI 日期选择器。显示一种格式，另存为

> ID：11477019
> 
> 赞同：2
> 
> 时间：2012-07-13T19:22:21.567
> 
> 标签：jquery-ui

我使用 jQuery UI 日期选择器。

```
var dates = $( "#checkinTxt").datepicker({
        numberOfMonths: 2,
        changeMonth: true,
        dateFormat: "yy-mm-dd",
        regional: "es",

}); 
```

我希望用户`"dd-MM-yy" (25-March-2013)`在选择日期后看到完整的 dateFormat: ，但保留另一个 dateFormat: `"yy-mm-dd"`，在输入字段（或隐藏字段）中

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:23:51.763

jQuery UI Datepicker supports `altField` and `altFormat` options.

# ruby-on-rails - rspec模型属性更改未正确保存

> ID：11477024
> 
> 赞同：0
> 
> 时间：2012-07-13T19:22:42.063
> 
> 标签：ruby-on-rails, rspec

我正在使用工厂女孩创建一个 inventory_count = 3 的模型。在我的测试中，我想测试一个何时 inventory_count = 0 ..所以这就是我所做的：

```
before(:each) do
  @user = FactoryGirl.create(:user)
  @piece = FactoryGirl.create(:piece)
  @lineup = @user.lineup
end

it 'should have status \'Waiting List\' if the piece doesn\'t have available inventory' do
  @piece.available_count = 0
  @lineup.pieces << @piece
  piece_lineup = @lineup.piece_lineups.find_by_piece_id(@piece.id)
  piece_lineup.set_status
  piece_lineup.status.should == 'Waiting List'
end 
```

我在@piece.available_count = 0 之后放置了一个调试器，它是 = 0，但是当它进入下一行时，它会切换回旧值。我尝试将 .save 添加到 @piece 但它仍然不起作用。难道我做错了什么？我应该在 factorygirl 中创建新的价值模型，而不是试图在飞行中进行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:28:04.180

更改没有进入数据库。尝试

`@piece.update_attributes!(available_count: 0)`

编辑：要跳过正在重置 available_count 的回调，请使用`update_column(:available_count, 0)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:31:20.070

我相信写成这样会更好：

```
@piece = FactoryGirl.create(:piece, :available_count => 0) 
```

创建一个`piece`计数已经为 0 的模型。

另外，你的问题开始提到`inventory_count`. 你真的是这个意思`available_count`吗？只是想确保你没有错字。

# c++ - Qt with Eclipse CDT Juno

> ID：11477025
> 
> 赞同：1
> 
> 时间：2012-07-13T19:22:48.223
> 
> 标签：c++, eclipse, qt, eclipse-cdt

I am having a difficult time trying to find a way to link the Qt library to my Eclipse project.

*The Qt SDK package 4.8.1 with Eclipse CDT Juno*

**Is there a way to link Qt libraries to eclipse?**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:39:08.427

**更新**： Eclipse 插件似乎不再受到官方支持，但仍可通过下载获得。下面的链接引用了他们的 ftp 站点。

* * *

诺基亚提供[Eclipse-Qt 集成](ftp://ftp.qt.nokia.com/qteclipse/)。也就是说，这是不必要的，因为始终可以使用使用自定义构建命令的 Eclipse 项目。您可以简单地创建一个[makefile 项目](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.cdt.doc.user/concepts/cdt_c_projects.htm)，确保在适当的时间运行 qmake。

首先，它可能很简单：

*   创建一个或两个文件
*   qmake -project # 创建你的项目文件
*   qmake # 生成你的makefile
*   # 告诉 eclipse 构建项目

如果是上述情况，您只需要在添加新文件和执行其他影响 qt 项目文件的操作时重新运行 qmake。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-03T07:27:44.647

@enobayram 是的。

Qt 集成包是 32 位的，因此 Eclipse / Java / Qt 等所有依赖项也必须是 32 位的。

# wpf - How to Raise DragDelta event on Thumb

> ID：11477028
> 
> 赞同：1
> 
> 时间：2012-07-13T19:23:11.750
> 
> 标签：wpf, events, wpf-controls, drag, raise

As you can see below, I want to start moving when the component visibility changes. because otherwise I need the user to click again to start the movement, and that is bad in terms of usability for my application.

```
 public MoveILayoutControl()
    {
        InitializeComponent();
        this.IsVisibleChanged += new DependencyPropertyChangedEventHandler(MoveILayoutControl_IsVisibleChanged);
        this.moveThumb.DragDelta += new DragDeltaEventHandler(MoveThumb_DragDelta);
    }

    void MoveILayoutControl_IsVisibleChanged(object sender, DependencyPropertyChangedEventArgs e)
    {
        if (this.IsVisible)
        {
            // Raise Drag Event !?
        }
    }

    private void MoveThumb_DragDelta(object sender, DragDeltaEventArgs e)
    {
        var myData = DataContext as ILayoutVisual;

        if (myData != null)
        {
            Point dragDelta = new Point(e.HorizontalChange, e.VerticalChange);

            if (myData.Rotation != 0)
            {
                Matrix toCalculate = ((this.Parent as FrameworkElement).RenderTransform).Value;
                if (toCalculate != null)
                {
                    dragDelta = toCalculate.Transform(dragDelta);
                }
            }
            myData.X += dragDelta.X;
            myData.Y += dragDelta.Y;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T23:46:29.373

我相信唯一的办法就是使用反射来改变拇指的内部值。更改属性“IsDragging”（未测试）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-16T06:27:28.817

我查看了[源代码，`Thumb`](http://referencesource.microsoft.com/#PresentationFramework/src/Framework/System/Windows/Controls/Primitives/Thumb.cs,1625c1c79837b8ee)我认为更好的方法是`MouseLeftButtonEvent`在拇指上模拟一个：

```
var evt = new MouseButtonEventArgs(mouseDevice, timestamp, MouseButton.Left)
{
    RoutedEvent = UIElement.MouseLeftButtonDownEvent
};
thumb.RaiseEvent(evt); 
```

# visual-studio-2010 - powershell command - wait until visual studio solution loading

> ID：11477030
> 
> 赞同：0
> 
> 时间：2012-07-13T19:23:20.370
> 
> 标签：visual-studio-2010, powershell

I'm trying to write a powershell script that launches Visual Studio with a solution and run a macro.

devenv.exe "$PATH\TestSolution.sln" /Command Macros.MyMacros.TestMacro

However, it takes time to load the solution so that the macro doesn't run.

Is there a way to wait(sleep) for 15 second and run the macro?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:09:06.757

在指定的时间段内暂停脚本或会话中的活动。使用开始睡眠[http://technet.microsoft.com/en-us/library/hh849939.aspx](http://technet.microsoft.com/en-us/library/hh849939.aspx)

# php - php warning message Undefined variable

> ID：11477031
> 
> 赞同：0
> 
> 时间：2012-07-13T19:23:26.943
> 
> 标签：php

```
if ((!in_array("9", $settingid)) || ($username1 == $username2) && ($username_viewed_by_other2 != "-view-by-other-people")) { //start function } 
```

now warning message appear because $username1 is not set yet.

I cannot use `if(isset($username1)){ //start function }` because the function need to be carried out when $username1 is not set, how to fix this conflict situation?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:28:30.737

在这种情况下，您可以在这里做很多事情。

最直接的方法是定义变量（如果尚未设置）：

```
if (!isset($username1)) $username1 = '';
if ((!in_array("9", $settingid)) || ($username1 == $username2) && ($username_viewed_by_other2 != "-view-by-other-people")) {
//start function
} 
```

另一个可能是在使用之前进行验证：

```
if ((!in_array("9", $settingid)) || (isset($username1) && ($username1 == $username2)) && ($username_viewed_by_other2 != "-view-by-other-people")) {
//start function
} 
```

如果不声明你的变量是“需要”做的事情（我非常怀疑并建议反对），你可以通过以下方式在 PHP 中关闭这些通知：

```
error_reporting(E_ALL ^ E_NOTICE); 
```

这仍然会显示所有其他错误，但会隐藏诸如“未定义变量”之类的通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:25:25.150

尝试添加`@`到变量或使用`empty`函数而不是`isset`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T19:26:32.333

只需使用 not 运算符

```
if(!isset($username1)) { /*do function*/ } 
```

这个 if 语句基本上询问是否未设置变量。

# excel - update sql query stops updating excel spreadsheet

> ID：11477032
> 
> 赞同：1
> 
> 时间：2012-07-13T19:23:28.160
> 
> 标签：excel, vba, adodb

I have a classic ASP web application that updates a table in a Excel spreadsheet.

I am using the following to connect to the Excel file

```
Set rows = CreateObject("ADODB.Recordset")
objConnection.Open "Provider=Microsoft.ACE.OLEDB.12.0;" & _
"Data Source=" & Server.MapPath("data.xlsx") & ";" & _
"Extended Properties=" &  Chr(34) & "Excel 12.0 Xml;HDR=Yes" & Chr(34) & ";" 
```

That is a sample query that I am executing

```
query = "UPDATE [Sheet1$] SET [STATUS] = 'unclaimed', [CLAIMER] = '' ,[SDATE] = '" 
& DATE & "' WHERE [JUR] = '" & in_jur & "' AND [WC] = " & in_wc 
objConnection.Execute query,numRows,adExecuteNoRecords 
```

The above query gets executed in the process.asp page when the user clicks on a button that calls a javascript function that sends the value of in_jur and in_wc like this

```
function sendForProcessing() {
    somejur = //use the document.getElementByID to get selected jur
    somewc = //use the document.getElementByID to get selected wc
    window.location = process.asp?in_jur=somejur&in_wc=somewc
} 
```

The application updates the sheet correctly for some time (i counted the number of times it works. 1st test: 10 times 2nd test: 16 times it just varies) and then it stops working. I do not get error message in the objConnection.Execute.

When i print out the numRows it prints 1\.

Is there a better way to update the row in Excel?

# android - Swipable tabs without using fragments

> ID：11477033
> 
> 赞同：1
> 
> 时间：2012-07-13T19:23:28.807
> 
> 标签：android, tabs, android-tabhost, swipe, fragmentpageradapter

I'd like to know if it's possible to adapt my actual tabs to create swipable tabs without using fragments.

Right now I have non-swipable tabs (each tab contain an endless list : NewsList).

Here's the code I use for my non-swipable tabs :

```
tabHost = (TabHost)this.findViewById(R.id.scrollTabs);
// Avant d’ajouter des onglets, il faut impérativement appeler la méthode
    // setup() du TabHost
LocalActivityManager mLocalActivityManager = new LocalActivityManager(this, false);
mLocalActivityManager.dispatchCreate(savedInstanceState);
tabHost.setup(mLocalActivityManager);

// Ajoute un onglet pour chaque catégorie de news
tabNewslist = new NewsList[NewsCategory.values().length];
View tabView;

for (int i = 0; i < NewsCategory.values().length; i++) {
    tabView = createTabView(tabHost.getContext(), NewsCategory.getValueAt(i).getName());

    tabNewslist[i] = new NewsList(this, new LinkedList<Item>(), IdUrlRss.NEWSLIST, NewsCategory.getValueAt(i));
    tabHost.addTab(tabHost.newTabSpec(NewsCategory.getValueAt(i).getName()).setIndicator(tabView).setContent(tabNewslist[i]));
} 
```

And here's the XML layout :

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
         android:id="@+id/tabHost"
         android:layout_width="fill_parent"
         android:layout_height="fill_parent">

    <LinearLayout android:orientation="vertical"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent">

        <HorizontalScrollView android:layout_width="fill_parent"
                          android:layout_height="wrap_content"
                          android:fillViewport="true"
                          android:scrollbars="none">                        
            <TabWidget android:id="@android:id/tabs"
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content" />

        </HorizontalScrollView>

        <FrameLayout android:id="@android:id/tabcontent"
                 android:layout_width="fill_parent"
                 android:layout_height="fill_parent" />

        <android.support.v4.view.ViewPager
            android:id="@+id/viewPager"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" />

    </LinearLayout>
</TabHost> 
```

I also tried to create a PagerAdapter for NewsList but I failed.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:31:02.690

你可以，通过使用

*   [ViewFlipper](http://developer.android.com/reference/android/widget/ViewFlipper.html)或
*   从 android [AOSP 启动器包](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/2.3_r1/com/android/launcher2/Workspace.java)中扩展[Workspace UI 模式](http://www.androiduipatterns.com/2011/06/android-ui-pattern-workspaces.html)

第二个选项更好，因为您可以在启动器中使用几乎任何东西作为“页面”（就像 android 主屏幕一样）

[也就是说，只使用片段然后在其上使用ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)会容易得多:)

# visual-studio-2010 - Visual Studio - Remove error 'gutter' navigation next to scrollbar

> ID：11477037
> 
> 赞同：1
> 
> 时间：2012-07-13T19:23:56.653
> 
> 标签：visual-studio-2010

I'm just trying to maximize my editing space really never use this thing at all. Anybody know the option to remove it?![enter image description here](../Images/ed71605246ee977d69b6800f0ad0c5a4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:33:25.450

这是 Resharper 的“标记栏”。目前，没有办法[隐藏或删除它](http://devnet.jetbrains.net/thread/286118)（除了删除 Resharper）。

# ruby-on-rails - Adding a column to rails (Ubuntu)

> ID：11477050
> 
> 赞同：0
> 
> 时间：2012-07-13T19:24:55.180
> 
> 标签：ruby-on-rails, ubuntu

I’m trying to add a string column to a SQLite 3 database in rails. Use the normal syntax `"rails generate migration AddAuthorColumnToPublications author:string"`. I run the migration, it works without errors.

I change the attributes accessor in the Publications model to include the Author column. I check in the schema, the new column has been included in the schema.

I go to my database and the **new column does not appear** in the index of the Publications table. I’ve tried including it specifically in the index, but to no avail.

The only thing I can think of here is that because I am using Ubuntu, the syntax may be slightly different (as it has been for certain things).

I have looked in books and on the internet, and the syntax seems correct (can also use underscores as well as camel casing to name the migration), but I can’t find anything specific to Ubuntu on this particular issue. I would appreciate any and all help on this matter.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:29:19.133

运行此命令：

```
rake db:migrate 
```

迁移不会自动运行。您需要运行`rake db:migrate`才能运行所有迁移并更新数据库。

此外，查看您的 database.yml 文件并确保您使用的是您正在打开的 sqlite 数据库。命令的语法没有什么不同。

# php - PHP File Download Using Hidden IFrame Without Saving

> ID：11477052
> 
> 赞同：2
> 
> 时间：2012-07-13T19:25:01.087
> 
> 标签：php, jquery, ajax, download

I apologize in advance for the confusing question wording, but I couldn't figure out how to put this.

I essentially have a string in a database that I intend to make available for user download. How would I go about doing this?

I was attempting to use ajax, but I wasn't sure how to go about it.

The following jquery code is executed when the download link is pressed

```
$.ajax({

    url: 'index.php/script/downloadFile',
    type: 'post',
    data: {name: $(this).text()}

}); 
```

The relevant PHP code looks like:

```
public function downloadScript(){

    $name = $_POST['name'];

    $filename = $name . ".txt";
    $string = //String that comes from database using name to create query
    $filename = $name . ".txt";

    header('Content-type: text/plain');
    header('Content-Disposition: attachment; filename="' . $filename . '"');
    header("Content-Length: " . strlen($string));
    header("Connection: close");

    echo $string;
} 
```

Essentially, I want the string to be there for a user to download as a text file. I didn't know if AJAX was the right way to do this or if there was a better way to do the same task. (I was assuming the better way would be to incorporate a hidden iframe somehow)

For a little more information, I have a list of elements:

*   John*   Jeff*   Joe*   Jack

When one is clicked, I want to send the text of that element's name to the php file to form the query.

That's why I don't have a simple href setup to start the file download.

**EDIT:**

While I'm at it, is there anyway for me to get more than one of these files, say there are multiple strings that are returned from the database, save them as separate text files, zip them up, and send them to the user? Or, would that require saving to the server?

Any help is appreciated!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T19:29:10.897

你可以把它做成一个链接

```
<ul>
    <li class="click_link">John</li>
    <li class="click_link">Bob</li>
</ul>

<script>
$('li').click(function(e) {
    window.location.href = 'getfile.php?name=' + $(this).text();
});
</script> 
```

然后将您的更改`$_POST`为`$_GET`.

只要您的标题设置正确，这将下载文件。

# java - Hibernate继承在父级之后插入子级

> ID：11477053
> 
> 赞同：0
> 
> 时间：2012-07-13T19:25:01.803
> 
> 标签：java, hibernate, hibernate-mapping

我有一个 Hibernate、spring 和 GWT 应用程序。我有两个表：员工和用户。

每个用户都是员工，因此我在数据库中有一对一的关系（它们由主键连接），因此用户扩展了员工。当我首先插入用户时一切正常，它会自动正确插入父母。但是，问题是当我尝试为现有员工添加用户条目时，它不是插入带有父 ID 的用户记录，而是重新创建员工记录和用户记录。

```
 @javax.persistence.Entity
 @javax.persistence.Table(name = "User")
 @Inheritance(strategy = InheritanceType.JOINED)
 @PrimaryKeyJoinColumn(name="Id")
 public class User extends Employee
 { .... }

 @Reflectable(assignableClasses = true, superClasses = true)
 @javax.persistence.Entity
 @javax.persistence.Table(name = "Employee")
 @Inheritance(strategy = InheritanceType.JOINED)
 @PrimaryKeyJoinColumn(name="Id")
 public class Employee
 { 
      @Id
      @GeneratedValue
      @Column(name="Id")
      public Integer getId()
      {
        return id;
      }
 } 
```

这是做事的正确方法吗？我该如何克服呢？

非常感谢。

* * *

更新1：

通过添加用户，我的意思是我想创建一个与员工具有相同 ID 的用户。基本上应该变成：

```
 Insert into User (Id, username,..) Values (1, "Username", ...) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T18:11:21.603

我认为现有的映射没有任何意义。

我建议取消继承并映射 Employee 和 UserAccount 之间的一对一（或一对多）关系。

我认为这更好地反映了您的模型。

员工可能是也可能不是系统的用户。在该系统上拥有用户帐户的员工。

如果将来要添加更多系统，请使用一对多。员工在零个、一个或多个系统上拥有用户帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T20:06:28.070

我第一次阅读您的描述并通过您的代码片段确认时，有些东西不正确。

你提到的一些事情我分为几点：

*   每个用户都是员工
*   我有 OneToOne 关系
*   用户扩展员工
*   当我尝试为现有员工添加用户条目时

只是没有意义。

每个用户都是员工，并且`User extends Employee`（在某种程度上）是有道理的，但是您为什么要提到一对一的关系呢？这里没有关系，您的代码也显示了这一点。

A`User`是`Employee`，但 User 不拥有 Employee 也不拥有 User 属性（这就是“关系”的意思）。

关系例如：员工有地址，或者用户有权限列表。

最后一点，当您说“*为现有员工添加用户条目*”时，表明`User`在这种情况下 a 应该是 an 的属性，`Employee`并且可能是 a`List`而不是一对一的（因为您想“添加”给它）。

虽然如果你退后一步，它也没有多大意义，因为`Employee`它不拥有`User`英语意义上的 a。

一个子类/超类通常是描述一个更抽象类型的特定类型。例如。`Dog`是 an 的子类，`Animal`因为 Dog 是 Animal 的一种特定类型。我不认为你在这里想要什么。

我认为您需要重新考虑您的设计，并可能描述您正在尝试做的事情。

# c - gtk_drawing_area_size 第一个参数

> ID：11477055
> 
> 赞同：2
> 
> 时间：2012-07-13T19:25:11.583
> 
> 标签：c, gtk

大家好，我正在使用 C 和 GTK+ 2 我想制作一个像 MS 程序这样的简单绘图程序，但是通过这两个工具就可以了

```
#include <gtk/gtk.h>
int main(int argc, char *argv[])
{
    GtkWidget *window;
    GtkWidget *drawingArea;
    gtk_init(&argc, &argv);
    window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
    g_signal_connect(G_OBJECT(window), "delete_event",
             G_CALLBACK(gtk_main_quit), G_OBJECT(window));
    g_signal_connect(G_OBJECT(window), "destroy", G_CALLBACK(gtk_main_quit),
             G_OBJECT(window));
    gtk_container_set_border_width(GTK_CONTAINER(window), 10);

    drawingArea = gtk_drawing_area_new();
    /*The problem is in the next line */
    gtk_drawing_area_size(G_OBJECT(drawingArea), 200, 200);

    gtk_container_add(GTK_CONTAINER(window), drawingArea);
    gtk_widget_show(drawingArea);

    gtk_widget_show(window);
    gtk_main();
    return 0;
} 
```

我的问题在注释行中

```
gtk_drawing_area_size(G_OBJECT(drawingArea),200,200); 
```

编译时的错误

```
ibrahim@ibrahim-PC:~/Desktop$ gcc main.cpp -o base `pkg-config --cflags --libs gtk+-2.0`
main.cpp: In function ‘int main(int, char**)’:
main.cpp:14:52: error: cannot convert ‘GObject* {aka _GObject*}’ to ‘GtkDrawingArea* {aka _GtkDrawingArea*}’ for argument ‘1’ to ‘void gtk_drawing_area_size(GtkDrawingArea*, gint, gint)’ 
```

所以请帮助我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T19:33:41.150

这是 GTK+ 中的常见问题。您必须将小部件转换为公开方法的类型（即实现类型）。你应该写：

```
gtk_drawing_area_size(GTK_DRAWING_AREA(drawingArea), 200, 200); 
```

代替：

```
gtk_drawing_area_size(G_OBJECT(drawingArea), 200, 200); 
```

因为[GObject](http://developer.gnome.org/gobject/unstable/gobject-The-Base-Object-Type.html#GObject)类型不支持[gtk_drawing_area_size()](http://developer.gnome.org/gtk/2.24/GtkDrawingArea.html#gtk-drawing-area-size)方法，但[GtkDrawingArea](http://developer.gnome.org/gtk/2.24/GtkDrawingArea.html)类型支持。

（实际上，它更像`gtk_drawing_area_size()`是不支持获取`GObject`实例，因为 GTK+ 的面向对象特性在 C 中以这种方式抽象出来。）

# ruby-on-rails - 如何：Rails respond_to json 使用完全相同的 rabl 模板？

> ID：11477056
> 
> 赞同：0
> 
> 时间：2012-07-13T19:25:12.200
> 
> 标签：ruby-on-rails, rabl

我有两个动作，其中渲染最终应该使用相同的 rabl 模板输出 json，但目前，它们都有一个具有自己名称的模板

dashboard.json.rabl 和 batch_create.json.rabl

它们完全相同，如何在 batch_create 模板中指定使用仪表板的模板？

谢谢！

编辑#包括控制器的两个动作及其 rabl 视图

# line_items_controller.rb

```
def dashboard
  @line_items ||= LineItem.limit(1000).all.to_a
  pids = [1,2,3,4,5]
  @projects = Project.only(:id, :name).where(:_id.in => pids).to_a
  @users    = User.only(:first, :last, :role, :company_id).all.to_a
  @companies= Company.where(:_id.in => @users.map(&:company_id)).to_a
  @specs    = Spec.where(:specable_id.in => pids).to_a
    spec_ids= @specs.map { |e| e.id }
  @contact_infos = ContactInfo.where(:infoable_id.in => spec_ids).to_a    end
  gon.rabl

  respond_to do |format|
    format.html
    format.json
  end
end

def batch_create
  @line_items = LineItem.where(:_id.in => params[:line_item_ids]).to_a

  # else same as #dashboard
end 
```

# app/views/line_items/dashboard.json.rabl 与 app/views/line_items/batch_create.json.rabl 相同

```
object false

child @projects => :projects do
  attributes :id, :name
end

child @companies => :companies do
  attributes :id, :name
end

child @users => :users do
  attributes :id, :full, :company_id
end

child @specs => :specs do
  attributes :id, :style, :due_at_note
end

child @contact_infos => :contact_infos do
    attributes :info, :infoable_id
end

child @line_items do
  attributes :id, :title, :dashboard_length, :dashboard_created_at, :original_file_url, :project_id
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T01:22:52.550

您是否尝试在 batch_create.json.rabl 中使用它：

```
extends '<insert_object_name>/dashboard' 
```

# java - JPA：为什么没有创建连接表？

> ID：11477060
> 
> 赞同：4
> 
> 时间：2012-07-13T19:25:24.913
> 
> 标签：java, database, jpa, glassfish

在我的应用程序中，我有以下`Student`实体：

```
@Entity
public class Student extends Commenter implements Serializable {
    ...
    @OneToMany
    private List<Coupon>   coupons;
    @OneToMany
    private List<Receipt>  receipts;
    @ManyToMany
    private List<Course>   courses;
    @ManyToMany
    private List<Sessions> sessions;
    ...
} 
```

当我在本地部署应用程序时，一切正常。但是，当我在我们的服务器上部署应用程序时，`student_coupon`并`student_receipt`没有创建连接表。

我试图删除整个数据库并重新创建所有表，但我不知道为什么从未创建上述 2 个表。不过，其他连接表 (`student_sessions`和`student_course`) 始终是正确创建的。

如果您能给我一个建议，我将不胜感激。

此致，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T00:15:42.187

对于您所说的，我猜您与其他两个实体（优惠券和收据）有多对多关系，但是您将它们标记为“一对多”关系，因此永远不会有连接表，所以您必须使用 @ManyToMany 注释来注释关系字段（就像您对其他两个字段所做的那样）：

```
@Entity
public class Student extends Commenter implements Serializable {
    @ManyToMany  //Changed this
    @JoinTable(name = "student_coupon",
    joinColumns = {@JoinColumn(name="studentId")},     //This could be omitted 
    inverseJoinColumns = {@JoinColumn(name="couponId")} //and left defaults
    private List<Coupon>   coupons;
    @ManyToMany //and this
    @JoinTable(name = "student_receipt",
    joinColumns = {@JoinColumn(name="studentId")},
    inverseJoinColumns = {@JoinColumn(name="receiptId")}
    private List<Receipt>  receipts;
    @ManyToMany
    private List<Course>   courses;
    @ManyToMany
    private List<Sessions> sessions;
} 
```

# java - 使用飞碟将图像渲染为内存中的 PDF

> ID：11477065
> 
> 赞同：18
> 
> 时间：2012-07-13T19:26:10.047
> 
> 标签：java, image, xhtml, pdf-generation, flying-saucer

我正在使用 Flying Saucer 将 XHTML 转换为 PDF 文档。我已经让代码只使用基本的 HTML 和内联 CSS，但是，现在我正在尝试将图像作为一种标题添加到 PDF 中。我想知道是否有任何方法可以通过将图像文件作为Java Image 对象读取来添加图像，然后以某种方式将其添加到PDF（或XHTML——就像它得到一个虚拟的“url”一样）表示我可以用来呈现 PDF 的 Image 对象）。有没有人做过这样的事情？

提前感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-13T19:59:56.380

我上周不得不这样做，所以希望我能马上回答你。

## 飞碟

最简单的方法是在使用 Flying Saucer 渲染之前，在 HTML 模板中添加您想要的图像作为标记。在 Flying Saucer 中，您必须实现一个`ReplacedElementFactory`，以便您可以在使用图像数据进行渲染之前替换任何标记。

```
/**
 * Replaced element in order to replace elements like 
 * <tt>&lt;div class="media" data-src="image.png" /></tt> with the real
 * media content.
 */
public class MediaReplacedElementFactory implements ReplacedElementFactory {
    private final ReplacedElementFactory superFactory;

    public MediaReplacedElementFactory(ReplacedElementFactory superFactory) {
        this.superFactory = superFactory;
    }

    @Override
    public ReplacedElement createReplacedElement(LayoutContext layoutContext, BlockBox blockBox, UserAgentCallback userAgentCallback, int cssWidth, int cssHeight) {
        Element element = blockBox.getElement();
        if (element == null) {
            return null;
        }
        String nodeName = element.getNodeName();
        String className = element.getAttribute("class");
        // Replace any <div class="media" data-src="image.png" /> with the
        // binary data of `image.png` into the PDF.
        if ("div".equals(nodeName) && "media".equals(className)) {
            if (!element.hasAttribute("data-src")) {
                throw new RuntimeException("An element with class `media` is missing a `data-src` attribute indicating the media file.");
            }
            InputStream input = null;
            try {
                input = new FileInputStream("/base/folder/" + element.getAttribute("data-src"));
                final byte[] bytes = IOUtils.toByteArray(input);
                final Image image = Image.getInstance(bytes);
                final FSImage fsImage = new ITextFSImage(image);
                if (fsImage != null) {
                    if ((cssWidth != -1) || (cssHeight != -1)) {
                        fsImage.scale(cssWidth, cssHeight);
                    }
                    return new ITextImageElement(fsImage);
                }
            } catch (Exception e) {
                throw new RuntimeException("There was a problem trying to read a template embedded graphic.", e);
            } finally {
                IOUtils.closeQuietly(input);
            }
        }
        return this.superFactory.createReplacedElement(layoutContext, blockBox, userAgentCallback, cssWidth, cssHeight);
    }

    @Override
    public void reset() {
        this.superFactory.reset();
    }

    @Override
    public void remove(Element e) {
        this.superFactory.remove(e);
    }

    @Override
    public void setFormSubmissionListener(FormSubmissionListener listener) {
        this.superFactory.setFormSubmissionListener(listener);
    }
} 
```

你会注意到我在这里硬编码`/base/folder`了 HTML 文件所在的文件夹，因为它将是 Flying Saucer 解析媒体的根 url。您可以将其更改为正确的位置，来自您想要的任何地方（例如属性）。

# HTML

在您的 HTML 标记中，您在某处表示`<div class="media" data-src="somefile.png" />`如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>My document</title>
        <style type="text/css">
        #logo { /* something if needed */ }
        </style>
    </head>
    <body>
        <!-- Header -->
        <div id="logo" class="media" data-src="media/logo.png" style="width: 177px; height: 60px" />
        ...
    </body>
</html> 
```

# 渲染

最后，您只需要`ReplacedElementFactory`在渲染时向 Flying-Saucer 指明您的：

```
String content = loadHtml();
ITextRenderer renderer = new ITextRenderer();
renderer.getSharedContext().setReplacedElementFactory(new MediaReplacedElementFactory(renderer.getSharedContext().getReplacedElementFactory()));
renderer.setDocumentFromString(content.toString());
renderer.layout();
final ByteArrayOutputStream baos = new ByteArrayOutputStream();
renderer.createPDF(baos);
// baos.toByteArray(); 
```

我一直在使用 Freemarker 从模板生成 HTML，然后将结果提供给 FlyingSaucer，并取得了巨大的成功。这是一个非常整洁的图书馆。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-02-20T10:02:40.087

对我有用的是将它作为嵌入式图像。所以先把图片转成base64再嵌入：

```
 byte[] image = ...
    ITextRenderer renderer = new ITextRenderer();
    renderer.setDocumentFromString("<html>\n" +
                                   "    <body>\n" +
                                   "        <h1>Image</h1>\n" +
                                   " <div><img src=\"data:image/png;base64," + Base64.getEncoder().encodeToString(image) + "\"></img></div>\n" +
                                   "    </body>\n" +
                                   "</html>");
    renderer.layout();
    renderer.createPDF(response.getOutputStream()); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-05-31T13:29:42.993

感谢 Alex 提供详细的解决方案。我正在使用此解决方案，并发现要添加另一行以使其正常工作。

```
public ReplacedElement createReplacedElement(LayoutContext layoutContext, BlockBox blockBox, UserAgentCallback userAgentCallback, int cssWidth, int cssHeight) {
  Element element = blockBox.getElement();
  ....
  ....
  final Image image = Image.getInstance(bytes);
  final int factor = ((ITextUserAgent)userAgentCallback).getSharedContext().getDotsPerPixel(); //Need to add this line
  image.scaleAbsolute(image.getPlainWidth() * factor, image.getPlainHeight() * factor) //Need to add this line
  final FSImage fsImage = new ITextFSImage(image);
  ....
  .... 
```

我们需要从中读取 DPP`SharedContext`并缩放图像以在 PDF 上显示渲染图像。

另一个建议：我们可以直接扩展`ITextReplacedElement`而不是实现`ReplacedElementFactory`. `ReplacedElementFactory`在这种情况下，我们可以设置`SharedContext`如下：

```
renderer.getSharedContext().setReplacedElementFactory(new MediaReplacedElementFactory(renderer.getOutputDevice()); 
```

# python - 在 Django 中限制暴力登录攻击

> ID：11477067
> 
> 赞同：30
> 
> 时间：2012-07-13T19:26:20.110
> 
> 标签：python, django, security, brute-force

是否有普遍接受的策略来保护 Django 应用程序免受此类攻击？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T19:54:54.887

你可以：

*   跟踪失败的登录尝试并在 3 次尝试后阻止攻击者。
*   如果您不想阻止，则可以将其记录下来并提供验证码，以使其在以后的尝试中更加困难。
*   您还可以在每次尝试失败后增加登录尝试之间的时间。例如，10 秒、30 秒、1 分钟、5 分钟等。这将很快破坏攻击者的乐趣。
*   当然，选择一个安全的密码，因为这会让攻击者猜测。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-04-18T11:26:52.757

有许多可用的库，例如**Django-axes**、**Django-defender**、**Django-ratelimit**，这些库都做同样的事情（它们之间有一些区别）。您可以选择最适合您需求的一种。

如果您使用的是 DRF，那么您不需要额外的库（axes、ratelimit 等），因为 DRF 已经内置了节流功能。

你可以检查这个问题：[**How to prevent brute force attack in Django Rest + Using Django Rest Throttling **](https://stackoverflow.com/questions/49936101/how-to-prevent-brute-force-attack-in-django-rest-using-django-rest-throttling)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-10-03T14:03:55.087

正如大约 7 年前提出的这个问题，也许一些更新的信息可能会有所帮助。

实施[Google reCAPTCHA v3](https://www.google.com/recaptcha/about/)可能比盲目地限制所有流量要好。它可以判断是否有人只是在敲击密码并相应地阻止它们。如果某人看起来像人，但只是密码错误，它不会很快阻止他们。谷歌比我们任何人都更了解 www，所以我们不妨利用它。

# php - PHP 包含不同的 URI 结构

> ID：11477068
> 
> 赞同：1
> 
> 时间：2012-07-13T19:26:20.463
> 
> 标签：php, include, directory

我正在使用一个`.htaccess`文件来重写所有 URI 地址，以将用户带到`index.php`某些代码根据 URL 确定要包含的文件的位置。

但是，如果 URL 位于标头的子文件夹中，则包含函数不会获取文件。

例如。

`index.php`包括位于`examplefolder/content/page.php`. 然后，该文件在内容页面上包含一个标题，但`include('../header.php');`无法正常工作。网址是`example.com/news/latest`。

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:30:37.253

您可以使用该[`chdir()`](http://php.net/manual/en/function.chdir.php)功能更改网络服务器上的当前工作目录，以使您的相对路径正常工作。

要查看当前工作目录是什么，只需`echo getcwd();` 执行此操作，您可能会意识到您不需要相对路径，您可以根据当前工作目录构建包含（如果您正在重写index.php，那么您的所有页面都将从相同的基本路径开始，即 Web 根目录）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T19:34:06.413

如果您将所有 URL 重写为`/index.php`，则所有请求都将在该`/`目录（即文档根目录）中运行。

因此，如果您要包含`examplefolder/content/page.php`并从那里包含文件`examplefolder/header.php`，那么这正是您要编写的内容，因为包含文件不会更改当前执行线程中的工作目录。

例如

```
include('examplefolder/header.php'); 
```

# freemarker - 如果找不到变量的值，如何使 fmpp 失败？

> ID：11477072
> 
> 赞同：1
> 
> 时间：2012-07-13T19:26:36.290
> 
> 标签：freemarker, fmpp

当 FMPP 无法在模板中找到变量的值时，是否存在使 FMPP 失败的参数？现在，如果它无法解析变量，它只会用 ${} 保持文本完好无损。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T17:24:32.497

那里发生了一些奇怪的事情，因为它**确实**会失败，并且如果您引用未定义的变量，默认情况下甚至会中止整个批处理。此外，它不会`${}`在输出中留下 -s，因为在模板可以做任何事情之前，所有的`${`和`}`都被“解析掉”。所以我怀疑这些变量的值确实是字符串`"${}"`，或者你`#escape`在`border`//设置中有一些棘手的问题，或者类似的东西`footer`。`header`（如果你能提供一个简单的例子来重现这个，我当然可以找出原因。）

# osgi - 在 Karaf 下使用 Felix fileinstall 键入服务属性

> ID：11477076
> 
> 赞同：3
> 
> 时间：2012-07-13T19:27:05.460
> 
> 标签：osgi, apache-felix, apache-karaf

在我的 Karaf 容器中，我通常使用 etc/*.cfg 文件来配置我的服务。但是，我继承了一个使用元类型的服务，并期望其中一个属性是 Long 而不是 String（它在字符串上崩溃）。我应该采取什么技术来提供这些属性？

我发现了一种潜在的解决方案，但我陷入了困境。Felix 为 .config 文件提供了另一种语法，其语法如下：

```
key = type "value" 
```

其中“type”是该类型的单字符代码（例如“L”表示 Long）。我将过滤器更改为：

```
felix.fileinstall.filter = .*\\.(cfg|config) 
```

到目前为止，一切都很好。通过调试器，我可以看到 Felix 正在读取文件，但结果字典返回为空且没有错误。（我不能轻易调试，因为 org.apache.felix.fileinstall-3.2.2-sources.jar 缺少 ConfigurationHandler.java，它被另一个 jar 遮住了......）

我是否走在正确的道路上，我应该尝试修复我的 .config 语法？或者这是我应该避免并使用其他技术的遗留语法？

**更新：**我通过修复 .config 文件中的语法错误部分解决了我的“空字典”问题（它比我预期的更挑剔）。我的另一个问题仍然存在：这是一个好方法，还是有更好的方法？

# extjs - 水平显示标签

> ID：11477078
> 
> 赞同：0
> 
> 时间：2012-07-13T19:27:15.790
> 
> 标签：extjs, extjs4, extjs4.1

我想要的是水平显示 2 个标签，但我得到的是标签以垂直方式显示。我想改变它水平显示的方式（侧面）。我怎么能定制它？

```
 items: [
                {
                    xtype: 'panel',
                    layout: 'form',
                    items: [{
                        xtype:'label',
                        text: "label 1"
                     },
                     {
                          xtype:'label',
                         text: "Label 2"
                     }

                     ] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T21:34:31.810

```
{
    xtype: 'panel',
    layout: 'column',
    items: [
        {
            xtype:'label',
            text: "label 1",
            flex: 1
        },
        {
            xtype:'label',
            text: "Label 2",
            flex: 1
        }
    ]
} 
```

# matlab - 工作区结构数组输入到 Simulink M 文件 S 函数

> ID：11477079
> 
> 赞同：0
> 
> 时间：2012-07-13T19:27:15.947
> 
> 标签：matlab, struct, simulink

我希望我的 Simulink Level 2 S 函数能够顺序运行一系列测试用例。每个测试用例填充一个包含多个数值数组的结构。我目前正在尝试分两步实现上述目标：

*   步骤 1：使用 M 文件生成测试用例，作为结构数组保存到 Workspace
*   第 2 步：将工作区中的结构数组读取到我的模型中，使用 2 M 级文件 S 函数来处理测试用例。

第 2 步对我来说是有问题的，因为我无法找到让 S-Function 块接受来自工作区的结构数组变量作为输入的方法。我想尝试避免使用 simin 方法（[此处](https://stackoverflow.com/questions/8329944/input-data-to-simulink-from-workspace)是另一个 Stackoverflow 讨论），因为它似乎需要将整个结构表示为单个数据列，并且我想保持结构完整。还尝试使用带有结构数组作为变量名的常量块，但这会返回块的“块*名*参数值的无效设置”。

对于正确设置此设置的任何建议，我们将不胜感激。如果绝对必要，也可以使用不同的方法来构建模型。谢谢！

编辑：意识到我可以使用*load*导入 S 函数 M 文件本身中的数据。这适用于我的项目。但是，我仍然有兴趣知道是否存在针对此问题的常规解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T15:30:48.310

如果您只想访问工作区，我会考虑在您的 M 文件 S-function中使用*evalin(caller,'expression') ：*

```
mystruct = evalin('base','MyStructFromWorkspace');
/* (process mystruct) */ 
```

它也应该可以解决问题。

# sql - 用sql排序

> ID：11477081
> 
> 赞同：1
> 
> 时间：2012-07-13T19:27:41.287
> 
> 标签：sql, sql-server

我有一个关于如何使用 sql 对数据进行排序的问题。为此，我做了一个简单的例子来说明我的问题。

```
if object_id('MyTable', 'U') is not null drop table  dbo.MyTable;

create table MyTable
(
    country varchar(10) not null
    , town varchar( 10 ) not null
    , amount int not null
)

insert into MyTable values
( 'US', 'NYC', 100 )
, ( 'US', 'BAL', 150 )
, ( 'US', 'WAS', 200 )
, ( 'CA', 'MON', 100 )
, ( 'CA', 'TOR', 150 )
, ( 'CA', 'VAN', 200 ) 
```

如何在某种意义上对数据进行排序，所有“国家都按数量降序排列，每个国家的城镇按字母顺序排列。

谢谢，克里斯蒂安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T19:30:41.713

要在 SQL 中排序，请使用 Order By：http: [//msdn.microsoft.com/en-us/library/ms188385.aspx](http://msdn.microsoft.com/en-us/library/ms188385.aspx)

因此，如果您想按 Country、Amount、Town 排序，您可以在 Where 类之后添加一个 Order By 子句，例如：

```
ORDER BY Country, Amount DESC, Town 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T19:36:35.313

我认为应该这样做：

```
SELECT
    country,
    SUM(amount) OVER(PARTITION BY country) as CountryTotal,
    town,
    amount
FROM        MyTable
ORDER BY    CountryTotal, country, town 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T06:30:49.223

我不确定您是要按一个国家/地区的总金额还是仅按金额订购。国家使用总量如下。

```
select 
mt.country,
ctotal.countrycotal,
mt.town,
mt.amount
from 
(
SELECT 
 country, 
 SUM(amount) as countrycotal, 
 FROM        MyTable 
 group BY  country 
```

) ctotal 内部连接 ​​Mytable mt on ctotal.country = mt.country

```
order by ctotal.countrytotal,ctotal.country,mt.town 
```

仅用于以下数量

```
select * from Mytable 
order by mt.amount,mt.country,mt.town 
```

# c# - 在 Windows 窗体中使用 SHA-256 散列文本

> ID：11477083
> 
> 赞同：2
> 
> 时间：2012-07-13T19:27:46.217
> 
> 标签：c#, winforms, utf-8, sha

```
String inputPass = textBox2.Text;
byte[] inputBytes = System.Text.Encoding.UTF8.GetBytes(inputPass);
byte[] inputHashedBytes = Sha256.ComputeHash(inputBytes);
String inputHash = Convert.ToBase64String(inputHashedBytes); 
```

我得到一些奇怪的输出：

> Q9nXCEhAn7RkIOVgBbBeOd5LiH7FWFtDFJ22TMLSoH8=

通过输出哈希看起来像这样：

> 43d9d70828409fb46420e56005b05e38de4b887ec5585b43149db64cc2d2a07f

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T19:29:07.963

`Encoding.UTF8.GetString`将字节解析为 UTF8 代码点。

SHA256 哈希是一个任意的 256 位数字，不对应于任何 Unicode 文本。

您可能希望通过调用以十六进制显示二进制值`BitConverter.ToString()`。
您也可以调用`Convert.ToBase64String()`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-13T19:39:14.983

```
// this is where you get the actual binary hash
byte[] inputHashedBytes = Sha256.ComputeHash(inputBytes);

// but you want it in a string format, similar to a variety of UNIX tools
string result = BitConverter.ToString(inputHashedBytes)
   // this will remove all the dashes in between each two characters
   .Replace("-", string.Empty)
   // and make it lowercase
   .ToLower(); 
```

# mysql - 为什么 PHPMyAdmin 导入会截断我的某些更新中的文本字段？

> ID：11477084
> 
> 赞同：0
> 
> 时间：2012-07-13T19:28:01.153
> 
> 标签：mysql, phpmyadmin

由于过滤器脚本编码不佳（当然是您真正创建的！），我在数据库中遇到了一些狡猾的字符问题。

我通过将数据从 PHPMyAdmin 导出为 SQL 文件来修复数据，然后煞费苦心地`CTRL+H`搜索并替换正确的字符。然后我使用 PHPMyAdmin 重新导入了 SQL 文件（嗯，三个单独的文件）。

这对大多数数据都有效，但在一些帖子中，它们似乎完全被切断了。

```
meta_id     post_id     meta_key            meta_value
162227      264847      water_chemistry     <strong>Temperature</strong>:
162228      264847      diet                <em>Homaloptera</em>
162229      264847      behaviour           <p>Not an aggressive fish although its particular requirements limit the choice of suitable tankmates.
162218      264847      maintenance         <p>Most importantly the water must be clean and well-oxygenated so we suggest the use of an over-sized 
```

例如，[这个物种概况](http://www.seriouslyfish.com/species/homaloptera-ogilviei/)（上面的文字）应该已经`UPDATE`应用了以下语句：

```
UPDATE `wp_postmeta` SET `meta_id` = 162228,`post_id` = 264847,`meta_key` = 'diet',`meta_value` = '<em>Homaloptera</em> spp. are specialised grazers feeding on <a href="/glossary/b/biofilm" rel="/glossary/b/biofilm?hover=true">biofilm</a>, small crustaceans, insect <a href="/glossary/l/larvae" rel="/glossary/l/larvae?hover=true">larvae</a> and other invertebrates. In captivity some sinking dried foods may be accepted but regular meals of live or frozen <em><a href="/glossary/D/Daphnia" rel="/glossary/D/Daphnia?hover=true">Daphnia</a></em>, <em><a href="/glossary/A/Artemia" rel="/glossary/A/Artemia?hover=true">Artemia</a></em>, <a href="/glossary/b/bloodworm" rel="/glossary/b/bloodworm?hover=true">bloodworm</a>, etc. are essential for the maintenance of good health, and it''s highly preferable if the <a href="/glossary/t/tank" rel="/glossary/t/tank?hover=true">tank</a> contains rock and other solid surfaces with growths of <a href="/glossary/a/algae" rel="/glossary/a/algae?hover=true">algae</a> and other <a href="/glossary/a/aufwuchs" rel="/glossary/a/aufwuchs?hover=true">aufwuchs</a>.\r\n\r\nBalitorids are often seen on sale in an emaciated state which can be difficult to correct. A good dealer will have done something about this prior to sale but if you decide to take a chance with severely weakened specimens they''ll initially require a continual, easily-obtainable source of suitable foods in the absence of competitors if they''re to recover.' WHERE `wp_postmeta`.`meta_id` = 162228;

UPDATE `wp_postmeta` SET `meta_id` = 162227,`post_id` = 264847,`meta_key` = 'water_chemistry',`meta_value` = '<strong>Temperature</strong>: [temp]\r\n\r\n<strong>pH</strong>: [pH]\r\n\r\n<strong>Hardness</strong>: [hardness]' WHERE `wp_postmeta`.`meta_id` = 162227;

UPDATE `wp_postmeta` SET `meta_id` = 162229,`post_id` = 264847,`meta_key` = 'behaviour',`meta_value` = '<p>Not an aggressive fish although its particular requirements limit the choice of suitable tankmates. <a href="/glossary/s/species" rel="/glossary/s/species?hover=true">Species</a> inhabiting similar environments include <em>Barilius</em>, <em>Discherodontus</em>, <em>Garra</em>, larger <em>Devario</em>, some <em>Rasbora</em>, gobies of the <a href="/glossary/g/genera" rel="/glossary/g/genera?hover=true">genera</a> <em>Rhinogobius</em>, <em>Sicyopterus</em> and <em>Stiphodon</em> plus <em>Glyptothorax</em>, <em>Akysis</em> and <em>Oreoglanis</em> spp. catfishes.\r\n\r\nMany loaches from the <a href="/glossary/f/family" rel="/glossary/f/family?hover=true">family</a> Nemacheilidae and most from Balitoridae are also suitable although harmless squabbles may occur with the latter group in particular. Research your choices before purchase to be sure.\r\n\r\nIt''s found living in aggregations in nature so buy six or more to see it at its best as when kept singly or in pairs/trios it''s less bold. The interaction between individuals is also interesting to watch and a group will typically arrange themselves close to one another facing directly into the water flow at certain times of day.</p>' WHERE `wp_postmeta`.`meta_id` = 162229;

UPDATE `wp_postmeta` SET `meta_id` = 162218,`post_id` = 264847,`meta_key` = 'maintenance',`meta_value` = '<p>Most importantly the water must be clean and well-oxygenated so we suggest the use of an over-sized <a href="/glossary/f/filter" rel="/glossary/f/filter?hover=true">filter</a> as a minimum requirement. Turnover should ideally be 10-15 times per hour so additional powerheads, airstones, etc., should be employed to achieve the desired flow and <a href="/glossary/o/oxygenation" rel="/glossary/o/oxygenation?hover=true">oxygenation</a> if necessary.\r\n\r\n<a href="/glossary/b/base" rel="/glossary/b/base?hover=true">Base</a> <a href="/glossary/s/substrate" rel="/glossary/s/substrate?hover=true">substrate</a> can either be of <a href="/glossary/g/gravel" rel="/glossary/g/gravel?hover=true">gravel</a>, <a href="/glossary/s/sand" rel="/glossary/s/sand?hover=true">sand</a> or a mixture of both to which should be added a layer of water-worn rocks and pebbles of varying sizes. Driftwood roots and branches are also suitable and although rarely a feature of the natural <a href="/glossary/h/habitat" rel="/glossary/h/habitat?hover=true">habitat</a> <a href="/glossary/a/aquatic" rel="/glossary/a/aquatic?hover=true">aquatic</a> plants from adaptable genera such as <em>Microsorum</em>, <em>Crinum</em> and <em>Anubias</em> spp. can also be added. The latter are particularly useful as <em>Homaloptera</em> spp. appear to enjoy resting on their leaves.\r\n\r\nSince it needs stable water conditions and feeds on <a href="/glossary/b/biofilm" rel="/glossary/b/biofilm?hover=true">biofilm</a> this species should never be added to a biologically immature set-up, and a tightly-fitting cover is necessary since it can literally climb glass. While regular partial water changes are essential aufwuchs can be allowed to grow on all surfaces except perhaps the viewing pane.</p>' WHERE `wp_postmeta`.`meta_id` = 162218; 
```

然而由于某种原因，正如您在物种概况中看到的那样（在数据库中完全一样），大部分文本都丢失了。

有什么想法可能导致这种情况吗？导入完全没有错误。

* * *

**编辑**

我尝试用只是为了查看数据是否正确导入来替换`\r\n`字符`###`- 它没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T00:13:13.213

最后，这是一个**编码问题**。当我最初将我的 SQL 数据拆分为两个单独的文件时，**新文件**的默认编码为 ANSI，其中原始文件（我的数据库是 UTF-8）。

将编码更改为 UTF-8 后，我看到大量奇怪的小字符，我的文本编辑器无法搜索和替换。

我将编码设置回 ANSI，用 UTF-8 创建了一个新的文本文档，然后简单地将 ANSI 文档中的信息复制粘贴到新的 UTF-8 文件中。

以上所有内容都是在[Notepad++](http://notepad-plus-plus.org/)中完成的。

问题已解决 - 7 小时诊断问题；不到 5 秒即可修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T20:41:21.717

如果您使用的是 PHP，请使用 mysql_real_escape_string()：这就是正在发生的事情

```
mysql> select "<strong>Temperature</strong>: [temp]\r\n\r\n<strong>pH</strong>:";
+--------------------------------------------------------------+
| <strong>Temperature</strong>: [temp]

<strong>pH</strong>: |
+--------------------------------------------------------------+
| <strong>Temperature</strong>: [temp]

<strong>pH</strong>: |
+--------------------------------------------------------------+
1 row in set (0.00 sec) 
```

所以使用 php 函数来准确地存储数据。

[http://dev.mysql.com/doc/refman/5.1/en/mysql-real-escape-string.html](http://dev.mysql.com/doc/refman/5.1/en/mysql-real-escape-string.html)

# paypal - 在任意时间以任意金额重复付款？

> ID：11477086
> 
> 赞同：3
> 
> 时间：2012-07-13T19:28:07.003
> 
> 标签：paypal, payment-gateway, payment, payment-processing, braintree

我们想找到一个支付提供商，让我们做类似于 Hailo 的事情，即：

1.  用户注册并向我们提供他们的信用卡详细信息/授权我们向他们的帐户收费。他们只需要这样做**一次**。

2.  在 Hailo 的案例中，用户可能在任何时候乘坐出租车并被收取任何金额（在合理范围内）。在我们的例子中，用户可能需要在任何时候完成一项工作，同样需要一张任意金额的发票。

3.  因此，理想情况下，我们可以随时向用户账户收取任何金额，无需进一步授权。这*是*可能的，因为 Hailo（我相信 Uber）已经实现了它。但是，我不知道他们是使用第三方支付提供商还是自己推出。

像 BrainTree 的定期付款这样的东西接近我们想要的，但不完全是。我们希望能够在任意时间计费，而不是按固定时间表计费。

我们目前最好的选择是使用定期计费，即保存发票，然后在月底一次性收取所有费用。不过，从现金流的角度来看，这并不理想。另一种选择是使用 GoCardless 的可变计费（您要求客户允许每月最多支付 X 英镑），尽管从与人们交谈的情况来看，他们似乎对此很敏感，因为这似乎是一项预先承诺。

我们可以按照自己的方式去做吗？Hailo 和 Uber 等公司是如何做到的？

顺便说一句，我们在英国。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T04:42:17.330

在 PayPal 世界中——我们将这种功能称为参考交易——这里有 2 个操作指南，可以为您提供有关如何使用 PayPal 账户和直接信用卡实施参考交易的更多信息：

*   [PayPal 用户参考交易](https://www.x.com/developers/paypal/how-to-guides/how-set-reference-transaction-using-express-checkout)
*   [信用卡/借记卡的参考交易](https://www.x.com/developers/paypal/how-to-guides/how-set-recurring-payments-profile-using-direct-payment)

您还可以使用我们的 Preapproval 功能 - 这将使您能够授权访问 PayPal 帐户以代表他们进行付款。[这是它的操作方法](https://www.x.com/developers/paypal/how-to-guides/how-set-payment-preapproval-using-adaptive-payments)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T18:02:09.953

完全披露，我是 Braintree 的开发人员。

使用 Braintree，您可以随时创建交易，而不仅仅是重复交易。事实上，Uber 是 Braintree 的客户。您可以将该卡存储在 Braintree 保险库中，并在您准备好向客户的信用卡收费时创建一个新交易。

Braintree 最近宣布了一项[国际扩张](https://www.braintreepayments.com/tour/international)，将在未来几个月内为英国和其他国家的商家提供支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T16:03:33.923

根据您的描述 Authorize.net CIM 将完成这项工作 - [http://www.authorize.net/solutions/merchantsolutions/merchantservices/cim/](http://www.authorize.net/solutions/merchantsolutions/merchantservices/cim/)

它符合 PCI 标准，可让您与他们一起存储客户信用卡详细信息并为客户返回令牌。然后，您可以在需要时使用此令牌向客户信用卡收取费用。如果需要，他们的经常性计费工具还可以让您收取固定的经常性费用 - [http://www.authorize.net/solutions/merchantsolutions/merchantservices/automatedrecurringbilling/](http://www.authorize.net/solutions/merchantsolutions/merchantservices/automatedrecurringbilling/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T19:12:47.723

DataCash 将让您在许多其他事情中做到这一点。您只需在 XML 中提供他们的 16 位参考号，而不是卡号。

（注意：我是一名前 DataCash 员工，在我目前的工作中，我们使用 DataCash 作为支付网关。）

# javascript - 如何为大型组织的网站使用 js 最小化

> ID：11477089
> 
> 赞同：0
> 
> 时间：2012-07-13T19:28:16.660
> 
> 标签：javascript, jquery, optimization, minify, yui-compressor

我正在寻找在我们的网站中使用的 JS 最小化（也可能是 CSS）工具。该站点相当大，我们无法单独手动缩小文件。我们还计划对文件使用长期缓存，并且需要为每个文件附加一个版本号。恐怕在频繁发布时很难跟踪。

我知道 YUI Compressor 之类的工具，等等。但我不确定它们如何用于像我这样的大项目。从技术上讲，我正在寻找可以在我们的开发完成后调用的脚本或应用程序，以将其与文件的缩小版本一起使用。

这些天大公司使用/遵循的常见做法是什么？任何帮助表示赞赏。我只是不确定要搜索什么。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T19:35:31.957

我建议您使用一种 makefile 工具链（有很多，例如 ant 或 maven）来：

*   将您的 js 文件连接到一个文件中
*   然后缩小生成的文件（我使用[Google Closure Compiler](https://developers.google.com/closure/compiler/)，用 ant 目标调用）

请注意，制作一个文件是最重要的操作，因为在现代网络上，由于请求数量造成的延迟比总大小造成的负担要大得多。通过这种方式，您可以轻松地处理数十个或数百个 js（或 css）文件，并且只要它有助于代码源的可读性和可维护性，就毫不犹豫地创建一个新文件。

这消除了出于缓存原因对文件可见版本控制（手动或非手动）管理的需要。

正如最近[在另一个答案中](https://stackoverflow.com/questions/11454619/how-to-write-modular-client-side-javascript)所说，为了帮助调试，我的部署脚本总是并行制作两个版本：一个是非连接/缩小的，一个是连接/缩小的。解压版无需任何部署操作即可现场开发/测试。

# php - Codeigniter 在默认控制器中加载外部站点

> ID：11477093
> 
> 赞同：1
> 
> 时间：2012-07-13T19:28:33.830
> 
> 标签：php, codeigniter

我无法自己解决这个问题，所以我在这里寻求您的帮助。

如何在代码点火器默认控制器中加载我已经作为视图创建的网站？

我将我的网站放在文件夹名称 site 下，并在默认控制器中加载了视图 site/index ，但是在我的网站中，包含和重定向存在问题......我不知道为什么，我猜是这样该网站通常适用于重定向与代码点火器样式不兼容

编辑：我想我必须关闭这个站点的 CI 引擎，但我不知道为什么，因为我仍然需要 codeingiter 来管理我的应用程序的其他部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:53:18.673

我想最好选择以下选项之一：

1.  将现有站点修改为 CodeIgniter 站点。
2.  将您的站点与 CodeIgniter 站点分开，并在两个站点之间建立链接。

您尝试这样做的方式似乎非常无用，并造成了很多额外的麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-24T03:15:11.213

您可以简单地在控制器中使用重定向功能。如果您提供完整的 URL，您可以转到任何其他页面。当然，您将离开您的 CI 应用程序。

```
redirect('http://www.example.net/page_in_external_site/'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T19:39:40.360

“当 URI 不存在时，可以告诉 CodeIgniter 加载默认控制器，就像只请求您的站点根 URL 时的情况一样。要指定默认控制器，请打开您的 application/config/routes.php 文件并设置它变量：$route['default_controller'] = '博客'；

其中 Blog 是您要使用的控制器类的名称。如果您现在加载主 index.php 文件而不指定任何 URI 段，您将默认看到您的 Hello World 消息。”

[http://codeigniter.com/user_guide/general/controllers.html](http://codeigniter.com/user_guide/general/controllers.html)

从该链接复制的片段，您应该将控制器类名放在该配置中，而不是视图中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T19:57:53.857

在定义包含的路径时尝试使用 APPPATH 常量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-09T05:32:47.810

我知道这是一个老问题，但是您可以尝试使用带有 iframe 的视图模板，并且可以将 URL 传递给 iframe 的 src 属性。这样，您可以在视图中显示您的站点，但仍然无法访问从您的站点传递给视图的变量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-20T13:25:40.330

在 system/Core/Loader.php 中将第 141 行更改为如下所示：

$this->_ci_view_paths = array(APPPATH . 'views/' => TRUE, FCPATH => TRUE);

并且获得视图很简单：

$this->load->view('application/PATH_TO_VIEW');

# java - 构建一个面板，在其中选择保存文件的位置

> ID：11477096
> 
> 赞同：-2
> 
> 时间：2012-07-13T19:28:41.977
> 
> 标签：java, swing, jfilechooser

我会构建一个面板，让我选择可以保存文件的位置。我阅读了java文档，我看到有一个名为文件选择器的swing组件，但我不知道如何使用它。我想要做的是在我的机器中选择保存创建文件的路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:40:37.840

如何使用它？好吧，你只需要“使用它”！真的！

这将创建您的 FileChooser 实例并将其设置为从用户的桌面文件夹开始：

```
JFileChooser fc = new JFileChooser(System.getProperty("user.home") + "/Desktop"); 
```

之后，您可以设置各种选项。在这种情况下，我将其设置为允许选择多个文件，并且只允许选择“.xls”（Excel）文件：

```
fc.setMultiSelectionEnabled(true);

SelectionEnabled(true);
        FileFilter ff = new FileFilter() {

            @Override
            public boolean accept(File f) {
                if (f.isDirectory()) {
                    return true;
                }
                String extension = f.getName().substring(f.getName().lastIndexOf("."));
                if (extension != null) {
                    if (extension.equalsIgnoreCase(".xls")) {
                        return true;
                    } else {
                        return false;
                    }
                }
                return false;
            }

            @Override
            public String getDescription() {
                return "Arquivos Excel (\'.xls\')";
            }
        };
fc.setFileFilter(ff); 
```

最后，我将展示它并获取用户的选择和选择的文件：

```
File[] chosenFiles;
int choice = fc.showOpenDialog(fc);
        if (choice == JFileChooser.APPROVE_OPTION) {
            chosenFiles = fc.getSelectedFiles();
        } else {
        //User canceled. Do whatever is appropriate in this case.
        } 
```

享受！还有祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T19:34:59.273

本[教程](http://docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html)直接来自 Oracle 网站，是开始学习 FileChoosers 的好地方。

```
final JFileChooser fc = new JFileChooser();
int returnVal = fc.showOpenDialog(this);

if (returnVal == JFileChooser.APPROVE_OPTION) {
    File file = fc.getSelectedFile();
    //This is where a real application would open the file.
    log.append("Opening: " + file.getName() + ".");
} else {
    log.append("Open command cancelled by user.");
} 
```

上面的代码打开了一个 FileChooser，并将选择的文件存储在`fc`变量中。选定的按钮（确定、取消等）存储在`returnVal`. 然后，您可以对文件做任何您想做的事情。

# wpf - 根据 XElement 中的属性更改 DataTemplate

> ID：11477099
> 
> 赞同：0
> 
> 时间：2012-07-13T19:28:59.837
> 
> 标签：wpf, xaml, .net-4.0, linq-to-xml

好的，我有一个 XElement，它看起来像：

```
<authentication mode="Forms">
  <forms loginUrl="login.aspx" name=".LOGIN" protection="All" timeout="4800" path="/" />
</authentication> 
```

然后在我的 XAML 中，我设置了一个 ContentControl，如下所示：

```
<ContentControl Content="{Binding Data}">
        <ContentControl.ContentTemplate>
            <DataTemplate>
                <DataTemplate.Triggers>
                    <DataTrigger Binding="{Binding Path=Attribute[mode].Value}" Value="Forms">
                        <Setter Property="ContentTemplate" Value="{StaticResource FormsTemplate}"/>                            
                    </DataTrigger>
                </DataTemplate.Triggers>
            </DataTemplate>
        </ContentControl.ContentTemplate>
    </ContentControl> 
```

其中 Data 是我的包含 XElement 的公共属性。我的模板看起来像：

```
<DataTemplate x:Key="FormsTemplate">
        <StackPanel>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="Login URL"/>
                <TextBox Text="{Binding Path=Element[forms].Attribute[loginUrl].Value}"/>
            </StackPanel>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="Name"/>
                <TextBox Text="{Binding Path=Attribute[name].Value}"/>
            </StackPanel>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="Protection"/>
                <TextBox Text="{Binding Path=Attribute[protection].Value}"/>
            </StackPanel>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="Timeout"/>
                <TextBox Text="{Binding Path=Attribute[timeout].Value}"/>
            </StackPanel>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="Path"/>
                <TextBox Text="{Binding Path=Attribute[path].Value}"/>
            </StackPanel>
        </StackPanel>
    </DataTemplate>
    <DataTemplate DataType="passport">
        <StackPanel>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="Redirect URL"/>
                <TextBox Text="{Binding Path=Attribute[redirectUrl].Value}"/>
            </StackPanel>                
        </StackPanel>
    </DataTemplate> 
```

为什么这不起作用？当我这样做时，屏幕上没有任何显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:41:57.550

我通过使用样式触发器来解决它。以下是我必须使用的。

```
<ContentControl.Style>
            <Style TargetType="{x:Type ContentControl}">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding Path=Data.Attribute[mode].Value}" Value="Forms">
                        <Setter Property="ContentTemplate" Value="{StaticResource FormsTemplate}"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding Path=Data.Attribute[mode].Value}" Value="Passport">
                        <Setter Property="ContentTemplate" Value="{StaticResource PassportTemplate}"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </ContentControl.Style> 
```

# c++ - 算法分析：我是否正确分析了这些算法？如何处理此类问题

> ID：11477100
> 
> 赞同：6
> 
> 时间：2012-07-13T19:29:00.037
> 
> 标签：c++, algorithm, big-o, time-complexity

1)

```
 x = 25;
    for (int i = 0; i < myArray.length; i++)
    {
        if (myArray[i] == x)
            System.out.println("found!");
    } 
```

我认为这是O（n）。

2)

```
for (int r = 0; r < 10000; r++)
    for (int c = 0; c < 10000; c++)
        if (c % r == 0)
            System.out.println("blah!"); 
```

我认为这个是 O(1)，因为对于任何输入 n，它将运行 10000 * 10000 次。不确定这是否正确。

3)

```
a = 0
for (int i = 0; i < k; i++)
{
    for (int j = 0; j < i; j++)
        a++;
} 
```

我认为这个是 O(i * k)。我真的不知道如何解决这样的问题，其中内部循环受到外部循环中递增的变量的影响。这里的一些关键见解将不胜感激。外循环运行 k 次，内循环运行 1 + 2 + 3 + ... + k 次。所以这个总和应该是 (k/2) * (k+1)，这将是 k^2 的顺序。那么它实际上是O（k ^ 3）吗？这似乎太大了。再次，不知道如何处理这个问题。

4)

```
int key = 0;    //key may be any value
int first = 0;
int last = intArray.length-1;;
int mid = 0;
boolean found = false;

while( (!found) && (first <= last) )
{
    mid = (first + last) / 2;

    if(key == intArray[mid]) 
        found = true;
    if(key < intArray[mid])
        last = mid - 1;
    if(key > intArray[mid]) 
        first = mid + 1;
} 
```

这个，我认为是 O(log n)。但是，我得出这个结论是因为我相信这是一个二分搜索，而且我从阅读中知道运行时间是 O(log n)。我认为这是因为对于循环的每次迭代，您将输入大小除以 2。但是，我不知道这是否是正确的推理，或者如何处理我没有见过的类似算法，并且能够推断出它们以更可验证或更正式的方式在对数时间内运行。

5)

```
int currentMinIndex = 0;

for (int front = 0; front < intArray.length; front++)
{
    currentMinIndex = front;

    for (int i = front; i < intArray.length; i++)
    {
        if (intArray[i] < intArray[currentMinIndex])
        {
            currentMinIndex = i;
        }
    }

    int tmp = intArray[front];
    intArray[front] = intArray[currentMinIndex];
    intArray[currentMinIndex] = tmp;
} 
```

我对这个感到困惑。外循环运行 n 次。内部 for 循环运行 n + (n-1) + (n-2) + ... (n - k) + 1 次？那是 O(n^3) 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:39:16.777

或多或少，是的。

1 是正确的 - 似乎您正在搜索我认为是未排序集合中的特定元素。如果是这样，最坏的情况是元素位于列表的最后，因此 O(n)。

2是正确的，虽然有点奇怪。它是 O(1) 假设`r`并且`c`是常数并且边界不是变量。如果它们是恒定的，那么是 O(1)，因为没有什么可输入的。

3 我相信这仍然被认为是 O(n^2)。会有一些常数因子，如 k * n^2，去掉常数，你得到 O(n^2)。

4 看起来很像排序集合的二进制搜索算法。O(logn) 是正确的。它是日志，因为在每次迭代中，您基本上将您要查找的元素所在的可能选择数量减半。

由于与 3 类似的原因，5 看起来像冒泡排序 O(n^2)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T19:43:17.800

O() 本身没有任何意义：您需要指定是在计算“最坏情况”O 还是平均情况 O。对于某些排序算法，它们平均有 O(n log n)但在最坏的情况下是 O(n^2)。

基本上你需要计算最内层循环的总迭代次数，并在没有任何常数的情况下取结果的最大分量（例如，如果你有 k*(k+1)/2 = 1/2 k^2 + 1/2 k，最大的分量是 1/2 k^2，因此你是 O(k^2))。

例如，您的项目 4) 在 O(log(n)) 中，因为如果您处理大小为 n 的数组，那么您将在该数组上运行一次迭代，下一次将在大小为 n 的数组上运行/2，然后是 n/4，...，直到这个大小达到 1。所以它是 log(n) 次迭代。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T21:54:15.393

您的问题主要是关于 O() 的定义。

当有人说这个算法是 O(log(n)) 时，你必须阅读：

*当输入参数n变得很大时，算法执行的操作数最多增长log(n)*

现在，这意味着两件事：

1.  您必须至少有一个输入参数 n。没有一个就谈论 O() 是没有意义的（就像你的情况2一样）。
2.  您需要定义要计数的操作。这些可以是添加，两个元素之间的比较，分配的字节数，函数调用的数量，但你必须决定。通常你会采取对你来说成本最高的手术，或者如果做太多次就会变得昂贵的手术。

所以记住这一点，回到你的问题：

1.  n 是 myArray.Length，您计算的操作数是 '=='。在这种情况下，答案正好是 n，即 O(n)

2.  你不能指定一个 n

3.  n只能是k，你算的操作数是++。正如您所说，您恰好有 k*(k+1)/2 即 O(n2)

4.  这次n又是你数组的长度，你算的操作是==。在这种情况下，操作的数量取决于数据，通常我们谈论“最坏情况”，意思是在所有可能的结果中，我们看最耗时的那个。该算法充其量只进行一次比较。对于最坏的情况，让我们举个例子。如果数组是 [[1,2,3,4,5,6,7,8,9]] 并且您正在寻找 4，则您的 intArray[mid] 将依次变为 5、3 和 4，依此类推您将进行 3 次比较。事实上，对于一个大小为 2^k + 1 的数组，最大比较次数为 k（你可以查看）。所以 n = 2^k + 1 => k = ln(n-1)/ln(2)。您可以将此结果扩展到 n 不 = 2^k + 1 的情况，您将得到复杂度 = O(ln(n))

无论如何，我认为您很困惑，因为您不完全知道 O(n) 的含义。我希望这是一个开始。

# wordpress - 从登录页面重定向

> ID：11477107
> 
> 赞同：0
> 
> 时间：2012-07-13T19:29:26.313
> 
> 标签：wordpress, redirect, login

我正在尝试找到一种方法来防止在用户填写登录表单时出现登录屏幕错误。

所以，现在，我在自定义模板上打印了登录表单。但是，如果用户填写错误，它会将他们重定向到 wordpress 表单以重试。我想摆脱那个。

这是我的代码，但它不起作用。

```
add_action('login_form', 'redirect_invalid_login');

function redirect_invalid_login(){
    global $error;

    if($error)
        header('Location: '.get_bloginfo('url').'/client-login/?message=6');
} 
```

现在 login_form 我相信为时已晚，因为东西已经打印到页面上。我一直没能找到一个有效的钩子。有这个钩子吗？或者也许是一种不同的方式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:24:01.267

好的，所以这是解决方案：

```
add_action('login_redirect', 'redirect_login', 10, 3);

function redirect_login($redirect_to, $url, $user) {
    if($user->errors['empty_password']){
        wp_redirect(get_bloginfo('url').'/client-login/?message=6');
    }
    else if($user->errors['empty_username']){
        wp_redirect(get_bloginfo('url').'/client-login/?message=7');
    }
    else if($user->errors['invalid_username']){
        wp_redirect(get_bloginfo('url').'/client-login/?message=8');
    }
    else if($user->errors['incorrect_password']){
        wp_redirect(get_bloginfo('url').'/client-login/?message=9');
    }
    else{
        wp_redirect(get_bloginfo('url').'/client-login');
    }

    exit;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T20:27:33.413

你可以试试这个

```
add_action( 'wp_login_failed', 'redirect_invalid_login' );
function redirect_invalid_login() {
        wp_redirect(get_bloginfo('url').'/client-login/?message=6');
        exit;
} 
```

# http - 这个 HTTP 标头错了吗？

> ID：11477108
> 
> 赞同：2
> 
> 时间：2012-07-13T19:29:27.187
> 
> 标签：http, http-headers, bittorrent

我正在尝试编写一个 torrent 下载器，需要弄清楚如何联系跟踪器。我使用 Fiddler2 程序拦截从 Vuze 发送到其跟踪器的跟踪器请求。

在发送的消息中（如下所示），Connection 标头用不同的值声明了两次。

这是对 Connection 标头的正确使用吗？Connection: keep-alive 有什么作用？

```
GET /announce?info_hash=0Z%22...&azver=3&azas=12576 HTTP/1.1
User-Agent: Azureus 4.7.0.2;Windows 7;Java 1.6.0_31
Connection: close
Accept-Encoding: gzip
Host: tracker.update.vuze.com:6969
Accept: text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2
Connection: keep-alive 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T19:43:12.423

从 RFC2616 第 4.2 节：

> 当且仅当该标题字段的整个字段值被定义为逗号分隔列表[即，#(values)] 时，具有相同字段名称的多个消息标题字段可能出现在消息中。必须可以将多个头字段组合成一个“字段名称：字段值”对，而不改变消息的语义，方法是将每个后续字段值附加到第一个字段值，每个字段值用逗号分隔。因此，接收具有相同字段名称的头字段的顺序对组合字段值的解释很重要，因此代理在转发消息时不得更改这些字段值的顺序。

编辑：

根据第 14.10 节，Connection 就是这样一个字段名，因此**拥有多个 Connection 标头在技术上是正确的**。

从 14.10 开始，Connection 标头的语法生成为`Connection = "Connection" ":" 1#(connection-token)`，因此一个或多个逗号分隔的标记**是**有效的。

然而，在实践中，可能会忽略第二个 Connection 标头，因此 Web 服务器将期望在发送响应后关闭底层 TCP 连接。

对于 HTTP 1.1，默认模式是服务器保持底层 TCP 连接为后续请求打开，尽管许多服务器会限制在关闭连接之前发出的请求总数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-18T01:35:22.197

HTTP 1.1 允许多个连接标头。多个此类标头的语义被定义为与单个标头相同，所有值都用逗号连接在一起，例如

```
Connection: close
Connection: keep-alive 
```

是相同的：

```
Connection: close,keep-alive 
```

所以从技术上讲，这些标题很好。但是，我将在没有进行一些实验的情况下在此预测，将会有很多服务器（尤其是没有经过很好测试的服务器，例如洪流跟踪器）将忽略这些标头中的任何一个。

现在，更深层次的问题是“keep-alive”是一些 http 1.0 扩展，有点与“close”相矛盾，所以我猜这种组合只是 torrent 客户端中的一个错误。不过，我想大多数跟踪器无论如何都不会允许持久连接，所以我认为进行 i 的投注方式只有一个“连接：关闭”标题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T19:36:08.310

有 2 个连接标题字段很奇怪。我认为你只能期待一个不确定的行为，因为这种情况的处理完全取决于 Web 服务器的实现。它可能以存储字段的哈希映射中的任何一个（比如说）结束。

基本上，保持活动状态意味着允许浏览器保持与服务器的连接并继续检索图像、脚本。通常情况并非如此。通常，在请求得到响应后，与 Web 服务器的连接会关闭。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T19:37:30.193

```
Connection: Close 
```

表示请求完成后关闭连接。

```
Connection: keep-alive 
```

表示保持连接打开以供将来请求。

您应该只有一个 Connection 参数。

因此，HTTP 标头不正确。

# php - cake php 控制台生成的代码中未加载相关模型

> ID：11477114
> 
> 赞同：-1
> 
> 时间：2012-07-13T19:30:00.943
> 
> 标签：php, cakephp, cakephp-2.1

我使用 cakephp 控制台生成了一些 CRUD 操作。生成的代码有问题，因为默认情况下未在控制器中加载关联模型的模型。

例如：

```
$programs = $this->Chantier->Program->find('list'); 
```

行不通，但是：

```
$this->loadModel('Program');
$programs = $this->Program->find('list'); 
```

将。这是关联的代码：

```
/**
* belongsTo associations
*
* @var array
*/
public $belongsTo = array(
    'Programs' => array(
        'className' => 'Programs',
        'foreignKey' => 'Programs_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    ),
    'Etats' => array(
        'className' => 'Etats',
        'foreignKey' => 'Etats_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    ),
    'Types' => array(
        'className' => 'Types',
        'foreignKey' => 'Types_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    ),
    'ChampsLibres' => array(
        'className' => 'ChampsLibres',
        'foreignKey' => 'Champs_libres_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    ),

); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:02:11.343

仔细查看您的代码：

```
public $belongsTo = array(
'Programs' => array(
    'className' => 'Programs',
    'foreignKey' => 'Programs_id',
    'conditions' => '',
    'fields' => '',
    'order' => ''
), 
```

关联的别名和类名都是复数形式，虽然这是可能的并且很好，但它违反了 CakePHP 的约定。你正在尝试这个：

```
$programs = $this->Chantier->Program->find('list'); 
```

但请注意，您以单数形式编写 Program，而不是在您的关联中声明的复数形式。我建议重新烘焙您的代码以遵循约定，以避免将来的头痛和混乱。

# c++ - 将值解析为向量的 C++ 更好方法

> ID：11477117
> 
> 赞同：1
> 
> 时间：2012-07-13T19:30:32.707
> 
> 标签：c++, parsing, stl, stream

我正在解析来自“C-only”接口的文本数组，其中每个字符串可能有任意数量的值，这些值可以单独地被“ `istream::operator >>()`”解析。

例如，其中一个解析器用于自定义 IPv4 类：

```
std::istream &  operator >>( std::istream& stream, IPv4 &var ) 
```

实现非常明显。

现在假设输入如下：

```
const char *string_array[] =
{
    "192.168.0.1, 192.168.0.32,    192.168.0.40",
    "169.254.3.18, 169.254.3.19, 169.254.3.20, 169.254.3.21",
    "10.0.92.100",
    "10.0.0.101,    10.0.0.102,    10.0.0.103   ,  10.0.0.104 , 10.0.0.110  ",
}; 
```

我想找到一种优雅的方式将所有解析的值放在一个数组中，以便我可以将它发送到“仅 C”函数。

天真的方法是首先`const char *`用 a 连接所有字符串 ()，`stringstream`然后用 my 循环遍历这个流`operator >>`。

```
 std::stringstream   ss;
        IPv4 ip;
        std::vector< IPv4 > ip_vector;

         for ( int c = 0; c < count; ++c )
                        ss << string_array[ c ] << ", ";

         while ( ss.good( ) )
         {
                        ss >> ip;
                    ip_vector.push_back( ip );
         } 
```

对我来说似乎不是那么明智，但我不知道如何让它更聪明。

另请注意：Boost 不是此解决方案的选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:38:42.703

您可以使用内置的 STL 功能来代替编写自己的循环。

```
copy(string_array, string_array + count,
     ostream_iterator<const char *>(ss, ", "));
copy(istream_iterator<IPv4>(ss), istream_iterator<IPv4>(),
     back_inserter(ip_vector)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T20:18:35.203

我认为连接它是没用的：只需“加入”循环，例如：

```
istream &skipblanks(istream &s) {
  char c;
  while ((c = s.peek()) == ' ' || c == ',')
   s.get();
  return s;
}

...
std::vector< IPv4 > ip_vector;
for ( int c = 0; c < count; ++c ) {
    istringstream ss(string_array[ c ]);
    while (ss) {
        IPv4 ip;
        if (skipblanks(ss) >> ip)
            ip_vector.push_back( ip );
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T11:34:29.197

`std::copy()`并且`std::back_inserter`肯定是出路。我会坚持，尽管使用`for`循环遍历字符串而不是连接 a 中的所有内容`stringstream`，正如@ephemient 所建议的那样：

```
std::vector< IPv4 > ip_vector;

for ( unsigned c = 0; c < count; ++c )
{
    std::stringstream   ss( string_array[ c ] );

    std::copy( std::istream_iterator< IPv4 >( ss ), std::istream_iterator< IPv4 >( ),
                std::back_inserter( ip_vector ) );
} 
```

这样你就清楚你正在转换所有的字符串。您还必须构造 3 个`std::stringstream`对象，但不必为连接字符串重新定位内存。

# mysql - MySQL：返回更新的行

> ID：11477121
> 
> 赞同：22
> 
> 时间：2012-07-13T19:30:40.287
> 
> 标签：mysql, return

我试图在扭曲的 python 中结合这两个查询：

```
SELECT * FROM table WHERE group_id = 1013 and time > 100; 
```

和：

```
UPDATE table SET time = 0 WHERE group_id = 1013 and time > 100 
```

到单个查询中。有可能这样做吗？

我尝试将 SELECT 放在子查询中，但我认为整个查询不会返回我想要的。

有没有办法做到这一点？（更好，没有子查询）或者我只需要坚持两个查询？

谢谢你，

权

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-13T20:09:32.737

显然 mysql 确实有一些可能有用的东西，特别是如果你只更新一行。

这个例子来自： http: [//lists.mysql.com/mysql/219882](http://lists.mysql.com/mysql/219882)

```
UPDATE mytable SET
mycolumn = @mycolumn := mycolumn + 1
WHERE mykey = 'dante';

SELECT @mycolumn; 
```

虽然我从未尝试过，但请让我知道你的进展情况。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-03-09T13:01:04.263

这真的很晚了，但我遇到了同样的问题，我发现最有帮助的解决方案如下：

```
SET @uids := null;
UPDATE footable
   SET foo = 'bar'
 WHERE fooid > 5
   AND ( SELECT @uids := CONCAT_WS(',', fooid, @uids) );
SELECT @uids; 
```

来自[https://gist.github.com/PieterScheffers/189cad9510d304118c33135965e9cddb](https://gist.github.com/PieterScheffers/189cad9510d304118c33135965e9cddb)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-13T20:10:08.023

您不能直接组合这些查询。但是您可以编写一个执行这两个查询的存储过程。例子：

```
delimiter |
create procedure upd_select(IN group INT, IN time INT)
begin
    UPDATE table SET time = 0 WHERE group_id = @group and time > @time;
    SELECT * FROM table WHERE group_id = @group and time > @time;
end;
|
delimiter ; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-13T20:19:46.020

因此，当您访问一行时，您要做的就是将其重置`time`为零——有点像触发器，但 MySQL 不能在`SELECT`.

使用来自应用程序的一个服务器请求执行此操作的最佳方法可能是编写一个更新然后返回该行的存储过程。如果让两者一起发生非常重要，请将这两个语句包装在一个事务中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-24T08:22:52.097

有一个更快的版本返回更新的行，并且在处理高负载的系统要求在同一数据库服务器上同时执行查询时更正确

```
update table_name WITH (UPDLOCK, READPAST)
SET state = 1
OUTPUT inserted. 
```

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2019-04-18T23:23:23.680

`UPDATE tab SET column=value RETURNING column1,column2...`

# ffmpeg - 使用 FFmpeg 检测具有给定图像/徽标的帧

> ID：11477130
> 
> 赞同：2
> 
> 时间：2012-07-13T19:31:01.660
> 
> 标签：ffmpeg, video-processing

我正在尝试通过检测帧中是否存在标记（图像）来分割视频。我已经查看了文档，我看到`removelogo`但没有`detectlogo`。

有谁知道如何做到这一点？我知道徽标是什么以及它将位于的区域。

我在想我可以将所有帧提取到 png 中，然后一一分析（或 n × n），但这可能是一个漫长的过程......

任何指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T21:53:19.900

ffmpeg 本身没有任何这样的能力。过滤器的`delogo`工作原理是在其参数中取一个矩形区域并根据其周围环境对该区域进行插值。它不关心该区域以前包含什么；不管它以前包含什么，它都会填充该区域。

如果您需要检测徽标的存在，那是完全不同的任务。您需要自己创建它；如果您对此很认真，我建议您开始熟悉 ffmpeg 过滤器 API 并准备好动手。如果徽标具有独特的颜色，那可能是检测它的好方法。

由于您所追求的可能只是输出有关哪些帧包含（或不包含）徽标的信息，因此作为模型查看的一个过滤器将是`blackframe`过滤器（搜索全黑帧）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T01:29:34.530

您可以编写一个检测徽标模块，解码视频（YUV 420P 格式），将原始帧提供给该模块，在您期望徽标的区域执行 SAD（绝对差和），如果 SAD 可以忽略不计，则匹配，记录帧号。您可以在这些帧处分割视频。SAD 仅在 Y(luma) 帧上完成。为了节省处理，您可以在解码之前将视频缩放到较低的分辨率。

# java - 使用 javascript 引擎比较日期

> ID：11477132
> 
> 赞同：0
> 
> 时间：2012-07-13T19:31:03.490
> 
> 标签：java, date, compare

我正在使用 Javascript 引擎来比较值。值可以是双精度或日期。（字符串）

```
ScriptEngineManager factory = new ScriptEngineManager();
ScriptEngine engine = factory.getEngineByName("JavaScript");
// Date value is populated dynamically here
engine.eval("dateValue = " + "01/02/2012");
// The condition is populated dynamically here
if ((Boolean) engine.eval("dateValue <=" + "12/31/2012")) { 
  System.out.println("TRUE");
} else {
    System.out.println("FALSE");
} 
```

上面的代码适用于 double 值，但给出了错误的日期结果。对于上面的示例，它应该显示 TRUE，但它显示 FALSE。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:33:02.253

您应该执行以下操作：

```
engine.eval("var dateValue = " + "new Date(2012, 02, 01);");
...
if ((Boolean) "dateValue <=" + " new Date(2012, 12, 31);") 
```

在您的脚本中，2012 年 12 月 31 日将被解释为数学表达式。

您想做的测试的另一种可能性是：

```
engine.eval("var test = dateValue <=" + " new Date(2012, 12, 31);")
Object myBoolean = engine.get("test"); 
```

# java - 在 Java 中设置 lastmodifieddate 时出错

> ID：11477135
> 
> 赞同：0
> 
> 时间：2012-07-13T19:31:15.920
> 
> 标签：java, file, ftp, timestamp, last-modified

我试图将本地文件夹文件的 lastmodifieddate 设置为 FTP 文件的 lastmodifieddate。但是，在返回值中它返回 false 并且日期也没有正确设置。

这是功能，

```
 public static void getModifiedDateAndTimeFromFTPFile(String FTPHost, String FTPUserName, String FTPPassword, String FTPRemoteDirectory, String localFilePath, String fileName) {
        try{
            //get Local File 
            File fileLocal = new File(localFilePath + fileName);

            //Connect to FTP and get the lastmodified time of File.
            FTPClient client = new FTPClient();
            client.connect(FTPHost);
            client.login(FTPUserName, FTPPassword);
            client.changeWorkingDirectory(FTPRemoteDirectory);          
            FTPFile ftpFile = client.listFiles(fileName)[0];

            //Get last_modified date of FTP file.
            Date ftpFileDate = ftpFile.getTimestamp().getTime();

            //Now set date to the Local File.
            boolean boolSetTime = fileLocal.setLastModified(ftpFileDate.getTime());
            System.out.println("    Was last modified time set successfully ? : " + boolSetTime);           
        } catch (Exception ex) {
            System.out.println("Error : " + ex.toString());
        }
    } 
```

任何人都可以通过指出我的错误来帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:43:14.990

很可能`localFilePath + fileName`不会形成预期的文件名。这不会在构造 File 对象时给您异常，但`setLastModified(...)`在不存在的文件上总是会返回 false。

可能只是缺少路径分隔符？

# drupal - Drupal 7：使用视图创建词汇表，但按标题以外的字段对其进行排序？

> ID：11477143
> 
> 赞同：3
> 
> 时间：2012-07-13T19:31:57.507
> 
> 标签：drupal, drupal-7, views, glossary

我正在尝试创建一个词汇表视图，但 Views 提供的视图使用节点标题的第一个字母。我需要它在我的内容类型中使用名为 Artist 的字段的第一个字母。我尝试制作一个新的上下文过滤器并将其与词汇表视图提供的过滤器匹配，但词汇表模式甚至不是一个选项，我觉得这很奇怪。有人有想法么？：-/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T22:48:47.510

通过为页面和附件显示复制现有的上下文过滤器，您正在做正确的事情。您的主要问题是弄清楚为什么您的字段没有出现“词汇表模式”选项。对于 Views 7.x-3.3，如果您的 Artist 字段是 Text 类型，则应该这样做，但我怀疑您的字段实际上是 List 或 Term 引用。

如果是列表（文本）字段：升级到 Views 7.x-3.x-dev 并且词汇表模式选项将可用。

如果它是术语参考字段：为术语添加关系或“节点上的分类术语”，然后您将能够使用术语名称作为词汇表参数。

如果它是节点引用字段：为您的节点引用字段添加关系并选中“需要此关系”。然后更新页面和附件显示中的内容：标题上下文过滤器以使用此关系。这告诉视图过滤器应该基于相关节点的标题而不是父节点。

# machine-learning - 开源神经网络库

> ID：11477145
> 
> 赞同：64
> 
> 时间：2012-07-13T19:32:11.557
> 
> 标签：machine-learning, artificial-intelligence, neural-network

我正在寻找一个开源神经网络库。到目前为止，我已经看过 FANN、WEKA 和 OpenNN。其他是我应该看的吗？当然，标准是文档、示例和易用性。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-07-13T20:21:26.853

**最后更新：2020/03/24**（我会不时更新这个答案...）

# 神经网络的简单实现

*   [FANN](http://leenissen.dk/fann/wp/)是 C/C++ 中非常流行的实现，并且具有许多其他语言的绑定。
*   在 scikit-learn (Python) 0.18（当前开发版本）中将实现前馈神经网络（[API 文档](http://scikit-learn.org/dev/modules/classes.html#module-sklearn.neural_network)）。
*   我必须提到我自己的项目，称为[OpenANN](https://github.com/OpenANN/OpenANN)（[文档](http://openann.github.io/OpenANN-apidoc/)）。它是用 C++ 编写的，并具有 Python 绑定。

# 深度学习

因为神经网络目前在研究和工业中非常流行（“深度学习”），所以有许多研究库可用。它们中的大多数都易于设置、集成和使用。虽然不像上面提到的库那么容易。它们提供领先的功能和高性能（使用 GPU 等）。这些库中的大多数还具有自动微分功能。您可以轻松指定新架构、损失函数等，而不必手动指定反向传播。

*   [来自 Google 的TensorFlow](https://github.com/tensorflow/tensorflow)（C++/Python）
*   [来自 Facebook 的PyTorch](http://pytorch.org/)，在 Python 中，可以用 C/C++ 扩展
*   [mxnet](https://github.com/dmlc/mxnet)（C++、Python、R、Scala、Julia、Matlab、Javascript）
*   [深度学习 4j](http://deeplearning4j.org/) (Java)
*   [来自 Microsoft 的CNTK](https://github.com/Microsoft/CNTK)（Python 培训/C++/C#/Java/Python 评估）
*   [链纳](https://github.com/pfnet/chainer)(Python)
*   [来自百度的PaddlePaddle](https://github.com/baidu/Paddle)在 CUDA/C++ 中与 Python 绑定
*   [来自 Sony 的Cuda](https://github.com/sony/nnabla) /C++11 中的 NNabla，带有 Python 绑定

可以在[此处](https://github.com/soumith/convnet-benchmarks)找到 GPU 加速库的性能比较（不幸的是有点过时了）。可以在[此处](https://github.com/jcjohnson/cnn-benchmarks)找到 GPU 和库版本的比较。

非活动：

*   [Keras](https://github.com/fchollet/keras)：它可以使用[Tensorflow](https://github.com/tensorflow/tensorflow)、[Theano](http://deeplearning.net/software/theano/)和[CNTK](https://github.com/Microsoft/CNTK)作为后端。（现在是 tensorflow 的一部分，作为其高级接口。）
*   来自伯克利视觉和学习中心的 C++ 与 Python 绑定的[Caffe](http://caffe.berkeleyvision.org/)
*   [Darknet](https://github.com/pjreddie/darknet)：C 中的 CNN，以 YOLO 对象检测器的实现而闻名。
*   来自 Intel Nervana 的[Neon提供了非常高效的实现 (Python)](https://github.com/NervanaSystems/neon)
*   [MatConvNet](http://www.vlfeat.org/matconvnet/) (Matlab)
*   [Theano](http://deeplearning.net/software/theano/) (Python) 及其高级 API：
    *   [pylearn 2](http://deeplearning.net/software/pylearn2/)
    *   [网络](https://github.com/lmjohns3/theano-nets)
    *   [scikit-神经网络](https://github.com/aigamedev/scikit-neuralnetwork)
    *   [千层面](https://github.com/Lasagne/Lasagne)
    *   基于 Theano (Python) 的[块](http://blocks.readthedocs.org/en/latest/)
*   带有 Python 绑定的 CUDA/C++ 中的[cuda-convnet2](https://github.com/akrizhevsky/cuda-convnet2)
*   [赫贝尔](https://github.com/hannes-brt/hebel)(Python)
*   来自 Facebook 的 C++ 中带有 Python 绑定的[Caffe2 ；](https://caffe2.ai/)已加入 PyTorch
*   [Torch 7 的神经网络](https://github.com/torch/nn)（Lua，Torch 7 是一个“类 Matlab 环境”，[Torch 中机器学习算法的概述](https://github.com/torch/torch7/wiki/Cheatsheet#machine-learning)）
*   [PyBrain](http://pybrain.org/) (Python) 包含不同类型的神经网络和训练方法。
*   [编码](http://www.heatonresearch.com/encog)（Java 和 C#）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-17T13:49:00.407

如果您希望灵活地定义网络配置，例如共享参数或创建不同类型的卷积架构，那么您应该查看 Torch 库系列：[http](http://www.torch.ch/) ://www.torch.ch/ 。

我还没有浏览 Torch 7 的文档，但是其他版本的文档相当不错，而且代码非常易读（在 Lua 和 C++ 中）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-31T10:55:16.200

您可以使用accord.net 框架。[http://accord-framework.net/](http://accord-framework.net/)

它包含神经学习算法，例如 Levenberg-Marquardt、Parallel Resilient Backpropagation、Nguyen-Widrow 初始化算法、Deep Belief Networks 和 Restrictured Boltzmann Machines，以及许多其他与神经网络相关的项目。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-13T20:37:27.503

[Netlab](http://www1.aston.ac.uk/eas/research/groups/ncrg/resources/netlab/)是一个常用的 Matlab 库。（免费和开源）

> Netlab 工具箱旨在为在教学、研究和应用程序开发中使用的理论完善的神经网络算法和相关模型的仿真提供必要的中心工具。它在复杂系统数学研究中被广泛用于理学硕士。
> 
> Netlab 库包括各种数据分析技术的软件实现，其中许多技术尚未在标准神经网络仿真包中提供。Netlab 与Matlab 5.0 及更高版本一起工作，但只需要核心Matlab（即不需要其他工具箱）。它与早期版本的 Matlab 不兼容。

# android - [Android 资产]：文件还是文件夹？

> ID：11477148
> 
> 赞同：0
> 
> 时间：2012-07-13T19:32:31.210
> 
> 标签：android, file, uri, directory, assets

我的资产结构分为文件夹和文件。当我打开文件时，我需要知道是文件还是文件夹。如果是文件或文件夹，我需要知道我正在访问的资产路径。

我正在尝试通过我正在实施的方法访问该文件。

```
public int getFileType (String filepath)
{
    String PACKAGE_APP_NAME = /com/fake/android/app;
    File f = null; 

    try{
        //f = new File(new URI("file:///android_asset/" + JNI_CLASSES + "/" + filepath));   
        f = new File(new URI("file:///android_asset/" + filepath)); 
    }
    catch (URISyntaxException e) {}

    if (f == null)
    {
        Log.e("ResListMaker","File Object Is Null");
        return -1;
    }
    else if (!f.exists())
    {
        Log.e("ResListMaker","File Doesn't Exist");
        return -1;
    }
    else if (f.isFile())
    {
        Log.e("ResListMaker","Regular File");
        return 0;
    }
        else if (f.isDirectory())
    {
        Log.e("ResListMaker","Directory");
        return 1;
    }
    else
    {
        Log.e("ResListMaker","Unknown type");
        return -1;
    }
} 
```

**但总是返回文件不存在。URI 路径是否正确？有没有其他方法可以知道资产是文件还是文件夹？**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:19:43.837

这是访问资产文件夹的错误方法。

`InputStream is = getAssets().open("subfolder/somefile.txt");`

[带有子文件夹的 Android 资产](https://stackoverflow.com/questions/3033902/android-assets-with-sub-folders)

# android - Android：admob 广告在错误的位置

> ID：11477149
> 
> 赞同：0
> 
> 时间：2012-07-13T19:32:33.177
> 
> 标签：android, admob

我正在尝试将我的广告横幅放置在屏幕底部。但是，广告的一部分显示在顶部，而另一部分显示在底部。请看下面的图片

[错误的广告 http://img513.imageshack.us/img513/4390/shot000025.png](http://img513.imageshack.us/img513/4390/shot000025.png)

如果有帮助，下面是代码，

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/maingradient"
    android:focusableInTouchMode="true"
    android:orientation="vertical" >

    <RelativeLayout
    android:id="@+id/relativelayout2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/relativeLayout1" >

    <ListView
        android:id="@android:id/list"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:cacheColorHint="@android:color/transparent"
        android:divider="#00ff00"
        android:fastScrollEnabled="true"
        android:focusable="false"
        android:listSelector="#000000"
        android:paddingTop="5dp"
        android:saveEnabled="true" >

    </ListView>
    </RelativeLayout>

    <com.google.ads.AdView
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:id="@+id/adView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    ads:adSize="SMART_BANNER"
    android:layout_alignParentBottom="true"
    ads:adUnitId="a14fd64cddd4168"
    ads:loadAdOnCreate="true" />

</RelativeLayout> 
```

有人可以帮忙吗？

谢谢！拉胡尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:08:00.603

不确定您的确切问题是什么，但我发现您的布局存在一些问题。首先，您有一个 RelativeLayout 嵌套在另一个 RelativeLayout 中，但试图将它放在不包含在父级中的第三个相对布局之下？此外，文件中的根 RelativeLayout 具有`android:orientation`用于 LinearLayouts 的属性。这有点令人困惑。

至于解决方案，请尝试将根 RelativeLayout 设为 LinearLayout 并保持垂直方向。您可以给嵌套的 RelativeLayout 一个`android:layout_height`of`0dip`和`android:layout_weight`of `1`（并摆脱该`layout_below`属性，我不确定它为什么存在）。这会将您的 ListView 置于广告之上，并使其填满广告未占用的所有空间。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:36:38.210

试试下面的代码

```
 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:background="@android:color/black" >

<com.google.ads.AdView
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
android:id="@+id/adView"
android:layout_width="fill_parent"
android:layout_height="50dp"
ads:adSize="SMART_BANNER"
android:layout_alignParentBottom="true"
ads:adUnitId="a14fd64cddd4168"
ads:loadAdOnCreate="true" />

  <ListView
    android:id="@+id/show_locations_list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@android:color/black"
    android:layout_above="@+id/adView"
    android:scrollbars="none"
    android:scrollingCache="false" >
</ListView> 
```

希望能帮助到你

# actionscript-3 - 可编辑列的值没有在 AdvancedDataGrid 中“持久化”

> ID：11477156
> 
> 赞同：0
> 
> 时间：2012-07-13T19:32:57.853
> 
> 标签：actionscript-3, apache-flex, actionscript

我有一个 AdvancedDataGrid（其 dataProvider 是从我的主 mxml 文件绑定的变量，不确定这是否与我的问题有关）。我将 AdvancedDataGridColumn 的可编辑属性之一设置为 true，当我单击 UI 中的单元格时，它实际上是可编辑的。但是当我按下回车/移动到另一个单元格时，旧值会返回，新输入的值会丢失。有人知道为什么会这样吗？我是否必须手动更改 dataProvider 中提供的变量？...我认为这会自动发生，对吗？我会很感激任何帮助！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T03:49:38.037

当我编辑一个字段并按回车键然后单击按钮查看跟踪输出时，这会正确跟踪：

```
 <?xml version="1.0" encoding="utf-8"?>
      <s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600" applicationComplete="init()">
        <fx:Declarations>
          <!-- Place non-visual elements (e.g., services, value objects) here -->
        </fx:Declarations>
        <fx:Script>
          <![CDATA[
            import mx.collections.HierarchicalData;
            [Bindable]
            private var companyHierarchy:HierarchicalData;

            private var companyData:XML = <data>
                        <company name="Employees">
                          <department name="Unit 1">
                            <employee name="Dave" func="C# Developer"/>
                            <employee name="Bob" func="AS3 Developer"/>
                            <employee name="Clair" func="AS3 Architect"/>
                          </department>
                          <department name="Unit 2">
                            <employee name="John" func="ORACLE Developer"/>
                            <employee name="Sandra" func="HTML Developer"/>
                          </department>
                        </company>
                      </data>;

            private function init():void
            {
              companyHierarchy = new HierarchicalData(companyData.company);
            }

            private function checkSetData():void
            {
              trace(companyData);
            }
          ]]>
        </fx:Script>
        <mx:AdvancedDataGrid id="test" width="500" height="500" dataProvider="{companyHierarchy}"
                   displayItemsExpanded="true" editable="true" enabled="true">
          <mx:columns>
            <mx:AdvancedDataGridColumn dataField="@name"
                           headerText="Companies"/>
            <mx:AdvancedDataGridColumn dataField="@func"
                           headerText="Function"/>
          </mx:columns>
        </mx:AdvancedDataGrid>
        <s:Button x="205" y="508" label="Button" click="checkSetData()"/>
      </s:Application> 
```

# testdriven.net - 使用 xUnit 和 TestDriven.net 在项目中运行所有测试

> ID：11477157
> 
> 赞同：0
> 
> 时间：2012-07-13T19:32:59.633
> 
> 标签：testdriven.net, xunit

我知道前段时间发布了非常相似的问题，它甚至被标记为已回答，但是那里的解决方案似乎对我不起作用。

我已经安装`xUnit`到`NuGet`我的测试项目中，编写了一些测试，然后决定我想以某种方式运行它们。我已经把头转向`TestDriven.Net`看起来不错的，所以我安装了它。
之后，我安装`xUnit`了对`TD.NET`使用 xUnit 安装程序的支持。一切顺利，安装程序将`TD.NET`支持标记为成功安装。然而，当我尝试运行所有测试时，它失败了（或者更确切地说，在我的测试项目中没有找到任何测试，它显示运行了 0 个成功、0 个失败和 0 个跳过的测试）。

在我看来，`TestDriven.Net`处理`xUnit`得很好（ *“1 通过，0 失败，0 跳过，花了 1.75 秒（xUnit.net 1.9.1 build 1600）。”*，我想这意味着它可以识别`xUnit`测试）。

我阅读了有关注册表修改的信息，但那里的一切似乎都很好。此外，`TestDriven.net`作者说这`xunit.dll.tdnet`应该足以让 runner 识别单元测试。此文件存在于由创建的包文件夹`NuGet`中，但未复制到`bin`文件夹中。它应该留在`NuGet`放置的地方还是应该放置在其他地方？

我很想启动并运行它，因此我们将不胜感激。
干杯，帕科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T18:55:34.157

就像我在上面对我的问题的评论中指出的那样 - 该问题与`TestDriven.Net`and没有直接关系`xUnit`。从扩展到 VS2010似乎`TestDriven.Net`不能正常工作。`Solution Navigator``Productivity Power Tools`

简单地运行我的测试形成良好的`Solution Explorer`效果就像一种魅力。

# c# - 在按键时激活一个不集中的 C# 程序（例如，F1 将标签设置为“Hello World”）

> ID：11477159
> 
> 赞同：3
> 
> 时间：2012-07-13T19:33:02.283
> 
> 标签：c#, key, listener

如果在任何地方按下一个键，我试图让我的程序激活它的任务，即使它不在焦点上。（让我们在这个例子中只使用 F1，并将标签上的文本设置为“Hello World”）。

我查看了关键侦听器、钩子等，并且在试图了解正在发生的事情时感到头疼。有什么简单的方法可以完成这项工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T20:06:23.770

您可以使用 WIN API [RegisterHotKey](http://msdn.microsoft.com/en-us/library/ms646309.aspx)函数。

```
[DllImport("user32")]
public static extern int RegisterHotKey(IntPtr hwnd, int id, int fsModifiers, int vk); 
```

在 Form_Load 事件上注册热键：

```
private void Form_Load(object sender, EventArgs e)
{
    RegisterHotKey(Handle, 42, 0, (int)Keys.F1);
} 
```

请记住，如果您想挂钩某些键组合，而不是零，您应该传递以下值之一（对于 Alt、Ctrl、Shift 或 Windows 键）：

```
private const int MOD_ALT = 0x1;
private const int MOD_CONTROL = 0x2;
private const int MOD_SHIFT = 0x4;
private const int MOD_WIN = 0x8; 
```

此时，当您按下某处 F1 键时，系统将向您的窗口发送[WM_HOTKEY 消息](http://msdn.microsoft.com/en-us/library/ms646279.aspx)。在 WndProc 中处理它：

```
private const int WM_HOTKEY = 0x312;

protected override void WndProc(ref Message m)
{
    base.WndProc(ref m);

    if (m.Msg == WM_HOTKEY)
    {
        if (!Visible)
            Visible = true;
        Activate();
        Keys vk = (Keys)(((int)m.LParam >> 16) & 0xFFFF);
        int fsModifiers = ((int)m.LParam & 0xFFFF);

        if (vk == Keys.F1 && sModifiers == 0)
            label.Text = "Hello World";
    }
} 
```

顺便说一句，关闭表单时不要忘记[取消注册热键。](http://msdn.microsoft.com/en-us/library/ms646327.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T19:47:04.413

看[这里](http://www.liensberger.it/web/blog/?p=207)的这篇文章，你需要的是全局热键。我提供的链接将其封装成一个非常有用的形式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T19:48:10.740

您是否查看过[Win32 RegisterHotKey 功能](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646309%28v=vs.85%29.aspx)？如果您想在另一个应用程序处于前台时获得键盘输入，这可能是您最好的选择。您需要 pinvoke 或找到托管包装器。

# ios5 - 自动释放和保留的使用

> ID：11477161
> 
> 赞同：0
> 
> 时间：2012-07-13T19:33:08.353
> 
> 标签：ios5, memory-management, retain, autorelease, nsautoreleasepool

我有一个简单的问题。当保留计数很高时自动释放是否有效？

例如...如果我在视图控制器中并执行以下操作：

```
[self retain];
[self retain];
[self retain];
[self retain];
[self autorelease]; 
```

如果我弹出视图，它会被释放吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:28:47.833

自动释放只是将对象添加到自动释放池中。当自动释放池被释放时，释放消息会发送到对象以及该池中的所有其他对象。如果您的保留计数仍然大于零并且您没有进一步释放，那么您将有内存泄漏。

我相信，如果您按照上面所说的那样做，您的保留计数将为 5（分配中的一个，上面的四个保留中的 4）。您将对象添加到自动释放队列中，以便稍后它将接收释放并将保留计数减少一。最后弹出视图应该再减少一个。这将使保留计数为 3。所以我认为您会有内存泄漏。

但是，如果您使用的是 iOS 5，最新的编译器使用 ARC（自动引用计数），您无需担心这个问题。大多数情况下都很好。

已编辑：从自动释放池中向对象发送释放时已更正。请参阅： [高级内存管理](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html) 抱歉信息有误。

# android - 带有不确定进度条的 android 性能问题

> ID：11477165
> 
> 赞同：0
> 
> 时间：2012-07-13T19:33:25.487
> 
> 标签：android, progressdialog

我有不确定的进度条，当我从互联网上读取数据时会显示。为了显示/消失进度条，我使用它的可见性。当我打开进度条选项时，我的应用程序从网络读取数据 15 分钟，当我删除进度条代码时，它会持续 20 秒。有可能它让我的应用程序这么慢吗？

main_activity.xml：

```
<TableRow 
    android:gravity="center_horizontal"
    android:layout_marginTop="10dip"
    android:visibility="gone"
    android:id="@+id/progress_bar"
    >

    <ProgressBar
     android:layout_width="wrap_content" 
     android:layout_height="wrap_content"
     android:maxWidth="30dip"
     android:minWidth="30dip"
     android:maxHeight="30dip"
     android:minHeight="30dip"
     android:indeterminate="true"
     android:layout_gravity="center_horizontal"
     />
    <TextView
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:text="@string/searchingInProgress" 
        android:layout_gravity="center|center_horizontal"
        />

</TableRow> 
```

第一个 java 代码片段（这通过执行类 FindSongTask 触发与网络的连接，它继承自 ASyncTask）：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button searchButton = (Button) findViewById(R.id.searchButton);

    searchButton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            EditText searchQueryField = (EditText) findViewById(R.id.searchQueryField);
            String searchQuery = searchQueryField.getText().toString();

            if (searchQuery.length() > 0 && (currentQuery == null || !currentQuery.equals(searchQuery))) {
                new FindSongTask().execute(searchQuery);
                currentQuery = searchQuery;

                findViewById(R.id.progress_bar).setVisibility(View.VISIBLE);
                v.setEnabled(false);

            }

            InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(searchQueryField.getWindowToken(), 0);

        }
    });

} 
```

第二个片段（在连接到网络后执行）：

```
instance.findViewById(R.id.searchButton).setEnabled(true);
findViewById(R.id.progress_bar).setVisibility(View.GONE);
super.onPostExecute(result); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T22:21:52.680

尝试这样的事情......

```
public class MyActivity extends Activity{

    ProgressDialog pd;

    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
        setContentView(R.layout.main);
    } 

    @Override
    public void onPause()
    {
            //don't leak a window
        super.onPause();
        if(pd != null)
            pd.dismiss();
    }

    //no networking allowed on main thread
    private class NetworkingTask extends AsyncTask<String,String,String>{
        int result;

        @Override
        protected void onPreExecute(){
            pd = ProgressDialog.show(Login.this,"","Display message...", true,false);
        }

        @Override
        protected String doInBackground(String...strings){
            //perform networking here
            return null;
        }

        @Override
        protected void onPostExecute(String unused){
            //check result
            pd.dismiss();
            Intent intent = new Intent(MyActivity.this,NextActivity.class);
            startActivity(intent);
        }
     }
} 
```

# java - 在 WebDriver 中选择表中的一行并获取“元素不再附加到 DOM”StaleElementReferenceException 消息

> ID：11477167
> 
> 赞同：0
> 
> 时间：2012-07-13T19:33:26.543
> 
> 标签：java, xpath, selenium-webdriver, webdriver

我正在使用 Selenium 2/WebDriver 进行自动化。我有一张桌子，正在尝试在其中选择一行。当测试运行时，我可以看到该行变得突出显示，就好像它被单击了一样，但是我立即得到：

> “org.openqa.selenium.StaleElementReferenceException：元素不再附加到 DOM”

错误并且测试失败。

代码如下：

```
@Test
public void rowSelection() throws Exception
{
    SeleniumHelper helper = new SeleniumHelper();
    action = new SeleniumActionHelper(driver);

    helper.login();

    String testUrl = navigateToUrl("option/listOptions.xhtml");
    driver.get(testUrl);

    WebElement table = findElementById("tableSection:dataTableWrapped_data");
    List<WebElement> allRows = table.findElements(By.tagName("tr"));
    for (WebElement row : allRows)
        {
            List<WebElement> cells = row.findElements(By.tagName("td"));
            for (WebElement cell : cells)
            {
                WebElement listName = cell.findElement(By.xpath("./*[text()='body_build']"));
                listName.click();
            }
        }
} 
```

我在 listName.click() 操作之前和之后放置了一个 Thread.sleep(2000) ，但都没有帮助。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-30T14:31:14.957

如果您认为这是一个同步问题，您可以使用`wait.until`：

```
WebElement webElement = wait.until(ExpectedConditions.visibilityOf(listName)); 
```

webElement.click();

如果在您执行单击操作时定位器发生更改，请设置一个断点并检查您的应用程序。如果是这样，您必须考虑更好的定位器。

# json - 使用 ODataLib 调用 WCF 数据服务服务操作和 JSON

> ID：11477172
> 
> 赞同：0
> 
> 时间：2012-07-13T19:33:46.517
> 
> 标签：json, wcf, wcf-data-services, odata

我进行了广泛的搜索，但完全找不到任何关于如何使用 ODataLib 调用服务操作的好的示例或教程。我见过几个告诉我如何获取实体和实体集的东西，这很好，但是为了调用服务操作。

我几乎可以肯定我需要使用`ODataEntry`,`ODataFeed`或`ODataNavigationLink`对象以外的东西。我在 JustDecompile 中打开了库，看到了类似的类`ODataAction`，`ODataFunction`但不知道如何使用它们。

我的需求非常简单：我需要调用 WCF Data Services 5.0 服务操作，并且需要使用 JSON 来完成。

我也知道即将发布的 WCF 数据服务客户端库将支持 JSON，但不幸的是，我必须像昨天一样对此进行编码。此外，出于绝望，我什至尝试使用[Mark Stafford 的 JSON 灯光示例来实现 RC 版本 (](https://gist.github.com/3092592) *gasp* )，但并没有真正理解它是如何工作的。

任何帮助或方向将不胜感激！（特别是如果这出现在你的屏幕上，马克！）

谢谢！Ĵ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T17:59:23.150

ODataLib 不知道（也不应该知道）它正在读取服务操作的响应。唯一重要的是您要读取哪种有效负载类型。

这取决于服务操作返回什么。如果它返回单个条目，则使用 ODataLib 就像读取单个条目有效负载（例如 ~/Products(0)），因为有线格式将是相同的。如果服务操作返回实体集合，则将其作为提要读取。

如果服务操作返回单个原始值或复杂值，则可以使用 ODataMessageReader.ReadProperty。我知道该方法的名称有点误导，但这又是因为属性有效负载（如 ~/Products(0)/Name）和返回原始或复杂类型的服务操作使用完全相同的有效负载格式。在这种情况下，您应该忽略返回的属性的名称（它可能是服务操作的名称）。

如果服务操作返回原始值或复杂值的集合，则可以使用 ODataMessageReader.CreateODataCollectionReader。这将返回 ODataCollectionReader 阅读器，您以与 ODataReader 非常相似的方式使用它。它报告的有趣的事情是相关集合的项目（在这种情况下，API 很容易理解）。

无论您需要阅读ATOM还是JSON，这都取决于您，API是相同的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T15:22:24.507

作为客户端，在 ODataLib 和 WCF 数据服务（取决于 ODataLib）之间进行选择通常归结为对控制的需要。如果您的用例很简单并且您需要最常用的功能，那么 WCF DS 可能是一个不错的选择。如果您需要高级功能或精确控制有效负载的读取方式，ODataLib 可能是更好的选择。话虽如此，Vitek 已经在概念上涵盖了如何使用 ODataLib 读取服务操作。

WCF DS 将在 5.1 版中使阅读 JSON Light 变得更加容易。我将在本周的某个时候发布关于此的博客，但您引用的示例是您需要为此 RC 做的。在我放在一起的示例中只有一个新调用 - 调用`context.Format.UseJson(Func<Uri,ModelResolverResult>)`. 让我们先谈谈为什么这个调用是必要的。OData（至少在 Microsoft 世界中）非常适合强类型。`$metadata`是 OData 描述它正在使用的数据模型的一个很好的例子。对于[Atom 有效负载](http://services.odata.org/Experimental/OData/OData.svc/Products%280%29/Rating)甚至 JSON Verbose 有效负载，大部分类型信息都包含在有效负载中。使用 JSON Light 的目标是尽可能多地从“传输”有效负载中去除元数据。

如果元数据在带内不可用，则必须使其在带外可用。这是对 的调用签名背后的基本要求`UseJson`。本质上，每当 WCF DS 需要元数据时，它都会查找给定 URI 的模型。如果它找不到那个模型，它最终会将元数据拨到满。我们想抢占它，因为它会使有效负载膨胀。我们可以通过提前告诉 WCF DS 如何解析模型来抢占它。这就是大多数样本正在做的事情。

从逻辑上遍历示例（是的，我知道可以进行许多其他优化 - 示例主要针对可读性进行了优化）：

*   如果模型过去没有被解析
    *   `XmlReader`为调用构造一个新的`EdmxReader.TryParse`
    *   为 out 参数命名一些值`EdmxReader.TryParse`
    *   调用`EdmxReader.TryParse`
        *   如果调用成功，将解析后的模型缓存在本地字典中（解析现在是一项昂贵的操作）
        *   如果调用失败，将错误放在一起并抛出
*   从缓存的模型中获取正确的模型并将其返回到`ModelResolverResult`包装器中

希望这是有道理的。如果没有，我很想听听为什么，这样我才能使博客文章更清晰。请记住，当我们将这些位发布到生产环境时，这将变得更加简单。

# java - 通过 Java 传输到 Node.js 来加密和解密数据

> ID：11477175
> 
> 赞同：0
> 
> 时间：2012-07-13T19:34:25.793
> 
> 标签：java, node.js, encryption, cryptography

我正在尝试将数据从 Java (Android) 发送到 Node.js 应用程序，但加密不起作用并且 Node.js 没有正确解密，而且我真的不知道我在做什么。

爪哇：

```
 // Encrypt
                    byte[] input = jo.toString().getBytes("UTF-8");

                    MessageDigest md = MessageDigest.getInstance("MD5");
                    byte[] thedigest = md.digest(ENCRYPTION_KEY.getBytes("UTF-8"));
                    SecretKeySpec skc = new SecretKeySpec(thedigest, "AES/ECB/PKCS5Padding");
                    Cipher cipher = Cipher.getInstance("AES/ECB/PKCS5Padding");
                    cipher.init(Cipher.ENCRYPT_MODE, skc);

                    byte[] cipherText = new byte[cipher.getOutputSize(input.length)];
                    int ctLength = cipher.update(input, 0, input.length, cipherText, 0);
                    ctLength += cipher.doFinal(cipherText, ctLength);
                    String query = Base64.encodeToString(cipherText, Base64.DEFAULT); 
```

`query`然后发送到我们的服务器并且`jo`是`JSONObject`

在 Node 中，我正在做：

```
 var decipher = crypto.createDecipher('aes-128-ecb', encryption_key);
        console.log("System: " + new Buffer(fullBuffer, "base64").toString("binary") );

        chunks = []
        chunks.push( decipher.update( new Buffer(fullBuffer, "base64").toString("binary") , 'hex', 'utf-8') );
        chunks.push( decipher.final('utf-8') );
        var txt = chunks.join("");

        console.log("System: " + txt);
        js = JSON.parse(txt);
        console.log("System: " + js); 
```

并且`fullBuffer`接收到的 POST 数据是否正确传输

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T20:42:05.793

加密和身份验证很难调试，因为您犯的任何错误都会导致整个输出随机化。建议：

1.  切换到像 Base64 或 gzip 这样的非加密转换，这样您就可以看到输出的样子。
2.  试着找出哪一半坏了。捕获您的服务器输出并使用 openssl 或 python 对其进行解码。使用其中一个生成一些好的输入并将其填充到您的客户端中。
3.  CBC 比 ECB 安全得多。
4.  如果这些都没有帮助，请进入低级密码和解密，并确保密钥和密文在内容和长度上完全匹配，并长时间地盯着算法选择。

# java - int i=99 正在工作，但是 int i = 099 不工作

> ID：11477177
> 
> 赞同：4
> 
> 时间：2012-07-13T19:34:35.597
> 
> 标签：java, int, runtime-error, runtimeexception

在 Java 中，我注意到当我写

```
int i = 99; 
```

它工作正常。然而当我说

```
int i = 099; 
```

我得到一个例外：

```
java.lang.RuntimeException: Uncompilable source code - Erroneous tree type: <any> 
```

在我的 IDE 中，我看到一个红点表示 `integer number too large: 099`.

为什么这没有被编译？099不就​​等于99吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-13T19:36:23.373

任何前导`0`s 都会使 Java 将该数字解释为八进制数。所以，`010`其实是`8`。

```
System.out.println(010); 
```

**输出：**

```
8 
```

* * *

如您所知，`8`不允许`9`使用八进制数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-13T19:35:42.090

那是一个八进制数。八进制数字带有前缀，`0`以将它们与十进制和十六进制等其他值区分开来。

# javascript - Javascript无限滚动节流/去抖动

> ID：11477179
> 
> 赞同：0
> 
> 时间：2012-07-13T19:34:38.453
> 
> 标签：javascript, jquery, throttling

我在我的几个页面上设置了这个无限滚动功能。它工作得非常好，但是加载更多项目的 Ajax 调用会进行多次数据库调用，并且每次都必须加载大量图像，并且通常需要几秒钟才能加载。根据我的连接情况，我将其计时在 3 到 7 秒之间。因此，当浏览器决定多次触发滚动事件时，它可能会变成真正的火车残骸。我怎样才能对它进行节流或去抖动，以使浏览器不会在几秒钟内多次运行 Ajax 调用并使一切停止？

```
$(document).ready() 
{
    //Infinite scroll
   $(window).on('scroll', _.debounce( function(){
      var height = $(window).height();
      var scrollTop = $(window).scrollTop();
      var dHeight = getDocHeight();

      if( height + scrollTop >= dHeight - 100) 
      {
        //Display items that were previously hidden 
         showAllItems();
         if(!vloaded < START_NUM && !done){
             //Load next set of items
             $.ajax
             ({
              type: "POST",
              url: "/organizer/getMore",
              data: { filter: vfilter, loaded: vloaded },
              dataType: "html",
              success: function( responseText, textStatus, XHR )
              {
                if(responseText.indexOf("// GRID ENTRY //") < 0){   //Out of items to load
                    done = true;
                }
                else{
                    //Display items that were previously hidden 
                    showAllItems();
                    // select the element with the ID grid and insert the HTML
                    $( "#grid" ).append( responseText );
                    //alert("Loaded "+vloaded+" items");
                }
              }
            });
          // global variable
          vloaded +=LOAD_NUM;
      } // if
      }
    }
  }, 500, true)); // on
} // ready 
```

编辑：

我下载了下划线并添加了去抖动功能，但现在 Ajax 调用似乎根本没有运行。即使我没有将 immediate 设置为 true，它应该在我停止滚动后很快执行，但它根本不执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:38:12.613

Underscore 库有这方面的方法：

*   [`_.throttle()`](https://lodash.com/docs#throttle)
*   [`_.debounce()`](https://lodash.com/docs#debounce)

你可能想要`_.debounce`. 如果您不想将下划线添加为附加依赖项，您可以从源代码中为您想要的方法创建一个独立的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T09:02:20.307

对我有用的是以下代码：

```
setupPaginationOnScroll: function() {
    var self = this;
    var loadNextPageIfNotLoadingThrottled = _.throttle(function() {
        if ( !self.isLastPageLoading() ) {
            self.loadNextPage()
        }
    },1000);
    this.onScrollbarNearBottom(loadNextPageIfNotLoadingThrottled);
}, 
```

你会注意到我使用了油门而不是去抖动，当有一个挂起的请求时，我只是忽略了滚动事件

这部分也可能让您感兴趣：

```
onScrollbarNearBottom: function(callback) {
    var target = this.getDOMNode();
    $(target).scroll(function(e) {
        if ( ScrollUtils.isScrollbarNearBottom(target) ) {
            callback(e);
        }
    });
}

module.exports = {

    debug: false,

    /**
     * We consider someone is near the bottom if he has scrolled more than 90%
     */
    scrollNearThreshold: 90,

    /**
     * Useful function to detect for exemple when to load more content (ie another page)
     * if the user has almost scrolled to the bottom
     *
     * @return {boolean}
     */
    isWindowScrollbarNearBottom: function() {
        return this.isScrollbarNearBottom(window);
    },

    isScrollbarNearBottom: function(scrollableElementSelector) {
        return this.getScrollPercentage(scrollableElementSelector) > this.scrollNearThreshold;
    },

    /**
     * Returns the percentage of scroll in a given container.
     * If the scrollbar is at the beginning it should return 0.
     * If the scrollbar is at the end it should return 100 (almost :s)
     *
     * See http://stackoverflow.com/questions/22867584/get-scroll-percentage-in-a-dom-container
     * For an unknown reason it sometimes returns a value > 100 (like 103 if you are at the bottom)
     * It is not very precise but at least it should work rather well for most usecases.
     *
     * @return {number}
     */
    getScrollPercentage: function(scrollableElementSelector) {

        var scrollableElement = $(scrollableElementSelector);

        // This is the number of hidden pixels of the scrollable element inside its container
        var hiddenHeigth;
        if ( scrollableElementSelector === window ) {
            hiddenHeigth = $(document).height() - $(window).height();
        } else {
            hiddenHeigth = scrollableElement[0].scrollHeight - scrollableElement.outerHeight();
        }

        // This is the number of scrolled pixels
        var scrolledHeight = scrollableElement.scrollTop();

        //if ( hiddenHeigth < scrolledHeight ) {
        //throw new Error("hiddenHeigth "+hiddenHeigth+" < scrolledHeight " +scrolledHeight + " -> Impossible unless you didn't use this function correctly");
        //}

        var scrollPercent = ( scrolledHeight / hiddenHeigth ) * 100;

        if ( this.debug ) {
            console.debug("hiddenHeigth=",hiddenHeigth,"scrolledHeight=",scrolledHeight,"scrollPercent=",scrollPercent);
        }

        return scrollPercent;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T19:39:50.673

看看下划线。他们有一个很棒的小去抖动包装器，可以接受任何函数并返回去抖动版本。

您应该能够使用该滚动回调函数并将其替换为`_.debounce(function(){ ... your code ... }, 100)`.

如果您对实际实现感到好奇，源代码非常简洁明了。

# c# - 如何在Objective-C中获得-1和1之间的点积

> ID：11477188
> 
> 赞同：0
> 
> 时间：2012-07-13T19:35:11.403
> 
> 标签：c#, .net, objective-c, cgpoint, dot-product

在 C# 中，我有以下代码：

```
Vector2.Dot(ref tmpDirection, ref direction, out result); 
```

这会返回一个介于 -1 和 1 之间的浮点数。我很好奇如何在 Objective-C 中获得同样的功能。我知道你可以像这样计算两个向量的点积：

```
CGPoint point1 = CGPointMake(10, 10);
CGPoint point2 = CGPointMake(20, 20);
float dotProduct = point1.x * point2.x + point1.y + point2.y; 
```

我不明白 C# 函数如何使结果介于 -1 和 1 之间，因为正常的点积数学可以产生任何数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:43:46.050

要从 [-1,1] 标准化，您需要做的就是除以幅度的乘积：

```
float mag1 = sqrt(point1.x*point1.x + point1.y*point1.y);
float mag2 = sqrt(point2.x*point2.x + point2.y*point2.y);
dotProduct = (dotProduct)/(mag1*mag2); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T19:47:28.143

这仅适用于单位向量，来自[文档](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.vector2.dot.aspx)：

> **Vector2.Dot 方法：**
> 
> 计算两个向量的点积。**如果这两个向量是单位向量，则点积会返回一个介于 -1 和 1 之间的浮点值，该值可用于确定两个向量之间夹角的某些属性。**例如，它可以显示向量是否正交、平行，或者它们之间是否具有锐角或钝角。

如果你想模仿它，你需要使用点的大小的乘积来标准化点积。这是一组很好[的功能](https://gist.github.com/292330)来实现这样的事情。

# seo - 如何使用 robots.txt 阻止机器人抓取分页？

> ID：11477190
> 
> 赞同：0
> 
> 时间：2012-07-13T19:35:20.233
> 
> 标签：seo, pagination, robots.txt

我的网站上有各种分页，我想阻止谷歌和其他搜索引擎抓取我的分页索引。

抓取页面示例：

```
http://www.mydomain.com/explore/recently-updated/index/12 
```

我怎样才能使用 robots.txt 拒绝机器人抓取包含 /index/ 的任何页面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T10:10:24.877

```
Disallow: /*?page=
Disallow: /*&page= 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T19:52:57.243

我相信如果您使用以下内容在您的根 Web 目录中创建您的 robots.txt 文件：

```
User-agent: *
Disallow: /explore/recently-updated/index/ 
```

试一试，然后使用某人（可能是谷歌的）机器人检查器来确保它被停止。

# ruby-on-rails - 如何在单击按钮时运行 Ruby 代码？

> ID：11477191
> 
> 赞同：0
> 
> 时间：2012-07-13T19:35:21.863
> 
> 标签：ruby-on-rails, ruby, button

我有一个 Rails 部分，以及当我单击部分中的按钮时要运行的 Ruby 脚本。

我该怎么做呢？

这是我要运行的脚本 - 我现在将它放在`<%= %>`标签中。

```
 <%= require 'nokogiri'

doc = Nokogiri::HTML(table_string)

doc.xpath('//table//tr').each do |row|
  row.xpath('td').each do |cell|
    print '"', cell.text.gsub("\n", ' ').gsub('"', '\"').gsub(/(\s){2,}/m, '\1'), "\", "
  end
  print "\n"
end
%> 
```

我想要一个在我单击它时运行该片段的按钮。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T19:44:00.437

*   创建控制器
*   创建一个包含您要运行的代码的操作
*   设置您的路线

前任：

```
resources :my_resources do
    collection do
         get :your_action
     end
 end 
```

你的链接应该是这样的：`link_to "text", your_action_my_resources_path`.

# java - Java - 对象列表。在字段中查找具有特定值的对象

> ID：11477195
> 
> 赞同：1
> 
> 时间：2012-07-13T19:35:29.600
> 
> 标签：java, list, contains

我有两个对象列表。每个列表中的对象是同一类的不同子类。

我想查看列表一中的对象，检查特定字段的值，然后查看列表二中是否有任何对象具有相同的字段值。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:59:49.493

我相信这更正确。这是最简单、最容易实施的解决方案。

```
for(TypeA itemA : listA) {
    for(TypeB itemB : listB) {
        if(itemA.field == ItemB.otherField) {
            //Do Whatever
        }
    }
} 
```

# java - 有没有像 Java 中包含 PHP 的函数？

> ID：11477200
> 
> 赞同：6
> 
> 时间：2012-07-13T19:35:42.267
> 
> 标签：java, php

我想知道是否有任何函数可以在字符串中搜索字符串并在 PHP 中返回布尔值，告诉字符串是否包含，就像 Java 中包含的方法一样？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-13T19:37:07.040

你可以试试`strpos()`，[http ://php.net/strpos](http://php.net/strpos)

```
$str = "This is a sample string.";
$findMe = "sample";

if (strpos($str, $findMe) !== false) {
    // you found me!
} 
```

# php - 从 MySQL 条目中提取某些信息

> ID：11477201
> 
> 赞同：0
> 
> 时间：2012-07-13T19:35:57.313
> 
> 标签：php, mysql

我有一个包含音乐信息的数据库。列的名称之一称为`path`。在路径列中有类似于 的文本`\\Buffalo\music\On Demand\M418+Rend+Misty Edwards+04.0+04.0+M+12_31_2000+12_31_2099+0+03_56_0+.mp3`。PHP中有没有办法只回显艺术家和标题？因此，如果有一个网页，我可以显示标题：TITLE-HERE 艺术家：ARTIST-HERE。标题紧跟在第一个 + 之后，艺术家紧接在第二个 + 之后。所以在这种情况下，标题是 Rend，艺术家是 Misty Edwards。感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T19:38:42.343

这不是特别健壮：

```
// \\Buffalo\music\On Demand\M418+Rend+Misty Edwards+04.0+04.0+M+12_31_2000+12_31_2099+0+03_56_0+.mp3

list( , $title, $artist) = explode ("+", $path); 
```

如果您`+`在字符串的第一部分有 a ，它将失败，但否则应该可以正常工作。

# module - Orchard CMS - 编辑链接不适用于 Bootstrap 主题

> ID：11477207
> 
> 赞同：0
> 
> 时间：2012-07-13T19:36:14.800
> 
> 标签：module, twitter-bootstrap, themes, orchardcms, editing

我启用了 Content Control Wrapper 和 Widget Control Wrapper。编辑链接在默认主题中显示正常，但在启用 Bootstrap 2.0.2 主题时不显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T11:33:16.047

在 Styles 文件夹中找到 site.css。最后一行是这样的：

```
.manage-actions {display:none;} 
```

这就是使链接消失的原因。您可以将其替换为，例如：

```
.manage-actions {position:absolute;} 
```

# .net - 查询基类文档

> ID：11477208
> 
> 赞同：4
> 
> 时间：2012-07-13T19:36:15.347
> 
> 标签：.net, ravendb

我有一个`BaseEntity`和一组派生实体：`DerivedEntity1`、`DerivedEntity2`等。每个派生文档都存储到它的集合中。有没有办法检索从基类型派生的所有文档？像这样的东西：

```
var baseEntities = documentSession.Query<BaseEntity>().ToList(); 
```

我找到了一些方法，但它们需要知道所有派生实体类型。它不适合我，因为在我的情况下，这些类型是动态生成的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T07:53:28.387

文档讨论了这个问题，见这里： [http ://ravendb.net/docs/client-api/querying/polymorphism](http://ravendb.net/docs/client-api/querying/polymorphism)

# web-services - 网站中的加密核心文件

> ID：11477212
> 
> 赞同：-1
> 
> 时间：2012-07-13T19:36:23.730
> 
> 标签：web-services, core

我有一个名为 Core 的文件，大小约为 10 Mb。它与我网站的所有其他主要文件位于同一目录中，例如 Index.php。当我打开它时，它看起来是加密的。谁能告诉我这个文件的目的是什么？

我主要担心的是，如果我与之合作的开发人员决定使用它，是否出于恶意目的创建了此文件。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:57:53.933

很可能这就是所谓的[核心转储](http://en.wikipedia.org/wiki/Core_dump)文件。它没有任何恶意。它用于调试，可以安全删除。

当然，如果没有任何其他信息，我无法确定，但我敢打赌它是一个核心转储文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:58:59.657

当 unix 可执行文件崩溃时会创建核心文件 - 请参阅：[http ://en.wikipedia.org/wiki/Core_dump](http://en.wikipedia.org/wiki/Core_dump)

删除它应该是安全的。

# c++ - C++ 模板，在编译时解析未定义的类型

> ID：11477213
> 
> 赞同：0
> 
> 时间：2012-07-13T19:36:33.280
> 
> 标签：c++, templates

假设我有一个模板类`IO<T>`和另一个模板类`MembershipFunction<T>`。我需要`MembershipFunction<T>*`在我的东西中有一个 s的向量`IO`，还有一个`std::map` from `std::string`to `MembershipFunction<T>*`。对我来说，用如此复杂的代码记住东西是不可能的。特别是在使用迭代器时。所以我尝试添加一些`typedef`s 到`IO`. 但听起来编译器无法看到嵌套模板。下面列出了错误。

我该怎么做才能克服？

```
#include <vector>
#include <map>
#include <string>
#include <utility>
#include "membership_function.h" // for the love of god! 
                                 // MembershipFunction is defined there!
#include "FFIS_global.h"

template <typename T>
class DLL_SHARED_EXPORT IO
{
private:
    typedef std::pair<std::string,  MembershipFunction<T>* > MapEntry; // (1)
    typedef std::map<std::string, MembershipFunction<T>* > Map; // (2)
    typedef std::vector<const MembershipFunction<T>* > Vector; // (3)
    // And so on... 
```

这些是错误：

```
(1) error: 'MembershipFunction' was not declared in this scope
(1) error: template argument 2 is invalid
(1) error: expected unqualified-id before '>' token
(2 and 3): same errors 
```

**编辑：**

这是代码`MembershipFunction`

```
template <typename T>
class DLL_SHARED_EXPORT MembershipFunction
{
public:
    virtual T value(const T& input) const{return T();}
    virtual void setImplicationMethod(const typename  MFIS<T>::Implication& method);
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T20:12:51.740

我复制/粘贴了你的代码，它用 gcc 编译得很好。您的模板使用没有任何问题。编译器错误说它以前没有见过该类型。我不在乎您是否包含该文件，编译器由于某种原因看不到完整的定义。前向声明可能还不够。还不清楚 DLL_SHARED_EXPORT 是什么，我怀疑这可能是罪魁祸首。

在您对我投反对票之前，请编译此代码并亲自查看：

```
#include <vector>
#include <map>
#include <utility>

template <typename T>
class  MembershipFunction
{
public:
    virtual T value(const T& input) const{return T();}
    //virtual void setImplicationMethod(const typename  MFIS<T>::Implication& method);
};

template <typename T>
class IO
{
private:
    typedef std::pair<std::string,  MembershipFunction<T>* > MapEntry; // (1)
    typedef std::map<std::string, MembershipFunction<T>* > Map; // (2)
    typedef std::vector<const MembershipFunction<T>* > Vector; // (3)
}; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-13T19:56:00.767

您必须先定义`MembershipFunction`它才能使用它`IO`，只需确保它位于第一位。如果它们在单独的文件中，则在另一个文件`#include`中。

# visual-studio-2010 - Visual Studio 2010 ODAC 甲骨文 ORA-12154

> ID：11477218
> 
> 赞同：0
> 
> 时间：2012-07-13T19:37:07.400
> 
> 标签：visual-studio-2010, oracle, tnsnames

调整 TNSNAMES.ora 后，我可以使用 Oracle SQL Developer 连接到远程 Oracle 数据库。我还可以使用 SQL Server 中的 export import vizard 连接到远程 Oracle db。在命令提示符下执行 tnsping sourcename 时，我得到了正确的响应。这表明我的 TNSNAMES 是正确的。

但是当我尝试在服务器资源管理器下的 Visual Studio 2010 中添加数据源时，它给了我 ORA-12154！

根据论坛中的一些建议，我将以下行添加到 sqlnet.ora

```
NAMES.DIRECTORY_PATH= (LDAP, TNSNAMES, HOSTNAME) 
```

但我仍然得到同样的错误！

安装了 Oracle 数据访问组件 (ODAC) 11.2.0.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T04:46:56.200

问题是你的 TNS。检查这三个解决方案：

确保“TNSNAMES”列为 Oracle Net 配置文件 (SQLNET.ORA) 中 NAMES.DIRECTORY_PATH 参数的值之一

验证 TNSNAMES.ORA 文件是否存在并且位于正确的目录中并且可以访问。

检查用作连接标识符的网络服务名称是否存在于 TNSNAMES.ORA 文件中。

# design-patterns - 单例或 DRY

> ID：11477220
> 
> 赞同：2
> 
> 时间：2012-07-13T19:37:18.837
> 
> 标签：design-patterns, singleton, dry

假设您有一个与数据库交互的系统。由于系统大量使用数据库，几乎每个子程序都遵循这种模式：

```
foo(database, rest, of, arguments) 
```

这很快就被注意到了，因为 foo 是一个更大对象的一部分，所以连接变量被移动到一个对象变量中。不幸的是，这意味着每个模型对象的构造函数都接受这个参数。

因此，您决定创建一个可以生成与数据库的连接的模块。由于与数据库的连接成本很高，因此连接被缓存，并且该缓存值在以后的调用中返回。

你刚刚创建的是一个单例。这是开发社区中普遍反对的一种模式。再说一次，DRY 是一个受到鼓励的原则，甚至比不鼓励单例模式更是如此。

那么哪个更好呢？您的选择是增加进入每个函数调用（或至少是构造函数）的参数数量，或者创建一个单例。有没有我没有看到的第三种选择？

编辑：反对单身人士的文章是[http://blogs.msdn.com/b/scottdensmore/archive/2004/05/25/140827.aspx](http://blogs.msdn.com/b/scottdensmore/archive/2004/05/25/140827.aspx)。我认为那里提出的论点是有道理的，我希望反单例阵营能够解决这个设计问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:49:29.400

DRY比“不要使用单例”更重要，如果任何人都真正阐明了任何*这样*的原则（而不是说，“不要严重滥用单例”）。如果可以，也可以随意满足，但如果只能满足一个，请满足 DRY。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T19:51:41.830

您还可以考虑查找或注入模式。使用连接详细信息创建一个单例，然后让任何需要连接的类使用“查找”或创建一个系统将其注入到您的类中。如果滥用都可能导致问题，但对于共享资源，这些方法对我来说很有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T22:56:31.443

当用作将全局变量引入系统的一种方式时，单例被认为是不好的。

作为`static`变量实现的单例是不好的，因为它们不容易被模拟出来进行测试。由于是静态的，它们不会被注入，从而隐藏了依赖关系。您现在进行的讨论是由您在整个代码中看到这种依赖关系引起的。这太棒了！您正在聆听代码并通过尝试找到更好的设计来做出反应。如果该数据库访问是通过静态入口点进行的，您就不会注意到依赖性的扩散。

使用类的单个共享实例（通常作为服务）的多个对象的概念是完全有效的设计。以这种方式考虑，所有服务对象最终都成为一种“作用域单例”。IE 在这个子系统中只有一个 X 实例。正确实现这是一个连线决策，而不是类实现决策。IE 你可以使用任何类作为单例，只需制作一个并将相同的实例传递给任何想要一个的人......有问题的类不知道它是一个单例。

我同意你的观点，将“数据库”传递给很多对象是一种气味。我会将所有对“数据库”的调用分解为强类型的存储库对象，每个对象都有一个干净的接口，让调用者可以请求它想要的数据集，而不必担心如何检索这些数据或将其转换为域对象。然后，我会将所需的存储库注入之前使用数据库的类的构造函数中，而不是在每次调用时传递它。如果您正在执行“依赖注入”，您会发现接线代码移到您的对象之外，进入工厂类。然后，这些工厂只会将存储库注入到实际需要查询存储库的类中。

我见过的一种模式是对象获得了他们并不真正需要的依赖项，因为它们又将其传递给他们创建的其他对象。这可以通过将这种“工厂”行为分解到它自己的类中来防止。

无论如何..简短的回答是“继续挖掘..找出为什么这么多类需要数据库访问，应用单一责任原则和依赖注入来限制传播”。

# c++ - 为什么 isnan、isinf 和 isfinite 返回一个 int 而不是 bool？

> ID：11477221
> 
> 赞同：2
> 
> 时间：2012-07-13T19:37:23.043
> 
> 标签：c++, floating-point, c++11, nan, infinite

[isnan](http://en.cppreference.com/w/cpp/numeric/math/isnan)返回一个 int `nonzero value if arg is NaN, ​0​ otherwise`... 为什么它不返回一个布尔值？这不是一些遗留的东西，它是 C++11 的新东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T19:38:58.537

它**是**遗留的东西，可以在 中找到，这是放入命名空间`<cmath>`的 C 标准库。C 没有本机类型。¹`<math.h>``std``bool`

虽然这些确实是 C++11 的新增内容，但它们本质上是在引入`<math.h>`C99 中添加的内容。

* * *

[1.对于那些要抱怨的人来说，C99`bool`实际上是一个宏。有一个`_Bool`，但我猜 C99 作者选择不将它用于`isnan` *等人。*为了保持与`<math.h>`.]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-19T07:28:10.410

为了澄清，isnan、isinf 在 C99 中作为宏添加为 int 表达式。因此，为了 C 兼容性，将它们添加为返回 int 的函数是有意义的。

[http://www.cplusplus.com/reference/cmath/isnan/](http://www.cplusplus.com/reference/cmath/isnan/)

> C99 C++11
> 
> 在 C 中，这被实现为一个返回 int 值的宏。x 的类型应为 float、double 或 long double

# c++ - C++ 类型信息

> ID：11477223
> 
> 赞同：1
> 
> 时间：2012-07-13T19:37:25.200
> 
> 标签：c++, polymorphism, typeinfo

我正在从 java 迁移到 cpp，但在理解某些 cpp 功能的工作原理时遇到了一点问题。当我们使用多态或类型安全转换时，cpp 需要知道对象的确切类型。在 java 中，每个对象都有一个指向其定义类的链接，因此可以检索此信息。但在 cpp 中情况并非如此（我认为），我是说因为 sizeof() 运算符返回的内容不超过对象字段占用的内容，因此我猜这不是存储类型信息的地方。我在这里弄错了吗？如果没有，那么 cpp 如何管理多态性和东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:44:12.773

C++ 多态性仅限于虚函数。实现虚函数所需要的只是一个类共有的函数指针表，通常称为*vtable*。每个对象都会添加一个指向 vtable 的指针，但 vtable 本身对同一类的所有对象都是通用的。

请注意，vtable 的使用不是 C++ 标准强制要求的，但在实践中几乎是通用的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T19:47:01.957

C++ 只能对具有虚方法的类型执行动态类型自省；与 Java 不同，C++ 方法默认是非虚拟的。

将虚方法添加到类的（通常）结果是编译器在类结构中发出一个附加的隐藏槽，其中包含指向*vtable*的指针；vtable 包含用于虚拟方法的方法指针的插槽和指向动态类型信息的附加指针。vtable 的使用方式如下：

*   在实例上调用虚拟方法将遵循 vtable 并通过适当的 vtable 方法槽调用；
*   用虚方法调用`typeid`类的实例会跟随vtable指针，动态类型信息确定实例的实际（动态）类型；
*   使用虚方法调用`dynamic_cast`类的实例将跟随 vtable 指针指向动态类型信息，并使用它来调整实例指针；这是必要的，因为 C++ 允许多重继承，因此指向同一对象的不同类型的指针可能指向内存中的不同位置。

指向vtable的指针槽意味着如果一个类（或其基类）有虚方法，那么`sizeof`将大于对象成员字段的总和。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T20:06:46.437

在 C++ 中，不使用 RTTI 是一个很好的做法，您可以在不使用它的情况下编写非常大的应用程序。您应该知道对象的类型，并将它们转换为适当的类型。在 Java 中您可以使用 if (obj instanceof ClassA) {}，但在 C++ 中您希望看到这样的代码，即使它可以被编写。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T19:53:58.430

您在询问*反射*，不，C++ 没有它，而且它不是故意的。Stroustrop 看到了其他语言，其中对象不断地用“你是什么”类型的消息相互询问，作为某种破坏的标志。偶然地，通过元编程可以获得有限的反射。

有一种方法可以绕过 C++ 中缺乏反射的问题。对 void* 的动态转换提供了一个指向最派生对象的指针。所以现在你只需要理解那个指针。如果您有自己的类型管理系统，则可以这样做。这并不简单，它几乎不可避免地在某处打破了语言规则，但它经常用于检查点/重启目的。

# android - 如果有的话，“mField”Android 代码风格有哪些优势？

> ID：11477224
> 
> 赞同：0
> 
> 时间：2012-07-13T19:37:25.073
> 
> 标签：android, coding-style

一段时间以来，我一直在关注 Android 的 Google 代码风格，没有进一步思考。现在我在想像`mXXX`谷歌那样命名字段有什么真正的优势吗？似乎有点像 C++ 中的匈牙利符号，即 ' `m`' 似乎有点多余？但是为什么谷歌的聪明人都在使用它呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:39:06.243

据我所知，`m`前缀表示它可能被称为“成员变量”，即包含在类中的属性。通过前缀`m`，可以很容易地区分它们是在处理类的成员而不是局部变量。

然而，更重要的是编写可理解的代码，换句话说，使用可读的文件名来说明它们的原因。`mFoobarvar`不太有用，而`textView`“更好”。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T19:43:36.507

mXxx 代表成员变量，sXxx 是静态成员变量，XXX_XXX 是静态最终成员变量。这记录[在这里](http://source.android.com/source/code-style.html#follow-field-naming-conventions)

# android - 为什么android应用程序显示应用程序图标而不是我上传的图像？

> ID：11477227
> 
> 赞同：0
> 
> 时间：2012-07-13T19:37:32.487
> 
> 标签：android, image, web-services, camera

我创建了一个 android 应用程序，我用相机捕获图像并上传到服务器。我有一个图像列表视图，我在其中显示图像。但是 listView 总是显示图标图像。我已经测试了服务器图像，图像总是在上传，但列表视图没有显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:11:20.520

下面给出了我用来加载图像的三种方法。

```
private Drawable ImageOperations(String url, String saveFilename) {
        try {
            InputStream is = (InputStream) this.fetch(url);
            Drawable d = Drawable.createFromStream(is, "src");

            return d;
        } catch (MalformedURLException e) {
            return null;
        } catch (IOException e) {
            return null;
        }
    }

    public Object fetch(String address) throws MalformedURLException,
            IOException {
        URL url = new URL(address);
        Object content = url.getContent();
        return content;
    }

    public int getCount() {
        // TODO Auto-generated method stub
        int sizef=items.size();
        Log.i("Size", sizef+"");
        return items.size();
    } 
```

但是现在如何加载图像，因为服务器现在从 Get 方法更改为 Post 方法。使用 https 的服务器：

# c# - 如何从用户控件访问我的标签页名称？C＃

> ID：11477228
> 
> 赞同：0
> 
> 时间：2012-07-13T19:37:41.273
> 
> 标签：c#, tabs

这是我第一次使用 stackoverflow，所以我对我做错的任何事情感到抱歉。

我在 Microsoft Visual C# 2010 Express Edition 中制作选项卡式 Web 浏览器时遇到问题，问题是我希望将选项卡页命名为网页名称，但我为每个选项卡使用用户控件的实例，因为选项卡控件不是静态我不能从 usercontrol 类中更改名称。我该怎么做才能解决这个问题？

任何提示都会有所帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T22:28:35.093

您可以使用该`Control.Parent`属性来访问包含控件。在这里，我们连接了 TabPage，以便更改 UserControl 的 Text 属性会自动更新父 TabPage。您可以在创建新的 TabPage 和 UserControl 时执行此连接。

```
using System;
using System.Windows.Forms;

static class Program
{
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Form form = new Form
        {
            Controls =
            {
                new TabControl
                {
                    Dock = DockStyle.Fill,
                    Name = "TabControl1",
                    TabPages =
                    {
                        new TabPage { Name = "Page1", Text = "Page 1", Controls = { new UserControl { } } },
                        new TabPage { Name = "Page2", Text = "Page 2", Controls = { new UserControl { } } },
                    },
                },
            },
        };

        // Hookup the TabPage so that when it's UserControl's Text property changes, its own Text property is changed to match
        // Now you can simply alter the UserControl's Text property to cause the TabPage to change
        foreach (TabPage page in ((TabControl)form.Controls["TabControl1"]).TabPages)
            page.Controls[0].TextChanged += (s, e) => { Control c = (Control)s; c.Parent.Text = c.Text; };

        // Demonstrate that when we change the UserControl's Text property, the TabPage changes too
        foreach (TabPage page in ((TabControl)form.Controls["TabControl1"]).TabPages)
            page.Controls[0].Text = "stackoverflow.com";

        Application.Run(form);
    }
} 
```

# c - 跳过我的 fgets

> ID：11477232
> 
> 赞同：0
> 
> 时间：2012-07-13T19:38:09.443
> 
> 标签：c

我正在用 C 编程。出于某种原因，只是跳过了我的 fgets 并在之后运行代码，我不知道为什么。

```
char content[256];
printf("What do you want it to say?\n");
fgets(content, 256, stdin); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:45:12.887

回想一下，I/O 可以被缓冲。如果在调用您的函数时输入缓冲区中有任何等待，它将被读入。如果缓冲区中的第一个字符是 a `'\n'`，该函数将立即返回并且似乎没有收集任何输入。在调用之前确保输入缓冲区中没有任何内容`fgets()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T19:41:28.650

您是否尝试过刷新标准输入？您可能会在其中捕获一个换行符，导致您的 fgets 立即返回。

[这个问题](https://stackoverflow.com/questions/2187474/i-am-not-able-to-flush-stdin)引用了一个刷新标准输入的好方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-13T08:35:11.707

```
char content[256];
printf("What do you want it to say?\n");
while ( getchar() != '\n');
fgets(content, 256, stdin); 
```

或者你试过这个...

```
 char content[256];
 printf("What do you want it to say?\n");
 fgets(content, 256, stdin); 
```

# c# - 为什么我告诉它时鼠标没有点击？

> ID：11477235
> 
> 赞同：0
> 
> 时间：2012-07-13T19:38:16.133
> 
> 标签：c#, winapi, cursor, mouse, emulation

我正在使用[如何在 C# 中模拟鼠标单击中的以下代码？](https://stackoverflow.com/questions/2416748/how-to-simulate-mouse-click-in-c)我发现它不起作用。这是代码：

```
 [DllImport("user32.dll", CharSet = CharSet.Auto, CallingConvention = CallingConvention.StdCall)]

    public static extern void mouse_event(uint dwFlags, uint dx, uint dy, uint cButtons, uint dwExtraInfo);

    private const int MOUSEEVENTF_LEFTDOWN = 0x02;
    private const int MOUSEEVENTF_LEFTUP = 0x04;
    private const int MOUSEEVENTF_RIGHTDOWN = 0x08;
    private const int MOUSEEVENTF_RIGHTUP = 0x10;

    public void DoMouseClick()
    {
        mouse_event(MOUSEEVENTF_LEFTDOWN | MOUSEEVENTF_LEFTUP, 882, 554, 0, 0);
    }

    private void button1_Click(object sender, EventArgs e)
    {
        DoMouseClick();
    } 
```

我也尝试过替换`mouse_event(MOUSEEVENTF_LEFTDOWN | MOUSEEVENT_LEFTUP...`，`mouse_event(MOUSEEVENTF_LEFTDOWN & MOUSEEVENT_LEFTUP...`但仍然没有运气。其他人已经成功了......为什么我没有？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T19:46:18.757

您不应该使用 mouse_event()，它已被 SendInput() 取代。

有一个很好的理由，mouse_event() 的返回类型是*void*。Windows 没有任何方法可以告诉您您做错了。SendInput 返回 UINT 并通过返回 0 并通过 GetLastError 暴露错误代码来报告错误。

你肯定做错了。发送同时向上和向下按钮的鼠标事件没有意义。你需要调用它两次；先下，后上。

# python - 自定义 django render_comment_form 字段

> ID：11477236
> 
> 赞同：2
> 
> 时间：2012-07-13T19:38:18.943
> 
> 标签：python, django, django-forms, django-templates, django-comments

（使用 django.contrib.comments）

放置时：

```
{% load comments %}
{% render_comment_form for event %} 
```

进入模板。它呈现一个带有: `Name`、`email`和字段`url`的表单。`comment`

有没有办法只`comment`显示该字段，并在仍然发布数据的同时隐藏其他字段？还是我应该自己重新创建表单？

提前感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:47:20.807

您可以将属性添加`is_hidden`到评论表单的字段中并为其赋值`True`。在这种情况下，只会打印该字段的值，但我不确定这是您想要的。

但幸运的是，您可以自己修改表单。代码在以下位置搜索模板：

```
template_search_list = [
    "comments/%s/%s/form.html" % (ctype.app_label, ctype.model),
    "comments/%s/form.html" % ctype.app_label,
    "comments/form.html"
] 
```

您可以查看此处的当前内容和`form.html` [此处](https://github.com/django/django/blob/master/django/contrib/comments/templates/comments/form.html)的`render_comments_form`模板标签[的](https://github.com/django/django/blob/master/django/contrib/comments/templatetags/comments.py)代码）。

如果您想修改整个网站的表单，那么您可以创建自己的版本，`comments/form.html`但您也可以`form.htm`为特定的 Django 应用程序甚至是 Django 应用程序的特定模型创建一个。在该表单模板中，您可以自定义显示哪些字段以及隐藏哪些字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T10:12:18.190

只需在您的 form.html 页面中添加这一行：-

```
{% if field.name != "name" and field.name != "email" and field.name != "url" %} 
```

你需要像这样添加它： -

```
{% if field.is_hidden %}
<div>{{ field }}</div>
{% else %}
{% if field.name != "name" and field.name != "email" and field.name != "url" %}
{% if field.errors %}{{ field.errors }}{% endif %} 
```

...它对我有用...不需要做任何其他事情..我只想要评论框而不是别的！！！！

# html - 隐藏溢出的折叠 div

> ID：11477237
> 
> 赞同：0
> 
> 时间：2012-07-13T19:38:20.223
> 
> 标签：html, css

我想了解为什么我的第一个 div 的元素没有显示在我的页面上。

看一下代码：http: [//jsfiddle.net/ny48t/1/](http://jsfiddle.net/ny48t/1/)

div MenuAreaLogada 已折叠。我知道我应该把溢出：隐藏在没有内容的 div 中。我把它，但它不起作用。

我想让我的页面分成两个 div：一个在顶部，另一个在第一个下面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T19:42:31.140

你没有给它任何高度并为它的孩子使用绝对位置。

[http://jsfiddle.net/ny48t/2/](http://jsfiddle.net/ny48t/2/)

# java - 添加条目时 SQlite 数据库错误

> ID：11477239
> 
> 赞同：0
> 
> 时间：2012-07-13T19:38:40.207
> 
> 标签：java, android, database, sqlite

嗨，我刚刚创建了一个数据库，但是当我在模拟器中运行它时出现错误，我想知道是否有人能看到原因。

这是我的日志

```
 07-13 20:09:35.239: I/Database(1146): sqlite returned: error code = 1, msg = no such table: computer 
```

对于我在活动中添加的每一行，此日志都会一遍又一遍地重复。直到它暂停然后停止，应用程序的 xml 加载并且我没有在模拟器上收到强制关闭通知

这是我的活动 Java

```
package com.course.ucas;

import android.app.Activity;
import android.os.Bundle;

public class DatabaseActivity extends Activity {
/** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

DBAdapter db = new DBAdapter(this);
db.open();
long id;
id = db.insertTitle(
"UNIVERSITY OF ABERDEEN","Computer Science",310,84,0,"BBB","");
id = db.insertTitle(
"UNIVERSITY OF ABERTAY DUNDEE","Computer Science",300,0,70,"CCC","N/A");
id = db.insertTitle(
"ABERYSTWYTH UNIVERSITY","Computer Science",270,79,70,"BBC","N/A");
id = db.insertTitle(
"ANGLIA RUSKIN UNIVERSITY","Computer Science",220,69,50,"CCC","N/A");
id = db.insertTitle(
"ASTON UNIVERSITY","Computer Science",330,91,80,"BBB","N/A");
id = db.insertTitle(
"BANGOR UNIVERSITY","Computer Science",260,86,0,"CCC","N/A");
id = db.insertTitle(
"UNIVERSITY OF BATH","Computer Science",440,91,100,"AAA","A*AB");
id = db.insertTitle(
"UNIVERSITY OF BEDFORDSHIRE","Computer Science",120,74,50,"CCD","N/A");
id = db.insertTitle(
"UNIVERSITY OF BIRMINGHAM","Computer Science",400,76,90,"AAB","N/A");
id = db.insertTitle(
"BIRMINGHAM CITY UNIVERSITY","Computer Science",240,68,70,"BCC","N/A");
id = db.insertTitle(
"THE UNIVERSITY OF BOLTON","Computer Science",0,78,0,"CCC","N/A");
id = db.insertTitle(
"UNIVERSITY OF BRADFORD","Computer Science",180,72,50,"CCC","N/A");
id = db.insertTitle(
"UNIVERSITY OF BRIGHTON","Computer Science",270,80,69,"BBB","N/A");
id = db.insertTitle(
"UNIVERSITY OF BRISTOL","Computer Science",480,96,95,"AAA","N/A");
id = db.insertTitle(
"THE UNIVERSITY OF BUCKINGHAM","Computer Science",0,0,0,"BBC","N/A");
id = db.insertTitle(
"BUCKINGHAMSHIRE NEW UNIVERSITY","Computer Science",150,61,55,"CCD","N/A");
id = db.insertTitle(
"UNIVERSITY OF CAMBRIDGE","Computer Science",580,95,100,"A*AA","N/A");
id = db.insertTitle(
"CANTERBURY CHRIST CHURCH UNIVERSITY","Computer Science",170,81,45,"CCC","N/A");
id = db.insertTitle(
"CARDIFF UNIVERSITY","Computer Science",360,79,82,"ABB","N/A");
id = db.insertTitle(
"CARDIFF METROPOLITAN UNIVERSITY","Computer Science",200,93,55,"BBC","N/A");
id = db.insertTitle(
"UNIVERSITY OF CENTRAL LANCASHIRE","Computer Science",240,75,74,"CCC","BBC");
id = db.insertTitle(
"UNIVERSITY OF CHESTER","Computer Science",240,86,75,"CCC","N/A");
id = db.insertTitle(
"THE CITY UNIVERSITY","Computer Science",320,65,73,"AAA","N/A");
id = db.insertTitle(
"COVENTRY UNIVERSITY","Computer Science",230,67,65,"BBC","N/A");
id = db.insertTitle(
"THE UNIVERSITY OF CUMBRIA","Computer Science",0,0,0,"CCC","N/A");
id = db.insertTitle(
"DE MONTFORT UNIVERSITY","Computer Science",230,80,58,"AAA","N/A");
id = db.insertTitle(
"UNIVERSITY OF DERBY","Computer Science",260,73,70,"BBC","N/A");
id = db.insertTitle(
"UNIVERSITY OF DUNDEE","Computer Science",336,96,85,"BBB","N/A");
id = db.insertTitle(
"DURHAM UNIVERSITY","Computer Science",440,81,100,"AAA","N/A");
id = db.insertTitle(
"UNIVERSITY OF EAST ANGLIA","Computer Science",320,89,55,"BBB","N/A");
id = db.insertTitle(
"UNIVERSITY OF EAST LONDON","Computer Science",205,74,39,"CDD","N/A");
id = db.insertTitle(
"UNIVERSITY OF EDINBURGH","Computer Science",428,90,85,"AAA","ABB");
id = db.insertTitle(
"EDINBURGH NAPIER UNIVERSITY","Computer Science",260,83,58,"CCD","N/A");
id = db.insertTitle(
"UNIVERSITY OF ESSEX","Computer Science",315,84,75,"BBB","N/A");
id = db.insertTitle(
"UNIVERSITY OF EXETER","Computer Science",0,86,95,"ABB","N/A");
id = db.insertTitle(
"UNIVERSITY OF GLAMORGAN / PRIFYSGOL MORGANNWG","Computer Science",280,69,52,"BBB","N/A");
id = db.insertTitle(
"UNIVERSITY OF GLASGOW","Computer Science",384,98,90,"ABB","N/A");
id = db.insertTitle(
"GLASGOW CALEDONIAN UNIVERSITY","Computer Science",258,80,51,"CC","N/A");
id = db.insertTitle(
"UNIVERSITY OF GLOUCESTERSHIRE","Computer Science",220,73,71,"CCC","N/A");
id = db.insertTitle(
"GLYNDWR UNIVERSITY","Computer Science",200,75,70,"CCC","N/A");
id = db.insertTitle(
"GOLDSMITHS' COLLEGE","Computer Science",220,83,70,"BBB","N/A");
id = db.insertTitle(
"UNIVERSITY OF GREENWICH","Computer Science",180,89,54,"BBC","N/A");
id = db.insertTitle(
"HERIOT-WATT UNIVERSITY","Computer Science",288,77,90,"BBB","N/A");
id = db.insertTitle(
"UNIVERSITY OF HERTFORDSHIRE","Computer Science",180,80,62,"CDD","N/A");
id = db.insertTitle(
"UNIVERSITY OF THE HIGHLANDS AND ISLANDS","Computer Science",0,0,0,"D","N/A");
id = db.insertTitle(
"UNIVERSITY OF HUDDERSFIELD","Computer Science",240,63,84,"BBB","N/A");
id = db.insertTitle(
"UNIVERSITY OF HULL","Computer Science",240,83,95,"BBC","N/A");
id = db.insertTitle(
"IMPERIAL COLLEGE, LONDON","Computer Science",510,84,98,"AAA","N/A");
id = db.insertTitle(
"KEELE UNIVERSITY","Computer Science",260,74,0,"BBB","N/A");
id = db.insertTitle(
"UNIVERSITY OF KENT","Computer Science",310,80,90,"BBB","N/A");
id = db.insertTitle(
"KING'S COLLEGE LONDON","Computer Science",370,82,90,"AAB","N/A");
id = db.insertTitle(
"KINGSTON UNIVERSITY","Computer Science",200,73,68,"BBC","N/A");
id = db.insertTitle(
"LANCASTER UNIVERSITY","Computer Science",380,81,80,"ABB","N/A");
id = db.insertTitle(
"UNIVERSITY OF LEEDS","Computer Science",370,69,90,"AAA","N/A");
id = db.insertTitle(
"LEEDS METROPOLITAN UNIVERSITY","Computer Science",180,71,57,"BBC","N/A");
id = db.insertTitle(
"UNIVERSITY OF LEICESTER","Computer Science",330,92,80,"ABB","N/A");
id = db.insertTitle(
"UNIVERSITY OF LIVERPOOL","Computer Science",360,89,80,"AAB","ABB");
id = db.insertTitle(
"LIVERPOOL HOPE UNIVERSITY","Computer Science",280,78,40,"ABB","N/A");
id = db.insertTitle(
"UNIVERSITY COLLEGE LONDON","Computer Science",430,87,90,"A*AA","N/A");
id = db.insertTitle(
"LONDON METROPOLITAN UNIVERSITY","Computer Science",140,73,55,"ABB","N/A");
id = db.insertTitle(
"LOUGHBOROUGH UNIVERSITY","Computer Science",340,88,88,"ABB","N/A");
id = db.insertTitle(
"THE UNIVERSITY OF MANCHESTER","Computer Science",400,82,83,"AAB","N/A");
id = db.insertTitle(
"THE MANCHESTER METROPOLITAN UNIVERSITY","Computer Science",220,67,66,"CCC","N/A");
id = db.insertTitle(
"MIDDLESEX UNIVERSITY","Computer Science",140,73,50,"CDD","N/A");
id = db.insertTitle(
"NEWCASTLE UNIVERSITY","Computer Science",350,88,90,"ABB","N/A");
id = db.insertTitle(
"THE UNIVERSITY OF NORTHAMPTON","Computer Science",200,75,60,"BBB","N/A");
id = db.insertTitle(
"UNIVERSITY OF NORTHUMBRIA","Computer Science",240,80,77,"BBC","N/A");
id = db.insertTitle(
"UNIVERSITY OF NOTTINGHAM","Computer Science",360,82,90,"BBB","N/A");
id = db.insertTitle(
"NOTTINGHAM TRENT UNIVERSITY","Computer Science",260,69,68,"BBC","N/A");
id = db.insertTitle(
"OXFORD UNIVERSITY","Computer Science",520,0,90,"AAA","N/A");
id = db.insertTitle(
"OXFORD BROOKES UNIVERSITY","Computer Science",260,85,85,"BBC","N/A");
id = db.insertTitle(
"UNIVERSITY OF PLYMOUTH","Computer Science",260,76,75,"BBB","N/A");
id = db.insertTitle(
"UNIVERSITY OF PORTSMOUTH","Computer Science",240,81,72,"BBC","N/A");
id = db.insertTitle(
"QUEEN'S UNIVERSITY BELFAST","Computer Science",320,84,84,"BBB","N/A");
id = db.insertTitle(
"QUEEN MARY, UNIVERSITY OF LONDON","Computer Science",300,88,65,"BBB","N/A");
id = db.insertTitle(
"UNIVERSITY OF READING","Computer Science",350,79,95,"ABB","N/A");
id = db.insertTitle(
"THE ROBERT GORDON UNIVERSITY","Computer Science",240,79,80,"CCC","N/A");
id = db.insertTitle(
"ROYAL HOLLOWAY, UNIVERSITY OF LONDON","Computer Science",320,82,0,"BBB","N/A");
id = db.insertTitle(
"UNIVERSITY OF SALFORD","Computer Science",240,89,75,"BBB","N/A");
id = db.insertTitle(
"UNIVERSITY OF SHEFFIELD","Computer Science",390,83,95,"ABB","N/A");
id = db.insertTitle(
"SHEFFIELD HALLAM UNIVERSITY","Computer Science",240,73,73,"BBC","N/A");
id = db.insertTitle(
"UNIVERSITY OF SOUTHAMPTON","Computer Science",450,92,95,"AAA","N/A");
id = db.insertTitle(
"SOUTHAMPTON SOLENT UNIVERSITY","Computer Science",240,68,85,"CDD","N/A");
id = db.insertTitle(
"STAFFORDSHIRE UNIVERSITY","Computer Science",240,70,78,"CDD","N/A");
id = db.insertTitle(
"UNIVERSITY OF ST ANDREWS","Computer Science",458,90,0,"AAB","N/A");
id = db.insertTitle(
"UNIVERSITY OF STIRLING","Computer Science",255,100,65,"BBC","N/A");
id = db.insertTitle(
"UNIVERSITY OF STRATHCLYDE","Computer Science",333,97,90,"BBC","N/A");
id = db.insertTitle(
"UNIVERSITY OF SUNDERLAND","Computer Science",225,59,70,"BBB","N/A");
id = db.insertTitle(
"UNIVERSITY OF SURREY","Computer Science",380,89,90,"AAB","N/A");
id = db.insertTitle(
"UNIVERSITY OF SUSSEX","Computer Science",360,84,85,"ABB","BBB");
id = db.insertTitle(
"SWANSEA UNIVERSITY","Computer Science",280,82,75,"ABB","N/A");
id = db.insertTitle(
"TEESSIDE UNIVERSITY","Computer Science",260,78,64,"BBC","N/A");
id = db.insertTitle(
"UNIVERSITY OF ULSTER","Computer Science",237,73,63,"BBB","N/A");
id = db.insertTitle(
"UNIVERSITY OF WALES: TRINITY SAINT DAVID","Computer Science",0,77,0,"CDD","N/A");
id = db.insertTitle(
"UNIVERSITY OF WALES, NEWPORT","Computer Science",230,81,50,"CDD","N/A");
id = db.insertTitle(
"UNIVERSITY OF WARWICK","Computer Science",480,87,100,"AAB","N/A");
id = db.insertTitle(
"UNIVERSITY OF THE WEST OF ENGLAND, BRISTOL","Computer Science",240,74,84,"BBB","N/A");
id = db.insertTitle(
"THE UNIVERSITY OF WEST LONDON","Computer Science",0,37,0,"CDD","N/A");
id = db.insertTitle(
"THE UNIVERSITY OF WESTMINSTER","Computer Science",180,54,63,"CCC","AA");
id = db.insertTitle(
"UNIVERSITY OF THE WEST OF SCOTLAND","Computer Science",238,69,52,"BBC","N/A");
id = db.insertTitle(
"UNIVERSITY OF WOLVERHAMPTON","Computer Science",150,70,61,"CCD","N/A");
id = db.insertTitle(
"UNIVERSITY OF WORCESTER","Computer Science",210,65,55,"CCC","N/A");
id = db.insertTitle(
"UNIVERSITY OF YORK","Computer Science",460,91,100,"AAA","N/A");

   db.close();

}

} 
```

这是我更新的数据库适配器

```
package com.course.ucas;

import android.app.Activity;
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DBAdapter {
public static final String KEY_ROWID = "_id";
public static final String KEY_UNIVERSITY = "University";
public static final String KEY_COURSE = "Course";   
public static final String KEY_UCAS = "UCAS";
public static final String KEY_SATISFACTION = "Student_Satisfaction";
public static final String KEY_EMPLOYED = "Employed";
public static final String KEY_OFFER = "Offer";
public static final String KEY_OTHER = "Other";
private static final String TAG = "DBAdapter";
private static final String DATABASE_NAME = "UCAS";
private static final String DATABASE_TABLE ="computer";
private static final int DATABASE_VERSION = 1;
private static final String DATABASE_CREATE =
"create table titles (_id integer primary key autoincrement, "
+ "University text not null, Course text not null, UCAS int not null, "
+ "Student Satisfaction int not null, Employed int not null, Offer text not null, Other text not null);";
private final Context context;
private DatabaseHelper DBHelper;
private SQLiteDatabase db;
public DBAdapter(Context ctx)
{
this.context = ctx;
DBHelper = new DatabaseHelper(context);
}
private static class DatabaseHelper extends SQLiteOpenHelper
{
DatabaseHelper(Context context)
{
super(context, DATABASE_NAME, null, DATABASE_VERSION);
}
@Override
public void onCreate(SQLiteDatabase db)
{
db.execSQL(DATABASE_CREATE);
}
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion,
int newVersion)
{
Log.w(TAG, "Upgrading database from version " + oldVersion
+ " to "
+ newVersion + ", which will destroy all old data");
db.execSQL("DROP TABLE IF EXISTS titles");
onCreate(db);
}
}
public DBAdapter open() throws SQLException
{
db = DBHelper.getWritableDatabase();
return this;
}
//---closes the database---
public void close()
{
DBHelper.close();
}
//---insert a title into the database---
public long insertTitle(String university, String other, int i, int j,int k, String UCAS, String employed)
{
ContentValues initialValues = new ContentValues();
initialValues.put(KEY_UNIVERSITY, university);
initialValues.put(KEY_COURSE, j);
initialValues.put(KEY_UCAS , UCAS);
initialValues.put(KEY_SATISFACTION, k);
initialValues.put(KEY_EMPLOYED , employed);
initialValues.put(KEY_OFFER , i);
initialValues.put(KEY_OTHER , other);
return db.insert(DATABASE_TABLE, null, initialValues);
}
//---deletes a particular title---
public boolean deleteTitle(long rowId)
{
return db.delete(DATABASE_TABLE, KEY_ROWID +
"=" + rowId, null) > 0;
}
//---retrieves all the titles---
public Cursor getAllTitles()
{
return db.query(DATABASE_TABLE, new String[] {
KEY_ROWID,
KEY_UNIVERSITY,
KEY_COURSE,
KEY_UCAS ,
KEY_SATISFACTION,
KEY_EMPLOYED,
KEY_OFFER,
KEY_OTHER,
},
null,
null,
null,
null,
null);
}
//---retrieves a particular title---
public Cursor getTitle(long rowId) throws SQLException
{
Cursor mCursor =
db.query(true, DATABASE_TABLE, new String[] {
KEY_ROWID,
KEY_UNIVERSITY,
KEY_COURSE,
KEY_UCAS,
KEY_SATISFACTION,
KEY_EMPLOYED,
KEY_OFFER,
KEY_OTHER,
},
KEY_ROWID + "=" + rowId,
null,
null,
null,
null,
null);
if (mCursor != null) {
mCursor.moveToFirst();
}
return mCursor;
}
//---updates a title---
public boolean updateTitle(long rowID, String university, String other, int i, int j,int k, String UCAS, String employed)
{
ContentValues args = new ContentValues();
args.put(KEY_UNIVERSITY, university);
args.put(KEY_COURSE, i);
args.put(KEY_UCAS , UCAS);
args.put(KEY_SATISFACTION, j);
args.put(KEY_EMPLOYED , employed);
args.put(KEY_OFFER , k);
args.put(KEY_OTHER , other);
return db.update(DATABASE_TABLE, args,
KEY_ROWID + "=" + rowID, null) > 0;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:45:06.413

`INSERT INTO Computer Science`: 表名不应包含空格。由于计算机科学之间的空间，SQL 解析器无法理解哪一个是表名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T20:39:46.877

您永远不会创建名为计算机的表。您设置了一个 variable.for.it，但在您的 DATABASE_CREATE 变量中既没有使用该变量也没有使用该词本身，因此您永远不会创建该表。

将其更改为：

```
... DATABASE_TABLE = "titles"; 
```

这与您创建的表相匹配。事情应该会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T19:40:50.020

插入计算机科学（其他..我认为在科学之后需要一个空格。还需要像这样的 [Table Name with spaces] 中的括号>

INSERT INTO [计算机科学]（其他

编辑：我仔细检查了 SQlite 根本不支持表名中的空格

# css - 这个用于近似 div 中每行字符数的公式是否正确？

> ID：11477243
> 
> 赞同：8
> 
> 时间：2012-07-13T19:38:54.317
> 
> 标签：css, typography

我遇到了一些[网站](http://www.webtypography.net/Rhythm_and_Proportion/Horizontal_Motion/2.1.2/)，上面写着

*在前面的示例中，第 1 列具有固定宽度：已设置为 400 像素宽。使用 12 像素的文本渲染，这将导致每行大约 66 个字符。如果您的读者将文本大小增加到 16 像素，则该度量将减少到每行 50 个字符。*

第*1 列*的 CSS是`DIV#col1 { width:400px }`

目前，我不太关心*读者增加文本大小的*情况。

我不明白他从哪里得到他的比率，但这个公式似乎解释了他给出的两个比率：

```
approximate charcount per line = [2 * (div width)] / (font size) 
```

公式中的单位是像素...

再往下，他又举了两个例子，这个公式似乎仍然成立……

这个公式正确吗？他为什么要给出这些比率？

我认为以前有人问过这个问题，但也许我的搜索词有误:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-14T04:03:40.537

引用页面上的例子和公式和注释都总结了一个简单的想法，一个字符的宽度是字体大小的一半。

这只是一个粗略的经验法则，即使作为平均值也不是很准确。宽度取决于字体和字符。“字符的平均宽度”是一个非常模糊的概念。在印刷术中，例如在 Robert Bringhurst 的“印刷风格元素”中，英文小写字母（a 到 z）的长度被用作衡量标准，但它实际上意味着计算这些字母的平均值，就好像文本由以下内容组成他们只和每个字符同样频繁。

实际上，英文散文中字符的平均宽度似乎更接近字体大小的 0.4，而不是 0.5。

总之，如果您希望将列宽设置为 50 个字符，那么以下是合理的尝试：

```
width: 20em;
width: 50ch; 
```

不支持 CSS3 单元的旧浏览器`ch`将使用`20em`，这对应于 0.4 的估计值。如果您已经检查（测量）您的主要字体建议是指字符相对较宽的字体，您可能会使用更大的比率或相当大的比率。但这不是精确的科学。即使使用`ch`单位也不是精确的科学，因为它只是表示数字零 (0) 的宽度，尽管这可以被视为“平均字符宽度”的合理近似值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T19:44:10.887

字体的像素大小给出了高度，宽度对应于比率。确定字符数的唯一方法是使用等宽字体。话虽这么说，这听起来是对的。确定的唯一方法是使用您正在使用的字体进行测试（因为它们的高宽比可能会有很大差异，并且肯定会因使用的字符而改变）。

# email - 使用 Exchange Web 服务阅读电子邮件

> ID：11477255
> 
> 赞同：8
> 
> 时间：2012-07-13T19:39:24.997
> 
> 标签：email, exchangewebservices, exchange-server-2010

这是我的场景：我必须阅读来自 Exchange 2010 sp2 帐户的电子邮件。我必须使用 Exchange Web 服务，POP3 和 IMAP 被阻止。我必须在人们只能在 Intranet 中通过 Web 浏览器访问其帐户的环境中测试我的应用程序。我无法将我的应用程序直接调试到此 Intranet。我有这个片段来访问一个帐户：

```
private void Dowork()
{
    ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2010_SP2);

    string dominio = "domain";
    string usuario = "user";
    string password = "password";

    service.Credentials = new NetworkCredential(usuario, password, dominio);

    string url = usuario + "@" + dominio + ".com";

    service.AutodiscoverUrl(url, RedirectionUrlValidationCallback);
    //service.AutodiscoverUrl(url);

    FindItemsResults<Item> findResults = service.FindItems(
       WellKnownFolderName.Inbox,
       new ItemView(10));

    string content = string.Empty;

    foreach (Item item in findResults.Items)
    {
        EmailMessage email = EmailMessage.Bind(service, item.Id);
        email.Load();

        content += item.Subject + "\n";
        content += email.From.Address + "\n";
        content += email.Body + "\n\n";

        //Console.WriteLine(item.Subject);
        //Console.WriteLine(email.From.Address);
        //Console.WriteLine(email.Body);
    }

    string result = content;
}

// Create the callback to validate the redirection URL.
static bool RedirectionUrlValidationCallback(String redirectionUrl)
{
    // Perform validation.
    return (redirectionUrl == "https://autodiscover-s.outlook.com/autodiscover/autodiscover.xml");
} 
```

如果我使用这条线：

```
service.AutodiscoverUrl(url); 
```

我收到此错误：

> “自动发现阻止了对[https://autodiscover.colpatria.com/autodiscover/autodiscover.xml](https://autodiscover.colpatria.com/autodiscover/autodiscover.xml)的潜在不安全重定向。要允许自动发现遵循重定向，请使用 AutodiscoverUrl(string, AutodiscoverRedirectionUrlValidationCallback) 重载。”

所以方法`RedirectionUrlValidationCallback`实现了，我不确定url是否正确。事实是我收到了这个错误：

> “找不到自动发现服务”。

是否可能未正确配置自动发现？我不是交易所管理员，我怎么知道自动发现是否有效？我需要参数来告诉交易所管理员必须配置此功能。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-02-01T16:45:11.513

这是一篇旧帖子，我想我会为报告的错误提供一个完整的示例解决方案。只需替换**service.AutodiscoverUrl("someuser@somedomain.org");** 与**System.Uri(" [https://mail.somedomain.org/ews/Exchange.asmx](https://mail.somedomain.org/ews/Exchange.asmx) ");**

这是完整的代码块

```
ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2010_SP2);
                service.Credentials = new WebCredentials("someuser", "somepassword");
                //service.AutodiscoverUrl("someuser@somedomain.org");
                service.Url = new System.Uri("https://mail.somedomain.org/ews/Exchange.asmx"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-14T17:05:03.727

最近遇到了类似的问题并努力解决它们，我发现了一个对故障排除非常有帮助的实用程序：[EWS 编辑器](http://ewseditor.codeplex.com/)它可能无法解决您的问题，但可用于非常快速地迭代不同的配置组合，希望能提供一些启示关于你的问题。

我在与客户端合作建立自动发现和服务 URL 连接以测试和生产 Exchange 服务器时使用了此应用程序。它不仅对我很方便，对客户的 IT 员工也很方便。他们下载并使用该实用程序来测试和验证他们的设置。

来自[http://ewseditor.codeplex.com](http://ewseditor.codeplex.com)：

**项目描述**

EWSEditor 有三个目标：

1.  通过其源代码向开发人员展示 Exchange Web 服务托管 API 的功能和简单性。

2.  演示用于执行通过资源管理器用户界面启动的操作的 Exchange Web 服务 SOAP 流量。

3.  通过深入探索项目、文件夹及其属性，帮助非开发人员调试和理解 Exchange 存储

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T18:41:42.347

不知何故，您需要记录结果`redirectionUrl`。`redirectionUrl`当您与您指定的 URI 不匹配时，您将收到此错误（*即您的自动发现验证回调返回`FALSE`*）。当然`redirectionUrl`URI 不是你想的那样。如果您使用 SSL - 您需要处理重定向验证回调。

由于您无法调试应用程序，也许您可​​以给自己发送一封电子邮件，记录到共享数据库或文件，或者使用应用程序事件日志（*抛出应用程序异常*）。

**注意：**第一个错误确实告诉您自动发现 URI 是`https://autodiscover.colpatria.com/autodiscover/autodiscover.xml`. 这应该替换现有的字符串`https://autodiscover-s.outlook.com/autodiscover/autodiscover.xml`吗？

另请参阅MSDN 上[有关 Exchange Autodiscovery](https://stackoverflow.com/a/2768539/175679)和[Validating a Potentially Unsafe Redirection URL 的](http://msdn.microsoft.com/en-us/library/ee332364.aspx)相关 SO 帖子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-24T23:46:26.440

尝试`service.TraceEnabled = true;`

WFM。在我的情况下，我需要通过将来自 Exchange Server 的证书安装到客户端计算机上来设置 SSL/TLS。我从跟踪的输出中得到了这个解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-11T14:50:54.813

这对我来说就像一个魅力：

```
 var exchange = new ExchangeService(ExchangeVersion.Exchange2013_SP1);
   var username = Settings.EmailUserName;
   var password = Settings.EmailPassword;
   var domain = Settings.EmailDomain;
   var email = Settings.Email;
   exchange.Credentials = new WebCredentials(email, password);
   exchange.AutodiscoverUrl(email, RedirectionCallback); 
```

并且 RedirectionCallback 是：

```
 static bool RedirectionCallback(string url)
        {
            // Return true if the URL is an HTTPS URL.
            return url.ToLower().StartsWith("https://");
        } 
```

这是链接： [https ://msdn.microsoft.com/en-us/library/office/dd635285(v=exchg.80).aspx](https://msdn.microsoft.com/en-us/library/office/dd635285(v=exchg.80).aspx)

问候！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-03T10:35:33.253

当您将 AutodiscoverUrl() 与 RedirectionUrlValidationCallback 一起使用时，以下是示例代码：

```
ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2007_SP1);
service.PreAuthenticate = true;
service.Credentials = new WebCredentials("my_username","my_password"); //use WebCredentials instead of NetworkCredential
service.AutodiscoverUrl(userEmailAddress, RedirectionCallback); 
```

而 RedirectionCallback 方法就像：

```
 static bool RedirectionCallback(string url)
        {
            bool redirectionValidated = false;
            Uri redirectionUri = new Uri(url);

//There are two ways of implementing a RedirectionCallback scheme

// Way 1: Return true if the URL is an HTTPS URL.
            //return url.ToLower().StartsWith("https://");
            if (redirectionUri.Scheme == "https")
                redirectionValidated = true;

//Way 2: check if url is autodiscovery url
            if (url.Equals(
                "https://autodiscover-s.outlook.com/autodiscover/autodiscover.xml"))
                redirectionValidated = true;

            return redirectionValidated;
        } 
```

PS：照顾不允许自动发现服务的代理。就我而言，此代码每次都返回“无法找到自动发现服务”错误，但根本原因是 403 Forbidden on Autodiscovery call。它确实在代理设置后工作。

# colors - 画布不工作

> ID：11477260
> 
> 赞同：1
> 
> 时间：2012-07-13T19:39:43.220
> 
> 标签：colors, grayscale

我正在尝试使用画布。我正在尝试制作一个按钮，因此当您单击它时，它会将图片更改为灰度等，这是我的代码，我不知道为什么它不起作用。

```
<script>
    $('#buttonID').click(function generateRGBKs( img ) {
        var w = img.width;
        var h = img.height;
        var rgbks = [];

        var canvas = document.createElement("canvas");
        canvas.width = w;
        canvas.height = h;

        var ctx = canvas.getContext("2d");
        ctx.drawImage( img, 0, 0 );

        var pixels = ctx.getImageData( 0, 0, w, h ).data;

        // 4 is used to ask for 3 images: red, green, blue and
        // black in that order.
        for ( var rgbI = 0; rgbI < 4; rgbI++ ) {
            var canvas = document.createElement("canvas");
            canvas.width  = w;
            canvas.height = h;

            var ctx = canvas.getContext('2d');
            ctx.drawImage( img, 0, 0 );
            var to = ctx.getImageData( 0, 0, w, h );
            var toData = to.data;

            for (
                    var i = 0, len = pixels.length;
                    i < len;
                    i += 4
            ) {
                toData[i  ] = (rgbI === 0) ? pixels[i  ] : 0;
                toData[i+1] = (rgbI === 1) ? pixels[i+1] : 0;
                toData[i+2] = (rgbI === 2) ? pixels[i+2] : 0;
                toData[i+3] =                pixels[i+3]    ;
            }

            ctx.putImageData( to, 0, 0 );

            // image is _slightly_ faster then canvas for this, so convert
            var imgComp = new Image();
            imgComp.src = canvas.toDataURL();

            rgbks.push( imgComp );
        }

        return rgbks;

    });

 </script>
 </head>
<body>
<img src="profile.jpg" width="400px" height="380px">
<FORM>

<INPUT TYPE="BUTTON" VALUE="Change Color" ONCLICK="buttonID" class="buttonID"> 
</FORM> 
```

# ios - Greystripe sdk 全屏广告删除模态视图控制器

> ID：11477261
> 
> 赞同：0
> 
> 时间：2012-07-13T19:39:48.683
> 
> 标签：ios, xcode, uiviewcontroller, ads

[我的问题与这个](https://stackoverflow.com/questions/8769023/how-to-prevent-greystripe-fullscreen-ad-from-dismissing-my-modal-view-controller)问题几乎相同， 但没有解决方案。

我有一个模态视图，它调用显示 Greystripe 全屏广告。当我关闭广告时，当我看到我的主菜单时，它似乎将我的模态视图带走，但是主菜单无法正常工作，我怀疑模态视图仍然存在，如果是这样，可能会移到后面甚至可能？我尝试使用非模态视图，它在立即关闭广告时工作正常，但如果点击广告查看内容，然后关闭，它会在删除时再次带走我的模态视图。

有没有办法列出所有加载的视图控制器以查看它是否仍然存在？有没有办法用 ViewControllers 发送到后面，带到前面？

还有其他帮助/建议吗？

编辑 ---
我已将此代码添加到主菜单的 viewWillAppear 中：

```
NSArray *viewControllers = self.navigationController.viewControllers;
NSLog(@"viewControllers:%@",viewControllers); 
```

即使从广告回来，它也只会报告自己，但是我调用广告的游戏模式视图没有被释放。它可能会发生什么？

编辑 2 ---
我已实现此代码以在显示全屏广告之前添加另一个模式视图：

```
- (void)greystripeFullScreenDisplayWillOpen
{
    UIStoryboard *storyboard = self.storyboard;
    Game3ViewController *newView = [storyboard instantiateViewControllerWithIdentifier:@"settingsView"];
    [self presentModalViewController:newView animated:NO];
} 
```

并且在广告移开后，它会同时带走两个模态视图。

如果没有人可以帮助解决这个问题，任何人都可以建议替代 Greystripe 的全屏插页式广告吗？

# php - 使用 group_concat 的复杂 SQL 查询

> ID：11477263
> 
> 赞同：2
> 
> 时间：2012-07-13T19:39:51.690
> 
> 标签：php, mysql, sql

我有一张名为“股票”的表：

```
    股票编号 | prod_id | 尺寸 | 颜色 | shop_id | 数量

    1 | 4 | 大号 | 红色 | 1 | 3
    2 | 4 | 加大码 | 蓝色 | 2 | 1
    3 | 4 | 大号 | 红色 | 3 | 2
    4 | 2 | XXL | 白色 | 1 | 7
    5 | 4 | 大号 | 红色 | 4 | 1

```

其中一些..

我有一个产品表和一个商店表。

我想要的结果是这样的：

```
    prod_id | 产品名称 | 店铺名 | color_size_qty
       4 | T 恤 | 店铺 1 | 红色,L,(3)
       2 | T 恤 | 店铺 1 | 白色,XXL,(7)
       4 | T 恤 | 店铺 2 | 蓝色,XL,(1)

```

我不知道你能不能理解我。我得到的最接近的是

```
prod id | prod_name |        Colors         |     sizes   |
   4    | T-Shirt   |Red,Red,Red,Blue,White | L,L,L,XL,XL 
```

甚至不像你看到的那样接近。希望您能够帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T19:44:59.537

A simple`CONCAT()`可能是您所需要的，而不是 a `GROUP_CONCAT()`：

```
SELECT
    prod_id, prod_name, shop_name,
    CONCAT(color, ',', size, ', (', qty, ')') AS color_size_qty
FROM
    stock
    JOIN products ON stock.prod_id=products.id
    JOIN shops ON stock.shop_id=shops.id
ORDER BY
    prod_name ASC, shop_name ASC 
```

# c# - 以编程方式配置自定义实体以使用 MS CRM 活动源

> ID：11477264
> 
> 赞同：1
> 
> 时间：2012-07-13T19:40:00.020
> 
> 标签：c#, dynamics-crm, dynamics-crm-2011

一直没能找到这方面的信息。我正在创建一个新的自定义实体，并且我希望（需要）通过 C# 代码允许活动提要。我可以找到有关如何以交互方式但不是以编程方式进行设置的信息。

•定义实体时需要设置什么？

•我是否需要将记录墙添加到表单中，或者当我为实体启用活动源时会自动完成？

•如果我需要处理记录墙，这里是否有未列出的字段类型[/ID：http://technet.microsoft.com/en-us/library/cc906186.aspx](http://technet.microsoft.com/en-us/library/cc906186.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:03:22.767

看起来您可以通过 API 执行此操作：

> 要为活动源启用实体，请使用 msdyn_PostConfig 实体。使用 SetStateRequest 消息激活实体的提要。将 msdyn_PostConfig.msdyn_ConfigureWall 属性设置为 true 以启用实体窗体上的墙。

[MSDN 文档有更多详细](http://msdn.microsoft.com/en-us/library/hh547386.aspx)信息。

# c - 将问题与 libircclient 中的函数联系起来

> ID：11477266
> 
> 赞同：0
> 
> 时间：2012-07-13T19:40:07.823
> 
> 标签：c, ubuntu

**问题是链接或包含....库 libircclient.h 已找到，但库中使用的函数没有....**

```
#include <stdio.h>
#include <stdarg.h>
#include <string.h>
#include <stdlib.h>

/*#include "./libircclient-1.6/include/libircclient.h"*/ 
#include "libircclient.h"

typedef struct
{
    char    * channel;
    char    * nick;

} irc_ctx_t;

void addlog (const char * fmt, ...)
{
    FILE * fp;   // File-Zeiger
    char buf[1024];
    va_list va_alist; 

    va_start (va_alist, fmt); 
#if defined (WIN32)
    _vsnprintf (buf, sizeof(buf), fmt, va_alist);  
#else                                                         
    vsnprintf (buf, sizeof(buf), fmt, va_alist); 
#endif
    va_end (va_alist); 

    printf ("%s\n", buf);

    if ( (fp = fopen ("irctest.log", "ab")) != 0 ) // High level, daher File-Zeiger
    {
        fprintf (fp, "%s\n", buf);
        fclose (fp);
    }
}

void dump_event (irc_session_t * session, const char * event, const char * origin, const char ** params, unsigned int count)
{
    char buf[512];
    int cnt;

    buf[0] = '\0';

    for ( cnt = 0; cnt < count; cnt++ )
    {
        if ( cnt )
            strcat (buf, "|");

        strcat (buf, params[cnt]);
    }

    addlog ("Event \"%s\", origin: \"%s\", params: %d [%s]", event, origin ? origin : "NULL", cnt, buf);
}

void event_join (irc_session_t * session, const char * event, const char * origin, const char ** params, unsigned int count)
{
    dump_event (session, event, origin, params, count);
    irc_cmd_user_mode (session, "+i");
    irc_cmd_msg (session, params[0], "Hi all");
}

void event_connect (irc_session_t * session, const char * event, const char * origin, const char ** params, unsigned int count)
{
    irc_ctx_t * ctx = (irc_ctx_t *) irc_get_ctx (session);
    dump_event (session, event, origin, params, count);

    irc_cmd_join (session, ctx->channel, 0);
}

void event_privmsg (irc_session_t * session, const char * event, const char * origin, const char ** params, unsigned int count)
{
    dump_event (session, event, origin, params, count);

    printf ("'%s' said me (%s): %s\n", 
        origin ? origin : "someone",
        params[0], params[1] );
}

.... 
```

gcc irctest.c

> /tmp/ccbleNaD.o：在函数“event_join”中：irctest.c:(.text+0x2b9)：
> 
> 未定义对 `irc_cmd_user_mode' irctest.c:(.text+0x2d4) 的引用：
> 
> 未定义对“irc_cmd_msg”/tmp/ccbleNaD.o 的引用：在函数中
> 
> `event_connect': irctest.c:(.text+0x2fe): 未定义的引用
> 
> `irc_get_ctx' irctest.c:(.text+0x33b): 未定义的引用
> 
> `irc_cmd_join' /tmp/ccbleNaD.o: In function`dcc_recv_callback'：
> 
> irctest.c:(.text+0x43c): undefined reference to `irc_dcc_msg'
> 
> irctest.c:(.text+0x49b): undefined reference to `irc_dcc_msg'
> 
> irctest.c:(.text+0x4a7): undefined reference to `irc_strerror' ....
> 
> collect2: ld gab 1 饰演 Ende-Status zurück

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:45:39.053

编译时，您必须链接到库。它正在查找函数声明，但无法链接到包含定义的目标文件。

我认为它会是这样的： `gcc -lircclient irctest.c`

# boost - 将依赖于第三方库 boost 等的库安装到 android 中

> ID：11477267
> 
> 赞同：0
> 
> 时间：2012-07-13T19:40:07.963
> 
> 标签：boost, android-ndk

我在android中安装了我的boost（在/android-sdk/ndk/source/boost/android/lib中）

我有一个在 linux 中运行的软件（库），它使用 boost（1.47 及更高版本）库。

我想让该软件在android中运行。

当我尝试将软件安装到 android 中时，我必须包含 boost include/library。所以我的问题是我应该使用 android 的 boost include/library 还是应该使用为 linux 安装的 boost include/library，但是如果我使用为 android 安装安装的 boost 库，则会出现错误说找不到一些 lib（因为 boost android 没有支持boost的所有库）

# gfx - 保存在街机游戏 rom 中的 Gfx 瓷砖

> ID：11477268
> 
> 赞同：1
> 
> 时间：2012-07-13T19:40:11.147
> 
> 标签：gfx

我正在尝试查看如何使用旧的 roms gfx 文件进行一些逆向工程保存瓷砖（此示例尝试使用 snow bros arcade set one）。

这就是我现在所知道的：

*   每种颜色都指向一个可以更改的调色板（然后当您更改调色板时，您会更改瓷砖中的颜色）。

*   瓷砖的尺寸为 16x16。

当我在十六进制编辑器中看到文件时，我有点困惑。我不知道一个像素有多少字节，也不知道它们是如何排列的。

知道这是如何工作的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T20:41:25.647

在没有任何文档的情况下，我首先假设每个像素是一个字节（只是 256 调色板的索引）并且 (16 x 16) 256 字节的块组成一个图块。

现在完全有可能还有一些标题信息。因此，您需要读取*偏移量 + 256*字节并使用加载的调色板或仅使用灰度调色板显示。

继续增加*偏移量*，直到你得到看起来像瓷砖的东西。现在通过读取后续图块来测试您的假设（之后将偏移量增加 256 个字节）。当然 - 如果图块之间还有其他数据，您将不得不再次执行此操作，直到确定步幅。

请注意，如果您没有加载正确的调色板，颜色很可能看起来很乱。您将不得不依靠您的模式识别技能。

综上所述，您可以为该控制台找到一个[现有的开源模拟器，并尝试对其代码进行逆向工程以发现格式。](http://zsnesportable.svn.sourceforge.net/viewvc/zsnesportable/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T22:38:26.683

我找到了答案（至少在雪地兄弟游戏中）：

瓦片以 128 个字节保存。

作为每个字节 2 种颜色（每种颜色 4 位（当然是索引））并以这种方式展开：

十六进制文件：

![在此处输入图像描述](../Images/c4f1406cf75c5c70f7b865afba68a65e.png)

当然十六进制从 0 开始，但我认为这更直观，每个 celd 都是一个字节（2 个像素）。

# arrays - 冷聚变和关联阵列

> ID：11477269
> 
> 赞同：3
> 
> 时间：2012-07-13T19:40:23.047
> 
> 标签：arrays, coldfusion, associative-array

我习惯于处理我的关联数组 PHP 风格，我会有类似以下的内容

```
array[day][time] = count 
```

这使我可以轻松地计算某些东西出现的次数，并且它是一个易于使用的结构。就我而言，我正在从数据库中读取结果集，并且让这样的东西正常工作会非常有帮助

我将如何在 Coldfusion 中做同样的事情？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-13T19:55:57.130

这对我来说就像一个结构 - 您可以按照您习惯的方式轻松创建它：

```
<cfscript>

   myStruct = { day= { time = count}};

</cfscript> 
```

或者使用可能更好地概括它的旧语法。

```
<cfset mySTruct = structNew()/>
<Cfset mySTruct.day = structNew()/>
<Cfset myStruct.day.time = count/> 
```

还要记住，ColdFusion 查询对象已经是一个非常有用的小数据结构，其格式为 queryName[struct][row] - 并且查询查询（您可以利用 SQL 来简单地查询查询对象）允许轻松访问它数据也是如此。

希望这对您有所帮助。祝你好运。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T21:42:44.377

这是 Reginold 关于检查结构是否已定义的评论的后续内容：

```
<cfset thisvar = '04/MAR/2012'>
<cfset thatvar = '04:11'>
<cfset myStruct[thisvar][thatvar] = 'test'>

<!--- Check first key, then second --->
<cfif structKeyExists(myStruct,thisvar) and structKeyExists(mystruct[thisvar],thatvar)>
    Both Keys Exist.<hr>
</cfif>

<!--- Alternative Check --->
<cfif isDefined('myStruct.#thisvar#.#thatvar#') >
    Key Exists.<hr>
</cfif>

<cfdump var="#myStruct#"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T19:09:38.963

您也可以使用 Coldfusion 阵列来做到这一点。

```
array = [[], []];// initialize array

array[1][1] = 1;// set a value in the array 
```

请记住，Coldfusion 数组从索引 1 开始，而不是 0。

# c# - 使用 iTextSharp 和 PDFsharp 从 PDF 内部获取值字典

> ID：11477272
> 
> 赞同：0
> 
> 时间：2012-07-13T19:40:40.307
> 
> 标签：c#, asp.net, pdf, itextsharp, pdfsharp

我有一个项目，我需要拆分非常大的 PDF 文件，每个文件包含 150 到 20 万页。我目前正在使用 iTextSharp DLL 来拆分一些具有可由 Adob​​e Reader 创建的“标准”书签的 PDF。我还使用 PDFsharp 从没有这些“标准”书签的 PDF 中提取文本，然后我将它们从数据库中解析为关键字并将它们拆分为更小的 PDF。然而，与第一种方法相反，这**非常**慢。

* * *

但是，没有“标准”书签的 PDF 有索引/书签。问题是这些是由 SOLindexer 创建的（[链接到产品页面](http://www.solimarsystems.com/SOLindexer_Overview.php)）。我能够在内部 COS 树中找到这些索引/书签。PDF 内部结构中到我想要到达的位置的路径是“trailer/Info/SSEDictionary/Document_MemberStatements”。在这个目录中（如果可以这样称呼的话）我可以点击 -DATA- 并打开一个记事本文件，其中包含我需要的所有帐号、姓名和东西（当然格式很奇怪，但可读），我相信这些是我可以放入字典的值。

* * *

在 iTextSharp 和 PDFsharp 中，您可以通过执行，例如，`var stuff = reader.Info.Values`或者也许访问 Info 部分`var stuff = reader.Info.Keys`，但这些似乎是死胡同，因为我无法从那里获取 SSEDictionary 内容。iTextSharp 还允许您查看预告片，并且我能够从那里获取密钥，但过去我无法深入到最低级别。我知道有一种方法可以使用 PDFsharp 从内部获取东西，如下所示：

```
PdfSharp.Pdf.PdfDocument inputDocument = PdfSharp.Pdf.IO.PdfReader.Open(MapPath("PDFs/Member Statements/06-2012.pdf"), PdfDocumentOpenMode.ReadOnly);
PdfSharp.Pdf.PdfDictionary dictionary = (PdfSharp.Pdf.PdfDictionary)inputDocument.Internals.Catalog.Elements.GetObject("/Outlines"); 
```

* * *

但是，我无法弄清楚如何使其适应我目前的情况以及获得我需要的东西的途径。此外，我不太确定如何在 iTextSharp（我最喜欢的两个库）中做到这一点。因此，我的问题是：您将如何在代码中获得字典（我相信我打开的文本文件中的所有内容都是字典）？另外，该代码会是什么样子？我对 PDF 的内部结构有相当的了解，但我只是不知道如何到达那里。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:47:36.197

[PDFVole](http://java.net/projects/pdfvole/)是一个基于 iText 的开源工具，可让您浏览 PDF 文件的内部结构。也许您可以看一下它的源代码并获得一些想法？如果我是你，我会从这个开始：[PDFTreeParser.java](http://java.net/projects/pdfvole/sources/svn/content/trunk/src/com/btr/pdfvole/PdfTreeParser.java?rev=58)

# android - 屏幕方向更改后，GridView 停止交互

> ID：11477280
> 
> 赞同：0
> 
> 时间：2012-07-13T19:41:23.857
> 
> 标签：android, gridview, android-fragments, fragment

我有两个选项卡的活动，它实现了两个类似的片段，每个片段由*GridView组成，通过**AsyncTask*加载项目并且它工作正常，直到屏幕方向改变......之后它只能点击操作栏并在选项卡之间切换，但是*GridViews*完全停止与用户交互：滚动、单击或其他任何操作。只实现了标准*的 onSaveInstanceState(Bundle outState)*和*onRestoreInstanceState(Bundle savedInstanceState)*。

我不知道这个问题，需要帮助。

**UPD**：嗯，每次新的方向改变后，都会出现一个新的片段实例。

**UPD2**：删除了不需要的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T09:05:55.083

解决了问题！

问题出在 Activity.onCreate 和选项卡创建机制中。

每次在状态更改后重新创建活动时 onCreate 都会添加一个新选项卡，因此

```
 if(savedInstanceState == null){ 
```

检查解决问题。这是完整的、正常工作的 OnCreate 方法：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    final ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    actionBar.setDisplayShowTitleEnabled(false);
    if(savedInstanceState == null){
        Tab tab = actionBar.newTab()
                .setText("TabLabel")
                .setTabListener(new TabListener<FileFragment>(
                        this, "TabTag", FileFragment.class));
        actionBar.addTab(tab);
    }
    Log.d("Activity.OnCreate", "Creating Activity");

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:58:30.697

您的活动将在方向更改时重新创建。

尝试将 android:configChanges="keyboardHidden|orientation" 添加到清单中的设置中。这将防止您的活动被重新创建。

# c# - 如何跟踪文件？

> ID：11477284
> 
> 赞同：1
> 
> 时间：2012-07-13T19:41:38.840
> 
> 标签：c#, filesystems

我的桌面上保存了一个 XML 文件。是否有任何可能的方法可以将文件的位置作为字符串跟踪，无论它在哪里，即使它被移动到不同的位置？如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:53:20.127

我假设您的意思是文件已从桌面移动到另一个目录，在这种情况下，请查看[`FileSystemWatcher`class](http://msdn.microsoft.com/en-us/library/x7t1d0ky.aspx)。如果我正确理解您的问题，这将允许您跟踪文件的移动。

你能举一个更具体的例子吗？

# jquery - 征求意见，jQuery：（练习）我想将 5x 单独的函数加入到 1x jQuery 函数中

> ID：11477285
> 
> 赞同：1
> 
> 时间：2012-07-13T19:41:43.043
> 
> 标签：jquery, function

代码摘录：http: [//jsfiddle.net/chrisloughnane/9AjfU/](http://jsfiddle.net/chrisloughnane/9AjfU/)

完整的代码将`.tabs`和所有其他元素放在一个 AJAX 填充的 jQuery UI 模式中，并且它工作得很好。

在这里，我有每个 jQuery **slideUp()**与您悬停的**选项卡**无关的**div和****slideDown()**与之相关的**div**。

 ********我想知道将我所有****单独的 jQueries 合并为一个**的最佳方法是什么。

 **该函数`all()`存在是因为我在 jQuery UI 模式对话框中有这个：

```
$('#your-dialog-id').dialog({
    open: function(event, ui) {
    $('.scroll-box').css({'max-height': bottomPosition-150, 'overflow-y': 'scroll'});
    all();}, //etc. 
```

在每个 jQuery`.on("mouseover",`中作为 div 存在，用于动态添加。**我还没有把它们拿走，**因为我计划完全重写。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:51:13.860

试试这个 - [http://jsfiddle.net/9AjfU/2/](http://jsfiddle.net/9AjfU/2/)

HTML

```
<ul>
    <li class='all'>all</li>
    <li class='musicselect'>music</li>
    <li class='sportselect'>sport</li>
    <li class='artsselect'>arts</li>
    <li class='generalselect'>general</li>
</ul> 
```

jQuery

```
$('.tabs li').on("mouseover", function(){
    $('.general, .music, .sport, .arts').slideUp();
    $('.' + $(this).attr("class").replace("select", "") ).stop(true, true).slideDown();
    $('.tabs li').css('color', '#fff');
    $(this).css('color', '#66CBFF');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T19:55:23.640

试试这个，你可以在`li`标签中添加 helper id 属性：

```
<ul>
    <li class='all'>all</li>
    <li id="music"    class='musicselect'>music</li>
    <li id="sport"    class='sportselect'>sport</li>
    <li id="arts"     class='artsselect'>arts</li>
    <li id="general"  class='generalselect'>general</li>
</ul> 
```

js：

```
$('ul li').on("mouseover", function(){
    $('div:not(.tabs)').slideUp();
    $('.' + this.id).stop(true, true).slideDown();
    $('.tabs li').css('color', '#fff'); // or $('.tabs li').addClass('white'); 
    $(this).css('color', '#66CBFF');
}) 
```

[演示](http://jsfiddle.net/9AjfU/4/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T20:31:09.050

这是我想出的完整的 JavaScript 代码。这样，您根本不必更改 HTML。

```
$('.all').css('color', '#66CBFF');

$('div.tabs').on('mouseover', 'li', function (e) {
    var $this = $(this),
        $notTabs = $('div').not('.tabs'),
        className = e.target.className,
        tabClass = className.replace(/select/, '');

    $notTabs.not(tabClass).slideUp();
    if ($this.hasClass('all')){
        $notTabs.slideDown();
    } else {
        $('.' + tabClass).stop(true, true).slideDown();
    }
    $('div.tabs li').css('color', '#fff');
    $this.css('color', '#66CBFF');
}); 
```

您可以在此处查看示例[http://jsfiddle.net/g2xg7/1/](http://jsfiddle.net/g2xg7/1/)

您应该记住的是，如果您必须向`li`选项卡元素添加类，这将不起作用。********

# ms-access - 向访问中的数字添加零（如有必要）

> ID：11477292
> 
> 赞同：1
> 
> 时间：2012-07-13T19:42:02.413
> 
> 标签：ms-access, ms-access-2007

我有一个包含员工编号的表格。它们需要有 5 个数字长 (#####)。但是，有时数据输入并不能完全做到这一点，只有 4 或 3 个。如何确保所有数字都是 5 位数长？

编辑：对不起，忘了提，数据输入是通过不同国家的银行进行的。我完全无法控制数据的呈现方式，我只需要在下载后处理它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:43:49.827

您可以在数据输入时使用[输入掩码](http://office.microsoft.com/en-us/access-help/control-data-entry-formats-with-input-masks-HA010096452.aspx)或事件进行检查：

```
EmpNo= Right("00000" & EmpNo,5) 
```

或者

```
EmpNo = Format([EmpNo],"00000") 
```

如果数据已经输入，您可以使用查询执行类似的操作。这要求该字段是文本。

```
UPDATE Table SET EmpNo = Format([EmpNo],"00000") 
```

选择

```
SELECT Format(EmpNo,"00000") FROM table 
```

# sql - 为包含访问连接的子查询提供别名

> ID：11477297
> 
> 赞同：2
> 
> 时间：2012-07-13T19:42:27.147
> 
> 标签：sql, ms-access, join, alias

我对 SQL server 的 T-SQL 更有经验，但我一直在 Access 中工作。我的问题是如何为具有自己的连接操作的子查询提供别名。我相信我在谈论嵌套连接操作。我知道我可以创建一个单独的查询，但我没有其他需要，并且希望尽可能保持对象列表干净。我当前的代码如下，我只显示 from 语句，因为它是错误的来源：

```
FROM 
(
  (
    tblPropertySpecs 
    INNER JOIN 
    (
      tblAssignedBuildingTypes 
      INNER JOIN qryAllPropertyIDs 
      ON tblAssignedBuildingTypes.PropertySpecID = qryAllPropertyIDs.PropertySpecID
    ) 
    ON (tblPropertySpecs.PropertySpecID = tblAssignedBuildingTypes.PropertySpecID) 
    AND (tblPropertySpecs.PropertySpecID = qryAllPropertyIDs.PropertySpecID)
  ) 
  INNER JOIN 
  (
    tblRefConstructionTypes 
    INNER JOIN tblAssignedConstructionTypes 
      ON tblRefConstructionTypes.ConstructionTypeID = tblAssignedConstructionTypes.ConstructionTypeID
  ) 
  ON tblAssignedBuildingTypes.AssignedBuildingTypeID = tblAssignedConstructionTypes.AssignedBuildingTypeID
) 
LEFT JOIN 
(
  tblRefFireSafetyDetectMethods 
  INNER JOIN tblAssignedFireSafetyDetections 
    ON tblRefFireSafetyDetectMethods.FireSafetyDetectedID = tblAssignedFireSafetyDetections.FireSafetyDetectedID
) [q1] 
ON tblAssignedBuildingTypes.AssignedBuildingTypeID = q1.AssignedBuildingTypeID
WHERE (((qryAllPropertyIDs.Status)="Active")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T09:00:43.337

由于您不再关心，我应该在处理此问题之前阅读评论：这似乎有效，尽管我不愿意创建您的表结构然后放入假数据来测试它。Access 愿意尝试在设计视图中显示这一点，以确认它认为 SQL 是可行的。

```
Select * FROM 
( select * from 
  (  select * from 
    tblPropertySpecs
    INNER JOIN 
    ( select * from 
      tblAssignedBuildingTypes 
      INNER JOIN qryAllPropertyIDs 
      ON tblAssignedBuildingTypes.PropertySpecID = qryAllPropertyIDs.PropertySpecID
    ) as a
    ON (tblPropertySpecs.PropertySpecID = a.PropertySpecID) 
    AND (tblPropertySpecs.PropertySpecID = a.PropertySpecID)
  ) 
  INNER JOIN 
  ( select * from 
    tblRefConstructionTypes 
    INNER JOIN tblAssignedConstructionTypes 
      ON tblRefConstructionTypes.ConstructionTypeID = tblAssignedConstructionTypes.ConstructionTypeID
  ) as b
  ON a.AssignedBuildingTypeID = b.AssignedBuildingTypeID
) as c
LEFT JOIN 
( select * from 
  tblRefFireSafetyDetectMethods 
  INNER JOIN tblAssignedFireSafetyDetections 
    ON tblRefFireSafetyDetectMethods.FireSafetyDetectedID = tblAssignedFireSafetyDetections.FireSafetyDetectedID
) as q1
ON c.AssignedBuildingTypeID = q1.AssignedBuildingTypeID
WHERE (((a.Status)="Active")); 
```

一般来说，关于复杂的 Access 查询有一些奇怪的地方。

*   如果不给子查询设置别名，则很难比较子查询中的值。你如何参考价值？它是子查询中特定字段的值。

*   挑剔时访问。有时您需要添加额外的 Select * from 语句以使其满意。

话虽如此，如果您要执行任何远程复杂的操作，则创建子查询并将其保存到数据库要容易得多。它不是那么漂亮，但它肯定更容易。此外，有时获取*Query is too complex*错误的查询将通过将其一部分保存为查询而不是使用子查询来工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T15:10:03.453

“*我知道我可以创建一个单独的查询，但我没有其他需要它，并且希望尽可能保持对象列表干净。* ”

您可以在已保存查询上设置隐藏属性，使其不会显示在数据库窗口 (Access 版本 < 2007) 或导航窗格 (Access >= 2007) 中。这将防止它弄乱您的查询列表，除非您将访问选项设置为显示隐藏对象。

您可以通过在查询名称前加上 来完成同样的事情，`USys`不同之处在于它不会与其他已保存的查询一起显示，除非您将访问选项设置为显示系统对象。

# javascript - 如何通过 id 从表中删除标签

> ID：11477302
> 
> 赞同：0
> 
> 时间：2012-07-13T19:42:46.793
> 
> 标签：javascript, jquery, html

我有这个由 php 循环生成的 HTML 表（包含多行）。我想删除`a`标签`td`中`td`标签 ID 等于 1 或其他东西的所有标签。

```
<table>
    <tr>
        <td>ID: 1</td>
        <td align="left" width='20%'>
            <div class='tools'>
                <a href='http://localhost/www/GestIEFP/index.php/admin/groups/index/delete/1' title='Remover Grupo' class="delete-row" ><span class='delete-icon'></span></a>
                <a href='http://localhost/www/GestIEFP/index.php/admin/groups/index/edit/1' title='Editar Grupo'><span class='edit-icon'></span></a>
                <div class='clear'></div>
            </div>
        </td>
    </tr>
</table> 
```

我正在尝试这样做：

```
$(function(){
    $('table').find("td:contains('ID: 1')")
    .each ( function () {
        $('a').remove();
    })
}) 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T19:44:59.327

```
$(function(){
    $('table').find("td:contains('ID: 1')")
    .each ( function () {
        $(this).next('td').find('a').remove();
    })
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T19:45:01.473

```
$("table td:contains('ID: 1')").closest("tr").find("a").remove(); 
```

[http://jsfiddle.net/Ajvra/4/](http://jsfiddle.net/Ajvra/4/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T19:55:41.913

你的问题并不完全清楚，但我认为这就是你想要的：

```
$("td:contains('ID: 1')").next().find('a').remove()​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T19:49:19.963

如果您可以控制 php 循环生成的 HTML，我建议您更改 HTML 而不是处理此结果。

具体来说，我建议添加`id`到`tr`元素，这对于之后使用 javascript 遍历 html 会更有效。

假设您将 html 更改为如下所示：`<tr id="item-1">`其中 1 是您的项目 id..

然后，使用 jQuery，您可以通过 访问它`$('#item-1')`，删除所有链接只需`$('#item-1 a').remove()`

# php - 在 Yii Rbac 扩展权限中为用户分配一个角色从管理员创建一个用户

> ID：11477305
> 
> 赞同：0
> 
> 时间：2012-07-13T19:43:06.090
> 
> 标签：php, yii, rights, rbac, yii-extensions

我已经按照大多数人的建议安装了权限，它很容易实现基于角色的访问控制。但我遇到了一个问题..

我需要为用户分配一个来自管理员的角色，他可以更改他们的角色..等等。

由于权限不会为我无法插入其中的表创建模型..因此没有文档，怎么做...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T04:20:53.583

首先，您需要系统中所有角色的下拉列表，供管理员选择..

```
<?php
if (Yii::app()->user->isSuperuser) {
       $all_roles=new RAuthItemDataProvider('roles', array( 
    'type'=>2,
    ));
      $data=$all_roles->fetchData();
?>
    <div>
        <label for="type_id">Type</label>
        <?php echo CHtml::dropDownList("Type",'',CHtml::listData($data,'name','name'));?    > 
    </div>
<?php
}
?> 
```

然后在后端，您需要根据管理员选择的类型值为用户分配一个角色......

```
if(Yii::app()->user->isSuperuser)
    $type=$_POST['Type'];
else
    $type='User';

$authorizer = Yii::app()->getModule("rights")->authorizer;
$authorizer->authManager->assign($type, $model->id); 
```

此代码检查注册是否来自管理员，然后设置管理员选择的角色，否则设置`User`为角色，即相同的代码将适用于`admin user create and normal signup`..

权利中还有其他一些没有预先记录的问题……我在我的博客中写了一些…… [我关于 Yii 权利的博客文章](http://octathorpeweb.com/blog/2012/03/06/yii-rights-extension-rbac-role-based-access-control/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T20:56:19.297

那实际上是 Yii 而不是权利

```
Yii::app()->authManager->assign($role, $userid); 
```

[http://www.yiiframework.com/doc/api/1.1/IAuthManager#assign-detail](http://www.yiiframework.com/doc/api/1.1/IAuthManager#assign-detail)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T20:34:08.030

我对 Rights 不太熟悉 - 我改用[rbam](http://www.yiiframework.com/extension/rbam)扩展。您是否尝试在[权利手册](http://yii-rights.googlecode.com/files/yii-rights-doc-1.2.0.pdf)中搜索您的答案？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T13:43:31.443

```
if ($user->save())
    Rights::assign('Authenticated', $user->id); 
```

*“已验证”可以替换为任何其他角色。*

# python - 使用 PyQT4 在窗口中显示文本

> ID：11477308
> 
> 赞同：0
> 
> 时间：2012-07-13T19:43:17.330
> 
> 标签：python, user-interface, pyqt4

我正在尝试使用 PyQt4 制作一个 GUI 界面。我希望能够从我的 python 程序发送文本并将其显示在 PyQt4 创建的窗口上。

我已经能够通过按钮输入数据，但我希望能够从我的 python 程序中编写它。我可以使用 self.setGeometry 命令创建一个窗口，并且我相当确定编写文本块所需的功能在 QTextEdit 模块中（不是 QLabel，因为那是用于文本的 1 行部分）。问题是要使用的函数太多了，而且我是 PyQT（实际上是一般的 Python）的新手，所以我还不太了解它的结构。任何正确方向的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:03:16.533

QLabel 用于显示文本，而 QTextEdit 主要用于获取用户的单行输入。例如，指示必须在输入区域中输入名称的表单字段，QLabel 用作*Name :* 并且 QTextEdit 是用户输入的位置。

但我认为您应该首先检查 PyQt（主要是 Qt）上的布局和放置方法，然后尝试手动创建简单的 GUI，这样您就可以轻松学习 Qt 的基础知识和所有其他出色的工具。

还有一个名为 Qt Designer 的工具，它非常方便地通过拖放工具为 PyQt ( & Qt) 程序创建 GUI。

# node.js - 在 Web Matrix 2 的新节点支持下使用流星？

> ID：11477312
> 
> 赞同：1
> 
> 时间：2012-07-13T19:43:34.527
> 
> 标签：node.js, webmatrix, meteor

在观看了令人敬畏的[Steve(n?) Sanderson 最近关于使用 Web Matrix 2 RC 来创建 node.js 应用程序](http://blog.stevensanderson.com/2012/07/09/node-js-development-with-webmatrix-2-and-express/)（以 Express 为例）的 3 部分系列之后，我开始想知道要能够做多少工作附加或修改他们在那里完成的工作（包括安装和运行节点和 iisnode）以使用流星应用程序？

从我使用过流星的那一点点来看，似乎唯一的主要脱节是 Web Matrix 中的一个项目可能需要至少知道流星文件和它安装的节点模块，因为流星是一个入口点流星应用程序而不是用户通常自己创建的 server.js（或任何文件）。

正在进行的此类项目是否已经有 Web Matrix（或其他 IDE）模板？有没有人使用 Web Matrix 进行流星项目？

它肯定会（至少，我认为）作为相关文件的“普通”编辑器工作，但它的工作方式与视频中的相同（通过运行应用程序启动应用程序，根据需要安装依赖项等） ) 也太好了。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:57:15.263

这当然可以做到——WebMatrix 有一个可扩展性模型，可以让您进行大部分所需的更改：

[http://extensions.webmatrix.com/](http://extensions.webmatrix.com/)

这里最大的问题是流星似乎还没有在 Windows 上运行。一旦有适用于 Windows 的受支持的流星构建，我们就会全力以赴将其纳入产品 :)

# javascript - 快速循环遍历 Javascript 数组

> ID：11477314
> 
> 赞同：1
> 
> 时间：2012-07-13T19:43:42.247
> 
> 标签：javascript

在我的 JSP 页面上，我有一个可以包含 60k+ 个对象的选择对象。我将这些 60k+ 对象存储到一个名为“masterList”的 javascript 数组中。我为用户提供了一个输入框来过滤列表。过滤基于“开始于..”的方法。有没有更快的方法来做到这一点？当用户在输入框中输入零个或 1 个字符时，我注意到性能问题。

这就是我的代码现在的样子。

```
 var numShown = 0;
    var listLength = masterList.length;     

    for(i = 0; i < listLength; i++){
        if(masterList[i].search(re) != -1){
            selectBox[numShown] = new Option(masterList[i], masterList[i]);
            numShown++;
        }

        // Stop when the number to show is reached and input present
        if(input.value != "" && numShown == maxToShow){
            break;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T19:52:37.260

每次通过循环创建的 Option() 对象是什么？这本身可能是性能问题的根源。您不太可能需要一直创建新对象，因此如果您可以添加该代码，它将有助于优化您的代码。

开始优化搜索时间的一个非常基本的方法是创建第二个对象，其中包含 masterList 中每个字母的起始索引。请注意，如果您的 masterList 数据在用户使用它时发生更改，则需要重新计算您的索引对象。

例如

```
var masterList = [aardvark, apple, balloon, blue, cat, dog];
var indexes = {'a':0, 'b':2, 'c':4, 'd':5}; 
```

每次用户输入时，取他们输入的第一个字符并在“indexes”对象中引用它的起始索引。然后从该索引开始你的 for 循环。还请记住，当您没有找到匹配项或将搜索扩展到字母匹配范围之外时，您*必须停止 for 循环。*基本上，当您的初始搜索条件不满足时，一直搜索到 masterList 的末尾是没有意义的。

其他注意事项：您需要在 for 循环中使用 var 声明 i 。不管你是否知道，你已经通过使用 listLength 缓存长度做了一件好事。否则，Javascript 将在每次迭代时重新计算 masterList.length。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T19:53:02.057

JQuery UI 为您提供[了一个很好的自动完成组件](http://jqueryui.com/demos/autocomplete/)，如果您将 60k 元素推送到客户端，人们会认为您存在设计缺陷。

该组件使您能够：

*   如果您仍想推送所有元素服务器端，只需从数组中自动完成；
*   构建一个更复杂的自动完成模式，它使用 web 服务来提供要显示的元素（考虑服务器端缓存，如下面的评论中建议的那样是个好主意）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T19:56:46.550

您的主要问题是您每次都在扫描整个列表。这是可以避免的，

一种方法是对列表进行排序。通过这样做，您可以确定搜索结束后何时可以停止扫描。

您还应该执行二进制搜索，而不是扫描。这可以在排序列表上相对容易地完成。

否则，您应该创建一个对象目录。就像是：

```
{
   aa: ['aardvark', 'aardwolf' ],
   ab: ['abstain'.....
   ...
} 
```

这减少了真正需要的扫描量

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T21:07:01.497

[**编辑**] 参见[这个 jsfiddle](http://jsfiddle.net/KooiInc/8Pw9B/)示例，使用 100.000 个元素的初始数组。

除了其他或多或少有用的建议：

第一个优化是对数组进行排序。其次，您可以通过将其值转换为现成的`Option`对象来准备大数组。第三，你有没有想过应用新的 Array`map`和`filter`方法？第四，使用 RegEx`test`代替`search`. 有了这些，您可以将过滤代码减少到：

```
//once, on page load
masterlist = masterlist
             .sort()
             .map(function(item){return new Option(item,item);});

//filtering
var optsfiltered = masterlist.filter(function(item){
     re.lastIndex = 0;
     return re.test(item.value);
    }).slice(0,maxToShow);

//replace selectBox options
selectBox.options.length = 0;
for (var i=0;i<optsfiltered.length;i++){
  selectBox[i] = optsfiltered[i];
} 
```

为了浏览器兼容性，您可能希望使用 shims 进行[映射](http://www.tutorialspoint.com/javascript/array_map.htm)和[过滤](http://www.tutorialspoint.com/javascript/array_filter.htm)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T20:00:03.493

性能的最佳选择是在输入后加载数据。也就是说，当用户键入“tes”时，服务器会发回一个 JSON 字符串，例如`["test", ...]`.

下一个最佳选择是按照@Dancrumb 的建议将事物分解成树。

如果你不能做这些，那么下一个最好的方法是确保你的数组是有序的，并对起点进行二进制搜索。Nicholas C. Zakas 有一个很好的例子：http: [//www.nczonline.net/blog/2009/09/01/computer-science-in-javascript-binary-search/](http://www.nczonline.net/blog/2009/09/01/computer-science-in-javascript-binary-search/)

这会让你`O(N)`从`O(lg(N))`

您必须稍微修改它以搜索以您的值开头而不是等于您的值的字符串，然后向后搜索第一个实例。

**更新**

刚看到你在用`.search`。这意味着您不能使用这些方法中的任何一种，并且被困在服务器上的昂贵搜索或客户端上的昂贵搜索中。考虑检查它是否以该值开头以便更快地搜索：[如何检查字符串“StartsWith”是否是另一个字符串？](https://stackoverflow.com/questions/646628/javascript-startswith)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-13T20:10:32.720

要以最快的方式遍历数组，请最好执行 for 循环，例如...

```
for(var z =listLength;--z;) { do what ever } 
```

因为这节省了对每个循环的评估（例如

如果我是你，我会使用不同的格式来保存它，以便快速搜索，比如[Trie](http://en.wikipedia.org/wiki/Trie)

如果你必须使用一个数组，至少将它们分成一个数组，a's，b's，c's 等等......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-13T22:06:47.413

好的，这是您遇到的最大问题以及为什么其他解决方案（包括我的其他解决方案）都不起作用：

```
if(masterList[i].search(re) != -1) 
```

**您正在对每个条目执行正则表达式搜索，直到您填充列表！**这不仅是一项昂贵的操作，还意味着您可能对单词中间的匹配感兴趣，这意味着您不能依赖每个人都提出的基于前缀的优化。

如果（A）你有很高的命中率并且（B）你真的非常想做，那么这是一种相当有效的方法`search`：

1.  当用户输入一个字母时，例如“a”，开始你的搜索。查找所有匹配项直至您的限制，例如 5\. 将条目保存在缓存中。例如：

    ```
    myCache['a'] = {
        entries: ['aaaa', 'aaab', 'aaac', 'aaad', 'aaae'],
        lastIndex: 5
    }; 
    ```

2.  当用户键入下一个字符时，现在字符串是“ab”，将字符串减去一个字符，得到“a”，查看`myCache["a"]`并检查值，你得到了与“aaab”匹配的结果，但是其他一切都失败了。你还需要4个。

3.  开始于`myCache["a"].lastIndex + 1`。继续搜索，直到找到匹配项。将结果存储在缓存中，您将获得：

    ```
    myCache['ab'] = {
        entries: ['aaab', 'aaba', 'aabb', 'aabc', 'aabd'],
        lastIndex: 29
    }; 
    ```

4.  随着字符串长度的增加，重复第 2 步和第 3 步。

# excel - 如何检查Excel窗口是否有来自vba的焦点

> ID：11477321
> 
> 赞同：3
> 
> 时间：2012-07-13T19:44:03.527
> 
> 标签：excel, excel-2007, vba

我有一些可能需要几分钟到一个小时才能运行的 excel vba 宏。在运行结束时，他们会进行一堆排序。问题是，如果 Excel 没有焦点（iow，我正在另一个窗口中做某事），它就有问题，我必须关闭 excel 并重新打开它。我不确定问题是什么，但我知道它在尝试运行 Sort.Apply 时会发生。无论如何我可以检查excel是否有焦点，如果没有，要么给它焦点，要么弹出一个复选框？

**更新：**这是代码。我刚刚测试了它，它失败了。错误是“对象'排序'的方法'应用'失败”，“运行时错误'-2147417848（80010108）'：”

```
 With rws.Sort
        .SortFields.Clear
        .SortFields.Add Key:=Range("A7:A" & i _
        ), SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:=xlSortNormal
        .SortFields.Add Key:=Range("C7:C" & i _
        ), SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:=xlSortNormal
        .SetRange Range("A6:K" & i)
        .Header = xlYes
        .MatchCase = False
        .Orientation = xlTopToBottom
        .SortMethod = xlPinYin
        .Apply
        .SortFields.Clear
    End With 
```

`i`是一个具有排序范围底部的变量，它是从工作表中的数字或排序之前获得的。

我不认为我每次都能得到它，但除了保持专注之外，我不知道如何防止它。我现在这样做的方式是有一个消息框提醒我它正在排序，但是我正在尝试让它完全自动化，所以我需要做其他事情。

**更新：**这是我更新的代码。

```
 With rws.Sort
        .SortFields.Clear
        .SortFields.Add Key:=rws.Range("A7:A" & i _
        ), SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:=xlSortNormal
        .SortFields.Add Key:=rws.Range("C7:C" & i _
        ), SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:=xlSortNormal
        .SetRange rws.Range("A6:K" & i)
        .Header = xlYes
        .MatchCase = False
        .Orientation = xlTopToBottom
        .SortMethod = xlPinYin
        .Apply
        .SortFields.Clear
    End With 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T20:16:33.933

您收到该错误是因为您没有正确指定您的范围。

`Range("A7:A" & i)`例如，在前面添加工作表名称

```
ws.Range("A7:A" & i) 
```

哪里`ws`是需要进行排序的相关工作表。这样你就不需要激活窗口:)

**编辑**

如果您打开了多个 Excel 窗口，并且如果您想对包含代码的 Excel 文件中的工作表进行排序，那么请记住也要完全限定工作表对象。例如

```
Dim ws As Worksheet

Set ws = ThisWorkbook.Sheets("Sheet1") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T17:15:09.587

我自己也遇到过几次，我不记得我是如何处理它的。尝试更改`.SetRange rws.Range("A6:K" & i)`并`.SetRange Range("A6:K" & i)`保留其余代码。我不确定您是否必须使用工作表对象再次限定 Range。如果这不能解决问题，我明天会检查我在工作中编写的一些代码。

**编辑：** @RBarryYoung - 你是对的，我在这方面走错了方向。我认为上面的建议不会奏效。

我唯一的其他建议是在单独的实例中运行工作簿。例如：

```
Dim objXL as New Excel.Application
With objxl
.Workbooks.Open("C:\Someworkbook.xlsx")
.Visible = True ''or false
''Your Code Here
.ThisWorkbook.SaveAs("C:\Someworkbook.xlsx")
.Quit
End With 
```

您将必须限定`With objXL`和之间的所有代码`End With`（`cells(1,1)`即将成为`.cells(1,1)`，`ThisWorkbook`将成为`.ThisWorkbook`）。如果您已经编写了很多代码，那会有点痛苦，但这应该会迫使 Excel 只查看您正在运行脚本的实例，从而防止失去焦点。

# c# - NSJSONSerialization 与 C# Rest 服务

> ID：11477322
> 
> 赞同：1
> 
> 时间：2012-07-13T19:44:07.837
> 
> 标签：c#, iphone, objective-c, json

所以我是一个完全的 C# 和网络东西的菜鸟，并试图弄清楚一些事情。有一些代码是这样说的：

```
[WebInvoke(UriTemplate = "People", Method = "GET", ResponseFormat = WebMessageFormat.Json)]
public string GetPeople() {
   Person results = DataAccess.ParsePeople();
   System.WebScrip.Serialization.JavaScriptSerializer oSerializer = oSerializer.MaxJsonLength = int.MaxValue;
   string sJSON = oSerializer.Serialize(results);
   return sJSON; 
```

}

当我输入此方法的 url 时，我的响应如下所示：

```
"{\"AddressesCollection\":[{\"Street\":\"1234 Temp Dr\",\"Zip\":94011},{\"Street\":\"56789 Nothing Dr\",\"Zip\":2222},\"ErrorMessage\":\"SUCCESS\"}" 
```

我试图在 iPad 端遵循本教程：[http ://www.raywenderlich.com/5492/working-with-json-in-ios-5](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)

查看他们用作示例的网站，JSON 输出如下所示：

{"paging":{"page":1,"total":4440,"page_size":20,"pages":222},"loans":[{"id":447290,"name":"Rosa" ,"description":{"languages":["es","en"]},"status":"fundraising","funded_amount":0,"basket_amount":0,"image":{"id": 1134583,"template_id":1},"activity":"Animal Sales","sector":"Agriculture","use":"购买稗鸡和饲料。","location":{"country_code":" PE","country":"Peru","town":"M\u00f3rrope - Lambayeque","geo":{"level":"country","pairs":"-10 -76","type" :"点"}},"partner_id":143,"posted_date":"2012-07-13T19:00:05Z","planned_expiration_date":"2012-08-12T19:00:05Z","loan_amount":400,"借款人计数":1},{"id":447292,"na

在 iPad 上，当我这样做时：

```
NSDictionary *fields = [NSJSONSerialization JSONObjectWithData:response options:kNilOptions error:&error]; 
```

或者

```
NSArray *fields = [NSJSONSerialization JSONObjectWithData:response options:kNilOptions error:&error]; 
```

两者都是空的。是不是正确的 JSON 的 C# 输出？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:56:38.613

`]`您的 JSON 字符串在某处缺少关闭。

假设您发布的字符串正是服务器返回的字符串，您可能还需要删除反斜杠以使其成为有效的 JSON。

```
NSString *responseString = [[[NSString alloc] initWithData:response] stringByReplacingOccurrencesOfString:@"\\" withString:@""];
NSDictionary *fields = [NSJSONSerialization JSONObjectWithData:responseString options:kNilOptions error:&error]; 
```

# java - 带有 GWT 和 Spring Security 的条件 UI？

> ID：11477325
> 
> 赞同：4
> 
> 时间：2012-07-13T19:44:27.193
> 
> 标签：java, spring, gwt, spring-security, gwt2

基于用户角色/权限使用 GWT 和 Spring Security 创建条件 UI 的最佳实践是什么？

我知道您不能依赖客户端安全性。我将在服务器端进行安全检查。条件 UI 真的只是为了外观。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-02T16:57:09.413

您将需要一项服务来从服务器（有）获取用户角色列表到客户端（没有）。在回调的 onSuccess 方法中，您将拥有类似于以下的代码：

```
if (roles.contains("role1")) {
    GWT.runAsync(new RunAsyncCallback() {
        public void onFailure(Throwable caught) {
            Window.alert("Code download failed");
        }

        public void onSuccess() {
            // code here if the user has role1
        }
    });
}
if (roles.contains("role2")) {
    GWT.runAsync(new RunAsyncCallback() {
        public void onFailure(Throwable caught) {
            Window.alert("Code download failed");
        }

        public void onSuccess() {
            // code here if the user has role2
        }
    });
}
// and so on 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T13:55:17.243

我们使用 GWT.runAsync 来分块用户可能不需要查看的代码部分。当需要加载 UI 时，我们只是检查他们需要什么，然后将其显示给他们。

我们已将大部分必要的业务逻辑抽象为我们为每个用户下载的设置，例如“showTeacherControls”、“showAdvisorControls”和“showStudentControls”。然后客户端可以检查这些标志来确定要显示的内容。

# delphi - TADO 记录集 XML 到 TClientDataSet XML 格式

> ID：11477326
> 
> 赞同：1
> 
> 时间：2012-07-13T19:44:28.167
> 
> 标签：delphi, tclientdataset

我将**TADO 记录集**保存到 **XML** 并尝试将其加载到**TClientDataSet**但收到有关错误 XML 格式的错误。

如何将 ADO XML 记录集格式转换为 TClientDataset 格式。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T20:17:36.063

使用的 XML 格式`TClientDataSet`与 ADO 使用的不同，为了将 XML ADO 格式转换为 TClientDataset 使用的有效 XML 文件，您有两个选择。

1) 使用 XSLT 转换，为此您需要 XSL 样式表和/或 XML 中的 XSD 模式，[在这里](https://stackoverflow.com/questions/492198/anyone-that-has-a-partial-xsd-that-describes-the-metadata-section-of-delphi-tcli)您可以找到有关 XSD 的一些提示。

2) 使用 ado 组件之一读取 XML ADO 文件，然后遍历记录并最终填充 TClientDataSet。

# spring.net - 如何在 Web 服务上使用 Spring Framework .NET 注入属性？

> ID：11477333
> 
> 赞同：0
> 
> 时间：2012-07-13T19:44:58.610
> 
> 标签：spring.net

我有一个 Web 服务，其属性希望由 Spring Framework .NET 注入。没有错误消息，但也没有注入。我究竟做错了什么？

这是我对 xml 文件的内容：

```
 <object type="MyCompany.MyProject.Business.MyClass">
    <property name="PaymentService" ref="PaymentService" />
  </object> 
```

这是我的代码：

```
namespace MyCompany.MyProject.Web
{
    public class MyService : WebService
    {
        public IPaymentService PaymentService { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:39:01.073

这就是我最终要做的。我们必须有一个应用程序上下文：

```
IPaymentService paymentService = (IPaymentService) SecurityHelper.GetAppContext().GetObject("PaymentService");

        public static IApplicationContext GetAppContext()
        {
            if (WebApplicationContext.Current == null) throw new Exception("Spring not initialized");
            IApplicationContext context = WebApplicationContext.Current;
            if (context == null) throw new Exception("Spring context not initialized");
            return context;
        } 
```

# tridion - 使用核心服务获取文件夹中的项目

> ID：11477339
> 
> 赞同：-3
> 
> 时间：2012-07-13T19:45:17.103
> 
> 标签：tridion, tridion-2011

使用 Tridion Core Service，如何获取文件夹中的所有项目？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-13T20:05:40.910

您需要一个过滤器（OrganizationalItemItemsFilterData）。

然后您需要调用 client.GetList(folderId, filter) 来获取该文件夹中的项目列表。

```
OrganizationalItemItemsFilterData filter = new OrganizationalItemItemsFilterData();
foreach (XElement element in client.GetListXml("tcm:3-640-2", filter).Nodes())
{
    Console.WriteLine(element.Attribute("ID").Value);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T08:38:05.767

A good example on how to use the Core Service which contains all sorts of read operations (like reading a single item and getting a list of items) is shown in the following eXtension on SDL Tridion World: [Item Selector Custom URL](http://sdltridionworld.com/community/2011_extensions/itemselector.aspx)

The download on SDL Tridion World comes with complete source but this can also be found directly on [Google Code](http://code.google.com/p/sdl-tridion-world/source/browse/#svn/Item%20Selector/trunk/SDLTridion.Examples.ItemSelector) where it is hosted as an open source solution. The actual Core Service code can be found in the `UserControls/TridionTreeView.ascx.cs` Class.

# java - 扩展一个基本的网络爬虫来过滤状态代码和 HTML

> ID：11477341
> 
> 赞同：0
> 
> 时间：2012-07-13T19:45:32.877
> 
> 标签：java, html, html-parsing, web-crawler, http-status-codes

我遵循了一个关于用 Java 编写基本网络爬虫的教程，并获得了一些具有基本功能的东西。

目前它只是从站点检索 HTML 并将其打印到控制台。我希望扩展它，以便它可以过滤掉 HTML 页面标题和 HTTP 状态代码等细节？

我找到了这个库： [http](http://htmlparser.sourceforge.net/) ://htmlparser.sourceforge.net/ ...我认为它可以为我完成这项工作，但我可以在不使用外部库的情况下完成它吗？

这是我到目前为止所拥有的：

```
public static void main(String[] args) {

    // String representing the URL
    String input = "";

    // Check if argument added at command line
    if (args.length >= 1) {
        input = args[0];
    }

    // If no argument at command line use default
    else {
        input = "http://www.my_site.com/";
        System.out.println("\nNo argument entered so default of " + input
                + " used: \n");
    }
    // input test URL and read from file input stream
    try {

        testURL = new URL(input);
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                testURL.openStream()));

        // String variable to hold the returned content
        String line = "";

        // print content to console until no new lines of content
        while ((line = reader.readLine()) != null) {
            System.out.println(line);
        }
    } catch (Exception e) {

        e.printStackTrace();
        System.out.println("Exception thrown");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T21:04:56.590

肯定有用于 HTTP 通信的工具。但是，如果您更喜欢自己实现一个 - 查看 java.net.HttpURLConnection。它将为您提供对 HTTP 通信的更细粒度的控制。这是给你的一个小样本：

```
public static void main(String[] args) throws IOException
{
  URL url = new URL("http://www.google.com");
  HttpURLConnection connection = (HttpURLConnection) url.openConnection();

  connection.setRequestMethod("GET");

  String resp = getResponseBody(connection);

  System.out.println("RESPONSE CODE: " + connection.getResponseCode());
  System.out.println(resp);
}

private static String getResponseBody(HttpURLConnection connection)
    throws IOException
{
  try
  {
    BufferedReader reader = new BufferedReader(new InputStreamReader(
        connection.getInputStream()));

    StringBuilder responseBody = new StringBuilder();
    String line = "";

    while ((line = reader.readLine()) != null)
    {
      responseBody.append(line + "\n");
    }

    reader.close();
    return responseBody.toString();
  }
  catch (IOException e)
  {
    e.printStackTrace();
    return "";
  }
} 
```

# android - Android：使用列表创建自定义对话框

> ID：11477347
> 
> 赞同：0
> 
> 时间：2012-07-13T19:46:18.393
> 
> 标签：android, customdialog

我正在尝试自定义一个对话框。它应该从数据库中获取字符串并填充一个列表。我的对话框：

```
public class CountriesDialog extends AlertDialog {

private Context context;
private Vector<String> countries;
private ListView listView;
private CountriesAdapter adapter;

public CountriesDialog(Context context, Vector<String> countries) {
    super(context);
    this.context = context;
    this.countries = countries;

}

@Override
protected void onCreate(Bundle savedInstanceState) {
    listView = new ListView(context);
    listView.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT, 1.0f));
    listView.setId(android.R.id.list);

    Log.e("WORKS", " "+(listView == null) + " asas");
    adapter = new CountriesAdapter(context, countries);
    listView.setAdapter(adapter);
    listView.setOnItemClickListener(adapter);

    setInverseBackgroundForced(true);
    setView(listView);
    setTitle("Select country");

    super.onCreate(savedInstanceState);
} 
```

}

我的适配器（为了自定义每一行）：

```
public class CountriesAdapter extends ArrayAdapter<String> implements OnItemClickListener {

private Vector<String> countries;
private Context context;

public CountriesAdapter(Context context, Vector<String> countries) {
    super(context, R.layout.countries_row);
    this.context = context;
    this.countries = countries;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View rowView = inflater.inflate(R.layout.countries_row, parent, false);
    ImageView imageView = (ImageView) rowView.findViewById(R.id.countries_list_single_image);
    TextView textView = (TextView) rowView.findViewById(R.id.countries_list_single_text);
    textView.setText(countries.get(position));

    DatabaseManager db = new DatabaseManager(context);
    db.connectForReading();
    String recource = db.getFLagName(countries.get(position));
    db.disconnect();

    int resId = context.getResources().getIdentifier(recource, "drawable", "com.emaborsa");
    imageView.setImageDrawable(context.getResources().getDrawable(resId));
    Log.e("WORKS", recource );
    return rowView;
}

public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    // TODO Auto-generated method stub

} 
```

}

该应用程序不会引发任何异常。对话框出现了……但为空。我只看到标题，没有行条目。我做了一些尝试，使用 Log.e 来查看代码是否运行。适配器的 getView 永远不会被调用，Dialog 的 onCreate 是。我认为问题出在对话框的以下两行中，但我不知道如何解决：

```
 listView.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT, 1.0f));
    listView.setId(android.R.id.list); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T20:01:29.870

看起来您的适配器不知道它有多少条目。尝试覆盖自定义列表适配器中的 getCount() 函数。或使用超类构造函数 super(context, R.layout.countries_row, countries);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T08:09:32.133

在尝试和尝试之后，我安排了它，我想分享知识。我从对话框中删除了以下几行：

```
 listView.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT, 1.0f));
 listView.setOnItemClickListener(adapter);
 setInverseBackgroundForced(true); 
```

在适配器中，我更改了超级构造函数，更改了传递的布局和项目：

```
super(context, R.layout.countries, countries); 
```

在适配器中，我还必须为每一行添加一个侦听器并处理事件......

# android - 如何存储要从 SDCard 存储和检索的对象的 Arraylist

> ID：11477350
> 
> 赞同：0
> 
> 时间：2012-07-13T19:46:31.047
> 
> 标签：android

我有像这样的对象的 ArrayList

```
ArrayList<DataCCHeading>CC1=new ArrayList<DataCCHeading>();
ArrayList<DataCCHeading>hd=new ArrayList<DataCCHeading>(result);

for (DataCCHeading dataCCHeading : hd)
{
    if(dataCCHeading.Ownername==TAG_CC1HeadingData)
    {
        CC1.add(dataCCHeading);
    }
} 
```

我想要做的是存储外部存储 SDCard，以便以后可以获取该数据，否则我必须从服务器再次请求它。我的问题是如何存储对象的 Arraylist 以从 SDCard 存储和检索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:00:20.270

你有几个选择：

Java序列化：只需让你的类实现Serializable，并编写适当的序列化和反序列化逻辑，你就可以将它们写入文件并读回。请参阅本教程：[http ://www.tutorialspoint.com/java/java_serialization.htm](http://www.tutorialspoint.com/java/java_serialization.htm)

JSON 序列化：使用库列表 GSON，您可以将对象序列化为 JSON 数组作为文本文件，将其保存到文件中。然后将其作为 JSON 字符串读回，并再次使用 GSON 库将其转换回对象的数组列表。

使用内置 SQLiteDatabase：将您的对象作为数据行存储在 sqlite 数据库中。类成员将作为列存储在表中。要将它们转换回数组，只需从表中检索所有行，一一构建对象并将它们添加到数组列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:52:23.433

您可能希望先将其序列化为某些内容（例如：使用 JYaml）。

然后您可以轻松地进行反序列化/序列化，并且非常节省空间。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-13T19:55:13.630

你这样做：

```
 //use getExternalStorageState to determine if there is an sd card
  if (Environment.getExternalStorageState() == null) {
                    directory = new File(Environment.getDataDirectory()
                            + "/RobotiumTestLog/");
                    photoDirectory = new File(Environment.getDataDirectory()
                            + "/Robotium-Screenshots/");
                    /*
                     * this checks to see if there are any previous test photo files
                     * if there are any photos, they are deleted for the sake of
                     * memory
                     */
                     //if the directory exists, delete files in directory
                    if (photoDirectory.exists()) {
                        File[] dirFiles = photoDirectory.listFiles();
                        if (dirFiles.length != 0) {
                            for (int ii = 0; ii <= dirFiles.length; ii++) {
                                dirFiles[ii].delete();
                            }
                        }
                    }
                    // if no directory exists, create new directory
                    if (!directory.exists()) {
                        directory.mkdir();
                    }

                    // if phone DOES have sd card
                } else if (Environment.getExternalStorageState() != null) {
                    // search for directory on SD card
                    directory = new File(Environment.getExternalStorageDirectory()
                            + "/RobotiumTestLog/");
                    photoDirectory = new File(
                            Environment.getExternalStorageDirectory()
                                    + "/Robotium-Screenshots/");
                    if (photoDirectory.exists()) {
                        File[] dirFiles = photoDirectory.listFiles();
                        if (dirFiles.length > 0) {
                            for (int ii = 0; ii < dirFiles.length; ii++) {
                                dirFiles[ii].delete();
                            }
                            dirFiles = null;
                        }
                    }
                    // if no directory exists, create new directory to store test
                    // results
                    if (!directory.exists()) {
                        directory.mkdir();
                    }
                } 
```

这是一个非常简单的过程。我在这里所做的是检查是否有 SD 卡，如果有，我搜索目录，如果没有目录，我创建一个。如果有目录并且有内容，我会删除它。你不必做所有这些。如果你喜欢，你可以使用`Environment.getExternalStorageDirectory()`. 这将获得 SD 卡。从那里你创建一个`bufferedWriter`并写。您还需要`<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />`在清单中添加。如果您有任何问题，请告诉我。

我希望这有帮助！

# php - PHP：将字符串拆分为字母和数字组件的最佳方法

> ID：11477357
> 
> 赞同：2
> 
> 时间：2012-07-13T19:47:08.330
> 
> 标签：php, string

我有几个格式的字符串

> ```
> AA11
> AAAAAA1111111
> AA1111111 
> ```

哪种是分隔字符串的字母和数字组件的最佳（最有效）方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T19:51:20.547

如果它们都是一系列 alpha，后跟一系列数字，没有非字母字符，那么[sscanf()](http://www.php.net/manual/en/function.sscanf.php)可能比 regexp 更有效

```
$example = 'AAA11111';
list($alpha,$numeric) = sscanf($example, "%[A-Z]%d");

var_dump($alpha);
var_dump($numeric); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T19:52:58.567

[`preg_split`](http://php.net/manual/en/function.preg-split.php)应该做的很好。

```
preg_split('/(\w+)/', $input, -1, PREG_SPLIT_DELIM_CAPTURE); 
```

preg 库在处理字符串方面出奇地高效，因此我认为它比您可以使用更原始的字符串函数手动编写的任何东西都更有效。但是做一个测试，看看你自己。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T19:53:33.640

您可以添加一项额外的检查，而不是立即使用 RegEx：

```
if (ctype_alpha($testcase)) {
   // Return the value it's only letters
} else if(ctype_digit($testcase)) {
   // Return the value it's only numbers
} else {
   //RegEx your string to split nums and alphas
} 
```

编辑：显然我的回答没有给出表现更好的证据，这就是为什么我做了一个产生以下结果的测试：

1.  preg_split 耗时 5.3319189548492 秒
2.  sscanf 耗时 3.4432129859924 秒

答案应该是`sscanf`

这是产生结果的代码：

```
$string = "AAAAAAAAAA111111111111111";
$count = 1000000;

function prSplit($string) {
    return preg_split( '/([A-Za-z]+)/', $string, -1, PREG_SPLIT_DELIM_CAPTURE | PREG_SPLIT_NO_EMPTY);
}

function sScanfTest($string) {
    return sscanf($string, "%[A-Z]%[0-9]");
}

function microtime_float()
{
    list($usec, $sec) = explode(" ", microtime());
    return ((float)$usec + (float)$sec);
}

$startTime1 = microtime_float();
for($i=0; $i<$count; ++$i) {
    prSplit($string);
}
$time1 = microtime_float() - $startTime1;
echo '1\. preg_split took '.$time1.' seconds<br />';

$startTime2 = microtime_float();
for($i=0; $i<$count; ++$i) {
    sScanfTest($string);
}
$time2 = microtime_float() - $startTime2;
echo '2\. sscanf took '.$time2.' seconds'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T19:55:05.380

这是一个使用的工作示例[`preg_split()`](http://php.net/preg_split)：

```
$strs = array( 'AA11', 'AAAAAA1111111', 'AA1111111');

foreach( $strs as $str) 
    foreach( preg_split( '/([A-Za-z]+)/', $str, -1, PREG_SPLIT_DELIM_CAPTURE | PREG_SPLIT_NO_EMPTY) as $temp)
        var_dump( $temp); 
```

这[输出](http://viper-7.com/rDBwAQ)：

```
string(2) "AA"
string(2) "11"
string(6) "AAAAAA"
string(7) "1111111"
string(2) "AA"
string(7) "1111111" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-15T15:24:57.150

这似乎可行，但是当您尝试传递“ **111111** ”之类的内容时，它不起作用。

在我的应用程序中，我期待几种情况，似乎在做的就是这个

```
$referenceNumber = "AAA12132";
$splited = preg_split('/(\d+)/', $referenceNumber, -1, PREG_SPLIT_DELIM_CAPTURE);
var_dump($splited); 
```

**注意**：

1.  得到一个包含 2 个元素的数组，这意味着第 0 个索引是**alpha**而第一个是**numerics**。
2.  获取只有 1 个元素的数组，意味着第 0 个元素是**数字**，没有字母。
3.  如果你得到超过 2 个数组项，那么你的字符串必须是这种格式“AAA1323SDC”

*因此，鉴于上述情况，您可以根据您的用例来使用它。*

干杯!

# winforms - VS 仅使用 x86 配置创建 winforms 应用程序，为什么？

> ID：11477358
> 
> 赞同：1
> 
> 时间：2012-07-13T19:47:11.780
> 
> 标签：winforms, visual-studio-2010, projects-and-solutions, anycpu

我在 2 台计算机上安装了 VS.NET 10.0.40219.1 SP1，当我创建一个新的 C# Winform 应用程序时，只使用 Properties/Build/Platform x86，目标让我选择 AnyCpu/x64，但不能在配置（但是，库工作正常）。

如果我尝试在项目文件中手动更改它，我会收到很多令人讨厌的错误。这是我的安装中的正常行为、错误还是问题？

PD：当我手动更改项目时，发生了这种情况：

> 警告 1 未为项目“ *** .csproj”设置 OutputPath 属性。请检查以确保您为此项目指定了有效的配置和平台组合。配置='调试'平台='x86'。如果其他项目试图遵循对此项目的项目到项目引用，此项目已卸载或未包含在解决方案中，并且引用项目未使用相同或等效项构建，则也可能出现此错误配置或平台。c:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets

当我重新打开项目时，所有引用都变得无效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T21:12:44.393

Visual Studio 仅使用 x86 平台创建 WinForms 项目是正常的。我不知道这是因为历史上 x86 是唯一的平台类型，还是因为 x86 是最常用的值或其他原因。

手动修改项目文件时出现问题也是正常的，尽量避免这样做。

在 C# 项目中创建另一个平台配置

1.  选择构建 | 配置管理器
2.  在 Active Solution Platform 字段中选择 <新建...>
3.  选择您想要的新类型
4.  点击确定

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T21:26:05.553

默认情况下，Visual Studio 用于创建 AnyCPU 应用程序。我认为 VS2005 和 VS2008 都这样做了，尽管他们可能已经为 VS2008 更改了它。事情是这样的：很多 AnyCPU 应用程序最终在 64 位系统上被破坏，因为它们是依赖于 32 位库构建的。如果您尝试在 64 位系统上运行具有 32 位依赖性的 AnyCPU 应用程序，您会得到一个 64 位进程，一旦它尝试加载您的 32 位 dll，就会崩溃。

为了解决这个问题，将默认值更改为使用 x86 选项。如果你想使用 AnyCPU，你现在必须为它设置环境。

# ajax - 如何通过 AJAX 提交我的远程更新表单？

> ID：11477359
> 
> 赞同：0
> 
> 时间：2012-07-13T19:47:17.400
> 
> 标签：ajax, ruby-on-rails-3, simple-form

我有一个可以编辑记录的表单，我希望它在提交时使用 ajax，

```
= simple_form_for(@lesson, :html => {"data-type" => :html, :id=>'lesson_form'}, :remote=>true) do |lesson_form|

= lesson_form.button :submit, 'Update' 
```

但是，在`lessons`控制器中，虽然我在上面的表单选项中将 remote 设置为 true，但评估值为 0 `update`；不评估为真。`request.xhr?``request.xhr?`

那么，我在这里缺少什么？更新我的记录时如何使用ajax？将 remote 设置为 true 还不够吗？请问有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T11:38:08.753

你可以通过很多方式做到这一点。他们之中有一些是：

如果使用 GET 传递表单数据，您可以使用 jquery 的 ajax() 并发送请求。这样，您就可以使用显式的 ajax 技巧，即，将帧内作为黑白形式的通信媒介并提交。您也可以使用它来验证表单，例如：检查用户名是否存在。在那个场景中，您将有 javascript 与您的 iframe 进行交互，并且该 iframe 将对存在的用户名具有某些规则或标记，反之亦然。

希望这可以帮助。如果您愿意，我很高兴为您提供一些我很久以前写的示例代码。

# encryption - 如何将加密密钥分成几部分？

> ID：11477364
> 
> 赞同：5
> 
> 时间：2012-07-13T19:47:22.900
> 
> 标签：encryption, key, aes, xor, key-management

我有一个 128 位加密密钥，我想将它分成三个部分，当异或一起复制密钥时。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T19:56:33.117

随机选择另外两个 128 位值（random_1 和 random_2），然后计算出方程式，看看它是如何工作的：

`key ^ random_1 = xor_1`

现在以同样的方式拆分 xor_1：

`xor_1 ^ random_2 = xor_2`

翻转这个等式，我们得到：

`xor_1 = xor_2 ^ random_2`

现在代入第一个方程：

`key = random_1 ^ xor_2 ^ random_2`

所以你的代码就可以了`xor = key ^ random_1 ^ random_2`，你分发除了密钥之外的所有东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T19:53:52.637

只需对其中的盐值进行异或，然后对它们进行异或以反转它。

如果key' = key ^ salt1 ^ salt2，那么key = key' ^ salt1 ^ salt2。

实现起来很简单，但逆向工程也很简单。

你想用这个保护什么，你想保护谁？

# iphone - 在 iPad 中一次轻按两个按钮

> ID：11477370
> 
> 赞同：1
> 
> 时间：2012-07-13T19:47:50.443
> 
> 标签：iphone, ios, ipad

我有一个有两个按钮的弹出窗口。如何避免用户用两根手指同时点击两个不同按钮的场景？有没有一种方法可以指定一次只允许手势？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-13T20:08:53.593

您还可以`-setExclusiveTouch`在每个按钮上使用，以便一次只注册一个。您也不需要在视图上禁用多点触控。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T19:49:52.013

不要启用多点触控，那么操作系统一次只会报告 1 次触控。在 Interface Builder 中编辑视图时，有一个选项“Multiple Touch”。如果包含两个按钮的父视图禁用了此功能，则不会一次报告两次点击

# php - 使用php在mysql中检索单行数据

> ID：11477371
> 
> 赞同：1
> 
> 时间：2012-07-13T19:47:56.613
> 
> 标签：php, mysql

我创建了一个网站，该网站具有多个登录名和唯一信息。我想从一个用户那里检索数据。例如，我的用户名是 qwert，密码是 1234，我想将他的唯一信息检索到数据库中。[我在w3schools](http://www.w3schools.com/php/php_mysql_select.asp)中使用了示例代码，它选择了所有数据，但我要做的就是从仅登录的用户那里检索数据。

谁能帮我解决这个问题？任何帮助都感激不尽。

```
mysql_select_db("xone_login", $con);

$result = mysql_query("SELECT * FROM admin WHERE username = '$myusername' ");

echo "<table border='1'>
<tr>
<th>Firstname</th>
<th>Lastname</th>
</tr>";

while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['overtime'] . "</td>";
  echo "<td>" . $row['daily_rate'] . "</td>";
  echo "</tr>";
  }
echo "</table>";

mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:50:54.497

将该教程中的 SQL 代码替换为以下代码（并调整表和列名称）：

```
SELECT * FROM USERS where name ='qwert' and pass = MD5('1234') 
```

并注意清理变量以避免 SQL 注入攻击！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-13T19:59:06.770

```
You need to use a where clause
Also you will need to specify limits on the query to restrict the result set to 1 record

$select = "SELECT * FROM usertable WHERE username = '$user' LIMIT 0, 1";
$query = mysql_query($select) or die(mysql_error());
$result = mysql_fetch_assoc($query);

//Prints the array
print_r($result); 
```

# php - 图书馆创作策略

> ID：11477372
> 
> 赞同：2
> 
> 时间：2012-07-13T19:48:07.167
> 
> 标签：php, oop, structure

我花了大约 11 个月的时间为 PHP 编写一个非常广泛的支持 HTML5 的视频部署库。我的客户付钱给我写这个库，以换取使用它的实现的许可证，我目前也在写。我基本上一直在保存一个*巨大*的PHP 文件（此时为 60Kb），其中包含我所有的面向对象的类。我建立的系统在每一页上都需要这个文件，我想这会被皱眉。不要误会我的意思，我不是 PHP 新手。我已经编写 PHP 大约两年了，并且几乎使用了它所有最高级的功能。然而，我仍然想改进，我相信我的创作策略对我来说是一个弱点。

我喜欢 jQuery，因为它的创作简单。它使编写可重复使用的代码比 PHP 更容易，至少对我来说是这样。在整个过程中，我一直在广泛使用 jQuery 阅读[本文档](http://docs.jquery.com/Plugins/Authoring)后，我对被认为是“最佳实践”的方法感到非常满意。任何人都可以回忆起处理 PHP 的类似资源吗？

我在这里的目的是学习编写 PHP 的更好实践，而不会失去低级能力并跳到像 CodeIgniter 这样的另一个库。我只是不喜欢基于另一个库编写库的想法。我想我的系统会留下更大的足迹并使用更多的资源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T20:20:40.567

首先，您不能将库与语言进行比较。苹果和橙子。不幸的是，在 PHP 方面没有单一的终极知识来源。我只能推荐一些我觉得非常有用的阅读材料。

*   [PHP-FIG](http://www.php-fig.org/faq/) - 由 PHP 框架互操作性小组（[Github 链接](https://github.com/php-fig/fig-standards)）制定的一组标准；
*   [自动加载](http://php.net/manual/en/language.oop5.autoload.php)——摆脱所有这些`include`结构；
*   [Composer](https://github.com/composer/composer) - 跟踪项目和库的本地依赖关系的包管理器；
*   [PHPUnit](http://www.phpunit.de) - PHP 的单元测试框架；
*   [phpDocumentor](http://www.phpdoc.org/) - 使用注释中的[标签](http://www.phpdoc.org/docs/latest/for-users/list-of-tags.html)清楚地记录代码的各个方面。我个人认为 Fabien Potencier 的[Sami](https://github.com/fabpot/Sami)更适合用于生成自动文档，但这只是个人喜好问题；

此外，如果您想通过示例学习，请查看这些开源 PHP 库，就以下最佳实践而言，我认为它们编写得相当好：

*   [Symfony2](https://github.com/symfony/symfony/) - 全栈 Web 框架；
*   [Doctrine2](https://github.com/doctrine/doctrine2) - PHP 的对象关系映射器；
*   [KnpMenu](https://github.com/KnpLabs/KnpMenu) - 一个菜单构建库；

如果您有资源，我强烈建议您分解那个大文件：将每个类放入自己的单独文件中。用单元测试覆盖库，以确保你的代码能完成它应该做的事情。

**编辑**

[@lsmith 在](https://twitter.com/lsmith)推特上发布了一个名为[PHP: The Right Way](http://www.phptherightway.com)的网站。这可能是您可以获得的关于最佳实践的最接近的单个文档。

# .net - 展开预构建事件的参数中的文件列表

> ID：11477374
> 
> 赞同：1
> 
> 时间：2012-07-13T19:48:11.050
> 
> 标签：.net, visual-studio, command-line, pre-build-event, microsoft-ajax-minifier

我正在尝试运行一个预构建事件，它将目录中的所有 JavaScript 文件传递​​给 MS 的 Ajax Minifier。不幸的是，该工具将文件名作为单独的参数排除在外（它无法解析“*.js”）。我有很多 JavaScript 文件，我真的不想在预构建事件窗口中单独列出它们。

这是我当前的预构建命令：

```
"$(SolutionDir)Tools\AjaxMin.exe" "$(ProjectDir)*.js" -out  "$(ProjectDir)Generated\Generated.js" -clobber 
```

有谁知道正确的语法（或者甚至有一个）来使它做你期望它做的事情？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T21:08:54.737

Prebuild 事件被传递给 shell，这就是为什么您可以将如下所示的 cmd 脚本设置为 pre-build 事件：

```
::Force variables to be evaluated at execution time
SETLOCAL ENABLEDELAYEDEXPANSION

SET parameter=
SET proj=$(ProjectDir)*.js

::Concatenate all the file names (surrounded by quotes) into a single string
FOR %%F IN ("%proj%") DO (SET parameter=!parameter! "%%F")

::Execute command
"$(SolutionDir)Tools\AjaxMin.exe" %parameter% -out  "$(ProjectDir)Generated\Generated.js" -clobber 
```

在这里，我们将参数变量中的所有 js 文件名累加起来，并将其传递给 ajaxmin.exe。

# java - 玩转 Java 属性文件

> ID：11477381
> 
> 赞同：1
> 
> 时间：2012-07-13T19:48:47.727
> 
> 标签：java, properties

我正在研究一个需要以下逻辑的类：

```
If properties file @ "c:\somepath" (m_writePath) exists 
   if there is a value for the key offset 
      getProperty(offset)
   else
      write offset value
else 
   create property file ("c:/somepath")
   write offset value 
```

本质上这是我当前的设置：

```
public class myclass {

    /**
    * The properties file to store offset value.
    */
    private static Properties m_offsetProperty = new Properties();

    /**
    * Process stuff.
    */       
    private void processStuff() {
       File tmpFile = new File(m_writePath + "lastOffset.properties");

       if (tmpFile.exists()) {
          m_offsetProperty.load(new FileInputStream(m_writePath +    "lastOffset.properties"));
          m_offset = Long.getLong(m_offsetProperty.getProperty("offset"));     
       }
       else {
          createOffsetFile();
          m_offset = 0;
          setOffsetProperty();
       }
    }

    /**
    * Create properties file writePath/offset.properties.
    */
    private void createOffsetFile() {
       m_offsetProperty.setProperty("offset", String.valueOf(m_offset));
       File propFile = new File(m_writePath + "lastOffset.properties");
       FileWriter fw = null;
       fw = new FileWriter(propFile);
       m_offsetProperty.store(fw, null);
    }

    /**
    * Write offset to properties file writePath/offset.properties.
    */
    private void setOffsetProperty() {
       m_offsetProperty.setProperty("offset", String.valueOf(m_offset));
       m_offsetProperty.store(new FileOutputStream(m_writePath + "lastOffset.properties"), null);
    }
} 
```

正在创建和写入属性文件，但由于某种原因，我无法读取偏移键的值。此外，属性文件仅包含 1 个键/值对。为了简单起见，我取出了异常处理和许多其他方法。有任何想法吗？

# smalltalk - Smalltalk 档案去哪儿了？

> ID：11477382
> 
> 赞同：10
> 
> 时间：2012-07-13T19:49:16.657
> 
> 标签：smalltalk

我是一位资深的 Smalltalk 程序员（早在上世纪 90 年代初期），在那个年代，所有 Smalltalk “开源”（这个词还没有创造出来），都可以在 Manchester Smalltalk 档案中找到。后来这被移到了[UIUC Smalltalk Archive](http://st-www.cs.illinois.edu/archive.html)。我今天试图在那里找到我的旧条目，但存档不再可用。有谁知道如何检索旧内容？有没有存档 Smalltalk 档案的地方？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T19:30:50.220

[http://ftp.gwdg.de/pub/languages/smalltalk/st.cs.uiuc.edu/Smalltalk/](http://ftp.gwdg.de/pub/languages/smalltalk/st.cs.uiuc.edu/Smalltalk/)包含大量来自存档的镜像代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T08:46:53.797

[http://forum.world.st/](http://forum.world.st/)

[http://forum.world.st/Smalltalk-f1294792.topics.html](http://forum.world.st/Smalltalk-f1294792.topics.html)

是您的帖子和研究的好链接。我听说过你的档案，但也不知道他们发生了什么。

# c++ - 谷歌日志条目是否由互斥锁包装？

> ID：11477384
> 
> 赞同：6
> 
> 时间：2012-07-13T19:49:20.940
> 
> 标签：c++, google-code, glog

使用 Google 的日志库 (glog-0.3.2)，发送到日志的各个条目是否由互斥锁包装？也就是说，其他条目会破坏当前保存的条目吗？

我想这可以转化为：glog 线程安全吗？

如果记录器设置为回显到控制台和文件，没有我自己的互斥锁，有没有办法阻止`printf`/`cout`破坏输出`LOG()`？我怀疑不是但想知道是否有一种方法可以锁定可以包装多个语句的互斥锁。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-09T00:15:06.087

不幸的是，来自 glog 文档的“原始日志”信息具有误导性。raw_logging 是 GLOG 中一种功能减少的日志记录机制，对于容易出现死锁或其他可能的重入情况的情况很有用。

如果您查看 logging.h 和 logging.c，您会发现 glog 中正常的、功能齐全的日志记录也是线程安全的。这是通过以下方式实现的：

*   glog 竭尽全力为每个 LOG 行构造一个新的、唯一的日志对象，以防止两个不同线程之间的输出交错（如 fwrite() 或 write() 可能发生的情况）
*   glog 在将完成的日志行排队到日志接收器时采用互斥锁。
*   glog 要求日志接收器是线程安全的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T19:54:48.503

是的，glog 可以是线程安全的。

> ### 原始记录
> 
> 头文件可用于线程安全的日志记录，它不分配任何内存或获取任何锁。因此，这个头文件中定义的宏可以被底层内存分配和同步代码使用。详情请查看 src/glog/raw_logging.h.in。

[http://google-glog.googlecode.com/svn/trunk/doc/glog.html](http://google-glog.googlecode.com/svn/trunk/doc/glog.html)

# ruby-on-rails-3 - RnR：在静态页面上疯狂更改页面标题

> ID：11477385
> 
> 赞同：0
> 
> 时间：2012-07-13T19:49:23.843
> 
> 标签：ruby-on-rails-3, spree

所以我有六个静态页面，例如关于我们、安全性、常见问题解答等。如何更改这些页面上的默认页面标题？我已经尝试了一些来自 Rails 的技巧，比如 helper 类、@page.title 等，但它似乎不起作用。

我看到了这个问题：[https://groups.google.com/forum/?fromgroups#!searchin/spree-user/title](https://groups.google.com/forum/?fromgroups#!searchin/spree-user/title) $20/spree-user/I6NSK7hG1Kk/i0kfcqiDIUYJ 但这也没有用，我得到未定义的方法` title=' 对于 nil:NilClass。

然后我发现了这个： http: [//guides.spreecommerce.com/release_notes_0_9_0.html](http://guides.spreecommerce.com/release_notes_0_9_0.html)

也不行。

看起来应该很简单...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T20:58:29.497

看起来很简单，Google Groups 的解决方案是：<% @controller.title = 'The title you want to use on the page you'd like to use it' %>

然而： <% controller.title = '你想在页面上使用的标题' %>

工作得很好；所以它很接近只是一个讨厌的@

# javascript - 使用 javascript 我将如何将其更改为在页面加载时显示？

> ID：11477388
> 
> 赞同：0
> 
> 时间：2012-07-13T19:49:36.333
> 
> 标签：javascript, css

我要更改的 html 属性是：

```
<li class="wp-has-submenu wp-not-current-submenu menu-top menu-icon-tools" id="menu-tools" style="display: none; "> 
```

谢谢，

我知道它不详细，但我想不出我需要说什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:53:55.217

```
 $(document).ready(function(){ $("#menu-tools").show();  }); 
```

`$("#menu-tools").hide();`并且`$("#menu-tools").show();`应该做到这一点，而不是使用内联 css。这需要 jQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T19:52:40.470

由于它有一个 ID，请继续使用 ID 引用它`document.getElementById`：

```
onload = function() {
    document.getElementById('menu-tools').style.display = 'block';
}; 
```

# javascript - 猫鼬在保存时填充

> ID：11477391
> 
> 赞同：1
> 
> 时间：2012-07-13T19:49:42.553
> 
> 标签：javascript, mongodb, mongoose

有没有办法保存模型并在保存的模型中填充类似 Dbref 的字段。

我目前在做

```
dbrefobj.findbyid(id).run(
    function (err, dbrefobj) {
        topobj.save.... 
```

我想做类似的事情

```
topobj.save.populate(dbrefobj) 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T14:39:21.633

您可以在架构中定义`'save'`中间件，以将您自己的处理插入到保存文档的行为中。在您的情况下，您将查找引用的文档并将您需要的任何内容拉入正在保存的文档中。[请参阅此处](http://mongoosejs.com/docs/middleware.html)的 Mongoose 中间件文档。

# html - 带有缩略图问题的敏捷轮播

> ID：11477396
> 
> 赞同：0
> 
> 时间：2012-07-13T19:50:03.967
> 
> 标签：html, json, jquery, carousel

我在我的网站上使用[Agile Carousel](http://www.agilecarousel.com/)插件来制作几个不同的幻灯片。第一个在顶部；我在那里没有问题。我的问题在于底部（在“[关于](http://www.opanitch.com/anatomidesign/clients/munchies/index.html#about)”部分），我正在尝试创建一个带有相应缩略图的轮播。我有它，以便它创建缩略图并滚动浏览它们，但是一旦到达可见元素的末尾，它就不会将幻灯片推进到下一组缩略图。

我的问题是：如何让缩略图随着幻灯片的进行而轮播？提前致谢！

以下是一些代码片段：

```
//Bottom Slideshow instantiation
$.getJSON("php/bottom/bottomShow_data.php", function(data)
{
    $(document).ready(function()
    {
        $("#bottomSlide").agile_carousel({      
            // required settings
            carousel_data: data,
            carousel_outer_height: 525,
            carousel_height: 450,
            slide_height: 450,
            carousel_outer_width: 713,
            slide_width: 713,
            // end required settings

            transition_type: "fade",
            transition_time: 600,
            timer: 3000,
            continuous_scrolling: true,
            control_set_1: "previous_button,pause_button,next_button",
            control_set_2: "content_buttons"
        });
    });
}); 
```

JSON数据片段：

```
[
    { "content": "<div class='slide_inner'><img class='photo' src='../images/slideshow/bottom/1.jpg' alt='UGM 1' /></div>",
  "content_button": "<div class='thumb'><img  src='../images/slideshow/bottom/1.jpg' alt='bike is nice'></div><p>Agile Carousel Place Holder</p>" },
    { "content": "<div class='slide_inner'><img class='photo' src='images/slideshow/bottom/2.jpg' alt='UGM 2' /></div>",
  "content_button": "<div class='thumb'><img src='images/slideshow/bottom/2.jpg' alt='bike is nice'></div><p>Agile Carousel Place Holder</p>" },
....
14 objects total
] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:27:28.563

您需要修改 Javascript (agile_carousel.alpha.js)，可能有更好的方法（即更有效）来做到这一点，但这应该可行。

修改add_selected_class函数，添加如下代码：

```
var n = 0;

for ( n=1; n<=number_of_slides; n++) {
obj.find(".content_button_" + n).css("top", '0');
obj.find(".content_button_" + n).removeClass("thumb_show").addClass("thumb_hide");  
} 
```

这是一种粗略的方法，但所做的只是隐藏所有缩略图按钮 对于 thumb_show / thumb_hide 类，您可以在 CSS 中使用类似以下内容：

```
.thumb_hide { display:none; position:relative; top: -50000px; left:0; z-index:0; opacity:0;}
.thumb_show { display:block; position:relative; top:0; left:0; z-index:20; opacity:1; } 
```

add_selected_class 函数的其余代码仅根据当前显示的幻灯片确定要显示哪一组 5 个缩略图。

```
var $thumb_set_length = 5;
var $button_row_pos = 0;

$button_container_offset_top = Math.round(obj.find(".content_buttons_container").offset().top);                 
$current_button_offset_top = Math.round(obj.find(".content_button_" + slide_num).offset().top);

//Depending on the layout of your page and top padding/margin added to parent elements you will need to fiddle about with the values below to calculate where the buttons should be positioned.
$adjuster = Math.round( obj.find(".content_button_" + slide_num).height() / 2 );

$button_row_pos = ( $button_container_offset_top - $current_button_offset_top) * -1 - $adjuster + 26;

//if slide_num % 5 == 1 than this is the 1st of the 5 slides                

if ( (slide_num % $thumb_set_length) == 1 ) {

obj.find(".content_button_" + slide_num).removeClass("thumb_hide").addClass("thumb_show");

obj.find(".content_button_" + (slide_num+1)).removeClass("thumb_hide").addClass("thumb_show");

obj.find(".content_button_" + (slide_num+2)).removeClass("thumb_hide").addClass("thumb_show");

obj.find(".content_button_" + (slide_num+3)).removeClass("thumb_hide").addClass("thumb_show");

obj.find(".content_button_" + (slide_num+4)).removeClass("thumb_hide").addClass("thumb_show");

obj.find(".content_button_" + slide_num).css("top", $button_row_pos + "px");

obj.find(".content_button_" + (slide_num+1)).css("top", $button_row_pos + "px");

obj.find(".content_button_" + (slide_num+2)).css("top", $button_row_pos + "px");

obj.find(".content_button_" + (slide_num+3)).css("top", $button_row_pos + "px");

obj.find(".content_button_" + (slide_num+4)).css("top", $button_row_pos + "px");                    

}

//if slide_num % 5 == 2 than this is the 2nd of the 5 slides                

if ( (slide_num % $thumb_set_length) == 2) {

obj.find(".content_button_" + (slide_num-1)).removeClass("thumb_hide").addClass("thumb_show");

obj.find(".content_button_" + slide_num).removeClass("thumb_hide").addClass("thumb_show");

obj.find(".content_button_" + (slide_num+1)).removeClass("thumb_hide").addClass("thumb_show");

obj.find(".content_button_" + (slide_num+2)).removeClass("thumb_hide").addClass("thumb_show");

obj.find(".content_button_" + (slide_num+3)).removeClass("thumb_hide").addClass("thumb_show");

obj.find(".content_button_" + (slide_num-1)).css("top", $button_row_pos + "px");

obj.find(".content_button_" + slide_num).css("top", $button_row_pos + "px");

obj.find(".content_button_" + (slide_num+1)).css("top", $button_row_pos + "px");

obj.find(".content_button_" + (slide_num+2)).css("top", $button_row_pos + "px");

obj.find(".content_button_" + (slide_num+3)).css("top", $button_row_pos + "px");

}

//if slide_num % 5 == 3 than this is the 3rd of the 5 slides                

if ( (slide_num % $thumb_set_length) == 3 ) {

obj.find(".content_button_" + (slide_num-2)).removeClass("thumb_hide").addClass("thumb_show");

obj.find(".content_button_" + (slide_num-1)).removeClass("thumb_hide").addClass("thumb_show");

obj.find(".content_button_" + slide_num).removeClass("thumb_hide").addClass("thumb_show");

obj.find(".content_button_" + (slide_num+1)).removeClass("thumb_hide").addClass("thumb_show");

obj.find(".content_button_" + (slide_num+2)).removeClass("thumb_hide").addClass("thumb_show");

obj.find(".content_button_" + (slide_num-2)).css("top", $button_row_pos + "px");

obj.find(".content_button_" + (slide_num-1)).css("top", $button_row_pos + "px");

obj.find(".content_button_" + slide_num).css("top", $button_row_pos + "px");

obj.find(".content_button_" + (slide_num+1)).css("top", $button_row_pos + "px");

obj.find(".content_button_" + (slide_num+2)).css("top", $button_row_pos + "px");

}

//if slide_num % 5 == 4 than this is the 4th of the 5 slides                

if ( (slide_num % $thumb_set_length) == 4 ) {

obj.find(".content_button_" + (slide_num-3)).removeClass("thumb_hide").addClass("thumb_show");

obj.find(".content_button_" + (slide_num-2)).removeClass("thumb_hide").addClass("thumb_show");

obj.find(".content_button_" + (slide_num-1)).removeClass("thumb_hide").addClass("thumb_show");

obj.find(".content_button_" + slide_num).removeClass("thumb_hide").addClass("thumb_show");

obj.find(".content_button_" + (slide_num+1)).removeClass("thumb_hide").addClass("thumb_show");

obj.find(".content_button_" + (slide_num-3)).css("top", $button_row_pos + "px");

obj.find(".content_button_" + (slide_num-2)).css("top", $button_row_pos + "px");

obj.find(".content_button_" + (slide_num-1)).css("top", $button_row_pos + "px");

obj.find(".content_button_" + slide_num).css("top", $button_row_pos + "px");

obj.find(".content_button_" + (slide_num+1)).css("top", $button_row_pos + "px");

}

//if slide_num % 5 == 0 than this is the last of the 5 slides               

if ( (slide_num % $thumb_set_length) == 0 ) {

obj.find(".content_button_" + (slide_num-4)).removeClass("thumb_hide").addClass("thumb_show");

obj.find(".content_button_" + (slide_num-3)).removeClass("thumb_hide").addClass("thumb_show");

obj.find(".content_button_" + (slide_num-2)).removeClass("thumb_hide").addClass("thumb_show");

obj.find(".content_button_" + (slide_num-1)).removeClass("thumb_hide").addClass("thumb_show");

obj.find(".content_button_" + slide_num).removeClass("thumb_hide").addClass("thumb_show");
obj.find(".content_button_" + (slide_num-4)).css("top", $button_row_pos + "px");                    

obj.find(".content_button_" + (slide_num-3)).css("top", $button_row_pos + "px");                    

obj.find(".content_button_" + (slide_num-2)).css("top", $button_row_pos + "px");                    

obj.find(".content_button_" + (slide_num-1)).css("top", $button_row_pos + "px");                 

obj.find(".content_button_" + slide_num).css("top", $button_row_pos + "px");
} 
```

# xml-serialization - 在 ApiController 中使用基类作为返回类型

> ID：11477398
> 
> 赞同：2
> 
> 时间：2012-07-13T19:50:19.530
> 
> 标签：xml-serialization, asp.net-web-api

使用 ASP.NET WebApi 4 RC，是否可以将 ApiController 的返回类型作为基类并实际返回派生类的实例？现在尝试执行此操作会在返回 xml 时导致内部服务器错误 (500)。使用此方法返回 json 可以正常工作。

```
public class Base
{
    public int ID { get; set; }
}
public class Derived : Base
{
    public string Message { get; set; }
}
public class ValuesController : ApiController
{
    public IEnumerable<Base> Get()
    {
        return new Derived[] { 
            new Derived(){ Message="test"},
            new Derived(){ Message="another"}
        };
    }
} 
```

似乎 XML 序列化是引发错误的原因，但我只能看到通用的 500 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:54:53.777

是的，您需要使用 knowntype 序列化提示：

```
[System.Runtime.Serialization.KnownType(typeof(Derived))]
public class Base
{
    public int ID { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T13:10:36.660

您可能想以编程方式进行

```
 private static Type[] GetKnownType()
    {
        var assemblies = AppDomain.CurrentDomain.GetAssemblies();
        var knownTypes = new List<Type>();
        foreach (var assembly in assemblies)
        {
            knownTypes.AddRange(assembly.GetTypes().Where(x => x.BaseType == typeof (BaseResponse)).ToArray());
        }
        return knownTypes.ToArray();
    } 
```

请记住您的子类必须有一个默认构造函数，否则您将收到运行时序列化错误。

# ios - Xcode IOS如何在多个视图中从plist加载数据

> ID：11477399
> 
> 赞同：0
> 
> 时间：2012-07-13T19:50:23.383
> 
> 标签：ios, xcode, load, plist

有什么东西让我死了，我有我的应用程序，它通过一个单一的视图控制器创建并写入 docs 文件夹中的 plist 就好了。我的 plist 将包含不同类别的分组数据。例如联系电子邮件地址和联系手机号码。

对此，我有一个 EmailViewController 和一个 SmsViewController。每个将各自的数组作为 emailarray 和 smsarray 写入 plist。

第三个 ViewControler 应该从两个数组中读取数据并在应用程序中使用它。那是我的问题。使用与电子邮件和 SMS 视图控制器完全相同的加载方法不起作用。

在这种情况下，我在每个视图控制器上都有相同的加载方法。我觉得必须有一种更好的方法让这么多视图访问同一个 plist。我应该从特殊的“数据控制器”加载它还是加载到应用程序 delegate.m 中？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:21:01.753

所以，让我直截了当。您正在将 plist 文件成功加载/保存到 EmailViewController 和 SmsViewController 中的 Documents 文件夹中，但是您有另一个视图不适用（使用相同的代码）？正如蒂姆所说，示例代码会有所帮助。

使用 plist 时，我喜欢创建一个可以充当通用 plist 加载器的类。在您的程序中，当您需要加载 plist 时，您可以声明 plist 加载器类 (plistLoader.m/h) 的新对象实例，然后传递您要加载和/或保存的文件的名称，然后让它执行所有的工作。这样做绝对可以帮助您避免重复代码。

# html - 水平滚动，适合内容宽度

> ID：11477406
> 
> 赞同：9
> 
> 时间：2012-07-13T19:51:07.477
> 
> 标签：html, css, horizontal-scrolling

我有一个具有以下结构的页面：

`div.wrapper`> `div.content`> `div.item`+`div.item`

包装器的宽度为 320 像素，而两者的宽度`div.item`约为 600 像素。我需要将这两个显示为内联（现在它们是`display: inline-block;`，并且包装器的内容水平滚动。当我将`div.content`宽度设置为 时`auto`，它需要包装器的宽度（320px）。将宽度设置为 200% 显然会获得水平滚动工作，但我如何获得`div.content`其内容的宽度以允许水平滚动？

注意：包装器设置为固定的宽度和高度，`overflow-y: hidden`并`overflow-x: scroll`设置了，因为我*不*想要垂直滚动——只需要水平滚动。

JSFiddle 举个例子：http: [//jsfiddle.net/kh5k7/](http://jsfiddle.net/kh5k7/)

如您所见，红色 div 将垂直堆叠。将宽度更改`.content`为 200%（或某个值）将导致水平滚动正常发生。`.content`不过，我希望这能自动完成，因为我不知道div中会有多少元素。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-13T20:07:56.590

使用[`white-space:nowrap;`](http://www.w3.org/TR/CSS21/text.html#propdef-word-spacing)在`.content`

```
.content{
   width: auto;
   white-space:nowrap; 
} 
```

[http://jsfiddle.net/kh5k7/1/](http://jsfiddle.net/kh5k7/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-28T16:17:43.380

你可以有这样的东西：

```
.wrapper {
    overflow-x: auto;
    overflow-y: hidden;
}

.content {
    width: auto;
    white-space: nowrap;
}

.item {
    display: inline-block;
} 
```

# f# - 有没有办法在线进行多值比较？

> ID：11477407
> 
> 赞同：2
> 
> 时间：2012-07-13T19:51:11.910
> 
> 标签：f#, comparison

甚至问这个我都觉得很傻，因为它看起来很琐碎，但我的大脑让我失望了。如果我有以下情况：

```
let a, b, c = 1, 1, 1 
```

是否有一种优雅的方法来确定 a、b 和 c 是否都具有相同的值。就像是：

```
let result = (a = b = c) 
```

这失败了，因为表达式`a = b`返回 true 并且下一个表达式导致`true = c`并抱怨它期待 int，而不是 bool。我唯一能想到的是：

```
a = b && a = c && b = c 
```

当我想添加更多变量时，这将不起作用。

我真正想做的是：

```
let same (x: string * string * string) =
    match x with
    | (a, a, a) -> true
    | _ -> false 
```

我希望我可以将所有元素匹配到一个元素中，如果它们不同，它将继续前进，但它在匹配中的第二个元素上表示它已经被绑定。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T20:38:33.070

要检查列表中的每个值是否相同：

```
let rec same = function
  | x::y::_ when x <> y -> false
  | _::xs -> same xs
  | [] -> true 
```

用法

```
let a, b, c = 1, 1, 1
same [a; b; c] //true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T20:11:31.893

```
let same (a, b, c) = a = b && b = c 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T08:34:18.947

我会尝试使用 forall 函数来确定所有数字是否相同。

```
let list = [a; b; c;];;
List.forall (fun n -> n = a) list;;
val it : bool = true 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-19T00:40:21.957

此解决方案准确生成所需的语法。令我惊讶的是，速度相当快。此外，这似乎是使用单子的一个很好的例子，也称为[计算表达式](http://msdn.microsoft.com/en-us/library/dd233182.aspx)。

```
// Generic
let inline mOp1<'a> op sample x = op sample x, sample
let inline mOp2<'a> op1 op2 (b, sample) x = op1 b (op2 sample x), sample

// Implementation for (=) and (&&)
let (==) = mOp1 (=)
let (&=) = mOp2 (&&) (=)

// Use
let ret1 = a == b &= c &= d &= e |> fst 
```

### 这个怎么运作

该方法是一个非常简化的*State monad*。monadic 类型是 的元组`(bool, 'T)`。第一个组件是正在进行的计算的布尔值，第二个是要比较的样本值。

`(==)`将初始化 monad，类似于`Delay`运算符。
`(&=)`用于所有后续比较。它类似于`Bind`运算符。
我们不需要`Return`，因为`fst`会很好用。
`mOp1`并且`mOp2`是对逻辑操作的抽象。这些允许定义您自己的运算符。以下是`or-equal`和的示例`and-greater-than`：

```
let (|=) = mOp2 (||) (=)
let (.>) = mOp1 (>)
let (&>) = mOp2 (&&) (>)
// Use
let ret2 = a == b |= c |= d |= e |> fst // if any of b,c,d,e equals to a
let ret3 = 5 .> 3 &> 4 |> fst // true: 5>3 && 5>4
let ret4 = 5 .> 3 &> 8 &> 4 |> fst // false 
```

### 表现

我真的很喜欢@ildjarn 的漂亮解决方案，但是构建`List`速度很慢，所以我的主要目标是性能。
运行 8 次比较链，1000 万次：

*   04972ms`a=b && a=с && ...`
*   `List`基于23138ms
*   12367ms 一元

# java - gson：使用复合键反序列化 json

> ID：11477408
> 
> 赞同：2
> 
> 时间：2012-07-13T19:51:12.370
> 
> 标签：java, json, serialization, map, gson

我想将这种对象与 json 一起使用：

```
class Message{
    int code;
    String user;
    Map<List<String>, List<String>> profile;
} 
```

似乎 json 无法将 Object 键作为数组处理，所以我需要像这样传输它们：

```
{
"code": 1,
"user": "John",
"profile": {
    "type,1": ["tester"],
    "lang,2": ["fr", "it", "en", "sp"],
    "rate,4": ["10", "1000"],
    "date,5": ["134118329", "1341973211"]

    }
} 
```

或者

```
{
"code": 1,
"user": "John",
"profile": {
    "type": [1,"tester"],
    "lang": [2,"fr", "it", "en", "sp"],
    "rate": [4,"10", "1000"],
    "date": [5,"134118329", "1341973211"]

    }
} 
```

第一个 json 可能更简单，即使它依赖于硬字符串分隔符，

因此，对于第一个，我似乎必须编写这个巨大的适配器：

```
private static class MyAdapter implements JsonSerializer<Map<List<String>, List<String>>>,
        JsonDeserializer<Map<List<String>, List<String>>> {

    @Override   
    public JsonElement serialize(Map<List<String>, List<String>> m,
            Type type, JsonSerializationContext context) {

        JsonObject j = new JsonObject();
        for (Entry<List<String>, List<String>> e : m.entrySet() ){
            JsonArray jj=new JsonArray();
            for (String s : e.getValue()){
                jj.add(new JsonPrimitive(s));
            }
            j.add(e.getKey().get(0)+","+e.getKey().get(1), jj);
        }
        return j;
    }

    @Override
    public Map<List<String>, List<String>> deserialize(JsonElement json, Type type,
            JsonDeserializationContext arg2) throws JsonParseException {

        Map<List<String>, List<String>> m = new HashMap<List<String>, List<String>>();

        JsonObject jObject = json.getAsJsonObject();
        for (Entry<String, JsonElement> e : jObject.entrySet() ){
            List<String> key = new ArrayList<String>();
            List<String> value = new ArrayList<String>();
            for (String s : e.getKey().split(",") ){
                key.add(s);
            }
            for (JsonElement jj : e.getValue().getAsJsonArray() ){
                value.add(jj.getAsString());
            }
            m.put(key, value);
        }
        return m;
    }
} 
```

...

```
GsonBuilder g = new GsonBuilder();
    g.registerTypeAdapter(Map.class, new MyAdapter());
    Gson gson = g.create(); 
```

有更快的方法吗？我猜是的，思路就是把key拆分成一个Map组合key，因为key的每一部分都有重要的意义

谢谢，很抱歉编辑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:23:59.760

> 对于配置文件值，不幸的是我不知道是否有比 Object 更好的

它看起来像`List<String>`or`String[]`会很自然，对非列表格式的单值条目进行特殊处理。

不幸的是，反序列化有时是一个列表，有时是一个对象的 JSON 结构的问题在 SO 上反复出现。幸运的是，也有[解决方案](https://stackoverflow.com/questions/6223023/parsing-json-with-gson-object-sometimes-contains-list-sometimes-contains-object/6225906#6225906)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T20:03:23.783

这行不通。

[根据规范的](http://json.org/)对象声明语法：

> 对象是一组无序的名称/值对。对象以 {（左大括号）开始，以 }（右大括号）结束。每个名称后跟 :（冒号），名称/值对用 ,（逗号）分隔。

这个：

```
{
    ["type", 1]: "tester",
    ["lang", 2]: ["fr", "it", "en", "sp"],
    ["rate", 4]: ["10", "1000"],
    ["date", 5]: ["134118329", "1341973211"]

} 
```

无效，因此您无法使用 Gson 读取导致以下异常：com.google.gson.JsonSyntaxException：`java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING`

json: 前面的名称`aRequest =`也无效。

# objective-c - 没有背景着色的 UIActionSheet

> ID：11477410
> 
> 赞同：1
> 
> 时间：2012-07-13T19:51:14.463
> 
> 标签：objective-c, ios, uiview, transparent, uiactionsheet

所以我读过[这篇文章](https://stackoverflow.com/questions/1181272/iphone-development-how-to-create-colored-or-translucent-background-for-uiaction)

但它似乎没有解决使背景不着色为半透明的问题。我希望带有按钮的菜单后面的内容清晰可见。这甚至可能吗？

这是我目前拥有的

```
WPSActionSheet *actionSheet = [[WPSActionSheet alloc] initWithCompletion:completion];
  [actionSheet setTitle:@""];
  [actionSheet addButtonWithTitle:@"Take Photo"];
  [actionSheet addButtonWithTitle:@"Choose from Library"];
  [actionSheet addButtonWithTitle:@"Skip This Step"];
  [actionSheet setCancelButtonIndex:2];
  [actionSheet showInView:[self view]]; 
```

这表明了这一点

![在此处输入图像描述](../Images/379f1e46868871fa64e3c15576bee1c6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:55:03.603

`UIActionSheet`将始终显示“有色背景”。没有办法解决这个问题。但是，您可以`UIActionSheet`使用`UIView`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:24:21.727

只需使用委托方法设置 UIActionSheet 的 alpha 和 opaque 属性 -

```
(void)willPresentActionSheet:(UIActionSheet *)actionSheet 
```

它会随心所欲地显示出来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T14:36:48.857

如果要使 UIActionSheet 的背景透明，可以将其子类化并更改 layoutSubviews

```
- (void)layoutSubviews
{
    [super layoutSubviews];

    UIImage* image;
    CGSize size = self.frame.size;
    UIGraphicsBeginImageContext(size);
    image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    [[self layer] setContents:(id)image.CGImage];
} 
```

要添加一些自定义背景，只需将以下代码添加到 layoutSubviews：

```
CGRect frame = self.frame;
frame.origin = CGPointZero;

UIImageView* bg = [[UIImageView alloc] initWithFrame:frame];
bg.image = [UIImage imageNamed@"YOUR/IMAGE/NAME"];

[self addSubview:bg];
[self sendSubviewToBack:bg]; 
```

您也可以在委托方法中执行所有这些操作

```
- (void)willPresentActionSheet:(UIActionSheet *)actionSheet 
```

只需将**self**替换为**actionSheet**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-22T15:03:10.140

我遇到了同样的问题并找到了解决方法。的`UIActionSheet`超级视图包含一个`UIView`用于着色的。因此，您可以通过将此视图图层的不透明度设置为 0 来移除着色。

```
- (void)willPresentActionSheet:(UIActionSheet *)actionSheet {
    NSArray *subviews = actionSheet.superview.subviews;
    UIView *tintView = [subviews objectAtIndex:0];
    [tintView.layer setOpacity:0.0];
} 
```

# javascript - html5 拖放 - items.webkitGetAsEntry() 方法不存在

> ID：11477412
> 
> 赞同：1
> 
> 时间：2012-07-13T19:51:41.107
> 
> 标签：javascript, html

您好我正在尝试使用 chrome 将文件拖放到我的文件系统中，但我在控制台中收到以下错误：

```
var dnd = new DnDFileController('body', function(files, e) {
    var items = e.dataTransfer.items;
    for (var i = 0, item; item = items[i]; ++i) {
      traverseFileTree(item.webkitGetAsEntry());
**Uncaught TypeError: Object #<DataTransferItem> has no method 'webkitGetAsEntry'**
    }
  }); 
```

我还尝试像这样在循环中添加方法：

```
for (var i = 0, item; item = items[i].webkitGetAsEntry();; ++i) {
      traverseFileTree(item);
    } 
```

错误是这样的：

```
Uncaught TypeError: Object #<DataTransferItem> has no method 'webkitGetAsEntry' app.js:513
(anonymous function) app.js:513
DnDFileController.drop dnd.js:27 
```

DNDFileController.drop 代码如下：

```
this.drop = function(e) {
    e.stopPropagation();
    e.preventDefault();

    el_.classList.remove('dropping');

    onDropCallback(e.dataTransfer.files, e);
  }; 
```

但我得到同样的错误，有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T21:05:21.693

大概你正在使用这个 DnDFileController - [http://html5-demos.appspot.com/static/filesystem/filer.js/demos/js/dnd.js](http://html5-demos.appspot.com/static/filesystem/filer.js/demos/js/dnd.js)。因此，首先，我已将您的代码置于可测试状态：

```
function DnDFileController(selector, onDropCallback) {
  var el_ = document.querySelector(selector);

  this.dragenter = function(e) {
    e.stopPropagation();
    e.preventDefault();
    el_.classList.add('dropping');
  };

  this.dragover = function(e) {
    e.stopPropagation();
    e.preventDefault();
  };

  this.dragleave = function(e) {
    e.stopPropagation();
    e.preventDefault();
    //el_.classList.remove('dropping');
  };

  this.drop = function(e) {
    e.stopPropagation();
    e.preventDefault();

    el_.classList.remove('dropping');
    onDropCallback(e.dataTransfer.files, e);
  };

  el_.addEventListener('dragenter', this.dragenter, false);
  el_.addEventListener('dragover', this.dragover, false);
  el_.addEventListener('dragleave', this.dragleave, false);
  el_.addEventListener('drop', this.drop, false);
};

var dnd = new DnDFileController('body', function(files, e) {
    var items = e.dataTransfer.items;
    for (var i = 0, item; item = items[i]; ++i) {
      if (item.kind == 'file') {
          debugger
          console.log(item.webkitGetAsEntry());
      }
    }
  }); 
```

现在，在调试器中检查项目的状态，在 Chrome 20.0.1132.27 beta 中，它只公开当前规范 [1] 中的那些属性和方法 - 即 item.kind、item.type、item.getAsString(回调）和 item.getAsFile()。DataTransferItem.webkitGetAsEntry() 未公开。据我所知[2]，Chrome 不应该公开他们提议的 webkitGetAsEntry，并且在仅打开一周后[3]，他们将其开关重新关闭。所以目前，除非您使用任何标志来启用它，否则它不会启用[4]。

一旦启用它，它看起来就像它的预期一样，如 getAsString，与回调一起使用，而不仅仅是作为 getter。参见 [5] 中的示例：

```
 var items = e.dataTransfer.items;
    for (var i = 0; i < items.length; ++i) {
      if (items[i].kind == 'file') {
          items[i].webkitGetAsEntry(function(entry) {
          displayEntry(entry.name + (entry.isDirectory ? ' [dir]' : ''));
          ...
        });
      }
    } 
```

请注意，他们还将其包装在 file[i] 实际上是一个文件的保护性检查中；这在我上面的测试代码中，但在您的代码中缺失。

但是，如果您只是想访问文件，是否有理由要使用这种实验方法？这是一个非常简单的循环，使用 FileReader 读取文件，然后对其进行 Blob 化，然后将其存储在本地 FileSystem 中......所有这些方法都远没有实验性和新的。

参考：

[1] [http://www.whatwg.org/specs/web-apps/current-work/multipage/dnd.html#the-datatransferitem-interface](http://www.whatwg.org/specs/web-apps/current-work/multipage/dnd.html#the-datatransferitem-interface)

[2] [http://trac.webkit.org/changeset/118507](http://trac.webkit.org/changeset/118507)

[3] [http://code.google.com/p/chromium/issues/detail?id=129702](http://code.google.com/p/chromium/issues/detail?id=129702)

[4] [https://bugs.webkit.org/show_bug.cgi?id=87457](https://bugs.webkit.org/show_bug.cgi?id=87457)

[5] [http://lists.w3.org/Archives/Public/public-whatwg-archive/2012Apr/0078.html](http://lists.w3.org/Archives/Public/public-whatwg-archive/2012Apr/0078.html)

==================================================== ====

2012 年 7 月 26 日更新：

此方法现在已删除标志要求，并可在 2012 年 7 月 23 日发布的 Chrome 21 中普遍使用。但是，对于这里描述的用例，上面的实现要简单得多，并且更适合需求，因为不需要同时读取整个目录。

# javascript - 为什么 Javascript 的 regex.exec() 并不总是返回相同的值？

> ID：11477415
> 
> 赞同：140
> 
> 时间：2012-07-13T19:51:45.077
> 
> 标签：javascript, regex

在 Chrome 或 Firebug 控制台中：

```
reg = /ab/g
str = "abc"
reg.exec(str)
   ==> ["ab"]
reg.exec(str)
   ==> null
reg.exec(str)
   ==> ["ab"]
reg.exec(str)
   ==> null 
```

exec 在某种程度上是有状态的，并且取决于它上次返回的内容吗？或者这只是一个错误？我不能让它一直发生。例如，如果上面的“str”是“abc abc”，它就不会发生。

* * *

## 回答 #1

> 赞同：259
> 
> 时间：2012-07-13T19:53:49.950

JavaScript`RegExp`对象是有状态的。

当正则表达式是全局的时，如果您在同一个正则表达式对象上调用方法，它将从最后一个匹配结束后的索引开始。

当找不到更多匹配项时，索引将重置为`0`自动。

* * *

要手动重置它，请设置`lastIndex`属性。

```
reg.lastIndex = 0; 
```

* * *

这可能是一个非常有用的功能。如果需要，您可以在字符串中的任何点开始评估，或者如果在循环中，您可以在所需数量的匹配后停止它。

* * *

这是在循环中使用正则表达式的典型方法的演示。它利用了在没有更多匹配项时通过执行分配作为循环条件`exec`返回的事实。`null`

```
var re = /foo_(\d+)/g,
    str = "text foo_123 more text foo_456 foo_789 end text",
    match,
    results = [];

while (match = re.exec(str))
    results.push(+match[1]); 
```

***演示：http:*** [//jsfiddle.net/pPW8Y/](http://jsfiddle.net/pPW8Y/)

* * *

如果您不喜欢分配的位置，可以重新设计循环，例如这样......

```
var re = /foo_(\d+)/g,
    str = "text foo_123 more text foo_456 foo_789 end text",
    match,
    results = [];

do {
    match = re.exec(str);
    if (match)
        results.push(+match[1]);
} while (match); 
```

***演示：http:*** [//jsfiddle.net/pPW8Y/1/](http://jsfiddle.net/pPW8Y/1/)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-07-13T19:55:10.323

来自[MDN 文档](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/exec)：

> 如果您的正则表达式使用“g”标志，您可以多次使用 exec 方法在同一字符串中查找连续匹配项。当您这样做时，搜索将从正则表达式的 lastIndex 属性指定的 str 的子字符串开始（测试也将推进 lastIndex 属性）。

由于您使用的是`g`标志，`exec`因此从最后一个匹配的字符串继续直到它到达末尾（返回`null`），然后重新开始。

* * *

就个人而言，我更喜欢反过来`str.match(reg)`

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-01-14T11:52:54.387

### Multiple Matches

If your regex need the `g` flag (global match), you will need to reset the index (position of the last match) by using the `lastIndex` property.

> reg.lastIndex = 0;

This is due to the fact that `exec()` will [stop on each occurence so you can run again on the remaining part](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/exec#Description). This behavior also exists with `test()`) :

> If your regular expression uses the "g" flag, you can use the exec method multiple times to find successive matches in the same string. When you do so, the search starts at the substring of str specified by the regular expression's lastIndex property (test will also advance the lastIndex property)

### Single Match

When there is only one possible match, you can simply rewrite you regex by *omitting the `g` flag*, as the [index will be automatically reset to `0`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/lastIndex).

# haskell - CSS 与 Happstack

> ID：11477418
> 
> 赞同：3
> 
> 时间：2012-07-13T19:51:53.657
> 
> 标签：haskell, happstack

我想知道在 Happstack 网页中包含 css 的最佳方法是什么。我试过谷歌，没有运气，所以我想我会在这里问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T21:42:04.387

对我来说最简单的方法是从静态文件夹中为它们提供服务。例如添加一个处理程序，如：

```
dir "static" $ serveDirectory DisableBrowsing [] "www" 
```

替换`"www"`为您希望 happstack 使用的目录。有关 serveDirectory 的更多信息，[请参阅 Haddock 文档](http://hackage.haskell.org/packages/archive/happstack-server/6.1.3/doc/html/Happstack-Server-FileServe.html#g:1)。

然后我有一个`www/css`文件夹，我所有的 css 都在其中。我使用 Blaze 模板，所以我直接链接到它们：

```
H.link ! A.rel "stylesheet" ! A.type_ "text/css" ! A.href "/static/css/foo.css" 
```

# jquery - 415 不支持的媒体类型从 $.ajax 调用 WCF 服务

> ID：11477420
> 
> 赞同：9
> 
> 时间：2012-07-13T19:52:02.037
> 
> 标签：jquery, asp.net, ajax, wcf, c#-4.0

我正在尝试从 ASPX 页面调用 WCF Web 服务，如下所示：

```
var payload = {
    applicationKey: 40868578
};

$.ajax({
    url: "/Services/AjaxSupportService.svc/ReNotify",
    type: "POST",
    data: JSON.stringify(payload),
    contentType: "application/json",
    dataType: "json"
}); 
```

这样做会导致 Web 服务器返回错误`415 Unsupported Media Type`。我确定这是 WCF 服务的配置问题，其定义如下：

```
[OperationContract]
[WebInvoke(Method = "POST", RequestFormat = WebMessageFormat.Json)]
void ReNotify(int applicationKey); 
```

文件中没有条目，`web.config`因此假定服务使用默认配置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T13:11:25.797

我不是这方面的专家，实际上我遇到了同样的问题（出于另一个原因）。但是，似乎 WCF 服务本身并不支持 AJAX，因此您必须在 web.config 文件中包含以下代码才能启用它。

```
<system.serviceModel>
    <behaviors>
        <endpointBehaviors>
            <behavior name="NAMESPACE.AjaxAspNetAjaxBehavior">
                <enableWebScript />
            </behavior>
        </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"
        multipleSiteBindingsEnabled="true" />
    <services>
        <service name="NAMESPACE.SERVICECLASS">
            <endpoint address="" behaviorConfiguration="NAMESPACE.AjaxAspNetAjaxBehavior"
                binding="webHttpBinding" contract="NAMESPACE.SERVICECLASS" />
        </service>
    </services>
</system.serviceModel> 
```

然后在服务类中

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Activation;
using System.ServiceModel.Web;
using System.Text;

namespace NAMESPACE
{
    [ServiceBehavior(IncludeExceptionDetailInFaults = true)]
    [ServiceContract(Namespace = "")]
    [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    public class SERVICECLASS
    {
        // To use HTTP GET, add [WebGet] attribute. (Default ResponseFormat is WebMessageFormat.Json)
        // To create an operation that returns XML,
        //     add [WebGet(ResponseFormat=WebMessageFormat.Xml)],
        //     and include the following line in the operation body:
        //         WebOperationContext.Current.OutgoingResponse.ContentType = "text/xml";
        [OperationContract]
        public string DoWork()
        {
            // Add your operation implementation here
            return "Success";
        }

        // Add more operations here and mark them with [OperationContract]
    }
} 
```

这是 VS 2012 在我添加启用 AJAX 的 WCF 服务时生成的。

# ajax - 在 Grails 2.1 中解析多级 Javascript 对象

> ID：11477425
> 
> 赞同：1
> 
> 时间：2012-07-13T19:52:20.387
> 
> 标签：ajax, grails

我正在尝试从需要具有多个级别的 ajax 函数将数据发送到我的控制器，所以是这样的：

```
{
  "lob": {
    "TESTING": [
      {
        "name": "color",
        "value": "1"
      },
      {
        "name": "time",
        "value": "2"
      },
      {
        "name": "jeremy",
        "value": "3"
      },
      {
        "name": "fourtytwo",
        "value": "4"
      },
      {
        "name": "owl",
        "value": "5"
      },
      {
        "name": "why",
        "value": "6"
      },
      {
        "name": "derp",
        "value": "7"
      },
      {
        "name": "where",
        "value": "8"
      }
    ]
  }
} 
```

但是当它发送到grails时，当我打印出参数时我得到了这个

```
[lob[TESTING][4][value]:5,
 lob[TESTING][3][name]:fourtytwo,
 lob[TESTING][6][name]:derp,
 lob[TESTING][5][name]:why,
 lob[TESTING][3][value]:4,
 lob[TESTING][1][value]:2,
 lob[TESTING][2][value]:3,
 lob[TESTING][5][value]:6,
 lob[TESTING][1][name]:time,
 lob[TESTING][0][value]:1,
 lob[TESTING][6][value]:7,
 lob[TESTING][0][name]:color,
 lob[TESTING][7][value]:8,
 lob[TESTING][4][name]:owl,
 lob[TESTING][7][name]:where,
 lob[TESTING][2][name]:jeremy,
 action:save,
 controller:LOB] 
```

我从 JavaScript 发送的数据：

```
{
    lob: {
        TESTING: $form.serializeArray()
    }
} 
```

我一直在阅读多个论坛说使用 JSON.parse 或 request.JSON 但这些解决方案似乎并没有解决我的问题。我希望能够访问数据，例如

```
params.lob.testing.each{ a->
    println a
} 
```

我将做更多的事情，但能够以这种方式访问​​数据会很好。我正在使用 Grails 2.1 和 Jquery 1.7.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T03:55:41.677

实际上，Grails 让它变得非常容易。我已经获取了您的测试数据并通过以下方式运行它：

```
import grails.converters.JSON

class LobController {

    def save = {
       def json = request.JSON
       json.lob.TESTING.each {item->
         println "Name: ${item.name} - Value: ${item.value}"
       }
      //render something back if you need to here
  }
} 
```

它输出：

```
Name color - Value: 1
Name time - Value: 2
Name jeremy - Value: 3
Name fourtytwo - Value: 4
Name owl - Value: 5
Name why - Value: 6
Name derp - Value: 7
Name where - Value: 8 
```

我创建了一个这样的 UrlMapping 条目（你可能已经有了这个）：

```
"/myApi"(controller: "lob", parseRequest: true) {
            action = [POST: "save"]
} 
```

将`parseRequest: true`自动解析传入的 JSON。

我找到了一个 `serializeJSON' 函数，它可能会替换 serializeArray() 以将其格式化为 JSON。以下内容由 Arjen Oosterkamp 在[jQuery serializeArray](http://api.jquery.com/serializeArray/)页面上提供：

```
(function( $ ){
$.fn.serializeJSON=function() {
var json = {};
jQuery.map($(this).serializeArray(), function(n, i){
json[n['name']] = n['value'];
});
return json;
};
})( jQuery ); 
```

只需用作 $('form').serializeJSON();

该功能的所有功劳都归功于 Arjen Oosterkamp ......

# asp.net - Telerik MVC 网格在网格为空时丢失 GridOperationMode.Client

> ID：11477428
> 
> 赞同：0
> 
> 时间：2012-07-13T19:52:30.127
> 
> 标签：asp.net, asp.net-mvc, telerik, telerik-grid, telerik-mvc

即使网格包含零行，是否有办法强制 Telerik MVC 网格使用 GridOperationMode“客户端”？我观察到，如果存在一行或多行，网格会尊重操作模式，但如果结果集为空，它似乎会退回到服务器模式。单击列听者会向服务器发出发布请求......在最初渲染空网格时，它似乎也只发布了一个帖子。我调试了 Telerik JavaScript，它实际上是在渲染空网格时发送 Ajax 发布请求。有没有办法禁用这个请求？

这种行为有解释吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:07:30.263

默认情况下，网格为空时会发出 Ajax 请求。它尝试从其配置的操作方法加载数据。要防止这种情况发生，请使用[OnDataBinding](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-grid-client-api-and-events.html#OnDataBinding)事件：

```
 function onDataBinding(e) {
      e.preventDefault();
  } 
```

# django - South：为什么在引入其他开发人员的模型更改时创建一个新的空迁移？

> ID：11477447
> 
> 赞同：3
> 
> 时间：2012-07-13T19:53:46.447
> 
> 标签：django, django-south

以下摘自有关[Team Workflow](http://south.readthedocs.org/en/latest/tutorial/part5.html#team-workflow)的 South 官方文档部分，

> 第二件事要注意的是，当您通过他们自己的迁移完成其他人的模型更改时，您需要创建一个新的空迁移，其中冻结两个开发分支的更改（如果您使用过 mercurial ，这相当于合并提交）。

我不明白为什么在这种情况下需要创建一个新的空迁移。开发人员不应该`./manage.py migrate`在从其他人那里提取模型更改（以及相应的迁移）之后运行吗？我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:20:29.317

我相信这意味着如果两个分支都对同一个模型进行了更改，那么最好合并代码并为这些更改重新创建一个迁移脚本。这是因为如果 branch1 有一个 0006 迁移脚本，而 branch2 有另一个 0006 迁移脚本（你知道南如何按顺序命名它们......）那么你不能正确地自动合并它们，因为它们实际上是不同的文件。

因此，您需要合并代码更改，然后为合并的分支重新创建迁移脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T00:35:34.823

我们遇到了与这件作品有关的问题。假设我们有一个模型：

```
class Article(Model):
    title = CharField() 
```

开发人员 1 在他的分支上添加一个字段，比如说，`author`（迁移冻结标题，作者） 开发人员 2`date_published`在他的分支上添加一个字段（迁移冻结标题，date_published）

然后有人合并了两个分支。他们得到的是两个迁移，一个不知道`date_published`，另一个没有见过 field `author`。

这可能导致南试图在下次创建自动迁移时添加作者或 date_published 字段（无论最后添加了什么迁移），因为它根本不知道 100% 正确的数据库状态，它不会在迁移中冻结。

# c - Netbeans C 代码格式

> ID：11477452
> 
> 赞同：0
> 
> 时间：2012-07-13T19:53:59.177
> 
> 标签：c, netbeans

我正在使用 NetBeans 进行 C 编码，我想知道如何更改它的格式。当我输入新行时，我希望它看起来像这样：

```
int main(int argc, char** argv)
{

int x;

void xzy()
  {

}

printf("etc...etc..etc..");

return (EXIT_SUCCESS);
} 
```

基本上到了一切都从行首开始的地步，而不是这样：

```
int main(int argc, char** argv)
{

         int x;
         void xzy(){

    }
         printf("etc...etc..etc..");

        return (EXIT_SUCCESS);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:09:17.710

首先，我认为您正在尝试做的事情会使代码非常不可读，并且违反了标准。但如果你真的想这样做，这就是我发现的：

在 NeatBeans 中，转到`Tools > Options`. 窗口将`Options`弹出。单击`Editor`，然后选择`Formatting`选项卡。在`Language`下拉列表中，选择`C`。在`Category`下拉列表中，选择`Formatting Style`。检查选项`Override Global Options`。然后将属性设置`Indent Size`为`0`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T20:08:19.617

由于您的示例代码没有按照当前格式正确显示，因此很难确切知道您的意思，但听起来您想关闭自动缩进功能。据我所知，没有办法完全禁用 NetBeans 中的自动缩进。您可以调整缩进的大小和使用的缩进样式，但不能完全关闭它。如果您使用代码格式化选项一段时间，您可能会得到与您想要的类似的东西。

作为旁注，这不是提出此类问题的最佳论坛。通过使用 NetBeans 论坛/邮件列表，您可能会得到更好的响应。

# java - 如何将 Sphinx 4 与 Freeswitch 集成，接收通话音频并进行一些识别

> ID：11477460
> 
> 赞同：2
> 
> 时间：2012-07-13T19:54:44.027
> 
> 标签：java, freeswitch, sphinx4

我有在 Freeswitch 上设置 IVR 的工作知识。我已经安装了 Sphinx 4，它适用于从麦克风捕获的语音。但是我想将 FS 与 Sphinx 4 集成。

我在某处读到它说它需要像 Cairo 这样的 MRCP 服务器才能将 FS 与 SPHINX 集成。真的需要像开罗这样的东西吗？FS 自带 PocketSphinx……但我想用 Sphinx 4。请告诉我如何集成 Sphinx4 和 FreeSwitch。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T16:43:14.167

是的，桑给巴尔/开罗/OpenIVR 是一个简单的方法。对于 Sphinx4，您可以将 freeswitch MRCP 模块与 CMUSphinx 支持的 MRCP 服务器一起使用。

所以你的选择是：

*   Unimrcp with pocketsphinx（首选，因为已经过测试）
*   带有 sphinx4 的桑给巴尔 MRCP 服务器
*   没有 MRCP 的 mod_pocketsphinx（较少标准的解决方案）

Pocketsphinx 与 sphinx4 差别不大，精度是一样的。pocketsphinx 的性能稍快一些，并且该解决方案已经过 Freeswitch 开发人员的测试。这就是为什么首选pocketsphinx的原因。

有关更多信息，请参阅

[http://wiki.freeswitch.org/wiki/Mod_openmrcp#UniMRCP_Server（freeswitch](http://wiki.freeswitch.org/wiki/Mod_openmrcp#UniMRCP_Server)的MRCP插件）

[https://sourceforge.net/projects/openivr/](https://sourceforge.net/projects/openivr/)（桑给巴尔）

[http://wiki.freeswitch.org/wiki/Mod_pocketsphinx](http://wiki.freeswitch.org/wiki/Mod_pocketsphinx)（直接与pocketsphinx集成）

[http://en.wikipedia.org/wiki/Media_Resource_Control_Protocol](http://en.wikipedia.org/wiki/Media_Resource_Control_Protocol)（关于 MRCP 的信息）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T21:36:58.987

您可以从 freeswitch dialplan 调用外部脚本，所以我建议将控件传递给 LUA 或 javascript 或 Perl 脚本，提示用户输入，打开录制，然后将录制的文件传递给 Sphinx。类似的东西应该可以工作（我自己从未使用过Sphinx）

# iphone - 在 Safari 上检索 iPhone UDID

> ID：11477461
> 
> 赞同：3
> 
> 时间：2012-07-13T19:54:45.370
> 
> 标签：iphone, safari

在 Safari 上检索 iPhone UDID 有一个很好的说明。

[http://www.bendytree.com/tips/Getting-an-iPhone-UDID-from-Mobile-Safari](http://www.bendytree.com/tips/Getting-an-iPhone-UDID-from-Mobile-Safari)

我仔细阅读了这篇文章并遵循它。

这是我的脚本。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
    <dict>
        <key>PayloadContent</key>
        <dict>
            <key>URL</key>
            <string>http://appfree.com/user/retrieve.php</string>
            <key>DeviceAttributes</key>
            <array>
                <string>UDID</string>
                <string>IMEI</string>
                <string>ICCID</string>
                <string>VERSION</string>
                <string>PRODUCT</string>
            </array>
        </dict>
        <key>PayloadOrganization</key>
        <string>AppFree, Inc.</string>
        <key>PayloadDisplayName</key>
        <string>AppFree</string>
        <key>PayloadVersion</key>
        <integer>1</integer>
        <key>PayloadUUID</key>
        <string>9CF421B3-9853-4454-BC8A-982CBD3C907C</string>
        <key>PayloadIdentifier</key>
        <string>kr.co.gpon.profile-service</string>
        <key>PayloadDescription</key>
        <string>This temporary profile will be used to find and display your current device's UDID.</string>
        <key>PayloadType</key>
        <string>Profile Service</string>
    </dict>
</plist> 
```

但是，当用户尝试安装配置文件时，它仍然显示**未签名消息。**

PS。是否有替代手册来解决此问题？

==================================================== =========================

# 更新

我通过此代码成功地从我的 iPhone 获取数据。

```
$data = file_get_contents('php://input');

$plistBegin   = '<?xml version="1.0"';
$plistEnd   = '</plist>';

$pos1 = strpos($data, $plistBegin);
$pos2 = strpos($data, $plistEnd);

$data2 = substr ($data,$pos1,$pos2-$pos1);

$xml = xml_parser_create();

xml_parse_into_struct($xml, $data2, $vs);
xml_parser_free($xml);

$UDID = "";
$CHALLENGE = "";
$DEVICE_NAME = "";
$DEVICE_PRODUCT = "";
$DEVICE_VERSION = "";
$iterator = 0;

$arrayCleaned = array();

foreach($vs as $v){

    if($v['level'] == 3 && $v['type'] == 'complete'){
    $arrayCleaned[]= $v;
    }
$iterator++;
}

$data = "";

$iterator = 0;

foreach($arrayCleaned as $elem){
                $data .= "\n==".$elem['tag']." -> ".$elem['value']."<br/>";
                switch ($elem['value']) {
                    case "CHALLENGE":
                        $CHALLENGE = $arrayCleaned[$iterator+1]['value'];
                        break;
                    case "DEVICE_NAME":
                        $DEVICE_NAME = $arrayCleaned[$iterator+1]['value'];
                        break;
                    case "PRODUCT":
                        $DEVICE_PRODUCT = $arrayCleaned[$iterator+1]['value'];
                        break;
                    case "UDID":
                        $UDID = $arrayCleaned[$iterator+1]['value'];
                        break;
                    case "VERSION":
                        $DEVICE_VERSION = $arrayCleaned[$iterator+1]['value'];
                        break;                       
                    }
                    $iterator++;
}

$params = "UDID=".$UDID."&CHALLENGE=".$CHALLENGE."&DEVICE_NAME=".$DEVICE_NAME."&DEVICE_PR ODUCT=".$DEVICE_PRODUCT."&DEVICE_VERSION=".$DEVICE_VERSION;
// enrollment is a directory
header('Location: http://mywebsite.com/enrollment?'.$params); 
```

然而，我遇到了新的障碍。

==================================================== =======================

我阅读了这篇文章并关注了他的所作所为。

[https://discussions.apple.com/thread/3089948?start=0&tstart=0](https://discussions.apple.com/thread/3089948?start=0&tstart=0)

==================================================== ======================= ![在此处输入图像描述](../Images/d5ef362124fb82297b479fb8ef836811.png)

数据已发送到我的服务器，但仍然显示消息“无效配置文件”。

它不会重定向到移动网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T20:36:22.950

您是否尝试添加

```
header("Location: http://www.mysite.com/Results?data=".rawurlencode($data)); 
```

在你的代码末尾？

* * *

```
openssl smime \
-sign \
-signer your-cert.pem \
-inkey your-priv-key.pem \
-certfile TheCertChain.pem \
-nodetach \
-outform der \
-in ConfigProfile.mobileconfig \
-out ConfigProfile_signed.mobileconfig 
```

您需要的文件是：

your-cert.pem – 这是您获得的证书

your-priv-key.pem – 这是你的私钥

TheCertChain.pem – 这是证书链（在某些情况下是可选的）

ConfigProfile.mobileconfig – 这是您的配置文件的未签名副本

更详细[的here](https://confluence.terena.org/display/tcs/Sign+Apple+mobileconfig+files)

# objective-c - 在 UISplitViewController 中访问和发送 DetailVC

> ID：11477463
> 
> 赞同：1
> 
> 时间：2012-07-13T19:54:52.657
> 
> 标签：objective-c, ios, ios5, delegation

我正在使用一个 UISplitViewController，它使用两个 UINavigationController，一个用于 MasterVC，另一个用于 DetailVC。我正在尝试从 MasterVC 的导航堆栈中的 VC 向 DetailVC 的 topViewController 发送消息。这就是我访问接收 VC 的方式。

```
UIWindow *window = [[UIApplication sharedApplication] keyWindow];

UISplitViewController *splitViewController = (UISplitViewController*)window.rootViewController;

UINavigationController *navigationController = (UINavigationController*)[splitViewController.viewControllers objectAtIndex:1];

DefaultDetailedViewController_iPad *defaultVC = (DefaultDetailedViewController_iPad*)navigationController.topViewController;

if ( [defaultVC conformsToProtocol:@protocol(MapDelegate)] ) {
    [defaultVC clearPreviousAnnotations];
} 
```

IF 执行但 clearPreviousAnnotations 没有被调用。访问 DetailVC 并向其发送消息的最佳方式是什么？

我还应该说我是一个业余爱好者，对编程非常陌生。

谢谢你。

编辑1：

那很简单，我通过这种方式访问​​它：

```
 RootViewController *rvc = (RootViewController*)[[self.navigationController viewControllers] objectAtIndex:0];
[rvc.mapDelegate clearPreviousAnnotations]; 
```

再次感谢各位。

# c++ - 在 c++ 或 c 中获取当前鼠标光标图像

> ID：11477469
> 
> 赞同：1
> 
> 时间：2012-07-13T19:55:02.477
> 
> 标签：c++, c, winapi, handle, mouse-cursor

在我的应用程序中，我想获取当前鼠标光标以将其显示在小程序中。为此，我必须编写一个 C 或 C++ 函数，将鼠标光标作为缓冲图像返回。

（这里我选择 C ​​或 C++ 是因为执行速度。除此之外，我在这篇文章[http://www.codeproject.com/Articles/12850/Capturing-the - 带有鼠标光标的桌面屏幕](http://www.codeproject.com/Articles/12850/Capturing-the-Desktop-Screen-with-the-Mouse-Cursor)。）

在 msdn 库中有一个函数可以返回当前光标的句柄。但是句柄除了传递给函数之外什么也做不了。是否有将当前光标作为缓冲图像返回的函数，或者我可以使用句柄本身获取光标图像？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T20:13:55.170

您是否正在寻找类似的东西：[GetCurPos](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648390%28v=vs.85%29.aspx)？

（侧边栏中还有很多功能可以查看）

本文可能也有帮助：[C++ 编程：使用 MFC/ATL 轻松进行屏幕捕获](http://www.codeguru.com/cpp/article.php/c18347/C-Programming-Easy-Screen-Capture-Using-MFCATL.htm)

# c# - 系统日期更改时如何默认数据库值

> ID：11477470
> 
> 赞同：0
> 
> 时间：2012-07-13T19:55:02.030
> 
> 标签：c#, asp.net, visual-studio-2010

我目前正在为我的项目做一个银行网站，使用 C# 和 asp.net。其中一项功能是“剩余每日限额”。将系统日期更改为另一天后，我需要将数据库值更改回默认值。示例：如果用户有 500 美元（默认值）作为每日限额，并且他用完了。第二天，他将再次获得 500 美元。我可以知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:00:05.553

默认值*通常*保留在一些配置文件中。在您的具体情况下，我会说您可以

*   或具有`table`默认值

*   或在`tables`可能具有*还原*功能的地方具有具有相应值的*默认列。*

之后，可以使用一些`stored procedure`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T20:08:06.793

您可以创建 SQL 作业并安排它在每个午夜运行，在作业中您可以执行一个存储过程，将值重置为 500 美元。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T20:19:41.153

在我看来，基于将来可能会有其他要求，我会有一个看起来像这样的表格：

```
UserID    AppliedOn    Limit
1         1/1/2012     500
1         2/1/2012     750 
```

这为您提供了历史限制视图，您可以将其提供给用户或数据挖掘。同样，这就是我应用当前每日限额的方式。

```
UserID    AppliedOn    Withdrawn
1         1/10/2012    125
1         1/10/2012    225 
```

现在在 2012 年 1 月 1 日，在没有任何工作或触发器的情况下，很容易确定限制中剩余的数量。同样，您将拥有可以针对其他功能进行数据挖掘的历史值。

```
SELECT
  ul.Limit - uw.Sum as LimitLeft
FROM
  UserLimit ul
  INNER JOIN (
    SELECT 
      UserID,
      AppliedOn,   
      SUM(Limit) as Sum
    FROM
      UserLimit
    Group by
      UserID,
      AppliedOn) uw on ul.UserID = uw.UserID
                       and ul.AppliedOn = uw.AppliedOn
WHERE
  ul.UserID = @userID 
  AND ul.AppliedOn = @dateInQuestion 
```

（由于这里的实体框架，我的原始 SQL 技能可能有点生疏）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T20:26:07.053

这是一个 SQL 脚本，它将创建我将如何使用一些示例数据设置您的数据库：

```
CREATE TABLE tblBankCustomer
(
    BankCustomerId INT NOT NULL IDENTITY(1,1) PRIMARY KEY
    , FirstName NVARCHAR(100) NOT NULL
    , LastName NVARCHAR(100) NOT NULL
    , DailySpendingLimit DECIMAL(38, 2) NOT NULL CONSTRAINT DF_tblBankCustomer_DailySpendingLimit DEFAULT(500)
)

CREATE TABLE tblTransactionType
(
    TransactionTypeId INT NOT NULL IDENTITY(1,1) PRIMARY KEY
    , TransactionType VARCHAR(50) NOT NULL
)

INSERT tblTransactionType (TransactionType)
VALUES ('Deposit')
    , ('Withdrawal')

CREATE TABLE tblTransaction
(
    TransactionId INT NOT NULL IDENTITY(1,1) PRIMARY KEY
    , BankCustomerId INT NOT NULL
    , TransactionDate DATE NOT NULL
    , Amount DECIMAL(38, 2) NOT NULL
    , TransactionTypeId INT NOT NULL
)

ALTER TABLE tblTransaction
ADD CONSTRAINT FX_tblTransaction_tblBankCustomer
FOREIGN KEY (BankCustomerId)
REFERENCES tblBankCustomer(BankCustomerId)

ALTER TABLE tblTransaction
ADD CONSTRAINT FX_tblTransaction_tblTransactionType
FOREIGN KEY (TransactionTypeId)
REFERENCES tblTransactionType(TransactionTypeId)

INSERT tblBankCustomer
(
    FirstName
    , LastName
)
VALUES ('Jeremy', 'Pridemore')
    , ('K', 'YQ')

INSERT tblTransaction
(
    BankCustomerId
    , TransactionDate
    , Amount
    , TransactionTypeId
)
VALUES
    (1, CURRENT_TIMESTAMP, 48.50, 2) -- Jeremy, Today, $48.50, Withdrawal
    , (1, CURRENT_TIMESTAMP, 300.00, 2) -- Jeremy, Today, $300, Withdrawal
    , (1, CURRENT_TIMESTAMP, -200.00, 1) -- Jeremy, Today, $200, Deposit
    , (2, CURRENT_TIMESTAMP, 285.00, 2) -- K, Today, $285, Withdrawal
    , (2, CURRENT_TIMESTAMP, 215.00, 2) -- K, Today, $215, Withdrawal
GO
CREATE FUNCTION fGetRemainingSpendingLimit
(
    @BankCustomerId INT
    , @Date DATE
)
RETURNS DECIMAL(38, 2)
BEGIN
    SET @Date = ISNULL(@Date, CURRENT_TIMESTAMP)

    DECLARE @RemainingLimit DECIMAL(38, 2) =
    (SELECT
        SUM([Transaction].Amount)
    FROM tblBankCustomer Customer
    INNER JOIN tblTransaction [Transaction]
        ON [Transaction].BankCustomerId = Customer.BankCustomerId
        AND [Transaction].TransactionDate = @Date
    INNER JOIN tblTransactionType TransactionType
        ON TransactionType.TransactionTypeId = [Transaction].TransactionTypeId
        AND TransactionType.TransactionType = 'Withdrawal'
    WHERE Customer.BankCustomerId = @BankCustomerId)

    RETURN @RemainingLimit
END
GO

-- Some sample selects
SELECT dbo.fGetRemainingSpendingLimit(1, NULL)
SELECT dbo.fGetRemainingSpendingLimit(2, NULL) 
```

然后在 C# 中，您应该知道与您合作的客户的客户 ID。如果您使用的是 ADO.NET 之类的东西，您可以直接调用此函数并使用代码中的值。

# asp.net - 我应该避免在 asp.net 中使用复杂对象的会话吗？

> ID：11477473
> 
> 赞同：1
> 
> 时间：2012-07-13T19:55:05.883
> 
> 标签：asp.net, session

这是我的问题，我们有一个大型患者对象，在整个管理员的多个屏幕上使用。每个屏幕都包含有关同一患者的不同信息。不可能全部在一个屏幕上。

我唯一想保留患者的时间是用户单击保存时。我需要在某个地方有一个记忆中的病人。用户可能在管理员中，在各种屏幕上更改患者信息，运行验证并决定不保存该患者。这是典型的用途。

可以在会话中存储该患者吗？或者，有没有更好的方法来做到这一点？此管理员最多有 20 个具有访问权限的用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:20:46.327

会话在这里应该没问题。您的用户负载似乎很轻...但您可能想准确检查对象占用了多少内存，将其乘以最大用户数，然后查看您的位置。

如果您想完全避免会话，您可以使用 System.Web.Caching 来存储对象，并使用用户标识符加上一些常量字符串来键入存储的对象。

无论哪种情况，您都需要了解有多少 Web 服务器正在运行该应用程序。如果它只是一个 Web 服务器，不用担心。如果您有多个 Web 服务器，您需要确保它们是“粘性的”——然后保证用户的所有请求都由同一服务器处理。如何做到这一点完全取决于您的负载平衡风格......通常“IT人员”会为您处理这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T20:01:33.893

对此意见可能有所不同。会话很棘手，特别是如果您使用内存会话以外的东西。分布式会话将破坏不可序列化的对象。如果这个对象是一个简单的 POCO 或者你控制的对象，尽量让它与序列化一起玩。如果是这样，你就准备好了。对于没有太多负载的管理工具，我会说你会没事的。

嘿，我发现了这个 - 对该网站一无所知，但说明了我的观点： [https ://www.fortify.com/vulncat/en/vulncat/dotnet/asp_dotnet_bad_practices_non_serializable_object_stored_in_session.html](https://www.fortify.com/vulncat/en/vulncat/dotnet/asp_dotnet_bad_practices_non_serializable_object_stored_in_session.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T20:01:34.113

我有类似的用户数量类似的情况。我做到了，效果很好。

我的情况是安排活动。

有人会创建一个事件，并通过多个网页来修改和配置这个事件。当它们都完成后，它会将所有细节保存到 SQL 中。最后，我对它的效果感到惊讶。

# salesforce - 使用 SOQL 进行连接

> ID：11477483
> 
> 赞同：3
> 
> 时间：2012-07-13T19:55:53.583
> 
> 标签：salesforce, apex-code, soql

这是我的 SOQL 问题。

查询一：

```
Select 
  c.Date_Joined__c, 
  c.Email, 
  c.FirstName, 
  c.LastName, 
  c.regcode__c 
from Contact c WHERE c.regcode__c ='XXXXXXXXX' 
```

查询 2：

```
Select 
  p.Account__c, 
  p.Date__c, 
  p.Points__c, 
  p.Description__c, 
  p.Code__c 
from Points__c p where p.Account__c ='YYYYYYYYYYYY' and (p.Points__c > 0) 
Order by p.Date__c DESC 
```

两个查询之间的关系是`c.regcode__c`将具有与 相同的值`p.Code__c`。

我想结合**Query1**和**Query2**，所以`c.regcode__c = p.Code__c`

我被卡住了，我似乎无法为 SOQL 找到正确的语法。甚至可以在 API 中进行连接吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-16T14:55:46.037

您本身并不能真正创建连接，但您可以使用类似于以下的语法进行一些过滤：

```
SELECT Id FROM Contact WHERE c.RegCode__c IN (SELECT p.Code__c FROM Account) 
```

只要`WHERE`子句中的子查询只返回一个值并且代码是一个可过滤的字段，这应该可以工作。此外，如果您尝试按同一对象（即帐户到帐户）进行过滤，这也不起作用。您可以向帐户端添加更多条件以匹配您的示例查询。

Again, this isn't a true join so you can't put the account fields from your subquery. But you can at least filter down your contacts.

# django - Django - 国际化 URL 部分因语言而异

> ID：11477488
> 
> 赞同：0
> 
> 时间：2012-07-13T19:56:18.990
> 
> 标签：django, internationalization, django-urls, django-localeurl

我需要为每种语言制作不同的 urlpattern，但要遵循相同的观点。

例如：

```
url(r'^category/(?P<slug>[\w-]+)/, 'news.views.category', name='category'), in english
url(r'^kategoria/(?P<slug>[\w-]+)/, 'news.views.category', name='category'), in polish 
```

如果你设置了 EN，“kategoria”将不起作用。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:10:42.470

如果您使用的是 Django 版本>=1.4。检查[URL 模式的国际化](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#internationalization-in-url-patterns)。`ugettext_lazy()`您可以使用或您可以使用定义 URL 的翻译`i18n_patterns`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-17T09:32:48.827

您不应该在 URL 中创建像这样`.use`的 i18n 模式的 URL 模式，在`urls.py`：

```
from django.translation import ugettext as _ 
```

然后使您的 URL 模式如下所示：

```
url(_(r'^category/(?P<slug>[\w-]+)/)) 
```

译者将翻译它。

# javascript - 明喻时间线竖条

> ID：11477492
> 
> 赞同：0
> 
> 时间：2012-07-13T19:56:44.390
> 
> 标签：javascript, simile

我想在时间轴上添加垂直滚动条。我使用 json 格式来加载数据，数据被加载但它超出了范围。所以要解决这个问题，我需要将垂直滚动条添加到乐队。我厌倦了一切都没有工作。我什至尝试使用 simile2.3.1 版本，它有错误并且没有任何问题文档。谁能帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T14:21:07.357

您是否尝试过本教程中所说的内容？[http://code.google.com/p/simile-widgets/wiki/Timeline_VerticalScrollbar](http://code.google.com/p/simile-widgets/wiki/Timeline_VerticalScrollbar)

# google-chrome-extension - 仅发布到测试帐户是否会导致“无法从 Chrome 网上应用店获取数据”错误

> ID：11477494
> 
> 赞同：2
> 
> 时间：2012-07-13T19:56:48.753
> 
> 标签：google-chrome-extension

我正在尝试实现 Chrome 扩展程序的内联安装（https://developers.google.com/chrome/web-store/docs/inline_installation），但是当我调用 chrome.webstore.install() 时，我得到了一个错误说明“无法从 Chrome 网上应用店获取数据”。

该扩展目前仅发布给 Google Group 中的一组测试人员，我是其中的成员（实际上是所有者），并且我可以从商店本身很好地安装该扩展。但我想知道这个错误是否是由于它处于这种测试模式。Google Code docs 或网络上的任何地方似乎都没有任何信息可以找到此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:14:01.100

这个问题昨天刚刚修复：[http ://code.google.com/p/chromium/issues/detail?id=138155](http://code.google.com/p/chromium/issues/detail?id=138155)

该修复程序已经在 Canary 频道构建中起作用。我不知道到达其他渠道需要多长时间。

# javascript - 在 Javascript 中获取关联数组数组的索引

> ID：11477495
> 
> 赞同：1
> 
> 时间：2012-07-13T19:56:52.950
> 
> 标签：javascript, arrays, indexing, dom-events, associative-array

我有一个“关联数组”数组，即对象，它包含各种 HTML 元素的数据和一个其他参数，如下所示：

```
container[0] = { picker_canvas: document.getElementById("background_picker"),
                 color_canvas: document.getElementById("background_color"),
                 hex_text: document.getElementById("background_text"),
                 mouse_down: false };

container[1] = { picker_canvas: document.getElementById("textbox_picker"),
                 color_canvas: document.getElementById("textbox_color"),
                 hex_text: document.getElementById("textbox_text"),
                 mouse_down: false };

container[2] = { picker_canvas: document.getElementById("font_picker"),
                 color_canvas: document.getElementById("font_color"),
                 hex_text: document.getElementById("font_text"),
                 mouse_down: false }; 
```

每个容器都有对颜色选择器画布、颜色预览画布、显示十六进制颜色值的文本框和`mouse_down`布尔值的引用。稍后，我通过像这样遍历容器来初始化一些事件侦听器：

```
for (i=0; i<3; i++) {

    container[i].picker_canvas.addEventListener("mousedown", function() {
        container[i].mouse_down = true;
    }, false);

    container[i].picker_canvas.addEventListener("mouseup", function() {
        container[i].mouse_down = false;
    }, false);

    container[i].picker_canvas.addEventListener("mousemove", function(evt) {
        getColor(container[i], evt);
    }, false);

    container[i].hex_text.addEventListener("change", function(evt) {
        drawColorSquare(container[i], evt.target.value)
    }, false);

} 
```

但这不起作用，因为`i`变得未定义，所以我现在正试图通过做这样的事情来获得正确的索引，但我不确定如何在 Javascript 中实际实现它

```
container[i].picker_canvas.addEventListener("mousedown", function(evt) {
    container[container.indexof(evt.target)].mouse_down = false;
}, false); 
```

基本上我需要在关联数组的数组中搜索`evt.target`并让它返回数组的索引。那么这甚至可以通过任何内置的 Javascript 函数实现，还是我只需要自己制作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T19:59:21.093

由于您似乎不必担心 Internet Explorer 8 及更早版本，请使用`forEach`：

```
container.forEach(function(x) {
    x.picker_canvas.addEventListener("mousedown", function() {
        x.mouse_down = true;
    }, false);

    x.picker_canvas.addEventListener("mouseup", function() {
        x.mouse_down = false;
    }, false);

    x.picker_canvas.addEventListener("mousemove", function(evt) {
        getColor(x, evt);
    }, false);

    x.hex_text.addEventListener("change", function(evt) {
        drawColorSquare(x, evt.target.value)
    }, false);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T20:12:08.590

由于我们这里不必支持IE8，我们可以全力以赴：

```
container.forEach(function(x) {
    x.handleEvent = function(e) { //This is stupid, wish I had the time to refactor the code to use prototypes
        switch (e.type) {
        case "mousedown":
            this.mouse_down = true;
            break;
        case "mouseup":
            this.mouse_down = false;
            break;
        case "mousemove":
            getColor(this, e);
            break;
        case "change":
            drawColorSquare(this, e.currentTarget.value);
            break;
        }
    };
    var canvas = x.picker_canvas;
    canvas.addEventListener("mousedown", x, false);
    canvas.addEventListener("mouseup", x, false);
    canvas.addEventListener("mousemove", x, false);
    x.hex_text.addEventListener("change", x, false);
}); 
```

# django - m2m through：从模板访问中间表

> ID：11477497
> 
> 赞同：2
> 
> 时间：2012-07-13T19:56:59.050
> 
> 标签：django, django-models, django-orm

当多对多关系通过直通表有额外数据时，如何获取模板中的数据？从一个视图中，如果我提供参数，我可以获得数据：

```
class Category(models.Model):
    title           = models.CharField(max_length=1024,null=True,blank=True)
    entry           = models.ManyToManyField(Entry,null=True,blank=True,
                                             related_name='category_entry',
                                             through='CategoryEntry',
                                             )

class CategoryEntry(models.Model):
    category    = models.ForeignKey(Category)
    entry       = models.ForeignKey(Entry)
    votes       = models.IntegerField(null=False, default=0)

def category_detail(request, pk):
    category = models.Category.objects.select_related().get(pk=pk)
    entries  = category.entry.order_by('-temp_sort_order').filter(temp_sort_order__gte=0)
    for entry in entries:
        assert isinstance(entry, models.Entry)
        ce = models.CategoryEntry.objects.get(entry=entry, category=category)
        pprint('Show votes as a test: ' + ce.votes) #OK
        pprint('entry title: ' + entry.title) #OK
        pprint('entry votes: ' + str(entry.category_entry.votes)) #BAD
        pprint('entry votes: ' + str(entry.entry.votes))  #BAD
    .... 
```

但是模板不能为方法提供参数。

[https://docs.djangoproject.com/en/dev/topics/db/models/#extra-fields-on-many-to-many-relationships](https://docs.djangoproject.com/en/dev/topics/db/models/#extra-fields-on-many-to-many-relationships)上的文档对模板保持沉默。使用 using`for entry in category.category_entry_set.all`给出“Category”对象没有属性“category_entry_set”。 `category.category_entry.all`也不起作用。

最终我想在模板中显示额外的数据：

```
{% for entry in entries %}
    <ul>
        <li>Title: {{ entry.title }} Votes: {{ entry.category_entry.votes }} {{ entry.entry.votes }}</li>
    </ul>
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T07:37:45.920

如果您在模板中有一个类别实例：

```
category.entry.all -> list of entries 
```

如果您在模板中有一个条目实例：

```
entry.category_entry.all -> list of categories 
```

您应该以复数形式调用 M2M 字段，然后您将拥有更可读的代码

```
category.entries.all 
```

%model%_set 语法（或相关名称，如果您已指定）用于通过向后关系访问模型。

[https://docs.djangoproject.com/en/1.4/topics/db/queries/#following-relationships-backward](https://docs.djangoproject.com/en/1.4/topics/db/queries/#following-relationships-backward)

*但是如何获得与 m2m 实例关联的“投票”？– 布莱斯*

我建议你通过以下方式：

```
class Category(models.Model):
    title           = models.CharField(max_length=1024,null=True,blank=True)
    entries           = models.ManyToManyField(Entry,null=True,blank=True,
                                             related_name='categories',
                                             through='CategoryEntry',
                                             )

class CategoryEntry(models.Model):
    category    = models.ForeignKey(Category, related_name='category_entries')
    entry       = models.ForeignKey(Entry)
    votes       = models.IntegerField(null=False, default=0)

def category_detail(request, pk):
    category = models.Category.objects.select_related().get(pk=pk)
    category_entries  = category.category_entries.filter(entry__temp_sort_order__gte=0).order_by('-entry__temp_sort_order')
    for category_entry in category_entries:
        # category_entry is an instance of the model CategoryEntry
        pprint('category entry votes: ' + str(category_entry.votes))
        pprint('entry title: ' + category_entry.entry.title)
   ....

HOW TO
entry = Entry.objects.get(pk=1)
entry.categories.all() # list of categories (here we work through related name of the field entries)

category = Category.objects.get(pk=1)
category.entries.all() # list of entries (here we work through m2m field entries)

category.category_entries.all() # list of CategoryEntry objects (through related name category_entries of the field category in model CategoryEntry) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T00:37:20.530

更新我的答案，我错误地将相关经理放在错误的模型上，在你的情况下，就像安德烈说的那样，从类别中获取条目的正确方法是：

```
category.entry.all() 
```

现在，解决您的迭代和排序问题。在 python 中，它看起来像这样：

```
for ce in category.categoryentry_set.order_by('-votes'):
    print ce.entry, ce.votes 
```

这将为您提供按投票排序的每个类别的条目。要将其转换为模板，您只需将查询集保存`category.categoryentry_set.order_by('-votes')`到变量中并对其进行迭代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T19:48:10.383

这是一个有效的丑陋黑客。在过滤和排序之后，处理列表并附加额外的模型字段。模板现在可以轻松访问：

```
entries  = category.entry.order_by('-temp_sort_order').filter(temp_sort_order__gte=0)
for entry in entries:
    assert isinstance(entry, models.Entry)
    ce = models.CategoryEntry.objects.get(entry=entry, category=category)
    entry.xxx_votes = mark_safe(ce.votes)  # use {{ entry.xxx_votes to access }}
    entry.xxx_ce    = ce  # Use {{ entry.ce.votes to access }}
return render_to_response('category.html') 
```

希望有人可以提供更好的答案，或者建议对 django 本身进行改进。此解决方案不允许我排序：`category.entry.order_by('-category_entry.votes')`

# search - 在特定时间之间出现最多的搜索

> ID：11477498
> 
> 赞同：0
> 
> 时间：2012-07-13T19:57:03.963
> 
> 标签：search, count, apache-pig

我有一个搜索日志，其中包含时间、地点和查询等字段。我想从特定时间之间的特定地点找到查询次数最多的单词。所有字段，即日期、时间、query_String 都是字符数组。我有以下猪脚本，但它没有执行所需的操作。

```
Data = LOAD 'data' USING CustomPigStorage();
FClients = FILTER Data BY NOT(country is null);
Clients = FOREACH FClients GENERATE date,time, country,query_string as query;
grp = group Clients by (query, country, date, time);
wth_count = foreach grp generate FLATTEN(group), COUNT(Clients) as count; 
```

例如，我希望结果是“下午 2 点到 3 点之间，你好在美国被搜索了 4 次”。我基本上对 Count() 函数感到困惑。对猪来说相对较新。我相信我的 count() 在这里计算我拥有的记录总数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T14:42:42.223

您的查询看起来正确，COUNT(Clients) 返回包中的记录数，这些记录来自 Clients 并且属于该组。要查看它，您可以从“wth_count”语句中删除 COUNT 并将结果保存到文件中然后查看它。

```
wth_count = foreach grp generate group, Clients;
store wth_count into 'path'; 
```

您的潜在问题可能在于您在 group by 中使用日期和时间列，并且它们产生了太多组。为了缓解这种情况，您可以编写一个 java 静态函数来获取日期和时间并返回该范围的单个值，例如 12-07-2012、14.05.03 转换为“12-07-2012 14h”和 12-07 -2012, 14.05.05 变为“12-07-2012 14h”。这将创建一个涵盖时间间隔 2pm 和 3pm 的密钥，并将 Clinets 中的所有记录放入该组的包中。

# android - 从 Google Play 下载应用程序时，有效负载来自哪个 URL？

> ID：11477499
> 
> 赞同：1
> 
> 时间：2012-07-13T19:57:14.713
> 
> 标签：android, networking, ssl, tcpdump

我试图了解从 Google Play 商店下载应用程序时的流程（从现在开始 GPS）我假设手机的 GPS 应用程序浏览到类似[https://play.google.com/store/apps/details?id =com.mysms.android.sms](https://play.google.com/store/apps/details?id=com.mysms.android.sms)（我与这个应用程序没有任何关系），但我的问题是当用户点击“安装”时会发生什么 - 二进制文件从哪里提供？我在手机上运行了一个 tcpdump，但由于它都是 SSL，而且我不确定我在寻找什么，所以有点难以理解。

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:56:47.617

该信息不属于任何公共知识。我怀疑您无法弄清楚 URL 是什么并不是巧合。我想它是按照专门的方式设计的，很难弄清楚它是如何工作的。

没有供第 3 方与市场交互的官方公共 API。因此，即使您确实设法弄清楚了这个 URL，您也没有任何“被允许”使用它的权限。

**编辑：**事实上，根据[Android Market 服务条款](https://play.google.com/intl/en_us/about/play-terms.html)：

> **安全功能**- 您不得尝试、协助、授权或鼓励他人规避、禁用或破坏保护任何产品或 Google Play 的任何安全功能或组件，例如数字版权管理软件或加密。如果您违反任何安全功能，您可能会承担民事或刑事责任。

既然您知道该 url 是使用 SSL 加密的，那么如果您试图进一步找出它，那将违反您与 google 的协议。

注意：我不是律师，请接受我的***意见***。

# java - GWT 的图表和绘图 API

> ID：11477500
> 
> 赞同：4
> 
> 时间：2012-07-13T19:57:31.357
> 
> 标签：java, gwt

我试图找到一个可以在 GWT 中使用 java 而不是 javascript 的图表和绘图 api。我遇到的唯一问题是我发现的那些需要互联网连接，该代码所在的位置无法连接互联网。有人知道这样的API吗？这是我找到的那些，但又不能使用。 [https://code.google.com/p/charts4j](https://code.google.com/p/charts4j)我知道这个需要连接。 [http://code.google.com/p/gwt-google-apis/wiki/VisualizationGettingStarted](http://code.google.com/p/gwt-google-apis/wiki/VisualizationGettingStarted)

这不是 100% 确定的。如果有人使用过它并且可以让我知道它是否需要连接，请告诉我。此外，如果有人知道如何让 java swing 在 GWT 中工作，那就太棒了。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T21:05:39.393

我刚刚完成了关于该主题的简短介绍。在那里，我对以下内容进行了简短且有些主观的研究：

*   [客户端图表](http://code.google.com/p/clientsidegchart/)
*   [gflot](http://code.google.com/p/gflot/)
*   [dojox.charting](http://dojotoolkit.org/reference-guide/1.7/dojox/charting.html)
*   [Ico](http://reverserisk.com/ico/)（和其他基于 Raphael 的库）
*   [GXT 图表](http://www.sencha.com/products/gxt/)
*   [智能 GWT HTML5 图表](http://www.smartclient.com/product/#html5Charts)
*   [融合图表](http://www.fusioncharts.com/products/suite/)
*   [amCharts JavaScript 图表](http://www.amcharts.com/javascript/)
*   [谷歌图表工具 API](http://code.google.com/p/gwt-google-apis/wiki/VisualizationGettingStarted)
*   [JFreeChart](http://www.jfree.org/jfreechart/)（和其他服务器端库）

只有最后两个需要有效的互联网连接。

这是演示文稿的 PDF 快照的链接：[https ://docs.google.com/open?id=0B0oR9hvG2VjoRDZZR20zYjVLalU](https://docs.google.com/open?id=0B0oR9hvG2VjoRDZZR20zYjVLalU)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T03:45:33.933

[客户端 GChart](http://code.google.com/p/clientsidegchart/)。全部在您的应用程序中 - 无需从外部服务器加载可视化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-11T19:27:05.797

This is another open source api for charts in GWT hosted on [http://code.google.com/p/gwt-rcharts/](http://code.google.com/p/gwt-rcharts/) you may find it useful. The API works on SVG/VML specification. You may find it quite easy to implement and use. You may find the demo at [http://gwt-rcharts.appspot.com/](http://gwt-rcharts.appspot.com/)

# java - new Float("0.333") 转换我的 0.333 0.333+（小数点后 14 位）

> ID：11477501
> 
> 赞同：0
> 
> 时间：2012-07-13T19:57:35.413
> 
> 标签：java

> **可能重复：**
> [表示中的浮点错误？](https://stackoverflow.com/questions/7581741/floating-point-error-in-representation)

因此，我正在运行此代码以从 aa 文件中读取浮点字符串值并将这些值存储到数组中。当程序从文件中读取“0.333”时，它会创建一个新的浮点值，但该值会转换为 0.33329999446868896！为什么是这样？我该如何解决这个问题？矩阵声明如下：

```
this.matrix = new double[this.getRow()][this.getCol()];
this.bMatrix = new double[this.getRow()];  

try {
        // make sure no blank lines at the end of the file.
        for (int i = 0; (strLine = reader.readLine()) != null; i++) {  
            System.out.println("Line from file #" + i + " " + strLine);
            String[] columns = strLine.trim().split("\\s+");
            for (int j = 0; j < columns.length; j++) {
                if (j < (columns.length - 1)) {
                    //A-matrix
                    this.matrix[i][j] = new Float(columns[j]).floatValue();
                    System.out.println("Element added to A-matrix: " + columns[j]);
                } else {
                    // B-matrix
                    bMatrix[i] = new Float(columns[j]).floatValue();
                    System.out.println("Element added to B-matrix: " + columns[j]);

                }
            }
        }
        showMatrix();
    } catch (IOException | NumberFormatException e) {
        reader.close();

    }
} 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:00:04.050

这与浮点数以二进制表示的方式有关。本质上，您不能精确地表示 0.333。你能得到的最接近的是你看到的数字。如果您想要更短的版本进行打印，请在输出值之前使用 StringFormatter 或其他东西。

# solr - Solr Facet 字段和过滤查询之间的区别

> ID：11477505
> 
> 赞同：9
> 
> 时间：2012-07-13T19:57:50.937
> 
> 标签：solr, stress-testing

我正在使用 SolrMeter 来测试 Apache Solr 搜索引擎。我不清楚 Facet 字段和过滤器查询之间的区别。SolrMeter 教程将此列为 Facet 字段的示例：

```
content
category
fileExtension 
```

这是过滤器查询的一个例子：

```
category:animal

category:vegetable
categoty:vegetable price:[0 TO 10] 
categoty:vegetable price:[10 TO *] 
```

我很难绕过它。有人可以举例说明吗？我可以在不指定构面或过滤器的情况下使用 SolrMeter 吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-13T20:13:36.993

构面字段用于获取有关返回文档的统计信息 - 具体而言，对于该字段的每个值，有多少返回文档具有该字段的该值。因此，例如，如果您有 10 个产品匹配“软地毯”的查询，如果您选择“原产地”，则您可能会得到 6 个与“Oklahoma”相关的文档和 4 个与“Texas”相关的文档。方面字段查询将为您提供数字 6 和 4。

另一方面，过滤器查询用于通过添加另一个约束来过滤返回的结果。要记住的是，用于过滤结果的查询不会影响文档的评分或相关性。例如，您可能会在索引中搜索产品，但您只想返回受地理区域或其他限制的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T20:18:31.133

构面是文档的字段（类型），因此类别是字段。正如 Ansari 所说，构面用于获取统计信息并提供分组功能。`category`您可以在字段上应用分组以将所有内容显示`vegetable`为一组。

**编辑：**关于在特定字段内搜索的部分是错误的。它不会仅在字段内部进行搜索。它应该是“向搜索添加约束”。

执行过滤查询`category:vegetable`将`vegetable`在该`category`字段中搜索，而不在文档的其他字段中搜索。它用于仅搜索特定字段而不是每个字段。有时您知道您想要的词只在一个字段中，因此您可以只搜索那个字段。

# log4net - log4net - 没有产生日志文件

> ID：11477508
> 
> 赞同：0
> 
> 时间：2012-07-13T19:58:00.127
> 
> 标签：log4net

我有这个作为我的配置文件：

```
<configuration>
    <configSections>
        <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,log4net" />
    </configSections>

    <log4net>
        <appender name="RollingFileAppender" type="log4net.Appender.RollingFileAppender">
            <file value="c:\\logging\\EwsSearch.log" />
            <lockingModel type="log4net.Appender.FileAppender+MinimalLock" />
            <appendToFile value="true" />
            <rollingStyle value="Size" />
            <maxSizeRollBackups value="-1" />
            <maximumFileSize value="100KB" />
            <staticLogFileName value="true" />
            <layout type="log4net.Layout.PatternLayout">
                <conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] - %message%newline" />
            </layout>
        </appender>
    </log4net>

    <root>
        <level value="ERROR" />
        <appender-ref ref="RollingFileAppender" />
    </root>

</configuration> 
```

然后我在我的 C# 代码中有：

```
public class VsiEWSSearch
{
    private static readonly ILog logger = LogManager.GetLogger(typeof(VsiEWSSearch));

    public EWSResponse PdeProcessInquiry(int BusinessLineCode, int ClientCaseId, string callingApp)
    {
        XmlConfigurator.Configure(new System.IO.FileInfo("VSI.EWSSearch.config"));

        logger.Error("This is an error"); 
```

即使我调整了目录的权限，也不会生成日志文件。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T11:20:53.710

`root`节点必须在节点内`log4net`。根据配置文件的类型，您需要进行一些进一步的调整：

*   如果您有 log4net 的独立配置文件，则需要删除`configuration`and`configSections`节点。我还认为 log4net 不会找到您的配置文件，除非您指定完整路径（您当然可以这样做，而无需在应用程序中硬编码任何路径）。

*   如果您只是简单地使用 app.config，那么您不需要进一步修改，但您需要在`XmlConfigurator.Configure()`不带任何参数的情况下调用该方法。

注意：您应该`XmlConfigurator.Configure()`在应用程序中只调用一次该方法。

# symfony - 是否有任何使用 facebook/twitter/google+ 进行身份验证的 symfony 捆绑包？

> ID：11477509
> 
> 赞同：8
> 
> 时间：2012-07-13T19:58:06.540
> 
> 标签：symfony

是否有任何使用 facebook/twitter/google+ 进行身份验证的 symfony 捆绑包可以与 symfony 2 一起使用？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-13T20:05:26.173

结帐[HWIOAuthBundle](https://github.com/hwi/HWIOAuthBundle)包，它[有超过 10 个](https://github.com/hwi/HWIOAuthBundle/blob/master/DependencyInjection/Configuration.php#L30)身份验证提供程序

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T20:02:13.057

是的，将[FOSUserBundle](https://github.com/FriendsOfSymfony/FOSUserBundle)与[FOSFacebookBundle](https://github.com/FriendsOfSymfony/FOSFacebookBundle)（用于 Facebook）和[FOSTwitterBundle](https://github.com/FriendsOfSymfony/FOSTwitterBundle)（用于 Twitter）一起使用。但实际上 Google+ 没有捆绑包。

# ruby-on-rails - Rails 一对多关系 - 保持秩序

> ID：11477510
> 
> 赞同：0
> 
> 时间：2012-07-13T19:58:07.740
> 
> 标签：ruby-on-rails, one-to-many

考虑这段代码：

```
class Sheet
    has_many :songs
end

class Song
    belongs_to :sheet
end

sheet = Sheet.find(1)
sheet.songs << Song.find(5)
sheet.songs << Song.find(10)
sheet.songs << Song.find(8) 
```

现在这里的问题是，当我运行下面的代码时，它会返回该表的歌曲列表，但它们的顺序与我在 (5,10,8) 中添加它们的顺序不同。它实际上给了我订购的歌曲`name`。

```
songs = Sheet.find(1).songs 
```

如何保持歌曲的初始顺序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T20:03:33.627

为了有一个默认顺序，你可以做一些事情。

选项 a)

```
class Sheet
    has_many :songs, :order => 'songs.id DESC'
end 
```

选项 b)

```
class Song
    belongs_to :sheet
    default_scope :order => 'songs.id DESC'
end 
```

我不建议使用默认范围，因为它往往会导致更多关联出现问题。

* * *

对不起，我想我读错了。如果您要保持它添加到 Sheet 模型的顺序，您将需要一个具有某种性质的数据透视表 - 创建一个 has_many :through

它会变成：

```
class Sheet
    has_many :songs, :through => :sheet_songs, :order => 'sheet_songs.created_at DESC'
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T20:06:42.843

也许存储一个时间戳，并根据输入的时间对结果进行排序......我不确定这是最明智的购买方式......

# jquery - Jquery.css 在 IE 和 Webkit（Chrome、Safari）上执行不需要的闪烁效果，但 Firefox 没问题

> ID：11477512
> 
> 赞同：4
> 
> 时间：2012-07-13T19:58:17.140
> 
> 标签：jquery, firefox, google-chrome, webkit, parallax

我有以下代码：

```
$(document).ready(function(){
   $(window).scroll(function(){    
      Topo =  $(window).scrollTop();
      ObjScrollASoda.css({
          'marginTop' : (Topo - 800)+'px'
      });
   });
}); 
```

（注：ObjScrollASoda 是罐头的 jquery 对象）

这是复制 Trufa 提出的问题的小提琴：http: [//jsfiddle.net/VcvJe/1/](http://jsfiddle.net/VcvJe/1/)

在蓝色部分，有一个蓝色的罐子，它会随着页面“滚动”产生类似视差的效果。这是问题所在，因为我只是在用户滚动页面时设置 css，只有在 Chrome（和其他 webkit 浏览器）中才会出现闪烁效果（不需要）。我注意到它并没有在 Firefox 中发生。有谁知道如何避免这种“闪烁”效果？

这是一个视频，可以更好地解释正在发生的事情： [http ://www.youtube.com/watch?v=SqDmOx6XY-M](http://www.youtube.com/watch?v=SqDmOx6XY-M)

（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T10:31:28.207

我查看了您的**YouTube 视频**，最好的方法是**`position:fixed`**在不移动***Azul Can***时设置或**`position:absolute`**在移动时设置。

也就是说，这个[**SO Member's Answer**](https://stackoverflow.com/a/5903078/1195891)`.scrollTop();`创建了一个简单的插件来使用方法来做到这一点。

同一个***SO Question***页面也有许多其他有用的答案。

**参考：** [**jsFiddle with Azul Can for Chrome**](http://jsfiddle.net/y4JnS/show/)

查看没有**地址栏中**的**jsFiddle**以访问**Edit Page**。`/show/`

 ***** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T08:28:11.843

也许我没有完全理解这个问题，但听起来你希望罐子在用户向下滚动页面时保持在原位。我认为您描述的闪烁效果是由于用户滚动时罐子的重新定位引起的。

使用`position: fixed`是一个可接受的选择吗？请参阅[http://jsfiddle.net/VcvJe/8/](http://jsfiddle.net/VcvJe/8/)进行演示。

使用固定位置，元素永远不会重新定位，因此不会出现闪烁。但是，它在 IE<7 中不起作用，因为不支持`position: fixed`.****

# c - 从 charset 有效地创建一个顺序单词表

> ID：11477514
> 
> 赞同：3
> 
> 时间：2012-07-13T19:58:48.893
> 
> 标签：c, string, combinations

我需要找到一种有效的方法来创建从 C/C++ 中的给定字符集创建的顺序单词列表。让我给你举个例子：

如果字符集是“abc”，算法应该输出：

```
 a
  b
  c
 aa
 ab
 ac
 ba
 bb
 bc
 ca
 cb
 cc
aaa
aab 
... 
```

我有一些想法，但都需要太多的数学，我真的需要一个快速的解决方案。谁有想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T20:06:04.483

这实际上是对这个答案的轻微修改：

[什么是使所有可能的字符串组合的最佳算法？](https://stackoverflow.com/questions/11472566/what-is-optimal-algorithm-to-make-all-possible-combinations-of-a-string/11473049#11473049)

使用上面的答案，您可以在例程周围放置一个包装器，该例程基本上对主输入字符串进行排列，让排列查找器找到您的预排列输入字符串的所有排列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T14:29:54.740

```
#include <stdio.h>
#include <string.h>

char* numToColumn(int n, char* outstr, const char* baseset){
    char* p = outstr;
    int len;
    len = strlen(baseset);
    while(n){
        *p++ = baseset[0 + ((n % len == 0)? len : n % len) - 1];
        n = (n - 1) / len;
    }
    *p = '\0';
    return strrev(outstr);//strrev isn't ANSI C
}

char* incrWord(char* outstr, const char* baseset){
    char *p;
    int size,len;
    int i,carry=1;

    size = strlen(baseset);
    len = strlen(outstr);
    for(i = len-1; carry && i>=0 ;--i){
        int pos;
        pos = strchr(baseset, outstr[i]) - baseset;//MUST NOT NULL
        pos += 1;//increment
        if(pos == size){
            carry=1;
            pos = 0;
        } else {
            carry=0;
        }
        outstr[i]=baseset[pos];
    }
    if(carry){
        memmove(&outstr[1], &outstr[0], len+1);
        outstr[0]=baseset[0];
    }
    return outstr;
}

int main(){
    const char *cset = "abc";
    char buff[16];
    int i;

    for(i=1;i<16;++i)//1 origin
        printf("%s\n", numToColumn(i, buff, cset));

    strcpy(buff, "cc");//start "cc"
    printf("\nrestart\n%s\n", buff);
    printf("%s\n", incrWord(buff, cset));
    printf("%s\n", incrWord(buff, cset));
    return 0;
}
/* RESULT:
a
b
c
aa
ab
ac
ba
bb
bc
ca
cb
cc
aaa
aab
aac

restart
cc
aaa
aab
*/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T13:10:12.187

以下java代码工作正常。

```
class Combination
{
static String word;
static int length;
static int[] num;
public static void main(String args[])
{
word = "abc";
length = word.length();
num = new int[length + 1];
for(int i=1; i<=length-1; i++)
    num[i] = 0;
    num[length] = 1;        
    while(num[0] == 0)
    {
        display();
        System.out.println();
        increment(length);
    }
}
public static void increment(int digit)
{
    if(num[digit] + 1 <= length)
        num[digit]++;
    else
    {
        num[digit] = 1;
        increment(digit-1);
    }
}
public static void display()
{
    for(int i=1; i<=length; i++)
    {
        if(num[i] == 0)
            System.out.print(' ');
        else
            System.out.print(word.charAt(num[i]-1));
    }
}
} 
```

我不确定它的复杂性。但我不认为它具有很高的复杂性。

# c# - 自定义验证错误模板不尊重 ZIndex

> ID：11477518
> 
> 赞同：2
> 
> 时间：2012-07-13T19:59:19.387
> 
> 标签：c#, wpf, validation, xaml, datatemplate

我有一个定义为 DataTemplate（用于“OrderEntryViewModel”）的视图，其中包含一个 3 行网格内的 Menu、ContentPresenter 和 Expander。ContentPresenter 的内容绑定到另一个视图模型“OrderViewModel”（有另一个 DataTemplate 定义的视图）。扩展器的 ZIndex 为 99，因此当它向上扩展时，它会扩展 OVER 任何其他控件（即 ContentPresenter）。

这一切都按预期工作，除了 ContentPresenter 的内容（OrderViewModel）有数据错误时......我的 OrderView 围绕具有无效数据的控件显示自定义验证错误模板。发生的情况是，当我展开扩展器时，ContentPresenter 内的所有控件都被覆盖了，但我显示的红色边框和感叹号仍然通过扩展器可见！我已经验证了我的扩展器的 ZIndex 为 99，而 ContentPresenter 的为 0。有人可以帮我解决这个问题吗？

这里有一些图像可以帮助解释：

[第一张图片](http://i.imgur.com/YS1h2.jpg)显示了未展开时视图的外观。

[第二张图片](http://i.imgur.com/lceBo.jpg)显示了我展开时的视图。

我这样定义验证错误模板：

```
<ControlTemplate x:Key="ValidationErrorTemplate">
    <DockPanel LastChildFill="true">
        <Border Background="Red" DockPanel.Dock="right" Margin="5,0,0,0" Width="10" Height="10" CornerRadius="5" 
                ToolTip="{Binding AdornedElement.(Validation.Errors).CurrentItem.ErrorContent, ElementName=customAdorner}">
            <TextBlock Text="!" VerticalAlignment="center" HorizontalAlignment="center" FontWeight="Bold" Foreground="White"/>
        </Border>
        <AdornedElementPlaceholder x:Name="customAdorner" VerticalAlignment="Center">
            <Border BorderBrush="red" BorderThickness="1" />
        </AdornedElementPlaceholder>
    </DockPanel>
</ControlTemplate> 
```

并将其分配给这样的特定控件（这就是我为我的 TextBox 做的方式）：

```
<Style TargetType="{x:Type TextBox}" x:Key="ValidatedStyleTextBox">
    <Style.Triggers>
        <DataTrigger Binding="{Binding IsLocked}" Value="True">
            <Setter Property="Validation.ErrorTemplate" Value="{x:Null}"/>
        </DataTrigger>
        <DataTrigger Binding="{Binding IsLocked}" Value="False">
            <Setter Property="Validation.ErrorTemplate" Value="{StaticResource ValidationErrorTemplate}"/>
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T13:11:24.460

[这个解决方案](https://stackoverflow.com/questions/1478271/wpf-how-can-i-place-a-usercontrol-over-an-adornedelementplaceholder)对我有用......只是在与我的扩展器相同的级别添加了一个 AdornerDecorator，所以现在，AdornerDecorator 内部的控件使用该图层而不是窗口中的顶层图层来显示

# actionscript-3 - 最佳开源瓦片地图编辑器（基于矢量的动作脚本）

> ID：11477522
> 
> 赞同：4
> 
> 时间：2012-07-13T19:59:26.327
> 
> 标签：actionscript-3, apache-flex, map, adobe

我正在寻找一个在线瓷砖地图编辑器。经过大量搜索后，我在[Tiled](http://www.mapeditor.org/) (http://www.mapeditor.org/) 上停了下来，但它是一个离线解决方案。我正在寻找像[http://www.youtube.com/watch?v=v3Nq9I7CPPU](http://www.youtube.com/watch?v=v3Nq9I7CPPU) ( [Dofus](http://dofus2.com) ?) 这样的编辑器，这个演示看起来很棒[http://www.youtube.com/watch?v=wk5QYPtDQ4U&feature=related](http://www.youtube.com/watch?v=wk5QYPtDQ4U&feature=related)

寻找[Dofus](http://dofus2.com)将我指向游戏。我只想要一个可以以预定义的 XML/JSON 模式导出的编辑器，并且我应该能够将它加载到我的 ActionScript 游戏中。

请指出正确的资源来实现 Dofus（虚拟世界）之类的东西。

示例： http: [//www.computerarts.co.uk/tutorials/create-3d-custom-map-illustrator](http://www.computerarts.co.uk/tutorials/create-3d-custom-map-illustrator)

# c++ - 何时以及为何在堆 C++ 上声明成员变量

> ID：11477523
> 
> 赞同：18
> 
> 时间：2012-07-13T19:59:28.240
> 
> 标签：c++, class, heap-memory, member-variables

好的，所以我是 C++ 编程的新手，我已经四处寻找了几天的决定性答案。我应该什么时候在堆和堆栈上声明成员变量？我发现的大多数答案都涉及其他问题，但我想知道何时最好将堆用于成员变量，以及为什么堆成员而不是堆叠成员更好。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-13T20:04:03.907

首先要掌握两个重要概念：

1.  应该避免考虑“堆”和“堆栈”。这些是您的编译器/平台的实现细节，而不是语言的实现细节。¹ 相反，从*对象生命周期*的角度来考虑：对象的生命周期应该与其“父”的生命周期相对应，还是应该比它更长？如果您需要后者，那么您需要使用`new`（直接或间接）动态分配对象。

2.  成员变量的生命周期**总是**与其父变量相同。成员变量可能是一个指针，它指向的对象很可能有一个独立的生命周期。但是指向的对象不是成员变量。

但是，您的问题没有一般性的答案。粗略地说，除非有充分的理由，否则不要动态分配。正如我上面所暗示的，这些原因通常对应于生命周期需要与其“父级”不同的情况。

* * *

[1.确实，C++标准并没有真正谈论“堆”和“堆栈”。在优化或一般考虑性能时，它们很重要，但从程序功能的角度来看，它们大多无关紧要。]

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-13T20:10:05.330

成员变量是类本身的成员。它们既不在堆上也不在堆栈上，或者更确切地说，它们在类本身所在的地方。

添加间接级别并在堆上单独分配成员的原因很少：多态性（如果成员的类型并不总是相同）是迄今为止最常见的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T20:10:55.577

直截了当地了解一些术语：你称之为 a`heap`并`stack`描述对象的生命周期。第一个意味着生命周期是`dynamic`，第二个`automatic`和第三个（你没有提到）是`static`。

通常你需要`dynamic`一个对象的生命周期，当它应该超过它被创建的范围时。另一个常见的情况是你希望它在不同的父对象之间共享。此外，当您使用高度面向对象的设计（使用大量多态性，不使用值）时，动态生命周期也是必要的，例如`Qt`.

需要动态生命周期的成语是 pimpl-idiom。

大多数通用编程库更侧重于值和值语义，因此您不会过多地使用动态绑定，并且自动生命周期变得更加普遍。

还有一些示例，出于更多实现特定的原因需要动态分配：

*   动态大小的对象（容器）
*   处理不完整的类型（参见 pimpl-idiom）
*   类型的简单可空性

所有这些都只是一般指导方针，必须根据具体情况决定。一般来说，比起动态对象，更喜欢自动对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T20:08:31.843

**堆栈**指的是`call stack`. 函数调用、返回地址、参数和局部变量都保存在调用堆栈中。每当您传递参数或创建局部变量时，都会使用堆栈内存。堆栈只有临时存储。一旦当前函数超出范围，您就无法再访问任何参数变量。

**堆**是用于动态分配的大型内存池。当您使用`new`运算符分配内存时，此内存是从堆中分配的。当您创建不想在当前函数终止（失去作用域）后丢失的对象时，您希望分配堆内存。对象存储在堆中，直到使用`delete`或释放空间`free()`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-07T06:16:27.213

考虑这个例子：

你实现了一个链表，它有一个类节点的字段成员头。
每个节点都有一个字段成员`next`。如果此成员属于 Node 类型而不是 Node*，则每个 Node 的大小将取决于链中它之后的节点数量。

例如，如果您的列表中有 100 个节点，那么您的头成员将是巨大的。因为它在自身内部保存下一个节点，所以它需要有足够的大小来保存它，并且 next 保存下一个，依此类推。所以头部必须有足够的空间来容纳 99 个节点和下一个 98 等等......

你想避免这种情况，所以在这种情况下，最好在每个节点中都有指向下一个节点的指针，而不是下一个节点本身.

# ruby-on-rails - Rails 使用正确的 URL 渲染命名路由

> ID：11477544
> 
> 赞同：3
> 
> 时间：2012-07-13T20:00:44.217
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我的rails应用程序中有以下路线

```
match '/settings', to: 'Users#edit', as: 'settings' 
```

以及对应的控制器代码

```
def edit
  @user = current_user
end

def update
  correct_user
  @user = User.find(params[:id])
  if !@user.authenticate(params[:old_password])
    flash[:error] = 'Old password did not match'
    redirect_to settings_path
  elsif @user.update_attributes(params[:user])
    flash[:success] = "Settings updated"
    redirect_to settings_path
  else
    render 'edit'
  end
end 
```

我的编辑页面现在只是一个密码更改页面，当我访问时，`/settings`我看到了我想要排除的页面。当 I`redirect_to settings_path`时， url 仍然存在`/settings`，这是我想要的行为。

在我的`edit`模板中，我有代码来处理对象错误并将它们呈现在页面上。时`render 'edit`，如果存在对象错误，则触发此代码。但是，如果我重定向到该页面，则代码不存在。所以我需要打电话`render 'edit'`查看错误。

但是，调用`render 'edit'`会导致 URL 更改为`/users/:id/edit`，这正是我**不**想要的。我希望 URL`/settings`在调用后保留`render 'edit'`。我怎样才能做到这一点？

**注意：**我已经搜索过 SO 和互联网的其他部分，但没有找到适合我需要的内容。有一两个类似问题的 SO 主题，但它们都使用闪烁和 hacky 基于重定向的解决方法，这不是我想要的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T20:16:42.607

您可能希望像这样设置您的路线：

```
match 'settings': 'users#edit', via: :get
match 'settings': 'users#update', via: :put 
```

然后应该像这样声明表单：

```
<%= form_for @user, url: settings_path %> 
```

在你的控制器中，确保你是这样调用`render`的：

```
render action: "edit" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T20:15:09.440

您可能有一个不好`link_to`的看法，即分别使用旧样式`:controller`和`:action`参数而不是使用`settings_path`.

请记住，如果有两个路由到同一个控制器和操作对，则定义的第一个路由具有优先级。首先定义您的自定义路由以确保默认使用它。

# perl - Perl：在 if-else 语句中接受用户输入

> ID：11477545
> 
> 赞同：3
> 
> 时间：2012-07-13T20:01:01.457
> 
> 标签：perl, input, if-statement

我在 If-Else 块中接受用户输入。校验码：

```
if ( $svr == 1 ) {
    print "Enter Datbase Name\n";
    my $db = <>;
    chomp($db);
} elsif ( $svr == 2 ) {
    print "Enter Data Source Name (DSN)\n";
    my $db = <>;
    chomp($db);
} 
```

当我在后面的语句中引用 $db 时，我收到以下错误：

“使用未初始化的值 $db”

这是我使用 $db 导致错误的语句：

```
my $data_source = 'DBI:mysql:' . $db . ':' . $host; 
```

请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T20:05:59.960

第一个`$db`范围为“then”块，第二个`$db`范围为“else”块。您需要`$db`在`if`.

```
my $db;
if($svr==1) {
 print "Enter Datbase Name\n";
 $db=<>;
 chomp($db);
} elsif($svr==2) {
 print "Enter Data Source Name (DSN)\n";
 $db=<>;
 chomp($db);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T20:04:48.437

`$db`在 if/else 块之外定义。通过在块内定义它，您将变量的范围限制为这些块：

```
my $db;
if($svr==1) {
  print "Enter Datbase Name\n";
  $db=<>; 
  chomp($db);
} elsif($svr==2) {
  print "Enter Data Source Name (DSN)\n";
  $db=<>;
  chomp($db);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T20:06:56.213

该`my`语句在范围内声明了一个变量，即花括号。它没有在外面定义。如果你把`my $db`if/else 块放在外面，它应该可以工作。如果没有公共范围，则必须使用`our`. 详情请参阅`perldoc -f my`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-14T00:21:32.617

你有答案，但除非有更多我没有看到的逻辑，否则你可能会让自己更容易......

```
if($svr==1) {
  print "Enter Datbase Name\n";
} elsif($svr==2) {
  print "Enter Data Source Name (DSN)\n";
}

my $db=<>;
chomp($db); 
```

甚至

```
print $svr==1 ? "Enter Datbase Name\n" : "Enter Data Source Name (DSN)\n";
my $db=<>;
chomp($db); 
```

这不仅仅是化妆品。不要重复自己 (DRY) 很重要，因为将来，如果您需要更改某些内容，您可能不记得在每个位置都进行更改。这是编写好代码的主动步骤。

如果这些 if 语句中有更多逻辑，请尝试类似

```
sub prompt {
  my $question = shift;
  print $question . "\n";
  my $response = <>;
  chomp $response;
  return $response;
}

my $db;
if($svr==1) {
  $db = prompt("Enter Datbase Name");
} elsif($svr==2) {
  $db = prompt("Enter Data Source Name (DSN)");
} 
```

# excel - 如何随机化 Excel 行

> ID：11477546
> 
> 赞同：55
> 
> 时间：2012-07-13T20:01:06.030
> 
> 标签：excel, random

如何随机化 Excel 中的大量行？

```
For example I have an excel sheet with data in 3 rows. 
1 A dataA
2 B dataB
3 C dataC

I want to randomize the row order. For example
2 B dataB
1 A dataA
3 C dataC 
```

我可以创建一个新列并使用 =RAND() 用随机数填充它并根据该列进行排序。

但这是最好的方法吗？兰德方程将提供多达[一百万个随机数](http://support.microsoft.com/kb/86523)，我有一百万行的四分之一，所以它似乎可以工作。

谢谢

我搜索了一下，虽然[这个关于随机化列的答案](https://stackoverflow.com/questions/10651553/randomize-columns)很接近，但似乎有点矫枉过正。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-04-03T14:55:08.537

也许充满随机数的整列并不是最好的方法，但它似乎可能是@mariusnn 提到的最实用的方法。

在那张纸条上，这让我在使用 Office 2010 时感到一阵难过，虽然通常[的答案类似于 lifehacker](http://www.lifehacker.com.au/2012/03/how-to-sort-a-list-randomly-in-excel/)工作中的答案，但我只是想分享一个额外的步骤，以使数字独一无二：

1.  在要随机化的列表旁边创建一个新列
2.  在`=rand()`新列的第一个单元格中输入 - 这将生成一个介于 0 和 1 之间的随机数
3.  用该公式填充该列。最简单的方法可能是：

    *   沿着新列向下直到要随机化的最后一个单元格
    *   按住 Shift 并单击最后一个单元格
    *   按 Ctrl+D
4.  现在你应该有一列相同的数字，即使它们都是随机生成的。

    ![随机数……是一样的……](../Images/7db186d256b788062bc18022a8b8d3a4.png)

    这里的诀窍是重新计算它们！转到*公式*选项卡，然后单击*立即计算*（或按 F9）。

    ![实际上是随机数！](../Images/d2a66f2b7e04e8cac1b5bfa9c0294fb3.png)

    现在，该列中的所有数字实际上都是随机生成的。

5.  转到*主页*选项卡，然后单击*排序和筛选*。选择您想要的任何顺序（*从最小到最大*或*从最大到最小*） - 无论哪一个都会给您一个相对于原始订单的随机顺序。*然后在排序警告*提示您*展开选择*时单击确定。

6.  您的列表现在应该是随机的！如果需要，您可以摆脱随机数列。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-13T20:05:46.137

我通常按​​照您的描述进行操作：
添加一个带有随机值 ( `=RAND()`) 的单独列，然后对该列执行排序。

可能是更复杂和更漂亮的方式（使用宏等），但这对我来说足够快和简单。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-09T16:58:22.143

这是一个宏，可让您随机播放列中选定的单元格：

```
Option Explicit

Sub ShuffleSelectedCells()
  'Do nothing if selecting only one cell
  If Selection.Cells.Count = 1 Then Exit Sub
  'Save selected cells to array
  Dim CellData() As Variant
  CellData = Selection.Value
  'Shuffle the array
  ShuffleArrayInPlace CellData
  'Output array to spreadsheet
  Selection.Value = CellData
End Sub

Sub ShuffleArrayInPlace(InArray() As Variant)
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
' ShuffleArrayInPlace
' This shuffles InArray to random order, randomized in place.
' Source: http://www.cpearson.com/excel/ShuffleArray.aspx
' Modified by Tom Doan to work with Selection.Value two-dimensional arrays.
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
  Dim J As Long, _
    N As Long, _
    Temp As Variant
  'Randomize
  For N = LBound(InArray) To UBound(InArray)
    J = CLng(((UBound(InArray) - N) * Rnd) + N)
    If J <> N Then
      Temp = InArray(N, 1)
      InArray(N, 1) = InArray(J, 1)
      InArray(J, 1) = Temp
    End If
  Next N
End Sub 
```

您可以阅读评论以查看宏在做什么。以下是宏的安装方法：

1.  打开 VBA 编辑器 (Alt + F11)。
2.  右键单击当前打开的电子表格下的“ThisWorkbook”（在“VBAProject”之后的括号中列出），然后选择“插入/模块”。
3.  粘贴上面的代码并保存电子表格。

现在您可以将“ShuffleSelectedCells”宏分配给图标或热键以快速随机化您选择的行（请记住，您只能选择一列行）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-09T19:13:08.927

使用 Excel Online (Google Sheets).. 并为 Google Sheets 安装[Power Tools](https://workspace.google.com/marketplace/app/power_tools/1058867473888) .. 然后在 Google Sheets 中转到 Addons 选项卡并**启动**Power Tools。然后`Randomize`从 Power Tools 菜单中选择。选择`Shuffle`。然后在 Excel 表中选择您的测试选项。然后从 Power Tools 菜单中选择`Cells in each row`并单击。`Shuffle`这将相互独立地洗牌每一行的选定单元格。

# ios - IOS：从 nsstring 中留出空间并管理逗号

> ID：11477547
> 
> 赞同：1
> 
> 时间：2012-07-13T20:01:15.703
> 
> 标签：ios, nsstring, nsarray

我有这个 nsstring

```
Manhattan, New York, Stati Uniti 
```

我想留出所有空间，我可以用@“”来替换字符串，这对我来说没问题；我的问题是我想将所有元素用逗号分隔在一个数组中，这可能吗？

例如数组将是数组 = [Manhattan] [New York] [Stati Uniti]

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T20:05:00.160

使用: `NSString`_[`componentsSeparatedByString`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/componentsSeparatedByString%3a)

```
NSString *list = @"Manhattan, New York, Stati Uniti";
NSArray *cities = [list componentsSeparatedByString:@", "]; 
```

`cities`现在持有：`{ @"Manhattan", @"New York", @"Stati Uniti" }`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T20:05:26.420

尝试这样的事情

```
NSArray *newArray = [stateString componentsSeparatedByString:@", "]; 
```

# ruby-on-rails - 通过终端添加列

> ID：11477553
> 
> 赞同：15
> 
> 时间：2012-07-13T20:01:40.143
> 
> 标签：ruby-on-rails, activerecord

如何通过终端使用 ActiveRecord 将列添加到表中。我正在尝试使用 add_column 方法，但它不起作用。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-13T20:17:43.313

如果您与团队一起工作，最好编写迁移并且必须这样做。当您进行数据库更改时，每个开发人员的环境也必须更新。否则，您将遇到一些疯狂的开发人员。

```
rails generate migration AddPartNumberToProducts part_number:string 
```

会产生

```
class AddPartNumberToProducts < ActiveRecord::Migration
  def change
    add_column :products, :part_number, :string
  end
end 
```

然后你运行迁移

```
rake db:migrate 
```

[http://guides.rubyonrails.org/migrations.html](http://guides.rubyonrails.org/migrations.html)

**编辑：**

对于 Rails 控制台命令行，请检查 @tadman 的答案或使用 Bengala 建议的内容

```
ActiveRecord::Migration.add_column :products, :part_number, :string 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2016-05-24T17:10:32.330

您可以直接在 Rails 控制台中运行`rails c`迁移`ActiveRecord::Migration`

出于您的目的，下一个命令将执行您的要求：

```
>   ActiveRecord::Migration.add_column :table_name, :field_name, :field_type 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-13T20:17:21.843

如果您只是随便玩玩，通常使用某种 SQLite 客户端比通过 Rails DB 层更容易操作数据库。

如果您正在为项目执行此操作，请创建适当的迁移文件并运行它。

如果您决定这样做，`add_column`则可以通过`ActiveRecord::Base.connection`驱动程序对象使用该方法。

# ruby-on-rails-3 - 更改为 capybara-webkit 后单个测试失败

> ID：11477554
> 
> 赞同：4
> 
> 时间：2012-07-13T20:01:45.843
> 
> 标签：ruby-on-rails-3, google-chrome, selenium, rspec, capybara

我已经为我的 rails 3.2 应用程序编写了一些 RSpec 测试，因为我对弹出的浏览器感到厌烦，我试图从 firefox 更改为`capybara-webkit`. 在此之后，所有测试仍然运行，除了一个。失败的行是：

```
expect { click_button "Create" }.to change(Answer, :count).by(count) 
```

如果我删除期望并在前后添加一个截屏方法，我可以看到测试运行正确。但是，如果我使用 Debugger，日志会显示记录是在第二个屏幕截图行之后创建的。我可以永远等待 click_button 和相应的控制器动作在下一行执行后运行。

“创建”按钮是一个标准的 html 按钮，创建动作不涉及任何 JS。某人对这种奇怪的行为有解释吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T23:19:12.053

Capybara 将点击操作发送到服务器和您的测试检查数据库之间存在竞争条件。

解决此问题的最简单方法是在检查之前等待：

```
expect { click_button "Create"; sleep 2 }.to change(Answer, :count).by(count) 
```

我不喜欢这个。更好的测试方法是从最终用户的角度进行检查。

例如，单击“创建”后，用户是否在答案页面上看到答案？

```
fill_in :title, :with => "My answer"

click_button 'Create'

page.should have_text "My answer" 
```

# c# - 如何从 BackgroundWorker 返回列表以用于 UI 线程的下一行代码？

> ID：11477558
> 
> 赞同：2
> 
> 时间：2012-07-13T20:02:59.710
> 
> 标签：c#, winforms, backgroundworker

我正在尝试编写我的应用程序的一部分，该应用程序运行一个`BackgroundWorker`执行耗时操作的进程。在主线程中，计时器更新进度条（这是[此问题](https://stackoverflow.com/questions/11476364/how-do-i-set-a-progressbar-to-increment-at-each-tick-of-a-timer/11476468#11476468)的延续）。但是，此代码显示 no `MessageBoxes`。`foreach (String word in this.words)`在事件处理程序的行上设置断点`SearchButton_Click`表明`this.words`没有值，即`this.words.Count() == 0`.

```
public partial class Form1 : Form
{
    System.Windows.Forms.Timer searchProgressTimer;
    List<String> words;

    public Form1()
    {
        InitializeComponent();

        words = new List<String>(3);
    }

    private void SearchDatabase_Click(object sender, EventArgs e)
    {
        this.searchProgressTimer.Start();
        SearchBackgroundWorker.RunWorkerAsync();

        foreach (String word in this.words) // BREAKPOINT HERE
            MessageBox.Show(word);
    }

    private void SearchBackgroundWorker_DoWork(object sender, DoWorkEventArgs e)
    {
        // Time-consuming operation
        String filename = @"http://www.bankofengland.co.uk/publications/Documents/quarterlybulletin/qb0704.pdf";
        WebClient webClient = new WebClient();
        webClient.DownloadFileAsync(new Uri(filename), @"file.pdf");
        List<String> word_result = new List<String> { "word1", "word2", "word3" };
        e.Result = word_result; // e.result is an Object, and word_result is a List.
    }

    private void SearchBackgroundWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        this.searchProgressTimer.Stop();
        this.searchProgressBar.Value = 0;
        this.words = (List<String>)e.Result;
    }   
} 
```

我对为什么会发生这种情况的猜测是因为在主 UI 线程移动到循环`BackgroundWorker`之前线程尚未完成其操作。`foreach`我想我理解那部分。但是，由于我想在后台线程中执行耗时的操作，因此进度条可以在所述操作运行时更新其值，然后`BackgroundWorker`在完成后立即使用结果，我该怎么做？

如果我的标题也没有得到理解，请编辑我的标题。我不知道该怎么表达。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T20:08:53.827

在 RunWorkerCompleted 事件中做任何你想做的事情：

```
private void SearchBackgroundWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    this.searchProgressTimer.Stop();
    this.searchProgressBar.Value = 0;
    this.words = (List<String>)e.Result;

    foreach (String word in this.words) // BREAKPOINT HERE
        MessageBox.Show(word);
} 
```

由于您是从后台工作人员那里获取此信息，因此您知道您拥有列表的唯一方法是工作人员完成时。

# xml - 意外的 HTTP 响应，覆盖强制 gzip 压缩？

> ID：11477559
> 
> 赞同：0
> 
> 时间：2012-07-13T20:03:01.627
> 
> 标签：xml, http, encoding, http-headers, gzip

我正在尝试请求和解析[XML-file](http://nesstar.ess.nsd.uib.no/obj/fDatafile/ESS5e02.0_F1)，但服务器以`gzip`Content-Encoding 响应，即使我没有在 Accept-Encoding 标头中请求它。

现在，默认情况下返回一个 gzipped 响应是出乎意料的，但并没有错。但是，我似乎无法请求非压缩响应。我希望标题

```
Accept-Encoding: gzip;q=0, deflate;q=0 
```

会做的伎俩，但[显然不是](http://redbot.org/?id=jnzGns)。

我正在使用的库（rdflib）也无法处理链接/XML文件，所以我猜测服务器配置不正确？通过浏览器一切正常，所以我不确定。

有没有办法覆盖`gzip`内容编码？还是这种行为根本不正确？

# apache-flex - Flex DataGrid：将项目侦听器添加到单元格以侦听同一行的另一个单元格中的 ITEM_EDIT_BEGIN

> ID：11477560
> 
> 赞同：1
> 
> 时间：2012-07-13T20:03:01.590
> 
> 标签：apache-flex, addeventlistener, flex-datagrid

我有点难为我应该如何去做某事。

我有一个带有一堆列的 FlexDataGrid。其中一列有一个 ItemRenderer。我希望此列中的所有单元格都侦听事件。我想要监听的事件是当有人开始编辑 ItemRenderered 单元格所在的同一行中的单元格时。

所以我在我的 ItemRenderer 中有这个代码，它被应用于列中的每个单元格：

```
this.addEventListener(FlexDataGridEvent.ITEM_EDIT_BEGINNING, showPopUp); 
```

当调用 showPopUp 时，这个 ItemRenderer 下会出现一个按钮。

问题是，我不知道如何使 eventListener 工作。当 ITEM_EDIT_BEGINNING 事件在不同的单元格中发生时，如何让此项目渲染器知道？

我完全被难住了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T21:58:47.340

您的项目渲染器实际上是一个不同的组件，因此如果您使用 this 关键字调度它们，则其他单元格/项目渲染器不会看到它们。

可能比您预期的要多一些，但这就是您完成类似事情的方式

1）您将需要创建一个自定义事件，您可以使用该事件传递行号。像这样的东西会起作用：

```
package
{
    import flash.events.Event;

    public class EditRowEvent extends Event
    {
        public function EditRowEvent(type:String, rowEditingIn:Number, bubbles:Boolean=false, cancelable:Boolean=false)
        {
            rowEditing = rowEditingIn;
            super(type, bubbles, cancelable);
        }

        public var rowEditing : Number;
    }
} 
```

2）您需要在编辑它时将其发送到所有项目渲染都可以看到的东西。类似于父网格的东西：

```
DataGrid(this.parentDocument).dispatchEvent( new EditRowEvent( 'beginEdit', this_renderers_row ) ); 
```

3）您还需要在父级上监听此事件（在初始化项目渲染器时执行此操作）：

```
protected function onCreationComplete(event:FlexEvent=null):void
        {
            DataGrid(this.parentDocument).addEventListener( 'beginEdit' , handleEditOnRow );
        } 
```

4) 处理在该特定项目渲染器的行上开始编辑时您想要发生的事情

```
 public function handleEditOnRow ( event : EditRowEvent ) : void {
            if( this_renderers_row == event.rowEditing ){
                // code to execute when someone starts editing this row!
            }
        } 
```

# php - 使用 mysql 在 datepicker 中禁用天数

> ID：11477561
> 
> 赞同：0
> 
> 时间：2012-07-13T20:03:13.600
> 
> 标签：php, jquery, mysql, mobile, datepicker

```
I have been battling with this jquery mobile datepicker for 2 days now!! 
```

这是我的代码，我正在检索布尔值设置为 1 的日期（禁用天数），我无法让 datepicker 禁用它们！请帮忙..我正在尝试从我的mysql查询中将一个带有json的数组返回给datepicker

`booked_dates.php`内容：

```
<?php
require_once("connect.php");
mysql_select_db("eyecandysf");
$booked_date = mysql_query("SELECT date, FROM date_time WHERE booking_status !=0  ");

 while ($result = mysql_fetch_array($booked_date)){

    $dates[] =  $result['date'];
}
echo json_encode($dates);

?> 
```

`main.php`内容：

```
<html>
<head>

<link rel="stylesheet" type="text/css"       href="http://code.jquery.com/mobile/latest/jquery.mobile.min.css" />
<link rel="stylesheet" type="text/css" href="http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.min.css" /> 
<link rel="stylesheet" href="http://mobile-bydesign.com/mmc/mobile/3.0.4/themes/eyecandysf22.css" />

<link href="http://mobile-bydesign.com/mmc/mobile/3.0.4/photoswipe.css" type="text/css" rel="stylesheet" />

<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script> 
<script type="text/javascript" src="http://code.jquery.com/mobile/latest/jquery.mobile.min.js"></script>
<script type="text/javascript" src="http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.core.min.js"></script>
<script type="text/javascript" src="http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.mode.calbox.min.js"></script>
<script type="text/javascript" src="datepicker_mobile.js"></script>
<script type="text/javascript">
   $.getJSON('booked_dates.php', function(data) {
     var bookedDays = data;
    });

  function isAvailable(date){
   var dateAsString = date.getFullYear().toString() + "-" + (date.getMonth()+1).toString() + "-" + date.getDate();
   var result = $.inArray( dateAsString, bookedDays ) ==-1 ? [true] : [false];
    return result
    }

    $('#date').datepicker({minDate: 0, maxDate: "+2M", beforeShowDay: isAvailable});

   </script>
<style>
 .ui-select .ui-btn select{
   font-size: 50px;
   }

</style>

</head>

<body>

<form data-ajax="false" id="date" action="time.php" method="post">

<div id="dateDiv" data-role="fieldcontain">    
    <label for="mydate" class="ui-hidden-accessible">date </label>
    <input  name="date" type="date" id="date" data-theme="b" data-role="datebox" value="" placeholder="date"
      data-options='{"mode": "calbox", "afterToday": true,"blackDays": [1], "maxDays": 65}'/>
        </div>
  <input type="submit" value="select time" name="submit" />
  </form>
  </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:21:00.653

您的代码的问题是该`bookedDays`变量仅在 ajax 回调中定义（它是一个局部变量）。它甚至在全局范围内完全未定义。

所以：

```
var bookedDays = [];

$(document).ready(function(){
   $.getJSON('booked_dates.php', function(data) {
     bookedDays = data;
     });
}); 
```

这将确保您使用全局变量，并防止在 ajax 调用完成之前访问它时出错。

`ISO`编辑：此外，为避免日期格式问题，请在 javascript 端使用日期：

```
var dateAsString = date.toISOString().substring(0,10); 
```

# sql-server - 复制行及其子项及其子项

> ID：11477563
> 
> 赞同：1
> 
> 时间：2012-07-13T20:03:16.923
> 
> 标签：sql-server, sql-server-2008

这类似于这个问题[Copy Row and all its 'children'](https://stackoverflow.com/questions/6767066/copy-row-and-all-of-its-children)但有点（也许很多）更复杂。

我有一个表“项目”，其中包含一些信息和 UUID。这与表“检查点”具有 1:M 关系。然后，“检查点”与表“TaskCommon”具有 1:M 关系。然后，“TaskCommon”与表“TaskSpecific”具有 1:1 的关系，该表基于其“TaskCommonId”与其父表连接。

我需要创建一个复制函数，它将获取一个项目，复制它，然后复制它的所有检查点、任务和细节。

我计划使用存储过程来完成所有这些工作，并且想知道是否有更好的方法来做到这一点，而不是必须循环遍历每个检查点然后任务。

有没有办法为此进行某种类型的递归查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T05:11:31.977

您所需要的只是 4 个不同的插入语句。第一个将从项目表中复制数据。现在使用新复制的数据与 cehckpoint 连接以带来所有检查点详细信息并将其复制到您的复制检查点表中。现在对其他两个表进行相同的操作。

# java - JApplet 运行速度比 Java 应用程序 GUI 慢 30 倍

> ID：11477565
> 
> 赞同：1
> 
> 时间：2012-07-13T20:03:22.337
> 
> 标签：java, performance, swing, user-interface, japplet

我在 HPC 工作。我有一个小应用程序和一个 Java 客户端应用程序，它们`jobID, jobname, userID, etc.`通过从我们的 TORQUE 作业调度程序接收到的信息显示有关在集群上运行的作业 () 的信息。

最近，我添加了按钮来按类别按升序或降序对数据进行排序。有了这个附加功能，用户可以通过对数据进行排序来强制更新显示（以前我有一个计时器，它每 10 秒从服务器接收一次新数据，然后更新显示），我注意到性能上的差异- 小程序明显滞后。输入计时代码，我发现应用程序平均需要 0.05 秒，`setContentPane()`而小程序平均需要 1.50 秒才能使用相同的代码执行相同的操作。无论小程序是在 appletviewer 还是在浏览器中运行，这个问题都是一样的。

我想强调的是，几乎所有的代码都是一样的。唯一显着的区别是 JApplet`setContentPane()`对自己进行（和其他）调用，而我的应用程序对 JFrame 进行这些调用（例如`frame.setContentPane()`）。

奇怪的是，对小程序的第一次调用会`setContentPane()`在大约 0.13 秒内返回。但是，所有后续调用都需要前面提到的时间。

有什么建议么？我宁愿有一个功能正常的小程序，这样我就不必在我的用户社区上推送应用程序。

编辑：JApplet 的事件处理不是问题：关于鼠标移动和位置读取以及玻璃窗格上的弹出绘图的性能在 JApplet 和 Java 应用程序之间是相同的。

Edit2：**我刚刚编辑了 JApplet 代码，因此会弹出一个 JFrame，其中运行着应用程序，并且性能与应用程序的性能相匹配！**小程序有什么用？几周以来我一直在阅读它们，但没有人阐明这个问题 - 它几乎完全是“小程序不能在我的 linux 机器上的 Firefox 浏览器中运行”或“我如何将我的应用程序变成一个小程序”。*没有人能告诉我为什么完全相同*的 GUI 代码在 JApplet 中运行速度慢得离谱。也就是说，为什么 setContentPane() 在从 JFrame 创建的 JApplet 中有 30 倍的减速？？？

我运行小程序的原因是因为我希望它嵌入到网页中，弹出的 JFrame 太侵入性了。想法？

Edit3：在继续诊断此问题时，我发现 JApplet 对 setContentPane() 的调用使我的 CPU 使用率飙升至 60-100%。应用程序的 setContentPane() 并非如此，它只会从 0.1% 跳到 ~4%。是什么导致了 JApplet 的所有操作和性能开销？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T22:20:10.567

重构您的应用程序以使用这种[*混合*](https://stackoverflow.com/a/11372932/230513)方法。它提供了两个优点：

*   [您可以更直接地分析不同顶级容器](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)的开销。

*   [您可以使用java-web-start](/questions/tagged/java-web-start "显示标记为“java-web-start”的问题")获得更灵活的部署选项，如图[所示](https://sites.google.com/site/drjohnbmatthews/subway)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-14T22:41:26.813

> 奇怪的是，对小程序的 setContentPane() 的第一次调用会在大约 0.13 秒内返回。但是，..有什么建议吗？

在第一次调用中，添加一个带有`CardLayout`. 再也不要打电话`setContentPane()`了，而是使用带有卡片布局的面板来“添加”更多内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T20:56:07.617

不幸的是，相比之下，Applet 会运行得更慢。很大程度上取决于浏览器的 JVM 和对 Applet 请求的响应。这是它们很少使用的原因之一。

# scala - Scala AKKA 访问变量或返回值

> ID：11477567
> 
> 赞同：5
> 
> 时间：2012-07-13T20:03:26.310
> 
> 标签：scala, playframework, akka

这是我的代码：

```
class testActor extends Actor   {
    var test = "test2"
    def receive = {
            case "test" ⇒ 
                    test="works"
                    "works"

    }
}

 def test = Action {
    var test = "test"
    val system = ActorSystem("MySystem")
    val myActor = system.actorOf(Props[testActor.testActor], name = "testActor")

    myActor ! "test"

    test = myActor.test

Ok(views.html.test(test))
} 
```

该行： test = myActor.test 不起作用。

我要么需要一种方法来访问 Actor 函数返回的内容，在这种情况下是“有效的”，要么需要一种访问 Actor 内部变量的方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-13T20:53:01.283

要将结果返回给发件人，请向其发送一条消息：

```
def receive = {
  case "test" => sender ! "works"
} 
```

等待响应使用 Await.result() 调用：

```
 implicit val timeout = Timeout(Duration(1, TimeUnit.SECONDS))
  test = Await.result(myActor ? "test", Duration(1, TimeUnit.SECONDS)) 
```

# jquery - 将 jQuery 事件日历 (wdCalendar) 配置为 24 小时制

> ID：11477570
> 
> 赞同：0
> 
> 时间：2012-07-13T20:03:46.200
> 
> 标签：jquery, calendar

一位朋友向我推荐[wdCalendar](http://www.web-delicious.com/jquery-plugins/#calendar)作为我的 PHP 站点的易于使用的日历/日程安排工具。我可以很容易地将它添加到我的站点，但是在找出如何将其配置为 24 小时模式时遇到了麻烦（我需要下午 3:00 而不是 15:00）。

有谁知道这个日历是否可行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-08T14:55:01.110

修改 jquery.calendar.js 中的函数 fomartTimeShow 以匹配如下：

```
 function fomartTimeShow(h) {
        if (h < 10 && h >= 00){
            return h + ":00 AM";
        }
        if (h >= 10 && h < 12) {
            return h + ":00 AM";
        }
        if (h === 12){
            return h + ":00 PM";
        }
        if (h > 12){
            return (h-12) + ":00 PM";
        } else {
            return h + ":00";
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T12:32:15.183

目前日历的设计不支持 12 小时格式，但通过对源代码进行一些修改肯定可以实现。

源的复杂性相当适中，完全有可能使日历采用 12 小时格式（当然，需要一点编码工作）。

我已经在做同样的事情了，所以这里有一个保证。

# c - 信号回调和 pthread 同步

> ID：11477573
> 
> 赞同：1
> 
> 时间：2012-07-13T20:04:09.513
> 
> 标签：c, sockets, serial-port, pthreads, signals

在我的应用程序上，我有一个运行 while(1) 的 pthread，它读取一个套接字客户端和一个串行回调函数。我的应用程序从串行（如 /dev/ttyS0）接收消息并从套接字接收消息。问题：从串口收到一些消息后应用程序崩溃，此时套接字什么也没收到。但是，如果我评论线程创建应用程序工作正常。

代码草案：

```
// Socket Thread
static void *Socket(void *arg)
{
  // socket inicialization
  while (1)
  {
    ret = read(client, buffer, sizeof(buffer)-1);
    // do something
  }
}

// serial callback
static void SerialCallback(int id, unsigned char *buffer, int length)
{
    // do something
}

// main
int main (void)
{
  // start and configure serial callback
  cssl_start();
  Serial = cssl_open(SERIAL_PORT, SerialCallback, 0, 115200, 8, 0, 1);

  // create the pthread
  // If I comment the line below the app work fine
  pthread_create(&Thread_Socket, NULL, Socket, NULL);

  while (1)
  {
  }
} 
```

笔记：

*   我使用库 cssl (http://sourceforge.net/projects/cssl/) 来处理串行。该库使用实时信号。

*   出于测试目的，我使用 socat 生成伪终端（如 /dev/pts/XX）

*   每次串行接收一个或多个字节时调用串行回调

*   我正在使用 cutecom 向串口发送消息

* * *

2012.07.16 新增测试信息

第一个测试：我用while(1)替换了read函数的行；问题随之而来（因此，问题与读取功能无关）。

第二次测试：使用完整代码（上例），我使用两个外部 USB/串行转换器环回连接，工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:09:47.803

@Nikolai N Fetissov 怎么说，程序中断是因为 EINTR 信号。我查看了 cssl 库代码并将信号标志从:`sa.sa_flags = SA_SIGINFO;`更改为`sa.sa_flags = SA_SIGINFO | SA_RESTART;`. 工作。

我联系了 cssl 项目开发人员 Marcin Siennicki，并为他发送了这篇文章的链接。

感谢您的评论。

# shell - 艰难地学习 Python 练习 46：mkdir bin NAME 测试文档

> ID：11477575
> 
> 赞同：3
> 
> 时间：2012-07-13T20:04:14.107
> 
> 标签：shell, powershell

我是一个真正的初学者，通过 Zed Shaw 的“Learn Python the Hard Way”学习使用 Python。到目前为止，只要我以完全相同的方式输入，我就没有任何代码会出错，但是在练习 46 中，我在设置我的骨架项目时遇到了麻烦。在书中，它说要键入：

```
$ mkdir -p projects<br/>
$ cd projects/<br/>
$ mkdir skeleton<br/>
$ cd skeleton<br/>
$ mkdir bin NAME tests docs<br/> 
```

 ``I have already checked this [Learn Python the Hard Way: Exercise 46](https://stackoverflow.com/questions/9069465/learn-python-the-hard-way-exercise-46) but I could not do the last line "mkdir bin NAME tests docs". It (I am using Windows PowerShell) gives me an error saying:` 

```
"mkdir : A positional parameter cannot be found that accepts argument 'Name'.<br/>
At line:1 char:6<br/>
+ mkdir <<<<  bin NAME tests docs<br/>
    + CategoryInfo           : InvalidArgument: (:) [mkdir], ParameterBindingException<br/>
    + FullyQualifiedErrorID : PositionalParamaterNotFound,mkdir<br/> 
```

谁能告诉我发生了什么以及如何解决这个问题？很抱歉，这确实是一个基本问题，但“$ mkdir bin NAME tests docs”是否试图创建多个名为“bin”、“NAME”、“tests”和“docs”的目录？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T20:09:01.437

你可以很容易地做到`mkdir bin,NAME,tests,docs`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T20:08:24.437

使用普通的 Windows 命令行。它在那里工作得很好。（好吧，至少在 Windows XP 上。不过，不明白为什么 Vista 或 7 会有所不同。）

（尽管正如其他人指出的那样，如果您只是用逗号分隔目录，您仍然可以使用 Windows Powershell。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T20:09:04.623

我认为应该是

`mkdir bin\<Project Name>\tests\docs\``

# inheritance - 通过 Go 中的接口修改结构成员

> ID：11477577
> 
> 赞同：-1
> 
> 时间：2012-07-13T20:04:21.643
> 
> 标签：inheritance, interface, struct, go

在我的 Go 项目中，我想创建一个基类的多个子类，并能够通过基类/接口变量对子类的实例进行操作（我正在使用“类”这个词，即使这个概念在 Go 中并不真正存在）。

下面是它在 C++ 中的样子，只是为了说明我的意思：

```
#include <iostream>

using namespace std;

class Base {
public:
    int x,y;
    virtual void DoStuff() {};
};

class Thing : public Base {
public:
    void DoStuff() { x = 55; y = 99; }
};

Base *gSomething;

int main(int argc, char **argv) {
    gSomething = new Thing();
    gSomething->DoStuff();

    cout << "gSomething = {" << gSomething->x << ", " << gSomething->y << "}" << endl;

    return 0;
} 
```

这将打印“gSomething = {55, 99}”。作为 Go 新手，我希望我能做这样的事情（我觉得这很干净）：

```
package main

import "fmt"

type IBase interface {
    DoStuff()
}

// The base "class"
type Base struct {
    x, y int
}

// A more specific variant of Base
type Thing struct {
    Base
}

func (o Base) DoStuff() {
    // Stub to satisfy IBase
}

func (o Thing) DoStuff() {
    o.x, o.y = 55, 99
    fmt.Println("In Thing.DoStuff, o = ", o)
}

var Something IBase

func main() {
     Something = new (Thing)

    Something.DoStuff()
    fmt.Println("Something = ", Something)
} 
```

唉，这行不通。它编译，它似乎运行正常，但我没有得到我想要的结果。这是打印输出：

在 Thing.DoStuff 中，o = {{55 99}}
东西 = &{{0 0}}

我显然希望最后一张印刷品说“Something = &{{55 99}}”

我是不是完全偏离了这里的设计（这在 Go 中是不可能的），还是我只是错过了一些小细节？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T20:39:31.807

你`func (o Thing) DoStuff()`有一个类型的接收器，`Thing struct`结构在 Go 中是按值传递的。如果要修改结构（而不​​是它的副本），则必须通过引用传递它。将此行更改为`func (o *Thing) DoStuff()`，您应该会看到预期的输出。

# javascript - 通过 JS 函数发布输入字段值

> ID：11477578
> 
> 赞同：2
> 
> 时间：2012-07-13T20:04:32.067
> 
> 标签：javascript, jquery, ajax

我在通过 JS 函数返回输入字段值时遇到困难。它确实返回一个值，但它添加了不必要的信息。我怎样才能在没有其他东西的情况下回显输入值？[例子](http://webprolearner2346.zxq.net/registration-form/)

**JS**

```
 <script>
    $(function() {

    $(".submit").click(function() {

        var name = $("#name").val();                
        var dataString = 'name='+ name;

                $.ajax({
                type: "POST",
                url: "jqueryform.php",
                data: dataString,
                success: function(result){
                $('#special').append('<p>' +  result + '</p>')  

                    }

               });
                return false;
           });     

    });
    </script> 
```

**PHP**

```
 <?php
 if($_POST){
     $url     = $_POST['name'];
     echo ('What you type:&nbsp;&nbsp; <b>'.$url.'</b>');
    }
 ?> 
```

**HTML**

```
<html>
 <input id="name" name="name" type="text" class="field text medium" value="" maxlength="255" tabindex="1"   />

<input  type="submit" value="Submit" style=" background:#0060a1; color:#FFFFFF; font-size:14px; border:1px solid #0060a1; margin-left:12px" class="submit"/>

<div id="special"> </div>

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T20:09:14.090

将 echo 语句更改为：

```
echo ('What you type:&nbsp;&nbsp; <b><span id="resultval">'.$url.'</span></b>'); 
```

将响应方法主体更改为：

```
$('#special').append('<p>' +  $('#resultval', result).html() + '</p>'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T20:08:43.780

您似乎将 AJAX 提交到标准页面，并附有表单。最好只使用常规的`<form>`，不使用 AJAX，它会完全按照您的预期工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T20:09:30.337

而不是回显一个普通的 php 使用 Json 方法

```
echo json_encode($rl); 
```

并在 ajax 调用完成后的 JS 中解码 json 编码的字符串并使用它

# objective-c - init 在创建数组时的作用

> ID：11477579
> 
> 赞同：-2
> 
> 时间：2012-07-13T20:04:36.383
> 
> 标签：objective-c, xcode, cocoa-touch

假设我想创建一组图像，我使用了这个：

```
NSMutableArray *images = [[NSMutableArray alloc]init]; 
```

init 在这里真正扮演什么角色？如果我简单地使用它不会工作：

```
NSMutableArray *images = [NSMutableArray alloc]; 
```

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T20:13:09.473

不，你绝对不能只说`[NSMutableArray alloc]`。`+alloc`对发送到*任何*类的结果调用方法是绝对不正确的，除非该方法是其中一种`-init...`方法。`+alloc`所做的只是为对象保留内存。它基本上相当于调用`calloc(sizeof(class), 1)`. 该`-init`方法对于将对象实际初始化为工作状态至关重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T20:17:24.827

这不仅适用于数组，也适用于任何可以实例化的 Objective-C 类：`alloc`分配内存来保存实例，但不往里面放任何东西，`init`实际上在那个内存位置初始化一个对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T20:31:13.880

尽管在某些情况下，Objective-C 内部有很多“混搭”来使方案短路，但在理论模型`alloc`中，仅为对象创建（从堆分配）空间。空间的内容本质上是随机的——前一个对象留下的任何东西都占据了那个位置。

之后`alloc`，`init`以特定于类的方式初始化空间。对于 NSMutableArray，这意味着创建了一个标头（其中的第一部分实际上是通过对 NSObject的`super`调用创建的），并且初始化了正在使用的数组条目数之类的东西。`init`

请注意，对于 NSMutableArray，您可以调用`array`“方便”方法而不是`alloc/init`, 来执行`[[[NSMutableArray alloc] init] autorelease]`. 对于任何类，您都可以调用`new`“方便”方法来执行等效的`[[SomeClass alloc] init]`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T20:12:48.070

[苹果参考](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)

为了在使用 NSMutableArrays 时获得最佳性能，您总是希望使用`initWithCapacity:25`或附近。这为合理数量的行或条目清除了足够的内存。如果你把它留在初始化，我相信它会初始化到初始容量 0，这意味着你每次添加东西时都必须分配新的内存，这会损害你的应用程序的性能。

# php - OAuth 错误#210 用户不可见

> ID：11477580
> 
> 赞同：0
> 
> 时间：2012-07-13T20:04:47.080
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

```
$status = $_SESSION['fbglobalconn']->api('/'.$user.'/feed','post',$attachment); 
```

错误 210 OAuth 异常用户不可见

这行代码适用于发布中的某些配置文件，但其他配置文件不会并停止循环。错误的任何原因？有什么特别的解决方法，所以循环不会停止但仍会继续？

还有一种方法可以让我找出这些不可见的假定用户是谁？抱歉，还有一个问题，如果 api 有效，我如何获得返回 http 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:07:47.373

> 错误的任何原因？

用户不允许您在他的墙上发帖。

> 有什么特别的解决方法，所以循环不会停止但仍会继续？

*捕捉*异常。这就是他们的目的。

# c# - C#应用程序外部打开Excel文件时，出现异常

> ID：11477581
> 
> 赞同：1
> 
> 时间：2012-07-13T20:04:47.290
> 
> 标签：c#, excel

我编写了一个 C# 应用程序来查询数据库并将结果放入一个 excel 文件中。该程序本身运行良好。但是，如果我在应用程序运行时打开第二个完全不相关的 excel 文件，则会发生异常并且进程停止。

现在，在程序本身中，我将可见性设置为 false，在打开第二个不相关的 Excel 文件后，正在生成的文件突然打开并可见，然后我得到了异常。

任何人都知道是什么导致了问题或如何解决它？

相关部分代码如下，异常发生在 worksheet.get_Range(currCol.GetString() + excelRow, Missing.Value).Formula = item.ToString();

异常本身是：“HRESULT 异常：0x800AC472”

```
 Application exc = new Application();

        //Makes the Excel file not visible
        exc.Visible = false;
        exc.UserControl = false;
        exc.DisplayAlerts = false;

        Workbooks workbooks = exc.Workbooks;
        Workbook workbook = workbooks.Add(XlWBATemplate.xlWBATWorksheet);

        Sheets sheets = workbook.Worksheets;
        Worksheet worksheet = (Worksheet)sheets.get_Item(1);

        int excelRow = 1;
        ExcelChar currCol = new ExcelChar('A');
        System.Data.DataTable testTable = dbConnection.searchQuery("Select * from testTable").Copy();

        if (worksheet == null)
        {
            Console.WriteLine("ERROR: worksheet == null");
        }

        foreach (System.Data.DataRow row in testTable.Rows)
        {
            foreach (var item in row.ItemArray)
            {
                worksheet.get_Range(currCol.GetString() + excelRow, Missing.Value).Formula = item.ToString();
                currCol.Add(1);
            }
            excelRow++;
            currCol = new ExcelChar('A');
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T15:14:49.740

看看[这个线程](http://social.msdn.microsoft.com/forums/en-US/vsto/thread/9168f9f2-e5bc-4535-8d7d-4e374ab8ff09/)。

看起来您的错误是 VBA_E_IGNORE，在这种情况下，您需要注册[一个 IMessageFilter 实现](http://blogs.msdn.com/b/andreww/archive/2008/11/19/implementing-imessagefilter-in-an-office-add-in.aspx)，以便您可以实现重试逻辑。

我过去曾看到过这个问题，当使用具有互操作性和交互性的相同 Excel 实例时 - 例如，在使用以下方法实例化 Excel 应用程序对象时：

```
Marshal.GetActiveObject("Excel.Application") 
```

在您的情况下，您正在使用以下方法创建一个新的 Excel 实例：

```
exc = new Application(); 
```

您应该尝试做的是确保尽快关闭此实例。[由于这篇知识库文章](http://support.microsoft.com/kb/317109)中描述的问题，这并不总是那么容易。否则，您可能会考虑将 COM Interop 以外的东西写入 Excel（例如 OLEDB 或第三方库，如 Aspose 或 EPPlus）。

当 Excel 忙时 - 例如显示模式对话框，或忙于加载工作簿，它不会响应传入的 COM 消息，因此它返回一个错误，该错误被转换为此异常。一个`IMessageFilter`实现（特别`RetryRejectedCall`是：）通常会重试几次，然后失败或提示用户重试（“服务器忙”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T20:19:42.973

使用 Office InterOp 服务时，您必须以相反的顺序关闭您创建的对象。

```
private static void Excel_FromDataTable(DataTable dt)
    {
        // Global missing variable.
        object missing = System.Reflection.Missing.Value;

        // Creates an excel object, 
        Excel.Application excel = new Microsoft.Office.Interop.Excel.Application();
        // Then a workbooks object,
        Excel.Workbooks workbooks = excel.Workbooks;
        // Then adds a workbook object,
        Excel.Workbook workbook = workbooks.Add(true);
        // Then adds a worksheet object,
        Excel.Worksheet activeSheet = workbook.ActiveSheet;
        // Then names the worksheet to what we need.
        activeSheet.Name = "scbyext";

        // Add column headings,
        int iCol = 0;
        // for each row of data,
        int iRow = 0;
        foreach (DataRow r in dt.Rows)
        {
            iRow++;

            // Then add each row's cell data.
            iCol = 0;
            foreach (DataColumn c in dt.Columns)
            {
                iCol++;
                excel.Cells[iRow, iCol] = r[c.ColumnName];
            }
        }

        // Disable Excel prompts.
        excel.DisplayAlerts = false;
        // Save the workbook to the correct folder.
        workbook.SaveAs("C:\\Escaped\\Path",
        Excel.XlFileFormat.xlExcel8, missing, missing,
        false, false, Excel.XlSaveAsAccessMode.xlNoChange,
        missing, missing, missing, missing, missing);

        // Release the objects we made, in reverse order, to allow Excel to quit correctly.
        ReleaseObj(activeSheet);
        ReleaseObj(workbook);
        ReleaseObj(workbooks);
        excel.Quit();
        ReleaseObj(excel);
    } 
```

如果您不这样做，该过程将保持打开状态。我不确定当它卡住时它在做什么，但是到一天结束时，它使用的 CPU 时间会变得相当高。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-04T16:00:12.280

我有一个类似的问题。我正在使用 C# 创建一个 excel 文件，其中包含很多需要很长时间才能创建的图表。如果用户在我的 C# 文件仍在编写时打开了现有的 excel 文件，则会引发异常并且我的应用程序将崩溃。

我用以下方法修复了它：

```
xlApp = new Application();
xlApp.IgnoreRemoteRequests = true; 
```

# wordpress - 从同一服务器上的子域移动 WordPress 博客

> ID：11477588
> 
> 赞同：0
> 
> 时间：2012-07-13T20:05:12.243
> 
> 标签：wordpress, apache, subdomain, linode

我在运行 Ubuntu 的 Linode 服务器上安装了我的网站和 WordPress。目录是： ~/public_html - 网站 ~/public_blog - WordPress 安装

我的 DNS 和站点配置设置为： hashbang0.com - 指向 ~/public_html blog.hashbang0.com 中的网站 - 指向 ~/public_blog 中的 WordPress 安装

站点配置如下：

```
<VirtualHost 123.456.789.000:80>
     ServerAdmin user@gmail.com
     ServerName hashbang0.com
     ServerAlias www.hashbang0.com
     DocumentRoot /home/user/public_html/
     ErrorLog /home/user/log/error.log
     CustomLog /home/user/log/access.log combined
</VirtualHost>

<VirtualHost 123.456.789.000:80>
     ServerAdmin user@gmail.com
     ServerName blog.user.com
     ServerAlias blog.user.com
     DocumentRoot /home/user/public_blog/
     ErrorLog /home/hashbang0/log/blog_error.log
     CustomLog /home/hashbang0/log/blog_access.log combined
</VirtualHost> 
```

现在，我已经受够了对 PHP、HTML 等的修改。我想移动我的 WordPress 安装，以便 hashbang0.com 的访问者可以看到 WordPress 站点。同时，任何拥有旧 blog.hashbang0.com 链接的人（最值得注意的是 RSS 提要和一些散布的链接，这些链接获得了相当多的流量等）不应该被切断（可能被重定向到hashbang0.com 上的适当的东西）。

我想我可以将站点配置更改为：

```
<VirtualHost 123.456.789.000:80>
     ServerAdmin user@gmail.com
     ServerName hashbang0.com
     ServerAlias www.hashbang0.com
     DocumentRoot /home/user/public_blog/
     ErrorLog /home/user/log/error.log
     CustomLog /home/user/log/access.log combined 
</VirtualHost> 
```

我想我需要在“设置”>“常规”中更新 URL？

我不想开始移动东西并发现我已经开枪打中了自己的脚。WordPress howtos 很棒，但充满了如果这个和如果那个......

任何帮助将不胜感激。

本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:15:43.217

在您执行任何操作之前，请创建此文件的副本。然后，如果您输错任何内容，您只需用副本覆盖原件即可。

目前，您的网站位于 public_blog 目录中。要让用户从 hash bang 访问此 WP，您需要将 hashbang 的 DocumentRoot 从 public_html 重写为 public_blog，或者您需要将整个站点目录结构移动到 public_html 中的根目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T20:16:55.487

本，

您最好的选择是将整个博客文件夹直接移动到您的公共文件夹中。在这种情况下，您需要在博客子域上编写一个重定向 htaccess 脚本。

```
RewriteCond %{HTTP_HOST} ^blog\.mydomain\.com$ [NC]
RewriteRule ^(.*) http://www.mydomain.com/$1 [L,R] 
```

在命令行界面 CLI 中，

你会 cp -r ~/public_blog ~/public_html

一定要做好备份！完成后，在 ~/public_blog 中创建 .htaccess 文件并删除旧文件。

您可能想考虑添加**301 重定向**，以便谷歌知道您也移动了。

# c# - 在代码隐藏中访问 XAML 对象

> ID：11477589
> 
> 赞同：1
> 
> 时间：2012-07-13T20:05:19.700
> 
> 标签：c#, wpf, xaml, data-binding, code-behind

我有以下 XAML 代码：

```
<TextBlock x:Name="Coordinates" Text="{Binding Coors}"/> 
```

如何从代码隐藏中访问此对象？我正在尝试用“文本”的内容替换Locaton中的硬编码坐标：

```
private void DestinationButton_Click(object sender, RoutedEventArgs e)
{
    Location loc= new Location (20.2127297,-87.4625591);
    myMap.Center = loc;
    myMap.ZoomLevel = 8;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T20:28:40.730

因为您已经为它提供了一个 x:Name，所以您应该能够以“坐标”的形式访问它。

```
 var text = Coordinates.Text;
    var parsedLocation = <parsing logic here - use a Regex>
    myMap.Center = parsedLocation; 
```

[也很有趣 - 在这里](https://stackoverflow.com/questions/589874/in-wpf-what-are-the-differences-between-the-xname-and-name-attributes)查看 Name 和 X:Name 之间的区别。

但李在上面的评论中是对的。您应该使用“Coors”属性来获取该值，因为它已经在那里绑定了数据。

# struts - html-el:checkbox 在 Struts 验证错误显示后被选中

> ID：11477590
> 
> 赞同：0
> 
> 时间：2012-07-13T20:05:24.700
> 
> 标签：struts, jsp-tags, struts-validation, struts-html

我有一个非常简单的问题。下面是我的 JSP 代码，其中我在行中显示多个复选框。默认情况下，所有复选框都被选中，如果用户想忽略某些行，他取消选中该行的复选框。

我的问题是，如果未选中行的复选框并且由于某些其他字段，如果 Struts 在屏幕上引发表单验证错误，则未选中的复选框将显示为选中状态。我错过了什么吗？如果没有 struts 验证，那么一切看起来都是正确的。

```
<c:forEach var="map" items="${form.displayList}" varStatus="index"> 
    <html-el:checkbox styleId="someCheckbox_${index.index}" property="someCheckboxes[${index.index}]"  />
     <td> .....</td>
     <td> .....</td>
     <td> .....</td>
</c:forEach> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T20:08:59.257

当您向 Struts 提交数据时，会发生以下情况：

*   Struts 有一个[前端控制器](http://en.wikipedia.org/wiki/Front_Controller_pattern)，所有请求都通过这个控制器。这是[ActionServlet](http://struts.apache.org/1.x/struts-core/apidocs/org/apache/struts/action/ActionServlet.html)类，然后根据配置的内容`struts-config.xml`将请求传递给适当的[Action](http://struts.apache.org/1.x/struts-core/apidocs/org/apache/struts/action/Action.html)类。
*   在此之前，如果[ActionForm](http://struts.apache.org/1.x/struts-core/apidocs/org/apache/struts/action/ActionForm.html)实例是会话保存的表单，则它会被构造或重用；
*   `reset()`在 ActionForm 上调用。[这是您将复选框属性重置为 false 的地方](https://stackoverflow.com/questions/2353733/cant-uncheck-all-in-struts-multibox#2378197)。这是必需的，因为当您提交时，未选中的 HTML 复选框不会在请求中发送，因此 Struts 不会为它们请求数据绑定（如果它们在您加载页面时被选中，即使用户在提交时未选中它们，它们仍然处于选中状态）；
*   ActionForm 填充了请求数据（现在已选中任何选中的复选框，未在提交时发送的复选框由于先前的重置而保持未选中）；
*   `validate()`如果在中指定，则调用ActionForm 的方法`struts-config.xml`；
*   如果验证失败，如果在中指定，则将控件返回给输入 JSP `struts-config.xml`（提交的数据是页面将显示的内容，因为它在 ActionForm 上）；
*   如果验证成功，`execute()`则调用 Action 类上的方法；
*   Action 类完成它的工作并转发给一些 JSP。

这就是你使用 Struts 的方式吗？我的猜测是您正在 Action 类中进行一些填充/重置/验证，当验证失败时，您使用默认数据重新加载 ActionForm。

检查你的 ActionForm 的代码`reset()`和`validate()`你的 Action 类`execute()`，看看数据在哪里被检查回来。

# c# - 如何在 C# 中获取所有发布请求变量？

> ID：11477593
> 
> 赞同：7
> 
> 时间：2012-07-13T20:05:31.253
> 
> 标签：c#, asp.net

我收到了来自外部供应商的帖子。我不确定他们发送的是什么变量。如何打印出他们在帖子中发送的所有请求变量？没有 Request.Count 或 Request.Length 以便我可以循环查找所有内容。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-13T20:08:17.157

该[`Request.Form`](http://msdn.microsoft.com/en-us/library/system.web.httprequest.form.aspx)属性包含一个包含所有表单字段的集合。它是一个[`NameValueCollection`](http://msdn.microsoft.com/en-us/library/system.collections.specialized.namevaluecollection.aspx)which 实现`ICollection`，所以你应该能够用`foreach`. `Request.Form.Keys`将为您提供所有表单字段名称，然后您可以使用该名称来查找值。

```
foreach(string key in Request.Form.Keys)
{
  Response.Write(key + ": " + Request.Form[key] + "<br/>");
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-13T20:11:12.980

你可以从 Request.Forms 得到它

```
foreach(string key in Request.Form.Keys ) 
{
  Response.Write ( key );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T20:08:09.487

最简单的方法是循环遍历`Request.Form`（如果您知道它将始终在 Form 集合中）。

查看此 MSDN 链接以获取有关如何迭代 Request.Form 的示例：http: [//msdn.microsoft.com/en-us/library/ms525985 (v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms525985(v=vs.90).aspx)

或以下：http: [//msdn.microsoft.com/en-us/library/system.web.httprequest.form.aspx](http://msdn.microsoft.com/en-us/library/system.web.httprequest.form.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T20:09:10.333

请迭代Request.Form，您将看到变量的名称和值

# c# - C# Regex 从字符串中获取名称

> ID：11477596
> 
> 赞同：0
> 
> 时间：2012-07-13T20:05:38.973
> 
> 标签：c#, regex, string

我得到这样的字符串

```
"????log L 07/13/2012 - 23:59:21: \"Baobi<1><STEAM_ID_PENDING><>\" connected, address \"72.539.185.197:27005\"\n\0" 
```

我有这种方法，但有时它非常有问题

```
 if (Data.EndsWith("\"")) Data = Data.Substring(0, Data.Length - 1);
                int start = Data.IndexOf("\"");
                int end = Data.IndexOf("<");
                var val = Data.Substring(start + 1, end - 1 - start);
                return val; 
```

请提供一些好的正则表达式`Baobi`从这里获取

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T20:11:08.740

AFAIK这应该工作：

```
return Regex.Match(Data, @"""(.+?)<").Groups[1].ToString(); 
```

如果这仍然是错误的，请给出有问题的字符串示例和结果（例如异常详细信息或实际返回的字符串）。

# objective-c - 显示 UIToolBar 后重新调整 UIWebView 的大小

> ID：11477599
> 
> 赞同：1
> 
> 时间：2012-07-13T20:05:53.360
> 
> 标签：objective-c, cocoa-touch

我有一个 ViewController，顶部有一个 UIToolBar，下面有一个 UIWebView。WebView 填充了 View 的整个剩余部分，并设置为拉伸，锚定在顶部和左侧。

网页的内容是 3-4 个屏幕长，但是当我向下滚动浏览 WebView 时，我可以看到所有内容。但是，如果我动态隐藏 UIToolBar，然后再次重新显示它，WebView 最终会“太大”——它实际上比 ViewController 中的可用空间长，所以现在当我滚动浏览我的 4 页内容时，我到了底部，它往往会“反弹”并且不会显示下半英寸的网页内容。

隐藏 UIToolBar 后有没有办法重新调整 webview 的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:16:33.153

`webView.frame = self.view.frame`

隐藏导航栏后应该可以解决问题。也试试

`webView.scrollView.alwaysBounceVertical = NO;`

如果弹跳产生不良影响，则尝试消除弹跳。干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T14:04:09.670

调整 webview 的大小并不是必须的。您应该改用自动调整大小的蒙版，如下所示：

```
webView.autoresizingMask = UIViewAutoresizingFlexibleHeight 
```

# php - PHP 与 Apc 或 Eaccelerator 与 Java

> ID：11477609
> 
> 赞同：0
> 
> 时间：2012-07-13T20:06:40.317
> 
> 标签：php, apc, eaccelerator

我读过很多这样的文章，因为 java 直接运行字节码，对于 PHP，它在每个请求上都加载和编译，所以 PHP 比 Java 慢

但是如果我们使用 APC 或 EAccelerator 之类的 PHP 缓存系统，Java 和 PHP 在性能方面的结果是否接近？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:15:40.480

不要看这样的文章......不可能比较两种不同的语言并说它更慢，因为它没有编译。是的，解析 PHP 代码需要时间，但 JVM 也需要额外的资源。

APC 或 EAccelerator 可能会提高性能，但这并不意味着它会像 Java 或 C 一样快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T19:49:57.907

坦率地说，很少有开发人员为此编写足够高性能的代码。一个好的 PHP 程序员会比一般的 Java 程序员编写更快的应用程序，反之亦然。如果你不是一个好的程序员，那也没关系，你会让他们都变慢。

不要误会我的意思，您当然应该为 PHP 使用操作码缓存。但是，如果您是，Java 和 PHP 之间的性能差异不太可能成为您应用程序性能的决定因素。

Java 具有线程和持久性，因此如果这些很重要，请使用 Java。PHP 非常易于部署，并且不需要对堆和垃圾收集等进行大量调整，因此如果这对您很重要，请使用 PHP。

除非您是一个体面的网站，否则请使用您最了解的网站。在用另一种语言编写一次之前，您将编写两次并对其进行优化。

# c - 为什么 printf 会自动将 %x %o %d 转换为十六进制 oct 和 dec

> ID：11477611
> 
> 赞同：0
> 
> 时间：2012-07-13T20:06:42.440
> 
> 标签：c

一些我认为这应该有效的方式。

```
#include<stdio.h>
void main(void)
{   
     short i;
     scanf("0x%hi",&i);
     printf("0x%x\n",i);
     printf("0%o\n",i);
     printf("%d\n",i);
} 
```

想知道为什么？任何答案，为什么这不起作用。我认为这应该自动转换为十六进制八进制并且至少它应该正确打印十进制

```
 32768
  0x26
  046
  38 
```

是我得到的 32768 input 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T20:08:43.267

`short`在您的平台上可能是 16 位的，在这种情况下`32768`不适合。尝试使用更大的类型。

演示：http: [//ideone.com/D0hzP](http://ideone.com/D0hzP)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T20:41:24.160

对不起，我犯了一个愚蠢的错误。但是当你提出问题时，它真的很有帮助，给人勇气和安慰。

```
 scanf("%hi",&i); 
```

删除 0x 解决了这个问题。谢谢大家的帮助。

# html - 使用 Firefox 和 Chrome 打印带有固定页脚的 html 页面

> ID：11477614
> 
> 赞同：0
> 
> 时间：2012-07-13T20:06:52.063
> 
> 标签：html, firefox, google-chrome, positioning

各位下午好。我和 css 儿子交流我希望有人能帮我解决这个问题。我正在尝试打印从带有页眉和页脚的 html 页面中获取的某种 html 文本。此页脚必须留在页面底部，如果有第二页，它应该出现在该页面的底部。无论如何，我得到了[这个](http://jsfiddle.net/F3kSQ/1/)小提琴来展示。html 看起来很棒，但是当我使用 pdf 打印机打印页面时，文本与页脚重叠，但仅在 Firefox 中，如果在 Chrome 上运行小提琴，它会在第二页的最后一段下方打印页脚。

知道如何实现这个想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:14:25.883

在您的最终 div 中，删除`position:absolute`和`left`css`top`样式。您将页脚置于所有内容之上。必须为每个浏览器手动调整值`top`，您可能希望远离它。

这是从页脚 div 中删除的那些 CSS 样式的更新小提琴：http: [//jsfiddle.net/BumbleB2na/F3kSQ/2/](http://jsfiddle.net/BumbleB2na/F3kSQ/2/)

# iphone - 转到另一个选项卡并返回后，UITabBar 和 UIMenuControl 没有出现

> ID：11477619
> 
> 赞同：0
> 
> 时间：2012-07-13T20:07:32.367
> 
> 标签：iphone, ios, xcode

我有一个 UITabBar 和一个 UIMenuControl 但问题是当我单击按钮并出现我的 MenuControl 然后我切换到另一个选项卡然后当我来到上一个视图并再次单击该按钮时 UIMenuControl 不显示。当我从另一个选项卡返回时，UIMenuControl 不会出现。我不知道问题是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T22:01:38.390

每当您希望标签栏重新出现时，请调用：

```
self.tabBarController.hidden = NO; 
```

如果您在使用特定方法时无法丢失它，请尝试将其放入该方法中。

另一种可能性是您完全覆盖了第一个视图。如果是这种情况，请小心。每次按下按钮时，您实际上可能正在向层次结构中添加新视图。如果您没有正确处理内存管理，这将是一个巨大的泄漏。一个创可贴的解决方法是调用：

```
[self.view bringSubviewToFront:self.tabBarController]; 
```

# javascript - IE 不调用 $.ajaxSetup

> ID：11477628
> 
> 赞同：0
> 
> 时间：2012-07-13T20:08:12.217
> 
> 标签：javascript, jquery, internet-explorer

以下调用适用于除 IE 之外的所有浏览器。`$.ajaxSetup`没有得到认可。除非我将它们直接添加到调用中，否则不会调用`error`and函数。`complete``$.ajax`

知道为什么吗？

```
function setupAjaxCalls() {
    $.ajaxSetup({
        type: 'GET',
        dataType: "jsonp",
        contentType: "application/json",
        data: {
            deviceIdentifier: deviceIdentifier,
            deviceType: deviceType,
            memberId: loggedInMemberId,
            authToken: authToken,
            cache: false,
            responseFormat: 1
        },
        error: function (x, e) {
            defaultError(x, e);
        },
        complete: function () {
            apiCallInProgress = 'false';
            //alert('complete!');
        }
    });
}

function logInForm(memLogin, memPassword, callback) {
    apiCallInProgress = 'true';

    $.ajax({
        type: 'POST',
        dataType: "json",
        url: baseApiUrl + '/MembershipService/AuthLoginSecure',
        data: {
            login: memLogin,
            password: memPassword,
            responseFormat: 0
        },
        success: function (data) {
            if (data.Success == false) {
                apiError(data);
            } else {
                loggedInMemberId = data.Member.Id;
                authToken = data.Token;

                if (typeof (callback) != "undefined" || callback) {
                    callback(data);
                }

            }
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:17:09.020

直接来自文档：

[http://api.jquery.com/jQuery.ajaxSetup/](http://api.jquery.com/jQuery.ajaxSetup/)

```
Note: Global callback functions should be set with their respective global Ajax event
handler methods—.ajaxStart(), .ajaxStop(), .ajaxComplete(), .ajaxError(), .ajaxSuccess(),
.ajaxSend()—rather than within the options object for $.ajaxSetup(). 
```

您应该将错误和完整属性移动到它们自己的方法中。:) 或者，您可以将它们放入 $.ajax 方法中。无论哪种方式最适合您首选的 Code Pattern！

# vbscript - 使用 VBscript 删除除一个单词外的所有文本

> ID：11477634
> 
> 赞同：0
> 
> 时间：2012-07-13T20:08:25.310
> 
> 标签：vbscript

我有一行文字是地址：1234 N. Main Street Atlanta 30000 Georgia

我希望剩下的唯一文本是格鲁吉亚。执行此操作的 VBscript 是什么？我是 VBscripting 的新手，但对编码不熟悉。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:47:48.447

这不一定是最好的方法，但是您可以将其拆分为空间上的数组，并取最后一个元素。

```
arrAddress = Split(szAddress, " ")
szState = arrAddress(UBound(arrAddress)) 
```

也可以[`InStrRev`](http://msdn.microsoft.com/en-us/library/t2ekk41a%28v=vs.80%29.aspx)用来定位最后一个空格的位置，`Right(string, length)`用来拉出状态。

# c# - 通过 http post 发送 base64String 最终在 C# 中为空服务器端

> ID：11477638
> 
> 赞同：3
> 
> 时间：2012-07-13T20:08:33.067
> 
> 标签：c#, image, httpwebrequest

我有一个控制台应用程序，它将图像编码为 base64String，然后将其作为 http POST 请求的一部分发送到服务器。

问题是，当我打开它检查服务器端时，数据不再存在。

这是我用来发送字符串的代码-

```
HttpWebRequest webRequest = (HttpWebRequest)HttpWebRequest.Create(ip);
webRequest.ContentType = "application/x-www-form-urlencoded";
webRequest.Method = "POST";
string formPostString = "image=" + HttpUtility.UrlEncode(imageBase64String);
byte[] buffer = ASCIIEncoding.ASCII.GetBytes(formPostString);
webRequest.ContentLength = buffer.Length;
using (Stream webStream = webRequest.GetRequestStream())
{
    webStream.Write(buffer, 0, buffer.Length);
} 
```

我在服务器端处理它的代码-

```
private void OnRequest(object source, RequestEventArgs args)
{
    IHttpClientContext context = (IHttpClientContext)source;
    IHttpRequest request = args.Request;

    ImageConverter imgConvert = new ImageConverter();
    string imageBase64String = request.Form["image"].Value;
    Image newImg = imgConvert.Base64StringToImage(imageBase64String);
    newImg.Save(@"..\Images\test.png", System.Drawing.Imaging.ImageFormat.Png);
} 
```

当它到达创建新 Image 对象的点时，imageBase64String 为空。我似乎无法确定为什么会这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T20:24:48.687

您显示的客户端代码从不发送请求。您必须致电`webRequest.GetResponse()`要求发送请求。但我会使用[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)简化此客户端代码：

```
using (var client = new WebClient())
{
    var data = new NameValueCollection
    {
        { "image", imageBase64String }
    };
    var result = client.UploadValues(ip, data);
    Console.WriteLine(Encoding.Default.GetString(result));
} 
```

就您的服务器端代码而言，您似乎正在使用一些您在问题中没有提到的第三方框架。例如，以下 ASP.NET 处理程序与前面显示的客户端完美`~/UploadImage.ashx`配合 ( )：

```
public class UploadImage : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        var imageBase64String = context.Request.Form["image"];
        var imageBuffer = Convert.FromBase64String(imageBase64String);
        using (var stream = new MemoryStream(imageBuffer))
        using (var image = Image.FromStream(stream))
        {
            image.Save(@"c:\work\test.png");
        }

        context.Response.ContentType = "text/plain";
        context.Response.Write("upload successful");
    }

    public bool IsReusable
    {
        get { return false; }
    }
} 
```

但是如果我们要将文件上传到服务器，为什么要重新发明轮子呢？为什么使用 base64 时使用[`application/x-www-form-urlencoded`](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.1)重新发明的 Base64 编码会极大地增加请求大小[`multipart/form-data`](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2)？

因此，让我们改进我们的客户端，以利用这种专门为目的编码而设计的优势。让我们从为 WebClient 编写一个扩展方法开始，它允许我们直接上传一个或多个文件：

```
public class UploadFile
{
    public UploadFile()
    {
        ContentType = "application/octet-stream";
    }
    public string Name { get; set; }
    public string Filename { get; set; }
    public string ContentType { get; set; }
    public Stream Stream { get; set; }
}

public static class WebClientExtensions
{
    public static byte[] UploadFiles(this WebClient client, string address, IEnumerable<UploadFile> files, NameValueCollection values)
    {
        var request = WebRequest.Create(address);
        request.Method = "POST";
        var boundary = "---------------------------" + DateTime.Now.Ticks.ToString("x", NumberFormatInfo.InvariantInfo);
        request.ContentType = "multipart/form-data; boundary=" + boundary;
        boundary = "--" + boundary;

        using (var requestStream = request.GetRequestStream())
        {
            // Write the values
            foreach (string name in values.Keys)
            {
                var buffer = Encoding.ASCII.GetBytes(boundary + Environment.NewLine);
                requestStream.Write(buffer, 0, buffer.Length);
                buffer = Encoding.ASCII.GetBytes(string.Format("Content-Disposition: form-data; name=\"{0}\"{1}{1}", name, Environment.NewLine));
                requestStream.Write(buffer, 0, buffer.Length);
                buffer = Encoding.UTF8.GetBytes(values[name] + Environment.NewLine);
                requestStream.Write(buffer, 0, buffer.Length);
            }

            // Write the files
            foreach (var file in files)
            {
                var buffer = Encoding.ASCII.GetBytes(boundary + Environment.NewLine);
                requestStream.Write(buffer, 0, buffer.Length);
                buffer = Encoding.UTF8.GetBytes(string.Format("Content-Disposition: form-data; name=\"{0}\"; filename=\"{1}\"{2}", file.Name, file.Filename, Environment.NewLine));
                requestStream.Write(buffer, 0, buffer.Length);
                buffer = Encoding.ASCII.GetBytes(string.Format("Content-Type: {0}{1}{1}", file.ContentType, Environment.NewLine));
                requestStream.Write(buffer, 0, buffer.Length);
                file.Stream.CopyTo(requestStream);
                buffer = Encoding.ASCII.GetBytes(Environment.NewLine);
                requestStream.Write(buffer, 0, buffer.Length);
            }

            var boundaryBuffer = Encoding.ASCII.GetBytes(boundary + "--");
            requestStream.Write(boundaryBuffer, 0, boundaryBuffer.Length);
        }

        using (var response = request.GetResponse())
        using (var responseStream = response.GetResponseStream())
        using (var stream = new MemoryStream())
        {
            responseStream.CopyTo(stream);
            return stream.ToArray();
        }
    }
} 
```

然后客户端将如下所示：

```
byte[] image = ... go and fetch the image that you want to upload

using (var stream = new MemoryStream(image))
using (var client = new WebClient())
{
    var files = new[]
    {
        new UploadFile
        {
            Name = "image",
            Filename = "test.jpg",
            ContentType = "image/jpg",
            Stream = stream
        }
    };
    var result = client.UploadFiles("http://localhost:6830/uploadimage.ashx", files, new NameValueCollection());
    Console.WriteLine(Encoding.Default.GetString(result));
} 
```

以及我们之前看到的我们处理的服务器：

```
public class UploadImage : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        var uploadedImage = context.Request.Files["image"];
        using (var image = Image.FromStream(uploadedImage.InputStream))
        {
            image.Save(@"c:\work\test.png");
        }

        context.Response.ContentType = "text/plain";
        context.Response.Write("upload successful");
    }

    public bool IsReusable
    {
        get { return false; }
    }
} 
```

猜猜，改进此代码的下一步是什么？答：一个异步客户端请求当然会利用 I/O 完成端口，而不是在等待文件上传到服务器时阻塞调用线程。

# visual-studio-2010 - Visual Studio 2010：断点命中错误文件

> ID：11477639
> 
> 赞同：4
> 
> 时间：2012-07-13T20:08:32.720
> 
> 标签：visual-studio-2010, breakpoints

我不希望任何人能够回答这个问题，但无论如何我都会尝试：

在 Visual Studio 2010 中，当我单击以在任何文件中设置断点时，会打开另一个文件，并且该断点被设置为该文件中的相同行号。

为了显示：

1.  我打开 foo.cs
2.  我点击在第 100 行添加断点
3.  VS 打开 bar.cs 并在（错误的）第 100 行设置断点
4.  我在微软吐槽

与往常一样，我们将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-05-15T15:45:22.220

你不是一个人！

我对 Visual Studio 2015 有完全相同的问题，这很烦人。根据我的经验，只有当 2 个不同的项目（在同一个解决方案中）都包含同名的文件时才会发生这种情况。

它与不同的 PDB 文件及其加载顺序有关。如果调试器可以找到具有匹配名称的文件，它似乎并不关心它是否在好的 PDB 中找到。

可悲的是，这已在 MSDN ( [msdn.microsoft.com/en-us/library/h6aesyw2%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/h6aesyw2%28v=vs.100%29.aspx) ) 上记录了一段时间，但仍未解决。

Microsoft 的解决方法是在添加断点时写入完整的文件路径，但我认为这不是一个可行的解决方案，因为它大大减慢了调试过程。

以下是我发现的其他“解决方案”：

1.  重命名文件名（使它们变得唯一）；
2.  删除解决方案的 .SUO 文件似乎在某些情况下有效（对我不起作用）；
3.  删除“错误”项目的 PDB 文件（希望您不要同时调试两者）；
4.  更改“错误”项目的选项，使其不会在运行时生成/读取 PDB 文件。

希望这可以帮助！

# python - 使用 python 应用程序打包 OpenCV

> ID：11477643
> 
> 赞同：6
> 
> 时间：2012-07-13T20:08:49.380
> 
> 标签：python, opencv, distribution, packaging

所以我正在考虑在开发使用 OpenCV 的应用程序时使用什么语言。作为我决定的一部分，我有兴趣了解在最终应用程序中包含 opencv 库的难易程度。我真的很想用 python 写这个，因为 opencv 绑定很棒，python 很简单，等等。

但是我还没有找到一个明确的答案，比如“py2app 在看到 import cv 行时会自动捆绑 opencv”（我认为不会），如果没有，那么有没有已知的方法可以做到这一点？

一般来说，我想知道使用 opencv 分发 python 桌面应用程序的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:56:03.683

我已经使用 OpenCV 和 cxFreeze 有效地打包、部署和发布了一个 Python 应用程序。

[http://cx-freeze.sourceforge.net/](http://cx-freeze.sourceforge.net/)

是的，cxFreeze 自动选择了 OpenCV 的 python 扩展。我不得不手动复制 OpenCV DLL (Windows)，但这是一个小问题，可以通过 cxFreeze 中的后处理步骤来解决。它确实选择了其他 DLL，所以我不确定问题是什么。

事实上，它工作得很好，我很惊讶。唯一没有正确识别的是 QT 库。基本上这是我的步骤（我正在使用 QT，所以如果你不是，请忽略该部分）：

1.  cxfreeze App.py --target-dir App --base-name Win32GUI --include-modules PySide.QtNetwork
2.  将 opencv\build\x86\vc9\bin 文件复制到 App 目录。

就是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T09:27:52.453

你可以看看 [http://www.pyinstaller.org/](http://www.pyinstaller.org/) 很棒，它为 opencv 打包了必要的 dll。

为了使 opencv 正常工作，py2exe 还打包了 numpy。确保为它添加依赖项，以防您使用 py2exe。

# gwt - Maven 中的 gwt-maven-plugin 无法识别目标执行“generateAsync”

> ID：11477656
> 
> 赞同：1
> 
> 时间：2012-07-13T20:09:24.280
> 
> 标签：gwt, maven, mojo

我正在开发一个应用程序（项目 A），它使用项目 B 的一些源。`pom.xml`项目 A 是：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>

<parent>
    <groupId>com.pe.interbank</groupId>
    <artifactId>reactor</artifactId>
    <version>1.0.0</version>
    <relativePath>../reactor</relativePath>
</parent>

<properties>
    <path2>Reactor/pom.xml</path2>
    <path1>C:/Angelo/Workspace/MultipleGWTv2/Reactor/pom.xml</path1>
</properties>

<artifactId>webapp</artifactId>
<packaging>war</packaging>
<name>webapp</name>

<dependencies>
    <dependency>
        <groupId>com.google.gwt</groupId>
        <artifactId>gwt-user</artifactId>
        <version>2.4.0</version>
    </dependency>

    <dependency>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>gwt-maven-plugin</artifactId>
        <version>2.4.0</version>
    </dependency>

    <!-- this is the dependency to the "jar"-subproject -->
    <dependency>
        <groupId>com.pe.interbank</groupId>
        <artifactId>transferencias</artifactId>
        <version>1.0.0</version>
    </dependency>
    <dependency>
        <groupId>org.apache.tomcat</groupId>
        <artifactId>catalina</artifactId>
        <version>6.0.26</version>
    </dependency>

</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>gwt-maven-plugin</artifactId>
            <version>2.4.0</version>
            <executions>
                <!-- GWT version detected from dependencyManagement -->
                <execution>
                    <goals>
                        <goal>compile</goal>
                        <goal>generateAsync</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <runTarget>com.pe.interbank.Inicio/Inicio.html</runTarget>
                <draftCompile>true</draftCompile>
                <optimizationLevel>1</optimizationLevel>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.1</version>
            <configuration>
                <warSourceDirectory>war</warSourceDirectory>
                <webXml>src/main/webapp/WEB-INF/web.xml</webXml>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

我在行中有一个错误`<execution>`：

```
Description Resource    Path    Location    Type
Plugin execution not covered by lifecycle configuration: org.codehaus.mojo:gwt-maven-plugin:2.4.0:generateAsync (execution: default, phase: generate-sources)   pom.xml /IBKWebCore line 56 Maven Project Build Lifecycle Mapping Problem 
```

似乎`generateAsync`目标不是建立在`gwt-maven-plugin`.

# security - 如何在没有 XML 的情况下为 Jetty 中的 ResourceHandler 提供安全认证？

> ID：11477660
> 
> 赞同：3
> 
> 时间：2012-07-13T20:09:36.763
> 
> 标签：security, jetty, constraints, password-protection

我正在尝试在我的 Jetty 服务器上提供我的一个页面的身份验证。我以编程方式完成所有操作，因此不涉及 xml。

我发现我可以使用 ConstraintSecurityHandler 保护特定的上下文。虽然这适用于我正在运行的 Servlet，但我尝试将其扩展为也适用于 ResourceHandler，但我遇到了问题。我正在尝试的代码如下所示。

如果我先放置 ResourceHandler 块，则无法弹出身份验证。如果我把 ResourceHandler 块放在 SecurityHandler 块之后，那么会弹出认证，但是认证之后，ResourceHandler 页面（/resources）没有出现，Jetty 给我一个 404。

有什么方法可以密码保护由 ResourceHandler 托管的页面以编程方式？

```
final static String REALM = "REALM";

.
.
.

public static void main(String[] args){   
.
.
.
    ResourceHandler resourceHandler = new ResourceHandler(); //set up resourceHandler to host directory of files at /resources
    resourceHandler.setDirectoriesListed(true);
    resourceHandler.setResourceBase("." + File.separator + "files");
    ContextHandler resourceContextHandler = new ContextHandler();
    resourceContextHandler.setContextPath("/resources");
    resourceContextHandler.setHandler(resourceHandler);
    handlers.addHandler(resourceContextHandler);
.
.
.
    ConstraintSecurityHandler csh = getConstraintSecurityHandler();
    ServletContextHandler servletContextHandler = new ServletContextHandler(ServletContextHandler.SESSIONS);
    servletContextHandler.setSecurityHandler(csh);
    handlers.addHandler(servletContextHandler);
.
.
.

    server.setHandler(handlers);
    server.start();
    server.join();
}

private ConstraintSecurityHandler getConstraintSecurityHandler(){
    Constraint constraint = new Constraint(Constraint.__BASIC_AUTH, "user");
    constraint.setRoles(new String[]{"user","admin"});
    constraint.setAuthenticate(true);

    ConstraintMapping statsConstraintMapping = new ConstraintMapping();
    statsConstraintMapping.setConstraint(constraint);
    statsConstraintMapping.setPathSpec("/resources"); //directory I want to protect

    ConstraintSecurityHandler csh = new ConstraintSecurityHandler();
    csh.setAuthenticator(new BasicAuthenticator());
    csh.setRealmName(REALM);
    csh.setConstraintMappings(new ConstraintMapping[] {statsConstraintMapping});

    csh.setLoginService(getHashLoginService());

    return csh;
}

private HashLoginService getHashLoginService() {
    HashLoginService loginServ = new HashLoginService();
    loginServ.setName(REALM);
    loginServ.setConfig("realm.properties"); //location of authentication file
    loginServ.setRefreshInterval(1);
    return loginServ;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T21:40:35.427

安全处理程序位于资源处理程序之前，因此在处理链中首先咨询安全处理程序。

看：

[https://github.com/eclipse/jetty.project/blob/master/examples/embedded/src/main/java/org/eclipse/jetty/embedded/SecuredHelloHandler.java](https://github.com/eclipse/jetty.project/blob/master/examples/embedded/src/main/java/org/eclipse/jetty/embedded/SecuredHelloHandler.java)

# python - Shell 脚本和 sqlite3

> ID：11477661
> 
> 赞同：0
> 
> 时间：2012-07-13T20:10:00.757
> 
> 标签：python, shell, sqlite

场景：我正在尝试一个小型的 shell 脚本程序。

在这个程序中 - 我试图用 2 个表查询一个数据库。并试图得到一个是或否的答案。

`etag = md5sum`我使用 python 脚本从文件中获取的那个。

```
echo 'select a.hash,b.hashuser, case when a.hash=b.hashuser then "No!" else "yes!" end from tempo b, hashes a where a.hash=b.hashuser and b.hashuser='$etag'' 
```

当我尝试在我的屏幕上打印它时，它清楚地显示 etag 作为 md5sum

但是，如果我尝试在我的数据库上查询它并尝试获取结果。使用下面给出的脚本

```
sqlite3 hashez.db 'select a.hash,b.hashuser, case when a.hash=b.hashuser then "No!" else "yes!" end from tempo b, hashes a where a.hash=b.hashuser and b.hashuser='$etag'' 
```

这是我得到的错误。

```
 Error: unrecognized token: "579f0b61cf958a0eea2f60906e6a04a4" 
```

谷歌搜索了一下，这是我从这个[链接找到的解决方案](http://www.unix.com/shell-programming-scripting/146376-execution-problem-shell-script.html)

然后我把它改成`${#etag}`

```
echo 'select a.hash,b.hashuser, case when a.hash=b.hashuser then "No!" else "yes!" end from tempo b, hashes a where a.hash=b.hashuser and b.hashuser='${#etag}'' 
```

我现在得到的错误是

```
select a.hash,b.hashuser, case when a.hash=b.hashuser then "No!" else "yes!" end from tempo b, hashes a where a.hash=b.hashuser and **b.hashuser=32** 
```

为什么 b.hashuser=32。是我的第一个问题。

第二个问题：

当我尝试使用上述函数查询数据库时：

```
sqlite3 hashez.db 'select a.hash,b.hashuser, case when a.hash=b.hashuser then "No!" else "yes!" end from tempo b, hashes a where a.hash=b.hashuser and b.hashuser='${#etag}'' 
```

我没有得到回复。

*   我的查询是否错误。, 如果是，为什么我直接在数据库上查询时得到答案？

对不起，我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T21:03:32.863

你在胡说八道。

```
somecmd 'SELECT ... "'"$etag"'", ...' 
```

注意单引号内的双引号，以及参数替换周围。

# c# - 将单个项目添加到可枚举

> ID：11477666
> 
> 赞同：5
> 
> 时间：2012-07-13T20:10:18.863
> 
> 标签：c#, linq

是否有比这更优雅的解决方案将项目添加到 IEnumerable

```
myNewIEnumerable = myIEnumerable.Concat ( Enumerable.Repeat (item, 1) ); 
```

?

一些上下文：

```
public void printStrings (IEnumerable<string> myStrings) {
   Console.WriteLine ("The beginning.");
   foreach (var s in myStrings) Console.WriteLine (s);
   Console.WriteLine ("The end.");
}

...

var result = someMethodDeliveringAnIEnumerableOfStrings ();
printStrings (result.Concat ( Enumerable.Repeat ("finished", 1) ) ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T20:11:30.203

当然，有。[Concat()](http://msdn.microsoft.com/en-us/library/bb302894.aspx)接受任何`IEnumerable<T>`，包括数组：

```
var myNewIEnumerable = myIEnumerable.Concat(new[] { item }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T20:32:13.207

也许将单个元素附加到 an 的最简单方法`IEnumerable<T>`是使用此`AsIEnumerable`扩展名（尽管[Eric Lippert 建议不要](https://stackoverflow.com/a/7652359/284240)为对象创建扩展名）：

```
public static IEnumerable<T> AsIEnumerable<T>(this T obj)
{
    yield return obj;
}  

var appended = source.Concat(element.AsIEnumerable()) 
```

或使用此`Append<T>`扩展：[https ://stackoverflow.com/a/3645715/284240](https://stackoverflow.com/a/3645715/284240)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T20:24:48.530

您可以像这样定义自己的 SingleConcat 扩展方法

```
public static class CustomConcat
    {
        public static IEnumerable<T> SingleConcat<T>(this IEnumerable<T> first, T lastElement)
        {
            foreach (T t in first)
            {
                yield return t;
            }

            yield return lastElement;
        }
    }

    class Program
    {

        static void Main(string[] args)
        {
            List<int> mylist = new List<int> { 1 , 2 , 3};

            var newList = mylist.SingleConcat(4);

            foreach (var s in newList)
            {
                Console.WriteLine(s);
            }

            Console.Read();
        }
    } 
```

这应该打印**1,2,3 后跟 4**

# php - 如何设置标记系统

> ID：11477667
> 
> 赞同：4
> 
> 时间：2012-07-13T20:10:18.697
> 
> 标签：php, mysql

我想知道是否有人可以指出我设置标记/通知系统的正确方向。我会说非常类似于标记系统。如果有人知道任何教程或示例设置，那就太好了。

**目的**

基本上，这些标志将附加到包括客户、属性、承包商、应用程序等在内的数据项上，其作用是通知用户有关该项目的重要信息。标志应该来自用户可以添加或删除的预定项目列表。

**数据库**

我正在考虑使用 3 表设置。

*   标志表：可用标志的列表，以及确定这些标志适用于什么的设置（客户、属性等）。
*   指示给定项目的链接表附加了给定标志。
*   适当的实体表

**用户界面**

我希望某些功能类似于堆栈溢出的功能，例如添加和删除标签。也许为此使用jquery tag-it？主要是，我希望用户能够从下拉列表中选择标志，并在选择一个或多个标志时显示标志图标。将鼠标悬停在标志上应该会显示一个工具提示，其中列出了附加到该项目的标志。不确定一个标志的设置是否都适用于查询，而不是显示多个标志。视觉示例：http: [//i232.photobucket.com/albums/ee2/nismomatic97/flag.png](http://i232.photobucket.com/albums/ee2/nismomatic97/flag.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T20:16:45.273

您的主要问题是您有任意数量的可能不同实体的标志记录，而不是单个实体（如“客户”）。

过去，我通过`Foreign Key`在每个表中提供一个在整个数据库中唯一的附加字段（“FlagID”）来解决这个问题。GUID 是合适的。然后，您可以简单地`JOIN`将适用于您的特定上下文的表添加到 Flags 表中的 FlagID，您将只获得适用于该特定实体的标志。

例如，当您`JOIN`将Flags 表中的FlagID 转换为Customers 表中的FlagID 时，您只会获得与Customers 相关的那些标志。

*请注意，堆栈溢出没有“多实体”问题；所有标志都被投射到帖子。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T21:07:11.080

基本上，您需要一个带有标志的表格和一个带有客户/用户的表格。这些表应如下所示：

**标志表**：

*   标志的唯一 ID（最简单的方法是将“ID”字段设置为`AUTO_INCREMENT`）。
*   标志名称
*   标志说明
*   你想要的更多

**用户表**：

*   一个存储标志的字段（我建议存储标志的序列化数组）
*   您需要用于其他目的的其他数据

除了存储序列化数组之外，您还可以创建另一个表来存储用户的唯一 ID 和标志 ID。每个标志一行。但是，我认为第一种方法更好，更有效。

**选择和显示标志：**

*   选择一个包含序列化标志数组的字段
*   反序列化数组并用于`JOIN`选择标志的名称和描述。

* * *

# 例子

**将标志存储到用户的配置文件**：
假设您要存储 ID 为 1、3、5 和 7 的标志：

```
$flags = serialize(array(1, 3, 5, 7));
mysql_query("UPDATE `users` SET `flags` = '$flags'") or die(mysql_error()); 
```

如果要编辑标志，请选择字段，对数组进行反序列化并使用[数组函数](http://www.php.net/manual/en/ref.array.php)对其进行编辑。

**选择和显示：**
因此，您有一个值为 1、3、5 和 7 的数组。这是创建查询
的示例：`SELECT`

```
$flags = array(1, 3, 5, 7); // selected from 'users' table and unserialized
$query = "SELECT u.name, f.name, f.description FROM users u INNER JOIN flags f ON ";
$conditions = null;
for($i = 0; $i < count($flags); $i++)
{
    $conditions .= "f.id = $flags[$i] OR ";
}
$conditions = substr($conditions , 0, -4); // removing the last " OR "

$query = $query . $conditions . " WHERE u.name = 'Nikola'"; 
```

这是我们从代码中得到的查询：

```
SELECT u.name, f.name, f.description 
    FROM users u 
    INNER JOIN flags f 
    ON f.id = 1 OR f.id = 3 OR f.id = 5 OR f.id = 7 
    WHERE u.name = 'Nikola' 
```

它将返回所有标志及其名称、描述和用户名。

您所要做的就是现在显示结果。

* * *

**编辑 1**：*用户界面*
我不确定我是否理解您到底想要什么，但是如果您想允许每个用户使用多个标志，我建议您为每个标志或一个[具有多个选择的选择菜单制作一个](http://www.w3schools.com/tags/att_select_multiple.asp)[复选框](http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_form_checkbox)，而不是 drop-向下。我认为下拉不是一个好主意，因为您只能选择一项。

**编辑 2**：
您可以使用与 Stack Overflow 的标记非常相似的[jQuery Autocomplete ，这可能是最佳选择。](http://jqueryui.com/demos/autocomplete/)

另一个想法是您实际上*可以*使用下拉菜单并且仍然允许多个标志。
*事情是这样的：*当用户从下拉列表中选择一个标志时，通过 AJAX 将一个标志存储在 PHP 数组中，并将该数组存储在`$_SESSION`.

示例：通过 AJAX 向 PHP 文件发送请求，在 PHP 文件中读取`$_SESSION`应存储标志的变量。如果它是空的（还没有标志） - 添加一个包含 1 个键的数组。如果它不为空，则读取其值（整个数组），将新标志添加到数组并将其返回给会话变量。

```
session_start();

if(isset($_POST['id'])) $flagid = $_POST['id']; // previously sent request via AJAX that contains this ID.
if(empty($_SESSION['flags'])) $_SESSION['flags'] = array($flagid); // this is the first selected flag
else 
{ 
    // other tags was selected earlier
    $flags = $_SESSION['flags'];
    $flags[] = $flagid;
    $_SESSION['flags'] = $flags;
}
die("ok"); 
```

现在，回到你的 JS 文件，检查返回的结果。如果它是“ok”，则继续，如果它与“ok”不同，则显示错误。
为防止多次选择同一个标签，您可以在用户选择它时使用 jQuery 将其从下拉列表中删除（请参阅[此问题）。](https://stackoverflow.com/questions/1982449/jquery-to-remove-an-option-from-drop-down-list-given-options-text-value)在页面的其他位置，您可以显示选定的标志。

**编辑 3：**
您也可以使用[`<select>`带有“多个”属性](http://www.w3schools.com/tags/att_select_multiple.asp)的。

# image - Matlab：AlphaData 的警告尺寸必须与 CData 匹配

> ID：11477669
> 
> 赞同：0
> 
> 时间：2012-07-13T20:10:32.907
> 
> 标签：image, matlab

以下代码产生错误：

> 警告：AlphaData 的维度必须是 1x1，或者必须与 CData 匹配。

问题是 CData 是彩色图像，因此具有 3 维，而 alphadata 是透明数据 abd 的矩阵，因此具有 2 维。

```
red = cat(3, ones(512), zeros(512), zeros(512));
mask = [];
bounds = data(currow,1:6);
if slice >= bounds(5) && slice <= bounds(6)
    mask = zeros(size(segmask,1),size(segmask,2));
    mask(bounds(1)-4:bounds(2)+4,bounds(4)+4:bounds(4)+5) = 1;
    mask(bounds(2)+4:bounds(2)+5,bounds(3)-4:bounds(4)+4) = 1;
end
imshow(low(:,:,slice),[WL-WW/2 WL+WW/2])
hold on
h = imshow(red);
set(h, 'AlphaData', 0.3*mask);
hold off 
```

这是 Matlab 文档中有关 AlphaData 和 CData 的信息

* * *

> double 或 uint8 的 AlphaData m×n 矩阵
> 
> 透明度数据。指定对象每个面或顶点的透明度的非 NaN 值矩阵。AlphaData 可以是 double 类或 uint8 类。
> 
> MATLAB 软件通过以下方式之一确定透明度：
> 
> 使用 AlphaData 的元素作为透明度值（AlphaDataMapping 设置为无）
> 
> 使用 AlphaData 的元素作为当前 alphamap 的索引（AlphaDataMapping 设置为 direct）
> 
> 将 AlphaData 的元素缩放到轴 ALim 属性的最小值和最大值之间（AlphaDataMapping 设置为缩放，默认值）

* * *

> C数据矩阵 | m×n×3 数组
> 
> 图像数据。一个矩阵或 3-D 值数组，指定定义图像的每个矩形区域的颜色。image(C) 将 C 的值分配给 CData。MATLAB 通过以下三种方式之一确定图像的颜色：
> 
> 使用 CData 的元素作为当前颜色图的索引（默认）（CDataMapping 设置为直接）
> 
> 将 CData 的元素缩放到 min(get(gca,'CLim')) 和 max(get(gca,'CLim')) 值之间的范围（CDataMapping 设置为缩放）
> 
> 将 CData 的元素直接解释为 RGB 值（真彩色规范）
> 
> 请注意，未定义图像 CData 中 NaN 的行为。有关对图像使用透明度的信息，请参阅图像 AlphaData 属性。

* * *

AlphaData 和 CData 怎么可能有 smae 维度？

如果红色是 512x512x3 并且掩码是 512x512 并且除了警告之外，代码似乎可以按预期运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:45:46.427

我发现了我的问题。由于 If 语句，变量`mask`没有被创建。

# dllregistration - dll 2003 80040005 错误寄存器

> ID：11477671
> 
> 赞同：0
> 
> 时间：2012-07-13T20:10:41.723
> 
> 标签：dllregistration, windows-server-2003-r2

我有一个 DLL（用 VB6.. 编写）。它在大多数机器和安装上都可以正常注册和运行。然而，一种安装是 T/S（终端服务器），运行 Server 2003/R2/SP2。我收到以下消息失败：

C:\Program files\ApplicationPath\ModulesPath\dllname.DLL 中的 DllRegisterServer 失败。返回码是：0x80004005

我已确保该路径具有模块及其依赖项所在的目录，我已确保以管理员身份运行 CMD 提示符，并未选中“以受限访问权限运行此程序”复选框。

我运行了depends.exe，它说缺少IESHIMS.DLL 和WER.DLL，但它们在另一个2003 Svr/R2/SP2 盒子上也不见了，它在那里注册并运行良好。

有人对在哪里寻找什么有任何想法吗？我还花了一些时间比较工作服务器和非工作服务器之间的文件夹权限、文件内容和版本等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:22:48.160

0x80004005 通常是 ACCESS_DENIED。有时，终端服务器设置上的权限和配置可能有点偏离地图。可以虚拟化驱动器/位置，并限制某些路径以保持配置清洁。至少一开始我会这么怀疑。

如果您已确保使用管理员权限运行命令提示符，则对 TS 框中的文件夹的直接权限可能是问题所在。

祝你好运。

# javascript - 如何使用 toDataURL 创建无损 WebP 图像？

> ID：11477673
> 
> 赞同：3
> 
> 时间：2012-07-13T20:10:41.507
> 
> 标签：javascript, html, google-chrome, canvas, webp

我正在使用 canvas 元素在 Chrome 中尝试 WebP 图像格式。在 MDN 上，我看到它`toDataURL`接受代表结果图像质量的第二个参数。

我想生成一个画布元素的无损 WebP 图像。但是，如果我通过`1`质量（意思是 100%），我不会得到完全相同的像素。看起来它正在生成有损图像。

这是一个测试用例：http: [//jsfiddle.net/Nf5ve/1/](http://jsfiddle.net/Nf5ve/1/)。在绘制PNG图像时，某个像素的某种颜色的值为40。在自己绘制了100％质量的画布WebP图像后，相同的值已变为37。这对我来说似乎不是无损的，甚至虽然我通过了 100% 的质量。

是否可以`toDataURL`创建无损 WebP 图像，如果可以，如何创建？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T03:25:40.783

webp 没有官方的 MIME 类型，所以现在对它持保留态度。

在 chrome in 上使用“image/webp”`toDataURL`总是会导致现在有损 webp 图像，即使质量为“1”

这个时候貌似没有办法得到无损的webP图片

# java - JFreeChart：带有 StandardXYItemLabelGenerator 的 XYAreaRenderer2

> ID：11477678
> 
> 赞同：2
> 
> 时间：2012-07-13T20:11:13.120
> 
> 标签：java, charts, jfreechart

我正在尝试将 a`StandardXYItemLabelGenerator`与`XYAreaRenderer2`渲染器一起使用，但没有显示任何内容。如果使用相同的代码，`XYLineAndShapeRenderer`我可以正确地看到图表上的标签。我怎样才能看到这些标签`XYAreaChart`？

```
 // create the chart...
        final JFreeChart chart = ChartFactory.createXYAreaChart(
                header_label, // chart title
                x_label, // x axis label
                y_label, // y axis lsabel
                dataset, // data
                PlotOrientation.VERTICAL,
                includeLegend, // include legend
                true, // tooltips
                false // urls
                );

        // NOW DO SOME OPTIONAL CUSTOMIZATION OF THE CHART...
        chart.setBackgroundPaint(Color.white);

        // get a reference to the plot for further customization...
        final XYPlot plot = chart.getXYPlot();
        plot.setBackgroundPaint(Color.lightGray);
        plot.setDomainGridlinePaint(Color.white); // X Axis is Domain
        plot.setRangeGridlinePaint(Color.white);  // Y Axis is Range

        // Allow lines and shapes to be visible
        renderer1 = new XYAreaRenderer();

        // Set the tooltip generator
        renderer1.setBaseToolTipGenerator(toolTipGenerator);

        NumberFormat.getNumberInstance().setMaximumFractionDigits(2);
//        renderer1.setBaseItemLabelGenerator(new StandardXYItemLabelGenerator("{0} {1} {2}", NumberFormat.getNumberInstance(), NumberFormat.getNumberInstance()));
        renderer1.setBaseItemLabelGenerator(new StandardXYItemLabelGenerator("test  {0} {1} {2}", NumberFormat.getNumberInstance(), NumberFormat.getNumberInstance()));

        renderer1.setBaseItemLabelsVisible(true);

        plot.setRenderer(renderer1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T23:41:06.047

与 不同`XYLineAndShapeRenderer`，既不`XYAreaRenderer`也不`XYAreaRenderer2`调用抽象父级的`drawItemLabel()`. 实际上，标签不受支持，但工具提示支持，如下所示。

```
XYAreaRenderer2 renderer = new XYAreaRenderer2(
    new StandardXYToolTipGenerator("test: {0} {1} {2}",
    NumberFormat.getNumberInstance(),
    NumberFormat.getNumberInstance()), null);
plot.setRenderer(renderer); 
```

# php - 来自多个表的 MySQL SUM

> ID：11477679
> 
> 赞同：1
> 
> 时间：2012-07-13T20:11:12.427
> 
> 标签：php, mysql, sql

我有 2 个表：'sending_fresh' 和 'agents'

我想得到“cc”等于“sending_fresh”的某个日期和“agents”的特定团队的总数。

我目前有：

```
SELECT SUM(sending_fresh.cc), agents.team  
FROM sending_fresh, agents 
WHERE agents.team = 'team1' 
AND sending_fresh.date = '2012-05-12' 
```

仅从“sending_fresh”表中选择时，总和工作正常，但在从第二个表中添加 WHERE 语句时，答案会更高且错误。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T20:17:23.480

### 主要答案

> 外键 in对应于表中`sending_fresh`。`agent_id``id``agents`

您缺少 JOIN 条件并且缺少 GROUP BY 子句：

```
SELECT SUM(s.cc), a.team  
  FROM sending_fresh AS s
  JOIN agents        AS a ON a.id = s.agent_id
 WHERE a.team = 'team1' 
   AND s.date = '2012-05-12'
 GROUP BY a.team; 
```

* * *

在我们获得有关加入的信息之前，我写道：

```
SELECT SUM(s.cc), a.team  
  FROM sending_fresh AS s
  JOIN agents        AS a ON a.team = s.team    -- Guess at join columns!
 WHERE a.team = 'team1' 
   AND s.date = '2012-05-12'
 GROUP BY a.team; 
```

由于您错过了加入条件，我不得不猜测它是什么。相反，它可能是`a.team_id = s.team_id`或类似的东西。

~~如果加入是 on `sending_fresh.team`，如果你愿意，你可以完全避免加入。~~

 ~~```
SELECT SUM(cc), team  
  FROM sending_fresh
 WHERE team = 'team1' 
   AND date = '2012-05-12'
 GROUP BY team; 
```~~ 

~~现在更详细地了解模式，这种简化是无效的。~~

 ~~* * *

### 普通的留言

请注意，使用显式 JOIN 意味着您不应该忘记连接条件。您不应在 FROM 子句中使用逗号列表表示法。您需要了解它才能识别古老的 SQL。你不应该在新的 SQL 中使用它，你应该升级旧的 SQL 以使用显式连接。

请注意，如果查询中有 N 个表，则应该有 N-1 个连接条件。~~

# xcode - 使用phonegap滑动删除

> ID：11477680
> 
> 赞同：0
> 
> 时间：2012-07-13T20:11:16.997
> 
> 标签：xcode, html, cordova, swipe, phonegap-build

我一直在关注一个教程，该教程最终创建了一个用于在本地存储表单输入数据的 Web 应用程序（您可以在此处查看最终项目：http: [//mc-mobile-app.s3.amazonaws.com/index.html](http://mc-mobile-app.s3.amazonaws.com/index.html)）。

然后，我使用这些文件来测试使用 phonegap 和 Xcode 创建本机应用程序 - 但我无法弄清楚如何添加滑动以删除存储的条目（一个接一个，而不是一次性删除所有条目）。

使用上述工具可以做到这一点，如果可以，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:19:25.193

在 tableView 的“cellForRowAtIndexPath”委托方法中编写以下内容：

```
 UISwipeGestureRecognizer *swipeLeft = [[UISwipeGestureRecognizer alloc]
                                           initWithTarget:self
                                                   action:@selector(handleSwipeLeft)];
   swipeLeft.direction = UISwipeGestureRecognizerDirectionLeft;
   [cell addGestureRecognizer:swipeLeft];
   [swipeLeft release]; 
```

您必须编写一个处理程序“handleSwipeLeft：”，它显示删除按钮，然后在此按钮的单击事件中，您可以编写以下代码来删除表格行：

```
[tableView deleteRowsAtIndexPaths:indexPaths withRowAnimation:UITableViewRowAnimationFade]; 
```

其中 indexPaths 是要删除的索引数组...希望对您有所帮助... :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T23:38:09.127

我一直在寻找同样的东西。我能找到的最接近的是 jQuery-mobile 插件..

[http://www.andymatthews.net/read/2012/02/19/swipeButton-jQuery-Mobile-plugin-launches.-Millions-rejoice](http://www.andymatthews.net/read/2012/02/19/swipeButton-jQuery-Mobile-plugin-launches.-Millions-rejoice)！

# mod-rewrite - 如何在显示之前将 PDF URL 重写为中间跟踪页面

> ID：11477681
> 
> 赞同：0
> 
> 时间：2012-07-13T20:11:16.217
> 
> 标签：mod-rewrite

我正在尝试使用设置为原始 PDF 路径的参数“ref”将 PDF URL 重写为中间 html 页面。此中间页面是用于跟踪 PDF 视图的分析工具。它使用 JavaScript 记录视图，然后重定向回实际的 PDF 源 URL。

[http://www.mydomain.com/dir/some-pdf.pdf](http://www.mydomain.com/dir/some-pdf.pdf)应该重写为：[http://www.mydomain.com/elqNow/elqRedir.htm?ref=http(s)://www.mydomain。 com/dir/some-pdf.pdf](http://www.mydomain.com/elqNow/elqRedir.htm?ref=http(s)://www.mydomain.com/dir/some-pdf.pdf)

基本上，该规则需要在 %{REQUEST_URI}、%{HTTP_REFERER} 中检查 /elqNow/elqRedir.htm 并且“ref”参数需要是完整路径，例如 http(s)*://%{HTTP_HOST}/PDF_URL （无法弄清楚如何在没有硬编码的情况下添加 http 或 https。）

这是我到目前为止所拥有的，这会产生一个讨厌的循环：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} !/elqNow/elqRedir\.htm$
RewriteRule ^(.+\.pdf|PDF)$ elqNow/elqRedir.htm?ref=http://%{HTTP_HOST}/$1 [R=301, L] 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T16:11:36.290

弄清楚了。检查 referer 以确保它不是中间 HTML 页面，防止循环。稍微清理了 RewriteRule 以捕获格式奇怪的“pdf”文件扩展名。

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_REFERER} !elqRedir\.htm
RewriteRule ^(.+\.[pP][dD][fF])$ /elqNow/elqRedir.htm?ref=http://%{HTTP_HOST}/$1 [R=302,L] 
```

# python - 在 SQLAlchemy 中使用过滤器进行选择时出现奇怪的 SQL 错误

> ID：11477684
> 
> 赞同：2
> 
> 时间：2012-07-13T20:11:21.703
> 
> 标签：python, sqlalchemy

**编辑**我找到了答案，它与模型的设置方式无关。我试图将`request.form`from 烧瓶传递给实际创建地址的函数。显然将其转换为`kwargs`会导致问题。手动指定每个参数使一切正常。

我是 SQLAlchemy 的新手，到目前为止一切进展顺利，但我遇到了一个问题，我完全被难住了，所以我希望这里有人知道我做错了什么！

我有一个地址模型，我正在尝试从中进行选择。该模型如下所示：

```
class Address(Base):
    __tablename__ = 'address'

    id = Column(Integer, primary_key=True)
    comment = Column(String(255))
    address1 = Column(String(100))
    address2 = Column(String(100))
    city = Column(String(45))
    state = Column(String(2))
    zip = Column(String(5))
    zip4 = Column(String(4))
    lat = Column(Float)
    lon = Column(Float) 
```

我正在尝试匹配通过我的应用程序输入的地址的元素，以查看是否可以在不进行地理编码的情况下找到纬度和经度。我`filter_by`在其他有效的查询中使用过，所以我在这里尝试同样的事情：（`address`字典来自我的应用程序的发布参数）

```
matched_address = session.query(Address).filter_by(
    address1=address['address1'],
    city=address['city'],
    state=address['state'],
    zip=address['zip']
).one() 
```

不幸的是，这因 SQL 错误而失败：

```
ProgrammingError: (ProgrammingError) (1064, 'You have an error in your SQL syntax; 
check the manual that corresponds to your MySQL server version for the right 
syntax to use near \') AND address.state = ("\'XX\'",) AND address.zip = 
("\'XXXXX\'",) AND address.city \' at line 3') 
```

这看起来非常非常难看！额外的`()`从哪里来？我打开`echo=True`了我的电话`create_engine()`，它打印了一个看起来正确的查询（我在 mysql 客户端中尝试过，没有问题）：

```
SELECT address.id AS address_id, address.comment AS address_comment, 
    address.address1 AS address_address1, address.address2 AS address_address2, 
    address.city AS address_city, address.state AS address_state, 
    address.zip AS address_zip, address.zip4 AS address_zip4, 
    address.lat AS address_lat, address.lon AS address_lon 
FROM address 
WHERE address.address1 = %s AND address.state = %s AND address.zip = %s AND 
    address.city = %s 
LIMIT %s 
```

但是它说它输出的参数似乎有点奇怪，虽然我不确定这是否只是 python 对象，或者它是否真的以这种方式进入 MySQL：（注意 X 字符只是我真实地址的替换）

```
([u'1111 XXXXXX St'], [u'XX'], [u'XXXXX'], [u'XXXXX'], 1) 
```

只是为了好玩，我尝试使用`filter()`而不是，`filter_by()`但我得到了同样的错误：

```
matched_address = database.session.query(Address).filter(
    and_(Address.address1==address['address1'], Address.city==address['city'],    
    Address.state==address['state'],Address.zip==address['zip'])).one() 
```

对不起，如果这是一个基本问题。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:22:23.150

我找到了答案，它与模型的设置方式无关。我试图将 request.form 从烧瓶传递给实际创建地址的函数。显然将其转换为 kwargs 会导致问题。手动指定每个参数使一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T01:14:52.040

您是否尝试过打印`address['address1']`等的值？这`repr`可能是最清楚的。

[编辑]

查看文档后，我想知道您是否应该这样做：

```
from sqlalchemy import and_
filter(and_(address1 == address['address1'], city == address['city'], ...)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T03:28:20.110

您的类定义对我有用，以您未提供的大量设置代码为模。为随后的大量代码道歉。首先，定义：

```
from sqlalchemy import create_engine, Column, Integer, String, Float
from sqlalchemy.ext.declarative import declarative_base
Base = declarative_base()

class Address(Base):
    __tablename__ = 'address'

    id = Column(Integer, primary_key=True)
    comment = Column(String(255))
    address1 = Column(String(100))
    address2 = Column(String(100))
    city = Column(String(45))
    state = Column(String(2))
    zip  = Column(String(5))
    zip4 = Column(String(4))
    lat = Column(Float)
    lon = Column(Float)

    #note I am only initializing the querying columns. i am lazy   
    def __init__(self, cm, a1, ct, st):
        self.comment = cm
        self.address1 = a1
        self.city = ct
        self.state = st 
```

将该类定义放入文件 MyAddr.py 并导入它，然后启动 python。注意我在 SA 演示中使用 sqlite。

```
>>> from sqlalchemy import create_engine
>>> engine = create_engine('sqlite:///:memory:', echo=False)
>>> from sqlalchemy.orm import sessionmaker
>>> Session = sessionmaker(bind=engine)
>>> from MyAddr import Base, Address
>>> Base.metadata.create_all(engine)
>>> 
>>> a = '1234 Main St.'
>>> c = 'Anywhere'
>>> st= 'MO'
>>> cm= 'Blah blah blah blah blah'
>>> 
>>> addr = Address(cm, a, c, st)
>>> 
>>> s = Session()
>>> s.add(addr)
>>> s.commit()
>>> 
>>> q = s.query(Address).filter_by(address1=a,city=c)
>>> 
>>> q.one()
<op.Address object at 0x10d158a50>
>>> q = s.query(Address).filter_by(address1=a,city=c,state=st)
>>> q.one()
<op.Address object at 0x10d158a50>
>>> abc = q.one()
>>> abc
<op.Address object at 0x10d158a50>
>>> abc.city
u'Anywhere'
>>> abc.state
u'MO'
>>> abc.address1
u'1234 Main St.' 
```

由于您的类定义**可以**工作，因此（对我而言）您的问题中没有足够的信息来了解它为什么不起作用。也许这与您的输入数据有关？您的错误消息包含两组引号，一组已转义。您的输入字典是否包含带引号的字符串？

# wcf - 如何使用 C# 为 HTTPWebRequest 构造一个肥皂服务请求？

> ID：11477687
> 
> 赞同：0
> 
> 时间：2012-07-13T20:11:26.853
> 
> 标签：wcf, soap, httpwebrequest, http-headers, soap-client

我在这里写的是关于使用 HTTPWebRequest for Windows Phone 应用程序使用肥皂服务的查询。我正在按照以下步骤构建请求并传递给服务器。但我无法连接到此服务器并返回“远程服务器返回错误：未找到”。但我可以很好地使用 Fiddler 工具。

步骤1

--> 创建带有所需标头的请求。（您能否验证“SOAPAction”标头是否以正确的方式添加。）

```
public void HttpSoapPost(string uri, AsyncCallback callBack)
{
    try
    {
        ServerURL = uri;
        uri = uri + "/Reports1.1/WS/Retrieve.svc/soap";         
                // uri value will be "https://onsite.soaptestingserver.com/Reports1.1/WS/Retrieve.svc/soap
        var request = (HttpWebRequest)WebRequest.Create(uri);
        request.Method = Common.Method;
        request.ContentType = "text/xml; charset=utf-8";
        request.Headers[HttpRequestHeader.ContentLength] = "297";
        request.Headers[HttpRequestHeader.UserAgent] = "WP7";
        request.Headers[HttpRequestHeader.Connection] = Common.Connection;
        request.Headers[HttpRequestHeader.AcceptEncoding] = Common.AcceptEncoding;
        request.Headers[HttpRequestHeader.Host] = "soaptestingserver.com:8082";
        request.Headers[HttpRequestHeader.Expect] = "100-continue";
        request.Headers["SOAPAction"] = "https://onsite.soaptestingserver.com/Reports1.1/WS/Retrieve.svc/IRetrieve/GetVersions";  
        request.BeginGetResponse(callBack, request);
    }
    catch (Exception exp)
    {
        throw exp;
    }
} 
```

步骤 2：发送请求以添加正文内容。

```
private static void GetRequestStreamCallback(IAsyncResult asynchronousResult)
{
    HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;
    // End the operation
    Stream postStream = request.EndGetRequestStream(asynchronousResult);
    //StreamWriter streamWriter = new StreamWriter(postStream, Encoding.UTF8);

    StringBuilder soapRequest = new StringBuilder("<s:Envelope xmlns:s=\"http://schemas.xmlsoap.org/soap/envelope/\">");
    soapRequest.Append("<s:Body>");
    soapRequest.Append("<GetVersions xmlns=\"https://www.onsite.soaptestingserver.com/Reports1.1/WS/Retrieve.svc\">");
    soapRequest.Append("<Request xmlns:i=\"http://www.w3.org/2001/XMLSchema-instance\">");
    soapRequest.Append("<Language>en-EN</Language>");
    soapRequest.Append("</Request>");
    soapRequest.Append("</GetVersions></s:Body></s:Envelope>");
    string postData = soapRequest.ToString();

    // Convert the string into a byte array.
    byte[] byteArray = Encoding.UTF8.GetBytes(postData);

    // Write to the request stream.
    postStream.Write(byteArray, 0, postData.Length);
    postStream.Close();

    // Start the asynchronous operation to get the response
    request.BeginGetResponse(new AsyncCallback(GetResponseCallback), request);
}

private static void GetResponseCallback(IAsyncResult asynchronousResult)
{
    HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;

    // End the operation /* I'm getting the exception in the next line as "The remote server returned an error: NotFound."*/
    HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(asynchronousResult); 
    Stream streamResponse = response.GetResponseStream();
    StreamReader streamRead = new StreamReader(streamResponse);
    string responseString = streamRead.ReadToEnd();
    Console.WriteLine(responseString);
    // Close the stream object
    streamResponse.Close();
    streamRead.Close();

    // Release the HttpWebResponse
    response.Close();           
} 
```

# entity-framework - 实体框架 - 同一个表的多个外键导致数据更新不正确

> ID：11477695
> 
> 赞同：2
> 
> 时间：2012-07-13T20:11:58.293
> 
> 标签：entity-framework

我的数据库中有以下 2 个表：

**地址**：

```
Street1
City
State
Zipcode 
```

**客户**：

```
Name
LocationAddressId (FK to Address table)
MailingAddressId (FK to address table) 
```

我为此生成了一个实体框架模型。当我创建一个客户对象并仅填充`LocationAddress`但不填充`MailingAddress`时，会为 生成一个 id（地址表的主键）`LocationAddress`。此 id 被分配给`LocationAddressId`并且相同的 id 也被分配给`MailingAddressId`。

这是我的代码：

```
 Customer c = new Customer();
 var a = new Address
 {
        Street1 = "Test",
        City = "test",
        Zip = "43343",
        Country = "sdf",
 };

 c.Address = a;
 c.Name = "Test Customer";

 ctx.Customers.AddObject(c);
 ctx.SaveChanges(); 
```

保存更改后，即使我没有为邮寄地址分配任何内容，它们也是一样的`c.LocationAddressId`。`c.MailingAddressId`

问题2：

在我的代码中，当我也尝试创建时`MailingAddress`，我得到了错误

> “无法确定 'TestModel.FK_Customer_LocationAddress_Address' 关系的主体端。多个添加的实体可能具有相同的主键。

这是我的代码：

```
 Customer c = new Customer();
  var a = new Address
  {
        Street1 = "Test",
        City = "test",
        Zip = "43343",
        Country = "sdf",
  };

  c.Address = a;

  var b = new Address
  {
        Street1 = "Test mailing addr",
        City = "test",
        Zip = "43343",
        Country = "sdf",
  };

  c.Address1 = b;
  c.Name = "Test Customer";

  ctx.Customers.AddObject(c);
  ctx.SaveChanges(); 
```

我不确定我是否以正确的方式创建对象。有没有人对导致问题的原因有任何想法？

谢谢

# node.js - 如何为 SCM 提交自动清理 node_modules 目录

> ID：11477698
> 
> 赞同：4
> 
> 时间：2012-07-13T20:12:15.917
> 
> 标签：node.js, version-control, socket.io

我对 node.js 很陌生。将我的依赖项（来自`node_modules`）放在与我的项目适合我的同一目录中的功能。

我还想在我的项目中[提交这些依赖](http://www.mikealrogers.com/posts/nodemodules-in-git.html)项。

我从一个使用`socket.io`. 但是当我查看`npm`after a生成的目录时`npm install socket.io`，有示例文件、文档、自述文件、基准数据、更改日志……很多我不想在我的 git 或 subversion 系统中提交的文件。

是否有一个自动工具可以缩小`node_modules`目录的内容以只保留需要的内容？

如果我正确阅读了 npm 的文档，我什么也没找到。有一个`prune`选项，但它是删除未使用的依赖项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T20:18:35.720

不，没有工具可以做到这一点。通常，模块的作者`.npmignore`用来忽略他不想发布的任何文件。示例、文档、自述文件、变更日志几乎由所有作者发布。

您唯一的方法是删除它们并提交给 git。

# django - 使用 Django 模型的进度监控不同步（一个作者和多个读者）

> ID：11477703
> 
> 赞同：1
> 
> 时间：2012-07-13T20:12:55.620
> 
> 标签：django, django-models, concurrency, progress

我正在使用 Django 实现进度监控功能。但是，我无法在前端获取更新的值。

执行 Django 管理命令`popen`以不断更新`webscan`. Scan 是一个 Django 模型，`progress_info`是模型的一个属性，保存在数据库中。代码如下：

```
 d = 10
            while (d) :
                time.sleep(10)
                try:
                    isBusy = server.call("framework.busy?")
                    logging.debug(isBusy)
                    if isBusy.strip() == 'true':
                        progress = webscan.progress
                        webscan.progress_info = progress
                        webscan.save()
                        logging.debug("%s"%progress)
                    else:
                        d = 0
                except Exception as e:
                    logging.debug("In an exception when calling busy. Exception: %s and Type %s"%(e, type(e)))
                    d -= 1 
```

在前端，我进行 ajax 调用以获取`progress_info`. 处理程序只需获取 的值`webscan.progress_info`并将其返回给前端。代码如下：

```
@property
def get_progress(self):
    return self.progress_info 
```

使用数据库的 GUI，我可以看到 progress_info 的值保持更新。但是，ajax 调用会一直返回`0`到前端，直到命令完成（0 是 的初始值`progress_info`）。

我猜这是因为 DB 或 Django 的锁定机制，但不完全明白为什么。有人可以帮我吗？非常感谢~

# android - Android TCP连接改变方向

> ID：11477707
> 
> 赞同：0
> 
> 时间：2012-07-13T20:13:32.780
> 
> 标签：android, tcp-ip

我正在尝试开发一个简单的聊天应用程序，仅用于学习目的。我的问题是，当屏幕方向改变时，TCP/IP 连接会在方向改变后关闭并重新创建。

我知道Android会在更改方向时破坏活动并重新创建它。

所以我的问题是：是否可以只改变视图而其他一切都保持不变？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T20:25:29.237

您应该将 TCP/IP 通信实现为[服务](http://developer.android.com/reference/android/app/Service.html)，然后它将不依赖于任何方向更改/其他活动的重新创建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T20:18:20.947

您想阅读[处理运行时更改](http://developer.android.com/guide/topics/resources/runtime-changes.html)文档中称为**自己处理配置更改的部分。**简而言之，您告诉它您将通过在 AndroidManifest 中添加到您的 Activity decleration 来手动处理它们。这是一个例子：`android:configChanges="orientation|keyboardHidden"`

```
<activity android:name=".MyActivity"
          android:configChanges="orientation|keyboardHidden"
          android:label="@string/app_name"> 
```

然后在您的 Activity 中，您可以`onConfigurationChanged`像这样覆盖：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);

    // Checks the orientation of the screen
    if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
        Toast.makeText(this, "landscape", Toast.LENGTH_SHORT).show();
    } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT){
        Toast.makeText(this, "portrait", Toast.LENGTH_SHORT).show();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T20:16:30.720

您可以将连接设为静态而不在它为 != null 时重新创建它，或者更好地将其包装到使用单例模式的单独类中

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T20:29:14.620

只是不要从活动中创建连接。您可以改用应用程序：

在您的清单中：

```
<application
        android:name=".MyApplication" ...> 
```

它将被创建一次，并贯穿应用程序的整个生命周期，即使活动被销毁。

另一种选择是服务。对于聊天应用程序，我会使用它，因为它将后台网络工作与 UI 完全分开。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-13T20:30:36.257

好吧，这里真正的问题是您在主 UI 线程上执行 TCP/IP 连接，这是一个糟糕的主意，因为您冒着阻止触摸事件和布局生成的风险。如今，在大多数新设备上都抛出了A`NetworkOnMainThreadException`以防止这种行为。

我要做的是将 TCP/IP 连接包装在 a`Thread`中，然后`Thread`在`Fragment`带有`setRetainInstance(true)`. 这可以保护您`Thread`的配置更改，因为`Fragment`即使`Activity`被销毁，它也会保留在内存中。[您可以在此处](http://www.androiddesignpatterns.com/2013/04/retaining-objects-across-config-changes.html)阅读有关此方法的更多信息。

如果 TCP/IP 连接需要跨多个`Activity`实例存在，则应使用 a`Service`代替。

# spring-mvc - 方法中的 Spring Autowire

> ID：11477709
> 
> 赞同：0
> 
> 时间：2012-07-13T20:13:34.507
> 
> 标签：spring-mvc, spring-3, autowired

我的应用程序有一个如下界面。

```
public interface MainInterface
{
     void someMethod();
} 
```

然后，我有这个接口的许多实现。

```
@Service    
public class ImplClass1 implements MainInterface
{
   @Override
   public void someMehtod()
   {
      //Execution of code
   }
}

@Service    
public class ImplClass2 implements MainInterface
{
   @Override
   public void someMehtod()
   {
      //Execution of code
   }
}

@Service
public class ImplClass3 implements MainInterface
{
   @Override
   public void someMehtod()
   {
      //Execution of code
   }
} 
```

下面是一个控制器。

```
@Controller
public class MainController
{
     MainInterface implObj;

     @RequestMapping("service1")
     public void Service1Handler()
     {
         //Replace below with @Autowire
         implObj = new ImplClass1();
     }

     @RequestMapping("service2")
     public void Service1Handler()
     {
         //Replace below with @Autowire
         implObj = new ImplClass2();
     }

     @RequestMapping("service3")
     public void Service1Handler()
     {
         //Replace below with @Autowire
         implObj = new ImplClass3();
     }
} 
```

正如在每种方法的评论中提到的，我想使用 spring 对其进行初始化。这只是一个例子。在我的实时应用程序中，我在控制器中有 12 个接口实现和 6 个方法。

您能否指导我如何在方法级别使用自动装配功能或建议任何其他最佳方式。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T21:03:25.773

可以想到这两种方式——

```
@Controller
public class MainController
{
     @Autowired @Qualifier("impl1") MainInterface impl1;
     @Autowired @Qualifier("impl2") MainInterface impl2;
     @Autowired @Qualifier("impl3") MainInterface impl3;

     @RequestMapping("service1")
     public void service1Handler()
     {
          impl1.doSomething()
     }

     @RequestMapping("service2")
     public void Service1Handler()
     {
         //Replace below with @Autowire
          impl2.doSomething()
     }

     @RequestMapping("service3")
     public void Service1Handler()
     {
         //Replace below with @Autowire
           impl3.doSomething()
     }
} 
```

或将其隐藏在工厂后面：

```
class MaintenanceInterfaceFactory{
     @Autowired @Qualifier("impl1") MainInterface impl1;
     @Autowired @Qualifier("impl2") MainInterface impl2;
     @Autowired @Qualifier("impl3") MainInterface impl3;
     getImplForService(String name){
        //return one of the impls above based on say service name..
     }
} 
```

# php - 从模态窗体调用 ajax 到同一个模态窗口

> ID：11477714
> 
> 赞同：0
> 
> 时间：2012-07-13T20:13:48.070
> 
> 标签：php, forms, jquery

我有以下代码：

jQuery：

```
 function suggestPtype() {
    $.ajax({
        type:'POST',
        url: 'include/suggest_ptype_categ.php', 
        data:$('#ptype_form').serialize(), 
        success: function(response) {
           $('#ptype_form').find('.ptype_thanks').html(response);
        }
    });
   return false;
  } 
```

HTML：

```
<div id="ptype_box" class="ptype_popup">
                <a href="#" class="close"><img src="<?php echo $_SERVER["SITE_HTMLROOT"]?>/images/close.png" class="btn_close" title="Close Window" alt="Close" /></a>
                    <form method="post" id="ptype_form" onsubmit="return suggestPtype();">
                            <span>Product Type</span><input class="required" name="suggest_ptype" value="" type="text" autocomplete="off" placeholder="Product Type"><br />
                            <?php 
                                $namecat=$langid."_name";
                                $result1 = mysql_query ( "SELECT categories.id, categories.$namecat FROM categories LEFT JOIN ptype_new ON ( ptype_new.catid LIKE concat( '%::', categories.id, '::%' ) ) WHERE ptype_new.id =12" ) or die(mysql_error());
                                while($row2 = mysql_fetch_array($result1)){
                                    echo '<input type="checkbox" name="suggest_cat[]" value="'.$row2[0].'"><span id="label" style="padding-left:10px;color:#ffffff; font:13px Arial,Helvetica,sans-serif;">'.$row2[1].'</span><br/>';} ?>
                            <button class="submit button" type="submit" id="doSuggestPtype" name="doSuggestPtype">Save</button>
                            <div class="ptype_thanks"></div>
                    </form>
            </div> 
```

php:

```
 <?php
     if(isset($_POST['doSuggestPtype'])) {
        $suggest_ptype = $_POST['suggest_ptype'];

            echo " Suggested Product Type is:".$suggest_ptype; 
    ?> 
```

`class="ptype_popup"`是一个模态窗口。我想通过 ajax 调用以相同的表单（弹出窗口）调用表单中的值，但我不管理。我哪里错了

谢谢科斯敏

# c++ - 如果我有一个固定大小的填充 ascii 数字的 char 数组，我知道它指的是一个无符号整数，那么将它转换为此类的最快方法是什么？

> ID：11477716
> 
> 赞同：1
> 
> 时间：2012-07-13T20:13:58.890
> 
> 标签：c++, c, optimization, atoi

假设我有一个`char buf[12];`我知道在左边用空格填充的右对齐无符号数字。因此，例如：（`_________329`代表`_`空间的地方）。我能想到的最快的解析方法是这样的：

```
while (*buf == ' ') buf++;
atoi(buf); 
```

但我想知道是否有更快的方法，特别是`atoi`考虑到我们知道它是无符号的，`atoi`它不假设..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T21:46:08.670

我假设第一个字符是为“潜在标志”保留的，并且总是“空格”？因为否则，您只需要 a`char[11]`而不是 a `char[12]`。无论如何，固定大小允许手动循环展开：

```
unsigned parse(const char(&b)[12])
{
    return ((((((((((b[1] & 15))
             * 10 + (b[2] & 15))
             * 10 + (b[3] & 15))
             * 10 + (b[4] & 15))
             * 10 + (b[5] & 15))
             * 10 + (b[6] & 15))
             * 10 + (b[7] & 15))
             * 10 + (b[8] & 15))
             * 10 + (b[9] & 15))
             * 10 + (b[10]& 15);
} 
```

请注意，该`& 15`技巧将空格和零视为相同，并且适用于 ASCII（空格 = 32，零 = 48）和 EBCDIC（空格 = 48，零 = 240）。我还没有检查过其他字符编码:)

这实际上会比 快还是慢`atoi`？找出答案的唯一方法是测量。但无论如何我都可能会留下来`atoi`，因为使用标准函数总是可以提高可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T22:37:55.480

首先，问问自己为什么要这样做。如果 'buf' 是一个很长的文件，你可能会遇到[Schmiel the Painter algorithm](http://www.joelonsoftware.com/articles/fog0000000319.html)，如果你有很多十进制数字，你可能会在使用例如乘以一个大数字时遇到问题。[GMP](http://gmplib.org)（有关有符号整数运算，请参阅 mpz 部分）

其次，考虑您知道标准库不知道的内容。 [Dmitry 建议](https://stackoverflow.com/a/11477872/325514)使用 'fast platform-optimized `strrchr`，但 strrchr 无法解决遍历字符串的问题，`strrchr`实际上还有其他约束，例如搜索终止的空字符。

你可能知道一些事情，比如：

*   你的数字永远不会是负数；即 atoi 不需要选择前导 +/- 符号。您已经正确地注意到了这一点，但是，这可能不是时间的主要因素。
*   您的数字将大多是短的或大部分是长的，这将决定您是否应该开始在字符串的开头或结尾寻找空格。值得注意的是，`strrchr`不知道字符串的长度，因此总是从头开始读取`atoi`，我正在查看的实现（在 Newlib 中）也是如此。您的示例代码还暗示从字符串的开头进行搜索。
*   您的数字将始终以 10 为底。这消除了一些数学问题。
*   您的数字将始终适合无符号长。是的，这是有保证的，因为它们是 12 个字符，但是 atoi 不知道这一点，并且会尝试处理错误。此外，`atoi()`返回一个有符号整数，因此如果您需要 1,000,000,000 之类的 13 位数字，则需要解决这个问题。
*   其他我没有想到的东西；但你可能会。

您应该从**阅读源代码**开始。从这个简单的练习中可以获得很多东西！我最近一直在使用[Newlib](http://sourceware.org/newlib/)并已下载并打开它，这就是我将参考的内容，但 GNU 的[glibc](http://sourceware.org/git/?p=glibc.git;a=tree)和任何 Windows 使用的可能会有所不同。

乍一看，我看到了一个简单的优化：`atoi`只是对 的调用`strtol`，或“字符串到 long”（int 和 long 在我的平台上都是 32 位，“long long”是获得更大的东西所必需的）。编译器可能会将其优化为直接调用，但它可能会为我们节省一个周期。对于您表面上对速度敏感的应用程序，只需立即调用 strtol() 即可。或者更确切地说，调用`strtoul`'string to unsigned long'，因为这就是你正在做的事情。现在我们有了一个不调用任何其他值得注意的函数，让我们来看看它。现在忽略重入的东西。小心括号，一些 if 有它们，而相关的 else 缺少它们（这是糟糕的 IMO 风格，我更喜欢到处都有括号）。

```
unsigned long _strtoul_r
    (struct _reent *rptr, _CONST char *nptr, char **endptr, int base)
{
  register const unsigned char *s = (const unsigned char *)nptr;
  register unsigned long acc;
  register int c;
  register unsigned long cutoff;
  register int neg = 0, any, cutlim;

  /*
   * See strtol for comments as to the logic used.
   */
  do {
    c = *s++;
  } while (isspace(c));
  if (c == '-') {
    neg = 1;
    c = *s++;
  } else if (c == '+')
    c = *s++;
    if ((base == 0 || base == 16) &&
    c == '0' && (*s == 'x' || *s == 'X')) {
    c = s[1];
    s += 2;
    base = 16;
  }
  if (base == 0)
    base = c == '0' ? 8 : 10;
  cutoff = (unsigned long)ULONG_MAX / (unsigned long)base;
  cutlim = (unsigned long)ULONG_MAX % (unsigned long)base;
  for (acc = 0, any = 0;; c = *s++) {
    if (isdigit(c))
      c -= '0';
    else if (isalpha(c))
      c -= isupper(c) ? 'A' - 10 : 'a' - 10;
    else
      break;
    if (c >= base)
      break;
    if (any < 0 || acc > cutoff || (acc == cutoff && c > cutlim))
    any = -1;
    else {
      any = 1;
      acc *= base;
      acc += c;
    }
  }
  if (any < 0) {
    acc = ULONG_MAX;
    rptr->_errno = ERANGE;
  } else if (neg)
    acc = -acc;
  if (endptr != 0)
    *endptr = (char *) (any ? (char *)s - 1 : nptr);
  return (acc);
} 
```

从函数定义开始，我们注意到如果我们的应用程序是单线程的，那么可以去除一些可重入的麻烦。还有一个 char **ptr 参数，它存储一个指向经过解析数字的字符串的指针，我们不需要它。也没有长度定义，所以它必须搜索空字符才能找到字符串的长度。

在这个应用程序中，*s 被定义为一个寄存器，这在我的平台上是有意义的，但在你的平台上可能不是。还定义了一些我们不需要的其他整数。

在 do/while 循环中，有一个调用来`isspace()`检查空格、水平制表符、换行符、垂直制表符、提要和回车符。你只需要空间。此外，它从字符串的前面开始并向后工作。如果您的数字主要是小数字，请更改它。

然后，我们做一些基础测试。基数可以是 0，允许自动检测基数（需要循环），如果是 8 或 16，它允许前导 '0' 或前导 '0x'，我们不需要知道或测试。

接下来，我们创建 'cutoff' 和 'cutlim' 变量；你不需要这些，因为表面上你不需要范围检查。

最后，我们到了结束 for 循环。`isdigit`有一个 if\else if\else 块，它用、`isalpha`和`isupper`函数确定字符类型和数值。这些包含一些与语言环境相关的漂亮代码；看来我们可以假设十进制值用单个`c -= 0`语句替换整个 if/else if/else 块。

接下来，还有一些错误检查，`if (c >= base)`其中便宜并且可能很好保留。回想一下，C 是无符号的，所以如果 *s 是，例如，一个空格 (0x20)（小于 '0'，0x30），这将计算为 (unsigned)(0x30 - 0x20) = 255 - 10，即大于基数 (10)。它并不完美，但它非常好而且非常便宜。

接下来，在块中有一些边界检查`if (any...`，然后我们进入函数的实际内容`acc *= base; acc += c;`：我们几乎无法优化它，但如果我们有一个二进制基础，我们可以将它转换为班次。希望你的处理器上有一个快速的硬件乘法器，如果这是一个 Arduino ISR，你就有麻烦了。如果你有它们，你可能想研究像乘法累加这样的 DSP 汇编指令来加快速度。

在 for 循环之后，还有一些我们也可以忽略的错误处理和负数处理。

因此，总而言之，如果您经常这样做，我会编写一个新函数来处理您的特殊情况：

```
unsigned long TwelveCharDecimalStringWithLeadingSpacestoul(char *nptr)
{
    register const unsigned char *s = (const unsigned char *)nptr;
    register unsigned long acc;
    register int c, base = 10;

  do {
    c = *s++;
  } while (c == ' ');

  for (acc = 0;; c = *s++) {
    c -= '0';
    if (c >= base) {
      _errno = ERANGE;
      acc = -1;
      break;
    }
    acc *= base;
    acc += c;
  }
  return (acc);
} 
```

它消除了通用性`atoi`并使用了您所做的假设来加快速度。然而，除非这个操作发生得非常多，或者必须非常快地发生，否则你可能会更好地使用更简单、更清晰、更安全、更灵活且通常更好的方法：

```
unsigned long result = 0;
char *begin = strrchr(buf, ' ');
result = strtoul(buf, NULL, 10);

if (result == 0 && errno == ERANGE)
   // Handle error 
```

**编辑**：我写完了，我注意到[FredOverflow 发布了一个更好的答案](https://stackoverflow.com/a/11478809/325514)。展开循环（我没有这样做，它似乎没有必要，但任何已知持续时间的循环都可以在必要时展开）并用 做了一个巧妙的技巧`& 15`，我不得不承认这很酷。但是，上面的函数仍然很好地演示了在一般情况下如何处理加速某些标准库调用的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T20:25:11.867

可能这段代码会更快：

```
char *begin = strrchr(buf, ' ');
atoi(begin ? begin : buf); 
```

假设快速平台优化标准函数 strrcr。

# c++ - 你如何在 Arduino 上包含 time_t？

> ID：11477718
> 
> 赞同：2
> 
> 时间：2012-07-13T20:14:04.043
> 
> 标签：c++, arduino, ctime

我正在尝试编译并将示例 WiFly 项目之一上传到我的 Arduino。该示例的函数之一是返回类型为“time_t”，但编译器无法识别。我试过同时包括`<ctime>`和`<time.h>`。

这是我第一次真正使用 C++，那么如何在我的 Arduino 上导入“time_t”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T20:16:07.520

显然你需要做两件事才能`time_t`在你的 Arduino 上使用。

1.  [下载时间库](http://www.arduino.cc/playground/Code/time)
2.  包括`<Time.h>`（注意大写 T）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T04:44:18.777

如果您下载时间库，它会得到一个包含 3 个文件夹的 .zip 文件。TimeAlarms、时间和 DS1307RTC。尝试将这 3 个文件夹从 Time 文件夹中移出，直接移到 library 文件夹中。

请参阅 2012 年 11 月 14 日 5:09 的评论[http://adventuresinarduinoland.blogspot.com/2012/09/yet-another-real-time-clock.html](http://adventuresinarduinoland.blogspot.com/2012/09/yet-another-real-time-clock.html)

# java - Pycharm 安装抱怨 OpenJDK

> ID：11477719
> 
> 赞同：13
> 
> 时间：2012-07-13T20:14:12.707
> 
> 标签：java, ubuntu, pycharm

我尝试在 Ubuntu 12.04 上安装 Pycharm，我有以下信息：

```
user@user:~/Pobrane/pycharm-2.5.2/bin$ sh pycharm.sh
OpenJDK Runtime Environment (IcedTea6 1.11.1) (6b24-1.11.1-4ubuntu3)
OpenJDK Server VM (build 20.0-b12, mixed mode)
WARNING: You are launching the IDE using OpenJDK Java runtime.

         ITS KNOWN TO HAVE PERFORMANCE AND GRAPHICS ISSUES!
         SWITCH TO THE ORACLE(SUN) JDK BEFORE REPORTING PROBLEMS!

NOTE:    If you have both Oracle (Sun) JDK and OpenJDK installed
         please validate either PYCHARM_JDK, JDK_HOME, or JAVA_HOME environment variable points to valid Oracle (Sun) JDK installation.
         See http://ow.ly/6TuKQ for more info on switching default JDK.

Press Enter to continue. 
```

怎么做才能正常上班？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-29T08:19:40.190

您需要将 OpenJDK 换成 Sun JDK。

在终端中运行它（Ctrl + Alt + T）：

```
sudo apt-get purge openjdk*
sudo add-apt-repository ppa:webupd8team/java
sudo apt-get update
sudo apt-get install oracle-java7-installer 
```

按照安装说明进行操作，然后检查您的 Java 版本：

```
java -version 
```

它应该返回如下内容：

```
java version "1.7.0_10"
Java(TM) SE Runtime Environment (build 1.7.0_10-b18)
Java HotSpot(TM) 64-Bit Server VM (build 23.6-b04, mixed mode) 
```

要自动设置 Java 7 环境变量，您可以安装以下包：

```
sudo apt-get install oracle-java7-set-default 
```

通过[WebUpd8](http://www.webupd8.org/2012/01/install-oracle-java-jdk-7-in-ubuntu-via.html)

您甚至不需要重新安装 pycharm，它会自动切换到新的 Java 版本。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-18T08:34:30.923

1.  检查系统架构：`uname -m`
2.  [从他们的网站](http://www.oracle.com/technetwork/java/javase/downloads/index.html)下载 Oracle 的 JDK (7/8)或使用`wget`：`mkdir -p ~/Downloads && cd ~/Downloads && wget --header "Cookie: oraclelicense=accept-securebackup-cookie" http://download.oracle.com/otn-pub/java/jdk/8u31-b13/jdk-8u31-linux-x64.tar.gz`
3.  完成后，将其解压缩到`/opt/jdk`（以 root 身份）：`mkdir -p /opt/jdk && tar -zxf ~username/Downloads/jdk-8u*-linux-x64.tar.gz -C /opt/jdk`
4.  下载 Pycharm 并按照正常的安装程序进行。
5.  编辑`/path/to/pycharm/install/bin/pycharm.sh`. 在以 开头的条件块的正**上方**`if [ -n "$PYCHARM_JDK" -a -x "$PYCHARM_JDK/bin/java" ];`，添加一行说明`export PYCHARM_JDK=/opt/jdk/jdk1.8.0_N;`（`N`您下载的 JDK 版本在哪里）。
6.  启动 Pycharm 并转到“帮助”->“关于”。它应该显示“JRE 1.8.0_*”而不是“OpenJDK”。

*注意：*`update-alternatives`如果您安装了使用 OpenJDK 的软件，请不要运行。切换版本可能会导致这些应用程序出现问题/崩溃。

[来源](https://www.digitalocean.com/community/tutorials/how-to-manually-install-oracle-java-on-a-debian-or-ubuntu-vps)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T00:00:41.847

由于 Oracle 设置的限制，大多数较新的发行版不再包含 Oracle (Sun) JDK。相反，它们随 OpenSDK 一起提供。虽然 OpenSDK 适用于大多数应用程序，但 PyCharm 似乎存在一些问题。

您必须手动安装 Oracle (Sun) JDK，并确保它是默认 JDK 或在启动 PyCharm 时设置适当的环境变量。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-13T20:53:07.337

只是为了补充[littlepea 的回答](https://stackoverflow.com/a/15699724/1267124)，如果您尝试卸载 openjdk，那么它将卸载依赖于该软件包的所有应用程序，即[XBMC](http://xbmc.org)。您始终可以安装两个 JDK，让应用程序选择它想要使用的 JDK，反之亦然。我已经安装了两个 JDK，并且在运行 XBMC 或 PyCharm 时没有任何问题。

# mysql - 基于今天日期的 SQL 查询

> ID：11477721
> 
> 赞同：0
> 
> 时间：2012-07-13T20:14:38.770
> 
> 标签：mysql, sql, join, date-arithmetic

我有一个问题，昨晚我得到了帮助，但我又陷入了困境。

我的代码是

```
SELECT a.name, COUNT(*) AS num FROM table2 b 
INNER JOIN table1 a 
ON b.status_id=a.id 
GROUP BY status_id 
```

我现在想做的只是显示在今天输入的结果？日期列在`table2`. 日期列的格式是日期和时间（例如 1341241153），但我只需要检查日期是否与当天匹配。我希望这很清楚。

任何帮助将不胜感激！

编辑：这是一个 MySQL 数据库。到目前为止，我已经尝试了所有解决方案，但没有任何效果。抱歉没说清楚！！

最终编辑：这个问题不够清楚，所以我再次发布以获得快速回复。完整解决方案的新问题可以在这里看到[一个链接](https://stackoverflow.com/questions/11492823/return-results-of-query-based-on-todays-date-in-sql-mysql)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:19:24.417

如果您`group`需要 a`having`而不是 a `where`：

```
SELECT a.name, COUNT(*) AS num 
FROM table2 b 
INNER JOIN table1 a 
ON b.status_id=a.id 
GROUP BY status_id
having b.date  = 1341241153 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T20:19:05.917

如果您经常这样做，您可以创建自己的函数来执行此操作，但这里有一些代码可以将传递给它的任何日期展平：

```
SELECT a.name, COUNT(*) AS num
FROM table2 b 
INNER JOIN table1 a ON b.status_id=a.id 
WHERE DATEADD(dd, 0, DATEDIFF(dd, 0, a.DateColumn)) = DATEADD(dd, 0, DATEDIFF(dd, 0, GETDATE()))
GROUP BY status_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T20:20:11.417

不确定这是哪种数据库类型，如果是 Oracle，您只需要截断日期：

```
SELECT a.name, COUNT(*) AS num FROM table2 b 
INNER JOIN table1 a 
ON b.status_id=a.id 
WHERE TRUNC(SYSDATE) = TRUNC(b.dateColumn)
GROUP BY status_id 
```

如果是 MySQL 或 MSSQL，则语法略有不同，但同样简单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T20:22:36.287

在 SQL Server 2008 上，您可以使用：

```
SELECT a.name, COUNT(*) AS num FROM table2 b 
INNER JOIN table1 a 
ON b.status_id=a.id 
WHERE dateValue BETWEEN 
   CAST(GETDATE() AS DATE) AND DATEADD(DAY, 1, CAST(GETDATE() AS DATE)) 
GROUP BY status_id 
```

# c++ - 具有非类型模板参数的多态性

> ID：11477722
> 
> 赞同：0
> 
> 时间：2012-07-13T20:14:40.457
> 
> 标签：c++, events, templates, inheritance, polymorphism

我希望这不会过于复杂。我已经尝试在互联网上搜索了一段时间，虽然我发现了很多关于模板、继承等的 Q/As，但我发现的资源都没有处理这个特定问题：

我想创建一个包装器，`std::vector<T>`它只会创建类型的向量`std::vector<MyClass>`或其任何继承的类。

这基本上看起来像：

```
Class Base;
Class Derived : Base;

template <Base T> class myVector{
public:
    void add(T);
protected: 
    std::vector<T> list;
} 
```

目标是能够拥有一个具有以下行为的库：

```
Base       A;
Derived    D;
int        i;    

myVector<A> AVector;  // This should work
myVector<D> DVector;  // This should work
myVector<i> iVector;  // This should NOT work

AVector.add(A);  // This should work
AVector.add(D);  // This should work (through polymorphism)

DVector.add(D);  // This should work
DVector.add(A);  // This should not work 
```

任何人都可以对上述问题/示例发表评论吗？我的最终目标是在 C++ 中推出我自己的基本事件处理。在这种情况下，A 将类似于 c# EventArgs。B 将允许特定的 EventArgs 类型。我毫不怀疑 Boost 等人具有类似的功能，但我想暂时避开这条路线。

在实践中，代码将类似于（基于我在互联网上某处找到的教程）：

```
template<EventArgs arg> class Event{
    typedef void (*fptr)(arg);
    std::vector<fptr> listeners;
}

void notifylisteners(arg){
for (typename std::vector<fptr>::iterator iter = listeners.begin(); iter != listeners.end; ++iter)
    (**iter)(arg);  // there should be a check for a valid reference, in case one of the function pointers becomes invalid 
```

宣言

```
Event<myEventHandlerType> myEvent; 
```

将有效地发挥与 C# 代码相同的功能：

```
public event myEventHandlerType myEvent; 
```

由于对 std::vector 的依赖，此实现需要模板。在这里使用非类型参数模板（如果可以的话）的好处是它会强制使用特定的 eventArg 参数类型来传递给所有注册的处理程序，并且在编译期间错误会失败。

任何想法或意见将不胜感激。

迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T20:56:07.320

如果您使用的是 C++11，您可以访问 std::is_base_of<> 和 static_assert()

当 myVector 以无法转换为 Base 的类型传递时，您可以使编译器给您一个错误。

```
#include <type_traits>

class Base
{};

class Derived : public Base
{};

template <class T>
class Foo
{
public:
    Foo()
    {
        static_assert (std::is_base_of<Base,T>::value, "Error: Type T not derived from Base");
    }
};

class Lol
{
};

Foo<Derived> foo1;
Foo<Lol> foo2; //Static assert fails 
```

（请参阅此处的编译器输出[http://ideone.com/NAXSA](http://ideone.com/NAXSA)）

如果您没有 C++11 支持，那么您需要做更多的工作，但仍然可以完成。请参阅此处关于[https://stackoverflow.com/a/4532302/564944](https://stackoverflow.com/a/4532302/564944)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T20:27:16.563

我希望我正确理解了您的描述。这样做的 C++ 方法不是通过继承，也不会“强制”`A`传入继承自的类型。相反，使用[鸭子类型](http://www.drdobbs.com/templates-and-duck-typing/184401971)：如果它看起来像鸭子，走路像鸭子，嘎嘎叫像鸭子，那么它就是一只鸭子，不管它的“官方”类型如何。

具体来说，`myVector<T>`会简单地接受*任何*类型`T`。如果你试图对一个`T`它不支持的对象做一些事情，比如用 special 调用它`arg`，它会在编译时失败。

当然，记录`T`需要支持的操作的签名是一个好主意——本质上是它实现的接口。

（旁注：C++0x“概念”的概念可以让您在代码中表达这一点，但它已从标准中删除。）

# c# - Infopath 重复表 - 从当前行获取字段

> ID：11477723
> 
> 赞同：1
> 
> 时间：2012-07-13T20:14:43.493
> 
> 标签：c#, xml, xpath, infopath

我在 Infopath 中有一个重复表。在字段更改事件中，我需要使用相关行中的数据执行计算。如何在代码隐藏 (C#) 和 Xpath 中解决这个问题？

例如，我有一个开始日期和结束日期。在代码隐藏中进行计算以计算跨度中的小时数。这适用于第一行，但不适用于后续行。我知道到目前为止我编写它的方式仅适用于第一行，但我如何使它适用于所有行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T14:13:50.473

您可以为此使用 XPathNodeIterator。例如：您可以为此使用 XPathNodeIterator。例如：

```
 XPathNodeIterator nodes = MainDataSource.CreateNavigator().Select("/my:myFields/my:group1/my:group2", this.NamespaceManager);

        string field1 = string.Empty;
        string field2 = string.Empty;
        string field3 = string.Empty;

        foreach (XPathNavigator node in nodes)
        {
            field1 = node.SelectSingleNode("my:field1", this.NamespaceManager).Value;
            field2 = node.SelectSingleNode("my:field2", this.NamespaceManager).Value;
            field3 = node.SelectSingleNode("my:field3", this.NamespaceManager).Value;
        } 
```

这将获取每个字段的值并将字符串变量设置为该值。如果你想连接所有的值，你需要修改它——你可以做一些非常简单的事情，比如：

```
field1 = node.SelectSingleNode("my:field1", this.NamespaceManager).Value + " " + field1; 
```

# php - 查找数组中不等于 0 的所有键

> ID：11477726
> 
> 赞同：0
> 
> 时间：2012-07-13T20:15:05.150
> 
> 标签：php, arrays, key

如何设置函数**array_keys**以返回数组中所有值不等于零的键。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T20:17:04.043

您可以通过首先[过滤数组](http://php.net/array_filter)来做到这一点：

```
$results = array('ab' => 0, 'ba' => 53, 'pl' => 23, 'ct' => 0);

$non_zero = array_keys(array_filter($results, function($item)
{
    return $item !== 0;
}));

// Value of $non_zero:
//   array('ba', 'pl') 
```

# magento - Magento 中的 Collection::addAttributeToSelect() 未定义方法

> ID：11477729
> 
> 赞同：9
> 
> 时间：2012-07-13T20:15:10.970
> 
> 标签：magento

> 致命错误：在第 19 行的 /home/desbest/public_html/clients/magentofull/app/code/local/Desbest/Showdown/controllers/IndexController.php 中调用未定义的方法 Desbest_Showdown_Model_Mysql4_Votes_Collection::addAttributeToSelect()

**索引控制器.php**

```
public function voteAction(){
    $shake = Mage::getModel('showdown/votes')
        ->getCollection()
        ->addAttributeToSelect('*')
        ;
} 
```

================

> code/local/Desbest/Showdown/Model/Mysql4/Votes/ **Collection.php**

```
<?php
class Desbest_Showdown_Model_Mysql4_Votes_Collection extends Mage_Core_Model_Mysql4_Collection_Abstract
{
    public function _construct()
    {
        parent::_construct();
        $this->_init('showdown/votes');
    }
} 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-13T20:52:04.653

`addAttributeToSelect()`仅用于`EAV`样式模型集合（产品、客户等）

对于其他模型，您可以使用`Mage_Core_Model_Resource_Db_Collection_Abstract::addFieldToSelect()`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T20:22:47.627

将此添加到您的 Collection.php

```
public function addAttributeToSort($attribute, $dir=’asc’) 
{ 
    if (!is_string($attribute)) { 
        return $this; 
    } 
    $this->setOrder($attribute, $dir); 
    return $this; 
} 
```

您也可以尝试使用 addFilter() 或 setOrder()。

资源：[这个](http://www.magentocommerce.com/boards/viewthread/51116/)

# osgi - OSGi 片段包可以发布声明性服务吗？

> ID：11477730
> 
> 赞同：7
> 
> 时间：2012-07-13T20:15:13.023
> 
> 标签：osgi, apache-felix, declarative-services

我创建了一个片段包，用于访问第二方 jar 的一些添加功能。我的片段应该注册一个服务来公开这个新功能。它似乎不起作用。在深入进行故障排除之前，我想知道这是否允许？也就是说，Felix SCR 的 bundle watcher 是查看还是忽略 Fragment？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-13T20:32:58.280

啊哈，我自己在规范第 112.4.2 节中找到了答案：“SCR 忽略了片段中指定的服务组件清单标头。” 这与 3.14.3 一致：“以下列表包含不能在片段包中使用的标头：Bundle-Activator”

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-02-06T07:27:50.320

是的。但是主机包必须对此开放。通过打开，我的意思是主机包必须`Service-Components`配置标头，以便可以找到片段中的任何描述符。例如：

```
Service-Components: OSGI-INF/*.xml 
```

将在主机包的文件夹中找到所有`.xml`文件`OSGi-INF/`所有附加的片段。

我看到 Eclipse SmartHome 项目使用这个解决方案来使他们的 UI 更加可定制。

更多信息：[http ://apache-felix.18485.x6.nabble.com/DS-amp-fragments-td5004610.html](http://apache-felix.18485.x6.nabble.com/DS-amp-fragments-td5004610.html)

# python - PyQt：.UI 中的按钮在运行时不显示

> ID：11477731
> 
> 赞同：0
> 
> 时间：2012-07-13T20:15:20.227
> 
> 标签：python, pyqt4

**解决**
了我改变了：

> self.ui = base_class()

进入：

> self.ui = form_class()
> self.ui.setupUi(self)

现在它起作用了！

* * *

我正在尝试使一些代码正常工作，以便我可以即时使用 .ui 文件。这种方式在我运行 python 代码时会立即使用 Qt Designer 的更新。

在摆弄和使用片段之后，我最终得到了以下代码。但不知何故，.ui 中的按钮没有显示。任何人的想法？

```
import sys,os

from PyQt4 import QtCore, QtGui, uic

form_class, base_class = uic.loadUiType('try_ui.ui')

class MainWindow(QtGui.QMainWindow):
    def __init__(self, parent = None):
        QtGui.QWidget.__init__(self, parent)
        self.ui = base_class()

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    myapp = MainWindow()
    myapp.show()
    sys.exit(app.exec_()) 
```

和 try_ui.ui 一个简单的按钮：

```
<?xml version="1.0" encoding="UTF-8"?>
<ui version="4.0">
 <class>MainWindow</class>
 <widget class="QMainWindow" name="MainWindow">
  <property name="geometry">
   <rect>
    <x>0</x>
    <y>0</y>
    <width>323</width>
    <height>111</height>
   </rect>
  </property>
  <property name="windowTitle">
   <string>MainWindow</string>
  </property>
  <widget class="QWidget" name="centralwidget">
   <widget class="QPushButton" name="pushButton">
    <property name="geometry">
     <rect>
      <x>120</x>
      <y>30</y>
      <width>75</width>
      <height>23</height>
     </rect>
    </property>
    <property name="text">
     <string>PushButton</string>
    </property>
   </widget>
  </widget>
  <widget class="QMenuBar" name="menubar">
   <property name="geometry">
    <rect>
     <x>0</x>
     <y>0</y>
     <width>323</width>
     <height>21</height>
    </rect>
   </property>
  </widget>
  <widget class="QStatusBar" name="statusbar"/>
 </widget>
 <resources/>
 <connections/>
</ui> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T16:31:33.770

对于喜欢 PySide 的人。

```
import sys,os

from PySide import QtCore, QtGui, QtUiTools

class MainWindow(QtGui.QMainWindow):
    MESSAGE = "Hello!"
    def __init__(self, parent=None):
        QtGui.QMainWindow.__init__(self, parent)
        self.ui = loadUi(os.path.join(os.getcwd(), "try_ui.ui"), self)
        self.ui.pushButton.clicked.connect(self.informationMessage)
    def informationMessage(self):
        reply = QtGui.QMessageBox.information(self,
                "QMessageBox.information()", MainWindow.MESSAGE)

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    myapp = MainWindow()
    myapp.show()
    sys.exit(app.exec_()) 
```

您需要包括类 UiLoader 和 loadUi。它们来自：[https ://github.com/lunaryorn/snippets/blob/master/qt4/designer/pyside_dynamic.py](https://github.com/lunaryorn/snippets/blob/master/qt4/designer/pyside_dynamic.py)

```
class UiLoader(QtUiTools.QUiLoader):
    """
    Subclass :class:`~PySide.QtUiTools.QUiLoader` to create the user interface
    in a base instance.

    Unlike :class:`~PySide.QtUiTools.QUiLoader` itself this class does not
    create a new instance of the top-level widget, but creates the user
    interface in an existing instance of the top-level class.

    This mimics the behaviour of :func:`PyQt4.uic.loadUi`.
    """

    def __init__(self, baseinstance):
        """
        Create a loader for the given ``baseinstance``.

        The user interface is created in ``baseinstance``, which must be an
        instance of the top-level class in the user interface to load, or a
        subclass thereof.

        ``parent`` is the parent object of this loader.
        """
        QtUiTools.QUiLoader.__init__(self, baseinstance)
        self.baseinstance = baseinstance

    def createWidget(self, class_name, parent=None, name=''):
        if parent is None and self.baseinstance:
            # supposed to create the top-level widget, return the base instance
            # instead
            return self.baseinstance
        else:
            # create a new widget for child widgets
            widget = QtUiTools.QUiLoader.createWidget(self, class_name, parent, name)
            if self.baseinstance:
                # set an attribute for the new child widget on the base
                # instance, just like PyQt4.uic.loadUi does.
                setattr(self.baseinstance, name, widget)
            return widget

def loadUi(uifile, baseinstance=None):
    """
    Dynamically load a user interface from the given ``uifile``.

    ``uifile`` is a string containing a file name of the UI file to load.

    If ``baseinstance`` is ``None``, the a new instance of the top-level widget
    will be created.  Otherwise, the user interface is created within the given
    ``baseinstance``.  In this case ``baseinstance`` must be an instance of the
    top-level widget class in the UI file to load, or a subclass thereof.  In
    other words, if you've created a ``QMainWindow`` interface in the designer,
    ``baseinstance`` must be a ``QMainWindow`` or a subclass thereof, too.  You
    cannot load a ``QMainWindow`` UI file with a plain
    :class:`~PySide.QtGui.QWidget` as ``baseinstance``.

    :method:`~PySide.QtCore.QMetaObject.connectSlotsByName()` is called on the
    created user interface, so you can implemented your slots according to its
    conventions in your widget class.

    Return ``baseinstance``, if ``baseinstance`` is not ``None``.  Otherwise
    return the newly created instance of the user interface.
    """
    loader = UiLoader(baseinstance)
    widget = loader.load(uifile)
    QtCore.QMetaObject.connectSlotsByName(widget)
    return widget 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T11:55:33.873

这是一个工作示例，当您单击按钮时会显示一个消息框。您当然需要上面的 UI 示例。

```
import sys,os

from PyQt4 import QtCore, QtGui, uic

form_class, base_class = uic.loadUiType('try_ui.ui')

class MainWindow(QtGui.QMainWindow):
    MESSAGE = "Hello!"
    def __init__(self, parent = None):
        QtGui.QMainWindow.__init__(self, parent)
        self.ui = form_class()
        self.ui.setupUi(self)
        self.ui.pushButton.clicked.connect(self.informationMessage)
    def informationMessage(self):
        reply = QtGui.QMessageBox.information(self,
                "QMessageBox.information()", MainWindow.MESSAGE)

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    myapp = MainWindow()
    myapp.show()
    sys.exit(app.exec_()) 
```

# asp.net-mvc - 我如何区分这两种方法（一种get和一种post，都有一个参数id）？

> ID：11477735
> 
> 赞同：1
> 
> 时间：2012-07-13T20:15:46.310
> 
> 标签：asp.net-mvc, asp.net-mvc-3

```
 [HttpGet]
    public ActionResult Products(int catid)
    {
        ProductNumbersFiltering pnf = new ProductNumbersFiltering();
        var prodnumbers = pnf.getProductNumberFromID(catid);
        return View(prodnumbers);
    }

    [HttpPost]
    public ActionResult Products(int prodid)
    {
        return RedirectToAction("Details", prodid);
    } 
```

因此 GET 方法接收目录 ID 并返回与该目录关联的所有产品。POST 方法接收产品 ID 并将其传递到详细信息页面。由于它们都具有相同的方法签名，因此 MVC 理所当然地抱怨，但我想不出一种使它们不同的好方法。

还有其他人遇到这个“问题”吗？你是如何处理它/修复它的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T20:21:43.237

将 post 方法重命名为其他名称并使用`ActionName`属性：

```
 [HttpPost]
    [ActionName("Products")]
    public ActionResult Products_Post(int prodid)
    {
        return RedirectToAction("Details", prodid);
    } 
```

# ruby-on-rails-3 - actionmailer 编码 - 在电子邮件客户端中呈现垃圾

> ID：11477739
> 
> 赞同：5
> 
> 时间：2012-07-13T20:16:06.540
> 
> 标签：ruby-on-rails-3, character-encoding, actionmailer

我的电子邮件既有文本部分也有 html 部分。在电子邮件包含来自数据库的值的某些情况下，用户会报告“垃圾字符”。当涉及 unicode 字符时，这似乎是一个问题。我创建了一个简单的模板，它只回显文本和 html 部分 ( `<%= @body_text %>`) 的值，并使用示例字符串对其进行了测试：

永久特征ë

当我在 gmail 中看到这个字符串时，它看起来像：

永久特征������

检查我在邮件上看到的标题：

> 内容类型：多部分/替代；charset=UTF-8 内容传输编码：7bit

然后是文本部分：

> 内容类型：文本/纯文本；charset=UTF-8 内容传输编码：base64

和html部分：

> 内容类型：文本/html；charset=UTF-8 内容传输编码：quoted-printable

红宝石 1.9.2，轨道 3.2.6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T22:57:51.677

根本原因被确定为 premailer-rails3 gem == 1.2.0。迁移到 actionmailer_inline_css gem 已解决。

# qt - 如何在 QML 中使用 QFlags？

> ID：11477741
> 
> 赞同：4
> 
> 时间：2012-07-13T20:16:18.187
> 
> 标签：qt, qml

我有一个我创建的 QFlag。我想在 QML 中使用这个 QFlag。具体来说，我希望能够将几个标志组合在一起并将它们作为参数传递给方法。

我注意到 QFlags 没有在这里明确列为 QML 支持的数据类型：[http ://doc.qt.nokia.com/4.7-snapshot/qtbinding.html#supported-data-types](http://doc.qt.nokia.com/4.7-snapshot/qtbinding.html#supported-data-types)

我需要注册哪些类型或使用 Q_MACRO 来启用此功能？

目标是有一个可以在 QML 中使用的方法调用，如下所示：

```
 myObject.setFlag(MyFlagType.A | MyFlagType.C) 
```

我的 QFlag 代码：

```
#include <QFlags>
#include <QObject>
class ColorPickerStyle : public QObject {
Q_OBJECT
public:
enum ColorPickerStyleFlag {
    None 0x00,
    MSOfficeColors = 0x01,
    RGBSlider = 0x02,
    ColorWheel = 0x04,
    CustomColorSet = 0x08
};
//Create ColorPickerStyle::Flags as a type
Q_DECLARE_FLAGS(Flags, ColorPickerStyleFlag)
//Register ColorPickerStyle::Flags with the meta-type system
Q_FLAGS(Flags)
Q_ENUMS(ColorPickerStyleFlag)

ColorPickerStyle();
virtual ~ColorPickerStyle();
};

//Qt requires lots of macros
Q_DECLARE_OPERATORS_FOR_FLAGS(ColorPickerStyle::Flags) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T13:30:25.273

另外声明

```
Q_ENUMS(ColorPickerStyleFlag) 
```

应该足够了。枚举是整数，所以 or 运算符也可以在没有 QML 的 Q_FLAGS 声明的情况下工作。

ColorPickerStyle 类也需要 Q_OBJECT 宏，这样元对象编译器才能正常工作。

最后，您可以将 QML 中的值用作 ColorPickerStyle.None、ColorPickerStyle.MSOfficeColors、...

# algorithm - 为什么冒泡排序是 O(n^2)？

> ID：11477743
> 
> 赞同：19
> 
> 时间：2012-07-13T20:16:27.017
> 
> 标签：algorithm, sorting, complexity-theory, big-o, bubble-sort

```
for (int front = 1; front < intArray.length; front++)
{
    for (int i = 0; i  < intArray.length - front; i++)
    {
        if (intArray[i] > intArray[i + 1])
        {
            int temp = intArray[i];
            intArray[i] = intArray[i + 1];
            intArray[i + 1] = temp;
        }
    }
} 
```

内部循环正在迭代： n + (n-1) + (n-2) + (n-3) + ... + 1 次。

外部循环正在迭代：n 次。

所以你得到 n *（数字 1 到 n 的总和）

那不是 n * ( n*(n+1)/2 ) = n * ( (n^2) + n/2 )

哪个是 (n^3) + (n^2)/2 = O(n^3) ？

我很肯定我做错了。为什么不是 O(n^3)？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-13T20:19:41.237

你是正确的，外循环迭代 n 次，内循环也迭代 n 次，但是你重复计算了工作。如果您通过将顶层循环的每次迭代完成的工作相加来计算完成的总工作量，您会得到第一次迭代没有工作 n 工作，第二次工作 n - 1，第三次工作 n - 2 等等，因为第 i顶层循环的迭代让内部循环`n - i`工作。

或者，您可以通过将完成的工作量乘以内部循环乘以循环运行的总次数来计算完成的工作。内部循环在每次迭代中运行 O(n) 次，外部循环运行 O(n) 次迭代，因此总工作量为 O(n ² )。

尝试将这两种策略结合起来是错误的。确实，外部循环第一次工作 n，然后是 n - 1，然后是 n - 2，等等。但是，您不要将此工作乘以 n 来获得总数。这将计算每次迭代 n 次。相反，您可以将它们加在一起。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-13T20:20:57.393

正如您所说的 n + (n-1) + (n-2) + (n-3) + ... + 1 次，您的内部循环正在迭代。所以它是 O(n + (n-1) + (n-2) + (n-3) + ... + 1) = O(n(n+1)/2) = O(n^2)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T20:20:18.630

内部循环迭代 n 次（在最坏的情况下）：

```
for(int i = front; i < intArray.length; i++) 
```

外循环迭代 n 次：

```
for(int front = 0; front < intArray.length; front++) 
```

因此 O(n^2)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-24T02:52:16.460

```
k=1(sigma k)n = n(n+1)/2
because:
  s = 1 +  2    + ... + (n-1) + n
  s = n + (n-1) + ... + 2     + 1
+)
===================================
  2s = n*(n+1)
   s = n(n+1)/2
in bubble sort, 
(n-1) + (n-2) + ... + 1 + 0 times compares 
which means, k=0(sigma k)n-1
, k=0(sigma k)n-1 equals [k=1(sigma k)n] - n
therefore, n(n+1)/2 - n = n(n-1)/2
which is 1/2(n^2-n) => O(1/2(n^2-n))
in big O notation, we remove constant, so
O(n^2-n)
n^2 is larger than n
O(n^2) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-13T20:21:44.027

你基本上如何计算N ...

*   每行：+1
*   每个循环 *N

    所以你开始添加数字到你的第一个循环，现在你有 N+1，你继续前进，你最终得到 N*N 或 N^2 时间加上一些数字。拉出这个数字，因为它与 N 相比通常是微不足道的。

N 几乎是循环中所有项目的表示，类似于 1,2,3...N。所以它只是代表一个数字而不是循环多少次。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-05T06:46:20.240

这是另一个加速冒泡排序的版本，当我们只使用一个**交换**变量来提前终止第一个 for 循环时。您可以获得更好的时间复杂度。

```
#include <stdio.h>
#include <stdbool.h>
#define MAX 10

int list[MAX] = {1,8,4,6,0,3,5,2,7,9};

void display(){
   int i;
   printf("[");

   for(i = 0; i < MAX; i++){
      printf("%d ",list[i]);
   }

   printf("]\n");
}

void bubbleSort() {
   int temp;
   int i,j;

   bool swapped = false;       

   // 1st loop
   for(i = 0; i < MAX-1; i++) { 
      swapped = false;

      // 2nd loop
      for(j = 0; j < MAX-1-i; j++) {
         printf("     Compare: [ %d, %d ] ", list[j],list[j+1]);

         if(list[j] > list[j+1]) {
            temp = list[j];
            list[j] = list[j+1];
            list[j+1] = temp;

            swapped = true;
         }

      }

      if(!swapped) {
         break;
      }

      printf("Loop number %d#: ",(i+1)); 
      display();                     
   }

}

main(){
   printf("Before: ");
   display();
   printf("\n");

   bubbleSort();
   printf("\nAfter: ");
   display();
} 
```

# iphone - YouTube WebView - 视频 ID

> ID：11477756
> 
> 赞同：1
> 
> 时间：2012-07-13T20:17:11.250
> 
> 标签：iphone, objective-c, ios, cocoa-touch, youtube

我怎样才能做到这一点...

我的 iPhone 应用程序中有一个加载 Youtube 主页的 UIwebview。用户可以搜索视频并观看...

我想要的是获取用户观看的每个视频的视频 ID（来自 Youtube）......

我注意到在桌面版本中它显示在 url 中，但在移动版本中，url 不包含视频 ID...

有没有人知道如何在 webview 中获取 youtube 视频的视频 ID...

我过去的想法：

```
- (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType {
NSURL *url = request.URL;
NSString *urlString = url.absoluteString;
NSLog(@"%@",urlString);
VideoURLTextBox.text = urlString;
return YES;
} 
```

每次加载网页时都会获取 webview 的 url，太糟糕了 Youtube 没有在他们网站的移动版本中显示他们的视频 ID....

帮助！？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:23:15.417

Youtube 确实在移动网站的 url 中显示视频 ID。例如：

`http://m.youtube.com/watch?gl=US&hl=en&client=mv-google&v=HX6SyoZ5kw8`

这里的视频 id 是后面的字符串`&v=`。

# asp-classic - asp 或 ado 命令对象中的空参数

> ID：11477771
> 
> 赞同：0
> 
> 时间：2012-07-13T20:18:28.940
> 
> 标签：asp-classic, ado

我有一个带有两个文本框的 asp 表单。如果用户在其中输入一个值并提交，它会显示来自用户所选日期的 MS 访问查询的数据。如果用户只是将两个文本框都留空，我想显示数据库的完整输出。
这是我在访问中的示例查询：

```
select column_date, field1, field2, sum(field3) from table1
where field1 like '*xyz' and 
column_date between [@startdate] and [@enddate]
group by column_date, field1, field2 
```

我的 asp 代码类似于以下内容：

```
objCmd.CommandText = "Query"
objCmd.CommandType = adCmdStoredProc
Set objParam = objCmd.CreateParameter("@startdate" , adInteger, adParamInput, 0, 0)
objCmd.Parameters.Append objParam
Set objParam = objCmd.CreateParameter("@enddate" , adInteger, adParamInput, 0, 0)
objCmd.Parameters.Append objParam
if request.form ("startdate") = "" Then
objCmd.Parameters ("@startdate") = 1
Else
objCmd.Parameters("@startdate") = request.form("startdate")
objCmd.Parameters("@enddate") = request.form("enddate")
End if
if request.form ("enddate") = "" Then
objCmd.Parameters ("@enddate") = 31
Else
objCmd.Parameters("@startdate") = request.form("startdate")
objCmd.Parameters("@enddate") = request.form("enddate")
End if
................ 
```

请注意我的开始日期和结束日期是文本数据类型，只有数字，例如 1、2、3、4、5（1 表示 2012 年 7 月 1 日，2 表示 2012 年 7 月 2 日）

我有两个文本框名称“startdate”和“enddate”。当用户在框中输入日期时，它会从查询中返回两个日期之间的数据。如果用户留空，则显示错误。

但我想确保如果用户将两个文本框都留空，它会返回查询中的所有值。如果用户在两个文本框中的任何一个中输入单个值，它应该只返回该日期的数据。

我不确定如何实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:31:25.710

您遇到的一个问题是您正在为@startdate 和@enddate 调用CreateParameter，但指定adInteger 作为输入类型，而我认为它应该是adDate。

对于您的值问题，一种方法是在提交查询之前检查表单上 startdate 和 enddate 的值。如果 startdate 为空白，您可以将其默认为“神奇”日期，例如“01/01/1900”（或任何可能代表您的应用程序该字段中可能表示的最早日期），具有类似的“神奇” enddate 的默认日期，表示要表示的*最新*可能日期。这样，如果用户没有输入任何值，您仍然会返回一些结果。您还可以添加一些验证以确保用于捕获日期值的文本框*包含*空白值或有效日期。

如何实现默认日期的示例可能如下所示：

```
if request.form("enddate")="" then
    objCmd.Parameters("@enddate")="12/31/2099"
else
    objCmd.Parameters("@enddate")=request.form("enddate")
end if 
```

还有其他方法可以解决这个问题；这只是一个（未经测试的）示例，旨在推动正确的方向。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T20:55:12.953

你说

“请注意，我的开始日期和结束日期是文本数据类型，只有数字，例如 1、2、3、4、5。（1 表示 2012 年 7 月 1 日，2 表示 2012 年 7 月 2 日，依此类推）。”

这表明日期不能小于 1 或大于 31。您可以对日期进行一些预处理吗？

如果第一个日期为空，第二个日期为空，则“日期”应为 1 和 31。如果两个日期中的任何一个为空但另一个不为空，则“日期”应彼此相等。

伪代码：

```
If IsNull(firstdate) Then
    If IsNull(seconddate)
        firstdate=1
        seconddate=31
    Else
        firstdate=seconddate
    End If
End If

If IsNull(seconddate) Then
   seconddate=firstdate
End If 
```

这会给你：

```
BETWEEN 1 And 31 '' All 
```

而且，说

```
BETWEEN 2 And 2 ''A single day 
```

# codeigniter - Codeigniter HMVC + ciZacl 登录模块尝试失败

> ID：11477772
> 
> 赞同：3
> 
> 时间：2012-07-13T20:18:29.667
> 
> 标签：codeigniter, codeigniter-2, hmvc

参考：

*   [https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home](https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home)
*   [http://applications.schizzoweb.com/cizacl/user_guide/](http://applications.schizzoweb.com/cizacl/user_guide/)
*   [http://codecanyon.net/item/codeigniter-acl-user-management/407499](http://codecanyon.net/item/codeigniter-acl-user-management/407499)

我当前的配置：

*   代码点火器 2.1.2
*   干净安装
*   通过 .htaccess 删除 index.php
*   通过 bitbucket mercurial repo 安装模块化扩展
*   为 cizacl 配置干净的数据库
*   试图将 cizacl 转换为模块 [失败]

我相信问题出在 __construct 第 26 行，并且映射到正确的文件？！![错误](../Images/9f6e3f4e1ecdad64b15edc630da903f8.png)![代码](../Images/0866deb827417b2026d434827af7d912.png)![目录结构](../Images/d23fdcf65fa2ca24833212b9d3435057.png)

# javascript - 一次显示一个标记 - Google Maps API v3

> ID：11477776
> 
> 赞同：0
> 
> 时间：2012-07-13T20:19:05.120
> 
> 标签：javascript, google-maps, google-maps-api-3

[http://jsfiddle.net/michaelgruber/M84T7/](http://jsfiddle.net/michaelgruber/M84T7/)

当 codeAddress 函数运行不止一次时（运行多个输入时），旧标记将保存在地图上。为什么是这样？不应该覆盖 MyMap.marker 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:32:45.370

> 不应该覆盖 MyMap.marker 吗？

是的，但它是对标记的引用，而不是标记本身。

要隐藏标记：

```
 marker.setMap(null); 
```

在覆盖它并丢失参考之前。

[http://jsfiddle.net/zbZ8p/1/](http://jsfiddle.net/zbZ8p/1/)

# c++ - 为什么我需要在构造函数调用中使用双括号，例如： foo x( (bar()) );

> ID：11477779
> 
> 赞同：4
> 
> 时间：2012-07-13T20:19:11.780
> 
> 标签：c++, compiler-theory, most-vexing-parse

> **可能重复：**
> [为什么使用空括号调用不带参数的构造函数是错误的？](https://stackoverflow.com/questions/180172/why-is-it-an-error-to-use-an-empty-set-of-brackets-to-call-a-constructor-with-no)

我已经看到有关嵌套构造函数调用和支撑的[C++ FQA](http://yosefk.com/c++fqa/ctors.html#fqa-10.19) [条目](http://www.parashift.com/c++-faq-lite/fn-decl-vs-obj-instantiation.html)，并且一直想知道 C++ 解析器如何解析两个以及为什么解析器无法解析它。

所以我明白为什么`foo xxx();`是模棱两可的。但是是什么让人`foo x(bar());`模棱两可，因为它显然不是前瞻性声明。（即：应该有一个可以成功检测到这一点的语法）。

有人可以解释 C++ 语法那部分的局限性和歧义吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T20:26:54.533

```
foo x(bar()); 
```

这可能是：

1) 一个名为的变量的声明，`x`其值为默认构造的`bar`。这与`foo x = bar();`.

2) 一个被调用函数的声明，`x`它返回`foo`并接受一个参数——一个返回 a`bar`并且不接受参数的函数。这与`foo x(bar (void));`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T20:21:57.030

C++ FQA 是一堆垃圾。忽略它。

至于`foo x(bar())`，它和 一样模棱两可`foo x()`，只是 的 类型`x`也有一个参数，它是一个函数。在此处添加一个指针，您就会明白我的意思。

```
foo (*x)();
foo (*x)(bar(*)()); 
```

即使允许这样做的想法也非常愚蠢，但现在没有人可以改变它。

（我偷偷怀疑这种语法有点过时，但我相信有人会纠正我）。

# localization - 将一个 Resources.resw 文件用于同一解决方案中的两个或多个项目

> ID：11477783
> 
> 赞同：1
> 
> 时间：2012-07-13T20:19:32.537
> 
> 标签：localization, windows-runtime

因此，正如标题所述，我正在尝试使用一个 Resource.resw 文件来获取同一解决方案中存在的两个项目的字符串。在后面的代码中，我可以正确使用资源管理器，但在 XAML 上，使用`x:uid`自动获取资源（如[本例](http://www.neovelop.com/blog/localizing-windows-8-metro-xaml-applications)中所解释的）在没有文件的项目中不起作用`Resources.resw`。

我是否缺少任何设置，以便 XAML 可以自动找到 Resources.resw。当然，我尝试这样做的原因是为了避免冗余——我们绝对不希望两个资源文件包含相同的字符串。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T17:58:39.483

我们团队的某个人找到了解决方案，基本上我们必须在`x:Uid`属性中声明资源文件的路径：

```
<TextBlock x:Uid="/Errors/AlreadyRegistered"></TextBlock> 
```

它在[Microsoft 的文档](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh965323%28v=win.10%29)中进行了解释。

# xslt - Open Graph 和 IE9 是否存在任何涉及 XSLT 页面的已知问题？

> ID：11477793
> 
> 赞同：0
> 
> 时间：2012-07-13T20:20:10.217
> 
> 标签：xslt, internet-explorer-9, facebook-opengraph

我正在研究一个涉及分享新闻故事的问题。我不确定我可以提供多少具体信息，因为这是针对一家更大的公司。我们为加拿大各地的各种新闻报纸管理多个网站。我的任务是找出问题的根源是什么，我很难过......

当您从我们的某个网站分享故事时，例如[http://www.richmond-news.com/Elderly+robbed+broad+daylight/6814513/story.html](http://www.richmond-news.com/Elderly+robbed+broad+daylight/6814513/story.html)

正如预期的那样，分享按钮将您带到 Facebook。然后在该页面上显示缩略图、标题等。

但是，对于该站点（和其他几个站点），如果您在 Internet Explorer 9 中尝试，缩略图将不会加载。

新闻页面具有 XSLT 模板，这些模板生成 Facebook 生成此共享链接所需的所有数据。

由于这里没有太多的错误空间，我最好的猜测是它可能是 IE9 的东西。所以我的问题是，Facebook Open Graph、IE9 和 XLST 协同工作是否存在任何已知问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:47:03.683

进一步调查：域上的某些故事会显示相关文章的缩略图，而其他故事则不会。

我还发现其他网站（我们不拥有或维护的网站）也会这样做。它似乎是 IE9 和 Facebook Open Graph 的错误。

# html - 为网页的某个区域引用文件？

> ID：11477796
> 
> 赞同：1
> 
> 时间：2012-07-13T20:20:16.770
> 
> 标签：html, file, reference

有没有办法让网页的某个区域引用另一个 HTML 文件？例如，如果我有一个显示在我网站的每个页面上的侧边栏。最终，关于它的信息将会改变。有没有办法让页面的那个区域完全变成另一个 HTML 文件，然后只引用它，所以我只需要编辑一次就可以影响整个站点，而不是必须去**每个页面来更改它？**谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:57:07.460

`<!--#include file="menu.html" -->`是一个服务器端包含，它将告诉您正在使用的 Web 服务器替换命名文件内容之间的所有`<!--`内容`-->`。

我给出的示例假设 menu.html 位于同一目录中。如果不是，您需要相应地调整路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T20:23:24.210

大量的服务器端脚本可以让你做到这一点。我最熟悉的PHP：

```
<?php require("navbar.html"); ?> 
```

`navbar.html`直接在`require`调用的地方插入内容。

但是，如果没有任何服务器端代码，您必须使用 AJAX 调用文件并将其加载到正确的位置 - 如果您走这条路线，您应该有一个适当大小的容器来“保留”空间以供加载时使用.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T20:23:40.790

当然，这就是 HTML 的全部意义所在

使用`<a href="">`标签。

参考：[http ://www.w3.org/TR/html4/struct/links.html](http://www.w3.org/TR/html4/struct/links.html)

* * *

您可以使用服务器端模板方案、javascript 或 iframe 来保持侧边栏始终更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T20:25:17.117

使用 iframe（更新值`width`以匹配侧边栏所需的像素宽度）：

```
<iframe src="http://www.w3schools.com" style="border:0;height:100%;width:150px;" scrolling="no">
  <p>Your browser does not support iframes.</p>
</iframe> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T20:52:52.267

您可以使用 PHP 包含，就像我的一个站点中的这样：

```
<?php include './includes/YOUR_NAME_HERE.php'; ?> 
```

然后将侧边栏的内容放入其中。

链接：[PHP 包括](http://php.net/manual/en/function.include.php)

# hadoop - 如何标记来自不同目录的特定输入文件

> ID：11477798
> 
> 赞同：0
> 
> 时间：2012-07-13T20:20:25.933
> 
> 标签：hadoop, mapreduce

我正在读取两组目录（比如说 dirA 和污垢）作为 MapReduce 作业的输入，我需要以某种方式对它们进行不同的标记，以便在映射阶段我知道哪个来自哪个。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T20:31:06.400

您可以使用[MultipleInputs](http://hadoop.apache.org/common/docs/r1.0.3/api/org/apache/hadoop/mapreduce/lib/input/MultipleInputs.html)进行调查并为每个输入路径定义不同的映射器，或者检查输入拆分（[Context.getInputSplit()](http://hadoop.apache.org/common/docs/r1.0.3/api/org/apache/hadoop/mapreduce/MapContext.html#getInputSplit%28%29) - 将其转换为 FileSplit 并获取路径）并相应地调整输出。

# jackrabbit - JCR：Jackrabbit OCM - 二进制数据和延迟加载

> ID：11477800
> 
> 赞同：1
> 
> 时间：2012-07-13T20:20:33.250
> 
> 标签：jackrabbit, jcr

我的目标是在 Jackrabbit 中存储有关项目的信息。每个项目可以由多个子项目组成，并附有项目相关的文件/文档。

考虑以下结构：

```
-project 1
 -project 1.1
 -project 1.2
  -project 1.2.1
  -project 1.2.2
-project 2 
```

我有一个代表每个项目的 java 类，如下所示：

```
public class Project {

  @Field
  private String name;

  @Collection
  private List<Project> subprojects;

  // more properties + getter/setter
} 
```

我的问题是：

*   有什么类似于 ORM 工具的延迟加载吗？例如：当我想获取有关`project 1`我不需要来自子项目的所有信息的信息时。实现这一目标的最佳方法是什么？
*   使用 OCM 时，将二进制数据（文件、文档、图像）附加到项目的最佳方法是什么？

（不幸的是 Jackrabbit OCM 文档不是很详细）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T02:45:48.427

对于延迟加载，您可以通过`proxy=true`在 Bean 或 Collection 注释中指定来实现。

二进制数据可以表示为的`jcr:data`属性，`nt:resource`因此映射看起来像这样。

```
@Node(jcrType = "nt:resource")
public class ResourceModel extends MimeTypeModel {

    @Field(path = true)
    String path = null;

    @Field(jcrName = "jcr:data")
    java.io.InputStream jcr_data = null;
} 
```

OCM 的文档确实没有更新，但是您可以在源代码分发中找到有用的`/org/apache/jackrabbit/ocm/config/jackrabbit-ocm-1.5.dtd`信息`src/main/resources`。

高温下，

# css - 旋转变换产生锯齿状文本

> ID：11477801
> 
> 赞同：0
> 
> 时间：2012-07-13T20:20:36.547
> 
> 标签：css

我有一个 div 格式看起来像一个便笺（[此处为 JSFiddle](http://jsfiddle.net/srp2e/1/)）。在 Firefox 和 Safari 中查看它，文本看起来很讨厌和锯齿状。它在 Chrome 中要好一些，但不是很多。对此我能做些什么吗，还是我应该放弃我对布置精美的胶粘物的梦想？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T20:59:20.437

我相信浏览器很难以小角度渲染小文本。如果你增加字体大小，你会看到文本渲染得更清楚一点。确实，90 度角是唯一可以清晰地呈现在大多数字体大小上的角度。

# javascript - 如何选择使用 Jquery 作为参数传入的 DOM 元素

> ID：11477804
> 
> 赞同：0
> 
> 时间：2012-07-13T20:20:54.177
> 
> 标签：javascript, jquery

所以我有

```
<span onclick="show(this)">foobar</span>

function show(theSpan) {
    ....... //select the span here
} 
```

我如何使用 Jquery 选择器来选择跨度？我试过 $(theSpan) 但它不起作用。我想选择它作为 Jquery 对象，以便我可以将 attr() 应用于它。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:23:43.037

`$(theSpan).attr('test, '123');`工作正常。

你的问题出在其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T20:33:58.763

好吧，你的元素中没有属性，只是举个例子，假设你得到了这个：

```
<span id="spTest" onclick="show(this);">foobar</span>​ 
```

这是您可以获得像 id 这样的属性的方式：

```
var id = $(theSpan).attr('id'); //outputs: spTest 
```

但我不确定你的问题是什么意思，也许你需要这个值，所以这是获得它的方法：

```
var spanValue = $(theSpan).html(); //outputs: foobar 
```

此外，如果您尝试为该元素设置 id，您可以执行以下操作：

```
//Set the id
$(theSpan).attr('id', 'theSpan');
//Store the value from your element by the new id
var spanValue = $('#theSpan').html();
//Do what you want at this point
alert(spanValue); //outputs: foobar 
```

# python - Python: List comprehension to create a list strings of n-size maximum from list of strings of random size

> ID：11477811
> 
> 赞同：0
> 
> 时间：2012-07-13T20:21:15.527
> 
> 标签：python, string, list, list-comprehension

The idea is to create a list of strings of a certain amount of characters preserving the order from the original list. The challenge is to accomplish it using only list comprehensions.

```
list_string = [ "aaa", "bb", "cc", "dd", "ee"]
str_len = 6
[some_list_comprehension] 
```

The result should be something like `["aaabb", "ccddee"]`. The string `aaabb` in the result list is 5 characters long, while the string `ccddee` is 6, that is because strings in the original list cannot be chunked. The order of the strings is relevant while creating the result, but irrelevant in the result, so that the end list could be `["ccddee", "aaabb"]` but not `["eeddcc", "bbaaa"]`. Each string appears in the result list just the same number of times as in the original, meaning that all possible combinations of the strings is not really the objective in this problem, mostly because each string in the result list is created following the order in the original. **There are only 2 possible outputs**:

```
["aaabb", "ccddee"] 
```

or

```
["ccddee", "aaabb"] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T20:53:07.513

Ok, I think I got it, now. Is this what you were looking for?

```
>>> list_string = [ "aaa", "bb", "cc", "dd", "ee"]
>>> str_len = 6
>>> [[''.join(list_string[:i]), ''.join(list_string[i:])] for i in xrange(len(list_string)) if all(1 <= len(s) <= str_len for s in [''.join(list_string[:i]), ''.join(list_string[i:])])]
[['aaabb', 'ccddee']] 
```

It yields all possible combinations that might have worked with one partitioning of the string. Here are all possible results:

```
>>> for str_len in range(len(''.join(list_string))):
        print str_len, [[''.join(list_string[:i]), ''.join(list_string[i:])] for i in xrange(len(list_string)) if all(1 <= len(s) <= str_len for s in [''.join(list_string[:i]), ''.join(list_string[i:])])]

0 []
1 []
2 []
3 []
4 []
5 []
6 [['aaabb', 'ccddee']]
7 [['aaabb', 'ccddee'], ['aaabbcc', 'ddee']]
8 [['aaa', 'bbccddee'], ['aaabb', 'ccddee'], ['aaabbcc', 'ddee']]
9 [['aaa', 'bbccddee'], ['aaabb', 'ccddee'], ['aaabbcc', 'ddee'], ['aaabbccdd', 'ee']]
10 [['aaa', 'bbccddee'], ['aaabb', 'ccddee'], ['aaabbcc', 'ddee'], ['aaabbccdd', 'ee']] 
```

EDIT: Here is a version which uses `filter` but doesn't duplicate the result twice in the expression, and has nicer formatting:

```
>>> filter(
        lambda res: all(1 <= len(s) <= str_len for s in res),
        [[''.join(list_string[:i]), ''.join(list_string[i:])]
         for i in xrange(len(list_string))])
[['aaabb', 'ccddee']] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T20:25:39.920

```
from itertools import combinations
list_string = [ "aaa", "bb", "cc", "dd", "ee"]
minn=min(map(len,list_string))
maxx=max(map(len,list_string))
str_len=6
lis=[''.join(x) for i in range(1,maxx+1) for x in combinations(list_string,i) if len(''.join(x))<=str_len]        
print lis 
```

**output:**

```
['aaa', 'bb', 'cc', 'dd', 'ee', 'aaabb', 'aaacc', 'aaadd', 'aaaee', 'bbcc', 'bbdd', 'bbee', 'ccdd', 'ccee', 'ddee', 'bbccdd', 'bbccee', 'bbddee', 'ccddee'] 
```

# php - 教义 2 中的行数

> ID：11477814
> 
> 赞同：1
> 
> 时间：2012-07-13T20:21:23.553
> 
> 标签：php, mysql, doctrine-orm

我正在尝试从具有 id、游戏（外键）和日期的表 Comment 中检索评论。

每次我要求评论时，我都想获得 3 条按日期排序的指定游戏的评论，并且我想知道以后是否还有更多评论要显示。为此，我编写了两个函数，第一个函数返回三个注释：

```
public function getRecentComments($offset,$id) {
    $dql = "SELECT c FROM Comment c 
        WHERE c.game = ?1
        ORDER BY c.date DESC";
    $query = $this->getEntityManager()->
        createQuery($dql)->
        setParameter(1, (int)$id)->    
        setMaxResults(3)->
        setFirstResult($offset);
    return $query->getResult(); 
```

第二个返回我以后可以得到的评论数量。此功能的原因是是否显示“更多评论”按钮。这是第二个功能：

```
public function moreComments($offset,$id) {

    $dql = "SELECT COUNT(c.id) FROM Comment c
        WHERE c.game = ?1
        ORDER BY c.date DESC";
    $query = $this->getEntityManager()
        ->createQuery($dql)
        ->setParameter(1, (int)$idPartido)
        ->setFirstResult($offset+3)    
        ->setMaxResults(1)
        ->getSingleScalarResult();

    return $query;
} 
```

但是第二个功能不适用于下一个错误：

致命错误：未捕获的异常 'Doctrine\ORM\NoResultException' 带有消息 'No result was found for query 尽管预期至少有一行。

我认为这是由于使用了 setFirstResult 和 count()。

所以，我用过

```
public function moreComments($offset,$id) {

    $dql = "SELECT c FROM Comentario c
        WHERE c.partido = ?1
        ORDER BY c.fecha DESC";
    $query = $this->getEntityManager()
        ->createQuery($dql)
        ->setParameter(1, (int)$idPartido)
        ->setFirstResult($offset+3)    
        ->setMaxResults(1)
        ->getSingleScalarResult();

    return sizeof($query);
} 
```

这显然写得不好，因为我不应该只为计数而获取数据。我怎样才能正确编写第二个函数？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T09:09:16.910

如果您只使用 MySQL，那么您可以利用它的[`FOUND_ROWS()`](http://dev.mysql.com/doc/refman/5.5/en/information-functions.html#function_found-rows)功能。

这将需要使用本机查询，这很可能会妨碍您使用 MySQL 以外的数据库的能力，但根据我的经验，它工作得很好。

我已经成功地使用了以下类似的东西。

```
use Doctrine\ORM\Query\ResultSetMapping;

public function getRecentComments($offset, $id) {
    $sql = "SELECT SQL_CALC_FOUND_ROWS * FROM Comment c 
        WHERE c.game = ?
        ORDER BY c.date DESC
        LIMIT ?,3";
    $rsm = new ResultSetMapping();
    $rsm->addEntityResult('Comment', 'c');
    $rsm->addFieldResult('c', 'id', 'id');
    $rsm->addFieldResult('c', 'game_id', 'game_id');
    $rsm->addFieldResult('c', 'date', 'date');
    $query = $this->getEntityManager()->createNativeQuery($dql, $rsm);
    $query->setParameters(array(
      (int)$id,
      (int)$offset
    ));
    $results = $query->getResult();

    // Run FOUND_ROWS query and add to results array
    $sql = 'SELECT FOUND_ROWS() AS foundRows';
    $rsm = new ResultSetMapping();
    $rsm->addScalarResult('foundRows', 'foundRows');
    $query = $this->getEntityManager()->createNativeQuery($sql, $rsm);
    $foundRows = $query->getResult();
    $results['foundRows'] = $foundRows[0]['foundRows'];

    return $results;
} 
```

从上述函数获得结果数组后，我将“foundRows”元素提取到一个单独的变量中，取消设置它（即，`unset($results['foundRows'])`），然后继续正常使用该数组。

希望这可以帮助。

# ruby-on-rails - Rails 新手：路由文件类

> ID：11477817
> 
> 赞同：-1
> 
> 时间：2012-07-13T20:21:34.803
> 
> 标签：ruby-on-rails

我一直在努力使 CS 应用程序适应不同的应用程序。在我的路由文件中，第一行是

`Cs::Application.routes.draw do`

我知道这是类定义，但是第一个前缀究竟`Cs`来自哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:25:25.627

`Cs`是您的应用程序的名称。当你制作一个新的 Rails 应用程序时，你会：

```
rails new project_name 
```

在这种情况下，`Cs`是项目名称。

# wpf - 如何在不激怒用户的情况下格式化绑定到 TextBox 的小数？

> ID：11477821
> 
> 赞同：52
> 
> 时间：2012-07-13T20:21:52.317
> 
> 标签：wpf, textbox, decimal, string-formatting

我正在尝试使用 WPF 中的数据绑定在 TextBox 中显示格式化的小数。

## 目标

目标 1：在代码中设置小数属性时，在 TextBox 中显示 2 个小数位。

目标 2：当用户与 TextBox 交互（输入）时，不要惹恼他/她。

目标 3：绑定必须更新 PropertyChanged 上的源。

## 尝试

***尝试1：没有格式化。***

在这里，我们几乎是从零开始。

```
<TextBox Text="{Binding Path=SomeDecimal, UpdateSourceTrigger=PropertyChanged}" /> 
```

违反目标 1。`SomeDecimal = 4.5`将在文本框中显示“4.50000”。

***尝试 2：在 Binding 中使用 StringFormat。***

```
<TextBox Text="{Binding Path=SomeDecimal, UpdateSourceTrigger=PropertyChanged, StringFormat=F2}" /> 
```

违反目标 2。假设 SomeDecimal 是 2.5，而 TextBox 显示“2.50”。如果我们选择全部并输入“13.5”，我们最终会在文本框中输入“13.5.00”，因为格式化程序“有帮助”插入小数和零。

***尝试 3：使用扩展 WPF 工具包的 MaskedTextBox。***

[http://wpftoolkit.codeplex.com/wikipage?title=MaskedTextBox](http://wpftoolkit.codeplex.com/wikipage?title=MaskedTextBox)

假设我正确阅读了文档，掩码 ##0.00 表示“两个可选数字，后跟一个必需数字、一个小数点和另外两个必需数字。这迫使我说“可以进入的最大可能数字这个 TextBox 是 999.99" 但假设我可以接受。

```
<xctk:MaskedTextBox Value="{Binding Path=SomeDecimal, UpdateSourceTrigger=PropertyChanged}" Mask="##0.00" /> 
```

违反目标 2。 TextBox 以开始`___.__`并选择它并键入 5.75 产生`575.__`。获得 5.75 的唯一方法是选择 TextBox 并键入`<space><space>5.75`.

***尝试 4：使用 Extended WPF Toolkit 的 DecimalUpDown 微调器。***

[http://wpftoolkit.codeplex.com/wikipage?title=DecimalUpDown](http://wpftoolkit.codeplex.com/wikipage?title=DecimalUpDown)

```
<xctk:DecimalUpDown Value="{Binding Path=SomeDecimal, UpdateSourceTrigger=PropertyChanged}" FormatString="F2" /> 
```

违反目标 3。DecimalUpDown 愉快地忽略 UpdateSourceTrigger=PropertyChanged。Extended WPF Toolkit Codeplex 页面上的一位协调员建议在[http://wpftoolkit.codeplex.com/discussions/352551/](http://wpftoolkit.codeplex.com/discussions/352551/)上修改 ControlTemplate 。这满足了目标 3，但违反了目标 2，表现出与尝试 2 中相同的行为。

***尝试 5：使用样式数据触发器，仅在用户不编辑时使用格式。***

[在 TextBox 上使用 StringFormat 绑定到 double](https://stackoverflow.com/questions/8183922)

即使这个满足所有三个目标，我也不想使用它。(A) 每个文本框变成 12 行而不是 1 行，我的应用程序包含很多很多文本框。(B) 我所有的文本框都已经有一个 Style 属性，它指向一个全局 StaticResource，它设置 Margin、Height 和其他东西。(C) 您可能已经注意到下面的代码设置了两次绑定路径，这违反了 DRY 原则。

```
<TextBox>
    <TextBox.Style>
        <Style TargetType="{x:Type TextBox}">
            <Setter Property="Text" Value="{Binding Path=SomeDecimal, StringFormat=F2}" />
            <Style.Triggers>
                <Trigger Property="IsFocused" Value="True">
                    <Setter Property="Text" Value="{Binding Path=SomeDecimal, UpdateSourceTrigger=PropertyChanged}" />
                </Trigger>
            </Style.Triggers>
        </Style>
    </TextBox.Style>
</TextBox> 
```

除了所有这些不舒服的事情......

违反目标 2。首先，单击显示“13.50”的文本框会突然显示“13.5000”，这是出乎意料的。其次，如果从一个空白文本框开始，我输入“13.50”，文本框将包含“1350”。我无法解释为什么，但如果光标位于文本框中字符串的右端，则按句点键不会插入小数。如果 TextBox 包含长度 > 0 的字符串，并且我将光标重新定位到字符串右端以外的任何位置，则可以插入小数点。

***尝试6：自己做。***

通过继承 TextBox 或创建附加属性并自己编写格式化代码，我即将开始一段痛苦的旅程。它会充满串串操作，并导致大量脱发。

* * *

有没有人对格式化绑定到满足上述所有目标的文本框的小数有任何建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T21:17:19.040

尝试在 ViewModel 级别解决该问题。那它：

```
public class FormattedDecimalViewModel : INotifyPropertyChanged
    {
        private readonly string _format;

        public FormattedDecimalViewModel()
            : this("F2")
        {

        }

        public FormattedDecimalViewModel(string format)
        {
            _format = format;
        }

        private string _someDecimalAsString;
        // String value that will be displayed on the view.
        // Bind this property to your control
        public string SomeDecimalAsString
        {
            get
            {
                return _someDecimalAsString;
            }
            set
            {
                _someDecimalAsString = value;
                RaisePropertyChanged("SomeDecimalAsString");
                RaisePropertyChanged("SomeDecimal");
            }
        }

        // Converts user input to decimal or initializes view model
        public decimal SomeDecimal
        {
            get
            {
                return decimal.Parse(_someDecimalAsString);
            }
            set
            {
                SomeDecimalAsString = value.ToString(_format);
            }
        }

        // Applies format forcibly
        public void ApplyFormat()
        {
            SomeDecimalAsString = SomeDecimal.ToString(_format);
        }

        public event PropertyChangedEventHandler PropertyChanged;

        private void RaisePropertyChanged(string propertyName)
        {
            if (PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    } 
```

**样本**

xml:

```
<TextBox x:Name="tb" Text="{Binding Path=SomeDecimalAsString, UpdateSourceTrigger=PropertyChanged}" /> 
```

后面的代码：

```
public MainWindow()
{
    InitializeComponent();
    FormattedDecimalViewModel formattedDecimalViewModel = new FormattedDecimalViewModel { SomeDecimal = (decimal)2.50 };
    tb.LostFocus += (s, e) => formattedDecimalViewModel.ApplyFormat(); // when user finishes to type, will apply formatting
    DataContext = formattedDecimalViewModel;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-05T11:26:11.693

我创建了以下自定义行为，以便在使用时将用户光标移动到小数点后`StringFormat={}{0:0.00}`，这会强制出现小数位，但这可能会导致以下问题：

> 违反目标 2。假设 SomeDecimal 是 2.5，而 TextBox 显示“2.50”。如果我们选择全部并输入“13.5”，我们最终会在文本框中输入“13.5.00”，因为格式化程序“有帮助”插入小数和零。

我已经使用自定义行为解决了这个问题，当用户按下 . 钥匙：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Interactivity;

namespace GUI.Helpers.Behaviors
{
    public class DecimalPlaceHotkeyBehavior : Behavior<TextBox>
    {
        #region Methods
        protected override void OnAttached()
        {
            base.OnAttached();
            AssociatedObject.PreviewKeyDown += AssociatedObject_PreviewKeyDown;
        }

        protected override void OnDetaching()
        {
            base.OnDetaching();
            AssociatedObject.PreviewKeyDown -= AssociatedObject_PreviewKeyDown;
        }

        protected override Freezable CreateInstanceCore()
        {
            return new DecimalPlaceHotkeyBehavior();
        }
        #endregion

        #region Event Methods
        private void AssociatedObject_PreviewKeyDown(object sender, System.Windows.Input.KeyEventArgs e)
        {
            if (e.Key == System.Windows.Input.Key.OemPeriod || e.Key == System.Windows.Input.Key.Decimal)
            {
                var periodIndex = AssociatedObject.Text.IndexOf('.');
                if (periodIndex != -1)
                {
                    AssociatedObject.CaretIndex = (periodIndex + 1);
                    e.Handled = true;
                }
            }
        }
        #endregion

        #region Initialization
        public DecimalPlaceHotkeyBehavior()
            : base()
        {
        }
        #endregion
    }
} 
```

我使用它如下：

```
<TextBox xmlns:Behaviors="clr-namespace:GUI.Helpers.Behaviors" 
         xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity" 
         Text="{Binding Value, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.00}}">
        <i:Interaction.Behaviors>
            <Behaviors:DecimalPlaceHotkeyBehavior></Behaviors:DecimalPlaceHotkeyBehavior>
        </i:Interaction.Behaviors>
</TextBox> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T20:57:58.767

尝试使用 WPF Extended Tookit Masked TextBox 来实现输入掩码： [http ://wpftoolkit.codeplex.com/wikipage?title=MaskedTextBox](http://wpftoolkit.codeplex.com/wikipage?title=MaskedTextBox)

例子：

```
<toolkit:MaskedTextBox Mask="(000) 000-0000" Value="(555) 123-4567" 
IncludeLiterals="True" /> 
```

# html - JSP - 基本 HTML 表单 'GET' - 如何取回响应数据

> ID：11477826
> 
> 赞同：0
> 
> 时间：2012-07-13T20:22:00.323
> 
> 标签：html, jsp, forms

我需要能够将数据发布到外部站点，并得到回复。当我说响应时，我的意思是标题标准 200 代码，也是系统在响应中提供的数据。

我已经用 AJAX 帖子尝试过这个，但我的问题是跨站点脚本，我有太多的问题。

有没有办法在我的 JSP 中将标准表单发布到外部 URL - 但是如何在调用 JSP 中从中获取响应值。

我在 JBOSS 内的 Spring 上运行。

我的表格很简单：

```
<form name="input" action="http://somesite.com/getResponse" method="get">
  forename: <input type="text" name="forename" />
  surname: <input type="text" name="surname" />
  age: <input type="text" name="age" />
  <input type="submit" value="Submit" />
</form> 
```

# java - 在 Android 中将 WifiManager 重铸为对象时遇到问题

> ID：11477829
> 
> 赞同：0
> 
> 时间：2012-07-13T20:22:12.877
> 
> 标签：java, android, android-wifi

所以我对Android很陌生，并且以前的Java经验有限，所以请多多包涵。我正在尝试在 Android 应用程序中创建 WifiManager 类型的对象，并且我发现其他几个人建议逐字创建 WifiManager 对象：

```
WifiManager wifi =  mContext.getSystemService(Context.WIFI_SERVICE); 
```

在我的程序中。**现在 Eclipse 已经用错误类型不匹配，无法从对象转换为 WifiManager**下划线了 mContext.GetSystemService 等部分

 **现在我尝试使用以下方法重铸回报：

```
(WifiManager) mContext.getSystemService(Context.WIFI_SERVICE); 
```

这将编译，但在执行时会导致**java.lang.NullPointerException**

对此的任何想法将不胜感激！

**更新***

所以我已经设置了

```
Context mContext; 
```

在我的主要课程中

然后我尝试使用广播在我的网络上查找 SQL 服务器的地址。代码有点乱，因为我正处于试图让广播开始工作的阶段。但这里是功能。

```
public void findSQL()
{
    int PORT = 1433;

    try
    {
        byte buff[] = new byte[1024];
        DatagramSocket sock = new DatagramSocket(PORT); 
        sock.setBroadcast(true);

        // Create and send the broadcast packet
        DatagramPacket dp = new DatagramPacket(buff, 7, getBroadcastAddress(), PORT);

        sock.send(dp);

        DatagramPacket dp1 = new DatagramPacket(buff, buff.length);

        sock.receive(dp1);

        sock.close();
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }
}
InetAddress getBroadcastAddress() throws IOException {  
    WifiManager wifi =  (WifiManager) mContext.getSystemService(Context.WIFI_SERVICE);
    DhcpInfo dhcp = wifi.getDhcpInfo();

    System.out.println(dhcp.toString());

    if(dhcp==null)
        return InetAddress.getByAddress(null);

    int broadcast = (dhcp.ipAddress & dhcp.netmask) | ~dhcp.netmask;

    byte[] quads = new byte[4];
    for (int k = 0; k < 4; k++)
    {
        quads[k] = (byte) ((broadcast >> k * 8) & 0xFF);
    }

    return InetAddress.getByAddress(quads);
} 
```

**第二次编辑***

在我的代码前面，我定义了：

```
 @SuppressWarnings("unused")
class MSSQL_DB
{
    Context mContext;
    public void dbConnect(String db_connect_string, 
            String db_userid, String db_password)
    {
        try
        {
            Class.forName("net.sourceforge.jtds.jdbc.Driver");
            Connection conn = DriverManager.getConnection(db_connect_string,
                    db_userid, db_password);
            System.out.println("Connected");

        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
    } 
```

恐怕“上下文”实际上是做什么的，如何正确声明它以及如何使用它的方法的整个概念是我尚未完全理解的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T20:50:51.293

很可能你的 mContext 是空的。如果不是

请发布更多异常日志..并发布更多代码...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T21:06:43.190

你的清单中有 android.permission.ACCESS_WIFI_STATE 吗？**

# asp.net-mvc-3 - 数据注释属性。如何设置执行顺序？

> ID：11477833
> 
> 赞同：4
> 
> 时间：2012-07-13T20:22:35.807
> 
> 标签：asp.net-mvc-3, attributes, data-annotations

我为出生日期创建了验证属性，如下所示：

```
public class DateRequired : ValidationAttribute
    {
        public override bool IsValid(object value)
        {
            DateTime date = Convert.ToDateTime(value);
            return date != DateTime.MinValue;
        }
    }

    public class DateGraterThanEighteen : ValidationAttribute
    {
        public override bool IsValid(object value)
        {
            DateTime date = Convert.ToDateTime(value);
            long ticks = DateTime.Now.Ticks - date.Ticks;
            int years = new DateTime(ticks).Year;
            return years >= 18;
        }
    }

I applied attributes like this

        [DateGraterThanEighteen(ErrorMessage="You must be at least 18")]
        [DateRequired(ErrorMessage = "Date of birth is required")]
        public DateTime DateOfBirth { get; set; } 
```

无论我应用它们的顺序如何，DateGraterThanEighteen 都会首先执行。我怎样才能让 DateRequired 先执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T01:45:18.097

您可以将订单应用于过滤器。不确定是否可以使用验证属性尝试

```
[DateGraterThanEighteen(ErrorMessage="You must be at least 18"), Order=1]
[DateRequired(ErrorMessage = "Date of birth is required"), Order=2]
public DateTime DateOfBirth { get; set; } 
```

仅供参考，你拼错了更大 :)

更新：没关系，不能这样做。你需要创建一个[ModelValidationProvider](http://bradwilson.typepad.com/blog/2009/10/enterprise-library-validation-example-for-aspnet-mvc-2.html)。

# python - 使 python 2.2 显示标准输出并保存到文件

> ID：11477837
> 
> 赞同：0
> 
> 时间：2012-07-13T20:22:45.387
> 
> 标签：python, subprocess, stdout

我正在尝试编写一个执行一堆其他脚本的 python 脚本。我想这样当脚本运行时，该脚本的输出显示在屏幕上，但如果遇到错误的退出状态，它将获取输出并将其附加到日志文件中。我试图使用“命令”界面，但这不允许您查看标准输出以及保存要附加到文件的数据。请注意，我使用的是 python 2.2（是的，它很旧，但我必须使用给定的内容）。

谢谢你。

示例代码：（虽然没有做我想要的）

```
def run_functional_analysis(script, now):
    stat, output = commands.getstatusoutput(script_dir + script + " -fb")
    if stat!=0: #If the script failed:
        os.system("echo \"[" + now + "] - " + output + "\" >> " + LOG_DIR + script + ".log") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T20:38:35.827

Python 2.2 已经很老了。如果可以的话，您应该升级，因为`subprocess`它确实比`os.system`和好得多`os.popen`。

您想要的是一个类似文件的对象，它既可以写入`stdout`字符串也可以捕获字符串（可能使用`StringIO)`. 然后您可以将该对象指定为`stdout`和`stderr`在您的`subprocess`调用中。

```
import sys, subprocess
from cStringIO import StringIO

class Outcap(object):
    def __init__(self):
        self.output = StringIO()
    def write(self, data):
        sys.stdout.write(data)
        self.output.write(data)
    def flush(self):
        sys.stdout.flush(data)
    def close(self):
        pass

    @property
    def text(self):
        return self.output.getvalue()

outcap = Outcap()

try:
    subprocess.check_call("foo bar baz".split(), stdout=outcap, stderr=outcap)
    subprocess.check_call("one two three".split(), stdout=outcap, stderr=outcap)
except CalledProcessError as e:
    outcap.write("return code: %s\n", e.returncode)
    open("log.txt", "w").write(outcap.text) 
```

如果您无法升级 Python，但您使用的是 Linux，则另一种选择是在 Python 之外通过管道传输您正在运行的命令来处理它`tee`。

```
your command goes here 2>&1 | tee log.txt 
```

这会将您的命令的所有输出保存`log.txt`到标准输出并将其发送到标准输出。你从那里选择用它做什么取决于你的 Python 脚本。例如，您可以登录到一个临时文件并仅在其中一个命令失败时将其移动到永久位置。

# javascript - jQuery在普通按钮上验证表单（不提交）

> ID：11477844
> 
> 赞同：2
> 
> 时间：2012-07-13T20:23:08.973
> 
> 标签：javascript, jquery, forms, validation, button

嗨，我有一个包含 2 个部分的表单，单击一个按钮，表单中显示的部分会向上滑动到隐藏，而下一个（以前隐藏的）会向下滑动以显示。

但是，我希望填写的表单部分在它向上滑动之前进行验证，当我想使用输入类型 =“按钮”时，如果不使用输入类型 =“提交”，我找不到这样做的方法" 这样页面就不会重新加载。

单击普通按钮而不是提交按钮时使用 jQuery 验证表单的任何方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T20:27:34.533

`$("#btn").click(function() { $("#form").validate(); });`

# android - 小部件大小 = (74dip*cells)-2 在 JellyBean 中不起作用

> ID：11477845
> 
> 赞同：1
> 
> 时间：2012-07-13T20:23:12.133
> 
> 标签：android, widget, density-independent-pixel

我的小部件存在严重问题。

我使用了这个 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    android:initialLayout="@layout/widget_layout"
    android:minHeight="72dp"
    android:minWidth="146dp" >
</appwidget-provider> 
```

我期待 1 个单元格的高度和 2 个单元格的宽度。

不幸的是，仅在 onJellyBean 上，该小部件被列为 3*2 小部件，而且非常难看..

有什么我错过的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T20:32:48.113

他们更改了 Android 4（可能是 Android 3）中的小部件尺寸。

1 个单元格现在是 40dp，2 个单元格是 110dp。

在这里阅读：

[http://developer.android.com/guide/practices/ui_guidelines/widget_design.html#anatomy](http://developer.android.com/guide/practices/ui_guidelines/widget_design.html#anatomy)

# android - Android 数据库内存问题 mSize = 1048576

> ID：11477847
> 
> 赞同：0
> 
> 时间：2012-07-13T20:23:16.080
> 
> 标签：android, sqlite, uri, blob

我想从数据库中取出一个 blob。我得到这个错误。我是数据库新手，这是什么意思？

07-13 22:21:10.928: E/CursorWindow(13302): 需要增长: mSize = 1048576, size = 3279360, freeSpace() = 1048491, numRows = 1

看来我只有1MB。这是对数据库的限制，还是我的整个应用程序当前限制为 1MB 可用内存？

将 blob 插入数据库时​​我没有遇到问题。之后我关闭了数据库等......我很高兴，如果有人能给我一些地方，我可以看看。

最好的祝福，

帕特里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:37:37.720

适用于`Cursor`BLOB 数据的限制为 1MB。由于限制适用于`Cursor`，因此您不会看到它插入数据，而只会尝试访问它。

一般来说，将这么大的数据块放入数据库是一个坏主意。相反，您应该将大数据保存到内部或外部存储上的文件中，并将文件路径或 Uri 保存到数据库字段中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T20:38:59.970

在 SQLite 数据库中存储大文件是不好的做法。改为存储`Uri`指向文件的 a 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-08T02:52:19.990

这是因为您要保存的变量太大，光标无法处理

以我的日志摘录为例

```
07-08 10:39:51.324: W/CursorWindow(9207): Window is full: requested allocation 1249663 bytes, free space 398939 bytes, window size 2097152 bytes 
```

我建议使用 callong 分离的方法分别调用 blob 或长字符串，因为我们不能保证 Android 操作系统本身只运行这个 App，另一个会消耗大量内存

# jquery - 覆盖 jQuery 验证高亮/取消高亮方法

> ID：11477848
> 
> 赞同：1
> 
> 时间：2012-07-13T20:23:17.257
> 
> 标签：jquery, jquery-validate

抱歉，如果之前已经回答过这个问题，我在搜索时无法挖掘任何东西。

我正在覆盖 jQuery 验证器的 highlight 和 unhighlight 方法——但我也希望继续调用这些方法的“stock”版本。例如，在 C# 中，这就像调用 base.unhighlight。

就目前而言，我被迫从原始代码中复制和粘贴代码，从而模拟对父级的调用。

```
jQuery.validator.setDefaults({
    unhighlight: function (element, errorClass, validClass) {
        // base.unhighlight(element, errorClass, validClass) // <-- desired functionality
    ... 
```

我该怎么做呢？非常感谢 -

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T00:05:06.083

当然，正如您所建议的那样，另一种方法是从源代码复制默认值。事实证明，这可能是一种更聪明的方法，因为正如我在另一个答案中所说，您应该只需要调用一次 setDefaults 。

我不确定您对 jQuery/JS 的熟悉程度。但通常情况下，每次调用验证器时都会传入选项。

因此，如果我有三种形式，我可以这样做：

```
$('#form1').validate({
   unhighlight: function(el, error, valid){ el.append('<div class="errormsg">Required for Form1</div>'); }
});

$('#form2').validate({
   unhighlight: function(el, error, valid){ $(el).append('<div class="errormsg">Required for Form2</div>'); }
});

$('#form3').validate({
   unhighlight: function(el, error, valid){ $(el).append('<div class="errormsg">Required for Form3</div>'); }
}); 
```

但是，如果我想全局更改 highlight 方法，我可以这样做：

```
jQuery.validator.setDefaults({
   highlight: function(el, error, valid){ $(el).siblings('.errormsg').remove; }
}); 
```

所以实际上你应该只需要调用一次 setDefaults 方法。当然复制粘贴一次也不会太难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T20:46:07.137

使用这种结构方式，这是您在不修改插件的情况下所能做的最好的事情。这样做的原因是，当您调用 setDefault 方法时，它会覆盖插件自己的默认值副本。事实证明这很难解决，但我通过将默认对象分离出来并制作一个副本以供参考来修复它。老实说，从插件源代码中复制简单的逻辑可能是此时更好的方法，因为您应该只为整个实现调用一次 setDefaults。

[在这里](https://github.com/jonjaques/jquery-validation/commit/1c3b9cb9d9c995cbe2c1c11a93c75c3b2c8d362d)和[这里](https://github.com/jonjaques/jquery-validation/commit/e4f3defcd08e2056c57a102ca53f605217db2512)查看我的提交。如果您愿意，请随意分叉。

基本上，现在你调用的函数有一个额外的参数，_orig（或任何你想要的）。也一样`highlight`。

```
unhighlight: function (el, error, valid, _orig) {
  _orig(el, error, valid); // runs directly from the defaults.
  // do other stuff.
} 
```

这是[文件](https://github.com/jonjaques/jquery-validation/commit/e4f3defcd08e2056c57a102ca53f605217db2512)

编辑：哇。该插件的范围非常先进。实施我的解决方案花费的时间比我想象的要长。这是一个工作演示：http: [//jsfiddle.net/fjMFk/24/](http://jsfiddle.net/fjMFk/24/)

# javascript - dom对象创建javascript和jquery后的事件触发器？

> ID：11477849
> 
> 赞同：0
> 
> 时间：2012-07-13T20:23:19.393
> 
> 标签：javascript

如果我通过单击按钮动态创建元素，例如视频元素，是否有某种方法可以附加一些在 jquery 和 javascript 中创建 DOM 对象后立即触发的事件侦听器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:43:30.883

这是假设第一个处理程序没有的 hacky 解决方案`.stopImmediatePropagation()`：

```
$("button").click(function() {
    $("video").on("something", function() {});
}); 
```

这个想法是另一个按钮单击处理程序创建了元素，然后您的处理程序触发，然后将您的处理程序附加到创建的视频元素上。修改选择器和代码。

不过，它仍然比轮询 dom 的变化要少。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-13T20:26:32.833

不是 100% 肯定，但可能使用回调函数[http://www.w3schools.com/jquery/jquery_callback.asp](http://www.w3schools.com/jquery/jquery_callback.asp)

# user-interface - 愚蠢的人、发痒的手指、简单的问题和数据库爆炸

> ID：11477851
> 
> 赞同：0
> 
> 时间：2012-07-13T20:23:24.210
> 
> 标签：user-interface, coding-style, conventions

可能是 SO 中最模糊的标题，但它基本上是我所反对的（而且反对我只是指我脑海中的这个想法）我有一个网络表单（表格 A）将数据放入数据库中制作报告世界转来转去，人们很高兴。

现在我的任务是采用具有所有原始表单输入的类似表单，但它适用于不同的人群。

A 型 - Foos，B 型 - 酒吧

现在表格 A 和表格 B 非常相似 表格 A 比表格 B 有更多的信息，所以可以做出这样的陈述。

表格 B 所需的所有必要信息都可以从完整的表格 A 中获得。

现在这里是棘手的地方。Foos 和 Bars 数据不能一起存储在同一个数据库中。

所以（这就是数据库爆炸和我在网页设计和与最终用户打交道方面普遍缺乏经验的原因）如果我让用户选择一个复选框来决定这个报告是否适用于 Foo 或 Bar 如何我要接很多支持电话，因为愚蠢的人和发痒的手指无法回答简单的问题。显然，这不是一个概括的确切答案，但我更想从其他人的经验中学习。

我很可能最终会为第二份报告制作一个新的网络表单，但是当我意识到它们彼此之间有多么相似时，这个问题就卡在了我的脑海中。

感谢您的时间和分享经验。

***编辑并感谢 ashray 的出色回答。这些数据不是由 foos 或 bar 输入的，而是由受过训练的人输入的，可以从书面报告中插入他们的信息。一组略有不同的情况，但会改变用户的动态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T20:40:19.627

在 Web 开发以及与最终用户打交道的任何地方，您都无法想象用户会发现使用您的系统的扭曲/不直观的方式。就在昨天，一个人想在他的 iPhone 上给我看一张照片，他是这样做的：

1.  单击相机应用程序。
2.  点击图片
3.  单击新图片缩略图。
4.  点击相机胶卷
5.  找到他想要的照片，打开给我看。

正如您所看到的，这可能不是 Apple 打算让它工作的方式；）但是，这突出了一个事实，即您不能真正依靠 Foos 来识别自己，而 Bars 也可以通过 Web 表单来这样做.

# c# - EF插入多个相关表

> ID：11477852
> 
> 赞同：3
> 
> 时间：2012-07-13T20:23:26.850
> 
> 标签：c#, sql, sql-server, entity-framework

我正在尝试使用 Linq/Entity Framework 将数据从 C# 应用程序保存到数据库中。插入单个表很简单，但我不确定如何将数据插入三个都与自增标识互连的表中？这是为了抓取，所以我正在获取一个线程及其所有帖子 - 每个**ThreadTitle**和每个**帖子**都与一个**用户**相关联（不是实际的表名）。

我的设计理念是将一个完整的线程刮入内存，然后进行“批量”插入。为了减少负载，我希望有一些方法可以维护关系约束，而不需要进行查找、多次插入等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T20:54:25.820

如果要保存两条相关的记录，因为其中一个 (A) 与另一个 (B) 中存在 FK，请执行以下操作：

*   创建对象 B

*   将对象 B 添加到上下文

*   创建对象 A

*   将 A 中指向 B (AB) 的导航属性设置为值 B。

*   将对象 A 添加到上下文

*   在上下文中保存更改

您实际上不必将两个对象都添加到上下文中，一个就足够了，因为有相关的 EF 可以在“树”中找到所有内容。EF 将自行确定首先插入什么并设置正确的 id。

你是这个意思吗？希望这可以帮助。

# php - 带有 JQuery 的 php 按钮链接

> ID：11477853
> 
> 赞同：0
> 
> 时间：2012-07-13T20:23:28.123
> 
> 标签：php, javascript, jquery

我有一个 jquery 文本旋转器，它使用 PHP 旋转从数据库中提取的文本。这是一个图表：

![在此处输入图像描述](../Images/8ba0845be56a17658a9ec914be8b14c8.png)

然后，文本的一侧有一个更多信息按钮，该按钮将转到事件的相应页面（因此，如果其中一个旋转是“示例事件”，那么更多信息按钮将转到 event.php?id= *6*如果包含“示例事件”的 id 的行是 6。不幸的是，moreinfo.php 按钮链接总是转到第一个旋转对应的页面（所以如果第一个旋转是“示例事件”并且“示例事件”的 id 为 6，那么更多信息按钮将始终链接到 id=6 的页面，即使它的轮换不同，例如 id=8 的“更好的事件”。

感谢您的帮助（我知道我的描述很混乱）。另外，如果你能说出问题所在，你能解释一下你的解决方案吗（我正在学习 PHP 并找到解决我遇到的问题的方法可以帮助我学到很多东西！）

```
 <div id="rotate">
                        <?php
                          while ($row = mysql_fetch_assoc($result)) {
                            $id = $row['id'];
                          echo"
                            <font>
                                ".$row['tag']."
                            </font>";
                        }?>
                        </div>
                        </div>
                    <div class='grid_2'><a href='events.php?id=<?php echo $id;?>'><button id='eventinfo'>event info &raquo;</button></a></div> 
```

这是旋转代码：

```
<script type="text/javascript">
(function($){
$.fn.extend({ 
    //plugin name - rotaterator
    rotaterator: function(options) {

        var defaults = {
            fadeSpeed: 600,
            pauseSpeed: 100,
            child:null
        };

        var options = $.extend(defaults, options);

        return this.each(function() {
              var o =options;
              var obj = $(this);                
              var items = $(obj.children(), obj);
              items.each(function() {$(this).hide();})
              if(!o.child){var next = $(obj).children(':first');
              }else{var next = o.child;
              }
              $(next).fadeIn(o.fadeSpeed, function() {
                    $(next).delay(o.pauseSpeed).fadeOut(o.fadeSpeed, function() {
                        var next = $(this).next();
                        if (next.length == 0){
                                next = $(obj).children(':first');
                        }
                        $(obj).rotaterator({child : next, fadeSpeed : o.fadeSpeed, pauseSpeed : o.pauseSpeed});
                    })
                });
        });
    }
});
})(jQuery);

$(document).ready(function() {
    $('#rotate').rotaterator({fadeSpeed:1200, pauseSpeed:6000});
}); 

    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:48:05.560

有几种解决方案，例如：

1.  您可以在 javascript 中跟踪活动 ID，并将事件处理程序附加到您的按钮/链接以取消默认操作（按照链接），而是使用 javascript 重定向到所需的页面（在 js 中构建链接）；
2.  您可以将链接/按钮放在文本旋转器内并将它们全部隐藏，将一个`active`类添加到当前类并仅显示该类。

虽然第二个选项会导致更多的 html，但我有点喜欢拥有指向所有页面的真实链接的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T20:53:45.193

当您制作旋转 div 时，您可以向每个循环添加隐藏字段以保存`id`每次迭代。

```
<div id="rotate">
<?php
$index = 0;
while ($row = mysql_fetch_assoc($result)) {
  $id = $row['id'];
  echo "<font>".$row['tag']."</font>";
  echo "<input type='hidden' id='rotate_".$index."' value='$id' />";
  $index++;
}?>
</div> 
```

然后你可以在javascript中维护一个索引来对应我上面做的索引，当你旋转文本时，做

```
var newLinkID = $('#rotate_' + index).val();
$('.grid_2 a').attr('href', 'events.php?id=' + newLinkID); 
```

# css - 正常显示截断的文本，但在悬停时显示全文

> ID：11477854
> 
> 赞同：14
> 
> 时间：2012-07-13T20:23:35.183
> 
> 标签：css

我有一个 div，里面有一段左右的文字。我希望它正常显示前几个单词，但在悬停时展开以显示全文。理想情况下，我想只使用 CSS 而没有数据重复。

这是我尝试过的：http: [//jsfiddle.net/SEgun/](http://jsfiddle.net/SEgun/)

我不希望 div 在文本展开时移动，只让 div 2 展开以显示覆盖 div 3 的全文。这可能吗？PS我不关心延迟浏览器。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-13T20:29:44.273

下面的 CSS 将导致 div “覆盖”它下面的所有内容，因此它不会向下推任何内容。

```
position: absolute;
background-color:#FFF; 
```

背景颜色很重要，所以你看不到下面的东西。

为了确保所有内容都保持在同一个位置，您可以为下一个元素指定与行高相同的上边距。`+`符号是[相邻的兄弟](http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors)选择器。

```
div {
    line-height: 20px;
}
#data:hover+div {
    margin-top:20px;
} 
```

[**演示**](http://jsfiddle.net/KGqnj/1/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-13T20:26:48.260

这个怎么样：http: [//jsfiddle.net/KGqnj/](http://jsfiddle.net/KGqnj/)

# c# - 在课堂上开课的正确方法是什么？

> ID：11477858
> 
> 赞同：0
> 
> 时间：2012-07-13T20:23:57.800
> 
> 标签：c#, class

在课堂上开课的正确方法是什么？我应该把 StreamWriter 放在一个方法中吗？或者这很好？

```
class Class1
{
   public static string config = "file.config";
   StreamWriter writer = new StreamWriter(config); 
   public void print (string log) 
   {
     writer.WriteLine(log);
   } 
   public void log_close() 
   { 
      writer.Close();
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T20:27:24.880

您的关闭逻辑不是线程安全的，并且不遵循建议。

您应该使用 Disposable 模式，因为 FileStream 实现了 IDisposable。

```
class Class1 : IDisposable
{ 
   public string config = "file.config";
   StreamWriter writer = new StreamWriter(config); 
   public void print (string log) 
   {
     writer.WriteLine(log);
   } 

   public void log_close() 
   { 
      Dispose();
   }

   public void Dispose() 
   { 
      if (writer != null)
         writer.Close();

      writer = null;
   }
} 
```

现在您的 Class1 实例可以与以下`using`语句一起使用：

```
using (var c = new Class1())
{
    c.print("That's all");
} 
```

无需调用 Dispose() 或 close()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T20:31:48.320

考虑以下代码：

```
class LogWriter : IDisposable
{
   public const string configFileName = "file.config";
   StreamWriter writer = new StreamWriter(configFileName);

   public void Print(string log) 
   {
     writer.WriteLine(log);
   }

   public void CloseLog() 
   { 
      writer.Close();
   }

   public void Dispose()
   {
      CloseLog();
   }
} 
```

当你有一些资源应该被释放（比如文件）时，好方法是实现`IDisposable`接口。您的班级的用户会知道，该班级应该在使用后被处置。

还命名 - 在 C# 中，我们将方法命名为 PascalCase。并为您的类和变量赋予更有意义的名称：LogWriter 代替 Class1，configFileName 代替 config。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T20:28:05.753

你在做什么没有错。除非您稍后需要重新初始化`writer`新对象，否则没有理由将其放入方法中。

但是，这种编写方式允许`config`更改字符串。那时，您似乎希望将 的实例化移动`writer`到一个方法中，以便您可以在第一次使用时实例化一个新方法，也可以在`config`字符串更改的任何时候实例化一个新方法。但是，如果`config`在构造类后不需要更改，则应在构造函数中询问文件名并在其中实例化对象：

```
class Logger : IDisposable
{
    StreamWriter writer;

    public void Logger(string configFileName)
    {
        writer = new StreamWriter(configFileName);
    }

    public void Print(string text) 
    {
        writer.WriteLine(text);
    } 

    public void Dispose()
    {
        writer.Dispose();
    }
} 
```

正如其他人指出的那样，让您的类实现`IDisposable`并使用更好的命名约定也是可取的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T20:29:55.790

您已经在本地类私有范围内声明了您的 StringWriter。这通常在多个方法之间共享变量时完成。但是，您应该管理您的公共变量，尤其是那些实现 IDisposable 的变量，例如 StringBuilder。

当您以两种方法访问 StringBuilder 时，可以在该范围内声明它。但是，当对象被垃圾收集器销毁时，您应该手动关闭并处置该对象。

您可以使用 C# 类析构函数，这里有详细[介绍](http://msdn.microsoft.com/en-us/library/66x5fx1b%28v=vs.80%29.aspx)。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-13T20:36:01.590

像这样初始化的字段的初始化在编译时移动到构造函数的顶部。

```
class Class1
{
    String foo = "bar";
    String bar;

    public Class1()
    {
        bar = "baz";
    }
} 
```

变成

```
.class private auto ansi beforefieldinit FieldInitialization.Class1
    extends [mscorlib]System.Object
{
    .field private string bar

    .field private string foo

    .method public hidebysig specialname rtspecialname 
        instance void .ctor () cil managed 
    {
        IL_0000: ldarg.0
        IL_0001: ldstr "bar"
        IL_0006: stfld string FieldInitialization.Class1::foo
        IL_000b: ldarg.0
        IL_000c: call instance void [mscorlib]System.Object::.ctor()
        IL_0011: nop
        IL_0012: nop
        IL_0013: ldarg.0
        IL_0014: ldstr "baz"
        IL_0019: stfld string FieldInitialization.Class1::bar
        IL_001e: nop
        IL_001f: ret
    }
} 
```

因此，您选择在哪里初始化它们实际上是一个风格问题。但是，当您要初始化的对象依赖于其他非静态字段、方法或属性时，您必须在构造函数中初始化它们。否则你会得到编译错误：

> 字段初始值设定项不能引用非静态字段、方法或属性

对于像 StreamWriter（或 Bitmap）这样的 IDispisable 资源，您应该牢记其他人指出的问题。

# c# - 从控制台应用程序中的列表获取数据到 c# 中的 Web 应用程序

> ID：11477860
> 
> 赞同：0
> 
> 时间：2012-07-13T20:24:07.040
> 
> 标签：c#, console

我有一个包含几个控制台应用程序和一个 Web 应用程序的解决方案。在其中一个控制台应用程序中，我将一些数据收集到一个列表中。这个列表我想从 Web 应用程序的列表中获取数据。但是，当我尝试将数据从控制台应用程序获取到 Web 应用程序时，数据始终为零/空。

是否可以在同一解决方案中的应用程序之间移动数据？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:29:59.623

您可以使用 .NET Remoting 进行进程间通信 (IPC)。这是一篇好文章： http: [//www.developer.com/net/net/article.php/3520891/Improved-NET-Remoting-Part-1-Same-Box-Communication.htm](http://www.developer.com/net/net/article.php/3520891/Improved-NET-Remoting-Part-1-Same-Box-Communication.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T20:34:59.233

您可以从控制台应用程序调用 Web 应用程序中的 Web 服务方法并传递列表。

# jsf - java.io.FileNotFoundException 当文件在文件夹中时

> ID：11477862
> 
> 赞同：0
> 
> 时间：2012-07-13T20:24:16.620
> 
> 标签：jsf, file-io, jsf-2, filenotfoundexception

我已经使用 JF 2.0 创建了项目。

当我运行项目时，我可以`xyz.xhtml`通过说执行文件`http://localhost:8080/myProject/faces/xyz.xhtml`

但是，当我将相同内容放入文件夹`xyz`并尝试执行时，`http://localhost:8080/myProject/faces/xyz/xyz.xhtml`我得到异常为`java.io.FileNotFoundException`.

堆栈跟踪的前几行是

```
java.io.FileNotFoundException
at org.apache.naming.resources.DirContextURLConnection.getInputStream(DirContextURLConnection.java:403)
at com.sun.faces.facelets.impl.DefaultFaceletCache._getLastModified(DefaultFaceletCache.java:172)
at com.sun.faces.facelets.impl.DefaultFaceletCache.access$000(DefaultFaceletCache.java:62)
at com.sun.faces.facelets.impl.DefaultFaceletCache$1.newInstance(DefaultFaceletCache.java:82)
at com.sun.faces.facelets.impl.DefaultFaceletCache$1.newInstance(DefaultFaceletCache.java:78)
at com.sun.faces.util.ExpiringConcurrentCache$1.call(ExpiringConcurrentCache.java:99)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) 
```

有人可以指出我做错了什么吗？

## 更新 1

我拥有的文件结构是

```
+ Web Content
  + WEB-INF
    - web.xml
    - faces-config.xml
  + xyz
    - xyz.xhtml
  - xyz.xhtml 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T20:15:52.157

问题在于`xyz.xhtml`：它使用相对路径而不是绝对路径来引用资源（模板？包括？） - 当您将其移到目录中时，该引用不再有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T20:57:06.857

也许你有这样的第一个文件夹结构

```
+ Web Content
  - xyz.xhtml
  + xyz
    - xyz.xhtml 
```

Faces Servlet 的 servlet 映射配置如下所示：

```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping> 
```

这意味着 Faces Servlet（将请求发送到 JSF 框架的 servlet）将应用于 ProjectName/faces/<whatever> 中的每个页面（当且仅当页面位于 faces 文件夹结构下时）。如果您想为站点中的每个 html 页面应用 Faces Servlet，请将配置更改为：

```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping> 
```

编辑

我根据你的问题做了一个测试。它应该没有问题。确保项目已正确构建并已正确部署，如果仍然存在这些问题，请尝试更改 servlet 映射配置。

# algorithm - 多目标子集和的伪多项式或快速解

> ID：11477865
> 
> 赞同：2
> 
> 时间：2012-07-13T20:24:33.177
> 
> 标签：algorithm, dynamic-programming, knapsack-problem, subset-sum

我正在寻找多/多目标[子集和问题](http://en.wikipedia.org/wiki/Subset_sum_problem)的快速解决方案。

作为额外的限制（这使得 IMO 更容易计算），我们可以假设总和中包含的所有值都是正的，并且都绑定到一个已知的极限值。

我知道单目标子集和问题有一个 O(NK) 伪多项式解决方案，我已经实现了一个基于维基百科和[这个](https://stackoverflow.com/a/4356000/1216027)堆栈交换答案的解决方案。

以其他方式解释这个问题，我有两组已知限制的正数。对于第一组中的每个值 A，第二组中的值的组合总和为 A。先验地知道第一组中的所有值具有对应的且不冲突的第二组中关联的值组合，是有一种已知的快速方法来计算第二组中的哪些元素与每个第一组值相关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-21T19:37:08.127

我认为您的问题是我在硕士论文中研究的**多集约束问题的变体。**

在这个项目中，我设计了一种在 DP 表中搜索以找到解决方案的算法。它不是伪多项式，但我认为在一般情况下它足够快。

我还实现了一个 Python 工具来解决这些问题。也许你想试试！

这个工具叫做**msat**，它在 github 上维护。

您可以参考[msat](https://github.com/dokelung/msat)。

或者干脆使用`pip`来安装它（它是一个 Python3 工具）：

```
$ pip install msat 
```

还有介绍幻灯片：[slides](https://github.com/dokelung/msat/blob/master/Multiset_Constraint_Solving_and_Its_Applications.pdf)。

如果您想了解详细信息，请参考[论文](http://www.airitilibrary.com/Publication/alDetailedMesh1?DocID=U0001-2008201316544100)。

# c - 让程序直接运行而无需使用终端使其运行

> ID：11477877
> 
> 赞同：0
> 
> 时间：2012-07-13T20:25:40.533
> 
> 标签：c, terminal

> **可能重复：**
> [在我的 Mac 上制作 C 启动器](https://stackoverflow.com/questions/11478306/make-a-c-launcher-on-my-mac)

我用 c 编写了一个程序，但是每次我想要它运行时都必须输入 ~/a.out。有没有办法通过双击它来让它运行？或任何其他方式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:33:57.933

命令行程序需要一个控制台才能在某个地方发送标准输出/标准输入。自行启动程序会使其运行，但 stdout 未连接到任何可以显示在屏幕上的东西。您必须在终端内运行您的程序才能使其按预期运行。

根据您的操作系统，您有一些选择。如果您正在运行 Linux 并拥有基于 Gnome 的桌面环境，则可以为您的应用程序创建一个启动器。创建启动器时，您可以选择“在终端中运行程序”。如果您选择该选项，则双击启动器将启动一个终端并在其中运行您的程序。

其他系统也有类似的方法可用。您正在运行什么操作系统/桌面环境？

*更新：*我对 OSX 不太熟悉，但鉴于它有一个 bash shell，你应该能够使用如下 bash 脚本：

```
#!/bin/bash
/usr/X11/bin/xterm -e /path/to/my_app 
```

您需要根据它们在系统上的实际位置来调整路径（在终端中运行`bash`应该会显示）。`xterm``which bash`

# python - 使用 Django 对自定义搜索结果进行分页

> ID：11477879
> 
> 赞同：1
> 
> 时间：2012-07-13T20:25:50.470
> 
> 标签：python, ajax, django

我正在寻找一种在 Django 中对自定义过滤器/搜索结果进行分页的好方法。可以使用 Ajax。我发现了这一点：[http](http://www.nomadjourney.com/2009/01/using-django-templates-with-jquery-ajax/) ://www.nomadjourney.com/2009/01/using-django-templates-with-jquery-ajax/但是要将它与分页一起使用，我需要有一些方法来存储信息交叉视图。对于主视图，我想存储过滤器和分页信息（站点数量，当前站点编号），而在结果视图中，我只想获取一个给定页面。我不想使用会话数据存储，因为我想在浏览器中打开多个选项卡并使用不同的搜索结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:37:10.907

有一些应用程序，如[django-pagination](https://github.com/ericflo/django-pagination/)和[django-endless-pagination](http://code.google.com/p/django-endless-pagination/)可以简化 django 中的分页。

# qt - Qt 中的默认固定宽度字体

> ID：11477880
> 
> 赞同：7
> 
> 时间：2012-07-13T20:25:51.720
> 
> 标签：qt, fonts

在 Qt 中是否有一种跨平台的方式来获取用户首选的固定宽度和比例字体？

例如，在 Cocoa 中，有

```
NSFont *proportional = [NSFont userFontOfSize:12.0f];
NSFont *fixed_width = [NSFont userFixedPitchFontOfSize:12.0f]; 
```

我想在 Qt 中找到适用于 Mac、Linux 和 Windows 的等价物。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-12-22T19:23:55.703

使用 QFontDatabase 的 systemFont(..) 函数，您可以检索

*   系统默认字体
*   默认**固定字体**
*   “标题”字体
*   最小的可读字体

例子：

```
const QFont fixedFont = QFontDatabase::systemFont(QFontDatabase::FixedFont) 
```

在 Qt 5.2 中引入

# android - Android - 用于开发的 GCM，我需要物理设备吗？

> ID：11477883
> 
> 赞同：3
> 
> 时间：2012-07-13T20:26:08.537
> 
> 标签：android, android-emulator, google-cloud-messaging

如果我想在开发环境中使用 GCM，我可以使用 Android 移动设备模拟器还是需要物理设备？

我想运行[GCM 演示应用程序](http://developer.android.com/guide/google/gcm/demo.html)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T20:30:44.213

您可以使用模拟器。但它必须是 2.2 以上版本并包含 Google API。创建此模拟器 AVD 后，转到 Settings->Accounts & Sync，然后添加一个 google 帐户。完成此操作后，您应该准备好注册 GCM 并接收来自它的消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T17:04:30.267

不要相信您在文档中阅读的所有内容。其中一些是完全错误的。

例如，我有一个新创建的 2.2 模拟器，它不会注册到 GCM；它每次都返回 PHONE_REGISTRATION_ERROR。后来的模拟器工作正常。

# uitableview - 如何将 UITableViewCell 编程为短暂闪烁？

> ID：11477884
> 
> 赞同：0
> 
> 时间：2012-07-13T20:26:08.403
> 
> 标签：uitableview

我有一个 UITableView，我刚刚在其中插入了一个新行，检索了该行的 NSIndexPath，然后滚动到它。如何使该行的单元格短暂闪烁？

```
int indexOfRow = //retrieve row index
NSIndexPath *indexPath =  [NSIndexPath indexPathForRow:indexOfRow inSection:0];
[self.tableView scrollToRowAtIndexPath:indexPath atScrollPosition:UITableViewScrollPositionTop animated:YES];
//cause cell to blink 
```

接下来是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:14:36.647

干得好：

```
UITableViewCell *tableCell = [[self tableView] cellForRowAtIndexPath:indexPath];
[tableCell setHighlighted:YES animated:NO];
[tableCell setHighlighted:NO animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:17:56.307

尝试这个：

```
- (void) someMethod {
    //your other code
    //...

    UITableViewCell *tableCell = [[self tableView] cellForRowAtIndexPath:indexPath];
    [tableCell setHighlighted:YES animated:NO];
    [self performSelector:@selector(completeCellBlink:) withObject:tableCell afterDelay:0.2];

}

- (void) completeCellBlink: (UITableViewCell*) cell {
    [tableCell setHighlighted:NO animated:YES];
} 
```

延迟以秒为单位，您当然可以更改该值以调整视觉印象。

# c# - 如何使用类库设置 mef？

> ID：11477885
> 
> 赞同：0
> 
> 时间：2012-07-13T20:26:11.453
> 
> 标签：c#, mef

我最近开始在我的应用程序中使用 MEF，并且在使用它或测试它在我的主应用程序内部起作用的类时没有遇到任何问题；但是，我刚刚开始为我的应用程序创建一个许可库，遇到了一些问题，因为我不确定如何设置它。

在我的许可库中，我有 LicenseManager、LicenseValidator 和 LicenseSigner 类：

```
public class LicenseManager
{
    [Import]
    private ILicenseValidator _validator;

    [Import]
    private ILicenseSigner _signer;

    public LicenseManager()
    {
        var catalog = new AssemblyCatalog(System.Reflection.Assembly.GetExecutingAssembly());
        var container = new CompsitionContainer();
        container.ComposeParts();
    }
}

[Export(typeof(ILicenseSigner))]
public class LicenseSigner : ILicenseSigner
{
    ...
}

[Export(typeof(ILicenseValidator))]
public class LicenseValidator : ILicenseValidator
{
    ...
} 
```

我发现验证者和签名者都`null`在访问它们之后。

我认为这是因为我在 LicenseManager 的构造函数创建容器之前实例化了 LicenseManager；但是，我不完全确定如何解决该问题，因为 LicenseManager 旨在作为类库的唯一入口点。我可能会创建某种工厂来初始化容器并返回一个 LicenseManager 实例，但这会导致库 API 不太好。

我对整个 MEF 有点陌生。有什么我可以做得更好的吗？有没有办法让我在我的主应用程序中处理所有 MEF 加载？任何解决方案都比我现在缺少的解决方案要好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T21:00:38.773

该`ComposeParts`调用需要至少一个属性对象来组合。您应该将`LicenseManager`作为参数传递给`ComposeParts`. 因此，您的全套代码如下所示：

```
public class LicenseManager
{
    [Import]
    private ILicenseValidator _validator;

    [Import]
    private ILicenseSigner _signer;

    public LicenseManager()
    {
        var catalog = new AssemblyCatalog(System.Reflection.Assembly.GetExecutingAssembly());
        var container = new CompsitionContainer(catalog);
        container.ComposeParts(this);
    }
}

[Export(typeof(ILicenseSigner))]
public class LicenseSigner : ILicenseSigner
{
    ...
}

[Export(typeof(ILicenseValidator))]
public class LicenseValidator : ILicenseValidator
{
    ...
} 
```

在我的测试中，上面的代码有效。

另一个想法是将目录的选择委托给实现库的代码。您的构造函数将变为：

```
public LicenseManager(AggregateCatalog catalog)
{
    var container = new CompsitionContainer(catalog);
    container.ComposeParts(this);
} 
```

这允许实现您的许可库的程序指定导出的来源。

# java - 注释处理资源

> ID：11477892
> 
> 赞同：-1
> 
> 时间：2012-07-13T20:26:45.910
> 
> 标签：java, annotations, java-6, annotation-processing

我正在拼命寻找有关 Java 6 注释处理的宝贵资源。理想情况下，我想解决的不同点应该是：

*   各种 Element 接口以及如何从类结构中检索它们
*   如何将处理器链接到注释
*   如何使用处理器构建注释，例如以 jar 文件的形式
*   如何在 Eclipse 中完成这一切

你有任何可以匹配账单的资源吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T22:23:31.717

[我想这是关于编写和处理自定义注释](http://www.zdnet.com/writing-and-processing-custom-annotations-part-1-2039352825/)的相当不错的介绍。

关于打包：您可以使用 java 中的命令行工具或 IDE 中的任何工具，甚至可以使用 ant、gradle 或 maven 等构建工具。而eclipse只是一个IDE。就用它吧。一段时间后会变得很自然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T22:54:28.600

这里有一些简短的介绍和一些示例代码：[Java 6.0 Features Part – 2 : Pluggable Annotation Processing API](http://www.javabeat.net/2007/06/java-6-0-features-part-2-pluggable-annotation-processing-api/)。看看这个，我总结了一些处理注解的步骤：[注解处理工具<-检查有效注解](https://stackoverflow.com/questions/8510985/annotation-processing-tool-checking-valid-annotation/8511287#8511287)

不确定您是想在 Eclipse 中开发处理器，还是最终想在 Eclipse 中使用它。开发处理器时没有什么特别的，为处理器创建一个项目，也许还有另一个带有一些示例注释的项目进行测试。您可以在 eclipse 项目（和 netbeans afaik）中添加和启用处理器，以利用处理器可能创建的错误或警告的良好集成。为此，请使用[Messager](http://docs.oracle.com/javase/7/docs/api/javax/annotation/processing/Messager.html)让 IDE 直接在源代码中标记特定元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-05T18:01:43.617

这个现代、静态、注释处理的指南非常容易理解，并且有一个视频推论可以引导：

博文：http: [//hannesdorfmann.com/annotation-processing/annotationprocessing101](http://hannesdorfmann.com/annotation-processing/annotationprocessing101)

视频对话： [https ://www.youtube.com/watch?v=43FFfTyDYEg](https://www.youtube.com/watch?v=43FFfTyDYEg)

我强烈推荐使用静态方法进行注释处理，因为它具有以下优点：

*   避免反思。
*   与 Java 和 Android 兼容。

它也很酷。

# php - 认为我需要自我加入？

> ID：11477901
> 
> 赞同：0
> 
> 时间：2012-07-13T20:27:20.907
> 
> 标签：php, mysql, self-join

我有一个具有以下结构的表：

```
id, Metal, AmPm, GBP, USD, EUR, Updated, TimeStamp 
```

示例值包括：

```
INSERT INTO `LondonFixes` (`id`, `Metal`, `AmPm`, `GBP`, `USD`, `EUR`, `Updated`, `TimeStamp`) VALUES
(228, 'Gold', 'AM', '1779.22000', '2748.00000', '2253.20000', '2012-07-13', '2012-07-13 15:19:35'),
(224, 'Gold', 'PM', '1022.33700', '1579.00000', '1294.05000', '2012-07-13', '2012-07-13 13:16:59'), 
```

我已经查询了数据，并且能够获取最后 10 行并按照我想要的方式对它们进行排序，如下所示：

```
 $r = mysql_query("SELECT * FROM(SELECT id, GBP, AmPm, Updated FROM LondonFixes WHERE Metal = 'Gold' AND UPDATED < now() ORDER BY id DESC LIMIT 10) AS src ORDER BY id ASC"); 
```

这将返回一个表格：

```
id, GBP, AmPm, Updated 
```

问题是我需要一个表格：

```
id, GBP_AM, GBP_PM, Updated 
```

基本上，AmPm 值可以包含值“AM”或“PM”。我想在一条线上显示 AM 和 PM 的 GBP 值，两条线上的更新相同。

例如，基于上述样本数据的所需输出：

```
1, 1779.22000, 1022.33700, 2012-07-13 
```

我认为这是一个自我加入，但我只是不了解自我加入，我什至不确定自我加入是我需要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T20:43:07.390

自联接只是意味着您将表的副本联接到自身上，并且像任何其他联接一样工作。

```
SELECT a.GBP AS GBP_AM, b.GBP AS GBP_PM, a.Updated
FROM LondonFixes a
JOIN LondonFixes b ON(a.Updated = b.Updated AND a.Metal = b.Metal)
WHERE a.AmPm = 'AM' AND b.AmPm = 'PM'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T20:42:53.743

您不需要承担自联接的开销。相反，只需使用条件检查即可：

```
SELECT a.*
FROM
(
      SELECT MAX(CASE AmPm WHEN 'AM' THEN GBP END) AS GBP_AM,
             MAX(CASE AmPm WHEN 'PM' THEN GBP END) AS GBP_PM,
             Updated
        FROM LondonFixes
       WHERE Updated < CURDATE() AND Metal = 'Gold'
    GROUP BY Updated
    ORDER BY Updated DESC
       LIMIT 10
) a
ORDER BY a.Updated 
```

这是假设该`id`字段对您不重要。我在我的解决方案中排除了它。

# php - Mail.php 和 SMTP 身份验证问题

> ID：11477902
> 
> 赞同：1
> 
> 时间：2012-07-13T20:27:20.983
> 
> 标签：php, smtp

我一直在尝试利用 jquery 可联系插件（在 google 上找到！）中的 mail.php 文件在我的网站上使用。尽管提供的脚本相当简单，但我在将其与主机的 SMTP 要求集成时遇到了问题。这是没有 SMTP 身份验证的原始脚本：

```
<?php
    // Assign contact info
    $name = stripcslashes($_POST['name']);
    $emailAddr = stripcslashes($_POST['email']);
    $issue = stripcslashes($_POST['issue']);
    $comment = stripcslashes($_POST['message']);
    $subject = stripcslashes($_POST['subject']);    

    // Set headers
    $headers  = 'MIME-Version: 1.0' . "\r\n";
    $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

    // Format message
    $contactMessage =  
    "<div>
    <p><strong>Name:</strong> $name <br />
    <strong>E-mail:</strong> $emailAddr <br />
    <strong>Issue:</strong> $issue </p>

    <p><strong>Message:</strong> $comment </p>

    <p><strong>Sending IP:</strong> $_SERVER[REMOTE_ADDR]<br />
    <strong>Sent via:</strong> $_SERVER[HTTP_HOST]</p>
    </div>";

    // Send and check the message status
    $response = (mail('mymail@mymail.com', $subject, $contactMessage, $headers) ) ? "success" : "failure" ;
    $output = json_encode(array("response" => $response));

    header('content-type: application/json; charset=utf-8');
    echo($output);

?> 
```

我尝试使用 Google 的建议并玩了几个小时。这是迄今为止基于我对 php 的零理解的最新版本。-__- （基于此：http: [//blog.geek4support.com/php-mail-script-with-smtp-authentication-how-to-send-mails-by-php-mail-script-using-smtp-认证/](http://blog.geek4support.com/php-mail-script-with-smtp-authentication-how-to-send-mails-by-php-mail-script-using-smtp-authetication/) )

```
<?php
 require_once "Mail.php";

    // Assign contact info
    $name = stripcslashes($_POST['name']);
    $emailAddr = stripcslashes($_POST['email']);
    $issue = stripcslashes($_POST['issue']);
    $comment = stripcslashes($_POST['message']);
    $subject = stripcslashes($_POST['subject']);    

 $host = "mail.mywebsite.com";
 $username = "mywebsitemail@mywebsiteaddress.com";
 $password = "mymailpassword";

    // Set headers
    $headers  = 'MIME-Version: 1.0' . "\r\n";
    $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

    // Format message
    $contactMessage =  
    "<div>
    <p><strong>Name:</strong> $name <br />
    <strong>E-mail:</strong> $emailAddr <br />
    <strong>Issue:</strong> $issue </p>

    <p><strong>Message:</strong> $comment </p>

    <p><strong>Sending IP:</strong> $_SERVER[REMOTE_ADDR]<br />
    <strong>Sent via:</strong> $_SERVER[HTTP_HOST]</p>
    </div>";

 $smtp = Mail::factory('smtp',
   array ('host' => $host,
     'auth' => true,
     'username' => $username,
     'password' => $password));

 $response = ($smtp->send('mymail@mymail.com', $subject, $contactMessage, $headers))  ? "success": "failure";
$output = json_encode(array("response" => $response));  
    header('content-type: application/json; charset=utf-8');
    echo($output);

 ?> 
```

我实际上遇到了一些问题。我的主机不支持 PHPMailer :-(。只有带有 SMTP 的 PearMail。他们建议调整上面列出的代码并将我现有的代码与它合并。确切地说，在在线发布之前我一直在尝试做的事情。回到广场1、有什么想法吗？

评论，建议，任何东西都将不胜感激！:-)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-13T20:49:40.687

对于发送邮件，请尝试[PHPMailer](http://phpmailer.worxware.com/)，它已经过测试，每个人都在使用它，而且它可以正常工作。它还具有许多功能和配置选项。

最新版本是[这个](http://sourceforge.net/projects/phpmailer/files/latest/download?source=files)，至于使用 SMTP 和 PHPMailer 发送邮件，这就是您需要的所有代码

```
// Data received from POST request
$name = stripcslashes($_POST['name']);
$emailAddr = stripcslashes($_POST['email']);
$issue = stripcslashes($_POST['issue']);
$comment = stripcslashes($_POST['message']);
$subject = stripcslashes($_POST['subject']);   

// Send mail
$mail = new PHPMailer();
$mail->IsSMTP(); // telling the class to use SMTP

// SMTP Configuration
$mail->SMTPAuth = true;                  // enable SMTP authentication
$mail->Host = "myhost"; // SMTP server
$mail->Username = "yourusername@gmail.com";
$mail->Password = "yourpassword";            
//$mail->Port = 465; // optional if you don't want to use the default 

$mail->From = "my@email.com";
$mail->FromName = "My Name";
$mail->Subject = $subject;
$mail->AltBody = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test
$mail->MsgHTML($issue . "<br /><br />" . $comment);

// Add as many as you want
$mail->AddAddress($emailAddr, $name);

// If you want to attach a file, relative path to it
//$mail->AddAttachment("images/phpmailer.gif");             // attachment

$response= NULL;
if(!$mail->Send()) {
    $response = "Mailer Error: " . $mail->ErrorInfo;
} else {
    $response = "Message sent!";
}

$output = json_encode(array("response" => $response));  
header('content-type: application/json; charset=utf-8');
echo($output); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-11T16:17:49.583

这是我的测试脚本，用于绕过禁用的 PHP mail() 函数。它使用 PearMail。打印语句用于在浏览器中进行测试，您可能需要删除它们。

```
<?php
/*
 * Script to send an email as the PHP mail() function is disabled.
 * The hosting company requires SMTP authentication etc.
 * need to install the pear mail package in the cPanel
 *
 * Use the support@myserver.com as the sending/from email 
 * (or maybe the welcome one?)
 *
 * Sunday, 11 october 2015 
 * G O’Rilla
 *
 * 
 */
 function pearMail( $e_mail, $subject, $content ) {
 /*
 // To ignore the Strict Standards (which are non fatal) change your error 
 // reporting level in the php.ini file or better, inline with error_reporting()
 */
 error_reporting(E_ERROR | E_PARSE);
# To use installed modules (cPanel - PHP Extensions and Applications Package Installer)
# Add “/home/myaccount/php” to the include path. To do this, add the following code to your script:
ini_set("include_path", '/home/myaccount/php:' . ini_get("include_path")  );

require_once 'Mail.php';

#Server host only allows SMTP authentication
/*
 * Use below setting for SMTP Authentication.
 * --
 * SMTP Host : myserver.com
 * SMTP User : Use domain email Address [xyz@myserver.com]
 * SMTP Password : Use domain email password.
 * SMTP Port : 25 
*/
//print "Start Script <br>";
$params = array();
$params["host"] = “myserver.com";              # - The server to connect. Default is localhost - use your domain name.
$params["port"] = 25;                            # - The port to connect. Default is 25.
// Error: return fron mailer: Failed to set sender: welcome@theappflap.com 
//[SMTP: Invalid response code received from server (code: 550, response: 
// Access denied - Invalid HELO name (See RFC2821 4.1.1.1))] 
// sever requires authentication so TRUE 
$params["auth"] = TRUE;                         # - Whether or not to use SMTP authentication. Default is FALSE.
$params["username"] = "support@myserver.com";  #- The username to use for SMTP authentication.
$params["password"] = “********”;                #- The password to use for SMTP authentication.

print_r ( $params );
//Other parameters assuming default values will do
#$params["localhost"] - The value to give when sending EHLO or HELO. Default is localhost
#$params["timeout"] - The SMTP connection timeout. Default is NULL (no timeout).
#$params["verp"] - Whether to use VERP or not. Default is FALSE.
#$params["debug"] - Whether to enable SMTP debug mode or not. Default is FALSE.
# Mail internally uses Net_SMTP::setDebug .
#$params["persist"] - Indicates whether or not the SMTP connection should persist over multiple calls to the send() method.
#$params["pipelining"] - Indicates whether or not the SMTP commands pipelining should be used.

 $rc = $mailer = & Mail::factory( "smtp", $params ); # creates a mailer instance
 if ( $rc == NULL ) {
     print "<br>Failed to create mail instance <br>";
 }
 else {
     print "<br>mail instance created <br>";
 }

 $recipients = $email; //'support@myserver.com';

$headers['From']    = 'welcome@myserver.com'; 
$headers['To']      = $email; //'support@myserver.com';   // Input param
$headers['Subject'] = $subject;  //'TAF: Test message';        // Input param

$body = $content;  //'This is a test using PEAR mailer';       // Input param

print ( "recipients: " . $e_mail . " subject: " . $subject . " content: " . $content . "<br>");

$rc = $mailer->send( $recipients, $headers, $body );
print ( "return from mailer; " . $rc );

//print "<br>End Script";
 }
?> 
```

# jquery - 如何让 jQuery 获取新创建的 .val()元素？

> ID：11477904
> 
> 赞同：1
> 
> 时间：2012-07-13T20:27:28.130
> 
> 标签：jquery, input, each

# 我正在尝试做的事情：

使用[jQuery](http://jquery.com/)获取**每个**新*创建*的**值**。 ***`<input>`***

 ***1.  这是我的**HTML** `Code`的受影响部分：

    ```
    <ul class="full_form_ul">
            <li class="full_form_ul_li" id="the_step_li">

                    <button class="button" id="test_button">+[Test]</button>
                    <button class="button" id="step_creation_button">+[Step]</button>

            </li> <!-- \\#the_step_li -->
    </ul> <!-- \\.full_form_ul --> 
    ```

2.  这是正在**工作的****jQuery** ：`code`

     **```
    $("#step_creation_button").click(function(event)
    {   
            event.preventDefault();
            $('#the_step_li').append('<div class="step_div"><input type="text" class="step_input"><button class="the_sub_step_button" type="button" title="button">+[Sub]</button></div>');

    });

    $('#the_step_li').on('click', "button", function(event) 
    {

        event.preventDefault(); 
        $(this).parent('.step_div').append('<div class="sub_step_div"><input type="text" class="sub_step_input"></div>');

    }); 
    ```** 
***   **不工作** 的**jQuery** `code`：

    ```
    $("#test_button").on('click', function(event) 
    {

        event.preventDefault();

        $(".step_div").each(function()
        {   

            alert($(this).next('.step_input').val());
            // ^ updated according to @Jeremy T's excellent response into...
            //alert($(this).children('.sub_step_input').val());

            $(this).children('.sub_step_div').each(function()
            {
                alert($(this).next('.sub_step_input').val());
                // same change from .next into .children here as well I would assume, though it doesn't work in this instance.  
            });

        }); // \\.step_div.each 

        //@EH_warch supplied a wonderful working solution for the initial problem as well
        //$("#the_step_li > .step_div > .step_input").each(function()
        //{
            //alert($(this).val());
        //})

    }); // \\#test_button.on('click') 
    ```** 

 *** * *

相关（但不同）的问题：

*   [在 jQuery 中将 live() 变成 on()](https://stackoverflow.com/questions/8021436/jquery-1-7-turning-live-into-on)
*   [如何使用 jQuery 和“this”来捕获更改的表单元素值](https://stackoverflow.com/questions/9590593/how-to-use-jquery-and-this-to-capture-changed-form-element-value)
*   [jQuery .val() 和 .attr('value') 有什么区别？](https://stackoverflow.com/questions/4837133/whats-the-difference-bewteen-jquery-val-and-attrvalue)
*   [jquery 函数 val() 不等同于 "$(this).value="?](https://stackoverflow.com/questions/4524702/jquery-function-val-is-not-equivalent-to-this-value)
*   [jquery .live('click') 与 .click()](https://stackoverflow.com/questions/4944293/jquery-liveclick-vs-click)
*   [每个类元素的简单 jquery .hover() 方法](https://stackoverflow.com/questions/5518815/simple-jquery-hover-method-for-each-class-element)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T20:43:13.950

一切看起来都不错，除了你的选择器`$(this).next('.step_input')`

如果你想在里面找到输入`this`，那么你需要使用`$(this).children('.step_input')`

工作 jsFiddle：http: [//jsfiddle.net/rKnDF/](http://jsfiddle.net/rKnDF/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T20:34:27.127

抱歉，我对您的标题感到困惑，我认为这与新添加的元素无关。

你可以替换这个

```
$(".step_div").each(function()
{   
    alert($(this).next('.step_input').val());
}); 
```

为了

```
$("#the_step_li > .step_div > .step_input").each(function(){
    alert($(this).val());
}) 
```

**更新**

根据您的新请求，您可以做的最好的事情是为`display`您希望显示的元素添加一个类，您可以获得该元素的类来执行任何业务登录。

```
$("#the_step_li .display").each(function(){
    alert($(this).val() + 'and my class is: ' + $(this).attr('class'));
}) 
```

[例子](http://jsfiddle.net/rKnDF/11/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T20:35:57.283

元素仅绑定在文档准备就绪后，然后创建新元素。您需要使用 .live() 或 .delegate() 之类的东西将事件附加到动态创建的对象上。

这是关于差异的非常好的解释。

[http://www.alfajango.com/blog/the-difference-between-jquerys-bind-live-and-delegate/](http://www.alfajango.com/blog/the-difference-between-jquerys-bind-live-and-delegate/)*****

# mysql - LEFT JOIN 成为隐式连接我如何修复它？

> ID：11477907
> 
> 赞同：1
> 
> 时间：2012-07-13T20:27:41.633
> 
> 标签：mysql, subquery, left-join

此查询使一个 JOIN 而不是 LEFT 连接，但我不知道它是如何使用 cierre_mensual 表的 wheres 子句的：

```
SELECT last_odometro.equipo, IFNULL(SUM(cierre_mensual.recorrido),0) + 
      last_odometro.recorrido AS ultimo_odometro
FROM (
    SELECT *
    FROM `cierre_mensual`
    WHERE mes < '2012-03-01'
    AND `tipo_de_recorrido`
    IN ( 1, 3 )
    GROUP BY `equipo`
    HAVING MAX( mes ) 
) AS last_odometro
LEFT JOIN 
    `cierre_mensual` ON last_odometro.`equipo` = cierre_mensual.`equipo`
WHERE 
        cierre_mensual.mes > last_odometro.mes
    AND cierre_mensual.mes < '2012-03-01'
GROUP BY `last_odometro`.`equipo` 
```

表字段是： idequipo mes combustible_en_tanque recorrido tipo_de_recorrido

1）我想找到最后一个mes（日期）的recorrido，tipo_de_recorrido是（1,3）2）如果存在，则将recorrido的其余部分与更大的mes相加

```
equipo  mes     combustible_en_tanque   recorrido   tipo_de_recorrido
7   2011-07-01  4   100     2
7   2011-07-01  4   100     2
7   2011-08-01  4   193900  1
7   2011-09-01  4   194000  1  <- the last row of type 1 194000
7   2011-10-01  4   100     2   +=100
7   2011-11-01  4   100     2   +=100 
7   2011-12-01  4   100     2   +=100
7   2012-01-01  7   150     2   +=150
7   2012-02-01  4   50  2       +=50 
```

它的回报：

```
equipo  ultimo_odometro
   7     195150 
```

但如果：

```
7   2011-07-01  4   100     2
7   2011-07-01  4   100     2
7   2011-08-01  4   193900  1
7   2011-09-01  4   194000  1  <- the last row of type 1 194000
no more rows whit type!=(1,2) 
```

必须返回 194000 但连接失败。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T20:33:18.033

您可以将条件从`WHERE`子句移动到`LEFT JOIN`'`ON`子句：

```
LEFT
JOIN `cierre_mensual`
  ON last_odometro.`equipo` = cierre_mensual.`equipo`
 AND cierre_mensual.mes > last_odometro.mes
 AND cierre_mensual.mes < '2012-03-01' 
```

# c# - 保护我的应用程序免受外部 API 更改的方法

> ID：11477908
> 
> 赞同：0
> 
> 时间：2012-07-13T20:27:43.833
> 
> 标签：c#, api

我想知道一些关于如何保护我的应用程序免受外部 API 更改的模板或模式，例如，在 MS Azure 或任何其他公司的 API 内部。最好的方法是什么，并最大限度地减少我的代码更改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T20:30:11.150

您需要在程序中创建自己的 API。使用接口划分外部 API 消耗，因此如果外部 API 发生变化，您可以只编辑实现，因为接口契约会将程序的其余部分保存在一起。

# javascript - 带有子视图的骨干路由

> ID：11477910
> 
> 赞同：6
> 
> 时间：2012-07-13T20:27:53.147
> 
> 标签：javascript, backbone.js

我很好奇人们是如何处理这种情况的。我有一个应用程序，它在“/categories”之类的路线上显示类别列表。单击每个类别时，会出现该类别中的产品列表，并且路线会更新为“/categories/1/products”之类的内容。如果我导航一些然后单击后退按钮，我应该能够只呈现前一个类别的产品列表视图，而无需重新呈现类别视图。

但是，我还需要确保当我直接导航到“/categories/2/products”时，会呈现类别列表和产品列表。

基本上，这意味着路由器对后退/前进历史导航的响应与直接访问 URL 的响应不同。这类问题有通用解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T21:00:15.680

是的，无论是通过直接 url 还是通过路由器导航访问，都必须在创建父级后始终调用子级。

我的解决方法是在我的应用程序中始终有一个主视图，并且路由器总是调用这个主视图。路由器无权访问其他视图。在我的主视图中，我可以处理创建或不创建父视图的情况。

例如，检查路由器如何只调用 MainView 并且我有一个名为 validateCategories 的方法，如果需要它可以创建父视图：

```
var MainView = Backbone.View.extend({
    id : 'mainView',
    categories : null,

    events : {
    },

    initialize : function(){
        _.bindAll(this);
    },

    openSection : function(section){
        switch(section){
            case 'categories':
                this.validateCategories();
                break;
            case 'products':
                this.validateCategories();
                this.categories.open( new ProductsView() );
                break;
        }
    },
    validateCategories : function(){
        if( !this.categories ){
          //we create the parent view only if not yet created
          this.categories = new CategoriesView();
        }
    }
});
var mainView = new MainView();
var RouterClass = Backbone.Router.extend({

  routes : {
    "categories"    : "viewCategories",
    "categories/:id/:section"   : "viewProducts"
  },

  viewCategories : function(path) {
    mainView.openSection( 'categories' );
  },

  viewProducts : function(id, section){
    mainView.model.set({
        productId : id,
        section : section,
    });
    mainView.openSection( 'products' );
  }
}); 
```

此外，如果您要从头开始一个新项目，请不要忘记查看这个可以帮助您组织 Backbone.js 项目的扩展： [https ://github.com/derickbailey/backbone.marionette](https://github.com/derickbailey/backbone.marionette)

# python - 如何映射到字典

> ID：11477912
> 
> 赞同：1
> 
> 时间：2012-07-13T20:28:09.653
> 
> 标签：python, mysql, sql

所以我有一个看起来像这样的列表：

```
[['hostile', 'angry'], ['elated', 'happy'], ['elated', 'grateful'], ['depressed', 'sad']] 
```

由此产生：

```
c.execute("""SELECT category, wordlist from wordtest order by category""")
                categoryfile = c.fetchall()
                categoryfile = [list(x) for x in categoryfile] 
```

我希望将类别的所有值合并到一个键中，然后将与该类别配对的单词列表中的所有单词合并到一个列表中。那可能吗？

所以最终，有了那个列表，你会看到

> ['兴高采烈'，'快乐']，['兴高采烈'，'感激']

变成：

```
{'elated': ['happy', 'grateful']} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T20:31:51.543

使用`collections.defaultdict`：

```
from collections import defaultdict

myList = [['hostile', 'angry'], ['elated', 'happy'], ['elated', 'grateful'], ['depressed', 'sad']]  

myDict = defaultdict(list)

for key, value in myList:
    myDict[key].append(value) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T20:31:43.677

```
lis=[['hostile', 'angry'], ['elated', 'happy'], ['elated', 'grateful'], ['depressed', 'sad']]
dic={}
for x in lis:
    dic.setdefault(x[0],[]).append(x[1])
print dic 
```

**输出：**

```
{'depressed': ['sad'], 'elated': ['happy', 'grateful'], 'hostile': ['angry']} 
```

# vb.net - 在 TFS 中编译具有 Microsoft Excel 的构建

> ID：11477914
> 
> 赞同：1
> 
> 时间：2012-07-13T20:28:12.670
> 
> 标签：vb.net, ms-office

我正在尝试在 VB.net 2010 中编译一个在某些时候使用 Microsoft Excel dll 的项目。当我从我的计算机编译时一切正常，但是当我使用 TFS 对新构建进行排队时，我得到了`Microsoft.Interop.Excel...`未定义的错误。我直接在 TFS 服务器上安装了 Microsoft Office 2010，但仍然遇到同样的错误。

我必须执行任何配置才能使其正常工作吗？

**编辑：**

您将在构建中看到的典型错误消息：

> 错误 BC30002：未定义类型“Excel.Worksheet”。
> 
> 错误 BC30002：未定义类型“Microsoft.Office.Interop.Excel.Application”。
> 
> 警告 BC40056：导入“Microsoft.Office.Interop”中指定的命名空间或类型不包含任何公共成员或找不到。确保命名空间或类型已定义并包含至少一个公共成员。确保导入的元素名称不使用任何别名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T04:06:32.240

您需要将 dll 包含在保存在 TFS 中的 lib 文件夹中，并从该位置引用 dll，而不是在您的项目中安装它们的任何其他位置。

**编辑：**

开发人员通常从 C:\Program Files (x86)\Microsoft Visual Studio 14.0\Visual Studio Tools for Office\PIA\Office15 中引用 Interop PIA，并且该文件夹不会存在于服务器上。

您需要将这些文件（例如 Microsoft.Office.Interop.Excel.dll）复制到源代码管理中的 lib 或 refs 文件夹中，并从您的解决方案中引用这些 DLL，而不是 PIA 路径中的那些。

另请注意，Reference Assemblies 文件夹中的 DLL 也是如此，例如：

C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.5\System.Windows.Forms.dll

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T21:51:49.550

以防万一它有所作为，您提到了您的 TFS 服务器，但这不一定是您的构建发生的地方。

构建报告（可能是您在 TFS 中看到错误的地方）应该指出构建机器存储源代码的路径 - 默认情况下，该路径位于 c:\build 下的某个位置。一个好的第一步是转到安装了构建代理的机器的桌面（您可以通过右键单击团队资源管理器中的构建节点并选择管理控制器来查看构建代理的列表...）一次您在正确机器的桌面上，将源文件夹从该路径复制到同一台机器上的其他位置，然后打开新的复制解决方案文件并在 Visual Studio 中构建它。就像在本地机器上一样对构建进行故障排除 - 该构建机器上缺少某些东西，这些步骤应该可以帮助您更轻松地找到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T19:03:10.200

您应该尝试在**构建机器上**手动运行构建。首先在 Visual Studio 中，然后在 msbuild 中。这应该会失败，但是您可能会更好地了解正在发生的事情以及失败的原因。您的 excel dll 可能与您自己的计算机上的位置不同。

# symfony - 如何将 Zendframework 2 库与 Symfony 2 集成？

> ID：11477915
> 
> 赞同：4
> 
> 时间：2012-07-13T20:28:14.657
> 
> 标签：symfony

如何将 zendframework 2 库与我的 Symfony 2 应用程序集成？如何自动加载以及如何使用它？我想使用一些类。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T22:11:41.103

要将 Zendframework 2 集成到 Symfony 2 中，如果您使用 Symfony 标准发行版，请将以下内容添加到项目根目录的 deps 文件中：

```
[zf2]
    git=https://github.com/zendframework/zf2.git 
```

现在，通过运行更新供应商库：

```
php bin/vendors update 
```

如果你没有使用 Symfony 标准发行版，你将不得不从供应商文件夹中的 github 克隆。

接下来，将 Zend 命名空间添加到 app/autoload.php 文件中，以便可以自动加载这些库。

```
$loader->registerNamespaces(array(
    ...
    'Zend' => __DIR__ . '/../vendor/zf2/library',
)); 
```

然后就完成了，你可以使用zendframework库。例如，我将在默认的 symfony 2 应用程序中展示 Zend\Json 类的用法。打开 src/Acme/DemoBundle/Controller/DemoController.php 并编辑 indexAction 方法，代码如下：

```
use Zend\Json\Json;
...
public function indexAction()
{
    $data = array('zendframework2' => 'symfony2');
    $encodedData = Json::encode($data);
    var_dump($encodedData);
    return array();
} 
```

在此示例中，我使用 zendframework 类将数组转换为 json

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T09:22:25.733

对于 Symfony 2.1，您需要`zendframework/zendframework`在`require`. `composer.json`如果你只想要几个包而不是整个库，你应该将 url 添加到 Zend 库中`repositories`，如下所示：

```
"repositories": [
    {
        "type": "composer",
        "url": "http://packages.zendframework.com/"
    }
],
"require": {
    //...
    "zendframework/zend-log":"2.*", 
```

# facebook - 使用节点的 TCP 连接

> ID：11477916
> 
> 赞同：-1
> 
> 时间：2012-07-13T20:28:27.220
> 
> 标签：facebook, sockets, node.js

我想从 nodejs 服务器实现到匿名服务器 { chat.facebook.com:5222 } 的 TCP 套接字连接。我如何/从哪里开始才能完成这项工作？

它应该类似于 PHP 的 fsockopen() 函数的节点替换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:36:01.153

[net.Socket](http://nodejs.org/docs/latest/api/net.html#net_class_net_socket)的文档是您应该开始的地方。*通常*，您可以像这样连接到服务器：

```
var net = require('net');

var socket = new net.Socket();
socket.on('connect', function() {
  // socket is now connected
});
socket.on('data', function(data) {
  // socket got some data
});

socket.connect(5222, 'chat.facebook.com'); 
```

# matlab - MATLAB 是否在清除后保留一些变量？

> ID：11477918
> 
> 赞同：9
> 
> 时间：2012-07-13T20:28:36.657
> 
> 标签：matlab, memory

我有一个程序可以读取一个非常大的 Excel 文件并创建一些大变量。如果我尝试连续多次运行它，这将耗尽存储空间，这是有道理的，即：

大程序；大程序

会崩溃。但是，我不明白的是为什么

大程序；清除所有；大程序

也会崩溃；为了多次运行它，我每次都必须重新启动 MATLAB。MATLAB 实际上并没有清除所有变量吗？或者这是记忆碎片的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T12:32:55.167

Matlab 确实可以“在后台”保留一些变量和其他设置。我将以下设置作为快捷方式将其清除回“刚刚打开”状态（真正让你明白的是清除功能不是清除所有的子集）。

```
restoredefaultpath;
clc;
clear all;
close all;
clear functions;
bdclose('all');
fclose('all'); 
```

# java - IOUtils.copy 和 IOUtils.copyLarge 非常慢

> ID：11477922
> 
> 赞同：5
> 
> 时间：2012-07-13T20:28:53.867
> 
> 标签：java, http, inputstream, apache-commons-io

我已经实现了一个 REST 服务，用于使用 IOUtils.copy() 下载一个中等大小 (250 Mb) 的 zip 文件，类似于[将文件写入 servletoutputstream 的最有效方法](https://stackoverflow.com/questions/4645441/most-effective-way-to-write-file-to-servletoutputstream)。使用 HttpURLConnection 从另一个应用程序调用 REST 服务。我在接收端使用 IOUtils.copy() 将文件保存到磁盘。

下载一个文件需要 30 多分钟。这太慢了**。**

想法？更好的实现？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T17:46:13.563

我发现了这个问题。

我在同一台机器上运行客户端和服务器进行测试。一旦我将一个转移到另一台机器上，转移就花了一分钟多一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T20:34:30.210

您可以阅读源代码并亲自查看默认缓冲区大小为 4096。
我个人在特定情况下使用 8192 作为缓冲区大小。
考虑使用缓冲区大小。
您可以自己轻松实现此副本，或在[此处](http://commons.apache.org/io/api-1.4/org/apache/commons/io/IOUtils.html#copyLarge%28java.io.InputStream,%20java.io.OutputStream%29)查看源文件作为参考。

此外，如果可能，请考虑执行多线程下载，因为您的服务器支持多个连接（我假设）。

# asp.net - 保存客户端代理的位置

> ID：11477923
> 
> 赞同：0
> 
> 时间：2012-07-13T20:29:13.200
> 
> 标签：asp.net, wcf

我将 Web 引用添加到 WCF 服务

我想修改代理文件由web服务参考工具自动生成

我想在每个方法属性之前添加

```
[OperationContract]
[WebInvoke(Method = "GET",
ResponseFormat = WebMessageFormat.Json,

BodyStyle = WebMessageBodyStyle.Wrapped,

UriTemplate = "LogIn/{username}/{password}")] 
```

任何想法如何做到这一点

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-17T15:54:37.253

**你好呀：**

我之所以添加这个，是因为上面的帖子并没有明确说明如何在客户端代理代码中添加 WebInvoke 属性，所以我将其提供给大家，以消除对其完成方式的任何混淆。

### 步骤1

转到您的 VS 项目文件夹并找到您的“服务引用”文件夹。找到您正在使用的参考文件夹，如果您在添加服务时使用了默认文件夹，那么应该类似于“ServiceReference1”。

在该文件夹中有一个 Reference.cs 文件，这是您更新方法所需的文件。

例如，假设您创建了一个 REST 服务并且您的 WebInvoke 属性被忽略了。你可以在那里添加它们。

### 第2步

只需找到以“[System.ServiceModel.OperationContractAttribute”开头的行：

应该看起来像这样

```
[System.ServiceModel.OperationContractAttribute(Action="http://tempuri.org/IService1/YourMethodName", ReplyAction="http://tempuri.org/IService1/YourMethodNameResponse")] 
```

### 第 3 步

现在，在该行之后，您要添加 WebInvoke 代码，如下所示：

```
[System.ServiceModel.OperationContractAttribute(Action="http://tempuri.org/IService1/YourMethodName", ReplyAction="http://tempuri.org/IService1/YourMethodNameResponse")]

[System.ServiceModel.Web.WebInvoke(Method = "POST", BodyStyle = System.ServiceModel.Web.WebMessageBodyStyle.WrappedRequest, RequestFormat = System.ServiceModel.Web.WebMessageFormat.Json, ResponseFormat = System.ServiceModel.Web.WebMessageFormat.Json, UriTemplate = "/YourMethodName")] 
```

这就是它的全部内容。

**注意：**如果您删除了 WCF 服务引用，您所做的更改将会消失。因此，请确保在完成更改后备份文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T20:40:58.243

**更新答案：** 您似乎已经使用 VS 中的“添加服务引用”对话框创建了代理代码。VS ASR 对话框不完全支持 WCF REST，因此代理代码缺少 [WebInvoke] 属性。您可以尝试`[WebInvoke(BodyStyle = WebMessageBodyStyle.Wrapped)]`在客户端代理中的操作上添加属性吗？来源： [当 [OperationContract] 方法中使用多个参数时，WCF 服务代理抛出异常](https://stackoverflow.com/questions/4346554/wcf-service-proxy-throws-exception-when-more-than-one-parameter-is-used-in-oper)

如果我清楚地理解你的问题。如果您想在每个方法之前添加 WebInvoke 属性，请转到您的 WCF 服务接口类，例如 ( IService.cs )。可能是放在您的 App_Code 文件夹中。

```
[ServiceContract]
public interface IService
{ 
 [OperationContract]
 [WebInvoke(Method = "GET",ResponseFormat = WebMessageFormat.Json,BodyStyle = WebMessageBodyStyle.Wrapped,UriTemplate = "LogIn/{username}/{password}")]
void DoWork();

} 
```

如果要更改代理类设置，请转到 system.ServiceModel 标记下的 Web 配置。

```
 <system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_IService" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                useDefaultWebProxy="true">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <security mode="None">
                    <transport clientCredentialType="None" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="UserName" algorithmSuite="Default" />
                </security>
            </binding>
        </basicHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://localhost:56662/WebSite2/Service.svc"
            binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IService"
            contract="ServiceReference1.IService" name="BasicHttpBinding_IService" />
    </client>
    <behaviors>
        <serviceBehaviors>
            <behavior name="">
                <serviceMetadata httpGetEnabled="true" />
                <serviceDebug includeExceptionDetailInFaults="false" />
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
</system.serviceModel> 
```

# c - SECCOMP：如何模拟 malloc、realloc 和 free？

> ID：11477927
> 
> 赞同：6
> 
> 时间：2012-07-13T20:29:38.083
> 
> 标签：c, linux, gcc, malloc, seccomp

我想在我的服务器上执行任意（可能很危险）的二进制文件。因此，我习惯`objcopy`将“main”符号重命名为“other_main”，这样我就可以链接到我自己的小型 main 函数中，该函数设置适当的值并在调用 other_main 之前`RLIMIT_CPU`切换标志。[`SECCOMP`](http://en.wikipedia.org/wiki/Seccomp)到目前为止，我对这个解决方案非常满意。

现在的问题是，第 3 方程序代码可能包含一些对 malloc 的调用，这些调用可能会立即终止程序（不允许使用 sbrk）。因此，我想在设置`SECCOMP`malloc / realloc / calloc / free 之前预先分配一些合理大小的数组（例如 20MB）。不幸的是，我不知道如何归档最后一步。我必须自己实现所有这 4 个功能吗？如何将我自己的函数注入到 stdlib（例如，当 printf 在内部调用 malloc 时会发生什么？）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T20:47:50.237

并非所有 malloc 实现都基于 sbrk()，例如[GNU mmalloc](http://www.math.utah.edu/docs/info/mmalloc_toc.html)。[如果需要自定义实现，此文档](http://www.inf.udec.cl/~leo/Malloc_tutorial.pdf)也可能很有用。

[+这里](http://openser.svn.sourceforge.net/viewvc/openser/trunk/mem/)有两个简单的 malloc 实现

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T21:17:01.180

对于 malloc 和 free，您的程序只需要定义自己的版本。我见过的大多数 libc 实现（包括 glibc、klibc 和 Dietlibc）都会很乐意使用您的内存分配器例程。因此，在进入 seccomp 模式之前，使用 mmap 或 sbrk 分配一大块内存，然后从该块中分配 malloc/free。 [memmgr](http://eli.thegreenplace.net/2008/10/17/memmgr-a-fixed-pool-memory-allocator/)是一个简单的堆分配器，可以很容易地适应固定缓冲区的分配。

seccomp 的真正问题是它允许的一组系统调用（读取、写入、退出和 sigreturn）根本不足以运行与或多或少的*任何*libc 链接的程序。例如：

*   在 glibc 中，exit 和 _exit 调用 exit_group
*   在 glibc 中，printf 可以调用 mmap
*   在dietlibc中，scanf可以调用ioctl
*   等等等等

有必要进行这些调用通常有充分的理由。例如，dietlibc 使用 ioctl 在从标准输入读取输入时检查标准输入是否为 tty，以便刷新标准输出。如果输出是行缓冲的，这是确保在读取交互式输入之前提示可见的标准行为。

所以，我得出结论，原来的seccomp模式或多或少没用。然而，模式 2（又名“过滤模式”）更有用，因为它允许您将特定的系统调用列入白名单。我的 github 页面上有一个[概念证明，](https://github.com/daveho/EasySandbox)它以 seccomp 模式 2 运行程序，但允许它们使用 printf 和 scanf，以及使用 malloc/free 分配内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T22:24:59.407

[seccompsandbox](http://code.google.com/p/seccompsandbox/)：

*   在一个线程中启用 seccomp，该线程执行 RPC（通过`read`/`write`通过预分配`socketpair`）到同一进程中的另一个（非 seccomp）线程，该线程能够执行特权操作，例如`mmap`
*   修补函数，例如`malloc`（在内存中，在运行时）以重定向到它们的 seccomp-safe 包装器

[Chromium 的 seccomp 沙盒](http://www.imperialviolet.org/2009/08/26/seccomp.html)有更多关于它如何工作的细节。

# wpf - 在 WPF 的线程中添加 Canvas Children 失败

> ID：11477929
> 
> 赞同：1
> 
> 时间：2012-07-13T20:29:54.170
> 
> 标签：wpf, canvas, invoke, dispatcher, children

我有一个 WPF 窗口，其中包含一个 Canvas 对象（名称：canvas）。

当用户点击一个按钮时，会加载大量数据，耗时较长。

所以，我不希望 UI 被冻结并创建一个后台线程。

```
Thread thread = new Thread(new ThreadStart(BuildGraph));        
thread.SetApartmentState(ApartmentState.STA);\
thread.IsBackground = true;
thread.Start(); 
```

在这个 BuildGraph 函数中，我加载数据，创建一些形状，然后将这些形状放入画布中。线程必须是 STA 才能创建这些形状。

我使用调度程序来更新文本框、进度条。他们都很好。

```
String txt = (String)Dispatcher.Invoke(DispatcherPriority.Send, (DispatcherOperationCallback)delegate { return labelStatus.Content; }, null); 
```

我可以正确获取标签内容。

但是，问题是我无法获得作为 UIElementCollection 的画布 Children。

所以，这个操作是不成功的。canvasChildren = (UIElementCollection)Dispatcher.Invoke(DispatcherPriority.Send, new gainChildrenDelegate(obtainChildren));

这也失败了

```
Dispatcher.BeginInvoke(DispatcherPriority.Send, new Action(() => canvas.Children.Add(node))); 
```

这里有什么问题？为什么能得到label控件，却不能得到canvas控件？

奇怪的是我可以在没有 Dispatcher 帮助的情况下直接使用 canvas.ActualHeight。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T22:09:06.267

您不能在另一个线程上修改 UIElement。

您也不能在线程 A 上创建 UIElement，并将其分配给线程 B 上的父级。

您必须创建元素并将其分配在与父级相同的线程上。

当我有一个后台线程创建一个画笔，然后将画笔分配给调用线程上的一个对象时，我遇到了同样的问题。

# c# - 使用局部视图加载 SignalR

> ID：11477932
> 
> 赞同：2
> 
> 时间：2012-07-13T20:30:06.953
> 
> 标签：c#, jquery, asp.net-mvc-3, partial-views, signalr

我最近关注了这个链接[http://www.kevgriffin.com/why-should-asp-net-developers-consider-signalr-for-all-projects/](http://www.kevgriffin.com/why-should-asp-net-developers-consider-signalr-for-all-projects/)开始在 ASP.NET MVC3 上使用 SignalR。

我想要做的是提供具有 SignalR 功能的部分视图。因此，当我使用 AJAX 加载局部视图时，我会在成功时调用以下函数：

```
function loadSuccess() {
    var chat = $.connection.chatHub;
    chat.writeMessage = function (msg) {
        $("#messages").append("<li>" + msg + "</li>");
    }

    $("#buttonSubmit").click(function () {
        chat.broadcastMessage($("#txtInput").val());
    });

    $.connection.hub.start();
} 
```

麻烦的是它似乎没有运行（在加载局部视图后插入一个`alert('hi')`just after`var chat = ...`不会导致对话框出现）。但是，如果我在加载包含视图的整个 DOM 后运行这段 JavaScript（即，尚未加载部分视图），则脚本运行得非常好。

有人知道我为什么遇到这个问题吗？

**编辑**：当然，这就是我所说的 loadSuccess ...

```
@Ajax.ActionLink("chat", "Index", "Chat", ChatOpts) 
```

...以及相应的`ChatOpts`：

```
AjaxOptions ChatOpts = new AjaxOptions
{
    UpdateTargetId = "placeholder",
    OnSuccess = "loadSuccess"
}; 
```

# php - Yii 框架：来自 MYSQL 的 JQuery 的 AJAX 调用返回平均值

> ID：11477934
> 
> 赞同：0
> 
> 时间：2012-07-13T20:30:12.997
> 
> 标签：php, jquery, mysql, ajax

大家好，我正在尝试获取在我的一个表单中输入的值，一个国家名称，并在我的数据库表中查询在国家列中具有相应国家的行。然后我想取这些行，并将这些行的某一列 std_rate 的值平均在一起。然后获取该值并动态更新我的表单中名为 PackagingMetric_std_rate 的另一个字段。这是我到目前为止所拥有的，但我无法让它发挥作用。我尝试了几种不同的方法，但似乎没有任何效果！

这是我的jQuery语句...

```
$('#country').bind('change',function() 
{
  var input_country = $('#country').val();

  $.ajax({
  type: 'POST',
  data: input_country,
  url: 'country_rate.php',

  success: function(data) {

  $('#PackagingMetric_std_rate').html(data);
    }

});

}); 
```

它应该调用这个文件，'country_rate.php'，它包含在与使用 Ajax 调用这个文件的表单相同的目录中。

```
<?php
$host = "localhost";
$user = "admin";
$password = "password"; 

$database = "myDatabase";

$country = $POST['input_country'];

$connection = mysql_connect($host,$user,$password);
$dbs = mysql_select_db($databaseName,$connection);

$query = mysql_query("SELECT AVG(std_rate)FROM packaging_metrics WHERE country like `$country` ");
$std_rate = mysql_fetch_row($query); 

$std_rate = json_encode($std_rate); 
```

当我的表格中的国家/地区发生变化时，我没有得到任何改变。没有错误，或任何东西。我的设置有问题吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T18:30:58.563

您的查询由于 $country 使用的 `` 引号而产生错误。使用单个 qoutes ' 为我解决了它。

# hibernate - 不了解 Hibernate 缓存使用策略

> ID：11477940
> 
> 赞同：0
> 
> 时间：2012-07-13T20:30:51.483
> 
> 标签：hibernate, hibernate-mapping

我有缓存使用问题，我有以下映射。无论出于何种原因，ST_CD 两次映射到 2 个不同的属性。休眠正在抛出

```
org.hibernate.MappingException: Repeated column in mapping for entity: my.package.State column: ST_CD (should be mapped with insert="false" update="false") 
```

我将缓存使用为“只读”，所以我猜插入和更新总是错误的；为什么我要明确地说 insert="false" update="false"？

```
<class mutable="false" name="my.package.State" table="STATE_TABLE">
    <cache usage="read-only" />
    <id name="id" column="ST_ID" type="long" />
    <property name="code" type="string" column="ST_CD" />
    <property name="stateAbbreviationCode" type="string" column="ST_CD"/>
    <!- Other properites -->
</class> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:38:31.290

它在映射中的问题，

最后两个属性中使用了相同的列（ST_CD）

```
<property name="code" type="string" column="ST_CD" />    
<property name="stateAbbreviationCode" type="string" column="ST_CD"/> 
```

正确的映射类似于，

```
<property name="code" type="string" column="ST_CD" />    
<property name="stateAbbreviationCode" type="string" column="ST_ABBR_CD"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T14:13:51.003

当你在休眠中创建一个实体时，**它应该准备好使用一个普通的 bean。无论您是否缓存，都无法通过多个属性更新数据库**。因此，您需要在其中一个属性上使用“insert="false" update="false"`。

# regex - IIRF 重写条件和重写规则

> ID：11477944
> 
> 赞同：1
> 
> 时间：2012-07-13T20:31:09.807
> 
> 标签：regex, url-rewriting, iirf

我正在用 PHP 重写一个 Coldfusion 站点。我刚刚开始了解 IIRF 以及它如何与 IIS 6 一起工作。出于测试目的，我需要一个重写条件来查找特定的 .cfm 文件并将它们重定向到相应的 .php 文件。然后，在重定向之后，我想删除文件扩展名 .php。我这样做是为了帮助建立索引并保持较高的 SEO 排名。我可以理解正则表达式，但不是专家，那么我将如何在我的 .ini 文件中编写它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:27:35.727

也许您只是用术语随意，但听起来您可能将 URL 重写与重定向混淆了。

听起来您想要一个请求*重定向*`path/page.cfm`到的用户，这将是您的新规范 URL。要做到这一点，您需要如下规则：*`path/page`*

 *```
RewriteRule (*).cfm $1 [R=301,L] 
```

此外，您希望新请求`path/page`由位于 的文件处理`path/page.php`。要做到这一点，您需要如下规则：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (*) $1.php [L] 
```*

# objective-c - 通过选择器比较两个字符串：意外结果

> ID：11477951
> 
> 赞同：1
> 
> 时间：2012-07-13T20:31:42.687
> 
> 标签：objective-c, automatic-ref-counting, selector

我正在做一个练习来学习如何在 Objective-C 中使用选择器。
在这段代码中，我试图比较两个字符串：

```
int main (int argc, const char * argv[])
{
    @autoreleasepool
    {
        SEL selector= @selector(caseInsensitiveCompare:);
        NSString* str1=@"hello";
        NSString* str2=@"hello";
        id result=[str1 performSelector: selector withObject: str2];
        NSLog(@"%d",[result boolValue]);
    }
    return 0;
} 
```

但它打印为零。为什么？

编辑：
如果我将 str2 更改为 @"hell"，我会得到一个 EXC_BAD_ACCESS。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T21:04:36.910

[`performSelector:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/performSelector%3a)状态文档*“对于返回对象以外的任何方法，请使用 NSInvocation”。*由于`caseInsensitiveCompare:`返回一个`NSInteger`而不是一个对象，您将需要创建一个[`NSInvocation`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsinvocation_Class/Reference/Reference.html)，这更复杂。

```
NSInteger returnVal;
SEL selector= @selector(caseInsensitiveCompare:);
NSString* str1=@"hello";
NSString* str2=@"hello";

NSMethodSignature *sig = [NSString instanceMethodSignatureForSelector:selector];
NSInvocation *invocation = [NSInvocation invocationWithMethodSignature:sig];
[invocation setTarget:str1];
[invocation setSelector:selector];
[invocation setArgument:&str2 atIndex:2]; //Index 0 and 1 are for self and _cmd
[invocation invoke];//Call the selector
[invocation getReturnValue:&returnVal];

NSLog(@"%ld", returnVal); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T21:02:07.063

尝试

```
NSString* str1=@"hello";
NSString* str2=@"hello";

if ([str1 caseInsensitiveCompare:str2] == NSOrderedSame)
            NSLog(@"%@==%@",str1,str2);
else
            NSLog(@"%@!=%@",str1,str2); 
```

# windows - 使用 Mercurial 在 Windows 上安装 django

> ID：11477957
> 
> 赞同：0
> 
> 时间：2012-07-13T20:31:51.077
> 
> 标签：windows, django, svn, mercurial, installation

我正在尝试使用的项目具有 django 导入，因此我正在尝试安装 django。

在 Windows 中。

我找到了有关如何安装它的说明[http://effbot.org/zone/django.htm#installing](http://effbot.org/zone/django.htm#installing) - 它需要从 svn 存储库中提取。

我安装了 Mercurial hg - 所以我不应该安装 svn - 并且[https://www.mercurial-scm.org/wiki/WorkingWithSubversion](https://www.mercurial-scm.org/wiki/WorkingWithSubversion)说我可以使用类似的命令

`svn co http://code.djangoproject.com/svn/django/trunk/django`.

但是，当我运行它时出现错误：

```
'svn' is not recognized as an internal or external command, operable program or batch file. 
```

那么，当我的系统上已经安装了 python27、sqlite、postgres 和 Mercurial 时，我该怎么做才能在 Windows 上安装 django？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T20:39:20.430

您指出的文档已过时。你不需要也不需要`svn`安装`hg`Django。我建议阅读官方安装文档[https://docs.djangoproject.com/en/1.4/intro/install/](https://docs.djangoproject.com/en/1.4/intro/install/)并使用稳定版本而不是查看最新代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T20:47:15.460

`'svn' is not recognized as an internal or external command`表示`svn`未安装或在您的`SYSTEM PATH`.

确保`svn`您使用的任何工具已正确安装并且在您的系统路径中，然后继续[django 安装](https://docs.djangoproject.com/en/1.4/topics/install/)。

# javascript - jquery检查是否选中了asp复选框

> ID：11477959
> 
> 赞同：9
> 
> 时间：2012-07-13T20:31:54.823
> 
> 标签：javascript, jquery, asp.net

大家好，我有一个复选框，我想在回发发生之前检查它是否在客户端被选中。这是复选框：

```
 <asp:CheckBox runat="server" CssClass="checkbox" Checked="true" ID="checkboxRules" /> 
```

提前致谢， Laziale

更新：问题是页面上也有一个由 js 代码触发的按钮，也许我可以在那里添加一行以检查单击按钮后是否选中了复选框，否则显示未选中复选框的消息：

函数 enterClick() { $('#SUBMIT').click(); }

```
var ishown = false;
$(document).ready(function () {
    $('#BUTTON').click(function (e) { 
```

//我想把复选框逻辑放在这里

再次感谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-13T20:37:23.290

尝试...

```
if ($('#<%= checkboxRules.ClientID %>').is(':checked')) {
...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T20:38:33.953

由于它是一个服务器端的复选框，它会在 ASP.NET 处理完控件后向客户端发送类似于`<input type="checkbox" class="checkbox" />`HTML 的内容。

复选框的 id 不会是 checkboxRules，因为您在源代码中拥有它。ASP.NET 将连接服务器端表单 id + 母版页 id（如果使用母版页）+ checkboxRules，所以在这种情况下，我不会使用依赖于元素 id 的选择器。

我们可以使 jQuery 选择器尽可能地窄，只选择具有“复选框”类型和 CSS 类“复选框”的输入。

```
$('input[type=checkbox] .checkbox').attr('checked') 
```

将返回输入检查状态的布尔值。这将在页面上找到带有该 CSS 类的复选框的任何输入。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-13T20:35:59.310

假设您的复选框是页面上唯一具有复选框类的项目：

```
var checked = $(".checkbox").is(':checked') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-16T17:37:43.380

```
if($("[id$='checkbox_ID']").prop('checked')) //Result: true or false
{
 // your code here
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-04T10:24:53.687

将数据属性添加到您的复选框并使用 jQuery 提供的“hasClass”函数。如下所示：

```
var isChecked = $('[data-checkbox]').hasClass('checkbox-selected');
```

```
<asp:CheckBox data-checkbox="" Text="Some Caption" runat="server" />
```

# java - 为什么当我添加“RunWith”注释时 Spring Autowire 停止工作？

> ID：11477965
> 
> 赞同：10
> 
> 时间：2012-07-13T20:32:42.873
> 
> 标签：java, spring, mocking, mockito, powermock

一旦我添加了`RunWith`注释，那就是`@RunWith(PowerMockRunner.class)`Spring Autowire 不再工作了！

```
class B {  
  @Autowire  
  SessionFactory session;
}

@RunWith(PowerMockRunner.class)  
@PrepareForTest{SomeClass.class}

class Testing {  

  @Test
  methodA(){  
    //mehod 
  }

  @Test
  methodD(){  
  }    
} 
```

现在，方法 A 调用了类 B，但由于`RunWith(PowerMockRunner)`注释，自动装配不起作用。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-02-03T09:52:53.257

在 2016 年，您可以将运行器委托与 PowerMockito 一起使用，有效地使用两个运行器：

```
@RunWith(PowerMockRunner.class)
@PowerMockRunnerDelegate(SpringJUnit4ClassRunner.class) 
```

更多细节在这里：[https ://github.com/jayway/powermock/wiki/JUnit_Delegating_Runner](https://github.com/jayway/powermock/wiki/JUnit_Delegating_Runner)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T13:20:27.387

春天并不神奇（即使有时看起来很像）。在您的代码中，您没有让 spring 有机会启动应用程序上下文并完成自动连接 bean 的工作。您需要自己启动上下文或将测试切换为使用`@RunWith(SpringJUnit4ClassRunner.class)`. 不幸的是，JUnit 一次只支持一个运行器，因此您需要停止使用 PowerMockRunner。

# css - Firefox Inspector - 如何从 RGB 更改为 HEX 彩色显示？

> ID：11477966
> 
> 赞同：0
> 
> 时间：2012-07-13T20:32:42.230
> 
> 标签：css, firefox, hex, rgb, inspector

> **可能重复：**
> [停止 Firefox 以 rgb() 形式呈现内联颜色](https://stackoverflow.com/questions/1987645/stop-firefox-rendering-inline-colours-in-rgb-form)

在 Firefox 13 (Mac) 中使用 Inspector 时，它会以 (stoopid) RGB 显示所有 CSS 颜色值。有没有办法强制它仅以 HEX 显示颜色值？我在任何地方都找不到有关此问题的任何信息，但我很难相信我是唯一遇到此问题的人。谢谢！

# node.js - 我可以在 Heroku 托管的 node.js 应用程序中使用 New Relic 吗？如果没有，什么是监控的好选择？

> ID：11477967
> 
> 赞同：11
> 
> 时间：2012-07-13T20:32:42.857
> 
> 标签：node.js, heroku, monitoring

我还没有看到它在任何地方都没有明确说明我不能将 New Relic 与 node.js 一起使用，只是没有太多提及它正在完成。感谢您的任何反馈！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T21:00:21.400

New Relic 在我们的雷达上支持 Node.js，无论是托管在 Heroku 还是其他地方。支持尚未准备好迎接黄金时段。当一切准备就绪时，我们将确保发出大量噪音。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T14:49:39.163

Node.JS 的 Newrelic 代理目前处于测试阶段，官方支持应该很快就会公布。您可以在这里获得代理：

[https://npmjs.org/package/newrelic](https://npmjs.org/package/newrelic)

# python - python - representing boolean expressions with lists

> ID：11477977
> 
> 赞同：4
> 
> 时间：2012-07-13T20:33:40.267
> 
> 标签：python, algorithm, list, boolean

I'm trying to represent boolean expressions in sum of products form(SOP) in Python with only lists.

For example, I have boolean expression

```
ABC+DE(FG+IH) 
```

I need to find a list equivalent of the expression above, so by reading the list or nested list and following certain rules to read the list, the program/programmer reading the list will be able to convert it back to the boolean expression.

One way I thought of doing this is constructing nested lists. Two rules to follow:

1.  elements in the same list are ANDed together
2.  lists are parallel to each other, therfore ORed together.

So for the example above, it will translate to:

```
[[A,B,C],[D,E,[[F,G],[I,H]]]] 
```

But this set of rules conflicts itself in some cases. For example, given [[E,F],[D,C]], it can either mean EF+DC or EFDC, as [E,F] and [D,C] are in the same list so they should be anded, but lists are parallel so they should be ORed too.

I feel like I need to set some precedence between the 2 rules above, or add another rule to make it more clear.

Any thoughts or suggestions are welcome. Also it's not homework, just something for fun. Thanks in advance!!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T20:47:23.050

Why lists and not trees?

```
OR = 0
AND = 1

class OpNode:
   def __init__(self, op, left, right):
       self.op = op
       self.left = left
       self.right = right

class LeafNode:
    def __init__(self, name, value):
       self.name = name
       self.value = value

A = LeafNode("A", True)
B = LeafNode("B", True)

exp = OpNode(OR, A, OpNode(AND, B, 
                                OpNode(OR, 
                                          LeafNode("C", False), 
                                          LeafNode("D", True)))) 
```

exp would be the equivalent of `A+B(C+D)`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-13T21:13:16.203

You could go the LISPy route and have the first item in each list be the operator. For example, the expression you gave

```
ABC+DE(FG+IH) 
```

would become

```
['or', ['and', A, B, C], ['and', D, E, ['or', ['and', F, G], ['and', I, H]]]] 
```

Which is pretty readable, considering. Cheers!

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T22:40:37.613

You could have the outermost list mean "OR all direct entries", then swap the meaning of nested lists between OR and AND direct entries. If you count levels of nesting from the outermost being 1 then the terms in odd levels of nesting should be OR'd and the terms in even levels of nesting should be AND'd together.

So `ABC+DE(FG+IH)`

Becomes `[[A,B,C],[D,E,[[F,G],[I,H]]]]`

**Here's some Python code:**

It returns an expression from the list form:

```
def to_bool(lst, depth=0, or_them=True):
    if type(lst) == str:
        return lst
    else:
        partial = ( '+' if or_them else ''
                  ).join( to_bool(x, depth+1, not or_them) for x in lst)
        if or_them and depth > 0:
            # Mixture of variables and sublists so parenthesize
            return '(' + partial + ')'
        else:
            return partial

def main():
    A,B,C,D,E,F,G,H,I = 'ABCDEFGHI'
    e = [[A,B,C],[D,E,[[F,G],[I,H]]]]
    print('The list form of the boolean expression:', e)
    print('The boolean expression:', to_bool(e))

if __name__ == '__main__':
    main() 
```

Its output:

```
The list form of the boolean expression: [['A', 'B', 'C'], ['D', 'E', [['F', 'G'], ['I', 'H']]]]
The boolean expression: ABC+DE(FG+IH) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T20:49:34.587

I think that you can add an additional rule that when the basic elements beside the comma are lists, then they are `ORed` together. Hence, you will not get this conflicted interpretation.

Therefore `[A,B]` has both elements as singletons, so they and `ANDed`, but `[[A,B],[C,D]]` has `ANDs` between singletons and `ORs` between lists, resulting in AB+CD.

In a way, that means that your `rule #2` has precedence over `rule #1`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T20:51:18.440

Use lists for AND, tuples for OR.

# javascript - 为什么这些 JSONP 请求中的随机数会失败？

> ID：11477982
> 
> 赞同：0
> 
> 时间：2012-07-13T20:34:09.513
> 
> 标签：javascript, ajax, jquery, jsonp

我有一个 jQuery`each`循环，它遍历三个`JSONP`url 的列表，但是，其中的随机数只是失败并出现错误：`Uncaught TypeError: Property 'callback' of object [object Window] is not a function`.

通常是一两个，有时没有，但绝不是全部，我认为它与异步部分有关，但我不知道如何解决。

这是我的代码：

```
var feeds = ["JSONPUrl", "JSONPUrl", "JSONPUrl"];

$.each(feeds, function(index, feedUrl) {
    $.ajax({
    type: "GET",
    url: feedUrl,
    processData : true,
    data: {
        tagmode: "any",
        jsonp: "callback",
        callback: "callback"
    },
    jsonpCallback: "callback",
    dataType: "jsonp",
    success: function(data) {
        // Do some DOM manipulations with the data
    },
    error: function(x,y,z) {
    }
});
});​ 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T21:02:53.033

`?callback=callback`由于硬编码`callback`属性，您的 URL 看起来像。去掉这个，jQuery 将自动为 JSONP 回调定义具有随机名称的临时函数。

```
data: {
    tagmode: "any",
    jsonp: "callback",     // <-- Do not forget to remove the trailing comma
    callback: "callback"   // <-- Remove this!
},
jsonpCallback: "callback", // <-- Remove this! 
```

如果您真的想执行一个调用`callback`成功的函数，请将其包含在`success`处理程序中。

关于评论：如果您的服务器期望 JSONP 回调参数被称为“jsonp”而不是“回调”，请使用：

```
$.ajax({
    ...
    jsonp: "jsonp"
    ...
});
// results in http://..../?jsonp=jQuery234254342random2342etc 
```

# ajax - json 上的 Ajax 数据过滤器，它实际上是 xml

> ID：11477985
> 
> 赞同：2
> 
> 时间：2012-07-13T20:34:17.943
> 
> 标签：ajax, jsonp

我正在使用 ajax 进行 GET，使用 dataType jsonp 从另一个我不拥有且无法更改的域上的服务器中引入一个小的 xml 文件。除 jsonp 之外的任何数据类型都失败，并显示“Access-Control-Allow-Origin 不允许使用 Origin localhost。很好。

问题是当我说它是 jsonp 时服务器返回相同的 xml 响应，而 jQuery 似乎不喜欢这样。dataFilter 似乎没有帮助，因为当我引用返回的数据时，我得到一个“Uncaught SyntaxError：Unexpected token <”错误。也许还有其他方法可以使用 dataFilter 设置？

我的代码复制如下：

```
$(document).ready(function(){  
  $.ajax({
    type: "GET",  
    url: "https://b2b.firstenergycorp.com/invoke/ ... very long url... ",  
    dataType: "jsonp",
    dataFilter: function(data, type){
      if(type == "xml") alert("returned xml!");
      var newdata = data.replace(/</g, '{');   // Firebug complains about this
      newdata = newdata.replace(/>/g, '}');
      return newdata;
    },
    jsonp: "callback",
    jsonpCallback: "jsonpcallback"
  });  
  function jsonpcallback(returndata) {
    alert( "data returned: " + returndata );
  };
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T23:22:43.523

答案来自另一个 stackoverflow 问题： [Jquery success function not fire using JSONP](https://stackoverflow.com/questions/2380551/jquery-success-function-not-firing-using-jsonp)

“......事后看来，解决方案可能应该比以前更明显，但您需要让网络响应直接写入响应流。简单地返回一串 JSON 是行不通的，您需要有人构建它并将其流回。

# objective-c - 视图层次结构

> ID：11477989
> 
> 赞同：0
> 
> 时间：2012-07-13T20:34:34.090
> 
> 标签：objective-c, uiview, uiscrollview, uiimageview

我的一个 xib 文件有一个滚动视图和一个图像视图。我在我的图像视图中添加按钮（因为我希望它们在缩放时缩放），但是当我单击它们时没有任何反应。我相当确定这是因为图像视图位于滚动视图中，所以我无法单击按钮。当我将按钮添加到滚动视图时，我可以单击它们，但是当我缩放时它们不会缩放。

我需要什么：当我放大和缩小时，我可以单击的按钮也会缩放。

我认为我需要做的：添加另一个视图来放置按钮。

我不知道的：我的观点的层次应该是什么，以满足我的需求。

我应该补充一点，我在代码中完成了所有这些（而不是在 IB 中）。

* * *

编辑：图像视图在滚动视图内

![在此处输入图像描述](../Images/3d97ca855656c0bce47d9de12d20b447.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T20:44:25.447

好吧，我所做的是将 UIView 作为 UIScrollView 中唯一的东西。然后这成为了它的内容。

这些内容是可缩放的。该 uiview 中的任何内容也会缩放。这应该包括任何按钮、任何图像视图或任何其他控件。然后在滚动视图上设置 contentSize 和 contentOffset 以设置它应该滚动的“内容”的大小。

我的滚动视图有一个 UIView 作为内容，因此我分别使用 frame.size 和 frame.origin 来启动滚动视图。

我的 UIView 与 UIScrollview 大小相同，并以灵活的高度和宽度固定在边缘。

这是我使用的滚动视图的图像。

![在此处输入图像描述](../Images/a1fcdf5295aa8bfabaa8071ad965ea09.png)

如您所见，滚动视图中只有一项。其他一切都在其中。

我在 Player View Scroll Contents 中也有标签。但那移动的计时器显示有什么意义......

**编辑**

这是我用于 viewForZoomingInScrollView 的代码：

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView{
    if (scrollView == self.playerScrollView){
        return self.playerViewScrollContents;
    }
    else if (scrollView == self.playerScrollView2){
        return self.playerView2ScrollContents;
    }
    return nil;
} 
```

如您所见，我的项目有 2 个滚动视图和 2 个内容。每个滚动视图一个。

# java - 如何强制 WebSphere AS 8 使用特定的 JSF 实现？

> ID：11477995
> 
> 赞同：4
> 
> 时间：2012-07-13T20:35:18.017
> 
> 标签：java, jsp, jsf, websphere, myfaces

我有一个使用 WAS 6.1 开发的旧企业应用程序，现在我的公司正在尝试在 WAS 8 中执行该应用程序的实现。但是我在呈现 JSF 内容时遇到了麻烦，点击 JS 调试器时有一些链接说 `Uncaught ReferenceError: myfaces is not defined` 作为呈现的 HTML：

```
onclick="return myfaces.oam.submitForm('top_nav:frmTopNav','top_nav:frmTopNav:lnkCP',null,[['default_sort','name']]);"

```

所以我认为它渲染得不好，因为我的旧应用程序和 WAS 8 之间的 JSF 版本不同。

现在我决定强制它，用 Tomahawk 1.1.7 下载 MyFaces 1.1 并将它们放在 WEB-INF/lib 文件夹中，现在它说`java.lang.IllegalArgumentException - Class org.mything.LocaleViewHandler is no javax.faces.application.ViewHandler`

为什么会发生这种情况？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T23:28:55.790

引自 WAS 8 infocenter，[配置 JavaServer Faces 实现](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r0/index.jsp?topic=/com.ibm.websphere.nd.multiplatform.doc/info/ae/ae/tweb_jsf.html&resultof=%22third%22%20%22party%22%20%22parti%22%20%22JSF%22%20%22jsf%22%20)

> 如果您想使用产品未附带的第三方 JSF 实现，那么：
> 
> *   将配置设置为 MyFaces。
> *   将第三方侦听器添加到所需的 web.xml 文件中。
> *   将第三方实现 Java 归档 (JAR) 文件作为隔离共享库添加到应用程序，并将其与您的应用程序关联。

在上面引用的页面上，您可以找到有关[创建共享库](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r0/index.jsp?topic=/com.ibm.websphere.nd.multiplatform.doc/info/ae/ae/tcws_sharedlib_create.html)和[将共享库与应用程序或模块关联](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r0/index.jsp?topic=/com.ibm.websphere.nd.multiplatform.doc/info/ae/ae/tcws_sharedlib_app.html)的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T22:18:04.410

确保您使用的是[PARENT_LAST](http://publib.boulder.ibm.com/infocenter/iseries/v5r3/index.jsp?topic=%2Frzatz%2F51%2Fprogram%2Fclsadmcns.htm)类加载。

否则它将首先加载自己的 JSF 2.0 库，并且您的类与接口不匹配。您应该检查是否可以更新到 MyFaces 2.0。

# python - 在Python中的字符串中按数字顺序查找最长的字符串

> ID：11477998
> 
> 赞同：1
> 
> 时间：2012-07-13T20:35:28.020
> 
> 标签：python, algorithm, python-2.7

我有一个包含数千个数字的字符串。我需要遍历字符串并找到按数字顺序排列的最长字符集。例如：

```
string = '1223123341223455' 
```

该字符串中按数字顺序排列的最长字符串为 1223455，长度为 7 个字符。这是我目前拥有的示例：

```
r=r2=''
a=b=0
 while a < len(string)+1:
    if string[a] <= string[b]:
        r += string[a]
    else:
        if len(r) < len(r2):
            r = r2
    a += 1
    b += 1 
```

有了这个，它告诉我字符串索引超出了行的范围：

```
if string[a] <= string[b] 
```

这是我的逻辑：检查第一个数字是否小于或等于第二个数字。如果是，这两个数字是按数字顺序排列的。将第一个数字添加到空字符串。继续这样做，直到遇到第一个数字大于第二个数字的点。达到这一点后，将您拥有的内容保存为字符串并从上次中断的地方继续，除了这次将您累积的数字连接到不同的字符串。得到两串数字后，比较两者并取较大的一个。继续此操作，直到您处理完字符串。我希望这是有道理的，有点难以解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T20:39:44.707

字符串的索引为 0。因此，如果您尝试访问`some_str[len(some_str)]`，您将得到一个，`IndexError`因为该字符串的最高索引是`len(some_str) - 1`. 将您的条件更改`while`为：`while a < len(myString):`。此外，您不应将`string`其用作变量，因为它可能会掩盖 python`string`模块名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T20:41:54.967

问题是你增加`a`了太多次。因此，当 a 等于字符串 ( `a = 16`) 的长度时，程序会中断。将您的第 3 行更改为`while a < len(string):`应该修复它。

另外，我不太确定你在用你的变量做什么。您声明了从未使用过的 r1，并且您在未声明的情况下使用了 r2。这个问题比你的方法更容易解决 - 下面的代码似乎可以满足你的要求：

```
>>> r=longest=''
>>> for a in range(1:len(string)):
        if (string[a-1] <= string[a]) or len(r)==0:
            r += string[a]
        else:
        r = string[a]       // We need to reset r if the string is not in numerical order
        if len(r) > len(longest):
            longest = r
        a += 1
>>> longest
'1223455' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T07:17:03.050

首先确保你有几件事要测试和预期的结果，包括边界情况。

```
strings = {
    '1223123341223455': '1223455',  # at the end
    '1': '1',                       # just one
    '12321': '123',                 # at the start
    '212321': '123',                # in the middle
    '': '',                         # empty
    '123234': '123',                # two of same length, take the first
    '12231233412234552': '1223455', # at the end -1 testing the try 
```

}

然后搜索最长的字符串*，而不*将到目前为止找到的实际字符附加到某个临时字符串。那是低效的。您只需要知道最长字符串的起始索引及其长度：

```
def longest(s):
    max_start = 0
    this_start = 0
    max_length_minus_one = 0
    for x in range(len(s)-1):
        if s[x] > s[x+1]:
            length_found = x - this_start
            if length_found > max_length_minus_one:
                max_length_minus_one = length_found
                max_start = this_start
            this_start = x + 1
    try:
        # test the final string position
        length_found = x + 1 - this_start
        if length_found > max_length_minus_one:
            max_length_minus_one = length_found
            max_start = this_start
    except UnboundLocalError:
        pass # empty string throws this exception
    return s[max_start:max_start+max_length_minus_one+1] 
```

现在在测试用例上运行它并检查输出：

```
for s, check in strings.iteritems():
    res = longest(s)
    print repr(s), repr(res), 'OK' if res == check else '<<<<< ERROR' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T20:45:32.147

```
string = '1223123341223455'

longest = ''
r = ''

for i in range(len(string)):
    j = i+1
    r += string[i]

    if j > len(string)-1 or string[i] > string[j]:
        if len(r) > len(longest):
            longest = r
            r = ''

print longest # 1223455 
```