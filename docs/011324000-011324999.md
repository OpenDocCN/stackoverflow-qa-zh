# StackOverflow 问答 11324000-11324999

# ios - 如何将 2012-07-04T00:16:12Z 转换为本地 yyyy-MM-dd HH:mm

> ID：11324000
> 
> 赞同：-3
> 
> 时间：2012-07-04T07:04:05.560
> 
> 标签：ios, datetime

我有一个方法：

```
- (NSString *)intervalSinceNow: (NSString *) theDate 
{

NSDateFormatter *date=[[NSDateFormatter alloc] init];
[date setDateFormat:@"yyyy-MM-dd HH:mm "];
NSDate *d=[date dateFromString:theDate];

NSTimeInterval late=[d timeIntervalSince1970]*1;

NSDate* dat = [NSDate dateWithTimeIntervalSinceNow:0];
NSTimeInterval now=[dat timeIntervalSince1970]*1;
NSString *timeString=@"";

NSTimeInterval cha=now-late;

if (cha/3600<1) {
    timeString = [NSString stringWithFormat:@"%f", cha/60];
    timeString = [timeString substringToIndex:timeString.length-7];
    timeString=[NSString stringWithFormat:@"%@m before", timeString];

}
if (cha/3600>1&&cha/86400<1) {
    timeString = [NSString stringWithFormat:@"%f", cha/3600];
    timeString = [timeString substringToIndex:timeString.length-7];
    timeString=[NSString stringWithFormat:@"%@ hour before", timeString];
}
if (cha/86400>1)
{
    timeString = [NSString stringWithFormat:@"%f", cha/86400];
    timeString = [timeString substringToIndex:timeString.length-7];
    timeString=[NSString stringWithFormat:@"%@ day before", timeString];

}

return timeString;
} 
```

当我打电话给 intervalSinceNow(2012-07-04T00:16:12Z) 前一天给我 15525，如何解决，谢谢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T07:19:59.323

最好不要尝试自己进行这些计算。您不知道本地用户正在使用什么日历系统等等。

在系统上执行所需操作的步骤如下： - 将 ISO8601 日期时间转换为 NSDate 的实例 - 在用户的区域设置和本地时区中显示 NSDate

这些步骤可以通过使用两个`NSDateFormatter`对象来完成。一个设置将日期时间字符串转换为 NSDate 并为 Zulu 配置，另一个设置为用户当前区域设置和时区的日期格式。默认`NSDateFormatter`对象已针对用户的当前设置进行了配置。

您需要在代码中做的所有事情都是这样的：

```
- (NSString*)localDateStringForISODateTimeString:(NSString*)ISOString
{
  // Configure the ISO formatter
  NSDateFormatter* isoDateFormatter = [[NSDateFormatter alloc] init];
  [isoDateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss'Z'"];
  [isoDateFormatter setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"UTC"]];

  // Configure user local formatter (configure this for how you want
  // your user to see the date string)
  NSDateFormatter* userFormatter = [[NSDateFormatter alloc] init];
  [userFormatter setDateFormat:@"yyyy-MM-dd HH:mm"];

  // Convert the string -- this date can now also just be used
  // as the correct date object for other calculations and/or
  // comparisons
  NSDate* date = [isoDateFormatter dateFromString:ISOString];

  // Return the string in the user's locale and time zone
  return [userFormatter stringFromDate:date];
} 
```

如果您现在打印或显示从此处返回的字符串，您提供的示例字符串“2012-07-04T00:16:12Z”将为我（在纽约）显示为“2012-07-03 20:16”，使用上面的代码。

编辑：我应该注意，上面的代码假设一个 ARC 环境。如果您不使用 ARC，`autorelease`请在创建两个日期格式化程序时添加消息，否则它们将被泄露。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T07:16:01.783

```
NSDateFormatter *date=[[NSDateFormatter alloc] init];
[date setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss'Z' "];
NSDate *d=[date dateFromString:theDate];
NSTimeInterval late=[d timeIntervalSinceNow]; 
```

像这样修改这些行，然后重试

# c++ - 矢量调整大小/分配不添加默认值

> ID：11324001
> 
> 赞同：1
> 
> 时间：2012-07-04T07:04:06.053
> 
> 标签：c++, vector, constructor

我有一个类，它有一个字符串向量作为变量和一个构造函数，它接受输入来设置这个向量的大小。唯一的问题是向量中的元素根本没有设置默认值。这里有什么问题？尝试了调整大小和分配，但每次都以空白结束。

班级：

```
#include <iostream>
#include <vector>
#include <string>
using namespace std;

class Lab
{
private:
    vector<string> station;
    int id;

public:
    Lab()
    {
        station[0] = "Empty";
        id = 0;
    };
    Lab(int ID, int size)
    {
        station.assign(size, "Empty");
        id = ID;
    };
    Lab(const Lab& labcpy)
    {
        station.resize(labcpy.station.size());
        id = labcpy.id;
    }; 
```

设置向量大小的主要位置：

```
#include <fstream>
#include "lab.h"
using namespace std;
int main(int argc, char* argv[])
{
    ifstream labnumber_file(argv[1]);
    vector<Lab> lab_v;

    int labnum;
    int usernum;
    while(!labnumber_file.eof())
    {
        labnumber_file >> labnum;
        labnumber_file >> usernum;

        lab_v.push_back(Lab(labnum, usernum));
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T07:13:13.450

问题是`push_back`使用您的复制构造函数，但您的复制构造函数不会将任何内容复制到`station`.

由于您的数据成员可以安全复制，因此只需使用默认的复制构造函数。删除您定义的复制构造函数。

三者的规则是，如果需要定义析构函数，还需要定义复制构造函数和赋值运算符。但是，由于您不需要定义析构函数，因此该规则不适用于`Lab`该类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T07:35:26.180

您不会在复制构造函数中复制任何内容，您只需调整向量的大小`station`而不将任何值复制到其中。只需使用带有作为参数`station`的复制构造函数。`labcpy.station`但是您知道吗，无论如何您都不需要实现任何复制构造函数，因为编译器生成的构造函数在这里可以完美运行（因为它只是复制`station`and `id`）。

而且您的默认构造函数也会调用未定义的行为，因为您`station[0]`无需`station`任何元素即可访问。

最后但并非最不重要的一点是，您应该使用初始化列表，而不是先进行默认构造，然后再进行赋值。（并且不要在函数定义之后放置分号。）

```
class Lab
{
private:
    vector<string> station;
    int id;

public:
    Lab()
        : station(1, "Empty"), id(0)
    {
    }
    Lab(int ID, int size)
        : station(size, "Empty"), id(ID)
    {
    }
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T07:21:20.163

代替：

```
station.resize(labcpy.station.size()); 
```

和

```
station = labcpy.station; 
```

在您的复制构造函数中。您只是分配空间，而不是复制数据。只需使用向量的赋值运算符来复制数据。它还将处理重新调整大小。

附带说明：您可能希望避免使用数组运算符 []，因为它们不进行边界检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T07:13:22.593

首先

```
 Lab(const Lab& labcpy)
    {
         station.resize(labcpy.station.size());
         id = labcpy.id;
    }; 
```

在这里您调整向量的大小，但您不向其中添加任何值。因此，如果您使用它来复制默认构造`Lab`，您只会更改大小，但不会将任何字符串值分配给新元素（可能只是初始化为空字符串）。其次，您还应该实现一个赋值运算符

# java - 使用 httppost 将文件上传到 apache 服务器

> ID：11324006
> 
> 赞同：0
> 
> 时间：2012-07-04T07:04:21.727
> 
> 标签：java, android, apache, apache-httpcomponents

我目前正在尝试从 AVD 将文件/图像上传到我的 apache 服务器。执行代码时没有出现任何错误，但图像未上传到服务器。我已经更改了 apache 服务器上文件夹的权限，该文件夹 `http://10.0.2.2/images`可由其他用户写入和编辑。我遇到了这个问题，请帮忙。跟随是我的代码

此代码获取图像并解码为位图。

```
 bmp = BitmapFactory.decodeFile(filePath); 
```

以下是我运行以将文件上传到服务器的代码

```
ByteArrayOutputStream bos = new ByteArrayOutputStream();
Bitmap tmpbmp = bmp;
tmpbmp.compress(CompressFormat.JPEG, 75, bos);
byte[] data = bos.toByteArray();
HttpClient httpClient = new DefaultHttpClient();
HttpPost postRequest = new HttpPost(url);
ByteArrayBody bab = new ByteArrayBody(data, "test.jpg");
MultipartEntity reqEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
reqEntity.addPart("uploaded", bab);
reqEntity.addPart("photoCaption", new StringBody("aaaa"));
postRequest.setEntity(reqEntity);
HttpResponse httpResponse = httpClient.execute(postRequest);
BufferedReader reader = new BufferedReader(new  InputStreamReader(httpResponse.getEntity().getContent(), "UTF-8"));
String sResponse;
StringBuilder s = new StringBuilder();

            while ((sResponse = reader.readLine()) != null) {
                s = s.append(sResponse);
            }

            Log.i("wi", "Response: " + s);

        } catch (UnsupportedEncodingException e) {
            // TODO Auto-generated catch block
            Log.i("wi", "Encoding failed: " + e);
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            Log.i("wi", "client protocol exception!: " + e);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            Log.i("wi", "IO Exception!: " + e);
        } 
```

我收到了来自 Log.i("wi", "Response: " + s); 的回复 =

```
 Response: <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN"><html> <head>  
<title>Index of /images</title> </head> <body><h1>Index of /images</h1><ul><li><a 
href="/"> Parent Directory</a></li></ul></body></html> 
```

它没有上传文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T07:31:57.090

我正在使用**Apache 的 commons-net-ftp 库将我的**歌曲文件上传到服务器……我正在给你代码……尝试使用这个……

```
 import java.io.File;

    import java.io.FileInputStream;

    import java.io.IOException;

    import org.apache.commons.net.ftp.FTP;

    import org.apache.commons.net.ftp.FTPClient;

    import android.util.Log;

    public class MyOwn {

        public void goforIt(){

            FTPClient con = null;

            try
            {
                con = new FTPClient();
                con.connect("www.mysamle.net");                 // Its dummy Address

                if (con.login("uju495", "Stevejobs!!"))
                {
                    con.enterLocalPassiveMode();                   // Very Important

                    con.setFileType(FTP.BINARY_FILE_TYPE);        //  Very Important
                    String data = "/sdcard/Vivekm4a.m4a";

                    FileInputStream in = new FileInputStream(new File(data));
                    boolean result = con.storeFile("/Ads/Vivekm4a.m4a", in);
                    in.close();
                    if (result) Log.v("upload result", "succeeded");
                    con.logout();
                    con.disconnect();
                }
            }
            catch (Exception e)
            {
                e.printStackTrace();
            }   
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T07:19:53.707

似乎服务器正在返回目录列表。您需要编写服务器端脚本来接收文件。你做过吗？

这里有一个例子：

[http://getablogger.blogspot.fi/2008/01/android-how-to-post-file-to-php-server.html](http://getablogger.blogspot.fi/2008/01/android-how-to-post-file-to-php-server.html)

# java - 多点触控事件错误？

> ID：11324012
> 
> 赞同：0
> 
> 时间：2012-07-04T07:05:11.147
> 
> 标签：java, android

遇到一些错误，不知道该怎么办，请帮忙。

```
The method getX() in the type MotionEvent is not applicable for the arguments (int) 
The method getY() in the type MotionEvent is not applicable for the arguments (int) 
The method getX() in the type MotionEvent is not applicable for the arguments (int) 
The method getY() in the type MotionEvent is not applicable for the arguments (int) 
The method getPointerCount() is undefined for the type MotionEvent  
The method getPointerId(int) is undefined for the type MotionEvent  
ACTION_POINTER_DOWN cannot be resolved or is not a field    
The method getX() in the type MotionEvent is not applicable for the arguments (int) 
The method getY() in the type MotionEvent is not applicable for the arguments (int) 
ACTION_POINTER_UP cannot be resolved or is not a field  MultiTouchHandler.java  
ACTION_MASK cannot be resolved or is not a field    
ACTION_POINTER_ID_MASK cannot be resolved or is not a field 
ACTION_POINTER_ID_SHIFT cannot be resolved or is not a field
The method getPointerId(int) is undefined for the type MotionEvent 
```

编码：

```
public boolean onTouch(View v, MotionEvent event) {  
    synchronized (this) {  
        int action = event.getAction() & MotionEvent.ACTION_MASK;  
        int pointerIndex = (event.getAction() & MotionEvent.ACTION_POINTER_ID_MASK) >>   MotionEvent.ACTION_POINTER_ID_SHIFT;  
        int pointerId = event.getPointerId(pointerIndex);   

        switch (action) {
        case MotionEvent.ACTION_DOWN:
        case MotionEvent.ACTION_POINTER_DOWN:
            touchEvent = touchEventPool.newObject();
            touchEvent.type = TouchEvent.TOUCH_DOWN;
            touchEvent.pointer = pointerId;
            touchEvent.x = touchX[pointerId] = (int) (event
                    .getX(pointerIndex) * scaleX);
            touchEvent.y = touchY[pointerId] = (int) (event
                    .getY(pointerIndex) * scaleY);
            isTouched[pointerId] = true;
            touchEventsBuffer.add(touchEvent);
            break;

        case MotionEvent.ACTION_UP:
        case MotionEvent.ACTION_POINTER_UP:
        case MotionEvent.ACTION_CANCEL:
            touchEvent = touchEventPool.newObject();
            touchEvent.type = TouchEvent.TOUCH_UP;
            touchEvent.pointer = pointerId;
            touchEvent.x = touchX[pointerId] = (int) (event
                    .getX(pointerIndex) * scaleX);
            touchEvent.y = touchY[pointerId] = (int) (event
                    .getY(pointerIndex) * scaleY);
            isTouched[pointerId] = false;
            touchEventsBuffer.add(touchEvent);
            break;

        case MotionEvent.ACTION_MOVE:
            int pointerCount = event.getPointerCount();
            for (int i = 0; i < pointerCount; i++) {
                pointerIndex = i;
                pointerId = event.getPointerId(pointerIndex);

                touchEvent = touchEventPool.newObject();
                touchEvent.type = TouchEvent.TOUCH_DRAGGED;
                touchEvent.pointer = pointerId;
                touchEvent.x = touchX[pointerId] = (int) (event
                        .getX(pointerIndex) * scaleX);
                touchEvent.y = touchY[pointerId] = (int) (event
                        .getY(pointerIndex) * scaleY);
                touchEventsBuffer.add(touchEvent);
            }
            break;
        }

        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:32:53.923

读取第一个错误：

```
The method getX() in the type MotionEvent is not applicable for the arguments (int) 
```

这表示不能使用 int 作为参数调用 MotionEvent 上的 getX()，即 getX(1)

在您的代码中，我可以看到：

```
touchEvent.x = touchX[pointerId] = (int) (event.getX(pointerIndex) * scaleX); 
```

如果您看到您正在调用 getX(pointerIndex)。这是一个编译错误。

如果您阅读其他错误并查看您的代码，您应该能够找到它们。

我的建议：获取一个 IDE（请参阅[我应该为 Android 应用程序使用哪个 Eclipse 版本？](https://stackoverflow.com/questions/3792306/which-eclipse-version-should-i-use-for-android-app)以帮助选择），所有这些问题都将以红色突出显示。

# iphone - 在标签栏中滑动手指手势

> ID：11324016
> 
> 赞同：0
> 
> 时间：2012-07-04T07:05:43.433
> 
> 标签：iphone, objective-c, ios5

在标签栏中，如果我在标签栏上单击，标签应该会读到一些引号。

同样，它应该识别这些触摸手势并在标签中显示文本：

1) 双击 2) 1 个手指：从上到下滑动。3) 2 指：标签向上滑动使用哪种方法以及如何使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:08:13.157

[UIGestureRecognizer](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIGestureRecognizer_Class/Reference/Reference.html)是挖掘的地方。

# delphi - 是否有技术原因不在 Delphi 中使用 TWebBrowser 来查看 Google 地球？

> ID：11324018
> 
> 赞同：8
> 
> 时间：2012-07-04T07:05:59.200
> 
> 标签：delphi, google-maps, twebbrowser

我确实希望这不会因为主观而被删除。唯一主观的部分可能是 1）我的 Delphi 比我的 PHP 好 2）我更喜欢编译到解释性编程语言。

但是，实际（非主观）问题是 - 如果我选择 Delphi 并使用 TWebBrowser（或类似机制）来查看/操作 Google 地球，我会以任何方式限制我的可用功能吗？

是否有一些我只能“在浏览器中”做而不能“在 VCL 浏览器组件中”做的事情？

[更新] 我忘了说 1）我只对 Windows 感到满意，2）谷歌地球功能只是一个更大的 APP 的一部分（对我来说，将该应用程序实现为 Delphi 程序比浏览器更容易）基于, 但这听起来又是主观的, 这就是为什么我从来没有提到它. 我会坚持“如果我选择 Delphi 并使用 TWebBrowser, 我会以任何方式限制我的可用功能吗?” 作为问题, 因为那可以得到答复。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T07:58:02.370

没有技术上的理由不使用`TWebBrowser`来显示地图或任何与此相关的东西。事实上，这是一个见仁见智的问题，你很可能已经听到人们的意见告诉你不要这样做。不幸的是，Stack Overflow 是一个问答网站，所以这样的问题不一定可行。

它`TWebBrowser`包含一个 Internet Explorer 浏览器窗口，并依赖于安装的任何版本的 IE。您可以在 Internet Explorer 中打开的任何内容也可以在`TWebBrowser`包括 Google 地球在内的 中打开。只需将其指向一个页面并加载它。至于技术原因，这里和那里可能会有一些小故障，但我不明白为什么不这样做。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-05T10:36:45.950

> 是否有一些我只能“在浏览器中”做而不能“在 VCL 浏览器组件中”做的事情？

简短的回答是，如果您完全了解 TWebBrowser（基于 IE）/ [DelphiChromiumEmbedded](http://code.google.com/p/delphichromiumembedded/)（Webkit），则不受限制。

我知道的两个主要浏览器是基于 TWebBrowser/IE 控件的 - [Avant Browser](http://www.avantbrowser.com/)（用 Delphi 编写）和 [Maxthon](http://www.maxthon.com/)（我都使用过，它们对我的服务很好，直到我完全切换到 FF） - 从来没有任何兼容性问题与它们（与 IE 应用程序相比）。

[TEmbeddedWB](http://www.bsalsa.com/intro.html)是一个很好的起点——这个包包装了 IWebBrowser 接口和控件库 (SHDOCVW.DLL)，允许您创建自定义的 Web 浏览应用程序。

Web 浏览器控件有一个非常重要的问题，它默认使用**IE 7**呈现模式。因此您需要为自己的应用程序指定 IE 呈现模式（[请参阅本文](http://www.west-wind.com/weblog/posts/2011/May/21/Web-Browser-Control-Specifying-the-IE-Version)）。还有其他问题，但其中大多数可以通过注册表`FeatureControl`项进行配置和自定义：

`HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Main\FeatureControl`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T10:19:07.990

是的，有一个 - Chromium Embedded Framework (CEF) 比 IE 具有更高的性能，尤其是在您的最终用户使用早期版本的 IE 的情况下。

CEF 基于谷歌的开源项目 Chromium。

我在[LIVEditor（我的新实时 html 编辑器）](http://liveditor.com)中使用 CEF，结果非常非常好！

但请注意，压缩后您必须分发额外的 20 MB 文件。

# sql - Sql server 2008，临时表是唯一的

> ID：11324021
> 
> 赞同：7
> 
> 时间：2012-07-04T07:06:06.833
> 
> 标签：sql, sql-server-2008, temp-tables

在我的服务器代码中，我创建了一个临时（名为#temp）表，插入一些数据，然后删除临时表。如果超过 1 个用户同时运行这部分代码（创建临时表），sql server 2008 会为每个用户创建一个临时表还是创建 1 个“全局”临时表？如果它是一个表，我认为当同一个表被多次创建时我会遇到麻烦？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T07:11:42.007

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms174979.aspx)：

> 您可以创建本地和全局临时表。本地临时表只在当前会话中可见，全局临时表对所有会话可见
> ……
> 如果在存储过程或应用程序中创建了一个本地临时表，可以由多个用户同时执行，则数据库引擎必须能够区分不同用户创建的表。数据库引擎通过在每个本地临时表名称内部附加一个数字后缀来实现此目的。存储在 tempdb 中 sysobjects 表中的临时表的全名由 CREATE TABLE 语句中指定的表名和系统生成的数字后缀组成。为允许后缀，为本地临时名称指定的 table_name 不能超过 116 个字符。

# c# - 基类中模板方法的用途是什么？

> ID：11324023
> 
> 赞同：5
> 
> 时间：2012-07-04T07:06:19.483
> 
> 标签：c#, base-class, template-method-pattern

好吧，我正在阅读MSDN 上[这篇](http://msdn.microsoft.com/en-us/library/dybz98h0%28VS.71%29.aspx)关于“*基类用法*”的优秀文章。虽然我了解基类和接口的概念，但我无法理解本文第二段（“**受保护的方法和构造函数**”）中模板方法的用法。

任何人都可以通过一个简单的实际示例帮助我理解这个概念吗？也许，了解模板方法的概念是一个很好的起点。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T07:43:38.600

在我看来，那是一篇很老的文章，不记得看到用 Impl 命名。

我认为维基百科有更好
的描述：模板方法用于：

*   让子类实现（通过方法覆盖）可以变化的行为

*   避免代码重复：一般工作流结构在抽象类的算法中实现一次，在每个子类中实现必要的变化。

*   控制在什么时候允许子类化。与简单的多态覆盖相反，其中基本方法将被完全重写，从而允许对工作流进行彻底更改，只允许更改工作流的特定细节。

作为应用模板模式的结果的控制结构（控制反转）通常被称为好莱坞原则：“不要打电话给我们，我们会打电话给你。” 利用这个原理，父类中的模板方法根据需要调用子类方法来控制整个流程。

简而言之，您在基类中定义骨架，而派生类实现实现之间的差异。

假设我们有信息，必须发布到不同的渠道。
所以我们创建了基类 Publisher，它具有如何做到这一点的骨架。
我们强制实现初始化，每个派生都会设置发布地址。
我们制作了适合大多数通道的发送实现，如果某些通道使用 ftp 而不是 http，我们让覆盖发送。
并且将所有通道的日志记录到 dababase 是相同的，因此我们不允许覆盖它。
只有发布对 Publisher 派生类的用户感兴趣，所以只有该方法是公共的。

```
public abstract class Publisher 
{
      private address;
      // if you wish to force implementation in derived class, make method abstract
      private abstract void Initialize();
      // if you wish optional implementation in derived class, make it virtual
      protected virtual void SendChangesToWeb() 
      {
         // ...
         webClient.Upload(address, data)
      }

      // if you wish that some step could not be changed from outside 
      private void LogSentChangesToDatabase() 
      {
         // ... save date time when was send and what was sent
      }

      // this sequence is the same for all derives, no point to duplicate 
      public void PublishUpdates() 
      {
           Initialize();
           SendChangesToWeb();
           LogSentChangesToDatabase();
      }
}

public class GooglePublisher : Publisher {
     private override Initialize() 
     {
         address = "http://www.google.com";
     }         
}

public class FtpPublisher : Publisher {
     private override Initialize() 
     {
         address = "ftp://test.com";
     }     

     protected override SendChangesToWeb() 
     {
        FtpClient.Upload(address, data)
     }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T07:34:30.667

这个想法是你有一个方法的多个公共重载，它们都在内部使用一个方法。因此，没有一个公共重载本身具有实现。相反，受保护的方法用于所有重载的实际实现。

因此，首先，您不要重复自己，因为您只有一次实现，所有具有默认值的重载只需通过设置一些默认值来调用实现。

现在在继承类时，派生类可以简单地覆盖内部实现*一次*，所有以前的公共重载将立即使用新的实现。因此，您可以使用标准实现在基类中指定公共接口，但允许派生类在遵守接口约定的同时更改该实现。

现在有人可能会争论为什么将实现放在一个单独的方法中，我真的不知道。相反，人们可以轻松地实现一个方法的最通用签名，并简单地让其他方法调用该方法而不是内部方法。使用单独方法的原因可能是您可以添加公共方法不可见的内部使用参数，但我想这取决于您想要做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T07:37:33.210

您可以搜索模板方法设计模式。这个模式包括一个模板方法，它提供了一个框架调用序列的方法。一个或多个步骤可以推迟到实现这些步骤的子类，而不改变整个调用顺序。例子：

```
// Template Method pattern -- Structural example

using System;

namespace DoFactory.GangOfFour.Template.Structural

{

  /// <summary>

  /// MainApp startup class for Real-World

      /// Template Design Pattern.

      /// </summary>

      class MainApp

  {

    /// <summary>

    /// Entry point into console application.

    /// </summary>

    static void Main()

    {

      AbstractClass aA = new ConcreteClassA();

      aA.TemplateMethod();

      AbstractClass aB = new ConcreteClassB();

      aB.TemplateMethod();

      // Wait for user

      Console.ReadKey();

    }

  }

  /// <summary>

  /// The 'AbstractClass' abstract class

  /// </summary>

  abstract class AbstractClass

  {

    public abstract void PrimitiveOperation1();

    public abstract void PrimitiveOperation2();

    // The "Template method"

    public void TemplateMethod()

    {

      PrimitiveOperation1();

      PrimitiveOperation2();

      Console.WriteLine("");

    }

  }

  /// <summary>

  /// A 'ConcreteClass' class

  /// </summary>

  class ConcreteClassA : AbstractClass

  {

    public override void PrimitiveOperation1()

    {

      Console.WriteLine("ConcreteClassA.PrimitiveOperation1()");

    }

    public override void PrimitiveOperation2()

    {

      Console.WriteLine("ConcreteClassA.PrimitiveOperation2()");

    }

  }

  /// <summary>

  /// A 'ConcreteClass' class

  /// </summary>

  class ConcreteClassB : AbstractClass

  {

    public override void PrimitiveOperation1()

    {

      Console.WriteLine("ConcreteClassB.PrimitiveOperation1()");

    }

    public override void PrimitiveOperation2()

    {

      Console.WriteLine("ConcreteClassB.PrimitiveOperation2()");

    }

  }

} 
```

参考：[模板方法设计模式](http://www.dofactory.com/Patterns/PatternTemplate.aspx#_self1)

# android - android开发工具包的问题

> ID：11324024
> 
> 赞同：0
> 
> 时间：2012-07-04T07:06:33.097
> 
> 标签：android, eclipse, eclipse-plugin

我在 Eclipse 中安装了 ADK（android 开发工具包）。安装对我来说很完美。当我尝试设置 SDK 路径时，我收到以下消息：

无法创建选定的首选项页面。自动激活捆绑包 com.android.ide.eclipse.adt 时出错 (1182)。

我已经安装了 5 次 adk，然后再次安装，结果相同。

以前我安装了一个较旧的 ADK 版本，但 Eclipse 告诉我更新我的 ADK 以开发 android 4.1。

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:27:25.363

您的 Eclipse 安装是否包含 JDT（用于 Java 编辑）和 WST（用于 XML 编辑）的必要部分？从你的更新故事中我猜是这样，但只是确保。

您是在 64 位版本的 Windows 上还是在 Linux 上并使用非 Sun JRE？在这两种情况下，您都可能会遇到 ADT 使用的密钥库的问题。您可能想在 Windows 上尝试 32 位 JRE 或在 Linux 上尝试 Sun6 JRE。

除此之外，您能否打开错误日志视图，从您的帖子中搜索带有错误消息的条目并双击它。然后它应该显示一个堆栈跟踪，更详细地指示 Eclipse 代码中出了什么问题。如果您有更多具有相同时间戳（+/- 1 秒）的错误条目直接低于或高于该条目，那么这些条目也可能很有趣。

最后一件事：您确定 Eclipse 本身是在合理的新 Java 版本上执行的吗？（如果在 Java 1.4 上运行，一些旧版本的 ADT 会损坏）。您可以在“关于”对话框中进行检查。

# outlook - 如何查看我们在 Outlook 软件的收件人地址栏中的那些电子邮件

> ID：11324028
> 
> 赞同：0
> 
> 时间：2012-07-04T07:07:02.900
> 
> 标签：outlook, outlook-2007

我每天都会收到大量的电子邮件，我想知道有什么方法可以过滤那些我在 TO 地址栏中的电子邮件吗？不是那些我在CC地址栏中的吗？

我们可以在outlook中编写任何代码来做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:26:17.900

我的问题有答案，但我不知道为什么它被删除。顺便说一句，为此我们需要创建规则。这很简单，只需转到菜单中的 RULE 并选择：将消息从某人移动到文件夹，然后您可以指定您的姓名是否在将邮件移动到其他地方。

# python - 在 64 位机器上使用 32 位 Windows 机器构建的内存泄漏运行应用程序

> ID：11324037
> 
> 赞同：0
> 
> 时间：2012-07-04T07:08:01.403
> 
> 标签：python, memory-leaks

我们有一个应用程序（exe），它的内存使用量在 64 位 Windows 上逐渐增加，但在 32 位机器上它在一定限度内保持稳定。

该产品基于 32 位 Windows XP 构建。

```
------------------------Memory usage
Client Start - 24092 K
After 24hrs  - 81584 K

Windows XP - 32bit
-----------------------Memory usage
Client Start - 10598 K
After 24hrs  - 28548 K 
```

1）所以我的问题是：由于在**64 位机器上运行****32 位**应用程序，内存使用量会增加吗？

 **2）我是否必须使用**64 位 python为****64 位**Windows单独构建？这会有帮助吗？

 **3）代码中一定有内存泄漏？****

# android - 是否可以在不使用任何第三方库的情况下在 phonegap 中进行推送通知？

> ID：11324040
> 
> 赞同：1
> 
> 时间：2012-07-04T07:08:07.593
> 
> 标签：android, ios, cordova, push-notification

我是 phonegap 应用程序开发的新手，我想在我的 phonegap 应用程序中使用推送通知我知道可以使用一些第三方库在 phonegap 应用程序中使用推送通知，从这里我知道了。[在 iOS 的 PhoneGap 上接收推送通知](https://stackoverflow.com/questions/5884468/receiving-push-notification-on-phonegap-for-ios)

但我的疑问是我想知道是否可以在不使用第三方库的情况下在 phonegap 应用程序中使用推送通知？我用谷歌搜索了它，但找不到解决方案，我希望有人能对这个问题有所帮助，提前感谢 Aamirkhan i。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:15:39.623

我不了解 Android（跨平台问题可能是人们转向第三方解决方案的原因......），但在 iOS 上，您只需要一个插件和您自己的 APN 服务器。

插件：[https ://github.com/phonegap/phonegap-plugins/tree/master/iOS/PushNotification](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/PushNotification)

对于服务器，一种方法可能是使用以下资源之一将其设置在像 Heroku 这样的免费服务上：

1.  [https://github.com/esilverberg/Heroku-APNS](https://github.com/esilverberg/Heroku-APNS)
2.  [http://orderoo.wordpress.com/2012/03/01/apple-push-notifications-on-heroku-using-node-js-8/](http://orderoo.wordpress.com/2012/03/01/apple-push-notifications-on-heroku-using-node-js-8/)

ETC

# javascript - 使用 RaphaelJS 翻转形状

> ID：11324046
> 
> 赞同：1
> 
> 时间：2012-07-04T07:08:22.600
> 
> 标签：javascript, raphael

我已经用 RaphelJS 创建了一个 Hexagon，但是我找不到一个关于如何翻转 Hexagon 的简单易用的教程。

这是当前的六边形创建代码：

```
function polygon(x, y, size, sides, rotate) {
var self = this;

self.centrePoint = [x,y];
self.size = size;
self.sides = sides;
self.rotated = rotate;
self.sizeMultiplier = 50;

self.points = [];

for (i = 0; i < sides; i++) {
    self.points.push([(x + (self.size * self.sizeMultiplier) * (rotate ? Math.sin(2 * 3.14159265 * i / sides) : Math.cos(2 * 3.14159265 * i / sides))), (y + (self.size * self.sizeMultiplier) * (rotate ? Math.cos(2 * 3.14159265 * i / sides) : Math.sin(2 * 3.14159265 * i / sides)))]);
}

self.svgString = 'M' + self.points.join(' ') + ' L Z';
}

$(document).ready(function() {
var paper = Raphael(0, 0, 450, 450);

var path1 = new polygon(100, 100, 2, 6, false);
var path2 = new polygon(205, 187, 1, 6, false);
var path3 = new polygon(100, 277, 2, 6, false);

var hex1 = paper.path(path1.svgString);
var hex2 = paper.path(path2.svgString);
var hex3 = paper.path(path3.svgString);

hex1.node.id = "hex1";
hex1.attr("fill", "#ccc");
hex1.attr("stroke", "#aceace");
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T07:34:29.653

你希望如何翻转六边形？如果您只想水平或垂直翻转，可以使用[缩放](http://raphaeljs.com/reference.html#Element.scale)功能。文档是这样列出的：

```
Element.scale(sx, sy, [cx], [cy]) 
```

并且您可以插入负数`sx`（水平翻转）或`sy`（垂直翻转）。由于您希望六边形保持相同大小，请使用`-1`以下任一值：

```
hex1.scale(1,-1, 0, 0); 
```

**更新**：显然该`scale`功能已被弃用，因此您应该改用该`transform`功能，并记住在缩放后调整平移（或围绕六边形的中心缩放）。所以代码看起来像这样（有 500 毫秒的缓和效果）：

```
hex1.animate({transform: "S-1,1"},500,'easeOut'); 
```

或者

```
hex1.transform("S-1,1") 
```

没有动画效果。

# c# - 如何使用 RegEx 提取 Skype 帐户

> ID：11324048
> 
> 赞同：1
> 
> 时间：2012-07-04T07:08:28.023
> 
> 标签：c#, regex

我需要从字符串数组中提取一个 Skype 帐户。它们出现在字符串中的单词“skype:”之后。所以我需要使用正则表达式提取它们的方法。看起来我需要类似的东西： string RegexPattern = @"skype:\s*(\w*)"; 但是，当此正则表达式与 . （点）像 P.Revenko.Sokolniki 它只返回第一个字母（在这种情况下为 P），并且它必须是 P.Revenko.Sokolniki。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T07:10:31.890

**编辑：**使用这个：

```
skype:\s*(?<account>[\w.]*) 
```

并像这样获取名为*帐户*的组：

```
String skypeAccount = Regex.Match(inputString, @"skype:\s*(?<account>(\w|\.)*)").Groups["account"].Value; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T07:21:24.377

如果它们都由分号分隔，则不需要正则表达式。

但是，使用 Regex 的解决方案如下：

```
string pattern = "(?<=skype:\s*)(?<account>[^\s]+)"; 
```

### 解释

```
(?<=skype:\s*)    --look behind for an instance of "skype:" followed by any number of spaces
(?<account>       --named capture group called "account
    [^\s]+        --match any character that is not a space, and do it at least once.
)                 --group closure 
```

但是，正如我之前所说，RegEx 确实不需要，您可以简单地使用少量字符串操作。

```
string rawSkype = "skype: example1 ; skype: example2.com";
string[] skypeNames = Array.ConvertAll(rawSkype.Split(';'), 
                                       raw => raw.Replace("skype:", "").Trim()); 
```

这也很容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T07:20:01.747

你需要把\w\。放入方括号中

```
string c = "skype: P.Jon.Doe";

Regex ex = new Regex(@"^skype:\s*[\w\.]*");

if (ex.IsMatch(c))
{
    Console.WriteLine(ex.Match(c).Value);
} 
```

# ruby-on-rails - 应用- .js 每次请求都会重新下载（优化缓存的提示）

> ID：11324052
> 
> 赞同：0
> 
> 时间：2012-07-04T07:08:44.737
> 
> 标签：ruby-on-rails, caching, deployment, nginx, unicorn

我只是意识到每次我更改页面时，我的 rails 应用程序上的 application.css & .js & fonts 文件总是会重新下载。这给服务器带来了相当大的负担并减慢了加载时间。

这里的任何人都可以向我推荐如何优化缓存，最好是我可以遵循的最佳实践，因为坦率地说，我在部署优化方面不是很有经验。

ps：我已经阅读并完成了[http://guides.rubyonrails.org/caching_with_rails.html](http://guides.rubyonrails.org/caching_with_rails.html)中的一些提示，但资产仍然会重新下载..

编辑：我的 nginx 配置

```
upstream example_com {
  server unix:/tmp/example_com.todo.sock fail_timeout=0;
}

server {
  listen 80;
  server_name example.com;

  root /var/www/example.com/current/public;
  try_files $uri/index.html $uri @example_com;

  location @example_com {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_pass http://example_com;
  }

  location ~ ^/assets/ {
    expires 1y;
    add_header Cache-Control public;

    add_header ETag "";
    break;
  }

  client_max_body_size 4G;
  keepalive_timeout 5;
  error_page 500 502 503 504 /500.html;

  access_log /var/www/example_com/shared/log/access.log main;
  error_log /var/www/example_com/shared/log/error.log info;
} 
```

缓存头，从萤火虫得到这个：

```
Response Headers From Cache
Cache-Control   max-age=31536000, public
Content-Encoding    gzip
Content-Type    application/x-javascript
Date    Wed, 04 Jul 2012 09:45:51 GMT
Expires Thu, 04 Jul 2013 09:45:51 GMT
Last-Modified   Wed, 04 Jul 2012 05:52:38 GMT
Server  nginx/1.2.1
Vary    Accept-Encoding 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:56:29.977

如果您正在编译资产（`rake assets:precompile`或部署到像 heroku 这样的环境），那么这些将只是静态文件，例如`application-8675309.....js`，应该由您的 Web 服务器提供。确保您使用的任何 Web 服务器都知道在您的 public/assets 目录中提供文件，而不是让这些请求通过 rails。请参阅[http://guides.rubyonrails.org/asset_pipeline.html#in-production](http://guides.rubyonrails.org/asset_pipeline.html#in-production)以获得一些示例服务器配置来完成此操作。

# android - 将 ImageView 传递给构造函数

> ID：11324053
> 
> 赞同：0
> 
> 时间：2012-07-04T07:08:56.823
> 
> 标签：android

从我的主要活动中，我想将 a 传递`ImageView`给另一个类的构造函数，或者如果你愿意，也可以传递给这个类的对象。下面的一些代码片段。

**课堂案例：**

```
public class Case {

String id; 
int status; 
Date date;
ImageView orginalFace;
ImageView profilePicture; 

public Case(String id, int status, Date date, ImageView orginalFace, ImageView profilePicture) {

    this.id= id;
    this.status = status;
    this.date = date;
    this.orginalFace= orginalFace;
    this.profilePicture= profilePicture; 

  }
} 
```

**这就是我尝试添加 ImageView 的地方：**

```
ArrayList<Case> cases = new ArrayList<Case>(); 

    Case case1 = new Case("991176565809", 1, new Date(), R.drawable.face, R.drawable.profile); 
```

当我尝试添加时，我知道这一点`R.drawable.face`，`R.drawable.profile`这只是`integers`. 我怎样才能正确地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T07:12:43.253

您可以像这样加载两个 ImageView：

```
ImageView faceImg = new ImageView(context);
faceImg.setImageResource(R.drawable.face);

ImageView profileImg = new ImageView(context);
profileImg.setImageResource(R.drawable.profile); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T07:15:44.027

要通过您的方法，`ImageView`您可以使用该`findViewById(int id)`方法。在你的情况下：

```
ArrayList<Case> cases = new ArrayList<Case>(); 

ImageView imageView1 = new ImageView(yourActivitysContext);
imageView1.setImageResource(R.drawable.face);

ImageView imageView2 = new ImageView(yourActivitysContext);
imageView2.setImageResource(R.drawable.profile);

Case case1 = new Case("991176565809", 1, new Date(), imageView1 , imageView2 ); 
```

但是我必须警告你，将你的 imageViews 存储在内存中并不是一个好习惯。

# c# - 如何启动正在运行的进程的标准输出

> ID：11324054
> 
> 赞同：1
> 
> 时间：2012-07-04T07:09:04.953
> 
> 标签：c#, stdout

我想在我的应用程序中显示正在运行的应用程序（我没有启动）的输出/我该怎么做？我尝试使用以下代码来做到这一点：

```
rocess[] aProc = Process.GetProcessesByName("processname"); 
 if (aProc.Length > 0)
       _Proc = aProc[0];
        _Proc.StartInfo.RedirectStandardOutput = true;
        _Proc.StandardOutput... 
```

但我收到一个异常“StandardOut 尚未重定向或该过程尚未开始。” 最好的方法是什么？谢谢！

# c# - 在 C# 中以另一种形式将数据添加到 datagridview？

> ID：11324058
> 
> 赞同：1
> 
> 时间：2012-07-04T07:09:18.980
> 
> 标签：c#, winforms, visual-c#-express-2010

好的，我有 2 个表格。form8 包含数据网格视图。第二个（form10）表单包含一个文本框和一个图片框。这是我试图用来传递数据的代码，但它不起作用。

```
 Form8 frm8;
    public Form10(Form8 frm8): this()
    {
        this.frm8 = frm8;
    }

    private void buttonX1_Click(object sender, EventArgs e)
    {
        try
        {
            int n = frm8.dataGridView1.Rows.Add();
            frm8.dataGridView1.Rows[n].Cells[0].Value = textBox1.Text;
            frm8.dataGridView1.Rows[n].Cells[1].Value = comboBox1.Text + "|" + textBox3.Text;
            frm8.dataGridView1.Rows[n].Cells[2].Value = pictureBox1.Image;
            this.Close();
        }
        catch { }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T07:15:31.547

请尝试刷新表单以获取结果。

```
frm8.dataGridView1.Invalidate(); 
```

或尝试 Application.DoEvents() 以刷新 UI 线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T07:13:45.357

最好创建一个来自 Form10 的事件，并在 form8 中注册该事件，以便在单击按钮时将数据传递给 form8。

您还应该对异常记录做一些事情，并坚持命名约定以使您的代码更具可读性

# c++ - LPCWST 不适用于 Unicode 字符集

> ID：11324060
> 
> 赞同：1
> 
> 时间：2012-07-04T07:09:21.113
> 
> 标签：c++, c

我有读取注册表项中的键的应用程序。

它的工作很好`Multi-Byte Character Set`

但是在`Unicode character set`它无法打开密钥

这是我的代码：

```
HKEY hkey = 0;
    char buf[255] = {0};
    DWORD dwType = 0;
    DWORD dwBufSize = sizeof(buf);
    const char* subkey_x64 = "SOFTWARE\\Wow6432Node\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\UCP";
    const char* subkey_x86 = "SOWTWARE\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\UCP";

    if (RegOpenKey(HKEY_LOCAL_MACHINE, (LPCWSTR)subkey_x64, &hkey) == ERROR_SUCCESS)
    {
        dwType = REG_SZ;
        if (RegQueryValueEx(hkey, (LPCWSTR)"DisplayIcon", 0, &dwType, (BYTE*)buf, &dwBufSize) == ERROR_SUCCESS)
        {
            cout << "Key Value IS: " << buf << endl;
        }
        else
        {
            cout << "Cannot get key value..." << endl << endl;
        }
    }
    else
    {
        cout << "Cannot open key\n" << endl << endl;
        RegCloseKey(HKEY_PERFORMANCE_DATA);
    } 
```

有人知道为什么它不能打开密钥吗？

(LPCWSTR) 不是好办法吗？

我正在使用视觉工作室 2010

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T07:11:19.550

`const char*`不是 Unicode 字符串。更改为`const wchar_t*`，您将不需要演员表。

使用强制转换，您说编译器将该地址解释为指向 Unicode 字符串的指针，但事实并非如此。

此外，当您声明 Unicode 字符串文字时，您应该使用`L`前缀：（`L"DisplayIcon"`同样不需要强制转换）。如果您的代码可以在 Unicode 和多字节上运行，您可以使用`TEXT()`宏来为您解决问题（或其短版本`_T()`）`_T("DisplayIcon")`：.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T07:11:52.157

`wchar_t*`通过将类型更改为并在文字前面加上前缀，使字符串文字成为宽字符串文字`L`：

```
const wchar_t* subkey_x64 =
   L"SOFTWARE\\Wow6432Node\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\UCP";
const wchar_t* subkey_x86 =
   L"SOWTWARE\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\UCP"; 
```

不需要在注册表函数调用中强制转换变量，并记住在任何其他字符串文字前加上`L`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T07:32:14.620

要回答实际问题，为什么当前代码不起作用：`RegOpenKey`并且是在 Unicode 版本和非Unicode 版本`RegQueryValueEx`中定义为`RegOpenKeyW`和的宏。这些是不同的功能。这些版本需要宽字符串。`RegQueryValueExW``RegOpenKeyA``RegQueryValueExA``W`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T07:13:25.290

您不能只区分大小写`const char *`，`LPCWSTR`因为这些是指向不同类型的指针。您需要将您转换`const char *`为`LPCWSTR`使用该`MultiByteToWideChar`功能，或者改为使用：

```
LPCWSTR subkey_x64 = TEXT("SOFTWARE\\Wow6432Node\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\UCP");
LPCWSTR subkey_x86 = TEXT("SOWTWARE\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\UCP"); 
```

# powershell - 尝试使用 powershell 从输出文本文件中获取有意义的数据

> ID：11324062
> 
> 赞同：-1
> 
> 时间：2012-07-04T07:09:25.230
> 
> 标签：powershell

我有一个如下所示的文本文件。请注意，我已将垃圾数据替换为“junkdata”。这只是目前对我没有用的数据，以及空白行。

```
junkdata 1

uid=1

junkdata 2
junkdata 3
junkdata 4

abc value1 def
pqr value1 kjks
sds value1 9982
asd value1 qwe

junkdata 5
junkdata 6
junkdata 7

uid=2

junkdata 8
junkdata 9
junkdata 10

aas value2 dg
sds value2 kwq
sdf value2 99wqa
gffs value2 ddg

junkdata11
junkdata12
junkdata13 
```

我希望使用 powershell 获取以下格式的数据：

```
value   uid 
-----   ---   
Value1   1
Value2   2 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:55:00.493

试试这个它应该可以工作。使用你的例子进行测试。

```
$FileListArray = @()
$FilesName = "c:\test\t1.txt"
    Foreach($file in Get-Content $FilesName | Where-Object {$_ -match "(uid\=\d)|(value\d)"})
    {
      IF($file -match "(value\d)")
        {$file = $file -replace "(.+)(value\d)(.+)",'$2' 
         $FileListArray += ,@($file)
        }

      Else{$FileListArray += ,@($file)}
    } 
$FileListArray 
```

# oracle - Oracle 中的 prvtmail.plb 问题

> ID：11324063
> 
> 赞同：1
> 
> 时间：2012-07-04T07:09:29.853
> 
> 标签：oracle, oracle11g

当我尝试在以下代码中运行时`Oracle 11g`，

```
@?/rdbms/admin/prvtmail.plb 
```

我得到了这个输出。

```
PACKAGE utl_mail_internal compiled
PACKAGE BODY utl_mail_internal compiled
GRANT succeeded.
PACKAGE BODY utl_mail compiled
219/59         PLS-00201: identifier 'UTL_TCP' must be declared
219/13         PL/SQL: Statement ignored
239/41         PLS-00201: identifier 'UTL_TCP' must be declared
237/17         PL/SQL: Statement ignored
255/39         PLS-00201: identifier 'UTL_TCP' must be declared
253/15         PL/SQL: Statement ignored
291/41         PLS-00201: identifier 'UTL_TCP' must be declared
289/9          PL/SQL: Statement ignored
317/5          PLS-00201: identifier 'SYS.UTL_MAIL_INTERNAL' must be declared
317/5          PL/SQL: Statement ignored
389/23         PLS-00201: identifier 'UTL_SMTP' must be declared
389/23         PL/SQL: Item ignored
390/39         PLS-00201: identifier 'UTL_TCP' must be declared
390/23         PL/SQL: Item ignored
427/9          PLS-00320: the declaration of the type of this expression is incomplete or malformed
427/9          PL/SQL: Statement ignored
443/19         PLS-00320: the declaration of the type of this expression is incomplete or malformed
443/5          PL/SQL: Statement ignored
444/19         PLS-00320: the declaration of the type of this expression is incomplete or malformed
444/5          PL/SQL: Statement ignored 
```

上面的输出有一些错误。我怎样才能避免这些错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:32:35.440

我能够通过执行代码来解决这个问题`sys`，而不是`system`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-17T13:22:43.523

以 sys 身份登录并尝试此操作

将 UTL_TCP 上的执行权限授予 PUBLIC

# qt - 从任何浏览器拖放到 Qt 应用程序 - 设置自定义 mime 类型数据

> ID：11324069
> 
> 赞同：0
> 
> 时间：2012-07-04T07:09:58.977
> 
> 标签：qt, drag-and-drop, mime-types

基本上，当我使用 javascript 从浏览器中拖动图像时，我正在设置自定义 mime 类型数据。比如说，mime 类型是`text/x-my`并且它的数据 = `My data`。

但是当我尝试在 Qt 中阅读它时（当你将图像从浏览器拖放到 Qt 窗口时）我没有`text/x-my`在 Qt 中获得自定义 mime 类型。但是，它记录了“<em>您可以在 Qt 中存储自定义 mime 类型数据”，请参阅`QMimeData`Doc。
现在，有趣的是，在 Qt 代码中，您可以设置和获取自定义 mime 数据，但 Qt 不会从 javascript 读取自定义 mime 数据集。

```
QString str = "my data";
QMimeData *mimeData = new QMimeData;
mimeData->setData("text/x-my", str.toAscii());

QByteArray data = mimeData->data("text/x-my");
QString myString(data); 
```

上面的 Qt 代码工作得很好。有人知道为什么 Qt 没有从 javascript 读取自定义 mime 类型集吗？

谢谢。

# deployment - 在 Heroku 上，不能查询某些表，甚至不能拉数据库

> ID：11324073
> 
> 赞同：0
> 
> 时间：2012-07-04T07:10:04.963
> 
> 标签：deployment, heroku

从今天晚上开始，我的网络应用程序开始无法正常工作。没有代码更改，但突然间我所有的请求都超时了。

起初我以为是 Heroku 的问题（他们在这开始发生的时候有过短暂的中断），所以我一直等到 Heroku 的状态恢复正常。但即使它回到正常页面后仍然无法加载。

我尝试重新推送代码，重新启动 heroku 等，但没有任何效果。基本上，当我执行“heroku restart”时，所有进程都会恢复，但是当我尝试访问该站点时，请求超时。以下是正在发生的事情的列表：

1.  heroku restart => 成功重启所有进程
2.  heroku run console => 可以成功连接。
3.  在 heroku 控制台上，尝试查询表 A => 有效。然而，另一个表 B 需要永远并超时。
4.  通过浏览器访问网页时，路由器成功接收到请求，但之后没有任何反应。

奇怪的是一个表的查询响应超时，但其余的它工作。我什至看不到桌子的样子，所以我不知道里面发生了什么。有人有这种经验吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:21:19.877

最近几天 Heroku 出现了一些共享数据库错误（如果您使用的是共享数据库）。您可以随时在[https://status.heroku.com/](https://status.heroku.com/)上查看 heroku（时间线）的状态。

最好的方法是询问 Heroku 支持，他们的反应非常敏捷和快速。

# c++ - 增强侵入性挂钩

> ID：11324081
> 
> 赞同：2
> 
> 时间：2012-07-04T07:10:30.317
> 
> 标签：c++, boost, hook

任何人都可以解释***增强侵入性挂钩的***概念吗？我不明白阅读文档 [http://www.boost.org/doc/libs/1_47_0/doc/html/intrusive.html](http://www.boost.org/doc/libs/1_47_0/doc/html/intrusive.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T08:04:20.550

Boost.intrusive 强制您提供有关要存储在侵入式容器中的对象的信息。

挂钩是向关联的侵入式容器提供所需信息的方式。为此，定义要存储的对象的类可以从挂钩继承或作为成员拥有它。

只要在编译时需要完全了解侵入式容器，就可以使用模板对钩子进行参数化，这会导致语法中的选项是模板类，关联的值是它的参数。

例如，您可以通过`link_mode`在模板参数列表中指定参数并设置其值来定义链接模式：

```
boost::intrusive::list< MyClass, boost::intrusive::link_mode< boost::intrusive::safe_link > > l; 
```

最后但同样重要的是，如果您的钩子包含非默认值，则必须将其作为模板参数传递给您使用的侵入式容器类。

例如考虑侵入性列表，这意味着替换

```
boost::intrusive::list<MyClass> l; 
```

经过

```
boost::intrusive::list<MyClass, MyHook> l; 
```

# email - Sugarcrm，无法发送活动电子邮件

> ID：11324084
> 
> 赞同：0
> 
> 时间：2012-07-04T07:10:37.860
> 
> 标签：email, sugarcrm

我正在使用 SugarCRM 6.5（来自升级版）并且无法发送任何活动电子邮件。测试电子邮件（“发送测试”）立即发送出去，但是当我选择“发送电子邮件”时，没有任何东西被发送，也没有在糖队列中排队。我正在尝试调试 3 天，任何输入将不胜感激。作业调度程序配置为每 10 分钟运行一次，cron 也是如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-09-06T07:53:04.207

检查 EmailManDelivery.php 文件。更改`$outboundEmailAccount->mail_sendtype) === 'smtp'`为`strtolower($outboundEmailAccount->mail_sendtype) === 'smtp')`. 它应该解决问题

# spring - 懒惰的集合急切地初始化（事务性+延迟加载）

> ID：11324085
> 
> 赞同：2
> 
> 时间：2012-07-04T07:10:46.710
> 
> 标签：spring, hibernate, lazy-loading, transactional

城市类映射到数据库。

```
@Entity
@Table(name = "City")
public class City implements Serializable, IRelationsQualifier
{
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private int id;
    //-------------------------------------------------------
    @JsonIgnore
    @NotFound(action = NotFoundAction.IGNORE)
    @ManyToMany(
            fetch = FetchType.LAZY,
            cascade = {CascadeType.MERGE,CascadeType.PERSIST,CascadeType.REFRESH},
            targetEntity = Event.class
        )
        @JoinTable(
               name="CityEvent",
               joinColumns = @JoinColumn( name="city_id"),
               inverseJoinColumns = @JoinColumn( name="event_id")
        )
    private Set<Event> eventList = new HashSet<Event>();

    public int getId()
    {
    return id;
    }
    public void setId(int id)
    {
    this.id = id;
    }

    @JsonIgnore
    public Set<Event> getEvents()
    {
    return eventList;
    }
    @JsonIgnore
    public void setEvents(Set<Event> events)
    {
    this.eventList = events;
    }

} 
```

道层为市。

```
package com.globerry.project.dao;
// removing imports to  make it easier to read   

@Repository
public class CityDao implements ICityDao
{

    @Autowired
    SessionFactory sessionFactory;
    @Autowired

    @Override
    public City getCityById(int id)
    {
    City city = (City) sessionFactory.getCurrentSession().load(City.class, id);
    return city;
    }
} 
```

测试：

```
package com.globerry.project.dao;
// removing time imports to make it easier to read.

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("classpath:/META-INF/spring/daoTestContext.xml")
@TestExecutionListeners({
    DependencyInjectionTestExecutionListener.class,
    DirtiesContextTestExecutionListener.class, ContextLoaderListener.class
})
public class CityDaoTest {

    @Test
    @Transactional(readOnly=false)
    public void LazyTest()
    {
        City city1 = new City();
        city1.setName("Bobryjsk1");
        try
        {
        cityDao.addCity(city1);
        }
        catch (MySqlException e) 
        {
        e.printStackTrace(System.err);
        }
        Event ev = new Event();
        ev.setName("Disnayland");
        eventDao.addEvent(ev, city1);
        ev = new Event();
        ev.setName("Disnayland5");
        eventDao.addEvent(ev, city1);
        System.err.println("1");
        city1 = cityDao.getCityById(city1.getId());//there i saw in debug that events have been already inizialized 
        System.err.println("2");
        System.err.println(Hibernate.isInitialized(city1.getEvents()));//returns true
        Iterator<Event> it = city1.getEvents().iterator();
        System.err.println("3");
        ev = it.next();
        System.err.println(ev.getName());
        ev = new Event();
        ev.setName("Disnayland55");
        eventDao.addEvent(ev, city1);
    }

} 
```

根上下文：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:jdbc="http://www.springframework.org/schema/jdbc"
    xsi:schemaLocation="
        http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <!-- <jdbc:embedded-database id="dataSource" type="H2"/> -->
    <context:annotation-config />
    <context:component-scan base-package="com.globerry.project.domain" />
    <context:component-scan base-package="com.globerry.project.dao" /> 
    <context:component-scan base-package="com.globerry.project.service" />

        <!-- Файл с настройками ресурсов для работы с данными (Data Access Resources) -->
        <tx:annotation-driven transaction-manager="transactionManager" /> 
    <!-- Менеджер транзакций -->

    <!-- Настройки бина dataSource будем хранить в отдельном файле -->
  <bean id="propertyConfigurer"
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
        p:location="classpath:/META-INF/jdbc.properties" />

    <!-- Непосредственно бин dataSource -->
    <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource"
        p:driverClassName="com.mysql.jdbc.Driver" 
        p:url="${jdbc.databaseurl}"
        p:username="${jdbc.username}" 
        p:password="${jdbc.password}" />

    <!-- Настройки фабрики сессий Хибернейта -->
    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean"
        p:packagesToScan="com.globerry.project.Dao">

        <property name="dataSource" ref="dataSource" />
        <property name="configLocation">
            <value>classpath:hibernate.cfg.xml</value>
        </property>
        <property name="configurationClass">
            <value>org.hibernate.cfg.AnnotationConfiguration</value>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.transaction.factory_class">org.hibernate.transaction.JDBCTransactionFactory</prop> 
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLInnoDBDialect</prop>
                <prop key="hibernate.connection.charSet">UTF-8</prop>
            </props>
        </property>
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager"
          p:sessionFactory-ref="sessionFactory">
        <qualifier value="transactionManager"/>
    </bean>
</beans> 
```

当我在调试模式下的“LazyTest()”中使用方法“getCityById()”时，我得到了奇怪的结果。在调试中，我看到我的事件集合在我第一次使用它之前已经初始化。但我正在使用延迟获取策略。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:05:38.363

那是因为它已经在会话中。Load 返回您刚刚创建的 City 对象，而不是从数据库中获取它。

在 getCityById 调用之前添加以下代码 - 您将获得预期的结果。

```
sessionFactory.getCurrentSession().flush()
sessionFactory.getCurrentSession().clear() 
```

# android - 如何在我的活动中捕获图像并保存在图像视图中？

> ID：11324086
> 
> 赞同：3
> 
> 时间：2012-07-04T07:10:47.750
> 
> 标签：android, android-layout

我有一个活动 A，其中有一个按钮和一个图像视图。当我单击按钮时，它应该加载相机并将图像保存在图像视图中。任何人都可以为此提供代码。

提前致谢 ！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T07:22:01.997

请参阅下面的代码..它可能会对您有所帮助。

把这两行放在你的按钮点击..

```
Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
startActivityForResult(intent, 0); 
```

在您的代码中创建此方法..

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

         if (requestCode == 0 && resultCode == RESULT_OK) {
            if (data != null) {

                photo = (Bitmap) data.getExtras().get("data");

                add_image.setImageBitmap(photo); /* this is image view where you want to set image*/

                Log.d("camera ---- > ", "" + data.getExtras().get("data"));

            }
        }
    } 
```

..................................................... .........................................................

下面的代码为您提供相机拍摄的 LastImageID。这只是您想要孔图像的额外代码，然后它对您很有用。

..................................................... ...................................................

```
private String getLastImageId() {
        final String[] imageColumns = { MediaStore.Images.Media._ID,
                MediaStore.Images.Media.DATA };
        final String imageOrderBy = MediaStore.Images.Media._ID + " DESC";
        Cursor imageCursor = managedQuery(
                MediaStore.Images.Media.EXTERNAL_CONTENT_URI, imageColumns,
                null, null, imageOrderBy);
        if (imageCursor.moveToFirst()) {
            int id = imageCursor.getInt(imageCursor
                    .getColumnIndex(MediaStore.Images.Media._ID));
            String fullPath = imageCursor.getString(imageCursor
                    .getColumnIndex(MediaStore.Images.Media.DATA));

            imageCursor.close();
            return fullPath;
        } else {
            return "no path";
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T07:27:28.263

您可以创建一个方法来捕获图像并在按钮的 onClickListener 中调用它，如下所示：

```
 public void takePicture(View view){

    try{
    Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST);
    } catch(Exception e){
        e.printStackTrace();
    }
} 
```

然后像这样覆盖 onActivityResult 方法：

```
 @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    case CAMERA_PIC_REQUEST:

    String path=null;
            try{
                Bitmap thumbnail = (Bitmap) data.getExtras().get("data"); 
                thumbnail = Bitmap.createScaledBitmap(thumbnail,yourDesiredImageWidth, yourDesiredImageHeight, true);
                ImageView imageView = (ImageView) findViewById(R.id.yourImageView);  
                image.setImageBitmap(thumbnail);
                break;
            }catch(Exception ee){
                ee.printStackTrace();
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T07:33:52.710

您的活动代码

```
public class MainActivity extends Activity {
    /** Called when the activity is first created. */

    Button btnTakePhoto;
    ImageView imgTakenPhoto;
    private static final int CAM_REQUREST = 1313;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        btnTakePhoto = (Button) findViewById(R.id.button1);
        imgTakenPhoto = (ImageView) findViewById(R.id.imageView1);

        btnTakePhoto.setOnClickListener(new btnTakePhotoClicker());
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);

          if (requestCode == CAMERA_PIC_REQUEST && resultCode == RESULT_OK) {

                  if (data != null) {
              Bitmap thumbnail = (Bitmap) data.getExtras().get("data");
              imgTakenPhoto.setImageBitmap(thumbnail);
                  }
          }
    }

    class btnTakePhotoClicker implements Button.OnClickListener
    {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST);
        }
    }
} 
```

你的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Press the button, capture photo and enjoy!!"
        android:id="@+id/textview1"/>

    <Button
        android:text="Take Photo!"
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textview1">
    </Button>

    <ImageView
        android:id="@+id/imageView1"
        android:layout_height="match_parent"
        android:layout_width="match_parent"
        android:src="@drawable/icon"
        android:scaleType="centerCrop"
        android:layout_below="@+id/button1">
    </ImageView>
</RelativeLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T09:24:56.340

CemraImageActivity.java

```
public class CemraImageActivity extends Activity implements OnClickListener{
    private int CAMERA_REQUEST;
    private ImageView imageView;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);  

        this.imageView = (ImageView)this.findViewById(R.id.image_capture);
        imageView.setOnClickListener(this);           

    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        if(resultCode != 0)
        {
            if (requestCode == CAMERA_REQUEST) 
            {
                Bitmap photo = (Bitmap) data.getExtras().get("data");
                imageView.setImageBitmap(photo);        
            }
        }
    }

    public void onClick(View v) {
        // TODO Auto-generated method stub
        Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);  
        startActivityForResult(cameraIntent, CAMERA_REQUEST); 
    }  
} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="334dp"
        android:layout_height="wrap_content"
        android:text="Click this image for take a photo"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <ImageView
        android:id="@+id/image_capture"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.06"
        android:src="@drawable/ic_launcher" />

</LinearLayout> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-19T07:15:24.387

获取单击按钮并在 imageview 中设置商店图像的非常简单的方法。

> `公共类 MainActivity 扩展 Activity {

```
private static final int CAMERA_PIC_REQUEST = 22;

Uri cameraUri;

Button BtnSelectImage;
private ImageView ImgPhoto;
private String Camerapath ;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ImgPhoto = (ImageView) findViewById(R.id.imageView1);

    BtnSelectImage = (Button) findViewById(R.id.button1);
    BtnSelectImage.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View view) {
            // TODO Auto-generated method stub
            try {
                   Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                   startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST);
            } catch (Exception e) {
                Toast.makeText(getApplicationContext(), "Couldn't load photo", Toast.LENGTH_LONG).show();
            }
        }
    });

}

@Override
public void onActivityResult(final int requestCode, int resultCode, Intent data) {
    try {
        switch (requestCode) {
       case CAMERA_PIC_REQUEST:
            if (resultCode == RESULT_OK) {
                try {
                      Bitmap photo = (Bitmap) data.getExtras().get("data"); 

                      ImgPhoto.setImageBitmap(photo);    

                } catch (Exception e) {
                    Toast.makeText(this, "Couldn't load photo", Toast.LENGTH_LONG).show();
                }
            }
            break;
          default:
            break;
        }
    } catch (Exception e) {
    }
} 
```

}`

设置此清单。

> `<uses-permission android:name="android.permission.CAMERA" /> <uses-feature android:name="android.hardware.camera" android:required="false"></uses-feature>`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-04T07:20:26.023

尝试如下：

**STEP 1：**启动相机拍照：

```
Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
startActivityForResult(cameraIntent, 2); 
```

**第 2 步：**从`onActivityResult`数据中获取图像

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
        if (requestCode == CAMERA_REQUEST) {  
            Bitmap photo = (Bitmap) data.getExtras().get("data"); 
            ImageView imageView=(ImageView) findViewbyId(R.id.imgv);
            imageView.setImageBitmap(photo);
        } 
```

**编辑：**第二个解决方案：

```
 Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);  
 intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(new File(Environment.getExternalStorageDirectory(), "temp.jpg")));  
 startActivityForResult(intent, 2);  

 @Override  
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
        if (resultCode == NONE)  
            return;  
        if (requestCode == 2) {   
            File picture = new File(Environment.getExternalStorageDirectory() + "/temp.jpg");  
            ImageView imgView=(ImageView)findViewById(R.id.imgView);
            Uri imgUri=Uri.fromFile(picture);
            imageView.setImageURI(imgUri);  
        }  
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-12-01T08:08:45.570

> 在 mainactivity.java 中执行此操作后，您需要在清单中执行此操作

```
public class MainActivity extends Activity {
    Button button;
    ImageView photo;
    static final int Cam_Request = 1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        button = (Button)findViewById(R.id.btnPhoto);
        photo = (ImageView)findViewById(R.id.ivPhoto);
        button.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent camera_intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                File file = getFile();
                camera_intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(file));
                startActivityForResult(camera_intent, Cam_Request);

            }
        });
    }
    private File getFile ()
    {
        File folder = new File("sdcard/camera_app");

        if(!folder.exists())
        {
            folder.mkdir();
        }

        File image = new File(folder,"image.jpg");
        return image;
    }
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        String path = "sdcard/camera_app/image.jpg";
        photo.setImageDrawable(Drawable.createFromPath(path));
    }
} 
```

# android - 读取 KML 文件并将其显示到谷歌地图中

> ID：11324089
> 
> 赞同：0
> 
> 时间：2012-07-04T07:11:02.133
> 
> 标签：android, google-maps, google-maps-api-3, kml, android-maps

我正在做一个地图应用程序 [读取 KML 文件并将其显示到谷歌地图中]，并且我正在使用本网站中已经讨论过的一个类。类如下所示。

我遇到了一些问题 1- R.layout.main >> 主中有错误
2- 也没有识别 dest[1] 和 dest[0]
3- 也没有识别出 drowpath 函数

我从这个链接获得了这个类[How to draw a path on a map using kml file?](https://stackoverflow.com/questions/3109158/how-to-draw-a-path-on-a-map-using-kml-file/11309413#11309413)

```
package com.test.map;

import com.test.map.R ; 
import java.net.URL;

import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;

import org.xml.sax.InputSource;
import org.xml.sax.XMLReader;

import android.R;
import android.content.Context;
import android.graphics.Color;
import android.graphics.drawable.Drawable;
import android.location.Location;
import android.location.LocationManager;
import android.os.Bundle;
import android.util.Log;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.OverlayItem;

 public class DirectionMapActivity extends MapActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    MapView mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);

    // Acquire a reference to the system Location Manager
    LocationManager locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);

    String locationProvider = LocationManager.NETWORK_PROVIDER;
    Location lastKnownLocation = locationManager.getLastKnownLocation(locationProvider);

    StringBuilder urlString = new StringBuilder();
    urlString.append("http://maps.google.com/maps?f=d&hl=en");
    urlString.append("&saddr=");//from
    urlString.append( Double.toString(lastKnownLocation.getLatitude() ));
    urlString.append(",");
    urlString.append( Double.toString(lastKnownLocation.getLongitude() ));
    urlString.append("&daddr=");//to
    urlString.append( Double.toString((double)dest[0]/1.0E6 ));
    urlString.append(",");
    urlString.append( Double.toString((double)dest[1]/1.0E6 ));
    urlString.append("&ie=UTF8&0&om=0&output=kml");

    try{
        // setup the url
        URL url = new URL(urlString.toString());
        // create the factory
        SAXParserFactory factory = SAXParserFactory.newInstance();
        // create a parser
        SAXParser parser = factory.newSAXParser();
        // create the reader (scanner)
        XMLReader xmlreader = parser.getXMLReader();
        // instantiate our handler
        NavigationSaxHandler navSaxHandler = new NavigationSaxHandler();
        // assign our handler
        xmlreader.setContentHandler(navSaxHandler);
        // get our data via the url class
        InputSource is = new InputSource(url.openStream());
        // perform the synchronous parse           
        xmlreader.parse(is);
        // get the results - should be a fully populated RSSFeed instance, or null on error
        NavigationDataSet ds = navSaxHandler.getParsedData();

        // draw path
        drawPath(ds, Color.parseColor("#add331"), mapView );

        // find boundary by using itemized overlay
        GeoPoint destPoint = new GeoPoint(dest[0],dest[1]);
        GeoPoint currentPoint = new GeoPoint( new Double(lastKnownLocation.getLatitude()*1E6).intValue()
                                            ,new Double(lastKnownLocation.getLongitude()*1E6).intValue() );

        Drawable dot = this.getResources().getDrawable(R.drawable.pixel);
        MapItemizedOverlay bgItemizedOverlay = new MapItemizedOverlay(dot,this);
        OverlayItem currentPixel = new OverlayItem(destPoint, null, null );
        OverlayItem destPixel = new OverlayItem(currentPoint, null, null );
        bgItemizedOverlay.addOverlay(currentPixel);
        bgItemizedOverlay.addOverlay(destPixel);

        // center and zoom in the map
        MapController mc = mapView.getController();
        mc.zoomToSpan(bgItemizedOverlay.getLatSpanE6()*2,bgItemizedOverlay.getLonSpanE6()*2);
        mc.animateTo(new GeoPoint(
                (currentPoint.getLatitudeE6() + destPoint.getLatitudeE6()) / 2
                , (currentPoint.getLongitudeE6() + destPoint.getLongitudeE6()) / 2));

    } catch(Exception e) {
        Log.d("DirectionMap","Exception parsing kml.");
    }

}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;

}
}
// and the rest of the methods in activity, e.g. drawPath() etc... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T04:46:24.717

以下是您的问题的一些答案：

**1** . 您可以将新的布局文件调整为您自己的。非常像这样的东西

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout_fragement_mapview"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/royal_blue"
    android:orientation="vertical" >

    <com.google.android.maps.MapView
        android:id="@+id/mapview"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:apiKey="@string/maps_api_key"
        android:clickable="true"
        android:enabled="true" />

</RelativeLayout> 
```

**2** . 在`dest[]`中，有 2 个常数，例如**：**

`int[] dest = new int[] { 42500000, 1950000 };`

只需将其作为类变量复制并粘贴到您的`DirectionMapActivty`

**3** . 这里是`drawPath()`. 您可以将其用作您的方法`DirectionMapActivity`或另一个类中的静态方法**：**

```
public abstract class Drawing {

   private static final String TAG = "Drawing";

   public static void drawPath(NavigationDataSet navSet, int color, MapView mMapView01) {

      Log.d(TAG, "map color before: " + color);

      // color correction for dining, make it darker
      if (color == Color.parseColor("#add331"))
         color = Color.parseColor("#6C8715");
      Log.d(TAG, "map color after: " + color);

      Collection overlaysToAddAgain = new ArrayList<Object>();
      for (Iterator<Overlay> iter = mMapView01.getOverlays().iterator(); iter.hasNext();) {
         Object o = iter.next();
         Log.d(TAG, "overlay type: " + o.getClass().getName());
         if (!RouteOverlay.class.getName().equals(o.getClass().getName())) {
            // mMapView01.getOverlays().remove(o);
            overlaysToAddAgain.add(o);
         }
      }
      mMapView01.getOverlays().clear();
      mMapView01.getOverlays().addAll(overlaysToAddAgain);

      String path = navSet.getRoutePlacemark().getCoordinates();
      Log.d(TAG, "path=" + path);
      if (path != null && path.trim().length() > 0) {
         String[] pairs = path.trim().split(" ");

         Log.d(TAG, "pairs.length=" + pairs.length);

         String[] lngLat = pairs[0].split(","); // lngLat[0]=longitude lngLat[1]=latitude
                                                // lngLat[2]=height

         Log.d(TAG, "lnglat =" + lngLat + ", length: " + lngLat.length);

         if (lngLat.length < 3)
            lngLat = pairs[1].split(","); // if first pair is not transferred completely, take
                                          // seconds pair //TODO

         try {
            GeoPoint startGP = new GeoPoint((int) (Double.parseDouble(lngLat[1]) * 1E6),
                  (int) (Double.parseDouble(lngLat[0]) * 1E6));
            mMapView01.getOverlays().add(new RouteOverlay(startGP, startGP, 1));
            GeoPoint gp1;
            GeoPoint gp2 = startGP;

            for (int i = 1; i < pairs.length; i++) // the last one would be crash
            {
               lngLat = pairs[i].split(",");

               gp1 = gp2;

               if (lngLat.length >= 2 && gp1.getLatitudeE6() > 0 && gp1.getLongitudeE6() > 0
                     && gp2.getLatitudeE6() > 0 && gp2.getLongitudeE6() > 0) {

                  // for GeoPoint, first:latitude, second:longitude
                  gp2 = new GeoPoint((int) (Double.parseDouble(lngLat[1]) * 1E6),
                        (int) (Double.parseDouble(lngLat[0]) * 1E6));

                  if (gp2.getLatitudeE6() != 22200000) {
                     mMapView01.getOverlays().add(new RouteOverlay(gp1, gp2, 2, color));
                     Log.d(TAG, "draw:" + gp1.getLatitudeE6() + "/" + gp1.getLongitudeE6() + " TO "
                           + gp2.getLatitudeE6() + "/" + gp2.getLongitudeE6());
                  }
               }
               // Log.d(myapp.APP,"pair:" + pairs[i]);
            }
            // routeOverlays.add(new RouteOverlay(gp2,gp2, 3));
            mMapView01.getOverlays().add(new RouteOverlay(gp2, gp2, 3));
         } catch (NumberFormatException e) {
            Log.e(TAG, "Cannot draw route.", e);
         }
      }
      // mMapView01.getOverlays().addAll(routeOverlays); // use the default color
      mMapView01.setEnabled(true);
   } 
```

我希望这会有所帮助。玩得开心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T05:30:22.710

带有参考[UseFull 链接](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/RfjZtuJPYPA)

尝试这个

```
Intent mapIntent = new Intent(Intent.ACTION_VIEW, uri);
Uri uri1 = Uri.parse("geo:0,0?q=http://code.google.com/apis/kml/
documentation/KML_Samples.kml");
mapIntent.setData(uri1);
startActivity(Intent.createChooser(mapIntent, "Sample Map ")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-04T06:39:25.993

```
try {
        String file = Environment.getExternalStorageDirectory().getPath() + "/campus.kml";
        String[] kmlfile = file.split("/");
        String kml=kmlfile[4];

            File myFile = new File(Environment.getExternalStorageDirectory().toString() + "/DCIM/Camera/campus");

           FileInputStream fIn = new FileInputStream(myFile);

         KmlLayer kmlLayer = new KmlLayer(mMap, fIn, getApplicationContext());

        KmlLayer kmlLayer = new KmlLayer(mMap, R.raw.campus, getApplicationContext());

        kmlLayer.addLayerToMap();
        moveCameraToKml(kmlLayer);
    } catch (IOException e) {
        e.printStackTrace();
    } catch (XmlPullParserException e) {
        e.printStackTrace();
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-04T06:34:27.963

```
public class KmlDemoActivity extends FragmentActivity {

    private GoogleMap mMap;
    private KmlLayer kmlLayer;
    private MarkerOptions markerOptions;
    private ArrayList<LatLng> arrayPoints = null;
    private int flag = 0;//which you draw Line=2 or Polygone=1

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_draw_route);

        int status = GooglePlayServicesUtil.isGooglePlayServicesAvailable(getBaseContext());

        if (status != ConnectionResult.SUCCESS) {
            int requestCode = 10;
            Dialog dialog = GooglePlayServicesUtil.getErrorDialog(status, this, requestCode);
            dialog.show();
        } else {
            SupportMapFragment fm = (SupportMapFragment) getSupportFragmentManager()
                    .findFragmentById(R.id.map);
            mMap = fm.getMap();

            if (ActivityCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {

                return;
            }
            mMap.setMyLocationEnabled(true);

            // Getting LocationManager object from System Service LOCATION_SERVICE
            LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);

            // Creating a criteria object to retrieve provider
            Criteria criteria = new Criteria();

            // Getting the name of the best provider
            String provider = locationManager.getBestProvider(criteria, true);

            // Getting Current Location
            Location location = locationManager.getLastKnownLocation(provider);

            if (location != null) {
                onLocationChanged(location);
            }
            retrieveFileFromResourceArea();

        }
    }

    private void retrieveFileFromResourceArea() {
        flag = 1;
        try {
            KmlLayer kmlLayer = new KmlLayer(mMap, R.raw.campus, getApplicationContext());

            kmlLayer.addLayerToMap();
            moveCameraToKml(kmlLayer);
        } catch (IOException e) {
            e.printStackTrace();
        } catch (XmlPullParserException e) {
            e.printStackTrace();
        }

        retrieveFileFromResourceLine();
    }

    private void retrieveFileFromResourceLine() {
        flag = 2;
        try {

            KmlLayer kmlLayer = new KmlLayer(mMap, R.raw.data, getApplicationContext());
            kmlLayer.addLayerToMap();
            moveCameraToKml(kmlLayer);
        } catch (IOException e) {
            e.printStackTrace();
        } catch (XmlPullParserException e) {
            e.printStackTrace();
        }

    }

    public void onLocationChanged(Location location) {

        // Getting latitude of the current location
        double latitude = location.getLatitude();

        // Getting longitude of the current location
        double longitude = location.getLongitude();

        // Creating a LatLng object for the current location
        LatLng latLng = new LatLng(latitude, longitude);

    }

    private void moveCameraToKml(KmlLayer kmlLayer) {

        KmlContainer container = kmlLayer.getContainers().iterator().next();

        container = container.getContainers().iterator().next();

        KmlPlacemark placemark = container.getPlacemarks().iterator().next();
        final LatLngBounds.Builder builder = new LatLngBounds.Builder();
        if (flag == 1) {
            KmlPolygon polygon = (KmlPolygon) placemark.getGeometry();

            for (LatLng latLng : polygon.getOuterBoundaryCoordinates()) {
                builder.include(latLng);
            }

        }
        if (flag == 2) {
            KmlLineString lineString = (KmlLineString) placemark.getGeometry();

            for (LatLng latLng : lineString.getGeometryObject()) {
                builder.include(latLng);
            }
        }

        mMap.setOnMapLoadedCallback(new GoogleMap.OnMapLoadedCallback() {
            @Override
            public void onMapLoaded() {
                mMap.moveCamera(CameraUpdateFactory.newLatLngBounds(builder.build(), 1));

            }
        });
    }
} 
```

# openerp - 在 openerp 6.1.1 中为用户禁用导出功能

> ID：11324093
> 
> 赞同：0
> 
> 时间：2012-07-04T07:11:24.847
> 
> 标签：openerp

我正在使用 OpenERP 6.1.1。我希望为我的一些用户禁用侧边栏中的导入/导出功能。

我尝试了各种方法，但都没有成功。

请建议。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:17:42.580

您必须创建一个无法访问该对象的组**ir.exports** 将该组分配给您不希望能够导出的用户（确保这些用户不属于有权访问该对象的任何其他组）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T16:15:51.150

这不是一个正确的解决方案，我也没有尝试过。您必须编辑基本代码。转到*openerp > addons > web > static > src > js*有一个名为 view.js 的文件现在转到第 811 行，在那里你可以看到类似

```
this.add_section(_t('Other Options'), 'other');
    this.add_items('other', [
        {
            label: _t("Import"),
            callback: view.on_sidebar_import
        }, {
            label: _t("Export"),
            callback: view.on_sidebar_export
        } 
```

尝试在该文件中注释此代码。注意：这不是正确的解决方案，我不喜欢编辑基本代码。

# perl - CGI 错误 - 权限被拒绝

> ID：11324096
> 
> 赞同：1
> 
> 时间：2012-07-04T07:11:33.097
> 
> 标签：perl, apache, webserver, cgi

我有一个 perl webapp 可以在服务器上正常工作，但不能在我的本地机器上工作。

Apache 日志显示（以及其他错误）：

```
Permission denied at /home/mywebapp/dev/www/index.cgi line 318.
End of script output before headers: index.cgi 
```

`318`index.cgi 中的行：

```
our @gr;
eval('require Groups;');
#close STDERR; <<<< commented
open STDERR, '>1' or die $!;  <<<< line 318 
```

我会很感激任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T07:52:29.720

STDERR 不应该是 '>1' - 它应该是 '>&1'。按照现在的编写方式，您的脚本将尝试在 Web 服务器用户没有写入权限的目录中创建一个名为 1 的文件。

# php - 使用正则表达式提取文章的每个部分

> ID：11324098
> 
> 赞同：1
> 
> 时间：2012-07-04T07:11:41.863
> 
> 标签：php, html, regex

文章分词有两种情况：

* * *

```
 1\. < p > the first paragraph < / p > < p > the second paragraph < / p >...
 2\. < p > the first period of < br / > < br / > the second paragraph < br / > < br / > the third paragraph < / p > 
```

我编写代码如下：

* * *

```
$body_arr = preg_split('/\<\/?p\>/',$body,-1,PREG_SPLIT_NO_EMPTY);
echo count($body_arr);
    if(count($body_arr)<4) 
    {
       $body_arr = preg_split('/(\<br\/?\>)\s*\\1/',$body,-1,PREG_SPLIT_NO_EMPTY);
       $body1 = $body2 = $body3 = '';
       $total = count($body_arr);
       $maxed = max(floor($total / 2), 3);
       foreach ($body_arr as $k => $v) 
       {
            if ($k == 0) 
            {
                $body1 = $v . "<br><br>";
            } 
            else if ($k < $maxed) 
            {
                $body2.=$v . "<br><br>";
            } 
            else 
            {
                $body3.=$v . "<br><br>"  ;
            }
       }
     } 
```

*   这是第二个

*   结果是错误的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T02:02:49.923

您可以使用嵌套组使用单个正则表达式拆分文本。您从 ap 标记开始，然后是多个段落，这些段落以另一个关闭/打开 p 标记、一对 br 标记或最后一个关闭 p 标记结尾。

关闭/打开 p 标签可以用以下方式表示：

```
<\s*//*\s*p\s*>[\s|\r|\n]*<\s*p\s*> 
```

双 br 标签可以用以下方式表示：

```
<\s*br\s*//*\s*>[\s|\r|\n]*<\s*br\s*//*\s*> 
```

关闭 p 标记可以用以下方式表示：

```
<\s*//*\s*p\s*> 
```

请注意，我允许标签之间留有空格，因为您在示例中使用了它，但如果没有必要，请删除 \s*。使用一些嵌套组将它们缝合在一起，你最终会得到这样的结果：

```
<\s*p\s*>((?<Paragraph>[^<]*)((<\s*//*\s*p\s*>[\s|\r|\n]*<\s*p\s*>)|(<\s*br\s*//*\s*>[\s|\r|\n]*<\s*br\s*//*\s*>)|(<\s*//*\s*p\s*>)))* 
```

我用你的例子测试了它并且它有效。在示例中，我假设您在段落中间没有标签，但如果不是这种情况，您将不得不使用比标签开头更精美的东西来捕获实际文本。

# ajax - rails 3中的ajax

> ID：11324100
> 
> 赞同：0
> 
> 时间：2012-07-04T07:11:45.000
> 
> 标签：ajax, ruby-on-rails-3.1

我在 rails 3 中有 ajax 代码，但在控制器中没有响应 .. 代码在这里...

```
 <%= javascript_include_tag "application" %>

 <script type="text/javascript">    
   function fetching(){
     var data=document.getElementById('parent_type').value
     if(data){
       req = new Ajax.Request('/registrations/select_type/1', {
         method: 'get',
         parameters: { data : data},
         onComplete: function(transport) {
           processReqChange(transport);
         }
       }); // end ajax req
     }          
   }
 </script> 
```

在注册控制器中——

```
def select_type
  raise "hiiiiiiiiiiiiiiii".inspect
  render :js =>"document.getElementById('parent_lname').value='jyothi';"
end 
```

这里它没有引发“hiiii”，这意味着 ajax 请求没有调用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T00:08:41.750

在您的注册控制器中，您应该有一个 respond_to 块

```
 respond_to do |format|
    format.js {render :js =>"document.getElementById('parent_lname').value='jyothi';"}
   end 
```

供进一步阅读

[http://apidock.com/rails/ActionController/MimeResponds/respond_to](http://apidock.com/rails/ActionController/MimeResponds/respond_to)

# c - 现代虚拟机如何处理内存分配？

> ID：11324117
> 
> 赞同：16
> 
> 时间：2012-07-04T07:12:50.413
> 
> 标签：c, memory-management, lua, vm-implementation

我正在开发一个用 C 编写的简单堆栈机器，主要用于学习目的。在`malloc/free`用于我的内存操作之后，我认为从现代虚拟机中读取一些特定于内存分配的代码是一个好主意。

我下载了 Lua 源代码并开始阅读。过了一会儿，我意识到涉及到很多宏的东西，而且我找不到完成实际内存分配的代码（即`malloc`调用）。

```
find . -exec grep -i "malloc" '{}' \; -print 
```

它只打印了一些`malloc`名称中包含单词的 Lua 宏。Lua VM（和编程语言）根本不使用`malloc`！

所以这引出了一个问题：现代虚拟机如何处理内存分配？Lua 如何从堆中分配内存？除此以外还有其他分配方式`malloc`吗？其他方法的优缺点是什么？

我还想知道安全处理分配的内存的最佳实践、设计模式等。我在 Lua 的源代码中看到在分配内存之前有很多间接性。我在哪里可以了解这些东西？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-04T07:23:00.353

Lua 最肯定使用`malloc`, 形式`realloc`（也可以传递自定义分配器），但是，因为 Lua 使用 GC 就像 99% 基于 VM 的语言一样，它使用宏自动将 GC 头块添加到分配中。

您会发现 Lua 的内存全部由 和 中的例程处理，`LuaM_`这些都使用 VM 的全局状态来存储分配器，该分配器最初设置为(from )，但可以通过 来更改。`lmem.c``lmem.h``l_alloc``lauxlib.c``lua_setallocf`

最近，LuaJIT 添加了分配下沉和一些非常酷的内存功能的计划，你可以阅读这篇关于[LuaJIT 垃圾收集](http://wiki.luajit.org/New-Garbage-Collector)的文章。这篇文章涵盖了许多围绕 VM/JIT 内存分配、下沉、聚合和垃圾收集的策略和设计。

如您所见，内存分配和下沉策略与使用的 GC（如果有的话）密切相关。

就各种内存*分配器*的优缺点而言，使用标准`malloc`很容易使用，但代价是速度和浪费对齐以及每个分配上标记的各种额外块。

转向更高级的 arena、pool、slab 和 block 分配器，我们可以显着加快速度（尤其是对于固定大小的内部 VM 分配）并避免使用更通用的分配器（`malloc`例如这些分配器更复杂，如果您从头开始（在像 VM 这样的更大系统中只是提出问题），则必须调试它们，这与久经考验的 CRT`malloc`实现相反。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-04T10:42:14.977

Lua核心不使用`malloc`和朋友。`realloc`它依赖于用户提供的具有类似语义的内存分配函数（但在处理`NULL`指针和大小为 0 时更精确）。见[lua_Alloc](http://www.lua.org/manual/5.2/manual.html#lua_Alloc)。

辅助 Lua 库提供了一个便利函数，该函数通过核心函数使用基于标准的内存分配函数 `luaL_newstate`创建 Lua 状态`lua_newstate``realloc`创建`free`。其他客户端可以使用适合其应用程序的任何内存分配。

# android - 将字符串从android发送到visual basic 2010

> ID：11324120
> 
> 赞同：1
> 
> 时间：2012-07-04T07:13:15.497
> 
> 标签：android, visual-studio-2010, wifi, android-wifi

我想将一个字符串从 Android 发送到我的 PC（visual basic 2010）我尝试了这个，但它不起作用。请任何人帮助我..

我的 Android 代码来自： [http ://thinkandroid.wordpress.com/2010/03/27/incorporating-socket-programming-into-your-applications/](http://thinkandroid.wordpress.com/2010/03/27/incorporating-socket-programming-into-your-applications/)

它看起来像：

```
package com.zelacroix.bukumenu;
import java.io.*;
import java.net.*;
import android.app.Activity;
import android.os.*;
import android.util.*;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.*;
public class TesKirim extends Activity {

        private EditText serverIp;

        private Button connectPhones;

        private String serverIpAddress = "192.168.1.2";

        private boolean connected = false;

        private Handler handler = new Handler();

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.teskirim);

            serverIp = (EditText) findViewById(R.id.server_ip);
            connectPhones = (Button) findViewById(R.id.connect_phones);

            connectPhones.setOnClickListener(new OnClickListener() {
            @Override
                public void onClick(View v) {
                    if (!connected) {
                        serverIpAddress = serverIp.getText().toString();
                        if (!serverIpAddress.equals("")) {
                            Thread cThread = new Thread(new ClientThread());
                            Toast.makeText(getApplicationContext(), 
                                               "masuk if",  
                                               10)
                                .show();
                            cThread.start();
                        }
                    }
                }
            });
        };

        public class ClientThread implements Runnable {
            public void run() {
                try {
                    InetAddress serverAddr = 
                        InetAddress.getByName(serverIpAddress);
                    Log.d("ClientActivity", "C: Connecting...");
                    Socket socket = new Socket(serverAddr , 10000);
                    connected = true;
                    while (connected) {
                        try {
                            Log.d("ClientActivity", "C: Sending command.");
                            PrintWriter out = 
                                new PrintWriter(
                                    new BufferedWriter(
                                        new OutputStreamWriter(
                                            socket.getOutputStream())), 
                                    true);

                                // where you issue the commands
                                out.println("Hey Server!");
                                Log.d("ClientActivity", "C: Sent.");
                        } catch (Exception e) {
                            Log.e("ClientActivity", "S: Error", e);
                        }
                    }
                    socket.close();
                    Log.d("ClientActivity", "C: Closed.");
                } catch (Exception e) {
                    Log.e("ClientActivity", "C: Error", e);
                    connected = false;
                }
            }
        };
}; 
```

我的 Visual Basic 正在使用 UDP 方法。它看起来像：

```
Imports System.Net.Sockets
Imports System.Net
Imports System.IO
Imports System.Text

Public Class Form1
    Private Sub Button1_Click(ByVal sender As System.Object, 
                              ByVal e As System.EventArgs) Handles Button1.Click
        Try
            Dim udp_Client As New UdpClient(10000)

            Dim remoteIpEndPoint As New IPEndPoint(IPAddress.Any, 0)

            Dim receiveBytes As [Byte]() = udp_Client.Receive(remoteIpEndPoint)
            Dim returnData As String = Encoding.ASCII.GetString(receiveBytes)
            ListBox1.Items.Add(returnData.ToString)
            udp_Client.Close()
        Catch ex As Exception
            ListBox1.Items.Add(ex.ToString())
        End Try
    End Sub
End Class 
```

请我真的2需要沟通他们..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T19:47:12.223

我认为问题是由于您混合了 TCP 和 UDP 通信而引起的。Visual basic 应用程序期望通过 UDP 接收数据，而 Android 应用程序通过 TCP 发送。我从您的代码创建了 Android 和 VB 项目，并从 android 应用程序调用了以下 UDP 发送函数，并且通信工作正常。来自 Android 的字符串正确显示在 VB 应用程序的列表框中。尝试从您的 android 应用程序中使用 UDP 套接字，如下所示：

```
private void udp_send(String serverIpAddress) throws IOException
        {
            String messageStr="Hello Android!";
            int server_port = 10000;
            DatagramSocket s = new DatagramSocket();
            InetAddress local = InetAddress.getByName(serverIpAddress);
            int msg_length=messageStr.length();
            byte[] message = messageStr.getBytes();
            DatagramPacket p = new DatagramPacket(message, msg_length,local,server_port);
            s.send(p);
        } 
```

[我在 android 模拟器和在同一台机器上运行的 VB 应用程序上尝试了此代码。如果您尝试跨不同的机器并且仍然遇到上述代码的问题，请确保端口 10000 的 udp 流量没有被某些防火墙阻止。如有必要，您可以从 Android 应用程序中提供详细的异常日志，以便我们更好地了解问题]

# iphone - cocos2d根据初始点和枪的角度计算出口点

> ID：11324124
> 
> 赞同：0
> 
> 时间：2012-07-04T07:13:20.597
> 
> 标签：iphone, ios, cocos2d-iphone, angle, direction

在没有任何物理引擎的情况下，我在计算一种轨迹时遇到了困难。

我想要实现的是将大炮移动到某个点。我有大炮的初始位置，大炮和接触点之间的角度+我想行进的距离。

这里的目标是根据起点、角度和距离计算出出口点。

方案：[http ://dl.dropbox.com/u/39096612/testcase.png](http://dl.dropbox.com/u/39096612/testcase.png)

这就是我在移动手指的同时旋转大炮的方式（在它后面，而不是在前面）：

```
CGPoint location = [touch locationInView:[touch view]];
CGFloat angle    = CC_RADIANS_TO_DEGREES(ccpToAngle(ccpSub(cannon.position, location)));
angle += 90;

cannonRotation = angle; 
```

通常它已经完成了，但它对我不起作用（可能是我做错了......），真的需要你的帮助。

```
ccp(x + distance * cos(a), y + distance * sin(a)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:37:58.193

`exitPoint = ccpAdd(cannon.position , ccp(cannon.position.x - touch.x , cannon.position.y - touch.y));`

# drupal - Drupal中静态内容的Nginx重写规则

> ID：11324135
> 
> 赞同：0
> 
> 时间：2012-07-04T07:14:00.417
> 
> 标签：drupal, nginx, rewrite

我正在尝试将静态文件请求从 /imgs/blue.gif 重写为 /files/images/spacer.gif 但似乎无法正常工作。

我尝试将以下行放入“try_files $uri @rewrite”之前的 / 位置：

```
rewrite ^/imgs/blue.gif  /files/images/spacer.gif permanent; 
```

我还尝试在“rewrite ^/(.*)$ /index.php?q=$1;”之前将其添加到@rewrite 位置 行，但这也不起作用。

希望有人能在这方面帮助我。

PS：我正在使用 Drupal 并设置了与此类似的配置文件：[http ://wiki.nginx.org/Drupal](http://wiki.nginx.org/Drupal)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:34:44.250

检查您的网站配置。

[这是工作 Nginx 配置的示例](http://phoenixdesign.fr/tutoriels/linux/migration-drupal-apache-nginx) > 我将重定向放在根声明之后，如下所示：

```
rewrite ^/address_to_intercept http://mysite.com/address_to_go permanent; 
```

如果它不起作用，请检查您的错误日志并发布您的配置。

# php - getVar 参数文本用空格替换下划线

> ID：11324139
> 
> 赞同：0
> 
> 时间：2012-07-04T07:14:15.793
> 
> 标签：php, joomla, parameters, str-replace

在 Joomla 中，我使用以下代码拉回一个参数：

```
return JRequest::getVar('product'); 
```

这很好，但参数有“下划线”，如下所示：

**Google_Docs_Security**

我想撤回上面的内容，但是用空格替换上面的 'unerscores 并尝试了以下内容，但它不起作用：

**谷歌文档安全**

```
return JRequest::getVar('product');
$product= str_replace ("_", " ", $product); 
```

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T07:16:14.270

```
return str_replace ("_", " ", JRequest::getVar('product')); 
```

# mysql - MySQL过滤可能的空值

> ID：11324140
> 
> 赞同：2
> 
> 时间：2012-07-04T07:14:19.490
> 
> 标签：mysql, sql, where-clause

我正在编写一个带有单个 datetime 参数的 mysql 存储过程。它在这样的选择语句中使用它..

```
select *
from table
where date >= @datefrom or @datefrom is null 
```

当我编写 t-sql 查询时，这通常可以解决问题，但它似乎不适用于 mysql。

我也尝试过其他变体，例如

```
where date >= ifnull(@datefrom, date) 
```

并且

```
where ((date >= @datefrom and @datefrom is not null) or (@datefrom is null)) 
```

但我没有得到我期望的结果..

有人可以对此有所了解吗？

这样的程序定义..

```
CREATE DEFINER=`root`@`%` PROCEDURE `prc_xxxxxx`(datefrom datetime)
BEGIN

select * from table
where date >= @datefrom or @datefrom is null

END 
```

然后我会这样打电话..

```
call prc_xxxxxx ('2012-07-04 00:00:00') 
```

或者

```
call prc_xxxxx (null) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:17:34.617

正如已经提到的，@ 符号用于[会话变量](http://dev.mysql.com/doc/refman//5.5/en/user-variables.html)，而不是存储的例程参数——那些应该不带前缀。例如：

```
CREATE PROCEDURE `proc_IN` (IN var1 INT)  
BEGIN  
    SELECT var1 + 2 AS result;  
END// 
```

此示例取自[本教程](http://net.tutsplus.com/tutorials/an-introduction-to-stored-procedures/)。

# ios - 如何为 UITableView tableHeaderView 设置比 UITableView 宽度更宽的宽度？

> ID：11324142
> 
> 赞同：0
> 
> 时间：2012-07-04T07:14:27.843
> 
> 标签：ios, uitableview, cgrect

我在这样`UITableView`的`viewDidLoad`方法中创建：

```
_tableView = [[UITableView alloc] initWithFrame:CGRectMake(25.0, 0.0, 277.0, 393.0) style:UITableViewStyleGrouped];
mySearchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 320.0f, 44.0f)];
[self.tableViewLists setTableHeaderView:mySearchBar];
CGRect newFrame = mySearchBar.frame;
newFrame.size.width = newFrame.size.width + 50.0f;
newFrame.origin.x = newFrame.origin.x - 25.0f;
mySearchBar.frame = newFrame;
[self.tableViewLists setTableHeaderView:mySearchBar]; 
```

我想添加`UISearchBar`将`UITableView` `tableHeaderView`具有此框架的内容：

```
CGRectMake(0.0f, 0.0f, 320.0f, 44.0f) 
```

在我设置我`UISearchBar`的 for之后`UITableView tableHeaderView`，它的框架被拉伸为 UITableView 的宽度。我可以以某种方式更改 UISearchBar 的框架吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:32:32.400

**带截图的完整代码**

```
#import "PhotosViewController.h"

@implementation PhotosViewController

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{

 UITableView *table=[[UITableView alloc] initWithFrame:CGRectMake(25.0,0.0, 277.0, 393.0) style:UITableViewStyleGrouped];

 table.delegate=self;
 table.dataSource=self;

 UISearchBar *searchBar=[[UISearchBar alloc] initWithFrame:CGRectMake(10.0f, 0.0f, 257.0f, 44.0f)];

 [table addSubview:searchBar];
 [self.view addSubview:table];

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
 return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
 return  10;
}

// Row display. Implementers should *always* try to reuse cells by setting each cell's reuseIdentifier and querying for available reusable cells with dequeueReusableCellWithIdentifier:
// Cell gets various attributes set automatically based on table (separators) and data source (accessory views, editing controls)

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
 static NSString *cellidentifier=@"cellidentifier";

 UITableViewCell *Cell=[tableView dequeueReusableCellWithIdentifier:cellidentifier];
 if (Cell==nil) {
  Cell=[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellidentifier];
 }

 Cell.textLabel.text=@"hello";
 return Cell;
}

- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
 return 44;
}

@end 
```

![在此处输入图像描述](../Images/cac621415470c9143270ae29b9de4785.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T07:24:33.557

在我看来，将一个`UISearchBar`宽度`UITableView`小于实际`UISearchBar`. 我认为这将是拉伸它的默认行为（在这种情况下缩小它）。您可以查看这个[问题/答案](https://stackoverflow.com/questions/4955974/uisearchbar-on-the-top-of-uitableview-which-can-hide-but-stay-close-to-uinavigat)以获得一些想法（主要是因为打印屏幕和一些答案）。我会建议，将是`UISearchBar`上面的`UITableView`，就是这样......

# cakephp - 访问登录用户 AuthComponent::user()

> ID：11324143
> 
> 赞同：0
> 
> 时间：2012-07-04T07:14:32.813
> 
> 标签：cakephp, cakephp-2.0

[http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#accessing-the-logged-in-user](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#accessing-the-logged-in-user)

有人可以帮我理解这一点。

该`AuthComponent::user()`方法只返回有关用户的一些基本信息，而不是实际的 User 对象本身。

来自rails，我习惯了一个满载的`current_user`物体

如果我想要类似的东西，我应该做一个

`$this->User->id = AuthComponent::user('id')`

并使用它？或者是否已经有我可以使用的内置方法。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T13:27:58.610

如果您在链接的文档中向下滚动一点，您会看到从 CakePHP 2.2 开始，您现在可以`Containable`在 Auth 设置中使用，因此您可以执行以下操作：

```
public $components = array(
    'Auth' => array(
        'authenticate' => array(
            'Form' => array(
                'fields' => array('username' => 'email'),
                'contain' => array('RelatedModel', 'RelatedModel')
            )
        )
    )
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T00:17:07.197

我最终做了这样的事情

```
# load current_user
$this->loadModel('User');
$this->User->id = AuthComponent::user('id');
$user = $this->User->read();
$this->set('current_user',$user); 
```

# windows-phone-7 - 恢复应用的事件

> ID：11324145
> 
> 赞同：1
> 
> 时间：2012-07-04T07:14:37.027
> 
> 标签：windows-phone-7, events

当您：

a) 在视图中停留太久以致屏幕进入睡眠状态，然后您解锁手机并返回应用程序？

b) 点击 windows 按钮，然后点击后退按钮以恢复应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T07:36:39.027

1.  是的，当您在页面上停留足够长的时间时，会触发该特定页面的 OnNavigatedTo 事件。

2.  当您恢复应用程序时，App.xaml.cs 页面上的 Aplication_Activated 事件会被触发，并且页面的 OnNavigatedTo 事件也会被触发。

# c# - 如何用随机数据填充 XML 文件？

> ID：11324147
> 
> 赞同：1
> 
> 时间：2012-07-04T07:14:44.827
> 
> 标签：c#, javascript, xml, shell

我有一个自动生成的 XML 文件，我必须用 Oracle 数据库中的值或随机生成的序列填充该文件。

例如：

```
<ns1:message>
        <ns1:messageId>        </ns1:messageId>
        <ns1:languageCode>  </ns1:languageCode>
</ns1:message> 
```

`<messageId>`应按随机**顺序**填充。

`<ns1:languageCode>`应填充**数据库中的值。**

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T07:35:51.913

这里实际上有 2 个任务。

*   使用 .NET 生成 XML。

到目前为止我看到的最好的方法是使用[LinqToXML](http://msdn.microsoft.com/en-us/library/bb387098.aspx)。您可以在此处阅读，热[创建 XML 树](http://msdn.microsoft.com/en-us/library/bb387068)。

```
var xmlTree = new XElement("message", 
         new XElement("messageId", GetRandomMessageId()), 
         new XElement("languageCode", GetRandomLanguageCode())); 
```

*   实现生成随机数据的方法 `GetRandomMessageId`（），`GetRandomLanguageCode`（）。

使用 .NET [Random 类](http://msdn.microsoft.com/en-us/library/system.random.aspx)来实现这一点。

举个例子：

```
public string GetRandomMessageId()
{
  return "messageId_" + new Random(100);
} 
```

您可以自定义您喜欢的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T07:28:37.113

如果您需要生成某种随机数据，您可能应该看看[AutoPoco](http://autopoco.codeplex.com/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T04:52:15.047

如果您想使用**加密安全的**随机数生成器填充序列，**请不要使用**该类`System.Random`。而是使用

`System.Security.Cryptography.RandomNumberGenerator`

如

`System.Security.Cryptography.RNGCryptoServiceProvider`.

如果数字是加密随机的并不重要，那么您可以使用`System.Random`该类。

Microsoft 开发人员网络上的示例以及`RNGCryptoServiceProvider`可在[MSDN 中找到的文档：RNGCryptoServiceProvider Class](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rngcryptoserviceprovider.aspx)。

# javascript - javascript中的函数未定义

> ID：11324150
> 
> 赞同：4
> 
> 时间：2012-07-04T07:15:02.210
> 
> 标签：javascript, ajax, function, qunit

我在下面有这个 js 和 qunit 测试。为什么浏览器给我的 listClasses 没有定义？如何解决它。我看到的大多是

```
function ajax() {  
$.ajax({   
});} 
```

但如果我喜欢下面如何进行测试？

```
$('#MregisteredClasses').on('pageinit', function listClasses(){
var rowInput = "1";
var pageInput = "1";

$.ajax({
    url: 'http://137.57.102.146:8080/Training/getRegisteredClassesData.html',
    data: ( {rows : rowInput , page : pageInput}),
    type: 'POST',

    success: function(json_results){
    $('#list').append('<ul data-role="listview" data-inset="true"</ul>');
        listItems = $('#list').find('ul');
        $.each(json_results.rows, function(key) {
            html = "<li data-mini='true' id='icon'><a href='http://137.57.102.146:8080/Training/MRegisteredClassesDetail.phone?courseId=" 
                   + [json_results.rows[key].courseId] + "&regNo=" + [json_results.rows[key].regNo] +
                   "' rel='external'>" + json_results.rows[key].courseName+ "</a>"
                   + "<a href='http://137.57.102.146:8080/Training/MRateCourse.phone?courseId=" 
                   + [json_results.rows[key].courseId] + "&regNo=" + [json_results.rows[key].regNo] + 
                   "' rel='external'>RATE THIS COURSE</a></li>" ; 
            listItems.append(html); 
        });

        $('#list ul').listview(); 
    },
});
}); 
```

这是 qunit 测试

```
 test('asynchronous test', function() {  
// Pause the test, and fail it if start() isn't called after one second  
stop();  

listClasses(function() {  
    // ...asynchronous assertions  
    ok(true, "Success"); 
});  

setTimeout(function() {  
    start();  
}, 2000);  
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T07:31:44.600

**函数声明**和**命名函数表达式**之间存在[差异](http://kangax.github.com/nfe/#expr-vs-decl)。

 ****声明的格式为：

```
function myFunc() {
    /* body */
} 
```

表达式就是其他一切：

```
var x = function myFunc() {
    /* body */
};

// or

alert(function myFunc() {
    / * body */
}); 
```

当函数表达式在关键字后面有名称时`function`，该函数只能在函数体内通过该名称访问。因此你的问题。

```
var x = function myFunc() {
    /* body */
};

x(); // okay
myFunc(); // reference error 
```

命名函数表达式中的更多信息[已揭秘](http://kangax.github.com/nfe/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T07:21:58.033

`$('#MregisteredClasses').on('pageinit', function listClasses(){ ...`是不正确的用法。

该函数要么需要是匿名的（即丢弃该`listClasses`位），在这种情况下运行`listClasses()`将失败。

您需要做的是外部化函数声明。

IE：

```
function listClasses(){
  var rowInput = "1";
  var pageInput = "1";

  $.ajax({
    url: 'http://137.57.102.146:8080/Training/getRegisteredClassesData.html',
    data: ( {rows : rowInput , page : pageInput}),
    type: 'POST',

    success: function(json_results){
    $('#list').append('<ul data-role="listview" data-inset="true"</ul>');
        listItems = $('#list').find('ul');
        $.each(json_results.rows, function(key) {
            html = "<li data-mini='true' id='icon'><a href='http://137.57.102.146:8080/Training/MRegisteredClassesDetail.phone?courseId=" 
                   + [json_results.rows[key].courseId] + "&regNo=" + [json_results.rows[key].regNo] +
                   "' rel='external'>" + json_results.rows[key].courseName+ "</a>"
                   + "<a href='http://137.57.102.146:8080/Training/MRateCourse.phone?courseId=" 
                   + [json_results.rows[key].courseId] + "&regNo=" + [json_results.rows[key].regNo] + 
                   "' rel='external'>RATE THIS COURSE</a></li>" ; 
            listItems.append(html); 
        });

        $('#list ul').listview(); 
    }
});
} 
```

然后从`on`命令中调用函数：

```
$('#MregisteredClasses').on('pageinit', listClasses) 
```

假设您的脚本仅在 上失败`listClasses()`，那么我会假设该`listClasses`名称只是默默地删除。****

# java - Java Card 是否支持生物识别（特别是指纹认证）？

> ID：11324154
> 
> 赞同：3
> 
> 时间：2012-07-04T07:15:22.820
> 
> 标签：java, sdk, fingerprint, javacard

任务是实现一个具有基于生物识别（指纹）安全性的 Java Card 应用程序（Applet）。我看到，自从 Java Card 规范 v2.2.2 以来，API 包含一个特殊的包——`javacardx.biometry`带有诸如`BioTemplate`和之类的接口，`BioBuilder`但我没有看到任何实现。

1.  这是否意味着为了实现指纹认证小程序需要购买额外的商业 SDK（例如从 Griaule Biometrics 或[MegaMatcher](http://www.neurotechnology.com/megamatcher-on-card.html)）？我想检查标准 Javacard API 中提供的功能是否足够（也许我只是错过了一些东西）；
2.  如果需要一些“第三方”sdk，您能否推荐或分享使用哪一个的经验。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T22:46:54.077

`javacardx.biometry`**只是一个通用接口，它使开发人员更容易为具有生物特征**的卡实现 Applet 。否则，您将不得不使用供应商特定代码；现在您可以简单地将生物识别模板发送`byte[]`到供应商特定的实现。如果您要切换智能卡实现，您几乎不需要做任何工作来移植您的 Applet。

Java Card 似乎对 API 没有任何限制。所以，是的，您需要来自 Java Card 供应商和生物识别供应商的组合包才能在卡上使用 match。Java Card 中许多 API（和密码常量）的可用性并不意味着这些卡上存在这些特性。

# php - 如何在 CakePHP 中设置 cookie 和 session？

> ID：11324155
> 
> 赞同：-1
> 
> 时间：2012-07-04T07:15:23.500
> 
> 标签：php, cakephp

我必须创建一个包含用户名和密码的登录页面。当用户登录时，将为该会话创建一个 cookie。此 cookie 将包含用户 ID 和他登录的时间。现在他/她在登录后浏览页面。但是假设用户没有在某个页面上执行任何操作，并且在 2 分钟后他/她开始使用该页面，那么该会话必须过期，因为我们在会话中设置了如果他/她不执行任何操作，用户将自动注销任何页面 2 分钟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:35:29.323

编辑`Session.timeout`config/core.php 中的设置。该值取决于`Security.level`设置：如果设置为“高”，则该值乘以 10，如果设置为“中”，则乘以 100，因此分别输入 12 或 1.2 120 秒（尽管我不是 100 %确定它接受整数以外的数字）。

这当然不会使会话 cookie 失效，但是为登录信息创建自己的 cookie 可能是个坏主意。

# php - 防止 xdebug 在索引文件的第一行中断

> ID：11324156
> 
> 赞同：18
> 
> 时间：2012-07-04T07:15:26.483
> 
> 标签：php, eclipse, xdebug, break, eclipse-pdt

我有 Eclipse PDT 的 xdebug 设置。每次我启动调试会话时，Eclipse 都会在我的根 index.php 文件的第一行中断。是否可以防止这种行为？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-04T07:19:39.683

好的，我发现了问题所在。在 Eclipse 中，我只需要进入“Windows -> Preferences -> PHP -> Debug”并取消选中“Break at first line”。

为了使它工作，我还必须进入“运行 > 调试配置 > PHP Web 应用程序”并在所有配置中取消选择“第一行中断”。

您可能必须重新启动 Eclipse 才能使其工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-05T12:54:45.713

这个问题来自eclipes。但是当我搜索这个问题时，标题将我带到了这个页面。

因此，为了社区的利益，任何使用**netbeans**的人都可以通过`tool`->`options`

![在此处输入图像描述](../Images/e12c50373cf75c02c52fb7b9ac08f5a2.png)

# php - CakePHP/MVC 管理函数放置

> ID：11324158
> 
> 赞同：1
> 
> 时间：2012-07-04T07:15:33.850
> 
> 标签：php, cakephp, authorization

这是一个更多的意见问题，而不是特定问题的解决方案。

我是第一次使用 CakePHP，现在正在处理网站的管理部分。

作为 MVC 或 CakePHP 开发人员，您喜欢将管理功能放在哪里？

最初我将它们放在一个 AdminController 中，但后来更改为将函数放在一个控制器中，该控制器适用于被操作的数据类型。例如，我将用户列表/编辑放在 UserController 中。

对我来说，这更有意义，因为 UserController 中可能有可能有用的功能。

如果你留下回应，你能留下几句话说为什么吗？也许这是一个有争议的问题。

保重，李

- 编辑

```
if ($this->Auth->user('user_type') == 1){//double-check the user is Admin
            $this->Auth->allow('display');
            $this->Auth->allow('watch'); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-04T07:38:16.233

我不认为这是一个有争议的问题。将管理功能放在它们各自的控制器中（即，不是全部放在一个“管理”控制器中），并使用 Cake 内置的“管理”前缀路由来保证它们的安全。这是 CakePHP 认可的方式，CakePHP 允许您通过 Bake 控制台以这种方式创建管理功能。

您可以在 AppController 中通过几行简单的代码来保护所有以 admin_ 为前缀的控制器功能，并且所有管理功能都可以通过整洁、一致的 URL 访问，如下所示：[http ://www.example.com/admin/my_controller/my_function](http://www.example.com/admin/my_controller/my_function)

这应该让你开始：[http ://book.cakephp.org/2.0/en/development/routing.html#prefix-routing](http://book.cakephp.org/2.0/en/development/routing.html#prefix-routing)

如果您需要更多帮助，请告诉我，我会用更多信息更新我的答案。

编辑：更多信息...

以下是设置管理员路由的一些步骤：

1/ 在 app/Config/core.php 的第 113 行附近，确保该行存在且未注释：

```
 Configure::write('Routing.prefixes', array('admin')); 
```

2/ 在 app/Controller/AppController.php（即控制器超类）中，在 beforeFilter 方法中测试管理路由。不要在每个控制器的 beforeFilter 中这样做——这不符合 DRY 原则。下面以我的前置过滤方法为例：

```
function beforeFilter() {
    if (isset($this->request->params['admin'])) {
            // the user has accessed an admin function, so handle it accordingly.
        $this->layout = 'admin';
        $this->Auth->loginRedirect = array('controller'=>'users','action'=>'index');
        $this->Auth->allow('login');
    } else {
            // the user has accessed a NON-admin function, so handle it accordingly.
        $this->Auth->allow();

    }
} 
```

3/ 使用 admin_ 为所有管理功能添加前缀，它们应该可以通过前缀路由自动使用。

例如。

```
function admin_dostuff () { echo 'hi from the admin function'; } // This will be available via http://www.example.com/admin/my_controller/dostuff

function dostuff () { echo 'hi from the NON-admin function'; } // This will be available via http://www.example.com/my_controller/dostuff 
```

一旦你完成了设置，你需要做的就是在管理函数前面加上 admin_ 前缀，Cake 会为你处理这一切。有道理？

编辑2：

这是一些快速编写的示例代码，可以帮助您解决问题。

```
function beforeFilter() {
    if (isset($this->request->params['admin'])) {
        // the user has accessed an admin_ function, so check if they are an admin.
        if ($this->Auth->user('user_type') == 1){
            // an Admin user has accessed an admin function. We can always allow that.
            $this->Auth->allow();
        } else {
            // A non-admin user has accessed an admin function, so we shouldn't allow it.
            // Here you can redirect them, or give an error message, or something
        }
    } else {
        // the user has accessed a NON-admin function, so handle it however you want.
        $this->Auth->allow(); // this example gives public access to all non-admin functions.
    }
} 
```

# java - Java：当 Connection 对象在没有调用 Connection.close() 的情况下被取消时会发生什么

> ID：11324165
> 
> 赞同：2
> 
> 时间：2012-07-04T07:15:45.660
> 
> 标签：java, null, connection, store

`java.sql.Connection`如果as的实例`con`无效，与数据库建立的连接会发生什么情况。

```
con = null; 
```

连接是关闭还是保持打开直到应用程序运行。

**第二个问题：**
同样，如果有`javax.mail.Store`as的实例`store`并将其无效，

```
store = null; 
```

将关闭 smtp 连接还是保持未关闭状态。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T07:26:22.753

如果您将您设置`Connection`为 null，则此连接将保持“打开”状态，并且与关闭关联的代码将不会运行。因此，为了关闭它，您必须调用该`close()`方法。如果连接没有关闭，连接可能持有的其他资源也不会被释放

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T07:23:07.923

如果你让你的`connection`实例为空而不调用`close()`then，

`connection` 准备好被垃圾收集

并且它不会调用与`close()`方法实现相关的代码

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T07:35:02.977

有 finalize 方法，Connection 或 Store 的具体实现很可能会覆盖此方法并在那里调用 close()。例如，这里是 PostgreSQL JDBC 驱动程序的片段：

```
protected void finalize() throws Throwable
{
    if (openStackTrace != null)
        logger.log(GT.tr("Finalizing a Connection that was never closed:"), openStackTrace);

    close();
} 
```

当垃圾收集器决定是时候收集给定对象时，将调用此方法。

但建议始终手动关闭连接和类似资源，因为垃圾收集器是不可预测的。例如，您可以比垃圾收集器启动和释放资源更快地达到连接限制。

# android - 动态安卓界面

> ID：11324170
> 
> 赞同：0
> 
> 时间：2012-07-04T07:16:05.440
> 
> 标签：android, dynamic, android-fragments, widget

我是 Android 新手，我正在使用[http://developer.android.com/training/basics/fragments/index.html上的示例代码](http://developer.android.com/training/basics/fragments/index.html)

如果我想更新文章片段（目前只有一个TextView）以动态包含更多元素，我该怎么做？

我需要先将 article.xml 转换为布局吗？

也许有人有很多用于动态生成接口的示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:29:04.260

如果我理解正确，您想向现有布局添加更多 UI 元素...

您需要为要放入元素的布局定义一个 id。

比如说..

```
<LinearLayout 
    android:id="@+id/myView";
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

</LinearLayout> 
```

您在 onCreate 中的代码中引用它，就像这样..

```
LinearLayout myDynamicView = (LinearLayout)findVivewById(R.id.myView); 
```

因此，如果您想动态添加元素，您可以通过编程方式创建它们并像这样添加到视图中......

```
TextView myExtraView = new TextView(this);
myExtraView.setText("added this programmatically");
myDynamicView.addView(myExtraView); 
```

您也可以添加其他元素...您的问题不是很清楚，但基于我的理解；这就是您想要的。只需在搜索栏中搜索动态添加视图。

# google-chrome-extension - 以编程方式安装 chrome 扩展 crx 的任何 API

> ID：11324173
> 
> 赞同：4
> 
> 时间：2012-07-04T07:16:16.267
> 
> 标签：google-chrome-extension

是否有任何 API 可以使用 Java 以编程方式安装下载的 Chrome .crx 扩展。我用谷歌搜索了很多，但我没有找到任何可以在我的程序中调用它并完成工作的 API。我得到了各种手动方法，例如使用策略或添加到 Windows 注册表等......

有人可以告诉我如何以编程方式完成此任务

# c# - 如何将类类型传递给函数以将其转换为函数

> ID：11324174
> 
> 赞同：3
> 
> 时间：2012-07-04T07:16:29.007
> 
> 标签：c#, class, casting

在编译时，我不知道我将传递给方法的确切类型，但我确信这种类型将包含一些属性。如何将类型传递给函数以在函数中执行强制转换？我想得到类似的东西：

```
foo (classType cl)
{
    int x = ((cl)SomeClass).Id.Value;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T07:32:01.787

使用 .id 时，另一个答案将不起作用，因为您的 T 类型不受限制。该类不知道任何 T 可以实现名为 id 的字段/属性

想象一下你使用了

```
foo <int>() 
```

T 将是 int 并且 int 没有 id 字段/属性

你可以限制

```
foo <T>()
  where T : ClassTypeThatImplementsId
{
  int x = ((T)SomeClass).Value;
} 
```

虽然这意味着 T 只能是该特定类型。是否有一个具有 ID 的基类可供您使用？我不知道这是否是您想要的解决方案...

编辑：

回应您的帖子：

```
foo <T>()
  where T : BaseClass
{
  int x = ((T)SomeClass).Value;
} 
```

假设 BaseClass 实现 'Value' 应该可以工作（并假设 SomeClass 来自某个地方，因为方法中似乎没有引用它！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T07:33:48.640

像这样的东西会起作用（如果这是你想要实现的），但你不需要强制转换：

```
public interface IHasInteger
{
    int Value { get; }
}

public class HasInteger : IHasInteger
{
    public int Value { get { return 1; } }
}

public class AlsoHasInteger : IHasInteger
{
    public int Value { get { return 2; } }
}

class Program
{
    static void Main(string[] args)
    {
        var a = new HasInteger();
        var b = new AlsoHasInteger();
        var c = new object();
        Console.WriteLine(GetInteger(a));
        Console.WriteLine(GetInteger(b));
        Console.WriteLine(GetInteger(c));
        Console.ReadLine();
    }

    private static int GetInteger(object o)
    {
        if (o is IHasInteger)
        {
            int x = ((IHasInteger)o).Value;
            return x;
        }

        return 0;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T07:18:23.270

**更新**

```
foo <T>() : where SomeTypeHavingValue
{
  int x = ((T)SomeClass).Value;
} 
```

# asp.net-mvc-3 - 使用 razor 创建 Html Helper 进行搜索

> ID：11324177
> 
> 赞同：1
> 
> 时间：2012-07-04T07:16:56.860
> 
> 标签：asp.net-mvc-3, razor

我创建了一个 Html 助手，用于搜索用户使用 Razor 助手内联提供的文本。我写的代码如下；

```
<script type="text/javascript">
    $('#companyName').change(function () {
        var searchTerm = $(this).val();
        @Search(searchTerm);
    });
</script>

<p>Search For:</p>
@Html.TextBox("companyName", Model)

@helper Search(string searchTerm)
 {
    if (searchTerm !="" || searchTerm != null)
    {
        @searchTerm;
    }
    else
    {
        @searchTerm.Substring(0, 7)<text>...</text>
    }
    } 
```

在这里，我想将文本框的值传递给 searchTerm。我怎样才能做到这一点..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T07:41:16.530

Razor 助手在服务器上执行。在您的情况下，您正在订阅客户端上的`.change()`事件`textbox`。因此，您需要编写客户端 javascript 处理程序，而不是 Razor 助手：

```
<script type="text/javascript">
    $('#companyName').change(function () {
        var searchTerm = $(this).val();
        Search(searchTerm);
    });

    function Search(searchTerm) {
        // do the search here
    }
</script>

<p>Search For:</p>
@Html.TextBox("companyName", Model) 
```

# jquery - 悬停在列表中的多个不同元素，显示单个图像

> ID：11324182
> 
> 赞同：0
> 
> 时间：2012-07-04T07:17:18.113
> 
> 标签：jquery, image, onmouseover

我尝试完成一个元素列表，在这些元素上悬停显示不同的图像。

像这样的东西

```
<ul id="test">
 <li id="sidebarList_1">Image 1</li>
 <li id="sidebarList_2">Image 2</li>
 <li id="sidebarList_3">Image 3</li>
<ul>

<div id="imgDiv_1">
    <img src="http://www.freemacware.com/wp-content/images/smultron1.png" />
</div>
<div id="imgDiv_2">
    <img src="http://www.freemacware.com/wp-content/images/smultron2.png" />
</div>
<div id="imgDiv_3">
    <img src="http://www.freemacware.com/wp-content/images/smultron3.png" />
</div> 
```

我的 jQuery 看起来像这样

```
$(this).mouseover(function() {
    $("#imgDiv_1").css('visibility','visible'); 
}),

$(this).mouseout(function() { 
    $("#imgDiv_1").css('visibility','hidden'); 
}); 
```

正如所见，它现在是静态的。我尝试了这样的方法来获取 li 中 id 元素的数量（例如 sidebarList_ **1**）：

```
$(this).mouseover(function() {   
    var myString = $(this).val().split("_").pop();   
    $("#imgDiv_" + myString).css('visibility','visible'); 
}),

$(this).mouseout(function() { 
    var myString = $(this).val().split("_").pop();
    $("#imgDiv_" + myString).css('visibility','hidden'); 
}); 
```

但这不起作用。我怎样才能完成我想做的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T07:22:40.163

我会`data-*`为您的元素添加一个属性`li`，其值对应于相关`div`：

```
<ul id="test">
 <li id="sidebarList_1" data-img="imgDiv_1">Image 1</li>
 <li id="sidebarList_2" data-img="imgDiv_2">Image 2</li>
 <li id="sidebarList_3" data-img="imgDiv_3">Image 3</li>
<ul> 
```

然后使用以下 jQuery：

```
$("#test").on("mouseover mouseout", "li", function () {
    $("#" + $(this).data("img")).toggle();
});​ 
```

这是一个[工作示例](http://jsfiddle.net/jamesallardice/fdcPS/)。

这使用该`on`方法，将选择器作为第二个参数，以利用事件委托（每个`li`元素只有一个事件处理程序而不是一个事件处理程序）。它假定`div`元素默认隐藏，因此在鼠标悬停时，`toggle`调用将使悬停`div`可见。

**有用的参考资料**

*   [`.on()`方法_](http://api.jquery.com/on/)
*   [`.toggle()`方法_](http://api.jquery.com/toggle-event/)
*   [`.data()`方法_](http://api.jquery.com/data/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T07:28:06.437

通过制作悬停项目链接，使其在语义上、键盘可访问性和对您自己更容易：

```
<ul id="test">
 <li id="sidebarList_1"><a href="#imgDiv_1">Image 1</a></li>
 <li id="sidebarList_2"><a href="#imgDiv_2">Image 2</a></li>
 <li id="sidebarList_3"><a href="#imgDiv_3">Image 3</a></li>
<ul> 
```

和jQuery：

```
$('#test li a').bind('mouseenter focusin',function() {
    $($(this).attr('href')).show();
}).bind('mouseleave focusout',function() {
    $($(this).attr('href')).hide();
}); 
```

这意味着您不会对字符串操作感到困惑，并且如果用户在其浏览器上关闭了 JS，则相关项目仍然在语义上链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T07:23:05.233

您应该学习如何使用`$(this)`or `this`。你使用它的方式，它实际上什么都没有。当你想使用`this`会是这样的

```
$('div').click(function(){
    $(this) //<--- refers to the div that was clicked
}); 
```

您可以使用

```
$('div').hover(
    function(){ //<-- Mouse in

    }
);function(){  //<-- Mouse out

}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T07:21:39.150

尝试使用这个

```
$("#test li").mouseover(function() {   
    var myString = $(this).attr("id").replace("sidebarList_","");   
    $("#imgDiv_" + myString).css('visibility','visible'); 
});

$("#test li").mouseout(function() { 
    var myString = $(this).attr("id").replace("sidebarList_","");  
    $("#imgDiv_" + myString).css('visibility','hidden'); 
}); 
```

# javascript - 在 HTML 页面中捕获新请求

> ID：11324183
> 
> 赞同：0
> 
> 时间：2012-07-04T07:17:37.710
> 
> 标签：javascript, dom-events

如何在 html 页面中捕获新请求（例如链接点击、页面刷新等）？

假设当用户决定转到另一个页面或刷新当前页面时，我需要做一些事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T07:19:12.990

查看[`window.onbeforeunload`](https://developer.mozilla.org/en/DOM/window.onbeforeunload)和[`window.onunload`](https://developer.mozilla.org/en/DOM/window.onunload)事件

您还可以轻松捕获任何链接 [jQuery 示例]：

```
$('a').on('click', function() {
     // do your stuff

     // follow the link
     window.location.href = this.href;
}); 
```

# php - 一个查询中出现不同的 MySQL 语法错误

> ID：11324193
> 
> 赞同：2
> 
> 时间：2012-07-04T07:18:45.697
> 
> 标签：php, mysql

我有一个简单的`INSERT INTO`查询，每次都失败。奇怪的是，如果我取出错误最初指向的列或之前的列，我只会得到一个不同的错误。

这是查询：

```
mysql_query("insert into list_items
 (list_id,position,item,small_image,large_image,asin,description,
  author,publish_date,amazon_description) values  
 ('$id','$key','$value','$small_image','$large_image','$asin',
  '$descriptions[$key]','$authors[$key]','$publish_date','$amazon_description')")
or die(mysql_error()); 
```

我使用的样本数据是：

```
$key=1;
$value=mysql_real_escape_string("Harry Potter and the Sorcerer's Stone");
$small_image="some_image_url";
$large_image="some_image_url";
$asin="13412341234";
$descriptions[$key]="";
$authors[$key]="JK Rowling";
$publish_date="1999-09-08";
$amazon_description=mysql_real_escape_string($long_amazon_description); 
```

我得到的错误是：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '1999-09-08')' 附近使用正确的语法

当我从查询中删除 'publish_date' 列时，我得到一个不同的错误，说：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '''','')' 附近使用正确的语法

所以我认为它一定与“作者”列有关，所以我也删除了它，留下了这个查询：

```
mysql_query("insert into list_items 
 (list_id,position,item,small_image,large_image,
  asin,description,amazon_description) values 
 ('$id','$key','$value','$small_image','$large_image',
 '$asin','$descriptions[$key]','$amazon_description') ")
or die(mysql_error()); 
```

...但我得到了同样的错误。有人可以告诉我我在这里做错了什么吗？这是表结构：

```
CREATE TABLE IF NOT EXISTS `list_items` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `list_id` int(11) NOT NULL,
  `position` int(11) NOT NULL,
  `item` varchar(512) NOT NULL,
  `item_added` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `voted_up` int(11) NOT NULL,
  `voted_down` int(11) NOT NULL,
  `small_image` varchar(128) NOT NULL,
  `large_image` varchar(128) NOT NULL,
  `asin` varchar(16) NOT NULL,
  `description` mediumtext NOT NULL,
  `author` varchar(128) NOT NULL,
  `publish_date` varchar(16) NOT NULL,
  `genre` varchar(128) NOT NULL,
  `amazon_description` mediumtext NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=379 ; 
```

查询打印为：

```
insert into list_items
(list_id,position,item,small_image,large_image,asin,description,
author,publish_date,amazon_description) values
('76','1','Harry Potter And The Sorcerer\'s Stone',
 'http://ecx.images-amazon.com/images/I/51MU5VilKpL._SL160_.jpg',
 'http://ecx.images-amazon.com/images/I/51MU5VilKpL.jpg','059035342X','',
 'J.K. Rowling','1999-09-08',
 'Harry Potter has no idea how famous he is. That\'s because he\'s being raised by his miserable aunt and uncle who are terrified Harry will learn that he\'s really a wizard, just as his parents were. But everything changes when Harry is summoned to attend an infamous school for wizards, and he begins to discover some clues about his illustrious birthright. From the surprising way he is greeted by a lovable giant, to the unique curriculum and colorful faculty at his unusual school, Harry finds himself drawn deep inside a mystical world he never knew existed and closer to his own noble destiny.') 
```

重要编辑：

当查询减少到`insert into list_items (list_id,position) values ('82','1')`它仍然失败，这对我来说是完全无法解释的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:36:31.150

尝试逃避这些

```
$small_image="some_image_url";
$large_image="some_image_url"; 
```

在包含在您的查询中之前

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-04T07:46:30.693

你的问题在这里：

```
... values ('$id','$key','$value','$small_image','$large_image',
 '$asin','$descriptions[$key]','$amazon_description') ") 
```

围绕作为数组的变量，您需要有花括号`{}`。

例如：

```
 '{$descriptions[$key]}','{$authors[$key]}' 
```

这是因为**PHP**会理解您输入的内容。因此，当您回显此内容时，它将按您的预期回显数组的内容。但**SQL**不会。

# php - 将日期转换为 UNIX 时间戳

> ID：11324195
> 
> 赞同：8
> 
> 时间：2012-07-04T07:19:23.840
> 
> 标签：php, unix, date, timestamp

我的日期格式为`Jun 26, '12`.
`strtotime()`转换正确的日期字符串，并且此字符串导致空白输出。这可以解决，但我只能想到丑陋的方法。

有什么想法可以优雅地将这种日期格式转换为 UNIX 时间戳？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-04T09:53:45.277

这个怎么样`strtotime('Jun 26,12');`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T05:24:06.770

我用过`DateTime::createFromFormat`对我来说效果很好.. 更多信息[在这里](http://php.net/manual/en/datetime.createfromformat.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T07:23:33.153

嗯，`s/'/20/g'`？紧随其后的是`strtotime()`？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T07:45:55.113

也许是这样的？

```
$string = 'April 26,\'12';
echo strtotime(preg_replace('/(\w+) (\d+),\'(\d+)/i', '$2 $1 20$3', $string)); 
```

基于来自[php.net的示例](http://sk.php.net/manual/en/function.preg-replace.php#refsect1-function.preg-replace-examples)

# iphone - 从此示例代码的服务器中解析 xml 文件中的 xml 值

> ID：11324196
> 
> 赞同：0
> 
> 时间：2012-07-04T07:19:30.050
> 
> 标签：iphone, ios, xcode, nsurlconnection, nsxmlparser

我已经使用教程中的 xml 解析器创建了一个应用程序。但是发现本教程很简单。在这个 xml 文件中是从本地 xml 中解析的。但是如果我需要从 xml 文件中解析一个值，请说 www.xxxxx.com /xxx.xml ..如何修改代码...请指导..

```
- (void) applicationDidFinishLaunching:(UIApplication *)application {

// find "sample.xml" in our bundle resources
NSString *sampleXML = [[NSBundle mainBundle] pathForResource:@"sample" ofType:@"xml"];
NSData *data = [NSData dataWithContentsOfFile:sampleXML];

// create a new SMXMLDocument with the contents of sample.xml
NSError *error;
SMXMLDocument *document = [SMXMLDocument documentWithData:data error:&error];

// check for errors
if (error) {
    NSLog(@"Error while parsing the document: %@", error);
    return;
}

// demonstrate -description of document/element classes
NSLog(@"Document:\n %@", document);

// Pull out the <books> node
SMXMLElement *books = [document.root childNamed:@"books"];

// Look through <books> children of type <book>
for (SMXMLElement *book in [books childrenNamed:@"book"]) {

    // demonstrate common cases of extracting XML data
    NSString *isbn = [book attributeNamed:@"isbn"]; // XML attribute
    NSString *title = [book valueWithPath:@"title"]; // child node value
    float price = [[book valueWithPath:@"price"] floatValue]; // child node value (converted)

    // show off some KVC magic
    NSArray *authors = [[book childNamed:@"authors"].children valueForKey:@"value"];

    NSLog(@"Found a book!\n ISBN: %@ \n Title: %@ \n Price: %f \n Authors: %@", isbn, title, price, authors);
}
 } 
```

我已经尝试了很多教程这么多小时，最后我在我的应用程序中使用这些代码变得很好。但是我需要从服务器导入 xml 文件......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T07:32:21.417

显然，我不会编写您需要的所有代码（服务器访问 + XML 解析器 + 协议，至少要有一个体面的架构），这不是博客。所以：

1.  首先从服务器下载 XML 文件。您可以使用`NSURLConnection`，也可以使用 3rd 方库（例如[MKNetwKit](https://github.com/MugunthKumar/MKNetworkKit)）。
2.  从服务器获取数据 ( `NSData`) 后，您可以用它填充您的解析器。

简而言之就是这样。只是一个指针：

1.  请不要将您的 XML Parser 放入`applicationDidFinishLaunching:`其中，这没有任何意义。如果您需要在`applicationDidFinishLaunching:`完全有效的情况下使用它，请为 XML Parser 创建一个适当的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T07:39:07.107

好吧，它减少了两件事：获取 XML 字符串并解析它。为了获取 xml ，您必须简单地编写如下内容：

`NSError *error = nil; NSString *xmlString = [NSString stringWithContentsOfURL:[NSURL urlWithString:@"www.xxxxx.com/xxx.xml"] encoding:NSUTF8StringEncoding error:&error]`

之后，您将此字符串提供给解析器。据我所知，TBXML 是最快的，而且易于使用。你可以从[这里](https://github.com/71squared/TBXML)得到它。

之后，您需要遍历 XML 的节点，这很容易，您可以找到很多示例。[这是](http://www.tbxml.co.uk/TBXML/API.html)一些文档。

干杯!

# ruby - 数组中的Ruby递归替换

> ID：11324201
> 
> 赞同：1
> 
> 时间：2012-07-04T07:19:45.813
> 
> 标签：ruby, recursion

我有一个对象，`tree`。`tree`有一个属性，`tree.elements`。`tree.elements`是一个包含元素和可能的其他子树的数组，这些子树又将有自己的`elements`数组，依此类推。

如果树中的对象属于某个类，我需要一个能够替换树中对象的方法。问题是替换内联元素。

显然，以下方法不起作用：

```
[1,2,3].each { |n| n = 1 }
# => [1,2,3] 
```

但是，这将：

```
a = [1,2,3]
a.each_with_index { |n, idx| a[idx] = 1 }
# => [1,1,1] 
```

但是，我使用递归函数进行循环，并用内容替换占位符，如下所示：

```
def replace_placeholders(elements)
    elements.each do |e|
        if e.respond_to?(:elements) and e.elements.any?
            replace_placeholders(e.elements)
        elsif e.is_a? Placeholder
            e = "some new content" # << replace it here
        end
    end
end 
```

跟踪指数真的很复杂。我试过`e.replace("some new content")`了，但这不起作用。解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T07:23:45.903

我会创建一个新数组，而不是尝试就地更新。这些方面的东西应该起作用：

```
def replace_placeholders(elements)
  elements.map do |e|
    if e.respond_to?(:elements) and e.elements.any?
      e.elements = replace_placeholders(e.elements) # replace array
      e  # return e itself, so that map works correctly.
    elsif e.is_a? Placeholder
      "some new content"
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T07:23:36.730

使用数组#collect：

```
[1,2,3].collect { |n| 1 }
# => [1,1,1] 
```

并使用此块参数做任何你想做的事情。

所以你的代码会是这样的：

```
elements.collect{ |n| if n.respond_to?(:elements) and n.elements.any?
        replace_placeholders(n.elements)
    elsif n.is_a? Placeholder
        "some new content" # << replace it here
    end
} 
```

# javascript - 创建通用控制器功能

> ID：11324202
> 
> 赞同：40
> 
> 时间：2012-07-04T07:19:48.037
> 
> 标签：javascript, angularjs, web, angularjs-service

如何创建可以从我的所有控制器访问的某种 utils 包？

我的主模块中有这个路由代码：

```
'use strict';

angular.module('lpConnect', []).
    config(['$routeProvider', function($routeProvider) {
    $routeProvider.
        when('/home', {template: 'views/home.html', controller: HomeCtrl}).
        when('/admin', {template: 'views/admin.html', controller: AdminCtrl}).
        when('/connect', {template: 'views/fb_connect.html', controller: MainAppCtrl}).
        otherwise({redirectTo: '/connect'});
}]); 
```

我想要一个可以与和通用`HomeCtrl`的功能。`AdminCtrl``MainAppCtrl`

我应该如何在AngularJS中做到这一点？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-07-04T09:34:57.307

在 Angular 中定义通用代码的方法是通过服务。

您将像这样定义一个新服务：

```
.factory('CommonCode', function ($window) {
        var root = {};
        root.show = function(msg){
            $window.alert(msg);
        };
        return root;
    }); 
```

在您的控制器中，您将注入此服务..就像这样

```
function MainAppCtrl($scope,CommonCode)
{
     $scope.alerter = CommonCode;
     $scope.alerter.show("Hello World");
} 
```

只需将 CommonCode 作为参数包含在您的控制器函数中。Angular 会为您注入它（阅读依赖注入 ..以了解这里发生了什么。）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-10-14T07:37:09.670

只是为了更新以前的答案（仅定义是什么`factory`），有 3 种方法可以在 AngularJS中[注入依赖项（定义通用代码）：](https://docs.angularjs.org/guide/di)

*   提供者
*   工厂
*   服务

关于provider我就不多说了，因为它是一种比较费力的依赖注入方式。但是，[此页面](https://docs.angularjs.org/guide/providers)很好地解释了它们的工作原理。

* * *

从技术上讲，**服务**和**工厂**用于同一件事。事实证明，服务是构造函数，而工厂不是。

从[这篇文章](https://stackoverflow.com/questions/15666048/angularjs-service-vs-provider-vs-factory)：

```
module.service( 'serviceName', function ); 
```

> 当声明`serviceName`为可注入参数时，您将获得**该函数的一个实例**。

```
module.factory( 'factoryName', function ); 
```

> 当声明`factoryName`为可注入参数时，您将获得通过调用 传递给 module.factory**的函数引用返回的值。**

* * *

您可以使用您喜欢的那个并获得**相同的结果**。

这是两个代码，首先完成完全相同的事情[**`service`**](https://docs.angularjs.org/guide/services)，然后**`factory`**：

**服务语法**

```
app.service('MyService', function () {
  this.sayHello = function () {
    console.log('hello');
  };
}); 
```

**工厂语法**

```
app.factory('MyService', function () {
  return {
    sayHello: function () {
      console.log('hello');
    }
  }
}); 
```

# javascript - GeoExt 表单和文件上传

> ID：11324209
> 
> 赞同：1
> 
> 时间：2012-07-04T07:20:06.350
> 
> 标签：javascript, geoext

我有一个 GeoExt 表格，想在这里上传文件。但我从不使用 GeoEXT。我有这个。

```
buttons: [{
  text: 'Загрузить',
  handler: function(){
  if(fp.getForm().isValid() && Ext.getCmp('opinions').getValue()=="blabla"){
    form_action=1;
    fp.getForm().submit({
             url: '<portlet: actionURL>',
             waitMsg: 'WAITING...',
     success: function(fp, o) {
              DO SOMETHING
              }
             }
            }
          }] 
```

这是对的？
使用什么参数 `success: function(fp, o)`？第一个论点是`FormPanel`，但我不明白第二个是什么。另一个问题在这种情况下如何进行异步文件上传？

# php - 如何在 Eclipse 中添加新的 CVS？

> ID：11324211
> 
> 赞同：0
> 
> 时间：2012-07-04T07:20:23.690
> 
> 标签：php, eclipse, cvs, lan

我在本地使用 eclipse 开发了一个 PHP 项目。现在我需要将此项目共享到局域网中的另一个系统。
任何人都可以帮助我如何做到这一点..？
如何在 Eclipse 中添加 CVS ..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:12:48.893

1.  右键单击项目并选择团队 -> 共享项目
2.  选择存储库类型（根据您的需要 CVS）
3.  创建新的/使用现有的存储库位置并按照向导进行操作

    [看到这个！](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.user/tasks/tasks-117.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T07:30:21.933

我不确定我是否知道你的意思，但是......你必须用项目提交你的文件夹。右键单击它并选择 SVN - 提交。你不必触摸你的日食来做到这一点。

# php - 需要在 node.js 中转换我的 php 应用程序

> ID：11324221
> 
> 赞同：3
> 
> 时间：2012-07-04T07:21:00.840
> 
> 标签：php, node.js, express

我需要将我的应用程序平台从 php/apache 更改为 node.js ，但我不明白如何继续。
我的应用程序具有类似 codeigniter 的结构。
我想使用 express ，我已经阅读了它的官方 ste ，也是初学者的教程。代码没有问题，但不了解如何适应它的结构。
请帮助我提供一些不错的链接或示例

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-04T08:21:13.727

我不同意在使用 node.js 中提供的一些优秀库之前你应该自己动手。没有人建议您在使用 Ruby on Rails 或 ASP.NET MVC 之前构建自己的 MVC 框架。但是，您绝对**必须**了解 node.js 的优点和缺点以及如何有效地利用它们。

ASP.NET 和 PHP 是**比**node.js 更宽容的平台。如果您在大多数平台上做一些愚蠢的事情，您仍然可以部署并拥有一个功能系统。他们非常容忍糟糕的性能和草率的代码。如果您在 node.js 中搞砸了，整个网络服务器可能会在处理某些内容时简单地停止响应请求。

从 node.js 获得极好的性能和可扩展性是可能的，但您必须了解函数式编程并确保您编写的代码不会阻塞。您必须知道如何将中型和大型应用程序分解为单独的部分（我敢说*节点*吗？），这些部分知道如何进行通信以完成更复杂的任务。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-04T07:37:50.787

你甚至无法远程比较 node.js 和 PHP 之类的东西。Node.js 旨在提供全栈高性能 IO 框架，而不是基于您选择的 Web 服务器的脚本语言。

首先，您必须确保您完全理解 node.js 范式及其基于事件的架构。它与 ASP.NET 或 PHP 之类的东西完全不同，你真的必须重新考虑整个编程模型。为了实现这一点，从头开始学习 node.js 很重要！不要直接从诸如 express 或 flatiron 之类的框架开始。从基础开始学习：`console.log('Hello world')`

也许有一些好的起点：

*   [http://www.hongkiat.com/blog/node-js-server-side-javascript/](http://www.hongkiat.com/blog/node-js-server-side-javascript/)
*   [http://www.readwriteweb.com/hack/2011/04/6-free-e-books-on-nodejs.php](http://www.readwriteweb.com/hack/2011/04/6-free-e-books-on-nodejs.php)

一些进一步的链接： [node.js 开发人员的高级文档](https://stackoverflow.com/questions/5400533/advanced-documentation-for-node-js-developer/5401560#5401560)

# firefox - 是否有用于保存到最喜欢的表单后结果的 Firefox 扩展？例如，通过帖子形式的搜索结果？

> ID：11324229
> 
> 赞同：0
> 
> 时间：2012-07-04T07:21:40.673
> 
> 标签：firefox

是否有用于保存到最喜欢的表单后结果的 Firefox 扩展？例如，通过帖子形式的搜索结果？

每次都很难填写包含许多字段的大型表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T07:24:56.107

试试[roboform for Firefox](http://www.roboform.com/platforms/browsers/firefox)，你可以：

*   添加了书签的创建/编辑/保存。
*   添加了本地身份的编辑。
*   添加了当前文档字段的手动保存操作。
*   添加了重置/清除字段命令。

# sql - 德比数据库中限制记录组的sql

> ID：11324231
> 
> 赞同：5
> 
> 时间：2012-07-04T07:21:50.587
> 
> 标签：sql, derby

我只想在 derby 数据库中检索十条记录。我一直在寻找这样做的教程：

```
select * from (select  ROW_NUMBER() OVER() AS rownum,name,effort from (select  name, effort from
(select TBL_PROJECT_DETAIL.P_NAME as Name, sum(TBL_TIMESHEET.EFFORT) as effort from
TBL_TIMESHEET join tbl_project_detail on TBL_TIMESHEET.PROJECT_ID = TBL_PROJECT_DETAIL.ID group by TBL_PROJECT_DETAIL.P_NAME) as New)
as new2)
as new3 
where rownum <= 10 
```

我可以先使用 where`rownum <= 10` 最后将数据限制为 10，但问题是数据不是`order by`首先使用子句排序的，所以我得到了 10 个随机数据。

当我`order by`在数据之前给出`rownum`：

```
select * from (select  ROW_NUMBER() OVER() AS rownum,name,effort from 
(select  name, effort from
(select TBL_PROJECT_DETAIL.P_NAME as Name, sum(TBL_TIMESHEET.EFFORT) as effort from
TBL_TIMESHEET join tbl_project_detail on TBL_TIMESHEET.PROJECT_ID = TBL_PROJECT_DETAIL.ID group by TBL_PROJECT_DETAIL.P_NAME)
as New)
as new2 order by effot desc)
as new3  where rownum <=10 
```

它给出了错误。再次将结果作为内表进行查询时，它就像不能`group by`，但是对derby的要求是使用row_number。首先在内部添加 row_number 并在下一层中使用它。任何人都可以帮忙吗？德比不受支持限制。有什么其他方法可以让我先订购 10 条记录吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T06:50:49.053

我一直在研究，我发现这样可以通过使用来限制德比

```
FETCH FIRST 10 ROWS ONLY 
```

但是可怜的我，在 derby 10.5 中的支持，我正在使用 derby 10.4 捆绑包和 glassfish 2.1，如果我仍然使用 10.4，任何人都可以帮助解决这个问题，因为我太害怕迁移了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T07:32:24.290

您可以在“OVER()”中给出 order by 子句

```
OVER(order by effot desc) AS rownum 
```

# jquery - 如何将一个孩子附加为倒数第二个。（就在最后）

> ID：11324232
> 
> 赞同：0
> 
> 时间：2012-07-04T07:21:53.180
> 
> 标签：jquery

我有一个应用程序，您可以将其想象为 Facebook 评论系统，其中发布、该帖子的评论以及用于发布您的评论的新文本区域可用。

例子 -

```
post1.. All comments for that post.. text area for new comment
post2.. All comments for that post.. text area for new comment
post3.. All comments for that post.. text area for new comment 
```

. .

我的问题是，当我发布新评论时，它会附加在文本区域之后。我想在文本区域之前发布评论以及所有评论。我应该如何使用 JQuery append 方法来实现这个功能。

提前致谢。萨普纳

你可以参考这个 url.. [http://wowopage.in/cgi-bin/requests.pl](http://wowopage.in/cgi-bin/requests.pl) 尝试响应任何请求，你会得到确切的问题。要提供响应，您必须登录。请使用我的凭据。sapnakool4u@gmail.com 和 passs-sapna

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T07:26:06.410

选择`textarea`并使用[jQuery before](http://api.jquery.com/before/)。例如：

```
$('#post1 textarea').before(stringWithNewComments); 
```

（因为您还没有发布整个 html，所以选择器只是一个示例，您必须对其进行更新。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T07:26:22.443

您没有提供任何标记，因此很难猜测...无论如何您都可以使用

```
.before 
```

追加文本区域之前的内容

[http://api.jquery.com/before/](http://api.jquery.com/before/)

# tridion - 组件的工作流给出错误 - “新项目或空 URI 不支持操作。”

> ID：11324233
> 
> 赞同：0
> 
> 时间：2012-07-04T07:21:53.263
> 
> 标签：tridion

我创建了一个组件，该组件使用了一个架构，其中应用了默认工作流-“内容批准流程”。但是现在，如果创建了组件，它将转到指定的用户，并且当该用户完成活动时，它会给出错误-“新项目或空 URI 不支持操作。” 有人可以解释一下如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T18:07:01.713

您可能正在尝试运行一些需要签入版本的组件的操作。由于它尚不存在（版本 1 尚未批准），Tridion 抱怨它。

发布错误来源的代码，我们可能会提供进一步的帮助。

[编辑]

重新阅读后，我非常肯定在 SAVE 上触发了一个事件，并假设组件的版本 1 已经存在。检查您的事件系统。

# c# - 从枚举绑定 DropDownList SelectedValue

> ID：11324238
> 
> 赞同：0
> 
> 时间：2012-07-04T07:22:09.893
> 
> 标签：c#

我有像 Salutation 这样的枚举

```
public enum SALUTATION
{
    MR = 1,
    MS = 2,
    MRS = 3,        
} 
```

在我的`staff`课堂上，我的`Salutation`财产就像，

```
public SALUTATION Salutation
{
     get;
     set;
} 
```

在这里，在编辑员工资料时，我只是绑定了数据库中的数据。对于称呼，我只是尝试像这样绑定称呼

```
ddlSalutation.SelectedValue = Enum.GetName(typeof(SALUTATION), staff.Salutation); 
```

但它`-1`一如既往地绑定 selectedValue 。如何绑定 ddl 所选项目中的确切值。有人能帮我一下吗..

在页面加载事件中，我只是将 ddl 源绑定为

```
 Hashtable hashSalutation = Utilities.GetEnumList(typeof(SALUTATION));
            ddlSalutation.DataSource = hashSalutation;
            ddlSalutation.DataTextField = "value";
            ddlSalutation.DataValueField = "key";
            ddlSalutation.DataBind();

            ddlSalutation.Items.Insert(0, new ListItem("Select Salutation", "-1"));

public Hashtable GetEnumList(Type enumeration)
    {
        string[] names = Enum.GetNames(enumeration);
        Array values = Enum.GetValues(enumeration);
        Hashtable ht = new Hashtable();
        for (int i = 0; i < names.Length; i++)
        {
            ht.Add(Convert.ToInt32(values.GetValue(i)).ToString(), names[i]);
        }
        return ht;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T07:28:53.307

首先将其设置为您的数据源

```
ddSalutation.DataSource = Enum.GetNames(typeof(Salutations)); 
```

然后对于选定的值

```
ddlSalutation.SelectedValue = staff.Salutation.ToString(); 
```

# objective-c - 无法将数组从一个类传递到另一个 iphone

> ID：11324239
> 
> 赞同：0
> 
> 时间：2012-07-04T07:22:11.247
> 
> 标签：objective-c, ios, ios5, ios4

我有一个愚蠢的怀疑，但我需要正确理解它。我已经提到了一些关于此的帖子，但它们仍然让我感到困惑。

我有一个数组，它由我从解析 xml 中获得的一组 url 组成，我像这样存储数组：

解析器

```
else if([elementName isEqualToString:@"image"]){
    self.img.imageUrl = self.currentElement;
     [[self URL_array]addObject:img.imageUrl]; 

} 
```

如果我记录内容，它会给出如下内容：

```
the URL ARRAY IS --------------------->>>>(
"http://www.bedfordevents.co.uk/images/stories/template/GallerySlideshow/b10.jpg\n",
"http://www.bedfordevents.co.uk/images/stories/template/GallerySlideshow/b11.jpg\n",
"http://www.bedfordevents.co.uk/images/stories/template/GallerySlideshow/b12.jpg\n",
"http://www.bedfordevents.co.uk/images/stories/template/GallerySlideshow/b13.jpg\n", 
```

我需要将此数组传递给另一个类/视图控制器，为此我在 Parser.m 文件中一直这样做

```
ViewController *control = [[ViewController alloc]init];
control.image_array = URL_array; 
```

视图控制器有一个数组`image_array`

我像这样调用 ViewController.m 中的数组

```
NSLog(@"array is----->>%@ ",self.image_array); 
```

但`image_array`返回 null;

我相信我在某处做错了，谁能指出我的错误并帮助我？

谢谢你。

**编辑**

代码更新。现在我在 ViewController 中有一个方法，如所说

```
-(void)updateImageArray:(NSMutableArray *)imageArray{
self.image_array = [NSMutableArray arrayWithArray:imageArray];
NSLog(@"array is in here-------->>>>%@",self.image_array);
} 
```

并打电话给

```
[control updateImageArray:URL_array]; 
```

在我的 Parser.m 中，数组显示在 ViewController.m 及其工作的日志中

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:33:18.417

那要看`control.image_array`物业的模式。因此，如果它被分配，则数组的引用计数不会增加，并且如果源上下文（Parser.m）释放他，则可能会被释放。所以在 ViewController 的界面中应该是

```
@property(retain, nonatomic)NSArray* image_array 
```

或者如果您使用 ARC：

```
@property(strong, nonatomic)NSArray* image_array 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:40:13.200

从您在评论中写的内容来看，似乎`viewDidLoad`在您设置 image_array.

您可以添加方法`[control updateImageArray:URL_array]`，然后在此方法中设置`self.image_array = [NSArray arrayWithArray:URL_array];`并根据需要刷新 UI

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T08:23:27.197

根据您的描述，我认为您正在 parser.m 中创建 ViewController 的对象，并且您尝试`log NSLog(@"array is----->>%@ ",self.image_array)`使用 ViewController 的另一个对象，其图像数组的值为 nil。（尝试记录 self ，控制器都将不同）。

如果您`log NSLog(@"array is----->>%@ ", control.image_array)`来自 parser.m，它将起作用。

如果您需要在 ViewController.m 上记录它，您可以使用委托方法或将 ViewController 的对象（即控制）从 parser.m 传递到 ViewController.m，为此您可以使用外部变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T10:25:47.843

您必须在 ViewController 中覆盖 image_array 的 getter 方法。这将是由记忆准好。

在 ViewControler.m 中

```
@synthesize image_array = _image_array;

-(NSMutableArray *)image_array {  
    if(_image_array == nil) {
       _image_array = [[NSMutableArray alloc]initWithCapacity:0];
      } 
  return _image_array;
} 
```

然后这样做

```
[control setImage_array:URL_array]; 
```

虽然你可以简单地做 `[control setImage_array:URL_array];`

# java - 从另一个 apk 加载资源（布局）

> ID：11324253
> 
> 赞同：3
> 
> 时间：2012-07-04T07:23:26.863
> 
> 标签：java, android, eclipse, xml-parsing, layout-inflater

我想知道是否可以从另一个 apk 加载布局 xml 文件。我知道如何访问其他应用程序资源，但我不确定如何加载 xml，如果可能的话。

如果我想使用布局充气器将该布局设置为视图，是否必须解析 xml？

有点像这些步骤...

1.  使用 XmlPullParser.setInput “加载” XML 文件
2.  将其转换为 AttributeSet
3.  从此 AttributeSet 创建一个视图
4.  在您的活动中使用 setContentView(View)

我想我在问什么，这甚至可能吗？就像我说的，我知道如何访问资源。但是我将如何访问布局 xml？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T12:29:37.323

我设法拉出布局，并将其添加到我的取景器中，但是，它在那里加载为空白。

```
Resources packageResources;
Context packageContext;
try
{   
    packageResources = pm.getResourcesForApplication(packageName);
    packageContext = this.createPackageContext(packageName,  Context.CONTEXT_INCLUDE_CODE + Context.CONTEXT_IGNORE_SECURITY);                
}
catch(NameNotFoundException excep)
{
    // the package does not exist. move on to see if another exists.
}

Class layoutClass;
try
{
   // using reflection to get the layout class inside the R class of the package
   layoutClass = packageContext.getClassLoader().loadClass(packageName + ".R$layout");
}
catch (ClassNotFoundException excep1)
{
   // Less chances that class won't be there.
}

for( Field layoutID : layoutClass.getFields() )
{
   try
   {
       int id = layoutID.getInt(layoutClass);
       XmlResourceParser xmlResourceLayout = packageResources.getLayout(id);

       View v = new View(this, Xml.asAttributeSet(xmlResourceLayout));

       this.viewFlipper.addView(v);                 
    }
    catch (Exception excep)
    {
        continue;
    }
} 
```

我没有收到任何错误，我进行了调试和检查。布局 ID 正确。但是，在我看来Flipper 只是空白。我找不到任何警告或错误。

终于找到了解决方案...已经在下面发布了，

[从另一个 apk 动态加载资源（布局）](https://stackoverflow.com/questions/13218819/load-resource-layout-from-another-apk-dynamically/13221270#13221270)

# java - 无法删除具有 OneToMany 关系的记录

> ID：11324255
> 
> 赞同：3
> 
> 时间：2012-07-04T07:23:34.070
> 
> 标签：java, hibernate

当我在一个表中删除一条记录时，应该在另一个表中删除相关记录。但我改为收到：

> > java.sql.BatchUpdateException：批处理条目 0 更新 child_table 设置 parent_table_id=null 其中 parent_table_id=63 被中止

上面的异常是针对以下设置引发的：

```
@OneToMany(cascade = javax.persistence.CascadeType.ALL, targetEntity = ChildTable.class)
@JoinColumn(name = "parent_table_id")
@org.hibernate.annotations.Fetch(FetchMode.SUBSELECT)
public List<ChildTable> getTables() {
    return tables;
} 
```

如果我没记错的话，有了这样的注释，当在ParentTable中删除一条记录时，应该在Child one中删除对应关系。在完全删除之前，它会尝试变为“null”（因为相应的记录不再存在）。此 id 列是“非空”。当我将其设为“null”（仅用于测试这种情况）时，一切正常。

你能帮我理解这背后的真正问题是什么吗？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T08:58:14.863

我通常不使用注释。我更喜欢 hbm 映射文件，所以我可以告诉你一些可能的 hbm 映射解决方案。:) 我认为您需要在父级一对多关系中添加 inverse=true 。[始终将 inverse=true 放在您的父集合](http://www.mkyong.com/hibernate/inverse-true-example-and-explanation/)中。有关 inverse=true 等价的注释，请参阅[此](https://stackoverflow.com/questions/4865285/inverse-true-in-jpa-annotations)。

如果这不起作用，我知道这不是一个好的解决方案，您可以尝试在父级的一对多关系中使用 not-found="ignore" 或 @NotFound(action=NotFoundAction.IGNORE) . 最终，它与为数据库中的外键列设置 not-null=false 具有相同的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T07:45:57.390

其中一位响应者给出了正确答案，但他将其删除。我不得不使用休眠级联注释而不是 JPA 注释。它对我不起作用，因为问题比仅仅使用 JPA 和休眠注释更深一点。ChildTable 的映射器类具有 int 类型的 parent_table_id 而不是映射 id 字段的 ParentTable 类类型。所以我将其更改为：

```
@Entity
@Table(name = "child_table")
public class ChildTable {

private int id;
private int parent_table_id;
... 
```

至

```
@Entity
@Table(name = "child_table")
public class ChildTable {

private int id;
private ParentTable parent_table;
... 
```

肯定进行了一些额外的更改（连接到这个），并且删除开始按预期工作。

因此，如果您在删除一对多关系中的实体时遇到相应错误，并且注释使用情况一切正常，请检查映射器类中的类型、您的字段：)

# c# - 如果我不使用 Ajax 工具包，我可以在 asp.net 中使用 CombineAndMinify

> ID：11324258
> 
> 赞同：2
> 
> 时间：2012-07-04T07:23:39.570
> 
> 标签：c#, asp.net, ajax, minify

我想加快我网站的加载时间。
我研究过为 Asp.net 实现“CombineAndMinify”dll 或包。
我的网站没有使用 Ajax 工具包，所以我还能使用“CombineAndminify”吗？
或者还有比这更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:27:53.190

下一版本的 asp.net (asp.net 4.5) 中内置了捆绑和缩小功能。

您是否将其视为一种选择？

*   [http://blogs.msdn.com/b/rickandy/archive/2012/06/13/asp-net-bundling-and-minification.aspx](http://blogs.msdn.com/b/rickandy/archive/2012/06/13/asp-net-bundling-and-minification.aspx)

我相信 RC 具有 golive 许可证，因此您现在可以使用它部署实时应用程序。

或者，有一个开源库，称为盒式磁带，可以帮助您在旧版本中实现这一目标：

*   [http://getcassette.net/](http://getcassette.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T07:28:14.527

您可以使用任何程序预先组合和缩小您的代码，然后在您的在线站点上使用此静态文件，当然首先要在开发人员机器上对其进行测试。

您也可以实时进行相同的思考，但需要大量代码。

我建议使用 Microsoft Ajax Minifier：[http ://www.asp.net/ajaxlibrary/AjaxMinQuickStart.ashx](http://www.asp.net/ajaxlibrary/AjaxMinQuickStart.ashx)

因为我使用它并且效果很好，并且不仅可以离线而且可以在线进行缩小。要使其在线工作，您需要下载并包含 Ajax Minfier dll（不是 Ajax Control Toolkit），您可以在此处获取它：[http ://www.asp.net/ajaxlibrary/Download.ashx](http://www.asp.net/ajaxlibrary/Download.ashx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T07:34:23.820

这个库将使用 YUI 库处理缩小，也可以切换到 CDN。这是一个选择。

# mysql - node.js - 如何扩展 mysql 结果对象

> ID：11324262
> 
> 赞同：0
> 
> 时间：2012-07-04T07:23:56.823
> 
> 标签：mysql, node.js, node-mysql

我是一个长期的 PHP 开发人员，今天决定给 node.js 并表达一个尝试。我正在尝试找到将结果合并到单个对象中的最佳方法。我可能会像 PHP 开发人员一样接近这一点，并且可以使用一些帮助。提前致谢。

```
app.get('/api/posts', function(req, res) {
    url_parts = url.parse(req.url, true)
    query = url_parts.query
    current_page = query.page || 1
    items_per_page = 50
    start_index = (current_page - 1) * items_per_page
    max_page = 1000

    var getPosts = {
        db: function() {
            var posts = {}
            connection.query('SELECT COUNT(*) AS count FROM rss', function(err, rows1, fields) {
                if (!err)
                {
                    total_pages = Math.ceil(rows1[0].count / items_per_page)

                    if (start_index < rows1[0].count || start_index < max_page)
                    {
                        sql = 'SELECT id, title, image, width, height, url FROM rss ORDER BY date DESC LIMIT '+start_index+', '+items_per_page
                        connection.query(sql, function(err, rows2) {
                            if (!err)
                            {
                                for (var i in rows2)
                                {
                                    comments = 'SELECT comment FROM comments WHERE section_id = '+rows2[i].id+' ORDER BY date DESC'
                                    connection.query(comments, function(err2, rows3) {
                                        //COMBINE RESULTS HERE
                                        //rows2[i].comments = rows3
                                    });
                                }

                                //res.json(rows2)
                               // DISPLAY RESULTS HERE
                            }
                            else
                            {
                                console.log(err)
                            }
                        });
                    }
                }
                else
                {
                    console.log(err)
                }
            });
        }
    }

    getPosts.db();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T15:15:44.710

AlexGrad 使用异步模块是正确的，它将帮助您更好地组织代码（并且还可以帮助阻止事件循环，但这里不太可能出现这种情况）。您还应该按照他的建议使用`?`角色进行转义。

对于您的实际问题，通过将结果添加为临时属性来组合结果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T13:15:02.697

无论你做什么，都不要用 Node 创建循环。这只会创建一个阻塞调用。您需要使用回调。您可以手动执行这些操作，也可以使用有帮助的库。我喜欢异步（https://github.com/caolan/async），所以这里用异步替换循环代码。

```
 async.forEachSeries(rows1, function(row, callback) {

       sql = 'SELECT id, title, image, width, height, url FROM rss ORDER BY date DESC LIMIT '+start_index+', '+ items_per_page
       connection.query(sql, function(err, rows2) {
           if (!err) {
               async.forEachSeries(rows2, function(row2, callback2) {
                      // do whatever processing you will do here.
                      // now call the callback2 to signal you have finished processing.
                      callback2();
               },function(err) {
                      // handle any errors that might occur in your 'loop' here.
               });
           }
    callback()
},function(err) {

}); 
```

对您的代码的另一个建议是您永远不应该手动构建您的 SQL。利用 ？参数。例如：

```
connection.query("SELECT id, title, image, width, height, url FROM rss ORDER BY date DESC LIMIT ?,?", [start_index, items_per_page], function(err, rows, fields) {
...do your processing
} 
```

希望这可以帮助。

# version-control - 将版本控制存储库添加到 MonoDevelop

> ID：11324264
> 
> 赞同：0
> 
> 时间：2012-07-04T07:24:12.373
> 
> 标签：version-control, monodevelop

有人可以指导我如何在 MonoDevelop 中设置版本控制存储库吗？使用 Xcode 我已经设置了一个本地存储库（在我的 Mac 上），但我想在另一台机器上（或在网络上）使用远程存储库。我查看了[使用源代码控制](http://monodevelop.com/Documentation/Version_Control_Screencast)的截屏视频，但它没有解释如何使用“连接到存储库”窗口。我已经在 Windows 机器上设置了一个存储库（使用 Windows Git gui），但是当我尝试连接到它时 MonoDevelop 找不到路径（我可以使用 Mac 上的 Finder 读取和写入其他文件到同一路径）。此外，MonoDevelop 中似乎存在一个错误，即在无法连接到存储库后，无法重新启动该过程，唯一的选择是“删除”

（我有使用 Microsoft SourceSafe 的经验，但没有使用 git）。谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:36:44.530

好的，我发现了在 URL 中输入什么来在远程机器上设置存储库：我不知道“/Volumes ...”要求，例如 /Volumes/macshare - 我仍在学习与 Windows 的差异我猜测。关于从源代码管理中删除时的错误，已通知 MonoDevelop（错误 6014）

# python - 使用 pylab 生成热图

> ID：11324267
> 
> 赞同：8
> 
> 时间：2012-07-04T07:24:35.053
> 
> 标签：python, ipython, matplotlib, heatmap

我得到了一个二维数据数组，我想使用 pylab 将其绘制为热图。我只找到了使用法线点构建热图的解决方案，但没有找到映射`f(x,y) = heat`到热图的方法。

PS：ipython 结合 pylab 做这些事情真是太棒了:)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-04T08:56:40.573

事实证明它相当容易：

```
import pylab as pl
data = pl.random((25,25)) # 25x25 matrix of values
pl.pcolor(data)
pl.colorbar()
pl.show() 
```

# java - 实例化泛型类型的警告

> ID：11324270
> 
> 赞同：0
> 
> 时间：2012-07-04T07:24:46.567
> 
> 标签：java, generics

我有一个用于实例化泛型类型的代码片段，如下所示：

```
public class GenericMessageMapper<I ,X>
{
   public X xFromI(I imf)
   {
      // do thing by imf argument
      Class<X> clazz = (Class<X>)((ParameterizedType)
                                   this.getClass()
                                       .getGenericSuperclass())
                                       .getActualTypeArguments()[1];
      X x = clazz.newInstance(); 
   }
} 
```

上面的代码工作正常，但通过此消息在代码上显示警告（准备变量行`MyEclipse`上的黄色下划线）：`clazz``Type safety: Unchecked cast from Type to Class<X>`

我在方法的上面临时添加了以下注释`xFromI`：

```
@SuppressWarnings("unchecked") 
```

此警告的原因是什么，解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T07:36:10.213

警告就是这样。一个警告。有时警告是无关紧要的，有时则不是。它们用于提醒您注意编译器认为可能是问题但可能不是问题的事情。

在强制转换的情况下，它总是会在这种情况下发出警告。如果您绝对确定特定演员表是安全的，那么您应该考虑在该行之前添加这样的注释：

```
@SuppressWarnings (value="unchecked") 
```

参考[类型安全：未经检查的演员表](https://stackoverflow.com/questions/262367/type-safety-unchecked-cast)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T07:34:15.833

这仅意味着该类的类型仅​​在运行时才知道，因此可能会出现您认为应该获得 X 类型的类但实际上它是其他类型的情况（它在编译时不知道）因为 X 可以是任何类型）。

基本上你可以忽略这个警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T07:56:30.883

[ftom2](https://stackoverflow.com/users/812303/ftom2)是正确的 - 在通常情况下，您应该在转换`instanceof`之前执行实例检查 ( )，以防出现此警告。但在您的情况下，这是不可能的，因为 Java 中的泛型是通过擦除实现的。`Class<X>`不是具体类型，因此不可能使用它，例如检查，关闭警告的唯一方法是使用`@SuppressWarnings(value = "unchecked")`. 要了解有关泛型的更多信息，您可以使用[这](http://books.google.ru/books/about/Java_Generics_And_Collections.html?id=zaoK0Z2STlkC&redir_esc=y)本书。

# python - python中默认的__hash__是什么？

> ID：11324271
> 
> 赞同：69
> 
> 时间：2012-07-04T07:24:47.953
> 
> 标签：python

我经常使用时髦的东西作为字典的键，因此，我想知道正确的方法是什么——这通过为我的对象实现良好的哈希方法。我知道这里提出的其他问题，例如[实现**hash**](https://stackoverflow.com/questions/2909106/python-whats-a-correct-and-good-way-to-implement-hash)的好方法，但我想了解默认值如何`__hash__`用于自定义对象，以及是否可以依赖它。

我注意到可变对象是明确不可散列的，因为`hash({})`会引发错误......但奇怪的是，自定义类是可散列的：

```
>>> class Object(object): pass
>>> o = Object()
>>> hash(o) 
```

那么，有人知道这个默认哈希函数是如何工作的吗？通过理解这一点，我想知道：

如果我将相同类型的对象作为字典的键放置，我可以依赖这个默认哈希吗？例如：

```
key1 = MyObject()
key2 = MyObject()
key3 = MyObject()
{key1: 1, key2: 'blabla', key3: 456} 
```

如果我使用不同类型的对象作为字典中的键，我可以依赖它吗？例如

```
{int: 123, MyObject(10): 'bla', 'plo': 890} 
```

在最后一种情况下，如何确保我的自定义哈希不会与内置哈希冲突？例如：

```
{int: 123, MyObject(10): 'bla', MyObjectWithCustomHash(123): 890} 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-04T07:57:11.817

您可以依赖什么：自定义对象有一个默认值`hash()`，它以某种方式基于对象的身份。即，任何使用默认散列的对象在其生命周期内都将具有该散列的常量值，并且不同的对象可能具有也可能不具有不同的散列值。

您不能依赖于返回的`id()`值与返回的值之间的任何特定关系`hash()`。在 Python 2.6 和更早版本的标准 C 实现中，它们在 Python 2.7-3.2 中是相同的`hash(x)==id(x)/16`。

**编辑：**最初我写道，在 3.2.3 及更高版本或 2.7.3 或更高版本中，哈希值可能是随机的，而在 Python 3.3 中，关系将始终是随机的。事实上，目前随机化只适用于散列字符串，所以事实上除以 16 的关系可能会继续存在，但不要指望它。

散列冲突通常无关紧要：在字典查找中查找对象必须具有相同的散列并且还必须比较相等。仅当您遇到非常高比例的冲突时，冲突才有意义，例如拒绝服务攻击导致最新版本的 Python 能够随机化哈希计算。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-04T07:33:56.183

该[文档](http://docs.python.org/glossary.html#term-hashable)指出自定义对象依赖于[`id()`](http://docs.python.org/library/functions.html#id)它们的`hash()`实现：

> CPython 实现细节：这是对象在内存中的地址。

如果您将自定义对象与内置类型（如`int`它们）混合使用，则可能是哈希冲突，但如果它们均匀分布，那根本没有问题。除非您真的遇到性能问题，否则不要进行太多调查。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-11-06T17:31:19.613

在 Python 3 中，以下函数用于对象的子类`object`（`id()`来自`pyhash.c`）

```
Py_hash_t
_Py_HashPointer(void *p)
{
    Py_hash_t x;
    size_t y = (size_t)p;
    /* bottom 3 or 4 bits are likely to be 0; rotate y by 4 to avoid
       excessive hash collisions for dicts and sets */
    y = (y >> 4) | (y << (8 * SIZEOF_VOID_P - 4));
    x = (Py_hash_t)y;
    if (x == -1)
        x = -2;
    return x;
} 
```

`SIZEOF_VOID_P`64 位 Python 为 8，32 位 Python 为 4。

```
>>> class test: pass
...
>>> a = test()
>>> id(a)
4325845928
>>> hash(a)
-9223372036584410438 
```

您可以看到哈希是`id(a)`使用公式计算得出的，其中对有符号整数`(id(a) >> 4) | (id(a) << (8 * SIZEOF_VOID_P - 4))`执行按位运算。`C`例如，对于`a`上面定义的：

```
>>> import numpy
>>> y = numpy.array([4325845928], dtype='int64')
>>> SIZEOF_VOID_P = 8
>>> (y >> 4) | (y << (8 * SIZEOF_VOID_P - 4))
array([-9223372036584410438]) 
```

请注意，我使用`numpy.array(dtype='int64')`的是按位运算的行为方式与在 C 中的方式相同（如果您对 Python int 执行相同的操作，则会得到不同的行为，因为它们不会溢出）。请参阅[https://stackoverflow.com/a/5994397/161801](https://stackoverflow.com/a/5994397/161801)。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-07-04T08:05:53.483

用户定义的类的默认哈希是只返回它们的 id。这给出了一种通常有用的行为；使用用户定义类的实例作为字典键将允许在再次提供*完全相同的对象*以查找值时检索关联的值。例如：

```
>>> class Foo(object):
    def __init__(self, foo):
        self.foo = foo

>>> f = Foo(10)
>>> d = {f: 10}
>>> d[f]
10 
```

这匹配用户定义类的默认相等性：

```
>>> g = Foo(10)
>>> f == g
False
>>> d[g]

Traceback (most recent call last):
  File "<pyshell#9>", line 1, in <module>
    d[g]
KeyError: <__main__.Foo object at 0x0000000002D69390> 
```

请注意，即使`f`和`g`具有相同的属性值，它们也不相等，并且在查找`g`中`d`找不到存储在 下的值`f`。此外，即使我们更改 的值，`f.foo`查找仍然会找到该值：`f``d`

```
>>> f.foo = 11
>>> d[f]
10 
```

`__eq__`假设是一些任意新类的实例应该被视为非等价的，除非程序员通过定义和明确声明两个实例被视为等价的条件`__hash__`。

这非常有效；如果我定义一个`Car`类，我可能会认为两辆具有相同属性的汽车代表两辆不同的汽车。如果我有一本将汽车映射到注册车主的字典，我不想在查找 Bob 的汽车时找到 Alice，即使 Alice 和 Bob 碰巧拥有相同的汽车！OTOH，如果我定义一个类来表示邮政编码，我可能确实想考虑两个具有相同代码的不同对象是“相同”事物的可互换表示，在这种情况下，如果我有一个将邮政编码映射到州的字典，我显然希望能够找到具有表示相同邮政编码的两个不同对象的相同状态。

我将此称为“值类型”和“对象类型”之间的区别。值类型代表一些值，这是我关心的**值，而不是每个单独对象的身份。**产生相同值的两种不同方式同样好，并且围绕值类型传递的代码的“合同”通常只是承诺为您提供具有某些值的对象，而不指定它是哪个特定对象。对于对象类型 OTOH，每个单独的实例都有自己的标识，即使它包含与另一个实例完全相同的数据。围绕对象类型传递的代码“契约”通常承诺跟踪确切的单个对象。

那么为什么内置的可变类不使用它们的 id 作为它们的哈希呢？这是因为它们都是*容器*，我们通常认为容器大多类似于值类型，它们的值由包含的元素决定：

```
>>> [1, 2, 3] == [1, 2, 3]
True
>>> {f: 10} == {f: 10}
True 
```

但是*可变*容器的值是*瞬态*的。一些给定的列表*当前*具有该值`[1, 2, 3]`，但它可以被变异为具有该值`[4, 5, 6]`。如果您可以使用列表作为字典键，那么我们必须就查找是否应该使用列表的（当前）值或其标识做出裁决。无论哪种方式，当当前用作字典键的对象的值通过变异来更改时，我们都会（非常）惊讶。**仅当对象的值是**它的标识，或者对象的标识与其值无关时，将对象用作字典键才有效。所以 Python 选择的答案是声明可变容器不可散列。

* * *

现在，回答您的直接问题的更具体细节：

1）由于CPython中的这个默认散列（虽然显然只有<2.6，根据其他答案/评论）映射到对象的内存地址，所以在CPython中，没有两个同时使用默认散列的对象可能会发生冲突它们的哈希值，不管涉及的类是什么（如果它被存储为字典键，它就是实时的）。我还希望其他不使用内存地址作为散列的 Python 实现仍然应该在使用默认散列的对象之间具有良好的散列分布。所以是的，你可以依靠它。

2）只要您不返回与某个现有对象的哈希值完全相同的结果作为您的自定义哈希值，您就应该相对没问题。我的理解是，Python 的基于散列的容器相对可以容忍次优散列函数，只要它们没有完全退化。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-04T07:30:18.263

```
>>> class C(object):
...     pass
... 
>>> c = C()
>>> hash(c) == id(c)
True 
```

见函数[ID](http://docs.python.org/library/functions.html#id)

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2015-08-27T09:17:30.433

```
>>> class C(object):
...     pass
... 
>>> c = C()
>>> hash(c) == id(c)
False
>>> hash(c) == id(c)/16
True 
```

除以 16 为真

# css - 如何在不使用 inline-height 的情况下垂直对齐 div 内的文本

> ID：11324272
> 
> 赞同：1
> 
> 时间：2012-07-04T07:24:50.083
> 
> 标签：css, webforms, text-alignment

在下面的示例中，我试图垂直和水平对齐中间的文本。

由于某种原因它没有正确出现我也尝试了几个例子

[http://jsfiddle.net/kayen/JBnbG/](http://jsfiddle.net/kayen/JBnbG/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T07:30:31.307

你可以添加到你的**CSS**

```
text-align: center;
line-height: 30px; 
```

[http://jsfiddle.net/JBnbG/4/](http://jsfiddle.net/JBnbG/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T07:33:07.360

演示[http://jsfiddle.net/AMcnZ/22/](http://jsfiddle.net/AMcnZ/22/)

第二次演示[http://jsfiddle.net/AMcnZ/32/](http://jsfiddle.net/AMcnZ/32/)

```
.boxcaption{
        float: left;
        position: absolute;
        background: #000;
        height: 25px;
        width: 100%;
        opacity: .6;
        padding-top:3px;
       text-align:center;
        /* For IE 5-7 */
        filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=60);
        /* For IE 8 */
        -MS-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";
         } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T07:34:19.487

这是您可以使用 CSS 执行的操作并获得结果：http: [//jsfiddle.net/surendraVsingh/AMcnZ/31/](http://jsfiddle.net/surendraVsingh/AMcnZ/31/)

`height`从中删除`.boxcaption`。

```
.boxcaption{
    float: left;
    position: absolute;
    background: #000;
    width: 100%;
    text-align:center; /*Add this*/
    padding:5px 0 0 0; /*Add this*/
    opacity: .6;
    /* For IE 5-7 */
    filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=60);
    /* For IE 8 */
    -MS-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=60)";
} 
```

# makefile - 什么是最优化的makefile规则来创建一个需要大量中间和（大部分）无用文件的对象

> ID：11324275
> 
> 赞同：1
> 
> 时间：2012-07-04T07:24:52.300
> 
> 标签：makefile

我有一些先决条件：A、B 和 C 并且想要构建 F（最终）

我可以编写 make 规则（`create`并且`update`每个命令都不同）

```
F : A B C
    create A1 from A 
    create A2 from A1
    create A3 from A2
    create B1 from B
    create F from C
    update F with B1
    update F with A3 
```

或者

```
F : C B1 A3
    create F from C
    update F with B1
    update F with A3        
B1 : B
    create B1 from B
A3 : A2
    create A3 from A2
A2 : A1
    create A2 from A1
A1 : A
    create A1 from A 
```

知道什么是最可靠、最快速的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T07:30:08.193

Makefile 中的粒度更细是可取的。如果管道中的一项作业失败，您可以更正错误并在 make 死亡的地方找到它。此外，规则更易于阅读。

具有单个规则和许多命令的表单执行速度稍快，因为检查的时间戳更少，需要评估的规则也更少；但是，时间差无关紧要。

# lua - 如何将类模块（不会显示）添加到导演类？

> ID：11324286
> 
> 赞同：0
> 
> 时间：2012-07-04T07:25:34.693
> 
> 标签：lua, coronasdk

我有一个名为bird.lua 的对象类，我只想在初始化并为鸟类添加属性时使用该类。我可以将它与导演课程一起使用吗？实际上，我的问题是我需要根据导演类来安排我所有的 lua 文件吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:34:25.673

是的，完全可以做到；我个人在我的游戏中使用了面向对象层次结构中的导演类。

[使用OWL（带有 Lua](http://developer.coronalabs.com/code/owl-objects-lua)的对象）非常有效

我用 OWL 创建了我的继承，并轻松地将这些对象与 director 类一起使用；

如果您需要进一步的帮助，我可以为您提供示例代码。

# wolfram-mathematica - 曲面的 Bézier 曲面补丁

> ID：11324290
> 
> 赞同：1
> 
> 时间：2012-07-04T07:25:56.053
> 
> 标签：wolfram-mathematica, interpolation, bezier

在 Mathematica 中使用“BezierFunction”很容易生成曲面形式的三次 Bézier 补丁（作为 3D 点列表）

例子：

```
pts = {{{0, 0, 0}, {0, 1, 0}, {0, 2, 0}, {0, 3, 0}}, {{1, 0, 0}, {1, 
     1, 1}, {1, 2, 1}, {1, 3, 0}},
   {{2, 0, 0}, {2, 1, 1}, {2, 2, 1}, {2, 3, 0}},
   {{3, 0, 0}, {3, 1, 0}, {3, 2, 0}, {3, 3, 0}}};

f = BezierFunction[pts]

Show[Graphics3D[{PointSize[Medium], Red, Map[Point, pts]}],
 Graphics3D[{Gray, Line[pts], Line[Transpose[pts]]}], 
 ParametricPlot3D[f[u, v], {u, 0, 1}, {v, 0, 1}, Mesh -> None]] 
```

但是现在我有一个相反的问题，如果我们有一个 3D 表面，我们如何才能得到一个基于它的三次 Bézier 补丁（根据一些规则）？

# android - 无法在 Android 设备上检测到用户当前位置

> ID：11324295
> 
> 赞同：1
> 
> 时间：2012-07-04T07:26:16.860
> 
> 标签：android, geolocation, location

我正在开发小型 android 应用程序，我想在其中找到用户当前位置。我用于检测用户位置的代码结构如下所示。

```
private void sendSMS(Context context, Intent intent)
{ 
     final long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 1; // in Meters
     final long MINIMUM_TIME_BETWEEN_UPDATES = 1000; // in Milliseconds

     LocationManager locationManager;
     locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE); 

     locationManager.requestLocationUpdates(
         LocationManager.GPS_PROVIDER, 
     MINIMUM_TIME_BETWEEN_UPDATES, 
     MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,
    new MyLocationListener()
     );

     Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
     String loc_message = null;

     if (location != null) 
     {
     loc_message =String.format(
         "Current Location \n Longitude: %1$s \n Latitude: %2$s",
         location.getLongitude(), location.getLatitude()
      );
    Toast.makeText(context, loc_message,Toast.LENGTH_LONG).show();
     }
}   
 private class MyLocationListener implements LocationListener {

         public void onLocationChanged(Location location) {
         String message = String.format(
                 "New Location \n Longitude: %1$s \n Latitude: %2$s",
                 location.getLongitude(), location.getLatitude()
         );
     }

     public void onStatusChanged(String s, int i, Bundle b) {

     }

     public void onProviderDisabled(String s) {
     }

     public void onProviderEnabled(String s) {
     }
     }
} 
```

在模拟器上工作正常，我从 DDMS 发送坐标。但是当我在设备上运行它时，它没有给我输出。在我的设备上，我保持启用使用 GPS 卫星。但是当我试图找到用户位置时，它没有给出任何输出......需要帮助......谢谢......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:10:25.203

Here is the skeleton of the GPS `Service` I used in my tracking application, it has been tested, and works fine I can guarantee that. I hope it will help you out.

```
import java.util.Timer;
import java.util.TimerTask;

import android.app.Notification;
import android.app.PendingIntent;
import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.Handler;
import android.os.IBinder;
import android.os.PowerManager;
import android.os.PowerManager.WakeLock;
import android.preference.PreferenceManager;
import android.util.Log;

public class TrackingService extends Service {
    private static final String TAG = TrackingService.class.getSimpleName();

    private static final long TIME_BETWEEN_UPDATES = 1000L;
    private static final long MINIMUM_DISTANCE_CHANGE = 0L;

    private WakeLock mWakeLock;

    private LocationManager mLocationManager;

    private final Timer mTimer = new Timer();
    private Handler mHandler = new Handler();

    private LocationListener mLocationListenerGps = new LocationListener() {

        public void onLocationChanged(Location location) {
            // Your code here
        }

        public void onStatusChanged(String provider, int status, Bundle extras) {
        }

        public void onProviderEnabled(String provider) {
        }

        public void onProviderDisabled(String provider) {
        }
    };

    private void registerLocationListener() {
        if (mLocationManager == null) {
            Log.e(TAG, "TrackingService: Do not have any location manager.");
            return;
        }
        Log.d(TAG, "Preparing to register location listener w/ TrackingService...");
        try {
            mLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, TIME_BETWEEN_UPDATES, MINIMUM_DISTANCE_CHANGE, mLocationListenerGps);
            Log.d(TAG, "...location listener now registered w/ TrackingService @ " + TIME_BETWEEN_UPDATES);
        } catch (RuntimeException e) {
            Log.e(TAG, "Could not register location listener: " + e.getMessage(), e);
        }
    }

    private void unregisterLocationListener() {
        if (mLocationManager == null) {
            Log.e(TAG, "TrackingService: Do not have any location manager.");
            return;
        }
        mLocationManager.removeUpdates(mLocationListenerGps);
        Log.d(TAG, "Location listener now unregistered w/ TrackingService.");
    }

    private TimerTask mCheckLocationListenerTask = new TimerTask() {
        @Override
        public void run() {
            mHandler.post(new Runnable() {
                public void run() {
                    Log.d(TAG, "Re-registering location listener with TrackingService.");
                    unregisterLocationListener();
                    registerLocationListener();
                }
            });
        }
    };

    @Override
    public void onCreate() {
        super.onCreate();

        mLocationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

        registerLocationListener();

        mTimer.schedule(mCheckLocationListenerTask, 1000 * 60 * 5, 1000 * 60);

        acquireWakeLock();

        Log.d(TAG, "Service started...");
    }

    @Override
    public void onStart(Intent intent, int startId) {
        handleStartCommand(intent, startId);
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        handleStartCommand(intent, startId);
        return START_STICKY;
    }

    private void handleStartCommand(Intent intent, int startId) {
        Notification notification = new Notification(R.drawable.ic_launcher,
                getText(R.string.trackingservice_notification_rolling_text),
                System.currentTimeMillis());

        PendingIntent contentIntent = PendingIntent.getActivity(this, 0,
                new Intent(this, MainActivity.class),
                PendingIntent.FLAG_UPDATE_CURRENT);

        notification.setLatestEventInfo(this,
                getText(R.string.trackingservice_notification_ticker_title),
                getText(R.string.trackingservice_notification_ticker_text),
                contentIntent);

        startForeground(1, notification);
    }

    @Override
    public void onDestroy() {
        stopForeground(true);
        mTimer.cancel();
        mTimer.purge();
        mHandler.removeCallbacksAndMessages(null);
        unregisterLocationListener();
        releaseWakeLock();
        super.onDestroy();
        Log.d(TAG, "Service stopped...");
    }

    private void acquireWakeLock() {
        try {
            PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
            if (pm == null) {
                Log.e(TAG, "TrackRecordingService: Power manager not found!");
                return;
            }
            if (mWakeLock == null) {
                mWakeLock = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, TAG);
                if (mWakeLock == null) {
                    Log.e(TAG, "TrackRecordingService: Could not create wake lock (null).");
                    return;
                }
            }
            if (!mWakeLock.isHeld()) {
                mWakeLock.acquire();
                if (!mWakeLock.isHeld()) {
                    Log.e(TAG, "TrackRecordingService: Could not acquire wake lock.");
                }
            }
        } catch (RuntimeException e) {
            Log.e(TAG, "TrackRecordingService: Caught unexpected exception: "
                    + e.getMessage(), e);
        }
    }

    /**
     * Releases the wake lock if it's currently held.
     */
    private void releaseWakeLock() {
        if (mWakeLock != null && mWakeLock.isHeld()) {
            mWakeLock.release();
            mWakeLock = null;
        }
    }
} 
```

And in your AndroidManifest.xml file you need

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.WAKE_LOCK"/> 
```

Just fill out the GPS location listener, Register the service in your `AndroidManifest.xml`, start the service from your activity, and enjoy.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T05:01:11.903

Nilkash，我在三星 Galaxy 5 上遇到了同样的问题。

由于您建议更改为网络提供商，我的问题得到了解决。谢谢那个好友。我得到了解决方案。

“网络提供商”根据蜂窝塔和 WiFi 接入点的可用性确定位置。通过网络查找检索结果。需要权限 android.permission.ACCESS_COARSE_LOCATION 或 android.permission.ACCESS_FINE_LOCATION。

但是“GPS 提供商”使用卫星确定位置。根据条件，此提供程序可能需要一段时间才能返回位置修复。需要权限 android.permission.ACCESS_FINE_LOCATION。

这是设备的问题，我们的设备不支持没有互联网的 gps，它只使用位置提供程序。

# crystal-reports - Crystal-Report 错误：“@RecordSelection - 此字段名称未知” - 但所有字段都可以

> ID：11324301
> 
> 赞同：0
> 
> 时间：2012-07-04T07:26:36.717
> 
> 标签：crystal-reports

当我转到“报告->检查依赖项”时，有人知道此错误消息的含义：

```
"Formulas: @RecordSelection - This field name is not known. [filename]" 
```

对于具有 2 个子报告的报告，我收到此错误 62 次。如果我双击其中任何一个，它会打开带有任何报告（主或子）的“记录选择”的公式工作室。

但最大的问题是：如果我保存 Formular Workshop 它不会引发错误。如果字段名错误，它会说：

```
"There is an error in this formula. Do you want to save it anyway?" 
```

公式很简单，有点像：

```
 {Table.Field} = {?Parameter} 
```

即使我删除了公式，我也会得到相同的 62 错误......

有没有人见过这样的行为？

问题是，我无法用这些报告编译我的 asp.net 网站，bec。它抛出一个错误：

```
"Unable to Load Report" 
```

CR 版本：Visual Studio 2010 的 13.0.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T13:20:04.427

好的，nvm。

我无法找到问题 - 但我逐个字段和完全相同的数据库设置重建报告，现在它正在工作......

# c# - 在 WCF 服务中发送对象实例

> ID：11324303
> 
> 赞同：1
> 
> 时间：2012-07-04T07:26:49.320
> 
> 标签：c#, wcf, datacontract

我在将对象从客户端传输到 WCF 服务时遇到问题。我不能使用标准合同定义，因为它是几个不同应用程序的通用服务。

服务器和客户端都有一个定义了传输类型的程序集，因此服务器可以从 SOAP 消息中反序列化对象实例。首先，我尝试“按原样”发送此对象，但收到有关非预期合同名称的消息：“不应使用数据合同名称‘X:Y’键入‘类型名称’。考虑使用 DataContractResolver 或添加任何未知类型静态添加到已知类型列表中 - 例如，通过使用 KnownTypeAttribute 属性或将它们添加到传递给 DataContractSerializer 的已知类型列表中。”

经过研究，我了解到有几种方法可以解决这个问题：1.使用 KnownType[] 属性（这是不可能的，因为我不知道编译时所有类型） 2.使用静态合约（类似） 3\. 使用 DataContractResolver （没关系，因为我可以查看程序集并尝试找到这些类型）

在学习了这篇文章之后 - [http://code.msdn.microsoft.com/windowsdesktop/WCF-Data-Contract-Resolver-7de9b8b4#content](http://code.msdn.microsoft.com/windowsdesktop/WCF-Data-Contract-Resolver-7de9b8b4#content) - 我在我的项目中创建了一个替换解析器的属性（因为它是 IIS 托管的):

```
public class DataContractResolverAttribute: Attribute, IOperationBehavior
{
    private Type _resolverType = null;

    public DataContractResolverAttribute (Type resolver)
    {
        _resolverType = resolver;
    }

    public void AddBindingParameters (OperationDescription description, BindingParameterCollection parameters)
    {
    }

    public void ApplyClientBehavior (OperationDescription description, ClientOperation proxy)
    {
        AddResolverToOperation(description);
    }

    public void ApplyDispatchBehavior (OperationDescription description, DispatchOperation dispatch)
    {
        AddResolverToOperation(description);
    }

    public void Validate (OperationDescription description)
    {
    }

    private void AddResolverToOperation (OperationDescription description)
    {
        DataContractSerializerOperationBehavior dcs = description.Behaviors.Find<DataContractSerializerOperationBehavior>();
        if (dcs != null)
        {
            dcs.DataContractResolver = Activator.CreateInstance(_resolverType) as DataContractResolver;
        }
    }
} 
```

另外，我已将此属性分配给操作：

```
 [OperationContract]
    [FaultContract(typeof(string))]
    [DataContractResolver(typeof(CustomResolver))]
    RuleResultData ExecuteRuleObj (object context, int ruleId); 
```

CustomResolver 是 DataContractResolver 的后代：

```
class CustomResolver: DataContractResolver
{
    public override Type ResolveName (string typeName, string typeNamespace, Type declaredType, DataContractResolver knownTypeResolver)
    {
        // ... not significant here ...
    }

    public override bool TryResolveType (Type type, Type declaredType, DataContractResolver knownTypeResolver, out XmlDictionaryString typeName, out XmlDictionaryString typeNamespace)
    {
        // ... not significant here ...
    } 
} 
```

在调试时，我看到 Resolver 已成功替换（在 AddResolverToOperation 中设置断点），但在调用时我看不到任何效果（未触发 ResolveName 和 TryResolveType 中的断点）。

请提供有关此类烦人解析器行为的线索。

提前致谢。阿列克谢·维什尼亚科夫，俄罗斯。

# iphone - UITableView tableHeaderView 缺少分隔符

> ID：11324304
> 
> 赞同：3
> 
> 时间：2012-07-04T07:26:49.663
> 
> 标签：iphone, ios, uitableview, separator, tableheader

> **可能重复：**
> [标题和第一个单元格之间的分隔 - 在普通 UITableView](https://stackoverflow.com/questions/4308151/separation-between-header-and-first-cell-in-plain-uitableview)

当我在 tableView 中没有 tableHeaderView 时，所有分隔符都是可见的。但是，如果我创建一个自定义 tableHeaderView ，则第一个单元格顶部没有分隔符。为什么我的自定义 tableHeaderView 删除了第一个分隔符？我怎样才能把它放回去？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T07:33:09.227

只需在自定义标题视图的最后一个高度为 2 和宽度为 320 的标签，并为您的分隔符颜色制作标签背景颜色，并且不要将任何文本设置为 lebel，这将像分隔符一样工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-08T19:13:02.767

这是将标准外观的分隔符视图添加到标题视图底部的代码：

```
CGRect sepFrame = CGRectMake(0, headerView.frame.size.height-1, 320, 1);
seperatorView = [[[UIView alloc] initWithFrame:sepFrame] autorelease];
seperatorView.backgroundColor = [UIColor colorWithWhite:224.0/255.0 alpha:1.0];
[headerView addSubview:seperatorView]; 
```

如果你想让它看起来像一个普通的表格视图单元格，你可能还需要在标题视图的顶部添加一个。

# visual-studio-2010 - VS 2010 单元测试连接未更新

> ID：11324308
> 
> 赞同：1
> 
> 时间：2012-07-04T07:27:10.043
> 
> 标签：visual-studio-2010, entity-framework, unit-testing

我是单元测试的新手。目前使用实体框架代码优先进行开发。我正在尝试使用单元测试来测试我的代码的每个功能。但我意识到每个测试都使用到 SQLExpress 的旧连接。如何在单元测试中更新数据库连接以及 local.setting 做什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:28:03.560

在同一个句子中使用“单元测试”和“数据库连接”这两个词通常是错误的。您正在编写的是集成测试。您需要分离数据库连接，因此您可以在单元测试中使用注入的存根或数据库相关操作的模拟。

# android - 如何将我制作的安卓谷歌地图应用程序添加/嵌入到另一个安卓应用程序中

> ID：11324309
> 
> 赞同：0
> 
> 时间：2012-07-04T07:27:24.467
> 
> 标签：android, google-maps, embed, integrate

我已经为谷歌地图制作了安卓应用程序。现在我想将此应用程序添加/嵌入到我的新 android 应用程序中。请告诉我如何进一步推进？提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:38:59.573

您必须按照以下步骤操作：

1.  更改目标应用程序的项目构建目标，项目 -> 属性 -> Android -> 项目构建目标，然后选择 Google APIS 之一。

2.  将所有文件（java 和 xml）复制到目标应用程序源。

3.  如果文件与现有文件冲突，请重命名文件。

4.  我想你应该知道这一点，如果你想使用 MapViews，将目标活动的父级重命名为 MapActivity。

5.  在AndroidManifest.xml中输入：uses-library android:required="true" android:name="com.google.android.maps">

6.  如果您希望使用位置更新，还请输入所需的权限：INTERNET、ACCESS_FINE_LOCATION、ACCESS_COARSE_LOCATION

# symfony - 如何让 nusoap 在 symfony2 上工作？

> ID：11324311
> 
> 赞同：2
> 
> 时间：2012-07-04T07:27:38.063
> 
> 标签：symfony

我有一个网络服务（来自其他公司），我需要调用并使用控制器中的响应数据。我在 symfony 文档上阅读了有关 nusoap 的信息，但我不知道如何设置它。

有什么帮助吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T18:30:33.543

您可以使用 bundle noiselabs/nusoap-bundle。

将此添加到 composer.json ：

```
"require": {
    "noiselabs/nusoap-bundle": "dev-master",
},
"repositories": [
    {
        "type": "package",
        "package": {
            "name": "nusphere/nusoap",
            "version": "0.9.5",
            "dist": {
                "url": "http://downloads.sourceforge.net/project/nusoap/nusoap/0.9.5/nusoap-0.9.5.zip",
                "type": "zip"
            },
            "autoload": {
                "classmap": ["lib/"]
            }
        }
    }
] 
```

并更新：

```
composer.phar update 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:06:33.070

将 nusoap 复制到您的`vendor`文件夹或类似文件夹，然后将其包含在内并将您的 Soap 相关代码写入您的包（如`\Company\Bundle\SomeBundle\Webservice`）并从您的控制器调用它。

我个人选择并推荐`Zend_Soap`编写 Web 服务客户端和服务器。

# powershell - 设置通讯组备注

> ID：11324312
> 
> 赞同：3
> 
> 时间：2012-07-04T07:27:39.240
> 
> 标签：powershell, active-directory, exchange-server, exchange-server-2010

我正在尝试通过 Exchange 2010 Server 上的 powershell 更改通讯组注释。

**这是在创建新组期间如何设置注释的方式：**

```
New-DistributionGroup "G_test" -Notes "TESTTEST" 
```

**但是创建组后如何设置注释呢？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T07:35:58.237

我找到了解决方案：看起来 Exchange 在某些方面没有区分组类型。所以你必须使用`Set-Group`(Not `Set-DistributionGroup`) 来改变 notes 属性。

**例子**

```
Set-Group –identity G_test –Notes “For chess lovers!” 
```

# php - 通过 PHP 脚本轮询文件系统对服务器硬盘驱动器的磨损

> ID：11324315
> 
> 赞同：1
> 
> 时间：2012-07-04T07:27:52.887
> 
> 标签：php, filesystems, linux-kernel, ipc, shared-hosting

所以我在一个讨论平台上工作，各种客户都会访问`http://host/thread.php`，除了提交新帖子的表单之外，这将呈现讨论线程的最新状态。当提交新帖子时，我希望所有其他打开浏览器窗口的客户端都能近乎实时地显示它。

我的脚本的限制之一是它可能不使用 DBMS，并且必须保留在文件系统中。此外，我不能对 IPC 使用任何 PECL/PEAR 扩展，例如 inotify 或类似的东西。

流程将如下所示：

*   客户端**A**请求 thread.php 并且该线程到目前为止是空的，但它仍然在`eventPusher.php`.
*   客户**B**也是如此。
*   客户**A**在表格中填写一个帖子并将其提交`POST`给`subHandler.php`。
*   ？？？`(subHandler stores the new submission into the main thread storefile which gets read from when a fresh, new client requests thread.php, in addition to somehow signalling to the continually-running eventPusher event-source that a new comment was posted and that it should echo the event-json to the client. How, exactly, it will send this signal I'm yet unsure of, but there are a few options that I've thought of -- this is the crux of the question, so see below for more clarification)`
*   `eventPusher.php`愉快地将新事件推送给客户端，并在它最初提交给所有打开页面屏幕的客户端后不久显示。
*   利润！

现在对于#4 缺失链接的神秘步骤，我发现了一些问题。我的意思是，无论哪种方式，eventPusher 都会做某种`while`循环——它会轮询*一些东西*，我认为这很清楚。（如果这是一个错误的假设，请告诉我。）现在，最简单的方法是`subHandler`在表单提交时调用，将其写入主存储区`newComments.xml`，然后退出而不做任何其他事情。然后`eventPusher`签到`newComments.xml`每 X 秒（顺便说一下，这里合理的时间间隔是多少？），如果它发现了什么，那么它会向客户端发出一个事件。现在，我担心的是服务器的硬盘驱动器将不得不不断地开始旋转。也许情况并非如此，也许它只是被缓存在 RAM 中，而 linux 内核会透明地处理这个问题，这样文件系统访问实际上并不会占用设备，因为内核知道该特定文件从那时起就没有改变最后阅读。* 想法#2：我不知道该怎么做，但也许有一个变量范围存储在系统的通用 RAM 中，任何进程都可以读取它。就像我们超级导出一个 bash 变量一样`$new_post`通常是假的，但它会被 subHandler 切换为真，然后在它被推送到客户端后返回到flase。我怀疑 PHP 中是否直接存在这样的变量作用域，但我对变量作用域的概念感到困惑，无论我读到什么，我似乎都无法理解它。* 想法 #3：eventPusher`ps`在其 whileloop 中查询自身的另一个实例。如果没有另一个 eventPusher 处于活动状态，那么提交新评论的可能性很小。如果这仅在> = 90％的时间内有效，那没关系，它不需要完全万无一失。* 想法#4：eventPusher 查询`DMESG`该文件是否最近被写入。

因此，总而言之，我需要近乎实时的 inter-php-script-communication 可以在标准 mod_php 共享主机设置上运行，而无需任何提升的权限、PHP 插件模块或其他无法进行的系统调整在运行时从 PHP 脚本本身完成。在 *out* 将驱动器旋转几次以上的情况下。也没有 SQL 服务器。

抱歉，如果我的英语不是最好的，我仍在努力改进它。

# c# - 将 List 作为 XElement 传递以用作 XML 数据类型参数

> ID：11324317
> 
> 赞同：5
> 
> 时间：2012-07-04T07:27:54.287
> 
> 标签：c#, .net, sql-server, xml, linq-to-sql

我在 SQL Server 中有一个存储过程

```
CREATE PROCEDURE ParseXML (@InputXML xml) 
```

输入参数的数据类型是“xml”。

在为存储过程生成的 LINQ to SQL 代码中，输入参数是 System.Xml.Linq.XElement

```
[global::System.Data.Linq.Mapping.FunctionAttribute(Name="dbo.ParseXML")]
public ISingleResult<ParseXMLResult> ParseXML([global::System.Data.Linq.Mapping.ParameterAttribute(Name="InputXML", DbType="Xml")] System.Xml.Linq.XElement inputXML) 
```

现在，如何将以下列表传递给 ParseXML 方法以使存储过程工作？

**编辑**：

阅读答案后 - 下面列出了另一种解决方案

```
XElement root = new XElement("ArrayOfBankAccountDTOForStatus",
new XAttribute(XNamespace.Xmlns + "xsi", "http://www.w3.org/2001/XMLSchema-instance"),
new XAttribute(XNamespace.Xmlns + "xsd", "http://www.w3.org/2001/XMLSchema"));

foreach (var element in bankAccountDTOList)
{

 XElement ex= new XElement("BankAccountDTOForStatus", 
                      new XElement("BankAccountID", element.BankAccountID),
                      new XElement("Status", element.Status));

 root.Add(ex);
} 
```

* * *

有问题的代码

```
 string connectionstring = "Data Source=.;Initial Catalog=LibraryReservationSystem;Integrated Security=True;Connect Timeout=30";
        var theDataContext = new DBML_Project.MyDataClassesDataContext(connectionstring);

        List<DTOLayer.BankAccountDTOForStatus> bankAccountDTOList = new List<DTOLayer.BankAccountDTOForStatus>();
        DTOLayer.BankAccountDTOForStatus presentAccount1 = new DTOLayer.BankAccountDTOForStatus();
        presentAccount1.BankAccountID = 5;
        presentAccount1.Status = "FrozenF13";

        DTOLayer.BankAccountDTOForStatus presentAccount2 = new DTOLayer.BankAccountDTOForStatus();
        presentAccount2.BankAccountID = 6;
        presentAccount2.Status = "FrozenF23";
        bankAccountDTOList.Add(presentAccount1);
        bankAccountDTOList.Add(presentAccount2);

        //theDataContext.ParseXML(inputXML); 
```

**所需的 XML 结构**

![在此处输入图像描述](../Images/e9a60bea27d251dcb4f146f2ee55e7f8.png)

注意：此 XML 用于某些操作，而不是作为 XML 直接存储在数据库中。我需要编写一个选择查询来列出 XML 中的数据。

**存储过程逻辑**

```
DECLARE @MyTable TABLE (RowNumber int, BankAccountID int, StatusVal varchar(max))

INSERT INTO @MyTable(RowNumber, BankAccountID,StatusVal)

SELECT ROW_NUMBER() OVER(ORDER BY c.value('BankAccountID[1]','int') ASC) AS Row,
    c.value('BankAccountID[1]','int'),
    c.value('Status[1]','varchar(32)')
FROM
    @inputXML.nodes('//BankAccountDTOForStatus') T(c); 
```

**阅读**

1.  [如何使用 Linq to SQL 将对象序列化并作为 Xml 保存到数据库](https://stackoverflow.com/questions/1825124/how-to-serialize-and-save-an-object-to-database-as-xml-using-linq-to-sql)

2.  [当 XElement 具有相同名称时如何使用 LINQ 查询获取 XElement 值](https://stackoverflow.com/questions/890313/how-to-use-a-linq-query-to-get-xelement-values-when-xelements-have-same-name)

3.  [带有 XML 数据库字段的 Linq-to-SQL —— 为什么会这样？](https://stackoverflow.com/questions/689772/linq-to-sql-with-xml-database-fields-why-does-this-work)

4.  [http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=176385](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=176385)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T08:06:17.243

您可以将您的列表变成这样的 XML 片段：

```
 IEnumerable<XElement> el = list.Select(i => 
                            new XElement("BankAccountDTOForStatus", 
                              new XElement("BankAccountID", i.BankAccountID),
                              new XElement("Status", i.Status)
                            )); 
```

然后你可以把它变成一个 XElement：

```
 XElement root = new XElement("root", el); 
```

现在您可以将它作为 XElement 类型的参数 inputXML 传递给 ParseXML。在存储过程中像这样处理它：

```
DECLARE @InputXML NVARCHAR(1024) = N'
<root>
 <BankAccountDTOForStatus>
     <BankAccountID>2</BankAccountID>
     <Status>FrozenFA</Status>
 </BankAccountDTOForStatus>
 <BankAccountDTOForStatus>
     <BankAccountID>3</BankAccountID>
     <Status>FrozenSB</Status>
 </BankAccountDTOForStatus>
</root>'

DECLARE @handle INT

EXEC sp_xml_preparedocument @handle OUTPUT, @InputXML

SELECT  *
FROM    OPENXML(@handle, '/root/BankAccountDTOForStatus', 1)
WITH    (
            BankAccountID INT 'BankAccountID/text()',
            Status VARCHAR(128) 'Status/text()'
)

EXEC sp_xml_removedocument @handle 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T07:45:32.487

你需要这样的东西：

*   定义您的输入 XML - 例如作为字符串
*   将其转换为`XDocument`
*   在 Linq-to-SQL 数据上下文中传递`XDocument.Root`到 ParseXML 方法

所以你的代码会是这样的：

```
// define input XML - e.g. load from file or whatever
string xmlInput =
            @"<ArrayOfBankAccountDTOForStatus>
                         <BankAccountDTOForStatus>
                             <BankAccountID>2</BankAccountID>
                             <Status>FrozenFA</Status>
                         </BankAccountDTOForStatus>
                         <BankAccountDTOForStatus>
                             <BankAccountID>3</BankAccountID>
                             <Status>FrozenSB</Status>
                         </BankAccountDTOForStatus>
                     </ArrayOfBankAccountDTOForStatus>";

// convert that into a XDocument
XDocument doc = XDocument.Parse(xmlInput);

// using your DataContext - call ParseXML
using (DataClasses1DataContext ctx = new DataClasses1DataContext())
{
    var result = ctx.ParseXML(doc.Root);
} 
```

就是这样！现在您的 XML 被传递到存储过程并在那里处理。

# c++ - 使用我的代码加速序列的生成

> ID：11324318
> 
> 赞同：0
> 
> 时间：2012-07-04T07:27:56.743
> 
> 标签：c++, performance, sequence

> **可能重复：**
> [我想以 Order(1) 或 (nlogn) 的顺序生成序列 1,3,8,22,60 ,164 的第 n 项](https://stackoverflow.com/questions/11301992/i-want-to-generate-the-nth-term-of-the-sequence-1-3-8-22-60-164-in-order1-or)

我正在尝试生成一个序列 1,3,8,22,60... 基本上是 a[n]=2*(a[n-1]+a[n-2]); 请在此处参考我的问题[我想以 Order(1) 或 (nlogn) 的顺序生成序列 1,3,8,22,60 ,164 的第 n 项](https://stackoverflow.com/questions/11301992/i-want-to-generate-the-nth-term-of-the-sequence-1-3-8-22-60-164-in-order1-or)

这是我在 c++ 中的实现。但我认为它太慢了。代码在最坏的情况下运行大约 5 秒，而我希望它在不到 1 秒的时间内运行。该方法是 log n 的顺序。所以 10^9 只需要 29 步。这是我的代码。请提出加快速度的方法或我正在做的任何错误

```
#include <iostream>
#define big long long unsigned int
#include<vector>
#include<stdio.h>
#define _SECURE_SCL 0
big m =1000000007;
using namespace std;
vector <vector <big> > vectin(vector<vector <big> > a)
{
    for(int i=0;i<2;i++)
    {
        vector <big> t;
        for(int j=0;j<2;j++)
        {
            t.push_back(0);
        }
        a.push_back(t);
    }
    return a;
}
vector <vector <big> > unit(vector<vector <big> > a)
{
    for(int i=0;i<2;i++)
    {
        vector <big> t;
        for(int j=0;j<2;j++)
        {   if(i!=j)
            t.push_back(0);
            else
            t.push_back(1);
        }
        a.push_back(t);
    }
    return a;
}
vector<vector <big> > multi(vector<vector <big> > a,vector<vector <big> >b )
{
    vector<vector <big> > c;
    c=vectin(c);
    for(big i=0;i<2;i++){

    for(big j=0;j<2;j++)
    {
        for(big k=0;k<2;k++)
            {
                c[i][j]+=((a[i][k])*(b[k][j]))%m;
            }
    }
}
return c;
}

big modexp_rl(big a,big b, big n)
{
    big r = 1;
    while (1){
        if (b&1)
            r = ((r )*(a) ) % n;
        b /= 2;
        if (!b )
            break;
        a = ((a )* (a) )% n;
    }
    return r;
}

vector <vector <big> > modexs (big b,vector <vector <big> > a )
{
    vector < vector <big > > r;
    r=unit(r);
    while(1)
    {  // cout<<b<<endl;
        if(b&1)
        r=multi(r,a);
        b/=2;

        if(!b)
        break;
        a=multi(a,a);
    }
    return r;
}

void displayvector(vector < vector <big> > s)
{
    for(big i=0;i<2;i++)
    {
        for(big j=0;j<2;j++)
        {
            cout<<s[i][j]<<"\t";
        }
    cout<<endl;
    }

}

vector <big> mul2( vector < vector <big> > a)
{
    vector <big> d;
    d.push_back(3*a[0][0]+1*a[0][1]);
    d.push_back(3*a[1][0]+1*a[1][1]);
return d;
}
int main()
{

  vector < vector <big> > a;
  vector <big> t1,t2;
  t1.push_back(2);
  t1.push_back(2);
  a.push_back(t1);
  t2.push_back(1);
  t2.push_back(0);
  a.push_back(t2);
  //dv(a);
  vector < vector <big> > ans;
  big t,n;
  //cin>>t;
  //scanf("%lld,&t);
  t=10000;
  while(t--){
  //cin>>n;
  //scanf("%lld",&n);
  n=1000000000;
  ans=modexs(n-1,a);
  vector <big> p;
  p=mul2(ans);
  //cout<<p[1]<<endl;
  printf("%lld\n",p[1]);
  //dv(ans);
  }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T07:51:58.393

如果你知道有多少元素进入你的`a`向量，你应该在运行算法之前为这些元素保留空间。这是为了避免在向量进行动态调整大小时复制数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T07:37:16.000

如果没有办法增强功能，可以尝试研究多核编程，学习如何实现。以此为参考[。](http://www.codeproject.com/Articles/24008/Tricky-Programming-on-Multi-Core-Processors)它将提高处理性能。但是，它会消耗资源。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T19:26:21.783

我将级数的生成函数[插入 Wolfram Alpha](http://www.wolframalpha.com/input/?i=%28-1%2Bz%2Bz%5E2%29%2F%282z%5E2%2B2z-1%29)，看起来第^( n)*项*是：

```
[ (1 + Q)^(1+n) - (1 - Q)^(1+n) ] / (4Q) , 
```

哪里`Q = sqrt(3)`。

您可能会观察到`1 - Q`绝对值小于 1，因此对于大 ，整个项呈指数级小`n`。这意味着对于大的`n`你可以只计算第一项并取下一个最大的整数。

# machine-learning - Matlab 2010 中训练测试验证集中的数据拆分

> ID：11324321
> 
> 赞同：3
> 
> 时间：2012-07-04T07:28:13.097
> 
> 标签：machine-learning, neural-network, matlab

我的问题是：Matlab 2010 提供了神经网络过程中的测试、验证期选项。这是数据拆分还是我必须使用“crossvalind”进行数据拆分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T08:36:15.450

[这是文档](http://www.mathworks.com/help/toolbox/nnet/ug/bss33zw-1.html#bss33zw-9)的摘录：

> 在训练多层网络时，一般的做法是先将数据分成三个子集。第一个子集是训练集，用于计算梯度和更新网络权重和偏差。第二个子集是验证集。在训练过程中监控验证集上的错误。[...] 训练期间不使用测试集误差，但它用于比较不同的模型。[...]

提供了四个函数用于将数据划分为训练集、验证集和测试集：`dividerand`、`divideblock`、`divideint`和`divideind`。（实际上有第五个`dividetrain`将所有实例分配给训练）

![桌子](../Images/8a4f487732127d5d85f6e4d8953acdeb.png)

对于更复杂的方法（交叉验证、分层等），请查看`cvpartition`或`crossvalind`函数。

# mediawiki - 在 mediawiki 中升级一级的链接

> ID：11324331
> 
> 赞同：1
> 
> 时间：2012-07-04T07:28:59.453
> 
> 标签：mediawiki

在我的 mediawiki 中，我有一页包含以下链接：

页面A：
链接到页面B 链接到页面C 链接到
页面
D

现在，当我在 PageB 上时，我可以做些什么来获得一个链接以进入下一个级别，在这种情况下，是到 PageA？

提前非常感谢。
沃尔夫冈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T15:02:34.003

一种方法是使 PageB 成为 PageA 的子页面。然后 PageB 将在页面顶部有一个返回到 PageA 的链接。有关详细信息，请参阅[子页面帮助文档](http://www.mediawiki.org/wiki/Help%3aSubpages)。您必须设置变量[$wgNamespacesWithSubpages](http://www.mediawiki.org/wiki/Manual%3a%24wgNamespacesWithSubpages)以包含您想要在其中使用子页面的任何命名空间（例如主命名空间）。然后你可以命名你的页面：

```
PageA
PageA/PageB
PageA/PageC
PageA/PageD 
```

并且子页面将在页面顶部有一个返回 PageA 的链接。

# python - 简单 Python 脚本中的流控制

> ID：11324333
> 
> 赞同：0
> 
> 时间：2012-07-04T07:29:09.503
> 
> 标签：python, python-3.x, python-2.7

我正在尝试制作一个简单的游戏。

逻辑是这样的：“有五扇门，每扇门编号为 1 到 5。用户将被要求输入任意一个数字。例如，如果他们输入“1”，则会打开 GoldRoom（关联的类将是处理）。”

现在，我定义了一个类，`GoldRoom()`，为了测试，输入“1”。处理按预期进行。然而，当我输入“2”作为我的选择时，处理仍然发生，而不是打印语句，即 else 语句没有被执行。

我哪里错了？

```
#################################
#   Learning to make a game#
#################################

# An attempt to make a game
# Each room will be described by a class, whose base class will be Room
# The user will be prompted to enter a number, each number will be assigned with a Room in return

from sys import exit

print "Enter your choice:"
room_chosen = int(raw_input("> "))

if room_chosen == 1:
    goldroom = GoldRoom()
    goldroom.gold_room()

def dead(why):
    print "why, Good Job!"
    exit(0)

#class Room(object):  #the other room will be derived of this
#   pass

class Room(object):
    pass

class GoldRoom(Room):

    # here the user will be asked with question on how much Gold he wants

    print"This room is full of gold. How much do you take!"

    next = raw_input("> ")

    if "0" in next or "1" in next:
        how_much = int(next)
        print how_much
    else:
        dead("Man, learn to type some number")

    if how_much < 50:
        print "Nice, you are not greedy, you win!"
        exit(0)

    else:
        dead("You greedy bastard!")

#class KoiPondRoom(Room):

    # in this room, the user will be made to relax

#class Cthulhu_Room(Room):

    # sort of puzzle to get out

#class Bear_Room(Room):

    # bear room

#class Dark_Room(Room):

    # Dark Room, will  be turned into Zombie

#class Dead_Room(Room):

    # Those who enter here would be dead
if room_chosen == 1:
    goldroom = GoldRoom()
    goldroom.gold_room()
else:
    print "YOU SUCK!" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T07:42:42.720

问题在这里：

```
class GoldRoom(Room):

    # here the user will be asked with question on how much Gold he wants

    print"This room is full of gold. How much do you take!" 
```

当整个源代码加载到 python vm 中时，这段代码被执行，它打印了一些东西，你应该把它改成：

```
class GoldRoom(Room):

    # here the user will be asked with question on how much Gold he wants
    def gold_room(self):
        print"This room is full of gold. How much do you take!"

        next = raw_input("> ")

        if "0" in next or "1" in next:
            how_much = int(next)
            print how_much
        else:
            dead("Man, learn to type some number")

        if how_much < 50:
            print "Nice, you are not greedy, you win!"
            exit(0)

        else:
            dead("You greedy bastard!") 
```

# eclipse - 将 Maven 项目导入 Eclipse 3.7 (m2e 1.0) 但 src/main/java 未显示为源包

> ID：11324334
> 
> 赞同：4
> 
> 时间：2012-07-04T07:29:13.140
> 
> 标签：eclipse, maven, m2e

我有一个 maven (3.0.4) 多模块构建项目，可以完美地在命令行上运行。

```
mvn clean package 
```

构建成功。

我试图将该项目导入 Eclipse

![在此处输入图像描述](../Images/9bace0a04fa3b1002d760c98838d92ef.png)

使用 m2e 1.0。

![在此处输入图像描述](../Images/46a2e92c5d842c539e08c69a7898ff96.png)

但在它准备好后，我看不到包文件夹，也看不到 src 文件夹的图标（如 src/main/java 等）。

![在此处输入图像描述](../Images/0d7ebd6c81d6e827c602a29d1427f384.png)

但我本来希望看到如下内容：

![在此处输入图像描述](../Images/b5ad1f7401b6e5af3610227794661b46.png)

有人暗示可能是什么问题吗？或者在哪里寻找想法？

**更新**

将其归结为可能是由于使用 Java 1.7 造成的。我配置如下的编译器：

```
 <pluginManagement>
      <plugins>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-compiler-plugin</artifactId>
          <version>2.5.1</version>
          <configuration>
            <source>${maven.compiler.source}</source>
            <target>${maven.compiler.target}</target>
            <executable>C:/Programme/Java/jdk1.7.0_05/bin/javac</executable>
            <fork>true</fork>
          </configuration>
        </plugin>
        ... 
```

有这方面经验的人吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T08:26:31.380

看起来您的项目没有 Java 特性。您可以通过右键单击项目并转到

属性 -> 项目分面 -> 转换为分面形式

从那里您可以添加一个 Java 方面，它应该可以完成这项工作。我经常发现这种事情更容易手动编辑 Eclipse`.project`和`.classpath`文件（不过，请确保在这样做之前备份它们！）。您可能需要检查您的项目`.project`文件是否包含以下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<projectDescription>
    ...
    <buildSpec>
        <buildCommand>
            <name>org.eclipse.jdt.core.javabuilder</name>
            <arguments>
            </arguments>
        </buildCommand>
        <buildCommand>
            <name>org.eclipse.m2e.core.maven2Builder</name>
            <arguments>
            </arguments>
        </buildCommand>
    </buildSpec>
    <natures>
        <nature>org.eclipse.jdt.core.javanature</nature>
        <nature>org.eclipse.m2e.core.maven2Nature</nature>
    </natures>
</projectDescription> 
```

然后确保你`.classpath`看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
    ...
    <classpathentry kind="src" output="target/classes" path="src/main/java"/>
    <classpathentry excluding="**" kind="src" path="src/main/resources"/>
    <classpathentry kind="src" output="target/test-classes" path="src/test/java"/>
    <classpathentry excluding="**" kind="src" output="target/test-classes" path="src/test/resources"/>
    <classpathentry kind="con" path="org.eclipse.m2e.MAVEN2_CLASSPATH_CONTAINER"/>
    <classpathentry kind="output" path="target/classes"/>
</classpath> 
```

一旦你准备好所有这些东西，像 Michal 所说的那样更新你的项目配置并刷新。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T14:57:16.027

经过长时间的摆弄，我发现了为我解决它的问题：

我的配置中的 maven-compiler-plugin (2.5.1) 的生命周期映射错误，这导致了问题。删除它后，它可以按预期工作，无需手动更改方面，只需导入项目即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T10:23:28.957

在您的日食中，它可能指向`JRE`而不是`JDK`. 去`window->preference->java->Installed JRE`。在此处添加 JDK，并将其设置为默认值。您可能需要重新启动 Eclipse。

# javascript - 正则表达式js到python

> ID：11324335
> 
> 赞同：1
> 
> 时间：2012-07-04T07:29:25.417
> 
> 标签：javascript, python, regex, firefox-addon

我打开 Mozilla Firefox 插件[Wappalizer](https://addons.mozilla.org/en-US/firefox/addon/wappalyzer/)并看到以下 JavaScript。这是一个正则表达式，是否可以在 python 中使用它？

```
 'CO2Stats':              { cats: { 1: 10 }, html: /src=("|')http:\/\/www\.co2stats\.com\/propres\.php/ },
    'CodeIgniter':           { cats: { 1: 18 }, headers: { 'Set-Cookie': /(exp_last_activity|exp_tracker|ci_session)/ }, implies: [ 'PHP' ] },
    'Commerce Server':       { cats: { 1:  6 }, headers: { 'COMMERCE-SERVER-SOFTWARE': /.+/ } },
    'comScore':              { cats: { 1: 10 }, html: /<i{1}frame[^>]* (id=("|')comscore("|')|scr=[^>]+comscore)/, env: /^_?COMSCORE$/i },
    'Concrete5':             { cats: { 1:  1 }, meta: { 'generator': /concrete5/i } }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T07:33:57.820

是的，`//`这里的字符串是正则表达式，您可以在`re`模块的帮助下在 python 中使用它们。

```
import re
if re.match('(exp_last_activity|exp_tracker|ci_session)', header_string):
  # do something 
```

但是，当然，您需要找到必须使用此表达式分析的字符串。

# plugins - 是否可以在 Rails 2.3.11 中为 ActionController::Base 类定义继承的钩子

> ID：11324338
> 
> 赞同：0
> 
> 时间：2012-07-04T07:29:29.250
> 
> 标签：plugins, module, ruby-on-rails-2, inherited, development-mode

我正在尝试实现 ActionController::Base 类的继承方法。我的目的是调用继承自 ActionController::Base 的类的方法，例如 ApplicationController，以使它们包含某些模块。目前我的代码如下所示：

```
module MyModule
 def inherited(child)
 end
 def my_test_method()
 end
end
ActionController::Base.send(:extend, MyModule)

ActionController::Base.methods.include? 'my_test_method'
=> true
ActionController::Base.methods.include? 'inherited'
=> false 
```

该代码是从插件的初始化文件中调用的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T07:41:50.983

继承是Class的一个类方法。当定义子类时，可以直接覆盖它以添加行为。我看不出如何通过扩展模块来做到这一点，但这应该会达到相同的结果：

```
class ActionController::Base
  def self.inherited(child)
    puts "child created: #{child}"
  end
end

class ChildClass < ActionController::Base
end 
```

你会得到输出：

```
child created: ChildClass 
```

# android - 使用 JNI 时 C 文件的 eclipse 行为令人惊讶，为什么会这样？

> ID：11324340
> 
> 赞同：4
> 
> 时间：2012-07-04T07:29:36.213
> 
> 标签：android, eclipse, ubuntu, java-native-interface

我正在开发一个使用大量 JNI 代码的 Android 应用程序。最近（从过去的 2-3 天开始，我对 eclipse 的意外行为感到非常恼火）只要我打开我的 .c 文件，它就会向我显示模糊的错误。 . 但是，如果我关闭并重新打开项目，错误就会消失。请参阅随附的屏幕截图。是不是因为我刚刚更新了我的eclipse安装（只是更新了eclipse插件，我还在我的旧Indigo上）......

![在此处输入图像描述](../Images/fbb56072950ead319b8dca1facf52281.png)

是 eclibse 错误还是我的设置有问题？

**解决了 ？？？？** 我尝试了所有方法，但注意到可能会改变 eclipse 的行为。此时我知道我肯定错误地弄乱了项目设置，因为 eclipse 在同一工作区的其他项目中表现良好。所以我手动重新创建了项目，最后解决了我的问题......虽然问题仍然开放以获得有价值的答案，但我想我很快就会得到一些好的答案......

**更新** 即使是 eclipse 4.2 版本也有这个问题.. #frustrating

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T05:26:28.710

我发现删除项目而不是将项目重新导入工作区可以解决问题。但是我也开始知道从项目树中删除**.cproject**文件也可以解决这个问题。修复 Eclipse 首选项中的 NDK 路径**（Window -> Preferences -> Android-> NDK）**也可以解决问题。

**解决方案 2**在少数情况下可能会起作用......

1.  右键单击项目。
2.  选择 Android 工具 -> 修复项目属性

# actionscript-3 - 声音消失时出现crackle as3

> ID：11324341
> 
> 赞同：2
> 
> 时间：2012-07-04T07:29:40.657
> 
> 标签：actionscript-3, soundchannel

我正在使用 tweenlite 淡出声音，淡出效果本身运行良好，但似乎每次 soundTransform 应用到带有 tweenlite 的 soundChannel 时都会出现一些像爆裂声一样的噪音。

你可以在[这里测试它](http://ecatalogue.stylemix.net/sound/)

这是代码：

```
package  {

    import flash.display.Sprite;

    import flash.events.Event;  
    import flash.events.MouseEvent; 

    import flash.media.Sound;
    import flash.media.SoundChannel;
    import flash.media.SoundTransform;

    import com.greensock.*;     
    import com.greensock.plugins.*;
    TweenPlugin.activate([VolumePlugin]);

    public class SoundFade extends Sprite {

        public var keySound:Sound; 
        public var keySoundChannel:SoundChannel;
        public var keySoundTransform:SoundTransform;

        public function SoundFade():void {

            keySound = new MySound();
            keySoundChannel = new SoundChannel();

            btn.addEventListener(MouseEvent.CLICK, onClick);

        }

        private function onClick(e:MouseEvent):void {

            keySoundChannel = keySound.play();

            TweenLite.to(keySoundChannel, 0.5, {
                volume: 0
            }); 

        }

    }

} 
```

有谁知道如何解决这个问题？

我相信你们可以帮助我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T13:48:34.363

我无法听，因为链接不起作用，但据我所知，当从高（或低）音量快速变为低（或高）音量时会出现噼啪声。发生这种情况是因为您动态修改了波形，因此它变得不连续。

我看到您使用 TweenLite，这是一个好的开始。我相信如果你增加补间持续时间，裂纹会消失。

请注意，根据文档，TweenLite 的默认缓动是 Quad.easeOut，因此衰落不是线性的，因此在过渡更快的地方可能会出现噼啪声！将轻松更改为“Linear.easeNone”也可能会有所帮助。

# c# - 你调用的对象是空的。

> ID：11324343
> 
> 赞同：-1
> 
> 时间：2012-07-04T07:30:02.947
> 
> 标签：c#, asp.net, nullreferenceexception

我循环遍历表格以找出单元格具有 csstdgreen。我给出了一个错误对象引用未设置为对象的实例。

```
 for(int i = 0; i < mytable.Rows.Count; i++)
            {
                for(int j = 0; j < mytable.Rows[i].Cells.Count; j++)
                {
                    if(mytable.Rows[i].Cells[j].Attributes["class"].Equals("csstdgreen"))
                    {

                    }
                }
            }
<table id="mytable" runat="server">
<tr class="csstablelisttd">
            <td>
                09:00AM
            </td>
            <td class="csstdgreen">
                00
            </td>
            <td class="csstdgreen" rowspan="3">
                John
            </td>
        </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T07:35:02.007

在这部分：

```
<td>
    09:00AM
</td> 
```

没有`class`属性。所以你需要检查它是否是`null`第一个：

```
if (mytable.Rows[i].Cells[j].Attributes["class"] != null &&
    mytable.Rows[i].Cells[j].Attributes["class"].Equals("csstdgreen")) { 

    // other code...

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T08:22:12.990

这个怎么样 ？

```
 for(int i = 0; i < mytable.Rows.Count; i++)
        {

    string cssClass ;
    for(int j = 0; j < mytable.Rows[i].Cells.Count; j++)
    {

    cssClass = mytable.Rows[i].Cells[j].Attributes["class"];

       if(cssClass != null)
        {
          if(cssClass != String.Empty)
          {}
        }

    } 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T07:33:34.003

我认为`mytable.Rows[i].Cells[j].Attributes["class"]`在`null`你的情况下。

你需要检查这个`null`

```
if (mytable.Rows[i].Cells[j].Attributes["class"] != null) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T07:40:47.670

```
if(Rows[i] != null)
    if(Cells[j] != null)
       if(Cells[j].Attributes["class"] != null) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T07:42:48.387

要么检查 null 作为

```
if (mytable.Rows[i].Cells[j].Attributes["class"] != null) 
```

或在您的

```
<td>      09:00AM  </td> 
```

部分作为

```
<td class="abc">      09:00AM  </td> 
```

# jquery - 初始化后更新jqTree选项？

> ID：11324344
> 
> 赞同：0
> 
> 时间：2012-07-04T07:30:03.487
> 
> 标签：jquery, jquery-ui, jquery-plugins

我的项目中有 jqTree，但我需要在 jqTree 初始化后更新 dragAndDrop 选项。

有没有办法像在 jQuery UI 中一样更新选项，或者我必须“销毁”插件并使用新选项再次初始化它（在这种情况下我如何销毁插件）？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T06:54:18.823

JqTree 不支持选项的更新。

您可以像这样销毁插件：

`$('#tree1').tree('destroy');`

# microsoft-metro - 如何在 C++ Metro 风格应用程序中使用 URL 连接

> ID：11324345
> 
> 赞同：0
> 
> 时间：2012-07-04T07:30:06.190
> 
> 标签：microsoft-metro

我想知道如何使用 c++ Metro 风格应用程序连接 http url 以从站点下载 xml 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:29:19.187

您可以使用[IXMLHTTPRequest2](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh770550.aspx)：

```
// First create the interface objects required for this operation 
// as well as the callback that indicates request completion. 
// The dwStatus variable is also defined, and is later set with a 
// value indicating request completion.
DWORD dwStatus = 0;
ComPtr<IXMLHTTPRequest2> spXHR;
ComPtr<CXMLHttpRequest2Callback> spMyXhrCallback;
ComPtr<IXMLHTTPRequest2Callback> spXhrCallback;

// Create an object of the IID_IXMLHTTPRequest2 class.
CoCreateInstance(CLSID_FreeThreadedXMLHTTP60,
                 NULL,
                 CLSCTX_INPROC_SERVER,
                 IID_PPV_ARGS(&spXHR));

// Create and initialize IXMLHTTPRequest2Callback
MakeAndInitialize<CXMLHttpRequest2Callback>(&spMyXhrCallback);

spMyXhrCallback.As(&spXhrCallback);

// Prepare the GET request and send it to the server.
spXHR->Open(L"GET",       // Method.
   pcwszUrl,              // Url.
   spXhrCallback.Get(),   // Callback.
   NULL,                  // Username.
   NULL,                  // Password.
   NULL,                  // Proxy username.
   NULL);                 // Proxy password.

spXHR->Send(NULL, 0);

// Wait for the completion of the request.
spMyXhrCallback->WaitForComplete(&dwStatus); 
```

# java - 为什么 app_ 在使用 ContextWraper.getDir 创建目录时出现

> ID：11324348
> 
> 赞同：3
> 
> 时间：2012-07-04T07:30:13.947
> 
> 标签：java, android, file

在我的应用程序中，我使用了以下代码：

```
File DirectoryPath = cw.getDir("custom", Context.MODE_PRIVATE); 
```

创建目录时，它返回：

`/data/data/com.custom/app_custom**`

所以我的问题是为什么它`app_`与目录名称一起出现。我知道它的默认值，但它实际上意味着什么？

其次，我如何在我的目录中创建一个子目录，即`app_custom`在这种情况下。如果有人知道，请帮助我理解这个概念`getDir`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-20T13:06:11.747

据我所知，自动“app_”添加到用户创建的数据文件夹避免与系统预定义的应用程序文件夹（应用程序数据文件夹内的文件夹，即自动创建的缓存、内容、数据库等）发生任何冲突。

**在这些“app_...”**文件夹中创建子文件夹的一种方法，获取“app_... **”**文件夹的绝对路径，将所需的文件夹名称附加到该文件夹​​并使用 mkdirs() 创建

例如

```
File dir = new File(newFolderPath);
dir.mkdirs() 
```

注意：子文件夹没有**“app_...”**前缀

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T08:04:08.567

`Directory`您可以使用从 getDir() 获得的路径创建一个新的，

```
 File file = getDir("custom", MODE_PRIVATE);
        String path = file.getAbsolutePath();
        File create_dir = new File(path+"/dir_name");
        if(!create_dir.exists()){
            create_dir.mkdir();
        } 
```

# javascript - 使用 jQuery 淡出图像

> ID：11324349
> 
> 赞同：-1
> 
> 时间：2012-07-04T07:30:17.630
> 
> 标签：javascript, jquery

我正在使用以下脚本在 5 秒后淡出图像：

```
var $j = jQuery.noConflict();
$j(document).ready(function() { 
    var fade_out = function() {
        $j("#fadeout").fadeOut().empty();
    }
    setTimeout(fade_out, 5000);
}); 
```

当图像消失时，它就消失了。我希望图像在一秒钟左右慢慢淡出。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T07:32:33.347

将空方法放入fadeOut回调中：

```
var $j = jQuery.noConflict();
$j(document).ready(function() { 
var fade_out = function() {
        $j("#fadeout").fadeOut(1000, function() { $j("#fadeout").empty(); });
    }

    setTimeout(fade_out, 5000);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T07:31:55.260

```
var el = $j("#fadeout");
el.fadeOut(1000, function() { el.empty(); }) 
```

`1000`是效果完成淡出所花费的时间（以毫秒为单位）

您可能想要缓存对元素的引用（因为您需要使用它两次）

# flash - 使用 Flash 媒体服务器录制网络摄像头

> ID：11324350
> 
> 赞同：0
> 
> 时间：2012-07-04T07:30:18.287
> 
> 标签：flash, video, webcam, flash-media-server, video-recording

我正在尝试制作一个让用户录制视频消息的网络应用程序。我正在努力获得最好的质量（即使这意味着很长的上传时间）。我设法让录音与`ns.publish("livestream", "live");` 服务器代码看起来像这样：

```
Client.prototype.startRecord = function( source, destination ) {
        trace("recording Stream: " + source + " to: " + destination);
        this.newStream = Stream.get(destination);
        this.fileRecording = destination;
        trace(this.fileRecording);

        if (this.newStream)
        {
            this.newStream.onStatus = function (info) {
                //trace(info.code );
                if (info.code == "NetStream.Play.PublishNotify") {              
                    trace("start recording");
                    this.record();
                }   
            }

            this.newStream.play(source)

        }
    }

    Client.prototype.stopRecord = function() {
        trace("stopping Recording");
        this.newStream.record(false);
        this.newStream.play(false);
    }

    Client.prototype.getFiles = function() {
        var fileRecord = new File("/streams/_definst_/"+this.fileRecording+".flv");

        if (fileRecord.exists)
        {
            return this.fileRecording;
        }

        return "error recording";
    }

    application.onConnect = function(clObj) {
        this.acceptConnection(clObj);
    } 
```

问题是质量不是很好。我尝试使用`ns.publish("livestream", "record");`，但它在服务器上制作了 2 个文件并且质量没有提高，有什么建议吗？如果您需要，我也可以上传客户端代码。

客户端代码：

```
import flash.media.*;
import flash.events.*;
import flash.net.*;
import flash.utils.getTimer;

var vid:Video;
var mic:Microphone;
var cam:Camera;
var fileListObj:Object = {};
var ns:NetStream;
var nc:NetConnection;
var recordingName:String;

initCamera();

function initCamera ():void
{
    if (Camera.isSupported)
    {
        cam = Camera.getCamera();

        cam.setMode (800, 480, 24);
        //cam.setQuality(0, 90);
        vid = new Video(cam.width,cam.height);

        vid.attachCamera (cam);

        if (Microphone.isSupported)
        {
            mic = Microphone.getEnhancedMicrophone();       
        }

        this.addChildAt (vid, 1);

        vid.x = (800 - vid.width) >> 1;
        vid.y = (480 - vid.height) >> 1;        

        initConnection();
    }
    else
    {
        trace ("no camera");
    }
}

function initConnection ():void
{
    nc = new NetConnection();

    nc.addEventListener (NetStatusEvent.NET_STATUS, netStatusHandler);
    nc.addEventListener (AsyncErrorEvent.ASYNC_ERROR, function (event:AsyncErrorEvent):void {trace("error");});

    nc.connect ("rtmp://adrian7.srfms.com/nabCapture");
}

function recordVideo (event:MouseEvent):void
{
    if (record_mc.label == "Record")
    {
        record_mc.label = "Stop Record";

        var currentTime:Date = new Date();

        recordingName = "myRecording"+getTimer()+""+currentTime.time;

        nc.call ("startRecord", new Responder(startPublish), "livestream", recordingName);

    }
    else
    {
        record_mc.enabled = false;
        record_mc.label = "Record";

        nc.call ("stopRecord", null);
        ns.close();

        nc.call ("getFiles", new Responder(onResultFileListObj, null));     
    }
}

function startPublish (result:Object):void
{
    ns.publish("livestream", "live");
}

function netStatusHandler (event:NetStatusEvent):void
{
    //trace (event.info.code);
    if (event.info.code == "NetConnection.Connect.Success")
    {
        ns = new NetStream(nc);

        ns.attachCamera (cam);
        if (mic)
        {
            ns.attachAudio(mic);
        }

        record_mc.enabled = true;
        record_mc.addEventListener (MouseEvent.CLICK, recordVideo);
    }
}

function onResultFileListObj (resultObj:Object):void 
{
    if (String(resultObj) != "error recording")
    {
        recordingName = String(resultObj);

        see_mc.enabled = true;
        see_mc.addEventListener(MouseEvent.CLICK, function (event:MouseEvent):void {
                        navigateToURL(new URLRequest("http://www.labs.adrian281990.com/fms_demo1/index.php?id=" + recordingName), "_self");
                                });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-01T13:08:11.210

## 使用通用分辨率并避免使用默认的 setQuality 值

您应该首先对更改进行以下更改：

1.  使用常见的分辨率，如 640x480，帧速率为 30
2.  避免使用默认`cam.setQuality`设置并使用`cam.setQuality(0,90)`

以上转换为以下客户端 AS3 代码：

```
cam.setMode (640, 480, 24);
cam.setQuality(0, 90); 
```

**`cam.setMode(640,480,24);`**

发生的情况是您当前正在从网络摄像头请求 800x480@24fps。800x480@24fps 不是广泛支持的分辨率，这意味着在大多数网络摄像头上，您将获得网络摄像头响应的任何内容（这可能不是最佳质量）。请求像 640 x 480 @ 30fps 这样的*通用*分辨率将确保您在大多数网络摄像头上都能获得相同的分辨率。

**`cam.setQuality(0, 90);`**

您`cam.setQuality`已评论这意味着它将使用默认值，即：改变图片质量以将比特率保持在 130kbits/s（或 16384bytes/秒）以下。

130kbits/s 非常低。用于`cam.setQuality(0, 90)`告诉 Flash 根据需要使用尽可能多的带宽以将图片质量保持在 90。

有关详细信息，请参阅[Camera.SetQuality](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00000880.html)文档。

## 红5版

如果您使用的是 Red5，则应确保至少使用的是[Red5 1.0.3](https://github.com/Red5/red5-server)。这是修复了视频录制的第一个版本。所有以前的版本都有视频录制损坏，有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/18799148/recording-high-quality-video-using-flash-and-red5-media-server)。

## 商业解决方案

您还应该考虑使用像[HDFVR](https://hdfvr.com/)或[Pipe](https://addpipe.com/)这样的商业解决方案来处理包括移动和转换为 .mp4 在内的所有事情。

## 关于您的“2个文件”观察

> 但是它在服务器上制作了2个文件并且质量没有提高

根据您使用的媒体服务器，您可能会获得 1 个、2 个或更多文件。

[例如Red5](https://github.com/Red5/red5-server)将在录制过程中创建 2 个其他文件（.ser 和 .info）：

[![在此处输入图像描述](../Images/11f01b6da38db491ad9358cae7a7cf33.png)](https://i.stack.imgur.com/FBhyO.png)

并且，在第一次播放后，它将创建另一个 .meta 文件，其中包含关键帧列表、它们的字节位置和时间戳：

[![在此处输入图像描述](../Images/0f214c5ca2f19798b83910cd2a7985d2.png)](https://i.stack.imgur.com/New0n.png)

这是这样一个 .meta 文件的内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<FrameMetadata audioOnly="false" duration="24074" modified="1446217872000">
    <KeyFrame position="566" timestamp="39"/>
    <KeyFrame position="626" timestamp="40"/>
    <KeyFrame position="14705" timestamp="574"/>
    <KeyFrame position="14765" timestamp="575"/>
    ...
</FrameMetadata> 
```

# grails - 如何在 Groovy 中自动创建域类？

> ID：11324355
> 
> 赞同：1
> 
> 时间：2012-07-04T07:30:30.650
> 
> 标签：grails, groovy, grails-domain-class

任何人都知道如何在 groovy 中**自动创建域类？**

这是我的 BuildConfig.groovy：

```
grails.project.class.dir = "target/classes"
grails.project.test.class.dir = "target/test-classes"
grails.project.test.reports.dir = "target/test-reports"
grails.project.target.level = 1.6
//grails.project.war.file = "target/${appName}-${appVersion}.war"

grails.project.dependency.resolution = {
    // inherit Grails' default dependencies
    inherits("global") {
        // uncomment to disable ehcache
        // excludes 'ehcache'
    }
    log "warn"
 // log level of Ivy resolver, either 'error', 'warn', 'info', 'debug' or 'verbose'
    repositories {
        grailsCentral()
        // uncomment the below to enable remote dependency resolution
        // from public Maven repositories
        mavenCentral()
        //mavenLocal()
        //mavenRepo "http://snapshots.repository.codehaus.org"
        //mavenRepo "http://repository.codehaus.org"
        //mavenRepo "http://download.java.net/maven/2/"
        //mavenRepo "http://repository.jboss.com/maven2/"
    ebr()
    }
    dependencies {
        // specify dependencies here under either 'build', 'compile', 'runtime', 'test' or 'provided' scopes eg.
grails.project.dependency.resolution = { plugins{compile ":svn:1.0.2" } }
        // runtime 'mysql:mysql-connector-java:5.1.5'
    }

    plugins {
        build(":tomcat:$grailsVersion",
              ":release:1.0.0") {
            export = false
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T07:58:52.190

如果您的意思是从数据库表开始自动创建一个 groovy 域，您可以尝试使用[db reverse 插件](http://grails.org/plugin/db-reverse-engineer)

# asp.net - 使用内连接时如何区分一列

> ID：11324357
> 
> 赞同：0
> 
> 时间：2012-07-04T07:30:36.013
> 
> 标签：asp.net, ms-access, ms-access-2007

我正在使用两个表 postjob 和 job location 想要区分 jobtitle

查询是：

```
select postjob.jobtitle,
postjob.industry,
postjob.companyname,
postjob.jobdescription,
postjob.postid,
postjob.PostingDate,
Job_Location.Location,
Job_Location.PostigID 
from postjob 
inner join Job_Location 
on postjob.postid = Job_Location.PostigID 
Where postjob.industry=' Marketing, Advertising' 
```

此查询的输出 [http://www.justlocaldial.com/Industry_search.aspx?ind=Marketing,%20Advertising](http://www.justlocaldial.com/Industry_search.aspx?ind=Marketing,%20Advertising)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:52:58.777

**根据需要**填写***数据*，并让我们了解如何显示数据，以便我们尝试找到解决方案；你可以在 postjob.postid 上区分这给出了独特的数据**

 **现场演示 [http://sqlfiddle.com/#!3/2d53c/4](http://sqlfiddle.com/#!3/2d53c/4)

```
create table postjob
(postid int identity(1,1),jobtitle nvarchar(50),industry nvarchar(30),
jobdescription nvarchar(150),PostingDate datetime)

insert into postjob values('Programmer','Software','User interface','2012-07-04 15:00:24.833')
insert into postjob values('Tester','Software','Automated Testing Application','2012-07-04 15:00:24.833')
insert into postjob values('Sales Executive','Marketing','Meeting with clients','2012-07-04 15:00:24.833')
insert into postjob values('Doctor','Hospitality','Treatment','2012-07-04 15:00:24.833')
insert into postjob values('Desinger','Software','User interface graphicdesinger','2012-07-04 15:00:24.833')
insert into postjob values('Desinger','Interior','Blah blah','2012-07-04 15:00:24.833') 
```

* * *

```
create table Job_Location(PostigID int,Location nvarchar(50))
insert into Job_Location values ('1','India')
insert into Job_Location values ('2','Italy')
insert into Job_Location values ('3','Germany')
insert into Job_Location values ('4','France')
insert into Job_Location values ('5','India')
insert into Job_Location values ('6','USA') 
```**

# iphone - 如何控制 UISlider Value Changed-events 频率？

> ID：11324359
> 
> 赞同：5
> 
> 时间：2012-07-04T07:30:50.523
> 
> 标签：iphone, ios, time, uislider, core-bluetooth

我正在编写一个 iPhone 应用程序，它使用两个 uislider 来控制使用 coreBluetooth 发送的值。如果我快速移动滑块，一个值会在接收器处冻结，大概是因为 Value Changed 事件触发得太频繁以至于写入命令堆积起来并最终被丢弃。如何确保事件不会频繁触发？

**编辑：**

这是对问题的澄清；蓝牙连接每 105 毫秒发送一次命令。如果用户在那段时间产生了一堆事件，他们似乎在排队。我想丢弃连接事件之间生成的任何值，并且每 105 毫秒发送一个。

这基本上就是我现在正在做的事情：

```
-(IBAction) sliderChanged:(UISlider *)sender{

  static int8_t value = 0;
  int8_t new_value = (int8_t)sender.value;

  if ( new_value > value + threshold || new_value < value - threshold ) {
    value = new_value;  
    [btDevice writeValue:value];
  }
} 
```

我要问的是如何实现类似的东西

```
-(IBAction) sliderChanged:(UISlider *)sender{

  static int8_t value = 0;

  if (105msHasPassed) {
    int8_t new_value = (int8_t)sender.value;

    if ( new_value > value + threshold || new_value < value - threshold ) {
      value = new_value;  
      [btDevice writeValue:value];
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:38:04.503

我想仍然触发它们确实有意义......在你的情况下我会做的是检查当前值和先前值之间的增量。例如：

*   当前值 -> 5。
*   下一个值 -> 6。
*   三角洲 1

只是一点伪代码：

```
if(delta>5){
 //do your stuff
} 
```

* * *

我可能不会这样做，但是：

```
-(void)sliderValueChanged:(UISlider *)sender{
    [self performSelector:@selector(removeAction:) withObject:sender afterDelay:0.3];
    // Do your stuff
}

- (void)removeAction:(UISlider *)sender{
    [sender removeTarget:self action:@selector(sliderValueChanged:) forControlEvents:UIControlEventValueChanged];    

    [self performSelector:@selector(addAction:) withObject:sender afterDelay:0.3];
}

- (void)addAction:(UISlider *)sender{
    [mySlider addTarget:self action:@selector(sliderValueChanged:) forControlEvents:UIControlEventValueChanged];   
} 
```

我没有测试过这个，但我想你明白了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T07:48:42.100

您可能会变得复杂并根据某个时间戳或新值与旧值之间的差异是否大于某个阈值来过滤来自滑块的输入。

更简单的方法是使用不同的事件：touchEnded。这样，您只发送一个最终值，而不是所有中间值。

可能不适合您的应用，但尚不完全清楚您需要做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T09:13:11.180

只是一个想法，但您可以做的不是发送值更改事件。您可以将上次传输的值存储在一个变量中，然后您可以在后台运行一个计时器，检查发送的最后一个值是否与当前滑块值不同，如果是则发送新值。计时器可以设置为每 105 毫秒触发一次，如果新值与上次发送的值不同，它只会每 105 毫秒发送一次值。

# java - 在 java 程序中执行终端命令

> ID：11324362
> 
> 赞同：0
> 
> 时间：2012-07-04T07:31:05.783
> 
> 标签：java, runtime.exec, javap

```
javap -classpath /Users/amol/Documents/Java/ -l -c a 
```

当我在终端中执行上述命令时，输出会显示我的类中的函数名称以及局部变量

```
Process process3 = Runtime.getRuntime().exec(new String[]{
          "javap","-classpath","/Users/amol/Documents/Java/","-l","-c","a"}); 
```

但是，当我在 netbeans 中键入上述行并运行它时，它只显示已声明局部变量的函数名称和行号。

为什么同一命令的输出会发生变化？

# java - 如何使弹簧将值注入静态字段

> ID：11324372
> 
> 赞同：69
> 
> 时间：2012-07-04T07:32:03.613
> 
> 标签：java, spring, configuration, app-config

我知道这可能看起来像以前提出的问题，但我在这里面临不同的问题。

我有一个只有静态方法的实用程序类。我没有，我也不会从中举一个例子。

```
public class Utils{
    private static Properties dataBaseAttr;
    public static void methodA(){

    }

    public static void methodB(){

    }
} 
```

现在我需要 Spring 用数据库属性 Properties.Spring 配置填充 dataBaseAttr 是：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd">

<util:properties id="dataBaseAttr"
        location="file:#{classPathVariable.path}/dataBaseAttr.properties" />
</beans> 
```

我已经在其他 bean 中完成了它，但是这个类（Utils）中的问题不是 bean，如果我把它变成一个 bean，我仍然无法使用该变量，因为该类不会被实例化并且总是变量等于空。

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-07-04T07:36:43.957

你有两种可能：

1.  静态属性/字段的非静态设置器；
2.  用于[`org.springframework.beans.factory.config.MethodInvokingFactoryBean`](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/beans/factory/config/MethodInvokingFactoryBean.html)调用静态设置器。

在第一个选项中，您有一个带有常规 setter 的 bean，而是设置了一个实例属性，您设置了静态属性/字段。

```
public void setTheProperty(Object value) {
    foo.bar.Class.STATIC_VALUE = value;
} 
```

但为了做到这一点，您需要一个 bean 的实例来公开这个 setter（它更像是一种*解决方法*）。

在第二种情况下，它将按如下方式完成：

> ```
> <bean class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
>     <property name="staticMethod" value="foo.bar.Class.setTheProperty"/>
>     <property name="arguments">
>         <list>
>             <ref bean="theProperty"/>
>         </list>
>    </property>
> </bean> 
> ```

在您的情况下，您将在`Utils`该类上添加一个新的设置器：

```
public static setDataBaseAttr(Properties p) 
```

在您的上下文中，您将使用上面举例说明的方法对其进行配置，或多或少类似于：

> ```
> <bean class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
>     <property name="staticMethod" value="foo.bar.Utils.setDataBaseAttr"/>
>     <property name="arguments">
>         <list>
>             <ref bean="dataBaseAttr"/>
>         </list>
>    </property>
> </bean> 
> ```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-02-05T13:24:12.870

我有一个类似的要求：我需要将 Spring 管理的存储库 bean 注入我的`Person`实体类（“实体”，如“具有身份的东西”，例如 JPA 实体）。一个`Person`实例有朋友，为了让这个`Person`实例返回它的朋友，它应该委托给它的存储库并在那里查询朋友。

```
@Entity
public class Person {
    private static PersonRepository personRepository;

    @Id
    @GeneratedValue
    private long id;

    public static void setPersonRepository(PersonRepository personRepository){
        this.personRepository = personRepository;
    }

    public Set<Person> getFriends(){
        return personRepository.getFriends(id);
    }

    ...
} 
```

.

```
@Repository
public class PersonRepository {

    public Person get Person(long id) {
        // do database-related stuff
    }

    public Set<Person> getFriends(long id) {
        // do database-related stuff
    }

    ...
} 
```

那么我是如何将该`PersonRepository`单例注入到类的静态字段中的`Person`呢？

我创建了一个，它在*Spring ApplicationContext 构建时*`@Configuration`被拾取。这会注入所有我需要作为静态字段注入其他类的bean。然后通过注释，我捕获了一个钩子来执行所有静态字段注入逻辑。*`@Configuration``@PostConstruct`*

 *```
@Configuration
public class StaticFieldInjectionConfiguration {

    @Inject
    private PersonRepository personRepository;

    @PostConstruct
    private void init() {
        Person.setPersonRepository(personRepository);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-26T05:17:43.253

由于这些答案很旧，我找到了这个替代方案。它非常干净，只使用 java 注释：

> 要修复它，请创建一个“非静态设置器”来为静态变量分配注入的值。例如 ：

```
import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Component;

@Component
public class GlobalValue {

public static String DATABASE;

@Value("${mongodb.db}")
public void setDatabase(String db) {
    DATABASE = db;
}
} 
```

[https://www.mkyong.com/spring/spring-inject-a-value-into-static-variables/](https://www.mkyong.com/spring/spring-inject-a-value-into-static-variables/)*

# javascript - 在 Javascript/jQuery 中自动化 html

> ID：11324383
> 
> 赞同：0
> 
> 时间：2012-07-04T07:32:30.010
> 
> 标签：javascript, jquery, automation

我目前正在我的 html 网页上准备一个很酷的视频演示。最后，我希望能够点击视频并被带到一个页面 - 但是我只希望链接在特定时间生效。

我已经做了一些研究，但我找不到任何关于此的信息。

例如，假设我想在某事上建立链接......

```
<a href="#" id="automate">This link will go somewhere after 15 seconds</a> 
```

我怎样才能使`<a>`标签在 15 秒内无法使用 jQuery 或 JavaScript 工作？（首选 JavaScript，但这并不重要！）。请记住 - 我不希望整行代码突然出现 - 在链接工作之前应该只是文本！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T07:37:32.467

这里延迟设置为 3 秒（调用 setTimeout 时为 3000 毫秒）。将其更改为 15000 以使其为 15 秒

```
$(document).ready(function() {
   setTimeout(convertTextToLink, 3000);
});

function convertTextToLink() {
    $('#thanks').html('<a href="http://example.com">Thanks for watching. You may now proceed.</a>');
} 
```

html

```
<h1>Hello</h1>
<p>here are your vids</p>
<div id="thanks">Thanks for watching</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T07:38:36.053

```
var waiting = true;

//set waiting to false after 15 seconds
setTimeOut(function() { waiting = false },15000); 

$('#automate').click(function(e) {
    if(waiting === true) {
       e.preventDefault(); //prevent the link from firing
    }
}); 
```

# php - 使用“mkdir()”后，CakePHP 中的文件夹未删除

> ID：11324388
> 
> 赞同：1
> 
> 时间：2012-07-04T07:32:36.563
> 
> 标签：php, cakephp

当我使用`mkdir()`. 代码工作正常。我可以上传到具有特定 ID 的已创建文件夹。当我想移动或复制或删除文件夹时，我的问题出现了，它拒绝所有操作。

有关如何获得权限的任何帮助都允许我执行这些操作

```
//upload function
public function import($app_id = null) {
  if ($this->request->is('post')) {
    //debug($this->data); die();
    $app_id=$this->data['Upload']['applicants_detail_id'];
    //debug($app_id); die();
    $files_dir = "c:\\xampp\\htdocs\\newstudents\\app\\myuploads\\" .$app_id." \\";
    $destination = mkdir($files_dir); //creating the directory with the app_id.
//  chmod ("$destination", 0755); 

    $filename = $files_dir . $this->request->data['Upload']['OLevel']['name'];
    if($success = move_uploaded_file($this->request->data['Upload']['OLevel']['tmp_name'],$filename)){
        for($i=0; $i < sizeof($this->request->data['Upload']['OLevel']['tmp_name']); $i++){
            $this->Upload->create();
            $this->Upload->set(array(
                'applicants_detail_id'=>$app_id,
                'caption'=> $this->request->data['Upload']['OLevel']['name'],
                'path'=>$filename,
                'doctype'=>$this->data['Upload']['Olevel']
            ));
            $this->Upload->save();
        }
    }

    $filename = $files_dir . $this->request->data['Upload']['ALevel']['name'];
    if($success = move_uploaded_file($this->request->data['Upload']['ALevel']['tmp_name'],$filename)){
        for($m=0; $m < sizeof($this->request->data['Upload']['ALevel']['tmp_name']); $m++){
            $this->Upload->create();
            $this->Upload->set(array(
                'applicants_detail_id'=>$app_id,
                'caption'=> $this->request->data['Upload']['ALevel']['name'],
                'path'=>$filename,
                'doctype'=>$this->data['Upload']['Alevel']
            ));
            $this->Upload->save();
        }
    }

    $filename = $files_dir . $this->request->data['Upload']['BirthCertificate']['name'];
    if($success = move_uploaded_file($this->request->data['Upload']['BirthCertificate']['tmp_name'],$filename)){
        for($n=0; $n < sizeof($this->request->data['Upload']['Birth']['tmp_name']); $n++){
            $this->Upload->create();
            $this->Upload->set(array(
                'applicants_detail_id'=>$app_id,
                'caption'=> $this->request->data['Upload']['BirthCertificate']['name'],
                'path'=>$filename,
                'doctype'=>$this->data['Upload']['Birth']
            ));
            $this->Upload->save();
        }
    }

    $filename = $files_dir . $this->request->data['Upload']['NationalID']['name'];
    if($success = move_uploaded_file($this->request->data['Upload']['NationalID']['tmp_name'],$filename)){
        for($k=0; $k < sizeof($this->request->data['Upload']['National_id']['tmp_name']); $k++){
            $this->Upload->create();
            $this->Upload->set(array(
                'applicants_detail_id'=>$app_id,
                'caption'=> $this->request->data['Upload']['NationalID']['name'],
                'path'=>$filename,
                'doctype'=>$this->data['Upload']['National_id']
            ));
            $this->Upload->save();
        }
    }

    $filename = $files_dir . $this->request->data['Upload']['OtherCertificate']['name'];
    if($success = move_uploaded_file($this->request->data['Upload']['OtherCertificate']['tmp_name'],$filename)){
        for($x=0; $x < sizeof($this->request->data['Upload']['OtherCertificate']['tmp_name']); $x++){
            $this->Upload->create();
            $this->Upload->set(array(
                'applicants_detail_id'=>$app_id,
                'caption'=> $this->request->data['Upload']['OtherCertificate']['name'],
                'path'=>$filename,
                'doctype'=>$this->data['Upload']['other']
            ));
            $this->Upload->save();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:48:45.943

我建议使用 API 来操作目录和文件。并且使用正确的*CakePHP*目录结构，您的文件应该在**webroot**目录中。

而是*mkdir()*用于创建：

```
$files_dir = APP . WEBROOT_DIR . DS . "myuploads" . DS . $app_id;
$destination = new Folder($files_dir, true, 0755); 
```

参考：

*   [文件夹和文件](http://book.cakephp.org/2.0/en/core-utility-libraries/file-folder.html)

# php - 如何在外部文件中执行php

> ID：11324392
> 
> 赞同：0
> 
> 时间：2012-07-04T07:33:00.943
> 
> 标签：php, constants

为什么这不起作用？

```
// File hosted on `example.com`
// db-con.php
<?php
  define("DB_HOST" , "host");
  define("DB_NAME" , "name");
  define("DB_USER" , "user");
  define("DB_PASS" , "pass"); 
```

-

```
// File hosted on `another-example.com`
// index.php
<?php
  include 'http://example.com/db-con.php';
  echo DB_HOST; 
```

-

```
// output
Notice: Use of undefined constant DB_HOST - assumed 'DB_HOST' in C:\Users\Alex\Dropbox\Shared\Web\htdocs\BASE_TEMPLATE\index.php on line 14 
```

当然通过包含外部文件，运行 php 并定义常量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T07:35:01.833

您没有包括您看到的文件，而是包括*远程 Web 服务器在请求该文件时的响应*。

也就是说，远程 Web 服务器看到对 的请求`db-con.php`，将其加载，执行代码（在其自己的本地进程中定义常量）并将输出返回给您（可能为空，因为代码不回显任何内容）。因此，最终结果与您包含一个空文件相同。

**更新：**从手册中挖出参考：

> 如果在 PHP 中启用了“URL fopen 包装器”（它们在默认配置中），您可以使用 URL 指定要包含的文件（通过 HTTP 或其他支持的包装器 - 请参阅支持的协议和包装器以获取协议列表）而不是本地路径名。如果目标服务器将目标文件解释为 PHP 代码，则可以使用与 HTTP GET 一起使用的 URL 请求字符串将变量传递给包含的文件。严格来说，这与包含文件并使其继承父文件的变量范围不同。该脚本实际上正在远程服务器上运行，然后将结果包含到本地脚本中。

### 那么该怎么做呢？

好吧，包含来自远程服务器的代码是您不应该真正考虑做的事情（尽管有一些方法可以实现，但这是一个非常糟糕的主意）。在任何情况下，如果没有远程服务器的明确合作，您将无法做到这一点（否则任何人都可以包含其他任何人的配置文件并用于`get_defined_constants`获取密码）。如果您这样做，其他任何人都可以按照相同的步骤获取*您的*密码。你不希望这种情况发生。

# c# - 将图像添加到数据表

> ID：11324396
> 
> 赞同：0
> 
> 时间：2012-07-04T07:33:16.877
> 
> 标签：c#, asp.net, image, gridview, datatable

我正在运行时创建一个 DataTable。我的目标是将图像插入 DataTable 以最终显示在 GridView 中。[这里](https://stackoverflow.com/questions/905419/image-in-datatable)的答案看起来很有希望，但我将它复制并粘贴到 VS 中，它根本不起作用。“不起作用”是指当我在 GridView 中显示 DataTable 时，应该包含图片的单元格只包含字符串“System.Byte []”

这是 DataTable 的构造和填充的一个非常简略的版本：

```
DataTable dt = new DataTable();
DataColumn imagecol = new DataColumn();
dt.Columns.Add(imagecol);

DataRow newrow;

for (int x = 0, x < 10; x++)
{
    newrow = dt.NewRow();
    newrow[imagecol] = *********
    dt.Add(newrow);
} 
```

* * *

* 部分是我一直失败的地方。

我从不将 .aspx 字段用于 GridView（ImageField、TemplateField 等），因此我正在寻找不需要编辑 .aspx 代码或“准备”具有特定列的 DataTable 的 GridView 的解决方案。让我在有人问之前回答一下。我这样做的原因是：

A) 我只学过如何从以编程方式创建的 DataTable 制作 GridView。

B) 我不喜欢这样，如果我想在某个时候更改我的字段，我必须在两个地方进行编辑，而不仅仅是一个。

C）应用程序的所有其他页面都使用这种风格，所以我想保持一致。

那么我尝试了什么？

* * *

```
DataColumn imagecol = new DataColumn();
imagecol.DataType = System.Type.GetType("System.Byte[]");
//...
newrow[amountcol] = ReadImage(Server.MapPath("~/images/dashboard/myvacstatus-ampm.png"), new string[] { ".png" }); 
```

（ReadImage 函数将图像转换为字节数组）

结果：GridView 中的字段显示文本“System.Byte[]”。

* * *

```
DataColumn imagecol = new DataColumn();
//...
newrow[amountcol] = ResolveUrl("~/images/dashboard/myvacstatus-ampm.png"); 
```

结果：GridView 中的字段显示文本“/images/dashboard/myvacstatus-ampm.png”

* * *

```
DataColumn imagecol = new DataColumn();
//...
Image timeImg = new Image();
timeImg.ImageUrl = "/images/dashboard/myvacstatus-ampm.png"
newrow[amountcol] = timeImg; 
```

结果：GridView 中的字段显示文本“System.Web.UI.WebControls.Image”

* * *

我的最后一个要求是该字段必须具有成为图像或字符串的灵活性。为了透视这个/看看我想要做什么，这是一个假期管理系统。假期一般为半天或全天。我们有两者的图标。但有时假期可以持续 X 小时。因此，在恰好是半天的情况下，该行需要半天的图像。如果是全天，则该行需要全天的图像。如果时间量既不是一半也不是完整的，在图像的位置，我们需要将小时数作为文本放置。

我认为可行的一种可能的解决方案是将假期的时间放在隐藏列中，然后在 RowDataBound 事件上，使用小时的隐藏值来创建必要的图像或文本，然后说：

```
e.Row.Cells[3].Controls.Add(myImage); 
```

我不喜欢这样，因为它再次拆分了我的代码，我必须始终只知道 Cells 索引是什么，等等。我真的只想让所有这些都包含我的 BuildDataTable 函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T08:26:11.760

**编辑**：重新阅读问题后完整地重写答案。

你说：

> 我从不将 .aspx 字段用于 GridView（ImageField、TemplateField 等），因此我正在寻找不需要编辑 .aspx 代码的解决方案......

如果您只想使用，`AutoGenerateColumns="false"`那么我认为您将无法在 GridView 中显示图像。

为了显示图像，渲染的页面必须有一个图像标签。没有办法解决这个问题，除非你开始摆弄 CSS [data urls](http://www.websiteoptimization.com/speed/tweak/inline-images/)。

对于您的要求，这听起来非常复杂，并且无论如何它都不适用于所有浏览器。

要显示图像，我认为您必须手动设置`GridView`. 这是一个完整的工作示例，您可以将其用作起点（您必须调整图像 url 以匹配您的项目）：

**在 aspx 文件中**：

```
<asp:GridView ID="example" runat="server" AutoGenerateColumns="false">
    <Columns>
        <asp:BoundField HeaderText="Some other field" DataField="SomeOtherField" />
        <asp:TemplateField HeaderText="Image/Text">
            <ItemTemplate>
                <asp:Image ID="FullDay" runat="server" Visible='<%# ((int)Eval("HoursField")) == this.FullDayHours %>'
                    ImageUrl="~/images/dashboard/fullDayImage.png" />
                <asp:Image ID="HalfDay" runat="server" Visible='<%# ((int)Eval("HoursField")) == this.HalfDayHours %>'
                    ImageUrl="~/images/dashboard/halfDayImage.png" />
                <asp:Literal ID="ShowHours" runat="server" Visible='<%# ((int)Eval("HoursField")) != this.HalfDayHours  && ((int)Eval("HoursField")) != this.FullDayHours %>'
                    Text='<%# Eval("HoursField") %>'></asp:Literal>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

**文件后面的代码**：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Collections;
using System.Data;

public partial class GridViewTest : System.Web.UI.Page
{
    public readonly int FullDayHours = 8;
    public readonly int HalfDayHours = 4;

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            DataTable gridViewSource = new DataTable();

            DataColumn oneColumn = new DataColumn("SomeOtherField");
            oneColumn.DataType = System.Type.GetType("System.String");
            gridViewSource.Columns.Add(oneColumn);

            oneColumn = new DataColumn("HoursField");
            oneColumn.DataType = System.Type.GetType("System.Int32");
            gridViewSource.Columns.Add(oneColumn);

            for (int i = 0; i < 10; i++)
            {
                DataRow oneRow = gridViewSource.NewRow();
                oneRow["SomeOtherField"] = "Other field " + i.ToString();
                oneRow["HoursField"] = i;
                gridViewSource.Rows.Add(oneRow);
            }
            example.DataSource = gridViewSource;
            example.DataBind();
        }
    }
} 
```

# macos - NSScrollview 不尊重滚动条的系统首选项（滚动时），而我覆盖 -tile 方法

> ID：11324400
> 
> 赞同：2
> 
> 时间：2012-07-04T07:33:25.047
> 
> 标签：macos, nsscrollview, tile, scroller

下面是我的代码，它覆盖了水平滚动条上的控件。

```
- (void)tile
{
    [super tile];
    if (subControl)
    {
        NSRect subControlFrame = [subControl frame];

        NSScroller *horizontalScroller = [self horizontalScroller];

        NSRect scrollerFrame = [horizontalScroller frame];

        // adjust control position here in the scrollview coordinate space
        subControlFrame.origin.x = scrollerFrame.origin.x;
        subControlFrame.origin.y = scrollerFrame.origin.y;
        subControlFrame.size.height = scrollerFrame.size.height;
        // move controls
        [subControl setFrame:subControlFrame];

        NSRect subControlFrame2 = [subControl frame];

        scrollerFrame.origin.x += subControlFrame2.size.width;

        scrollerFrame.size.width -= subControlFrame2.size.width;

        [horizontalScroller setFrame:scrollerFrame];
    }
} 
```

线后

```
 [subControl setFrame:subControlFrame]; 
```

它停止响应系统偏好？

# java - 防止“向 Microsoft 发送错误报告”

> ID：11324401
> 
> 赞同：1
> 
> 时间：2012-07-04T07:33:31.117
> 
> 标签：java, windows

我正在研究对文件执行一些运行时子进程的 java 应用程序，对于某些文件我得到错误导致向 Microsoft 发送错误报告窗口出现，我需要以编程方式处理此错误，而不向用户显示此窗口。请问有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T07:58:40.487

抑制 Windows 错误报告正在调用的 .exe 不应因未处理的异常而终止。这仅在您有权访问应用程序源时才有效。

基于[WER 参考](http://msdn.microsoft.com/en-us/library/bb513638%28v=vs.85%29)- 您应该使用 Win32 API 调用[WerAddExcludedApplication](http://msdn.microsoft.com/en-us/library/bb513617%28v=vs.85%29)将您打算忽略的特定 .exe 文件添加到每个用户的忽略列表中 - 您可以创建一个简单的存根应用程序，允许您通过以下方式添加应用程序名称到忽略列表。然后，当您调用应用程序时，它不会触发错误。

[同样，您可以使用WerRemoveExcludedApplication](http://msdn.microsoft.com/en-us/library/bb513621%28v=vs.85%29)创建另一个应用程序来删除它们。

替代方法是使用 JNI/JNA 创建一个类来封装此功能，而不是使用`Runtime.exec`

[这是一个使用Java Native Access (JNA)](https://github.com/twall/jna)的简单示例，它是 JNI 的更简单版本（大部分不需要 C++）。下载 jna.jar 并使其成为您项目的一部分。

```
import com.sun.jna.Native;
import com.sun.jna.WString;
import com.sun.jna.win32.StdCallLibrary;

public class JNATest {

    public interface CLibrary extends StdCallLibrary {
        CLibrary INSTANCE = (CLibrary) Native.loadLibrary("wer.dll", 
            CLibrary.class);
        int WerAddExcludedApplication(WString name, boolean global);
        int WerRemoveExcludedApplication(WString name, boolean global);
    }

    public static void main(String[] args) {
        CLibrary.INSTANCE.WerAddExcludedApplication(new WString("C:\\foo.exe"), false);
        CLibrary.INSTANCE.WerRemoveExcludedApplication(new WString("C:\\foo.exe"), false);
    }
} 
```

基本上，将新`WString(...)`值替换为您打算忽略的应用程序的名称。出于 Windows 错误报告的目的，此时应忽略它。

请记住，这`wer.dll`仅适用于 Windows Vista 和更新版本，因此如果这是一个问题，那么您可能需要手动编辑注册表项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T07:44:29.460

您始终可以使用 try-catch-finally 语句：

```
try
{
    some code here (the code that is causing the error);
}
catch (Exception x)
{
    handle exception here;
} 
```

这个对我有用...

**编辑**这里是可以帮助你更多一点的链接：

[http://www.exampledepot.com/egs/Java%20Language/TryCatch.html](http://www.exampledepot.com/egs/Java%20Language/TryCatch.html)

# php - 用 php 创建的文件夹归 apache 所有

> ID：11324404
> 
> 赞同：2
> 
> 时间：2012-07-04T07:33:40.627
> 
> 标签：php, apache, chown

我们公司使用的是 linux 专用服务器。

每当我们使用 php 脚本创建文件夹时，apache 都拥有该文件夹，并且每次我必须通过 root 连接到服务器才能将所有者更改为用户和权限

但我不知道我应该更改哪个设置来解决这个问题。

我试图打开/关闭安全模式，但它不起作用。

如果有人可以帮助我，我会很高兴

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T07:36:05.097

您是否尝试过使用[chown PHP 命令](http://php.net/manual/en/function.chown.php)和[chmod PHP 命令](http://php.net/manual/en/function.chmod.php)？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T07:39:08.823

有**两种**方法可以做到这一点：

`chown()`您可以在其中通过执行该功能更改文件权限。

或者，如果您能够使用 FTP 移动文件，则可以将文件拖到文档根目录 ( `public_html/`) 之外，然后右键单击 -> 更改文件的文件权限。

CHMOD 是您想要查看的内容。`777`将使任何人和所有东西都可以访问您的文件，您可以将其用作测试以确保您具有文件权限。我不建议保留权限`777`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T08:07:06.923

这是一个可移植性问题，取决于您的服务器配置（即带有 SuExec 的 mod_php 或 FCGI）。

您可以在创建文件后立即尝试使用该`chown`函数，但这只有在您知道实际所有者应该是谁的情况下才有效（并非总是如此）。为了克服这个问题，[我编写了一个简单的方法](https://github.com/alixaxel/phunction/blob/558431470922be267be2758051bb6ee4df8eb8fc/phunction/Disk.php#L16)，试图找到最好的文件模式，该模式始终确保读取和写入（以及目录的执行），而不会给予过多的权限：

```
function xChmod($path, $chmod = null) // adapted from phunction
{
    if (file_exists($path) === true)
    {
        if (is_null($chmod) === true)
        {
            $chmod = (is_dir($path) === true) ? 777 : 666;

            if (extension_loaded('posix') === true)
            {
                $user = posix_getpwuid(posix_getuid());

                if (array_key_exists('name', $user) === true)
                {
                    $chmod -= (in_array($user['name'], explode('|', 'apache|httpd|nobody|system|webdaemon|www|www-data')) === true) ? 0 : 22;
                }

            }
        }

        return chmod($path, octdec(intval($chmod)));
    }

    return false;
} 
```

基本上，如果您省略第二个`$chmod`参数，默认情况下它将`0777`用于文件夹和`0666`文件，但是，如果 PHP 在非标准用户下运行，它会将模式减 22，产生`0755`文件夹和`0644`文件。请记住，这仅适用于已经存在的文件，因此如果您要创建目录，则[需要采取额外的预防措施](https://stackoverflow.com/q/6839786/89771)。

# android - 如何通过选择列表项从数据库中检索记录

> ID：11324405
> 
> 赞同：0
> 
> 时间：2012-07-04T07:33:44.980
> 
> 标签：android

嗨，我想从列表框中选择一个项目，并从数据库中检索所选项目的记录，在 edittext 字段中显示其内容。我是 android 新手，我找不到有关此主题的任何提示。所以朋友如果有人知道请帮助我。
提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:15:10.197

您所指的列表框在 Android中称为[Spinner 。](http://developer.android.com/guide/topics/ui/controls/spinner.html)

在 中检索您的数据`onItemSelected()`。

# asp.net - 按不返回 0 值分组

> ID：11324406
> 
> 赞同：2
> 
> 时间：2012-07-04T07:33:45.863
> 
> 标签：asp.net, mysql, sql

我的表包含`pk_id`, `reviewer_id`, `rating`。有 4 种类型的评级。

```
1-very good.
2-good.
3-bad.
4-very bad. 
```

我想计算每个评论者给出的评分。意思是：如果拥有 id 200 的 Akee 对不同的代码给出了 2 非常好、4 好、3 差和零非常差的评级。

我要结果

```
 count--- rate

   2---------1

   4---------2

   3---------3

   0---------4 
```

我的查询是

```
SELECT COUNT(RATE),RATE
  FROM CODE_REVIEW WHERE CODE_REVIEWER_ID= 200
 GROUP BY RATE; 
```

它正在显示结果

```
 count--- rate

   2---------1

   4---------2

   3---------3 
```

我想显示第四行，即 4 评级为零。如何做呢？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T07:45:03.393

如果 Rate 不是另一个表中的主键，那么您需要定义自己的速率列表，以便 MySQL 知道排列`rate`是什么：

```
SELECT  Rates.Rate,
        COUNT(Code_Review.Rate) AS CountOfRate
FROM    (   SELECT 1 AS Rate UNION ALL
            SELECT 2 AS Rate UNION ALL
            SELECT 3 AS Rate UNION ALL
            SELECT 4
        ) AS Rates
        LEFT JOIN Code_Review
            ON Code_Review.Rate = Rates.Rate
            AND CODE_REVIEWER_ID = 200
GROUP BY Rates.Rate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T07:41:56.323

假设您没有定义费率的单独表。

```
SElECT * from (
  SELECT distinct(m.rate), countrate from code_review m 
  LEFT JOIN
  (SELECT COUNT(rate) as countrate,rate FROM code_review 
     WHERE code_reviewer_id=200 GROUP BY rate) t 
  ON m.rate=t.rate) a 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T07:42:23.550

如果可以，您应该尝试以列格式获取它，因为它很简单：

```
SELECT
    SUM(rate = 1) AS 1,
    SUM(rate = 2) AS 2,
    SUM(rate = 3) AS 3,
    SUM(rate = 4) AS 4
FROM
    code_review
WHERE
    code_reviewer_id = 200 
```

但是如果你真的需要一个行格式，你可以这样做：

```
SELECT
    a.rate,
    COUNT(b.rate) AS cnt
FROM
    (
        SELECT 1 AS rate UNION ALL
        SELECT 2 AS rate UNION ALL
        SELECT 3 AS rate UNION ALL
        SELECT 4 AS rate
    ) a
LEFT JOIN
    code_review b ON a.rate = b.rate AND code_reviewer_id = 200
GROUP BY
    a.rate 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T07:45:05.463

你可以这样做

```
SELECT
            rates.RATE
            , SUM(COUNT) COUNT
   FROM
           (
           SELECT 1 RATE, 0 COUNT UNION ALL
           SELECT 2 RATE, 0 COUNT UNION ALL
           SELECT 3 RATE, 0 COUNT UNION ALL
           SELECT 4 RATE, 0 COUNT
           ) Rates
       LEFT JOIN
           (
               SELECT
                         RATE
                       , COUNT(RATE) COUNT 
                   FROM
                       CODE_REVIEW 
                   WHERE
                       CODE_REVIEWER_ID= 200
                   GROUP BY RATE
           ) Ratings200
           ON Ratings200.RATE = Rates.RATE 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T07:46:10.813

试试这个查询：

```
SELECT coalesce(c.cnt, 0), r.rate
  FROM (SELECT 1 AS rate UNION ALL SELECT 2
        UNION ALL SELECT 3 UNION ALL SELECT 4) AS r
  LEFT JOIN (SELECT COUNT(RATE),RATE
          FROM CODE_REVIEW WHERE CODE_REVIEWER_ID= 200
         GROUP BY RATE) AS c
    ON r.rate = c.rate; 
```

1.  第一个子查询创建一个可能的费率列表。如果您有一个定义所有费率的表格，则可以避免它；
2.  第二个子查询是你的；
3.  `LEFT JOIN`保证显示所有费率；
4.  `coalesce()`需要转换`NULL`为0。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-06T05:28:47.483

```
SELECT 
    Rate,
    totCount
FROM 
(
    Select
        Rate,
        count(Rate) as totCount
    from
        Code_Review 
    where 
        CODE_REVIEWER_ID  = 200  
    group by 
        Rate
    union
    select  4, 0  
    union
    select  3, 0  
    union
    select  2, 0  
    union
    select  1, 0 
) AS T 
group by  
    T.Rate 
```

# objective-c - 如果我们设置标题“Content-Length”，NSHTTPURLResponse 的 initWithURL 方法会崩溃

> ID：11324408
> 
> 赞同：2
> 
> 时间：2012-07-04T07:33:48.043
> 
> 标签：objective-c, ios, header, crash, nshttpurlresponse

这是一些代码，我们在其中设置了一个`NSHTTPURLResponse`对象：

```
NSString * data = @"response successful";
NSUInteger length = [data length];
NSDictionary * headersDict = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithUnsignedInt:length], @"Content-Length", nil];

NSHTTPURLResponse * response = [[NSHTTPURLResponse alloc] initWithURL:[request URL] statusCode:200 HTTPVersion:@"1.1" headerFields:headersDict]; 
```

`headersDict`如果我们将其作为参数，以下代码将在最后一行崩溃。

> 错误：testReportAppOpenToAdMobWithAppstoreId (AdTrackerTests) 失败：-[__NSCFNumber 长度]：无法识别的选择器发送到实例 0xf653f40

我不知道它为什么会崩溃。调试表明这`headersDict`很好，我怀疑苹果的错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T07:38:42.120

`NSHTTPURLResponse`可能期待一个`NSString`，而不是一个`NSNumber`。尝试将`length`值转换为`NSString`.

# java - Tapestry & Hibernate：在 EntityManager 上调用持久化不会提交到数据库

> ID：11324412
> 
> 赞同：1
> 
> 时间：2012-07-04T07:33:54.167
> 
> 标签：java, hibernate, persistence, tapestry

我正在尝试使用 JBoss 和 Hibernate 设置 Web 应用程序，但无法运行 SQL 数据库。当我持久化一个对象并立即调用*contains()*时返回 true，但是当我在另一个方法中查找该对象时，我的数据库只是空的。

我的persistence.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
<persistence-unit name="facePlace">
<non-jta-data-source>java:jboss/facePlace</non-jta-data-source>
<class>webtech2.faceplace.entities.Person</class>
<properties>
  <property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect"/>
  <property name="hibernate.hbm2ddl.auto" value="update"/>
  <property name="hibernate.format_sql" value="true"/>
  <property name="hibernate.show_sql" value="true"/>
</properties> 
```

相关代码：

```
@Inject
@Persistence
EntityManager em;

public boolean signUp(String name,
      String password,
      String repeatPassword,
      Date birthdate,
      String gender) {
if (!password.equals(repeatPassword)) {
  return false;
}

log.info("person data: " + name + " " + password + " " + repeatPassword + " " + birthdate.toString() + " " + gender);

String saltedPassword = hashText + password;
String hashedPassword = generateHash(saltedPassword);
Person xperson = new Person(name, hashedPassword, birthdate, gender);
em.persist(xperson);
return true;
} 
```

我尝试在这里添加@CommitAfter，导致同样的错误，以及调用 getTransaction.begin() 和 getTransaction.commit() 导致

```
java.sql.SQLException: You cannot commit during a managed transaction! 
```

我的实体是：

```
@Entity
public class Person implements Serializable {

private String name;
private Date birthdate;
private long id;
private String password;
private String gender;
private Set<Person> friends;

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Column(name = "id")
public long getId() {
  return id;
}

public void setId(long id) {
  this.id = id;
} 
```

当我查看日志时，我注意到当我的第二种方法尝试访问 EntityManager 时出现此警告：

```
HHH000436: Entity manager factory name (facePlace) is already registered.  If entity manager will be clustered or passivated, specify a unique value for property 'hibernate.ejb.entitymanager_factory_name' 
```

这是正常的吗？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:44:30.350

不，我认为这不正常。

不过，我从未与 JBoss 合作过，所以我只能指出那些做过的人： [Tapestry5 中的事务处理与 Jboss-5.1.0GA/JBoss-7.0.2](http://eubauer.de/kingsware/2011/05/25/transaction-handling-in-tapestry5-with-jboss-5-1-0ga/)

# sql - 使用跨域的 Windows 身份验证定义连接字符串以访问 SQL Server

> ID：11324416
> 
> 赞同：0
> 
> 时间：2012-07-04T07:34:01.100
> 
> 标签：sql, database, cross-domain, connection-string, runas

我在 Windows 服务应用程序中定义连接字符串时遇到问题。SQL server 和 windows 服务在不同的域上，这就是问题所在。但是，我知道这是可能的，因为在带有此参数的终端中使用 runas.exe 时没有问题。

```
%windir%\system32\runas.exe /noprofile /netonly /user:DOMAIN1\%USERNAME% "ssms -nosplash -S SQLServerName -E" 
```

所以问题应该出在我的连接字符串中。如何修改我的连接字符串以以相同的方式访问服务器？我的连接字符串现在看起来很精简：

```
<connectionStrings>
<add name="MyEntities" connectionString="metadata=res://*/DataAccess.MyDatabase.csdl|res://*/DataAccess.MyDatabase.ssdl|res://*/DataAccess.MyDatabase.msl;
     provider=System.Data.SqlClient;provider connection string=&quot;data source=SQLServerName;
     initial catalog=MyDatabase;Trusted_Connection=yes;User Id=DOMAIN1\USERNAME;Password=*****;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
</connectionStrings> 
```

更新

似乎不可能完全复制 runas.exe 命令。我尝试像podiluska解释的那样使用模仿。但是，这仅在用户可以在当前域上运行时才有效。在我的情况下，我想在连接到数据库时将 Windows 凭据作为参数发送，因为该用户无法在当前域中登录。任何人都可以确认这是不可能的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:56:10.960

您需要使用模拟 - 在 IIS 应用程序池中，或通过向 web.config 添加一行

```
 <identity impersonate="true" userName="DOMAIN1\UserName" password="****" /> 
```

（并从连接字符串中删除用户 ID/密码条目

# ruby-on-rails - 与 named_scope 重复条件的活动记录关联

> ID：11324417
> 
> 赞同：1
> 
> 时间：2012-07-04T07:34:11.573
> 
> 标签：ruby-on-rails, activerecord, named-scope

我有关系，就像用户有很多文章和文章属于用户一样。
因此，为了找到用户的文章（处于活动状态），我在文章模型中添加了 named_scope

```
named_scope :active_articles, :conditions => "active = true" 
```

什么时候做——

```
user.articles.active_articles 
```

它按预期正确给出，但在控制台查询中有重复条件 -

```
SELECT * FROM `articles` WHERE (`articles`.user_id = 52) AND ((active = true) AND (`articles`.user_id = 52)) 
```

如何限制条件的重复？
或
如何为关联添加条件？

我正在使用 rails 2.3.5.Thanks 提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:57:34.473

我不确定，但我认为重复的原因是因为第一部分“user.articles 将生成 WHERE ( `articles`.user_id = 52)”，第二部分“articles.active_articles 将生成 AND ((active = true) AND ( `articles`.user_id = 52))"

因此，当您同时调用这两个部分 user.articles.active_articles 时，它将生成（`articles`.user_id = 52）AND（（active = true）AND（`articles`.user_id = 52））

你可以调用article.active_articles 吗？并发布结果？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T10:41:06.283

您可以在您的用户模型中放置以下 has_many 关联：

```
has_many :active_articles, :conditions => {:active => true }, :class_name => "Article" 
```

然后直接通过 user.active_articles 访问活动文章。

我知道它不如 Article 模型上的 named_scope 好，但它确实消除了 ActiveRecord 生成的 SQL 查询中的条件重复

# c++ - 在类中使用静态数组

> ID：11324418
> 
> 赞同：1
> 
> 时间：2012-07-04T07:34:13.667
> 
> 标签：c++

Myclass.h 内部

```
Class Myclass
{
public:
Myclass();
private:
static int Myarray[12];
}; 
```

如何初始化上述静态数组？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T07:37:06.560

您需要在文件中只*定义*一次`.cpp`：

```
int MyClass::MyArray[12] = { 0, 1, 2 }; /* Definition and initialisation.
                                           Any elements not explicity
                                           initialised will be 
                                           value-initialised,
                                           0 in the case of int. */ 
```

发布的代码只是数组的*声明*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-18T06:55:16.220

就像 Viku 说的：你需要在 .cpp 文件中定义一次：

```
int MyClass::MyArray[12] = { 0, 1, 2 }; 
```

你还需要在你的 class.h 私有字段中声明它：

```
static int MyArray[12]; 
```

# android - 安装条码扫描器

> ID：11324432
> 
> 赞同：1
> 
> 时间：2012-07-04T07:35:19.180
> 
> 标签：android

朋友们，我正在尝试开发条形码扫描仪。工作流程如下：当用户单击扫描按钮时，它应该捕获条形码图像，扫描此图像并显示结果：问题是，当我单击扫描按钮时收到一条消息“安装条形码扫描仪”我不想使用这种方法。我的代码要更改什么？？？？这是我的代码。

```
 IntentIntegrator integrator = new IntentIntegrator(BarcodeScanner.this);
    integrator.initiateScan();

    scan_btn = (Button)findViewById(R.id.Barcode_Scan_Button);
    scan_btn.setOnClickListener( new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent scanIntent= new Intent("com.google.zxing.client.android.SCAN");
            scanIntent.putExtra("SCAN_MODE", "QR_CODE_MODE");

            startActivityForResult(scanIntent, 0);

        }
    });
}

public void onActivityResult(int requestCode, int resultCode, Intent intent) {
      IntentResult scanResult = IntentIntegrator.parseActivityResult(requestCode, resultCode, intent);
      if (scanResult != null) {
          result_text.setText(intent.getStringExtra("SCAN_RESULT"));
      }
      else
          result_text.setText("Scan cancelled.");

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T07:41:15.030

无需更改，您正在调用外部 BarcodeScanner 应用程序，即 ZXing 应用程序。如果您的设备上没有它，它会提示您安装它。

如果您不喜欢这种行为，那么您可以尝试编写 BarcodeScanner 逻辑，或者将 ZXing 代码集成到您的应用程序中，因为它是开源的，但是我建议您不要这样做，因为这不是 ZXing 的目的项目。

# sql-server - 外键创建失败

> ID：11324433
> 
> 赞同：25
> 
> 时间：2012-07-04T07:35:25.090
> 
> 标签：sql-server, foreign-keys, constraints, foreign-key-relationship

我想要两个表之间的外键，所以我像往常一样尝试它。现在我遇到的问题是他无法创建，并且看起来它无法创建，因为已经有一个密钥但没有。

```
- Unable to create relationship 
 'FK_tbl_Paramed_RegistratieBehandelingen_Users'.  
  The ALTER TABLE statement conflicted with the 
  FOREIGN KEY constraint "FK_tbl_Paramed_RegistratieBehandelingen_Users". 
  The conflict occurred in database "Nestor_Server", 
  table "dbo.Users", column 'UserID'. 
```

我检查了它们是否具有相同的类型，它们确实（bigint）所以不明白为什么他不会创建它

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-07-04T07:47:40.947

您可能在 RegistratieBehandelingen（不确定表名）中有记录，而用户表中不存在这些记录。

```
select * from RegistratieBehandelingen a where UserID IS NULL or
not exists (select 1 from Users b where b.UserID= a.UserID) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-04T07:50:17.260

这意味着您有没有匹配父 ID 的子数据。

运行以下命令以查看是否有任何结果：

```
SELECT * 
FROM tbl_Paramed_RegistratieBehandelingen r
LEFT JOIN Users u on r.UserID = u.UserID
WHERE u.UserID IS NULL 
```

（在适当的地方更改表名和列名）

如果您得到任何结果，那么它应该显示哪些记录包含与用户不匹配的用户 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-28T09:22:23.317

在上述查询之后，您可能希望从表 tbl_Paramed_RegistratieBehandelingen 中删除不存在的 UserId 或将它们插入到表 Users 中。

# google-app-engine - ndb badrequesterror 仅在生产中

> ID：11324435
> 
> 赞同：0
> 
> 时间：2012-07-04T07:35:28.247
> 
> 标签：google-app-engine, python-2.7

我只在生产中收到以下错误：BadRequestError: BLOB, ENITY_PROTO or TEXT properties must be in a raw_property field

它发生在我 put() Receipt 类的一个实例（扩展 ndb.Model）时

下面，我附上代码中断的模型和处理程序（仅在生产中）

```
class Receipt(RModel):
    ownerId = ndb.IntegerProperty()
    houseId = ndb.IntegerProperty()
    renterId = ndb.IntegerProperty()

    year = ndb.IntegerProperty()
    month_number = ndb.IntegerProperty()

    code = ndb.StringProperty()
    description = ndb.StringProperty()
    value = ndb.StringProperty()

    owner = ndb.ComputedProperty(lambda self: Owner.get_by_id(self.ownerId))
    house = ndb.ComputedProperty(lambda self: House.get_by_id(self.houseId))
    renter = ndb.ComputedProperty(lambda self: Renter.get_by_id(self.renterId))
    month = ndb.ComputedProperty(lambda self: month_number_to_string(self.month_number))

class RModel(ndb.Model):
    created = ndb.DateTimeProperty(auto_now_add = True)
    changed = ndb.DateTimeProperty(auto_now_add = True)
    creatorId = ndb.IntegerProperty()
    changerId = ndb.IntegerProperty()

    #def to_dict(self):
    #   return ndb.to_dict(self, {'id':self.key().id()})

    def set_attributes(self, **attrs):
        props = self.properties()
        for prop in props.values():
            if prop.name in attrs:
                prop.__set__(self, attrs[prop.name])

class ReceiptNew(BaseHandler):
    def Get(self):
        user_id = self.get_user_id()
        owner = Owner.get_by_id(user_id)
        receipt = Receipt(value="")
        houses = list(House.gql("where ownerId = :1", owner.key.id()))
        renters = list(Renter.gql("where ownerId = :1", owner.key.id()))
        context = {'receipt': receipt, 'houses': houses, 'renters': renters, 'new': True}
        self.render_response('receipt-edit.html', **context)

    def post(self):
        user_id = self.get_user_id()
        owner = Owner.get_by_id(user_id)

        data = {
            'year': self.request.get('year'),
            'month': self.request.get('month'),
            'house': self.request.get('house'),
            'renter': self.request.get('renter'),
            'value': self.request.get('value'),
            'paid': self.request.get('paid')
        }

        receipt = Receipt()
        receipt.year = int(data.get('year'))
        receipt.month_number = int(data.get('month'))
        receipt.houseId = int(data.get('house'))
        receipt.renterId = int(data.get('renter'))
        receipt.value = data.get('value')
        receipt.ownerId = owner.key.id()
        receipt.put() ##### CODE BREAKS HERE, ONLY IN PRODUCTION
        self.redirect('/receipts') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T07:46:11.693

您不能使用 ComputedProperty 来存储整个实体，您需要使用[KeyProperty](https://developers.google.com/appengine/docs/python/ndb/properties)。

# javascript - 使用 javascript 的电子邮件查找器正则表达式

> ID：11324439
> 
> 赞同：0
> 
> 时间：2012-07-04T07:35:41.233
> 
> 标签：javascript, regex, email-validation

我有这个正则表达式用于匹配字符串中的电子邮件地址。

```
[a-zA-Z0-9,!#\$%&'\*\+/=\?\^_`\{\|}~-]+(\.[a-zA-Z0-9,!#\$%&'\*\+/=\?\^_`\{\|}~-]+)*@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.([a-zA-Z]{2,}) 
```

它不是世界上最好的正则表达式，但对我来说足够好。

当我将它与这样的javascript一起使用时：

```
var emails = string.match("[a-zA-Z0-9,!#\$%&'\*\+/=\?\^_`\{\|}~-]+(\.[a-zA-Z0-9,!#\$%&'\*\+/=\?\^_`\{\|}~-]+)*@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.([a-zA-Z]{2,})"); 
```

我只匹配第一个电子邮件地址，这很正常，因为我没有使用 g 修饰符。

问题是当我像这样使用 g 修饰符时：

```
var emails = email[0].match("[a-zA-Z0-9,!#\$%&'\*\+/=\?\^_`\{\|}~-]+(\.[a-zA-Z0-9,!#\$%&'\*\+/=\?\^_`\{\|}~-]+)*@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.([a-zA-Z]{2,})g"); 
```

var emails 为空，所以我的匹配不起作用。

如果可以的话，请帮助我。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T07:44:03.263

尝试 ：

```
var emails = yourString.match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T07:40:02.083

试试这个我在我系统的servlet验证过滤器中使用它我不知道它是否适用于javascript

```
"^[a-zA-Z0-9._]+@[a-zA-Z0-9._]{3,}$" 
```

# javascript - 当用户将过滤器文本输入文本输入字段时，jquery过滤器脚本不会忽略变音符号并且不会突出显示字符串匹配项

> ID：11324441
> 
> 赞同：0
> 
> 时间：2012-07-04T07:35:45.327
> 
> 标签：javascript, jquery, forms, highlight, diacritics

我在同一个 html 页面上有多个词汇表。

在每个词汇表上方，我想让用户在文本输入字段中键入单词或短语，以仅查看包含键入字符串（单词或短语）的表行。例如，如果您在文本输入字段中键入“good”，则不包含字符串“good”的表格行将消失。[如果您访问http://www.amanado.com/idioma-colombiano/](http://www.amanado.com/idioma-colombiano/) ，这已经可以使用，单击“Vocabulario (oficial y de jerga) - palabras y frases comunes”以展开手风琴部分，然后键入“good ” 在“Ingresa palabra o frase en el siguiente campo para filtrar la información de la tabla”字样下方的文本输入字段中。在文本输入字段中输入“good”后，词汇表中除了 7 行之外的所有行都应该消失（剩下 7 行）。

**我有以下3个问题：**

**1)**我无法像已经成功忽略大小写一样忽略重音符号（例如，é、ñ、ü）。例如，如果用户在输入字段中输入“que”，则包含“que”和“qué”的行不应消失。但是，当您键入“que”时，包含“qué”的行会错误地消失。如您所见，如果您在输入字段中键入“que”（不包括引号），将保留 2 条包含“que”的记录。而且，如果您在输入字段中键入或粘贴“qué”（不包括引号），将保留 6 条包含“qué”的记录。

**2）**我正在尝试使用 jquery.highlight.js 的一个版本来突出显示保留/不消失的行中的字符串匹配项。有关这应如何直观显示的示例，请在此问题摘要的第 2 段中指示的输入字段中键入“que”，您将看到字符串“que”在保留/不消失的 2 行中突出显示。请注意，这不能正常工作，因为我通过插入脚本 "$("table td").highlight("que");" 硬编码了 "que" 突出显示 进入 html 页面的“head”部分，以证明 (a) jquery.highlight.js 处于活动状态/正常运行，以及 (b) 提供突出显示的文本应如何显示的视觉示例。

**3)**除了允许用户在字段中输入单词或短语以仅查看包含未成功忽略重音符号（例如，é、ñ、ü）的输入单词或短语的表行的 javascript 之外，这是所需的行为， jquery.highlight.js 脚本也没有成功忽略重音符号（例如，é、ñ、ü）。例如，在此问题摘要第 2 段中指示的输入字段中键入“pues”，您将在保留/不消失的行中成功突出显示字符串“Qué”和“qué”的多个案例。请记住，我通过插入脚本“$("table td").highlight("que");" 对“que”高亮进行了硬编码。进入html页面的部分，所以字符串“que”，“qué”，“Que”和“Qué” 如果在输入字段中输入任何字符串“que”、“qué”、“Que”或“Qué”，则应在保留/不消失的表格行中全部突出显示，因为它旨在 (a) 大小写和(b) 重音符号（例如 é、ñ、ü）被忽略。有趣的是，我正在使用的 jquery.highlight.js 版本中包含“ignoreAccents”的功能。

**以下是：**

**(a)**出现在我的 html 中的输入字段；

**(b)**我用来让用户在字段中输入单词或短语以仅查看包含输入的单词或短语的表行的 javascript（为简洁起见，以下称为“过滤器 javascript” ); 和

**(c)**我用来突出显示文本的 jquery.highlight.js javascript 版本。

**请注意：**我不是软件工程师，但如果有人告诉我具体要做什么，我确实知道如何实施更改（例如，进行确切的更改，然后进行确切的更改，然后进行确切的更改）。我感谢任何人可以提供的任何帮助，特别感谢文字说明。而且，我总是打算使用最少的代码（例如，javascript、css、html）来实现最多。

**附加说明/注意事项包含在此问题摘要的底部。**

**(a) 输入字段从这里开始**

```
<form class="live-search" action="" method="post">
<p>Ingresa palabra o frase en el siguiente campo para filtrar la información de la tabla</p>
<input class="input-text-tr" type="text" value="Mostrar sólo filas que contengan..." />
<span class="filter-count-tr"></span>
</form> 
```

**(a) 输入字段到此结束**

**(b) 过滤 javascript 从这里开始**

```
$(function() {
$(".input-text-tr").on('keyup', function(e) {
var disallow = [37, 38, 39, 40];//ignore arrow keys    
if($.inArray(e.which, disallow) > -1) {
return true;
}
var inputField = this,
val = this.value,
pattern = new RegExp(val, "i"),
$group = $(this).closest(".group"),
$trs = $group.find(".myTable tbody tr"),
$s;
if(val === '') {
$s = $trs;
}
else {
$s = $();
$trs.stop(true,true).each(function(i, tr) {
if(val !== inputField.value) {//if user has made another     keystroke
return false;//break out of .each() and     hence out of the     event handler
}
$tr = $(tr);
if ($tr.text().match(pattern)) {
$s = $s.add(tr);
}
});
//$trs.not($s).fadeOut();
$trs.not($s).hide();
}
$group.find(".filter-count-tr").text("(" + $s.show        ().length + ")");
}).on('focus blur', function() {
if (this.defaultValue == this.value) this.value = '';
else if (this.value == '') this.value = this.defaultValue;
});

$(".group").each(function() {
$this = $(this);
$this.find(".filter-count-tr").text("(" + $this.find("tbody     tr").length + ")");
});
}); 
```

**(b) 过滤 javascript 到此结束**

**(c) jquery.highlight.js javascript 从这里开始**

```
jQuery.extend({
highlight: function (node, re, nodeName, className,     ignoreAccents) {
if (node.nodeType === 3) {

var nodeData = node.data;
if (ignoreAccents) {
nodeData = jQuery.removeDiacratics(nodeData);
}
var match = nodeData.match(re);
if (match) {
var highlight = document.createElement(nodeName || 'span');
highlight.className = className || 'highlight';    var wordNode = node.splitText(match.index);
wordNode.splitText(match[0].length);    
var wordClone = wordNode.cloneNode(true);
highlight.appendChild(wordClone);
wordNode.parentNode.replaceChild(highlight, wordNode);
return 1; //skip added node in parent
}
} else if ((node.nodeType === 1 && node.childNodes) && //     only element nodes that have children
!/(script|style)/i.test(node.tagName) && // ignore script and style nodes
!(node.tagName === nodeName.toUpperCase() &&
node.className === className)) { // skip if already     highlighted
for (var i = 0; i < node.childNodes.length; i++) {
i += jQuery.highlight(node.childNodes[i], re, nodeName, className, ignoreAccents);
}
}
return 0;
},

removeDiacratics : function(str) {
var rExps = [
{re:/[\xC0-\xC6]/g, ch:'A'},
{re:/[\xE0-\xE6]/g, ch:'a'},
{re:/[\xC8-\xCB]/g, ch:'E'},
{re:/[\xE8-\xEB]/g, ch:'e'},
{re:/[\xCC-\xCF]/g, ch:'I'},
{re:/[\xEC-\xEF]/g, ch:'i'},
{re:/[\xD2-\xD6]/g, ch:'O'},
{re:/[\xF2-\xF6]/g, ch:'o'},
{re:/[\xD9-\xDC]/g, ch:'U'},
{re:/[\xF9-\xFC]/g, ch:'u'},
{re:/[\xD1]/g, ch:'N'},
{re:/[\xF1]/g, ch:'n'}
];
for (var i = 0, len = rExps.length; i < len; i++) {
str = str.replace(rExps[i].re, rExps[i].ch);
}
return str;
}

});

jQuery.fn.unhighlight = function (options) {
var settings = { className: 'highlight', element: 'span' };
jQuery.extend(settings, options);

return this.find(settings.element + "." +     settings.className).each(
function () {
var parent = this.parentNode;
parent.replaceChild(this.firstChild, this);
parent.normalize();
}).end();
};

jQuery.fn.highlight = function (words, options) {
var settings = { className: 'highlight', element: 'span',     caseSensitive: false, wordsOnly: false, ignoreAccents : true };
jQuery.extend(settings, options);

if (words.constructor === String) {
words = [words];
}
words = jQuery.grep(words, function(word, i) {
return word != '';
});
words = jQuery.map(words, function(word, i) {
return word.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&");
});
if (words.length == 0) {
return this;
}

var flag = settings.caseSensitive ? "" : "i";
var pattern = "(" + words.join("|") + ")";
if (settings.wordsOnly) {
pattern = "\\b" + pattern + "\\b";
}

var re = [];
re.push(new RegExp(pattern, flag));

if (settings.ignoreAccents) {
var wordsNoAccents = jQuery.map(words, function(word, i) {
return jQuery.removeDiacratics(word);
});
var patternNoAccents;
if (settings.wordsOnly) {
// workaround for word separation using \\b
patternNoAccents = "( " + wordsNoAccents.join("|") + " )";
patternNoAccents = "\\b" + patternNoAccents + "\\b";
} else {
patternNoAccents = "(" + wordsNoAccents.join("|") + ")";
}
if (patternNoAccents!=pattern) {
re.push(new RegExp(patternNoAccents, flag));
}
}

return this.each(function () {
for (var i in re) {
jQuery.highlight(this, re[i], settings.element,     settings.className, settings.ignoreAccents);
}
});
}; 
```

**(c) jquery.highlight.js javascript 到此结束**

**附加说明/注意事项从这里开始**

**1）**我的意图是增强而不是背离我已经使用的 javascript，以使用户能够在字段中输入单词或短语以仅查看包含输入的单词或短语的表行，因为我已经是 javascript using 正在解决上述问题（感谢 Beetroot 对我发布的上一个问题的出色贡献）。

**2）**我发现涉及我想要实现的功能的javascript包括以下4个示例（注意因为stackoverflow不允许我在一个问题中使用多个链接，我将“http://”替换为以下示例中的“[http:// here]”）：

**a)** [http:// here]demopill.com/jquery-onpage-text-highlighter-and-filter.html [最接近我想要实现的功能；当用户在输入字段中输入文本时，似乎成功过滤和突出显示；成功忽略大小写，但没有成功忽略重音符号（例如，é、ñ、ü）]；

**b）** [http://here]stackoverflow.com/search?q=jquery.highlight.js（关于stackoverflow的对话：忽略重音字符）

**c)** [http:// here]www.jquery.info/The-plugin-SearchHighlight（包括高亮功能）；和

**d）** [http://here]docs.jquery.com/UI/Effects/Highlight（包括突出显示功能；请注意，我已经在本问题摘要第 2 段中引用的网站上使用“jquery ui”）。

**附加说明/注意事项到此结束**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T22:03:43.030

## 突出显示

在`jquery.highlight.js`页面上安装...

改变 ：

```
$group.find(".filter-count-tr").text("(" + $s.show().length + ")"); 
```

至 ：

```
$group.find(".filter-count-tr").text("(" + $s.show().unhighlight().highlight(val).length + ")"); 
```

*但是，下面的不区分重音代码修改了这一点。*

## 口音不敏感

这似乎几乎是不可能的，但我在发现[这一点](https://stackoverflow.com/questions/6067344/highlight-words-with-and-without-accented-characters-diacritics-in-jquery)上取得了突破，这表明如何`hightlight`修改插件以提供不区分重音的突出显示。

为了更好地理解代码，我将它重构为一个更好的插件（无论如何对我来说更好）。它现在不将任何成员放入`jQuery`命名空间（以前是一个），而将一个成员放入`jQuery.fn`（以前是两个）。使用新插件，设置和取消设置亮点如下：

```
$(selector).highlight('set', words, options);
$(selector).highlight('unset', options); 
```

代码提供了解释和进一步的示例（见下文）。

'set' 设置包括一个 '.accentInsensitive' 选项，它对有限数量的硬编码（西班牙语）重音字符组进行操作（我很遗憾），其效率与我可以使用插件中的私有成员进行缓存一样有效可重用的正则表达式和替换字符串，供“set”方法稍后使用。拥有一个通用的“Unicode 规范化”解决方案会好得多，但那是另一天的事情了。

新插件还提供了将部分代码拆分为单独方法的机会，`.makepattern`其优点是可以在插件外部使用 RegExp-ready 模式，并可以重新注入它们。此功能允许我们使用插件作为资源来实现此处的另一个目标 - 即重音不敏感过滤 - 绝对确定使用的 RegExp 模式（用于突出显示和过滤）是相同的。

这是插件代码：

```
/*
 * jQuery highlightIt plugin
 * by Beetroot-Beetroot
 * https://stackoverflow.com/users/1142252/beetroot-beetroot
 *
 * based on Highlight by Bartek Szopka, 2009
 * http://bartaz.github.com/sandbox.js/jquery.highlight.html,
 * based on highlight v3 by Johann Burkard
 * http://johannburkard.de/blog/programming/javascript/highlight-javascript-text-higlighting-jquery-plugin.html
 *
 * Most important changes:
 * - Code refactored into jQuery preferred plugin pattern.
 * - Now called with : 
 *    - $(slector).highlight('set', words, options); previously $(slector).highlight(words, options);
 *    - $(slector).highlight('unset', options); previously $(slector).unhighlight(options);
 *    - $().highlight('makePattern', words, options); This new option returns a RegExp-ready pattern that can be used externally and/or re-injected for reuse (see .isPattern option below), thus avoiding remaking the pattern as might otherwise happen.
 *  - 'set' .isPattern option; When true, this new option indicates that the 'words' parameter is a prepared RegExp-ready pattern.
 *  - 'set' .accentInsensitive option; This new option is limited to operating on hard-coded character groups (eg, Spanish accented chars), not Unicode normalized (which would be a better approach but much harder to achieve and probably slower).
 *
 * Usage:
 *   // wrap every occurrance of text 'lorem' in content
 *   // with <span class='highlight'> (default options)
 *   $('#content').highlight('set', 'lorem');
 *
 *   // search for and highlight more terms at once
 *   // so you can save some time on traversing DOM
 *   $('#content').highlight(['set', 'lorem', 'ipsum']);
 *   $('#content').highlight('set', 'lorem ipsum');
 *
 *   // search only for entire word 'lorem'
 *   $('#content').highlight('set', 'lorem', { wordsOnly: true });
 *
 *   // don't ignore case during search of term 'lorem'
 *   $('#content').highlight('set', 'lorem', { caseSensitive: true });
 *
 *   // wrap every occurrance of term 'ipsum' in content
 *   // with <em class='important'>
 *   $('#content').highlight('set', 'ipsum', { element: 'em', className: 'important' });
 *
 *   // remove default highlight
 *   $('#content').highlight('unset');
 *
 *   // remove custom highlight
 *   $('#content').highlight('unset', { element: 'em', className: 'important' });
 *
 *   // get accent-insensitive pattern
 *   $().highlight('makePattern', { element: 'lorem', {'accentInsensitive':true});
 *
 *
 * Copyright (c) 2009 Bartek Szopka
 *
 * Licensed under MIT license.
 *
 */

(function($) {
    // **********************************
    // ***** Start: Private Members *****
    var pluginName = 'highlight';
    var accentedForms = [//Spanish accednted chars
        //Prototype ...
        //['(c|ç)', '[cç]', '[CÇ]', new RegExp('(c|ç)','g'), new RegExp('(C|Ç)','g')],
        ['(a|á)', '[aá]'],
        ['(e|é)', '[eé]'],
        ['(i|í)', '[ií]'],
        ['(n|ñ)', '[nñ]'],
        ['(o|ó)', '[oó]'],
        ['(u|ú|ü)', '[uúü]']
    ];
    //To save a lot of hard-coding and a lot of unnecessary repetition every time the "set" method is called, each row of accentedForms is now converted to the format of the prototype row, thus providing reusable RegExps and corresponding replacement strings.
    //Note that case-sensitivity is established later in the 'set' settings so we prepare separate RegExps for upper and lower case here.
    $.each(accentedForms, function(i, af) {
        af[2] = af[1].toUpperCase();
        af[3] = new RegExp(af[0], 'g');
        af[4] = new RegExp(af[0].toUpperCase(), 'g');
    });
    var h = function(node, re, settings) {
        if (node.nodeType === 3) {//text node
            var match = node.data.match(re);
            if (match) {
                var wordNode = node.splitText(match.index);
                wordNode.splitText(match[0].length);
                $(wordNode).wrap($("<" + settings.element + ">").addClass(settings.className));
                return 1;
           }
        } else if ((node.nodeType === 1 && node.childNodes) && // only element nodes that have children
                !/(script|style)/i.test(node.tagName) && // ignore script and style nodes
                !(node.tagName === settings.element.toUpperCase() && node.className === settings.className)) { // skip if already highlighted
            for (var i = 0; i < node.childNodes.length; i++) {
                i += h(node.childNodes[i], re, settings);
            }
        }
        return 0;
    };
    // ***** Fin: Private Members *****
    // ********************************

    // *********************************
    // ***** Start: Public Methods *****
    var methods = {
        //This is a utility method. It returns a string, not jQuery.
        makePattern: function (words, options) {
            var settings = {
                'accentInsensitive': false
            };
            $.extend(settings, options || {});
            if (words.constructor === String) {
                words = [words];
            }
            words = $.grep(words, function(word, i) {
              return word != '';
            });
            words = $.map(words, function(word, i) {
              return word.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&");
            });
            if (words.length == 0) { return ''; };
            var pattern = "(" + words.join("|") + ")";
            if (settings.accentInsensitive) {
                $.each(accentedForms, function(i, af) {
                    pattern = pattern.replace(af[3], af[1]).replace(af[4], af[2]);
                });
            }
            return pattern;
        },
        set: function (words, options) {
            var settings = {
                'className': 'highlight',
                'element': 'span',
                'caseSensitive': false,
                'wordsOnly': false,
                'accentInsensitive': false,
                'isPattern': false
            };
            $.extend(settings, options || {});

            var pattern = settings.isPattern ? words : methods.makePattern(words, settings);
            if (pattern === '') { return this; };
            if (settings.wordsOnly) {
                pattern = "\\b" + pattern + "\\b";
            }
            var flag = settings.caseSensitive ? "" : "i";
            var re = new RegExp(pattern, flag);
            return this.each(function () {
                h(this, re, settings);
            });
        },
        unset: function (options) {
            var settings = {
                className: 'highlight',
                element: 'span'
            }, parent;
            $.extend(settings, options || {});
            return this.find(settings.element + "." + settings.className).each(function () {
                parent = this.parentNode;
                parent.replaceChild(this.firstChild, this);
                parent.normalize();
            }).end();
        }
    };
    // ***** Fin: Public Methods *****
    // *******************************

    // *****************************
    // ***** Start: Supervisor *****
    $.fn[pluginName] = function( method ) {
        if ( methods[method] ) {
            return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
        } else if ( typeof method === 'object' || !method ) {
            return methods.init.apply( this, arguments );
        } else {
            $.error( 'Method ' + method + ' does not exist in jQuery.' + pluginName );
        }
    };
    // ***** Fin: Supervisor *****
    // ***************************
})( jQuery ); 
```

这是语言网站的应用程序代码：

```
$(function() {
    $(".text-input").on('keyup', function(e) {
        var disallow = [37, 38, 39, 40];//ignore arrow keys
        if($.inArray(e.which, disallow) > -1) {
            return true;
        }
        var $group = $(this).closest(".group"),
            accent_sensitive = false,
            case_sensitive = false,
            val = this.value,
            pattern = $().highlight('makePattern', val, {
                'accentInsensitive': !accent_sensitive,
                'caseSensitive': case_sensitive
            }),
            $trs = $group.find(".myTable tbody tr"),
            $s;
        if(val === '') {
            $s = $trs;
        }
        else {
            $s = $();
            $trs.stop(true,true).each(function(i, tr) {
                $tr = $(tr);
                //if ($tr.text().match(new RegExp(pattern, "i"))) {
                if ($tr.text().match(new RegExp(pattern, case_sensitive ? '' : "i"))) {
                    $s = $s.add(tr);
                }
            });
            $trs.not($s).hide();
        }
        $group.find(".filter-count-tr").text("(" + $s.show().highlight('unset').highlight('set', pattern, {
            'isPattern':true,
            'caseSensitive':case_sensitive
        }).length + ")");
    }).on('focus blur', function() {
        if (this.defaultValue == this.value) this.value = '';
        else if (this.value == '') this.value = this.defaultValue;
    });

    $(".group").each(function() {
        $this = $(this);
        $this.find(".filter-count-tr").text("(" + $this.find("tbody tr").length + ")");
    });
}); 
```

所有测试，如果安装正确，应该可以工作。

顺便说一句，我使用**[此页面](http://tlt.its.psu.edu/suggestions/international/bylanguage/spanish.html)**作为西班牙重音字符的来源。

# c - 为了在 C 中使用 SQL，我们需要在程序中包含哪些头文件？

> ID：11324442
> 
> 赞同：0
> 
> 时间：2012-07-04T07:35:49.273
> 
> 标签：c, database, oracle, oracle-call-interface

在我的 C 程序中，我必须连接到使用这些语句的数据库：

```
EXEC SQL INCLUDE sqlca;
EXEC SQL begin declare section;
EXEC SQL end declare section; 
```

但我收到错误`EXEC`。它说

```
`EXEC' undeclared (first use in this function) 
```

我是否缺少任何头文件或其他可以使用这些命令的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:42:37.450

好：谢谢你的澄清。

对于 Oracle，您将需要一份 Pro*C。这与您的 gcc 编译器集成。

这是使用 Pro*C 的一个很好的教程：

*   [http://programmingexamples.wikidot.com/pro-c-tutorial](http://programmingexamples.wikidot.com/pro-c-tutorial)

当然，还有很多关于 OTN 的信息。

# linux - 任务调度程序在redhat系统启动之前执行脚本吗

> ID：11324451
> 
> 赞同：0
> 
> 时间：2012-07-04T07:36:09.073
> 
> 标签：linux, redhat, boot, ntfs

我试图在启动时在redhat中挂载ntfs分区我写了shell脚本把它放在任务调度程序中以在启动时启动，但不幸的是redhat安装在我的一个ntfs分区上.....所以它给出了fs not found错误启动........谁能告诉我如何使用 grub 命令行或任何 live linux 删除脚本。

[http://cradingz.wordpress.com/2012/07/03/shell-script-boot-ntfs-partitions-on-startup/](http://cradingz.wordpress.com/2012/07/03/shell-script-boot-ntfs-partitions-on-startup/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:43:44.683

您为什么不立即创建这些目录并进行 /etc/fstab 设置以将这些分区挂载到那里。/etc/fstab 是在启动时挂载 fs 的标准方式。我想您不需要脚本来完成如此常见的任务。看着`man fstab`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T15:32:12.990

挂载所有 ntfs 分区的 Shell 脚本是在挂载根文件系统之前执行的，因此这会导致引导加载程序无法找到根文件系统的问题，因为驱动器已挂载到其他地方。

# jquery - GridView 分页不适用于 ASP.NET 中的 jQuery

> ID：11324459
> 
> 赞同：1
> 
> 时间：2012-07-04T07:36:30.277
> 
> 标签：jquery, asp.net, gridview, paging

我正在处理使用 jquery ajax 加载的 asp.net 页面。在此页面中，我使用 Gridview 显示值列表，如下所示

```
<asp:GridView ID="GVPrograms" runat="server" AutoGenerateColumns="false" 
        onrowcommand="GVPrograms_RowCommand" AllowPaging="true" BackColor="#f5f5f5"  BorderColor="#ffffff"
         PageSize="2" OnPageIndexChanging="GVPrograms_PageEventHandler" GridLines="None">
        <Columns>             

            <asp:TemplateField HeaderText="Video">
                    <ItemTemplate>                    

                     <div style="float: left; width: 120px" class="play-video"> 
                         <a href="Program.aspx?id=<%#Eval("ID") %>" id='<%#Eval("ID") %>'>                          
                         <img src='<%# GetUrl(Eval("ID")) %>' width='100' height='100' style="" alt="play" />

                         </a>

                       </div>
 </asp:TemplateField> 
 </Columns>

        </asp:GridView> 
```

我已经在 PageEventHandler 方法中处理了分页并且工作正常。但是，每当第一次加载页面并单击 gridview 中的任何链接时，都会使用以下脚本加载 Program.aspx 页面

```
$(".play-video a").click(function () {
              $("#content-placeholder").load(this.href);                
              //alert(this.id);
              return false;
          }); 
```

现在，问题是每当我单击下一页（例如第 2 页）并单击任何链接时，Program.aspx 都会显示在新窗口中。那么，如何使用上面的 jquery 脚本使它仍然被加载到同一页面中？

我一直在寻找是否有任何解决方法，但找不到任何解决方法。我感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T07:53:17.673

当您使用时，`UpdatePanel`您需要在每次更新时重新初始化与 this 的内容一起工作的 javascript，`UpdatePanel`这是因为您更改了 Dom 结构并且以前的 javascript 不再工作。

为此，您使用 UpdatePanel 提供的功能，您的代码将如下所示：

```
<script type="text/javascript"> 
    // this is your function that we must call on page load 
    //  and after updatepanel updates.
    function InitMyLink()
    {
      $(".play-video a").click(function () {
        $("#content-placeholder").load(this.href);                
        return false;
      });
    }

    // now I capture the two functions that called when UpdatePanel is updated
    var prm = Sys.WebForms.PageRequestManager.getInstance();    
    prm.add_initializeRequest(InitializeRequest);
    prm.add_endRequest(EndRequest);

    function InitializeRequest(sender, args) {      
    }

    // this is called after update panel completes the update
    function EndRequest(sender, args) {
        InitMyLink();
    }

    // this is called on first page load
    $(document).ready(function() {
      InitMyLink();
    });
</script> 
```

# python - 误导性全局变量

> ID：11324465
> 
> 赞同：2
> 
> 时间：2012-07-04T07:36:49.323
> 
> 标签：python, ftp, download, ftputil

我有一个锻炼，现在很好并且正在运行。本练习的算法是从 FTP 服务器下载文件 zip 并再次将其上传到 FTP 服务器的上传文件夹中。顺便说一句，这是我的代码：

```
import os
import zipfile
import ConfigParser
import ftputil
import shutil
import tempfile
import time

def download_files():
    # Alvin: Think of a better variable name
    file_list = ftp.listdir(downloads)
    for filename in file_list:
        # Alvin should be ftp.path.join
        source = os.path.join(downloads, filename)
        target = os.path.join(temp_path, filename)
        ftp.download(source, target)

def zipping_files():
    dirlist = os.listdir(temp_path)
    global filepath
    filepath = os.path.join(temp_path, 'part2b.zip')
    # Alvin: find better name for zip_name
    global zip_name
    zip_name = zipfile.ZipFile(filepath, 'w')
    # Alvin: try not to use built-in names as variable names
    for list in dirlist:
        # Alvin: file_path, absolute_path
        get_file = os.path.join(temp_path, list)
        zip_name.write(get_file, 'part2b\\' + list)

def upload_files():
    ftp.upload(filepath, uploads + '/part2b.zip')

def main():
    # Alvin: Do not use globals.
    # Alvin: remove useless and above all misleading comments

    global temp_path
    temp_path = tempfile.mkdtemp()

    config = ConfigParser.ConfigParser()
    config.readfp(open('config.ini'))
    server = config.get('main', 'Server')
    username = config.get('main', 'Username')
    password = config.get('main', 'Password')

    global uploads
    uploads = config.get('main', 'Upload folder')

    global downloads
    downloads = config.get('main', 'Download folder')

    #connect to ftp
    global ftp
    # Alvin: open ftp connection when you only need it.
    ftp = ftputil.FTPHost(server, username, password)

    try:
        download_files()
        zipping_files()
        upload_files()

    finally:
        ftp.close()
        zip_name.close()
        shutil.rmtree(temp_path, 'true')

    print "Successfully transferred files."
    print ""
    print "This will close in 5 seconds. . . . ."
    time.sleep(5)

if __name__ == '__main__':
    main() 
```

好吧，命名约定留给我。但是我想问一个例子，说明如何在不使用所有全局变量的情况下对其进行重新编码？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T07:42:33.347

您应该明确地为您的方法提供参数。

以下是您可以进行的操作：

1.  确定你的方法在做什么，每一个都应该有一个精确的目标
2.  确定为此目的需要什么，并将其放入参数列表中
3.  确定它应该返回什么并返回它
4.  您的主要功能很好，并且是集中这些变量的理想场所

不使用全局变量并拥有一种功能/一种方法的最好的一点是，当出现问题时，测试/调试将非常容易。

***例子：***

你的`download_files()`requires`downloads`和`temp_path`，使它们成为参数，而不是全局变量

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T08:08:10.937

到目前为止，您有四个全局变量`main`。（`temp_path, uploads, downloads`和`ftp`）。

首先，用 global 删除（注释）行，然后这 4 个变量将变成 local `main`。但这会使其他功能无法访问它们。因此，您需要将它们传递给函数。

为此，您可以将这些变量作为参数添加到需要它们的函数中。因此，例如，您`try`阻止将更改为..

```
try:
    download_files(downloads, temp_path)
    zipping_files(temp_path)
    upload_files(ftp) 
```

现在，为了匹配参数的添加，您也应该更改功能。从块中调用的函数的签名`try`将是：

```
def download_files(downloads, temp_path):

def zipping_files(temp_path):

def upload_files(ftp): 
```

同样，您也可以删除其他函数中的全局变量（例如`global filepath`in `zipping_files()`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T08:48:25.260

谢谢大家的帮助！！你所有的答案都非常有帮助！这是我的最终和正在运行的代码：

```
import os
import zipfile
import ConfigParser
import ftputil
import shutil
import tempfile
import time

def download_files(downloads, temp_path, server, username, password):
    ftp = ftputil.FTPHost(server, username, password)
    file_list = ftp.listdir(downloads)
    for filename in file_list:
        source = os.path.join(downloads, filename)
        target = os.path.join(temp_path, filename)
        ftp.download(source, target)
    ftp.close()

def zipping_files(temp_path):
    file_list = os.listdir(temp_path)
    filepath = os.path.join(temp_path, 'part2b.zip')
    zip_file = zipfile.ZipFile(filepath, 'w')
    for filename in file_list:
        file_path = os.path.join(temp_path, filename)
        zip_file.write(file_path, 'part2b\\' + filename)
    zip_file.close()

def upload_files(uploads, temp_path, server, username, password):
    ftp = ftputil.FTPHost(server, username, password)
    filepath = os.path.join(temp_path, 'part2b.zip')
    ftp.upload(filepath, uploads + '/part2b.zip')
    ftp.close()

def main():

    temp_path = tempfile.mkdtemp()

    config = ConfigParser.ConfigParser()
    config.readfp(open('config.ini'))
    server = config.get('main', 'Server')
    username = config.get('main', 'Username')
    password = config.get('main', 'Password')
    uploads = config.get('main', 'Upload folder')
    downloads = config.get('main', 'Download folder')

    try:
        download_files(downloads, temp_path, server, username, password)
        zipping_files(temp_path)
        upload_files(uploads, temp_path, server, username, password)

    finally:    
        shutil.rmtree(temp_path, 'true')

    print "Successfully transferred files."
    print ""
    print "This will close in 5 seconds. . . . ."
    time.sleep(5)

if __name__ == '__main__':
    main() 
```

任何建议都会考虑！再次感谢！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-04T07:45:35.513

Python 并不真正支持全局变量——它们通常是个坏主意。要么将数据作为参数传递，要么将函数包装在一个类中，并将参数用作类成员。

（从技术上讲，python 有**global**关键字，但你必须在每个函数中为每个全局变量使用它。它应该是丑陋的。不要使用它。）

# c# - 从列表视图中选择索引

> ID：11324471
> 
> 赞同：2
> 
> 时间：2012-07-04T07:37:07.843
> 
> 标签：c#

我在获取列表视图中选定行的索引时遇到了一些问题。我想知道为什么这段代码不起作用？我在 SelectedIndex 下方看到一条红线

```
 private void lvRegAnimals_SelectedIndexChanged(object sender, EventArgs e)
    {
        int index = lvRegAnimals.SelectedIndex;
        string specialData = motelManager.GetInfoFromList(index);
        UppdateSpecialData(specialData);
    } 
```

帮助是preciated。谢谢！

编辑：

出于某种奇怪的原因，当我单击 listView 中的一行时，我收到两条消息！？首先我得到前一个号码，然后是最后点击的行的号码。有什么问题？

```
 private void lvRegAnimals_SelectedIndexChanged(object sender, EventArgs e)
    {
        int index = lvRegAnimals.FocusedItem.Index;
        MessageBox.Show(Convert.ToString(index));
    } 
```

当我添加这样的支票时，它现在正在工作：

```
if(lvRegAnimals.SelectedIndices.Count > 0) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-04T07:39:00.350

因为[ListView](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview%28v=vs.71%29.aspx)不包含任何`SelectedIndex`，而是有一个`SelectedIndices`.

```
var indices = lvRegAnimals.SelectedIndices;
//indices[0] you can use that to access the first selected index 
```

[ListView.SelectedIndices](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.selectedindices.aspx)

> 当 MultiSelect 属性设置为 true 时，此属性返回一个集合，其中包含在 ListView 中选择的所有项目的索引。对于单选 ListView，此属性返回一个包含单个元素的集合，该元素包含 ListView 中唯一选定项的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T07:46:40.523

```
private void listView1_SelectedIndexChanged(object sender, EventArgs e)
    {
        // Acquire SelectedItems reference.
        var selectedItems = listView1.SelectedItems;
        if (selectedItems.Count > 0)
        {
        // Display text of first item selected.
        this.Text = selectedItems[0].Text;
        }
        else
        {
        // Display default string.
        this.Text = "Empty";
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-27T19:11:33.007

ListView 有时使用起来很麻烦。我使用的一个简单解决方案是检查所选项目的 for 循环。

我已将我的解决方案放在 ListView 中的“当索引更改触发器”中。例子：

```
int sel_item = 0; //an int to store the selected item index.
private void listView1_SelectedIndexChanged(object sender, EventArgs e)
{
      for (int i = 0; i < listView1.Items.Count; i++)
      {
             if (listView1.Items[i].Selected == true)
             {
              sel_item = i;
             }
      }
} 
```

这当然只能在“多选”选项设置为`false`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-04T18:05:06.333

还有另一个像这样的线程，但它又来了。

它可以返回 NULL。SelectedIndexChanged 事件也可以被触发两次。第一次，还没有任何选择。

所以找到它的唯一安全方法是这样的：

```
 private void lv1_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (lv1.FocusedItem == null) return;
        int p = lv1.FocusedItem.Index; 
```

...现在 int p 具有正确的值...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-01T06:04:44.683

尝试 ：

```
listView1.FocusedItem.Index 
```

这将为您提供所选行的索引。

# windows-phone-7 - 如何导航到登录页面而不是 MainPage

> ID：11324472
> 
> 赞同：0
> 
> 时间：2012-07-04T07:37:07.797
> 
> 标签：windows-phone-7, navigation, stack-trace

我处于一个棘手的位置。我有一个已发布的应用程序并且一直在接收崩溃报告。其中大部分是`InvalidOperationException`. 堆栈跟踪中的所有 19 帧都显示了内部函数，因此我无法弄清楚是哪个函数引发了它。经过大量调试，我认为我的 InvalidOperation Exception 是由我将导航重定向到登录页面的方式引起的。

基本操作是这样的。如果用户设置了密码，它将导航到密码页面，否则导航到 MainPage。代码如下

```
App()
{
   // the usual code
   RootFrame.Navigating += new NavigatingCancelEventHandler(RootFrame_Navigating);
}

void RootFrame_Navigating(object sender, NavigatingCancelEventArgs e)
{
        if (e.Uri.ToString().Contains("/RootPage.xaml") != true)
            return;

        CycleManager pCycMan = CycleManager.Instance;

        e.Cancel = true;
        RootFrame.Dispatcher.BeginInvoke(delegate
        {
            if (pCycMan.GetPasswordEnabled())
                RootFrame.Navigate(new Uri("/PasswordPage.xaml", UriKind.Relative));
            else
                RootFrame.Navigate(new Uri("/MainPage.xaml", UriKind.Relative));
        });
} 
```

上面提到的RootPage是在`<App>`tag中定义的`WMAppManifest.xml`

```
<Tasks>
  <DefaultTask Name="_default" NavigationPage="RootPage.xaml" />
</Tasks> 
```

在调试上述代码时，我发现与 StackTrace 相同的调用堆栈。有人可以告诉我这是否是导航到其他主页的正确方法吗？我在下面包含了 StackTrace

```
"Frame    Image             Function                                                Offset    
0        coredll.dll       xxx_RaiseException                                      19        
1        mscoree3_7.dll                                                            436488    
2        mscoree3_7.dll                                                            386545    
3        mscoree3_7.dll                                                            540936    
4                          TransitionStub                                          0         
5                          System.Windows.Navigation.NavigationService.Navigate    1580      
6                          System.Windows.Controls.Frame.Navigate                  80        
7                          .__c__DisplayClass5._Application_Activated_b__3         136       
8        mscoree3_7.dll                                                            429164    
9        mscoree3_7.dll                                                            185803    
10       mscoree3_7.dll                                                            84423    
11                         System.Reflection.RuntimeMethodInfo.InternalInvoke      112       
12                         System.Reflection.RuntimeMethodInfo.InternalInvoke      1564      
13                         System.Reflection.MethodBase.Invoke                     104       
14                         System.Delegate.DynamicInvokeOne                        564      
15                         System.MulticastDelegate.DynamicInvokeImpl              84        
16                         System.Windows.Threading.DispatcherOperation.Invoke     80        
17                         System.Windows.Threading.Dispatcher.Dispatch            404       
18                         System.Windows.Threading.Dispatcher.OnInvoke            56        
19                         System.Windows.Hosting.CallbackCookie.Invoke            84" 
```

感谢您耐心阅读这么长的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:29:19.797

要控制导航，您可以像这样实现它。

从 app.xaml 资源中获取 UriMapper，并将其分配给根框架

```
UriMapper mapper = Resources["mapper"] as UriMapper;
RootFrame.UriMapper = mapper; 
```

然后根据需要更新映射器

```
if (IsPasswordSaved)
                mapper.UriMappings[0].MappedUri = new Uri("/PasswordPage.xaml?method=UriMapper", UriKind.Relative);
            else
                mapper.UriMappings[0].MappedUri = new Uri("/MainPage.xaml?method=UriMapper", UriKind.Relative); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T07:50:05.493

彼得托尔在这里有一篇关于这件事的好文章 - [http://blogs.msdn.com/b/ptorr/archive/2010/08/28/redirecting-an-initial-navigation.aspx?wa=wsignin1.0](http://blogs.msdn.com/b/ptorr/archive/2010/08/28/redirecting-an-initial-navigation.aspx?wa=wsignin1.0)

HTH 鲁珀特。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T14:18:11.620

谢谢大家，我按照@pan4321 给出的提示稍作修改。

这就是我最终做到的方式。

我已将默认导航设置为`WMAppManifest`名为 RootPage.xaml 的不存在页面

```
<Tasks>
  <DefaultTask Name="_default" NavigationPage="RootPage.xaml" />
</Tasks> 
```

App.xaml 在其`<Application`标记中包含以下内容

```
xmlns:UriMapper="clr-namespace:System.Windows.Navigation;assembly=Microsoft.Phone"> 
```

并且在`<Application.Resources`标签中

```
<UriMapper:UriMapper x:Name="mapper">
   <UriMapper:UriMapping Uri="/RootPage.xaml" />
</UriMapper:UriMapper> 
```

在里面`App()`我叫`SetupUriMapper()`

```
void SetupUriMapper()
    {
        // Get the UriMapper from the app.xaml resources, and assign it to the root frame
        UriMapper mapper = Resources["mapper"] as UriMapper;
        RootFrame.UriMapper = mapper;

        // 
        CycleManager pCycMan = CycleManager.Instance;
        bool isPasswordSet = pCycMan.GetPasswordEnabled();

        // Update the mapper as appropriate
        if (isPasswordSet)
            mapper.UriMappings[0].MappedUri = new Uri("/PasswordPage.xaml", UriKind.Relative);
        else
            mapper.UriMappings[0].MappedUri = new Uri("/MainPage.xaml", UriKind.Relative);
    } 
```

现在，为什么我将默认导航更改为“RootPage.xaml”而不是通常的 MainPage.xaml 仅仅是因为在导航到密码页面后，在输入密码并单击确定时，我无法导航到 MainPage.xaml。它位于同一页面 PasswordPage 内部。

我发现几乎没有答案散布在整个网络上，这就是我理解的方式。检查条件后在 PasswordPage 上，如果条件为真，则最好导航到 MainPage.xaml。但是，如果我们在 WMAppManifest 文件中将默认页面设置为 MainPage.xaml，它将无法导航，因为它正在寻找新的 Uri [ `NavigationService.Navigate(new Uri("/MainPage.xaml", UriKind.Relative));`] 进行导航，并且我们的默认当前导航仍设置为 MainPage.xaml。由于 Uri 没有变化，所以它停留在 PasswordPage。但是如果我们将默认页面定义为 RootPage，则在到达 PasswordPage 时，我们的导航 Uri 是 MainPage，而我们的默认 Uri 是 RootPage。

```
 if (passwordBox1.Password == pCycMan.GetPassword())
     NavigationService.Navigate(new Uri("/MainPage.xaml", UriKind.Relative)); 
```

希望这对某人有帮助。如果我弄错了，请纠正我。

# google-docs - 如何使用 Google Apps 脚本将 Google 文档插入 Google 站点

> ID：11324478
> 
> 赞同：0
> 
> 时间：2012-07-04T07:37:21.363
> 
> 标签：google-docs, google-apps-script, google-sites

使用 Google Apps 脚本，如何在 Google 协作平台编辑器中完成与“插入”->“文档”相同的操作？

使用 GAS，我可以获得文档的 URL 和/或 ID，但我无法在 Google 站点页面中创建与嵌入式 Google 文档等效的内容。

我已经能够插入一个`<iframe>`，但这假设该文档已作为 Web 文档发布。

我可以从现有页面复制 html 并使用`replace()`不同的 ID 替换，但这仅在原始页面小工具打开边框和标题时才有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T07:49:25.867

我认为你提到的方法应该有效。有一个“模板”页面，其中插入了一个虚拟 Google 文档，然后使用 Apps 脚本将虚拟文档替换为您的文档。你能在你拥有的替换周围输入一些代码吗？

# html - 如何放置两个 在 svg 中并排？

> ID：11324479
> 
> 赞同：0
> 
> 时间：2012-07-04T07:37:27.933
> 
> 标签：html, svg

大家好，我是 html5 和 svg 标签的新手。我想问一个关于 svg html 元素的问题。这是我的代码

```
<html>
 <div>
   <svg width = "1335" height = "400">
     // I want to have two svg:g side by side one of more width and second of less width
        such that width of svg = first g + second g
      <g>
          // All the elements inside g should have same width as g
      </g>
      <g>
      </g> 
   </svg>
 <div>
</html> 
```

我已经尝试过使用转换。但失败了。是否可以并排放置两个 g 元素，因为我无法设置 g 的 x 和 y ？任何人都可以指导我以另一种方式做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:12:43.947

您可以使用变换，那么问题是如何获得`g`在该`right`位置进行变换的值。一种可能的方法（实际上是最简单的）是获取边界框坐标之间的差异。假设您有一个用于组 G1 的边界框 BB1 和用于 G2 的 BB2，您可以计算要应用于 G2 的平移。

当然，我们需要一个脚本来执行计算运行时。这样的脚本将使用

```
var BB1 = document.getElementById("G1").getBBox() 
```

这里的代码

```
<svg>
    <script>
        function align(evt) {
            var G1 = document.getElementById("G1")
            var G2 = document.getElementById("G2")
            var BB1 = G1.getBBox()
            var BB2 = G2.getBBox()
            G2.setAttribute("transform", "translate("+ ((BB1.x+BB1.width)-BB2.x) + " " + ((BB1.y+BB1.height)-BB2.y) + ")")
        }
    </script>                
    <g id="G1">
        <rect fill="red" x="10" y="10" width="40" height="30" />
    </g>
    <g id="G2" onclick="align(evt)">
        <rect fill="blue" x="70" y="60" width="100" height="50" />
    </g>
</svg> 
```

你可以用它来试验[jsFiddle](http://jsfiddle.net/c2xbE/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T23:06:52.123

如果您只是将每个片段包含`<g>`在一个单独的`SVG`标签中，然后关闭标签中的一组 SVG 片段`<section>`，那么渲染的布局就像图像一样......向右流动并为我和我的 CSS 包装——我可以剖析CSS 来弄清楚如果你真的需要它是如何/为什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T08:06:56.280

`<g>`元素没有位置或大小，这就是为什么你不能设置and `x`，`y`它只是一个逻辑容器。此外，SVG 并没有像 HTML 那样真正有布局的概念，这就是你想要实现的。如果您想要两个元素彼此相邻，[只需将它们彼此相邻绘制](http://jsfiddle.net/robertc/xsxPH/)：

```
<svg width = "1335" height = "400">
    <rect x="0" y="0" width="667" height="400" fill="#0f0"/>
    <rect x="668" y="0" width="667" height="400" fill="#00f"/>
</svg> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-04T10:58:44.327

如何通过 SVG 制作爱尔兰国旗的简单示例

```
<!DOCTYPE html>
<html>
    <body>
        <h1>Irish Flag SVG image</h1>
        <svg version="1.1"
             baseprofile="full"
             width="300" height="200"  
             xmlns="http://www.w3.org/2000/svg">

            <!--creating rect side by side for irish flag -->
            <rect x="0" y="0" width="300" height="200" fill="green"/>
            <rect x="100" y="0" width="300" height="400" fill="white"/>
            <rect x="200" y="0" width="300" height="400" fill="orange"/>
        </svg>

    </body>
</html> 
```

# asp.net - /bin 浏览时出现错误 404

> ID：11324481
> 
> 赞同：5
> 
> 时间：2012-07-04T07:37:30.053
> 
> 标签：asp.net, windows, iis, http-status-code-404, bin-folder

我在 Windows Server 2008 R2 上运行 IIS 7.5。浏览“/bin”文件夹时出现错误
。`404: file not found`我了解这是 Microsoft 的一项安全政策。

我试着做[这里](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/54e9382b-743d-495e-a324-b8b57a5214ee.mspx?mfr=true)写的，但它没有解决问题。有任何想法吗？

**编辑：**
应该注意我没有安全问题。我运行 IIS 以在专用网络中进行目录浏览。最终我需要对其进行爬网和索引。问题是“/bin”和“/AppConfig”下的页面因为404错误没有被爬取。

我只需要这个问题的解决方案。同样，这里没有安全问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-04T10:30:33.653

Bin 文件夹不是开发人员放置网页的地方。

在 IIS 7.5 中，您可以配置

1.  打开 Internet 信息服务 (IIS) 管理器
2.  在“连接”窗格中，转到要修改请求过滤设置的连接、站点、应用程序或目录。
3.  在主页窗格中，双击请求过滤。
4.  在**请求过滤窗格**中，单击隐藏段选项卡
5.  选择要显示的相对路径（BIN 文件夹），然后单击“操作”窗格中的“删除”。

同样可以通过 web.config 完成

```
<configuration>
  <system.webServer>
   <security>
     <requestFiltering>
        <hiddenSegments applyToWebDAV="false">
           <remove segment="Bin" />
        </hiddenSegments>
     </requestFiltering>
   </security>
  </system.webServer>
</configuration> 
```

无论如何，为了避免在开发服务器和任何部署服务器上出现问题，我认为**最简单的解决方案是将这些页面移动到另一个文件夹**。

* * *

[在这里](http://msdn.microsoft.com/en-us/library/ex526337.aspx)阅读：

```
ASP.NET recognizes certain folder names that you can use   
for specific types of content.  
The following table lists the reserved folder names and the type   
of files that the folders typically contain.

Note
The content of application folders, except for the App_Themes folder,
is not served in response to Web requests,
but it can be accessed from application code. 
```

*   `App_Browsers`包含 ASP.NET 用来识别各个浏览器并确定其功能的浏览器定义（.browser 文件）。
*   `App_Code`包含共享类和业务对象的源代码
*   `App_Data`包含应用程序数据文件，包括 .mdf 数据库文件、XML 文件和其他数据存储文件。
*   `App_GlobalResources` 包含编译到具有全局范围的程序集的资源（.resx 和 .resources 文件）。
*   `App_LocalResources`包含与应用程序中的特定页面、用户控件或母版页关联的资源（.resx 和 .resources 文件）
*   `App_Themes`包含定义 ASP.NET 网页和控件外观的文件（.skin 和 .css 文件，以及图像文件和通用资源）的集合。
*   `App_WebReferences`包含参考合同文件（.wsdl 文件）、模式（.xsd 文件）和发现文档文件（.disco 和 .discomap 文件），可让您创建 Web 参考以供在应用程序中使用。
*   `Bin` 包含要在应用程序中引用的控件、组件或其他代码的已编译程序集（.dll 文件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:09:18.813

*   通过网络共享访问 \bin 文件夹，例如`\\myserver\mysite\bin`
*   编写 ashx 处理程序或 asmx 网络服务，它将为您扫描 \bin 文件夹并为您返回结果，例如`Directory.GetFiles(Server.MapPath("~\bin"))`

# java - 使用 Ant 在文件中的特定文本之后附加文本

> ID：11324490
> 
> 赞同：0
> 
> 时间：2012-07-04T07:37:51.333
> 
> 标签：java, ant

Ant中是否有任何方法可以在文本文件中的任何特定文本之后添加文本？例如，我想在`<service>`xml 标签之后添加一个 xml 行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T09:42:42.713

要修改 XML 文档，最好的方法可能是使用[Ant XSLT 任务](http://ant.apache.org/manual/Tasks/style.html)进行 XSL 转换。您描述的任务的样式表听起来很简单，而这个 Ant 任务使其执行起来非常简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T07:49:24.580

您可以为附加文本编写简单的类。
然后你可以使用 ant 的任务 'java'
[ant java task运行它](https://ant.apache.org/manual/Tasks/java.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T15:45:09.863

对于所有特定于 xml 的任务，建议使用**[xmltask](http://www.oopsconsultancy.com/software/xmltask/)**。对于某些 xml 的简单附加，请使用带有属性 append="true"的**[echoxml任务（自 Ant 1.7 起）](http://ant.apache.org/manual/Tasks/echoxml.html)**

# objective-c - 不知道如何使用 SQLCipher 加密数据库

> ID：11324495
> 
> 赞同：0
> 
> 时间：2012-07-04T07:38:07.853
> 
> 标签：objective-c, ios, fmdb, sqlcipher

我已经将 SQLCipher 包含在我的项目中，就像在这个链接中解释的那样：http: [//sqlcipher.net/ios-tutorial/](http://sqlcipher.net/ios-tutorial/)

但是我不确定如何加密我从上面的链接中阅读了描述但没有得到的数据库。
实际上我正在做的是，如果应用程序是第一次打开，那么它会将数据库（即没有加密）复制到文档目录。从捆绑包复制到文档目录时，我的数据库还有一件事是空白的。
打开数据库后，我尝试使用 sqlite3_key 函数，但没有加密。但是我没有发现从捆绑包复制到文档目录时如何加密数据库之类的东西。我打算使用FMDB，所以最好按照那个来回复。
如果有任何教程，请指导我如何做到这一点或指出方向。还建议应该采用什么标准方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-21T01:34:32.613

对于那些正在寻找有关如何完成此操作的简单教程的人，我可以创建一个：[http ://www.guilmo.com/fmdb-with-sqlcipher-tutorial/](http://www.guilmo.com/fmdb-with-sqlcipher-tutorial/)

但最重要的部分是，打开您现有的数据库并附加一个新的加密数据库。然后在您的 FMDB 连接中设置密钥。

**SQLCipher - 加密数据库**

```
// Import sqlite3.h in your AppDelegate
#import <sqlite3.h>

// Set the new encrypted database path to be in the Documents Folder
NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentDir = [documentPaths objectAtIndex:0];
NSString *ecDB = [documentDir stringByAppendingPathComponent:@"encrypted.sqlite"];

// SQL Query. NOTE THAT DATABASE IS THE FULL PATH NOT ONLY THE NAME
const char* sqlQ = [[NSString stringWithFormat:@"ATTACH DATABASE '%@' AS encrypted KEY 'secretKey';",ecDB] UTF8String];

sqlite3 *unencrypted_DB;    
if (sqlite3_open([self.databasePath UTF8String], &unencrypted_DB) == SQLITE_OK) {

    // Attach empty encrypted database to unencrypted database
    sqlite3_exec(unencrypted_DB, sqlQ, NULL, NULL, NULL);

    // export database
    sqlite3_exec(unencrypted_DB, "SELECT sqlcipher_export('encrypted');", NULL, NULL, NULL);

    // Detach encrypted database
    sqlite3_exec(unencrypted_DB, "DETACH DATABASE encrypted;", NULL, NULL, NULL);

    sqlite3_close(unencrypted_DB);
}
else {
    sqlite3_close(unencrypted_DB);
    NSAssert1(NO, @"Failed to open database with message '%s'.", sqlite3_errmsg(unencrypted_DB));
}

self.databasePath = [documentDir stringByAppendingPathComponent:@"encrypted.sqlite"]; 
```

请注意，我们在 SQL Query 中设置了 2 个参数，即 DATABASE 和 KEY。DATABASE 应该是您要创建的加密数据库的**完整路径，在本例中为字符串 ecDB，而 KEY 参数是将用于加密您的数据库的密钥，因此请选择一个强大的**

现在在您的 FMDB 函数上，每次打开数据库后调用**[db setKey:@"strongKey"] 。**

```
// FMDatabase Example
FMDatabase *db = [FMDatabase databaseWithPath:[self getDatabasePath]];
[db open];
[db setKey:@"secretKey"];

// FMDatabaseQueue Exmple
FMDatabaseQueue *queue = [FMDatabaseQueue databaseQueueWithPath:[self getDatabasePath]];

[queue inDatabase:^(FMDatabase *db) {
    [db setKey:@"secretKey"];
    ...
}]; 
```

如果您有任何问题，请告诉我！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T21:13:11.997

这方面的说明在 SQLCipher API 页面 [1] 中使用 sqlcipher_export()，在“示例 1：加密纯文本数据库”下

[1] [http://sqlcipher.net/sqlcipher-api/#sqlcipher_export](http://sqlcipher.net/sqlcipher-api/#sqlcipher_export)

# tcp - Wii 浏览器是否支持 WebSockets？

> ID：11324500
> 
> 赞同：6
> 
> 时间：2012-07-04T07:38:39.493
> 
> 标签：tcp, websocket, wii

Wii中的浏览器是否支持websockets？我知道 Wii 使用的是 Opera，但我只是想确定一下，因为我没有办法对此进行测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T08:00:01.643

不[，Wii 上的互联网频道是基于 Opera 9 的](http://www.nintendo.com/consumer/systems/wii/en_na/gi_channels.jsp?menu=internet)。[在Opera 11](http://my.opera.com/ODIN/blog/2010/12/17/new-html5-features-in-opera-11)之前，Opera 没有任何类型的 Web 套接字支持，即使现在默认情况下也是禁用的。

# scheme - 我的 CPS 是对的吗？

> ID：11324509
> 
> 赞同：2
> 
> 时间：2012-07-04T07:39:10.110
> 
> 标签：scheme, continuations, continuation-passing

在“The Scheme Programming Language 4th Edition”中，有一个例子如下：

```
 (define product
  (lambda (ls)
    (call/cc
      (lambda (break)
        (let f ([ls ls])
          (cond
            [(null? ls) 1]
            [(= (car ls) 0) (break 0)]
            [else (* (car ls) (f (cdr ls)))])))))) 
```

（产品'（1 2 3 4 5））=> 120

（产品'（7 3 8 0 1 9 5））=> 0

后来它在 3.3 中转换为 CPS，如下所示

```
 (define product
  (lambda (ls k)
    (let ([break k])
      (let f ([ls ls] [k k])
        (cond
          [(null? ls) (k 1)]
          [(= (car ls) 0) (break 0)]
          [else (f (cdr ls)
                   (lambda (x)
                     (k (* (car ls) x))))]))))) 
```

（产品'（1 2 3 4 5）（λ（x）x））=> 120

（产品'（7 3 8 0 1 9 5）（λ（x）x））=> 0

我想自己做，对应的CPS如下

```
 (define (product ls prod break)
    (cond
      ((null? ls)
       (break prod))
      ((= (car ls) 0)
       (break 0))
      (else
        (product (cdr ls) (* prod (car ls)) break)))) 
```

（产品'（1 2 3 4 5）1（λ（x）x））=> 120

（产品'（1 2 0 4 5）1（λ（x）x））=> 0

我想问一下我的CPS对吗？提前谢谢！

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T14:53:31.547

我认为这是正确的实现：

```
(define inside-product #f)  ;; to demonstrate the continuation

(define (product ls prod break)
  (cond
    ((null? ls)
     (begin
       (set! inside-product prod)
       (prod 1)))
    ((= (car ls) 0)
     (break 0))
    (else
     (product (cdr ls) (lambda (x) (prod (* (car ls) x))) break))))

(define identity (lambda (x) x)) 
```

CPS 的想法是跟踪递归。

```
> (product (list 1 2 3) identity identity)
6
> (inside-product 4)
24 
```

# oauth - 使用oauth2登录时如何识别一个人

> ID：11324510
> 
> 赞同：0
> 
> 时间：2012-07-04T07:39:13.603
> 
> 标签：oauth, oauth-2.0

在 OAuth1.0 中，access_token 和 access_secret 对于第三方系统（如 facebook）中的每个用户都是唯一的。所以当我通过 Facebook 登录时，它会返回 access_token 和 access_secret，我可以在我的站点中注册用户并登录.

在 OAuth 2.0 中，它只返回 access_token，并且过期时间。并且 access_token 可能会在几天后过期。如何识别一个人？（或者我必须请求它的api来保存facebook的uid才能达到这个目标）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:34:24.853

跟踪用户完全是您的责任，而不是 OAuth 的一部分。OAuth 只是指定如何使用访问令牌访问提供者 API。

所以是的，您必须从 Facebook 获取用户信息才能获得唯一 ID。;)

# javascript - 警报消息 onfocus

> ID：11324513
> 
> 赞同：0
> 
> 时间：2012-07-04T07:39:54.000
> 
> 标签：javascript

我不明白。为什么页面加载时会出现此警报？如何使其仅“聚焦”警报？

```
<input id="mail" name="E-post" value="E-post">
<script>
window.onload = function () {
    function onfocusFunction() {
        alert('Why!?');
    }
    var myMail = document.getElementById('mail');
    myMail.onfocus = onfocusFunction();
}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T07:40:48.337

使用括号`()`，您正在调用`onfocusFunction`函数并分配`undefined`给`myMail.onfocus`：

```
myMail.onfocus = undefined; 
```

因为您的`onfocusFunction`函数不返回任何内容。

没有括号，您将拥有`onfocusFunction`对象，该对象应分配给`.onfocus`：

```
myMail.onfocus = onfocusFunction;  //No parenthesis before ';' 
```

**更新：**如果你想传递参数，那么试试这样：

```
function onfocusFunction(param1,param2) {
    return function(){
       alert(param1+":"+param2);
    };
}
var myMail = document.getElementById('mail');
myMail.onfocus = onfocusFunction("value1","value2"); 
```

然后，当`onfocus`触发事件时，您将看到`"value1:value2"`警报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T07:47:31.703

当你输入`myMail.onfocus = onfocusFunction();`

1.  你在`onfocusFunction()`打电话
2.  将其返回值分配给`myMail.onfocus`

（在这种情况下，返回值为 null ）；

让我们说：

```
 function onfocusFunction() {
        alert('Why!?');
return "ok";
    } 
```

所以`myMail.onfocus`将是字符串 'ok' 而不是函数

你可以使用工程师的解决方案

或尝试：

```
myMail.onfocus = function(){alert("why")}; 
```

# java - 以编程方式创建的 EJB 计时器多久在集群中执行一次？

> ID：11324514
> 
> 赞同：4
> 
> 时间：2012-07-04T07:39:56.213
> 
> 标签：java, jakarta-ee, timer, cluster-computing

在集群 JEE6 环境（Glassfish 3.1.2）中，`@Singleton` 可以/可以在每个集群节点上创建一个 bean。如果这个 Singleton Bean 在其上注册了一个程序计时器`@PostConstruct`- 该`@Timeout`方法多久执行一次？- 仅在其中一个单例上（每个滴答声），或者对于每个注册了计时器的 Singeton 一次（每个滴答声）？

*下面的代码是一个例子，这个问题对这段代码意味着什么。*

```
@Singleton
public class CachedService {

@Resource
private TimerService timerService;

    private static final long CACHE_TIMEOUT_DURATION_MS = 60 * 60 * 1000;

    @PostConstruct
    void initResetTimer() {
        this.timerService.createIntervalTimer(CACHE_TIMEOUT_DURATION_MS,
            CACHE_TIMEOUT_DURATION_MS,
            new TimerConfig("current user cache timeout", false));
    }

    @Timeout
    public void executeResetTimer() {
        this.clearCache();
    }
} 
```

示例：应用程序在集群中的 3 个节点上运行。假设 Singleton 在每个节点上都实例化，所以`initResetTimer`总共执行 3 次（每个节点一次）。那么问题是：是否**每小时****清除一次所有节点上的缓存（被调用）？`executeResetTimer`**

*（我知道计时器不会在所有节点上同时计时，因为 Singleton 是在不同时间实例化的，但这不是问题/问题。）*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T06:56:07.337

首先，确保您已按照[此处](http://docs.oracle.com/cd/E18930_01/html/821-2418/beahw.html#gktqo)所述为外部共享 XA 数据源设置计时器服务。

在过去深入研究过您的问题后，我记得开发人员在邮件列表中的[一些解释](http://old.nabble.com/Clustered-Timer-Service-Behavior-td20945670.html)，Glassfish 的实现如下：

> 假设您在集群中有节点 A、B 和 C。在节点 A 创建的持久定时器由节点 A“拥有”（即定时器事件被传递到节点 A）。如果节点 A 发生故障，则可以将其计时器迁移到另一个活动节点。

由于 Glassfish[不支持](http://docs.oracle.com/cd/E18930_01/html/821-2418/beahx.html#glanq)cluster-wide `@Singletons`，您最终会得到与调用一样多的计时器`initResetTimer()`。此外，每个服务器重新启动/重新部署可能会为每个集群节点创建一个新的计时器实例，除了旧的未取消的计时器，所以不要忘记取消您以编程方式创建的计时器:) 为避免这种情况，请一起使用声明性`@Schedule(...)`方法，Glassfish 将创建计时器*[跨集群一次，](http://www.java.net/node/695110)*并希望在失败时自动迁移它们。

希望这可以帮助。

更新：

以编程方式创建的计时器（持久性或非持久性）将在它创建的 JVM/节点中被触发，而不管集群设置与否。大致可以总结一下：独立定时器实例数等于调用次数`timer.createXxxTimer()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T11:53:53.807

我查看了 EJB 3.1 规范的第 18 章“定时器服务”。该应用程序应根据规范独立于集群运行。

我的理解是，如果`createIntervalTimer`在集群中调用一次，则计时器应该根据集群中的节点数独立触发一次。由于每个单例 bean（根据您的问题）调用`createIntervalTimer`，它将被执行*n*次。它类似于[在 ServletContextListener 中创建计时器](https://stackoverflow.com/questions/6948360/ejb-3-0-timer-cluster-info)。

不过，这是理论。我会仔细检查您定位的特定应用服务器。在 glassfish 中，[集群范围的计时器](http://programmaremobile.blogspot.ch/2009/02/clustering-and-ejb-timer-eng.html)需要使用外部数据库配置计时器池。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T09:06:13.403

即使它不是一个直接的回答，这无论如何都会有所帮助：每个集群环境只配置一个实例的一种方法是将单例 ejb 公开为 MXbean。您应该必须公开一个托管的 imterface，甚至可以是 empty ，然后在 @PostCostruct 标记的方法中将您的 ejb 注册到 jmx 服务。最后，您必须提供一个 @PreDestroy 挂钩才能从 jmx 服务中注销。这是 Java Champion Adam Bien 建议的方式。

# python - 如何将 Discoverer 模块与 pygi GstPbutils 一起使用？

> ID：11324519
> 
> 赞同：5
> 
> 时间：2012-07-04T07:40:29.587
> 
> 标签：python, introspection, gstreamer

我正在尝试将一些 pygtk 音乐播放器代码移植到使用 gst 的发现器模块的 pygi。

```
from gi.repository import Gst, GstPbutils

def on_discovered(discoverer, ismedia):
    print("%s -- %s" %( discoverer.tags.get('title', 'Unknown'),
                        discoverer.tags.get('artist', 'Unknown')))

Gst.init(None)
location = "file:///srv/Music/molly_hatchet-the_creeper.mp3"
discoverer = GstPbutils.Discoverer()
discoverer.discover_uri(location)
discoverer.connect('discovered', on_discovered) 
```

当我尝试运行它时，我收到以下错误：

```
/usr/lib/python2.7/dist-packages/gi/types.py:43: Warning: g_object_get_qdata: assertion `G_IS_OBJECT (object)' failed
  return info.invoke(*args, **kwargs)
/usr/lib/python2.7/dist-packages/gi/types.py:43: Warning: g_object_ref_sink: assertion `G_IS_OBJECT (object)' failed
  return info.invoke(*args, **kwargs)

** (python:21482): CRITICAL **: pygobject_register_wrapper: assertion `PyObject_TypeCheck(self, &PyGObject_Type)' failed
/usr/lib/python2.7/dist-packages/gi/types.py:43: Warning: g_object_unref: assertion `G_IS_OBJECT (object)' failed
  return info.invoke(*args, **kwargs) 
```

不幸的是，关于这个 pygi 模块的文档似乎有点稀疏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-02T21:48:03.390

我通过以下代码成功使用了`GstPbutils`模块（注意这个使用版本`1.2`的gstreamer）

```
if __name__ == "__main__":
    if len(sys.argv) < 2:
        print >> sys.stderr, "usage %s <filename>" % sys.argv[0]
        sys.exit(1)

    Gst.init(None)
    GObject.threads_init()

    discoverer = GstPbutils.Discoverer()
    discoverer.connect('discovered', on_discovered)
    info = discoverer.discover_uri(sys.argv[1])

    # video info
    print '# video'
    for vinfo in info.get_video_streams():
        print vinfo.get_caps().to_string().replace(', ', '\n\t')

    # audio info
    print '# audio'
    for ainfo in info.get_audio_streams():
        print ainfo.get_caps().to_string().replace(', ', '\n\t') 
```

我得到如下输出

```
$ python source.py 'file:///home/gipi/Videos/Adventure Time - Season 2/Adventure time - 1x24 - Heat Signature.mp4'
# video
video/x-h264
        stream-format=(string)avc
        alignment=(string)au
        level=(string)4.1
        profile=(string)high
        codec_data=(buffer)01640029ffe1001967640029ac5208014016ec04400000fa40002ee023c60c626001000668e88ecb22c0
        width=(int)1280
        height=(int)720
        framerate=(fraction)24000/1001
        pixel-aspect-ratio=(fraction)1/1
        parsed=(boolean)true
# audio
audio/mpeg
        mpegversion=(int)4
        framed=(boolean)true
        stream-format=(string)raw
        level=(string)2
        base-profile=(string)lc
        profile=(string)lc
        codec_data=(buffer)1190
        rate=(int)48000
        channels=(int)2 
```

文档有点棘手，因为没有明确定义各种数据类型（例如`GstDiscovererAudioInfo`）；顺便说一句，您可以[在此处找到一些文档](http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gst-plugins-base-libs/html/gst-plugins-base-libs-gstdiscoverer.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-11T03:28:53.757

这是通用 GST 发现程序调用的示例：

```
import sys

import gobject
gobject.threads_init()

import pygst
pygst.require('0.10')
import gst
from gst.extend.discoverer import Discoverer

def on_discovered(discoverer, ismedia, infile):
    print '\non_discovered:', infile
    discoverer.print_info()

if __name__ == '__main__':
    if len(sys.argv) >= 2:
        print 'Audio file: %s ' % sys.argv[0]
        discoverer = Discoverer(sys.argv[1])
        discoverer.connect('discovered', on_discovered, sys.argv[1])

        # The MainLoop
        mainloop = gobject.MainLoop()
        gobject.idle_add(discoverer.discover)
        mainloop.run()

    else:
        print 'Usage: %s <input_file>' % sys.argv[0] 
```

编辑：如果你只想要标签，使用[这个](https://gist.github.com/xaccrocheur/6203346#file-discover)：

# html - 链接上的 IE 边距

> ID：11324533
> 
> 赞同：0
> 
> 时间：2012-07-04T07:41:17.987
> 
> 标签：html, css, internet-explorer

我在 IE 中遇到了 margin-top 的问题。我给了一个链接一个 2px 的边距顶部，以便在 Chrome 中正确对齐它。但这在 IE9 中造成了偏移。

一些代码：

CSS

```
.show_cart{
    display: block!important;
    float:left;
    padding-left: 10px;
    margin-top: 2px;
} 
```

HTML

```
<div class="show_cart">
    <a href="/reba/nl/winkelwagen">Toon Winkelwagen</a>
</div> 
```

我希望有一个快速修复，但我找不到它。

编辑 - 对不起，我在这里编辑它，但我在评论框中找不到代码。无论如何，我根据我应该使用垂直对齐的答案将其更改为这个。Chrome 仍然可以正常显示，但在 IE 中，它现在与 TOP 相差 2px。

```
.vmCartModule .show_cart{
    display: inline!important;
    float:left;
    padding-left: 10px;
}

.vmCartModule .show_cart a{
    vertical-align: baseline
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:13:36.607

它不仅仅是一个利润。当您尝试将元素与文本对齐时，您还应该考虑字体大小、垂直对齐等。我不建议计算像素，它永远不会在所有浏览器中保持一致并且很难维护。相反，尝试坚持“垂直对齐：基线”，这更具确定性。使用它，您可以确保您的文本始终正确对齐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:05:22.937

以防万一您使用的是 HTML5 Boilerplate [http://html5boilerplate.com/](http://html5boilerplate.com/)

您可以为 IE9 的同一类使用不同的值 -

```
.ie9 .show_cart{
    margin-top: 0px;
} 
```

或者仅当您希望为此使用 jQuery 时，您可以编写 -

```
if ($.browser.msie && parseInt($.browser.version) == 9){
  $('.show_cart').css({'margin-top':'0px'});
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T08:12:40.090

这听起来就像 IE 著名的双边距错误，这里有一个简单的修复[方法](http://www.cssnewbie.com/double-margin-float-bug/)。

尝试更改`display: block;`为`display: inline;`. 或者您可以找到另一个解决方案（有很多），或者您可以使用提到的 HTML5 样板或类似的东西，如[headjs](http://headjs.com/)等。

# sencha-touch - 隐藏煎茶触摸轮播子弹

> ID：11324534
> 
> 赞同：1
> 
> 时间：2012-07-04T07:41:19.567
> 
> 标签：sencha-touch

我将在移动视图中使用 Sencha Touch 2 轮播，但我需要隐藏它底部的导航项目符号。是否有此配置（我查看了 api 但找不到），还是应该使用 CSS 隐藏它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T04:19:10.200

不，只放入元素`config: {}`块中`Ext.Carousel`，像这样

```
 indicator: false 
```

玩得开心！隐。我希望这有帮助。:)

# spring - Spring Framework - root-context.xml FileNotFoundException？

> ID：11324538
> 
> 赞同：0
> 
> 时间：2012-07-04T07:41:33.267
> 
> 标签：spring, spring-mvc, filenotfoundexception, applicationcontext

我正在使用 SpringSource 套装 2.9.2 和 Spring MVC 世界的新手。我正在尝试使用以下代码来保留应用程序上下文的对象：-

```
ApplicationContext context = new ClassPathXmlApplicationContext("root-context.xml");
UsersDaoImpl usersDao = context.getBean("usersDaoImpl", UsersDaoImpl.class);
Users user = usersDao.getUsers(name);
return user; 
```

它还给我`FileNotFoundException`例外。我也为前尝试了不同的路径。`spring/root-context.xml`等等，但似乎没有任何效果。这是一个堆栈跟踪： -

```
java.io.FileNotFoundException: class path resource [root-context.xml] cannot be opened because it does not exist
    org.springframework.core.io.ClassPathResource.getInputStream(ClassPathResource.java:158)
    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:328)
    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
    org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
    org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
    org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:243)
    org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:127)
    org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:93)
    org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:131)
    org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:522)
    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:436)
    org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
    com.varundroid.demos.HomeController.testingDatabase(HomeController.java:65)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:212)
    org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:900)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

![在此处输入图像描述](../Images/d4bea92e0a0602b30206296778d75f21.png)

任何帮助将非常感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T08:06:37.340

Spring 可能无法在您的类路径中找到它。

将该文件放在 /src/main/resources 下（如图所示）。
PS：这是我的一般做法，到目前为止从未失败过。
参考图片，这里我的上下文文件是`application-web-context.xml`

![在此处输入图像描述](../Images/d0e70d94b8b05b502b3bf392d6ab3d84.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T08:41:11.757

这里的主要问题是为什么需要在 Web 应用程序中创建新的应用程序上下文而不是使用现有的应用程序上下文。

据我从您的设置中可以看出，您`ContextLoaderListener`应该`DispatcherServlet`在`web.xml`. 如果是这样，您需要访问由这些类加载的上下文，而不是创建一个新的。

如果要`ApplicationContext`在 Spring bean 内部访问，可以使用[`ApplicationContextAware`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/ApplicationContextAware.html)或自动装配。如果您想在 Spring bean 之外执行此操作（例如，在`Servlet`或中`Filter`），您可以使用[`WebApplicationContextUtils`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/context/support/WebApplicationContextUtils.html).

**更新：**

`ApplicationContext`在这种情况下，您不需要访问。如果您想将一个 Spring bean (DAO) 注入另一个 (控制器)，您可以使用自动装配：

```
@Autowired
private UserDao userDao; 
```

另请注意，如果`UserDaoImpl`是实现`UserDao`接口的类，则在声明依赖项时使用接口会更好。

# apache - Apache mod_rewrite 任何子域到根域，除非作为 virtualdocumentroot 存在

> ID：11324539
> 
> 赞同：1
> 
> 时间：2012-07-04T07:41:48.320
> 
> 标签：apache, mod-rewrite, redirect, subdomain, virtualhost

假设您有一个 Apache2 虚拟主机设置，如下所示：

```
/htdocs/parent1.com
/htdocs/sub1.parent1.com
/htdocs/sub2.parent1.com
/htdocs/parent2.net
/htdocs/parentn.org 
```

假设您想使用 来执行此操作`VirtualDocumentRoot /htdocs/%0`，这样您就可以添加和删除虚拟主机，而无需修改您的 Apache 配置。这很重要：请不要在每次虚拟主机进出时都弄乱 htaccess 文件或 httpd.conf - 无论该主机是否是父域。实际上，假设您正在使用`AllowOverride None`.

无论如何，问题是，您如何 301 将不存在的子域重定向到其相应的父域而不重定向现有的子域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T13:44:37.370

我可能已经解决了我自己的问题。但是，如果有人发现我正在做的事情有问题，我将不胜感激。

只要存在相应的文档根，以下内容就只剩下对任意子域的任何请求；但将任何请求重定向到文件系统中不存在的子域。

```
<IfModule rewrite_module>
    RewriteEngine On
    RewriteMap lowercase int:tolower
    RewriteCond "/htdocs/${lowercase:%{HTTP_HOST}}" !-d
    RewriteCond %{HTTP_HOST} "\.([^\.]+\.[^\.]+)$"
    RewriteRule ^/(.*)$ "http://%1/$1" [R=301]
</IfModule> 
```

允许我设置通配符 DNS 并使用基于名称的虚拟主机，而无需触及任何配置设置。此外，不涉及 htaccess。只需使用“/htdocs/[host.]domain.tld”之类的任何名称创建您的文件夹，您就可以启动并运行。据我所知，这实际上不适用于 SSL/TLS（可能与`%{HTTP_HOST}`？），但是安全站点相对较少，并且通过 IP 地址比通过主机名更好地解决。

# javascript - Http方法差异

> ID：11324540
> 
> 赞同：0
> 
> 时间：2012-07-04T07:41:55.747
> 
> 标签：javascript, jquery, asp.net, html

有什么区别

```
HTTPPOST
HTTPDELETE
HTTPPUT
HTTPGET 
```

通常用于提交表单的 post 和 get 方法，我非常了解它们，但想知道 delete 和 put 方法何时以及为何可用于提高编程技能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T07:46:09.447

不同方法的作用完全取决于远程 Web 服务器选择如何解释它们。没有固定的含义。服务器不在乎它是否看到`GET`或`POST`；相反，最终被执行以服务请求的代码确实（并且可以决定做任何事情，因为它是代码）。

HTTP 协议给出了每个动词应该触发什么样的动作的官方指南，即：

*   GET：检索资源
*   PUT：用另一个资源替换一个资源，如果不存在则创建它
*   DELETE：删除资源（如果存在）
*   POST：可以做任何事情；通常用于“添加”到资源

然而，这种映射最终由应用程序代码控制，并且通常不受 Web 应用程序的尊重（例如，您将看到使用 POST 而不是 DELETE 来执行逻辑删除）。

当谈论基于 HTTP 的[REST架构时，情况会更好。](http://en.wikipedia.org/wiki/Representational_state_transfer)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T08:31:46.730

简而言之：

*   GET = 获取资源。
*   POST = 更新资源。
*   DELETE = 删除资源。
*   PUT = 创建/替换资源。

在 HTML 中，只允许 GET 和 POST。除非您有代码（或配置）来指定您希望它使用不同的 HTTP 方法做什么，否则典型的 Web 开发 HTTP 服务器将什么都不做。

没有什么可以阻止您更新用户数据以响应 GET 请求，但不建议这样做。浏览器处理 GET 和 POST 的方式不同，就缓存请求而言（缓存的 GET 将自动重新发出，但缓存的 POST 会提示用户允许重新发送）并且许多 HTML 元素可以发出 GET，这使得它们不安全更新。还有其他 HTTP 方法[http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)。

许多自称是[RESTful](http://en.wikipedia.org/wiki/REST)的人会将 HTTP POST 和 PUT 与 SQL UPDATE 和 INSERT 混淆。没有直接的相关性，它总是取决于上下文。也就是说，POST 的含义完全取决于您正在与之交互的资源。例如，在博客上创建新条目可以是对博客本身的 POST，或对从属资源的 PUT。但是，[根据定义](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)，PUT 必须始终包含整个资源。

通常，您不会允许 HTTP 客户端确定新资源的 URI，因此到 /blog 的 POST 会比到 /blog/ *article-uri*的 PUT 更安全，尽管 HTTP 确实会在服务器无法提供适当响应的情况下提供尊重预期的 URI。（HTTP只是一个规范，你得写代码来支持它，或者找个框架）

但是，由于您始终可以通过 POST 到负责其下属的父资源来实现 PUT 或 DELETE 用例（即，将消息发布到 /mailbox 而不是将其放在 /mailbox/ *message-id*），因此不必公开 PUT 或 DELETE 方法。

您可以通过采用 REST 原则来提高您的编程技能，以提高系统内交互的可见性，例如，通过使用统一的界面来根据 REST 对交互进行上下文化可能会更简单。

REST 不是 HTTP：http: [//www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm](http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm)。

# java - JPA 查找尚未提交的实体？

> ID：11324543
> 
> 赞同：0
> 
> 时间：2012-07-04T07:42:04.673
> 
> 标签：java, jpa, transactions

我最近遇到了 JPA（由 EclipseLink 提供）的一个非常出乎意料的（对我而言）行为。

考虑以下代码：

```
public int myFunction() {
    entityManager.getTransaction().begin(); // Application-managed EntityManager

    MyEntity entity = new MyEntity();
    entity.setPrimaryKey(1);
    entityManager.persist(entity);

    entity = entityManager.find(MyEntity.class, 1);

    if (entity == null) {
        return 0;
    }

    entityManager.getTransaction().commit();

    return 1;
} 
```

该函数将返回 0，这意味着在事务关闭之前我找不到持久实体。

**问题。** 是否有任何变通方法可以找到尚未提交但仍然存在的实体？如果没有，我应该自己做某种缓存吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T07:54:11.290

您可以使用[EntityManager.flush() 操作](http://en.wikibooks.org/wiki/Java_Persistence/Persisting#Flush)。

# javascript - Java Script / AJAX 电子邮件检查功能集成

> ID：11324544
> 
> 赞同：-1
> 
> 时间：2012-07-04T07:42:09.530
> 
> 标签：javascript, html, ajax

我有一个带有 JS 功能的表单，用于检查空字段并提交表单而不刷新所有页面，我正在寻找一种将电子邮件检查功能集成到我现在所拥有的方法中：

```
$(function() {
  $('.error').hide();
  $('input.text-input').css({backgroundColor:"#EBEBEB"});
  $('input.text-input').focus(function(){
    $(this).css({backgroundColor:"#EBEBEB"});
  });
  $('input.text-input').blur(function(){
    $(this).css({backgroundColor:"#EBEBEB"});
  });

  $(".button").click(function() {
        // validate and process form
        // first hide any error messages
    $('.error').hide();
        }

      var name = $("input#name").val();
        if (name == "") {
      $("label#name_error").show();
      $("input#name").focus();
      return false;
    }
        var email = $("input#email").val();
        if (email == "") {
      $("label#email_error").show();
      $("input#email").focus();
      return false;
    }
        var phone = $("textarea#phone").val();
        if (phone == "") {
      $("label#phone_error").show();
      $("textarea#phone").focus();
      return false;
    }

        var dataString = 'name='+ name + '&email=' + email + '&phone=' + phone;
        //alert (dataString);return false;

        $.ajax({
      type: "POST",
      url: "process.php",
      data: dataString,
      success: function() {
        $('#contact_form').html("<div id='message'></div>");
        $('#message').html("<h2>Email sent</h2>")
        .hide()
        .fadeIn(1000, function() {
          $('#message').append("<img id='checkmark' src='images/check.png' />");
        });
      }
     });
    return false;
    });
});
runOnLoad(function(){
  $("input#name").select().focus();
}); 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T07:50:11.233

要检查电子邮件，您可以使用：

```
var emailReg = /^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i

function isEmail(email) {
  return emailReg.test(email);
}
//call isEmail wherever you need it 
```

如果我可以进一步评论您的代码，我建议您缓存您的选择器并重用它们：

```
var input = $('input.text-input');
input.css({backgroundColor:"#EBEBEB"}).focus(function() //... and so on 
```

此外，如果您的 DOM 结构正确，您不必使用输入选择器调用您的 id，它只会减慢您的实现速度，因为它会迭代 DOM 中的每个输入，而不是直接获取它。这意味着：

```
$("label#phone_error") // don't do this
$("#phone_error") // do this 
```

此外，您可以使用数据对象传递给 jquery，而不是

```
var dataString = 'name='+ name + '&email=' + email + '&phone=' + phone; 
```

做这个：

```
$.ajax(yoururl, {data: 
  {
    name: name,
    email: email,
    phone: phone
  }, // and so on 
```

# android - 如何在android中将几个ui元素合并到一个listview中？

> ID：11324545
> 
> 赞同：1
> 
> 时间：2012-07-04T07:42:14.703
> 
> 标签：android, android-layout

我正在制作一个包含 a `ExpandableListView`、 a`CheckedTextView`和 a的自定义视图`ListView`：

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/filtersDialogView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:minHeight="200dp"
    android:orientation="vertical" >

    <ExpandableListView
        android:id="@+id/filtersListView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

    <CheckedTextView
        android:id="@+id/onlyShowAvailableItemsCheckedTextView"
        android:layout_width="match_parent"
        android:layout_height="?android:attr/listPreferredItemHeight"
        android:checkMark="?android:attr/listChoiceIndicatorMultiple"
        android:gravity="center_vertical"
        android:paddingLeft="8dip"
        android:paddingRight="8dip"
        android:text="@string/OnlyShowAvailableItems" />

    <ListView 
        android:id="@+id/categoriesListView"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</LinearLayout> 
```

问题是`CheckTextView`是固定的并且两个列表是独立滚动的（这对于该布局是正常的）。此外，当我从 展开列表项时`ExpandableListView`，`CheckedTextView`和 另一个`ListView`变得隐藏。我想制作一个包含所有这些元素的列表，当我展开第一个列表的元素时（第二个列表的单元格不可展开），这些元素可以正确滚动和调整大小。我怎样才能做到这一点？是否可以在不修改列表的适配器和控制器的情况下实现它`CheckedTextView`？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:35:29.000

> 我怎样才能做到这一点？是否可以在无需修改列表的适配器和 CheckedTextView 的控制器的情况下实现它？

我对此表示怀疑，尤其是当您有两个滚动视图时，the`ExpandableListView`和`ListView`. 我认为您唯一的选择是一个特殊的适配器，它将*模拟*上面的布局。我有一个自定义`ExpandableListView`适配器，我将其修改为可以模拟上述布局的东西。这是原始的东西，所以可能会有一些错误（我已经测试了一点），当然还有其他事情要做。代码示例有点大，所以我把它放在这里[https://gist.github.com/3046887](https://gist.github.com/3046887)。

# jquery - REST AJAX 跨域不执行回调

> ID：11324546
> 
> 赞同：0
> 
> 时间：2012-07-04T07:42:17.027
> 
> 标签：jquery, ajax, rest, callback, cross-domain

我在使用 Jquery ajax 函数执行跨域 REST 调用时遇到了很多麻烦。

这是代码：

```
 $.ajax({
            url: restUrl,
                type: 'GET',
                crossDomain : true,
                dataType: 'jsonp',
                jsonp: false,
                jsonpCallback: 'jsonpCallbackTest',
                error: function(xhr, status, error) {
                    console.log('not OK '+xhr);
                    console.log('not OK '+status);
                    console.log('not OK '+error);
                },
                success: function(jsonp) {
                    alert("success");
                }
            }); 
```

这就是我在 Firebug 控制台中得到的：

不正常 [object Object] Init.js:872
不正常 parsererror Init.js:873
不正常 错误：未调用 jsonpCallbackTest

我究竟做错了什么？

关于 Matej

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T07:44:44.610

> 我究竟做错了什么？

从您在问题中提供的代码信息很难说。可能有很多原因。例如，您尝试调用的远程 REST Web 服务返回 JSON 响应而不是 JSONP。

此外，您似乎已经定义了该`jsonpCallbackTest`函数，但您使用的是不兼容的匿名成功处理程序。试试这样：

```
$.ajax({
    url: restUrl,
    type: 'GET',
    jsonpCallback: 'jsonpCallbackTest',
    error: function(xhr, status, error) {
        console.log('not OK '+xhr);
        console.log('not OK '+status);
        console.log('not OK '+error);
    }
}); 
```

然后定义 jsonpCallbackTest 函数：

```
function jsonpCallbackTest(jsonp) {
    alert("success");
} 
```

您还必须查看远程 Web 服务的文档如何指定 JSONP 回调。是否可以将其作为查询字符串参数传递。

通常最好让 jQuery 将随机回调函数名称传递给 Web 服务：

```
$.ajax({
    url: restUrl,
    type: 'GET',
    dataType: 'jsonp',
    success: function(json) {
        alert("success");
    },
    error: function(xhr, status, error) {
        console.log('not OK '+xhr);
        console.log('not OK '+status);
        console.log('not OK '+error);
    }
}); 
```

# c# - 无状态或有状态 C# 角色

> ID：11324547
> 
> 赞同：2
> 
> 时间：2012-07-04T07:42:19.700
> 
> 标签：c#, asynchronous, stateless

我正在设计一个项目，它将同时激活和控制许多异步参与者。

我想问一下，我应该使用哪种方法来获得更高的稳定性和可扩展性？

无状态还是有状态？

据我所知，它看起来像：

一个。有状态的

```
Actor _act = new Actor (long key);

_act.DoSomething (object _what); 
```

湾。无状态

```
Actor _act = new Actor (long key);

_act = _act.DoSomething(object _what); 
```

据我所知，第二种方法很昂贵 - 内存保留等。但是这种第二种方法允许不要担心状态和锁。

dotnet 哪种方式更可取？要达到的参与者目标数量约为 100k，一个节点每秒执行 2.5-3 mils 操作。

PS 每个参与者都有其有限状态机来计算。

对于有状态的，它由定期异步委托调用

对于无状态，它要求每个操作都考虑到时间维度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-22T17:05:57.523

Actor 编程模型基于每个 Actor 应该是具有自包含“状态”的唯一且独立的计算实体的想法。很难根据您提供的代码片段来判断您可能实际获得的好处是通过使用一种技术而不是另一种技术，但在我看来，至少您通过不将它们的状态封装在其中而在某种程度上挫败了 Actors 的想法这样您就可以利用诸如无锁代码之类的东西。

# asp.net - OnPreRender 与 Page_PreRender

> ID：11324556
> 
> 赞同：3
> 
> 时间：2012-07-04T07:42:56.683
> 
> 标签：asp.net

我知道 Page PreRender 事件以及重写 OnPreRender，但不知道 Page_PreRender 方法的存在。最近在浏览这个论坛时，我发现并搜索了两者之间的区别，但没有得到太多？

这是我的观察：

我有一个标签为 Label1 的页面。

场景一：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        Label1.Text = "load ";
    }
    protected override void OnPreRender(EventArgs e)
    {
        Label1.Text += "OnPreRender ";
        base.OnPreRender(e);
    }
    private void Page_PreRender(object sender, System.EventArgs e)
    {
        Label1.Text += "Page_PreRender ";
    } 
```

Lable1 的值将是：加载 OnPreRender Page_PreRender

场景二：

```
 protected void Page_Load(object sender, EventArgs e)
        {
            Label1.Text = "load ";
        }
        protected override void OnPreRender(EventArgs e)
        {
            base.OnPreRender(e);
            Label1.Text += "OnPreRender ";
        }
        private void Page_PreRender(object sender, System.EventArgs e)
        {
            Label1.Text += "Page_PreRender ";
        } 
```

注意base.OnPreRender(e)的调用顺序；

Lable1 的值将是：加载 Page_PreRender OnPreRender

我只能说 base.OnPreRender(e) 调用的是 Page_PreRender()，但它不是私有的吗？

有人可以告诉，两者之间有什么区别以及何时使用哪个？一般应该使用哪一种？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T08:05:05.970

页面的`OnPreRender`方法负责引发`Page_PreRender`事件。

通常您应该只订阅该`Page_PreRender`事件。

如果您需要在安全引发 Page_PreRender 事件之前进行一些特殊处理，那么您可以重写 OnPreRender 方法并在调用之前进行处理`base.OnPreRender(e)`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T07:45:44.763

为您的页面设置`Page_`时调用事件。`AutoEventWireup="true"`这就是您可以创建它们并在没有明确连接的情况下调用它们的方法。

# node.js - ZombieJS 和 Qunit 集成

> ID：11324557
> 
> 赞同：3
> 
> 时间：2012-07-04T07:43:03.610
> 
> 标签：node.js, testing, qunit, headless, zombie.js

有没有人将 QUnit 测试与 ZombieJS 集成？我有一个脚本，所以我想传递一个“tests.html”文件并进行轮询，直到测试完成，然后阅读结果。类似于我用 PhantomJS 做的事情，它工作得很好。我主要想比较 Phantom 和 Zombie 的性能。此外，我们已经创建了很多 Qunit 测试，所以我不想只是转储它们并在 Zombie 环境中从头开始重写所有内容（如果我决定首先去做的话：）

我面临的问题是我的测试永远不会完成，所以 Qunit 总是处于运行状态。还没有详细调试任何东西，但只是想确保我没有遗漏一些明显的东西。

```
var Browser = require("zombie");
var assert = require("assert");

// Load the page from localhost
browser = new Browser();

function waitFor(testFx, onReady, timeOutMillis) {
    var maxtimeOutMillis = timeOutMillis ? timeOutMillis : 100000, //< Default Max Timout is 3s
        start = new Date().getTime(),
        condition = false,
        interval = setInterval(function() {
            if ( (new Date().getTime() - start < maxtimeOutMillis) && !condition ) {
                // If not time-out yet and condition not yet fulfilled
                condition = (typeof(testFx) === "string" ? eval(testFx) : testFx()); //< defensive code
            } else {
                if(!condition) {
                    // If condition still not fulfilled (timeout but condition is 'false')
                    console.log("'waitFor()' timeout");
                    process.exit(1);
                } else {
                    // Condition fulfilled (timeout and/or condition is 'true')
                    console.log("'waitFor()' finished in " + (new Date().getTime() - start) + "ms.");
                    typeof(onReady) === "string" ? eval(onReady) : onReady(); //< Do what it's supposed to do once the condition is fulfilled
                    clearInterval(interval); //< Stop this interval
                }
            }
        }, 100); //< repeat check every 250ms
};

browser.visit("tests.html", function () {

 waitFor(function(){
            return browser.evaluate(function(){
                var el = browser.document.getElementById('qunit-testresult');
                if (el && el.textContent.match('completed')) {
                    return true;
                }
                return false;
            });
        }, function(){
            var failedNum = browser.evaluate(function(){
                var el = browser.document.getElementById('qunit-testresult');
                console.log(el.textContent);
                try {
                    return el.getElementsByClassName('failed')[0].innerHTML;
                } catch (e) { }
                return 10000;
            });
            process.exit((parseInt(failedNum, 10) > 0) ? 1 : 0);
        });
}); 
```

# java - SoundCloud 503 - 服务不可用

> ID：11324558
> 
> 赞同：1
> 
> 时间：2012-07-04T07:43:13.030
> 
> 标签：java, soundcloud

当我请求 SoundCloud API 时，有时会出现“错误 503 - 服务不可用”。它是什么以及如何修复？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T07:56:32.367

HTTP 503 表示网络服务器超载或正在维护中。这也意味着您无法解决根本问题。（除了可能尝试执行更少的请求之外）

# jquery - jQuery 如果 div 包含此文本，则替换该部分文本

> ID：11324559
> 
> 赞同：89
> 
> 时间：2012-07-04T07:43:14.570
> 
> 标签：jquery, text, replace, contains

正如标题所说，我想替换 div 中文本的特定部分。

结构如下所示：

```
<div class="text_div">
    This div contains some text.
</div> 
```

例如，我只想将“包含”替换为“大家好”。我找不到解决方案。

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2012-07-04T07:45:48.707

您可以使用该[`text`](http://api.jquery.com/text/)方法并传递一个返回修改后文本的函数，使用本机[`String.prototype.replace`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)方法执行替换：

```
​$(".text_div").text(function () {
    return $(this).text().replace("contains", "hello everyone"); 
});​​​​​ 
```

这是一个[工作示例](http://jsfiddle.net/jamesallardice/wQns7/)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-04T07:46:11.267

如果可能，您可以将要替换的单词包装在 span 标记中，如下所示：

```
<div class="text_div">
    This div <span>contains</span> some text.
</div> 
```

然后，您可以使用 jQuery 轻松更改其内容：

```
$('.text_div > span').text('hello everyone'); 
```

如果不能将其包装在 span 标签中，则可以使用正则表达式。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-04-17T16:28:10.983

非常简单，只需使用此代码，它将保留 HTML，同时仅删除未包装的文本：

```
jQuery(function($){

    // Replace 'td' with your html tag
    $("td").html(function() { 

    // Replace 'ok' with string you want to change, you can delete 'hello everyone' to remove the text
          return $(this).html().replace("ok", "hello everyone");  

    });
}); 
```

这是完整的示例：[https ://blog.hfarazm.com/remove-unwrapped-text-jquery/](https://blog.hfarazm.com/remove-unwrapped-text-jquery/)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-07-04T07:45:22.133

```
var d = $('.text_div');
d.text(d.text().trim().replace(/contains/i, "hello everyone")); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-04T07:47:52.553

您可以使用[contains 选择器](http://api.jquery.com/contains-selector/)搜索包含特定文本的元素

```
var elem = $('div.text_div:contains("This div contains some text")')​;
elem.text(elem.text().replace("contains", "Hello everyone")); 
```

​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​。

# php - 使用带有空格的 jQuery 发送 Get

> ID：11324561
> 
> 赞同：0
> 
> 时间：2012-07-04T07:43:40.077
> 
> 标签：php, javascript, jquery, html

我有一个使用 jQuery 的字数统计问题。一旦我单击空格，该方法就会起作用，它将停止。

HTML：

```
<textarea id="essay_content_area" name="essay_content" onkeydown="words();"></textarea>
<td>Number of words: <div id="othman"></div></td> 
```

jQuery：

```
function words(content)
{
    var f = $("#essay_content_area").val()
    $('#othman').load('wordcount.php?content='+f);
} 
```

PHP 文件：

```
if(isset($_GET['content']))
{
        echo $_GET['content']; // if it works I will send this variable to a function to calculate the words 
} 
```

脚本显示内容，直到我单击空格。有什么建议么 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T07:48:39.307

在将值作为`GET`参数值发送到 PHP 脚本之前，您需要对该值进行 url 编码。考虑一下：

```
function words(content)
{
    var f = $("#essay_content_area").val()
    $('#othman').load('wordcount.php?content=' + encodeURIComponent(f));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T07:53:11.823

您不需要 php 来计算可以使用 JS 的单词，如下所示：

```
function words(content)
{
   // Get number of words.
   var words = content.split(" ").length;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T07:53:43.940

您需要在发送变量之前对其进行 url 编码（空格不是有效的 url 字符）：

```
function words(content)
{
    var f = encodeURIComponent($("#essay_content_area").val());
    $('#othman').load('wordcount.php?content='+f);
} 
```

# visual-studio-2008 - 项目“输出目录”和“中间目录”的默认配置保存在哪里？

> ID：11324562
> 
> 赞同：0
> 
> 时间：2012-07-04T07:43:41.693
> 
> 标签：visual-studio-2008, projects-and-solutions

我试图为 VS 2008 中的新 Visual C++ 项目更改以下默认配置

1.  输出目录 [当前：$(SolutionDir)$(ConfigurationName)]
2.  中间目录 [当前：$(ConfigurationName)]

默认模板项目不包含此设置。而且我找不到任何相关文件（.props 或 .vsprops）。我相信它可以连接到可用的平台 [Win32|x64]。

请注意，我需要一个解决方案来指向并更改配置，而不是在外部模板中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T20:01:26.240

它确实连接到可用的平台。安装的平台位于 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\VisualStudio\9.0\VC\VC_OBJECTS_PLATFORM_INFO{Platform-Identifier} ：CLSID 指向 %ProgramFiles%\Microsoft Visual Studio 9.0\VC\vcpackages\ **VCProjectEngine.dll 之类**的 DLL 。这是“项目配置提供程序”。它实现了接口的各种组件。例如，“get_DisplayName”在 GUI 中显示配置名称。

像“输出目录”和“输入目录”这样的默认配置在这个二进制文件中是**硬编码的。**

# c# - SQL CLR 项目，目录服务无法识别

> ID：11324564
> 
> 赞同：1
> 
> 时间：2012-07-04T07:43:53.597
> 
> 标签：c#, sqlclr

我使用 Visual Studio 2010 创建了一个 SQL CRL 项目，该项目将根据 sql 数据库上的触发器更新 Active Directory 直接管理器属性。

我为数据库注册了程序集

```
use [MyDatabase]
CREATE ASSEMBLY [System.DirectoryServices] 
FROM 'C:\Windows\Microsoft.NET\Framework\v2.0.50727\System.DirectoryServices.dll' 
WITH PERMISSION_SET = UNSAFE 
GO 
```

我添加了`System.DirectoryServices`解决方案，但是在命名空间中无法识别它的问题，所以继续

> 找不到类型或命名空间名称“DirectoryEntry”（您是否缺少 using 指令或程序集引用？）

目标框架是 3.5，CPU 是 Any

# php - 多维数组搜索以保留父级

> ID：11324567
> 
> 赞同：1
> 
> 时间：2012-07-04T07:44:13.843
> 
> 标签：php, arrays, multidimensional-array, filter, vtiger

## TL;博士

我有这些数据：[var_export](http://pastebin.com/aUEpH7fG)和[print_r](http://pastebin.com/3iTDUUgw)。

我需要将其缩小到： http: [//pastebin.com/EqwgpgAP](http://pastebin.com/EqwgpgAP) ($data['Stock Information:'][0][0]);

一个人将如何实现它？（动态）

* * *

我正在使用 vTiger 5.4.0 CRM 并希望实现一个函数，该函数将根据搜索条件返回特定字段信息。

好吧，vTiger 是一个写得很弱的系统，看起来和感觉都很老旧，一切都来自数百个具有多个连接的表（这实际上并没有那么糟糕）等等，但工作就是工作。

需要`usageunit`从产品模块、库存信息块中获取选项列表。

由于没有这样的功能`getField();`，我期待将其从 Blocks 中过滤掉，这实际上也是在收集有关字段的信息。

`getBlocks();`然后调用 something close to `getFields();`，再次调用 something close to`getValues();`等等。

所以...

```
$focus = new $currentModule(); // Products
$displayView = getView($focus->mode);
$productsBlocks = getBlocks($currentModule, $displayView, $focus->mode, $focus->column_fields); // in theory, $focus->column_fields should/could be narrowed down to my specific field, but vTiger doesn't work that way

echo "<pre>"; print_r($productsBlocks); echo "</pre>"; // = http://pastebin.com/3iTDUUgw (huge dump) 
```

如您所见，键 下的数组`[Stock Information:]`实际上来自翻译（yada，yada ...），下`[0][0]`包含 的信息`usageunit`。

现在，我试图`array_filter();`从那里取出数据，但我设法得到的唯一东西被`$productsBlocks`剥离为只包含`[Stock Information:]`所有数据：

```
$getUsageUnit = function($value) use (&$getUsageUnit) {
    if(is_array($value)) return array_filter($value, $getUsageUnit);

    if($value == 'usageunit') return true;
};

$productsUsageUnit = array_filter($productsBlocks, $getUsageUnit);

echo "<pre>"; print_r($productsUsageUnit); echo "</pre>"; // = http://pastebin.com/LU6VRC4h (not that huge of a dump) 
```

而且，我期待的结果是[http://pastebin.com/EqwgpgAP](http://pastebin.com/EqwgpgAP)，这是我手动获得的`print_r($productsUsageUnit['Stock Information:'][0][0]);`。

* * *

我如何实现这一目标？（动态...）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T08:14:38.727

```
function helper($data, $query) {
  $result = array();

  $search = function ($data, &$stack) use(&$search, $query) {
    foreach ($data as $entry) {
      if (is_array($entry) && $search($entry, $stack) || $entry === $query) {
        $stack[] = $entry;
        return true;
      }
    }

    return false;
  };

  foreach ($data as $sub) {
    $parentStack = array();
    if ($search($sub, $parentStack)) {
      $result[] = $parentStack[sizeof($parentStack) - 2];
    }
  }

  return $result;
}

$node = helper($data, 'usageunit');
print_r($node); 
```

# php - 如何制作替换图像标签的模式

> ID：11324570
> 
> 赞同：0
> 
> 时间：2012-07-04T07:44:21.240
> 
> 标签：php, regex

我需要更换 img 标签。原始标签例如：

```
<img src="index.php?act=img&amp;sub=article&id=35558" width="150" height="172"> 
```

然后我想将其替换为：

```
<img src="index.php?act=img&amp;sub=article&amp;id=35558" style="width: 150px; height: 172"/> 
```

src 中的 id 是可变的。
我不知道如何定义正确的模式，我尝试了几个但没有一个成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T07:47:54.720

请，正则表达式不是这类事情的正确工具。解析简单的东西时应该使用正则表达式，HTML 无论如何都不是正则语言。

请阅读[这篇](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php "本文")关于使用 PHP 解析 HTML 的文章

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T08:16:51.683

这应该有效：

```
$img1 = '<img src="index.php?act=img&amp;sub=article&id=35558" width="150" height="172">';
$img2 = preg_replace('/\<img([^>]+)(width|height)="(\d+)"([^>]*)(width|height)="(\d+)"([^>]*)\>/i', '<img$1 style="$2:$3px;$5:$6px"$4$7>', $img1); 
```

参数（或任何附加）的顺序在这里无关紧要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T07:55:57.593

这是想要的方式：P 但不建议使用正则表达式来服务您的目的。

```
<?php
$string = '<img src="index.php?act=img&amp;sub=article&id=35558" width="150" height="172">';
echo $resultString = preg_replace(array('/\&id\b/i','/width="150" height="172"/i'), array('&amp;id','style="width: 150px; height: 172"'), $string); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T07:51:31.477

我认为您正在寻找正则表达式模式，以便您可以使用 preg_match 来重建标签？在这种情况下，这样的事情应该：

```
preg_match('/src="(.+?)".+?width="(.+?)".+?height="(.+?)"/i', $str, $matches);
```

然而，一旦这些属性开始改变顺序，这个正则表达式就不再起作用了。如果可能，最好通过 PHP 解析 HTML。

# android - 路径修改

> ID：11324573
> 
> 赞同：0
> 
> 时间：2012-07-04T07:44:31.143
> 
> 标签：android, andengine

我想计算精灵在特定时间段内到达上一个目的地时的新点。我怎样才能做到这一点？

例如，我不想先计算路径，而是想在特定持续时间结束后计算它。

```
PathModifier(bugduration, path, null, new IPathModifierListener() 
{
    public void onWaypointPassed(final PathModifier pPathModifier,final IShape pShape, final int pWaypointIndex) {
        ......
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:07:42.343

您可以使用 onPathFinished() {} 并在先前完成后创建新路径。也许这不是一个很好的选择，但它对我有用。

* * *

我写了一些代码：

```
function go() {
   HashMap<float, float> coords = calcNewCoords();
   path = new Path(2).to(currentPosX, currentPosY).to(coords.get("toX"),coords.get("yoY"));
   time = calcTime();
   petSprite.registerEntityModifier(new PathModifier(time, 
            path, null, new IPathModifierListener() {
       @Override
        public void onPathWaypointFinished(PathModifier pPathModifier,
                IEntity pEntity, int pWaypointIndex) {
            // TODO Auto-generated method stub
            rest();
        }
   }));
}

function rest() {
   ....
   go();
} 
```

类似的东西......这不是我真正的代码......但我已经尝试过 onPathWaypointFinished() 并且它有效！！！！我的游戏中有一个角色会随机走到随机位置，然后休息并转到另一点......

# sql-server - 在 SQL Server 数据库中搜索列值

> ID：11324584
> 
> 赞同：0
> 
> 时间：2012-07-04T07:45:05.870
> 
> 标签：sql-server

我想查找特定数据，例如国家名称“西班牙”或任何人名，例如“约翰”

那么有没有办法找到哪个表的列包含数据`Spain`或`John`在 SQL Server 数据库中（记住这些不是列名，这些是存储在列中的值）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T07:58:08.033

试试下面的存储过程，[我在这里找到了](http://vyaskn.tripod.com/search_all_columns_in_all_tables.htm)。

```
CREATE PROC SearchAllTables
(
    @SearchStr nvarchar(100)
)
AS
BEGIN

    -- Copyright © 2002 Narayana Vyas Kondreddi. All rights reserved.
    -- Purpose: To search all columns of all tables for a given search string
    -- Written by: Narayana Vyas Kondreddi
    -- Site: http://vyaskn.tripod.com
    -- Tested on: SQL Server 7.0 and SQL Server 2000
    -- Date modified: 28th July 2002 22:50 GMT

    CREATE TABLE #Results (ColumnName nvarchar(370), ColumnValue nvarchar(3630))

    SET NOCOUNT ON

    DECLARE @TableName nvarchar(256), @ColumnName nvarchar(128), @SearchStr2 nvarchar(110)
    SET  @TableName = ''
    SET @SearchStr2 = QUOTENAME('%' + @SearchStr + '%','''')

    WHILE @TableName IS NOT NULL
    BEGIN
        SET @ColumnName = ''
        SET @TableName = 
        (
            SELECT MIN(QUOTENAME(TABLE_SCHEMA) + '.' + QUOTENAME(TABLE_NAME))
            FROM    INFORMATION_SCHEMA.TABLES
            WHERE       TABLE_TYPE = 'BASE TABLE'
                AND QUOTENAME(TABLE_SCHEMA) + '.' + QUOTENAME(TABLE_NAME) > @TableName
                AND OBJECTPROPERTY(
                        OBJECT_ID(
                            QUOTENAME(TABLE_SCHEMA) + '.' + QUOTENAME(TABLE_NAME)
                             ), 'IsMSShipped'
                               ) = 0
        )

        WHILE (@TableName IS NOT NULL) AND (@ColumnName IS NOT NULL)
        BEGIN
            SET @ColumnName =
            (
                SELECT MIN(QUOTENAME(COLUMN_NAME))
                FROM    INFORMATION_SCHEMA.COLUMNS
                WHERE       TABLE_SCHEMA    = PARSENAME(@TableName, 2)
                    AND TABLE_NAME  = PARSENAME(@TableName, 1)
                    AND DATA_TYPE IN ('char', 'varchar', 'nchar', 'nvarchar')
                    AND QUOTENAME(COLUMN_NAME) > @ColumnName
            )

            IF @ColumnName IS NOT NULL
            BEGIN
                INSERT INTO #Results
                EXEC
                (
                    'SELECT ''' + @TableName + '.' + @ColumnName + ''', LEFT(' + @ColumnName + ', 3630) 
                    FROM ' + @TableName + ' (NOLOCK) ' +
                    ' WHERE ' + @ColumnName + ' LIKE ' + @SearchStr2
                )
            END
        END 
    END

    SELECT ColumnName, ColumnValue FROM #Results
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T08:00:11.363

创建此存储过程并传递您要查找的数据

```
/****** Object:  StoredProcedure [dbo].[FindMyData_String]    Script Date: 07/04/2012 12:58:59 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
Create PROCEDURE [dbo].[FindMyData_String]
    @DataToFind NVARCHAR(4000),
    @ExactMatch BIT = 0
AS
SET NOCOUNT ON

DECLARE @Temp TABLE(RowId INT IDENTITY(1,1), SchemaName sysname, TableName sysname, ColumnName SysName, DataType VARCHAR(100), DataFound BIT)

    INSERT  INTO @Temp(TableName,SchemaName, ColumnName, DataType)
    SELECT  C.Table_Name,C.TABLE_SCHEMA, C.Column_Name, C.Data_Type
    FROM    Information_Schema.Columns AS C
            INNER Join Information_Schema.Tables AS T
                ON C.Table_Name = T.Table_Name
        AND C.TABLE_SCHEMA = T.TABLE_SCHEMA
    WHERE   Table_Type = 'Base Table'
            And Data_Type In ('ntext','text','nvarchar','nchar','varchar','char')

DECLARE @i INT
DECLARE @MAX INT
DECLARE @TableName sysname
DECLARE @ColumnName sysname
DECLARE @SchemaName sysname
DECLARE @SQL NVARCHAR(4000)
DECLARE @PARAMETERS NVARCHAR(4000)
DECLARE @DataExists BIT
DECLARE @SQLTemplate NVARCHAR(4000)

SELECT  @SQLTemplate = CASE WHEN @ExactMatch = 1
                            THEN 'If Exists(Select *
                                          From   ReplaceTableName
                                          Where  Convert(nVarChar(4000), [ReplaceColumnName])
                                                       = ''' + @DataToFind + '''
                                          )
                                     Set @DataExists = 1
                                 Else
                                     Set @DataExists = 0'
                            ELSE 'If Exists(Select *
                                          From   ReplaceTableName
                                          Where  Convert(nVarChar(4000), [ReplaceColumnName])
                                                       Like ''%' + @DataToFind + '%''
                                          )
                                     Set @DataExists = 1
                                 Else
                                     Set @DataExists = 0'
                            END,
        @PARAMETERS = '@DataExists Bit OUTPUT',
        @i = 1

SELECT @i = 1, @MAX = MAX(RowId)
FROM   @Temp

WHILE @i <= @MAX
    BEGIN
        SELECT  @SQL = REPLACE(REPLACE(@SQLTemplate, 'ReplaceTableName', QUOTENAME(SchemaName) + '.' + QUOTENAME(TableName)), 'ReplaceColumnName', ColumnName)
        FROM    @Temp
        WHERE   RowId = @i

        PRINT @SQL
        EXEC SP_EXECUTESQL @SQL, @PARAMETERS, @DataExists = @DataExists OUTPUT

        IF @DataExists =1
            UPDATE @Temp SET DataFound = 1 WHERE RowId = @i

        SET @i = @i + 1
    END

SELECT  SchemaName,TableName, ColumnName
FROM    @Temp
WHERE   DataFound = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-29T09:32:03.100

只要我可以使用市场上已经存在的一些免费工具，我就不会为任何复杂的存储过程而烦恼。只需安装其中任何一个，您就可以更快地完成工作。

[SSMS 工具包](http://www.ssmstoolspack.com/Features?f=5)——仅搜索数据。除 2012 之外的所有版本均免费

[ApexSQL 搜索](http://www.apexsql.com/sql_tools_search.aspx) – 搜索对象和数据

还有来自 Red Gate 的 SQL Search，但我自己从未使用过。

# robotics - 设置Ros包路径

> ID：11324586
> 
> 赞同：0
> 
> 时间：2012-07-04T07:45:13.537
> 
> 标签：robotics, ros

我刚从 ros.org 开始探索 ROS。我在 Ubuntu 中设置环境时遇到了一些问题。每次启动新外壳时尝试自动设置工作区时出现以下错误。

bash：/opt/ros/fuerte/setup.bash：没有这样的文件或目录

bash：/opt/ros/fuerte/setup.bash：没有这样的文件或目录

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T10:20:50.010

可能您的 ROS 安装将此添加到您的 ~/.bashrc 文件中，并且 setup.bash 文件以某种方式被（重新）移动了。尝试找到该文件并相应地更改路径。这应该设置所需的环境变量以运行 ROS（核心）等。检查 answers.ros.org 以获取与 ROS 相关的问答。wiki 也是一个很好的信息来源：www.ros.org/wiki。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T14:55:21.523

首先，打开终端并输入以下命令：

```
gedit .bashrc 
```

然后按 Ctrl + F 并搜索 fuerte。删除有关 fuerte 的所有内容。富尔特老了，下载新版groovy..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-21T09:44:18.593

检查您安装了哪个版本的 ROS。有更新版本的 ROS，例如 ROS groovy。可能您安装了一个新的，但请按照旧 ROS fuerte 的指南进行操作。首先确保您安装了哪个发行版。

# python - AttributeError : 类实例没有 __call__ 方法

> ID：11324589
> 
> 赞同：10
> 
> 时间：2012-07-04T07:45:22.680
> 
> 标签：python, oop, python-2.7, pygame, attributeerror

我对python有点陌生，但熟悉OOP。我正在尝试使用 PyGame 编写游戏。基本上，我的目标是每隔几秒渲染一次树，然后在屏幕上移动树的矩形。

所以这是我的代码：

```
from collections import deque
import pygame,random,sys

pygame.init()
size = 800,600
screen = pygame.display.set_mode(size)

class tree:
    def __init__(self):
            self.img = pygame.image.load("tree.png")
            self.rect = self.img.get_rect()
    def render(self):
            screen.blit(self.img,self.rect)
    def move(self,x,y):
            self.rect = self.rect.move(x,y)

#creating a queue of trees
trees = deque()

#appending the first tree on to the queue 
trees.append(tree())

while 1:

    for event in pygame.event.get():
            if event.type == pygame.QUIT: sys.exit()

    #appending tree() to trees queue every 300 ms
    if pygame.time.get_ticks() % 300 == 0:
            trees.append(tree())

    #rendering and moving all the tree rects of trees in the queue
    for tree in trees:
            tree.render()
            tree.move(20,2)
    pygame.display.flip() 
```

但是当我执行此操作时，前几棵树已成功生成，但 PyGame 窗口关闭，我收到此错误：

```
Traceback (most recent call last):
File "error.py", line 25, in <module>
trees.append(tree())
AttributeError: tree instance has no __call__ method 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-04T07:51:00.650

我猜这是因为你有一个变量名`tree`（在 中使用`tree.render()`）与你的类名冲突。调用它`Tree`会更好（并且更pythonic ^^）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T07:50:40.880

您可能希望`tree`在循环中调用变量而`for`不是`tree`. 它隐藏了类名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T07:52:18.737

你的上下文被污染了

```
while 1:
    for event in pygame.event.get():
        if event.type == pygame.QUIT: sys.exit()

    #appending tree() to trees queue every 300 ms
    if pygame.time.get_ticks() % 300 == 0:
        trees.append(tree()) <----------------------- second time, this tree is not your class, but the last instance of tree

    #rendering and moving all the tree rects of trees in the queue
    for tree in trees: <-------------------- here, the last tree will get name with tree
        tree.render()
        tree.move(20,2) 
    pygame.display.flip() 
```

the compiler may thinks you are not init the class, but calls its **call** function.

# facebook - Facebook 评论数始终显示为 0

> ID：11324590
> 
> 赞同：1
> 
> 时间：2012-07-04T07:45:22.970
> 
> 标签：facebook, comments, facebook-comments

我一直在尝试在我的网站上实现 facebook 评论计数功能（使用 html 和 C#）。这是一个动态页面，由后面的代码创建，如下所示：

```
tmpGuides = tmpGuides + "<img src=\"images/comments.gif\" alt=\"\" style=\"vertical-align: baseline;\" />" + "<fb:comments-count href=http://www.someexamplesite.com/article.aspx?=1909/> </fb:comments-count> "; 
```

它总是显示 0 而不是实际的评论数量。

我现在正在本地机器上工作，但我尝试将代码上传到生产环境，但它仍然无法正常工作。我还尝试了对地址进行 url 编码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T09:20:16.827

您似乎确实有正确的语法。您确定您使用的网址肯定有评论吗？

按照[facebook 上的文档](https://developers.facebook.com/docs/reference/plugins/comments/)，在“**如何访问页面左侧的评论数量？** ”标题下，您可以看到以下代码适用于“example.com”：

```
<div id="fb-root"></div>
    <script>
    (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1";
      fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));
    </script>
<fb:comments-count href="http://example.com/"></fb:comments-count> awesome comments 
```

如果您可以尝试让它为 example.com 工作，那么您就知道您的代码没有问题，并且您指定的 url 很可能没有评论。

# styles - OpenLayers 的样式修改功能（拖动）

> ID：11324591
> 
> 赞同：1
> 
> 时间：2012-07-04T07:45:23.530
> 
> 标签：styles, openlayers

当我使用拖动功能时，多边形边缘上的圆圈具有相同的样式。例如，[这个 OpenLayers 站点](http://openlayers.org/dev/examples/modify-feature.html)。我需要改变它，我的意思是它们需要不同的颜色。他们的（循环）样式属性是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T07:46:57.660

这就是我的做法：

```
var layer_style = OpenLayers.Util.extend({},OpenLayers.Feature.Vector.style['default']);

layer_style.fillColor = "#333333";
layer_style.strokeColor = "#F62958";
layer_style.strokeOpacity = 0.75;
layer_style.fillOpacity = 0.5;
layer_style.strokeWidth = 5;
layer_style.pointRadius = 3; 

layers_layer = osMap.getVectorLayer();

layers_layer.style = layer_style; 
```

lines_layer 也可以是一个新层，只要它是您要修改的项目所在的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T21:52:48.077

事实上，OpenLayers 有非常不合逻辑的文档，有时甚至没有文档。以下是所有样式参数：[OpenLayers.Feature.Vector](http://dev.openlayers.org/apidocs/files/OpenLayers/Feature/Vector-js.html)

```
fill    {Boolean} Set to false if no fill is desired.
fillColor   {String} Hex fill color.  Default is “#ee9900”.
fillOpacity {Number} Fill opacity (0-1).  Default is 0.4
stroke  {Boolean} Set to false if no stroke is desired.
strokeColor {String} Hex stroke color.  Default is “#ee9900”.
strokeOpacity   {Number} Stroke opacity (0-1).  Default is 1.
strokeWidth {Number} Pixel stroke width.  Default is 1.
strokeLinecap   {String} Stroke cap type.  Default is “round”.  [butt | round | square]
strokeDashstyle {String} Stroke dash style.  Default is “solid”.  [dot | dash | dashdot | longdash | longdashdot | solid]
graphic {Boolean} Set to false if no graphic is desired.
pointRadius {Number} Pixel point radius.  Default is 6.
pointerEvents   {String} Default is “visiblePainted”.
cursor  {String} Default is “”.
externalGraphic {String} Url to an external graphic that will be used for rendering points.
graphicWidth    {Number} Pixel width for sizing an external graphic.
graphicHeight   {Number} Pixel height for sizing an external graphic.
graphicOpacity  {Number} Opacity (0-1) for an external graphic.
graphicXOffset  {Number} Pixel offset along the positive x axis for displacing an external graphic.
graphicYOffset  {Number} Pixel offset along the positive y axis for displacing an external graphic.
rotation    {Number} For point symbolizers, this is the rotation of a graphic in the clockwise direction about its center point (or any point off center as specified by graphicXOffset and graphicYOffset).
graphicZIndex   {Number} The integer z-index value to use in rendering.
graphicName {String} Named graphic to use when rendering points.  Supported values include “circle” (default), “square”, “star”, “x”, “cross”, “triangle”.
graphicTitle    {String} Tooltip when hovering over a feature.  deprecated, use title instead
title   {String} Tooltip when hovering over a feature.  Not supported by the canvas renderer.
backgroundGraphic   {String} Url to a graphic to be used as the background under an externalGraphic.
backgroundGraphicZIndex {Number} The integer z-index value to use in rendering the background graphic.
backgroundXOffset   {Number} The x offset (in pixels) for the background graphic.
backgroundYOffset   {Number} The y offset (in pixels) for the background graphic.
backgroundHeight    {Number} The height of the background graphic.  If not provided, the graphicHeight will be used.
backgroundWidth {Number} The width of the background width.  If not provided, the graphicWidth will be used.
label   {String} The text for an optional label.  For browsers that use the canvas renderer, this requires either fillText or mozDrawText to be available.
labelAlign  {String} Label alignment.  This specifies the insertion point relative to the text.  It is a string composed of two characters.  The first character is for the horizontal alignment, the second for the vertical alignment.  Valid values for horizontal alignment: “l”=left, “c”=center, “r”=right.  Valid values for vertical alignment: “t”=top, “m”=middle, “b”=bottom.  Example values: “lt”, “cm”, “rb”.  Default is “cm”.
labelXOffset    {Number} Pixel offset along the positive x axis for displacing the label.  Not supported by the canvas renderer.
labelYOffset    {Number} Pixel offset along the positive y axis for displacing the label.  Not supported by the canvas renderer.
labelSelect {Boolean} If set to true, labels will be selectable using SelectFeature or similar controls.  Default is false.
labelOutlineColor   {String} The color of the label outline.  Default is ‘white’.  Only supported by the canvas & SVG renderers.
labelOutlineWidth   {Number} The width of the label outline.  Default is 3, set to 0 or null to disable.  Only supported by the canvas & SVG renderers.
fontColor   {String} The font color for the label, to be provided like CSS.
fontOpacity {Number} Opacity (0-1) for the label
fontFamily  {String} The font family for the label, to be provided like in CSS.
fontSize    {String} The font size for the label, to be provided like in CSS.
fontStyle   {String} The font style for the label, to be provided like in CSS.
fontWeight  {String} The font weight for the label, to be provided like in CSS.
display {String} Symbolizers will have no effect if display is set to “none”.  All other values have no effect. 
```

# java - Java转换字符串，具有毫秒到日期对象

> ID：11324592
> 
> 赞同：1
> 
> 时间：2012-07-04T07:45:27.450
> 
> 标签：java, string, date

我有 2 个字符串

*   2012-06-25 15:02:22.948
*   +0530

我需要一个新字符串，它将 5:30 添加到第一个字符串中的时间。

我想我可以通过将两个字符串都转换为日期对象然后添加来做到这一点。但我不知道该怎么做，就像我使用时一样

yyyy MM dd hh:mm:ss 作为第一个字符串的日期格式，我得到一个错误。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T07:52:42.250

字符串的格式`2012-06-25 15:02:22.948`不是`yyyy MM dd hh:mm:ss`，因此出现“错误”也就不足为奇了（这是什么错误？越具体，人们就能更好地帮助您！）。

试试`yyyy-MM-dd HH:mm:ss.SSS`。请参阅[API 文档`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)以了解格式字符串的确切语法。

注意：大写和小写在格式字符串中很重要。`hh`表示 12 小时制，`HH`表示 24 小时制。如果您使用，则无法`hh`解析小时数。`15`您也没有`SSS`在格式字符串中包含毫秒。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T08:03:41.793

您可以合并您的字符串 String1+string2 并且可以使用格式`yyyy-MM-dd HH:mm:ss.SSSZ`来解析日期。[您可以在此处](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)查看更多文档

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T08:53:51.027

尝试这个：

```
 DateFormat format = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss.SSS");
    Date date = format.parse("2012-06-25 15:02:22.948");
    Calendar calendar = new GregorianCalendar();
    calendar.setTimeInMillis(date.getTime());

    int time = Integer.parseInt("0530");
    int hour = time / 100;
    int minute = time % 100;

    calendar.add(Calendar.HOUR_OF_DAY, hour);
    calendar.add(Calendar.MINUTE, minute);

    String newDateInString = format.format(calendar.getTime()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T07:53:06.920

你得到一个例外，因为你的日期格式字符串是错误的。你在表格上给出了一个日期字符串

```
"yyyy-MM-dd hh:mm:ss.S" 
```

请参阅[SimpleDateFormat javadoc](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-29T01:55:53.067

其他答案是正确的，但已过时。

# java.time

与 Java 的最早版本捆绑在一起的旧日期时间类（java.util.Date/.Calendar 等）现在是遗留的。

那些旧类已被[java.time](http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html)包所取代。请参阅[Oracle 教程](http://docs.oracle.com/javase/tutorial/datetime/TOC.html)。大部分功能已在 ThreeTen-Backport 中向后移植到 Java 6 和 7，并在[ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP)[中](http://www.threeten.org/threetenbp/)进一步适应 Android 。

## `LocalDateTime`

该类[`LocalDateTime`](http://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html)表示没有时区的日期时间。将它们用于第一件。

您的格式接近标准[ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)格式，只需将 SPACE 替换为`T`.

```
String input = "2012-06-25 15:02:22.948";
String inputStandardized = input.replace( " " , "T" );
LocalDateTime ldt = LocalDateTime.parse( inputStandardized ); 
```

## 与 UTC 的偏移量

另一部分是[offset-from-UTC](https://en.wikipedia.org/wiki/UTC_offset)。我们为此使用[`ZoneOffset`](http://docs.oracle.com/javase/8/docs/api/java/time/ZoneOffset.html)该类。

```
ZoneOffset offset = ZoneOffset.of( "+0530" ); 
```

如果没有偏移或时区，`LocalDateTime`则*不是*时间线上的实际时刻，而是关于可能时刻的粗略想法。现在我们添加您[的从 UTC 偏移量](https://en.wikipedia.org/wiki/UTC_offset)[`OffsetDateTime`](http://docs.oracle.com/javase/8/docs/api/java/time/OffsetDateTime.html)来标记一个由类表示的实际时刻。

```
OffsetDateTime odt = OffsetDateTime.of( ldt , offset ); 
```

## 分区

时区是一个偏移量*加上*处理异常的规则，例如夏令时 (DST)。所以最好使用时区而不是仅仅使用偏移量。

例如，如果已知此数据的上下文是[India](https://en.wikipedia.org/wiki/Time_in_India)的时间，请使用时区，例如[`Asia/Kolkata`](https://en.wikipedia.org/wiki/Asia/Kolkata)获取[`ZonedDateTime`](http://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html).

```
ZoneId zoneId = ZoneId.of( "Asia/Kolkata" );
ZonedDateTime zdt = odt.atZoneSameInstant( zoneId ); 
```

# blackberry-eclipse-plugin - 黑莓示例应用程序在模拟器中执行，但是当我尝试在 playbook 设备中加载时没有响应或没有错误

> ID：11324595
> 
> 赞同：0
> 
> 时间：2012-07-04T07:45:36.767
> 
> 标签：blackberry-eclipse-plugin, blackberry-playbook

黑莓示例应用程序在模拟器中执行，但是当我尝试在设备中加载时没有响应或没有错误。我正在使用剧本。我也尝试了各种选项，其中一个说使用桌面管理器，我也看到了不同的行为，直到我将剧本连接到我的电脑，应用程序菜单显示在桌面管理器的左侧，但是一旦剧本已连接应用程序图标消失。然后我尝试将 .alx / .cod 文件复制粘贴到 playbook 的下载文件夹，我从 PC 中删除了连接并使用设备中的文件管理器进行搜索，复制的文件未显示，但使用设备管理器连接时可以看到它们. 请帮助我在剧本中执行应用程序。我是开发bb应用程序的新手。我的目标是开发电话间隙应用程序。我的剧本操作系统是 2.0，我正在使用 BBEclipse 插件，

关于 phonegap 应用程序的另一个更新，我遵循了 wiki phonegap 文档中的步骤，最后当我尝试打包应用程序时（在获取所有密钥后，注册到服务器等）。这是看到的错误响应。请帮助解决这个问题。

```
C:\Documents and Settings\SMI 123 U\My Documents\Research In Motion\BlackBerry W
ebWorks SDK for TabletOS 2.2.0.5\bbwp>bbwp "C:\Documents and Settings\SMI 123 U\
Desktop\sample\sample.zip" -o "C:\Documents and Settings\SMI 123 U\Desktop"
[INFO]                  Parsing command line options
[INFO]                  Parsing bbwp.properties
[INFO]                  Validating WebWorks archive
[INFO]                  Parsing config.xml
[INFO]                  Populating application source
[INFO]                  Compiling WebWorks application
[INFO]                  Packaging the bar file
javax.imageio.IIOException: Can't read input file!
        at javax.imageio.ImageIO.read(Unknown Source)
        at net.rim.tumbler.airpackager.AirPackager.createSplashscreen(AirPackage
r.java:726)
        at net.rim.tumbler.airpackager.AirPackager.run(AirPackager.java:191)
        at net.rim.tumbler.WidgetPackager.go(WidgetPackager.java:152)
        at net.rim.tumbler.WidgetPackager.main(WidgetPackager.java:77)
[ERROR]                 Air Packager exception occurred 
```

我也尝试使用另一个命令

```
C:\Documents and Settings\SMI 123 U\My Documents\Research In Motion\BlackBerry W
ebWorks SDK for TabletOS 2.2.0.5\bbwp>bbwp "C:\Documents and Settings\SMI 123 U\
Desktop\sample\sample.zip" -g 12345678 -buildId 1 -o "C:\Documents and Settings\
SMI 123 U\Desktop"
[INFO]                  Parsing command line options
[INFO]                  Parsing bbwp.properties
[INFO]                  Validating WebWorks archive
[INFO]                  Parsing config.xml
[INFO]                  Populating application source
[INFO]                  Compiling WebWorks application
[INFO]                  Packaging the bar file
javax.imageio.IIOException: Can't read input file!
        at javax.imageio.ImageIO.read(Unknown Source)
        at net.rim.tumbler.airpackager.AirPackager.createSplashscreen(AirPackage
r.java:726)
        at net.rim.tumbler.airpackager.AirPackager.run(AirPackager.java:191)
        at net.rim.tumbler.WidgetPackager.go(WidgetPackager.java:152)
        at net.rim.tumbler.WidgetPackager.main(WidgetPackager.java:77)
[ERROR]                 Air Packager exception occurred 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T23:43:10.683

开发者支持论坛主题“[打包应用程序时出现新的 Webworks SDK 错误](http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/New-Webworks-SDK-Error-While-Packaging-Application/td-p/1027213)”为您提供了答案。

# c# - 在 C# 中删除数据网格视图中的选定行？

> ID：11324612
> 
> 赞同：4
> 
> 时间：2012-07-04T07:46:34.453
> 
> 标签：c#, winforms, visual-c#-express-2010

我目前正在使用此代码：

```
foreach (DataGridViewRow item in this.dataGridView1.SelectedRows)
{
    dataGridView1.Rows.RemoveAt(item.Index);
} 
```

我在第一列下有复选标记，但是使用此代码，它只会被选中。我如何让 Selected CheckBoxes*仅*与行一起删除？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T08:04:03.683

你想要类似的东西

```
for (int i = 0; i < dataGridView1.Rows.Count; i++)
{
    if (Convert.ToBoolean(dataGridView1.Rows[i]
                          .Cells[yourCheckBoxColIndex].Value) == true)
    {
        dataGridView1.Rows.RemoveAt(i); 
    }
} 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T07:58:56.807

尝试这样的事情：

```
foreach(DataGridViewRow row in this.dataGridView1.Rows)
{
    var checked = Convert.ToBoolean(row.Cells[0].Value); // Assuming the first column contains the Checkbox
    if(checked)
        dataGridView1.Rows.RemoveAt(row.Index);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T08:02:30.397

它可能是这样的......这是列表视图的一个例子，但是这个概念几乎就在那里。循环遍历该项目并找到复选框 id 并删除选中的那些。希望这可以帮助。

```
public void btnDeleteClick(object sender, EventArgs e)
    {
        // Iterate through the ListViewItem
        foreach (ListViewItem row in ListView1.Items)
        {
            // Access the CheckBox
            CheckBox cb = (CheckBox)row.FindControl("cbxID");
            if (cb != null && cb.Checked)
            {
                // ListView1.DataKeys[item.DisplayIndex].Values[0].ToString()
                try
                {

                }
                catch (Exception err)
                {

                }
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-08T13:46:37.453

**试试这个：**

```
if (dgv.SelectedRows.Count>0)
        {
            dgv.Rows.RemoveAt(dgv.CurrentRow.Index);
        } 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2021-08-01T19:22:27.357

```
int s = 1;
        for (int i = 0; i < dataGridView1.Rows.Count; i++)
        {
            for (int j = s - 1; j < dataGridView1.Rows.Count - 1; j++)
            {
                if (Convert.ToInt32(dataGridView1["Stok", j].Value) < 5)
                { s = j; dataGridView1.Rows.RemoveAt(j); break; }
            }
        }
        dataGridView1.Refresh(); 
```

# c# - 将 DLL 中的类传递给主机的 MAF

> ID：11324615
> 
> 赞同：1
> 
> 时间：2012-07-04T07:46:51.837
> 
> 标签：c#, .net, add-in, maf

我正在开发一个 MAF 应用程序，它在 DLL 中包含一个类。问题是，当某个插件公开的方法之一使用此类时。例子：

```
class A
{
    Property_1
    Property_2

    Method_X()
} 
```

我的 AddIn 有一个使用 A 类的方法

```
MyAddIn.Set(class A); 
```

那么，有了这个，我必须将 DLL 放在管道中的什么位置？或者我应该如何处理这种情况？

当项目启动时，AddInStore.Update() 方法的警告会引发如下消息：无法连接部分渠道......

因此，有一篇文章[说](http://www.developerfusion.com/article/9396/creating-extensible-applications-with-maf/)“MAF 提供了许多其他功能，例如版本控制、传递集合和 WPF 视觉效果、传递不可序列化类型等”。但我找不到一个例子。

编辑：

感谢 Panos 提供有关合同限制的[链接。](http://blogs.msdn.com/b/clraddins/archive/2007/02/27/restrictions-on-contracts.aspx)经过更多研究后，我发现这篇[文章](http://blogs.msdn.com/b/zifengh/archive/2007/01/24/clr-addin-model-in-paint-net-10-data-type-contract.aspx)通过 Paint.NET 项目展示了如何在不引用的情况下在主机中使用数据类型。

在阅读了这两个来源之后，我知道这就是我正在寻找的。但我还不能理解。

作为最后的请愿书，有人可以提供我的代码示例吗？只是为了最终得到它。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T08:36:03.150

您应该研究这些[指南](http://blogs.msdn.com/b/clraddins/archive/2007/02/27/restrictions-on-contracts.aspx)，了解合同程序集中允许哪些类型。

基本上，您不应该引用您在管道（合同、适配器和视图）中提到的 dll，因为这样您可以将类型从主机泄漏到加载项。这意味着您将失去版本控制，因为所有管道段都引用相同的程序集。这意味着如果加载项引用程序集的 v.1 并且合同引用 v.2，则将加载两个版本并抛出 InvalidCasrtException。

解决这个问题的方法是创建一个基于类 A 的接口并使其成为契约。然后您的加载项可以提供实现。这样您就不会丢失版本控制。

问候，

帕诺斯

# cuda - cuda，虚拟/隐式块同步

> ID：11324617
> 
> 赞同：4
> 
> 时间：2012-07-04T07:47:01.893
> 
> 标签：cuda, synchronization

我知道块同步是不可能的，唯一的方法是启动一个新内核。

但是，假设我启动了 X 个块，其中 X 对应于我 GPU 上 SM 的数量。我应该考虑调度程序将为每个 SM 分配一个块......对吗？如果 GPU 被用作辅助图形卡（完全专用于 CUDA），这意味着理论上没有其他进程使用它......对吗？

我的想法如下：隐式同步。

假设有时我只需要一个块，有时我需要所有 X 个块。好吧，在我只需要一个块的情况下，我可以配置我的代码，以便第一个块（或第一个 SM）将在“真实”数据上工作，而其他 X-1 块（或 SM）在某些“ dummy”数据，执行完全相同的指令，只是有一些其他偏移量。

这样所有这些都将继续同步，直到我再次需要它们。

在这种情况下调度器可靠吗？或者你永远不能确定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T10:58:40.670

您有几个问题合二为一，所以我将尝试分别解决。

**每个 SM 一个块**

我在[nVidia 自己的论坛](http://www.nvidia.com/content/forums/index.html#entry1426544)上问过这个问题，因为我得到的结果表明这不是发生的情况。显然，如果块的数量等于 SM 的数量，则块调度器不会为每个 SM 分配一个块。

**隐式同步**

不，首先，你不能保证每个区块都有自己的 SM（见上文）。其次，所有块不能同时访问全局存储。如果它们完全同步运行，它们将在第一次内存读/写时失去这种同步性。

**块同步**

现在有个好消息：是的，你可以。[CUDA C 编程指南](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_C_Programming_Guide.pdf)第 B.11 节中描述的原子指令可用于创建屏障。假设您有`N`块在 GPU 上同时执行。

```
__device__ int barrier = N;

__global__ void mykernel ( ) {

    /* Do whatever it is that this block does. */
    ...

    /* Make sure all threads in this block are actually here. */
    __syncthreads();

    /* Once we're done, decrease the value of the barrier. */
    if ( threadIdx.x == 0 )
        atomicSub( &barrier , 1 );

    /* Now wait for the barrier to be zero. */
    if ( threadIdx.x == 0 )
        while ( atomicCAS( &barrier , 0 , 0 ) != 0 );

    /* Make sure everybody has waited for the barrier. */
    __syncthreads();

    /* Carry on with whatever else you wanted to do. */
    ...

    } 
```

该指令以原子方式`atomicSub(p,i)`计算`*p -= i`并且仅由块中的第零个线程调用，即我们只想递减`barrier`一次。该指令`atomicCAS(p,c,v)`设置`*p = v`iff`*p == c`并返回 的旧值`*p`。这部分只是循环直到`barrier`到达`0`，即直到所有块都穿过它。

请注意，您必须将此部分包装在调用中，`__synchtreads()`因为块中的线程不会以严格的锁步执行，您必须强制它们全部等待第零个线程。

请记住，如果您多次调用内核，则应设置`barrier`回`N`.

**更新**

在回复[jHackTheRipper](https://stackoverflow.com/users/470341/jhacktheripper)的回答和[Cicada](https://stackoverflow.com/users/703016/cicada)的评论时，我应该指出，您不应该尝试启动比 GPU 上可以同时安排的更多的块！这受到许多因素的限制，您应该使用[CUDA 占用计算器](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CIIBEBYwAA&url=http://developer.download.nvidia.com/compute/cuda/CUDA_Occupancy_calculator.xls&ei=iD30T6m6MMf80QXLy-T6Bg&usg=AFQjCNG_VhxwvgVBBUZnnincdbTyvYLrKQ&sig2=Ks5m-Jq5frs92MxJhNmXFA)来查找内核和设备的最大块数。

不过，从最初的问题来看，只有与 SM 一样多的区块正在启动，所以这一点没有实际意义。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-07-04T12:42:45.590

@Pedro 绝对是错误的！

实现全球同步一直是最近几项研究工作的主题，最后是非开普勒架构（我还没有）。结论总是相同（或应该是）：不可能在整个 GPU 上实现这样的全局同步。

原因很简单：CUDA 块不能被抢占，所以如果你完全占用了 GPU，等待屏障 Rendez-vous 的线程将永远不会允许块终止。因此，它不会从 SM 中删除，并且会阻止剩余的块运行。

因此，您只会冻结永远无法摆脱这种死锁状态的 GPU。

*-- 编辑回答佩德罗的评论 --*

其他作者也注意到了这些缺点，例如： [http ://www.openclblog.com/2011/04/eureka.html](http://www.openclblog.com/2011/04/eureka.html)

由 OpenCL 的作者在行动

*-- 编辑回答佩德罗的第二句话 --*

@Jared Hoberock 在这篇 SO 帖子中得出了相同的结论： [CUDA 上的块间障碍](https://stackoverflow.com/questions/7703443/inter-block-barrier-on-cuda?rq=1)

# c# - 我应该在我的代码后面还是 BusinessLogic 类中使用这个函数

> ID：11324619
> 
> 赞同：1
> 
> 时间：2012-07-04T07:47:21.570
> 
> 标签：c#, asp.net, code-behind, business-logic-layer

我正在使用`ASP.NET Web Forms/C#`.

我正在使用此功能`DropDownLists`根据从州中选择的州填充城市。州和城市`DropDownList`有 3 个`DropDownLists`。（住宅、本地、办公室）。

这是我的功能。

```
public void CityFill(int index,int id)
{          
    var city = CustomerBLL.GetCities(index);

    //Loop through all the cities in st object
    foreach (var c in city)
    {
        //If id=0 then fill all dropdowns
        if (id == 0)
        {
            NewCustomerddlResidentialCity.Items.Add(c.city_name.Trim());
            NewCustomerddlOfficeCity.Items.Add(c.city_name.Trim());
            NewCustomerddlNativeCity.Items.Add(c.city_name.Trim());
            NewCustomerddlNomineeCity.Items.Add(c.city_name.Trim());
        }
        else
        {
            //If 1 then fill Res City
            if(id==1)
                NewCustomerddlResidentialCity.Items.Add(c.city_name.Trim());

            //If 2 then fill Off City
            if(id==2)
                NewCustomerddlOfficeCity.Items.Add(c.city_name.Trim());

            //If 3 then fill nat city
            if(id==3)
                NewCustomerddlNativeCity.Items.Add(c.city_name.Trim());
        }
    }
} 
```

`DropDownLists`这个基于 id 的函数将根据 id 参数填充适当的城市。

这是目前在。`code behind`我的问题是是否应该在这里使用这个功能，或者我应该把它移到我的`Business Logic class`. 这是我的`CustomerBLL.cs`

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Drawing;
using System.Text.RegularExpressions;
using System.Data.SqlClient;
using System.Threading;
using System.Globalization;
using System.Web.Services;
using System.IO;
using System.Xml.Linq;
using System.Web.Security;
using System.Text;

namespace CwizBankApp
{
    public class CustomerBLL
    {
        public IList<mem_city> GetCities(int index)
        {
            using (var db = new DataClasses1DataContext())
            {
                var city = db.mem_cities.Where(c => c.state_id.Equals(index)).ToList();
                return city;
            }
        }
    }
} 
```

什么是正确的方法。有人可以指导我吗？

欢迎任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T07:57:40.570

正确的方法是将项目单独添加到下拉列表和业务逻辑：

```
// this goes to business logic
public CitiesView GetCities(int id) {
       var cities = new CitiesCollection();
       var city = CustomerBLL.GetCities(index);

        //Loop through all the cities in st object
        foreach (var c in city)
        {
            //If id=0 then fill all dropdowns
            if (id == 0)
            {
                cities.Residental.Add(c.city_name.Trim());
                cities.Office.Add(c.city_name.Trim());
                cities.Native.Add(c.city_name.Trim());
                cities.Nominee.Add(c.city_name.Trim());
            }
            else
            {
                //If 1 then fill Res City
                if(id==1)
                    cities.Residental.Add(c.city_name.Trim());

                //If 2 then fill Off City
                if(id==2)
                cities.Office.Add(c.city_name.Trim());

                //If 3 then fill nat city
                if(id==3)
                cities.Native.Add(c.city_name.Trim());
            }
        }
  }

  // this goes to code behind
  public void FillCitiesDrowDowns(int id) {
       var citiesView = GetCities(id);
       NewCustomerddlResidentialCity.Items.AddRange(citiesView.Residental);
       NewCustomerddlOfficeCity.Items.Add(citiesView.Office);
       NewCustomerddlNativeCity.Items.Add(citiesView.Native);
       NewCustomerddlNomineeCity.Items.Add(citiesView.Nominee);    
 }

 public class CitiesView {
     public List<string> Residental {get;set;}
     public List<string> Office {get;set;}
     public List<string> Native {get;set;}
     public List<string> Nominee {get;set;}
 } 
```

这样，您可以在不触及 UI 元素的情况下测试所有条件，您可以在不触及业务逻辑的情况下替换 UI 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T07:56:13.813

应该在您的业务逻辑层上。原因之一是您还想在其他表单上使用此功能，因此，您只需调用它即可。

它将处理属于业务领域的`BLL`一部分，而不是数据库的一部分，也不是 UI 的一部分（通常）。例如，使用 a 的年龄`customer`来确定他们是否有资格享受特殊老年人的折扣。DAL 不应该这样做，它应该只是检索客户数据，然后在`BLL`完成工作后将其与折扣数据一起存储。

1.  它将您的所有业务逻辑本地化，并在一个地方。因此，未来的变化会容易得多。
2.  它使您可以更轻松地对业务逻辑进行单元测试。这是一个很大的。如果此代码与您的网页或 Windows 窗体紧密耦合，则很难针对您的业务逻辑编写自动化单元测试。
3.  它使您的 UI 更加纤薄。

# java - 如何在 Spring MVC 控制器中处理不同的日期格式？

> ID：11324622
> 
> 赞同：4
> 
> 时间：2012-07-04T07:47:36.943
> 
> 标签：java, spring, spring-mvc

是否可以在 Spring MVC 控制器中处理不同的日期格式？

我知道设置这样的东西

```
@InitBinder
protected void initBinder(WebDataBinder binder) {
    SimpleDateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy");
    binder.registerCustomEditor(Date.class, new CustomDateEditor(
            dateFormat, false));
} 
```

我可以处理`dd/MM/yyyy`格式，但是如果我还想解析`yyyyMMddhhmmss`格式的日期怎么办？我应该在控制器中添加多个`CustomDateEditor`s 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-31T09:36:50.513

如果您仅在特定情况下需要它，您可以注册附加到表单中的字段的自定义编辑器：

```
DateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy", this.getLocale(context));
DateFormat dateTimeFormat = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss SSS", this.getLocale(context));
binder.registerCustomEditor(Date.class, new CustomDateEditor(dateTimeFormat, true));
binder.registerCustomEditor(Date.class, "name.of.input", new CustomDateEditor(dateTimeFormat, true)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T20:56:01.150

灵感来自 Skipy

```
public class LenientDateParser extends PropertyEditorSupport {

private static final List<String> formats = new ArrayList<String>();

private String outputFormat;

static{
    formats.add("dd-MM-yyyy HH:ss");
    formats.add("dd/MM/yyyy HH:ss");
    formats.add("dd-MM-yyyy");
    formats.add("dd/MM/yyyy");
    formats.add("dd MMM yyyy");
    formats.add("MMM-yyyy HH:ss");
    formats.add("MMM-yyyy");
    formats.add("MMM yyyy");
}

public LenientDateParser(String outputFormat){
    this.outputFormat = outputFormat;
}

@Override
public void setAsText(String text) throws IllegalArgumentException {
    if(StringUtils.isEmpty(text))
        return;
    DateTime dt = null;
    for(String format : formats){

        try{

            dt = DateTime.parse(text, DateTimeFormat.forPattern(format));

            break;

        }catch(Exception e){
            if(log.isDebugEnabled())
                log.debug(e,e);
        }
    }
    if(dt != null)
        setValue(dt.toDate());
}

@Override
public String getAsText() {
    Date date = (Date) getValue();

    if(date == null)
        return "";

    DateTimeFormatter f = DateTimeFormat.forPattern(outputFormat);

    return f.print(date.getTime());

}
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-04T08:51:14.140

这个怎么样。以上可能很快就会失控。

```
 public class MostLenientDateParser {
           private final List<String> supportedFormats;

           public MostLenientDateParser(List<String> supportedFormats) {
               this.supportedFormats = supportedFormats;
           }

           public Date parse(String dateValue) {
               for(String candidateFormat: supportedFormats) {
                   Date date = lenientParse(dateValue, candidateFormat);
                   if (date != null) {
                       return date;
                   }
               }
               throw new RuntimeException("tried so many formats, non matched");
           }

           private Date lenientParse(String dateCandidate, String dateFormat) {
               try {
                   return new SimpleDateFormat(dateFormat).parse(dateCandidate);
               } catch (Exception e) {
                   return null;
               }
           }
       } 
```

这也可以通过 Spring 转换器通过 CustomDateEditor 实现来引用，以进行表单数据绑定。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-27T17:03:21.283

对于其他有相同问题的人，如果您使用的是 spring 3，您可以在模型领域使用很棒的 @DateTimeFormat(pattern="dd-MM-yyyy")。

只需确保使用您的 org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter 注册一个 conversionService

您可以在同一个 bean 中拥有任意数量的 @DateTimeFormat。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-04T08:09:24.247

如果一次您只收到一种日期格式，那么您可以简单地创建一个`DateFormat`基于格式的实例

**例如**

根据输入决定格式

```
DateFormat df = null;
if(recievedDate.indexOf("//")!=-1){
    df = new SimpleDateFormat("dd/MM/yyyy")
}else{
    df = new SimpleDateFormat("yyyyMMddhhmmss")
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-17T04:12:13.557

在处理多个语言环境时使用宽松的日期格式化程序并不是一个好主意。dd/MM/YYYY 和 MM/dd/YYYY 都可以正确解析像 10/11/2013 这样的日期

# android - 活动完成后如何不停止异步任务

> ID：11324623
> 
> 赞同：0
> 
> 时间：2012-07-04T07:47:37.543
> 
> 标签：android, android-asynctask

我有一个带有异步任务的活动，将文件发送到 Web 服务，如果我在活动中，我发送文件，在过程的中间我回到活动，异步任务完成。我怎样才能让这不会发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:01:43.297

您可以使用 progressDialog 并将 Cancelable 设置为 false 以防止这种情况发生。

# javascript - 如何使用 HTML5 和 Javascript 构建 Meego Mobile 应用程序

> ID：11324624
> 
> 赞同：-4
> 
> 时间：2012-07-04T07:47:38.160
> 
> 标签：javascript, html, mobile-application, meego

我可以使用 HTML5 和 Javascript 为 Meego 构建移动应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T07:51:02.637

如何用砖头和灰泥建造摩天大楼？

如何用刀叉吃蛋糕？

如何使用梯子和电灯开关加速穿越时空？

……

回答您的问题：要使用 HTML5 和 Javascript 为 Meego 构建移动应用程序，您需要学习 HTML5 和 Javascript，获取 Meego API 并制作应用程序...

# java - 将 JComponent 添加到小程序的窗格

> ID：11324627
> 
> 赞同：0
> 
> 时间：2012-07-04T07:47:44.473
> 
> 标签：java, swing, applet, jcomponent

当按下按钮时，我正在尝试向小程序窗格添加一个 JComponent（例如标签）。我有以下代码：

```
public class TestApplet extends JApplet
{
    @Override
    public void init()
    {
        setLayout(new FlowLayout());
        JButton bt = new JButton("hit it");
        bt.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent ae)
            {
                // getContentPane().setFont(null);
                getContentPane().add(new JLabel("to the right"));
            }
        });
        add(bt);
    }
} 
```

这不会使标签可见，除非我取消注释`getContentPane().setFont(null);`

请告知我应该如何正确显示标签。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T14:53:05.380

```
getContentPane().add(new JLabel("to the right"));
this.revalidate(); 
```

# vbscript - 无法唯一标识 qtp 中的复选框

> ID：11324632
> 
> 赞同：1
> 
> 时间：2012-07-04T07:47:57.000
> 
> 标签：vbscript, qtp

我正在使用 QTP 开发一个 Windows 表单 .Net 应用程序，并且有一组重复的复选框并且都具有相同的属性。我需要从每组中选择一个特定的复选框。如果复选框在屏幕上不可见然后我们需要向下滚动，否则会弹出错误消息。有没有办法从每组中选择一个特定的复选框。eq: abc 特征 1 2 3 abc 特征 1 2 3 4 abc 特征 1 2

我需要从所有集合中选择复选框 1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T11:07:49.953

您需要找到一种方法来识别“复选框集”，使用对象间谍或 dom 检查器来查看识别集合的内容（可能是某种`div`或`span`）为了这个答案，我假设它是`div`一个特定的`class` `"chkbxGrp"`.

然后查找该组中包含的第一个复选框并选中它。

请注意，将复选框滚动到视图中是由 QTP 自动完成的。
如果在预期组不存在时需要失败，则必须找出如何识别特定组，然后在测试中使用预期值，而不是遍历所有此类组。

```
' Untested code
Set Desc = Description.Create()
Desc("html tag").Value = "div"
Desc("html tag").RegularExpression = False
Desc("class").Value = "chkbxGrp"
' Find all groups
Set groups = Browser("B").Page("P").ChildObjects(Desc)
For i = 0 To groups.Count -1
    ' in each group check the first checkbox
    groups(i).WebCheckBox("index:=0").Set "ON"
Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T15:30:55.743

您可以使用 QTP 索引“识别”复选框。这不是最好的选择，但如果您只需要第一个复选框。只需在“CheckBox”类型的页面上查找所有对象，如果结果集> 0，则获取第一个。

第二个选项是通过附近的元素“定位”复选框，但在这种情况下，您需要确保它们的位置不会被更改。

顺便说一句，你确定它们完全一样吗？在 QTP 中有一个选项可以为元素位置设置必要的属性。您可以添加任何对出现在您的应用程序中的 CheckBox 唯一的属性。

# php - 尝试更新表名“order”时出错

> ID：11324634
> 
> 赞同：2
> 
> 时间：2012-07-04T07:48:19.307
> 
> 标签：php, mysql, opencart

我尝试将简单数据更新为表名“订单”，但仍然出现错误。

我尝试了许多版本查询但仍然相同；

```
first try :
$result = mysql_query("UPDATE order SET order_status_id=200 WHERE order_id=75") or die(mysql_error()); 

second try :
$result = mysql_query("UPDATE order SET order_status_id='200' WHERE order_id='75'") or die(mysql_error()); 
```

**错误 ;**

第一次尝试：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“order SET order_id=200 WHERE order_id=75”附近使用正确的语法

第二次尝试：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'order SET order_status_id='200' WHERE order_id='75'' 附近使用正确的语法

**表结构**

```
order_id    int(11)
order_status_id     int(11) 
```

我尝试更新其他表只是为了确保我的查询正确并且所有表都可以更新。

*我使用 Opencart，我的网站使用 https。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T07:49:48.143

`order`是 MySQL 中的保留字。你需要用反引号来逃避它：

```
UPDATE `order` SET order_status_id=200 WHERE order_id=75 
```

见[MySQL 保留字](http://dev.mysql.com/doc/refman/5.5/en/keywords.html)

# php - 显示由 imagejpeg 创建的图像

> ID：11324636
> 
> 赞同：2
> 
> 时间：2012-07-04T07:48:22.240
> 
> 标签：php, image, gd

我使用外部功能创建图像。

返回图像原始数据的函数：

```
function create_image()
{
    ...
    ImageJPEG($myimg,NULL,85);
    $imgdata = ob_get_contents(); 
    ob_end_clean();          
    return $imgdata;
} 
```

我的脚本应该显示图像的样子：

```
$rawdata = create_image();
<img src="data:image/jpeg;base64,".base64_encode($rawdata)."" /> 
```

`<img>`现在标签中的图像不完整。如果我将质量设为 50（带有`ImageJPEG($myimg,NULL,50);`），图像将完全显示。如果我捕获原始数据并将其写入磁盘，则图像将在各种质量上都是完整的。

```
$rawdata = create_image();
$im = imagecreatefromstring($rawdata);
ImageJPEG($im,"./test.jpg",90); 
```

只有在`<img>`标签中它不起作用。

有人知道为什么它不起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:01:14.530

我个人从未使用过这种技术，我通常使用一个简单的图像标签和我的 image.jpg.php（例如）作为图像。为此，我将 a`header("Content-type: image/jpeg")`放入图像文件中并简单地回显数据。

我真的从未尝试过使用原始数据，但我相信这将是可取的，尤其是在维护（和兼容性）方面。

# iphone - 如果主机在 2-3 秒内没有响应，则超时

> ID：11324640
> 
> 赞同：0
> 
> 时间：2012-07-04T07:48:35.127
> 
> 标签：iphone, objective-c, cocoa

我想检查一个网络主机是否可用，所以我使用了下面的代码，它可以工作，但有时如果网站响应速度很慢，它会一直等待，我如何在其中植入超时？如果主机在 2-3 秒内没有响应，也返回 false。请帮帮我

```
- (BOOL)isDataSourceAvailable {

    static BOOL checkNetwork = YES;
    static BOOL _isDataSourceAvailable = NO;
    if (checkNetwork) { // Since checking the reachability of a host can be expensive, cache the result and perform the reachability check once.
        checkNetwork = NO;
        Boolean success;
        const char *host_name = "google.com"; //HOST
        SCNetworkReachabilityRef reachability = SCNetworkReachabilityCreateWithName(NULL, host_name);
        SCNetworkReachabilityFlags flags;
        success = SCNetworkReachabilityGetFlags(reachability, &flags);
        _isDataSourceAvailable = success && (flags & kSCNetworkFlagsReachable) && !(flags & kSCNetworkFlagsConnectionRequired);
        CFRelease(reachability);
    }
    return _isDataSourceAvailable;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:02:29.027

它很简单

只需执行`NSTimer`

例子

```
[NSTimer scheduledTimerWithTimeInterval:2.0
    target:self
    selector:@selector(targetMethod:)
    userInfo:nil
    repeats:NO]; 
```

如果 targetMethod: 被调用，那么它的超时。

在这里别忘了打电话

```
[myTimer invalidate];
myTimer = nil; 
```

如果您收到来自服务器的响应。

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T08:16:26.993

您正在`SCNetworkReachability*`阻塞模式下使用呼叫。您需要使用设置回调`SCNetworkReachabilitySetCallback`，然后将其安排在运行循环`SCNetworkReachabilityScheduleWithRunLoop`中。[您可以在Apple 的可达性示例](http://developer.apple.com/library/ios/#samplecode/Reachability/Listings/Classes_Reachability_m.html#//apple_ref/doc/uid/DTS40007324-Classes_Reachability_m-DontLinkElementID_6)中找到更多信息。当您使用回调时，您可以使用`NSTimer`（类似于用户 Prateek 所描述的）来中止当前的可达性任务。

您将不得不修改您的代码，因为不是进行函数/方法调用并立即知道答案，而是您将进行函数/方法调用并等待三个回调之一：可达性成功、可达性失败或超时。

# c++ - const 转换运算符的行为

> ID：11324644
> 
> 赞同：0
> 
> 时间：2012-07-04T07:48:43.423
> 
> 标签：c++, operator-keyword

在下面的代码中有一个转换运算符，用于将 A 类对象转换为 const B 类对象。

我的问题是当创建 const B 对象时，为什么它的值更改为 bv=20 没有错误。

可能，我错过了一些东西。

提前感谢

```
class B
{
public:
    int v;
    B() : v(10) {}
};

class A
{
public:
    operator B() const {}
};

void g(B b)
{
    b.v=20;
}

int main()
{
    A a;
    g(a);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T07:51:53.187

`const`after 成员函数签名与返回类型无关；它只意味着函数（或它返回的值）不会改变原始对象的*状态*，即不会改变那些标记为的成员以外的成员`mutable`。

此外，您的函数`g()`按值获取参数，因此无论如何它都会被复制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T07:52:11.267

您的函数接受参数*by-value*，因此它是返回内容的副本，而不是`const`- 因此您可以在正文中进行修改。

```
void g(B b) 
```

# wordpress - WordPress 插件：如何添加单独的页面来编辑表单

> ID：11324645
> 
> 赞同：1
> 
> 时间：2012-07-04T07:48:43.737
> 
> 标签：wordpress, plugins

好的，所以我有一个插件，它有自己的设置页面和所有。在设置中，我有一个表单将显示自定义表中的数据。它看起来像这样：

```
 <form method="post" action="">
        <table>
            <tbody>
                <tr>
                    <th>StringVal1</th>
                    <th>Checked</th>
                    <th>StringVal2</th>
                    <th>StringVal3</th>
                    <th>Configurations</th>
                </tr>

                <tr>
                    <td>
                        <?php echo "Value from table"; ?>
                    </td>
                    <td>
                        <?php
                            if ($row["Checked"] == 1) {
                                $checked = ' checked="checked" ';
                            }
                            echo "<input name='Checked' type='checkbox' " . $checked . " />";
                        ?>
                    </td>
                    <td>
                        <?php echo "Another value from table"; ?>
                    </td>
                    <td>
                        <?php echo "More value from table"; ?>
                    </td>
                    <th>
                        <div align="center">
                            <input name="EditButton" type="submit" class="edit-secondary" value="Edit">
                        </div>
                    </th>
                </tr>
            </tbody>
        </table>
    </form> 
```

单击“编辑”按钮时，我想链接到另一个页面（例如 /wp-admin/plugins.php?page=myplugin-settings/edit-form），以便编辑和插入表中的删除行。那么如何添加我需要的额外页面？

# php - 有没有更快的方法从多个表中获取信息？

> ID：11324647
> 
> 赞同：0
> 
> 时间：2012-07-04T07:48:50.490
> 
> 标签：php, mysql, sql, performance

假设我有七个表，我想对所有表执行相同的查询，然后返回结果。现在我有一些这样的代码

```
$dates = array();
foreach ($tables as $table) {
  $result = runStatement("
    SELECT MIN(StartDate) as Start, 
           MAX(EndDate) as End 
           FROM $table WHERE ProjectID = ?",
    array($id));
  $stageDates[$table] = $result[0];
}
echo json_encode($dates); 
```

它可以工作，但速度非常慢，因为它必须从七个不同的查询中启动和检索结果。有没有办法将所有查询合并为一个？有没有其他方法可以加快速度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:07:38.437

使用带有子查询的连接将解决问题

```
SELECT
  MIN(t1.StartDate) as Start,
  MAX(t1.EndDate) as End,
  t2.Start,
  t2.END,
  t3.Start,
  t3.END  
FROM table1 as t1
  left join (SELECT
           MIN(t2.StartDate) as Start,
           MAX(t2.EndDate) as End
         FROM table1) as t2
    on t1.id = t2.id
  left join (SELECT
           MIN(t3.StartDate) as Start,
           MAX(t3.EndDate) as End
         FROM table1) as t3
    on t1.id = t3.id  
    -- and so on --  
WHERE t1.ProjectID = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T07:54:07.160

永远不要在循环**中**放置查询。这是最糟糕的事情之一。

我不认为你会得到更快的方式，但是，正如 Dagon 所说，联合将是更清洁和更安全的方式。

```
SELECT MIN(StartDate) as Start, MAX(EndDate) as End FROM $table1, $table2, $table3 WHERE ProjectID = ?", 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T08:09:57.537

如果您有七个带有“StartDate”、“EndDate”和“ProjectID”的表，则可以使用物化视图（[http://www.mysqlperformanceblog.com/2011/03/23/using-flexviews-part-one-introduction- to-materialized-views/](http://www.mysqlperformanceblog.com/2011/03/23/using-flexviews-part-one-introduction-to-materialized-views/) ) 或使用 Solr 或 Sphinx 索引数据。然后查询会快得多，但缺点是您的数据可能会过时。如果几秒钟或几分钟没有问题，请查看这些解决方案。

# php - Drupal：显示剩余时间而不是过期日期

> ID：11324650
> 
> 赞同：2
> 
> 时间：2012-07-04T07:49:02.347
> 
> 标签：php, drupal, drupal-7, drupal-theming

在drupal中，我启用了日期模块并将日期（Unix时间戳）添加到内容类型中，我的问题是如何显示剩余时间而不是显示日期？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:40:09.947

尝试使用[format_interval](http://api.drupal.org/api/drupal/includes!common.inc/function/format_interval/7) () 函数。

您可以将以下代码放入主题的 template.php 文件中：

```
function [YOUR_THEME]_ago($timestamp)
{
    $ago = format_interval((time() - $timestamp) , 2) . t(' ago');
    return $ago;
} 
```

希望这会有所帮助……穆罕默德。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T01:59:28.063

[Countdown](http://drupal.org/project/countdown)看起来很有希望满足您的需求。

# android - 不同操作系统/API 文本颜色的 EditText

> ID：11324658
> 
> 赞同：2
> 
> 时间：2012-07-04T07:49:47.367
> 
> 标签：android, android-edittext

在 ICS 中，EditText 的背景是黑色，而在 Gingerbread 中则是白色。所以默认的 EditText 不在 ICS 中显示，而是在 GB 中显示。

目前，我正在使用：

```
 if(Integer.valueOf(android.os.Build.VERSION.SDK) >= 11)
            editWeight.setTextColor(Color.WHITE); 
```

但是必须有更好的方法来写这个。想法？初学者在这里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T07:52:18.523

如果你不弄乱颜色，EditTexts 看起来会很好（因为它们会与默认背景形成对比）。但是，如果您要为文本和背景手动设置颜色！我通常创建自己的 9patch 背景作为 EditTexts 的可绘制对象，然后相应地设置文本的颜色。

您还需要将可绘制光标设置为空，否则几乎不可能在任何具有与其相似的背景颜色的版本中看到它。

# android - android GCM注册ID最大长度

> ID：11324666
> 
> 赞同：50
> 
> 时间：2012-07-04T07:50:25.190
> 
> 标签：android, google-cloud-messaging

在 Google Cloud Messaging 中，注册 ID 的最大长度到底是多少？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-12-04T22:32:23.177

~~一位google工程师[说注册ID最高可达4K](https://groups.google.com/forum/#!msg/android-gcm/q2PzJTP71TY/DNX4lvDu5X4J)~~。用户观察到它是 255 个字符。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-16T08:45:07.290

我想我可以帮你解决这个问题......我这周正在使用 GCM，我的设备注册 ID 如下所示：

> APA91bHPRgkF3JUikC4ENAHEeMrd41Zxv3hVZjC9KtT8OvPVGJ-hQMRKRrZuJAEcl7B338qju59zJMjw2DELjzEvxwYv7hH5Ynpc1ODQ0aT4U4OFEeco8ohsN5PjL1iC2dNtkFX8BAokeMCg24kIkmxq

163 个字符！

我希望这可以帮助你...

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-07-30T20:07:54.667

在 iOS 上，我的所有注册令牌如下所示：

```
lhBV25_Znsk:APA91bHFM9nbX-s0py6-ktzgdpP_y85RahdL3OJ4LG4v-jT_9QY8ZbZH8uK-JNO_BDy75b6RfDT-v-j5W0FXIFTif72ckT3kqLNBDNWYSd5AhxYwdJi3Wqfdqqi-wL8F_k1nm2qUS3Ra 
```

（152 个字符）

注意 11 个字符后的冒号。另请注意，它在冒号之后有序列“APA...”，但是您应该使用整个注册令牌。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-20T08:00:01.717

GCM ID 没有官方限制，我写这篇文章的时候**有效载荷大小是 4k。**虽然，根据[这个](https://groups.google.com/forum/#!msg/android-gcm/q2PzJTP71TY/DNX4lvDu5X4J)和我之前的讨论，假设 GCM ID 为 255 是安全的。

如果您要问的问题是在数据库中，我建议您使用 TEXT。

# google-app-engine - CloudFlare 与 Google App Engine 超额配额

> ID：11324667
> 
> 赞同：0
> 
> 时间：2012-07-04T07:50:36.280
> 
> 标签：google-app-engine, cdn, cloudflare

我一直将[CloudFlare](https://www.cloudflare.com/)视为我的 Google App Engine 托管的 CDN 服务，作为一名学生，成本始终是一个问题（也就是仅限免费服务）。我在 CF 博客上读到，当源服务器关闭时，CF 会从自己的服务器向用户提供网站的缓存版本。

那么，如果我们达到 GAE 配额限制，服务器是否被视为“停机”？CF会显示缓存的网站吗？我不打算拥有很多动态内容，因此为整个缓存网站提供服务对我来说并不是什么大问题。

如果我的第一个问题的答案是否定的，那么一旦 GAE 达到任何配额限制，是否可以让 CF 自动为其缓存的网站内容提供服务？我知道这可能不太可能，但只是想抛出这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:25:41.423

根据[CloudFlare 的 wiki](http://support.cloudflare.com/kb/troubleshooting/why-doesnt-always-online-display-all-pages-of-my-site-when-my-server-is-down)，只有在后端服务器不可用或返回 502 或 504 的响应代码时，Always Online 功能才会返回缓存页面。当您达到配额限制时，App Engine 本身通常仍然可用，因此缓存是否有效取决于您的情况下的响应代码。

如果您的应用超出其带宽或实例小时配额，[App Engine 将返回 403 Forbidden 响应代码](https://developers.google.com/appengine/docs/quotas#When_a_Resource_is_Depleted)。可以[自定义](https://developers.google.com/appengine/docs/python/config/appconfig#Custom_Error_Responses)错误响应的内容，但不能自定义代码。在这种情况下，CloudFlare 似乎不会提供缓存页面。

但是，如果您的应用程序达到 API 使用配额，您的代码将收到异常，您可以选择返回其中一个 50x 代码并触发缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:52:25.700

我不确定这种特殊情况是否适用于 CloudFlare，因为 App Engine 返回的错误代码（我们正在对 Always Online 进行一些增强，但它确实无法解决 403 错误）。

看起来 AppEngine 确实允许您[对错误页面进行一些自定义](https://developers.google.com/appengine/docs/quotas#When_a_Resource_is_Depleted)？

提示：您可以将应用程序配置为在应用程序超出配额时提供自定义错误页面。有关详细信息，请参阅 Python 和 Java 的自定义错误响应文档。

# xtk - 需要有关如何使用 X.shaders 的 XTK 示例

> ID：11324672
> 
> 赞同：0
> 
> 时间：2012-07-04T07:50:43.057
> 
> 标签：xtk

有人可以提供有关如何在 XTK 中使用 X.shaders 的示例吗？

我需要使用自定义着色器来应用纹理和颜色以及顶点的 alpha 分量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:50:11.637

阅读代码后：暂时你不能。最初，着色器类并未公开，但我向 Haehn 提交了一个问题以将其导出为公共，以便您可以实例化一个着色器。此外，它需要 2 个用于片段和顶点源的设置器，并删除要在着色器源中使用的所有属性/制服的测试。

请注意，使用当前代码，您无法将参数添加到着色器（顺便说一句，应该足够用于任何用途，您可以[在此处](https://github.com/xtk/X/blob/master/visualization/shaders.js)的“属性”和“制服”中看到它们）。

要使用它，在那之后，我会说：

```
 var r = new X.renderer3D(); //create a renderer
 r.init(); //initiate it
 var sh = new X.shaders(); // create a new par of shaders
 /* here use the futur setters to set sources from a string or a file */
 r.addShaders(sh); // this set the shaders for the renderer and try to compile them
 // DO NOT call init anymore or it would erase the current shaders and replace them by default ones
 /*
 Any code to fill the scene, etc...
 */
 r.render(); 
```

但它需要等待我在本文开头所说的 3 个更改。我在等海恩的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T14:08:49.827

@Ricola3D 是对的。

关于这个的讨论在这里：

[https://github.com/xtk/X/issues/69](https://github.com/xtk/X/issues/69)

但是如果你想要一个顶点的 alpha 通道，你可以使用 X.object.opacity。

# objective-c - 向顶点数组添加值

> ID：11324673
> 
> 赞同：1
> 
> 时间：2012-07-04T07:50:45.930
> 
> 标签：objective-c, xcode, macos, cocoa, opengl

我想让我的顶点数组动态化。这样在每个鼠标事件之后都会添加这些值。当用户拖动鼠标时，我注册鼠标位置坐标。坐标被命名为“loc”。当用户拖动鼠标时，“loc”值会更新。所以我希望当'loc'被更新时，坐标会被**添加**到顶点数组中。我仍然只能在更新'loc'时这样做，它会重建顶点数组，所以我的顶点数组总是只有一个坐标（当前的'loc'值）。

我的顶点数组值存储在 GLfloat 中：

```
GLfloat vertexes[] = { loc.x, loc.y }; 
```

'loc'`- (void) mouseDragged:(NSEvent *)event`由以下人员注册：

```
loc = [self convertPoint: [event locationInWindow] fromView:self]; 
```

顶点数组由以下方式绘制`- (void) drawMyShape`：

```
glEnableClientState(GL_VERTEX_ARRAY);
glVertexPointer(2, GL_FLOAT, 0, vertexes);
glPointSize(30);
glDrawArrays(GL_POINTS, 0, vertexCount);
glFlush();
glDisableClientState(GL_VERTEX_ARRAY); 
```

`- (void) drawMyShape`在注册鼠标事件并将它们添加到 GLfloat 后调用`- (void) mouseDragged:(NSEvent *)event`：

```
[self drawMyShape] 
```

* * *

当前代码：

在 .h 文件中：

```
NSMutableArray *vertices;
@property (nonatomic, retain) NSMutableArray *vertices; 
```

在 .m 文件的开头

```
@dynamic vertices; 
```

在 .m 文件中`- (id)initWithCoder:(NSCoder *)coder`

```
vertices = [[NSMutableArray alloc] init]; 
```

在 .m 文件中`- (void) mouseDragged:(NSEvent *)event`

```
loc = [self convertPoint: [event locationInWindow] fromView:self];
NSValue *locationValue = [NSValue valueWithPoint:loc];
[vertices addObject:locationValue];`
[self addValuesToArray]; 
```

在 .m 文件中`- (void) addValuesToArray`

```
int count = [vertices count] * 2; 
NSLog(@"count: %d", count); 
int currIndex = 0; 
GLfloat GLVertices[] = {*(GLfloat *)malloc(count * sizeof(GLfloat))}; 
for (NSValue *locationValue in vertices) { 
  NSValue *locationValue = [vertices objectAtIndex:currIndex++]; 
  CGPoint curLoc = locationValue.pointValue; 
  GLVertices[currIndex++] = curLoc.x; 
  GLVertices[currIndex++] = curLoc.y; 
} 
```

它崩溃了

```
NSValue *locationValue = [vertices objectAtIndex:i]; 
```

在日志崩溃后，我看到（*删除了日志的某些部分，因为我认为它们并不重要*）：

```
sum: 2
*** -[__NSArrayM objectAtIndex:]: index 2 beyond bounds [0 .. 1]
sum: 3
*** -[__NSArrayM objectAtIndex:]: index 3 beyond bounds [0 .. 2]
sum: 4
*** -[__NSArrayM objectAtIndex:]: index 4 beyond bounds [0 .. 3]
sum: 5
*** -[__NSArrayM objectAtIndex:]: index 5 beyond bounds [0 .. 4]
sum: 6
(lldb) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T08:08:17.760

使用 NSMutableArray 动态存储您的位置对象。

在初始化阶段初始化数组：

```
NSMutableArray *vertices = [[NSMutableArray alloc] init]; 
```

在鼠标事件上添加顶点：

```
loc = [self convertPoint: [event locationInWindow] fromView:self];
[vertices addObject:loc]; // Assuming loc can be added as an object to the array 
```

绘制前转换为`GLFloat`数组：

```
int count = [vertices count] * 2; // * 2 for the two coordinates of a loc object
GLFloat *glVertices = (GLFloat *)malloc(count * sizeof(GLFloat));
int currIndex = 0;
for (YourLocObject *loc in vertices) {
    glVertices[currIndex++] = loc.x;
    glVertices[currIndex++] = loc.y;        
} 
```

现在您可以`glVertices`在绘图时使用数组。

# javascript - 客户端验证

> ID：11324674
> 
> 赞同：1
> 
> 时间：2012-07-04T07:50:46.160
> 
> 标签：javascript, asp.net

我在我使用过的 asp.net 页面上有一个字段`RequiredFieldValidator`。

```
<tr> 
  <td align="left" style="width: 130px"> 
    <asp:Label ID="LblPagename" runat="server" Text="Page Name " CssClass="label"></asp:Label><font 
      color="red"> *</font> 
  </td> 
  <td align="left" style="width: 1087px" class="layout-grid"> 
    <asp:TextBox ID="TxtPageName" runat="server" MaxLength="50" ></asp:TextBox> 
    <asp:RequiredFieldValidator ID="RequiredFieldValidator9" runat="server" Display="Dynamic" 
      ValidationGroup="Save" ControlToValidate="TxtPageName" ForeColor="Red"
      ErrorMessage="Please enter Page Name."></asp:RequiredFieldValidator>  
  </td> 
</tr> 
```

在保存时，我允许与上面提到`CauseValidation="true"`的相同`ValidationGroup`

```
<tr> 
  <td colspan="3" align="center" style="width: 1193px"> 
    <asp:ImageButton ID="btnMenu" CausesValidation="true" ValidationGroup="Save" ImageUrl="~/Images/Save.png"  
      runat="server" OnClick="btnMenu_Click" OnClientClick="SaveFunctionalities();"/> 
    &nbsp;&nbsp; &nbsp;&nbsp; 
    <asp:ImageButton ID="btnCancelMenu" ImageUrl="~/Images/btnCancel.png" runat="server" 
      OnClick="btnCancelMenu_Click" /> 
  </td> 
</tr> 
```

但是在保存时，连同空字段的错误消息，正在调用保存。

同样的事情在其他页面上也能正常工作。

唯一的区别是，我在这里有一个 javascript 函数调用`OnClientClick`。

这会引起一些问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:03:14.990

确保`SaveFunctionalities();`返回一个布尔值，具体取决于是否发生错误。如果一切正常，则返回`true`- 如果有任何错误返回`false`。

然后更新您的 OnClientClick 以将该返回变量传递给按钮..

```
OnClientClick="return SaveFunctionalities();" 
```

如果没有问题，按钮将通过该`true`值正常继续。如果有错误，则会通过该`false`值告诉它停止处理。

**更新**

`false`从@Richa 评论中发布的代码来看，无论验证返回什么，您总是会返回。

你的函数应该看起来更像这样......

```
function SaveFunctionalities() {
  if (Page_ClientValidate()) {
    ...
    return true;
  } else {
    return false; 
  }
} 
```

# spring-integration - 错误通道调用后，更改 ip_connection_id

> ID：11324676
> 
> 赞同：0
> 
> 时间：2012-07-04T07:51:00.957
> 
> 标签：spring-integration

即使发生错误，我也配置为处理错误和响应错误消息。所以，我在入站适配器中设置了错误通道。

我使用 Message 捕获了失败消息的标题信息。

```
 MessageTransformationException exBody = (MessageTransformationException) message.getPayload();
    message = exBody.getFailedMessage(); 
```

但问题是 ip_connection_id 更改如下。

ip_connection_id=127.0.0.1:51049:dd62fed7-00d2-4a7e-8f99-908b4766b862

ip_connection_id=127.0.0.1:51051:d09d5273-a0e9-4ab9-ac73-f1963febf997

请让我知道如何使 ip_connection_id 不可变。我必须同步响应来电者。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:37:18.490

一定有其他事情发生；ip_connection_id*是*不可变的，因为它将始终反映接收消息的连接的 ID，该 ID 在连接的构造函数中设置并且永远不会更改。如果您的消息具有不同的连接 ID，则它来自不同的连接。

我刚刚在这里修改了示例[https://github.com/SpringSource/spring-integration-samples/tree/master/basic/tcp-client-server](https://github.com/SpringSource/spring-integration-samples/tree/master/basic/tcp-client-server)以将连接ID​​添加到错误消息中...

```
 <int:transformer id="errorHandler"
    input-channel="errorChannel"
    expression="payload.failedMessage.payload + ':' + payload.cause.message + ':' + payload.failedMessage.headers.ip_connection_id"/> 
```

一切都按预期工作......

```
preSend on channel 'toSA' ... ip_connection_id=localhost:48161:ef1b59ce-1495-417f-93d3-e38e935922f3

...

preSend on channel 'errorChannel'...

...

TcpNetConnection - TcpNetConnection - Message sent [Payload=FAIL:Failure Demonstration:localhost:48161:ef1b59ce-1495-417f-93d3-e38e935922f3 
```

我建议您使用 DEBUG 日志记录运行，并通过您的流程跟踪消息。

# php - 我如何将值从 javascript .tpl 页面传递到 smarty 中的普通 php 页面

> ID：11324684
> 
> 赞同：-1
> 
> 时间：2012-07-04T07:51:38.753
> 
> 标签：php, ajax, smarty

```
header.tpl(within /templetes)

---------------------------------------------
<HTML>
<HEAD>
<TITLE>{$title}</TITLE>
{literal}
<style type="text/css">
body{
font-family:Arial, Helvetica, sans-serif;
font-size:12px;
color:#333333;
}
</style>
<script src="http://code.jquery.com/jquery-latest.js"></script>
  <script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>
<style type="text/css">
* { font-family: Verdana; font-size: 96%; }
label { width: 10em; float: left; }
label.error { float: none; color: red; padding-left: .5em; vertical-align: top; }
p { clear: both; }
.submit { margin-left: 12em; }
em { font-weight: bold; padding-right: 1em; vertical-align: top; }
</style>

  <script type="text/javascript" language="javascript">
  $(document).ready(function(){
    $("#commentForm").validate();
                                 });

  function ajaxFunction(){
 var ajaxRequest;  // The variable that makes Ajax possible!

 try{
   // Opera 8.0+, Firefox, Safari
   ajaxRequest = new XMLHttpRequest();
 }catch (e){
   // Internet Explorer Browsers
   try{
      ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
   }catch (e) {
      try{
         ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
      }catch (e){
         // Something went wrong
         //alert("Your browser broke!");
         return false;
      }
   }
 }
 // Create a function that will receive data 
 // sent from the server and will update
 // div section in the same page.
 ajaxRequest.onreadystatechange = function(){
   if(ajaxRequest.readyState == 4){
      var ajaxDisplay = document.getElementById('ajaxDiv');
      ajaxDisplay.value = ajaxRequest.responseText;
   }
 }
 // Now get the value from user and pass it to
 // server script.
 var cname = document.getElementById('cname').value;
 var lname = document.getElementById('lname').value;
 var date = document.getElementById('date').value;

 var queryString = "?cname=" + cname ;
 queryString +=  "&lname=" + lname + "&date=" + date;

ajaxRequest.onreadystatechange=stateChanged;
ajaxRequest.open("POST","demo/process.php?cname="+cname+"&lname="+lname+"&date="+date,true);
ajaxRequest.send(null); 

}

  </script>

{/literal}
</HEAD>
<BODY > 
```

## index.tpl 如下

```
{include file="header.tpl" title= $title }
<h1>Login Form</h1>
<form class="cmxform" id="commentForm" >
 <fieldset>

   <p>
     <label for="cname"> First Name</label>
     <em>*</em><input id="cname" name="cname" size="25" class="required" minlength="2" />
   </p>
   <p>
     <label for="lname">Last Name</label>
     <em>*</em><input id="lname" name="lname" size="25"  class="required" />
   </p>
   <p>
     <label for="Date">Date</label>
     <em>*</em><input id="date" name="date" size="25"  class="required" value="" />
   </p>

   <p>
   <input class="submit" type="submit" value="Submit" class="button" onclick='ajaxFunction()' />
   </p>
 </fieldset>
 </form> 
```

现在我想在 process.php 中获取 cname、lname、date。不幸的是我没有得到它我尝试了很多

当我在 index.php 中完成时，我没有得到任何值，请指导我............

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:18:52.550

您是否尝试过使用[$smarty->get_template_vars()](http://www.smarty.net/docsv2/en/api.get.template.vars.tpl) (Smarty2) 或[$smarty->getTemplateVars()](http://www.smarty.net/docs/en/api.get.template.vars.tpl) (Smarty3) 来获取值？

# batch-file - If Exist And Else 批量

> ID：11324685
> 
> 赞同：1
> 
> 时间：2012-07-04T07:51:41.317
> 
> 标签：batch-file

我将如何在其中添加和 Else 选项来表示：
*您没有 java 开发工具包，请选择选项 4？*

```
FOR /R "C:\Program Files" %%a IN (.) DO (
    IF EXIST "%%~a\javac.exe" ECHO You Have The Java Dev Kit Ignore Option 4
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:18:33.010

您需要搜索所有子目录以确定它是否存在。

```
set found=0
FOR /R "C:\Program Files" %%a IN (.) DO (
    IF EXIST "%%~a\javac.exe" set found=1
)
if %found%==0 (
   ECHO You don't have the java dev kit please select option 4
) ELSE (
   echo Found javac.exe
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:18:28.997

```
SET found=0
FOR /R "C:\Program Files" %%a IN (.) DO (
    IF EXIST "%%~a\javac.exe" ( ECHO You Have The Java Dev Kit Ignore Option 4 
    SET found=1)
) 
IF %found%==0 ( ECHO You don't have the java dev kit please select option 4 ) 
```

如果你想要 ELSE，你必须使用`(`和`)`括号。

# c# - 用于商业目的的 iText/iTextSharp：不推荐？

> ID：11324687
> 
> 赞同：9
> 
> 时间：2012-07-04T07:51:48.073
> 
> 标签：c#, .net, pdf, itext

我不太擅长许可证，这就是为什么我想在这里询问 iTextSharp 以及将其用于商业用途的选项。

我想开发一个软件来创建 PDF 并将这些东西上传到一些 DB 上并将它们打印出来。现在它应该是免费的，但也许有一天它会变成商业的。据我所知，iTextSharp 不是 LGLP，它是 AGPL，而 AGPL 用于商业软件不是一个好的解决方案。是对的吗？我不能将 iTextSharp（免费）用于商业软件？

我知道有 PDFSharp，我听说它不像 iText 那样完美，但应该足够了。有什么建议么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-10T17:22:29.130

您可以根据发布时的许可使用旧版本的 iText。2.1.7 版是最后一个发布的版本，它在 MPL 和 LGPL 下获得双重许可。据我所知，这些对闭源软件很友好。您（或理想情况下是律师）将需要查看许可条款以评估其是否适合您的项目。

iText 许可证在 5.0 版本中更改为 AGPL。没有发布的 3.x 或 4.x 版本；增加版本号只是为了使其与 iTextSharp 保持一致。

由于 iText 不再提供较旧的二进制文件，因此出于安全原因，您最好从受信任的来源获取代码并自行编译。

iText SVN 存储库中实际上有一个 4.2.0 版本，它仍然在旧的许可方案下。注意提交信息：

> 这是作为 MPL/LGPL 库提供的 iText 的最终版本。此版本没有震动，也没有在 iText 网站上正式发布。

请参阅：http: ~~[//sourceforge.net/p/itext/code/HEAD/tree/tags/iText_4_2_0/](http://sourceforge.net/p/itext/code/HEAD/tree/tags/iText_4_2_0/)~~（链接已损坏）

我不知道这有多等效，但这是在标头许可证更改之前官方 iText GitHub 存储库中的最后一次提交（v4.2.0 没有标记，但我猜是这样）： [https://github .com/itext/itextpdf/tree/935969371a8b4e28bc8bb78d6b6c9d87ab2ca8f7](https://github.com/itext/itextpdf/tree/935969371a8b4e28bc8bb78d6b6c9d87ab2ca8f7)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-04T08:27:15.723

问题不在于您在使用 iText 时是否赚钱。在封闭源代码产品中使用 iText 是您的事。只要您也在 AGPL 下发布您自己的代码，您就可以在 AGPL 下免费使用 iText 的同时通过您的产品赚很多钱。

您可以稍后更改产品的许可证并使其成为封闭源代码，但您必须使用您赚到的一部分钱来为自己购买 iText 商业许可证。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2018-02-22T17:49:15.007

GPL 不要求您发布修改后的版本或其任何部分。您可以自由地进行修改并私下使用它们，而无需发布它们。这也适用于组织（包括公司）；组织可以制作修改后的版本并在内部使用，而无需在组织外部发布。

但是，如果您以某种方式向公众发布修改后的版本，则 GPL 要求您根据 GPL 将修改后的源代码提供给程序的用户。

因此，GPL 允许以某些方式发布修改后的程序，而不是其他方式；但是是否发布它取决于您的决定。

[https://www.gnu.org/licenses/gpl-faq.html#GPLRequireSourcePostedPublic](https://www.gnu.org/licenses/gpl-faq.html#GPLRequireSourcePostedPublic)

# c# - 如何在 WPF 中刷新数据网格

> ID：11324688
> 
> 赞同：39
> 
> 时间：2012-07-04T07:51:49.203
> 
> 标签：c#, mysql, wpf, ado.net, wpfdatagrid

我的源代码在 MySQL 数据库中，我已经做了一个更新命令，现在我需要刷新我的`DataGrid`.

```
MySqlCommand cmd = new MySqlCommand(
  "update request set status = " + StatusRequest(value) + 
  " where id = " + rowView[0].ToString() + "", conn);
MySqlDataReader myReader = cmd.ExecuteReader(); 
```

如何刷新我的`DataGrid`？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-07-04T08:06:15.023

尝试`mydatagrid.Items.Refresh()`

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-07-04T08:03:28.220

更新后重新加载网格的数据源

```
myGrid.ItemsSource = null;
myGrid.ItemsSource = myDataSource; 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2015-01-02T08:05:35.707

来自[MSDN](http://msdn.microsoft.com/en-us/library/ff407126(v=vs.110).aspx) -

```
CollectionViewSource.GetDefaultView(myGrid.ItemsSource).Refresh(); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-07-04T08:12:51.163

将您的 Datagrid 绑定到[ObservableCollection](http://msdn.microsoft.com/en-us/library/ms668604.aspx)，然后更新您的集合。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-04T07:53:58.690

怎么样

```
mydatagrid.UpdateLayout(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-04T10:42:14.580

我遇到了很多麻烦，这就是帮助我用新值重新加载 DataGrid 的原因。确保使用从中获取数据的数据类型来获取最新的数据值。

我在下面表示了这`SomeDataType`一点。

```
DataContext.Refresh(RefreshMode.OverwriteCurrentValues, DataContext.SomeDataType); 
```

希望这可以帮助有同样问题的人。

# php - 如何创建这样的 php 脚本，以便它可以从其他 php 脚本和命令行中获取相同的参数

> ID：11324694
> 
> 赞同：-4
> 
> 时间：2012-07-04T07:52:07.750
> 
> 标签：php, command-line, scripting

我正在创建 PHP 脚本，该脚本现在正在从命令行获取参数，但一段时间后它可能会更改为仅包含我的 PHP 脚本。

如何为这两种情况准备脚本？

我可以创建这样的 PHP 脚本，以便它可以从命令行和其他仅包含我的脚本的脚本中获取参数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:00:32.210

如果我理解得很好，您将被迫使用参数来判断您的脚本是否使用命令行参数，或者他是否会调用您的其他脚本。

在您的脚本中，您可以执行以下操作：

```
if (!strcmp($argv[1], "-s"))
    shell_exec('php YourOtherScript.php [put_args_here]');
else
    your_current_script($argv); 
```

然后，如果你想执行你的其他脚本，你会做一个类似的命令：

```
php MyScript.php -s [args] 
```

否则，只需输入标准参数：

```
php MyScript.php [args] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:01:35.183

可以很简单：

```
if(isset($argv[1])){ 
//commadn line arguments
$foo=$argv[1]
}else{
//not
$foo=$foo
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T07:57:56.140

假设脚本 A 是第一个可以从命令行调用并包含在另一个脚本中的脚本，而脚本 B 是包含它的脚本。如果您在 B 中包含脚本 A，您将可以访问脚本 B 中的任何变量。那么为什么不在脚本 A 中添加检查以查看是否已从命令行传递了参数，如果没有传递参数从命令行使用您在脚本 B 中创建的任何变量

# java - PrimeFaces 不渲染

> ID：11324700
> 
> 赞同：5
> 
> 时间：2012-07-04T07:52:27.217
> 
> 标签：java, jsf, primefaces

在我的 Maven 项目中，我创建了一个“index.xhtml”文件。当我构建并运行该项目时，Web 浏览器没有显示任何内容。当我查看源代码时，我仍然可以看到源代码，而不是普通的 html 标记。

我尝试通过以下方式创建 XHTML 文件：

1.  选择项目，右键单击 New.. 并选择 Other.. 并选择“Web”类别，然后选择 JSF Page。
2.  选择项目，右键单击 New.. 并选择 Other.. 并选择“JavaServer Faces”类别，然后选择 JSF Page。
3.  选择项目，右键单击 New.. 并选择 Other.. 并选择“Other”类别，然后选择 XHTML Page。

上述方法均无效。

***Maven POM***

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>ProfitV10</groupId>
<artifactId>ProfitV10</artifactId>
<version>1.0-SNAPSHOT</version>
<packaging>war</packaging>

<name>ProfitV10</name>

<properties>
    <endorsed.dir>${project.build.directory}/endorsed</endorsed.dir>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

<dependencies>
    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-web-api</artifactId>
        <version>6.0</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.primefaces</groupId>
        <artifactId>primefaces</artifactId>
        <version>3.3.1</version>
    </dependency>
</dependencies>

<repositories>
    <repository>
        <id>prime-repo</id>
        <name>PrimeFaces Maven Repository</name>
        <url>http://repository.primefaces.org</url>
        <layout>default</layout>
    </repository>
</repositories>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
                <compilerArguments>
                    <endorseddirs>${endorsed.dir}</endorseddirs>
                </compilerArguments>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.1.1</version>
            <configuration>
                <failOnMissingWebXml>false</failOnMissingWebXml>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <version>2.1</version>
            <executions>
                <execution>
                    <phase>validate</phase>
                    <goals>
                        <goal>copy</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>${endorsed.dir}</outputDirectory>
                        <silent>true</silent>
                        <artifactItems>
                            <artifactItem>
                                <groupId>javax</groupId>
                                <artifactId>javaee-endorsed-api</artifactId>
                                <version>6.0</version>
                                <type>jar</type>
                            </artifactItem>
                        </artifactItems>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

***web.xml***

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>faces/index.xhtml</welcome-file>
    </welcome-file-list>
</web-app> 
```

***索引.xhtml***

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>
        <p:spinner />
    </h:body>
</html> 
```

这是第一种情况。第二种情况，我已经有一个使用 PrimeFaces 运行良好的 NetBeans Web 应用程序项目。“index.html”确实渲染了。但是当我创建一个新的 JSF 页面并包含 PrimeFaces 命名空间时`xmlns:p="http://primefaces.org/ui"`，这个特定的 JSF 和其他新创建的 JSF 页面不会呈现。

一定是我缺少的东西，但我不知道是什么。

我的环境如下：

*   JDK6
*   网豆 7.1.2
*   PrimeFaces 3.3
*   阿帕奇 7.0.2
*   Windows 7（32 位）

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T09:18:16.747

由于您将`/index.xhtml`其用作欢迎文件，因此您还应该将 FacesServlet 映射到该扩展。

如果您不需要现有的前缀映射，请将其替换为：

```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping> 
```

否则，只需添加`*.xhtml`模式意味着您最终会得到：

```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping> 
```

请注意，您几乎总是希望在`*.xhtml`那里进行映射，以防止将 Facelets 的源代码暴露给公众。

**更新：**

关于 .jsf 和 .xhtml 的区别：

`.jsf`是默认映射之一（如果您在 JSF 2.1 中根本没有声明 FacesServlet，那么您会得到这个）。它源于磁盘上物理文件的扩展名（.jsp 或 .xhtml）与 URL 中使用的扩展名之间的差异。

不幸的是，这些在历史上是不同的，因为 JSF 是一种附加技术，必须通过单独的显式 Servlet（Faces Servlet）。纯 JSP 从来没有这个限制，因为它更多是内置的。JSF 页面最初仅在 JSP 中编写，因此如果您只是在 URL 请求中使用 .jsp，则容器将直接转到 JSP 并跳过 Faces Servlet。

因此必须为此发明一种解决方法，即将 Faces Servlet 映射到`*.jsf`，然后 Faces Servlet 将定向到 JSP 文件，该文件仍然`.jsp`在磁盘上具有扩展名。

就我个人而言，我认为简单`*.xhtml`的`*.xhtml`映射是唯一明智的开箱即用选项，但由于向后兼容性，JSF 似乎无法再将其设置为默认值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-25T13:14:20.150

尝试将 primefaces.jar 文件放在 WebContent/WEB-INF/lib 下，然后将此 jar 添加到构建路径

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T08:31:28.847

添加另一个 servlet 映射：

```
<servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>*.jsf</url-pattern>
</servlet-mapping> 
```

之后使用以下 URL：*http://[HOST]:[PORT]/[WEBAPP]/faces/index。**jsf*** （**.jsf**而不是 .xhtml）。

# iphone - Cocos2D 2.0 移除了 ARCH_OPTIMAL_PARTICLE_SYSTEM，如何创建点粒子？

> ID：11324707
> 
> 赞同：3
> 
> 时间：2012-07-04T07:53:10.370
> 
> 标签：iphone, cocos2d-iphone, ccparticlesystem

我正在将我的 Cocos2D 游戏升级到 Cocos2D 2.0-rc23。我发现 Cocos2D 2.0 删除了 ARCH_OPTIMAL_PARTICLE_SYSTEM。

" [FIX] 粒子：正确处理预乘图像

```
Fixed possible memory leak when changing textures.
Examples: Removed ARCH_OPTIMAL_PARTICLE_SYSTEM since PointParticle is no longer supported 
```

"

在我当前的代码中。

CCParticleSystem *emitter = [ARCH_OPTIMAL_PARTICLE_SYSTEMparticleWithFile:@"ps.plist"];

我怎样才能改变这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T09:29:23.227

尝试使用*CCParticleSystemQuad*代替：

```
CCParticleSystem *emitter = [CCParticleSystemQuad particleWithFile:@"ps.plist"]; 
```

# asp.net-mvc - 从 asp.net web api 发布操作重定向

> ID：11324711
> 
> 赞同：121
> 
> 时间：2012-07-04T07:53:42.917
> 
> 标签：asp.net-mvc, c#-4.0, asp.net-mvc-4, asp.net-web-api

我对 ASP.NET 4.0 Web API 很陌生。我们可以在 POST 操作结束时重定向到另一个 URL 吗？例如...`Response.Redirect(url)`

实际上，我`www.abcmvc.com`通过 Web API（例如`www.abcwebapi.com/upload`）从 MVC 应用程序（例如）上传文件

这`upload`是 POST 操作。我将多部分表单发布到 Web API 上传控制器的发布操作。上传后我想重定向回`www.abcmvc.com`.

这可能吗？

* * *

## 回答 #1

> 赞同：225
> 
> 时间：2012-07-04T08:02:19.170

当然：

```
public HttpResponseMessage Post()
{
    // ... do the job

    // now redirect
    var response = Request.CreateResponse(HttpStatusCode.Moved);
    response.Headers.Location = new Uri("http://www.abcmvc.com");
    return response;
} 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-06-30T14:14:23.787

这是另一种无需对 url 进行硬编码即可访问网站根目录的方法：

```
var response = Request.CreateResponse(HttpStatusCode.Moved);
string fullyQualifiedUrl = Request.RequestUri.GetLeftPart(UriPartial.Authority);
response.Headers.Location = new Uri(fullyQualifiedUrl); 
```

注意： *仅当您的 MVC 网站和 WebApi 在同一个 URL 上时才有效*

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-09-18T09:34:39.107

```
 [HttpGet]
    public RedirectResult Get()
    {
        return RedirectPermanent("https://www.google.com");
    } 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-02-17T05:52:53.450

**你可以检查这个**

```
[Route("Report/MyReport")]
public IHttpActionResult GetReport()
{

   string url = "https://localhost:44305/Templates/ReportPage.html";

   System.Uri uri = new System.Uri(url);

   return Redirect(uri);
} 
```

# android - Android：从复制保护到应用程序许可

> ID：11324712
> 
> 赞同：1
> 
> 时间：2012-07-04T07:53:43.253
> 
> 标签：android, licensing, copy-protection

我在 Android 上的应用添加了一个新的主要模块，它将应用大小从 ~10Mb 更改为 ~100Mb。计划是实施“应用程序许可”，并允许应用程序 a) 安装在 SD 卡上，b) 安装后需要时从应用程序内部下载重比特（视频）。我的问题是：以前的用户会发生什么？由于复制保护，在他们的设备上，该应用程序从一开始就安装在内部存储器中。更新会自动将应用程序移至 SD 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:13:12.310

如果您在安装后下载这些位，您可以允许用户继续选择放置应用程序的位置（我假设基本应用程序仍然是 10MB？），并且任何其他内容都由您下载到 SD 卡中 -应用程序。只要你持有对视频位置的引用，知道它是否存在（通过检查预期位置的文件系统），你就可以确定它是否需要下载。

为了完全理解，可能还值得看看 Play 商店为大型应用程序提供的功能 - 您可以将应用程序设置为需要由 Google Play 托管的额外下载，并告知用户应用程序的总大小。

当然，如果您要增加主应用程序的大小并将其保留在内存中，一些用户可能会遇到新文件大小的问题。他们将被告知它在更新时无法安装，并且必须将其移动到 SD 卡中。

# objective-c - 在 iOS 3.0 中自定义视频视图

> ID：11324714
> 
> 赞同：0
> 
> 时间：2012-07-04T07:53:44.890
> 
> 标签：objective-c, xcode, video

我需要帮助，如何在 iOS 3.0 中添加自定义视频视图！我使用 MPMoviePlayerController，但在 iOS 3.2 中使用方法（视图），而不是更早的版本。我理解是旧版本，但需要在iOS 3.0 中支持。或者存在这种实现的任何替代方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T10:30:08.760

我解决了如下问题。iOS 3.0 到 3.2，我默认显示播放器，而 iOS 3.2 显示自定义 MPMoviePlayerController。

# c++ - 如何在多个线程之间同步。只有一个在写

> ID：11324715
> 
> 赞同：3
> 
> 时间：2012-07-04T07:53:48.540
> 
> 标签：c++, multithreading, boost, concurrency, locking

进程在其生命周期内有 1 个主线程和 1 到 50 个其他工作线程。当主线程接受新连接时，它会将其保存在 boost::unordered_map 中，我们称之为“新 con 容器”。工作线程不时检查“新 con 容器”是否有新连接。出于同步目的，有一个 boost::mutex。当主线程写入“new con container”时，它会锁定这个互斥锁。检查此容器时的工作线程也会锁定互斥锁。

有没有办法让工作线程不锁定互斥锁并从“新con容器”中安全地读取？工作线程对套接字进行实时操作，因此锁定互斥体会影响性能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T08:08:18.663

如果您有一个作家和多个读者，请考虑使用[shared_mutex](http://www.boost.org/doc/libs/1_41_0/doc/html/thread/synchronization.html#thread.synchronization.mutex_types.shared_mutex)：

> boost::shared_mutex 类提供了多读取器/单写入器互斥锁的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:15:50.113

而不是由工作线程轮询“新con容器”，您应该使用条件变量让工作人员阻塞，直到其中一个人有事情要做。这将减少争用，从而减少锁的开销。

另外，您可以对容器进行分区。与其拥有一个容器，不如使用更多并为每个容器分配一组固定的线程。然后主线程会将每个新连接推送到不同的容器。

亲切的问候托斯滕

# android - 安装安卓应用程序时出错

> ID：11324716
> 
> 赞同：1
> 
> 时间：2012-07-04T07:53:50.850
> 
> 标签：android, android-c2dm

我尝试在我的 android 应用程序中使用 C2DM，但添加后我无法安装该应用程序。我收到此错误“安装错误：INSTALL_PARSE_FAILED_MANIFEST_MALFORMED”。但我看不出有什么问题。

有谁知道我做错了什么？

```
<?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="Wordy.Game"
          android:versionCode="1"
          android:versionName="0.1"
          android:installLocation="preferExternal">
          <uses-sdk android:minSdkVersion="8" />

          <permission
            android:name="Wordy.Game.permission.C2D_MESSAGE" android:protectionLevel="signature" />
          <uses-permission 
            android:name="Wordy.Game.permission.C2D_MESSAGE" />
            <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />

          <uses-permission android:name="android.permission.INTERNET"/>
          <uses-permission android:name="android.permission.VIBRATE"/>
          <uses-permission android:name="android.permission.GET_ACCOUNTS" />

        <application android:label="@string/app_name" android:icon="@drawable/wordy">
            <activity android:name="Main"
                      android:label="@string/app_name" android:screenOrientation="portrait">
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />
                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
            <receiver
                android:name=".C2DMRegistrationReceiver"
                android:permission="com.google.android.c2dm.permission.SEND" >
                <intent-filter >
                    <action android:name="com.google.android.c2dm.intent.REGISTRATION" >
                    </action>
                    <category android:name="Wordy.Game" />
                </intent-filter>            
            </receiver>
             <receiver
                android:name=".C2DMRegistrationReceiver"
                android:permission="com.google.android.c2dm.permission.SEND" >

                <intent-filter >
                    <action android:name="com.google.android.c2dm.intent.RECEIVE" >
                    </action>
                    <category android:name="Wordy.Game" />
                </intent-filter>
            </receiver>

      <activity android:name="Result" android:label="@string/app_name" android:screenOrientation="portrait" />
              <activity android:name="PlayField" android:label="@string/app_name" android:screenOrientation="portrait" />
              <activity android:name="Game" android:label="@string/app_name" android:screenOrientation="portrait" />
              <activity android:name="News" android:label="@string/app_name" android:screenOrientation="portrait" />
              <activity android:name="PlayOnline" android:label="@string/app_name" android:screenOrientation="portrait" />     
              <activity android:name="UsersOnline" android:label="@string/app_name" android:screenOrientation="portrait" />        
        </application>
    </manifest> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T05:55:20.760

我终于发现了问题所在，应用程序上的包名不允许以大写字母开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:13:30.987

尝试在您的活动前加上 . 或完整的包名：

```
<activity android:name="com.gizm0.YourClass"></activvity> 
```

或者

```
 <activity android:name=".YourClass"></activvity> 
```

# c# - 最小日期和最大日期

> ID：11324718
> 
> 赞同：0
> 
> 时间：2012-07-04T07:53:58.457
> 
> 标签：c#

我有一个日期列表如下

```
 List<string> nameList = new List<string>();
 nameList.Add("20120618PM");
 nameList.Add("20120622PM");
 nameList.Add("20120622AM");
 nameList.Add("20120628PM");
 nameList.Add("20120702PM");
 nameList.Add("20120629AM");
 nameList.Add("20120629PM"); 
```

我想从列表中找到 MAXDATE 和 MIN DATE。请让我知道如何继续。

问候，
香娜

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T07:56:36.253

那是什么格式？`"yyyyMMddtt"`?

有带日期的 AM PM。没有时间陪上午/下午。所以我假设上午是 00:00:00，下午是 12:00:00

首先更正您的格式，然后使用它

```
List<DateTime> temp = nameList.Select(x => 
DateTime.ParseExact(x, "yyyyMMddtt", CultureInfo.InvariantCulture)).ToList(); 
```

然后

```
temp.Min("yyyyMMddtt");

temp.Max("yyyyMMddtt"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T07:59:50.817

如果日期格式是 yyyyMMdd，那么即使使用 AM/PM 也可以作为字符串排序

```
 nameList.Max() 
```

如果您有一年加上小时/分钟和 AM/PM，那么您必须解析为 DateTime。正如其他答案中所建议的那样，我建议无论如何都进行解析。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T07:55:35.330

```
// 1\. Convert your string list to datetimes  
IEnumerable<DateTime> dates = nameList.Select(m => DateTime.Parse(m, yourFormatProvider));

// 2\. Get first and last date
DateTime maxDate = dates.Max();
DateTime minDate = dates.Min(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T08:07:11.687

如果我不得不猜测，我似乎猜到了。我会这样做

```
var dates = nameList.ConvertAll(s => {
        var dateString = s.SubString(6);
        var timeString = s.SubString(7, 2);

        var date = DateTime.Parse(dateString);

        if (timeString == "PM")
        {
           date = date.AddHours(12);
        }

        return date;
    });

var max = date.Max();
var min = date.Min(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-04T09:23:42.183

由于您已`yyyyMMdd`在评论中指定格式，因此您需要从字符串中修剪`PM`和`AM`

```
List<DateTime> dateList = 
  nameList.Select(x =>
  DateTime.ParseExact(
                      x.TrimEnd("PM".ToCharArray()).TrimEnd("AM".ToCharArray()), 
                     "yyyyMMdd", 
                      CultureInfo.InvariantCulture)
                      ).ToList();

            var Minimum = dateList.Min();
            var Maximum = dateList.Max();
            Console.WriteLine(Minimum.ToString());
            Console.WriteLine(Maximum.ToString()); 
```

这会给你：

> 2012 年 6 月 18 日上午 12:00:00 2012 年 7 月 2 日上午
> 12:00:00

# c# - T 类型的泛型，其中 T 具有特定属性

> ID：11324722
> 
> 赞同：10
> 
> 时间：2012-07-04T07:54:14.757
> 
> 标签：c#, generics, attributes, serializable

是否可以创建具有特定属性`T`的通用类型方法？`T`

例如：

```
public static XmlDocument SerializeObjectToXml<T>(T obj)
{
    //...
} 
```

我只想序列化具有`Serializable`和/或`DataContract`属性的类：

```
[Serializable]
[DataContract(Name = "viewModel", Namespace = "ns")]
internal class ViewModel
{
    //...
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-04T07:58:45.320

恐怕不行。有 3 种类型的约束：派生、构造函数和引用/值类型。

我相信，您应该检查方法主体中的属性，如果可序列化对象不符合条件，请调用不同的方法来处理它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-04T08:05:04.557

也许您可以通过创建一个具有 Serializable 属性的基类来间接做到这一点，并向您的泛型类添加一个约束，以便类型参数应该从该基类继承：

```
[Serializable]
public class MyBase {}

public static XmlDocument SerializeToXml<T>( T obj ) where T : MyBase {} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T15:59:59.607

静态的，我不这么认为。但是你可以在运行时检查类型 T ：

```
var isDataContract = typeof(T).GetCustomAttributes(typeof(DataContractAttribute), true).Any();
if (!isDataContract) throw new InvalidOperationException("You can only serialize classes that are marked as data contracts.");
//... continue serialization 
```

# python - 我可以在 django 中的单个表单中使用多个表单集，如果可以，如何？

> ID：11324723
> 
> 赞同：9
> 
> 时间：2012-07-04T07:54:19.673
> 
> 标签：python, django, forms, formset

我必须制作一个使用多个表单集的表单。请告诉我这是否可能。如果是，那怎么办？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-05T04:22:46.497

您可以在表单中添加尽可能多的表单集。只需在视图中创建/初始化它们并传递给模板以在表单中呈现。

就像是：

```
{{ formset1.management_form }}
{% for form in formset1 %}
    {{ form }}
{% endfor %}

{{ formset2.management_form }}
{% for form in formset2 %}
    {{ form }}
{% endfor %} 
```

您在一个视图中使用多个表单集，您需要为表单使用前缀，如此处所述在视图中使用多个表单集[简而言之](https://docs.djangoproject.com/en/dev/topics/forms/formsets/#using-more-than-one-formset-in-a-view) ：

```
article_formset = ArticleFormSet(prefix='articles')
book_formset = BookFormSet(prefix='books') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-04T03:16:46.513

添加prefix='article'的时候需要考虑到formset的id会发生变化，还有其他的变化，比如

```
<label for="id_form-0-title">Title:</label> 

<label for="id_article-0-title">Title:</label> 
```

# matlab - Matlab parfor 工作分配

> ID：11324724
> 
> 赞同：0
> 
> 时间：2012-07-04T07:54:20.967
> 
> 标签：matlab, parallel-processing, load-balancing

我有一个通过 100 次迭代的 parfor 循环，每次迭代的工作量都不同，但会以第一次花费最多时间而最后一次最快的方式线性变化。但是，当我使用我的四个实例/实验室运行 parfor 循环时，在过去的几个小时内，只有一个实验室处于活动状态，因为它自己运行了几次第一次迭代。

所以我知道哪些迭代是慢的。我怎样才能使核心之间的工作量更加均匀。例如，以某种方式强制所有实验室开始研究前四个慢速的，然后按顺序进行？或类似的东西，以防止只有一个活动核心单独运行几个慢速核心..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T10:11:44.233

Matlab parfor does nothing more but split up the indices and distributes them to the workers. It does this by creating contiguous chunks from the indices. I don't know the exact algorithm but this means that data with similar indices get computed in the same chunk and by the same worker.

The simplest solution would be a stochastic one. Just shuffle your indices so that the work intensive steps are distributed nicely. While this doesn't give you any guarantees on performance it is simple and will work most of the time.

Some example code:

```
% dummy data
N=10;
data=1:N;

% generate the permutated indices
permIndex=randperm(N);

% permute the data
dataPermuted=data(permIndex);

% run the loop
parfor i=1:N
    % do something e.g. pause for the time as specified by data
    pause(dataPermuted(i));
end

%invert the index permutation
dataInversePermuted(permIndex)=dataPermuted; 
```

I used pause to simulate the different computation times.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T13:12:01.427

我认为这在任何地方都没有记录，但是您可以快速推断出 PARFOR 以反向循环顺序运行迭代（使用`pause`并且`disp`如果您想看到它在运行中）。所以，你应该简单地反转你的循环。PARFOR 无法让您显式控制执行顺序，但使用[for-drange 的](http://www.mathworks.com/help/toolbox/distcomp/bqkoovb.html)SPMD可以（尽管 PARFOR 更容易使用）。

@denahiro 的建议也不错。

# javascript - Jquery tablesorter排序不起作用

> ID：11324727
> 
> 赞同：2
> 
> 时间：2012-07-04T07:54:33.363
> 
> 标签：javascript, jquery-plugins

海这是我的 Jquery 表格排序器的编码编码

```
<script type="text/javascript">
 $(document).ready(function() {
            $("#sorttable").tablesorter()
                        .tablesorterPager({ container: $("#pagerOne"), positionFixed: false })
                         });
</script> 
```

数据就像

```
14.6km,about:21 mins
12.6km,about:41 mins
9.6km,about:15 mins
5.6km,about:5 mins
140.6km,about:3 hours 21 mins 
```

像上面那样，如何对上述类型的数据进行排序，请给我任何解决方案

问题是数据不是排序只是跳跃数据。请帮助解决这个问题

```
<table id="sorttable" class="yui" width="580px" style="display: block; ">
<thead><tr><th align="center" class="header headerSortDown"><a href="#" title="Click Header to Sort">sort1</a></th><th align="center" class="header"><a href="#" title="Click Header to Sort">sort2</a></th><th align="center" class="header"> <a href="#" title="Click Header to Sort">sort3</a></th></tr></thead>

 <tbody><tr><td><span id="Labe1" style="display:inline-block;color:Sienna;height:30px;width:250px;">993 km,About :14 hours 27 mins</span></td><td align="center" style="width: 150px; "><img id="lblstore1" src="Blue%20hills.jpg" style="height:30px;width:40px;" title="Near Santhi sagar,Koramangala,5 th block,Bangalore,Karnataka                                                                                           "></td><td align="center" style="width: 150px; "><input id="but1" type="button" value="View" style="height:30px;width:75px;" onmouseover="viewmap('lblstorename1')"></td></tr>
<tr><td><span id="Labe10" style="display:inline-block;color:Sienna;height:30px;width:250px;">993 km,About :14 hours 27 mins</span></td><td align="center" style="width: 150px; "><img id="lblstore10" src="Blue%20hills.jpg" style="height:30px;width:40px;" title="2954 23, 2nd Stage, D Block, MKK Road, Rajaji Nagar,Bangalore,Karnataka                                                                                           "></td><td align="center" style="width: 150px; "><input id="but10" type="button" value="View" style="height:30px;width:75px;" onmouseover="viewmap('lblstorename10')"></td></tr>
<tr><td><span id="Labe2" style="display:inline-block;color:Sienna;height:30px;width:250px;">1,003 km,About :14 hours 42 mins</span></td><td align="center" style="width: 150px; "><img id="lblstore2" src="Blue%20hills.jpg" style="height:30px;width:40px;" title="No. 5, 80 ft Road,R T Nagar, Bangalore,Bangalore,                                                                                                    "></td><td align="center" style="width: 150px; "><input id="but2" type="button" value="View" style="height:30px;width:75px;" onmouseover="viewmap('lblstorename2')"></td></tr>
<tr><td><span id="Labe3" style="display:inline-block;color:Sienna;height:30px;width:250px;">993 km,About :14 hours 27 mins</span></td><td align="center" style="width: 150px; "><img id="lblstore3" src="Blue%20hills.jpg" style="height:30px;width:40px;" title=" 2, 80FT ROAD,1ST STAGE, 2ND BLOCK, HBR LAYOUT, K.K.HALLI, BANGALOREBANGALORE ,Bangalore,                                                                                                    "></td><td align="center" style="width: 150px; "><input id="but3" type="button" value="View" style="height:30px;width:75px;" onmouseover="viewmap('lblstorename3')"></td></tr>
<tr><td><span id="Labe4" style="display:inline-block;color:Sienna;height:30px;width:250px;">993 km,About :14 hours 27 mins</span></td><td align="center" style="width: 150px; "><img id="lblstore4" src="Blue%20hills.jpg" style="height:30px;width:40px;" title="87, HPCL PETROL PUMPRESIDENCY ROAD  ,Bangalore,                                                                                                    "></td><td align="center" style="width: 150px; "><input id="but4" type="button" value="View" style="height:30px;width:75px;" onmouseover="viewmap('lblstorename4')"></td></tr>
<tr><td><span id="Labe5" style="display:inline-block;color:Sienna;height:30px;width:250px;">993 km,About :14 hours 27 mins</span></td><td align="center" style="width: 150px; "><img id="lblstore5" src="Blue%20hills.jpg" style="height:30px;width:40px;" title="Mats Fuel Park,   123 2, ITPL Road, Brookefields, Kundalahalli, Bangalore - 37,Bangalore,                                                                                                    "></td><td align="center" style="width: 150px; "><input id="but5" type="button" value="View" style="height:30px;width:75px;" onmouseover="viewmap('lblstorename5')"></td></tr>
<tr><td><span id="Labe6" style="display:inline-block;color:Sienna;height:30px;width:250px;">1,005 km,About :14 hours 39 mins</span></td><td align="center" style="width: 150px; "><img id="lblstore6" src="Blue%20hills.jpg" style="height:30px;width:40px;" title=" 124 2, C O HPCL PETROL PUMP, BYRASANDRA ROAD, DRDO TOWNSHIP, C V  RAMAN NAGAR, BANGALORE ,Bangalore,                                                                                                    "></td><td align="center" style="width: 150px; "><input id="but6" type="button" value="View" style="height:30px;width:75px;" onmouseover="viewmap('lblstorename6')"></td></tr>
<tr><td><span id="Labe7" style="display:inline-block;color:Sienna;height:30px;width:250px;">993 km,About :14 hours 27 mins</span></td><td align="center" style="width: 150px; "><img id="lblstore7" src="Blue%20hills.jpg" style="height:30px;width:40px;" title="17 7, SANTOSH PETROL PUMPNEW BEL ROAD, CHIKKAMARANAHALLI  ,Bangalore,Karnataka                                                                                           "></td><td align="center" style="width: 150px; "><input id="but7" type="button" value="View" style="height:30px;width:75px;" onmouseover="viewmap('lblstorename7')"></td></tr>
<tr><td><span id="Labe8" style="display:inline-block;color:Sienna;height:30px;width:250px;">1,001 km,About :14 hours 39 mins</span></td><td align="center" style="width: 150px; "><img id="lblstore8" src="Blue%20hills.jpg" style="height:30px;width:40px;" title="No. 6, 100 ft Road,1st Stage,Indiranagar,Bangalore,Karnataka                                                                                           "></td><td align="center" style="width: 150px; "><input id="but8" type="button" value="View" style="height:30px;width:75px;" onmouseover="viewmap('lblstorename8')"></td></tr>
<tr><td><span id="Labe9" style="display:inline-block;color:Sienna;height:30px;width:250px;">993 km,About :14 hours 27 mins</span></td><td align="center" style="width: 150px; "><img id="lblstore9" src="Blue%20hills.jpg" style="height:30px;width:40px;" title="52, HPCL PETROL PUMP15TH CROSS, 1ST PHASE JPNAGAR  ,Bangalore,Karnataka                                                                                           "></td><td align="center" style="width: 150px; "><input id="but9" type="button" value="View" style="height:30px;width:75px;" onmouseover="viewmap('lblstorename9')"></td></tr>
</tbody>
<tfoot>
<tr id="pagerOne"><td colspan="7"><img src="JquerryFiles/img/first.png" class="first" alt="img"><img src="JquerryFiles/img/prev.png" class="prev" alt="img"><input type="text" class="pagedisplay"><img src="JquerryFiles/img/next.png" class="next" alt="img"><img src="JquerryFiles/img/last.png" class="last" alt="img"><select class="pagesize"><option selected="selected" value="10">10</option><option value="20">20</option><option value="30">30</option><option value="40">40</option><option value="50">50</option><option value="60">60</option><option value="70">70</option><option value="80">80</option></select></td></tr>
</tfoot>
</table> 
```

还有这里 1,5,10 条记录没有排序......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T19:57:07.040

我不确定您尝试对其他列的排序做什么......如果您想要图像或按钮的自定义排序顺序，您可以使用自定义文本提取方法将它们的属性之一用于排序顺序。

我假设您的主要目标是按距离对行进行数字排序。为此，请使用自定义解析器提取字符串的第一个单词并删除逗号，然后再进行数字比较。

检查[this fiddle](http://jsfiddle.net/7YqsU/1/)以获取使用按距离数字排序的数据的简化示例。

也可以看看：

*   [JQuery TableSorter Comma-Digit Parser 不工作](https://stackoverflow.com/questions/876092/jquery-tablesorter-comma-digit-parser-not-working)
*   [Tablesorter 自定义解析器](http://tablesorter.com/docs/example-parsers.html)
*   [Tablesorter 自定义文本提取](http://tablesorter.com/docs/example-option-text-extraction.html)

# javascript - javascript输出消失

> ID：11324740
> 
> 赞同：-2
> 
> 时间：2012-07-04T07:55:43.927
> 
> 标签：javascript

```
 function init(){
    var flag=true;
    if(flag)
    {
        document.getElementById("panel").innerHTML=
            "power is on<br />";
    }
    if(7<2)
    {
        document.getElementById("panel").innerHTML=
            "<br />failure";
    }
        if(2<7)
    {
        document.getElementById("panel").innerHTML=
            "<br />success";
    }
}
window.onload=init; 
```

这是 if.js 我将它加载到另一个 html 文件中，但这是运行的主要代码。

我得到的唯一输出是“成功”被写入但“电源开启”没有显示出什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T08:02:50.800

不要在多个地方分配innerHTML，创建一个字符串并立即分配它。

```
var flag = true,
    html = "";
if (flag) {
    html += "power is on<br />";
}
if (7 < 2) {
    html += "<br />failure";
}
if (2 < 7) {
    html += "<br />success";
}
document.getElementById("panel").innerHTML = html; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:08:03.163

您可以使用 else if 代替 if

```
function init(){
    var flag=true;
    if(flag)
    {
        document.getElementById("panel").innerHTML=
            "power is on<br />";
    }
    else if(7<2)
    {
        document.getElementById("panel").innerHTML=
            "<br />failure";
    }
        else if(2<7)
    {
        document.getElementById("panel").innerHTML=
            "<br />success";
    }
}
window.onload=init; 
```

请注意，上面的代码总是显示“power is on”，因为在您的方法中您将 flag 分配为 true，如果您想要多个输出，您可以按照其他建议使用连接方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T08:09:28.187

最后一个 if 语句将始终评估为真。

```
if(2<7)
{
    document.getElementById("panel").innerHTML=
        "<br />success";
} 
```

这意味着“成功”将始终替换面板元素内的任何内容。确保您的条件确实是您想要的，并且替换确实是您想要的。否则像其他人建议的那样附加字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T07:58:07.493

```
 var panel =  document.getElementById("panel");
    if(flag) {
        panel.innerHTML += "power is on<br />";
    }

    if(7<2) {
        panel.innerHTML += "<br />failure";
    }
    if(2<7) {
        panel.innerHTML += "<br />success";
    } 
```

每次更改时`innerHTML`都会覆盖所有以前的内容，因此您必须在字符串后面附加`+=`.

也许您可能还想只创建一次对面板元素的引用。

小提琴示例：http: [//jsfiddle.net/ypznU/](http://jsfiddle.net/ypznU/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T07:58:26.000

您正在替换当前的 HTML，您应该使用 += 而不是 =。

```
function init(){
var flag=true;
if(flag)
{
    document.getElementById("panel").innerHTML +=
        "power is on<br />";
}
if(7<2)
{
    document.getElementById("panel").innerHTML +=
        "<br />failure";
}
    if(2<7)
{
    document.getElementById("panel").innerHTML +=
        "<br />success";
} 
```

这对你有什么作用？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-04T07:59:03.953

`innerHTML`元素的设置用给定的 HTML 字符串*替换*它之前的任何内容。所以发生的事情是“power is on”在瞬间可见（现在的计算机真的很快），然后立即被“success”取代。

# android - 我可以在包含应用程序之外使用 ORMlite/SQLlite

> ID：11324741
> 
> 赞同：0
> 
> 时间：2012-07-04T07:55:46.757
> 
> 标签：android, sqlite, ormlite

我想对我创建的 DatabaseService 类进行单元测试（修改了我在网上找到的 WishList 应用程序）包 com.test.db；

```
 import java.sql.SQLException;
    import java.util.List;
    import android.content.Context;
    import com.test.model.WishList;

    public class WishListService
    {
        private static WishListService instance;

        public static void init(Context ctx)
        {
            if (null == instance)
            {
                instance = new WishListService(ctx);
            }
        }

        static public WishListService getInstance()
        {
            return instance;
        }

        private DatabaseHelper helper;

        private WishListService(Context ctx)
        {
            helper = DatabaseHelper.getInstance(ctx);
        }

        public List<WishList> getAllWishLists()
        {
            List<WishList> wishLists = null;
            try
            {
                wishLists = helper.getWishListDao().queryForAll();
            } catch (SQLException e)
            {
                e.printStackTrace();
            }
            return wishLists;
        }

        public void addWishList(WishList l)
        {
            try
            {
                helper.getWishListDao().create(l);
            } catch (SQLException e)
            {
                e.printStackTrace();
            }
        }

        public WishList getWishListWithId(int wishListId)
        {
            WishList wishList = null;
            try
            {
                wishList = helper.getWishListDao().queryForId(wishListId);
            } catch (SQLException e)
            {
                e.printStackTrace();
            }
            return wishList;
        }

        public void deleteWishList(WishList wishList)
        {
            try
            {
                helper.getWishListDao().delete(wishList);
            } catch (SQLException e)
            {
                e.printStackTrace();
            }
        }

        public void updateWishList(WishList wishList)
        {
            try
            {
                helper.getWishListDao().update(wishList);
            } catch (SQLException e)
            {
                e.printStackTrace();
            }
        }

    } 
```

我的问题是有没有办法实例化 DatabaseHelper 而不必创建测试活动并将其作为 DatabaseHelper 需要的上下文传递？理想情况下，我想将此类作为标准 JUnit 测试进行单元测试，而不是 Android JUnit 测试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T17:05:42.790

我不确定这是个好主意。 [ORMLite](http://ormlite.com/)具有非 Android JDBC 包，您可以使用它直接通过 JDBC 驱动 Sqlite。但是，如果目标是测试您的 Android 数据库类，您将运行大量非 Android 代码，在我看来，这会使测试无效。我正在考虑嘲笑所有的 Android 类，但它很快就开始变成一个曲折的迷宫。

我认为你最好的方法是忍受 Android junit 测试。查看[ORMLite Android 测试包文件](http://ormlite.svn.sourceforge.net/viewvc/ormlite/ormliteAndroidTest/src/com/j256/ormlite/android/)以获取示例。[BaseDaoTest 文件] 具有您可以为自己的测试自定义的所有设置/关闭方法。

# shell - 检查证书别名是否已经存在

> ID：11324742
> 
> 赞同：1
> 
> 时间：2012-07-04T07:55:47.743
> 
> 标签：shell, certificate, ssl-certificate, public-key-encryption, keytool

我正在实现一个 shell 脚本，它将使用 keytool 命令创建一个新的自签名证书。下面是我用来创建证书的命令

```
 echo "# Creating key and Self Signed Certificate"
    keytool -genkey -alias cert -keyalg RSA -storepass "${KEYSTORE_PASS}" -keypass         "${KEY_PASS}" -keystore cert/keystore.jks -validity 3650 -keysize 1024 -dname "C=${CNTRY}, ST=${ST}, L=${LOC}, O=${ORG}, OU=Certificates, CN=${ORG} SEURAT Certificate Authority" 
```

exit_on_error $?

对于密码和其他主题信息，我正在从用户那里获得输入。现在，如果别名名称已经存在，此命令将失败。我可以使用删除别名

```
 keytool -delete -alias 1 -keystore cert/keystore.jks 
```

但如果别名不存在，上述命令将失败。那么，如果存在别名，我如何检查 shell 脚本然后删除证书并以其名称创建新证书，或者只是创建它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T08:10:37.910

也许您可以先列出现有的别名：

```
[ -z keytool -list -alias cert ] && keytool -genkey -alias cert -keyalg RSA -storepass "${KEYSTORE_PASS}" -keypass 
```

# cuda - LNK1104：无法打开文件 'glut32.lib'

> ID：11324743
> 
> 赞同：1
> 
> 时间：2012-07-04T07:55:49.197
> 
> 标签：cuda, glut

我正在使用“CUDA bu Example”一书开始使用 CUDA。但是当我包含 book 给出的所有头文件时，得到 ERROR 为

错误 1 ​​错误 LNK1104: 无法打开文件 'glut32.lib' D:\book\book\LINK book

我正在使用 Visual Studio 10 请帮我解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T10:09:48.860

我在 Visual Studio 2010 中设置时发现了同样的错误

但是，我也找到了一个修复程序并想分享它。

只需将 glut32.lib 文件复制并粘贴到 MicrosoftSDKs 文件夹，因为这是 VC++ 链接器位置的默认位置。准确地说

`C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Lib`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T09:26:34.580

如果您还没有完成，您可能必须构建“shrUtils_vs2010.sln”解决方案。该文件位于“\path_to_SDK\NVIDIA GPU Computing SDK 4.2\shared”文件夹中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-11T20:10:56.010

我已经测试了这个解决方案，它在*Visual Studio 2015中对我有用*

> **1：**将*glut32.dll*复制到您的项目目录（您所在的`source.cpp`位置）
> **2：**将*glut.h*复制到`C:\Program Files\Microsoft Visual Studio 14.0\Vc\Include\gl`（应手动创建*gl文件夹）*
> **3：**将*glut32.lib*复制到`C:\Program Files\Microsoft Visual Studio 14.0\Vc\lib`完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-16T19:00:44.983

将“cuda by example”中的lib文件夹中的glut32.lib文件复制到以下文件夹：

C:\Program Files\NVIDIA GPU 计算工具包\CUDA\v7.5\lib\Win32

# regex - 用于检测未用双引号括起来的字符串的正则表达式

> ID：11324749
> 
> 赞同：12
> 
> 时间：2012-07-04T07:56:14.337
> 
> 标签：regex

我有一个这样的字符串

`"quick" "brown" fox jumps "over" "the" lazy dog`

我需要一个正则表达式来检测没有用双引号括起来的单词。经过一些随机尝试后，我发现了这个`("([^"]+)")`。这会检测用双引号括起来的字符串。但我想要相反。即使在尝试反转上述正则表达式之后，我也真的无法想出它。我的正则表达式很弱。请帮我

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-04T08:05:20.343

使用前瞻/后瞻断言：

```
(?<![\S"])([^"\s]+)(?![\S"]) 
```

例子：

```
>>> import re
>>> a='"quick" "brown" fox jumps "over" "the" lazy dog'
>>> print re.findall('(?<![\S"])([^"\s]+)(?![\S"])',a)
['fox', 'jumps', 'lazy', 'dog'] 
```

这里的主要内容是前瞻/后瞻断言。你可以说：我想要这个符号在表达式之前，但我不希望它成为匹配本身的一部分。好的。为此，您使用*断言*：

```
(?<![\S"])abc 
```

这是一个*消极的回顾*。这意味着你想要`abc`但没有它`[\S"]` *之前*，这意味着必须没有非空格字符（单词的开头）或`"`之前。

这是相同的，但在另一个方向：

```
abc(?![\S"]) 
```

那是一个*负前瞻*。这意味着你想要`abc`但没有它`[\S"]` *。*

通常有四种不同的断言类型：

```
(?=pattern)
    is a positive look-ahead assertion
(?!pattern)
    is a negative look-ahead assertion
(?<=pattern)
    is a positive look-behind assertion
(?<!pattern)
    is a negative look-behind assertion 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:03:15.417

使用这个正则表达式：

```
\s+(?<myword>([^\"\s]+)*)\s+ 
```

这应该是工作；并获得名为*myword*的组。否则你需要修剪你的结果字符串。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-04T08:03:06.667

从字符串中删除第一个引号

# php - 从 Yii 中的 CActiveRecord 中选择或下拉列表

> ID：11324750
> 
> 赞同：3
> 
> 时间：2012-07-04T07:56:15.803
> 
> 标签：php, yii, yii1.x

我有表`types`，我想`selectbox`用这个表中的所有值构建在我的控制器中我写了这段代码

```
$allRegistrationTypes = RegistrationType::model()->findAll();
$this->render('index', array('allRegistrationTypes' => $allRegistrationTypes)) 
```

如何在视图文件中构建选择框？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T08:14:22.650

那么它非常简单，您需要做的就是首先创建列表数据，例如

```
CHtml::ListData(allRegistrationTypes,'value you want to pass when item is selected','value you have to display'); 
```

例如

```
typeList = CHtml::ListData(allRegistrationTypes,'id','type'); 
```

现在记住***id 和 type 都是表中的字段***

现在你所要做的就是如果你正在使用表单那么

```
<?php echo $form->dropDownList($model, 'type_id', $typeList, array('empty'=>'Select a tyoe')); ?> 
```

如果您需要多个，您可以将`multiple => multiple`数组作为 htmlOptions传递

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T08:00:41.143

您将使用[`CHtml::dropDownList`](http://www.yiiframework.com/doc/api/1.1/CHtml#dropDownList-detail), 或者[`activeDropDownList`](http://www.yiiframework.com/doc/api/1.1/CHtml#activeDropDownList-detail)如果有一个“父”模型并且您想利用它的验证规则。

如果要使`<select>`元素具有多选功能，请传入`'multiple' => 'multiple'`并`'size' => X`作为`$htmlOptions`参数的一部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-24T12:28:38.970

在 YII 框架中获取“选择框”的最简单方法：

```
<div class="row">
    <?php
        echo $form->labelEx($model,'county');
        $data = CHtml::listData(County::model()->findAll(), 'id', 'county');
        $htmlOptions =     array('size' => '1', 'prompt'=>'-- select county --', );
        echo $form->listBox($model,'county', $data, $htmlOptions);
        echo $form->error($model,'county');
    ?>
</div> 
```

祝你好运..

# objective-c - NSMutableString append 什么都不做

> ID：11324751
> 
> 赞同：0
> 
> 时间：2012-07-04T07:56:23.440
> 
> 标签：objective-c, ios

在使用 C++ 之后，我是 Objective-C 的新手。在 XML 文件解析期间使用 NSMutableString 时遇到问题。我有这样的 NSMutableString 结构：

```
struct HotelStruct {
...
NSMutableString *h_name;
...
}; 
```

然后，我将 CurrentStruct 声明为 ParserDelegate 的实例变量：

```
@interface ParserDelegate : NSObject <NSXMLParserDelegate> {
...
struct HotelStruct CurrentStruct;
...
} 
```

最后，我试图将一个字符串附加到 CurrentStruct.h_name (m_isName == YES) ：

```
-(void)parser:(NSXMLParser*)parser foundCharacters:(NSString *)string {
if (m_isName) {
[CurrentStruct.h_name appendString:string];
} 
```

但是调试器说 CurrentStruct.h_name 在像之前一样执行 AppendString 之后仍然为 0x0，而字符串变量具有所需的值。我有点困惑，因为看起来 appendString 只是被跳过了。我会很感激任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T07:58:08.243

您需要初始化您的字符串对象：

```
h_name = [[NSString alloc] init]; 
```

完成后不要忘记释放它：

```
[h_name release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T07:57:57.083

是否有理由不使用标准对象而不是结构？这可能是因为`NSString`尚未初始化/分配。

尝试这个：

```
CurrentStruct-> h_name = [[NSString alloc] init]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T08:13:04.263

它会正常工作

```
 -(void)parser:(NSXMLParser*)parser foundCharacters:(NSString *)string {

     if (m_isName) {

         if(!CurrentStruct.h_name)
             CurrentStruct.h_name = [[NSMutableString alloc] init];

           [CurrentStruct.h_name appendString:string];

           NSLog(CurrentStruct.h_name);
           NSLog(m_isName);
       }
    } 
```

注意：请检查控制台日志，**不要忘记**在使用后释放内存。

# c++ - Emacs + C/C++ + Doxygen：doxymacs 的替代品？与 yasnippet？

> ID：11324752
> 
> 赞同：17
> 
> 时间：2012-07-04T07:56:25.310
> 
> 标签：c++, c, emacs, doxygen

我想使用 doxygen 在Emacs`.c`或文件中生成代码文档（函数）。`.cc`我找到`doxymacs`了，但似乎不再维护（最新版本 2007），如果我更改函数的一个参数的名称，我也没有找到更新函数文档的方法（“不幸的是”，我'已经习惯了可以做所有好事`Roxygen`的脚本，甚至当点位于函数中的某个位置时在函数之前插入文档）。`.R`

我找到[了这个](https://stackoverflow.com/questions/9872445/comments-for-function-in-emacs)，但它似乎不是很有用。[但是，这里](https://groups.google.com/forum/?fromgroups#!msg/smart-snippet/cQNCo89_438/TISLygeP87AJ)有一个示例如何使用`yasnippets`. 有没有人为 doxygen 标题写过 yasnippet？尽管如此，如果函数名称更改，它也不会更新参数。有没有“更好”的方式在 Emacs 中使用 doxygen？我假设有很多 C/C++ 程序员使用 Emacs，我猜应该有一个很好的代码文档工具/方法。

**更新**

我也发现[了这个](http://permalink.gmane.org/gmane.emacs.yasnippet.devel/555)。它纯粹基于 yasnippet（虽然还没有尝试过）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T19:57:53.443

我使用以下内容：

```
# -*- mode: snippet -*-
# name: cc-doxygen
# key: dox
# type: command
# contributor: Jonathan Kotta <jpkotta@gmail.com>
# --
(let* ((next-func-alist (doxymacs-find-next-func))
       (func-name (cdr (assoc 'func next-func-alist)))
       (params-list (cdr (assoc 'args next-func-alist)))
       (return-name (cdr (assoc 'return next-func-alist)))
       (snippet-text "")
       (idx 1))
  (setq snippet-text (format "/**\n * ${1:%s}\n * \n" func-name))
  (setq idx 2)
  (dolist (param params-list)
    (unless (string= param "this")
      (setq snippet-text (concat snippet-text
                                 (format " * \\param %s ${%d:}\n" param idx)))
      (setq idx (+ 1 idx))))
  (when (and return-name (not (string= return-name "void")))
    (setq snippet-text (concat snippet-text
                               (format " * \\return ${%d:%s}\n" idx return-name))))
  (setq snippet-text (concat snippet-text " */"))
  (yas/expand-snippet snippet-text)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T20:33:39.750

**1\. 从 Emacs 生成 doxygen**

您使用哪种工具进行编译？制作？自动工具？斯康斯？

一旦我使用 CMake，我们创建了一个目标来使用 doxygen 生成文档。

像[这样](http://majewsky.wordpress.com/2010/08/14/tip-of-the-day-cmake-and-doxygen/)的东西。

然后你将不得不像这样编译：

```
make doc 
```

但这仅涵盖您问题的第一部分，即手动制作每个功能之前的文档。我将尝试将此解决方案与 yasnippet 集成。

# sql - 存储和查询业务规则

> ID：11324765
> 
> 赞同：0
> 
> 时间：2012-07-04T07:56:47.657
> 
> 标签：sql, oracle, tsql, business-rules

我有与业务规则有关的问题。让我们有一个实体帐户，其中包含我们定义业务规则的一些属性（金额、名称、类型等）。

我将我的规则存储在数据库表中，如下所示

```
Rule_id | Field | Operator | value . 
```

规则可以是 等`amount > 1000, name ="abc", type="x"`。规则被分组并映射到用户。

帐户是在系统中创建的，管理员必须批准它们。当管理员根据他的规则集登录时，管理员应该看到相关帐户。

就像如果管理员规则集金额>500，那么任何小于 500 的帐户都不会显示给他。

我的问题是在数据库中实现它的最佳方法，如何查询以便可以根据底层规则集获取相关帐户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:27:04.930

创建一个类似这样的用户表

用户

```
 userId | Username | UserType | Rule_id 
```

当用户登录时，将用户表与 Rule_id 上的规则表连接起来，并使用这样的查询生成条件

```
select 'Select * from Account where '+Field+Operator+value from rules   
where Rule_id=1 
```

此查询的结果将在执行时给出另一个 sql 查询，该查询将获取该用户可访问的帐户

上述查询的结果

```
Select * from Account where amount>1000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T14:05:54.157

您所描述的与 Oracle 的细粒度访问控制（AKA 虚拟专用数据库）非常相似。这主要是一种安全工具，但它可用于执行通用业务规则。 [了解更多](http://docs.oracle.com/cd/E11882_01/server.112/e10575/tdpsg_securing_data.htm#CHDBICEI)。

即使您选择不使用 FGAC（或者因为您没有企业版而不能使用），它也会为您提供一些有关如何实施解决方案的提示：使用 sys_context 和命名空间来保存规则，以及引用 sys_context 函数的视图强制执行。

# forms - 在代码点火器中将表单参数附加到 url

> ID：11324769
> 
> 赞同：1
> 
> 时间：2012-07-04T07:56:57.340
> 
> 标签：forms, codeigniter, url, redirect, submission

我已尽力搜索具有类似问题的现有问题，但找不到。这是我的情况

我有一个名为 search 的控制器，它接受参数“搜索词”，当直接从 URL（如 www.xyz.com/search/red+car）调用此控制器时，它会返回结果，并且浏览器地址栏中的 URL 是 www.xyz。 com/search/red+car 但是当用户从具有相同术语的网页中提交搜索时，结果很好，但 URL 不反映搜索词。

如果我进行重定向，则表单 POST 数据将丢失，尽管在我的情况下重新提交 POST 也不是解决方案。我需要一种方法来更改 URL，以便它显示搜索词。

提前感谢您的帮助，请温柔，因为这是我的第一个问题。

@Vlakarados - 我正在尝试使用相同的控制器来提供来自发布数据和控制器参数的搜索结果。两者都可以正常工作，但是在网页上使用搜索表单时，搜索参数不会反映在 URL 中。

@Rakesh Shetty - 实际方法很长，但这里是根据发布数据和传递参数的压缩格式构建查询。用结果填充视图 渲染视图

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T01:59:41.130

感谢大家提出各种解决方案。

我使用 jquery 来更改表单操作参数，现在当下拉选择更改时，值将附加到操作参数。我还从发布数据的一部分中取出了下拉列表。

有 2 个下拉列表，一个用于区域，另一个用于邮政编码。这种新方法适用于机器人下拉菜单，我现有的控制器代码无需任何重大更改即可工作。

当用户更改区域时，我使用以下 javascript 代码创建新的操作参数。邮政编码也是如此。

```
$("#cityname").change(function(){
    var action = $(this).val();
    alert(action);
    $("#searchform").attr("action", "search/" + action);
}); 
```

我想我无法清楚地解释我的情况，否则你们很久以前就会提出这个建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:50:26.560

更好的方法是在你的控制器中：

```
function search($search_query) {

    // .. use your query as you normally would - display products, posts, messages
    $data = array('search_query' => $search_query);
    $this->load->view('search', $data);
}

// use this method as the form action
function search_proxy() {
    $search_query = $this->input->post('search');
    // if needed urlencode or other search query manipulation
    redirect('controller/search/'.$search_query);
} 
```

这样您就不会遇到任何问题，并且只会使用您的 url 中的数据。

编辑：第二个选项是使用 JavaScript - 当用户提交表单时，更改表单的操作以将搜索到的查询包含在表单操作中

# opengl - OpenGL 正确显示纹理

> ID：11324776
> 
> 赞同：1
> 
> 时间：2012-07-04T07:57:35.360
> 
> 标签：opengl, textures, render-to-texture

我在实际上具有相同位置和位置的两个表面上渲染纹理。

在这种情况下，我只想显示其中一种纹理，同时我得到关注

![在此处输入图像描述](../Images/caefb4aef97d55736fd7cb2e091e5c2b.png)

即我只想显示第一种材料的纹理。

所以我想知道我在哪里寻找解决方案，我应该玩混合材料吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T08:05:53.083

这是一个相当古老的问题（[z-fighting](http://en.wikipedia.org/wiki/Z-fighting)），因为卡片不确定要在前面绘制哪个对象。链接的维基百科文章有更多这样的例子。

要解决此问题，请增加深度缓冲区的精度（位深度），减少视图的深度（距离远/近剪辑平面）或添加一个微小的偏移量，以便坐标不再完全（或几乎）相同。您也可以简单地禁用深度缓冲区（或清除它）以进行渲染（在这种情况下，最后渲染的内容将与其他所有内容重叠）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T08:07:53.177

你的意思是你想一次显示几个纹理？然后使用多重纹理。使用以下方法将两个纹理附加到一个 Quad：

```
glMultiTexCoord2fARB(GL_TEXTURE0_ARB, 0.0f, 0.0f);
glMultiTexCoord2fARB(GL_TEXTURE1_ARB, 0.0f, 0.0f); 
```

并根据`glTexEnvi`需要将它们组合在一起。如果您只想显示其中一个纹理，请在每个纹理上绘制两个带有单独纹理的四边形。并且稍后将绘制的四边形女巫将可见。然后，如果您想从一个转向另一个，`-(void)`请为每个四边形分别制作 's，`glClearColor`在每个四边形绘图之前，然后制作按钮调用例如`-(void)quad1`和按钮调用`-(void)quad2`。

或者只是使用深度缓冲区。

在您的情况下，我会使用多重纹理，因为所有缓冲区对我来说一直都太难了。

* * *

我将展示我的代码的外观。

使用多纹理的代码：

```
glClear(GL_COLOR_BUFFER_BIT);

//Turn on blending and set glBlendFunc for your needs
glEnable(GL_BLEND);
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

//Describing multitexturing
glClientActiveTexture(GL_TEXTURE0_ARB); //Activating texture on unit 0
glActiveTexture(GL_TEXTURE0_ARB); //Activating texture on unit 0
glBindTexture(GL_TEXTURE_2D, Texture1); //Bind texture on unit 0
glEnable(GL_TEXTURE_2D); //Enable GL_TEXTURE_2D to set it's glTexEnvi for your needs
glTexEnvi( GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_COMBINE ); //Edit glTexEnvi for your needs (link bellow code)
glTexEnvi( GL_TEXTURE_ENV, GL_COMBINE_ALPHA, GL_INTERPOLATE );

glClientActiveTexture(GL_TEXTURE1_ARB); //Activating texture on unit 1
glActiveTexture(GL_TEXTURE1_ARB); //Activating texture on unit 1
glBindTexture(GL_TEXTURE_2D, Texture2); //Bind texture on unit 0
glEnable(GL_TEXTURE_2D); //Enable GL_TEXTURE_2D to set it's glTexEnvi for your needs
glTexEnvi( GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_COMBINE ); //Edit glTexEnvi for your needs (link bellow code)
glTexEnvi( GL_TEXTURE_ENV, GL_COMBINE_ALPHA, GL_REPLACE );

//Drawing quad with multi texture
glBegin(GL_QUADS);
glMultiTexCoord2fARB(GL_TEXTURE0_ARB, 0.0f, 0.0f); //Texture on unit 0 coords
glMultiTexCoord2fARB(GL_TEXTURE1_ARB, 0.0f, 0.0f); //Texture on unit 1 coords 
glVertex2f(0.0, 500);
glMultiTexCoord2fARB(GL_TEXTURE0_ARB, 0.0f, 1.0f); //Texture on unit 0 coords
glMultiTexCoord2fARB(GL_TEXTURE1_ARB, 0.0f, 1.0f); //Texture on unit 1 coords 
glVertex2f(0.0, 0.0);
glMultiTexCoord2fARB(GL_TEXTURE0_ARB, 1.0f, 1.0f); //Texture on unit 0 coords
glMultiTexCoord2fARB(GL_TEXTURE1_ARB, 1.0f, 1.0f); //Texture on unit 1 coords  
glVertex2f(800, 0.0);
glMultiTexCoord2fARB(GL_TEXTURE0_ARB, 1.0f, 0.0f); //Texture on unit 0 coords
glMultiTexCoord2fARB(GL_TEXTURE1_ARB, 1.0f, 0.0f); //Texture on unit 1 coords 
glVertex2f(800, 500);
glEnd();

//Disable GL_TEXTURE_2D. We don't need it anymore
glDisable(GL_TEXTURE_2D);
//Disable blending
glDisable(GL_BLEND);
//Flush everything
glFlush(); 
```

为每个纹理使用一个四边形的代码

```
-(void) drawQuad1 
{
glClear(GL_COLOR_BUFFER_BIT);
glEnable(GL_TEXTURE_2D);
glBindTexture(GL_TEXTURE_2D, Texture1);
glBegin(GL_QUADS);
    glTexCoord2f(0.0f, 0.0f); glVertex2f(0.0, 500);
    glTexCoord2f(0.0f, 1.0f); glVertex2f(0.0, 0.0);
    glTexCoord2f(1.0f, 1.0f); glVertex2f(800, 0.0);
    glTexCoord2f(1.0f, 0.0f); glVertex2f(800, 500);
glEnd();
glDisable(GL_TEXTURE_2D)
glFlush();
}

-(void) drawQuad2
{
glClear(GL_COLOR_BUFFER_BIT);
glEnable(GL_TEXTURE_2D);
glBindTexture(GL_TEXTURE_2D, Texture2);
glBegin(GL_QUADS);
    glTexCoord2f(0.0f, 0.0f); glVertex2f(0.0, 500);
    glTexCoord2f(0.0f, 1.0f); glVertex2f(0.0, 0.0);
    glTexCoord2f(1.0f, 1.0f); glVertex2f(800, 0.0);
    glTexCoord2f(1.0f, 0.0f); glVertex2f(800, 500);
glEnd();
glDisable(GL_TEXTURE_2D)
glFlush();
}

//and now when you want to draw `drawQuad1` you need to do `[self drawQuad1];`
//and where you want to draw `drawQuad2` you need to do `[self drawQuad2];` 
```

关于 glTexEnvi 的信息在[这里](http://www.opengl.org/sdk/docs/man/xhtml/glTexEnv.xml)。它只是示例代码。写得很快，所以可能有错误。对不起，如果我忘记了什么。只是我很久没有这样做了。写在 Mac OS X 上，所以如果你使用其他平台，你可能需要改变一些东西（不是 opengl）。关于深度缓冲区？我不知道如何使用它。所以我无法为你解释。对不起。从未使用过它们。

# ruby-on-rails - Paypal Sandbox 突然停止发送 IPN

> ID：11324778
> 
> 赞同：-2
> 
> 时间：2012-07-04T07:57:37.010
> 
> 标签：ruby-on-rails, paypal, paypal-sandbox

Paypal Sandbox 在没有任何明显原因的情况下停止发送 IPN。它昨天工作，但当我今天回来时，它停止发送 IPN。在这两者之间我根本没有更改我的应用程序代码。谁能告诉我它停止工作的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:16:39.543

我不是 PayPal 的专家，但据我所知，如果来自 PayPal 的 IPN 通知失败 3 次 - 它将被禁用。您应该转到您的沙盒设置并再次启用它。

# java - Java - 使一种特定的颜色透明

> ID：11324781
> 
> 赞同：2
> 
> 时间：2012-07-04T07:57:45.883
> 
> 标签：java, swing, colors, jframe, translucency

是否可以在 JFrame 中使一种特定颜色透明？

我知道这在 VB.NET 中是可能的，但我想知道它在 Java 中是否可能！

例如：我的 JFrame 有一个红色背景色，我只想让那个红色变得透明，这样红色在哪里*，*我就可以看到后面的表格/桌面。

希望有人可以提供帮助，因为我被卡住了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T08:12:29.070

你可以使用

```
com.sun.awt.AWTUtilities.setWindowShape(Window, Shape) 
```

使用自定义 Shape 实现，该实现仅包含[颜色与您的特定颜色不同的点](http://docs.oracle.com/javase/tutorial/uiswing/misc/trans_shaped_windows.html#per-pixel)。

# javascript - 在同一页面上使用 highchart 和 highstock

> ID：11324790
> 
> 赞同：15
> 
> 时间：2012-07-04T07:58:09.420
> 
> 标签：javascript, jquery, highcharts, highstock

我有这个页面：

```
<script type="text/javascript" src="jQuery/Highcharts/highstock1.1.6.js"></script>
<script type="text/javascript" src="jQuery/Highcharts/highcharts2.1.4.js"></script> 
```

在我使用的页面中

```
$.getJSON(
        "server/indice.server.php?row=" + row +"&item="+ item,
        null,
        function(data)
        {
            chartindice = new Highcharts.Chart(
            {
                chart:
                {
                    renderTo: 'graph',
                    defaultSeriesType: 'line',
                    zoomType: 'x'
                },
                        /////moore setting..
                series:
                [{
                    type: 'area',
                    name: titleindice,
                    data: indice,
                    showInLegend : false //disable the the show/hide icon
                }]

            });
        }); 
```

和一个高库存图

```
window.chart = new Highcharts.StockChart({
    chart: {
        renderTo: 'chartHistory'
    },

    rangeSelector: {
            selected: 2
    },

    series: [{
        data: history,
        type: 'spline',
        tooltip: {
            valueDecimals: 2
        }
    }]
}); 
```

他们不能一起工作，只能一个或另一个。

我能做些什么？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-28T11:02:46.987

在 Highchart 和 Highstock 冲突时遇到了同样的麻烦。这是官方的解决方案：

> 请记住，Highcharts.Chart 的构造函数和 Highcharts 的所有功能都包含在 Highstock 中，因此如果您将 Chart 和 StockChart 组合运行，则只需加载 highstock.js 文件。

[http://highcharts.com/errors/16](http://highcharts.com/errors/16)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-17T11:19:17.100

Highcharts 包含在 highstock.js 中，所以请看示例，如何将 highcharts 与`highstock.js`.

[http://jsfiddle.net/sbochan/PtXhB/](http://jsfiddle.net/sbochan/PtXhB/)

其次，我建议使用最新的 highstock。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-04T19:56:17.980

当我尝试使用 Highstock 图表和 Angular Gauge 时，我遇到了同样的问题，当我尝试像这样重新排列 highstock highchart javascript 库时，问题得到了解决

```
<script type="text/javascript" src="jQuery/Highcharts/highcharts.js"></script>
<script type="text/javascript" src="jQuery/Highcharts/highstock.js"></script>
<script type="text/javascript" src="jQuery/Highcharts/highcharts-more.js"></script> 
```

或（如果您不想使用其他图形）

```
<script type="text/javascript" src="jQuery/Highcharts/highcharts.js"></script>
<script type="text/javascript" src="jQuery/Highcharts/highstock.js"></script> 
```

我希望它有用

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-24T10:36:13.367

您必须删除此文件：

highcharts.js

我试过了，它有效

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-07T20:54:00.480

我的情况是，仅包括 HighStock 的文件也适用于 HighChart。

我有很多图表，highchart 或 highstock，可能包含在同一页面上，我只调用一次 HighStock.js，它适用于两者！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-28T12:49:47.720

只使用 **highstock.js** 并删除**highcharts.js** 对我来说效果很好，祝你好运

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-04T09:30:54.483

Highstock 包含大部分 HighCharts 代码。您是否尝试在页面中仅包含 highstock.js 来显示两个图表？

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-07-17T08:58:26.710

我有同样的问题，并通过如下订购我的 JS 得到解决。

```
<script type="text/javascript" src="$javascript_folder/highstock.js"></script>
<script type="text/javascript" src="$javascript_folder/highcharts.js"></script> 
```

根据Ardi，我不知道它的工作正常。当我首先加载 highstock.js 然后加载 highcharts 时，对我来说效果很好。

# css - Firefox 是唯一支持浮点数作为宽度声明的浏览器吗？（例如 163.4 像素）

> ID：11324792
> 
> 赞同：0
> 
> 时间：2012-07-04T07:58:26.330
> 
> 标签：css, firefox, browser, width

> **可能重复：**
> [是否尊重 CSS 宽度中的小数位？](https://stackoverflow.com/questions/4308989/are-the-decimal-places-in-a-css-width-respected)

我有一个导航（`li`），它需要一个像素值来适应`ul`（有`display:block`）。所以我用`width:163.4px`' `li`s. 这在 Firefox (v13.0.1) 中运行良好，但在 Safari、Chrome 和 Opera 中宽度太短。（宽度大约是 163 像素……所以我猜那些浏览器会向下取整。）

解释一下为什么只有 Firefox 支持这种情况下的浮点数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:18:16.443

所有浏览器都采用小数像素宽度，包括 Firefox：http: [//jsfiddle.net/fgD7H/1/](http://jsfiddle.net/fgD7H/1/)

您可以在小提琴中看到红色的可见宽度`div`每秒仅增加一次，即使实际宽度每秒增加 0.1 像素十次。这在 Chrome 和 Firefox 中都会发生（尚未测试其他）。

我的猜测是两种浏览器之间的舍入策略存在一些差异（例如，Chrome 可能会向下舍入，而 Firefox 可能会向上舍入）。如果您可以在 jsfiddle 中提供演示，也许您的问题可能会更加明显。在所有情况下，渲染的实际宽度都是整数像素，因此您应该能够通过将宽度设置为`163px`或来解决问题`164px`。

# android - 如何更改溢出菜单项的背景

> ID：11324795
> 
> 赞同：4
> 
> 时间：2012-07-04T07:58:40.877
> 
> 标签：android, menu, background, overflow

我正在尝试更改溢出菜单中聚焦/按下的菜单项的蓝色背景。

我说的是这个：

[![图片](../Images/d2a97ef7ded661019c7c8b22f1681548.png)](https://i.stack.imgur.com/W4jpS.png)

我想我已经覆盖了in 和in 中的所有可能属性，`Theme`并进入了每种样式，但无法更改蓝色背景。`Theme.Holo``Themes.xml``Styles.xml`

**编辑**
我发现我应该覆盖的样式是`android:dropDownListViewStyle`

但它根本没有用。但后来我将主题从 更改`Theme.Holo.Light.DarkActionBar`为`Theme.Holo.Light`并猜猜是什么？有效！！

那么，任何人都可以对此有所了解吗？如何更改主题的颜色`DarkActionBar`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T07:43:09.977

好的，我找到了解决问题的方法：[链接到 ActionBarSherlock 谷歌组中的帖子](https://groups.google.com/forum/?fromgroups#!msg/actionbarsherlock/AxB6shftiK0/HbvsrBgMpsoJ)

我监督了这个条目：`android:actionBarWidgetTheme`在`Theme.Holo.Light.DarkActionBar`主题中。

现在我所要做的就是定义一个`Theme.Holo`用一种样式覆盖的主题：`<item name="android:dropDownListViewStyle">@style/myDropDownListView</item>`并指向这个主题。

```
<!-- theme referenced by actionBarWidgetTehme style -->
<style name="Theme.DropDown.Dark" parent="android:style/Theme.Holo">
    <item name="android:dropDownListViewStyle">@style/myDropDownListView</item>
</style>

<!-- my main theme -->
<style name="DarkActionBarRedActionMode" parent="android:style/Theme.Holo.Light.DarkActionBar">
    <item name="android:actionBarWidgetTheme">@style/Theme.DropDown.Dark</item>
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:16:44.163

声明一个可绘制的选择器，并将其作为列表视图项的背景。

参考可[绘制资源](http://developer.android.com/guide/topics/resources/drawable-resource.html)

# c# - JQuery 从 aspx 页面检索数据

> ID：11324801
> 
> 赞同：2
> 
> 时间：2012-07-04T07:59:14.037
> 
> 标签：c#, javascript, jquery, asp.net

我想从 aspx 页面检索数据。但是，如果填充，则在静态字段中等待数据。

**查询：**

```
 $.ajax({
        url: "Services/JSON/GetMessage.aspx",
        type: "GET",
        dataType: "json",
        success: function (response) { alert(response.Text); },
        error: function (x, t, m) {
            if (t === "timeout") {
                alert("got timeout");
            } else {
                alert(t);
            }
        }
    }) 
```

**服务/JSON/GetMessage.aspx**

```
<%@ Page Language="C#" %>
<% 
Response.Clear();
Response.ContentType = "text/json";
int tryCount = 0;
while (1 == 1)
{
    if (ClsStaticFields.Messages.Count > 0)
    {
        foreach(string message in ClsStaticFields.Messages) {
             Response.Write("{ Text:'" + message + "' }");
        }
    }
    tryCount ++;
    if (tryCount > 29) break; // 1 Minute wait and exit
    System.Threading.Thread.Sleep(2000); // 2 Second wait
}
Response.End();
%> 
```

**我很好奇：**

*   这个等待期会影响其他用户吗？
*   这会导致 IIS 或页面上的锁定吗？
*   这种用法对 CPU 有严重影响吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:02:55.417

我看到您使用`GetMessage.aspx`页面，一个`aspx`可能与会话相关的页面，这会影响其他用户。

如果可能并且一切正常，请禁用该页面的会话。

```
<%@ Page Language="C#" EnableSessionState="false" %> 
```

相对的：

[在共享同一会话时处理另一个 Web 应用程序时 Web 应用程序被阻止](https://stackoverflow.com/questions/9426673/web-app-blocked-while-processing-another-web-app-on-sharing-same-session)
[哪些性能计数器可用于识别 ASP.NET 瓶颈？](https://stackoverflow.com/questions/9056240/what-perfmon-counters-are-useful-for-identifying-asp-net-bottlenecks/9056650#9056650)
[完全替换 ASP.Net 的会话](https://stackoverflow.com/questions/8989648/replacing-asp-nets-session-entirely)

## 全景

我不认为你在这个闭环中等待消息的方式是个好主意，我建议有两种选择。

在浏览器上定期调用`using a javascript timer`。您每 2 秒获取一次消息的以太网方式，那么为什么不每隔几秒从浏览器调用该消息呢？

或者甚至更好地**使用彗星方法**来调用服务器。这是 asp.net 中的彗星示例：[http ://www.aaronlerch.com/blog/2007/07/08/creating-comet-applications-with-aspnet/](http://www.aaronlerch.com/blog/2007/07/08/creating-comet-applications-with-aspnet/)

为什么不好，首先你使用属于asp.net iis的线程，并与浏览器调用连接，即留下一个打开的连接，很快你的打开连接就会用完，也许还有asp.net的网络线程有问题。

像你一样定期检查最好使用定时器来完成，而不是使用线程等待关闭循环，这里最好的地方是他自己的浏览器。

# python - 算法 - 最小化布尔表达式

> ID：11324804
> 
> 赞同：7
> 
> 时间：2012-07-04T07:59:23.693
> 
> 标签：python, algorithm, math, boolean

我正在尝试编写一段可以将布尔表达式的 LENGTH 减少到最小的代码，因此代码应该将表达式中的元素数量减少到尽可能少。现在我被困住了，我需要一些帮助=[

规则如下：布尔表达式中可以有任意数量的元素，但它只包含 AND 和 OR 运算符，以及括号。

例如，如果我传入一个布尔表达式：ABC+BCD+DE，则最佳输出为 BC(A+D)+DE，与原来的相比节省了 2 个单位空间，因为这两个 BC 合二为一。

我的逻辑是，我会尝试找出表达式中出现频率最高的元素，并将其分解出来。然后我递归地调用该函数对分解的表达式做同样的事情，直到它被完全分解。但是，我怎样才能找到原始表达式中最常见的元素？也就是说，在上面的例子中，BC? 似乎我必须尝试所有不同的元素组合，并找出每个组合在整个表达式中出现的次数。但这听起来真的很幼稚。第二

有人可以提示如何有效地做到这一点吗？甚至我可以在 Google 上搜索到的一些关键字也可以。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T08:05:18.287

您正在寻找的是一种最小化布尔函数的方法。这是芯片设计社区特别感兴趣的事情。用于您的目的的一种技术是[Quine-McCluskey 算法](http://en.wikipedia.org/wiki/Quine%E2%80%93McCluskey_algorithm)，或者您可以使用Li-aung Yip 在评论中建议的[卡诺图。](http://en.wikipedia.org/wiki/Karnaugh_map)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T08:28:50.347

抱歉，我还没有阅读所有那些很酷的算法，但是你问到找到共同因素，所以我想到了以下内容：

```
import itertools
def commons(exprs):
    groups = []
    for n in range(2, len(exprs)+1):
        for comb in itertools.combinations(exprs, n):
            common = set.intersection(*map(set, comb))
            if common:
                groups.append(
                            (len(common), n, comb, ''.join(common)))
    return sorted(groups, reverse=True)

>>> exprs
['ABC', 'BCD', 'DE', 'ABCE']

>>> commons(exprs)
[(3, 2, ('ABC', 'ABCE'), 'ACB'),
 (2, 3, ('ABC', 'BCD', 'ABCE'), 'CB'),
 (2, 2, ('BCD', 'ABCE'), 'CB'),
 (2, 2, ('ABC', 'BCD'), 'CB'),
 (1, 2, ('DE', 'ABCE'), 'E'),
 (1, 2, ('BCD', 'DE'), 'D')] 
```

该函数返回一个按以下顺序排序的列表：

1.  公因数的长度
2.  具有该公因数的项数

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T08:17:38.983

使用[Quine-McCluskey](https://en.wikipedia.org/wiki/Quine%E2%80%93McCluskey_algorithm)算法来最小化布尔表达式。它在功能上等同于卡诺图方法，但更适合在计算机上实现。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-30T18:34:44.327

您可能还想查看[Espresso 启发式逻辑最小化](http://en.wikipedia.org/wiki/Espresso_heuristic_logic_minimizer)器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-02T14:55:34.697

不幸的是，大多数给定的建议可能实际上并没有给@turtlesoup 他/她正在寻找的东西。@turtlesoup 要求一种方法来最小化给定布尔表达式的字符数。大多数简化方法不会将字符数作为简化的重点。当谈到电子产品的最小化时，用户通常希望门（或零件）的数量最少。就表达式的“长度”而言，这并不总是会导致更短的表达式——大多数时候会，但并非总是如此。事实上，有时表达式可能会变得更大，就长度而言，尽管从电子学的角度来看它可能更简单（需要构建更少的门）。

boolengine.com 是我所知道的关于数字电路布尔简化的最好的简化工具。它不允许数百个输入，但它允许 14 个，这比大多数简化工具要多得多。

在使用电子产品时，简化程序通常将表达式分解为乘积之和形式。所以表达式'(ab)+'cd 变成了'c+'b+'a+d。“简化”结果需要更多字符作为表达式打印，但从电子学的角度来看更容易构建。它只需要一个 4 输入 OR 门和 3 个反相器（4 个部件）。而原始表达式需要 2 个 AND 门、2 个反相器和一个 OR 门（5 个部分）。

把@turtlesoup 的例子给BoolEngine 后，显示BC(A+D)+DE 变成了E+D+ABC。这是一个较短的表达式，通常是。但肯定不总是。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T12:57:44.057

这是一个实现卡诺图的小程序：[http ://www-ihs.theoinf.tu-ilmenau.de/~sane/projekte/karnaugh/embed_karnaugh.html](http://www-ihs.theoinf.tu-ilmenau.de/~sane/projekte/karnaugh/embed_karnaugh.html)

您可以输入表达式或填写真值表。

# c++ - C++:: 如何使用 sqlite3 insertquery 连接变量

> ID：11324806
> 
> 赞同：0
> 
> 时间：2012-07-04T07:59:30.490
> 
> 标签：c++, sqlite

在这里，我试图通过 insertQuery 连接变量（int 和 char），但出现错误，我的错误是错误：类型为 'const char*' 和 'const char [2]' 的无效操作数到二进制 'operator+'伙计们请指导我哪里错了..

```
 **string insertQuery= "insert into items   (user_id,session_id,user_sessionname,buffer)values("
                        + user + "," + session + ",'" + usrname +   "','" + buff + "')";

         sqlite3_stmt *insertStmt;
                   cout << "Creating Insert Statement" << endl;
                   sqlite3_prepare(db, insertQuery.c_str(), insertQuery.size(), &insertStmt, NULL);
                   cout << "Stepping Insert Statement" << endl;
                   if (sqlite3_step(insertStmt) != SQLITE_DONE) cout << "Didn't Insert Item!" << endl;** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T08:05:56.780

（假设空终止`char*`或空终止`char[]`）

推荐使用[`std::ostringstream`](http://en.cppreference.com/w/cpp/io/basic_ostringstream)( `#include <sstream>`) 来构造 SQL 查询：

```
std::ostringstream s;
s << "insert into items "
  << user
  << ','
  << session;

const std::string insertQuery(s.str()); 
```

也可以通过`std::string`在串联序列中创建临时对象：

```
const std::string insertQuery= 
    std::string("insert into items ... values(")
  + std::string(user)
  + std::string(","); // etc 
```

如果 a `char*`or`char[]`不是 null 终止，您可以通知`std::string`构造函数它是多长时间：

```
std::string s(buf, 2); 
```

# haskell - 在 Windows XP 上的 Haskell 平台 2012.2.0.0 上安装 yesod 时出错

> ID：11324807
> 
> 赞同：1
> 
> 时间：2012-07-04T07:59:39.163
> 
> 标签：haskell, yesod, haskell-platform

我相信尝试使用“cabal install yesod-platform”安装 yesod，但安装因以下错误而中止：

```
cabal: Error: some packages failed to install:
 authenticate-1.2.1.1 depends on zlib-conduit-0.4.0.2 which failed to
 install.
 http-conduit-1.4.1.10 depends on zlib-conduit-0.4.0.2 which failed to
 install.
 wai-extra-1.2.0.5 depends on zlib-conduit-0.4.0.2 which failed to install.
 xss-sanitize-0.3.2 failed while unpacking the package. The exception was:
 user error (truncated tar archive)
 yesod-1.0.1.6 depends on zlib-conduit-0.4.0.2 which failed to install.
 yesod-auth-1.0.2.1 depends on zlib-conduit-0.4.0.2 which failed to install.
 yesod-core-1.0.1.2 depends on zlib-conduit-0.4.0.2 which failed to install.
 yesod-default-1.0.1.1 depends on zlib-conduit-0.4.0.2 which failed to
 install.
 yesod-form-1.0.0.4 depends on zlib-conduit-0.4.0.2 which failed to install.
 yesod-json-1.0.0.1 depends on zlib-conduit-0.4.0.2 which failed to install.
 yesod-persistent-1.0.0.1 depends on zlib-conduit-0.4.0.2 which failed to
 install.
 yesod-platform-1.0.5 depends on zlib-conduit-0.4.0.2 which failed to
 install.
 yesod-routes-1.0.1.2 failed while unpacking the package. The exception was:
 user error (truncated tar archive)
 yesod-static-1.0.0.3 depends on zlib-conduit-0.4.0.2 which failed to
 install.
 zlib-conduit-0.4.0.2 failed while unpacking the package. The exception was:
 user error (truncated tar archive) 
```

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T08:51:30.413

看起来 zlib-conduit 包没有正确下载。删除下载并重试：

1.  [找出你的 cabal 目录在哪里](http://www.haskell.org/haskellwiki/Cabal-Install#The_cabal-install_configuration_file)
    1.  启动 ghci
    2.  `:m System.Directory`
    3.  `getAppUserDataDirectory "cabal"`
2.  删除`packages\hackage.haskell.org\zlib-conduit`cabal 目录的子目录
3.  跑`cabal update`
4.  重新运行`cabal install yesod-platform`

（可能不需要第 3 步，但不会受到伤害。）

# java - MultiTouchHandler 很少出错？

> ID：11324808
> 
> 赞同：0
> 
> 时间：2012-07-04T07:59:39.617
> 
> 标签：java, android, eclipse, multi-touch

遇到一些错误，不知道该怎么办。请帮忙。尝试在 android 版本 1.5 中开发蛇游戏并使用 eclipse sdk 版本 4.2.0 似乎这些错误是唯一让我无法调试我的游戏的事情。

```
The method getX() in the type MotionEvent is not applicable for the arguments (int) 
The method getY() in the type MotionEvent is not applicable for the arguments (int) 
The method getX() in the type MotionEvent is not applicable for the arguments (int) 
The method getY() in the type MotionEvent is not applicable for the arguments (int) 
The method getPointerCount() is undefined for the type MotionEvent  
The method getPointerId(int) is undefined for the type MotionEvent  
ACTION_POINTER_DOWN cannot be resolved or is not a field    
The method getX() in the type MotionEvent is not applicable for the arguments (int) 
The method getY() in the type MotionEvent is not applicable for the arguments (int) 
ACTION_POINTER_UP cannot be resolved or is not a field  MultiTouchHandler.java  
ACTION_MASK cannot be resolved or is not a field    
ACTION_POINTER_ID_MASK cannot be resolved or is not a field 
ACTION_POINTER_ID_SHIFT cannot be resolved or is not a field
The method getPointerId(int) is undefined for the type MotionEvent 
```

编码：

```
public boolean onTouch(View v, MotionEvent event) {  
    synchronized (this) {  
        int action = event.getAction() & MotionEvent.ACTION_MASK;  
        int pointerIndex = (event.getAction() & MotionEvent.ACTION_POINTER_ID_MASK) >>   MotionEvent.ACTION_POINTER_ID_SHIFT;  
        int pointerId = event.getPointerId(pointerIndex);   

        switch (action) {
        case MotionEvent.ACTION_DOWN:
        case MotionEvent.ACTION_POINTER_DOWN:
            touchEvent = touchEventPool.newObject();
            touchEvent.type = TouchEvent.TOUCH_DOWN;
            touchEvent.pointer = pointerId;
            touchEvent.x = touchX[pointerId] = (int) (event
                    .getX(pointerIndex) * scaleX);
            touchEvent.y = touchY[pointerId] = (int) (event
                    .getY(pointerIndex) * scaleY);
            isTouched[pointerId] = true;
            touchEventsBuffer.add(touchEvent);
            break;

        case MotionEvent.ACTION_UP:
        case MotionEvent.ACTION_POINTER_UP:
        case MotionEvent.ACTION_CANCEL:
            touchEvent = touchEventPool.newObject();
            touchEvent.type = TouchEvent.TOUCH_UP;
            touchEvent.pointer = pointerId;
            touchEvent.x = touchX[pointerId] = (int) (event
                    .getX(pointerIndex) * scaleX);
            touchEvent.y = touchY[pointerId] = (int) (event
                    .getY(pointerIndex) * scaleY);
            isTouched[pointerId] = false;
            touchEventsBuffer.add(touchEvent);
            break;

        case MotionEvent.ACTION_MOVE:
            int pointerCount = event.getPointerCount();
            for (int i = 0; i < pointerCount; i++) {
                pointerIndex = i;
                pointerId = event.getPointerId(pointerIndex);

                touchEvent = touchEventPool.newObject();
                touchEvent.type = TouchEvent.TOUCH_DRAGGED;
                touchEvent.pointer = pointerId;
                touchEvent.x = touchX[pointerId] = (int) (event
                        .getX(pointerIndex) * scaleX);
                touchEvent.y = touchY[pointerId] = (int) (event
                        .getY(pointerIndex) * scaleY);
                touchEventsBuffer.add(touchEvent);
            }
            break;
        }

        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:06:06.853

从外观上看，您的方法/变量与您使用它们的上下文所需的类型不匹配。

查看您的代码，看看方法参数和返回类型是否都匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:32:40.343

您遇到错误的所有这些方法在您选择的 API 级别中均不可用。要么提高 API 级别，要么删除任何特定于多点触控的代码。

# ruby-on-rails - 复制 ActiveRecord 记录并维护所有关系

> ID：11324810
> 
> 赞同：1
> 
> 时间：2012-07-04T07:59:44.893
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, migration

我的困境是，出于遗留原因，我需要为表中的所有记录重新分配一个新 id，但是该表已经与依赖于它的旧 id 的不同模型有很多关系。我想想出一个重新分配 id 并维持所有关系的好方法，但我自己没有运气。任何建议表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:27:36.030

此解决方案假定所有表中的外键列名始终相同。它遍历所有表并将旧 id 更改为新表。

```
model_id = "model_id" #foreign key name for that model
old_id = ... #model old id
new_id = ... #model new id

models = ActiveRecord::Base.send(:descendants)
for m in models do
  if m.column_names.include(model_id)
    m.where("#{model_id} = ?", old_id).update_all(model_id => new_id)
  end
end 
```

**编辑**

您还可以`reflect_on_all_associations`在模型上使用，遍历所有`has_many`关系并更改外键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:11:46.043

如何在此表中添加诸如“extra id”之类的新字段，并且不对您的旧 id 做任何事情以保持其稳定并使用您的额外 id 来做您想做的事情？抱歉，我想不出比这个解决方案更好的了。

** 所以您仍然可以使用您的额外 ID 链接到您的旧 ID。

# spring - 无法让 Ehcache 与 spring 3 一起使用

> ID：11324812
> 
> 赞同：1
> 
> 时间：2012-07-04T08:00:00.557
> 
> 标签：spring, security, ehcache

我是Spring的新手，所以如果我的问题很愚蠢，请原谅我......

我正在尝试按照一些示例在 Spring Web 应用程序上配置安全性。我已将其配置为使用 ldap 目录。现在我需要在进程中添加缓存，以便每次请求凭据时都不会从 ldap 目录中获取凭据。

为此，我添加了`cache-ref="userCache"`如教程中所示：

```
<authentication-manager>
   <authentication-provider>
     ...
    <ldap-user-service server-ref="ldapServer"
       user-search-filter="uid={0}" user-search-base="ou=people"
       group-search-filter="member={0}" group-search-base="ou=groups"
       cache-ref="userCache" />
   </authentication-provider>
</authentication-manager> 
```

bean`userCache`定义如下：

```
 <beans:bean id="userCache"             
    class="org.springframework.security.providers.
    dao.cache.EhCacheBasedUserCache">
    <beans:property name="cache" ref="userEhCache" />
 </beans:bean>
 <beans:bean id="userEhCache"
     class="org.springframework.cache.ehcache.EhCacheFactoryBean">
     <beans:property name="cacheManager" ref="cacheManager" />
     <beans:property name="cacheName" value="userCache" />
 </beans:bean> 
```

缓存管理器定义如下：

```
 <bean id="cacheManager"
   class="org.springframework.security.core.userdetails.cache.EhCacheManagerFactoryBean" /> 
```

这种配置的问题是我无法获取 jars，因为它们基于 spring 2 的旧版本。我使用的缓存管理器

```
 <bean id="cacheManager"
 class="net.sf.ehcache.CacheManager" /> 
```

但是我不知道从春天 2 到哪里可以得到它们，如果我添加到我的项目中，它会阻止一切`org.springframework.cache.ehcache.EhCacheFactoryBean` 。`org.springframework.security.providers.dao.cache.EhCacheBasedUserCache`

我将不胜感激在这件事上的任何帮助。如果您有其他解决方案，请提出一些建议。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:10:25.787

在 Spring 3.0.x`org.springframework.cache.ehcache.EhCacheFactoryBean`中，位于*spring-context-support-3.0.x.RELEASE.jar*中。

没有类`org.springframework.security.providers.dao.cache.EhCacheBasedUserCache`，但有类`org.springframework.security.core.userdetails.cache.EhCacheBasedUserCache`位于*spring-security-core-3.0.x.RELEASE.jar*。

# oracle - 使用 Toad 在 Oracle 中创建视图时，如何存储格式化脚本？

> ID：11324830
> 
> 赞同：5
> 
> 时间：2012-07-04T08:01:21.947
> 
> 标签：oracle, toad, sql-view

这个问题可能是蟾蜍特有的。我不知道 Oracle 如何存储视图，所以我将解释使用 Toad 时会发生什么。如果我得到一个特定于 Oracle 的答案，那就更好了。

我创建了一个相当复杂的视图。为了更清楚，我已经很好地格式化了代码，并在需要的地方输入了一些注释。当我需要更改视图时，我使用 Toad 的“描述对象”窗口，我可以在其中找到一个脚本来重新创建视图。唯一的问题是我所有的格式都消失了。select 关键字之前的注释（但在“create view xxx as”之后）也会消失。

如果我输入这个脚本来创建一个视图：

```
create or replace view TestViewFormatting as
-- Here I have a long comment explaining the role of the 
-- view and certain things to be aware of if changing it. 
-- Unfortunately this comment will disappear...
select 
  name,          --This comment will be kept
  accountnumber  --This also
from
  debtable
where
  name like 'S%'; 
```

当我稍后描述它时，Toad 将显示它：

```
DROP VIEW XXX.TESTVIEWFORMATTING;

/* Formatted on 04.07.2012 09:35:45 (QP5 v5.185.11230.41888) */
CREATE OR REPLACE FORCE VIEW XXX.TESTVIEWFORMATTING
(
   NAME,
   ACCOUNTNUMBER
)
AS
   select name,                                    --This comment will be kept
               accountnumber                                       --This also
     from debtable
    where name like 'S%'; 
```

请注意，第一条评论已经消失，格式完全不同。

我怀疑 Oracle 不存储视图的代码，只是一些解析的版本，当 Toad 调出脚本时，它会反转这个解析的版本并即时生成一个脚本。

我需要做什么才能使 Toad/Oracle 保持原始格式？

（PS：我知道我可以更改 Toad 的代码格式化程序的设置，但这不是我想要做的。由于我过去的一些有问题的选择，这个特定的视图有几个级别的内联视图，我需要一个非常具体的格式化以明确发生了什么）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T13:05:14.930

```
select text from user_views
where view_name = 'YOUR_VIEW_NAME'; 
```

我已经测试过：

```
create view z_v_test as 
select
-- te

--st
* from 
dual; 
```

它甚至保留了空白行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T07:36:25.947

另一种方法是使用 DBMS_METADATA：

```
select dbms_metadata.get_ddl('VIEW', 'YOUR_VIEW_NAME', user) from dual 
```

这不仅适用于视图，也适用于（几乎）所有类型的数据库对象（表、触发器、函数……）。

# grails - Grails 中提供了良好的工作流插件

> ID：11324832
> 
> 赞同：2
> 
> 时间：2012-07-04T08:01:26.127
> 
> 标签：grails, grails-plugin, jbpm, grails-2.0

我正在寻找可用于 grails 2.0+ 的良好工作流程插件，该插件有很好的文档记录和维护。我的应用程序称为培训管理系统，用于创建和维护培训。在创建培训时，我的工作流程将从向培训师、参与者和培训负责人发送电子邮件开始......并且该过程继续进行。

所以请给我推荐一个好的工作流插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:23:36.513

[GrailsFlow](http://www.grailsflow.org/)是一个很好的，关于 grails 集成（虽然他们的网站有时很慢）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:51:50.703

[在http://code.google.com/p/grails-activiti-plugin/](http://code.google.com/p/grails-activiti-plugin/)试用 Grails Activiti 插件。

P/S：我是插件的创建者。非常感谢您的反馈。

# c# - ASP.NET MVC3 内网站点

> ID：11324834
> 
> 赞同：0
> 
> 时间：2012-07-04T08:01:29.787
> 
> 标签：c#, database, asp.net-mvc-3, web

我正在努力构建这个网站的设计方面，这是我的第一个网站，我不确定我需要采取这个项目的正确方向。我之前已经发布过这个但没有做得很好解释它。所以我现在会尝试这样做。

该网站将用于提交员工的“创新想法”。它必须连接到已经存在的 MS Access 数据库。该数据库中将有两个表必须与之通信。

第一个是 InnovationSubmission 表，它看起来与此类似：-

```
    ID（自动生成），
    简短的介绍，
    详细描述，
    姓名，
    电子邮件地址，
    Date(From Date.Time.Now()) - 提交时。
    队名
    区域（业务领域）

```

用户将使用 Web 表单（视图）输入上面的详细信息，它将被验证，然后保存到后端数据库。我有这个工作方式。当我尝试基于下面的另一个表引入两个 DropDownlistsFor 控制时，问题就开始了：-

```
    区域 A - Team1、Team3、Team5、Team7
    区域 B - Team2、Team4、Team6、Team8

```

这只是示例数据，表中只有两个不同的区域，但将有 50 多个团队分布在它们之间。我将寻找对区域下拉列表中的值进行团队下拉列表过滤器。

在我的模型文件夹中，我创建了一个 InnovationSubmission 类，它复制数据库中的表，该类在表示提交表单的视图中用作强类型数据类型。它是我如何验证用户输入并将此类传递给 ac# 方法，该方法使用 ADO.NET 将数据发送回。

我正在努力解决我应该如何尝试实现下拉列表。

我是否需要创建一个类似于 InnovationSubmission 类的类来表示团队/区域表？目前的表格结构是否适合该项目？我可以从 1 个表中填充两个下拉列表吗？如何关联团队和区域列？

任何帮助将不胜感激！？！

这是否是设计我的视图模型的正确方法：-

```
public class MyViewModel
    {
        public int ID { get; set; }
        public string shortDesc { get; set; }
        public string longDesc { get; set; }
        public string Status { get; set; }
        public string originator { get; set; }
        public string originatorEmail { get; set; }
        public IEnumerable<Area> area { get; set; }
        public IEnumerable<Team> team { get; set; }
    }

    public class Team
    {
        public string teamName { get; set; }
    }

    public class Area
    {
        public string area { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:16:53.110

您似乎在谈论级联下拉列表，其中第二个的值根据第一个中的选择进行更新。[我已经在这篇文章](https://stackoverflow.com/a/4459084/29407)中举例说明了如何实现这一点。这个想法是您订阅`.change`第一个下拉列表的事件，然后触发 AJAX 请求到控制器操作，传递您将在其中查询数据库并返回可能选项列表的选定值。

# iphone - iPad/iPhone Chrome - Auth Cookie 未设置在 jquery 帖子（ajax）上 - MVC 3

> ID：11324835
> 
> 赞同：9
> 
> 时间：2012-07-04T08:01:34.670
> 
> 标签：iphone, asp.net-mvc-3, ipad, google-chrome, forms-authentication

我在 iPad/iPhone 上使用 Chrome 时遇到了问题，我认为这是一项足够简单的任务，可以在 Chrome 桌面（Mac 和 PC）和 iPad/iPhone 上的 Safari 上运行。

我的页面上有以下 jquery：

$("#login-login-button").click(function () { var username = $("#Username").val(); var password = $("#Password").val();

```
 $("#login-loading-icon").show();

    $.post("/login", { username: username, password: password }, function (data, response) {
        if (response == "success") {
            if (data.IsValid) {
                window.location.href = "/profile";
            }
            else {
                $("#login-error-message").html(data.ErrorMessage);
                $("#login-loading-icon").hide();
            }
        }
        else {
            alert("An error occurred, please try again.");
        }
    });
}); 
```

控制器动作的代码如下所示：

```
[HttpPost]
public JsonResult Index(string username, string password)
{
        AjaxResponseModel ajaxResponseModel = new AjaxResponseModel();

        User user = UserDAL.Select(username, Hash.MD5(password));

        if (user != null)
        {
            if (!user.IsVerified.Value)
            {
                ajaxResponseModel.AddErrorMessage("Account not verified.");
            }
            else if (!user.IsActive.Value)
            {
                ajaxResponseModel.AddErrorMessage("Your account is not active.");
            }
            else
            {
                FormsAuthentication.SetAuthCookie(username, false);
            }
        }
        else
        {
            ajaxResponseModel.AddErrorMessage("Login details incorrect.");
        }

        return Json(ajaxResponseModel);
    } 
```

我尝试通过非 ajax 请求设置 Auth Cookie，但它也不起作用。

**而且我发现在 iPad/iPhone 上，如果我在 Chrome 菜单中使用“请求桌面站点”，问题就会消失，但是此时我的站点上没有移动/桌面的概念，即 Chrome 第一次应该得到什么成为桌面站点...**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T09:57:35.923

已经在这里回答了：[Asp.Net Forms Authentication when using iPhone UIWebView](https://stackoverflow.com/questions/4158550/problem-with-asp-net-forms-authentication-when-using-iphone-uiwebview)

考虑到当前的浏览器分布，我使用了更合理的默认配置。

```
<browsers>
  <browser refID="Default"> 
    <capabilities> 
      <capability name="cookies" value="true" /> 
    </capabilities>
  </browser>
</browsers> 
```

# ios - 使用 CCCrypt 时崩溃 (EXC_BAD_ACCESS)

> ID：11324838
> 
> 赞同：1
> 
> 时间：2012-07-04T08:01:37.437
> 
> 标签：ios, c, encryption

下面是我加密字符串的代码，

```
NSString *token = @"us=foo;pw=bar;pwAlg=false;";
NSString *key = @"testtest";

const void *vplainText;
size_t plainTextBufferSize;

plainTextBufferSize = [token length];
vplainText = (const void *) [token UTF8String];

CCCryptorStatus ccStatus;
uint8_t *bufferPtr = NULL;
size_t bufferPtrSize = 0;
size_t *movedBytes;

bufferPtrSize = (plainTextBufferSize + kCCBlockSize3DES) & ~(kCCBlockSize3DES - 1);
bufferPtr = malloc( bufferPtrSize * sizeof(uint8_t));
memset((void *)bufferPtr, 0x0, bufferPtrSize);
// memset((void *) iv, 0x0, (size_t) sizeof(iv));

NSString *initVec = @"init Vec";
const void *vkey = (const void *) [key UTF8String];
const void *vinitVec = (const void *) [initVec UTF8String];

ccStatus = CCCrypt(kCCEncrypt,
                   kCCAlgorithmDES,
                   kCCOptionECBMode,
                   vkey, //"123456789012345678901234", //key
                   kCCKeySizeDES,
                   NULL,// vinitVec, //"init Vec", //iv,
                   vplainText, //"Your Name", //plainText,
                   plainTextBufferSize,
                   (void *)bufferPtr,
                   bufferPtrSize,
                   movedBytes);

NSString *result;
NSData *myData = [NSData dataWithBytes:(const void *)bufferPtr length:(NSUInteger)movedBytes];
result = [myData base64Encoding];

 NSLog( @"Original String dddd: %@", result ); 
```

它在**ccStatus = CCCrypt(kCCEncrypt,**

任何人都可以提供建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:27:52.017

它是 的最后一个参数`CCCrypt`。它试图输出一个值（所以你知道它写入的数据的大小）并且你给它一个指针。你需要给它一个`size_t`变量的地址。

尝试这样的事情：

```
size_t movedBytes;
ccStatus = CCCrypt(kCCEncrypt,
                kCCAlgorithmDES,
                kCCOptionECBMode,
                vkey, //"123456789012345678901234", //key
                kCCKeySizeDES,
                NULL,// vinitVec, //"init Vec", //iv,
                vplainText, //"Your Name", //plainText,
                plainTextBufferSize,
                (void *)bufferPtr,
                bufferPtrSize,
                &movedBytes); 
```

# django - 更新模板内变量的值 - django

> ID：11324839
> 
> 赞同：2
> 
> 时间：2012-07-04T08:01:40.027
> 
> 标签：django, django-templates, django-template-filters

我已经看到了足够多的示例，这些示例允许我在模板中声明一个新变量并设置它的值。但我想做的是更新模板内特定变量的值。

例如，我有一个对象的日期时间字段，我想根据`request.user`模板添加时区。所以我会创建一个`template filter`like `{% add_timezone object.created %}`，它会做的是添加时区`object.created`，之后每当我访问`{{object.created}}`它时都会给我更新的值。

谁能告诉我如何做到这一点。我知道我需要`context`从模板过滤器更新变量。但不知道如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:13:39.503

您不能修改模板中的值，但可以使用`{% with %}`标记定义“范围”变量：

```
{% with created=object.created|add_timezone %}
    Date created with fixed timezone: {{ created }}
{% endwith %} 
```

哪里`add_timezone`是一个简单的过滤器：

```
def add_timezone(value):
    adjusted_tz = ...
    return adjusted_tz

register.filter('add_timezone', add_timezone) 
```

# ruby-on-rails-3 - 如何在 Rails 3.2 的父模型范围内验证嵌套模型的唯一性？

> ID：11324840
> 
> 赞同：4
> 
> 时间：2012-07-04T08:01:39.933
> 
> 标签：ruby-on-rails-3, validation, activerecord

这是我的问题的一个例子。

我有一个“房间”模型：

```
class Room < ActiveRecord::Base
   has_many :items, :inverse_of => :room
   accepts_nested_attributes_for :items
end 
```

我有一个“项目”模型：

```
class Item < ActiveRecord::Base
   belongs_to :room, :inverse_of => :items
   validates :some_attr, :uniqueness => { :scope => :room}
end 
```

我想验证属于某个房间的所有项目的 :some_attr 属性的唯一性。

当我尝试验证项目时，我收到此错误：

```
TypeError (Cannot visit Room) 
```

我无法将验证的范围设置为 :room_id，因为项目尚未保存，因此 id 为 nil。我还想防止在“房间”模型中使用自定义验证器。

在 Rails 中有什么干净的方法吗？我也想知道我是否正确设置了 :inverse_of 选项......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T19:19:38.210

我认为您的使用方式没有任何问题`inverse_of`。

至于问题，在类似的情况下，我最终在迁移中强制使用唯一性约束，就像这样

```
add_index :items, [ :room_id, :some_attr ], :unique => true 
```

这是对 AR 级验证的补充

```
validates_uniqueness_of :some_attr, :scope => :room_id 
```

（我不确定使用关联名称作为范围是否有效，数据库适配器在尝试引用`room`查询中不存在的列时不会引发异常吗？）

# postgresql - PostgreSQL - 在 TYPE 元素上创建索引

> ID：11324841
> 
> 赞同：3
> 
> 时间：2012-07-04T08:01:40.550
> 
> 标签：postgresql, types, indexing

我想在特定类型的元素中创建索引。

你能帮助我吗 ？谢谢

```
CREATE TYPE taddress AS (
 street1 varchar,
 street2 varchar,
 zipcode varchar,
 city varchar
);

CREATE TABLE person (
    id serial primary key,
    firstname varchar not null,
    lastname varchar not null,
    address taddress);

CREATE INDEX idx_street1 ON person ((address).street2); -- <- Doesn't work !! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:09:10.873

请试试这个：

```
CREATE INDEX idx_street1 ON person (((address).street2)); 
```

如果这对您不起作用，请包含完整的错误消息。

# python - 在 Python Web2py webapp 中使用 web2py-appreport (xhtmltopdf) 生成 pdf

> ID：11324844
> 
> 赞同：0
> 
> 时间：2012-07-04T08:02:09.660
> 
> 标签：python, pdf-generation, web2py, pypdf, pisa

我来自非编码背景，所以 python、web2py 对我来说非常新。

我的应用程序需要将 textarea 内容（使用 RTE 编辑器）导出为 pdf。我从 textarea (redactor) 获取 html 内容，请您告诉我如何使用 pyfpdf 在按钮单击时生成 pdf 文件。

我不知道如何在单击按钮时获取 html 内容（图像和文本）以使用 appreport 生成 pdf。

如果html文件有css，我可以使用app-report从现有的html文件（没有css）生成pdf（使用PISA，PYPDF不起作用）它会引发错误，

```
***<class 'sx.w3c.cssParser.CSSParseError'> Terminal function expression expected closing ')':: (u'Alpha(Opacity', u'=0); }\n\n\n\n.ui-state-')*** 
```

这可能是由于控制器代码中的错误：

```
def myreport():
    html = response.render('myreport.html', dict())
    return plugin_appreport.REPORTPISA(html = html) 
```

* * *

我尝试的另一件事是使用 ajax post（在 Javascript 中）将 html 从我的视图传递到控制器。Redactor 是我正在使用的 textarea RTE，并且 alert 为我提供了所需的 html 结果。

看法：

```
function getContent() {
var t= jQuery('#redactor_content').getCode();
alert(t);
jQuery.ajax({ 
                    type: "POST", 
                    url: "http://127.0.0.1:8000/Test50/default/myreport2", 
                    data: "{g : 'jQuery('#redactor_content').getCode()'}" 

                }); 
 } 
```

控制器：

```
def myreport2():
    g = request.get_vars
    html = response.render(g)
    return plugin_appreport.REPORTPISA(html = html) 
```

由于我对编码的了解较少，我无法找出并纠正我的错误。如果有人可以帮助我解决这个问题，我将不胜感激。

问候， 阿卡什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T19:04:04.353

可能是这个帖子请求：

```
jQuery.ajax({ 
    type: "POST", 
    url: "http://127.0.0.1:8000/Test50/default/myreport2", 
    data: "{g : 'jQuery('#redactor_content').getCode()'}" 
  }); 
} 
```

我认为您应该将“数据”参数设置为文字字典，而不是字符串。像这样更改此行（删除除一组引号之外的所有引号）：

```
 data: {g : jQuery('#redactor_content').getCode() } 
```

这应该正确发送请求。[jQuery 文档](http://api.jquery.com/jQuery.ajax/ "jQuery 文档")说 data 参数应该是键值对，而不是字符串。

# iphone - iPhone：方法覆盖结果

> ID：11324849
> 
> 赞同：0
> 
> 时间：2012-07-04T08:02:20.633
> 
> 标签：iphone

我有如下方法覆盖。请忽略我写的方式，它可能写得并不完美，仅供参考。但是我想知道如果我的方法像这样为变量“a”覆盖，输出会是什么。

-> 基类

```
@interface A 
{
    int a=15;
}
 -(int) myFunction;
@end 
```

-> 派生类

```
@interface B : A 
{
    int a=10;
}
 -(int) myFunction;
@end 
```

让图像“myFunction”返回“a”。因为，它会覆盖方法，当我打电话时，

```
B bObj; 
bObj.a = ? 
```

输出 10 或 15 应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:08:33.743

我假设您知道您不能在这样的标头中声明变量，并且那里的初始化只是为了简单起见。

同样，您`B bObj`尚未初始化并且不是指针

* * *

`bObj.a`将返回 10。`[bObj myFunction]`. 您已经覆盖了该方法并告诉编译器忽略此方法的先前实现并使用新的实现。

你能建议这可能是什么输出：

```
A *obj = [[B alloc] init];
NSLog(@"%d", [obj myFunction]); 
```

或这个：

```
B *obj = [[A alloc] init];
NSLog(@"%d", [obj myFunction]); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-04T08:09:35.510

如果孩子和父母都将返回A，那么它的方法将被覆盖......但是如果类A的myFunction：返回A并且类b的myfunction返回B或任何具有相同关系的引用类型返回类型任何类都有意味着父子关系那么这也称为压倒一切

# java - 为什么通过 XOR 交换整数变量在一行中不起作用？

> ID：11324850
> 
> 赞同：11
> 
> 时间：2012-07-04T08:02:24.147
> 
> 标签：java, operators

我想使用 XOR 运算符交换 java 中两个整数变量的值。

这是我的代码：

```
int i = 24;
int j = 17;

i ^= j;
j ^= i;
i ^= j;

System.out.println("i : " + i + "\t j : " + j); 
```

它可以正常工作，但以下等效代码不起作用：

```
int i = 24;
int j = 17;

i ^= j ^= i ^= j;

System.out.println("i : " + i + "\t j : " + j); 
```

输出是这样的：

```
i : 0    j : 24 
```

第一个变量为零！Java有什么问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-04T08:40:52.333

根据[Java 规范](http://docs.oracle.com/javase/specs/jls/se7/jls7.pdf)（Java 7 规范）*第 15.26.2 节*（第 529 页）。

> 形式的复合赋值表达式`E1 op= E2`等价于`E1 = (T) ((E1) op (E2))`，其中`T`是 的类型`E1`，除了`E1`只计算一次。

根据*第 15.7 节评估顺序*（第 423 页）（***强调***我的）：

> ## 15.7 评估顺序
> 
> Java 编程语言保证运算符的操作数看起来是以特定的评估顺序进行评估的，即从左到右。
> 
> ### 15.7.1 先计算左手操作数
> 
> 在评估右侧操作数的任何部分之前，二元运算符的左侧操作数似乎已被完全评估。
> 
> ***如果运算符是复合赋值运算符（第 15.26.2 节），则左侧操作数的评估包括记住左侧操作数表示的变量以及获取和保存该变量的值以用于隐含的二元运算.***
> 
> 如果二元运算符的左侧操作数的求值突然完成，则右侧操作数的任何部分似乎都没有被求值。

*在第 15.26.2 节*（第 529 页）中有更详细的描述：

> 如果左侧操作数表达式不是数组访问表达式，则：
> 
> • 首先，评估左侧操作数以产生变量。[修剪]
> 
> • 否则，将保存左侧操作数的值，然后计算右侧操作数。[修剪]
> 
> • 否则，左侧变量的保存值和右侧操作数的值用于执行复合赋值运算符指示的二元运算。[修剪]
> 
> • 否则，二元运算的结果将转换为左侧变量的类型，经过值集转换（第 5.1.13 节）到适当的标准值集（不是扩展指数值集），并且转换结果存储到变量中。

文档中的示例

> **示例 15.26.2-2。复合赋值左侧的值在评估右侧之前保存**
> 
> ```
>  class Test {
>       public static void main(String[] args) {
>           int k = 1;
>           int[] a = { 1 };
>           k += (k = 4) * (k + 2);
>           a[0] += (a[0] = 4) * (a[0] + 2);
>           System.out.println("k==" + k + " and a[0]==" + a[0]);
>       }
>   } 
> ```

所以问题中的表达式被重写并分组为：

```
i = i ^ (j = j ^ (i = i ^ j)); 
```

评估左操作数：

```
i = 24 ^ (j = 17 ^ (i = 24 ^ 17));
    ** 
```

由于 的值没有像预期的那样“更新”，所以当被交换到时`i`，它会导致 的值`i`变为 0 。`24``j`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T08:10:29.273

通过在一个语句中编写全部交换，您依赖于内部`i ^= j`表达式相对于外部`i ^= (...)`表达式的副作用。

[从 Java 规范（15.26 赋值运算符）：](http://docs.oracle.com/javase/specs/jls/se5.0/html/expressions.html#15.26)

> 有12个赋值运算符；所有在语法上都是右关联的（它们从右到左分组）。因此，a=b=c 表示 a=(b=c)，将 c 的值赋给 b，然后将 b 的值赋给 a。
> 
> [...]
> 
> 赋值运算符：= *= /= %= += -= <<= >>= >>>= &= ^= |= 之一

您可能需要考虑代码的可读性。也许最好将代码放在一个名为 swap() 的方法中，或者通过使用临时变量进行实际交换：

```
int temp = i;
i = j;
j = temp; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T08:43:04.893

最左边的`i`是在更改之前进行评估。

您可以改为：

```
j ^= (i ^= j);
i ^= j; 
```

这稍微不那么紧凑但有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-05T21:44:49.827

怎么样：i ^= j ^ (j = j ^ i ^ j);

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-30T11:02:38.027

与 @nhahtdh 相比，这是一个更短的解决方案。我知道这是一个老问题，但只是想在 Stackoverflow 上记录它：P

`i = i ^ j ^ (j = i)`

# javascript - 在带有单击事件的 li 内停止复选框被检查两次

> ID：11324851
> 
> 赞同：1
> 
> 时间：2012-07-04T08:02:28.583
> 
> 标签：javascript, jquery, checkbox

我正在用 jQuery 编写一个简单的下拉菜单，每个项目都有一个复选框。当我点击一个`li`元素时，复选框被选中。但是，如果我单击复选框本身，它不会选择，因为它被有效地检查了两次。我怎样才能阻止这种情况发生？

jsFiddle：http: [//jsfiddle.net/ZEp7V/](http://jsfiddle.net/ZEp7V/)

**HTML：**

```
<div id="dropdown">Channels</div>
<ul class="droplist">
    <li>News <input type="checkbox" /></li>
    <li>Sport <input type="checkbox" /></li>
    <li>Science <input type="checkbox" /></li>
    <li>Health <input type="checkbox" /></li>
    <li>All</li>
</ul> 
```

**CSS：**

```
div#dropdown {
    border: 1px solid #000;
    width: 150px;
    height: 20px;
    line-height: 20px;
    padding: 10px;
    cursor: pointer;
}

ul.droplist {
    display: none;
    width: 170px;
    border: 1px solid #000;
    border-bottom: none;
    list-style-type: none;
    padding: 0px;
    margin: 0px;
    position: absolute;
    background-color: #fff;
}

ul.droplist li {
    border-bottom: 1px solid #000;
    padding: 10px;
    cursor: pointer;
}

ul.droplist li input {
    float: right;
} 
```

**JS：**

```
$(document).ready(function(){

    $("#dropdown").click(function() {
        $(this).next().slideToggle(200);
    });

    $(".droplist li").click(function(e) {
        // Toggle the checkbox
        var input = $(this).children("input");
        $(input).prop("checked", !$(input).prop("checked"));
    });

    $(".droplist li:last").click(function () {
        // Select all boxes
        var check = $('.droplist li input:not(:checked)').length;
        $(".droplist li input").prop("checked", check);
    });

}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T08:04:12.000

您可以在复选框中[停止事件的传播：](http://api.jquery.com/event.stopPropagation/)

```
$(".droplist li :checkbox").click(function (e) {
    e.stopPropagation();
}); 
```

这将防止事件将 DOM 树冒泡到父`li`元素（正如您所说，它触发绑定到它的事件处理程序）。

* * *

附带说明一下，您可以修改代码以利用事件委托，这更有效，因为每个`li`元素只有一个事件处理程序而不是一个事件处理程序。例如：

```
$(".droplist").on("click", "li", function (e) {
    // Toggle the checkbox
    var input = $(this).children("input");
    $(input).prop("checked", !$(input).prop("checked"));
}); 
```

[`.on()`](http://api.jquery.com/on/)有关详细信息，请参阅方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T08:09:16.543

用标签包裹复选框（标签与输入共享浏览器原生点击事件）

```
<li><label for="news_input">News <input type="checkbox" id="news_input" /></label></li>
<li><label for="sport_input">Sport <input type="checkbox" id="sport_input" /></li>
<li><label for="science_input">Science <input type="checkbox" id="science_input" /></li>
<li><label for="health_input">Health <input type="checkbox" id="health_input" /></li> 
```

并摆脱这种行为

```
$(".droplist li").click(function(e) {
   // Toggle the checkbox
  var input = $(this).children("input");
  $(input).prop("checked", !$(input).prop("checked"));
}); 
```

像这样，你应该没事。您的解决方案的问题是，一旦用户单击输入，本机浏览器复选框功能和 jQuery 就会相互杀死。（浏览器选中复选框，jQuery 取消选中它）

# php - 通过jquery ajax调用函数

> ID：11324855
> 
> 赞同：0
> 
> 时间：2012-07-04T08:02:38.023
> 
> 标签：php, ajax, cakephp, jquery

现在已经2天了，我仍然无法解决这个问题。所以基本上我试图通过 jquery ajax 调用一个 php 函数但没有任何工作，我不确定问题是什么......这是我的代码

阿贾克斯

```
$(document).ready(function() {
    $("#idCheck1").click(function(){
        $.ajax({
            url:'../../../../Controller/PostsController.php', 
            data: {action: 'update_checkbox'},
            success:function(result){
//                $("#dsa").html(result);
            } 
        });
    });
}); 
```

风景

```
<?php echo $this->Form->create("Posts", array("action" => "update_checkbox", "id" => "checkingBox")) ?>
                    <td>
                        <?php
                        echo $this->Form->input('Post.' . $i . '.id', array("type" => "hidden", "label" => false, "value" => $sum['posts']['id']))
                        ?>
                        <?php
                        echo $this->Form->input('Post.' . $i . '.done', array("type" => "checkbox", "label" => false, "value" => "1", "id" => "idCheck1"))
                        ?>
                    </td>
                </tr>
                <?php
                $i++;
            }
            ?>

        </table>
        <?php echo $this->Form->end(); ?> 
```

控制器

```
 public function update_checkbox() {
        //    debug($this->data);
        $var = $this->Post->saveCheckBox($this->data);
        $this->set("result", $var);
    } 
```

该模型

```
public function saveCheckBox($checkbox) {
        debug($checkbox);
        $this->saveAll($checkbox['Post']);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T08:27:24.733

网址

```
url:'../../../../Controller/PostsController.php' 
```

看起来不对。由于这是一个通过浏览器的 AJAX 请求，因此您不能使用尝试在文件夹层次结构中向上移动的相对路径，因为浏览器 url 不能以这种方式工作。您应该发出该请求，以便它通过 Web 服务器传递，即 url 应该类似于以下之一：

```
url:'http://localhost/Controller/PostsController.php' 
```

或者

```
url:'/Controller/PostsController.php' 
```

第一个选项是绝对 url，但这也使代码不太灵活（假设您将域从 localhost 更改为其他内容）。第二个选项是相对 URL，但它是相对于您的 Web 服务器的域根目录的（即在示例中它仍会解析为 localhost/Controller...）。

在这两种情况下，根据您发布的内容，您的 PHP 文件应该位于站点文档根目录中的 Controller/ 文件夹中。然而，您的代码结构表明您正在使用某种框架（例如 Zend、Symfony 或 CodeIgniter）？如果是这种情况，如果您发布有关您正在使用的框架的信息以及可能会改变答案的信息，将会很有帮助。

**更新**

对于 cakePHP，您应该通过前端控制器访问控制器，这意味着 URL 应如下所示：

```
url:'/posts' 
```

**更新 2**

对于 jquery 端，一个完整的 ajax 请求示例可能如下所示：

```
$(".idCheck").click(
   function(){ 
      var idVal = $(this).val();

      $.ajax({ 
         url:'/posts/update_checkbox', 
         data: {id: idVal }, 
         type: 'POST', 
         success:function(result){ 
            $("#dsa").html(result); 
         } 
      }); 
  }); 
```

请注意，该 URL 已经包含 update_checkbox 操作（即您要执行的操作的完整 url），并且数据对象包含您要发送到服务器的单击元素的值。如果要发送完整的表单，还可以使用 $('#myformselector').serialize() 将表单中的所有输入转换为适合 ajax 请求的数据属性的对象。

# iphone - 第二个UITextField我不能输入~~谁能教教我？

> ID：11324856
> 
> 赞同：2
> 
> 时间：2012-07-04T08:02:42.297
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我做一个`UIViewController`. 这是一个登录窗口。我使用`presentModalViewController`方法来弹出这个登录窗口。在这个登录窗口的视图中，我放了两个`UITextField`简单的代码，一个用户名文本字段和一个密码文本字段。但是当我运行这个应用程序时，出现了一个错误。我点击一个可选的文本字段，它可以随意输入。然后，我点击另一个文本字段，我无法再输入任何内容。

```
UITextField * f1 = [[UITextField alloc] initWithFrame:CGRectMake(100, 150, 100, 25)];
[f1 setBorderStyle:UITextBorderStyleRoundedRect];
UITextField * f2 = [[UITextField alloc] initWithFrame:CGRectMake(100, 180, 100, 25)];
[f2 setBorderStyle:UITextBorderStyleRoundedRect];

[[self view] addSubview:f1];
[[self view] addSubview:f2]; 
```

有没有人遇到过这种情况？请帮助我，谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:04:04.320

为字段提供委托连接

```
[f1 setDelegate:self]; 
```

在你的 .h 文件坑中

```
@interface SomeViewController : UIViewController<UITextFieldDelegate>
{
}
-(IBAction)textFieldDone:(id)sender;
@end 
```

和领域：

```
-(void)viewDidLoad{
       UITextField * f1 = [[UITextField alloc]initWithFrame:CGRectMake(10, 170.0, 300, 25)];
         f1.borderStyle = UITextBorderStyleRoundedRect;
         f1.text = @"";
         [f1 setDelegate:self];     
         [f1 addTarget:self action:@selector(textFieldDone:) 
         forControlEvents:UIControlEventEditingDidEndOnExit];
         [self.view addSubview:ke ti kazam zosto na telefon];

         UITextField * f2 = [[UITextField alloc]initWithFrame:CGRectMake(10, 210, 300, 25)];
         f2.borderStyle = UITextBorderStyleRoundedRect;
         f2.text = @"";
         [f2 setDelegate:self];     
         [f2 addTarget:self action:@selector(textFieldDone:) 
         forControlEvents:UIControlEventEditingDidEndOnExit];
         [self.view addSubview:f2];
}
-(IBAction)textFieldDone:(id)sender{    
    NSLog(@"textFieldDone");
} 
```

希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:15:26.607

很遗憾，我无法回答您的问题，但我可以指导您阅读可能对您有所帮助的教程[http://www.youtube.com/watch?v=h6MsPFPLeLY](http://www.youtube.com/watch?v=h6MsPFPLeLY)

# java - 如何从此方法正确返回？

> ID：11324857
> 
> 赞同：-3
> 
> 时间：2012-07-04T08:02:43.327
> 
> 标签：java, exception-handling

我有一个返回`boolean`类型的方法：

```
boolean activate() {
  try {

  } catch(IOException e){

  } catch (FileNotFoundException e){

  }
} 
```

我想知道是否需要退货，`false`或者`true`是否有异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T08:05:27.957

你能不能放：

```
 boolean activate() {
      try {
          // Do Something risky...
          return true;

      } catch(IOException e){
        return false;
      }
      catch (FileNotFoundException e){
        return false;
      }

   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T08:04:38.360

只有您知道激活失败时应该返回什么。

如果您不知道，我建议将异常从方法中抛出，并让调用者处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-23T17:55:17.413

这是一个设计问题（因此很可能被关闭），但它确实证明了一个非常重要的点：合同。您的功能的合同是什么？

```
/** This function will activate <a thing> and report success or failure to do so.
 *  @return true if <thing> is activated, false otherwise.
 */  //THIS CONTRACT IS SUPER IMPORTANT WHEN THINKING ABOUT CODING
boolean activate() {
  try {
    //Some code
    return true;
  } catch(IOException e){
    Log.error("When attempting to activate <thing> an IOException was thrown.");
    return false;//It wasn't activated! There was an IO exception, therefore follow the contract.
  } catch (FileNotFoundException e){
    Log.error("When attempting to activate <thing> a FileNotFoundException was thrown.");
    return false;//It wasn't activated! There was a different exception, therefore follow the contract.
  }
} 
```

但是，您会注意到日志记录的存在。为什么这很重要？因为您的代码应该响亮但持久。在这种情况下; 它返回一个合同上正确的响应（真/假），因此任何调用它的代码都知道它是否成功并且可以正常运行而不会出现尴尬的异常处理或整个程序优雅地崩溃。这意味着它是持久的代码。但是，日志记录让它变得响亮：这意味着，如果您正在监视应用程序的运行状况，您将很容易看到存在问题，并且准确地发现问题出在哪里。然后你可以修复它。

合同。耐用性。能见度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T08:04:55.953

您应该确保在生产代码中以某种方式使用错误，但基本版本是：

```
boolean activate() {
    try {

    } catch(Exception e){
        return false;
    }
    return true;
} 
```

# python - 来自re的python匹配时间格式

> ID：11324867
> 
> 赞同：-2
> 
> 时间：2012-07-04T08:03:31.213
> 
> 标签：python, regex

在下面的字符串中，如何编写关于时间的正则表达式。输出应该只是时间戳。

```
 l1=May 30, 2012 at 8:13 AM  Comment · 1Like Unlike · Bookmark Unbookmark
 l2=yesterday at 12:13 AM  2Comment  Like Unlike · Bookmark Unbookmark
 l3=Two days ago at 01:18 AM  Comment · 5Like Unlike · Bookmark Unbookmark
 l4=Two days ago at 15:54 PM  Comment · Like Unlike · Bookmark Unbookmark 
```

`EDIT`

```
 l5=Two days ago at 15:54:51 PM · Comment · Like Unlike · Bookmark Unbookmark 
```

输出：

```
 array1 = [May 30, 2012 at 8:13 AM ,yesterday at 12:13 AM ,Two days ago at 01:18 AM,Two days ago at 15:54 PM]

 array2=[Comment · 1Like Unlike · Bookmark Unbookmark,2Comment · Like Unlike · Bookmark Unbookmark,Comment · 5Like Unlike · Bookmark Unbookmark,Comment · Like Unlike · Bookmark Unbookmark] 
```

**编辑：**

```
p_date = re.compile(r'(\d{1,2}[:]\d{1,2}) but i wasnt sure how to do it if the timestamp was also like 23:12:29 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T08:09:58.470

```
>>> import re
>>> pattern = r'l\d+=(.*?)·(.*)'
>>> l1 = []
>>> l2 = []
>>> for line in s.split('\n'):
    m = re.match(pattern, line)
    if m:
        l1.append(m.groups()[0])
        l2.append(m.groups()[1])

>>> l1
['May 30, 2012 at 8:13 AM ', 'yesterday at 12:13 AM ', 'Two days ago at 01:18 AM ', 'Two days ago at 15:54 PM ']
>>> l2
[' Comment \xb7 1Like Unlike \xb7 Bookmark Unbookmark', ' 2Comment \xb7 Like Unlike \xb7 Bookmark Unbookmark', ' Comment \xb7 5Like Unlike \xb7 Bookmark Unbookmark', ' Comment \xb7 Like Unlike \xb7 Bookmark Unbookmark']
>>> 
```

**编辑**：添加匹配`l1=`以将其从匹配中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:05:02.483

你可以用“。”分割你的输出。, 如果你的输入格式是一致的。应用正则表达式来识别不同格式的时间戳字符串可能是一项繁重的任务。

# iphone - maskToBounds 和cornerRadius 之间有什么关系？

> ID：11324878
> 
> 赞同：16
> 
> 时间：2012-07-04T08:04:17.127
> 
> 标签：iphone, objective-c, ios, calayer, cornerradius

我的卷轴有一些观点是`cornerRadius = 10.0`和`masksToBounds = YES`。

这会导致滚动我的滚动视图时出现性能问题。虽然我尝试了每个视图的`shouldRasterize`设置`YES`，但问题并没有解决。

但是，我知道这个问题的解决方案。就是这样`masksToBound`设置的`NO`。（`masksToBound's`默认值为NO）虽然`masksToBound`是`NO`，但我的观点的角落仍然有曲线，性能问题也解决了。

我想知道`cornerRadius`和之间的关系`masksToBounds`。我担心此设置会出现意外问题。

谢谢你。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-04T08:51:10.570

在提供`cornerRadius`which 指定用于绘制接收器背景的圆角的半径之后。

现在它取决于`masksToBounds`哪个确定子层是否被裁剪到接收器的边界。因此，如果将其设置为`YES`，则会将与图层边界匹配的隐式蒙版应用于图层，包括`cornerRadius`属性的效果。如果设置为`YES`并指定了掩码属性，则将两个掩码相乘以获得实际掩码值。

例如：

如果将其设置在`CALayer`带有图像内容的 a 上，图像仍将绘制在圆角半径边界之外。`sublayer.masksToBounds`你可以通过设置来解决这个问题`YES`；但如果你这样做，阴影将不会出现，因为它们会被掩盖！

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-04T08:12:57.003

没有任何特定的关系..实际上，当您调用 Corner Radius 时，它会以您通过的半径裁剪视图，并且 MaskToBound:Yes 使其对您裁剪的那部分透明，否则它将是可见的......

# jquery - 如何滑动highcharts？

> ID：11324885
> 
> 赞同：1
> 
> 时间：2012-07-04T08:04:48.267
> 
> 标签：jquery, html, highcharts

我想制作一个滑块，在一段时间后或单击鼠标时显示不同的图表。（就像一个图像滑块。）

怎么做？？我知道一点 jQuery，但我不知道如何实现它。

编辑：

我正在尝试在加载事件上使用 setInterval 方法。

但是，当我从 xml 文件中提取数据时，我的代码不起作用。但是，如果我放置显式值而不是 xml 文件，代码将完全按照我的意愿工作。我在这里粘贴我的代码。

```
$(document).ready(function($) {

    makeChart('data1.xml');

    function makeChart(file) {

        var options = {

            chart: {
                renderTo: 'container',
                type: '',
                events: {
                    load: function() {

                        // set up the updating of the chart each second                            
                        setInterval(function() {

                            makeChart('data2.xml');
                        }, 1000);
                    }
                }
            },
            title: {
                text: 'Fruit Consumption'
            },
            xAxis: {
                type: 'datetime',
                tickPixelInterval: 150
            },
            yAxis: {
                title: {
                    text: 'Value'
                },
                plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'}]
            },
            tooltip: {
                formatter: function() {
                    return '<b>' + this.point.name + '</b>: ' + this.percentage + ' %';
                }
            },

            xAxis: {
                categories: []
            },
            yAxis: {
                title: {
                    text: 'Units'
                }
            },

            series: []

        };

        $.get(file, function(xml) {

            // Split the lines
            var $xml = $(xml);

            options.chart.type = ($xml.find('type').text());

            // push categories
            $xml.find('categories item').each(function(i, category) {
                options.xAxis.categories.push($(category).text());
            });

            // push series
            $xml.find('series').each(function(i, series) {
                var seriesOptions = {
                    name: $(series).find('name').text(),
                    data: []
                };

                // push data points
                $(series).find('data point').each(function(i, point) {
                    seriesOptions.data.push(
                    parseInt($(point).text()));
                });

                // add it to the options
                options.series.push(seriesOptions);
            });
            var chart = new Highcharts.Chart(options);
        });

    }
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:19:06.157

我建议您阅读以下内容：

`setTimeout()`- 一段时间后运行幻灯片

`.click()`- 当您单击某个选择器时运行的事件

`animate()`- 如果你想让你的滑块流畅地工作

`css: left,right,top,bottom`- 您可以更改此属性`animate`以制作幻灯片效果

`css: position: absolute`- 在您想要滑动的元素上

`css: position: relative, overflow:hidden`- 在滑块中包含您的元素的元素上。

我认为这对你有帮助。您还可以在 google 中找到更多滑块示例。只是搜索。

祝你好运 ;）

# javascript - Javascript 命名空间 - 这种特殊的方法是好的做法吗？

> ID：11324886
> 
> 赞同：3
> 
> 时间：2012-07-04T08:04:54.307
> 
> 标签：javascript, namespaces

我是一个 javascript 新手，我想出了以下命名空间方案：

```
(function() {
    var ns = Company.namespace("Company.Site.Module");

    ns.MyClass = function() { .... };

    ns.MyClass.prototype.coolFunction = function() { ... };

})(); 
```

Company.namespace 是一个由脚本注册的函数，它简单地创建直到模块的对象链。

外部，在非全局范围内：

```
var my = new Company.Site.Module.MyClass(); 
```

我特别询问我`ns`从全局范围隐藏变量的方法 - 通过立即执行的包装匿名函数。我可以在`Company.Site.Module`任何地方写，但与将 ns 存储在局部变量中相比，它不是 DRY 并且有点混乱。

**你说什么？这种方法有什么陷阱？还有其他一些被认为更标准的方法吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:31:13.380

你的方法对我来说很好。

但是，您也可以通过从自动执行函数返回“类”来稍微不同地做到这一点：

```
Company.Site.Module.MyClass = (function() {
    var MyClass = function() { ... };
    MyClass.prototype.foo = function() { ... };
    return MyClass;
})(); 
```

这至少会去除所有`ns.`前缀。命名空间函数仍可用于创建对象，但在自执行函数之外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T14:52:06.580

您不需要像这样对类进行范围划分，只有在类之外有全局变量时才需要。我用这种方法...

```
MyApp.MyClass = function() {
};

MyApp.MyClass.prototype = {
   foo: function() {
   }
}; 
```

另请注意，我使用对象文字进行更清晰的原型声明

但是，如果您需要范围全局变量，那么您可以这样做

```
(function() {
   var scopedGlobalVariable = "some value";

   MyApp.MyClass = function() {
   };
   MyApp.MyClass.prototype = function() {
       foo: function() {
       }
   };
})(); 
```

# axapta - AX 中的数据透视表

> ID：11324899
> 
> 赞同：4
> 
> 时间：2012-07-04T08:05:46.950
> 
> 标签：axapta, dynamics-ax-2009, x++

我在 AX 2009 中遇到了一个问题，我不得不承认我基本上一无所知。

我想使用如下所示的表构建一个视图（是否基于 AOT 查询；但据我了解，使用 AOT 查询比严格使用视图可以做更多的事情）：

```
id    status    date
1     IN        10/10/2011
1     OUT       11/10/2011
2     OUT       12/10/2011
3     IN        13/10/2011
4     IN        14/10/2011
4     OUT       15/10/2011 
```

理想情况下，该视图应如下所示：

```
id   IN_Date      OUT_Date  
1    10/10/2011   11/10/2011
2    *NULL*       12/10/2011
3    13/10/2011   *NULL*
4    14/10/2011   15/10/2011 
```

在严格的 SQL 或什至使用 Microsoft Access 中，这是一项微不足道的任务，但我无法在 AX 2009 中找到执行此操作的方法，因为`AS`视图字段中没有“”选项。我不想使用显示方法，因为我希望从 AX 外部访问视图。任何提示将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T09:51:54.207

您想对表进行[完全外部](http://en.wikipedia.org/wiki/Join_%28SQL%29#Full_outer_join)联接（与自身联接）。

这在 X++ 中或作为查询不支持`joinMode`，但可以使用两个中间视图与外部连接和联合来模拟。

视图 1：

```
select id, date as dateIn from table as table1 
    outer join date as dateOut from table as table2
    where table2.id == table1.id and
          table1.status == Status::In and
          table2.status == Status::Out 
```

视图 2：

```
select id, date as dateOut from table as table1 
    outer join date as dateIn from table as table2
    where table2.id == table1.id and
          table1.status == Status::Out and
          table2.status == Status::In 
```

视图 3：

```
select id, dateIn, dateOut from view1 
union 
select id, dateIn, dateOut from view2 
```

以上或多或少是SQL，可以转成AX查询和视图。

[这个答案](https://stackoverflow.com/a/11119469/4509)中给出了一种方法。

# html - 如何在画布中选择并拖动线条？

> ID：11324903
> 
> 赞同：1
> 
> 时间：2012-07-04T08:05:54.500
> 
> 标签：html, canvas, drag

我现在正在开发一个绘画应用程序。它使用 html 画布。用户可以在画布上绘制形状。

现在我遇到了一个问题。我想选择我在画布上绘制的线条。当它被选中时，我可以拖动它或删除它。我该如何实施？有什么好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T10:28:47.637

看看[https://github.com/canvimation/canvimation.github.com](https://github.com/canvimation/canvimation.github.com)可能是值得的，它包含使用画布的绘图应用程序的源代码。

您应该注意，此应用程序正在重新编码，但还没有使用在线新代码的工作版本。新的源代码在**stage1**分支中。希望这个新代码比旧代码更容易理解，下面提到的代码来自**stage1**分支。

基本上，为每个绘制的形状创建一个形状对象，其中包括有关 eh 形状的所有数据，包括路径数据和给出形状周围矩形边界的数据。单击“boundarydrop” div 时，将调用函数 checkBoundary 并传递有关 shift 键和光标位置的数据。然后对于每个形状，第一个检查是查看光标是否在形状的边界内，如果是，则进行更精确的检查。对于闭合形状，检查光标是否在形状内部，对于开放形状，检查光标是否靠近路径。

取决于是否按住 shift 键以及形状属于哪个组，还有进一步的复杂性。然而，基础是存在的。

* * *

**签出功能**

*在 index.html 中*

下移
getPosition

*在脚本/drawboundary.js*

检查边界

是在

开启

*在脚本/shape.js*

形状

* * *

该应用程序的在线工作版本位于[http://canvimation.github.com/](http://canvimation.github.com/)，但它使用了 master 分支中的旧代码，并且存在一些错误，但它会让您对应用程序的功能有所了解。

希望这个对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:10:12.853

有一个名为 kinetic.js 的库，通过它，您可以使用选择功能跟踪您在画布上绘制的形状。

这是链接：[https ://github.com/ericdrowell/KineticJS](https://github.com/ericdrowell/KineticJS)

# django - 重定向 + 403 错误

> ID：11324909
> 
> 赞同：4
> 
> 时间：2012-07-04T08:06:29.127
> 
> 标签：django, redirect, http-status-code-403, http-error

我正在寻找一种方法来拥有这样的东西：

```
return HttpResponseForbiddenRedirect(reverse("view_name")) 
```

一个 HttpResponse 重定向到一个视图（带有它的名字）但仍然抛出一个 403 错误

我试图做这样的事情：

```
class HttpResponseForbiddenRedirect(HttpResponse):
    def __init__(self, redirect_to):
        super(HttpResponseForbiddenRedirect, self).__init__()
        self['Location'] = iri_to_uri(redirect_to)
        self.status_code = 403 
```

但它没有用。由于某种原因我不明白，我没有得到任何内容

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T08:19:16.540

它不起作用，因为你不能有一个 403 响应，它*也*像 302 响应一样被执行。

[HTTP 规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)告诉浏览器如何处理某些状态代码，因此获得 403的浏览器不会像处理 302 那样费心查看是否存在 Location 标头。

如果您想将某人从 X 重定向到 Y，因为他们不允许看到 X，那么只需发出标准 302，并执行诸如设置消息（使用 django.contrib.messages）之类的操作以告知用户他们为什么已被重定向，或将他们重定向到解释正在发生的事情的页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T08:16:26.047

您错过了 HTTP 状态代码背后的想法。正在使用 HTTP 代码 301/302 进行重定向。因此，您不能同时进行重定向和返回 403。如果没有返回 301/302 代码，它根本就不是重定向。

我不明白你为什么需要这个，但你总是可以制作如下视图：

```
def my403view(request): # e.g. /403.html
    return HttpResponseForbidden() 
```

并通过以下方式进行重定向：

```
return HttpResponseRedirect(reverse("403.html")) 
```

这将重定向（使用代码 302）到“my403view”，并将返回 403。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T09:09:12.707

我找到了解决方案：

```
from app_name.views import my_view

....
    retour = my_views(request)
    return HttpResponseForbidden(retour) 
```

其实很简单

所以我得到了 403 错误 + 我想加载的页面

# c - 来自不同进程的两个文件描述符指向打开文件表中的相同条目

> ID：11324913
> 
> 赞同：9
> 
> 时间：2012-07-04T08:06:45.237
> 
> 标签：c, linux, unix, file-io, linux-kernel

Unix 内核使用三种数据结构表示打开的文件：**`Descriptor table`**、**`File table`**和**`v-node table`**.
当一个进程打开一个文件两次时，它会在 . 中获得两个不同的描述符`descriptor table`，`file table`在`v-node table`.
而子进程继承父进程的`descriptor table`，所以内核`descriptor table`为每个进程分别维护一个。但是来自不同进程的两个描述符指向`open file table`.
所以

1.  当子进程对文件进行一些读取时，同一个文件的偏移量在父进程中会改变吗？

2.  如果 1 为真，对于两个进程，是否有一种方便的方法可以在同`fork`一个文件上获得相同的效果？这意味着两个进程在同一个文件上共享一个位置（偏移）信息。
3.  有没有办法让两个进程都有完全不相关的表，就像两个不相关的进程只是他们打开了相同的文件。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-04T08:14:13.030

> 当子进程对文件进行一些读取时，同一个文件的偏移量在父进程中会改变吗？

是的，因为偏移量存储在系统范围的文件表中。`dup`您可以使用or获得类似的效果`dup2`。

> 如果 1 为真，对于两个进程，是否有一种方便的方法可以在同`fork`一个文件上获得相同的效果？这意味着两个进程在同一个文件上共享一个位置（偏移）信息。

有一种称为“传递文件描述符”的技术使用 Unix 域套接字。在 中查找“辅助”数据[`sendmsg`](http://www.kernel.org/doc/man-pages/online/pages/man2/send.2.html)。

> 有没有办法让两个进程都有完全不相关的表，就像两个不相关的进程只是他们打开了相同的文件。

您必须`open`再次访问该文件才能实现此目的。虽然它没有做你想做的事，但你也应该寻找`FD_CLOEXEC`标志。

# blackberry-eclipse-plugin - 黑莓中的自定义文本框

> ID：11324915
> 
> 赞同：2
> 
> 时间：2012-07-04T08:07:04.917
> 
> 标签：blackberry-eclipse-plugin, blackberry-jde

![示例图片](../Images/58e350dbe6d87d07165807cd794aa4c4.png)嗨朋友们基本上我是一个安卓开发者。我是黑莓开发的新手。我需要使用图像按钮创建自定义文本框。

在文本框的右上角，我想要小图像按钮，它是单击侦听器，文本框字段应该为空。

我可以创建自定义文本框并在文本框内绘制位图。但我无法抓住图像按钮的焦点和侦听器。请帮我

请给出一些想法和样本。

我试过这个...

MyApp.java 类：

```
import net.rim.device.api.ui.UiApplication; 
```

公共类 MyApp 扩展 UiApplication {

```
public static void main(String[] args) {

    MyApp theApp = new MyApp();
    theApp.enterEventDispatcher();
}

public MyApp() {
    pushScreen(new MyScreen());
} 
```

}

MyScreen.java 类：

```
public final class MyScreen extends MainScreen {
public MyScreen() {
    super(Manager.NO_VERTICAL_SCROLL);
    setTitle("MyTitle");

    VerticalFieldManager vfm = new VerticalFieldManager(
            Manager.USE_ALL_HEIGHT | Manager.USE_ALL_HEIGHT);
    HorizontalFieldManager hfm = new HorizontalFieldManager(
            Manager.USE_ALL_WIDTH);
    HorizontalFieldManager hfm1 = new HorizontalFieldManager(
            Manager.USE_ALL_WIDTH);
    customManager ctm = new customManager(Manager.USE_ALL_WIDTH);

    customManager ctm1 = new customManager(Manager.USE_ALL_WIDTH);

    hfm.add(ctm);
    hfm1.add(ctm1);
    vfm.add(hfm);
    vfm.add(hfm1);
    add(vfm);
} 
```

}

customManager.java 类：

```
public class customManager extends Manager implements FieldChangeListener {

private Textbox txt;
private Closebtn cls;

Bitmap bitmap;

protected customManager(long style) {
    super(style);

    // My Coustem TextBOX
    txt = new Textbox(300, 100);
    // My Coustem Button
    cls = new Closebtn();

    cls.setChangeListener(this);
    add(txt);
    add(cls);
}

protected void sublayout(int width, int height) {

    setPositionChild(getField(0), 10, 10);
    layoutChild(getField(0), getField(0).getPreferredWidth(), getField(0)
            .getPreferredHeight());

    setPositionChild(getField(1),
            getField(0).getWidth() - (getField(1).getWidth()), getField(0)
                    .getHeight() / 2 - getField(1).getHeight() / 2);
    layoutChild(getField(1), getField(1).getWidth(), getField(1)
            .getHeight());

    setExtent(width, height);
}

public void fieldChanged(Field field, int context) {
    txt.setText("");

} 
```

}

Textbox.java 类：

```
public class Textbox extends Manager {
private int managerWidth;
private int managerHeight;
private int arcWidth;

private VerticalFieldManager vfm = new VerticalFieldManager(
        NO_VERTICAL_SCROLL | USE_ALL_WIDTH );
private EditField editField;
private Bitmap bagBitmap;

Textbox(int width, int height, long style) {
    super(style | NO_VERTICAL_SCROLL | NO_HORIZONTAL_SCROLL);
    managerWidth = width;
    managerHeight = height;
    long innerStyle = style & (READONLY | FOCUSABLE_MASK); // at least
    if (innerStyle == 0) {
        innerStyle = FOCUSABLE;
    }
    editField = new EditField("", "", 10, innerStyle);

    arcWidth = editField.getFont().getHeight() & 0xFFFFFFFE; // make it even

    EncodedImage en = EncodedImage.getEncodedImageResource("_text.png");

    bagBitmap = Util.getScaledBitmapImage(en, width, height);
    add(vfm);
    vfm.add(editField);
}

public void setFont(Font font) {
    super.setFont(font);
    editField.setFont(font);
    arcWidth = editField.getFont().getHeight() & 0xFFFFFFFE;
    updateLayout();
}

Textbox(int width, int height) {
    this(width, height, 0L);
}

public String getText() {
    return editField.getText();
}

public void setText(String newText) {
    editField.setText(newText);
}

public int getPreferredWidth() {
    return managerWidth;
}

public int getPreferredHeight() {
    return managerHeight;
}

protected void sublayout(int w, int h) {
    if (managerWidth == 0) {
        managerWidth = w;
    }
    if (managerHeight == 0) {
        managerHeight = h;
    }
    int actWidth = Math.min(managerWidth, w);
    int actHeight = Math.min(managerHeight, h);
    layoutChild(vfm, actWidth - arcWidth, actHeight - arcWidth);
    setPositionChild(vfm, arcWidth / 2, arcWidth / 2);
    setExtent(actWidth, actHeight);
}

protected void paint(Graphics g) {

    g.drawBitmap(0, 0, getWidth(), getHeight(), bagBitmap, 0, 0);

    super.paint(g);
} 
```

}

Closebtn.java 类：

```
public class Closebtn extends Field {

private Bitmap bitmap;

public Closebtn() {
    super(Manager.FOCUSABLE);

    EncodedImage en = EncodedImage.getEncodedImageResource("close.png");

    bitmap = Util.getScaledBitmapImage(en, 50, 50);

}

protected void layout(int width, int height) {
    setExtent(bitmap.getWidth(), bitmap.getHeight());
}

protected void paint(Graphics graphics) {
    graphics.drawBitmap(0, 0, bitmap.getWidth(), bitmap.getHeight(),
            bitmap, 0, 0);
}

protected void onFocus(int direction) {
    bitmap = bitmap;

}

protected void onUnfocus() {
    bitmap = bitmap;
}

protected boolean keyChar(char character, int status, int time) {
    if (character == Characters.ENTER) {
        clickButton();
        return true;
    }
    return super.keyChar(character, status, time);
}

protected boolean navigationClick(int status, int time) {
    clickButton();
    return true;
}

protected boolean trackwheelClick(int status, int time) {
    clickButton();
    return true;
}

protected boolean invokeAction(int action) {
    switch (action) {
    case ACTION_INVOKE: {
        clickButton();
        return true;
    }
    }
    return super.invokeAction(action);
}

public void setDirty(boolean dirty) {
}

public void setMuddy(boolean muddy) {
}

public void clickButton() {
    fieldChangeNotify(0);
} 
```

}

Util.java 类：

```
public class Util {

public static Bitmap getScaledBitmapImage(EncodedImage image, int width,
        int height) {

    if (image == null) {
        return null;
    }

    int currentWidthFixed32 = Fixed32.toFP(image.getWidth());
    int currentHeightFixed32 = Fixed32.toFP(image.getHeight());

    int requiredWidthFixed32 = Fixed32.toFP(width);
    int requiredHeightFixed32 = Fixed32.toFP(height);

    int scaleXFixed32 = Fixed32.div(currentWidthFixed32,
            requiredWidthFixed32);
    int scaleYFixed32 = Fixed32.div(currentHeightFixed32,
            requiredHeightFixed32);

    image = image.scaleImage32(scaleXFixed32, scaleYFixed32);

    return image.getBitmap();
} 
```

}

我的问题是我不能在这里添加多个字段请帮助我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T06:26:50.890

仅仅覆盖这并不容易`EditField`，所以这就是我要尝试的：

*   使用水平管理器（例如，`HorizontalFieldManager`或其他自定义管理器，可能具有固定列宽。该管理器内部有两个字段：左侧是 EditField，右侧是自定义按钮字段。
*   `Background`给经理设置一个。bg 将绘制绿色背景以及蓝色边框。您可以使用缩放位图（查看[`BackgroundFactory.createBitmapBackground`](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/decor/BackgroundFactory.html#createBitmapBackground%28net.rim.device.api.system.Bitmap%29)）。
*   创建一个新的`EditField`子类，并重写它的`paintBackground`方法，使它什么都不做。如果它不起作用，请尝试覆盖`paint`，以便它只绘制文本。这是最棘手的部分。
*   创建一个`Buttonfield`带有交叉灰色圆圈图像的自定义子类。[您可以在此处](http://docs.blackberry.com/es-es/developers/deliverables/29251/Creating_a_custom_button_1676236_11.jsp)阅读有关如何执行此操作的好教程。您还可以使用[Advanced Ui Library](http://docs.blackberry.com/es-es/developers/deliverables/29251/About_the_advanced_UI_library_1626501_11.jsp)`BitmapButtonField`中已经制作的一个。单击按钮时，它将在 EditField 上调用。`EditField.setText("")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T11:26:02.997

试试这个自定义类：

```
public class TextFieldWithClear extends HorizontalFieldManager {
protected HorizontalFieldManager hfmEditTextPanel;
protected LabelField lblEditText;
protected EditField textField;
protected MyImageButton bitmapFieldClear;
int mHeight;
int mWidth;
String mLabel;

public TextFieldWithClear(String label, int width, int height) {
    super(FOCUSABLE);

    Border border = BorderFactory
            .createSimpleBorder(new XYEdges(2, 2, 2, 2));
    this.setBorder(border);
    Background bg = BackgroundFactory.createSolidBackground(Color.WHITE);
    this.setBackground(bg);

    mWidth = width;
    mHeight = height;
    mLabel = label;

    lblEditText = new LabelField(mLabel) {
        protected void paint(Graphics graphics) {
            graphics.setColor(0x4B4B4B);
            super.paint(graphics);
        }
    };
    add(lblEditText);

    hfmEditTextPanel = new HorizontalFieldManager(FOCUSABLE
            | VERTICAL_SCROLL | VERTICAL_SCROLLBAR) {
        protected void sublayout(int maxWidth, int maxHeight) {
            maxWidth = mWidth - 30;
            maxHeight = mHeight;
            super.sublayout(maxWidth, maxHeight);
            setExtent(maxWidth, maxHeight);
        }
    };

    textField = new EditField() {
        // protected void layout(int width, int height)
        // {
        // width = mWidth - 50;
        // height=35;
        // super.layout(width, height);
        // //setExtent(width, height);
        // }
    };
    hfmEditTextPanel.add(textField);
    add(hfmEditTextPanel);
    bitmapFieldClear = new MyImageButton(
            Bitmap.getBitmapResource("btn_delete_normal.png"),
            Bitmap.getBitmapResource("btn_delete_focused.png"));
    bitmapFieldClear.setChangeListener(buttonListener);
    add(bitmapFieldClear);
}

public String getText() {
    String value = "";
    if (textField.getText().length() > 0)
        value = textField.getText();
    return value;

}

public void setString(String value) {
    if (value != null) {
        textField.setText(value);
    }
}

FieldChangeListener buttonListener = new FieldChangeListener() {
    public void fieldChanged(Field field, int context) {
        textField.clear(0);
        textField.setFocus();

    }
};
public void onUndisplay()
{
    textField.setEditable(false);
}
public void onDisplay()
{
    textField.setEditable(true);
}
 } 
```

# android - GCM android，未收到推送通知

> ID：11324917
> 
> 赞同：3
> 
> 时间：2012-07-04T08:07:09.433
> 
> 标签：android, google-cloud-messaging

我正在开发一个从 GCM 服务器接收推送通知的 android 应用程序。我使用 php 作为第 3 方服务器。

我有几个问题。

1.  当我从我的 php 脚本向 gcm 服务器发送请求时，它给了我以下响应

    ```
     {"multicast_id":8799227316277290616,"success":1,"failure":0,"canonical_ids":0,"results":[{"message_id":"0:1341388064110557%5d17b789f9fd7ecd"}]} 
    ```

    现在响应似乎很好，但您可以在 message_id 中看到一个 % 符号。那样可以么？如果不是，我如何才能收到正确的 message_ID？

2.  当我在我的 php 脚本中使用 json_decode 并回显这个 multicastid 它给了我这样的东西

    ```
    8.7992273162773E+18 
    ```

    我相信当我也回显 message_id 时它会给出相同类型的值。那么为什么它没有回显正确的值呢？

3.  我的最后一个问题是，当我发送这个看起来正确的请求并打开我的 android 应用程序时，那里没有任何通知。是上述错误引起的还是有其他问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T11:18:55.320

我对 C2DM 也有类似的问题。原因是我请求配额的 android 应用程序名称不同。一旦更正了包名称，它就得到了修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-27T04:04:37.003

就我而言，android 应用程序没有运行，因此无法接收推送通知。我启动了应用程序，然后我可以接收消息。

# objective-c - 如何使用 objectForKey 和 objectAtIndex 有效地访问 Obj-C 中的大对象？

> ID：11324922
> 
> 赞同：2
> 
> 时间：2012-07-04T08:07:58.003
> 
> 标签：objective-c, ios

如果我有一个通常来自解析的 JSON 对象的大型 NSDirectory，我可以使用如下代码访问该对象：

```
[[[[[obj objectForKey:@"root"] objectForKey:@"key1"] objectAtIndex:idx] objectForKey:@"key2"] objectAtIndex:idz]; 
```

这条线可能比这长得多。

我可以以任何方式优化此代码吗？至少让它更容易阅读？

如果对象不对应，这一行也会产生运行时错误，避免这种情况的最有效方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T08:21:35.323

如果您正在使用`-objectForKey:`您可以使用的所有内容`-valueForKeyPath:`，例如

```
[obj valueForKeyPath:@"key1.key2.key3.key4"] 
```

但是，当您需要使用`-objectAtIndex:`. 我不认为有什么好的解决方案适合你。`-valueForKeyPath:`也不会解决运行时错误的问题。

如果你真的想要一个简单的方法来做到这一点，你可以编写你自己的版本`-valueForKeyPath:`（称它为别的），它提供了一种用于指定一个`-objectAtIndex:`而不是键的语法，并进行适当的动态检查以确保对象实际响应有问题的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:13:34.030

如果你想更容易阅读代码，你可以像这样将该行分成几行

```
 MyClass *rootObject = [obj objectForKey:@"root"];
 MyClass *key1Object = [rootObject objectForKey:@"key1"];
 MyClass *myObject = [key1Object objectAtIndex:idx];
 ... 
```

等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T08:29:10.080

我认为，您可以创建一些数组，该数组将包含您的对象的完整“路径”。唯一的事情是，您需要以某种方式存储索引，可能在 NSNumber 中，在这种情况下，您不能使用 NSNumber 对象作为字典中的键。然后创建一个方法，该方法将为这个给定的“路径”返回所需的对象。喜欢

```
NSMutableArray* basePath = [NSMutableArray arrayWithObjects: @"first", [NSNumber numberWithInt:index], nil];
id object = [self objectForPath:basePath inContainer:container];

- (id) objectForPath:(NSMutableArray*)basePath inContainer:(id)container
{
    id result = nil;
    id pathComponent = [basePath objectAtIndex: 0];
    [basePath removeObjectAtIndex: 0];

    // check if it is a number with int index
    if( [pathComponent isKindOfClass:[NSNumber class]] ) 
    {
        result = [container objectAtIndex: [pathComponent intValue]];
    }
    else
    {
        result = [container objectForKey: pathComponent];
    }

    assert( result != nil );

    // check if it is need to continue searching object
    if( [basePath count] > 0 )
    {
        return [self objectForPath:basePath inContainer: result];
    }
    else
    {
        return result;
    }
} 
```

这只是一个想法，但我希望你明白我的意思。并且正如上面 Kevin 所说，如果没有索引，可以使用键值编码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T08:36:33.263

不知道是否适合你，不过你也可以试试积木，我总觉得很方便。至少他们使代码更具可读性。

```
NSArray *filter = [NSArray arrayWithObjects:@"pathToFind", @"pathToFind2",nil];

NSPredicate *filterBlock = [NSPredicate predicateWithBlock: ^BOOL(id obj, NSDictionary *bind){        
    NSArray *root = (NSArray*)obj;

    // cycle the array and found what you need.
    // eventually implementing some sort of exit strategy

}];

[rootObject filteredArrayUsingPredicate:filterBlock]; 
```

# c# - 如何在 C# 中使用 Console.Clear() 和多线程进行倒计时

> ID：11324923
> 
> 赞同：0
> 
> 时间：2012-07-04T08:07:57.947
> 
> 标签：c#, c#-4.0, console-application

我是 C# 的初学者。我正在开发一个控制台游戏，但我在 C# 中遇到了 Thread 的问题。

我的游戏将显示一个倒数计时器运行的顶部栏。我尝试使用线程，我使用 Console.Clear() 清除旧号码，然后在一行（59、58、57 ...）上替换为新号码。我的游戏向用户在中心屏幕或任何地方输入用户数据显示一条消息，...等。但是，当我开始线程倒计时时，它会清除控制台屏幕，并且会清除用户可以输入用户数据的消息。你能帮我解释一下如何启动2个线程，做更多不同的任务吗？

```
using System; using System.Threading;
namespace ConsoleApplication1 {
  class Program {
    static void Main(string[] args) {
        Program m = new Program();
        Thread pCountDown = new Thread(new ThreadStart(
            m.DisplayCountDown   
        ));
        Thread pDisplayForm = new Thread(new ThreadStart(
            m.DisplayForm    
        ));
        pCountDown.Start();
        pDisplayForm.Start();
        Console.ReadKey();
    }

    private void DisplayCountDown() {
        for (int i = 60; i >= 0; --i) {
            Console.Write("Time: {0}",i);
            Thread.Sleep(1000);
            Console.Clear();
        }

    }

    private void DisplayForm() {
        while (true) {
            Console.Write("Enter your number: ");
            int a = Int32.Parse(Console.ReadLine());
            Console.WriteLine(a);
            Console.ReadLine();
        }
    }
 }
} 
```

错误： [我的错误](http://i1204.photobucket.com/albums/bb403/manhdt90/1.jpg)

我想要这样：

图片（对不起，我是新会员）：[像这样](http://i1204.photobucket.com/albums/bb403/manhdt90/365webz%20data/3.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-07T12:17:44.150

您不需要清除控制台。`Console.Write()`覆盖现有字符，因此只需使用`Console.SetCursorPosition(x,y)`;更改光标位置

例如：

```
string mystring = "put what you want to right here";
Console.SetCursorPosition(0,0); //the position starts at 0 just make a note of it
Conolse.Write(mystring);

//now when you are ready to clear the text and print something over it again
//just add this

//now first erase the previous text
for(int i = 0; i< mystring.Length; i++)
{
    Console.SetCursorPosition(i,0);
    Console.Write(' ');
}

//now write your new text
mystring = "something else";
Console.SetCursorPosition(0,0);
Console.Write("mystring"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T08:14:45.370

您不需要线程，也不需要清除控制台。只需按照[此处](https://stackoverflow.com/questions/2370695/rewriting-characters-in-command-window)的建议使用`Console.SetCursorPosition()`和，这样您就可以覆盖数字。`Console.Write()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T08:22:12.593

`DisplayCountDown`这是一个不会每秒清除整个屏幕的示例：

```
private void DisplayCountDown()
{
    for (int i = 20; i >= 0; --i)
    {
        int l = Console.CursorLeft;
        int t = Console.CursorTop;
        Console.CursorLeft = 0;
        Console.CursorTop = 0;
        Console.Write("Time: {0}    ", i);
        Console.CursorLeft = l;
        Console.CursorTop = t;
        Thread.Sleep(1000);
    }
} 
```

然而，这仍然留下了一些问题。就我而言，我看到“输入您的号码”出现在顶行并被覆盖，因此必须添加该行

```
if (Console.CursorTop == 0) Console.CursorTop = 1; 
```

`while`循环内。此外，如果用户输入了足够多的数字，倒计时将滚动到视图之外，如果您尝试向上滚动查看它，则设置光标位置会自动向后滚动。

我也遇到了`int.Parse`抛出异常的间歇性问题，这可能是由于倒计时在用户输入的某个关键点发生变化引起的。

# oop - OOP - 表单包含类实例或类包含表单实例？

> ID：11324926
> 
> 赞同：0
> 
> 时间：2012-07-04T08:08:14.230
> 
> 标签：oop, user-interface

处理类对象的 GUI 的最佳（阅读：技术上最正确）方法是什么？

例如，假设我有一个类来处理 I/O。让我们称之为`clsIO`。我还有一个表单允许用户更改此类的各种选项/属性，我们称之为`frmIO`. `frmIO`GUI 是特定于 的，`clsIO`它不会在应用程序的其他任何地方使用。

我的应用程序将始终创建 的实例`clsIO`，它将加载其默认设置并开始其操作。用户可能需要也可能不需要显示`frmIO`“设置表单”以便他可以对其进行配置。

对我来说，处理这个问题的最好方法似乎是在类中存储对表单的对象引用，并提供一个`ShowConfigForm()`方法，而不是实例化表单，然后实例化类。

这是声音设计吗？

编辑

我计划在多个项目中重用这个类/表单组合。我已经在自己的项目中开发了它，因此我可以轻松地将其转移/导入到可能需要它的其他项目中。

我当前设计的简单伪代码：

```
class clsIO
{
  public bool Active{get;set;}
  public int Port{get;set;}
  public ShowConfigForm()
  {
    frmIO settings = new frmIO(this);
    settings.Show();
  }
}

class frmIO
{
  private clsIO _IO;
  public frmIO(clsIO IO){_IO = IO;};//constructor
  private btnEnable_Click()
  {
     _IO.Active = true;
    //etc etc
  }
} 
```

这里我只需要实例化`clsIO`. 不是反过来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:25:32.607

通常你会有一个包含配置的类。表单本身具有对该`settings`类的引用。如果用户更改表单中的设置，表单会将其告知`settings`类/对象。

现在您可以`clsIO`在设置中将您注册为观察者。这意味着每当发生变化时，`clsIO`都会收到通知并可以更新其操作（这样一来，设置将包含对其所有观察者的引用）。这被称为[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)。如果许多“未知”物体观察到某物，它就有力量。我的意思是，设置可能会影响许多不同的类/对象。观察者只决定设置，但从不改变它们。

如果您想保持简单，不费力，只需在`clsIO`. 这是您可以选择的设计。这个比较简单，所以如果它是一个小而简单的应用程序，应该就足够了。

但我认为你真正应该做的是，将形式与价值分开。表单只是一个视图，而实际值包含在另一个类中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T10:07:05.607

您已经完成了从 clsIO 到 frmIO （这是 GUI 类）的紧密耦合。这不是一个好的做法，因为这种紧密耦合会阻止您进行单元测试等。如果您需要将 clsIO 重新用于其他操作，这种与 fromIO 的紧密耦合会阻止您这样做。

需要有另一个类将它们放在一起，首先实例化 clsIO，然后通过将 clsIO 实例传递给 frmIO 来实例化 frmIO。这样您就可以将每个类的关注点分开，并将布线细化的责任交给另一个，这样会更干净。

此外，您可以通过从 clsIO 类中提取接口并使用 frmIO 中的接口类型来引用 clsIO 来改进设计。这将帮助您在 2 个类之间实现松散耦合。

如果您提供代码示例，请告诉我，如果我描述的内容没有多大意义。

# python - 哪个数据库用于科学数据（可变大小的图像 + 元数据搜索）

> ID：11324928
> 
> 赞同：3
> 
> 时间：2012-07-04T08:08:17.703
> 
> 标签：python, database, scientific-computing, data-management

我正在寻找一个好的数据库解决方案来存储大量（约 100 GB 到几 TB）的科学数据。理想情况下，它将能够处理大量数据。

## 要求

我的数据文件是“图像”，一个约 400 万个条目数组（1000x1000x3 整数 + 1000x1000 浮点数），加上每个图像约 50-100 个条目的相关元数据。元数据分层存储。图像将被组织到一个或多个“文件夹”（或“项目”）中，它们本身可以包含其他文件夹。一切都有所有者，等等。

我需要在一个或多个文件夹中搜索 100-10,000 张图像，主要基于其元数据。然后，我可能需要从图像中提取切片——如果我只需要其中的一小部分，我真的不想加载所有数据。图像应以压缩格式存储。

**编辑**：重要的是要强调我缺乏统一的数据。例如，图像是未知尺寸的浮点数或整数，通常具有 10^5-10^6 个条目，并且每个图像的元数据数量可能会有所不同。跨图像搜索元数据当然仅限于具有相同键的那些。

## 当前方法

我目前的，但不是很好的解决方案是混合数据库。首先，我使用 SQL 数据库（现在是 Django + MySQL）来处理“文件夹”、所有者，并且每个图像都有记录，但没有任何数据。我也可以为元数据创建记录。其次，我使用 PyTables 以 hdf5 格式存储图像和元数据，并将其视为数据库。这解决了切片和压缩问题，并允许我分层存储元数据，但 PyTables 似乎没有可扩展性，并且远不如商业数据库发达。（它不是为多用户环境而设计的：我正在编写自己的锁！这是一个不好的迹象。）

## 帮助！

我不是铁杆程序员，因此强烈推荐标准数据库解决方案。我的“优化”肯定会包括维护和编程成本。谁能推荐最喜欢的数据库解决方案或架构？关于关系vs分层vs其他的想法？

选项可能是 SciDB（不常见，可能很好）、SQL（听说这对这些应用程序不利，可能是 PostgreSQL？）和 HBase（实际上，我对此一无所知）。我觉得在科学，尤其是天文学，社区中肯定有好的解决方案，但是大型项目似乎需要一个认真的团队来建立和维护。

我很乐意提供更多信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-10T18:44:03.707

您是否以 HDF5 格式存储数据？由于您已经提到您不愿意加载所有数据，您可能不太喜欢 SciDB、MonetDB 或 RasDaMan 等阵列数据库选项。将原始科学格式的大数据加载到数据库中是非常痛苦的，而且通常还需要一些额外的编程工作。

您可以查看这篇论文：[Supporting a Light-Weight Data Management Layer over HDF5](http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=6546110&tag=1)。这项工作建议直接在 HDF5 上操作 SQL。

# .net - Sql Server 代理无法运行 .net 控制台应用程序

> ID：11324930
> 
> 赞同：1
> 
> 时间：2012-07-04T08:08:18.090
> 
> 标签：.net, sql-server, console-application

我有一个控制台应用程序可以手动运行，但是当它由 SQL Server 代理执行时，它根本无法运行，并且还会吐出一条奇怪的错误消息，如下所示：-

```
Executed as user: I01SVTD21\SYSTEM.
Unhandled Exception: System.IO.IOException: The handle is invalid.       
     at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)     
     at System.Console.GetBufferInfo(Boolean throwOnNoConsole, Boolean& succeeded)
     at System.Console.Clear()
     at ActiveDirectoryImport.Program.SendReports()
     at ActiveDirectoryImport.Program.GetUserInfo()
     at ActiveDirectoryImport.Program.Main(String[] args).
Process Exit Code 255\.  The step failed. 
```

现在这可能看起来不像一个奇怪的错误消息，直到您意识到 ActiveDirectoryImport.Program.SendReports() 是 ActiveDirectoryImport.Program.GetUserInfo() 调用的最后一个方法，所以看起来大部分代码已经运行。然而，情况并非如此，因为代码所做的第一件事就是更新数据库表中的记录，这并没有发生......

所以我有两个问题。当手动从同一位置正常运行时，为什么作业完全失败？而且，为什么它告诉我它在代码中很晚才失败，而它显然还没有那么远？

控制台应用程序确实写入控制台屏幕，但不接受用户输入。它基本上将应用程序的状态写入屏幕，这似乎是错误的......

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T12:07:32.223

也许这应该是一条评论，但从异常（以及一些心理调试）来看，这是非常“明显”的：

`System.Console.Clear()`当进程的标准输出未附加到控制台的输出时，这将导致您看到的异常。当您从命令行调用应用程序并重定向其输出时，最容易重现：

```
MyConsoleApplication.exe > NUL 
```

检查您的 SQL 代理命令行是否不包含这样的重定向 - 实际上，我不确定，但 SQL 代理可能会自动重定向您的进程的输出以将其显示在它的日志中。所以最好的办法是`System.Console.Clear()`完全删除调用，可以说无论如何在这种情况下它没有多大意义。或者，只需像这样包装它

```
 try
   {
      System.Console.Clear();
   }
   catch (IOException)
   {
   } 
```

忽略此特定错误。请注意，在这种情况下，其他控制台功能/属性（如`CursorVisible`, ）也可能会抛出一个`IOException`。

顺便说一句，`CursorVisible`实际上是编写这样一个辅助函数的“好”候选人：

```
 bool ConsoleInputIsRedirected
 {
     get
     {
         try
         {
             bool f = System.Console.CursorVisible;
             return false;
         }
         catch (IOException)
         {
             return true;
         }
     }
 } 
```

如果需要，您可以使用此函数有条件地执行仅在输出未重定向时才有效的代码（如`Clear()`）。

# jquery - 使用 jQuery 以编程方式添加 ASP.NET UserControls 具有相同的 id

> ID：11324932
> 
> 赞同：1
> 
> 时间：2012-07-04T08:08:22.750
> 
> 标签：jquery, asp.net, user-controls

我正在建立一个食品订购有点网络项目。我使用 asp.net 用户控件在页面加载时添加食物，它们都有唯一的 ID。但是我需要使用 jquery 将食物添加到购物车中，并将它们显示在用户控件中的食物列表旁边。现在，我调用了一个 web 方法，该方法创建了一个虚拟页面、一个表单并添加了我的控件、删除了表单标签并将其余部分返回给我的 ajax 调用，而 JS 将内容添加到我的页面。但是我所有的用户控件都具有相同的 ctl00_Panel1 id。

这就是我调用我的网络方法的方式

```
$.ajax({
            type: "POST",
            url: "kategorilistesi.aspx/RenderControl",
            data: "{id:'" + id + "',miktar:'" + miktar + "',baslik:'" + baslik + "',aciklama:'" + aciklama + "',tutar:'" + tutarf + "'}",
            //data: "{controlName:'" + "~/UserControls/ksepetitem.ascx" + "'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (response) {
                $.unblockUI();
                $('#sepetxy').append(response.d);
            },
            failure: function (msg) {
                $.unblockUI();
                alert(msg);
            }
        }); 
```

这是我的网络方法

```
[WebMethod]
    public static string RenderControl(int id, string miktar, string baslik, string aciklama, double tutar)
    {
        kategorilistesi m = new kategorilistesi();
        string uid = Guid.NewGuid().ToString();
        ArrayList cart = (ArrayList)m.Session["cart"];
        Siparis n = new Siparis(id, Double.Parse(miktar), baslik, aciklama, tutar, uid);

        cart.Add(n);
        m.Session["cart"] = cart;

        Page page = new Page();
        UserControl userControl = (UserControl)page.LoadControl("~/UserControls/ksepetitem.ascx");
        userControl.EnableViewState = true;
        ksepetitem a = (ksepetitem)userControl;
        a.YemekAdi = baslik;
        a.YemekFiyat = tutar;
        a.YemekMiktar = Double.Parse(miktar);
        a.Guid = uid;

        HtmlForm form = new HtmlForm();
        form.Controls.Add(userControl);
        page.Controls.Add(form);

        StringWriter textWriter = new StringWriter();
        HttpContext.Current.Server.Execute(page, textWriter, false);
        return m.CleanHtml(textWriter.ToString());
    } 
```

我怎样才能为我的控件设置唯一 ID？我正在使用 GUID，但我不知道如何在这种情况下添加使用它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:39:05.807

原来我只需要自己用我的 GUID 分配控件 ID。像这样，

```
....YemekFiyat = tutar;
        a.YemekMiktar = Double.Parse(miktar);
        a.Guid = uid;

        a.ID = uid;

        HtmlForm form = new HtmlForm();
        form.Controls.Add(userControl);
        page.Controls.Add(form);...... 
```

# php - 运行广泛的 PHP 脚本 - 编写 XML

> ID：11324934
> 
> 赞同：0
> 
> 时间：2012-07-04T08:08:24.963
> 
> 标签：php, ssh

我有一个相当广泛的 PHP 脚本，我必须在我的数据库上运行它，并从文件结构中收集 img 大小并将该信息写入 XML 文件。我尝试直接从 Web 浏览器运行，但成功率最低，因为网关在大约 3 分钟后超时。我也尝试从 ssh shell 运行，但没有成功。这是大部分脚本

```
 //Get all galleries from client
            $query = mysql_query("SELECT *
                                    FROM gallery
                                    WHERE clientRef BETWEEN 420
                                    AND 430
                                    ORDER BY clientRef
                                ");

            while ($row = mysql_fetch_array($query)) {

            //set gallery id

            $galleryID =  $row['id'];
            $clientRef = $row['clientRef'];
        //Check image sizes and set horizontal vs vertical
            $fImageSizeName = mysql_fetch_array($qAlbumImages);
            $imageSizeName = $fImageSizeName['OrgImageName'];

            $galleryPath = $_SERVER['DOCUMENT_ROOT'] . "/data/gallery/" . $galleryID . "/images/"; 

            if(is_dir($galleryPath)) {
                list($width, $height) = getimagesize($_SERVER['DOCUMENT_ROOT'] . "/data/gallery/" . $galleryID . "/images/album/" . $imageSizeName);

    header("Content-Type: text/plain");

        //Create the xml document
        $xmlDoc = new DOMDocument();

        //Create the root Element
        $root = $xmlDoc->appendChild(
                $xmlDoc->createElement("PageflipDataSet"));
        //Create settings element
        $settings = $root->appendChild(
                    $xmlDoc->createElement("Settings"));
    //Create PageOrder Node
        $PageOrder = $root->appendChild(
                    $xmlDoc->createElement("PageOrder"));

        $qAlbumImages = mysql_query("   SELECT *
                                        FROM galleryimage 
                                        WHERE galleryId='{$galleryID}' 
                                        AND clientRef= '{$clientRef}' 
                                        ORDER BY sort
                                    ");

        while ($fAlbumImages = mysql_fetch_array($qAlbumImages)) {
            $path  = "../../../../data/gallery/" . $galleryID . "/images/album/" . $fAlbumImages['OrgImageName'];
            //Create the PageData Node
            $PageData = $PageOrder->appendChild(
                        $xmlDoc->createElement("PageData"));
                //PageFile attribute
                $PageData->appendChild(
                        $xmlDoc->createAttribute("PageFile"))->appendChild(
                        $xmlDoc->createTextNode($path));
        }//close while

//Format output so it looks pretty
    $xmlDoc->formatOutput = true;
    //Save and create path to gallery ID

    $galleryPath = $_SERVER['DOCUMENT_ROOT'] . "/data/gallery/" . $galleryID;

    //Set path
    if(is_dir($galleryPath)) {
        $xmlPath = $_SERVER['DOCUMENT_ROOT'] . '/data/gallery/' . $galleryID . '/xml/pageflipdata.xml';
        $xmlDoc->save($xmlPath);
    }
}//close while 
```

关于我应该如何去做的任何建议。大约有 2000 个 clientRef，每个 clientRef 有 5-10 个相册，其中可以包含 15-30 个图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:10:49.020

如果超时是主要问题，您可以在较小的块中执行它并稍后手动组合 xml。

如果这需要定期运行，您可以使用类似的过程，但使用 ajax 或其他方式在不同的请求中运行每个“较小的块”，以等待所有小块脚本的确认以运行 xml 组合脚本。

当然，简单地增加 PHP 的 max_execution_time 会更容易。如果您无权访问它，则可以通过监视执行时间然后调用[set-time-limit](http://php.net/manual/en/function.set-time-limit.php)再次重置计时器来将某些东西调整为工作顺序。不过，我从来没有尝试过，所以只是一个想法。

# javascript - div上的onclick事件未触发

> ID：11324937
> 
> 赞同：1
> 
> 时间：2012-07-04T08:08:41.910
> 
> 标签：javascript, jquery, css, html, onclick

我有一个带有最近博客文章的图像+文本滑块，它循环浏览最近的文章，而访问者一直在查看某个页面。

[您可以在http://jsfiddle.net/GsgPM/16/](http://jsfiddle.net/GsgPM/16/)上查看所有代码。 它是关于不会触发的大图像 + 文本滑块。该事件确实在粉红色按钮上触发。真的不适合我……为什么它适用于一个，而不适用于另一个？

现在，我想在包含黑色边框的 div(slider) 上使用 onclick 事件将人们重定向到正确的博客文章。唯一令人费解的是，click 事件没有触发，光标也没有更改为 css 样式表中定义的正确图像（一只手），但确实添加了 1px 边框。

在测试 div 上，在我的故障代码下方[http://jsfiddle.net/GsgPM/16/](http://jsfiddle.net/GsgPM/16/)上的代码中，它确实触发了。在我博客的另一页上，点击事件完全没有问题。

当我在 google chrome 检查元素窗口中查看代码更改时，单击事件确实会在 div 更改上传输。

JSLint 没有显示错误，我的控制台也没有显示任何错误。整个事件根本不会触发。

谁知道这个问题的根本原因是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T08:24:17.210

问题是阴影 div。当您单击滑块时，单击会在 id="shadow" 的 div 上注册。尝试删除该 div，然后它就可以工作了。如果您需要该 div，则必须确保它位于滑块 div 下方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:12:44.717

在您的代码中，您有

```
onclick="window.alert('Hello Raxacoricofallapatorius' 
```

你错过了一个）；所以它会是

```
onclick="window.alert('Hello Raxacoricofallapatorius'); 
```

对点击 img 做出反应的更多 Jquery 方式是使用 on

```
$('#smallphotos div').on('click','img',function() {
        alert('here');
    }); 
```

为了进一步做到这一点，您可以将目标存储在数据属性上，例如

```
<img src="http://www.freedigitalphotos.net/images/gal_images/av-_50.jpg" title="test2" data-target="www.google.com" /> 
```

然后可以像这样重定向您的页面。

```
 $('#smallphotobox').on('click','#smallphotos div',function() {
    window.location.href=$(this).data('target');
}); 
```

另外#slider 是一种方式，您会注意到我将其删除并且一切正常.. 尝试将其 z 索引设置为在其余部分之后。

**注意**由于限制，这不适用于 jsfiddle。

[小提琴](http://jsfiddle.net/GsgPM/13/)

# java - 如何在android中访问在线mysql数据库？

> ID：11324939
> 
> 赞同：7
> 
> 时间：2012-07-04T08:08:44.047
> 
> 标签：java, android, mysql

我已经创建了一个关于餐馆的在线数据库，我需要通过我的 android 应用程序访问这个数据库，以便我可以在过滤后向用户显示数据。我的应用程序不需要更新数据库，但我的问题是如何连接到我的在线 mysql 数据库并将其提供给用户？我在这个站点以及其他站点上查看了许多建议，我只是发现我必须在访问时使用 JSON 解析器，但不知道如何去做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T08:10:26.463

最好的解决方案是提供一个公共 API，例如使用 PHP 进行管理，它可以根据您的 Android 应用程序的需要提供过滤和显示的数据库数据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T08:21:17.920

此链接可能会对您有所帮助。[http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/) 了解 JSON 解析器以及它如何在 android 中用于检索数据从服务器上的数据库...您可以在 php 中编写 Web 服务 ..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T08:18:48.750

您需要提供 Android 应用程序可以与之对话的服务器端解决方案。PHP 脚本是一个不错的选择，它可以直接与 MySQL 数据库交互，并将结果返回到设备。

然后，您可以创造性地使用 PHP 脚本，对结果进行排序等，并通过从 Android 设备中移除一些处理，并在电池寿命不是那么大的问题的服务器端进行处理，从而提供更全面的解决方案.

您只需要在 Android 设备上实现 Web 服务调用，通过 HTTP 的简单 GET/POST 请求就足够了，具体取决于您打算做什么。查看 REST API 以获取有关如何正确实施的指南。

为此，您可以轻松地将 PHP 脚本添加到与 MySQL 数据库相同的服务器

# windows-phone-7 - Windows Phone 7 SIP 键盘颜色

> ID：11324943
> 
> 赞同：1
> 
> 时间：2012-07-04T08:09:04.620
> 
> 标签：windows-phone-7

我计划有一个使用灯光方案的应用程序，而不管系统范围的配色方案是什么。

是否可以将 SIP 键盘的配色方案更改为浅色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T08:12:51.887

使用默认的 SIP 键盘，您不能。

但是您可以创建自定义键盘。 [http://www.silverlightshow.net/items/Windows-Phone-7-Creating-Custom-Keyboard.aspx](http://www.silverlightshow.net/items/Windows-Phone-7-Creating-Custom-Keyboard.aspx)

# openfire - agsxmpp 以编程方式创建用户帐户

> ID：11324944
> 
> 赞同：1
> 
> 时间：2012-07-04T08:09:09.167
> 
> 标签：openfire, agsxmpp

我正在使用 agsXMPP 库和 Openfire 服务器。效果很好。但我找不到，如何从 agsXMPP 创建新用户帐户（将新用户添加到 openfire 数据库）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T11:48:54.463

将**RegisterAccount**设置为 true。其余代码与正常登录代码相同。

亚历克斯

# php - 如何从我的数据库中获取订单数量？

> ID：11324946
> 
> 赞同：-3
> 
> 时间：2012-07-04T08:09:15.383
> 
> 标签：php, sql

我正在准备一个图表，它将显示当前月份和年份中特定日期的订单数量。我想要每天的订单数。我在 y 轴上显示订单数，在 x 轴上显示日期。在我的数据库中，有一个名为“order”的表，其中放置了订单数据：订单日期、user_id、order_price 等。例如，如果在 7 月 4 日下达了 10 个订单，则在 7 月 5 日下达了 20 个订单，并且很快。

如何获取当月某天的订单数量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T09:06:40.037

我没有正确理解你的意思，但这里有两个解决方案，我可以从所有评论中收集到

*   您需要计算某一天的订单数量

如果您只想要特定日期的订单，您可以使用此查询

```
 select count(*)as "Order Placed" from examp where date_of_order = '2012-01-15'; 
```

*   您需要一份已下订单的清单（日期方面）

> 按 date_of_order 从示例组中选择 DATE_FORMAT(date_of_order,'%M %Y') 作为“日期”，count(*) 作为“已下订单”；

看到它在这里工作

[SqlFiddle](http://sqlfiddle.com/#!2/69782/7)

编辑：

现在，如果您想要一个月的列表，只需使用 where 子句。

```
select DATE_FORMAT(date_of_order,'%M %Y') as "DATE",count(*) as "Order Placed" 
from examp
 where month(date_of_order) = '2'  group by date_of_order; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:17:56.193

只是添加到Ankit所说的内容..

按天分组时，如果您的 date_of_order 包含时间戳，您可能会遇到问题：

例如 2012-01-01 12:37:01

如果它确实使用 DATEADD 将时间向下舍入到午夜，以便您可以按天分组。

```
 DATEADD(DAY, DATEDIFF(DAY, 0, [date_of_order]),0) 
```

然后它看起来像：

2012-01-01 00:00:00

所以你的代码应该是这样的：

```
 SELECT 
    date_of_order,
    COUNT(date_of_order)  
    FROM examp 
    GROUP BY DATEADD(DAY, DATEDIFF(DAY, 0, [date_of_order]),0) 
```

# c# - C#从图片框中保存图片

> ID：11324951
> 
> 赞同：-3
> 
> 时间：2012-07-04T08:09:26.057
> 
> 标签：c#, winforms

我是c#的初学者。我希望将图片从 pictureBox1 保存到本地磁盘，那么我需要执行哪些步骤？

```
private void button1_Click(object sender, EventArgs e)
    {

        Graphics g;
        int i = 9;
        int k;
        String[] letter1 = new String[9] { "b", "W", "b", "w", "B", "w", "B", "w", "B" };
        g= pictureBox1.CreateGraphics();
        Pen b = new Pen(Color.Black, 1.0f);
        Pen B = new Pen(Color.Black, 2.0f);
        Pen w = new Pen(Color.White, 1.0f);
        Pen W = new Pen(Color.White, 2.0f);

        for (int j = 0; j <= 8; j++)
        {
            String array = letter1[j];
            if (array.Equals("b") || array.Equals("w"))
            {
                i = i + 1;
                k = 50;
                if (array.Equals("b"))
                {
                    g.DrawLine(b, i, 10, i, k);
                }

            }
            else
                if (array.Equals("B") || array.Equals("W"))
                {
                    i = i + 2;
                    k = 51;
                    if (array.Equals("B"))
                        g.DrawLine(B, i, 10, i, k);
                }

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T08:19:08.820

如果您创建一个空的 Bitmap 对象并绘制它，那么您可以在 PictureBox 中显示该位图并在完成后将其保存到磁盘。

看看这个[问题](https://stackoverflow.com/questions/1147156/graphics-object-to-image-file)

```
 Bitmap bt;

    private void Form_Load(object sender, EventArgs e)
    {
        bt = new Bitmap(100,100);
        pictureBox1.Image = bt;
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Graphics g = Graphics.FromImage(bt);

        int i = 9;
        int k;
        String[] letter1 = new String[9] { "b", "W", "b", "w", "B", "w", "B", "w", "B" };

        Pen b = new Pen(Color.Black, 1.0f);
        Pen B = new Pen(Color.Black, 2.0f);
        Pen w = new Pen(Color.White, 1.0f);
        Pen W = new Pen(Color.White, 2.0f);

        for (int j = 0; j <= 8; j++)
        {
            String array = letter1[j];
            if (array.Equals("b") || array.Equals("w"))
            {
                i = i + 1;
                k = 50;
                if (array.Equals("b"))
                {
                    g.DrawLine(b, i, 10, i, k);
                }

            }
            else
                if (array.Equals("B") || array.Equals("W"))
                {
                    i = i + 2;
                    k = 51;
                    if (array.Equals("B"))
                        g.DrawLine(B, i, 10, i, k);
                }

        }
        pictureBox1.Refresh();
        pictureBox1.Image.Save("c:\\test.bmp");

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:11:54.020

在picturebox.image中有一个save方法

信息：http: [//msdn.microsoft.com/en-us/library/system.drawing.image.save.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.image.save.aspx)

[http://msdn.microsoft.com/en-us/library/system.windows.forms.picturebox.image.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.picturebox.image.aspx)

# actionscript-3 - 以 int 为键的关联数组

> ID：11324955
> 
> 赞同：1
> 
> 时间：2012-07-04T08:09:39.703
> 
> 标签：actionscript-3, apache-flex, flex3

在我的应用程序中，我想要一个字典，其中键是整数。

因为它是一个整数，所以我使用 normal `Array`：

```
var arr : Array = [];
arr[5] =  anObject;
arr[82] =  anOtherObject; 
```

当我用 迭代时`for each`，没问题，它会遍历这两个对象。问题是`arr.length`返回 83 ......所以我必须创建一个变量来计算我修改数组时的数字。

问题1：是否有最佳实践（IE：以int为键的关联数组）？我犹豫要不要使用字典。

问题 2：闪存是否为阵列中未使用的存储桶分配内存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T08:39:29.370

Flash 中的数组是稀疏的（与 Vector 不同），因此不会分配空条目。如果您需要知道长度，您可能需要手动跟踪它（也许制作一个包装类）。

*Adobe 说：*

> 数组是稀疏数组，这意味着在索引 0 处可能有一个元素，在索引 5 处可能有另一个元素，但在这两个元素之间的索引位置中没有任何内容。在这种情况下，位置 1 到 4 中的元素是未定义的，这表示不存在元素，不一定存在值为 undefined 的元素。

# c# - 转换表达式 > 到功能 其中 TObject 是已知的

> ID：11324956
> 
> 赞同：0
> 
> 时间：2012-07-04T08:09:43.283
> 
> 标签：c#, generics, lambda

我正在尝试转换：

```
Expression<Func<TProperty>> 
```

到一个

```
Func<TObject, TProperty> 
```

其中 TObject 是已知的，并公开了由 Expression 表示的属性。为此，我想必须操作表达式，将它与 TObject 类型参数结合到一个新的表达式中，然后编译。

编辑：示例输入和输出

```
class SomeType
{
   public int Number { get; set; }

   public Func<TObject, TProperty> FuncConverter<TObject, TProperty>(Expression<Func<TProperty>>)
   {
       // ???      
   }

   public void test()
   {
       Func<SomeType, int> outputFunc = FuncConverter<SomeType, int>(inputExpression);
   }
} 
```

我期望作为输入的表达式：

```
Expression<Func<int>> inputExpression = () => Number; 
```

此表达式指向 SomeType 上的 Number 属性

我期望作为输出的 Func 委托：

```
Func<SomeType, int> outputFunc = type => type.Number; 
```

结束编辑

问题是，我不知道该怎么做。我真的很感激一些（参考）关于操作 Lambda 表达式的可访问信息，因为我还没有遇到任何信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T11:39:05.170

我找到了我的问题的答案：

```
Func<TObject, TProp> Converter<TObject, TProp>(Expression<Func<TProp>> propertyExpression )
    {
        MemberExpression member = propertyExpression.Body as MemberExpression;

        // Get the Property information of the propertyExpression memberExpression
        var property = member.Member as PropertyInfo;

        // Get the Declaring type information from member expression (equivalent to TObject)
        var type = member.Member.DeclaringType;

        // Define the source Parameter for the new Func delegate
        var param = Expression.Parameter(type, "source");
        var source = Expression.Convert(param, type);

        // Get the property on the source
        var get = Expression.MakeMemberAccess(source, property);
        var convert = Expression.Convert(get, typeof(TProp));

        // Construct the Expression
        var lambda = Expression.Lambda<Func<TObject, TProp>>(convert, param);

        // Compile to get the Func delegate type
        return lambda.Compile();
    } 
```

我在这里找到了信息：[链接](http://www.thejoyofcode.com/Lambda_and_Expression_Trees.aspx)

稍微调整一下以解决我的问题。感谢所有评论者...

# javascript - 在javascript中调用最内部函数的最佳方法

> ID：11324958
> 
> 赞同：0
> 
> 时间：2012-07-04T08:09:52.123
> 
> 标签：javascript

```
var f = function() {
   this.m = '10' ; 
   f1 = function(){
        alert(m)
    }
}

o = new f()
o.m

f1() 
```

这是从上面的示例调用嵌套函数 f1 的正确方法吗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T08:12:59.963

我假设您想`f1`成为 的方法`f`，在这种情况下，您需要将其添加为属性（就像您为 所做的那样`m`）：

```
var f = function() {
   this.m = '10'; 
   this.f1 = function(){
       alert(this.m); //Notice that this has changed to `this.m`
   };
}; //Function expressions should be terminated with a semicolon 
```

然后，您可以在以下实例上调用该方法`f`：

```
o = new f();
o.f1(); //Alerts '10' 
```

这是一个[工作示例](http://jsfiddle.net/jamesallardice/9GLs5/)。

您当前拥有它的方式将导致`f1`泄漏到全局范围内（因为它是在没有声明的情况下`var`声明的）。

* * *

旁注：通常最好将您的方法属性设为`prototype`. 这会导致函数在内存中的单个副本，而不是每个实例的副本：

```
var f = function() {
   this.m = '10';
};

f.prototype.f1 = function() {
    alert(this.m);  
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T08:13:36.683

使用您的代码，该函数是一个内部函数，不能从外部调用。如果在构造函数中调用它，则必须将 f1 分配给对象：

```
this.f1 = function() {
  alert(m);
} 
```

然后你可以调用：

```
o = new f()
o.f1() //=> alerts 10 
```

# jsf - JSF JSF1064：无法找到或提供资源，

> ID：11324961
> 
> 赞同：2
> 
> 时间：2012-07-04T08:10:01.327
> 
> 标签：jsf, primefaces, http-status-code-404

在我的 jsf 2 (primefaces 3) 应用程序中，我为任何与页面不匹配的请求设计并使用了一个找不到页面 (404)。除了“jquery.js.jsf”之类的 jsf 资源之外，我对所有请求都适用。当在没有任何查询字符串的情况下请求此资源时，应用程序无法找到它，而只是返回 404 作为响应状态代码，并且永远不会将用户转发到我已经设计和使用的未找到的页面。

有谁知道我该如何解决这个问题，以便对于 JSF 资源，我的应用程序可以像其他资源一样工作。

最好的

# android - 不断出现错误：未解析的 apt 错误并且 r.java 文件未重新生成

> ID：11324962
> 
> 赞同：0
> 
> 时间：2012-07-04T08:10:10.737
> 
> 标签：android

`**

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="[http://schemas.android.com/apk/res/android]"  
        android:orientation="vertical"  
        android:layout_width="fill_parent"  
        android:layout_height="fill_parent"  
        android:weightSum="1">  

<TextView      
        android:layout_width="fill_parent"   
        android:layout_height="wrap_content"   
        android:text="Excel app-by Kanika Sharma"    
        android:textSize="20dp"    
    />  
    <DigitalClock  
           android:layout_width="250dp"  
          android:layout_height="wrap_content"  
          android:layout_gravity="clip_vertical">  
     </DigitalClock>  

    <ImageView android:layout_width="260dp"   
        android:layout_gravity="center" android:src="@drawable/!bokaro-plant-photo"                                    android:id="@+id/imageView2"   
        android:layout_height="87dp" android:layout_weight="1.03">  
</ImageView>  

    <Button  android:layout_width="250dp"   
     android:layout_height="wrap_content"  
     android:text="choose your department"  
     android:layout_gravity="center"  
     android:textColor="#FFFFFF"  
      android:id="@+id/dept"  />  

    <Button  android:layout_width="250dp"   
     android:layout_height="wrap_content"  
         android:text="meeting"  
     android:layout_gravity="center"  
     android:textColor="#6CA6CD"  
     android:id="@+id/meet"  
    />    
    <Button  android:layout_width="250dp"   
     android:layout_height="wrap_content"  
     android:text="leave"  
     android:layout_gravity="center"     
      android:id="@+id/leav"  
     android:textColor="#4A708B"  
    />  
    <Button  android:layout_width="250dp"   
     android:layout_height="wrap_content"  
     android:text="profit"  
     android:layout_gravity="center"  
      android:id="@+id/pro"  
    />  
     <Button  android:layout_width="250dp"   
     android:layout_height="wrap_content"  
     android:text="Shift report"  
     android:layout_gravity="center"  
      android:id="@+id/shftrep"  
    />   
    <Button  android:layout_width="250dp"   
     android:layout_height="wrap_content"  
     android:text= "Delay"  
     android:layout_gravity= "center"  
     android:id="@+id/delay"  
    />   
    </LinearLayout>**` 
```

我已经编码的所有数据......我在某处阅读了未解析的apt错误的解决方案以删除并重新生成r.java文件。删除它但错误仍然存​​在并且r文件没有生成..plz帮助..the以下没有帮助 1.clean 项目 2.del r.java 文件。3.删除错误并清理后重建

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:16:43.303

将您的可绘制名称更改`!bokaro-plant-photo`为`bokaro_plant_photo`. 我认为是错误导致了构建停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:17:03.150

利用

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"  
        android:layout_width="fill_parent"  
        android:layout_height="fill_parent"  
        android:weightSum="1"> 
```

代替

```
<LinearLayout xmlns:android="[http://schemas.android.com/apk/res/android]"  
        android:orientation="vertical"  
        android:layout_width="fill_parent"  
        android:layout_height="fill_parent"  
        android:weightSum="1"> 
```

和 res/drawable 名称`!bokaro-plant-photo`然后将其更改为 `bokaro_plant_photo`

# xcode - 点击时填充 UITableView

> ID：11324965
> 
> 赞同：0
> 
> 时间：2012-07-04T08:10:15.647
> 
> 标签：xcode, uitableview

我有一个从网络服务器解析 xml 数据的 UITableView。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath { 

// parse data from xml

} 
```

当视图加载时，它会自动填充表格单元，但我不希望它是那样的。我只想在用户点击按钮时填充表格单元格。

我做了类似的事情，隐藏表格视图然后在用户点击时显示它，但我也不希望它像那样，我希望它只在用户点击按钮时解析和填充单元格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:23:43.973

不要在 .xib 文件中设置 tableView 委托方法。只需将它们设置在您的视图控制器中。然后当点击按钮时，只需使用 tableView 的 reloadData 方法。希望这会有所帮助。

# html - 用html写公式

> ID：11324966
> 
> 赞同：1
> 
> 时间：2012-07-04T08:10:18.763
> 
> 标签：html, formula

如何在html页面中编写公式？例如，我需要写 x 幂 2 减去 y 的平方根。我只知道一种方法，LaTex。但我需要更简单的方法。我正在编写测验测试系统。学生应写出包含公式的答案。我怎么能这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T08:24:02.110

查看在[math.stackexchange.com](http://math.stackexchange.com)上使用的[MathJax](http://www.mathjax.org/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T08:20:36.173

我知道的唯一两个答案是使用图像： [http ://www.cs.tut.fi/~jkorpela/math/](http://www.cs.tut.fi/~jkorpela/math/)

...或为此使用 HTML 数学符号（尽管使用起来并不简单） [http://www.unics.uni-hannover.de/nhtcapri/mathematics.html](http://www.unics.uni-hannover.de/nhtcapri/mathematics.html)

你也有这个选择，但它似乎相当实验...... [http://www.w3.org/MarkUp/HTMLPlus/htmlplus_45.html](http://www.w3.org/MarkUp/HTMLPlus/htmlplus_45.html) http://meta.wikimedia.org/wiki/Help:Displaying_a_formula

不过，我希望它有帮助......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T06:50:44.703

[这是一个](http://ans.hsh.no/home/mgg/gladtex/)用 HTML 编写数学（使用 LaTeX 语法）的实用程序，但您还需要在计算机上安装 LaTeX 以生成公式的图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T08:21:38.647

如果您不需要呈现答案，只需使其正确，那么最好的方法可能是让他们使用类似`sqrt()`, `^`for power 等的东西。我发现这是最简单的写作方式，如果输入是为一台机器。

您可以只提供一小部分带有示例的允许功能。这里的好处是您可能可以四处寻找一个库并使用它来评估答案。

所以你的例子会写成：`sqrt(x^2)-y`

当然，如果您需要编写复杂的方程式，这可能会变得非常混乱，但是对于您提出的级别，它应该可以正常工作。

# domain-driven-design - 有界上下文和聚合根

> ID：11324973
> 
> 赞同：6
> 
> 时间：2012-07-04T08:10:33.583
> 
> 标签：domain-driven-design

我们正在尝试使用 DDD 原则对基于 RBAC 的用户维护系统进行建模。我们已经确定了以下实体：

```
Authorization is an Aggregate Root with the following:
    User   (an entity object)
    List<Authority>    (list of value objects)

Authority contains the following value objects:
    AuthorityType (base class of classes Role and Permission)
    effectiveDate

Role contains a List<Permission>
Permission has code and description attributes 
```

在典型情况下，授权绝对是聚合根，因为用户维护中的所有内容都围绕着它（例如，我可以授予用户一个或多个权限，即角色或权限）

我的问题是：角色和权限呢？它们是否也在各自不同的上下文中聚合根？（即我有三个上下文，授权、角色、权限）。虽然可以在一个上下文中组合所有内容，但角色不会太重，因为它将作为授权“对象图”的一部分加载吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-05T12:24:34.963

首先，我不禁觉得您误解了有界上下文的概念。您描述为 BC 的我将描述为实体。在我看来，有界上下文可以为使用通用语言定义的实体赋予给定上下文的不同目的。

例如，在医院域中，在门诊部接受治疗的**Patient可能有一个****Referrals**列表和诸如*BookAppointment()*之类的方法。但是，被视为住院患者的**患者将具有****Ward**属性和方法，例如*TransferToTheatre()*。鉴于此，患者存在两种有限的环境：门诊患者和住院患者。在保险领域，销售团队制定了一份**保单**这具有一定程度的风险，因此具有成本。但如果它到达索赔部门，这些信息对他们来说毫无意义。他们只需要验证保单是否对索赔有效。所以这里有两个上下文：销售和索赔

其次，在您尝试实施 DDD 时，您是否只是使用 RBAC 作为示例？我问的原因是因为 DDD 旨在帮助解决复杂的业务问题 - 即需要计算的地方（例如政策风险）。在我看来，RBAC 是一个相当简单的基础设施服务，它不关心实际的域逻辑，因此不保证严格的 DDD 实施。DDD 的投资成本很高，你不应该仅仅为了它而采用它；这就是有界上下文很重要的原因——只有在合理的情况下才使用 DDD 对上下文进行建模。

无论如何，冒着这个答案听起来像“学术”的风险，我现在将尝试回答您的问题，假设您仍想将其建模为 DDD：

对我来说，这一切都适合一种情况（称为“安全”或其他东西）

作为*一般*经验法则，将所有内容都设为需要独立事务的聚合，因此：

1.  假设系统允许将**Authorities**添加到**Authorization**对象，则将**Authorization**设为聚合。（尽管可能存在放弃**Authorization**并简单地使**User成为具有****Authorities**列表的聚合根的论点）
2.  **权限在****Authorization**聚合之外没有任何意义，并且仅在添加一个时创建，因此它们仍然作为实体。
3.  假设系统允许将**Permissions**添加到**Role**，**Role**成为聚合根。
4.  假设**权限**不能被创建/删除 - 即它们是由系统本身定义的，所以这些是简单的值对象。

虽然关于聚合设计的主题，但我不能推荐这些[文章](http://dddcommunity.org/library/vernon_2011)。

# google-app-engine - Eclipse：缺少 org.eclipse.mylyn.commons.ui 0.0.0

> ID：11324975
> 
> 赞同：2
> 
> 时间：2012-07-04T08:10:39.497
> 
> 标签：google-app-engine, eclipse-juno

我尝试下载 Eclipse Juno（我已经下载了 Java 版本并安装了 Web 开发和企业开发工具包）。之后，我为 Eclipse 安装 Google 插件。当 Eclipse 检查依赖关系时，它会注意到错误：

> 缺少要求：适用于 Eclipse 4.2 3.0.1.v201206290132-rel-r42 的 Google 插件（com.google.gdt.eclipse.suite.e42.feature.feature.group 3.0.1.v201206290132-rel-r42）需要 'org.eclipse .mylyn.commons.ui 0.0.0' 但找不到

我google了很多次，但仍然无法解决这个问题。谁有这个问题的经验，请告诉我。这让我非常恼火:(

谢谢 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T20:09:22.513

我有一个不同的问题导致了这个错误：

我全新安装的 Eclipse Juno 列表中根本没有 Juno 存储库。

要解决此问题，只需将此存储库的 URL ( [http://download.eclipse.org/releases/juno/](http://download.eclipse.org/releases/juno/) ) 添加到“使用：”编辑框一次，然后再安装 Google 插件（当然，还要确保如 d60402 所述，选中“安装期间联系所有更新站点以查找所需软件”复选框。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-07T16:15:42.590

确保在 Eclipse 的“安装新软件”对话框中选中“在安装期间联系所有更新站点以查找所需软件”复选框。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-03T07:53:48.293

我的情况也有所不同，因为我正在使用 Rational Application Developer (RAD) for WebSphere 并且我试图安装 Kotlin，但解决方案与 Markus A 描述的解决方案相同。

# checkbox - jsTree - 仅从复选框帖子中获取顶层

> ID：11324977
> 
> 赞同：0
> 
> 时间：2012-07-04T08:10:42.603
> 
> 标签：checkbox, jstree

我在具有此配置的常规表单中使用带有复选框选项的 jsTree：

```
"checkbox" : {
    real_checkboxes : true,
    two_state: false
      } 
```

我只有两个级别的数据（L1 和 L2）。如果只检查了一些 L2 项目，我只得到那些项目（没有上面的 L1 项目），这很好。问题是如果检查了所有 L2 项目，我会得到顶级项目 (L1) 和所有 L2 项目。我只想获得顶级检查项目，这样如果所有 L2 项目都被检查，我只会得到它们上方的 L1 项目。

我看到有一个`.get_checked ( context, get_all )`选项，但我不确定如何将值从这里发布到表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:29:05.433

最简单的方法是遍历 jQuery 结果`.get_checked`并将每个元素的 id 连接到逗号分隔的字符串。然后，您可以将结果字符串设置为隐藏输入字段的值。不过，您必须在服务器上再次拆分此字符串。

您还可以考虑为选中元素的所有（隐藏）输入元素创建一个 jQuery 选择器，并将它们设置为未选中。就像是

```
$("li.jstree-checked > ul input").attr('checked', false); 
```

可能会工作，虽然我还没有尝试过。

# svn - PuTTY 致命错误 - 已断开连接：收到不存在通道 258 的 SSH2_MSG_CHANNEL_FAILURE

> ID：11324979
> 
> 赞同：1
> 
> 时间：2012-07-04T08:11:07.270
> 
> 标签：svn, putty

我需要连接到我们的服务器，使用 PuTTY 下载项目。当我尝试使用 TortoiseSVN 进行“结帐”时，加载了几个文件并且我收到错误消息：

1）。来自 svn - 错误：'/blabla/blabla/blabla/!svn/vcc/default' 的报告：无法读取响应。正文：安全连接被截断 (https://localhost)。2）。来自 putty - PuTTY 致命错误：已断开连接：收到 SSH2_MSG_CHANNEL_FAILURE 不存在通道 258。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-27T17:34:01.690

似乎是服务器端的错误。如果你在windows上使用freesshd，你可以尝试切换到Openssh服务器

# python - 如何获得 matplotlib 物理（非数据）比例

> ID：11324983
> 
> 赞同：0
> 
> 时间：2012-07-04T08:11:19.337
> 
> 标签：python, matplotlib

我有这个简单的代码：

```
import numpy as np
import matplotlib.pyplot as plt
from matplotlib.backends.backend_pdf import PdfPages
from matplotlib.patches import Ellipse
PlotFileName="test.pdf"
pdf = PdfPages(PlotFileName)
fig=plt.figure(1)
ax1=fig.add_subplot(111)
plt.xlim([0,10])
plt.ylim([0,10])
ax1.plot([0,10],[0,10])
e=0.0
theta=0
maj_ax=2
min_ax=maj_ax*np.sqrt(1-e**2)
const=1
ax1.add_artist(Ellipse((5, 5), maj_ax, const*min_ax, angle=theta, facecolor="green", edgecolor="black",zorder=2, alpha=0.5))
plt.grid()
pdf.savefig(fig)
pdf.close()
plt.close() 
```

这是它的外观： ![在此处输入图像描述](../Images/524686bec43db758cb14427dcc0d59fe.png)

正如您从代码中看到的那样，它应该是一个圆圈，但事实并非如此！我已将问题缩小到第`const`16 行中的术语。我不想使用`ax1.axis("equal")`，因为我的数据在垂直和水平上没有相同的比例。谁能告诉我如何让 matplotlib 告诉我它使用什么纵横比，这样我就可以`const`正确设置这个术语，所以最后我有一个圆圈？

换句话说，我想知道水平轴与垂直轴“物理”长度的比率（例如，打印出来的内容）。

我真的很感激任何建议，在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:29:31.237

一种选择是明确定义图形大小......如果您使用非默认设置，您可能还需要指定子图参数。根据需要为不相等的水平和垂直比例调整 figsize 和 subplot 参数。例如：

```
import numpy as np
import matplotlib.pyplot as plt
from matplotlib.patches import Ellipse

fig = plt.figure(figsize=(6,4))
fig.subplots_adjust(left=0.1, right=0.9, bottom=0.1, top=0.9)
ax1 = fig.add_subplot(111, xlim=(-2.5,12.5), ylim=(0,10))
ax1.plot((0,10), (0,10))
maj_ax, e, theta = 2, 0, 0
min_ax = maj_ax * np.sqrt(1 - e**2)
ax1.add_artist(Ellipse((5, 5), maj_ax, min_ax, angle=theta, 
                       fc="green", ec="black", zorder=2, alpha=0.5))
plt.grid()
plt.show() 
```

# sql - 如何四舍五入浮点值

> ID：11324985
> 
> 赞同：0
> 
> 时间：2012-07-04T08:11:30.647
> 
> 标签：sql, sql-server, sql-server-2000

表格1

```
Id value

001 2.3
002 1.3
003 3
004 5.3
...
... 
```

值列数据类型是浮点数

笔记：

值列将`.3`永远存在，它不会像`.1, .2, .4, .5 to .9`

现在我想为所有值显示 .5 而不是 .3 ...

预期产出

标识值

```
001 2.5 
002 1.5
003 3
004 5.5
...
... 
```

如何对此进行查询。

需要 SQL 查询帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T08:26:02.970

使用[Round](http://msdn.microsoft.com/en-us/library/ms175003.aspx)函数得到你的结果

```
 Declare @Sample Table
 (ID int ,
 value float)

 Insert into @Sample
 values
(001,2.3),(002,1.4),(003,3),(004,5.3)

 Select ID,round(value/5,1)*5 from @Sample 
```

如果该值大于 .3 则将舍入为 0.5，如果小于 .3 则将检索整数值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T08:25:21.143

可以使用 floor 函数判断是否有小数部分

请尝试以下查询

```
update table1 set value = value + 0.2 
where value > floor(value); 
```

# .net - 将 ICollection 转换为 psobject 以传递给 ft 或 export-csv

> ID：11324987
> 
> 赞同：0
> 
> 时间：2012-07-04T08:11:37.317
> 
> 标签：.net, powershell

我使用 powershell 通过调用来执行一些 ADSI/LDAP 查询，`DirectoryServices.DirectorySearcher`因为我需要提供一组可供选择的凭据。一旦我执行了一个`FindAll()`方法，我就会得到一个`DirectoryServices.SearchResultCollection`which implements `ICollection`。从那里开始，如果我想将该输出通过管道传输到 ft 或 export-csv，我必须创建一个新的 psobject，将我感兴趣的属性复制到一个新的 PSObject，如下所示：

```
$dEntry = New-Object DirectoryServices.DirectoryEntry("LDAP://acme.com/cn=sites,cn=configuration,dc=acme,dc=com","user","pass");
$searcher=New-Object DirectoryServices.DirectorySearcher($dEntry);
$searcher.Filter="(objectClass=siteLink)";
$searcher.PropertiesToLoad.Add("siteList");
$searcher.PropertiesToLoad.Add("cost");
$searcher.PropertiesToLoad.Add("replInterval");
$searcher.PropertiesToLoad.Add("cn");
$searcher.FindAll() |%{
$count=$_.Properties.sitelist.Count;
$p=@{"cn"=[string]$_.Properties.cn; "sites"=$count;
    "cost"=[string]$_.Properties.cost;
    "replInterval"=[string]$_.Properties.replInterval;
    };
    if ($count>=2) { 
        $p["mesh"]=$count;
    }else{
        $p["mesh"]=$count*$count;
    }
    New-Object psobject -Property $p
} 
```

这看起来很乏味，因为它可能是一项常见的任务，当然，必须有一种更简单的方法来做到这一点。是的，我知道 AD 助手库，但它们对我没有帮助，因为我需要使用备用凭据，而且其中大多数都以这种方式破坏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T09:29:07.920

试试这个，它将在搜索对象上找到的任何属性复制到一个新的 psobject：

```
$searcher.FindAll() | ForEach-Object {

    $pso = New-Object PSObject

    $_.PSBase.Properties.GetEnumerator() | Foreach-Object{
        Add-Member -InputObject $pso -MemberType NoteProperty -Name $_.Name -Value ($_.Value | foreach {$_})
    } 

    $pso
} 
```

# sql - 合并命令导致“缺少关键字”错误

> ID：11324990
> 
> 赞同：1
> 
> 时间：2012-07-04T08:11:46.483
> 
> 标签：sql, oracle, plsqldeveloper

我对这个查询有疑问：

```
 MERGE INTO qot
  USING dual
  ON (qot_id = 1023125885)
  WHEN MATCHED AND qot_exc_id = 4 THEN UPDATE SET qot_exc_id = 259
  WHEN MATCHED AND qot_exc_id = 6 THEN UPDATE SET qot_exc_id = 131; 
```

我收到一个错误：“缺少关键字”。有人可以给我任何线索吗？

谢谢！

问候，

河。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T09:06:16.557

我不知道为什么您只想更新而不是插入时尝试使用 MERGE。您不能像现在这样在 WHEN 子句中添加条件 - 请参阅[文档](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_9016.htm#i2081218)。

为什么不这样做：

```
update qot
set qot_exc_id = case qot_exc_id
                    when 4 then 259
                    when 6 then 131
                    end
where qot_id = 1023125885
and qot_exc_id in (4,6); 
```

如果你真的需要一个 MERGE 那么你想要这样的东西：

```
MERGE INTO qot
USING dual
ON (qot_id = 1023125885)
WHEN MATCHED THEN 
  UPDATE SET qot_exc_id = case qot_exc_id
                            when 4 then 259
                            when 6 then 131
                            else qot_exc_id
                            end; 
```

也许：

```
MERGE INTO qot
USING dual
ON (qot_id = 1023125885 and qot_exc_id in (4,6))
WHEN MATCHED THEN 
  UPDATE SET qot_exc_id = case qot_exc_id
                            when 4 then 259
                            when 6 then 131
                            end; 
```

# php - 从网络服务器自动发布文件

> ID：11324992
> 
> 赞同：0
> 
> 时间：2012-07-04T08:11:50.417
> 
> 标签：php, file, post

我正在尝试制作一个脚本，通过 POST 方法将文件从我的服务器发送到另一台服务器。HTML 可能如下所示：

```
<form action="https://anotherserver/receive.php" method="POST" enctype="multipart/form-data">
    <input type="file" name="file" />
    <input type="submit" />
</form> 
```

通过这部分，我可以将文件从我的计算机发送到另一台服务器。但是如果条件为真，脚本应该从我的网络服务器发送文件。例如，我在我的网站上创建了一个文件，我点击“确定”，该文件会自动发送到外部网络服务器。有可能这样的方法吗？任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T08:58:23.863

此代码会将文件发布到另一台服务器：

```
<?php
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_VERBOSE, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible;)");
    curl_setopt($ch, CURLOPT_URL, 'https://anotherserver/receive.php');
    curl_setopt($ch, CURLOPT_POST, true);
    $post = array(
        "file"=>"/path/to/myfile.jpg",
    );
    curl_setopt($ch, CURLOPT_POSTFIELDS, $post); 
    $response = curl_exec($ch);
?> 
```

改编自：[http ://dtbaker.com.au/random-bits/uploading-a-file-using-curl-in-php.html](http://dtbaker.com.au/random-bits/uploading-a-file-using-curl-in-php.html)

# java - 将列表转换为基于布尔属性的集合的最简单方法？

> ID：11324994
> 
> 赞同：2
> 
> 时间：2012-07-04T08:12:08.307
> 
> 标签：java, list, loops, map

我有一个对象列表，每个对象都有一个布尔“选定”属性。如果“selected”属性为真，我希望将它们放在一组中。除了通过将每个对象添加到集合中的 for 循环之外，还有其他方法可以实现这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T08:20:43.850

对于这么简单的事情，只需编写一个循环并完成它。

如果这是您将一遍又一遍地实现的模式：

（未经测试，因此可能有一两个错字）

```
public interface Selector<T> {
    public boolean select(T t); }

public <T> Set<T> grep(Collection<T> coll, Selector<T> sel) {
    Set<T> result = new Set<T>;
    for (T item : coll)
        if (sel.select(T)) 
            result.add(T);
    return result;
} 
```

和调用

```
List<SomeClasss> input = ...;
Set<SomeClass>   output = grep(
    input, 
    new Selector<SomeClass> { 
        public boolean select(SomeClass item) {
            return some-boolean-function-of-item; // decide which items to keep here
        }
    }
); 
```

`Selector`知道如何检查对象并决定是否应该保留它们的实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T08:23:54.883

您可以为它使用任何功能性的 java 库。例如，根据我使用 Lambdaj ( [http://code.google.com/p/lambdaj/](http://code.google.com/p/lambdaj/) ) 的经验：

```
Set<Entity> entitiesSet = new HashSet<Entity>(filter(having(on(Entity.class).getSelected(), equalTo(true)), entities)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T08:24:14.783

嗯，我想您正在寻找的是一种功能方法。我建议看一下[lamdaj](http://code.google.com/p/lambdaj/)（如果您想坚持使用 Java 并且只需要 API）或[Scala](http://www.scala-lang.org/)（如果您想要更丰富的功能集）。

**一个例子**

命令式版本：

```
List<Sale> salesOfAFerrari = new ArrayList<Sale>();
for (Sale sale : sales) {
    if (sale.getCar().getBrand().equals("Ferrari")) 
        salesOfAFerrari.add(sale);
} 
```

您可以使用 lambdaj 在一行中完成：

```
List<Sale> salesOfAFerrari = select(sales,
    having(on(Sale.class).getCar().getBrand(),equalTo("Ferrari"))); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T08:26:58.087

如果您使用[java 8](http://jdk8.java.net/lambda/)，您可以这样做：

```
List<MyObject> myList = Arrays.asList(a,b,c,d);

Set<MyObject> mySet = myList
        .filter(e -> e.getMyBool())
        .into(new Set<MyObject>()); 
```

假设`a`-`d`只是具有布尔属性的对象的实例。但是 java 8 还没有出来，所以我只使用一个 for 循环。

# php - 如何从thickbox jquery 中检索一个值到调用thickbox 的PHP 文件中？

> ID：11324998
> 
> 赞同：0
> 
> 时间：2012-07-04T08:12:14.173
> 
> 标签：php, jquery, dynamic, thickbox

如何从一个thickbox jquery 中检索一个值到调用thickbox 的PHP 文件中？..这个thickbox 给出了提示。因此，我需要根据 jquery 函数内部是否发生某些事情来更新数据库。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:25:58.570

当您的 jQuery 触发您的 PHP 脚本时，您的 PHP 脚本已经完成，但您可以再次调用它，或者使用 ajax 一起调用一个单独的 php 文件：

```
$.ajax({
  type: "GET",
  url: "some.php",
  data: { name: "John", location: "Boston" }
}) 
```

在 some.php 里面：

```
<?php

$this_is_the_name = $_GET['name'];
$this_is_the_loc = $_GET['location'];

//add these to database or whatever

?> 
```

您可能希望采取一些保护措施来阻止 SQL 注入攻击 - 任何人都可以将任何数据推送到他们喜欢的脚本中。

# wicket - Wicket：重新绘制文本字段并保持用户输入

> ID：11324999
> 
> 赞同：0
> 
> 时间：2012-07-04T08:12:19.803
> 
> 标签：wicket, textfield, repaint

我正在制作一个教师提出问题的表格。一种类型的问题是多项选择题。该表单有一个 textArea，您可以在其中编写问题公式，以及一个带有 textFields 的 listView 供您选择。

有一个按钮可以添加一个新的选项（添加一个新的文本字段），按下它会重新绘制所有的选项并添加一个新的选项。现在问题来了：我希望 listView 中已经有文本的文本字段在重绘后保留老师写的文本，但我不知道如何做到这一点（除了在每次重绘之前将值保存到数据库，但这似乎是个坏主意）。

这是我的 MultipleChoiceQuestionPanel 的代码，我希望它就足够了。

```
public class MultiChoiceQuestionPanel extends QuestionPanel {

    private List<Alternative> alternatives;

    @SpringBean
    private AlternativeRepository alternativeRepository;

    public List<Alternative> getAlternatives(){
        return alternatives;
    }

    public MultiChoiceQuestionPanel(String id, MultipleChoiceQuestion q){
        super(id, q);

        final WebMarkupContainer parent = new WebMarkupContainer("alternativesContainer");
        parent.setOutputMarkupId(true);
        add(parent);
        parent.add(new Label("AnswerLabel", "Svar"));

        q.setAlternatives(alternativeRepository.findByMultipleChoiceQuestion(q));
        alternatives = q.getAlternatives();
        Form form = new Form("addForm");
        form.add(new ListView<Alternative>("alternatives", alternatives) {
            @Override
            protected void populateItem(final ListItem<Alternative> alternativeListItem) {
                alternativeListItem.add((TextField<String>) new TextField<String>("alternative", new AlternativeModel(alternativeListItem.getModelObject())).setRequired(true).setType(String.class));
                Form form = new Form("removeForm");
                form.add(new AjaxSubmitLink("remove") {
                    @Override
                    protected void onSubmit(AjaxRequestTarget target, Form<?> form) {
                        Alternative selected = alternativeListItem.getModelObject();
                        alternativeRepository.delete(selected);
                        getAlternatives().remove(selected);
                        target.addComponent(parent);
                    }
                });
                alternativeListItem.add(form);
                add(alternativeListItem);
            }
        });

        AjaxSubmitLink a = new AjaxSubmitLink("add") {
            @Override
            protected void onSubmit(AjaxRequestTarget target, Form<?> form) {
                Alternative alternative = new Alternative();
                MultipleChoiceQuestion mcq = (MultipleChoiceQuestion) getQuestion();
                alternative.setSequenceNumber(mcq.getAlternatives().size());
                alternative.setMultipleChoiceQuestion((MultipleChoiceQuestion) getQuestion());
                alternativeRepository.save(alternative);
                getAlternatives().add(alternative);
                target.addComponent(parent);
            }
        };
        a.setDefaultFormProcessing(false);
        form.add(a);
        parent.add(form);
    }
} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T08:24:55.107

从[ListView 的Javadoc](http://ci.apache.org/projects/wicket/apidocs/1.4.x/org/apache/wicket/markup/html/list/ListView.html)：

> 警告：虽然您可以在 Forms 中嵌套 ListViews，但您必须将 setReuseItems 属性设置为 true 才能使验证正常工作。默认情况下，setReuseItems 为 false，其效果是 ListView 将所有子组件替换为新实例。这背后的想法是您始终呈现新数据，并且由于人们通常使用 ListViews 来显示只读列表（至少，我们是这么认为的），这是一个很好的默认行为。
> 
> 但是，由于在渲染开始之前替换了组件，因此搜索这些组件的特定消息会失败，因为它们已被其他实例替换。另一个问题是“错误的”用户输入被保存为组件的（临时）实例数据。由于这些组件被新组件替换，当 setReuseItems 为 false 时，您的用户将永远不会看到错误的数据。

这基本上就是这里发生的事情。您必须将 ListView 的 ReuseItems 设置为 true。