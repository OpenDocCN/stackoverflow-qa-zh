# StackOverflow 问答 10650000-10650999

# android - 安卓无线游戏

> ID：10650003
> 
> 赞同：1
> 
> 时间：2012-05-18T09:26:02.540
> 
> 标签：android, wireless

你好，我是最后一年的学生，我将在 android 中创建我的最后一年项目。我对 android 有基本的想法，但不知道如何创建无线通信游戏。我的项目主题是：android 中的无线（airplay）游戏。

我想创建一些简单的 2 人游戏（如井字游戏、国际象棋和简单的汽车或自行车比赛）

最后是我想要的，我想要我的游戏安装在 2 个不同的 android 设备中。他们可以在其他设备上播放 1 个播放器，在其他设备上播放第 2 个播放器。

即使我对这两件大事（开发游戏和无线连接）都没有基本知识

任何人都可以帮助我吗？我想要这件事的资源。提前谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:50:46.907

项目工作的游戏方面应该非常直接（因为您不需要出色或快速的图形，并且您的游戏是回合制的）。标准的 android 开发者网站对 android 编程有很好的介绍。

从通信方面，您需要选择要使用的技术类型：

1.  Internet/TCPIP/本地无线网络作为一种机制：在这里，您应该查看套接字并考虑如何确定想要一起玩的两方是谁
2.  一些需要物理接近的 PAN 技术，例如 IR/蓝牙：调查支持上述 Joe 建议的 android 堆栈

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:44:07.843

If you want to do it using the bluetooth protocol theirs a great [bluetooth chat sample](http://developer.android.com/resources/samples/BluetoothChat/index.html) in the android sdk,
But bluetooth means that the 2 machines should be in a 30 meter distance from each other.

usually multi-player games just uses a server in the middle that temporarily saves the information and push it to the corresponding machine.

so pick an architecture and do some research and we could help you if you'll give further details,
And there's lots of tutorials about communication between android and any server side language.

I hope it helps.

# python - 在 Python 中将 unicode 字符串压缩在一起

> ID：10650004
> 
> 赞同：1
> 
> 时间：2012-05-18T09:26:05.643
> 
> 标签：python, string, unicode, permutation

我有字符串：

```
a = "ÀÁÂÃÈÉÊËÌÍÎÏÒÓÔÕÖÙÚÛÜ" b = "àáâãäèéçêëìíîïòóôõöùúûüÿ" 
```

我想创建字符串

```
"ÀàÁáÂâ..." 
```

即把绳子分成两半，然后把两半拉在一起。

我尝试了天真`zip(a, b)`，但这没有用。我认为这是由于 unicode 的问题。

有谁知道我怎样才能得到我想要的结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T09:56:29.337

在 Python 2.x 中，字符串默认不是 unicode。在处理 unicode 数据时，您必须执行以下操作：

*   **带有字符的前缀字符串文字`u`**：`a = u'ÀÁÂÃÈÉÊËÌÍÎÏÒÓÔÕÖÙÚÛÜ'`，或

*   如果您想避免使用`u`前缀并且您正在使用的模块足够兼容，请**使用`from __future__ import unicode_literals`import**将字符串文字默认解释为 unicode

*   如果您直接在 Python 代码中编写 unicode 字符串文字，**请将 .py 文件保存为`utf-8`格式**，以便正确解释文字。Python 2.3+ 将解释[utf-8 BOM](http://en.wikipedia.org/wiki/Byte_order_mark)；一个好的做法是在文件的开头[添加一个特定的注释行](http://docs.python.org/tutorial/interpreter.html#source-code-encoding)`# -*- coding: utf-8 -*-`来指示编码，或者

*   您也可以继续将 .py 文件保存在 中`ascii`，但您需要**转义文字中的 unicode 字符**，这可能不太可读：`'ÀÁÂÃ'`应该变成`'\xc0\xc1\xc2\xc3'`

一旦满足了这些条件，剩下的就是对这些 un​​icode 字符串应用算法，就像使用 str 版本一样。`__future__`对于您的导入问题，这是一种可能的解决方案：

```
from __future__ import unicode_literals

from itertools import chain
a = "ÀÁÂÃÈÉÊËÌÍÎÏÒÓÔÕÖÙÚÛÜ"
b = "àáâãäèéçêëìíîïòóôõöùúûüÿ"

print ''.join(chain(*zip(a,b)))

>>> ÀàÁáÂâÃãÈäÉèÊéËçÌêÍëÎìÏíÒîÓïÔòÕóÖôÙõÚöÛùÜú 
```

更多参考资料：

*   [PEP 263](http://www.python.org/dev/peps/pep-0263/)定义了非 ascii 编码的注释
*   [PEP 3120](http://www.python.org/dev/peps/pep-3120/)将 utf-8 定义为 Python 3 中的默认编码

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T09:35:36.080

压缩后必须将它们连接起来，并且还需要将它们定义为 unicode 字符串：

```
>>>import itertools
>>>a = u"ÀÁÂÃÈÉÊËÌÍÎÏÒÓÔÕÖÙÚÛÜ"
>>>b = u"àáâãäèéçêëìíîïòóôõöùúûüÿ"
>>>zipped = itertools.izip_longest(a,b, fillvalue="")
>>>print "".join(["".join(x) for x in zipped])

ÀàÁáÂâÃãÈäÉèÊéËçÌêÍëÎìÏíÒîÓïÔòÕóÖôÙõÚöÛùÜúûüÿ

>>>zipped = itertools.izip_longest(a,b, fillvalue="")
>>>print "".join(map("".join, zipped))

ÀàÁáÂâÃãÈäÉèÊéËçÌêÍëÎìÏíÒîÓïÔòÕóÖôÙõÚöÛùÜúûüÿ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T09:34:16.657

也许不漂亮，但工作的一个。

```
>>> a_longer = len(a) > len(b)
>>> new_string = ""
>>> for i in range((min(len(a), len(b)))):
...     new_string += a[i] + b[i]
... 
>>> if a_longer:
...     new_string += a[i:]
... else:
...     new_string += b[i:]
... 
>>> print new_string
ÀàÁáÂâÃãÈäÉèÊéËçÌêÍëÎìÏíÒîÓïÔòÕóÖôÙõÚöÛùÜúúûüÿ 
```

或者，使用 zip：

```
>>> a = u'ÀÁÂÃÈÉÊËÌÍÎÏÒÓÔÕÖÙÚÛÜ'
>>> b = u'àáâãäèéçêëìíîïòóôõöùúûüÿ'
>>> c = zip(a, b)
>>> new_string = "".join([a + b for a, b in c])
>>> print new_string
ÀàÁáÂâÃãÈäÉèÊéËçÌêÍëÎìÏíÒîÓïÔòÕóÖôÙõÚöÛùÜú 
```

但请注意，zip 方法不会为您提供 'b' 字符串的其余部分，因为它在 'a' 字符串中没有一对。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T09:37:00.983

这对我有用（Python 2.x）：

```
>>> a = unicode('ÀÁÂÃÈÉÊËÌÍÎÏÒÓÔÕÖÙÚÛÜ', 'utf-8')
>>> b = unicode('àáâãäèéçêëìíîïòóôõöùúûüÿ', 'utf-8')
>>> print ''.join([ ''.join(c) for c in zip(a, b)])
ÀàÁáÂâÃãÈäÉèÊéËçÌêÍëÎìÏíÒîÓïÔòÕóÖôÙõÚöÛùÜú 
```

你有什么错误？

# ant - 如何在ant中读取属性文件

> ID：10650005
> 
> 赞同：0
> 
> 时间：2012-05-18T09:26:07.433
> 
> 标签：ant

大家好，这些都是我的 file.properties 文件的内容，我想打印那些具有真实价值的平台及其安装程序位置，可以确定具有真实价值的平台只有安装程序： `platform.win-x86=true` `platform.win-x86-client=false` `platform.win-x64=true` `platform.linux-x86=false` `installer-zip.win-x86=E:\\abc\\abc.jar` `installer-zip.win-x64=E:\\def\\def.jar`

尝试了很多东西，但我用过的东西之一就是

```
 <propertyselector property="platform.list"
                         delim`enter code here`iter=","
                         match="platform\.([^\.]*)"
                         select="\1"
                         casesensitive="false" />

    <propertyselector property="zip.list"
                         delimiter=","
                         match="installer-zip\.([^\.]*)"
                         select="\1"
                         casesensitive="false" />

   <target name="print.name" >
      <propertycopy name="platform.name" from="platform.${platform.id}" />
      <if> <equals arg1="${platform.name}" arg2="true" />
            <then>
                <echo>PlatForm.Id====>${platform.id}</echo>
                <echo message="${platform.name}" />
                <echo file="platform.properties" append="yes">${new.platform-name}=Yes${line.separator}</echo>
            </then>

        </if>
    </target> 

    <target name="print.zipname" >
        <propertycopy name="zip.name" from="installer-zip.${zip.id}" />
        <echo>zip.Id====>${zip.id}</echo>
        <echo message="${zip.name}" />

    </target> 

    <target name="first">  
         <foreach list="${platform.list}"
                delimiter=","
                target="print.name"
                param="platform.id" />

        <foreach list="${zip.list}"
                delimiter=","
                target="print.zipname"
                param="zip.id" />
    </target> 
```

虽然它为所有真正的平台打印值，但对于安装程序它只打印 1，然后中断..你能帮忙吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T13:03:01.813

这不是直接回答您的问题，而是向您展示如何使用相同的属性在构建中执行条件目标。

```
<project default="build">

    <property file="platform.properties"/>

    <condition property="build.win-x86">
        <and>
            <istrue value="${platform.win-x86}"/>
            <isset property="installer-zip.win-x86"/>
        </and>
    </condition>
    <condition property="build.win-x86-client">
        <and>
            <istrue value="${platform.win-x86-client}"/>
            <isset property="installer-zip.win-x86-client"/>
        </and>
    </condition>
    <condition property="build.win-x64">
        <and>
            <istrue value="${platform.win-x64}"/>
            <isset property="installer-zip.win-x64"/>
        </and>
    </condition>
    <condition property="build.linux-x86">
        <and>
            <istrue value="${platform.linux-x86}"/>
            <isset property="installer-zip.linux-x86"/>
        </and>
    </condition>

    <target name="build" depends="win-x86, win-x86-client, win-x64, linux-x86"/>

    <target name="win-x86" depends="win-x86-build, win-x86-installer"/>
    <target name="win-x86-client" depends="win-x86-client-build, win-x86-client-installer"/>
    <target name="win-x64" depends="win-x64-build, win-x64-installer"/>
    <target name="linux-x86" depends="linux-x86-build, linux-x86-installer"/>

    <target name="win-x86-build" if="${build.win-x86}">
        <echo message="executing win-x86-build"/>
    </target>
    <target name="win-x86-installer" if="${build.win-x86}">
        <echo message="installer: ${installer-zip.win-x86}"/>
    </target>

    <target name="win-x86-client-build" if="${build.win-x86-client}">
        <echo message="executing win-x86-client-build"/>
    </target>
    <target name="win-x86-client-installer" if="${build.win-x86-client}">
        <echo message="installer: ${installer-zip.win-x86-client}"/>
    </target>

    <target name="win-x64-build" if="${build.win-x64}">
        <echo message="executing win-x64-build"/>
    </target>
    <target name="win-x64-installer" if="${build.win-x64}">
        <echo message="installer: ${installer-zip.win-x64}"/>
    </target>

    <target name="linux-x86-build" if="${build.linux-x86}">
        <echo message="executing linux-x86-build"/>
    </target>
    <target name="linux-x86-installer" if="${build.linux-x86}">
        <echo message="installer: ${installer-zip.linux-x86}"/>
    </target>

</project> 
```

基于您的属性文件的输出如下。请注意，实际上只执行了 win-x86 和 win-64 目标。其他的因为不满足要求的条件而被跳过：

```
win-x86-build:
     [echo] executing win-x86-build

win-x86-installer:
     [echo] installer: E:\abc\abc.jar

win-x86:

win-x86-client-build:

win-x86-client-installer:

win-x86-client:

win-x64-build:
     [echo] executing win-x64-build

win-x64-installer:
     [echo] installer: E:\def\def.jar

win-x64:

linux-x86-build:

linux-x86-installer:

linux-x86:

build:

BUILD SUCCESSFUL
Total time: 0 seconds 
```

# visual-c++ - VC++ 2010 Express 和 Borland C++ 3.1 在编译简单的 c++ 代码文件上有什么区别？

> ID：10650008
> 
> 赞同：0
> 
> 时间：2012-05-18T09:26:11.693
> 
> 标签：visual-c++, c++builder, breakpoints, heap-memory

我已经不知道该想什么或该做什么。下一个代码在两个 IDE 中都能正常编译，但在 VC++ 情况下，它会导致奇怪的堆损坏消息，例如：
“Windows 已在 Lab4.exe 中触发断点。

这可能是由于堆损坏，这表明 Lab4.exe 中存在错误或它已加载的任何 DLL。

这也可能是由于用户在 Lab4.exe 获得焦点时按 F12。

输出窗口可能包含更多诊断信息。

它在执行 Task1_DeleteMaxElement 函数时发生，我在那里留下评论。
如果在 Borland C++ 3.1 中编译并且一切都按预期工作，则不会发生类似的情况。

那么...我的代码或 VC++ 有什么问题？

```
#include <conio.h>
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <memory.h>

void PrintArray(int *arr, int arr_length);
int Task1_DeleteMaxElement(int *arr, int arr_length);

int main()
{
    int *arr = NULL;
    int arr_length = 0;

    printf("Input the array size: ");
    scanf("%i", &arr_length);

    arr = (int*)realloc(NULL, arr_length * sizeof(int));

    srand(time(NULL));

    for (int i = 0; i < arr_length; i++)
        arr[i] = rand() % 100 - 50;

    PrintArray(arr, arr_length);

    arr_length = Task1_DeleteMaxElement(arr, arr_length);

    PrintArray(arr, arr_length);

    getch();

    return 0;
}

void PrintArray(int *arr, int arr_length)
{
    printf("Printing array elements\n");

    for (int i = 0; i < arr_length; i++)
        printf("%i\t", arr[i]);

    printf("\n");
}

int Task1_DeleteMaxElement(int *arr, int arr_length)
{
    printf("Looking for max element for deletion...");

    int current_max = arr[0];

    for (int i = 0; i < arr_length; i++)
        if (arr[i] > current_max)
            current_max = arr[i];

    int *temp_arr = NULL;
    int temp_arr_length = 0;

    for (int j = 0; j < arr_length; j++)
        if (arr[j] < current_max)
        {
            temp_arr = (int*)realloc(temp_arr, temp_arr_length + 1 * sizeof(int)); //if initial array size more then 4, breakpoint activates here
            temp_arr[temp_arr_length] = arr[j];
            temp_arr_length++;
        }

    arr = (int*)realloc(arr, temp_arr_length * sizeof(int));
    memcpy(arr, temp_arr, temp_arr_length);
    realloc(temp_arr, 0); //if initial array size is less or 4, breakpoint activates at this line execution

    return temp_arr_length;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T09:37:05.530

我的猜测是 VC++2010 正确地检测了内存损坏，而 Borland C++ 3.1 忽略了它。

## 它是如何工作的？

例如，在为您分配内存时，VC++2010 的 realloc 可以很好地用一些特殊值“标记”它周围的内存。如果您改写这些值，realloc 会检测到损坏，然后崩溃。

它与 Borland C++ 3.1 一起工作的事实纯属运气。这是一个非常古老的编译器（20 年！），因此，对这种内存损坏会更加宽容/无知（直到您的应用程序中发生一些随机的、明显不相关的崩溃）。

## 你的代码有什么问题？

你的错误来源：

```
temp_arr = (int*)realloc(temp_arr, temp_arr_length + 1 * sizeof(int)) 
```

对于以下`temp_arr_length`值，在 32 位中，分配将是：

*   0 : 4 bytes = 1 int 当你期望 1 （好的）
*   1 : 5 bytes = 1.25 int 当你期望 2 时（错误！）
*   2 : 6 bytes = 1.5 int 当你期望 3 时（错误！）

你把你的优先级弄错了。如你看到的：

```
temp_arr_length + 1 * sizeof(int) 
```

应该改为

```
(temp_arr_length + 1) * sizeof(int) 
```

您分配的内存太少，因此写入的内容远远超出了为您分配的内容。

## 编辑 (2012-05-18)

[Hans Passant](https://stackoverflow.com/users/17034/hans-passant)评论了分配器诊断。我冒昧地在这里复制它们，直到他写下自己的答案（我已经看到评论在 SO 上消失了）：

> 是*Windows*提醒您有堆损坏错误，而不是 VS。BC3 使用自己的堆分配器，因此 Windows 无法看到您的代码行为异常。以前没有注意到这些错误是非常了不起的，但并非完全不可能。
> 
> [...] 该功能在 XP 和更早版本上不可用。当然，这也是每个人都讨厌 Vista 的原因之一。将程序中的实际错误归咎于操作系统。Win7 被认为是一个“更好”的操作系统，这在很大程度上是因为 Vista 迫使程序员修复他们的错误。不，Microsoft CRT 已经使用 HeapAlloc 实现 malloc/new 很长时间了。Borland 有自己编写的历史，在 Windows 赶上之前击败了 Microsoft 一段时间。
> 
> [...] CRT 使用您描述的调试分配器，但它会生成不同的诊断。粗略地说，调试分配器捕获小错误，Windows 捕获大错误。

我发现以下链接解释了 Windows/CRT 分配器在分配/解除分配之前和之后对内存所做的操作：

*   [http://www.codeguru.com/cpp/wp/win32/tutorials/article.php/c9535/Inside-CRT-Debug-Heap-Management.htm](http://www.codeguru.com/cpp/w-p/win32/tutorials/article.php/c9535/Inside-CRT-Debug-Heap-Management.htm)
*   [https://stackoverflow.com/a/127404/14089](https://stackoverflow.com/a/127404/14089)
*   [http://www.nobugs.org/developer/win32/debug_crt_heap.html#table](http://www.nobugs.org/developer/win32/debug_crt_heap.html#table)

最后一个链接包含我打印的一张表格，并且在我工作时总是在我附近（这是我在找到前两个链接时正在寻找的这张表格...... :- ...）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T09:37:36.457

如果它在 realloc 中崩溃，那么你就过度了，记着 malloc 和 free 的内存。

错误代码如下：

```
temp_arr = (int*)realloc(temp_arr, temp_arr_length + 1 * sizeof(int)); 
```

应该

```
temp_arr = (int*)realloc(temp_arr, (temp_arr_length + 1) * sizeof(int)); 
```

由于`*`over的运算符优先级`+`，在循环的下一次运行中，当您期望 realloc 传递 8 个字节时，它可能只传递 5 个字节。因此，在您的第二次迭代中，您将写入其他人的内存的 3 个字节，这会导致内存损坏并最终崩溃。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T09:44:54.007

还

```
memcpy(arr, temp_arr, temp_arr_length); 
```

应该

```
memcpy(arr, temp_arr, temp_arr_length * sizeof(int) ); 
```

# facebook - Open Graph API facebook IOS SDK 示例

> ID：10650011
> 
> 赞同：2
> 
> 时间：2012-05-18T09:26:26.783
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

我想创建一个具有添加到监视列表功能的应用程序 iOS。当用户看到电影或 smt 时，他可以按添加到监视列表。发布到 facebook 的应用程序和他的朋友可以通过 facebook 或这个应用程序看到它。喜欢应用：Appstore 上的 Flixster。但我不知道也没有这个功能的理想选择。请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T06:14:19.750

按照这个链接。你会得到一些好的想法来实现它。

1\. [iPhone Facebook Graph API 库](https://stackoverflow.com/questions/2692553/iphone-facebook-graph-api-library)

2\. [http://www.capturetheconversation.com/technology/iphone-facebook-oauth-2-0-and-the-graph-api-a-tutorial-part-2](http://www.capturetheconversation.com/technology/iphone-facebook-oauth-2-0-and-the-graph-api-a-tutorial-part-2)

3\. [https://github.com/facebook/facebook-ios-sdk](https://github.com/facebook/facebook-ios-sdk)

# javascript - 实时表单 - 提交明文字段

> ID：10650012
> 
> 赞同：0
> 
> 时间：2012-05-18T09:26:29.660
> 
> 标签：javascript, jquery, forms, real-time

我一直在查看 StackOverflow 并找到了一些解决方案，但它们对我不起作用 :( 可能是因为我无法正确放置代码字符串。

我有一个将内容提交到数据库的表单 - 以及一个将数据库输入加载到表单下方的 div 的脚本。它实时工作，延迟很小。

```
<div id="addCommentContainer">

<form id="addCommentForm" method="post" action="">
    <div>

        <input type="hidden" name="name" value="<?php echo $loggedInUser->display_username; ?>"  id="name" />

        <input type="hidden" name="email" value="<?php echo $loggedInUser->email; ?>"  id="email" />

        <textarea name="body" id="body" cols="20" rows="5"></textarea>

        <input type="submit"  id="submit" value="Submit" />
    </div>
</form> 
```

有用。我也有这个脚本： [http ://sandbox.jinoh.dk/script.js](http://sandbox.jinoh.dk/script.js)

我尝试了一个解决方案 onclick - 但它使内容消失而不被发布。我试过 onsubmit - 但它没有用。我想要的是要发布的“评论”，然后从表格中消失，也就是要清除的表格。

Chatchatchat-div 是加载评论的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:30:02.773

```
$('#addCommentForm').submit(function(e){
  var form = this;
  .....
  ....

  $.post('submit.php',$(this).serialize(),function(msg){
    if(msg.status){
      form.reset(); // if you want to reset on msg status
    }
    ....                
  });

  this.reset(); // just reset the form what happen
}); 
```

# python - Web浏览器的本地python代理

> ID：10650016
> 
> 赞同：0
> 
> 时间：2012-05-18T09:26:54.223
> 
> 标签：python, localhost, web-crawler, proxy-server

大家好！使用 firefox 插件，我可以捕获标题。我想在 python 中执行此操作：我需要将浏览器代理设置更改为 localhost:8080 （或任何端口），然后浏览器发出的每个请求都应该通过实际运行在我的机器上的 python 脚本。该脚本应该能够捕获标题，捕获网页中的链接等。我知道 Web 应用程序扫描仪会这样做，但我怎么能在 python 中做到这一点。你能建议任何开始的地方，阅读吗？我只想了解它并实施一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T09:32:03.660

Have a look at [python-proxy](http://code.google.com/p/python-proxy/). Googling for ["python proxy"](https://www.google.com/search?q=python%20proxy) also yields tons of results.

If you want to write one from scratch it's also not too hard. You can use [`BaseHTTPServer`](http://docs.python.org/library/basehttpserver.html) to listen for new connections, make it multithreaded via [`SocketServer.ThreadingMixIn`](http://docs.python.org/library/socketserver.html#asynchronous-mixins) and then implement `do_GET` and `do_CONNECT` (possibly also `do_POST` and `do_HEAD`). In those methods you need to extract the URL from `self.path`, send a HTTP request to that URL (preferably using the [`requests`](http://docs.python-requests.org/en/latest/index.html) package, it's much more comfortable than urllib) and send the response back to the client.

# r - R：将变量转换为csv字符串

> ID：10650025
> 
> 赞同：4
> 
> 时间：2012-05-18T09:27:19.903
> 
> 标签：r

我想知道如何将 R 中的变量转换为 csv 字符串。

```
> x = c(1:10)
> a = write.csv(x)
"","x"
"1",1
"2",2
"3",3
"4",4
"5",5
"6",6
"7",7
"8",8
"9",9
"10",10
> a
NULL
> 
```

我想在变量“a”中有 CSV 字符串。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T08:45:45.633

事情可以这么简单......

```
 > zz <- textConnection("foo1", "w") 
 > textConnectionValue(zz) 
 character(0) 
 > write.csv(x, zz) 
 > textConnectionValue(zz) 
 [1] "\"\",\"x\"" "\"1\",1" "\"2\",2" "\"3\",3" "\"4\",4" 
 [6] "\"5\",5" "\"6\",6" "\"7\",7" "\"8\",8" "\"9\",9" 
 [11] "\"10\",10"
 > 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-19T19:41:05.747

这是一个替代方案，甚至更简单：

```
foo2 <- capture.output(write.csv(matrix(1:6,nrow=2), stdout(), row.names=F)) 
foo2
## "\"V1\",\"V2\",\"V3\"" "1,3,5"                "2,4,6" 
```

可能你想要的是：

```
foo2[-1,]    
## "\"V1\",\"V2\",\"V3\"" "1,3,5"                "2,4,6" 
```

# jetty - Jetty runner 没有执行 war 文件

> ID：10650033
> 
> 赞同：1
> 
> 时间：2012-05-18T09:28:01.447
> 
> 标签：jetty

我有一个名为 test 的项目，使用 spring、hibernate 和 struts。它在使用 eclipse 时正在运行。但是当我将此项目导出为 war 并在命令提示符下使用 jetty runner 执行它时，它只是提取了项目并在浏览器。但我希望执行该项目。我已经尝试使用相同的过程与其他一些简单的 Web 应用程序大战，它工作正常。但在我的项目中它不适用于码头。

这是我的码头代码

```
D:\>java -jar jetty-runner-7.0.0.v20091005.jar test.war

i just listing some console output of jetty

INFO::RUNNER 
NO tx manager found
deploying file:D:/test.war @/[webAppContext@86f241@86f241/,null,file:D:/test.war 
```

谁能告诉我解决我的问题的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:27:25.443

1）使用更新版本的跑步者，7.6.3.v20120416

2）您尝试导航到什么上下文，您可能想尝试在运行器上使用其他一些 cli 选项来设置上下文和命令行中的其他内容并进行试验。 [这个网站](http://webtide.intalio.com/2008/04/jetty-runner/)也有一些关于使用这个工件的好信息。

# android - Android：时间监听器

> ID：10650036
> 
> 赞同：2
> 
> 时间：2012-05-18T09:28:14.423
> 
> 标签：android, service, time, listener

Android中有时间监听器吗？我有一个实现位置监听器的服务。当没有 GPS 锁定时，例如在地铁中，我想根据时间发送通知。

例如。如果火车在12:30到达A站。如果当前时钟是 12:30，我想向用户发送通知。

问题是我在任何地方都找不到“onTimeChanged”的方法。有没有办法做到这一点？我知道`System.currentTimeMillis())`但是我在哪里把它放在每秒检查一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:33:36.387

您将能够使用[AlarmManager实现此目的](http://developer.android.com/reference/android/app/AlarmManager.html)

> 此类提供对系统警报服务的访问。这些允许您安排您的应用程序在将来的某个时间点运行。当警报响起时，系统会广播已为其注册的 Intent，如果目标应用程序尚未运行，则会自动启动它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T09:39:00.153

您可以使用 TimerTask 类[http://developer.android.com/reference/java/util/TimerTask.html](http://developer.android.com/reference/java/util/TimerTask.html) 这将帮助您在一段时间间隔后安排新任务。

# php - 使用 php Telnet 到 cisco 交换机

> ID：10650037
> 
> 赞同：2
> 
> 时间：2012-05-18T09:28:17.637
> 
> 标签：php, telnet, cisco

我需要使用 php 远程登录到 cisco 交换机并执行`show interface status`命令并获得结果。我尝试了一些在互联网上找到的 php 类，但它们都无法连接到设备。所以我尝试自己编写脚本，但我有同样的问题，我无法连接到设备。

主持人向我发送横幅消息，然后以`username:`. 我用 发送我的用户名`\r\n`，等待一段时间并尝试读取数据，但在我看来主机只是忽略了我的换行符。这是我得到的回复（explode('\n') on response）：

```
Array
(
    [0] => % 
    [1] => User Access Verification
    [2] => Username:  timeout expired!
) 
```

为什么我没有提示输入密码？我尝试发送 telnet 标头，没有，没有变化。谁能帮帮我吗？

这是我的代码

```
<?
$host = "switchName";
$name = "name";
$pass = "pass";
$port = 23;
$timeOut = 15;
$connected = false;
$skipNullLines = true;
$timeout = 125000;

$header1=chr(0xFF).chr(0xFB).chr(0x1F).chr(0xFF).chr(0xFB).chr(0x20).chr(0xFF).chr(0xFB).chr(0x18).chr(0xFF).chr(0xFB).chr(0x27).chr(0xFF).chr(0xFD).chr(0x01).chr(0xFF).chr(0xFB).chr(0x03).chr(0xFF).chr(0xFD).chr(0x03).chr(0xFF).chr(0xFC).chr(0x23).chr(0xFF).chr(0xFC).chr(0x24).chr(0xFF).chr(0xFA).chr(0x1F).chr(0x00).chr(0x50).chr(0x00).chr(0x18).chr(0xFF).chr(0xF0).chr(0xFF).chr(0xFA).chr(0x20).chr(0x00).chr(0x33).chr(0x38).chr(0x34).chr(0x30).chr(0x30).chr(0x2C).chr(0x33).chr(0x38).chr(0x34).chr(0x30).chr(0x30).chr(0xFF).chr(0xF0).chr(0xFF).chr(0xFA).chr(0x27).chr(0x00).chr(0xFF).chr(0xF0).chr(0xFF).chr(0xFA).chr(0x18).chr(0x00).chr(0x41).chr(0x4E).chr(0x53).chr(0x49).chr(0xFF).chr(0xF0);
$header2=chr(0xFF).chr(0xFC).chr(0x01).chr(0xFF).chr(0xFC).chr(0x22).chr(0xFF).chr(0xFE).chr(0x05).chr(0xFF).chr(0xFC).chr(0x21);

function read_string()
{
    global $fw,$host,$skipNullLines; 
    $string = "";

    while( !feof($fw) )
    {
        $read = fgets($fw);

        $string .= $read;

        // Probably prompt, stop reading
        if( strpos($read, ':') !== FALSE || strpos($read, '> (enable)') !== FALSE || strpos($read, $host.'#') !== FALSE)
        { break; }
    }

    $string =  explode("\n", $string);

    // Get rid of null lines
    $ret = array();
    for($i = 0; $i<count($string); $i++)
    {
        if( trim($string[$i]) == '' && $skipNullLines ) continue;

        $ret[] = $string[$i];
    }

    return $ret;
}

function send_string($string, $force=false)
{
    GLOBAL $timeout,$fw;
    $string = trim($string);

    // execute only strings that are preceded by "show" (if not forced)
    if(!$force && strpos($string, 'show ') !== 0) 
    {
        return 1;
    }

    fputs($fw, $string."\r\n");
    echo("SEND:".$string."\r\n");
    usleep($timeout);
}

$fw = fsockopen($host, $port, $errno, $errorstr, $timeOut);    
if($fw == false)
{
    echo("Cant connect");
}
else
{
    echo("Connected<br>");
    $connected = true;

    stream_set_timeout($fw, $timeout);

//  fputs($fw, $header1);
//  usleep($timeout);
//  fputs($fw, $header2);
//  usleep($timeout);
    print_r(read_string());
    send_string("test", true);
    print_r(read_string());
}

fclose($fw);
?> 
```

**更新** 如果我首先发送用户名，然后我阅读，我会收到密码提示。我不明白，为什么我不能先阅读主机的消息然后发送我的回复。现在它对我的工作方式（发送回复然后阅读提示）是没有意义的！（而且我仍然收到“% Authentication failed.” 带有正确密码/名称的消息事件）。

```
...
$connected = true;
stream_set_timeout($fw, $timeout);
send_string("name", true);
send_string("password", true);
print_r(read_string());
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T08:59:21.343

好的，所以我不知道问题出在哪里，但是经过“几次”测试后，我能够编写适合我的课程。我不知道为什么其他 telnet 类不工作，尽管它们几乎相同。所以如果有人会有类似的问题，你可以试试这个：

```
class TELNET
{
  private $host;
  private $name;
  private $pass;
  private $port;
  private $connected;
  private $connect_timeout;
  private $stream_timetout;

  private $socket;

  public function TELNET()
  {
    $this->port = 23;
    $this->connected = false;         // connected?
    $this->connect_timeout = 10;      // timeout while asking for connection
    $this->stream_timeout = 380000;   // timeout between I/O operations
  }

  public function __destruct()
  {
    if($this->connected) { fclose($this->socket); }
  }

  // Connects to host
  // @$_host - addres (or hostname) of host
  // @$_user - name of user to log in as
  // $@_pass - password of user
  //
  // Return: TRUE on success, other way function will return error string got by fsockopen()
  public function Connect($_host, $_user, $_pass)
  {
    // If connected successfully
    if( ($this->socket = @fsockopen($_host, $this->port, $errno, $errorstr, $this->connect_timeout)) !== FALSE )
    {
      $this->host = $_host;
      $this->user = $_user;
      $this->pass = $_pass;

      $this->connected = true;

      stream_set_timeout($this->socket, 0, 380000);
      stream_set_blocking($this->socket, 1);

      return true;
    }
    // else if coulnt connect
    else return $errorstr;
  }

  // LogIn to host
  //
  // RETURN: will return true on success, other way returns false
  public function LogIn()
  {
    if(!$this->connected) return false;

    // Send name and password
    $this->SendString($this->user, true);
    $this->SendString($this->pass, true);

    // read answer
    $data = $this->ReadTo(array('#'));

    // did we get the prompt from host?
    if( strtolower(trim($data[count($data)-1])) == strtolower($this->host).'#' ) return true;
    else return false;
  }

  // Function will execute command on host and returns output
  //
  // @$_command - command to be executed, only commands beginning with "show " can be executed, you can change this by adding
  //              "true" (bool type) as the second argument for function SendString($command) inside this function (3rd line)
  //
  function GetOutputOf($_command)
  {
    if(!$this->connected) return false;

    $this->SendString($_command);

    $output = array();
    $work = true;

    //
    // Read whole output
    //
    // read_to( array( STRINGS ) ), STRINGS are meant as possible endings of outputs
    while( $work && $data = $this->ReadTo( array("--More--","#") ) )
    {
      // CHeck wheter we actually did read any data
      $null_data = true;
      foreach($data as $line)
      {
        if(trim($line) != "") {$null_data = false;break;}
      }
      if($null_data) { break;}

      // if device is paging output, send space to get rest
      if( trim($data[count($data)-1]) == '--More--')
      {
        // delete line with prompt (or  "--More--")
        unset($data[count($data)-1]);

        // if second line is blank, delete it
        if( trim($data[1]) == '' ) unset($data[1]);
        // If first line contains send command, delete it
        if( strpos($data[0], $_command)!==FALSE ) unset($data[0]);

        // send space
        fputs($this->socket, " ");
      }

      // ak ma vystup max dva riadky
      // alebo sme uz nacitali prompt
      // IF we got prompt (line ending with #)
      // OR string that we've read has only one line
      //    THEN we reached end of data and stop reading
      if( strpos($data[count($data)-1], '#')!==FALSE /* || (count($data) == 1 && $data[0] == "")*/  )
      {
        // delete line with prompt
        unset($data[count($data)-1]);

        // if second line is blank, delete it
        if( trim($data[1]) == '' ) unset($data[1]);
        // If first line contains send command, delete it
        if( strpos($data[0], $_command)!==FALSE ) unset($data[0]);

        // stop while cyclus
        $work = false;
      }

      // get rid of empty lines at the end
      for($i = count($data)-1; $i>0; $i--)
      {
        if(trim($data[$i]) == "") unset($data[$i]);
        else break;
      }

      // add new data to $output
      foreach($data as $v)
      { $output[] = $v; }
    }

    // return output
    return $output;
  }

  // Read from host until occurence of any index from $array_of_stops
  // @array_of_stops - array that contains strings of texts that may be at the end of output
  // RETURNS: output of command as array of lines
  function ReadTo($array_of_stops)
  {
    $ret = array();
    $max_empty_lines = 3;
    $count_empty_lines = 0;

    while( !feof($this->socket) )
    {
      $read = fgets($this->socket);
      $ret[] = $read;

      //
      // Stop reading after (int)"$max_empty_lines" empty lines
  //
      if(trim($read) == "")
      {
        if($count_empty_lines++ > $max_empty_lines) break;
      }
      else $count_empty_lines = 0;

      //
      // Does last line of readed data contain any of "Stop" strings ??
      $found = false;
      foreach($array_of_stops AS $stop)
      {
        if( strpos($read, $stop) !== FALSE ) { $found = true; break; }
      }
      // If so, stop reading
      if($found) break;
    }

    return $ret;
  }

  // Send string to host
  // If force is set to false (default), function sends to host only strings that begins with "show "
  //
  // @$string - command to be executed
  // @$force - force command? Execute if not preceeded by "show " ?
  // @$newLine - append character of new line at the end of command?
  function SendString($string, $force=false, $newLine=true)
  {
    $t1 = microtime(true);
    $string = trim($string);

    // execute only strings that are preceded by "show"
    // and execute only one command (no new line characters) !
    if(!$force && strpos($string, 'show ') !== 0 && count(explode("\n", $string)) == 1)
    {
      return 1;
    }

    if($newLine) $string .= "\n";
    fputs($this->socket, $string);

    $t2 = microtime(true);
  }

}

// EXAMPLE
$host = "hostname";
$name = "username";
$pass = "password";

$t = new TELNET();
echo("CONNECT:".$t->Connect($host, $name, $pass)."<br>");
echo("LOGIN:".(int)$t->LogIn());
echo("<br>OUTPUT:<br>");
print_r($t->GetOutputOf("show snmp"));
print_r($t->GetOutputOf("show users"));
print_r($t->GetOutputOf("show interface status")); 
```

PS：我的设备提示是“主机名#”，因此您可能需要编辑登录功能以使此代码与您的设备提示一起使用（因此您可能需要在 GetOutputOf() 中）

# php - 控制器中的全局部分行为

> ID：10650038
> 
> 赞同：1
> 
> 时间：2012-05-18T09:28:20.043
> 
> 标签：php, templates, symfony

我的应用程序中的大多数控制器都有一个基本控制器，如下所示：

```
class BaseController extends \Symfony\Bundle\FrameworkBundle\Controller\Controller
{
    /**
     * 
     * @Route("/")
     */
    public function indexAction($partial = false)
    {
            $this->partial = $partial;
        $this->currentAction = 'index';

        return $this->r();
    }
} 
```

这伴随着一组模板，这些模板可以是带有布局的完整 html 页面，也可以只是内容。这是通过模板中的一行完成的：

```
{% extends this.partial ? "SomeProject:_base:partial.html.twig" : "SomeProject::layout.html.twig" %} 
```

（`this`控制器参考在哪里）。

然后可以在其他控制器中呈现这些模板，而无需重复布局。

```
{% render 'SomeProject:SomeController:index' with  { "partial":true }  %} 
```

我对这种方法的问题是：

1.  每个需要成为部分控制器的动作都必须有一个`$partial`参数。由于大多数动作都有可能是局部的，因此所有控制器都必须撒上它。
2.  每个潜在的部分动作都必须有`$this->partial = $partial`线条，很容易忘记。

通过使用一些 Symfony 或 Twig 魔法（覆盖`render`标签等），它有一种更清洁的方式。为了摆脱上述问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:51:28.927

我已经覆盖了大多数控制器中的渲染方法，以便将一些标准变量注入我的模板中。它似乎工作得很好，但它所做的只是让从控制器渲染模板更容易一些，因为你不必显式地将 $this 传递给模板。

我不太确定将引用传递给控制器​​是否是个好主意。至少对于您的示例，仅传递部分似乎就是您所需要的。

您真的需要为您的模板提供这种部分功能吗？似乎更容易只有两个模板（一个用于页面，一个用于部分）。但也许您的用例需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T06:54:05.580

经过一些研究和内部挖掘，我想出了一个优雅的解决方案。

答案是构建一个事件监听器（在[Symfony2 Docs](http://symfony.com/doc/current/cookbook/service_container/event_listener.html)中有介绍）。更准确地说：一个控制器监听器，类的内容如下所示。这允许对部分进行透明处理，而无需对控制器代码进行任何更改。

```
class ControllerListener
{
    /**
     *
     * @param BaseController $ctrl
     * @param Request $request
     * @return BaseController 
     */
    public function injectPartial($ctrl,Request $request)
    {
        if ($ctrl instanceof BaseController)
        {
            if ($request->get("partial",false))
                $ctrl->setPartial($request->get ("partial"));
        }
        return $ctrl;
    }

    public function onKernelController(FilterControllerEvent $event)
    {
        $ctrl = $event->getController();
        $ctrl[0] = $this->injectPartial($ctrl[0], $event->getRequest());
        $event->setController($ctrl);
    }
} 
```

# mysql - Mysql选择一列中具有相同值而另一列中具有不同值的行

> ID：10650039
> 
> 赞同：7
> 
> 时间：2012-05-18T09:28:30.223
> 
> 标签：mysql, select, count, distinct

如果有人可以验证我的 SQL 查询，我将不胜感激。

对于以下数据集：

```
MD5      UserPK      CategoryPK    
ADCDE    1           7  
ADCDE    1           4  
ADCDE    1           7  
dffrf    1           7  
dffrf    2           7  
dffrf    2           6 
dffrf    1           1 
```

我想选择 MD5 和 CategoryPK，其中存在两行或多行具有相同的 MD5 值、相同的 CatgegoryPK 和两个或更多不同的 UserPK 值。

换句话说，我想知道两个或多个不同用户 (UserPK) 将相同类别 (UserPK) 分配给同一文件 (Md5) 的所有记录的 MD5 和 categoryPK。我对同一用户多次分配类别的记录不感兴趣（除非不同的用户也为该文件分配了相同的类别）。

所以从上面的数据来看，我只想返回：

```
md5    CategoryPK
dffrf  7 
```

我写的查询是：

```
SELECT md5, 
       count(md5), 
       count(distinct categorypk) as cntcat, 
       count(distinct userpk) as cntpk
FROM Hash
       group by md5 having count(md5) > 1 
                           and cntpk > 1
                           and cntcat = 1; 
```

它似乎有效，但在我开始愤怒地使用它之前，如果我错过了什么或者有更好的方法，我会很感激第二个意见。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-18T09:37:47.593

我不认为你的代码会给你你所追求的；如果一个文件被多个用户分配了多个类别，并且某些类别重叠，会发生什么情况？然后，即使文件确实已被多个用户以相同的方式分类`cntcat != 1`，您的子句也将无法匹配。`HAVING`

我会改为使用自加入：

```
SELECT   a.MD5, a.CategoryPK
FROM     Hash a
  JOIN   Hash b
      ON a.MD5 = b.MD5
     AND a.UserPK <> b.UserPK
     AND a.CategoryPK = b.CategoryPK
GROUP BY a.MD5, a.CategoryPK
HAVING   COUNT(DISTINCT a.UserPK) > 2  -- you said "more than 2" ? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T09:37:22.980

除了您没有在您的选择列表中获得似乎在标准中的类别之外，我看不出您所写的内容有任何问题？我认为您可以稍微简化一下并找出类别：

```
SELECT  MD5, CategoryPK
FROM    Hash
GROUP BY MD5, CategoryPK
HAVING MIN(UserPK) <> MAX(UserPK) 
```

或者，您可以通过连接来解决这个问题，您可能需要运行一些测试并使用 EXPLAIN，但有时连接的性能比 GROUP BY 更好。无论如何，值得尝试看看您是否看到任何显着差异。

```
SELECT  DISTINCT t1.MDF, t2.CategoryPK
FROM    Hash T1
        INNER JOIN Hash T2
            ON T1.MD5 = T2.MD5
            AND T1.CategoryPK = T2.CategoryPK
            AND T1.UserPK < T2.UserPK 
```

# c# - C#如何在匿名对象初始化时设置只读属性

> ID：10650045
> 
> 赞同：3
> 
> 时间：2012-05-18T09:28:52.033
> 
> 标签：c#, anonymous-types, object-initializers

在 C# 中，对象初始值设定项可以设置公共的非只读字段和属性。

但是，对于匿名类型，属性是只读的。那么.NET 是如何在对象初始化时设置它们的呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T09:31:15.533

像所有只读属性一样，它们可以在构造函数中设置。

使用它生成匿名类型的构造函数，并通过它设置字段。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T09:32:43.017

匿名类型的对象初始化器的行为不像普通的对象初始化器。即它不直接设置属性。它被翻译成对构造函数的调用，它可以更改只读字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T09:31:55.450

此外，它们可以通过反射或在创建后通过修补托管代码来设置。

例如，只需获取具有适当绑定标志的字段，然后枚举并使用正确的参数调用 SetValue ......

# mongodb - MongoDB 亮点

> ID：10650047
> 
> 赞同：0
> 
> 时间：2012-05-18T09:28:59.340
> 
> 标签：mongodb, mongodb-php

我刚刚开始使用 MongoDB 和 NoSQL 的整个原理，我真的很享受这种体验。

有没有人对我应该研究的功能提出任何建议？

有没有人遇到过任何深入的教程？

我特别感兴趣的一件事是如何处理与模式变化相关的事情。如果将列添加到表中，则所有记录都将具有此新列。似乎在 Mongo 中，如果文档以新属性结束，则只有新文档才会具有此属性，并且需要更新才能将其添加到所有其他文档中。有没有更好的方法来解决这个问题，或者正在解决不存在的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:48:18.997

首先，您需要意识到数据建模将与关系数据库*完全*不同。我建议您遵循一些可通过[http://www.10gen.com/presentations](http://www.10gen.com/presentations)获得的架构设计演示（取消选择“精选”并选择“查看全部”并搜索“架构”）。[http://www.10gen.com/presentations/webinar/mongodb-schema-design-how-to-think-non-relational](http://www.10gen.com/presentations/webinar/mongodb-schema-design-how-to-think-non-relational)是一个特别好的。

网上还有很多其他“模式设计”教程，我必须强调，简单地将关系模式转换为 MongoDB 并不能充分利用 MongoDB，因为它是一种完全不同的方法。

# android - Taking a "screenshot" of a specific layout in Android

> ID：10650049
> 
> 赞同：14
> 
> 时间：2012-05-18T09:29:02.257
> 
> 标签：android, screenshot

I have two main issues which are closely linked. I am looking at these problems from a programmatic point of view.

~~(1) - I wish to take a screenshot of the contents of a SPECIFIC layout, i.e. a `ScrollView` nested in a `LinearLayout`.~~

(2) - As the `ScrollView` has content that spills out of the screen (hence scrolling made possible), how can I ensure that the screenshot includes the elements that are not visible on the screen?

This is the current block of code I use. It does the job of taking a screenshot but only for the entire screen. ~~This is even though `R.id.boss` is the ID of the `ScrollView` and not the main `LinearLayout`.~~

```
View view = findViewById(R.id.boss);
View v = view.getRootView();// this does not seem to make a difference
v.setDrawingCacheEnabled(true);                                                
v.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), 
MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
v.layout(0, 0, v.getMeasuredWidth(), v.getMeasuredHeight());    
v.buildDrawingCache(true);
Bitmap b = Bitmap.createBitmap(u.getDrawingCache());             
v.setDrawingCacheEnabled(false); 
```

Thanks in advance.

**EDIT:**

I've made a few mistakes. I used `R.id.boss` which is the wrong resource. I am now able to take a screenshot of the scrollview alone, less the out-of-screen parts.

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/boss"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_gravity="top"
android:orientation="vertical" >

    <TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="F"
    android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Analyze via image URL"
        android:textAppearance="?android:attr/textAppearanceSmall" />

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
             >

                        <EditText
                            android:id="@+id/mUrl"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:layout_weight="0.7"
                            android:text="http://" >

                            <requestFocus />
                        </EditText>

                        <ImageView
                            android:id="@+id/call"
                            android:layout_width="75dp"
                            android:layout_height="50dp"
                            android:layout_weight="0.3"
                            android:text="ABC"
                            android:src="@drawable/run" />

        </LinearLayout>

     <TextView
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:text="ABC"
         android:textAppearance="?android:attr/textAppearanceSmall" />

     <LinearLayout
         android:layout_width="fill_parent"
         android:layout_height="wrap_content" >

         <EditText
             android:id="@+id/filepath"
             android:layout_width="fill_parent"
             android:layout_height="wrap_content"
             android:layout_weight="0.55" />

         <ImageView
             android:id="@+id/cam"
             android:layout_width="75dp"
             android:layout_height="50dp"
             android:layout_weight="0.15"
             android:src="@drawable/cam" />

         <ImageView
             android:id="@+id/browse"
             android:layout_width="75dp"
             android:layout_height="50dp"
             android:layout_weight="0.15"
             android:src="@drawable/folder"
             android:text="B" />

         <ImageView
             android:id="@+id/upload"
             android:layout_width="75dp"
             android:layout_height="50dp"
             android:layout_weight="0.15"
             android:src="@drawable/run"
             android:text="A" />
     </LinearLayout>

     <LinearLayout
         android:id="@+id/baba"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:orientation="vertical" >

         <ScrollView
             android:id="@+id/scroll"
             android:layout_width="fill_parent"
             android:layout_height="150dp"
             android:layout_weight="0.7" >

             <LinearLayout
                 android:layout_width="fill_parent"
                 android:layout_height="186dp"
                 android:orientation="vertical" >

                 <ImageView
                     android:id="@+id/pic"
                     android:layout_width="fill_parent"
                     android:layout_height="fill_parent"
                     android:layout_weight="1" />

                 <TextView
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     android:layout_weight="1"
                     android:text="Facial recognition"
                     android:textAppearance="?android:attr/textAppearanceMedium" />

                 <TextView
                     android:id="@+id/text3"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     android:layout_weight="1"
                     android:text="Small Text"
                     android:textAppearance="?android:attr/textAppearanceSmall" />

                 <TextView
                     android:id="@+id/avmarwe"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     android:layout_weight="1"
                     android:text="Gender and age"
                     android:textAppearance="?android:attr/textAppearanceMedium" />

                 <TextView
                     android:id="@+id/text1"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     android:layout_weight="1"
                     android:text="Small Text"
                     android:textAppearance="?android:attr/textAppearanceSmall" />

                 <TextView
                     android:id="@+id/skahasd"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     android:layout_weight="1"
                     android:text="Expression and mood"
                     android:textAppearance="?android:attr/textAppearanceMedium" />

                 <TextView
                     android:id="@+id/text2"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     android:layout_weight="1"
                     android:text="Small Text"
                     android:textAppearance="?android:attr/textAppearanceSmall" />

                 <TextView
                     android:id="@+id/dsfsfs"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     android:layout_weight="1"
                     android:text="Celebrity Facial Match"
                     android:textAppearance="?android:attr/textAppearanceMedium" />

                 <TextView
                     android:id="@+id/text4"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     android:layout_weight="1"
                     android:text="Small Text"
                     android:textAppearance="?android:attr/textAppearanceSmall" />
             </LinearLayout>
         </ScrollView>

     </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom" >

        <Button
            android:id="@+id/c"
            android:layout_width="fill_parent"
            android:layout_height="50dp"
            android:layout_weight="0.7"
            android:text="" />

        <Button
            android:id="@+id/share"
            android:layout_width="70dp"
            android:layout_height="50dp"
            android:layout_weight="0.3"
            android:text="" />

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-18T10:59:15.397

多亏了各位，我终于知道出了什么问题了。

`View v = view.getRootView();`不应该使用，因为它会调用我不想要的根视图。我错误地认为这没有什么区别，因为我输入了错误的资源 ID。

`MeasureSpec`不知何故没有很好地说明宽度和高度。所以我最终使用了另一种方法：

```
...
ScrollView z = (ScrollView) findViewById(R.id.scroll);
int totalHeight = z.getChildAt(0).getHeight();
int totalWidth = z.getChildAt(0).getWidth();
u.layout(0, 0, totalWidth, totalHeight);
... 
```

由于 ScrollView 的总高度可以由它拥有的单个子元素确定。

进行这些更改后，我现在可以截取嵌套的 ScrollView 及其所有内容（可见与否）的屏幕截图。对于任何感兴趣的人，这里是包含位图保存的代码块：

```
 View u = findViewById(R.id.scroll);
            u.setDrawingCacheEnabled(true);                                                
            ScrollView z = (ScrollView) findViewById(R.id.scroll);
            int totalHeight = z.getChildAt(0).getHeight();
            int totalWidth = z.getChildAt(0).getWidth();
            u.layout(0, 0, totalWidth, totalHeight);    
            u.buildDrawingCache(true);
            Bitmap b = Bitmap.createBitmap(u.getDrawingCache());             
            u.setDrawingCacheEnabled(false);

            //Save bitmap
            String extr = Environment.getExternalStorageDirectory().toString() +   File.separator + "Folder";
            String fileName = new SimpleDateFormat("yyyyMMddhhmm'_report.jpg'").format(new Date());
            File myPath = new File(extr, fileName);
            FileOutputStream fos = null;
            try {
                fos = new FileOutputStream(myPath);
                b.compress(Bitmap.CompressFormat.JPEG, 100, fos);
                fos.flush();
                fos.close();
                MediaStore.Images.Media.insertImage(getContentResolver(), b, "Screen", "screen");
            }catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-18T07:14:39.937

试试这个对我来说很好

```
TableLayout tabLayout = (TableLayout) findViewById(R.id.allview);
if (tabLayout != null) {
    Bitmap image = Bitmap.createBitmap(tabLayout.getWidth(),
            tabLayout.getHeight(), Config.ARGB_8888);
    Canvas b = new Canvas(image);
    tabLayout.draw(b);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T09:42:23.260

编辑：看到OP的评论后

您根本不需要考虑新的活动..假设您现在在活动中..布局A是活动的主要布局，布局B和C是布局A内的两个子布局。像这样，

```
 Layout A -> Parent
 |
  -------Layout B
 |
  -------Layout C 
```

现在，如果您只想截取 C 的屏幕截图

1) 在活动的 onCreate()

```
 LinearLayout myCLayout = (LinearLayout)this.findViewbyId(R.id.my_c_layout);
 ViewTreeObserver vto   =  myCLayout.getViewTreeObserver();
 vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
   @Override
   public void onGlobalLayout() {
      //fully drawn, no need of listener anymore
      myCLayout.getViewTreeObserver().removeGlobalOnLayoutListener(this);
      getDrawingBitmap();
   }
 }); 
```

其中 getDrawingBitmap() 是一个函数..截取您的屏幕截图..

```
public void getDrawingBitmap(){
    LinearLayout myCLayout = (LinearLayout)this.findViewbyId(R.id.my_c_layout);
    Bitmap b = myCLayout.getDrawingCache();

    File file = saveBitmapAsFile(b);
} 
```

**编辑：对于滚动视图**

我从未尝试过..但我认为你可以做到这一点..

1）首先覆盖scrollView，并覆盖onMeasure函数..

```
public class MyScrollView extends ScrollView{
    public MyScrollView(Context context, AttributeSet attrs) {
         super(context, attrs);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec){
        super.onMeasure(widthMeasureSpec, yourFullScrollViewHeight));
    }
} 
```

并在您的布局中使用 MyScrollView .. 这里 yourFullScrollViewHeight 是您需要截取屏幕截图的所有滚动视图内容的高度.. 我从未尝试过.. 但它可能会工作..

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-23T05:21:44.733

这是您想要的确切解决方案，它将显示整个屏幕，包括隐藏在您的`ScrollView`

```
LayoutInflater inflater = (LayoutInflater) this.getSystemService(LAYOUT_INFLATER_SERVICE);
FrameLayout root = (FrameLayout) inflater.inflate(R.layout.activity_main, null); // activity_main is UI(xml) file we used in our Activity class. FrameLayout is root view of my UI(xml) file.
root.setDrawingCacheEnabled(true);
Bitmap bitmap = getBitmapFromView(this.getWindow().findViewById(R.id.frameLayout)); // here give id of our root layout (here its my FrameLayout's id) 
```

显示`bitmap`在您的`ImageView`或根据需要使用它。
享受..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T05:01:05.370

我也遇到了这个问题，自己编码。

我使用此代码截取整个布局的屏幕截图。

我确实修改了列表大小和一些数学项目。

请参阅以下[网站](http://511384.members.page4.me/117.html)，

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-05-25T03:42:50.460

试试这个代码

公共位图屏幕截图（查看视图）{

```
 Bitmap bitmap = Bitmap.createBitmap(view.getWidth(),
    view.getHeight(), Bitmap.Config.ARGB_8888);
    Canvas canvas = new Canvas(bitmap);
    view.draw(canvas);
    return bitmap;
} 
```

# sql-server-express - SQL Server 引擎或独立

> ID：10650053
> 
> 赞同：-1
> 
> 时间：2012-05-18T09:29:22.933
> 
> 标签：sql-server-express

我开始在城里发布我的应用程序。我有个问题， ：

对于本地目标系统数据库，哪个更好，为什么？

SQL Server 引擎或前。SQL Server 速成版 ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:41:51.320

取决于您的需要，SQL Express 不支持 SQL Server 引擎以 MSSQL Server 启动。

我会解释一下，如果您有 SQL express 2008 或 2012，您将无法运行 SQL 作业，例如自动备份、清理或您希望在 SQL 服务器上自动运行的任何其他作业。

*   SQL Server 2008 R2 Express 数据库大小限制增加到 10GB，如果你有大于 10GB 的数据库，那么你需要考虑拥有 SQL Server 企业版或 Web 版。

*   SQL Server 2008 R2 Express 仍然限制为 1 个 CPU 和 1 GB 或 RAM。

*   SQL Express 不支持镜像，您不能使用 SQL Server Profiler。

如果您认为 SQL 调度程序作业需要超过 10GB 的数据库和超过 1CPU 的并行度，那么您应该考虑迁移到 SQL Server 企业版或 Web 版。

问候，加布里埃尔

# eclipse - Eclipse java编辑栏

> ID：10650058
> 
> 赞同：0
> 
> 时间：2012-05-18T09:29:51.710
> 
> 标签：eclipse

Eclipse 中的 java 编辑器顶部有一个栏，显示当前项目、包、类和方法。
我怎么能打开它 / of ？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:06:11.143

它被称为面包屑。按 Alt+shift+B。

# windows - List Filenames and Date

> ID：10650059
> 
> 赞同：2
> 
> 时间：2012-05-18T09:29:52.223
> 
> 标签：windows, command-line, batch-file, dos, command-prompt

We have a file repository containing code files `*.sql; *.xep; *.dll; *.aspx; *.gif` that you are going to submit to Production pretty soon. In this repository we have the main folders which contain the most recent code files to go to PROD, but we also have all the Change Folders that where submitted to PRE-PROD with code. You can see the main repository structure in the image below:

![enter image description here](../Images/77995f102b8fdc04bce83309da16fcd0.png)

The protocol is that whenever we submit something to PRE-PROD, we e create a Change Folder, place it in the main repository, and also update the main folders, but sometimes we forget to do the second part. What i was trying to do in a automated way is: if there is a file with the same name in the main folder and the change folder they need the have the same modified date day (at least), this specific crossing i could easily do in Excel or even SQL. So, finally :P , what i needed help in, is getting into a csv fileformat (';' separating values, and '\n' separating rows), all the `*.sql; *.xep; *.dll; *.aspx; *.gif` from the main repository directory and sub-directories.

So far I i have tested with this dos commands:

```
dir *.sql *.xep *.aspx *.dll *.gif /s /a:-D>listWithDate.txt 
```

this one gets me a list, ie: listWithDate.txt, that a i have formated in this fashion:

```
2012/03/19[2sapces]14:27[Nspaces]4.006[1space][filename]
2012/03/19[2sapces]14:27[Nspaces]10.006[1space][filename] 
```

So needed help in on of the two:

*batch to list Filenames and Date to a csv formated file*

or

*batch to format the listWithDate.txt into a csv formated file*

Many thanks in advance ;)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T18:36:14.377

以下单行将输出文件时间戳（作为单个单位）、文件大小（以字节为单位）和文件名作为 CSV 行集：

```
>csvfile.txt (FOR %R IN (*.sql *.xep *.aspx *.dll *.gif) DO @ECHO "%~tR";%~zR;"%~nxR") 
```

注意：这应该直接从命令提示符运行。如果您希望将其放入批处理脚本中，请将每个`%`字符加倍。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T14:47:52.323

嗯，我认为这可能有效：

```
 @echo off
    echo.
    if exist newfile.csv del newfile.csv
    for /f "tokens=1-4* delims= " %%a in (listWithDate.txt) do (
        rem %%a is date %%b is time, %%c is filesize, %%d is filename
        rem use %%b or %%c as needed
        echo %%d, %%a >> newfile.csv
    ) 
```

这应该生成您正在寻找的文件，让我知道这是否适合您

# jquery - JQuery auto complete and form auto submit

> ID：10650067
> 
> 赞同：0
> 
> 时间：2012-05-18T09:30:08.147
> 
> 标签：jquery, forms

I'm using the JQuery auto complete ( jquery.autocomplete.js ). and I'm wondering how can I submit a form once an item has been selected? currently when an item is select you have to hit enter twice, once to get the item into the search field, and once to submit the search. I'd like to submit the search on the first enter or when an item selecting by mouse.

how can I use this to submit the form???? This is my code::

```
$(function() {
     $("#artist" ).autocomplete({
     source: function( request, response ) {
            $.ajax({
                url: "http://",
                dataType: "jsonp",
                data: {
                    results: 12,

                    format:"jsonp",
                    name:request.term
                }, 
```

THis is the form::

```
<form id="mainSearchForm" onSubmit="ytvbp.listVideos(this.queryType.value, this.searchTerm.value, 1); document.forms.searchForm.searchTerm.value=this.searchTerm.value; ytvbp.hideMainSearch(); document.forms.searchForm.queryType.selectedIndex=this.queryType.selectedIndex; return false;">
       <div align="left">
         <select name="queryType" onChange="ytvbp.queryTypeChanged(this.value, this.form.searchTerm);">
           <option value="all" selected="true">All Videos</option>
           <option value="top_rated">Top Rated Videos</option>
           <option value="most_viewed">Most Viewed Videos</option>
           <option value="recently_featured">Recently Featured Videos</option>

         </select>
         <input name="searchTerm" id="artist" >
         <input type="submit" value="Search">
       </div>
       </form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T09:35:11.733

您尚未发布自动完成代码或表单代码，因此我不知道您希望任何人如何为您量身定制答案。但是，您只需要将某些内容绑定到 select 事件。这应该这样做：

```
$('#whatever').autocomplete({
    select: function() {
        $(this).closest('form').trigger('submit');
    }
}); 
```

[文档在这里。](http://jqueryui.com/demos/autocomplete/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:34:14.073

you can use select function like this, [Select Event in Autocomplete](http://jqueryui.com/demos/autocomplete/#event-select)

```
$( "#yourID" ).autocomplete({
        source: "YourUrl.php",
        minLength: 2,
        select: function( event, ui ) {
            log( ui.item ?
                "Selected: " + ui.item.value + " aka " + ui.item.id :
                "Nothing selected, input was " + this.value );
                             // you can replace this and put the submit code. by calling submit() method. 
                       $(this).closest('form').trigger('submit');

        }
    }); 
```

# c++ - C++ 动态字节签名

> ID：10650079
> 
> 赞同：0
> 
> 时间：2012-05-18T09:30:40.483
> 
> 标签：c++

有没有一种好方法（或一个好的库/类/源文件/东西）在运行时找到某个地址的字节签名（使用一串字节）并获得指向该地址的指针？

即在运行内存中：

> ... 05 AE 6B 24 B1 00 B5 ...

并在运行时找到第一个模式`AE 6B 24`并返回该位置的地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:35:11.047

你看起来像strstr，对吧？试试*memmem(3)*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:38:39.407

假设您要从内存地址 3452345 开始进行搜索。

`char *`使用创建一个`char *pMem =(char *)(*(3452345))`

然后使用 char * 遍历内存以找到匹配的模式。

但是，这种方法很容易出错（在访问内存的某些部分时可能会出错），您应该处理错误。

# asp.net-mvc - Where is GetAllUsers in membership provider?

> ID：10650083
> 
> 赞同：8
> 
> 时间：2012-05-18T09:31:01.820
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller, asp.net-membership, membership-provider

I looked at membership provider documentation and there should be two GetAllUsers method in membership provider ([http://msdn.microsoft.com/en-us/library/system.web.security.membership.getallusers](http://msdn.microsoft.com/en-us/library/system.web.security.membership.getallusers) ).

But when I look at methods exposed by System.Web.Security (in

```
C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\System.Web.ApplicationServices.dll ) 
```

It only has one method (the one that has paging capability).

Where can I find a method to return all users from database? It seems there is no way to get list of all users or find how many user is in the database.

**--Update**

looking at System.Web.Security, i found that SqlMembershipProvider is defined as follow:

```
public class SqlMembershipProvider : System.Web.Security.MembershipProvider 
```

but this class doesn't have any public GetAllUsers() method.

How can I access its base GetAllUsers method?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:18:50.883

I think you should be looking in the System.Web.dll not System.Web.ApplicationServices.dll

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-22T17:51:08.200

问题是“会员提供商中的 GetAllUsers 在哪里？”

答案是它不在 MembershipProvider 中。它在 System.Web.Security.Membership 中

您在问题中提供的 MSDN 链接也说了同样的话。

GetAllUsers 方法静态且重载。

```
int userCount = 0;
MembershipUserCollection muc1 =  System.Web.Security.Membership.GetAllUsers();
MembershipUserCollection muc2 = System.Web.Security.Membership.GetAllUsers(0, int.MaxValue, out userCount); 
```

如果您遇到命名空间问题，他们会在 .net 3.5 和 .net 4.0 之间调整一些内容

几年前这让我很伤心。

[.Net 4.0 System.Web.Security.MembershipProvider 不明确的参考？](https://stackoverflow.com/questions/3712467/net-4-0-system-web-security-membershipprovider-ambiguous-reference)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-19T10:15:35.120

它的工作方式是您必须[在](https://msdn.microsoft.com/en-us/library/system.web.security.sqlmembershipprovider(v=vs.110).aspx)您的`web.config`. 然后，[Membership.GetAllUsers](https://msdn.microsoft.com/en-us/library/dy8swhya)方法将采用默认配置`MembershipProvider`并调用其方法[GetAllUsers](https://msdn.microsoft.com/en-us/library/system.web.security.sqlmembershipprovider.getallusers(v=vs.100).aspx)并传入`0`当前页面索引和每页`int.MaxValue`的总记录（以及`out int`获取存储中的总记录）。

如果您在调用此方法时遇到问题，请检查以下内容：

*   您引用了正确的 .net 程序集
    *   `System.Web`
    *   `System.Web.ApplicationServices`
    *   `System.Configuration`
*   `System.Web.Security`您引用了 正确的命名空间
    *   在`using`文件顶部的陈述中
    *   直接在引用的类型上
*   你`web.config`有一个注册的默认值`MembershipProvider`

## 笔记

*   派生自的[SqlMembershipProvider](https://msdn.microsoft.com/en-us/library/system.web.security.sqlmembershipprovider(v=vs.110).aspx)`MembershipProvider`与 type 不是同一类型或类型层次结构`Membership`。因此，并非您看到的所有方法`Membership`都可以在派生自`MembershipProvider`.
*   该类型`Membership`是静态的，因此包括[Membership.GetAllUsers](https://msdn.microsoft.com/en-us/library/dy8swhya)在内的所有成员也是静态的。
*   该类型`Membership`是为了方便起见，它的大多数成员都会调用已注册的 default `MembershipProvider`。

## 代码示例：

```
using System.Web.Security;
namespace MyNameSpace
{
    public class MembershipTests
    {
        public void Test()
        {
            var users = Membership.GetAllUsers();
            // same as
            var totalRecords = 0;
            users = Membership.GetAllUsers(0, int.MaxValue, out totalRecords);
            // same as (Membership.Provider gets the default registered MembershipProvider)
            users = Membership.Provider.GetAllUsers(0, int.MaxValue, out totalRecords);
        }
    }
} 
```

从文档

> ## 评论
> 
> GetAllUsers 将应用程序的所有成员用户的信息作为 MembershipUser 对象的集合返回。对非常大的用户数据库使用 GetAllUsers 方法时要小心，因为 ASP.NET 页面中生成的 MembershipUserCollection 可能会降低应用程序的性能。

# python - Matplotlib：将带有楔形分解的饼图绘制成条形图

> ID：10650089
> 
> 赞同：3
> 
> 时间：2012-05-18T09:31:43.197
> 
> 标签：python, matplotlib, pie-chart

我有一个饼图（示例），其中包含以下内容`fracs = [10, 20, 50, 30]`。用 matplotlib 画这个没问题。如何**将第一个楔子**(10) 分解为`6`和`4`？理想情况下，我希望`20`, 分解为`10`, `3`,的第二个楔子`7`。这将显示为特定楔形附近的条形图或饼图（这将使其成为类似于 Excel 中的饼图）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T15:31:26.167

这是一种方法（可能不是最好的......）。我已经修改了一些在[这里找到的代码，在 matplotlib 站点](http://matplotlib.sourceforge.net/examples/api/scatter_piecharts.html)上创建一个`little_pie`函数，它将在任意位置绘制小饼图。

```
from pylab import *
import math
import numpy as np

def little_pie(breakdown,location,size):
    breakdown = [0] + list(np.cumsum(breakdown)* 1.0 / sum(breakdown))
    for i in xrange(len(breakdown)-1):
        x = [0] + np.cos(np.linspace(2 * math.pi * breakdown[i], 2 * math.pi *    
                          breakdown[i+1], 20)).tolist()
        y = [0] + np.sin(np.linspace(2 * math.pi * breakdown[i], 2 * math.pi * 
                          breakdown[i+1], 20)).tolist()
        xy = zip(x,y)
        scatter( location[0], location[1], marker=(xy,0), s=size, facecolor=
               ['gold','yellow', 'orange', 'red','purple','indigo','violet'][i%7])

figure(1, figsize=(6,6))

little_pie([10,3,7],(1,1),600)
little_pie([10,27,4,8,4,5,6,17,33],(-1,1),800)

fracs = [10, 8, 7, 10]
explode=(0, 0, 0.1, 0)
pie(fracs, explode=explode, autopct='%1.1f%%')
show() 
```

![在此处输入图像描述](../Images/bdacd991fc2a6ce090c840d54ebeec98.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T17:04:41.267

我还没用过，但你可以试试：[PyGal](http://pygal.org/)

特别是：http: [//pygal.org/en/stable/documentation/types/pie.html#multi-series-pie](http://pygal.org/en/stable/documentation/types/pie.html#multi-series-pie)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-14T19:21:47.780

我找不到解决方案，所以我自己破解了。我在 matplotlib.patches 模块中使用了 ConnectionPatch 对象。这允许您在同一图中的不同轴之间绘制线条。下面将在左侧创建一个饼图，在右侧创建一个堆积条形图：

```
import matplotlib.pyplot as plt
from matplotlib.patches import ConnectionPatch
import numpy as np
import math

# style choice
plt.style.use('fivethirtyeight')

# make figure and assign axis objects
fig = plt.figure(figsize=(15,7.5))
ax1 = fig.add_subplot(121)
ax2 = fig.add_subplot(122)

# pie chart parameters
ratios = [.4, .56, .04]
labels = ['Approve', 'Disapprove', 'Undecided']
explode=[0.1,0,0]
# rotate so that first wedge is split by the x-axis
angle = -180*ratios[0]
ax1.pie(ratios, autopct='%1.1f%%', startangle=angle,
        labels=labels,explode=explode )

# bar chart parameters

xpos = 0
bottom = 0
ratios = [.33, .54, .07, .06]
width = .2
colors = ['y','m','#99ff99','#ffcc99']

for j in range(len(ratios)):
    height = ratios[j]
    ax2.bar(xpos, height, width, bottom=bottom, color=colors[j])
    ypos = bottom + ax2.patches[j].get_height()/2
    bottom += height
    ax2.text(xpos,ypos, "%d%%" %
        (ax2.patches[j].get_height()*100), ha='center')

plt.title('Gender of approvers')
plt.legend(('Women', 'Men', 'Gender Neutral', 'Alien'))
plt.axis('off')
plt.xlim(-2.5*width, 2.5*width) 
```

然后我添加两条线，分别将饼图的第一个楔形与堆积条形图的顶部和底部连接起来：

```
# use ConnectionPatch to draw lines between the two plots
# get the wedge data for the first group
theta1, theta2 = ax1.patches[0].theta1, ax1.patches[0].theta2
center, r = ax1.patches[0].center, ax1.patches[0].r
bar_height = sum([item.get_height() for item in ax2.patches])
x = r*np.cos(math.pi/180*theta2)+center[0]
y = np.sin(math.pi/180*theta2)+center[1]
con = ConnectionPatch(xyA=(-width/2,bar_height), xyB=(x,y),
    coordsA="data", coordsB="data", axesA=ax2, axesB=ax1)
con.set_color([0,0,0])
con.set_linewidth(4)
ax2.add_artist(con)

x = r*np.cos(math.pi/180*theta1)+center[0]
y = np.sin(math.pi/180*theta1)+center[1]
con = ConnectionPatch(xyA=(-width/2,0), xyB=(x,y),
    coordsA="data", coordsB="data", axesA=ax2, axesB=ax1)
con.set_color([0,0,0])
ax2.add_artist(con)
con.set_linewidth(4)

plt.show() 
```

这是情节： [![饼图示例中的条形图](../Images/66d7c3db37a7bba289fb60d12f24c568.png)](https://i.stack.imgur.com/FRm9H.png)

# floating-point - Go 中的 math.Mod 返回整数部分而不是浮点余数

> ID：10650095
> 
> 赞同：5
> 
> 时间：2012-05-18T09:32:05.993
> 
> 标签：floating-point, go, division, modulo

Golang 的**math.Mod(10, 4)**返回 2 - 即。除法结果2.5的整数部分——但它不应该是“浮点余数”，即0.5吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-18T09:36:28.593

结果是正确的。[math.Mod](https://golang.org/pkg/math/#Mod)返回余数，在这种情况下实际上是 2。它等效于 % 运算符，但用于浮点数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-24T19:45:28.937

如果您在进行浮点除法后查找小数点后的值，据我所知，您会想要这样的东西：

```
double A = 10.0;
double B = 4.0;
double divResult = A / B;
double fractional = divResult % 1.0;
//prints "10.0 / 4.0 fractional remainder: 0.5"
System.out.printf("%f / %f fractional remainder: %f", A , B, fractional); 
```

# javascript - About Jeditable jquery plugin in the context of Backbone.View

> ID：10650105
> 
> 赞同：0
> 
> 时间：2012-05-18T09:32:49.400
> 
> 标签：javascript, jquery, jquery-plugins, backbone.js

Using the [Jeditable](http://www.appelsiini.net/projects/jeditable) plugin,
is possible to create, very easily, a submit and cancel button.
Here's a very simple code example (*)

Now let's suppose in `MyView` (Backbone.View) I would like to trigger the event click on the button submit which is created by Jeditable.
Here's the code regarding the `Backbone.View` (**).

When I trigger the event `"click .submitBtn"` the value of $('.edit_area').text is empty string. In order to fix this issue I implemented the following code (* **)

Do you have some smart idea to improve the code of (* **)? I don't like callback using `setTimeout`.

* * *

(*)

```
 $('.edit_area').editable(function(value, settings) {
        return(value);
     }, { 
     type      : 'textarea',
     submit    : '<div class="submitBtn">Ok</div>'
     cancel    : '<div class="submitBtn">Undo</div>'
 }); 
```

* * *

(**)

```
MyView = Backbone.View.extend({
        events: {
            "click .edit_area"          : "edit",
            "click .submitBtn"          : "close"
        },
}); 
```

* * *

(* **)

```
close: function close () 
{ 
    var that = this;
    console.log($(this.el).find("[data-tid='editable']").text()); // empty string
    setTimeout(function () {
        console.log($(that.el).find("[data-tid='editable']").text()); // update string
        that.model.save({
            name: $(that.el).find("[data-tid='editable']").text()
        });
    }, 0);
}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:09:40.903

在初始化函数中

```
$('.edit_area').editable(this.close, { 
         type    : 'textarea',
         submit  : 'OK',
}); 
```

关闭函数定义

```
close:function(value, settings) { 
    this.model.save({
        name: value
    });
  }); 
```

### 完整代码

```
var editableview = Backbone.View.extend({
    initialize: function () {
        _.bind(this.close, this);
    },
    render: function () {
        $(this.el).find('.edit_area').editable(this.close, {
            type: 'textarea',
            submit: '<div class="submitBtn">Ok</div>'
            cancel: '<div class="submitBtn">Undo</div>'
        });
    },
    close: function (value, settings) {
        this.model.save({
            name: value
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T03:26:55.180

Var That = 这是错误的。这是 DOM 而不是主干视图。你可以做：

```
$('.edit_area').editable(this.close, { 
         type    : 'textarea',
         submit  : 'OK',
         submitdata: {view: this},
}); 
```

散列中的“视图”将是主干视图。可以在close函数中访问。

```
close:function(value, settings) { 
    settings.submitdata.view.model.save({
        name: value
    });
}); 
```

# spring - Spring / AOP: Best way to implement an activities log in the database

> ID：10650107
> 
> 赞同：3
> 
> 时间：2012-05-18T09:32:55.003
> 
> 标签：spring, aop, aspectj

I have been going through some Spring / AOP tutorials and have somewhat familiarized myself with the related concepts.

Now coming to my requirements, I need to create an Activities Log implementation which will save the activities of a logged-in user in the DB which can range from applying for a service or creating new users in case of `Admin` users, etc. On invocation of any method having an annotation (say `@ActivityLog`), this information is to be persisted in the form of `actorId`, `actionComment`, `actionTime`, `actedUponId`, ... etc.

Now, if I create a POJO class (that maps to a `ActivityLog` table in the DB) and want to save this data from inside the `Advice` (preferably using the same transaction as the method, method uses `@Transactional` annotation), how do I actually populate the variables in this POJO?? I can probably get the `actorId` from the session object & `actionTime` can simply be `new Date()` but how about the dynamic values for `actionComment` / `actedUponId`?

Any help will be brilliant! (BTW, I have a requirement to not use Hibernate Interceptors.)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T15:25:33.107

这是一个完整的例子：

```
@Aspect
@Component
public class WebMethodAuditor {

protected final Log logger = LogFactory.getLog(getClass());

public static final String DATE_FORMAT_NOW = "yyyy-MM-dd HH:mm:ss";

@Autowired
AuditRecordDAO auditRecordDAO; 

@Before("execution(* com.mycontrollers.*.*(..))")
public void beforeWebMethodExecution(JoinPoint joinPoint) {
    Object[] args = joinPoint.getArgs();
    String methodName = joinPoint.getSignature().getName();
    User principal = (User)SecurityContextHolder.getContext().getAuthentication().getPrincipal();
    Timestamp timestamp = new Timestamp(new java.util.Date().getTime());
    // only log those methods called by an end user
    if(principal.getUsername() != null) {
        for(Object o : args) {
            Boolean doInspect = true;
            if(o instanceof ServletRequestDataBinder) doInspect = false;
            if(o instanceof ExtendedModelMap) doInspect = false;
            if(doInspect) {
                if(o instanceof BaseForm ) {
                    // only show form objects
                    AuditRecord ar = new AuditRecord();
                    ar.setUsername(principal.getUsername());
                    ar.setClazz(o.getClass().getCanonicalName());
                    ar.setMethod(methodName);
                    ar.setAsString(o.toString());
                    ar.setAudit_timestamp(timestamp);
                    auditRecordDAO.save(ar);
                }
            }
        }
    }
}

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T16:04:01.350

如果您希望从带注释的方法的参数中获取`actionComment`and `actedUponId`from 参数（假设它们都是字符串），您可以将绑定术语添加到您的`@Around`切入点，如下所示：

```
@Around("@annotation(ActivityLog) && args(actionComment,actedUponId)")
public Object logActivity(ProceedingJoinPoint pjp,
        String actionComment, String actedUponId) throws Throwable {
    // ... get other values from context, etc. ...
    // ... write to log ...
    pjp.proceed();
} 
```

切入点中的`args`绑定可以在部分指定的模式下使用，以防有其他关于您不感兴趣的参数，并且由于方面本身是一个 bean，它可以连接到正在发生的所有其他事情中正常的方式。

请注意，如果您在相同的方法调用中混合使用声明性事务管理，则必须使方面的顺序正确。这部分是通过使切面 bean 也实现 Spring`Ordered`接口，并通过`order`to 属性控制事务的优先级来完成的`<tx:annotation-driven/>`。（如果这是不可能的，你将被迫通过直接事务处理来做一些聪明的事情；这是一个更痛苦的选择来正确......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T09:46:15.190

您将在您的建议中获得对 的引用`org.aspectj.lang.JoinPoint`。您可以使用 . 获取正在执行的目标方法的名称。`toShortString()`您可以拥有一个包含条目的循环/属性文件。此`method-name=comments`注释可以填充到`POJO.actionComment`.method-name 中设置为`POJO.actedUponId`。

如果建议数据访问方法并且服务方法使用@Transactional，我希望建议应该在同一个事务中运行。

# ios - Custom UITableViewCell Button and RowSelected (iOS/Monotouch)

> ID：10650115
> 
> 赞同：2
> 
> 时间：2012-05-18T09:33:25.273
> 
> 标签：ios, uitableview, xamarin.ios, uibutton

I have a 'Load More' `UIButton` inside a custom `UITableViewCell`. My table also uses a Delegate. I want to reload the table data when this button is clicked. I have noticed that when I click the button, nothing happens. But when I click on the area around the button i.e. the actual Cell, the Delegate gets the RowSelected event. I tried using `SetSelected(true,false);` from the button's touch up inside event to see if it would fire the RowSelected event for the delegate, but it didn't.

Can anyone explain me how I can make a button click for a Custom Table cell fire the actual Row Selected event? If this isn't a viable option, is there a better way to 'Load more data' other than placing the button inside a custom table view cell?

Thanks!

**UPDATE:** I do use ContentView.AddSubView as shown in the code below. Please note I'm using Monotouch, but the logic is the same:

```
 public LoadMoreCell (string reuseCellIdentifier)
        :base(UITableViewCellStyle.Default, reuseCellIdentifier)
    {
        SelectionStyle = UITableViewCellSelectionStyle.None;

        _btnLoadMore = UIButton.FromType(UIButtonType.RoundedRect);
        _btnLoadMore.Frame = new RectangleF(10,5,300,30);
        _btnLoadMore.SetTitle("Load More", UIControlState.Normal);
        _btnLoadMore.UserInteractionEnabled = true;
        ContentView.AddSubview(_btnLoadMore);

    } 
```

I have a TableDelegate that has a RowSelected method where I reload the data...however, the RowSelected only gets fired when I click the actual row.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:55:38.910

I think you might have added the uibutton as

```
[self addSubView:yourButton]; 
```

instead use :-

```
[self.contentView addSubview:yourButton]; 
```

and all the other controls of your custom cell. Do this in the initializer of your custom cell :-

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:36:52.070

为您的表制作一个自定义 UITableViewDataSource，当您点击“加载更多”按钮时，调用此数据源的方法以将其他数据添加到数据源列表中，将此数据源添加到您的表中并确保重新加载桌子

```
this.tblData.ReloadData (); 
```

# c# - Capture AJAX responses like Firebug with the c# webbrowser control

> ID：10650117
> 
> 赞同：1
> 
> 时间：2012-05-18T09:33:34.067
> 
> 标签：c#, .net, ajax, browser, firebug

I only want to capture the returned AJAX Response of a website. I don't want to wait of the completed manipulated DOM Document. I want to capture the response like the Firebug console.

regards Chris

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T01:05:51.147

也许使用[Fiddler Core](http://www.fiddler2.com/fiddler/core/)，这有点超重的解决方案，但效果很好。

# ninject - ASP.NET MVC 4 和 Ninject InRequestScope 与 RavenDb IDocumentSession 在嵌入式 HttpServer 模式下

> ID：10650124
> 
> 赞同：1
> 
> 时间：2012-05-18T09:34:00.670
> 
> 标签：ninject, ravendb, asp.net-mvc-4

我在使用 Ninject 的`InRequestScope`扩展时遇到了一些问题。看起来我`IDocumentSession`在同一个请求中获得了新的实例。我使用 ASP.NET MVC 4 beta 将 RavenDb 作为嵌入式 HttpServer 运行。我有一个如下所示的引导程序类：

```
public static class ApplicationBootstrapper
{
    private static IKernel _kernel;

private static readonly IDocumentStore DocumentStore = new EmbeddableDocumentStore
{
    DataDirectory  = @"App_Data\RavenDb",
    UseEmbeddedHttpServer = true

}.Initialize();

public static void Initialize()
{
    DocumentStore.Conventions.IdentityPartsSeparator = "-";

    _kernel = new StandardKernel();

    _kernel.Bind<IUserService>().To<UserService>();
    _kernel.Bind<IDocumentStore>().ToConstant(DocumentStore);

    _kernel.Bind<IDocumentSession>().ToMethod(x =>
    {
        var store = x.Kernel.Get<IDocumentStore>();
        return store.OpenSession();
    }).InRequestScope();
}

public static IKernel Kernel
{
    get { return _kernel; }
} 
```

}

我尝试将范围设置为`InSingeltonScope`. 在那种情况下，我确实得到了相同的`IDocumentSession`结果，但这当然不是我想要的。关于我在这里可能做错的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T23:15:51.750

InRequestScope 需要 Web 扩展之一。在您的情况下，您应该安装和使用 Ninject.MVC3 而不是自己的引导程序。

# mysql - 是否可以格式化mysql十进制值输出？

> ID：10650128
> 
> 赞同：0
> 
> 时间：2012-05-18T09:34:14.787
> 
> 标签：mysql

在 MySQL 中，我存储了一个值`decimal(11,2)`，当我进行选择时，它返回以下格式的值：

```
10.00
100.00 
```

是否可以以这种格式返回这些值？

```
10,00
100,00 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T09:36:31.697

```
select replace(cast(100.00 as char), '.', ',') 
```

# ipad - How to downgrade iPad 2 from iOS 5.1 to 5.0 for development

> ID：10650129
> 
> 赞同：2
> 
> 时间：2012-05-18T09:34:14.867
> 
> 标签：ipad, deployment, ios5.1, downgrade, ios5

I am developing an Application for iPad (iOS)on Xcode 4.2 on MAC OS X 10.6.5 i.e snow leopard and apple has not released sdk for ios 5.1 for snow leopard.

i was using my iPad for testing it was working great with ios 5.0.1.

i just recently upgrade iPad to 5.1 and now i am unable to deploy code on iPad , i checked the registration of my device for development on development.apple.com and its still exist.

i even checked in Organizer-Devices and in that window it show me following message :

```
The version of iOS on “My iPad” does not match any of the versions of iOS supported for development with this installation of the iOS SDK. Please restore the device to a version of the OS listed below, or update to the latest version of the iOS SDK; which is available here.

OS Installed on My iPad
5.1.1 (9B206)

Xcode Supported iOS Versions
Latest
5.0 (9A334)
4.3 (8F190)
4.3
4.2 
```

can anybody help me with this.

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:38:04.453

单击左上角的项目名称，然后单击目标，然后单击“构建设置”选项卡

在所有选项中都有一个“iOS部署目标”我认为这就是你想要的^^

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T23:22:22.340

我遇到过同样的问题。原来你必须从 App Store 下载/安装最新版本的 Xcode。

[https://developer.apple.com/devcenter/ios/checklist/](https://developer.apple.com/devcenter/ios/checklist/)

# ruby-on-rails - 无法安装特定的 gem

> ID：10650135
> 
> 赞同：2
> 
> 时间：2012-05-18T09:34:34.300
> 
> 标签：ruby-on-rails, macos, sqlite

我有一个现有的 Ruby On Rails 项目，我正在尝试启动并运行，但是当我尝试迁移数据库时它说：

```
$ rake db:migrate 

Could not find json-1.6.5 in any of the sources 
```

然后当我尝试安装特定的 gem 时，它失败了！

```
$ gem install json -v '1.6.5'

Fetching: json-1.6.5.gem (100%)
Building native extensions.  This could take a while...
ERROR:  Error installing json:
        ERROR: Failed to build gem native extension.

        /Users/dev/.rvm/rubies/ruby-1.9.2-p136/bin/ruby extconf.rb
creating Makefile

make
sh: make: command not found

Gem files will remain installed in /Users/dev/.rvm/gems/ruby-1.9.2-p136@rails3/gems/json-1.6.5 for inspection.
Results logged to /Users/dev/.rvm/gems/ruby-1.9.2-p136@rails3/gems/json-1.6.5/ext/json/ext/parser/gem_make.out 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:00:06.990

看起来您缺少一些命令行工具。

验证您是否已安装 make

```
$ whereis make 
```

应该返回类似：

```
/usr/bin/make 
```

和

```
$ make -v 
```

应该类似于：

```
GNU Make 3.81
Copyright (C) 2006  Free Software Foundation, Inc.
This is free software; see the source for copying conditions.
There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE.

This program built for i386-apple-darwin11.0 
```

如果你没有看到这样的东西，也许你应该看看这篇文章[https://stackoverflow.com/a/10217910/335523](https://stackoverflow.com/a/10217910/335523)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:43:31.220

我认为您需要为ruby安装系统依赖包**libjson-** ruby。安装此软件包将解决此错误。

# c# - 等待 BackgroundWorker 完成？

> ID：10650137
> 
> 赞同：1
> 
> 时间：2012-05-18T09:34:36.327
> 
> 标签：c#, .net, multithreading, visual-studio-2010, backgroundworker

我有 2 个异步进程*需要*一个接一个地调用（一个是 XML 创建`backgroundworker`，另一个是使用在第一个进程中创建的 XML 文件的稀有 BW）。这些线程的主要原因是停止 UI 冻结并通过进度条提供状态更新 - 因为这种同步方法是不可取的/不可能的。

```
if (!CreateXMLBW.IsBusy)
{
CreateXMLBW.RunWorkerAsync("");
}
if (!CreateRarBW.IsBusy)
{
CreateRarBW.RunWorkerAsync();
}
```

我不能将第二个 BW 放在第一个的完成事件中，因为这些过程可以单独使用，因此如果我只想创建 XML 文件，我可以这样做。

我尝试过使用`AutoResetEvent`，`WaitOne`但这（无论出于何种原因）仍然不起作用。

有没有其他方法可以在不冻结主 UI 线程的情况下等待 BW 完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:39:57.240

如果你不想阻塞 UI 直到等待事件（所以我*想*你会做点什么）你可以在结束时引发一个事件`DoWork()`，并且 UI 线程可以接收它。

如果您使用的是 4.0 并且可以避免使用 BackgroundWorker，则可以使用 TPL 中的[Task.ContinueWith](http://msdn.microsoft.com/en-us/library/dd270696.aspx)。

伪*代码*可能如下所示：

```
 Action action =(() => DoWorkMethod());
   Task.Factory.StartNew(() => action()).ContinueWith(()=>CallAfterComplete()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T09:44:57.217

您还可以使用本例中的[任务](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskfactory.aspx)：

```
class Program
{
    static XElement CreateXml()
    {
        System.Threading.Thread.Sleep(1000);
        return XElement.Parse(@"<FooBar>Hi!</FooBar>");
    }

    static void ProceedXml(XElement xml)
    {
        System.Threading.Thread.Sleep(1000);
        Console.WriteLine(xml.ToString());
    }

    public static void Main()
    {
        Task.Factory.StartNew<XElement>(CreateXml)
                    .ContinueWith(t => ProceedXml(t.Result));
        Console.ReadKey();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T10:25:40.947

您的场景正是`Task`设计的目的。在您的特定情况下，您的代码可能如下所示：

```
public delegate void UpdateUI(int progress);

private void RunOneAfterAnotherAsync()
{
    Task<XmlElement> task = Task.Factory.StartNew<XmlElement>(CreateXMLBW);
    task.ContinueWith(CreateRarBW);
}

private XmlElement CreateXMLBW()
{
    // your code

    // progress
    progressBar1.Invoke((UpdateUI)UpdateProgressBar, new object[] {progressValue});

    // result
    XmlDocument doc = new XmlDocument();
    return doc.CreateElement("element");
}

private void CreateRarBW(Task<XmlElement> task)
{
    CreateRarBW(task.Result);
}

private void CreateRarBW(XmlElement arg)
{
    // your code
}

public void UpdateProgressBar(int value)
{
    this.progressBar1.Value = value;
} 
```

`RunOneAfterAnotherAsync`没有阻塞，您的 2 个方法一个接一个地异步运行。`CreateRarBW`仅在`CreateXMLBW`无异常结束时运行，但您可以通过在`ContinueWith`.

您可以做的比这个示例显示的要多得多——我鼓励您探索[Task](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)类。

**编辑**

我稍微扩展了这个例子，将第一个任务传递的结果合并到第二个任务中。还添加了 UI 进度示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T09:46:52.140

您的 UI 可以处理第一个 BW 上的[RunWorkerCompleted](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.runworkercompleted%28v=vs.80%29.aspx)事件并调用第二个 BW。

# android - 当我在android中触摸它时如何在屏幕中间禁用设置选择的项目（画廊）

> ID：10650138
> 
> 赞同：0
> 
> 时间：2012-05-18T09:34:40.457
> 
> 标签：android, android-widget

天！

我想禁用在galler选定项目中间的设置。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T17:19:16.120

非常感谢您的帮助！

我自己找到了。如果您甚至需要在图库小部件中间禁用自动居中选定项目，则需要为图库添加下一个方法：

```
@Override
public boolean onSingleTapUp(MotionEvent e) {
    setSelection(getSelectedItemPosition());
    return true;
} 
```

# javascript - Internet Explorer 中的水平导航

> ID：10650139
> 
> 赞同：0
> 
> 时间：2012-05-18T09:34:45.150
> 
> 标签：javascript, css, internet-explorer

我制作了一个带有水平导航、带有水平滑块的简单菜单的网站。我的问题是，在 IE 中，单击元素时，滑块工作（水平），但 IE 垂直跳转到锚点。

问题没有出现在菜单的第一项上。它也不在主导航菜单中，而是在子菜单中。

你可以在这里看到我的问题：http: [//matpreau.fr/test_limo/index.php](http://matpreau.fr/test_limo/index.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:37:58.193

您的问题是`href="#cars"`链接上存在锚点。尝试替换为页面中某些元素的 ID 不存在的某个锚点（如`href="#null"`），或替换为`href="javascript:void(0)"`.

# javascript - MIX 11 淘汰赛代码示例和我的错误

> ID：10650142
> 
> 赞同：0
> 
> 时间：2012-05-18T09:34:59.467
> 
> 标签：javascript, knockout.js

我从这个视频中输入代码示例：http: [//channel9.msdn.com/Events/MIX/MIX11/FRM08](http://channel9.msdn.com/Events/MIX/MIX11/FRM08)

但这是行不通的。错字或其他错误在哪里？我的源代码副本可在[http://jsfiddle.net/fFedK/](http://jsfiddle.net/fFedK/)

HTML：

```
<span data-bind="text:firstName"></span><br /><br />
<input data-bind="value:firstName, valueUpdate: 'afterkeydown'" /><br /><br />

<span data-bind="text:lastName"></span><br /><br /><br />
<input data-bind="value:lastName, valueUpdate: 'afterkeydown'" /><br /><br />

<span data-bind="text:fullName"></span><br /><br />

<h2>Friends</h2>

<div data-bind="template: 'friendsTemplate'"></div>

<script id="friendsTemplate" type="text/html">
    <ul>
        {{each(index, friend) friends}}
            <li> ${ friend.name } </li>
        {{/each}}

    </ul>

</script>​ 
```

脚本代码：

```
function friend(name) {
    return {
        name: ko.observable(name)
    }
}

var viewModel = {
    firstName : ko.observable("Mike"),
    lastName : ko.observable("Rassel"),

    friends : ko.observableArray([new friend("Steve"), new friend("Annie")])
}

//viewModel.fullName = ko.computed(function () { return this.firstName() + " " + this.lastName(); }, viewModel);

ko.applyBindings(viewModel); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T10:04:43.857

我已经修复了你的 jsFiddle：

[http://jsfiddle.net/qHhEV/4/](http://jsfiddle.net/qHhEV/4/)

该示例使用的是旧的 jQuery tmpl 语法，该语法已被大量弃用，因此我对其进行了更新以使用淘汰本机模板：

```
<script id="friendsTemplate" type="text/html">
    <ul>
        <!-- ko foreach: friends -->
        <li data-bind="text: name"></li>     
        <!-- /ko -->
    </ul>

</script> 
```

我还修复了一些语法错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T10:07:17.923

该示例依赖于 jquery 和 jquery-tmpl 库。

所以你的页面必须按以下顺序加载 js 库： 1\. Jquery 2\. Jquery-tmpl 3\. Knockout.js

我已经链接到以下小提琴，它可以正常工作。无需更改代码：[JsFiddle](http://jsfiddle.net/LfFjn/1/)

但是，是的，正如另一个答案所指出的，应该使用更新的模板机制。jquery-tmpl 库不再处于开发阶段。

您可以将模板与 foreach 绑定一起避免。总的来说，我认为这更简洁： [JsFiddle](http://jsfiddle.net/LfFjn/2/)

```
<ul data-bind="foreach: friends">
    <li data-bind="text: name"></li>
</ul> 
```

# javascript - 在字符串中搜索 http:// 和 https://

> ID：10650144
> 
> 赞同：1
> 
> 时间：2012-05-18T09:35:01.573
> 
> 标签：javascript, regex

我想对`http://`每个不以它开头的 URL 进行预处理，我使用了这个：

```
if (val.search('http://') === -1) {
    val = 'http://' + val;  
} 
```

问题是它附加到以 I want to ignore both和`http://`开头的 URL 。`https//`
`http://``https://`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T09:36:45.657

```
if (val.indexOf('http://') === -1 && val.indexOf('https://') === -1) {
    val = 'http://' + val;
} 
```

`regex`方法是：

```
if (!val.search(/^http[s]?:\/\//)){
    val = 'http://' + val;        
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T09:37:21.177

```
if (val.indexOf('http://') === -1 && val.indexOf('https://') === -1) {
    val = 'http://' + val;
} 
```

您还可以使用正则表达式：

```
if(!/^https?:\/\//.test(val)) {
    val = 'http://' + val;
} 
```

# arrays - postgresql：任何子查询返回数组

> ID：10650145
> 
> 赞同：3
> 
> 时间：2012-05-18T09:35:09.003
> 
> 标签：arrays, postgresql, subquery, any

我有一个 user_lists 表，其中包含一个整数 [] 类型的 user_list 列。

我正在尝试执行此查询，这似乎足够基本：

`select id, alias from users where id = ANY(select user_list from user_lists where id = 2 limit 1);`

它给出了这个错误：

错误：运算符不存在：integer = integer[]
提示：没有运算符匹配给定的名称和参数类型。您可能需要添加显式类型转换。

我正在使用 postgres 8.3.11。升级不是一种选择。

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T09:57:25.170

试试这个：

```
select id, alias from users 
where (select user_list from user_lists where id = 2 limit 1) 
@> ARRAY[id]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T11:03:36.207

您也可以尝试这样的事情（应该在 8.3 上工作，手头没有）：

```
SELECT u.id, u.alias 
FROM users u JOIN user_lists ul ON u.id = ANY(ul.user_list) 
WHERE ul.id = 2; 
```

哦，你错过了一些错误修复（8.3.18 是当前版本），我希望 8.3 很快就会结束生命，所以升级确实需要在明年左右成为一个选项。

# python - 向 Google 电子表格添加行时出现 TypeError（使用 Python）

> ID：10650146
> 
> 赞同：1
> 
> 时间：2012-05-18T09:35:09.300
> 
> 标签：python, gdata, google-sheets, google-spreadsheet-api

我正在尝试使用以下方法在电子表格中简单地插入一行：

```
# this is how I create the spreadsheet document
doc_client = getDocAPIService(user_id) # a separate function handles oauth and returns the doc client
doc = gdata.docs.data.Resource(type='spreadsheet', title='test')
doc = doc_client.CreateResource(doc)
spreadsheet_key = doc.GetId().split("%3A")[1]

# I then try to manipulate the spreadsheet
fields = {'test': 'test'}
sheet_client = getSpreadhseetAPIService() # again, a separate function handles oauth
entry = sheet_client.InsertRow(fields, spreadsheet_key, wksht_id='od6') 
```

我可以很好地添加工作表并获取提要等，但添加一行会产生此错误：

```
TypeError: unbound method _AddMembersToElementTree() must be called with ExtensionContainer instance as first argument (got SpreadsheetsList instance instead) 
```

这些是获取客户端和处理 oauth 的辅助函数，以防万一：

```
def getDocAPIService(username):
    two_legged_oauth_token = gdata.gauth.TwoLeggedOAuthHmacToken(
        config.OAUTH_CONSUMER_KEY, config.OAUTH_CONSUMER_SECRET, username)
    client_docs = MyDocsClient(source="myapp")
    client_docs.auth_token = two_legged_oauth_token
    client_docs.ssl = True
    client_docs.http_client.debug = True
    client_docs.http_client.deadline = 30
    return client_docs

def getSpreadhseetAPIService():
    gdocs = gdata.spreadsheet.service.SpreadsheetsService(source="myapp")
    gdocs.SetOAuthInputParameters(gdata.auth.OAuthSignatureMethod.HMAC_SHA1, config.OAUTH_CONSUMER_KEY,
                                  consumer_secret=config.OAUTH_CONSUMER_SECRET)
    gdata.alt.appengine.run_on_appengine(gdocs)
    return gdocs 
```

这是完整的追溯：

```
Traceback (most recent call last):
  File "/path_to_project/tornado/web.py", line 954, in _execute
    getattr(self, self.request.method.lower())(*args, **kwargs)
  File "/path_to_project/tornado/web.py", line 1667, in wrapper
    return method(self, *args, **kwargs)
  File "/path_to_project/script.py", line 999, in get
    doc = generateSpreadsheetFromTemplate(template, current_user.email())
  File "/path_to_project/utils.py", line 183, in generateSpreadsheetFromTemplate
    entry = sheet_client.InsertRow(fields, spreadsheet_key, wksht_id='od6')
  File "/path_to_project/gdata/spreadsheet/service.py", line 339, in InsertRow
    converter=gdata.spreadsheet.SpreadsheetsListFromString)
  File "/path_to_project/gdata/service.py", line 1236, in Post
    media_source=media_source, converter=converter)
  File "/path_to_project/gdata/service.py", line 1322, in PostOrPut
    headers=extra_headers, url_params=url_params)
  File "/path_to_project/atom/__init__.py", line 93, in optional_warn_function
    return f(*args, **kwargs)
  File "/path_to_project/gdata/atom/service.py", line 176, in request
    content_length = CalculateDataLength(data)
  File "/path_to_project/gdata/atom/service.py", line 736, in CalculateDataLength
    return len(str(data))
  File "/path_to_project/gdata/atom/__init__.py", line 377, in __str__
    return self.ToString()
  File "/path_to_project/gdata/atom/__init__.py", line 374, in ToString
    return ElementTree.tostring(self._ToElementTree(), encoding=string_encoding)
  File "/path_to_project/gdata/atom/__init__.py", line 369, in _ToElementTree
    self._AddMembersToElementTree(new_tree)
  File "/path_to_project/gdata/spreadsheet/__init__.py", line 372, in _AddMembersToElementTree
    atom.ExtensionContainer._AddMembersToElementTree(self, tree)
TypeError: unbound method _AddMembersToElementTree() must be called with ExtensionContainer instance as first argument (got SpreadsheetsList instance instead) 
```

知道为什么会这样吗？

谢谢，

阿比

# android - 当我放置指针/触摸按钮时如何设置按钮的可见/不可见？

> ID：10650151
> 
> 赞同：0
> 
> 时间：2012-05-18T09:35:22.153
> 
> 标签：android, image, button

我正在制作一个应用程序，我想显示图像列表。通常我可以显示图像。我已经用左右导航按钮显示了这些图像。以供参考。当我按下左显示上一个和右按钮显示下一个图像。但实际上我并不总是显示按钮，当我的指针到那里时，它必须可见。否则只有图像必须显示。请问有什么想法..而且我的图像大小都不同，我怎样才能得到模拟器的大小？然后它很容易调整图像大小并设置在可绘制列表中。

![在此处输入图像描述](../Images/141709313a332b67414fc4e8803b34d3.png)

```
 code for left button:
    <Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/bttn"
    android:layout_alignBottom="@+id/bttn"
    android:layout_alignParentRight="true"
    android:onClick="ClickHandler2"
    android:background="@drawable/android_lbutton"
    />
    in drawable/android_lbutton

    <?xml version="1.0" encoding="utf-8"?>
    <selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/timthumb6"
      android:state_pressed="true" />
<item android:drawable="@drawable/timthumb3"
      android:state_focused="true" />
<item android:drawable="@drawable/timthumb8" />
     </selector> 
```

这里 timthumb6,timthumb3,timthumb8 是三个左侧按钮，颜色不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:42:51.197

最初将两个按钮置于不可见状态...并为按钮和图像视图实现 ontouch 侦听器...在按钮的 ontouch 中将其设置为可见..并在 imageview 的 ontouch 中将两个按钮再次设置为不可见。 .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T10:12:54.540

你试过做一个选择器吗？

按=真；焦点=真；可绘制=“箭头”

按=假；焦点=假；可绘制=“透明”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T09:39:03.930

```
Button _button=(Button)findViewById(R.id.button1);
    _button1.setVisibility(View.INVISIBLE); 
```

或者你可以先让它们不可见，然后你可以让它在你想要的任何地方可见

# tomcat - 是否可以更改 JSESSIONID cookie 路径？

> ID：10650152
> 
> 赞同：1
> 
> 时间：2012-05-18T09:35:25.277
> 
> 标签：tomcat, session-cookies, tomcat7

我正在尝试更改 Tomcat 中会话 cookie 路径的路径。在我调用 request.getSession(true) 后，这个 cookie 会自动设置到响应中。问题是我试图添加/更改 Set-Cookie 标头或以某种方式在我的 servlet 中添加另一个 JSESSIONID cookie，但它似乎没有存储在浏览器中。我可以在不更改 Tomcat 代码的情况下执行此操作吗？

谢谢，泰奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T20:07:39.083

会话 cookie 的路径与应用程序的路径相匹配。如果你修改它，你会破坏容器的行为。你真正想要达到什么目的？

# html - 为什么erb模板中的字符串插值失败？

> ID：10650161
> 
> 赞同：8
> 
> 时间：2012-05-18T09:35:58.283
> 
> 标签：html, ruby-on-rails, ruby, erb, string-interpolation

我在 .erb 文件中有以下代码：

```
<% embed='<a href="http://someurl.com/whatever">#{@webcast.name}</a>'%>

<p id="embedCode">
    <pre>
        <code>
            <%= embed %>
        </code>
    </pre>
</p> 
```

锚标记在屏幕上正确显示为文本，而不是呈现为 dom 元素，但是字符串插值失败。html 已成功显示为文本，但未评估 #{@webcast.name}。如果模板中包含 <%= @webcast.name =>，则网络广播名称已成功呈现。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-18T09:37:35.727

因为用单引号分隔的字符串`''`不会被插值。

将您的代码更改为例如：

```
<% embed = "<a href=\"http://someurl.com/whatever\">#{@webcast.name}</a>" %> 
```

或（如果您想避免屏蔽双引号字符`"`）

```
<% embed = %(<a href="http://someurl.com/whatever">#{@webcast.name}</a>) %> 
```

或者只是（感谢[Samy Dindane](https://stackoverflow.com/users/604041/samy-dindane)的提示）：

```
<% embed = "<a href='http://someurl.com/whatever'>#{@webcast.name}</a>" %> 
```

# google-apps-script - 在 Google 表单中验证电子邮件地址

> ID：10650164
> 
> 赞同：6
> 
> 时间：2012-05-18T09:36:00.340
> 
> 标签：google-apps-script, google-forms

我想使用 Google 表单来填充 Google 电子表格。其中一个字段是电子邮件地址，我需要根据我们组织的电子邮件列表验证这一点 - 换句话说，强制人们使用有效和现有的电子邮件地址。

我们的组织使用 Google Apps。该表单将由我们组织中的用户创建，并且只有来自我们组织/域的电子邮件地址才会被视为有效。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-05-28T15:19:15.250

现在您可以在该字段中放置一个正则表达式：

对于电子邮件：

```
[a-zA-Z0-9_\.\+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-\.]+ 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-18T14:53:40.283

您可以使用实验性 Apps Script [Domain Services](https://developers.google.com/apps-script/service_domain) API。这就是我的做法。

```
function isValidEmailInMyDomain(address) {
  var parts = address.split('@');
  if( parts.length != 2 )
    return false;
  if( parts[1] != UserManager.getDomain() )
    return false;
  try {
    UserManager.getUser(parts[0]);
    return true;
  } catch(doesNotExist) {
    return false;
  }
}

function testFunction() { //check the menu View > Logs
  Logger.log(isValidEmailInMyDomain('aEmailIn@yourDomain.com'));
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-26T11:15:16.107

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-02T10:48:00.140

修改后的答案[Romias](https://stackoverflow.com/users/7720/romias) （邮件 - 最小长度 3，域 - 最小长度 2）

```
[a-zA-Z0-9_\.\+-]{3,}@[a-zA-Z0-9-]{2,}\.[a-zA-Z0-9-\.]{2,}
// a@a.a = false 
// aaa@aa.aa = true 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T12:00:25.587

这不是 Google Apps 脚本问题，但是当您创建表单时，您可以选择一个复选框，上面写着“自动收集受访者的用户名”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-11T03:18:29.847

你不需要脚本。只需向问题添加响应验证即可。在第一个字段中，选择“文本”；在第二个字段中，“包含”；在第三个字段中，“@'yourdomain'”——就是这样！

# compiler-construction - 关于如何设计语言的教科书

> ID：10650165
> 
> 赞同：1
> 
> 时间：2012-05-18T09:36:04.473
> 
> 标签：compiler-construction, programming-languages

我正在研究一种脚本语言，并想为我的语言编写一个编译器/解释器。

我想在标准 ML 中做编译器

我现在的问题是，是否有进行这种排序设计过程的“模式”？

作为计算机科学课程的一部分，我从头开始编写了一个 java 编译器，但这有点作弊，因为给出了语言，这意味着给出了参考实现和语法、语法和其他规范。

如果从头开始，只有一个问题域如何开始？

我正在寻找有关该主题的书或教程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T13:50:29.937

用函数式语言构建现代编译器的经典书籍有：

*   [ML 中的现代编译器实现](http://www.cs.princeton.edu/~appel/modern/ml/)
*   [类型和编程语言](http://www.cis.upenn.edu/~bcpierce/tapl/)
*   [实现函数式语言](http://research.microsoft.com/en-us/um/people/simonpj/papers/pj-lester-book/)
*   [编程语言的实践基础](http://www.cs.cmu.edu/~rwh/plbook/book.pdf)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T15:20:23.817

[计算机编程的概念、技术和模型](https://rads.stackoverflow.com/amzn/click/com/0262220695)。这本书不是直接关于如何设计一种语言，而是深入探索一种有趣的语言 (Oz) 的特性、它们如何交互以及它们如何启用各种使用模式和特性。它非常有助于了解各种设计决策和功能的含义。阅读一些这样的书，观察由此产生的语言，并从中进行综合是学习如何设计语言的一种不错的方式。

同样，但更实用的是，[Scala 编程](https://rads.stackoverflow.com/amzn/click/com/0981531644)在解释语言特性如何实现风格方面做得很好。

很多语言设计归根结底是品味和良好的感觉。阅读对现有语言的深入探索是培养和磨练这种品味的好方法。

# php - 如何在 Wordpress 页面上获取文本小部件代码？

> ID：10650167
> 
> 赞同：0
> 
> 时间：2012-05-18T09:36:16.813
> 
> 标签：php, wordpress, widget, sidebar

最近我有一个客户的要求，因为他希望在主页上显示动态侧边栏（文本小部件）内容。因此，无论他在文本框中输入什么，即链接、图像或文本，都应该出现在主页上。

谁能给我提示在主页或任何页面上显示小部件内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:17:58.127

使用这个插件[Widget Logic](http://wordpress.org/extend/plugins/widget-logic/)

该插件为每个小部件提供了一个名为“小部件逻辑”的额外控制字段，可让您控制小部件将出现的页面。文本字段允许您使用 WP 的条件标签或任何通用 PHP 代码。

# extjs - Ext.js 组合框 - 列表问题

> ID：10650173
> 
> 赞同：0
> 
> 时间：2012-05-18T09:36:42.887
> 
> 标签：extjs, extjs4.1

我想创建一个应用程序，其中组合框应如下图所示。但是当我为组合框使用列表时，它看起来像第二张图片。该列表未完全显示 - 它正在被削减。请建议我使用哪个属性？代码如下：

```
items: [{
    xtype: 'combobox',
    fieldLabel: 'Location',
    displayField: 'name',
    forceSelection: true,
    pageSize: 10,
    store: 'SalesOrderManager.store.LocationStore',
    typeAhead: true,
    valueField: 'id',
    id: 'LocationComboBox'
}] 
```

它应该是什么样子：

![期望的输出](../Images/d1d36dddc90b472a1c060a2395889c5d.png)

我得到的是：

![电流输出](../Images/0384e37b0c8f1dd343a1287d5e1f7209.png)

完整的代码可以在[这个 Fiddle](http://jsfiddle.net/7TwDu/)中查看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T22:41:28.087

您是在谈论选择器宽度吗？我想你想要：

```
matchFieldWidth: false,
listConfig: {
    width: 250
} 
```

# objective-c - NSPoint 和 IMKCandidate 窗口放置

> ID：10650176
> 
> 赞同：1
> 
> 时间：2012-05-18T09:36:50.670
> 
> 标签：objective-c, pointers, input-method-kit

我正在使用 inputmethodkit 并尝试在某些文本下方放置一个窗口。

_currentClient 是一个`IMKTextInput`实例

候选人是一个`IMKCandidates`实例

```
// Get the current location to place the window
NSRect tempRect = NSMakeRect(0, 0, 0, 0);
NSDictionary* clientData = [_currentClient attributesForCharacterIndex:0 lineHeightRectangle:&tempRect];
NSPoint* windowInsertionPoint = (NSPoint*)[clientData objectForKey:@"IMKBaseline"];
...
[candidates setCandidateFrameTopLeft:*windowInsertionPoint];
[candidates showCandidates]; 
```

现在，我知道该`windowInsertionPoint`变量很好，当我调试时我可以看到它的值，例如： NSPoint: {647,365}

但是，当我使用它时，候选窗口只显示在屏幕的左下角。我以前没有使用过屏幕放置的东西，因此感谢您的帮助。

如果我将任意静态值传递给`setCandidateFrameTopLeft`，它将被放置在屏幕中。以下作品：

```
[candidates setCandidateFrameTopLeft:NSMakePoint(401, 354)]; 
```

是指针问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T00:58:25.360

好的，解决这个问题的方法是我是个白痴。这是您需要的代码：

```
NSRect tempRect;
NSDictionary* clientData = [_currentClient attributesForCharacterIndex:0 lineHeightRectangle:&tempRect];
NSPoint windowInsertionPoint = NSMakePoint(NSMinX(tempRect), NSMinY(tempRect)); 
```

[IMKTextInput attributesForCharacterIndex](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/IMKTextInput_Protocol/Reference/IMKTextInput_Protocol.html#//apple_ref/doc/uid/TP40006160)的文档说

> lineRect：返回时，一个矩形框出一个像素宽的矩形，其高度与线的高度相同。这个矩形的方向与线的方向相同。

这意味着它将一个 NSRect 返回到您为该`lineHeightRectangle`值传递给它的变量中。重要的一点是，该 NSRect 的位置就是您要搜索的字符的位置。因此，您只需从该矩形中创建一个点并使用 NSMinY 作为 Y 值。矩形只有一个像素宽，因此 X 的 Min/Max 基本相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-09T21:45:18.547

您可能不再有这个问题，但这也适用于未来：

```
 [candidates show:kIMKLocateCandidatesBelowHint]; 
```

# javascript - Jquery悬停但未激活

> ID：10650183
> 
> 赞同：0
> 
> 时间：2012-05-18T09:37:16.840
> 
> 标签：javascript, jquery, drupal-7, hover

我编写了一段代码来让我的垂直导航在图像上产生一个小的淡入/淡出悬停效果。唯一的问题是我不能让主动者不做任何事情。

我想要的只是图像在我的导航中淡入/淡出，但在活动时保持 100% 的不透明度，而不是在悬停时设置动画。下面代码的问题是即使不活动，它们也会动画？

现在我不是 jquery 专家，但这是我想学习的东西，所以任何帮助将不胜感激。

```
 if (!$(".view-sidebar-links .views-row a").hasClass("active")) {
                $(".view-sidebar-links .views-row").hover(
                    function() {
                    $("img", this).fadeTo("fast", 1);;
                },
                function() {
                    $("img", this).fadeTo("fast", 0.33);;
    });
  }; 
```

html

```
 <div class="view-content">

       <div class="views-row views-row-1 views-row-odd views-row-first">
        <h2 class="title"><a href="/alpiniainstitute/about/clinical-devlopment">Clinical devlopment</a></h2>    
        <a href="/alpiniainstitute/about/clinical-devlopment"><img typeof="foaf:Image" src="http://localhost/alpiniainstitute/sites/default/files/styles/sidebar_links/public/images/slideshow/image01.jpg" /></a>
      </div>

      <div class="views-row views-row-2 views-row-even">
       <h2 class="title"><a href="/alpiniainstitute/about/technological-development">Technological development</a></h2>    
       <a href="/alpiniainstitute/about/technological-development"><img typeof="foaf:Image" src="http://localhost/alpiniainstitute/sites/default/files/styles/sidebar_links/public/images/header-images/Screen%20shot%202012-05-11%20at%2010.05.30.png" /></a>
      </div>

      <div class="views-row views-row-3 views-row-odd views-row-last">
       <h2 class="title"><a href="/alpiniainstitute/team" class="active">Our Team</a></h2>    
       <a href="/alpiniainstitute/team" class="active"><img typeof="foaf:Image" src="http://localhost/alpiniainstitute/sites/default/files/styles/sidebar_links/public/images/header-images/team-header-image.jpg" /></a>    
      </div>

    </div> 
```

编辑：

我是如此接近。

```
 $(".views-row").delegate("a:not(.active)", "mouseenter", function() {
      $('img').fadeTo('fast', 1);
    }).delegate("a:not(.active)", "mouseleave", function() {
      $('img').fadeTo('fast', 0.33);
    }); 
```

我已经设法让它工作了，现在你可以看到上面的代码适用于页面上的所有图像。如果我添加 ('img', this) 它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:56:56.897

你的逻辑有点不对。您正在条件中设置事件处理程序，而不是相反（即检查事件处理程序中的条件）。

另外，尝试委托：

```
$('.views-row')
    .on('mouseover', 'a:not(.active)', function () {
        $('img', this).fadeTo('fast', 1);
    })
    .on('mouseout', 'a:not(.active)', function () {
        $('img', this).fadeTo('fast', 0.33);
    }); 
```

这样，如果您的视图行`active`打开/关闭它们的类，您仍然可以动态检查是否运行处理程序，同时还可以最大限度地减少您实际在 DOM 上放置的事件处理程序的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:43:05.363

您可以尝试在 Jquery 中使用 .not('selector')

更新：试试这个：

```
$(".views-row").delegate("a:not(.active)", "mouseenter", function() {
  $(this).find('img').fadeTo('fast', 1);
}).delegate("a:not(.active)", "mouseleave", function() {
  $(this).find('img').fadeTo('fast', 0.33);
}); 
```

# android - Eclipse - 如何将 android sdk 配置为 helios

> ID：10650192
> 
> 赞同：1
> 
> 时间：2012-05-18T09:37:39.980
> 
> 标签：android, eclipse

在我的系统（Windows Xp）中，我首先将 android sdk 集成到 Eclipse indigo。但现在我想将 android sdk 集成到 Eclipse helios。如何做到这一点？我试过了，但我没有。为此，我删除了 eclipse indigo 和相应的 android sdk。之后我下载了 eclipse helios 和 android sdk。打开 eclipse 它会显示 android adk 和 avd manger 图标。它显示有关 android sdk 路径的错误。如何在 eclipse helios 中安装（如新的）android sdk？如何做到这一点，任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:44:44.740

1.  只是为了更改 Eclipse，您不需要删除 Android SDK。您可以在不同版本的 Eclipse 中使用相同的 SDK。
2.  当您说可以看到 SDK Manager 和 AVD Manager 图标时，我假设您已成功安装 ADT。
3.  要更正 Android SDK 路径错误，请转到 Window -> Preferences -> Android。在首选项窗格中，单击 SDK Locations 旁边的 Browse 按钮​​并浏览到您安装 Android SDK 的路径（例如 C:\Android\android-sdk-windows）并单击 Apply

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:46:34.737

您是否在首选项中提供了 android SDK 的路径？如果没有，请转到 Window > Preferences > Android 并提供您的 android SDK 的路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-30T17:03:10.537

在eclipse helios中添加android sdk的简单步骤

Help->Eclipse Market place->Popular Tab->u can find Android Development Tools for Eclipse .. 右边有安装按钮..点击安装！..就这样...

# jquery - fancybox 2：使用 JS 调用所有 iframe？

> ID：10650194
> 
> 赞同：0
> 
> 时间：2012-05-18T09:37:44.447
> 
> 标签：jquery, class, iframe, fancybox

我正在使用带有 iframe 的 Fancybox 2，但我在 JQuery 方面没有经验。我有不同的 iframe 样式类，我想用 JS 做一些常规设置。

我可以调用一个特定的 iframe 类：

```
$(".my_iframe").fancybox({ 
```

所以我需要类似的东西：

```
$(".fancybox.iframe").fancybox({ 
```

在fancybox 2 的官方演示中，描述了“fancybox.iframe”类将类型设置为iframe。这适用于以下html：

```
<a class="fancybox.iframe my_iframe" href="iframe.html" title="test">My Iframe</a> 
```

我想要的是为每个 iframe 设置默认设置，并为某些 iframe 设置一些特定设置，所以我不必为每个更改的类名设置新设置......

谢谢你的帮助！

编辑：

这是我想要的一个例子：

我有两个链接：

```
<li><a class="fancyframe" href="iframe.html" title="Dies ist ein iframe... sehr schön!">Iframe</a></li>
<li><a class="fancyframe my_iframe" href="iframe.html" title="Dies ist ein iframe... sehr schön!">My Iframe</a></li> 
```

还有两个JS：

```
$(".fancyframe").fancybox({
    type : 'iframe',
});

$(".my_iframe").fancybox({
    width       : '75%',
    height      : '75%',
    autoScale   : false,
    // etc...
}); 
```

第二个 (.my_iframe) 应该获得 .fancyframe 的设置（在本例中为类型）。.fancyframe 将成为我默认 iframe 设置的参考。

这可能吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T19:34:34.537

你可以有一个`class`适合你的风格和一个fancybox。您可以跳过课程`fancybox.iframe`并`type`在您的自定义 fancybox 脚本中设置

```
<a class="fancybox my_iframe" ... 
```

其中`fancybox`类用于触发fancybox，而（更改）`my_iframe`类用于样式

然后这个脚本将打开 iframe

```
$(".fancybox").fancybox({
 width: 640, // or whatever
 height: 320,
 type: "iframe"
}); 
```

# java - 使用基于spring注解的配置时如何配置MappingJacksonHttpMessageConverter？

> ID：10650196
> 
> 赞同：31
> 
> 时间：2012-05-18T09:37:51.967
> 
> 标签：java, spring, spring-mvc, annotations, jackson

我不合理地通过注释而不是纯 xml bean 来配置 spring bean，现在我正面临着后果。

我使用配置 REST 通道

```
<mvc:annotation-driven /> 
```

现在我只想简单地将`MappingJacksonHttpMessageConverter`具有非空值的字段配置为输出到 JSON。我尝试了以下方法：

```
<bean id="jsonHttpMessageConverter"
    class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
    <property name="prefixJson" value="false" />
    <property name="supportedMediaTypes" value="application/json" />
    <property name="objectMapper">
        <bean class="org.codehaus.jackson.map.ObjectMapper">
            <property name="serializationInclusion" value="NON_NULL"/>
        </bean>
    </property>
</bean> 
```

bean 被创建，但另一个转换器实例被创建并在通道中使用。所以我尝试了[这个 Stackoverflow question](https://stackoverflow.com/questions/9381665/how-can-we-configure-the-internal-jackson-mapper-when-using-resttemplate)`@Configuration`中`@Bean`描述的方法，但 json 序列化仍然使用它自己的配置。

最后我尝试通过注入映射器

```
@Autowired
private MappingJacksonHttpMessageConverter jacksonConverter; 
```

但我已经结束了`NoSuchBeanDefinitionException`。所以现在我别无选择，因此我在这里寻求任何想法。如何控制和配置框架使用的映射器？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-05-18T09:55:46.583

使用[`WebMvcConfigurer.configureMessageConverters()`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/web/servlet/config/annotation/WebMvcConfigurer.html#configureMessageConverters(java.util.List))方法：

> 将 HttpMessageConverters 配置为使用 [...] 如果没有将消息转换器添加到列表中，则会添加默认转换器。

与`@Configuration`您一起：

```
@Configuration
class MvcConf extends WebMvcConfigurationSupport {
    protected void configureMessageConverters(List<HttpMessageConverter<?>> converters) {
        converters.add(converter());
        addDefaultHttpMessageConverters(converters);
    }

    @Bean
    MappingJacksonHttpMessageConverter converter() {
        MappingJacksonHttpMessageConverter converter = new MappingJacksonHttpMessageConverter()
        //do your customizations here...
        return converter;
    }
} 
```

调用 to`addDefaultHttpMessageConverters()`是必需的，因为使用自定义转换器时不应用默认值。

**重要说明**如果您扩展 WebMvcConfigurationSupport，则 必须删除`@EnableWebMvc`才能配置您的转换器。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-04-19T12:25:43.447

仅在 java 代码中自定义 spring mvc servlet 配置可以通过多种方式完成。

最简单的似乎是扩展您的`@Configuration`带注释的类`WebMvcConfigurerAdapter`：

```
@Configuration
@EnableWebMvc
public class ApplicationSpringConfig extends WebMvcConfigurerAdapter {
    @Override
    public void configureMessageConverters( List<HttpMessageConverter<?>> converters ) {
        converters.add(converter());
    }

    @Bean
    MappingJackson2HttpMessageConverter converter() {
        // [...]
    }
} 
```

请注意，这很像*Tomasz Nurkiewicz*的答案提供的示例。

但是，使用`WebMvcConfigurationSupport`而不是`WebMvcConfigurerAdapter`更适合高级自定义。如果您还需要添加默认转换器，情况就是如此。

请参阅 Spring 文档[自定义提供的配置](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-config-customize)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-01-14T22:20:18.537

以下解决方案适用于 Spring 4.3（非引导），需要`fetch=FetchType.LAZY`通过向 Jackson 转换器添加模块来解决该问题。可以使用类似的技术以任何方式修改转换器，包括删除和重新创建。

```
@Configuration
@EnableWebMvc
public class MvcConfig extends WebMvcConfigurerAdapter {

@Override
public void extendMessageConverters(List<HttpMessageConverter<?>> converters) {

    for (HttpMessageConverter<?> mc : converters){
         if (mc instanceof MappingJackson2HttpMessageConverter || mc instanceof MappingJackson2XmlHttpMessageConverter) {
            ((AbstractJackson2HttpMessageConverter) mc).getObjectMapper().registerModule(new Hibernate5Module());
        }
    }
    return;
 } 
```

在这种情况下，

*   其中`WebMvcConfigurerAdapter`有很多其他配置，我想避免使用另一个配置类。
*   使用`extendMessageConverters`对自动配置的 Jackson 类的启用访问，而不会丢失所有其他消息转换器的配置，这就是`configureMessageConverters`应该做的。
*   使用`registerModule`您可以简单地将所需的内容添加`Hibernate5Module`到现有转换器中。
*   该模块已添加到 JSON 和 XML 处理器中

# http - 使用 J2ME 上传 wav 文件

> ID：10650199
> 
> 赞同：2
> 
> 时间：2012-05-18T09:38:10.257
> 
> 标签：http, java-me, midp, httpconnection, bytearrayoutputstream

我正在尝试使用 j2me httpconnection 将 wav 文件上传到服务器。但是我做不到。它在将字节写入服务器时抛出空指针异常。

示例如下。

在线抛出异常`os.write(postBytes);`。有任何想法的人吗？我上传的文件是`test.pcm`.

```
public String send() throws Exception
{

    form.append("Inside Send()");

    bos = new ByteArrayOutputStream();

try
    {
        form.append("Making connections");
        hc = (HttpConnection) Connector.open(url, Connector.READ_WRITE);
        form.append("length: " + postBytes.length + "");
        hc.setRequestProperty("Content-Length", "100573");
        hc.setRequestProperty("Content-Type", "multipart/form-data; boundary=" + getBoundaryString());
        hc.setRequestMethod(HttpConnection.POST);
        //Content-Length: 27
        os = hc.openOutputStream();
        form.append("Writing bytes to Server" + postBytes);

        try {
            os.write(postBytes);
            os.flush();

            form.append("Uploading done and closing output connection");

            form.append("Waiting for response");
            int ch;
            is = hc.openInputStream();
            while ((ch = is.read()) != -1)
            {
                bos.write(ch);
            }
            form.append("Response wrote to byte array");
            //res = bos.toByteArray();
            res = bos.toString();
        }
        catch(Exception e) {
            form.append("Exception during write: " + e.getMessage());
        }
    }
    catch(Exception e)
    {
        form.append("Expcetion caught1: " + e.getMessage());
        //e.printStackTrace();
    }
    finally
    {
        try
        {
            if(bos != null)
                bos.close();
            if(is != null)
                is.close();
    if(hc != null)
                hc.close();
        }
        catch(Exception e2)
        {
            form.append("Expcetion caught2: " + e2.getMessage());
        }
    }
    return res;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T17:37:51.787

我曾经将文件发送到服务器的类：

```
/*
 * REVISION HISTORY:
 *
 * Date         Author(s)
 * CR           Headline
 * =============================================================================
 * 05/05/2010   Douglas Daniel Del Frari
 * Initial version to Send the Animation Poke to server site.
 * =============================================================================
 * 17/05/2010   Douglas Daniel Del Frari
 * Adding a tip documentation in this class.  
 * =============================================================================
 * 27/05/2010   Douglas Daniel Del Frari
 * Enhancement to try/catch error throw at send method
 * ========================================================================================
 */

import java.io.ByteArrayOutputStream;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.Enumeration;
import java.util.Hashtable;

import javax.microedition.io.Connector;
import javax.microedition.io.HttpConnection;

/**
 * This class encapsulated the Send process of Data to Server Site,
 * using the HTTP protocol.
 * 
 * <p>Example of use: <br><br>
 * 
 * Hashtable params = new Hashtable();
 * params.put("gesture", "1:3,1:3,1:3,1:-3,1:-3,1:-3");
 * params.put("message", "Ola  simone... pessoal! viva o GREMIO!");
 * params.put("sound", "teste.mp3"); // option field
 * params.put("texture", "textura.bmp");
 * String URL = MIDletController.getInstance().getAppProperty(HttpRequest.SERVER_URL_PROPERTY_KEY);
 * HttpRequest req = new HttpRequest(URL, params );
 * byte[] response = req.send();
 */
public class HttpRequest {

    static final String BOUNDARY = "-------BUSINESS-here---V2ymHFg03ehbqgZCaKO6jy";

    public static final String SERVER_URL_PROPERTY_KEY = "ServerURL";

    byte[] postBytes = null;
    String url = null;

    /**
     * This constructor create an object used aim to a file transfer.
     * 
     * @param url
     *            the URL of server
     * @param params
     *            one or more parameters encapsulated on Hashtable object
     * @param fileField
     *            argument to identify of this field
     * @param fileName
     *            the name of file with extension (e.g. audio/amr)
     * @param fileType
     *            the mime type know
     * @param fileBytes
     *            the byte array
     * 
     * @throws Exception
     */
    public HttpRequest(String url, Hashtable params, String fileField,
            String fileName, String fileType, byte[] fileBytes)
            throws Exception {
        this.url = url;

        String boundary = getBoundaryString();
        String boundaryMessage = getBoundaryMessage(boundary, params,
                fileField, fileName, fileType);

        String endBoundary = "\r\n--" + boundary + "--\r\n";
        ByteArrayOutputStream bos = new ByteArrayOutputStream();

        bos.write(boundaryMessage.getBytes());
        bos.write(fileBytes);
        bos.write(endBoundary.getBytes());

        this.postBytes = bos.toByteArray();
        bos.close();
    }

    /**
     * 
     * This constructor create an object used aim to a file transfer.
     * 
     * @param url
     *            the URL of server
     * @param params
     *            one or more parameters encapsulated on Hashtable object
     * 
     * @throws Exception
     *             some problem.
     */
    public HttpRequest(String url, Hashtable params) throws Exception {
        this.url = url;

        String boundary = getBoundaryString();
        String boundaryMessage = getBoundaryMessage(boundary, params);
        String endBoundary = "\r\n--" + boundary + "--\r\n";

        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        bos.write(boundaryMessage.getBytes());
        bos.write(endBoundary.getBytes());

        this.postBytes = bos.toByteArray();
        bos.close();
    }

    /**
     * get the Boundary string
     * @return
     */
    private String getBoundaryString() {
        return BOUNDARY;
    }

    /**
     * 
     * @param boundary
     * @param params
     * @param fileField
     * @param fileName
     * @param fileType
     * @return
     */
    private String getBoundaryMessage(String boundary, Hashtable params,
            String fileField, String fileName, String fileType) {
        StringBuffer res = new StringBuffer("--").append(boundary).append(
                "\r\n");

        Enumeration keys = params.keys();

        while (keys.hasMoreElements()) {
            String key = (String) keys.nextElement();
            String value = (String) params.get(key);

            res.append("Content-Disposition: form-data; name=\"").append(key)
                    .append("\"\r\n").append("\r\n").append(value).append(
                            "\r\n").append("--").append(boundary)
                    .append("\r\n");
        }
        res.append("Content-Disposition: form-data; name=\"").append(fileField)
                .append("\"; filename=\"").append(fileName).append("\"\r\n")
                .append("Content-Type: ").append(fileType).append("\r\n\r\n");

        return res.toString();
    }

    /**
     * 
     * @param boundary
     * @param params
     * @return
     */
    private String getBoundaryMessage(String boundary, Hashtable params) {
        StringBuffer res = new StringBuffer("--").append(boundary).append(
                "\r\n");

        Enumeration keys = params.keys();

        while (keys.hasMoreElements()) {
            String key = (String) keys.nextElement();
            String value = (String) params.get(key);

            res.append("Content-Disposition: form-data; name=\"").append(key)
                    .append("\"\r\n").append("\r\n").append(value).append(
                            "\r\n").append("--").append(boundary)
                    .append("\r\n");
        }

        return res.toString();
    }

    /**
     * Send the data to the URL of Server Site using the POST connection.
     * 
     * @return the response of server.
     * @throws Exception
     */
    public byte[] send() throws Exception {
        HttpConnection hc = null;
        InputStream is = null;
        ByteArrayOutputStream bos = new ByteArrayOutputStream();

        byte[] res = null;

        try {
            hc = (HttpConnection) Connector.open(url);

            hc.setRequestProperty("Content-Type",
                    "multipart/form-data; boundary=" + getBoundaryString());

            hc.setRequestMethod(HttpConnection.POST);

            OutputStream dout = hc.openOutputStream();

            dout.write(postBytes);
            if (dout!=null) {
                dout.close();
                dout = null;
            }

            int ch;
            is = hc.openInputStream();

            while ((ch = is.read()) != -1) {
                bos.write(ch);
            }
            res = bos.toByteArray();
        } catch (Exception e) {
            // if an error occurred connecting to the server.
            throw new Exception(e.getMessage());

        } finally {
            try {
                if (bos != null)
                    bos.close();

                if (is != null)
                    is.close();

                if (hc != null)
                    hc.close();
            } catch (Exception e2) {
                e2.printStackTrace();
            }
        }
        return res;
    }

} 
```

# android - android中Mapview上的双击/长按事件

> ID：10650206
> 
> 赞同：2
> 
> 时间：2012-05-18T09:38:48.187
> 
> 标签：android

我有一个小型地图应用程序。我想在双击/长按屏幕时设置目标标记。我还需要获取地图中点击点的几何位置。请帮忙

# linux - 电子邮件中的 df 不错的输出格式

> ID：10650207
> 
> 赞同：10
> 
> 时间：2012-05-18T09:38:48.563
> 
> 标签：linux, shell

我发送了包含空间使用信息的电子邮件。

`df -Ph | mailx -s "disk usage" mybox@company.com`

但是当我阅读一封电子邮件时，它看起来像这样：

```
Filesystem            Size  Used Avail Use% Mounted on
/dev/sda3          2.0G  372M  1.6G  20% /
tmpfs           32G   12G   20G  38% /dev/shm
/dev/sda1         248M   28M  208M  12% /boot
/dev/mapper/sys-home  4.0G  308M  3.6G   8% /home
/dev/mapper/sys-tmp   2.0G  3.7M  1.9G   1% /tmp
/dev/mapper/sys-rcv   247G  130G  114G  54% /flash_recovery_area
/dev/mapper/sys-usr   4.0G  2.6G  1.4G  66% /usr
/dev/mapper/sys-var   2.0G  291M  1.6G  16% /var
/dev/mapper/orcl-u01  493G  331G  162G  68% /u01
/dev/mapper/orcl-ora  640G  588G   53G  92% /oradata
/dev/sdc1       916G  602G  268G  70% /mnt/backup
/dev/sdb2       516G  241G  250G  50% /oradata/ods 
```

任何想法，我如何预先格式化它以对齐表格中的列？

我希望它的格式很好：

```
Filesystem             Size  Used Avail Use% Mounted on
/dev/sda3               2.0G  372M  1.6G  20% /
tmpfs                    32G   12G   20G  38% /dev/shm
/dev/sda1               248M   28M  208M  12% /boot
/dev/mapper/sys-home    4.0G  308M  3.6G   8% /home
/dev/mapper/sys-tmp     2.0G  3.7M  1.9G   1% /tmp
/dev/mapper/sys-rcv     247G  130G  114G  54% /flash_recovery_area
/dev/mapper/sys-usr     4.0G  2.6G  1.4G  66% /usr
/dev/mapper/sys-var     2.0G  291M  1.6G  16% /var
/dev/mapper/orcl-u01    493G  331G  162G  68% /u01
/dev/mapper/orcl-ora    640G  588G   53G  92% /oradata
/dev/sdc1               916G  602G  268G  70% /mnt/backup
/dev/sdb2               516G  241G  250G  50% /oradata/ods 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-18T18:49:50.223

尝试`column -t`

```
df -Ph | column -t 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T10:10:18.510

万岁`perl`：

```
df -Ph | perl -ne 'chomp; printf "\n%-40s %8s %8s %8s %8s %-20s", split / +/, $_, 6 ; ' 
```

可能会模糊地做你想要的。（数字是列宽，负数表示左对齐。）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-18T09:49:45.517

我将首先验证我的电子邮件程序使用的是固定宽度字体。如果这不是一个选项，也许您可​​以将`df`输出转换为 HTML 并使用`<pre></pre>`标签来触发电子邮件程序使用固定字体。

# asp.net - authorize.net DPM 页面重定向

> ID：10650210
> 
> 赞同：0
> 
> 时间：2012-05-18T09:39:08.533
> 
> 标签：asp.net, authorize.net

我正在使用 SIM 并将用户发送到 Authorizaiton.net 购买东西。但成功交易后我无法访问我们的网站。如何通过响应进行重定向？

## 用户界面代码：

```
<form id="simForm" runat="server" method='post' action='https://test.authorize.net/gateway/transact.dll'>
    <input id="HiddenValue" type="hidden" value="Initial Value" runat="server" />
    <input type='hidden' runat="server" name='x_login' id='x_login' />
    <input type='hidden' runat="server" name='x_amount' id='x_amount' />
    <input type='hidden' runat="server" name='x_description' id='x_description' />
    <input type='hidden' runat="server" name='x_invoice_num' id='x_invoice_num' />
    <input type='hidden' runat="server" name='x_fp_sequence' id='x_fp_sequence' />
    <input type='hidden' runat="server" name='x_fp_timestamp' id='x_fp_timestamp' />
    <input type='hidden' runat="server" name='x_fp_hash' id='x_fp_hash' />
    <input type='hidden' runat="server" name='x_test_request' id='x_test_request' />
    <%--<input type='hidden' runat="server" name='x_relay_response' id='x_relay_response' />
    <input type='hidden' runat="server" name='x_relay_url' id='x_relay_url' />--%>
    <input type='hidden' name='x_show_form' value='PAYMENT_FORM' />
    <input type='submit' value="Make Payment" title="Make Payment" visible="false" runat="server" id='buttonLabel' />
</form> 

       Code Behind :
      protected void Page_Load(object sender, EventArgs e)
{
    // start by setting the static values
    string loginID = "LOGIN ID";
    string transactionKey = "TRANSACTION ID";
    string amount = "19.99";
    string description = "Sample Transaction";
    string label = "Submit Payment"; // The is the label on the 'submit' button
    string testMode = "true";

    // If an amount or description were posted to this page, the defaults are overidden
    if (Request.Form["amount"] != null)
    { amount = Request.Form["amount"]; }
    if (Request.Form["description"] != null)
    { description = Request.Form["description"]; }

    // also check to see if the amount or description were sent using the GET method
    if (Request.QueryString["amount"] != null)
    { amount = Request.QueryString["amount"]; }
    if (Request.QueryString["description"] != null)
    { description = Request.QueryString["description"]; }

    string invoice = DateTime.Now.ToString("yyyyMMddhhmmss");

    Random random = new Random();
    string sequence = (random.Next(0, 1000)).ToString();

    string timeStamp = ((int)(DateTime.UtcNow - new DateTime(1970, 1, 1)).TotalSeconds).ToString();

    string fingerprint = HMAC_MD5(transactionKey, loginID + "^" + sequence + "^" + timeStamp + "^" + amount + "^");

    //Print the Amount and Description to the page by placing them in the Spans
    //amountSpan.InnerHtml = amount;
    //descriptionSpan.InnerHtml = description;

    //Update the fields in the actual form 
    x_login.Value = loginID;
    x_amount.Value = amount;
    x_description.Value = description;
    buttonLabel.Value = label;
    x_test_request.Value = testMode;
    x_invoice_num.Value = invoice;
    x_fp_sequence.Value = sequence;
    x_fp_timestamp.Value = timeStamp;
    x_fp_hash.Value = fingerprint;
    //x_relay_response.Value = "TRUE";
    //x_relay_url.Value = "http:mysite.com";

}

// This is a wrapper for the VB.NET's built-in HMACMD5 functionality
// This function takes the data and key as strings and returns the hash as a hexadecimal value
string HMAC_MD5(string key, string value)
{
    // The first two lines take the input values and convert them from strings to Byte arrays
    byte[] HMACkey = (new System.Text.ASCIIEncoding()).GetBytes(key);
    byte[] HMACdata = (new System.Text.ASCIIEncoding()).GetBytes(value);

    // create a HMACMD5 object with the key set
    HMACMD5 myhmacMD5 = new HMACMD5(HMACkey);

    //calculate the hash (returns a byte array)
    byte[] HMAChash = myhmacMD5.ComputeHash(HMACdata);

    //loop through the byte array and add append each piece to a string to obtain a hash string
    string fingerprint = "";
    for (int i = 0; i < HMAChash.Length; i++)
    {
        fingerprint += HMAChash[i].ToString("x").PadLeft(2, '0');
    }

    return fingerprint;
} 
```

我正在成功发送数据并付款。但它没有将我重定向到我的网站。任何帮助？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T22:43:49.137

您已将中继 URL 注释掉。此外，您不应透露您的 API 密钥或交易 ID。

# restructuredtext - 使用 ReStructuredText 添加外部 PDF 作为附录

> ID：10650214
> 
> 赞同：2
> 
> 时间：2012-05-18T09:39:36.427
> 
> 标签：restructuredtext, docutils, rst2pdf

我正在写一份重要报告，并且有两个 PDF 文件我想作为附录包含在内。报告使用 ReStructuredText 编写，将使用 rst2pdf 进行转换。

docutils 或 rst2pdf 是否具有将外部文件作为附录的任何功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:21:57.450

Docutils 具有[`raw`](http://docutils.sourceforge.net/docs/ref/rst/directives.html#raw-data-pass-through)将数据传递到未触及的最终输出的指令。在文档中，他们为 LaTeX 和 HTML 输出演示了这一点。rst2pdf 似乎支持此指令：在[手册](https://web.archive.org/web/20120504142731/https://rst2pdf.googlecode.com/svn/trunk/doc/manual.txt)中，他们使用 raw 指令在最终 PDF 中包含一些文本/命令（请参阅标题为 Raw Directive 的部分），但他们没有演示使用此指令来包含外部 PDF 文件。

如果 rst2pdf 确实支持此功能，您应该能够使用：

```
.. raw:: pdf
   :file: your_pdf_file.pdf
   :encoding: the encoding of the PDF file, if different from the
              reStructuredText document's encoding. 
```

我刚刚尝试过这样做（如果有疑问，请试一试），我得到了一些`UnicodeDecodeError`s，所以该功能似乎受到支持，但我无法让它工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T01:30:25.233

您可以将 PDF 作为图像嵌入，但这对附录没有意义。

如果您只有 PDF 格式的文件，您可以使用 PDF 操作工具添加它们，但这些通常会破坏页码或链接或 PDF 的其他部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T10:48:54.467

最后，我无法直接解决这个问题。我将 ReStructuredText 文件转换为 Latex，并在其中包含了附录。

# php - Zend findParentRow：无法识别的方法

> ID：10650217
> 
> 赞同：0
> 
> 时间：2012-05-18T09:39:46.877
> 
> 标签：php, zend-framework

我是开发和 Zend 框架的新手。我对这个问题发疯了，我不知道为什么它不起作用。

我的应用程序是一个手机管理。我有 2 个课程：“Fabriquant”和“Modele”。因此，例如，我有一个带有 Fabriquant：Apple 和 Modele：iPhone 4S 的移动设备。

我想显示我的数据库中记录的所有移动设备的列表。我必须在我的视图中找到每个“Modele”的“Fabriquant”数据。

这是我的代码：

```
 index.phtml
    <table>
    <tr>
    <th>Fabriquant</th>
    <th>Modèle</th>
    <th>&nbsp;</th>
    </tr>
    <?php 
    foreach($this->modele as $modele) : ?>
    <tr>
    <td><?php echo $this->escape($modele->getFabriquant()->FAB_NOM); // $modele->FAB_ID affiche bien l'ID du fabriquant></td>
    <td><?php echo $this->escape($modele->MOD_NOM);?></td>
    <td>
    <a href="<?php echo $this->url(array('controller'=>'modele',
    'action'=>'modifier', 'id'=>$modele->MOD_ID));?>">Modifier</a>
    <a href="<?php echo $this->url(array('controller'=>'modele',
    'action'=>'supprimer', 'id'=>$modele->MOD_ID));?>">Supprimer</a>
    </td>
    </tr>
<?php endforeach; ?>
</table> 
```

所以这条线有问题：

> 转义($modele->getFabriquant()->FAB_NOM);

我的 Fabriquant.php：类 Application_Model_DbTable_Fabriquant 扩展 Zend_Db_Table_Abstract {

```
protected $_name    = 'fabriquant';
protected $_primary = 'FAB_ID';     // La primary key
protected $_fabNom  = 'FAB_NOM'; 
```

这是我的 Modele.php： 类 Application_Model_DbTable_Modele 扩展 Zend_Db_Table_Abstract {

```
protected $_name        = 'modele';     // Le nom de la table dans la BDD
protected $_primary     = 'MOD_ID';     // La clef primaire dans la table de la BDD
protected $_fabId       = 'FAB_ID';
protected $_modNom      = 'MOD_NOM';
protected $_rowClass    = 'ModeleRow';  //Le nom de la classe Zend_Db_Table_Row_Abstract

protected $_referenceMap = array(   // La table fabriquant dépendante
    'fabriquant' => array(
                    'columns'       =>  'FAB_ID',       // Colonne de la clé primaire
                    'refTableClass' =>  'Fabriquant',   // Nom de la CLASSE correspondante
                    'refColumns'    =>  'FAB_ID'
    )
); 
```

...

这是我的 ModeleRow.php： 类 ModeleRow 扩展 Zend_Db_Table_Row_Abstract {

```
public function getFabriquant(){
    $fabriquant = $this->findParentRow('fabriquant');
} 
```

}

我有此错误消息和以下堆栈：

```
Message: Unrecognized method 'getFabriquant()' 

Stack trace:

#0 D:\PHP Workspace\mona\application\views\scripts\modele\index.phtml(21): Zend_Db_Table_Row_Abstract->__call('getFabriquant', Array)
#1 D:\PHP Workspace\mona\application\views\scripts\modele\index.phtml(21): Zend_Db_Table_Row->getFabriquant()
#2 C:\wamp\www\ZendFramework-1.11.11\library\Zend\View.php(108): include('D:\PHP Workspac...')
#3 C:\wamp\www\ZendFramework-1.11.11\library\Zend\View\Abstract.php(888): Zend_View->_run('D:/PHP Workspac...')
#4 C:\wamp\www\ZendFramework-1.11.11\library\Zend\Controller\Action\Helper\ViewRenderer.php(900): Zend_View_Abstract->render('modele/index.ph...')
#5 C:\wamp\www\ZendFramework-1.11.11\library\Zend\Controller\Action\Helper\ViewRenderer.php(921): Zend_Controller_Action_Helper_ViewRenderer->renderScript('modele/index.ph...', NULL)
#6 C:\wamp\www\ZendFramework-1.11.11\library\Zend\Controller\Action\Helper\ViewRenderer.php(960): Zend_Controller_Action_Helper_ViewRenderer->render()
#7 C:\wamp\www\ZendFramework-1.11.11\library\Zend\Controller\Action\HelperBroker.php(277): Zend_Controller_Action_Helper_ViewRenderer->postDispatch()
#8 C:\wamp\www\ZendFramework-1.11.11\library\Zend\Controller\Action.php(527): Zend_Controller_Action_HelperBroker->notifyPostDispatch()
#9 C:\wamp\www\ZendFramework-1.11.11\library\Zend\Controller\Dispatcher\Standard.php(295): Zend_Controller_Action->dispatch('indexAction')
#10 C:\wamp\www\ZendFramework-1.11.11\library\Zend\Controller\Front.php(954): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http))
#11 C:\wamp\www\ZendFramework-1.11.11\library\Zend\Application\Bootstrap\Bootstrap.php(97): Zend_Controller_Front->dispatch()
#12 C:\wamp\www\ZendFramework-1.11.11\library\Zend\Application.php(366): Zend_Application_Bootstrap_Bootstrap->run()
#13 D:\PHP Workspace\mona\public\index.php(98): Zend_Application->run()
#14 {main} 
```

我想这将是一个新手问题，但我已经解决了 2 天，但我没有找到问题......非常感谢您的帮助！

编辑：这是我的 ModeleController.php （对不起，这是我所有的个人评论......）

类 ModeleController 扩展 Zend_Controller_Action {

```
public function init()
{
    /* Initialize action controller here */
}

public function indexAction()
{
    Zend_Loader::loadClass("Modele", APPLICATION_PATH . "/models"); // indique l'emplacement du modèle
    //require_once 'FabriquantController.php';
    $this->view->title = "Liste des modèles"; // le titre affiché
    // Traitement du controleur
    $modele = new Modele();
    //.....traitement...

    // Transmet à la vue
    $this->view->modele = $modele->fetchAll();
        }

public function ajouterAction()
{
    $this->view->title = "Ajouter un nouveau modèle";
    $form = new Application_Form_Modele();                  // Création du formulaire
    //var_dump($form);
    $form->envoyer->setLabel('Ajouter');                        // Ajout d'un libellé au bouton d'envoi
    $this->view->form = $form;      

    if ($this->getRequest()->isPost()) {
        $formData = $this->getRequest()->getPost();
        if ($form->isValid($formData)) {
            $fabAccessData  = new Application_Model_DbTable_Fabriquant();
            $idFab          = $form->getValue('FAB_NOM');
            $nomModele      = $form->getValue('MOD_NOM');
            $accessData     = new Application_Model_DbTable_Modele();

            $accessData->ajouterModele($idFab, $nomModele);

            $this->_helper->redirector('index');
        } else {
            $form->populate($formData);
        }
    }
}

public function lireAction()
{
    // action body
}

public function supprimerAction()
{
if ($this->getRequest()->isPost()) {
        $del = $this->getRequest()->getPost('del');
        if ($del == 'Oui') {
            $id = $this->getRequest()->getPost('id');
            $modele = new Application_Model_DbTable_Modele();
            $modele->supprimerModele($id);
        }
        $this->_helper->redirector('index');
    } else {
        $id = $this->_getParam('id', 0);
        $modele = new Application_Model_DbTable_Modele();
        $this->view->modele = $modele->getModele($id);
    }
}

public function modifierAction()
{
$this->view->title = "Modifier un modèle";
    $form = new Application_Form_Modele();                  // Création du formulaire
    $form->setAction($this->view->url(array('controller' => 'modele', 'action' => 'modifier'), 'default', true));
    $form->envoyer->setLabel('Modifier');                       // Ajout d'un libellé au bouton d'envoi
    $this->view->form = $form;                                  // Envoi du formulaire à la vue

    if ($this->getRequest()->isPost()) {                        // si la méthode isPost de l'objet Request renvoi True, le formulaire à été envoyé
        $formData = $this->getRequest()->getPost();             // Récupération des données avec la méthode getPost()
        if ($form->isValid($formData)) {                        // Vérification de ces données avec la méthode isValid()

            $id = (int)$form->getValue('MOD_ID');               // Récupération de l'ID du fabriquant
            $nomFabriquant = $form->getValue('FAB_NOM');
            $fabriquant = new Application_Model_DbTable_Fabriquant();
            $idFabriquant = $fabriquant->getIdFabricant($nomFabriquant);
            $nomModele = $form->getValue('MOD_NOM');            // On récupère le nom du fabriquant
            $modele = new Application_Model_DbTable_Modele();   // On créé un nouvel enregistrement
            $modele->modifierModele($id, $idFabriquant, $nomModele);    // On affecte à cet enregistrement le nom du fabriquant, et on persiste en BDD
            $this->_helper->redirector('index');                // pour finir, on redirige vers index de Fabriquant
        } else {
            $form->populate($formData);                         // Si la validation n'est pas passée, on réaffiche les données dans le formulaire
        }
    }
    else {
            $id = $this->_getParam('id', 0);
            //var_dump($id);
            if ($id > 0) {

                $modele = new Application_Model_DbTable_Modele();
                $fabriquant = new Application_Model_DbTable_Fabriquant();
                $Fabriquant = $fabriquant->getFabriquant($id);
                $nomFabriquant = $Fabriquant['FAB_NOM'];
                //var_dump($nomFabriquant);
                $nomModele = $modele->getModele($id);
                echo "L'ID du modèle est : " . $id;     // Vérification
                //echo "L'ID du fabriquant est : " . $nomFabriquant['FAB_NOM'];     // Vérification
                $form->populate($nomModele, $nomFabriquant);
                //$form->populate($nomFabriquant);
            } else {
                echo "Information : nous sommes dans le else de modifierAction de FabriquantController.php";
                echo "L'ID est : " . $id;
            }
        }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:53:29.083

敬礼，

在 Frabicant 课程中，您可能需要说出我认为的依赖表是什么。

```
 protected $_dependentTables = array('Application_Model_DbTable_Modele'); 
```

在模型类中，我认为参考图是错误的：

```
protected $_referenceMap = array(   // La table fabriquant dépendante
    'fabriquant' => array(
                    'columns'       =>  array('FAB_ID'),    
                    'refTableClass' =>  'Application_Model_DbTable_Fabriquant',  
    )
); 
```

和列应该是一个数组。

ps：我建议您以复数形式命名您的 RDBMS 中的表，但以单数形式命名您的模型。当您有时间时，您可以检查 Zend/Doctrine 集成。

**编辑**

我很确定这条线是错误的：

受保护的 $_rowClass = 'ModeleRow';

你必须写出类的全名，而不仅仅是文件名。

# c++ - 尝试捕获异常处理 C++

> ID：10650219
> 
> 赞同：1
> 
> 时间：2012-05-18T09:39:49.517
> 
> 标签：c++, exception-handling, ifstream

我刚刚开始使用`try`和`catch`块在 C++ 中处理异常。我有一个包含一些数据的文本文件，我正在使用`ifstream`和读取这个文件，`getline`如下所示，

```
ifstream file;
file.open("C:\\Test.txt", ios::in);
string line;
string firstLine;
if (getline(file, line, ' '))
{
    firstLine = line;
    getline(file, line);
} 
```

我想知道如何实现异常处理，以防`file.open`由于给定路径中不存在指定文件而无法打开指定文件，例如没有`Test.txt`在`C:`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-18T09:42:32.863

默认情况下，iostream 不会引发异常。相反，他们设置了一些错误标志。您始终可以通过上下文转换为 bool 来测试之前的操作是否成功：

```
ifstream file;
file.open("C:\\Test.txt", ios::in);
if (!file) {
    // do stuff when the file fails
} else {
    string line;
    string firstLine;
    if (getline(file, line, ' '))
    {
        firstLine = line;
        getline(file, line);
    }
} 
```

[`exceptions`](http://en.cppreference.com/w/cpp/io/basic_ios/exceptions)您可以使用成员函数打开异常。我发现这样做往往没有多大帮助，因为你不能再做类似的事情`while(getline(file, line))`：这样的循环只会在异常情况下退出。

```
ifstream file;
file.exceptions(std::ios::failbit);
// now any operation that sets the failbit error flag on file throws

try {
    file.open("C:\\Test.txt", ios::in);
} catch (std::ios_base::failure &fail) {
    // opening the file failed! do your stuffs here
}

// disable exceptions again as we use the boolean conversion interface 
file.exceptions(std::ios::goodbit);

string line;
string firstLine;
if (getline(file, line, ' '))
{
    firstLine = line;
    getline(file, line);
} 
```

大多数时候，我不认为在 iostreams 上启用异常是值得的。API 在它们关闭的情况下效果更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T09:45:33.170

IOstreams 让您可以选择打开各种状态位的异常。该[参考资料](http://www.cplusplus.com/reference/iostream/ios/exceptions/)有一个非常清晰的示例，这正是您所要求的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T09:43:25.270

好吧，如果文件不存在，这一切都取决于你想要做什么。

目前的代码（假设是`main`）将退出该过程。

但是，如果这是一个函数调用，那么您可能希望在对该函数的调用周围添加异常处理。

例如

```
try
{
    OpenAndReadFile( std::string filename );
}
catch ( std::ifstream::failure e )
{
    // do soemthing else
}
catch ( OtherException e )
{
}
catch ( ... )
{
    // All others
} 
```

这假定为`ifstream`.

# regex - 正则表达式从内容中查找图像

> ID：10650225
> 
> 赞同：0
> 
> 时间：2012-05-18T09:40:20.947
> 
> 标签：regex

我正在尝试从内容中找到第一张图片。使用正则表达式

```
<imgs+((width|height|border|classs|id|src|usemap|hspace|vspace)=”[^"]+”s*)+> 
```

该函数用作

```
<?php
$content="<img src='s' height='20' >";

preg_match("/<imgs+((width|height|border|classs|id|src|usemap|hspace|vspace)=”[^"]+”s*)+>
/" ,$content,$matches);
var_dump($matches);
?> 
```

但我得到一个语法错误。我想处理 img 标签的所有可能情况，怎么做？我需要标签的 src 属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:50:02.820

您将无法使用正则表达式捕获所有可能的情况。仅使用正则表达式匹配通常无法成功解析 HTML - 它太复杂了。

您将需要使用适当的 html 解析器，或将自己限制在可能的解决方案的一个子集。

# xcode - 与 Xcode 设置相关的问题

> ID：10650226
> 
> 赞同：0
> 
> 时间：2012-05-18T09:40:33.477
> 
> 标签：xcode

![在此处输入图像描述](../Images/cfe545ef0e5997017bdf8dc86f8d663b.png)

大家好。

我有与 Xcode 设置相关的问题。目前我正在使用 xcode 版本 4.3.2。

当我将使用电缆 xcode 在任何设备（iPod、iPhone、Ipad）中安装应用程序时，请重复输入用户名和密码 2 次。

如果我没有输入所需的信息，那么应用程序不会以欺骗方式安装。

我在更新最新版本的 Xcode 后遇到了这个问题。在以前的版本中，当我在设备中安装应用程序时，不会出现此问题。

所以我想知道在 Xcode 中是否需要任何设置来解决这个问题。

如果有人对此有任何想法，请分享。

谢谢你

问候， Keyur Bhalodiya

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:59:43.307

它询问系统用户名和系统密码。此信息与安全目的有关。我不知道以前的版本，但是在新版本中，当我们要安装或更新任何软件等等时，它更为重要。我想你知道系统用户名和系统密码。我可以给你有关系统用户名的信息。首先点击apple icon-->System Preferences ----> User & Groupes-----> 然后你可以看到“Full Name”，然后全名就是系统用户名，也可以看到Apple Id, Change password像那样。我想这会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:15:28.740

如果您想删除此警报消息，请使用 root 登录您的 mac。祝你好运。

# c# - XMLTextReader C#

> ID：10650227
> 
> 赞同：0
> 
> 时间：2012-05-18T09:40:55.953
> 
> 标签：c#, xmltextreader

```
<myroot>
  some data.
</myroot> 
```

我有一个xml文件，上面有一些数据。我想获取所有数据

```
 <myroot> and </myroot> 
```

进入一个字符串变量。

对我有一些限制，那就是我应该只使用 XMLTextReader 这个我怎么能只使用 XmlTextReader 而不使用 xdocument

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:59:46.673

If there are **no** child nodes in `<myroot>` then your choice is [XmlReader.ReadElementContentAsString](http://msdn.microsoft.com/en-us/library/ms162529):

```
string content = reader.ReadElementContentAsString(); 
```

`ReadElementContentAsString` consumes the current node and advances the reader to the next element.

If there are any child nodes then it depends what you want to do. If you need the inner XML you should go for Adam's solution. If you need the content of the child nodes you have to recursively traverse the XML. To help you there, you need to explain what exactly you are trying to avchieve.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:51:16.087

你需要一个 xmlnodelist ，然后是一个 foreach 循环来遍历节点。xmlNode 类型有一个 innerHtml 属性。例如：myxmlNode.SelectSingleNode("//REVNR").InnerText

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T09:53:49.650

那是一种方法。下面是一个关于如何以非常基本的形式读取 xml 的简单示例：我确定您使用它创建了一些逻辑

```
XmlTextReader reader = new XmlTextReader ("books.xml");

while (reader.Read()) 
{
    switch (reader.NodeType) 
    {
        case XmlNodeType.Element: // The node is an element.
            Console.Write("<" + reader.Name);
            Console.WriteLine(">");
            break;
        case XmlNodeType.Text: //Display the text in each element.
            Console.WriteLine (reader.Value);
            break;
        case XmlNodeType. EndElement: //Display the end of the element.
            Console.Write("</" + reader.Name);
        Console.WriteLine(">");
            break;
    }
} 
```

# android - 奇怪：不能改变jni中Integer的值

> ID：10650230
> 
> 赞同：4
> 
> 时间：2012-05-18T09:41:10.480
> 
> 标签：android, java-native-interface

我写了一个 jni 函数来设置 C 中两个 java Integer 对象的值，就像这样：

```
jni_do_something(JNIEnv *env, jobject thiz, jobject p1, jobject p2) {
    jclass c;
    jfieldID id;
    c = env->FindClass("java/lang/Integer");
    if (c==NULL)
    {
        LOGD("FindClass failed");
        return -1;
    }

    id = env->GetFieldID(c, "value", "I");
    if (id==NULL)
    {
        LOGD("GetFiledID failed");
        return -1;
    }

    env->SetIntField(p1, id, 5);
    env->SetIntField(p2, id, 10);
    return 0;
} 
```

在java中，我调用了这个函数：

```
native int do_something(Integer p1, Integer p2);

Integer p1=0, p2=0;
do_something(p1, p2);
Log.d("test", "p1: "+p1);
Log.d("test", "p2: "+p2); 
```

输出都是'10'，为什么？

================================================

我做了很多测试，得到了以下几点。（回答，欢迎评论）

1.  我不认为这个 jni 本机无法更改不可变对象。毕竟这两个对象都从 0 变成了 10。

2.  与自动装箱有一些关系（是的？我不确定）。也许 p1 和 p2 是由 jvm 专门处理的，如果初始化为指向单个对象：

    整数 p1=0，p2=0；

如果更改为：

```
Integer p1=0, p2=1; 
```

或者

```
Integer p1 = new Integer(0);
Integer p2 = new Integer(0); 
```

结果是正确的 (p1:5, p2:10)。任何人都可以澄清这一点吗？

也许我说的不正确。我在java中编写了以下代码：

```
Integer a = 0;
Integer b = 0;
b = 10;
Log.d("test", "a: "+a);
Log.d("test", "b: "+b); 
```

它输出 0、10。因此，它们指向的不是单个对象。我真的很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T09:26:36.403

```
Integer i1 = 500, i2 = 10000;
testInts(i1, i2);
Log.d("log", "I1 = " + i1); 
Log.d("log", "I2 = " + i2); 
```

或者

```
Integer i1 = new Integer(0), i2 = new Integer(0);
testInts(i1, i2);
Log.d("log", "I1 = " + i1); 
Log.d("log", "I2 = " + i2); 
```

输出

```
I1 = 10
I2 = 10
I1 = 5
I2 = 10
I1 = 5
I2 = 10 
```

有效（使用您的示例的第一个结果）。我记得如果值在字节（或？）范围内，那么 java 会使用一些奇怪的优化。编辑：似乎这是小值自动装箱的规则。

c代码

```
 jclass clazz = (*env)->GetObjectClass(env, i1);
    jfieldID mi = (*env)->GetFieldID(env, clazz, "value", "I");

    (*env)->SetIntField(env, i1, mi, 5);
    (*env)->SetIntField(env, i2, mi, 10);
    return 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:54:55.280

我不认为[整数](http://developer.android.com/reference/java/lang/Integer.html)是可变的。你会看到它没有`set`方法。

# locking - 锁定和 Redis

> ID：10650232
> 
> 赞同：11
> 
> 时间：2012-05-18T09:41:23.827
> 
> 标签：locking, redis, scalability

我们有 75 台（并且还在不断增加）服务器需要通过 Redis 共享数据。理想情况下，所有 75 台服务器都希望通过`INCRBYFLOAT`操作写入 Redis 中的两个字段。我们预计最终在这两个领域可能会有数百万的每日写入操作和数*十亿的每日读取。*此数据**必须**是持久的。

我们担心 Redis 锁定可能会导致多次重试写入操作，同时多次尝试增加同一字段。

问题：

*   在非常重的负载下，多个同时`INCRBYFLOAT`在单个字段上是一个坏主意吗？
*   我们是否应该有一个外部进程“汇总”单独的字段并写入这两个字段？（这引入了另一个故障点）
*   写入时读取这两个字段会阻塞吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-18T09:53:41.113

Redis 不锁定。此外，它是单线程的；所以没有竞争条件。读取或写入不会阻塞。

您可以`INCRBYFLOAT`在同一个密钥上运行数百万个，而不会出现任何问题。无需外部流程。阅读这些字段不会造成任何问题。

也就是说，“两个键的数百万次更新”听起来很奇怪。如果您可以解释您的用例，也许在 Redis 中可能有更好的方法来处理它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-18T09:58:40.080

由于 Redis 是单线程的，您可能希望使用主从复制将写入与读取分开，因为是的，写入通常会阻塞读取。

或者，您可以考虑为此使用[Apache Zookeeper](http://zookeeper.apache.org/)，它提供了可靠的集群协调，没有单点故障（如单个 Redis 实例）。

# javascript - 检查=“检查”与检查=真

> ID：10650233
> 
> 赞同：47
> 
> 时间：2012-05-18T09:41:26.797
> 
> 标签：javascript, html

以下两种用法有什么区别？

```
document.getElementById('myRadio').checked = "checked"; 
```

和

```
document.getElementById('myRadio').checked = true; 
```

对我来说，两者的行为方式相同。但是，我只是想知道为什么存在两种方法可以做到这一点。

哪一个是理想的用法？我需要支持IE7及更高版本。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-05-18T09:46:15.120

`document.getElementById('myRadio').checked`是一个布尔值。它应该是`true`或`false`

`document.getElementById('myRadio').checked = "checked";`将字符串转换为布尔值，这是真的。

`document.getElementById('myRadio').checked = true;`只需分配`true`而不进行强制转换。

使用`true`它的效率稍微高一些，并且更能向维护者透露意图。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-18T09:52:09.007

该元素同时具有一个属性和一个名为 的属性`checked`。该属性确定当前状态。

属性是字符串，属性是布尔值。从 HTML 代码创建元素时，从标记设置属性，并根据属性的值设置属性。

如果标记中的属性没有值，则属性变为`null`，但属性始终为`true`或`false`，因此变为`false`。

设置属性时，应使用布尔值：

```
document.getElementById('myRadio').checked = true; 
```

如果设置属性，则使用字符串：

```
document.getElementById('myRadio').setAttribute('checked', 'checked'); 
```

请注意，设置属性也会更改属性，但设置属性不会更改属性。

另请注意，无论您将属性设置为什么值，该属性都会变为`true`. 即使您使用空字符串 or `null`，设置属性也意味着它已被检查。用于`removeAttribute`取消选中使用属性的元素：

```
document.getElementById('myRadio').removeAttribute('checked'); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-18T09:43:48.803

原始`checked`属性（HTML 4 及之前）不需要值 - 如果存在，则元素被“检查”，如果不存在，则不是。

然而，这对于遵循 HTML 4 的 XHTML 无效。

该标准建议`checked="checked"`用作 true 的条件 - 因此您发布的两种方式最终都会做同样的事情。

使用哪一种并不重要——使用对您最有意义的一种并坚持下去（或与您的团队达成一致意见）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-18T09:46:29.660

`document.getElementById('myRadio')`返回您的 DOM 元素，我将`elem`在此答案中引用它。

`elem.checked`访问名为DOM 元素的*属性。*`checked`此属性始终为布尔值。

在编写 HTML 时，您`checked="checked"`在 XHTML 中使用；在 HTML 中，您可以简单地使用`checked`. 设置属性时（通过 完成`.setAttribute('checked', 'checked')`），您需要提供一个值，因为某些浏览器认为空值不存在。

但是，由于您拥有 DOM 元素，因此没有理由设置属性，因为您可以简单地使用 - 更舒服 - 布尔属性。`true`由于在布尔上下文中考虑非空字符串，因此设置`elem.checked`为`'checked'`或任何其他不是虚假值（偶数`'false'`或`'0'`）的值将选中该复选框。没有理由不使用`true`，`false`因此您应该坚持使用正确的值。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-18T09:44:51.897

`checked`属性是一个布尔值，因此除布尔`"checked"`值之外的其他值转换为.`"string"``false``true`

任何字符串值都将为真。属性的存在也​​使它成为真的：

```
<input type="checkbox" checked> 
```

您可以只使用 JS 在 DOM 中进行布尔更改。

所以答案是：他们是平等的。

[w3c](http://www.w3.org/TR/html4/interact/forms.html#adef-checked)

# iphone - Twitter 引擎 SA_OAuthTwitterEngine 集成？

> ID：10650238
> 
> 赞同：7
> 
> 时间：2012-05-18T09:41:39.077
> 
> 标签：iphone, objective-c, ipad, twitter

我成功添加`SA_OAuthTwitterEngine`到我的应用程序中，但遇到了一个非常奇怪的问题。当我登录 Twitter 时，我的应用程序将崩溃：

```
- (void) OAuthTwitterController: (SA_OAuthTwitterController *) controller authenticatedWithUsername: (NSString *) username 
{
    [_engine sendUpdate:[NSString stringWithFormat:@"This Tweet for testing!"]];
    NSLog(@"Authenicated for %@", username);
} 
```

该应用程序崩溃了`[_engine sendUpdate:[NSString stringWithFormat:@"This Tweet for testing!"]];`。如果我改用`[_engine sendUpdate:nil];`它，它将不会崩溃，但无法从我的帐户发送推文。

当我试图追踪方法时，我在以下函数的语句中`sendUpdate`遇到了实际问题，`[theRequest prepare];`

```
- (NSString *)_sendRequestWithMethod:(NSString *)method path:(NSString *)path queryParameters:(NSDictionary *)params body:(NSString *)body requestType:(MGTwitterRequestType)requestType responseType:(MGTwitterResponseType)responseType
{
    NSString *fullPath = path;
    NSString *urlString = [NSString stringWithFormat:@"%@://%@/%@", (_secureConnection) ? @"https" : @"http", _APIDomain, fullPath];
    NSURL *finalURL = [NSURL URLWithString:urlString];
    if (!finalURL) {
        return nil;
    }
OAMutableURLRequest *theRequest = [[OAMutableURLRequest alloc] initWithURL:finalURL consumer:self.consumer  token:_accessToken realm: nil signatureProvider:nil];
    if (method) {
        [theRequest setHTTPMethod:method];
    }
    [theRequest setHTTPShouldHandleCookies:NO];

    // Set headers for client information, for tracking purposes at Twitter.
    [theRequest setValue:_clientName    forHTTPHeaderField:@"X-Twitter-Client"];
    [theRequest setValue:_clientVersion forHTTPHeaderField:@"X-Twitter-Client-Version"];
    [theRequest setValue:_clientURL     forHTTPHeaderField:@"X-Twitter-Client-URL"];

    // Set the request body if this is a POST request.
    BOOL isPOST = (method && [method isEqualToString:@"POST"]);
    if (isPOST) {
        // Set request body, if specified (hopefully so), with 'source' parameter if appropriate.
        NSString *finalBody = @"";
        if (body) {
            finalBody = [finalBody stringByAppendingString:body];
        }
        if (_clientSourceToken) {
            finalBody = [finalBody stringByAppendingString:[NSString stringWithFormat:@"%@source=%@", (body) ? @"&" : @"?" , _clientSourceToken]];
        }

        if (finalBody) {
            [theRequest setHTTPBody:[finalBody dataUsingEncoding:NSUTF8StringEncoding]];
        }
    }
    [theRequest prepare];

    // Create a connection using this request, with the default timeout and caching policy, 
    // and appropriate Twitter request and response types for parsing and error reporting.
    MGTwitterHTTPURLConnection *connection;
    connection = [[MGTwitterHTTPURLConnection alloc] initWithRequest:theRequest delegate:self requestType:requestType responseType:responseType];

    if (!connection) {
        return nil;
    } else {
        [_connections setObject:connection forKey:[connection identifier]];
    }

    return [connection identifier];
} 
```

崩溃报告是，

```
0  0x01f023ef in CFRelease ()
1  0x0008d04c in -[OAMutableURLRequest URLEncodedString:] (self=0x7bc673b0,       _cmd=0x9ee5f, string=0x0) at /Users/ben/Dropbox/Dev/External Projects/Twitter-OAuth-iPhone/OAuthConsumeriPhoneLib/OAuthConsumerSrc/OAMutableURLRequest.m:287
2  0x0008bbe3 in -[OAMutableURLRequest prepare] (self=0x7bc673b0, _cmd=0x978cc) at /Users/ben/Dropbox/Dev/External Projects/Twitter-OAuth-iPhone/OAuthConsumeriPhoneLib/OAuthConsumerSrc/OAMutableURLRequest.m:131
3  0x00088460 in -[SA_OAuthTwitterEngine _sendRequestWithMethod:path:queryParameters:body:requestType:responseType:] (_cmd=0x96833, method=0xc0250, body=0x7b971210, requestType=<value temporarily unavailable, due to optimizations>) at SA_OAuthTwitterEngine.m:315

4  0x0007f673 in -[MGTwitterEngine sendUpdate:inReplyTo:] (self=<value temporarily unavailable, due to optimizations>, _cmd=0x96914, updateID=2073243024) at MGTwitterEngine.m:1019

5  0x0007f496 in -[MGTwitterEngine sendUpdate:] (self=0x7b932d90, _cmd=0x95e02, status=0xc0510) at MGTwitterEngine.m:995

6  0x0007bf3f in -[DMUAppDelegate OAuthTwitterController:authenticatedWithUsername:] (self=0x7b918a20, _cmd=0x96152) at DMUAppDelegate.m:572

7  0x0008503b in -[SA_OAuthTwitterController gotPin:] (_cmd=0x975b4, pin=0x7ae573e0) at SA_OAuthTwitterController.m:125

8  0x00086137 in -[SA_OAuthTwitterController webViewDidFinishLoad:] (self=0x7b944a00, _cmd=0xf070e2, webView=0x7ae46750) at SA_OAuthTwitterController.m:224

9  0x00be036a in -[UIWebView webView:didFinishLoadForFrame:] ()

10 0x00be1956 in -[UIWebViewWebViewDelegate webView:didFinishLoadForFrame:] ()

11 0x01f5c51d in __invoking___ ()

12 0x01f5c437 in -[NSInvocation invoke] ()

13 0x01f8749a in -[NSInvocation invokeWithTarget:] ()

14 0x03462aff in -[_WebSafeForwarder forwardInvocation:] ()
15 0x01f5d0c9 in ___forwarding___ ()
16 0x01f5cce2 in __forwarding_prep_0___ ()

17 0x01f5c51d in __invoking___ ()
18 0x01f5c437 in -[NSInvocation invoke] ()

19 0x04005ae3 in SendMessage ()
20 0x04006115 in HandleDelegateSource ()

21 0x01fca97f in __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ ()
22 0x01f2db73 in __CFRunLoopDoSources0 ()
23 0x01f2d454 in __CFRunLoopRun ()
24 0x01f2cdb4 in CFRunLoopRunSpecific ()
25 0x01f2cccb in CFRunLoopRunInMode ()
26 0x01e60879 in GSEventRunModal ()
27 0x01e6093e in GSEventRun ()

28 0x00a29a9b in UIApplicationMain ()
29 0x00040296 in main (argc=1, argv=0xc003c604) at /Users/dhirenshah/Desktop/Projects/Projects/DMU/DMU/main.m:16
(gdb) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T05:26:24.413

是的，我终于解决了我的问题。我只是替换代码，

```
- (SA_OAuthTwitterEngine *) initOAuthWithDelegate: (NSObject *) delegate 
  {

    if (self = (id) [super initWithDelegate: delegate]) {
       self.requestTokenURL = [NSURL URLWithString: @"https://twitter.com/oauth/request_token"];
       self.accessTokenURL = [NSURL URLWithString: @"https://twitter.com/oauth/access_token"];
       self.authorizeURL = [NSURL URLWithString: @"https://twitter.com/oauth/authorize"];
     }
  return self;
} 
```

修改 SA_OAuthTwitterEngine.m 函数。我从[iOS5 中的 MGTwitterEngine 崩溃中](https://stackoverflow.com/questions/8576877/mgtwitterengine-crash-in-ios5%5C)得到了帮助，这个链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-12T07:52:06.493

我正在运行 iOS 6.1.3，我的测试设备是 iPhone 4s。我得到了与 xcode 将崩溃指向`[theRequest prepare];`方法相同的错误/崩溃。

我的固定是：

```
 OAMutableURLRequest *theRequest = [[[OAMutableURLRequest alloc]         
                 initWithURL:finalURL
                 consumer:self.consumer
                 token:_accessToken
                 realm: nil
                 signatureProvider:nil] autorelease]; 
```

将自动发布放在这条线上并`[_engine isAuthorized]`在发布推文之前再次检查：

```
 if ([_engine isAuthorized])
        {
             NSLog(@"post Tweet");
             . . . . . .
        } else {
             NSLog(@"cant post Tweet");
             . . . . . .
        } 
```

我无法进一步解释，因为我还不熟悉这个，但这对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T12:10:12.310

我对上面的代码进行了更改，因为 twitter api 已更改，所以旧的将无法使用。

对于任何新用户，如果他们使用上述格式和 MGTwitterEnginer，它将不起作用，您需要替换

self.requestTokenURL = [NSURL URLWithString: @"https://api.twitter.com/oauth/request_token"]; self.accessTokenURL = [NSURL URLWithString:@"https://api.twitter.com/oauth/access_token"]; self.authorizeURL = [NSURL URLWithString:@"https://api.twitter.com/oauth/authorize"];

# null - 在另一个视图控制器的 viewWillApper 方法中使用时，来自一个视图控制器的 NSArray 变为 NULL？

> ID：10650239
> 
> 赞同：1
> 
> 时间：2012-05-18T09:41:48.013
> 
> 标签：null, nsarray, viewwillappear

我从另一个视图控制器调用 NSArray 时遇到问题，解决方案可能很简单，但作为初学者我很困惑。

这是我的问题，

我正在尝试将数组从我的 firstViewController 发送到 SecondViewController，我需要将数组值更新到我在 SecondViewController 上的 UILabel 中。

```
secondViewController.m

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil  andStationName:(NSArray *)stationName;
// stationName is from firstViewController
    {

// now the stationName have the array values

   NSArray *stationNames=[[stationName mutableCopy]retain];

 //take a copy to stationNames

 } 
```

现在我需要将此值更新为我的 UILabel

```
-(void)viewWillAppear:(BOOL)animated
 {
//stationNameDisplay is a uilabel

 stationNameDisplay.text=[stationNames objectAtIndex:0];
  NSLog(@"station name %@",[stationNames objectAtIndex:0]);

 } 
```

但是 [stationNames objectAtIndex:0] 只显示空值，我不知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T10:08:34.453

不要尝试通过`- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil`method 或 a发送值，`viewDidLoad`因为在选项卡栏中，用户将在视图之间切换而无需卸载视图或重新初始化视图控制器。

在Application中声明一个变量`appdelegate.h`如下

```
@interface AppDelegate : NSObject{
 NSMutableArray *stationnamespassed;
}
@property (nonatomic, retain) NSMutableArray *stationnamespassed;
@end 
```

在`appdelegate.m`

```
@implementation AppDelegate
@synthesize stationnamespassed;

 -(void) dealloc{
          [stationnamespassed release];
          [super release];
         }
@end 
```

在`firstviewcontroller.h`声明这个

```
@interface firstviewcontroller {
  NSMutableArray *stationnamestobepassed;
}
@property (nonatomic, retain) NSMutableArray *stationnamestobepassed;
@end 
```

在`firstviewcontroller.m`声明这个

```
@implementation firstviewcontroller
@synthesize stationnamestobepassed;

-(void) someaction{
   stationnamestobepassed = [NSMutableArray     
     arrayWithObjects:@"string1",@"string2",@"string3"];
    AppDelegate *appDelegate=[[UIApplication sharedApplicaton] delegate];
    appDelegate.stationnamespassed = self.stationnamestobepassed;
}

-(void) dealloc{
  [stationnamestobepassed release];
  [super release];
 }
@end 
```

在`secondviewcontroller.m`访问应用程序委托变量如下

```
@implementation secondviewcontroller

   -(void)viewWillAppear:(BOOL)animated
 {
//stationNameDisplay is a uilabel
AppDelegate *appDelegate=[[UIApplication sharedApplicaton] delegate];
 stationNameDisplay.text=[appDelegate.stationnamespassed objectAtIndex:0];
  NSLog(@"station name %@",[appDelegate.stationnamespassed objectAtIndex:0]);

 }
-(void) dealloc{
      [super release];
     }
@end 
```

试试这种方式。有关在不同视图控制器之间保存数据的不同方式的更多信息，请阅读[这篇](http://www.cocoanetics.com/2009/05/the-death-of-global-variables/)文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T10:08:55.770

首先，您从 init 构造函数中获取的 NSArray 的范围是错误的。您需要为您的 stationNames 数组创建一个属性，并将其设置为：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNibNil andStationName:(NSArray *)stationName;
// stationName is from firstViewController
 {   
     self.stationNames = stationName;
 } 
```

然后，您可以像这样访问它：

```
 stationNameDisplay.text = [self.stationNames objectAtIndex:0];
 NSLog(@"station name %@",[self.stationNames objectAtIndex:0]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T10:04:21.737

我想您需要保留数组 stationName 中的每个元素，因为 NSArray 仅包含它们的引用，而 mutableCopy 不会将它们自动保留在复制的 NSArray 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T11:03:53.487

第一视图控制器.m

```
-(void)someMethod
{

    NSArray *stationName=[[NSArray alloc ]initWithObjects:@"One",@"Two",@"Three", nil];
    secongViewController *sView=[[secongViewController alloc]initWithNibName:@"secongViewController" bundle:nil];
    sView.stationNames=[[[NSArray alloc]initWithArray:stationName]autorelease];

    [self.view addSubview:sView.view];
}

@interface secongViewController : UIViewController {

    NSArray *stationNames;
}

@property(nonatomic,retain) NSArray *stationNames;
@end

@interface secongViewController : UIViewController {

    NSArray *stationNames;

    UILabel *labe;

}

@property(nonatomic,retain) IBOutlet UILabel *labe;
@property(nonatomic,retain) NSArray *stationNames;
@end

- (void)viewDidLoad
{
    [super viewDidLoad];
    NSLog(@"station name %@",[stationNames objectAtIndex:0]);
    [labe setText:[stationNames objectAtIndex:0]];

} 
```

如果您尝试更新 viewWillAppear 中的标签文本：您将不会，因为当时 viewDidLoad IBOutlet(UIController memory) 已加载到视图。

# ruby - 为什么 Eclipse (DLTK) 在 ruby 文件中显示很多语法错误？

> ID：10650241
> 
> 赞同：2
> 
> 时间：2012-05-18T09:41:59.000
> 
> 标签：ruby, eclipse, macos, dltk

我已经在 Max OS X 10.7 上运行的 Eclipse Indigo 上安装了 DLTK 2.0

我在 Ruby 的 Eclipse 首选项页面中添加了 ruby​​ 1.8.7 解释器。

但是当我使用现有 rails 项目的源创建一个 ruby​​ 项目时，在问题视图中报告了很多语法错误。

这是一个示例：

> 语法错误，意外篡改

上述错误在下面第二行的“&”字符处报告：

```
 keys.each do |key|
      define_method(key) do |&block|
        @configuration[key] = block
      end
    end 
```

在寻找上述问题的解决方案时，我进入了一个似乎表明 DLTK 在内部使用 JRuby 的页面。这个问题可能是由于 DLTK 中捆绑的旧 JRuby 版本造成的吗？

# php - 使用 jQuery 级联下拉菜单

> ID：10650242
> 
> 赞同：1
> 
> 时间：2012-05-18T09:42:03.040
> 
> 标签：php, jquery, drop-down-menu, usability, cascadingdropdown

我有一个带有 jQ​​uery 的级联下拉列表，它使用 PHP 来检索其值。我正在努力解决它，以便它适用于所有情况。基本上它应该执行以下操作：

*   选择父项时填充子项
*   父级是粘性的，所以如果页面被刷新，子级应该再次根据 $_POST 数组中的父级值自动填充。
*   如果可能的话，我还希望孩子具有粘性，这样孩子也会被选中，而不仅仅是在重新加载页面时重新填充。

这是我到目前为止所拥有的：

```
$("#parent_id").change(function() {
    $("#child_id").html("<option value=\"\">-- Select One --</option>");
    var p_id = $(this).val();
    if(p_id != 0) {
        $.getJSON('./php/includes/child_web_service.php?p_id=' + p_id,function(data) {   
            $.each(data, function() {
                $("#child_id").append($("<option></option>").val(this['child_id_key']).html(this['child_name']));
            });
        });
    }
});

<?php
if(isset($_POST['parent_id']) && $_POST['parent_id'] != ""){
echo "$(\"#parent_id\").val(" . $_POST['parent_id'] . ").trigger('change');";
}
?> 
```

任何有关使其更强大的建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:43:05.457

这里有一些建议：

*   选择父项时使用[绑定](http://api.jquery.com/bind/)和[触发器填充子项](http://api.jquery.com/trigger/)
*   存储`$_POST`在变量中以使父对象具有粘性，并使用[ctype](http://www.php.net/manual/en/book.ctype.php)对其进行验证
*   使用[片段标识符](http://www.w3.org/DesignIssues/Fragment.html)将子节点附加到 URL，然后绑定事件以读取值并使子节点在重新加载时保持粘性

# java - 秒表在java中不起作用

> ID：10650249
> 
> 赞同：4
> 
> 时间：2012-05-18T09:42:50.293
> 
> 标签：java, swing, timer, compiler-errors, jbutton

我是java的新手。我现在面临问题。我的目的是将时间放在文本字段中。我需要按“开始”按钮，然后时间就会开始走。但是在我编译这段代码之后。它出错了。我不知道该怎么做。有谁能够帮助我？谢谢大家！！

## 错误

```
I:\PlayScene.java:108: cannot find symbol
symbol: variable buttonPlay
                buttonPlay.setText(Play);
                ^
I:\PlayScene.java:111: cannot find symbol
symbol: variable buttonPlay
                buttonPlay.setText(Pause);
                ^
I:\PlayScene.java:103: cannot find symbol
symbol  : variable buttonPlay
location: class PlayScene
    buttonPlay.addActionListener(new ActionListener() {
    ^
3 errors 
```

## 代码

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.util.Timer.*;
import java.util.*;
import javax.swing.Timer;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.concurrent.TimeUnit;

public class PlayScene extends JFrame implements ActionListener{

//declaration for time 
private static final String Play = "Play";
private static final String Pause = "Pause";
private Timer timer = new javax.swing.Timer(100, this);
private long initTime = System.currentTimeMillis();
private long startTime;
private long pauseTime;
private boolean isRunning;

public void start() {
  if (isRunning == false) {
      startTime = System.currentTimeMillis();
    } else {
       startTime = System.currentTimeMillis() - (pauseTime - startTime);
    }

    isRunning = true;
    timer.start();
 }

 public void pause() {           
    pauseTime = System.currentTimeMillis();
    timer.stop();
}
   private String getCurrentTime(long time) {
    return myFormat(time);
}

private String myFormat(final long time) {
    final long hr = TimeUnit.MILLISECONDS.toHours(time);
    final long min = TimeUnit.MILLISECONDS.toMinutes(time
            - TimeUnit.HOURS.toMillis(hr));
    final long sec = TimeUnit.MILLISECONDS.toSeconds(time
            - TimeUnit.HOURS.toMillis(hr) - TimeUnit.MINUTES.toMillis(min));
    final long ms = TimeUnit.MILLISECONDS.toMillis(time
            - TimeUnit.HOURS.toMillis(hr) - TimeUnit.MINUTES.toMillis(min)
            - TimeUnit.SECONDS.toMillis(sec));
    return String.format("%02d:%02d:%02d.%01d", hr, min, sec, ms/100);
}

public PlayScene(){

    super("Memory Game");
    setBounds(300,40,800,600);

    final JButton buttonPlay = new JButton(Play);

    //create label
    JLabel labelTimer = new JLabel("Timer");

    JTextField text2 = new JTextField(15); 
    text2.setEnabled(false);
    text2.setText(getCurrentTime(System.currentTimeMillis() - initTime));

    //Labels for upper 
    JLabel up = new JLabel();
    //JLabel space = new JLabel("\n");

    //Label for left
    JLabel left = new JLabel();
    JLabel space1 = new JLabel("                           ");

    //Label for right
    JLabel right = new JLabel();
    JLabel space2 = new JLabel("                            ");

    //create up panel 
    final JPanel upPanel = new JPanel(new FlowLayout());
    upPanel.add(labelTimer);
    upPanel.add(text2);

    JPanel bottomPanel = new JPanel(new FlowLayout());
    bottomPanel.add(buttonPlay);

    JPanel leftPanel = new JPanel(new FlowLayout());
    leftPanel.add(space1);

    JPanel rightPanel = new JPanel(new FlowLayout());
    rightPanel.add(space2);

    add(upPanel,BorderLayout.NORTH);
    add(bottomPanel,BorderLayout.SOUTH);
    add(leftPanel, BorderLayout.WEST);
    add(rightPanel,BorderLayout.EAST);  

    setVisible(true);
}

public void actionPerformed(ActionEvent e) {

    buttonPlay.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            String cmd = e.getActionCommand();
            if (Pause.equals(cmd)) {
                pause();
                buttonPlay.setText(Play);

           } else {
                buttonPlay.setText(Pause);
                start();
            }
        }
    });        
}

public static void main(String[] args) {
    JFrame frame = new PlayScene();
    frame.setVisible(true);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T09:47:56.477

的范围`buttonPlay`仅限于`PlayScene`构造函数的长度，因此无法在其他方法中访问。要解决它，请将其设为类属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T09:54:43.750

您的代码中存在一些问题。我建议你这样做（作为快速更正）：

```
public class PlayScene extends JFrame {

//declaration for time 
private static final String Play = "Play";
private static final String Pause = "Pause";
private Timer timer;
private long initTime = System.currentTimeMillis();
private long startTime;
private long pauseTime;
private boolean isRunning;

public void start() {
    if (!isRunning) {
        startTime = System.currentTimeMillis();
    } else {
        startTime = System.currentTimeMillis() - (pauseTime - startTime);
    }

    isRunning = true;
    timer.start();
}

public void pause() {
    pauseTime = System.currentTimeMillis();
    timer.stop();
}

private String getCurrentTime(long time) {
    return myFormat(time);
}

private String myFormat(final long time) {
    final long hr = TimeUnit.MILLISECONDS.toHours(time);
    final long min = TimeUnit.MILLISECONDS.toMinutes(time - TimeUnit.HOURS.toMillis(hr));
    final long sec = TimeUnit.MILLISECONDS.toSeconds(time - TimeUnit.HOURS.toMillis(hr)
            - TimeUnit.MINUTES.toMillis(min));
    final long ms = TimeUnit.MILLISECONDS.toMillis(time - TimeUnit.HOURS.toMillis(hr)
            - TimeUnit.MINUTES.toMillis(min) - TimeUnit.SECONDS.toMillis(sec));
    return String.format("%02d:%02d:%02d.%01d", hr, min, sec, ms / 100);
}

public PlayScene() {
    super("Memory Game");
    setBounds(300, 40, 800, 600);

    final JButton buttonPlay = new JButton(Play);

    JLabel labelTimer = new JLabel("Timer");

    final JTextField text2 = new JTextField(15);
    text2.setEnabled(false);
    text2.setText(getCurrentTime(System.currentTimeMillis() - initTime));

    JLabel up = new JLabel();

    JLabel left = new JLabel();
    JLabel space1 = new JLabel("                           ");

    JLabel right = new JLabel();
    JLabel space2 = new JLabel("                            ");

    final JPanel upPanel = new JPanel(new FlowLayout());
    upPanel.add(labelTimer);
    upPanel.add(text2);

    JPanel bottomPanel = new JPanel(new FlowLayout());
    bottomPanel.add(buttonPlay);

    JPanel leftPanel = new JPanel(new FlowLayout());
    leftPanel.add(space1);

    JPanel rightPanel = new JPanel(new FlowLayout());
    rightPanel.add(space2);

    add(upPanel, BorderLayout.NORTH);
    add(bottomPanel, BorderLayout.SOUTH);
    add(leftPanel, BorderLayout.WEST);
    add(rightPanel, BorderLayout.EAST);

    setVisible(true);

    buttonPlay.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            String cmd = e.getActionCommand();
            if (Pause.equals(cmd)) {
                pause();
                buttonPlay.setText(Play);

            } else {
                buttonPlay.setText(Pause);
                start();
            }
        }
    });

    timer = new Timer(100, new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            SwingUtilities.invokeLater(new Runnable() {
                @Override
                public void run() {
                    text2.setText(getCurrentTime(System.currentTimeMillis() - initTime));
                }
            });
        }
    });
}

public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            JFrame frame = new PlayScene();
            frame.setVisible(true);
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        }
    });
}

} 
```

基本上你需要：

*   buttonPlay 的正确范围
*   `javax.swing.Timer`使用自己的侦听器正确初始化（不是您的按钮侦听器）
*   始终使用 SwingUtilities - 当您需要更新或创建 Swing 组件并且运行不在 Swing EDT 中的代码时

"Decorative" issues: * you should also declare static constants as upper-case

# android - 我收到一个警告，要在我的 AndroidManifest 中包含 android:targetSdkVersion，但它已经包含了？

> ID：10650253
> 
> 赞同：0
> 
> 时间：2012-05-18T09:42:54.930
> 
> 标签：android, eclipse, sdk, tags, warnings

我的 AndroidManifest.xml 中有以下内容；

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="cmb.app"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:targetSdkVersion="15" android:minSdkVersion="8" />

</manifest> 
```

但是，Eclipse 给了我警告；

```
<uses-sdk> should specify a target API level (the highest verified
version; when running on later versions, compatibility behaviors may
be enabled) with android:targetSdkVersion="?" 
```

我的项目构建目标是 Google APIs 4.0.3 (15)，我最初将 targetSdkVersion 设置为 8，但将其更改为 15 并没有消除警告。

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:50:29.090

还要检查project.properties，一旦你在manifest.xml中更新了项目目标，它也会反映在那里，如果没有，你可以自己修改它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-20T13:35:03.577

Basically, the problem was that changes to xml files were not being noticed by the validator in Eclipse (although I can't confirm that the issue is actually with Eclipse). This happened for a number of files and re-building did not help. I ended up reloading the project or deleting and re-writing the files to fix it.

# sql - Oracle：为每个集群选择至少一条记录

> ID：10650254
> 
> 赞同：2
> 
> 时间：2012-05-18T09:42:57.463
> 
> 标签：sql, oracle

查看以下查询：

```
SELECT *
FROM ENI_FLUSSI_HUB c1
WHERE flh_tipo_processo_cod IN ('VA', 'NUOVA_ATT_ENI')
AND rownum < 10 
```

它只是提取了一些 VA。我需要提取一些 VA 和一些 NUOVA_ATT_ENI。

最优雅的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:45:42.617

你可以这样做：

```
SELECT *
FROM ENI_FLUSSI_HUB c1
WHERE flh_tipo_processo_cod = 'VA'
AND rownum < 5

UNION 

SELECT *
FROM ENI_FLUSSI_HUB c1
WHERE flh_tipo_processo_cod = 'NUOVA_ATT_ENI'
AND rownum < 5 
```

* * *

是否没有任何重复值，您可以使用它`UNION ALL`来更快地执行：

```
SELECT *
FROM ENI_FLUSSI_HUB c1
WHERE flh_tipo_processo_cod = 'VA'
AND rownum < 5

UNION ALL

SELECT *
FROM ENI_FLUSSI_HUB c1
WHERE flh_tipo_processo_cod = 'NUOVA_ATT_ENI'
AND rownum < 5 
```

* * *

正如@DavidAldridge 所说，您始终可以使用 a`view`进行此选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T10:05:27.180

这是一个很好的过度设计的解决方案：

```
with
  va as (
    select rowid ri,
           t.*
    from   eni_flussi_hub t
    where  flh_tipo_processo_cod = 'VA'
    and    rownum <= 1),
  nuova_att_eni as (
    select rowid ri,
           t
    from   eni_flussi_hub t
    where  flh_tipo_processo_cod = 'NUOVA_ATT_ENI'
    and    rownum <=1),
  the_rest as (
    select *
    from   eni_flussi_hub c1
    where  flh_tipo_processo_cod in ('VA','NUOVA_ATT_ENI')
    and    rowid not in (
             select ri
             from   va
             union all
             select ri
             from nuova_att_eni)
    and rownum <=9)
select *
from  (
      select * from va
      union all
      select * from nuova_att_eni
      union all
      select * from the_rest
      )
where rownum <= 10
/ 
```

我*认为*它的作用是为 flh_tipe_processo_cod 的两个值中的每一个返回至少一行，然后“让大自然顺其自然”。

您必须在主查询中编辑 * 以避免尝试包含前两个子查询因式分解子句中的 rowid。

这是另一个，*我认为*尝试将每个恢复五个，但如果两个子查询因式分解子句中的任何一个可用的总数少于五个，则将“补足”所需的总数：

```
with
  va as (
    select rownum rn,
           t.*
    from   eni_flussi_hub t
    where  flh_tipo_processo_cod = 'VA'
    and    rownum <= 10),
  nuova_att_eni as (
    select rownum rn,
           t
    from   eni_flussi_hub t
    where  flh_tipo_processo_cod = 'NUOVA_ATT_ENI'
    and    rownum <=10)
select *
from  (
      select *
      from   (select * from va
              union all
              select * from nuova_att_eni)
      order by rn asc
      )
where rownum <= 10
/ 
```

享受！

# java - Axis2 和 Web 服务：文件上传

> ID：10650256
> 
> 赞同：2
> 
> 时间：2012-05-18T09:43:04.477
> 
> 标签：java, web-services, soap, wsdl, axis2

我正在尝试使用 Axis2 编写一个简单的 Web 服务。它的行为非常简单：它在输入中获取一个文件并存储它。我已经尝试了几件事来完成这个“简单”的文件上传服务。一开始我还尝试使用 Java2WSDL 和 WSDL2Java 创建 WSDL 文件，客户端希望传递 java.io.File 数据类型。当然没用。

我现在正在尝试使用 SOAP 附件和 MTOM 或 SwA 上传文件。我已经在axis2\WEB-INF\conf\axis2.xml 中启用了它们

服务器端，我的服务操作的签名是：

```
public String uploadAttachment(OMElement omEle); 
```

这是使用 Java2WSDL 工具生成的 WSDL：

```
<wsdl:definitions xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:ns1="http://org.apache.axis2/xsd" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" xmlns:xsd="http://services.italsystem.it" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" targetNamespace="http://services.italsystem.it">
<wsdl:types>
    <xs:schema attributeFormDefault="qualified" elementFormDefault="qualified" targetNamespace="http://services.italsystem.it">
        <xs:element name="uploadAttachment">
            <xs:complexType>
                <xs:sequence>
                    <xs:element minOccurs="0" name="omEle" nillable="true" type="xs:anyType"/>
                </xs:sequence>
            </xs:complexType>
        </xs:element>
        <xs:element name="uploadAttachmentResponse">
            <xs:complexType>
                <xs:sequence>
                    <xs:element minOccurs="0" name="return" nillable="true" type="xs:string"/>
                </xs:sequence>
            </xs:complexType>
        </xs:element>
    </xs:schema>
</wsdl:types>
<wsdl:message name="uploadAttachmentRequest">
    <wsdl:part name="parameters" element="xsd:uploadAttachment"/>
</wsdl:message>
<wsdl:message name="uploadAttachmentResponse">
    <wsdl:part name="parameters" element="xsd:uploadAttachmentResponse"/>
</wsdl:message>
<wsdl:portType name="ImportServicePortType">
    <wsdl:operation name="uploadAttachment">
        <wsdl:input message="xsd:uploadAttachmentRequest" wsaw:Action="urn:uploadAttachment"/>
        <wsdl:output message="xsd:uploadAttachmentResponse" wsaw:Action="urn:uploadAttachmentResponse"/>
    </wsdl:operation>
</wsdl:portType>
<wsdl:binding name="ImportServiceSoap11Binding" type="xsd:ImportServicePortType">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
    <wsdl:operation name="uploadAttachment">
        <soap:operation soapAction="urn:uploadAttachment" style="document"/>
        <wsdl:input>
            <soap:body use="literal"/>
        </wsdl:input>
        <wsdl:output>
            <soap:body use="literal"/>
        </wsdl:output>
    </wsdl:operation>
</wsdl:binding>
<wsdl:binding name="ImportServiceSoap12Binding" type="xsd:ImportServicePortType">
    <soap12:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
    <wsdl:operation name="uploadAttachment">
        <soap12:operation soapAction="urn:uploadAttachment" style="document"/>
        <wsdl:input>
            <soap12:body use="literal"/>
        </wsdl:input>
        <wsdl:output>
            <soap12:body use="literal"/>
        </wsdl:output>
    </wsdl:operation>
</wsdl:binding>
<wsdl:binding name="ImportServiceHttpBinding" type="xsd:ImportServicePortType">
    <http:binding verb="POST"/>
    <wsdl:operation name="uploadAttachment">
        <http:operation location="uploadAttachment"/>
        <wsdl:input>
            <mime:content type="application/xml" part="parameters"/>
        </wsdl:input>
        <wsdl:output>
            <mime:content type="application/xml" part="parameters"/>
        </wsdl:output>
    </wsdl:operation>
</wsdl:binding>
<wsdl:service name="ImportService">
    <wsdl:port name="ImportServiceHttpSoap11Endpoint" binding="xsd:ImportServiceSoap11Binding">
        <soap:address location="http://localhost:8080/axis2/services/ImportService"/>
    </wsdl:port>
    <wsdl:port name="ImportServiceHttpSoap12Endpoint" binding="xsd:ImportServiceSoap12Binding">
        <soap12:address location="http://localhost:8080/axis2/services/ImportService"/>
    </wsdl:port>
    <wsdl:port name="ImportServiceHttpEndpoint" binding="xsd:ImportServiceHttpBinding">
        <http:address location="http://localhost:8080/axis2/services/ImportService"/>
    </wsdl:port>
</wsdl:service>
</wsdl:definitions> 
```

客户端，我尝试调用该服务：

```
Options options = new Options();
options.setTo(new EndpointReference("http://localhost:8080/axis2/services/ImportModule"));
options.setProperty(Constants.Configuration.ENABLE_SWA, Constants.VALUE_TRUE);
options.setTransportInProtocol(Constants.TRANSPORT_HTTP);
options.setSoapVersionURI(SOAP11Constants.SOAP_ENVELOPE_NAMESPACE_URI);

ServiceClient sender = new ServiceClient(null,null);
sender.setOptions(options);
OperationClient mepClient = sender.createClient(ServiceClient.ANON_OUT_IN_OP);

MessageContext mc = new MessageContext();
SOAPFactory factory = OMAbstractFactory.getSOAP12Factory();
SOAPEnvelope env = factory.getDefaultEnvelope();
mc.setEnvelope(env);
FileDataSource fileDataSource = new FileDataSource(new File("c:\\test.jpg"));
DataHandler dataHandler = new DataHandler(fileDataSource);
mc.addAttachment("FirstAttachment",dataHandler);

mepClient.addMessageContext(mc);
mepClient.execute(true); 
```

但是我在执行调用时收到一个 Axis Fault，告诉我“参数数量错误”。

我还尝试使用使用 WSDL2Java 生成的客户端调用该服务：

```
ImportServiceStub stub = new ImportServiceStub("http://localhost:8080/axis2/services/ImportModule");
UploadAttachment ua = new UploadAttachment();
FileDataSource fileDataSource = new FileDataSource(new File("c:\\test.jpg"));
DataHandler dataHandler = new DataHandler(fileDataSource);
ua.setOmEle(dataHandler);

UploadAttachmentResponse res = stub.uploadAttachment(ua); 
```

但我得到另一个轴故障：“org.apache.axiom.om.impl.llom.OMTextImpl 不能转换为 org.apache.axiom.om.OMElement”。但我不知道我可以为生成的方法“setOmEle”提供什么参数，因为它是一个对象类型。

我认为上传文件是人们可以想象的简单服务之一.. :P 我真的希望有人能给我一些建议，这个问题让我抓狂！

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T09:16:08.087

它实际上很简单：启用 MTOM（但不是 SwA）并`DataHandler`用作参数类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T10:02:43.403

看看这里，也请考虑一下使用Servlet的doPost；正如线程所建议的那样 - [Axis2 File Upload by chunk](https://stackoverflow.com/questions/4204112/axis2-file-upload-by-chunk)

如果您还没有看到这一点，那么也请检查这一点以了解有关您使用的方法的详细信息[http://axis.apache.org/axis2/java/core/docs/mtom-guide.html](http://axis.apache.org/axis2/java/core/docs/mtom-guide.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T13:21:06.000

安德烈亚斯的建议真的很有帮助！我尝试将一个字节数组传递给服务，但是我遇到了一些问题，例如服务器上的文件大小与客户端上的文件大小不同。

使用 DataHandler 我没有这样的问题。我在 Axis (\WEB-INF\conf\axis2.xml) 中启用了 MTOM。我的服务操作签名是这样的：

```
public String importFile(String name, DataHandler dh); 
```

而客户端，在我用 WSDL2Java 生成客户端之后，我使用了如下服务：

```
ImportServiceStub stub = new ImportServiceStub("http://localhost:8080/axis2/services/ImportModule");
ImportFile importFile = new ImportFile(); //operation name
DataSource fds = new FileDataSource(new File("FileName"));
importFile.setName("FileName");
importFile.setDh(new DataHandler(fds));
stub.importFile(importFile); 
```

再次感谢您的支持和建议：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-20T11:02:06.947

当我使用 wsdltojava 生成存根时，我可以成功地做到这一点，但是当我使用 wsimport 命令尝试相同时，我在服务器端接收到空参数数据。

我正在遵循以下过程。

1.  使用 jax ws 规范和 mtom soap 11 绑定编写服务端代码`@BindingType(value = SOAPBinding.SOAP11HTTP_MTOM_BINDING)`
2.  生成.aar文件上传到axis2服务器（axis1.6.2 & tomcat 6/7）
3.  从axis2服务器生成wsdl文件，只需点击服务名称。
4.  使用 wsimport -keep -verbose wsdl url 生成的存根
5.  使用 mtom enable 测试代码

    ```
     //Enable MTOM
     SOAPBinding binding = (SOAPBinding) bp.getBinding();
     binding.setMTOMEnabled(true); 
    ```

6.  结果：- 使用 Sting 和字节传递 i/p 但收到的 i/p @service 方法为空

# php - jQuery hide() 闪烁

> ID：10650264
> 
> 赞同：0
> 
> 时间：2012-05-18T09:43:23.447
> 
> 标签：php, jquery, hide, flicker

我有一个 PHP 脚本，它在带有一些输入的表单上运行验证。一旦页面重新加载，我想隐藏（）错误然后让它们淡入（而不是让它们出现）。

我遇到的问题是，尽管脚本有效......当页面加载时，错误字段会轻微闪烁。

```
<div class="error">sample error</div>

$(document).ready(function() 
{
    if($('div.error').length > 0)

    {

       $('div.error').hide();

        if($('div.error:hidden'))
        {
            $('div.error').delay('1000').fadeIn('2000');   
        }

    }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:46:45.820

您的错误框是否在页面加载之前隐藏？

查看您的代码，它将出现，然后在文档准备好时被 JavaScript 隐藏，然后淡入。

我建议您在错误字段中添加一个名为的类，`hidden`并在样式表中将其声明为`.hidden{ display:none;}`

然后调整你的js是这样的：

```
$(document).ready(function() 
{
    if($('div.error').length > 0)

    {

       $('div.error').hide().removeClass('hidden');

        if($('div.error:hidden'))
        {
            $('div.error').delay('1000').fadeIn('2000');   
        }

    }
} 
```

# sql-server - 无法使用 Windows Sql Azure 连接字符串连接到 Windows 桌面应用程序？

> ID：10650268
> 
> 赞同：0
> 
> 时间：2012-05-18T09:43:30.747
> 
> 标签：sql-server, azure

我们第一次使用窗口 Azure，我们已经在窗口 Sql Azure 服务器上部署了我们的 SQL 服务器数据库。使用来自 SQL Azure 服务器的连接字符串，我们能够成功连接 Web 应用程序，同时当我们尝试连接桌面应用程序时，它总是抛出“一般网络错误”？

为了解决这个问题，我们检查了防火墙，一切似乎都很好。

任何帮助高度赞赏。

谢谢，鲁佩什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T17:01:27.403

请问您的Web应用程序在哪里运行？它似乎在 Windows Azure 中运行并毫无问题地连接到 SQL Azure。不是吗？我总是很想知道您使用什么工具进行连接？SSMS 或 SQLCMD 或其他什么？

如果您想从本地（从您的桌面）连接 SQL Azure，您确实需要首先在 SQL Azure 防火墙例外列表中添加您的 IP 地址。即使您检查了它，这也可能是主要原因。这是[连接 SQL Azure DB 的指南](http://msdn.microsoft.com/en-us/library/windowsazure/ee336282.aspx)，当您尝试从桌面连接时，请遵循前 3 点。这3点是：

1.  在 SQL Azure 例外列表中添加您的 IP 地址，并在您自己的防火墙例外列表中添加 1433 端口例外
2.  验证您已正确设置防火墙例外
3.  连接到 SQL Azure DB nane XXXX.database.windows.net 时始终使用 login1@servername

之后尝试使用此处描述的[SqlCmd](http://msdn.microsoft.com/en-us/library/windowsazure/ee336280.aspx)。

# assembly - PC 汇编语言 (Paul Carter) - 关于 JO 和 JE 的 Prime.Asm 示例帮助

> ID：10650273
> 
> 赞同：1
> 
> 时间：2012-05-18T09:43:54.973
> 
> 标签：assembly, x86, overflow, instructions

C代码：

```
 #include <stdio.h>

int main()
{
  unsigned guess;          /* current guess for prime      */
  unsigned factor;         /* possible factor of guess     */
  unsigned limit;          /* find primes up to this value */

  printf("Find primes up to: ");
  scanf("%u", &limit);

  printf("2\n");    /* treat first two primes as special case */
  printf("3\n");

  guess = 5;        /* initial guess */
  while ( guess <= limit ) {
    /* look for a factor of guess */
    factor = 3;
    while ( factor*factor < guess && guess % factor != 0 )
      factor += 2;
    if ( guess % factor != 0 )
      printf("%d\n", guess);
    guess += 2;    /* only look at odd numbers */
  }
  return 0;
} 
```

汇编代码（NASM）：

```
 %include "asm_io.inc"

segment .data
Message         db      "Find primes up to: ", 0

segment .bss
Limit           resd    1               ; find primes up to this limit
Guess           resd    1               ; the current guess for prime

segment .text
        global  _asm_main
_asm_main:
        enter   0,0               ; setup routine
        pusha

        mov     eax,  Message
        call    print_string

        call    read_int             ; scanf("%u", & limit );
        mov     [Limit], eax

        mov     eax, 2               ; printf("2\n");
        call    print_int
        call    print_nl
        mov     eax, 3               ; printf("3\n");
        call    print_int
        call    print_nl

        mov     dword [Guess], 5     ; Guess = 5;

while_limit:                         ; while ( Guess <= Limit )
        mov     eax,[Guess]
        cmp     eax, [Limit]
        jnbe    end_while_limit      ; use jnbe since numbers are unsigned

        mov     ebx, 3               ; ebx is factor = 3;
while_factor:
        mov     eax,ebx
        mul     eax                  ; edx:eax = eax*eax
        **jo      end_while_factor     ; if answer won't fit in eax alone**
        cmp     eax, [Guess]
        jnb     end_while_factor     ; if !(factor*factor < guess)
        mov     eax,[Guess]
        mov     edx,0
        div     ebx                  ; edx = edx:eax % ebx
        cmp     edx, 0
        je      end_while_factor     ; if !(guess % factor != 0)

        add     ebx,2                ; factor += 2;
        jmp     while_factor
end_while_factor:
        **je      end_if               ; if !(guess % factor != 0)**
        mov     eax,[Guess]          ; printf("%u\n")
        call    print_int
        call    print_nl
end_if:
        mov     eax,[Guess]
        add     eax, 2
        mov     [Guess], eax         ; guess += 2
        jmp     while_limit
end_while_limit:

        popa
        mov     eax, 0            ; return back to C
        leave                     
        ret 
```

如您所见，我用**标记了两条指令。

首先，MUL 指令将 EAX*EAX 相乘并将值存储在 EDX:EAX 中，如果它太大而无法容纳 EAX，对吧？然后程序检查溢出。那么当值太大而无法适应 EAX 时，系统会检测到溢出并设置 OF=1？为什么？如果需要，该值是否不会同时存储在 EAX 和 EDX 中？

其次，JE指令。评论解释说：如果！（猜测％因子！= 0）。

当程序从那里跳转时没关系：

```
cmp edx,0
je end_while_factor 
```

但是如果跳转是因为溢出检查，或者如果 !(factor*factor < 0)？会好吗？正在比较哪些值？它只是检查ZF？但是它之前不是因为另一个原因（另一个指令）而修改过的。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:31:17.623

是的，当 EDX 寄存器变为非零时，MUL 指令设置 OF 标志。换句话说，当乘法产生不再适合 32 位无符号整数的结果时。正在测试的表达式`factor*factor < guess`是`guess`32 位无符号整数的位置。所以代码生成器会生成不错的代码，如果设置了溢出标志，那么表达式将始终为假，无论猜测的值如何。另一种情况更糟，如果存在溢出，则表达式的结果可能为真。

不幸的是，它随后摸索了跳转目标，英特尔手册指定 MUL 未定义 ZF 标志。所以这对我来说看起来像是一个代码生成器错误。目前尚不清楚是什么编译器生成了此代码，或者这是否只是 C 代码的手工输入替代品。代码生成器通常不会生成这样的代码，所以我很容易假设它只是手动输入代码中的一个错误。

# javascript - jQuery Mobile App 的后台工作者

> ID：10650276
> 
> 赞同：2
> 
> 时间：2012-05-18T09:44:14.863
> 
> 标签：javascript, jquery, html, jquery-mobile

我正在使用带有 html5 的 jQuery mobile 来支持 Android/iOS 设备。是否有任何控制/技术可以像后台工作人员一样工作？我所需要的是，我想在后台将一些数据推送到服务器。请指导我完成这个。

谢谢你，

尼米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:04:29.207

有[Web Workers](https://developer.mozilla.org/En/Using_web_workers)，但并不是每个浏览器都支持它们 ( [http://caniuse.com/#search=webworkers](http://caniuse.com/#search=webworkers) )。

# sql - 用数据修改列类型，不删除数据

> ID：10650278
> 
> 赞同：20
> 
> 时间：2012-05-18T09:44:30.783
> 
> 标签：sql, sql-server, sql-server-2008

我有一个我认为被错误宣布的专栏。它包含数据，我不希望丢失数据。

我希望将定义从 varchar(max) 更改为 varchar(an integer)。我的印象是我不能只改变列类型？

最好的方法是创建一个临时列“column2”，将数据传输到该列，从有问题类型的列，删除问题列，然后将临时列重命名为原始有问题的列？

如果是这样，我如何将问题列中的值复制到新列？

编辑：对于任何有同样问题的人，您*可以*使用 ALTER 语句。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-18T09:46:49.913

只要数据类型有点“相关” - 是的，你绝对可以这样做。

您可以将 an 更改`INT`为 a `BIGINT`- 第二种类型的值范围更大，因此您不会有“丢失”任何数据的危险。

您可以将 a 更改`VARCHAR(50)`为`VARCHAR(200)`- 再次，类型兼容，大小越来越大 - 没有截断任何内容的风险。

基本上，你只需要

```
ALTER TABLE dbo.YourTable
ALTER COLUMN YourColumn VARCHAR(200) NULL 
```

管他呢。只要您的字符串长度不超过这 200 个字符，就可以了。不确定如果您确实有更长的字符串会发生什么 - 转换将失败并出现错误，或者它会继续并告诉您某些数据可能已被截断。**所以我建议你先在你的数据副本**上试试这个:-)

`VARCHAR`如果您需要将 a 更改为 an或类似的东西，它会变得有点棘手`INT`- 显然，如果您的列值不“适合”新类型，则转换将失败。但即使使用单独的“临时”新列也无法解决此问题——您需要以某种方式处理那些“不兼容”的情况（忽略它们，将 NULL 保留在那里，将它们设置为默认值 - 某些东西）。

`VARCHAR`此外，如果您有非西欧字符，则在和之间切换`NVARCHAR`可能会变得棘手 - 您可能会在转换时丢失某些条目，因为它们不能以另一种格式表示，或者从一种类型到另一种类型的“默认”转换没有按预期工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T09:55:52.080

计算该表的该列存储的最大数据长度。

```
Select max(len(fieldname)) from tablename 
```

现在，您可以将该列的大小减小到上一个查询中得到的结果。

```
ALTER TABLE dbo.YourTable
ALTER COLUMN YourColumn VARCHAR(200) NULL 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-05T07:30:51.827

根据 PostgreSQL[文档](https://www.postgresql.org/docs/9.6/static/ddl-alter.html#AEN2864)，您可以简单地`alter table`

```
ALTER TABLE products ALTER COLUMN price TYPE numeric(10,2); 
```

**但事情是这样的**

> 只有当列中的每个现有条目都可以通过隐式强制转换转换为新类型时，这才会成功。如果需要更复杂的转换，您可以添加一个 USING 子句，指定如何从旧值计算新值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T09:48:33.973

添加一个类型为 varchar(NN) 的临时 column2，运行`update tbl set column2 = column`，检查是否发生任何错误；如果一切正常，请更改原始列，将数据复制回来并删除 column2。

# java - GateIn 中的 Portlet 会话注销

> ID：10650279
> 
> 赞同：0
> 
> 时间：2012-05-18T09:44:37.033
> 
> 标签：java, session, jboss, portal, gatein

我对 GateIn 3.1 门户有疑问。当用户从门户注销时，我不知道如何终止 portlet 会话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:25:07.783

它是产品的一个错误，请按照我也遇到类似问题的[帖子](https://community.jboss.org/thread/160715)，但使用 JBoss EPPv5.1，其中 portlet 会话在注销时没有失效。已在 EPP v5.2 中修复的一个主要安全漏洞，因为它基于 Gatein，我相信您不会在较新版本的 Gatein 中发现此问题。干杯!

# ajax - django memcached 和 ajax 请求

> ID：10650282
> 
> 赞同：2
> 
> 时间：2012-05-18T09:44:52.817
> 
> 标签：ajax, django, memcached

我为我的 django 应用程序设置了 memcached（unix 套接字）。然而，当 memcached 开启时，似乎某些 ajax 请求无法正常工作。我在整个网站上使用 memcached。

例如，在这个 javascript 函数中，该`.load()`指令第一次工作，但之后它一直从缓存中“获取”相同的页面。

```
function placeBet(user, bet) {
    var ajax_data = {
        status:false,
        message: ''
    }

    $.ajax({
        url:'/place_bet/' + user + '/?ajax=&bet=' + bet,
        type:"POST",
        dataType:"json",
        data:ajax_data,
        success:function (data){
            var message = "";
            $('#user_open_bets').load('/ob/' + user + '/?ajax=');
            if (data.status == false){
                alert(data.message);
            }
        } // success
    }); // ajax
} 
```

如何强制这些 ajax 请求从数据库而不是从缓存重新加载？

编辑。

这是我的`settings.py`中间件课程

```
 MIDDLEWARE_CLASSES = (
     'django.middleware.cache.UpdateCacheMiddleware',
     'django.middleware.common.CommonMiddleware',
     'django.contrib.sessions.middleware.SessionMiddleware',
     'django.middleware.csrf.CsrfViewMiddleware',
     'django.contrib.auth.middleware.AuthenticationMiddleware',
     'django.contrib.messages.middleware.MessageMiddleware',
     'debug_toolbar.middleware.DebugToolbarMiddleware',
     'django.middleware.clickjacking.XFrameOptionsMiddleware',
     'main.common.tz_middleware.TimezoneMiddleware',
     'main.common.sslMiddleware.SSLRedirect',
     'django.middleware.cache.FetchFromCacheMiddleware', 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:23:13.473

这是默认浏览器行为（缓存 ajax 请求）。为避免将成瘾参数传递给您的请求：

```
url:'/place_bet/' + user + '/?ajax=&bet=' + bet+'&t='+new Date().getTime() 
```

编辑：要加载的正确网址是：

```
'/ob/' + user + '/?ajax=&t=' + new Date().getTime() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:43:18.913

似乎答案比我想象的要简单。我在 django 文档中找到了解决方案。

[https://docs.djangoproject.com/en/dev/topics/cache/#controlling-cache-using-other-headers](https://docs.djangoproject.com/en/dev/topics/cache/#controlling-cache-using-other-headers)

我复制粘贴（让其他人知道）

```
from django.views.decorators.cache import never_cache

@never_cache
def myview(request):
    # ... 
```

话虽如此，@Alex 的建议似乎很有趣，我想尝试一下。但是现在我的服务器由于迁移原因而关闭。我需要等几个小时。稍后我会在这里报告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T12:26:48.477

您是否尝试过添加参数

```
cache: false, 
```

你的ajax请求？例如：

```
$.ajax({
    url:'/place_bet/' + user + '/?ajax=&bet=' + bet,
    type:"POST",
    dataType:"json",
    data:ajax_data,
    cache: false,
    success:function (data){
        var message = "";
        $('#user_open_bets').load('/ob/' + user + '/?ajax=');
        if (data.status == false){
            alert(data.message);
        }
    } // success
}); 
```

# android - SDK Setup.exe 和 SDK Manager.exe 是在哪个版本的 Android SDK 中引入的？

> ID：10650288
> 
> 赞同：0
> 
> 时间：2012-05-18T09:44:58.393
> 
> 标签：android, sdk, version, revision

由于我目前正在使用依赖于非常具体的 Android SDK 版本的遗留 Android 代码，我需要知道这两个 exe 文件是在**哪个版本的 Android SDK中引入的：**

**SDK 安装程序.exe**

**SDK管理器.exe**

# android - 如何知道文件是否存在于服务器上或不存在于android中

> ID：10650298
> 
> 赞同：1
> 
> 时间：2012-05-18T09:45:56.330
> 
> 标签：android, android-layout

我想知道服务器上是否存在特定文件。例如，假设我的`.xml`服务器上有一个文件，我想通过我的 android 应用程序中的 java 知道该文件是否存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:48:50.193

它是什么服务器？如果它的 HTTP 服务器，您可以请求该文件并从响应中检查它是否存在。如果是自定义服务器，您必须自己实现该功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:50:20.957

你可以使用这样的东西：

```
 URL url = null;
    URLConnection connection = null;
    InputStreamReader stream = null;

    // Parse the URL
    try {
        url = new URL(urlString);
    } catch (MalformedURLException e1) {
        System.out.println("Malformed URL");
        return null;
    }

    // Open a connection to the URL
    try {
        connection = url.openConnection();
    } catch (IOException e) {
        System.out.println("Could not create connection");
        return null;
    }

    // Get the remote file
    try {
        stream = new InputStreamReader(connection.getInputStream());
    } catch (IOException e) {
        System.out.printf("File \"%s\" does not exist!",urlString);
        return null;
    } 
```

# jquery - 即使默认为空，如何完全清空输入文本

> ID：10650304
> 
> 赞同：0
> 
> 时间：2012-05-18T09:46:29.147
> 
> 标签：jquery

我有几个输入，一些提供默认值，一些是空的，**并由一个选择值动态填充**。

当我进行选择时，选择框的值被插入到输入文本中。

问题是当文本字段为空时，然后用选择值填充，然后使用重置/清除按钮，输入文本没有被清空，但它仍然保持动态插入的值：

输入：

```
<input type="text" value="" name="yahoo">
<input type="text" value="some default value" name="google">
<button class="button clear" type="button" accesskey="x">Clear</button> 
```

查询：

```
$('button.clear').click(function () {
  $('input').val(''); // this clears google, but not yahoo
}); 
```

一些选择框将值动态输入到文本字段。有什么想法可以完全清空文本字段吗？谢谢

脚步：

1.  我确实更改了一个选择框

2.  select 的值被插入到文本字段中。一切都很好

3.  问题是当默认值为空时，清除按钮不会清空文本字段（动态填充）

我将用简化的代码澄清我的问题：

```
$('select').swicthClass();

$.fn.swicthClass = function (options) {
 // .............
};

var src = 'some-value-from-select-box'; // hence good, bad etc
$('body.bad').find('input[name="yahoo"]').val(src); 

<select>
  <option selected="selected" value="good">Good</option>
      <option value="bad">Bad</option>
      <option value="worse">Worse</option>
      <option value="damn">Damn</option>
    </select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T10:32:05.383

你可能想试试这个

```
$('button.clear').click(function () {
  $('input').val('');
});

$("select").on("change", function() {
  var src = 'good';
  $('[name=yahoo]').val(src); 
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
<input type="text" value="" name="yahoo" >
<input type="text" value="some default value" name="google">
<button class="button clear" type="button" accesskey="x">Clear</button>

<select>
  <option selected="selected" value="good">Good</option>
  <option value="bad">Bad</option>
  <option value="worse">Worse</option>
  <option value="damn">Damn</option>
</select>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:53:17.380

您可以尝试这种其他方式来做到这一点：

```
 $('button.clear').click(function () {
    $('input').attr('value', '') ;// this clears google, but not yahoo
}); 
```

# image - 条形码图像的缩放是否会损坏它？

> ID：10650305
> 
> 赞同：9
> 
> 时间：2012-05-18T09:46:29.473
> 
> 标签：image, barcode, scaling

我有一个条形码图像。我必须把它变小。

这会损坏条形码吗？

1.  比例缩放

2.  非比例缩放（仅高度变化）

条形码为：UPC-A / EAN-13 型“垂直线”。对不起，不是条形码专家，认为条形码的类型并不重要。缩放适中，图像不会丢失相关数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T09:53:16.797

对于常规的线性产品条形码，简单的答案是肯定的，您可以对其进行缩放（两种情况都是安全的）。

但是，如果您缩放得太远并且条形最终靠得太近，您将开始出现高水平的读取错误。

您需要使用适当的条形码阅读器对其进行测试，以确保您没有进行过多的缩放。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-18T10:01:54.450

常规条形码（=垂直条纹）由线条的相对宽度识别。因此，水平高度只对对角扫描的鲁棒性很重要。如果使用手持扫描仪扫描代码，我只需缩放高度（或裁剪图像）。无论如何，线条的不同宽度仍应清晰可见。可能有合规规则建议给定条形码标准的最低比例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-07T11:24:45.997

缩放条形码时，您必须牢记几件事。

1）如果每个模块（最窄的条）是整数个像素宽，您将获得条码中绝对最锐利的边缘。

2）如果模块宽度不是整数像素，则生成每个模块宽度为截断整数的条形码，并使用[双线性插值](https://en.wikipedia.org/wiki/Bilinear_interpolation)放大。这将在边缘最多为您提供一个像素的渐变。

3）购买条码库时要小心，选择一个包含内置缩放保存条码的，比如[这个](https://barcode.tec-it.com/)或者[这个](https://shop.progsbase.com/product/barcode-creation-software-library-sdk/)。条形码具有图像处理通常不具备的特殊要求，例如像素完美。使用例如[Gimp](https://www.gimp.org/)可能会损坏条形码。

# jquery - jQuery appendTo - 追加特定 特定的标签 同时标记

> ID：10650317
> 
> 赞同：0
> 
> 时间：2012-05-18T09:47:15.847
> 
> 标签：jquery, append, appendto

非常简单的解决方案我敢肯定，但不能为我的生活解决它！非常感谢任何帮助...

基本上我有四个'li'，每个都有自己的'p'。使用 jQuery，我想用类“overlay”创建一个新的“div”，然后将每个“p”移动到相应的“div”中。

到目前为止，我已经设法创建了“div”，但最终将所有四个“p”标签复制到所有四个“div”中......

[在http://jsfiddle.net/NhezT/4/](http://jsfiddle.net/NhezT/4/)上放了一个模型

我的 HTML：

```
<ul class="cat_ul">
    <li class="cat_li music_production">
        <div class="cat_bxs">
            <a href="#"><img class="cat_img" src="#"></a>
        </div>
        <p class="legend">Music Production</p>
    </li>
    <li class="cat_li web_development">
        <div class="cat_bxs">
            <a href="<#"><img class="cat_img" src="#"></a>
        </div>
        <p class="legend">Web Development</p>
    </li>
    <li class="cat_li online_promotion">
        <div class="cat_bxs">
            <a href="#"><img class="cat_img" src="#"></a>
        </div>
        <p class="legend">Online Promotion</p>
    </li>
    <li class="cat_li tutor_mentor">
        <div class="cat_bxs">
            <a href="#"><img class="cat_img" src="#"></a>
        </div>
        <p class="legend">Tutor And Mentor</p>
    </li>
</ul>​ 
```

我的 CSS：

```
.cat_ul {
    list-style: none;
    width: 840px;
    margin: 0;
    padding: 0;
}
.cat_li {
    cursor: pointer;
    float: left;
    margin: 0 10px;
}
.cat_bxs {
    position: relative;
    width: 170px;
    height: 170px;
    background: -webkit-gradient(radial, center center, 0, center center, 460, from(rgba(255,255,255,0)), to(rgba(0,0,0,.15)));
    background: -webkit-radial-gradient(circle, rgba(255,255,255,0), rgba(0,0,0,.15));
    background: -moz-radial-gradient(circle, rgba(255,255,255,0), rgba(0,0,0,.15));
    background: -ms-radial-gradient(circle, rgba(255,255,255,0), rgba(0,0,0,.15));
    background: -o-radial-gradient(circle, rgba(255,255,255,0), rgba(0,0,0,.15));
    background-repeat: no-repeat;
}
.cat_bxs a {
    display: block;
}
.cat_bxs a img {
    width: 50%;
    height: 50%;
    margin: 25% 25%;
}
.cat_li .overlay {
    display: table;
    position: absolute;
    width: 150px;
    height: 150px;
    left: 0;
    top: 0;
    padding: 10px;
    background: rgba(0,0,0,.5);
    opacity: 0;
}
.cat_li.music_production .overlay {
    background: rgba(216,182,24,.5);
}
.cat_li.web_development .overlay {
    background: rgba(92,164,64,.5);
}
.cat_li.online_promotion .overlay {
    background: rgba(166,66,66,.5);
}
.cat_li.tutor_mentor .overlay {
    background: rgba(41,140,191,.5);
}
.cat_li .overlay p {
    display: table-cell;
    position: relative;
    vertical-align: middle;
    text-transform: uppercase;
    font-size: 10px;
    text-align: center;
    line-height: 2em;
    width: 100%;
    height: 100%;
    color: #333;
}​ 
```

我的 JavaScript：

```
// Append Function (Broken)

$(document).ready(function () {
    $('.cat_bxs').append('<div class="overlay"></div>');

    $('.cat_li').each(function(){
        $(this).children('.legend').appendTo('.overlay');

    });
});

//Hover Fade

$(document).ready(function () {   
            $(".cat_bxs").hover(function () {
                $("a", this).animate({
                    "opacity": "0.25"
                }, 600, function () {
                    $(this).next(".overlay").animate({
                        "opacity": "1"
                    }, 500);
                });
            }, function () {
                var self = this;
                var inter = setInterval(function () {
                    if (!$(".overlay", self).is(':animated') && !$(".overlay", self).prev("a").is(':animated')) {
                        clearInterval(inter);
                        $(".overlay", self).animate({
                            "opacity": "0"
                        }, 500, function () {
                            $(this).prev("a").animate({
                                "opacity": "1"
                            }, 600);
                        });
                    }
                }, 100);
            });
}); 
```

非常感谢提前...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:27:22.053

试试这个：

```
$('.cat_li').each(function(){
    var $li = $(this);        
    $li.find('.legend').appendTo($li.find('.overlay'));
}); 
```

# jquery - jQuery 多个 div 使用锚点显示隐藏功能

> ID：10650318
> 
> 赞同：0
> 
> 时间：2012-05-18T09:47:19.373
> 
> 标签：jquery, html, hide, anchor, show

[http://jsfiddle.net/BXNE9/1/](http://jsfiddle.net/BXNE9/1/)我想使用相关链接通过锚点打开 div。当我单击链接时，相关的 div 正在显示，但是当我单击其他链接时，前一个 div 也会显示。

我想通过锚点打开相关链接上的 div，但是当我单击另一个链接时，前一个 div 需要关闭。在所有链接和相关 div 中相同。请帮我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T09:53:50.180

您需要像这样在点击回调中隐藏所有 div

```
var tabs = $('ul.menu li a');

    tabs.bind('click',function(event){
        var $anchor = $(this);
        var ids = tabs.each(function(){
           $($(this).attr('href')).hide();   
        });
        $($anchor.attr('href')).fadeIn('slow');
        event.preventDefault();
    }); 
```

这里[http://jsfiddle.net/joycse06/BXNE9/2/](http://jsfiddle.net/joycse06/BXNE9/2/)

当用户单击链接时，我首先使用[$.each](http://api.jquery.com/each/)循环隐藏所有 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:55:56.363

或者你可以这样做.. div 一个 css 类到父 div 和

```
<div style="width:1000px; height:450px; margin-top:50px;">

<div style="width:350px; height:250px; margin:0 auto;" class="test">
<div id="firstDiv" style="background:#03F; width:350px; height:250px; float:left; display:none;">First Div</div>
<div id="secondDiv" style="background:#06F; width:350px; height:250px; float:left; display:none;">Second Div</div>
<div id="thirdDiv" style="background:#09F; width:350px; height:250px; float:left; display:none;">Third Div</div>
<div id="fourthDiv" style="background:#0CF; width:350px; height:250px; float:left; display:none;">Fourth Div</div>
</div> 
```

​</p>

js代码..

```
$(document).ready(function() {

    var tabs = $('ul.menu li a');

    tabs.bind('click',function(event){
        var $anchor = $(this);
        $(".test div").fadeOut('slow');
        $($anchor.attr('href')).fadeIn('slow');

        event.preventDefault();
    });

});​ 
```

[Jsfiddle](http://jsfiddle.net/BXNE9/3/)为此..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T09:59:53.310

另一种可能的解决方案是将一个类或 id 放在淡入元素周围的 div 上：

```
<div style="width:1000px; height:450px; margin-top:50px;">

<div class="fadein" style="width:350px; height:250px; margin:0 auto;">

    <div id="firstDiv" style="background:#03F; width:350px; height:250px; float:left; display:none;">First Div</div>
    <div id="secondDiv" style="background:#06F; width:350px; height:250px; float:left; display:none;">Second Div</div>
    <div id="thirdDiv" style="background:#09F; width:350px; height:250px; float:left; display:none;">Third Div</div>
    <div id="fourthDiv" style="background:#0CF; width:350px; height:250px; float:left; display:none;">Fourth Div</div>

</div> 
```

然后在淡入新的之前使用 .children 隐藏它们：

```
$(document).ready(function() {

    var tabs = $('ul.menu li a');

    tabs.bind('click',function(event){
        $('.fadein').children().hide();
        var $anchor = $(this);
        $($anchor.attr('href')).fadeIn('slow');
        event.preventDefault();
    });

});​ 
```

[http://jsfiddle.net/BXNE9/4/](http://jsfiddle.net/BXNE9/4/)

# javascript - 如何从字符串中的方法名称调用 javascript 函数？

> ID：10650319
> 
> 赞同：0
> 
> 时间：2012-05-18T09:47:20.247
> 
> 标签：javascript, jquery, string, function

有谁知道如何调用 javascript 函数，例如

```
function sampleCallback() {
      alert("hello");
} 
```

来自字符串“sampleCallback()”？

我有一个像这样的多维数组：

```
hintSlidesArray = [
                    [{ "element": "noelement" }, { "hintMessage": "Welcome"}, "callback": "sampleCallback" }],
                  ]; 
```

并且想将回调字符串传递给它，以便我可以从读取数组的位置运行它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T09:49:46.663

任何全局变量——包括函数——都是全局对象的属性。在浏览器环境中，这是`window`. 因此，您可以使用数组下标语法来访问您要查找的属性：

```
window[hintSlidesArray[0][2].callback](); 
```

如果需要为 指定值`this`，可以使用[`.call()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)或[`.apply()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)：

```
window[hintSlidesArray[0][2].callback].call(value_for_this); 
```

但是，您应该真正考虑将函数而不是其名称存储在对象中。如果在创建对象时函数已经在当前作用域（或全局作用域）中定义，这就像从函数名称中删除引号一样简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:57:57.460

You can call the javascript function using window object:

```
var functionResult = window[myFunctionName]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T09:49:13.843

您可以使用[`call`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/Call)或[`apply`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)方法。例如：

```
hintSlidesArray[0][2].callback.call(this) 
```

# cakephp - Cake PHP 在两张桌子上加入相同的模型

> ID：10650320
> 
> 赞同：1
> 
> 时间：2012-05-18T09:47:21.197
> 
> 标签：cakephp, associations, models

我有一个关于模型关联的问题。考虑以下应用：每个月都会向用户提出一个新问题。这些有能力给出关于这个问题的提示，其他用户有能力对这个提示做出反应。我的模型设置是这样的：

```
Users hasMany Tips, Reactions

Tips belongsTo User

Tips hasMany Reactions

Reactions belongsTo User, Tip 
```

现在我想从所有用户那里获得关于这个问题的所有提示。我在tips-table 上做了一个简单的find all，它返回了所有与他们的用户和反应相关的tips。然而，反应不包含用户，这显然非常重要。

Cake 自动将我的 find all 转换为两个查询：一个在提示表上加入用户，一个在反应表上，但用户表上没有加入，这是我需要的。

所以我的问题是：为什么用户表没有加入反应，我该如何解决这个问题？

代码：

用户模型：

```
public $hasMany = array('Tip', 'Reaction'); 
```

提示模型：

```
public $hasMany = array('Reaction' => array(
        'foreignKey' => 'tip_id'
    ));

public $hasOne = array('User' => array(
        'fields' => array(
            'User.id, User.first_name, User.last_name'
        ),
        'foreignKey' => 'id'
    )); 
```

反应模型：

```
public $belongsTo = array('Tip', 'ReactionUser' => array(
        'className' => 'User',
        'foreignKey' => 'id'
    )); 
```

控制器：

```
$tips = $this->Tip->find('all'); 
```

输出：

```
array(
    (int) 0 => array(
        'Tip' => array(
            'id' => '1',
            'user_id' => '1',
            'question_id' => '1',
            'tip' => 'Testing da new datavbase',
            'votes' => '0',
            'approved' => '1',
            'pic' => '',
            'created' => '2012-05-18 09:22:56'
        ),
        'User' => array(
            'id' => '1',
            'first_name' => 'Bart',
            'last_name' => 'De Bock'
        ),
        'Reaction' => array(
            (int) 0 => array(
                'id' => '1',
                'tip_id' => '1',
                'user_id' => '1',
                'reaction' => 'lorem ipsum',
                'votes' => '0',
                'approved' => '1',
                'pic' => '',
                'created' => '0000-00-00 00:00:00'
            )
        )
    ),
    (int) 1 => array(
        'Tip' => array(
            'id' => '2',
            'user_id' => '2',
            'question_id' => '1',
            'tip' => 'Test',
            'votes' => '0',
            'approved' => '1',
            'pic' => '',
            'created' => '2012-05-18 10:22:51'
        ),
        'User' => array(
            'id' => '2',
            'first_name' => 'Deborah',
            'last_name' => 'Rochtus'
        ),
        'Reaction' => array(
            (int) 0 => array(
                'id' => '2',
                'tip_id' => '2',
                'user_id' => '3',
                'reaction' => 'Say whaat?',
                'votes' => '2',
                'approved' => '1',
                'pic' => '',
                'created' => '2012-05-18 10:33:32'
            ),
            (int) 1 => array(
                'id' => '3',
                'tip_id' => '2',
                'user_id' => '4',
                'reaction' => 'Hmmm..',
                'votes' => '0',
                'approved' => '1',
                'pic' => '',
                'created' => '2012-05-18 10:33:44'
            )
        )
    )
) 
```

如您所见，这些反应不包含关联的用户...

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T04:04:34.247

请试试这个

`$tips = $this->Tip->find('all' array( 'recursive'=>'2' ) );`

根据需要，递归值可能是 1、2、3、4 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T14:32:52.097

使用可包含：

在 AppModel 中：

`public $uses = array('Containable');`

将您的查找调用更改为：

`$this->Tip->find('all', array('contain' => array('User', 'Reaction' => array('User'))));`

# string - ToString.Format 用于小数，但仅在需要时

> ID：10650325
> 
> 赞同：0
> 
> 时间：2012-05-18T09:47:42.003
> 
> 标签：string, string-formatting, vb.net-2010

我有这个属性值，我需要它的字符串值，因为它被记录在读取的 XML 中。

现在我的问题是当我这样做时：

示例值为 1.0

```
MyProperty.StringValue.ToString 
```

给 1

我怎样才能让这个值成为字符串格式，但显示完整输入的 1.0

我试过了

```
MyProperty.StringValue.ToString.Format("D") 
```

这给了 D

请记住，我需要输入的任何值才能按原样显示...

例如，当我有 1.5 时，它会以 1.5 的形式返回

它只发生在另一边为 0...

例子

我不明白更多示例究竟需要什么......它非常简单......

用户输入是 1.0，然后将值转换为字符串，然后它会丢弃 0，所以最后只是 1 那是错误的，因为它是字符串，它应该准确地反映输入的值。

现在，如果我输入 1.5，则该值将转换为字符串，最后返回 1.5 没关系，因为它是这样输入的

如果我输入 132，则该值将转换为字符串，并且应该并且确实返回为 132

希望这已经足够了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:56:28.377

```
String.Format("{0:0.0}",MyProperty.StringValue); 
```

试试这个：

```
String.Format("{0:0.0}",MyProperty); 
```

# java - gxt 网格中的鼠标移动事件

> ID：10650336
> 
> 赞同：1
> 
> 时间：2012-05-18T09:48:41.813
> 
> 标签：java, gwt, gxt

我想在鼠标拖动时选择网格中的行，因为我有以下代码：

我的鼠标事件监听器是`DragMultiSelectListener.java`

```
import java.util.List;

import com.myexample.client.ui.items.AbstractContentItem;
import com.extjs.gxt.ui.client.event.BaseEvent;
import com.extjs.gxt.ui.client.event.Events;
import com.extjs.gxt.ui.client.event.GridEvent;
import com.extjs.gxt.ui.client.event.Listener;

public class DragMultiSelectListener implements Listener<BaseEvent> {

    Presenter presenter = null; 

    /* multiple select on drag */
    private boolean mousePressed = false;  
    private boolean dragEnable = false;
    private boolean selected = false;
    private List<AbstractContentItem> currentSelected = null;
    private int startIndex = -1;
    private int endIndex = -1;
    private int startX=0;
    private int startY=0;
    private int endX=0;
    private int endY=0;

    /** mouseMovedStarted used for preventing calling Grid onClick event for IE while using multiple select on DND  **/
    private boolean mouseMovedStarted = false;

    public DragMultiSelectListener(Presenter pPresenter) {
        this.presenter = pPresenter;
    }

    @Override
    public void handleEvent(BaseEvent be) {
        if(be.getType() == Events.OnMouseDown){
            GridEvent ge = (GridEvent) be;

            /* Multiple Row Select */
            mouseMovedStarted = false;
            mousePressed = true;
            startIndex = ge.getRowIndex();

            /* Deselect All */
            if(ge.getTarget().getClassName().equals("x-grid3-scroller")){
                if(ge.getTarget().getClientWidth() < ge.getTarget().getScrollWidth()){
                    if(ge.getTarget().getClientHeight() < (ge.getClientY() - ge.getTarget().getAbsoluteTop())){
                        mousePressed = false;
                    }
                    if(ge.getTarget().getClientWidth() < (ge.getClientX() - ge.getTarget().getAbsoluteLeft())){
                        mousePressed = false;
                    }
                }
                presenter.deselectAllContentItem();
            }

            /* Select Record */
            if(currentSelected != null && (!presenter.getSelectedContent().isEmpty())){
                selected = false;
                for(AbstractContentItem item : currentSelected){
                    AbstractContentItem clickedItem = (AbstractContentItem) ge.getGrid().getStore().getAt(ge.getRowIndex());
                    if(clickedItem != null && item.getDTO().getId() == clickedItem.getDTO().getId()){
                        selected = true;
                    }
                }
            }else{
                currentSelected = presenter.getSelectedContent();
                selected = false;
            }

            dragEnable = false;

            if(ge.getTarget().getNodeName().equalsIgnoreCase("SPAM")){
                dragEnable = true;
            }

            if(selected){
                dragEnable = true;
            }

            /* draw box */
            if(mousePressed){
                startX = ge.getClientX();
                startY = ge.getClientY();
            }

        }else if(be.getType() == Events.OnMouseMove){
            GridEvent ge = (GridEvent) be;

            if(mousePressed && !dragEnable && (ge.getRowIndex() != -1) ){

                if(startIndex == -1){
                    startIndex = ge.getRowIndex();
                }

                endIndex = ge.getRowIndex();
                presenter.deselectAllContentItem();
                if((startIndex - endIndex) >= 0){
                    for(int i = endIndex; i<=startIndex; i++ ){
                        presenter.selectContentItem(i, true);
                    }
                }else{
                    for(int i = startIndex; i<=endIndex; i++ ){
                        presenter.selectContentItem(i, true);
                    }
                }

                /* Show selection box */
                endX = ge.getClientX();
                endY = ge.getClientY();

            }else if(mousePressed && !dragEnable){

                /* Show selection box */
                endX = ge.getClientX();
                endY = ge.getClientY();

                if(ge.getTarget().getClassName().equals("x-grid3-scroller")){
                    if(startY > endY){
                        presenter.deselectAllContentItem();
                    }
                }

                displaySelectionBox(ge.getGrid().getAbsoluteLeft(), ge.getGrid().getAbsoluteTop());
            }
            mouseMovedStarted = true;

        }else if(be.getType() == Events.OnMouseUp){
            GridEvent ge = (GridEvent) be;
            mousePressed = false;
            currentSelected = presenter.getSelectedContent();

        }
    }

    public boolean isMouseMovedStarted() {
        return mouseMovedStarted;
    }

    public boolean isDragEnable() {
        return dragEnable;
    }

    public void setEndX(int endX) {
        this.endX = endX;
    }

    public void setEndY(int endY) {
        this.endY = endY;
    }

    public boolean isSelected() {
        return selected;
    }

    public void setSelected(boolean selected) {
        this.selected = selected;
    }

    public List<AbstractContentItem> getCurrentSelected() {
        return currentSelected;
    }

    public void setCurrentSelected(List<AbstractContentItem> currentSelected) {
        this.currentSelected = currentSelected;
    }

    public void setMousePressed(boolean mousePressed) {
        this.mousePressed = mousePressed;
    }

} 
```

通过以下代码注册网格事件

```
 dragMultiSelectListener = new DragMultiSelectListener(presenter);
    grid.addListener(Events.OnMouseDown, dragMultiSelectListener);
    grid.addListener(Events.OnMouseMove, dragMultiSelectListener);
    grid.addListener(Events.OnMouseUp, dragMultiSelectListener); 
```

问题是当我移动鼠标快于它会跳过选择一些行。

我不明白，如何提高执行速度以防止跳过行。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:54:45.213

您可以从 dragStart xy 中选择所有行，直到您当前的 x y。只有一件事，你需要行高来计算行。

# android - 您如何检索 WiFi Direct MAC 地址？

> ID：10650337
> 
> 赞同：3
> 
> 时间：2012-05-18T09:48:46.200
> 
> 标签：android, wifi-direct

我正在尝试检索 Android 设备的 MAC 地址。如果 WiFi 开启，这通常可以通过 WiFiManager API 实现。

如果 WiFi 关闭且 WiFi Direct 开启，有什么方法可以获取 MAC 地址？WiFi 和 WiFi Direct 不能在我的手机上同时打开。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-03-01T17:20:28.210

在我的项目中，我一直在寻找这个。我的要求是在使用 WiFi Direct 形成的 adhoc P2p 网络中唯一标识设备。每个设备下次靠近时应识别其朋友设备。我需要我自己的 WiFi（直接）MAC 和我朋友的来创建这个朋友区创建的密钥。

**我的研究：**设计的方式是有一个唯一的通用 ID 和一个本地 ID。**原因：**通用 ID 只能用于连接到基础架构模式网络。本地 ID 可用于“ad-hoc”模式网络（设备到设备）。在这种 ad-hoc 模式下，单个设备可能同时属于多个 ad-hoc 组。

1.  因此，为了支持这种并发操作，P2p 设备支持多个 MAC 实体，可能在不同的通道上。
2.  对于每个会话，持久组可以为每个会话使用不同的通道和设备 MAC。
3.  P2P 设备在发现和协商期间使用其全局 MAC 地址作为设备 ID，并为组内的所有帧使用临时本地 MAC 地址。[从这里了解](http://www.thinktube.com/tech/android/wifi-direct)

但是，没有直接的方法来获取自己的 WiFi P2p MAC 地址。[问题 53437：安卓](https://code.google.com/p/android/issues/detail?id=53437)。

在这个问题讨论中，来自谷歌的项目成员建议这是可能的，只是没有记录在案

> **解决方案：**使用意图过滤器`WifiP2pManager.WIFI_P2P_THIS_DEVICE_CHANGED_ACTION`和意图中的额外内容`WifiP2pManager.EXTRA_WIFI_P2P_DEVICE`

这就是我在项目中使用它的方式：

```
@Override
public void onReceive(Context context, Intent intent) {
....
....
String action = intent.getAction();

if (WifiP2pManager.WIFI_P2P_THIS_DEVICE_CHANGED_ACTION
            .equals(action)) {

        WifiP2pDevice device = (WifiP2pDevice) intent
                .getParcelableExtra(WifiP2pManager.EXTRA_WIFI_P2P_DEVICE);

        String myMac = device.deviceAddress;

        Log.d(TAG, "Device WiFi P2p MAC Address: " + myMac);

/* Saving WiFi P2p MAC in SharedPref */

        sharedPref = context.getSharedPreferences(context.getString(R.string.sp_file_name), Context.MODE_PRIVATE);
        String MY_MAC_ADDRESS = sharedPref.getString(context.getString(R.string.sp_field_my_mac), null);

        if (MY_MAC_ADDRESS == null || MY_MAC_ADDRESS != myMac) {
            SharedPreferences.Editor editor = sharedPref.edit();
            editor.putString(context.getString(R.string.sp_field_my_mac), myMac);
            editor.commit();
        } 
```

希望这对某人有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T15:05:47.287

WiFi的mac地址与WiFi Direct的不同。通常前 2 个字母可能不同。小心点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-16T16:30:58.903

WiFi的mac地址与WiFi Direct的不同。

您可以使用以下代码获取 WiFi 直接地址：

```
 public String getWFDMacAddress(){
    try {
        List<NetworkInterface> interfaces = Collections.list(NetworkInterface.getNetworkInterfaces());
        for (NetworkInterface ntwInterface : interfaces) {

            if (ntwInterface.getName().equalsIgnoreCase("p2p0")) {
                byte[] byteMac = ntwInterface.getHardwareAddress();
                if (byteMac==null){
                    return null;
                }
                StringBuilder strBuilder = new StringBuilder();
                for (int i=0; i<byteMac.length; i++) {
                    strBuilder.append(String.format("%02X:", byteMac[i]));
                }

                if (strBuilder.length()>0){
                    strBuilder.deleteCharAt(strBuilder.length()-1);
                }

                return strBuilder.toString();
            }

        }
    } catch (Exception e) {
        Log.d(TAG, e.getMessage());
    }
    return null;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-01T13:27:58.053

WiFi Direct mac 地址将有所不同。@auselen 在这里[https://stackoverflow.com/a/14480530/3167704](https://stackoverflow.com/a/14480530/3167704)很好地解释了它。

我刚刚想出了一种检索 WiFi Direct mac 地址的方法。它不漂亮，但可以完成工作。这是代码，

```
 final WifiP2pManager p2pManager = (WifiP2pManager) getSystemService(WIFI_P2P_SERVICE);
    final WifiP2pManager.Channel channel = p2pManager.initialize(this, getMainLooper(), null);

    p2pManager.createGroup(channel, new WifiP2pManager.ActionListener() {
        @Override
        public void onSuccess() {
            p2pManager.requestGroupInfo(channel, new WifiP2pManager.GroupInfoListener() {
                @Override
                public void onGroupInfoAvailable(WifiP2pGroup wifiP2pGroup) {
                    Log.i("", wifiP2pGroup.getOwner().deviceAddress);

                    // Following removal necessary to not have the manager busy for other stuff, subsequently
                    p2pManager.removeGroup(channel, new WifiP2pManager.ActionListener() {
                        @Override
                        public void onSuccess() {
                            Log.i("", "Removed");
                        }

                        @Override
                        public void onFailure(int i) {
                            Log.i("", "Failed " + i);
                        }
                    });
                }
            });
        }

        @Override
        public void onFailure(int i) {
            Log.i("", String.valueOf(i));
        }
    }); 
```

# java - 在 Java 中实现 Scala PartialFunction 的最简单方法是什么？

> ID：10650338
> 
> 赞同：12
> 
> 时间：2012-05-18T09:48:48.997
> 
> 标签：java, scala, partialfunction

为了互操作性，我需要从 Java 代码中传递一个 Scala PartialFunction。对于函数（Function1 等），有一个 AbstractFunction，我可以使用匿名类型进行子类化，但对 PartialFunction 执行相同操作的最简单方法是什么？

在这种情况下，我很乐意让它成为 Java 中的“完整”函数，为所有值定义，但类型为 PartialFunction。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-18T10:43:00.483

我在这里要做的是在一些通用库（不支持scala）中提供一个Java接口：

```
//this is Java - in the Java lib
abstract class PartialTransformer<I, O> {
    abstract public boolean isDefinedAt(I i);
    public O transform(I i) {
        if (isDefinedAt(i)) {
            return transform0(i);
        }
        return null;
    }
    abstract protected O transform0(I i);
} 
```

然后，**在 scala**（即依赖于上述 Java 库的 scala 库）中，将 this 的实现转换为`PartialFunction`：

```
//this is scala - in the scala lib
object MyPartialFunctions {
  def fromPartialTransformer[I, O](t: PartialTransformer[I, O]) = new PartialFunction[I, O] {
    def isDefinedAt(i: I) = t isDefinedAt i
    def apply(i: I) = {
      val r = t transform i
      if (r eq null) throw new MatchError
      else r
    }
  }
} 
```

然后你的 Java 代码可以这样做：

```
//This is Java - in your client code
MyPartialFunctions$.MODULE$.fromPartialTransformer(new PartialTransformer<Integer, String>() {
    @Override public boolean isDefinedAt(Integer i) { /* */ }
    @Override protected String transform0(Integer i) { /* */ }
} 
```

如果您不喜欢该`MyPartialFunctions$.MODULE$`语法，则可以*在 scala library 中*使用，这是一个对您隐藏的*Java 类*：

```
//This is Java - in the scala-lib
public class ScalaUtils {
    public <I, O> scala.PartialFunction<I, O> toPartialFunction(PartialTransformer<I, O> t) {
         MyPartialFunctions$.MODULE$.fromPartialTransformer(t);
    }
} 
```

然后您的呼叫站点如下所示：

```
//This is Java - in your client code
ScalaUtils.toPartialFunction(new PartialTransformer<Integer, String>() {
    @Override public boolean isDefinedAt(Integer i) { /* */ }
    @Override protected String transform0(Integer i) { /* */ }
} 
```

这涉及到，咳咳，间接的几个层次！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-18T10:52:04.963

作为对克里斯的回答的补充，在 Scala 2.10 中，您可以使用它：[http ://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/scala/runtime/AbstractPartialFunction.html](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/scala/runtime/AbstractPartialFunction.html)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-18T13:35:38.517

如果您可以使用 Twitter Util 库，它有一个专门用于此的类：http: [//twitter.github.com/util/util-core/target/site/doc/main/api/com/twitter/util/Function。 html](http://twitter.github.com/util/util-core/target/site/doc/main/api/com/twitter/util/Function.html)这与 AbstractPartialFunction 的解决方案基本相同。

# hibernate - EntityManager 使用 Hibernate 4 在 Seam3 中返回 NULL

> ID：10650342
> 
> 赞同：1
> 
> 时间：2012-05-18T09:48:59.507
> 
> 标签：hibernate, persistence, jboss7.x, entitymanager, seam3

我需要您的帮助才能在 jboss 7 和 Hibernate 4 上使用 Seam3 正确配置我的 Web 应用程序。

当我尝试注入 EntityManager 并使用它时，entitymanager 结果为 NULL，但如果尝试通过 Persistence.createEntityManagerFactory("myPU").createEntityManager() 获取 EntityManager，则结果是正确的。

这是我的persistence.xml

```
<?xml version="1.0" encoding="UTF-8"?> 
```

http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">

```
<persistence-unit name="accbetaPU" transaction-type="JTA">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <jta-data-source>accbeta</jta-data-source>
    <properties>               
        <property name="hibernate.dialect" value="org.hibernate.dialect.PostgreSQLDialect" />            
        <property name="hibernate.transaction.manager_lookup_class"
            value="org.hibernate.transaction.JBossTransactionManagerLookup" />
        <property name="hibernate.archive.autodetection" value="class" />
    </properties>
</persistence-unit> 
```

这是我的 EntityManagerProducer

```
@ApplicationScoped
public class EntityManagerProducer{

@PersistenceContext
private EntityManager entityManager;

@Produces
public EntityManager getEntityManager() {
    return entityManager;
}
} 
```

这是我的 /Web-INF/beans.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
http://java.sun.com/xml/ns/javaee/beans_1_0.xsd">
<interceptors>
 <class>org.jboss.seam.faces.context.conversation.ConversationBoundaryInterceptor</class>
<class>org.jboss.seam.transaction.TransactionInterceptor</class>
</interceptors>
</beans> 
```

这是我测试EntityManager的课程...

```
@ApplicationScoped
@Named("first")
public class first implements Serializable{

private static final long serialVersionUID = -1625566649081574918L;
private String testBenvenuto;

@Inject 
   private EntityManager entityManager;

public first() {
    this.testBenvenuto = "Welcome";
    starting();

}

public void starting(){
    this.testBenvenuto = this.testBenvenuto+" "+entityManager;
    this.testBenvenuto = this.testBenvenuto+" "+Persistence.createEntityManagerFactory("accbetaPU").createEntityManager().toString();

}

public String getTestBenvenuto() {
    return testBenvenuto;
}

public void setTestBenvenuto(String testBenvenuto) {
    this.testBenvenuto = testBenvenuto;
}
} 
```

当尝试在 JBOSS As7 中部署（WAR）时，应用程序的部署没有异常......

几个小时后..

我尝试在 EntityManagerProducer 中使用此代码：

```
@ExtensionManaged
    @ConversationScoped
    @Produces
    @PersistenceUnit(unitName="accbetaPU")
    EntityManagerFactory emf; 
```

但我在部署期间遇到此错误：

```
16:14:03,550 INFO [org.jboss.solder.core.CoreExtension] (MSC service thread 1-1) Preventing class org.jboss.seam.international.locale.LocaleConfiguration from being installed as bean due to @Veto annotation
16:14:05,715 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-1) MSC00001: Failed to start service jboss.deployment.unit."accbeta.war".WeldService: org.jboss.msc.service.StartException in service jboss.deployment.unit."accbeta.war".WeldService: org.jboss.weld.exceptions.DefinitionException: WELD-001502 Resource producer field [Resource Producer Field [EntityManagerFactory] with qualifiers [@Any @Default] declared as [[field] @PersistenceUnit @ConversationScoped @Produces startup.first.emf]] must be @Dependent scoped
 at org.jboss.as.weld.services.WeldService.start(WeldService.java:96)
 at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1824) [jboss-msc-1.0.1.GA.jar:1.0.1.GA]
 at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1759) [jboss-msc-1.0.1.GA.jar:1.0.1.GA]
 at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [:1.6.0_25]
 at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [:1.6.0_25]
 at java.lang.Thread.run(Thread.java:662) [:1.6.0_25]
Caused by: org.jboss.weld.exceptions.DefinitionException: WELD-001502 Resource producer field [Resource Producer Field [EntityManagerFactory] with qualifiers [@Any @Default] declared as [[field] @PersistenceUnit @ConversationScoped @Produces startup.first.emf]] must be @Dependent scoped
 at org.jboss.weld.bean.builtin.ee.EEResourceProducerField.checkEEResource(EEResourceProducerField.java:133)
 at org.jboss.weld.bean.builtin.ee.EEResourceProducerField.initialize(EEResourceProducerField.java:125)
 at org.jboss.weld.bootstrap.AbstractBeanDeployer.deploy(AbstractBeanDeployer.java:119)
 at org.jboss.weld.bootstrap.BeanDeployment.deployBeans(BeanDeployment.java:227)
 at org.jboss.weld.bootstrap.WeldBootstrap.deployBeans(WeldBootstrap.java:378)
 at org.jboss.as.weld.WeldContainer.start(WeldContainer.java:81)
 at org.jboss.as.weld.services.WeldService.start(WeldService.java:89)
 ... 5 more

16:14:05,715 INFO [org.jboss.as.controller] (DeploymentScanner-threads - 2) Service status report
 Services which failed to start:
 service jboss.deployment.unit."accbeta.war".WeldService: org.jboss.msc.service.StartException in service jboss.deployment.unit."accbeta.war".WeldService: org.jboss.weld.exceptions.DefinitionException: WELD-001502 Resource producer field [Resource Producer Field [EntityManagerFactory] with qualifiers [@Any @Default] declared as [[field] @PersistenceUnit @ConversationScoped @Produces startup.first.emf]] must be @Dependent scoped 
```

WELD-001502 资源生产者字段 [Resource Producer Field [EntityManagerFactory] ​​与限定符 [@Any @Default] 声明为 [[field] @PersistenceUnit @ConversationScoped @Produces startup.first.emf]] 必须是 @Dependent 范围

我应该怎么办？少了什么东西？

以下是 war 文件中的库列表：

```
commons-beanutils-1.8.0.jar
commons-digester-2.1.jar
commons-logging-1.1.1.jar
cssparser-0.9.5.jar
guava-0.9.jar
hibernate-entitymanager-4.0.0.CR1.jar
jboss-servlet-api_3.0_spec-1.0.0.Final.jar
joda-time-1.6.jar
log4j-1.2.16.jar
ocpsoft-pretty-time-1.0.6.jar
picketlink-idm-api-1.5.0.Alpha02.jar
picketlink-idm-common-1.5.0.Alpha02.jar
picketlink-idm-core-1.5.0.Alpha02.jar
picketlink-idm-spi-1.5.0.Alpha02.jar
postgresql-9.0-801.jdbc4.jar
prettyfaces-jsf2-3.2.0.jar
richfaces-components-api-4.2.1.Final.jar
richfaces-components-ui-4.2.1.Final.jar
richfaces-core-api-4.2.1.Final.jar
richfaces-core-impl-4.2.1.Final.jar
sac-1.3.jar
seam-faces-3.1.0.Final.jar
seam-faces-api-3.1.0.Final.jar
seam-international-3.1.0.Final.jar
seam-international-api-3.1.0.Final.jar
seam-persistence-3.1.0.Final.jar
seam-persistence-api-3.1.0.Final.jar
seam-security-3.1.0.Final.jar
seam-security-api-3.1.0.Final.jar
slf4j-api-1.6.1.jar
slf4j-simple-1.6.1.jar
solder-api-3.1.0.Final.jar
solder-impl-3.1.0.Final.jar
solder-logging-3.1.0.Final.jar 
```

Jboss版本是7.0.2

请帮帮我

* * *

感谢您的回答..我已尝试删除`hibernate-entitymanager-4.0.0.CR1.jar`但`jboss-servlet-api_3.0_spec-1.0.0.Final.jar` 没有效果！

我也改变了 persistence.xml

```
<persistence-unit name="accbetaPU">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <jta-data-source>java:jboss/datasources/AccbetaDS</jta-data-source>
        <properties>
            <!-- Properties for Hibernate (default provider for JBoss AS) -->
            <property name="hibernate.dialect" value="org.hibernate.dialect.PostgreSQLDialect"/>
            <property name="hibernate.hbm2ddl.auto" value="create-drop"/>
            <property name="hibernate.show_sql" value="true"/>
            <!-- Only format when you need to debug, because it slows things down -->
            <property name="hibernate.format_sql" value="false"/>
            <property name="hibernate.show_sql" value="false"/>
            <property name="hibernate.transaction.manager_lookup_class"
                value="org.hibernate.transaction.JBossTransactionManagerLookup" />
        </properties>
    </persistence-unit> 
```

当我尝试以这种方式创建实体管理器时......

```
@ExtensionManaged
    @ConversationScoped
    @Produces
    @PersistenceUnit(unitName="accbetaPU")
    EntityManagerFactory emf; 
```

错误是一样的......

```
17:11:20,589 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-4) MSC00001: Failed to start service jboss.deployment.unit."accbeta.war".WeldService: org.jboss.msc.service.StartException in service jboss.deployment.unit."accbeta.war".WeldService: org.jboss.weld.exceptions.DefinitionException: WELD-001502 Resource producer field [Resource Producer Field [EntityManagerFactory] with qualifiers [@Any @Default] declared as [[field] @ConversationScoped @PersistenceUnit @Produces startup.first.emf]] must be @Dependent scoped
 at org.jboss.as.weld.services.WeldService.start(WeldService.java:96)
 at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1824) [jboss-msc-1.0.1.GA.jar:1.0.1.GA]
 at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1759) [jboss-msc-1.0.1.GA.jar:1.0.1.GA]
 at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [:1.6.0_25]
 at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [:1.6.0_25]
 at java.lang.Thread.run(Thread.java:662) [:1.6.0_25]
Caused by: org.jboss.weld.exceptions.DefinitionException: WELD-001502 Resource producer field [Resource Producer Field [EntityManagerFactory] with qualifiers [@Any @Default] declared as [[field] @ConversationScoped @PersistenceUnit @Produces startup.first.emf]] must be @Dependent scoped
 at org.jboss.weld.bean.builtin.ee.EEResourceProducerField.checkEEResource(EEResourceProducerField.java:133)
 at org.jboss.weld.bean.builtin.ee.EEResourceProducerField.initialize(EEResourceProducerField.java:125)
 at org.jboss.weld.bootstrap.AbstractBeanDeployer.deploy(AbstractBeanDeployer.java:119)
 at org.jboss.weld.bootstrap.BeanDeployment.deployBeans(BeanDeployment.java:227)
 at org.jboss.weld.bootstrap.WeldBootstrap.deployBeans(WeldBootstrap.java:378)
 at org.jboss.as.weld.WeldContainer.start(WeldContainer.java:81)
 at org.jboss.as.weld.services.WeldService.start(WeldService.java:89)
 ... 5 more

17:11:20,605 INFO [org.jboss.as.controller] (DeploymentScanner-threads - 2) Service status report
 Services which failed to start:
 service jboss.deployment.unit."accbeta.war".WeldService: org.jboss.msc.service.StartException in service jboss.deployment.unit."accbeta.war".WeldService: org.jboss.weld.exceptions.DefinitionException: WELD-001502 Resource producer field [Resource Producer Field [EntityManagerFactory] with qualifiers [@Any @Default] declared as [[field] @ConversationScoped @PersistenceUnit @Produces startup.first.emf]] must be @Dependent scoped 
```

* * *

感谢您的回答..我已尝试删除`hibernate-entitymanager-4.0.0.CR1.jar`但`jboss-servlet-api_3.0_spec-1.0.0.Final.jar` 没有效果！

我也改变了 persistence.xml

```
<persistence-unit name="accbetaPU">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <jta-data-source>java:jboss/datasources/AccbetaDS</jta-data-source>
        <properties>
            <!-- Properties for Hibernate (default provider for JBoss AS) -->
            <property name="hibernate.dialect" value="org.hibernate.dialect.PostgreSQLDialect"/>
            <property name="hibernate.hbm2ddl.auto" value="create-drop"/>
            <property name="hibernate.show_sql" value="true"/>
            <!-- Only format when you need to debug, because it slows things down -->
            <property name="hibernate.format_sql" value="false"/>
            <property name="hibernate.show_sql" value="false"/>
            <property name="hibernate.transaction.manager_lookup_class"
                value="org.hibernate.transaction.JBossTransactionManagerLookup" />
        </properties>
    </persistence-unit> 
```

当我尝试创建实体管理器时，错误是一样的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T16:54:38.490

我将从删除`hibernate-entitymanager-4.0.0.CR1.jar`和开始`jboss-servlet-api_3.0_spec-1.0.0.Final.jar`。不确定这是这里的问题，但肯定不需要这些。

另外，不应该`<jta-data-source>accbeta</jta-data-source>`是这样的`<jta-data-source>java:jboss/datasources/accbeta</jta-data-source>`吗？诚然，我在 AS 7 中使用 JPA 还不够，但我知道大多数示例看起来都是这样的 :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:51:30.683

我读了你的堆栈跟踪，检查这个小修改是否改变了堆栈跟踪。

在您的 EntityManagerFactory 中删除 @ConversationScope 并添加 @Dependent 注释。

我提到这一点是为了：

```
Caused by: org.jboss.weld.exceptions.DefinitionException: WELD-001502 Resource producer field [Resource Producer Field [EntityManagerFactory] with qualifiers [@Any @Default] declared as [[field] @PersistenceUnit @ConversationScoped @Produces startup.first.emf]] must be @Dependent scoped 
```

# iphone - 如何在 NSString 中获取 NSData 值

> ID：10650343
> 
> 赞同：2
> 
> 时间：2012-05-18T09:49:01.657
> 
> 标签：iphone, objective-c, nsstring, nsdate, blob

我试过以下

```
-(void)imagePickerController:(UIImagePickerController*)picker didFinishPickingMediaWithInfo:(NSDictionary*)info
{
  imagedata = UIImageJPEGRepresentation([info objectForKey:@"UIImagePickerControllerOriginalImage"],1); 

  NSString *s1 = [[[NSString alloc]initWithData:imagedata encoding:NSUTF8StringEncoding]autorelease];

  NSString *s2 = [[[NSString alloc]  initWithBytes:[imagedata bytes]
                                              length:[imagedata length] encoding: NSUTF8StringEncoding]autorelease];

  NSString *s3 = [NSString stringWithUTF8String:[imagedata bytes]];

  [picker dismissModalViewControllerAnimated:YES]; 
```

}

如果我看到 imagedata 的打印描述：在调试器控制台中，我可以在那里看到 blob 值。但我无法在 NSString 中得到，以上所有 s1,s2,s3 都返回空值。我想将图像的 blob 值上传到远程服务器数据库。它的解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T10:22:22.253

您正在尝试使用各种编码方法将图像转换为 NSString，这将返回 null，因为您无法将 UIImage 转换为 NSString。

另一种方法是使用 base64 编码函数转换为 NSString 在你的类中添加这段代码：

```
static char base64EncodingTable[64] = 
{
'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P',
'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', 'a', 'b', 'c', 'd', 'e', 'f',
'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v',
'w', 'x', 'y', 'z', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '+', '/'
};

@implementation NSString (NSStringAdditions)

+ (NSString *) base64StringFromData: (NSData *)data length: (int)length 
{
    unsigned long ixtext, lentext;
    long ctremaining;
    unsigned char input[3], output[4];
    short i, charsonline = 0, ctcopy;
    const unsigned char *raw;
    NSMutableString *result;

    lentext = [data length]; 
    if (lentext < 1)
        return @"";
    result = [NSMutableString stringWithCapacity: lentext];
    raw = [data bytes];
    ixtext = 0; 

    while (true) 
    {
        ctremaining = lentext - ixtext;
        if (ctremaining <= 0) 
            break;        
        for (i = 0; i < 3; i++) 
        { 
            unsigned long ix = ixtext + i;
            if (ix < lentext)
                input[i] = raw[ix];
            else
                input[i] = 0;
        }
        output[0] = (input[0] & 0xFC) >> 2;
        output[1] = ((input[0] & 0x03) << 4) | ((input[1] & 0xF0) >> 4);
        output[2] = ((input[1] & 0x0F) << 2) | ((input[2] & 0xC0) >> 6);
        output[3] = input[2] & 0x3F;
        ctcopy = 4;
        switch (ctremaining) 
        {
            case 1: 
                ctcopy = 2; 
                break;
            case 2: 
                ctcopy = 3; 
                break;
        }

        for (i = 0; i < ctcopy; i++)
            [result appendString: [NSString stringWithFormat: @"%c", base64EncodingTable[output[i]]]];

        for (i = ctcopy; i < 4; i++)
            [result appendString: @"="];

        ixtext += 3;
        charsonline += 4;

        if ((length > 0) && (charsonline >= length))
            charsonline = 0;
    }     
    return result;
}

@end 
```

然后使用以下语句转换为 NSString：

```
NSString *fileStream=[NSString base64StringFromData:imagedata length:[imagedata length] ]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T13:42:25.463

试试这个

`NSString* aStr = [[NSString alloc] initWithData:aData encoding:NSASCIIStringEncoding];`

它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-18T23:13:05.977

如果您想将数据的原始二进制/十六进制值视为字符串值，请执行以下操作：

```
NSString *hashString = [data.description stringByReplacingOccurrencesOfString:@" " withString:@""];

// Remove brackets < > from the end
hashString = [hashString substringWithRange:NSMakeRange(1, hashString.length-2)]; 
```

我使用它是因为我想验证我的 sha512 数据值。

# facebook - Facebook SDK - 如何开始

> ID：10650345
> 
> 赞同：0
> 
> 时间：2012-05-18T09:49:21.880
> 
> 标签：facebook, facebook-graph-api, facebook-c#-sdk

能否请您指出一些有关 facebook SDK 的教程。

我想编写一个桌面应用程序，它只是拍照并将其发布在页面墙上。

有没有办法在 C# 代码中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:50:51.140

是的，这里有一个用于 C# 的非官方 sdk：http: [//csharpsdk.org/](http://csharpsdk.org/)

它还包含教程。

# c# - 如何使用或使用从不同服务器位置到 aspx 页面的 Web 服务的 HTTPS 包含的 URL？

> ID：10650359
> 
> 赞同：0
> 
> 时间：2012-05-18T09:50:21.553
> 
> 标签：c#, asp.net, wcf, web-services, wcf-security

我创建了一个带有 https 安全的 Web 服务。但是我不能在我的 aspx 页面中使用该服务。如果我使用 http 正在响应并正常工作。当我使用 https 安全网络服务时，它会抛出这样的异常，如下所述

“HTTP 请求未经客户端身份验证方案‘协商’未经授权。从服务器接收到的身份验证标头为‘协商，NTLM，基本领域=“www.santext.mobi”’。”

如何解决此类问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T04:44:00.587

是的。解决方案只需将 https:\ 添加到您将使用该服务的 url。然后您将收到来自该服务的方法。

# selenium - Selenium::WebDriver::Error::WebDriverError:

> ID：10650360
> 
> 赞同：3
> 
> 时间：2012-05-18T09:50:22.480
> 
> 标签：selenium, capybara

我正在尝试对 javascript 代码运行一些验收测试。但是，当我尝试将 Capybara 与 Selenium 一起使用时，我不断得到以下信息：

```
>> Thin web server (v1.3.1 codename Triple Espresso)
>> Maximum connections set to 1024
>> Listening on 0.0.0.0:1234, CTRL+C to stop
FF>> Thin web server (v1.3.1 codename Triple Espresso)
>> Maximum connections set to 1024
>> Listening on 0.0.0.0:1234, CTRL+C to stop
F

Failures:

  1) end to end acceptance test shows that x wins when it does
     Failure/Error: @application.start
     Selenium::WebDriver::Error::WebDriverError:
       Unable to find the chromedriver executable. Please download the server from http://code.google.com/p/chromedriver/downloads/list and place it somewhere on your PATH. More info at http://code.google.com/p/selenium/wiki/ChromeDriver.>> Thin web server (v1.3.1 codename Triple Espresso)
     # ./spec/acceptance/application_driver.rb:24:in `start'
     # ./spec/acceptance/end_to_end.rb:6:in `block (2 levels) in <top (required)>' 
```

下面的代码是应该启动驱动程序的代码。[我从http://code.google.com/p/chromedriver/downloads/list](http://code.google.com/p/chromedriver/downloads/list)下载了相应的文件，并通过运行 PATH=$PATH:/directory/where/chromedriver/exists 并导出 PATH 将其放置在我的路径中，并且使其可执行，但仍然出现错误。有什么我想念的吗？

```
Capybara.register_driver :chrome do |app|
  Capybara::Selenium::Driver.new(app, :browser => :chrome)
end

Capybara.default_driver = :chrome

class TicTacToeApplicationDriver
  include Capybara::DSL
  include Capybara::RSpecMatchers

  APPLICATION_PORT = 1234

  def initialize
    @application_server = ApplicationServer.new
  end

  def start
    @application_server.start
    visit "http://localhost:#{APPLICATION_PORT}/index.html"
  end 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-13T10:02:05.973

安装 chromedriver-helper gem 对我有用。

添加

```
gem 'chromedriver-helper' 
```

到 Gemfile 中的测试组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T14:42:56.197

我不知道水豚，但对于这个错误，你可以检查两件事

1.  确保您已提供完整路径，包括 chromedriver.exe（或 chromedriver，如果您在 linux 中）的文件名。如果在 Windows 中，您还需要指定 .exe。

2.  如果您使用的是 remotewebdriver，而不是更新路径变量，您可以尝试在启动 selenium 服务器时提供此路径。像

> java -jar selenium.jar -Dwebdriver.chrome.driver=fullpathtoexefileincludingfilename

# sql-server-2008 - 如何为这种情况创建更新触发器

> ID：10650361
> 
> 赞同：0
> 
> 时间：2012-05-18T09:50:25.557
> 
> 标签：sql-server-2008, triggers

假设我有一个表 ABC 和表 XYZ。

```
Columns of ABC-->col1 col2 col3 col4 ......coln
Columns of XYZ-->colname oldvalue newvalue modifieddate 
```

因此，当列，假设 col1 在 ABC 中更新时，我希望我的 XYZ 应该能够插入一条记录，该记录具有正在修改的列的名称、该列的旧值、该列的新值和修改日期。因此，对于在 ABC 中修改的每一列，我应该在 XYZ 中获得记录，任何人都可以帮我从这个开始，是否可以首先，欢迎任何建议，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:59:42.673

你刚刚问了一个关于触发器的问题。

您不能指望我们为您构建所有代码。

我会完全按照您上一个问题所做的那样做，并为您指明正确的方向。

要知道列是否已更新，您可以使用 UPDATE(column) 关键字

```
create trigger logUpdate
on ABC
After update
as
begin
  if (update(col1)) begin
    --will only get in here if the col1 was referenced on the update statment
     insert into XYZ based ont INSERTED and DELETED tables
  end
end 
```

编辑：替代方案：[CDC](http://www.simple-talk.com/sql/learn-sql-server/introduction-to-change-data-capture-%28cdc%29-in-sql-server-2008/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T10:17:29.250

在触发器中，我会为每个列写这样的内容：

```
Select 'Col1' ColumnName, i.Col1 NewValue, d.Col1 OldValue
From Inserted i 
    Inner Join Deleted d On i.IDCol = d.IDCol
Where 
    (i.Col1 Is Null and Not d.Col1 is Null)
    OR (Not i.Col1 Is Null and d.Col1 is Null)
    OR (Not i.Col1 is Null And Not d.Col1 Is Null AND i.Col1 != d.Col1) 
```

在这种情况下，如果在一个语句中更新了很多行，它将考虑到只有在数据发生更改时才会记录更改。

如果有 NOT NULL 列，它会更容易。并且还应该考虑数据类型..

# android - AsyncTask 的 onPostExecute() 中的上下文是什么？

> ID：10650366
> 
> 赞同：2
> 
> 时间：2012-05-18T09:50:38.097
> 
> 标签：android, android-asynctask

我确实在活动中使用了很多 AsyncTasks 作为私有内部类。从一开始就让我困惑的一件事是我在 onPostExecute() 中得到了什么上下文？

如果您查看下面显示的精简示例，您可以在 onPostExecute() 中使用 getString()。该调用使用什么上下文？Activity 可能在 doInBackground 期间发生了变化（例如 OrientationChange），因此它不可能是那个上下文。

目前我修补活动上下文（task.context = this）并使用该特定上下文（context.getString（））。

我的问题：在内部类 AsyncTask 的 onPostExecute() 中使用 getString() 而不使用周围 Activity 的上下文是否可以节省？

提前谢谢了。

```
public class MyActivity extends Activity {

    /* package */ MyActivity context;

    private class MyAsyncTask extends AsyncTask<Void, Void, Void> {

        public MyAsyncTask(final MyActivity context) {
            super();

            this.context = context;
        }

        @Override
        protected Cursor doInBackground(/* ... */) {
            // ...
        }

        @Override
        protected void onPostExecute(/* ... */) {
            if (context != null) {
                // Currently I do use that
                String s = context.getString(R.string.mytext);
                context.task = null;
            }

            // Would this be save?
            String s2 = getString(R.string.mytext);
        }

        @Override
        protected void onPreExecute (/* ... */) {
            // ...
        }
    }

    /* package */ MyAsyncTask  task;

    @Override
    public void onCreate(final Bundle bundle) {
        // ...

        Bundle bundleExtras = getIntent().getExtras();
        if (bundleExtras != null) {
            task = (MyAsyncTask) getLastNonConfigurationInstance();
            if (task != null) {
                task.context = this;
                // ...
            } else {
                task = new MyAsyncTask(this);
                task.execute();
            }
        }
    }

    @Override
    public Object onRetainNonConfigurationInstance() {
        if (task != null) {
            // ...
            task.context = null;
        }

        return task;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:07:07.527

`MyAsyncTask()`您正在使用以下`this`指针初始化您的实例：

```
task = new MyAsyncTask(this); 
```

在`onPostExecute`您访问`context`使用提供的指针初始化的类成员时。您的上下文是封闭类的上下文，即`MyActivity`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T10:19:19.197

> 在内部类 AsyncTask 的 onPostExecute() 中使用 getString() 而不使用周围 Activity 的上下文是否可以节省？

不，这不安全。作为该活动中的内部类，您的`MyAsyncTask`类在创建时将有参考`MyActivity`。因此，如果`MyActivity`因任何原因（如轮换）被杀死，在`onPostExecute`回调中您最终将`MyAsyncTask`持有被杀死`MyActivity`实例的引用。

使用对 . 的引用`Activity`更安全，因为您更新该引用以始终指向`MyActivity`. 也许您还想`Activity`直接使 in `onRetainNonConfigurationInstance`with无效，`null` 以确保您不触摸它（如果`MyAsyncTask`到达，`onPostExecute`直到您`MyActivity`再次设置），直到您有一个有效的参考。

# c# - 添加到字典时出现 NullReferenceException

> ID：10650369
> 
> 赞同：1
> 
> 时间：2012-05-18T09:50:47.583
> 
> 标签：c#, dictionary

我正在使用`instrument2Orders`字典。我使用`instrument`作为键和`ordersOfGlass`值来添加它。我的所有实例与否`null`证明了下面的输出，但我仍然收到`System.NullReferenceException`这怎么可能？

```
private Dictionary<Instrument, List<Order>> instrument2Orders = new Dictionary<Instrument, List<Order>>();

.........
        public void InitialRegisterOrder(Order order)
            .....
        if (instrument2Orders.ContainsKey(instrument))
        {
            ordersOfGlass = instrument2Orders[instrument];
        }
        else
        {
            ordersOfGlass = new List<Order>();
            try
            {
                instrument2Orders.Add(instrument, ordersOfGlass);
            } catch(Exception e)
            {
                Console.WriteLine(e.Message);
                Console.WriteLine(e.StackTrace);
                Console.WriteLine(e.ToString());
                Console.WriteLine(e.InnerException);
                Console.WriteLine("XYZ! instrument = " + instrument + " ordersOfGlass = " + ordersOfGlass + " instrument2Orders = " + instrument2Orders);
            }
        } 
```

输出：

```
System.NullReferenceException: ‘бл«Є  ­  ®ЎкҐЄв ­Ґ гЄ §лў Ґв ­  нЄ§Ґ¬Ї«па ®ЎкҐЄв .
   ў System.Collections.Generic.Dictionary`2.Insert(TKey key, TValue value, Boolean add)
   ў MBClient.Market.InitialRegisterOrder(Order order) ў C:\Oleg\projects\MBClient\MBClient\Market.cs:бва®Є  233

XYZ! instrument = ClassCode: EQNL Ticker: GAZP. ordersOfGlass = System.Collections.Generic.List`1[Commons.Order] instrument2Orders = System.Collections.Generic.Dictionary`2[Commons.Instrument,System.Collections.Generic.List`1[Commons.Order]] 
```

仪器类：

```
class Instrument
{
    //public Instrument(int id, string classCode, string ticker)
    //{
    //    this.Ticker = ticker;
    //    this.ClassCode = classCode;
    //}

    public string ClassCode { get; set; }
    public string Ticker { get; set; }
    public override string ToString()
    {
        return "ClassCode: " + ClassCode + " Ticker: " + Ticker + '.';
    }

    public override bool Equals(object obj)
    {
        if (obj == null)
        {
            return false;
        }
        Instrument instrument = obj as Instrument;
        if (instrument == null)
        {
            return false;
        }
        return (ClassCode.Equals(instrument.ClassCode)) && (Ticker.Equals(instrument.Ticker));
    }

    public override int GetHashCode()
    {
        int hash = 13;
        hash = (hash * 7) + ClassCode.GetHashCode();
        hash = (hash * 7) + Ticker.GetHashCode();
        return hash;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:53:16.150

第一直觉：仪器为空。

这个变量从何而来？不是参数，是字段吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:17:29.787

Does your Instrument class override GetHashCode() by any chance?

If it does and if it dereferences a null ref, you'll get something like that error (although the stack trace seems to indicate something different is going on...)

Anyway, this program will give you a NullReferenceException when you do dict.Add() even though the key and value are both non-null:

```
using System;
using System.Collections.Generic;

namespace Demo
{
    class Program
    {
        static void Main(string[] args)
        {
            Test test = new Test();
            var dict = new Dictionary<Test, Test>();
            dict.Add(test, test);
        }
    }

    public class Test
    {
        public string Value
        {
            get;
            set;
        }

        public override int GetHashCode()
        {
            return Value.GetHashCode();
        }
    }
} 
```

# android - 活动中的Android内存泄漏

> ID：10650375
> 
> 赞同：0
> 
> 时间：2012-05-18T09:51:11.437
> 
> 标签：android, memory-management, memory-leaks, eclipse-memory-analyzer

我正在使用 MAT 工具测试我的应用程序，发现存在内存泄漏，但我无法在代码中找到它。请帮助我。

//第一个活动

```
package intent.sample;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class IntentA extends Activity implements OnClickListener {
    Handler handler = new Handler();
    private Intent i;
    private Button button;

    public void onClick(View src) {
        if (src == (View) button) {
            i = new Intent(this, IntentSampleActivity.class);
            handler.postDelayed(new Runnable() {

                public void run() {
                    startActivity(i);
                }
            }, 20000);
        }
    }

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main1);
        button = (Button) findViewById(R.id.screen2button);
        button.setOnClickListener(this);
    }

    @Override
    protected void onStop() {
        super.onStop();
        this.finish();
    }

    @Override
    protected void onPause() {
        super.onPause();
        this.finish();
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        handler = null;
        i = null;
        this.finish();
    }
} 
```

//第二个活动

```
package intent.sample;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class IntentSampleActivity extends Activity implements OnClickListener {

    private Button button;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        button = (Button) findViewById(R.id.screen1button);
        button.setOnClickListener(this);
    }

    public void onClick(View scr) {
        if (scr == (View) button) {
            Intent ii = new Intent(this, IntentA.class);
            startActivity(ii);
        }
    }

    @Override
    protected void onStop() {
        super.onStop();
        this.finish();
    }

    @Override
    protected void onPause() {
        super.onPause();
        this.finish();
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        this.finish();
    }
} 
```

我正在创建一个新线程并开始一项活动。这会创建活动类的新实例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T04:24:04.877

在这段代码中，每次我启动活动时，都会创建一个新实例。为避免这种情况，我需要在活动的 android manifest.xml 文件中使用启动模式。启动模式可以是单任务或单实例。

总之非常感谢。

# php - 多语言网站：切换语言

> ID：10650376
> 
> 赞同：0
> 
> 时间：2012-05-18T09:51:12.610
> 
> 标签：php, multilingual

我正在使用多语言脚本来改变语言。现在，当我使用默认语言（英语）时，我无法从一种语言进行更改

该网站看起来像：

```
example.com ( Main directory)
example.com/fr/
example.com/es/ 
```

当我在 example.com/fr/blabla/index 并且我想去 example.com/es/blabla/index 时，它工作正常。

但是当我在 example.com/blabla/index 并且我想去 example.com/fr/blabla/index 时。我被重定向到 example.com/fr/index

我在用着：

```
<?php
function switchLanguage($lang) {
    $u = explode('/', $_SERVER['REQUEST_URI']);
    $u[1] = $lang;
    return implode('/', $u);
}

?> 
```

所以逻辑上我没有重定向到正确的路径，因为没有目录/eng。

我在想是否可以使用数组重写 url？像这样的东西：

```
<?php 
function switchLanguage($lang) 
$array1 = array(' ', $_SERVER['REQUEST_URI']);
$array2 = array('$lang', ' ');
$newArray = array_combine($array1, $array2);

foreach ($newArray as $key ) {
        echo "$key $value"; 
}

?> 
```

但是我如何才能获得 url 中的值或我哪里出错了。

使用数据库或 .ini 和 geoip 缓存不是一个选项

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:15:19.140

```
function switchLanguage($lang, $defaultLang = "eng") {
    if($lang == $defaultLang) {
        $lang = "";
    }
    $u = explode('/', $_SERVER['REQUEST_URI']);
    $u[1] = $lang;
    return implode('/', $u);
} 
```

如果我正确理解了您的问题，这可能会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T10:19:14.507

You are overwriting the first directory by doing `$u[1] = $lang`. You need to rebuild the array, pushing the language into the right place, not by overwriting something that may already be there (e.g. a directory)

Edit: Use array_splice to add in the language part:

```
<?php
function switchLanguage($lang) {
    $u = explode('/', $_SERVER['REQUEST_URI']);
    $u = array_splice($u,1,0,$lang);
    return implode('/', $u);
}

?> 
```

# atk4 - atk4中如何一键执行多个js动作

> ID：10650381
> 
> 赞同：3
> 
> 时间：2012-05-18T09:51:16.277
> 
> 标签：atk4

--编辑：这已经解决了。

我想要一个按钮来执行多个 js 命令，例如

```
$nextButton = $form->addButton('Next'); 
```

去做：

```
$button_repopulate_address->js(true)->show()
$street->js(true)->closest('fieldset')->show() 
```

什么时候：

```
$nextButton->isClicked() 
```

[此处](http://demo.atk4.com/demo.html?t=6)的示例代码建议您将命令嵌套在 js 调用的第二个参数中，如下所示：

```
$g->addButton('Show all buttons')->js('click',$b1->js(null,$b2->js(null,$b3->js()->show())->show())->show()); 
```

我认为这非常难看，并且会创建超过 2 个命令很难遵循的代码。

我查看了源代码并找到了 _prepend 命令，我用它来解决我的问题：

```
if($nextButton->isClicked()){
      $form->js()->_prepend($street->js(true)->closest('fieldset')->show())
                 ->_prepend($button_repopulate_address->js(true)->show())
              ->execute();
} 
```

编辑：我刚刚查看了 js() 的源代码，看来您可以将一个数组传递给 js，该数组为数组中的每个项目调用 _prepend 方法 - 很好！：

```
$form->js(null, array(
     $street->js(true)->closest('fieldset')->show(),
     $button_repopulate_address->js(true)->show()
)); 
```

--已解决（但也许我链接到的[示例](http://demo.atk4.com/demo.html?t=6)可以用这个更好的功能进行更新）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:26:26.850

这里解释：

[http://agiletoolkit.org/learn/understand/chains/multi](http://agiletoolkit.org/learn/understand/chains/multi)

这些示例将很快修改，我们正在开发一个新的示例站点。

# git - 推送后删除的文件仍然存在于 Git 远程仓库中吗？

> ID：10650382
> 
> 赞同：10
> 
> 时间：2012-05-18T09:51:29.833
> 
> 标签：git

我是 Git 新手，试图让自己正确设置。我有一个远程仓库和一个本地克隆，到目前为止只有一个（主）分支。

我在本地删除了一些文件，提交了这个更改，然后执行了“git push origin master”，这似乎成功了。'git status' 现在在本地不显示任何内容。

但是，当我查看远程仓库时，文件仍然存在，并且“git status”将它们全部显示为已添加但未提交。推送我的更改是否应该没有从远程删除它们？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T09:56:40.590

问题是您显然推送到非裸存储库。推送永远不会更新远程工作副本。

看看[仅针对裸存储库的 Git 推送？](https://stackoverflow.com/questions/2147741/git-push-only-for-bare-repositories)和[http://gitready.com/advanced/2009/02/01/push-to-only-bare-repositories.html](http://gitready.com/advanced/2009/02/01/push-to-only-bare-repositories.html)

要使非裸远程存储库更新，请通过 SSH 连接到存储库所在的计算机并运行`git reset --hard HEAD`并`git checkout -f`强制更新工作副本（请注意，这将破坏您可能在其中所做的任何本地更改工作副本）。

要使您的远程存储库裸露，请通过 SSH 连接到计算机，以便您可以直接访问它。假设存储库位于子文件夹中，`repo`请运行以下命令：

```
mv repo repo_old
git clone --bare repo_old repo 
```

然后测试一切是否正常，然后`rm -rf repo_old`摆脱旧的。

# fastcgi - FstCGI：如何清除输出流？

> ID：10650384
> 
> 赞同：0
> 
> 时间：2012-05-18T09:51:37.747
> 
> 标签：fastcgi, outputstream

我有将标头写入 fastcgi outstream 的代码。如果写入主体失败，我想尝试写入指示故障模式的新标头，而不发送原始标头。

顺便说一句，这是在 C 中。

我怎样才能“取消” FCGX_PutStr() ？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T07:20:37.617

行，

您不能直接清除流。

您必须使用 FCGX_FreeStream(reqDataPtr->out) 释放流；

您必须使用 reqDataPtr->out = NewWriter(reqDataPtr, 8192, FCGI_STDOUT); 创建一个新流

干杯

# javascript - jQuery Cycle 插件“放大”而不是淡入

> ID：10650388
> 
> 赞同：0
> 
> 时间：2012-05-18T09:51:46.960
> 
> 标签：javascript, jquery, zooming, jquery-cycle

我有很多带有图像（图块）的 div，我希望在网站打开时一一出现。jQuery Cycle 插件通过以下方式支持这一点：

```
$('#slideshow img:first').fadeIn(1000, function() {
    $('#slideshow').cycle();
}); 
```

这很好用，但是我想在这个动画中做一些我自己做不到的调整，因为我对 jQuery 和 JS 的了解不够。我尝试过粗略的，但每一次努力都失败了。

我想要的是：

*   图像需要一张一张地出现。据我所知，此插件中没有“暂停”选项。有没有一个选项可以让我在动画开始前将动画保持几毫秒？

*   上面的代码淡入图像，但我希望它放大/淡入。所以它看起来像瓷砖弹出。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:00:17.710

**更新**

您可以使用 jquery 延迟来实现：

`$('#slideshow').cycle({fx:'fadeZoom'}).pause().delay(5000).resume();`

原始答案

该插件具有您似乎正在描述的所有选项：

供参考的选项：http: [//jquery.malsup.com/cycle/options.html](http://jquery.malsup.com/cycle/options.html)

`$('#slideshow').cycle({fx: 'fadeZoom', delay: 1000});`是你想要调用的。fx 定义动画，延迟将延迟循环的开始。

这是所有动画的列表：http: [//jquery.malsup.com/cycle/browser.html](http://jquery.malsup.com/cycle/browser.html)

# android - Android 中的 XML 解析：获取异常

> ID：10650389
> 
> 赞同：-1
> 
> 时间：2012-05-18T09:51:46.873
> 
> 标签：android, xml, parsing, url, using

对于这个给定的代码，我遇到了一个异常。我不知道如何清除这个。

```
package com.new_xml_parse;
import java.net.URL;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;
import android.app.Activity;
import android.os.Bundle;
import android.widget.LinearLayout;
import android.widget.TextView;
public class New_xml_parseActivity extends Activity 
{
@Override
public void onCreate(Bundle savedInstanceState)
{
super.onCreate(savedInstanceState);
/** Create a new layout to display the view */
LinearLayout layout = new LinearLayout(this);
layout.setOrientation(1);
/** Create a new textview array to display the results */
TextView name[];
TextView website[];
TextView category[];
try
{
URL url = new URL("http://bestpropertyworld.com/MobileApp/xml1.xml");
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder db = dbf.newDocumentBuilder();
Document doc = db.parse(new InputSource(url.openStream()));
doc.getDocumentElement().normalize();
NodeList nodeList = doc.getElementsByTagName("item");
/** Assign textview array lenght by arraylist size */
name = new TextView[nodeList.getLength()];
website = new TextView[nodeList.getLength()];
category = new TextView[nodeList.getLength()];
for (int i = 0; i < nodeList.getLength(); i++)
{
Node node = nodeList.item(i);
name[i] = new TextView(this);
website[i] = new TextView(this);
category[i] = new TextView(this);
Element fstElmnt = (Element) node;
NodeList nameList = fstElmnt.getElementsByTagName("name");
Element nameElement = (Element) nameList.item(0);
nameList = nameElement.getChildNodes();
name[i].setText("Name = "+ ((Node) nameList.item(0)).getNodeValue());
NodeList websiteList = fstElmnt.getElementsByTagName("website");
Element websiteElement = (Element) websiteList.item(0);
websiteList = websiteElement.getChildNodes();
website[i].setText("Website = "+ ((Node) websiteList.item(0)).getNodeValue());
category[i].setText("Website Category = "+ websiteElement.getAttribute("category"));
layout.addView(name[i]);
layout.addView(website[i]);
layout.addView(category[i]);
}
} 
catch (Exception e)
{
System.out.println("XML Pasing Excpetion = " + e);
}
/** Set the layout view to display */
setContentView(layout);
}
} 
```

在 LogCat 我得到这样的，给这个解决方案

```
05-18 15:16:00.132: W/WindowManager(77): Failure taking screenshot for (180x300) to layer 21010
05-18 15:16:00.151: W/NetworkManagementSocketTagger(77): setKernelCountSet(10013, 1) failed with errno -2
05-18 15:16:00.681: I/Process(77): Sending signal. PID: 187 SIG: 3
05-18 15:16:00.698: I/dalvikvm(187): threadid=3: reacting to signal 3
05-18 15:16:01.151: I/dalvikvm(187): Wrote stack traces to '/data/anr/traces.txt'
05-18 15:16:02.121: W/NetworkManagementSocketTagger(77): setKernelCountSet(10041, 0) failed with errno -2
05-18 15:16:02.902: D/dalvikvm(187): GREF has increased to 201
05-18 15:16:03.573: D/dalvikvm(187): GC_FOR_ALLOC freed 594K, 6% free 11501K/12167K, paused 114ms
05-18 15:16:03.601: I/dalvikvm-heap(187): Grow heap (frag case) to 12.399MB for 1157776-byte allocation
05-18 15:16:03.851: D/dalvikvm(187): GC_CONCURRENT freed 23K, 6% free 12608K/13319K, paused 25ms+7ms
05-18 15:16:04.087: D/dalvikvm(187): GC_FOR_ALLOC freed 1K, 6% free 12608K/13319K, paused 67ms
05-18 15:16:04.101: I/dalvikvm-heap(187): Grow heap (frag case) to 13.524MB for 1203064-byte allocation
05-18 15:16:04.251: D/dalvikvm(187): GC_CONCURRENT freed 0K, 6% free 13783K/14535K, paused 18ms+7ms
05-18 15:16:04.491: D/dalvikvm(187): GC_FOR_ALLOC freed 4K, 6% free 13780K/14535K, paused 49ms
05-18 15:16:04.501: I/dalvikvm-heap(187): Grow heap (frag case) to 14.625MB for 1157776-byte allocation
05-18 15:16:04.561: D/dalvikvm(187): GC_FOR_ALLOC freed 0K, 5% free 14911K/15687K, paused 58ms
05-18 15:16:05.971: D/dalvikvm(187): GC_FOR_ALLOC freed 56K, 4% free 16198K/16839K, paused 57ms
05-18 15:16:06.411: D/dalvikvm(187): GC_FOR_ALLOC freed 16K, 4% free 17678K/18311K, paused 79ms
05-18 15:16:07.231: D/dalvikvm(187): GC_CONCURRENT freed 614K, 4% free 19055K/19847K, paused 6ms+8ms
05-18 15:16:07.391: I/ActivityManager(77): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.new_xml_parse/.New_xml_parseActivity} from pid 187
05-18 15:16:07.391: W/WindowManager(77): Failure taking screenshot for (180x300) to layer 21005
05-18 15:16:07.474: W/NetworkManagementSocketTagger(77): setKernelCountSet(10041, 1) failed with errno -2
05-18 15:16:07.637: I/System.out(572): XML Pasing Excpetion = android.os.NetworkOnMainThreadException
05-18 15:16:08.023: I/Process(77): Sending signal. PID: 572 SIG: 3
05-18 15:16:08.031: I/dalvikvm(572): threadid=3: reacting to signal 3
05-18 15:16:08.372: I/dalvikvm(572): Wrote stack traces to '/data/anr/traces.txt'
05-18 15:16:08.591: I/Process(77): Sending signal. PID: 572 SIG: 3
05-18 15:16:08.591: I/dalvikvm(572): threadid=3: reacting to signal 3
05-18 15:16:08.611: I/dalvikvm(572): Wrote stack traces to '/data/anr/traces.txt'
05-18 15:16:08.735: I/ActivityManager(77): Displayed com.new_xml_parse/.New_xml_parseActivity: +1s260ms
05-18 15:16:09.191: W/NetworkManagementSocketTagger(77): setKernelCountSet(10013, 0) failed with errno -2
05-18 15:16:09.224: W/InputManagerService(77): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@41558698 (uid=10013 pid=187)
05-18 15:16:09.621: D/dalvikvm(187): GC_FOR_ALLOC freed 2277K, 12% free 18638K/21127K, paused 79ms
05-18 15:16:34.761: D/dalvikvm(172): GC_CONCURRENT freed 387K, 6% free 9534K/10119K, paused 7ms+4ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:59:50.547

您的主线程无法处理 XML 解析。所以使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)来完成您的 xml 解析。

[请参阅此示例](http://samir-mangroliya.blogspot.in/p/android-customized-listview.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:57:16.787

您的错误`NetworkOnMainThreadException`意味着您正在主线程（UI 线程）上获取和解析 XML，这使其无响应。请参阅[无痛线程](http://developer.android.com/resources/articles/painless-threading.html)以了解如何使用 an`AsyncTask`在后台执行长时间任务并在完成时填充您的 UI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T09:57:32.677

它报告说您​​应该在后台运行您的网络功能，因为在 Android 中阻止 UI 线程来执行此类任务并不是一个好主意。

```
new FetchXMLAsyncTask.execute();

private class FetchXMLAsyncTask extends AsyncTask<Void, Void, Void> {
        protected void onPreExecute() {
          } 
          @Override
          protected Void doInBackground(Void... arg0) {
               // put your code here where you should fetch xml, parse it and call update ui components.
               return null;
          }

         @Override
         protected void onPostExecute(final Void unused) {

         }   
      }
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T21:12:09.767

似乎您收到的错误是由于在 main() 线程上执行的 SERVER 活动，以避免这种情况，您必须使用 AsyncTask，如下所示。

将下面这行代码粘贴到您的 oncreate() 或 onclicklistener 或您放置 XMLPARSING 代码的任何位置。

```
new DoXMLParsing().execute(); 
```

下面给出的 DoXMLParsing 是一个内部类，它扩展 AsyncTask 以执行后台操作并在 UI 线程上发布结果，而无需操作线程和/或处理程序。只需将下面的类复制并粘贴到您应该从中执行 XMLPARSING 的活动类中。

```
public class DoXMLParsing extends AsyncTask<Void, Void, Void> {

 protected void onPreExecute() {   
    //any task if you would like to perform before exe the XMLPARSING place the code here
   }

   @Override
   protected Void doInBackground(Void... params) {

       //cut and paste your whole XMLPARSING code here..

       return null;
      }

 protected void onPostExecute(Void result) {

     // Here if you wish to do future process for ex. move to another activity do here

     }
 } 
```

希望这可以帮助..！！:)

# java - 在 Java 中检索 Http 响应状态的最快方法

> ID：10650391
> 
> 赞同：3
> 
> 时间：2012-05-18T09:51:55.010
> 
> 标签：java, spring, http, rest, httpresponse

我正在做一些研究和基准测试，以便从 Http 响应中获取状态代码。

我需要使用尽可能最快的方式从大量站点列表中获取响应状态代码，我不能在多个线程中运行，这将在批处理过程中工作，这是一个必要条件。

我创建了一个小基准服务，它多次发送请求（避免站点缓存）并检索时间统计​​信息。

我正在使用不同的客户端和 API 进行测试，但响应时间不够好（最小 200 毫秒，平均：300 - 400 毫秒）。

我使用 Java URLConnection、SpringRestTemplate、ApacheHttpCommons、GoogleHttpClient 和 Restlet 进行测试。我发现的一个问题是，在其中一些我不能只请求 HEAD 然后检索状态 sode，所以我选择了完整的响应。

我也在考虑套接字和脚本。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T10:44:54.907

与那些缓慢的响应时间（可能是 99% 的网络延迟 - 特定的 HTTP 库不太可能产生太大差异）相比，缺少线程是一个更大的问题。

您可以尝试基于 Java NIO 构建的[http://mina.apache.org/asyncweb/](http://mina.apache.org/asyncweb/)，因此是非阻塞的，但它可能会在后台创建线程。

# objective-c - 目标 c afterDelay

> ID：10650393
> 
> 赞同：0
> 
> 时间：2012-05-18T09:52:05.023
> 
> 标签：objective-c

我正在使用此调用每 4 秒切换一次图像：

```
 - (void) settheimage {
   cur+=1;
   waits=0;
   [NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(settheimage)   object:nil];
   jpg = [NSString stringWithFormat:@"%@/%@_%d",current_anim,current_anim, cur];
   img = [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:jpg ofType:@"jpg"]];
    [self performSelector:@selector(settheimage) withObject:nil afterDelay:4.0];
} 
```

它适用于第一张图片，但之后它崩溃了。我不想使用 uiimage 动画，因为我有很多图像，加载 uiimage 动画需要很多时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:58:04.797

我猜想`current_anim`在调用您的方法时已（自动）释放，导致悬空指针和崩溃（`EXC_BADACCESS`我想？）。您需要手动保留它，使其成为保留属性，或开始使用 ARC。

无论哪种情况，您都应该[阅读](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html#//apple_ref/doc/uid/20000994-BAJHFBGH)有关内存管理的内容。

# javascript - 消失 div onblur

> ID：10650395
> 
> 赞同：1
> 
> 时间：2012-05-18T09:52:17.307
> 
> 标签：javascript, jquery, html

html

```
<input type="text" id="match1">
<div id="divf">It is a div which has a dark future</div>
<button>Not Remove</button> 
```

和脚本

```
$(function(){
    $("input").blur(function()
    {
       $("#divf").remove(); 
    });
}); 
```

现在，从代码中可以清楚地看出，我希望在输入模糊时删除 div。但是如果有人单击按钮，我不希望删除 div。我不知道该怎么做。有人能解决这个问题吗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T09:57:32.013

You could set a timeout in the `.blur()` and then clear it when the button is clicked.

```
var to = false;

$('input').blur(function() {
    // start the timer
    to = setTimeout('removeDiv', 200);
});

$('button').click(function() {
    // if the timer is still running, clear it
    to && clearTimeout(to);
});

function removeDiv()
{
    $("#divf").remove();
    // reset timer
    to = false;
} 
```

When the focus goes from the input straight to the button (it's clicked), the timer is cleared and the div is not removed.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:11:07.573

我已经编辑了@Adil 的答案并得到了我想要的

```
$(function(){
       var isButtonClicked = false;
       $('button').one('mousedown', function(){
      isButtonClicked = true;
    });

    $("input[type=text]").blur(function()
        {
           if(!isButtonClicked) 
               $("#divf").remove();
               else isButtonClicked = false;
        });
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T09:55:56.307

使用此代码而不是您的代码

```
$(function(){
    $("#match1").blur(function()
    {
       $("#divf").remove(); 
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T09:56:02.397

如果您只想放置具有 id match1 的文本字段，则仅当字段为蓝色时 div 才会被删除

```
$(function(){

   var isButtonClicked = false;
   $('button').one('click', function(){
      isButtonClicked = true;
   });

    $("#match1").blur(function()
    {
       if(!isButtonClicked)
            $("#divf").remove(); 
    });
}); 
```

如果您只想输入文本，则 div 将在每个文本框的蓝色上删除

```
 $(function(){
       var isButtonClicked = false;
       $('button').one('click', function(){
      isButtonClicked = true;
    });

    $("input[type=text]").blur(function()
        {
           if(!isButtonClicked) 
               $("#divf").remove(); 
        });
    }); 
```

# php - php：如何在每个 php 页面上显示会话变量

> ID：10650396
> 
> 赞同：0
> 
> 时间：2012-05-18T09:52:17.443
> 
> 标签：php

> **可能重复：**
> [会话变量未显示](https://stackoverflow.com/questions/10270155/session-variable-not-displaying)

这是我第一次获得会话变量的 index.php 上的代码：

```
session_start();
$_SESSION['User'] = $_POST['text'];
$sesvar = $_SESSION['User']; 
```

当我转到同一网站的另一个 php 页面并再次返回 index.php 会话时，会话会自动被破坏。我想要会话，直到用户不注销它。

为此，我再次将会话变量的参数传递给索引页面并编写了以下代码：

```
if(isset($_SESSION['User']))
{
  $sesvar = $_GET['sid']; 
  session_start();
  //echo $sesvar;
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:52:51.607

`session_start();`在要使用会话的每个页面上使用就足够了。

然后，您可以使用`$_SESSION['User']`来访问该值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:54:13.217

如果您在每个页面上执行此操作，当 $_POST['text']; 中没有任何内容时，您将覆盖 $_SESSION['User'] 的内容；

您应该尝试以下方法：

```
if(!empty$_POST['text'])){
    $_SESSION['User'] = $_POST['text'];
} 
```

# asp.net-mvc-3 - 所需字段验证 MVC

> ID：10650405
> 
> 赞同：0
> 
> 时间：2012-05-18T09:53:15.330
> 
> 标签：asp.net-mvc-3

我有这种情况。

我有一个`form A`和`form B`。两种形式都使用一个模型。模型中有10个字段，所有字段都是必填项（必填）..

表格 A 使用`(1,2,3,4,5)` 模型的前 5 个字段，表格 B 使用其余`(6,7,8,9,10)`字段。

因此，当我提交时，`form A`它要求我填写必填字段`(6,7,8,9,10)`，与 的情况相同`form B`，它要求我提供`(1,2,3,4,5)`字段。我怎样才能确保只有那些在表单上可用的字段被认为是必需的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T10:51:22.183

这可以通过使用视图模型来实现，因此您的视图将与相关的视图模型交互，然后视图模型将与模型交互。请记住，视图模型仅包含特定于模型的字段。所以这里是步骤

1) 制作两个视图模型 A 与字段 (1,2,3,4,5) 和 B 与字段 (6,7,8,9,10)

2）视图会将相关字段提交给他们的视图模型，然后你可以通过两种方式提交给模型

a) 在提交视图 A 时插入前五个值，然后插入具有虚拟或默认值的后五个字段。当提交视图 B 时，用实际值更新这条记录的最后五个值。

b) 制作另一个包含所有十个字段但没有必需属性的 ViewModelAB，制作此 ViewModelAB 的一个对象，并在提交两个 View Model（即 A 和 B）时填充它。填写完所有字段后，将其提交到实际的数据库模型

请询问您是否需要进一步的帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:07:21.617

我可以想到两种方法来做你需要的：

1.  使用所有字段创建两个模型，但只在每个表单中需要的字段上使用RequiredAttribute。所有字段，因此您可以毫无问题地相互映射；

2.  不要使用RequiredAttribute，而是尝试使用RemoteValidationAttribute，并根据进行调用的表单，检查是否应该抛出必需的错误；

另一种选择是禁用客户端验证并仅执行服务器端验证。我的意思是，在任何情况下，您都应该在持久化模型之前始终进行服务器端（检查业务规则）验证。

# .net - 何时创建新的异常类型

> ID：10650410
> 
> 赞同：0
> 
> 时间：2012-05-18T09:53:26.057
> 
> 标签：.net, exception

什么时候创建一个新的例外是合理的。在针对 .Net 框架制定新的异常类型是一个好的设计决策之前，是否有某种清单需要满足条件？

例如考虑：

您有一个带有方法的类，该方法返回一个整数，该整数对于方法的使用者来说并不重要，但会提供一些额外的信息。该方法中可能出现的各种错误并不取决于类的用户如何调用此方法。假设一个是网络连接可能丢失，另一个是该方法试图调用的 Web 服务的 API 发生了变化。该方法的使用者没有能力以不同的方式处理这些情况以尝试从异常中恢复。这些操作是否应该有两个不同的例外或更一般的例外（例如`CommunicationFailureException`) 用特定的描述和内部异常覆盖这两种情况？还是应该抛出最初在方法调用 Web 服务失败时抛出的 .Net 异常？

我希望更多地了解创建新异常类型的原则，而不是仅仅涵盖这个特定示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:56:02.090

当您有关于异常的其他内容时创建一个新的异常类型 - 现有异常未涵盖的内容。

如果您的应用程序有一些特定的不变量并且您需要传达它们是无效的 - 这可能是自定义异常类型的好地方。这允许您捕获特定于您的应用程序的异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T09:57:45.313

I think it makes sense to create custom exceptions in two cases.

1.  If you need to add more information to the exception.

2.  If there is a possibility that the caller of your exception will need to catch that particular exception and handle it differently.

Otherwise, it's best to use the standard exception classes.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T18:56:57.273

.Net 框架没有提供任何方法来让调用方法的例程`Foo`可以区分由 抛出的异常和由以意想不到且未处理`Foo`的方式调用的方法抛出的异常。可能会提供线索，但由于像内联这样的优化，它并不完全可靠。`Foo``Foo``StackTrace`

因此，如果`Foo`要抛出任何应该对其调用者有意义的异常，它应该确保任何逃逸类型的异常实际上都具有该含义。请注意，.Net 框架在这方面有些不足；例如，如果在枚举期间修改了集合`IEnumerator.MoveNext()`，`InvalidOperationException`则应该抛出如果从调用的例程`MoveNext()`由于某些其他原因抛出这样的异常。

使用自定义异常通常是避免此类问题的好方法。如果您从您的例程中抛出一个不会出于任何其他目的而抛出的异常，那么捕获它的代码可以确定该异常意味着它认为它意味着什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T06:12:25.333

奥德提出了一个很好的观点。

我认为可以在本主题中添加的是对 API 的抽象。您需要创建一个异常包装器，为所有实现提供通用合同。我知道它已被 oded 的响应所涵盖，但我认为可以指出：

```
void Main()
{
    try
    {
        IUserRepository = //assume that IoC container provides specific implementation
    }
    catch (UserNotFoundException e)
    {
        Console.WriteLine(string.Format("User not found: {0}", e.Id));
    }
}

class User
{
    public int Id {get;set;}
}

class UserNotFoundException : Exception
{
    public int Id {get;private set;}

    public UserNotFoundException(int id, Exception innerException)
        :base(string.Format("User {0} could not be found", id), innerException)
    {
        Id = id;
    }
}

interface IUserRepository
{
    User GetUser(int id);
}

class XmlUserRepository : IUserRepository
{
    string _path;

    public XmlUserRepository(string path)
    {
        _path = path;
    }

    public User GetUser(int id)
    {
        try
        {
            //retrieving code that might throw IOException or XmlException
        }
        catch (Exception e)
        {
            //catching Exception is not a good thing to do, but for the sake of clarity I made this like that
            throw new UserNotFoundException(id, e);
        }
    }
}

class DbUserRepository : IUserRepository
{
    string _dbConnectionString;

    public DbUserRepository(string dbConnectionString)
    {
        _dbConnectionString = dbConnectionString;
    }

    public User GetUser(int id)
    {
        try
        {
            //retrieving code that might throw SqlException
        }
        catch (Exception e)
        {
            //catching Exception is not a good thing to do, but for the sake of clarity I made this like that
            throw new UserNotFoundException(id, e);
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T09:56:17.977

这篇[文章](http://onjava.com/pub/a/onjava/2003/11/19/exceptions.html?page=2)给出了一些很好的指导。

特别是声明的部分：

> 如果它们没有对客户端代码有用的信息，请尽量不要创建新的自定义异常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-18T09:56:37.667

您可以查看此页面以获取一个小清单：[http ://docs.oracle.com/javase/tutorial/essential/exceptions/creating.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/creating.html)

该站点适用于 Java，但概念是相同的。

# iphone - 5.1.1版本开启蓝牙时如何在状态栏上获取蓝牙图标？

> ID：10650413
> 
> 赞同：0
> 
> 时间：2012-05-18T09:53:34.220
> 
> 标签：iphone, ipad

iphone 5.1.1 版本开启蓝牙后如何获取状态栏上的蓝牙图标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T13:39:51.920

只有在您实际使用蓝牙时才会出现（详情可在此处找到：http: [//support.apple.com/kb/HT4982](http://support.apple.com/kb/HT4982?viewlocale=en_US) ?viewlocale=en_US ）我猜设置使用蓝牙来发现外围设备，这就是图标可见的原因。

# .htaccess - 从域到子域的 url 重定向

> ID：10650417
> 
> 赞同：0
> 
> 时间：2012-05-18T09:53:36.733
> 
> 标签：.htaccess, url, redirect, subdomain, rewrite

我重新安装了我的服务器，不想丢失我的旧内容。我现在正在使用 joomla 2.5，而我的旧安装是在 joomla 1.5 上。我的问题是：如何重定向这些网址：

1)www.domain.com/TableView/a/ 到 www.domain.com/archives/index.php/TableView/a/ 2)www.domain.com/Page-3.html 到 www.domain.com/archives /index.php/Page-3.html

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:18:32.640

```
RewriteEngine On
RewriteBase /
RewriteRule ^(TableView/a/)$ /archives/index.php/$1 [R=302,L]
RewriteRule ^(Page-3.html)$ /archives/index.php/$1 [R=302,L] 
```

# jquery - 如何淡出，淡入窗口滚动的div？

> ID：10650418
> 
> 赞同：1
> 
> 时间：2012-05-18T09:53:40.787
> 
> 标签：jquery, jquery-animate, fadein, fadeout, scrolltop

我的 div 在滚动 100px 后很好地淡出，但在滚动 300px 后不会淡入。

有任何想法吗？

```
$(document).ready(function(){
    $(window).scroll(function () {
        if ($(this).scrollTop() > 100) {
            $('#menuWrap').animate({opacity: 0.5}, 1000);   
            } 
        if ($(this).scrollTop() > 300) {
            $('#menuWrap').animate({opacity: 1}, 1000);
            }
     });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T09:56:19.877

尝试添加`stop()`或`stop(true,true)`之前`animate(..)`：

```
$(document).ready(function(){
    $(window).scroll(function () {
        if ($(this).scrollTop() > 100) {
            $('#menuWrap').stop().animate({opacity: 0.5}, 1000);   
            } 
        if ($(this).scrollTop() > 300) {
            $('#menuWrap').stop().animate({opacity: 1}, 1000);
            }
     });
}); 
```

# android - 如何在 SQLite 中使用“strftime”（适用于 Android 应用）

> ID：10650421
> 
> 赞同：1
> 
> 时间：2012-05-18T09:53:47.617
> 
> 标签：android, date, sqlite, strftime

我有一个带有两个表的数据库，每个表都有一个带有日期的列。我使用 strftime 来获取一整月或一整年的行。这些是 DatabaseHelper 类中的方法：

```
public Cursor GetListOfYears() {

        return myDb.rawQuery("SELECT DISTINCT strftime('%Y',date) AS _id 
                                  FROM table_week ORDER BY date", null);    
    }

public Cursor GetListOfMonths() {

        return myDb.rawQuery("SELECT DISTINCT strftime('%m',date) AS _id,   
                             strftime('%Y',date) AS year 
                             FROM table_week ORDER BY date", null);
    } 
```

问题是years方法工作正常，但几个月看起来可以正常工作一段时间但是当我将新行保存到表（在本例中为table_week）与前几个月甚至前几年的日期时，它做奇怪的事情。我自己解释一下：

想象有 3 行的日期从 5 月开始，3 行的日期从 6 月开始......直到一切正常......现在我保存了一个新的行，日期是去年的 4 月、2 月或 12 月...... 1 . 它可以正常工作 2\. 它可以在列表中显示月份，但单击时无法访问其余信息（不太可能发生几次） 3\. 显示正确的月份但年份为 0 和4.显示错误的月份但年份是正确的（这通常发生在保存2011年的日期时，显示2011年但月份总是一月......）

我无法弄清楚这一点，但我确信这个月是问题所在，因为年份列表工作正常......任何帮助将不胜感激，非常感谢你提前

# php - onclick提交检查php

> ID：10650425
> 
> 赞同：1
> 
> 时间：2012-05-18T09:54:02.853
> 
> 标签：php, onsubmit

我有以下 PHP 脚本，但它似乎总是在检查会话，因此回显“请在用户输入代码之前输入正确的代码。

我想在代码实际触发之前点击事件并检查会话和表单的发布。如何在 PHP 中做到这一点？

这是我的代码：

```
<?php

session_start();
    if (md5($_POST['norobot']) == $_SESSION['randomnr2'])   
    { 
        // here you  place code to be executed if the captcha test passes
            echo "Code correct - email should send now";

}   

else {  
        // here you  place code to be executed if the captcha test fails
            echo "Code incorect please try again";
    }

?> 
```

我的提交按钮如下所示：

```
<input type="submit" id="submit_btn" class="button" value="Submit" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:56:29.970

如果要检查会话变量是否已设置并且具有非空白值，则可以执行以下操作：

```
if(isset($_SESSION['THECODE']) && $_SESSION['THECODE']!='')
{
  // THECODE is set to something
} 
```

=============

更新，当您添加代码时：

```
<?php

session_start();
if(isset($_POST['norobot']) && isset($_SESSION['randonnr2']))
{
  if (md5($_POST['norobot']) == $_SESSION['randomnr2'])   
  { 
    echo "Code correct - email should send now";
  }
  else
  {  
    echo "Code incorect please try again";
  }
}

?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T09:57:28.883

```
<?php
    session_start();
    if (isset($_POST['norobot'])) {
        if (md5($_POST['norobot']) == $_SESSION['randomnr2']) {
            // here you  place code to be executed if the captcha test passes
            echo "Code correct - email should send now";
        }
        else {
            // here you  place code to be executed if the captcha test fails
            echo "Code incorect please try again";
        }
    }
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T09:57:11.017

为什么不做这样的事情？检查用户是否提交了任何内容，如果没有，则不执行代码。

```
<?php

session_start();

if(isset($_POST))
    if (md5($_POST['norobot']) == $_SESSION['randomnr2'])   
    { 
        // here you  place code to be executed if the captcha test passes
            echo "Code correct - email should send now";

}   

else {  
        // here you  place code to be executed if the captcha test fails
            echo "Code incorect please try again";
    }
}

?> 
```

# android - 添加 http://www. 在文本中如果不存在

> ID：10650428
> 
> 赞同：10
> 
> 时间：2012-05-18T09:54:19.710
> 
> 标签：android, android-webview, textview, android-textattributes

我怎么知道某些文本包含“http://www”。我想在 Web 视图中显示域。域名写在 TextView 中，但不限制添加前缀。如果用户没有输入它，我必须在 webview 中添加和显示 URL。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-18T10:06:04.290

你可以这样做

```
String url = textView.getText().toString();
if(!url.startsWith("www.")&& !url.startsWith("http://")){
  url = "www."+url;
}
if(!url.startsWith("http://")){
  url = "http://"+url;
} 
```

您可以使用此 url 在 WebView 中显示内容

希望这能解决你的问题

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-20T08:35:45.583

刚刚修改了@silwar 答案并添加了 https ：

```
 if(!url.startsWith("www.")&& !url.startsWith("http://") && !url.startsWith("https://")){
        url = "www."+url;
    }
    if(!url.startsWith("http://") && !url.startsWith("https://")){
        url = "http://"+url;
    } 
```

但请记住，有时会`http://`在 android 中创建安全异常，因此我们应该使用`https://`. 所以对于无风险代码，我们必须像上次检查一样这样做 -

```
 if(!url.startsWith("http://") && !url.startsWith("https://")){
            url = "https://"+url;} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-18T09:58:44.290

The most efficient way of checking that the domain name is well formed and contains (or not) a prefix, is using a regular expression.

Check out [Java Pattern](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html) to match regex in Android. It is worth it.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-18T10:01:56.807

正如 Sebastien 所要求的，正则表达式是一个不错的选择。您还可以从视图中获取文本，创建一个 URI 对象

```
Uri uri = Uri.create(view.getText().toString()); 
```

然后使用 uri.somemethod 您应该能够获得有关您想知道的 url 的所有信息。如果 uri 创建失败，您会生成错误消息，导致出现问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-18T09:58:54.180

I would just get the text from the TextView and parse it via startsWith(). If this is false, just add it to the text and use setText() to reasign it.

You might also want to check for other expressions like only "www.". So take a closer look at contains().

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-04-18T15:12:51.413

尝试这个

```
String a = "http://";
webview.loadUrl(a + url.getText().toString()); 
```

# arrays - 在java中读取JSON响应并将其存储在数组中

> ID：10650431
> 
> 赞同：-1
> 
> 时间：2012-05-18T09:54:36.747
> 
> 标签：arrays, json

我的 JSON 响应如下：

```
["Sting - We Work The Black Seam",
"Bob Marley - No woman no cry",
"Bob Marley - Redemption song",
"Peter Gabriel - Solsbury Hill",
"Elton John - Candle in the wind",
"Elton John - I'm still standing",
"Bernard Lavilliers - Noir et blanc",
"Michel Polnareff - Love me"] 
```

首先让我知道它是否是正确的 JSON。如果是这样，那么如何阅读此信息..?? 因为它没有任何数组甚至单个元素的名称。

谢谢大家。。现在知道怎么办了。。

```
 public ArrayList<String> createPlaylist(String result) {
        try {
            json = new JSONArray(result);
            System.out.println("Json Values : " + json);
        } catch (JSONException e) {
            e.printStackTrace();
        }           
        ArrayList<String> list = new ArrayList<String>();
        if (json != null) {
            int len = json.length();
            for (int i = 0; i < len; i++) {
                try {
                    list.add(json.get(i).toString());
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }
        }
        return list;
    } 
```

这是正确的..请让我知道..

问候， 穆尼卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:57:35.150

It is valid JSON. You can check this online at [http://jsonformatter.curiousconcept.com/](http://jsonformatter.curiousconcept.com/)

To read it in JavaScript, you access it like an array. If you are getting it as a string then you need to parse it into a valid JavaScript construct using something the JSON library found at: [https://github.com/douglascrockford/JSON-js](https://github.com/douglascrockford/JSON-js)

E.g.

```
var myData = JSON.parse(myJSONString);
var elem = myData[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:57:11.323

这是一个有效的 JSON。

试试这个来可视化：http: [//jsonviewer.stack.hu/](http://jsonviewer.stack.hu/)

# maven - 使用 IDEA 从源代码构建 Wicket

> ID：10650438
> 
> 赞同：1
> 
> 时间：2012-05-18T09:54:54.997
> 
> 标签：maven, intellij-idea, wicket

警告：到目前为止，我从未使用过 Maven，我们不想在近期或中期使用它，所以请不要告诉我必须学习它。

我想构建所有 Wicket jar 并获得运行 Wicket 所需的所有依赖 jar。我已经克隆了 Wicket Git 存储库，检查了所需的提交/标记/分支并从外部模型（IDEA 10.5）创建了一个 IDEA 项目，但是如何继续？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T10:45:58.343

抱歉，如果您想构建 Wicket 并使用实际项目，您将需要学习 Maven。简短的回答是运行`mvn clean package`以获取目标目录中的 jars 或`mvn clean install`将其放入本地 maven 存储库。

# javascript - 类似 facebook 的个人资料徽章的 Javascript 正则表达式

> ID：10650441
> 
> 赞同：0
> 
> 时间：2012-05-18T09:55:13.480
> 
> 标签：javascript, regex

我正在寻找一个正则表达式来创建具有以下条件的字符串：

*   可以是可变长度（最多 30 个字符）
*   只能包含字母数字 (az,AZ) 和数字字符 (0-9)
*   只能有这些特殊字符“-”，“。” 字符串中的任何位置
*   必须仅以字母数字或数字开头，不能以特殊字符开头
*   必须至少为 5 个字符

“徽章”字符串将需要在网站的 url 中使用，任何关于此字符串是否可以的建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:04:17.343

RegExp 不会创建用于验证或匹配它们的字符串。你是这个意思吗？

根据您的约束验证字符串的正则表达式将是

```
 /^[a-z0-9][-,\.a-z0-9]{4,29}$/i 
```

解释 ：

```
 /^                  Start of string
   [a-z0-9]            One character in the set a-z or 0-9 
                       (A-Z also valid since we specify flag i at the end
   [-,\.a-z0-9]{4,29}  A sequence of at least 4 and no more than 29 characters
                       in the set. Note . is escaped since it has special meaning
   $                   End of string (ensures there is nothing else
   /i                  All matches are case insensitive a-z === A-Z 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:02:34.427

`^\w[\w-,\.]{4}[\w-,\.]{0,25}$`

这转化为：

> 匹配以字母数字开头的字符串，然后是 4 个有效字符，然后是最多 25 个有效字符。有效的是字母数字“、”“-”或“.”

以下 PowerShell 脚本为此规则提供了单元测试。

```
$test = "^\w[\w-,\.]{4}[\w-,\.]{0,25}$"

# Test length rules.
PS > "abcd" -match $test # False: Too short (4 chars)
False
PS > "abcde" -match $test # True: 5 chars
True
PS > "abcdefghijklmnopqrstuvwxyzabcd" -match $test # True: 30 chars
True
PS > "abcdefghijklmnopqrstuvwxyzabcde" -match $test # False: Too long
False

# Test character validity rules.
PS > "abcd,-." -match $test # True: Contains only valid chars
True
PS > "abcd+" -match $test # False: Contains invalid chars
False

# Test start rules.
PS > "1bcde" -match $test # True: Starts with a number
True
PS > ".abcd" -match $test # False: Starts with invalid character
False
PS > ",abcd" -match $test # False: Starts with invalid character
False
PS > "-abcd" -match $test # False: Starts with invalid character
False 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T10:03:01.733

```
^([\d\w][\d\w.-]{4,29})$ 
```

使用： http: [//gskinner.com/RegExr/](http://gskinner.com/RegExr/)

# javascript - JavaScript 正则表达式“没有重复”错误

> ID：10650443
> 
> 赞同：3
> 
> 时间：2012-05-18T09:55:16.600
> 
> 标签：javascript, regex

我在尝试获取令牌以对 Minic 语言进行词法分析时遇到此错误！

```
document.writeln("1,2 3=()9$86,7".split(/,| |=|$|/));

document.writeln("<br>");
document.writeln("int sum ( int x , int y ) { int z = x + y ; }");
document.writeln("<br>");
document.writeln("int sum ( int x , int y ) { int z = x + y ; }".split(/,|*|-|+|=|<|>|!|&|,|/)); 
```

最后一行的调试器出现错误 Uncaught SyntaxError: Invalid regular expression: Nothing to repeat !!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T09:57:00.363

您需要转义特殊字符：

```
/,|\*|-|\+|=|<|>|!|&|,|/ 
```

[查看](http://www.fon.hum.uva.nl/praat/manual/Regular_expressions_1__Special_characters.html)需要转义哪些特殊字符：

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T09:59:11.183

You need to escape the characters `+` and `*` since they have a special meaning in regexes. I also highly doubt that you wanted the last `|` - this adds the empty string to the matched elements and thus you get an array with one char per element.

Here's the fixed regex:

```
/\*|-|\+|=|<|>|!|&|,/ 
```

However, you can make the it much more readable and maybe even faster by using a character class:

```
/[-,*+=<>!&]/ 
```

Demo:

```
js> "int sum ( int x , int y ) { int z = x + y ; }".split(/[-,*+=<>!&]/);
[ 'int sum ( int x ',
  ' int y ) { int z ',
  ' x ',
  ' y ; }' ] 
```

# ruby-on-rails - 以小块从 CSV 导入记录（ruby on rails）

> ID：10650444
> 
> 赞同：1
> 
> 时间：2012-05-18T09:55:17.477
> 
> 标签：ruby-on-rails, ruby, csv, heroku, import

我需要导入一个大的 CSV 文件，分解成每 X 小时导入一次的小块。

我做了以下 rake 任务

```
task :import_reviews => :environment do
 require 'csv'
 CSV.foreach('reviews.csv', :headers => true) do |row|
  Review.create(row.to_hash)
 end
end 
```

使用 heroku 调度程序，我可以让这个任务每天运行，但我想把它分成几个块，例如每天 100 条记录：

这意味着我需要跟踪导入的最后一行，并在下次让 rake 任务运行时从该行开始 += 1，我该如何实现呢？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:13:50.060

将 CSV 的其余部分读入一个数组，并在 CSV.foreach 循环之外写入同一个 CSV 文件，以便每次都变小。我想我不必在代码中给出这个，但如果有必要评论我，我会做的。

如果您想将 CSV 保留为一个整体，请在 CSV 中添加一个“已处理”字段，并在读取时将其填充为 1，下次将其过滤掉。

编辑：这未经测试，肯定会更好，但只是为了说明我的意思

```
require 'csv'
index = 1
csv_out = CSV::Writer.generate(File.open('new.csv', 'wb'))
CSV.foreach('reviews.csv', :headers => true) do |row|
  if index < 101
    Review.create(row.to_hash)
  else
    csv_out << row
  end
  index += 1
end
csv_out.close 
```

之后，转储reviews.csv 并将new.csv 重命名为reviews.csv

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T22:51:57.587

您可能希望对分块 CSV 解析执行类似的操作，然后将使用 Resque 访问数据库的作业排入队列并以适当的方式安排它们，因此它们运行受限：

[https://gist.github.com/3101950](https://gist.github.com/3101950)

# java - Java 静态数组列表 remove issue I have static ArrayList<batch>. i want to remove which object contain productcode This is my Batch Entity public class BatchControl implements Parcelable{ priv 问问题 问问题 2012-05-18T09:55:27.730 2251 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have static ArrayList<batch>. i want to remove which object contain productcode This is my Batch Entity public class BatchControl implements Parcelable{ private String productCode; private String lotNumber; private String batchSerialNumber; private double quantity ; private int sequence; private String productName; private String type; //Setter & getter } This is my removing object static ArrayList <string>lstString = new ArrayList<string>(); for (Iterator <batch>i = lstString.iterator(); i.hasNext(); ) { Batch value=(Batch )i.next(); if(value.getSequence() == iVal) { lstString.remove(value); } } iVal is Android TableLayout contain the row number. String number = txtNumber.getText().toString(); iVal = Integer.parseInt(number); But it didn't remove which object have iValue. Because of the resoan static arraylist so, each & every time when i remove size going to change. Please help me out. Thanks in advance. The FB.getLoginStatus() no response I am doing a demo of facebookapp that only wants to get a acces_token from the app. The app is totally client side and i don't have the possibility of server-side. At this moment I load correctly the javascript sdk asynchronously and init the facebook with this params: FB.init( { appId: 'XXXX', //XXXX is my AppID // channelUrl: http://bla, status: true, cookie: true, xfbml: true, oauth: true }); My problem is that the function: FB.getLoginStatus(function (response) { alert('Check login: ' + response); console.log("3"); if (response.status === 'connected') { // the user is logged in and has authenticated your // app, and response.authResponse supplies // the user's ID, a valid access token, a signed // request, and the time the access token // and signed request each expire var uid = response.authResponse.userID; var accessToken = response.authResponse.accessToken; console.log("Access Token: " + accessToken); } else if (response.status === 'not_authorized') { // the user is logged in to Facebook, // but has not authenticated your app } else { // the user isn't logged in to Facebook. } }); no response anything. Anyone knows why?? java 4 3 回答 3 This answer is useful 4 You should use i.remove(), please refer to http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Iterator.html 于 2012-05-18T09:57:54.280 回答 This answer is useful 1 When using an Iterator on a list, you can safely remove the current element (regarding position or index in the list) with Iterator.remove(). for (Iterator <batch>i = lstString.iterator(); i.hasNext(); ) { Batch value=(Batch )i.next(); if(lstBatCtrl.get(k).getSequence() == iVal) { i.remove(); } } Take into account that using remove() on a static List can yield to problems if there are concurrent modifications on the List. Citing Iterator.remove()'s javadoc: The behavior of an iterator is unspecified if the underlying collection is modified while the iteration is in progress in any way other than by calling this method 于 2012-05-18T09:59:50.763 回答 This answer is useful 1 使用以下代码： for (Iterator <batch>i = lstString.iterator(); i.hasNext(); ) { Batch value=(Batch )i.next(); if(value.getSequence() == iVal) { i.remove(); } } 于 2012-05-18T10:00:30.427 回答 Related 1 javascript - 谷歌图表 json 数据馈送 6 html - IE7：位置：绝对不会将元素从文档流中取出 1 com - 使用 Wix 注册 COM 服务器 1 html - onclick 分别水平展开和收缩 div 1 jquery - Jquery 获取复选框 id 列表以发送到 mvc 控制器操作 1 .net - 使用函数导入延迟加载 2 c# - 肥皂反序列化问题 1 c# - 查看已安装设备的端口地址和属性 2 sql - 扭曲的 adbapi：受影响的行数和最后插入 id 3 iphone - 使用 BJImageCropper 在 ios 中裁剪图像 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</batch></batch></batch></string></string></batch></batch>

> ID：10650446
> 
> 赞同：0
> 
> 时间：
> 
> 标签：java

I have `static ArrayList<Batch>`. i want to remove which object contain productcode

This is my Batch Entity

```
public class BatchControl implements Parcelable{
  private String productCode;
  private String lotNumber;
  private String batchSerialNumber;
  private double quantity   ;
  private int sequence;
  private String productName;
  private String type;
  //Setter & getter
 } 
```

This is my removing object

```
 static ArrayList<String> lstString = new ArrayList<String>();
  for (Iterator<Batch> i = lstString.iterator(); i.hasNext(); ) {
        Batch value=(Batch )i.next();
        if(value.getSequence() == iVal) {
            lstString.remove(value);
        }
    } 
```

`iVal` is Android TableLayout contain the row number.

```
 String number = txtNumber.getText().toString();
    iVal = Integer.parseInt(number); 
```

But it didn't remove which object have iValue. Because of the resoan static arraylist so, each & every time when i remove size going to change.

Please help me out.

Thanks in advance.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T09:57:54.280

You should use i.remove(), please refer to [http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Iterator.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Iterator.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T09:59:50.763

When using an `Iterator` on a list, you can safely remove the current element (regarding position or index in the list) with [`Iterator.remove()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Iterator.html#remove%28%29).

```
for (Iterator<Batch> i = lstString.iterator(); i.hasNext(); ) {
    Batch value=(Batch )i.next();
    if(lstBatCtrl.get(k).getSequence() == iVal) {
        i.remove();
    }
} 
```

Take into account that using `remove()` on a `static List` can yield to problems if there are concurrent modifications on the `List`. Citing `Iterator.remove()`'s javadoc:

> The behavior of an iterator is unspecified if the underlying collection is modified while the iteration is in progress in any way other than by calling this method

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T10:00:30.427

使用以下代码：

```
 for (Iterator<Batch> i = lstString.iterator(); i.hasNext(); ) {
        Batch value=(Batch )i.next();
        if(value.getSequence() == iVal) {
            i.remove();
        }
    } 
```

# facebook - FB.getLoginStatus() 无响应

> ID：10650447
> 
> 赞同：1
> 
> 时间：2012-05-18T09:55:30.300
> 
> 标签：facebook

我正在做一个 facebookapp 的演示，它只想从应用程序中获取一个 acces_token。该应用程序完全是客户端，我没有服务器端的可能性。此时我正确加载了 javascript sdk 并使用以下参数初始化了 facebook：

```
FB.init(
    {
        appId: 'XXXX',   //XXXX is my AppID
        // channelUrl: http://bla,
        status: true,
        cookie: true,
        xfbml: true,
        oauth: true
    }); 
```

我的问题是功能：

```
 FB.getLoginStatus(function (response) 
    {
        alert('Check login: ' + response);
        console.log("3");
        if (response.status === 'connected') 
        {
            // the user is logged in and has authenticated your
            // app, and response.authResponse supplies
            // the user's ID, a valid access token, a signed
            // request, and the time the access token 
            // and signed request each expire
            var uid = response.authResponse.userID;
            var accessToken = response.authResponse.accessToken;
            console.log("Access Token: " + accessToken);
        } 
        else if (response.status === 'not_authorized') 
        {
            // the user is logged in to Facebook, 
            // but has not authenticated your app
        } 
        else 
        {
            // the user isn't logged in to Facebook.
        }

    }); 
```

没有任何反应。

有谁知道为什么？？

# java - 在春季创建动态操作并将变量传递给请求映射时出错

> ID：10650453
> 
> 赞同：2
> 
> 时间：2012-05-18T09:55:48.963
> 
> 标签：java, spring, spring-mvc

我已经编写了一个控制器类，其中我正在编写一个请求映射方法，该方法又将调用另一种具有请求映射的方法（但这次使用一些路径变量）

遇到异常：java.lang.NumberFormatException：对于输入字符串：“{50}”

```
Controller class :

@Controller
public class CompanyController {

....other code.........

    @RequestMapping("/companySave.do")
    public String saveCompany(Map<String, Object> map, @ModelAttribute("company")
    Company company, BindingResult result)
    {   

        map.put("success", "success");

        companyService.saveCompany(company);

        return "redirect:/companyAddressSave/{"+company.getId()+"}.do";
    }

    @RequestMapping("/companyAddressSave/{id}.do")
    public String saveAddressCompany(@PathVariable("id") String id,Map<String, Object> map, @ModelAttribute("company")
    Company company, BindingResult result)
    {   map.put("Success", "Success");
        map.put("company", companyService.getCompany(Long.parseLong(id)));
        System.out.println("Hi");       
        return "add-compnay-master";
    }

} 
```

任何人都可以告诉我在传递路径变量时我是否犯了任何错误..??? 提前致谢..！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T11:00:56.067

不要传递花括号：

```
return "redirect:/companyAddressSave/"+company.getId()+".do"; 
```

# assembly - 如何从 gdb 中的 $rbp 打印值的间隔？

> ID：10650457
> 
> 赞同：0
> 
> 时间：2012-05-18T09:55:56.460
> 
> 标签：assembly, gdb, 64-bit

如果`x /w $rbp + 0x18`打印地址和该地址的值，有什么方法可以打印地址和值的间隔`$rbp`吗？

类似的东西`x /w $rbp +- 0x18`，即范围 from `$rbp - 0x18`to `$rbp + 0x18`?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T10:00:41.203

来自 gdb ：FMT 是一个重复计数，后跟一个格式字母和一个大小字母。：

```
x/48w $rbp-0x18 
```

# actionscript-3 - 显示错误信息的能力

> ID：10650463
> 
> 赞同：1
> 
> 时间：2012-05-18T09:56:15.857
> 
> 标签：actionscript-3, apache-flex, flexbuilder

使用功能访问信息时，我得到的值不正确。

```
var screenX:Number = Capabilities.screenResolutionX;
var screenY:Number = Capabilities.screenResolutionY;
var pixelCheck:Number = screenX * screenY;
var pixels:Number = (screenX*screenX) + (screenY*screenY);
var screenSize:Number = Math.sqrt(pixels)/Capabilities.screenDPI;
var screenDpi:Number = Capabilities.screenDPI;

trace("screenX : " + screenX);
trace("screenY : " + screenY);
trace("pixelCheck : " + pixelCheck);
trace("pixels : " + pixels);
trace("screenSize : " + screenSize);
trace("screenDpi : " + screenDpi); 
```

当我在 flex 模拟器上调试它时，对于 iphone 4，我得到以下结果。

```
screenX : 1280
screenY : 1024
pixelCheck : 1310720
pixels : 2686976
screenSize : 5.028220260069967
screenDpi : 326 
```

屏幕 dpi 是正确的，但由于 iphone 的分辨率为 640 X 960，为什么它显示的值不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T14:32:31.720

这是预期的行为。Capabilities 类返回正确的值；这是您正在运行它的设备的屏幕分辨率（也不是 iPhone ）。

您可以提交[错误报告/增强请求](https://bugbase.adobe.com/)。或者在实际设备上进行测试。总的来说，我发现模拟器在测试方面会受到打击或错过。

# knockout.js - 可观察数组的敲除映射似乎不起作用

> ID：10650468
> 
> 赞同：1
> 
> 时间：2012-05-18T09:56:28.643
> 
> 标签：knockout.js, knockout-mapping-plugin, ko.observablearray

我在我的 MVC 项目中使用淘汰赛 (KO)。我在服务器上创建了一个 MVC 模型（用于网格）并将其传递给视图。在视图上，它被序列化并转换为 KO 模型（使用 ko.mapping），该模型又用于绑定。然后在 HTML 中使用该绑定来创建网格。

这就是我的 MVC 网格模型的样子，然后通过 ko.mapping 将其转换为相应的 KO 模型：

```
public class GridModel
    {
        /// <summary>
        /// Grid body for the grid.
        /// </summary>
        public GridBodyModel GridBodyModel { get; set; }

        /// <summary>
        /// Grid context.
        /// </summary>
        public GridContext GridContext { get; set; }

        /// <summary>
        /// Grid header for the grid.
        /// </summary>
        public GridHeaderModel GridHeader { get; set; }
    }

public class GridBodyModel
    {
        /// <summary>
        /// List of grid body rows.
        /// </summary>
        public IList<GridRowModel> Rows { get; set; }
    }

public class GridContext
    {
        /// <summary>
        /// Total number of pages. Read-only.
        /// </summary>
        public int TotalPages{ get; set; }
    }

public class GridHeaderModel
    {
        /// <summary>
        /// List of grid header cells.
        /// </summary>
        public IList<GridHeaderCellModel> Cells { get; set; }
    } 
```

很明显，主模型类 GridModel 由以下作为属性存在的类组成：

GridBodyModel：具有要在网格主体中呈现的行列表。

GridContext：具有总页数作为属性。它还具有其他属性，但这超出了本次讨论的范围。

GridHeaderModel：具有必须显示在网格标题中的单元格列表。

然后我有这个脚本，它将在新页面加载时执行。

```
$(document).ready(function () {
        // Apply Knockout view model bindings when document is in ready state.
        ko.applyBindings(Global_GridKOModel, document.getElementById("gridMainContainer"));
    });

// Serialize the server model object. It will be used to create observable model.
Global_GridKOModel = ko.mapping.fromJS (<%= DataFormatter.SerializeToJson(Model) %>); 
```

**Global_GridKOModel**是全局 javascript 变量。 **模型**是来自服务器的 MVC 网格模型。

用户可以再次在页面上执行进一步的搜索。我通过 Ajax 发布新的搜索条件来处理这个问题。在这篇文章中，创建了一个新的 MVC 模型并作为 Ajax 响应发回。然后，这个新的 MVC 模型被简单地用于使用 ko.mapping 更新 Global_GridKOModel ，这反过来又刷新了之前在新页面加载时构建的网格（使用新数据）。我就是这样做的。

```
$.ajax({
        url: destUrl,
        data: dataToSend
        success: function (result) {
            ko.mapping.fromJS(result, Global_GridKOModel);
        },
        error: function (request, textStatus, errorThrown) {
            alert(request.statusText);
        }
    }); 
```

除以下情况外，一切正常。

发出一个没有返回结果的 Ajax 请求，即**模型 GridModel 中的 GridBodyModel 和 GridHeaderModel 为空**。该时间网格正确地显示没有找到任何记录。这是对的。这通过以下 HTML 绑定发生。

```
<!-- When no record is found. -->
<div data-bind="ifnot: GridContext.GridPager.TotalPages() > 0">
    No record(s) were found.
</div>

<!-- This is actual grid table container. This is binded when records are found -->
<div data-bind="if: GridContext.TotalPages() > 0">

Grid construction happens here

</div> 
```

现在之后，如果发出另一个 Ajax 请求，但这次返回记录（我已经用 firebug 检查了响应，并确认确实返回了记录）。这次发生了网格构造，其中访问了各种可观察的数组。例如，为以下网格构造寻呼机是我编写的一段 HTML 绑定。

```
<td data-bind="attr:{colspan: GridHeader.Cells().length }"> 
```

这次 KO 抛出以下错误，可以在 firebug 中看到。

*无法解析绑定。消息：TypeError：GridHeader.Cells 不是函数；绑定值：attr:{colspan: GridHeader.Cells().length }*

只要有记录被返回，它就可以正常工作，但是如上所述在没有返回记录后它会中断。请注意，当没有返回记录时，GridHeader 在早期响应中为空。我在 ko.mapping 中闻到了一些腥味。我认为映射可观察数组时存在一些问题。

那么我做错了什么？请问有人吗？

如果我没有清楚地提到事情，请随时要求澄清。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T14:28:44.340

行为的实际原因是最初 GridHeader 是 javascript 对象，但是当您的返回调用映射为 GridHeader 属性为 null 时，它将变为具有 null 值的可观察的，并且在所有未来的更新中它仍然是可观察的。

解决方法是（选择一个）：

1.  不要为子模型返回空值（而是返回空对象） - 我认为这是首选方式
2.  或者 - 在调用 map 之前，运行 Global_GridKOModel.GridHeader = null; （这将确保更新后 GridHeader 不会是可观察的）
3.  或者 - 映射后，调用 Global_GridKOModel.GridHeader = ko.unwrapObservable(Global_GridKOModel.GridHeader);

您的行为的完整解释在下面的代码中（在 jsfiddle 上复制 - [http://jsfiddle.net/nickolsky/zrBuL/9/](http://jsfiddle.net/nickolsky/zrBuL/9/)）

```
console.log('step1');
var vm = ko.mapping.fromJS({ body: { children: [ 1, 2, 3]} });
console.log(vm.body.children()[1]); //prints 2

console.log('step2');
ko.mapping.fromJS({ body: { children: [ 4, 5, 6]} }, vm);
console.log(vm.body.children()[1]); //prints 5

console.log('step3');
//after next call, vm.body is no longer variable - it is now observable
ko.mapping.fromJS({ body: null }, vm);
console.log(vm.body); //prints observable
console.log(vm.body()); //prints null

console.log('step4');
//and it will remain observable for next call
ko.mapping.fromJS({ body: { children: [ 7, 8, 9]} }, vm);
console.log(vm.body().children()[1]); //prints 8
console.log(vm.body().children().length); //prints 3
console.log(vm.body); //prints observable function body
console.log(vm.body()); //prints object

//workaround for null issue - we can reset it to be null instead of null observable
//and it will get original behavior
vm.body = null;
console.log('step5');    
ko.mapping.fromJS({ body: { children: [ 7, 8, 9]} }, vm);
console.log(vm.body.children()[1]); //prints 8 - body is no longer observable again
​ 
```

对我来说，这看起来像是映射插件的设计问题，我无法找到一种方法来自定义子视图模型属性的映射，以确保它们在为空时不会成为可观察对象（“复制”功能将使所有内部内容成为不可观察，不幸的是）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T06:15:10.853

我昨晚想通了。实际上，这是我犯的非常基本的错误。将数组设置为空后，我试图访问它。我将解释它如何。

当返回结果时，定义了 GridHeaderModel 和其中的 IList 单元，即不为空。那时 ko.mapping 能够转换模型并在其中创建模型和数组。但是，当发出任何 ajax 请求时，返回 noo 结果并且 GridHeaderModel 为空，显然 IList Cells 也为空。那个时候 ko.mapping 也做了同样的事情，它更新的 KO 模型也将 GridHeaderModel 设置为 null 并且里面的可观察数组 Cells 不存在，这和 null 一样好。现在，当我发出另一个返回一些记录的 ajax 请求时，ko.mapping 尝试更新客户端上 KO 模型中不存在（或设置为 null）的可观察数组 Cells，但失败了。如果不是 ajax 而是新的页面加载，那么一切都会奏效。因此，解决方案是不要将任何未初始化的枚举（那些将被转换为可观察数组的枚举）返回给客户端以进行 KO 模型更新。因此，当不返回任何记录时，我确保 GridHeaderModel 不为空，并确保 IList Cells 已初始化，尽管它不包含任何元素。这解决了问题。

这个问题可以用下面的例子来解释。

```
public class Demo
{
    public IList<string> DemoArray;
}

public class DemoUser
{
    public void UseDemo()
        {
            var demoInstance = new Demo();
            demoInstance.DemoArray.Add("First Element");
        }
} 
```

在 UseDemo() 方法中，我们已经初始化了类实例 Demo，但 IList DemoArray 仍未初始化。因此，当我们尝试访问它时，会抛出运行时异常。这就是我的情况。在第一个 ajax 响应中，我将 observable 数组设置为 null 即取消初始化它，然后在下一个 ajax 响应中我试图访问它。

# web-services - 如何插入 SOAPHandler (JAX-WS)？

> ID：10650471
> 
> 赞同：0
> 
> 时间：2012-05-18T09:56:30.893
> 
> 标签：web-services, jax-ws, webservice-client, jax-ws-customization

我想用 SOAPHandler 处理 SOAP 标头，即我已经创建了 SOAPHandler，但是如何将其插入指定的服务？换句话说，这个处理程序应该处理这个服务的消息。可能我需要使用一些注释或xml配置......？..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-08T15:52:59.757

这可以通过以下步骤来完成。

**1.定义处理程序**

```
public class CalculatorSOAPHandlerOne implements SOAPHandler<SOAPMessageContext> {

    private static final Logger logger = LoggerFactory.getLogger(CalculatorSOAPHandlerOne.class);

    @Override
    public Set<QName> getHeaders() {
        return null;
    }

    @Override
    public boolean handleMessage(SOAPMessageContext context) {
        if(!(Boolean)context.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY)){
            logger.info(" soap message passed through CalculatorSOAPHandlerOne (only for request)");
        }
        return true;
    }

    @Override
    public boolean handleFault(SOAPMessageContext context) {
        return true;
    }

    @Override
    public void close(MessageContext context) {

    }
} 
```

**2.在XML中声明处理程序链声明（handler-chain.xml）**

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<javaee:handler-chains
        xmlns:javaee="http://java.sun.com/xml/ns/javaee"
        xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <javaee:handler-chain>
        <javaee:handler>
            <javaee:handler-class>com.chathurangaonline.jaxws.samples.handler.CalculatorSOAPHandlerOne</javaee:handler-class>
        </javaee:handler>

        <javaee:handler>
    </javaee:handler-chain>
</javaee:handler-chains> 
```

**3\. 为 JAX-WS 服务实现添加处理程序链**

```
@WebService
@HandlerChain(file = "handler-chain.xml")
public class CalculatorService{

    private  static final Logger logger = LoggerFactory.getLogger(CalculatorServiceImpl.class);

    @Override
    public double add(double num1, double num2) {
        logger.info("== calling add method ==");
        return num1 + num2;
    }

    @Override
    public double multiply(double num1, double num2) {
        return num1 * num2;
    }
} 
```

# iphone - 当我尝试调用dismissViewController 时应用程序崩溃

> ID：10650484
> 
> 赞同：0
> 
> 时间：2012-05-18T09:57:17.553
> 
> 标签：iphone, objective-c, ios

我有一个视图，我称之为我的方法：

```
 Twitter *tweet = [[Twitter alloc] initWithNibName:@"Twitter" bundle:nil];

[self presentModalViewController:tweet animated:YES]; 
```

视图控制器没有任何问题。现在，当我尝试在 twitter 视图控制器的方法中调用dismissviewcontroller 时，例如：[self dismissModalViewControllerAnimated:NO];

应用程序崩溃了？

即使基本结构是正确的，但仍然应用程序崩溃？为什么呢 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:59:18.130

try: `[self.parentViewController dismissModalViewControllerAnimated:NO];` - this is because the modal view controller is presented by the controller that presents the twitter controller and it's one that needs to dismiss the modal controller (which is the twitter controller)

**UPDATE:** If you're targeting iOS 5+ then use:

```
[self dismissViewControllerAnimated:NO completion:nil];
//or
[self.presentingViewController dismissViewControllerAnimated:NO completion:nil]; 
```

else if you want to maintain backward compatibility use:

```
if([self respondsToSelector:@selector(dismissViewControllerAnimated:completion:)])
{
    [self dismissViewControllerAnimated:NO completion:nil];
}
else
{
    [self dismissModalViewControllerAnimated:nil];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:13:55.267

当您在析构函数（`dealloc`方法）中过度释放某些东西时，通常会发生这种问题。IB 总是添加代码来释放对象，但它不会查看它是否已经存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T10:18:42.867

You need to dimiss the view from the navigation controller. Try this:

```
[self.navigationController dismissModalViewControllerAnimated:YES]; 
```

# c# - Windows Gadget for Sharepoint 2007 List 使用 SOAP、Javascript、C#、Webservices、jQuery

> ID：10650490
> 
> 赞同：0
> 
> 时间：2012-05-18T09:57:34.757
> 
> 标签：c#, javascript, web-services, sharepoint, windows-desktop-gadgets

我正在尝试为 Sharepoint 2007 开发一个小工具，它将对用户进行身份验证，然后从特定 URL 获取他的共享点列表，

在过去的 4 天里，我一直在研究它并遇到了不同的制作方法，但是因为解决方案要么完成了一半，要么不工作，要么太混乱而无法获得帮助或转换成我想要的东西。

因为 Windows Gadget 使用 Scripting + HTML，所以我有以下选项可以继续制作这个小工具，

*   创建一个 Visual Studio 项目 (dll)，它将使用 Sharepoint 的 SPLIST/SPWeb 为我获取列表，然后我可以使用 JavaScript 和 Visual Studio“COM”来读取该 dll（“类”）并在 JavaScript 中获取数据并显示它在 HTML 上。这种方法的问题是，我不确定，如果我使用 Sharepoint SPLIST 创建一个“dll”并将其放入小工具文件夹中，它是否可以在客户端上运行（那里的 PC 上没有安装 sharepoint）。在尝试寻求有关此问题解决方法的帮助时，我发现这个项目正在做同样的事情，但不确定我是否对其进行了更改，它将与我之前谈到的“dll”一起使用，这里是链接小工具，

[Gmail Gadget 使用 JavaScript 读取 Visual Studio Dll](http://www.codeproject.com/Articles/17408/NET-Interop-for-Gadgets-A-C-GMail-Inbox-Reader-Ex)

*   解决问题的第二种方法是，如果我使用 Sharepoint webservices，那将获得所有列表项，但是在 JavaScript 中使用 Webservices 并不是那么容易，所以如果我创建一个 Visual Studio 项目，获取一个 web 参考sharepoint webservices，并返回一个列表，我再次使用 JavaScript 从 DLL 中读取结果，并将它们显示在 HTML 上。

[此链接在 Dot Net 项目中使用 Web 服务来更新列表项，但在评论中它还告诉了如何获取列表数据，然后我将如何验证我的用户](http://social.msdn.microsoft.com/Forums/en-US/sharepointdevelopment/thread/8e4edf0f-19d7-4d3f-8086-e615b9be2681/)

*   另一种解决方案是使用 Jquery 来获取共享点列表数据，就像之前的链接一样，但同样，我怎样才能验证我的用户@小工具？

[使用 jQuery 获取列表数据](http://mydevexperience.wordpress.com/2011/05/08/sharepoint-list-access-part-i-how-to-access-sharepoint-list-web-service-using-jquery-entirely-client-side-only/)

*   我最喜欢的解决方案是将 SOAP 或 REST 与 web 服务一起使用，我想使用 SOAP 来获取 Sharepoint List 数据并同时对我的用户进行身份验证，我找到了数百个关于此的教程，但没有一个真正进行身份验证或讲述如何这可以在小工具中使用，使用 JavaScript/HTML，

*   我在网上发现的小工具很少与我需要的东西相关，它们要么不起作用，要么无法更改为我想要的。

    [Datapolis Sharepoint List Gadget，根本无法在我的 PC 上运行，尽管它正是我正在寻找的，可能的原因是，它不适用于 SSL/https](http://datapolis.com/products/sharepointlistgadget.aspx)

[一个从网站获取新闻提要的小工具，它发送 HTTPxml 请求，但随后要求提供 RSS 提要，而我正在处理的 sharepoint 站点中没有 Rss 反馈](http://www.blockcoders.net/creating-xml-based-gadget-windows-7)

阅读这篇文章我希望你能增加你的知识或分享它:)

**编辑** **我的意思是使用 Sharepoint MOSS“SPLIST”或“SPWEB”作为客户端对象模型，因为我使用 Moss 我不能使用客户端对象模型身份验证:(。真的很抱歉错误信息**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:02:34.453

如果您负担得起使用您的小工具部署 COM 组件，那么第一种方法将起作用。您将逻辑包装在 CCW .NET 类的外观中（使用 .NET SP 客户端 OM）并通过 regasm 将其注册为 COM。所有纯 .NET，您的类将被声明（和编写）COM 兼容。

稍后您可能会发现第二种方法过于局限；SP ClOM 支持比 SP WS 更多的功能。把 jQuery 扔进去并没有太大的改变。（不幸的是，SP JS ClOM 只能在 SP 页面上使用；不能在小工具中使用。）

如果你走痛苦的路（JS ;-) IWA 应该给你（Windows）SSO 身份验证。如果您从 DLL 调用 SP ClOM，您可以重用当前用户 (SSO) 的 Windows 会话令牌，或者如果用户愿意，可以通过您的表单进行显式身份验证。（您也可以以与 Windows 不同的用户身份登录 SP UI。）[两者都受支持](http://msdn.microsoft.com/en-us/library/ee535729.aspx)。

我首先尝试 DLL 方法。

**更新：**糟糕，您使用的是 SP 2007，而不是 2010 - 没有 SP ClOM。我应该早点注意到，抱歉...不过，您可以创建一个 .NET DLL，它可以通过 WS 与 SP 对话。您仍然可以设置[`DefaultNetworkCredentials`](http://msdn.microsoft.com/en-us/library/system.net.credentialcache.defaultcredentials%28VS.80%29.aspx)为[`HttpWebRequest.Credentials`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.credentials.aspx)(REST) 或`.Credentials`WS 客户端类 (SOAP) 以获取 SSO 身份验证。[`NetworkCredential`](http://msdn.microsoft.com/en-us/library/71b57yke.aspx)或者使用名称和密码创建您自己的。

--- 费尔达

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T11:54:26.973

您将其安装在用户 PC 上，因此您无法使用标准 SharePoint API (Microsoft.SharePoint.dll)

您使用的是 2007，因此您不能使用“客户端对象模型”（托管/silverlight 或 EMCA 脚本）

那离开

a) SharePoint Web 服务（JavaScript 或仍然是 JavaScript 的 JQuery）。

这意味着您的小工具将通过与浏览您的网站的人相同的机制向 SharePoint 进行身份验证 - 通常是集成的 Windows 身份验证。

首先是优秀的 ht​​tp [://spservices.codeplex.com/](http://spservices.codeplex.com/)库，它允许您轻松地从 JQuery 调用 Web 服务）。有关如何使用它的提示，请参阅文档。

[对于一个完成了一半的项目， http://sharepointsidebar.codeplex.com/](http://sharepointsidebar.codeplex.com/)怎么样

b) Create your own custom web services by deploying a dll on the SharePoint server then call those via JavaScript (perhaps usign JSON or similar rather

# azure - Windows azure 虚拟机中的并行配置问题

> ID：10650498
> 
> 赞同：0
> 
> 时间：2012-05-18T09:57:59.440
> 
> 标签：azure, side-by-side, regsvr32, winsxs

我正在做一个实验，目的是让可执行程序在 Windows azure 上运行。

首先，我尝试使用具有 Windows azure 角色的远程桌面使其工作（参考[http://msdn.microsoft.com/en-us/library/windowsazure/gg443832.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg443832.aspx)），我将我的 exe 复制到远程桌面，并且一些dll，然后我使用“regsvr32.exe”注册这些dll，然后问题来了：“并排配置不正确”。

我知道当它在我自己的计算机上时如何解决这个问题（只需确保正确的依赖项位于“winsxs”目录中），但现在它在使用 Windows azure 角色的远程桌面中，我无权添加正确的依赖项到 winsxs 目录中。所以我来这里寻求帮助，在此先感谢！

PS：我无法更改我的 exe 引用的这些 dll。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T16:04:48.337

我想说这个问题可能只是因为一些参考 DLL 不在 Azure VM 中，所以当你部署你的包（EXE + DLL）时，你需要确保你所有的组件都在系统中注册。您可以使用 RDP 登录 Azure VM 并测试您的部署是如何工作的，这当然很好，但是最好的方法是通过 web/worker 部署您的包，并且在您的 can 中，worker 角色似乎很合适。

您仍然需要进一步挖掘以找出 EXE 不起作用的原因，如果您提供有关库和流程的更多详细信息，我们可能会有所帮助，但上述信息很少提供建议。

要解决此类问题，您应该这样做：

1.  创建一个 zip 文件并包含应用程序所需的所有参考 DLL/EXE、静态文件
2.  创建一个 Worker 角色并将此 zip 文件添加为内容并将其属性 Copy local 设置为 true。
3.  将 CMD Batch 文件添加到您的 Azure 项目并编写所有步骤，如下所示：

    3.1。将文件解压缩到本地文件夹 3.2\. 使用 Regsvr32 进程 3.3 注册所有 DLL。将您的 exe 作为 ProgramEntryPoint 设置到 ServiceDefinition.csdef

使用您的 EXE 作为 ProgramEntryPoint，工作角色主机进程将启动它并监视它，设置如下所示：

```
<Runtime executionContext="limited">
 <EntryPoint>
   <ProgramEntryPoint commandLine="your_exe_name.exe" setReadyOnProcessStart="true" />
 </EntryPoint>
</Runtime> 
```

完成上述设置后，您可以部署 Azure 包，然后将 RDP 部署到 Azure VM 并测试您的应用程序是否有任何问题。

# jquery - 读取json对象数据

> ID：10650502
> 
> 赞同：0
> 
> 时间：2012-05-18T09:58:13.207
> 
> 标签：jquery, arrays, json, object

## 客户端.html

我如何在客户端编写这个 json 数据检索，以便循环出每个框和其中的样式。

像这样的东西是行不通的......

```
success:  function(output) {
    var records = output.data;
    var str = "";

    if (records) {
        alert(records.length);

        for (var i = 0; i < records.length; i++) {
            for (var j in records[i]) {
                str += j + " --> " + records[i][j] + "\n";
            }
        }
    }
} 
```

## 测试.php

```
$sql= "select id, style from table";
$result = mysql_query ($sql);

while($r = mysql_fetch_assoc($result)) {
    $id = $r['id'];
    $rows[$id] = $r;
}

$data = array(
    'data' => $rows,
    'debug' => $msg,
    'status'    => 1
); 
```

借助构建功能中的 php 转换为 json 后的数据。（我想要的格式）

```
{
    "data": {
        "box1": { "style":"position: absolute;", "id":"box1" },
        "box2": { "style":"position: relative;", "id":"box2" },
        "box88": { "style":"position: relative;", "id":"box3" }
    },
    "debug":"feedback to client end",
    "status":1
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:34:39.380

@Rory，您的函数ID中的问题是您正在迭代对象属性，就好像它是一个数组一样。我想下面的代码可以解决你的问题（你也可以看到它在[这个 fiddle](http://jsfiddle.net/7RK6Z/)上工作）。

```
function process(records) {
    result = [];
    for(var rec in records) {
        var row = [rec + "->"];
        for(var stl in records[rec]) {
            row.push("\t" + stl + "->" + (records[rec][stl]));
        }
        result.push(row.join("\n"));
    }

    $("#result").html(result.join("\n"));
}

// var obj = { your original data }
process(obj.data); 
```

# cpu - Intersection of data using CPU Address Bus

> ID：10650508
> 
> 赞同：0
> 
> 时间：2012-05-18T09:58:48.223
> 
> 标签：cpu, intersection, bus, address-bus

I'm reading a paper and in a part of this paper there is a note about intersecting sets using address bus. This is the exact quote from the paper:

> Fast retrieval methods often rely on intersecting sets of documents that contain a particular word or feature. Semantic hashing is no exception. Each of the binary values in the code assigned to a document represents a set containing about half the entire document collection. Intersecting such sets would be slow if they were represented by explicit lists, but all computers come with a special piece of hardware – the address bus – that can intersect sets in a single machine instruction. Semantic hashing is simply a way of mapping the set intersections required for document retrieval directly onto the available hardware.

I have some basic knowledge about cpu architecture. All I need is an abstract explanation to understand how this operation is done.

P.S. The paper is about the sets, but my question is general (any kind of data).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:55:07.793

本质上，他的意思是，如果您有足够的内存，您可以在一条指令中实现输入数字到输出数字的任何映射。只需使用您的映射填充内存，并从映射中读取与输入编号相对应的地址。

# mysql - Multiple Ordering in MySql

> ID：10650510
> 
> 赞同：-1
> 
> 时间：2012-05-18T09:59:06.817
> 
> 标签：mysql, sql

I have a site where I have a section for most popular lyrics. The case is that I want to Order the most pupular lyrics with respect to its ratings. And condition is, if the rating is same for two lyrics then I order by the counter which is the number of times rated.

The fields in database are rating_value and counter. For now I just using

```
".... ORDER BY rating_value"; 
```

Suggest me something for this kind of multiple ordering.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:00:55.237

```
ORDER BY rating_value DESC, rating_count DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:01:07.487

只需在 ORDER 子句中指定更多字段：

```
... ORDER BY rating_value, counter 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T10:01:45.663

只需按优先级顺序将列添加到`ORDER BY`语句中：

```
 ".... ORDER BY rating_value, counter"; 
```

# hibernate - Hibernate sql named query with entities

> ID：10650511
> 
> 赞同：0
> 
> 时间：2012-05-18T09:59:08.503
> 
> 标签：hibernate, named-query

i need to build a sql query that returns a bean with inside an entity... i try to explain me with an example.

This is my bean that i want to get from the query:

```
public class EventiPerGiorno { 

    private Eventi evento; // THIS IS AN ENTITY
    private Date primoSpettacolo; //SCALAR
    private int spettacoli; //SCALAR
...
} 
```

and this is the xml query mapping:

```
<sql-query name="eventiPerGiorno">
    <return alias="evento" class="entity.Eventi"/>
    <return-scalar column="spettacoli" type="integer"/>
    <return-scalar column="primoSpettacolo" type="date"/>
    <![CDATA[
        select 
            spettacoli.evento as {evento.id},
            count(spettacoli.id) as spettacoli,
            min(spettacoli.inizio) as primoSpettacolo,
        from ...
    ]]>
</sql-query> 
```

But Hibernate says to me that it want ALL properties of Eventi in the select not only the primary key that is "evento.id". Why?

# windows-phone-7 - WPF LISTBOX collapsible

> ID：10650512
> 
> 赞同：1
> 
> 时间：2012-05-18T09:59:10.817
> 
> 标签：windows-phone-7, c#-4.0, wpf-controls

THere are few items in My Listbox , items are completed, Active and pending ( depends on my internal logic) , i want to hide completed and Pending items , on press of listbox/button the pending or Completed items should collapse displaying the items ( like row wise collapse), would appreciate your help guys.

# c# - 在 C# 中实现传递身份验证

> ID：10650514
> 
> 赞同：4
> 
> 时间：2012-05-18T09:59:15.340
> 
> 标签：c#, .net, windows, authentication, pass-through

我正在开发一个基于 TcpClient/TcpListener 的客户端-服务器应用程序。现在我已经到了需要对用户进行身份验证的地步。我可以在服务器端使用 PrincipalContext-Class 并从客户端请求用户名/密码/域，但我不想通过网络发送凭据。此外，我不想**再次**向用户询问他们的凭据。所以，我知道支持直通身份验证的 Citrix Receiver。它使用当前登录的用户并且不请求任何凭据并针对服务器对用户进行身份验证。它只是工作。

我怎样才能在我的应用程序中做到这一点？我想过某种可以发送到服务器的令牌，但我找不到任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:56:33.787

将 NetworkStream 包装在[NegotiateStream](http://msdn.microsoft.com/en-us/library/system.net.security.negotiatestream.aspx)`NegotiateAs...`中，并在客户端和服务器上调用适当的方法。

客户端可以指定允许的模拟级别，服务器可以指定它需要的级别（最低限度`Identification`是为了确定客户端身份，但是如果您需要作为客户端访问本地或网络资源，您还可以指定`Impersonation`或，使用正确的网络配置，`Delegation`）。

一旦通过身份验证，服务器就可以确定客户端的身份和/或使用 NegotiateStream 的`RemoteIdentity`属性进行模拟。

As I mentioned in my comment, I don't know how Citrix affects this setup (never having used it), but if it's basically completely transparent to the application and everything uses standard Windows credentials, then this should work.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T10:31:59.287

.net 框架确实具有 diffie-hellmann 密钥交换的功能：

[http://de.wikipedia.org/wiki/Diffie-Hellman-Schl%C3%BCsselaustausch](http://de.wikipedia.org/wiki/Diffie-Hellman-Schl%C3%BCsselaustausch)

[http://www.codeproject.com/Articles/24632/Shared-Key-Generation-using-Diffie-Hellman](http://www.codeproject.com/Articles/24632/Shared-Key-Generation-using-Diffie-Hellman)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T10:23:13.677

如果您正在编写应用程序的客户端和服务器部分，那么您可以加密用户的凭据以通过网络传递并在另一端解密。

假设在客户端计算机上，恶意用户可以从您的应用程序中提取加密密钥（使用[字符串](http://technet.microsoft.com/en-us/sysinternals/bb897439.aspx)或类似的），那么对称加密不适合。因此非对称（公私）加密似乎是合适的。生成一对密钥，服务器的密钥应该保持私有（并且仅在服务器上），并且客户端的密钥可以包含在客户端计算机上的应用程序中。那么密钥是否从应用程序中提取并不重要，因为凭证只能使用服务器上的秘密和安全私钥解密。[本课程](http://msdn.microsoft.com/en-us/library/system.security.cryptography.dsacryptoserviceprovider%28v=vs.90%29.aspx)为您完成了大部分基础工作。

# iphone - 分发临时应用程序

> ID：10650518
> 
> 赞同：0
> 
> 时间：2012-05-18T09:59:33.647
> 
> 标签：iphone, xcode, distribution, xcode4.3, ad-hoc-distribution

我想将我的应用程序分发到可以由 iTunes 添加到设备的 .ipa 文件。我去 developer.apple.com 然后：

*   生成分发供应配置文件，下载，安装并将其用作“代码签名”。
*   然后安装分发证书
*   转到我的 Xcode 并选择 product->archive
*   然后从 Organizer->Archives 选择我的最新副本并选择分发，选择 Save For Enterprise 或 Ad-Hoc 并通过我的分发配置文件签名。
*   接下来我将我的 mobileprovision 文件添加到 iTunes，将 ipa 添加到 iTunes 并尝试同步。
*   我收到错误**0xE8003FFE**

我正在使用 Xcode **4.3.2**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T17:03:09.790

尝试按照以下说明操作：

1.  前往设置
2.  转到一般
3.  转到限制（可能需要 4 位密码）
4.  打开“安装应用程序”
5.  重新同步您的设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T11:05:21.557

这不是很好，但它是一个解决方案。我将我的 iphone 恢复到 4.2.1 iOS（从 4.2.1 !!!奇怪......）并且效果很好。所以我唯一的结论是这**不是**Xcode 问题，而是设备/操作系统问题。

# c++ - C++中的指针和内存分配

> ID：10650519
> 
> 赞同：1
> 
> 时间：2012-05-18T09:59:36.477
> 
> 标签：c++, pointers, memory-management

我最近开始使用 C++，但我并不完全确定我掌握了指针的概念以及它们与数组的连接。我有两个类，术语和多项式。我有一个主循环，允许用户输入 2 个数字。然后将这些数字添加到“Term”对象中，然后将该对象添加到“Polynom”对象中。每次执行循环时，都会创建一个新的“Term”对象。

```
 //These lines are executed until the user is done entering numbers             
 potens = new Term;
 potens->sattPotens(kinput, ninput);//Add values to "Term object"
 poly.addTerm(potens);//Add "Term" object to "Polynom" object 
```

“多项式”对象仅在程序中创建一次。在“Polynom”类中，我使用“Term”指针来存储添加到“Polynom”对象的所有“Term”对象。“Polynom”类中的“Term”指针在“Polynom”构造函数中初始化一次。

```
 void Polynom::addTerm(Term *t){
      *(term+antal_termer) = *t;//This is were the program crashes
      antal_termer++;
} 
```

我知道我可以使用向量而不是指针来存储“术语”对象，但我正在尝试了解指针的工作原理。我也不确定何时应该删除在主循环中创建的对象。因为每次执行循环时，我都会创建一个新的“Term”对象，但我从不删除它们。

编辑：我曾经以这种方式在“Polynom”类中分配“Term”对象：term = new Term[]; 然后我将其更改为 term = new Term[10]; 但是当我执行 term[antal_termer] = *t; 时我仍然崩溃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:01:17.913

```
 *(term+antal_termer) = *t;//This is were the program crashes
 antal_termer++; 
```

这会崩溃，因为您可能没有分配足够的内存。您最好的选择是使用 a`std::vector`而不是动态数组。

是分配期限`term = new Term;`还是`term = new Term[sz];`？

如果是第一个，则只能存储一个对象，并 `term+antal_termer`超出此范围。如果是第二个，如果`antal_termer >= sz`.

该`std::vector`选项为您提供自动管理：

```
 std::vector<Term> terms;
 Term potens; //why use new?
 terms.push_back(potens); 
```

请注意，我使用的是对象，而不是指针。对于指针，它会是

```
 std::vector<Term*> terms;
 Term* potens = new Term;
 terms.push_back(potens); 
```

但请注意，完成后必须删除内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:19:48.187

[从评论中粘贴结果。]

`antal_termer`未在构造函数中初始化，导致此处的内存访问无效：

```
*(term+antal_termer) = *t; 
```

由于代码正在复制`t`，通过赋值，您可以`delete potens;`在调用`addTerm()`. 代码必须防止超出`term`数组的末尾`addTerm()`，否则会发生另一个无效的内存访问：

```
void Polynom::addTerm(Term *t){
      if (antal_termer < 10)  // Use constant instead of literal 10
      {
          *(term+antal_termer) = *t;
          antal_termer++;
      }
} 
```

# facebook - Which One is More Accurate Between FQL and Facebook Graph API?

> ID：10650526
> 
> 赞同：0
> 
> 时间：2012-05-18T09:59:50.433
> 
> 标签：facebook, facebook-graph-api, facebook-fql

What is the most accurate Facebook API to get the number of likes of a photo?

I used FQL and Facebook Graph API but the total number of IDs who liked the photo aren't the same with the one indicated on the Facebook page?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:01:53.153

FQL 比 Facebook Graph API 更准确。

# c# - 访问路径 **** 被拒绝

> ID：10650528
> 
> 赞同：8
> 
> 时间：2012-05-18T09:59:52.247
> 
> 标签：c#

我知道这已经有很多东西了，并且已经尝试了一些东西，但没有解决它的运气。

我有一个 C# 程序，它构建了一个 XML 文档，我试图将它保存到 MyDocuments 中的文件夹中。`XMLDoc.Save`调用该函数时出现以下异常。

> 拒绝访问路径“C:\Users\Ash\Documents\ConfigOutput”

我有以管理员身份运行的视觉工作室。关于如何解决它的任何想法？

我也尝试保存到桌面和 C:\ 文件夹中。

我正在使用 Windows 7。

运行构建的可执行文件似乎也不起作用。

对不起，伙计们，我似乎很愚蠢。我确实没有在输出路径中添加文件名。我不会删除这个问题，以防其他人被这个问题搞定！感谢所有帮助/评论。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-18T10:37:21.610

有几种可能：

*   ConfigOutput 是一个文件夹
*   ConfigOutput 是一个正在使用的文件（打开）
*   您没有以用户“Ash”身份登录

您通常不必以管理员身份运行来写入您自己的 Documents 文件夹。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T10:42:46.397

您需要检查并获得对该目录/文件的许可您的写作..用于该用途`Security namesapce`

```
var permissionSet = new PermissionSet(PermissionState.None);    
var writePermission = new FileIOPermission(FileIOPermissionAccess.Write, pathToFolder);
permissionSet.AddPermission(writePermission);

if (permissionSet.IsSubsetOf(AppDomain.CurrentDomain.PermissionSet))
{
    // do your stuff
}
else
{
    // alternative stuff
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-18T10:53:02.153

看起来您没有指定文件名，因此无法创建与现有目录同名的文件 - 因此请尝试将路径更改为：

C:\Users\Ash\Documents\ConfigOutput\Out.xml

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T10:22:28.090

尝试以管理员身份运行您的应用程序。

如果您想调试您的应用程序，也请以管理员身份启动您的 Visual Studio。

要强制应用程序以管理员身份启动，请查看此线程： [如何强制我的 .NET 应用程序以管理员身份运行？](https://stackoverflow.com/questions/2818179/how-to-force-c-sharp-app-to-run-as-administrator-on-windows-7)

PS 检查您的文件是否尚未被另一个 FileStream 等打开。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-18T10:34:30.720

我不知道这是否会有所不同，但您可能希望以相对方式而不是绝对方式指定文件夹：`Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments)`将为您提供当前用户文档的路径。检查它是否与您提供的不同。

如果是这样，您可能需要在其他用户或管理员下运行该应用程序，正如其他人所指出的那样。显然，不允许一个用户将文件保存到另一个用户的文档文件夹中。

对我来说，当我从 Visual Studio 调试我的应用程序时，文档文件夹与我当前登录并在其下运行 Visual Studio 的用户相同。

您可以先尝试`<requestedExecutionLevel level="asInvoker" uiAccess="true|false"/>`，然后逐步移至`highestAvailable`和`requireAdministrator`。

或者，请求权限，捕获异常并将其打印出来：

```
try {
        FileIOPermission fileIOPermission = new FileIOPermission(FileIOPermissionAccess.AllAccess, myDocFolderFile);
        fileIOPermission.Demand();
    } catch (SecurityException se) {
        Debug.WriteLine(se.ToString());
    } 
```

# perl - 在 Perl 中，如何从 URI 中提取主机名的一部分？

> ID：10650532
> 
> 赞同：0
> 
> 时间：2012-05-18T10:00:13.170
> 
> 标签：perl, uri

我想找到一个以 . 开头`http://`和结尾的字符串`.com`。但是`http://`and`.com`它不需要打印。

```
$str = "http://example.com";
$str =~ /http:\/\/example.com/;$result = "$&\n";
print $result; 
```

基本上与使用 python 完成的相同。

```
#!/usr/bin/python
import re
str = 'http://example.com'
search = re.search(r'http://(\w+).com', str)
if search:
  print search.group(1) 
```

它只会显示“示例”。如何在 Perl 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T10:09:34.687

具有专用解析器的强大解决方案：

```
use feature 'say';
use strict; use warnings;

use URI;
use URI::Find;

URI::Find->new(sub {
    my $uri = shift;
    say $uri->host =~ m{(\w+)[.]com\z};
})->find(\ (my $x = q{http://example.com/}) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T12:48:39.700

试试这个简单的代码：

```
$str = 'http://example.com'; 
print "$_\n" for $str =~ m{\A http:// (\w+) [.] com \z}x; 
```

为确保您的结果是完整的，请将模式锚定在开头`\A`, 和结尾, `\z`。`/`使用与避免倾斜牙签综合症不同的模式分隔符，并使用该`x`选项使您的模式更具可读性。

您需要使用`(...)`来捕获要提取的部分。

您可以在[ideone.com上测试此代码](http://ideone.com/65Czq)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T15:28:27.017

下面不是那么糟糕的解决方案：

```
$str = 'http://example.com';

if (($url) = $str =~ /http:\/\/(\w+)\.com/) {
    print $url, "\n";
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-18T10:06:22.110

在您的 Python 代码段中，您使用括号捕获所需的文本，但在您的 Perl 代码段中，您将它们排除在外。此外，您要捕获的部分是硬编码的，而不是表示为`\w+`. 在那里挖。

# java - Hibernate UnUniqueify 表中的列

> ID：10650536
> 
> 赞同：6
> 
> 时间：2012-05-18T10:00:34.703
> 
> 标签：java, database, hibernate, postgresql, hql

* * *

## Hibernate UnUniqueify 表中的列（已解决）

* * *

我希望一个字段本身不唯一，但与另一个字段结合起来是唯一的，我得到这个表有两列（复合主键）；id （主键）和 object_proxy_id （主键），这正是我需要的，但休眠将 object_proxy_id 设置为自身唯一，因此表中的值不能重复，我需要此列来接受重复值。因为每个用户都有自己的对象代理，而这些代理不一定是唯一的。

**这就是我想要实现的目标：**

```
|-------------------------------|
| tbl_object_proxy              |
| ------------------------------|
| Id (pk)| object_proxy_id (pk) |
|-------------------------------|
| 1      | 150 --               |
| 1      | 149  |= must be able to be DUPLICATE which is not the case right now.
| 2      | 150 --               |
| 2      | 151                  |
|-------------------------------| 
```

**当前代码：**

```
@Entity
@Table(name = "tbl_user_settings", uniqueConstraints = {@UniqueConstraint(columnNames={"user_id"})})
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)

public class Settings implements Serializable
{
@Id
@SequenceGenerator(name="someSequence", sequenceName="SEQ_SOMENAME", allocationSize =1)
@GeneratedValue(strategy=GenerationType.SEQUENCE, generator="someSequence")
@Column(name="id")
private int setting_id;

@OneToOne
private User user;

@ManyToOne
private SomeObject someobject;

@ElementCollection
@CollectionTable(name="tbl_collection_name", joinColumns=
@JoinColumn(name="id"), uniqueConstraints = {@UniqueConstraint(columnNames={"id", "object_proxy_id"})})
@Column(name="SomeObject")
private Set<SomeObject> objectProxy;

/*...constructors and methods...*/
} 
```

**结果是：**

```
-- Table schema
|-------------------|                    
| tbl_user_settings |                        
|-------------------|                        
| id                |PK <<Unique>>                      
| user_id           |FK reference tbl_user <<Unique>>                        
| object_id         |FK reference tbl_object  
|-------------------|

|------------------|
| tbl_object_proxy |
|------------------|
| id               |PK reference tbl_user_settings 
| object_proxy_id  |PK reference tbl_object <<Unique>> BUT I DON'T WANT THIS TO BE UNIQUE ON ITSELF !!!!
|------------------| 
```

**编辑：** tbl_object_proxy 中的两个主键是复合主键
我尝试过至强的解决方案，但它没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T09:24:41.467

**简短的回答：**`@ElementCollection`用这样的`@ManyToMany`关系替换`@JoinTable`：

```
@ManyToMany
@JoinTable(
name="tbl_settings_objecteproxy_v2",
joinColumns = @JoinColumn(name = "id"),
inverseJoinColumns = @JoinColumn( name = "objectproxy_id"))
private Set<SomeObject> objectproxy; 
```

[请参阅Hibernate 注释文档](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/)中的“2.2.5.3.2.1\. 定义”

这会产生相同的边表，但没有唯一约束。所以现在这是可能的：

```
|-------------------------------|
| tbl_object_proxy              |
| ------------------------------|
| Id (pk)| object_proxy_id (pk) |
|-------------------------------|
| 1      | 150 --               |
| 1      | 149  |= It works! The unique constraint is gone! 
| 2      | 150 --               |
| 2      | 151                  |
|-------------------------------| 
```

* * *

* * *

**详细答案和原因描述：** 不知何故，`@ElementCollection`创建了一个具有引用键的一对多关系的集合表（集合 | 反向连接），它向引用另一侧表的键添加了***唯一约束***，以反映我没有的一对多关系不想。所以我放弃了并用带有注释`@ElementCollection`的关系替换它。我也尝试在中声明关系，但它不断将唯一约束添加到引用的键。`@ManyToMany``@JoinTable``@ManyToMany``@ElementCollection`

我的设置类现在看起来像这样：

```
@Entity
@Table(name = "tbl_user_settings", uniqueConstraints = {@UniqueConstraint(columnNames={"user_id"})})
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)

public class Settings
{
@Id
@SequenceGenerator(name="someSequence", sequenceName="SEQ_SOMENAME", allocationSize =1)
@GeneratedValue(strategy=GenerationType.SEQUENCE, generator="someSequence")
@Column(name="id")
private int setting_id;

@OneToOne
private User user;

@ManyToOne
private SomeObject someobject;

@ManyToMany
@JoinTable(
name="tbl_settings_objecteproxy_v2",
joinColumns = @JoinColumn(name = "id"),
inverseJoinColumns = @JoinColumn( name = "objectproxy_id"))
private Set<SomeObject> objectProxy;

/*...the rest...*/
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T16:01:40.893

我对文章和类别有类似的问题：

```
public class ArticleCategoriesEntity {
    @EmbeddedId
    public ArticleCategoriesIdPk getArticleCategoriesIdPk() {
        return articleCategoriesIdPk;
    }

public void setArticleCategoriesIdPk(ArticleCategoriesIdPk articleCategoriesIdPk) {
    this.articleCategoriesIdPk = articleCategoriesIdPk;
}
...

@Embeddable
public class ArticleCategoriesIdPk implements Serializable {

public ArticleCategoriesIdPk() {
}

public ArticleCategoriesIdPk(Integer articleCategoryIdPk, Integer articleCategoryVersionFk) {
    this.articleCategoryIdPk = articleCategoryIdPk;
    this.articleCategoryVersionFk = articleCategoryVersionFk;
}

private Integer articleCategoryIdPk;

@Column(name = "article_category_id_pk")
public Integer getArticleCategoryIdPk() {
    return articleCategoryIdPk;
}

public void setArticleCategoryIdPk(Integer articleCategoryIdPk) {
    this.articleCategoryIdPk = articleCategoryIdPk;
}

private Integer articleCategoryVersionFk;

@Column(name = "article_cat_version_fk")
public Integer getArticleCategoryVersionFk() {
    return articleCategoryVersionFk;
}

public void setArticleCategoryVersionFk(Integer articleCategoryVersionFk) {
    this.articleCategoryVersionFk = articleCategoryVersionFk;
} 
```

并且你需要设置嵌入式PK类的两列的唯一性

# python - Python Flask + nginx fcgi - 输出大响应？

> ID：10650537
> 
> 赞同：6
> 
> 时间：2012-05-18T10:00:36.713
> 
> 标签：python, http, web, flask

我将 Python Flask + nginx 与 FCGI 一起使用。

在某些请求中，我必须输出大量响应。通常这些响应是从套接字中获取的。目前我正在做这样的回应：

```
response = []
while True:
    recv = s.recv(1024)
    if not recv: break
    response.append(recv)
s.close()
response = ''.join(response)

return flask.make_response(response, 200, {
                                           'Content-type': 'binary/octet-stream',
                                           'Content-length': len(response),
                                           'Content-transfer-encoding': 'binary',
                                           }) 
```

问题是我实际上不需要数据。我还有一种方法可以确定要从套接字获取的确切响应长度。所以我需要一种发送 HTTP 标头的好方法，然后直接从套接字开始输出，而不是在内存中收集它然后提供给 nginx（可能通过某种流）。

我无法找到这个看似常见问题的解决方案。那将如何实现？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-18T11:58:26.050

如果`response`in`flask.make_response`是可迭代的，则将对其进行迭代以产生响应，并且每个字符串都将自己写入输出流。

这意味着您还可以返回一个生成器，该生成器将在迭代时产生输出。如果您知道内容长度，那么您可以（并且应该）将其作为标题传递。

一个简单的例子：

```
from flask import Flask
app = Flask(__name__)
import sys
import time
import flask

@app.route('/')
def generated_response_example():
    n = 20
    def response_generator():
        for i in range(n):
            print >>sys.stderr, i
            yield "%03d\n" % i
            time.sleep(.2)

    print >>sys.stderr, "returning generator..."
    gen = response_generator()

    # the call to flask.make_response is not really needed as it happens imlicitly 
    # if you return a tuple.
    return flask.make_response(gen ,"200 OK", {'Content-length': 4*n})

if __name__ == '__main__':
    app.run() 
```

如果您运行它并在浏览器中尝试，您应该会看到一个不错的初始计数...

（内容类型未设置，因为如果我这样做，我的浏览器似乎会等到整个内容在呈现页面之前被流式传输。`wget -qO - localhost:5000`没有这个问题。

# c# - WCF SOAP 服务解析多种日期格式

> ID：10650540
> 
> 赞同：0
> 
> 时间：2012-05-18T10:00:41.437
> 
> 标签：c#, .net, wcf, datetime, soap

以下是我们用来测试服务的 SOAP 请求的摘录：

```
<somens:invoking_date>21.05.2012</somens:invoking_date> 
```

所以这是我们国家的本地日期格式。我们在美国的分析告诉我们，支持另一种日期格式的请求也会非常好。这里是：

```
<somens:invoking_date>2012-05-21</somens:invoking_date> 
```

是否可以告诉 XmlSerializer 解析这两种日期格式中的任何一种？有什么想法吗，伙计们？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:44:34.300

我不知道这里有任何内置功能 - 您可以做的是将此字段类型更改为字符串，这意味着您永远不会遇到异常。然后在您的服务代码中手动进行解析（或使用各种文化“尝试解析”）

# c++ - 将十六进制字符串转换为整数的未知步骤

> ID：10650541
> 
> 赞同：-3
> 
> 时间：2012-05-18T10:00:43.630
> 
> 标签：c++, encryption, hex, int

我有一个无符号字符串（这里是十六进制： d3 ea 12 f7 f7 ）。现在这个字符串，不知何故转换成整数 37224，我想知道你必须采取的转换步骤

我所知道的，因为它是一个 int，字符串中可能有一个 char 太多了，因为 int 是 4 字节长，而这个字符串是 5 字节，第一个字节或最后一个字节很可能需要被丢弃

它可能被加密或字节被移动或类似的东西？

关于如何找出转换步骤的任何想法？

十六进制的无符号字符字符串：d3 ea 12 f7 f7

int 它转换为：37224

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T10:17:57.570

I shall elaborate a bit on my comment:

> any idea on how u could find out the steps of conversion?

You can't. Well, you can guess, or you can assign one arbitrarily, but knowing the conversion with certainty is not possible. A single output and a single input are meaningless. You might as well just assume the function is:

```
if (in == 37224) { return "d3 ea 12 f7 f7"; } 
```

There are infinitely many functions such that these two values map to each other. Looking for the 'correct' function is not possible. As I said in the comment, you can guess the function, and if you can find some kind of meaningful pattern, you can probably assume that it's correct. Even if you see an obvious pattern though, with a sample size of one, that could be a dangerous function.

Think of it this way:

```
f(2) = 4 
```

What is the inverse of the function `f`? You could guess `f^-1(x) = x/2`. But, it could also be `f^-1(x) = log2(x)` (basically either `f(x) = 2x` or `f(x) = 2^x`).

The same idea applies here. You can assume that you found the correct inverse function, but you can never know for sure.

`g(y)` is the inverse of `f(x)` if and only if for all x in the domain of f, g(f(x)) = x.

Knowing that for one value of x that g(f(x)) = x does not prove that `g(y)` is the inverse of `f(x)`. (It's basically meaningless knowledge actually [other than it's an intersection of `g` and `f`] unless you're willing to take a leap of faith that it is indeed the inverse.)

# linux - 如何显示在 netfilter 钩子中注册了多少函数？

> ID：10650542
> 
> 赞同：0
> 
> 时间：2012-05-18T10:00:43.857
> 
> 标签：linux, linux-kernel

如何显示一个 netfilter hook 上注册了多少函数？</p>

Linux 是否提供 proc 接口来显示这些信息？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T06:56:09.443

我不认为有一个标准的方法。

在代码中很容易做到，因为`nf_hooks`矩阵是导出的。
所以一个简单的`list_for_each(i, &nf_hooks[reg->pf][reg->hooknum])n++`循环会计算它们。

请注意，它不是 100% 安全的，因为它不使用保护列表的锁。但是出于实验目的，如果您在注册/注销锁时不运行它，应该没问题。

# javascript - 使用 xmpp pubsub 创建论坛

> ID：10650543
> 
> 赞同：1
> 
> 时间：2012-05-18T10:00:45.340
> 
> 标签：javascript, xmpp, publish-subscribe, openfire, ejabberd

我只是想知道我是否想要一个集合节点作为主题，并且这个集合节点有不同问题的叶节点，为每个问题都有一个专用的叶节点不是非常低效吗（集合节点-leaf1、leaf2、.. .，叶子N）？这将最终在数据库中针对不同的问题产生数千个不同的叶节点，而不仅仅是每个主题（集合节点）一个叶节点中的项目（用于问题和答案）......（集合节点-叶节点（其中 Q&A 与分配问题答案的逻辑块））

还是只是为这种情况制作了集合和叶子节点（每个问题都有很多叶子）？

Edit1：我不应该为此目的使用 XMPP 吗？

# sql - 将字符串格式的公式更改为存储过程中的真实公式

> ID：10650547
> 
> 赞同：0
> 
> 时间：2012-05-18T10:01:10.013
> 
> 标签：sql, sql-server-2008, stored-procedures

我有一个表`validationmaster`，其中有一列名为`vrformula`. 它包含一个公式，如：

> pf > 1

其中 pf 是数据源表中的列名之一。我必须检查数据源表中所有条目的 pf 是否 > 1，但我不知道如何使它工作。

我可以正确获取该公式，但 Sql Server 将该公式视为字符串，我不知道如何将整个表达式更改为公式。

例如：`select * from datasource where meterid=4716 and pf>=1`是我要执行的语句，该公式位于从`vrformula`列生成的 where 子句末尾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:11:07.807

您必须使用[Dynamic SQL](http://www.sommarskog.se/dynamic_sql.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:17:11.340

这可能很明显，然而，一个快速而肮脏的解决方案是执行一个 SELECT 来检索列值，然后执行包含条件的第二个 SELECT。

在这里，我假设您正在从用编程语言（而不是 SQL）编写的代码中执行 SQL 语句。

# maven - Maven 下载 pom 并执行目标

> ID：10650553
> 
> 赞同：0
> 
> 时间：2012-05-18T10:01:29.840
> 
> 标签：maven, maven-3

我一直在寻找，但我找不到答案。

我想要的是下载一个 pom.xml 依赖项，并针对它执行一些目标（配置文件）。

我是说：

```
pom a -> mvn clean install -Psome
donwload the pom b and execute clean package -Panother 
```

`maven-exec`使用插件这很容易。而且我已经下载`pom`了`dependency plugin`.

但我想知道是否有特定的插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:04:30.750

您可以查看[引导](http://maven.apache.org/scm/plugins/examples/bootstrapping-with-pom.html)[maven scm 插件](http://maven.apache.org/scm/plugins)支持的maven 项目。这假设您在 scm 中有 pom。

# facebook - 我可以找到当前在 facebook 地方签到的人数吗？

> ID：10650560
> 
> 赞同：3
> 
> 时间：2012-05-18T10:01:55.353
> 
> 标签：facebook, facebook-graph-api, facebook-checkins

我想构建一个桌面应用程序，用于搜索当前在 facebook 位置签到的人数，类似于foursquare 的[hereNow](https://developer.foursquare.com/docs/venues/herenow)的等价物。

我在图形 api 中搜索了很多，但我找不到可以帮助我的东西。我可以确定的唯一相对的事情是为特定地点进行的总签到。有谁知道如何以及是否可以完成我所寻找的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T12:14:11.740

看起来您可以使用[FQL](http://developers.facebook.com/docs/reference/fql/)为某个页面或地点 ID 获得多达 500 次签到。但看起来“现在在这里”功能可能由您决定，您可能只需要在过去几个小时内显示带有时间戳的签到。

# iphone - 循环和中断动画

> ID：10650562
> 
> 赞同：1
> 
> 时间：2012-05-18T10:02:13.290
> 
> 标签：iphone, objective-c, ios, animation

我希望有人能告诉我循环动画的正确方法，用另一个动画中断动画，然后恢复原始动画。我目前设置动画的方式是这样的：

```
-(void) firstAnimation
{
[UIView animateWithDuration:1.0f delay:0 options:(UIViewAnimationOptionCurveEaseInOut | UIViewAnimationOptionRepeat | UIViewAnimationOptionAutoreverse | UIViewAnimationOptionAllowUserInteraction) animations:^{
        CGPoint bottomPoint = CGPointMake(215.0, 380.0);
        imgBee.center = bottomPoint;
    } completion:^(BOOL finished) {

    }];
} 
```

和中断：

```
-(void) interruptAnimation
{

    CGPoint point1 = CGPointMake(500, 500);
    CGPoint originalCenter = CGPointMake(215.0, 410.0);
    [UIView animateWithDuration:2.0f delay:0 options:(UIViewAnimationOptionCurveEaseInOut | UIViewAnimationOptionAutoreverse) animations:^{
        imgBee.center = point1;
    } completion:^(BOOL finished) {
        imgBee.center = originalCenter;
        [self firstAnimation];

    }];   
} 
```

我很确定这不是解决此问题的最佳方法。当我中断`interruptAnimation`原始动画时突然开始并且当我调用`[self firstAnimation]`动画时也突然重新启动。

我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:35:32.067

看看这个关于暂停和恢复动画的问答，这可能会有所帮助：[QA1673](http://developer.apple.com/library/ios/ipad/#qa/qa1673/_index.html#//apple_ref/doc/uid/DTS40010053)

# jquery - 如何选择当前的 DIV 类

> ID：10650571
> 
> 赞同：0
> 
> 时间：2012-05-18T10:02:44.040
> 
> 标签：jquery, jquery-ui, class, html

我`div`通过选择他们的类来分配唯一的ID

```
$("#addTab").live('click', function() {
    index++;
    var title = 'Tab.....  ' + index;
    var url = '#fragment-' + index;

    addTab(url, title, index);
    $('li.ui-state-default:last').attr("id",index); // How I can get the current class??

}); 
```

但我想将这些 id 分配给当前选项卡。因为最后一个标签没有得到 id

JS 小提琴：http: [//jsfiddle.net/ranasaani/DsA8T/1/](http://jsfiddle.net/ranasaani/DsA8T/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:05:40.040

```
$('li.ui-state-default:last').attr('class'); 
```

每个选定的选项卡都有类`ui-selected`，`ui-state-focus`并且`ui-state-active`

所以你可以上课

```
$('li.ui-selected').attr('class'); 
```

要获取新添加的选项卡的类别，请尝试：

```
var ref = $('li.ui-state-default:last').attr("id",index); 
alert($(ref).attr('class')); 
```

**[演示](http://jsfiddle.net/thecodeparadox/VX2Q9/2/)**

# asp.net - 如何向 Ajax.ActionLink 插入内容

> ID：10650575
> 
> 赞同：4
> 
> 时间：2012-05-18T10:03:19.190
> 
> 标签：asp.net, ajax, asp.net-mvc-3, razor

在 Asp.net mvc3 razor 中，我有：

```
Ajax.ActionLink("Hello world", "Hello", "Say", new RouteValueDictionary(new { word = "Hello" }),new AjaxOptions { HttpMethod = "GET", InsertionMode = InsertionMode.Replace, UpdateTargetId = "dynamic-container" }) 
```

它产生

```
<a href="...." ...>Hello world</a> 
```

我想得到的是

```
<a href="..." ...><my><html><content/></html></my></a> 
```

如何传递 "" 以便将其插入而不是标准文本？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-18T10:18:03.320

我刚刚找到了解决方案

[http://forums.asp.net/post/4517653.aspx](http://forums.asp.net/post/4517653.aspx)

它不像我预期的那样优雅，但应该这样做。

有人有更好的主意吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T19:20:56.743

编码：

```
Ajax.ActionLink("Hello world", "Hello", "Say", new RouteValueDictionary(new { word = "Hello" }),new AjaxOptions { HttpMethod = "GET", InsertionMode = InsertionMode.Replace, UpdateTargetId = "dynamic-container" }) 
```

提供的链接会导致错误。链接如下所示：

```
.../Say/Hello?Count=1&Keys=System.Collections.Generic.Dictionary%602%2BKeyCollection%5BSystem.String%2CSystem.Object%5D&Values=System.Collections.Generic.Dictionary%602%2BValueCollection%5BSystem.String%2CSystem.Object%5D 
```

这是 BAAADDDDD.... 问题是这使用了错误的重载。代替：

```
new RouteValueDictionary(new { word = "Hello" }) 
```

应该在哪里：

```
 new { word = "Hello" } 
```

当代码形成先前答案中的链接时就像一个魅力 - 希望它对某人，任何人都有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-22T14:41:59.560

您可以使用 javascript / jQuery 在渲染后强制插入项目。这可能有点“快速而肮脏”，但它确实无需太多努力就可以完成工作。

使用 HtmlAttributes 对象为每个附加一个类`@Ajax.Action`，以便您稍后使用 JS 选择它们：

```
@Ajax.ActionLink(.....  new { @class = "AjaxLink btn btn-primary" }) 
```

然后使用 javascript / jQuery 按类查找链接，并替换每个链接的 innerHTML。下面是一个 jQuery 示例，它也可以用纯 javascript 编写。我个人喜欢 jQuery，因为它更简洁：

```
<script type="text/javascript">
//hack to insert a <span> inside the remove links so that the text can be styled                
$('.AjaxLink ).html('<i class="fa fa-minus-circle"></i><span class="ActionLinkText">Your Text here</span>');

</script> 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-17T19:59:56.077

使用辅助方法的解决方案@4rchie 是最好的解决方案。但是还有另一种方法可以使用 data-* 属性通过链接插入数据，并使用 jquery 来完成其余的工作。

例如：

```
<div class="list-group">
@foreach (var item in Model.Things)
{
   @Ajax.ActionLink(item.Name, "actionName", "controllerName", new { Id = item.Id }, new AjaxOptions { HttpMethod = "GET", InsertionMode = InsertionMode.Replace, UpdateTargetId = "areaPanel", OnComplete = "" }, new { @class = "list-group-item", data_frequency = item.frequency})

}
</div> 
```

jQuery代码：

```
jQuery(document).ready(function () {
$("[data-frequency]").each(function () {
        var linkText = $(this).html();
        var attr = $(this).attr("data-frequency");
        $(this).html("<span class ='badge'>" + attr + "</span>" + linkText);
})
} 
```

结果就像[http://getbootstrap.com/components/#list-group-badges](http://getbootstrap.com/components/#list-group-badges)

# javascript - 如何通过 var 动态设置一个国家的颜色？

> ID：10650576
> 
> 赞同：1
> 
> 时间：2012-05-18T10:03:24.410
> 
> 标签：javascript, jquery, jqvmap

有人用过[http://github.com/manifestinteractive/jqvmap/](http://github.com/manifestinteractive/jqvmap/)吗？

这些工作：

```
$('#map').vectorMap('set', 'colors', { us: '#8EE5EE' });
$('#map').vectorMap('set', 'colors', { 'us': '#8EE5EE' }); 
```

但是，这不是：

```
country_name = 'us';
$('#map').vectorMap('set', 'colors', { country_name: '#8EE5EE' }); 
```

有谁知道为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-18T20:17:49.210

因为这不是对象文字的工作方式。键值对中的键部分被解释为文字字符串。您需要使用括号语法来获得动态键名。就是那个 or `eval`，你不想使用`eval`.

```
var country_colors = {};
var country_name = 'us';

country_colors[country_name] = '#8EE5EE';

$('#map').vectorMap('set', 'colors', country_colors); 
```

# windows - 无法使用 mongodb 将 .js 文件导入 Rockmongo

> ID：10650577
> 
> 赞同：1
> 
> 时间：2012-05-18T10:03:24.883
> 
> 标签：windows, mongodb

我正在使用 windows pc，我的朋友将 mongodb 集合从 mac 导出到 .js(7 MB) 文件中。当我尝试导入该文件时，我得到连接已重置“与服务器的连接在页面加载时已重置。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T15:38:10.140

听起来你的 apache + php 是罪魁祸首。可能超时太短或上传限制太小。

无论哪种方式，我都会直接使用 mongoimport 。完整文档位于 [http://www.mongodb.org/display/DOCS/Import+Export+Tools](http://www.mongodb.org/display/DOCS/Import+Export+Tools)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-25T19:51:59.103

我在使用 Rockmongo 上传 3.7 M 文件时遇到问题。原来我的 php.ini 有以下（默认）设置：

```
upload_max_filesize = 2M 
```

将其更改为

```
upload_max_filesize = 10M 
```

并重新启动 apache/php 修复它。

# c# - C# asp.net mvc 用户名正则表达式

> ID：10650579
> 
> 赞同：0
> 
> 时间：2012-05-18T10:03:41.953
> 
> 标签：c#, regex, asp.net-mvc

我正在寻找用户名的正则表达式

我想允许：

*   只有 ASCII
*   只有 - _ 符号
*   最少 5 个字符，最多 15 个字符

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T10:08:59.990

干得好

```
^[-0-9A-Za-z_]{5,15}$ 
```

请注意 - 放在字符类的第一位，否则它将获得指示范围的含义，如 0-9 = 0 到 9

# sql-server - SQL Server 错误创建存储过程

> ID：10650580
> 
> 赞同：1
> 
> 时间：2012-05-18T10:03:59.397
> 
> 标签：sql-server, sql-server-2008

我正在尝试创建一个简单的存储过程，但遇到一个奇怪的错误。我是服务器上的系统管理员。

当我运行以下代码时，出现此错误

> 消息 15151，级别 16，状态 1，行 1
> 找不到对象“Paul”，因为它不存在或您没有权限。该语句已终止。

我可以在 dbo 模式中创建过程，然后将其传输到模式中。我已经在 2008 年（R1 和 R2）的几个不同安装上尝试过这个，它有时可以工作，但大多数情况下没有。

有没有人有什么建议？谢谢保罗。

```
if not exists (Select * from sys.schemas Where name = 'Test')
    Exec ('Create Schema Test Authorization dbo')

IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[Test].[Paul]') AND type in (N'P', N'PC'))
    DROP PROCEDURE [Test].[Paul]
GO

Create Procedure Test.Paul
As
    Select @@ServerName
GO

Create Procedure dbo.[Paul]
As
    Select @@ServerName
GO

Alter Schema Test Transfer dbo.Paul

exec Test.Paul1

IF  EXISTS (SELECT * FROM sys.schemas WHERE name = N'Test')
    DROP SCHEMA [Test]
GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:09:03.633

SPE109，检查是否可以更改现有的Test.Paul sp。请验证登录用户的更改/删除权限。

使用以下语句授予权限

```
GRANT EXEC ON some_sp TO uname-- Grant permission on a single procedure.
GRANT EXEC ON SCHEMA::dbo TO uname -- Grant perpmission on all procedures in
                                      the dbo schema

GRANT CREATE TABLE TO uname

GRANT ALTER ON SCHEMA::dbo TO uname 
```

现在尝试删除 SP

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:40:17.317

很抱歉浪费你们的时间，似乎有人放置了一个不能正确处理 Schema 的数据库级触发器。所以出错的是触发器而不是创建过程。

感谢您的帮助和建议。保罗。

# android - 从小部件启动活动，然后返回小部件

> ID：10650582
> 
> 赞同：0
> 
> 时间：2012-05-18T10:04:14.013
> 
> 标签：android, android-widget, android-activity

我有一个桌面小部件，里面有一个设置按钮——点击它时，我启动一个活动，我可以在其中更改小部件设置。一个活动非常简单，它只有几个微调器、复选框等和 2 个按钮 - 确定和取消。

对我来说最大的问题是，我知道如何从小部件启动活动，但不知道如何从活动“返回”小部件 - 唯一可能的方法是按下手机上的后退按钮。但正如你所看到的，我真的需要 2 个按钮 - 确定和取消，因为它对用户来说看起来更自然。按下 OK/Cancel 按钮后，我应该使用什么方法将活动变为后台并将小部件变为前台？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:17:35.050

试试这个

```
 in onclicklistener of ok button call finish() 
```

# html - PHP 代码和 html 不在网页中呈现

> ID：10650587
> 
> 赞同：2
> 
> 时间：2012-05-18T10:04:23.723
> 
> 标签：html, web

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T10:06:08.543

我猜这是 Apache（或您使用的任何网络服务器）配置问题。看起来 php 文件正在由 PHP 以外的东西处理。**检查您的 MIME 类型处理程序以获取httpd.conf**中的 .php 文件。

# android - 如何在android中获取传入号码的位置

> ID：10650593
> 
> 赞同：1
> 
> 时间：2012-05-18T10:04:56.150
> 
> 标签：android

我正在尝试查找来电电话号码的信息，例如运营商，号码位置，Pincode。请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:25:43.807

抱歉，它在 android 中是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:32:41.603

```
<receiver android:name=".CustomBroadcastReceiver">
        <intent-filter>
                <action android:name="android.intent.action.PHONE_STATE" />     
        </intent-filter>
</receiver>

</application>
<uses-sdk android:minSdkVersion="5" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
public class CustomPhoneStateListener extends PhoneStateListener {

private static final String TAG = "CustomPhoneStateListener";

public void onCallStateChange(int state, String incomingNumber){

        Log.v(TAG, "WE ARE INSIDE!!!!!!!!!!!");
        Log.v(TAG, incomingNumber);

        switch(state){
                case TelephonyManager.CALL_STATE_RINGING:
                        Log.d(TAG, "RINGING");
                        break;
        }       
}
public class CustomBroadcastReceiver extends BroadcastReceiver {

private static final String TAG = "CustomBroadcastReceiver";

@Override
public void onReceive(Context context, Intent intent) {
        Log.v(TAG, "WE ARE INSIDE!!!!!!!!!!!");
    TelephonyManager telephony = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
        CustomPhoneStateListener customPhoneListener = new CustomPhoneStateListener();

    telephony.listen(customPhoneListener, PhoneStateListener.LISTEN_CALL_STATE);

    Bundle bundle = intent.getExtras();
    String phoneNr= bundle.getString("incoming_number");
        Log.v(TAG, "phoneNr: "+phoneNr);

} 
```

这可能是你想要的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T10:43:35.110

```
TelephonyManager telephonyManager =((TelephonyManager) Context.getSystemService(Context.TELEPHONY_SERVICE));
String operatorName = telephonyManager.getNetworkOperatorName();
similarly the sim operator can be retrieved by using:

String operatorName = telephonyManager.getSimOperatorName(); 
```

# java - 在java中获取字符串中每个字符的相对频率

> ID：10650594
> 
> 赞同：0
> 
> 时间：2012-05-18T10:05:07.250
> 
> 标签：java, string, frequency

我想获得字符串中每个唯一字符的平均值。我在这里有一个例子，因为它会更容易说明。

细绳：

```
The big brown fox 
```

每个字符的平均值，包括空格：

```
T = 1/17 = .058
h = 1/17 = .058
e = 1/17 = .058
' '= 3/17 = .176
b = 2/17 = .117
i = 1/17 = .058
g = 1/17 = .058
r = 1/17 = .058
o = 2/17 = .117
w = 1/17 = .058
n = 1/17 = .058
f = 1/17 = .058
x = 1/17 = .058 
```

到目前为止，我所有的尝试都失败了，认为我的大脑目前无法正常工作。我该如何编码？任何帮助或输入将不胜感激。

我有这个代码作为解决方案。当我将代码复制粘贴到堆栈中时，它才出现在我的脑海中。我希望这不是重新发布，因为我在几分钟前刚刚回答了同样的问题，但它没有出现。

```
 Map<String, Integer> storeCharCount = new HashMap<String, Integer>();

        String a = "The big brown fox";

        for (int x=0; x<a.length(); x++){
            char getChar = a.charAt(x);
            String convGetChar = Character.toString(getChar);

            Integer countChar = storeCharCount.get(convGetChar);
            storeCharCount.put(convGetChar, (countChar==null?countChar=1:countChar+1));

        }
        System.out.println("Map: "+ storeCharCount);
        double RelFrequency = 0;
        for (Map.Entry<String, Integer> getValue: storeCharCount.entrySet()){

            RelFrequency = (double)(getValue.getValue())/(a.length());
            System.out.println("Character "+getValue.getKey() +"  Relative Frequency: "+RelFrequency);

        } 
```

这是输出

```
Map: {f=1, g=1,  =3, e=1, b=2, n=1, o=2, h=1, i=1, w=1, T=1, r=1, x=1}
Character f  Relative Frequency: 0.058823529411764705
Character g  Relative Frequency: 0.058823529411764705
Character    Relative Frequency: 0.17647058823529413
Character e  Relative Frequency: 0.058823529411764705
Character b  Relative Frequency: 0.11764705882352941
Character n  Relative Frequency: 0.058823529411764705
Character o  Relative Frequency: 0.11764705882352941
Character h  Relative Frequency: 0.058823529411764705
Character i  Relative Frequency: 0.058823529411764705
Character w  Relative Frequency: 0.058823529411764705
Character T  Relative Frequency: 0.058823529411764705
Character r  Relative Frequency: 0.058823529411764705
Character x  Relative Frequency: 0.058823529411764705 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:31:33.280

这是我的建议。首先迭代字符串中的每个字符，如果找到则更新频率，否则添加 1。然后再次迭代以打印结果：

```
 String s = "The big brown fox";
    Map<Character, Float> m = new TreeMap<Character, Float>();
    for (char c : s.toCharArray()) {
        if (m.containsKey(c))
            m.put(c, m.get(c) + 1);
        else
            m.put(c, 1f);
    }

    for (char c : s.toCharArray()) {
        float freq = m.get(c) / s.length();
        System.out.println(c + " " + freq);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:08:52.440

我认为这不是最好的方法，但是您可以计算每个字母 [az][AZ] 并删除每个“”，然后您计算 = 字母数/所有字母。

我希望它有帮助。

# c# - 如何知道在c#的打开对话框中选择了哪个文件

> ID：10650595
> 
> 赞同：0
> 
> 时间：2012-05-18T10:05:11.960
> 
> 标签：c#, wpf

我必须打开一个文件对话框。我必须选择一个文件，XML 或 MAP 文件。如果选择的文件是 MAP 文件，那么我必须执行步骤 A，或者如果选择的文件是 XML，那么我必须执行步骤 B。我的问题是如何知道从对话框应用程序中选择了哪个文件？

```
OpenFileDialog fileDialog1 = new OpenFileDialog();
fileDialog1.Filter = "XML Files|*.xml|MAP Files|*.map";
fileDialog1.ShowDialog(); 
```

如何知道从上面的过滤器中选择了哪个文件？

![打开文件对话框](../Images/ee3c2ae76461fbd5262bacb448f2c279.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T10:10:04.703

您可以使用：

```
 string fileName = OpenFileDialog.Filename;

    if(fileName.EndsWith(".xml"))
    {
    //
    }
    else if(fileName.EndsWith(".map"))
    {
     //
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T10:07:09.303

我认为你不能在它打开时这样做。

当用户按下 OK 时`OpenFileDialog.Filename`，然后传入`Path.GetExtension`方法或`OpenFileDialog.Filename.Endswith(".xml")`.

检查扩展名是否为 XML，然后执行`x`步骤，否则执行`y`步骤。

**编辑**

请参阅您需要的功能，打开文件对话框中必须有一个事件。

有2`OpenFileDialog`类

1.  `System.Windows.Forms`
2.  `Microsoft.Win32`

两者都只有一个`OpenFileDialog.FileOK`您可以查找的事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T10:10:53.417

```
 openFileDialog1.FileName = "";
        if (openFileDialog1.ShowDialog() == System.Windows.Forms.DialogResult.OK)
        {
            string filename = openFileDialog1.FileName;

            if (File.Exists(filename))
            {
                //do something here
            }
        } 
```

*OpenFileDialog*的*FileName*属性是选择的文件名。

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T10:27:21.300

您甚至可以在带有堆叠标签的开关中使用类似的扩展名，并对不受支持的文件类型使用默认大小写：

```
switch (extension)
{
    case "xml":
    case "xaml":
        Debug.WriteLine("It's an XML!");
        break;
    case "map":
        Debug.WriteLine("It's a map!");
        break;
    default:
        MessageBox.Show("Please select an XML or MAP file");
        // Show the dialog again
        break;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-12T11:52:46.943

好吧，如果幸运的是所有过滤器都有不同的扩展名，上述答案将起作用。但是如果我们谈论的是具有相同扩展名的不同文件版本，那么我们可以通过以下代码获取选定的过滤器：

```
SaveFileDialog dlg = new SaveFileDialog();
        dlg.Filter = "Excel 97|*.xls|Excel 95|*.xls";
        if (dlg.ShowDialog() == System.Windows.Forms.DialogResult.OK)
        {
            //Filer index is 1 based.
            switch (dlg.FilterIndex)
            {
                case 1:
                    //Filter name: Excel 97
                    break;
                case 2:
                    //Filter name: Excel 95
                    break;
            }
        } 
```*

# java - 根据一组恒定的搜索词解析大量文本

> ID：10650599
> 
> 赞同：5
> 
> 时间：2012-05-18T10:05:38.957
> 
> 标签：java, algorithm

我有一组**搜索词**，例如 [ *+dog -“jack russels”+“fox terrier”* ]、[ *+cat +persian -tabby* ]。这些可能很长，每个术语可能包含 30 个子术语。

我现在有一些在线新闻**文章**摘录，例如 [ *“我的狐狸梗是世界上最可爱的狗……”* ] 和 [ *“有人看到我丢失的波斯猫了吗？他失踪了……”* ]。它们不太长，每个最多 500 个字符。

在传统的搜索引擎中，人们期望大量的文章被预处理成索引，从而在搜索给定的“搜索词”时允许加速，使用集合理论/布尔逻辑将文章减少到仅与短语匹配的文章。但是，在这种情况下，我的搜索词的顺序是 ~10^5，我希望能够一次处理一篇文章，以查看该文章将匹配的所有搜索词集（即所有**+**项都在文本中，没有**-**项）。

我有一个可能的解决方案，使用两张地图（一张用于正面子短语，一张用于负面子短语），但我认为它不会非常有效。

一等奖将是解决这个问题的图书馆，二等奖是朝着解决这个问题的正确方向推动。

亲切的问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:26:55.097

假设匹配需要所有正子项：

将搜索词中的所有子词放入哈希表中。子项是键，值是指向完整搜索项数据结构的指针（应包括唯一的 id 和子项到布尔值的映射）。

此外，在处理新闻项目时，创建一个“候选人”地图，由术语 id 索引。每个候选结构都有一个指向术语定义的指针，一个包含看到的子术语的集合和一个“拒绝”标志。

遍历新闻文章的文字。

对于每个命中，查找候选条目。如果不存在，请创建并添加一个空的。

如果设置了候选拒绝标志，您就完成了。

否则，从术语数据结构中查找子术语。如果为负，则设置拒绝标志。如果是肯定的，则将该子项添加到所见子项的集合中。

最后，迭代候选者。所有未被拒绝且所见集合的大小等于该术语的正子术语数的候选者都是您的命中。

实施：[https ://docs.google.com/document/d/1boieLJboLTy7X2NH1Grybik4ERTpDtFVggjZeEDQH74/edit](https://docs.google.com/document/d/1boieLJboLTy7X2NH1Grybik4ERTpDtFVggjZeEDQH74/edit)

运行时间为 O(n * m)，其中 n 是文章中的字数，m 是共享相同子词的最大词数（预计相对较小）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:50:29.830

首先，我认为制作文档的[后缀树](http://en.wikipedia.org/wiki/Suffix_tree)会使搜索速度更快，因为您需要构建一次，但您可以根据查询的长度多次使用它。

其次，您需要迭代所有搜索词（+ 和 - ）以确保答案是否为“是”（即文档与查询匹配）。但是，对于“否”的答案，你不知道！如果答案是否定的，那么将搜索词与文档匹配的顺序真的很重要。也就是说，一个订单可能比另一个订单更快地给你一个“不”。现在的问题是“获得快速 NO 的最佳顺序是什么？”。这确实取决于应用程序，但一个好的起点是，与诸如“cat”之类的短术语相比，诸如“red big cat”之类的多词术语在文档中的重复频率较低，反之亦然。所以，首先使用+“Loo ooo ooo ooo ooo ong”和-“short”术语。

# asp.net-mvc-3 - MVC 3：路由到静态页面

> ID：10650601
> 
> 赞同：3
> 
> 时间：2012-05-18T10:05:42.407
> 
> 标签：asp.net-mvc-3, routes

今天我提出了对我公司网站的要求（在 ASP.NET MVC 3 中构建）。

其中一个静态页面，我公司网站的 pdf 文件（来自 Content 文件夹）显示在 Google 搜索中。我的公司希望只有登录用户才能访问该 pdf 文件。

为此，我创建了一个 Route 并用 RouteExistingFiles = true 装饰它；

```
 routes.RouteExistingFiles = true;
        routes.MapRoute(
            "RouteForContentFolder", // Route name
            "Content/PDF/ABC.pdf", // URL with parameters
            new { controller = "User", action = "OpenContentResources", id = UrlParameter.Optional } // Parameter defaults
        ); 
```

在 UserController 我写了一个动作方法 OpenContentResources 它将用户重定向到 URL

```
 [CompanyAuthorize(AppFunction.AccessToPDFFiles)]
    public ActionResult OpenContentResources()
    {
        return Redirect("http://localhost:9000/Content/PDF/ABC.pdf");
    } 
```

但是这段代码进入无限循环并且永远不会被执行。任何人都可以帮助我解决我的问题。

谢谢 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:39:55.377

我会这样做：

控制器：

```
 [Authorize]
    public ActionResult GetPdf(string name)
    {
        var path = Server.MapPath("~/Content/Private/" + name);
        bool exists = System.IO.File.Exists(path);
        if (exists)
        {
            return File(path, "application/pdf");
        }
        else
        {
            // If file not found redirect to inform user for example
            return RedirectToAction("FileNotFound");
        }
    } 
```

网络配置：

```
 <location path="Content/Private" allowOverride="false">
    <system.web>
      <authorization>
        <deny users="*"/>
      </authorization>
    </system.web>
  </location> 
```

robots.txt（将其放在您网站的根目录）：

```
User-agent: *
Disallow: /Content/Private/ 
```

这样，您的文件夹将对爬虫隐藏并保护未经身份验证的用户。在这种情况下，我使用的是表单身份验证，因此如果我在登录之前尝试访问文件，则会自动重定向到登录页面。（`http://localhost:8080/Home/GetPdf?name=test.pdf`）在您的情况下，它可能会有所不同。

参考：

[机器人.txt](http://www.robotstxt.org/robotstxt.html)

[web.config 位置元素](http://msdn.microsoft.com/en-us/library/b6x6shw7.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T10:19:38.763

您必须将 pdf 文件作为 FileResult 返回。有关更多信息，请参阅此帖子

[ASP.NET MVC - 如何为 PDF 下载编写代码？](https://stackoverflow.com/questions/730699/asp-net-mvc-how-do-i-code-for-pdf-downloads)

在你的情况下，动作看起来像

```
public ActionResult OpenContentResources()
{
    return File("~/Content/PDF/ABC.pdf", "application/pdf");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T11:10:31.523

将其托管在测试服务器上后问题得到解决。

# jquery - 需要让 jQuery 脚本在大多数浏览器中工作（跨浏览器）

> ID：10650604
> 
> 赞同：2
> 
> 时间：2012-05-18T10:05:50.157
> 
> 标签：jquery, button, cross-browser, simulation, enter

我设法使下面的脚本在 Firefox 12.0 中工作。IE 和 Chrome 无法正常工作。假设文本区域 ID 是 #ICCID 和 #MSISDN，jQuery 看起来像这样：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">
        $(function() {
            $(document).ready(function() {
            $("#ICCID").focus();
            });

            var $inp = $('.cls');

            $inp.bind('keydown', function(e) {
                var key = e.which;
                if (key == 9) {

                    e.preventDefault();
                    var nxtIdx = $inp.index(this) + 1;                  
                    $(".cls:eq(" + nxtIdx + ")").focus();

                //Simulate Enter after TAB
                var textInput = $("#MSISDN").val();
                var lines = textInput .split(/\r|\r\n|\n/);
                if (lines > 1) {

                    $("#MSISDN").on("keypress", function(e) {
                    if (e.keyCode == 9) {
                    var input = $(this);
                    var inputVal = input.val();
                    setTimeout(function() {
                    input.val(inputVal.substring(0,inputVal.length) + "\n");
                          }, 1);
                       }
                    });
                }

                }
                if (key == 9) {

                    e.preventDefault();
                    var nxtIdx = $inp.index(this) - 1;
                    $(".cls:eq(" + nxtIdx + ")").focus();

                //Simulate Enter after TAB
                $("#ICCID").on("keypress", function(e) {
                if (e.keyCode == 9) {
                var input = $(this);
                var inputVal = input.val();
                setTimeout(function() {
                input.val(inputVal.substring(0,inputVal.length) + "\n");
                      }, 1);
                   }
                });

                }
            });
        });
</script> 
```

该脚本的想法是通过在加载网页时按下键盘上的 TAB 按钮在两个特定文本区域之间切换，并在 TAB 操作完成后模拟按下 Enter 按钮。对于此 TAB 按键事件，必须忽略页面上的所有其他元素。

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:22:01.150

当您第一次绑定 keydown 操作时，我会尝试：

```
$inp.bind("keydown", function(e)
{
    var code = (e.keyCode ? e.keyCode : e.which);
    if(code == 9)
    {
        //DO SOMETHING
    }
}); 
```

我也会把你的全部`keypress`改成`keydown`

或尝试阅读[http://api.jquery.com/keypress/](http://api.jquery.com/keypress/)

# php - Netbeans 自动完成不遵循样式指南

> ID：10650616
> 
> 赞同：2
> 
> 时间：2012-05-18T10:06:36.480
> 
> 标签：php, netbeans

我喜欢在函数名、数组之类的东西之后有一个空格，所以函数声明看起来像：

```
function myfunction ($param)
{
    $a = array ('a', 'b');
    callfunction ($a);
} 
```

尽管我已经在 Netbeans 中设置了样式指南以使其在自动完成/建议时与此相对应，但它总是会错过空间并给我一些类似的东西，`callfunction($a)`即使当我去 source->format (alt+shift+f) 时它也会格式化代码正确。

有什么方法可以自动完成以添加空间？

**更新：**

为了清楚起见，我已经设置了 Netbeans 以符合我的编码偏好，如使用自动格式的能力所示。问题是自动完成（或任何提示的东西）不尊重这些设置，导致缺少空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:15:15.803

进入`Tools`-> `Options`。

在窗格中`Editor`-> 选择窗格`Formatting`。

在语言中选择**PHP**并在**类别**中选择**Spaces**。

**在关键字之前、括号之前、左大括号之前**全部勾选，如果需要，您可以选择其他属性。

然后，当您使用自动完成或`Alt`++`Shift`重新`F`格式化时，它将正确放置空格。

编辑 ：

在 OP 情况下，似乎其他配置阻止自动完成工作。

这是我的配置：

![在此处输入图像描述](../Images/2ef4ee78237dd6562d23a55d26bbde3f.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T14:46:17.313

执行此操作：转到选项 > 格式化

向下滚动到“括号前的空格”

检查名为“功能声明”的选项

# android - 我无法将视频上传到 YouTube

> ID：10650620
> 
> 赞同：2
> 
> 时间：2012-05-18T10:07:01.923
> 
> 标签：android, video, youtube

这是我上传视频的代码：

```
Intent shareIntent =new Intent();
shareIntent.setAction(Intent.ACTION_SEND);
shareIntent.putExtra(Intent.EXTRA_SUBJECT, "Share");
String photoURL="sdcard/DCIM/Camera/20120518_165039.mp4";
File file = new File(photoURL); 
shareIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(file)); 
shareIntent.setType("video/*"); 
startActivity(Intent.createChooser(shareIntent, "Share")); 
```

当我运行它时，我选择 YouTube 上传，然后它会显示一个错误对话框： **我的应用程序我的上传（进程 com.google.android.apps.uploader）已意外停止。请尝试老化。**

这是日志： ![在此处输入图像描述](../Images/36551610a87883673d55b1621dbfa3c0.png) 谁知道如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T00:02:40.953

去`settings> applications> manage applications> all apps> scroll down list to>my uploads (if you can't find> com.google.Android.apps.uploader) clear data`

对于任何在发送时卡住但未完成发送消息的上传，这就是您所要做的。我在 Android 论坛上找到了这个答案。该应用程序在我的 Droid 手机设置中称为：“我的上传”。

# performance - 用于处理历史记录的 ETL

> ID：10650621
> 
> 赞同：3
> 
> 时间：2012-05-18T10:07:06.280
> 
> 标签：performance, oracle, etl

我处于某种 DWH 项目中（不完全是，但仍然如此）。我们经常遇到这个问题，我想知道是否会有更好的解决方案。关注

我们收到一些包含用户所有状态记录的大文件，例如：

```
UID | State    | Date
1   | Active   | 20120518
2   | Inactive | 20120517
1   | Inactive | 20120517
... 
```

我们通常只对每个用户的最新状态感兴趣。到目前为止一切顺利，只需进行一点排序，我们就可以得到我们想要的方式。唯一的问题是，这些文件通常很大.. 像 20-60gb，排序这些家伙有时很痛苦，因为排序的逻辑通常不是那么简单。

我们通常所做的是将所有内容加载到我们的 Oracle 中，并使用中间表和物化视图来完成。尽管如此，有时性能会咬我们。

20-60GB可能很大，但不是*那么*大。我的意思是，应该是一种更专业的方式来处理这些记录，不是吗？

我想有两种基本的方法来解决这个问题：

1) 在 DBMS、脚本和编译的东西之外编程。但也许这不是很灵活，除非投入更多的时间来开发一些东西。另外，我可能不得不忙于自己管理盒子资源，而我不想为此担心。

2）将所有内容加载到DBMS（在我的例子中是Oracle）并使用它提供的任何工具对数据进行排序和剪辑。不过，这就是我的情况，我不确定我们是否使用了所有工具，或者只是以适合 Oracle 10g 的正确方式进行操作。

那么问题是：

您有一个 60gb 的文件，其中包含数百万条历史记录，例如上面的记录，您的用户希望在 DB 中有一个表，其中包含每个用户的最后状态。

你们会怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:41:57.280

你可以做两件事来加快这个过程。

第一件事是向它投入计算能力。如果您有企业版和大量内核，您将通过并行查询显着减少加载时间。

另一件事是避免加载您不想要的记录。这就是您提到预处理文件的原因。我不确定您可以在那里做很多事情，除非您可以访问 Hadoop 集群以在您的文件上运行一些 map-reduce 作业（嗯，主要是 reduce，您发布的结构与已经映射的结构差不多）。

但是还有一种选择：外部表。外部表是其数据在 OS 文件而不是表空间中的表。并且它们可以并行启用（前提是您的文件符合某些条件）。 [了解更多](http://docs.oracle.com/cd/B19306_01/server.102/b14215/et_concepts.htm#i1007483)。

所以，你可能有一个像这样的外部表

```
CREATE TABLE user_status_external (
   uid     NUMBER(6),
   status      VARCHAR2(10),
   sdate        DATE
ORGANIZATION EXTERNAL
(TYPE oracle_loader
 DEFAULT DIRECTORY data_dir
 ACCESS PARAMETERS
 (
  RECORDS DELIMITED BY newline
  BADFILE 'usrsts.bad'
  DISCARDFILE 'usrsts.dis'
  LOGFILE 'usrsts.log'
  FIELDS TERMINATED BY ","  OPTIONALLY ENCLOSED BY '"'
  (
   uid     INTEGER EXTERNAL(6),
   status     CHAR(10),
   sdate       date 'yyyymmdd' )
 )
 LOCATION ('usrsts.dmp')
)
PARALLEL
REJECT LIMIT UNLIMITED; 
```

请注意，您需要对 DATA_DIR 目录对象具有读写权限。

创建外部表后，您可以使用插入语句将唯一需要的数据加载到目标表中：

```
insert into user_status (uid, status, last_status_date)
    select  sq.uid
            ,  sq.status
            ,  sq.sdate
    from (
        select /*+ parallel (et,4) */ 
               et.uid
               , et.status
               , et.sdate
               , row_number() over (partition by et.uid order by et.sdate desc) rn  
        from user_status_external et
        ) sq
    where sq.rn = 1 
```

* * *

请注意，与所有性能建议一样，没有任何保证。您需要对环境中的事物进行基准测试。

另一件事是使用 INSERT：我假设这些都是新的 USERID，因为这是您的帖子所建议的场景。如果您有一个更复杂的场景，那么您可能想要查看 MERGE 或完全不同的方法。

* * *

最后一件事：您似乎假设这是一种常见情况，它有一些标准方法。但是大多数数据仓库会加载他们获得的所有数据。然后，他们可能会针对各种不同的用途、数据集市等对其进行过滤。但他们几乎总是在所有不同记录的实际仓库中维护历史记录。这就是为什么您可能无法获得行业标准解决方案的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T13:34:31.210

我会按照 APC 作为第一次尝试所说的那样去做。但是，我*认为*并行表只能在数据位于多个文件中的情况下并行加载数据，因此您可能必须将文件分成几个文件。文件是如何生成的？处理 20 - 60GB 的文件真的很痛苦——你能改变文件的生成，比如得到 X 2GB 的文件吗？

将所有记录放入数据库后，您可能会在尝试对 60GB 数据进行排序时遇到问题 - 值得查看您用于提取最新状态的查询的排序阶段。过去，我通过对要排序的字段之一（在本例中为 user_id）上的数据进行哈希分区来帮助进行大型排序。然后 Oracle 只需要进行 X 次较小的排序，每个排序都可以并行进行。

所以，我的想法是：

1.  尝试生成许多较小的文件而不是 1 个大文件
2.  使用外部表，看看是否可以直接从外部表中提取你想要的数据
3.  如果没有，则将文件的全部内容加载到哈希分区表中 - 在此阶段确保执行 insert /*+ append nologging */ 以避免生成撤消和重做。如果您的数据库将 force_logging 设置为 true，则 nologging 提示将无效。
4.  对暂存数据运行选择以仅提取您关心的行，然后丢弃暂存数据。

nologging 选项可能对您获得良好的性能至关重要 - 要加载 60GB 的数据，您将生成至少 60GB 的重做日志，所以如果可以避免这种情况，那就更好了。您可能需要与您的 DBA 讨论一下！

假设您有大量可用的 CPU，在将数据批量加载到临时表中时压缩数据也可能是有意义的。如果它有重复的字段，压缩可能是磁盘上数据大小的一半——写入时节省的磁盘 IO 通常超过加载时消耗的任何额外 CPU。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T11:22:25.340

我可能过于简单化了这个问题，但为什么不这样：

```
create materialized view my_view
tablespace my_tablespace
nologging
build immediate
refresh complete on demand
with primary key
as
select uid,state,date from
(
  select /*+ parallel (t,4) */ uid, state, date, row_number() over (partition by uid order by date desc) rnum
  from my_table t;
)
where rnum = 1; 
```

然后在需要时完全刷新。

编辑：任何人都不要忘记重建统计数据，并可能在 uid 上抛出一个唯一索引。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-18T10:18:41.773

我会编写一个程序来遍历每条记录，并只保留那些比以前看到的记录更新的记录。最后，将数据插入数据库。

这有多实用取决于我们谈论的用户数量——你最终可能不得不仔细考虑你的中间存储。

一般来说，这变成（在伪代码中）：

```
foreach row in file
    if savedrow is null
        save row
    else
        if row is more desirable than savedrow
             save row
        end
    end
end

send saved rows to database 
```

重点是，您需要定义如何认为一行比另一行更可取。在简单的情况下，对于给定的用户，当前行的日期晚于我们保存的最后一行。最后，您将有一个行列表，每个用户一个，每个行都有您看到的最近日期。

您可以通用脚本或程序，以便框架与理解每个数据文件的代码分开。

仍然需要一段时间，请注意:-)

# java - 按距离排序搜索结果

> ID：10650624
> 
> 赞同：-1
> 
> 时间：2012-05-18T10:07:12.323
> 
> 标签：java, javascript, jquery, sorting

我有 db 表，其中包含位置详细信息，如邮政编码、长/纬度数据、地区、城市等。我正在使用这些数据在我的 Web 应用程序中显示用户位置。现在我想根据距离对用户搜索的地方进行排序，比如最近的地方。如何计算用户当前位置与他搜索过的地方之间的距离，然后根据距离对结果进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:16:42.223

```
i just have this function for calculate distance between two latitude,longitude, pleaes have a look if its helpful to you.

function distance(lat1, lon1, lat2, lon2, unit) {
    var radlat1 = Math.PI * lat1/180
    var radlat2 = Math.PI * lat2/180
    var radlon1 = Math.PI * lon1/180
    var radlon2 = Math.PI * lon2/180
    var theta = lon1-lon2
    var radtheta = Math.PI * theta/180
    var dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);
    dist = Math.acos(dist)
    dist = dist * 180/Math.PI
    dist = dist * 60 * 1.1515
    if (unit=="K") { dist = dist * 1.609344 }
    if (unit=="N") { dist = dist * 0.8684 }
    return dist
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T10:17:22.573

如果你确实有`longitude`和`latitude`数据，你可以用这些计算来对你的搜索结果进行排序。

* * *

**示例数据：**

*   执行搜索的用户有（经度/纬度）： 51.993073 , 5.952852
*   用户 1（经度/纬度）： 52.893073 , 5.952852
*   用户 2（经度/纬度）： 60.993073 , 5.952852

* * *

您可以清楚地看到“用户 1”比“用户 2”更接近执行搜索的用户（参见经度）。

注意：您需要一个公式来计算这个，检查`JDev`答案。

# iphone - 如何从 iPhone 的麦克风中获取无头原始音频数据到 NSData

> ID：10650629
> 
> 赞同：4
> 
> 时间：2012-05-18T10:07:30.430
> 
> 标签：iphone, audio-recording

我需要记录 3 秒的 headles 原始音频数据：PCM 11025 个样本每秒，16 位单声道，然后将其作为 base64 编码字符串发送。

使用 AVAudioRecorder 我可以录制 .CAf 文件并随时访问它，但问题是：如何将无头原始音频数据从录制文件中获取到 NSData 对象中？

谢谢！

# javascript - 使用 setInterval 一个一个打印数字，我得到 Uncaught ReferenceError

> ID：10650630
> 
> 赞同：1
> 
> 时间：2012-05-18T10:07:30.847
> 
> 标签：javascript, jquery, setinterval

我想一一打印数字 1 到 4 以下是我的代码：

**脚本**

```
<script>
$(document).ready(function(){
var b=1;
function cal(){

$('#print').html(b + '<br/>');
b++;
};
setInterval("cal()",5000);
})
</script> 
```

**HTML**

```
<div id="print"></div> 
```

但它不起作用，显示以下错误：

> 未捕获的 ReferenceError：未定义 cal

为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T10:12:06.917

## 修复

### 如何使用`setInterval`

这是使用的*正确方法*（稍后解释）[`setInterval()`](https://developer.mozilla.org/en/DOM/window.setInterval)：

```
setInterval(cal, 5000); 
```

### 编写此代码的一种可能方法

```
$(document).ready(function(){
    var b = 0;
    function cal() {
        b++;
        $('#print').html(b + '<br/>');
        if (b === 4) {
            clearInterval(to);
        }
    };
    var to = setInterval(cal, 5000);
});​ 
```

[jsFiddle 演示](http://jsfiddle.net/GMs8U/2/)

当然还有改进的地方，比如你可以缓存`$('#print')`. 您不需要每次都获取它。

```
...
var $print = $('#print'); //save it to a variable
function cal() {
    b++;
    $print.html(b + '<br/>'); //use the cached version
    ... 
```

* * *

## 问题

### 字符串而不是函数 -> `eval`！

虽然从技术上讲，您可以[将字符串`setInterval`作为其第一个参数](https://developer.mozilla.org/en/DOM/window.setInterval#Syntax)传递，但它等同于使用`eval`. 正如我们所知，[`eval`是邪恶](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/eval#Don%27t_use_eval!)的，只有在你真的知道自己在做什么的情况下才使用它。这同样适用于`setTimeout`。无论[您在 w3schools](http://w3fools.com/#js_timing)和其他过时的资源上看到了什么，都不应将字符串传递给这些方法。传递一个函数。

### `eval`with的范围`setInterval`

`eval`使用with的问题之一`setInterval()`是它试图在全局范围内的字符串中运行您的代码，这就是您收到错误的原因。`setInterval`在 上定义`window`，并在其范围内运行。您在传递给的闭包的范围内`document.ready()`，并且函数在此范围内定义。`eval`试图在不存在的全局范围内找到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T10:25:56.537

你也可以试试这个：

```
var b = 1;
function call() {
    $('#print').append(b + '<br/>');
    b++;
    setTimeout(function() {
        if (b < 5) call();
    },5000);
};
call(); 
```

**[演示](http://jsfiddle.net/thecodeparadox/Ffu5K/3/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T10:10:14.127

`cal()`与其提供对函数的字符串引用，不如提供`setInterval`函数引用本身：

```
var b = 1;    
function cal() {
    $('#print').html(b + '<br/>');
    b++;
};
setInterval(cal, 1000); 
```

[**示例小提琴**](http://jsfiddle.net/Kr7jg/)

* * *

另外，你当前的代码会在 4 次迭代后继续调用区间，所以有点浪费。您可以将其更改为具有延迟的 for 循环，或者在 4 次迭代后销毁对计时器的引用，如下所示：

```
var b = 1;    
function cal() {
    $('#print').html(b + '<br/>');
    b++;
    if (b > 4)
        clearInterval(timer);
};
var timer = setInterval(cal, 1000); 
```

[**示例小提琴**](http://jsfiddle.net/Kr7jg/1/)

# kml - KML 多边形点相对于起点的高度

> ID：10650632
> 
> 赞同：1
> 
> 时间：2012-05-18T10:07:40.387
> 
> 标签：kml

如果多边形的起点只有一个高于地面的高度：有没有办法创建多边形以使以下所有点相对于海平面具有相同的高度？即多边形将在水平平原上平坦，无论地形如何。

有没有人在生成 kml 之前不知道/获得海拔高度的情况下这样做的方法？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:42:44.873

**使用relativeToGround**高度模式创建一个多边形，它将高度解释为距离地面以米为单位的值。

注意：您需要指定每个点的高度值。不能只为一个指定高度，而让其他人使用相同的高度。如果省略高度，则默认为“0”。

这是多边形，每个点都设置在地面以上 10 米处。

```
<?xml version="1.0" encoding="utf-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
      <Placemark>
      <name>tennis-poly</name>
      <Polygon>
        <altitudeMode>relativeToGround</altitudeMode>
        <outerBoundaryIs>
          <LinearRing>
            <coordinates>
              -122.43193945401,37.801983684521,10
              -122.431564131101,37.8020327731402,10
              -122.431499536494,37.801715236748,10
              -122.43187136387,37.8016634915437,10
              -122.43193945401,37.801983684521,10
            </coordinates>
          </LinearRing>
        </outerBoundaryIs>        
      </Polygon>
    </Placemark>     
</kml> 
```

如果无论地形如何，都希望多边形在水平平原上平坦，那么高度模式必须是相对于平均海平面的*绝对值。*您可以跳过在坐标中定义高度并使用[`<gx:altitudeOffset>`](http://documentation).

```
<?xml version="1.0" encoding="utf-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2">
      <Placemark>
      <name>tennis-poly</name>
      <Polygon>
        <altitudeMode>absolute</altitudeMode>              
        <outerBoundaryIs>
          <LinearRing>
            <gx:altitudeOffset>50</gx:altitudeOffset>
            <coordinates>
              -122.43193945401,37.801983684521
              -122.431564131101,37.8020327731402
              -122.431499536494,37.801715236748
              -122.43187136387,37.8016634915437
              -122.43193945401,37.801983684521
            </coordinates>
          </LinearRing>
        </outerBoundaryIs>        
      </Polygon>
    </Placemark>     
</kml> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T16:48:41.497

您唯一可能的解决方法是获取第一个点的海平面高度，并在其他点上使用该高度： [Get height by longitude and latitude in Android](https://stackoverflow.com/questions/1995998/android-get-altitude-by-longitude-and-latitude)

# sencha-touch - 如何在sencha touch中将图像从商店动态绑定到轮播

> ID：10650634
> 
> 赞同：2
> 
> 时间：2012-05-18T10:07:43.717
> 
> 标签：sencha-touch, extjs, sencha-touch-2, carousel

我在我的 sencha touch 应用程序中声明了以下商店

```
Ext.define('Sample.store.ImageStore', {
    extend: 'Ext.data.Store',
    config: {
        model: 'Sencha.model.ImageModel',
        data: [{ name: "cat", url: "http://bleachthemind.files.wordpress.com/2010/08/cute-bunnys-domestic-animals-2785589-1024-768.jpg" },

            { name: "lion", url: "http://images1.fanpop.com/images/photos/2600000/Cheetah-Family-wild-animals-2603080-1280-1024.jpg" }
        ]
    }
}); 
```

这是我在模型中声明的代码：

```
Ext.define('Sample.model.ImageModel', {
    extend: 'Ext.data.Model',
    config: {

     fields:['name','url']
}
}); 
```

我在构建带有轮播的视图时遇到困难，其中数据是从上述商店绑定的。请我知道​​要在使用轮播消耗存储数据的视图中编写的正确语法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T10:34:18.960

您不能在 Sencha Touch 中将 Store 连接到 Carousel。看来您必须通过以下方式手动执行此操作：

```
yourCarousel = Ext.getCmp('your_carousel_id');
store.each(function(record){
                    yourCarousel.add({
                        html: '<img src=' + record.get('url') + '/>'
                    });
                }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T10:43:40.060

蒂姆的回答很好。如果您想要一个更完整的示例，请查看这篇不错的帖子： [http ://edspencer.net/2012/02/building-a-data-driven-image-carousel-with-sencha-touch-2.html](http://edspencer.net/2012/02/building-a-data-driven-image-carousel-with-sencha-touch-2.html)

我认为它应该满足您的所有需求；）

希望这可以帮助。

# asp.net - 在我的 where 子句中使用 querystring 参数来生成插入操作

> ID：10650639
> 
> 赞同：0
> 
> 时间：2012-05-18T10:07:51.097
> 
> 标签：asp.net

在这里，使用 request.Querystring 我找到特定 Job 的公司名称和职位。当用户使用 texbix 中的用户名登录时。我希望 Companyname、jobtitle 和用户名在表的同一行中。但是当我生成查询时，它会插入（公司名称和职位）在第一行，用户名在第二行。我怎样才能完成我的任务。有人说，我必须将公司名称和职位保留在一个变量中......然后执行。这是一个完美的解决方案吗？如果是，我该怎么做？代码：

```
protected void ButtonApply_Click(object sender, EventArgs e) {
    String str = Request.QueryString.Get("JobNo");

    SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString);
    conn.Open();

    string apply = "INSERT INTO Company (CompanyName,JobTitle) select CompanyName,JobTitle from Jobs where JobNo='"+str+"'" ; 

    SqlCommand insertApply = new SqlCommand(apply, conn);
    try {
        insertApply.ExecuteScalar();
        conn.Close();
        Response.Redirect("ApplyJob.aspx?JobNo="+str);
    } 
```

在 apply.aspx 我有以下代码：

```
SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString);
conn.Open();

string apply = "INSERT INTO Company (CandidateInformation) Values (@CandidateInformation)" ;

SqlCommand insertApply = new SqlCommand(apply, conn);

insertApply.Parameters.AddWithValue("@CandidateInformation", TextBoxaun.Text);
insertApply.ExecuteNonQuery();

conn.Close();

Response.Redirect("CompanyInfo.aspx"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:14:25.330

采用

```
Update Company Set CandidateInformation = @CandidateInformation where JobNo='"+str+"'" ; 
```

代替

```
string apply = "INSERTINTO Company (CandidateInformation) Values 
(@CandidateInformation)" ; 
```

如果您将`Insert`再次使用语句，那么它将始终在表中创建新记录。

`Update`用于更新表中已经存在的记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:19:11.000

插入两次总是会产生两个新行。您可以在第一个插入语句中完成所有操作：

```
string apply = "INSERT INTO Company (CompanyName,JobTitle, CandidateInformation) select 
CompanyName,JobTitle, @CandidateInformation from Jobs where JobNo=@JobNo ;

    SqlCommand insertApply = new SqlCommand(apply, conn);

    insertApply.Parameters.AddWithValue("@CandidateInformation", 
    TextBoxaun.Text);
    insertApply.Parameters.AddWithValue("@JobNo", str);
            try

            {

                insertApply.ExecuteScalar();

                conn.Close();
                Response.Redirect("CompanyInfo.aspx");

            } 
```

然后你就不需要第二页了。

# dojo - 动态隐藏 dgrid 中的列

> ID：10650640
> 
> 赞同：4
> 
> 时间：2012-05-18T10:07:55.150
> 
> 标签：dojo, dgrid

如何根据一些运行时参数隐藏 dgrid (gridFromHtml) 中的完整列？假设参数的值为真，我应该能够显示某个列，如果值为假，那么我应该能够隐藏同一列。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-18T11:01:24.610

使用`grid.styleColumn(columnId, css)`：

```
var grid = new Grid({
    store: store,
    columns: [
        { id: "artist", label: "Artist", field: "Artist"},
        { id: "name", label: "Song", field: "Name"},
        { id: "gerne", label: "Genre", field: "Genre"}
    ]
}, "grid-placeholder");

// to hide column with id="name"
grid.styleColumn("name", "display: none;");

// to show it
grid.styleColumn("name", "display: table-cell;"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-11-06T20:38:25.327

有一个名为 ColumnHider 的 dgrid 扩展，它允许您传入具有“隐藏”属性的列。

```
require([
  "dojo/_base/declare", "dgrid/OnDemandGrid", "dgrid/extensions/ColumnHider"
], function(declare, OnDemandGrid, ColumnHider) {
  var grid = new(declare([OnDemandGrid, ColumnHider]))({
    columns: {
      col1: {
        label: "Column 1",
        hidden: true
      },
      col2: {
        label: "Column 2",
        unhidable: true
      },
      col3: "Column 3"
    }
  }, "grid");
  // ...
});
```

这也将使用户能够隐藏自己的列。您可以将某些列设置为不可隐藏，例如上面的第 2 列

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-01T13:30:38.707

您需要使用[toggleColumnHiddenState](https://github.com/SitePen/dgrid/blob/master/doc/components/extensions/ColumnHider.md)：

```
require([
    'dojo/_base/declare',
    'dgrid/OnDemandGrid',
    'dgrid/extensions/ColumnHider'
], function (declare, OnDemandGrid, ColumnHider) {
    var grid = new (declare([ OnDemandGrid, ColumnHider ]))({
        columns: {
            'id': {label: '#'},
            'name': {label: 'Название'}
        }
    }, 'grid');

    grid.toggleColumnHiddenState('name', true);  // hiding 
    grid.toggleColumnHiddenState('name', false); // showing 
    grid.toggleColumnHiddenState('name');        // toggling column
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-18T10:44:00.833

应该认为这会起作用

```
var grid = new dojox.grid.DataGrid({

    store: dataStore,
    structure: [{
        name: "ID",
        field: "id",
        width: "100px"
    }, {
        name: "Values",
        field: "values",
        width: "100px"
    }]
}, "myGrid");

grid.startup();

function showOrHideColumn(show, widget, index) {
  var d = show ? "" : "none"
  dojo.query('td[idx="'+index+'"]', widget.viewsNode).style("display", d);
  dojo.query('th[idx="'+index+'"]', widget.viewsHeaderNode).style("display", d);
}

showOrHideColumn(false,grid,0); 
```

# python - Python：从 3D 中的 Scipy 的 Delaunay 三角剖分计算 Voronoi Tesselation

> ID：10650645
> 
> 赞同：18
> 
> 时间：2012-05-18T10:08:15.647
> 
> 标签：python, 3d, scipy, delaunay, voronoi

我有大约 50,000 个 3D 数据点，我从新的 scipy 运行 scipy.spatial.Delaunay（我使用的是 0.10），这给了我一个非常有用的三角测量。

基于：[http](http://en.wikipedia.org/wiki/Delaunay_triangulation) ://en.wikipedia.org/wiki/Delaunay_triangulation （“与 Voronoi 图的关系”部分）

...我想知道是否有一种简单的方法可以到达这个三角剖分的“双图”，即 Voronoi Tesselation。

有什么线索吗？我在这方面的搜索似乎没有显示预建的 scipy 函数，我觉得这几乎很奇怪！

谢谢，爱德华

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-18T17:18:09.233

邻接信息可以在`neighbors`Delaunay 对象的属性中找到。不幸的是，该代码目前并未向用户公开外心，因此您必须自己重新计算。

此外，延伸到无穷大的 Voronoi 边也不是以这种方式直接获得的。它仍然可能是可能的，但需要更多的思考。

```
import numpy as np
from scipy.spatial import Delaunay

points = np.random.rand(30, 2)
tri = Delaunay(points)

p = tri.points[tri.vertices]

# Triangle vertices
A = p[:,0,:].T
B = p[:,1,:].T
C = p[:,2,:].T

# See http://en.wikipedia.org/wiki/Circumscribed_circle#Circumscribed_circles_of_triangles
# The following is just a direct transcription of the formula there
a = A - C
b = B - C

def dot2(u, v):
    return u[0]*v[0] + u[1]*v[1]

def cross2(u, v, w):
    """u x (v x w)"""
    return dot2(u, w)*v - dot2(u, v)*w

def ncross2(u, v):
    """|| u x v ||^2"""
    return sq2(u)*sq2(v) - dot2(u, v)**2

def sq2(u):
    return dot2(u, u)

cc = cross2(sq2(a) * b - sq2(b) * a, a, b) / (2*ncross2(a, b)) + C

# Grab the Voronoi edges
vc = cc[:,tri.neighbors]
vc[:,tri.neighbors == -1] = np.nan # edges at infinity, plotting those would need more work...

lines = []
lines.extend(zip(cc.T, vc[:,:,0].T))
lines.extend(zip(cc.T, vc[:,:,1].T))
lines.extend(zip(cc.T, vc[:,:,2].T))

# Plot it
import matplotlib.pyplot as plt
from matplotlib.collections import LineCollection

lines = LineCollection(lines, edgecolor='k')

plt.hold(1)
plt.plot(points[:,0], points[:,1], '.')
plt.plot(cc[0], cc[1], '*')
plt.gca().add_collection(lines)
plt.axis('equal')
plt.xlim(-0.1, 1.1)
plt.ylim(-0.1, 1.1)
plt.show() 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-02-04T14:17:20.050

由于我在这方面花费了大量时间，我想分享我的解决方案，了解如何获得 Voronoi*多边形*而不仅仅是边缘。

该代码位于[https://gist.github.com/letmaik/8803860](https://gist.github.com/letmaik/8803860)并扩展了[tauran](https://stackoverflow.com/a/15783581/60982)的解决方案。

首先，我更改了代码以分别给我顶点和（成对）索引（=边），因为在处理索引而不是点坐标时可以简化许多计算。

然后，在该`voronoi_cell_lines`方法中，我确定哪些边属于哪些单元格。为此，我使用了相关问题中提出的[Alink解决方案。](https://stackoverflow.com/a/9471601/60982)也就是说，对于每条边，找到两个最近的输入点（=cells）并从中创建一个映射。

最后一步是创建实际的多边形（参见`voronoi_polygons`方法）。首先，需要关闭具有悬垂边缘的外部单元格。这就像查看所有边缘并检查哪些边缘只有一个相邻边缘一样简单。可以有零个或两个这样的边缘。如果有两个，然后我通过引入一个额外的边缘来连接它们。

最后，每个单元格中的无序边需要按正确的顺序排列，以从中导出多边形。

用法是：

```
P = np.random.random((100,2))

fig = plt.figure(figsize=(4.5,4.5))
axes = plt.subplot(1,1,1)

plt.axis([-0.05,1.05,-0.05,1.05])

vertices, lineIndices = voronoi(P)        
cells = voronoi_cell_lines(P, vertices, lineIndices)
polys = voronoi_polygons(cells)

for pIdx, polyIndices in polys.items():
    poly = vertices[np.asarray(polyIndices)]
    p = matplotlib.patches.Polygon(poly, facecolor=np.random.rand(3,1))
    axes.add_patch(p)

X,Y = P[:,0],P[:,1]
plt.scatter(X, Y, marker='.', zorder=2)

plt.axis([-0.05,1.05,-0.05,1.05])
plt.show() 
```

输出：

![Voronoi 多边形](../Images/35691e58f54b6186790542f19f261c2f.png)

该代码可能不适合大量输入点，并且可以在某些方面进行改进。不过，它可能对其他有类似问题的人有所帮助。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-03T09:27:58.450

我遇到了同样的问题，并根据 pv. 的答案和我在网上找到的其他代码片段构建了一个解决方案。该解决方案返回一个完整的 Voronoi 图，包括不存在三角形邻居的外线。

```
#!/usr/bin/env python
import numpy as np
import matplotlib
import matplotlib.pyplot as plt
from scipy.spatial import Delaunay

def voronoi(P):
    delauny = Delaunay(P)
    triangles = delauny.points[delauny.vertices]

    lines = []

    # Triangle vertices
    A = triangles[:, 0]
    B = triangles[:, 1]
    C = triangles[:, 2]
    lines.extend(zip(A, B))
    lines.extend(zip(B, C))
    lines.extend(zip(C, A))
    lines = matplotlib.collections.LineCollection(lines, color='r')
    plt.gca().add_collection(lines)

    circum_centers = np.array([triangle_csc(tri) for tri in triangles])

    segments = []
    for i, triangle in enumerate(triangles):
        circum_center = circum_centers[i]
        for j, neighbor in enumerate(delauny.neighbors[i]):
            if neighbor != -1:
                segments.append((circum_center, circum_centers[neighbor]))
            else:
                ps = triangle[(j+1)%3] - triangle[(j-1)%3]
                ps = np.array((ps[1], -ps[0]))

                middle = (triangle[(j+1)%3] + triangle[(j-1)%3]) * 0.5
                di = middle - triangle[j]

                ps /= np.linalg.norm(ps)
                di /= np.linalg.norm(di)

                if np.dot(di, ps) < 0.0:
                    ps *= -1000.0
                else:
                    ps *= 1000.0
                segments.append((circum_center, circum_center + ps))
    return segments

def triangle_csc(pts):
    rows, cols = pts.shape

    A = np.bmat([[2 * np.dot(pts, pts.T), np.ones((rows, 1))],
                 [np.ones((1, rows)), np.zeros((1, 1))]])

    b = np.hstack((np.sum(pts * pts, axis=1), np.ones((1))))
    x = np.linalg.solve(A,b)
    bary_coords = x[:-1]
    return np.sum(pts * np.tile(bary_coords.reshape((pts.shape[0], 1)), (1, pts.shape[1])), axis=0)

if __name__ == '__main__':
    P = np.random.random((300,2))

    X,Y = P[:,0],P[:,1]

    fig = plt.figure(figsize=(4.5,4.5))
    axes = plt.subplot(1,1,1)

    plt.scatter(X, Y, marker='.')
    plt.axis([-0.05,1.05,-0.05,1.05])

    segments = voronoi(P)
    lines = matplotlib.collections.LineCollection(segments, color='k')
    axes.add_collection(lines)
    plt.axis([-0.05,1.05,-0.05,1.05])
    plt.show() 
```

黑线 = Voronoi 图，红线 = Delauny 三角形 ![黑线 = Voronoi 图，红线 = Delauny 三角形](../Images/1a3a55a7595d35a2aa0e6458c44059ad.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T10:12:47.157

我不知道执行此操作的功能，但这似乎不是一项过于复杂的任务。

如维基百科文章中所述，Voronoi 图是外接圆的交汇点。

因此，您可以从一个找到三角形外接圆中心的函数开始，这是基本数学 (http://en.wikipedia.org/wiki/Circumscribed_circle)。

然后，只需连接相邻三角形的中心。

# php - cakephp 组合关联的数组字段

> ID：10650648
> 
> 赞同：0
> 
> 时间：2012-05-18T10:08:30.477
> 
> 标签：php, cakephp, multidimensional-array, cakephp-2.1

我有一个包含 20 个元素的关联数组，其子数组看起来像

```
(int) 2 => array(
    'Comment' => array(
        'id' => '5',
        'user_id' => '13',
        'time' => '2012-05-18 14:47:36'
    ),
    'User' => array(
        'name' => 'User name'
    )
) 
```

现在我想使用 cakephp 的[set](http://book.cakephp.org/2.0/en/core-utility-libraries/set.html)实用程序从其子数组*User中提取字段**名称*并将其附加到子数组*Comment*中。除了使用 for 或 foreach 循环之外，还有一种方法可以做到这一点吗？

 **```
(int) 2 => array(
    'Comment' => array(
        'id' => '5',
        'user_id' => '13',
        'time' => '2012-05-18 14:47:36',
        'name =>'User name'
    )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:16:45.643

它没有回答您的问题，但是使用 a 执行此`foreach`操作也是*一个单向步骤*：

```
foreach ($arrays as $array)
  $array['Comment']['name'] = $array['User']['name']; 
```

我相信没有必要使用一些实用程序，只是为了使用实用程序。
特别是它会自己做`foreach`。**

# xquery - 使用 XQuery 求和

> ID：10650655
> 
> 赞同：2
> 
> 时间：2012-05-18T10:08:59.337
> 
> 标签：xquery, xquery-sql

我正在使用 XQuery 来执行加法。以下是保存在数据库中的 XML 结构：

```
 <Events>
        <Event>
            <id>1</id>
            <code>1001</code>
            <Amount>50,1</Amount>
        </Event>
        <Event>
            <id>1</id>
            <code>1002</code>
            <Amount>5,5</Amount>
        </Event>
             <Event>
            <id>1</id>
            <code>1001</code>
            <Amount>50,1</Amount>
        </Event>
        <Event>
            <id>1</id>
            <code>1002</code>
            <Amount>5,5</Amount>
        </Event>
    </Events> 
```

我想通过使用 XQuery 获得以下输出：具有相同代码的金额的总和。请注意`,`是`.`。我需要替换`,`并`.`执行算术运算。

```
 <Total>               
            <1001> 100,2 </1001>
            <1002> 11,0 </1002>
   </Total> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T10:34:35.170

如果您的 XQuery 处理器支持 XQuery 3.0，请使用该[`group by`](http://docs.basex.org/wiki/XQuery_3.0#Group_By)语句。

```
<Total>
{
  for $i in //Event
  let $code := $i/code
  group by $code
  return element {"code"} { attribute {"id"} {$code}, sum($i/Amount)}
}
</Total> 
```

您的问题中的 XML 片段有两个不同之处：我将浮点分隔符更改为点（这是必需的，当然您也可以使用一些 XQuery 字符串操作来执行此操作）并且元素名称可能不仅仅包含数字，有看看[元素命名规则](http://www.w3schools.com/xml/xml_elements.asp)。在我的示例中，我决定将代码作为 id-attribute 返回。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T10:30:25.043

这将为您提供作为结果集的数据。

```
declare @X xml
set @X = 
'<Events>
        <Event>
            <id>1</id>
            <code>1001</code>
            <Amount>50,1</Amount>
        </Event>
        <Event>
            <id>1</id>
            <code>1002</code>
            <Amount>5,5</Amount>
        </Event>
             <Event>
            <id>1</id>
            <code>1001</code>
            <Amount>50,1</Amount>
        </Event>
        <Event>
            <id>1</id>
            <code>1002</code>
            <Amount>5,5</Amount>
        </Event>
    </Events>'

select T.code,
       sum(Amount) as Amount
from
  (
    select T.X.value('code[1]', 'int') as code,
           cast(replace(T.X.value('Amount[1]', 'varchar(13)'), ',', '.') as float) as Amount
    from @X.nodes('Events/Event') as T(X)
  ) as T
group by T.code 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T10:36:42.510

以下代码将计算总数并将结果输出为 XML，但不在您的输出中（这是无效的）：

```
SELECT Code AS 'Code', SUM(Value) AS 'Total'
FROM (
SELECT
    CONVERT(DECIMAL(9,2), REPLACE(c.value('Amount[1]', 'VARCHAR(10)'), ',', '.')) AS Value
    , c.value('code[1]', 'INT') AS Code
FROM @x.nodes('//Event') AS t(c)
) t
GROUP BY Code
FOR XML PATH('Total'), ROOT('Totals') 
```

其中`@x`是包含您的数据的 XML 变量。

# c++ - Windows 和 Linux 之间的行尾分隔符转换

> ID：10650658
> 
> 赞同：0
> 
> 时间：2012-05-18T10:09:05.433
> 
> 标签：c++, linux

我需要阅读在 C++ 程序中在 Windows 中创建的、在 Debian Linux 上编译的 txt 文件。不幸的是，我对行尾分隔符有疑问。我知道行尾指示符在 Linux 和 Windows 中是不同的。因此，在 Linux 中，我的 C++ 程序读取类似“correct_line^M”的内容。

我的问题：如何在 Linux 中正确读取在 Windows 中创建的文件？我是否需要手动将其转换为 Linux 表示（我想避免它）？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T10:57:37.983

你必须自己做。（恕我直言，如果以文本模式打开，一个好的库会自动执行此`filebuf`操作。但我熟悉的库不会。）

取决于你在做什么，这可能无关紧要。无论如何，任何面向行的输入都应该接受尾随空格，并且额外的 0x0D 字符是空格。因此，除了编辑之外，这通常无关紧要。

如果您想在写入文件时（在 Windows 下）抑制多余的 0x0D，只需以二进制模式打开文件即可。就此而言，当文件的可移植性受到关注时，以二进制模式打开文件并编写协议所需的任何约定通常是一个好主意。（使用两个字符序列 0x0D、0x0A 或多或少是标准的，并且是大多数 Internet 协议所指定的。）再次读取时，以二进制模式打开，并编写代码以接受任何通常的约定：两个字符序列0x0D、0x0A 或单个 0x0D 或单个 0x0A。（这可以通过过滤流缓冲区来完成。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:12:48.810

你可能会跑`dos2unix`。它会转换你的文件。

# html - Perl HTML 清理

> ID：10650659
> 
> 赞同：0
> 
> 时间：2012-05-18T10:09:07.527
> 
> 标签：html, perl

我怎样才能使 HTML::Clean 模块在这个 perl 脚本中工作。

```
#!/usr/bin/env perl

use strict;
use warnings;

require LWP::UserAgent;

open FH, "<", "text.txt";
my $ua = LWP::UserAgent->new;
$ua->timeout(10);

foreach my $line (<FH>) {
    my $response = $ua->get($line);
    my $h = new HTML::Clean(\$response);

    if ($response->is_success) {
        print $response->decoded_content;
    }
    else {
        die $response->status_line;
    }
}
close FH; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T10:35:14.800

[HTML::Clean](https://metacpan.org/module/HTML%3a%3aClean)构造方法接受一个参数，该参数可以是文件名，也可以是对包含 HTML 的字符串的引用。您似乎正在向它传递一个[HTTP::Response](https://metacpan.org/module/HTTP%3a%3aResponse)对象。尝试将 HTML 传递给它。

```
my $response = $ua->get($line);
my $html = $response->decoded_content;
my $h = HTML::Clean->new(\$html); 
```

# android - Android：bitmapfactory.decodestream 返回 null

> ID：10650660
> 
> 赞同：6
> 
> 时间：2012-05-18T10:09:11.093
> 
> 标签：android, bitmap

我试图从图像的路径中获取位图图像。但`BitmapFactory.decodeStream`返回`null`值。

代码：

```
URL url = new URL(path);
HttpURLConnection connection = (HttpURLConnection) url.openConnection();
connection.setDoInput(true);
connection.connect();
InputStream input = connection.getInputStream();
Bitmap myBitmap = BitmapFactory.decodeStream(input);
connection.disconnect();
input.close(); 
```

我搜索了更多网站，但我仍然没有得到解决方案。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-18T12:19:31.873

**有一个解决方案：**

```
HttpGet httpRequest = new HttpGet(URI.create(path) );
HttpClient httpclient = new DefaultHttpClient();
HttpResponse response = (HttpResponse) httpclient.execute(httpRequest);
HttpEntity entity = response.getEntity();
BufferedHttpEntity bufHttpEntity = new BufferedHttpEntity(entity);
bmp = BitmapFactory.decodeStream(bufHttpEntity.getContent());
httpRequest.abort(); 
```

问题是一旦你使用了`InputStream`from a `HttpUrlConnection`，你就不能倒带并`InputStream`再次使用它。因此，您必须为`InputStream`图像的实际采样创建一个新的。否则我们必须中止`HTTP`请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T10:36:33.043

```
public Bitmap getBitmapFromUrl(String url)
{
Bitmap bm = null;
InputStream is = null;
BufferedInputStream bis = null;
try 
{
    URLConnection conn = new URL(url).openConnection();
    conn.connect();
    is = conn.getInputStream();
    bis = new BufferedInputStream(is, 8192);
    bm = BitmapFactory.decodeStream(bis);
}
catch (Exception e) 
{
    e.printStackTrace();
}
finally {
    if (bis != null) 
    {
        try 
        {
            bis.close();
        }
        catch (IOException e) 
        {
            e.printStackTrace();
        }
    }
    if (is != null) 
    {
        try 
        {
            is.close();
        }
        catch (IOException e) 
        {
            e.printStackTrace();
        }
    }
}
return bm;
} 
```

不要忘记在线程（不是主线程）中调用它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-15T19:06:25.283

我有同样的问题，但在我的情况下，问题是资源（图像）。确保图像不是 CMYK 颜色模式，因为 Android 不支持 CMYK 图像。有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/11047224/unable-to-load-jpeg-image-with-bitmapfactory-decodefile-returns-null)

祝你好运 ;）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T10:14:17.283

使用以下代码 iam 能够从 url 下载图像

```
String IMAGE_URL = "http://www.kolkatabirds.com/rainquail8vt.jpg";
            //where we want to download it from
            URL url;
            try {
                url = new URL(IMAGE_URL);

                //open the connection
                URLConnection ucon = url.openConnection();

                //buffer the download
                InputStream is = ucon.getInputStream();
                BufferedInputStream bis = new BufferedInputStream(is,1024);

                //get the bytes one by one
                int current = 0;

                while ((current = bis.read()) != -1) {
                    baf.append((byte) current);
                }
                //convert it back to an image
                ByteArrayInputStream imageStream = new ByteArrayInputStream(baf.toByteArray());
                Bitmap theImage = BitmapFactory.decodeStream(imageStream);
                img.setImageBitmap(theImage); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-18T17:02:29.533

**BufferedInputStream 在解码流之前是必需的......**

试试这个，它非常适合我使用；

`BufferedInputStream buf = new BufferedInputStream(inputsteam, 1024);`

将 buf 传递给解码流，它将完美运行。

`Bitmap theImage = BitmapFactory.decodeStream(buf);`

最后设置你的位图。

# javascript - Javascript 在本地加载但不在服务器上

> ID：10650662
> 
> 赞同：0
> 
> 时间：2012-05-18T10:09:18.133
> 
> 标签：javascript, anythingslider

我看过类似的线程，但还没有找到解决这个问题的方法。

该网站在我的本地机器（Mac）上运行良好，但我通过 FTP（由 1&1 托管）上传了一个网站，当我在浏览器（最新的 Chrome/Firefox/Safari）中查看该网站时，脚本没有加载图像滑块 (AnythingSlider)。

[查看网站](http://www.spiritdigital.co.uk/CV/index.html)

抱歉，如果在其他地方回答了这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T10:28:21.450

检查你的脚本你有以下错误：

> 未捕获的类型错误：对象 [object Object] 没有方法“anythingSlider”

您需要删除您的第二个 jQuery 调用：

```
<script>window.jQuery || document.write('<script src="js/libs/jquery-1.7.2.min.js"><\/script>')</script> 
```

这将防止 jQuery “重新启动”，从而防止您丢失该`anythingSlider`功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T10:27:12.303

第 155 行：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<script>window.jQuery || document.write('<script src="js/libs/jquery-1.7.2.min.js"><\/script>')</script> 
```

第 20 行：

```
<script src="js/libs/jquery-1.7.2.min.js"></script>
<script>window.jQuery || document.write('<script src="js/libs/jquery-1.7.2.min.js"><\/script>')</script> 
```

不要包含 jQuery 两次。第 155 行的 jquery 包含在anyslider 之后。所以它正在重置 jquery 对象（它不再有 anythinslider）。删除此行 155 jquery 并像这样更改第 34 行

```
<script>    
    $(document).ready(function(){
        $('#slider').anythingSlider();
    });
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T10:46:00.323

****老兄！你在用你的脚本和 css 做什么****
1.我同意生硬。
有 4 个地方包含了 jquery，而不是在任何地方都检查了现有的 jquery 可用性。
2.我检查了你所有的脚本文件都正确加载。所以问题不在于加载文件。有了它，您正在使用不正确的网址来加载您的脚本。3.finally 你应该使用 $(document).ready() 事件来处理 dom 准备好后需要执行的任何事情

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T10:20:49.653

试试这个代码

```
<script defer type="text/javascript">
    // DOM Ready
    $(document).ready(function () {
        $('#slider').anythingSlider();
    });
</script> 
```

# session - 在 Jboss AS 7 重启/部署之间保持会话

> ID：10650665
> 
> 赞同：5
> 
> 时间：2012-05-18T10:09:38.987
> 
> 标签：session, deployment, jboss7.x

我们使用 JBOSS 7 AS，我一直想知道是否可以这样配置，以便在重启或部署后会话不会丢失。是否有任何可能性，假设在会话中没有存储不可序列化的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T16:06:32.370

重新启动：如果您设置了一个带有会话复制的集群，那么如果您连接的实例失败，您的会话应该由另一个 jboss 实例提供服务。

部署：部署通常需要很长时间（至少超过几分钟）；我没有看到跨部署维护会话状态的意义。

# ios - 如何在警报视图中存储文本字段中的 uitextfield 值？

> ID：10650667
> 
> 赞同：0
> 
> 时间：2012-05-18T10:09:59.187
> 
> 标签：ios, ios5, uitextfield, uialertview

我有一个带有文本字段的警报视图

```
UIAlertView* dialog = [[UIAlertView alloc] init];

    dialog.tag = 5;
    [dialog setDelegate:self];
    dialog.delegate = self;
    [dialog setTitle:@"Please set the quantity:"];
    [dialog setMessage:@"Quantity"];

    [dialog addButtonWithTitle:@"Cancel"];
    [dialog addButtonWithTitle:@"SET"];

    UITextField *nameField = [[UITextField alloc] initWithFrame:CGRectMake(20.0, 45.0, 245.0, 25.0)];
    [nameField setBackgroundColor:[UIColor whiteColor]];
    //nameField.keyboardType = UIKeyboardTypeDecimalPad;
    NSString *str = nameField.text;
    NSLog(@"%@",str);
    [dialog addSubview:nameField];
    [dialog show];
    [dialog release]; 
    [nameField release]; 
```

我试图在 alertviews 解雇后将文本字段的值存储为

```
- (void)alertView:(UIAlertView *)alertView  clickedButtonAtIndex:(NSInteger)buttonIndex {

if (alertView.tag ==5) {
        if(buttonIndex == 1)
        {
            UITextField* textField = (UITextField*)[alertView.subviews objectAtIndex:2];
            NSLog(@"%@",textField.text);
        }
    }
} 
```

但是文本字段返回 null，我应该给出的值或 objectatindex 是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:41:55.037

试试这个

```
- (void)alertView:(UIAlertView *)alertView  clickedButtonAtIndex:(NSInteger)buttonIndex     {

if (alertView.tag ==5) {
    if(buttonIndex == 1)
    {
        //UITextField* textField = (UITextField*)[alertView.subviews objectAtIndex:2];
        //NSLog(@"%@",textField.text);

        for (UIView *subview in [alertView subviews]) 
        {
            if ([subview isKindOfClass:[UITextField class]]) 
            {
                UITextField * textField =(UITextField *)subview;
                NSLog(@"%@",textField.text);
            }
        }

    }
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:30:29.817

使用方法实例方法`textFieldAtIndex:`。`UIAlertView`

```
- (void)alertView:(UIAlertView *)alertView  clickedButtonAtIndex:(NSInteger)buttonIndex {

if (alertView.tag ==5) {
        if(buttonIndex == 1)
        {
            UITextField* textField = [alertView.subviews textFieldAtIndex:2]; //make sure the index of the text field is correct.
            NSLog(@"%@",textField.text);
        }
    }
} 
```

**注意：**此方法适用于 iOS 5+

# android - 这是创建布局android的简单方法

> ID：10650668
> 
> 赞同：1
> 
> 时间：2012-05-18T10:10:00.700
> 
> 标签：android

我想为每个选项卡显示不同的布局，所以这是一种简单的显示方式

1.  创建不同的布局并添加或合并。
2.  只为不同的选项卡创建一个布局，并将可见性设置为消失和可见。

哪一种是简单的方法或其他方法，请告诉我。
这里附上屏幕：[http ://screencast.com/t/pEhf8g0b](http://screencast.com/t/pEhf8g0b)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:18:17.210

Create XML's for each tab, for example education.xml, activities.xml, and in the onCreate call that layout, for example in Education onCreate() call setContentView(R.layout.education); and for Activities call setContentView(R.layout.activities);

# asp.net - “https://www.google.com/accounts/Logout”清除浏览器中的所有 google cookie

> ID：10650673
> 
> 赞同：2
> 
> 时间：2012-05-18T10:10:32.673
> 
> 标签：asp.net, redirect, cookies, openid

我正在尝试将 Google 用作 OpenID。
用户可以使用他们的 Google 电子邮件成功登录我的网站。
**问题：**他们无法成功退出。

当用户点击我网站上的退出按钮时，我只能清除我网站本身发出的 cookie，而不能清除 Google 下发出的 cookie。
我用谷歌搜索并阅读了 stackoverflow 中的许多文章。我找到的解决方案是我自己无法删除 Google cookie。为了删除该 cookie，我必须将我的页面重定向到[https://www.google.com/accounts/Logout](https://www.google.com/accounts/Logout)，它会清除 Google 在我的浏览器中发布的 Cookie。

**另一个问题开始了：**该 url 清除了浏览器中的所有 google cookie。如果用户同时在同一浏览器中使用 Google 作为 OpenID 甚至 gmail 登录其他站点，则在注销我的站点时他们的 cookie 也会被删除.
有解决办法吗？

演示 在您自己的浏览器中尝试以下步骤：
1- 使用您自己的身份验证登录 Gmail
2\. 然后单击[https://www.google.com/accounts/Logout](https://www.google.com/accounts/Logout)。
将会发生的是您的 gmail 帐户将自动注销。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-22T12:20:59.587

据我从您的帖子中了解到，您希望将您的用户从 Google 中注销。您可以毫无问题地使用[https://www.google.com/accounts/Logout 。](https://www.google.com/accounts/Logout)

您可以使用以下功能为您执行此操作：

```
var logout = function()
{
    document.location.href = "https://www.google.com/accounts/Logout?continue=https://appengine.google.com/_ah/logout?continue=http://stackoverflow.com";
} 
```

你应该`http://stackoverflow.com`用你的主页替换。

这应该可以帮助您完成工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-25T16:40:14.567

这是所有 Google 帐户的退出 URL，对我来说效果很好：

[https://accounts.google.com/Logout?continue=https%3A%2F%2Faccounts.google.com%2FServiceLogin%3Fsacu%3D1&il=true&zx=icxpgruz0yao](https://accounts.google.com/Logout?continue=https%3A%2F%2Faccounts.google.com%2FServiceLogin%3Fsacu%3D1&il=true&zx=icxpgruz0yao)

希望它会帮助你。

# mysql - SQL：比较两个表中的列值是否相等

> ID：10650674
> 
> 赞同：3
> 
> 时间：2012-05-18T10:10:33.687
> 
> 标签：mysql, join, compare, equals

我正在使用 mysql 并且有两个具有相同架构的表：

**预审**

```
|id|accusedId|articleid|
------------------------
|1 |     1   |     1   |
|2 |     1   |     2   |
|3 |     1   |     3   |
|4 |     2   |     1   |
|5 |     2   |     2   | 
```

**审判**

```
|id|accusedId|articleid|
------------------------
|1 |     1   |     1   |
|2 |     1   |     2   |
|3 |     2   |     1   |
|4 |     2   |     2   | 
```

我想得到第一张和第二张桌子`accusedIds`都`articleIds`相等的那些。

上面的例子应该只返回被指控的 ID 2，因为被指控的 ID 1 在第二个表中没有 articleId 3。

我希望你明白我的意思。我目前正在写我的法律论文，而我进入 sql 的时间已经一去不复返了。当然，我已经做了一些研究，并尝试了几次连接，但我无法找到解决方案。希望你能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:26:50.820

尝试这样的事情：

```
select a.accusedId , sum(a.accusedid) as cnt_a, sum(coalesce(b.accusedId, 0)) as cnt_b
from a left join b on a.accusedId =  b.accusedId and a.articleId = b.articleId
group by accusedId
having cnt_a = cnt_b 
```

我什至没有运行它，所以它可能有点偏离，但给它一个鞭子。它所做的是为 a 中与 b 不匹配的行返回零，因此 HAVING 子句会将您的分组结果过滤到文章计数相等的那些结果。

# python - iframe（ajax）内容的python网络提取

> ID：10650676
> 
> 赞同：1
> 
> 时间：2012-05-18T10:10:46.187
> 
> 标签：python, web-scraping

我正在研究 python 网络抓取

网页被 iframe 污染，内容由 ajax(jquery) 填充

我曾尝试使用 iframe 的 src（使用 lxml，。），但它没有用

如何使用 python 模块提取 iframe 的内容

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:02:51.623

Selenium 将为您完成这项工作。看看[http://seleniumhq.org/docs/03_webdriver.html](http://seleniumhq.org/docs/03_webdriver.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T08:23:54.750

Splinter（http://splinter.cobrateam.info - 使用 selenium）使浏览 iframe 元素变得容易。至少只要 iframe 标记具有 id 属性。

# python - 在python中过滤目录

> ID：10650678
> 
> 赞同：1
> 
> 时间：2012-05-18T10:10:56.683
> 
> 标签：python, filesystems

我正在尝试获取所有文本和 Python 文件的过滤列表，如下所示

```
from walkdir import filtered_walk, dir_paths, all_paths, file_paths
vdir=raw_input ("enter director :")

files = file_paths(filtered_walk(vdir, depth=0,included_files=['*.py', '*.txt'])) 
```

我想要：

1.  知道在给定目录中找到的文件总数

    我尝试过类似的选项： Number_of_files= len (files) 或 for n in files n=n+1 但所有都失败了，因为“文件”是我在 python 文档上搜索但无法使用的称为“生成器”的对象它

2.  我还想在上面找到的文件列表中找到一个字符串，例如“import sys”，并将具有我的搜索字符串的文件名存储在名为“found.txt”的新文件中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:24:35.387

我相信这可以满足您的要求，如果我误解了您的规格，请在您进行测试后告诉我。我已经对目录进行了硬编码`searchdir`，因此您必须提示输入它。

```
import os

searchdir = r'C:\blabla'
searchstring = 'import sys'

def found_in_file(fname, searchstring):
    with open(fname) as infp:
        for line in infp:
            if searchstring in line:
                return True
        return False

with open('found.txt', 'w') as outfp:
    count = 0
    search_count = 0
    for root, dirs, files in os.walk(searchdir):
        for name in files:
            (base, ext) = os.path.splitext(name)
            if ext in ('.txt', '.py'):
                count += 1

            full_name = os.path.join(root, name)
            if found_in_file(full_name, searchstring):
               outfp.write(full_name + '\n')
               search_count += 1

print 'total number of files found %d' % count
print 'number of files with search string %d' % search_count 
```

使用`with`打开文件也将在以后自动为您关闭文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:24:03.613

python 生成器是一种特殊的迭代器。它一个接一个地产生一个项目，而不事先知道有多少项目。你只能在最后才知道。

不过，应该没问题

```
n = 0
for item in files:
    n += 1
    do_something_with(items)
print "I had", n, "items." 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T10:28:24.233

您可以将生成器（或通常称为迭代器）视为一次提供一个项目的列表。（不，它不是一个列表）。因此，除非您将它们全部看完，否则您无法计算它会给您多少物品，因为您必须一件一件地拿走它们。（这只是一个基本的想法，现在你应该能够理解文档了，我相信这里也有很多关于它们的问题）。

现在，对于您的情况，您使用了一种不太错误的方法：

```
count = 0
for filename in files:
    count += 1 
```

你做错了什么是采取`f`和增加，但`f`这里是文件名！递增是没有意义的，也是一个异常。

一旦你有了这些文件名，你必须打开每个单独的文件，阅读它，搜索你的字符串并返回文件名。

```
def contains(filename, match):
    with open(filename, 'r') as f:
        for line in f:
            if f.find(match) != -1:
                return True
    return False 
```

match_files = [] for filename in files: if contains(filename, "import sys"): match_file.append(filename) # or a one-liner: match_files = [f for f in files if contains(f, "import sys" )]

现在，作为生成器的示例（在阅读文档之前不要阅读此内容）：

```
def matching(filenames):
    for filename in files:
        if contains(filename, "import sys"):
            # feed the names one by one, you are not storing them in a list
            yield filename
# usage:
for f in matching(files):
    do_something_with_the_files_that_match_without_storing_them_all_in_a_list() 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-18T10:24:00.823

你应该试试 os.walk

```
import os
dir = raw_input("Enter Dir:")
files = [file for path, dirname, filenames in os.walk(dir) for file in filenames if file[-3:] in [".py", ".txt"]]

nfiles = len(files)
print nfiles 
```

要在文件中[搜索字符串，请查看在 txt 文件 Python中搜索字符串](https://stackoverflow.com/questions/4940032/search-for-string-in-txt-file-python)

将这两者结合起来，您的代码将类似于

```
import os
import mmap

dir = raw_input("Enter Dir:")
print "Directory %s" %(dir) 
search_str = "import sys" 
count = 0
search_count = 0
write_file = open("found.txt", "w")
for dirpath, dirnames, filenames in os.walk(dir):
    for file in filenames:
        if file.split(".")[-1] in ["py", "txt"]:
            count += 1
            print dirpath, file
            f = open(dirpath+"/"+file)
            #            print f.read()

            if search_str in f.read():
                search_count += 1
                write_file.write(dirpath+"/"+file)

write_file.close()
print "Number of files: %s" %(count)
print "Number of files containing string: %s" %(search_count) 
```

# php - xml 到 php 并解析编码错误

> ID：10650683
> 
> 赞同：0
> 
> 时间：2012-05-18T10:11:18.883
> 
> 标签：php, xml, encoding, cp1251

我正在从 url 解析 xml 文件（在下面的代码中），使用**file_get_contents()**函数和 simpleXML，将数据插入表中，我做得很好，但我有编码问题（俄语单词）我明白了 -> **Р§ РµСЂРЅРѕРіРѕСЂРёСЏ** ; 文件和数据库编码设置为 utf-8；

```
require_once 'mysql_connect.php';
/**
 *
 *
 */
error_reporting(E_ALL);
$sql = "CREATE TABLE IF NOT EXISTS `db_countries` (
   `id` int(11) unsigned NOT NULL auto_increment,
   `countrykey` varchar(255) NOT NULL default '',
   `countryname` varchar(255) NOT NULL default '',
   `countrynamelat` varchar(500) NOT NULL default '',
   PRIMARY KEY  (`id`)
   ) ENGINE=MyISAM  DEFAULT CHARSET=utf8";

mysql_query($sql);

$data = file_get_contents("http://www2.turtess-online.com.ua/export/dictionary/countries/");
$xml  = new SimpleXMLElement($data);

echo $xml->body->dictionary->element["countryName"];

foreach ($xml->body->dictionary->element as $element) {
    $countryname    = mysql_real_escape_string($element["countryName"]);
    $countrynamelat = mysql_real_escape_string($element["countryNameLat"]);
    $countrykey     = $element["countryKey"];

    if ($countrykey) {
        $q      = $insert = 'INSERT INTO db_countries (countrykey, countryname, countrynamelat) VALUES ("' . $countrykey . '", "' . $countryname . '", "' . $countrynamelat . '")';
        mysql_query($q);
    } else {
        echo "not valid key of country";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:19:55.230

确保您也插入 Unicode 内容，数据库字符集没有进行任何“自动”转换。

作为替代方案，我建议`utf8_encode($countryname)` 如下：

```
if ($countrykey) {
    $q      = $insert = 'INSERT INTO db_countries (countrykey, countryname, countrynamelat) VALUES ("' . $countrykey . '", "' . cp1251_to_utf8($countryname) . '", "' . $countrynamelat . '")';
    mysql_query($q);
} else {
    echo "not valid key of country";
} 
```

更新：确实，XML 源文件显示了 Windows 1251 字符集

**更新（2）：**我针对这个漂亮的小函数测试了代码，它终于可以工作了：）

```
function cp1251_to_utf8($s) 
   { 
   if ((mb_detect_encoding($s,'UTF-8,CP1251')) == "WINDOWS-1251") 
     { 
     $c209 = chr(209); $c208 = chr(208); $c129 = chr(129); 
     for($i=0; $i<strlen($s); $i++) 
       { 
       $c=ord($s[$i]); 
       if ($c>=192 and $c<=239) $t.=$c208.chr($c-48); 
       elseif ($c>239) $t.=$c209.chr($c-112); 
       elseif ($c==184) $t.=$c209.$c209; 
       elseif ($c==168)    $t.=$c208.$c129; 
       else $t.=$s[$i]; 
       } 
     return $t; 
     } 
   else 
     { 
     return $s; 
     } 
    } 
```

归功于[马丁·彼得罗夫](http://www.php.net/manual/fr/ref.iconv.php#94143)

# iphone - 重新加载特定 uitableview 单元格的数据

> ID：10650684
> 
> 赞同：1
> 
> 时间：2012-05-18T10:11:37.167
> 
> 标签：iphone, objective-c, ios, uitableview

> **可能重复：**
> [是否可以刷新 UITableView 中的单个 UITableViewCell？](https://stackoverflow.com/questions/4448321/is-it-possible-to-refresh-a-single-uitableviewcell-in-a-uitableview)

抱歉，如果这个问题很愚蠢，但不是使用`[mytableview reloaddata]`，我们如何才能重新加载特定的数据`UITableViewCell`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-18T10:13:24.917

你想要 UITableView 的[`reloadRowsAtIndexPaths: withRowAnimation:`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/reloadRowsAtIndexPaths:withRowAnimation:)方法。我已经为您链接了文档。

您需要提供的只是要重绘的单元格的索引路径。

# webserver - 如何使用 daemontools 监督网络服务器？

> ID：10650686
> 
> 赞同：5
> 
> 时间：2012-05-18T10:11:44.733
> 
> 标签：webserver, daemon, smalltalk, start-stop-daemon

我应该如何编写 daemontools 主管的脚本？

我已经开始使用 DJ Bernsteins 的 daemontools 来保持一些进程运行并且工作正常。但是现在我需要监控这些过程的一些附加条件，但我没有找到关于如何做到这一点的好信息。

我的场景是我有一些为 Web 应用程序（pharo smalltalk 虚拟机）运行的进程，它们响应 http，每个进程都在其端口中（用于负载平衡）。我想以某种方式对它们进行 ping 操作，以验证它们不仅在运行，而且还在响应 http 请求。如果他们没有以某种方式响应超过 30 秒的请求，则应将其视为崩溃并简单地重新启动。

这甚至可以使用 daemontools 吗？如果是这样，我应该如何编写这个脚本，我应该把它放在哪里？或者这方面的文档在哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T09:18:46.803

最简单的解决方案是使用休眠 30 秒的脚本创建另一个 daemontool 任务，然后测试服务是否存在（例如使用 wget 或 curl）。如果服务没有及时响应，您可以重新启动服务 ( `svc -t yourapp`) 和/或发送通知。新服务的运行脚本看起来很简单：

```
#!/bin/sh
sleep 30
if ! wget --quiet --timeout=5 --delete-after "http://yourapp.com/" ; then
  svc -t /etc/service/yourapp
fi 
```

我对[Munin](http://munin-monitoring.org/)等工具也有很好的体验。同样，您需要提供一个脚本来提供有关图像状态的信息。如果您使用 REST 服务设置图像，您甚至可以提供非常有趣的指标，例如活动会话、非活动会话、gc 参数、内存消耗、数据库统计信息……然后该工具会随着时间的推移绘制漂亮的图表并让您指定边界当事情表现不佳时得到通知。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T01:37:23.537

要检测服务是否响应，您可以使用 curl（非常适合 HTTP 和命令行/shell 脚本）

```
curl --connect-timeout 10 http://8.8.8.8 
curl: (28) connect() timed out! 
```

你可以编写更复杂的东西，比如检查响应是否为 200（OK）等。

# eclipse - 如何使用 Eclipse 在 SVN 中制作标签？

> ID：10650689
> 
> 赞同：7
> 
> 时间：2012-05-18T10:12:00.450
> 
> 标签：eclipse, svn, tags

我正在使用 eclipse 并且`Subversion (SVN)`是我的新版本控制。

到目前为止，我曾经`Concurrent Versions System (CVS)`用作我的版本控制，并且在部署操作之后，我曾经`Tag as Version`在 Eclipse 中像这样标记我的项目：
Team --> 'Tag as Version..' --> Version-XYZ

我现在怎么做`SVN`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-18T10:39:43.507

通常，SVN 有三个根目录，

1.  树干
2.  标签
3.  分支机构

在 SVN 服务器中，对于每个项目，您都具有与上述相同的目录结构。

“主干”是您保存不断开发的代码库的地方。

'tags' 用于您指定的相同目的。即用于版本控制。

“分支”用于功能开发/个人开发之类的事情。

例如，假设我正在开发一个数据库同步应用程序，它将作为 Pilot 版本、Moonshine 版本、Kilimanjaro 版本、Great 版本等发布。

我从“主干”开始并继续我的开发，比如说 2 个月，那时我已经准备好发布 Pilot 了。

然后我创建一个“主干”的“标签”，我可以将其命名为“飞行员标签”，它将发布给客户。

现在我的下一个版本“Moonshine release”的主要功能开发将在“trunk”中继续。如果他们是我的“试点版本”中的任何即时错误修复或显示停止者，这些将在“试点标签”中完成并立即发布给客户。

然而，由于上述修复不在我的“主干”代码中，因此稍后（在发布 Moonshine 版本之前）我会将在“试点标签”中所做的修改“合并”回“主干”。

在这里，可能会出现冲突，因为在“Pilot tag”（用于前面提到的错误修复）和“trunk”（用于新版本的功能修改/开发）中可能已经修改了相同的代码行。在这种情况下，您必须仔细检查冲突、编辑任何此类冲突并接受更改。

TortoiseSVN 是使用 SVN 的主要客户端工具。它将功能直接嵌入到您的 Windows 右键菜单中，以实现上述所有功能，如提交、更新、合并、分支（即标记或分支）等。

对于冲突解决，我个人更喜欢“Beyond Compare”，这是您必须购买的第三方应用程序。您可以设置 TortoiseSVN 来调用 Beyond Compare 作为解决冲突的应用程序，它比 TortoiseSVN 工具中内置的冲突编辑器要好得多且用户友好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-18T10:18:37.593

You would need to install an Eclipse Subversion plugin like [subclipse](http://subclipse.tigris.org/) or [Subversive](http://www.eclipse.org/subversive/). This will provide the same facility as that available for CVS.

For instance, [here is the documentation](http://www.eclipse.org/subversive/documentation/teamSupport/SVNaction/tag.php) on how to tag using Subversive.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-12T14:08:56.283

要标记，使用`Eclipse`with `SubClipse`：

*   选择团队、分支/标签，然后单击“选择”按钮并深入到相应的项目中，然后单击“标签”目录，并深入到您的最后一个标签名称或您计划创建的任何类似名称。

*   完整的 URL 被复制到栏中，然后您可以对其进行编辑，将最右边的标签名称部分更改为任何新的标签名称。

*   点击下一步，从 HEAD 中选择（HEAD 是指您在上一页已经建立的 repo 路径，因此实际上可能是分支的负责人）。

*   输入评论，例如`'tagging <appName> Release <for reason> version x.y.z'`

结束 -

您可以在此之前或之后，`SVN Console`从页面右下角的下拉菜单中打开 Eclipse ' '，查看生成的最新 SVN 命令及其结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-20T18:16:43.423

SVN 中的每次签入都会创建一个新的修订号。SVN 修订号应该与您的标签相同。记住生产版本的 SVN 修订号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T15:24:53.700

Subversion 中的标记和分支与 CVS 不同。在 Subversion 中，“创建标签”意味着将修订（通常是 HEAD，但也可以是其他修订）**复制到“标签”目录中的新目录。**这就是为什么当您转到 时`Team->Branch/Tag...`，Eclipse 会要求您提供要复制到的 URL。

查看[此页面](http://svnbook.red-bean.com/nightly/en/svn.branchmerge.tags.html)以获取有关 Subversion 中标记的更详细说明。

为了帮助您了解事情是如何以“SVN 方式”完成的，我建议您先从命令行练习 Subversion 的使用，然后再在 Eclipse 上尝试它。或者，如果没有，至少在 Eclipse 中打开一个 SVN 控制台以查看它运行的命令——您会看到标记操作确实是一个`svn copy`.

# google-app-engine - Google App Engine Jinja2 和 Markupsafe

> ID：10650693
> 
> 赞同：3
> 
> 时间：2012-05-18T10:12:24.690
> 
> 标签：google-app-engine, jinja2

谷歌表示 MarkupSafe 让 jina2 在[这里运行得更快](https://developers.google.com/appengine/docs/python/tools/libraries27)

我已经像这样将它添加到我的 Yaml 文件中。

```
libraries:
- name: webapp2
  version: "2.5.1"
- name: jinja2
  version: latest
- name: markupsafe
  version: latest 
```

Jina2 说它会检查是否[在此处安装了 markupsafe](http://jinja.pocoo.org/docs/faq/?highlight=markupsafe)

我的问题是，我怎么知道它在起作用？我通过我的 jinja 表单插入了一堆 html，但它没有被转义。简而言之，我已经阅读了文档，但找不到关于 markupsafe 的作用以及为什么需要它的明确答案。我拥有的唯一信息片段是 jinja2 会寻找它并使 jinja 更快。我不知道它是否真的有效。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-20T03:04:01.547

AFAIK 标记安全不会影响 jinja2 语义，只会影响其性能。因此，确定它是否有效的唯一方法就是计时。或者你可以停止担心。:-) app.yaml 语法看起来不错。

如果你想让 jinja2 转义你的变量，你必须在创建 Environment 时打开 autoescape，像这样：

```
env = jinja2.Environment(
  loader=jinja2.FileSystemLoader(os.path.dirname(__file__)),
  autoescape=True) 
```

# actionscript-3 - Flash CS5 动作脚本 3

> ID：10650695
> 
> 赞同：0
> 
> 时间：2012-05-18T10:12:37.963
> 
> 标签：actionscript-3, flash, if-statement

在我正在使用的游戏中遇到 if 语句有问题，

我们有以下声明。

```
var count:int;

public function goodguess(event:Timer){
count++;
if (count == 2){
trace('well done');
root.gotoAndStop(4);
}

//do other stuff
} 
```

它在调试器中运行跟踪，但是它不会发送到我告诉它的帧。

任何建议都会很棒！谢谢

# iphone - Sencha Touch：如何在左侧添加一个表格视图作为 rootView 以及在 sencha touch 的这个拆分视图的右侧添加一个带有按钮的视图作为 detailsView

> ID：10650697
> 
> 赞同：1
> 
> 时间：2012-05-18T10:12:40.833
> 
> 标签：iphone, cordova, sencha-touch, extjs, sencha-touch-2

我已经**`iphone`** 使用***`sencha touch`***&实现了一个应用程序**`phone gap`**。

**使用以下代码在SRC 文件中的 index.js 中**使用以下代码实现**拆分视图**，其中包含两条文本消息.. 如下图所示

 **现在我需要*在左侧根视图上添加一个表格视图，在右侧详细信息视图上添加一个按钮。*如何？

提前致谢

```
Ext.ns('sink', 'demos', 'Ext.ux');
Ext.ux.UniversalUI = Ext.extend(Ext.Panel,
                                {
                                  fullscreen: true,
                                  layout: 'hbox',
                                  items:

                                  [
                                     //Root view 
                                     {
                                       xtype: 'panel',
                                       html: 'TableView/Rootview goes here ...',
                                       flex: 1
                                   },

                                    //Details view
                                   {
                                       xtype: 'panel',
                                        html: 'Message Detail view goes here ....',
                                       flex: 2
                                   }
                                  ]

                                }); 
```

![在此处输入图像描述](../Images/2c6159e88ee1d178c2e8c62aea190555.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:48:51.487

目前你`rootView`和`detailView`都是`xtype: 'panel'`。为了实现您的需要，您必须对这两项进行一些修改：

*   对于根视图，实际上它被称为`GridView`，请阅读此内容以获取更多详细信息：[http ://www.sencha.com/forum/showthread.php?150431-Ext.ux.touch.grid](http://www.sencha.com/forum/showthread.php?150431-Ext.ux.touch.grid)
*   对于详细视图，使用按钮创建视图很简单，例如（只是示例，可能不完全是您需要的）：

> ```
> {
>     xtype: 'container',
>     items: [
>       {xtype: 'button', text: 'my button'},
>       {xtype: 'panel', text: 'detail panel'}.
>     ]
> } 
> ```**

# ios5 - 实现我不理解的声音时的黄色警告三角形

> ID：10650699
> 
> 赞同：0
> 
> 时间：2012-05-18T10:12:44.980
> 
> 标签：ios5, xcode4.3, audio

当我在我的应用程序中实现声音时，我总是会出现几个带有警告的黄色警告三角形：

“函数“音频服务创建系统 soundID”的隐式声明在 C99 中无效”

它不会影响我的应用程序中的任何内容我只是想知道它是否在我的代码中以及我应该解决的问题？

```
CFBundleRef mainBundle = CFBundleGetMainBundle();
CFURLRef soundFileURLRef;
soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"btnclick", CFSTR 
                                        ("mp3"), NULL);
                                        UInt32 soundID;
                                        AudioServicesCreateSystemSoundID (soundFileURLRef, &soundID);
                                        AudioServicesPlaySystemSound (soundID); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T11:41:59.850

编译器没有找到 AudioServices 函数的声明并抱怨这一点。

这些函数的文档说明了它们来自哪个框架，所以导入...

```
#import <AudioToolbox/AudioToolbox.h> 
```

...应该摆脱警告。

# c# - 禁用telerik：RadEditor c#

> ID：10650703
> 
> 赞同：0
> 
> 时间：2012-05-18T10:12:54.910
> 
> 标签：c#, telerik, radeditor

如何禁用 Telerik:RadEditor？我给了 editor.enabled= false 但控件不可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:37:09.343

尝试使用`editor.enableEditing(false)`

[在这里](http://www.telerik.com/community/forums/community-forums/about-telerik/disable-radeditor-using-javascript-on-client-side.aspx)查看 Telerik 论坛。问题在于从客户端禁用编辑器。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-03T14:21:09.603

在你可以做的代码隐藏中

```
editor.EditModes = EditModes.Preview; 
```

这将强制编辑器仅处于预览模式，并且不允许用户将模式更改为设计或 Html 模式。这会禁用工具栏按钮，并且编辑区域是只读的。

# python - Python，双自动枚举默认字典

> ID：10650706
> 
> 赞同：4
> 
> 时间：2012-05-18T10:13:11.867
> 
> 标签：python, nested, hashmap, defaultdict

为了优化一些代码，我使用以下内容：

```
a = defaultdict(lambda: len(a))
a[0] = 0
a[1] = 1
a[7] = 2
... 
```

现在我的问题是我需要一个嵌套的默认字典，即

```
b = defaultdict(lambda: defaultdict(lambda: len(b[?]))
b[0][0] = 0
b[0][1] = 1
b[1][0] = 0
b[1][1] = 1
... 
```

提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T10:21:44.550

```
def enumdict():
    a = defaultdict(lambda : len(a))
    return a

b = defaultdict(enumdict) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T11:55:05.447

如果你想让它成为一个类：

```
class CountDict(defaultdict):
    def __init__(self):
        defaultdict.__init__(self, self.default_factory)

    def default_factory(self):
         sub = defaultdict()
         sub.default_factory = sub.__len__
         return sub 
```

您通常不能在 lambda 中执行此操作，因为您需要将子默认 dict 分配给一个变量，以便之后能够获取其 len，这在 lambda 中是不可能的。@Duncan 想出了一个解决方法，使用列表理解来充当分配。干得好:)但不要使用它.. :D

# jquery - 使用jquery打印预览功能

> ID：10650711
> 
> 赞同：1
> 
> 时间：2012-05-18T10:13:26.657
> 
> 标签：jquery, asp.net, print-preview

我在用户控件和母版页中使用 jquery 脚本来实现模式弹出功能。问题是当我在 jquery 中使用打印预览功能来捕获整个页面时，jquery 1.7.1.min.js 等基本脚本会发生冲突并且打印预览功能不起作用。如果我删除用户控件中的脚本引用，我的功能将不起作用，但打印预览功能起作用。

我试过像dis。我删除了用户控件中的脚本引用，并在母版页中添加了类似 dis 的内容。

```
var control = new HtmlGenericControl("script");
control.Attributes.Add("type", "text/javascript");
control.Attributes.Add("src", Page.ResolveClientUrl("../Scripts/jquery-1.7.1.min.js"));
this.Page.Header.Controls.Add(control); 
```

我将 jQuery Print Previw Plugin v1.0.1 用于打印预览功能并为预览进行了编辑。但我仍然得到错误

```
$("a.print-preview").printPreview is not a function
[Break On This Error] $('a.print-preview').printPreview(); 
```

和打印预览功能不起作用..有什么建议吗？

编辑：我发现了一点。我用 $.noConflict(); 并发现打印预览功能正在运行，但页面中的其他一些脚本功能不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:21:58.747

您的页面似乎没有看到该插件。确保正确添加了打印插件。

# javascript - Meteor on Rails 在 MVVM 模型中的集成

> ID：10650716
> 
> 赞同：4
> 
> 时间：2012-05-18T10:13:35.090
> 
> 标签：javascript, ruby-on-rails, ruby, mvvm, meteor

有 Rails/ [Meteor](http://meteor.com)集成的经验吗？

我的想法是基于现有的 Rails/MongoDB 应用程序顺利集成（添加）小型和轻型微应用程序。

目前[Meteor](http://meteor.com)是相当新的，但正在迅速崛起...... arountd 的唯一例子似乎只是 MV* 的一部分，那么在 Rails 上拥有一个后端 MVC 和在 JS Meteor 上拥有一个客户端 MVC 怎么样？

有什么经验吗？

更新

我知道 Meteor 的“[愿景](http://meteor.com/about/mission)”，但我已经有了一个完全在 Rails/MongoID 上编写的应用程序。我不想把所有东西都扔掉并从头开始重新启动，而是想在分布式 Web 服务框架中一次添加一小块新的应用程序/功能。例如，虽然我在 Rails 上有[http://examplesite.com/trends](http://examplesite.com/trends) ，但我想开始在 Meteor 上开发[http://examplesite.com/categories](http://examplesite.com/categories)，但 Meteor 应该能够调用现有的 MongoID rails 模型来处理数据。 ..所以我正在寻找最终将 Meteor 与 Rails/MongoID 集成以获取数据的最佳方法。

这样做的最好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T10:27:11.690

查看[Backbone.js](https://github.com/documentcloud/backbone)，它有控制器并且可以在 Meteor 中使用。

除此之外，Meteor 并不打算联系后端 Rails。虽然这是可能的，但它会完全违背 Meteor 的初衷。除此之外，还有足够的教程可用。

# sql-server - 当 Distinct 和 Group By 的表现不同时？

> ID：10650719
> 
> 赞同：21
> 
> 时间：2012-05-18T10:13:54.827
> 
> 标签：sql-server, tsql, group-by, distinct

我知道在简单查询中 Distinct 和 Group By 的性能和执行计划几乎相同。

例如

```
SELECT Name FROM NamesTable GROUP BY Name
SELECT DISTINCT Name FROM NamesTable 
```

但是我读过在某些情况下它们的性能会有所不同，例如在子查询中等等？

那么，您能否举一些例子或解释一些他们的表现不同的场景？

非常感谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-18T11:04:32.637

如果您在字段列表中包含计算值，您将看到执行计划中的差异。

```
select Value,
       getdate()
from YourTable
group by UnitID

select distinct
       Value,
       getdate()
from YourTable 
```

查询在`group by`计算标量值之前进行聚合。该`distinct`查询在聚合之前计算标量值。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-18T12:11:29.677

这里有 2 个示例，一个用于产生不同的结果，另一个用于产生不同的性能：

![产生不同性能的例子](../Images/b488606d2711e01763e74c690f0d12b1.png)

第二个例子：

![产生不同结果的示例](../Images/1c329f3b609c17661ac41de876c206f0.png)

# iphone - uiwebview 上两个 html 文件之间的 iOS 转换

> ID：10650723
> 
> 赞同：0
> 
> 时间：2012-05-18T10:14:14.503
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我有一个适合全屏并加载 html 文件的 webview。然后加载另一个 html 文件，我想在这些文件之间应用转换。可能的？由于任何其他原因，不能在包含另一个 web 视图的两个视图之间切换。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:42:45.857

您可以在 a 中插入`UIWebView`a `UIScrollView`。然后，当您必须加载新页面时，您将创建另一个页面，`UIWebView`它将`x`是`width`当前的`UIWebView`，然后`addSubview`是新`UIWebView`的滚动视图，并更新滚动视图`contentSize`。然后调用scrollview 的[scrollRectToVisible:animated](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/occ/instm/UIScrollView/scrollRectToVisible%3aanimated%3a)方法到新的web view 的frame，这样就完成了过渡。
另外，如果你不想回到上一页，你可以销毁之前的 UIWebview 并重置`contentSize`滚动视图的初始状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:54:33.867

如何“加载另一个 html 文件”？通过第一个网页中的事件？

如果您正在编写 html 页面，您可以使用[jQuery 移动转换](http://jquerymobile.com/demos/1.1.0-rc.1/docs/pages/page-transitions.html)吗？

[看这里](http://blog.codiqa.com/2012/03/jquery-mobile-is-awesome-part-2-pages-and-transitions/)

即使您没有编写 html 页面，您也可以为此注入 javascript。

# django - Django-haystack - 突出显示 NgramField

> ID：10650728
> 
> 赞同：0
> 
> 时间：2012-05-18T10:14:34.203
> 
> 标签：django, solr, django-haystack

我正在尝试使用突出显示：

```
self.results = self.results.highlight()
print self.results[0].highlighted['heading'][0] 
```

如果字段**标题**是搜索索引中的 CharField，这将是完美的。

但是我需要将字段**标题**设置为 NgramField（因为我需要以一个字母开头的搜索），但我遇到了问题：

查询：老建筑 结果：什么是*老旧*建筑？

我能做些什么？

谢谢！

# facebook - Facebook Graph API：在一个请求中获取更大的图片

> ID：10650730
> 
> 赞同：90
> 
> 时间：2012-05-18T10:14:35.637
> 
> 标签：facebook, facebook-graph-api

我目前正在使用[Graph API Explorer](https://developers.facebook.com/tools/explorer/)进行一些测试。这是一个很好的工具。

我想获取用户的好友列表，包括好友的姓名、ID 和图片。所以我输入：

```
https://graph.facebook.com/me/friends?fields=id,picture,name 
```

但是图片只有 50x50，我想要一个更大的这个请求。

是否可以 ？

* * *

## 回答 #1

> 赞同：208
> 
> 时间：2012-10-04T18:53:03.857

如Facebook 上的[这个错误中所述，您现在还可以通过新的 API“](http://developers.facebook.com/bugs/129804577163441)[字段扩展](https://developers.facebook.com/docs/reference/api/field_expansion/)”语法请求特定的图像大小。

像这样：

```
https://graph.facebook.com/____OBJECT_ID____?fields=picture.type(large) 
```

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2014-11-18T23:28:05.357

让所有朋友（当然也使用该应用程序）获得正确图片尺寸的最佳方法是使用[field expansion](https://developers.facebook.com/docs/graph-api/using-graph-api/v2.2#fieldexpansion)，或者使用尺寸标签之一（方形、小、正常、大）：

```
/me/friends?fields=picture.type(large) 
```

*（编辑：这不再起作用了）*

...或者您可以指定宽度/高度：

```
me/friends?fields=picture.width(100).height(100) 
```

顺便说一句，你也可以这样写：

```
me?fields=friends{picture.type(large)} 
```

* * *

## 回答 #3

> 赞同：67
> 
> 时间：2012-05-18T12:14:01.563

不过，您不需要拉“图片”属性。还有更方便的方法，您唯一需要的是用户名，请参见下面的示例；

[https://graph.facebook.com/user_id/picture?type=large](https://graph.facebook.com/user_id/picture?type=large)

ps 类型定义你想要的大小

请记住，使用具有基本权限的令牌，/me/friends 将仅返回具有 id+name 属性的朋友列表

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2017-10-30T14:28:45.393

您可以以像素为单位设置图片的大小，如下所示：

```
https://graph.facebook.com/v2.8/me?fields=id,name,picture.width(500).height(500) 
```

以类似的方式，`type`可以使用参数

```
{user-id}/?fields=name,picture.type(large) 
```

从[文档](https://developers.facebook.com/docs/graph-api/reference/user/picture/)

> 类型枚举{小，正常，专辑，大，方形}

* * *

## 回答 #5

> 赞同：34
> 
> 时间：2016-11-18T06:32:27.140

将字段数组更改`id,name,picture`为`id,name,picture.type(large)`

```
https://graph.facebook.com/v2.8/me?fields=id,name,picture.type(large)&access_token=<the_token> 
```

结果：

```
{
   "id": "130716224073524",
   "name": "Julian Mann",
   "picture": {
      "data": {
         "is_silhouette": false,
         "url": "https://scontent.xx.fbcdn.net/v/t1.0-1/p200x200/15032818_133926070419206_3681208703790460208_n.jpg?oh=a288898d87420cdc7ed8db5602bbb520&oe=58CB5D16"
      }
   }
} 
```

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2012-10-30T12:04:57.843

如果需要，您也可以尝试根据高度或宽度获取图像

[https://graph.facebook.com/user_id/picture?height=](https://graph.facebook.com/user_id/picture?height=)

或者

[https://graph.facebook.com/user_id/picture?width=](https://graph.facebook.com/user_id/picture?width=)

默认情况下，这些值以像素为单位，您只需要提供 int 值

* * *

## 回答 #7

> 赞同：20
> 
> 时间：2014-12-17T11:18:45.870

我广泛研究了 Graph API Explorer 并最终找到了 full_picture

```
https://graph.facebook.com/v2.2/$id/posts?fields=picture,full_picture 
```

PS 我注意到 full_picture 并不总是提供我想要的全尺寸图像。“附件”确实

```
https://graph.facebook.com/v2.2/$id/posts?fields=picture,full_picture,attachments 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2012-05-18T12:14:30.520

嗯……我想我找到了解决办法。

事实上，in 可以只是请求

```
https://graph.facebook.com/me/friends?fields=id,name 
```

根据[http://developers.facebook.com/docs/reference/api/](http://developers.facebook.com/docs/reference/api/)（“图片”部分），可以使用用户 ID 构建个人资料照片的 url

例如，假设用户 id 在 $id 中：

```
"http://graph.facebook.com/$id/picture?type=square"
"http://graph.facebook.com/$id/picture?type=small"
"http://graph.facebook.com/$id/picture?type=normal"
"http://graph.facebook.com/$id/picture?type=large" 
```

但这不是最终的图像 URL，所以如果有人有更好的解决方案，我会很高兴知道 :)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-07-18T09:53:48.150

您可以在对 Facebook 图形 API 的请求中指定`width`& ：`height``http://graph.facebook.com/user_id/picture?width=500&height=500`

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-01-25T15:39:40.377

From `v2.7`,`/<picture-id>?fields=images`会给你一个不同大小的图像列表，第一个元素是全尺寸图像。

我不知道一次处理多个图像的任何解决方案。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-03-23T15:27:15.863

当我提出请求时出现此错误`picture.type(full_picture)`：

> “（＃100）对于字段'图片'：类型必须是以下值之一：小，正常，相册，大，方形”

当我用`picture.type(album)`and发出请求时`picture.type(square)`，用 50x50 像素大小的图像响应我。

当我使用 发出请求时`picture.type(large)`，会以 200x200 像素大小的图像响应我。

当我用 发出请求时`picture.width(800)`，用 477x477 像素大小的图像响应我。

，`picture.width(250)`响应 320x320。

，`picture.width(50)`响应 50x50。

，`picture.width(100)`响应 100x100。

，`picture.width(150)`响应 160x160。

我认为当用户第一次添加该照片时，facebook 会给出不同大小的图像。

> 我在这里看到的用于请求用户图像的 API 不支持调整请求的图像大小。我认为它给出了最接近的图像尺寸。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2020-09-29T00:11:30.670

您可以按如下方式调整其大小。

采用：

```
https://graph.facebook.com/USER_ID?fields=picture.type(large) 
```

For details: [https://developers.facebook.com/docs/graph-api/reference/user/picture/](https://developers.facebook.com/docs/graph-api/reference/user/picture/)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2013-12-11T15:03:58.067

在 Graph 响应中找到的图片 URL（“ [http://photos-c.ak.fbcdn.net/](http://photos-c.ak.fbcdn.net/) ”）中，只需将默认的“_s.jpg”替换为“_n.jpg”（？正常大小）或“_b.jpg”（？大尺寸）或“_t.jpg”（缩略图）。

Hacakable URLs/REST API 让 Web 变得更好。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-08-04T11:51:00.603

rest-fb 用户（方形图像，更大分辨率）： Connection myFriends = fbClient.fetchConnection("me/friends", User.class, Parameter.with("fields", "public_profile,email,first_name,last_name,gender,picture .width(100).height(100)"));

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-04-16T13:20:16.137

我认为到目前为止，获得朋友大照片的唯一方法是使用 FQL。首先，您需要获取朋友列表：

[https://graph.facebook.com/me/friends](https://graph.facebook.com/me/friends)

然后解析这个列表并提取所有朋友`ids`。当你拥有它时，只需执行以下 FQL 查询：

```
SELECT id, url FROM profile_pic WHERE id IN (id1, id2) AND width=200 AND height=200 
```

`200`这里只是一个示例尺寸，您可以输入任何内容。您应该得到以下响应：

```
{
  "data": [
    {
      "id": ..., 
      "url": "https://fbcdn-profile-a.akamaihd.net/..."
    }, 
    {
      "id": ..., 
      "url": "https://fbcdn-profile-a.akamaihd.net/..."
    }
  ]
} 
```

每个网址都是指向 200x200 像素图像的链接。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-07-15T07:09:14.087

我有同样的问题，但我尝试了这个来解决我的问题。它返回大图像。这不是完美的修复，但你可以试试这个。

**[https://graph.facebook.com/v2.0/OBJECT_ID/picture?access_token=XXXXX](https://graph.facebook.com/v2.0/OBJECT_ID/picture?access_token=XXXXX)**

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-07-28T21:28:30.177

尝试通过更改每个 json 对象中 url 的像素大小来更改图像的大小，如下所示：

例如，我将**s480x480**更改为**s720x720**

之前： [https ://fbcdn-sphotos-ca.akamaihd.net/hphotos-ak-xfp1/t1.0-9/q71/s480x480/10454308_773207849398282_283493808478577207_n.jpg](https://fbcdn-sphotos-c-a.akamaihd.net/hphotos-ak-xfp1/t1.0-9/q71/s480x480/10454308_773207849398282_283493808478577207_n.jpg)

之后： [https ://fbcdn-sphotos-ca.akamaihd.net/hphotos-ak-xfp1/t1.0-9/q71/s720x720/10454308_773207849398282_283493808478577207_n.jpg](https://fbcdn-sphotos-c-a.akamaihd.net/hphotos-ak-xfp1/t1.0-9/q71/s720x720/10454308_773207849398282_283493808478577207_n.jpg)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-11-30T09:08:56.637

JS 风格的变体。只需设置巨大的大图片宽度，您将获得最大的变体。

```
FB.api(
  '/' + userId,
  {fields: 'picture.width(2048)'},
  function (response) {
    if (response && !response.error) {
      console.log(response.picture.data.url);
    }
  }
); 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-04-26T13:22:13.550

您可以使用 full_picture 代替图片键来获取全尺寸图像。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-09-26T17:01:45.247

**注意**：从 Graph API v8.0 开始，您`must provide the access token`对每个 UserID 请求执行。

**命中图形 API：**

```
https://graph.facebook.com/<user_id>/picture?height=1000&access_token=<any_of_above_token> 
```

**使用火力基地：**

```
FirebaseUser user = mAuth.getCurrentUser();
String photoUrl = user.getPhotoUrl() + "/picture?height=1000&access_token=" +
  loginResult.getAccessToken().getToken(); 
```

`registerCallback`你就像这样得到令牌

```
 LoginManager.getInstance().registerCallback(mCallbackManager, new FacebookCallback<LoginResult>() {
        @Override
        public void onSuccess(LoginResult loginResult) {
            FirebaseUser user = mAuth.getCurrentUser();
            String photoUrl = user.getPhotoUrl() + "/picture?height=1000&access_token=" + loginResult.getAccessToken().getToken();
        }

        @Override
        public void onCancel() {
            Log.d("Fb on Login", "facebook:onCancel");
        }

        @Override
        public void onError(FacebookException error) {
            Log.e("Fb on Login", "facebook:onError", error);
        }
    }); 
```

这就是文档所说的：

> 从 2020 年 10 月 24 日开始，所有基于 UID 的查询都需要访问令牌。如果您查询 UID 并因此必须包含令牌：
> 
> *   对 Facebook 登录身份验证请求使用用户访问令牌
> *   对页面范围的请求使用页面访问令牌
> *   对服务器端请求使用 App 访问令牌
> *   对移动或 Web 客户端请求使用客户端访问令牌
> 
> 如果您无法使用其他令牌类型之一，我们建议您仅使用客户端令牌。

# javascript - 在 HTML 页面加载之前执行 Javascript 以填充下拉列表

> ID：10650731
> 
> 赞同：0
> 
> 时间：2012-05-18T10:14:36.060
> 
> 标签：javascript

我在 HTML 表单中有 2 个下拉菜单。第一个下拉列表需要填充数据库中存在的用户名列表。

其次，根据在第一个下拉菜单中所做的选择，然后我需要运行另一个 JS 脚本来再次调用数据库以检索与该用户名相关的地址列表。

您能否让我知道实现这一目标的最佳方法是什么？1) 如何在 HTML 表单加载之前运行 JSscript 以返回该列表？2) 我应该在一个 Db 调用中同时获取用户名和关联地址，还是先获取用户名，然后在第一个下拉列表中使用 onChange 事件来执行第二个调用？

任何代码将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:20:57.203

好吧，如果您在同一个表中拥有所有信息，那么为什么不通过查询数据库来一次性获取所有数据，然后按照您想要的方式对元素中的数据进行排序和放置。另一种方式需要查询 DB 2 次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:28:05.027

```
here you can create your HTML to server call OR you can make HTML locally.
i have created options for selectbox at server and innerhtml to locally.

<select id="selectbox1" onchange="getData(this)"></select>
<select id="selectbox1"></select>

$(document).ready(function() {

$.ajax({
  url: 'http://localhost/getUsername.php',
  success: function(data) {
    $('#selectbox1').html(data);
    alert('Load was performed.');
  }
});

});

function getData(selData) {

$.ajax({
  url: 'http://localhost/getSecoundCall.php?id='+selData,
  success: function(data) {
    $('#selectbox2').html(data);
    alert('Load was performed.');
  }
});

} 
```

# sass - jqtouch b4 编译 scss 的问题

> ID：10650733
> 
> 赞同：0
> 
> 时间：2012-05-18T10:14:43.443
> 
> 标签：sass, jqtouch, compass-sass

我下载了最新版本的 jqtouch，它现在已经有了 scss 主题。一切都很好，花花公子，除了我做错了什么或者......

问题如下。我提取存档内容然后转到主题\scss 并运行指南针手表

这就是结果

```
>>> Change detected at 05:47:54 to: apple.scss
error apple.scss (Line 39 of _gradients.scss: Invalid null operation: ""glossy" neq null".) 
```

创建 ../css/apple.css 错误 jqtouch.scss（_gradients.scss 的第 39 行：无效的空操作：““glossy”neq null”。）创建 ../css/jqtouch.css 错误 vanilla.scss（第 39 行_gradients.scss：无效的空操作：“”flat“neq null”。）创建../css/vanilla.css

完全不知道如何解决它。任何线索将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:34:08.883

将指南针与 sencha touch scss 一起使用时遇到了同样的问题。如果您可能遇到这种情况，请考虑卸载 ruby​​ 以及与之相关的所有内容并从头开始重新安装（ruby、指南针等）

# java - 如何让tomcat 5.5 支持servlet 3.0？

> ID：10650735
> 
> 赞同：0
> 
> 时间：2012-05-18T10:14:44.357
> 
> 标签：java, tomcat, annotations

大家好，我正在开发一个 Web 应用程序并将其部署在 tomcat 7.0 中，当我尝试在 tomcat 5 中运行相同的东西时。我在部署自身时遇到以下异常。

```
Tomcat version 5.5 only supports J2EE 1.2, 1.3, and 1.4 Web modules 
```

我认为这些成本问题，但不确定

```
import javax.servlet.annotation.MultipartConfig;
import javax.servlet.annotation.WebServlet;

@WebServlet(urlPatterns = "/ReadEmployeeAttendance")
@MultipartConfig 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T10:20:34.657

你不能这样做。您需要支持 Servlet 3.0 规范的容器，并且如果您希望 Tomcat 只是 Tomcat 7。如果您希望您的应用程序在 Tomcat 5.5 中运行，则不能使用 Servlet 3.0 功能（例如注释，您的 web.xml 也必须有版本="2.4" 或更早）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T10:21:00.803

是的，Tomcat 5.5 不支持 Java EE 5 及更高版本是正确的，如果您想要 servlet 3，则必须升级到最新的 tomcat。

每个 Web 服务器或应用程序服务器都实现 JCP 提供的规范，因此并非所有版本的服务器都可以运行每个版本的规范，尽管一般来说它们是向后兼容的，这意味着在 Tomcat 7 上您可以运行 J2EE 1.4 但在 Tomcat 5.5 上您无法运行 Java EE5。

# java - JPA 一对多关系更新失败

> ID：10650739
> 
> 赞同：0
> 
> 时间：2012-05-18T10:14:58.320
> 
> 标签：java, hibernate, jpa

A与B具有多对一的双向关系。A具有级联合并和分离。A 是拥有实体。

1.  A 被*管理*，B 被*分离*；*自动提交*- 没有工作；事务提交后没有任何 As 得到更新
2.  A分离并*合并*，而B分离 - 导致乐观锁异常
3.  A 被分离和合并，而 B 仍在管理 - 没有工作；尝试更新 412 As。412 个（奇怪！）中只有 395 个被更新。可以观察到，任何导致第一次加载 B 的 A 都没有更新
4.  A是托管的，B是托管的；自动提交 - 工作

    *   托管 - 没有显式调用 em.detach() 或 em.merge()
    *   分离 - em.detach()
    *   合并 - em.merge()
    *   分离 - em.detach()
    *   自动提交 - 不调用 em.merge()

双方的关系都更新了。

我不明白前3个案例。感谢专家的任何澄清。

# c - 如何使用 libcurl 进行 HTTP 发布？

> ID：10650740
> 
> 赞同：8
> 
> 时间：2012-05-18T10:15:04.577
> 
> 标签：c, libcurl

我是使用 libcurl 的新手。我不清楚如何将它用于 HTTP POST 请求以及如何检查结果。我该如何使用它？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-18T10:36:57.923

```
#include <curl/curl.h>
main()
{
  CURL *curl;
  curl_global_init(CURL_GLOBAL_ALL);
  curl = curl_easy_init();
  curl_easy_setopt(curl, CURLOPT_VERBOSE, 1);
  curl_easy_setopt(curl, CURLOPT_URL, "http://www.example.com/hello-world");
  curl_easy_setopt(curl, CURLOPT_POST, 1);
  curl_easy_setopt(curl, CURLOPT_POSTFIELDS, "foo=bar&foz=baz");
  curl_easy_perform(curl);
  curl_easy_cleanup(curl);
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-18T10:20:19.893

`-d`有关该选项的文档，请参阅手册页。您可以多次使用它来将不同的键、值对传递给服务器。一旦成功，`--libcurl`如果您尝试使用 libcurl 在应用程序中手动执行此操作，请使用该标志查看它的外观。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-28T12:08:37.783

这是为了分享我在使用 libcurl 开发 REST 客户端方面的经验，我找到了一种非常简单的方法来查找在**MANY LANGUAGES**中使用**POSTMAN**进行的**任何 REST****调用的****代码片段**。它真的对我有用！！！安装 POSTMAN 并检查右侧是否有一个按钮（我只在 Windows 上使用过这个按钮，但应该适用于其他操作系统，而且 libcurl 可以跨许多操作系统移植） ********`'Code'`********

 ******如果有人想阅读文档和示例，可以在这里找到。[https://curl.haxx.se/docs/faq.html#What_is_cURL](https://curl.haxx.se/docs/faq.html#What_is_cURL)

[![POSTMAN 中的代码生成器](../Images/d9f186ef162c69d58ecf17916351915b.png)](https://i.stack.imgur.com/Jiilj.png)

对于左侧窗格中支持的语言，您可以使用 libcurl 找到正确的代码片段。C、C#、PHP、Python、Java、Java 脚本等...

最好的事情是您可以从 POSTMAN 测试您的呼叫，同时也可以从命令提示符中找到正确的代码片段和 curl 命令（如果您`cURL`从左窗格中选择）

[![在此处输入图像描述](../Images/ae6cb81624a6e396aea71835fea77a63.png)](https://i.stack.imgur.com/9dNRg.png)******

# windows-phone-7 - SplashScreenImage 作为背景：开始时有点跳跃？

> ID：10650745
> 
> 赞同：0
> 
> 时间：2012-05-18T10:15:28.260
> 
> 标签：windows-phone-7, background, splash-screen

我有与 SplashScreenImage 相同的图像和背景，效果很好，但在开始时，加载后，我的图像在顶部滑动了一点..

它的效果非常明显（并且令人不安），因为图像是相同的..

我正在使用ApplicationBar（全部可见），不知道是否有问题。我在我的 LayoutRoot 中将背景图像设置为“统一填充”（顺便说一句），我有一个 Pivot 控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:41:09.437

问题实际上是 ApplicationBar，如果您将其不透明度设置为“0.99”，您的问题应该会消失。

但最好的结果可能是拥有第二张图像，480x728（ApplicationBar 的高度为 72px，因此 800 - 72 = 728）

# android - 三种语言的安卓应用

> ID：10650750
> 
> 赞同：2
> 
> 时间：2012-05-18T10:15:51.450
> 
> 标签：android, localization

我想用三种语言创建我的 android 应用程序。英语和旁遮普语和古吉拉伊语。

“古吉拉特语”和“旁遮普语”在语言区域列表中不可用。所以我无法创建像 values-fr(french) 和 value-rs(russia) 这样的值文件夹 .. 像 dat .. 我如何使用“Punjabi”和“Gujarati”开发这个应用程序？

谢谢和问候，杰伊·帕特尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:25:15.367

[古吉拉特语字体](http://saumil.net/howto/gujfont/gujfont.html)

[旁遮普字体](http://font.downloadatoz.com/font,2315,punjabi.html)

上面的链接有古吉拉特语和旁遮普语的字体，您需要将其添加到资产文件夹中，您需要使用 TypeFace 类来设置该字体

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T10:36:18.640

从以下网址查看支持的语言环境列表 [http://www.science.co.il/language/locale-codes.asp](http://www.science.co.il/language/locale-codes.asp)

你可以支持古吉拉特语只需在 values 文件夹中添加 gu-rIN 文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T10:19:12.937

如果 Android 不提供语言选择，您将不得不实现自己的语言工具包：翻译框架和用户可以更改语言的菜单。

# drupal-7 - 未显示暴露过滤器的默认值的结果

> ID：10650751
> 
> 赞同：0
> 
> 时间：2012-05-18T10:15:52.607
> 
> 标签：drupal-7, drupal-views, drupal-modules

如果过滤器设置为默认值，我想隐藏任何显示的结果，如果选择“-ANY-”，是否可以不显示任何结果或使过滤器无效？或者最好不要在搜索结果中包含此过滤器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T00:23:20.940

您可以转到视图的高级设置并将公开的表单设置设置为所需的输入。然后，您的用户将需要在过滤器中选择至少 1 个值才能查看查看结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T06:45:08.023

我知道它很晚，但是对于 D7，这里有内置设置。 [http://drupal.org/node/358546#comment-7355100](http://drupal.org/node/358546#comment-7355100)

# php - 通过传递字符串从函数返回数组

> ID：10650753
> 
> 赞同：0
> 
> 时间：2012-05-18T10:15:54.460
> 
> 标签：php, arrays

我有以下功能，我在数组中有品牌信息。当我将品牌名称传递给这个函数时，我应该得到包含这些信息的数组。

```
function brand_info($brand)
{
    $brands_list=array ( 
    'lg'=>
    array(
    'name'           => 'LG Phone Company',
    'country'        =>  'country',
    'founded_year'   =>  '2001'
    ),
    'nokia'=>
    array(
    'name'           => 'Nokia Phone Company',
    'country'        =>  'country',
    'founded_year'   =>  '2001'
    )
    );

    if(in_array($brand,$brands_list))
    {
        // return array containg company info
    }
} 
```

这应该返回一个数组，我可以通过它显示这些信息。

```
$brand_info=brand_info($brand_name);
echo $brand_info['name']; 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T10:19:06.560

如果您要传递品牌名称，那么这就足够了：

```
function brand_info($brand)
{
    $brands_list=array ( 
    'lg'=>
    array(
    'name'           => 'LG Phone Company',
    'country'        =>  'country',
    'founded_year'   =>  '2001'
    ),
    'Nokia'=>
    array(
    'name'           => 'Nokia Phone Company',
    'country'        =>  'country',
    'founded_year'   =>  '2001'
    )
    );

    if (array_key_exists($brand,$brands_list)) {
      return $brands_list[$brand];
    } else {
      return false;
    }
}

$brandinfo = brand_info('Nokia');
echo $brandinfo['name']; // will print "Nokia Phone Company" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T10:19:52.073

可能看起来微不足道，但...

```
return $brands_list[$brand] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T10:23:29.787

```
function brand_info($brand)
{
    $brands_list=array ( 
    'lg'=>
    array(
    'name'           => 'LG Phone Company',
    'country'        =>  'country',
    'founded_year'   =>  '2001'
    ),
    'nokia'=>
    array(
    'name'           => 'Nokia Phone Company',
    'country'        =>  'country',
    'founded_year'   =>  '2001'
    )
    );

    if(in_array($brand,$brands_list))
    {
        return $brand_list[$brand];
    }else{
        return null;
    }
} 
```

进而

```
$info = brand_info($my_brand);
if(!is_null($info)){ echo $info['name']; } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-18T10:32:00.553

```
function brand_info($brand) {
    $brands_list=array (
        'lg'=>
            array(
                    'name'           => 'LG Phone Company',
                    'country'        =>  'country',
                    'founded_year'   =>  '2001'
            ),
        'Nokia'=>
            array(
                    'name'           => 'Nokia Phone Company',
                    'country'        =>  'country',
                    'founded_year'   =>  '2001'
            )
    );

    foreach ($brands_list as $brandname=>$info) {
        if($brandname==$brand) {
            return $info;
        }
    }
    return array();
} 
```

# c# - 根据属性值声明不同的变量

> ID：10650756
> 
> 赞同：0
> 
> 时间：2012-05-18T10:16:32.177
> 
> 标签：c#, variable-declaration

我想知道如何根据属性的值创建不同的变量。

例子：

```
foreach (DataColumn column in entry.Columns)
{
    if(column.ColumnName.Contains("weight") || 
       column.ColumnName.Contains("amount"))
        float column.ColumnName = 0;
} 
```

在这种情况下，代码将创建与 entry 中包含所选单词的列一样多的变量，并且这些变量将被称为 columnName 属性。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:40:22.433

我认为可以为此目的使用字典

```
Dictionary<string, float> columnNameAndValue = new Dictionary<string, float>();

foreach (DataColumn column in entry.Columns)
{
    if (column.ColumnName.Contains("weight") || 
        column.ColumnName.Contains("amount")) //float column.ColumnName = 0;
    {
        columnNameAndValue.Add(column.ColumnName, 0);
    }
} 
```

# php - 使用未定义的常量 - 假定 ' ' - 一个空白常量？

> ID：10650765
> 
> 赞同：4
> 
> 时间：2012-05-18T10:17:07.913
> 
> 标签：php, zend-framework, netbeans

未定义的持续错误通常很有帮助且易于解决，但是我的开发和生产服务器（不同的设置）都出现了一些非常奇怪的行为。

我的错误日志显示了大量这样的错误：

```
NOTICE (5): [8] Use of undefined constant   - assumed ' ' (#PATH#/dashboard/tasks.tpl) [61]

NOTICE (5): [8] Use of undefined constant   - assumed ' ' (#PATH#/index/view.tpl) [158]

NOTICE (5): [8] Use of undefined constant   - assumed ' ' (#PATH#/blogs/index.tpl) [51] 
```

对我来说，系统试图将“空白”定义为常数？

通常我可以通过跟踪行号来解决错误，其中它们总是像这样的 PHP 关闭标记，`<?php } ?>`并且首先删除两个空格`<?php}?>`并再次添加它们，有时我可以解决问题。但是新的错误不断出现。

我使用 netbeans 作为 IDE。

这是完整的堆栈跟踪

```
#0 #PATH#/docs/application/libraries/Zend/View.php(108): include('#PATH#/d...')
#1 #PATH#/docs/application/libraries/Zend/View/Abstract.php(835): Zend_View->_run('#PATH#/d...')
#2 #PATH#/docs/application/libraries/Engine/Content/Widget/Abstract.php(292): Zend_View_Abstract->render('application/modules/Blog/widgets...')
#3 #PATH#/docs/application/libraries/Engine/Content/Widget/Abstract.php(258): Engine_Content_Widget_Abstract->renderScript()
#4 #PATH#/docs/application/libraries/Engine/Content/Element/Widget.php(66): Engine_Content_Widget_Abstract->render()
#5 #PATH#/docs/application/libraries/Engine/Content/Element/Abstract.php(583): Engine_Content_Element_Widget->_render()
#6 #PATH#/docs/application/libraries/Engine/Content/Decorator/Children.php(31): Engine_Content_Element_Abstract->render()
#7 #PATH#/docs/application/libraries/Engine/Content/Element/Abstract.php(594): Engine_Content_Decorator_Children->render('')
#8 #PATH#/docs/application/libraries/Engine/View/Helper/Content.php(78): Engine_Content_Element_Abstract->render()
#9 #PATH#/docs/application/modules/Core/views/scripts/index/index.tpl(10): Engine_View_Helper_Content->renderWidget('blog.list-recent-blogs')
#10 #PATH#/docs/application/libraries/Zend/View.php(108): include('#PATH#/d...')
#11 #PATH#/docs/application/libraries/Zend/View/Abstract.php(835): Zend_View->_run('#PATH#/d...')
#12 #PATH#/docs/application/libraries/Zend/Controller/Action/Helper/ViewRenderer.php(903): Zend_View_Abstract->render('index/index.tpl')
#13 #PATH#/docs/application/libraries/Zend/Controller/Action/Helper/ViewRenderer.php(924): Zend_Controller_Action_Helper_ViewRenderer->renderScript('index/index.tpl', )
#14 #PATH#/docs/application/libraries/Zend/Controller/Action/Helper/ViewRenderer.php(963): Zend_Controller_Action_Helper_ViewRenderer->render()
#15 #PATH#/docs/application/libraries/Zend/Controller/Action/HelperBroker.php(277): Zend_Controller_Action_Helper_ViewRenderer->postDispatch()
#16 #PATH#/docs/application/libraries/Zend/Controller/Action.php(523): Zend_Controller_Action_HelperBroker->notifyPostDispatch()
#17 #PATH#/docs/application/libraries/Zend/Controller/Dispatcher/Standard.php(289): Zend_Controller_Action->dispatch('indexAction')
#18 #PATH#/docs/application/libraries/Zend/Controller/Front.php(946): Zend_Controller_Dispatcher_Standard->dispatch(Zend_Controller_Request_Http, Zend_Controller_Response_Http)
#19 #PATH#/docs/application/modules/Core/Bootstrap.php(75): Zend_Controller_Front->dispatch()
#20 #PATH#/docs/application/libraries/Engine/Application.php(160): Core_Bootstrap->run()
#21 #PATH#/docs/application/index.php(194): Engine_Application->run()
#22 #PATH#/docs/index.php(24): include('#PATH#/d...')
#23 {main} 
```

对此行为的任何建议将不胜感激

## 解决方案

感谢您的反馈。通过在 netbeans 中启用不可打印字符（菜单栏中的视图-> 不可打印字符），我能够看到差异。

我复制了一个“坏”的空格和一个大括号，并在整个项目中进行了搜索/替换，以快速解决问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-18T10:26:02.333

这些行中有一个[不间断的空格](http://en.wikipedia.org/wiki/Non-breaking_space)。
您可以让 NetBeans为您[显示它](https://stackoverflow.com/questions/1437913/how-to-show-reveal-hidden-or-invisible-characters-in-netbeans)。

# javascript - 相当于 javascript 的 jQuery 选择器

> ID：10650768
> 
> 赞同：1
> 
> 时间：2012-05-18T10:17:15.990
> 
> 标签：javascript, jquery, html

我正在尝试获取此 javascript 的 jquery equivaliant

```
var id = $(this).parent().parent().parent().attr("id");
document.getElementById(id).getElementsByClassName("addcomment")[0].style.display = 'block'; 
```

但它不工作

```
$('#+id+' '.addcomment').css('display','block'); 
```

有什么建议么 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T10:18:04.857

```
$('#' + id + '.addcomment').css('display','block'); 
```

as a sidenote in the page you should have only one element with that id, so

```
$('#' + id ).css('display','block'); 
```

should works too (of course only if classname it's not necessary to target it, since this is a different selector)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T10:57:32.607

我认为你需要根据他们的类来获取子元素。所以试试这个。

```
$('#' + id ).find('.addcomment').show(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T10:19:22.593

```
$('.addcomment', '#' + id).css('display','block'); 
```

or just simple

```
$('#' + id).css('display','block'); 
```

# iphone - 当我在一个字段中输入文本时，它也在其他一些文本字段中显示相同的文本

> ID：10650770
> 
> 赞同：0
> 
> 时间：2012-05-18T10:17:24.577
> 
> 标签：iphone, uitableview, uitextfield

当我在文本字段 1 中输入文本时，该文本也显示在文本字段 9 中。

这是我在表格视图单元格中创建文本字段的一些代码。

我在 tableview 单元格中添加了文本字段。就像下面的 cellforRowatintexpath 方法

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

static NSString *CellIdentifier = @"myCell";
//UILabel* nameLabel = nil;
cell = (UITableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if(cell == nil)
{

    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
     cell.selectionStyle = UITableViewCellSelectionStyleNone;
}
else
{
    UILabel *titleLbl = (UILabel *)[cell viewWithTag:1];
    [titleLbl removeFromSuperview];
}
nameLabel = [[UILabel alloc] initWithFrame:CGRectMake( 7.0, 10.0, 160.0, 44.0 )];
nameLabel.text = [labels objectAtIndex:indexPath.row];
nameLabel.font = [UIFont boldSystemFontOfSize:12]; 
nameLabel.lineBreakMode = UILineBreakModeWordWrap;
nameLabel.tag =1;
nameLabel.numberOfLines =0;
[nameLabel sizeToFit];
CGSize expectedlabelsize = [nameLabel.text sizeWithFont:nameLabel.font constrainedToSize:nameLabel.frame.size lineBreakMode:UILineBreakModeWordWrap];
CGRect newFrame =nameLabel.frame;
newFrame.size.height =expectedlabelsize.height;
[cell.contentView addSubview: nameLabel];
[nameLabel release]; 

//adding textfield to tableview cell. 
tv = [[UITextField alloc] initWithFrame:CGRectMake(nameLabel.frame.origin.x+nameLabel.frame.size.width+2, 10.0, cell.contentView.bounds.size.width, 30)];
tv.tag = indexPath.row + 2;
//tv.text =[labels objectAtIndex:indexPath.row];
tv.font = [UIFont boldSystemFontOfSize:12];

//this method will take text from textfield of tableview cell using their individual tag
[tv addTarget:self action:@selector(getTextFieldValue:) forControlEvents:UIControlEventEditingDidEnd];

[cell.contentView addSubview:tv];

[tv setDelegate:self];

[tv release];   

return cell;} 
```

这是getTextFieldValue方法

```
- (void) getTextFieldValue:(UITextField *)textField{ 

if (textField.tag == 2) { 

    //NSString *value1 = [NSString stringWithFormat:@"%@",textField.text];
    //NSLog(@"value1 is %@",value1);.

    NSLog(@"2--->%@",textField.text); 
}else if(textField.tag == 3){ 
    NSLog(@"3--->%@",textField.text); 
}else if(textField.tag == 4){ 
    NSLog(@"4--->%@",textField.text); 
    } 
else if(textField.tag == 5){ 
    NSLog(@"5--->%@",textField.text); 
} 
else if(textField.tag == 6){ 
    NSLog(@"6--->%@",textField.text); 
} 
else if(textField.tag == 7){ 
    NSLog(@"7--->%@",textField.text); 
} 
else if(textField.tag == 8){ 
    NSLog(@"8--->%@",textField.text); 
} 
else if(textField.tag == 9){ 
    NSLog(@"9--->%@",textField.text); 
} 
else if(textField.tag == 10){ 
    NSLog(@"10--->%@",textField.text); 
} 
else if(textField.tag == 11){ 
        NSLog(@"11--->%@",textField.text); 
} 
else if(textField.tag == 12){ 
        NSLog(@"12--->%@",textField.text); 
} } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:48:44.903

首先，请像这样重写您的 getTextFieldValue 方法：

```
- (void)getTextFieldValue:(UITextField *)textField { 
    NSLog(@"%d--->%@", textField.tag, textField.text); 
} 
```

您不断将 UITextFields 添加到单元格中，即使它被重复使用。尝试将该代码放在 if 语句中。

不过，您应该每次都将文本字段的文本设置为 nil。否则它仍然会出现在出队的单元格上（滚动时）。

像这样的东西：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

static NSString *CellIdentifier = @"myCell";
cell = (UITableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if(cell == nil)
{
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;

    UILabel *nameLabel = [[UILabel alloc] initWithFrame:CGRectMake( 7.0, 10.0, 160.0, 44.0 )];
    //TODO: Set up nameLabel here
    [cell.contentView addSubview: nameLabel];
    [nameLabel release];

    UITextField *tv = [[UITextField alloc] init];
    tv.font = [UIFont boldSystemFontOfSize:12];
    [tv setDelegate:self];
    [tv addTarget:self action:@selector(getTextFieldValue:) forControlEvents:UIControlEventEditingDidEnd];
    [cell.contentView addSubview:tv];
    [tv release];
}

UILabel *nameLabel = (UILabel *)[cell viewWithTag:1];
nameLabel.text = [labels objectAtIndex:indexPath.row];
[nameLabel sizeToFit];

return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T11:23:44.690

那就是保留问题。

您可以为每一行采用不同的 cellIdentifier。只需更改一项声明即可获得解决方案。

用上面的方法解决这个问题。我遇到了同样的问题，我用这种方法解决了。我希望这能帮到您。

```
NSString *CellIdentifier = [NSString stringWithFormat:@"cellidentifier-%d",indexPath.row]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T10:30:27.017

Maybe you have set some IBOutlet to the textField? Did you?

# tsql - How do you get the identity value after using MERGE when there is a match?

> ID：10650776
> 
> 赞同：35
> 
> 时间：2012-05-18T10:17:46.420
> 
> 标签：tsql

Say I have a table with an identity field. I want to insert a record in it if it doesn't already exist. In the below example, I check if the value stored in @Field1 already exists in the table. If not, I insert a new record:

Definition of the table:

```
MyTable (MyTableId int Identity not null, Field1 int not null, Field2 int not null) 
```

This is how I check if the value already exists and insert it if necessary

```
merge MyTable as t
using (@Field1, @Field2) as s (Field1,Field2)
on (t.Field1=s.Field1)
when not matched then
    insert (Field1,Field2) values (s.Field1,s.Field2); 
```

Getting the identity value when the record didn't already exist in the table can be done by adding:

```
output Inserted.MyTableId 
```

but what if the record was already in the table (ie if there was a match)?

The only way I found is to query the table after executing the Merge statement:

```
select MyTableId from MyTable where Field1=@Field1 
```

Is there a way to get the identity value directly from the Merge?

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-18T10:25:24.483

在记录已经存在的情况下，您可以将匹配的 id 存储到如下变量中：

```
DECLARE @MatchedId INTEGER;

MERGE MyTable as t
....
....
WHEN MATCHED THEN
    UPDATE SET @MatchedId = t.MyTableId; 
```

**更新：**
这是一个完整的例子。这展示了一种方式：

```
DECLARE @UpdateVariable bit
DECLARE @ChangeResult TABLE (ChangeType VARCHAR(10), Id INTEGER)
DECLARE @Data TABLE (Id integer IDENTITY(1,1), Val VARCHAR(10))
INSERT @Data ([Val]) VALUES ('A');

MERGE @data AS TARGET
USING (SELECT 'A' AS Val UNION ALL SELECT 'B' AS Val) AS SOURCE ON TARGET.Val = SOURCE.Val
WHEN NOT MATCHED THEN
    INSERT ([Val])
    VALUES (SOURCE.Val)
WHEN MATCHED THEN 
    UPDATE SET @UpdateVariable = 1
OUTPUT $action, inserted.Id INTO @ChangeResult;

SELECT * FROM @data
SELECT * FROM @ChangeResult 
```

需要注意的点是：

*   $action 将为您提供对一行执行的操作类型（INSERT、UPDATE、DELETE）
*   @ChangeResult 表将保存有关所做更改类型的信息
*   对于 WHEN MATCHED 情况，我基本上是在设置一个虚拟变量。除了确保 UPDATE 路径被命中以在输出中生成 UPDATE 行之外，这在这里没有任何用途。即@UpdateVariable 不用于其他任何事情。如果您确实想更新现有行，那么您应该在此处放置一个适当的 UPDATE ，但如果您不想实际更新现有行，那么这个“虚拟”更新似乎是必需的。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-07-23T05:09:38.890

这是一种替代且稍微简单的方法（在我看来）：

```
DECLARE @Id [int];

MERGE INTO [MyTable] AS [t]
USING (VALUES
  (@FieldA, @FieldB)
)
 AS [x] (FieldA, FieldB)
 ON [t].[FieldA] = [x].[FieldA]
AND [t].[FieldB] = [x].[FieldB]
WHEN NOT MATCHED BY TARGET THEN
    INSERT (FieldA, FieldB)
    VALUES (FieldA, FieldB)
WHEN MATCHED THEN
    UPDATE SET @Id = [t].[Id]

IF @Id IS NULL
BEGIN
    SET @Id = CAST(SCOPE_IDENTITY() as [int]);
END
SELECT @Id; 
```

如果合并语句导致匹配，`@Id`则将设置为匹配行的标识。在不匹配的情况下，将插入新行，并准备好从中选择新标识`SCOPE_IDENTITY()`。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-02-18T13:04:25.913

这里有其他选择：

```
DECLARE @FakeVar BIT

MERGE MyTable AS T
USING VALUES((@Field1, @Field2)) AS S (Field1, Field2)
    ON (T.Field1 = S.Field1)
WHEN NOT MATCHED THEN
    INSERT (Field1, Field2)
    VALUES (S.Field1, T.Field2)
WHEN MATCHED THEN
    UPDATE SET @FakeVar = NULL -- do nothing, only force "an update" to ensure output on updates
OUTPUT INSERTED.MyTableId  ; 
```

如果您检查输出文档

> INSERTED 是一个列前缀，指定插入或更新操作添加的值。

你只需要在更新集子句上做“某事”

# wpf - Bring control to view

> ID：10650779
> 
> 赞同：0
> 
> 时间：2012-05-18T10:18:01.393
> 
> 标签：wpf

Is there an easy/good way to bring control into view (make it visible on screen) ?

So far I have tried to do it manually by walking component trees and invoking relevant methods (`BringIntoView`) and properties (`Visibility`) but it is rather complicated due to multiplicity of base types (`FrameworkElement` vs `FrameworkContentElement`, there is also `Visual3D` and maybe more?), parent relationships (visual, logical, template) and necessity of customized handling of certain types (e.g. `TabItem.IsSelected`, `Expander.IsExpanded` - and ideally that should not assume that control is inside Content). There are probably many edge cases that are not covered by this.

**UPDATE**

The code I'm using currently: [https://gist.github.com/2761622](https://gist.github.com/2761622)

# java - How can I play a sound at a specified volume in Java?

> ID：10650788
> 
> 赞同：3
> 
> 时间：2012-05-18T10:18:35.220
> 
> 标签：java, audio, volume

I already have a working method to play sound effects in my game, but the sounds are all played at the default volume. I want a sound to be more quiet if the distance between the sound effect's origin and the player increases.

Currently I'm using:

```
public static void play(String sound) {
    Clip clip = soundList.get(sound);
    clip.setFramePosition(0);
    //I want to set the clip's volume here
    clip.start();
} 
```

There is something like clip.getLevel(), but there is no setter. How can I set the clip's volume before it starts?

Thanks in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-15T08:16:43.123

在 Java 7（可能还有 Java 6）中，有一组类可以[**控制 clip**](http://docs.oracle.com/javase/7/docs/api/javax/sound/sampled/Control.html)。这些是：

*   布尔控制
    *   沉默的
    *   应用/移除混响
*   复合控制
*   枚举控件
    *   混响控制
*   浮动控制
    *   辅助返回
    *   辅助发送
    *   平衡
    *   **主增益**
    *   平移
    *   混响返回
    *   混响发送
    *   采样率
    *   **体积**

您正在寻找的控制对象是[`FloatControl`](http://docs.oracle.com/javase/7/docs/api/javax/sound/sampled/FloatControl.html). 如上表所示，这可以控制剪辑的音量。使用以下代码实现此功能：

```
FloatControl volume = (FloatControl) clip.getControl(FloatControl.Type.MASTER_GAIN);
volume.setValue(gainAmount); 
```

-或者-

```
((FloatControl) clip.getControl(FloatControl.Type.MASTER_GAIN)).setValue(gainAmount) 
```

`gainAmount`您想要提高（或降低）剪辑的分贝量在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T17:29:30.093

剪辑 API 不支持这个，AFAIK。我认为您必须读取原始数据，乘以一个常数，然后使用原始数据创建一个新剪辑。该常数表示音量变化量，因此如果您希望音量减半，请乘以 0.5。

如果你想让某些东西更响亮，你将不得不提防“过度”。没有简单的方法来处理它。

# c++ - 带有 libc 的 SIGSEGV 回溯正在重复条目

> ID：10650790
> 
> 赞同：0
> 
> 时间：2012-05-18T10:18:39.513
> 
> 标签：c++, c, arm, libc, backtrace

在转到可用的 execinfo 回溯之前，我使用的是 libunwind。在实现了一个新的回溯之后，我很享受它，直到我从项目中删除了 libunwind 并进行了完全重建。

现在我的回溯功能拒绝从 SIGSEGV 产生正常结果（我知道从那里进行回溯是不安全的），但为什么它之前工作正常？

我现在将发布结果不正确的输出。第一个回溯是一个异常，第二个是故意的 SIGSEGV - 预期结果将是对 __libc_start_main 的跟踪

我记得我读过一些关于信号堆叠的问题？

```
ERROR: FatalException detected: Unable to find string Id STR_PATIENT_LIST in configuration xml file at gui.cpp +1224
===========================================
FATAL STACK BACKTRACE
[bt]: (1 ) [0x1aed350]
[bt]: (2 ) ./ambusergm(getStrIdElement(char const*)+0x1a4) [0xa3d6c]
[bt]: (3 ) ./ambusergm(getCurrentLanguageStr(char const*)+0x18) [0xa4968]
[bt]: (4 ) ./ambusergm(createDialogs+0x70) [0xa4ce4]
[bt]: (5 ) ./ambusergm(handleMenuUniqueIdEvent+0x1278) [0x90030]
[bt]: (6 ) ./ambusergm(menuSelectionInvoke(int, int)+0x278) [0xa14ac]
[bt]: (7 ) ./ambusergm(reloadMenu+0xe0) [0xab51c]
[bt]: (8 ) ./ambusergm(main+0x638) [0x600b0]
[bt]: (9 ) /lib/libc.so.6(__libc_start_main+0x120) [0x402f7fd4]
===========================================

signal 11 (Segmentation fault), address is (nil) from 0x166398
===========================================
CRASH STACK BACKTRACE
[bt]: (1 ) ./ambusergm(MessageBoxDlg::Setup(MessageBoxType, int, int, int, int, wchar_t const*, wchar_t const*)+0x10) [0x166398]
[bt]: (2 ) /lib/libc.so.6(__default_rt_sa_restorer_v2+0) [0x4030e630]
[bt]: (3 ) ./ambusergm(MessageBoxDlg::Setup(MessageBoxType, int, int, int, int, wchar_t const*, wchar_t const*)+0x10) [0x166398]

... repeated to the last entry

[bt]: (49) ./ambusergm(MessageBoxDlg::Setup(MessageBoxType, int, int, int, int, wchar_t const*, wchar_t const*)+0x10) [0x166398]
=========================================== 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:23:31.537

问题恰好是应用程序段在异常处理程序本身中出错并递归调用了段错误信号处理程序

# iphone - 如何在 iphone sdk 中更改应用程序删除的默认文本？

> ID：10650800
> 
> 赞同：0
> 
> 时间：2012-05-18T10:19:27.420
> 
> 标签：iphone, ios-simulator, delete-file

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:27:44.047

You can't change the delete app message and there is no way to tell iOS the call an URL after/on deleting an app.

When iOS delete's an app there is no method that gets called that you can access.

# exception - Twitter 在模拟器中运行良好，但在设备中运行良好

> ID：10650803
> 
> 赞同：1
> 
> 时间：2012-05-18T10:19:37.877
> 
> 标签：exception, emulation, device

我正在使用 Android 1.6 和 twitter4j.2.1.11

我正在尝试从我的 android 移动设备连接 twitter。事情是我能够从模拟器发布推文，相同的应用程序无法通过 android 移动设备发布。当我尝试通过移动设备发布时，我遇到了异常。

oauth.signpost.exception.OAuthCommunicationException：与服务提供商的通信失败：收到的身份验证质询为空

任何人都可以在这方面帮助我。

问候萨兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:11:05.717

我通过更换sim卡解决了我的问题，即sim卡没有更新我在网络上的时间，我更换了sim卡，并在我的手机中将日期时间设置为自动更新，现在可以使用了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-14T14:46:38.843

我曾经遇到过这个问题，并且确信它不是我的日期和时间，直到我正确检查并发现我的自动更新将时间设置为 AM 而不是 PM。我改了，问题解决了

# arrays - 在 Matlab 中过滤数组/向量

> ID：10650805
> 
> 赞同：2
> 
> 时间：2012-05-18T10:19:42.100
> 
> 标签：arrays, matlab, vector, filter

我在 Matlab 中有两个数组说 A = [1 4 89 2 67 247 2]
B = [0 1 1 1 0 0 1]

我想要一个数组 C，它包含数组 A 中的元素，如果 B 在相应索引处有 1。在这种情况下，C = [4 89 2 2]。

这该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T10:22:59.090

使用[逻辑索引](http://www.mathworks.com/help/techdoc/math/f1-85462.html#bq7egb6-1)：

```
>> C = A(logical(B))

C =

     4    89     2     2 
```

# c - Eclipse：如何添加自动完成要使用的包含路径

> ID：10650811
> 
> 赞同：2
> 
> 时间：2012-05-18T10:19:59.573
> 
> 标签：c, linux, eclipse, autocomplete

我正在玩 Linux 设备驱动程序。而且我注意到 eclipse 不会做任何自动完成。即使包含路径，Eclipse 也无法显示任何自动完成功能。

有没有办法将 Eclipse 指向一个目录并告诉它建立索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-17T15:00:25.627

您必须明确告诉它在哪里可以找到标头：

⇒ 右键单击​​您的项目
⇒ 转到“ *C/C++ 包含路径和符号”*”
⇒ 选择*“添加外部包含路径...”*
⇒ 浏览到头文件的位置
⇒ 刷新

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T00:56:43.937

Ctrl + Spacebar 是 Eclipse 中自动完成的快捷键。

# php - Facebook Page Tab iFrame App - 邀请好友请求

> ID：10650812
> 
> 赞同：2
> 
> 时间：2012-05-18T10:20:14.417
> 
> 标签：php, facebook, iframe

我有一个 FB 应用程序，它通过 iFrame 作为页面选项卡加载。考虑到 FBML 已于 2012 年 6 月 1 日被完全删除，有没有办法在页面标签应用程序上创建邀请好友请求？我研究了请求对话框文档，但这仅适用于画布应用程序（？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T11:11:30.910

请求对话框仅适用于画布应用程序，我花了 4 个小时才发现...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T05:25:09.210

请求对话框适用于我的页面选项卡应用程序。[你可以在我的帖子](http://facebook.stackoverflow.com/questions/11052691/multi-friend-selector-and-authentication-dialog-in-pagetab-app)中看到实现细节 。

我遇到的唯一问题是我不希望它作为弹出窗口而是在页面上，我仍在试图弄清楚如何去做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T11:05:25.830

您也可以在选项卡应用程序上使用请求对话框

[https://developers.facebook.com/docs/reference/dialogs/requests/](https://developers.facebook.com/docs/reference/dialogs/requests/)

# salesforce - 如何在子页面中获取父ID

> ID：10650826
> 
> 赞同：0
> 
> 时间：2012-05-18T10:20:56.467
> 
> 标签：salesforce, apex-code, visualforce

我想在我的子自定义控制器中获取父 ID。请问我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T11:02:38.640

将父对象与子对象中的子对象相关联的字段包含父 ID。对于联系人，它是 AccountId。对于自定义对象，它由创建字段的用户设置。您可以转到子对象并检查。知道字段名称后，您可以直接访问它。联系方式：

```
Id parentId = myContact.AccountId; 
```

对于具有名为 Parent__c 的 MasterDetail（或查找）字段的对象：

```
Id parentId = myObject.Parent__c; 
```

检索数据时，使用后缀 __c 可以获得关系中目标对象的 Id。使用后缀 __r 您可以获得目标对象本身。

# c - 在 OpenCL 中切片字符串

> ID：10650829
> 
> 赞同：2
> 
> 时间：2012-05-18T10:21:01.457
> 
> 标签：c, string, kernel, opencl, gpu

我有一长串字符，存储在 cl_mem 缓冲区中，我将其提交给我的内核。

我想把这个长字符串分成单独的字符串，我将把它们用作一些匹配处理的搜索模式。

我怎样才能做到这一点？

```
__kernel void SetHorspoolMatch(
                __global const char *haystack, 
                __global const char *needlesData){} 
```

我想`needlesData`分成多个不同的“针”。

或者，是否有更好的方法将字符串数组从主机移动到内核并单独使用它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T22:29:30.983

我已经用CUDA做到了。在 NVidia GTX 560 卡（336 个 CUDA 内核，内存带宽 128G 字节/秒）上处理 4M 文件并拆分为 766K 令牌需要大约 40 毫秒。这没有对使用共享（本地）内存或常量内存进行任何优化。

假设您的字符串由标记字符和非标记字符组成。基本技术并行探测每个字符。

每个线程（工作项）看起来都是 2 个相邻的字符。如果第一个字符是非令牌，第二个字符是令牌。然后你找到了一个令牌的开始。该线程可以向前扫描，直到找到标记的结尾或字符串的结尾。您需要长度为 1 的特殊情况字符串并探测字符串的第一个字符（没有先前的分隔符）。您可以拒绝所有其他组合。

输出是两个数组。第一个是起始位置。第二个数组是长度。写入输出数组由计算数组中下一个可用位置的原子加法控制。该计数器也作为输出参数返回。

95% 的已用时间用于探测令牌。5% 用于主机-GPU 内存传输。

# android - 在AndEngine中的Activity完成（）之前卸载资源

> ID：10650831
> 
> 赞同：1
> 
> 时间：2012-05-18T10:21:02.023
> 
> 标签：android, opengl-es, andengine

我以前用过`System.exit(0)`退出游戏。但由于这在 Android 中是一个禁忌，所以我尝试调用 just `activity.finish()`。现在，如果我在退出游戏后立即重新开始游戏，所有纹理都会混乱（白色、拉伸或其他混乱）。

我在 AndEngine 中同时使用托管和非托管纹理。AndEngine 版本 1（所以没有 OpenGL ES 2.0）。

在退出游戏之前我应该​​手动进行哪些卸载以避免这种情况发生？基于 OpenGL 的 Android 游戏通常会卸载哪些内容？非常欢迎任何提示和技巧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T04:54:47.977

好吧，这是一个非常古老的问题。但我的问题确实是我有对（实际上是 Scala `object`s）的静态引用，即使在完成活动之后也会保留纹理并且只有终止进程才会有所帮助。真是糟糕的设计。请注意您在 Android 上的引用。

# java - 如何从java（netbeans）调用sql server函数

> ID：10650833
> 
> 赞同：0
> 
> 时间：2012-05-18T10:21:23.527
> 
> 标签：java, sql-server, function, call

起初，对不起我的英语太糟糕了

我坚持在java中的sql server上调用我的函数。

这是我在 sqlserver 中的代码：

```
 GO
   IF OBJECT_ID (N'GET_DATE', N'FN') IS NOT NULL
      DROP FUNCTION GET_DATE;

   GO
   CREATE FUNCTION GET_DATE()
      RETURNS CHAR(12)
   AS
   BEGIN

   DECLARE @NO_ORDER CHAR(12), @NO_ORDER_MAKS INT

   declare @noSPK char(16),@noSPKmaks int;
   if (exists(select * from orders_spp))
        begin
            SELECT @NO_ORDER_MAKS = MAX(CONVERT(INT,(SUBSTRING(NO_ORDER,7,4)))) from 
   ORDERS_SPP;

            SET @NO_ORDER = CONVERT(CHAR(2),
   (right(datepart(year,getdate()),2))) +
            '-' + 
            RIGHT('0' + CAST(month(getdate()) as varchar(2)),2) +
            '-' +
            REPLICATE('0',4-LEN(CONVERT(varchar(30),@NO_ORDER_MAKS)))+
            CONVERT(varchar(30),@NO_ORDER_MAKS+1) +
            '/' +
            'P';
        end   ;                            
  else
        set @NO_ORDER = CONVERT(CHAR(2),(right(datepart(year,getdate()),2))) +
            '-' + 
            RIGHT('0' + CAST(month(getdate()) as varchar(2)),2) +
            '-' +
            '0001/P';

       RETURN @NO_ORDER;
       END;

       GO
       SELECT dbo.GET_DATE() AS 'RESULT' 
```

我应该输入什么命令来调用java中的函数？请帮助我，谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:52:20.760

您应该使用[CallableStatement](http://docs.oracle.com/javase/7/docs/api/java/sql/CallableStatement.html)并定义输入/输出参数。[这里](http://tutorials.jenkov.com/jdbc/callablestatement.html)有一些例子。

# xml - 解析 XML 数据绑定向导时值为空

> ID：10650842
> 
> 赞同：3
> 
> 时间：2012-05-18T10:22:13.537
> 
> 标签：xml, delphi, xsd, delphi-2010

我已经使用 Delphi 2010 中的 XML 数据绑定向导从 Citrix Web Interface解析了[PNAgent.dtd文件，](http://pastebin.com/4V8CYs5r)[这](http://pastebin.com/LwnSWinb)是生成的单元。

然后我尝试用它读取以下 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE PNAgent_Configuration SYSTEM "PNAgent.dtd"[]>
<PNAgent_Configuration xmlns:xsi="http://www.w3.org/2000/10/XMLSchema-instance">
    <FolderDisplay>
        <StartMenuDisplay>
            <Enabled>true</Enabled>
            <RootFolder root="programs">
            </RootFolder>
        </StartMenuDisplay>
        <DesktopDisplay>
            <Enabled>false</Enabled>
            <Icon>
                <Name>
                </Name>
            </Icon>
        </DesktopDisplay>
        <SystemTrayMenuDisplay>
            <Enabled>true</Enabled>
        </SystemTrayMenuDisplay>
    </FolderDisplay>
    <DesktopIntegration>
        <StartMenu>add</StartMenu>
        <Desktop>add</Desktop>
    </DesktopIntegration>
    <ConfigurationFile>
        <Location modifiable="true" forcedefault="false" replaceServerLocation="true" RedirectNow="false">http://2003xa/Citrix/PNAgent/config.xml</Location>
        <Refresh>
            <OnApplicationStart>false</OnApplicationStart>
            <OnResourceRequest>false</OnResourceRequest>
            <Poll>
                <Enabled>false</Enabled>
                <Period>8</Period>
            </Poll>
        </Refresh>
    </ConfigurationFile>
    <Request>
        <Enumeration>
            <Location replaceServerLocation="true" modifiable="true" forcedefault="false" RedirectNow="false">http://2003xa/Citrix/PNAgent/enum.aspx</Location>
            <Smartcard_Location replaceServerLocation="true">https://2003xa/Citrix/PNAgent/smartcard_enum.aspx</Smartcard_Location>
            <Integrated_Location replaceServerLocation="true">http://2003xa/Citrix/PNAgent/integrated_enum.aspx</Integrated_Location>
            <Refresh>
                <OnApplicationStart modifiable="false" forcedefault="true">true</OnApplicationStart>
                <OnResourceRequest modifiable="false" forcedefault="true">false</OnResourceRequest>
                <Poll modifiable="false" forcedefault="true">
                    <Enabled>true</Enabled>
                    <Period>6</Period>
                </Poll>
            </Refresh>
        </Enumeration>
        <Resource>
            <Location replaceServerLocation="true" modifiable="true" forcedefault="false" RedirectNow="false">http://2003xa/Citrix/PNAgent/launch.aspx</Location>
            <Smartcard_Location replaceServerLocation="true">https://2003xa/Citrix/PNAgent/smartcard_launch.aspx</Smartcard_Location>
            <Integrated_Location replaceServerLocation="true">http://2003xa/Citrix/PNAgent/integrated_launch.aspx</Integrated_Location>
        </Resource>
        <Reconnect>
            <Location replaceServerLocation="true" modifiable="true" forcedefault="false" RedirectNow="false">http://2003xa/Citrix/PNAgent/reconnect.aspx</Location>
            <Smartcard_Location replaceServerLocation="true">https://2003xa/Citrix/PNAgent/smartcard_reconnect.aspx</Smartcard_Location>
            <Integrated_Location replaceServerLocation="true">http://2003xa/Citrix/PNAgent/integrated_reconnect.aspx</Integrated_Location>
        </Reconnect>
        <Change_Password>
            <Location replaceServerLocation="true" modifiable="true" forcedefault="false" RedirectNow="false">http://2003xa/Citrix/PNAgent/change_password.aspx</Location>
        </Change_Password>
        <MachineControl>
            <Location replaceServerLocation="true">http://2003xa/Citrix/PNAgent/desktopControl.aspx</Location>
            <Smartcard_Location replaceServerLocation="true">https://2003xa/Citrix/PNAgent/smartcard_desktopControl.aspx</Smartcard_Location>
            <Integrated_Location replaceServerLocation="true">http://2003xa/Citrix/PNAgent/integrated_desktopControl.aspx</Integrated_Location>
        </MachineControl>
    </Request>
    <Failover>
    </Failover>
    <Logon>
        <LogonMethod>prompt</LogonMethod>
        <EnableSmartcardPromptAutoLogon>false</EnableSmartcardPromptAutoLogon>
        <EnableSavePassword>false</EnableSavePassword>
        <EnableKerberos>false</EnableKerberos>
        <SupportNDS>false</SupportNDS>
        <NDS_Settings>
            <DefaultTree>
            </DefaultTree>
        </NDS_Settings>
        <CaptureSmartCardPin>false</CaptureSmartCardPin>
    </Logon>
    <ChangePassword>
        <Allow>Never</Allow>
        <Method>Direct-Only</Method>
    </ChangePassword>
    <UserInterface>
        <ServerSettings>true</ServerSettings>
        <FolderDisplaySettings>true</FolderDisplaySettings>
        <RefreshSettings>false</RefreshSettings>
        <ReconnectSettings>true</ReconnectSettings>
    </UserInterface>
    <ReconnectOptions>
        <ReconnectFromLogon>
            <Disconnected>true</Disconnected>
            <Active>true</Active>
        </ReconnectFromLogon>
        <ReconnectFromButton>
            <Disconnected>true</Disconnected>
            <Active>true</Active>
        </ReconnectFromButton>
    </ReconnectOptions>
    <FileCleanup>
        <Logoff>false</Logoff>
        <Exit>false</Exit>
        <RefreshApp directoryDepth="0">true</RefreshApp>
    </FileCleanup>
    <ICA_Options>
        <DisplaySize>
            <Options>
                <Mode>seamless</Mode>
                <Mode>fullscreen</Mode>
                <Dimension>
                    <Width>640</Width>
                    <Height>480</Height>
                </Dimension>
                <Dimension>
                    <Width>800</Width>
                    <Height>600</Height>
                </Dimension>
                <Dimension>
                    <Width>1024</Width>
                    <Height>768</Height>
                </Dimension>
                <Dimension>
                    <Width>1280</Width>
                    <Height>1024</Height>
                </Dimension>
                <Dimension>
                    <Width>1600</Width>
                    <Height>1200</Height>
                </Dimension>
            </Options>
        </DisplaySize>
        <ColorDepth>
            <Options>4</Options>
            <Options>8</Options>
        </ColorDepth>
        <Audio>
            <Options>high</Options>
            <Options>medium</Options>
            <Options>low</Options>
            <Options>off</Options>
        </Audio>
        <TransparentKeyPassthrough>
            <Options>local</Options>
            <Options>remote</Options>
            <Options>fullscreenonly</Options>
        </TransparentKeyPassthrough>
        <SpecialFolderRedirection modifiable="false">
            <Enabled>false</Enabled>
        </SpecialFolderRedirection>
    </ICA_Options>
    <AppAccess>
        <AppAccessMethod>Remote</AppAccessMethod>
    </AppAccess>
</PNAgent_Configuration> 
```

为什么 PNAgent.Request.Enumeration.Location.ReplaceServerLocation 是一个空字符串，而不是我期望的“http://2003xa/Citrix/PNAgent/enum.aspx”？

```
procedure TForm1.Button3Click(Sender: TObject);
var
  XML: IXMLDocument;
  PNAgent: IXMLPNAgent_ConfigurationType;
begin
  XML := TXMlDocument.Create(nil);
  XML.LoadFromFile('config.xml');
  PNAgent := NewPNAgent_Configuration;
  PNAgent.Text := XML.XML.Text;
  Memo1.Lines.Add(Format('Server Location: %s', [PNAgent.Request.Enumeration.Location.ReplaceServerLocation])); 
```

当我检查 PNAgent.Request.XML 的值时，它显示了这一点（值似乎丢失了）：

```
'<Request><Enumeration><Location replaceServerLocation=""/></Enumeration></Request>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T14:11:46.890

当我注意到除了 LoadXMLDocument 之外，生成的单元中还有一个 LoadPNAgent_Configuration 时，我想测试 TLama 的答案。当我尝试它完美地工作时！

```
procedure TForm1.Button3Click(Sender: TObject);
var
  XML: IXMLDocument;
  PNAgent: IXMLPNAgent_ConfigurationType;
begin
  PNAgent := LoadPNAgent_Configuration('config.xml');
  Memo1.Lines.Add(Format('Server Location: %s', [PNAgent.Request.Enumeration.Location.NodeValue]));
end; 
```

实现是：

```
function LoadPNAgent_Configuration(const FileName: string): IXMLPNAgent_ConfigurationType;
begin
  Result := LoadXMLDocument(FileName).GetDocBinding('PNAgent_Configuration', TXMLPNAgent_ConfigurationType, TargetNamespace) as IXMLPNAgent_ConfigurationType;
end; 
```

# objective-c - 将应用链接到 Dropbox

> ID：10650849
> 
> 赞同：0
> 
> 时间：2012-05-18T10:22:46.580
> 
> 标签：objective-c, xcode

我有一个具有 Dropbox 链接功能的应用程序。有一个按钮叫做链接。然后使用 Dropbox 打开一个 safari 页面，您可以将应用程序链接到您的帐户。但是由于我希望所有用户都使用我的帐户登录，所以我不想在应用程序上显示我的电子邮件和密码，而是通过预览链接，应用程序自动与我的帐户链接，无需显示密码，amd 无需在 safari 中打开 Dropbox 链接。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:52:09.493

非常糟糕的主意。用户应该使用他们自己的 Dropbox 帐户，否则您可能会违反 Dropbox 的服务条款（您不得共享您的凭据），而且也许更重要的是，任何用户都可以删除或破坏所有其他用户的数据。

除了包含您的电子邮件地址和密码外，您可以在应用程序中访问您自己的 Dropbox 帐户的唯一方法是包含一个授权的 OAuth 令牌，任何下载您的应用程序的人都可以轻松提取和滥用该令牌。

# sql - Oracle Sql中的“！=”和“<>”有什么区别吗？

> ID：10650851
> 
> 赞同：139
> 
> 时间：2012-05-18T10:22:56.437
> 
> 标签：sql, oracle

我想知道这两个`not equal`运算符之间`<>`和`!=`Oracle 中是否有任何区别。

是否存在它们可以给出不同结果或不同性能的情况？

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-05-18T10:24:10.090

不，功能上没有任何区别。
（所有其他 DBMS 也是如此——它们中的大多数都支持这两种样式）：

这是当前的 SQL 参考：[https ://docs.oracle.com/database/121/SQLRF/conditions002.htm#CJAGAABC](https://docs.oracle.com/database/121/SQLRF/conditions002.htm#CJAGAABC)

*SQL 标准只为“不等于*”定义了一个运算符，即`<>`

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-05-18T10:32:24.267

实际上，这个运算符有**四种**形式：

```
<>
!=
^= 
```

乃至

```
¬= -- worked on some obscure platforms in the dark ages 
```

它们是相同的，但在需要逐字匹配（存储大纲或缓存查询）时处理不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T14:25:09.027

在大学里，我们被教导“最佳实践”是在为雇主工作时使用 !=，尽管上面的所有运算符都具有相同的功能。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-06-29T23:31:02.677

根据这篇文章， != 执行得更快

[http://www.dba-oracle.com/t_not_equal_operator.htm](http://www.dba-oracle.com/t_not_equal_operator.htm)

# php - 标签不适用于 mozila firefox 4.0，但适用于 IE

> ID：10650853
> 
> 赞同：0
> 
> 时间：2012-05-18T10:23:11.630
> 
> 标签：php

我正在尝试在浏览器中打开 pdf 文件，但不在 mozilla 中打开。但是在 google chrome 和 IE 中打开了相同的文件。我正在使用以下代码在浏览器中执行 pdf 文件。

```
<embed src="admin/images/pdf_file/<?php echo $scheme_desc; ?>#toolbar=0&navpanes=0&scrollbar=1" width="100%" height="450"></embed> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:53:52.557

这个代码：

```
<object type="MIME type of your file" data="your file here" width="100%" height="450"></object> 
```

# javascript - 为什么 javascript setTimeout 一次完成？

> ID：10650855
> 
> 赞同：0
> 
> 时间：2012-05-18T10:23:15.690
> 
> 标签：javascript, jquery, settimeout

我有这段代码，但我不知道为什么循环中的所有函数都被一次调用！

```
this.line = function($l) {
    var $this = this;
    $this.$len = 0;
    $('.active').hide(0,function(){             
        $this.$len = $l.length;
        var j = 1;
        $.each($l,function(i,item){
            var t = setTimeout(function(){
                $this._echoLine($l[i]);
                clearTimeout(t);
                if (j >= $this.$len) $('.active').show();
                j++;
            },500*j);
        });
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T10:25:19.603

这是因为您只在 timeout 函数`j` *内*增加，但延迟（取决于`j`）仍然`1`在注册超时处理程序时。

既然你有一个循环索引变量（`i`），试试这个：

```
$l.each(function(i, item) {
    setTimeout(function() {
        $this._echoLine($l[i]);
    }, 500 * (i + 1));
});

// a separate timeout to fire after all the other ones
setTimeout(function() {
    $('.active').show();
}, ($l.length + 1) * 500); 
```

不需要`clearTimeout`线，所以也不需要声明或存储`t`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:26:52.163

希望它有效。

```
this.line = function($l) {
    var $this = this;
    $this.$len = 0;
    $('.active').hide(0,function(){             
        $this.$len = $l.length;
        var j = 1;
        $.each($l,function(i,item){
            var t = setTimeout(function(){
                $this._echoLine($l[i]);
                clearTimeout(t);
                if (j >= $this.$len) $('.active').show();
                j++;
            });
        });
    });
}

setTimeout(function() { this.line(); }, 500); 
```

# spring - Spring 中的错误：无法找到 XML 模式命名空间的 Spring NamespaceHandler [http://www.springframework.org/schema/mvc]

> ID：10650859
> 
> 赞同：0
> 
> 时间：2012-05-18T10:23:30.243
> 
> 标签：spring

我在 spring mvc 框架中收到此错误：配置问题：无法找到 XML 模式命名空间的 Spring NamespaceHandler [http://www.springframework.org/schema/mvc]

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:28:46.443

确保在 xml 中放置了正确版本的架构。还要确保您的应用程序中包含相同版本的 jar 文件。

如果您使用 SpringSourceToolSuit 或在 eclipse 中安装了 Spring 插件，那么您应该能够创建 Spring 配置文件，默认情况下在其中具有正确的模式定义。

# c - `write(2)` 对本地文件系统的原子性

> ID：10650861
> 
> 赞同：22
> 
> 时间：2012-05-18T10:23:58.993
> 
> 标签：c, file-io, posix, multiprocessing

显然 POSIX 声明

> 文件描述符或流在它所指的打开文件描述中被称为“句柄”；一个打开的文件描述可能有多个句柄。[…] 应用程序影响第一个句柄上文件偏移量的所有活动都应暂停，直到它再次成为活动文件句柄。[...] 句柄不需要在相同的进程中应用这些规则。-- [POSIX.1-2008](http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_05_01 "2.5.1 文件描述符与标准 I/O 流的交互")

和

> 如果两个线程各自调用 [write() 函数]，则每个调用要么看到另一个调用的所有指定效果，要么一个都看不到。-- [POSIX.1-2008](http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_09_07 "2.9.7 线程与常规文件操作的交互")

我对此的理解是，当第一个进程发出 a `write(handle, data1, size1)`和第二个进程发出 `write(handle, data2, size2)`时，写入可以以任何顺序发生，但`data1`and`data2` *必须*是原始且连续的。

但是运行以下代码会给我带来意想不到的结果。

```
#include <errno.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <fcntl.h>
#include <unistd.h>
#include <sys/wait.h>
die(char *s)
{
  perror(s);
  abort();
}

main()
{
  unsigned char buffer[3];
  char *filename = "/tmp/atomic-write.log";
  int fd, i, j;
  pid_t pid;
  unlink(filename);
  /* XXX Adding O_APPEND to the flags cures it. Why? */
  fd = open(filename, O_CREAT|O_WRONLY/*|O_APPEND*/, 0644);
  if (fd < 0)
    die("open failed");
  for (i = 0; i < 10; i++) {
    pid = fork();
    if (pid < 0)
      die("fork failed");
    else if (! pid) {
      j = 3 + i % (sizeof(buffer) - 2);
      memset(buffer, i % 26 + 'A', sizeof(buffer));
      buffer[0] = '-';
      buffer[j - 1] = '\n';
      for (i = 0; i < 1000; i++)
        if (write(fd, buffer, j) != j)
          die("write failed");
      exit(0);
    }
  }
  while (wait(NULL) != -1)
    /* NOOP */;
  exit(0);
} 
```

我尝试在 Linux 和 Mac OS X 10.7.4 上运行它，并使用`grep -a '^[^-]\|^..*-' /tmp/atomic-write.log`显示某些写入不连续或重叠（Linux）或完全损坏（Mac OS X）。

`O_APPEND`在调用中添加标志`open(2)`可解决此问题。很好，但我不明白为什么。POSIX 说

> O_APPEND 如果设置，文件偏移量应设置为每次写入之前的文件末尾。

但这不是这里的问题。我的示例程序从不 `lseek(2)`共享相同的文件描述，因此共享相同的文件偏移量。

我已经在 Stackoverflow 上阅读过类似的问题，但他们仍然没有完全回答我的问题。

[从两个进程对文件进行原子写入](https://stackoverflow.com/questions/6896011/atomic-write-on-file-from-two-process)并没有专门解决进程共享相同*文件描述* （而不是相同文件）的情况。

[如何以编程方式确定“写入”系统调用是否在特定文件上是原子的？](https://stackoverflow.com/questions/7660293/how-does-one-programmatically-determine-if-write-system-call-is-atomic-on-a-pa)说

> POSIX 中定义的`write`调用根本没有原子性保证。

但正如[上面提到的，](http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_09_07 "2.9.7 线程与常规文件操作的交互")它确实有一些。更重要的是， `O_APPEND`似乎触发了这种原子性保证，尽管在我看来，即使没有`O_APPEND`.

你能进一步解释这种行为吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-18T10:40:30.157

`man 2 write`在我的系统上很好地总结了它：

> 请注意，并非所有文件系统都符合 POSIX。

这是邮件列表上最近[讨论](https://lore.kernel.org/linux-ext4/1303154492-25446-1-git-send-email-lczerner@redhat.com/)的引述：`ext4`

> > 当前并发读/写仅在单个页面上是原子的，但不在系统调用中。这可能会导致`read()`返回来自多个不同写入的混合数据，我认为这不是一个好方法。我们可能会争辩说这样做的应用程序被破坏了，但实际上这是我们可以在文件系统级别轻松完成的事情，而不会出现重大性能问题，因此我们可以保持一致。POSIX 也提到了这一点，并且 XFS 文件系统已经具有此功能。

这清楚地表明`ext4`——仅举一个现代文件系统——在这方面不符合 POSIX.1-2008。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-02-07T20:20:51.587

*编辑：* 2017 年 8 月更新了操作系统行为的最新变化。

首先，Windows 上的 O_APPEND 或等效的 FILE_APPEND_DATA 意味着最大文件范围（文件“长度”）的增量在并发写入者下是**原子的。**POSIX 保证了这一点，Linux、FreeBSD、OS X 和 Windows 都正确实现了它。Samba 也正确实现了它，v5 之前的 NFS 没有，因为它缺乏自动附加的有线格式功能。因此，如果您以仅附加方式打开文件，*则并发写入不会在任何主要操作系统上相互撕裂，*除非涉及 NFS。

这并没有说明读取是否会看到撕裂的写入，并且在该 POSIX 上说以下关于 read() 和 write() 对常规文件的原子性：

> 以下所有函数在对常规文件或符号链接进行操作时，在 POSIX.1-2008 中指定的效果中相互之间应是原子的... [许多函数] ... read() ... write( ) ... 如果两个线程各自调用这些函数之一，则每个调用要么看到另一个调用的所有指定效果，要么一个都看不到。[[资源]](http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_09_07)

和

> 写入可以相对于其他读取和写入进行序列化。如果可以（通过任何方式）证明文件数据的 read() 发生在数据的 write() 之后，则它必须反映 write()，即使调用是由不同的进程进行的。[[资源]](http://pubs.opengroup.org/onlinepubs/9699919799/functions/write.html)

但反过来：

> 本卷 POSIX.1-2008 未指定从多个进程并发写入文件的行为。应用程序应该使用某种形式的并发控制。[[资源]](http://pubs.opengroup.org/onlinepubs/9699919799/functions/write.html)

对所有这三个要求的安全解释表明，在同一文件中与范围重叠的所有写入必须相对于彼此进行序列化，并且对于读取，使得撕裂的写入永远不会出现在读者面前。

一个不太安全但仍然允许的解释可能是读取和写入仅在同一进程内的线程之间相互序列化，并且进程之间的写入仅相对于读取进行序列化（即在线程之间存在顺序一致的 i/o 顺序）一个进程，但进程之间的 i/o 只是获取-释放）。

那么流行的操作系统和文件系统是如何在这方面发挥作用的呢？作为提出[Boost.AFIO](https://ned14.github.io/afio/index.html)异步文件系统和文件 i/o C++ 库的作者，我决定编写一个经验测试器。单个进程中的多个线程的结果如下。

* * *

## 没有 O_DIRECT/FILE_FLAG_NO_BUFFERING：

带有 NTFS 的 Microsoft Windows 10：更新原子性 = 1 字节，直到并包括 10.0.10240，从 10.0.14393 至少 1Mb，根据 POSIX 规范可能是无限的。

带有 ext4 的 Linux 4.2.6：更新原子性 = 1 字节

带有 ZFS 的 FreeBSD 10.2：更新原子性 = 至少 1Mb，根据 POSIX 规范可能是无限的。

## O_DIRECT/FILE_FLAG_NO_BUFFERING：

带有 NTFS 的 Microsoft Windows 10：更新原子性 = 直到并包括 10.0.10240，仅当页面对齐时最多 4096 字节，否则如果 FILE_FLAG_WRITE_THROUGH 关闭，则为 512 字节，否则为 64 字节。请注意，这种原子性可能是 PCIe DMA 的一个特性，而不是设计的。从 10.0.14393 开始，至少 1Mb，根据 POSIX 规范可能是无限的。

带有 ext4 的 Linux 4.2.6：更新原子性 = 至少 1Mb，根据 POSIX 规范可能是无限的。请注意，带有 ext4 的早期 Linux 肯定不会超过 4096 字节，XFS 肯定曾经有自定义锁定，但看起来最近的 Linux 终于在 ext4 中解决了这个问题。

带有 ZFS 的 FreeBSD 10.2：更新原子性 = 至少 1Mb，根据 POSIX 规范可能是无限的。

* * *

所以总而言之，带有 ZFS 的 FreeBSD 和带有 NTFS 的最近的 Windows 是符合 POSIX 的。带有 ext4 的最新 Linux 是仅符合 O_DIRECT 的 POSIX。

[您可以在https://github.com/ned14/afio/tree/master/programs/fs-probe](https://github.com/ned14/afio/tree/master/programs/fs-probe)看到原始的经验测试结果。请注意，我们仅在 512 字节倍数上测试撕裂的偏移量，因此我不能说 512 字节扇区的部分更新是否会在读取-修改-写入周期内撕裂。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-21T11:01:42.100

对这里标准要求的一些误解来自于进程与线程的使用，以及这对您正在谈论的“处理”情况意味着什么。特别是，您错过了这部分：

> 句柄可以通过显式用户操作来创建或销毁，而不会影响底层打开文件的描述。**创建**它们的一些方法包括 fcntl()、dup()、fdopen()、fileno() 和**`fork()`**. 它们至少可以被 fclose()、close() 和 exec 函数销毁。[ ... ] 请注意，在 fork() 之后，存在两个句柄，而之前存在一个句柄。

来自您在上面引用的 POSIX 规范部分。本节没有详细说明对“create [handles using ] `fork`”的引用，但规范[`fork()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fork.html)添加了一些细节：

> 子进程应拥有**自己**的父文件描述符副本。每个子文件描述符都应与父文件描述符对应的打开文件描述**相同。**

这里的相关位是：

*   孩子有父母的文件描述符的*副本*
*   孩子的副本是指父母可以通过所述 fds 访问的同一“事物”
*   文件*描述****ors***和***文件****描述*不是***一回事***；特别是，文件描述符是上述意义上的*句柄。*

 **这就是第一个引用当它说“`fork()`创建 [...] 句柄”时所指的内容 - 它们被创建为*副本*，因此，从那时起，*分离*，并且不再同步更新。

在您的示例程序中，每个子*进程*都有自己的副本，该副本以相同的状态开始，但在复制行为之后，这些文件描述符/句柄已成为*独立的实例*，因此写入相互竞争。这对于标准是完全可以接受的，因为[`write()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/write.html)只有保证：

> 在常规文件或其他能够查找的文件上，数据的实际写入应从与 fildes 关联的文件偏移量指示的文件中的位置开始。在 write() 成功返回之前，文件偏移量应增加实际写入的字节数。

这意味着虽然它们都以相同的偏移量开始写入（因为 fd*副本*是这样初始化的），但即使成功，它们也可能都写入不同的数量（标准不能保证`N`字节的写入请求会*准确* `N`写入字节；对于任何`0 <=`实际的事情都可以成功`<= N`），并且由于未指定写入的顺序，因此上面的整个示例程序具有未指定的结果。即使写入了请求的总数量，上述所有标准都表示文件偏移量是*递增*的——它没有说它是原子的（仅一次）递增，也没有说实际的数据写入将以原子的方式发生。

但有一件事是有保证的——您永远不会在文件中看到任何在任何写入之前都不存在的内容，或者不是来自任何写入写入的任何数据的任何内容。如果这样做，那将是损坏，并且是文件系统实现中的错误。您在上面观察到的情况很可能是……如果最终结果无法通过对部分写入的重新排序来解释。

使用`O_APPEND`解决了这个问题，因为再次使用它 - 参见[`write()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/write.html)，确实：

> 如果设置了文件状态标志的 O_APPEND 标志，则文件偏移量应在每次写入之前设置为文件末尾，并且在更改文件偏移量和写入操作之间不应发生中间文件修改操作。

这是您寻求的“之前”/“无干预”序列化行为。

*线程*的使用会部分改变行为 - 因为线程在创建时不会接收文件描述符/句柄的*副本*，而是在实际（共享）的副本上操作。线程不会（必然）都以相同的偏移量开始写入。但是部分写入成功的选项仍然意味着您可能会以您不想看到的方式看到交错。然而，它可能仍然完全符合标准。

**道德**：不要指望 POSIX/UNIX 标准*默认具有限制性*。在常见情况下，规范是故意放宽的，并且要求*您作为程序员*明确说明您的意图。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-18T13:02:51.680

您误解了您引用的规范的第一部分：

> 文件描述符或流在它所指的打开文件描述中被称为“句柄”；一个打开的文件描述可能有多个句柄。[…] 应用程序影响第一个句柄上的文件偏移量的所有活动都应暂停，直到它再次成为活动文件句柄。[...] 句柄不需要在相同的进程中应用这些规则。

这对处理并发访问的实现没有任何要求。相反，它要求应用程序不要进行并发访问，即使来自不同的进程，如果您想要明确定义的输出顺序和副作用。

唯一保证原子性的时间是在写入大小适合的管道`PIPE_BUF`。

顺便说一句，即使`write`对普通文件的调用是原子的，除了写入适合 的管道的情况外`PIPE_BUF`，`write`总是可以返回部分写入（即写入的字节数少于请求的字节数）。这种小于请求的写入将是原子的，但就整个操作的原子性而言，它根本无助于这种情况（您的应用程序必须重新调用`write`才能完成）。**

# java - 使用 AbstractTableModel 时不显示列名

> ID：10650866
> 
> 赞同：0
> 
> 时间：2012-05-18T10:24:29.887
> 
> 标签：java, swing, jtable, abstracttablemodel

海。我正在尝试使用 AbstractTableModel 构建一个简单的 JTable，但即使我使用了 JScrollPane，列名也不会出现。

```
public class TableModel extends AbstractTableModel{
private String[] columnNames = new String[]{"#","Name","Price","Quantity","Description"};

public TableModel() {
    super();
    System.out.println("constructor");

}

public int getColumnCount() {
    return 0;
}

public int getRowCount() {
    return 0;
}

public Object getValueAt(int rowIndex, int columnIndex) {
    return null;
}

public String getColumnName(int columnIndex) {
    System.out.println("in");
    return columnNames[columnIndex];
}

} 
```

我通过以下方式将表格放在 JPanel 上：

```
table = new JTable(new TableModel());
add(new JScrollPane(table)); 
```

方法 getColumnName 未被调用。为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T10:27:06.683

由于您的列数为零，因此无需获取列名。

尝试

```
public int getColumnCount() {
    return columnNames.length;
} 
```

# tomcat - Tomcat默认应用程序不改变上下文

> ID：10650867
> 
> 赞同：0
> 
> 时间：2012-05-18T10:24:32.373
> 
> 标签：tomcat, root

我制作了一个 Web 应用程序并将其放入 tomcat webapps 文件夹中，如 in.war

为了使其可访问，我在 ROOT 文件夹的 index.html 中添加了一个元重定向条目，以便当有人键入 www.mydomain.com 时，他会被重定向到 www.mydomain.com/in

我的网站上有很多页面，例如 www.mydomain.com/in/rest/page

现在我想要的是我的应用程序成为根应用程序。

因此，当有人键入 www.mydomain.com 时，他可以在该 url 本身上看到我的主页，而无需任何重定向。

但是所有旧链接也应该可以工作，因为我的所有页面都已被主要搜索引擎抓取和索引。

请告诉我如何以最好的方式做到这一点。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T21:18:50.843

如果您希望您的 webapp 成为“根”webapp（即以“/”开头访问），那么您需要将您的 WAR 文件重命名为 ROOT.war（大小写很重要，即使在不区分大小写的情况下也是如此文件系统）。

之后，您需要将所有旧 URL 映射到新 URL。这是一种方法：

为自己获取一份 urlrewrite (http://www.tukey.org/urlrewrite/)。安装它并在新重命名的 ROOT webapp 中配置它，以将所有 /in/* 请求映射到 /*。如果您愿意，您可以将所有这些请求变成 301 重定向，这意味着资源已永久移动。表现良好的代理和搜索引擎应相应地更新其 URL。

# c - 语音质量差的rtp统计

> ID：10650869
> 
> 赞同：1
> 
> 时间：2012-05-18T10:24:49.887
> 
> 标签：c, voip, wireshark, rtp

在测试我们的新过滤应用程序期间，我们的语音质量非常差。

应用程序使用 netfilter_queue 库从内核接收数据包。然后将数据包插入一个新的用户管理队列并对其进行一些转换，例如连接 udp 有效负载。

网络很健康。它在我们的实验室内。它不会丢弃数据包或任何东西。

在我们的应用程序中，我们不会立即转发数据包。在收到足够的数据包以增加 rtp 打包时间 (ptime) 后，我们通过原始套接字转发消息并将 dscp 设置为 10，以便这次数据包可以逃避 iptable 规则。

从客户端来看，RTP 流分析显示几乎每个流都存在问题。下面给出了一些流的摘要：

流 1：

```
Max delta = 1758.72 ms at packet no. 40506
Max jitter = 231.07 ms. Mean jitter = 9.27 ms.
Max skew = -2066.18 ms.
Total RTP packets = 468   (expected 468)   Lost RTP packets = 0
(0.00%)   Sequence errors = 0
Duration 23.45 s (-22628 ms clock drift, corresponding to 281 Hz (-96.49%) 
```

流 2：

```
Max delta = 1750.96 ms at packet no. 45453
Max jitter = 230.90 ms. Mean jitter = 7.50 ms.
Max skew = -2076.96 ms.
Total RTP packets = 468   (expected 468)   Lost RTP packets = 0
(0.00%)   Sequence errors = 0
Duration 23.46 s (-22715 ms clock drift, corresponding to 253 Hz (-96.84%) 
```

流 3：

```
Max delta = 71.47 ms at packet no. 25009
Max jitter = 6.05 ms. Mean jitter = 2.33 ms.
Max skew = -29.09 ms.
Total RTP packets = 258   (expected 258)   Lost RTP packets = 0
(0.00%)   Sequence errors = 0
Duration 10.28 s (-10181 ms clock drift, corresponding to 76 Hz (-99.05%) 
```

知道我们应该在哪里寻找问题吗？

# android - ProgressDialog 仅在后台工作（使用 AsyncTask）之后出现。需要它

> ID：10650872
> 
> 赞同：0
> 
> 时间：2012-05-18T10:25:13.047
> 
> 标签：android, android-asynctask, progressdialog

我正在使用 AsyncTask 来更新水平进度对话框。没有错误。我唯一想不通的是 ProgressDialog 仅在后台工作后出现。

**也就是说，单击按钮时（依次执行以下操作：）**

```
 //within concerned OnClick Function of my main class:
    ASYNC_TEST GH=new ASYNC_TEST(this,"something","something","url", "booga");
    String response=GH.execute().get(); 
```

**按钮键保持按下很长时间（HTTP POST 很慢），然后突然出现进度对话框不超过一秒钟，一次完成 100% 并消失。**

我正在粘贴我的代码：

下面是扩展 AsyncTask 的类，它处理 HTTP Post 操作并且应该更新进度条。

```
 import android.app.ProgressDialog;
    import android.os.AsyncTask;
    import android.content.Context;
    import android.util.Log;

    public class ASYNC_TEST extends AsyncTask<Void, Integer, String> {

    private String result = "";
    private int ProgressStatus;
    String username, password, THE_URL, YouSure;

    private ProgressDialog pdb;

    public ASYNC_TEST(Context ConT, String username, String password,String THE_URL, String YouSure) 
    {
        Log.d("LOG_TAG", "Constructor");

        this.username = username;
        this.password = password;
        this.THE_URL = THE_URL;
        this.YouSure = YouSure;

        pdb = new ProgressDialog(ConT);
    }

    @Override
    protected void onPreExecute() 
    {

        pdb.setCancelable(true);
        pdb.setMessage("Logging In. Hold On a Sec...");
        pdb.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        pdb.setProgress(0);
        pdb.setMax(100);
        pdb.show();

        Log.d("LOG_TAG", "Pre-Execute");
        super.onPreExecute();
    }

    @Override
    protected void onPostExecute(String res) 
    {

        Log.d("LOG_TAG", "Post-Execute");
        pdb.dismiss();
        super.onPostExecute(res);
    }

    @Override
    protected void onProgressUpdate(Integer... progress) 
    {

        Log.d("LOG_TAG", "Progress Update: " + progress[0]);
        pdb.setProgress(progress[0]);
        super.onProgressUpdate();
    }

    @Override
    protected String doInBackground(Void... smt) 
    {
        Log.d("LOG_TAG", "doInBackground: ");

        try {

            ProgressStatus = 0;
            publishProgress(0);

            //Stuff

            ProgressStatus = 10;
            publishProgress(10);

            // More Stuff (HTTP POST)

            ProgressStatus = 20;
            publishProgress(10);

            //....Finally...

            ProgressStatus = 100;
            publishProgress(100);

        catch (Exception e) 
        {
            e.printStackTrace();
        }

        return "";

    }
    } 
```

日志数据：

```
 05-18 15:19:52.773: D/LOG_TAG(1596): Constructor
    05-18 15:19:52.822: D/LOG_TAG(1596): Pre-Execute
    05-18 15:19:52.832: D/LOG_TAG(1596): doInBackground: 
    05-18 15:19:53.482: D/dalvikvm(1596): GC freed 13648 objects / 583400 bytes in 77ms
    05-18 15:19:53.502: D/OpenSSLSessionImpl(1596): Freeing OpenSSL session
    05-18 15:19:53.982: D/dalvikvm(1596): GC freed 17495 objects / 885728 bytes in 77ms
    05-18 15:19:54.292: D/dalvikvm(1596): GC freed 10363 objects / 441600 bytes in 71ms
    05-18 15:19:54.982: D/dalvikvm(1596): GC freed 6564 objects / 298808 bytes in 71ms
    05-18 15:19:55.132: I/global(1596): Default buffer size used in BufferedReader constructor. It would be better to be explicit if an 8k-char buffer is required.
    05-18 15:19:55.212: D/dalvikvm(1596): GC freed 843 objects / 85392 bytes in 65ms
    05-18 15:19:55.212: I/dalvikvm-heap(1596): Grow heap (frag case) to 4.120MB for 22148-byte allocation
    05-18 15:19:55.282: D/dalvikvm(1596): GC freed 1 objects / 14776 bytes in 68ms
    05-18 15:19:56.012: I/global(1596): Default buffer size used in BufferedReader constructor. It would be better to be explicit if an 8k-char buffer is required.
    05-18 15:19:56.092: D/dalvikvm(1596): GC freed 1758 objects / 193224 bytes in 67ms
    05-18 15:19:56.172: D/dalvikvm(1596): GC freed 391 objects / 44792 bytes in 67ms
    05-18 15:19:56.252: D/dalvikvm(1596): GC freed 411 objects / 62120 bytes in 66ms
    05-18 15:19:56.252: I/dalvikvm-heap(1596): Grow heap (frag case) to 4.194MB for 54142-byte allocation
    05-18 15:19:56.322: D/dalvikvm(1596): GC freed 1 objects / 36104 bytes in 69ms
    05-18 15:19:56.413: D/dalvikvm(1596): GC freed 955 objects / 67536 bytes in 70ms
    05-18 15:19:56.413: I/dalvikvm-heap(1596): Grow heap (frag case) to 4.237MB for 81208-byte allocation
    05-18 15:19:56.483: D/dalvikvm(1596): GC freed 1 objects / 54152 bytes in 69ms
    05-18 15:19:56.852: I/global(1596): Default buffer size used in BufferedReader constructor. It would be better to be explicit if an 8k-char buffer is required.
    05-18 15:19:56.942: D/dalvikvm(1596): GC freed 1317 objects / 241880 bytes in 71ms
    05-18 15:19:57.112: D/LOG_TAG(1596): Progress Update: 0
    05-18 15:19:57.112: D/LOG_TAG(1596): Progress Update: 10
    05-18 15:19:57.122: D/LOG_TAG(1596): Progress Update: 20
    05-18 15:19:57.122: D/LOG_TAG(1596): Progress Update: 30
    05-18 15:19:57.122: D/LOG_TAG(1596): Progress Update: 40
    05-18 15:19:57.133: D/LOG_TAG(1596): Progress Update: 50
    05-18 15:19:57.133: D/LOG_TAG(1596): Progress Update: 70
    05-18 15:19:57.133: D/LOG_TAG(1596): Progress Update: 90
    05-18 15:19:57.133: D/LOG_TAG(1596): Progress Update: 100
    05-18 15:19:57.133: D/LOG_TAG(1596): Post-Execute
    05-18 15:19:57.513: W/InputManagerService(51): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@44c5f5a0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:29:48.490

Seems like the delay is due to **get()** method in `String response=GH.execute().get();`. It puts wait on the execution till the AsyncTask is completed.

As per Javadoc:

> **get()**: Waits if necessary for the computation to complete, and then retrieves its result.

I think you should simply call `GH.execute();` to execute your AsyncTask wihtout affecting UI thread by putting it on hold.

# shell - 如果变量小于浮点数，Shell 写入文件

> ID：10650874
> 
> 赞同：0
> 
> 时间：2012-05-18T10:25:14.983
> 
> 标签：shell

我有以下外壳代码。

```
i=0
while read name pren med
do
   i=`expr $i + 1`
   while read name2 pren2 n1 n2 n3 n4 n5 n6 n7
   do
      if [ $name$pren = $name2$pren2 ]
         then
            MED[$i]=`expr $n1 + $n2 + $n3 + $n4 + $n5 + $n6 + $n7`
            MED[$i]=`echo "scale=2;${MED[$i]}/7" | bc -l `
            MED[$i]=`echo "scale=2;($med+${MED[$i]})/2" | bc -l ` 
            PERS[$i]="$name $pren ${MED[$i]}"
            *echo ${PERS[$i]} >> notefinale
      fi    
  done <$2
done <$1 
```

该代码从 2 个文件中读取 Name 、 Second Name 和一些成绩。之后，它会评估平均成绩，即 MED[$i]，无论如何我想制作标有“*”的回声，只有当 MED[$i] 高于 > 8.5 时。我怎么写这个？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:28:31.800

使用 bc 将值乘以 10，将其存储在临时变量中，然后将其与 85 进行比较。

如果您在使用 bc 后遇到值仍然是非整数的问题，那么您可以使用：

```
tmpvar=`printf "%0.0f" $float_value` 
```

bash 没有内置对比较运算的浮点运算的支持，因此，例如，进行乘法运算：

```
med_int=`echo "scale=0; ${MED[$i]} * 10" | bc -l`
# force into an integer
med_int=`printf "%0.0f" $med_int`
if [ $med_int -gt 85 ]; then
    echo ${PERS[$i]} >> notefile
fi 
```

# python - 如何在 Python 中并行化 PDF 生成

> ID：10650882
> 
> 赞同：1
> 
> 时间：2012-05-18T10:25:32.300
> 
> 标签：python, parallel-processing

我有一个功能可以有效地做到这一点->

对于每个内容： wkhtmlcreatepdf(content)

例如，内容可以是 10 条大记录。

我需要并行化这个过程而不是等待每个完成。是否可以 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:30:19.577

当然这是可能的。你只需要使用这个：

[http://docs.python.org/library/multiprocessing.html](http://docs.python.org/library/multiprocessing.html)

或这个：

[http://docs.python.org/library/threading.html](http://docs.python.org/library/threading.html)

请注意，如果作业的数量真的很大，那么为每个作业创建线程/进程甚至可能会使您的操作系统崩溃（并且至少使用 100 个线程不会有任何优势）。因此，您还应该使用线程/进程池。例如看到这个：

[http://docs.python.org/library/multiprocessing.html#using-a-pool-of-workers](http://docs.python.org/library/multiprocessing.html#using-a-pool-of-workers)

# iphone - 更改 UINavigationBar 标题的字体

> ID：10650883
> 
> 赞同：0
> 
> 时间：2012-05-18T10:25:37.700
> 
> 标签：iphone, ios5, uibutton, uinavigationbar, uifont

我有这个代码来显示按钮作为导航栏的标题，然后在按钮代码中我编写代码来更改取消按钮文本标签的字体。但我没有使用下面的代码获得正确的字体版本。

```
UIButton *titleButton = [[UIButton alloc]init];
titleButton = [UIButton buttonWithType:UIButtonTypeCustom];
[titleButton setFrame:CGRectMake(0, 0, 170, 35)];
[titleButton setTitle:[NSString stringWithFormat:@"%@ %@",delegatee.selectedBook,delegatee.selectedChapter]forState:UIControlStateNormal];

titleButton.titleLabel.font =[UIFont fontWithName:@"Georgia" size:10.0f];
[titleButton addTarget:self action:@selector(ClickbtnChaperselection:)forControlEvents:UIControlEventTouchUpInside];
self.navigationItem.titleView = titleButton; 
```

iput georgia，但我没有得到正确的字体谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:29:22.853

尝试这个 ：

```
UIButton *titleButton = [UIButton buttonWithType:UIButtonTypeCustom];    
[titleButton setFrame:CGRectMake(0, 0, 170, 35)];
[titleButton setTitle:[NSString stringWithFormat:@"%@ %@",delegatee.selectedBook,delegatee.selectedChapter]forState:UIControlStateNormal];

titleButton.titleLabel.font =[UIFont fontWithName:@"Georgia" size:10.0f];
[titleButton addTarget:self action:@selector(ClickbtnChaperselection:)forControlEvents:UIControlEventTouchUpInside];
self.navigationItem.titleView = titleButton; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:48:23.557

尝试这个

对于按钮：- `use in Navigation Title view , this is work IOS 4 and IOS 5`，我用.....

```
 UIButton *titleButton = [UIButton buttonWithType:UIButtonTypeCustom];    
[titleButton setFrame:CGRectMake(0, 0, 170, 35)];
[titleButton setTitle:@"dee"forState:UIControlStateNormal];

 UIFont *font=[UIFont fontWithName:@"A_Nefel_Sereke" size:21];
titleButton.titleLabel.font =font;

titleButton.titleLabel.textColor = [UIColor redColor];
[titleButton addTarget:self action:@selector(ClickbtnChaperselection:)forControlEvents:UIControlEventTouchUpInside];
self.navigationItem.titleView = titleButton; 
```

我认为您的字体名称有问题...请检查

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T10:44:45.133

你为什么不把一个标签而不是一个按钮作为标题呢？

这是标题标签的代码：

```
UILabel *titleView = (UILabel *)self.navigationItem.titleView;
if (!titleView)
  {
    titleView = [[UILabel alloc] initWithFrame:CGRectZero];
    [titleView setBackgroundColor:[UIColor clearColor]];
    [titleView setFont:[UIFont fontWithName:@"Georgia" size:10.0f]];

    [self.navigationItem setTitleView:titleView];
    [titleView release];
  }
titleView.text = title; 
```

如果您需要它是 UIButton，根据您的需要调整代码应该不会太难。

祝你好运 ！

# php - 如何设置单个 symfony 应用程序能够允许多个用户，每个用户都有一个专用数据库？

> ID：10650892
> 
> 赞同：1
> 
> 时间：2012-05-18T10:26:06.920
> 
> 标签：php, symfony1, symfony-1.4, demo, multi-user

我有一个 Symfony 应用程序，我想在线实现一个演示。这个演示应该允许每个用户拥有自己的数据库，而不是与其他人共享。

由于我想避免为每个用户创建一个新的虚拟主机，指向一个为新用户新创建的目录，并在其中包含 symfony 应用程序的代码副本，我宁愿有一个单一的 symfony 应用程序，这是允许每个用户登录，然后使用应用程序（与他人共享）但指向用户的数据库。

Symfony 如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:29:45.473

到目前为止，我发现的最佳解决方案是使用环境：每个用户都有自己的环境，因此具有特定的控制器（例如`MyUser.php`在`/web`目录中），并在文件中指定了专用数据库`database.yml`。

# facebook - Facebook 询问新权限

> ID：10650893
> 
> 赞同：1
> 
> 时间：2012-05-18T10:26:08.940
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我有一个只要求“user_about_me”的应用程序。现在我想请求新权限（publish_stream），但如果用户忽略新权限，响应对象返回“已连接”。因为我想发布到用户的墙上，所以在发布到用户的墙上时会出现错误“用户尚未授权应用程序执行此操作”。

我怎样才能做到这一点？

我正在使用 Javascript SDK。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T15:29:19.917

基本上，当用户登录时，您必须处理用户权限/授权的所有可能性。这是我完成的一些 FB 集成的简化工作示例：

```
FB.Event.subscribe('auth.login', function(response) {
    if(response.status === 'connected'){
            FB.api('/me/permissions', function(resp) {
              if(resp.data[0].publish_stream){
                  //User has permissions and authorization
              }
              else{
                  //User has not enabled publish stream, ask them to enable permission
              }
            }
} 
```

如果他们有权限，我会向他们展示他们的头像/用户名和其他一些选项。如果没有，我会提供一个链接，在单击时询问他们所需的权限。

# c++ - 派生类的 C++ 构造函数，其中基类包含类成员

> ID：10650894
> 
> 赞同：1
> 
> 时间：2012-05-18T10:26:13.193
> 
> 标签：c++, oop, inheritance, constructor

鉴于此代码

```
class Address
{
  private:
    char * streetName;
    int houseNumber;
  public:
    Address(char* strName, int houseNumber)
    {....}
 }

class Person
{
   protected:
       char *name, * phoneNumber;
       Address addr;
   public:
       Person(char* n, char* pN, char* stN, char* hsN): addr(stN,hsN)
       {
           //...... assign variable for person
       }      
};

class Officer: public Person
{
    private:
        double salary;
    public:
        // How to write the constructor??
        Officer(char* _name, char*_phoneNumber, char* _streetName, int _streetNumber, double _salary): .... ????
} 
```

如何编写派生类Officer的构造函数，它有五个输入变量，其中_streetName和_streetNumber将被馈送到基类Person中包含的成员对象addr？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T10:30:46.790

You can't set base members in derived `class` initializer lists directly.

```
Officer(char* _name, char*_phoneNumber, char* _streetName, 
        int _streetNumber, double _salary):
     Person(_name, _phoneNumber, _streetName, _streetNumber),
     salary(_salary) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T10:31:38.297

您在课堂上看到的相同方法`Person`也适用于此处：

```
 Officer(char* _name, char*_phoneNumber, char* _streetName, int _streetNumber, double _salary):
       Person(_name, _phoneNumber, _streetName, _streetNumber) {} 
```

您不能在 C++ 中初始化父类的成员变量。这些都是原因

*   它会破坏封装，OOP 的想法是你可以对一个类做的所有事情都可以通过它的接口访问（在这种情况下，初始化将由构造函数完成）。请注意，这与您的父类的代码一致，它将`addr`通过您传递给它的任何内容来愉快地初始化该成员。
*   在 C++ 中有一个初始化顺序，它指定首先初始化父级，并且父级（与任何类一样）在运行其构造函数代码之前初始化其成员变量。不会有地方让孩子“注入”的初始化运行
*   确保初始化运行一次且仅运行一次会出现问题。孩子想要（或已经）初始化一些成员本身将是一场噩梦

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T10:43:44.427

您可以像这样调用构造函数：

官员(char* _name, char*_phoneNumber, char* _streetName, int _streetNumber, double _salary): Person(char* _name, char*_phoneNumber, char* _streetName, int _streetNumber),salary(salary){}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T10:39:36.753

首先，您需要知道该官员也是一个人。意味着您必须亲自为军官做所有事情。

所以你的官员构造函数应该在内部调用人的构造函数，如下所示：

```
Officer(char* _name, char*_phoneNumber, char* _streetName, int _streetNumber, double _salary):Person(_name, _phoneNumber, _streetName, _streetNumber) 
```

现在您还必须构造薪水的值。因此您的构造函数变为：

```
 Officer(char* _name, char*_phoneNumber, char* _streetName, int _streetNumber, double _salary):Person(_name, _phoneNumber, _streetName, _streetNumber),salary(_salary)
{} 
```

# nginx - 在 RPM 系统上使用 Lua 构建 nginx

> ID：10650904
> 
> 赞同：0
> 
> 时间：2012-05-18T10:27:01.337
> 
> 标签：nginx, lua, rpm

我想用 Lua 第三方模块构建 nginx。该模块需要 Lua 库。Lua 5.1 安装在我的服务器上。但是当我使用 nginx lua 模块的路径运行 ./compile 时。抛出一个错误：

```
checking for Lua library ... not found 
checking for Lua library in /usr/local/ ... not found 
checking for Lua library in /usr/pkg/ ... not found 
checking for Lua library in /opt/local/ ... not found 
checking for Lua library in /usr/local/../lua51/ ... not found 
checking for Lua library in /usr/ ... not found  
./configure: error: ngx_http_lua_module requires the Lua library. 
```

我尝试通过导出提供路径，`LUA_LIB=/usr/local/lib/`但这也不起作用。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T11:02:31.867

也许你需要 package `lua-devel`。

# java - 属性文件点分隔键名

> ID：10650909
> 
> 赞同：8
> 
> 时间：2012-05-18T10:27:20.417
> 
> 标签：java, c#-4.0, properties

我刚刚注意到，属性文件中的几乎所有键值都以点分隔的名称命名。例如 -some.key=some value 有人知道为什么吗？只是好奇的问道。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-18T10:36:10.513

它基本上是一种约定，可以更容易地查看哪些属性是相关的。

例如：

person.title="Title" person.surname="Surname" job.description="一些描述"

很容易查看哪些属性是相关的，并且使用智能编辑器，您可以选择仅查看人员的属性。一些 IDE 和编辑器甚至可以使用它为您添加代码完成，因为您知道您想与 person 一起工作，但可能不记得确切的属性。

我们有时会低估可读性的力量，但这样的约定让任何人都可以轻松添加、编辑或维护这些属性。这在团队工作或入职初级人员时变得非常重要。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-18T10:31:45.817

没有任何具体原因，但这只是为了更好地理解程序员而已。您也可以直接编写 key=value 而不使用任何类型的“some” :-)

# java - 使用 SPenSdk 库的画布视图保存模式中的问题

> ID：10650915
> 
> 赞同：1
> 
> 时间：2012-05-18T10:27:40.443
> 
> 标签：java, android

我创建了一个使用 SPenSdk 库的应用程序，我的应用程序很简单，我所做的是在应用程序开始时`canvasView`用笔、橡皮擦、撤消和重做选项打开一个。

我有两个按钮，一个将画布保存为 SD 卡中的图像，另一个按钮用于加载保存的图像。

现在我的问题是，每当我加载保存的图像并编辑保存的图像并再次保存图像时，它都会保存为新图像而不是更新保存的图像，为什么会这样？

我把我的代码放在这里。如果可能，请举个例子帮助我解决这个问题。

**java文件的代码**

```
public class CanvasActivity extends Activity {

private CanvasView  m_CanvasView;
private SettingView m_SettingView;
private Button      m_PenButton, m_EraserButton, m_UndoButton, m_RedoButton, m_SaveButton;      
private int         mButtonTextNormalColor;

public static final String DEFAULT_APP_IMAGEDATA_DIRECTORY = "/mnt/sdcard/SmemoExample";

private File        m_Folder = null;
public static final String SAVED_FILE_EXTENSION = "png";
public static final String EXTRA_IMAGE_PATH = "path";
public static final String EXTRA_IMAGE_NAME = "filename";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.main);

    m_PenButton     = (Button) findViewById(R.id.pen_button);
    m_PenButton.setOnClickListener(mBtnClickListener);
    mButtonTextNormalColor = m_PenButton.getTextColors().getDefaultColor();

    m_EraserButton  = (Button) findViewById(R.id.erase_button);
    m_EraserButton.setOnClickListener(mBtnClickListener);

    m_UndoButton    = (Button) findViewById(R.id.undo_button);
    m_UndoButton.setOnClickListener(undoNredoBtnClickListener);
    m_UndoButton.setEnabled(false);

    m_RedoButton    = (Button) findViewById(R.id.redo_button);
    m_RedoButton.setOnClickListener(undoNredoBtnClickListener);       
    m_RedoButton.setEnabled(false);

    m_SaveButton    = (Button) findViewById(R.id.save_button);
    m_SaveButton.setOnClickListener(mBtnClickListener);

    m_CanvasView    = (CanvasView) findViewById(R.id.canvas_view);
    m_SettingView   = (SettingView) findViewById(R.id.setting_view);

    m_CanvasView.setSettingView(m_SettingView);
    m_CanvasView.setOnHistoryChangeListener(historyChangeListener);
    m_CanvasView.setInitializeFinishListener(mInitializeFinishListener);

    m_Folder        = new File(DEFAULT_APP_IMAGEDATA_DIRECTORY);

    String mFileName = getIntent().getStringExtra(EXTRA_IMAGE_NAME);        
    loadCanvas(mFileName);
}

private OnClickListener undoNredoBtnClickListener = new OnClickListener() {
    @Override
    public void onClick(View v) {
        if (v == m_UndoButton) {
            m_CanvasView.undo();
        } else if (v == m_RedoButton) {
            m_CanvasView.redo();
        }

        m_UndoButton.setEnabled(m_CanvasView.isUndoable());
        m_RedoButton.setEnabled(m_CanvasView.isRedoable());
    }
};

OnClickListener mBtnClickListener = new OnClickListener() {
    @Override
    public void onClick(View v) {
        if (v.getId() == m_PenButton.getId()) {
            m_CanvasView.changeModeTo(CanvasView.PEN_MODE);
            m_PenButton.setSelected(true);
            m_PenButton.setTextColor(Color.WHITE);
            m_EraserButton.setSelected(false);
            m_EraserButton.setTextColor(mButtonTextNormalColor);

            if (m_PenButton.isSelected()) {
                m_SettingView.showView(AbstractSettingView.PEN_SETTING_VIEW);

            }
        } else if (v.getId() == m_EraserButton.getId()) {
            m_CanvasView.changeModeTo(CanvasView.ERASER_MODE);

            m_EraserButton.setSelected(true);
            m_EraserButton.setTextColor(Color.WHITE);
            m_PenButton.setSelected(false);
            m_PenButton.setTextColor(mButtonTextNormalColor);

            if (m_EraserButton.isSelected()) {
                m_SettingView.showView(AbstractSettingView.ERASER_SETTING_VIEW);
            }
        } else if(v.getId() == m_SaveButton.getId()) {
            saveCanvas();
        }
    }
};

public boolean saveCanvas() {
    byte[] buffer = m_CanvasView.getData();

    if (buffer == null)
        return false;
    if (!(m_Folder.exists()))
        m_Folder.mkdirs();

    String savePath = m_Folder.getPath() + '/' + UtilitiesActivity.getUniqueFilename(m_Folder, "image", SAVED_FILE_EXTENSION);

    if (UtilitiesActivity.writeBytedata(savePath, buffer))
        return true;
    else
        return false;
}

public boolean loadCanvas(String fileName) {
    String loadPath = m_Folder.getPath() + '/' + fileName;

    byte[] buffer = UtilitiesActivity.readBytedata(loadPath);

    if (buffer == null)
        return false;

    m_CanvasView.setData(buffer);

    return true;
}

private CanvasView.OnHistoryChangeListener historyChangeListener = new CanvasView.OnHistoryChangeListener() {
    @Override
    public void onHistoryChanged(boolean bUndoable, boolean bRedoable) {
        m_UndoButton.setEnabled(bUndoable);
        m_RedoButton.setEnabled(bRedoable);
    }
};

CanvasView.InitializeFinishListener mInitializeFinishListener = new CanvasView.InitializeFinishListener() {

    @Override
    public void onFinish() {
        Bitmap bg = BitmapFactory.decodeResource(getResources(), R.drawable.canvas_bg);
        m_CanvasView.setBackgroundImage(bg);
        bg.recycle();
    }
};
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:39:54.377

当您保存图像时，它会使用一个新名称并保存它。旧图像不会被覆盖。因此您可以编辑保存画布功能。方法如下图

```
public boolean saveCanvas()
{
byte[] buffer = mCanvasView.getData();

if(buffer == null)
        return false;

    String savePath = mFolder.getPath() + '/' + ExampleUtils.getUniqueFilename(mFolder, "image", SAVED_FILE_EXTENSION);
    Log.d(TAG, "Save Path = " + savePath);

    if(ExampleUtils.writeBytedata(savePath, buffer))
        return true;
    else 
        return false;       
} 
```

函数“getUniqueFilename”生成一个新名称。因此，如果您更新图像，请避免使用该函数

```
ExampleUtils.getUniqueFilename(mFolder, "image", SAVED_FILE_EXTENSION); 
```

并用旧名称保存。然后它将被覆盖。

# php - 如何检查一个数组元素是否完全存在于php中的另一个数组中

> ID：10650918
> 
> 赞同：4
> 
> 时间：2012-05-18T10:27:45.083
> 
> 标签：php, arrays

我有两个数组，例如：

```
array1={1,2,3,4,5,6,7,8,9};
array2={4,6,9} 
```

有没有什么功能可以让我确定它`array2`完全存在于`array1`?

我知道我可以`in_array()`在循环中使用该函数，但在我将拥有包含数百个元素的大型数组的情况下，我正在寻找一个函数。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-18T10:29:33.407

尝试：

```
$fullyExists = (count($array2) == count(array_intersect($array2, $array1)); 
```

该[**`array_intersect.php`**](http://www.php.net/manual/en/function.array-intersect.php)函数将仅返回所有其他参数中存在的第二个数组的元素（在这种情况下仅返回第一个数组）。因此，如果交集的长度等于第二个数组的长度，则第二个数组完全包含在第一个数组中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T10:31:46.560

你可以使用[`array_intersect`](http://php.net/manual/en/function.array-intersect.php)它，但你必须要小心一点。

如果要匹配的数组没有重复项，则可以使用

```
// The order of the arrays matters!
$isSubset = count(array_intersect($array2, $array1)) == count($array2); 
```

但是，如果例如，这将不起作用`$array2 = array(4, 4)`。如果重复是一个问题，您还需要使用`array_unique`：

```
$unique = array_unique($array2);
// The order of the arrays matters!
$isSubset = count(array_intersect($unique, $array1)) == count($unique); 
```

数组的顺序很重要的原因是作为第一个参数给定的数组`array_intersect`必须没有重复项。如果参数被切换，这个要求将从 移动`$array2`到`$array1`，这很重要，因为它可以改变函数的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T10:35:23.490

快速简便的解决方案：

```
 array_diff(array(1,2,3,4,5,6,7,8,9),array(4,6,9)); 
```

如果返回的是一个空数组，它在数组中，否则他会输出不是的项

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T10:42:48.120

我没有尝试使用复杂的数组，而是比较了我的工作

```
var_dump(array(1,2,3,4,5,6,7,8,9) === array(4,6,9));
var_dump(array(1,2,3,4,5,6,7,8,9) === array(1,2,3,4,5,6,7,8,9)); 
```

# iphone - UITableView 滚动时应该超出其框架

> ID：10650923
> 
> 赞同：2
> 
> 时间：2012-05-18T10:28:22.563
> 
> 标签：iphone, cocoa-touch, uitableview

我正在尝试使用 UITableView 的示例应用程序。

屏幕的上半部分（几乎）由一个 UIView 填充，它具有一些组件，如按钮、文本字段和图像视图。下半部分（在 IB 中，其宽度 = 320 和高度 = 234 像素）由 UITableView 实例填充。

![在此处输入图像描述](../Images/bdb6f9fca322ff457ea7e6d75a869bf0.png)

我正在使用要在此 UITableView 中显示的自定义 UITableViewCell 对象。

这是IB中UITableView实例的**大小定义：**

![在此处输入图像描述](../Images/956354132868ca72116c78e192c093c0.png)

这是 UITableViewCell 的大小定义：

![在此处输入图像描述](../Images/9f1857131c6c5a42e058882d30fc0f96.png)

我已经定义了两种类型的自定义 UITableView 单元格，它们可以放置在 UITableView 中（并且根据单元格是否有要显示的图片动态决定哪种类型的决定）。有图片的单元格比没有图片的单元格更大，布局也不同。具有图片的自定义 UITableViewCell 在 IB 中具有以下大小参数（高度“301”大于整个屏幕截图中主 Storyboard 中指定的通用 UITableViewCell 实例“234”的高度）：

![在此处输入图像描述](../Images/ac327172a50703ae857274326eb93744.png)

现在，当我运行应用程序并滚动表格视图时，表格视图需要沿整个屏幕滚动（即具有 UIView 和她的组件的屏幕的前半部分也应该滚动），就像在 Path 应用程序中一样像这样：

这是Path App中的初始屏幕：（上半部分是固定的UIView，下半部分是时间轴，是一个UITableView）

![在此处输入图像描述](../Images/101fe6f9bdd362080f4d5f68d53571c7.png)

当您开始滚动时间线时，上半部分也会滚动：

![在此处输入图像描述](../Images/fb239b05ba8afe144b7d3f72b4d9ffdc.png)

我该怎么做（即上半部分也滚动）？我尝试将 UIScrollView 添加到整个屏幕并将其放在屏幕中所有其他组件的后面，但这没有帮助。有人可以建议吗？或任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:30:33.520

使 UITableView 占据整个屏幕，并添加您的视图，该视图现在将上半部分作为表视图的 headerView（您可以在界面构建器中将其拖到它的顶部，它应该会立即卡入）。

# c++ - 请帮我找出错误

> ID：10650928
> 
> 赞同：1
> 
> 时间：2012-05-18T10:28:49.493
> 
> 标签：c++, visual-studio-2010, image-processing, opencv

下面的代码是用霍夫变换检测行。但是这个代码不能正常工作。它说“无法打开 pic1.png”。你能检查这个代码并告诉我这个代码有什么问题吗？请帮助我。我正在使用 openCV 2.3 库和 Visual Studio 2010。谢谢。

```
 #include "opencv2/highgui/highgui.hpp"
  #include "opencv2/imgproc/imgproc.hpp"
  #include"cv.h"
  #include"cxcore.h"
  #include"stdafx.h"

  #include <iostream>

using namespace cv;
using namespace std;

void help()
{
cout << "\nThis program demonstrates line finding with the Hough transform.\n"
        "Usage:\n"
        "./houghlines <image_name>, Default is pic1.png\n" << endl;
}

int main(int argc, char** argv)
{
const char* filename = argc >= 2 ? argv[1] : "pic1.png";

Mat src = imread(filename, 0);
if(src.empty())
{
    help();
    cout << "can not open " << filename << endl;
    return -1;
}

Mat dst, cdst;
Canny(src, dst, 50, 200, 3);
cvtColor(dst, cdst, CV_GRAY2BGR);

#if 0
vector<Vec2f> lines;
HoughLines(dst, lines, 1, CV_PI/180, 100, 0, 0 );

for( size_t i = 0; i < lines.size(); i++ )
{
    float rho = lines[i][0], theta = lines[i][1];
    Point pt1, pt2;
    double a = cos(theta), b = sin(theta);
    double x0 = a*rho, y0 = b*rho;
    pt1.x = cvRound(x0 + 1000*(-b));
    pt1.y = cvRound(y0 + 1000*(a));
    pt2.x = cvRound(x0 - 1000*(-b));
    pt2.y = cvRound(y0 - 1000*(a));
    line( cdst, pt1, pt2, Scalar(0,0,255), 3, CV_AA);
}
#else
vector<Vec4i> lines;
HoughLinesP(dst, lines, 1, CV_PI/180, 50, 50, 10 );
for( size_t i = 0; i < lines.size(); i++ )
{
    Vec4i l = lines[i];
    line( cdst, Point(l[0], l[1]), Point(l[2], l[3]), Scalar(0,0,255), 3, CV_AA);
}
#endif
imshow("source", src);
imshow("detected lines", cdst);

waitKey();

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:31:26.980

它正在`pic1.png`运行可执行文件的同一目录中查找。

您需要将图像复制到同一目录或输入图像文件的路径（完整或相对）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-18T10:43:33.100

Mat src = imread("pic1.png", 0); // 将图片 pic1.png 放到当前目录。

Mat src = imread("C://...", 0); // 在像@ChrisF 声明的其他目录中。

# ios - 如何在dismissModalViewController 后设置方向以更正设备方向？

> ID：10650930
> 
> 赞同：2
> 
> 时间：2012-05-18T10:29:07.690
> 
> 标签：ios, uiviewcontroller, rotation, orientation, landscape-portrait

我有一个显示内容的详细视图。通过一个按钮，我以模态方式呈现另一个视图：

```
[self.viewController presentModalViewController:helpViewController animated:NO]; 
```

因此，当我关闭此 helpViewController 时，detailview 始终处于纵向模式。
无法将其调整到正确的设备方向。

我已经尝试过将其旋转到设备方向：

```
if ([UIViewController respondsToSelector:@selector(  
    attemptRotationToDeviceOrientation)]) {

    [UIViewController attemptRotationToDeviceOrientation];
} 
```

似乎在关闭 helpViewController 后 viewDidAppear 没有在 detailView 中调用。
**那么我怎样才能让它工作呢？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:34:03.163

请尝试将 detailview.m 设置为

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation 
{
// Return YES for supported orientations
return YES;
//    return (interfaceOrientation == UIInterfaceOrientationPortrait);

} 
```

# android - 如何使用 Unity 中不同的包标识符和 Java 中的包名称从 Unity 访问 jar 文件？

> ID：10650931
> 
> 赞同：2
> 
> 时间：2012-05-18T10:29:08.387
> 
> 标签：android, unity3d

我在 java jar 中创建了一个统一插件。

在 Java 中，我的包名是`com.android.test`.

在 Unity 中，我的 Bundle Identifier 是`com.android.test`. 这适用于下面的代码。

但是，如果我在 Unity 中将我的 Bundle Identifier 更改为`com.android.test2`，下面的代码会引发异常`Class not Found: com.android.test2.myplugin`。

有没有办法访问包名与 Unity Bundle Identifier 名称不同的 jar 文件？

这是我访问 Jar 的统一 C# 代码：

```
static IntPtr cls_Activity;
static IntPtr fid_Activity;
static IntPtr obj_Activity;
static IntPtr cls_OurAppNameActivityClass;
static IntPtr startAdsMethod;

cls_Activity = AndroidJNI.FindClass("com/unity3d/player/UnityPlayer");
fid_Activity = AndroidJNI.GetStaticFieldID(cls_Activity, "currentActivity", "Landroid/app/Activity;");
obj_Activity = AndroidJNI.GetStaticObjectField(cls_Activity, fid_Activity);

cls_OurAppNameActivityClass = AndroidJNI.FindClass("com/android/test/myplugin");
            startAdsMethod = AndroidJNI.GetMethodID(cls_OurAppNameActivityClass, "Instantiate", "()V");

  if (AndroidJNI.IsInstanceOf(obj_Activity, cls_OurAppNameActivityClass) != false)
    {
       Debug.Log("Activity IS a OurAppNameActivity");               
       jvalue[] myArray = new jvalue[1];
       AndroidJNI.CallVoidMethod(obj_Activity, startAdsMethod, myArray);
       Debug.Log("Activity Leaving a OurAppNameActivity");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T04:33:18.030

您的包名称在统一和 java 中必须相同，否则无法访问它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-01T09:57:43.350

是的你可以。请按照以下步骤操作

1.在创建 android 项目时为您的 MainActivity 命名（而不是 MainActivity 让我们说 MYAndroidPlugin）

2.现在在MYAndroidPlugin.java中你会看到MYAndroidPlugin类，修改如下`

```
package com.mydomain.androidplugin;

import android.app.Activity;
import android.content.pm.ApplicationInfo;
import android.content.pm.PackageManager;
import android.os.Build;
import android.widget.Toast;

import com.unity3d.player.UnityPlayer;

public class MyAndroidPlugin   {

   public MyAndroidPlugin(){

   //default constructor
  }

   public void makeToast(final String message, final int length) {
       final Activity a = UnityPlayer.currentActivity;
       a.runOnUiThread(new Runnable() {
        public void run() {
            Toast.makeText(a, message, length).show();
        }
    });
} 
```

3.通过gradle任务将其导出为jar并将jar文件放在unityproject/Assets/Plugins/Android中

4.在c#脚本中（在toast方法中）直接引用你的类

```
public void TestToast(){

 using(AndroidJavaObject jo =  new      AndroidJavaObject("com.mydomain.androidplugin.MYAndroidPlugin"))
        jo.Call ("makeToast", "my plugin worked", 2);
 } 
```

5.就是调用这个方法来吐司

您现在可以直接引用任何标识符的 jar

# css - p:growl 的自定义定位

> ID：10650935
> 
> 赞同：5
> 
> 时间：2012-05-18T10:29:23.093
> 
> 标签：css, jsf, primefaces, growl

我正在使用`<p:growl>`PrimeFaces 3.2 的组件来显示人脸消息。我想自定义它的位置，使其出现在左侧而不是右侧。

我尝试了以下方法：

```
<h:head>
    <title>Facelet Title</title>
    <style type="text/css">
        .ui-growl {
            position:absolute;
            top:20px;
            left:20px;
            width:301px;
            z-index:9999;
        }
    </style>
</h:head>
<h:body>
    <h:form id="frm">
        <div id="add">
            <p:growl id="growl" showDetail="true" sticky="true" autoUpdate="true"/>
            <h:panelGrid columns="2" >
            ... 
```

但它没有用。我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T11:37:43.387

你的代码看起来不错。

我将它复制到我的测试用例中并且它有效：咆哮元素显示在左上角。为此，只有`left:20px;`必要的（感谢@BalusC 的评论）。

所以问题一定出在其他地方。您是否有在示例中省略的页面的其他样式定义？尝试通过删除所有不必要的东西来隔离问题。

这是我的测试用例：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html" 
      xmlns:f="http://java.sun.com/jsf/core" 
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Facelet Title</title>
        <style type="text/css">
            .ui-growl{
                left:20px;
            }
        </style>
    </h:head>

    <h:body>
        <h:form id="myform">
            <div id="add">
                <p:growl showDetail="true" sticky="true" autoUpdate="true"/>
            </div>
        </h:form>
    </h:body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-10T08:00:39.303

```
function growlLeft(){

                var css = document.createElement("style");
                css.id="growlStyle";
                css.type = "text/css";
                css.innerHTML = ".ui-growl { left: 20px!important}";
                document.body.appendChild(css);
            }
            function growlReset(){
                $('#growlStyle').empty();
            } 
```

此代码将有助于动态定位并重置其位置。样式类也解决了以下问题

```
 .ui-growl { left: 20px} 
```

# php - PHP 爆炸数组然后循环遍历值并输出到变量

> ID：10650938
> 
> 赞同：10
> 
> 时间：2012-05-18T10:29:47.727
> 
> 标签：php, arrays

我要拆分的字符串`$item['category_names']`例如包含`Hair, Fashion, News`

我目前有以下代码：

```
$cats = explode(", ", $item['category_names']);
foreach($cats as $cat) {
    $categories = "<category>" . $cat . "</category>\n";
} 
```

我希望结果`$categories`如下所示，以便稍后在某处回显。

```
<category>Hair</category>\n
<category>Fashion</category>\n
<category>News</category>\n 
```

不确定我是否走对了这条路？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-18T10:33:31.580

在您的代码中，您将在每次迭代中覆盖 $categories 变量。正确的代码如下所示：

```
$categories = '';
$cats = explode(",", $item['category_names']);
foreach($cats as $cat) {
    $cat = trim($cat);
    $categories .= "<category>" . $cat . "</category>\n";
} 
```

更新：正如@Nanne 建议的那样，仅在“，”上爆炸

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T10:42:35.583

没有 for 循环

```
$item['category_names'] = "Hair,   Fashion,   News";
$categories = "<category>".
        implode("</category>\n<category>", 
        array_map('trim', explode(",", $item['category_names']))) . 
        "</category>\n";
echo $categories; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T10:35:16.293

如果你使用这个：

```
$cats = explode(", ", $item['category_names']);
foreach($cats as $cat) {
$categories = "<category>" . $cat . "</category>\n";
} 
```

$categories 字符串每次都会被覆盖，所以 "hair" 和 "fasion" 都丢失了。

但是，如果您在 for 循环中的等号之前添加一个点，如下所示：

```
$cats = explode(", ", $item['category_names']);
foreach($cats as $cat) {
$categories .= "<category>" . $cat . "</category>\n";
} 
```

$catergories 字符串将包含所有三个值:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-15T07:18:28.583

**PHP 循环分解数组** 演示：[http ://sandbox.onlinephpfunctions.com/code/086402c33678fe20c4fbae6f2f5c18e77cb3fbc2](http://sandbox.onlinephpfunctions.com/code/086402c33678fe20c4fbae6f2f5c18e77cb3fbc2)

*它对我有用*

```
<?php

$str = "name:john,hone:12345,ebsite:www.23.com";

$array=explode(",",$str);

if(count($array)!=0)
{
foreach($array as $value)
{

    $data=explode(":",$value);

      echo $data[0]."=".$data[1];

    echo ' ';

}
}
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T10:42:04.520

您的代码中的错误是这样的：

```
$categories = "<category>" . $cat . "</category>\n"; 
```

您在每次迭代时都覆盖`$categories`，它应该是：

```
$categories .= "<category>" . $cat . "</category>\n"; 
```

**不确定我是否走对了这条路？**

查找和替换不是爆炸的目的。如果您只想更正代码错误 - 请参见上文。

这更有效：

```
$categories = "<category>" .
    str_replace(', ', "</category>\n<category>", $input) . 
    "</category>\n"; 
```

这也解释了可变空格：

```
$categories = "<category>" . 
    preg_replace('@\s*,\s*@', "</category>\n<category>", $input) . 
    "</category>\n"; 
```

# hibernate - HibernateException：级联期间刷新是危险的

> ID：10650940
> 
> 赞同：8
> 
> 时间：2012-05-18T10:29:51.423
> 
> 标签：hibernate, jpa

有时我的应用程序中出现格式错误的异常。异常接踵而至，如下：

```
Caused by: java.lang.reflect.InvocationTargetException
at sun.reflect.GeneratedMethodAccessor77.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:592)
at org.apache.wicket.RequestListenerInterface.invoke(RequestListenerInterface.java:183)
... 22 common frames omitted   

Caused by: org.springframework.orm.jpa.JpaSystemException: Error while commiting the transaction; nested exception is javax.persistence.RollbackException: Error while commiting the transaction
at org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:294)
at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerSynchronization.convertCompletionException(ExtendedEntityManagerCreator.java:483)
at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerSynchronization.afterCommit(ExtendedEntityManagerCreator.java:464)
at org.springframework.transaction.support.TransactionSynchronizationUtils.invokeAfterCommit(TransactionSynchronizationUtils.java:90)

Caused by: javax.persistence.RollbackException: Error while commiting the transaction
at org.hibernate.ejb.TransactionImpl.commit(TransactionImpl.java:71)
at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerSynchronization.afterCommit(ExtendedEntityManagerCreator.java:461)
... 52 common frames omitted

Caused by: org.hibernate.HibernateException: Flush during cascade is dangerous
at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:996)
at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:338)
at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:106)
at org.hibernate.ejb.TransactionImpl.commit(TransactionImpl.java:54) 
```

当在数据库上执行选择查询时会发生这种情况，例如：

```
select archive0_.ARCHIVE_KEY as ARCHIVE1_16_, 
   archive0_.ARCHIVE_DATE as ARCHIVE2_16_, 
   archive0_.ARCHIVE_TYPE as ARCHIVE3_16_, 
   archive0_.DELETION_DATE as DELETION4_16_, 
   archive0_.ENCODING as ENCODING16_, 
   archive0_.FILENAME as FILENAME16_, 
   archive0_.JMSPROPERTIES as JMSPROPE7_16_, 
   archive0_.MESSAGE_ID as MESSAGE8_16_, 
   archive0_.MESSAGE_TYPE as MESSAGE9_16_, 
   archive0_.MESSAGE_VERSION as MESSAGE10_16_, 
   archive0_.PAYLOAD as PAYLOAD16_, 
   archive0_.SERVICE_NAME as SERVICE12_16_, 
   archive0_.TYPE_OF_SERVICE as TYPE13_16_, 
   archive0_.TIME_TO_LIVE as TIME14_16_, 
   archive0_.TRANSACTION_ID as TRANSAC15_16_ 
from   LOGGING.ARCHIVED_MESSAGES archive0_ 
where  archive0_.MESSAGE_ID=? and archive0_.SERVICE_NAME=? 
```

或者：

```
select audit0_.AUDIT_ID as AUDIT1_17_, 
   audit0_.CODE as CODE17_, 
   audit0_.FLOW_NAME as FLOW3_17_, 
   audit0_.KEY_FIELD_NAME as KEY4_17_, 
   audit0_.KEY_FIELD_VALUE as KEY5_17_, 
   audit0_.LOG_TIME as LOG6_17_, 
   audit0_.MESSAGE_ID as MESSAGE7_17_, 
   audit0_.MESSAGE_SIZE as MESSAGE8_17_, 
   audit0_.MESSAGE_TYPE as MESSAGE9_17_, 
   audit0_.MESSAGE_TYPE_VERSION as MESSAGE10_17_, 
   audit0_.PRIORITY as PRIORITY17_, 
   audit0_.RECEIVER as RECEIVER17_, 
   audit0_.SENDER as SENDER17_, 
   audit0_.SERVICE_NAME as SERVICE14_17_, 
   audit0_.TRANSACTION_ID as TRANSAC15_17_, 
   audit0_.TRANSPORT_ID as TRANSPORT16_17_ 
from   LOGGING.AUDIT audit0_ 
where  audit0_.TRANSACTION_ID=? 
and    (audit0_.LOG_TIME between ? and ?) 
order by audit0_.LOG_TIME 
```

第一个查询是归档类的命名查询，如下所示：

```
@Entity
@Table(schema = "LOGGING", name = "ARCHIVED_MESSAGES")
@NamedQuery(name = "findArchiveByMessageIdAndServiceName", query = "SELECT ar FROM        Archive ar WHERE ar.messageId = :messageId and ar.serviceName = :serviceName")
public class Archive implements Serializable {
private static final long serialVersionUID = 1L; 
```

由此方法调用：

```
public Archive findArchive(String database, Audit audit) {
    LOGGER.debug("findArchive {}", audit);
    setEntityManager(database);
    javax.persistence.Query query;
    Archive archive = null;

    // Get the query
    query = em.createNamedQuery("findArchiveByMessageIdAndServiceName");

    // Set the parameters
    query.setParameter("messageId", audit.getMessageId());
    query.setParameter("serviceName", audit.getServiceName());

    try {
        List archives = query.getResultList();
        if(archives != null && archives.size() != 0)
            archive = (Archive) archives.get(0);
    } catch (NoResultException e) {
        // Ok so not all audit records have a matching archive but...
    } catch (Exception e) {
        // Any other error is a problem
        LOGGER.error("Failed to find archive", e);
    }

    return archive;
} 
```

第二个是通过这个方法调用的：

```
@SuppressWarnings("unchecked")
public Iterator findByCriteria(Criteria criteria, int first, int count) {
    LOGGER.debug("findByCriteria {}", criteria);
    setEntityManager(criteria.getDatabase());
    StringBuffer queryString = new StringBuffer();
    Query query;

    queryString.append("SELECT MAX(a.code), MIN(a.logTime), MAX(a.logTime), "
            + "a.transactionId as transactionId, a.sender as sender, a.receiver as receiver ");

    //Add the common where clause
    queryString.append(" FROM Audit a where a.logTime BETWEEN :from AND :to");
    // Append the appropriate addition where clauses depending on what
    // values are set 
    if (criteria.getSender() != null
            || criteria.getFilter().getSender() != null) {
        queryString.append(" AND a.sender = :sender");
    }

    if (criteria.getReceiver() != null
            || criteria.getFilter().getReceiver() != null) {
        queryString.append(" AND a.receiver = :receiver");
    }

    if (criteria.getMessageType() != null
            || criteria.getFilter().getMessageType() != null) {
        queryString.append(" AND a.messageType = :messageType");
    }
    if (criteria.getTransactionId() != null
            || criteria.getFilter().getTransactionId() != null) {
        queryString
                .append(" AND a.transactionId = :transactionId");
    }
    if (criteria.getKeyFieldValue() != null
            || criteria.getFilter().getKeyFieldValue() != null) {
        queryString
                .append(" AND UPPER(a.keyFieldValue) LIKE :keyFieldValue");
    }

    // We want a summary so lets group by the common ids
    queryString.append(" GROUP BY a.transactionId, a.sender, a.receiver ");

    // Add order by clause
    if (criteria.getOrderBy() != null) {
        queryString.append(" ORDER BY ");           
        queryString.append(criteria.getOrderBy());          
        queryString.append(criteria.isAscending() ? " ASC" : " DESC");
    }

    Session session = ((Session) em.getDelegate()).getSessionFactory().openSession();
    query = session.createQuery(queryString.toString());
    query.setReadOnly(true);
    query.setFetchSize(Integer.valueOf(1000));
    query.setCacheable(true);
    query.setCacheMode(CacheMode.NORMAL);

    // Will always have from and to dates
    query.setParameter("from", criteria.getFromDate());
    query.setParameter("to", criteria.getToDate());

    // Set remaining parameters depending on what is set
    if (criteria.getSender() != null) {
        query.setParameter("sender", criteria.getSenderValue());
    }

    // Override the search criteria with the filter if set
    if (criteria.getFilter().getSender() != null) {
        query.setParameter("sender", criteria.getFilter().getSender());
    }

    if (criteria.getReceiver() != null) {
        query.setParameter("receiver", criteria.getReceiverValue());
    }

    if (criteria.getFilter().getReceiver() != null) {
        query.setParameter("receiver", criteria.getFilter().getReceiver());
    }

    if (criteria.getMessageType() != null) {
        query.setParameter("messageType", criteria.getMessageTypeValue());
    }

    if (criteria.getFilter().getMessageType() != null) {
        query.setParameter("messageType", criteria.getFilter()
                .getMessageType());
    }
    if (criteria.getTransactionId() != null) {
        query.setParameter("transactionId", criteria.getTransactionId());
    }

    if (criteria.getFilter().getTransactionId() != null) {
        query.setParameter("transactionId", criteria.getFilter()
                .getTransactionId());
    }
    if (criteria.getKeyFieldValue() != null) {
        query.setParameter("keyFieldValue", "%"
                + criteria.getKeyFieldValue().toUpperCase() + "%");
    }

    if (criteria.getFilter().getKeyFieldValue() != null) {
        query.setParameter("keyFieldValue", "%"
                + criteria.getFilter().getKeyFieldValue().toUpperCase()
                + "%");
    }
    // Set the limits       
    query.setFirstResult(first);
    query.setMaxResults(PAGE_SIZE);

    Iterator iterator = query.list().iterator();
    session.close();
    return iterator;
} 
```

这两种方法都应该通过 setEntityManager(database); 设置用户选择的数据库；

我不知道是什么原因导致发生此异常！有人知道吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-21T18:51:33.913

问题很可能与线程安全有关：当我尝试从同一个用户会话中并行访问两个单独线程的表时出现此错误（同一浏览器页面有两个并行运行的 ajax 请求）。

当我将访问权限更改为串行时摆脱了它。不知道是不是和你一样的问题，值得一试。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-12-04T01:56:42.170

我已经研究了几天类似的问题。Supra 的回答为我指明了正确的方向：线程安全。

事实上，Hibernate 中的[Session](https://docs.jboss.org/hibernate/orm/3.5/javadocs/org/hibernate/Session.html)不是线程安全的，我们不应该允许 2 个线程访问同一个会话。这是“级联危险时冲洗”错误的可能原因之一。两个线程访问同一个会话会导致很多意外行为，因为 Hibernate 不是为此而设计的。

通常我会使用一个框架来做这种事情，但如果你需要自己做，你可以制作一个静态的[ThreadLocal](http://docs.oracle.com/javase/7/docs/api/java/lang/ThreadLocal.html)变量。

**TL;DR** :`SessionFactory`是线程安全的，`Session`不是。为每个线程提供一个新会话（通过自己做或使用 DI 框架）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-05T06:54:59.657

我在 Spring 应用程序中使用 JPA EntityListeners 时遇到了同样的错误。通过使用解决了它`TransactionSynchronizationManager.registerSynchronization()`，但我不知道它是否是最佳实践（Kotlin 中的代码）：

```
@PrePersist
fun prePersist(entity: EntityType) {
    TransactionSynchronizationManager.registerSynchronization(object : TransactionSynchronization {
        override fun beforeCommit(readOnly: Boolean) {
            /* Do your transactional stuff here */
            super.beforeCommit(readOnly)
        }
    })
} 
```

# c++ - 合并两个 Qt/C++ 项目：重新定义错误

> ID：10650941
> 
> 赞同：0
> 
> 时间：2012-05-18T10:29:51.533
> 
> 标签：c++, qt4, redefinition

我在合并两个单独编译的项目时遇到问题。我创建了一些类（Qt 和 C++）来管理两个机械阶段（第一个项目）和一个用于激光扫描仪的类/接口（第二个项目）。当我在第一个项目中导入类/接口时，编译器在某些 Windows api 类上给了我很多重定义错误（第二个项目使用类作为 winsock2）。

有人可以帮我找出我的错误吗？不仅是我的“语法”错误；）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:18:09.143

只是`clean`项目，重建并再次运行。发生这种情况的一种可能性是，您可能在任何项目中使用了以前版本的库，现在在合并两个项目后，您可能正在其他项目中使用最新版本的库。您合并的项目的已经存在的编译二进制文件将寻找不同版本的库，但您可能在第二个项目中包含了它的另一个版本，反之亦然！！合并后两者似乎在同一个项目中！因此，请尝试清理项目，仅使用最新版本的库并重新构建并运行。

如果您尝试同时包含`winsock.h`and `winsock2.h`，则肯定会发生此错误。因为`winsock2.h`是对`winsock.h`. 所以你肯定会得到重新定义错误。

一种可能的解决方案是..

```
 Try to include winsock2.h before you include the header file(s) which is 
  including winsock.h.That will do. 
```

或者`Try using only 1 version of it`

# android - 如何在媒体播放器中设置两个音量控制，以便在 android 中同时播放两个声音

> ID：10650942
> 
> 赞同：0
> 
> 时间：2012-05-18T10:29:57.663
> 
> 标签：android

我正在这个应用程序中制作媒体播放器应用程序我想设置两个音量控制搜索栏来控制两个声音片段，一个是语音，另一个是背景声音，通过制作两个媒体播放器实例同时播放。我想单独管理那里的音量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:40:44.807

是的......你有两个不同的媒体播放器对象同时播放并控制它们各自的音量......就像这样......

```
 @Override
public void onProgressChanged(SeekBar seekBar, int progress,
        boolean fromUser) {
    if(seekBar.equals(s1)){
   //s1 is the seekBar object you have in your activity
       player1.setVolume(progress,progress);

  }
 else{
    player2.setVolume(progress,progress);
  //player1 and player2 are mediaplayers..
 }
} 
```

# iphone - 最小化 UIImagePickerController 视图

> ID：10650944
> 
> 赞同：1
> 
> 时间：2012-05-18T10:30:18.603
> 
> 标签：iphone, ios, ipad

我正在开发相机应用程序。我想限制特定尺寸的图像内容，但通过相机的图像是全屏显示的。我怎样才能最小化它？

```
- (void) viewDidAppear:(BOOL)animated {
    OvlayView *overlay = [[OvlayView alloc] initWithFrame:CGRectMake(472, 158, 240, 128)];

    // Create a new image picker instance:
    UIImagePickerController *picker = [[UIImagePickerController alloc] init];

    // Set the image picker source:
    picker.sourceType = UIImagePickerControllerSourceTypeCamera;

    // Hide the controls:
    picker.showsCameraControls = YES;
    picker.navigationBarHidden = YES;

    // Make camera view full screen:
    picker.wantsFullScreenLayout = NO;
    picker.cameraViewTransform = CGAffineTransformScale(picker.cameraViewTransform, CAMERA_TRANSFORM_X, CAMERA_TRANSFORM_Y);

    // Insert the overlay:
    picker.cameraOverlayView = overlay;
    /*UIGraphicsBeginImageContext(CGSizeMake(480,320));

    CGContextRef            context = UIGraphicsGetCurrentContext();

    [image drawInRect: CGRectMake(0, 0, 480, 320)];

    UIImage        *smallImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();*/
    // Show the picker:
    [self presentModalViewController:picker animated:YES];  

    [super viewDidAppear:YES];
} 
```

# java - 使用泛型通过Java中的反射获取类方法

> ID：10650947
> 
> 赞同：0
> 
> 时间：2012-05-18T10:30:23.990
> 
> 标签：java, json, reflection

我正在尝试创建一个接受任何类型的 POJO 的实用程序类，并将该 POJO 转换为 JSON 对象。它应该使用 Java 反射和注释来查看某些 getter 方法并基于该方法创建键值 JSON 元素。

我正在尝试使用泛型来执行此操作，但它似乎不起作用。这不可能吗？

我想将一个类对象作为参数传递，并尽可能检索正确的类方法。

到目前为止我写的代码：

```
package com.jr.freedom.util;

import java.lang.reflect.Field;
import java.lang.reflect.Method;
import net.sf.json.JSONObject;

public class JsonParserUtil {
    private static final String GET_CHAR_SEQUENCE = "get";

    public static <T> JSONObject toJsonObject(Class<T> classObject) {
        // get Method names with @JsonElement included
        Method methods[] = classObject.class.getDeclaredMethods();

        JSONObject jsonObject = new JSONObject();
        try {
            for (int i = 0; i < methods.length; i++) {
                String key = methods[i].getName();
                System.out.println(key);
                if (methods[i].isAnnotationPresent(JsonElement.class) && key.contains(GET_CHAR_SEQUENCE)) {
                    key.replaceFirst(GET_CHAR_SEQUENCE, "");
                    jsonObject.put(key, methods[i].invoke(classObject));
                }
            }
            return jsonObject;
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        }
    }
} 
```

这是尝试使用上述 JSON util 对象的 testMethod

```
User user = new User();
user.setBio("bio mate");
user.setCountry("uk");
user.setEmailAddress("jonney@ooglemail.com");
user.setFirstName("jono");
user.setPassword("passwordfdsadsa");
user.setUsername("crazy8");
JSONObject jsonUser =  new JsonParserUtil<User>().toJsonObject(user); 
```

用户类是一个带有 getter 和 setter 的简单 POJO。目前这条线：`Method methods[] = T.class.getDeclaredMethods();`行不通，因为您不能使用通用 T 来获取`DeclaredMethods`. 有没有办法这样做？还是我必须为我制作的每一个 POJO 创建这个 util 方法？

我知道它可以使用：`Method methods[] = User.class.getDeclaredMethods();`但这仅适用于 User 类。我正在尝试创建一个可以采用任何 POJO 对象并尝试`JSONObject`自动创建的 util JSON 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:13:51.527

解决方案：

```
public static JSONObject toJsonObject(Object classObject) {
        // get Method names with @JsonElement included

        Method methods[] = classObject.getClass().getDeclaredMethods();

        JSONObject jsonObject = new JSONObject();
        try {
            for (int i = 0; i < methods.length; i++) {
                String key = methods[i].getName();
                System.out.println(key);
                if (methods[i].isAnnotationPresent(JsonElement.class) && key.startsWith(GET_CHAR_SEQUENCE)) {
                    key = key.replaceFirst(GET_CHAR_SEQUENCE, "");
                    jsonObject.put(key, methods[i].invoke(classObject));
                }

            }
            return jsonObject;
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        }

    } 
```

关键是要使用

```
classObject.getClass() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:41:28.377

您正在尝试获取将返回 Class 本身的 Class 类。

您已经有了`Class<T> classObject`User 类，所以`classObject.getDeclaredMethods()`应该可以工作，但您仍然需要序列化对象，或者您可以传递要序列化的 User 对象，然后从对象中获取类类型，然后对其进行序列化。

# objective-c - How to call NSMenu validateMenuItem ?

> ID：10650954
> 
> 赞同：0
> 
> 时间：2012-05-18T10:30:42.297
> 
> 标签：objective-c, cocoa, nsmenuitem

I need dynamically enabling voice on a NSMenu. The first check is done with validateMenuItem in this way:

```
-(BOOL)validateMenuItem:(NSMenuItem *)menuItem{ 
    NSMenuItem *item = [self.menu itemAtIndex:0];

    if(menuItem == item){ 
        return self.streamIsOpen;     
    }
    return YES;
} 
```

How can i check again over this function during my application lifecycle ? Do I need to attach every time a new menu to relaunch this check ?

# air - 我可以在没有 Flash Builder 的情况下开发 Adob e AIR 应用程序吗？

> ID：10650955
> 
> 赞同：4
> 
> 时间：2012-05-18T10:30:44.833
> 
> 标签：air, flash-builder

我可以在没有 Flash Builder 的情况下开发 Adob​​e AIR 应用程序吗？

我想从命令行运行它。如果您有任何示例，请与我分享。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T06:14:11.847

您可以使用[Flash Develop](http://www.flashdevelop.org "闪存开发")作为开源/免费的 Flash Builder 的替代品。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T16:53:28.140

Flash Develop 是最好的开源工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T10:40:07.043

是的。[您需要可在此处](http://www.adobe.com/devnet/air/air-sdk-download.html)免费获得的 Flex SDK 。这意味着您需要将其与您选择的 IDE 连接起来。另一方面是你不会有任何调试器来帮助你。

请注意，Adobe 也为学生和失业专业人士提供 FlashBuilder 的免费许可！看到[这个](http://www.adobe.com/devnet-apps/flex/free/)。

# python - Python 和 Qt 中的并发编程

> ID：10650960
> 
> 赞同：2
> 
> 时间：2012-05-18T10:31:07.747
> 
> 标签：python, qt, concurrency, pyside

我编写了一个小程序来评估元胞自动机的状态并将其绘制在屏幕上。我有双核PC，所以为了提高效率，我决定在两个线程中进行计算。我自己实现了 QThread，如下所示：

```
clacc MyThread(QThread):
    def run(self):
        ... 
```

然后我制作这个类的两个实例并调用它们：

```
thread1 = MyThread()
thread2 = MyThread()

thread1.start()
thread2.start() 
```

当我打开任务管理器时，我发现它们正在一个接一个地执行：首先是thread1，然后是thread2，然后是thread1，以此类推。问题是：有没有一种方法可以调用它们，这样它们就可以在不同的内核上独立工作，并且在某个时刻，而不是一个接一个地工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:04:26.387

如果你使用线程，你不能随心所欲地提高效率，因为它不会做并行化。您需要进行多处理。为此，您可以使用多处理模块，它的工作方式类似于线程模块：

```
import multiprocessing

class MyProcess(multiprocessing.Process):

    def run(self):
        # new process context 
```

您不会共享相同的上下文，因此您无法通过方法调用直接进行通信。我建议您使用一些“消息队列”系统，例如：multiprocessing.Queue 或 zeromq（非常棒的库！）。

如果您查看“Ventillar”zmq 设计模式，您会发现它完全符合您的要求：并行化工作人员。

# java - Release resources from the threads

> ID：10650962
> 
> 赞同：3
> 
> 时间：2012-05-18T10:31:11.620
> 
> 标签：java, multithreading, garbage-collection

In my application (at my work), we maintain socket connection pool to handle the communication . There are a number of threads (number is large) which take an active connection from the pool, use it and close it. But the catch is that somewhere in between garbage collector is invoked to collect the references not in use.

Now, after the garbage collector is invoked I want to:

1.  suspend all the threads which participate in the communication(please note that my threads run together with the GC -> I mean scheduling makes it possible)
2.  release the socket connections from the thread (i.e.references to the socket connection) whose status may be somewhere in between or if that is practically not feasible then:
3.  How to delay the invocation of GC after all the threads using the resources have finished. further in this case it may be required to determine whether the relevant threads have finished their job.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T00:13:36.407

如果您关心 GC 何时运行，那么您的应用程序设计就会被破坏。

修复您的设计。

注意：虽然有关于垃圾收集器应该如何操作的规范，但 JVM 实现甚至不需要*垃圾*收集*器*！

# c# - 如何在 aspx 页面的服务器脚本块中使用 [WebMethod]？

> ID：10650969
> 
> 赞同：3
> 
> 时间：2012-05-18T10:31:35.240
> 
> 标签：c#, asp.net, .net, .net-3.5, webmethod

我正在尝试创建一个简单的 .Net 3.5 页面，其中包含一些 HTML 和`WebMethod`. 当我尝试`WebMethod`从我的浏览器中调用 my 时，它会不断返回页面。任何想法如何让它工作？

这是我的代码：

```
<%@ Page Language="C#" Inherits="CFW.WebUI.Page" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<script runat="server">

    [System.Web.Services.WebMethod]
    public static string Test()
    {
        return "Hola!";
    }

</script>
<html xmlns="http://www.w3.org/1999/xhtml">
...
</html> 
```

注意：我*没有*使用 Ajax.Net。我只想从客户端调用 WebMethod（使用 jQuery）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:57:38.797

方法如下：

```
[WebMethod]
public static string SayHello()
{
     return "Hola";
} 
```

在您的页面中，您需要添加 a`ScriptManager`并将`EnablePageMethods`属性设置`true`为：

```
<asp:ScriptManager id="sMgr" runat="server" EnablePageMethods="True" /> 
```

所做的只是它`Javascript`在您的页面上创建一个代理类，允许您`SayHello`通过在 Javascript 中执行以下操作来调用您的方法：

```
function InvokeSayHello()
{
     alert(PageMethods.SayHello()); //Will alert 'Hola'
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T06:37:20.043

而不是写

```
 [System.Web.Services.WebMethod] 
```

利用

```
 [WebMethod]
    [System.Web.Script.Services.ScriptMethod] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T07:32:27.240

我不确定这是否可以在没有 的情况下工作`ScriptManager`，但绝对可以在`PageMethod`不使用`PageMethod`关键字的情况下调用 a 。您可以像调用任何其他 Web 服务一样调用您的 ASP 页面，例如。`yourpage.aspx/MethodName`. 该功能应该用一个`[WebMethod]`属性来装饰，不需要`[ScriptMethod]`在页面类本身上放置标签或任何东西。我确实注意到`POST`这些函数的数据而不是`GET`，但我不确定这是否是必需的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-18T11:38:47.603

您可能还想将 [System.Web.Script.Services.ScriptMethod()] 添加到您的方法中：

**

[http://geekswithblogs.net/frankw/archive/2008/03/13/asp.net-ajax-callbacks-to-web-methods-in-aspx-pages.aspx](http://geekswithblogs.net/frankw/archive/2008/03/13/asp.net-ajax-callbacks-to-web-methods-in-aspx-pages.aspx)

# php - 获取文件的详细信息，然后插入数据库

> ID：10650973
> 
> 赞同：1
> 
> 时间：2012-05-18T10:31:54.567
> 
> 标签：php, database, file, csv, readfile

我有一个**.txt**文件，其中包含这种格式的所有国家/地区的详细信息：

```
Country,City,AccentCity,Region,Population,Latitude,Longitude
ad,aixas,Aixàs,06,,42.4833333,1.4666667
ad,aixirivali,Aixirivali,06,,42.4666667,1.5
ad,aixirivall,Aixirivall,06,,42.4666667,1.5
ad,aixirvall,Aixirvall,06,,42.4666667,1.5
ad,aixovall,Aixovall,06,,42.4666667,1.4833333
ad,andorra,Andorra,07,,42.5,1.5166667
ad,andorra la vella,Andorra la Vella,07,20430,42.5,1.5166667
ad,andorra-vieille,Andorra-Vieille,07,,42.5,1.5166667
ad,andorre,Andorre,07,,42.5,1.5166667
ad,andorre-la-vieille,Andorre-la-Vieille,07,,42.5,1.5166667
ad,andorre-vieille,Andorre-Vieille,07,,42.5,1.5166667
ad,ansalonga,Ansalonga,04,,42.5666667,1.5166667 
```

我必须将这些数据插入到 3 个表中，如城市、州和国家，而不会重复。

从 .txt 文件中读取数据并将其插入数据库的任何可能方法？

如何获取州和城市数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T10:41:45.200

以 CSV 格式读取文件，然后插入：

```
if (($handle = fopen("cities.txt", "r")) !== FALSE) {
    while (($data = fgetcsv($handle)) !== FALSE) {
        // Craft your SQL insert statement such as:
        $sql = "INSERT INTO cities (country, city, accent_city, etc.) VALUES ('{$data[0]}','{$data[1]}','{$data[2]}', etc.)";
        // Use the appropriate backend functions depending on your DB, mysql, postgres, etc.
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T10:57:55.457

如果您的数据库是 mysql，则存在用于批量插入的实用程序，[文档](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

如果没有，可能您的数据库也有一个，但如果您想使用 PHP 执行此操作，@davidethell 的示例非常适合完成任务

# java - 如何使用命令提示符对黑莓智能手机应用程序进行代码签名？

> ID：10650974
> 
> 赞同：1
> 
> 时间：2012-05-18T10:31:56.970
> 
> 标签：java, blackberry, code-signing

我是黑莓智能手机应用程序开发的新手，所以现在我只使用命令提示符在黑莓模拟器中运行我的应用程序。之后我在代码签名表单中注册，我得到了三个文件，如 RRT、RBB、RCR。现在注册这些还有三个文件，但我不知道接下来我会为那个代码签名过程做什么。通过这个过程，我将 .jad 和 .cod 文件放入我的黑莓设备，它正在下载但抛出错误，例如，[错误启动应用程序名称：模块“应用程序名称”尝试访问安全 API。]。请任何人帮助我如何清楚地对签名过程进行编码？提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T10:44:27.410

运行以下命令：

```
java -jar "C:/Program Files/Research In Motion/BlackBerry JDE 6.0.0/bin/SignatureTool.jar" -a -c -p key AppName.cod 
```

将 JDE bin 目录替换为适当的目录。

检查以下链接：

> [如何以及何时签署](http://supportforums.blackberry.com/t5/Testing-and-Deployment/How-and-When-to-Sign/ta-p/442779)
> 
> [如何在黑莓中签署自动运行应用程序](https://stackoverflow.com/questions/1594390/how-to-sign-auto-run-application-in-blackberry)

# ios - Phonegap Childbrowser onLocationChanged (iOS)

> ID：10650981
> 
> 赞同：1
> 
> 时间：2012-05-18T10:32:25.800
> 
> 标签：ios, cordova, phonegap-plugins, childbrowser

我需要当前 childBrowser 窗口的 URL。我试过了

```
function doThis(){
var location;
var cb = window.plugins.ChildBrowser;
cb.onLocationChange = function(loc){ location = loc; }
alert(location);
} 
```

在我的身体里

```
<a href="#" onclick="doThis()">Do this</a> 
```

但是，每当我添加带有 cb.onLocationChange 的行时，我的应用程序就不再响应了。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T10:53:14.970

它应该是

```
cb.onLocationChange = function(loc){
    location = loc; 
    alert(location);
} 
```

# android - 上下文操作栏文本选择

> ID：10650984
> 
> 赞同：0
> 
> 时间：2012-05-18T10:32:37.023
> 
> 标签：android

当像这样选择文本时，有什么方法可以添加自定义上下文操作栏：

![在此处输入图像描述](../Images/70b9841ca9d25498d514efe68c261853.png)

我环顾四周：http: [//developer.android.com/guide/topics/ui/menus.html#context-menu](http://developer.android.com/guide/topics/ui/menus.html#context-menu)

但它确实没有太多关于 EditText 选择的信息。

我正在使用物理的 Android 4.0.3 设备，因此我可以使用所有 API。

有人有想法么？

* * *

为想知道如何执行此操作的任何人编辑我在此处记录了代码

[http://www.muktware.com/4022/text-selection-cab](http://www.muktware.com/4022/text-selection-cab)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-22T18:10:32.220

尝试在您的 EditText 上[设置自定义。`ActionMode.Callback`](http://developer.android.com/reference/android/widget/TextView.html#setCustomSelectionActionModeCallback%28android.view.ActionMode.Callback%29)您可以控制默认操作以及添加新操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T23:56:30.523

我已经制作了自己的版本来编辑代码以满足我的需要，我不相信有任何实际的方法可以做到这一点。

# c# - 将行添加到 WPF 数据网格中，直到运行时才知道列

> ID：10650985
> 
> 赞同：6
> 
> 时间：2012-05-18T10:32:40.170
> 
> 标签：c#, wpf, datagrid, runtime

我正在尝试将数据添加到数据网格（实际上，任何在网格中呈现数据的控件都可以），但是直到运行时才知道列（名称和数字）。

我知道如何创建的列：例如

```
DataGridTextColumn textColumn = new DataGridTextColumn();
textColumn.Header = column.DisplayName;
MyDataGrid.Columns.Add(textColumn); 
```

但是如何添加行？我看不到如何使用绑定，因为我的数据不包含在具有已知属性的对象中。例如，每一行的数据可能以字符串 [] 的形式出现。所以一次我可能有三列，另一次我可能有五列。

我期待能够做这样的事情：

```
// Example data to represent a single row.
string[] row1 = new[] { "value1", "value2", "value3" };

var row = new Row;
row.AddCell(row1[0]);
row.AddCell(row1[1]);
row.AddCell(row1[2]);
MyDataGrid.Rows.Add(row); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-18T10:40:08.620

我必须开始插入 VS 以了解确切的代码，但您很可能只创建列并使用列键作为绑定表达式，因为索引绑定在 WPF 中工作

我会在一分钟内得到一些代码 - 但它看起来像你的行创建代码，但列上的绑定看起来像（原谅可能不正确的方法名称）

```
textColumn.Bindings.Add(new Binding("this[" + columnIndex.ToString() + "]")); 
```

更新：

是的，不确定这是否是您正在寻找的，但它有效：

创建了一个带有数据网格的窗口（dataGrid1）

```
 public MainWindow()
    {
        InitializeComponent();

        var col = new DataGridTextColumn();
        col.Header = "Column1";
        col.Binding = new Binding("[0]");
        dataGrid1.Columns.Add(col);

        col = new DataGridTextColumn();
        col.Header = "Column2";
        col.Binding = new Binding("[1]");
        dataGrid1.Columns.Add(col);

        col = new DataGridTextColumn();
        col.Header = "Column3";
        col.Binding = new Binding("[2]");
        dataGrid1.Columns.Add(col);

        //dataGrid1.ad

        List<object> rows = new List<object>();
        string[] value;

        value = new string[3];

        value[0] = "hello";
        value[1] = "world";
        value[2] = "the end";
        rows.Add(value);

        dataGrid1.ItemsSource = rows;
    } 
```

![例子](../Images/6f3be86f6b3aeac45633ffed1a60cbb4.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-18T10:38:46.350

没有经常使用数据网格，但你可以尝试这样的事情

```
int currentRow = MyDataGrid.Rows.Add();

MyDataGrid.Rows[currentRow].Cells[0].Value = row1[0];  
MyDataGrid.Rows[currentRow].Cells[1].Value = row1[1];
MyDataGrid.Rows[currentRow].Cells[2].Value = row1[2]; 
```

# java - 黑莓中的连接超时

> ID：10650989
> 
> 赞同：0
> 
> 时间：2012-05-18T10:32:56.323
> 
> 标签：java, blackberry-jde, connection-timeout

使用 HttpConnection 从 url 获取数据时如何在黑莓中设置连接超时？我在 url 中传递 ConnectionTimeout 参数但没有工作当没有网络时，应该显示黑屏和网络错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T11:34:29.343

从[这里](http://supportforums.blackberry.com/t5/Java-Development/Specify-timeout-for-http-connection/m-p/114234/highlight/true#M12943)：

> 来自[DB-00526](http://supportforums.blackberry.com/t5/Java-Development/Control-the-connection-timeout-for-TCP-connections-through-the/ta-p/445851)：
> 
> 注意：直接 TCP 连接或通过无线应用协议 (WAP) 网关的连接不支持 ConnectionTimeout 参数。只有通过 BlackBerry MDS Connection Service 建立的 TCP 连接支持此参数。
> 
> 我怀疑这是你例外的原因。

# testing - 如何使用 Selenium 进行模糊测试

> ID：10650990
> 
> 赞同：6
> 
> 时间：2012-05-18T10:33:00.830
> 
> 标签：testing, selenium, fuzzing

我是 Selenium 的新手，也是模糊测试的新手。我看到 Selenium IDE 只允许固定的测试用例。但是，模糊测试似乎很有帮助。

那么，模糊测试的背后是什么，Selenium 提供什么样的测试，这是黑盒测试还是白盒测试。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-18T10:47:30.180

简短的回答：

*   Selenium 主要是关于黑盒测试，但您也可以使用 Selenium 进行一些更白的测试。
*   与 Selenium IDE 相比，Selenium RC 为您提供了更多的自由来进行模糊测试。

长答案，见下文：

在这篇文章中，我将尝试解释使用 Selenium RC 随机测试 Web 应用程序的概念。

通常来说，像 Selenium 这样[的黑盒测试](http://en.wikipedia.org/wiki/Black-box_testing)技术给你一个很好的自由

*   (1) 在某个字段中输入任意值
*   （2）在某个HTML表单中选择任意字段进行测试
*   (3) 选择任何执行顺序/步骤来测试某一组字段。

基本上你

*   使用 (1) 测试 HTML 表单中的特定字段（您是否为字段选择了合适的最大长度），您的 JavaScript 处理该字段的值（例如，将“t”转换为今天的日期，将“+1”转换为明天的日期），以及后端数据库对该变量的处理（VARCHAR 长度，将数字字符串转换为数值，...）。
*   使用 (2) 测试所有可能的字段
*   使用（3）测试字段之间的交互：如果在密码字段之前没有输入用户名字段，是否会弹出 JavaScript 警报，是否有数据库（例如 Oracle）在特定条件下触发“弹出”不满足。

请注意，即使在理论上也无法测试一切（程序的所有状态，由所有变量的可能组合构成）（例如：考虑测试用于解析字符串的小函数，那么字符串有多少可能的值？） . 因此，实际上，给定有限的资源（时间、金钱、人员），您只想测试 Web 应用程序的“最关键”执行路径。如果一条路径具有更多属性，则该路径被称为更“关键”：(a) 频繁执行，(b) 偏离规范会导致严重损失。

不幸的是，很难知道哪些执行用例是至关重要的，除非您记录了应用程序的所有用例并选择最常用的用例，这是一个非常耗时的过程。此外，即使是执行最少的用例中的一些错误，如果它是一个安全漏洞，也可能会导致很多麻烦（例如，由于某些 PHP 页面的 URL 处理中的一个小错误，有人窃取了所有客户的密码）。

这就是为什么您需要随机扫描测试空间（即在这些用例中使用的值的空间），希望运行一些东西并扫描一切。这称为[模糊测试](http://en.wikipedia.org/wiki/Fuzz_testing)。

使用 Selenium RC，您可以轻松完成所有阶段 (1)、(2) 和 (3)：通过使用 Java、PHP、CSharp、Ruby、Perl 等受支持的语言进行一些编程，在任何执行步骤下测试任何字段中的任何值， Python。

以下是执行所有这些阶段 (1)、(2) 和 (3) 的步骤：

*   创建您的 HTML 字段列表，以便您可以轻松地遍历它们。如果您的 HTML 字段不够结构化（遗留原因），请考虑向您的 HTML 元素添加一个包含特定 id 的新属性，例如*selenium-id*，以 (1) 简化 XPath 形成，(2) 加速 XPath 解析和(3)避免翻译麻烦。在为这些新添加的 selenium-id 选择值时，您可以自由地帮助迭代，同时通过 (a) 使用连续数字，(b) 使用形成一致性的名称进行模糊测试。
*   创建一个随机变量来控制步长，比如**rand_step**
*   创建一个随机变量来控制字段，比如**rand_field**
*   最终，创建一个随机变量来控制输入某个字段的值，比如**rand_value**。
*   现在，在你的模糊算法中，首先遍历**rand_step**的值，然后在每次这样的迭代中，遍历**rand_field**，最后遍历**rand_value**。

也就是说，模糊测试有助于在有限的执行时间后扫描整个应用程序的用例值空间。据说“[出现了一批新漏洞，影响了流行的客户端应用程序，包括 Microsoft Internet Explorer、Microsoft Word 和 Microsoft Excel；其中很大一部分漏洞是通过模糊测试发现的](https://rads.stackoverflow.com/amzn/click/com/0321446119)”

但是模糊测试并非没有缺点。一个如果是在给定所有这些随机性的情况下重现测试用例的能力。但是您可以通过执行以下任一操作轻松克服此限制：

*   将手头的测试用例生成在一个批处理文件中，在一段时间内使用，并逐步应用该文件
*   即时生成测试用例，并记录这些用例
*   仅记录失败的案例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T10:56:33.260

回答更多关于硒是黑盒还是白盒的问题。

关于黑盒和白盒的定义

*   黑盒：检查一个盒子（通常是整个应用程序）是否在输入输入的同时提供正确的输出。从理论上讲，如果验证了所有可能的输入-输出对，您的应用程序就没有错误。
*   白框：检查源的控制流。从理论上讲，如果访问所有执行路径都没有问题，您的应用程序就没有错误。

但是在现实生活中，你不能做所有的输入输出对，也不能做所有的执行路径，因为你总是有有限的资源

*   时间
*   钱
*   人们

使用 selenium：您可以通过输入值或在 Web 应用程序上单击来模仿用户，然后等待浏览器是否为您提供所需的行为。您不知道也不关心 Web 应用程序的内部功能实际上是如何工作的。这就是为什么典型的 Selenium 测试是黑盒测试的原因

# android - Android选项卡侦听器不会在所选选项卡上刷新

> ID：10650992
> 
> 赞同：1
> 
> 时间：2012-05-18T10:33:11.517
> 
> 标签：android, tabs, actionlistener, ontouchlistener

我希望您能提供帮助，如果当前选择了一个选项卡然后用户再次单击它，我似乎无法重新加载当前选项卡，有人可以指出我在做什么，也许可以修改我的代码以向我展示我做错了什么，因为我在这里和通过谷歌查看了很多线程，但现在似乎知道答案，或者我只是愚蠢:D谢谢:)

```
public class HelloTabWidget extends TabActivity implements OnClickListener {

public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

Resources res = getResources(); // Resource object to get Drawables
final TabHost tabHost = getTabHost();  // The activity TabHost
TabHost.TabSpec spec;  // Resusable TabSpec for each tab
Intent intent;  // Reusable Intent for each tab

// Create an Intent to launch an Activity for the tab (to be reused)
intent = new Intent().setClass(this, ArtistsActivity.class);

// Initialize a TabSpec for each tab and add it to the TabHost
spec = tabHost.newTabSpec("artists").setIndicator("Artists",
              res.getDrawable(R.drawable.ic_tab_artists))
          .setContent(intent);
tabHost.addTab(spec);

// Do the same for the other tabs
intent = new Intent().setClass(this, AlbumsActivity.class);
spec = tabHost.newTabSpec("albums").setIndicator("Albums",
              res.getDrawable(R.drawable.ic_tab_albums))
          .setContent(intent);
tabHost.addTab(spec);

intent = new Intent().setClass(this, SongsActivity.class);
spec = tabHost.newTabSpec("songs").setIndicator("Songs",
              res.getDrawable(R.drawable.ic_tab_songs))
          .setContent(intent);
tabHost.addTab(spec);

tabHost.setCurrentTab(0);

tabHost.setOnTabChangedListener(new OnTabChangeListener() {

public void onTabChanged(String tabId) {
   // Log.d(debugTag, "onTabChanged: tab number=" + mTabHost.getCurrentTab());

    switch (tabHost.getCurrentTab()) {
    case 0:
        //do what you want when tab 0 is selected
            test();
        break;

    case 1:
        //do what you want when tab 1 is selected
        break;
    default:

        break;
    }
}
});     
}

public void test (){

AlertDialog.Builder alert = new AlertDialog.Builder(this);
alert.setTitle("Warning");
alert.setMessage("You are about to self-destruct!");
alert.show();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T11:06:56.123

首先在应用程序类中创建一个变量，如下所示：

```
public class GlobalClass extends Application {
    public int displayTab = 0;

    public int getDisplayTab() {
        return displayTab;
    }

    public void setDisplayTab(int displayTab) {
        this.displayTab = displayTab;
    }
} 
```

并修改您的活动如下：

```
 public class HelloTabWidget extends TabActivity implements OnClickListener {

    GlobalClass globel;

    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    globel = (GlobalClass) getApplication();

    Resources res = getResources(); // Resource object to get Drawables
    final TabHost tabHost = getTabHost();  // The activity TabHost
    TabHost.TabSpec spec;  // Resusable TabSpec for each tab
    Intent intent;  // Reusable Intent for each tab

    // Create an Intent to launch an Activity for the tab (to be reused)
    intent = new Intent().setClass(this, ArtistsActivity.class);

    // Initialize a TabSpec for each tab and add it to the TabHost
    spec = tabHost.newTabSpec("artists").setIndicator("Artists",
                  res.getDrawable(R.drawable.ic_tab_artists))
              .setContent(intent);
    tabHost.addTab(spec);

    // Do the same for the other tabs
    intent = new Intent().setClass(this, AlbumsActivity.class);
    spec = tabHost.newTabSpec("albums").setIndicator("Albums",
                  res.getDrawable(R.drawable.ic_tab_albums))
              .setContent(intent);
    tabHost.addTab(spec);

    intent = new Intent().setClass(this, SongsActivity.class);
    spec = tabHost.newTabSpec("songs").setIndicator("Songs",
                  res.getDrawable(R.drawable.ic_tab_songs))
              .setContent(intent);
    tabHost.addTab(spec);

    tabHost.setCurrentTab(globel.getDisplayTab());

//Here Handling first tab click 
         getTabWidget().getChildAt(0).setOnClickListener(new OnClickListener() {
                        @Override
                        public void onClick(View v) {
                                                test();
                            Log.d("Clickedddddddddddd", "1"
                                    + getTabHost().getCurrentTabTag());
                            HelloTabWidget.this.finish();
                            globel.setDisplayTab(0);
                            Intent i = new Intent(HelloTabWidget.this, HelloTabWidget.class);
                            startActivity(i);

                        }
                    });

    }
    public void test (){

    AlertDialog.Builder alert = new AlertDialog.Builder(this);
    alert.setTitle("Warning");
    alert.setMessage("You are about to self-destruct!");
    alert.show();
    }

    } 
```

# javascript - 鼠标事件上的 JavaScript DOM 父/子关系

> ID：10650994
> 
> 赞同：2
> 
> 时间：2012-05-18T10:33:18.733
> 
> 标签：javascript, dom, mouseover, mouseout

好的，也许我问过类似的问题，但这是我遇到的另一个问题。我将从显示代码开始：

```
var MyClass = {
    // Set up the events for the parent
    // MyParent is a DIV
    SetEvents: function() {
         MyParent.onmouseover = function() { MyClass.MouseHover(MyParent); };
         MyParent.onmouseout = function() { MyClass.MouseOut(MyParent); };
    },

    // Function activated when moving the mouse over the parent
    MouseHover: function(Parent) {
        if (Parent) {
        // Here I create the child, when moving the mouse over the parent control
        // The child is an IMG
            var child = document.createElement("img");
                child.id = "child";
                child.src = "child.png";
                child.style.float = "right";
            Parent.appendChild(child);
        }
    },

    // Function activated when moving the mouse out of the parent control
    MouseOut: function(Parent) {
        if (Parent) {
            var child = document.getElementById("child");
            if (child) {
                // On mouse out I remove the child
                Parent.removeChild(child);
            }
        }
    }
} 
```

所以，这只是一个简单的图像，当我将鼠标移到 a 时出现`div`，然后当我将鼠标移出时消失。然而，这并不是我想要的。

问题是，当鼠标在 parent 上时`div`，如果我将它移到 child 上`img`（仍然在 parent 上），该`MouseOut()`函数被触发。

这些天我一直在寻找解决方案和技巧，但一切都是徒劳的。现在，我希望有人能找出问题所在。一定有一些我错过的 JavaScript 章节。谢谢大家！

我添加了一些图片，以更好地解释这一点

![情况1](../Images/e5c4d64c3b66960ba5b81c638a1aa5f2.png) ![案例2](../Images/36eaefaaef3c0a1870cf3cbc64b1f0bc.png) ![案例3](../Images/128a8bfa5398b9f99fbb519c68aad590.png) ![案例4](../Images/4a4beac3fa179e0569241b917af40406.png)

**更新** 看起来只有在动态创建 IMG 子项时才会发生这种情况。如果我之前创建它并且只更改它的 src，它就可以工作。

**JSSFIDLE DEMO你可以在**[http://jsfiddle.net/E9q6e/1/](http://jsfiddle.net/E9q6e/1/) 看到这个脚本工作（好吧，不工作，更好的说法）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:14:12.640

您可以尝试检查是否`Parent`包含`child`in `MouseOut()`：

```
var ref=event.toElement || event.relatedTarget; // This line is pseudocode
if(!Parent.contains(ref)){
  Parent.removeChild(child);
} 
```

# ruby - 如何在 rake 任务中编译

> ID：10650996
> 
> 赞同：3
> 
> 时间：2012-05-18T10:33:29.847
> 
> 标签：ruby, rake, sass, compass-sass

我使用 rake 为开发准备文件。
但我无法用指南针编译我的 sass 文件

```
 desc "Compile to compressed css"
  task :compile_compressed do
    #Go to the compass project directory
    Dir.chdir File.join( ENV['base_path'], CONF['dir']['compass'] ) do |dir|
      file_compass_config = "/path/to/some/different/config.rb"

      system "compass compile -c #{file_compass_config} --force"
    end
  end 
```

我正在使用带有 gemset 的 rvm。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:11:39.113

问题中的代码实际上有效。
可能是因为脚本不在安装指南针的 rvm gemset 中。

# python - smtp 远程登录 python

> ID：10650998
> 
> 赞同：0
> 
> 时间：2012-05-18T10:33:42.413
> 
> 标签：python, smtp, telnet

从 telnet 库返回结果时遇到一些问题，但我得到的只是标题，然后是空白等待输入。

知道如何从 Telnet 获取输出吗？

```
def smtp_test(server_info):
print "Check server info: " + server_info
cpos = server_info.find(':')
try:
    sock = socket()
    # sock.connect((server_info[:cpos], int(server_info[cpos+1:])))
    sock.connect(("mail.SMTPSERVERNAME.com", 25))
    print sock.recv(256)
    sock.send("HELO client.example.com\r")
    print sock.recv(256)
    sock.send("MAIL from: <sender@example.com>\r")
    print sock.recv(256)
    #sock.send("RCPT to: <recipient@example.com>")
    #print sock.recv(256)
    sock.close
    return True
except:
    return False 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T10:35:58.093

`\r`不是行终止符。因此服务器没有回复并等待他看到一个完整的行，而您等待来自服务器的回复。经典的僵局。

尝试使用`\r\n`.

你应该考虑[`smtplib`](http://docs.python.org/library/smtplib)改用。

# crystal-reports - 将日期添加到 Crystal Report 文本对象

> ID：10650999
> 
> 赞同：0
> 
> 时间：2012-05-18T10:33:51.093
> 
> 标签：crystal-reports

我的报告上有一个文本对象，其中包含一些文本。我想做的是向文本对象添加一个日期，该日期将始终显示当前日期。我试过使用日期字段，但几乎不可能正确排列。

关于如何做到这一点的任何想法？有人告诉我有一种方法可以使用 &[] 之类的方法来执行此操作，但我不知道如何操作。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T11:01:44.257

您可以编辑内联日期，双击文本字段然后选择日期文本，您现在可以单击工具栏上的格式按钮并设置日期格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T10:39:05.383

您可以将任何字段，包括特殊字段（例如打印日期）拖到文本对象中 - 它会毫无问题地排列。