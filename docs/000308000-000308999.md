# StackOverflow 问答 000308000-000308999

# database - 我在哪里可以获得所有国家/地区的邮政编码？

> ID：308017
> 
> 赞同：30
> 
> 时间：2008-11-21T06:10:18.917
> 
> 标签：database, geolocation, gis, postal-code

我曾经读过一个开源数据库，用于存储带有地理位置数据的邮政编码，但现在我不记得它的名字了。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2008-11-21T06:14:23.060

我的猜测是你失去的朋友是[GeoNames](http://www.geonames.org/)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-16T09:51:09.063

[在GeoNames](http://www.geonames.org/)中查找所有国家或运行已解析的 MySQL 脚本 (INSERT)：

[下载**delivery_zip.zip**](https://www.dropbox.com/s/mj95fbx6uk6hstf/delivery_zip.sql.zip?dl=0) (11 Mb)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-11-21T06:27:41.673

您正在寻找一个开放的 GIS 数据库 - 主要关键字是“GIS”。这将帮助您找到结果。

您要查找的信息通常是商业级的（即您需要为数据付费），但您可以在开源 GIS 网站上查看可用的信息：

*   [http://www.osgeo.org/](http://www.osgeo.org/)
*   [http://opensourcegis.org/](http://opensourcegis.org/)
*   [http://freegis.org/](http://freegis.org/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-21T15:58:09.837

我目前正在使用这个：[https](https://www.back4app.com/database/back4app/zip-codes-all-countries-in-the-world) ://www.back4app.com/database/back4app/zip-codes-all-countries-in-the-world它是免费的并且非常有用！

也可以与这个数据集合作，以进一步改进它。:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-12T18:58:29.347

是的 Geonames 就是这个地方。更具体地说，正如 slacy 所说

[https://download.geonames.org/export/zip/](https://download.geonames.org/export/zip/)

它有一个国家邮政编码列表和一个 allCountries zip 文件。

并且数据每天更新。

# javascript - jQuery slideUp().remove() 在删除发生之前似乎没有显示 slideUp 动画

> ID：308019
> 
> 赞同：98
> 
> 时间：2008-11-21T06:11:07.607
> 
> 标签：javascript, jquery, animation

我有这行JavaScript，我看到的行为是`selectedLi`立即消失而没有“向上滑动”。这不是我所期望的行为。

我应该怎么做才能使`selectedLi`幻灯片在被移除之前向上滑动？

```
selectedLi.slideUp("normal").remove(); 
```

* * *

## 回答 #1

> 赞同：204
> 
> 时间：2008-11-21T06:20:31.423

可以通过将调用删除的回调 arg 放到 slideUp 中来修复它吗？

例如

```
selectedLi.slideUp("normal", function() { $(this).remove(); } ); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2011-01-27T13:48:50.873

你需要更明确：而不是说“这个”（我同意应该有效），你应该这样做：

```
$("#yourdiv").slideUp(1000, function() {
    $(this).remove();
}); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-06-10T12:53:26.240

最简单的方法是调用 slideUp 中的“remove()”函数作为其他人所说的参数，例如：

```
$("#yourdiv").slideUp("normal", function() {
    $(this).remove();
}); 
```

必须在匿名 function() 中调用它，以防止在 slideUp 结束之前执行 remove()。另一种等效的方法是使用 jQuery 函数“promise()”。更适合那些喜欢不言自明的代码的人，比如我 ;)

```
$("#yourdiv").slideUp("normal").promise().done(function() {
    $(this).remove();
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-03-04T13:05:39.790

使用 Promise，您还可以等待多个动画完成，例如：

```
selectedLi.slideUp({duration: 5000, queue: false})
.fadeOut({duration: 3000, queue: false})
.promise().done(function() {
    selectedLi.remove()
}) 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2008-11-21T21:37:03.853

```
selectedLi.slideUp(200, this.remove); 
```

# php - 你能在 PHP 5.2.5 中提示返回类型吗？

> ID：308027
> 
> 赞同：6
> 
> 时间：2008-11-21T06:15:49.267
> 
> 标签：php, eclipse, return-value, php-5.2, type-hinting

我认为我的 Eclipse 的 ctrl+点击链接可能会受益匪浅……

**编辑：**我正在使用 Eclipse PDT。

**编辑 2：**我对使用 @return 或 @var 语句将 docblocks 放在函数（和变量）之前的解决方案非常满意，我刚刚更新了我的应用程序的文档，现在 eclipse 向我展示了哪些函数可用什么物体！

惊人的。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-11-21T07:41:51.963

```
// [...]
/**
 * Return the Request object
 *
 * @return Zend_Controller_Request_Abstract
 */
public function getRequest()
{
    return $this->_request;
}
// [...] 
```

与 Eclipse PDT 完美配合。你用哪个插件？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-21T06:20:12.703

简短的回答：没有。

长答案：考虑添加带有@return 声明的文档块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-21T12:03:49.627

在 PHP 中提示返回类型的唯一方法是使用带有标准注释块的 Eclispe PDT 或 Zend Studio 等优秀的 IDE。PHP 根本无法预测返回类型，因为它是动态类型语言，因此类型检查是在运行时完成的，这与 C#、JAVA 和 C++ 等静态类型语言不同。

# dojo - 从 AOL 加载 Dojo 库并从本地加载小部件代码？

> ID：308036
> 
> 赞同：3
> 
> 时间：2008-11-21T06:21:20.313
> 
> 标签：dojo

我刚开始学习道场。我按照一个站点 Widget 示例使用了一些不同的方式来加载 Dojo 库。我喜欢使用 AOL 引用来加载 dojo.js，如下所示：

```
<script type="text/javascript" 
  src="http://o.aolcdn.com/dojo/1.2.0/dojo/dojo.xd.js">
</script> 
```

并将我的小部件代码保存在本地网络服务器中，如下所示：

```
scripts/
   myWidget/
     widgetExample.js
   ...
test.html 
```

其中*widgetExample.js*包含我的小部件类代码，而*test.html*是我的测试页面。我收到的错误消息是：“未捕获的异常：无法加载跨域资源：*myWidget.widgetExample* ...”。我不确定是否必须在本地加载 dojo 包？我真的很喜欢将 dojo 库包按原样分开或从 AOL 加载，并且只将我自己的代码放在本地路径中。我试图用谷歌搜索不同的域加载、baseScriptUrl 和 moduleMapping？还是想不通。感谢您提供任何详细说明（如果有）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-27T13:14:44.173

这可能会有所帮助：[http ://dojotoolkit.org/forum/dojo-core-dojo-0-9/dojo-core-support/xdomain-usage-dojo-loading-not-detecting-local-modules](http://dojotoolkit.org/forum/dojo-core-dojo-0-9/dojo-core-support/xdomain-usage-dojo-loading-not-detecting-local-modules)

总结是：您需要一个 djConfig 项来注册您希望成为本地的 modulePaths，并指定一个 baseUrl 以“欺骗”Dojo，使其认为它知道这些路径在主机之间的相对位置。

djConfig = { modulePaths: { "mine":"/js/mine" };

然后你可以 dojo.require("mine.Thing") 从 /js/mine/Thing.js

问候，彼得·希金斯

# objective-c - 你的 Objective-C 编码风格是什么？

> ID：308044
> 
> 赞同：0
> 
> 时间：2008-11-21T06:27:43.377
> 
> 标签：objective-c

当我将任何第三方代码合并到我的应用程序中时，我做的第一件事就是将其重新格式化为我个人的编码偏好：

```
// Single line comments only

// I never put spaces inside my parenthesis 
-(void)myOCDMethod
{    
    // If an if or for statement has only one instruction, I don't use brackets
    if(this)
        [self that];
    else
        [self somethingElse];

    // If I do have to use brackets, they go on their own lines so that they line up
    if(this)
    {
        [self that];
        [self andThat];
    }

    // I always put the pointer asterisk next to the instance name
    NSObject *variable = [[NSObject alloc] init];

    // I always put spaces around operators
    if(i == 0)
        x = 2;

} 
```

你使用什么强迫症编码格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-21T13:42:33.343

我做了很多这样的事情，但有一些不同之处：

我总是在括号前后插入空格： `-(void)myOCDMethod -> - (void) myOCDMethod`

我将大括号留在同一行：

```
if (this) 
{
  //code
} 
```

变成

```
if (this) {
  //code
} 
```

如果我感觉特别强迫症，我会排队我的当地人：

```
 float                l1;
NSArray              *array;
ReallyLongClassName  *object; 
```

最后，TABS，而不是 SPACES。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-21T14:21:09.443

制表符在一条线的中间是邪恶的，而空格是摇滚的！例子：

```
int    n;
double d; 
```

让标签大小为 4。我会用点指出它们：

```
.   .   .
int     n;  // two tabs here
double  d;  // one tab here 
```

如果该代码在另一个开发人员的机器上打开，其中选项卡大小为 2，他将看到以下图片：

```
. . . . .
int   n;
double  d; 
```

因此，您应该使用相同的制表符大小（这无论如何都行不通，因为您的代码可能被世界上任何人重用 - 您不能强迫所有人），或者坚持使用空格。明白了吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-21T13:56:01.180

和你的差不多，不过我在“-”或“+”和返回类型的左括号之间留了一个空格。哦，我使用 (condition) ？(value1) : (value2) 很多东西，主要用于作业和数学......我知道它使代码更难阅读，但它节省了三行的打字量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-21T14:03:47.013

1.  正确缩进代码
2.  正确的换行符。（最多一个换行符；每个函数和注释之前的换行符等）
3.  正确的命名约定

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-07T19:44:10.340

我在

```
NSString*  aString; 
```

营地，而不是

```
NSString  *aString; 
```

（对于变量和参数）

理由是在第一种情况下，它看起来像是在说“aString 是一个 NSString 指针”，而后者读起来更像是“（取消引用的）*aString 是一个 NSString 对象”。特别是在 Obj-C 中，所有对象都是堆分配的，因此由指针引用，第一个对象感觉不那么复杂。

我只为函数定义、方法定义和 ivar 块对齐花括号，因为它们是文件中的第一级范围（外部的任何内容都是全局的），否则会感觉“泄漏”。对齐后，块更容易辨别，没有“洞”。

在方法签名中，我使用这个间距：

```
- (void) methodName:(Class*) object; 
```

当有超过 2 个参数时，我喜欢垂直对齐冒号（除非第一个参数标记比方法名称长得多，否则它会中断）。Xcode 很好地自动标记了这一点。

其他一切都和你一样。

# php - 分页问题 [PHP]

> ID：308046
> 
> 赞同：2
> 
> 时间：2008-11-21T06:28:58.490
> 
> 标签：php, pagination, logic

所以我在 PHP 中执行此操作，但这是一个逻辑问题，因此我将尝试尽可能通用地编写它。

首先是这个分页脚本的工作原理：

1.  for（*绘制前三页链接*）
2.  if (*如果#1 的页面和#3 的页面之间有页面，则绘制省略号 (...)* )
3.  for（*绘制当前页面和它的每一侧的两个页面链接*）
4.  if (*如果在#3 的页面和#5 的页面之间有页面，则绘制省略号 (...)* )
5.  for（*绘制最后三页链接*）

问题是当页面数量较少时（当页面计数为 10 时我注意到这一点）应该有一个省略号，但没有绘制。

上代码：

```
$page_count = 10; //in actual code this is set properly
$current_page = 1; //in actual code this is set properly

for ($i = 1;$i <= 3;$i++)
{
    if ($page_count >= $i)
        echo $i;
}

if ($page_count > 3 && $current_page >= 7)
    echo "...";

for ($i = $current_page - 2;$i <= current_page + 2;$i++)
{
    if ($i > 3 && $i < $page_count - 2)
        echo $i;
}

if ($page_count > 13 && $current_page < $page_count - 5)
    echo "...";

for ($i = $page_count - 2;$i <= $page_count;$i++)
{
    if ($page_count > 3)
        echo $i;
} 
```

所以我认为最好的办法是修改两个省略号 if 语句中的一个以包含这样的情况，但是我已经尝试过并且被难住了。

另请注意，为了便于阅读，我压缩了这段代码，所以请不要提供诸如“那些 for 循环无效，因为它们会为每次迭代重新计算 current_page - 2”之类的提示，因为我知道 :)

* * *

对于那些想要查看此逻辑当前如何工作的细分的人，这里是带有迭代 $page_count 和 $current_page 的示例输出（已修改）。 [http://rafb.net/p/TNa56h71.html](http://rafb.net/p/TNa56h71.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-21T08:12:15.537

```
<?php

/**
 * windowsize must be odd
 *
 * @param int $totalItems 
 * @param int $currentPage 
 * @param int $windowSize 
 * @param int $anchorSize 
 * @param int $itemsPerPage 
 * @return void
 */
function paginate($totalItems, $currentPage=1, $windowSize=3, $anchorSize=3, $itemsPerPage=10) {
    $halfWindowSize = ($windowSize-1)/2;

    $totalPages = ceil($totalItems / $itemsPerPage);
    $elipsesCount = 0;
    for ($page = 1; $page <= $totalPages; $page++) {
        // do we display a link for this page or not?
        if ( $page <= $anchorSize ||  
            $page > $totalPages - $anchorSize ||
            ($page >= $currentPage - $halfWindowSize &&
            $page <= $currentPage + $halfWindowSize) ||
            ($page == $anchorSize + 1 &&
             $page == $currentPage - $halfWindowSize - 1) ||
            ($page == $totalPages - $anchorSize &&  
             $page == $currentPage + $halfWindowSize + 1 ))
        {
            $elipsesCount = 0;
            if ($page == $currentPage)
                echo ">$page< ";
            else
                echo "[$page] ";
        // if not, have we already shown the elipses?
        } elseif ($elipsesCount == 0) {
            echo "... ";
            $elipsesCount+=1; // make sure we only show it once
        }
    }
    echo "\n";
}

//
// Examples and output
//

paginate(1000, 1, 3, 3);
// >1< [2] [3] ... [98] [99] [100] 

paginate(1000, 7, 3, 3);
// [1] [2] [3] ... [6] >7< [8] ... [98] [99] [100] 

paginate(1000, 4, 3, 3);
// [1] [2] [3] >4< [5] ... [98] [99] [100] 

paginate(1000, 32, 3, 3);
// [1] [2] [3] ... [31] >32< [33] ... [98] [99] [100] 

paginate(1000, 42, 7, 2);
// [1] [2] ... [39] [40] [41] >42< [43] [44] [45] ... [99] [100] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-21T07:13:18.480

这可能是一个过于复杂的解决方案，但它确实有效。

我在这里使用了一个数组，而不仅仅是打印，这让我可以“重做”逻辑。

当“页面左右”恰好与左右肩重合时，就会出现部分问题。

```
function cdotinator ( $current_page, $page_count ) 
{
  $stepsize = 3; 
  $elipse = '...';
  # Simple Case. 
  if ( $page_count <= 2 * $stepsize )
  {
    $out = range( 1, $page_count );
    $out[$current_page - 1 ] = '*' . $current_page . '*';
    return $out;
  }
  #Complex Case
  # 1) Create All Pages
  $out = range( 1, $page_count ); 
  # 2 ) Replace "middle" pages with "." placeholder elements 
  for( $i = $stepsize+1 ; $i <= ( $page_count - $stepsize ) ; $i ++ )
  {
    $out[ $i - 1 ] = '.' ; 
  }
  # 3.1 ) Insert the pages around the current page 
  for( $i =  max(1,( $current_page - floor($stepsize / 2) )) ;
       $i <= min( $page_count,( $current_page + floor( $stepsize/2))); 
       $i ++ )
  {
    $out[ $i - 1] = $i;
  }
  # 3.2 Bold Current Item
  $out[ $current_page - 1 ] = '*' . $current_page . '*' ; 

  # 4 ) Grep out repeated '.' sequences and replace them with elipses 
  $out2 = array(); 
  foreach( $out as $i => $v )
  {
    #  end, current  == peek() 
    end($out2);
    if( current($out2) == $elipse and $v == '.' )
    {
        continue;
    }
    if( $v == '.' )
    {
      $out2[] = $elipse; 
      continue;
    }
    $out2[]= $v;
  }

  return $out2;

} 
```

输出可以在这里看到：http: [//dpaste.com/92648/](http://dpaste.com/92648/)

# php - 学习如何通过 CodeIgniter 使用 AJAX

> ID：308054
> 
> 赞同：10
> 
> 时间：2008-11-21T06:35:38.943
> 
> 标签：php, javascript, ajax, codeigniter

我觉得学习 JavaScript 太难了，这有点尴尬，但是..

假设我有一个非常简单的控制器，如下所示：

```
class front extends Controller {

    public function __construct()
    {
        parent::Controller();   
    }

    public function index()
    {
        //nothing!
    }

    public function test () {

        $someNumber = $this->input->post('someNumber');

        if ($someNumber == 12) { return TRUE; }

    }

} 
```

是的，这可能会写得更好，哈哈。

我想知道的是 - 我如何使用 JavaScript 在表单中提交数字（稍后我会担心验证和模型），我应该如何编写我的 test() 函数以便它返回 JavaScript 可读的内容（我假设 return TRUE 可能不起作用，可能是 XML 或 JSON 或类似的东西？），我如何使用 JavaScript 访问数据？

我知道有像 jQuery 这样的框架可以帮助解决这个问题，但现在我只想从最简单的层面理解它，到目前为止我发现的所有教程和指南对我来说都太深入了。jQuery 中的一个示例或其他任何好的示例。

非常感谢 ：）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-11-21T07:34:22.103

您基本上只需将其打印出来，然后通过 javascript 重新捕获该信息：

```
public function test() {
    $somenumber = $this->input->post('someNumber');
    if ($somenumber == 12) {
        print "Number is 12";
    } else {
        print "Number is not 12";
    }
} 
```

您的 javascript 可能看起来像这样：

```
var xhr;
xhr = new XMLHTTPRequest();
xhr.onreadystatechange = function() {
    if (xhr.readyState == 4) {
        // this is where the return information is
        alert('Status: '+xhr.status+' Response: '+xhr.responseText);
    }
}

xhr.open('POST', '/front/test');
xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
xhr.send('someNumber=12'); 
```

上面的代码没有考虑浏览器的特定问题，但至少我相信应该在 firefox/ie7 上运行。

这是上述所有内容的 jQuery 示例：

```
var options = {
    'someNumber' : 12
}

$.post('/front/test', options, function(data) {
    alert(data); // should print "Number is 12"
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-12-15T12:49:12.150

我还在 CodeIgniter 中发现，当使用如上所述的标准 Javascript AJAX 调用时，响应标头中不会返回“XMLHTTPRequest”。

```
$this->input->is_ajax_request(); 
```

除非您使用 jQuery 处理 AJAX POST 请求，否则输入助手永远不会返回 true。

我还尝试了这篇文章中的方法，但没有成功：http: [//developer.practicalecommerce.com/articles/1810-The-Benefit-of-Putting-AJAX-and-CodeIgniter-PHP-Together](http://developer.practicalecommerce.com/articles/1810-The-Benefit-of-Putting-AJAX-and-CodeIgniter-PHP-Together)

这是我最后使用的：

```
 var query_params = $('#data-form').serialize();
    $.ajax({
        type: 'POST',       
        url: 'process_this.php",
        data: queryParams,
        context: document.body,

    success: function(){
        alert('complete'); // or whatever here
    } 
```

可能是由与我的 CI 安装有关的配置问题引起的，还没有时间调查。

# perl - 为什么我需要显式输出 IIS 而不是 Apache 的 HTTP 标头？

> ID：308059
> 
> 赞同：6
> 
> 时间：2008-11-21T06:38:35.553
> 
> 标签：perl, apache, http, iis, cgi

我正在尝试设置 apache 而不是 IIS，因为[IIS 总是不必要地崩溃](https://stackoverflow.com/questions/188896/why-does-iis-crash-when-i-print-to-stderr-in-perl)，并且能够让我自己检出源代码而不是我们所有人都编辑通用检出会很好。

在 IIS 中，我们*必须*在每个文件的开头执行以下操作：

```
use CGI;
my $input = new CGI();
print "HTTP/1.0 200 OK";
print $input->header(); 
```

而对于 apache，我们*必须*离开 200 OK 行。以下适用于两者：

```
use CGI;
my $input = new CGI();
print $input->header('text/html','200 OK'); 
```

谁能解释为什么？我的印象是 CGI 模块应该自动找出这些细节......

谢谢！

**更新**：布赖恩是对的，nph 解决了 IIS 的问题，但它仍然是 Apache 的问题。我认为在代码中使用条件是不值得的，所以我将坚持使用最后一种方法，无论是否使用 nph。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-11-21T06:50:59.257

HTTP 和 CGI​​ 是不同的东西。Perl CGI 模块将其功能称为“HTTP 标头”，但实际上它只是一个 CGI 标头，供服务器在返回客户端之前进行修复。它们看起来很相似，这就是为什么人们会感到困惑以及为什么 CGI.pm 文档通过称它们是错误的东西而无济于事的原因。

Apache 修复了 CGI 标头以使其成为 HTTP 标头，包括添加 HTTP 状态行和它可能需要的任何其他内容。

如果您的网络服务器没有为您修复标头，那么它可能期望一个“未解析的标头”，您负责整个标头。要在 CGI.pm 中执行此操作，您必须将`-nph`选项添加到对标头的调用中，并且您必须自己制作完整的标头，包括标头`Expires`和`Last-Modified`. [请参阅创建标准 HTTP 标头](http://search.cpan.org/~lds/CGI.pm-3.42/CGI.pm#CREATING_A_STANDARD_HTTP_HEADER:)下的文档。您可以通过三种方式打开 NPH：

```
use CGI qw(-nph)

CGI::nph(1)

print header( -nph => 1, ...) 
```

您使用的是旧版本的 IIS 吗？CGI.pm 曾经为您自动打开 IIS 的 NPH 功能，但现在 CGI.pm 的源代码中已注释掉该行：

```
# This no longer seems to be necessary
# Turn on NPH scripts by default when running under IIS server!
# $NPH++ if defined($ENV{'SERVER_SOFTWARE'}) && $ENV{'SERVER_SOFTWARE'}=~/IIS/; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:34:34.327

在通过 ISAPI 在 IIS 7 下运行的 ActivePerl 5.14 时，我仍然遇到这个问题。[ActivePerl 5.10 FAQ](http://docs.activestate.com/activeperl/5.10/faq/Windows/ActivePerl-Winfaq7.html#My_CGI_scripts_don_t_seem_to_run)声称问题已修复（5.14 FAQ 甚至没有解决该问题），但它似乎没有解决，并且设置他们建议使用的注册表项在此环境中无效。

根据上述常见问题解答使用`$ENV{PerlXS} eq 'PerlIS'`检测 ISAPI 并打开 NPH 密钥似乎有效。我破解了我的 CGI.pm，在旧的 IIS 处理程序下添加了下面的最后两行：

```
# This no longer seems to be necessary
# Turn on NPH scripts by default when running under IIS server!
# $NPH++ if defined($ENV{'SERVER_SOFTWARE'}) && $ENV{'SERVER_SOFTWARE'}=~/IIS/;
# Turn on NPH scripts by default when running under IIS server via ISAPI!
$NPH++ if defined($ENV{'SERVER_SOFTWARE'}) && $ENV{PERLXS} eq 'PerlIS'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-13T12:17:59.490

我在 perl 上遇到了类似的问题（这是 DOS/Unix/Mac 换行符！）

```
binmode(STDOUT);
my $CRLF = "\r\n"; # "\015\012"; # ^M: \x0D  ^L: \x0A
print "HTTP/1.0 200 OK",$CRLF if ($0 =~ m/nph-/o);
print "Content-Type: text/plain".$CRLF;
print $CRLF; print "OK !\n"; 
```

# c# - 超类构造函数中的虚拟化

> ID：308061
> 
> 赞同：4
> 
> 时间：2008-11-21T06:39:31.153
> 
> 标签：c#, .net, c++, oop

我认为根据 OOP 的设计，虚拟化在超类构造函数中不起作用。例如，考虑以下 C# 代码。

```
using System;
namespace Problem
{
    public class BaseClass 
    {
        public BaseClass() 
        {
            Console.WriteLine("Hello, World!");
            this.PrintRandom();
        }
        public virtual void PrintRandom() 
        {
            Console.WriteLine("0");
        }
    }

    public class Descendent : BaseClass 
    {
        private Random randomValue;
        public Descendent() 
        {
            Console.WriteLine("Bonjour, Monde!");
            randomValue = new Random();
        }
        public override void PrintRandom() 
        {
            Console.WriteLine(randomValue.NextDouble().ToString());
        }

        public static void Main() 
        {
            Descendent obj = new Descendent();
            obj.PrintRandom();
            Console.ReadLine();
        }
    }
} 
```

这段代码中断是因为当创建 Descendent 的对象时，它调用基类构造函数，并且我们在基类构造函数中有一个虚拟方法调用，它又调用 Derived 类的方法，因此，它崩溃了，因为那时 randomValue 没有初始化.

类似的代码在 C++ 中有效，因为自 IMO 以来对 PrintRandom 的调用未路由到派生类，C++ 中的顺序类似于：

1\. 调用基类构造函数
2\. 更新这个类
的 V - 表 3\. 调用构造函数代码

我的问题是，首先我是否正确，根据 OOP 原则，虚拟化不应该/不能在超类构造函数中工作，其次，如果我是对的，那么为什么所有 .NET 语言的行为都不同（我有使用 C#、VB.NET 和 MC++ 对其进行了测试）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-21T06:55:43.600

在本机 C++ 中，程序按预期工作：您在基类构造函数中调用基类版本的虚函数。在构造函数调用的时候，只有基类和它的虚函数存在，所以你得到了当时定义的虚函数的最低级版本。这并不意味着不能使用虚拟化，只是不会在基类的构造函数中获得虚拟方法的子类版本（这就是不推荐使用的原因）。

显然，如您所见，托管代码的工作方式不同，因为 (iirc) 整个对象是在调用构造函数之前构建的，因此您在子类构造函数之前获得子类虚函数。这是语言行为之间的记录差异，但应该在 .NET 语言之间保持一致（因为它们都编译为相同的 IL）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-21T07:05:00.103

在我看来，这不是面向对象原则的问题——这取决于所讨论的平台如何处理这个特定的难题。正是由于这个原因，不鼓励从构造函数调用虚方法，但是 - 如果你要这样做，你需要*非常*明确地记录你要调用它，以便任何覆盖它的类都知道会发生什么.

Java 采用与 .NET 相同的方法，*只是*在 C# 中，任何实例变量初始化程序都在调用基本构造函数之前执行。这意味着在您的特定示例中，您可以通过`random`在声明点进行初始化来修复代码。在Java中这无济于事。

至于为什么 MC++*不能这样*工作，我不知道——我建议你比较一下生成的 IL。我的猜测是它显式地进行了非虚拟方法调用。

编辑：我怀疑我误读了这个问题 - MC++ 以哪种方式工作？如果它以 C# 的方式工作，那是 IMO 的一件好事，它提供了跨 .NET 平台的一致视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-21T07:34:55.690

我建议在您的代码上使用 FxCop。我曾与许多人一起工作，他们认为该工具提出的问题无关紧要，但是，如果您的代码包含许多小问题（例如您的问题），那么被一个或多个问题咬伤的机会要高得多。

ReSharper 的代码分析也将解决这个特定问题。

# asp.net - DropDownList 设置默认值

> ID：308065
> 
> 赞同：1
> 
> 时间：2008-11-21T06:46:06.380
> 
> 标签：asp.net, drop-down-menu

通过取消按钮重定向时，我应该如何获得在 DropDownList 中显示的值。在 TextBox 中存在取消按钮的页面中的值应包含在 DropDownList 中。

这个 DropDownList`SelectedIndexChanged`也触发了事件，在列表中选择一个国家时，我们会在同一页面中显示一个 ListView。在那个 ListView 中，我们有一个添加按钮，它会将我们重定向到另一个名为 addcountry 的页面，在该页面中我们几乎没有控件。在这些控件中，一个 TextBox 我通过处于启用`False`状态的 QueryString 获得价值。现在，当我单击取消按钮时，我再次需要在 DropDownList 中显示该值。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-12T09:35:58.667

使用`$_POST`和`$_GET`变量，您应该能够从表单中检索几乎任何值并将其放在新页面上的正确位置，这个正确的位置可以是您的下拉列表元素之一......

为了绝对确保您的取消按钮会将良好的价值发送到正确的页面，请将其放在一个独立的表单中，其中包含您的新页面（您有下拉列表）作为其操作，并在这个单独的表单中放置一个隐藏字段你想在这个 dd 列表中看到的具体值......

希望我很清楚，但从您非常“模糊”和模糊的问题开始很难帮助您。

# state-machine - 如何构建 LR 状态机解析器？

> ID：308073
> 
> 赞同：1
> 
> 时间：2008-11-21T06:53:56.067
> 
> 标签：state-machine, parser-generator

我想尝试创建一个 LR 解析器生成器。有谁知道描述如何从语法创建状态机表的好（免费）资源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-21T06:59:14.187

如需免费资源，请考虑[PLY](http://www.dabeaz.com/ply/)的 Python 源代码- 在 Python 中完整实现 Lex 和 Yacc。

但是，我会推荐一本书，而您几乎没有比[《龙之书》](https://rads.stackoverflow.com/amzn/click/com/0201100886)更好的选择了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-21T09:17:57.480

我遇到的最好的资源是：

[解析技术 - 实用指南](http://www.cs.vu.nl/~dick/PTAPG.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-10-03T04:38:07.280

显而易见的答案是 Aho/Ullman/Ravi 的标准编译器文本，[编译器：原理、技术和工具](https://rads.stackoverflow.com/amzn/click/com/0201100886)

它有完整的解析章节。它不是免费的，但每一分钱都值得，如果你要构建解析器或其他类似编译器的工具，如果你没有这本书，你简直是疯了。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-11-21T09:47:33.643

也许你觉得 Grammatica 很有用。它是一个免费的 .NET 解析器生成器。我有一些经验，这很好。您可以尝试并研究它的代码。 [http://grammatica.percederberg.net/](http://grammatica.percederberg.net/)

# javascript - jQuery 优雅降级

> ID：308076
> 
> 赞同：10
> 
> 时间：2008-11-21T06:55:48.967
> 
> 标签：javascript, jquery, css, backwards-compatibility

我想在这里和那里用一些 jQuery 动画来美化我网站的某些区域，并且我希望完全替换我的 AJAX 代码，因为我现有的代码存在一些跨浏览器兼容性问题。但是，由于 jQuery 是一个 JavaScript 库，我担心当 JavaScript 关闭或用户浏览器中不存在 JavaScript 时我的页面无法正常运行。

我举个例子：目前，我正在使用纯 CSS 工具提示向我的用户（玩家，网站是浏览器游戏）提供其他用户的信息。例如，如果游戏中的其他玩家满足一个或多个条件，则在他们的名字旁边显示一个目标图标，并且在将鼠标悬停在该目标图标上时，会显示有关目标背后原因的信息。这是有用的信息，因为它可以帮助我的玩家知道他们应该计划在游戏中接下来攻击谁。

目前，我使用 CSS 做这样的工具提示。我有一个父 div，其中包含类“信息”的目标图标的图像。然后，我在其中有一个带有“工具提示”类的 div，在它包含的“信息”类的悬停状态下显示，但在正常状态下是隐藏的。当我读到它时，我认为它相当聪明，而且由于没有使用 JavaScript，它可以在任何兼容 CSS 的浏览器上运行。

我想用 jQuery 来达到同样的效果，主要是因为它看起来更干净，但也因为我相信快速而微妙的动画可以让这些“随机出现”的东西对用户更有意义，尤其是在第一个遇到。我只是想知道这两者是否会发生冲突。这只是其中的一个例子，还有许多其他例子表明无法使用 JavaScript 会阻碍网站。

所以我想问的是，如何让 jQuery 网站在不支持 JavaScript 但支持大多数 CSS 的浏览器上优雅地*降级*？我的目标是让网站为所有用户提供基本的功能，无论浏览器的选择如何。动画是一个很好的例子，但我也担心更动态的位，比如使用 AJAX 自动更新等。有没有关于如何实现这一点的好的资源，或者你对最好的方法有什么建议能达到这样的可降解性吗？

谢谢

PS：完全不相关，但Firefox似乎认为“可降解性”不是一个词，而是“生物降解性”（带有“生物”前缀）是。奇怪的...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-21T07:10:16.473

如果您考虑 css 的“级联顺序”，您是否可以不只是在所有先前 css 定义的最后添加 css 样式以取消您当前对工具提示效果具有的任何 css 效果？

仅当激活 Javascript 并检测到 JQuery 时才会声明该 css 规则。

这样，您可以确定您的[css 工具提示效果](http://psacake.com/web/jl.asp)与您的 JQuery 效果不冲突。

就像是：

```
a.info:hover span{ display:none} 
```

使用“js_enabled”类使这个css规则有条件。

您也可以通过[动态添加 css 规则](http://forum.mootools.net/viewtopic.php?id=6635)来做到这一点：

```
function createCSSRule(rule,attributes)
{
    //Create the CSS rule
    var newRule = "\n"+rule+"{\n";
    for (var attribute in attributes)
    {
        newRule += "\t" + attribute + ": " + attributes[attribute] + ";\n";
    }
    newRule += "}\n";

    //Inject it in the style element or create a new one if it doesn't exist
    styleTag = $E('style[type="text/css"]') || new Element("style").setProperty('type','text/css').injectInside(document.head);
    if(window.ie)
    {
        styleTag.styleSheet.cssText += newRule;
    }
    else
    {
        styleTag.appendText(newRule);
    }
} 
```

* * *

[分离 CSS 和 Javascrip](http://www.onlinetools.org/articles/unobtrusivejavascript/cssjsseparation.html)最简单的解决方案是**删除你的 css 类**

```
function jscss(a,o,c1,c2)
{
  switch (a){
    case 'swap':
      o.className=!jscss('check',o,c1)?o.className.replace(c2,c1): <-
      o.className.replace(c1,c2);
    break;
    case 'add':
      if(!jscss('check',o,c1)){o.className+=o.className?' '+c1:c1;}
    break;
    case 'remove':
      var rep=o.className.match(' '+c1)?' '+c1:c1;
      o.className=o.className.replace(rep,'');
    break;
    case 'check':
      return new RegExp('\\b'+c1+'\\b').test(o.className)
    break;
  }
} 
```

此示例函数采用四个参数：

`a`
定义您希望函数执行的操作。
`o`
有问题的对象。
`c1`
第一类
`c2`
的名称 第二类的名称

可能的行动是：

`swap`
用对象 o 中的类 c2 替换类 c1。
`add`
将类 c1 添加到对象 o。
`remove`
从对象 o 中删除类 c1。
`check`
测试类 c1 是否已应用于对象 o 并返回 true 或 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-21T11:59:26.703

如果某些事情可以完全在 CSS 中完成，我会说保持这种方式。如果浏览器中缺少 javascript 是一个问题，那么大多数时候我会显示整个页面不受影响。

比如说我将在单击复选框时使用 jQuery 来切换元素。在页面加载时，我查看复选框并相应地更新元素。如果未启用 javascript，该元素仍会出现，并且该站点仍将可用。只是没有那么好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-21T12:45:46.953

伙计，你有一个基于浏览器的游戏，对吧？禁用 JS 的用户不到 1%！那 1% 是世界末日的数字，因为我敢打赌，你拥有的比这还少；）

无论如何，如果您真的对此感到担忧，请在没有任何 JavaScript 的情况下创建该站点。并使其功能 100%。在您的网站完全没有任何 JS 风格的情况下运行后，只需开始使用 jQuery（或任何其他库；jQuery 是最好的 :P）进行改进。但要小心：不要更改任何 HTML。它比看起来容易;）

是的，如果你有在没有 JS 的情况下工作的东西（比如那些工具提示），请保留它！

# iphone - 是否可以配置 UITableView 以允许多选？

> ID：308081
> 
> 赞同：41
> 
> 时间：2008-11-21T06:57:57.650
> 
> 标签：iphone, cocoa-touch, uitableview, multiple-select

对于 iPhone，是否可以配置 UITableView 使其允许多选？

我已经尝试`-setSelected:animated:`为每个 UITableViewCell 覆盖，但是试图捏造所需的行为是很棘手的，因为很难将真正的取消选择与 UITableView 认为我因选择另一个单元格而取消选择的取消选择区分开来！

希望有人能帮忙！

谢谢，

缺口。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-01T23:12:44.627

如果您正在为 iOS5.0+ 开发应用程序，以下属性应该可以正常工作

```
self.tableView.allowsMultipleSelection = YES; 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2008-11-21T16:39:12.410

最好的方法是对每个选定的行进行复选标记。

您可以通过将所选 UITableViewCell 实例上的 accessoryType 设置为 UITableViewCelAccessoryCheckmark 来做到这一点。

要取消选择该行，请将其设置回 UITableViewCellAccessoryNone。

要枚举选择了哪些单元格/行（例如，单击按钮时），只需遍历表格的单元格以查找 UITableViewCellAccessoryCheckmark。或者，在“did select”委托方法中的表视图委托中管理一些 NSSet 等。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2009-03-23T20:58:07.213

使用以下代码设置单元配件类型：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    UITableViewCell *thisCell = [tableView cellForRowAtIndexPath:indexPath];

    if (thisCell.accessoryType == UITableViewCellAccessoryNone) {
        thisCell.accessoryType = UITableViewCellAccessoryCheckmark;

    }else{
        thisCell.accessoryType = UITableViewCellAccessoryNone;

    }
}

- (UITableViewCellAccessoryType)tableView:(UITableView *)tableView accessoryTypeForRowWithIndexPath:(NSIndexPath *)indexPath {

//add your own code to set the cell accesory type.
return UITableViewCellAccessoryNone;
} 
```

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2009-03-24T05:04:51.193

Jeff Lamarche 在此处提供了有关如何执行此操作的教程：

[http://iphonedevelopment.blogspot.com/2008/10/table-view-multi-row-edit-mode.html](http://iphonedevelopment.blogspot.com/2008/10/table-view-multi-row-edit-mode.html)

我还没有尝试过代码，但它一直在我脑海中浮现，我知道我需要它的那一天会到来。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2011-12-04T05:15:02.020

我从 iOS5向后移植`allowsMultipleSelectionDuringEditing`到旧版 iOS。`allowsMultipleSelection`你可以在[https://github.com/ud7/UDTableView-allowsMultipleSelection分叉它](https://github.com/ud7/UDTableView-allowsMultipleSelection)

它是替代品，您唯一需要做的就是将 UITableView 更改为 UDTableView（在代码或界面构建器中）

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-11-21T12:01:30.723

从HIG：

> 当用户选择列表项时，表格视图会提供反馈。具体来说，当可以选择一个项目时，包含该项目的行会在用户选择它时短暂突出显示，以表明已收到选择。然后，立即采取行动：要么显示一个新视图，要么该行显示一个复选标记以指示该项目已被选中。该行永远不会保持突出显示，因为表视图不会显示持久的选定状态。

您需要滚动自己的多选样式，或者使用邮件之类的东西，或者使用单元格上的复选标记附件。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-12-11T20:31:22.503

多选的家伙，你只需要

```
self.tableView.allowsMultipleSelection = YES; 
```

在 viewDidLoad 和

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *tableViewCell = [tableView cellForRowAtIndexPath:indexPath];
    tableViewCell.accessoryView.hidden = NO; 
    // if you don't use custom image tableViewCell.accessoryType = UITableViewCellAccessoryCheckmark;
}

- (void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *tableViewCell = [tableView cellForRowAtIndexPath:indexPath];
    tableViewCell.accessoryView.hidden = YES;
    // if you don't use custom image tableViewCell.accessoryType = UITableViewCellAccessoryNone;
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-01-16T10:08:57.597

我正在寻找同样的问题，Bhavin Chitroda 的答案为我解决了这个问题，但添加了一些内容以保持滚动时的复选标记。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

        UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
        if ( [array indexOfObject:indexPath] == NSNotFound ) {
            [array addObject:indexPath];
            cell.accessoryType = UITableViewCellAccessoryCheckmark;
        } else {
            [array removeObject:indexPath];
            cell.accessoryType = UITableViewCellAccessoryNone;
        }

} 
```

补充：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath
{
// Your code here
.
.
.
    if ( [array indexOfObject:indexPath] == NSNotFound ) {
        cell.accessoryType = UITableViewCellAccessoryNone;
    } else {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }

    return cell;

} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-11-21T11:46:22.797

如果您尝试执行 Mail 的多选（例如删除邮件）之类的操作，那么您可能必须自己管理所有选择。多行选择不是 iPhone 的标准功能。Mail 通过使用复选标记来指示已选择哪些行来解决此问题。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-02-29T19:01:26.893

[根据HIG](https://developer.apple.com/library/ios/DOCUMENTATION/UserExperience/Conceptual/MobileHIG/MobileHIG.pdf)第 121 页，实际上不鼓励将蓝色突出显示的行作为是否选择行的指示符。复选标记可以解决问题。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    int selectedRow = indexPath.row;
    cout << "selected Row: " << selectedRow << endl;
    UITableViewCell *indexPathForCell = [tableView cellForRowAtIndexPath:indexPath];
    if (indexPathForCell.accessoryType == UITableViewCellAccessoryNone) {
        indexPathForCell.accessoryType = UITableViewCellAccessoryCheckmark;
    } else {
        indexPathForCell.accessoryType = UITableViewCellAccessoryNone;
    }

} 
```

然后添加您的排列或您希望如何存储选择的数据。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2010-08-06T21:30:58.540

**注意：这在 iOS 4+ 中不起作用。这是一个私有的、未记录的常量。不要使用它。**

如果您不打算将应用提交到 App Store，您可以通过在 UITableViewController 委托中实现以下方法来调用多行编辑模式：

```
- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath {
    return 3; // Undocumented constant
}
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-11-12T10:52:13.320

使用 iOS4.3 - 6.0 测试

```
-(void)searchDisplayControllerDidBeginSearch:(UISearchDisplayController *)controller {

    if ([controller.searchResultsTableView respondsToSelector:@selector(allowsMultipleSelectionDuringEditing)]) {
        controller.searchResultsTableView.allowsMultipleSelectionDuringEditing = YES;
    }
    else {
        controller.searchResultsTableView.allowsSelectionDuringEditing = YES;
    }
}

- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return UITableViewCellAccessoryCheckmark;
} 
```

# sql - 如何使用 Linq 查询 DataGridView

> ID：308085
> 
> 赞同：1
> 
> 时间：2008-11-21T06:59:25.120
> 
> 标签：sql, sql-server, linq, datagridview

我有一个要使用 Linq (C# WinForm) 查询的 DataGridView。我想“计算”满足特定条件的行。例如，

```
variable1 = "count rows where ColumnBoxAge > 3 || < 5"

label1.Text = variable1 
```

如何使用 Linq 在 C# WinForm 中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-21T07:49:28.220

我不知道它是否可行，但你可以试试这个；

```
dataSet.Tables[0].AsEnumerable().Where(c => c.Field<int>("ageColumn") > 3 ||
     c.Field<int>("ageColumn") < 5).Count(); 
```

编辑：在哪里而不是选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-21T08:13:11.790

所以你的查询是错误的！尝试使用 '&&' 而不是 '||';

```
dataSet.Tables[0].AsEnumerable().Where(c => c.Field<int>("ageColumn") > 3 &&
     c.Field<int>("ageColumn") < 5).Count(); 
```

编辑：在哪里而不是选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-21T08:21:57.293

@yapiskan

```
dataSet.Tables[0].AsEnumerable().Where(c => c.Field<int>("ageColumn") > 3 &&
     c.Field<int>("ageColumn") < 5).Count(); 
```

.Where 而不是 .Select

非常感谢你！我感谢您的帮助。

# .net - 哪些是您观看的内容最丰富的 .net 截屏视频？

> ID：308086
> 
> 赞同：2
> 
> 时间：2008-11-21T07:00:48.503
> 
> 标签：.net

我从[http://www.summerofnhibernate.com/](http://www.summerofnhibernate.com/) nhibernate 屏幕投射中学到了很多东西，我想知道为什么它们是免费的！您知道其他此类 .net 屏幕投射吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-21T07:05:37.620

Rob Conery 的[MVC Storefront](http://blog.wekeroad.com/mvc-storefront/)系列非常出色。它涵盖了很多领域，不仅限于 ASP.NET MVC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-21T07:03:03.227

[我从ASP .NET 视频](http://www.asp.net/LEARN/)中学到了很多东西

[这里](http://www.learnvisualstudio.net/Browse.aspx)还有其他一些不错的视频。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-21T07:03:41.493

[DNR电视](http://www.dnrtv.com/)怎么样

# c# - 将数据传递给 .NET C# WPF 应用程序/DLL

> ID：308100
> 
> 赞同：1
> 
> 时间：2008-11-21T07:08:16.570
> 
> 标签：c#, wpf, singleton, ipc, single-instance

我有一个 .NET C# WPF 应用程序，我正在尝试使用 Mutex 将其制成单实例应用程序。

此 .NET 应用程序由基于 C++ 的 DLL 使用 CreateProcessAsUser() 调用，并通过环境变量获得参数。

后续实例也将由 C++ DLL 以相同方式创建。

随后的实例需要在退出之前将它们的参数传递给应用程序的第一个实例。

问题是在 .NET 应用程序中可以使用哪些方法，以便后续实例能够将它们的数据传递给 .NET 应用程序的第一个实例？越简单越好。

我研究了一些，但我希望有更简单的方法。

我研究过的东西：

*   命名管道
*   .NET 远程处理
*   Windows 消息（将 WM_COPYDATA 发送到第一个实例窗口）

由于我只是想将 4 个字符串传递给第一个实例，因此我试图避免使用上述方法，因为它们对我的问题来说有点矫枉过正。

我能想到的最简单的方法是从 .NET 应用程序中导出一个函数，这样 .NET 应用程序的后续实例就可以在 .NET 应用程序的第一个实例上调用此函数并将数据作为函数的参数传递. 但是，这在 .NET 中可行吗？我读过 .NET EXE 或 DLL 无法导出函数。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-21T07:19:46.047

*我能想到的最简单的方法是从 .NET 应用程序中导出一个函数，然后后续实例可以调用该函数并将参数传递给它。*

这不是它的工作原理。您将在调用进程中加载​​ .NET 程序集，而不是神奇地越过进程边界并与子进程对话。

只需让父母使用 Process 类打开带有重定向管道的孩子，并让孩子使用 Console.Read* 从标准输入读取

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-21T08:12:50.653

谢谢你的回复，保罗！

不过，我在上面的问题中添加了更多细节，因为我不确定我的场景是否被正确理解。

但是关于您的回答，.NET 应用程序的父级将是一个基于 C++ 的 DLL，它所要做的就是调用 .NET 应用程序并为其提供参数。基于 C++ 的 DLL 也将在此之后退出，所以我不想再向它添加任何行为。

因此，数据的传递将仅在 .NET 应用程序的实例之间完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-22T04:20:16.193

由于您要从 .NET 转到 .NET，我建议您只进行 WCF 调用。您可以在两个 .NET 实例之间使用命名管道传输来公开“服务”（这是您的第一个实例将公开的内容）。

后续实例将执行单实例检查，如果它们检测到已经运行的实例，它们可以对第一个实例中运行的服务进行 WCF 调用并以这种方式传递数据。

# asp.net - ASP.NET Web 服务（复数）或具有多个类的 Web 服务

> ID：308103
> 
> 赞同：2
> 
> 时间：2008-11-21T07:10:00.000
> 
> 标签：asp.net, web-services, asmx

我正在努力就 Web 服务的正确组织做出决定。我应该有多个 ASMX 代表 Web 服务中的不同功能，还是应该有一个 ASMX？

如果我有多个 ASMX，这不构成多个 Web 服务吗？

如果我有一个 ASMX，我如何组织我的代码（目前我的 ASMX 代表一个类）？

感谢您的任何建议！本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-21T07:24:51.607

我建议将多个 .asmx 映射到您的应用程序的不同功能方面，否则您最终会得到一个巨大的端点。我经常看到一个带有大约 50 个 Web 服务方法的端点，最终用户的开发人员不得不使用它是很讨厌的。

凯夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-02T10:09:31.027

一种解决原始问题中描述的多个asmx问题的方法。

阅读此[http://www.freddes.se/2009/02/16/multiple-web-service-references-sharing-types/](http://www.freddes.se/2009/02/16/multiple-web-service-references-sharing-types/)

并了解 wsdl.exe，它是您使用 .net2 Web 服务时的朋友。

# asp.net - 运行 ASP.NET 应用程序的路径

> ID：308107
> 
> 赞同：1
> 
> 时间：2008-11-21T07:15:26.213
> 
> 标签：asp.net, path

ASP.NET 应用程序以 HTML 格式发送带有外部图像链接的信件。这些图像放置在部署应用程序的同一文件夹中。因此，在发送之前，它会以链接正确的方式修改信函模板。

现在我用

```
new UriBuilder(Request.Url.Scheme, Request.Url.Host, 
    Request.Url.Port, ResolveUrl("~")).ToString() 
```

从运行应用程序的位置获取路径，但我想要更简单的东西。

[这个相关问题](https://stackoverflow.com/questions/286791/dns-of-the-server-where-aspnet-application-is-run)的一些答案很有用，但我仍然希望有更好的解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-21T08:14:19.463

请求.应用程序路径？

# ruby-on-rails - 你什么时候使用 <% -%> 而不是 <% %>

> ID：308109
> 
> 赞同：4
> 
> 时间：2008-11-21T07:17:49.203
> 
> 标签：ruby-on-rails, view-templates

我注意到在某些轨道视图行中，使用了：

```
<% # Code... -%> 
```

代替：

```
<% # Code... %> 
```

有什么区别？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-11-21T07:23:17.693

```
 <ul>
    <% @posts.each do |post| -%> 
      <li><%=post.title%></li>
    <% end -%>
    </ul> 
```

`<ul>`在第一个`<li>`和最后一个结束`</li>`和之间不会有新行`</ul>`。如果 - 被省略，会有。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-11-22T11:15:02.050

在 ERB 中评估代码的不同选项如下（可以在 Textmate 中使用 Ctrl-Shift-. 访问它们）：

*   `<% %>` 只评价内容。
*   `<%= %>` 评估内容并放置结果。
*   `<%= -%>`评估内容并打印结果。
*   `<%# %>` 内容被视为注释，不输出。

`puts`注意和之间的区别`print`。Puts 总是在字符串的末尾添加一个新行，而 print 不会。

基本上，`-%>`说最后不会输出新行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-22T10:41:48.760

考虑这个

```
<div>
    <% if @some_var == some_value %>
    <p>Some message</p>
    <% end %>
</div> 
```

如果 @some_var 是 some_value，上面的代码将生成下面的 HTML

```
<div>

    <p>Some message</p>

</div> 
```

如果您已将 - 放入结束标记，则 ERB 解释器将删除带有代码标记的新行，包括 - 并导致以下结果

```
<div>       
    <p>Some message</p>        
</div> 
```

如果您需要一个好看的 HTML 代码，这很有用。有时你会发现它在与设计师并肩工作时很有用

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-26T16:18:17.520

有点晚了，但我认为值得指出的是，您也可以这样做：

```
<%- @posts.each do |post| -%>
  <li><%= post.title %></li>
<%- end %> 
```

这会去除前面的任何空白。

# .net - .NET 将第三方库复制到 Bin\Release

> ID：308112
> 
> 赞同：0
> 
> 时间：2008-11-21T07:21:44.140
> 
> 标签：.net, visual-studio, deployment

我们使用 Microsoft Smart 客户端、Enterprise Library、Composite Application Block 和 Infragistics 以及更多第三方库。

在项目中，我们在 Visual Studio 的“添加引用”中添加了对库的引用，并从 .NET 组件列表中进行选择。

当我们需要将这些文件提供给没有安装上述所有库的客户时，如何确保将所有 DLL 复制到部署目录？

问候，

克里什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-21T08:24:21.080

我假设您已在对 True 的引用上设置了“复制本地”属性。

要在构建后自动复制文件，请修改项目属性中的“构建后事件命令行”。插入适当的命令来复制您的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-21T08:25:44.120

如果它们都是引用，只需选择它们并在 PropertyGrid 中将“复制本地”设置为 true。

也检查[这个](https://stackoverflow.com/questions/304909/best-practices-for-referencing-3rd-party-assemblies)问题。

# nhibernate - NHibernate - 在相关表中创建记录

> ID：308117
> 
> 赞同：2
> 
> 时间：2008-11-21T07:26:52.943
> 
> 标签：nhibernate

休眠版本：2.0.1GA

我正在尝试在两个表中添加一条记录。这些表是相关的。我对NHiberate有初学者的了解，所以我希望有更好的方法来做到这一点。

目前，我认为获得新添加记录ID的唯一方法是执行SaveOrUpdate；然后设置对象的 ID 字段（因为我在 SQL Server 2005 Express 中使用自动增量）。

为了在相关表中添加记录，我必须设置其父项的 ID 字段。这就是我现在正在做的事情：

```
transaction = session.BeginTransaction(); 

Contact myContact = new Contact(); 

myContact.Company = "ABC Company"; 
myContact.Notes = "test"; 

session.SaveOrUpdate(myContact); 

Address myAddress = new Address(); 
myAddress.IdContact = myContact.Id; 
myAddress.City = "Any City"; 
myAddress.State = "XX"; 
myAddress.Zip = "12345"; 

session.SaveOrUpdate(myContact); 

// Commit transaction 
transaction.Commit(); 
```

请注意，ADDRESS 与 CONTACT 相关。每个地址有 1 个联系人。

为了添加 ADDRESS 记录，我必须有相应的 CONTACT ID，我相信我只能在创建 CONTACT 记录之后才能得到它，因此我使用了两次“SaveOrUpdate”。

更好的出路？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-21T12:33:44.153

有一个更简单的方法。

首先，将 Address 对象添加到您的 Contact 对象中

```
public class Contact
{
   public Contact(){}
   private IList<Address> _addresses;
   public IList<Address> Addresses
   {
          get
          {
                 if(_addresses == null) _addresses = new List<Address>(); 
                 return _addresses 
          }
          set
          {
                 _addresses = value;
          }
   } 
```

然后在映射文件中将属性地址映射到数据库中的地址表。

在您的联系人映射文件中是这样的：

```
<bag name="Addresses" cascade="all-delete-orphan" lazy="false">
  <key column="Address_FK" />
  <one-to-many class="DomainModel.Address, DomainModel" />
</bag> 
```

然后将 Contact 类的级联属性设置为：

```
 default-cascade="save-update" 
```

现在，当您在 Contact 中填充 Address 对象并保存 Contact 对象时，Address 对象集合将自动保留。

如果需要，我可以做更完整的例子。

# regex - 精度为 2 的小数的简单正则表达式

> ID：308122
> 
> 赞同：295
> 
> 时间：2008-11-21T07:29:43.173
> 
> 标签：regex

精度为 2 的小数的正则表达式是什么？

*有效示例*：

```
123.12
2
56754
92929292929292.12
0.21
3.1 
```

*无效示例：*

```
12.1232
2.23332
e666.76 
```

小数点可以是可选的，也可以包括整数。

* * *

## 回答 #1

> 赞同：437
> 
> 时间：2008-11-21T07:32:51.653

有效的正则表达式令牌因实现而异。一个通用的形式是：

```
[0-9]+(\.[0-9][0-9]?)? 
```

更紧凑：

```
\d+(\.\d{1,2})? 
```

两者都假设在小数点前至少有一位数和小数点后一位数。

要要求整个字符串是这种形式的数字，请将表达式包装在开始和结束标记中，例如（在 Perl 的形式中）：

```
^\d+(\.\d{1,2})?$ 
```

要匹配小数点前没有前导数字 ( `.12`) 的数字和具有尾随句点 ( `12.`) 的整数，同时排除单个句点 ( `.`) 的输入，请尝试以下操作：

```
^(\d+(\.\d{0,2})?|\.?\d{1,2})$ 
```

* * *

## 添加

包裹小数部分`()?`以使其可选。请注意，这不包括诸如 Include 之类的形式，`12.` 它更像`^\d+\\.?\d{0,2}$`.

## 添加

用于`^\d{1,6}(\.\d{1,2})?$`停止重复并对十进制值的整个部分进行限制。

* * *

## 回答 #2

> 赞同：299
> 
> 时间：2008-11-21T08:49:17.613

```
^[0-9]+(\.[0-9]{1,2})?$ 
```

而且由于正则表达式很难阅读，更难理解，这里是冗长的等价物：

```
^                         # Start of string
 [0-9]+                   # Require one or more numbers
       (                  # Begin optional group
        \.                # Point must be escaped or it is treated as "any character"
          [0-9]{1,2}      # One or two numbers
                    )?    # End group--signify that it's optional with "?"
                      $   # End of string 
```

您可以在大多数正则表达式实现中替换为（包括`[0-9]`最常见的[PCRE](http://en.wikipedia.org/wiki/Perl_Compatible_Regular_Expressions)）。我留下了它，因为我认为它更容易阅读。`\d``[0-9]`

此外，这是我用来检查它的简单 Python 脚本：

```
import re
deci_num_checker = re.compile(r"""^[0-9]+(\.[0-9]{1,2})?$""")

valid = ["123.12", "2", "56754", "92929292929292.12", "0.21", "3.1"]
invalid = ["12.1232", "2.23332", "e666.76"]

assert len([deci_num_checker.match(x) != None for x in valid]) == len(valid)
assert [deci_num_checker.match(x) == None for x in invalid].count(False) == 0 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2010-06-18T09:32:22.750

要包括一个可选的减号并禁止像`015`（可能被误认为是八进制数）这样的数字，请写：

```
-?(0|([1-9]\d*))(\.\d+)? 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-01-19T02:55:05.573

对于没有千位分隔符的数字，我喜欢这个简单、紧凑的正则表达式：

```
\d+(\.\d{2})?|\.\d{2} 
```

或者，不限于精度 2：

```
\d+(\.\d*)?|\.\d+ 
```

后者匹配
1
100
100\.
100.74
100.7
0.7
.7
.72

而且它不匹配空字符串（如 \d*.?\d* 会）

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2011-08-26T15:55:24.343

我使用这个最多两位小数：
`(^(\+|\-)(0|([1-9][0-9]*))(\.[0-9]{1,2})?$)|(^(0{0,1}|([1-9][0-9]*))(\.[0-9]{1,2})?$)` 通过：
0.25
0.25
10.25
+0.25

不通过： -.
25
01.25
1\.
1.256

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2012-09-08T00:56:57.467

```
^[0-9]+(\.([0-9]{1,2})?)?$ 
```

会让喜欢的事情`12.`被接受。这不是普遍接受的，但如果你需要“灵活”，这是一种方法。当然`[0-9]`可以替换为`\d`，但我想这种方式更具可读性。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2011-06-14T05:04:12.617

试试这个

```
 (\\+|-)?([0-9]+(\\.[0-9]+)) 
```

它也将允许积极和消极的迹象。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2011-07-13T10:51:32.173

```
preg_match("/^-?\d+[\.]?\d\d$/", $sum) 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-06-08T03:14:10.800

一般来说，即无限小数位：

`^-?(([1-9]\d*)|0)(.0*[1-9](0*[1-9])*)?$`.

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-04-05T08:50:29.790

主要答案是错误的，因为它有效`5.`或`5,`输入

这段代码处理它（但在我的例子中，负数是禁止的）：

```
/^[0-9]+([.,][0-9]{1,2})?$/; 
```

结果如下：

> true => "0" / true => "0.00" / true => "0.0" / true => "0,00" / true => "0,0" / true => "1,2" true => “1.1”/真=>“1”/真=>“100”真=>“100.00”/真=>“100.0”/真=>“1.11”/真=>“1,11”/假=> “-5”/假=>“-0.00”/真=>“101”/假=>“0.00.0”/真=>“0.000”/真=>“000.25”/假=>“.25” /真=>“100.01”/真=>“100.2”/真=>“00”/假=>“5”。/ false => "6," / true => "82" / true => "81,3" / true => "

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-11-21T07:36:23.347

不需要考虑`e`进去`e666.76`吗？

和

```
(e|0-9)\d*\d.\d{1,2) 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2011-11-03T05:38:09.130

我在我的项目中尝试了一个。这也允许带`+ | -`符号的数字。

```
/^(\+|-)?[0-9]{0,}((\.){1}[0-9]{1,}){0,1}$/ 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-05-23T09:13:02.783

也添加我的答案，有人可能会觉得它很有用，或者也可能是我的正确答案。

```
function getInteger(int){
  var regx = /^[-+]?[\d.]+$/g;
  return regx.test(int);
}

alert(getInteger('-11.11')); 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-03-23T15:08:10.997

这对我有用：

```
(-?[0-9]+(\.[0-9]+)?) 
```

**第 1 组**是您的浮点数，**第 2 组**只是小数。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-02-08T12:01:14.043

Chrome 56 不接受这种带有类型编号的模式（Chrome 56 正在接受 11.11。一个附加的。），使用类型作为文本作为进度。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-09-04T10:03:44.493

这将允许带幂和最多 2 位的十进制，

```
^[+-]?\d+(\.\d{2}([eE](-[1-9]([0-9]*)?|[+]?\d+))?)?$ 
```

[演示](https://regex101.com/r/qxYe9N/10)

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2016-09-06T18:46:14.030

```
 function DecimalNumberValidation() {
        var amounttext = ;
            if (!(/^[-+]?\d*\.?\d*$/.test(document.getElementById('txtRemittanceNumber').value))){
            alert('Please enter only numbers into amount textbox.')
            }
            else
            {
            alert('Right Number');
            }
    } 
```

函数将验证任何十进制数字天气数字是否有小数位，它会说“正确的数字”，否则“请仅在金额文本框中输入数字”。将出现警报消息。

谢谢... ：）

# html - 用于 Google Chrome 的类似 Firebug 的调试器

> ID：308125
> 
> 赞同：280
> 
> 时间：2008-11-21T07:33:23.697
> 
> 标签：html, css, google-chrome, debugging, firebug

您可以在 Google Chrome 中使用类似 Firebug 的东西吗？

我想要的基本功能：

*   检查 HTML 源代码（选择元素、删除它们等）
*   检查 CSS 值（内置的解决方案很奇怪，不知何故）

* * *

## 回答 #1

> 赞同：244
> 
> 时间：2008-12-05T22:19:09.160

Chrome 中已经内置了一个类似 Firebug 的工具。只需右键单击页面上的任意位置，然后从菜单中选择“检查元素”。Chrome 有一个用于调试的图形工具（如在 Firebug 中），因此您可以调试 JavaScript。它还可以很好地进行 CSS 检查，甚至可以动态更改 CSS 渲染。

有关详细信息，请参阅[https://developers.google.com/chrome-developer-tools/](https://developers.google.com/chrome-developer-tools/)

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2008-12-09T16:35:07.200

Firebug Lite 支持检查 HTML 元素、计算的 CSS 样式等等。由于它是纯 JavaScript，因此可以在许多不同的浏览器中使用。只需将脚本包含在您的源代码中，或将小书签添加到您的书签栏，只需单击一下即可将其包含在任何页面上。

[http://getfirebug.com/lite.html](http://getfirebug.com/lite.html)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2011-03-02T15:26:02.950

作为每天使用 Firebug / [Chrome Inspector](http://en.wikipedia.org/wiki/Google_chrome#User_interface)的人添加一些谈话要点：

1.  在撰写本文时，只有 Google DOM 检查器，不具备 Firebug 的所有功能

2.  Inspector 是 Firebug 的“精简版”：界面不如 IMO，最近两个版本的元素检查现在都很笨拙，但 Firebug 仍然更好；我发现自己正在努力寻找对 Chrome 的喜爱（因为它是一种更好、更快的浏览器体验），但对于开发工作，它对我来说仍然很糟糕。

3.  在 Firebug 中实时预览/修改 DOM/CSS 仍然更好；Firebug 中计算的 CSS 和盒模型视图更好；

4.  不知何故，它更容易阅读/使用 Firebug，可能是因为在几个关键领域易于导航、操作/修改文档？谁知道。我已经习惯了这个界面，我认为 Chrome Inspector 并没有那么好，尽管我承认这是一个主观的事情。

5.  在 Firebug 中，Cookies/Net 选项卡对我非常有用。也许 Chrome Inspector 现在有这个？上次我检查它没有，因为 Chrome 在后台自行更新而无需您的干预（默认情况下会像所有优秀的霸主一样获得您的同意）。

6.  最后一点：Google Chrome 获得功能齐全的 Firebug 的那一天就是 Firefox 基本上为开发人员而死的那一天，因为 Firefox 有 3 年的时间让 Firefox 的布局引擎[Gecko与](http://en.wikipedia.org/wiki/Gecko_%28layout_engine%29)[WebKit](http://en.wikipedia.org/wiki/WebKit)一样快，而他们没有。抱歉说得这么直白，但这是事实。

你看，现在每个人都想离开 Flash 来代替 jQuery，这是出于移动可访问性和交互性（iPhone、iPad、Android）的动机，而 JavaScript “突然”成为一件大事（这是讽刺），所以这艘船已经航行了，Firefox。作为 Mozilla 的粉丝，这让我很伤心。在 Firefox 升级其 JavaScript 引擎之前，Chrome 只是一个更好的浏览器。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2011-12-15T11:08:35.767

`F12`

我爱快捷键

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2009-12-17T20:22:34.857

试试这个，它被称为[Firebug Lite](http://getfirebug.com/releases/lite/chrome/)，显然适用于 Chrome 的测试版。

您还可以在以下位置找到它： [https ://chrome.google.com/extensions/](https://chrome.google.com/extensions/)

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2009-11-10T12:56:23.103

您可以在“书签栏”中设置此书签，以便在 Chrome/Chromium 浏览器中始终使用 Firebug lite（将其作为 URL）：

```
javascript:var firebug=document.createElement('script');firebug.setAttribute('src','http://getfirebug.com/releases/lite/1.2/firebug-lite-compressed.js');document.body.appendChild(firebug);(function(){if(window.firebug.version){firebug.init();}else{setTimeout(arguments.callee);}})();void(firebug); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-01-14T16:44:58.403

或尝试用户脚本：[http ://dev.chromium.org/developers/design-documents/user-scripts](http://dev.chromium.org/developers/design-documents/user-scripts)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2010-01-29T21:42:33.127

官方 Firebug Chrome 扩展，或者您可以自己下载和打包扩展。

[https://getfirebug.com/releases/lite/chrome/](https://getfirebug.com/releases/lite/chrome/)

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2010-07-22T09:43:56.340

[jQuerify](https://chrome.google.com/extensions/detail/gbmifchmngifmadobkcpijhhldeeelkc)是将 jQuery 嵌入到 Chrome 控制台中的完美扩展，并且非常简单。此扩展还指示 jQuery 是否已经嵌入到页面中。

此扩展用于将 jQuery 嵌入到您想要的任何页面中。它允许在控制台 shell 中使用 jQuery（您可以通过 ++". 调用 Chrome`Ctrl`控制台`Shift`）`j`。

要将 jQuery 嵌入到选定的选项卡中，请单击扩展按钮。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2009-05-29T10:55:56.067

好吧，可以为 Google Chrome 启用[Greasemonkey](http://en.wikipedia.org/wiki/Greasemonkey)脚本，所以也许有一种方法可以使用这种方法安装 Firebug？[Firebug Lite](http://getfirebug.com/firebuglite)也可以，但它与使用全功能的感觉不同:(

willshouse.com/2009/05/29/install-greasemonkey-for-chrome-a-better-guide/

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2010-07-02T16:24:04.340

这不能回答您的问题，但如果您错过了，Chris Pederick 的[Web 开发人员](http://chrispederick.com/work/web-developer/)现在可用于 Chrome：[https](https://chrome.google.com/extensions/detail/bfbameneiokkgbdmiekhjnmfkcnldhhm) ://chrome.google.com/extensions/detail/bfbameneiokkgbdmiekhjnmfkcnldhhm 。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2011-12-15T11:16:53.253

`F12`（仅在 Linux 和 Windows 上）

**或者**

`Ctrl` `⇧</kbd> `I``

(`⌥</kbd> `⌘</kbd> `I` if you're on Mac)``

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2013-10-14T17:56:09.473

忘记你所有需要这个独立于浏览器的检查器，dom 更新器的一切

[https://goggles.webmaker.org/en-US](https://goggles.webmaker.org/en-US)

只需添加书签并转到任何网页并单击该书签..

这实际上是 Mozilla 项目 Goggles ，惊人的惊人的惊人......

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2011-01-21T06:54:52.537

请尝试[Google Chrome 的 Firebug Lite](http://getfirebug.com/releases/lite/chrome/)

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2010-10-13T10:41:06.747

如果您在 Ubuntu 上使用夜间 ppa 使用 Chromium，那么您应该拥有`chromium-browser-inspector`

# php - 如何在 PHP 中找到对象 ID？

> ID：308133
> 
> 赞同：52
> 
> 时间：2008-11-21T07:37:35.620
> 
> 标签：php, object

我正在使用 PHP 5.2。我想找到一种方法为每个对象输出一个唯一的 id，因此在查看日志以查看哪些对象相同时很容易。

在 Ruby 中，我只想说 object.object_id 来获取对象的 Ruby 内部标识符。在 PHP 中似乎没有明显的方法可以做到这一点。

有内置的方法吗？如果没有，您能提供其他建议吗？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2008-11-21T07:46:58.100

为此使用[`spl_object_hash()`](http://php.net/manual/en/function.spl-object-hash.php)。

它为每个对象实例返回一个唯一标识符，而不是类的名称，因此它似乎更适合您。

**编辑：**

对于 PHP < 5.2.x 的用户，请参阅[此答案](https://stackoverflow.com/a/19250740/179104)。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2011-06-13T12:50:12.030

从版本 5.3.6 开始，目前在 PHP 中没有办法做到这一点。

spl_object_hash() 不会做你想做的事 - 因为它会在对象被删除时回收标识符，这将导致（例如）对象关系映射器尝试跟踪会话中的对象时出错。

文档页面顶部的描述（“此函数返回对象的唯一标识符。此 id 可用作存储对象或识别对象的哈希键。”）是错误的 - 真相在该页面上的注释：“当一个对象被销毁时，它的哈希可能会被其他对象重用”，或者换句话说，该函数并不*总是*返回唯一标识符，并且*不能*总是用于存储或识别对象。

[此评论](http://us.php.net/manual/en/function.spl-object-hash.php#94060)中演示的技术在某些情况下可能有效，但它不可靠并且也不会始终如一地工作，因为尝试访问未定义的属性将调用 __get() 和 __set() 魔术方法，其结果是不可预测的。

总之，对您的问题的简短回答（不幸的是）是“否”——PHP 中没有这样的方法，也没有办法编写这样的方法来始终如一地适用于任何对象。

如果您希望将此功能添加到 PHP 中，请在此处投票和/或评论：

[http://bugs.php.net/bug.php?id=52657](http://bugs.php.net/bug.php?id=52657)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-05-10T04:44:01.033

# ⚠️ PHP 7.2.0 引入[spl_object_id()](https://php.net/manual/en/function.spl-object-id.php)！

```
$test = (object)[];
var_dump(spl_object_id($test)); # int(1) 
```

**警告购买者（？）**：

> 当一个对象被销毁时，它的 id 可能会被其他对象重用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-04T21:06:23.077

我知道这是个老话题，但我想我已经找到了解决方案。

诀窍在于使用分配的键将每个对象的引用存储在数组中。然后，您可以通过搜索该数组并返回找到的键来获取对象 ID。

```
<?php

class objectMarker
{
    private $storage;

    function add($object) {
        $this->storage[] = $object;
    }

    function getId($object) {
        foreach ($this->storage as $id => $item) {
            if ($item === $object) {
                return $id;
            }
        }

        return null;
    }
}

$marker = new objectMarker;

$t1 = new stdClass;
$t2 = new stdClass;

$marker->add($t1);
$marker->add($t2);

echo $marker->getId($t1) . "\n";
echo $marker->getId($t2) . "\n";

unset($t1);

$t1 = new stdClass;
$marker->add($t1);

echo $marker->getId($t1) . "\n";

$t2->x = 1;
echo $marker->getId($t2) . "\n";

/* output:
0
1
2
1
*/ 
```

# iphone - iPhone 同步/应用程序备份 - 应用程序可以在那个时候做些什么吗？

> ID：308134
> 
> 赞同：2
> 
> 时间：2008-11-21T07:39:15.773
> 
> 标签：iphone, objective-c

我想知道 iphone sdk 中是否有一个钩子，它允许应用程序知道它何时被同步/备份 - 以便它可以做一些事情，例如连接到一个网站来备份数据。

我假设不是......但我可能是错的。

谢谢，克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-21T12:03:48.690

克里斯，唉，你的假设是正确的。目前，不支持此功能，但您应该向 Apple 提交错误报告以请求它！

# windows - 如何枚举另一个用户会话的打开窗口（~EnumWindows）

> ID：308135
> 
> 赞同：9
> 
> 时间：2008-11-21T07:40:28.970
> 
> 标签：windows, winapi

我有一个可以列出当前会话打开的窗口的应用程序。它使用来自 user32.dll 的 EnumWindows 方法。

我想从 Windows 服务运行此代码，但由于该服务未附加到用户会话，它显然没有返回任何内容。

所以问题是，我如何枚举另一个用户会话的打开窗口（例如，使用特定的登录用户）？

与 EnumWindows 类似，我也想获取用户会话的前台窗口（就像 GetForegroundWindow 适用于当前用户）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-21T22:47:56.970

据我所知，您无法从另一个会话访问一个会话的窗口。还值得注意的是，实际上并没有“当前会话”之类的东西——可能有多个用户通过终端服务登录，或者 XP 的快速用户切换。

解决此问题的一种方法是向每个用户的配置文件中添加一个程序，而无需仅与您的服务通信的 UI。但是，您仍然必须处理可能存在多个活动会话的事实。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-24T11:16:21.547

根据[此文档](http://download.microsoft.com/download/9/c/5/9c5b2167-8017-4bae-9fde-d599bac8184a/Session0_Vista.docx)，您可以使用 CreateProcessAsUser 在其他用户的登录会话中创建一个进程，并且可以枚举那里的窗口。您仍然需要一些 IPC 机制来与服务通信。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-10-22T14:47:30.340

接受的答案不正确。

> 所以问题是，我如何枚举另一个用户会话的打开窗口？

如果您作为以本地系统帐户运行的服务运行，则可以枚举任何会话的打开窗口。

为此，首先使用[WTSEnumerateSessions](http://msdn.microsoft.com/en-us/library/aa383833%28VS.85%29.aspx)枚举会话。[然后使用EnumWindowStations](http://msdn.microsoft.com/en-us/library/ms682644%28VS.85%29.aspx)枚举每个会话内的窗口站。[然后使用EnumDesktops](http://msdn.microsoft.com/en-us/library/ms682614%28VS.85%29.aspx)枚举每个 Window Station 的桌面。最后，您使用[EnumWindows](http://msdn.microsoft.com/en-us/library/ms633497%28VS.85%29.aspx)枚举这些桌面中的 Windows 。

> （例如，使用特定的登录用户）

通过终端服务或快速用户切换可以有许多同时登录的用户。

> 与 EnumWindows 类似，我也想获取用户会话的前台窗口（就像 GetForegroundWindow 适用于当前用户）。

这可以通过在 Session、Window Station 和 Desktop 中使用找到的用户令牌启动应用程序来完成。从那里您可以调用任何 Win32 API，如 GetForegroundWindow 并将信息报告回您的父进程。

[您可以在此处了解有关会话、窗口站和桌面如何工作的更多信息](http://brianbondy.com/blog/id/100/understanding-windows-at-a-deeper-level-sessions-window-stations-and-desktops)。

# flash - 可以在没有 PHP 的情况下将图像导入 AS3 吗？

> ID：308149
> 
> 赞同：1
> 
> 时间：2008-11-21T07:50:33.037
> 
> 标签：flash, actionscript-3, actionscript

在 actionscript 3 中，是否可以允许用户在运行时将图像上传到 Flash 电影中，而无需 POST 到 PHP 脚本？我不想导出图像或将其保存在任何地方我只想能够在 Flash 电影中显示图像

*手指交叉*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-21T10:01:29.620

这个功能刚刚添加到 Flash Player 10 / Flash CS4 中，所以如果你可以使用它，你就可以做到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-21T19:21:51.380

是的，如果您的目标是 Flash Player 10，则可以。使用 FileReference.load() 方法。加载文件后，您可以使用 data 属性以 ByteArray 的形式访问原始数据。在 flex 中，您可以将其传递给 Image 组件。在普通的 Actionscript 中，您可以使用 Loader.loadBytes() 方法来显示加载的图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-21T07:56:53.337

工作中的闪存开发人员，似乎认为这是不可能的。也就是说，您不必使用 PHP，您可以使用任何允许上传的服务器端技术（ASP.NET、Python 等）

# c# - CF 2.0 列表上的 MethodAccessException 。种类

> ID：308154
> 
> 赞同：4
> 
> 时间：2008-11-21T07:58:48.777
> 
> 标签：c#, .net, compact-framework

我有一些可在一系列 .NET 运行时（常规、CF、Silverlight 等）上运行的[库代码- 但一小部分代码](http://code.google.com/p/protobuf-net/)**仅**在 CF 2.0 上中断，带有`MethodAccessException`. 我很确定这是一个运行时错误，但有人知道任何好的解决方法吗？它在 CF 3.5 中运行良好，但我也需要能够支持 CF 2.0。

具体来说，这与使用泛型的库程序集有关，调用者将其赋予非公共`T`。我没有对`T`（例如反射）做任何讨厌的事情，但无论如何它都会中断......

它所做的只是包装这些值并将它们添加到列表中，然后通过`Comparison<>`. 我也尝试过`Array.Sort`, `IComparer<Wrapper<T>>`,`IComparable<Wrapper<T>>`等 - 都以同样的方式失败：`MethodAccessException`- 使用 VS 提示：

> 如果类库中方法的访问级别已更改，请重新编译引用该库的所有程序集。

但是`T`公开，一切都很好......请注意，我们从未分类`T`- 我们只是与`Wrapper<T>`......

任何输入表示赞赏...

* * *

库组装：

```
public static class LibraryClass
{
    public static void Test<T>(T foo, T bar)
    {
        // vastly simplified... I am aware that it is already in order here ;-p
        var list = new List<Wrapper<T>>();
        list.Add(new Wrapper<T> { Tag = 1, Value = foo });
        list.Add(new Wrapper<T> { Tag = 2, Value = bar });

        list.Sort((x,y) => x.Tag.CompareTo(y.Tag)); // BOOM!!
    }
}

public class Wrapper<T> // public to prove this isn't a factor...
{
    public T Value { get; set; }
    public int Tag { get; set; }
} 
```

* * *

调用程序集：

```
public static class Program
{
    static void Main()
    {
        MyData foo = new MyData {Name = "foo"},
            bar = new MyData {Name = "bar"};

        LibraryClass.Test<MyData>(foo, bar);
    }
}

class MyData // but make MyData public and it works...
{
    public string Name { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-21T08:14:38.557

您是否尝试过编写自己的排序 - 也许内置的正在做一些反射恶作剧......不是为了长期使用您自己的 - 而是作为调试问题的一种手段。应该很快地在其他东西中编码，至少看看是什么。

我认为当它繁荣时你不会得到堆栈跟踪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-23T09:03:25.763

我记得（有时）在确保目标设备上存在正确的 dotNET 时遇到了麻烦。这是在 dotNET CF 1.0 天。这仍然是这里的问题吗？

# php - Apache 提供空白页

> ID：308156
> 
> 赞同：1
> 
> 时间：2008-11-21T08:04:08.830
> 
> 标签：php, apache

我创建了一个示例 PHP 脚本来上传更大尺寸的 excel 表格。此外，excel表中给出的每条记录的处理过程也有点复杂。为了允许更大的尺寸，我在 Apache 配置文件中添加了必要的 PHP ini 值来覆盖实际的 PHP ini 值。

问题是，一旦我上传了更大的文件，它需要更长的时间，比如 2 分钟左右，之后我看到的是空白页面而不是结果页面。当我跟踪 Apache 日志时，我没有看到与此问题相关的任何此类行。

只是想知道，当 Apache 可以提供空白页时，是否有任何情况/可能性？

但是当我跟踪我的应用程序级日志时，很明显脚本已经完美地完成了这项工作。我的怀疑，可能发生的事情是，一旦工作完成，当 Apache 即将返回结果页面时，会发生一些事情，但我不确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-21T08:15:51.550

我的猜测是这不是 Apache 的错，您的浏览器只是连接超时。您可以尝试其中一些[技术](http://fit.c2.com/wiki.cgi?PreventingBrowserTimeout)，看看是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-21T08:56:24.683

是否有可能比“其他”案例没有得到妥善处理？您可能会假设文件已成功上传，但这并不一定意味着确实如此。你是只增加了“upload_max_filesize”还是“post_max_size”（所有表单的总和：输入文本+文件）？

尝试在脚本顶部添加以下内容，以查看 PHP 可能显示的任何错误或警告。

```
error_reporting(E_ALL); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-21T12:42:48.753

听起来像是内存问题，尝试增加 memory_limit 或优化内存使用

内存分配/段错误导致空白页和无日志信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-21T11:21:10.693

如果处理请求/上传需要一些时间，您可能需要考虑创建一个队列，用户知道文件已成功上传，并且必须等待（也许可以检查页面上的状态）；并且您有一个 cronjob/后台进程来转换文件并更新它们。这样，它根本不会浪费用户的时间。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-11-21T10:05:33.497

你可以做两件事来避免这个问题

1.  如果可能，请用户在您的情况下将 excel 文件转换为 csv。因为 csv 比 excel 表轻得多。
2.  尝试在脚本中使用 header("newpage.php") 将用户重定向到新页面

# c# - 接口继承：你怎么看这个：

> ID：308158
> 
> 赞同：4
> 
> 时间：2008-11-21T08:09:36.727
> 
> 标签：c#, oop, inheritance, liskov-substitution-principle

在查看我们的代码库时，我发现了一个类似于以下模式的继承结构：

```
interface IBase
{
    void Method1();
    void Method2();
}

interface IInterface2 : IBase
{
    void Method3();
}

class Class1 : IInterface2
{
    ...
}

class Class2 : IInterface2
{
    ...
}

class Class3 : IInterface2
{ 
    ...
} 
```

中`Class2`，`Method1`投掷`NotImplementedException`。

问题：

*   您一般如何看待继承接口？
*   `IBase`之间的关系是否`Class2`违反了里氏替换原则？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-11-21T08:12:54.567

好吧，首先，我通常反对通过抛出 NotImplementedException 异常来实现接口。这基本上就像在说“嗯，这个类也可以用作计算器，错误，几乎”。

但在某些情况下，它确实是做某事“正确方式”的唯一方法，所以我不是 100% 反对它。

只是需要注意的事情。

接口就是契约，实现了接口就表示你遵守契约。如果您随后开始否定合同的某些部分，那么在我看来，合同或合同的实施是经过深思熟虑的。

* * *

**编辑**：在看到[Greg Beech](https://stackoverflow.com/users/13552/greg-beech)的回答之后：如果一个接口明确表示实现应该抛出这些异常，那么它是合同的一部分，那么我同意完全允许该类这样做。

* * *

至于替代原则，它[指出](http://en.wikipedia.org/wiki/Liskov_substitution_principle)：

> 令 q(x) 是关于 T 类型的对象 x 的可证明性质。那么 q(y) 对于 S 类型的对象 y 应该为真，其中 S 是 T 的子类型。

在这种情况下，如果您更改该方法在后代类型中的作用，它就与从基类覆盖方法一样违反原则。

该原理在维基百科页面上更详细，例如以下几点（括号和强调我的评论）：

*   不能在子类中加强先决条件。**（前提条件可能是“此时该类已准备好调用此方法”）**
*   后置条件不能在子类中被削弱。**（后置条件可能是调用方法后，类的状态为真）**

由于您没有显示接口的完整合同，只有编译器可以检查的声明部分，因此不可能知道该原则是否适用于您的实现。

例如，如果您的 Method2 附加了以下条件：

*   随时可以调用
*   修改对象的状态，为事件链中的下一个事件做好准备

然后抛出 NotImplementedException 违反了原则。

但是，如果合同还规定：

*   对于不支持事件链的类，此方法应抛出 NotImplementedException 或 NotSupportedException

那么它可能不会。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-21T08:28:28.297

所以，我假设你要问的问题是：

> 如果派生类型 `NotImplementedException`为基类型没有的方法抛出 a，这是否违反了 Liskov 替换原则。

我想说这取决于接口文档是否说一个方法可能会抛出这个异常来履行它的合同。如果是，则不违反原则，否则违反。

.NET 框架中 this 的经典示例是具有大量操作`Stream`（例如.`Read``Write``Seek``NotSupportedException`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-21T08:33:04.230

假设我明白你的意思，那么我认为答案是肯定的，继承接口很好，不，它不违反里氏替换原则。

考虑接口的方式是“表现得像一个”运算符。它描述了类承诺遵守的一组行为，由方法等表示。因此，从 IEatsMice 接口继承的 IBehavesLikeACat 接口没有问题：如果它的行为像猫，那么它显然会吃老鼠。所以一只猫会同时实现这两者，一只雪貂只有 IEatsMice。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-21T09:18:27.603

首先，接口中的继承是可以的，它的应用方式与类继承相同，是一个非常强大的工具。

接口描述行为，假设一个接口定义了一个类“可以做什么”，所以如果你实现一个接口，你就声明你可以做那个接口指定的事情。例如：

```
interface ISubmergible
{
  void Submerge();
} 
```

很明显，如果类实现了接口，那么它可以淹没。一些接口仍然暗示其他接口，例如，想象这个接口

```
interface IRunner
{
  void Run();
} 
```

这定义了一个接口，表明实现它的类可以运行......但是，在我们程序的上下文中，如果有东西可以运行，它显然可以行走，所以你要确保它是满足的：

```
interface IWalker
{
  void Walk();
}

interface IRunner : IWalker
{
  void Run();
} 
```

最后，关于整个 NotImplementedException 事情......我对一些建议感到惊讶。NotImplementedException**永远不**应该由类的接口方法引发。如果你实现了一个接口，你就明确地接受了接口建立的契约，如果你提出一个 NotImplementedException，你基本上是在说“好吧，我撒谎了，我告诉过你我支持这个接口，但我真的不支持”。

接口旨在避免担心类实现了什么，什么没有实现。如果你把它拿走，它们就没用了。更重要的是，**您的同事会期待这样的行为，即使您了解自己在做什么，团队的其他成员也不会**，甚至您，从现在起 6 个月后也不会理解其背后的逻辑。**所以 class2 违反了常识和接口目的。**Class2 没有实现 IBase，所以不要声称它实现了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-21T10:22:17.363

抛出 NotSupportedException 是可以的：这是在某些接口功能未按设计实现时抛出的异常。

NotImplementedException 不太清楚：这通常用于尚未实现但将会实现的代码。例如，Visual Studio 2008 生成的接口实现存根包含代码“throw new NotImplementedException()”。

有关此问题的讨论，请参见[Brad Abram 的博客](http://blogs.msdn.com/brada/archive/2004/07/29/201354.aspx)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-21T08:44:54.347

.Net 框架中的多个地方使用了接口中的继承。所以虽然不是那里的所有东西都是完美的，但我想这被认为是可以的。以 IEnumerable 接口为例。

至于抛出 NotImplementedExceptions，我想说这取决于您在代码中如何使用它们。例如，您可以使用多种方法定义接口，其中一些方法是可选的。在这种情况下，您应该检查该方法是否可用，并且仅在可用时才使用它。

# .net - 数据访问集成测试......你是怎么做的？

> ID：308159
> 
> 赞同：0
> 
> 时间：2008-11-21T08:10:58.627
> 
> 标签：.net, testing, tdd, continuous-integration, integration

```
public class RollBack : OnMethodBoundaryAspect // or another AOP for meth interception
{
    public override void OnEntry(MethodExecutionEventArgs eventArgs)
    {
        try
        {
            ServiceConfig cfg = new ServiceConfig();
            cfg.Transaction = TransactionOption.RequiresNew;
            cfg.TrackingAppName = "Application Unit Tests";
            cfg.TransactionDescription = "Application Unit Tests Transaction";
            cfg.TransactionTimeout = 0x2710;
            ServiceDomain.Enter(cfg);
        }
        catch (Exception exception)
        {
            Console.WriteLine("Could not enter into a new transaction:\n" + exception);
        }
    }

    public override void OnExit(MethodExecutionEventArgs eventArgs)
    {
        try
        {
            if (ContextUtil.IsInTransaction)
            {
                ContextUtil.SetAbort();
            }
            ServiceDomain.Leave();
        }
        catch (Exception exception)
        {
            Console.WriteLine("Could not leave an existing transaction:\n" + exception);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:55:03.933

I can see that you are tactically testing within a transaction to roll back after testing.

I personally start from scratch and create the tables for the test and remove them afterwards. Another common technique is to restore a database to a known state - although I would suggest that this indicates your tests are too wide if they rely on lots of state in the database.

I wrote about this for PHP but I work more often in .NET.

[http://www.stevefenton.co.uk/Content/Blog/Date/201110/Blog/Database-Integration-Testing-With-Enhance-PHP/](http://www.stevefenton.co.uk/Content/Blog/Date/201110/Blog/Database-Integration-Testing-With-Enhance-PHP/)

# c# - 学习 C# 帮助或阻碍 VB.NET 学习

> ID：308174
> 
> 赞同：2
> 
> 时间：2008-11-21T08:22:04.907
> 
> 标签：c#, vb.net

我刚刚换了工作，从 VB 6 转到 VB.Net，发现学习跳跃相当陡峭，在事物的对象/概念方面有更多问题.. 但是现在到了那里......但是因为我是一个汇编程序/ 10/15 年前的 C++，正在考虑学习 C++/C# .Net（XNA 游戏库叫我的名字），但不确定它是否会妨碍我学习 VB.NET .... 还是应该让自己获得认证

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-21T08:29:56.967

我（过去）是一名 VB6 开发人员，我希望它会有所帮助。VB6 开发人员倾向于继续在 .NET 中编写 VB6，这一趋势备受评论。即使只是简单地看一下 C# 也可能会帮助您将 VB.NET 视为一种 .NET 语言，而不是 Visual Studio 6 的祖先。

当然，你可能会发现（就像我一样）你不想在 C# 之后回到 VB.NET ;-p

但正如已经提到的 -*框架*是相同的。而在 C# 4.0 中，许多差异将变得更小（“动态”使 C# 更容易与后期绑定的 COM 对话，而命名参数/自动引用的东西使类型化的 COM 更容易）。

在 VS2010 中融合 C# 4.0 和 VB.NET 的特性集有很多驱动力

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-21T08:29:23.740

对我来说，.NET 的最大障碍是了解框架中可用的内容。因此，如果您发现用 C# 编写代码更容易，这将意味着您只为一件事而不是两件事而苦苦挣扎。一旦你了解了框架，它就只是语法，因为你可以用 C# 做的 95% 的东西都可以用 VB 来完成。

此外，C# 将迫使您以更加面向对象的方式编写代码，因为您无法退回到 VB6 风格的编码。

' [yield return](http://msdn.microsoft.com/en-us/library/9k7k7cf0.aspx) ' 是 VB9 中没有等效项的一个示例（尽管有传言称这是为 VBX 添加的）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-21T08:40:42.373

除了您需要了解的大部分内容是关于框架库的事实之外，学习另一种针对 .NET 的 CLR 的语法很有用。

了解另一种语言如何表达相同的概念有助于您将概念与语言区分开来。这总是有用的，因为概念是相当恒定的，（例如阴影（VB）或隐藏（C#）函数），而不同的语言使用不同的词来表达它们。

更好地理解这些概念将帮助您在设计代码时利用它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-21T08:44:32.570

IMX，学习 C# 帮助我学习了 VB。这是关于以 2 种方式而不是 1 种方式表达相同的概念。

编辑：安东尼琼斯打败了我:-)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-08T08:09:00.180

一方面，如果您的方法没有返回任何内容，那么您必须`Sub`在 VB.NET 中创建 a ，如果它返回任何内容，则将其称为 a `Function`！
我刚刚从 C# 切换到 VB.NET（客户端要求）并且仍然习惯了它的麻烦 :( 我会说 VB 中的编码几乎可以消除 .NET 的 OOPS

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-21T08:37:09.573

在切换到 .NET 之前，我也是一名 VB6 开发人员。首先，我尝试使用 VB.Net，但它从来没有感到舒服，所以我尝试了 C# 并爱上了它。:-)

前面的回复中提到了一些差异，有些事情可以在 VB.Net 中执行，而在 C# 中无法执行（例如索引属性），反之亦然。但除此之外，差异纯粹在于语法。事实上，有几个可用的翻译器可以将 C# 转换为 VB.Net 并返回。

所以我建议你试试 C#。由于您了解一些 C++，因此正确掌握语法应该不难，剩下的就是学习使用该框架。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-21T09:54:03.223

作为一名敬业的 .Net 开发人员，我曾参与过 C# 和 VB.net 的大型项目。看到这两种语言的优缺点后，我发现 VB 有时是最令人沮丧的。

问题是使用 VB（取决于您的项目设置）它会神奇地执行隐式操作，例如强制转换。这有时会有所帮助，但在一般情况下，您不希望您的代码做某事，除非您明确告诉它（这就是 C# 的行为方式，以明确的方式）。我希望编译器时间错误告诉我我无法从一种对象类型转换为另一种对象类型，而不是在我们的实时部署中出现运行时异常。

我发现 VB 的这种隐含方面往往会妨碍“仅 VB”开发人员对幕后发生的事情的理解。对于这些人来说，看着 C# 似乎触发了一些灯泡，他们说“啊哈！这一定是我执行此操作时 VB 实际在做的事情”。

我建议你试试 C#，它会给你一个新的视角，你可能会发现你真的很喜欢它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-20T08:13:59.793

学习 C# 到 VB 的唯一真正障碍是文档。对于 C# 用户来说似乎有更多信息，并且试图找到有时相当标准 C# 的 VB 等效语法可能会很痛苦。

话虽这么说……知道很多不同的方法来做同样的事情永远不会有坏处。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-06-05T12:17:03.240

我同意 Garry 的观点，最大的问题是 API。

我个人观察到的第二大问题是 VB6 开发人员在 VB.NET 中编写 VB6 代码。这本身就是 VB6 开发人员学习 C# 的一个很好的理由——它迫使您以 .NET 风格思考。

# javascript - Javascript“onMouseOver”触发儿童？

> ID：308175
> 
> 赞同：1
> 
> 时间：2008-11-21T08:23:11.207
> 
> 标签：javascript, jquery, parent-child, jquery-events

我不知道这是否是我正在使用的 jQuery 的结果，但这是我想要做的：

```
<div class="info" style="display: inline;" 
  onMouseOut="$(this).children('div').hide('normal');" 
  onMouseOver="$(this).children('div').show('normal');"
>
  <img src="images/target.png">
  <div class="tooltiptwo" id="tooltip" 
    style="font-weight: normal; font-size: 0.8em;" >TOOLTIP TEXT</div>
</div> 
```

对于熟悉基本 CSS 和 jQuery 的任何人，我正在尝试在我的工具提示中添加一个简单的动画。问题是这种动画的触发。似乎当动画发生时，如果用户将鼠标移到工具提示上，则动画将进入显示和隐藏的循环，直到用户将鼠标移开。这是一个不受欢迎的效果，因为我希望动画只消失一次，当鼠标移出*父*div 时。我已经定位了我的 CSS，以便工具提示出现在远离父 div 的位置，但无论如何操作都应该只在父 div 上触发，而不是在它的任何子代上触发。

所以基本上，我将如何实现这一目标？我希望我的父元素上的悬停/退出状态触发该父级的子级的功能（动画），而不需要子级的悬停/退出状态做任何事情。似乎 and 的正常方法`onMouseOver`甚至`onMouseOut`对于该方法所属的父级的子级都在触发，这造成了一些相当不良的影响。

请注意，我是 jQuery 的新手（尽管到目前为止它很棒，但如果可以的话，我想用它的优点来覆盖我的网站），如果有更好的方法来使用 jQuery 实现悬停/退出状态，我可能不知道关于他们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-21T08:45:29.120

**编辑**：实际上这是一个更好的解决方案（[信用](https://stackoverflow.com/questions/308411/#308720)）：

```
$('.info').bind('mouseenter', function() {
    $('div', this).show('normal');
});

$('.info').bind('mouseleave', function() {
    $('div', this).hide('normal');
});

// hide the tooltip to start off
$('.info div').hide(); 
```

**edit2**：作为对评论的回应，我想我会建议以不同的方式构建您的 HTML，或者将事件绑定到兄弟元素（图像）：

```
<div class="info">
    <img src="stuff.jpg" />
</div>
<div class="tooltip"></div> 
```

或在图像上绑定：

```
$('.info img').bind('mouseenter', function() { etc... });
$('.info img').bind('mouseleave', function() { etc... }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-21T08:39:39.257

您是否按照本**[教程进行操作](http://www.kriesi.at/archives/create-simple-tooltips-with-css-and-jquery)**？

尤其是 mousemove 部分，他不断设置定位值 left 和 top 以对齐光标旁边的工具提示。X 和 Y 坐标通过 .pageX 和 .pageY 调用。他还添加了 15 px 的小偏移量，因此工具提示不会直接位于光标下方。

这样，鼠标就不能在工具提示上，即使是淡出阶段。因此没有无限循环

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-09-18T12:20:42.903

将其绑定到父 div，并使用 stopPropagation 阻止它绑定到您的工具提示。像这样：

[代码] $('.info').bind('mouseover', function(e) { e.stopPropagation(); $(this > 'div').show('normal'); });

$('.info').bind('mouseout', function() { $(this > 'div').hide('normal'); });

// 隐藏工具提示以开始 $('.info div').hide(); [/代码]

但是，我也使用 pageX 和 pageY 使我的工具提示随光标移动。

# java - 帮我将使用字节的 Java 代码翻译成 jython 代码

> ID：308187
> 
> 赞同：2
> 
> 时间：2008-11-21T08:30:51.007
> 
> 标签：java, python, jython

如何将此代码翻译成 jython？

```
 ZipOutputStream zos = new ZipOutputStream(new FileOutputStream(file + ".zip"));
     byte[] buf = new byte[1024];
     int len;
     //Create a new Zip entry with the file's name.
     ZipEntry zipEntry = new ZipEntry(file.toString());
     //Create a buffered input stream out of the file
     //we're trying to add into the Zip archive.
     FileInputStream fin = new FileInputStream(file);
     BufferedInputStream in = new BufferedInputStream(fin);
     zos.putNextEntry(zipEntry);
     //Read bytes from the file and write into the Zip archive.
     while ((len = in.read(buf)) >= 0) {
        zos.write(buf, 0, len);
     }
     //Close the input stream.
     in.close();
     //Close this entry in the Zip stream.
     zos.closeEntry(); 
```

这就是我所拥有的，但失败得很厉害

```
 buf=None                                     <<<< ?
            len=None                                     <<<< ?
            zipEntry=ZipEntry(file.toString()) 
            fin=FileInputStream(file)
            bin=BufferedInputStream(fin)
            self._zos.putNextEntry(zipEntry)
            while (len=bin.helpme_im_dying(buf)) >= 0):  <<<< ?
                self._zos.write(buf,0,len)               <<<< ?
                len = bin.read(buf)                      <<<< ?
            bin.close()
            self._zos.closeEntry() 
```

有关信息，请参阅此页面[https://www.acm.org/crossroads/xrds6-3/ovp63.html](https://www.acm.org/crossroads/xrds6-3/ovp63.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-21T08:46:24.483

这是该函数的精确翻译（除了像您的情况一样，使用`bin`而不是保留关键字`in`）。

```
from jarray import zeros
from java.io import BufferedInputStream, FileInputStream, FileOutputStream
from java.util.zip import ZipEntry, ZipOutputStream

def test(file):
    zos = ZipOutputStream(FileOutputStream(file + ".zip"))
    buf = zeros(1024, 'b')
    zipEntry = ZipEntry(file)
    fin = FileInputStream(file)
    bin = BufferedInputStream(fin)
    zos.putNextEntry(zipEntry)
    len = bin.read(buf)
    while len >= 0:
        zos.write(buf, 0, len)
        len = bin.read(buf)
    bin.close()
    zos.closeEntry() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-21T11:19:31.897

这不是您问题的答案，而是相关的。这是一个 CPython 版本：

```
from zipfile import ZipFile, ZIP_DEFLATED

def test(file):
    ZipFile(file+".zip", "w", ZIP_DEFLATED).write(file) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-04T10:16:30.730

不要在未确保已关闭的情况下使用 ZipFile：

```
with ZipFile('spam.zip', 'w') as myzip:
    myzip.write('eggs.txt') 
```

# java - MDB 注释的可配置值

> ID：308188
> 
> 赞同：9
> 
> 时间：2008-11-21T08:31:39.740
> 
> 标签：java, annotations, ejb-3.0, jboss-mdb

我正在尝试使用[这种方法](http://www.jboss.org/community/docs/DOC-10032)在我们的 EJB3 应用程序中接收邮件。简而言之，这意味着创建一个带有以下注释的 MDB：

```
@MessageDriven(activationConfig = { @ActivationConfigProperty(propertyName = "mailServer", propertyValue = "imap.company.com"),
    @ActivationConfigProperty(propertyName = "mailFolder", propertyValue = "INBOX"),
    @ActivationConfigProperty(propertyName = "storeProtocol", propertyValue = "imap"),
    @ActivationConfigProperty(propertyName = "debug", propertyValue = "false"),
    @ActivationConfigProperty(propertyName = "userName", propertyValue = "username"),
    @ActivationConfigProperty(propertyName = "password", propertyValue = "pass") })
@ResourceAdapter("mail-ra.rar")
@Name("mailMessageBean")
public class MailMessageBean implements MailListener {
    public void onMessage(final Message msg) {
       ...snip...
    }
} 
```

我有这个工作，但情况不太理想：主机名、用户名和密码是硬编码的。在编译之前没有使用 ant 和 build.properties 替换这些值，我不知道如何将它们外部化。

使用 MBean 是理想的，但我不知道如何将值从 MBean 获取到 MDB 配置。

我该怎么做？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-12-03T15:22:13.810

您可以将注释外部化到您在 jar 文件的 META-INF 中部署的 ejb-jar.xml 中，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>

<ejb-jar version="3.0">
    <enterprise-beans>
        <message-driven>
            <ejb-name>YourMDB</ejb-name>
            <ejb-class>MailMessageBean</ejb-class>        
            <activation-config>
                <activation-config-property>
                   <activation-config-property-name>username</activation-config-property-name>
                   <activation-config-property-value>${mdb.user.name}</activation-config-property-value>
                </activation-config-property>
...
...
            </activation-config>
        </message-driven>
    </enterprise-beans> 
```

然后，您可以使用 -Dmdb.user.name=theUserName 将 mdb.user.name 值设置为系统属性，作为应用程序服务器命令行的一部分，它会神奇地被 mdb 拾取。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-03-09T19:16:39.753

至少从 JBoss AS 5.1 开始，您可以使用 AOP 来配置 @ActivationConfigProperties。[我通过查看 jboss在此处](http://docs.jboss.org/ejb3/docs/tutorial/1.0.0/ejb3-1.0.0-tutorials.zip)提供的示例发现了这一点。如果您不希望系统属性中的整个容器都可以使用您的用户名和密码，或者如果您像我一样，并且从不（我重复一遍，从不）想要部署其中包含用户名/密码的工件，这将非常有用。无论如何，这是jist...

像这样注释 mdb...

```
...
@MessageDriven
@AspectDomain("TestMDBean")
public class TestMDBean implements MessageListener {
... 
```

然后将 ${whatever}-aop.xml 添加到具有如下内部结构的部署目录。我把原来的评论留在那里，以防 Jaikiran 确实做出了提到的改变......

> 注意：注释只能在一行上。

```
<?xml version="1.0" encoding="UTF-8"?>
<aop xmlns="urn:jboss:aop-beans:1.0">
   <!-- TODO: Jaikiran - These interceptor declarations need not be here since they 
   are already declared through the ejb3-interceptors-aop.xml. Duplicating them leads to
   deployment errors. However, if this custom-ejb3-interceptors-aop.xml needs to be 
   independent, then we must find a better way of declaring these. Right now, commenting these
   out, can be looked at later. -->
   <!--    
   <interceptor class="org.jboss.ejb3.AllowedOperationsInterceptor" scope="PER_VM"/>
   <interceptor class="org.jboss.ejb3.entity.TransactionScopedEntityManagerInterceptor" scope="PER_VM"/>
   <interceptor factory="org.jboss.ejb3.security.RunAsSecurityInterceptorFactory" scope="PER_CLASS"/>
   <interceptor class="org.jboss.ejb3.stateless.StatelessInstanceInterceptor" scope="PER_VM"/>

   <interceptor factory="org.jboss.ejb3.interceptor.EJB3InterceptorsFactory" scope="PER_CLASS_JOINPOINT"/>
   <interceptor factory="org.jboss.aspects.tx.TxInterceptorFactory" scope="PER_CLASS_JOINPOINT"/>
   -->
   <domain name="TestMDBean" extends="Message Driven Bean" inheritBindings="true">
      <annotation expr="!class(@org.jboss.ejb3.annotation.DefaultActivationSpecs)">
         @org.jboss.ejb3.annotation.DefaultActivationSpecs (value={@javax.ejb.ActivationConfigProperty(propertyName="destinationType", propertyValue="javax.jms.Queue"), @javax.ejb.ActivationConfigProperty(propertyName="destination", propertyValue="queue/MyQueue"), @javax.ejb.ActivationConfigProperty(propertyName="user", propertyValue="testusr"), @javax.ejb.ActivationConfigProperty(propertyName="password", propertyValue="testpwd")})
      </annotation>
   </domain>
</aop> 
```

# javascript - 检测值是否在Javascript中的一组值中的最快方法

> ID：308191
> 
> 赞同：17
> 
> 时间：2008-11-21T08:34:47.503
> 
> 标签：javascript, search

我在 Javascript 中有一组字符串，我需要编写一个函数来检测另一个特定字符串是否属于该组。

实现这一目标的最快方法是什么？可以把这组值放到一个数组中，然后写一个函数来搜索数组吗？

我认为如果我保持值排序并进行二进制搜索，它应该工作得足够快。还是有其他一些聪明的方法可以更快地工作？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2008-11-21T09:33:54.530

使用哈希表，并执行以下操作：

```
// Initialise the set

mySet = {};

// Add to the set

mySet["some string value"] = true;

...

// Test if a value is in the set:

if (testValue in mySet) {
     alert(testValue + " is in the set");
} else {
     alert(testValue + " is not in the set");
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-11-21T08:41:15.073

您可以像这样使用对象：

```
// prepare a mock-up object
setOfValues = {};
for (var i = 0; i < 100; i++)
  setOfValues["example value " + i] = true;

// check for existence
if (setOfValues["example value 99"]);   // true
if (setOfValues["example value 101"]);  // undefined, essentially: false 
```

这利用了对象作为关联数组实现的事实。这有多快取决于您的数据和 JavaScript 引擎实现，但您可以轻松地进行一些性能测试，以与其他变体进行比较。

如果一个值可以在您的集合中出现多次并且“频率”对您很重要，您还可以使用递增数字代替我在示例中使用的布尔值。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-11-21T11:42:27.407

对上述哈希解决方案的评论。实际上 {} 创建了一个对象（上面也提到过），它可能会导致一些副作用。其中之一是您的“哈希”已经预先填充了默认对象方法。

`"toString" in setOfValues`也会如此（`true`至少在 Firefox 中）。您可以在前面加上另一个字符，例如“。” 添加到您的字符串以解决此问题或使用“原型”库提供的 Hash 对象。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-05-26T08:19:32.570

偶然发现了这一点，并意识到答案已经过时了。在这个时代，您不应该使用哈希表来实现集合，除非在极端情况下。你应该使用[sets](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set)。

例如：

```
> let set = new Set();
> set.add('red')

> set.has('red')
true
> set.delete('red')
true
> set.has('red')
false 
```

有关更多示例和讨论，请参阅此 SO 帖子：[在 JavaScript 中创建 Set 的方法？](https://stackoverflow.com/questions/8363564/ways-to-create-a-set-in-javascript)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-11-21T12:08:20.913

一种可能的方法，如果集合是不可变的，则特别有效，但仍可用于变量集：

```
var haystack = "monday tuesday wednesday thursday friday saturday sunday";
var needle = "Friday";
if (haystack.indexOf(needle.toLowerCase()) >= 0) alert("Found!"); 
```

当然，您可能需要根据必须放在那里的字符串来更改分隔符......

一个更健壮的变体可以包括边界以确保 "day wed" 和 "day" 都不能正向匹配：

```
var haystack = "!monday!tuesday!wednesday!thursday!friday!saturday!sunday!";
var needle = "Friday";
if (haystack.indexOf('!' + needle.toLowerCase() + '!') >= 0) alert("Found!"); 
```

如果输入确定（例如，超出数据库等），则可能不需要。

我在 Greasemonkey 脚本中使用了它，其优势在于直接从 GM 的存储中使用干草堆。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-21T08:40:40.003

使用哈希表可能是一个更快的选择。

无论您选择哪种选择，都绝对值得根据您考虑的替代方案测试其性能。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-21T08:46:40.083

取决于有多少价值。

如果有几个值（小于 10 到 50），搜索数组可能没问题。哈希表可能是矫枉过正。

如果你有很多值，哈希表是最好的选择。与对值进行排序和进行二分搜索相比，它需要的工作更少。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-05T13:03:45.707

我知道这是一个旧帖子。但是要检测一个值是否在一组值中，我们可以通过数组进行操作，`indexOf()`该数组搜索并检测值的存在

```
var myString="this is my large string set";
var myStr=myString.split(' ');
console.log('myStr contains "my" = '+ (myStr.indexOf('my')>=0));
console.log('myStr contains "your" = '+ (myStr.indexOf('your')>=0));

console.log('integer example : [1, 2, 5, 3] contains 5 = '+ ([1, 2, 5, 3].indexOf(5)>=0));
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-01-17T03:06:08.480

您可以使用 ES6**[包含](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/includes)**.

```
var string = "The quick brown fox jumps over the lazy dog.",
  substring = "lazy dog";

console.log(string.includes(substring));
```

# castle-activerecord - 使用 Castle ActiveRecord 进行自定义查询

> ID：308203
> 
> 赞同：3
> 
> 时间：2008-11-21T08:43:20.903
> 
> 标签：castle-activerecord

我试图弄清楚如何使用 Castle ActiveRecord 执行自定义查询。

我能够运行返回我的实体的简单查询，但我真正需要的是如下查询（带有自定义字段集）：

*选择 count(1) 作为 cnt，来自工作站事件的数据，其中 serverdatetime >= :minDate 和 serverdatetime < :maxDate 和 userId = 1 按具有 count(1) > :threshold 的数据分组*

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-25T16:58:42.820

在这种情况下，您想要的是`HqlBasedQuery`. 您的查询将是一个投影，因此您将得到一个`ArrayList`包含结果的元组（ArrayList 的每个元素的内容将取决于查询，但对于多个值将是`object[]`）。

```
HqlBasedQuery query = new HqlBasedQuery(typeof(WorkStationEvent),
    "select count(1) as cnt, data from workstationevent where 
     serverdatetime >= :minDate and serverdatetime < :maxDate 
     and userId = 1 group by data having count(1) > :threshold");

var results = 
    (ArrayList)ActiveRecordMediator.ExecuteQuery(query);
foreach(object[] tuple in results)
{
    int count = (int)tuple[0]; // = cnt
    string data = (string)tuple[1]; // = data (assuming this is a string)

    // do something here with these results
} 
```

您可以创建一个匿名类型以更有意义的方式保存结果。例如：

```
var results = from summary in 
    (ArrayList)ActiveRecordMediator.ExecuteQuery(query)
    select new {
        Count = (int)summary[0], Data = (string)summary[1]
    }; 
```

现在结果将包含一组具有属性的匿名类型`Count`和`Data`. 或者实际上您可以创建自己的摘要类型并以这种方式填充它。

ActiveRecord 也有`ProjectionQuery`which 做同样的事情，但只能返回实际的映射属性，而不是像 HQL 那样的聚合或函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-08T15:26:47.837

但请注意，如果您像我一样使用 ActiveRecord 1.0.3 (RC3)，这将导致运行时 InvalidCastException。ActiveRecordMediator.ExecuteQuery 返回一个 ArrayList 而不是一个通用的 ICollection。因此，为了使其工作，只需更改此行：

```
var results = (ICollection<object[]>) ActiveRecordMediator.ExecuteQuery(query); 
```

到

```
var results = (ArrayList) ActiveRecordMediator.ExecuteQuery(query); 
```

它应该可以工作。

另请注意，在 hql 语句中使用 count(1) 将使查询返回 String 的 ArrayList 而不是 object[] 的 ArrayList（这是使用 count(*) 时得到的结果。）

只是想我会指出这一点，以便将所有内容记录在一个地方。

# java - 设计类型安全 API 时的具体与有界参数化类型

> ID：308204
> 
> 赞同：0
> 
> 时间：2008-11-21T08:43:35.347
> 
> 标签：java, generics

我想听听你们在设计 API 时如何决定何时应该使用具体参数化类型与有界参数化类型，尤其是。（我最关心的）定义一个类/接口。

例如，

```
public interface Event<S>{
  void setSource(S s);
}

public interface UserEvent extends EVent<User> // OR: UserEvent<S extends User> extends Event<S>
  // It will therefore be void setSource(User s);
} 
```

使用具体参数的问题是，我无法将在使用 setSource() 时获得的编译时好处带到新接口说，

```
public interface AdminUserEvent extends UserEvent{
  void setSource(AdminUser s); // WHERE: AdminUser extends User. This is a method overloading, we also have a void setSource(User s) inherited from UserEvent.
} 
```

我可以解决这个问题是在被调用`User`时对对象进行类型检查`AdminUserEvent.setSource()`。

您在设计 API 时是否曾提出过这个问题？当这种情况出现时，你会采取什么做法或规则？谢谢。

yc

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-08-14T10:05:07.490

我认为您注释掉的`UserEvent<S extends User>`方法是正确的-然后您可以声明`AdminUserEvent extends UserEvent<AdminUser>`. 这就是你所需要的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-21T09:00:56.797

如果我理解正确，这与泛型本身没有太大关系，而是与并行层次结构有关。`B extends A`,但. `BHandler extends AHandler`_`AHandler.handle(A)``BHandler.handle(B)`

是的，我相信这可以通过使用泛型来实现类型安全。也就是说，如果我正确理解了您的问题。

# algorithm - 解释计算复杂性理论

> ID：308213
> 
> 赞同：22
> 
> 时间：2008-11-21T08:46:45.887
> 
> 标签：algorithm, theory, complexity-theory

假设您有一些数学背景，您将如何向天真者提供计算复杂性理论的一般概述？

我正在寻找 P = NP 问题的解释。什么是P？什么是NP？什么是 NP-Hard？

有时 Wikipedia 写得好像读者已经理解了所涉及的所有概念。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2008-11-21T17:13:23.697

呵呵，博士论文闪回。好的，这就去。

我们从决策问题的概念开始，一个算法总是可以回答“是”或“否”的问题。我们还需要两种计算机模型（实际上是图灵机）的想法：确定性和非确定性。确定性计算机是我们一直想到的常规计算机；非确定性计算机就像我们习惯的那样，只是它具有无限的并行性，因此每当您来到一个分支时，您都会产生一个新的“进程”并检查双方。就像 Yogi Berra 说的，当你走到岔路口时，你应该接受它。

如果存在已知的多项式时间算法来获得该答案，则决策问题在 P 中。如果存在用于非确定性机器的已知多项式时间算法来获得答案，则决策问题属于 NP。

已知存在于 P 中的问题在 NP 中是微不足道的——非确定性机器从不麻烦自己分叉另一个进程，并且就像确定性机器一样工作。有已知的问题既不在 P 也不在 NP 中；一个简单的例子是枚举所有长度为 n 的位向量。无论如何，这需要 2 ^n步。

（严格来说，如果一个节点确定性机器可以在多时间内得出答案，并且确定性机器可以在多时间内*验证*该解决方案是否正确，则决策问题属于 NP。）

但是有一些已知存在于 NP 中的问题，对于这些问题，没有已知的多时间确定性算法；换句话说，我们知道它们在 NP 中，但不知道它们是否在 P 中。传统的例子是旅行商问题（decision-TSP）的决策问题版本：给定城市和距离，有没有一条覆盖所有城市，返回起点，距离小于*x*的路线？在不确定的机器中很容易，因为每次不确定的旅行推销员走到岔路口时，他都会接受：他的克隆人前往下一个他们没有去过的城市，最后他们比较笔记，看看是否任何克隆的距离都小于*x*。

（然后，成倍增加的克隆人会为了哪些必须被杀死而与之抗争。）

不知道决策 TSP 是否在 P 中：没有已知的多时间解决方案，但没有证据表明这种解决方案不存在。

现在，还有一个概念：给定决策问题 P 和 Q，如果算法可以在多项式时间内将 P 的解转换为 Q 的解，则称 Q可多次约*简*（或仅可约简）为 P。

如果您可以证明 (1) 它在 NP 中，并且 (2) 表明它可以多次还原为已知为 NP 完全的问题，则该问题是 NP 完全的。（其中困难的部分是证明NP 完全问题的*第一个例子：这是由史蒂夫库克在*[库克定理](http://en.wikipedia.org/wiki/Cook%27s_theorem)中完成的。）

真的，它说的是，如果有人找到了一个 NP 完全问题的多时间解决方案，他们就会自动为*所有*NP 完全问题找到一个解决方案；这也意味着P = NP。

一个问题是 NP 难的当且仅当它“至少”与一个 NP 完全问题一样难。寻找最短路线的更传统的旅行商问题是 NP 难的，而不是严格的 NP 完全问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-21T16:04:11.717

[Michael Sipser](http://www-math.mit.edu/~sipser/)的《[计算理论导论》](https://rads.stackoverflow.com/amzn/click/com/053494728X)是一本很棒的书，可读性很强。另一个**很好的**资源是 Scott Aaronson在理论计算机科学课程中的[伟大想法。](http://stellar.mit.edu/S/course/6/sp08/6.080/index.html)

所使用的形式主义是将决策问题（带有是/否答案的问题，例如“该图是否具有哈密顿循环”）视为“语言”——字符串集——答案为“是”的输入。关于“计算机”是什么（图灵机）有一个正式的概念，如果在图灵机上有一个多项式时间算法来决定该问题（给定输入字符串，比如是或否），那么问题就在 P 中。

如果它在多项式时间内是可检查的，则在 NP 中存在问题*，*即，如果对于答案为“是”的输入，有一个（多项式大小）证书，您可以在多项式时间内检查答案是否为“是”。[例如，给定一个哈密顿循环作为证书，您显然可以检查它是一个。]

它没有说明如何*找到*该证书。显然，您可以尝试“所有可能的证书”，但这可能需要成倍的时间；目前尚不清楚您是否总是*需要*花费超过多项式的时间来决定是或否；这是 P 与 NP 的问题。

如果能够解决该问题意味着能够解决 NP 中的所有问题，则该问题是 NP 难的。

另请参阅此问题： [什么是计算机科学中的 NP 完全？](https://stackoverflow.com/questions/210829/what-is-an-np-complete-problem)

但实际上，所有这些对你来说可能只是模糊的；值得花时间阅读例如 Sipser 的书。这是一个美丽的理论。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-15T17:12:11.870

这是对查理帖子的评论。

> 如果您可以证明 (1) 它在 NP 中，并且 (2) 表明它可以多次还原为已知为 NP 完全的问题，则该问题是 NP 完全的。

第二个条件有一个微妙的错误。实际上，您需要证明的是已知的 NP 完全问题（例如*Y*）是多项式时间可简化为该问题（我们称其为问题*X*）。

这种证明方式背后的原因是，如果你可以将一个*NP*完全问题简化为这个问题，并设法在多时间内解决这个问题，那么你也成功地找到了*NP*的多时间解决方案-完整的问题，这将是一件了不起的事情（如果不是不可能的话），从那时起，您将成功解决长期存在的*P = NP*问题。

看待这个证明的另一种方法是将其视为使用反正证明技术，该技术基本上表明如果*Y --> X*，则*~X --> ~Y*。换句话说，不能在多项式时间内求解*Y*是不可能的，这意味着也不能在多项式时间内求解 X。另一方面，如果您可以在多时间内解决 X，那么您也可以在多时间内解决 Y。此外，您还可以通过传递性解决所有在多时间内减少到 Y 的问题。

我希望我上面的解释足够清楚。一个很好的来源是 Kleinberg 和 Tardos 的*算法设计*的第 8 章或 Cormen 等人的第 34 章。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-11-21T09:30:03.367

不幸的是，我所知道的最好的两本书（[Garey 和 Johnson](https://rads.stackoverflow.com/amzn/click/com/0716710455)以及[Hopcroft 和 Ullman](https://rads.stackoverflow.com/amzn/click/com/0321462254)）都是从面向研究生证明的数学水平开始的。这几乎肯定是必要的，因为整个问题很容易被误解或错误描述。当Jeff试图以过于客气/开玩笑的语气来处理这件事时，他[差点把耳朵咬断。](http://www.codinghorror.com/blog/archives/001187.html)

[也许最好的方法是使用大量示例和练习](https://rads.stackoverflow.com/amzn/click/com/0072970545)，简单地使用大 O 表示法进行大量动手操作。另请参阅[此答案](https://stackoverflow.com/questions/111426/did-you-apply-computational-complexity-theory-in-real-life)。但是请注意，这并不完全相同：单个算法可以用渐近线来描述，但是说一个*问题*具有一定的复杂性是关于它的*所有可能算法*的陈述。这就是为什么证明如此复杂的原因！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-11-21T10:49:26.670

我记得 Papadimitriou 的“计算复杂性”（我希望我的名字拼写正确）是一本好书

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-21T11:58:31.133

非常简化：如果解决问题的唯一方法是枚举所有可能的答案并检查每个答案，那么问题就是 NP 难的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-11-21T17:34:21.847

以下是有关该主题的一些链接：

*   [P vp NP问题的Clay数学陈述](http://www.claymath.org/millennium/P_vs_NP/)
*   [P 与 NP 页面](http://www.win.tue.nl/~gwoegi/P-versus-NP.htm)
*   [P、NP 和数学](http://www.math.ias.edu/~avi/PUBLICATIONS/MYPAPERS/W06/W06.pdf)

在您熟悉集合基数的概念，即集合中元素的数量时，您可以将问题视为 P 表示整数的基数，而 NP 是一个谜：它是相同的还是更大的所有实数的基数？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-21T16:21:33.833

我的简化答案是：“计算复杂性是对添加更多元素时问题变得多困难的分析。”

在那句话中，“更难”这个词故意含糊其辞，因为它既可以指处理时间，也可以指内存使用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-11-21T16:39:33.097

在计算机科学中，仅仅能够解决问题是不够的。它必须在合理的时间内解决。因此，在纯数学中，您提出了一个方程，而在 CS 中，您必须改进该方程，以便您可以在合理的时间内解决问题。

这是我能想到的最简单的表达方式，对于您的目的来说可能太简单了。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-11-21T17:19:48.693

根据您拥有多长时间，也许最好从 DFA、NDFA 开始，然后证明它们是等效的。然后他们会理解 ND 与 D，并且会更好地理解正则表达式作为一个很好的副作用。

# xslt - 为 umbraco 构建多级菜单

> ID：308219
> 
> 赞同：4
> 
> 时间：2008-11-21T08:50:22.417
> 
> 标签：xslt, umbraco

我正在尝试为我在 umbraco 内容管理系统上做的网站构建一个多级下拉 CSS 菜单。

我需要构建它以具有以下结构：

```
<ul id="nav">
  <li><a href="..">Page #1</a></li>
  <li>
    <a href="..">Page #2</a>
    <ul>
      <li><a href="..">Subpage #1</a></li>
      <li><a href="..">Subpage #2</a></li>        
    </ul>
  </li>
</ul> 
```

所以现在我试图弄清楚如何使用 XSLT 进行嵌套。这是我到目前为止所拥有的：

```
<xsl:output method="xml" omit-xml-declaration="yes"/>

<xsl:param name="currentPage"/>

<!-- update this variable on how deep your menu should be -->
<xsl:variable name="maxLevelForMenu" select="4"/>

<xsl:template match="/">
  <ul id="nav">
    <xsl:call-template name="drawNodes">  
      <xsl:with-param 
       name="parent" 
       select="$currentPage/ancestor-or-self::node [@level=1]"
      />  
    </xsl:call-template>
  </ul>
</xsl:template>

<xsl:template name="drawNodes">
  <xsl:param name="parent"/> 
  <xsl:if test="umbraco.library:IsProtected($parent/@id, $parent/@path) = 0 or (umbraco.library:IsProtected($parent/@id, $parent/@path) = 1 and umbraco.library:IsLoggedOn() = 1)">
    <xsl:for-each select="$parent/node [string(./data [@alias='umbracoNaviHide']) != '1' and @level &lt;= $maxLevelForMenu]"> 
      <li>
        <a href="{umbraco.library:NiceUrl(@id)}">
          <xsl:value-of select="@nodeName"/>
        </a>  
        <xsl:if test="count(./node [string(./data [@alias='umbracoNaviHide']) != '1' and @level &lt;= $maxLevelForMenu]) &gt; 0">   
          <xsl:call-template name="drawNodes">    
            <xsl:with-param name="parent" select="."/>    
          </xsl:call-template>  
        </xsl:if> 
      </li>
    </xsl:for-each>
  </xsl:if>
</xsl:template> 
```

我似乎无法弄清楚如何检查第一级（此处为第 1 页和第 2 页）是否有任何子级，以及是否添加了额外的`<ul>`以包含`<li>`子级。

有人在那里指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-21T12:50:17.410

首先，不需要传递 a`parent`参数。上下文将传输此信息。

这是应该解决您的问题的 XSL 样式表：

```
<!-- update this variable on how deep your menu should be -->
<xsl:variable name="maxLevelForMenu" select="4"/>

<!--- match the document root --->
<xsl:template match="/root">
  <div id="nav">
    <xsl:call-template name="SubTree" />
  </div>
</xsl:template>

<!-- this will be called by xsl:apply-templates -->
<xsl:template match="node">
  <!-- the node is either protected, or the user is logged on (no need to check for IsProtected twice) -->
  <xsl:if test="umbraco.library:IsProtected($parent/@id, $parent/@path) = 0 or umbraco.library:IsLoggedOn() = 1">
    <li>
      <a href="{umbraco.library:NiceUrl(@id)}"><xsl:value-of select="@nodeName"/></a>
      <xsl:call-template name="SubTree" />
    </li>
  </xsl:if>
</xsl:template>

<xsl:template name="SubTree">
  <!-- render sub-tree only if there are any child nodes --->
  <xsl:if test="node">
    <ul>
      <xsl:apply-templates select="node[data[@alias='umbracoNaviHide'] != '1'][@level &lt;= $maxLevelForMenu]">
        <!-- ensure sorted output of the child nodes --->
        <xsl:sort select="@sortOrder" data-type="number" />
      </xsl:apply-templates>
    </ul>
  </xsl:if>
</xsl:template> 
```

这是我对其进行测试的 XML（我对 Umbraco 了解不多，但在查看了一些示例后，我希望我能接近 Umbraco 文档）：

```
<root id="-1">
  <node id="1" level="1" sortOrder="1" nodeName="Page #1">
    <data alias="umbracoNaviHide">0</data>
  </node>
  <node id="2" level="1" sortOrder="2" nodeName="Page #2">
    <data alias="umbracoNaviHide">0</data>
    <node id="3" level="2" sortOrder="2" nodeName="Subpage #2.2">
      <data alias="umbracoNaviHide">0</data>
    </node>
    <node id="4" level="2" sortOrder="1" nodeName="Subpage #2.1">
      <data alias="umbracoNaviHide">0</data>
      <node id="5" level="3" sortOrder="3" nodeName="Subpage #2.1.1">
        <data alias="umbracoNaviHide">0</data>
      </node>
    </node>
    <node id="6" level="2" sortOrder="3" nodeName="Subpage #2.3">
      <data alias="umbracoNaviHide">1</data>
    </node>
  </node>
  <node id="7" level="1" sortOrder="3" nodeName="Page #3">
    <data alias="umbracoNaviHide">1</data>
  </node>
</root> 
```

这是输出：

```
<div id="nav">
  <ul>
    <li><a href="http://foo/">Page #1</a></li>
    <li><a href="http://foo/">Page #2</a>
      <ul>
        <li><a href="http://foo/">Subpage #2.1</a>
          <ul>
            <li><a href="http://foo/">Subpage #2.1.1</a></li>
          </ul>
        </li>
        <li><a href="http://foo/">Subpage #2.2</a></li>
      </ul>
    </li>
  </ul>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-21T15:07:20.067

这个问题没有什么特别之处。以下解决方案测试节点列表

```
<xsl:apply-templates/>
```

不为空，在应用模板之前：

```
<xsl:stylesheet 版本="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:输出省略-xml-declaration="yes"/>
  <xsl:variable name="vLevel" select="0"/>

    <xsl:template match="root">
      <xsl:变量名="vnextLevelNodes"
           select="节点[@level = $vLevel+1]"/>
      <xsl:if test="$vnextLevelNodes">
       <ul>
         <xsl:apply-templates select="$vnextLevelNodes"/>
       </ul>
      </xsl:if>
    </xsl:模板>

    <xsl:template match="节点">
  <!-- 节点要么受保护，要么用户已登录（无需检查 IsProtected 两次）-->
    <!-- <xsl:if 测试=
      “umbraco.library:IsProtected($parent/@id, $parent/@path) = 0
      或者
       umbraco.library:IsLoggedOn() = 1"> -->
    <xsl:if test="1">
        <li>
          <!-- <a href="{umbraco.library:NiceUrl(@id)}"> -->
          <a href="'umbraco.library:NiceUrl(@id)'">
            <xsl:value-of select="@nodeName"/>
          </a>

                  <xsl:变量名="vnextLevelNodes"
                       select="节点[@level = current()/@level+1]"/>
                  <xsl:if test="$vnextLevelNodes">
                   <ul>
                     <xsl:apply-templates select="$vnextLevelNodes"/>
                   </ul>
                  </xsl:if>
        </li>
    </xsl:if>
    </xsl:模板>
</xsl:样式表>

```

我使用了以下 XML 源文档：

```
<root id="-1">
    <node id="1" level="1" sortOrder="1" nodeName="Page #1">
        <data alias="umbracoNaviHide">0</data>
    </节点>
    <node id="2" level="1" sortOrder="2" nodeName="Page #2">
        <data alias="umbracoNaviHide">0</data>
        <node id="3" level="2" sortOrder="2" nodeName="Subpage #2.2">
            <data alias="umbracoNaviHide">0</data>
        </节点>
        <node id="4" level="2" sortOrder="1" nodeName="Subpage #2.1">
            <data alias="umbracoNaviHide">0</data>
            <node id="5" level="3" sortOrder="3" nodeName="子页面#2.1.1">
                <data alias="umbracoNaviHide">0</data>
            </节点>
        </节点>
        <node id="6" level="2" sortOrder="3" nodeName="Subpage #2.3">
            <data alias="umbracoNaviHide">1</data>
        </节点>
    </节点>
    <node id="7" level="1" sortOrder="3" nodeName="Page #3">
        <data alias="umbracoNaviHide">1</data>
    </节点>
</root>

```

此外，我已经注释掉了任何引用 Umbraco 扩展函数的代码，因为我无权访问它们。

当对这个源 XML 文档应用上述转换时，会产生正确的、想要的结果：

```
<ul>
    <li>
        <a href="'umbraco.library:NiceUrl(@id)'">第 1 页</a>
    </li>
    <li>
        <a href="'umbraco.library:NiceUrl(@id)'">第 2 页</a>
        <ul>
            <li>
                <a href="'umbraco.library:NiceUrl(@id)'">子页面 #2.2</a>
            </li>
            <li>
                <a href="'umbraco.library:NiceUrl(@id)'">子页面 #2.1</a>
                <ul>
                    <li>
                        <a href="'umbraco.library:NiceUrl(@id)'">子页面 #2.1.1</a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="'umbraco.library:NiceUrl(@id)'">子页面 #2.3</a>
            </li>
        </ul>
    </li>
    <li>
        <a href="'umbraco.library:NiceUrl(@id)'">第 3 页</a>
    </li>
</ul>

```

希望这有帮助。

干杯，

迪米特·诺瓦切夫

# python - 在 Python 中显示处理消息

> ID：308220
> 
> 赞同：0
> 
> 时间：2008-11-21T08:50:27.533
> 
> 标签：python

我想在提交的请求被提供时显示处理信息或登录原始页面，直到它完成执行。我认为了解请求背后发生的事情对用户来说是有意义的。

不过，我没有找到这样做的线索，你们能帮我看看人们是怎么做的，就像下面这样 - 供你参考

[http://www.xml-sitemaps.com/](http://www.xml-sitemaps.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-21T09:07:17.860

我可以想象有两种方法来处理这个问题：

1.  让您的后端脚本（python）将一个长进程的信息输出到某种日志（文本文件、数据库、会话等），然后让 javascript 通过 ajax 获取信息并更新当前页面。

2.  同样的交易，但不是 ajax，而是在页面上进行元刷新，以获取最新的更新信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-12-08T08:00:28.450

您可以使用 python 线程，它将在后台创建一个新进程

并在该线程上显示您的消息

希望能帮助到你 ;）

# language-agnostic - 故事生成

> ID：308222
> 
> 赞同：0
> 
> 时间：2008-11-21T08:52:37.373
> 
> 标签：language-agnostic

在阅读了[一篇关于生成极简故事的 Python 程序](http://grandtextauto.org/2008/11/20/story-generation-in-1k/)的博文后，我问自己——以及你——哪些是此类程序最成功的尝试。例如，我记得看到过一些使用生成语法的东西。哪些是最好的尝试，就像这个一样，非常紧凑，或者是独立的，或者能够阅读，比如，网络或独立的文本语料库（但不仅仅是一个包含大量故事块的文件）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-23T04:51:44.240

在 Talespin 中搜索一些著名的开创性作品。（例如：Warren Sack[的 Common Lisp 中的 Micro-Talespin 。）](http://norvig.com/ltd/test/micro-tale-spin.lisp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-03T02:53:30.823

我实际上更喜欢特纳的“Minstrel：创造力和讲故事的计算机模型”： ftp: [//ftp.cs.ucla.edu/tech-report/1992-reports/920057.pdf](ftp://ftp.cs.ucla.edu/tech-report/1992-reports/920057.pdf)

在我看来，Talespin 的算法对除计划之外的一切都视而不见。所以作者的目标很少被考虑（如果有的话）。吟游诗人这样更好。

# java - Java 和 switch 案例

> ID：308224
> 
> 赞同：9
> 
> 时间：2008-11-21T08:56:06.510
> 
> 标签：java

有谁知道为什么 Java 不允许您打开大于整数的数字？这背后有什么技术原因吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2008-11-21T09:18:28.337

[如此处](http://java.sun.com/docs/books/tutorial/java/nutsandbolts/switch.html)所述，switch 可用于 byte、short、char 和 int 原始数据类型。它还适用于枚举类型和一些“包装”某些基本类型的特殊类：Character、Byte、Short 和 Integer。

Java switch 语句被编译到[JVM 字节码 tableswitch 或 lookupswitch](http://www.artima.com/underthehood/flowP.html)中。这两个字节码都要求大小写值是唯一的、32 位的、整数的、编译时常量。

tableswitch 和 lookupswitch 指令都包括一个默认分支偏移量和一组可变长度的 case 值/分支偏移量对。
两条指令都从堆栈中弹出键（紧跟在 switch 关键字后面的括号中的表达式的值）。
将键与所有 case 值进行比较：

*   如果找到匹配项，则采用与案例值关联的分支偏移量。
*   如果未找到匹配项，则采用默认分支偏移量。

尽管上面代表了实现细节，但我相信**用于 switch 的类型是与控制流的有效字节码兼容的类型**，并且它可能是这种选择的重要部分。

正如这个[Java Bug](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4276296)中所说：

> 我想您可以允许 Java switch 语句案例包含其他类型的值，并将使用其中一种值的 switch 语句编译到其他字节码中，例如 ifs 和 goto 序列。但是我们必须仔细检查所有的 switch 语句，以确定它是否会被编译成一个快速的 switch 字节码或一个缓慢的 if-else 序列。

如this other [Java bug中所说](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4401321)

> 'switch' 语句可以使用函数表分派和/或二叉树搜索来匹配 case 语句，而不是按顺序逐一测试它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-21T15:02:24.977

Scala 是一种建立在 JVM 之上的语言，它允许您定义自己的案例类，您可以在 switch 语句中使用它们。因此，在 switch 语句中使用 longs 或 doubles 或 Strings 肯定是可能的。

但是我不知道它有多复杂和有多有效。对于简单类型，编译器只需计算偏移量以在表上跳转。更复杂的类型绝对不是这种情况。

我想答案与设计 java 的时间和设计者试图实现的目标有关。Java 最初的目标是设计一种“更好的 C++”，可在许多环境中移植。我可以理解为什么复杂类型的开关不适合它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-21T12:16:28.540

[我的猜测是， long 作为有效的 switch 表达式类型被删除，因为/与 long 变量上的操作可能不是 atomic](http://java.sun.com/docs/books/jls/third_edition/html/memory.html#17.7)的事实有关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-03-28T14:12:16.270

如果您发现本机 java switch 构造限制太多，请看一下[lambdaj Switcher](http://code.google.com/p/lambdaj/wiki/Switcher)，它允许通过将任何对象与一些 hamcrest 匹配器匹配来以声明方式打开任何对象。

* * *

## 回答 #5

> 赞同：-8
> 
> 时间：2008-11-21T09:15:16.720

也许是因为在 switch 中有超过整数最大情况的编程真的很糟糕？

如果要切换长变量，只需将它们投影到整数空间中即可。

# mysql - 在 MySQL 中使用“USING”而不是“ON”有什么缺点吗？

> ID：308227
> 
> 赞同：2
> 
> 时间：2008-11-21T08:57:41.560
> 
> 标签：mysql, syntax, join

MySQL的两个片段：

```
SELECT * FROM annoyingly_long_left_hand_table 
    LEFT JOIN annoyingly_long_right_hand_table 
    ON annoyingly_long_left_hand_table.id = annoyingly_long_right_hand_table.id; 
```

对比

```
SELECT * FROM annoyingly_long_left_hand_table 
    LEFT JOIN annoyingly_long_right_hand_table 
    USING (id); 
```

鉴于两个表都有一个`id`字段，使用第二个版本有什么缺点。这不仅仅是懒惰 - 使用 USING 的版本对我来说似乎更清晰。

（请不要提及别名 - 我想知道是否有任何理由偏爱一种条件结构而不是另一种）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-21T09:14:56.797

两者之间有一个小的功能差异，因为你只得到一个而不是获得 2 个 ID 列。

SELECT * FROM foo JOIN bar ON ( foo.id == bar.id )

id，fooname，id，barname

SELECT * FROM foo JOIN bar USING (id)

id、fooname、barname

因此，使用此语法的用户至少有一些额外的知识要求，[http://dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-09-29T16:25:39.317

`USING`比通用`ON`子句灵活一点：

*   两个表中的列必须具有相同的名称。

*   比较必须是相等的。

*   查询中的任何其他表都不能有同名的列。

# sql-server-2005 - 使用 SMO 创建和设置数据库权限？

> ID：308236
> 
> 赞同：1
> 
> 时间：2008-11-21T09:06:59.967
> 
> 标签：sql-server-2005, permissions, login, smo

有没有办法创建新的登录名并在`SQL Server 2005`using`C#`和上设置数据库权限`SMO`？

如果是这样，怎么做？如果没有，最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-11-23T06:03:33.627

您可以使用 Microsoft.SqlServer.Management.Smo.Login 类并调用 Create 方法。有关更多详细信息，请参见[此处](http://msdn.microsoft.com/en-us/library/ms208073(SQL.90).aspx)。

# asp.net - 从 ASP.NET 创建 Outlook 任务请求

> ID：308251
> 
> 赞同：2
> 
> 时间：2008-11-21T09:22:06.550
> 
> 标签：asp.net, outlook

我正在寻找一种从 ASP.NET 创建 Outlook 任务请求的方法。我将 Exchange Server 2003 用于电子邮件服务器。基本上，我的 ASP.NET 应用程序的用户将执行一些基于某些逻辑创建 Outlook 任务的操作。这在 .NET 中是本机支持的还是我必须使用第三方组件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-24T21:12:10.377

您可以将 WebDav 用于 Exchange。[这](http://blog.downtownsoftwarehouse.com/2006/10/26/using-net-and-webdav-to-access-an-exchange-server/)是一个如何执行此操作的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-21T09:28:19.750

您是否将 Outlook 与 Exchange Server 一起使用？如果是这样，您可以使用 Exchange Web 服务。

Exchange Web 服务是一种在 Exchange 邮箱中执行几乎所有操作的简单方法，因此如果您要做的不仅仅是 Outlook 任务，那么它可能值得一看。否则，AFAIK，没有本机 .Net 类（随框架一起提供）。

到目前为止，我还没有看到任何第三方组件......

# python - 如何强制 iPython 使用旧版本的 Python？

> ID：308254
> 
> 赞同：10
> 
> 时间：2008-11-21T09:26:19.863
> 
> 标签：python, ipython

我正在运行 Ubuntu 8.10，使用 Python 2.5 开箱即用。从系统的角度来看这很好，但我需要 Python2.4，因为我在 Zope / Plone 上开发。

好吧，安装 python2.4 没有挑战，但我找不到让 iPython 使用它的（干净的）方法：man 和配置文件中都没有选项。

之前，有一个 ipython2.4 包，但它已被弃用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-11-21T09:28:51.387

好的，我回答我自己的问题：我很笨 :-)

```
ls /usr/bin/ipython*
/usr/bin/ipython  /usr/bin/ipython2.4  /usr/bin/ipython2.5 
```

现在它是内置的...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2011-03-14T00:07:02.010

我使用的是 Ubuntu 10.10，并且只安装了 ipython。（也只有一个 python 可用，但我有一个带有[deadsnakes ppa](https://launchpad.net/~fkrull/+archive/deadsnakes)的旧版本。）

为了获得 ipython2.5，我从你的 virtualenv 安装了 ipython：

```
virtualenv --python=/usr/bin/python2.5 project_name
source project_name/bin/activate
pip install ipython 
```

然后 ipython 版本应该与传入 virtualenv 的 python 匹配`--python`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-07T17:19:09.577

我发现指定使用哪个 python 版本的最简单方法是使用该版本显式调用 ipython 脚本。为此，您可能需要知道 ipython 脚本的路径，您可以通过运行`which ipython`. 然后简单地运行`python <path-to-ipython>`以启动 ipython。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-24T12:33:19.783

你可以：

```
$ python2.4 setup.py install --prefix=$HOME/usr
$ python2.5 setup.py install --prefix=$HOME/usr 
```

或者

```
alias ip4 "python2.4 $HOME/usr/bin/ipython"
alias ip5 "python2.5 $HOME/usr/bin/ipython" 
```

[供参考](https://github.com/ipython/ipython/wiki/Frequently-asked-questions#q-running-ipython-against-multiple-versions-of-python)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-10T07:29:11.760

实际上，您可以使用您喜欢的 python 版本运行 ipython：

```
python2.7 ipython
python3 ipython 
```

这对我来说是最简单的解决方案，并且避免了一次性试验的虚拟环境设置。

# c - Vim 关键字补全

> ID：308258
> 
> 赞同：12
> 
> 时间：2008-11-21T09:28:49.330
> 
> 标签：c, vim

如何告诉 Vim 编辑器我的包含文件路径，以便在我按下`CTRL`+时它可以自动完成函数名称`N`？

例如，我有一个如下的 C 程序：

```
#include<stdio.h>
int main()
{
    sca // here I press control+N, it does not complete to scanf
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-11-21T09:41:22.267

在您的`.vimrc`中，将路径添加到您的`.vimrc`：

```
set path+=/usr/include/**
set path+=/my_include_dir/include
set path+=/my_include_dir/srclib/apr/**
set path+=/my_other_include_dir/srclib/apr-util/**

** means all sub-directories.
*  means all contained directories
.  means all files in the directory of the found file
+= means prepend to existing path (iirc) 
```

您也可以通过打开文件然后输入来检查路径

```
:checkpath 
```

这将为您提供所有丢失的包含文件的列表。注意它似乎没有处理预处理器指令，所以你会得到一些误报。进入

```
:checkpath! 
```

将给出找到和丢失的包含文件的完整列表。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-11-21T09:51:46.567

另外，重要的是要注意有许多完成功能。

```
^x ^o  = "omnicomplete" 
^x ^i  = "included-files completion" 
^x ^f  = "path completion" 
^x ^l  = "Complete this line using one that looks the same" 
```

看

```
:help ins-completion 
```

更多。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-10-26T19:03:10.250

如果文件在标准位置，Vim 也可能已经知道路径。<Cn> 使用 'complete' 选项和标志`i`扫描包含的文件。要添加`i`到“完成”：

`set complete+=i`

您还可以从要完成的符号中获取标签文件，您可以将其用于：

`set complete+=t`

# sql-server - 将 SQL 2000 32 位升级到 SQL 2008 64 位

> ID：308261
> 
> 赞同：1
> 
> 时间：2008-11-21T09:28:55.990
> 
> 标签：sql-server, sql-server-2008, 64-bit, upgrade

我在运行 32 位版本的 SQL Server 2000 的 Windows 2000 Server 上有许多数据库。我需要将所有数据和设置传输到在 Windows 2003 64 位上运行 64 位版本的 SQL 2008 的新服务器。

这是否像备份数据库并恢复到新服务器一样简单。这也适用于系统数据库（master、model、msdb）吗？如果没有，有没有办法自动化跨用户帐户和权限的移动过程？

有人知道其他问题吗？

非常感谢您的帮助。

[编辑] 我已经成功测试升级到 SQL2008 32 位，我最关心的是 64 位版本的任何差异，因为我目前没有可以测试的 64 位服务器，例如我知道您无法将 SQL2000 主数据库恢复到 2008；可以将 SQL2008 32 位主机恢复到 SQL2008 64 位吗？迁移期间的停机时间不是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-21T09:42:34.417

要转移登录名，您应该能够使用[此处](http://technet.microsoft.com/en-us/library/ms137870.aspx)的在线图书中描述的“转移登录名任务” 。

Ross Mistry 发表了[几篇](http://www.networkworld.com/community/node/30052)关于 SQL Server 2008 安装策略和最佳实践的文章。此外，本[文档](http://www.dell.com/downloads/global/solutions/public/white_papers/SQL_2000_SQL_2008_Migration_Guide.pdf)虽然针对特定硬件，但包含有用的信息。

编辑：您看过[Microsoft SQL Server 2008 升级顾问](http://www.microsoft.com/downloads/details.aspx?FamilyId=F5A6C5E9-4CD9-4E42-A21C-7291E7F0F852&displaylang=en)吗？

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2008-11-21T09:46:39.433

我会使用 RedGate SQL 比较和 SQL 数据比较。这会给你一些数据库完整性的保证。但是，它不会是数据的在线迁移，您必须在转换期间阻止更新。

# c++ - 我可以从 C++ 中的另一个构造函数（做构造函数链接）调用构造函数吗？

> ID：308276
> 
> 赞同：1054
> 
> 时间：2008-11-21T09:43:08.520
> 
> 标签：c++, constructor

作为一名[C#](http://en.wikipedia.org/wiki/C_Sharp_%28programming_language%29)开发人员，我习惯于通过构造函数运行：

```
class Test {
    public Test() {
        DoSomething();
    }

    public Test(int count) : this() {
        DoSomethingWithCount(count);
    }

    public Test(int count, string name) : this(count) {
        DoSomethingWithName(name);
    }
} 
```

有没有办法在 C++ 中做到这一点？

我尝试调用类名并使用“this”关键字，但都失败了。

* * *

## 回答 #1

> 赞同：1402
> 
> 时间：2008-11-21T10:04:17.963

**C++11：是的！**

C++11 及更高版本具有相同的功能（称为[委托构造函数](https://secure.wikimedia.org/wikipedia/en/wiki/C++11#Object_construction_improvement)）。

语法与 C# 略有不同：

```
class Foo {
public: 
  Foo(char x, int y) {}
  Foo(int y) : Foo('a', y) {}
}; 
```

**C++03：没有**

不幸的是，在 C++03 中没有办法做到这一点，但有两种模拟方式：

1.  您可以通过默认参数组合两个（或更多）构造函数：

    ```
    class Foo {
    public:
      Foo(char x, int y=0);  // combines two constructors (char) and (char, int)
      // ...
    }; 
    ```

2.  使用 init 方法共享公共代码：

    ```
    class Foo {
    public:
      Foo(char x);
      Foo(char x, int y);
      // ...
    private:
      void init(char x, int y);
    };

    Foo::Foo(char x)
    {
      init(x, int(x) + 7);
      // ...
    }

    Foo::Foo(char x, int y)
    {
      init(x, y);
      // ...
    }

    void Foo::init(char x, int y)
    {
      // ...
    } 
    ```

请参阅[C++FAQ 条目](https://isocpp.org/wiki/faq/ctors#init-methods)以供参考。

* * *

## 回答 #2

> 赞同：129
> 
> 时间：2008-11-21T10:00:12.417

是和否，取决于 C++ 的版本。

在 C++03 中，您不能从另一个构造函数调用一个构造函数（称为委托构造函数）。

这在 C++11（又名 C++0x）中发生了变化，增加了对以下语法的支持：（
来自[Wikipedia](http://en.wikipedia.org/wiki/C%2B%2B11#Object_construction_improvement)的示例）

```
class SomeType
{
  int number;

public:
  SomeType(int newNumber) : number(newNumber) {}
  SomeType() : SomeType(42) {}
}; 
```

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2009-08-12T15:31:52.917

我相信您可以从构造函数中调用构造函数。它将编译并运行。我最近看到有人这样做，它可以在 Windows 和 Linux 上运行。

它只是不做你想做的事。内部构造函数将构造一个临时本地对象，一旦外部构造函数返回，该对象就会被删除。它们也必须是不同的构造函数，否则您将创建递归调用。

参考：[https ://isocpp.org/wiki/faq/ctors#init-methods](https://isocpp.org/wiki/faq/ctors#init-methods)

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2008-11-22T06:36:13.657

**C++11**：是的！

C++11 及更高版本具有相同的功能（称为[委托构造函数](https://en.wikipedia.org/wiki/C++11#Object_construction_improvement)）。

语法与 C# 略有不同：

```
class Foo {
public: 
  Foo(char x, int y) {}
  Foo(int y) : Foo('a', y) {}
}; 
```

**C++03**：没有

值得指出的是，您*可以*在构造函数中调用父类的构造函数，例如：

```
 class A { /* ... */ };

    class B : public A
    {
        B() : A()
        {
            // ...
        }
    }; 
```

但是，不，您不能在 C++03 之前调用同一类的另一个构造函数。

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2011-09-22T20:07:00.453

在[C++11](https://en.wikipedia.org/wiki/C%2B%2B11)中，[构造函数可以调用另一个构造函数重载](http://en.wikipedia.org/wiki/C%2B%2B11#Object_construction_improvement)：

```
class Foo  {
     int d;         
public:
    Foo  (int i) : d(i) {}
    Foo  () : Foo(42) {} //New to C++11
}; 
```

此外，成员也可以像这样初始化。

```
class Foo  {
     int d = 5;         
public:
    Foo  (int i) : d(i) {}
}; 
```

这应该消除创建初始化辅助方法的需要。并且仍然建议不要在构造函数或析构函数中调用任何虚函数，以避免使用任何可能未初始化的成员。

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2011-03-24T16:53:45.940

如果你想作恶，你可以使用就地的“new”操作符：

```
class Foo() {
    Foo() { /* default constructor deliciousness */ }
    Foo(Bar myParam) {
      new (this) Foo();
      /* bar your param all night long */
    } 
}; 
```

似乎对我有用。

**编辑**

正如@ElvedinHamzagic 指出的那样，如果 Foo 包含一个分配内存的对象，则该对象可能不会被释放。这使事情进一步复杂化。

一个更一般的例子：

```
class Foo() {
private:
  std::vector<int> Stuff;
public:
    Foo()
      : Stuff(42)
    {
      /* default constructor deliciousness */
    }

    Foo(Bar myParam)
    {
      this->~Foo();
      new (this) Foo();
      /* bar your param all night long */
    } 
}; 
```

当然，看起来有点不那么优雅。@JohnIdol 的解决方案要好得多。

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2017-10-28T11:53:30.413

简单地说，你不能在 C++11 之前。

C++11 引入了[委托构造函数](http://www.learncpp.com/cpp-tutorial/b-5-delegating-constructors/)：

> ## 委托构造函数
> 
> 如果类本身的名称在成员初始化器列表中显示为类或标识符，则列表必须仅包含一个成员初始化器；这样的构造函数称为委托构造函数，由初始化列表的唯一成员选择的构造函数是目标构造函数
> 
> 在这种情况下，通过重载决议选择目标构造函数并首先执行，然后控制返回到委托构造函数并执行其主体。
> 
> 委托构造函数不能是递归的。
> 
> ```
> class Foo {
> public: 
>   Foo(char x, int y) {}
>   Foo(int y) : Foo('a', y) {} // Foo(int) delegates to Foo(char,int)
> }; 
> ```

请注意，委托构造函数是一个全有或全无的提议；如果一个构造函数委托给另一个构造函数，则调用构造函数的初始化列表中不允许有任何其他成员。如果您考虑一次且仅初始化一次 const/reference 成员，这是有道理的。

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2008-11-21T09:56:18.400

不，在 C++ 中，您不能从构造函数调用构造函数。正如沃伦指出的那样，您可以做的是：

*   使用不同的签名重载构造函数
*   在参数上使用默认值，以提供“更简单”的版本

请注意，在第一种情况下，您不能通过从另一个构造函数调用一个构造函数来减少代码重复。您当然可以有一个单独的、私有/受保护的方法来完成所有初始化，并让构造函数主要处理参数处理。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2011-11-25T00:54:11.947

另一个尚未显示的选项是将您的类拆分为两个，在原始类周围包装一个轻量级接口类，以实现您正在寻找的效果：

```
class Test_Base {
    public Test_Base() {
        DoSomething();
    }
};

class Test : public Test_Base {
    public Test() : Test_Base() {
    }

    public Test(int count) : Test_Base() {
        DoSomethingWithCount(count);
    }
}; 
```

如果您有许多必须调用其“下一级”对应物的构造函数，这可能会变得混乱，但对于少数构造函数，它应该是可行的。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2012-02-20T10:00:51.643

在 Visual C++ 中，您还可以在构造函数中使用此表示法：this->Classname::Classname(parameters of another constructor)。请参见下面的示例：

```
class Vertex
{
 private:
  int x, y;
 public:
  Vertex(int xCoo, int yCoo): x(xCoo), y(yCoo) {}
  Vertex()
  {
   this->Vertex::Vertex(-1, -1);
  }
}; 
```

我不知道它是否适用于其他地方，我只在 Visual C++ 2003 和 2008 中测试过。我想你也可以这样调用**多个**构造函数，就像在 Java 和 C# 中一样。

PS：坦率地说，我很惊讶之前没有提到这一点。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-11-02T00:19:49.997

我建议使用一种`private friend`方法来实现构造函数的应用程序逻辑并由各种构造函数调用。这是一个例子：

假设我们有一个`StreamArrayReader`带有一些私有字段的类：

```
private:
    istream * in;
      // More private fields 
```

我们要定义两个构造函数：

```
public:
    StreamArrayReader(istream * in_stream);
    StreamArrayReader(char * filepath);
    // More constructors... 
```

第二个只是使用第一个（当然我们不想重复前者的实现）。理想情况下，一个人想做类似的事情：

```
StreamArrayReader::StreamArrayReader(istream * in_stream){
    // Implementation
}

StreamArrayReader::StreamArrayReader(char * filepath) {
    ifstream instream;
    instream.open(filepath);
    StreamArrayReader(&instream);
    instream.close();
} 
```

但是，这在 C++ 中是不允许的。出于这个原因，我们可以定义一个如下的私有友元方法，它实现了第一个构造函数应该做的事情：

```
private:
  friend void init_stream_array_reader(StreamArrayReader *o, istream * is); 
```

现在这个方法（因为它是一个朋友）可以访问`o`. 然后，第一个构造函数变为：

```
StreamArrayReader::StreamArrayReader(istream * is) {
    init_stream_array_reader(this, is);
} 
```

请注意，这不会为新创建的副本创建多个副本。第二个变成：

```
StreamArrayReader::StreamArrayReader(char * filepath) {
    ifstream instream;
    instream.open(filepath);
    init_stream_array_reader(this, &instream);
    instream.close();
} 
```

也就是说，*不是让一个构造函数调用另一个构造函数，而是调用一个私人朋友！*

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-11-10T21:18:53.230

这种方法可能适用于某些类型的类（当赋值运算符表现得“好”时）：

```
Foo::Foo()
{
    // do what every Foo is needing
    ...
}

Foo::Foo(char x)
{
    *this = Foo();

    // do the special things for a Foo with char
    ...
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-11-21T09:49:40.923

如果我正确理解您的问题，您是在问是否可以在 C++ 中调用多个构造函数？

如果那是您正在寻找的东西，那么不-那是不可能的。

你当然可以有多个构造函数，每个都有唯一的参数签名，然后在你实例化一个新对象时调用你想要的那个。

您甚至可以在最后拥有一个带有默认参数的构造函数。

但是你可能没有多个构造函数，然后分别调用它们中的每一个。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-01-06T10:52:33.987

当调用构造函数时，它实际上是从堆栈或堆中分配内存。因此，在另一个构造函数中调用构造函数会创建一个本地副本。所以我们正在修改另一个对象，而不是我们关注的对象。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2016-09-09T10:38:09.417

比决定更容易测试:)试试这个：

```
#include <iostream>

class A {
public:
    A( int a) : m_a(a) {
        std::cout << "A::Ctor" << std::endl;    
    }
    ~A() {
        std::cout << "A::dtor" << std::endl;    
    }
public:
    int m_a;
};

class B : public A {
public:
    B( int a, int b) : m_b(b), A(a) {}
public:
    int m_b;
};

int main() {
    B b(9, 6);
    std::cout << "Test constructor delegation a = " << b.m_a << "; b = " << b.m_b << std::endl;    
    return 0;
} 
```

并用 98 std: g++ main.cpp -std=c++98 -o test_1 编译它

你会看见：

```
A::Ctor
Test constructor delegation a = 9; b = 6
A::dtor 
```

所以 ：）

# c++ - 忽略的后果是什么：警告：未使用的参数

> ID：308277
> 
> 赞同：24
> 
> 时间：2008-11-21T09:44:02.527
> 
> 标签：c++, warnings

我正在处理一个 C++ 项目，我注意到我们有许多关于未使用参数的警告。

如果忽略这些警告会产生什么影响？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2008-11-21T09:49:15.387

在以下情况下，带有未使用参数的函数可能会出现真正的错误：

1.  有一个未分配或写入的**输出**参数，导致调用者的值未定义。

2.  参数之一是回调函数指针，您必须调用它而忘记这样做。如果函数中有很多`#ifdef`s，可能会发生。

3.  您声明了一个具有相同名称的局部变量，它隐藏了一个参数，随后在函数中使用了错误的值。

不使用**输入**参数**可能**`void`是无害的，但您可以通过将未使用的输入参数强制转换为（适用于 C 和 C++）在函数开头显式标记未使用的输入参数来减少噪音以查看有用的警告：

```
(void)param1; 
```

或者，

```
#define UNUSED(expr) do { (void)(expr); } while (0)
...

void foo(int param1, int param2)
{
    UNUSED(param2);
    bar(param1);
} 
```

或省略参数名称（仅限 C++）：

```
void foo(int param1, int /*param2*/)
{
    bar(param1);
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2008-11-21T09:47:32.410

如果您有很多对您来说不重要的不重要警告，您可能会忽略有关您刚刚编写的隐藏在它们中间的代码行的重要警告。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2009-01-03T15:26:02.133

对于禁用警告的 g​​cc 特定方法，您可以使用`__attribute__((unused))`like

```
void foo(int a, int b __attribute__((unused))) {

} 
```

To ignore the second parameter. If your program relies on GCC technologies already, you can use that attribute to be 100% safe from that kind of warning.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-21T09:47:06.937

没有任何。除了[编辑]：正如其他人指出的那样，您可能有一个未分配的输出参数。

您应该清理它们，因为在很多情况下，我看到开发人员忽略了“隐藏”在大量警告中的重要警告，而且他们已经习惯了看到警告，以至于他们从来没有注意到它们。我尝试始终保持零警告，并将编译器警告设置为最高级别。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-21T09:47:45.187

这意味着您编写了一个带有参数但不使用参数的函数。它是无害的，但在某些情况下它可能表明存在错误。

通常，您可以通过删除参数名称并使其保持匿名来使此警告静音，但这可能不是可取的，具体取决于未使用参数的原因。

如果它使查找真正的问题变得更加困难，我建议您关闭警告。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-21T10:02:32.757

这取决于您是否打算使用参数。例如

```
const int Size = 12; // intended for use in some other function

char* MakeBuffer(int size)
{
   return new char[Size];
} 
```

在此代码中，未使用“大小”，而是使用了常量“大小”。因此，警告将为您突出显示此类问题。

但是，如果您从未缩进使用该参数，则应该将其从方法签名中删除。除非您需要匹配虚拟方法或函数指针的签名，否则如果是这种情况，则您无法选择删除它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-11-21T10:08:31.307

在 C++ 中，您可以使用默认参数：

```
int sum(int first, int second=0){   // should not give warning
    return first+first;
} 
```

您还可以有额外的论点：

```
int sum(int first, int second){     // should give warning
    first *= 2;
    return first;
} 
```

如果你有一个你没有使用的参数*并且*它不是默认的，你应该得到一个警告，因为你要求程序将额外的值传递给从不引用的堆栈，因此做的工作比它应该做的要多。

也许这意味着您也忘记了部分功能逻辑。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-21T09:49:51.237

如果方法不使用参数，那么出现的第一个问题是，为什么该参数首先是方法签名的一部分。这些警告确实有意义，因为它们所指的是糟糕的设计，而且还有一点开销，每当调用此方法时，此参数都会被压入堆栈，因此，最好是重构方法并删除这样的参数没有任何用处。

话虽如此，除了我提到的一点开销之外，保留这些参数并没有太大的危害。

# .net - 同时实现 IPrincipal 和 IIdentity 是好是坏？

> ID：308278
> 
> 赞同：4
> 
> 时间：2008-11-21T09:44:30.687
> 
> 标签：.net

因为 IPriincipal 具有 IIdentity 属性，在我的 User 类上实现这两个接口是否很好？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-21T14:52:00.347

通常，用户和用户交互的安全上下文是不同的东西，因此如果以通用方式建模，它们应该像 IPrincipal 和 IIdentity 接口那样分开。（您可以想象相同用户可以具有不同角色与系统交互的应用程序。）

在某些应用程序中，这两个概念是相同的，在这种情况下，我认为您可以使用单个类安全地实现这两个接口。如果您不直接通过 IPrincial 和 IIdentity 接口将实现类公开给应用程序逻辑，则尤其如此。如果你保持这种分离，你可以在不破坏应用程序逻辑的情况下随时重构你的类。

您应该记住的另一个方面：通常为用户设置安全上下文比设置身份更昂贵（您需要获取权限等）。然而，在某些情况下，应用程序只是指一个用户，但它不需要具有正确配置的安全上下文。在这些情况下，初始化一个同时用作身份和主体的用户类实例可能是一个性能问题。（当然，您也可以使用其他技术来解决这个问题，而不仅仅是通过拆分课程。）

最后，您还应该考虑是否要使用自己的用户类来实现 IIdentity/IPrincipal 或只是填充 GenericPrincipal/GenericIdentity 实例。这里最重要的事实是，IPrincipal（和 IIdentity）实例必须是可序列化的，因为它们可能会转到其他 AppDomain。在 AppDomains 中设置可以轻松序列化和反序列化的 IPrincipal 实现并不容易，需要格外小心。因此，除非您需要特殊的角色检查，否则我建议使用 GenericPrincipal/GenericIdentity。（在此处查看更多信息：http: [//sontek.vox.com/library/post/re-iprincipal-iidentity-ihttpmodule-serializable.html](http://sontek.vox.com/library/post/re-iprincipal-iidentity-ihttpmodule-serializable.html)）

# c++ - C++ 字符串：[] 与 *

> ID：308279
> 
> 赞同：18
> 
> 时间：2008-11-21T09:46:35.797
> 
> 标签：c++, syntax, reference, pointers

一直在想，用 [] 或 * 声明变量有什么区别？我的看法：

```
char *str = new char[100];
char str2[] = "Hi world!"; 
```

..应该是主要区别，但我不确定你是否可以做类似的事情

```
char *str = "Hi all"; 
```

..既然指针应该引用一个静态成员，我不知道它是否可以？

无论如何，真正困扰我的是知道以下之间的区别：

```
void upperCaseString(char *_str) {};
void upperCaseString(char _str[]) {}; 
```

那么，如果有人能告诉我其中的区别，将不胜感激？我有一种预感，两者可能会被编译成相同的，除非在某些特殊情况下？

泰

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2008-11-21T13:18:02.817

让我们研究一下（对于以下内容，请注意`char const`并`const char`在 C++ 中相同）：

## 字符串文字和 char *

`"hello"`是 6 个 const 字符的数组：`char const[6]`. 与每个数组一样，它可以隐式转换为指向其第一个元素的指针：`char const * s = "hello";`为了与 C 代码兼容，C++ 允许进行另一种转换，否则这种转换将是错误的：`char * s = "hello";`它删除了 const!。这是一个例外，允许编译 C-ish 代码，但不推荐使用`char *`指向字符串文字的点。那么我们有什么用`char * s = "foo";`呢？

`"foo"`-> `array-to-pointer`-> `char const*`-> `qualification-conversion`-> `char *`。字符串文字是只读的，不会在堆栈上分配。您可以自由地使指针指向它们，并从函数中返回该指针，*而不会*崩溃:)。

### 使用字符串字面量初始化数组

现在，什么是`char s[] = "hello";`？这*完全*是另一回事。这将创建一个字符数组，并用 String 填充它`"hello"`。文字没有被指出。相反，它被复制到字符数组中。并且数组是*在堆栈上*创建的。您不能从函数有效地返回指向它的指针。

## 数组参数类型。

如何让你的函数接受一个数组作为参数？您只需将参数声明为数组：

```
void accept_array(char foo[]); 
```

但你忽略了大小。实际上，任何大小都可以，因为它只是被忽略：标准说以这种方式声明的参数将被转换为与

```
void accept_array(char * foo); 
```

### 游览：多维数组

替换`char`为任何类型，包括数组本身：

```
void accept_array(char foo[][10]); 
```

接受一个二维数组，其最后一维的大小为 10。*多维数组的第一个元素是其下一维的第一个子数组*！现在，让我们对其进行改造。它将再次成为指向其第一个元素的指针。因此，实际上它会接受一个指向 10 个字符数组的指针：（删除`[]`in 头，然后只创建一个指向您在头中看到的类型的指针）：

```
void accept_array(char (*foo)[10]); 
```

由于数组隐式转换为指向其第一个元素的指针，因此您只需在其中传递一个二维数组（其最后一维大小为 10），它就会起作用。事实上，*任何*n 维数组都是如此，包括 ; 的特殊情况`n = 1`。

## 结论

```
void upperCaseString(char *_str) {}; 
```

和

```
void upperCaseString(char _str[]) {}; 
```

是一样的，因为第一个只是指向 char 的指针。但请注意，如果您想将字符串文字传递给它（假设它不会更改其参数），那么您应该将参数更改为，`char const* _str`这样您就不会做不推荐使用的事情。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-11-21T10:02:51.677

三种不同的声明让指针指向不同的内存段：

```
char* str = new char[100]; 
```

让 str 指向堆。

```
char str2[] = "Hi world!"; 
```

将字符串放入堆栈。

```
char* str3 = "Hi world!"; 
```

指向数据段。

两个声明

```
void upperCaseString(char *_str) {};
void upperCaseString(char _str[]) {}; 
```

相等，当您尝试在同一范围内声明它们时，编译器会抱怨该函数已经有一个主体。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-21T14:56:29.090

好吧，我留下了两条负面评论。那不是很有用。我已经删除了它们。

*   以下代码初始化一个 char 指针，指向动态分配的内存部分（在堆中）的开始。

```
 char *str = new char[100]; 
```

可以使用 释放此块`delete []`。

*   以下代码在堆栈中创建一个 char 数组，初始化为字符串文字指定的值。

```
 char [] str2 = "Hi world!"; 
```

这个数组可以毫无问题地修改，这很好。所以

```
 str2[0] = 'N';
cout << str2; 
```

应该打印`Ni world!`到标准输出，让某些骑士感觉很不舒服。

*   下面的代码在堆栈中创建一个 char 指针，指向一个**字符串字面**量……可以毫无问题地重新分配指针，但不能修改指向的块（这是未定义的行为；例如，它在 Linux 下会出现段错误。）

```
 char *str = "Hi all";
str[0] = 'N'; // ERROR! 
```

*   以下两个声明

```
 void upperCaseString(char *_str) {};
void upperCaseString(char [] _str) {}; 
```

**对我来说**看起来一样，在你的情况下（你想把一个字符串大写）真的没关系。

然而，这一切都引出了一个问题：你为什么用`char *`C++ 来表达字符串？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-21T13:30:28.640

作为对已经给出的答案的补充，您应该阅读[有关数组与指针的 C 常见问题解答](http://c-faq.com/aryptr/)。是的，它是 C 常见问题解答而不是 C++ 常见问题解答，但是这两种语言在这方面几乎没有实质性区别。

另外，作为旁注，避免使用前导下划线命名变量。这是为编译器和标准库定义的符号保留的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-21T16:18:25.290

还请查看[http://c-faq.com/aryptr/aryptr2.html](http://c-faq.com/aryptr/aryptr2.html) C-FAQ 本身可能被证明是一本有趣的读物。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2008-11-21T10:01:41.103

第一个选项动态分配 100 个字节。

第二个选项静态分配 10 个字节（9 个用于字符串 + nul 字符）。

您的第三个示例不应该工作 - 您正在尝试静态填充动态项目。

至于这个`upperCaseString()`问题，一旦 C 字符串被分配和定义，你可以通过数组索引或指针符号来迭代它，因为数组实际上只是在 C 中包装指针算术的一种方便方法。

* * *

（这是简单的答案——我希望其他人会得到规范之外的权威、复杂的答案:)）

# iphone - 向 App Store 提交 iPhone 应用程序的程序？

> ID：308290
> 
> 赞同：0
> 
> 时间：2008-11-21T09:50:41.563
> 
> 标签：iphone, app-store

是否需要支付 99 美元才能观看视频才能将 iPhone 应用程序提交到 App Store，或者在任何地方都可以免费获得？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-11-21T11:19:21.087

您无需付费即可加入开发者计划并观看视频。登录后，它在视频 → 应用商店和分发中：

*   [https://developer.apple.com/videos/app-store-and-distribution/](https://developer.apple.com/videos/app-store-and-distribution/)

您还可以阅读：

*   [https://developer.apple.com/ios/submit/](https://developer.apple.com/ios/submit/)

如果不支付 99 美元，您就不能在 iPhone 或 iPod touch（包括您自己的）上安装您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-21T11:14:50.503

我假设您指的是注册为 iPhone 开发人员的 99 美元费用？

即使您可以找到视频的副本，您仍然需要支付费用才能将您的应用程序托管在 App Store 上。Apple 对所有这些东西都保持着相当严格的处理，因此如果他们想在 App Store 中销售软件，他们要求所有开发人员进行注册。Apple 还将对您的软件是否可以出售拥有最终决定权。

底线：如果您打算通过 App Store 销售软件，您必须向 Apple 支付 99 美元的费用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2010-02-27T06:11:11.313

99 美元用于注册开发人员，您可以在开发时在您的手机上调试您的 iphone 应用程序，因为我们已经通过企业帐户完成了 iphone 应用程序的音调，这超过 99 美元，但一旦您注册 99 美元，它将为您提供更多帮助 -谢谢

# agile - 在“个人时间”项目中使用 Scrum

> ID：308292
> 
> 赞同：4
> 
> 时间：2008-11-21T09:51:13.700
> 
> 标签：agile, scrum

我正在启动一个个人项目来开发一些开源软件。我想使用 Scrum 作为 PM 流程（因为我喜欢 Product Backlog、优先级排序，如果我能得到它们，那就是燃尽图），但在我看来，我无法获得全部价值，因为我不能一开始要保证我和我的合作者在给定的冲刺期间能够投入工作的时间。

我知道我仍然可以从使用 Scrum 中获得其他好处，但是是否有我不知道的变化或技巧和技术可以让我获得诸如燃尽图和时间盒迭代之类的东西的价值？还是我太有希望了？

TIA。

注册，安德鲁

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-11-21T23:47:57.053

由于这是一个爱好项目，你真的关心截止日期吗？知道 Sprint 之后将完成多少工作，它实际上会给您多少价值？

如果您的答案是否定的，您可能希望将看板方法作为替代方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-22T13:46:46.267

我考虑了软件开发中的敏捷性，然后回到提供真正实用性的三个方面：

*   已知的待办任务积压
*   定期有机会公开讨论正在处理的任务的现状和需要克服的障碍
*   团队管理的迭代，导致最终完整产品的工作子集

在工作环境中，比如我的朝九晚五，采用这种方法很容易。您的开发人员每周至少要在那里工作 40 小时，因此参与敏捷实践（例如 Scrum）几乎没有障碍。

在“下班后”设置中，参与者的承诺水平通常会有所不同。这就是生活。所以你用你所拥有的东西工作。如果马特对这个项目很兴奋，但他的日程安排很忙，而且他可以投入到这个项目上的小时数会有一点波动，那又如何呢？如果他“参与”并且认真对待他愿意在项目上投入的时间，那么这只是一种相应地计划迭代的方式。

不过，我个人不会对此感到困惑。最后，Scrum 或您采用的任何“敏捷”过程应该是达到目的的手段，而不是目的本身。特别是在条件与朝九晚五的世界不同的环境中，您需要灵活地制定迭代计划。你仍然计划你的工作和你计划的工作并参与定期的沟通和“我们今天在哪里？” 锻炼让每个人都参与其中。

目标是可靠的软件——如果你不能从 Scrum 的特定方面或任何过程中获得大量实用程序，那又如何？无论如何，您可能会开发一个混合流程。我不会太担心获得诸如燃尽图和速度之类的东西。老实说，我认为需要更多地关注正在开发的高质量软件，而不是可能在下一次迭代或之后的迭代中帮助的工件。这是我的意见。

我的建议是使用有效的东西并保持简单。积压工作很棒，每天与每个人接触的“会议”——即使这是由 IM 完成的虚拟会议——才是真正有价值的地方。爱好或副业是很难承诺的事情，我祝你一切顺利。但要接受这样一个事实，即它可能不像朝九晚五的过程那样有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-21T12:52:16.703

在书本设置中，您不会使用实时来计算燃尽图，而是使用故事点。在几个 sprint 之后，您将看到平均速度，因此能够生成燃尽图并使用此速度来提交 sprint 项目。

我强烈不同意[沃伦斯](https://stackoverflow.com/questions/308292/using-scrum-on-a-personal-time-project#308348)在缩小点上的帖子。我看到的主要问题是两个 sprint 之间的速度变化很大，因为这只是一种爱好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-22T13:05:01.017

当团队在每次迭代中投入的时间变化太大时，速度就无法真正帮助计划 Sprint，因为它也会变化，尤其是在开始时。但是，平均速度可能会在几个 Sprint 之后开始稳定。

尽管如此，燃尽图仍然很有用，因为它们显示了当前迭代的准确状态。

您还将利用敏捷过程带来的**估计“校准” 。**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-06T01:22:05.250

对于此类项目，Scrum 的问题更多地在于 Scrum 旨在支持的开发团队结构类型，特别是团队在日常站立会议中的托管。当您不在同一个物理位置时，很难举行每日站立会议。此外，我怀疑你的团队中是否会有产品负责人，你既是 Scrum Master 又是开发人员。最重要的是，您和您的其他开发人员将在不同的时间和日子里工作，可能根本没有任何工作完成。这可能会使团队的协调变得困难。

每个项目，无论开发方法如何，都应该很好地了解需要完成的工作（产品待办事项）、短期内需要完成的工作（冲刺待办事项）以及完成这些任务需要多长时间，这样您才能拥有对项目需要多长时间的合理估计（项目速度和燃尽）。您可能会遇到问题的是 Scrum 的其他部分 - 没有在同一地点参加会议、缺少产品负责人、使用公告板显示 sprint 状态等。

这并不是说您不能修改 Scrum 流程以适应您的目的。例如：

*   每周在规定的时间举行几次视频会议/Skype 通话/IM 会议，即使什么都没做。对于这种类型的项目，每天可能过于频繁，但每周三次可能对您的团队有用。
*   使用基于 Web 的问题管理系统，这样您就可以看到产品待办事项，知道 sprint 待办事项是什么，并知道人们在做什么
*   已设定冲刺长度（例如 3-4 周），以便开发人员能够感知动力并了解最后期限
*   了解在开发上花费了多少时间，这样您就可以计算出您的项目速度以及在下一个 sprint 中可以实现什么。这可能很难，因为可用时间会因冲刺而异。
*   在每个 sprint 之后进行回顾，这样您就可以根据进展顺利和不顺利来调整您的开发过程。如果可能的话，这将是在同一地点见面的理想时间。

从本质上讲，Scrum 主要是关于有效的沟通，所以如果你做对了，你应该能够让它的修改版本为你工作。请记住，沟通效率会降低

*   亲自
*   视频会议
*   Skype/电话/语音通话
*   即时通讯
*   电子邮件

所以尽量使用最有效的方法来开会。

# c# - 为什么 C# 在用 VB.net 编写的类中附加 get 属性？

> ID：308294
> 
> 赞同：1
> 
> 时间：2008-11-21T09:52:15.507
> 
> 标签：c#, vb.net

如果我们在 VB.NET 中创建任何类并尝试在 C# 中通过创建该类的对象来访问其属性。get_ 附加在属性中。谁能解释一下原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-21T10:13:03.453

哦，可能是因为整体：

*   `get{}`
*   `set{}`

业务实际上相当于：

*   `get_PropertyName`
*   `set_PropertyName`

在 IL 代码中。我们编写的整个属性内容（在`VB`or中`C#`）只是语法糖。

# .net - 添加网络参考

> ID：308295
> 
> 赞同：2
> 
> 时间：2008-11-21T09:53:47.530
> 
> 标签：.net, asmx

右键单击解决方案资源管理器中的引用时“缺少添加 web 引用”为什么它在我的机器中丢失了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-21T10:02:55.330

尝试“添加服务参考” -> 高级 -> 添加 Web 参考

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-05T20:30:24.950

添加 Web 引用的另一种方法是单击解决方案资源管理器中的项目，然后转到“项目”菜单，然后选择“添加 Web 引用”。

# windows - 如何通过命令行设置windows服务用户名和密码

> ID：308298
> 
> 赞同：44
> 
> 时间：2008-11-21T09:54:49.683
> 
> 标签：windows, service, command-line

使用**sc**命令我们可以查询、启动、停止 windows 服务。
例如：

```
sc query "windows service name" 
```

**sc config**命令改变了服务的配置，但是不知道怎么用。

有人能告诉我如何为任何 Windows 服务设置用户名和密码吗？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2008-11-21T10:04:52.533

这有效：

```
sc.exe config "[servicename]" obj= "[.\username]" password= "[password]" 
```

其中每个 [括号] 项目都替换为真正的参数。（保留引号，但不要保留括号。）

请记住：

*   上例中的间距很重要。 `obj= "foo"`是正确的; `obj="foo"`不是。
*   '。' 是本地计算机的别名，如果您愿意，可以在那里指定域（或本地计算机名称）。
*   在服务启动之前不会验证密码
*   如上所述引用您的参数。你有时可以不用引号，但祝你好运。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-29T16:30:00.673

在 PowerShell 中，“sc”命令是 Set-Content cmdlet 的别名。您可以使用以下语法解决此问题：

```
sc.exe config Service obj= user password= pass 
```

指定 .exe 扩展名，PowerShell 绕过别名查找。

高温高压

# data-structures - 汇编器中数据结构的好库/库

> ID：308300
> 
> 赞同：0
> 
> 时间：2008-11-21T09:55:39.710
> 
> 标签：data-structures, assembly

汇编程序中的 x86（或其他）标准数据结构（链接列表、数组列表、队列、堆栈等）是否有任何好的库（最好带有注释源）？我不喜欢重新发明（和调试！）轮子......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-29T13:41:05.420

为什么不直接找到一个好的 C 库并从您的 asm 中调用它呢？

或者，如果您需要“内联”功能：

*   将要使用的函数编译成 Hello World 程序。
*   反汇编程序。
*   将程序集重写为 asm/预处理器宏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-08T14:53:03.473

您最好在特定于汇编程序的组之一中询问，而不是在此处询问。尝试：

*   最近发布的[MASM32 SDK v10](http://www.masm32.com/)提供了[MASM 论坛](http://www.masm32.com/board/index.php)的链接。
*   WinAsm[网站](http://www.winasm.net/)。

[谷歌说微软的MASM 示例](http://msdn.microsoft.com/en-us/library/t13a3526(VS.80).aspx)页面上有一些数据结构演示，但我没有去寻找。

另一种可能性是查看[HLA](http://webster.cs.ucr.edu/AsmTools/HLA/index.html)，高级汇编语言。部分内容是，

> 现在，您可以享受高级语言和低级语言的所有好处，所有这些都整合到一种语言中！HLA，高级汇编程序让您编写真正的低级代码，同时享受高级语言编程的好处。不要让名字欺骗你；你可以用 HLA 做任何你可以用传统的低级汇编器做的事情。存在所有相同的指令，存在所有相同的低级编程工具。HLA 和低级汇编程序之间的区别在于，当不需要低级编程范例时，您不会被困住。使用 HLA 时，您的工作效率会飙升；编写比使用高级语言更高效的程序。

IIRC，他们对数据结构的支持非常好。

# jquery - 使用 jQuery 从 asp:RadioButtonList 读取选定的值

> ID：308301
> 
> 赞同：44
> 
> 时间：2008-11-21T09:56:12.737
> 
> 标签：jquery, asp.net, event-handling, radio-button

我有类似于以下的代码...

```
<p><label>Do you have buffet facilities?</label>
  <asp:RadioButtonList ID="blnBuffetMealFacilities:chk" runat="server">
    <asp:ListItem Text="Yes" Value="1"></asp:ListItem>
    <asp:ListItem Text="No" Value="0"></asp:ListItem>
  </asp:RadioButtonList></p>
<div id="HasBuffet">
  <p><label>What is the capacity for the buffet?</label>
  <asp:RadioButtonList ID="radBuffetCapacity" runat="server">
    <asp:ListItem Text="Suitable for upto 30 guests" value="0 to 30"></asp:ListItem>
    <asp:ListItem Text="Suitable for upto 50 guests" value="30 to 50"></asp:ListItem>
    <asp:ListItem Text="Suitable for upto 75 guests" value="50 to 75"></asp:ListItem>
    <asp:ListItem Text="Suitable for upto 100 guests" value="75 to 100"></asp:ListItem>
    <asp:ListItem Text="Suitable for upto 150 guests" value="100 to 150"></asp:ListItem>
    <asp:ListItem Text="Suitable for upto 250 guests" value="150 to 250"></asp:ListItem>
    <asp:ListItem Text="Suitable for upto 400 guests" value="250 to 400"></asp:ListItem>
  </asp:RadioButtonList></p>
</div> 
```

我想在收音机列表 blBuffetMealFacilities:chk 更改客户端并在 jQuery 的 HasBuffet div 上执行向下滑动功能时捕获一个事件。创建这个的最佳方法是什么，请记住页面上有几个类似的部分，我希望根据广播列表中的“是”或“否”答案来揭示问题。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2010-05-21T03:59:54.347

检索 RadioButtonList1 的检查值的简单方法是：

```
$('#RadioButtonList1 input:checked').val() 
```

蒂姆编辑：

其中`RadioButtonList1`必须是 RadioButtonList 的 ClientID

```
var rblSelectedValue = $("#<%= RadioButtonList1.ClientID %> input:checked"); 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2008-11-21T10:07:37.083

这：

```
$('#rblDiv input').click(function(){
    alert($('#rblDiv input').index(this));
}); 
```

将为您提供单击的单选按钮的索引（我认为，未经测试）（请注意，您必须将 RBL 包装在 #rblDiv 中

然后，您可以使用它来显示相应的 div，如下所示：

```
$('.divCollection div:eq(' + $('#rblDiv input').index(this) +')').show(); 
```

这是你的意思吗？

编辑：另一种方法是给 rbl 一个类名，然后去：

```
$('.rblClass').val(); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2011-10-05T19:58:31.213

这对我有用...

```
<asp:RadioButtonList runat="server" ID="Intent">
  <asp:ListItem Value="Confirm">Yes!</asp:ListItem>
  <asp:ListItem Value="Postpone">Not now</asp:ListItem>
  <asp:ListItem Value="Decline">Never!</asp:ListItem>
</asp:RadioButtonList> 
```

处理程序：

```
$(document).ready(function () {
  $("#<%=Intent.ClientID%>").change(function(){
   var rbvalue = $("input[name='<%=Intent.UniqueID%>']:radio:checked").val();

   if(rbvalue == "Confirm"){
    alert("Woohoo, Thanks!");
   } else if (rbvalue == "Postpone"){
    alert("Well, I really hope it's soon");
   } else if (rbvalue == "Decline"){
    alert("Shucks!");
   } else {
    alert("How'd you get here? Who sent you?");
   }
  });
}); 
```

重要部分： **$("input[name='<%=Intent.UniqueID%>']:radio:checked").val();**

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-03T06:42:49.207

据我说，它会工作得很好......

试试这个

```
 var GetValue=$('#radiobuttonListId').find(":checked").val(); 
```

* * *

> 要存储在 GetValue(Variable) 上的 Radiobuttonlist 值。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2011-06-10T07:23:07.687

单选按钮列表而不是单选按钮会创建唯一的 id 标签 name_0、name_1 等。测试哪个被选中的简单方法是分配一个 CSS 类，例如

```
var deliveryService;
$('.deliveryservice input').each(function () {
    if (this.checked) {
        deliveryService = this.value
    } 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-10-02T13:04:56.793

试试这个：

```
$("input[name='<%=RadioButtonList1.UniqueID %>']:checked").val() 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-02T08:22:24.580

以下是我们最终创建的代码。先简单解释一下。我们使用“q_”作为环绕单选按钮问题列表的 div 名称。然后我们对任何部分都有“s_”。以下代码循环遍历问题以找到选中的值，然后在相关部分执行滑动操作。

```
var shows_6 = function() {
  var selected = $("#q_7 input:radio:checked").val();
  if (selected == 'Groom') {
    $("#s_6").slideDown();
  } else {
    $("#s_6").slideUp();
  }
};
$('#q_7 input').ready(shows_6);
var shows_7 = function() {
  var selected = $("#q_7 input:radio:checked").val();
  if (selected == 'Bride') {
    $("#s_7").slideDown();
  } else {
    $("#s_7").slideUp();
  }
};
$('#q_7 input').ready(shows_7);
$(document).ready(function() {
  $('#q_7 input:radio').click(shows_6);
  $('#q_7 input:radio').click(shows_7);
});

<div id="q_7" class='question '><label>Who are you?</label> 
  <p>
    <label for="ctl00_ctl00_ContentMainPane_Body_ctl00_ctl00_chk_0">Bride</label>
    <input id="ctl00_ctl00_ContentMainPane_Body_ctl00_ctl00_chk_0" type="radio" name="ctl00$ctl00$ContentMainPane$Body$ctl00$ctl00$chk" value="Bride" />
  </p> 
  <p>
    <label for="ctl00_ctl00_ContentMainPane_Body_ctl00_ctl00_chk_1">Groom</label>
    <input id="ctl00_ctl00_ContentMainPane_Body_ctl00_ctl00_chk_1" type="radio" name="ctl00$ctl00$ContentMainPane$Body$ctl00$ctl00$chk" value="Groom" />
  </p> 

</div> 
```

以下允许我们将问题设为强制性...

```
<script type="text/javascript"> 
var mandatory_q_7 = function() {
  var selected = $("#q_7 input:radio:checked").val();
  if (selected != '') {
    $("#q_7").removeClass('error');
  }
};
$(document).ready(function() {
    $('#q_7 input:radio').click(function(){mandatory_q_7();});
});
</script> 
```

这是实际显示/隐藏层的示例

```
<div class="section" id="s_6"> 
    <h2>Attire</h2> 
    ...
</div> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-03T17:13:36.480

试试下面的代码：

```
<script type="text/javascript">
    $(document).ready(function () {

        $(".ratingButtons").buttonset();

    });
 </script>

<asp:RadioButtonList ID="RadioButtonList1" RepeatDirection="Horizontal" runat="server"
            AutoPostBack="True" DataSourceID="SqlDataSourceSizes"     DataTextField="ProdSize"
            CssClass="ratingButtons" DataValueField="_ProdSizeID" Font-Size="X-Small" 
            ForeColor="#666666">
</asp:RadioButtonList> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-01-27T12:35:51.860

为什么这么复杂？

```
$('#id:checked').val(); 
```

会工作得很好！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-20T11:22:59.160

我找到了一个简单的解决方案，试试这个：

```
var Ocasiao = "";    
$('#ctl00_rdlOcasioesMarcas input').each(function() { if (this.checked) { Ocasiao = this.value } }); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2010-09-17T10:14:26.957

Andrew Bullock 解决方案工作得很好，我只是想向您展示我的解决方案并添加警告。

//效果很好

```
$('#<%= radBuffetCapacity.ClientID %> input').click(function (e) {
   var val = $('#<%= radBuffetCapacity.ClientID %>').find('input:checked').val();
   //Do whatever
}); 
```

//警告 - 适用于 Firefox 但不适用于 IE8 .. 在注意到它在 IE8 中不起作用之前使用了一段时间......当在一个浏览器中使用 jQuery 时，它习惯于在所有浏览器中工作。

```
$('#<%= radBuffetCapacity.ClientID %>').change(function (e) {
   var val = $('#<%= radBuffetCapacity.ClientID %>').find('input:checked').val();
   //Do whatever
}); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2011-07-15T14:44:30.807

我投票支持 Vinh 的答案以获得价值。

如果需要找到对应的标签，可以使用这段代码：

`$('#ClientID' + ' input:checked').parent().find('label').text()`

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-01-21T17:16:35.053

对于我的场景，我的 JS 位于一个单独的文件中，因此使用 ClientID 响应输出是不利的。令人惊讶的是，解决方案就像在 RadioButtonList 中添加一个 CssClass 一样简单，这是我在[DevCurry上发现的](http://www.devcurry.com/2011/01/selected-value-of-aspnet.html)

以防万一该解决方案消失，添加一个类到您的单选按钮列表

```
<asp:RadioButtonList id="rbl" runat="server" class="tbl">... 
```

正如文章所指出的，当单选按钮列表被渲染时，类“tbl”被附加到周围的表中

```
<table id="rbl" class="tbl" border="0">
<tr>... 
```

现在由于附加了 CSS 类，您可以根据 css 类选择器在表中引用 input:radio 项目

```
$(function () {
            var $radBtn = $("table.tbl input:radio");
            $radBtn.click(function () {
                var $radChecked = $(':radio:checked');
                alert($radChecked.val());
            });
        }); 
```

同样，这避免了使用上面提到的“ClientID”，我发现我的场景很混乱。希望这可以帮助！

# windows - Windows 版 Safari 和 Mac 版 Safari 的区别

> ID：308305
> 
> 赞同：26
> 
> 时间：2008-11-21T09:58:03.920
> 
> 标签：windows, macos, testing, browser, safari

从开发人员的角度来看，Mac 版 Safari 和 Windows 版 Safari 有什么区别？

我认为它归结为评估之间的差异（如果我遗漏了什么，请更正）：
- 布局渲染
- Javascript 行为

最后要做的决定是：
开发人员能否仅在 Safari Windows 上进行测试（知道我们不能错过重要的错误）？

谢谢，JB

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2008-11-21T10:10:18.840

就渲染和 JavaScript 而言，没有区别。不同的是用于浏览器本身的底层 UI 库，但页面渲染是相同的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-11-26T20:46:27.323

Mac 和 Windows Safari 之间的字体渲染可能不同，因为系统通常具有不同的字体。只要您的页面可以优雅地处理丢失的字体或不同的字体大小，它应该没问题。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2010-10-24T02:07:52.770

Safari 和 Windows 之间的样式表呈现显着不同。要查看这一点，请尝试创建一个包含 z-index 为 -1 的元素的页面。Windows 版本将正常运行，Mac 版本不允许您选择元素。相信我，我浪费了大约三个小时试图通过反复试验来弄清楚为什么一个页面可以在一个系统中工作而在另一个系统中不能工作。最糟糕的是，当 Safari 无法正确渲染某些内容时，它会在没有任何迹象的情况下这样做。您必须逐行调试，这是一种可怕的体验。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-09-18T12:00:03.883

我还在 CSS 繁重的网站上看到了 Safari for Windows 中不存在于 Mac 版 Safari 中的问题。不记得具体的，但他们在那里。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-10-14T22:47:52.483

我目前遇到一个问题，即博客中的浮动图像以及围绕图像的文本无法在 OS X 中正确填充；在 Windows 中工作正常。基本上，我添加了填充以使图像向左或向右对齐，以使图像的边缘与帖子文本的边缘具有相同的偏移量；在 OS X 上，图像会超出文本的边缘。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-21T15:45:25.363

我现在正在处理的网站在 safari for mac 中存在问题，而 safari 3 或 4 for windows 中没有。我这辈子都想不通。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-02-17T16:08:25.810

从 javascript 调用 java 抛出：

```
java.net.MalformedURLException：没有协议：
    在 java.net.URL.（未知来源）
    在 java.net.URL.（未知来源）
    在 java.net.URL.（未知来源）
    在 sun.plugin.liveconnect.SecureInvocation.checkLiveConnectCaller（未知来源）
    在 sun.plugin.liveconnect.SecureInvocation.access$000（未知来源）
    在 sun.plugin.liveconnect.SecureInvocation$2.run（未知来源）
    在 java.security.AccessController.doPrivileged（本机方法）
    在 sun.plugin.liveconnect.SecureInvocation.CallMethod（未知来源）
```

在 Safari 窗口上，但不是 safari mac。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-30T08:13:35.243

只是想添加我在 Safari 中遇到的这种体验。我们的开发人员仍会对此进行研究，但对我们来说不是高优先级，因为与 Mac 不同，Windows Safari 在我们的用户群中并不多。但我认为它与其中一个（或两者）有关——Apple 对 Safari 的实际浏览器低级实现，和/或 javascript 差异。

我们的网站最近实现了一个 HTML5 多文件上传器。单个文件上传在两个版本的 Safari 上都能正常工作。但是当上传多个文件时，它在 Windows 上失败了。我们有两个不同的上传客户端和用于上传者的端点（想想 A/B 测试流程），其中一个提供了更多的细节，这些细节可能会也可能不会指向问题的原因。在其中一个客户端和端点上，客户端会将要上传的文件名和文件大小的详细信息（作为 JSON 数组对象）发送到服务器端点（如通过 Web 检查器所见）。在它工作的 Mac 上，文件大小是有效的，在 Windows 上，它们是 0 字节。

我认为上传器是基于 JQuery 或其他一些 JS 库的。但我不是开发人员，所以不能确定。但我有预感这个问题超出了 JS 库......

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-05-11T15:15:57.500

我在 Windows XP 的 Safari 中遇到了弹出窗口阻止程序的问题。我猜这个拦截器不接受用户点击了一个 Flash 链接，然后触发了一个打开窗口的 JavaScript。不过，它确实在 OS X 中的其他主要浏览器和 Safari 中工作。Chrome 在 XP 中也阻止了我的窗口，但在 OS X 或 Ubuntu 中没有。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2011-02-10T23:03:37.300

在 Mac Safari 中，我可以使用 file:/// 协议执行跨脚本 ajax，但在 Windows Mac 中，我无法做到这一点。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-05-02T14:19:51.613

我正在一个具有非常标准布局的网站上工作。我有一个包含其他 div 的盒子。它适用于所有主流浏览器，从 IE6+、FF3+ 等。在 OSX 上的 Safari 5 上，该框完全位于左侧，位于我网站的边界之外。在windows的同一个safari版本上，没问题。我要疯了。

# c++ - 在 Visual Studio 2005 C++ 中设置文件版本号

> ID：308307
> 
> 赞同：14
> 
> 时间：2008-11-21T09:59:05.460
> 
> 标签：c++, visual-studio, visual-c++-2005

谁能指出正确的方向如何使用我们的 C++ 控制台项目配置 Visual Studio 2005 我们如何在文件属性的详细信息部分中包含“文件版本”。

我试过资源文件没有任何运气。这是一个 C++ 项目，只是为了澄清，非常感谢您回复 C# 建议的人。

提前致谢。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2008-11-21T10:20:58.227

如果您在谈论非托管 c++，则需要将版本资源添加到项目中。

右键单击项目，选择添加 - 资源...。选择版本并按新建。在那里你可以输入你需要的所有信息。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-11-21T10:38:28.953

`VS_VERSION_INFO`您的资源 (*.rc) 文件中必须有一个部分可以编译到您的项目中。

在 Visual Studio 2005 解决方案资源管理器中，打开 C++ 项目的上下文菜单并选择添加、资源。

标记版本并单击“新建”。

根据需要填写字段并保存文件。

建造。

现在您的项目输出有一个 FileInfo 资源。

请注意，Windows Vista 不会在资源管理器上下文菜单的“详细信息”选项卡中显示所有可用的版本信息。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-11-21T10:37:41.670

对于 c++ 项目，我使用[StampVer](http://blog.dixo.net/downloads/stampver-win32-version-resource-stamping/)并将其称为构建后操作，包括签入/签出版本控制的版本控制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-21T10:17:08.467

除非您有充分的理由让您的文件版本与内部程序集的版本不同，否则我认为单独提供**AssemblyVersion是一个更好的主意。**如果您不指定**AssemblyFileVersion**，它将自动获得相同的值，因此您可以直接在文件的属性中查看程序集的版本。

优点是您可以使用通配符并允许版本自动递增，以便每次编译库时都会获得不同的构建和/或修订号。据我所知，这个技巧不适**用于**AssemblyFileVersion **，**所以你必须手动增加它。

当然，所有这些仅适用于您编写 .NET 代码的情况。您是否有机会谈论使用非托管代码的项目？

# excel - Excel 的 CSV，包括前导零和逗号

> ID：308324
> 
> 赞同：28
> 
> 时间：2008-11-21T10:05:58.457
> 
> 标签：excel, csv

我想生成一个 CSV 文件供用户使用 Excel 打开它。

如果我想转义值中的逗号，我可以将其写为“640,480”。

如果我想保留前导零，我可以使用 =“001234”。

但是，如果我想在值中同时保留逗号和前导零，则写作 ="001,002" 将被拆分为两列。似乎没有解决方案来表达正确的数据。

有什么方法可以在 Excel 的 CSV 中表达**001、002吗？**

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-05-02T05:16:06.180

肯特弗雷德里克的答案包含解决方案：

```
  "=""001,002"""
```

（我很想把它作为一个单独的答案发布，因为从肯特的回答中不清楚它是一个有效的 Excel 解决方案。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-11-21T10:25:02.320

在您的数据上放置一个前缀字符串：

```
 "N001,002","N002,003" 
```

（只要该前缀不是 E ）

上面的表示法（至少在 OpenOffice 中）解析为总共 2 列，正确存储了 N001,002 个字节。

CSV 规范说 , 在引号字符串中是允许的。

此外，来自经验的警告：确保您也使用电话号码执行此操作。Excel 会将电话号码解释为浮点数并将它们保存为科学计数法 :/ ，而 1.800E10 并不是一个真正好的电话号码。

在 OpenOffice 中，这个 RawCSV 块也按预期解码：

```
 "=""001,002""","=""002,004""" 
```

IE：

```
 $rawdata = '001,002'; 
   $equation = "=\"$rawdata\"";
   $escaped = str_replace('"','""',$equation); 
   $csv_chunk = "\"$escaped\"" ; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-11-21T10:16:10.560

做

```
"""001,002""" 
```

我通过键入“001,002”然后在 Excel 中另存为 CSV 发现了这一点。如果这不是您想要的（您不需要引号），这可能是您找到所需内容的好方法。

如果您愿意，另一个选项可能是使用制表符分隔的文本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-24T06:59:03.187

我博客的一位读者找到了一个解决方案，="001" & CHAR(44) & "002"，在我的机器上似乎可行！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-07-28T09:05:27.387

很老的线程，但你为什么不在你的值之后添加空格。然后它将被视为字符串，并且不会去除前导零。

“001,002”。“”

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-03-08T10:04:44.287

由于没有人提到它，因此认为在这篇旧帖子中值得一提。

如果`\t`在数字前添加水平制表符，则 MS Excel 也会显示前导零。并且制表符不会显示在 Excel 工作表中。即使它被双引号包围。(铁 `\"\t001,002\"`)

`\0`与在此类数字之前放置又名 NULL相比，它在 Notepad++ 中看起来也更好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-01T15:42:23.397

我正在摆弄 CSV to Excel（我使用 PHP 来创建 CSV，但我想这个解决方案适用于任何语言。当您发现前导字符（例如 + 、 - 或 0 正在消失时，使用`chr(13)`as创建 CSV）一个前缀。这是一个不可打印的字符，它对我的​​ Excel Office 2010 版本有奇效。我尝试了其他不可打印的字符，但没有运气。

所以我使用 Chirp Internet 解决方案，但用我的前缀进行了调整：

```
if (preg_match("/^0/", $str) || preg_match("/^\+?\d{8,}$/", $str) || preg_match("/^\d{4}.\d{1,2}.\d{1,2}/", $str)) {
    $str = chr(13)."$str";
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-10-15T05:34:27.547

If you are using "Content-Disposition" and exporting from asp to excel using HTML tags,then you have to add "style='mso-number-format:\@;'" to that tag and making it to accept only Text values ,thereby leading zeroes omission will be avoided,If Forward slash"\" is accepted use double forward slash "\"

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-11-21T10:27:54.483

更多地查看 Excel 电子表格，它看起来您想要的内容无法使用 CSV 完成。

该站点[http://office.microsoft.com/en-us/excel/HP052002731033.aspx](http://office.microsoft.com/en-us/excel/HP052573861033.aspx?pid=CH062527981033)说“如果单元格显示公式而不是公式值，则公式将转换为文本。所有格式、图形、对象和其他工作表内容丢失了。欧元符号将转换为问号。”

但是，您可以更改加载方式以获得所需的结果。请参阅此网页： [Microsoft 导入文本文件](http://office.microsoft.com/en-us/excel/HP052573861033.aspx?pid=CH062527981033)。

关键是选择导入外部数据-导入数据-文本文件，下一步，下一步，然后在列数据格式下勾选“文本”。这将防止它被解释为数字，并丢失格式。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-04-06T18:29:21.917

这很简单，使用 Excel 的**Power Query**功能可以执行分步转换。

原始文件：

[![在此处输入图像描述](https://i.stack.imgur.com/Uf7wB.jpg)](https://i.stack.imgur.com/Uf7wB.jpg)

添加自定义列：

[![在此处输入图像描述](https://i.stack.imgur.com/67qsw.jpg)](https://i.stack.imgur.com/67qsw.jpg)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-01-04T19:43:37.937

Excel 根据内容对 CSV 列使用默认格式。因此，如果您在 csv 中有 001，excel 会自动将其变为 1。

将 csv 文件中的前导零保留在 excel 中的唯一方法是将 csv 文件的扩展名更改为 .txt，然后打开 excel，单击打开，选择 txt 文件，您将看到文本导入向导. 选择您的 csv 格式（以逗号分隔），然后确保选择“文本”作为格式。

就是这样，现在您可以将以前的 csv 数据导出到任何其他数据，同时保留前导零。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-09-19T15:46:23.743

在所有当前 Excel 版本或 OS X 上的 Numbers 应用程序中，所有建议的答案现在似乎都不适合我（"=""blahblah""" 和其他人）。

我发现通过摆弄来工作的唯一解决方案是在字符串的开头添加一个转义的空字符（在基于 PHP 或 C 的语言中是 \0 ）。打开计算表时，所有内容都按原样处理，无需软件计算或处理。

```
echo "\0" . $data; 
```

# asp.net-mvc - 何时以及为什么要考虑使用 asp.net MVC？

> ID：308325
> 
> 赞同：7
> 
> 时间：2008-11-21T10:06:12.170
> 
> 标签：asp.net-mvc, webforms

最近我注意到很多关于 asp.net MVC 的讨论，但是我还没有看到关于何时、何地或为什么要在 WebForms 上使用它的清晰或令人信服的描述。

假设我想构建一个小型 Web 应用程序，允许人们在线宣传一些商品。该网站将有 4 个用例：

*   搜索广告
*   查看列表
*   查看项目
*   放置广告

让我们假设：

*   我对单元测试我的控制器不是特别感兴趣。该页面将正确呈现项目列表，或者不会。
*   我对更多地控制 HTML 标记感兴趣。
*   我对仅仅为了它而使用最新的嗡嗡声技术不感兴趣。
*   我有兴趣使用在最终解决方案的生产力、性能、可维护性和简单性方面最适合工作的工具。
*   我不想为了得到一些简单的工作而不得不解决一堆细微差别。

所以，我的问题是：

*   两种模型之间的根本区别是什么？
*   在哪种情况下，一种比另一种更好？
*   什么是 asp.net MVC 的陷阱（我知道 WebForms 的陷阱）
*   对于我们的示例应用程序，使用 asp.net MVC 而不是 WebForms 可以获得什么？
*   对于我们的示例应用程序，如果使用 asp.net MVC 而不是 WebForms，我会失去什么？
*   在同一个小型应用程序中混合和匹配模型是否可行？

感谢任何花时间提供答案的人。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-11-26T00:51:24.910

> *   两种模型之间的根本区别是什么？

WebForms 试图模仿 WinForms 开发，允许您重用大量预制控件，并通过隐藏的 _VIEWSTATE 机制伪造 Web 应用程序状态。

MVC 是一种旨在帮助您分离数据（模型）、业务逻辑（控制器）和表示（视图）的模式。它更符合 Web 的真实性质：RESTful URL，无状态。

> *   在哪种情况下，一种比另一种更好？

在我看来，对于大量使用控件的 Intranet 应用程序，WebForms 在减少开发时间方面很有用，因为借助设计器，您可以非常快速地创建 UI 并让框架自动管理应用程序的状态。

对于任何其他项目，尤其是公共网站，即使是小型项目，我认为 MVC 是要走的路。

> *   什么是 asp.net MVC 的陷阱（我知道 WebForms 的陷阱）

我想说有一些学习曲线可以完全理解 MVC 模式及其功能。此外，由于该框架仍处于 BETA 阶段，您可以预期 API 在发布前会经历一些细微的变化。

由于 JavaScript 在 MVC 中对您不可见，因此如果您不熟悉它，也需要一些时间来学习。jQuery 极大地简化了这一点。

> *   对于我们的示例应用程序，使用 asp.net MVC 而不是 WebForms 可以获得什么？

您将获得对 HTML 标记和 Javascript 行为的更好控制、更清晰的关注点分离和一些易于测试的代码库（即使您似乎对单元测试不感兴趣）。

> *   对于我们的示例应用程序，如果使用 asp.net MVC 而不是 WebForms，我会失去什么？

您将失去构建页面和应用程序状态管理的“拖放”快速方式。

> *   在同一个小型应用程序中混合和匹配模型是否可行？

在某些方面，是的，它似乎。

我建议观看Phil Haack 的[演讲](http://channel9.msdn.com/pdc2008/PC21/)，他对框架进行了很好的概述，并邀请 Jeff Atwood 谈论他如何使用它构建 StackOverflow。

他解释了 SO 如何将一些 WebForms 控件用于 CAPTCHA，这些控件将自己呈现到视图中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-22T17:11:20.440

主要区别在于 MVC 更像是其他编程世界使用的“常规”Web 开发，而标准 ASP.NET 旨在让 Windows 开发人员轻松成为 Web 开发人员。我通过学习 Ruby on Rails 学习了 Web 编程，而 MVC 似乎正在成为 Rails 的 .NET 版本。

与常规的 ASP.NET 相比，MVC 更注重标准合规性、不显眼的 javascript 和关注点分离。您需要了解 HTML 和 CSS 如何协同工作。当你掌握 MVC 时，你会学到更多的 javascript。对我来说，MVC 的最大优势之一是您可以使用 jQuery 比在常规 ASP.NET 中更轻松、更好地完成一些令人惊叹的 AJAX 工作。

如果您刚刚学习 Web 开发，那么我强烈建议您学习 MVC。将来，您至少可以将一些新技能转移到其他框架中。

如果您正在寻找可以快速获得 Web 开发工作的学习方法，那么我将不得不强烈建议您使用 ASP.NET。

一旦 MVC 成为 RTM，我认为我们将看到一个缓慢而稳定的采用曲线，随着它的成熟，MVC 可能成为使用 ASP.NET 创建网站的主要框架。我希望至少如此！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-22T16:38:37.387

1.  ASPNET MVC 和 WebForms 之间最大的区别在于页面的生命周期，没有困难（不必要的）回发，干净的编码，enz。
2.  没有规则
3.  ？？？
4.  REST-full网站，逻辑分离
5.  设计时支持，不能使用第三方网页控件
6.  请不要混合在一起。如果你真的想使用 WebForms 模型，你可以使用 MVP 模式，[Billy McCafferty](http://www.codeproject.com/KB/architecture/ModelViewPresenter.aspx)写了关于该设计模式的优秀文章

我正在将我的一些应用程序从 MVP 模式重新设计为 MVC 模式，并不是因为 MVC 更好，而是我想使用 MS 提供的最新技术（模式本身已经很老了）。

# vxworks - 需要在vxWorks中创建虚拟内存中的共享数据

> ID：308334
> 
> 赞同：1
> 
> 时间：2008-11-21T10:11:52.270
> 
> 标签：vxworks

我们要在 vxWorks 的虚拟内存区域中创建共享数据。我们得到了一些信息，我们需要使用 vmLib API 将虚拟内存映射到我们的应用程序。但是我们不太了解如何使用它。如果有人使用过相同或相关的东西，请告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-01T22:59:29.420

如果您使用的是 VxWorks 6.x，那么您可以简单地使用操作系统中的共享数据工具。详情请查看 sdLib 文档，但它有一个非常简单的界面。

# java - Oracle中什么列类型可以取全范围的java double值

> ID：308339
> 
> 赞同：2
> 
> 时间：2008-11-21T10:14:26.490
> 
> 标签：java, oracle, double

Oracle 10g 中的哪种列类型可用于存储 java double 的任何值，包括 Double.MAX_VALUE 和 Double.MIN_VALUE？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-21T10:48:34.660

来自[Oracle SQL 参考](http://download.oracle.com/docs/cd/B19306_01/server.102/b14200/sql_elements001.htm#sthref80)：

> NUMBER 数据类型存储零以及绝对值从 1.0 x 10^-130 到（但不包括）1.0 x 10^126 的正数和负数固定数。

看起来您可能需要[BINARY_DOUBLE](http://download.oracle.com/docs/cd/B19306_01/server.102/b14200/sql_elements001.htm#i140176)：

> 最大正有限值：1.79769313486231E+308
> 
> 最小正有限值：2.22507485850720E-308

# sql - SQL 分组

> ID：308342
> 
> 赞同：0
> 
> 时间：2008-11-21T10:17:15.940
> 
> 标签：sql, sql-server, sql-server-2005, grouping

我有一个包含以下列的表格：

```
美国广播公司
---------
1 10 X
1 11 X
2 15 X
3 20 岁
4 15 是
4 20 岁

```

我想根据 B 和 C 列对数据进行分组，并计算 A 列的不同值。但是如果有两行或更多行 A 列上的值相同，我想从 B 列中获取最大值。

如果我按结果做一个简单的分组将是：

```
BC计数
--------------
10×1
11×1
15×1
20 是 2
15 是 1

```

我想要的是这个结果：

```
BC计数
--------------
11×1
15×1
20 是 2

```

是否有任何查询可以返回此结果。服务器是 SQL Server 2005。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-21T10:43:06.153

我喜欢分步进行：首先删除重复的 A 记录，然后进行分组。不是最有效的，但它适用于您的示例。

```
with t1 as (
    select A, max(B) as B, C 
        from YourTable
        group by A, C
)
select count(A) as CountA, B, C
    from t1
    group by B, C 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-21T10:44:46.633

我实际上已经对此进行了测试：

```
SELECT 
    MAX( B ) AS B,
    C,
    Count 
FROM
(
    SELECT
        B, C, COUNT(DISTINCT A) AS Count
    FROM
        t
    GROUP BY
    B, C
) X
GROUP BY C, Count 
```

它给了我：

```
 B     C     Count    
 ----  ----  -------- 
 15    X     1        
 15    y     1        
 20    y     2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-21T10:41:07.840

看一下这个。这应该在 Oracle 中工作，虽然我没有测试过；

```
select count(a), BB, CC from
(
select a, max(B) BB, Max(C) CC
from yourtable
group by a
)
group by BB,CC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-21T11:04:50.600

```
WITH cteA AS 
(
    SELECT 
        A, C, 
        MAX(B) OVER(PARTITION BY A, C) [Max]
    FROM T1
)

SELECT 
    [Max] AS B, C, 
    COUNT(DISTINCT A) AS [Count]
FROM cteA
GROUP BY C, [Max]; 
```

# css - 防止屏幕烧伤

> ID：308344
> 
> 赞同：8
> 
> 时间：2008-11-21T10:19:52.783
> 
> 标签：css, silverlight, hardware, screen, monitor

我编写了一个帮助台监视器应用程序，该应用程序设计用于支持部门的大等离子屏幕上，该应用程序有 5 个围绕它旋转的视图，大多数屏幕的内容不同，但它们有一些共同的组件，是一个silverlight控件和一个CSS背景图像。

我担心一段时间后这些会被烧到屏幕上，我已经研究了解决这个问题的技术，有些人建议每隔几秒将图像移动一个像素或显示不同的视图。

我只是不知道这些技术是否足够。

确保我在 1-50% 的时间内使用不同的 CSS 背景和一点银光动画真的可以解决这个问题吗？在其他 99-50% 的时间里，相同的图像会出现在相同的位置。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-11-21T10:28:00.067

检查等离子屏幕的文档，我确实听说他们中的许多人通过在某些时候运行彩色闪光来对抗烧伤，这对于现代等离子屏幕来说并不是一个大问题。

据我所知，这是一个常见的抱怨，因为屏幕角落里的频道标志很烦人，所以他们不得不做点什么。

我要说的是，我认为您的硬件可能无论如何都会管理它。

瑞安

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-21T10:35:47.150

这取决于您使用的等离子屏幕。一些制造商采取措施降低发生这种情况的风险。但是，如果确实发生了，我发现有一个叫做 JScreenFix 的东西可以用来消除烙印。基本问题是由于屏幕上的图像没有变化引起的。您可以确保图像随着时间的推移至少略微移动，或者降低对比度以降低风险。

此外，如果可能的话，您应该使用 LCD 屏幕，因为它在技术上不易老化……尽管它们有时会遭受图像持久性的影响，这不是永久性的。

查看更多详细信息：

*   [http://www.plasmatvbuyingguide.com/plasmatv/plasmatv-burnin.html](http://www.plasmatvbuyingguide.com/plasmatv/plasmatv-burnin.html)
*   [http://www.wikihow.com/Use-JScreenFix-to-Remove-Plasma-Screen-Burn-in](http://www.wikihow.com/Use-JScreenFix-to-Remove-Plasma-Screen-Burn-in)
*   [http://compreviews.about.com/od/monitors/a/LCDBurnIn.htm](http://compreviews.about.com/od/monitors/a/LCDBurnIn.htm)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-21T11:05:17.293

新的等离子显示器不那么容易燃烧的评论只是部分有效，因为您的部门可能会购买他们发现的最便宜的等离子。

mezoid 是对的。降低亮度和对比度并在晚上将其关闭，但我发现老化并没有那么严重。为此，我们很少有显示器在工作，尽管窗口边缘有明显的老化，但我们仍然可以非常清楚地看到重要数据。

如果您不向客户展示这个应该没问题，尽管工作人员偶尔会取笑这个:)

另外，你可以每隔几个月运行一次 JScreenFix，mezoid 建议你没事。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-21T11:32:57.050

请小心使用 JScreenFix，请注意，它仅通过在屏幕的其余部分进行烧录来工作，这只会改变您对烧录的*看法*，并且随着时间的推移，会使您的显示器被淘汰。

有一个想法我没有尝试过，但可能会有所帮助，如果您通过 3 种原色或 3 种次要颜色或两者来分阶段解决明显的静态问题区域，您可以利用仅将每个像素燃烧 1/3 的好处的时间有效地将发生老化所需的时间增加了三倍。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-21T10:52:13.450

我认为屏幕烧伤的风险比以前小得多。

如果屏幕始终只用于显示相同的视图，为什么还要麻烦呢？如果始终保持相同的图像，那么它是否被烧到屏幕上并不重要:-)

如果您仍然想采取措施，我还建议您在视图旋转时进行一些动画或移动图像。

[编辑] 忘记了一些东西......很大程度上取决于视图旋转之间的时间。如果您只每隔几个小时切换一次视图（和图像），那么风险要比每十分钟切换到一个不同的视图要大得多...... [/EDIT]

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-21T11:00:46.960

我使用这个程序取得了相当大的成功。您可能可以在您的程序中创建类似的东西。

[http://www.e-motional.com/TScreenLock.htm](http://www.e-motional.com/TScreenLock.htm)

*   **等离子屏幕保护程序选项。**（仅限 TSL-PRO）一个可变宽度的黑条在屏幕上浮动，防止等离子屏幕老化。此选项允许将 TSL 用作等离子屏幕保护程序。

# c - 如何在 C 中最近创建的文件夹和文件中具有读取权限？

> ID：308349
> 
> 赞同：1
> 
> 时间：2008-11-21T10:22:50.437
> 
> 标签：c, file-permissions

我创建了一个文件夹，在我打开该文件夹内的文件后，在其上写入。碰巧在那之后我尝试打开文件但我没有权限因此我必须手动更改它。

```
/* str1 has tha name of the folder */
/* str the bytes I want to write in the file inside the folder*/
...

   mkdir(str1,0777);    
   if (filefd < 0) { 

      strncpy(auxstr, str, MAX_MSG + 1);
      strcat(str1,"\\");
      strcat(str1, auxstr);
      filefd = open (str1, O_RDWR | O_CREAT | O_TRUNC);

      nbytes -= (strlen(str) + 1);
      memcpy(auxstr, &str[strlen(str)+1], nbytes); 
      memcpy(str, auxstr, nbytes);

   }

   /*write to the file */
   if ((nwritten = write(filefd, str, nbytes)) != nbytes) {
       printf ("can't write on file\n");
       break;
   } 
```

为了获得打开创建的文件的权限，我应该更改什么？

非常感谢，

* * *

：秒

with = 0_CREATE 我仍然有没有权限读取文件的问题。我必须手动设置它们

* * *

而且我已经有 0_CREAT 在公开

打开（str1，O_RDWR | O_CREAT | O_TRUNC）；

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-21T10:37:03.777

您忘记了 的第三个参数`open()`。

`open()`with的第三个参数`O_CREAT`正是新创建的文件将拥有的权限。

参考：

*   [http://www.opengroup.org/onlinepubs/009695399/functions/open.html](http://www.opengroup.org/onlinepubs/009695399/functions/open.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-25T05:32:14.267

**安全问题**

该问题对目录使用 0777 权限-**不要！** 在正常情况下，您不应该创建具有 0777 权限的目录。您可能会考虑使用 01777 ，就像您在`/tmp`; 粗略地说，这确保了从目录中删除文件的人有权修改文件。但是您不应该授予每个人从目录中删除任何文件的权限。并声称该`umask`设置将保护您，虽然可能是正确的，但仍然不是搞乱那些不知道如何安全设置它的人的生活的好借口。使用 0755 或 0775 但不要使用 0777。

答案之一是对文件使用 0777 权限-**不要！** 该参数类似于目录参数，但需要注意的是大多数人在创建文件时不会创建可执行文件（链接器编写器将是此一般规则的例外），并且无论生成的文件是否是可执行的，允许任何人修改程序仍然是一个非常糟糕的主意。使用 0644 或 0664；很少有使用 0666 的充分理由，更不用说使用 0777 的充分理由。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-21T12:09:22.737

CesarB 试图告诉您的是，您需要提供权限作为第三个参数：

```
filefd = open (str1, O_RDWR | O_CREAT | O_TRUNC, 0777); 
```

请使用“添加评论”来回复，而不是为您自己的问题创建新的回复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-25T16:38:08.883

问题是您使用了错误的路径分隔符 - 您正在尝试使用反斜杠`'\\'`来分隔组件。这是 Windows 的路径分隔符。由于您似乎使用的是基于 *nix 的操作系统，因此您应该使用正斜杠`'/'`作为路径分隔符。事实上，即使在 Windows 上，您也应该使用正斜杠，因为它更便于移植 - Windows 会自动将正斜杠转换为反斜杠。

结果，您尝试在当前目录中创建一个名为“foo\bar”的文件，这可能会失败，因为您没有在当前目录中创建文件的权限。

# language-agnostic - How do you handle/react to user input concurrency on the GUI layer?

> ID：308353
> 
> 赞同：2
> 
> 时间：2008-11-21T10:25:40.087
> 
> 标签：language-agnostic, concurrency, user-input

What are good ways to handle user input concurrency?

As the answers to [this question](https://stackoverflow.com/questions/225625/locking-to-handle-concurrency-a-good-idea) already rule out database locking, how do you handle concurrent user inputs in general?

Is locking always a bad idea, even if it is not implemented by row locking? Are there best practices which are not use case dependant? What were your experiences with your strategies?

**EDIT:** I'm aware of handling concurrency on a data level through transactions: If two users simultanteously trigger a complex data change, transaction will handle it.

But I'm interested in handling or at least reacting to them on the GUI layer. What if the data change is part of a lengthy operation with user interaction?

Let's say two or more users are editing the same file over a web interface. At some point one of the users hits the save button. What happes to the other users?

*   Will they get notified and/or forced to reload? Or will the eventually overwrite the changes of the first user?
*   Shall I lock the file and prevent multiple users editing the same file?
*   Can I put the whole editing process in a transaction (I highly doubt it, but who knows...)

What is the best way to handle this and similar situations? Are there any other strategies?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-30T14:09:07.683

Best strategy depends on what *should* happen from (business) process perspective - also important questions are what users would normally expect and what would surprise them least, and, of course, whether it is feasible to implement what they expect.

Your example of editing a file **over web** can be broken down as follows:

1.  user1 checks out/gets/downloads/opens file v0
2.  user2 checks out/gets/downloads/opens file v0
3.  user1 makes changes to his copy of file v0
4.  user2 makes changes to his copy of file v0
5.  user1 saves file version v1 to server
6.  user2 saves file version v2 to server

Note, that it is typical for web applications, and indeed for normal desktop office programs, too, that newest changes that user makes only become available (to others) after saving them, which means that it is not a case of having colleague's typing appear on top of yours in the copy of file you are editing.

A classic version control approach to this is that for user1 nothing changes as compared to normal desktop editing/saving process.

For user2, however, when he attempts to save v2 to server, the application must check whether there have been any changes to file version v0 since user last downloaded it. Since this is the case, a version control system would typically show him both versions (v1 and v2) on screen side by side, and let him mix them and save the resulting version (v3) to server.

For text files there exist a number of tools and systems both on Unix and Windows that try to automate the process so that if the areas of file edited do not overlap, the changes are merged automatically.

The alternative is locking file for user2 until user1 has finished editing it.

Putting editing in transaction is typically of no relevance. It is the final operation which attempts to overwrite existing file with new version, that is important. Editing happens independently on each users workstation and does not touch the server until last point (saving).

* * *

Your example is, by the way, distinctly different from another situation such as booking airplane tickets or booking an appointment to a doctor.

When booking tickets, there is a limited number of seats in a plane. It is possible, due to the fact that data transfer is not actually instanteous for more than one person to put a reservation to the same last seat on a plane.

Therefore, booking should be at least a 2-step process:

1.  system shows free slots;
2.  user asks for one of free slots (s1);
3.  system tells user whether the slot is really still free, and if so, reserves it to you.
4.  user completes booking.

The "really still free" step is because information on webpage user views is typically not updated realtime, so between steps 1 and 2, it is possible that another user has applied for the free slot.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-21T10:40:28.780

Look for how to handle "transactions" in whatever language/database API you are using. If you design these correctly it will handle it for you.

And to understand the theory, I'd recommend [Distributed Systems by Couloris et al](http://www.amazon.co.uk/Distributed-Systems-Concepts-International-Computer/dp/0321263545/ref=sr_1_1?ie=UTF8&s=books&qid=1227264006&sr=8-1) but there are lots of other good books.

# html - 链接标准 标记元素

> ID：308359
> 
> 赞同：2
> 
> 时间：2008-11-21T10:28:05.667
> 
> 标签：html

或者是：

```
<a href="#"><h1>text here</h1></a> 
```

或者

```
<h1><a href="#">text here</a></h1> 
```

“正确的”。使用第一个有什么好处吗，对我来说似乎更合乎逻辑。也许从搜索引擎优化的角度来看？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-11-21T10:37:17.303

```
<h1><a href="#">text here</a></h1> 
```

是正确的，因为 HTML 不允许`<h1>`内联元素 ( `<a>`) ( [src](http://www.w3.org/TR/REC-html40/struct/global.html#h-7.5.3) ) 中包含块元素 ( )。您的第一个示例将无法[通过验证](http://validator.w3.org/#validate_by_input)。

> 通常，块级元素可能包含内联元素和其他块级元素。通常，内联元素可能只包含数据和其他内联元素。这种结构区别中固有的想法是块元素创建比内联元素“更大”的结构。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-21T10:37:17.973

您的第二个示例是唯一允许的结构。第一个将块级元素放在内联元素中，而 HTML 不允许这样做。浏览器可能允许它，但它不是有效的 HTML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-21T10:37:39.220

在这种特殊情况下并没有太大区别。不过有几点需要指出：

*   `<h*>`是块元素，`<a>`默认是内联元素。正如其他人所指出的，XHTML 不允许块元素内联元素，所以如果你没有在 CSS 中重新定义它们的显示样式，`<a><h1></h1></a>`是无效的。
*   `<a href="#"><h1>text here</h1></a>`是一个可以有多个子节点的链接。在这种情况下，它只有一个`<h1>`子节点，但没有什么能阻止您添加更多。
*   另一方面，`<h1><a href="#">text here</a></h1>`是一个可以嵌入多个节点的标头。您可以向其添加各种子节点，例如标签等。

所以这基本上是一个逻辑上的差异，在这种特殊情况下没有任何实际差异。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-21T11:17:45.833

附加说明，虽然前一种情况有效，但纯粹是因为浏览器是允许的。您可以通过检查内部 dom 树发现

```
 <a><h1>foo</h1></a> 
```

被闯入

```
 <a></a>
 <h1><a>foo</a></h1>
 <a></a> 
```

这可以产生*有趣*的结果。;)

# ms-access - Microsoft Access 2007 表单中的标签/Texbox 分离

> ID：308362
> 
> 赞同：7
> 
> 时间：2008-11-21T10:31:11.917
> 
> 标签：ms-access

我正在尝试在 Access 数据库中创建一个非常简单的表单。每当我在表单上拖动一个文本框时，都会使用它创建一个标签。我希望能够在不移动文本框的情况下移动标签，但是每当我尝试这样做时，文本框都会随之移动。就好像它们是相互联系的。有没有办法将它们彼此分开以便可以单独移动？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-11-21T10:36:08.867

是的，但是当您单击文本框或标签时，您最好寻找出现在每个控件左上角的小方形黑框。此框将允许您独立拖动每个控件。不要忘记 Format->Align (Left,Right,Top,Bottom) 它对于整理控件可能比其他任何东西都更有用。

您可以通过删除标签、单击详细信息部分以确保未选择任何控件并粘贴来将标签与其父控件分开，但我建议不要这样做。您可以使用与控件相关的标签做许多有用的事情，其中​​之一是将两者一起移动 - 这在您整理表单时很有用。另一个是找到控件的父级，这在使用VBA更改控件时很有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-03-20T07:51:19.487

**在设计模式下**，选择标签和字段后，单击顶部功能区工具栏上的**排列**按钮，您将在排列组的**控件布局部分看到一个按钮。**选择**删除**按钮。这将删除标签和字段之间的连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-22T12:46:18.300

您还可以使用 Group/Ungroup 菜单命令来建立/删除连接。对标签和控件进行分组会使它们在设计视图中一起移动。

# c++ - 带有布尔值的 C++ 位域打包

> ID：308364
> 
> 赞同：38
> 
> 时间：2008-11-21T10:31:32.277
> 
> 标签：c++, bit-fields

我刚刚对位域进行了测试，结果令我惊讶。

```
class test1 {
public:
    bool test_a:1;
    bool test_b:1;
    bool test_c:1;
    bool test_d:1;
    bool test_e:1;
    bool test_f:1;
    bool test_g:1;
    bool test_h:1;
};

class test2 {
public:
    int test_a:1;
    int test_b:1;
    int test_c:1;
    int test_d:1;
    int test_e:1;
    int test_f:1;
    int test_g:1;
    int test_h:1;
};

class test3 {
public:
    int test_a:1;
    bool test_b:1;
    int test_c:1;
    bool test_d:1;
    int test_e:1;
    bool test_f:1;
    int test_g:1;
    bool test_h:1;
}; 
```

结果是：-

```
sizeof(test1) = 1   // This is what I'd expect. 8 bits in a byte
sizeof(test2) = 4   // Reasonable. Maybe padded out to the size of an int.
sizeof(test3) = 16  // What??? 
```

这是您所期望的，还是编译器错误？（Codegear C++ Builder 2007，顺便说一句......）

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2008-11-21T10:40:22.507

您的编译器已将 test3 的所有成员安排在整数大小边界上。一旦块被用于给定类型（整数位域或布尔位域），编译器不会分配任何其他不同类型的位域，直到下一个边界。

我怀疑这是一个错误。它可能与您系统的底层架构有关。

**编辑：**

*c++ 编译器将按如下方式在内存中分配位域：相同类型的*几个连续位域成员将按顺序分配。一旦需要分配新类型，它将与下一个逻辑内存块的开头对齐。下一个逻辑块将取决于您的处理器。一些处理器可以对齐到 8 位边界，而其他处理器只能对齐到 16 位边界。

在您的 test3 中，每个成员的类型都与之前的成员不同，因此内存分配将为 8 *（系统上的最小逻辑块大小）。在您的情况下，最小块大小为两个字节（16 位），因此 test3 的大小为 8*2 = 16。

在可以分配 8 位块的系统上，我希望大小为 8。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2008-11-21T13:23:03.430

小心位域，因为它的大部分行为是由实现（编译器）定义的：

从 C++03，9.6 位域（第 163 页）开始：

> 类对象内的位域分配是实现定义的。位域的对齐是实现定义的。位域被打包到一些可寻址的分配单元中。[注意：位域在某些机器上跨越分配单元，而不在其他机器上。位域在某些机器上从右到左分配，在其他机器上从左到右分配。]

也就是说，它不是编译器中的错误，而是缺乏关于它应该如何表现的标准定义。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-11-21T10:42:39.087

哇，这太令人惊讶了。在 GCC 4.2.4 中，C 和 C++ 模式下的结果分别为 1、4 和 4。这是我在 C99 和 C++ 中使用的测试程序。

```
#ifndef __cplusplus
#include <stdbool.h>
#endif
#include <stdio.h>

struct test1 {
    bool test_a:1;
    bool test_b:1;
    bool test_c:1;
    bool test_d:1;
    bool test_e:1;
    bool test_f:1;
    bool test_g:1;
    bool test_h:1;
};

struct test2 {
    int test_a:1;
    int test_b:1;
    int test_c:1;
    int test_d:1;
    int test_e:1;
    int test_f:1;
    int test_g:1;
    int test_h:1;
};

struct test3 {
    int test_a:1;
    bool test_b:1;
    int test_c:1;
    bool test_d:1;
    int test_e:1;
    bool test_f:1;
    int test_g:1;
    bool test_h:1;
};

int
main()
{
    printf("%zu %zu %zu\n", sizeof (struct test1), sizeof (struct test2),
                            sizeof (struct test3));
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-11-21T11:17:19.843

作为一般观察，`int`1 位的有符号并没有多大意义。当然，您可能可以弄清楚如何在其中存储 0，但是麻烦就开始了。

一位必须是符号位，即使在二进制补码中，但您只有一位可以使用。因此，如果将其分配为符号位，则实际值将没有位。正如史蒂夫·杰索普（Steve Jessop）在评论中指出的那样，如果使用二进制补码，您可能表示 -1 是真的，但我仍然认为只能表示 0 和 -1 的“整数”数据类型是一件相当奇怪的事情。

对我来说，这种数据类型没有（或者，鉴于史蒂夫的评论，*一点*）没有意义。

使用`unsigned int small : 1;`使其无符号，然后您可以以明确的方式存储值 0 和 1。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-05-28T13:34:16.660

```
#include <iostream>
using namespace std;

bool ary_bool4[10];

struct MyStruct {
    bool a1 :1;
    bool a2 :1;
    bool a3 :1;
    bool a4 :1;
    char b1 :2;
    char b2 :2;
    char b3 :2;
    char b4 :6;
    char c1;
};

int main() {
    cout << "char size:\t" << sizeof(char) << endl;
    cout << "short int size:\t" << sizeof(short int) << endl;
    cout << "default int size:\t" << sizeof(int) << endl;
    cout << "long int size:\t" << sizeof(long int) << endl;
    cout << "long long int size:\t" << sizeof(long long int) << endl;
    cout << "ary_bool4 size:\t" << sizeof(ary_bool4) << endl;
    cout << "MyStruct size:\t" << sizeof(MyStruct) << endl;
    // cout << "long long long int size:\t" << sizeof(long long long int) << endl;
    return 0;
}

char size: 1
short int size: 2
default int size: 4
long int size: 4
long long int size: 8
ary_bool4 size: 10
MyStruct size: 3 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-24T10:42:42.517

来自“Samuel P. Harbison, Guy L. Steele] CA Reference”：

**问题：**

“编译器可以自由地对位域的最大大小施加限制，并指定位域不能跨越的某些寻址边界。”

**可以在标准范围内完成的操作：**

“一个未命名的位字段也可以包含在一个结构中以提供填充。”

“为未命名的位域指定长度为 0 具有特殊含义 - 它表示不应将更多位域打包到前一个位域所在的区域......这里的区域表示一些隐含定义的存储单元”

> 这是您所期望的，还是编译器错误？

所以在 C89、C89 和修正 I、C99 中 - 这不是一个错误。关于 C++ 我不知道，但我认为行为是相似的。

# .net - WCF DataContract/ServiceOperation 涉及 .NET XmlDocument 类型

> ID：308382
> 
> 赞同：3
> 
> 时间：2008-11-21T10:39:42.040
> 
> 标签：.net, wcf, datacontract, datamember

我只是想知道要在 WCF 通信中通过线路发送的数据合同。我知道为了互操作性，不建议（甚至不允许？）将本机 .NET 类型作为数据合同的一部分发送。

我希望有一个服务可以接受，作为`ServiceOperation`.NET`XmlDocument`类型的输入。`DataContract`如果我要创建一个包含`XmlDocument`类型（将用属性标记）的包装类（将用属性标记`DataMember`），并将其用作参数`ServiceOperation`- 这是否合法/可能？

我如何确保互操作性，同时仍然具有`XmlDocument`类型的便利性？`string`接受 a作为参数`ServiceOperation`然后在服务端`XmlDocument`使用方法实例化a 可能是更好的设计选择吗？`XmlDocument.LoadXml(string)`

为任何帮助/意见/评论欢呼，我刚刚开始掌握 wcf，所以我只想在我开始创建服务之前清除我脑海中的任何困惑。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-18T10:41:47.113

您将需要添加 [XmlSerializerFormat] 属性。

所以（不使用 Datacontract 虽然你也可以使用它）：

[ServiceContract(Namespace = "urn:SerializationTest")]

[XmlSerializerFormat]

公共接口 IBlah

{

[运营合同]

XmlDocument 返回xmldoc();

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-21T12:42:32.123

通常情况下，开发人员为了“互操作性”而编写代码，而他们真的没有理由/根本不需要这样做。

使用本机 .NET 类型是完全可以的。示例：为了序列化，您会将“Point”分解为两个整数吗？

然而可悲的是， System.Xml.XmlDocument ... 是不可序列化的 :)

不过，您可以使用“XElement”……效果很好（在 System.Xml.Linq 命名空间中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-23T21:27:58.067

您的 XML 文档有 XSD 吗？如果是这样，使用 svcutil.exe (svcutil.exe /dconly schemaName.xsd) 生成 DataContract 复合结构非常容易。此时，您可以选择使用[DataContractSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.aspx)在您的 XML 文档和 DataContracts 的组合之间移动，如果您选择这样做，可以在您的服务接口和您的实现中使用。

另外，我同意之前的海报以及 YAGNI 关于兼容性的评论。

JB [http://jb-brown.blogspot.com](http://jb-brown.blogspot.com)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-23T00:50:11.590

在你的第二种情况下，我会在一个单独的 dll 中创建一个数据合约，并在两个应用程序上引用它（我猜你对这两个服务都有控制权）。因此，当您在服务 B 中为服务 A 创建代理类时，您可以说您的数据合同来自已知类型并且指向数据合同 dll。BTW VS 2008 默认情况下会这样做。如果您使用的是 .NET 3.0，则可能需要使用 svcutil 手动创建类。

我希望这有帮助。

干杯，瓦格纳。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-21T12:23:31.647

传递一个字符串对于互操作来说会更好，但是如果你想传递 CLR 数据类型，你可以考虑使用 KnownType 属性标记你的类。

# file - 如何修改 JBoss 提供的静态文件的 http-headers

> ID：308386
> 
> 赞同：1
> 
> 时间：2008-11-21T10:40:55.690
> 
> 标签：file, jboss, static, http-headers

我有一个包含一些静态文件（例如 MS Word 文档）的 Web 应用程序 (.war)。当我尝试下载这些文件时，JBoss 会自动在响应中设置一些 HTTP 标头。有没有办法配置 JBoss（版本 3.2.7）将这些标头设置为特定值（或省略它们）？我特别感兴趣

```
Cache-Control: no cache 
```

标头，因为这会导致使用 Internet Explorer 通过 https 下载文件时出现一些问题（IE 将拒绝将文件保存到磁盘）。

顺便提一句。可以通过向 Windows 注册表添加条目来更改此行为：

```
[HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings]
"BypassSSLNoCacheCheck"=dword:00000001 
```

但显然我不会要求客户为了下载文件而摆弄他们的注册表。

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-21T11:44:24.127

[这](http://www.jboss.org/community/docs/DOC-9578)是 JBoss 社区 wiki 上关于如何禁用 Cache-Control 行为的描述。

直到现在我才知道这个 IE6 功能。这也适用于IE7吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-21T11:37:11.067

想到的一个选择是在它周围包装一个 servlet（或类似的） - 以便被调用的 URL 调用您的 servlet，然后设置您想要的标头，然后交付基础文档。

# c++ - 在 C++ 中将字符串转换为日期

> ID：308390
> 
> 赞同：23
> 
> 时间：2008-11-21T10:42:00.303
> 
> 标签：c++, string, date

我知道这可能很简单，但作为 C++ 我怀疑它会是。如何将 01/01/2008 形式的字符串转换为日期以便我可以操作它？我很高兴将字符串分解为日月年成分。如果解决方案仅适用于 Windows，也很高兴。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-11-21T10:46:56.940

```
#include <time.h>
char *strptime(const char *buf, const char *format, struct tm *tm); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-11-21T14:24:08.843

我不使用`strptime`.

将日期分解为其组成部分，即日、月、年，然后：

```
struct tm  tm;
time_t rawtime;
time ( &rawtime );
tm = *localtime ( &rawtime );
tm.tm_year = year - 1900;
tm.tm_mon = month - 1;
tm.tm_mday = day;
mktime(&tm); 
```

`tm`现在可以转换为 a`time_t`并进行操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-22T05:56:24.930

对于每个正在寻找`strptime()`Windows 的人来说，它需要函数本身的源代码才能工作。不幸的是，最新的 NetBSD 代码并不容易移植到 Windows。

我自己在**[这里](https://github.com/ibmdb/node-ibm_db/tree/master/src)**使用了实现（strptime.h 和 strptime.c）。

可以在**[此处](http://pastebin.com/LpRgTPNG)**找到另一段有用的代码。这最初来自 Google Codesearch，现在已经不存在了。

希望这可以节省大量搜索，因为我花了很长时间才找到它（而且最常见的是这个问题）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-04T15:45:02.503

```
#include <time.h>
#include <iostream>
#include <sstream>
#include <algorithm>

using namespace std;

int main ()
{
  time_t rawtime;
  struct tm * timeinfo;
  int year, month ,day;
  char str[256];

  cout << "Inter date: " << endl; 
  cin.getline(str,sizeof(str));

  replace( str, str+strlen(str), '/', ' ' );  
  istringstream( str ) >> day >> month >> year;

  time ( &rawtime );
  timeinfo = localtime ( &rawtime );
  timeinfo->tm_year = year - 1900;
  timeinfo->tm_mon = month - 1;
  timeinfo->tm_mday = day;
  mktime ( timeinfo );

  strftime ( str, sizeof(str), "%A", timeinfo );
  cout << str << endl;
  system("pause");
  return 0;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-09-17T14:53:16.273

为什么不使用 boost 寻求更简单的解决方案

```
using namespace boost::gregorian;
using namespace boost::posix_time;    
ptime pt = time_from_string("20150917"); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-23T06:15:52.827

您可以使用 boost 库（跨平台）

```
#include <stdio.h>
#include "boost/date_time/posix_time/posix_time.hpp"

int main()
{    
std::string strTime = "2007-04-11 06:18:29.000";
std::tm tmTime = boost::posix_time::to_tm(boost::posix_time::time_from_string(strTime));
return 0;
} 
```

但格式应该如前所述:)

# iis - IIS 中虚拟目录的 Cookie 问题（删除不需要的 Cookie）

> ID：308392
> 
> 赞同：2
> 
> 时间：2008-11-21T10:42:18.493
> 
> 标签：iis, cookies, asp-classic, virtual-directory

我刚刚做了一个小小的噩梦，不知何故创建了不需要的 cookie。我发誓我的代码从未在某个虚拟目录中创建 cookie，它只是读取它，但不知何故，我的浏览器最终得到了一个根 cookie 和一个用于 vdir 的 cookie 的副本。这意味着这两个值是分开的，并且都没有得到更新。

大多数关于删除 cookie 的文章都说将其设置为空白，这无济于事，因为它仍然存在！

我必须编写一个简短的 ASP 来将 cookie 到期时间设置为去年，并确保我将路径指定为有问题的 vdir，以确保它杀死了我不想要的那个。

```
Response.Cookies("BWWF2")("UID") = ""
Response.Cookies("BWWF2").Path = "/community"
Response.Cookies("BWWF2").Expires = DateAdd("yyyy", -1, Now()) 
```

希望这已经解决了这个问题，但我想在这里分享这个，并询问是否有人有更好的方法来解决这个问题，或者关于问题（两个 cookie）可能首先发生的任何想法？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-04-08T08:17:15.007

您应该检查这些虚拟目录上的 IIS 设置，并将应用程序名称设置为“默认应用程序”

如果应用程序名称与站点的其余部分不同，您将在进入虚拟目录时获得一个新的 cookie 和 sessionId。

# java - struts 属性标签检索对象

> ID：308396
> 
> 赞同：2
> 
> 时间：2008-11-21T10:43:31.050
> 
> 标签：java, jakarta-ee, struts

是否可以通过struts中的property标签获取Object的属性？

例如，如果我有一个由用户名和电子邮件组成的用户对象，是否可以修改下面的代码使其返回用户名和电子邮件而不是整个对象？

```
print("<s:iterator value="UserObjects"><tr><td><s:property/></td> </tr></s:iterator>"); 
```

*我不知道为什么它拒绝让我在问题中输入struts标签，对不起以上*

目前，上面返回 UserObjects 中的所有内容。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-21T11:05:08.620

如果你的 bean 有这样的方法：

```
public String getMyProperty()
{
  return "Test";
} 
```

您应该可以使用如下属性标签访问它：

```
<s:iterator value="myList">
  <s:property value="myProperty" />
</s:iterator> 
```

查看[struts 迭代器文档](http://struts.apache.org/2.0.12/docs/iterator-tag-examples.html)中的第 3 个示例。

# c# - C#中的MDI子窗体问题

> ID：308401
> 
> 赞同：3
> 
> 时间：2008-11-21T10:47:51.137
> 
> 标签：c#, mdichild

当我最大化 1 个 MDI 子窗体时，所有 MDI 子窗体也会被最大化。是否可以最大化一种形式而另一种不最大化？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-21T12:31:46.903

如果你想看到一个最大化的窗口，前面有另一个较小的窗口，我认为某种带有停靠和浮动面板的用户界面会是更好的选择。类似于它在 Visual Studio 中的工作方式。

创建自定义 MDI/非 MDI 功能是非常耗时且令人沮丧的工作，最终结果可能会让习惯于标准 MDI 的用户感到困惑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-21T10:56:17.373

最大化的 MDI 子窗体应该占据整个子区域，因此其他子窗体的状态并不重要，因为它们不可见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-28T09:48:17.710

是的，您可以这样做 - 使用 API 调用 SetParent 而不是设置 .MDIParent。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-21T11:04:46.810

不可能。你唯一能做的就是在非MDI和任务栏前面设置窗口= no

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-11-15T16:36:09.500

Maximized Form 需要是一个 MDI Child，用`Child1.Show()`.

非最大化形式不需要是用`Form1.Show(this)`or调用的 MDI Child `Form1.ShowDialog(this)`。

# security - 我怎样才能知道*如何*我的网站被黑了？如何查找站点漏洞？

> ID：308406
> 
> 赞同：19
> 
> 时间：2008-11-21T10:49:06.437
> 
> 标签：security, computer-forensics

我的一个定制开发的[ASP.NET](http://en.wikipedia.org/wiki/ASP.NET)网站今天被黑了：“被天鹅黑了（请停止战争！..）”它使用的是 ASP.NET 和 SQL Server 2005 以及 IIS 6.0 和 Windows 2003 服务器。我没有使用 Ajax，我想我在连接到数据库的任何地方都使用存储过程，所以我不认为这是[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)。我现在已经删除了文件夹的写权限。

我怎样才能知道他们做了什么来入侵网站以及如何防止它再次发生？

服务器是最新的所有 Windows 更新。

他们所做的是将 6 个文件（index.asp、index.html、index.htm、...）上传到网站的主目录。

我应该上传哪些日志文件？我有来自此文件夹的 IIS 日志文件：`c:\winnt\system32\LogFiles\W3SVC1`. 我愿意向你们中的一些人展示它，但不认为在互联网上发布是好的。有人愿意看看吗？

我已经在谷歌上搜索过，但我唯一发现还有其他网站被黑客入侵——我还没有看到任何关于它的讨论。

我知道这与编程并不严格相关，但这对程序员来说仍然是一件重要的事情，很多程序员都被这样黑过。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-11-21T13:09:18.527

看来，对您网站的攻击是 SWAN 于 2008 年 11 月 21 日对运行 IIS 6.0 的 Windows 2003 和 Windows 2000 机器进行的大规模破坏的一部分。这里的其他人提出了一些建议。我只想补充一点，每当您决定启动该网站时，请格式化该框并从头开始重新安装。一旦一个盒子被破坏，它就根本不可信，但是你可以清理和净化它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-21T12:39:09.790

*IIS 进程*

检查您的 ASPNET 进程是否没有权限在服务器上写入文件。如果您需要该进程具有写入权限，则只允许它们对特定文件夹执行此操作，并拒绝所有用户帐户对该文件夹的执行权限。

*SQL 注入*

要查看寻找 SQL 漏洞的人，请查看您的日志文件中的以下文本“CAST(”。

你有没有在后面的代码中构建 SQL 来查询数据库的地方？这些可能容易受到 SQL 注入攻击。通过替换以下代码，您将更加安全。

```
Dim strSQL As String = "Select * FROM USERS Where name = '" & Response.Querystring("name") "'" 
```

然后考虑如下替代方案。

```
Dim strSQL As String = "Select * FROM USERS Where name = @name" 
```

然后在sql命令中加入对应的SQL PAParameter。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-21T13:05:34.867

希望您已经打开了 IIS 日志文件，并希望黑客没有删除它们。默认情况下，它们位于：c:\winnt\system32\LogFiles\W3SVC1 并且通常以日期命名。

然后弄清楚如何使用免费的日志解析器（来自 Microsoft）可能会有所帮助。然后[使用本指南](http://www.securityfocus.com/infocus/1712)帮助您以取证方式查看您的日志文件。您是否有防火墙，因为它的系统日志可能会有所帮助。

另一个可以帮助您找到 sql 注入问题的不错的工具是到[这里](http://www.communities.hp.com/securitysoftware/blogs/spilabs/archive/2008/06/24/finding-sql-injection-with-scrawlr.aspx)下载 HP 的 Scrawlr。

如果您对所发现的内容有任何疑问，请回来询问。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-21T11:03:46.627

好吧，对于初学者来说：

*   你给你的服务器打补丁了吗？
*   [您是否还有诸如FrontPage 服务器扩展](http://en.wikipedia.org/wiki/FrontPage_Server_Extensions)、Web 的 Office 扩展等之类的东西挥之不去？
*   你确定你没有 SQL 注入漏洞吗？
*   您是否在 Google 上搜索过“Hacked by swan”这个文本？有很多命中，也许其中一个已经弄清楚了他的入口

如果您确实有或不确定是否有 SQL 注入问题，那么您可以在这里进一步询问，否则我会请一些安全专家来帮助您。

这确实是一个编程站点，因此除非您的问题与编程有关，否则它很可能会再次关闭。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-21T12:47:41.347

您可能想尝试使用[Metasploit](http://en.wikipedia.org/wiki/Metasploit_Project)之类的渗透工具包来发现任何明显的漏洞。

此外，如果您的日志文件未被篡改，请发布它们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-03-19T09:59:43.260

FTP 是否开启？

我曾经有一个客户出于某种原因打开了他们的 FTP，而黑客刚刚设置了一个运行的机器人，尝试随机/普通用户/密码组合。那个黑客比你的更糟糕，因为它没有显示在网页上，而是试图安装一个 ActiveX ......

因此，您可以检查您的 FTP 日志。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-03-19T09:53:28.190

设置 Google Analytics 并查看对您的网站提出的所有请求。如果您通过查询字符串处理 SQL 注入，您可以轻松找出他们做了什么，以及他们是如何发现您的漏洞的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-21T11:28:21.740

您应该做的第一件事是检查您的日志文件。您可以将它们粘贴在这里，如果我们识别出攻击，我们会告诉您。

# jquery - Jquery - 如何修复此图像翻转？

> ID：308411
> 
> 赞同：2
> 
> 时间：2008-11-21T10:51:08.210
> 
> 标签：jquery, hover, rollover

嗨，伙计们，我有这个小 Jquery 脚本：[链接文本](http://testing-server.info/jquery/image-slider/ "关联")

```
$(document).ready(function() 
{
      $('#image p').hide();

      $('img').hover(function()
      {
            $('#image p').show(200); 
      }, function()
      {
            $('#image p').hide(200); 
      });
}); 
```

我工作正常，但我希望能够将鼠标悬停在图像中的文本上，每次尝试时，它都会一直“弹跳”

非常感谢任何帮助，谢谢，基思

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-11-21T13:16:18.480

好问题。

问题似乎是当鼠标悬停在段落上时，鼠标不再悬停在图像上。所以段落被隐藏了。当段落被隐藏时，鼠标再次悬停在图像上，因此段落再次显示。等等...

一个好的解决方案是使用 mouseenter 和 mouseleave 事件而不是 mouseover 和 mouseout：

```
$(document).ready(function(){
    $('#image p').hide();

    $('#image').bind("mouseenter", (function(){
        $('#image p').show(200)
     }));

    $('#image').bind("mouseleave", (function(){
        $('#image p').hide(200)
     }));

}); 
```

**mouseenter/mouseleave**事件和**mouseover/mouseout**事件之间的主要区别在于前者不会冒泡。

在此示例中， div#image 的子段落仍会收到 mouseenter/mouseleave 事件（即使您没有监听它们），但这些事件不会冒泡到它们的父元素。请参阅[此页面](http://blog.stchur.com/2007/03/15/mouseenter-and-mouseleave-events-for-firefox-and-other-non-ie-browsers/)以进行扩展讨论。

您还必须不再将事件分配给 img 标签，而是分配给包含的 div。这应该不是问题。

# perl - 为什么我的 Perl 脚本会从文件中删除字符？

> ID：308417
> 
> 赞同：1
> 
> 时间：2008-11-21T10:56:01.757
> 
> 标签：perl, file

我对 Perl 脚本有一些问题。它修改文件的内容，然后重新打开它来写入，在此过程中会丢失一些字符。从文件中删除所有以“%”开头的单词。这很烦人，因为 % 表达式是对话框的变量占位符。

你知道为什么吗？源文件是具有默认编码的 XML

这是代码：

```
undef $/;
open F, $file or die "cannot open file $file\n";
my $content = <F>;                                           
close F;                                                     

$content =~s{status=["'][\w ]*["']\s*}{}gi;

printf $content;

open F, ">$file" or die "cannot reopen $file\n";             
printf F $content;                                           
close F or die "cannot close file $file\n"; 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2008-11-21T11:05:15.157

你在`printf`那里使用它，它认为它的第一个参数是一个格式字符串。有关详细信息，请参阅[`printf`文档](http://perldoc.perl.org/functions/printf.html)。当我遇到这类问题时，我总是确保我正确使用了这些功能。:)

您可能只想[打印](http://perldoc.perl.org/functions/print.html)：

```
 print FILE $content; 
```

在您的示例中，您不需要读取整个文件，因为您的替换不会跨行。不要尝试一次读取和写入相同的文件名，而是使用临时文件：

```
open my($in),  "<", $file       or die "cannot open file $file\n";
open my($out), ">", "$file.bak" or die "cannot open file $file.bak\n";

while( <$in> )
    {
    s{status=["'][\w ]*["']\s*}{}gi;
    print $out;
    }

rename "$file.bak", $file or die "Could not rename file\n"; 
```

这也简化为这个命令行程序：

```
% perl -pi.bak -e 's{status=["\']\\w ]*["\']\\s*}{}g' file 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-21T11:06:36.900

呃。您正在使用 printf。

printf 将 "%" 解释为特殊的东西。

改用“打印”。

如果必须使用 printf，请使用

```
printf "%s", $content; 
```

> 重要的提示：

PrintF 代表 Print Format ，就像它在 C 中一样。

fprintf 是 C 中文件 IO 的等价物。

Perl 不是 C。

甚至在 C 中，出于安全原因，将您的内容作为参数 1 也会让您被枪杀。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-21T20:53:38.450

甚至

```
perl -i bak -pe 's{status=["\'][\w ]*["\']\s*}{}gi;' yourfiles 
```

-e 表示“您可以运行以下代码”

-i bak 说“将旧文件重命名为whatever.bak”

-p 在 -e 代码周围添加一个读取-打印循环

Perl 单行代码是一个强大的工具，可以为您省去很多苦差事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-23T16:05:37.687

如果您想要一个了解文档 XML 特性的解决方案（即，仅删除状态属性，而不匹配文本内容），您还可以使用[XML::PYX](http://search.cpan.org/dist/XML-PYX)：

```
$ pyx doc.xml | perl -ne'print unless /^Astatus/' | pyxw 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-04-29T13:24:03.747

那是因为您使用 printf 而不是 print，并且您知道 printf 不打印“%”（因为它会认为您忘记输入格式符号，例如 %s、%f 等），除非您明确提及“%%”。:-)

# c# - 使用什么数据类型？

> ID：308427
> 
> 赞同：0
> 
> 时间：2008-11-21T11:01:02.183
> 
> 标签：c#, types

我需要一个收藏

*   包含一组链接到双精度的对象。
*   这些对的顺序应该由我任意设置（基于我从数据库获得的 int）并且在整个生命周期中是静态的。
*   条目的数量会很小（0 ~ 20），但会有所不同。
*   集合应该是可迭代的。
*   我不必在集合中搜索任何东西。
*   集合初始化后，双精度值将被更改。
*   我想使用现有的数据类型（没有新类），因为它将在我的 asp.net mvc 控制器、视图和服务中使用，我不希望它们都依赖于这个愚蠢的持有者的库班级。

我想

```
IDictionary<int, KeyvaluePair<TheType, double>> 
```

可以解决问题，但是我无法在初始化后设置双精度。

**--Edit--**
我发现 linq 2 sql visual studio 生成的类实际上是部分类，因此您可以根据需要添加任何内容。我通过向部分类添加一个双字段来解决我的问题。
感谢大家提出的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-21T11:10:47.780

听起来你可能只想要一个等价的`KeyValuePair`，但可变的。鉴于您仅将其用作一对值而不是键值对，您可以这样做：

```
public class MutablePair<TFirst, TSecond>
{
    public TFirst First { get; set; }
    public TSecond Second { get; set; }

    public MutablePair()
    {
    }

    public MutablePair(TFirst first, TSecond second)
    {
        First = first;
        Second = second;
    }
} 
```

这不会覆盖 GetHashCode 或 Equals，因为您实际上并没有使用它们（因为它位于值位置）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-21T11:13:15.560

```
struct MyPair
{
    public object TheType;
    public double Value;
}

MyPair[] MyColleccyion = new MyPair[20]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-21T11:12:12.163

好吧，KeyValuePair 是不可变的（这是一件好事），所以你必须替换 KeyValuePair 的整个值，而不仅仅是它的一部分：

```
yourDict[10] = new KeyValuePair<TheType, Double>(yourDict[10].Key, newValue); 
```

...或者像[Jon Skeet](https://stackoverflow.com/users/22656/jon-skeet)一样思考。嘎。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-21T11:13:19.460

这个怎么样

```
public class ListThing<TKey, TValue> : Dictionary<TKey, TValue>
{
    public double DoubleThing { get; set; }

    public ListThing(double value)
    {
        DoubleThing = value;
    }
} 
```

# java - 为什么maven找不到插件？

> ID：308428
> 
> 赞同：4
> 
> 时间：2008-11-21T11:02:54.910
> 
> 标签：java, maven-2, dependencies, maven-plugin

如果我输入命令：

```
mvn dependency:list 
```

[文档](http://maven.apache.org/plugins/maven-dependency-plugin/)建议我将获得项目依赖项的列表。相反，我得到了这个：

```
[INFO] Searching repository for plugin with prefix: 'dependency'.
[INFO] -----------------------------------------------------------
[ERROR] BUILD FAILURE
[INFO] -----------------------------------------------------------
[INFO] Required goal not found: dependency:list 
```

称我为有希望的天真者，但我曾希望 maven 会下载它没有的任何插件。有谁知道可能导致此错误的原因？有谁知道 maven 在哪里存储有关它已安装的插件的信息，以及它们在 maven 存储库中的存储位置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-21T11:25:58.547

您是否尝试过`mvn -cpu dependency:list`（或：） `mvn --check-plugin-updates dependency:list`？可能，您有旧版本的依赖插件，它没有目标`list`

如果这没有帮助，请尝试升级 Maven。由于 Super POM 为最重要的插件（包括依赖插件）提供了 2.0.9 默认版本，因此将下载 2.0 版本（有`list`目标）。

或者您可以尝试从存储库中删除插件的缓存版本（`~/.m2/repository/org/apache/maven/plugins/maven-dependency-plugin/`，其中`~`是用户主目录）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-21T12:55:05.873

我在公司防火墙后面得到了类似的结果。您的配置 (settings.xml) 中的代理设置可能是答案。

```
<proxies>
  <proxy>
   <id>proxy</id> 
   <active>true</active> 
   <username>user</username>
   <password>passwrd</password>
   <protocol>http</protocol>
   <host>example.proxy.name.com</host>
  <port>80</port>
 </proxy>
</proxies> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-21T14:01:56.517

为了回答我自己的问题，多亏了一些评论，settings.xml 文件已经过定制，没有列出中央 maven 存储库。

哎呀。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-16T18:00:51.723

通过在发布到论坛（回答上面发布的许多后续问题）或邮件列表时了解失败尝试的所有详细信息，可以更轻松地解决许多 Maven 问题，这是通过使用调试和异常选项运行 Maven 来完成的像这样切换：`mvn <yourgoal> -X -e`

示例输出将如下所示：

```
[~/Documents/Temp/Scratch] mvn clean -e -X
Using Java version: 1.6
+ Error stacktraces are turned on.
Maven version: 2.0.9
Java version: 1.6.0_07
OS name: "mac os x" version: "10.5.6" arch: "x86_64" Family: "mac"
[DEBUG] Building Maven user-level plugin registry from: '/Users/mccm06/.m2/plugin-registry.xml'
[DEBUG] Building Maven global-level plugin registry from: '/Applications/Dev/apache-maven/conf/plugin-registry.xml'
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Building Maven Default Project
[INFO]    task-segment: [clean]
[INFO] ------------------------------------------------------------------------
[DEBUG] Retrieving parent-POM: org.apache.maven.plugins:maven-plugins::10 for project: null:maven-clean-plugin:maven-plugin:2.2 from the repository.
[DEBUG] Retrieving parent-POM: org.apache.maven:maven-parent::7 for project: org.apache.maven.plugins:maven-plugins:pom:10 from the repository.
[DEBUG] Retrieving parent-POM: org.apache:apache::4 for project: org.apache.maven:maven-parent:pom:7 from the repository.
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Cannot execute mojo: clean. It requires a project with an existing pom.xml, but the build is not using one.
[INFO] ------------------------------------------------------------------------
[DEBUG] Trace
org.apache.maven.lifecycle.LifecycleExecutionException: Cannot execute mojo: clean. It requires a project with an existing pom.xml, but the build is not using one.
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:583)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.java:499)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:478)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:330)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:291)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:142)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:336)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:129)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:287)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
        at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
        at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
        at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: org.apache.maven.plugin.MojoExecutionException: Cannot execute mojo: clean. It requires a project with an existing pom.xml, but the build is not using one.
        at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:377)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:558)
        ... 16 more
[INFO] ------------------------------------------------------------------------
[INFO] Total time: < 1 second
[INFO] Finished at: Mon Feb 16 10:59:39 MST 2009
[INFO] Final Memory: 2M/7M
[INFO] ------------------------------------------------------------------------ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-21T11:47:59.690

尝试最新的 maven 版本，通常升级到新版本可以解决问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-10T06:48:10.657

虽然与解决您的问题无关，但首先您应该执行`install`，然后才尝试为您的插件执行目标。

# c# - Log4Net：以编程方式指定多个记录器（带有多个文件附加器）

> ID：308436
> 
> 赞同：36
> 
> 时间：2008-11-21T11:06:11.067
> 
> 标签：c#, log4net

如何（以编程方式，没有 xml 配置）使用 Log4Net 配置多个记录器？我需要他们写入不同的文件。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2008-11-21T11:51:28.620

[log4net Dashboard 上的这个线程详细介绍了一种方法](http://mail-archives.apache.org/mod_mbox/logging-log4net-user/200602.mbox/%3CDDEB64C8619AC64DBC074208B046611C769745@kronos.neoworks.co.uk%3E)。

总结一下，希望不要扯掉太多代码：

```
using log4net;
using log4net.Appender;
using log4net.Layout;
using log4net.Repository.Hierarchy;

// Set the level for a named logger
public static void SetLevel(string loggerName, string levelName)
{
    ILog log = LogManager.GetLogger(loggerName);
    Logger l = (Logger)log.Logger;

    l.Level = l.Hierarchy.LevelMap[levelName];
    }

// Add an appender to a logger
public static void AddAppender(string loggerName, IAppender appender)
{
    ILog log = LogManager.GetLogger(loggerName);
    Logger l = (Logger)log.Logger;

    l.AddAppender(appender);
}

// Create a new file appender
public static IAppender CreateFileAppender(string name, string fileName)
{
    FileAppender appender = new
        FileAppender();
    appender.Name = name;
    appender.File = fileName;
    appender.AppendToFile = true;

    PatternLayout layout = new PatternLayout();
    layout.ConversionPattern = "%d [%t] %-5p %c [%x] - %m%n";
    layout.ActivateOptions();

    appender.Layout = layout;
    appender.ActivateOptions();

    return appender;
}

// In order to set the level for a logger and add an appender reference you
// can then use the following calls:
SetLevel("Log4net.MainForm", "ALL");
AddAppender("Log4net.MainForm", CreateFileAppender("appenderName", "fileName.log"));

// repeat as desired 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T09:54:48.520

```
using System;
using Com.Foo;
using System.Collections.Generic;
using System.Text;
using log4net.Config;
using log4net;
using log4net.Appender;
using log4net.Layout;
using log4net.Repository.Hierarchy;

public class MyApp
{

    public static void SetLevel(string loggerName, string levelName)
    {
        ILog log = LogManager.GetLogger(loggerName);
        Logger l = (Logger)log.Logger;

        l.Level = l.Hierarchy.LevelMap[levelName];
    }

    // Add an appender to a logger
    public static void AddAppender(string loggerName, IAppender appender)
    {
        ILog log = LogManager.GetLogger(loggerName);
        Logger l = (Logger)log.Logger;

        l.AddAppender(appender);
    }
    // Add an appender to a logger
    public static void AddAppender2(ILog log, IAppender appender)
    {
       // ILog log = LogManager.GetLogger(loggerName);
        Logger l = (Logger)log.Logger;

        l.AddAppender(appender);
    }

    // Create a new file appender
    public static IAppender CreateFileAppender(string name, string fileName)
    {
        FileAppender appender = new
            FileAppender();
        appender.Name = name;
        appender.File = fileName;
        appender.AppendToFile = true;

        PatternLayout layout = new PatternLayout();
        layout.ConversionPattern = "%d [%t] %-5p %c [%logger] - %m%n";
        layout.ActivateOptions();

        appender.Layout = layout;
        appender.ActivateOptions();

        return appender;
    }

    private static readonly ILog log = LogManager.GetLogger(typeof(MyApp));
    static void Main(string[] args)
    {
        BasicConfigurator.Configure();
        SetLevel("Log4net.MainForm", "ALL");
        AddAppender2(log, CreateFileAppender("appenderName", "fileName.log"));
        log.Info("Entering application.");
        Console.WriteLine("starting.........");
        log.Info("Entering application.");
        Bar bar = new Bar();
        bar.DoIt();
        Console.WriteLine("starting.........");
        log.Error("Exiting application.");
        Console.WriteLine("starting.........");
    }
}

namespace Com.Foo
{
    public class Bar
    {
        private static readonly ILog log = LogManager.GetLogger(typeof(Bar));

        public void DoIt()
        {
            log.Debug("Did it again!");
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-08-07T14:23:53.420

我希望这会有所帮助，它配置了一个简单的控制台记录器。

```
static void Main(string[] args)
{
    const string logLayoutPattern =
        "[%date %timestamp][%level] %message %newline" +
        "Domain: %appdomain, User: %username %identity %newline" +
        "%stacktracedetail{10} %newline" +
        "%exception %newline";

    var wrapperLogger = LogManager.GetLogger(MethodBase.GetCurrentMethod().DeclaringType);
    var logger = (Logger) wrapperLogger.Logger;
    logger.Hierarchy.Root.Level = Level.All;

    var consoleAppender = new ConsoleAppender
    {
        Name = "ConsoleAppender",
        Layout = new PatternLayout(logLayoutPattern)
    };

    logger.Hierarchy.Root.AddAppender(consoleAppender);
    logger.Hierarchy.Configured = true;

    wrapperLogger.Debug("Hello");
    Console.ReadKey();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-04T09:21:57.837

我将 Blair Conrad 的答案中的代码和 Philipp M 在这篇文章中的代码混合在一起：

[stackoverflow.com/questions/16336917/can-you-configure-log4net-in-code-instead-of-using-a-config-file](https://stackoverflow.com/questions/16336917/can-you-configure-log4net-in-code-instead-of-using-a-config-file)

我将结果编译成我在项目中引用的 dll 并像这样调用，通常在主程序的第一行：

```
public static Log = new Log4NetWrapper.LogWrapper().Setup(@"c:\myLog.log", "TestLog"); 
```

这是DLL中的代码：

```
public class LogWrapper
    {
        public ILog Setup(string logFilePath, string logName, string maxFileSize = "10MB")
        {
            var patternLayout = new PatternLayout();
            patternLayout.ConversionPattern = "%date [%thread] %-5level %logger - %message%newline";
            patternLayout.ActivateOptions();

            var roller = new RollingFileAppender();
            roller.AppendToFile = true;
            roller.File = logFilePath;
            roller.Layout = patternLayout;
            roller.MaxSizeRollBackups = 5;
            roller.MaximumFileSize = maxFileSize;
            roller.RollingStyle = RollingFileAppender.RollingMode.Size;
            roller.StaticLogFileName = true;
            roller.ActivateOptions();
            //hierarchy.Root.AddAppender(roller);

            var memory = new MemoryAppender();
            memory.ActivateOptions();

            ILog log = LogManager.GetLogger(logName);
            var l = (Logger)log.Logger;
            l.AddAppender(roller);
            l.AddAppender(memory);

            l.Level = l.Hierarchy.LevelMap["Debug"];
            l.Repository.Configured = true;
            return log;
        }
    } 
```

当然可以根据需要向构造函数添加参数或创建覆盖。

# php - 搜索试图在 PHP 中找到 ' 的字符串

> ID：308438
> 
> 赞同：2
> 
> 时间：2008-11-21T11:07:13.967
> 
> 标签：php

我正在使用 tinyMCE，而且相当烦人的是，它用等效的 HTML 数字替换了我所有的撇号。现在大多数时候这不是问题，但由于某种原因，我在存储撇号替换时遇到了问题。所以我必须搜索字符串并将它们全部替换。任何帮助将非常感激

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-21T11:09:08.127

你试过了吗：

```
$string = str_replace("&#39;", "<replacement>", $string); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-21T12:08:28.307

您想从 HTML 实体中解码的只是撇号，还是所有内容？

```
print html_entity_decode("Hello, that&#39;s an apostophe.", ENT_QUOTE); 
```

将打印

```
Hello, that's an apostrophe. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-21T13:17:26.343

既然可以解决问题，为什么还要解决问题？您只需打开 TinyMCE 实体编码*。更多信息：[这里](http://wiki.moxiecode.com/index.php/TinyMCE:Configuration/entity_encoding)

*除非您希望对所有其他字符进行编码，否则就是这样。

# trace - sp_trace_setfilter 列数据类型

> ID：308442
> 
> 赞同：1
> 
> 时间：2008-11-21T11:11:33.740
> 
> 标签：trace, sql-server-profiler

任何人都知道我在哪里可以找到用于设置跟踪过滤器的列列表，我知道系统 ID 号，因为我从 MSDN 得到了这个，但我需要包含所有数据类型的列表，但我似乎无法在任何地方找到它。 ..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-07T19:25:06.843

它们在 sp_trace_setevent 页面上的 BooksOnline 中列出： [链接](http://msdn.microsoft.com/en-us/library/ms186265.aspx)

# c++ - 用于 C++ 的 Netbeans 或 Eclipse？

> ID：308450
> 
> 赞同：37
> 
> 时间：2008-11-21T11:14:08.540
> 
> 标签：c++, eclipse, netbeans

我目前正在做一个宠物项目，需要在 Windows、Mac、Linux 和 Solaris 上进行 C++ 开发，我已经将其范围缩小到 Netbeans 和 Eclipse，所以我想知道哪个作为 C++ 编辑器更可靠。我只需要可靠的编辑，模板代码和外部库的良好自动完成功能，以及项目文件管理，构建工具是外部的，所以这里无关紧要，用于我的比较。

因此，哪个是更好的选择？

注意：我知道我应该使用 emacs 或 vim，但问题是，至少我的理论是，我是左撇子，所以我更多地使用大脑的右侧（设计、创造力）而不是左侧（逻辑，内存），所以我根本无法使用emacs或vim，我的大脑根本不兼容，我也尝试了很多次，甚至使用了几个月的emacs但它让我发疯了......

谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-11-21T12:51:33.150

我没有使用过 NetBeans，但 Eclipse CDT（C 开发者工具，包括 C++），尤其是最新版本，确实非常出色：

*   语法检查和拼写检查
*   语法高亮区分库调用和函数调用以及局部变量和成员变量，甚至应用于#ifdef'ed out 的代码
*   宏扩展可以引导您完成每个级别的宏应用程序或显示最终结果，即使是非常复杂的 Boost 预处理器宏
*   动态更新以显示您在文件中的位置的文件和类大纲视图。（我使用的商业 IDE 无法做到这一点。）
*   强大、灵活的查找/替换和在文件中查找功能具有完整的 Perl 风格的正则表达式支持。它还应该能够在文件中进行 C/C++ 查找，可以基于语言语义进行搜索（例如，只查找引用，而不是声明），尽管这有时对我不起作用。
*   自动跟踪 TODO 和其他评论标签
*   鼠标悬停提示显示变量或函数的确切声明，包括任何注释，而不仅仅是声明变量或函数的位置。（同样，我使用的商业 IDE 无法做到这一点。）
*   通过 Subversion、Doxygen 等插件支持。
*   一些重构支持 - 重命名、提取常量、提取函数等
*   代码重新格式化，基于用户可定义的代码样式

您专门询问了它的编辑器；Eclipse 编辑器足够好，当我不需要商业 IDE 的表单设计器时，我会优先使用它而不是商业 IDE。

Eclipse 的调试器集成（使用 gdb）可以忍受但不是很好，而且它的内存使用率很高。一些功能（例如 C/C++ Find in Files）不能可靠地工作或需要重新索引（这很耗时），但没有明显的原因，但最新版本在这方面似乎更可靠。

使用过 NetBeans 的人可以填写比较吗？

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-11-21T11:36:47.590

我不时在 Solaris 上使用 Netbeans，最新的 (6.5) 版本非常简洁。它具有您需要的所有功能，也许自动完成功能可以更好地工作，但我的代码库非常糟糕，所以它可能是它的结果。请记住，您需要强大的机器，如果它是您的 PC，那没关系，但远程服务器上的 Netbeans（就像我尝试过的那样）真的很慢，除非您拥有不错的硬件。很少有针对 C++ 的简单重构以及不错的预览选项，绝对值得一试。

您可以从这里获得完整的 Sun C++ 包：http: [//developers.sun.com/sunstudio/downloads/express/](http://developers.sun.com/sunstudio/downloads/express/)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2008-11-21T11:58:25.207

就我个人而言，我更喜欢 NetBeans - 项目管理非常好，而且我的启动和运行速度比 Eclipse 快。但是，它是主观的和 YMMV。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2008-11-21T14:18:20.353

恕我直言，它们既臃肿又缓慢。你为什么不试试[Code::Blocks](http://www.codeblocks.org/)呢？它专门针对 C++ 开发人员，性能比 Eclipse 或 NetBeans 好得多。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2010-05-24T12:35:24.567

只是为了给关于 eclipse/netbeans 的速度或性能问题的评论提供 2 美分：

如果 IDE 很慢，唯一糟糕的部分是编辑器组件。与这里的一些明显肤浅的断言相比，我发现 Eclipse 中的编辑器组件非常活泼。IDE 的其余部分容易出现滞后，但编辑器本身提供了无可挑剔的性能。我有一台 1.4GHz 笔记本电脑并使用 Eclipse。Eclipse 的编辑器组件比 Code::Blocks 或 KDevelop 更快（尤其是在滚动/浏览文本时）。这样做的简单原因是：Eclipse 缓存所有内容，尤其是语法高亮等，其他 IDE 似乎试图“实时”执行此操作并失败。在过去的版本中，c++ 索引器是造成问题的原因。它在内存不足时崩溃，没有它，任何漂亮的搜索功能都不起作用，等等。对于当前版本，我只能说：它都是固定的，它就像一个魅力。它'

如果您安装 Eclipse CDT，您将获得很多不错的功能，正如其他回复中已经解释的那样，大多数其他 IDE 仅提供多个插件。（我不了解netbeans，从未使用过它。）每次都让我兴奋的功能是当我将鼠标悬停在某个标识符上时的智能工具提示。Eclipse 让我可以直接访问可能在某处输入的任何 javadoc 以及定义它的文件，甚至可以让我在工具提示中滚动！因此，我随处可得每个标识符的完整上下文。我更喜欢它而不是 Visual Studio 以及我尝试过的几乎所有其他东西。

诚然，您在 IDE 中执行的其他所有操作都可能更快捷。对我来说，最重要的是，编辑器速度很快，而且 eclipse 的工作做得很好。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-11-21T15:49:17.563

我唯一讨厌 Netbeans 的是调试器与 Eclipse 相比有点慢。除此之外，Netbeans 将是我的选择。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2011-05-02T02:03:55.293

如果你在 linux 下运行 eclipse，你可以使用 valgrind 来解决内存泄漏问题。Eclipse 对我来说足够好地支持 gdb，但我找不到像样的内存泄漏插件，而 valgrind 集成插件处于测试阶段。这个博客为它做了一个很棒的教程：http: [//kapo-cpp.blogspot.com/2007/02/detecting-memory-leak.html](http://kapo-cpp.blogspot.com/2007/02/detecting-memory-leak.html)。我在 linux 上为 eclipse 投了票。PS 真正的男人只使用 ed。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-11-22T19:10:36.710

code::blocks 中的 c++ 解析器似乎无法与 netbeans 和 eclipse 相提并论：根据[code::block 的 wiki](http://wiki.codeblocks.org/index.php?title=Code::Completion_Rewrite "代码块的维基")，它需要完全重写。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-11-21T13:00:26.050

它们都非常适合 C++ 开发，但我最近发现 NetBeans 中缺少的一件事是似乎没有可用于 CppUnit 或任何其他 C++ 单元测试框架的插件。如果我错了，我很想得到对[这个问题的更多回答。](https://stackoverflow.com/questions/283915/is-there-a-c-unit-testing-framwork-plugin-available-for-netbeans)

（另外，我知道 NetBeans 的开发一直在进行，所以也许很快有人会想出一个插件。）

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-11-21T14:30:13.933

对于 C++，我不得不同意 Nemanja Trifunovic 并说你应该看看[Code::Blocks](http://www.codeblocks.org/)。它是免费的，并且具有出色的性能。几年前，我从 Bloodshed Dev-C++ （基本上不再支持）切换后开始使用它，并且非常高兴。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2011-11-10T13:33:14.570

我是 Eclipse 的忠实拥护者，并已将其广泛用于 Java 和 C++ 编程。但是，目前，它不支持远程 C++ 开发。我尝试了 Netbeans Remote C++ 开发，发现它非常出色且非常简单。话虽如此，C++ 解析不如 Eclipse 流畅，自动完成有时会妨碍并且不会消失，而我遇到的最大问题是由于性能非常缓慢而需要不断地重新启动 IDE。我希望Eclipse可以继续构建它的Remote C++开发能力，并以Netbeans为例说明如何让它变得非常简单！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-11-21T12:56:43.060

使用 eclipse 有一段时间了，我最近看了 netbeans，必须说我非常喜欢它。归根结底，它们都是极好的想法，这是一个非常主观的选择。在我看来，netbeans 似乎比 eclipse 快一点，但这可能只是一种感觉。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2011-09-08T09:40:22.797

到目前为止，我一直在使用 Net Beans。但由于 NetBeans 中的问题，我被迫切换到 Eclipse。当您处理具有大量源文件的项目时，有一个 Net Beans 错误会导致 IDE 无用。许多人一直在抱怨，但似乎 Net Beans 团队无法解决导致 IDE 在解析源文件时无法响应的问题。:(

报告于： [Petr Dvorak - Oracle 博客](http://blogs.oracle.com/joshis/entry/netbeans_ide_is_scanning_parsing)

作为一种解决方案，他们提供了一种对我不起作用的按需解析机制:( [Net Beans Wiki](http://wiki.netbeans.org/ScanOnDemand)

# vim - vim BufEnter autocmd 在 ftp 文件上失败

> ID：308452
> 
> 赞同：4
> 
> 时间：2008-11-21T11:14:28.740
> 
> 标签：vim

我有一个自动命令在我的 .vimrc 中触发了 BufEnter 以 cd 进入当前缓冲区目录（非常有用）

```
au   BufEnter *   execute ":lcd " . expand("%:p:h") 
```

问题是这在 FTP 文件上失败（如您所料）。真正的问题是错误消息告诉我它失败了。有什么方法可以抑制错误消息，或者也可以“cd”到当前目录以获取 FTP 文件（以便更容易打开目录中的其他文件）。

只是让错误消息消失会非常有帮助！我用 :silent 命令尝试了各种实验，但要么它不适用于这个命令，要么我没有把它放在正确的位置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-22T02:18:15.580

你试过了吗：

```
au BufEnter * execute ":silent! lcd " . expand("%:p:h") 
```

`:silent!`应该跳过错误和消息。

作为旁注，还请查看`:h 'autochdir'`哪个执行类似于您的自动命令的操作。（但请参阅`:h netrw-incompatible`注意事项。）

# .net - Web参考和服务参考之间的区别？

> ID：308454
> 
> 赞同：136
> 
> 时间：2008-11-21T11:14:51.113
> 
> 标签：.net, wcf, asmx

WCF 中的 Web 引用和服务引用有什么区别？WCF 中哪个更可取？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2009-04-14T15:27:53.567

这里的低级答案是 Web 引用将创建一个客户端代理类，它允许您的代码与通过 WSDL 描述并通过 SOAP 或 HTTP GET 进行通信的 Web 服务进行通信（其他海报表明它只是 ASMX，但Web 引用也可以与基于 Java 的 Web 服务或基于 Python 的或 Ruby 对话，只要它们都与 WSDL 对话并符合 WS-I 互操作性标准）。

服务引用将创建与基于 WCF 的服务通信的客户端代理类：无论该 WCF 服务是否是 Web 服务。

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2010-06-04T11:54:08.353

Web Reference 允许您与任何基于实现 WS-I Basic Profile 1.1 的技术的任何服务进行通信，并将相关元数据公开为 WSDL。在内部，它使用客户端的 ASMX 通信堆栈。

服务引用允许您与任何基于实现 WCF 支持的许多协议（包括但不限于 WS-I Basic Profile）的任何技术的任何服务进行通信。在内部，它使用客户端的 WCF 通信堆栈。

请注意，这两个定义都非常广泛，并且都包括不是用 .NET 编写的服务。

完全有可能（尽管不推荐）添加指向 WCF 服务的 Web 引用，只要 WCF 端点使用`basicHttpBinding`或一些兼容的自定义变体。

还可以添加指向 ASMX 服务的服务引用。编写新代码时，**您应该始终使用服务引用**，因为它更灵活且面向未来。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2008-11-21T12:15:12.083

服务引用是用于添加对所有 WCF 服务（它们可能不是 Web 服务）的引用的较新接口，而 Web 引用特别关注 ASMX Web 引用。

您可以通过添加服务参考中的高级选项访问网络参考（如果我没记错的话）。

我会使用服务引用，因为据我了解，它是两者中较新的机制。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-11-21T12:34:07.770

服务引用处理端点和绑定，它们是完全可配置的。它们允许您通过任何传输协议（HTTP、TCP、共享内存等）将客户端代理指向 WCF

它们旨在与 WCF 一起使用。

如果您使用 WebProxy，您几乎将自己绑定到使用 WCF over HTTP

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-11-23T00:54:54.810

要考虑的另一点是，服务接口的新 UI 将为您提供更大的灵活性来创建代理类。例如，如果它们匹配，它将允许您将数据合同映射到现有的 dll（实际上这是默认行为）。

# sql - 内联查询是个坏主意吗？

> ID：308456
> 
> 赞同：3
> 
> 时间：2008-11-21T11:16:18.333
> 
> 标签：sql, postgresql

我有一个表，其中包含不同站点上生成器的运行时，我想为每个站点选择最新条目。每台发电机每周运行一次或两次。

我有一个可以执行此操作的查询，但我想知道这是否是最佳选择。我不禁认为使用 WHERE x IN (SELECT ...) 是懒惰的，而不是制定查询的最佳方式 - 任何查询。

表格如下：

```
CREATE TABLE generator_logs (
    id integer NOT NULL,
    site_id character varying(4) NOT NULL,
    start timestamp without time zone NOT NULL,
    "end" timestamp without time zone NOT NULL,
    duration integer NOT NULL
); 
```

和查询：

```
SELECT id, site_id, start, "end", duration 
FROM generator_logs
WHERE start IN (SELECT MAX(start) AS start 
                FROM generator_logs 
                GROUP BY site_id) 
ORDER BY start DESC 
```

没有大量的数据，所以我不担心优化查询。但是，我确实必须在具有数百万行的表上做类似的事情（就我而言，大表！）并且优化更为重要。

那么有没有更好的查询呢，内联查询通常是个坏主意吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-21T11:37:41.470

您的查询不应该相关吗？IE：

```
SELECT id, site_id, start, "end", duration 
FROM generator_logs g1
WHERE start = (SELECT MAX(g2.start) AS start 
               FROM generator_logs  g2
               WHERE g2.site_id = g1.site_id) 
ORDER BY start DESC 
```

否则，您可能会选择开始值恰好与不同站点的最新开始匹配的非最新日志。

或者：

```
SELECT id, site_id, start, "end", duration 
FROM generator_logs g1
WHERE (site_id, start) IN (SELECT site_id, MAX(g2.start) AS start 
                           FROM generator_logs  g2
                           GROUP BY site_id)
ORDER BY start DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-21T12:44:50.463

我会使用连接，因为它们的性能比“IN”子句要好得多：

```
select gl.id, gl.site_id, gl.start, gl."end", gl.duration 
from 
    generator_logs gl
    inner join (
        select max(start) as start, site_id
        from generator_logs 
        group by site_id
    ) gl2
        on gl.site_id = gl2.site_id
        and gl.start = gl2.start 
```

同样正如[托尼指出的那样，](https://stackoverflow.com/questions/308456/are-inline-queries-a-bad-idea#308505)您在原始查询中缺少相关性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-21T11:22:49.677

在 MYSQL 中可能会出现问题，因为 Last i Checked 它无法有效地优化子查询（即：通过查询重写）

许多 DBMS 具有遗传查询规划器，无论您的输入查询结构如何，它们都会做同样的事情。

MYSQL 在某些情况下会为这种情况创建一个临时表，而其他时候则不会，根据具体情况，索引、条件、子查询仍然可以相当快。

有些人抱怨子查询很难阅读，但如果你将它们分叉成局部变量，它们就很好了。

```
$maxids = 'SELECT MAX(start) AS start FROM generator_logs GROUP BY site_id';
$q ="     
    SELECT id, site_id, start, \"end\", duration 
       FROM generator_logs
       WHERE start IN ($maxids) 
       ORDER BY start DESC
"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-14T11:14:55.527

这个问题 - 不仅查找 the `MAX`，还查找相应行的其余部分 - 是一个常见问题。幸运的是，Postgres 提供了一种很好的方法来通过一个查询来做到这一点，使用`DISTINCT ON`：

```
SELECT DISTINCT ON (site_id)
  id, site_id, start, "end", duration
FROM generator_logs
ORDER BY site_id, start DESC; 
```

`DISTINCT ON (site_id)`表示“每返回一条记录`site_id`”。order by 子句确定是哪条记录。但是请注意，这与您的原始查询略有不同 - 如果您有两个相同站点的`start`记录，则您的查询将返回两条记录，而这只返回一条。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-14T11:33:19.820

*查找每组*具有 MAX 值的记录的一种方法是选择那些*在同一组*中没有具有更高值的记录的记录：

```
SELECT id, site_id, "start", "end", duration 
FROM generator_logs g1
WHERE NOT EXISTS (
    SELECT 1
    FROM generator_logs g2
    WHERE g2.site_id = g1.site_id
    AND g2."start" > g1."start"
    ); 
```

# design-patterns - 您是否在具有闭包/委托/函数指针的编程语言中使用模板方法模式？

> ID：308460
> 
> 赞同：6
> 
> 时间：2008-11-21T11:18:13.447
> 
> 标签：design-patterns, functional-programming, function, delegates, closures

在过去的 8 年里，我一直在 C# 和 Java 之间来回穿梭。

让我印象深刻的一件事是我已经完全停止在 C# 中使用“模板方法”设计模式。实际上，在 C# 中，我已经开始将这种模式视为一种反模式。

[http://en.wikipedia.org/wiki/Template_method_pattern](http://en.wikipedia.org/wiki/Template_method_pattern)

回到 Java，我发现这种模式是活生生的。我仍然认为它看起来很古老，但意识到在 java 中没有其他方法可以做到这一点。Java 看起来也很古老；）

既然这无论如何都会出现，为什么它是反模式？

*   很多时候，它会因为“错误的原因”耗尽你的继承层次结构。
*   基类倾向于散布各种不相关的代码。
*   它迫使您锁定设计，通常是在开发过程的早期阶段。（在很多情况下过早锁定）
*   在以后的阶段改变这一点变得越来越难。

因此，对于闭包/委托/函数指针，您通常会传递一些函数而不是子类化。

那么回到问题：

如果您的语言有闭包/委托/函数，您是否使用模板方法，何时使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-21T11:24:16.693

当我使用 Java 时，是的。但是对于具有“闭包/委托/功能”的语言，在我的情况下，Lua，不，我不再这样做了，相反，我越来越倾向于[装饰模式](http://en.wikipedia.org/wiki/Decorator_pattern)来满足我的大部分需求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-01-14T18:06:27.173

是的，我一直使用模板方法，在 D 编程语言中。闭包、委托和函数指针本质上与基类非常松散耦合。当您想要这种松散耦合时，这是一件好事。另一方面，有时您正在自定义的行为本质上与基类非常紧密地耦合。这种行为在几乎任何其他情况下都是无用的。在需要这种耦合的情况下，模板方法模式是最简洁、最简单的表达方式。

一个简单的测试是，如果基类和可定制行为之间的通信是单向的，即基类调用可定制行为，那么您应该始终使用策略/闭包/委托/函数指针。如果可定制的行为需要对基类的引用以便它可以调用方法等，那么模板方法模式通常是最简单的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-07-20T17:25:05.430

在重新访问此线程时，我将再添加一个答案：

当您自定义基础对象的策略需要相互了解并且仅在所有可能组合的非常有限的子集中才有意义时，模板方法模式比策略模式更好。例如，假设您的基类有一个具体的函数`doIt()`和钩子`beforeDoIt()`，旨在允许策略自行初始化，并`afterDoIt()`允许策略自行清理。您不想独立设置这些行为，因为它们只有在配对时才有意义。

# c# - 如何在 C# 中迭代 可枚举集合时修改或删除项目

> ID：308466
> 
> 赞同：38
> 
> 时间：2008-11-21T11:21:11.863
> 
> 标签：c#, collections, iteration

我必须从数据表中删除一些行。我听说在迭代时更改集合是不行的。因此，我应该首先遍历数据表并将所有行添加到列表中，然后遍历列表并标记删除的行。这是什么原因，我有什么选择（而不是使用我的意思的行列表）？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2008-11-21T14:02:28.840

向后迭代 List 听起来是一种更好的方法，因为如果您删除一个元素而其他元素“落入差距”，那并不重要，因为您已经看过这些。此外，您不必担心您的计数器变量会变得大于 .Count。

```
 List<int> test = new List<int>();
        test.Add(1);
        test.Add(2);
        test.Add(3);
        test.Add(4);
        test.Add(5);
        test.Add(6);
        test.Add(7);
        test.Add(8);
        for (int i = test.Count-1; i > -1; i--)
        {
            if(someCondition){
                test.RemoveAt(i);
            }
        } 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2008-11-22T06:19:38.057

采用@bruno 代码，我会倒着做。

因为当您向后移动时，缺少的数组索引不会干扰循环的顺序。

```
var l = new List<int>(new int[] { 0, 1, 2, 3, 4, 5, 6 });

for (int i = l.Count - 1; i >= 0; i--)
    if (l[i] % 2 == 0)
        l.RemoveAt(i);

foreach (var i in l)
{
    Console.WriteLine(i);
} 
```

但严重的是，这些天，我会使用 LINQ：

```
var l = new List<int>(new int[] { 0, 1, 2, 3, 4, 5, 6 });

l.RemoveAll(n => n % 2 == 0); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2008-11-21T11:29:44.513

如果使用简单`for`循环，则可以从集合中删除元素。

看看这个例子：

```
 var l = new List<int>();

        l.Add(0);
        l.Add(1);
        l.Add(2);
        l.Add(3);
        l.Add(4);
        l.Add(5);
        l.Add(6);

        for (int i = 0; i < l.Count; i++)
        {
            if (l[i] % 2 == 0)
            {
                l.RemoveAt(i);
                i--;
            }
        }

        foreach (var i in l)
        {
            Console.WriteLine(i);
        } 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-11-21T13:10:29.447

由于您正在使用 DataTable 并且需要能够使用表适配器将任何更改持久化回服务器（请参阅注释），以下是您应该如何删除行的示例：

```
DataTable dt;
// remove all rows where the last name starts with "B"
foreach (DataRow row in dt.Rows)
{
    if (row["LASTNAME"].ToString().StartsWith("B"))
    {
        // mark the row for deletion:
        row.Delete();
    }
} 
```

对行调用 delete 会将其 RowState 属性更改为 Deleted，但将删除的行保留在表中。如果您在将更改持久化回服务器之前仍需要使用此表（例如，如果您想显示表的内容减去已删除的行），则需要在迭代时检查每行的 RowState 像这样：

```
foreach (DataRow row in dt.Rows)
{
    if (row.RowState != DataRowState.Deleted)
    {
        // this row has not been deleted - go ahead and show it
    }
} 
```

从集合中删除行（如布鲁诺的回答）将破坏表适配器，通常不应使用 DataTable 完成。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-11-21T11:44:58.120

一个while循环会处理这个：

```
int i = 0;
while(i < list.Count)
{
    if(<codition for removing element met>)
    {
        list.RemoveAt(i);
    }
    else
    {
        i++;
    }
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-12-24T04:01:46.260

如果您通过使用委托而不是 lambda 表达式来定位 .NET 2.0（无 LINQ/lambda 表达式），也可以使用 chakrit 的解决方案：

```
public bool IsMatch(int item) {
    return (item % 3 == 1); // put whatever condition you want here
}
public void RemoveMatching() {
    List<int> x = new List<int>();
    x.RemoveAll(new Predicate<int>(IsMatch));
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-11-21T11:54:30.097

正如您所说，在迭代列表时删除或添加列表可能会破坏它。

我经常使用两个列表的方法来解决问题：

```
ArrayList matches = new ArrayList();   //second list

for MyObject obj in my_list
{

    if (obj.property == value_i_care_about)
        matches.addLast(obj);
}

//now modify

for MyObject m in matches
{
    my_list.remove(m); //use second list to delete from first list
}

//finished. 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-22T05:41:58.040

当我需要从我正在枚举的集合中删除一个项目时，我通常会反向枚举它。

# c# - 找出是否有两个 ICollection 的最快方法 集合包含相同的对象

> ID：308476
> 
> 赞同：4
> 
> 时间：2008-11-21T11:24:35.383
> 
> 标签：c#, performance, collections, c#-2.0, equality

找出两个`ICollection<T>`集合是否包含完全相同的条目的最快方法是什么？蛮力很清楚，我想知道是否有更优雅的方法。

我们使用的是 C# 2.0，所以请尽可能不要扩展方法！

编辑：对于有序和无序的集合，答案都会很有趣，并且希望每个集合都不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-21T11:42:07.830

使用 C5

[http://www.itu.dk/research/c5/](http://www.itu.dk/research/c5/)

[包含所有](http://www.itu.dk/research/c5/Release1.1/c5doc/types/C5.ICollection_1.htm#T:C5.ICollection%601|M:C5.ICollection%601.ContainsAll%60%601(System.Collections.Generic.IEnumerable%7B%60%600%7D))

> " 检查提供的集合中的所有项目是否都在这个包中
> （计算多重性）。
> 要查找的项目。
> 
> 如果找到所有项目，则为真。"

```
[Tested]

public virtual bool ContainsAll<U>(SCG.IEnumerable<U> items) where U : T
{
  HashBag<T> res = new HashBag<T>(itemequalityComparer);

  foreach (T item in items)
    if (res.ContainsCount(item) < ContainsCount(item))
      res.Add(item);
    else
      return false;

  return true;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-21T11:38:11.563

首先比较一下。**如果集合的计数**相同，则对所有元素进行蛮力比较。最坏的情况是 O(n)。这是在元素的顺序需要相同的情况下。

顺序不一样的第二种情况，您需要使用字典来存储在集合中找到的元素的计数：这是一个可能的算法

*   比较集合计数：如果它们不同，则返回 false
*   迭代第一个集合
    *   如果字典中不存在项目，则添加并输入 Key = Item, Value = 1（计数）
    *   如果项目存在，则增加字典中项目的计数；
*   迭代第二个集合
    *   如果项目不在字典中，则返回 false
    *   如果项目在字典中，则项目的递减计数
        *   如果 count == 0 则删除项目；
*   返回 Dictionary.Count == 0;

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-21T11:47:49.847

对于有序集合，您可以使用`SequenceEqual()`定义的扩展方法`System.Linq.Enumerable`：

```
if (firstCollection.SequenceEqual(secondCollection)) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-21T11:35:15.580

您的意思是相同的条目或相同顺序的相同条目？

无论如何，假设您想比较它们是否以相同的顺序包含相同的条目，“蛮力”实际上是您在 C# 2.0 中的唯一选择。我知道你说的非优雅是什么意思，但是如果原子比较本身是 O(1)，那么整个过程应该是 O(N)，这还**不错**。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-21T11:37:18.570

如果条目需要以相同的顺序排列（除了相同），那么我建议 - 作为一种优化 - 您同时迭代两个集合并比较每个集合中的当前条目。否则，蛮力就是要走的路。

哦，还有另一个建议——你可以为集合类重写 Equals 并在其中实现相等的东西（不过取决于你的项目）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-07-10T16:44:12.517

同样，使用具有两组的 C5 库，您可以使用：

```
C5.ICollection<T> set1 = C5.ICollection<T> ();
C5.ICollection<T> set2 = C5.ICollection<T> ();
if (set1.UnsequencedEquals (set2)) {
  // 做点什么
}

```

C5 库包含一个启发式算法，它首先实际测试两组的未排序哈希码（请参阅 参考资料`C5.ICollection<T>.GetUnsequencedHashCode()`），这样如果两组的哈希码不相等，它就不需要遍历每个项目来测试是否相等。

您还需要注意的是，它`C5.ICollection<T>`继承自`System.Collections.Generic.ICollection<T>`，因此您可以在仍然使用 .NET 接口的同时使用 C5 实现（尽管您可以通过 .NET 的吝啬接口访问较少的功能）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-21T11:31:51.607

蛮力需要 O(n) - 比较所有元素（假设它们已排序），我认为这是你能做的最好的 - 除非数据的某些属性使它更容易。

我猜对于未排序的情况，它的 O(n*n)。

在这种情况下，我认为基于[合并排序](http://en.wikipedia.org/wiki/Merge_sort)的解决方案可能会有所帮助。

例如，您能否对其进行重新建模以使其只有一个系列？或 3 个集合，一个仅用于集合 A，一个仅用于 B，并且两者都用于 - 所以如果 A only 和 B only 是空的 - 那么它们是相同的......我可能完全走错了切线这里...

# c++ - C++ 智能指针性能

> ID：308477
> 
> 赞同：18
> 
> 时间：2008-11-21T11:24:55.367
> 
> 标签：c++, boost, smart-pointers

与裸指针相比，使用智能指针，尤其是 boost::shared_ptr 在时间和内存方面的成本更高？对游戏/嵌入式系统的性能密集型部分使用裸指针是否更好？您会建议对性能密集型组件使用裸指针还是智能指针？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-11-21T12:54:12.020

取消引用智能指针通常是微不足道的，当然对于发布模式的提升。所有 boost 检查都在编译时进行。（智能指针理论上可以跨线程执行智能操作）。这仍然留下了许多其他操作。Nicola 提到了建造、复制和破坏。不过，这不是完整的集合。其他重要的操作是交换、赋值和重置为 NULL。基本上，任何需要智能的操作。

请注意，其中一些操作被一些智能指针排除在外。例如`boost::scoped_ptr`，甚至不能被复制，更不用说被分配了。由于这留下了更少的操作，因此可以针对这些更少的方法优化实现。

事实上，随着 TR1 的出现，编译器很可能使用智能指针比原始指针做得更好。例如，编译器可以证明智能不可复制指针在某些情况下没有别名，仅仅是因为它是不可复制的。想一想：当创建两个指向同一个对象的指针时，就会发生别名。如果第一个指针不能被复制，第二个指针怎么会指向同一个对象呢？（也有办法解决这个问题 - operator* 必须返回一个左值）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-11-21T11:38:02.330

Boost 提供不同的智能指针。一般来说，内存占用（根据智能指针的种类而异）和性能应该不是问题。对于性能比较，您可以查看此[http://www.boost.org/doc/libs/1_37_0/libs/smart_ptr/smarttests.htm](http://www.boost.org/doc/libs/1_37_0/libs/smart_ptr/smarttests.htm)。

正如你所看到的，在性能比较中只考虑了构造、复制和销毁，这意味着取消引用智能指针的成本应该与原始指针的成本相同。

`shared_ptr<>`以下代码段演示了使用 a代替原始指针没有性能损失：

```
#include <iostream>
#include <tr1/memory>

int main()
{
#ifdef USE_SHARED_PTR
    std::tr1::shared_ptr<volatile int> i(new int(1));
#else
    volatile int * i = new int(1);
#endif

    long long int h = 0;

    for(long long int j=0;j < 10000000000LL; j++)
    {
        h += *i;
    }

    std::cout << h << std::endl;
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-11-26T18:17:23.783

处理性能问题的唯一方法是分析您的代码。无论如何，性能问题的最大部分是想象的；只有剖析会向您指出瓶颈所在。

如果事实证明使用智能指针会产生原始指针不会产生的瓶颈，请使用原始指针！在那之前，我不会太担心它；大多数对智能指针的操作都相当快。您可能过于频繁地比较字符串（或类似的东西），以至于它们并不重要。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-21T14:32:01.450

引用计数的智能指针（最常见的类型）只会在复制、创建和删除它们时花费更多。如果你要复制很多，这个额外的成本可能会很大，因为它们中的大多数都是线程安全的。

如果您只想要一个“自动删除”指针，那么有很多诟病的 auto_ptr，或者来自 C++0x 的新的和闪亮的（但还不太支持）unique_ptr。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-11-21T15:02:54.570

当我上次使用 VC6 进行测试时，编译器无法像使用原始指针那样优化使用智能指针的代码。从那以后情况可能会发生变化。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-19T14:01:27.710

`std::vector<T*>`在“手动”管理的（即原始指针）和以类`std::vector<boost::shared_ptr<T> >`的形式存在的中间位置经常被忽视[`boost::ptr_container`](http://www.boost.org/doc/libs/1_38_0/libs/ptr_container/doc/ptr_container.html)。

它们结合了原始指针容器的性能和智能指针容器的便利性（即它们提供人们希望 STL 容器提供的功能`std::auto_ptr`，[如果可行](https://stackoverflow.com/questions/111478/why-is-it-wrong-to-use-stdautoptr-with-stl-containers)的话）。

# ios - 苹果商店拒绝 iPhone 申请的原因

> ID：308479
> 
> 赞同：38
> 
> 时间：2008-11-21T11:25:16.660
> 
> 标签：ios, app-store

任何人都可以帮助我了解 Apple 商店可以拒绝或反对提交任何 iPhone 应用程序的可能原因。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2008-11-21T11:30:07.900

以下是可能的原因（非官方，[来自这里](http://10base-t.com/unofficial-appstore-rejection-criteria/)）：

*   **振动**。不允许在您的应用程序中使用连续振动 - 只允许短时间的振动作为警告。不要试图设置一个计时器来保持振动，它会导致你的应用程序被拒绝。

*   **链接到私有框架**。这很明显，但不知何故在玩弄我们与 MoviePlayer.framework 相关联的东西。这是一个禁忌，在我们取消链接该框架、重新编译然后重新提交时，我们花了大约十天的时间。

*   **表格视图单元格中的编辑处理不当**。也很明显，但请注意，如果启用表格单元格编辑，则必须手动指定哪些单元格应响应编辑控件而哪些不应响应。我们在早期的一个应用程序中有一些随机偏好单元格，可以通过滑动来显示“删除”徽章。当然它没有做任何事情，但苹果公正地认为这种糟糕的设计并拒绝了我们的应用程序。

*   **图标**。确保 57 像素图标与 512 像素版本相同。此外，如果您正在创建应用程序的“精简”和“专业”版本（即免费和付费），请使用不同的图标。对两者使用相同的图标会将您的应用程序直接发送到……您猜对了……垃圾箱。

*   **复制现有功能**。这个更加微妙和阴险，并且可能影响了很大比例的开发人员。除了广为人知的 Podcaster 崩溃之外，来自用户评论的报告表明，Apple 在寻找重复功能时正在撒网。迷你网络浏览器或本质上显示网页的应用程序似乎特别容易受到攻击，即使它们添加了新的和/或有用的功能。远离电子邮件客户端。

*   **使用适当的键盘类型**。如果您的应用程序要求输入电话号码或其他仅数字输入，并且您提供的键盘还包括输入标准字母数字输入的可能性……是的。（感谢 Jeremy1026）

*   **版本号**。如果您的应用程序当前***版本为 0.99 或以下***，您最好考虑对其进行推广，因为 Apple 似乎更喜欢 1.0 及以上版本。我们的一个最近因为是 0.016 而被拒绝，并有一条消息表明我们的版本号甚至不是数字。当我们从头开始重新提交与 1.0 版相同的应用程序时，它通过了。

*   **网络可达性**。如果您的应用需要任何类型的网络访问，您需要确保它在该访问不可用时能够正常工作。如果没有，它将被拒绝。Apple 提供了示例代码来测试它，您可以在大多数情况下按原样使用：[https ://developer.apple.com/library/content/samplecode/Reachability/Introduction/Intro.html](https://developer.apple.com/library/content/samplecode/Reachability/Introduction/Intro.html)

最后但并非最不重要：

*   **胀气**甚至不要尝试。;-) 更新：抱歉，这似乎已经过时了。苹果现在通过“放屁应用”赚了很多钱：[见这篇文章](http://venturebeat.com/2008/12/23/iphone-fart-app-pulls-in-nearly-10000-a-day/)。

**编辑：**

这是最近一篇文章的链接，该文章介绍了[十个没有进入 Apple App Store 的 iPhone 应用程序](http://www.pcworld.com/article/159887/)。

提示：Apple 有一个名为*Application Loader*的 Mac 应用程序，您可以安装它。安装后，它会分析您应用的 zip 文件。它会在提交给 Apple*之前*验证所有证书、图标和其他内容是否正确。使用应用程序加载器可以最大限度地减少应用程序被拒绝的机会。

* * *

另一个有趣的资源：[App Store Roundtable: Transparency and the Approval System](http://theappleblog.com/2009/05/06/app-store-roundtable-transparency-and-the-approval-system/) (appleblog.com)

* * *

另一个编辑：

2010 年 2 月新规则：**“禁止泳装、禁止皮肤、禁止影射”**（来源：[TechCrunch 文章](http://techcrunch.com/2010/02/20/app-store-rules-sexy/)，W [obble 作者的博客](http://chillifresh.com/2010/02/20/5000-apps-banned-the-new-rules/)）

顺便说一句：在 iPhone 3.0 预览活动期间（2009 年 3 月），苹果发言人告诉我们，所有提交的申请中有 96% 获得批准。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2008-11-21T12:23:15.280

![替代文字](https://www.wired.com/images_blogs/photos/uncategorized/2008/09/17/jotapps_2.jpg)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2010-09-20T05:45:19.113

Apple 现在（截至 2010 年 9 月 9 日）发布了他们的官方应用商店审查指南列表：

[应用商店审批指南](https://developer.apple.com/app-store/review/guidelines/)

（需要苹果开发者登录）

或这里的镜子：

[应用商店指南](http://stadium.weblogsinc.com/engadget/files/app-store-guidelines.pdf)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2010-04-12T18:21:38.600

苹果将​​来会想创建一个这样的应用程序吗？ `If (yes) reject`.

你有一个非常棒的想法，苹果可能想在未来使用`if(yes) reject`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-11-21T11:38:13.827

以下是描述 Apple 发布的拒绝标准列表的 SDK 公告视频：

[SDK公告](http://www.youtube.com/watch?v=dWynAHdVqnQ)

正如其他人所指出的，Apple 似乎还有许多其他没有公开的条件。请注意，拒绝通知[现在包含在 NDA](http://blog.wired.com/gadgets/2008/09/apple-imposes-n.html)中。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-07T11:49:08.953

我无法证实这一点，但这是有道理的，但人们报告说他们的应用程序因为太简单或太琐碎而被拒绝。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-27T23:42:09.957

刚刚因严重处理网络中断而反弹。如果您连接到网络，请准备好处理可能出现的任何错误情况。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-12T19:44:32.267

我的付费版应用被应用商店拒绝。

购买和下载应用程序后，第一个屏幕是**“用户协议”**，当用户点击**“我同意**”时，他才能继续使用应用程序。

Apple 描述了拒绝的原因**“当用户从 appstore 购买应用程序并在手机中下载时，您不能限制用户同意协议”，**而是在 iTunes 中下载应用程序之前显示您的协议。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-04-12T17:51:22.597

令人惊讶的是，应用程序可能会因为试图使其界面与 Apple 自己的应用程序保持一致而被[拒绝。](http://forums.appleinsider.com/showthread.php?threadid=108499)（即，使用捏缩放/展开手势）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2010-05-23T23:39:57.803

我知道有一个网站可以帮助您使用 iPhone 产生出色的广告创意。看到这个网站： http: [//itunes.apple.com/app/adpack/id359562015 ?mt=8](http://itunes.apple.com/app/adpack/id359562015?mt=8)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-01-12T19:40:51.617

我向应用商店提交了付费应用但被拒绝，我了解到应用被拒绝的另一种可能性

我的应用启用了游戏中心。当应用程序启动时，第一个屏幕是提示用户通过 GameCenter 登录以继续的登录屏幕。

他们拒绝了该应用程序并给出了理由-因为用户将无法获得您的应用程序的服务，除非他没有登录 Game Center，尽管他支付了您下载应用程序的费用。您不能限制用户每次在应用启动前通过 Game Center 登录。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-06-19T09:38:14.897

从 2013 年 5 月 1 日起，如果我们不支持 iPhone 5，您的应用将被拒绝。所以必须支持 iPhone 5。

# c# - 在 C# 中编写 F# 递归文件夹访问者 - seq vs IEnumerable

> ID：308481
> 
> 赞同：9
> 
> 时间：2008-11-21T11:26:38.047
> 
> 标签：c#, f#

我经常在 F# 中使用这个递归的“访问者”

```
let rec visitor dir filter= 
    seq { yield! Directory.GetFiles(dir, filter)
          for subdir in Directory.GetDirectories(dir) do yield! visitor subdir filter} 
```

最近，我开始着手在 C# 中实现一些 F# 功能，并且我试图将其重现为 IEnumerable，但我很难做到比这更进一步：

```
static IEnumerable<string> Visitor(string root, string filter)
{
    foreach (var file in Directory.GetFiles(root, filter))
        yield return file;
    foreach (var subdir in Directory.GetDirectories(root))
        foreach (var file in Visitor(subdir, filter))
            yield return file;
} 
```

我不明白的是为什么我必须在 C# 版本中进行双重 foreach 进行递归，而不是在 F# 中... seq {} 是否隐式执行“concat”？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-11-21T12:27:08.643

`yield!`执行“展平”操作，因此它将您传递给它的序列集成到外部序列中，隐式地对`foreach`序列的每个元素和每个元素执行 a `yield`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-21T16:24:46.167

没有简单的方法可以做到这一点。您可以通过定义一个可以存储一个值或一系列值的 C# 类型来解决此问题 - 使用 F# 表示法它将是：

```
type EnumerationResult<'a> = 
  | One of 'a
  | Seq of seq<'a> 
```

（以您喜欢的任何方式将其翻译成 C# :-)）

现在，您可以编写如下内容：

```
static IEnumerable<EnumerationResult<string>> Visitor
       (string root, string filter) {
   foreach (var file in Directory.GetFiles(root, filter))
      yield return EnumerationResult.One(file);
      foreach (var subdir in Directory.GetDirectories(root))
           yield return EnumerationResult.Seq(Visitor(subdir, filter))
   }
} 
```

要使用它，您必须编写一个扁平化 EnumerationResult 的函数，它可以是 C# 中的扩展方法，具有以下签名：

```
IEnumerable<T> Flatten(this IEnumerable<EnumerationResult<T>> res); 
```

现在，这是它变得棘手的部分——如果你以一种直接的方式实现它，它仍然会包含“forach”来迭代嵌套的“Seq”结果。但是，我相信您可以编写一个没有二次复杂度的优化版本。

好的.. 我想这是一篇博客文章的主题，而不是可以在这里完整描述的内容:-)，但希望它显示了一个你可以尝试遵循的想法！

*[编辑：但是，当然，您也可以使用“Flatten”的天真实现，它会使用“SelectMany”，只是为了使您的 C# 迭代器代码的语法更好]*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-29T03:46:32.297

在检索特定目录下的所有文件的特定情况下，[这种重载`Directory.GetFiles`](http://msdn.microsoft.com/en-us/library/ms143316.aspx)效果最好：

```
static IEnumerable<string> Visitor( string root, string filter ) {
  return Directory.GetFiles( root, filter, SearchOption.AllDirectories );
} 
```

在遍历可枚举对象树的一般情况下，需要嵌套的 foreach 循环或等效循环（另请参见：[All About Iterators](http://blogs.msdn.com/wesdyer/archive/2007/03/23/all-about-iterators.aspx)）。

* * *

**编辑：**添加了将任何树展平为枚举的函数示例：

```
static IEnumerable<T> Flatten<T>( T item, Func<T, IEnumerable<T>> next ) {
  yield return item;
  foreach( T child in next( item ) )
    foreach( T flattenedChild in Flatten( child, next ) )
      yield return flattenedChild;
} 
```

这可用于选择所有嵌套文件，如前所述：

```
static IEnumerable<string> Visitor( string root, string filter ) {
  return Flatten( root, dir => Directory.GetDirectories( dir ) )
    .SelectMany( dir => Directory.GetFiles( dir, filter ) );
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-04-26T20:56:27.603

在 C# 中，我对这种函数使用以下代码：

```
public static IEnumerable<DirectoryInfo> TryGetDirectories(this DirectoryInfo dir) {
    return F.Swallow(() => dir.GetDirectories(), () => new DirectoryInfo[] { });
}
public static IEnumerable<DirectoryInfo> DescendantDirs(this DirectoryInfo dir) {
    return Enumerable.Repeat(dir, 1).Concat(
        from kid in dir.TryGetDirectories()
        where (kid.Attributes & FileAttributes.ReparsePoint) == 0
        from desc in kid.DescendantDirs()
        select desc);
} 
```

这解决了 IO 错误（不幸的是，这不可避免地发生了），并避免了由于符号链接导致的无限循环（特别是，您会在 Windows 7 中搜索一些目录时遇到这种情况）。

# version-control - 显示 Mercurial 推/拉的进度

> ID：308491
> 
> 赞同：42
> 
> 时间：2008-11-21T11:32:01.450
> 
> 标签：version-control, mercurial, progress-bar, push, pull

是否可以让 Mercurial 显示长时间运行的推送或拉取操作的进度？谷歌基本上告诉我“不”，但有人知道吗？我期待着像`hg pull -v`......

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2009-05-23T14:41:15.467

*Mercurial 3.5 默认启用进度。*

早期版本可以使用自 1.5 版起提供的标准[进度扩展。](https://www.mercurial-scm.org/wiki/ProgressExtension)只需将其添加到您的[hgrc](http://www.selenic.com/mercurial/hgrc.5.html)文件即可启用扩展：

```
[extensions]
progress = 
```

然后，您将看到克隆、推送、拉取和其他操作的进度条。默认情况下，仅在初始延迟 3 秒后才会显示进度条。您可以通过添加以下内容轻松更改此设置：

```
[progress]
delay = 1.5 
```

到您的 hgrc 文件。`hg help progress`启用扩展后查看。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2008-11-21T11:40:57.987

```
hg pull -v 
```

-v / --详细

是适用于所有子功能的全局选项。

如果你想要额外的数据：

```
 hg --debug -v pull 
```

# postgresql - 如何检查 Postgres 中现有的聚合函数？

> ID：308492
> 
> 赞同：4
> 
> 时间：2008-11-21T11:32:44.617
> 
> 标签：postgresql, aggregate

在 Postgresql 中，您可以使用

```
CREATE AGGREGATE name(...); 
```

但是，如果数据库中已经存在聚合，则会出现错误，那么如何检查 Postgres 数据库中是否已经存在聚合？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-21T11:35:52.833

```
SELECT * FROM pg_proc WHERE proname = 'name' AND proisagg; 
```

*   [http://www.postgresql.org/docs/8.3/interactive/catalogs-overview.html](http://www.postgresql.org/docs/8.3/interactive/catalogs-overview.html)
*   [http://www.postgresql.org/docs/8.3/interactive/catalog-pg-aggregate.html](http://www.postgresql.org/docs/8.3/interactive/catalog-pg-aggregate.html)
*   [http://www.postgresql.org/docs/8.3/interactive/catalog-pg-proc.html](http://www.postgresql.org/docs/8.3/interactive/catalog-pg-proc.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-11T12:34:27.103

```
drop aggregate if exists my_agg(varchar);

create aggregate my_agg(varchar) (...);

select * from pg_aggregate
where aggfnoid = 'my_agg'::regproc; 
```

# css - 将 div 向右浮动，不影响设计

> ID：308499
> 
> 赞同：29
> 
> 时间：2008-11-21T11:35:28.043
> 
> 标签：css, html, css-float

我想在页面顶部向右浮动一个 div。它包含一个 50px 的方形图像，但目前它会影响页面顶部 50px 的布局。

目前其：

```
<div style="float: right;">
  ...
</div> 
```

我尝试了 z-index，因为我认为这就是答案，但我无法让它继续下去。

我知道我错过了一些简单的事情，但我似乎无法确定它。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2008-11-21T11:41:12.900

你说的影响是什么意思？内容将围绕浮点数流动。他们就是这样工作的。

如果您希望它出现在您的设计上方，请尝试设置：

```
z-index: 10;  
position: absolute;  
right: 0;  
top: 0; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-11-21T11:41:33.243

如果您根本不希望图像影响布局（并浮动在其他内容之上），您可以将以下 CSS 应用于图像：

```
position:absolute;
right:0;
top:0; 
```

如果您希望它浮动在特定父部分的右侧，您可以添加`position: relative`到该部分。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-21T11:41:12.120

尝试将其设置`position`为绝对。这使它脱离了文档的流程。

# javascript - 道场中的密码检查

> ID：308501
> 
> 赞同：3
> 
> 时间：2008-11-21T11:36:09.337
> 
> 标签：javascript, security, dojo

我想使用 Dojo 检查两个密码是否相同。

这是我拥有的 HTML：

 `> ``<form id="form" action="." dojoType="dijit.form.Form" /`>
> 
> `<p`>Password: `<input type="password"
> name="password1"
> id="password1"
> dojoType="dijit.form.ValidationTextBox"
> required="true"
> invalidMessage="Please type a password" /`>`</p`>
> 
> `<p`>Confirm: `<input type="password"
> name="password2"
> id="password2"
> dojoType="dijit.form.ValidationTextBox"
> required="true"
> invalidMessage="This password doesn't match your first password" /`>`</p`>
> 
> `<div dojoType="dijit.form.Button" onClick="onSave"`>Save`</div`>` 
> 
> ``</form`>`

这是我到目前为止的 JavaScript：

> `var onSave = function() {
> if(dijit.byId('form').validate()) { alert('Good form'); }
> else { alert('Bad form'); }
> }`

谢谢你的帮助。我可以在纯 JavaScript 中做到这一点，但我试图找到 Dojo 的方式来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-23T17:39:31.680

这会让你更接近

*   设置 intermediateChanges=false 保持验证器在每次击键时运行。
*   验证 dijit 的约束对象被传递给它的验证器。使用它来传递其他密码条目
*   dijit.form.Form 会在其所有子 dijit 提交时自动调用 isValid()，如果它们没有全部验证则取消提交。我虽然无效的会收到他们的错误信息，但他们没有。这留给读者作为练习;-)

验证功能：

```
 function confirmPassword(value, constraints)
{
    var isValid = false;
    if(constraints && constraints.other)  {
        var otherInput =  dijit.byId(constraints.other);
        if(otherInput) {
            var otherValue = otherInput.value;
            console.log("%s == %s ?", value, otherValue);
            isValid = (value == otherValue);
        }
    }
    return isValid;
}
function onsubmit()
{
    var p1 = dijit.byId('password1').value;
    var p2 = dijit.byId('password2').value;
    return p1 == p2;
} 
```

和输入对象：

```
 <p>Password: <input type="password"
    name="password1"
    id="password1"
    dojoType="dijit.form.ValidationTextBox"
    required="true"
    intermediateChanges=false
    invalidMessage="Please type a password" /></p>

<p>Confirm: <input type="password"
    name="password2"
    id="password2"
    dojoType="dijit.form.ValidationTextBox"
    required="true"
    constraints="{'other': 'password1'}"
    validator=confirmPassword
    intermediateChanges=false
    invalidMessage="This password doesn't match your first password" /></p> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-06-29T12:10:33.553

更简单的是，使用预先编写的 Dojox 小部件**dojox.form.PasswordValidator**。

[http://docs.dojocampus.org/dojox/form/PasswordValidator](http://docs.dojocampus.org/dojox/form/PasswordValidator)

它可以满足您开箱即用的所有需求！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-21T12:55:50.113

我已经解决了！

Dojo 论坛上的这个[页面](http://dojotoolkit.org/forum/dijit-dijit-0-9/dijit-support/password-confirmation-validation)很有帮助。

我将确认密码的 HTML 更改为：

> ``<p`>Confirm: `<input type="password"
> name="password2"
> id="password2"
> dojoType="dijit.form.ValidationTextBox"
> required="true"
> validator="return theSame(this, dijit.byId('password1'));"
> invalidMessage="This password doesn't match your first password" /`>`</p`>`

唯一的区别是添加的*验证器*参数。

我创建了以下 JavaScript 函数：

> `function(dojoTxt1, dojoTxt2) {
> return dojoTxt1.getValue() == dojoTxt2.getValue();
> }`

我认为您也可以使用*验证器*参数来创建正则表达式进行测试，但[文档](http://api.dojotoolkit.org/jsdoc/dijit/1.2/dijit.form.ValidationTextBox.validator)不是很清楚。

# asp.net - .Net 1.1 Web 应用程序正在从根文件夹中获取 web.config

> ID：308511
> 
> 赞同：2
> 
> 时间：2008-11-21T11:38:30.830
> 
> 标签：asp.net, iis, web-config

我有一个 .Net 1.1 Web 应用程序位于名为 C:\inetpub\wwwroot\MyTestApp 的文件夹中，其中“MyTestApp”是一个虚拟目录，并配置为在 IIS 5.1 中的 ASP.Net 版本 1.1.4322 上。

在根目录 (C:\inetpub\wwwroot) 中有一个 .Net2.0 应用程序的 web.config 文件，因为根文件夹包含一些用 .Net2.0 编写的网页。

每当我尝试访问“MyTestApp”时，虽然我得到一个错误......

```
Parser Error Message: Unrecognized configuration section 'connectionStrings'

Source File: c:\inetpub\wwwroot\web.config    Line: 17 
```

MyTestApp 文件夹中的 .Net1.1 应用程序试图访问根文件夹中的 web.config 文件，并且因为它在不同的版本上而感到不安。如何告诉 MyTestApp 文件夹不要使用根文件夹中的 web.config 文件，而只使用其自己文件夹中的 web.config？

这样的事情是否可能，或者将 .Net 1.1 应用程序嵌套在 .Net 2.0 应用程序下的子文件夹中是不行的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-21T11:50:45.423

我认为您需要将 1.1 应用程序的虚拟目录配置为“应用程序”目录。

我在 IIS7 上，所以我从内存中提供这个！

如果您在 IIS 中右键单击它，然后单击“**创建应用程序**”就可以了。

`Web.config`总是基于邻近度读取（首先最接近应用程序，向上通过文件夹结构，直到`Machine.config`）。

希望这可以帮助。

### 编辑

查看[MSDN](http://support.microsoft.com/kb/172138)上关于创建虚拟目录的指南。它还涉及创建应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-03T13:55:21.643

您想使用根 web.config 中的[InheritInChildApplications](http://msdn.microsoft.com/en-us/library/system.configuration.sectioninformation.inheritinchildapplications(VS.80).aspx)设置并将其设置为 false。

# javascript - IE 中的 Firefox 样式 onclick 参数

> ID：308514
> 
> 赞同：4
> 
> 时间：2008-11-21T11:39:42.590
> 
> 标签：javascript, javascript-events

在 Firefox 中，当您将 onclick 事件处理程序添加到方法时，事件对象会自动传递给该方法。除其他外，这允许检测单击了哪个特定元素的能力。例如

```
document.body.onclick = handleClick;

function handleClick(e)
{
    // this works if FireFox
    alert(e.target.className);
} 
```

有什么办法可以在 IE 中进行近似吗？我需要能够检测从 body 元素上的事件处理程序中单击了哪个元素。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-11-21T11:48:34.947

如果我不能使用 jQuery，我会怎么做

```
document.body.onclick = handleClick;

function handleClick(e)
{
    //If "e" is undefined use the global "event" variable
    e = e || event;

    var target = e.srcElement || e.target;
    alert(target.className);
} 
```

这是一个jQuery解决方案

```
$(document.body).click(function(e) {
  alert($(this).attr("class"));
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-21T11:44:01.820

这不是将事件添加到 dom 节点的批准符号。

```
if (el.addEventListener){
  el.addEventListener('click', modifyText, false); 
} else if (el.attachEvent){
  el.attachEvent('onclick', modifyText);
} 
```

绑定点击事件的推荐符号是否跨浏览器友好。

看：

*   [http://www.quirksmode.org/js/events_advanced.html](http://www.quirksmode.org/js/events_advanced.html)
*   [http://developer.mozilla.org/En/DOM/Element.addEventListener](http://developer.mozilla.org/En/DOM/Element.addEventListener)

此外，当单击事件时，执行的回调函数包含一个对象“this”，它是被单击的实体。

```
function foo() { 
   window.open(this.src, '_blank'); 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-21T11:43:26.080

在 IE 中是

```
e.srcElement 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-21T11:42:05.520

我认为 IE 使用了一个名为`event`. 看看有没有效果？

# .net - 在.Net1.1中将多页Tiff转换为jpeg

> ID：308522
> 
> 赞同：0
> 
> 时间：2008-11-21T11:41:33.820
> 
> 标签：.net, vb.net, jpeg, .net-1.1, tiff

有没有办法在 VB.net 1.1 中将多页 Tiff 文件转换为 jpeg 文件。我试图用标准的 Bitmap.Save() 方法转换它，但它只转换第一页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-21T11:50:26.377

有关此示例，请参见[此处。](https://web.archive.org/web/20150405144620/http://bobpowell.net/addframes.aspx)

基本上，您必须加载 TIFF 并将页面绘制到内存中的新位图上。

# sharepoint - Sharepoint FieldType 定义中的 RowOrdinal 属性是什么

> ID：308527
> 
> 赞同：2
> 
> 时间：2008-11-21T11:43:35.657
> 
> 标签：sharepoint, lookupfield, fieldtype

在 Sharepoint 中，不能将超过 16 个查找字段添加到单个列表中。此处解释了此限制：http: [//support.microsoft.com/ ?scid=kb%3Ben-us%3B823555&x=6&y=5](http://support.microsoft.com/?scid=kb%3Ben-us%3B823555&x=6&y=5)

我找到了一个解决方法：schema.xml 中 FieldDefinition 中的 RowOrdinal-Property 默认设置为 =“0”。您可以通过将第 17 个查找字段的“RowOrdinal”属性设置为“1”来添加比限制更多的字段类型。它可以工作。

此解决方法的唯一缺点是使用此字段的过滤器无法正常工作。

谁能向我解释 RowOrdinal-Property 的用途是什么？或者有没有其他解决方案在一个列表中定义超过 16 个查找字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-24T09:00:00.510

我认为您正在按预期使用 RowOrdinal 属性，因为您可以在 MSDN 上找到以下定义：

**tp_RowOrdinal**：表示列表项的行集中此行的从零开始的序号索引。附加行用于表示具有更多应用程序定义的一种或多种数据类型的列的列表项，而不是在 AllUserData 表中的单行中。

您可以在此处找到内容数据库表列的完整描述：http: [//msdn.microsoft.com/en-us/library/cc704499.aspx](http://msdn.microsoft.com/en-us/library/cc704499.aspx)

但不幸的是，我没有解释为什么您的查找列不能用作过滤器。

# domain-driven-design - 何时使用领域驱动开发和数据库驱动开发？

> ID：308539
> 
> 赞同：24
> 
> 时间：2008-11-21T11:48:11.903
> 
> 标签：domain-driven-design

什么时候应该使用数据库驱动开发以及什么时候应该使用域驱动开发，任何人都可以有好的答案吗？这两种发展方法在各自的领域都有其重要性。但我不太清楚哪种方法适合哪种情况。有什么推荐吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2008-11-21T12:49:08.600

首先是一些背景知识，Martin Fowler 在他的《企业架构模式》一书中实际上描述了三种不同的“模式”。事务脚本、活动记录和域模型。DDD 将域模型模式用于整体架构，并描述了许多实践和模式来实现和设计该模型。

事务脚本是一种没有任何分层的架构。同一段代码读取/写入数据库、处理数据并处理用户界面。

Active Record 比这更上一层楼。你分离了你的 UI，你的业务逻辑和数据层仍然一起存在于以数据库为模型的活动记录对象中。

域模型将模型中的业务逻辑与数据层分离。该模型对数据库一无所知。

现在我们来到了有趣的部分：
这种增加分离的成本当然是额外的工作。好处是更好的可维护性和灵活性。
当您的业务规则很少或没有时，事务脚本很好，您只想进行数据输入并且没有验证步骤或所有验证都在数据库中实现。
活动记录为此增加了一些灵活性。因为您解耦了您的 UI，您可以例如在应用程序之间重用它下面的层，您可以轻松地将一些业务规则和验证逻辑添加到业务对象。但是由于这些仍然与数据库紧密耦合，因此数据模型中的更改可能非常昂贵。
当您想将业务逻辑与数据库分离时，您可以使用域模型。这使您能够更轻松地处理不断变化的需求。领域驱动设计是一种优化使用这种增加的灵活性来实现复杂解决方案的方法，而无需绑定到数据库实现。

许多工具使数据驱动的解决方案更容易。在 microsoft 空间中，视觉设计网站非常容易，其中所有代码都位于网页后面。这是一个典型的事务脚本解决方案，非常适合轻松创建简单的应用程序。Ruby on rails 具有使使用活动记录对象更容易的工具。当您需要开发更简单的解决方案时，这可能是采用数据驱动的原因。对于行为比数据更重要并且很难预先定义所有行为的应用程序，DDD 是要走的路。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-11-21T12:50:34.120

我问过一个类似的问题：[使用 O/R 映射时我从哪里开始设计？对象还是数据库表？](https://stackoverflow.com/questions/274090/where-do-i-start-designing-when-using-or-mapping-objects-or-database-tables)

从我得到的答案中，我会说：除非您有具体的理由使用数据库驱动开发，否则请使用域驱动开发。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-11-21T12:59:50.090

这样想吧。

问题域永远存在。您的类定义将反映该领域的永恒特征。

关系数据库是当今首选的持久性机制。在某个时候，我们会超越这个，转向“更新”、“更好”、“不同”的东西。数据库设计只是一种实现；它更多地反映了解决方案架构而不是问题域。

因此，它首先是域。类反映了问题域和普遍真理。关系数据库和 ORM 位居第二和第三。最后，在模型周围填写其他内容。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-11-15T04:56:30.373

作为 mendelt 帖子的旁注，我觉得有第四种模式：一种分层模式，将业务逻辑与持久性和存储分开，但不使用“实体”或“业务对象”。如果您愿意的话，是事务/操作脚本和 DDD 之间的中间点。

在我工作过的许多系统中，持久层（存储库）直接使用 SqlClient 并将数据集返回给调用服务。服务执行决策并编译通过控制器发送给用户的视图。您可能会将服务层视为业务模型，您是对的，但它不是 DDD 意义上的“域”模型。尽管如此，所有业务逻辑都发生在这一层期间。每一层都有它的工作。视图显示数据，控制器确定视图，持久层处理存储，服务在控制器和持久性之间工作。

重点是：DDD 是一种通过 Ul、测试和代码来定义业务的方法。它与实体、值对象和聚合无关。这些东西只是 OOP 纯粹主义者对 DDD 方法的副产品。

只是更多的想法供您考虑。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-20T15:49:48.700

对于复杂的业务模型，我更喜欢 ActiveRecord 和 DDD 的混合。域对象知道如何保存自己，并且数据操作是针对存储库完成的（如果您将存储库视为将数据作为集合公开给模型的东西，nHibernate 可以充当通用存储库）。业务逻辑驻留在领域实体中，甚至可以完成一些值类型的封装，尽管只有在有业务需要时才可以。DDD 的一些实现倾向于删除所有公共设置器，并且只通过方法修改实体。除非有非常好的业务需求，否则我不喜欢这种实现。

在我看来，这个实现让您可以轻松使用 ActiveRecord 和 DDD 的业务逻辑封装。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-09-27T23:46:49.590

领域驱动开发肯定是要走的路。它更有意义并增加了灵活性。

# monitoring - 事件日志监控

> ID：308545
> 
> 赞同：0
> 
> 时间：2008-11-21T11:52:03.487
> 
> 标签：monitoring, event-log

我需要监视我的 Windows Server 事件日志，以便我知道我的任何 ASP.Net 网站是否存在问题（IIS 错误、Windows 登录错误等）——这些错误最终会出现在事件日志中，而不是由我的应用程序的错误记录。

有没有人有过[GFI Events Manager](http://www.gfi.com/eventsmanager/)或[Event Sentry](http://www.eventsentry.com/)的经验？市面上有没有更好的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-12T03:31:07.353

我目前使用 EventSentry，我不得不说我对它非常满意。当我的备份没有运行时，我会收到一封电子邮件，报告很有帮助，而且我与支持人员的经验非常好。就我而言，EventSentry 比 GFI 便宜得多，并且提供了我需要的价值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-22T04:12:01.560

我没有使用过这个工具，但是微软的 System Center Operations Manager（以前称为 Microsoft Operations Manager）应该可以完成所有这些工作。

[系统中心运营经理](http://www.microsoft.com/systemcenter/opsmgr/default.mspx?sess=296d9b4b1d52c17152baa2806e58dd78)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-03T17:05:37.083

[PA 服务器监视器](http://www.poweradmin.com/servermonitor)可以做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-03T17:11:46.367

如果预算紧张，或者您想要更多地自定义解决方案，可以[使用 .NET 库](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlog.aspx)来编写自己的 Web 应用程序或控制台应用程序，以从事件日志中检索/更新详细信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-03T17:28:06.763

[KS-Soft 的Advanced Host Monitor](http://www.ks-soft.net/hostmon.eng/)是一个监控程序，可以根据事件日志消息向您发送警报。

# c# - 自定义验证以比较两个文本框的浮点值

> ID：308547
> 
> 赞同：1
> 
> 时间：2008-11-21T11:52:31.210
> 
> 标签：c#, .net, asp.net, vb.net

我正在使用自定义验证器来比较两个文本框中的值。这很好地比较了这些值。但它说“025”和“25”是不同的......这可以做一个浮动比较。

我正在使用的自定义验证器是

```
<asp:CompareValidator id="compval" runat="server" ControlToValidate="txtBox1"
                    ErrorMessage="There values are not equal."
                    Enabled="False" ControlToCompare="txtBox2">*</asp:CompareValidator></TD> 
```

请让我知道这是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-21T12:25:52.560

使用 System.Double.Parse(value) 将两者都转换为浮点数，并比较这些数字。

如果值不是有效的浮点数，如果您不想处理异常，也可以使用 TryParse。

也可以看看：

*   [http://msdn.microsoft.com/en-us/library/system.double.parse.aspx](http://msdn.microsoft.com/en-us/library/system.double.parse.aspx)
*   [http://msdn.microsoft.com/en-us/library/system.double.tryparse.aspx](http://msdn.microsoft.com/en-us/library/system.double.tryparse.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-22T21:53:43.303

在没有看到您的验证代码的情况下，我唯一能想到的是 025 被解释为八进制数（在 C 中，在整数之前放置一个零表示它以 8 为基数）。那么 025 将以 10 为基数为 21，而您的两个数字将不一样。

不过，我不确定你是怎么想出来的。我测试了几个 Parse() 函数，它们都将字符串“025”转换为base-10 25。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-22T23:00:09.440

我想以下是你需要的（这个问题可以表述得更清楚一些）

```
<asp:CompareValidator ID="cv1" runat="server" ControlToCompare="txt1" ControlToValidate="txt2" Operator="Equal" Type="Integer" ErrorMessage="integers in txt1 and txt2 are not equal" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-21T12:23:41.037

使用具有 int 类型的比较验证器？

# c# - 在 C# 中将证书安装到 Windows 本地用户证书存储中

> ID：308554
> 
> 赞同：8
> 
> 时间：2008-11-21T11:57:16.287
> 
> 标签：c#, windows, certificate, certificate-store

我正在编写一个 Windows 服务，它需要证书存储中的多个证书才能连接到第三方 Web 服务。

在我的安装程序上，我调用了一个小型应用程序 (C#)，它创建了一个用户来运行服务。

它工作正常。

我现在需要在用户证书存储中安装大约 10 个证书（不要问！），但找不到任何简洁的编程方式来做到这一点。

有什么提示吗？或者我将不得不使用[COM](http://en.wikipedia.org/wiki/Component_Object_Model)互操作...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-11-24T10:56:43.660

原来你首先需要模拟用户。

使用*[A small C# Class for impersonating a User](http://www.codeproject.com/KB/cs/zetaimpersonator.aspx)*中描述的非常好的库，您可以执行以下操作：

```
using (new Impersonator("username", "", "password"))
{
    try
    {
        X509Store serviceRuntimeUserCertificateStore = new X509Store(StoreName.My);
        string baseDir = AppDomain.CurrentDomain.BaseDirectory;
        string certPath = Path.Combine(baseDir, certificateFolder);

        string certificateFile = "c:\\file.cert";
        string certificatePassword = "somePassword";
        string certificateLocation = certPath + "\\" + certificateFile;

        InstallCertificate(certificateLocation, certificatePassword);
    }
    catch (Exception ex)
    {
        Console.WriteLine(ex);
    }
}

private static void InstallCertificate(string certificatePath, string certificatePassword)
{
    try
    {
        var serviceRuntimeUserCertificateStore = new X509Store(StoreName.My);
        serviceRuntimeUserCertificateStore.Open(OpenFlags.ReadWrite);

        X509Certificate2 cert;

        try
        {
            cert = new X509Certificate2(certificatePath, certificatePassword);
        }
        catch(Exception ex)
        {
            Console.WriteLine("Failed to load certificate " + certificatePath);
            throw new DataException("Certificate appeared to load successfully but also seems to be null.", ex);
        }

        serviceRuntimeUserCertificateStore.Add(cert);
        serviceRuntimeUserCertificateStore.Close();
    }
    catch(Exception)
    {
        Console.WriteLine("Failed to install {0}.  Check the certificate index entry and verify the certificate file exists.", certificatePath);
    }
} 
```

请添加您自己的异常处理。如果您要添加多个证书，请保持 X509Store 保持打开状态以提高效率。

# java - 我需要有关此错误的帮助：java.lang.NoSuchMethodError

> ID：308555
> 
> 赞同：4
> 
> 时间：2008-11-21T11:58:07.547
> 
> 标签：java, hibernate, reflection, nosuchmethoderror

我有这个Java代码（JPA）：

```
String queryString = "SELECT b  , sum(v.votedPoints) as votedPoint " +
                       " FROM Bookmarks b  " +
                         " LEFT OUTER JOIN Votes v " +
                           " on (v.organizationId = b.organizationId) " + 
                         "WHERE b.userId = 101  " + 
                         "GROUP BY b.organizationId " +
                         "ORDER BY votedPoint ascending ";
EntityManager em = getEntityManager();
Query query = em.createQuery(queryString);
query.setFirstResult(start);
query.setMaxResults(numRecords);
List results = query.getResultList(); 
```

我不知道我的查询有什么问题，因为它给了我这个错误：

```
java.lang.NoSuchMethodError: org.hibernate.hql.antlr.HqlBaseParser.recover(Lantlr/RecognitionException;Lantlr/collections/impl/BitSet;)V
        在 org.hibernate.hql.antlr.HqlBaseParser.fromJoin(HqlBaseParser.java:1802)
        在 org.hibernate.hql.antlr.HqlBaseParser.fromClause(HqlBaseParser.java:1420)
        在 org.hibernate.hql.antlr.HqlBaseParser.selectFrom(HqlBaseParser.java:1130)
        在 org.hibernate.hql.antlr.HqlBaseParser.queryRule(HqlBaseParser.java:702)
        在 org.hibernate.hql.antlr.HqlBaseParser.selectStatement(HqlBaseParser.java:296)
        在 org.hibernate.hql.antlr.HqlBaseParser.statement（HqlBaseParser.java:159）
        在 org.hibernate.hql.ast.QueryTranslatorImpl.parse(QueryTranslatorImpl.java:271)
        在 org.hibernate.hql.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:180)
        在 org.hibernate.hql.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:134)
        在 org.hibernate.engine.query.HQLQueryPlan.(HQLQueryPlan.java:101)
        在 org.hibernate.engine.query.HQLQueryPlan.(HQLQueryPlan.java:80)
        在 org.hibernate.engine.query.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:94)
        在 org.hibernate.impl.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:156)
        在 org.hibernate.impl.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:135)
        在 org.hibernate.impl.SessionImpl.createQuery(SessionImpl.java:1650)

```

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-07T13:17:28.567

您使用的 hibernate 和 ANTLR jar 的版本肯定有问题。在 2.7.6 版之前，ANTLR Parser 类中不存在恢复方法？如果您使用的是早期版本的 ANTLR，例如 2.7.2，那么您会看到这个问题。

使用 maven 可能会导致这种情况，在这种情况下，您依赖 Hibernate 及其传递依赖项，但“更接近”；例如 Struts；提供不同的早期版本的 ANTLR，并且该早期版本在您的应用程序中得到解决。

如果您可以提供所涉及的 jar 版本，我们将能够提供更多帮助。一旦您解决了 jar 版本的问题，您应该会收到一条更具启发性的错误消息，显示您的 HQL 表达式有什么问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-21T12:00:14.297

在黑暗中刺伤 - 你确定你有一组一致的罐子 - 也许你需要得到你正在使用的休眠发行版附带的 antlr 罐子......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-21T15:43:03.957

我发现了问题：因为这是一个本机查询，所以这 2 个表的 java 类必须具有一些特殊属性：
在 Bookmarks.java 类中

```
@OneToMany(mappedBy = "bookmarkId")
private Collection votesCollection; 
```

在 Votes.java 类中

```
@JoinColumn(name = "bookmark_id", referencedColumnName = "bookmark_id")
@ManyToOne
[private Bookmarks bookmarkId; 
```

我也改变了查询工作

```
 tring queryString = "SELECT b, sum(v.votedPoints) " +
                          "FROM Bookmarks b  " +
                          "LEFT OUTER JOIN b.votesCollection v " + 
                          "WHERE b.userId = 101  " + 
                          "GROUP BY b.organizationId " +
                          "ORDER BY sum(v.votedPoints) asc "; 
```

谢谢您的帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-21T12:18:21.547

该查询似乎无效，除非它是格式化的产物。

我想你的意思是：

> `Select b, ...`

成为：

> `Select b.organizationId, ...`

??

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-21T12:01:46.433

可能是您缺少一些双引号`"`，或者在您的 HQL 中应该加倍。

插图[在这里](http://notetodogself.blogspot.com/2007/08/javalangnosuchmethoderror.html)。

或者你错过了一些简单的引号，如图[所示](http://blog.csdn.net/qpyong/archive/2008/09/08/2898801.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-21T19:42:06.097

您的查询仍然是错误的。也许它适用于您的驱动程序/数据库，但它不是标准 SQL。您应该选择`b.*`或`b.organizationId`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-21T12:09:39.707

我有一组一致的罐子，因为像这样的简单查询

```
"SELECT b FROM table_name b WHERE b.userId = 102"
```

在工作中。我已经验证了所有双引号，一切都很好。

我的数据库是：mysql，我用jpa连接。我不知道是什么导致了问题。也许这种类型的加入，我不知道

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-21T12:16:38.603

呃，你的查询是不是试图选择 b 这是一个表别名，据我所知这是不允许的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-11-21T12:17:10.677

我可能会猜测您的查询出了点问题，因为调用了 HqlBaseParser 查找失败的方法`recover(RecognitionException, Bitset)`。也许这个查询由于某种原因而失败，而其他更简单的查询却没有（并且在尝试从该错误中恢复时抛出 NoSuchMethod 异常）。

```
java.lang.NoSuchMethodError: org.hibernate.hql.antlr.HqlBaseParser.recover(Lantlr/RecognitionException;Lantlr/collections/impl/BitSet;)V 
```

# scrum - 对于使用 SCRUM，您向管理层的成功推销是什么？

> ID：308572
> 
> 赞同：1
> 
> 时间：2008-11-21T12:07:50.053
> 
> 标签：scrum

您采用什么方法向没有技术背景的客户/业务部门描述 SCRUM 的好处？请列出您认为有用的任何类比。最后，您是如何解决瀑布营地的担忧的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-21T12:17:08.633

我基本上会讨论降低风险和投资回报率，因为这些是高层管理人员关心的主要问题。

使用增量流程可以显着降低将资金浪费在无用的东西上的风险，因为客户通过一系列计划好的反馈周期帮助引导产品开发朝着正确的方向发展。根据 CHAOS 研究，项目失败的第一大原因是缺乏客户参与。那么为什么不使用消除这种风险的流程呢？

此外，与使用瀑布方法相比，使用增量流程可以在更短的时间内开始交付，这有效地提高了 ROI（投资回报率），因为客户在一两个月后开始从产品中受益，而不是等待在一个典型的瀑布项目中需要 6 到 12 个月。

您还可以提到提高客户满意度、团队自我改进和自我管理，从而减少管理开销，提高员工满意度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-21T23:39:58.847

另外一点是投资保护——在传统方法中，系统通常会随着时间的推移而“老化”，其价值会降低，维护成本也会上升，直到无法再进行维护。如果敏捷方法应用得当，代码应该可以无限期地维护和扩展。

这是一个关于所有三点的简短视频：[http ://www.youtube.com/watch?v=OWvSnYjqOTQ](http://www.youtube.com/watch?v=OWvSnYjqOTQ)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-21T13:20:13.433

我会提到专注的好处。因为 sprint 的指导原则是注重功能和可交付性，所以需要注意所有细节（例如人体工程学），否则在更全球性的方法的压力下，这些细节的修复会被推迟。你没有一切，但你所拥有的是坚实的。非技术人员对此表示赞赏，因为从他们的角度来看，它降低了风险：它在与客户的对话中注入了诚实和信任以及互动性。

# c++ - 我应该如何订购 C++ 类的成员？

> ID：308581
> 
> 赞同：82
> 
> 时间：2008-11-21T12:13:00.793
> 
> 标签：c++, code-formatting

拥有所有私有成员，然后是所有受保护成员，然后是所有公共成员会更好吗？还是反过来？还是应该有多个私有、受保护和公共标签，以便操作可以与构造函数等分开？在做这个决定时我应该考虑哪些问题？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2008-11-21T12:30:39.073

我把公共接口放在第一位，但我并不总是这样做。我过去常常这样做，先是私有的，然后是受保护的，然后是公开的。回想起来，并没有多大意义。

作为一个类的开发者，你可能很熟悉它的“内部结构”，但是这个类的用户并不在意，或者至少他们不应该在意。他们最感兴趣的是班级能为他们做什么，对吧？

所以我把公众放在首位，通常按功能/效用来组织它。我不希望他们必须费力地浏览我的界面才能找到与 X 相关的所有方法，我希望他们以有条理的方式看到所有这些东西。

我从不使用多个公共/受保护/私人部分 - 在我看来太混乱了。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2008-11-21T12:35:10.717

谷歌赞成[这个顺序](https://google.github.io/styleguide/cppguide.html#Declaration_Order)：“Typedefs and Enums, Constants, Constructors, Destructor, Methods，包括静态方法，Data Members，包括静态数据成员。”

[Matthew Wilson](http://safari.oreilly.com/0321228774/ch17)（需要 Safari 订阅）推荐以下顺序：“Construction, Operations, Attributes, Iteration, State, Implementation, Members, and my favorite, Not to be implemented。”

他们提供了很好的理由，而且这种方法似乎是相当标准的，但无论你做什么，都要保持一致。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-11-21T12:19:57.253

这是我的意见，我敢打赌，大多数人都会同意，公共方法应该优先考虑。OO 的核心原则之一是您不必关心实现。仅查看公共方法就应该告诉您使用该类所需知道的一切。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-05-06T20:08:30.810

编码风格是令人惊讶的激烈对话的来源，考虑到这一点，我冒着提供不同意见的风险：

代码应该写成对人类来说最易读。我完全同意这里多次给出的声明。

偏差是我们正在进行的滚动。

为了帮助该类的**用户**了解如何使用它，应该编写和维护适当的**文档**。用户永远不需要阅读源代码就可以使用该类。如果这样做（手动或使用源内文档工具），那么在源中定义公共和私有类成员的顺序对用户来说并不重要。

然而，对于需要**理解**代码的人来说，在代码审查、拉取请求或维护期间，顺序非常重要——规则很简单：

**项目应在使用前定义**

这既不是编译器规则，也不是严格的公共与私有规则，而是常识 - 人类可读性规则。我们按顺序阅读代码，如果每次看到使用的类成员都需要来回“玩弄”，但不知道它的类型，例如，它会对代码的可读性产生不利影响。

严格区分私有与公有违反了这条规则，因为私有类成员将在任何公共方法中使用后出现。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-11-21T13:29:27.533

与往常一样，*首先为人类*编写代码。考虑将使用你的类的人，并将最重要的成员/枚举/typedefs/*对他们来说*最重要的东西放在顶部。

*通常*这意味着公共成员处于顶部，因为这是您班级的大多数消费者最感兴趣的。其次是受保护的，其次是私人。通常。

有一些例外。

有时初始化顺序很重要，有时需要在公共之前声明私有。有时，继承和扩展一个类更为重要，在这种情况下，受保护的成员可能会放在更高的位置。而且，当对遗留代码进行单元测试时，有时公开公共方法会更容易——如果我不得不犯下这种近乎罪恶的行为，我会将它们放在类定义的底部。

但它们是相对罕见的情况。

我发现大多数时候“公共、受保护、私有”对您班级的消费者最有用。这是一个不错的基本规则。

但它不是通过访问来订购，而是更多*地根据消费者的兴趣订购*。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-11-21T12:54:08.137

我通常首先定义接口（要读取），即公共的，然后是受保护的，然后是私有的。现在，在许多情况下，我向前迈进了一步，并且（如果我可以处理的话）使用 PIMPL 模式，从真实类的接口中完全隐藏所有私有内容。

```
class Example1 {
public:
   void publicOperation();
private:
   void privateOperation1_();
   void privateOperation2_();

   Type1 data1_;
   Type2 data2_;
};
// example 2 header:
class Example2 {
   class Impl;
public:
   void publicOperation();
private:
   std::auto_ptr<Example2Impl> impl_;
};
// example2 cpp:
class Example2::Impl
{
public:
   void privateOperation1();
   void privateOperation2();
private: // or public if Example2 needs access, or private + friendship:
   Type1 data1_;
   Type2 data2_;
}; 
```

您会注意到我在私有（以及受保护）成员后面加上下划线。PIMPL 版本有一个内部类，外部世界甚至看不到它的操作。这使类接口完全干净：只有真正的接口被暴露。无需争论秩序。

由于必须构建动态分配的对象，因此在类构建期间存在相关成本。此外，这对于不打算扩展但在层次结构方面存在一些缺点的类也非常有效。受保护的方法必须是外部类的一部分，因此您不能真正将它们推入内部类。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-11-21T13:26:43.080

我倾向于遵循[POCO C++ 编码风格指南](http://www.appinf.com/download/CppCodingStyleGuide.pdf)。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-11-21T12:21:58.310

我认为这都是关于可读性的。

有些人喜欢按固定顺序对它们进行分组，这样每当您打开类声明时，您就可以快速知道在哪里寻找例如公共数据成员。

总的来说，我觉得最重要的事情应该放在第一位。对于所有类中的 99.6%，粗略来说，这意味着公共方法，尤其是构造函数。然后是公共数据成员，如果有的话（记住：封装是个好主意），然后是任何受保护的和/或私有的方法和数据成员。

这是大型项目的编码标准可能涵盖的内容，检查一下可能是个好主意。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-11-21T13:05:30.967

在我们的项目中，我们不是根据访问权限对成员进行排序，而是根据使用情况对成员进行排序。我的意思是，我们对使用的成员进行排序。如果公共成员使用同一类中的私有成员，则该私有成员通常位于公共成员前面的某个位置，如下面（简单）示例所示：

```
class Foo
{
private:
  int bar;

public:
  int GetBar() const
  {
    return bar;
  }
}; 
```

这里，成员**bar**放在成员**GetBar()**之前，因为前者被后者使用。这可能会导致多个访问部分，如下例所示：

```
class Foo
{
public:
  typedef int bar_type;

private:
  bar_type bar;

public:
  bar_type GetBar() const
  {
    return bar;
  }
}; 
```

bar_type成员被**bar成员****使用**，看到了吗？

为什么是这样？我不知道，如果您在实现中的某个地方遇到一个成员并且您需要有关该成员的更多详细信息（并且 IntelliSense 再次搞砸了），您可以在您工作的上方某处找到它，这似乎更自然。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-03-16T09:54:41.767

在实践中，它很少重要。这主要是个人喜好问题。

将公共方法放在首位是非常流行的，表面上是为了让类的用户更容易找到它们。但是标题永远不应该是您的主要文档来源，因此围绕用户将查看您的标题的想法建立“最佳实践”似乎对我来说没有意义。

如果人们正在*修改*类，则更有可能出现在您的标题中，在这种情况下，他们*应该*关心私有接口。

无论您选择哪种方式，都要让您的标题干净且易于阅读。能够轻松找到我碰巧正在寻找的任何信息，无论我是该课程的用户还是该课程的维护者，都是最重要的事情。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-11-21T15:47:09.270

请注意（取决于您的编译器和动态链接器），您可以通过仅添加到类的末尾（即接口的末尾）而不删除或更改任何其他内容来保持与以前版本的共享库的兼容性。（对于 G++ 和 libtool 也是如此，GNU/Linux 共享库的三部分版本控制方案反映了这一点。）

还有一个想法是您应该对类的成员进行排序，以避免由于内存对齐而浪费空间；一种策略是将成员从最小到最大排序。我从来没有在 C++ 或 C 中做过这个。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-11-21T13:22:38.563

对于将使用您的类首先列出公共接口的人来说，这真的很有帮助。这是他们关心并可以使用的部分。受保护的和私人的可以跟随。

在公共接口中，可以方便地将构造函数、属性访问器和修改器以及操作符分组到不同的组中。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-03-16T10:08:12.217

将私有字段放在首位。

使用现代 IDE，人们无需阅读该类来弄清楚它的公共接口是什么。

他们只是为此使用智能（或类浏览器）。

如果有人正在阅读类定义，通常是因为他们想了解它是如何工作的。

在这种情况下，了解这些领域最有帮助。它告诉你对象的部分是什么。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-03-16T09:39:19.680

总的来说，你的公共接口应该放在任何东西之前，因为这是你的类的用户应该感兴趣的主要/唯一的事情。（当然，实际上这并不总是成立，但这是一个好的开始。）

其中，成员类型和常量是最好的，其次是构造运算符、操作，然后是成员变量。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-08-24T12:01:55.207

## 二进制兼容性

对类成员进行排序有几个具体的原因。这些与二进制兼容性有关。

二进制兼容性主要影响对系统 DLL 和设备驱动程序的更改。如果您对这些不感兴趣，请忽略此答案。

公共成员必须先于私人成员。这样您就可以混合和更改私有成员，而不会影响公共数据的位置。

新的公众成员必须排在最后。这又避免了影响现有公众成员的地位。

相同的顺序适用于 vtable 成员。

除此之外，没有理由不遵循您自己/您同事的偏好。

* * *

## 回答 #16

> 赞同：-3
> 
> 时间：2008-11-21T12:25:36.180

完全取决于您的喜好。没有“正确的方法”。

在我自己的宠物项目中使用 C++ 时，我个人遵守约定，将访问修饰符放在每个成员或方法声明之前。

# delphi - 我在哪里可以找到“ESC/POS”爱普生条码测试程序？

> ID：308588
> 
> 赞同：9
> 
> 时间：2008-11-21T12:17:09.380
> 
> 标签：delphi, barcode, point-of-sale, opos, epson

我正在努力让爱普生“ESC/POS”打印机打印条形码（使用 Delphi）并想测试打印机是否有故障。你知道我在哪里可以找到在“ESC/POS”中打印条形码的程序吗？我想作为最后的手段，OPOS 程序也可以。

此外，一个可以运行的演示 Delphi 程序也可以。到目前为止，我拥有的所有 Delphi 片段都不起作用。

我使用的打印机是 Epson TM-L60II

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-21T13:50:50.067

我有一个用 Delphi 5 为 TMT88 编写的完整测试程序，但是这里的源代码有点大所以这里是条形码位

请注意，作为完整对象的片段，一些变量/函数可能会丢失

获取条形码字符

```
{**
*    @param a ean13 barcode numeric value
*    @return the escpos code for the barcode print
*    Description uses escpos code, return code needed to print a ean13 barcode
*}
function TPrintEscPosToPort.getBarcodeEscPosCode(l_ean13:String):String;
    var
        l_return:String;
begin
    l_return :=  CHR(29) + 'k' + CHR(67) + CHR(12);
    l_return := l_return +  l_ean13; // Print bar code
    l_return := l_return +  l_ean13; // Print bar code number under thge barcode

    Result :=  l_return
end; 
```

打印到打印机

```
{**
*    @param Printer Name, Item be printed, Cut the papers after the cut, #no of copies to print
*    @return boolen, true if it printed
*    Description prints a test page to the tysso printer
*}
function TPrintEscPosToPort.escPosPrint(const l_printer, l_textToPrint :String;l_cutPaper:Boolean=true;l_copies:integer=1): Boolean;
    var
        l_pPort,l_pName,l_tmp:String;
        i,x:integer;
        PrinterFile: TextFile;
begin
    // set result to false so any thing other then a good print will be false
    Result:= FALSE;

    try
        //Find if the printer exists, else set to defult -1
        i := Printer.Printers.IndexOf(l_printer);
        if (i > -1) then
        begin
            Printer.PrinterIndex := i;
            l_pName := Printer.Printers[i]; //Get the printer name (incase its the defult and not the one passed)
            l_pPort :=   Self.getPrinterPort(l_pName) ; // get the port name from the reg
        end;

        // If true add headers and footers to the passed text
        if (Self.aPrintHeadersFooters) then
        begin
            l_tmp := Self.getHeader()
                 +  l_textToPrint + Self.GetFooter();
        end
        else
        begin
            l_tmp := l_textToPrint;
        end;

      //Send the Document To the printer
      try
          for x:= 1 to l_copies do //Print multi-copies
          Begin              
              //Assign the file to a tmp file in the printer port
              if (length(trim(l_pPort)) > 0) then AssignFile(PrinterFile,l_pPort)
              else
              begin                         
                   //only use if we cant get the port 
                   //(may look bad as ctrl codes are still in place)
                   AssignPrn(PrinterFile);
                   l_tmp := Self.stripEscPos(l_tmp);
              end;

              Rewrite(PrinterFile);

              try
                  //Send the passed Text to the printer 
                  WriteLn(PrinterFile,l_tmp);

                  if (Self.aPrinterReset) then 
                       WriteLn(PrinterFile,escReset);  // Reset the printer alignment

                  if (l_cutPaper) then         
                       WriteLn(PrinterFile,escFeedAndCut); //Cut the paper if needed
              finally
                  CloseFile(PrinterFile);
                  Result:= true;
              end;
          end;
      except
      end;
    except
    end;

end; 
```

**更新**

这是上面代码中丢失的控制代码常量，希望这些名称具有足够的描述性。

```
const
     escNewLine   = chr(10);  // New line (LF line feed)
     escUnerlineOn   = chr(27) + chr(45) + chr(1);  // Unerline On
     escUnerlineOnx2 = chr(27) + chr(45) + chr(2);  // Unerline On x 2
     escUnerlineOff  = chr(27) + chr(45) + chr(0);  // Unerline Off
     escBoldOn       = chr(27) + chr(69) + chr(1);  // Bold On
     escBoldOff      = chr(27) + chr(69) + chr(0);  // Bold Off
     escNegativeOn   = chr(29) + chr(66) + chr(1);  // White On Black On'
     escNegativeOff  = chr(29) + chr(66) + chr(0);  // White On Black Off
     esc8CpiOn       = chr(29) + chr(33) + chr(16); // Font Size x2 On
     esc8CpiOff      = chr(29) + chr(33) + chr(0);  // Font Size x2 Off
     esc16Cpi        = chr(27) + chr(77) + chr(48); // Font A  -  Normal Font
     esc20Cpi        = chr(27) + chr(77) + chr(49); // Font B - Small Font
     escReset        = chr(27) + chr(64); //chr(27) + chr(77) + chr(48); // Reset Printer
     escFeedAndCut   = chr(29) + chr(86) + chr(65); // Partial Cut and feed

     escAlignLeft    = chr(27) + chr(97) + chr(48); // Align Text to the Left
     escAlignCenter  = chr(27) + chr(97) + chr(49); // Align Text to the Center
     escAlignRight   = chr(27) + chr(97) + chr(50); // Align Text to the Right 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-21T12:49:03.920

获取 Microsoft POS For .Net 1.11，它有一个 SDK，其中包含一个示例应用程序，该示例应用程序在 POS 硬件上执行所有基本操作。例如，我一直在使用它来测试现金抽屉是否可以正常工作。

还包含一个源代码（在 .Net 中），因此您可以看到他们是如何做到的。

# jboss - 如何在 Windows 上的 JBoss 4.0.5 中进行线程转储

> ID：308590
> 
> 赞同：0
> 
> 时间：2008-11-21T12:17:39.207
> 
> 标签：jboss, stack-trace

我在 Windows 2003 x64 上运行 JBoss 4.0.5，想知道是否有任何方法可以转储所有线程？

*   它被 FireDaemon 盯着，所以我没有一个控制台窗口可以在其中进行 ctrl-break。

*   它在 java 1.5 下运行，所以 jstack 不能工作。

*   我尝试了一个名为 sendsignal.exe 的程序，我认为它实际上使 JBoss 崩溃（不确定，但不会再试一次），如果这是因为 JBoss 在 win x64 下运行或者因为它作为 LocalSystem 运行而我只有访问我不认识的“普通”用户。它实际上可以在我的笔记本电脑上运行，但它是 32 位的，并且我在那里以与 JBoss 相同的用户身份运行。

有人有其他可能可行的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-21T14:05:27.040

我实际上找到了比[Gowri](https://stackoverflow.com/users/3253/gowri) 建议的更好的方法（在开始实现 jsp 之后）。

实际上有一种方法可以在 Server Info MBean 中从 jmx-console 转储线程，请参阅[使用 JMX 控制台生成线程转储](http://www.jboss.org/community/docs/DOC-9804)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-21T12:24:09.087

您可以只编写一个 jsp 并`Thread.getAllStackTraces()`以合适的格式打印出堆栈跟踪元素。然后随时点击该 jsp 的 URL 将为您提供当时所有线程的堆栈转储。

# asp.net - UpdatePanelAnimationExtender 总是触发

> ID：308595
> 
> 赞同：1
> 
> 时间：2008-11-21T12:20:23.790
> 
> 标签：asp.net, ajax, updatepanelanimationexte

当关联的更新面板没有更新（即设置为条件更新）时，有什么方法可以防止 UpdatePanelAnimationExtender 执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-31T14:41:23.077

不幸的是，这是控件中的一个已知“错误”。截至发帖时，它仍未得到修复，也没有已知的解决方法。所以答案是否定的，你不能阻止它。

# django - 使用 django-profiles 上传文件

> ID：308596
> 
> 赞同：1
> 
> 时间：2008-11-21T12:20:29.280
> 
> 标签：django, django-profiles

我正在使用 django-contrib 包[django-profiles](http://www.bitbucket.org/ubernostrum/django-profiles/wiki/Home)，一切正常 - 我唯一的问题是我希望表单上传文件（用于头像），不幸的是 - 表单不上传文件。

有没有人成功地使用 django-profiles 上传文件？我想避免为头像设置单独的上传视图？

任何帮助深表感谢！

谢谢，马丁

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-13T02:48:24.427

在您的模板中，在表单标签中添加 enctype="multipart/form-data"。例子：

```
<form method="post" action="." enctype="multipart/form-data"> 
```

# windows - 在安装程序中重命名目录

> ID：308601
> 
> 赞同：0
> 
> 时间：2008-11-21T12:23:15.810
> 
> 标签：windows, installation

我正在开发一个需要能够自我更新的 Windows 应用程序。当按下按钮时，它会启动安装程序，然后父应用程序退出。在安装过程中的某个时刻，安装程序会尝试重命名运行父应用程序的目录并失败并显示“拒绝访问”如果您从桌面运行安装程序，它可以工作。

我正在使用 CreateProcess 启动安装程序，是否有某种方法可以使用此 API 或其他 API 来完全独立于父应用程序创建安装程序，这样它就不会保留目录的某些附件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-30T23:53:38.157

You should use the normal update system within the windows installer. your access denied message appears because file/directory is in use.

renaming directories isn't also not a good idea. what happened if the user clicks "repair" or "uninstall" ?

you can start the msi with shellexec. after that terminate you app immediately. you should check that in the msi that your app is NOT running anymore.

do the update. if a file is in use the installer automatically wants to reboot to replace the stuff.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T04:40:36.953

如果您传递正确的参数， CreateProcess 应该可以工作。不要以任何方式引用父进程并将大多数内容设置为 NULL。如果这不起作用，那么您可以尝试 WinExec()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-30T20:31:14.073

我不相信单独启动安装程序会解决您的问题。这听起来更像是一个权限问题，您可以使用 ACL 操作来解决。如果应用程序还没有权限来处理该文件夹，您可以编写自定义操作来通过向您的进程添加必要的权限来解决问题。

另一种方法是确保目录删除发生在您控制的自定义操作中（例如，您拥有/维护执行删除的代码，而不是依赖 MsiExec 为您执行此操作）。然后，将该自定义操作设置为在系统上下文中运行，以便它具有与服务相同的权限。这应该为您的安装程序提供足够的权限来删除该文件夹。

# python - 将 REST 添加到 Django

> ID：308605
> 
> 赞同：51
> 
> 时间：2008-11-21T12:24:45.747
> 
> 标签：python, django, apache, rest

我有一个运行良好的 Django 应用程序。我正在添加 REST 服务。我正在寻找一些关于我的 REST 策略的额外输入。

以下是一些我正在绞尽脑汁的事情的例子。

*   现在，我正在使用带有一堆补丁的 Django-REST API。
*   我正在考虑退回到简单地在 Django 中编写返回 JSON 结果的视图函数。
*   我还可以看到在 Apache 中过滤 REST 请求并将它们路由到单独的非 Django 服务器实例。

请为每个答案提名一种方法，以便我们可以投票赞成或反对。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2008-11-21T13:38:49.590

> 我正在考虑退回到简单地在 Django 中编写返回 JSON 结果的视图函数。

*   显式
*   可移植到其他框架
*   不需要修补 Django

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2009-10-02T15:03:10.810

请注意，REST 不仅仅意味着 JSON 结果。REST 本质上意味着通过原生但成熟的 HTTP 公开面向资源的 API。我不是 REST 方面的专家，但以下是 Rails 正在做的一些事情。

*   URL 应该是好的、简单的资源名称
*   使用正确的 HTTP 方法
    *   HEAD、GET、POST、PUT 和 DELETE
    *   可选择使用覆盖（表单参数“_method”将覆盖 HTTP 请求方法）
*   通过 Accept request-header 支持内容类型协商
    *   可选地使用覆盖（URL 中的文件扩展名将覆盖接受请求标头中的 MIME 类型）
    *   可用的内容类型应包括 XML、XHTML、HTML、JSON、YAML 和许多其他适当的类型

例如，要获得原生 HTTP 支持，服务器应该响应

```
GET /account/profile HTTP/1.1
Host: example.com
Accept: application/json 
```

因为它会回应

```
GET /account/profile.json HTTP/1.1
Host: example.com 
```

它应该回应

```
PUT /account/profile HTTP/1.1
Host: example.com

var=value 
```

因为它会回应

```
POST /account/profile HTTP/1.1
Host: example.com

_method=PUT&var=value 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2010-03-29T22:23:46.010

~~对于正在为 Django 寻找一个非常体面的、可插入的 API 应用程序的其他人，请务必查看 jespern 的[django-piston](http://bitbucket.org/jespern/django-piston)，它在 BitBucket 内部使用。~~

~~它维护得很好，有很多追随者和一些很酷的分支，它们可以添加对分页和其他身份验证方法的支持（开箱即用支持 OAuth）。~~

更新以反映不再维护 django-piston。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2011-12-05T12:54:12.897

[Tastypie](http://django-tastypie.readthedocs.org/en/latest/index.html)也是一个新兴的 Django REST 框架。它与活塞具有相同的思维方式，并删除了许多样板代码。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2011-07-06T15:27:57.230

我在这里对同一问题的回答：[在 Django 中实现 REST Web 服务的框架](https://stackoverflow.com/questions/2488325/framework-for-implementing-rest-web-service-in-django/6535255#6535255)

简短的版本是，看看[https://github.com/jgorset/django-respite/](https://github.com/jgorset/django-respite/)早期的 REST 框架，但我们每天都在客户端项目中使用它。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-11-21T14:07:36.083

废弃 Django REST api 并提出您自己的开源项目，其他人可以为该项目做出贡献。我愿意做出贡献。我有一些基于表单 api 的代码来执行 REST。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-11-23T14:01:34.910

> 我正在考虑退回到简单地在 Django 中编写返回 JSON 结果的视图函数。

我会同意的..
Ali A 总结得很好。

对我来说，重点是明确的。我会避免使用自动将对象转换为 json 的函数，如果该对象具有对用户的引用并且密码（即使它是散列的）以某种方式进入 json 片段怎么办？

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-11-23T20:26:22.263

我最终选择了我自己的 Django REST API 框架（如果我能找到可行的替代方案，我很想摆脱它），并为我不想处理的极端情况添加了一些自定义视图。一切顺利。

所以是1和2的组合；如果没有某种形式的框架，您最终会为常见情况编写相同的样板。

我还做了一些独立的 API。我喜欢将它们作为独立的服务，但它们独立于其他代码的事实导致它们被忽视。没有技术原因；简直视而不见，心不在焉。

我真正想看到的是一种统一 Django 表单和 REST API 的方法，因为它们经常共享很多逻辑。从概念上讲，如果您的应用程序在 HTML 中公开某些内容，它可能也希望以编程方式公开它。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2010-10-21T14:01:29.277

您可以查看[django-dynamicresponse](http://github.com/funkbit/django-dynamicresponse)，这是一个轻量级框架，用于将带有 JSON 的 REST API 添加到您的 Django 应用程序。

它只需极少的更改即可将 API 支持添加到现有的 Django 应用程序，并使其从一开始就直接在新项目中内置 API。

基本上，除了将返回的上下文序列化为 JSON 或根据请求类型有条件地呈现模板/重定向之外，它还包括将 JSON 解析为 request.POST 的中间件支持。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-04-10T01:09:11.387

您可以尝试制作一个通用函数来处理可以从生成网页的视图以及生成 json/xml/whatever 的视图中调用的数据（如提到的 parand）

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-01-27T01:17:19.930

TastyPie 看起来非常有趣和有前途。它与 Django 配合得很好。

# .net - .net 中是否有任何通用面包屑管理库/代码？

> ID：308608
> 
> 赞同：1
> 
> 时间：2008-11-21T12:26:14.527
> 
> 标签：.net, breadcrumbs, sitemappath

我想做一个msdn风格的面包屑导航

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-21T12:28:08.423

是的 - 查看[SiteMapPath](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sitemappath.aspx)和 Visual Studio 工具箱中的其他菜单/站点导航控件。

# java - 如何以编程方式加密/解密 JSP 中的纯文本凭据？

> ID：308609
> 
> 赞同：2
> 
> 时间：2008-11-21T12:27:06.083
> 
> 标签：java, authentication, jsp, encryption

作为我日常工作的一部分，我不幸地管理了一个古老的、曾经“只是内部”的 JSP Web 应用程序，它依赖于以下身份验证模式：

```
...

// Validate the user name and password.
if ((user != null) && (password != null) && (
    (user.equals("brianmay") && password.equals("queen")) ||
    (user.equals("rogertaylor") && password.equals("queen")) ||
    (user.equals("freddiemercury") && password.equals("queen")) ||
    (user.equals("johndeacon") && password.equals("queen"))
   )) {
// Store the user name as a session variable.
    session.putValue("user", user);

... 
```

尽管我很想，女王成员从来都不是该系统的用户，但无论如何它确实是一个很好的例子，不是吗？

尽管通过策略该客户端通过域身份验证等来强制执行安全性，因此这个问题不被视为安全风险，但我的想法是至少使用简单的 MD5 或 SHA1 方法来混淆纯文本凭据，所以这些敏感数据是肉眼看不到的。

当谈到 JSP 时，我完全是新手，所以我非常感谢您愿意与我分享的任何建议。

提前非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-21T13:00:00.497

很难理解您正在考虑的确切方案，但我假设密码来自请求，并且您想计算请求发送到的 JSP 中的 MD5 哈希。之后，您可以将其与预先计算的 MD5 版本进行比较。如果不使用 https 并在提交密码之前使用[javascript MD5 库对密码进行哈希处理，您甚至可以更安全。](http://pajhome.org.uk/crypt/md5/)

你可以像这样在java中对一个字符串进行MD5：

```
try
{
  String digestInput = "queen";

  MessageDigest messageDigest = MessageDigest.getInstance("MD5");
  messageDigest.update(digestInput.getBytes());

  BASE64Encoder base64Encoder = new BASE64Encoder();
  String digestString = base64Encoder.encode(messageDigest.digest());

  // digestString now contains the md5 hashed password
}
catch (Exception e)
{
  // do some type of logging here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-21T12:30:39.790

首先，您应该将该逻辑从 jsp 移至单独的类。

其次，您不应该在代码中的任何位置保留纯文本密码。使用某种单向哈希函数（md5、sha1、...）并仅保留密码哈希。

检查用户密码时，首先对其进行散列，然后比较散列。

# c# - 在二进制流上实现 ReadLine() 的最有效方法是什么？

> ID：308615
> 
> 赞同：1
> 
> 时间：2008-11-21T12:29:06.813
> 
> 标签：c#, .net, vb.net

如果我在任何时候错了，请随时纠正我......

我正在尝试使用 .NET 文件 I/O 类读取[CSV （逗号分隔值）文件。](http://en.wikipedia.org/wiki/Comma-separated_values)现在的问题是，这个 CSV 文件可能在某些字段和标准文本模式中包含一些带有软回车的字段（即单独的 \r 或 \n 标记，而不是文本文件中用于结束一行的标准 \r\n） I/O 类 StreamReader 不遵守标准约定，将软回车视为硬回车，从而损害 CSV 文件的完整性。

现在使用 BinaryReader 类似乎是唯一的选择，但 BinaryReader 没有 ReadLine() 函数，因此需要我自己实现 ReadLine()。

我当前的方法一次从流中读取一个字符并填充 StringBuilder 直到获得 \r\n（忽略所有其他字符，包括单独的 \r 或 \n），然后返回 StringBuilder 的字符串表示形式（使用 ToString( ））。

但我想知道：这是实现 ReadLine() 函数的最有效方式吗？请赐教。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-11-21T12:49:14.340

它可能是。就顺序而言，它只通过每个 char 一次，所以它是 O(n) （其中 n 是流的长度），所以这不是问题。要读取单个字符，BinaryReader 是您最好的选择。

我要做的是上课

```
public class LineReader : IDisposable
{
    private Stream stream;
    private BinaryReader reader;

    public LineReader(Stream stream) { reader = new BinaryReader(stream); }

    public string ReadLine()
    {
        StringBuilder result = new StringBuilder();
        char lastChar = reader.ReadChar();
        // an EndOfStreamException here would propogate to the caller

        try
        {
            char newChar = reader.ReadChar();
            if (lastChar == '\r' && newChar == '\n')
                return result.ToString();

            result.Append(lastChar);
            lastChar = newChar;
        }
        catch (EndOfStreamException)
        {
            result.Append(lastChar);
            return result.ToString();
        }
    }

    public void Dispose()
    {
        reader.Close();
    }
} 
```

或类似的东西。

[（警告：代码未经测试，按原样提供，不提供任何形式的明示或暗示保证。如果该程序证明有缺陷或破坏地球，您将承担所有必要的维修、修理或更正的费用。）]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-26T15:59:55.857

您可能希望查看使用 ODBC/OleDB 连接来执行此操作。如果将 oledb 连接的数据源指向包含 csv 文件的目录，则可以像每个 CSV 是一个表一样查询它。
检查 http://www.connectionstrings.com/?carrier=textfile>connectionstrings.com 以获取正确的连接字符串

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-19T18:12:48.930

这是 BinaryReader 类的扩展方法：

```
using System.IO;
using System.Text;

public static class BinaryReaderExtension
{
    public static string ReadLine(this BinaryReader reader)
    {
        if (reader.IsEndOfStream())
            return null;

        StringBuilder result = new StringBuilder();
        char character;
        while(!reader.IsEndOfStream() && (character = reader.ReadChar()) != '\n')
            if (character != '\r' && character != '\n')
                result.Append(character);

        return result.ToString();
    }

    public static bool IsEndOfStream(this BinaryReader reader)
    {
        return reader.BaseStream.Position == reader.BaseStream.Length; 
    }
} 
```

我没有在所有条件下进行测试，但这段代码对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-21T12:38:17.233

简单地预处理文件怎么样？

用独特的东西替换软回车。

作为记录，数据中带有换行符的 CSV 文件，这是一个糟糕的设计。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-21T12:43:57.750

您可以一次读取更大的块，使用 Encoder.GetString 将其解编码为字符串，然后使用 string.Split("\r\n") 分割成行，甚至使用 string.Substring( 0,string.IndexOf("\r\n")) 剩下的留给下一行的处理。请记住将下一个读取操作添加到上一次读取的最后一行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-21T12:50:25.787

你的方法听起来不错。提高方法效率的一种方法可能是将每一行存储为常规字符串（即不是 StringBuilder），然后将整行字符串附加到 StringBuilder。请参阅[这篇文章](http://www.codeproject.com/KB/cs/StringBuilder_vs_String.aspx)以获得进一步的解释 - StringBuilder 并不是这里的最佳选择。

不过，这可能无关紧要。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-03-02T16:38:46.550

这是一个更快的编码支持替代方案。它扩展了 BinaryReader，因此您可以使用它来读取二进制块，也可以直接在二进制流上执行 StreamReader，如 ReadLine。

```
public class LineReader : BinaryReader
{
    private Encoding _encoding;
    private Decoder _decoder;

    const int bufferSize = 1024;
    private char[] _LineBuffer = new char[bufferSize];

    public LineReader(Stream stream, int bufferSize, Encoding encoding)
        : base(stream, encoding)
    {
        this._encoding = encoding;
        this._decoder = encoding.GetDecoder();
    }

    public string ReadLine()
    {
        int pos = 0;

        char[] buf = new char[2];

        StringBuilder stringBuffer = null;
        bool lineEndFound = false;

        while(base.Read(buf, 0, 2) > 0)
        {
            if (buf[1] == '\r')
            {
                // grab buf[0]
                this._LineBuffer[pos++] = buf[0];
                // get the '\n'
                char ch = base.ReadChar();
                Debug.Assert(ch == '\n');

                lineEndFound = true;
            }
            else if (buf[0] == '\r')
            {
                lineEndFound = true;
            }                    
            else
            {
                this._LineBuffer[pos] = buf[0];
                this._LineBuffer[pos+1] = buf[1];
                pos += 2;

                if (pos >= bufferSize)
                {
                    stringBuffer = new StringBuilder(bufferSize + 80);
                    stringBuffer.Append(this._LineBuffer, 0, bufferSize);
                    pos = 0;
                }
            }

            if (lineEndFound)
            {
                if (stringBuffer == null)
                {
                    if (pos > 0)
                        return new string(this._LineBuffer, 0, pos);
                    else
                        return string.Empty;
                }
                else
                {
                    if (pos > 0)
                        stringBuffer.Append(this._LineBuffer, 0, pos);
                    return stringBuffer.ToString();
                }
            }
        }

        if (stringBuffer != null)
        {
            if (pos > 0)
                stringBuffer.Append(this._LineBuffer, 0, pos);
            return stringBuffer.ToString();
        }
        else
        {
            if (pos > 0)
                return new string(this._LineBuffer, 0, pos);
            else
                return null;
        }
    }

} 
```

# c++ - STL 向量比较问题

> ID：308619
> 
> 赞同：4
> 
> 时间：2008-11-21T12:30:54.237
> 
> 标签：c++, stl

向量定义为`std::vector<std::string>`，想知道为什么以下是有效的：

```
if ( vecMetaData[0] != "Some string" ) 
{
    ... 
```

但不是这个：

```
switch ( vecMetaData[1] )
{
    ... 
```

视觉工作室抱怨：

```
error C2450: switch expression of type 'std::basic_string<_Elem,_Traits,_Ax>' is illegal
1>        with
1>        [
1>            _Elem=char,
1>            _Traits=std::char_traits<char>,
1>            _Ax=std::allocator<char>
1>        ]
1>        No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-11-21T12:38:00.713

switch() 需要一个整数类型（如 int、char、...）

string 不是整数类型，string 也没有隐式转换为整数类型，因此不能在 switch 语句中使用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-21T12:37:43.630

它是有效的，因为第一个将调用 std::string 的 operator!=，它将接受一个 const char* 作为参数。然而，这并不意味着 std::string 也有一个运算符 some_integral_type() 将返回 switch 需要的整数表达式。

在 C++ 中使用运算符不需要调用内置含义。例如，您的代码不会比较指针值。它可能会调用用户定义的（在本例中为 std::string 之一）运算符函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-21T12:37:20.760

您只能对基本数据类型（int、char 等）使用 switch。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-21T12:59:56.410

顺便说一句，最简单的替代方案是`std::map<std::string, boost::function> StringSwitch;`

这让你说`StringSwitch["Some string"](arguments...)`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-21T15:43:23.660

如果你只想检查向量中的每一件事，你可以使用[`for_each`](http://en.cppreference.com/w/cpp/algorithm/for_each)标准库函数。或者，如果您想对可能值的子集进行操作，请使用[`find_if`](http://en_cppreference.com/w/cpp/algorithm/find_if)获取匹配项的迭代器，然后使用循环或`for_each`对它们进行操作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-01T22:46:26.207

无论如何，这些都不是您想要的...因为我假设您想使用 std::string::compare 函数进行字符串比较

# c# - LINQ To SQL 奇怪的连接问题

> ID：308620
> 
> 赞同：0
> 
> 时间：2008-11-21T12:31:15.000
> 
> 标签：c#, linq-to-sql, inner-join

我有一个带有两个表的简单数据库。用户和配置。用户有一个外键将其链接到特定配置。

我有一个奇怪的问题，无论第二个参数值如何，以下查询总是会导致对配置表的内部联接。据我所知，即使对象初始化的“UserConfiguration =”部分是有条件的，LINQ 也看不到这一点，并确定在任何情况下都遵循关系。

如果我真的删除了最后一次初始化，整个事情就会按预期工作。当 loadConfiguration == false 时它不会内连接，而当 loadConfiguration == true 时它会加入。

有人对此有任何想法吗？这种语法是行不通的吗？我现在唯一的想法是将 return 包装在一个基本的 if 语句中——我只是想避免重复的行。

```
public UserAccount GetByUsername(string username, bool loadConfiguration)
{
    using (Database database = new Database())
    {
        if (loadConfiguration)
        {
            DataLoadOptions loadOptions = new DataLoadOptions();
            loadOptions.LoadWith<User>(c => c.Configuration);
            database.LoadOptions = loadOptions;
        }

        return (from c in database.Users
                where c.Username == username
                select new UserAccount
                {
                    ID = c.ID,
                    ConfigurationID = c.ConfigurationID,
                    Username = c.Username,
                    Password = c.Password.ToArray(),
                    HashSalt = c.HashSalt,
                    FirstName = c.FirstName,
                    LastName = c.LastName,
                    EmailAddress = c.EmailAddress,

                    UserConfiguration = (loadConfiguration) ? new ApplicationConfiguration
                    {
                        ID = c.Configuration.ID,
                        MonthlyAccountPrice = c.Configuration.MonthlyAccountPrice,
                        TrialAccountDays = c.Configuration.TrialAccountDays,
                        VAT = c.Configuration.VAT,
                        DateCreated = c.Configuration.DateCreated

                    } : null

                }).Single();
    }
} 
```

提前致谢，

马丁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-11-21T12:37:50.633

我不认为它会那样工作。

我建议将其拆分为 2 个不同的查询。

可能有更好的方法，但它需要更多的“管道”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-21T12:50:32.263

不，这行不通。我多次遇到类似的问题。其原因与编译时的表达式与运行时的条件有关。

您可以进行 2 次查询，或者如果您不介意加入配置而不管 loadConfiguration 参数，您可以使用：

```
var q = (from c in database.Users
                where c.Username == username
                select c).Single(); 
```

然后在结果上使用 Linq-to-Objects。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-21T13:07:22.167

~~将 .Single() 替换为 SingleOrDefault() ，Linq 将切换到左外连接。我不知道在您的情况下它是否会这样做，但在某些情况下会这样做。~~

编辑 dint 看到 Single 是针对整个查询而不是针对配置部分的：

试试这个：

```
 UserConfiguration = (loadConfiguration && c.Configuration != null) ? new ApplicationConfiguration
     {
          ID = c.Configuration.ID,
          MonthlyAccountPrice = c.Configuration.MonthlyAccountPrice,
          TrialAccountDays = c.Configuration.TrialAccountDays,
          VAT = c.Configuration.VAT,
          DateCreated = c.Configuration.DateCreated
      } : null 
```

# java - 哪个开源 java 或 .net 项目具有最好的单元测试覆盖率？

> ID：308638
> 
> 赞同：0
> 
> 时间：2008-11-21T12:44:01.980
> 
> 标签：java, .net, unit-testing

我想更深入地研究单元测试的概念。需要一个能够说明单元测试最佳实践的开源项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-21T17:35:45.277

我在[CruiseControl](http://cruisecontrol.sourceforge.net/)（原始 Java 版本）上工作，我认为它值得考虑作为研究的来源，原因如下：

1.  大量的单元测试。当然不是最高的覆盖率，但有很多值得关注的地方。
2.  多样化的技术。有 pojos、标签库、velocity 宏、spring 等。
3.  单元测试的质量参差不齐。因为我们从外部获取贡献，所以单元测试的质量和完整性各不相同。核心课程经过了很好的测试。许多贡献未经测试或测试不佳。将测试不佳的那些视为“留给读者的练习”。;)
4.  [也许是最好的理由：您可以在developer mailing list](http://cruisecontrol.sourceforge.net/developers.html)上询问有关测试的问题。在最好的情况下，您甚至可以最终为一些未经测试的领域编写测试并获得指导。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-21T13:03:06.760

[NUnit](http://www.nunit.org) （.NET 单元测试软件）的源代码值得一看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-21T14:51:19.087

您可能可以获得[Spring Framework](http://springframework.org/)源代码，其背后的团队提倡测试驱动开发，并且该框架可用于 Java .net。

# sql - 选择 X 最近非连续天数的数据

> ID：308650
> 
> 赞同：0
> 
> 时间：2008-11-21T12:50:13.433
> 
> 标签：sql, sql-server, sql-server-2005, datetime

任何人都对选择 x 数量的非连续天数的数据有任何见解吗？日期是标准的 sql 日期时间。例如，我想选择最近 5 天的数据，但记录之间可能有很多天的差距，所以只选择 5 天前和最近的记录是行不通的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-21T13:18:02.330

按照[Tony Andrews](https://stackoverflow.com/questions/308650/select-x-most-recent-non-consecutive-days-worth-of-data#308670)建议的方法，这是在 T-SQL 中执行此操作的一种方法：

```
SELECT
  Value,
  ValueDate
FROM
  Data
WHERE
  ValueDate >= 
  (
    SELECT 
      CONVERT(DATETIME, MIN(TruncatedDate))
    FROM 
      (
         SELECT DISTINCT TOP 5 
           CONVERT(VARCHAR, ValueDate, 102) TruncatedDate
         FROM 
           Event
         ORDER BY 
           TruncatedDate DESC
      ) d
  )
ORDER BY
  ValueDate DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-21T12:58:19.797

我不知道 SQL Server 语法，但您需要：

1）按降序选择日期（时间部分被截断）

2) 选出前 5 名

3) 获得第 5 个值

4) 选择日期时间 >= 第 5 个值的数据

像这样的“伪SQL”：

```
select *
from data
where datetime >=
( select top 1 date
  from
  ( select top 5 date from
    ( select truncated(datetime) as date
      from data
      order by truncated(datetime) desc
    )
    order by date
  )
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-21T15:30:32.767

从性能的角度来看，这应该可以做到并且相当不错。您没有提到如何处理关系，因此如果需要，您可以添加 WITH TIES 子句。

```
SELECT TOP (@number_to_return)
     *   -- Write out your columns here
FROM
     dbo.MyTable
ORDER BY
     MyDateColumn DESC 
```

# winforms - 无法删除工具条容器内的控件

> ID：308656
> 
> 赞同：1
> 
> 时间：2008-11-21T12:50:53.963
> 
> 标签：winforms, visual-studio-2008, designer

我在设计winform时遇到了奇怪的问题。我在工具条容器中放置了一些控件，现在我无法删除它们。也无法删除整个 Toolstripcontainer。我正在使用 Visual Studio 2008 SP1 以及一些额外的补丁。它是 Visual Studio 中的错误吗？有什么解决方法吗？还是我对VS缺乏了解？最好的问候，托莫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-21T13:07:15.147

尝试关闭设计器，清理您的解决方案并重新打开设计器窗口？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-21T12:54:38.230

您可以进入 .Designer.Cs 并手动删除行吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-16T08:56:32.263

我有 Visual Studio 2014，但我认为它会有所帮助。

通常，当您设置“toolStripContainer”=“Fill”的“Dock”属性值时，您不能删除“toolStripContainer”。

在这个情况下：

1.  您必须在“toolStripContainer”上单击鼠标右键才能获得上下文菜单。
2.  在上下文菜单中，您必须选择 -> “文档结构”。
3.  之后，在右侧工具栏中，您将获得工具栏“文档结构”。选择您需要从表单中删除的“toolStripContainer”的根元素。
4.  用鼠标右键单击它。在上下文菜单中选择“删除”。或者选择它并更改“toolStripContainer”的“Dock”属性的值，之后您将能够再次在表单设计器中移动此控件。

# php - 从 ssl 移动到非 ssl 时会话未保存

> ID：308659
> 
> 赞同：9
> 
> 时间：2008-11-21T12:53:19.387
> 
> 标签：php, cakephp, session

我有一个登录屏幕，我强制使用 ssl，所以像这样： [https](https://www.foobar.com/login) ://www.foobar.com/login 然后在他们登录后，他们被移动到主页： [https ://www.foobar.com/dashbaord](https://www.foobar.com/dashbaord)

但是，我想在登录后将人们从 SSL 中移出（以节省 CPU），因此在检查他们实际上已登录[https://www.foobar.com/dashbaord](https://www.foobar.com/dashbaord)之后，我将他们移至 [http:// www.foobar.com/dashbaord](http://www.foobar.com/dashbaord)

好吧，这似乎总是会清除会话变量，因为当页面再次运行时，它会确认它们已登录（就像所有页面一样）并且会话似乎不存在，因此它将它们移动到登录屏幕。

奇数/发现：

1.  项目清单
2.  第二次登录总是有效，并且很高兴让我访问[http://www.foobar.com/dashbaord](http://www.foobar.com/dashbaord)
3.  它在第一次登录时成功创建了一个 cookie
4.  如果我登录两次，然后注销，然后再次登录，我不需要两次登录（我似乎已经将此追溯到 cookie 存在的事实）。如果我删除 cookie，我将返回两次登录。
5.  第二次登录后，我可以从非 ssl 从 ssl 移动，并且会话仍然存在。
6.  在第一次登录时，移动到非 ssl 站点会完全清除会话，手动移动回 ssl 站点仍然会迫使我再次登录。
7.  第二次登录使用与第一次完全相同的机制，通过 ssl

我尝试了什么：

1.  使用 Cake 的 security.level 和 session.checkagent 设置 - 没有
2.  让蛋糕将会话存储在数据库中（而不是文件系统） - 没有
3.  在 XP 机器上测试 FF、IE、Chrome。

所以我觉得这与正在创建但未被读取的 cookie 有关。

环境： 1\. Debian 2\. Apache 2 3\. Mysql 4 4\. PHP 5 5\. CakePHP 6\. 会话保存 PHP 默认为文件

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-08T17:21:21.537

我想通了。Cake 在 SSL 连接下自动切换 session.cookie_secure ini 值，因此创建的 cookie 是安全 cookie，第二页无法识别。

解决方案，注释掉 /cake/lib/session.php 第 420 行 ish：

> ini_set('session.cookie_secure', 1);

（只需搜索即可找到它，因为我确信 # 行会随着版本的发布而改变。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-11-21T17:56:05.487

虽然接受的答案满足了 OP 的愿望，即“一旦登录就将人们从 SSL 中移除”——这是非常不安全的，因为它将用户会话暴露给劫持（参见 Firesheep 以获得简单的利用）。

在 CakePHP 的默认行为（要求所有页面在用户通过 SSL 进行身份验证后提供 SSL）和接受的答案（提供所有未加密的已验证页面并公开已验证的 cookie）之间的更好折衷方案是提供通过 SSL 加密的页面，如果并且仅当他们需要身份验证时。

实现此目的的一种简单方法是维护两个会话 cookie - 一个提供安全并保存身份验证信息，另一个提供不安全。支持这种双会话方法的简单实现将使用 session_handler 来覆盖 session.name，如下所示：

```
 if (env('HTTPS')) {
        ini_set('session.name', Configure::read('Session.cookie').'-SECURE');
    }else{
        ini_set('session.name', Configure::read('Session.cookie'));
    } 
```

使用这种方法要记住的一点是，从非 SSL 页面直接链接到需要身份验证的页面将要求您使用 https 显式链接 - 因为您需要发送包含身份验证信息的会话 cookie 和只有在链接被加密时，浏览器才会这样做。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-21T12:58:20.187

首先，我是否正确理解第二次登录使用与第一次登录完全相同的机制（通过 HTTPS）？

除了登录期间创建的会话之外，不安全页面上的第一次点击是否会创建一个新会话？

检查是否在首次登录时未使用`Secure`标志设置 cookie（这意味着 cookie 应仅通过安全 (HTTPS) 连接发送）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-02-05T18:35:21.353

您可以在配置文件中指定您自己的会话处理设置（而不是编辑 CakePHP 库文件。）在配置文件中，您可以将 session.cookie_secure 设置为 0，这将优先于 /cake/lib/session 中的设置。 php。这将允许会话 cookie 用于 SSL 和非 SSL 连接。

这是有关该主题的博客条目：http: [//bakery.cakephp.org/articles/view/how-to-bend-cakephp-s-session-handling-to-your-needs](http://bakery.cakephp.org/articles/view/how-to-bend-cakephp-s-session-handling-to-your-needs)

以及 Cookbook 中的一些文档：http: [//book.cakephp.org/view/173/Sessions](http://book.cakephp.org/view/173/Sessions)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-15T15:55:18.713

您可以在 [http://book.cakephp.org/2.0/en/development/sessions.html](http://book.cakephp.org/2.0/en/development/sessions.html)上的 CakePHP 文档中阅读更多信息 ，当您的应用程序使用 SSL 协议时，CakePHP 的默认设置为将 session.cookie_secure 设置为 true。如果您的应用程序同时使用 SSL 和非 SSL 协议，那么您可能会遇到会话丢失的问题。如果您需要访问 SSL 和非 SSL 域上的会话，则需要禁用此功能：

您打开文件 Config/core.php 并添加如下

```
Configure::write('Session', array(
    'defaults' => 'php',
    'ini' => array(
        'session.cookie_secure' => false
    )
)); 
```

现在您可以切换不会丢失会话的 http 和 https :)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-21T14:10:55.033

您的主页上是否有任何闪存向您的服务器发出后续请求？或者任何 Ajax 加载内容？

您是否检查过从服务器发送的标头？在 IE 中您可以使用 Fiddler 或在 Firefox 中使用 Live Headers 插件。检查设置的任何新 cookie 或具有不同值的 CAKEPHP cookie。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-01-28T09:25:52.220

刚碰到这个问题，我评论了以下内容，效果很好：

```
<br />ini_set('session.name', Configure::read('Session.cookie'));
<br />
from session.php (/cake/lib/session.php, line 480~) 
```

# asp.net - 从 ASP.NET 页面连接到 MSN Messenger

> ID：308664
> 
> 赞同：1
> 
> 时间：2008-11-21T12:55:31.083
> 
> 标签：asp.net, msn-messenger

有人从 ASP.NET 页面连接到 MSN Messenger 吗？我们找到了这个组件：[http](http://www.xihsolutions.net/dotmsn/) ://www.xihsolutions.net/dotmsn/ ，但它只适用于桌面应用程序，我们无法让它在我们的网站上运行。

上述组件或其他组件是否有任何可行的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-21T13:37:02.277

是的-> [Windows Live 服务](http://dev.live.com/)。更具体地说，[Messenger 服务](http://dev.live.com/messenger/)和[此链接](http://msdn.microsoft.com/en-us/library/bb936682.aspx)是将 IM 控件嵌入您的站点的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-02-03T16:42:20.363

我认为该代码现在在 Google Code 中，现在称为[MSNP-Sharp](http://code.google.com/p/msnp-sharp/)。我已经成功地在 Windows 窗体应用程序中使用了它。如果您想从 Web 调用它，您可以创建一个登录到帐户并可以发送消息的 Web 服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-21T13:26:08.510

您是否在防火墙/路由器/代理/...中打开了端口 1863（= 信使使用的端口）？

# c# - 如何制作真正透明的控件？

> ID：308667
> 
> 赞同：5
> 
> 时间：2008-11-21T12:56:23.123
> 
> 标签：c#, winforms, transparency

我需要制作一个只显示轮廓的控件，并且我需要将它放在显示视频的控件上。如果我让我的控件透明，那么视频就会被遮挡，因为透明控件是由它们的父控件绘制的，而视频不是由控件绘制的；它使用 DirectShow 或其他库显示，因此父控件绘制其背景色。

那么 - 我可以制作一个根本不被绘制的控件*，*除非它是不透明的？这样，父控件就不会在视频上绘制。

我知道我可以用四个控件制作边框（如果我想要虚线，可以制作更多），但是是否可以只使用一个控件来做我想做的事情？

* * *

rslite 是对的 - 尽管您甚至不需要像他的示例那样使用 PInvoke - Control.Region 属性就足够了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-21T13:03:36.917

您可以尝试制作一个内部有孔的区域，并使用 SetWindowRgn 设置控制区域。

这是一个[示例](http://www.java2s.com/Code/CSharp/GUI-Windows-Form/PictureButton.htm)（我找不到更好的示例）。这个想法是创建两个区域并从外部区域中减去内部区域。我认为这应该给你你所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-30T23:24:51.873

我使用类控件中的重写函数。

1.  该`createparams`属性现在指示控件可以是透明的。

2.  `InvalidateEx`必须使放置控件的父区域无效

3.  您必须从控件禁用背景颜色的自动绘制 (')

    ```
    Imports System.Windows.Forms.Design
    Imports System.Reflection
        Public Class TransparentControl : Inherits Control
            Protected Overrides ReadOnly Property CreateParams As CreateParams
                Get
                    Dim cp As CreateParams = MyBase.CreateParams()
                    cp.ExStyle = cp.ExStyle Or 32 'WS_EX_TRANSPARENT
                    Return cp
                End Get
             End Property
            Protected Sub InvalidateEx(rct As Rectangle)
                Me.Invalidate(rct)
                If IsNothing(Parent) Then Exit Sub
                Parent.Invalidate(New Rectangle(Me.Location, rct.Size), True)
            End Sub
            Protected Sub InvalidateEx()
                Me.Invalidate()
                 If IsNothing(Parent) Then Exit Sub
                 Parent.Invalidate(New Rectangle(Me.Location, Me.Size), True)
            End Sub
            Protected Overrides Sub OnPaintBackground(pevent As PaintEventArgs)
                'MyBase.OnPaintBackground(pevent)
            End Sub

            Protected Overrides Sub OnPaint(e As PaintEventArgs)
                 MyBase.OnPaint(e)
                'draw the layout on e.Graphics
            End Sub
        End Class 
    ```

您可以扩展此类以进行自己的控制。调试后该类将出现在工具箱中。

希望这能解决问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2008-11-21T13:12:39.957

您可以尝试设置[`Form.TransparencyKey`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.transparencykey.aspx)属性。如果做不到这一点，您可以使用 DirectX 访问帧缓冲区并直接绘制到它。

# flash - 如何将播放控件添加到我的嵌入式 swf？

> ID：308669
> 
> 赞同：2
> 
> 时间：2008-11-21T12:56:59.037
> 
> 标签：flash, jing

所以我用 Jing（我喜欢）创建了我闪亮的新截屏视频，并将我的 swf 文件放在我的 Web 服务器上并嵌入到一个测试 html 页面中。它工作得很好。但是，当我播放视频时，视频上没有播放控件。如何向视频添加简单的播放控件（暂停、播放、进度指示器）？

这是我目前正在使用的嵌入代码：

```
<object width="1024" height="768">
    <param name="movie" value="swf/ClientSchedules1.swf">
    <embed src="swf/ClientSchedules1.swf" width="1024" height="768></embed>
</object> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-11-03T02:46:06.353

控件是具有功能的图像，必须使用脚本命令创建才能执行任何操作。有一些软件应用程序可以让您解决这个问题。我发现 swf 控件不会出现，因为您希望它们出现。它们没有嵌入在浏览器中。

# c++ - 将 C++ 库集成到 iPhone 应用程序中

> ID：308673
> 
> 赞同：8
> 
> 时间：2008-11-21T12:59:17.703
> 
> 标签：c++, ios, xcode

我可以将现有的 C++ 库集成到 iPhone 应用程序中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-21T14:38:40.033

虽然确实不能在 Objective-C 中混合 C++ 类，但你可以将它与 Objective-C++ 混合，我相信 iPhone 也支持它。将 C++ 代码与 iPhone 应用程序集成应该不是问题，但如果您想保持安全，那么您应该将代码构建为库，然后从您的 iPhone 应用程序链接到它；这样您就不必担心混合 Obj-C 代码和 C++ 类。

至于 Apple 的批准，没有人可以给你一个明确的答案，因为 Apple 对整个过程相当封闭。但是，现在很明显，某些类型的应用程序不会成功。即：

*   以 Apple 不喜欢的方式“滥用”或扭曲 iPhone SDK 的应用程序。IE，设置设备亮度
*   使用过多的带宽或系统资源（不必要地耗尽电池寿命）
*   在某处复制 Apple 的功能（即，制作邮件客户端、网络浏览器等）
*   滥用定价层和方案

实际上，最好只用谷歌搜索被禁应用的示例，以便更好地了解它。但最重要的是，这不是您的应用程序*如何*做某事，而是您的应用程序正在做*什么*会导致它被禁止。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-21T13:07:03.743

Apple 的 gcc 对 Objective C++ 进行了很好的定义和支持。

但是你不能混合 C++ 和目标 C 类，这使得这相当混乱。我不认为有很多项目在很大程度上混合了 C++ 和 Objective C。

这在很大程度上取决于您的库，但如果（实际上）可行，我会将 C++ 包装在 C 库中，对所有实际功能使用外部“C”入口点，并从您的目标 C 代码中为您的 iPhone 应用程序链接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-04T21:22:13.423

我刚刚开始进行 iPhone 开发，但我已经能够成功使用一些现有的 C++ 库而无需任何更改。我带来了一些我已经编写好的 OpenGL 类，它们工作得很好，因为 iPhone 上的 gl 库都是 C 而不是 Obj-C。例如，我正在使用 Obj-C 将纹理加载到 GLubyte 数组中以获取资源、大小等，然后将这些值传递给我的 C++ 代码，该代码执行 gl 调用以创建纹理。这同样适用于加载几何。

只需将您的 .m 文件更改为 .mm ，一切似乎都可以正常工作。目标 C++ 类可以具有 C++ 类的成员（尽管我认为其他方式不适用，这可能是一个问题）。

# xml - 可以处理大文件的轻量级 XML 查看器

> ID：308679
> 
> 赞同：174
> 
> 时间：2008-11-21T13:00:50.633
> 
> 标签：xml, browser, viewer

有很多“重量级”工具，例如 XmlSpy，它们非常适合在 xml 文档中进行探索 - 但通常（在某些情况下非常常见！）您只想快速打开和浏览 xml 文档，并将其打印出来。可能具有一些基本的搜索功能（文本可能很好）。

我通常为此使用浏览器，例如 Firefox 的 IE，但它们往往会因文件大小较大而崩溃（我经常打开 10 多 MB 或更多的文件）。

我对如何实现这样的查看器有一些想法，所以我确信肯定有一些东西可以做到，但我的 google-fu 让我失望了。

所以我想我应该把它放在引领潮流的蜂巢思维中。

想法？

* * *

## 回答 #1

> 赞同：228
> 
> 时间：2009-06-19T17:00:54.157

firstobject 的 605k 下载轻量级原生 Windows[免费 XML 编辑器](http://www.firstobject.com/dn_editor.htm)在 1.3 秒内打开一个 50MB 文件，并提供文本编辑、搜索、语法颜色打印、树视图和其他 XML 功能，包括格式化和内置的完整 CMarkup 脚本。您可以重新格式化整个 50MB XML 文档到不同的缩进（在没什么特别的 2.3GHz/2GB 机器上需要 3 秒）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-11-23T00:19:01.687

[XML Copy Editor](http://xml-copy-editor.sourceforge.net)非常适合这种类型的东西。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-11-21T13:04:55.370

我喜欢[Total Commander](http://www.ghisler.com/index.htm)的查看器，因为它只加载您实际看到的文本，因此速度非常快。当然，它只是一个文本/十六进制查看器，因此它不会格式化您的 XML，但您可以使用基本的文本搜索。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-11-22T23:19:19.887

试试 EditPlus - [http://www.editplus.com/](http://www.editplus.com/)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2011-02-09T12:38:57.943

我已经尝试了几十个 XML 编辑器，希望能找到一个能够进行某种可视化的 XML 编辑器。我发现的最好的 Windows 轻量级*查看器是*[XMLMarker](http://symbolclick.com/) - 太糟糕了，这个项目已经死了好几年了。它不像编辑器那么有用，但它在将平面 XML 数据显示为表格方面做得很好。

有很多免费的编辑器可以进行 XML 语法高亮，包括 vim、emacs、scite、eclipse（J2EE 版）、[jedit](http://www.jedit.org/)、[notepad++](http://notepad-plus-plus.org/)。

对于重量级的 XML 功能，如 XPath 支持、XSLT 编辑和调试、SOAP/WSDL，有一些很好的商业工具，如[XMLSpy](http://www.altova.com/xml-editor/)、[Oxygen](http://www.oxygenxml.com/)、[StylusStudio](http://www.stylusstudio.com/)。

[JEdi​​t](http://www.jedit.org/)是开源的，也有用于 XML、XPath 和 XSLT 的插件。

Word-2003 非常适合可视化（但不要将其用于编辑）。Excel-2003 及更高版本在可视化平面 XML 数据方面也做得很好，并且可以应用 XSL 转换（同样，作为编辑器不好）。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-11-21T13:20:40.640

[JEdi​​t](http://jedit.org/)及其[XML-plugin](http://plugins.jedit.org/plugins/?XML)。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-23T12:49:28.543

[http://www.firstobject.com/dn_editor.htm](http://www.firstobject.com/dn_editor.htm)是迄今为止最好的和最轻量的编辑器，提供了少数实用程序。我建议使用它 - 尝试使用多达 400 MB 的文件和超过一百万条记录 :)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-21T13:13:24.680

我喜欢[Microsoft 的 XML Notepad 2007](http://www.microsoft.com/downloads/details.aspx?familyid=72d6aa49-787d-4118-ba5f-4f30fe913628&displaylang=en)，但我不知道它如何处理非常大的文件，抱歉。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-06-19T17:02:52.110

TextPad 有一个免费的[xmltidy 插件](http://www.textpad.com/add-ons/index.html)，可以漂亮地打印您的 XML。很好而且很快，虽然 TextPad 是共享软件。

# java - 如何在 Java 中获取 UTC 或 GMT 的当前日期和时间？

> ID：308683
> 
> 赞同：534
> 
> 时间：2008-11-21T13:02:16.543
> 
> 标签：java, date, localization, timezone, gmt

当我创建一个新`Date`对象时，它被初始化为当前时间，但在本地时区。如何获取 GMT 的当前日期和时间？

* * *

## 回答 #1

> 赞同：437
> 
> 时间：2008-11-21T13:04:32.483

`java.util.Date`没有特定的时区，尽管它的值最常被认为与 UTC 相关。是什么让你觉得是当地时间？

准确地说：a 中的值`java.util.Date`是自 Unix 纪元以来的毫秒数，该纪元发生在 UTC 时间 1970 年 1 月 1 日午夜。相同的纪元也可以在其他时区进行描述，但传统的描述是用 UTC 来描述的。由于自固定纪元以来的毫秒数，因此`java.util.Date`无论本地时区如何，在任何特定时刻，全球范围内的值都是相同的。

我怀疑问题是您通过使用本地时区的日历实例显示它，或者可能使用`Date.toString()`也使用本地时区的`SimpleDateFormat`实例，或者默认情况下也使用本地时区的实例。

如果这不是问题，请发布一些示例代码。

不过，我还是建议您使用[Joda-Time](http://www.joda.org/joda-time/)，它提供了更清晰的 API。

* * *

## 回答 #2

> 赞同：436
> 
> 时间：2013-10-28T10:14:46.423

* * *

## 回答 #3

> 赞同：279
> 
> 时间：2010-03-27T07:08:23.167

```
SimpleDateFormat dateFormatGmt = new SimpleDateFormat("yyyy-MMM-dd HH:mm:ss");
dateFormatGmt.setTimeZone(TimeZone.getTimeZone("GMT"));

//Local time zone   
SimpleDateFormat dateFormatLocal = new SimpleDateFormat("yyyy-MMM-dd HH:mm:ss");

//Time in GMT
return dateFormatLocal.parse( dateFormatGmt.format(new Date()) ); 
```

* * *

## 回答 #4

> 赞同：91
> 
> 时间：2011-07-14T18:06:20.460

这肯定会返回 UTC 时间：作为 String 和 Date 对象！

```
static final String DATE_FORMAT = "yyyy-MM-dd HH:mm:ss";

public static Date getUTCdatetimeAsDate() {
    // note: doesn't check for null
    return stringDateToDate(getUTCdatetimeAsString());
}

public static String getUTCdatetimeAsString() {
    final SimpleDateFormat sdf = new SimpleDateFormat(DATE_FORMAT);
    sdf.setTimeZone(TimeZone.getTimeZone("UTC"));
    final String utcTime = sdf.format(new Date());

    return utcTime;
}

public static Date stringDateToDate(String StrDate) {
    Date dateToReturn = null;
    SimpleDateFormat dateFormat = new SimpleDateFormat(DATEFORMAT);

    try {
        dateToReturn = (Date)dateFormat.parse(StrDate);
    }
    catch (ParseException e) {
        e.printStackTrace();
    }

    return dateToReturn;
} 
```

* * *

## 回答 #5

> 赞同：68
> 
> 时间：2010-03-16T11:14:00.263

```
 Calendar c = Calendar.getInstance();
    System.out.println("current: "+c.getTime());

    TimeZone z = c.getTimeZone();
    int offset = z.getRawOffset();
    if(z.inDaylightTime(new Date())){
        offset = offset + z.getDSTSavings();
    }
    int offsetHrs = offset / 1000 / 60 / 60;
    int offsetMins = offset / 1000 / 60 % 60;

    System.out.println("offset: " + offsetHrs);
    System.out.println("offset: " + offsetMins);

    c.add(Calendar.HOUR_OF_DAY, (-offsetHrs));
    c.add(Calendar.MINUTE, (-offsetMins));

    System.out.println("GMT Time: "+c.getTime()); 
```

* * *

## 回答 #6

> 赞同：56
> 
> 时间：2010-11-08T14:23:46.477

实际上不是时间，但它的表示可以改变。

```
SimpleDateFormat f = new SimpleDateFormat("yyyy-MMM-dd HH:mm:ss");
f.setTimeZone(TimeZone.getTimeZone("UTC"));
System.out.println(f.format(new Date())); 
```

地球上任何一点的时间都是相同的，但我们对时间的感知可能会因位置而异。

* * *

## 回答 #7

> 赞同：18
> 
> 时间：2010-04-06T14:28:34.103

> 日历 aGMTCalendar = Calendar.getInstance(TimeZone.getTimeZone("GMT")); 然后使用 aGMTCalendar 对象执行的所有操作都将使用 GMT 时区完成，并且不会应用夏令时或固定偏移量

错误的！

```
Calendar aGMTCalendar = Calendar.getInstance(TimeZone.getTimeZone("GMT"));
aGMTCalendar.getTime(); //or getTimeInMillis() 
```

和

```
Calendar aNotGMTCalendar = Calendar.getInstance(TimeZone.getTimeZone("GMT-2"));aNotGMTCalendar.getTime(); 
```

将同时返回。同上

```
new Date(); //it's not GMT. 
```

* * *

## 回答 #8

> 赞同：17
> 
> 时间：2013-05-16T19:35:11.493

这适用于在 Android 中获取 UTC 毫秒。

```
Calendar c = Calendar.getInstance();
int utcOffset = c.get(Calendar.ZONE_OFFSET) + c.get(Calendar.DST_OFFSET);  
Long utcMilliseconds = c.getTimeInMillis() + utcOffset; 
```

* * *

## 回答 #9

> 赞同：17
> 
> 时间：2013-10-26T14:39:47.783

此代码打印当前时间 UTC。

```
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.TimeZone;

public class Test
{
    public static void main(final String[] args) throws ParseException
    {
        final SimpleDateFormat f = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss z");
        f.setTimeZone(TimeZone.getTimeZone("UTC"));
        System.out.println(f.format(new Date()));
    }
} 
```

结果

```
2013-10-26 14:37:48 UTC 
```

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2012-05-22T18:01:10.167

[这是Jon Skeet 的回答](https://stackoverflow.com/a/308689/366904)中似乎不正确的内容。他说：

> `java.util.Date`始终采用 UTC。是什么让你觉得是当地时间？我怀疑问题是您通过使用本地时区的日历实例显示它，或者可能使用 `Date.toString()`也使用本地时区的日历实例。

但是，代码：

```
System.out.println(new java.util.Date().getHours() + " hours"); 
```

`Calendar`使用 no和 no给出本地时间，而不是 GMT（UTC 时间）`SimpleDateFormat`。

这就是为什么似乎有些不正确的原因。

将响应放在一起，代码：

```
System.out.println(Calendar.getInstance(TimeZone.getTimeZone("GMT"))
                           .get(Calendar.HOUR_OF_DAY) + " Hours"); 
```

显示格林威治标准时间而不是当地小时——请注意，`getTime.getHours()`这将创建一个`Date()`对象，该对象理论上将日期存储在格林威治标准时间，但会返回当地时区的小时。

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2012-05-04T10:51:55.123

如果您想要一个字段为 UTC 调整的 Date 对象，您可以使用[Joda Time](http://joda-time.sourceforge.net/)这样做：

```
import org.joda.time.DateTimeZone;
import java.util.Date;

...

Date local = new Date();
System.out.println("Local: " + local);
DateTimeZone zone = DateTimeZone.getDefault();
long utc = zone.convertLocalToUTC(local.getTime(), false);
System.out.println("UTC: " + new Date(utc)); 
```

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2010-01-26T16:32:00.830

您可以使用：

```
Calendar aGMTCalendar = Calendar.getInstance(TimeZone.getTimeZone("GMT")); 
```

然后使用 aGMTCalendar 对象执行的所有操作都将使用 GMT 时区完成，并且不会应用夏令时或固定偏移量。我认为之前的海报是正确的，Date() 对象总是返回一个 GMT，直到你对日期对象做一些事情，它才会被转换为本地时区。

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2010-12-21T11:36:14.037

```
SimpleDateFormat dateFormatGmt = new SimpleDateFormat("yyyy-MM-dd");
dateFormatGmt.setTimeZone(TimeZone.getTimeZone("GMT"));
System.out.println(dateFormatGmt.format(date)); 
```

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2012-04-17T06:39:27.163

你可以直接使用这个

```
SimpleDateFormat dateFormatGmt = new SimpleDateFormat("dd:MM:yyyy HH:mm:ss");
dateFormatGmt.setTimeZone(TimeZone.getTimeZone("GMT"));
System.out.println(dateFormatGmt.format(new Date())+""); 
```

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2016-08-31T15:10:16.523

这是我对 toUTC 的实现：

```
 public static Date toUTC(Date date){
    long datems = date.getTime();
    long timezoneoffset = TimeZone.getDefault().getOffset(datems);
    datems -= timezoneoffset;
    return new Date(datems);
} 
```

可能有几种方法可以改进它，但它对我有用。

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2012-05-09T10:34:25.493

这是获取 GMT Timestamp 对象的另一个建议：

```
import java.sql.Timestamp;
import java.util.Calendar;

...

private static Timestamp getGMT() {
   Calendar cal = Calendar.getInstance();
   return new Timestamp(cal.getTimeInMillis()
                       -cal.get(Calendar.ZONE_OFFSET)
                       -cal.get(Calendar.DST_OFFSET));
} 
```

* * *

## 回答 #17

> 赞同：5
> 
> 时间：2012-10-01T03:48:52.807

这是另一种以字符串格式获取 GMT 时间的方法

```
String DATE_FORMAT = "EEE, dd MMM yyyy HH:mm:ss z" ;
final SimpleDateFormat sdf = new SimpleDateFormat(DATE_FORMAT);
sdf.setTimeZone(TimeZone.getTimeZone("GMT"));
String dateTimeString =  sdf.format(new Date()); 
```

* * *

## 回答 #18

> 赞同：4
> 
> 时间：2008-11-21T13:10:06.107

和：

```
Calendar cal = Calendar.getInstance(); 
```

然后`cal`有当前的日期和时间。
您还可以通过以下方式获取时区的当前日期和时间：

```
Calendar cal2 = Calendar.getInstance(TimeZone.getTimeZone("GMT-2")); 
```

您可以向`cal.get(Calendar.DATE);`其他日历常量询问其他详细信息。
Java 中不推荐使用日期和时间戳。日历类不是。

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2011-10-09T00:51:30.800

以特定时区和特定格式呈现系统时间的示例代码。

```
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import java.util.TimeZone;

public class TimZoneTest {
    public static void main (String[] args){
        //<GMT><+/-><hour>:<minutes>
        // Any screw up in this format, timezone defaults to GMT QUIETLY. So test your format a few times.

        System.out.println(my_time_in("GMT-5:00", "MM/dd/yyyy HH:mm:ss") );
        System.out.println(my_time_in("GMT+5:30", "'at' HH:mm a z 'on' MM/dd/yyyy"));

        System.out.println("---------------------------------------------");
        // Alternate format 
        System.out.println(my_time_in("America/Los_Angeles", "'at' HH:mm a z 'on' MM/dd/yyyy") );
        System.out.println(my_time_in("America/Buenos_Aires", "'at' HH:mm a z 'on' MM/dd/yyyy") );

    }

    public static String my_time_in(String target_time_zone, String format){
        TimeZone tz = TimeZone.getTimeZone(target_time_zone);
        Date date = Calendar.getInstance().getTime();
        SimpleDateFormat date_format_gmt = new SimpleDateFormat(format);
        date_format_gmt.setTimeZone(tz);
        return date_format_gmt.format(date);
    }

} 
```

输出

```
10/08/2011 21:07:21
at 07:37 AM GMT+05:30 on 10/09/2011
at 19:07 PM PDT on 10/08/2011
at 23:07 PM ART on 10/08/2011 
```

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2012-05-17T13:04:37.097

`Date`只是为了让这更简单，创建一个`UTC`你可以使用[`Calendar`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html)：

```
Calendar.getInstance(TimeZone.getTimeZone("UTC")); 
```

它将构造一个`Calendar`使用 "UTC"的新实例`TimeZone`。

如果您需要`Date`该日历中的对象，您可以使用`getTime()`.

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2014-01-08T13:08:38.287

**在 UTC 中转换当前日期时间：**

```
DateTimeFormatter formatter = DateTimeFormat.forPattern("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");

DateTimeZone dateTimeZone = DateTimeZone.getDefault(); //Default Time Zone

DateTime currDateTime = new DateTime(); //Current DateTime

long utcTime = dateTimeZone.convertLocalToUTC(currDateTime .getMillis(), false);

String currTime = formatter.print(utcTime); //UTC time converted to string from long in format of formatter

currDateTime = formatter.parseDateTime(currTime); //Converted to DateTime in UTC 
```

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2013-03-25T12:46:16.860

这对我有用，返回格林威治标准时间的时间戳！

```
 Date currDate;
    SimpleDateFormat dateFormatGmt = new SimpleDateFormat("yyyy-MMM-dd HH:mm:ss");
    dateFormatGmt.setTimeZone(TimeZone.getTimeZone("GMT"));
    SimpleDateFormat dateFormatLocal = new SimpleDateFormat("yyyy-MMM-dd HH:mm:ss");

    long currTime = 0;
    try {

        currDate = dateFormatLocal.parse( dateFormatGmt.format(new Date()) );
        currTime = currDate.getTime();
    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2016-10-19T10:31:42.390

```
public static void main(String args[]){
    LocalDate date=LocalDate.now();  
    System.out.println("Current date = "+date);
} 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2012-12-05T08:21:38.047

简单地说。日历对象存储有关时区的信息，但是当您执行 cal.getTime() 时，时区信息将丢失。因此，对于时区转换，我建议使用 DateFormat 类...

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2013-11-01T21:49:57.253

使用此类从在线 NTP 服务器获取正确的 UTC 时间：

```
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;

class NTP_UTC_Time
{
private static final String TAG = "SntpClient";

private static final int RECEIVE_TIME_OFFSET = 32;
private static final int TRANSMIT_TIME_OFFSET = 40;
private static final int NTP_PACKET_SIZE = 48;

private static final int NTP_PORT = 123;
private static final int NTP_MODE_CLIENT = 3;
private static final int NTP_VERSION = 3;

// Number of seconds between Jan 1, 1900 and Jan 1, 1970
// 70 years plus 17 leap days
private static final long OFFSET_1900_TO_1970 = ((365L * 70L) + 17L) * 24L * 60L * 60L;

private long mNtpTime;

public boolean requestTime(String host, int timeout) {
    try {
        DatagramSocket socket = new DatagramSocket();
        socket.setSoTimeout(timeout);
        InetAddress address = InetAddress.getByName(host);
        byte[] buffer = new byte[NTP_PACKET_SIZE];
        DatagramPacket request = new DatagramPacket(buffer, buffer.length, address, NTP_PORT);

        buffer[0] = NTP_MODE_CLIENT | (NTP_VERSION << 3);

        writeTimeStamp(buffer, TRANSMIT_TIME_OFFSET);

        socket.send(request);

        // read the response
        DatagramPacket response = new DatagramPacket(buffer, buffer.length);
        socket.receive(response);          
        socket.close();

        mNtpTime = readTimeStamp(buffer, RECEIVE_TIME_OFFSET);            
    } catch (Exception e) {
      //  if (Config.LOGD) Log.d(TAG, "request time failed: " + e);
        return false;
    }

    return true;
}

public long getNtpTime() {
    return mNtpTime;
}

/**
 * Reads an unsigned 32 bit big endian number from the given offset in the buffer.
 */
private long read32(byte[] buffer, int offset) {
    byte b0 = buffer[offset];
    byte b1 = buffer[offset+1];
    byte b2 = buffer[offset+2];
    byte b3 = buffer[offset+3];

    // convert signed bytes to unsigned values
    int i0 = ((b0 & 0x80) == 0x80 ? (b0 & 0x7F) + 0x80 : b0);
    int i1 = ((b1 & 0x80) == 0x80 ? (b1 & 0x7F) + 0x80 : b1);
    int i2 = ((b2 & 0x80) == 0x80 ? (b2 & 0x7F) + 0x80 : b2);
    int i3 = ((b3 & 0x80) == 0x80 ? (b3 & 0x7F) + 0x80 : b3);

    return ((long)i0 << 24) + ((long)i1 << 16) + ((long)i2 << 8) + (long)i3;
}

/**
 * Reads the NTP time stamp at the given offset in the buffer and returns 
 * it as a system time (milliseconds since January 1, 1970).
 */    
private long readTimeStamp(byte[] buffer, int offset) {
    long seconds = read32(buffer, offset);
    long fraction = read32(buffer, offset + 4);
    return ((seconds - OFFSET_1900_TO_1970) * 1000) + ((fraction * 1000L) / 0x100000000L);        
}

/**
 * Writes 0 as NTP starttime stamp in the buffer. --> Then NTP returns Time OFFSET since 1900
 */    
private void writeTimeStamp(byte[] buffer, int offset) {        
    int ofs =  offset++;

    for (int i=ofs;i<(ofs+8);i++)
      buffer[i] = (byte)(0);             
}

} 
```

并将其用于：

```
 long now = 0;

        NTP_UTC_Time client = new NTP_UTC_Time();

        if (client.requestTime("pool.ntp.org", 2000)) {              
          now = client.getNtpTime();
        } 
```

如果您需要 UTC 时间“现在”作为 DateTimeString 使用函数：

```
private String get_UTC_Datetime_from_timestamp(long timeStamp){

    try{

        Calendar cal = Calendar.getInstance();
        TimeZone tz = cal.getTimeZone();

        int tzt = tz.getOffset(System.currentTimeMillis());

        timeStamp -= tzt;

        // DateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss",Locale.getDefault());
        DateFormat sdf = new SimpleDateFormat();
        Date netDate = (new Date(timeStamp));
        return sdf.format(netDate);
    }
    catch(Exception ex){
        return "";
     }
    } 
```

并将其用于：

```
String UTC_DateTime = get_UTC_Datetime_from_timestamp(now); 
```

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2014-05-27T05:52:42.537

这是我的实现：

```
public static String GetCurrentTimeStamp()
{
    Calendar cal=Calendar.getInstance();
    long offset = cal.getTimeZone().getOffset(System.currentTimeMillis());//if you want in UTC else remove it .
    return new java.sql.Timestamp(System.currentTimeMillis()+offset).toString();    
} 
```

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2015-08-11T06:55:04.643

如果您想避免解析日期并且只想要 GMT 的时间戳，您可以使用：

```
final Date gmt = new Timestamp(System.currentTimeMillis()
            - Calendar.getInstance().getTimeZone()
                    .getOffset(System.currentTimeMillis())); 
```

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2018-07-04T03:24:38.183

```
public class CurrentUtcDate 
{
    public static void main(String[] args) {
        Date date = new Date();
        SimpleDateFormat dateFormat = new SimpleDateFormat("dd-MM-yyyy HH:mm:ss");
        dateFormat.setTimeZone(TimeZone.getTimeZone("UTC"));
        System.out.println("UTC Time is: " + dateFormat.format(date));
    }
} 
```

输出：

```
UTC Time is: 22-01-2018 13:14:35 
```

您可以根据需要更改日期格式。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2015-07-08T10:18:30.217

如果您使用的是 joda 时间并且想要以毫秒为单位的当前时间*而没有本地偏移量*，您可以使用以下命令：

```
long instant = DateTimeZone.UTC.getMillisKeepLocal(DateTimeZone.getDefault(), System.currentTimeMillis()); 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2019-03-04T07:52:52.790

UTC 中的当前日期

```
Instant.now().toString().replaceAll("T.*", ""); 
```

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2022-01-20T08:42:49.783

当我需要**输出一个 Date 对象**时，我就是这样做的，这通常是当您需要将 Date 保存在 SQL 数据库中并且我希望它采用 UTC 时的情况。我只是减去本地时区的偏移时间。

```
 ZonedDateTime now = ZonedDateTime.now();
    Date nowUTC = new Date(1000 * (now.toEpochSecond() - now.getOffset().getTotalSeconds())); 
```

--UPDATE Basil 建议以更清洁的方式获得相同的结果

```
 Date nowUTC = Date.from(ZonedDateTime.now().toInstant()); 
```

但是在非UTC java系统环境中测试后，我发现结果不一样。使用 Basil 的代码，日期仍在本地区域

* * *

## 回答 #32

> 赞同：-1
> 
> 时间：2018-11-01T22:47:26.393

使用 java.time 包并包含以下代码-

`ZonedDateTime now = ZonedDateTime.now( ZoneOffset.UTC );`

或者

`LocalDateTime now2 = LocalDateTime.now( ZoneOffset.UTC );`

取决于您的应用需求。

# asp.net - 最佳 ASP.net 所见即所得

> ID：308685
> 
> 赞同：5
> 
> 时间：2008-11-21T13:02:40.710
> 
> 标签：asp.net, wysiwyg

好的，我已经阅读了之前在此提出的最相关问题，但我仍然没有看到针对 ASP.net 的 WYSIWYG 编辑器的明确“同类最佳”建议

到目前为止，我一直在使用 fckeditor（发现它还可以，但是文件夹的配置/权限等有很多问题）。

我正在寻找具有很多灵活性/配置选项并且可以与站点 css 很好地集成的东西。

另外，我想要在从服务器移动到服务器等时最大限度地减少配置要求的东西。

非常感谢任何好的建议。

埃德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-21T19:29:46.137

几乎没有打开这个问题，因为我认为它已经被提到过，但是[FCKEditor](http://www.fckeditor.net/)是一个很棒的免费提供的所见即所得编辑器，背后有一个优秀的团队。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-21T13:13:28.830

[TinyMCE](http://tinymce.moxiecode.com/) - 除了可配置和可扩展之外，与 asp.net（或任何其他 web 框架）集成非常好，因为它只是 textarea 上的 javascript

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-07-22T09:50:18.353

我停止使用 freetextbox 控件，因为我不喜欢它附带的代码。我发现 ASP.NET 的可爱编辑器是最好的解决方案。

演示：

[http://cutesoft.net/example/general.aspx](http://cutesoft.net/example/general.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-21T13:29:48.783

尝试免费文本框[免费文本框](http://freetextbox.com/)。比我发现的 fckeditor 少很多麻烦

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-21T13:37:56.177

我们使用 Telerik Radeditor，它表现出色。微软也在他们的 MSDN 网站上使用它。它不是免费的，但值得投资。

**[http://demos.telerik.com/aspnet-ajax/editor/examples/overview/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/editor/examples/overview/defaultcs.aspx)**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-21T13:14:42.777

不确定您的预算是多少，但不妨看看 Dreamweaver CS3+。它支持 ASP.NET 并且它的 WYSIWYG 非常好。

# c - 如何在 C 中连接 const/literal 字符串？

> ID：308695
> 
> 赞同：404
> 
> 时间：2008-11-21T13:06:54.553
> 
> 标签：c, string, concatenation

我在 C 中工作，我必须连接一些东西。

现在我有这个：

```
message = strcat("TEXT ", var);

message2 = strcat(strcat("TEXT ", foo), strcat(" TEXT ", bar)); 
```

现在，如果您有 C 方面的经验，我相信您会意识到，当您尝试运行它时，这会给您带来分段错误。那么我该如何解决呢？

* * *

## 回答 #1

> 赞同：450
> 
> 时间：2008-11-21T13:13:29.470

在 C 中，“字符串”只是普通`char`数组。因此，您不能直接将它们与其他“字符串”连接起来。

您可以使用该`strcat`函数，它将指向的字符串附加到指向的字符串`src`的末尾`dest`：

```
char *strcat(char *dest, const char *src); 
```

这是[来自 cplusplus.com 的示例](http://www.cplusplus.com/reference/clibrary/cstring/strcat.html)：

```
char str[80];
strcpy(str, "these ");
strcat(str, "strings ");
strcat(str, "are ");
strcat(str, "concatenated."); 
```

对于第一个参数，您需要提供目标缓冲区本身。目标缓冲区必须是 char 数组缓冲区。例如：`char buffer[1024];`

**确保**第一个参数有足够的空间来存储您要复制的内容。如果您可以使用，使用以下函数会更安全：`strcpy_s`并且`strcat_s`您必须明确指定目标缓冲区的大小。

*注意*：字符串文字不能用作缓冲区，因为它是一个常量。因此，您总是必须为缓冲区分配一个字符数组。

的返回值`strcat`可以简单地忽略，它只返回与作为第一个参数传入的指针相同的指针。它是为了方便起见，并允许您将调用链接到一行代码中：

```
strcat(strcat(str, foo), bar); 
```

所以你的问题可以解决如下：

```
char *foo = "foo";
char *bar = "bar";
char str[80];
strcpy(str, "TEXT ");
strcat(str, foo);
strcat(str, bar); 
```

* * *

## 回答 #2

> 赞同：271
> 
> 时间：2008-11-21T13:21:28.737

避免[`strcat`](http://en.cppreference.com/w/cpp/string/byte/strcat)在 C 代码中使用。最干净，最重要的是，最安全的方法是使用[`snprintf`](http://en.cppreference.com/w/cpp/io/c/snprintf)：

```
char buf[256];
snprintf(buf, sizeof(buf), "%s%s%s%s", str1, str2, str3, str4); 
```

一些评论者提出了一个问题，即参数的数量可能与格式字符串不匹配，代码仍然可以编译，但如果是这种情况，大多数编译器已经发出警告。

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2015-09-19T08:22:13.147

字符串也可以在编译时连接。

```
#define SCHEMA "test"
#define TABLE  "data"

const char *table = SCHEMA "." TABLE ; // note no + or . or anything
const char *qry =               // include comments in a string
    " SELECT * "                // get all fields
    " FROM " SCHEMA "." TABLE   /* the table */
    " WHERE x = 1 "             /* the filter */ 
                ; 
```

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2008-11-21T13:33:04.673

伙计们，使用 str **n** cpy()、str **n** cat() 或 s **n** printf()。
超出缓冲区空间将丢弃内存中的任何其他内容！
（请记住为结尾的 null '\0' 字符留出空间！）

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2008-11-21T15:29:06.450

如果您事先不知道要连接多少个字符串，那么 malloc 和 realloc 也很有用。

```
#include <stdio.h>
#include <string.h>

void example(const char *header, const char **words, size_t num_words)
{
    size_t message_len = strlen(header) + 1; /* + 1 for terminating NULL */
    char *message = (char*) malloc(message_len);
    strncat(message, header, message_len);

    for(int i = 0; i < num_words; ++i)
    {
       message_len += 1 + strlen(words[i]); /* 1 + for separator ';' */
       message = (char*) realloc(message, message_len);
       strncat(strncat(message, ";", message_len), words[i], message_len);
    }

    puts(message);

    free(message);
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-04-08T02:23:41.777

没有限制缓冲区大小的最佳方法是使用 asprintf()

```
char* concat(const char* str1, const char* str2)
{
    char* result;
    asprintf(&result, "%s%s", str1, str2);
    return result;
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-11-21T13:14:49.310

尝试修改字符串文字是未定义的行为，类似于：

```
strcat ("Hello, ", name); 
```

会尝试做。它将尝试将字符串附加到未明确定义`name`的字符串字面量的末尾。`"Hello, "`

试试这个。它实现了您似乎想要做的事情：

```
char message[1000];
strcpy (message, "TEXT ");
strcat (message, var); 
```

这将创建一个允许修改的缓冲区，然后将字符串文字和其他文本复制到*其中*。请注意缓冲区溢出。如果您控制输入数据（或事先检查），则可以像我一样使用固定长度的缓冲区。

否则，您应该使用缓解策略，例如从堆中分配足够的内存以确保您可以处理它。换句话说，类似：

```
const static char TEXT[] = "TEXT ";

// Make *sure* you have enough space.

char *message = malloc (sizeof(TEXT) + strlen(var) + 1);
if (message == NULL)
     handleOutOfMemoryIntelligently();
strcpy (message, TEXT);
strcat (message, var);

// Need to free message at some point after you're done with it. 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2008-11-21T13:31:50.197

如果您有 C 经验，您会注意到字符串只是最后一个字符为空字符的字符数组。

现在这很不方便，因为您必须找到最后一个字符才能附加一些东西。`strcat`会为你做的。

因此 strcat 在第一个参数中搜索空字符。然后它将用第二个参数的内容替换它（直到以 null 结尾）。

现在让我们来看看你的代码：

```
message = strcat("TEXT " + var); 
```

在这里，您正在向指向文本“TEXT”的指针添加一些内容（“TEXT”的类型是 const char*。一个指针。）。

这通常是行不通的。修改“TEXT”数组也不起作用，因为它通常放置在一个常量段中。

```
message2 = strcat(strcat("TEXT ", foo), strcat(" TEXT ", bar)); 
```

这可能会更好，除非您再次尝试修改静态文本。strcat 没有为结果分配新内存。

我建议改为这样做：

```
sprintf(message2, "TEXT %s TEXT %s", foo, bar); 
```

阅读文档`sprintf`以检查它的选项。

现在很重要的一点：

确保缓冲区有足够的空间来容纳文本和空字符。有几个函数可以帮助您，例如 strncat 和 printf 的特殊版本，它们为您分配缓冲区。不确保缓冲区大小将导致内存损坏和可远程利用的错误。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2008-11-21T13:41:10.537

不要忘记初始化输出缓冲区。strcat 的第一个参数必须是一个以空结尾的字符串，并为结果字符串分配足够的额外空间：

```
char out[1024] = ""; // must be initialized
strcat( out, null_terminated_string ); 
// null_terminated_string has less than 1023 chars 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2011-12-07T20:04:42.090

正如人们指出的那样，字符串处理得到了很大改善。因此，您可能想学习如何使用 C++ 字符串库而不是 C 样式的字符串。但是，这是纯 C 的解决方案

```
#include <string.h>
#include <stdio.h>
#include <stdlib.h>

void appendToHello(const char *s) {
    const char *const hello = "hello ";

    const size_t sLength     = strlen(s);
    const size_t helloLength = strlen(hello);
    const size_t totalLength = sLength + helloLength;

    char *const strBuf = malloc(totalLength + 1);
    if (strBuf == NULL) {
        fprintf(stderr, "malloc failed\n");
        exit(EXIT_FAILURE);
    }

    strcpy(strBuf, hello);
    strcpy(strBuf + helloLength, s);

    puts(strBuf);

    free(strBuf);

}

int main (void) {
    appendToHello("blah blah");
    return 0;
} 
```

我不确定它是否正确/安全，但现在我找不到在 ANSI C 中执行此操作的更好方法。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2008-11-21T13:14:58.080

strcat() 的第一个参数需要能够为连接的字符串保留足够的空间。所以分配一个有足够空间的缓冲区来接收结果。

```
char bigEnough[64] = "";

strcat(bigEnough, "TEXT");
strcat(bigEnough, foo);

/* and so on */ 
```

strcat() 会将第二个参数与第一个参数连接起来，并将结果存储在第一个参数中，返回的 char* 就是第一个参数，只是为了您的方便。

您没有得到连接第一个和第二个参数的新分配的字符串，我猜您根据您的代码预期。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2008-11-21T13:17:54.080

您正在尝试将字符串复制到静态分配的地址中。您需要 cat 进入缓冲区。

具体来说：

……剪……

目的地

```
Pointer to the destination array, which should contain a C string, and be large enough to contain the concatenated resulting string. 
```

……剪……

[http://www.cplusplus.com/reference/clibrary/cstring/strcat.html](http://www.cplusplus.com/reference/clibrary/cstring/strcat.html)

这里也有一个例子。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-07-29T12:39:36.287

您可以编写自己的函数来做同样的事情，`strcat()`但不会改变任何事情：

```
#define MAX_STRING_LENGTH 1000
char *strcat_const(const char *str1,const char *str2){
    static char buffer[MAX_STRING_LENGTH];
    strncpy(buffer,str1,MAX_STRING_LENGTH);
    if(strlen(str1) < MAX_STRING_LENGTH){
        strncat(buffer,str2,MAX_STRING_LENGTH - strlen(buffer));
    }
    buffer[MAX_STRING_LENGTH - 1] = '\0';
    return buffer;
}

int main(int argc,char *argv[]){
    printf("%s",strcat_const("Hello ","world"));    //Prints "Hello world"
    return 0;
} 
```

如果两个字符串加在一起的长度超过 1000 个字符，它将在 1000 个字符处剪切字符串。您可以更改 的值`MAX_STRING_LENGTH`以满足您的需要。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-04-10T12:41:55.440

尝试类似的事情：

```
#include <stdio.h>
#include <string.h>

int main(int argc, const char * argv[])
{
  // Insert code here...
  char firstname[100], secondname[100];
  printf("Enter First Name: ");
  fgets(firstname, 100, stdin);
  printf("Enter Second Name: ");
  fgets(secondname,100,stdin);
  firstname[strlen(firstname)-1]= '\0';
  printf("fullname is %s %s", firstname, secondname);

  return 0;
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-12-14T06:54:32.390

假设你有一个 char[fixed_size] 而不是一个 char*，你可以使用一个单一的、创造性的宏来一次完成所有的`<<cout<<like`排序（“而不是 %s 脱节的 %s\n”、“than”、“printf样式格式”）。如果您正在使用嵌入式系统，此方法还允许您省略 malloc 和大型`*printf`函数系列，例如`snprintf()`（这也使 Dietlibc 不会抱怨 *printf）

```
#include <unistd.h> //for the write example
//note: you should check if offset==sizeof(buf) after use
#define strcpyALL(buf, offset, ...) do{ \
    char *bp=(char*)(buf+offset); /*so we can add to the end of a string*/ \
    const char *s, \
    *a[] = { __VA_ARGS__,NULL}, \
    **ss=a; \
    while((s=*ss++)) \
         while((*s)&&(++offset<(int)sizeof(buf))) \
            *bp++=*s++; \
    if (offset!=sizeof(buf))*bp=0; \
}while(0)

char buf[256];
int len=0;

strcpyALL(buf,len,
    "The config file is in:\n\t",getenv("HOME"),"/.config/",argv[0],"/config.rc\n"
);
if (len<sizeof(buf))
    write(1,buf,len); //outputs our message to stdout
else
    write(2,"error\n",6);

//but we can keep adding on because we kept track of the length
//this allows printf-like buffering to minimize number of syscalls to write
//set len back to 0 if you don't want this behavior
strcpyALL(buf,len,"Thanks for using ",argv[0],"!\n");
if (len<sizeof(buf))
    write(1,buf,len); //outputs both messages
else
    write(2,"error\n",6); 
```

*   注意 1，您通常不会像这样使用 argv[0] - 只是一个示例
*   注意 2，您可以使用任何输出 char* 的函数，包括用于将整数转换为字符串类型的非标准函数，如 itoa()。
*   注意 3，如果您已经在程序中的任何地方使用了 printf，则没有理由不使用 snprintf()，因为编译后的代码会更大（但内联且速度明显更快）

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-11-04T21:10:35.723

```
int main()
{
    char input[100];
    gets(input);

    char str[101];
    strcpy(str, " ");
    strcat(str, input);

    char *p = str;

    while(*p) {
       if(*p == ' ' && isalpha(*(p+1)) != 0)
           printf("%c",*(p+1));
       p++;
    }

    return 0;
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-12-31T16:41:21.173

这是我的解决方案

```
#include <stdlib.h>
#include <stdarg.h>

char *strconcat(int num_args, ...) {
    int strsize = 0;
    va_list ap;
    va_start(ap, num_args);
    for (int i = 0; i < num_args; i++) 
        strsize += strlen(va_arg(ap, char*));

    char *res = malloc(strsize+1);
    strsize = 0;
    va_start(ap, num_args);
    for (int i = 0; i < num_args; i++) {
        char *s = va_arg(ap, char*);
        strcpy(res+strsize, s);
        strsize += strlen(s);
    }
    va_end(ap);
    res[strsize] = '\0';

    return res;
} 
```

但是您需要指定要连接多少个字符串

```
char *str = strconcat(3, "testing ", "this ", "thing"); 
```

# php - PHP更改数组键

> ID：308703
> 
> 赞同：45
> 
> 时间：2008-11-21T13:09:53.907
> 
> 标签：php

有没有办法在不循环数组的情况下将所有数字键更改为“名称”（所以是一个 php 函数）？

```
[
    0 => 'blabla',
    1 => 'blabla',
    2 => 'blblll',
    // etc ...
] 
```

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2008-11-21T13:41:18.010

如果您有要使用的键数组，请使用[`array_combine`](http://ca3.php.net/manual/en/function.array-combine.php)

给定 $keys = array('a', 'b', 'c', ...) 和您的数组 $list，然后执行以下操作：

```
$list = array_combine($keys, array_values($list)); 
```

列表现在将是 array('a' => 'blabla 1', ...) 等。

您必须使用[`array_values`](http://ca3.php.net/manual/en/function.array-values.php)仅从数组中提取值，而不是旧的数字键。

这看起来既漂亮又简单，但 array_values 制作了数组的整个副本，因此您可能会遇到空间问题。我们在这里所做的只是让 php 为我们执行循环，而不是消除循环。我很想做更多类似的事情：

```
foreach ($list as $k => $v) {
   unset ($list[$k]);

   $new_key =  *some logic here*

   $list[$new_key] = $v;
} 
```

我不认为它比第一个代码更有效率，但它提供了更多的控制并且不会有数组长度的问题。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2008-11-21T13:21:12.777

不，没有，对于初学者来说，不可能有一个元素共享相同键的数组

```
$x =array(); 
$x['foo'] = 'bar' ; 
$x['foo'] = 'baz' ; #replaces 'bar' 
```

其次，如果您只想为数字加上前缀，以便

```
$x[0] --> $x['foo_0'] 
```

如果没有循环，这在计算上是不可信的。目前没有用于“键前缀”任务的 php 函数，最接近的是[“提取”](http://php.net/manual/en/function.extract.php) ，它将在使数字键成为变量之前为数字键添加前缀。

最简单的方法是这样的：

```
function rekey( $input , $prefix ) { 
    $out = array(); 
    foreach( $input as $i => $v ) { 
        if ( is_numeric( $i ) ) { 
            $out[$prefix . $i] = $v; 
            continue; 
        }
        $out[$i] = $v;
    }
    return $out;
} 
```

此外，在阅读 XMLWriter 用法后，我相信您会以一种糟糕的方式编写 XML。

```
<section> 
    <foo_0></foo_0>
   <foo_1></foo_1>
   <bar></bar>
   <foo_2></foo_2>
</section> 
```

不是好的XML。

```
<section> 
   <foo></foo>
   <foo></foo>
   <bar></bar>
   <foo></foo>
</section> 
```

是更好的 XML，因为在解释时，重复的名称无关紧要，因为它们在数字上都像这样偏移：

```
section => { 
    0 => [ foo , {} ]
    1 => [ foo , {} ]
    2 => [ bar , {} ]
    3 => [ foo , {} ] 
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-12-31T11:00:04.030

这是一个为所有键添加下划线前缀的示例。

我们使用`array_combine`将数组键与数组值组合在一起，但我们首先`array_map`在数组键上运行一个函数，该函数采用一个添加前缀的简单函数。

```
$prefix = '_';
$arr = array_combine(
    array_map(function($v) use ($prefix){
       return $prefix.$v;
    }, array_keys($arr)),
    array_values($arr)
); 
```

在此处查看实时示例[https://3v4l.org/HABl7](https://3v4l.org/HABl7)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-06-22T22:17:43.407

我添加了这个来回答另一个问题，并且看起来很相关。希望可以帮助需要更改数组中键值的人。使用 php 的内置函数。

```
$inputArray = array('app_test' => 'test', 'app_two' => 'two');

/**
 * Used to remap keys of an array by removing the prefix passed in
 * 
 * Example:
 * $inputArray = array('app_test' => 'test', 'app_two' => 'two');
 * $keys = array_keys($inputArray);
 * array_walk($keys, 'removePrefix', 'app_');
 * $remappedArray = array_combine($keys, $inputArray);
 *
 * @param $value - key value to replace, should be from array_keys
 * @param $omit - unused, needed for prefix call
 * @param $prefix - prefix to string replace in keys
 */
function removePrefix(&$value, $omit, $prefix) {
    $value = str_replace($prefix, '', $value);
}

// first get all the keys to remap
$keys = array_keys($inputArray);

// perform internal iteration with prefix passed into walk function for dynamic replace of key
array_walk($keys, 'removePrefix', 'app_');

// combine the rewritten keys and overwrite the originals
$remappedArray = array_combine($keys, $inputArray);

// see full output of comparison
var_dump($inputArray);
var_dump($remappedArray); 
```

输出：

```
array(2) {
  'attr_test' =>
  string(4) "test"
  'attr_two' =>
  string(3) "two"
}
array(2) {
  'test' =>
  string(4) "test"
  'two' =>
  string(3) "two"
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-03-31T00:47:30.367

我认为他想要：

```
$a = array(1=>'first_name', 2=>'last_name');
$a = array_flip($a);

$a['first_name'] = 3;
$a = array_flip($a);

print_r($a); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-09T03:00:25.620

将数组键名“group”更改为“children”。

```
<?php
echo json_encode($data);

function array_change_key_name( $orig, $new, &$array ) {
    foreach ( $array as $k => $v ) {
        $res[ $k === $orig ? $new : $k ] = ( (is_array($v)||is_object($v)) ? array_change_key_name( $orig, $new, $v ) : $v );
    }
    return $res;
}

echo '<br>=====change "group" to "children"=====<br>';
$new = array_change_key_name("group" ,"children" , $data);
echo json_encode($new);
?> 
```

结果：

```
{"benchmark":[{"idText":"USGCB-Windows-7","title":"USGCB: Guidance for Securing Microsoft Windows 7 Systems for IT Professional","profile":[{"idText":"united_states_government_configuration_baseline_version_1.2.0.0","title":"United States Government Configuration Baseline 1.2.0.0","group":[{"idText":"security_components_overview","title":"Windows 7 Security Components Overview","group":[{"idText":"new_features","title":"New Features in Windows 7"}]},{"idText":"usgcb_security_settings","title":"USGCB Security Settings","group":[{"idText":"account_policies_group","title":"Account Policies group"}]}]}]}]}

=====change "group" to "children"=====

{"benchmark":[{"idText":"USGCB-Windows-7","title":"USGCB: Guidance for Securing Microsoft Windows 7 Systems for IT Professional","profile":[{"idText":"united_states_government_configuration_baseline_version_1.2.0.0","title":"United States Government Configuration Baseline 1.2.0.0","children":[{"idText":"security_components_overview","title":"Windows 7 Security Components Overview","children":[{"idText":"new_features","title":"New Features in Windows 7"}]},{"idText":"usgcb_security_settings","title":"USGCB Security Settings","children":[{"idText":"account_policies_group","title":"Account Policies group"}]}]}]}]} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-11-21T13:30:25.833

当您使用`XMLWriter`(native to `PHP 5.2.x`<) 时的解决方案是使用`$xml->startElement('itemName');`它将替换数组键。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-10-29T09:29:32.843

`array_flip`在php中使用数组

```
$array = array ( [1] => Sell [2] => Buy [3] => Rent [4] => Jobs )
print_r(array_flip($array));
Array ( [Sell] => 1 [Buy] => 2 [Rent] => 3 [Jobs] => 4 ) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-05-03T22:28:15.597

我为一组对象做了这个。它基本上是在同一个数组中创建新键并取消设置旧键。

```
public function transform($key, $results)
{
    foreach($results as $k=>$result)
    {
        if( property_exists($result, $key) )
        { 
            $results[$result->$key] = $result;
            unset($results[$k]);
        }
    }

    return $results;
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-06-12T14:20:35.197

```
<?php
    $array[$new_key] = $array[$old_key];
    unset($array[$old_key]);
?> 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-06-06T03:53:48.957

要拥有相同的密钥，我认为它们必须位于单独的嵌套数组中。

```
for ($i = 0; $i < count($array); $i++) {
    $newArray[] = ['name' => $array[$i]];
}; 
```

输出：

```
0 => array:1 ["name" => "blabla"]
1 => array:1 ["name" => "blabla"]
2 => array:1 ["name" => "blblll"] 
```

* * *

## 回答 #12

> 赞同：-4
> 
> 时间：2008-11-21T13:33:05.220

您可以创建一个包含该数组的新数组，因此：

```
<?php
$array = array();
$array['name'] = $oldArray;
?> 
```

# asp.net - 为什么 asp.net 跟踪只能时不时工作？

> ID：308713
> 
> 赞同：3
> 
> 时间：2008-11-21T13:13:44.463
> 
> 标签：asp.net, sharepoint, trace

ASP.NET 跟踪似乎非常不稳定。有时它会追踪，有时则不会。

我使用...从我的 ASCX 跟踪

Trace.Write("等等等等");

我的 web.config 如下所示...（在 WSS3 中）我首先确保 SharePoint 允许页面级别跟踪...

```
<SafeMode MaxControls="200" CallStack="true" DirectFileDependencies="10" TotalFileDependencies="50" AllowPageLevelTrace="true"> 
```

这是我的 ASP.NET 跟踪元素...

```
<trace enabled="true" localOnly="false" pageOutput="true" writeToDiagnosticsTrace="true" /> 
```

我的 System.Diagnostics 跟踪...

```
<system.diagnostics>
<trace autoflush="true" indentsize="4" >
    <listeners>
        <add name="listen" type="System.Diagnostics.TextWriterTraceListener" initializeData="c:\asptrace\log.txt" />
        <add name="listen2" type="System.Web.WebPageTraceListener, System.Web, Version=2.0.3600.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"  />
    </listeners>
</trace> 
```

有什么明显的我失踪了吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-11-21T13:23:47.687

您是否检查了web.config 中的[请求限制？](http://msdn.microsoft.com/en-us/library/6915t83k.aspx)它默认设置为 10，这意味着您只会在应用程序启动后获得前 10 个请求的跟踪输出。

```
<trace enabled="false" requestLimit="10" /> 
```

# xml - 如何使用 Delphi 2009 安装 nativeXML？

> ID：308714
> 
> 赞同：7
> 
> 时间：2008-11-21T13:13:54.227
> 
> 标签：xml, delphi, delphi-2009, nativexml

我用的是Delphi 2009，想操作一些XML数据。我听说 nativeXML 是最方便的方法之一。那么我该如何安装这个库呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-21T13:23:26.407

NativeXML 尚未声称支持 Delphi 2009。[编辑：显然有一个 2009 测试版可供付费客户使用。] 试用版没有，所以它不能与 Delphi 2009 一起使用，直到该版本的 Delphi 得到正式支持。

也就是说，在 Delphi 中为大多数目的使用 XML 不需要第三方组件。你有几个选择，这取决于你在做什么。

1.  最直接的方法是使用 TXMLDocument。这使您可以打开 XML 文件或流，并使用 DOM 访问节点。

2.  使用 Delphi 的企业版，您可以获得 XML 数据绑定向导。这会为某个 XML 模式生成强类型映射类。当您确切知道要解析的 XML 文档的结构时，这将非常方便。

3.  第三个选项是 XML 映射器，它允许您从 TClientDataset 读取 XML 数据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-21T13:18:10.617

根据他们的[网站](http://www.simdesign.nl/xml.html)，听起来您只需下载 .dcu 文件，将其放在方便的目录中，然后将该目录添加到您的类型库路径（工具->选项->库路径）。

之后，只需将单位添加到您的使用条款中，您就可以开始使用了。

# c++ - C++ 库与 iPhone 应用程序的集成

> ID：308729
> 
> 赞同：1
> 
> 时间：2008-11-21T13:20:32.763
> 
> 标签：c++, iphone, integration

感谢您的支持，但它（现有 C++ 库与 iPhone 应用程序的集成）会影响我在提交到 Apple Store 时的应用程序吗？Apple Store 申请是否有被拒的可能性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-21T13:33:14.377

只要您的库是静态链接的，您的审批流程就不会有任何问题。

# soap - webservice SOAP 消息 监视器或日志记录

> ID：308739
> 
> 赞同：1
> 
> 时间：2008-11-21T13:24:03.350
> 
> 标签：soap

有人能告诉我如何捕获客户端和服务器 Web 服务应用程序之间传递的 SOAP 消息吗？

我尝试使用这两种工具。口袋肥皂 [http://www.pocketsoap.com/pocketsoap/](http://www.pocketsoap.com/pocketsoap/)

提琴手 [http://www.fiddlertool.com/fiddler/](http://www.fiddlertool.com/fiddler/)

我可能会错过一些设置，它对我不起作用。

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-21T15:28:19.573

试试[tcpmon](https://tcpmon.dev.java.net/)。

[soapUI](http://www.soapui.org/)与 tcpmon 集成，可能会为您提供更好的界面。

[另见](https://stackoverflow.com/questions/306214/http-request-monitoring-tool#306258)；您也可以尝试使用 MS Visual Roundtrip Analyzer 分析器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T08:54:13.637

如果您有兴趣，您可以用 Java 编写一个扩展 GenericSOAPHandler 类的处理程序，并将输出打印到您喜欢的任何地方。在这种（简单）情况下，服务器日志：

```
@SuppressWarnings("rawtypes")
public class MyHandler extends GenericSOAPHandler {

    private void print(InputStream input, OutputStream out) throws Exception {
        try {
            DocumentBuilder parser;
            DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
            factory.setNamespaceAware(true);
            parser = factory.newDocumentBuilder();
            Document document = parser.parse(input);
            Transformer serializer = TransformerFactory.newInstance().newTransformer();
            serializer.setOutputProperty(OutputKeys.INDENT, "yes");
            serializer.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "2");
            serializer.transform(new DOMSource(document), new StreamResult(out));
        } catch (TransformerException e) {
            // A fatal error occurred
            throw new Exception(e);
        }
    }

    @Override
    protected boolean handleInbound(MessageContext msgContext) {
        SOAPMessageContext soapMessageCtx = (SOAPMessageContext) msgContext;
        SOAPMessage soapMessage = soapMessageCtx.getMessage();
        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
        try {
            soapMessage.writeTo(outputStream);
            byte[] array = outputStream.toByteArray();
            ByteArrayInputStream inputStream = new ByteArrayInputStream(array);
            System.out.println("SOAP request message:\n");
            print(inputStream, System.out);
        } catch (SOAPException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        }
        return true;
    }

    @Override
    protected boolean handleOutbound(MessageContext msgContext) {
        SOAPMessageContext soapMessageCtx = (SOAPMessageContext) msgContext;
        SOAPMessage soapMessage = soapMessageCtx.getMessage();
        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
        try {
            soapMessage.writeTo(outputStream);
            byte[] array = outputStream.toByteArray();
            ByteArrayInputStream inputStream = new ByteArrayInputStream(array);
            System.out.println("SOAP response message:\n");
            print(inputStream, System.out);
        } catch (SOAPException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        }
        return true;
    }

} 
```

您还需要确保您的处理程序包含在服务器实现的 jaxws-handlers-server.xml 中：

```
<handler-chains xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee javaee_web_services_1_2.xsd">
   <handler-chain>
      <protocol-bindings>##SOAP11_HTTP</protocol-bindings>
      <handler>
         <handler-name>DebugHandler</handler-name>
         <handler-class>handlers.MyHandler</handler-class>
      </handler>
   </handler-chain>
</handler-chains> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T20:23:14.353

这是我在 C++ 中的代码，用于在发送之前使用 Soap Toolkit 3.0 检索 xml 消息。

```
.
.
.
   Serializer->EndEnvelope();
/* ___________________ */

    char * bufferxml = NULL;

   _variant_t punt = _variant_t((IUnknown*)Serializer);
   punt.lVal += 48;
   _variant_t punt1 = *punt.ppunkVal;
   punt1.lVal += 32;
   _variant_t punt2 = *punt1.ppunkVal;
   punt2.lVal += 4;
   memcpy(&bufferxml, (char *) *punt2.ppunkVal, sizeof(char *));

   punt2.lVal += 4;
   int lengxml = *(punt2.pintVal);
   bufferxml[lengxml] = '\0';
/* ___________________ */

  // Send the message to the web service
    Connector->EndMessage();      
.
.
.
   punt.Detach();
   punt1.Detach();
   punt2.Detach();
   punt.Clear();
   punt1.Clear();
   punt2.Clear();

   Serializer.Release();
.
.
. 
```

我希望真的能帮到你，这是我的设计，它对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-29T10:34:21.470

还有一个 TCP/IP Monitor，它与 Eclipse 的 WTP 插件捆绑在一起，它允许您在端口上设置一个监视器以查看 SOAP 请求。

# googlebot - PageRank 有什么意义吗？

> ID：308740
> 
> 赞同：1
> 
> 时间：2008-11-21T13:24:30.133
> 
> 标签：googlebot, pagerank

它是对开发人员甚至经理可以查看并从中获得意义的任何事物的衡量标准吗？我知道有一次，这都是关于 7、8、9 和 10 PageRank 的。但它仍然是衡量任何事物的有效方法吗？如果是这样，您可以从 PageRank 中学到什么？

请注意，我假设您有其他可以分析的测量值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-21T13:57:16.730

PageRank 是特定于**Google**的，是一种已注册商标的专有算法。

Google 使用的公式中有很多变量，但 PageRank 主要受指向页面的链接数、站点内指向该页面的内部链接数和站点内的页面数的影响。

您必须考虑的是它特定于**网页，而不是网站**。所以你需要优化每一页。

Google 发送其索引机器人**Googlebot**来抓取您的网站，并指示该机器人不要将您的网站抓取得太深，除非它具有合理数量的 PR（PageRank）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-21T13:27:31.110

至于我所经历的，pagerank 是最近链接到您网站的网站数量的指标。但它不一定与你在谷歌上的位置有关。

有时我们增加了我们的营销和其他链接到我们的网站，并且页面排名上升了一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-21T13:50:07.400

我认为导致任何 SERP 位置的因素变化太大，无法将你所有的信念集中在一起。Pagerank 非常重要，在某种程度上仍然是重要的，但有多少是我无法回答的问题。

您在页面上发送的每个链接都会将页面的某些页面排名传递到链接指向的位置。链接越多，传递给每个链接的页面排名就越少。在链接中使用 rel="nofollow" 以更可控的方式关注 pagerank 流。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-03T05:50:52.230

页面排名算法是用于表示一个人随机点击链接将到达任何特定页面的可能性的概率分布。它是网页重要性的相对较好的近似值。

# asp.net - 如何监控 ASP 错误

> ID：308743
> 
> 赞同：1
> 
> 时间：2008-11-21T13:26:00.537
> 
> 标签：asp.net

我主要来自 PHP 背景，并通过使用命令行充分利用了 Apache 错误日志。我最近收到了一个需要更改的大型 ASP/ASP.NET 项目，我在哪里可以找到 Windows IIS 设置的错误日志，以便解决一些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-21T13:45:23.430

您还没有说您使用的是哪个版本的 IIS。在 IIS 6 中，HTTP 错误日志位于 systemroot\System32\LogFiles\HTTPERR。

ASP.net 本身不会产生任何错误日志，除非它被配置为这样做。有很多方法可以做到这一点，例如使用 Log4net、企业库日志记录应用程序块、跟踪诊断或滚动您自己的方法。

查看 web.config 文件并查看是否/如何为应用程序配置日志记录。

# c - TCP通信中的分段错误

> ID：308746
> 
> 赞同：3
> 
> 时间：2008-11-21T13:26:43.530
> 
> 标签：c, segmentation-fault

我在以下 C 代码中遇到分段错误：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>
#include <string.h>
#include <netdb.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>

#define PORT  6667
#define MAXDATASIZE 1024

int bot_connect(char *hostname);

int bot_connect(char *hostname) {

  int sockfd, numbytes, s;
  char buf[MAXDATASIZE];
  struct addrinfo hints, *servinfo, *p;
  int rv;
  char m[1024];
  char *message;
  char *nick = "Goo";
  char *ident = "Goo";
  char *realname = "Goo";

  memset(&hints,0,sizeof hints);
  hints.ai_family = AF_UNSPEC;
  hints.ai_socktype = SOCK_STREAM;

  rv = getaddrinfo(hostname, PORT, &hints, &servinfo);

  if (rv != 0) {
    fprintf(stderr, "getaddrinfo: %s\n", gai_strerror(rv));
    return 1;
  }

  for (p = servinfo; p != NULL; p = p->ai_next) {
    sockfd = socket(p->ai_family, p->ai_socktype, p->ai_protocol);
    if (sockfd == -1) {
      perror("Client: socket");
      continue;
    }

    if (connect(sockfd, p->ai_addr, p->ai_addrlen) == -1) {
      close(sockfd);
      perror("Client: connect");
      continue;
    }

    break;
  }

  if (p == NULL) {
    fprintf(stderr, "Client: failed to connect \n");
    return 2;
  }

  freeaddrinfo(servinfo);

  strcat(m, "NICK ");
  strcat(m, nick);
  message = m;
  s = send(sockfd, message, strlen(message), 0);

  strcat(m, "USER ");
  strcat(m, ident);
  strcat(m, " * * :");
  strcat(m, realname);
  message = m;
  s = send(sockfd, message, strlen(message), 0);

  message = "JOIN #C&T";
  s = send(sockfd, message, strlen(message), 0);

  close(sockfd);
} 
```

我知道你会因为试图用内存做一些你不允许做的事情而遇到分段错误，比如改变只读内存，但据我所知，这个程序不会那样做。有没有人知道分段错误来自哪里？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-11-21T13:32:01.930

`strcat( m, "NICK" );`您在初始化 m 之前正在调用。在 strcat 之前，尝试`m[0] = '\0';`or `memset( m, 0, sizeof( m ) );`，或将第一个更改`strcat`为`strcpy`

此外，在套接字上发送 NICK 线后，`strcat`再次调用，这会将 USER 线附加到 NICK 线。同样，您可能应该将第一个更改`strcat`为`strcpy`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-21T13:44:53.510

[Graeme 的 "what" 是正确的](https://stackoverflow.com/questions/308746/segmentation-fault-in-tcp-communication/308763#308763)，所以这里是 "why"，以防你不熟悉。在 C 中，字符串被定义为以空字符 '\0' 结尾的一系列字符。字符串具有终止字符的原因是代码可以确定字符串的逻辑结束位置。即使您声明这样的字符串：

```
 char m[1024]; 
```

在 C 语言中，给定 m 的代码无法确定它分配了 1024 个字节，更不用说确定这些字节中有多少是有意义的，而没有一个空字符来划分有意义的字节的结尾。

strcat 是一个适用于两个 C 字符串的函数，因此它希望它的两个参数都符合规范，即有一个空字节标记有意义的输入的结束。如果 m 未初始化，它的内容是随机的，所以空字节可以在任何地方，或者根本没有空字节。为了连接，strcat 将查看第一个参数的字符，试图找到标记字符串结尾的空字节。如果偶然地，未初始化的数组中不存在空字节，它将愉快地继续查找*字符串*的末尾，进入可能对应于其他变量或内部堆栈信息等的任意内存位置。

当 strcat 最终找到一个空字节时，它会愉快地从该位置开始写入第二个参数的内容，如果该位置超过 m 的末尾，它将覆盖一些其他变量或其他信息。如果它是分配给其他变量的内存地址，则问题可能是无声的并且很难找到。幸运的是，在您的情况下，它是一个不应写入的位置，因此您的程序因明显错误而崩溃。

这也引起了注意，您确实应该使用 strncat 而不是 strcat。strncat 允许您指定要创建的字符串的最大长度。我之前注意到 strcat 无法确定 m 有 1024 个字节分配给它，所以如果你尝试将 m 与使 m 长于 1023 个字符的东西连接起来，你最终会遇到相同的内存覆盖问题。strncat 采用第三个参数，该参数指定结果字符串的最大长度，并具有一个返回码，该码将指示连接是否由于达到此长度而被截断。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-11-21T14:09:27.830

这里已经是为什么和什么的正确答案。要回答您的“分段错误在哪里......”，我推荐使用调试器。用调试信息编译你的程序，你会看到它发生在哪里（让它运行并在它崩溃时查看堆栈跟踪）。答案很可能还会回答为什么和什么（在这种情况下已经回答了）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-21T13:44:44.587

调高编译器的警告级别：

```
rv = getaddrinfo(hostname, PORT, &hints, &servinfo); 
```

getaddrinfo 的第二个参数是 a `const char *`，而不是 int。将 PORT 更改为 NULL 并修改 addrinfo 结构中的端口号`connect`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-21T13:39:43.753

使用[valgrind](http://valgrind.org/)。Valgrind 非常擅长发现代码中的资源泄漏和其他常见的人为错误类型的不当行为。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T21:37:09.600

该`m`数组在使用前包含垃圾。以下将起作用：

```
strcpy(m, "NICK ");
strcat(m, nick);
message = m;
s = send(sockfd, message, strlen(message), 0);

strcpy(m, "USER ");
strcat(m, ident);
strcat(m, " * * :");
strcat(m, realname);
message = m;
s = send(sockfd, message, strlen(message), 0); 
```

以下也将起作用：

```
sprintf(m, "NICK %s", nick);
message = m;
s = send(sockfd, message, strlen(message), 0);

sprintf(m, "USER %s * * :%s", ident, realname);
s = send(sockfd, message, strlen(message), 0); 
```

# mfc - CListCtrl::GetItemNext 返回起始项

> ID：308748
> 
> 赞同：2
> 
> 时间：2008-11-21T13:27:49.440
> 
> 标签：mfc, windows-mobile, clistctrl

我在适用于 Windows Mobile 6 的 C++ MFC 应用程序中有一个 CListCtrl 对象。因此，当我调用 listctrl.GetNextItem(0, LVNI_ABOVE) 时，我应该返回 -1（第一项之上没有项目），但如果（且仅当）列表只有一项，调用返回 0，即使 MSDN 说“指定的项目本身被排除在搜索之外”。这是一个已知的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-25T19:30:49.037

您可以在此处搜索错误： [https ://connect.microsoft.com/VisualStudio/Feedback](https://connect.microsoft.com/VisualStudio/Feedback)

# ruby - Ruby 中 chr() 的反义词是什么？

> ID：308749
> 
> 赞同：102
> 
> 时间：2008-11-21T13:27:53.823
> 
> 标签：ruby, ascii

在许多语言中，有一对函数`chr()`和`ord()`，它们在数字和字符值之间进行转换。在某些语言中，`ord()`称为`asc()`.

Ruby 有`Integer#chr`，效果很好：

```
>> 65.chr
A 
```

很公平。但是你怎么走另一条路？

```
"A".each_byte do |byte|
   puts byte
end 
```

印刷：

```
65 
```

这与我想要的非常接近。但我真的宁愿避免循环——我正在寻找足够短的东西，以便在声明`const`.

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-12-10T17:50:39.023

如果 String#ord 在 1.9 中不存在，它在 2.0 中存在：

```
"A".ord #=> 65 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2008-11-21T14:19:09.260

在 Ruby 直到 1.8 系列（包括 1.8 系列）中，以下都将产生 65（对于 ASCII）：

```
puts ?A
'A'[0] 
```

Ruby 1.9 中的行为发生了变化，以上两者都将产生“A”。在 Ruby 1.9 中执行此操作的正确方法是：

```
'A'[0].ord 
```

不幸的是，`ord`Ruby 1.8 中不存在该方法。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2008-11-21T13:44:17.957

尝试：

```
'A'.unpack('c') 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2011-05-27T01:34:37.927

我想 +1 dylanfm 和 AShelly 的评论，但添加 [0]：

`'A'.unpack('C')[0]`

unpack 调用返回一个包含单个整数的数组，在需要整数的地方并不总是接受它：

```
$ ruby​​ -e 'printf("0x%02X\n", "A".unpack("C"))'
-e:1:in `printf': 无法将 Array 转换为 Integer (TypeError)
    从 -e:1
$ ruby​​ -e 'printf("0x%02X\n", "A".unpack("C")[0])'
0x41
$

```

我正在尝试编写适用于 Ruby 1.8.1、1.8.7 和 1.9.2 的代码。

编辑通过 C 以大写形式解包，因为 unpack("c") 给我 -1 其中 ord() 给我 255（尽管在 C 的 char 签名的平台上运行）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-04-05T05:51:49.883

刚刚通过 RFC 组合纯 Ruby 版本的 Stringprep 时遇到了这个问题。

请注意，`chr`在 [0,255] 之外失败，请改用 1.9.x - 2.1.x 便携式替代品：

```
[22] pry(main)> "\u0221".ord.chr
RangeError: 545 out of char range
from (pry):2:in 'chr'
[23] pry(main)> x = "\u0221".unpack('U')[0]
=> 545
[24] pry(main)> [x].pack('U')
=> "ȡ"
[25] pry(main)> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-11-21T13:45:16.910

此外，如果您在字符串中有 char 并且您想在没有循环的情况下对其进行解码：

```
puts 'Az'[0]
=> 65
puts 'Az'[1]
=> 122 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-11-21T13:32:08.030

怎么样

> 放?A

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-03-10T19:38:07.103

你可以拥有这些：

```
65.chr.ord
'a'.ord.chr 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-05-24T21:51:55.353

如果您不介意将值从数组中提取出来，您可以使用`"A".bytes`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-04-13T15:11:48.177

我正在为 1.8.6 和 1.9.3 编写代码，但我无法让这些解决方案中的任何一个在这两种环境中工作:(

但是，我遇到了另一个解决方案： [http ://smajnr.net/2009/12/ruby-1-8-nomethoderror-undefined-method-ord-for-string.html](http://smajnr.net/2009/12/ruby-1-8-nomethoderror-undefined-method-ord-for-string.html)

这对我也不起作用，但我对其进行了调整以供我使用：

```
unless "".respond_to?(:ord)
  class Fixnum
    def ord
      return self
    end
  end
end
```

完成此操作后，以下内容将在两种环境中均有效

```
'A'[0].ord
```

# asp.net - .net webservice发布流程问题

> ID：308750
> 
> 赞同：0
> 
> 时间：2008-11-21T13:27:53.823
> 
> 标签：asp.net, web-services, publish

我有一个存在于 asp.net 网站中的网络服务。当我将站点发布到测试服务器时，我必须进入 bin 文件夹并进入服务的 .svc 文件并手动更改 URL 以正确反映测试服务器 URL。有没有更好的方法来处理这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-21T21:36:08.410

您始终可以运行构建工具来自动为您执行此操作。

# c# - C# 注释教程

> ID：308752
> 
> 赞同：8
> 
> 时间：2008-11-21T13:28:40.000
> 
> 标签：c#, comments

我想知道哪一个是我可以分发给我的学生的关于“ *C# 注释*”的最佳材料。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-11-21T14:28:18.290

我不久前读过的东西（并且已经忘记了在哪里）是：

*   初学者不评论
*   学徒评论显而易见
*   熟练工评论这样做的原因
*   大师们评论不这样做的原因

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-11-21T13:35:01.173

Jeff Atwood 在他的博客[Coding Horror上](http://www.codinghorror.com)[发表的这篇](http://www.codinghorror.com/blog/archives/000749.html)文章总体上是为了评论的目的。您可能认为“duh”的东西实际上并非如此——尤其是在“现实世界”中，当您看到如下评论时：

```
//Connect to the Database
Db.Connect(); 
```

当然，还有那篇文章的推论：[没有评论的编码](http://www.codinghorror.com/blog/archives/001150.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-21T13:32:01.460

## 内部VS

评论比较简单。

您可以用于**单行**：

```
//This is a single line comment 
```

您可以用于**多行**：

```
/*
Multiple lines
*/ 
```

对于**方法**，您可以使用：

```
 /// <summary>
    /// This is a description
    /// </summary>
    /// <param name="sender">Description of variable SENDER</param>
    /// <param name="e">Description of variable E</param> 
```

## 外VS

当您进入**项目属性**时，您可以将所有注释输出到 XML 中并进行操作。

## 好习惯

注释不应该用来描述代码做什么，但如果不清楚，为什么或如何。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-21T14:02:22.273

这与 xml 注释有关： http: [//thoughtpad.net/alan-dean/cs-xml-documentation.html](http://thoughtpad.net/alan-dean/cs-xml-documentation.html)

这些也被[沙堡](http://blogs.msdn.com/sandcastle/)阅读......：o）

# c# - 检查程序集的强名称

> ID：308756
> 
> 赞同：18
> 
> 时间：2008-11-21T13:30:07.860
> 
> 标签：c#, security, strongname

是否可以检查动态加载的程序集是否已使用特定的强名称进行签名？

**比较从AssemblyName.GetPublicKey()**方法返回的值是否足够/安全？

```
Assembly loaded = Assembly.LoadFile(path);

byte[] evidenceKey = loaded.GetName().GetPublicKey();

if (evidenceKey != null)
{
    byte[] internalKey = Assembly.GetExecutingAssembly().GetName().GetPublicKey();

    if (evidenceKey.SequenceEqual(internalKey))
    {
        return extension;
    }
} 
```

这不能骗人吗？我不确定 SetPublicKey() 方法是否对构建的程序集有任何影响，但即使是 MSDN 文档也显示了如何在动态生成的程序集（反射发射）上使用它，这意味着您可以从托管应用程序并将其注入您自己的程序集中并运行恶意代码，如果上述是安全措施，或者我错过了什么？

有没有更正确和安全的方法？我知道相反的情况是否是这种情况，也就是说，我想保护程序集不被签名主机调用，然后我可以用 StrongNameIdentityPermission 属性标记程序集。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-11-21T13:59:46.927

在程序集加载后测试强名称没有什么意义。攻击者可以简单地在程序集中注入模块构造函数并执行所需的任何代码。框架的 .NET 3.5 SP1 版本紧随其后，不再验证从受信任位置加载的程序集的强名称。启动时间提高了约 40%。

关键点是：一旦攻击者将机器破坏到能够在应用程序的探测路径中注入程序集的程度，他就不会费心去做。他只是替换你的EXE文件。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2008-11-21T16:49:01.173

没有可管理的方法来检查程序集的签名，并且检查公钥会使您容易受到欺骗。您必须使用[P/Invoke](http://en.wikipedia.org/wiki/Platform_Invocation_Services)并调用**StrongNameSignatureVerificationEx**函数来检查签名

```
[DllImport("mscoree.dll", CharSet=CharSet.Unicode)]
static extern bool StrongNameSignatureVerificationEx(string wszFilePath, bool fForceVerification, ref bool  pfWasVerified); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-12-17T14:05:21.480

根据[http://msdn.microsoft.com/pl-pl/library/ms232579.aspx](http://msdn.microsoft.com/pl-pl/library/ms232579.aspx) ，在 .NET 4 下不推荐使用来自 mscoree.dll 的 StrongNameSignatureVerificationEx 检查强名称。

.NET 4 的做法是：

```
var clrStrongName = (IClrStrongName)RuntimeEnvironment.GetRuntimeInterfaceAsObject(new Guid("B79B0ACD-F5CD-409b-B5A5-A16244610B92"), new Guid("9FD93CCF-3280-4391-B3A9-96E1CDE77C8D"));
bool verificationForced;
int result = clrStrongName.StrongNameSignatureVerificationEx(@"PATH\TO\ASSEMBLY.DLL", true, out verificationForced);
if (result == 0)
{
    Console.WriteLine("Valid.");
}

[ComConversionLoss, Guid("9FD93CCF-3280-4391-B3A9-96E1CDE77C8D"), InterfaceType(ComInterfaceType.InterfaceIsIUnknown), SecurityCritical]
[ComImport]
internal interface IClrStrongName
{
    [MethodImpl(MethodImplOptions.PreserveSig | MethodImplOptions.InternalCall)]
    int GetHashFromAssemblyFile([MarshalAs(UnmanagedType.LPStr)] [In] string pszFilePath, [MarshalAs(UnmanagedType.U4)] [In] [Out] ref int piHashAlg, [MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 3)] [Out] byte[] pbHash, [MarshalAs(UnmanagedType.U4)] [In] int cchHash, [MarshalAs(UnmanagedType.U4)] out int pchHash);

    [MethodImpl(MethodImplOptions.PreserveSig | MethodImplOptions.InternalCall)]
    int GetHashFromAssemblyFileW([MarshalAs(UnmanagedType.LPWStr)] [In] string pwzFilePath, [MarshalAs(UnmanagedType.U4)] [In] [Out] ref int piHashAlg, [MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 3)] [Out] byte[] pbHash, [MarshalAs(UnmanagedType.U4)] [In] int cchHash, [MarshalAs(UnmanagedType.U4)] out int pchHash);

    [MethodImpl(MethodImplOptions.PreserveSig | MethodImplOptions.InternalCall)]
    int GetHashFromBlob([In] IntPtr pbBlob, [MarshalAs(UnmanagedType.U4)] [In] int cchBlob, [MarshalAs(UnmanagedType.U4)] [In] [Out] ref int piHashAlg, [MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 4)] [Out] byte[] pbHash, [MarshalAs(UnmanagedType.U4)] [In] int cchHash, [MarshalAs(UnmanagedType.U4)] out int pchHash);

    [MethodImpl(MethodImplOptions.PreserveSig | MethodImplOptions.InternalCall)]
    int GetHashFromFile([MarshalAs(UnmanagedType.LPStr)] [In] string pszFilePath, [MarshalAs(UnmanagedType.U4)] [In] [Out] ref int piHashAlg, [MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 3)] [Out] byte[] pbHash, [MarshalAs(UnmanagedType.U4)] [In] int cchHash, [MarshalAs(UnmanagedType.U4)] out int pchHash);

    [MethodImpl(MethodImplOptions.PreserveSig | MethodImplOptions.InternalCall)]
    int GetHashFromFileW([MarshalAs(UnmanagedType.LPWStr)] [In] string pwzFilePath, [MarshalAs(UnmanagedType.U4)] [In] [Out] ref int piHashAlg, [MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 3)] [Out] byte[] pbHash, [MarshalAs(UnmanagedType.U4)] [In] int cchHash, [MarshalAs(UnmanagedType.U4)] out int pchHash);

    [MethodImpl(MethodImplOptions.PreserveSig | MethodImplOptions.InternalCall)]
    int GetHashFromHandle([In] IntPtr hFile, [MarshalAs(UnmanagedType.U4)] [In] [Out] ref int piHashAlg, [MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 3)] [Out] byte[] pbHash, [MarshalAs(UnmanagedType.U4)] [In] int cchHash, [MarshalAs(UnmanagedType.U4)] out int pchHash);

    [MethodImpl(MethodImplOptions.PreserveSig | MethodImplOptions.InternalCall)]
    [return: MarshalAs(UnmanagedType.U4)]
    int StrongNameCompareAssemblies([MarshalAs(UnmanagedType.LPWStr)] [In] string pwzAssembly1, [MarshalAs(UnmanagedType.LPWStr)] [In] string pwzAssembly2, [MarshalAs(UnmanagedType.U4)] out int dwResult);

    [MethodImpl(MethodImplOptions.PreserveSig | MethodImplOptions.InternalCall)]
    int StrongNameFreeBuffer([In] IntPtr pbMemory);

    [MethodImpl(MethodImplOptions.PreserveSig | MethodImplOptions.InternalCall)]
    int StrongNameGetBlob([MarshalAs(UnmanagedType.LPWStr)] [In] string pwzFilePath, [MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 2)] [Out] byte[] pbBlob, [MarshalAs(UnmanagedType.U4)] [In] [Out] ref int pcbBlob);

    [MethodImpl(MethodImplOptions.PreserveSig | MethodImplOptions.InternalCall)]
    int StrongNameGetBlobFromImage([In] IntPtr pbBase, [MarshalAs(UnmanagedType.U4)] [In] int dwLength, [MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 3)] [Out] byte[] pbBlob, [MarshalAs(UnmanagedType.U4)] [In] [Out] ref int pcbBlob);

    [MethodImpl(MethodImplOptions.PreserveSig | MethodImplOptions.InternalCall)]
    int StrongNameGetPublicKey([MarshalAs(UnmanagedType.LPWStr)] [In] string pwzKeyContainer, [MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 2)] [In] byte[] pbKeyBlob, [MarshalAs(UnmanagedType.U4)] [In] int cbKeyBlob, out IntPtr ppbPublicKeyBlob, [MarshalAs(UnmanagedType.U4)] out int pcbPublicKeyBlob);

    [MethodImpl(MethodImplOptions.PreserveSig | MethodImplOptions.InternalCall)]
    [return: MarshalAs(UnmanagedType.U4)]
    int StrongNameHashSize([MarshalAs(UnmanagedType.U4)] [In] int ulHashAlg, [MarshalAs(UnmanagedType.U4)] out int cbSize);

    [MethodImpl(MethodImplOptions.PreserveSig | MethodImplOptions.InternalCall)]
    int StrongNameKeyDelete([MarshalAs(UnmanagedType.LPWStr)] [In] string pwzKeyContainer);

    [MethodImpl(MethodImplOptions.PreserveSig | MethodImplOptions.InternalCall)]
    int StrongNameKeyGen([MarshalAs(UnmanagedType.LPWStr)] [In] string pwzKeyContainer, [MarshalAs(UnmanagedType.U4)] [In] int dwFlags, out IntPtr ppbKeyBlob, [MarshalAs(UnmanagedType.U4)] out int pcbKeyBlob);

    [MethodImpl(MethodImplOptions.PreserveSig | MethodImplOptions.InternalCall)]
    int StrongNameKeyGenEx([MarshalAs(UnmanagedType.LPWStr)] [In] string pwzKeyContainer, [MarshalAs(UnmanagedType.U4)] [In] int dwFlags, [MarshalAs(UnmanagedType.U4)] [In] int dwKeySize, out IntPtr ppbKeyBlob, [MarshalAs(UnmanagedType.U4)] out int pcbKeyBlob);

    [MethodImpl(MethodImplOptions.PreserveSig | MethodImplOptions.InternalCall)]
    int StrongNameKeyInstall([MarshalAs(UnmanagedType.LPWStr)] [In] string pwzKeyContainer, [MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 2)] [In] byte[] pbKeyBlob, [MarshalAs(UnmanagedType.U4)] [In] int cbKeyBlob);

    [MethodImpl(MethodImplOptions.PreserveSig | MethodImplOptions.InternalCall)]
    int StrongNameSignatureGeneration([MarshalAs(UnmanagedType.LPWStr)] [In] string pwzFilePath, [MarshalAs(UnmanagedType.LPWStr)] [In] string pwzKeyContainer, [MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 3)] [In] byte[] pbKeyBlob, [MarshalAs(UnmanagedType.U4)] [In] int cbKeyBlob, [In] [Out] IntPtr ppbSignatureBlob, [MarshalAs(UnmanagedType.U4)] out int pcbSignatureBlob);

    [MethodImpl(MethodImplOptions.PreserveSig | MethodImplOptions.InternalCall)]
    int StrongNameSignatureGenerationEx([MarshalAs(UnmanagedType.LPWStr)] [In] string wszFilePath, [MarshalAs(UnmanagedType.LPWStr)] [In] string wszKeyContainer, [MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 3)] [In] byte[] pbKeyBlob, [MarshalAs(UnmanagedType.U4)] [In] int cbKeyBlob, [In] [Out] IntPtr ppbSignatureBlob, [MarshalAs(UnmanagedType.U4)] out int pcbSignatureBlob, [MarshalAs(UnmanagedType.U4)] [In] int dwFlags);

    [MethodImpl(MethodImplOptions.PreserveSig | MethodImplOptions.InternalCall)]
    int StrongNameSignatureSize([MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 1)] [In] byte[] pbPublicKeyBlob, [MarshalAs(UnmanagedType.U4)] [In] int cbPublicKeyBlob, [MarshalAs(UnmanagedType.U4)] out int pcbSize);

    [MethodImpl(MethodImplOptions.PreserveSig | MethodImplOptions.InternalCall)]
    [return: MarshalAs(UnmanagedType.U4)]
    int StrongNameSignatureVerification([MarshalAs(UnmanagedType.LPWStr)] [In] string pwzFilePath, [MarshalAs(UnmanagedType.U4)] [In] int dwInFlags, [MarshalAs(UnmanagedType.U4)] out int dwOutFlags);

    [MethodImpl(MethodImplOptions.PreserveSig | MethodImplOptions.InternalCall)]
    [return: MarshalAs(UnmanagedType.U4)]
    int StrongNameSignatureVerificationEx([MarshalAs(UnmanagedType.LPWStr)] [In] string pwzFilePath, [MarshalAs(UnmanagedType.I1)] [In] bool fForceVerification, [MarshalAs(UnmanagedType.I1)] out bool fWasVerified);

    [MethodImpl(MethodImplOptions.PreserveSig | MethodImplOptions.InternalCall)]
    [return: MarshalAs(UnmanagedType.U4)]
    int StrongNameSignatureVerificationFromImage([In] IntPtr pbBase, [MarshalAs(UnmanagedType.U4)] [In] int dwLength, [MarshalAs(UnmanagedType.U4)] [In] int dwInFlags, [MarshalAs(UnmanagedType.U4)] out int dwOutFlags);

    [MethodImpl(MethodImplOptions.PreserveSig | MethodImplOptions.InternalCall)]
    int StrongNameTokenFromAssembly([MarshalAs(UnmanagedType.LPWStr)] [In] string pwzFilePath, out IntPtr ppbStrongNameToken, [MarshalAs(UnmanagedType.U4)] out int pcbStrongNameToken);

    [MethodImpl(MethodImplOptions.PreserveSig | MethodImplOptions.InternalCall)]
    int StrongNameTokenFromAssemblyEx([MarshalAs(UnmanagedType.LPWStr)] [In] string pwzFilePath, out IntPtr ppbStrongNameToken, [MarshalAs(UnmanagedType.U4)] out int pcbStrongNameToken, out IntPtr ppbPublicKeyBlob, [MarshalAs(UnmanagedType.U4)] out int pcbPublicKeyBlob);

    [MethodImpl(MethodImplOptions.PreserveSig | MethodImplOptions.InternalCall)]
    int StrongNameTokenFromPublicKey([MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 1)] [In] byte[] pbPublicKeyBlob, [MarshalAs(UnmanagedType.U4)] [In] int cbPublicKeyBlob, out IntPtr ppbStrongNameToken, [MarshalAs(UnmanagedType.U4)] out int pcbStrongNameToken);
} 
```

# user-controls - 棱镜和嵌套的用户控件

> ID：308759
> 
> 赞同：2
> 
> 时间：2008-11-21T13:30:37.237
> 
> 标签：user-controls, prism

我已经使用 Prism 两天了，并且已经成功地在新的 Shell 上添加和使用了现有的 UserControls。这些用户控件仅包含纯 WPF 控件（按钮、列表等）。

我现在需要介绍由其他 UserControls 组成的现有 UserControls。

如果我的理解是正确的，我相信我需要重新开发这些控件以以与 shell 相同的方式使用区域，并在适当的控制器/演示器上定义 Run() 方法以注入 (sub)UserControl。

这个对吗？

# email - 有哪些方法可以保护网站上的电子邮件免受垃圾邮件机器人的侵害？

> ID：308772
> 
> 赞同：14
> 
> 时间：2008-11-21T13:36:07.600
> 
> 标签：email, protection, spam

我正在创建一个面向公共互联网的网站，其中包含他们销售人员的电子邮件地址。

我必须使用哪种编程选项来生成“mailto”并显示来自该地址的电子邮件，但限制垃圾邮件程序获取该地址？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-10T05:48:03.583

[Recaptcha](http://recaptcha.net/)具有出色的基于捕获的[电子邮件保护功能](https://www.google.com/recaptcha/admin#mailhide)。您可以使用网站反馈链接在我[网站](http://tech.dolhub.com)的任何页面底部看到它已实现。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-11-21T13:38:49.653

我知道 Facebook 通过显示图像而不是文本来做到这一点。当然，他们可以在图像上使用 OCR，但为什么只需要一个电子邮件地址呢？

如果您真的不希望垃圾邮件机器人获取电子邮件地址，**最好的方法是永远不要向任何人显示它**。显示指向“联系此人”的链接，该链接会显示一个表单。在服务器端，将该表单的内容发送给收件人，并回复发件人的电子邮件地址。在他们的消息底部添加一个简短的说明“如果此电子邮件是垃圾邮件，请'单击此处'阻止此用户”，然后将阻止发件人的 IP。我曾多次使用这种方法，从未有过一次投诉。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-11-21T13:48:58.697

你可以混淆它，但恕我直言，无论你做什么，总有一天垃圾邮件发送者会得到你的电子邮件地址。未来在于垃圾邮件过滤器，而不是试图对电子邮件地址保密。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-21T16:01:22.440

我过去所做的是使用 javascript 来构建 mailto: 链接。这对用户来说很好，因为他们只需点击链接，我还不知道有任何垃圾邮件机器人需要时间来执行 javascript。

我想我是从[Jakob Nielsen 的 useit.com](http://www.useit.com)网站得到这个想法的。

在页眉中，我有这段 javascript：

```
<script name="mailto" language="JavaScript">
    //<![CDATA[

    function load()
    {
        c1 = "bcl"
        c2 = "brian"
        c3 = "lane"
        c4 = "com"
        // Fill in the addresses
        document.getElementById("contact1").innerHTML = "<a href=" + "mail" + "to:" + c1 + "@" + c2 + c3 + "." + c4 + ">" + c1 + "@" + c2 + c3 + "." + c4 + "</a>";
    }
    //]]>

</script> 
```

告诉它在页面加载时加载它：

```
<body onload="load()"> 
```

然后在页面的正文中，我放置了一个垃圾邮件陷阱的链接：

```
<span id="contact1"><a href="mailto:spam@brianlane.com">spam@brianlane.com</a></span> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-24T19:52:43.840

我有一个解决方案，好吧，更像是一个理论。问题是，机器人解析页面。他们可以得到文本。即使它是通过 Javascript 以某种复杂的方式放入页面中的。

所以，只有你*CSS3 伪元素*！它不会是链接，但您的电子邮件将是可见的，并且永远不会是实际文本。像这样的东西：

```
.email::after{ content:'myemail@gmail.com'; } 
```

同样，这是一个理论，我不知道这些邪恶的人能走多远，但我认为这很安全。

* * *

## 更新（7 月 19 日）

我现在认为这不是问题，因为电子邮件服务器已经变得擅长过滤垃圾邮件，并且没有理由制作任何精心设计的技巧来“保护”网页上的电子邮件文本。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-12-24T16:23:05.403

看看 PrivateDaddy - 我认为它完全符合您的要求：全自动、不显眼的电子邮件隐藏功能，甚至适用于禁用 JavaScript 支持的浏览器。你可以在[这里](http://www.privatedaddy.com/)得到它（当然免费）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-11-21T13:38:33.023

看看[enkoder](http://hivelogic.com/enkoder/)！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-11-21T13:46:18.593

如果这不是静态 HTML 页面，而是 ASP.NET、JSP、Coldfusion 或 PHP 页面，那么您可能会有一个包含所有销售人员列表的下拉框、一个用于评论的文本框和一个“联系我们” "（即提交按钮）。单击该按钮时，它将调用一个服务器端代码，该代码创建电子邮件并将其发送到您的本地邮件服务器进行传递。外界永远不会知道您的销售人员的电子邮件地址，也不会知道您公司的电子邮件格式（即 firstname.lastname@yourcompany.com）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-01-10T06:27:47.073

我写的东西对你有用吗？

[http://kevin-le.appspot.com/viewSource/sourceShare/asmRevealer.js](http://kevin-le.appspot.com/viewSource/sourceShare/asmRevealer.js)

...你可以在这里看到演示：

[http://kevin-le.appspot.com/extra/contact](http://kevin-le.appspot.com/extra/contact)

它适用于 mailto，因此对用户来说很方便，但垃圾邮件机器人将无法获取您的要求。一旦你花 1 分钟看演示，就会很明显。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-11-21T13:38:02.010

您可以使用诸如电子邮件[混淆之类的东西](http://alicorna.com/obfuscator.html)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-11-21T13:40:36.187

这是一个难题。如果您发布的电子邮件可以被 Web 浏览器解析以使其可点击，那么它就可以被垃圾邮件机器人解析。如果它不可点击（例如，如果它是图像），则对用户来说更难。一方面是完美的、无缝的用户体验，另一方面是完美的垃圾邮件拦截。不过，一个简单的 CSS 或 javascript 将电子邮件地址作为单独的令牌接收通常总比没有好。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-11-21T13:44:28.270

您只能将电子邮件地址“us...@mail.com”的一部分显示为重定向到验证码的链接，然后像 Google Groups 那样显示完整的电子邮件地址。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-11-21T13:44:33.900

我们曾经为电子邮件地址做经典的 ASP 字符串 cat，伟大的想法是垃圾邮件程序读取源代码，但不解析服务器端代码。我不知道这是否真的有效。

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2008-11-21T15:42:34.863

我看到 mailto: 协议几乎已经死了......它很方便，但太容易解析和收集。

另外，它也有它的缺点：如果您在网吧，它将无法工作，因为它会调用它拥有的任何默认电子邮件客户端（如果有的话！）并且它没有在您的帐户上设置。如果您只使用在线电子邮件管理器，则相同...

一种可能的解决方法是装饰电子邮件，依靠用户键入或更正它们：foo (at) example.com 或 foo-NOSPAM@REMOVE-THIS-example.com 是常见的方案（希望垃圾邮件发送者不会尝试破译这些常见的方案！），图形电子邮件地址是另一种方式。

或者，正如所指出的，如果可以的话，最好的选择是有一个联系表格，带有[某种合理的机器人保护形式，](http://nedbatchelder.com/text/stopbots.html "Ned Batchelder：使用哈希和蜜罐阻止垃圾邮件程序")可以在任何地方使用。尽管人们可能会反对要求电子邮件（要求回复！）的表格，但免责声明也可能有用...... :-)

# oracle - Oracle dbms_scheduler - 对系统日期的更改做出反应

> ID：308793
> 
> 赞同：2
> 
> 时间：2008-11-21T13:41:12.160
> 
> 标签：oracle, dbms-scheduler

我有一个在 Oracle 10.2.0 中运行的*dbms_scheduler -Job。*

当我将系统日期更改回昨天时，该作业将等待一天继续其工作。原因是*next_run_date*没有改变。

这不会经常发生，但有时有人决定更改系统日期而不考虑甚至不知道正在运行的 oracle 作业。

关于如何让我的工作以配置的间隔运行（无需手动更改）有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-21T15:21:31.723

如果您要从 Oracle 下更改系统日期，您可能会束手无策。您定期更改系统日期是否有原因？如果是这样，也许您应该为此创建一个脚本，并让该脚本也更新 next_run_date。

# asp.net - 我可以在同一页面上使用 Ajax 和 ASP.NET 跟踪吗？

> ID：308798
> 
> 赞同：1
> 
> 时间：2008-11-21T13:42:16.073
> 
> 标签：asp.net, ajax, trace

我正在使用 Ajax 更新面板，并且最近添加了 ASP.NET 跟踪代码来帮助调试。突然之间，当执行任何 Ajax 代码时，我开始收到*PageRequestManagerParseErrorExceptions 。*

例如：
Trace.Write("完成设置employeeId。");

显然这是因为我不允许将“服务器跟踪”与 Ajax 一起使用。（根据[Eilon Lipton 的这篇文章](http://weblogs.asp.net/leftslipper/archive/2007/02/26/sys-webforms-pagerequestmanagerparsererrorexception-what-it-is-and-how-to-avoid-it.aspx)）。

这是真的？我是否不允许使用很棒的 ASP.NET 跟踪机制？这将是一种耻辱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-21T13:54:17.093

在 web.config 中的 trace 元素上设置 pageOutput="false" 似乎可以解决问题。

使用 ASP.NET 跟踪，而是通过将*writeToDiagnosticsTrace*属性设置为“true”（位于 web.config 文件中的跟踪元素上）来写入正常诊断跟踪。

# silverlight - Silverlight 单元测试

> ID：308802
> 
> 赞同：7
> 
> 时间：2008-11-21T13:43:28.130
> 
> 标签：silverlight, unit-testing

我正在使用[Silverlight UnitTest 框架](http://code.msdn.microsoft.com/silverlightut/)有没有人有一个很好的例子有如何用它对应用程序进行单元测试？我非常成功地使用它来对silverlight 类库进行单元测试。

任何指针和链接将不胜感激。

谢谢， 内思

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-22T02:34:57.433

我写了几篇关于 Silverlight 单元测试框架的博客文章。第一个介绍如何使用 asynchronous 属性和框架的一些更高级的特性来测试异步代码。该帖子可在[http://jonas.follesoe.no/UnitTestingAsynchronousSilverlightCode.aspx找到](http://jonas.follesoe.no/UnitTestingAsynchronousSilverlightCode.aspx)

第二篇文章是关于使用标签属性组织你的测试。这使您可以在同一个测试套件中进行单元/集成/性能/UI 测试，但一次只执行一个特定类别。可以在[http://jonas.follesoe.no/EfficientTestingInSilverlight2UsingTags.aspx找到该博客文章](http://jonas.follesoe.no/EfficientTestingInSilverlight2UsingTags.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-21T13:46:19.153

Nath，Silverlight 控制工具包使用它。为什么不看看那里的单元测试呢？

[http://www.codeplex.com/silverlight](http://www.codeplex.com/silverlight)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-14T15:20:57.007

**这是我在****Silverlight 5**中进行单元测试的明确指南。如果您不知道从哪里开始，这将指导您必须做的所有事情。本指南是关于**在**您的项目中进行测试的。您**不需要**2nd odr 3rd silverlight 项目来进行单元测试。

**0.)**关闭您的 Silverlight 项目。

**1.)在**[此处](http://silverlight.codeplex.com/releases)下载 Silverlight 5 工具包并进行安装。

**2.)**打开您的 Windows 资源管理器，转到 C:，然后搜索这两个文件：

**Microsoft.Silverlight.Testing.dll**

**Microsoft.VisualStudio.QualityTools.UnitTesting.Silverlight.dll**

如果你没有找到它们，那就有问题了。

**3.)**在 GAC 中注册这两个 DLL。为此，请执行以下操作：

**以管理员**身份打开 Visual Studio 控制台。复制每个语句并在控制台中执行它们：

*gacutil /i "C:\Program Files\Microsoft SDKs\Silverlight\v5.0\Toolkit\dec11\Testing\Microsoft.Silverlight.Testing.dll"*

*gacutil /i "C:\Program Files\Microsoft SDKs\Silverlight\v5.0\Toolkit\dec11\Testing\Microsoft.VisualStudio.QualityTools.UnitTesting.Silverlight.dll"*

**请记住，DLL 的路径在您的机器上可能不同。只需为您的机器输入正确的路径。**

**4.**打开您的 Silverlight 项目并添加上面的两个 DLL 作为对 Silverlight 项目的引用。**不是**你的网络项目。

**5.**将以下类添加到您的项目中。你把它放在哪里都没关系。我有一个额外的文件夹用于我的测试，但没关系。

```
using System;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Ink;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Silverlight.Testing;
using Microsoft.VisualStudio.TestTools.UnitTesting;

namespace Test
{
[TestClass]
public class Test_Svc_Login 
{
    [TestMethod]
    public void Always_True()
    {
        Assert.IsTrue(true);
    }

    [TestMethod]
    public void Always_False()
    {
        Assert.IsTrue(false);
    }

    [TestMethod]
    public void Even_MoreAlways_False()
    {
        Assert.IsTrue(false);
    }
}

} 
```

**6.**按F6，尝试编译。此时一切都应该没问题。

**7.**在您的项目中找到文件“App.xaml.cs”。在此文件中，您将找到以下语句。当然是“new Gui.MainPage();” 在您的项目中会有所不同。只需搜索 RootVisual。

```
 this.RootVisual = new Gui.MainPage(); 
```

您将此语句替换为以下代码块。

```
#if DEBUG
            if (System.Diagnostics.Debugger.IsAttached)
            {
                //You hit F5 ONLY
                this.RootVisual = new Gui.MainPage();
            }
            else
            {
                //You hit CTRL + F5 
                RunUnitTests();
            }
#else
            //You are in Release Mode. You hit whatever you want.
            this.RootVisual = new Gui.MainPage();
#endif 
```

现在将以下例程添加到 App.xaml.cs 类中：

```
 private void RunUnitTests()
        {

#if DEBUG
            //You hit CTRL + F5 
            var settings = new UnitTestSettings();
            settings.TestHarness = new UnitTestHarness();
            settings.StartRunImmediately = true;
            settings.TestAssemblies.Add(Assembly.GetExecutingAssembly());
            this.RootVisual = UnitTestSystem.CreateTestPage(settings); 
#endif
        } 
```

**8.**按 F6 检查是否一切正常。

**9.**按F5看看，是否还能正常调试。**按 Ctrl+F5 开始单元测试。**

**10.**你完成了！现在您可以在 Silverlight 5 中进行单元测试。

**请记住，工具包中的两个 DLL 仍处于“实验”模式。没有官方支持。**还要记住，这是关于在项目中运行测试的方法。现在您甚至可以在客户端机器上以发布模式运行这些测试。如果想这样做，您必须更改#if DEBUG 语句，但我认为您了解它的全部内容。

**当然，您可以将这种方法更改为在一个额外的项目中进行单元测试。**

**快乐编码。**

***提示：***如果在注册两个 DLL 后 System.Core.dll 出现问题，只需使用 gacutil 重新注册 System.Core.dll。像这样：

gacutil /i "C:\Program Files\Reference Assemblies\Microsoft\Framework\Silverlight\v5.0\System.Core.dll"

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-08T15:06:28.527

您还应该尝试使用[SilverUnit](http://www.typemock.com/Silverlight_unit_testing_page.php)进行真正的[Silverlight 单元测试](http://www.typemock.com/Silverlight_unit_testing_page.php)，它是一个非常易于使用的框架，它还可以保护您免受 Silverlight 事件处理的复杂性。

# code-generation - 模型驱动开发有什么用？

> ID：308803
> 
> 赞同：4
> 
> 时间：2008-11-21T13:43:45.587
> 
> 标签：code-generation, mda, oslo, mdd

以开罗闻名的微软正在开发一个[新的建模平台](http://www.microsoft.com/soa/products/oslo.aspx)Oslo 。Microsoft 服务器和工具业务高级副总裁 Bob Muglia 表示，建模的好处一直很明显。

简而言之，奥斯陆赋予其用户的明显好处是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-11-21T15:49:09.500

理论上，有几个好处：

*   具有业务知识的人可以创建软件模型，因此您不太可能在翻译中丢失任何东西。
*   当非技术股东创建模型时，它迫使他们“像开发人员一样思考”。他们发现，当您将其形式化时，他们认为显而易见且容易的事情实际上是困难的。
*   它更有效率。业务人员有业务知识，技术人员有技术知识，那么为什么不让每个团队在他们的专业领域设计一个系统呢？不再有电话游戏，因为业务专家重新解释了电话游戏对开发人员的意义。开发人员不再因神秘的业务需求而分心。他们可以专注于高技术系统之间的交互。

在实践中，这要棘手得多：

*   模型很难，就是这样。仅仅因为您将模型创建推送到不同的组并不意味着您获得了万无一失的模型。软件开发都是关于建模的，所以开发人员已经习惯了。您实际上可能会失去效率，因为第二组人开始着手将他们对业务需求的理解正式化。
*   模型驱动开发与 OO 概念紧密相关。OO 对很多事情都有好处，但不是所有事情。如果您真正需要的东西超出了您的建模工具的能力，会发生什么？
*   根据我的经验，业务人员和技术人员之间的划分是人为的。最有效率的人是具有技术头脑的业务人员或具有业务头脑的技术人员。他们让事情发生。如果您将业务任务与技术任务分开，您就会破坏交叉培训和交叉思考的机会。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-21T16:11:25.150

我认为建模只是下一个抽象级别。一旦建立起来，它将导致更高的生产力。

今天的 MDSD - 主要以代码生成的形式 - 节省了时间。为软件的不同部分复制工作模式并仅手动编写真正的业务代码可以稍微提高生产力，但很可能会带来更好的软件质量和更简洁的架构。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-05-27T07:46:25.713

我认为简短的答案是研究项目！

不过，如果您想进一步了解它，可以从 Doug Purdy 的 PDC 演讲“A lap around Oslo”开始，您可以[在此处查看](http://channel9.msdn.com/pdc2008/TL23/)。他解释了奥斯陆如何“在没有仪式的情况下捕捉代码的本质”，......不管那是什么意思。

HTH。

# mysql - MySQL：如何使用 ODBC 获取表列表

> ID：308809
> 
> 赞同：2
> 
> 时间：2008-11-21T13:44:47.817
> 
> 标签：mysql, odbc

我正在通过一个终端连接到 MySQL DB，该终端只有一个程序与 MySQL DB 的 ODBC 连接。我可以在程序中放入查询，但不能直接访问 MySQL。

我有办法查询数据库以获取表列表吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-21T13:46:51.960

有一个SQL查询：

```
Show tables; 
```

您应该能够执行该查询。

# dependency-injection - OSGi/Felix 声明式服务：如何过滤要绑定的服务？

> ID：308813
> 
> 赞同：4
> 
> 时间：2008-11-21T13:45:17.503
> 
> 标签：dependency-injection, annotations, osgi, apache-felix

我正在使用 Apache Felix 及其声明式服务 (SCR) 来连接包之间的服务依赖关系。

例如，如果我需要访问 java.util.Dictionary 我可以说以下内容让 SCR 提供：

```
/**
* @scr.reference name=properties interface=java.util.Dictionary
*/

protected void bindProperties(Dictionary d) {
}

protected void unbindProperties(Dictionary d) {
} 
```

现在，我有多个可用的 Dictionary 服务，我想使用“name”服务属性（我只想要“name=myDictionary”）过滤它们。我可以使用代码（使用 ServiceTracker）来做到这一点，但我宁愿在 @scr 注释中指定过滤器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-15T10:41:22.607

我认为

```
target="(name=myDictionary)" 
```

应该在`@scr.reference`注释中解决问题。见[http://felix.apache.org/site/apache-felix-maven-scr-plugin.html](http://felix.apache.org/site/apache-felix-maven-scr-plugin.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-26T23:03:50.883

在标准 DS 中，您可以使用引用元素的目标属性。在可以使用注解的Felix世界中，我不知道什么是等价的。

目标属性是一个 LDAP 过滤器，它与服务属性匹配。所以，你的过滤器应该是：

`(name=myDictionary)`

# asp.net - 重写路径和 IIS 集成模式

> ID：308820
> 
> 赞同：1
> 
> 时间：2008-11-21T13:47:01.010
> 
> 标签：asp.net, iis-7, url-rewriting

我对 IIS 7.0 的 url 重写有很大的问题。

我为我的 NET3.5/IIS7 Web 应用程序编写了简单的重写模块。这是代码的一部分。

```
 public void Init(HttpApplication context)
    {
        context.BeginRequest += new EventHandler(context_BeginRequest);
    }

    void context_BeginRequest(object sender, EventArgs e)
    {
        HttpApplication app = sender as HttpApplication;
        if (app.Request.Path.Contains("pagetorewrite.aspx"))
            HttpContext.Current.RewritePath("~/otherpage.aspx");
    } 
```

我在 web.config 中注册了我的模块：

```
 <system.webServer>
<validation validateIntegratedModeConfiguration="false"/>
<modules>
              <add name="MyModule" type="MyModule" preCondition="" /> 
```

在使用经典 ASP 管道的 IIS 7.0 (Vista) 下，它可以完美运行，但是当我将管道模式更改为集成时，它就会停止工作。调试器/事件/日志文件中没有异常、错误和任何内容 - 只有在浏览器中没有找到该页面的消息。最奇怪的是，页面名称看起来像是从原始页面的部分拼写错误或合并到重新写入的页面。

我已经在另一台计算机上部署了我的代码（也是 vista-but x64- 和 iis 7.0），它在两种模式下都能完美运行。看起来是配置问题还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-11-21T21:45:39.250

只是猜测：使用程序集名称限定您的类型（type="MyModule,MyAssembly"）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-23T12:08:39.583

好吧，推荐你使用微软发布的经过测试的 URL Rewrite Module。

[http://learn.iis.net/page.aspx/460/using-url-rewrite-module/](http://learn.iis.net/page.aspx/460/using-url-rewrite-module/)

祝你享受它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-08T14:21:17.423

最后我找到了可行的解决方案。

.NET 3.5[传输请求](http://msmvps.com/blogs/luisabreu/archive/2007/10/09/are-you-using-the-new-transferrequest.aspx)

# java - 如何在 ANTLR 中指定令牌的确切出现次数？

> ID：308823
> 
> 赞同：2
> 
> 时间：2008-11-21T13:47:49.150
> 
> 标签：java, parsing, antlr, grammar, antlrworks

我必须定义一个文件的语法，如下所示。

//示例文件
NameCount = 4
Name = a
Name = b
Name = c
Name = d
//文件结束

现在我可以为**NameCount**和**Name**定义标记。但是我必须定义文件结构，包括令牌**Name**的有效实例数，这是**NameCount**之后的值。我将值解析并转换为整数并存储在语法全局范围内的变量中（比如变量**nc**）。

如何在语法中定义**Name**应该精确重复**nc**次？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-02T22:21:06.787

这不能用语法本身来表达。如果数字是固定的，您可以表达预期令牌的数量。但是令牌流会根据值发生变化。您可以做的是将其包含在词法分析器/解析器组合中。但是你不能仅仅通过简单的语法来创建这个结构。你可能想要一些类似的东西

```
grammar test;

@members {
  private int count = 0;
  private int names = 0;
}

file
    : count (name)+
      {
        if (count != names) throw new Exception("");
      }
    ;

count
    : 'NameCount' EQ Number
      {
        count = Integer.parseInt($Number.text);
      }
    ;

name
    : 'Name' EQ Value
      {
        names++;
      }
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-21T14:31:45.583

我不确定这是一个上下文无关的语法。如果不是，您不能告诉 ANTLR 解析语言。

# http - MSXML2.XMLHTTP 发送方法适用于早期绑定，后期绑定失败

> ID：308826
> 
> 赞同：9
> 
> 时间：2008-11-21T13:49:13.143
> 
> 标签：http, vba, msxml, xmlhttprequest

下面的代码有效。但是，如果我注释掉该行`Dim objRequest As MSXML2.XMLHTTP`并取消注释该行`Dim objRequest As Object`，它会失败并显示错误消息：

> 参数不正确

为什么，我能做些什么（如果有的话）？

```
Public Function GetSessionId(strApiId, strUserName, strPassword) As String

    Dim strPostData As String

    Dim objRequest As MSXML2.XMLHTTP
    'Dim objRequest As Object '

    strPostData = "api_id=" & strApiId & "&user=" & strUserName & "&password=" & strPassword

    Set objRequest = New MSXML2.XMLHTTP
    With objRequest
        .Open "POST", "https://api.clickatell.com/http/auth", False
        .setRequestHeader "Content-Type", "application/x-www-form-urlencoded"
        .send strPostData
        GetSessionId = .responseText
    End With

End Function 
```

* * *

科里，是的，我知道我必须这样做才能让我的代码在不引用 MSXML 类型库的情况下工作。这不是这里的问题。`Dim objRequest As Object`无论我是否使用，使用时代码都会失败

`Set objRequest = NEW MSXML2.XMLHTTP`与参考，或

`Set objRequest = CreateObject("MSXML2.XMLHTTP")`没有参考。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-11-21T14:24:52.743

出于某种原因，这有效：

```
Dim strPostData As String
Dim objRequest As Object

strPostData = "api_id=" & strApiId & "&user=" & strUserName & "&password=" & strPassword

Set objRequest = New MSXML2.XMLHTTP
With objRequest
  .Open "POST", "https://api.clickatell.com/http/auth", False
  .setRequestHeader "Content-Type", "application/x-www-form-urlencoded"
  .send (strPostData)
   GetSessionId = .responseText
End With 
```

*强烈*建议使用 URL 编码函数`strPostData`，而不是通过字符串连接构建URL 编码：

 *```
strPostData = "api_id=" & URLEncode(strApiId) & _
              "&user=" & URLEncode(strUserName) & _
              "&password=" & URLEncode(strPassword) 
```

`URLEncode()`此线程中有几个 VBA 函数的选择：[如何在 Excel VBA 中对字符串进行 URL 编码？](https://stackoverflow.com/questions/218181/how-can-i-url-encode-a-string-in-excel-vba)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-21T13:54:28.653

如果您使用 Dim objRequest As Object 那么您需要编码：
Set objRequest = CreateObject("MSXML2.XMLHTTP")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-02-22T16:26:59.423

我意识到这与上面 Tomalek 的代码几乎相同（归功于您！），但是这个问题帮助我找到了解决我遇到的问题的完整解决方案（Excel 提交到 PHP 服务器，然后处理响应）......因此，如果这对其他人有任何帮助：

```
Sub Button1_Click2()

Dim objXMLSendDoc As Object
Set objXMLSendDoc = New MSXML2.DOMDocument
objXMLSendDoc.async = False
Dim myxml As String
myxml = "<?xml version='1.0'?><Request>Do Something</Request>"
If Not objXMLSendDoc.LoadXML(myxml) Then
    Err.Raise objXMLSendDoc.parseError.ErrorCode, , objXMLSendDoc.parseError.reason
End If

Dim objRequest As MSXML2.XMLHTTP
Set objRequest = New MSXML2.XMLHTTP
With objRequest
    .Open "POST", "http://localhost/SISADraftCalcs/Test2.php", False
    .setRequestHeader "Content-Type", "application/xml;charset=UTF-16"
    .setRequestHeader "Cache-Control", "no-cache"
    .send objXMLSendDoc
End With

Dim objXMLDoc As MSXML2.DOMDocument
Set objXMLDoc = objRequest.responseXML
If objXMLDoc.XML = "" Then
    objXMLDoc.LoadXML objRequest.responseText
    If objXMLDoc.parseError.ErrorCode <> 0 Then
        MsgBox objXMLDoc.parseError.reason
    End If
End If

Dim rootNode As IXMLDOMElement
Set rootNode = objXMLDoc.DocumentElement

MsgBox rootNode.SelectNodes("text").Item(0).text

End Sub 
```

# java - SOAP 消息信封

> ID：308827
> 
> 赞同：3
> 
> 时间：2008-11-21T13:49:15.327
> 
> 标签：java, soap, message

有谁知道是否有办法使用 java 将 SOAP 信封的所有 XML 内容传递给字符串？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-21T17:55:55.360

取决于您对 SOAP 使用的内容以及您是否希望服务器或客户端进行日志记录。

我知道在 Axis2 中你可以使用它来获取它

```
MessageContext msgContext = MessageContext.getCurrentMessageContext();
if (msgContext != null) {
    return msgContext.getEnvelope().getBody().toString();
} 
```

# ios - 检测首次启动 iOS 应用程序的时间？

> ID：308832
> 
> 赞同：65
> 
> 时间：2008-11-21T13:51:35.993
> 
> 标签：ios, cocoa-touch, launching-application

如何检测首次启动 iOS 应用程序的时间？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2008-11-21T13:59:46.787

几乎是 Marc 和 Chris 所说的，尽管我更喜欢在应用程序退出时更改值，以防应用程序的多个区域需要了解它。在代码中：

**Objective-C**

```
// -applicationDidFinishLaunching:
[[NSUserDefaults standardUserDefaults] registerDefaults:[NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES],@"firstLaunch",nil]];
// to check it:
[[NSUserDefaults standardUserDefaults] boolForKey:@"firstLaunch"];
// -applicationWillTerminate:
[[NSUserDefaults standardUserDefaults] setBool:NO forKey:@"firstLaunch"]; 
```

**斯威夫特 5.0**

```
// -applicationDidFinishLaunching:
UserDefaults.standard.register(defaults: ["firstLaunch":true])
// to check it:
UserDefaults.standard.bool(forKey: "firstLaunch")
// -applicationWillTerminate:
UserDefaults.standard.set(false, forKey: "firstLaunch") 
```

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2010-07-21T14:32:24.570

我意识到这个问题已经很老了，但我用它想出了*一种*方法来检测“全新安装”后的第一次启动（与升级/降级后的第一次启动相比），并认为我会在这里分享代码未来的观众，以防万一。

```
// Get current version ("Bundle Version") from the default Info.plist file
NSString *currentVersion = (NSString*)[[NSBundle mainBundle] objectForInfoDictionaryKey:@"CFBundleVersion"];
NSArray *prevStartupVersions = [[NSUserDefaults standardUserDefaults] arrayForKey:@"prevStartupVersions"];
if (prevStartupVersions == nil) 
{
    // Starting up for first time with NO pre-existing installs (e.g., fresh 
    // install of some version)
    [self firstStartAfterFreshInstall];
    [[NSUserDefaults standardUserDefaults] setObject:[NSArray arrayWithObject:currentVersion] forKey:@"prevStartupVersions"];
}
else
{
    if (![prevStartupVersions containsObject:currentVersion]) 
    {
        // Starting up for first time with this version of the app. This
        // means a different version of the app was alread installed once 
        // and started.
        [self firstStartAfterUpgradeDowngrade];
        NSMutableArray *updatedPrevStartVersions = [NSMutableArray arrayWithArray:prevStartupVersions];
        [updatedPrevStartVersions addObject:currentVersion];
        [[NSUserDefaults standardUserDefaults] setObject:updatedPrevStartVersions forKey:@"prevStartupVersions"];
    }
}

// Save changes to disk
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2008-11-22T11:12:59.103

我通常使用应用程序版本号而不是布尔值作为用户默认值中的 firstLaunch 值。这样，您可以区分首次启动新安装和首次启动升级。可能在未来的版本中有用...

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-05T08:08:44.770

这是一个非常简单的快捷方式，但我发现 NSUserDefault 键值对在您第一次运行应用程序时始终为 NULL，所以

```
// Check to see if its the first time
if ([[NSUserDefaults standardUserDefaults] valueForKey:@"firstTime"] == NULL) {
   [[NSUserDefaults standardUserDefaults] setValue:@"Not" forKey:@"firstTime"];
} 
```

并将此代码放在应用程序启动时出现的视图控制器的 awakeFromNib 中。我不知道其他答案是否适用于您的问题，但这是我解决它的方式。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-11-21T13:55:37.903

您可以在用户默认值中设置一个布尔值来执行此操作。调用时将键设置为 false `registerDefaults:`，然后将其设置为 true，然后在显示初始帮助屏幕或您需要执行的任何操作后将其更改为 true。

如果您有一个在应用程序关闭后始终保存的持久数据文件，则检查它是否存在将是另一种方法。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-11-21T13:56:03.550

将其保存为[用户首选项](http://groups.google.com/group/iphonesdkdevelopment/msg/f4d60f11e1da1e33)，例如 had_first_launch，在启动时设置为 true，它只会在第一次为 false...

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2011-06-04T15:27:01.123

如果您想在代码的其他位置检测它是否首次启动，这将无法正常工作。由于多任务处理，“applicationWillTerminate”在 iOS 4.0 中不起作用。此链接提供了一个很好的解决方案：http: [//mobiledevblog.metalcompass.com/ ?p=43](http://mobiledevblog.metalcompass.com/?p=43)

# sql - 如何将 Oracle SQL 转换为应该遍历某些表以获取某个数据字段的存储过程？

> ID：308833
> 
> 赞同：1
> 
> 时间：2008-11-21T13:51:37.567
> 
> 标签：sql, oracle, stored-procedures, plsql

我需要将 Oracle SQL 语句转换为存储过程，因此权限较低的用户可以访问某些数据字段：

```
SELECT
    info_field, data_field
FROM
    table_one
WHERE
    some_id = '<id>' -- I need this <id> to be the procedure's parameter
UNION ALL

SELECT
    info_field, data_field
FROM
    table_two
WHERE
    some_id = '<id>'
UNION ALL

SELECT
    info_field, data_field
FROM
    table_three
WHERE
    some_id = '<id>'
UNION ALL

... 
```

鉴于我不是 SP 专家，我一直无法找到一个好的解决方案来遍历所有相关的表（大约 12 个）。

任何想法都会有所帮助。非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-21T14:28:06.887

如果您只想限制用户的访问权限，您可以创建一个视图并授予他们选择视图而不是表的权限：

```
CREATE VIEW info_and_data AS
    SELECT info_field, data_field    
    FROM   table_one
    UNION ALL
    SELECT info_field, data_field    
    FROM   table_two
    UNION ALL
    SELECT info_field, data_field    
    FROM   table_three
    ... 
```

然后用户可以键入：

```
SELECT info_field, data_field
FROM   info_and_data
WHERE  some_id = <id> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-21T14:52:37.757

除了我在下面的建议之外，还有其他方法可以实现您的目标，但我会警告不要拆分真正属于一个表的数据只是为了实现将来可能会更改的数据访问策略。

限制用户看到哪些表列的最简单的解决方案是通过这些表的视图。使用显示或隐藏特定列的不同视图，并将这些视图的访问权限授予不同的用户/角色。

如果您事先不知道可能允许用户查看哪些列组合，那么您可以使用动态 sql：您根据用户的访问权限在存储过程中组装 SQL 语句（从其他一些为保存此信息而创建的表），这意味着您只在语句的 SELECT 部分中包含正确的列。[有关更多信息，请参阅Orace](http://download-uk.oracle.com/docs/cd/B10501_01/appdev.920/a96590/adg09dyn.htm)的此文档 。

如果您使用的是 Oracle 10g，那么您可能会发现这篇[Oracle 文章](http://www.oracle.com/technology/pub/articles/10gdba/week14_10gdba.html)很有趣。它介绍了虚拟专用数据库（简称 VPD）的主题，您可以在其中隐藏某些行、列或什至单个*列值*，具体取决于访问表的人员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-21T14:07:06.773

是否期望在所有这些表中，只有一个与给定 ID 匹配？

如果否：您需要说明当有多个匹配项时您想要做什么。

如果是：您只需执行相同的 SQL 查询，将结果选择到一个变量中，然后返回。

它看起来像这样：

```
PROCEDURE get_fields( the_id  NUMBER,
                      info_field_out  OUT  table_one.info_field%TYPE,
                      data_field_out  OUT  table_one.data_field%TYPE
                    )
  IS
  BEGIN
    SELECT info_field, data_field
      INTO info_field_out, data_field_out
      FROM (
        ... put your full SQL query here, using 'the_id' as the value to match against ..
      );

  EXCEPTION

    WHEN no_data_found THEN
      -- What do you want to do here?  Set the outputs to NULL?  Raise an error?

    WHEN too_many_rows THEN
      -- Is this an invalid condition?

  END; 
```

# php - 在 php 中初始化关联数组中的元素是一种好习惯吗？

> ID：308835
> 
> 赞同：1
> 
> 时间：2008-11-21T13:52:05.243
> 
> 标签：php, associative-array

我发现自己在 PHP 中使用关联数组做了很多事情。

我正在这样做：

```
 foreach ($item as $key=>$value) {
     if ($arr[$key] == null) {
         $arr[$key] = 0; 
     }
     $arr[$key] += $other_arr[$value];
 } 
```

但后来我意识到，如果我排除初始化 $arr[$key] 的行，它可以正常工作，大概是因为它是 null，它被视为与 0 相同。

在 php 中做出这种假设是否安全？如果它是安全的，这是一个好主意吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-11-21T13:57:16.700

它是安全的，但我建议不要这样做。如果您将错误报告设置为 E_NOTICES，您会看到您的代码产生了很多错误，从而掩盖了任何真正的错误（例如输入错误的变量名）。

你真正应该做的是：

```
if (!isset($arr[$key]))
    $arr[$key] = 0; 
```

这不会引起注意（但要非常小心，不要在 isset() 中输入错误的 $arr）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-26T23:15:06.700

您`php 7`现在可以执行以下操作：

```
foreach ($item as $key=>$value) {
    $arr[$key] = ($arr[$key] ?? 0) + other_arr[$value];
} 
```

# asp.net - 添加动态面板/控件

> ID：308837
> 
> 赞同：1
> 
> 时间：2008-11-21T13:52:38.970
> 
> 标签：asp.net, visual-studio-2008

我有下表

```
<td class="style2">
    <asp:DropDownList ID="DropDownList1" runat="server">
        <asp:ListItem>Location</asp:ListItem>
        <asp:ListItem>Name</asp:ListItem>
        <asp:ListItem>SSN</asp:ListItem>
    </asp:DropDownList>
    <asp:DropDownList ID="DropDownList2" runat="server">
        <asp:ListItem>LIKE</asp:ListItem>
        <asp:ListItem>=</asp:ListItem>
    </asp:DropDownList>
    <br />
    <br />
</td>
<td valign="bottom">
   <asp:Button ID="btnAdd" runat="server" Text="Add" />
</td> 
```

单击 btnAdd 时，我想添加另一行这些过滤器。我假设我会创建一个面板并拥有这 3 个控件，并且添加按钮会创建一个新面板，或者我会即时创建所有控件，然后在后面添加代码。

编辑:: 当我点击 btnAdd 然后我想添加另一行

在 btnAdd 点击之前

```
<td class="style2">
        <asp:DropDownList ID="DropDownList1" runat="server">
            <asp:ListItem>Location</asp:ListItem>
            <asp:ListItem>Name</asp:ListItem>
            <asp:ListItem>SSN</asp:ListItem>
        </asp:DropDownList>
        <asp:DropDownList ID="DropDownList2" runat="server">
            <asp:ListItem>LIKE</asp:ListItem>
            <asp:ListItem>=</asp:ListItem>
        </asp:DropDownList>
        <br />
        <br />

    </td> 
```

在 btnAdd 之后：

```
<td class="style2">
        <asp:DropDownList ID="DropDownList1" runat="server">
            <asp:ListItem>Location</asp:ListItem>
            <asp:ListItem>Name</asp:ListItem>
            <asp:ListItem>SSN</asp:ListItem>
        </asp:DropDownList>
        <asp:DropDownList ID="DropDownList2" runat="server">
            <asp:ListItem>LIKE</asp:ListItem>
            <asp:ListItem>=</asp:ListItem>
        </asp:DropDownList>
        <br />
        <br />
    </td>

<tr>
<td class="style2">
        <asp:DropDownList ID="DropDownList1" runat="server">
            <asp:ListItem>Location</asp:ListItem>
            <asp:ListItem>Name</asp:ListItem>
            <asp:ListItem>SSN</asp:ListItem>
        </asp:DropDownList>
        <asp:DropDownList ID="DropDownList2" runat="server">
            <asp:ListItem>LIKE</asp:ListItem>
            <asp:ListItem>=</asp:ListItem>
        </asp:DropDownList>
        <br />
        <br />
    </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-11-21T13:55:42.240

显示/隐藏第三个下拉菜单比动态添加它更容易。

```
DropDownList3.Visible = true; 
```

当您动态添加时，如果您没有在正确的时间（页面生命周期）添加它，您会遇到视图状态问题，如果您可以避免它，那么它不值得麻烦。

如果你必须那么我会把你的行变成一个用户控件，并继续添加它的新实例。重新加载视图状态发生在 init 之后和加载之后，因此请确保您的控件在所有回发时理想地加载到 init 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-21T13:56:48.960

您可以在后面的代码中做一些事情，使您的下拉菜单可见。换句话说：

```
<td class="style2">
    <asp:DropDownList ID="DropDownList3" runat="server" Visible="false">
        <asp:ListItem>Location</asp:ListItem>
        <asp:ListItem>Name</asp:ListItem>
        <asp:ListItem>SSN</asp:ListItem>
    </asp:DropDownList>
    <asp:DropDownList ID="DropDownList4" runat="server" Visible="false">
        <asp:ListItem>LIKE</asp:ListItem>
        <asp:ListItem>=</asp:ListItem>
    </asp:DropDownList> 
```

而您后面的代码将在 button_OnClick 事件中有这个：

```
DropDownList3.Visible = true;
DropDownList4.Visilbe = true; 
```

当然，如果您在更新面板上执行这些操作，它会使转换比刷新整个页面更好。

# architecture - RIA 应用程序是否真的需要服务器端架构？

> ID：308843
> 
> 赞同：1
> 
> 时间：2008-11-21T13:55:00.760
> 
> 标签：architecture, ria

我们真的需要服务器端架构来创建 RIA 应用程序吗？

我的想法如下：

*   仅使用 Html 页面、JQuery 和完整的客户端 UI 组件集创建一个完整的 RIA 应用程序（在大量不同的可用开源组件之间选择你的毒药）
*   服务器端我只有一个或多个类似 REST 的 Web 服务，它们返回并接受 Json 序列化对象

不再依赖服务器端架构的最新趋势（Struts、Java faces、Asp.Net、MVC 或任何其他以前流行或现在流行的模型），Web 服务器端将只是 trasnsport (Json) 之间的接口和业务逻辑层，其中的逻辑很少。

客户端我们将拥有一个巨大的 JavaScript 应用程序，但是使用现代浏览器和 PC（为了速度）以及易于维护的现代开发环境（VS2008 和其他工具很好地调试 JavaScript）我认为这一层的代码维护问题较少而不是找到了解正确服务器层架构的开发人员......

你对这种情况有意见吗？

乔·马西莫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-21T14:05:30.410

您可以很容易地询问如何实现一流的后端，使服务器端正确，同时避免最新的时尚客户端时尚。我认为这在任何一种情况下都是一个合理的目标。你没有提到这是否是一个现有的应用程序，但如果是，那么我会说，首先记住 Fowler Refactoring 的书，然后去学习它。

如果你知道如何正确应用你需要知道的东西来完成你的客户端目标，那么软件中的很多搅动都是有用的，因为相同的概念（SOC、耦合与内聚、DRY、YAGNI 等）适用于两端，并且我们手头有越来越多的有用工具来应用它们（这可以通过许多技术或多或少地轻松实现。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-01T07:11:54.233

只是不要将安全逻辑放在客户端...... ;-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-21T14:12:37.370

或者甚至不用关心 REST / Json 部分，而是使用 DWR 之类的东西直接从客户端代码与服务器 POJO 对话。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-01T06:32:01.567

大多数 RIA 应用程序不需要 MVC 或基于组件的框架，因为 C、V 和大多数 M 驻留在客户端上。但是，您仍然需要某种服务层供客户端进行对话，并需要一个持久层来处理数据库。

# java - 编译 ANTLRWorks 生成的类文件

> ID：308845
> 
> 赞同：0
> 
> 时间：2008-11-21T13:55:36.203
> 
> 标签：java, parsing, antlr, grammar, antlrworks

我正在使用 ANTLRWorks 创建 ANTLR 语法。我有一个有效的语法，并且也生成了解析器和词法分析器源文件。我还尝试调试生成的代码，并且输出与调试器输出中的预期一致。

但是当我尝试调用调试器生成的 __Test__ 类时，控制台中没有任何内容。我已经正确设置了类路径，因为我可以使用相同的类路径成功编译 __Test__.java。

会有什么问题？是否有使用 antlr 和 antlrworks 编写和编译示例解析器的清晰教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-02T22:03:21.457

您期望控制台上出现什么？

看看[这个项目](http://github.com/tcurdt/drift/tree/master)。ANTLRWorks 生成的解析器在[这里](http://github.com/tcurdt/drift/tree/master/src/main/java/org/vafer/drift/parser)。从[POM](http://github.com/tcurdt/drift/tree/master/pom.xml)中的依赖项可以看出，您需要确保 antlr 在类路径中。[然后使用该类](http://github.com/tcurdt/drift/tree/master/src/main/java/org/vafer/drift/model/Schema.java)中所示的解析器。

```
final DriftLexer lexer = new DriftLexer(new ANTLRInputStream(inputStream));
final CommonTokenStream tokens = new CommonTokenStream(lexer);        
final DriftParser parser = new DriftParser(tokens);
parser.file(); 
```

这应该足以让你的东西也能正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-04-30T21:58:24.427

ANTLRWorks 生成测试类，这些测试类创建返回到 ANTLRWorks 的套接字连接，因此不能从控制台使用它们。您可以编辑生成的测试类以不使用调试端口（套接字连接）选项。

要编辑的行是：

```
FormalSpecParser g = new FormalSpecParser(tokens, 49100, null); 
```

您可以将其更改为：

```
FormalSpecParser g = new FormalSpecParser(tokens, null); 
```

它使用调试侦听器对象而不是端口，并且“null”表示您没有给它一个调试侦听器，因此调试输出被忽略。您可以编写自己的调试侦听器以将消息打印到控制台。

有关详细信息，请参阅 ANTLR 文档：[http ://www.antlr.org/api/Java/namespaces.html](http://www.antlr.org/api/Java/namespaces.html)

# .net - dotnet：如何获得字体的平均字符宽度？

> ID：308850
> 
> 赞同：5
> 
> 时间：2008-11-21T13:56:16.967
> 
> 标签：.net, fonts

Windows 窗体：

因为`System.Drawing`有一种方法可以获取字体高度。

```
Font font = new Font("Arial", 10 , FontStyle.Regular);
float fontHeight = font.GetHeight(); 
```

但是您如何获得其他文本指标，例如平均字符宽度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-21T13:59:06.570

使用 Graphics.MeasureString 方法

```
private void MeasureStringMin(PaintEventArgs e)
{

    // Set up string.
    string measureString = "Measure String";
    Font stringFont = new Font("Arial", 16);

    // Measure string.
    SizeF stringSize = new SizeF();
    stringSize = e.Graphics.MeasureString(measureString, stringFont);

    // Draw rectangle representing size of string.
    e.Graphics.DrawRectangle(new Pen(Color.Red, 1), 0.0F, 0.0F, stringSize.Width, stringSize.Height);

    // Draw string to screen.
    e.Graphics.DrawString(measureString, stringFont, Brushes.Black, new PointF(0, 0));
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-21T14:20:05.217

字体没有严格的平均宽度，因为字距调整可能会产生影响，具体取决于任何给定字母之前和之后的字母。

如果您想在固定宽度的情况下使用非固定大小的字体，您的主要选择是将字符间隔大写“W”字符的宽度。

其他人已经给出了获取指定字符串宽度的示例，但要回答您的问题，要获得可打印字符的真实平均值，您可能需要执行以下操作：

```
StringBuilder sb = new StringBuilder();

// Using the typical printable range
for(char i=32;i<127;i++)
{
    sb.Append(i);
} 

string printableChars = sb.ToString();

// Choose your font
Font stringFont = new Font("Arial", 16);

// Now pass printableChars into MeasureString
SizeF stringSize = new SizeF();
stringSize = e.Graphics.MeasureString(printableChars, stringFont);

// Work out average width of printable characters
double average = stringSize.Width / (double) printableChars.Length; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-21T14:24:56.877

棘手，因为您也应该使用字符频率。如果您曾经看过芬兰语及其所有的“i”和“l”，您会意识到即使是纯 ASCII 字体也没有明确定义的平均字符宽度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-21T13:59:24.213

我从未在 .NET 中看到过平均字符宽度属性。您可以使用 Graphics.MeasureString 或 TextRenderer.MeasureString 获取特定字体中特定字符串的宽度。

# java - Java中的视觉继承

> ID：308856
> 
> 赞同：1
> 
> 时间：2008-11-21T13:57:40.863
> 
> 标签：java, swing, ide, netbeans, visual-inheritance

我工作的团队在 Java 平台中表单的可视继承方面遇到了问题。

我们希望开发一个包含一些控件的基本 JFrame，并从该基本 JFrame 继承表单。Netbeans 6.1 的设计者不会在继承的控件中绘制基本窗体的控件，因此我们不能以我们想要的方式使用它。在执行时，继承的表单被很好地绘制，带有父控件。

Netbeans 设计师

有人解决了吗？我们应该改变IDE吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-21T18:46:15.197

AFAIK，马蒂斯并不是真的设计来创造继承的形式。它是为组合而设计的（即创建一个自定义的 JComponent 并将其放入您的 Matisse 表单中）。

表单设计器不使用 java 文件来创建表单，它使用“表单”文件。这不会被继承。如果您绝对需要使用继承（我不建议这样做），那么您需要将“表单”文件的内容复制到您的子类中。

通常，您应该创建某种类型的自定义 JPanel（使用或不使用 Matisse），然后将此表单放入您的 JFrame。任何需要重用的自定义代码/事件都应该附加到 JFrame 中，应该在 bean 中创建，然后添加到表单中。

Netbeans 7 正在考虑改进 Matisse 的代码生成。我建议将此作为增强请求放在[www.netbeans.org 上](http://www.netbeans.org)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-21T16:32:49.333

只是一般性评论，而不是对您的情况的真正答案 - 视觉组件不是为了继承而制作的。例如，查看 Sun 通过从 Component 继承所有内容所犯的可怕错误 - 现在您有一个无法使用 .add() 向其中添加项目的 JList。除非您可以履行整个超类契约（我只知道几个可以）更喜欢组合而不是继承。公开您计划实现的方法和“组件 getAsComponent()”方法，并明确声明不应直接更改组件。我发现这比思考“如果有人在我的组件中使用 add(JLabel) 或 setLayout() 该怎么办？”要容易得多。

关于您的具体困境 - 我在 IntelliJ IDEA 中使用 JFormDesigner，但它也可能适用。JFD 有一种使用组件 BeanInfo 信息的好方法（对于名为“MyThingy”的组件，信息类将是“MyThingyBeanInfo”）。使用该类，您可以定义许多仅在设计时使用的东西，以及特殊的绘画方法和其他细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-12-04T16:07:29.223

Jaguard，你必须更改访问var控件（右键单击控件，选择'customize code'，见窗口底部）

# java - 休眠自动发现和生成到 POJO 的数据库映射

> ID：308860
> 
> 赞同：2
> 
> 时间：2008-11-21T13:59:28.800
> 
> 标签：java, hibernate, automation, code-generation, pojo

是否有任何工具可以通过从数据库中收集信息来自动生成休眠 POJO？

在我正在使用的项目中第三次或第四次更改架构后，我制作了一个 perl 脚本来执行此操作，只是想知道是否有任何已建立的工具可以为我执行此操作，因为我的脚本相当粗糙并且需要对生成的文件`.java`和`.hbm.xml`文件进行一些调整。

例如（基于我的脚本所做的），有一个表`statement`：

```
Object_Name  Type_Name Base_Type Nulls Identity
------------ --------- --------- ----- --------
id           id_int    int       no    yes
id_user      id_tiny   tinyint   no    no
value        float     float     no    no 
```

我希望程序自动生成以下java：

```
package com.some.company.schema;

import java.io.Serializable;

public class Statement implements Serializable {
    private static final long serialVersionUID = 1227171190L;
    private Integer id;
    private User user;
    private Float value;

    public void setId(Integer id){
        this.id = id;
    }

    public Integer getId(){
        return this.id;
    }

    public void setUser(User user){
        this.user = user;
    }

    public User getUser(){
        return this.user;
    }

    public void setValue(Float value){
        this.value = value;
    }

    public Float getValue(){
        return this.value;
    }
} 
```

以及对应的Hibernate映射文件：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
    <class name="com.some.company.schema.Statement" table="statement">
        <id name="id" column="id">
            <generator class="native" />
        </id>
        <many-to-one name="user" class="com.some.company.schema.User" column="id_user" not-null="true" />
        <property name="value" column="value" not-null="true" />
    </class>
</hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-04T12:21:02.147

参见[hibernate逆向工程](https://docs.jboss.org/tools/latest/en/hibernatetools/html/reverseengineering.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-21T20:10:41.360

Netbeans 在生成将与 hibernate-annotations/entitmanager 一起使用的注释实体方面做得很好。我还在 Eclipse 中使用了 Hibernate Tools/JBoss IDE 来生成它们，并且效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-21T14:16:07.863

查看休眠工具

[http://www.hibernate.org/hib_docs/tools/reference/en/html_single/](http://www.hibernate.org/hib_docs/tools/reference/en/html_single/)

不确定从模式到 Pojos，但肯定是从 hbm.xml 文件到 pojos。

Maven 插件也可用，使自动化构建成为梦想 Paul

# cvs - CVS 远程标记

> ID：308872
> 
> 赞同：3
> 
> 时间：2008-11-21T14:03:07.327
> 
> 标签：cvs

我想远程标记给定日期和时间的 CVS 存档，这似乎受 -D 参数支持，但我只能找到用于日期的格式示例：

```
cvs -d :pserver:server:/repo rtag -D 20081121 module 
```

日期似乎采用 YYYYMMDD 的格式，但我似乎无法计算出时间的格式，YYYYMMDDHHMM 收到以下错误：

```
cvs [rtag aborted]: Can't parse date/time: 200811210000 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-21T14:31:58.657

使用[ISO 8601 日期格式](http://www.saqqara.demon.co.uk/datefmt.htm)(CCYY-MM-DD)，例如 2008-11-21。如果包含空格，请添加引号，例如：“2008-11-21 00:00”。

还有其他允许的日期格式。参见[http://cvsbook.red-bean.com/，pdf](http://cvsbook.red-bean.com/)版本的第 67 页。

# mysql - MySQL：如何使用 ODBC 获取表中的字段列表

> ID：308876
> 
> 赞同：1
> 
> 时间：2008-11-21T14:04:13.410
> 
> 标签：mysql, odbc

我正在通过一个终端连接到 MySQL DB，该终端只有一个程序与 MySQL DB 的 ODBC 连接。我可以在程序中放入查询，但不能直接访问 MySQL。

我有一种方法可以查询数据库以获取表中的字段列表，而不是

```
select * from table 
```

??

（不知道为什么，但是选择返回错误）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-21T14:10:19.090

```
SELECT
  COLUMN_NAME
FROM
  INFORMATION_SCHEMA.COLUMNS
WHERE
  TABLE_NAME       = 'MyTable'
  AND TABLE_SCHEMA = 'SchemaName'  /* added upon Bill Karwin's comment (thanks) */ 
```

有关 INFORMATION_SCHEMA 的更多信息在[文档中](http://dev.mysql.com/doc/refman/5.1/en/columns-table.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-21T14:06:53.043

```
describe *tablename* 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-21T18:11:40.710

这适用于大多数数据库：

从 1=0 的表中选择 *

结果集中没有数据，但确实获得了列元数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-08-06T13:15:13.497

这：

```
SHOW COLUMNS FROM Tablename 
```

列出表中的字段及其属性（数据类型、是否允许空值、该字段是否为主键、已设置的默认值等）

# c - 什么是嵌入式 Linux 的好的开源消息总线？

> ID：308892
> 
> 赞同：6
> 
> 时间：2008-11-21T14:11:14.517
> 
> 标签：c, linux, embedded, ipc

我正在寻找适合嵌入式 Linux 设备（Linux 和 uClinux）的良好开源消息总线。

它需要满足以下条件：

*   由于 uClinux 仅支持静态链接，因此必须是自由软件和 LGPL 或更自由的许可证
*   必须有 C API
*   必须具有相对较小的占用空间，并且不依赖于第三方库
*   必须兼容 Linux/uClinux 2.4.22+
*   应该经过良好的测试，最好有一个现有的测试框架设置
*   应该有一个有据可查的协议
*   应该可以移植到其他平台

消息总线主要由我们系统上的应用程序使用，以传达配置参数等，因此它不需要满足实时要求。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-21T15:33:54.460

有[D-Bus](http://www.freedesktop.org/wiki/Software/dbus "总线")。它在用户空间中运行。虽然它通常需要一个守护进程（但也许你可以让进程专门相互连接，而不是通过中央守护进程）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-21T15:00:12.703

这完全取决于您的架构。您是否打算通过背板向集群中的其他节点发送消息，或者这一切都在单个节点中，但在不同的地址空间中？

如果是后者，那么就像卡森说的：`man mq_overview`。

如果是前者，那么首先看看您的嵌入式 linux 供应商。许多供应商将提供某种分布式消息传递库。如果做不到这一点，请查看[0MQ](http://www.zeromq.org/)或[MPICH2 MPI](http://www.mcs.anl.gov/research/projects/mpich2/)库。

更新：我也应该补充一点，我去年的大部分时间都花在为分布式处理框架编写这样的 API 上，我可以告诉你 POSIX 兼容性值得保留。尽可能使用 POSIX 消息队列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-21T14:53:37.380

这听起来很适合[SYSV 或 POSIX 消息队列](http://linux.die.net/man/7/mq_overview)。它们可以满足您列出的所有需求。POSIX 较新，因此它们不符合内核要求，但 SYSV 位于较旧的内核中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-23T09:30:46.377

如果你的意思是 IPC，socket 对 uclinux 工作得很好。

# asp.net - 表单身份验证不应该超时？

> ID：308893
> 
> 赞同：4
> 
> 时间：2008-11-21T14:12:15.890
> 
> 标签：asp.net, session, forms-authentication

我遇到了一个让我发疯的 ASP.NET 应用程序问题。

当用户在一段时间内使页面处于非活动状态时，会话超时并且由于会话变量无法解析而引发错误（无论如何我都会错误捕获此问题，但这不是问题）。我编写了一个“除颤器”，它将在会话超时的一半到期后执行不可见的回发，这似乎工作正常——即使会话超时设置为 20 分钟，让应用程序停留 30 分钟也不会导致错误。然而，今天早上，其他开发人员之一遇到了超时——这怎么可能？

在进一步调查中，我认为当超过 Forms Authentication 超时时会出现问题 - 即使 defribulator 已经（显然）保持会话处于活动状态。我已经读过，只有在指定超时期限的一半之后发生回发时才会重新发出身份验证票，这不是问题，因为 derib 将在超时期限的后半段发出请求 - 那么为什么是不是重发了吗？

我想我可以通过将身份验证超时设置为 8 小时左右来解决这个问题，但这是一个糟糕的解决方案。

任何人都可以对此有所了解吗？

提前致谢

[编辑 24/11/2008] 审查日志文件已被证明是有启发性和令人困惑的。我可以看到除颤器在 10 分钟不活动后触发，但是虽然 Session_Id 似乎始终保持一致，但表单身份验证票证 ID 会发生变化 - 不确定它是否应该如此。我现在正在制定一个测试计划，并会在我完成后回复。感谢迄今为止提供反馈的所有人。

[编辑 2008 年 11 月 24 日] 好吧，我很难过 - 目前一切似乎都运行良好！当 derib 运行（ID 更改）并且正在维护会话时，正在重新生成身份验证票证。是服务器问题吗 - 无法判断。我以前遇到过这个问题，但从来没有深入了解它，这非常令人沮丧——当然它不应该这么困难。我将不得不暂时放弃这一点，因为我必须继续处理应用程序的其他一些方面。我只需要围绕这个问题编写代码——这可能永远不会在客户网站上发生。

再次感谢大家的意见 - 如果我取得任何进展，我会在这里发布。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-21T15:01:13.903

这也可能在 iis 回收或终止应用程序池时发生。

您可能需要检查[表单身份验证故障排除](http://support.microsoft.com/kb/910439/)可能是客户端丢失了他们的 cookie。

如果您手动生成身份验证票证，则需要在代码中设置超时，而不是在 web.config

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-21T15:02:56.783

不是说显而易见的，而是：

1.  Session 和 FormsAuthentication 超时是否设置为相同的值？
2.  `slidingExpiration`设置`true`为?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-21T19:33:32.790

您是否检查了导致问题的应用程序池或工作进程回收？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-21T15:09:58.173

感谢大家的回复：我已经在 web.config 中明确地将slidingExpiration 设置为true，但没有任何效果。

超时值为： 会话：20 分钟 FormsAuthentication：60 分钟

我保留了会话超时，并将 FormsAuthentication 减少到 12 分钟以进行测试。每隔 10 分钟就会“砰”的一声。如果我让页面处于非活动状态 14 分钟，然后单击一个按钮，我会遇到问题#edit：但并非每次看起来都如此！#。

# struts - 如何获取传递过来的参数 M 从jsp页面发送参数，代码为 <s:url id="url" action="searchAction"> <s:param name="id">"${cgConsultant.id}"</s:param> </s:ur 问问题 Vinayak.B 问问题 2008-11-21T14:15:11.310 9248 次 This question shows research effort; it is useful and clear 3 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. M 从jsp页面发送参数，代码为 <s:url id="url" action="searchAction"> <s:param name="id">"${cgConsultant.id}"</s:param> </s:url> 我在网址中得到它作为.. http://localhost:8080/search/searchAction.html?id="1" 我需要在行动课上得到它我如何得到它..请为此提出任何建议.. 只需声明一个 public void setId(String id) { } 方法并给它一个实现。 strutstags 4 1 回答 1 This answer is useful 2 只需声明一个 public void setId(String id) { } 方法并给它一个实现。 于 2008-11-21T14:16:53.133 回答 Related 1 html - 如何在jmeter中编写多个正则表达式一个gsp中的标签，并确定测试人员将采用哪个标签值在我的代码中有两个选择标签，所以请告诉我如何根据每个选择标签中不同的名称为每个标签编写两个正则表达式。所以请尽早给我答复。<select id="academicYear" name="academicYear"> <option value="2010">2010</option> <option value="2011">2011</option 4 android - SQlite 数据库：无法找到上下文 1 java - 用于操作 *.properties 文件的 java 库 7 php - 即使在同一个文件夹中，php include 也不起作用 2 jquery-mobile - 如何为动态创建的列表视图的每个实例更改列表视图的初始化选项 1 xml - 如何在flex中的TextArea中显示XML格式数据 1 python - Python，发送主题中带有特殊字符的电子邮件 1 c# - __RequestVerificationToken 有什么用？ 1 iphone - 关闭或离开视图控制器时如何将数据插入sqlite3数据库？ 1 apache - .htaccess 重写到子文件夹 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：308898
> 
> 赞同：3
> 
> 时间：
> 
> 标签：struts, tags

M 从jsp页面发送参数，代码为

```
 <s:url id="url" action="searchAction">
    <s:param name="id">"${cgConsultant.id}"</s:param>
     </s:url> 
```

我在网址中得到它作为..

```
http://localhost:8080/search/searchAction.html?id="1" 
```

我需要在行动课上得到它我如何得到它..请为此提出任何建议..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-21T14:16:53.133

只需声明一个

```
public void setId(String id) {
} 
```

方法并给它一个实现。

# sql-server - 是否应该有一个读取查询的事务？

> ID：308905
> 
> 赞同：44
> 
> 时间：2008-11-21T14:19:52.067
> 
> 标签：sql-server, transactions, crud

我一直在阅读一些开发人员/数据库管理员建议在所有数据库调用中使用事务，甚至是只读调用。虽然我了解在事务中插入/更新，但在事务中读取有什么好处？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2008-11-21T14:22:34.743

因此，您可以获得一致的数据库视图。想象一下，您有两个相互链接的表，但由于某种原因，您在伪代码中做了 2 次选择：

```
myRows = query(SELECT * FROM A)
moreRows = query(SELECT * FROM B WHERE a_id IN myRows[id]) 
```

如果在两个查询之间，有人更改 B 以删除一些行，那么您将遇到问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-11-22T04:58:08.847

与 RoBorg 所说的类似，您将使用事务执行 SELECTS 以防止读取语句之间的幻像数据。**但**重要的是要注意 SQL Server 中的默认事务隔离级别是 READ COMMITTED，它只会防止脏读；为了防止幻像数据，您至少必须使用可重复读取。“仅在必要时使用此选项。”

[http://msdn.microsoft.com/en-us/library/ms173763.aspx](http://msdn.microsoft.com/en-us/library/ms173763.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-21T15:36:17.933

过去几分钟我一直在检查这个，因为这是我应该了解更多的事情。这是我发现的。

如果您想在某人正在阅读记录时锁定该行并且不希望它被修改或读取，则事务在选择周围很有用。例如运行这些查询：

（在查询窗口 1 中）

BEGIN TRAN SELECT * FROM MYTABLE WITH (ROWLOCK XLOCK) WHERE ID = 1

（在查询窗口 2 中）

从 ID = 1 的 MYTABLE 中选择 *

（在窗口 1 中运行之前，查询窗口 2 不会返回结果）

提交翻译

有用的链接：

[http://msdn.microsoft.com/en-us/library/aa213039.aspx](http://msdn.microsoft.com/en-us/library/aa213039.aspx)

[http://msdn.microsoft.com/en-us/library/aa213026.aspx](http://msdn.microsoft.com/en-us/library/aa213026.aspx)

[http://msdn.microsoft.com/en-us/library/ms190345.aspx](http://msdn.microsoft.com/en-us/library/ms190345.aspx)

我的目标是阻止一些东西——在添加 XLOCK 之后它终于起作用了。简单地使用 ROWLOCK 是行不通的。我假设它正在发出共享锁（并且数据已被读取）..但我仍在探索这一点。

添加 - WITH (UPDLOCK ROWLOCK) - 将允许您选择行并将其锁定为更新，这将有助于并发。

*注意表格提示。*如果您开始随意应用它们，即使您的应用程序只有少量用户，您的系统也会变得缓慢。这是我在研究之前就知道的一件事；）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-21T14:23:40.997

我想说，事务的主要目的之一是在出现任何问题时提供回滚潜力——这在简单阅读时已经失效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-21T14:25:31.213

我发现“事务”在不同的 SQL 服务器上表现得非常不同。在某些情况下，启动事务会锁定所有其他连接，使其无法执行任何 SQL，直到事务提交或回滚 (MS SQLServer 6.5)。其他的没有任何问题，只有在有修改的时候才加锁（oracle）。锁甚至可以扩展到仅包含您的更改 - 单元锁/行锁/页锁/表锁。

通常，我仅在必须维护多个插入/删除/更新语句之间的数据完整性时才使用事务。尽管如此，我还是更喜欢使用 DB 定义的级联删除来实现这一点，以便数据库自动且原子地执行此操作。

如果您可以预见到要回滚多个修改的情况，请使用事务，否则，数据库将执行原子更新，而无需额外的代码来处理它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-06T11:45:12.153

为读取和插入而持有多个事务的另一个很好的理由是，您希望根据从选择查询中获得的数据插入记录，并且您还希望提交插入的每个 X 行。

两笔交易：

1.  对于读取\选择。
2.  用于插入并提交每 X 行。

将让你正确地做到这一点，而一个事务不分离读取和写入不会让你在不失去读者的情况下进行提交。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-12T12:09:22.883

我建议您阅读快照隔离作为读取数据的事务有用性的示例。

此外，这里是 Martin Kleppmann 所著的 Designing Data-Intensive Applications 一书的摘录，其中指出了两种情况，即使您只从数据库中读取数据，也需要一些类似于事务的行为：

> **备份**
> 进行备份需要制作整个数据库的副本，这在大型数据库上可能需要数小时。在备份过程运行期间，将继续对数据库进行写入。因此，您最终可能会得到包含旧版本数据的备份的某些部分，而其他部分包含更新版本的数据。如果您需要从此类备份中恢复，则不一致（例如消失的钱）将成为永久性的。

> **分析查询和完整性检查**
> 有时，您可能希望运行一个扫描大部分数据库的查询。此类查询在分析中很常见（请参阅第 90 页的“事务处理或分析？”），或者可能是定期完整性检查以确保一切正常（监控数据损坏）的一部分。如果这些查询在不同时间点观察数据库的某些部分，它们可能会返回无意义的结果。

# sql-server - 我怎样才能为此使用 SQL Pivot？

> ID：308908
> 
> 赞同：1
> 
> 时间：2008-11-21T14:20:22.893
> 
> 标签：sql-server, sql-server-2005, tsql, pivot

我有一个按以下方式组织的数据集：

```
Timestamp|A0001|A0002|A0003|A0004|B0001|B0002|B0003|B0004 ...
---------+-----+-----+-----+-----+-----+-----+-----+-----
2008-1-1 |  1  |  2  | 10  |   6 |  20 |  35 | 300 |  8
2008-1-2 |  5  |  2  |  9  |   3 |  50 |  38 | 290 |  2    
2008-1-4 |  7  |  7  | 11  |   0 |  30 |  87 | 350 |  0
2008-1-5 |  1  |  9  |  1  |   0 |  25 | 100 |  10 |  0
... 
```

其中 A0001 是项目 #1 的值 A，B0001 是项目 #1 的值 B。一个表可以有60多个不同的项目，每个项目有一个A值列和一个B值列，即表中总共有120多个列。

我想要得到的是一个 3 列结果（项目索引、A 值、B 值），它对每个项目的 A 和 B 值求和：

```
Index | A Value | B Value
------+---------+--------
 0001 |   14    |   125
 0002 |   20    |   260
 0003 |   31    |   950
 0004 |    9    |    10
 .... 
```

当我从列到行时，我希望解决方案中有一个支点，但我不确定如何充实它。部分问题是如何去除 A 和 B 以形成索引列的值。另一部分是我以前从未使用过 Pivot，所以我也对基本语法感到困惑。

我认为最终我需要有一个多步骤解决方案，首先将总和构建为：

```
ColName | Value
--------+------
A0001   |  14
A0002   |  20
A0003   |  31
A0004   |   9
B0001   | 125
B0002   | 260
B0003   | 950
B0004   |  10 
```

然后修改 ColName 数据以去除索引：

```
ColName | Value | Index | Aspect
--------+-------+-------+-------
A0001   |  14   | 0001  |  A
A0002   |  20   | 0002  |  A
A0003   |  31   | 0003  |  A
A0004   |   9   | 0004  |  A
B0001   | 125   | 0001  |  B
B0002   | 260   | 0002  |  B
B0003   | 950   | 0003  |  B
B0004   |  10   | 0004  |  B 
```

最后自加入将 B 值向上移动到 A 值旁边。

要得到我想要的东西，这似乎是一个漫长的过程。因此，我正在寻求关于我是否走在正确道路上的建议，或者是否有另一种我已经忽略的方法可以让我的生活变得更加轻松。

注 1) 解决方案必须在 MSSQL 2005 上的 T-SQL 中。

注2) 表格的格式不能更改。

**编辑**我考虑过的另一种方法在每列上使用 UNION 和单独的 SUM()：

```
SELECT '0001' as Index, SUM(A0001) as A, SUM(B0001) as B FROM TABLE
UNION
SELECT '0002' as Index, SUM(A0002) as A, SUM(B0002) as B FROM TABLE
UNION
SELECT '0003' as Index, SUM(A0003) as A, SUM(B0003) as B FROM TABLE
UNION
SELECT '0004' as Index, SUM(A0004) as A, SUM(B0004) as B FROM TABLE
UNION
... 
```

但是这种方法看起来也不是很好

**编辑** 到目前为止，有两个很好的回应。但我想在查询中再添加两个条件:-)

1）我需要根据一系列时间戳（minv < timestamp < maxv）选择行。

2) 我还需要有条件地选择处理时间戳的 UDF 上的行

使用 Brettski 的表名，上述内容是否会转换为：

```
...
(SELECT A0001, A0002, A0003, B0001, B0002, B0003 
 FROM ptest 
 WHERE timestamp>minv AND timestamp<maxv AND fn(timestamp)=fnv) p
unpivot
(val for item in (A0001, A0002, A0003, B0001, B0002, B0003)) as unpvt
... 
```

鉴于我有条件地添加了 fn() 要求，我认为我还需要按照 Jonathon 的建议走动态 SQL 路径。特别是因为我必须为 12 个不同的表构建相同的查询——所有表的样式都相同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-21T16:31:04.593

同样的答案在这里，这很有趣：

```
-- Get column names from system table
DECLARE @phCols NVARCHAR(2000)
SELECT @phCols = COALESCE(@phCols + ',[' + name + ']', '[' + name + ']') 
    FROM syscolumns WHERE id = (select id from sysobjects where name = 'Test' and type='U')

-- Get rid of the column we don't want
SELECT @phCols = REPLACE(@phCols, '[Timestamp],', '')

-- Query & sum using the dynamic column names
DECLARE @exec nvarchar(2000)
SELECT @exec =
'
    select
        SUBSTRING([Value], 2, LEN([Value]) - 1) as [Index],
        SUM(CASE WHEN (LEFT([Value], 1) = ''A'') THEN Cols ELSE 0 END) as AValue, 
        SUM(CASE WHEN (LEFT([Value], 1) = ''B'') THEN Cols ELSE 0 END) as BValue
    FROM
    (
        select *
        from (select ' + @phCols + ' from Test) as t
        unpivot (Cols FOR [Value] in (' + @phCols + ')) as p
    ) _temp
    GROUP BY SUBSTRING([Value], 2, LEN([Value]) - 1)
'
EXECUTE(@exec) 
```

您不需要在此列中硬编码列名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-21T16:12:54.443

好的，我想出了一个可以帮助您入门的解决方案。组装起来可能需要一些时间，但会表现良好。如果我们不必按名称列出所有列，那就太好了。

基本上这是使用 UNPIVOT 并将该产品放入临时表中，然后将其查询到您的最终数据集中。当我把它放在一起时，我将我的表命名为 ptest，这是一个包含所有 A0001 等列的表。

```
-- Create the temp table
CREATE TABLE #s (item nvarchar(10), val int)

-- Insert UNPIVOT product into the temp table
INSERT INTO  #s (item, val)
SELECT item, val
FROM
(SELECT A0001, A0002, A0003, B0001, B0002, B0003
FROM ptest) p
unpivot
(val for item in (A0001, A0002, A0003, B0001, B0002, B0003)) as unpvt

-- Query the temp table to get final data set
SELECT RIGHT(item, 4) as item1,
Sum(CASE WHEN LEFT(item, 1) = 'A' THEN val ELSE 0 END) as A,
Sum(CASE WHEN LEFT(item, 1) = 'B' THEN val ELSE 0 END) as B
from #s
GROUP BY RIGHT(item, 4)

-- Delete temp table 
drop table #s 
```

顺便说一句，谢谢你的问题，这是我第一次使用 UNPIVOT。一直想要，只是从来没有需要。

# python - Python 数据结构开销/性能

> ID：308912
> 
> 赞同：3
> 
> 时间：2008-11-21T14:22:56.333
> 
> 标签：python, optimization

在 Python 中使用列表而不是字典而不是元组有任何性能优势吗？

如果我正在优化速度，是否有任何理由偏爱一个而不是另一个？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-11-21T14:47:13.103

富有的，

列表和字典是适合不同需求的野兽。确保不要将列表用于 dicts 散列完美的线性搜索，因为它的速度较慢。此外，如果您只需要遍历元素列表，请不要使用 dicts，因为它比列表占用更多空间。

这听起来很明显，但是由于更有效的编译代码布局等，从算法上选择正确的数据结构比微优化具有更高的性能增益。如果您在 O(n) 中的列表中搜索而不是在 O( 1），微优化不会拯救你。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-11-21T14:31:28.627

对于少量元素，元组的构建速度会稍快一些。尽管实际上大部分收益将在内存使用而不是 CPU 周期中，因为元组比列表需要更少的空间。

话虽如此，性能差异应该可以忽略不计，一般来说，在您分析代码并确定一段代码是瓶颈之前，您不应该担心这些类型的微优化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-21T14:40:36.283

最大的区别是元组是不可变的，而列表和字典是可变的数据结构。这意味着元组也更快，所以如果你有一个不变的项目集合，你应该更喜欢它们而不是列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-21T21:52:54.303

请参阅以下内容。

*   [加速 Python](https://stackoverflow.com/questions/172720/speeding-up-python)
*   [什么时候开始优化代码](https://stackoverflow.com/questions/178045/when-should-you-start-optimising-code)
*   [过早优化真的是万恶之源吗？](https://stackoverflow.com/questions/211414/is-premature-optimization-really-the-root-of-all-evil)
*   [元组比 Python 中的列表更有效吗？](https://stackoverflow.com/questions/68630/are-tuples-more-efficient-than-lists-in-python)

# python - pygtk glade 问题：为什么这个简单的脚本不起作用？

> ID：308913
> 
> 赞同：1
> 
> 时间：2008-11-21T14:22:56.677
> 
> 标签：python, gtk, pygtk, glade

我一直在编写一个使用 glade 来组合 UI 的小型 pygtk 应用程序。我已经创建了几个可以工作的窗口，但由于某种原因，这个窗口不起作用。我得到以下回溯：

```
Traceback (most recent call last):
  File "test.py", line 7, in <module>
    class TestClass:
  File "test.py", line 10, in TestClass
    self.wTree.signal_autoconnect(self)
NameError: name 'self' is not defined 
```

下面是 test.py 的内容：

```
#!/usr/bin/env python

import pygtk
import gtk
import gtk.glade

class TestClass:
    def __init__(self):
        self.wTree = gtk.glade.XML("test.glade")
        self.wTree.signal_autoconnect(self)

    def on_TestClass_destroy(self, widget, data):
        gtk.main_quit()

if __name__ == "__main__":
    window = TestClass()
    gtk.main() 
```

这是林间空地文件 test.glade：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE glade-interface SYSTEM "glade-2.0.dtd">
<!--Generated with glade3 3.4.5 on Fri Nov 21 08:53:53 2008 -->
<glade-interface>
  <widget class="GtkWindow" id="TestWindow">
    <property name="visible">True</property>
    <property name="title" translatable="yes">Test Window</property>
    <signal name="destroy" handler="on_TestClass_destroy"/>
    <child>
      <placeholder/>
    </child>
  </widget>
</glade-interface> 
```

奇怪的是，如果我拿出 signal_autoconnect(self) 调用，窗口就会打开。但是，如果我用“self.on_TestClass_destroy(self,None,None)”替换该调用，它会返回相同的 NameError 异常。

我真的不明白为什么这不起作用，因为我创建了其他几个可以正常工作的窗口类。

以下代码对这里的任何人都有效吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-21T14:49:35.983

该代码、窗口和信号连接在这里工作正常。

调用信号处理程序时有一个小错误。信号处理程序不应有数据参数，因为只有小部件作为参数传递。

```
def on_TestClass_destroy(self, widget):
    gtk.main_quit() 
```

数据参数仅是在连接时提供的参数，以防您需要信号处理程序的额外状态。

# c# - 为什么 Visual Studio 中的循环引用是一种不好的做法？

> ID：308915
> 
> 赞同：31
> 
> 时间：2008-11-21T14:23:50.513
> 
> 标签：c#, visual-studio

# 为什么 Visual Studio 中的循环引用是一种不好的做法？

首先，我将描述一个示例，说明如何在 Visual Studio 中使用 C# 发生这种情况，因为 VS 通常会通知您是否有循环引用并阻止它。

首先，仅根据 Visual Studio 和 .Net 提供给您的代码创建**实用程序类。**然后，创建一个依赖于**Utilities的****E-mail**类。不是将两个项目都添加到单个解决方案中，而是创建一个新解决方案并添加对*Utilities.dll*的引用。然后，一段时间后，有人决定他们希望**Utilities**类发送电子邮件并添加对*Email.dll*的引用。Visual Studio 非常乐意让您执行此操作，但现在如果没有其中一个二进制文件，源代码将无法按原样编译。

 ******在我的工作地点，在进行开发时复制和粘贴二进制文件是标准程序，然后只构建您正在处理的项目。这导致代码库中至少有一个循环引用被忽视了 3 年多。

这对我来说似乎是一个非常糟糕的做法，因为如果没有 DLL，就无法从源代码构建任何一个项目。这个论点对我一起工作的“实际”人来说有点平淡，因为我们似乎不太可能同时丢失所有二进制文件的副本。二进制文件在任何时候都不会存储在版本控制中，这只会让我更加担心。

这似乎是应该避免的情况，但不是构成任何明显威胁的情况。**项目之间的循环引用真的很重要，还是我夸大了它？**

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2008-11-21T14:33:37.810

是的，正是由于您所说的原因，这是一种不好的做法-您无法从源代码进行重建。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2008-11-21T15:55:54.697

这是过度模块化的症状之一。

我曾经在一家公司工作过，有大约 20 个开发人员和 SVN 存储库中有 60 多个不同的活动项目。每个项目都有自己的构建脚本并生成一个 JAR 文件，该文件是至少六个左右其他项目的依赖项。管理所有这些依赖项非常复杂，以至于我们浪费了大量时间尝试（不成功，我可能会添加）设置 maven 项目以自动获取所有这些小型微型项目的所有正确库（和正确版本）。

（对我来说）有趣的是它实际上只是一个项目，甚至不是我们分发给外界的东西。它是一个托管应用程序，具有 Web 前端，在单个服务器集群上运行。

嘘。

该架构的另一个副作用是，相同类型的功能在几个不同的项目中一遍又一遍地重复（并不总是使用相同的算法或结果）。我认为部分原因是因为人们不想仅仅为了访问其中的一些类而对整个子项目引入新的依赖。但我认为另一个原因是人们只是不知道哪些代码存在于哪里，而不是去寻找他们想要重用的代码，他们只是在自己的项目中重写它。

当然，模块化通常是一件好事。

但就像所有美好的事物一样，它可以被带到荒谬的极端。

我的建议是找到那些循环依赖并将项目合并成更大的块，因为当前的项目分解可能代表错误的模块化。最好将您的大项目分成几个分离良好的模块，而不是让无数的伪模块在逻辑耦合的类之间创建人为的边界。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2008-11-21T15:23:02.860

除了构建问题，循环引用总是表明存在设计缺陷。在 .NET 中，循环关系使两个程序集有效地成为一个程序集。如果没有另一个人不能独立生活，那么单独构建它们只是一种练习 - 它不会改变它们一起代表一个整体组件的事实。

我已经注意到很多实用程序集。必须是反模式。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-11-21T14:29:28.740

我要向您的同事提出的问题是：

好的，我们不太可能同时丢失所有的二进制文件。但是，告诉我，这种方法有什么好处？

如果他们有什么不同于“我们一直这样做”的东西，我想听听。而且，众所周知，“我们一直都是这样做的”不是一个好的理由，他们不应该为它辩护。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-21T15:29:23.830

循环依赖是不好的，因为：

*   项目 A 引用项目 B
*   当项目B发生变化时，项目A需要重建
*   现在如果项目 B 也引用项目 A
*   然后当其中一个发生变化时，另一个需要重建
*   这导致另一个需要重建
*   这导致另一个需要重建
*   等等

这可能是构建过程中的无限循环

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-06-24T21:48:54.307

如果您无法说服“务实”的同事这是一种不好的做法，请提供一个实用的解决方案：删除这些循环引用并且构建时间将会减少，因为可以避免大量不必要的重建。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-21T14:35:59.710

嗯，我认为就 OP 问题而言，关于 从头开始**构建项目，这是不好的做法，因为：**

1.  无法从源代码/从头开始构建 - 如果我维护多个版本的代码怎么办。在每个版本之间，对每个库都进行了一些更改。我可以可行地维护这些并发版本的唯一方法是现在将编译的二进制文件存储在我的版本控制中。这也意味着每个库版本之间的比较要困难得多。（我需要找出正在使用的版本，然后查看该库的实际源代码，而不仅仅是源本身的直接差异。
2.  可能更难向具有增量补丁版本的客户推出补丁。在哪里和什么补丁？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-17T18:46:36.103

是的，这很重要，因为它会在项目生命周期的某个阶段导致无法管理的组件组合，并且很可能会导致某种形式的构建错误和很可能会出现一些部署错误。

Visual Studio 2008 明确禁止解决方案中项目（不​​是二进制文件）之间的循环引用。正如您所说，二进制文件并非如此。我相信这是因为 VS2008 期望二进制引用是独立管理的，并且它期望您独立构建这些项目。一般来说，这意味着所有二进制引用都应该被视为代表一种独特的单向关系（在您的代码和二进制文件之间）的第三方组件。

此外，如果您的所有项目都使用 VB 或 C#，MSBuild 允许您使用 SLN 文件来构建所有内容。这允许创建超级解决方案文件，这是自动构建过程的理想选择。问题是，为了使这样的主解决方案文件能够工作，SLN 中的所有项目都必须使用项目引用。因此，为了利用这一点，根据定义，Microsoft 希望您不要使用循环引用，因为 Visual Studio IDE 明确禁止它们（用于项目引用）。

Scott Hanselman 在以下帖子中引用了一个 uber-solution 文件：
Hack: Parallel MSBuilds from inside the Visual Studio IDE
[http://www.hanselman.com/blog/CategoryView.aspx?category=MSBuild](http://www.hanselman.com/blog/CategoryView.aspx?category=MSBuild)

# java - 如何在 Hibernate 中为 ID 使用 Oracle 函数

> ID：308924
> 
> 赞同：0
> 
> 时间：2008-11-21T14:26:16.593
> 
> 标签：java, oracle, hibernate, sequences

直到最近，我们还使用 Oracle 序列来生成表的 ID。现在已更改，现在由 Oracle 函数计算新 ID。这意味着我的应用程序需要进行更改以适应新情况。该应用程序是一个 Spring/Hibernate webApp，它访问 Oracle 数据库。这是在 hbm.xml 中配置的，如下所示：

```
<class name="TableHib" table="TABLENAME" >
    <id name="Id" type="java.lang.Long">
        <column name="ID" precision="22" scale="0" />
        <generator class="sequence">
            <param name="sequence">SEQTABLE</param>
        </generator>
    </id> 
```

问题当然是：使用 Oracle 函数的结果作为 ID 的新值的解决方案是什么？

非常感谢您的帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-21T14:45:47.757

你能写一个Java类来获取Oracle函数的值吗？如果是这样，您应该能够将该 Java 类定义为您的`<generator class>`

**编辑：**要从 Java 调用 Oracle 函数，看看这是否适合您： [Call Java Oracle Functions From Java program](http://www.javabeat.net/tips/113-call-java-oracle-functions-from-java-program.html)并查看[Java CallableStatement API](http://java.sun.com/j2se/1.5.0/docs/api/java/sql/CallableStatement.html)

# authentication - 有没有使用 CardSpace 的网站？

> ID：308925
> 
> 赞同：1
> 
> 时间：2008-11-21T14:26:31.303
> 
> 标签：authentication, openid, identity, cardspace

我很想知道是否有任何网站将 CardSpace 作为替代身份验证。我当然想看看它与使用 OpenID 有何不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-21T15:41:31.403

使用信息卡的一个例子是 OpenID 提供商 JanRain，它[允许使用信息卡](http://blog.janrain.com/2007/10/myopenid-adds-information-card-support.html)对其 myOpenID 服务进行身份验证

还应该注意的是，OpenID 用于*身份，并将**身份验证*组件留给提供者。一些提供商使用简单的用户名/密码，而其他提供商则提供更安全的解决方案，例如信息卡或 Vidoop 使用的 ImageShield[技术](http://www.vidoop.com)。

信息卡/CardSpace 和 OpenID 不是互斥系统。

# c# - 在 .NET 中验证 XPath

> ID：308926
> 
> 赞同：15
> 
> 时间：2008-11-21T14:27:05.420
> 
> 标签：c#, .net, xpath

如何验证给定的 xpath 字符串在 C#/.NET 中是否有效？

我不确定只运行 XPath 并捕获异常是一个有效的解决方案（暂时搁置我喉咙里的胆汁）——如果明天我遇到一些我没有测试过的其他输入怎么办？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-11-21T14:36:14.123

> 如何验证给定的 XPath 字符串在 C#/.NET 中是否有效？

您尝试从中构建一个`XPathExpression`并捕获异常。

```
try 
{
    XPathExpression.Compile(xPathString);
}
catch (XPathException ex)
{
    MessageBox.Show("XPath syntax error: " + ex.Message);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-21T15:19:54.363

答案与 Tomalak 所写的非常接近（修复了编译错误并将强制正文放入 XML）：

```
public static class XPathValidator
{
    /// <summary>
    /// Throws an XPathException if <paramref name="xpath"/> is not a valid XPath
    /// </summary>
    public static void Validate(string xpath)
    {
        using (MemoryStream stream = new MemoryStream(Encoding.UTF8.GetBytes("<xml></xml>")))
        {
            XPathDocument doc = new XPathDocument(stream);
            XPathNavigator nav = doc.CreateNavigator();
            nav.Compile(xpath);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-10-30T14:13:59.490

对于比[@Tomalak's answer](https://stackoverflow.com/a/308953/225292)更短的版本，您可以使用[XPathExpression.Compile](http://msdn.microsoft.com/en-us/library/ms163317%28v=vs.80%29.aspx)方法：

```
string xpath = "/some/xpath";

try
{
    XPathExpression expr = XPathExpression.Compile(xpath);
}
catch (XPathException)
{

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-21T14:43:21.737

使用“温和”的正则表达式过滤掉完整的垃圾。如果它通过了正则表达式，只需执行查询并捕获异常，就像上面提到的......

# reporting-services - SSRS 报告中的单选按钮

> ID：308928
> 
> 赞同：6
> 
> 时间：2008-11-21T14:27:38.603
> 
> 标签：reporting-services, report, radio-button

如何在 SSRS 报告中添加单选按钮作为我的参数类型？

在此先感谢，安娜

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-08-15T14:50:25.290

可以这样做，但仅限于布尔参数 - 即您只能有 True/False，而不是单选选项的自定义列表。

将参数添加到“布尔”类型的报告中。“可用值”应设置为“非查询” - 但请确保将值网格完全留空。

在“默认值”部分，再次选择非查询 - 但在表达式框中键入“真”或“假”（即取决于您想要的默认值）。

该参数现在应该呈现为单选按钮 - 带有 True/False 选项。

请注意，这一切都与 BIDS 中的报表设计器有关 - 我还没有通过 Report Builder click-once 应用程序尝试过它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2010-02-26T09:26:40.413

首先将布尔值传递给您的参数，然后在以下表达式中使用该参数字段而不是 m_dhkDentalStatusGood：

```
=iif( Fields!m_chkDentalStatusGood.Value , Chr(158), Chr(153)) 
```

并将该 texbox 的字体更改为“Wingdings 2”。

注意：当您将报告导出为 PDF 时，这也应该出现。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-11-21T14:42:52.753

如果您指的是 Reporting Services Web 界面，则不能。可选值列表显示为下拉列表。您可以配置选择多个值的能力，这些值呈现为复选框的下拉列表。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-21T14:38:53.510

我的猜测是他们没有 - 至少他们没有记录在 BOL 帮助中。它在功能上等同于只能选择一项的列表。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-11-21T14:41:13.707

我的猜想得到证实：

[http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=2414397&SiteID=1](http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=2414397&SiteID=1)

这些 msdn 论坛是一个很好的资源。大多数问题已经被问过了；）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-19T10:31:45.773

SSRS中的报表参数不能添加单选按钮... 多值参数自动获取复选框，如果参数是单选，所有默认值都出现在下拉列表中，其行为类似于单选按钮的行为..

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-02T22:51:27.677

不正确，我实际上对使用相同参数但显示方式不同的 2 个报告有问题。该参数是布尔值，在一个报表中呈现为下拉列表，在另一个报表中呈现为单选按钮列表。因此，两者都是可能的，问题是为什么两个不同的报告会以不同的方式呈现相同的代码？Boolean True true 全部展开/折叠：False 全部展开 True 全部折叠

# msbuild - 使用 MSbuild 自动预编译网站的问题

> ID：308931
> 
> 赞同：1
> 
> 时间：2008-11-21T14:28:47.710
> 
> 标签：msbuild, teamcity

全部，

我目前的解决方案包括 2 个类库和一个使用 Msbuild 在 teamCity 内构建的网站。现在我想预编译网站并将其作为工件提供。但是，当我尝试使用预编译它时

```
<Target Name="PrecompileWeb" DependsOnTargets="Build">
    <AspNetCompiler
        PhysicalPath="$(BuildDir)\Location\" 
        TargetPath="$(BuildDir)\Publish"
        Force="true"
        Debug="true"

        />
  </Target> 
```

我得到一个错误，因为它正在寻找一个虚拟路径（我没有想要做的所有它预编译我对发布站点不感兴趣的文件）如果我在其中放置一个虚拟路径我得到另一个错误（正确）关于它不是 IIS 下的应用程序

有任何想法吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-21T14:44:07.867

这是一个网站还是 Web 应用程序项目？如果是后者，而不是执行 AspNetCompiler 任务，而是对 csproj/vbproj 文件执行 MSBuild 任务，调用目标`Rebuild;ResolveReferences;_CopyWebApplication`并指定`OutDir`属性。

如果您使用的是网站，则将 VirtualPath 指定为有效的 IIS 路径。发生的情况是，当您不指定 VirtualPath 属性时，它会尝试使用 PhysicalPath 和 IIS 来解决它。我相信这只是 AspNetCompiler 工作原理的产物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-21T15:08:01.063

我不确定这会起作用，因为这会在每个构建中发生？我只想在 TeamCity 服务器上运行构建而不是本地构建时执行此操作。

基本上我目前

构建所有必需的解决方案 执行单元测试 为工件创建 Zip 文件夹

干杯

# ruby - 字符串化数组以进行 eval

> ID：308935
> 
> 赞同：3
> 
> 时间：2008-11-21T14:31:27.363
> 
> 标签：ruby

我正在准备一个将被`eval`'ed 的字符串。该字符串将包含一个从现有`Array`. 我有以下内容：

```
def stringify(arg)
    return "[ '" + arg.join("', '") + "' ]" if arg.class == Array
    "'#{arg}'"
end

a = [ 'a', 'b', 'c' ]
eval_str = 'p ' + stringify(a)
eval(eval_str) 
```

打印字符串`["a", "b", "c"]`。

有没有更惯用的方法来做到这一点？`Array#to_s`不削减它。有没有办法将`p`方法的输出分配给变量？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-21T15:08:36.180

`inspect`应该完成你想要的。

```
>> a = %w(a b c)
=> ["a", "b", "c"]
>> a.inspect
=> "[\"a\", \"b\", \"c\"]" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-21T14:38:06.477

我可能会误解你，但这看起来更好吗？

```
>> a = %w[a b c]
=> ["a", "b", "c"]
>> r = "['#{a.join("', '")}']"
=> "['a', 'b', 'c']"
>> r.class
=> String 
```

我想我对评估的需要感到困惑，除非这是我在这里看到的东西之外的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-25T08:48:00.067

> 有没有办法将 p 方法的输出分配给变量？

p（与 puts 相同）将它的参数写入 $stdout 并返回 nil。要捕获此输出，您需要临时重新定义 $stdout。

```
require 'stringio'

def capture_stdout
  old = $stdout
  $stdout = StringIO.new(output = "")
  begin
    yield
  ensure 
    # Wrapping this in ensure means $stdout will 
    # be restored even if an exception is thrown
    $stdout = old
  end
  output
end

output = capture_stdout do
  p "Hello"
end

output # => "Hello" 
```

我不确定为什么在示例中需要这个，你可以这样做

```
output = stringify(a) 
```

# visual-studio - 支持 Resharper 的 Visual Studio 主题？

> ID：308938
> 
> 赞同：10
> 
> 时间：2008-11-21T14:31:49.407
> 
> 标签：visual-studio, resharper

有没有人有任何好的 Visual Studio 字体和颜色主题，可以很好地支持 Resharper？那里的大多数主题都不支持 Resharper，因此所有额外的 R# 突出显示看起来很垃圾......

干杯! 马特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-21T14:35:32.190

我使用这个[VibrantInk](http://www.iunknown.com/2007/06/vibrant_ink_vis.html)主题，带有[EnvyCode R](http://damieng.com/blog/2008/05/26/envy-code-r-preview-7-coding-font-released)字体，与 Resharper Highlighting 一起看起来不错

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-21T14:51:20.117

[这](http://blog.muonlab.com/2009/05/14/visual-studio-and-resharper-colour-woes-with-added-visual-svn/)是我的，基于textmate

编辑：（仍在进行中，但它已经到了那里）

# wpf - 操作 WPF 元素树

> ID：308942
> 
> 赞同：1
> 
> 时间：2008-11-21T14:32:10.450
> 
> 标签：wpf

是否可以以编程方式操作 WPF 窗口的控件树？

我有一个包含任意 WPF XAML 代码的字符串。我在内容控件中显示内容。到目前为止没有问题。此外，我想用一个特殊的边框来装饰 XAML 片段中包含的每个 Grid 控件。

有哪些可能的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-11-21T16:12:41.590

您可以遍历控件树，如果当前控件的类型`Grid`为 ，则为其添加边框。

下面是一些看起来非常像 C# 并且实际上可以编译和工作的伪代码：

```
private void AddGrid(Control c){
    foreach(var child in c.Children)
        AddGrid(child);
    if(this is Grid)
        this.Border = new Border(/* whatever */);
} 
```

或者，在`Resources`包含动态 xaml 的控件中，您可以添加一个`Style`更改所有外观`Grids`并在其周围添加所需边框的控件。 [这是学习如何做到这一点的好资源。](http://blogs.msdn.com/jitghosh/archive/2007/12/27/wpf-control-templates-an-overview.aspx) 请记住，如果您将样式添加到窗口的资源或应用程序的资源中，它将分别影响窗口或应用程序中的所有控件。将其添加到动态 xaml 的直接父级（？以前从未尝试过）只会影响其子控件的模板。

# c# - 如何制作一种以 A1A 1A1 格式返回随机字符串的方法？

> ID：308954
> 
> 赞同：2
> 
> 时间：2008-11-21T14:36:29.693
> 
> 标签：c#, methods

我需要一种方法以以下格式返回随机字符串：

字母数字 字母数字 字母数字

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-11-21T14:40:14.130

假设您不需要它是线程安全的：

```
private static readonly Random rng = new Random();

private static RandomChar(string domain)
{
    int selection = rng.Next(domain.Length);
    return domain[selection];
}

private static char RandomDigit()
{
    return RandomChar("0123456789");
}

private static char RandomLetter()
{
    return RandomChar("ABCDEFGHIJKLMNOPQRSTUVWXYZ");
}

public static char RandomStringInSpecialFormat()
{
    char[] text = new char[6];
    char[0] = RandomLetter();
    char[1] = RandomDigit();
    char[2] = RandomLetter();
    char[3] = RandomDigit();
    char[4] = RandomLetter();
    char[5] = RandomDigit();
    return new string(text);
} 
```

（您可以在 RandomStringInSpecialFormat 中使用 3 次迭代循环，但它没有太多好处。）

如果您需要它是线程安全的，您将需要某种方法来确保您不会同时从多个线程访问 Random。最简单的方法（在我看来）是使用MiscUtil[中的](http://pobox.com/~skeet/csharp/miscutil)[StaticRandom](http://www.yoda.arachsys.com/csharp/miscutil/usage/staticrandom.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-21T14:39:58.483

你只需要2个方法。

1）随机一个字符（您可以使用[ASCII](http://asciitable.com/)在数字之间随机而不是强制转换为字符）

2) 随机数。

两者都可以使用此实用方法：

```
private int RandomNumber(int min, int max)
{
    Random random = new Random();
    return random.Next(min, max); 
} 
```

对于您需要拨打的字母`RandomNumber(65,90);`和您拨打的号码：`RandomNumber(1,9);`您只需连接。

比你调用这些方法来创建你的字符串，希望这对你有帮助。

## 更新

您应该将随机对象放在您的班级中......这只是为了向您展示如何做到这一点。您仍然需要做一些工作，但我认为这是向您展示如何从 ascii 操作 char 的一个好的开始。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-21T14:49:57.763

```
 public static string RandomString(Random rand, int length)
    {
        char[] str = new char[length];
        for (int i = 0; i < length; i++)
        {
            if (i % 2 == 0)
            {    //letters
                str[i] = (char)rand.Next(65, 90);
            }
            else
            {
                //numbers 
                str[i] = (char)rand.Next(48, 57);
            }
        }
        return new string(str);
    } 
```

也许这会更具可读性...

```
if (i % 2 == 0)
{    
      //letters
      str[i] = (char)rand.Next('A', 'Z');
}
else
{
   //numbers
    str[i] = (char)rand.Next('0', '9');
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-21T15:08:10.067

### 没有任何 IF 的较短版本

```
class Program
{
    static void Main(string[] args)
    {
        Random r = new Random();
        for(int i = 0;i<25;i++)
        Console.WriteLine(RandomString(r,6));
        Console.Read();
    }

    public static string RandomString(Random rand, int length)
    {
        char[] str = new char[length];
        for (int i = 0; i < length; i++)
            str[i] = (char)rand.Next(65 - (17 * (i % 2)), 91-(33 * (i % 2)));
        return new string(str);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-21T14:41:20.603

然后只需使用 Random.NextBytes 函数和 Encoding.ASCII.GetString() 来生成字符。

或者，或者，生成一个字符串或字符数组 (string[]) 并使用 Random.Next(0,array.Length) 来获取它的索引。

使用 StringBuilder 和 Random.Next(0,9) 生成数字，然后通过添加数字、字符、数字等来生成字符串...

[随机成员](http://msdn.microsoft.com/en-us/library/system.random_members.aspx)

# excel - Crystal Reports 导出到 Excel 问题

> ID：308957
> 
> 赞同：0
> 
> 时间：2008-11-21T14:38:18.240
> 
> 标签：excel, crystal-reports

在我进行维护的当前 C# 应用程序中，我们已从 Visual Studio 2003 升级到 Visual Studio 2008。我们一直使用 Visual Studio 附带的 Crystal Reports。

自升级以来，我们发现导出到 Excel 时报告存在问题。如果详细信息部分中的列为空，则该行中的所有其余数据都向左移动。导致数据放入不正确的列。

我一直在搜索，检查属性，却空手而归。如果有人能给我一条生命线或为我指明正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-21T15:01:10.300

我发现使用 CR，如果您知道数据大部分会转储到 excel，我会删除 CR 可能执行的所有格式。你的报告是这样的吗？

CR 在它的属性中设置为 NULL 值做什么？

# .net - 如何为 ADO.NET 拆分 Oracle sql 语句

> ID：308963
> 
> 赞同：7
> 
> 时间：2008-11-21T14:40:29.717
> 
> 标签：.net, database, oracle, ado.net

拆分 SQL 语句以发送到 Oracle ADO.NET 客户端的正确方法是什么？例如，假设您在文本文件中有以下代码，并且想要执行这些语句：

```
CREATE TABLE foo (bar VARCHAR2(100));
INSERT INTO foo (bar) VALUES('one');
INSERT INTO foo (bar) VALUES('two'); 
```

我相信尝试将所有这些发送到一个命令中会导致 Oracle 抱怨“;”。我的第一个想法是拆分“;” 字符，并一次发送一个。

但是，存储过程也可以包含分号，那么我将如何制作它以便拆分例程将整个存储过程保持在一起？它是否也需要查找开始/结束语句或“/”？

ODP.NET 和 Micrsoft Oracle Provider 在这些方面有什么不同吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-21T14:54:51.620

如果没有 DDL，您可以通过用 BEGIN 和 END 包围语句来创建匿名 PL/SQL 块：

```
BEGIN
  INSERT INTO foo (bar) VALUES('one');
  INSERT INTO foo (bar) VALUES('two');
END; 
```

要执行 DDL（如 CREATE TABLE），您需要使用动态 PL/SQL：

```
BEGIN
  EXECUTE IMMEDIATE 'CREATE TABLE foo (bar VARCHAR2(100))';
  EXECUTE IMMEDIATE 'INSERT INTO foo (bar) VALUES(:v)' USING 'one';
  EXECUTE IMMEDIATE 'INSERT INTO foo (bar) VALUES(:v)' USING 'two';
END; 
```

INSERTS 也是动态的，因为该表在运行该块之前不存在，因此无法编译。

注意：这将是一个不寻常的要求：应用程序通常不应该创建表！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-07-21T10:37:28.413

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-01-28T13:10:12.577

要扩展 Tony 的答案，您可以使用 Anonymous 块来执行此操作，您只需确保字符串按预期工作即可。这是一个 DOWN AND DIRTY 的例子，在 ; 并创建块。

```
using System;
using System.Data;
using System.Text;
using System.Reflection;
using Oracle.DataAccess.Client;
using Oracle.DataAccess.Types;

namespace ODPSample
{
    class Class1
    {

        private static string formatAnonBlock(string userData)
        {
            StringBuilder sb = new StringBuilder();
            sb.Append("Begin ");
            string[] statements = userData.Split(';');
            foreach (string s in statements)
            {
                if (s.Length > 0)
                {
                    sb.AppendFormat(" EXECUTE IMMEDIATE '{0}';", s.Replace("'", "''"));
                }
            }
            sb.Append(" END ; ");
            return sb.ToString();
        }
        static void Main(string[] args)
        {
            Console.WriteLine("Demo: Anon Block");

            // Connect
            string connectStr = "User Id=scott;Password=tiger;Data Source=database";

            string userInputtedSQL;
            userInputtedSQL = "Create table ABC(val varchar2(50)); insert into ABC values('123');insert into ABC values('567');";

            string anonBlock;
            anonBlock = formatAnonBlock(userInputtedSQL);
            Console.WriteLine(anonBlock);

            OracleConnection connection = new OracleConnection(connectStr);
            OracleCommand cmd = new OracleCommand(anonBlock, connection);

            try
            {
                connection.Open();
                cmd.ExecuteNonQuery();
            }
            catch (Exception e)
            {
                Console.WriteLine(e.Message);
            }

            Console.WriteLine("Done");
        }
    }
} 
```

# asp.net - 在 Web 应用程序中无缝编辑文档

> ID：308970
> 
> 赞同：1
> 
> 时间：2008-11-21T14:42:49.900
> 
> 标签：asp.net, webdav, documents

我们有一个 Web 应用程序，其中涉及大量文档。在典型的用例中，将从我们的 Web 应用程序生成一个文档。用户将生成的文档下载到本地文件系统并进行修改。完成这项工作后，用户将修改后的文档上传回 Web 应用程序。

我需要一种更简单的方法来处理 Web 应用程序和文档。它应该是无缝的。也许，有一种方法，可以在类似于共享点文档列表的 webdav 文件夹中编辑文档，并将其直接存储在 Web 应用程序中，而无需在本地文件系统上存储临时文档。

但也许，有更好的想法。

PS：我不想使用活动 x 控件，它必须是 web 应用程序 :-)

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-21T15:15:03.483

我认为没有插件这是不可能的。我以前用过activex，也许可以写一个跨平台的java小程序？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-21T15:25:40.437

WebDav 可能是要走的路。

我想你会在服务器的文件夹中创建文件，然后将用户发送到那里，他们可以在那里编辑和保存它。

缺点是：

*   用户必须有软件才能在他们的机器上编辑文档
*   没有并发处理

另一种选择是将文档生成为 HTML，然后使用 HTML 编辑器（例如 FckEditor 或 FreeTextBox）让用户在线编辑文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-09-20T07:06:10.607

您可以使用提供编辑文档功能的谷歌文档。这是免费的，您也可以在您的 Web 应用程序中使用它。你只需要引用 dll。

请参阅以下链接了解更多详情。
[http://code.google.com/apis/documents/docs/2.0/developers_guide_dotnet.html](http://code.google.com/apis/documents/docs/2.0/developers_guide_dotnet.html)

您可以从这里下载 google data api。
[http://code.google.com/p/google-gdata/downloads/list](http://code.google.com/p/google-gdata/downloads/list)

谢谢。

# blackberry - 关闭 BlackBerry 上的系统对话框

> ID：308972
> 
> 赞同：0
> 
> 时间：2008-11-21T14:42:58.027
> 
> 标签：blackberry, dialog, integration

我有一个在后台运行的 BlackBerry 应用程序，它需要知道系统何时启动“未接来电”系统对话框，并在没有用户干预的情况下以编程方式关闭它。我怎样才能做到这一点？

实际上，我*几乎*可以知道对话框何时出现，即稍后我以编程方式结束通话......但是我怎样才能获得对对话框的引用并关闭它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-12T20:30:21.787

如果您知道对话框存在并且是最顶层的对话框，EventInjector API 可能会执行此操作 - net.rim.device.api.system.EventInjector。当您知道对话框存在时，发送带有 ESCAPE 键码的 KeyEvent。但是，该 API 通常在大多数企业环境中被锁定......

免责声明：我自己没有尝试过，如果它有效，我会有点惊讶，因为这可能意味着您也可以关闭“允许此连接”对话框，这将是一个安全漏洞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-30T16:26:46.037

这应该有效：

```
UiApplication.getUiApplication().invokeLater(new Runnable(){
  public void run(){
    UiApplication.getActiveScreen().close();
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-14T07:08:49.263

设备*关闭*按钮的按键注入如下所示：

```
KeyEvent inject = new KeyEvent(KeyEvent.KEY_DOWN, Characters.ESCAPE, 0);
inject.post(); 
```

不要忘记为设备发布设置权限：选项 => 高级选项 => 应用程序 => [您的应用程序] => 编辑默认权限 => 交互 => 击键注入

可能有用：
[BlackBerry - 模拟 KeyPress 事件](https://stackoverflow.com/questions/1292896/blackberry-simulate-a-keypress-event/1298900#1298900)

代码示例：

```
class Scr extends MainScreen implements PhoneListener {
    public Scr() {
        Phone.addPhoneListener(this);
    }

    public boolean onClose() {
        Phone.removePhoneListener(this);
        return super.onClose();
    }

    public void callDisconnected(int callId) {
        Timer timer = new Timer();
        timer.schedule(new TimerTask(){public void run() {
            KeyEvent event = new KeyEvent(KeyEvent.KEY_DOWN,  
                        Characters.ESCAPE, 
                        KeyListener.STATUS_NOT_FROM_KEYPAD);
            event.post();
        }}, 1000);      
    }

    public void callAdded(int callId) {
    }

    public void callAnswered(int callId) {
    }

    public void callConferenceCallEstablished(int callId) {
    }

    public void callConnected(int callId) {
    }

    public void callDirectConnectConnected(int callId) {    
    }

    public void callDirectConnectDisconnected(int callId) {
    }

    public void callEndedByUser(int callId) {
    }

    public void callFailed(int callId, int reason) {
    }

    public void callHeld(int callId) {
    }

    public void callIncoming(int callId) {
    }

    public void callInitiated(int callid) {
    }

    public void callRemoved(int callId) {
    }

    public void callResumed(int callId) {   
    }

    public void callWaiting(int callid) {
    }

    public void conferenceCallDisconnected(int callId) {
    }
} 
```

# blogengine.net - 如何为 BlogEngine.net 创建一个扩展来访问帖子是否属于某个类别？

> ID：308977
> 
> 赞同：0
> 
> 时间：2008-11-21T14:44:55.683
> 
> 标签：blogengine.net

我正在使用 blogengine.net。如果特定帖子属于特定类别，我想在 H1 中显示默认图像。例如，如果一篇文章属于 Podcasts 类别，我想显示一张图片，如果一篇文章属于 Blog 类别，我想显示另一张图片。

我已经了解了所有的 CSS，我想要做的就是更改类，即：`<h1 class="CHANGE"></h1>`基于类别，但为了做到这一点，我需要知道帖子是否属于某个类别。

我开始为 POST_SERVING 事件构建扩展，但没有 Post.IsInCategory 方法。除非在 Source 中创建我自己的方法，否则有人可以提出更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-24T14:03:56.857

如果您的扩展程序连接到 Post_Serving 事件，则传递给 EventHandler（发送方）的第一个参数是 Post 对象。如果将其转换为 Post，则可以访问当前帖子的 Categories 属性。

```
 private static void Post_Serving(object sender, ServingEventArgs e)
  {
      Post thePost = sender as Post;
      foreach (Category cat in thePost.Categories)
      {
          // do something
      }
  } 
```

# authentication - 安装SVN用户名密码问题

> ID：308980
> 
> 赞同：0
> 
> 时间：2008-11-21T14:46:02.793
> 
> 标签：authentication, svn

我在 Windows 2003 上使用 Apache 2.2 安装 SVN，一切似乎都很好，但是当我尝试登录时，没有用户名/密码有效。

这是我在 httpd.conf 中加载此模块的一些信息

`LoadModule auth_basic_module modules/mod_auth_basic.so`
在`svnserv.conf`我有

```
[general]
anon-access=read
auth-access=write

password-db=passwd
authz-db=authz 
```

在`passwd`文件中：

```
[users]
harry=harry
sally=sally 
```

我做错了什么或错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-21T14:59:04.297

我认为问题可能是您需要使用[htpasswd](http://httpd.apache.org/docs/1.3/programs/htpasswd.html)生成密码文件。存储未加密的密码不是一件好事！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-21T14:53:23.700

好的，从技术上讲，这不是您所问问题的答案，但您应该尝试安装[Visual SVN Server](http://www.visualsvn.com/server/)，它会为您解决所有这些令人头疼的问题。在 Windows 上使用此工具设置 SVN 服务器比手动设置要容易得多。

# vb.net - 富文本框中的 VB.NET 语法突出显示

> ID：308985
> 
> 赞同：2
> 
> 时间：2008-11-21T14:49:36.250
> 
> 标签：vb.net, syntax-highlighting

我正在为我们在工作中使用的一种非常简单的脚本语言编写一个简单的代码编辑器。如果我在整个`RichTextBox`( `rtbMain`) 上执行语法高亮代码，我的代码可以正常工作，但是当我尝试让它只在该行上工作时，我可以运行带有`rtbMain`更改的函数，它变得很奇怪。我似乎无法弄清楚为什么。我是否以正确的方式去做这件事？

`rtbMain`是主文本框。 `frmColors.lbRegExps`是要突出显示的单词列表框（稍后它将具有更强大的正则表达式。） `frmColor.lbHexColors`是另一个带有单词对应十六进制颜色的列表框。

```
Private Sub HighLight(ByVal All As Boolean)
    Dim RegExp As System.Text.RegularExpressions.MatchCollection
    Dim RegExpMatch As System.Text.RegularExpressions.Match
    Dim FirstCharIndex As Integer = rtbMain.GetFirstCharIndexOfCurrentLine
    Dim CurrentLine As Integer = rtbMain.GetLineFromCharIndex(FirstCharIndex)
    Dim CurrentLineText As String = rtbMain.Lines(CurrentLine)
    Dim CharsToCurrentLine As Integer = rtbMain.SelectionStart
    Dim PassNumber As Integer = 0

    LockWindowUpdate(Me.Handle.ToInt32) 'Let's lock the window so it doesn't scroll all crazy.
    If All = True Then 'Highlight everything.
        For Each pass In frmColors.lbRegExps.Items
            RegExp = System.Text.RegularExpressions.Regex.Matches(LCase(rtbMain.Text), LCase(pass))
            For Each RegExpMatch In RegExp
                rtbMain.Select(RegExpMatch.Index, RegExpMatch.Length)
                rtbMain.SelectionColor = ColorTranslator.FromHtml(frmColors.lbHexColors.Items(PassNumber))
            Next
            PassNumber += 1
        Next
    Else 'Highlight just that row.
        For Each pass In FrmColors.lbRegExps.Items
            RegExp = System.Text.RegularExpressions.Regex.Matches(LCase(CurrentLineText), LCase(pass))
            For Each RegExpMatch In RegExp
                rtbMain.Select(RegExpMatch.Index + (CharsToCurrentLine - RegExpMatch.Length), RegExpMatch.Length)
                rtbMain.SelectionColor = Color.Blue
            Next
        Next
    End If

    rtbMain.Select(CharsToCurrentLine, 0) 'Reset colors and positon and then unlock drawing.
    rtbMain.SelectionColor = Color.Black
    LockWindowUpdate(0)
End Sub 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-11-21T23:07:03.250

好的，我想通了。我在 rtbMain.TextChange 上调用了偶数，认为只有在文本实际更改时才会触发。不，不，如果格式更改，它也会触发。因此，每次它在第一次通过并突出显示所有内容时更改某些内容，然后它会触发突出显示该行。它会这样做，直到没有任何东西可以改变。

我为天气设置了一个布尔变量，它当前是否突出显示，并在 TextChange 子中添加了一个 if 条件

PS我没有自学者徽章，所以欢迎任何提高评级：P

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-21T23:44:13.130

这并不能真正回答您的问题，但如果您正在编写自己的编辑器，则最好使用为 .NET 完成的一些现有开源工作。我建议：

Roger Alsing 的[SyntaxBox](http://code.google.com/p/alsing/wiki/SyntaxBox)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T11:35:10.560

```
Private Sub HighLight(ByVal All As Boolean)
    Dim RegExp As System.Text.RegularExpressions.MatchCollection
    Dim RegExpMatch As System.Text.RegularExpressions.Match
    Dim FirstCharIndex As Integer = rtbMain.GetFirstCharIndexOfCurrentLine
    Dim CurrentLine As Integer = rtbMain.GetLineFromCharIndex(FirstCharIndex)
    Dim CurrentLineText As String = rtbMain.Lines(CurrentLine)
    Dim CharsToCurrentLine As Integer = rtbMain.SelectionStart
    Dim PassNumber As Integer = 0

    LockWindowUpdate(Me.Handle.ToInt32) ''lets lock the window so it doesnt scroll all crazy 
    If All = True Then ''highlight everything
        For Each pass In frmColors.lbRegExps.Items
            RegExp = System.Text.RegularExpressions.Regex.Matches(LCase(rtbMain.Text), LCase(pass))
            For Each RegExpMatch In RegExp
                rtbMain.Select(RegExpMatch.Index, RegExpMatch.Length)
                rtbMain.SelectionColor = ColorTranslator.FromHtml(frmColors.lbHexColors.Items(PassNumber))
            Next
            PassNumber += 1
        Next
    Else ''higlight just that row 
        For Each pass In FrmColors.lbRegExps.Items
            RegExp = System.Text.RegularExpressions.Regex.Matches(LCase(CurrentLineText), LCase(pass))
            For Each RegExpMatch In RegExp
                rtbMain.Select(RegExpMatch.Index + (CharsToCurrentLine - RegExpMatch.Length), RegExpMatch.Length)
                rtbMain.SelectionColor = Color.Blue
            Next
        Next
    End If

    rtbMain.Select(CharsToCurrentLine, 0) ''reset colors and positon and then unlock drawing
    rtbMain.SelectionColor = Color.Black
    LockWindowUpdate(0)
End Sub 
```

# c# - 用户定义的接口转换

> ID：308986
> 
> 赞同：3
> 
> 时间：2008-11-21T14:49:47.140
> 
> 标签：c#

我刚刚在 C# 中遇到了“不允许用户定义的与接口之间的转换”问题。我试图做的是创建一个通用的 Graph 类，它可以根据支持的接口以几种不同的方式进行迭代。所以：

```
public class Graph<T> : IBreadthFirstSearchTree<T>, IDepthFirstSearchTree<T>
{
    // unnecessary details

    public static explicit operator IBreadthFirstSearchTree<T>(Graph<T> g)
    {
        g.enumerator = new GraphEnumerator<T>(g, SortStrategy.BreadthFirst);
        return g as IBreadthFirstSearchTree<T>;
    }

    public static explicit operator IDepthFirstSearchTree<T>(Graph<T> g)
    {
        g.enumerator = new GraphEnumerator<T>(g, SortStrategy.DepthFirst);
        return g as IDepthFirstSearchTree<T>;
    }
} 
```

用于此用途：

```
foreach (GraphNode<T> gn in myGraph as IDepthFirstSearchTree)
{
    // do stuff with gn
} 
```

任何人都知道我如何在语言的限制下实现相同的句法结果？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-11-21T14:55:51.743

只需执行您的实现`IDepthFirstSearchTree<T>`和`IBreadthFirstSearchTree<T>`显式实现即可。这样，成员将无法直接在 type 的表达式上调用`Graph<T>`，但使用“as”（或演员表），适当的成员将可用。

我不确定这就是我真正要做的——我可能会完全摆脱接口并拥有：

```
public IEnumerable<T> IterateBreadthFirst() { ... }
public IEnumerable<T> IterateDepthFirst() { ... } 
```

# visual-studio - 如何阻止 Visual Studio 在（全部中断）暂停按钮上转到 program.cs

> ID：308988
> 
> 赞同：7
> 
> 时间：2008-11-21T14:50:08.947
> 
> 标签：visual-studio

这真的很烦人。

```
Application.EnableVisualStyles();
Application.SetCompatibleTextRenderingDefault(false);
Application.Run(new mainForm()); <-- pausing visual studio breaks here. 
```

多谢你们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-21T15:03:54.037

@sramey 您确定暂停总是在所述行中断吗？如果我在这里冒险猜测一下，我认为当您按下暂停按钮时，您的应用程序处于空闲状态，并且程序大部分时间都花在由 Application.Run() 抽象的 Win32 消息循环中。因此，VS 很可能会在那里中断主线程的执行。

我认为按下暂停并不总是调试事物的最佳方式。您需要对问题区域进行有根据的猜测并在相关方法中设置断点（如构造函数、API 调用等）

需要更多关于您在此处尝试完成的工作的信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-21T16:05:16.690

program.cs 的 Main 函数上的[[DebuggerStepThrough]可能会有所帮助。](http://msdn.microsoft.com/en-us/library/system.diagnostics.debuggerstepthroughattribute.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-01T15:21:18.293

按 Ctrl + F4 将关闭新打开的 Program.cs 选项卡。不是解决方案，但它可以快速摆脱它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-21T15:08:19.457

如果您的应用程序处于空闲状态（即它实际上正在执行 Application.Run），调试器只会在此处暂停。

如果您真的不想到那里结束，您可以尝试在调用 Application.Run 的方法上使用“DebuggerNonUserCode”属性，但我不推荐它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-21T15:20:18.933

考虑到前面的评论，您可能希望在您希望应用程序停止的位置设置断点。

我通常通过转到我希望调试器停止的位置，然后按 来执行此操作`F9`。您也可以单击左边距。还有其他方法。

您还可以将断点配置为仅在某个条件为真（例如`i == 0`）时才停止。

Microsoft 有[一个关于在 Visual Studio 中调试的指南](http://msdn.microsoft.com/en-us/library/sc65sadd.aspx "MSDN 链接")。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-02T18:10:04.167

我猜您正在尝试更改（编辑并继续）一段当前可能正在运行或未运行的代码。如果它没有运行，放置断点不会让你到达那里。当您点击暂停时，VS 会打开 Program.cs（因为大多数时候应用程序处于空闲状态并坐在这里）并隐藏您想要修改的代码。

调试器正在做旨在做的事情。不幸的是，没有设置可以更改此行为并允许异常（检查工具>选项>调试）。最简单的做法是关闭 Program.cs，然后在暂停之前，您将准确地到达您想要的位置。

或者，编写一个在后台运行并监视 VS 活动的应用程序，当它发现 Program.cs 已打开时，将其关闭。为此，您将需要来自“user32”的 API 函数，例如 FndWindow、GetWindowText 等。有大量代码示例展示了如何“窥探”和控制另一个应用程序。

# python - functools.wraps 有什么作用？

> ID：308999
> 
> 赞同：838
> 
> 时间：2008-11-21T14:53:40.610
> 
> 标签：python, decorator, functools

[在对另一个问题的答案](https://stackoverflow.com/questions/306130/python-decorator-makes-function-forget-that-it-belongs-to-a-class#306277)的评论中，有人说他们不确定`functools.wraps`在做什么。所以，我问这个问题，以便在 StackOverflow 上记录它以供将来参考：究竟是`functools.wraps`做什么的？

* * *

## 回答 #1

> 赞同：1340
> 
> 时间：2008-11-21T14:53:47.410

当您使用装饰器时，您正在用另一个功能替换一个功能。换句话说，如果你有一个装饰器

```
def logged(func):
    def with_logging(*args, **kwargs):
        print(func.__name__ + " was called")
        return func(*args, **kwargs)
    return with_logging 
```

那么当你说

```
@logged
def f(x):
   """does some math"""
   return x + x * x 
```

这和说的完全一样

```
def f(x):
    """does some math"""
    return x + x * x
f = logged(f) 
```

并且您的功能`f`被替换为功能`with_logging`。不幸的是，这意味着如果你说

```
print(f.__name__) 
```

它将打印`with_logging`，因为这是您的新函数的名称。实际上，如果您查看 的文档字符串`f`，它将是空白的，因为`with_logging`没有文档字符串，因此您编写的文档字符串将不再存在。此外，如果您查看该函数的 pydoc 结果，它不会被列为采用一个参数`x`；相反，它将被列为采取`*args`，`**kwargs`因为这就是 with_logging 采取的措施。

如果使用装饰器总是意味着丢失有关函数的信息，那将是一个严重的问题。这就是为什么我们有`functools.wraps`. 这需要一个在装饰器中使用的函数，并添加了复制函数名称、文档字符串、参数列表等的功能。由于`wraps`它本身就是一个装饰器，所以下面的代码做了正确的事情：

```
from functools import wraps
def logged(func):
    @wraps(func)
    def with_logging(*args, **kwargs):
        print(func.__name__ + " was called")
        return func(*args, **kwargs)
    return with_logging

@logged
def f(x):
   """does some math"""
   return x + x * x

print(f.__name__)  # prints 'f'
print(f.__doc__)   # prints 'does some math' 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2019-03-11T13:16:09.837

从 python 3.5+ 开始：

```
@functools.wraps(f)
def g():
    pass 
```

是 的别名`g = functools.update_wrapper(g, f)`。它确实做了三件事：

*   它复制on的`__module__`, `__name__`, `__qualname__`,`__doc__`和`__annotations__`属性。这个默认列表在里面，你可以在[functools 源码](https://github.com/python/cpython/blob/master/Lib/functools.py)中看到。`f``g``WRAPPER_ASSIGNMENTS`
*   它使用来自`__dict__`的`g`所有元素更新`f.__dict__`。（见`WRAPPER_UPDATES`源代码）
*   它设置了一个新`__wrapped__=f`属性`g`

结果是它`g`显示为具有相同的名称、文档字符串、模块名称和签名`f`。唯一的问题是关于签名这实际上不是真的：它只是`inspect.signature`默认遵循包装链。[您可以按照文档](https://docs.python.org/3/library/inspect.html#inspect.signature)`inspect.signature(g, follow_wrapped=False)`中的说明使用来检查它。这会带来烦人的后果：

*   即使提供的参数无效，包装器代码也会执行。
*   包装器代码无法使用其名称轻松访问参数，从接收到的 *args、**kwargs。事实上，必须处理所有情况（位置、关键字、默认），因此要使用类似`Signature.bind()`.

现在和装饰器之间有点混淆`functools.wraps`，因为开发装饰器的一个非常常见的用例是包装函数。但两者都是完全独立的概念。如果您有兴趣了解其中的区别，我为两者实现了帮助程序库：[decopatch](https://smarie.github.io/python-decopatch/)可以轻松编写装饰器，[makefun](https://smarie.github.io/python-makefun/)可以为`@wraps`. 请注意，它`makefun`依赖于与著名`decorator`库相同的经过验证的技巧。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2009-12-03T23:46:43.537

我经常为我的装饰器使用类，而不是函数。我遇到了一些麻烦，因为对象不会具有函数所期望的所有相同属性。例如，一个对象将没有属性`__name__`。我有一个特定的问题，很难追踪 Django 报告错误“对象没有属性”的位置`__name__`。不幸的是，对于类风格的装饰器，我不相信 @wrap 会完成这项工作。相反，我创建了一个基本装饰器类，如下所示：

```
class DecBase(object):
    func = None

    def __init__(self, func):
        self.__func = func

    def __getattribute__(self, name):
        if name == "func":
            return super(DecBase, self).__getattribute__(name)

        return self.func.__getattribute__(name)

    def __setattr__(self, name, value):
        if name == "func":
            return super(DecBase, self).__setattr__(name, value)

        return self.func.__setattr__(name, value) 
```

此类将所有属性调用代理到正在修饰的函数。因此，您现在可以创建一个简单的装饰器来检查是否指定了 2 个参数，如下所示：

```
class process_login(DecBase):
    def __call__(self, *args):
        if len(args) != 2:
            raise Exception("You can only specify two arguments")

        return self.func(*args) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2021-11-12T21:58:36.433

1.  假设我们有这个：简单的装饰器，它接受一个函数的输出并将其放入一个字符串中，然后是三个!!!!。

```
def mydeco(func):
    def wrapper(*args, **kwargs):
        return f'{func(*args, **kwargs)}!!!'
    return wrapper 
```

2.  现在让我们用“mydeco”装饰两个不同的函数：

```
@mydeco
def add(a, b):
    '''Add two objects together, the long way'''
    return a + b

@mydeco
def mysum(*args):
    '''Sum any numbers together, the long way'''
    total = 0
    for one_item in args:
        total += one_item
    return total 
```

3.  运行 add(10,20), mysum(1,2,3,4) 时，它起作用了！

```
>>> add(10,20)
'30!!!'

>>> mysum(1,2,3,4)
'10!!!!' 
```

4.  然而，**name**属性，当我们定义它时，它给了我们一个函数的名字，

```
>>>add.__name__
'wrapper`

>>>mysum.__name__
'wrapper' 
```

5.  更差

```
>>> help(add)
Help on function wrapper in module __main__:
wrapper(*args, **kwargs)

>>> help(mysum)
Help on function wrapper in module __main__:
wrapper(*args, **kwargs) 
```

6.  我们可以通过以下方式部分修复：

```
def mydeco(func):
    def wrapper(*args, **kwargs):
        return f'{func(*args, **kwargs)}!!!'
    wrapper.__name__ = func.__name__
    wrapper.__doc__ = func.__doc__
    return wrapper 
```

7.  现在我们再次运行第 5 步（第二次）：

```
>>> help(add)
Help on function add in module __main__:

add(*args, **kwargs)
     Add two objects together, the long way

>>> help(mysum)
Help on function mysum in module __main__:

mysum(*args, **kwargs)
    Sum any numbers together, the long way 
```

8.  但我们可以使用 functools.wraps （decotator 工具）

```
from functools import wraps

def mydeco(func):
    @wraps(func)
    def wrapper(*args, *kwargs):
        return f'{func(*args, **kwargs)}!!!'
    return wrapper 
```

9.  现在再次运行第 5 步（第 3 次）

```
>>> help(add)
Help on function add in module main:
add(a, b)
     Add two objects together, the long way

>>> help(mysum)
Help on function mysum in module main:
mysum(*args)
     Sum any numbers together, the long way 
```

[参考](https://lerner.co.il/2019/05/05/making-your-python-decorators-even-better-with-functool-wraps/)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-03-10T03:14:01.283

1.  先决条件：您必须知道如何使用装饰器，尤其是包装。这个[评论](https://stackoverflow.com/a/309000/4098813)解释得有点清楚，或者这个[链接](https://realpython.com/blog/python/primer-on-python-decorators/)也很好地解释了它。

2.  每当我们使用 For 例如：@wraps 后跟我们自己的包装函数。根据此[链接](https://docs.python.org/2/library/functools.html)中给出的详细信息，它说

> functools.wraps 是在定义包装函数时调用 update_wrapper() 作为函数装饰器的便利函数。
> 
> 它相当于部分（update_wrapper，wrapped=wrapped，assigned=assigned，updated=updated）。

所以@wraps 装饰器实际上调用了 functools.partial(func[,*args][, **keywords])。

functools.partial() 定义说

> partial() 用于部分函数应用程序，它“冻结”函数参数和/或关键字的某些部分，从而生成具有简化签名的新对象。例如，partial() 可用于创建行为类似于 int() 函数的可调用对象，其中基本参数默认为两个：

```
>>> from functools import partial
>>> basetwo = partial(int, base=2)
>>> basetwo.__doc__ = 'Convert base 2 string to an int.'
>>> basetwo('10010')
18 
```

这使我得出结论，@wraps 调用 partial() 并将您的包装函数作为参数传递给它。最后的 partial() 返回简化版本，即包装函数内部的对象，而不是包装函数本身。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-12-14T06:01:24.013

这是关于包装的源代码：

```
WRAPPER_ASSIGNMENTS = ('__module__', '__name__', '__doc__')

WRAPPER_UPDATES = ('__dict__',)

def update_wrapper(wrapper,
                   wrapped,
                   assigned = WRAPPER_ASSIGNMENTS,
                   updated = WRAPPER_UPDATES):

    """Update a wrapper function to look like the wrapped function

       wrapper is the function to be updated
       wrapped is the original function
       assigned is a tuple naming the attributes assigned directly
       from the wrapped function to the wrapper function (defaults to
       functools.WRAPPER_ASSIGNMENTS)
       updated is a tuple naming the attributes of the wrapper that
       are updated with the corresponding attribute from the wrapped
       function (defaults to functools.WRAPPER_UPDATES)
    """
    for attr in assigned:
        setattr(wrapper, attr, getattr(wrapped, attr))
    for attr in updated:
        getattr(wrapper, attr).update(getattr(wrapped, attr, {}))
    # Return the wrapper so this can be used as a decorator via partial()
    return wrapper

def wraps(wrapped,
          assigned = WRAPPER_ASSIGNMENTS,
          updated = WRAPPER_UPDATES):
    """Decorator factory to apply update_wrapper() to a wrapper function

   Returns a decorator that invokes update_wrapper() with the decorated
   function as the wrapper argument and the arguments to wraps() as the
   remaining arguments. Default arguments are as for update_wrapper().
   This is a convenience function to simplify applying partial() to
   update_wrapper().
    """
    return partial(update_wrapper, wrapped=wrapped,
                   assigned=assigned, updated=updated) 
```

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2018-03-30T04:27:08.427

简而言之，**functools.wraps**只是一个常规函数。让我们考虑[这个官方示例](https://docs.python.org/2/library/functools.html#functools.wraps)。借助[源代码](https://github.com/python/cpython/blob/521995205a2cb6b504fe0e39af22a81f785350a3/Lib/functools.py#L67)，我们可以看到更多的实现细节和运行步骤，如下所示：

1.  **wraps(f)**返回一个对象，比如**O1**。它是[**Partial 类的对象**](https://github.com/python/cpython/blob/521995205a2cb6b504fe0e39af22a81f785350a3/Lib/functools.py#L234)
2.  下一步是**@O1...**，它是 python 中的装饰符号。它的意思是

> **包装器=O1.__call__（包装器）**

检查[**__call__**](https://github.com/python/cpython/blob/521995205a2cb6b504fe0e39af22a81f785350a3/Lib/functools.py#L266)的实现，我们看到在这一步之后，（左侧）**包装器**变成了**self.func(*self.args, *args, **newkeywords)**产生的对象检查 __new__ 中**O1****的**创建，我们知道**self.func**是函数**update_wrapper**。它使用参数***args**，右侧**wrapper**，作为它的第一个参数。**检查update_wrapper**的最后一步，可以看到返回了右侧的**包装器**，并根据需要修改了一些属性。*******`