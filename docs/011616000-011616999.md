# StackOverflow 问答 11616000-11616999

# ios - UIWebView：当应用程序进入后台时，iOS 6 中的 HTML5 音频暂停

> ID：11616001
> 
> 赞同：27
> 
> 时间：2012-07-23T15:50:23.593
> 
> 标签：ios, uiwebview, ios6, avfoundation, html5-audio

再会，

我的应用程序是一个音乐播放应用程序。我`<audio>`用 Javascript 控制 -Tag。到目前为止没有问题，播放、暂停、下一个和上一个按钮都可以正常工作。当我在 iOS 5 中待机设备时，音乐继续播放，但自动下一首歌曲不起作用。当它不处于待机状态时，它可以工作。而在 iOS 6 中，只需按下按钮，音乐就会淡出。

锁屏上的播放/暂停按钮适用于 iOS 5，但不适用于 iOS 6。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-09-13T21:00:17.637

从 iOS 6 开始，您必须在创建 UIWebView 之前将音频会话类别设置为“播放”。这就是你所要做的。不必使会话处于活动状态。

这也应该用于 html 视频，因为如果您不配置会话，当铃声开关关闭时，您的视频将被静音。

```
#import <AVFoundation/AVFoundation.h>

AVAudioSession *audioSession = [AVAudioSession sharedInstance];
BOOL ok;
NSError *setCategoryError = nil;
ok = [audioSession setCategory:AVAudioSessionCategoryPlayback
                         error:&setCategoryError];
if (!ok) {
  NSLog(@"%s setCategoryError=%@", __PRETTY_FUNCTION__, setCategoryError);
} 
```

确保您的目标链接到 AVFoundation 框架。

* * *

如果使用 Cordova，您需要修改的文件是 `platforms/ios/MyApp/Classes/AppDelegate.m`，最终将如下所示：

```
#import "AppDelegate.h"
#import "MainViewController.h"
#import <AVFoundation/AVFoundation.h>

@implementation AppDelegate

- (BOOL)application:(UIApplication*)application didFinishLaunchingWithOptions:(NSDictionary*)launchOptions
{
    AVAudioSession *audioSession = [AVAudioSession sharedInstance];
    BOOL ok;
    NSError *setCategoryError = nil;
    ok = [audioSession setCategory:AVAudioSessionCategoryPlayback error:&setCategoryError];
    if (!ok) {
        NSLog(@"%s setCategoryError=%@", __PRETTY_FUNCTION__, setCategoryError);
    }

    self.viewController = [[MainViewController alloc] init];
    return [super application:application didFinishLaunchingWithOptions:launchOptions];
}

@end 
```

此外，如评论中所述，您需要链接 AVFoundation 框架，如[本答案](https://stackoverflow.com/questions/19337890/how-to-add-an-existing-framework-in-xcode-5/19337932#19337932)所述：

*   用 xcode 打开你的项目`open ./platforms/ios/MyApp.xcworkspace/`
*   项目导航器 > 目标我的应用程序 > 常规
*   滚动到底部以查找链接的框架和库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-05T01:51:10.137

此插件将使您的应用忽略静音开关。它与其他答案中的代码基本相同，但它被很好地包装在插件中，因此您不必进行任何手动目标 c 编辑。

[https://github.com/EddyVerbruggen/cordova-plugin-backgroundaudio](https://github.com/EddyVerbruggen/cordova-plugin-backgroundaudio)

运行以下命令将其添加到您的项目中：

```
cordova plugin add https://github.com/EddyVerbruggen/cordova-plugin-backgroundaudio.git 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-04T03:39:31.183

斯威夫特语法：

在 AppDelegate 中：

```
import AVFoundation

func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -> Bool {
  do{
      let audio = AVAudioSession.sharedInstance()
      try audio.setCategory(AVAudioSessionCategoryPlayback)
  }catch let error as NSError{
     print(error)
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-18T13:20:01.157

这里 SWIFT 2.0 版本在创建 UIWebView 之前将音频会话类别设置为“播放”。

```
do {
    try AVAudioSession.sharedInstance().setCategory(AVAudioSessionCategoryPlayback)
}
catch let error as NSError {
    print(error)  
}

do {
    try AVAudioSession.sharedInstance().setActive(true)
}
catch let error as NSError {
    print(error)  
} 
```

# python - 如何将 virtualenv 脚本安装到 /usr/bin

> ID：11616003
> 
> 赞同：0
> 
> 时间：2012-07-23T15:50:29.827
> 
> 标签：python, virtualenv, pip

我用命令安装 virtualenv`sudo /usr/bin/pip-2.6 install virtualenv`

它说

```
Requirement already satisfied (use --upgrade to upgrade): 
virtualenv in /usr/local/lib/python2.6/dist-packages
Cleaning up... 
```

为什么 /usr/bin 中的 pip 指向 /usr/local/lib？

我需要将virtualenv脚本直接安装到/usr/bin，所以我写

```
sudo /usr/bin/pip-2.6 install --install-option="--install-scripts=/usr/bin" virtualenv 
```

但它再次回应

```
Requirement already satisfied (use --upgrade to upgrade): 
virtualenv in /usr/local/lib/python2.6/dist-packages
Cleaning up... 
```

添加 --upgrade 没有帮助。

如何将 virtualenv 脚本安装到 /usr/bin ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:00:51.623

对于您当前的问题，您可以先使用 pip 卸载 virtualenv，然后`--script-dir=DIR, -s DIR`使用`--install-option`.

至于您`pip`使用额外参数运行的问题并且安装似乎没有做任何事情，这可能会在[https://github.com/pypa/pip](https://github.com/pypa/pip)`develop`的分支上修复，如果没有，请在 GitHub 问题跟踪器上向我们提交错误以获取 pip。

至于为什么会这样 - 安装是基于 python 安装而不是 pip 的位置。Pip 在后台使用 setuptools/distribute 并符合运行它的 python 的配置。

您可以通过运行它来查看您正在使用的 python 版本安装到哪里——在这种情况下可能是`python2.6`查询`sys`模块。

```
 >>> import sys
>>> sys.prefix
>>> sys.exec_prefix 
```

也可以看看`distutils.sysconfig`

了解更多信息：

*   [安装 Python 模块](http://docs.python.org/install/index.html)
*   [安装工具](http://peak.telecommunity.com/DevCenter/setuptools)
*   [分发](http://packages.python.org/distribute/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T16:04:19.290

尝试：

```
sudo /usr/bin/pip-2.6 install --install-option="--prefix=/usr/bin" virtualenv 
```

（[来源](https://stackoverflow.com/questions/2915471/pip-how-do-i-install-a-python-package-into-a-different-directory)）。

# svn - svn 存储库搜索引擎 - 任何新的更新

> ID：11616008
> 
> 赞同：4
> 
> 时间：2012-07-23T15:51:04.120
> 
> 标签：svn, repository, search-engine

在 Google 和 Stack 上，我看不到 SVN Repository Search Engine 功能的障碍，我想知道是否有任何项目被强烈推荐或在雷达下显示出一些真正的希望。

我们有一个庞大的遗留代码仓库，虽然看起来很麻烦，但我们希望实现某种搜索功能。我确实看到了一些相关的 SO 问题，但似乎并没有积极开展所有项目。

寻找：

*   免费或低价（不包月，但如果价格合理，愿意购买）
*   我们的大部分代码库是 PHP/Python/Ruby 和一些 Java
*   能够搜索主干/分支/标签和修订

有关的：

*   [SVN 存储库搜索](https://stackoverflow.com/questions/254214/svn-repository-search)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:57:45.453

使用 git-svn 将其导入 Git，然后利用 Git 强大的搜索工具，例如。

`git log -S'ADDED-OR-REMOVED-TEXT' --author='Joe User' --since='last year'`

`git-svn`可以增量运行导入以使导入的存储库保持最新。

[完整的 git-log 手册页](https://www.kernel.org/pub/software/scm/git/docs/git-log.html)。

# java - android在应用程序启动时加载所有选项卡的内容

> ID：11616013
> 
> 赞同：1
> 
> 时间：2012-07-23T15:51:28.453
> 
> 标签：java, android

我的应用程序有一个 tabHost，它可以处理 5 个正确加载其活动的选项卡。但是，应用程序以选中的 tab1 开始，并且在用户单击相关选项卡之前不会加载 tab2 和后续的选项卡！在选择之前如何将内容加载到其他选项卡？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-15T00:45:05.880

我找不到加载所有选项卡的直接方法，但这种方法似乎效果很好。如果您有，比如说三个标签并希望它们一次全部加载，请将当前标签设置为最后一个标签，然后按照您想要显示的标签的方式进行操作，如下所示。每个选项卡都已加载，最后一个选项卡是显示的选项卡。

```
// Adding all TabSpec to TabHost
tabHost.addTab( tab0 );
tabHost.addTab( tab1 );
tabHost.addTab( tab2 );

// Preload tabs
tabHost.setCurrentTab( 2 );
tabHost.setCurrentTab( 1 );
tabHost.setCurrentTab( 0 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T15:55:49.917

我认为您无法预加载活动。但是您可以将所有视图放在同一个活动中。我在我的一些应用程序中使用 TabHost，您可以简单地在 xml 中定义不同的选项卡内容。这样，您不必为每个选项卡启动一个新活动，并且所有内容都会立即创建！

根据您正在开发的应用程序类型，这可能是一个解决方案。

# scrapy - 重新包装 Scrapy Spider 物品

> ID：11616014
> 
> 赞同：1
> 
> 时间：2012-07-23T15:51:30.050
> 
> 标签：scrapy, pipeline, web-crawler

为了使事情井井有条，我确定蜘蛛将填充三个项目类别。

每个项目类都有各种填充的字段。

```
class item_01(Item):
    item1 = Field()
    item2 = Field()
    item3 = Field()

class item_02(Item):
    item4 = Field()
    item5 = Field()

class item_03(Item):
    item6 = Field()
    item7 = Field()
    item8 = Field() 
```

有多个页面可以使用相同的项目进行爬网。在蜘蛛中，我使用 XPathItemLoader 填充“容器”。

目标是将项目传递给 mysql 管道以填充单个表。但问题就在这里。

当我产生三个容器（每页）时，它们作为三个单独的容器传递到管道中。他们作为自己的 BaseItem 通过管道并仅填充 mysql 表的部分，而将其他列保留为“NULL”。

我想做的是将这三个容器重新打包到一个 BaseItem 中，以便它们作为单个 ITEM 传递到管道中。

有人对重新包装这些物品有什么建议吗？无论是在蜘蛛还是管道中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:56:52.130

我做了这个 hack 来让事情动起来，但如果有人可以改进或暗示更好的解决方案，请分享。

像这样在蜘蛛中加载我的项目：

```
items = [item1.load_item(), item2.load_item(), item3.load_item()] 
```

然后我在蜘蛛之外定义了一个函数：

```
def rePackIt(items):
    rePackage = rePackageItems()
    rePack = {}
    for item in items:
        rePack.update(dict(item))

    for key, value in rePack.items():
        rePackage.fields[key] = value
    return rePackage 
```

我在哪里`items.py`添加：

```
class rePackageItems(Item):
    """Repackage the items"""
    pass 
```

蜘蛛完成爬取页面并加载我产生的项目后：

```
yield rePackIt(items) 
```

这将我带到`pipelines.py`.

在`process_item`解压物品时，我做了以下操作：

```
def process_item(self, item, spider):
        items = item.fields 
```

items 现在是一个字典，其中包含从蜘蛛中提取的所有字段，然后我将其插入到单个数据库表中

# json - 如何在不使用 org.json 的情况下将字符串值转换为 java 中的 json 对象

> ID：11616018
> 
> 赞同：1
> 
> 时间：2012-07-23T15:51:35.677
> 
> 标签：json, gwt

我正在尝试将 JSON 字符串值 `{"name:ganesh,sex:male,age:22"} ) 转换为在 gwt 中使用 json 设置的键和值，任何人都可以帮我一些想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:33:51.753

由于您不想使用 org.json，我想您需要在客户端转换 JSON。如果是这种情况，您将需要使用 GWT 的 JSON 库。通过将这些行添加到您的 .gwt.xml 文件中，可以将它们继承到您的 GWT 项目中：

```
<inherits name="com.google.gwt.json.JSON" />  
<inherits name="com.google.gwt.http.HTTP" /> 
```

您还需要将`com.google.gwt.json`包导入到您的类文件中。

[可以在此处找到在 GWT 中使用 JSON 的入门指南。](http://code.google.com/p/google-web-toolkit-doc-1-5/wiki/GettingStartedJSON)它还提供了解码 JSON 的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T03:39:24.213

Your string must be of the form

```
"{'name':'ganesh','sex':'male','age':'22'}" 
```

or '{"name":"ganesh","sex":"male","age":"22"}'

You can use one of the following ways ...

*   Use javascript eval. Embed the eval in JSNI

    ```
    public static native String eatString(String jstring) /*-{
      eval("var hello = " + jstring + ";");
      return hello;
    }-*/; 
    ```

*   Pass the String as script in a JSP GWT hosting file. This way, you can only doing once - when the GWT app is loaded with its hosting file. Your JSP will generate the javascript dynamically for each loading.

    Place the following in hour GWT hosting html file, before the script tag where GWT module is called.

    ```
    <script>
    var hello = {'name':'ganesh','sex':'male','age':'22'};
    </script> 
    ```

    Then in your GWT app, use the GWT Dictionary class to reference any javascript objects declared in the hosting file.

*   Use the following utilities, in particular JsonRemoteScriptCall.java to read remote, out of SLD-SOP javascript objects into your GWT app. [http://code.google.com/p/synthfuljava/source/browse/trunk/gwt/jsElements/org/synthful/gwt/javascript/#javascript%2Fclient](http://code.google.com/p/synthfuljava/source/browse/trunk/gwt/jsElements/org/synthful/gwt/javascript/#javascript%2Fclient).

    Please be warned - out of SLD-SOP objects can be hazardous. Read up on Second level domain, same origin policy browser security.

*   Use RestyGWT and pretend that the data from the server comforms to REST data structure. But of course, use of json.org and google JSON utils has already been done for you.

# asp.net - 部署到服务器时文件路径不正确

> ID：11616023
> 
> 赞同：1
> 
> 时间：2012-07-23T15:51:55.497
> 
> 标签：asp.net, relative-path

我正在开发一个 asp.net mvc3 应用程序

我想在视图中使用一些 javascript 库。我以这种方式包含它

```
<script type="text/javascript" language="javascript" src="../../Scripts/UserScript.js" ></script> 
```

在本地它有效。但是，当我在服务器上部署时，找不到脚本文件。

我做了一些研究，发现它使用的 url as: `Root/Scripts/UserScript.js`while it should use`Root/MyApplicationName/Scripts/UserScript.js`

我怎样才能让它使用正确的路径？从逻辑上讲，它应该可以工作，因为 ../../ 给了我们相对路径。为什么要从根开始？

我还检查了服务器上的构建，它具有与本地相同的架构（相同的文件夹树）。

顺便说一句，这对于任何文件都是一样的（所有以 ../../ 开头的图片、脚本和 css）

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T15:53:39.177

在本地，您的 Web 服务器（IIS 或[Cassini](http://www.codeproject.com/Articles/261043/An-Introduction-to-Cassini-Web-Dev-WebServer)）使用虚拟应用程序，因此您的站点的根不是，比如说，`http://localhost/`而是`http://localhost/MyApplicationName`.

另一方面，在您的生产服务器上，它是一个完整的 IIS 安装，您的网站被定义为根应用程序（网站）。这就是为什么在本地你有额外的目录级别。

在我看来，最佳实践是在您的开发机器上安装完整的 IIS（或 IIS Express）并将您的站点定义为根应用程序（网站），因此您将针对与您的环境相似的环境进行编程正在部署。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T15:55:35.610

你可以使用 Razor 语法并以这种方式定位它吗？

```
<script type="text/javascript" language="javascript" src="@Url.Content("~/Scripts/UserScript.js" )" ></script> 
```

# php - 如何处理 phpThumb src 前缀？

> ID：11616029
> 
> 赞同：0
> 
> 时间：2012-07-23T15:52:16.190
> 
> 标签：php, phpthumb

由于我使用的框架中的文件夹结构（蛋糕），我被迫使用“../../”作为 src 参数的前缀。

```
<img src="$path_to_phpThumb?src=../../my_image.ext" /> 
```

为了获得红色的 "../../" ，建议如何做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:59:14.843

您可以使用别名将请求重定向到图像所在的位置。

即在 apache 中，以下将 src="/img/foo.jpg" 映射到下面的路径

```
Alias /img /var/www/html/app/webroot/images 
```

# c# - 从 C# 客户端调用 MATLAB 软件 - 获取标量结果

> ID：11616030
> 
> 赞同：0
> 
> 时间：2012-07-23T15:52:23.403
> 
> 标签：c#, matlab

我目前正在使用这个初步代码：

```
static void Main(string[] args)
{
    try
    {
    Type matlabtype;
    matlabtype = Type.GetTypeFromProgID("matlab.application");

    object matlab;
    matlab = Activator.CreateInstance(matlabtype);

    Execute(matlabtype, matlab, "clear;");
    Execute(matlabtype, matlab, "path(path,'H:/bla/bla');");
    Execute(matlabtype, matlab, "Object = ClassName();");
    Execute(matlabtype, matlab, "Object.parameter1 = 100;");
    Execute(matlabtype, matlab, "Object.parameter2 = 300;");
    object o = Execute(matlabtype, matlab, "Object.ComputeSomething()");
    }
    catch (Exception e)
    {

    }
} 
```

要创建特定类的对象，设置一些属性并计算一些东西。这里：

计算东西（）；

返回一个标量。

我只是想知道这是否是最好的编程方法，以及在不使用字符串操作（例如删除 ans =）的情况下获得实际标量值的最简洁方法是什么？

谢谢。

基督教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T13:06:31.420

您可以使用一些命令从 matlab 中检索数据。要获得标量，您可以调用 GetVariable。

```
Execute(matlabtype, matlab, "result = Object.ComputeSomething()");
GetVariable(matlabtype, matlab, "result", "base") 
```

有关可用调用，请参阅[调用 MATLAB COM 自动化服务器](http://www.mathworks.com/help/matlab/call-matlab-com-automation-server.html)。

# jquery - 一个易于实现的 HTML5 表单验证回退

> ID：11616032
> 
> 赞同：0
> 
> 时间：2012-07-23T15:52:32.367
> 
> 标签：jquery, forms, validation, modernizr

我正在为一个有联系表的客户开发一个网站。客户希望表单错误在页面上弹出，而不是在新页面中打开。这在 Firefox 和 Chrome 等最新的浏览器中完美运行（使用“必需”标签），但不适用于许多其他浏览器。

是否有易于实施的后备方案？我玩过 Modernizr 脚本，但它并没有改变任何东西。

[http://jshjohnson.com/MF/contact.html](http://jshjohnson.com/MF/contact.html)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:57:26.927

当然，HTML5 验证在不完全支持它的浏览器中会失败（因为它依赖于浏览器）。

Modernizr 仅检测浏览器功能。因此，您可以使用它来检测是否不支持验证，然后添加 fx. 一个 jquery 验证库。

您可以使用像[http://afarkas.github.com/webshim/demos/demos/webforms.html这样的库](http://afarkas.github.com/webshim/demos/demos/webforms.html)

# google-maps - 使用 Google Maps API v3 进行地理编码 - 将原始请求链接到响应

> ID：11616033
> 
> 赞同：0
> 
> 时间：2012-07-23T15:52:32.577
> 
> 标签：google-maps, asynchronous, google-maps-api-3, jquery-deferred

我有一份我想在谷歌地图上绘制的学校列表。我正在使用[Google 的地理编码服务](https://developers.google.com/maps/documentation/javascript/geocoding)来查找给定邮政编码的 lng/lat，在成功检索此信息后，我想删除一个标记，并添加适当的事件侦听器，当单击给定标记时打开一个信息框。

当我向地理编码器发出请求时，它是在学校的上下文中，当我收到回调时，我失去了这个上下文。你会从下面的代码中看到，我想出了一个笨拙的解决方案，尽管当地理编码器结果截断邮政编码时它偶尔会失败。

我应该使用[jQuery 的 Deferred Object 之](http://api.jquery.com/category/deferred-object/)类的东西来解决这个问题吗？

```
var geocoder;
var map;
var infowindow
var iterator = 0;
geosearch = new Array();

function drop() {
  for (var i = 0; i < schools.length; i++) {
    setTimeout(function() { // delay added to prevent being throttled
      addMarker();
      iterator++;
    }, i * 1000);
  }
}

function addMarker() {
  address = schools[iterator].addresses[0].address.zip;
  geosearch[address] = schools[iterator]; // this is how I'm keeping track of initial request

  geocoder.geocode( { 'address': address }, function(results, status) {
    var school = geosearch[results[0].address_components[0].short_name]; // loading the school associated with the initial request, which only works if the postcode completely matches up - clunky!

    if (status == google.maps.GeocoderStatus.OK) {

      // each school has tags, I want to set a marker if certain tags exist
      if ($.inArray('D', school.tags) > 0) {
        var image = 'map_markers/brown_MarkerD.png';
      } else if ($.inArray('C', school.tags) > 0) {
        var image = 'map_markers/red_MarkerC.png';
      } else if ($.inArray('B', school.tags) > 0) {
        var image = 'map_markers/yellow_MarkerB.png';
      } else if ($.inArray('A', school.tags) > 0) {
        var image = 'map_markers/green_MarkerA.png';
      } else {
        var image = 'map_markers/blue_MarkerZ.png';
      }

      // add the marker to the map, using result
      var marker = new google.maps.Marker({
          map: map,
          position: results[0].geometry.location,
          draggable: false,
          icon: image,
          shadow: 'http://www.google.com/mapfiles/arrowshadow.png',
          animation: google.maps.Animation.DROP
      });

      // adds listening on marker so that popup box appears when clicked
      google.maps.event.addListener(marker, 'click', (function(marker, school) {
        return function() {
          infowindow.setContent(
            '<a href="https://vitalcpd.highrisehq.com/companies/'+school.id+'" target="_blank">'+school.name+'</a>'
            +'<address>'
            +school.addresses[0].address.street+'<br />'
            +school.addresses[0].address.city+'<br />'
            +school.addresses[0].address.state+'<br />'
            +school.addresses[0].address.zip+'<br />'
            +school.addresses[0].address.country+'<br />'
            +'</address>');
          infowindow.open(map, marker);
        }
      })(marker, school));

    } else {
      console.log("* NOT found: " + status);
    }
  });
}

function initialise() {
  geocoder = new google.maps.Geocoder();
  infowindow = new google.maps.InfoWindow();
  var latlng = new google.maps.LatLng(54.82659788452641,-3.417279296874991);
  var mapOptions = {
    zoom: 6,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

  drop(); // loops through schools to add marker
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T22:58:45.877

我建议离线对地址进行地理编码并将坐标存储在数据库中（或存储地址的任何地方）。然后使用坐标显示标记。

我还建议[从文档中查看有关地理编码策略的这篇文章](https://developers.google.com/maps/articles/geocodestrat)

要回答您的问题，我建议使用 javascript 函数闭包将地址与回调函数相关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T09:51:41.360

我在这里遇到的问题只是范围问题，尤其是我在`addMarker()`函数中引用学校的方式。`schools`我没有使用全局变量在数组中引用学校`iterator`，而是传入这个学校，这样在这个范围内创建的回调中总是引用正确的学校。

```
var geocoder;
var map;
var infowindow
var iterator = 0;

function drop() {
  for (var i = 0; i < schools.length; i++) {
    setTimeout(function() {
      addMarker(schools[iterator]); // pass in the school as an argument
      iterator++;
      $('#current_school').text(iterator); // taken this out of addMarker()
    }, i * 1000);
  }
}

function addMarker(school) {
  geocoder.geocode( { 'address': school.addresses[0].address.zip }, function(results, status) {
    ... // the inners from here remain the same
  });
} 
```

# python - 带有网格管理器问题的 Tkinter 嵌套框架

> ID：11616038
> 
> 赞同：1
> 
> 时间：2012-07-23T15:52:56.403
> 
> 标签：python, layout, nested, tkinter, frames

我正在使用 python 2.6 和随附的标准 Tkinter 重新设计界面的布局。麻烦的是我注意到一些奇怪的行为，而且我是 Tkinter 的新手，所以这可能只是我因为缺乏经验而忽略的一些简单的事情。

以下是我如何在主框架内嵌套框架以获得所需布局的一些示例代码：

```
import Tkinter as tk

root = tk.Tk()

master = tk.Frame(root)

frame = tk.Frame(master).grid(sticky = tk.W)

item1 = "Label One"
L1 = tk.Label(frame, text = item1).grid(sticky = tk.W)

b1 = tk.Button(frame, text = "Button 1").grid(sticky = tk.W)

find = tk.Label(frame, text = "Find").grid(sticky = tk.W)

item = tk.Entry(frame, width = 50).grid(sticky = tk.W)
##item.insert(0,"Enter Item to Search For")

L2 = tk.Label(frame, text = "Label Two").grid(sticky = tk.W)

search = tk.Button(frame, text = "Search").grid(row = 3, column = 0)

frame2 = tk.Frame(master).grid(sticky = tk.W)

list1 = tk.Listbox(frame2, width = 100).grid(sticky = tk.W)

##yscroll = tk.Scrollbar(frame2,orient = tk.VERTICAL,command = list1.yview).grid(row = 5, column = 1, sticky = tk.N + tk.S + tk.W)
yscroll = tk.Scrollbar(frame2, orient = tk.VERTICAL).grid(row = 5, column = 1, sticky = tk.N + tk.S + tk.W)
##list1.configure(yscrollcommand = yscroll.set)

##xscroll = tk.Scrollbar(frame2, orient = tk.HORIZONTAL, command = list1.xview).grid(sticky = tk.W + tk.E)
xscroll = tk.Scrollbar(frame2, orient = tk.HORIZONTAL).grid(sticky = tk.W + tk.E)
##list1.configure(xscrollcommand = xscroll.set)

root.mainloop() 
```

当我尝试在条目小部件中插入默认值时会发生以下错误，并且在我开始嵌套框架之前它就起作用了：

```
Traceback (most recent call last):
   File "H:\Tkinter\Grid.py", line 17, in <module>
    item.insert(0,"Enter Item to Search For")
AttributeError: 'NoneType' object has no attribute 'insert' 
```

示例代码中所有注释掉的行都发生了类似的错误。这些是我需要执行的操作，因为当前滚动条无法正常工作，因为我无法告诉它们在滚动时更改列表。

1.当你像这样嵌套框架时，我是否必须以不同的方式访问小部件的变量？

2.当我使用嵌套框架并且孩子和父母都使用网格时，为什么我的小部件放置只对应于主人的行数和列数？如果你看一下 Y 轴滚动条的行，我不得不做 row = 5, col = 1 的主人。我相信它应该是 frame2 的第 0 行，第 1 列，因为小部件的父级设置为 frame2，我希望 frame2 也使用网格，但它似乎使用主框架网格。

3.是否可以在不同的框架中显示网格线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T16:00:11.313

使用时`Tkinter`，您不应该同时创建一个对象和`grid`它。

```
bad = tk.Button(frame).grid()  #"bad" is None since .grid returns None

good = tk.Button(frame)
good.grid() 
```

要获取特定网格小部件的信息（例如单元格），您可能需要使用[grid_info](http://effbot.org/tkinterbook/grid.htm)方法。

# assembly - 清单文件中的括号是什么意思

> ID：11616041
> 
> 赞同：0
> 
> 时间：2012-07-23T15:53:02.063
> 
> 标签：assembly

清单文件中括号的含义是什么？例如，

```
0000001C E8(00000000) 
```

还有其他类型的括号可以吗？它们是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T15:55:27.060

他们显示了在链接时将应用重定位的位置。

[nnnnnnnn] 显示绝对重定位（链接器执行重定位时，某些节的基地址将添加到偏移量）。例如，一旦二进制完全链接，push str2 指令中的那些字节将被更改为包含.data + 0x09 的基地址。

(nnnnnnnn) 显示 PC 相对重定位（用于调用和分支，其中最终值必须相对于下一条指令的地址）。例如，调用 func2 指令中的字节将使用 func2 的最终地址与下一条指令（调用 func3）的地址之间的差值进行更新。

call func3 指令本身没有括号，因为在这种情况下不需要重定位 - call 指令需要一个相对地址，但 func3 在同一段内，因此相对地址是已知的（以下指令位于 .text + 0x21，而func3在.text + 0x2c，所以无论.text的最终地址如何，相对地址都是0xb）。

发现于：[这里](https://stackoverflow.com/questions/11274778/what-is-the-meaning-of-parentheses-in-opcodes-in-a-nasm-generated-listing-file)

# jquery - jQuery 语句没有延迟

> ID：11616043
> 
> 赞同：-2
> 
> 时间：2012-07-23T15:53:12.573
> 
> 标签：jquery

我想让一些角色逐渐出现，所以我建立了这个脚本。然而，延迟似乎根本没有执行——我试图把它放到数千个，结果没有改变。我想念什么？

```
$(document).ready(function () {

    var 
        i,
        d = [500, 300, 600, 1000],
        t = "String";

    $("body")
        .delay(flashDuration[0])
        .animate({ backgroundColor: "#888888" }, d[1])
        .animate({ backgroundColor: "#222222" }, d[2])
        .animate({ backgroundColor: "#F8ECC2" }, d[3], null, function () {
            for (i = 0; i < t.length; i++)
                $("<span>" + t.substr(i, 1) + "</span>")
                    .addClass("hidden")
                    .delay(i * 2000) /* this delay doesn't execute */
                    .addClass("visible")
                    .appendTo("#floatingName");

        });
}); 
```

请不要因为 d 是持续时间而 t 是标题而咬我的头。我缩写了这些名称，因为每个程序员都喜欢神秘的、非自我解释的、简短的变量名。对？说真的，我试图避免包装。

另外，我尝试在[此处](http://jsfiddle.net/Chamster/8XUpL/1/)的 jsFiddle 上发帖，但该示例甚至没有闪烁屏幕，更不用说正确执行延迟了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T16:02:02.593

animate() 的第二个参数是动画应该动画结束的时间。不是动画开始之前的时间。您应该在链中的每个 animate() 之间放置 delay() 。

```
$("body")
    .delay(flashDuration[0])
    .animate({ backgroundColor: "#888888" }).delay(d[1])
    .animate({ backgroundColor: "#222222" }).delay(d[2]) 
```

等等...

您还可以使用 animate() 的 queue 选项来使动画堆叠而不是立即运行。

所有解释在这里 [http://api.jquery.com/animate/](http://api.jquery.com/animate/)

* * *

**编辑**

延迟不会延迟脚本的执行，它只会延迟动画队列中的下一个项目。所以不能这样使用。您应该改用 setTimeout。

[http://api.jquery.com/delay/](http://api.jquery.com/delay/)

> .delay() 方法最适合在排队的 jQuery 效果之间进行延迟。因为它是有限的——例如，它不提供取消延迟的方法——.delay() 不能替代 JavaScript 的本机 setTimeout 函数，这可能更适合某些用例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T16:10:49.340

据我所知，jQuery 本身仍然不支持彩色动画。

这是您在 jsFiddle 上的代码版本，其中包含彩色动画扩展：

[http://jsfiddle.net/8XUpL/4/](http://jsfiddle.net/8XUpL/4/)

# javascript - 多个 OnClick JQuery 事件触发

> ID：11616049
> 
> 赞同：-1
> 
> 时间：2012-07-23T15:53:21.233
> 
> 标签：javascript, jquery, html

我有一个带有 div 和一个按钮的页面。我已经为它们添加了 onClick 事件。现在，当我单击 div 上的按钮时，也会执行 div 的 onClick。有什么办法可以避免这种情况吗？

谢谢你，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T15:58:07.813

试试这个，将事件作为参数传递给你的 onclick 事件并调用

```
event.stopPropagation();
event.preventDefault(); 
```

您的 onclick 事件分配应该是：

```
$(button).click(function(event) {
    // script here
    event.stopPropagation();
    event.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T16:01:08.613

在您的点击处理程序中，您可能希望使用“stopPropagation”，例如：

```
$("button").click(function(e) {
    // handle this event
    // ...

    // don't pass this event up to parent handlers
    e.stopPropagation();

} ); 
```

还有一个您可能想要阅读的相关功能，称为“preventDefault”，它告诉浏览器不要执行它通常自动执行的操作（例如，单击提交按钮时提交页面）

另请参阅： [https ://developer.mozilla.org/en/DOM/event.stopPropagation](https://developer.mozilla.org/en/DOM/event.stopPropagation) [http://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/) [将“return false”添加到单击事件侦听器有什么效果？](https://stackoverflow.com/questions/128923/whats-the-effect-of-adding-return-false-to-an-onclick-event) [http://fuelyourcoding.com/jquery-events-stop-misusing-return-false/](http://fuelyourcoding.com/jquery-events-stop-misusing-return-false/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T15:57:27.467

在链接元素的侦听器中，您可以放置`e.stopPropagation()`​​ ，这应该可以修复它（如果您正在使用事件冒泡）。

如果您不使用 jQuery，请确保将`useCapture`参数设置`addEventListener()`为`False` [info - MDN](https://developer.mozilla.org/en/DOM/element.addEventListener)；你想确保你知道你的事件在 DOM 中移动的方向（你希望它们冒泡）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T15:58:04.430

您需要防止按钮 onClick 事件冒泡到 Div。所以基本上在按钮的 onClick 函数结束时，一旦你完成了所有逻辑，你需要调用 event.stopPropagation()

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-11T13:02:55.590

如果以上都不起作用，请尝试：

```
$("button").click(function(e) {
    e.stopImmediatePropagation();
}); 
```

# facebook - 是否有 Facebook 开发电子邮件列表

> ID：11616056
> 
> 赞同：-2
> 
> 时间：2012-07-23T15:53:47.607
> 
> 标签：facebook, list, sharing, mailing

Facebook 何时部署更改其共享按钮/功能的邮件列表将非常有用。*有时*Facebook 所做的更改会改变我们网站的性能，我想在更改时运行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:57:39.637

[http://developers.facebook.com/support/community/](http://developers.facebook.com/support/community/)它本身并不是一个邮件列表，但您可以通过多种方式了解最新的 FB 技术动态。

干杯!

辛西娅

# visual-studio-2008 - 在源代码编辑器之外编辑时自动在 Visual Studio 中重新加载 Web 配置文件？

> ID：11616059
> 
> 赞同：0
> 
> 时间：2012-07-23T15:54:04.467
> 
> 标签：visual-studio-2008, web-config, reload

我的 web.config 文件中有大量的连接字符串，我往往不得不频繁地来回切换。这目前涉及注释掉当前的配置，并取消注释所需的配置。

我有点厌烦不得不一直这样做，并且想制定一个自动执行此操作的解决方案，例如，只需从下拉列表中选择相关的连接字符串并运行项目。我认为使用 vb.net 和正则表达式编写一个应用程序来执行此操作非常简单。

我遇到的问题是，一旦我编辑了 web.config，我就会在 Visual Studio 中收到一条消息；“此文件已在源代码编辑器之外进行了修改。您要重新加载它吗？” 有没有办法从 Visual Studio 外部重新加载文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T15:58:31.777

您不需要创建应用程序来执行此操作，您可以使用 web.config 转换，只需从列表框中为您的 web.config 选择配置，Visual Studio 将为您完成

这些参考：

[http://blogs.msdn.com/b/webdevtools/archive/2009/05/04/web-deployment-web-config-transformation.aspx](http://blogs.msdn.com/b/webdevtools/archive/2009/05/04/web-deployment-web-config-transformation.aspx)

[http://weblogs.asp.net/srkirkland/archive/2009/10/13/common-web-config-transformations-with-visual-studio-2010.aspx](http://weblogs.asp.net/srkirkland/archive/2009/10/13/common-web-config-transformations-with-visual-studio-2010.aspx)

[http://weblogs.asp.net/gunnarpeipman/archive/2009/06/16/visual-studio-2010-web-config-transforms.aspx](http://weblogs.asp.net/gunnarpeipman/archive/2009/06/16/visual-studio-2010-web-config-transforms.aspx)

# html - 调整文本大小时 HTML 标记不起作用

> ID：11616064
> 
> 赞同：0
> 
> 时间：2012-07-23T15:54:11.173
> 
> 标签：html, flash, actionscript, resize, textfield

我有一个动态填充的文本字段。如果填充的文本不适合文本字段，则会调整文本大小。HTML 标记在动态填充的文本中正常工作，但前提是文本未调整大小。*HTML 标记在调整大小的文本中被完全忽略。*有任何想法吗？

**文本字段的代码：**

```
 import flash.text.TextFormat;
    import flash.text.Font;
    //
    function setDesc(str:String):void{
      var fmtD:TextFormat;
      var cfmtD:TextFormat = this.desc_txt.getTextFormat()==null ? this.desc_text.defaultTextFormat : this.desc_txt.getTextFormat();
      var sizeD:int = 22;
      desc_txt.htmlText = str;
      while(sizeD>10 && sizeD<23 && desc_txt.textHeight>255){
         sizeD--;
         fmtD = new TextFormat(descFont.fontName,sizeD,0x000000,false, false,false);
         desc_txt.htmlText = str;
         desc_txt.setTextFormat(fmtD);
      } 
} 
```

**填充文本字段的代码：**

```
 function openDialog(e:MouseEvent){
    dialog_window.doOpen();
      switch(e.currentTarget.name){
         case "btn_structure":
            dialog_window.setTitle("Business Structure:");
            dialog_window.setDesc("This topic discusses the <b>basic</b> structure of the business area.");
         break;
         case "btn_services":
            dialog_window.setTitle("Services Provided:");
            dialog_window.setDesc("This topic provides <i>information</i> about the services offered by the Client Billing Services unit.");
         break;
    }    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:37:41.090

尝试将**while 循环**中的**最后两行**更改为：

 **```
desc_txt.defaultTextFormat = fmtD;
desc_txt.htmlText = str; 
```

您可以在此处阅读有关[使用 html 标记和 as3 TextFormat 类的更多信息](http://www.thumbleaf.com/journal/?p=210)

编辑：

我只是使用您的代码设置了这个简单的示例，并且文本格式（字体类型和大小）和 html 标签（粗体和斜体）都可以完美地工作：

```
import flash.text.TextField;
import flash.text.TextFormat;

var sizeD:uint = 22;
var desc_txt:TextField = new TextField();
addChild(desc_txt);

var str:String = "This topic <i>discusses</i> the <b>basic</b> structure of the business area. This topic <i>discusses</i> the <b>basic</b> structure of the business area.This topic <i>discusses</i> the <b>basic</b> structure of the business area. This topic <i>discusses</i> the <b>basic</b> structure of the business area.";

var fmtD:TextFormat;
fmtD = new TextFormat("Verdana",sizeD,0x000000,false, false,false);

desc_txt.width=450;
desc_txt.height=150;
desc_txt.wordWrap=true;

desc_txt.defaultTextFormat = fmtD;
desc_txt.htmlText = str;

var maxHeight = 150;

trace(sizeD+" - "+ desc_txt.textHeight);
while(sizeD>10 && sizeD<23 && desc_txt.textHeight>maxHeight)
{
  trace("--> inside while loop");
  sizeD--;
  fmtD = new TextFormat("Verdana",sizeD,0x000000,false, false,false);
  desc_txt.defaultTextFormat = fmtD;
  desc_txt.htmlText = str;

}
trace(sizeD+" - "+desc_txt.textHeight); 
```**

# maven - 我更新到java7的时候第二级maven java编译器错误信息去哪了？

> ID：11616066
> 
> 赞同：1
> 
> 时间：2012-07-23T15:54:21.123
> 
> 标签：maven, java-7

使用java6时看到两级错误信息

*   错误：file:[line,char] 错误：找不到符号
*   详细信息：符号：方法....位置：类com.....

现在，我更新到 java7 我不再有这些信息。如果我使用“-Xlint:all”手动编译，我会看到详细信息。由于某种原因，maven 没有显示详细信息。

如果您有任何解决此问题的想法，请告诉我。

谢谢

彼得

**使用 Java 6 很好**

```
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] warntest/src/main/java/com/attivio/foo/App.java:[9,1] cannot find symbol
symbol  : class DoesNotExistType
location: class com.foo.App 
```

**使用 Java 7 的信息更少**

```
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] warntest/src/main/java/com/attivio/foo/App.java:[9,1] error: cannot find symbol
[INFO] 1 error 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T20:31:59.177

这是一个已知问题：http: [//jira.codehaus.org/browse/MCOMPILER-158](http://jira.codehaus.org/browse/MCOMPILER-158)

# sql - 所有运算符导致 ORA-00936: 缺少表达式

> ID：11616070
> 
> 赞同：1
> 
> 时间：2012-07-23T15:54:28.513
> 
> 标签：sql, oracle

执行 follow 语句时收到错误消息：

```
UPDATE dept d 
SET city = ALL (SELECT city FROM locations l 
                WHERE d.location_id = l.location_id); 
```

当我摆脱 ALL 运算符时，成功。

```
UPDATE dept d 
SET city = (SELECT city FROM locations l 
            WHERE d.location_id = l.location_id); 
```

有人能告诉我“ALL”运算符是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:00:09.623

`ALL`保留字用于 select 语句中的 suqueries，但不适用于 UPDATE 语句。

[使用所有 Oracle Doc](http://docs.oracle.com/cd/E17952_01/refman-5.1-en/all-subqueries.html)引用子查询：

> ALL 必须跟在比较运算符之后，意思是“如果子查询返回的列中的所有值的比较结果为 TRUE，则返回 TRUE。”</p>

这意味着`=`符号应该用作比较，而不是分配。

如果您希望子查询返回多于一行，您可以使用 max 或 rownun 限制结果：

```
UPDATE dept d 
SET city = (SELECT max( city ) FROM locations l 
            WHERE d.location_id = l.location_id); 
```

# c# - 需要使用大于或小于比较两个通用对象

> ID：11616073
> 
> 赞同：10
> 
> 时间：2012-07-23T15:54:32.480
> 
> 标签：c#, comparison

**概要：**我需要获取两个通用 C# 对象，如果它们是数字的，则使用小于或大于比较来比较它们。

**问题**：我不知道如何让我的类实现 IComparable ，如本文所述：[必须实现通用的小于和大于操作](https://stackoverflow.com/questions/2357410/having-to-implement-a-generic-less-than-and-greater-than-operation)。如果这甚至不是正确的路径，那么我也需要知道这一点。

**背景：**我已经实现了在[更复杂的自定义验证器](http://www.devtrends.co.uk/blog/the-complete-guide-to-validation-in-asp.net-mvc-3-part-2)中找到的RequiredIf ValidationAttribute，但除了等于比较之外还需要 > 和 < 选项。

**代码**（取自[更复杂的自定义验证器](http://www.devtrends.co.uk/blog/the-complete-guide-to-validation-in-asp.net-mvc-3-part-2)，页面下方三分之一处）：

```
private bool IsRequired(object actualPropertyValue)
{
  switch (Comparison)
  {
    case Comparison.IsLessThan:
    case Comparison.IsLessThanOrEqualTo:
    case Comparison.IsGreaterThan:
    case Comparison.IsGreaterThanOrEqualTo:
      if (!Value.IsNumber())
      {
        throw new Exception("The selected comparison option is only applicable to numeric values");
      }
      break;
  }

  switch (Comparison)
  {
    case Comparison.IsNotEqualTo:
      return actualPropertyValue == null || !actualPropertyValue.Equals(Value);
    case Comparison.IsEqualTo:
      return actualPropertyValue != null && actualPropertyValue.Equals(Value);
    case Comparison.IsGreaterThan:
      // THIS LINE FAILS BECAUSE actualPropertyValue DOESN'T IMPLEMENT IComparable 
      return actualPropertyValue != null && (actualPropertyValue.CompareTo(Value) > 0); 
    // The rest of the comparison cases go here...
    default:
      throw new Exception("Comparison value is not defined");
  }
} 
```

**静态助手扩展：**

```
public static bool IsNumber(this object value)
{
  if (value is sbyte) return true;
  if (value is byte) return true;
  if (value is short) return true;
  if (value is ushort) return true;
  if (value is int) return true;
  if (value is uint) return true;
  if (value is long) return true;
  if (value is ulong) return true;
  if (value is float) return true;
  if (value is double) return true;
  if (value is decimal) return true;
  return false;
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-23T15:58:13.860

听起来您应该只能投射`actualPropertyValue`到`IComparable`：

```
IComparable comparable = (IComparable) actualPropertyValue;
return comparable != null && comparable.CompareTo(Value) > 0; 
```

请注意，您对“通用”一词的使用在这里很奇怪。如果你*真的*让它通用，你可以写：

```
private bool IsRequired<T>(T actualPropertyValue) where T : IComparable 
```

那你就不需要演员表了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T16:04:01.993

```
int MyCompare (object a, object b)
{
   var ac = a as IComparable;
   var bc = b as IComparable;

    if (ac == null || bc == null)
       throw new NotSupportedException();

    return ac.CompareTo(bc);
 } 
```

# python - 用可迭代的东西替换函数

> ID：11616080
> 
> 赞同：3
> 
> 时间：2012-07-23T15:55:04.193
> 
> 标签：python, recursion, yield

简而言之。我该如何写除此之外的其他内容：`for another in combinationOfK(K-1, L[i+1:]):`我的函数 combinationOfK(...) 不可迭代。

我试图从[这里](http://wiki.python.org/moin/ProblemSets/99%20Prolog%20Problems%20Solutions#Problem_26:_Generate_the_combinations_of_K_distinct_objects_chosen_from_the_N_elements_of_a_list)理解代码，解决方案。`Problem 26: Generate the combinations of K distinct objects chosen from the N elements of a list`
我知道 yield 的作用。但我试图在没有声明*的情况下编写代码*`yield`。*带有 yield 语句*的代码 是这样的。

```
def combination(K, L):
    if K<=0:
        yield []
        return
    for i in range(len(L)):
        thisone = L[i:i+1]
        for another in combination(K-1, L[i+1:]):
            yield thisone + another 
```

[这个问题`yield-keyword-explained`](https://stackoverflow.com/questions/231767/the-python-yield-keyword-explained/237028#237028)让我想到我可以取代产量。他们给的收据对我不起作用，是：

> 当你看到一个带有`yield`语句的函数时，应用这个简单的技巧来理解会发生什么：
> 
> 1.  `result = []`在函数的开头插入一行。
> 2.  将每个替换`yield expr`为`result.append(expr)`。
> 3.  `return result`在函数底部插入一行。
> 4.  是的 - 没有更多的`yield`声明！阅读并找出代码。
> 5.  将函数恢复为原始定义。

* * *

使用它来获取没有收益的代码给我这个。代码不工作（函数不可迭代）。*我必须写什么才能让这段代码在没有产量的情况下工作？*

```
def combinationOfK(K,L):
    result = []
    if K <= 0:
        result.append([])
        return
    for i in range(len(L)):
        thisone = L[i:i+1]
        for another in combinationOfK(K-1, L[i+1:]):  # the error
            result.append(thisone + another)
    return result 
```

我正在使用此代码来测试功能，

```
the_list = ['a','b','c','d','e']
print list(combinationOfK(2, the_list)) 
```

引发错误`TypeError: 'NoneType' object is not iterable`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T16:31:50.323

问题是您的原始代码`return`以不寻常的方式使用。

```
def combination(K, L):
    if K<=0:
        yield []
        return    #  <--- hmmm 
```

大多数时候你不会`return`在生成器中看到它，因为你并不经常需要它。通常，生成器最后会简单地“脱落”。解释器在没有遇到语句的情况下到达生成器的末尾`return`，然后它知道 throw `StopIteration`。

在*这种*情况下，代码的编写者插入了一条`return`语句来“加快”进程。当 时`K <= 0`，没有更多的工作要做，所以生成器可以抛出`StopIteration`——但没有`return`语句，它会进入`for`循环，产生不正确的结果。在我看来，一个更清晰的方法是这样的：

```
def combination(K, L):
    if K<=0:
        yield []
    else:
        for i in range(len(L)):
            thisone = L[i:i+1]
            for another in combination(K-1, L[i+1:]):
                yield thisone + another 
```

现在转换按预期工作：

```
def combination2(K, L):
    result = []
    if K <= 0:
        result.append([])
    else:
        for i in range(len(L)):
            thisone = L[i:i + 1]
            for another in combination2(K - 1, L[i + 1:]):
                result.append(thisone + another)
    return result 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T16:27:54.690

正如文森特所提到的，由于第 5 行，您的函数返回 None 。将其更改为：

```
def combinationOfK(K,L):
    result = []
    if K <= 0:
        result.append([])
        return result
    for i in range(len(L)):
        thisone = L[i:i+1]
        for another in combinationOfK(K-1, L[i+1:]):  # the error
            result.append(thisone + another)
    return result 
```

但是，你为什么反对收益率？生成器可生成可读、高效的代码。Yield Keyword Explained 文章的重点不是要省略它，而是要解释它。

在您发布的生成器代码中：

```
def combination(K, L):
    if K<=0:
        yield []
        return
    for i in range(len(L)):
        thisone = L[i:i+1]
        for another in combination(K-1, L[i+1:]):
            yield thisone + another 
```

该`return`语句的含义与`return`普通函数中的含义不同。在生成器中，`return`立即引发 StopIteration，这会导致调用者停止迭代生成器对象。

# html - 添加链接帮助 - 将当前页面的地址添加到我创建的每个链接的开头？

> ID：11616083
> 
> 赞同：0
> 
> 时间：2012-07-23T15:55:13.883
> 
> 标签：html, css, web

这更容易通过写下发生的事情来解释。

如果我的网页是 www.anything.com 并且我想添加到 Google 的链接，我会这样做：

```
<a href="www.google.com;">hello</a> 
```

但是，我总是将页面名称添加到链接的开头。所以如果有人点击你好，他们会去 www.anything.com/www.google.com

我没有太多的编程经验，因此非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T15:58:08.830

您应该添加网址的完整（绝对）路径：`http://www.google.com`.

所有不是以`http://`（或其他协议）开头的东西，`mailto:`或者只是被使用的东西。其他一切都是相对的。

本地链接也是如此（始终应该是相对的）：

```
<a href="/file.html">Test</a> 
```

这将相对于文档根目录。

```
<a href="file.html">Test</a> 
```

这将相对于当前路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T15:58:24.027

使用`http://www.google.com/`代替`www.google.com`（绝对路径代替相对）

# java - JSF EL：如果找不到 l18n 属性，则回退

> ID：11616084
> 
> 赞同：2
> 
> 时间：2012-07-23T15:55:19.027
> 
> 标签：java, jsf, web-applications, jsf-2, el

在我的 JSF 项目中，我有这样的东西

```
<h:outputText value="#{msg[foo]}" /> 
```

其中*msg*是我的 ResourceBundle ，*foo*是属性标识符的变量，例如包含*label.car*，因此代码将返回*car*或*Auto*（国际化）。

**问题：**

如果*foo*设置为 ResourceBundle 中不存在的属性标识符，比如说*boat*，应用程序当然会以`javax.el.PropertyNotFoundException`.

在 Spring 中，有一种方法可以使用默认消息将其作为后备来处理。

```
<spring:message code="${foo}" text="${foo}" /> 
```

（返回标识符本身而不是它的国际化值）

..我无法在 JSF 中做到这一点。

任何提示在 JSF 中如何实现与此类似的事情？谢谢！

//**更新：** - Apache Tomcat/6.0.29 - Apache MyFaces-2 - PrimeFaces 3.3 - tomcat-maven-plugin:1.1 - Java 版本号：1.7.0_05 - Hibernate 3.5.6-Final

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:54:57.250

我通过[添加我自己的标签来](http://www.xinotes.org/notes/note/1558/)模仿 Spring 行为来“解决”这个问题：

（我的 TagHandler 实现的摘录）

```
value = getAttribute("value").getValue(context);
...
key = getAttribute("key").getValue(context);
...
if (key != null) {
  try {
    w.write(String.format("%s", getLocalizedString(key, bundle)));
  } catch (final Exception cause) {
    if (value != null) {
      w.write(String.format("%s", value));
    } else {
      // exception / invalid key
    }
  }

} else if (value != null) {
  w.write(String.format("%s", value));
} else {
  // exception / do noting
} 
```

所以我可以像这样使用它：

```
<my:outputText key="#{key}" value="#{fallback_value}" /> 
```

# android - 是否可以从 .asmx Web 服务方法下载原始 XML？

> ID：11616090
> 
> 赞同：0
> 
> 时间：2012-07-23T15:55:28.533
> 
> 标签：android, xml, web-services, asmx

我创建了几个 .asmx (.NET) 类型的 Web 服务，从本地 MySQL 数据库获取数据并将其显示为浏览器中的 XML。这已经启动并运行。

我想解析所说的 XML 并将其显示在我正在处理的 Android 应用程序中。由于 MySQL 数据库每个月只会更新几次，我认为每次我想在 Android 应用程序中显示数据时都不需要查询 Web 服务（以及 MySQL DB）。

我认为下载我的 Web 服务返回的 XML 并将其存储在 Android 文件系统中并从那里解析它是有意义的。这只是令人难以置信的倒退还是可行的？

当我访问我的本地 Web 服务方法之一时

```
http://localhost/../WebService.asmx/GetLastDBUpdate 
```

它返回一个时间戳，指示数据库上次在浏览器中更改为 XML 的时间，但我不知道如何下载文件原始 XML 文件。

我可以这样做，还是应该以不同的方式进行？

欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:03:17.830

进行同步的一种简单方法是将上次更新的时间戳传递给服务器。然后，服务器要么给出一个空响应（无更新），要么给出自该时间戳以来更新的对象列表。在这两种情况下，它都会提供一个新的时间戳，因此客户端不必与服务器保持同步。

1.  要求`POST /WebService.asmx/GetUpdates`

    ```
    <GetUpdates>
        <Timestamp>2012-07-19T13:42:13Z</Timestamp>
        <UpdateNow>True</UpdateNow>
    </GetUpdates> 
    ```

    如果该客户端没有先前的更新，则传递一个空的时间戳，或者将其忽略。设置`UpdateNow`为`False`, 以查看是否有任何更新（`<Objects>`将始终为空）。

2.  回复

    ```
    <Updates>
        <Timestamp>2012-07-23T17:54:13Z</Timestamp>
        <Count>23</Count>
        <Objects>
            <Object>...</Object>
            <Object>...</Object>
            ...
        </Objects>
    </Updates> 
    ```

    **或者**

    ```
    <Updates>
        <Timestamp>2012-07-19T13:42:13Z</Timestamp>
        <Count>0</Count>
        <Objects/>
    </Updates> 
    ```

    `<Timestamp>`可以是请求的时间，也可以是最新更新的时间。

3.  处理：解析 XML，并将其写入[SQLite 数据库](http://www.vogella.com/articles/AndroidSQLite/article.html)。保存时间戳以备将来更新。

* * *

要向 Web 服务发出实际请求，您可以使用[kSoap2 for Android](http://code.google.com/p/ksoap2-android/)：

```
public SoapObject GetUpdates(String timestamp, boolean updateNow) {
    SoapObject request = new SoapObject("http://tempuri.org/", "GetUpdates");
    request.addProperty("Timestamp", timestmap);
    request.addProperty("UpdateNow", updateNow ? "True" : "False");

    SoapSerializationEnvelope envelope =
            new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.setOutputSoapObject(request);

    HttpTransportSE transport = new HttpTransportSE(
            "http://www.example.com/WebService.asmx/GetUpdates");
    transport.call("GetUpdates", envelope);

    return (SoapObject) transport.bodyIn;
} 
```

# c# - 如何通过 linq 从 json 获取子数据

> ID：11616093
> 
> 赞同：3
> 
> 时间：2012-07-23T15:55:42.667
> 
> 标签：c#, json, linq

我正在使用 json.net 并且我有一个这样的 json 数据，

```
[
{
  "ID":1098,
  "Name":"JC",
  "Issues":[
     {
        "PriorityLevel":"Low",
        "State":"Open"
     },
     {
        "PriorityLevel":"Low",
        "State":"Open"
     }
  ]
}
] 
```

我只想通过 linq 从问题中获取子数据。我可以联系到父母，但不能联系到孩子。如果我直接访问儿童数据，我不需要放置多个 for 循环。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T16:36:00.203

您可以只创建一个 Json 对象并将属性提取到 Anonymouse 类型中，然后您可以使用 Linq 进行查询。

```
string response = @"[{
  ""ID"":1098,
  ""Name"":""JC"",
  ""Issues"":[
     {
        ""PriorityLevel"":""Low"",
        ""State"":""Open""
     },
     {
        ""PriorityLevel"":""Low"",
        ""State"":""Open""
     }
  ]}]";

var jsonObject = JObject.Parse(response);
var issues = jsonObject["Issues"].Select(x => new
             {
                 PriorityLevel = (string)x.SelectToken("PriorityLevel"),
                 State = (string)x.SelectToken("State")
             }); 
```

您使用 SelectToken 来获取问题的孩子。现在您可以查询任何您想要的问题。

```
var lowPriorities = issues.Where(x => x.PriorityLevel == "Low"); 
```

[这是“使用 LINQ 示例反序列化](http://james.newtonking.com/projects/json/help/index.html?topic=html/LINQtoJSON.htm)”的 json.net 页面的直接链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T16:12:05.580

干得好

```
{
    var json = @"[      {
    ""ID"":1098,
    ""Name"":""JC"",
    ""Issues"":[
        {
            ""PriorityLevel"":""Low"",
            ""State"":""Open""
        },
        {
            ""PriorityLevel"":""Low"",
            ""State"":""Open""
        }
    ]}]";

    var a = JArray.Parse(json);

    var issues = a.SelectMany (x => x["Issues"]);
    var lowPriorities = issues.Where(x => ((string) x["PriorityLevel"]) == "Low");
} 
```

# c# - 如何判断 WCF 服务客户端代理是否已超时

> ID：11616096
> 
> 赞同：0
> 
> 时间：2012-07-23T15:55:51.327
> 
> 标签：c#, wcf, wshttpbinding

我有一个使用带有消息加密的 wsHttpBinding 的 WCF 服务。我使用相同的服务引用，除非它出现故障，在这种情况下我创建一个新的。我遇到了一个问题，即会话已超时并且服务已关闭其结束，但客户端应用程序仍将 CommunicationState 设为 Opened。

如果连接超时，如何在 ClientBase 中判断？如果当前服务代理已超时，我希望在我的客户端应用程序中创建一个新的服务代理。

下面是我的客户端绑定：

```
 <wsHttpBinding>
    <binding name="wsHttpBindingWithAuthClient" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
      maxBufferPoolSize="524288" maxReceivedMessageSize="20000000"
      messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
      allowCookies="false">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <reliableSession ordered="true" inactivityTimeout="00:10:00"
        enabled="false" />
      <security mode="Message">
        <transport clientCredentialType="Windows" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="UserName" negotiateServiceCredential="true"
          algorithmSuite="Default" />
      </security>
    </binding>
  </wsHttpBinding> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:58:46.340

为什么不将所有服务调用包装在 try/catch 中，并在服务器连接超时的特定异常类型的 catch 块中，重新创建代理。

```
try
{
  serviceProxyGlobal.Method()
}
catch(WhateverServerTimeoutException ex)
{
  serviceProxyGlobal = new ServiceProxy();
  //retry maybe?
}
catch(Exception ex)
{
  logException(ex);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T16:19:52.783

请考虑使用简单的 getter 访问该共享 Web 服务引用，您基本上在返回对它的引用之前尝试“ping”您的 Web 服务（“ping”方法应该非常简单，例如`Boolean Ping() { return true; }`）如果它抛出异常（在这里你必须满足所有可能的情况），简单地处理它，抑制它（如果它是一个你可以识别并且你期望的异常）并创建新的共享连接。

或者，您可以设计一种方法，在后台线程中每隔 [Web 服务超时以分钟为单位] / 2 分钟 ping 您的 Web 服务。

# agile - 需要项目的轻量级问题跟踪器

> ID：11616102
> 
> 赞同：0
> 
> 时间：2012-07-23T15:56:26.570
> 
> 标签：agile, scrum, agile-project-management

我需要一个用于新项目的轻量级问题跟踪器，该项目大约有 5 人。有什么推荐吗？我阅读了关于该主题的另外两个主题，但似乎并不令人满意。我不需要与 git 集成。我只需要一些超级简单、非常容易设置的东西，比如电脑中的 Scrum 板（这里的其他团队有实体的尖叫板）。我即将在我的 Linux 机器上的共享目录中推出 Excel 电子表格......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T02:58:52.337

我推荐一个github帐户。在那里创建一个 repo 并使用每个 git 存储库附带的本机 github 问题跟踪问题。然后使用 www.huboard.com 为您的问题添加一个极其轻量级的敏捷/看板视图。它很容易设置，但效果很好。非常简单轻巧，您可以轻松地在 huboard 中自定义您的看板视图。

如果你有一个 .edu 的电子邮件地址，github 是免费的，如果没有，你可以获得一个支持五个提交者的帐户，每月只需 7 美元。很棒的基础设施非常值得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T23:01:15.857

Jira 不错，但要花一点钱。如果您手头拮据，您可能需要考虑 Trac。它提供了许多与 Jira 相同的功能，但没有与之相关的成本。但是，如果您决定使用插件来专门使用 Scrum 和看板跟踪您的项目，那么对于您的团队规模，Jira/Greenhopper 将比 Trac/Agilo 组合便宜得多。此外，Jira 大学有许多关于如何使用 Jira 和非常便宜的 Greenhopper 插件的在线课程。

# c# - SQL Server CE BadImageFormat

> ID：11616103
> 
> 赞同：0
> 
> 时间：2012-07-23T15:56:39.683
> 
> 标签：c#, deployment, sql-server-ce, badimageformatexception

我已经搜索了数周来寻找解决方案，但到目前为止还没有找到任何东西。我正在使用本地数据库来存储 ZipCode 和 AreaCode 信息。这工作正常，加载正确，从数据库读取并在***除***开发机器之外的每台计算机上显示结果。`BadImageFormat`我已将它部署到多台其他计算机上，一切正常，但在开发机器上，当我尝试从数据库中读取时，它返回异常。

我已经在我的桌面（开发机器）和我妻子的笔记本电脑（它可以正常工作）上浏览了“添加/删除程序”屏幕。就有关 SQL、SQL Server CE、ADO.Net、Visual Studio 等的任何内容而言，已安装程序的两个列表都是相同的。我有 .exe 文件中包含的 dll 文件，因此它们使用相同的版本。

在某一时刻，这确实在开发机器上工作，然后我想我卸载了一些东西，它破坏了它。从那以后，我安装了 Windows 7 的新副本和 VS 的新副本（硬盘升级的 b/c，不是因为这个问题）。它仍然不起作用。该数据库采用 SQL Server CE 3.5 格式。

我几乎可以保证这不是连接字符串问题，因为这不会改变机器之间的关系。老实说，我什至不会担心它，除了我需要添加/调整数据库，而且我偏执地更改其中的任何内容都会在其他机器上破坏它，这是不可接受的。

有人能想到我可能遗漏的任何东西吗？

**更新：**

在具有讽刺意味的伟大时刻之一，发布这个问题后，我突然想到。我可以指出两者之间的一个区别是，在开发机器上，我只是从 VS 或 Projects\Bin 文件夹运行它。在其他上，我将 exe 和 dll 从 CD 复制到一个文件夹中。所以考虑到这一点，我在 Dev 计算机的桌面上创建了一个文件夹，以与我在其他机器上测试相同的方式复制，一切正常。所以我认为这是文件夹权限问题或类似问题。我尝试将 Bin 文件夹更改为非只读，但仍然从调试它不起作用。

有没有已知的方法来纠正这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T16:03:38.667

`BadImageFormat`例外是指您使用的 SqlCE dll 不适合您所运行的体系结构这一事实。您的本地计算机可能具有 32 位 (x86) 的 SQL CE 版本，而您的开发计算机可能是 64 位 (x64) 架构。如果您在 DEV 机器中为适当的体系结构替换 SQL CE DLL，您的程序应该可以工作。

# jquery - ajax调用后获取自动完成选择器

> ID：11616105
> 
> 赞同：0
> 
> 时间：2012-07-23T15:56:46.107
> 
> 标签：jquery

在进行 ajax 调用后，我试图在“成功”中找到 jquery 自动完成的选择器。在“成功”中，我正在寻找 $(this) 为 $(".itemDescInput") 但它不是。那时我将如何找到该选择器？

```
$(".itemDescInput").autocomplete({
    source: "invoices/invoice_items.php",
    select: function(event, ui) {
        var $it_desc = ui.item.value;
        $.ajax({
            type: "POST",
            url: "invoices/invoice_items_prices.php",
            data: "it_desc="+$it_desc,
            success: function(result){
                if(result != '') {
                    $(this).find("input .itemCostEach").val(result);
                }
            }
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T16:01:46.490

内`success()`，`this`不是指您的选择器，而是指您的**AJAX 设置**。您可以通过在调用中设置**上下文**来更改`this`指向的内容。请参阅[文档](http://api.jquery.com/jQuery.ajax/)。**`ajax()`**

 **例如：

```
 $.ajax({
        context: this,  // You could pass 'this' in directly if you wanted :)
        success: function(result) {
            // Refer to 'this' in the way you expect
        }
    }); 
```**

# android - Android 测试 = 打开已经关闭的数据库

> ID：11616106
> 
> 赞同：0
> 
> 时间：2012-07-23T15:56:47.903
> 
> 标签：android, sqlite, testing

我制作了一个应用程序，它复制了一个预先制作的数据库，然后允许您以 SQLTest 作为其主要活动来运行 SQLiteDatabase 的各种查询/方法（插入、更新等）。然后我做了一个测试（称为 SQLTestCase，我知道这不合适，但我是测试新手），它有一个测试套件调用 randomTest() 方法，该方法随机选择要执行的测试。奇怪的是，我收到一条错误消息：

```
java.lang.IllegalStateException: attempt to re-open an already-closed object:        SQLiteDatabase: /data/data/com.example.sql2/databases/os.sqlite
at android.database.sqlite.SQLiteClosable.acquireReference(SQLiteClosable.java:55)
at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1310)
at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1253)
at com.example.sql2.test.SQLTestCase.randomTest(SQLTestCase.java:236)
at com.example.sql2.test.SQLTestCase.testSuite(SQLTestCase.java:38)
at java.lang.reflect.Method.invokeNative(Native Method)
at android.test.InstrumentationTestCase.runMethod(InstrumentationTestCase.java:214)
at android.test.InstrumentationTestCase.runTest(InstrumentationTestCase.java:199)
at android.test.ActivityInstrumentationTestCase2.runTest(ActivityInstrumentationTestCase2.java:192)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:190)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:175)
at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:555)
at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1584) 
```

错误显示在两行代码中：

```
public void testSuite()
{
    int length = 100;
    for (int x = 0; x < length; x++)
    {
        randomTest(); // Here
    }
}

public void randomTest()
{
    ...
    String sql = "SELECT COUNT(*) AS NumberOfRecords FROM" + SQLAdapter.TABLE_OS;
    Cursor cursor = activity.accessAdapter().accessHelper().accessDatabase().rawQuery(sql, null); //Here
            ... 
```

我知道问题出在光标的初始化上，因为通过注释掉它，测试运行良好。有谁知道这个问题？我查看了我的代码，希望能找到一个我提前关闭数据库的地方，但我什么也没看到。我会尽力提供你所需要的。让我知道是否需要更多代码来解决此问题。

```
public class SQLTestCase extends ActivityInstrumentationTestCase2<SQLTest>
{
SQLTest activity;

public SQLTestCase()
{
    super(SQLTest.class);
}

protected void setUp() throws Exception
{
    super.setUp();
    setActivityInitialTouchMode(false);
    activity = getActivity();
}

    ...

public void testSuite()
{
    int length = 100;
    for (int x = 0; x < length; x++)
    {
        randomTest();
    }
}

    ...
public void randomTest()
{
    String name = "", field = "";
    Random rand = new Random();
    int randOp = rand.nextInt(5);
    int randName, randField, id;
    String sql = "SELECT COUNT(*) AS NumberOfRecords FROM" + SQLAdapter.TABLE_OS;
    Cursor cursor = activity.accessAdapter().accessHelper().accessDatabase().rawQuery(sql, null);

    switch (randOp)
    {
    case 0:
        randName = rand.nextInt(45);
        name = getRandomName(randName);
        int nullNotNull = rand.nextInt(2);
        switch (nullNotNull)
        {
        case 0:
            field = null;
            break;
        case 1:
            randField = rand.nextInt(24);
            field = getRandomField(randField);
            break;
        }
        testInsert(name, field);
        break;
    case 1:
        id = rand.nextInt(Integer.parseInt(cursor.getString(0))); 
        //id = rand.nextInt(12)+1;
        testDelete(id);
        break;
    case 2:
        int selection = rand.nextInt(5);
        switch (selection)
        {
        case 0:
            randName = rand.nextInt(45);
            id = rand.nextInt(Integer.parseInt(cursor.getString(0)));
            //id = rand.nextInt(12)+1;
            name = getRandomName(randName);
            testUpdate(id, name, "");
            break;
        default:
            randName = rand.nextInt(45);
            name = getRandomName(randName);
            randField = rand.nextInt(24);
            field = getRandomField(randField);
            id = rand.nextInt(Integer.parseInt(cursor.getString(0)));
            //id = rand.nextInt(12)+1;
            testUpdate(id, name, field);
            break;
        }
        break;
    case 3:
        id = rand.nextInt(Integer.parseInt(cursor.getString(0)));
        //id = rand.nextInt(12)+1;
        testGet(id);
        break;
    case 4:
        testGetAll();
        break;
    }
}

}

public class SQLTest extends Activity
{
public SQLAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_sqltest);
    adapter = new SQLAdapter(this);
    adapter.createDatabase();
    open();
}
...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:21:41.687

好吧，感谢 Joel，我最终为 randomTest() 方法创建了一个本地数据库，然后调用了原始查询：

```
String sql = "SELECT COUNT(*) AS NumberOfRecords FROM " + SQLAdapter.TABLE_OS;
SQLiteDatabase db = activity.accessAdapter().accessHelper().getWritableDatabase();
Cursor cursor = db.rawQuery(sql, null); 
```

这行得通（尽管我后来意识到这对我的项目没有用处）。无论哪种方式，如果其他人在使用这样的光标时遇到问题，这就是对我有用的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T16:19:20.810

不知道这是否会有所帮助，但您可能需要在每次完成时关闭光标。试着打电话`cursor.close();`

# java - Java Iterator 价值维持

> ID：11616107
> 
> 赞同：0
> 
> 时间：2012-07-23T15:56:49.180
> 
> 标签：java, collections, iterator, set

我有一个非常基本的java迭代器场景......在寻找迭代器的工作时面临以下问题

迭代器 logIterator 在两个 while 循环中是否具有相同的值，或者它会在第二个 while 循环中结束并变为 null。

```
Set logSet=transactionLogMap.entrySet();
Iterator logIterator=logSet.iterator();
BigDecimal tempRegId=null;

while (logIterator.hasNext()) {
    tempRegId=(BigDecimal)logIterator.next();
}

if (someBoolean) {
     while (logIterator.hasNext()) {
         callsomeMethod(logIterator.next());
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T15:58:45.630

它将在第二个循环之前结束，但不会变为 null。

它只会`false`返回`logIterator.hasNext()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T15:59:00.260

这些将是不同的值。你的第二个循环返回`false`。

> [迭代器](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Iterator.html)允许调用者在迭代期间使用定义明确的语义从底层集合中删除元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T16:00:38.353

您只是在重用旧的迭代器。一旦它返回`true`，`hasNext()`他将继续这样做。您不会进入第二个循环。

除此之外，学习使用新`for`结构

```
for(BigDecimal tempRegId : transactionLogMap.entrySet() {
} 
```

# java - 如何在 Windows 7 下从批处理文件运行 java 应用程序而不弹出控制台窗口？

> ID：11616108
> 
> 赞同：1
> 
> 时间：2012-07-23T15:56:50.243
> 
> 标签：java, windows, batch-file

我不敢相信这很难。但是我在微软网站上读到的所有东西都说要最小化运行批处理文件——这太荒谬了，还是通过 VB 脚本启动？？？？我必须运行一个 VB 脚本来启动一个批处理文件？？？这是精神错乱。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T16:00:20.557

运行`javaw`可执行文件，而不是`java`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T16:01:08.910

也许通过以下方式使其成为 exe 文件：http: [//viralpatel.net/blogs/convert-jar-to-exe-executable-jar-file-to-exe-converting/](http://viralpatel.net/blogs/convert-jar-to-exe-executable-jar-file-to-exe-converting/)

或者通过这样做：

```
@echo off
start /B server.jar [arg1] [arg2]  
start /B server.jar [arg3] [arg4]
@echo on 
```

在这里找到：[使用命令行参数启动 .jar 文件（但没有控制台窗口）](https://stackoverflow.com/questions/711370/launch-jar-files-with-command-line-arguments-but-with-no-console-window)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T16:00:29.510

1.  使用 jsmooth 创建一个 exe。[http://jsmooth.sourceforge.net/](http://jsmooth.sourceforge.net/)。它还将检测 Java 的位置，如果用户没有安装它，则可以为用户下载它。
2.  如果您不介意在运行`javaw -jar myapp.jar`批处理文件中使用 .bat 文件时它会闪烁黑色窗口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T18:08:07.043

```
@echo off
cd C:/link
javaw -jar jarfile.jar 
```

将此用于您的批处理文件。

# java - 将日期格式从一类更改为另一类

> ID：11616109
> 
> 赞同：0
> 
> 时间：2012-07-23T15:56:54.813
> 
> 标签：java

我现在正在使用这个类。

[http://www.cse.yorku.ca/common/type/api/type/lib/CreditCard.html](http://www.cse.yorku.ca/common/type/api/type/lib/CreditCard.html)

我有一张信用卡，我使用了信用卡的方法`getExpiryDate()`。它以以下形式为我提供日期：`Mon April 06 09:23:10 EDT` 我希望以这种形式获得日期：

`06/04/2015`并且不需要时间。

```
 PrintStream out = System.out;
    Scanner in = new Scanner(System.in);

    GlobalCredit credit1 = new GlobalCredit().getRandom();

    out.print("Enter report range in years ... ");
    int range = in.nextInt();
    out.println("Cards expiring before " + range + " year(s) from now: ");

    for (CreditCard cc : credit1)
    {

        out.println(cc.getNumber() + "\t");
        out.print(cc.getExpiryDate());

    } 
```

那是我的代码的一部分，（没有复制开头）。我必须在 for 语句中做一些事情。我必须以某种方式将 cc.getExpiryDate() 与 Date Class 联系起来

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T16:02:48.783

```
SimpleDateFormat sf = new SimpleDateFormat("dd/MM/yyyy");

for (CreditCard cc : credit1)
    {

        out.println(cc.getNumber() + "\t");
        out.print(sf.format(cc.getExpiryDate()));

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T16:01:05.173

我认为您应该查看 java [SimpleDateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T16:00:22.610

你可以试试这个：

```
DateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy");
Calendar cal = Calendar.getInstance();
String startTime = dateFormat.format(cal.getTime()); 
```

# eclipse - eclipse 停止弹出“Web 启动已经在运行”

> ID：11616111
> 
> 赞同：8
> 
> 时间：2012-07-23T15:57:04.843
> 
> 标签：eclipse

我正在使用 Xdebug 在 PHP 中进行开发，由于某种原因，调试会话不时停止工作，所以我再次单击调试按钮，但它一直给我这个错误“ **Web 启动已经在运行**”，所以我必须去调试透视图并单击“**终止并重新启动**”。

有没有办法让 Eclipse 自动终止并重新启动或启动两个会话或不显示此弹出窗口，2 年来这个弹出窗口一直困扰着我 xD

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T01:01:10.227

正如在回答[this one](https://stackoverflow.com/q/8609778/85950)和[this one](https://stackoverflow.com/questions/4385313/restarting-an-app-in-eclipse)之类的问题时指出的那样，当前最好的解决方案似乎是将“终止并重新启动”绑定到键盘快捷键。

不是自动的，但至少少了很多点击。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T15:49:04.327

我已经使用 AutoHotkey 脚本处理了 Eclipse 中令人讨厌的弹出窗口，该脚本运行良好。我可以创建一个 AutoHotkey 脚本，它会在每次出现特定的弹出窗口时自动发送特定的击键。

所以我想到的流程如下：您单击调试按钮-> 出现错误弹出窗口，一旦发生这种情况，AutoHotKey 脚本就会启动并自动执行您必须手动执行的操作。

如果您认为这可能值得研究，那么我们可以在某个地方的聊天会话中进行更多讨论。我需要一些有关使用与 AutoHotkey [Installer](http://www.autohotkey.com/)捆绑的 AU3_Spy.exe 弹出窗口的信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T04:23:24.770

在谷歌上搜索，我发现很多人都有同样的问题。

我认为下面是一些对您有帮助的链接：

*   [https://aptanastudio.tenderapp.com/discussions/questions/123-definitive-installation-guide-for-php-debugging-on-linuxubuntu](https://aptanastudio.tenderapp.com/discussions/questions/123-definitive-installation-guide-for-php-debugging-on-linuxubuntu)
*   一篇好文章：[http ://www.latenightpc.com/blog/archives/2008/05/24/a-complete-lamp-development-environment-xampp-eclipse-pdt-and-xdebug](http://www.latenightpc.com/blog/archives/2008/05/24/a-complete-lamp-development-environment-xampp-eclipse-pdt-and-xdebug)
*   也看到这个：http: [//www.eclipse.org/forums/index.php/m/57493/](http://www.eclipse.org/forums/index.php/m/57493/)
*   也可以在这里看看：[Getting error in XDEBUG](https://stackoverflow.com/questions/10438910/getting-error-in-xdebug)

因此，阅读并尝试，阅读并尝试。

# json - Monotouch Dialog使用Json更改Section或EntryElement颜色

> ID：11616116
> 
> 赞同：0
> 
> 时间：2012-07-23T15:57:23.447
> 
> 标签：json, xamarin.ios, monotouch.dialog

我需要使用 Monotouch 对话框更改整个部分的背景颜色（或任何颜色）。[像这样](https://stackoverflow.com/questions/7312150/how-to-set-the-background-color-on-a-dialogviewcontroller-monotouch-dialog)的一些答案建议将 DialogViewController 子类化，但使用 Json 加载 UI 并没有提供该选项（或者它可能提供，但我不知道该怎么做）。

使用 EntryElement 也是一样，“background”、“textcolor”、“detailcolor”和“color”属性适用于 StringElement，但不适用于 EntryElement。我尝试过使用 GetCell() 方法，但效果不佳。

非常感谢任何线索！
谢谢

# facebook-graph-api - 使用 facebook 图形搜索 API 可搜索公共帖子的要求

> ID：11616119
> 
> 赞同：0
> 
> 时间：2012-07-23T15:57:26.270
> 
> 标签：facebook-graph-api, privacy

**是否有任何隐私设置会导致与标记为公开的帖子发生冲突，导致 facebook graph api seraches 不会将其返回？**

根据文档，*“您可以搜索社交图谱中的所有公共对象”*，包括*“所有公共帖子”*。似乎有些帐户已将墙上和时间线帖子标记为公开，但是，从图形 api 搜索调用返回的结果集中从未显示过。

我正在使用 facebook graph search api，使用端点 URL：

[https://graph.facebook.com/search](https://graph.facebook.com/search)

**常规行为：**

[像https://graph.facebook.com/search?q=bacon&type=post](https://graph.facebook.com/search?q=bacon&type=post)这样的测试查询当然会给出结果。使用不寻常的词制作公共帖子使它们易于搜索，这对于测试目的很有用。

**问题：**

具有不同术语的公共状态应该可以通过图形 api 找到（至少在某些时候）。然而，一些用户似乎始终没有将他们的任何公开帖子包含在针对他们的查询的结果中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:08:56.563

唯一可能影响此的其他隐私设置是`Public search`设置（位于广告、应用程序和网站下）。它是完全将您从 Facebook 搜索中隐藏起来的选项。此设置是可选的，因此它实际上取决于有多少缺少状态更新的用户禁用了此设置（即从搜索中隐藏）。

# java - 日期到字符串转换错误

> ID：11616123
> 
> 赞同：0
> 
> 时间：2012-07-23T15:57:38.647
> 
> 标签：java, mysql, sql, oracle11g

我正在使用 TO_CHAR(last_used) 从 Oracle Database 11g 中检索字符串格式的日期。运行查询时得到的输出`SELECT last_used, TO_CHAR(last_user, 'yyyy-MM-dd hh:mm:ss') as dtime1 FROM mytable WHERE id='120000';`是：

```
LAST_USED
---------------------------------------------------------------------------
DTIME1
-------------------
17-MAY-12 11.53.28.000000 PM -07:00
2012-05-17 11:05:28 
```

谁能让我知道为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T16:00:03.853

MM 是月份的格式。使用 MI 表示分钟。

# xcode - Android Eclipse 相当于 Xcode 的 xscroll 和 yscroll？

> ID：11616126
> 
> 赞同：0
> 
> 时间：2012-07-23T15:57:49.617
> 
> 标签：xcode, eclipse, android-emulator, scroll, android-webview

Android 模拟器的 Eclipse 上是否有等效于 Xcode 的 xScroll 和 yScroll 的变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:00:27.730

您可以通过调用 getScrollX() 来获取滚动位置。当然，您将需要一个 ScrollView。

# vim - 如何为给定目录/路径中的所有文件设置 vim 的默认语法突出显示？

> ID：11616133
> 
> 赞同：3
> 
> 时间：2012-07-23T15:58:13.973
> 
> 标签：vim, syntax-highlighting

如果我在其中打开给定的邮件文件，`~/maildir-sent/`则文件没有语法突出显示。Vi 具有邮件文件的默认突出显示，我可以手动打开它

`:set ft=mail` 默认情况下不会发生这种情况，因为那里的邮件文件具有尴尬的名称结构`1339174749.7162_2.tm24-s00418:2,S`

如何使邮件文件默认突出显示？IE 我认为这个默认值类似于“所有与另一个语法高亮定义不匹配的文件”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T16:04:11.397

`autocmd`在你的 .vimrc 中使用：

```
autocmd BufRead ~/maildir-sent/* setlocal ft=mail 
```

有关`:help autcmd`更多信息，请参阅。

# c# - C# 字典总是返回最后一个值

> ID：11616136
> 
> 赞同：0
> 
> 时间：2012-07-23T15:58:30.650
> 
> 标签：c#, .net, arrays, dictionary, field

我创建了字典并在其中插入了 3 个字段：

```
Dictionary<string, Map> targets = new Dictionary<string, Map>();
targets.Add("Pláž - střed", new Map("Pláž - sever", "Vrak letadla", "Džungle", "Vrak letadla"));
targets.Add("Vrak letadla", new Map("Pláž střed", "nothing", "Roští", "nothing"));
targets.Add("Roští", new Map("nothing", "nothing", "Tenký lesík", "Vrak letadla")); 
```

当我尝试获取 field`targets[Pláž - sever]`时，包含的映射构造函数参数`"nothing", "nothing", "Tenký lesík", "Vrak letadla"`- 最后一个字段的值，第二个和第三个字段的值相同。你能帮我解决这个问题吗？我需要第一个字段来返回它的值，而不是第三个字段的值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T16:03:12.913

你的问题一开始有点奇怪 - 但我*怀疑*你会发现你的`Map`类有*静态*字段而不是实例字段。这意味着您有一组与类型相关的字段，而不是与该类型的任何特定*实例*相关的字段......所以每次覆盖字段时，您都会丢失所有以前的数据。

虽然只是猜测...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T16:06:05.647

你需要做的是：

```
var a1 = new Map("Pláž - sever", "Vrak letadla", "Džungle", "Vrak letadla"));
var a2 = new Map("Pláž střed", "nothing", "Roští", "nothing")); 
```

在调试器中运行此代码并检查 a1 和 a2 的值。您的 Map 类可能会出现问题，例如声明为静态的字段或其他类似性质的内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T16:06:30.140

您没有在字典中添加任何项目，`Key` `"Pláž - střed"`因此您无法获得该项目，因为它根本不可用。

所以尝试使用`"Pláž - střed"`密钥添加一个项目，然后访问它。

# javascript - Javascript用$替换问题

> ID：11616138
> 
> 赞同：4
> 
> 时间：2012-07-23T15:58:31.757
> 
> 标签：javascript

我试图用“$$Ashok”替换下面示例中的“this”。我没有得到预期的输出。

```
 var adHtmltext ="this is ashok"
    adHtmltext = adHtmltext.replace("this", "$$Ashok");
    alert(adHtmltext ); 
```

为什么它在输出中显示一美元？如何解决这个问题？

这是 jsfiddle [http://jsfiddle.net/RxDa5/](http://jsfiddle.net/RxDa5/)

请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T16:01:39.800

查看[MDN 文档](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_string_as_a_parameter)：

> 替换字符串可以包括以下特殊替换模式：
> 
> `$$` `Inserts a "$".`

所以你必须这样做：

```
adHtmltext.replace("this", "$$$$Ashok"); 
```

另请参阅[Javascript 字符串替换怪异—— $$$$ 折叠为 $$——这个结果背后的原因是什么？](https://stackoverflow.com/questions/7209871/javascript-string-replace-weirdness-gets-collapsed-to-whats-the-r).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T16:02:46.813

`$$`是 的转义码`$`，因为`$`是正则表达式反向引用的转义码。不幸的是，你需要这个：

```
var adHtmltext ="this is ashok"
adHtmltext = adHtmltext.replace("this", "$$$$Ashok");
alert(adHtmltext ); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-23T16:04:49.483

美元符号是保留字符`.replace()`

事实上，在您的 jsFiddle 代码中，就在顶部，您已经将它用于它的保留目的——即`$1`您在其中捕获部分表达式的目的。

`$$`用于转义美元符号。在这种情况下，您实际需要的每个美元符号都需要两个美元符号。

这是因为否则您将无法`$1`在输出中包含该字符串。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-23T16:03:02.470

该`.replace`方法还将接受正则表达式作为第一个参数，如果您对文本的一部分进行分组，您可以将其包含在输出文本中，并使用“$”字符和一个数字指定要哪个组使用（1 美元、2 美元等）。

因为'$'在这个上下文中有特殊的含义，它需要被转义，而'$$'是产生正常'$'的转义序列，所以你的代码中只需要'$$$$Ashok' .

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-23T16:01:55.727

在替换目标模式的字符串中可以包含一些特殊模式，带有“$$”的字符串就是其中之一。请参阅[Mozilla MDN 文档](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_string_as_a_parameter)以获得更好的参考。

特别是在您的情况下，“$$”变为“$”，因为其他字符与“$”的某些组合（例如“$&”）保留用于与某些子字符串匹配。如果您希望您的替换工作，只需使用“$$$$Ashok”，它将在最终字符串中变为“$$Ashok”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-15T23:48:04.677

寻找通用解决方案，我获得了以下信息：

```
var input = prompt( 'Enter input:' ) || '';
var result = 'foo X bar X baz'.replace( /X/g, input.replace( /\$/g, '$$$$' ) ); 
```

有用：

> 输入：$$
> 结果：foo $$ bar $$ baz
> 
> 输入：$&
> 结果：foo $& bar $& baz

但这有点棘手，因为多级`$`转义。看到`$$$$`里面`replace`...

* * *

因此，我尝试使用未应用特殊替换模式的回调：

```
var result = 'foo X bar X baz'.replace( /X/g, function () {
    var input = prompt( 'Enter input:' ) || '';
    return input;
} ); 
```

它也有效，但有一个警告：每次替换都会执行回调。所以在上面的例子中，用户被提示了两次......

最后，这里是“回调”解决方案的固定代码，通过将提示移出替换回调：

```
var input = prompt( 'Enter input:' ) || '';
var result = 'foo X bar X baz'.replace( /X/g, function () {
    return input;
} ); 
```

* * *

总而言之，您有两种解决方案：

*   `.replace(/\$/g, '$$$$')`对替换字符串应用转义
*   使用回调，它只是返回替换字符串

* * *

MDN 参考：[String.prototype.replace()#Description](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace#Description)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-08T17:59:06.380

任何自定义的替换函数都可以更优雅地解决这个问题。您只需从中返回预期的字符串，它将被原样替换。

```
function customReplacer() {
return "$$Ashok";
}
adHtmltext = adHtmltext.replace("this", customReplacer); 
```

# asp.net-mvc - 带有表对象的 MVC c# ViewModel

> ID：11616142
> 
> 赞同：0
> 
> 时间：2012-07-23T15:58:45.630
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-viewmodel

我有一个这样的视图模型

```
 public class NoteViewModel
    {
      public tblNotes tblnote { get; set; }   
    } 
```

在我的控制器中，我在构建之后执行以下操作，以便我的控制器知道视图模型：

```
 NoteViewModel viewModel= new NoteViewModel();

    viewModel.tblnote.NoteModeID  = 1234; // get error here

    return PartialView(viewModel); 
```

我收到以下错误：

> {“你调用的对象是空的。”}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:01:55.460

究竟是`tblNotes`什么？如果是引用类型，`viewModel.tblNote`则`null`在执行第一行代码之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T16:03:00.303

类型是什么`tblNotes`？（旁注：按照惯例，在 C# 中，类名应以大写字母开头。）

由于这是一个自定义类型，因此是一个引用类型，它的默认值为`null`. 因此，当您实例化一个 new`NoteViewModel`时，除非另有说明，否则它将将其所有成员设置为其默认值。由于该值为`null`，因此您不能在此处使用它：

```
viewModel.tblnote.NoteModeID = 1234; 
```

在不了解您的类型的情况下，简单的答案是在视图模型的构造函数中实例化该成员：

```
public class NoteViewModel
{
    public tblNotes tblnote { get; set; }

    public NoteViewModel()
    {
        tblnote = new tblNotes();
    }
} 
```

这样，在任何时候创建视图模型时都会实例化对象，因此您可以使用它。

# solr - Solr数据导入多值字段为单值字段

> ID：11616146
> 
> 赞同：1
> 
> 时间：2012-07-23T15:59:02.050
> 
> 标签：solr, multivalue

我有一个多值字段

```
<arr name="colors">
<str>Blue</str>
<str>Red</str>
<str>Orange</str>
<str>Pink</str>
<str>Violet</str>
</arr> 
```

像这样填充：

```
<entity name="pub_attributes" query=" SELECT name [description] FROM dbo.Colors">
       <field name="colors" column="description" />
</entity> 
```

我需要另一个包含所有颜色的字段，但仅在一行中，由空格分隔，例如

```
<str name="Colors_All">Bue Red Orange Pink Violet</str> 
```

如果不重新访问颜色表，我怎么能做到这一点？也许是这样的

```
<entity name="Properites_all" query="
    DECLARE @all VARCHAR(MAX)
    SET @all = ''    
    Select @all = @all + ... from '${pub_attributes.colors}' 

    UNION
    Another SELECT that will add more info than just the colors
">
    <field name="colors_all" column="description" />
</entity> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T05:36:12.833

我想，你要找的是copyfield： [copyfield wiki](http://wiki.apache.org/solr/SchemaXml#Copy_Fields)，你也可以在这里看看：[如何使用它](https://stackoverflow.com/questions/4596075/how-to-use-solr-copyfield-directive) 希望这会有所帮助。

# java - Fedora 虚拟机上的 Oracle 连接缓慢

> ID：11616148
> 
> 赞同：0
> 
> 时间：2012-07-23T15:59:09.470
> 
> 标签：java, oracle, database-connection, fedora

我们有一个在 Solaris 上运行的 Java 应用程序，它与 Oracle 建立连接并检查数据库以执行工作，它运行得很好。我们尝试在独立的 Fedora 系统上运行相同的代码，它的性能也很好。但是，当我们将它移到 Fedora VMWare 虚拟机上的主目录时，应用程序可能需要**5 分钟**以上的时间才能连接到数据库。它最终确实建立了联系 - 它只是蜗牛缓慢。我们怀疑这是某个地方的配置问题，但找不到。据我们所知，这两个 Fedora 机器具有几乎相同的配置。有没有人遇到过这个问题？如果是这样，你是如何绕过它的？

在此先感谢您的帮助。迈克·普雷斯顿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:30:20.817

[这](http://www.usn-it.de/index.php/2009/02/20/oracle-11g-jdbc-driver-hangs-blocked-by-devrandom-entropy-pool-empty/)是解决问题的解决方案......我们的无头开发服务器只是偶尔会获得任何键盘活动来填充熵池（请阅读文章 - 我不会在这里尝试解释）并且我认为它一直阻塞直到有足够的“噪音”来生成必要的随机数。由于只有一个其他开发人员在系统上工作，因此可能需要几分钟来填充缓冲区。一旦缓冲区已满，它就会继续并按预期执行连接。这也解释了为什么我们有时会看到性能清脆，然后缓慢。简而言之，我们将字符串“-Djava.security.egd=file:///dev/urandom”添加到 Korn shell 脚本中对 java 的调用和 jar 文件名之间，现在它就像一个冠军一样工作。这是完整的命令字符串：

/usr/bin/java -Xms64m -Xmx1024m -Djava.security.egd=file:///dev/urandom -jar $1 $2 $PID

如果您确实阅读了这篇文章，请务必阅读下面的评论。其中一个真的很有趣！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T18:49:06.007

找到了！当我们在 Solaris 下运行时，我们运行的是带有 32 位扩展的 32 位 JVM。我们通过 Korn shell 脚本执行，并添加了一个 -d64 标志来强制 64 位处理。在 Linux 机器上，我们从 shell 脚本中删除了 -d64 标志，大家都很高兴。感谢亚历克斯的想法和帮助。

# javascript - jQuery函数执行顺序

> ID：11616149
> 
> 赞同：0
> 
> 时间：2012-07-23T15:59:10.187
> 
> 标签：javascript, jquery

我对`$.get()`函数的 jQuery 执行顺序有问题，或者可能缺乏理解。我想从数据库服务器中检索一些信息以在`$.ready()`函数中使用。众所周知，当 get 返回时，它会将数据传递给返回处理程序，该处理程序对数据进行处理。在我的情况下，我想为在就绪处理函数中声明的变量分配一些值。但问题是，`$.get()`在 ready 退出之前，返回处理程序不会执行。我想知道（a）我这样做是否正确/是否有更好的方法，或者（b）是否有解决方法（即强制 get return 处理程序立即执行或其他一些我不知道的修复的）。我有一种感觉，这是一些关于 JavaScript 的闭包。

根据要求，我将发布一个示例来说明我的意思：

```
$(function() {
    var userID;

    $.get(uri, function(returnData) {
                   var parsedData = JSON.parse(returnData);
                   userID = parsedData.userID;
               });
  }); 
```

如您所见，我正在准备好声明一个变量。然后使用对数据库的 get 调用来检索所需的数据。然后我解析返回的 JSON 并将 userID 分配给之前声明的变量。我已经用几个警报对其进行了测试。get 之后的警报将 userID 显示为未定义，但 get 的返回处理程序中的警报显示它已被分配。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T16:04:07.003

$.get() 是异步的。您必须使用回调来填充变量并在请求完成后进行计算。就像是：

```
$(document).ready(function(){

    $.get( "yourUrl", function( data, textStatus, jqXHR ) {
        var myData = data; // data contains the response content
        // perform your processing here...
        registerHandlers( myData ); // you can only pass "data" off course...
    });

});

// your function to register the handlers as you said you need to.
function registerHandlers( data ) {
    // registering handlers...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T16:04:11.537

`$.get`是一个ajax请求。*AJAX 中的 A*代表*asynchronous*，因此脚本不会等待此请求完成，而是会进一步处理您的代码。

您可以使用完整的回调，也可以使用[$.ajax](http://api.jquery.com/jQuery.ajax/)并设置**`async`**为**`false`**执行同步请求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T16:04:01.270

$.get() 函数执行一个异步 httprequest，所以只要这个请求返回一些东西，回调函数就会被执行。您应该在 $.ready() 之外处理此回调

也许如果你确切地解释你想做什么，它会更容易提供帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T16:06:54.373

您是否正在寻找类似的东西：

```
$(document).ready(function(){
    var variable1, variable 2;
    $.get('mydata.url', function(data){
        variable1 = data.mydata1;
        variable2 = data.mydata2;
    });
}); 
```

如果您首先声明变量，那么您可以在 get 调用中设置它们的值。您可以在 get 处理程序的末尾添加一个函数调用来使用这些值调用一个单独的函数吗？如果没有某种示例，很难详细说明。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T16:08:50.723

*没有看到完整的代码，我猜你应该在外面* 声明你的变量`$.ready`；初始化它以`ready`进行初始页面加载；然后从`get`回调处理程序更新它。

例如

```
var x = ""; // declaration

$(document).ready(function() { x = "initial value"; });

$.get(...).success(function() { x = "updated from ajax"; }); 
```

# javascript - jQuery Tools Overlay - 两个关闭条件不同的按钮

> ID：11616150
> 
> 赞同：0
> 
> 时间：2012-07-23T15:59:13.110
> 
> 标签：javascript, jquery, overlay, jquery-tools

我有以下 jQuery 工具覆盖：

```
<div id='editDescriptiontOverlay' class='overlay'>
  <input type='text' class='description'/>
  <button class='save'>Save</button>
  <button class='close'>Cancel</button>
</div> 
```

**背景信息**：此叠加层的 HTML 是静态的。我有一个项目列表，每个项目都有自己的*编辑*链接。单击给定的*编辑*链接时，将通过调用生成叠加层：`$('a[rel=#editDescriptionOverlay]').overlay( { ... } );`并使用相应的文本填充输入。

当且仅当验证成功时，*保存*按钮需要验证输入元素中的文本并**关闭覆盖。**否则，覆盖必须保持打开状态。*取消*按钮只是关闭覆盖而不进行验证。

验证逻辑已经过独立验证可以正常工作。

我尝试`onBeforeClose`在覆盖生成期间设置事件作为验证手段。采用这种方法，*保存*和*取消*按钮都需要相同的类`.close`。不幸的是，该条件适用`.close`于叠加层中的所有元素，因此即使是“*取消*”按钮也在验证。

我还尝试在生成叠加层后立即将单击事件绑定到“*保存”按钮，如下所示：*

```
$('.save', $('#editDescriptionOverlay'))
  .unbind('click')
  .bind('click', function() {
    if (validateText) {
      console.log("Validation passed.");
      $('a[rel=#editDescriptionOverlay]').overlay().close();
    }
    else {
      console.log("Validation failed.");
    }
  }); 
```

console.log 确认验证工作正常，但覆盖没有关闭。

任何见解表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:26:20.157

对于 jquery 小部件，应按如下方式调用公共方法：

$('a[rel=#editDescriptionOverlay]').overlay("close");

其中 close 是您要调用的方法名称。

如果一个方法接受参数，那么这些应该作为参数添加到方法名称之后。

**更新：**

对不起。我刚刚有时间检查 jQuery Overlay Tools 是什么，但我弄错了。这与任何 jQuery 小部件都不相似，因此，我上面的评论也不适用于这种情况。我在上面尝试了您的代码并且它有效。覆盖已关闭。但是，当我尝试使用 multiple`<a rel="#editDescriptionOverlay">`时，我认为这就是你所做的。那没起效。我的建议是只使用一个`<a rel="#editDescriptionOverlay">`并为 Edit 链接使用一个虚拟锚元素，单击该元素会触发对`<a rel="#editDescriptionOverlay">`. 你可以这样做：

```
<script type="text/javascript">

    $(document).bind("ready", function(e){
        $("a[rel]").overlay();
        $('.save', $('#editDescriptionOverlay')).unbind("click").bind("click", function(){
            if (validationValue){
                $("a[rel=#editDescriptionOverlay]").overlay().close();
            }
        });
    });

    function clickThis(){
        $("a[rel=#editDescriptionOverlay]").trigger('click'); 
        return false;
    }
</script>

<a href="#" onclick="return clickThis();">Edit1</a>
<a href="#" onclick="return clickThis();">Edit2</a>

<a rel="#editDescriptionOverlay">Dummy</a>

<div id='editDescriptionOverlay' class='overlay'>
  <input type='text' class='description'/>
  <button class='save'>Save</button>
  <button class='close'>Cancel</button>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:59:32.880

我更喜欢将事件绑定到保存按钮（您提到的第二个）。实际上，您的代码看起来不错，除了您可能不需要将事件绑定到`$('#editDescriptionOverlay')`并且您在上面的 html 标记中有错字（`<div id='editDescriptiontOverlay'`应该是`<div id='editDescriptionOverlay'`）。

[有关示例，](http://jsfiddle.net/sM58e/3/)请参见此处。

# iphone - 视图的自动变化？

> ID：11616153
> 
> 赞同：-1
> 
> 时间：2012-07-23T15:59:48.533
> 
> 标签：iphone, ios, xcode, views

我想知道如何自动将视图更改为另一个视图。就像启动我的应用程序的演示文稿一样。

有人可以在这里帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:01:24.400

您可以使用`NSTimer`来安排执行您的类的方法，该方法将通过调用来显示您的视图`addSubview`。

类似于以下内容：

```
 self.slideshowTimer = [NSTimer scheduledTimerWithTimeInterval:interval
                                                       target:self
                                                     selector:@selector(showNextSlide)
                                                     userInfo:nil repeats:YES]; 
```

至于添加/删除视图，您有很多选择；一个非常简单的方案是将标签与您的“幻灯片”视图相关联，然后执行以下操作：

```
- (void)showNextSlide {

   UIView* current_view = [self.view viewWithTag:SLIDE_VIEW_TAG];
   if (current_view) [current_view removeFromSuperview];
   current_view = <ALLOCATE YOUR NEXT VIEW>
   [self.view addSubview:current_view];
} 
```

这只是一个示例，您可能会找到更好的方法来管理您的视图。

完成后不要忘记调用`invalidate`你的 NSTimer（可能在你的类`dealloc`方法中）。

# python - Pipeline Scrapy Python - 关键错误：'id'

> ID：11616154
> 
> 赞同：1
> 
> 时间：2012-07-23T15:59:58.897
> 
> 标签：python, scrapy, pipeline

我试图让scrapy管道将数据汇集到我的数据库中。我遇到的问题是无法在我的表中存储主字段的值“contentid”。我正在使用变量 current_affiliate_item 但没有任何运气。

在此先感谢您的帮助！

```
File "/Users/pipelines.py", line 46, in _conditional_insert
    self.update_affiliate_item(tx, item, affiliate_item)
  File "/Users/pipelines.py", line 109, in update_affiliate_item
    current_affiliate_item['id'], #used to be this - current_affiliate_item['id']
exceptions.KeyError: 'id' 
```

这是它正在调用的代码 - 从第 46 行开始 ln 46 是 - self.update_affiliate_item(tx, item, associate_item) ln 109 是 - current_affiliate_item['id']

我不知道我的问题是什么，并且已经为此困扰了好几天。我试着打电话

```
 if affiliate_item:
        self.update_affiliate_item(tx, item, affiliate_item)
        item_affiliate_id = affiliate_item['id']
        item['affiliate_item_id'] = affiliate_item['id']
        item['id'] = affiliate_item['item_id'] 
    else:
        item['id'] = self.get_item_id(tx, item)
        item_affiliate_id = self.insert_affiliate_item(tx, item)

    # item_affiliate_id = self.insert_or_update_affiliate(tx, item)
    self.insert_or_update_photos(tx, item)

    for price in item['prices']: 
        self.insert_or_update_price(tx, item, item_affiliate_id, price)

    # log.msg("Item prices stored in db: %s" % item['name'], level=log.INFO)

def find_affiliate_item(self, tx, item): #changed selx to self
    tx.execute("select * from z2ah5_jreviews_content where affiliate_item_id = %s and jr_retailer = %s", (item['affiliate_item_id'], item['retailer']))
    result = tx.fetchone()
    if result:
        return result
    else:
        return False

def get_item_id(self, tx, item):
    tx.execute("select * from z2ah5_jreviews_content where slug = %s ", (item['slug']))
    result = tx.fetchone()
    if result:
        return result['contentid']
    else:
        tx.execute(\
            "insert into z2ah5_jreviews_content (name, slug, date_created, date_modified) "
            "values (%s, %s, %s, %s)",
            (
                item['name'],
                item['slug'],
                datetime.datetime.now(),
                datetime.datetime.now(), 
                )
            )
        return tx.lastrowid

def insert_affiliate_item(self, tx, item):
    tx.execute(\
        "insert into z2ah5_jreviews_content (item_id, jr_retailer, affiliate_item_id, jr_description, date_created, date_modified) "
        "values (%s, %s, %s, %s, %s, %s)",
        (
            item['id'],
            item['retailer'],
            item['affiliate_item_id'],
            item['desc'],
            datetime.datetime.now(),
            datetime.datetime.now()
            )
        )
    return tx.lastrowid

def update_affiliate_item(self, tx, item, current_affiliate_item): #used to be this - current_affiliate_item
    tx.execute(\
        "update z2ah5_jreviews_content set jr_description = %s, date_modified = %s where contentid = %s ",
        (
            item['desc'],
            datetime.datetime.now(),
            current_affiliate_item['id'], #used to be this -          current_affiliate_item['id']
            )               
        ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T16:10:42.237

该错误是由于调用函数`affiliate_item`时dict没有'id'键`update_affiliate_item`

而不是这个

```
if affiliate_item: 
```

试试这个：

```
if affiliate_item and affiliate_item.has_key('id'): 
```

# perl - Parallel::ForkManager，当 ->start 返回 false 时会发生什么

> ID：11616156
> 
> 赞同：2
> 
> 时间：2012-07-23T16:00:00.780
> 
> 标签：perl, parallel-processing, fork

回复： [http ://www.perlmonks.org/?node_id=786942](http://www.perlmonks.org/?node_id=786942)

什么时候：

```
$manager->start and next;

&dowork(); 
```

父级返回 true ( `$pid`)，然后进入周围循环的下一次迭代。孩子返回 0，然后做这项工作。

如果我理解正确，如果我们达到最大孩子的数量，`$manager->start`将返回 0，父母会做这项工作吗？如果是这样，阻止父母做任何工作的最好方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T16:09:51.790

[并行::ForkManager](http://search.cpan.org/perldoc?Parallel%3a%3aForkManager)

`start`将永远开始一个孩子。它可能必须等待其中一个孩子结束（当最大数量的孩子正在运行时），但它已做好充分准备。

除了他的孩子，它不会返回零。（它会因错误而死。）

# php - 生成谷歌图表有时会超时，而其他时候则不会

> ID：11616160
> 
> 赞同：0
> 
> 时间：2012-07-23T16:00:09.220
> 
> 标签：php, mysql, graph

我使用 php 和 mysql 创建了一个调查系统。我有一个名为“答案”的答案表，其中存储了用户提交的所有回复。我创建了一个脚本来生成一个谷歌图表，一次显示 2 个问题的统计数据。这个脚本有时似乎在响应时间很短的情况下工作，有时它需要很长时间，甚至返回一个内部服务器错误（我认为因为它需要很长时间才能得到结果，但我不确定）

这是php脚本

```
<?
// DB CONFIG FILE
require("../db/config.inc.php");
// DB CLASS FILE
require("../db/Database.class.php");
// CREATE THE $DB OBJECT
$db = new Database(DB_SERVER, DB_USER, DB_PASS, DB_DATABASE);
// DB CONNECTION
$db->connect();

error_reporting(-1);

// GET THE SERVER ID VIA POST
$sID = 1342625918; // HARD NUMBER FOR TESTING

// GET THE QUESTION IDS VIA POST
$question1 = 5; // HARD NUMBER FOR TESTING
$question2 = 17; // HARD NUMBER FOR TESTING

//GET THE NAME OF THE SURVEY
$sql = "SELECT * FROM survey WHERE sID = '$sID'";
$rows = $db->query($sql);
while ($record = $db->fetch_array($rows)) {
$sName = $record["sName"];
}

//GET QUESTION ONE
$sql = "SELECT * FROM questions WHERE qID = '$question1'";
$rows = $db->query($sql);
while ($record = $db->fetch_array($rows)) {
$q1Text = $record["qName"];
}

//GET QUESTION TWO
$sql = "SELECT * FROM questions WHERE qID = '$question2'";
$rows = $db->query($sql);
while ($record = $db->fetch_array($rows)) {
$q2Text = $record["qName"];
}

//THIS GETS THE NAMES FOR THE GOOGLE GRAPH
$sql006 = "SELECT * from survey_selected_question, survey_selected_question_selected_option, options WHERE survey_selected_question.qID = '$question1' AND survey_selected_question_selected_option.ssqID = survey_selected_question.ssqID AND options.oID = survey_selected_question_selected_option.oID AND survey_selected_question.sID = '$sID'";
$rows006 = $db->query($sql006);
$numRes006 = $db->affected_rows;
$names = "";
while ($record006 = $db->fetch_array($rows006)) {
$names .= "'".$record006["oName"]."',";
}
// CLEAN UP THE NAMES VAR
$names = substr($names, 0, -1);

// START FUNCTION FOO
function foo($answer1, $answer2, $sID){

// CREATE THE DB OBJECT
$dbOne = new Database(DB_SERVER, DB_USER, DB_PASS, DB_DATABASE);
// DB CONNECTION
$dbOne->connect();

$returnVal = 0;

//GET THE DISTINCT SUBMISSIONS FROM THE ANSWERS TABLE FOR THIS SPECIFIC SURVEY
$sql0 = "SELECT DISTINCT(submissionID) FROM answer WHERE sID = '$sID'";
$rows0 = $dbOne->query($sql0);

while ($record0 = $dbOne->fetch_array($rows0)) {

$submissionID = $record0["submissionID"];

// SELECT SUBMISSIONS WHERE ANSWER = PASSED ANSWER 1 or 2
$sql01 = "SELECT * from answer WHERE submissionID = '$submissionID' AND (answer = '$answer1' OR answer = '$answer2')";
$rows01 = $dbOne->query($sql01);
$numRes = $dbOne->affected_rows;

if($numRes=='2'){

$returnVal = $returnVal + 1;

}
}
return $returnVal;

$dbOne->close();
}
//END FUNCTION FOO

// START FUNCTION FOO2
function foo2($oID, $sID, $question1){

// CREATE THE DB OBJECT
$dbTwo = new Database(DB_SERVER, DB_USER, DB_PASS, DB_DATABASE);
// DB CONNECTION
$dbTwo->connect();

// GET OPTION IDS AND BUILD AN OUTWARD STRING FOR GOOGLE GRAPH OF RESULTS
$sql2 = "SELECT * from survey_selected_question, survey_selected_question_selected_option, options WHERE survey_selected_question.qID = '$question1' AND survey_selected_question_selected_option.ssqID = survey_selected_question.ssqID AND options.oID = survey_selected_question_selected_option.oID AND survey_selected_question.sID = '$sID'";
$rows2 = $dbTwo->query($sql2);
$returnVal2 = "";
while ($record2 = $dbTwo->fetch_array($rows2)) {

$returnVal2 .= "".foo($record2["oID"], $oID, $sID).",";
}
//END FUNCTION FOO2

// CLEAN UP THE RETURNVAL2
substr($returnVal2, 0, -1);

// RETURN THE VAL HERE
return $returnVal2;
$dbTwo->close();
}

// START BUILDING THE google Array
$sql003 = "SELECT * from survey_selected_question, survey_selected_question_selected_option, options WHERE survey_selected_question.qID = '$question2' AND survey_selected_question_selected_option.ssqID = survey_selected_question.ssqID AND options.oID = survey_selected_question_selected_option.oID AND survey_selected_question.sID = '$sID'";
$rows003 = $db->query($sql003);
$numRes2 = $db->affected_rows;
$googleArray = "";
while ($record003 = $db->fetch_array($rows003)) {

$googleArray .= "['".$record003["oName"]."',".foo2($record003["oID"], $sID, $question1)."],";
?>
<?

}

// CLEAN UP THE GOOGLE ARRAY
$googleArray = substr($googleArray, 0, -1);

?>
<!DOCTYPE HTML>
<html>
<head>
<meta name = "viewport" content = "width = device-width">
<meta name = "viewport" content = "initial-scale = 1.0, user-scalable = no">
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
        ['Name',<?= $names; ?>],
        <?= $googleArray; ?>
]);

        var options = {
          title: 'Line graph for question "<?= $q1Text; ?>" against question "<?= $q2Text; ?>"'
          , colors:['#5D0F99','#2F543B','#BD2115','#D67314','#F92985','#0D85C7','#000D9C','#D9A5F6', '#27E80C', '#725F53']
        };

        var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
    </script>
<style>
div#wrapper {
max-width: 700px;
overflow:hidden;
background:#eee;
margin: 0 auto;
padding: 8px 8px 8px 8px;
border:1px solid black;
}

a{
    color:#000;

}

input.goback {
background-color: #ccc;
border: 1px outset #000;
color: #000;
padding: 4px;
margin-left: 2px;
}

</style>
</head>
<body>
<div id="wrapper">
<h1><?= $sName; ?></h1>

<form method="post" action="main.php">
<p>Show me average(s) on 
  <select name="oID">
  <?
//GET QUESTION ONE
$sql004 = "SELECT * from survey_selected_question, survey_selected_question_selected_option, options WHERE survey_selected_question.qID = '$question1' AND survey_selected_question_selected_option.ssqID = survey_selected_question.ssqID AND options.oID = survey_selected_question_selected_option.oID AND survey_selected_question.sID = '$sID'";
$rows004 = $db->query($sql004);

while ($record004 = $db->fetch_array($rows004)) {
?>
  <option value="<?= $record004["oID"]; ?>"><?= $record004["oName"]; ?></option>
<?
}
?>
</select>

with these survey type(s): 
<select name="types">
<option value="0">All</option>
<?
//GET THIS SURVEYS TYPES
$sql005 = "SELECT * from survey_types, survey_selected_types WHERE survey_selected_types.sID = '$sID' AND survey_selected_types.stID = survey_types.stID";
$rows005 = $db->query($sql005);

while ($record005 = $db->fetch_array($rows005)) {
?>
<option value="<?= $record005["stID"]; ?>"><?= $record005["stName"]; ?></option>
<?
}
?>
</select>

over a 12 month period.

<input type="hidden" name="sID" value="<?= $sID; ?>">
<input type="hidden" name="question1" value="<?= $question1; ?>">
<input type="hidden" name="edit" value="average">
<input type="hidden" name="question2" value="<?= $question2; ?>">
<input type="submit" name="submit" value="Go" class="goback">
</p>
</form>

<div id="chart_div" style="width: 675px; height: 500px;"></div>
<form method="post" action="main.php">
<p>
<input type="hidden" name="edit" value="survey">
<input type="hidden" name="sID" value="<?= $sID; ?>">
<input type="submit" value="Back To Statistics" class="goback">
</p>
</form>
</div>
</body>
</html>
<?
$db->close();
?> 
```

这是它输出的html（如果以及何时工作......就像我说的那样有时它返回得相当快，有时根本没有内部服务器错误）

```
<!DOCTYPE HTML>
<html>
<head>
<meta name = "viewport" content = "width = device-width">
<meta name = "viewport" content = "initial-scale = 1.0, user-scalable = no">
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
        ['Name','None','$1 - $50','$51 - $200','Over $200'],
        ['Yes',85,100,87,82,],['No',70,82,81,74,],['Undecided ',76,90,90,84,]]);

        var options = {
          title: 'Line graph for question "Not including this event, please estimate how much will you spend in the community during your visit, including accommodations, transportation, food, and gas, etc.)" against question "Would you describe this event as providing "good value?"'
          , colors:['#5D0F99','#2F543B','#BD2115','#D67314','#F92985','#0D85C7','#000D9C','#D9A5F6', '#27E80C', '#725F53']
        };

        var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
    </script>
<style>
div#wrapper {
max-width: 700px;
overflow:hidden;
background:#eee;
margin: 0 auto;
padding: 8px 8px 8px 8px;
border:1px solid black;
}

a{
    color:#000;

}

input.goback {
background-color: #ccc;
border: 1px outset #000;
color: #000;
padding: 4px;
margin-left: 2px;
}

</style>
</head>
<body>
<div id="wrapper">
<h1>Test Survey One</h1>

<form method="post" action="main.php">
<p>Show me average(s) on 
  <select name="oID">
    <option value="33">None</option>
  <option value="34">$1 - $50</option>
  <option value="35">$51 - $200</option>
  <option value="36">Over $200</option>
</select>

with these survey type(s): 
<select name="types">
<option value="0">All</option>
<option value="13">One week</option>
<option value="16">Paid</option>
<option value="18">Fair</option>
<option value="50">Live performance(s)</option>
<option value="51">Exhibition</option>
<option value="59">Community Pride</option>
<option value="54">Local foods / goods (grown or produced)</option>
<option value="53">Agriculture</option>
<option value="52">Art and Culture</option>
<option value="61">Industry</option>
<option value="62">Shop local</option>
<option value="39">Simcoe</option>
<option value="48">Fall</option>
<option value="65">Sale(s)</option>
<option value="66">Vendors</option>
<option value="67">Midway / rides</option>
<option value="68">Live music</option>
<option value="70">Live performance (not music or theatre)</option>
</select>

over a 12 month period.

<input type="hidden" name="sID" value="1342625918">
<input type="hidden" name="question1" value="5">
<input type="hidden" name="edit" value="average">
<input type="hidden" name="question2" value="17">
<input type="submit" name="submit" value="Go" class="goback">
</p>
</form>

<div id="chart_div" style="width: 675px; height: 500px;"></div>
<form method="post" action="main.php">
<p>
<input type="hidden" name="edit" value="survey">
<input type="hidden" name="sID" value="1342625918">
<input type="submit" value="Back To Statistics" class="goback">
</p>
</form>
</div>
</body>
</html> 
```

关于为什么这有时会很快起作用而其他人基本上似乎是超时或什么的任何想法？

注意：我第一次传递 question1 和 question2 号码并加载页面时它会超时。如果我点击刷新它会加载

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T17:40:39.517

可能与 jsapi 可能使用[www.google.com/chart](http://www.google.com/chart)的事实有关？生成它们。有时会超时。

100% 确定，它应该使用[http://chart.googleapis.com/](http://chart.googleapis.com/)图表？也许使用 google.Visualization 构造函数可以让您更改目标 URL。

# reverse-geocoding - 寻找一个好的和免费的反向地理编码 API

> ID：11616169
> 
> 赞同：17
> 
> 时间：2012-07-23T16:00:30.020
> 
> 标签：reverse-geocoding

我熟悉两个反向地理编码 API - Google Maps 和foursquare。两者都有问题。考虑 lat,lng = 35.699,139.707（东京）。

**四方：**

```
GET https://api.foursquare.com/v2/venues/search?ll=35.699,139.707&oauth_token=5TJR4WQZSOW0ZWTE4ENMXKO3Y415252GITEMRPQIVPMEGCYK&v=20120723&limit=1 
```

产生以下结果：

```
{
"meta": {
    "code": 200
},
"notifications": [
    {
        "type": "notificationTray",
        "item": {
            "unreadCount": 0
        }
    }
],
"response": {
    "venues": [
        {
            "id": "4b64ebedf964a520e3d92ae3",
            "name": "まいどおおきに食堂 東新宿食堂",
            "contact": {
                "phone": "0352911870",
                "formattedPhone": "03-5291-1870"
            },
            "location": {
                "address": "大久保1-1-45",
                "crossStreet": "新宿セントラルハイツプラザ 1F",
                "lat": 35.698492646211,
                "lng": 139.707271456718,
                "distance": 61,
                "postalCode": "169-0072",
                "city": "新宿区",
                "state": "東京都",
                "country": "Japan",
                "cc": "JP"
            },
            "categories": [
                {
                    "id": "4bf58dd8d48988d111941735",
                    "name": "Restaurant japonais",
                    "pluralName": "Restaurants japonais",
                    "shortName": "Japonaise",
                    "icon": {
                        "prefix": "https://foursquare.com/img/categories_v2/food/japanese_",
                        "suffix": ".png"
                    },
                    "primary": true
                }
            ],
            "verified": false,
            "stats": {
                "checkinsCount": 191,
                "usersCount": 100,
                "tipCount": 1
            },
            "url": "http://www.shokudo.jp/",
            "likes": {
                "count": 0,
                "groups": []
            },
            "specials": {
                "count": 0,
                "items": []
            },
            "hereNow": {
                "count": 0,
                "groups": []
            }
        }
    ]
} 
```

}

我只对`response.venues[0].location.city`条目感兴趣。不幸的是，我不懂日语，所以我不知道它是什么。好吧，谷歌说它是新宿 - 东京的特殊病房之一。

**谷歌地图：**

```
GET http://maps.googleapis.com/maps/api/geocode/json?sensor=false&language=en&latlng=35.699,139.707 
```

产量：

```
{
   "results" : [
      {
         "address_components" : [
            {
               "long_name" : "４１",
               "short_name" : "４１",
               "types" : [ "sublocality_level_4", "sublocality", "political" ]
            },
            {
               "long_name" : "１",
               "short_name" : "１",
               "types" : [ "sublocality_level_3", "sublocality", "political" ]
            },
            {
               "long_name" : "１丁目",
               "short_name" : "１丁目",
               "types" : [ "sublocality_level_2", "sublocality", "political" ]
            },
            {
               "long_name" : "Okubo",
               "short_name" : "Okubo",
               "types" : [ "sublocality_level_1", "sublocality", "political" ]
            },
            {
               "long_name" : "Shinjuku",
               "short_name" : "Shinjuku",
               "types" : [ "locality", "political" ]
            },
            {
               "long_name" : "Tokyo",
               "short_name" : "Tokyo",
               "types" : [ "administrative_area_level_1", "political" ]
            },
            {
               "long_name" : "Japan",
               "short_name" : "JP",
               "types" : [ "country", "political" ]
            }
         ],
         "formatted_address" : "Japan, Tokyo, Shinjuku, Okubo, １丁目１−４１",
         "geometry" : {
            "location" : {
               "lat" : 35.69893960,
               "lng" : 139.7069460
            },
            "location_type" : "APPROXIMATE",
            "viewport" : {
               "northeast" : {
                  "lat" : 35.70028858029149,
                  "lng" : 139.7082949802915
               },
               "southwest" : {
                  "lat" : 35.69759061970850,
                  "lng" : 139.7055970197085
               }
            }
         },
         "types" : [ "sublocality_level_4", "sublocality", "political" ]
      },
      {
         "address_components" : [
            {
               "long_name" : "169-8540",
               "short_name" : "169-8540",
               "types" : [ "postal_code" ]
            },
            {
               "long_name" : "２",
               "short_name" : "２",
               "types" : [ "sublocality_level_3", "sublocality", "political" ]
            },
            {
               "long_name" : "１丁目",
               "short_name" : "１丁目",
               "types" : [ "sublocality_level_2", "sublocality", "political" ]
            },
            {
               "long_name" : "Okubo",
               "short_name" : "Okubo",
               "types" : [ "sublocality_level_1", "sublocality", "political" ]
            },
            {
               "long_name" : "Shinjuku",
               "short_name" : "Shinjuku",
               "types" : [ "locality", "political" ]
            },
            {
               "long_name" : "Tokyo",
               "short_name" : "Tokyo",
               "types" : [ "administrative_area_level_1", "political" ]
            },
            {
               "long_name" : "Japan",
               "short_name" : "JP",
               "types" : [ "country", "political" ]
            }
         ],
         "formatted_address" : "１丁目-２ Okubo, Shinjuku, Tokyo 169-8540, Japan",
         "geometry" : {
            "location" : {
               "lat" : 35.69946460,
               "lng" : 139.70746810
            },
            "location_type" : "APPROXIMATE",
            "viewport" : {
               "northeast" : {
                  "lat" : 35.70081358029149,
                  "lng" : 139.7088170802915
               },
               "southwest" : {
                  "lat" : 35.69811561970850,
                  "lng" : 139.7061191197085
               }
            }
         },
         "types" : [ "postal_code" ]
      },
      {
         "address_components" : [
            {
               "long_name" : "１",
               "short_name" : "１",
               "types" : [ "sublocality_level_3", "sublocality", "political" ]
            },
            {
               "long_name" : "１丁目",
               "short_name" : "１丁目",
               "types" : [ "sublocality_level_2", "sublocality", "political" ]
            },
            {
               "long_name" : "Okubo",
               "short_name" : "Okubo",
               "types" : [ "sublocality_level_1", "sublocality", "political" ]
            },
            {
               "long_name" : "Shinjuku",
               "short_name" : "Shinjuku",
               "types" : [ "locality", "political" ]
            },
            {
               "long_name" : "Tokyo",
               "short_name" : "Tokyo",
               "types" : [ "administrative_area_level_1", "political" ]
            },
            {
               "long_name" : "Japan",
               "short_name" : "JP",
               "types" : [ "country", "political" ]
            }
         ],
         "formatted_address" : "Japan, Tokyo, Shinjuku, Okubo, １丁目１",
         "geometry" : {
            "bounds" : {
               "northeast" : {
                  "lat" : 35.69984490,
                  "lng" : 139.70749510
               },
               "southwest" : {
                  "lat" : 35.69787060,
                  "lng" : 139.70506090
               }
            },
            "location" : {
               "lat" : 35.69880630,
               "lng" : 139.70610160
            },
            "location_type" : "APPROXIMATE",
            "viewport" : {
               "northeast" : {
                  "lat" : 35.70020673029150,
                  "lng" : 139.7076269802915
               },
               "southwest" : {
                  "lat" : 35.69750876970850,
                  "lng" : 139.7049290197085
               }
            }
         },
         "types" : [ "sublocality_level_3", "sublocality", "political" ]
      },
      {
         "address_components" : [
            {
               "long_name" : "１丁目",
               "short_name" : "１丁目",
               "types" : [ "sublocality_level_2", "sublocality", "political" ]
            },
            {
               "long_name" : "Okubo",
               "short_name" : "Okubo",
               "types" : [ "sublocality_level_1", "sublocality", "political" ]
            },
            {
               "long_name" : "Shinjuku",
               "short_name" : "Shinjuku",
               "types" : [ "locality", "political" ]
            },
            {
               "long_name" : "Tokyo",
               "short_name" : "Tokyo",
               "types" : [ "administrative_area_level_1", "political" ]
            },
            {
               "long_name" : "Japan",
               "short_name" : "JP",
               "types" : [ "country", "political" ]
            }
         ],
         "formatted_address" : "Japan, Tokyo, Shinjuku, Okubo, １丁目",
         "geometry" : {
            "bounds" : {
               "northeast" : {
                  "lat" : 35.70128920,
                  "lng" : 139.70796940
               },
               "southwest" : {
                  "lat" : 35.69787060,
                  "lng" : 139.7019760
               }
            },
            "location" : {
               "lat" : 35.69868950,
               "lng" : 139.70306310
            },
            "location_type" : "APPROXIMATE",
            "viewport" : {
               "northeast" : {
                  "lat" : 35.70128920,
                  "lng" : 139.70796940
               },
               "southwest" : {
                  "lat" : 35.69787060,
                  "lng" : 139.7019760
               }
            }
         },
         "types" : [ "sublocality_level_2", "sublocality", "political" ]
      },
      {
         "address_components" : [
            {
               "long_name" : "Okubo",
               "short_name" : "Okubo",
               "types" : [ "sublocality_level_1", "sublocality", "political" ]
            },
            {
               "long_name" : "Shinjuku",
               "short_name" : "Shinjuku",
               "types" : [ "locality", "political" ]
            },
            {
               "long_name" : "Tokyo",
               "short_name" : "Tokyo",
               "types" : [ "administrative_area_level_1", "political" ]
            },
            {
               "long_name" : "Japan",
               "short_name" : "JP",
               "types" : [ "country", "political" ]
            }
         ],
         "formatted_address" : "Okubo, Shinjuku, Tokyo, Japan",
         "geometry" : {
            "bounds" : {
               "northeast" : {
                  "lat" : 35.70956610,
                  "lng" : 139.7091340
               },
               "southwest" : {
                  "lat" : 35.69787310,
                  "lng" : 139.70060080
               }
            },
            "location" : {
               "lat" : 35.70418340,
               "lng" : 139.70558750
            },
            "location_type" : "APPROXIMATE",
            "viewport" : {
               "northeast" : {
                  "lat" : 35.70956610,
                  "lng" : 139.7091340
               },
               "southwest" : {
                  "lat" : 35.69787310,
                  "lng" : 139.70060080
               }
            }
         },
         "types" : [ "sublocality_level_1", "sublocality", "political" ]
      },
      {
         "address_components" : [
            {
               "long_name" : "Higashishinjuku Station",
               "short_name" : "Higashishinjuku Station",
               "types" : [ "train_station", "transit_station", "establishment" ]
            },
            {
               "long_name" : "２７",
               "short_name" : "２７",
               "types" : [ "sublocality_level_3", "sublocality", "political" ]
            },
            {
               "long_name" : "７丁目",
               "short_name" : "７丁目",
               "types" : [ "sublocality_level_2", "sublocality", "political" ]
            },
            {
               "long_name" : "Shinjuku",
               "short_name" : "Shinjuku",
               "types" : [ "sublocality_level_1", "sublocality", "political" ]
            },
            {
               "long_name" : "Shinjuku",
               "short_name" : "Shinjuku",
               "types" : [ "locality", "political" ]
            },
            {
               "long_name" : "Tokyo",
               "short_name" : "Tokyo",
               "types" : [ "administrative_area_level_1", "political" ]
            },
            {
               "long_name" : "Japan",
               "short_name" : "JP",
               "types" : [ "country", "political" ]
            }
         ],
         "formatted_address" : "Higashishinjuku Station, ７丁目-２７ Shinjuku, Tokyo, Japan",
         "geometry" : {
            "bounds" : {
               "northeast" : {
                  "lat" : 35.7050830,
                  "lng" : 139.7144590
               },
               "southwest" : {
                  "lat" : 35.6926030,
                  "lng" : 139.7000410
               }
            },
            "location" : {
               "lat" : 35.697920,
               "lng" : 139.7075490
            },
            "location_type" : "APPROXIMATE",
            "viewport" : {
               "northeast" : {
                  "lat" : 35.7050830,
                  "lng" : 139.7144590
               },
               "southwest" : {
                  "lat" : 35.6926030,
                  "lng" : 139.7000410
               }
            }
         },
         "types" : [ "train_station", "transit_station", "establishment" ]
      },
      {
         "address_components" : [
            {
               "long_name" : "169-0072",
               "short_name" : "169-0072",
               "types" : [ "postal_code" ]
            },
            {
               "long_name" : "Okubo",
               "short_name" : "Okubo",
               "types" : [ "sublocality_level_1", "sublocality", "political" ]
            },
            {
               "long_name" : "Shinjuku",
               "short_name" : "Shinjuku",
               "types" : [ "locality", "political" ]
            },
            {
               "long_name" : "Tokyo",
               "short_name" : "Tokyo",
               "types" : [ "administrative_area_level_1", "political" ]
            },
            {
               "long_name" : "Japan",
               "short_name" : "JP",
               "types" : [ "country", "political" ]
            }
         ],
         "formatted_address" : "Okubo, Shinjuku, Tokyo 169-0072, Japan",
         "geometry" : {
            "bounds" : {
               "northeast" : {
                  "lat" : 35.70972520,
                  "lng" : 139.71028470
               },
               "southwest" : {
                  "lat" : 35.69710930,
                  "lng" : 139.69624280
               }
            },
            "location" : {
               "lat" : 35.70418340,
               "lng" : 139.70558750
            },
            "location_type" : "APPROXIMATE",
            "viewport" : {
               "northeast" : {
                  "lat" : 35.70972520,
                  "lng" : 139.71028470
               },
               "southwest" : {
                  "lat" : 35.69710930,
                  "lng" : 139.69624280
               }
            }
         },
         "types" : [ "postal_code" ]
      },
      {
         "address_components" : [
            {
               "long_name" : "Shinokubo Station",
               "short_name" : "Shinokubo Station",
               "types" : [ "train_station", "transit_station", "establishment" ]
            },
            {
               "long_name" : "１０",
               "short_name" : "１０",
               "types" : [ "sublocality_level_3", "sublocality", "political" ]
            },
            {
               "long_name" : "１丁目",
               "short_name" : "１丁目",
               "types" : [ "sublocality_level_2", "sublocality", "political" ]
            },
            {
               "long_name" : "Hyakunincho",
               "short_name" : "Hyakunincho",
               "types" : [ "sublocality_level_1", "sublocality", "political" ]
            },
            {
               "long_name" : "Shinjuku",
               "short_name" : "Shinjuku",
               "types" : [ "locality", "political" ]
            },
            {
               "long_name" : "Tokyo",
               "short_name" : "Tokyo",
               "types" : [ "administrative_area_level_1", "political" ]
            },
            {
               "long_name" : "Japan",
               "short_name" : "JP",
               "types" : [ "country", "political" ]
            }
         ],
         "formatted_address" : "Shinokubo Station, １丁目-１０ Hyakunincho, Shinjuku, Tokyo, Japan",
         "geometry" : {
            "bounds" : {
               "northeast" : {
                  "lat" : 35.7078270,
                  "lng" : 139.708840
               },
               "southwest" : {
                  "lat" : 35.6953970,
                  "lng" : 139.6937970
               }
            },
            "location" : {
               "lat" : 35.7013060,
               "lng" : 139.7000440
            },
            "location_type" : "APPROXIMATE",
            "viewport" : {
               "northeast" : {
                  "lat" : 35.7078270,
                  "lng" : 139.708840
               },
               "southwest" : {
                  "lat" : 35.6953970,
                  "lng" : 139.6937970
               }
            }
         },
         "types" : [ "train_station", "transit_station", "establishment" ]
      },
      {
         "address_components" : [
            {
               "long_name" : "Shinjuku Station",
               "short_name" : "Shinjuku Station",
               "types" : [ "train_station", "transit_station", "establishment" ]
            },
            {
               "long_name" : "３８",
               "short_name" : "３８",
               "types" : [ "sublocality_level_3", "sublocality", "political" ]
            },
            {
               "long_name" : "３丁目",
               "short_name" : "３丁目",
               "types" : [ "sublocality_level_2", "sublocality", "political" ]
            },
            {
               "long_name" : "Shinjuku",
               "short_name" : "Shinjuku",
               "types" : [ "sublocality_level_1", "sublocality", "political" ]
            },
            {
               "long_name" : "Shinjuku",
               "short_name" : "Shinjuku",
               "types" : [ "locality", "political" ]
            },
            {
               "long_name" : "Tokyo",
               "short_name" : "Tokyo",
               "types" : [ "administrative_area_level_1", "political" ]
            },
            {
               "long_name" : "Japan",
               "short_name" : "JP",
               "types" : [ "country", "political" ]
            }
         ],
         "formatted_address" : "Shinjuku Station, ３丁目-３８ Shinjuku, Tokyo, Japan",
         "geometry" : {
            "bounds" : {
               "northeast" : {
                  "lat" : 35.7005790,
                  "lng" : 139.7124960
               },
               "southwest" : {
                  "lat" : 35.6812220,
                  "lng" : 139.6878250
               }
            },
            "location" : {
               "lat" : 35.6909210,
               "lng" : 139.7002580
            },
            "location_type" : "APPROXIMATE",
            "viewport" : {
               "northeast" : {
                  "lat" : 35.7005790,
                  "lng" : 139.7124960
               },
               "southwest" : {
                  "lat" : 35.6812220,
                  "lng" : 139.6878250
               }
            }
         },
         "types" : [ "train_station", "transit_station", "establishment" ]
      },
      {
         "address_components" : [
            {
               "long_name" : "160-0022",
               "short_name" : "160-0022",
               "types" : [ "postal_code" ]
            },
            {
               "long_name" : "Shinjuku",
               "short_name" : "Shinjuku",
               "types" : [ "sublocality_level_1", "sublocality", "political" ]
            },
            {
               "long_name" : "Shinjuku",
               "short_name" : "Shinjuku",
               "types" : [ "locality", "political" ]
            },
            {
               "long_name" : "Tokyo",
               "short_name" : "Tokyo",
               "types" : [ "administrative_area_level_1", "political" ]
            },
            {
               "long_name" : "Japan",
               "short_name" : "JP",
               "types" : [ "country", "political" ]
            }
         ],
         "formatted_address" : "Shinjuku, Tokyo 160-0022, Japan",
         "geometry" : {
            "bounds" : {
               "northeast" : {
                  "lat" : 35.70311470,
                  "lng" : 139.71922230
               },
               "southwest" : {
                  "lat" : 35.68222330,
                  "lng" : 139.69241360
               }
            },
            "location" : {
               "lat" : 35.69110170,
               "lng" : 139.7067630
            },
            "location_type" : "APPROXIMATE",
            "viewport" : {
               "northeast" : {
                  "lat" : 35.70311470,
                  "lng" : 139.71922230
               },
               "southwest" : {
                  "lat" : 35.68222330,
                  "lng" : 139.69241360
               }
            }
         },
         "types" : [ "postal_code" ]
      },
   /* REMOVED FOR BREVITY */
   ],
   "status" : "OK"
} 
```

Google Maps API 是英文的，但它的结果太低级了。例如，城市和城镇通常用`locality`类型来标识。这里的地方是新宿，是东京的特别区之一，但它是东京行政系统的一个实施细节。我想把东京变成城市。当然，我可以搜索`administrative_area_level_1`类型标记而不是`locality`，因为我知道东京实际上是日本的一个县。

foursquare API 有同样的问题，它将城市报告为新宿，将州报告为东京，只是两者都是日语！

是否有任何简单的高级反向地理编码 API 可以返回常识结果？我的意思是，日本以外没有人说“我要去新宿”。人们说“我要去东京”。

谢谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-09-12T07:22:41.980

OpenStreeMap 也有一个反向查找工具：

[http://wiki.openstreetmap.org/wiki/Nominatim#Reverse_Geocoding_.2F_Address_lookup](http://wiki.openstreetmap.org/wiki/Nominatim#Reverse_Geocoding_.2F_Address_lookup)

来自链接的示例：

询问：

```
 http://nominatim.openstreetmap.org/reverse?format=xml&lat=52.5487429714954&lon=-1.81602098644987&zoom=18&addressdetails=1 
```

结果：

```
 <reversegeocode timestamp="Fri, 06 Nov 09 16:33:54 +0000" querystring="...">
   <result place_id="1620612" osm_type="node" osm_id="452010817">
     135, Pilkington Avenue, Wylde Green, City of Birmingham, West Midlands (county), B72, United Kingdom
   </result>
   <addressparts>
     <house>135</house>
     <road>Pilkington Avenue</road>
     <village>Wylde Green</village>
     <town>Sutton Coldfield</town>
     <city>City of Birmingham</city>
     <county>West Midlands (county)</county>
     <postcode>B72</postcode>
     <country>United Kingdom</country>
     <country_code>gb</country_code>
   </addressparts>   
 </reversegeocode> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-23T16:03:22.513

[Yahoo Maps API](http://developer.yahoo.com/maps/rest/V1/geocode.html)可能会帮助您，因为它提供了设置精度的功能。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-12-14T22:44:44.877

试试[GeocodeFarm](http://www.geocodefarm.com)。

每个基于 IP 的每天 250 次免费查询，但网络服务是无限免费的，便宜的 25 美元每天为您提供 25,000 次查询（这是我用于我的应用程序的查询）。

结果易于理解，文档完整，正向和反向等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T00:37:30.783

你可以试试 Bing Maps 我不知道它有多准确，但你可以试试

```
http://dev.virtualearth.net/services/v1/geocodeservice/geocodeservice.asmx/ReverseGeocode?latitude=[NUMBER]&longitude=[NUMBER]&key=[MAPS_KEY]&culture=%22en-us%22&format=json 
```

# django - 简单的 Django 过滤器查询：按主键分组？

> ID：11616175
> 
> 赞同：1
> 
> 时间：2012-07-23T16:00:47.697
> 
> 标签：django, django-models, django-piston

我`filter`在 Django 中使用`range`. 我以为`filter`总是返回一个按主键分组的查询集，但似乎不是。

这些是我的模型：

```
class MCode(models.Model):
    code = models.CharField(max_length=16)
class Product(models.Model):
    id = models.CharField(max_length=40, primary_key=True, db_index=True)
    mcode = models.ForeignKey(MCode, null=True, blank=True, db_index=True)
class Review(models.Model):
    review_id = models.CharField(max_length=32, primary_key=True, db_index=True) 
    product = models.ForeignKey(Product, db_index=True) 
    rating = models.IntegerField() 
    time = models.DateTimeField(db_index=True) 
```

这是我的代码：

```
mcode = 'M83'
base = Product.objects
tcode_obj = MCode.objects.filter(code=mcode.upper())
return base.filter(tcode=tcode_obj, 
                   review__time__range=[date_from, date_to]) 
```

我得到五个结果，但其中三个具有相同的主键。看起来我得到了 each 的结果`review`，而不是 each `product`。

有谁知道我如何`products`按 ID 对这些进行分组，并用附件的数量进行注释`reviews`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:14:57.653

当您根据可能匹配多次的内容进行选择时，例如在一段时间内`Product`使用`Review`s ，每个匹配项都会添加到查询集中，即使它是已经存在的项目的副本。实际上，有时您可能想要这种行为，但如果您需要将查询集限制为唯一项目，`.distinct()`请在查询结束时使用。在查询中使用逻辑 OR 时也很常见，因此请注意执行此操作的时间并记住在`.distinct()`此处使用。

# google-maps - Fusion Tables 是否存在安全问题

> ID：11616176
> 
> 赞同：1
> 
> 时间：2012-07-23T16:00:49.207
> 
> 标签：google-maps, security, google-fusion-tables

我正在考虑使用谷歌融合表而不是使用 mysql 数据库来填充谷歌地图。我显示的数据有些专有，不是绝密，但我担心如果我使用融合表，人们将能够抓取数据，或者直接从融合表中获取数据。我可能会误解这是如何工作的，但从我阅读的一些线程看来，确实没有办法保护您的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T16:39:40.380

像往常一样，答案是：视情况而定。

如果您想使用 Google Maps 功能“FusionTableLayer”来显示数据，您必须是 Google Maps Premier 客户才能显示私人表格中的数据。对于“普通”用户，这仅适用于公共表。

但是当您通过 API 访问数据时，您可以轻松地选择并显示您想要的数据。但只要您保持表私有，就无法获取原始数据。

最后但并非最不重要的一点是，您必须信任 Google ;-)

# iphone - 主屏幕上的 iPhone 网络应用程序总是重新加载应用程序之间的切换

> ID：11616181
> 
> 赞同：9
> 
> 时间：2012-07-23T16:00:56.980
> 
> 标签：iphone, mobile-safari, multitasking, homescreen

我正在开发一个需要您将其添加到主屏幕的移动网络应用程序（网站）。当您打开它并切换到另一个应用程序，然后返回我的网络应用程序时，整个应用程序会重新加载。它显示启动画面，甚至不记得你上次在哪里。

有没有解决的办法？我在 iOS 文档中找不到任何详细信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T13:07:44.927

看来这个[话题](https://stackoverflow.com/questions/6930771/stop-reloading-of-web-app-launched-from-iphone-home-screen)会回答你的问题。

您无法避免这种刷新行为。您应该使用 HTML5 本地存储来保存应用程序的状态，并在应用程序启动时使用它来恢复其状态。

这是[Safari 开发人员库](http://developer.apple.com/library/safari/#documentation/iPhone/Conceptual/SafariJSDatabaseGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007256-CH1-SW1)的链接，重点关注您的问题。

# javascript - Google 自定义搜索结果通过代理显示错误

> ID：11616183
> 
> 赞同：1
> 
> 时间：2012-07-23T16:01:04.153
> 
> 标签：javascript, proxy, google-custom-search

B 学院订阅了网站 A，他们通过内部代理访问该网站，该代理会更改所有页面 URL 以适应通过其代理进行的重定向。

例如，网站 A 上的关于我们页面通常如下所示：

```
website-a.com/about/us 
```

如果您通过大学 B 的代理连接查看该页面，该链接将是：

```
website-a.proxy-b.com/about/us 
```

重写是在代理上完成的，网站 A 无法控制它。

这一点也不罕见，所以我希望我正在查看的问题是一个简单的解决方案：

网站 A 使用谷歌自定义搜索引擎...搜索在代理完成其 URL 重写后运行，动态搜索结果将返回未更改的 URL...因此，如果代理用户关注一个，他们将返回到我们的网站直接，并失去他们在代理下拥有的任何访问权限。

（为简单起见，请假设我正在寻找由网站 A 实施的解决方案，并且代理 B 不受任何可以更改任何内容以使该查找发生在学院方面的人的管理）

我正在考虑在使用 javascript 从谷歌返回结果后重写 URL... 但是查看代码，我预见到会有一些严重的问题。

有没有人设法解决这个问题，或者是否有一个简单的 CSE 技巧来动态重写目标 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T14:28:46.273

找到了解决方案：

```
 function fixProxyLinks(){
        proxy_rex = new RegExp( document.location.host, "gi");
        orig_rex = new RegExp( "/www.mysite.com/", "gi");

        //Check if current server is DIFFERENT from bg.com
        if( document.location.host.search( orig_rex ) == -1 ){
            $('.gsc-results a').each( function(){
                // Find all the fresh new search results and correct them for the sake of the Proxy

                if( this.href.search( proxy_rex ) == -1 &&  this.href.search( bg_rex ) >= 0 ){
                    this.href = this.href.replace( orig_rex, '/'+document.location.host+'/' );
                    $(this).attr("data-cturl", this.href);
                    $(this).attr("data-ctorig", this.href);

                }
            });
        }
    } 
```

然后将其粘贴在构建 CSE 对象的位置： `customSearchControl.setSearchCompleteCallback(this, fixProxyLinks);`

***注意：**关于**data-cturl**和**data-ctorig**属性：*
CSE 功能的一部分是重写该 url 以通过 google 重定向以进行跟踪， *data-cturl*是将 href 重写为单击的 URL。不幸的是，您必须完全替换 google 重定向，并且只需让重定向目标指向相同的代理 url，否则 Google 会注意到并发出警告，表明您正在被重定向。用户单击后，CSE 会将 href 写回*data-ctorig*中设置的值，因此您显然也希望获得该匹配项。

# javascript - 如何在元素上分派双击事件？

> ID：11616189
> 
> 赞同：5
> 
> 时间：2012-07-23T16:01:17.057
> 
> 标签：javascript, dom-events

我可以发送一个简单的点击事件（没有任何可选参数）：

```
var clickEvt = document.createEvent("MouseEvents");
clickEvt.initEvent("click");
element.dispatchEvent(clickEvt); 
```

但是如何调度双击事件呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T16:01:17.057

只需替换`"click"`为`"dblclick"`in `clickEvt.initEvent`：

```
var dblclickEvt = document.createEvent("MouseEvents");
dblclickEvt.initEvent("dblclick");
element.dispatchEvent(dblclickEvt); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-27T19:41:47.473

已接受的答案 ( `Event.initEvent()`) 中使用的功能已被[弃用](https://developer.mozilla.org/en-US/docs/Web/API/Event/initEvent/)。

相反，使用特定的事件构造函数，如[`Event()`](https://developer.mozilla.org/en-US/docs/Web/API/Event/Event)

所以要回答你的问题，它会是这样的：

```
var doubleClickEvent = new Event('dblclick');      //define double click event

element.dispatchEvent(doubleClickEvent);           //trigger double click even 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-21T03:28:27.187

这适用于 Chrome@83

```
const event = new MouseEvent('dblclick', {
  bubbles: true,
  cancelable: true,
  view: window
});

const buttonEl = document.querySelector('#my-button');
buttonEl.dispatchEvent(event); 
```

# c - 通过 void 函数分配 3d 数组

> ID：11616197
> 
> 赞同：0
> 
> 时间：2012-07-23T16:01:48.527
> 
> 标签：c, multiple-indirection

当 i=0 和 j=2 时，我得到一个分段错误；但我不知道为什么！

你可以帮帮我吗 ？

那是我的功能：

```
void allocationdynamiquetableautroisdimdentier(int**** Matrice,int nbniveau, int nbligne, int nbcolonne)
{
int i,j;
    *Matrice=(int***) malloc (sizeof(int**)*nbniveau);
    for (i=0; i<nbniveau; i++)
    {
        (*(Matrice))[i]=(int**) malloc (sizeof(int*)*nbligne);  // allocation dynamique de la matrice Matrice
        for (j=0; j<nbligne; i++)
        {
            ((*(Matrice))[i])[j]=(int*) malloc (sizeof(int)*nbcolonne);
        } 
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T16:13:54.603

```
 for (j=0; j<nbligne; i++) 
```

应该

```
 for (j=0; j<nbligne; j++) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T16:13:28.193

你有`i++`两个*循环*语句！

# php - PHP - IE 不显示来自数据库的更新值。铬，FF，歌剧 - 好的

> ID：11616202
> 
> 赞同：1
> 
> 时间：2012-07-23T16:02:06.407
> 
> 标签：php, mysql, internet-explorer

我正在开发一个系统来处理学生的课程请求，然后教师就这些请求提交答案。有一个包含新请求的列表框，当单击列表框中的选项时，request_id (listbox.this.value) 正在通过 AJAX 查询数据库，查询结果显示在客户端 - 学生信息等。老师只需输入他的answer 在指定的字段中，并且有一个更新查询用答案更新数据库。但是当我稍后单击列表框中的同一项目时 - 显示的所有数据（学生信息），除了更新的信息（老师的答案）。再次 - 它只发生在 IE 中。所有其他浏览器都很好。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:13:25.540

如果在某些浏览器中得到结果，而在 IE 上则不是服务器端 /php/ 问题。我认为您在 IE 和 ajax /speccialy XMLHttpRequests/ 方面存在众所周知的问题，只需查看 IE 版本，google 问题，您就会得到解决方案。PS：尽可能使用 jquery ;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T16:19:29.447

我怀疑 IE 正在缓存对初始 AJAX 请求的响应。您可以尝试将时间戳作为 GET 参数附加到请求中，这将强制 IE 发出新请求。

# python - 使用 GQL 使用 GAE 在 python 中进行模板化

> ID：11616203
> 
> 赞同：0
> 
> 时间：2012-07-23T16:02:12.003
> 
> 标签：python, google-app-engine, templates, jinja2, gql

我在 GAE 中运行 python 并且遇到了一些与 GQL 查询和使用模板相关的问题。

当我加载主页时，它会触发此功能：

```
class MainPage()
    def get(self):
            product_list = Post.gql("ORDER BY product LIMIT 10")
            self.render('index.html', product_list = product_list)

    def post(self):

            email = self.request.get('email')
            product = self.request.get('product')

            if email and product:
                p = Post(parent = blog_key(), email = email, product = product)
                p.put() 
```

它应该将产品列表传递到主页，并通过主页上的表格接受新条目。

索引.html：

```
<form id="inputs" method="post">
   <input id="product" type="text" name="product" value="product?" value="{{product}}"></input>
   <input type="text" name="email" id="email" value="email?" value="{{email}}"></input>
   <button type="submit" value="submit!">Submit</button>
</form>
<div id="results">
   {% for p in product_list %}
       {{p.product}}<br>
       {{p.email}}
        <br><br>
   {% endfor %}
</div> 
```

当我加载主页时，“结果” div 中没有显示任何内容。在 GAE 管理控制台中，我可以看到应该显示一些“发布”实体。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T16:20:25.897

尝试使用以下命令显式执行查询`run()`：

```
class MainPage()
    def get(self):
            product_list = Post.gql("ORDER BY product LIMIT 10").run()
            self.render('index.html', product_list = product_list) 
```

gql 对象在用作可迭代对象时应该隐式运行，但我不知道这是否适用于 jinja。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T16:17:49.867

看看这里的文档进行查询：

您的查询部分应如下所示：

```
product_list = db.GqlQuery("SELECT * FROM Post") 
```

或者对于新开发银行：

```
product_list = ndb.gql("SELECT * FROM Post") 
```

# php - 防止访问控制库中的无限重定向

> ID：11616204
> 
> 赞同：0
> 
> 时间：2012-07-23T16:02:20.127
> 
> 标签：php, infinite-loop, access-control, rbac

[我正在开发一个名为PHP-Bouncer](http://code.google.com/p/php-bouncer/)的开源基于角色的 PHP 访问控制库。PHP-Bouncer 允许用户定义角色列表，每个角色提供访问哪些页面，并且每个角色还可以定义覆盖其他页面的页面列表（因此转到被覆盖的页面会将您重定向到覆盖页面） . 这是一个如何工作的示例（来自文档中的[访问管理示例](http://code.google.com/p/php-bouncer/source/browse/#svn/trunk/Examples/Access%20Managed%20Example)）：

```
$bouncer = new Bouncer();
// Add a role     Name,      Array of pages role provides
    $bouncer->addRole("Public", array("index.php", "about.php", "fail.php"));
// Add a role          Name,              Array of pages role provides
    $bouncer->addRole("Registered User", array("myaccount.php", "editaccount.php", "viewusers.php"));
// Add a role          Name,   Array of pages role provides       List of pages that are overridden by other pages
    $bouncer->addRole("Admin", array("stats.php", "manageusers.php"), array("viewusers.php" => "manageusers.php"));

// Here we add some users. The user class here extends the BouncerUser class, so it can still do whatever you
// would normally create a user class to do..
    $publicUser         = new User();
    $registeredUser     = new User();
    $adminUser          = new User();
    $registeredAndAdmin = new User();

    $publicUser->addRole("Public");

    $registeredUser->addRole("Public"); // We add the public group to all users since they need it to see index.php
    $registeredUser->addRole("Registered User");

    $adminUser->addRole("Public"); // We add the public group to all users since they need it to see index.php
    $adminUser->addRole("Admin");

    $registeredAndAdmin->addRole("Public"); // We add the public group to all users since they need it to see index.php
    $registeredAndAdmin->addRole("Registered User");
    $registeredAndAdmin->addRole("Admin");

    $bouncer->manageAccess($publicUser->getRoles(), substr($_SERVER["PHP_SELF"], 1), "fail.php"); 
```

这是我遇到的问题：在您在上面看到的 manageAccess 函数中，只要角色定义得当，并且所有用户都可以访问 fail.php（或者 fail.php 没有实现 $bouncer 对象），一切都会运行良好。一旦有人创建了一个具有内在冲突的角色（例如用自身覆盖页面）或未能让所有用户访问失败页面，manageAccess 函数就会导致无限循环。由于这很糟糕，我想修复它。但是，我不确定在防止无限循环的同时，允许一些重定向的最佳方法是什么（重定向最多两次或三次可能是理想的行为是可行的）。这是 manageAccess 函数：

```
/**
 * @param array  $roleList
 * @param string $url
 * @param string $failPage
 */
public function manageAccess($roleList, $url, $failPage = "index.php"){
    $granted = false;
    foreach($roleList as $role){
        if(array_key_exists($role, $this->roles)){
            $obj = $this->roles[$role];
            /** @var $obj BouncerRole */
            $response = $obj->verifyAccess($url);
            if($response->getIsOverridden()){ // If access to the page is overridden forward the user to the overriding page
                $loc            = ($obj->getOverridingPage($url) !== false) ? $obj->getOverridingPage($url) : $failPage;
                $locationString = "Location: ".$loc;
                header($locationString);
                // I broke something in the last commit, perhaps this comment will help?
            }
            if($response->getIsAccessible()){ // If this particular role contains access to the page set granted to true
                $granted = true; // We don't return yet in case another role overrides.
            }
        }
    }
    // If we are here, we know that the page has not been overridden
    // so let's check to see if access has been granted by any of our roles.
    // If not, the user doesn't have access so we'll forward them on to the failure page.
    if(!$granted){
        $locationString = "Location: ".$failPage."?url=".urlencode($url)."&roles=".urlencode(serialize($roleList));
        header($locationString);
    }
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T22:07:28.367

由于您想要的功能是允许“一些重定向”，所以我能想到的最好的方法是创建一个`$_SESSION`（或者`$_GET` *我认为*可以工作的）参数，您每次发出重定向时都会增加该参数。我应该指出，从用户的角度来看，这会很烦人，但这是您的网站。

假设我们将`$_SESSION`参数命名为`num_redirects`：

1.  在我们重定向之前，请检查是否`$_SESSION['num_redirects']`已设置。如果不是，请将其设置为`0`。
2.  获取 的当前值`$_SESSION['num_redirects']`，并查看它是否高于重定向阈值。
3.  如果超过阈值，则不重定向，只需`die();`
4.  如果它不高于阈值，则递增`$_SESSION['num_redirects']`，将其存储回来，然后重定向。

因此，该代码看起来像这样（我还改进了您的 URL 查询字符串，调用[`http_build_query()`](http://php.net/http_build_query)：

在某个地方，我们需要定义阈值：

```
define( 'MAX_NUM_REDIRECTS', 3); 
```

然后，我们可以这样做：

```
// Assuming session_start(); has already occurred
if(!$granted) {
    if( !isset( $_SESSION['num_redirects'])) {
        $_SESSION['num_redirects'] = 0;
    }

    // Check if too many redirects have occurred
    if( $_SESSION['num_redirects'] >= MAX_NUM_REDIRECTS) {
        die( "Severe Error: Misconfigured roles - Maximum number of redirects reached\n");
    }

    // If we get here, we can redirect the user, just add 1 to the redirect count
    $_SESSION['num_redirects'] += 1;

    $query_string = http_build_query( array(
        'url' => $url,
        'roles' => serialize($roleList)
    ));
    $locationString = "Location: " . $failPage . '?' . $query_string;
    header($locationString);
    exit(); // Probably also want to kill the script here
} 
```

就是这样！请注意，您必须为第一次调用添加相同的逻辑`header()`。如果您要在其他地方重复此功能，则将重定向封装在辅助函数中可能是值得的：

```
function redirect( $url, array $params = array()) {
    if( !isset( $_SESSION['num_redirects'])) {
        $_SESSION['num_redirects'] = 0;
    }

    // Check if too many redirects have occurred
    if( $_SESSION['num_redirects'] >= MAX_NUM_REDIRECTS) {
        die( "Severe Error: Maximum number of redirects reached\n");
    }

    // If we get here, we can redirect the user, just add 1 to the redirect count
    $_SESSION['num_redirects'] += 1;

    $query_string = http_build_query( $params);
    $locationString = "Location: " . $url . ( !empty( $query_string) ? ('?' . $query_string) : '');
    header($locationString);
    exit(); // Probably also want to kill the script here
} 
```

然后，您可以这样称呼它：

```
if(!$granted){
    redirect( $failPage, array(
        'url' => $url,
        'roles' => serialize($roleList)
    ));
} 
```

这样，您可以将重定向所需的所有逻辑封装在一个函数中。

# amazon-web-services - 在没有 cron 的 AWS 中运行计划任务

> ID：11616205
> 
> 赞同：74
> 
> 时间：2012-07-23T16:02:21.553
> 
> 标签：amazon-web-services, cron

目前我在亚马逊有一台服务器，我把所有的 cronjobs 都放在那里。我想消除这种单点故障，并将我的所有任务公开为 Web 服务。我想将 VPC ELB 背后的服务暴露给一些服务器，这些服务器将在调用时运行这些任务。

亚马逊 (AWS) 提供的某些服务是否可以按计划的时间间隔运行重复的作业（真正称为 Web 服务）？我真的希望能够在时间/日期规范方面保留 cron 功能，但将驱动程序的 HA（在正确时间调用端点的东西）外包给 AWS。

我喜欢 SQS 提供 Web 端点的方式，但据我所知，您无法安排它们。SWF 似乎也不适合。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2015-01-17T23:59:25.063

AWS在 2015 年 re:Invent 大会上[宣布支持 Lambda 中的预定函数。](https://aws.amazon.com/blogs/aws/aws-lambda-update-python-vpc-increased-function-duration-scheduling-and-more/)借助此功能，用户可以使用类似 cron 的语法按计划执行 Lambda 函数。[Lambda 文档展示了一个](http://docs.aws.amazon.com/lambda/latest/dg/getting-started-scheduled-events.html)使用 Python 执行计划事件的示例。

目前，调度的 lambda 可以运行的最小分辨率是 1 分钟（与 cron 相同，但不如 systemd 计时器那么精细）。

Lambder项目有助于简化 Lambda 上计划函数的使用[。](https://github.com/LeafSoftware/python-lambder)

[λ Gordon 的 cron 示例](https://github.com/jorgebastida/gordon/tree/master/examples/cron)可能是部署调度 lambda 函数的最简单接口。

* * *

*原始答案，为后代保存。*

正如 Eric Hammond 和其他人所说，没有用于计划任务的原生 AWS 服务。如其他答案中所述，只有解决方法和半解决方案。

回顾一下当前的选项：

*   如 Eric Hammond 所述，按计划启动和停止的单实例自动缩放组。
*   [使用简单的工作流服务计时器](http://docs.aws.amazon.com/amazonswf/latest/developerguide/swf-dg-timers.html)，这一点都不直观。该[案例研究](http://aws.amazon.com/swf/testimonials/swfnasa/)提到 JPL 使用 SWF 构建分布式 cron，但没有实现细节。在 SWF 代码示例中还有一个[代码示例的参考。](http://aws.amazon.com/code/3015904745387737)
*   [使用类似cronlock](https://github.com/kvz/cronlock)的东西自己运行它。
*   使用[不可靠的城镇时钟 (UTC)](https://alestic.com/2015/05/aws-lambda-recurring-schedule/)之类的东西按计划运行 Lambda 函数。请记住，Lambda 目前无法访问 VPC 中的资源

希望很快会有更好的解决方案出现。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-05-12T15:19:37.807

介绍**[AWS Cloudwatch 中的事件](https://docs.aws.amazon.com/AmazonCloudWatch/latest/DeveloperGuide/WhatIsCloudWatchEvents.html)**

您可以按分钟、每小时、天数或使用控制台使用 CRON 表达式进行计划，无需 Lambda 或任何编程。

我刚刚使用 SNS HTTP 端点安排我的 ASP.net WEB API（HTTP Post）每分钟执行一次，它运行良好。

[![在此处输入图像描述](../Images/5a7298d77d7f8a47b1116db1a87adf00.png)](https://i.stack.imgur.com/36RCx.png)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-23T18:52:34.287

> 亚马逊 (AWS) 提供的某些服务是否可以按计划的时间间隔运行重复的作业？

这是人们（包括我）在使用 AWS 设计架构时不断提到的几个单点故障之一。在亚马逊通过服务解决它之前，这是我发布的一个被一些公司积极使用的黑客。

AWS Auto Scaling 可以使用以 cron 格式指定的重复计划运行和终止实例。

[http://docs.amazonwebservices.com/AutoScaling/latest/APIReference/API_PutScheduledUpdateGroupAction.html](http://docs.amazonwebservices.com/AutoScaling/latest/APIReference/API_PutScheduledUpdateGroupAction.html)

您可以让实例在启动时自动运行进程。

如果您不知道作业将持续多长时间，您可以进行设置，以便您的作业在完成后终止实例。

这是我写的一篇文章，介绍了设置它所需的确切命令：

> 使用 Auto Scaling 按定期计划运行 EC2 实例
> [http://alestic.com/2011/11/ec2-schedule-instance](http://alestic.com/2011/11/ec2-schedule-instance)

启动一个完整的实例只是为了启动一组工作似乎有点矫枉过正，但如果它是一个 t1.micro，那么它只需要几美分。

t1.micro 也不必做实际的工作。您的实例可以将消息注入 SQS 或通过 SNS，以便其他冗余服务器接收任务。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-08-15T22:01:34.043

[这是一个托管的第三方站点，可以定期调用您域上的预定脚本。](https://www.setcronjob.com/)

如果您需要脚本在 shell 中运行，而不是作为 Apache，这将不起作用。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-08-12T14:10:56.017

听起来这可能对您有用： http: [//docs.aws.amazon.com/datapipeline/latest/DeveloperGuide/dp-using-task-runner.html](http://docs.aws.amazon.com/datapipeline/latest/DeveloperGuide/dp-using-task-runner.html)

> Task Runner 是一个任务代理应用程序，它轮询 AWS Data Pipeline 的计划任务并在 Amazon EC2 实例、Amazon EMR 集群或其他计算资源上执行它们，并在执行时报告状态。根据您的应用，您可以选择：
> 
> *   允许 AWS Data Pipeline 在其自动管理的计算资源上为您安装和管理一个或多个 Task Runner 应用程序。在这种情况下，您无需按照本节所述安装或配置 Task Runner。这是推荐的配置。
>     
>     
> *   在长时间运行的 EC2 实例或物理服务器等计算资源上手动安装和配置 Task Runner。为此，请使用本节中的过程。
>     
>     
> *   开发和安装自定义任务代理而不是 Task Runner。这样做的过程将取决于自定义任务代理的实现。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-10-09T14:14:15.903

亚马逊去年为 NodeJS 引入了 Lambda，[昨天](https://aws.amazon.com/blogs/aws/aws-lambda-update-python-vpc-increased-function-duration-scheduling-and-more/?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3A%20AmazonWebServicesBlog%20%28Amazon%20Web%20Services%20Blog%29)亚马逊添加了计划函数、VPC 支持和 Python 支持等功能。

通过利用计划功能 - 可以实现 CRON 的适当替代。

更多信息 - [http://aws.amazon.com/lambda/details/](http://aws.amazon.com/lambda/details/)

[![在此处输入图像描述](../Images/474dd024951894cbfcbeef2a0345a42f.png)](https://i.stack.imgur.com/1CYvI.png)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-08-23T09:02:28.687

截至 2020 年 8 月，Amazon 已将 Lambda/CloudWatch 事件转移到名为**EventBridge** ( [https://aws.amazon.com/eventbridge/](https://aws.amazon.com/eventbridge/) ) 的服务中。它于 2019 年 7 月在这个问题的大部分答案之后推出。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-06-25T15:57:34.130

看起来这是来自 AWS BeanStalk 的一个相对较新的选项：

[https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/using-features-managing-env-tiers.html#worker-periodictasks](https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/using-features-managing-env-tiers.html#worker-periodictasks)

基本上，它们的行为类似于常规的 SQS 接收器，但它们是按 cron 计划调用的，而不是响应 SQS 消息。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-08-14T21:49:45.320

SWF 是 AWS 的一项 Web 服务，可用于安排任务。大部分工作都用于指定任务和时间表是什么。

[http://milindparikh.blogspot.com/2015/07/introducing-diksha-aws-lambda-function.html](http://milindparikh.blogspot.com/2015/07/introducing-diksha-aws-lambda-function.html)是针对 SWF 编写的可扩展调度程序。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-03-20T10:02:54.510

CloudWatch Events 很棒，但[数量有限](https://docs.aws.amazon.com/eventbridge/latest/userguide/cloudwatch-limits-eventbridge.html)。如果您需要一个规模并愿意牺牲精度，您可以使用[DynamoDB 的 TTL](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/TTL.html)作为计时器。

这个想法是将项目放入 DynamoDB 表中，并将 TTL 设置为运行任务所需的时间。DynamoDB 将在指定时间左右（到期后 48 小时内）删除这些项目。这些已删除的项目将出现在与表关联的 DynamoDB 流中。lambda 函数可以侦听流并在删除时采取适当的操作。

阅读 theburningmonk.com 的“ [DynamoDB TTL 作为一种临时调度机制](https://theburningmonk.com/2019/03/dynamodb-ttl-as-an-ad-hoc-scheduling-mechanism)”中的更多信息。

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2013-08-14T03:53:41.440

AWS 弹性负载均衡器将 ping 您的实例以检查它们是否健康。您可以将类似 cron 的任务添加到 ELB 正在 ping 的脚本中，它将非常有规律地执行。

您需要添加一些逻辑，以便每个任务以正确的时间间隔执行正确的次数，但这可以通过跟踪执行的数据库表来完成。每次 ELB ping 您的服务器时，您的服务器都会检查数据库以查看是否有任何作业挂起，然后执行该作业。

如果脚本执行时间过长，ELB 将超时，因此重要的是不要造成您的 ELB 运行状况检查将花费数秒时间来处理 cron 任务的情况。为了克服这个问题，您可以使用 AWS Simple Notification Service。您的 ELB 健康检查脚本可以简单地将消息发布到 SNS 主题，然后该主题可以通过 HTTP 请求将消息传递到您的 Web 服务器。

换句话说：ELB ping 您的 EC2 实例...EC2 实例检查挂起的作业，如果找到，则向 SNS 发送消息...SNS 通过 HTTP 通知您的应用程序...来自 SNS 的 HTTP 调用实际处理定时任务

# sql-server-2008 - 以一个参数为输入执行存储过程

> ID：11616206
> 
> 赞同：1
> 
> 时间：2012-07-23T16:02:21.067
> 
> 标签：sql-server-2008, stored-procedures

我正在使用存储过程。我的存储过程是

```
Create PROCEDURE [dbo].[SP_HouseHoldMembers]
(
@StudentID varchar
)
AS
BEGIN
SELECT MemberID,FirstName+''+LastName,Age,Sex,Education
FROM Student SD 
WHERE SD.StudentID=@StudentID
END 
```

我像这样执行它：

```
EXEC [dbo].[SP_HouseHoldMembers] @StudentID='123' 
```

但它没有显示结果，当我使用简单的查询将其`123`作为输入来执行它时，它会给出所需的结果。

请有人告诉我哪里出错了

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T16:05:24.123

您使用此参数：

```
@StudentID varchar 
```

这是一个**1 字符的字符串**，因此传递`'123'`被截断为`'1'`

反而;

```
@StudentID int 
```

或者

```
@StudentID varchar(<insert appropriate size>) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T16:05:31.240

您已将参数定义为`varchar`- 这意味着：**1 个字符长度**的可变长度字符串！

你需要给它`varchar`一个明确的长度！

```
Create PROCEDURE [dbo].[SP_HouseHoldMembers]
(@StudentID varchar(20) )
AS
BEGIN
   SELECT MemberID,FirstName + '' + LastName, Age, Sex, Education
   FROM Student SD 
    WHERE SD.StudentID = @StudentID
END 
```

# ruby-on-rails - 在 Rails 3.2 中使用贝宝预先批准的付款

> ID：11616207
> 
> 赞同：0
> 
> 时间：2012-07-23T16:02:28.730
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paypal, paypal-adaptive-payments

我将此信息发送到贝宝以使用**预先批准的付款功能**：

```
response = gateway.preapprove_payment( 
  :return_url =>  user_orders_url(current_user),
  :cancel_url => user_orders_url(current_user),
  :requestEnvelope => {"errorLanguage" => "en_US"},
  :start_date => Time.now,
  :end_date => Time.now + (60*60*24) * 30,
  :currency_code =>"USD",
  :senderEmail =>"email address of sender",
  :max_amount => "20.00",
  :maxNumberOfPayments => "1",
  :notify_url => ipn_notification_user_orders_url(current_user),
  )
 redirect_to (gateway.redirect_url_for(response["preapprovalKey"]))
 p response 
```

我在贝宝页面收到一条消息：

```
This transaction is invalid. Please return to the recipient's website and try again. 
```

我正在使用`build_preapproval_payment`此 gem中的方法[https://github.com/jpablobr/active_paypal_adaptive_payment/blob/master/lib/active_merchant/billing/gateways/paypal_adaptive_payment.rb](https://github.com/jpablobr/active_paypal_adaptive_payment/blob/master/lib/active_merchant/billing/gateways/paypal_adaptive_payment.rb)

这是我的日志控制台中的输出：

```
#<ActiveMerchant::Billing::AdaptivePaymentResponse:0xb7c6838 @json="{\"responseEnvelope\":{\"timestamp\":\"2012-07-23T09:32:42.631-07:00\",\"ack\":\"Success\",\"correlationId\":\"0c4df4aefe651\",\"build\":\"DEV\"},\"preapprovalKey\":\"PA-8D4362235H161382C\"}", @response=#<Hashie::Rash preapproval_key="PA-8D4362235H161382C" response_envelope=#<Hashie::Rash ack="Success" build="DEV" correlation_id="0c4df4aefe651" timestamp="2012-07-23T09:32:42.631-07:00">>, @xml_request="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<PreapprovalRequest>\n  <requestEnvelope>\n    <detailLevel>ReturnAll</detailLevel>\n    <errorLanguage>en_US</errorLanguage>\n    <senderEmail>sender_email</senderEmail>\n  </requestEnvelope>\n  <endingDate>2012-08-22T18:32:40</endingDate>\n  <startingDate>2012-07-23T18:32:40</startingDate>\n  <maxTotalAmountOfAllPayments>20.00</maxTotalAmountOfAllPayments>\n  <maxNumberOfPayments>1</maxNumberOfPayments>\n  <currencyCode>USD</currencyCode>\n  <cancelUrl>http://localhost:3000/en/u/maserranocaceres/orders</cancelUrl>\n  <returnUrl>http://localhost:3000/en/u/maserranocaceres/orders</returnUrl>\n  <ipnNotificationUrl>http://localhost:3000/en/u/maserranocaceres/orders/ipn_notification</ipnNotificationUrl>\n</PreapprovalRequest>\n", @request={"PreapprovalRequest"=>{"requestEnvelope"=>{"detailLevel"=>"ReturnAll", "errorLanguage"=>"en_US", "senderEmail"=>"microf_1342709287_biz@gmail.com"}, "endingDate"=>"2012-08-22T18:32:40", "startingDate"=>"2012-07-23T18:32:40", "maxTotalAmountOfAllPayments"=>"20.00", "maxNumberOfPayments"=>"1", "currencyCode"=>"USD", "cancelUrl"=>"http://localhost:3000/en/u/maserranocaceres/orders", "returnUrl"=>"http://localhost:3000/en/u/maserranocaceres/orders", "ipnNotificationUrl"=>"http://localhost:3000/en/u/maserranocaceres/orders/ipn_notification"}}, @action="Preapproval"> 
```

**我的错误在哪里？**

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T07:56:56.193

Well, according to my investigation of the source code of that gem the proper redirect_url method for preapproved payments is **redirect_pre_approval_url_for**

[redirect_pre_approval_url_for(token)](https://github.com/jpablobr/active_paypal_adaptive_payment/blob/master/lib/active_merchant/billing/gateways/paypal_adaptive_payment_common.rb#L26)

# mysql - 索引列和顺序

> ID：11616210
> 
> 赞同：5
> 
> 时间：2012-07-23T16:02:41.977
> 
> 标签：mysql

如果我有一个类似于下面的语句的 select 语句，索引中应该包含什么顺序和哪些列？

```
SELECT MIN(BenchmarkID),
       MIN(BenchmarkDateTime),
       Currency1,
       Currency2,
       BenchmarkType
FROM Benchmark
       INNER JOIN MyCurrencyPairs ON Currency1 = Pair1
                            AND Currency2 = Pair2
WHERE BenchmarkDateTime > IN_BeginningTime
GROUP BY Currency1, Currency2, BenchmarkType; 
```

注意事项：

*   基准表将有数十亿行
*   MyCurrencyPairs 表是包含少于 10 条记录的本地表
*   IN_BeginningTime 是一个输入参数
*   列 Currency1 和 Currency2 是 VARCHAR
*   BenchmarkID 和 BenchmarkType 列是 INT
*   列 BenchmarkDateTime 是一个日期时间（希望这很明显）

我创建了一个包含 Currency1、Currency2、BenchmarkType、BenchmarkDateTime 和 BenchmarkID 的索引，但我没有达到我想要的速度。我可以创建一个更好的索引吗？

* * *

编辑#1：有人要求下面的解释结果。让我知道是否需要其他任何东西

![在此处输入图像描述](../Images/afa4ff14a10cf91c078a858559a599cc.png)

* * *

编辑#2：有人为这两个表请求了 DDL（我假设这是创建语句）：

（此基准表存在于数据库中）

```
CREATE TABLE `benchmark` (
    `SequenceNumber` INT(11) NOT NULL,
    `BenchmarkType` TINYINT(3) UNSIGNED NOT NULL,
    `BenchmarkDateTime` DATETIME NOT NULL,
    `Identifier` CHAR(6) NOT NULL,
    `Currency1` CHAR(3) NULL DEFAULT NULL,
    `Currency2` CHAR(3) NULL DEFAULT NULL,
    `AvgBMBid` DECIMAL(18,9) NOT NULL,
    `AvgBMOffer` DECIMAL(18,9) NOT NULL,
    `AvgBMMid` DECIMAL(18,9) NOT NULL,
    `MedianBMBid` DECIMAL(18,9) NOT NULL,
    `MedianBMOffer` DECIMAL(18,9) NOT NULL,
    `OpenBMBid` DECIMAL(18,9) NOT NULL,
    `ClosingBMBid` DECIMAL(18,9) NOT NULL,
    `ClosingBMOffer` DECIMAL(18,9) NOT NULL,
    `ClosingBMMid` DECIMAL(18,9) NOT NULL,
    `LowBMBid` DECIMAL(18,9) NOT NULL,
    `HighBMOffer` DECIMAL(18,9) NOT NULL,
    `BMRange` DECIMAL(18,9) NOT NULL,
    `BenchmarkId` INT(11) NOT NULL AUTO_INCREMENT,
    PRIMARY KEY (`BenchmarkId`),
    INDEX `NextBenchmarkIndex01` (`Currency1`, `Currency2`, `BenchmarkType`),
    INDEX `NextBenchmarkIndex02` (`BenchmarkDateTime`, `Currency1`, `Currency2`, `BenchmarkType`, `BenchmarkId`),
    INDEX `BenchmarkOptimization` (`BenchmarkType`, `BenchmarkDateTime`, `Currency1`, `Currency2`)
) 
```

（我正在我的例程中创建 MyCurrencyPairs 表）

```
CREATE TEMPORARY TABLE MyCurrencyPairs
    (
        Pair1 VARCHAR(50),
        Pair2 VARCHAR(50)
    ) ENGINE=memory;
  CREATE INDEX IDX_MyCurrencyPairs ON MyCurrencyPairs (Pair1, Pair2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:23:52.590

BenchMarkDateTime 应该是索引中的第一列。

规则是，如果您只使用复合索引的一部分，则使用的部分应该是前导部分。

其次，Group By 应该匹配一个索引。

如果您可以通过某种方式使您的查询使用“=”而不是“>”，那么您的性能会更好，这是一个范围检查查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:18:37.630

主要问题是 MySQL 不能直接使用索引来处理聚合。这是由于 join with`MyCurrencyPairs`以及您要求的`MIN(BenchmarkId)`同时还具有范围条件 on的事实`BenchmarkDateTime`。需要消除这两个以获得更好的执行计划。

让我们先看看所需的索引和结果查询：

```
ALTER TABLE benchmark
  ADD KEY `IDX1` (
    `Currency1`,
    `Currency2`,
    `BenchmarkType`,
    `BenchmarkDateTime`
  ),
  ADD KEY `IDX2` (
    `Currency1`,
    `Currency2`,
    `BenchmarkType`,
    `BenchmarkId`,
    `BenchmarkDateTime`
  );

SELECT
  (
    SELECT
      BenchmarkId
    FROM
      benchmark FORCE KEY (IDX2)
    WHERE
      Currency1 = ob.Currency1 AND
      Currency2 = ob.Currency2 AND
      BenchmarkType = ob.BenchmarkType
      AND BenchmarkDateTime > IN_BeginningTime
    ORDER BY
      Currency1, Currency2, BenchmarkType, BenchmarkId
    LIMIT 1
  ) AS BenchmarkId
  ob.*
FROM
  (
    SELECT
      MIN(BenchmarkDateTime),
      Currency1,
      Currency2,
      BenchmarkType
    FROM
      benchmark
    WHERE
      BenchmarkDateTime > IN_BeginningTime
    GROUP BY
      Currency1, Currency2, BenchmarkType
  ) AS ob
INNER JOIN
  MyCurrencyPairs ON Currency1 = Pair1 AND Currency2 = Pair2; 
```

第一个变化是该`GROUP BY`部分发生在它自己的子查询中。这意味着它会生成 的所有组合`Currency1, Currency2, BenchmarkType`，即使是那些没有出现在`MyCurrencyPairs`中的组合，但除非有很多组合，否则 MySQL 现在可以使用索引来执行操作这一事实应该会更快。此子查询使用 IDX1，不需要临时表或文件排序。

第二个变化是将`MIN(BenchmarkId)`部分隔离到自己的子查询中。该子查询中的排序可以使用 IDX2 处理，因此这里也不需要排序。`FORCE KEY (IDX2)`提示，即使是“固定值”列，`Currency1`并且`Currency2`出现`BenchmarkType`在`ORDER`-part 中，也是使 MySQL 优化器做正确的事情所必需的。同样，这是一个权衡。如果最终结果集很大，子查询可能会丢失，但我认为没有那么多行。

解释该查询给出了以下查询计划（为了可读性而删除了无趣的列）：

```
+----+--------------------+-----------------+-------+---------+------+---------------------------------------+
| id | select_type        | table           | type  | key_len | rows | Extra                                 |
+----+--------------------+-----------------+-------+---------+------+---------------------------------------+
|  1 | PRIMARY            | <derived3>      | ALL   | NULL    | 1809 |                                       |
|  1 | PRIMARY            | MyCurrencyPairs | ref   | 106     |    2 | Using where                           |
|  3 | DERIVED            | benchmark       | range | 17      | 1225 | Using where; Using index for group-by |
|  2 | DEPENDENT SUBQUERY | benchmark       | ref   | 9       |  520 | Using where; Using index              |
+----+--------------------+-----------------+-------+---------+------+---------------------------------------+ 
```

我们看到所有有趣的部分都被索引正确覆盖了，我们既不需要临时表也不需要文件排序。

我的测试数据的时间显示这个版本大约快 20 倍（1.07 秒对 0.05 秒），但我的基准表中只有大约 120 万行，数据分布可能很差，所以 YMMV。

# c++ - 使用单应性围绕 x/y 轴旋转

> ID：11616219
> 
> 赞同：3
> 
> 时间：2012-07-23T16:02:58.823
> 
> 标签：c++, opencv, computer-vision, transform, affinetransform

**该项目**

我正在为移动设备开发纹理跟踪项目。它专门跟踪平面，所以我一直在使用 openCV 的 cv::FindHomography() 来计算两帧之间的单应性。然而，该功能运行非常缓慢，是我管道中的主要瓶颈。我决定可以对单应性进行初始估计的算法运行得更快，因为我在帧之间的单应性变化非常小。此外，我的异常值百分比非常小，因此稳健的方法是可选的。不幸的是，据我所知，open CV 不包括进行初步估计的单应性查找器。然而，它确实包含solvePnP()，它获取场景的原始3d 世界坐标、当前2d 图像坐标、相机矩阵、失真参数，最重要的是初始估计。我正在尝试用solvePnP替换FindHomography。由于我在整个管道中仅使用 2d 坐标，并且 solvePnP 要求提供 3d 坐标，因此我试图从 2d->3d->3d_transform->2d_transform 移动。现在，如果给定一个好的初始猜测，但它有问题，该过程的运行速度比 FindHomography() 快 6 倍。

**问题**

我的转换方式有问题。我的理论是，由于不需要相机矩阵来找到单应性，因此此过程不需要它，因为我只想要最终包含在单应性中的信息。我还假设，由于我最终丢弃了所有 z 信息，因此我如何初始化 z 应该无关紧要。我的流程如下

首先，我将所有初始 2d 坐标转换为 3d，方法是给它们 1 的 az pos。我可以假设我的原始坐标平放在 xy 平面上。然后

```
cv::Mat rot_mat; //3x3 rotation matrix
cv::Mat pnp_rot; //3x1 rotation vector
cv::Mat pnp_tran; //3x1 translation vector
cv::Matx33f camera_matrix(1,0,0,
                          0,1,0,
                          0,0,1);
cv::Matx41f dist(0,0,0,0);
cv::solvePnP(original_cord, current_cord, camera_matrix, dist, pnp_rot, pnp_tran,true);

//Rodrigues converts from a rotation vector to a rotation matrix
cv::Rodrigues(pnp_rot, rot_mat);
cv::Matx33f homography(rot_mat(0,0),rot_mat(0,1),pnp_tran(0),
                       rot_mat(1,0),rot_mat(1,1),pnp_tran(1),
                       rot_mat(2,0),rot_mat(2,1),pnp_tran(2)+1); 
```

此处转换为单应性很简单。单应性的前两列来自 3x3 旋转矩阵，最后一列是平移向量。一个技巧是单应性(2,2) 对应于比例，而 pnp_tran(2) 对应于 z 轴上的移动。鉴于我将 z 坐标初始化为 1，比例为 z_translation + 1。此过程适用于 6 个自由度中的 4 个。Translation_x、translation_x、缩放和围绕 z 的旋转都有效。然而，关于 x 和 y 的旋转显示出明显的错误。我相信这是由于在 z = 1 处初始化了我的点，但我不知道如何解决它。

**问题**

我假设我可以通过使用伪造的相机矩阵和初始 z 坐标从 solvePnP 中获得良好的结果吗？如果是这样，我应该如何设置我的相机矩阵和 z 坐标以使 x 和 y 旋转工作？此外，如果有人知道我在哪里可以获得一个单应性查找算法，该算法需要初始猜测并且只能在 2d 中工作，或者有关编写我自己的技术的信息，这将非常有帮助。一旦我开始工作，我很可能会朝着这个方向前进。

**更新**

我自己构建了一个测试程序，它采用单应性，从该单应性生成一组共面点，然后通过solvePnP运行这些点以恢复指定的单应性。在这样做的过程中，我意识到我从根本上误解了单应性是如何构建的某些部分。我一直假设单应性构造如下。

```
hom(0,2) = x translation
hom(1,2) = y translation
hom(2,2) = scale, I can divide the entire matrix by this to normalize 
```

我假设的前两列是 3x3 旋转矩阵的前两列。这基本上相当于进行 3x4 变换并丢弃列 (2)。然而，我发现这不是真的。向我展示我的方式错误的测试用例试图制作一个单应性，它将点围绕 y 轴旋转一些小角度。

```
//rotate by .0175 rad about y axis
rot_mat = (1,0,.0174,
           0,1,0,
      -.0174,0,1);
//my conversion method to make this a homography gives

homography = (1,0,0,
              0,1,0,
         -.0174,0,1); 
```

上面的单应性根本不起作用。以 x > 58 的点 x,y,1 为例。结果将是 x,y,some_negative_number。当我从齐次坐标转换回笛卡尔坐标时，我的 x 和 y 值都会翻转符号。

也就是说，我现在有一个更简单的问题，我认为它可以让我解决所有问题。如何构建一个单应性，将点围绕 x 和 y 轴旋转某个角度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T16:11:12.523

单应性不是简单的平移或旋转矩阵。目的是将直线映射到直线，而不是将单个点映射到其他点。他们考虑了透视矩阵来实现这一点，并在[此处进行了解释](http://en.wikipedia.org/wiki/Homography#3D_plane_to_plane_equation)

Hence, homography matrices cannot be easily decomposed, but there are (complicated) ways to do so shown [here](http://hal.archives-ouvertes.fr/docs/00/17/47/39/PDF/RR-6303.pdf). This may help you extract rotations and translations out of it.

This should help you better understand a homography, but the rest I am unfamiliar with.

# delphi - 可以在 FastReport 中更改页面默认值吗？

> ID：11616221
> 
> 赞同：1
> 
> 时间：2012-07-23T16:03:00.090
> 
> 标签：delphi, default, fastreport

我有一个小问题。

我已经建立了一个包含 2 页的报告：

*   **第 1页**显示带有总和的一般项目。
*   **第2 页**显示每个项目的详细信息。

在表单中，我选择我想查看的页面类型。

如果我想要一般信息，我选择选项 1，然后我看到了“Page1”。

但是，如果我想查看详细信息，我会看到“Page1”和“Page2”，而不仅仅是“page2”内容。

我尝试设置`page1.visible := False`，但如果这样做，我什么也看不到，但如果我设置`page2.visible := False`并选择 option1，那么我看到了内容。

为什么我不能得到相同的结果？

在我看来，“Page1”被设置为默认页面，我不能让这个页面不可见。

所以我正在寻找改变这一点。如果可能的话，我在哪里可以改变它？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-05T13:26:32.183

您必须确定**Page2**是否有**MasterData band**。
快速报告页面在它有**MasterData**之前不会出现。
其中**Master Data 带**代表**Main engine**。
然后您的代码将运行**`page1.visible := False`**。

# maven - 设置环境变量后maven还是不运行

> ID：11616224
> 
> 赞同：4
> 
> 时间：2012-07-23T16:03:06.573
> 
> 标签：maven

这是我在用户变量中设置的运行 maven ..

**JAVA_HOME**

```
C:\Program Files\Java\jdk1.7.0_05 
```

**M2**

```
%M2_HOME%\bin 
```

**M2_HOME**

```
C:\Program Files\apache-maven-3.0.4 
```

**MAVEN_OPTS**

```
-Xms256m -Xmx512m 
```

**小路**

```
%PATH%;%JAVA_HOME%\bin;%M2_HOME%\bin; 
```

但仍然有一个`mvn --version`命令给出了我的错误。我按照他们自己网站上的步骤进行操作，但仍然出现错误。你觉得我上面贴的有什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T16:08:13.350

设置 PATH 后，您是否重新启动了命令行窗口？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-16T03:04:01.103

我通过重新启动命令行工具使它工作，为此你必须以管理员身份启动你的 CMD。右键单击 CMD 图标并选择“以管理员身份运行”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T19:17:56.483

在你的地方，我会试试这个：

打开命令提示符（开始 - 运行 - 键入“cmd”）并键入：

```
cd %M2_HOME%\bin
dir 
```

确保您看到类似“mvn.exe”或“mvn.bat”的内容

如果 "cd %M2_HOME%\bin" 不起作用，环境有问题。（例如：您使用不同的用户登录）。尝试

```
echo %M2_HOME% 
```

在命令提示符下。

PS：检查环境的更好方法是在命令提示符下输入“set”。

# javascript - 用于 Soundcloud 曲目的 jQuery fancyBox

> ID：11616226
> 
> 赞同：1
> 
> 时间：2012-07-23T16:03:15.467
> 
> 标签：javascript, jquery, jquery-plugins, fancybox, fancybox-2

我在我的 Web 应用程序中使用 jQuery fancybox [http://fancyapps.com/fancybox/](http://fancyapps.com/fancybox/)作为 soundcloud 轨道，但它不起作用。这是jsfiddle [http://jsfiddle.net/QNHN5/106/](http://jsfiddle.net/QNHN5/106/)

soundcloud 网址是`http://w.soundcloud.com/player/?url=https://api.soundcloud.com/tracks/53816732&show_artwork=true`

它显示了这个错误

```
The requested content cannot be loaded.
Please try again later. 
```

谁能告诉我我犯的错误？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T16:46:51.700

由于您正在打开外部站点，因此应该以`iframe`模式打开 fancybox。

您可以将类添加`fancybox.iframe`到选择器中，例如

```
<a class="fancybox fancybox.iframe" .... 
```

或添加`type: "iframe"`到您的 fancybox 脚本选项

```
$(".fancybox")
 .attr('rel', 'gallery')
 .fancybox({
  type: "iframe",
  beforeShow: function () {
        /* Disable right click */
        $.fancybox.wrap.bind("contextmenu", function (e) {
                return false; 
        });
   }
 });​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T16:41:28.063

取自：[使用精美的框获取“无法加载请求的内容”（尽管控制台中没有错误）](https://stackoverflow.com/questions/10966547/getting-a-the-requested-content-cannot-be-loaded-with-fancy-box-no-errors-in)

你只需要另外两件事：

1）。添加fancybox-media helper js 文件，例如（检查您自己的路径）：

```
<script type="text/javascript" src="fancybox2.0.6/helpers/jquery.fancybox-media.js"></script> 
```

2）。将 helpers 媒体选项添加到您的脚本中：

```
$(".fancybox").fancybox({
    openEffect: 'none',
    closeEffect: 'none',
    padding: 0, //<-- notice I added a comma here ;)
    helpers : {
     media : {}
    }
}); 
```

# .net - 在 web.config 中更改表单身份验证节点会有什么影响

> ID：11616231
> 
> 赞同：1
> 
> 时间：2012-07-23T16:03:35.403
> 
> 标签：.net, forms, authentication, web-config

根据以下 web.config 节点，我们有典型的 .NET 表单身份验证。

我想把它从

```
 <authentication mode="Forms">
        <forms loginUrl="login/logon.aspx" defaultUrl="Default.aspx" name=".ASPXFORMSAUTH" timeout="60000" slidingExpiration="true"/>
    </authentication> 
```

到

```
 <authentication mode="Forms">
        <forms loginUrl="login/logon.aspx" defaultUrl="Default.aspx" name=".CUSTOMNAME" timeout="60000" slidingExpiration="true"/>
    </authentication> 
```

可能的影响是什么？无论如何，IIS 都会被重置。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:21:51.860

名称指定用于身份验证的 HTTP cookie。默认情况下，name 的值为 .ASPXAUTH。如果多个应用程序在单个服务器上运行并且每个应用程序都需要唯一的 cookie，则必须在每个应用程序的 Web.config 文件中配置 cookie 名称。 [MSDN](http://msdn.microsoft.com/en-us/library/1d3t3c61%28v=vs.71%29.aspx)

可能的影响：已经通过身份验证的用户将需要再次登录。

# android - 手机和平板之间的活动分离（io2012 应用程序）

> ID：11616234
> 
> 赞同：1
> 
> 时间：2012-07-23T16:03:46.003
> 
> 标签：android

我在 IO2012 应用程序的源代码中看到，人们`Activity`在他们的`ui`包中为`tablets`和`phones`. 我们也需要遵循这种良好做法吗？其实没觉得有用，有什么用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:57:09.577

当 Android 团队表示此应用程序是 Android 的当前最佳实践示例时，他们非常具体。所以，是的，只要适合您的需要，您就应该按照他们的做法去做。

# ios - UIImageView.layer 的变换影响 UIScrollView zoomScale

> ID：11616241
> 
> 赞同：2
> 
> 时间：2012-07-23T16:04:13.680
> 
> 标签：ios, uiscrollview, uiimageview, transform, calayer

我有一个位于 UIScrollView 中的 UIImageView。我使用以下代码将图像加载到 UIImageView 的 CALayer 中：

```
UIImage *image = [UIImage imageNamed: fileToDisplay];    
NSLog(@"If I don't flip image imageScrollView.zoomScale: %f", imageScrollView.zoomScale);
[[imageView layer] setContents: (id)image.CGImage];
if (flipped)
{
    [[imageView layer] setTransform: CATransform3DMakeRotation(180.0 / 180.0 * M_PI, 0.0, 1.0, 0.0)];
    NSLog(@"If image flipped imageScrollView.zoomScale: %f", imageScrollView.zoomScale);
} 
```

我正在围绕 y 轴“翻转”图像。意外事件是 imageView.layer 的转换正在更改 imageScrollView.zoomScale，如以下输出所示：

如果我不翻转图像 imageScrollView.zoomScale: 0.465455

如果图像翻转 imageScrollView.zoomScale: 1.000000

我的问题是如何让这不会发生？如果没有办法阻止这种行为，我必须做些什么来实现在我不翻转的图像上执行的图像框架。换句话说，仅将 zoomScale 设置为转换之前的值是行不通的。UIScrollView 中的其他内容发生了变化（不是 contentSize 或 contentOffset）。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-05T19:20:27.763

因为您使用的是一种`CATransform3DMake...`方法，所以您正在创建一个新的转换并替换当前的转换。您需要改为使用`CATransform3DRotate`，将旋转添加到当前变换（用于缩放）。

```
imageView.layer.transform = CATransform3DRotate(imageView.layer.transform , 180.0 / 180.0 * M_PI, 0.0, 1.0, 0.0); 
```

# c++ - 你如何生成一个随机的 12 位数字？

> ID：11616242
> 
> 赞同：1
> 
> 时间：2012-07-23T16:04:17.403
> 
> 标签：c++, random

我正在用 C++ 编写一个 Bittorrent 客户端，需要生成一个 20 字节的 Peer ID。前 8 个字符由`-WW1000-`代表客户端名称和版本号的字符组成。其他 12 位需要是随机数，需要在客户端每次启动时随机生成。

如何生成 12 位随机数并将其与`std::string`包含前 8 个字符 ( `-WW1000-`) 的 a 连接起来？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T16:06:58.493

```
const string CurrentClientID = "-WW1000-";  
ostringstream os;
for (int i = 0; i < 12; ++i)
{
    int digit = rand() % 10;
    os << digit;
}
string result = CurrentClientID + os.str(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T16:14:31.560

一种方法是使用`rand()`N 次创建一个大字符串，其中 N 是您想要的数字的长度（[一种避免模偏差的天真的方法](https://stackoverflow.com/questions/4270382/how-to-use-rand-function-to)）：

```
size_t length = 20;
std::ostringstream o;

o << "-WW1000-";
for (size_t ii = 8; ii < length; ++ii)
{
    o << rand(); // each time you'll get at least 1 digit
}

std::string id = o.str().substr(0, length); 
```

如果你有一个足够新的 C++ 编译器/库：

```
// #include <random>
std::random_device r;
std::mt19937 gen(r());
std::uniform_int_distribution<long long> idgen(0LL, 999999999999LL);

std::ostringstream o;
o << "-WW1000-";
o.fill('0');    
o.width(12);
o << idgen(gen);

std::string id = o.str(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T16:27:23.653

我不知道您的 id 必须有多“安全”，但因为您说：

`that need to be generated randomly every time the client starts`,

您可能只使用该信息（1970-01-01 之后的 10 位数字）并添加另外两个随机数字（00..99）：

```
using namespace std;
...
...
ostringstream id;
id << "-WW1000-" << setw(10) << setfill('0') << time(0) << setw(2) << rand()%100;
... 
```

在我的系统上，这将在此刻打印：

```
cout << id.str() << endl;

    -WW1000-134306070741 
```

如果您的要求更强，您当然应该使用基于完全随机的变体。

# android - Flurry Analytics 可以在 Android 上按城市报告用户的位置吗？

> ID：11616247
> 
> 赞同：4
> 
> 时间：2012-07-23T16:04:25.723
> 
> 标签：android, geolocation, gps, location, flurry

**问题：Flurry Analytics 可以在 Android 上按城市（或更详细的区域）报告用户的位置吗？**

我想知道是否有人在通过 Android 的 Flurry Analytics 服务报告位置数据方面有任何成功经验。

我正在编写一个医疗保健应用程序，它将使用位置来提供对本地指南的访问，因此我的用户会觉得有理由透露他们的位置。

我已经仔细遵循了这里的 API 说明：http: [//support.flurry.com/index.php ?title=Analytics/GettingStarted/Android](http://support.flurry.com/index.php?title=Analytics/GettingStarted/Android)

并尝试了精细和粗略的位置权限：

```
android:name="android.permission.ACCESS_FINE_LOCATION"
android:name="android.permission.ACCESS_COARSE_LOCATION" 
```

尽管如此，Flurry 的 GeoLocation 部分仅显示使用的国家/地区位置：

```
United Kingdom          127          100.0% 
Vatican City            0            0.0% 
Ukraine                 0            0.0% 
Switzerland             0            0.0% 
...
etc 
```

在添加上述权限之前，“详细位置”部分不可用。添加上述任一权限后，“详细位置”部分变为可用；但**所有**城市字段都显示“0; 0.0%”：

```
York                    0            0.0% 
Wolverhampton           0            0.0% 
West Bromwich           0            0.0% 
Walsall                 0            0.0% 
...
etc 
```

我已经在模拟器、三星 Galaxy S 和 HTC Wildfire 手机上进行了测试，我很想知道其他人是否成功地报告了城市数据，或者这是否是 Flurry Analytics API 的限制？

最好的祝愿

史蒂文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:48:53.373

可以通过在 AndroidManifest.xml 中配置以下任一权限来将用户的位置报告到城市级别： android.permission.ACCESS_COARSE_LOCATION 或 android.permission.ACCESS_FINE_LOCATION 如果您无法设置它，我建议您发送邮寄至 Flurry 支持 (support@flurry.com) 并附上您的实施细节。（免责声明：我在 Flurry 的支持团队工作）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:16:11.147

是的，因为这已经出现了几次，所以我再次查看它并找到了（a？）解决方案！

只要您使用真实设备，在设置中启用 sim 卡或 wifi 位置，就可以记录用户位置。

我错误地认为没有 sim 卡的设备（在我的情况下是三星 Galaxy S）可以访问良好的位置 - 毕竟所有 GPS 接收器都是这样做的，但似乎并非如此。

插入 sim 卡或启用 wifi 位置就可以了。

# playframework - 使用 Play!2 将信息从一个页面传输到另一个页面

> ID：11616248
> 
> 赞同：0
> 
> 时间：2012-07-23T16:04:27.400
> 
> 标签：playframework, playframework-2.0

我正在尝试为网站创建注册页面。注册过程分为两个阶段：

1.  用户在页面上的表单上输入他们的姓名、电子邮件、密码。他们点击下一步，然后

2.  用户在新页面上输入附加信息（可能上传照片等）并单击提交。

然后使用所有这些信息（来自第 1 页和第 2 页）来创建新用户。如何将信息从一页存储到另一页？

一种可行的方法可能是在第二页的表单中创建额外的字段，并用第一页的信息填充它们，但这似乎有点笨拙。有推荐的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T18:32:35.730

您不需要`Form.class`为与用户的每次交互都使用它，它是一个很好的帮手，但是......只是帮手。

将您的注册过程分成几个动作，每个动作只负责编辑模型的一部分

1.  您的第一个默认视图应该是最大的，并且应该使用`Form.class`和`Constraints`注释来验证数据。当然，您需要设置其他操作，例如`new/create`或`edit/update`等。发送该表单后，该帐户将保存在数据库中，因此您可以在其他操作中对其进行更改，通过唯一 ID 识别它。
2.  您的下一个视图（假设这是唯一的`change password`表单）可以使用其他`Form.class` **但**如果它很容易并且具有特殊的验证规则（如密码奇怪等），您可以使用 ie。`editPassword/updatePassword`一组操作并手动更新您的用户对象：

    ```
    public static Result updatePassword(Integer user_id){
        User user = User.find.byId(user_id);
        DynamicForm formData = form().bindFromRequest();

        if (!customValidatorMethod(formData.password)){
             return badRequest("Password was not changed");
        }

        user.password = formData.password;
        user.update(user_id);
        return ok("Password changed);
    } 
    ```

接下来，您可以根据需要创建任意数量的步骤。

注意：不要在会话数据中保存用户名和密码，因为一些*聪明人*可以用它来对付他的老板......而不是使用`id`第一步创建的用户，另外你可以添加简单的字段，如`registrationStep` 或`registrationId`（随机哈希）来识别所有必需的注册步骤之间的新用户。您将在完成注册过程后删除该会话数据，同时您可以通过简单检查步骤号来检查用户是否完成注册。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T17:39:57.010

我这样做的方法是创建 User 对象，并在提交第一个表单后立即将其存储在数据库中，因为这样如果太麻烦，用户可以稍后再回来。

如果您不介意失去无国籍状态，您也可以使用 session() 临时存储它。

```
session("username", USERS_CHOSEN_NAME);
session("password", USERS_CHOSEN_PASSWORD); 
```

# iis - VBScript 从命令行工作，但不能作为 ASP 脚本工作

> ID：11616251
> 
> 赞同：0
> 
> 时间：2012-07-23T16:04:41.607
> 
> 标签：iis, dll, asp-classic, vbscript, activex

我有以下代码从命令行作为 VBScript 工作：

```
Set FRELoader = Server.CreateObject( "FREngineWrap.FRELoader" )
Set Engine = FRELoader.Load 
```

当我把它放入 ASP 页面时：

```
<%@ Language=VBScript %>
<%
Set FRELoader = Server.CreateObject( "FREngineWrap.FRELoader" )
Set Engine = FRELoader.Load
%> 
```

它不起作用：

错误类型：（0x80004005）未指定的错误/test.asp，第 4 行

我这里有 IIS 5.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T16:25:29.633

问题肯定在 FREngineWrap.FRELoader 中，而不是在您的 ASP 代码中。请记住，当从 VBScript 运行时，程序会在您的用户上下文中运行 - 例如，作为用户“MYDOMAIN\alex347”。

当您从 ASP 运行程序时，它会在您使用的任何 IIS 安全上下文中运行。这通常会导致问题，特别是如果 IIS 用户无权访问您有权访问的文件，例如 MYDOMAIN\alex347。

如果您有 FRELoader 的源代码，您可能会检查并查看它在哪里引发错误。否则，您可能必须尝试更改 IIS 安全设置。

编辑：这是如何修改 IIS 以使其使用不同用户的凭据的链接。尝试将 IIS 的凭据更改为您的用户名，看看它是否有效。 [http://technet.microsoft.com/en-us/library/cc730708(v=ws.10](http://technet.microsoft.com/en-us/library/cc730708(v=ws.10) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T16:07:41.003

那是数据库连接错误。检查您的连接字符串。

# mysql - mysql内部连接和联合

> ID：11616253
> 
> 赞同：0
> 
> 时间：2012-07-23T16:04:59.130
> 
> 标签：mysql, database, crystal-reports

我之前问过如何通过 MYSQL 加入多个表，但现在我遇到了一个新问题。

假设我有这几张桌子。

报销表

```
-Name---Check Number-----Date------Reimbursement--
-John-----1--------------7/23/12-------$100-------
-Joe------2--------------7/23/12-------$102-------
-Jane-----3--------------7/23/12-------$103-------
-Jill-----4--------------7/23/12-------$104------- 
```

原始索赔

```
-Name---Check Number-----Date---------Amount--
-John-----1--------------7/23/12-------$100---
-Joe------2--------------7/23/12-------$102---
-Jane-----3--------------7/23/12-------$103---
-Jill-----4--------------7/23/12-------$100--- 
```

调整后的索赔

```
-Name---Check Number-----Date---------Amount--
-Jill-----4--------------7/23/12-------$4----- 
```

通过水晶报告的最终结果应该是

```
-Name---Check #---Claim Type----Date Paid----Amount----Reimbursement--
-John-----1-------Original--------7/23/12-----$100-------$100---------
-Joe------2-------Original--------7/23/12-----$102-------$102---------
-Jane-----3-------Original--------7/23/12-----$103-------$103---------
-Jill-----4-------Original-------7/23/12------$100-------$104---------
-Jill-----4-------Adjusted-------7/23/12------$4---------------------- 
```

不是

```
-Name---Check #---Claim Type----Date Paid----Amount----Reimbursement--
-John-----1-------Original--------7/23/12-----$100-------$100---------
-Joe------2-------Original--------7/23/12-----$102-------$102---------
-Jane-----3-------Original--------7/23/12-----$103-------$103---------
-Jill-----4-------Original-------7/23/12------$100-------$104---------
-Jill-----4-------Adjusted-------7/23/12------$4---------$104--------- 
```

我当前的脚本是：

```
Select  mt.`Check Number` as `Check Number`,
        mt.`Payment Date` as `Payment Date`,
        mt.`Payment Type` as `Payment Type`,
        c1.`Facility Name` as `Facility Name`,
        'Adjustment June 2012' as `Claim Type`,
        c1.`Amount` as Amount,
        mt.Reimbursement as Reimbursement 
  From  Reimbursement mt 
               Inner Join ClaimAdjust_6_2012 c1 
                  on c1.`Check Number`  = mt.`Check Number` and 
                     mt.`Payment Date` = c1.`Payment Date` 
  Where mt.`Payment Date`>='2012-7-1' And 
        mt.`Payment Date`<'2012-8-1' 

Union 

Select  mt.`Check Number` as `Check Number`,
        mt.`Payment Date` as `Payment Date`,
        mt.`Payment Type` as `Payment Type`,
        c1.`Facility Name` as `Facility Name`,
        'Original June 2012' as `Claim Type`,
        c1.`Amount` as Amount,
        mt.Reimbursement as Reimbursement 
 From   Reimbursement mt 
              Inner Join Claim_6_2012 c1 
                    on c1.`Check Number`  = mt.`Check Number` and 
                        mt.`Payment Date` = c1.`Payment Date` 
Where   mt.`Payment Date`>='2012-7-1' And 
        mt.`Payment Date`<'2012-8-1' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T22:24:04.780

这个查询有效吗？你为什么不只 JOIN`Reimbursement Table`和`Original Claim`UNION 它`Adjusted Claim`

```
SELECT      a.Name, a.CheckNumber, a.`Date`,
            b.Amount, a.Reimbursement
FROM        Reimbursement a INNER JOIN
                OrginalClaim b ON
                    a.Name = b.Name AND
                    a.CheckNmber = b.CheckNumber AND
                    a.`Date` = b.`Date`
UNION
SELECT      Name, CheckNumber, `Date`, Amount, NULL as Reimbursement
FROM        AdjustedClaim 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T22:12:47.457

我认为答案很简单。只需忽略第一个子查询中的报销：

```
Select mt.`Check Number` as `Check Number`,mt.`Payment Date` as `Payment Date`,mt.`Payment Type` as `Payment Type`,c1.`Facility Name` as `Facility Name`,'Adjustment June 2012' as `Claim Type`,c1.`Amount` as Amount, NULL as Reimbursement
From Reimbursement mt  Inner Join
     ClaimAdjust_6_2012 c1
    on c1.`Check Number` = mt.`Check Number` and mt.`Payment Date` = c1.`Payment Date`
Where mt.`Payment Date`>='2012-7-1' And mt.`Payment Date`<'2012-8-1' 
Union all
Select mt.`Check Number` as `Check Number`,mt.`Payment Date` as `Payment Date`,mt.`Payment Type` as `Payment Type`,c1.`Facility Name` as `Facility Name`,'Original June 2012' as `Claim Type`,c1.`Amount` as Amount,mt.Reimbursement as Reimbursement
From Reimbursement mt Inner Join
     Claim_6_2012 c1
     on c1.`Check Number` = mt.`Check Number` and mt.`Payment Date` = c1.`Payment Date`
Where mt.`Payment Date`>='2012-7-1' And mt.`Payment Date`<'2012-8-1' 
```

这将连接到表中，因此您仍然可以使用付款日期，但将值设置为 NULL。

# jquery - jQuery UI 选项卡 -- 多个动态创建的选项卡，选项卡内容全部显示在一个选项卡中

> ID：11616255
> 
> 赞同：2
> 
> 时间：2012-07-23T16:05:12.283
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

我正在开发网络应用程序，该应用程序应该检索和显示已在服务器端处理的文件的信息。我正在尝试在每个处理的文件的选项卡中显示从服务器返回的数据。

我正在做的是我创建了一个 div 作为我的标签的容器，我的标签链接有一个空的 ul：

```
<div id="fileInfo"><ul id="infoTabs"></ul></div> 
```

当我收到我的数据时，我首先附加一个新的

*   对于每个文件，我的 ul：

    ```
    <li> 
    ```

    文件 1 的信息

我在我的 fileInfo div 中为每个文件添加了一个新的 div：

```
<div id="file1">
Info for file1
<br>
<ul>
<li>
Blah blah
<br>
blah blah blah
</li>
</ul>
</div> 
```

填充完所有内容后，我调用 tabs 函数：

```
$("#fileInfo").tabs(); 
```

如果我有多个文件，我将有一个带有每个文件的选项卡标题的选项卡表单，但是带有文件信息的 div 中的所有内容都在第一个选项卡中。如果我单击其他选项卡的选项卡标题，文档将跳转到第一个选项卡的部分，其中显示应该在其自己的选项卡中的 div。我查看了 Firebug 中的 HTML 选项卡，在我看来，文档中的所有内容都已正确填充，以便选项卡正确显示：

```
 <div id="fileInfo" class="ui-tabs ui-widget ui-widget-content ui-corner-all">
<ul id="infoTabs" class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active">
<a href="#file1">Info for file1</a>
</li>
<li>
<a href="#file2">Info for file2</a>
</li>
</ul>
<div id="file1">
Info for file1
<br>
<ul>
<li>
file1, blah blah
<br>
yackity smackity
</li>
</ul>
</div>
<div id="file2">
Info for file2
<br>
<ul>
<li>
file2, blah blah
<br>
yackity smackity
</li>
</ul>
</div>
</div> 
```

我现在有点卡住了。任何有关我可能遗漏的信息将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T21:37:57.487

我通过改变方法解决了这个问题。我使用虚拟选项卡创建了选项卡 div 并将其删除，然后隐藏了选项卡 div：

```
$("#fileInfo").tabs();
        $("#fileInfo").tabs('remove', 0);
        $("#fileInfo").hide(); 
```

之后，我会调用 tabs add 方法，并将我的文件信息 div 添加到新创建的选项卡中：

```
tabs('add', '#'+ fileName, tabTitle);
 $('#'+ fileName).html(cont); 
```

# python - 如何获取日期在特定月份的所有对象SQLAlchemy

> ID：11616260
> 
> 赞同：8
> 
> 时间：2012-07-23T16:05:33.837
> 
> 标签：python, sqlalchemy

我有一个简单的 SQLAlchemy 模型：

```
class Event(Base):
    """ The SQLAlchemy declarative model class for a Event object. """
    __tablename__ = 'events'
    id = Column(Integer, primary_key=True)
    date = Column(DateTime)
    title = Column(Text) 
```

如何过滤 SQLAlchemy 查询，以便仅返回特定月份的事件？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-07-26T20:15:57.557

一个非常古老但更好的答案在这里：

```
from sqlalchemy import extract  

session.query(Event).filter(extract('month', Event.date)==7).all() 
```

这会将所有记录返回到数据库中的七月事件。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-23T19:19:24.750

这应该会找到 2012 年 6 月的所有事件。

```
import datetime
import calendar

year = 2012
month = 6

num_days = calendar.monthrange(year, month)[1]
start_date = datetime.date(year, month, 1)
end_date = datetime.date(year, month, num_days)

results = session.query(Event).filter(
    and_(Event.date >= start_date, Event.date <= end_date)).all() 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-04-07T11:31:20.203

我想知道的事情和 Brady Huang 想的一样。因此，扩展@scottydelta 的出色答案：您可以将过滤器堆叠在一起。因此，如果您想提取 2018 年 7 月以来的每个事件，您应该使用

```
from sqlalchemy import extract  

session.query(Event).filter(extract('year', Event.date)==2018).filter(extract('month', Event.date)==7).all() 
```

# jquery - 查找具有特定名称的，然后单击该 div 中的另一个

> ID：11616262
> 
> 赞同：-2
> 
> 时间：2012-07-23T16:05:40.627
> 
> 标签：jquery

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T16:11:59.060

# c# - 在 .net 可执行文件中本地托管 PHP 的任何方式

> ID：11616269
> 
> 赞同：0
> 
> 时间：2012-07-23T16:06:31.583
> 
> 标签：c#, php, .net, database, executable

我想基本上将一个带有数据库的 php 网站变成一个 .net 可执行文件。我希望一切都是内部的。这是可能的还是我必须将整个项目重写为 C#？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T16:09:04.770

您必须（应该）用 C# 重写项目。

当然，从技术上讲，将您需要的所有内容集成到一个可执行的 .NET 文件中是可行的，但此解决方案将使用大量不受支持的内容、临时文件或 PInvoke 调用，而您不希望在托管环境中拥有这些内容。

# ruby-on-rails - 评论属于用户，属于帖子。我还能使用 build 方法吗？

> ID：11616276
> 
> 赞同：0
> 
> 时间：2012-07-23T16:07:31.253
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

所以说我有一个相当典型的博客。

```
A post belongs to a user.
A user has many posts.

A post has many comments.
A comment belongs to a post.
A comment belongs to a user. 
```

我知道，当我创建帖子时，我可以执行以下操作：

```
@post = @user.posts.build(subject: "Lorem ipsum", content: "Lorem ipsum") } 
```

但我不确定我会如何处理评论，因为它与帖子和用户都相关。为简单起见，假设评论只有三个字段，内容、user_id 和 post_id。我还能以某种方式使用构建方法吗？任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:09:15.037

```
@post.comments.build(...) do |c| 
  c.user = current_user 
end 
```

我通常更喜欢将 user_id 保留为受保护的属性。

# html - Dreamweaver 中搜索和替换的正则表达式

> ID：11616279
> 
> 赞同：0
> 
> 时间：2012-07-23T16:07:47.650
> 
> 标签：html, regex, dreamweaver

我想写一个正则表达式在 Dreamweaver 中做一些替换。`<abbr>`我需要html 中标签的正则表达式。

例如，在我的页面中将出现以下文本：

```
Photo: NASA 
```

我希望它变成：

```
Photo: <abbr title="National Aeronautics and Space Administration">NASA</abbr> 
```

请注意，我的 HTML 中“NASA”这个词的一些实例已经被`<abbr>`标签包围了。如果是这种情况，请不要`<abbr>`在其周围放置其他标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T20:26:22.947

搜索：`NASA`

用。。。来代替：

```
<abbr title="National Aeronautics and Space Administration">NASA</abbr> 
```

然后搜索：

```
<abbr title="National Aeronautics and Space Administration"><abbr title="National Aeronautics and Space Administration">NASA</abbr></abbr> 
```

用。。。来代替：

```
<abbr title="National Aeronautics and Space Administration">NASA</abbr> 
```

多田！=)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:22:27.910

我省略了后视。我不确定 Dreamweaver 支持哪种类型的正则表达式。

尝试使用以下正则表达式：

```
NASA(?!( *</abbr>)|(\.\w+)|(")) 
```

它不会匹配 NASA 的任何实例：

*   其次是`</abbr>`不管 NASA 和`</abbr>`
*   后跟 a`.`和其他字符，例如 nasa.gov 被视为无效。
*   后跟一个`/`，例如 test.gov/nasa/ 被认为是无效的。
*   后面跟着一个`"`它是无效的。
*   当正则表达式出现在这样的引用中时，它将与 NASA 匹配：

    ```
    "This NASA is surrounded by quotes" 
    ```

*   但当它是引号中唯一的东西时不会：

    ```
    "NASA" 
    ```

*   . . . 你可以在这里看到趋势，在必要时添加额外的“或”语句。

我使用以下字符串对其进行了测试：

> 这句话以 NASA 结尾。此正则表达式适用于 NASA，但不适用于 nasa.gov/test/nasa/page.html 等 URL。它不适用于 <abbr>NASA</abbr>，因为它被 <abbr> 标签包围。“这个 NASA 被引号包围”，但将被匹配，因为它的格式不像这个“NASA”。

然后您可以简单地使用该正则表达式进行查找，并替换为：

```
<abbr title="National Aeronautics and Space Administration">NASA</abbr> 
```

* * *

注意：引号是我无法绕过的限制，或者我不知道如何轻松绕过。我建议，如果您必须对使用某种类型的脚本语言（例如 Python）的大量文档执行此操作，并避免使用一个大的正则表达式并将其分解为逻辑语句，但这完全是另一个问题。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T19:24:14.560

如果支持lookbehinds，这相当简单。

搜索：

```
(?<!>)NASA 
```

代替：

```
<abbr title="National Aeronautics and Space Administration">NASA</abbr> 
```

这会查找`NASA`不以 . 为前缀的条目`>`。所以，`NASA`会匹配，`>NASA`不会。

# javascript - 递归解析 JSON 对象以构造 HTML 元素

> ID：11616286
> 
> 赞同：0
> 
> 时间：2012-07-23T16:08:18.113
> 
> 标签：javascript, jquery, json, recursion

我正在尝试从 JSON 对象构建一组 HTML 元素。我已经成功地从 HTML 元素构造了对象，但是递归重建对我来说一直失败。有人有好的解决方案吗？

我的 JSON：

```
{
    "0": {
        "id": "text-1",
        "tag": "div",
        "style": {
            "left": "92px",
            "top": "37px",
            "z-index": "3",
            "height": "19px",
            "width": "98px",
            "font-weight": "bold",
            "font-style": "italic",
            "font-size": "16px",
            "color": "rgb(255, 255, 255)"
        },
        "data": {},
        "children": {
            "0": {
                "tag": "span",
                "style": {},
                "data": {},
                "html": "This is a test.",
                "text": "This is a test."
            }
        }
    },
    "1": {
        "id": "image-1",
        "tag": "div",
        "style": {
            "width": "100px",
            "height": "133px",
            "left": "91px",
            "top": "8px",
            "z-index": "1"
        },
        "data": {},
        "children": {
            "0": {
                "tag": "img",
                "style": {},
                "data": {},
                "html": "",
                "text": "",
                "src": "http://img2.etsystatic.com/000/0/6490841/il_570xN.351801334.jpg"
            }
        }
    },
    "2": {
        "id": "video-1",
        "tag": "div",
        "style": {
            "width": "100px",
            "height": "50px",
            "left": "5px",
            "top": "85px",
            "z-index": "2"
        },
        "data": {},
        "children": {
            "0": {
                "tag": "a",
                "style": {
                    "background-image": "url(http://placehold.it/100x50&text=Video)",
                    "height": "100%",
                    "width": "100%",
                    "display": "block",
                    "background-position": "0% 0%",
                    "background-repeat": "no-repeat no-repeat"
                },
                "data": {},
                "html": "",
                "text": ""
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:46:52.933

我玩了一点，想出了这个：http: [//jsfiddle.net/tfBRN/10/](http://jsfiddle.net/tfBRN/10/)

考虑到我不知道属性是什么以及`data`属性如何相互关联，因此可以改进此代码。`html``text`

**-编辑-**

我假设元素和子元素是在数组中给出的，而不是作为编号属性。我使用 jQuery 创建元素、添加属性和插入 DOM，当然这可以使用原生 DOM 方法来执行。

```
var domArray = [
    {
        "id": "text-1",
        "tag": "div",
        "style": {
            "left": "92px",
            "top": "37px",
            "z-index": "3",
            "height": "19px",
            "width": "98px",
            "font-weight": "bold",
            "font-style": "italic",
            "font-size": "16px",
            "color": "rgb(100, 100, 100)"
        },
        "data": {},
        "children": [
            {
                "tag": "span",
                "style": {},
                "data": {},
                "html": "This is a test.",
                "text": "This is a test."
            }
        ]
    },
    {
        "id": "image-1",
        "tag": "div",
        "style": {
            "width": "100px",
            "height": "133px",
            "left": "91px",
            "top": "8px",
            "z-index": "1"
        },
        "data": {},
        "children": [
            {
                "tag": "img",
                "style": {},
                "data": {},
                "html": "",
                "text": "",
                "src": "http://img2.etsystatic.com/000/0/6490841/il_570xN.351801334.jpg"
            }
        ]
    },
    {
        "id": "video-1",
        "tag": "div",
        "style": {
            "width": "100px",
            "height": "50px",
            "left": "5px",
            "top": "85px",
            "z-index": "2"
        },
        "data": {},
        "children": [
            {
                "tag": "a",
                "style": {
                    "background-image": "url(http://placehold.it/100x50&text=Video)",
                    "height": "100%",
                    "width": "100%",
                    "display": "block",
                    "background-position": "0% 0%",
                    "background-repeat": "no-repeat no-repeat"
                },
                "data": {},
                "html": "",
                "text": ""
            }
        ]
    }
];

$(document).ready(function(){
    for(var i=0;i<domArray.length;i++) {
        createDOMStructure(domArray[i]);
    }
});

function createDOMStructure(obj, parent) {
    if(parent == undefined) {
        parent = $("body"); // or any other element that would be the parent container of all structure
    }

    var element = $("<" + obj.tag + ">");
    delete obj.tag;

    if(obj.children) {
        for(var i=0;i<obj.children.length;i++) {
            createDOMStructure(obj.children[i], element);
        }
        delete obj.children;
    }

    element.css(obj.style);
    delete obj.style;

    element.text(obj.text);
    delete obj.text;

    for(var prop in obj) {
        element.attr(prop, obj[prop]);
    }

    $(element).appendTo(parent);
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-27T17:29:05.020

看看我在 GitHub 上的解决方案：

[https://github.com/mlromramse/JsonDecorator](https://github.com/mlromramse/JsonDecorator)

该节点应用程序使用 HandleBars 来执行递归。它是为一个不同的问题而设计的，但也应该适用于这个问题。

# android - Android 从后台线程更新当前活动

> ID：11616288
> 
> 赞同：1
> 
> 时间：2012-07-23T16:08:21.993
> 
> 标签：android

我的应用程序在主要活动上有一个刷新按钮。当用户按下该按钮时，将创建一个新线程，该线程开始更新 SQLite 数据库。当这个线程开始时，用户可能会进入应用程序的另一个活动。

问题是当后台线程完成时，应该根据数据库更新这些其他活动（ListActivity）。我怎么能提供。我尝试使用 ActivityManager 获取当前任务，但它需要我不想要的额外权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:22:17.327

编辑：

抱歉，好像误会你了。请看下面的代码，它与Chinaski 的类似（您只是为回调方法使用了一个接口），但我添加了更多内容以确保您知道如何以一种避免内存泄漏的方式使用它。

请注意活动在 onDestroy 期间是如何分离的——或者您可以使用 Wea​​kReference，但是这些天您将使用 Fragment`setRetainInstance(true)`并完全避免分离/附加，因为 Fragment 将被保留。

**我的异步任务**

```
public class MyAsyncTask extends AsyncTask<Void, Void, Void> {

    private Callback mCallback;

    private boolean mIsComplete = false;

    private boolean mHasCallbackBeenCalled = false;

    public MyBackgroundTask(Callback callback) {
        mCallback = callback;
    }

    /** Only safe to call this from the UI thread */
    public void attach(Callback callback) {
        mCallback = callback;

        if (mIsComplete && !mHasCallbackBeenCalled) {
            fireCallback();
        }
    }

    /** Only safe to call this from the UI thread */
    public void detach() {
        mCallback = callback;
    }

    @Override
    public void doInBackground() {
        // do the heavy stuff here
        return null;
    }

    @Override
    public void onPostExecute(Void result) {
        mIsComplete = true;
        fireCallback();
    }

    private void fireCallback() {
        if (mCallback != null) {
            mCallback.callbackMethod();
            mHasCallbackBeenCalled = true;
        }
    }

    public static interface Callback {

        public void callbackMethod();

    }
} 
```

**我的活动**

```
public class MyActivity extends Activity implements MyAsyncTask.Callback {

    private MyAsyncTask mTask;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Check for a retained task after a configuration change
        // e.g. a rotation
        if (getLastNonConfigurationInstance() != null) {
            mTask = (MyAsyncTask) getLastNonConfigurationInstance();
            // Re-attach the task
            mTask.attach(this);
        }
    }

    @Override
    public void onDestroy() {
        // Detach from task to avoid memory leak
        if (mTask != null) {
            mTask.detach();
        }

        super.onDestroy();
    }

    @Override
    public Object onRetainNonConfigurationInstance() {
        // Retain the async task duration a rotation
        return mTask;
    }

    /** Callback method */
    @Override
    public void callbackMethod() {
        // Do something here
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T16:15:03.040

您可以制作一个单例，其中您将拥有您的线程和一个“任务”队列。当一个任务完成时，你检查/启动下一个任务，当你添加一个任务时，你启动它，或者如果一个任务已经在运行，则将它添加到队列中。

我不是说这是最好的解决方案，但它是一个。

# triggers - 不能在触发器中使用 text、ntext 或 image

> ID：11616289
> 
> 赞同：0
> 
> 时间：2012-07-23T16:08:23.250
> 
> 标签：triggers, sql-server-2008-r2

使用 SQL Server 2008 R2，我收到错误：

> 消息 311，级别 16，状态 1，过程 ad_user，第 28 行
> 不能在“已插入”和“已删除”表中使用 text、ntext 或 image 列。

触发器的目的是在插入新用户时更新用户组表。我只包含了错误发生位置的 SQL。）。让我感到困惑的是，如果我删除其中一个整数声明，我不会得到同样的错误（只是关于没有声明变量的错误）。

```
CREATE trigger [dbo].[ad_user] on [dbo].[tps_user] 
FOR INSERT
AS

DECLARE @UserGuid uniqueidentifier
DECLARE @EndUserTypeGuid uniqueidentifier
DECLARE @UserTypeGuid uniqueidentifier
DECLARE @saGuid uniqueidentifier
DECLARE @GroupGuid uniqueidentifier
DECLARE @NewUser VarChar(250)
DECLARE @deptnum VarChar(250)
DECLARE @locnum VarChar(250)
DECLARE @CN VarChar(250)
DECLARE @NewOU VarChar(250)
DECLARE @pos1 integer
DECLARE @pos2 integer

BEGIN
SELECT @EndUserTypeGuid=tps_guid FROM tps_user_type WHERE tps_name='EndUser'
SELECT @saGuid = tps_guid FROM tps_user WHERE tps_title = 'SA'

SELECT  @UserGuid=tps_guid, 
        @UserTypeGuid=tps_user_type_guid,
        @NewUser=tps_title,
        @deptnum=usr_departmentnumber,
        @locnum=usr_locationnumber,
        @CN=usr_ou
FROM inserted   

    IF @UserTypeGuid=@EndUserTypeGuid
BEGIN       
  SELECT @GroupGuid=tps_guid FROM tps_group WHERE usr_departmentnumber=@deptnum     
    IF @GroupGuid IS NOT NULL
    BEGIN
      IF @UserGuid NOT IN (SELECT tps_user_id 
             FROM tps_user_group WHERE tps_group_id = @GroupGuid) 
      BEGIN
    -- Remove the user from other groups
    DELETE FROM tps_user_group WHERE tps_user_id = @UserGuid;                       
    -- Create Customer Group Membership from department
        INSERT INTO tps_user_group(tps_user_id, tps_group_id, tps_creation_user_guid, 
              tps_last_update_user_guid, tps_creation_date, tps_last_update)
    VALUES(@UserGuid, @GroupGuid, @saGuid, @saGuid, GetDate(), GetDate());
          END
        END
    END
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:27:58.277

我已经对此进行了测试，当您在/伪表中*显式引用*此类列时，此错误消息将在编译时出现，而不是在运行时出现。不幸的是，我认为您必须更正基础表中的这些列才能使用它们，因为您不能只对.`inserted``deleted``inserted`

[是什么阻止了客户端升级这些列以使用自 SQL Server 2005 以来由于](http://msdn.microsoft.com/en-us/library/ms143729%28v=sql.90%29.aspx)许多充分理由（包括这个）而未被弃用的适当的一流数据类型？

无论如何，您都需要重新编写触发器。它目前不是多行安全的。一旦您纠正了数据类型，触发器就不会中断，它只会从中选择任意行`inserted`并忽略其余行。所以它需要被`inserted`视为一个集合，而不是单行，因为 SQL Server 中的触发器是按语句触发的，而不是按行触发的。

# ajax - wicket 6.0.0-beta2 使用 AjaxButton 提交表单时更新 DataTable 的内容

> ID：11616290
> 
> 赞同：12
> 
> 时间：2012-07-23T16:08:26.223
> 
> 标签：ajax, wicket-1.6, wicket-6

我想根据表单的内容更改 DataTable 的内容（将其视为搜索栏功能）。我曾经在 wicket 1.5.x 中这样做，但我似乎无法让它在 wicket 6.0.0-beta2 中工作。AjaxButton 的 onSubmit 方法中似乎没有进入。其他一切正常，每个组件都正确呈现，并且在页面加载时 dataTable 填充了正确的数据，但是当我单击按钮时，什么也没有发生。

任何帮助将不胜感激。这是我的代码的样子：

数据表：

```
public SubscriberPage(PageParameters parameters) { 
super(parameters); 
add(new SearchForm("searchForm")); 

List<IColumn<Subscriber, String>> columns = new ArrayList<IColumn<Subscriber, String>>(); 
columns.add(new PropertyColumn<Subscriber, String>(new Model<String>("Telephone Number"), 
                                                   "tn", 
                                                   "tn")); 
[...] 
columns.add(new PropertyColumn<Subscriber, String>(new Model<String>("Initialized MB"), 
                                                   "initializedMB")); 

table = new AjaxFallbackDefaultDataTable<Subscriber, String>("table", 
                                                             columns, 
                                                             subscriberDataProvider, 
                                                             40); 
table.setOutputMarkupId(true); 
add(table); 
} 
```

这是带有 AjaxButton 的表单：

```
private class SearchForm extends Form<String> { 
private static final long serialVersionUID = 1L; 

private String tnModel; 
private Label tnLabel = new Label("tnLabel", "Telephone Number :"); 
private TextField<String> tn; 

public SearchForm(String id) { 
  super(id); 
  tn = new TextField<String>("tnTextField", new PropertyModel<String>(this, "tnModel")); 
  tn.setOutputMarkupId(true); 
  add(tnLabel); 
  add(tn); 

  AjaxButton lSearchButton = new AjaxButton("searchButton") { 
    private static final long serialVersionUID = 1L; 

    @Override 
    protected void onSubmit(AjaxRequestTarget target, Form<?> form) { 
      SubscriberFilter filter = new SubscriberFilter(); 
      target.add(table); 
      if (!(tn.getValue() == null) && !tn.getValue().isEmpty()) { 
        filter.setTn(tn.getValue()); 
      } 
      // giving the new filter to the dataProvider 
      subscriberDataProvider.setFilterState(filter); 
    } 

    @Override 
    protected void onError(AjaxRequestTarget target, Form<?> form) { 
      // TODO Implement onError(..) 
      throw new UnsupportedOperationException("Not yet implemented."); 
    } 

  }; 
  lSearchButton.setOutputMarkupId(true); 
  this.setDefaultButton(lSearchButton); 
  add(lSearchButton); 
} 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-19T09:23:28.017

您要刷新的组件需要添加到容器中。提交时需要将容器添加到target。这样您的组件将被刷新。就像是：

```
WebMarkupContainer outputContainer = new WebMarkupContainer("searchResult");
outputContainer.setOutputMarkupId(true);
outputContainer.add(table);
add(outputContainer);

@Override
protected void onSubmit(AjaxRequestTarget target, Form<?> form) {
    //change table ..... stuff ..... ...

    //refresh container
    target.add(outputContainer);
}

<div wicket:id="searchResult"></div> 
```

# python - 关于 Python 正则表达式和 findall() 的说明

> ID：11616291
> 
> 赞同：0
> 
> 时间：2012-07-23T16:08:33.547
> 
> 标签：python, regex, findall

我在处理[Python Challenge](http://www.pythonchallenge.com)时遇到了这个问题。准确地说是10号。我决定尝试使用正则表达式来解决它 - 提取重复序列，计算它们的长度，然后构建序列中的下一个项目。

所以我开发的正则表达式是：`'(\d)\1*'`

它在在线[regex tester](http://regexpal.com/)上运行良好，但是在我的脚本中使用它时，它的表现并不相同：

```
regex = re.compile('(\d)\1*')
text = '111122223333'
re.findall(regex, text)

> ['1', '1', '1', '1', '2', '2', '2',...] 
```

等等等等。所以我在 Python 的 re 模块中了解了原始类型。这是我的第一个问题：有人可以解释一下这到底是做什么的吗？该文档将其描述为减少了转义反斜杠的需要，但它似乎不是更简单的正则表达式所必需的`\d+`，我不明白为什么。

所以我将我的正则表达式更改为`r'(\d)\1*'`，现在尝试使用`findall()`来制作序列列表。我得到

```
> ['1', '2', '3'] 
```

又很迷茫。我还是不明白这一点。请帮忙？

我决定这样做来解决这个问题：

```
[m.group() for m in regex.finditer(text)]
> ['1111', '2222', '3333'] 
```

并得到我一直在寻找的东西。然后，基于[这个](https://stackoverflow.com/questions/8110059/python-regex-search-and-findall])线程，我尝试`findall()`在整个 regex -> 中添加一个组`r'((\d)\2*)'`。我最终得到：

```
> [('1111', '1'), ('2222', '2'), ('3333', '3')] 
```

在这一点上，我很困惑。我知道这个结果与多个组有关，但我不确定。

另外，这是我第一次发帖，如果我的礼仪不正确，我深表歉意。请随时纠正我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:21:53.697

由于这是一个挑战，我不会给你一个完整的答案。但是，您走在正确的轨道上。

该`finditer`方法返回[`MatchObject`实例](http://docs.python.org/library/re.html#re.MatchObject)。您想查看这些[`.group()`方法](http://docs.python.org/library/re.html#re.MatchObject.group)并仔细阅读文档。想想两者之间有什么`.group(0)`区别`.group(1)`；平原`.group()`是一样的`.group(0)`。

至于`\d`转义字符；因为该特定的转义组合作为 Python 字符串转义字符没有任何意义，Python 会忽略它并将其保留为反斜杠和字母`d`。使用文字字符串格式确实会更好`r''`，因为当您*确实*想要使用正则表达式字符集时，它可以防止令人讨厌的意外，而该字符集恰好也是 python 可以识别的转义序列。有关详细信息，请参阅[有关字符串文字的 python 文档](http://docs.python.org/reference/lexical_analysis.html#string-literals)。

您的`.findall()`with`r'((\d)\2*)'`表达式每次匹配返回 2 个元素，因为您的模式中有 2 个组；外、整组匹配`(\d)\2*`和内组匹配`\d`。从[`.findall()`文档](http://docs.python.org/library/re.html#re.findall)中：

> 如果模式中存在一个或多个组，则返回组列表；如果模式有多个组，这将是一个元组列表。

# perl - 从 perl 访问 SSRS SOAP API

> ID：11616292
> 
> 赞同：2
> 
> 时间：2012-07-23T16:08:41.753
> 
> 标签：perl, soap, reporting-services

我想知道是否可以从 Perl 访问 SSRS SOAP API。我编写了一些使用 SSRS 的 C# 应用程序，但我的大部分代码库都是在 Unix 上运行的 Perl 中。我根本不熟悉 SOAP。

我想知道它是否可能，如果是，我想知道如何编写以下示例 int perl：

[http://msdn.microsoft.com/en-us/library/reportservice2010.reportingservice2010.listchildren.aspx](http://msdn.microsoft.com/en-us/library/reportservice2010.reportingservice2010.listchildren.aspx)

谢谢

编辑：

我只是在寻找如何连接和执行功能的示例。本质上，我正在研究如何在 Perl 中编写以下（简化的）C# 代码？

```
ReportingService2010 rs = new ReportingService2010();
rs.Url = "<server adress here>";
rs.Credentials = System.Net.CredentialCache.DefaultCredentials;
CatalogItem[] items = rs.ListChildren("/", true);
foreach (CatalogItem i in items){
    Console.WriteLine(i.Name);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T11:09:36.650

我知道两种方法

1.  SOAP::Lite [https://github.com/mishin/presentation/blob/master/4_trans/02_SOAP_Lite.pl](https://github.com/mishin/presentation/blob/master/4_trans/02_SOAP_Lite.pl)

2.  XMLRPC::Lite [https://github.com/mishin/presentation/blob/master/4_trans/03_2_XMLRPC_Lite.pl](https://github.com/mishin/presentation/blob/master/4_trans/03_2_XMLRPC_Lite.pl)

# android - Android中的翻转板

> ID：11616299
> 
> 赞同：0
> 
> 时间：2012-07-23T16:08:55.207
> 
> 标签：android, flipboard

我想在 android 上使用剪贴板效果。我看过一些关于它的源代码。但是所有这些都只是简单地翻转一些静态图片（位图）。我想翻转一个视图，并且视图动态变化。我怎样才能翻转这种观点？我试图拍摄视图的快照，然后使用快照翻转。但似乎我只能在视图呈现在屏幕上之后才能对其进行快照。如何在屏幕上不显示视图的情况下获取视图的位图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:26:08.803

一种方法是将视图层次结构绘制到位图上，然后将其用于动画。 [这篇博文](http://www.brighthub.com/mobile/google-android/articles/30676.aspx)包含一些简单的说明。基本上可以归结为：

```
Bitmap returnedBitmap = Bitmap.createBitmap(screenWidth, screenHeight,Bitmap.Config.ARGB_8888);
Canvas canvas = new Canvas(auxBitmap);
myview.draw(canvas); 
```

myview 是您希望绘制的视图层次结构（在代码中创建或膨胀的布局），returnBitmap 是您的位图，上面有视图。

# linq - 实体框架、代码优先和全文搜索

> ID：11616304
> 
> 赞同：54
> 
> 时间：2012-07-23T16:09:10.190
> 
> 标签：linq, entity-framework, full-text-search, ef-code-first

我意识到已经提出了很多与全文搜索和实体框架相关的问题，但我希望这个问题有点不同。

我正在使用实体框架，代码优先，需要进行全文搜索。当我需要执行全文搜索时，我通常还会有其他条件/限制 - 例如跳过前 500 行，或过滤另一列等。

我看到这已使用表值函数处理 - 请参阅[http://sqlblogcasts.com/blogs/simons/archive/2008/12/18/LINQ-to-SQL---Enabling-Fulltext-searching.aspx](http://sqlblogcasts.com/blogs/simons/archive/2008/12/18/LINQ-to-SQL---Enabling-Fulltext-searching.aspx)。这似乎是正确的想法。

不幸的是，直到 Entity Framework 5.0 才支持表值函数（即使那样，我相信 Code First 也不支持它们）。

我真正的问题是对于 Entity Framework 4.3 和 Entity Framework 5.0 处理此问题的最佳方法的建议是什么。但具体来说：

1.  除了动态 SQL（`System.Data.Entity.DbSet.SqlQuery`例如通过 ）之外，是否有任何选项可用于 Entity Framework 4.3？

2.  如果我升级到 Entity Framework 5.0，有没有办法可以先使用带有代码的表值函数？

谢谢，埃里克

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-10-28T20:54:14.123

使用 EF6 中引入的拦截器，您可以在 linq 中标记全文搜索，然后在 dbcommand 中替换它，如[http://www.entityframework.info/Home/FullTextSearch](http://www.entityframework.info/Home/FullTextSearch)中所述：

```
public class FtsInterceptor : IDbCommandInterceptor
{
    private const string FullTextPrefix = "-FTSPREFIX-";

    public static string Fts(string search)
    {
        return string.Format("({0}{1})", FullTextPrefix, search);
    }

    public void NonQueryExecuting(DbCommand command, DbCommandInterceptionContext<int> interceptionContext)
    {
    }

    public void NonQueryExecuted(DbCommand command, DbCommandInterceptionContext<int> interceptionContext)
    {
    }

    public void ReaderExecuting(DbCommand command, DbCommandInterceptionContext<DbDataReader> interceptionContext)
    {
        RewriteFullTextQuery(command);
    }

    public void ReaderExecuted(DbCommand command, DbCommandInterceptionContext<DbDataReader> interceptionContext)
    {
    }

    public void ScalarExecuting(DbCommand command, DbCommandInterceptionContext<object> interceptionContext)
    {
        RewriteFullTextQuery(command);
    }

    public void ScalarExecuted(DbCommand command, DbCommandInterceptionContext<object> interceptionContext)
    {
    }

    public static void RewriteFullTextQuery(DbCommand cmd)
    {
        string text = cmd.CommandText;
        for (int i = 0; i < cmd.Parameters.Count; i++)
        {
            DbParameter parameter = cmd.Parameters[i];
            if (parameter.DbType.In(DbType.String, DbType.AnsiString, DbType.StringFixedLength, DbType.AnsiStringFixedLength))
            {
                if (parameter.Value == DBNull.Value)
                    continue;
                var value = (string)parameter.Value;
                if (value.IndexOf(FullTextPrefix) >= 0)
                {
                    parameter.Size = 4096;
                    parameter.DbType = DbType.AnsiStringFixedLength;
                    value = value.Replace(FullTextPrefix, ""); // remove prefix we added n linq query
                    value = value.Substring(1, value.Length - 2);
                    // remove %% escaping by linq translator from string.Contains to sql LIKE
                    parameter.Value = value;
                    cmd.CommandText = Regex.Replace(text,
                        string.Format(
                            @"\[(\w*)\].\[(\w*)\]\s*LIKE\s*@{0}\s?(?:ESCAPE N?'~')",
                            parameter.ParameterName),
                        string.Format(@"contains([$1].[$2], @{0})",
                                    parameter.ParameterName));
                    if (text == cmd.CommandText)
                        throw new Exception("FTS was not replaced on: " + text);
                    text = cmd.CommandText;
                }
            }
        }
    }

}
static class LanguageExtensions
{
    public static bool In<T>(this T source, params T[] list)
    {
        return (list as IList<T>).Contains(source);
    }
} 
```

例如，如果您有带有 FTS 索引字段 NoteText 的类 Note：

```
public class Note
{
    public int NoteId { get; set; }
    public string NoteText { get; set; }
} 
```

和它的EF地图

```
public class NoteMap : EntityTypeConfiguration<Note>
{
    public NoteMap()
    {
        // Primary Key
        HasKey(t => t.NoteId);
    }
} 
```

及其背景：

```
public class MyContext : DbContext
{
    static MyContext()
    {
        DbInterception.Add(new FtsInterceptor());
    }

    public MyContext(string nameOrConnectionString) : base(nameOrConnectionString)
    {
    }

    public DbSet<Note> Notes { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Configurations.Add(new NoteMap());
    }
} 
```

您可以对 FTS 查询使用非常简单的语法：

```
class Program
{
    static void Main(string[] args)
    {
        var s = FtsInterceptor.Fts("john");

        using (var db = new MyContext("CONNSTRING"))
        {
            var q = db.Notes.Where(n => n.NoteText.Contains(s));
            var result = q.Take(10).ToList();
        }
    }
} 
```

这将生成类似 SQL

```
exec sp_executesql N'SELECT TOP (10) 
[Extent1].[NoteId] AS [NoteId], 
[Extent1].[NoteText] AS [NoteText]
FROM [NS].[NOTES] AS [Extent1]
WHERE contains([Extent1].[NoteText], @p__linq__0)',N'@p__linq__0 char(4096)',@p__linq__0='(john) 
```

请注意，您应该使用局部变量，并且不能在表达式中移动 FTS 包装器，例如

```
var q = db.Notes.Where(n => n.NoteText.Contains(FtsInterceptor.Fts("john"))); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-08-14T17:24:47.463

我发现实现这一点的最简单方法是在 SQL Server 中设置和配置全文搜索，然后使用存储过程。将您的参数传递给 SQL，让数据库完成它的工作并返回一个复杂的对象或将结果映射到一个实体。您不一定必须拥有动态 SQL，但它可能是最佳的。例如，如果您需要分页，您可以在每个请求中传入**PageNumber**和**PageSize**，而无需动态 SQL。但是，如果每个查询的参数数量波动，这将是最佳解决方案。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-18T13:01:13.723

正如其他人提到的，我会说开始使用 Lucene.NET

Lucene 的学习曲线相当高，但我找到了一个名为“ [SimpleLucene](http://blogs.planetcloud.co.uk/mygreatdiscovery/post/SimpleLucene-e28093-Lucenenet-made-easy.aspx) ”的包装器，可以在[CodePlex上找到](http://simplelucene.codeplex.com/documentation)

让我引用博客中的几个代码块，向您展示它的易用性。我刚开始使用它，但很快就掌握了它。

首先，从您的存储库中获取一些实体，或者在您的情况下，使用实体框架

```
public class Repository
{
    public IList<Product> Products {
        get {
            return new List<Product> {
                new Product { Id = 1, Name = "Football" },
                new Product { Id = 2, Name = "Coffee Cup"},
                new Product { Id = 3, Name = "Nike Trainers"},
                new Product { Id = 4, Name = "Apple iPod Nano"},
                new Product { Id = 5, Name = "Asus eeePC"},
            };
        }
    }
} 
```

您要做的下一件事是创建索引定义

```
public class ProductIndexDefinition : IIndexDefinition<Product> {
    public Document Convert(Product p) {
        var document = new Document();
        document.Add(new Field("id", p.Id.ToString(), Field.Store.YES, Field.Index.NOT_ANALYZED));
        document.Add(new Field("name", p.Name, Field.Store.YES, Field.Index.ANALYZED));
        return document;
    }

    public Term GetIndex(Product p) {
        return new Term("id", p.Id.ToString());
    }
} 
```

并为其创建搜索索引。

```
var writer = new DirectoryIndexWriter(
    new DirectoryInfo(@"c:\index"), true);

var service = new IndexService();
service.IndexEntities(writer, Repository().Products, ProductIndexDefinition()); 
```

所以，你现在有了一个可搜索的索引。唯一剩下要做的就是..，搜索！你可以做一些非常了不起的事情，但它可以像这样简单：（更多示例请参阅博客或 codeplex 上的文档）

```
var searcher = new DirectoryIndexSearcher(
                new DirectoryInfo(@"c:\index"), true);

var query = new TermQuery(new Term("name", "Football"));

var searchService = new SearchService();

Func<Document, ProductSearchResult> converter = (doc) => {
    return new ProductSearchResult {
        Id = int.Parse(doc.GetValues("id")[0]),
        Name = doc.GetValues("name")[0]
    };
};

IList<Product> results = searchService.SearchIndex(searcher, query, converter); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-12-15T15:10:28.847

此处的示例[http://www.entityframework.info/Home/FullTextSearch](http://www.entityframework.info/Home/FullTextSearch)不是完整的解决方案。您需要了解全文搜索的工作原理。想象一下，您有一个搜索字段，用户输入 2 个单词来进行搜索。上面的代码会抛出异常。您需要先对搜索短语进行预处理，然后使用逻辑 AND 或 OR 将其传递给查询。

例如，您的搜索词组是“blah blah2”，那么您需要将其转换为：

```
var searchTerm = @"\"blah\" AND/OR \"blah2\" "; 
```

完整的解决方案是：

```
 value = Regex.Replace(value, @"\s+", " "); //replace multiplespaces
                    value = Regex.Replace(value, @"[^a-zA-Z0-9 -]", "").Trim();//remove non-alphanumeric characters and trim spaces

                    if (value.Any(Char.IsWhiteSpace))
                    {
                        value = PreProcessSearchKey(value);
                    }

 public static string PreProcessSearchKey(string searchKey)
    {
        var splitedKeyWords = searchKey.Split(null); //split from whitespaces

        // string[] addDoubleQuotes = new string[splitedKeyWords.Length];

        for (int j = 0; j < splitedKeyWords.Length; j++)
        {
            splitedKeyWords[j] = $"\"{splitedKeyWords[j]}\"";
        }

        return string.Join(" AND ", splitedKeyWords);
    } 
```

此方法使用 AND 逻辑运算符。您可以将其作为参数传递，并将该方法用于 AND 或 OR 运算符。

您必须转义非字母数字字符，否则当用户输入字母数字字符并且您没有适当的服务器站点模型级别验证时，它将引发异常。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-22T11:09:19.193

我最近有一个类似的要求，最后写了一个专门用于 Microsoft 全文索引访问的 IQueryable 扩展，它可以在这里[IQueryableFreeTextExtensions](http://www.balsamicsolutions.com/Blog/Post/2/Full-text-search-in-Microsoft%27s-Entity-Framework)

# css - 来自外部域的 CSS @font-face 绝对 URL：字体未在 Firefox 中加载

> ID：11616306
> 
> 赞同：26
> 
> 时间：2012-07-23T16:09:15.893
> 
> 标签：css, font-face

[http://fwy.pagodabox.com](http://fwy.pagodabox.com)

[http://friends-with-you.myshopify.com/](http://friends-with-you.myshopify.com/)

我将我的字体和 css 托管在 pagodabox.com 服务器上，并且正在开发 shopify 上的商店部分。我想为 shopify 网站使用来自 pagodabox 托管网站的相同样式表。但是我的字体没有在 Firefox 13.0.1 版中加载

FF 或我的语法有问题吗？谢谢！！！

```
@font-face {
  font-family:'IcoMoon';
  src:url('http://fwy.pagodabox.com/magic/themes/fwy/assets/fonts/IcoMoon.eot');
  src:url('http://fwy.pagodabox.com/magic/themes/fwy/assets/fonts/IcoMoon.eot?#iefix') format('embedded-opentype'), url('http://fwy.pagodabox.com/magic/themes/fwy/assets/fonts/IcoMoon.svg#IcoMoon') format('svg'), url('http://fwy.pagodabox.com/magic/themes/fwy/assets/fonts/IcoMoon.woff') format('woff'), url('http://fwy.pagodabox.com/magic/themes/fwy/assets/fonts/IcoMoon.ttf') format('truetype');
  font-weight:normal;
  font-style:normal;
}

@font-face {
  font-family:'square';
  src:url('http://fwy.pagodabox.com/magic/themes/fwy/assets/fonts/SquareSerif-Light-webfont.eot');
  src:url('http://fwy.pagodabox.com/magic/themes/fwy/assets/fonts/SquareSerif-Light-webfont.eot?#iefix') format('embedded-opentype'), url('http://fwy.pagodabox.com/magic/themes/fwy/assets/fonts/SquareSerif-Light-webfont.woff') format('woff'), url('http://fwy.pagodabox.com/magic/themes/fwy/assets/fonts/SquareSerif-Light-webfont.ttf') format('truetype'), url('http://fwy.pagodabox.com/magic/themes/fwy/assets/fonts/SquareSerif-Light-webfont.svg#SquareSerifLightRegular') format('svg');
  font-weight:normal;
  font-style:normal;
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-23T16:17:24.073

您不能在 Firefox 中将 @font-face 与托管在不同域上的字体一起使用 如果您想使用绝对 URL 或托管在不同域上的字体为 @font-face 指定字体，则需要提供使用访问控制标头，特别是将 Access-Control-Allow-Origin 标头设置为“*”或允许请求字体的域。这也适用于托管在不同子域上的字体。如果您使用的是 Apache，您可以尝试将其放入您的 .htaccess 并重新启动服务器

```
AddType application/vnd.ms-fontobject .eot
AddType font/ttf .ttf
AddType font/otf .otf
<FilesMatch "\.(ttf|otf|eot)$">
<IfModule mod_headers.c>
Header set Access-Control-Allow-Origin "*"
</IfModule>
</FilesMatch> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-23T16:16:29.783

这是一个已知的限制，实际上是一种防止滥用其他服务器的安全措施。

如果您对托管字体的服务器具有服务器级控制权，则可以调整 Apache 以允许此类连接。更多信息：[http ://www.cssbakery.com/2010/07/fixing-firefox-font-face-cross-domain_25.html](http://www.cssbakery.com/2010/07/fixing-firefox-font-face-cross-domain_25.html)

但是要知道，如果您这样做，这将允许所有其他站点在其站点上使用这些字体并使用您的带宽。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-06-12T10:34:15.937

如果您有权访问远程服务器，则可以添加一个本地脚本来设置正确的标题，例如`header('Access-Control-Allow-Origin: *');`然后转储字体文件。例如，在 PHP 中，像这样：

（文件**fnt.php**在字体的同一文件夹中）

```
<?php

    define('FONT_FOLDER','');

    $MIMES=array(
        '.eot'=>'application/vnd.ms-fontobject',
        '.ttf'=>'font/ttf',
        '.otf'=>'font/otf',
        '.woff'=>'font/x-woff',
        '.svg'=>'image/svg+xml',
    );

    $IKnowMime=MimeByExtension(GetExt($s));
    $f=preg_replace('/[^a-zA-Z.0-9-_]/','',$_REQUEST['f']);

/* 
    header("Cache-Control: private, max-age=10800, pre-check=10800");
    header("Pragma: private");
    header("Expires: " . date(DATE_RFC822,strtotime(" 2 day")));
*/    
    header('Content-type: '.$IKnowMime );
    header("Content-Transfer-Encoding: binary");
    header('Content-Length: '.filesize(FONT_FOLDER.$f));
    header('Content-Disposition: attachment; filename="'.$f.'";');

    header('Access-Control-Allow-Origin: *');

    readfile(FONT_FOLDER.$f);

    function GetExt($File) {
        $File=explode('.',$File);
        if(count($File)==1) return '';
        return '.'.$File[count($File)-1];
    }

    function MimeByExtension($ex) {
        global $MIMES;
        $ex=strtolower($ex);
        if(isset($MIMES[$ex])) return $MIMES[$ex];
        else return FALSE;
    }

?> 
```

然后你可以使用这样的字体：

```
<style type="text/css">
@font-face {
    font-family: 'default-font';
    src: url('http://www.website.com/fonts/ultra/fnt.php?f=arial.eot');
    src: url('http://www.website.com/fonts/ultra/fnt.php?f=arial.eot#iefix') format('embedded-opentype'),
         url('http://www.website.com/fonts/ultra/fnt.php?f=arial.woff') format('woff'),
         url('http://www.website.com/fonts/ultra/fnt.php?f=arial.ttf') format('truetype'),
         url('http://www.website.com/fonts/ultra/fnt.php?f=arial.svg#arial') format('svg');
}
</style> 
```

指定 php 文件而不是字体文件，并将字体文件作为参数传递`?f=fontfile.woff`。如果要保持 FONT_FOLDER 参数指向正确的文件夹。preg_replace if 出于安全考虑，防止在字体文件夹之外进行访问。

您还可以支持某种形式的身份验证，以确保只有您使用这些字体。

您也可以考虑使用“*”以外的一些 Access-Control-Allow-Origin 来准确指定谁可以访问您的字体文件。

```
Access-Control-Allow-Origin: http://www.fromthisserverican.com 
```

将允许从服务器 www.fromthisserverican.com 进行访问，这意味着 www.fromthisserverican.com 上的所有页面都可以使用这些字体，而其他服务器上的页面可能不会。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-03T06:27:12.957

您可以通过在 .htaccess 文件中添加以下行来允许从子域加载资源

从子域加载资源：

```
# Allow font, js and css to be loaded from subdomain
SetEnvIf Origin "http(s)?://(.+\.)?(example\.com)$" ORIGIN_DOMAIN=$0
<IfModule mod_headers.c>
    <FilesMatch "\.(eot|font.css|otf|ttc|ttf|woff|js|png|jpg|jpeg|gif)$">
        Header set Access-Control-Allow-Origin %{ORIGIN_DOMAIN}e env=ORIGIN_DOMAIN
    </FilesMatch>
</IfModule> 
```

从所有其他域加载资源：

```
# Allow font, js, and css to be loaded from subdomain
<IfModule mod_headers.c>
    <FilesMatch "\.(eot|font.css|otf|ttc|ttf|woff|js|png|jpg|jpeg|gif)$">
        Header set Access-Control-Allow-Origin "*"
    </FilesMatch>
</IfModule> 
```

来源：[http ://www.webspeaks.in/2015/01/wordpress-allow-cross-domain-resources.html](http://www.webspeaks.in/2015/01/wordpress-allow-cross-domain-resources.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-12T06:45:52.940

```
AddType application/vnd.ms-fontobject .eot
AddType font/ttf .ttf
AddType font/otf .otf
<FilesMatch "\.(ttf|otf|eot)$">
<IfModule mod_headers.c>
Header set Access-Control-Allow-Origin "*"
</IfModule>
</FilesMatch> 
```

这帮助我解决了这个问题。

# widget - 在 WP_Widget::widget() 中使用 add_filter()

> ID：11616307
> 
> 赞同：0
> 
> 时间：2012-07-23T16:09:21.793
> 
> 标签：widget

我正在开发一个小部件。我想显示过去 30 天内的所有帖子。我将使用这个片段（来自 CODEX）：

```
// Create a new filtering function that will add our where clause to the query
function filter_where( $where = '' ) {
    // posts in the last 30 days
    $where .= " AND post_date > '" . date('Y-m-d', strtotime('-30 days')) . "'";
    return $where;
}

add_filter( 'posts_where', 'filter_where' );
$query = new WP_Query( $query_string );
remove_filter( 'posts_where', 'filter_where' ); 
```

现在这是我的小部件类：

```
class Okunma_Sayisina_Gore_Listele extends WP_Widget {
    public function __construct() {
        parent::__construct(
            'okunma_sayisina_gore_listele', // Base ID
            'Okunma_Sayisina_Gore_Listele', // Name
            array( 'description' => 'Son n gün içinde yazılmış yazıları okunma sayılarına göre sıralayarak listeler', ) // Args
        );
    }
    public function filter_where( $where = '' ) {
    // posts in the last 30 days
    $where .= " AND post_date > '" . date('Y-m-d', strtotime('-30 days')) . "'";
    return $where;
    }
    public function widget( $args, $instance ) {
        global $wpdb;
        extract( $args );
        $title = apply_filters( 'widget_title', $instance['title'] );
        $n = intval($instance['n']);

        echo $before_widget;
        if ( ! empty( $title ) )
            echo $before_title . $title . $after_title;

            /* IT'S NOT WORKING */
        add_filter( 'posts_where', array('this','filter_where') );
        $posts = get_posts(array(
                "number_posts" => $n,
                "post_type"    => "post",
            ));
        remove_filter( 'posts_where', array('this','filter_where') );

        foreach ($posts as $post)
        {
            echo $post->post_title;
        }
        echo $after_widget;
    }
    public function update( $new_instance, $old_instance ) {
        ...
    }                           
    public function form( $instance ) {
        ... 
    }

}

add_action( 'widgets_init', create_function( '', 'register_widget( "Okunma_Sayisina_Gore_Listele" );' ) ); 
```

过滤器不工作。此小部件列出所有帖子，不仅来自过去 30 天。

另外，我试过

```
add_filter( 'posts_where', array('Okunma_Sayisina_Gore_Listele','filter_where') ); 
```

代替

```
add_filter( 'posts_where', array('this','filter_where') ); 
```

但它也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:48:54.773

好的，我在[Filter Reference](http://codex.wordpress.org/Plugin_API/Filter_Reference/posts_where)上找到了答案。我忘记了`'suppress_filters' => FALSE`。

```
$posts = get_posts(array(
    "number_posts" => 4,
    "post_type"    => "post",
    'suppress_filters' => FALSE
)); 
```

# ruby-on-rails - rails 3.2 是否有更新的 rails_sql_views gem？

> ID：11616309
> 
> 赞同：3
> 
> 时间：2012-07-23T16:09:38.030
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, sql-view

我需要 rails_sql_views gem 提供的功能。然而，这个 gem 的最后一次提交似乎是在 2010 年。这个项目是否已被新项目过时？我想找到一个活跃的 gem 来获得这个功能。

[http://activewarehouse.rubyforge.org/rails_sql_views/](http://activewarehouse.rubyforge.org/rails_sql_views/)
[http://rubygems.org/gems/rails_sql_views](http://rubygems.org/gems/rails_sql_views)

经过进一步研究，这里是类似功能的 Rails 3 候选： [https ://github.com/bradphelan/Active-Illusion](https://github.com/bradphelan/Active-Illusion)

这是这篇博文的精华：http: [//xtargets.com/2011/08/02/tableless-views-with-active-record/](http://xtargets.com/2011/08/02/tableless-views-with-active-record/)

然而，这个解决方案似乎不是很受欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T05:12:09.913

schema_plus gem 具有似乎兼容的 create_view 方法（尽管我不熟悉 rails_sql_views）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T03:46:15.473

barancw，我在使用 Rails 3.2.5 的产品中需要这个 gem，所以我分叉了 repo 并更新了必要的部分。这个 gem 非常适合提高我们大型数据库查询的性能，因为它减少了将对象加载到内存中的需要。我将此 gem 与另一个优化相结合：[Rails - 给定一组用户 - 如何仅获得电子邮件的输出？](https://stackoverflow.com/questions/5160232/rails-given-an-array-of-users-how-to-get-a-output-of-just-emails/5161550#5161550)

[https://github.com/ryanlitalien/rails_sql_views](https://github.com/ryanlitalien/rails_sql_views)

原始文档：[http ://rubydoc.info/gems/rails_sql_views/0.8.0/frames/index](http://rubydoc.info/gems/rails_sql_views/0.8.0/frames/index)

请记住，文档有点过时（“require_gem”已替换为“gem”，并将 gem 添加到您的 Gemfile 中）。

# asp.net - 多态性 - 覆盖和重载

> ID：11616314
> 
> 赞同：3
> 
> 时间：2012-07-23T16:09:56.867
> 
> 标签：asp.net, vb.net

为什么重载称为编译时多态，而重载称为运行时多态？例如，看看下面的代码：

```
Public Class Animal
    Public Overridable Overloads Sub Eat()
        MsgBox("Animal Eat no arguement")
    End Sub
    Public Overridable Sub Drink()
        MsgBox("Animal drink arguement")
    End Sub
End Class

Public Class Horse
    Inherits Animal
    Public Overloads Overrides Sub Eat()
        MsgBox("Horse Eat no arguement")
    End Sub
    Public Overloads Sub Eat(ByVal food As String)
        MsgBox("Horse Eat food arguement")
    End Sub
    Public Overloads Overrides Sub Drink()
        MsgBox("Animal drink arguement")
    End Sub
End Class

Public Class Form1

    Private Sub Form2_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Dim a1 As New Animal
        Dim a2 As Animal
        a2 = New Horse
        a1.Eat()
        a2.Eat("Fruit") 'line 6
    End Sub
End Class 
```

就程序而言，第 6 行将导致编译时错误。但是，如果我将 Eat(String) 添加到动物类，那么它将编译。这背后的原因是什么？

以下帖子中的答案还说：“Overloads 关键字是可选的，但如果将它用于一种方法，则必须将它用于该方法的所有重载：”http://stackoverflow.com/questions/1173257/overloads -vb-net 中的关键字。如果有问题的功能也覆盖，我并不总是发现这种情况。是这样吗？

我正在查看一个使用多态性和接口的大型程序。出于说明目的，我提供了上面的类作为示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:18:24.877

> 就程序而言，第 6 行将导致编译时错误。但是，如果我将 Eat(String) 添加到动物类，那么它将编译。这背后的原因是什么？

这是因为 Animal 类型公开的签名没有带有字符串的 Eat 版本，直到您修改了基类 (Animal) 签名。多态性允许您将马称为动物类型，但只能通过动物的签名（除非您将其转换为马类型）。因此，如果您有另一种类型的 Cat，它继承自 Animal，但没有 eat("")，如果 VB 允许您提到的内容，则会导致编译器错误。

> 以下帖子中的答案还说：“ Overloads 关键字是可选的，但如果将它用于一种方法，则必须将它用于该方法的所有重载

我认为 override 提供了您找到的解决方法，但不能 100% 确定。我个人根本不使用 Overload 来节省打字，因为 C# 不使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T15:04:03.840

我不知道他们为什么称它为编译时或运行时多态性，但我将尝试解释它是如何工作的：

**覆盖**类成员会替换基类中该成员的实现。这意味着您不能覆盖其自己的类中的成员。

这*不*编译：

```
Public Class Animal
    Public Overridable Sub Eat()
        ' eat whatever
    End Sub
    Public Overrides Sub Eat()
        ' eat whatever
    End Sub
End Class 
```

这*确实*编译：

```
Public Class Animal
    Public Overridable Sub Eat()
        ' eat whatever
    End Sub
End Class

Public Class Horse : Inherits Animal
    Public Overrides Sub Eat()
        ' eat whatever, except meat
    End Sub
End Class 
```

在此示例中，我已将原始实现替换为不允许马吃肉的实现。这将禁止任何实例`Horse`吃肉制品，即使`Animal`类型未指定此限制。但是，要指定您自己的食物类型，您必须添加一个采用字符串参数的重载。

**重载**成员允许您选择原始实现或重载实现。您可以重载同一类中的成员，也可以重载从该基类继承的子类中的成员。甚至在两个班级。

这有效：

```
Public Class Animal
    Public Overloads Sub Eat()
        ' eat whatever
    End Sub
    Public Overloads Sub Eat(food as String)
        ' eat food
    End Sub
End Class 
```

这也有效：

```
Public Class Animal
    Public Overloads Sub Eat()
        ' eat whatever
    End Sub
End Class

Public Class Horse : Inherits Animal
    Public Overloads Sub Eat(food as String)
        ' eat food
    End Sub
End Class 
```

**结论**

通过覆盖成员，您可以有效地禁用基类型的实现。通过重载成员，您添加了一个额外的实现，因此可以使用任一实现。您只能覆盖一个成员一次，但您可以根据需要多次重载它。

**明白了**

如果创建 type 的实例`Horse`，但将其分配给 type 的变量`Animal`，则只有基类上的成员可见，但它们仍使用该`Horse`类型上的实现。为了解决这个问题，将类型的实例强制`Animal`转换为`Horse`类型。

# java - 使用 Spring 表达式语言以编程方式评估 bean 表达式

> ID：11616316
> 
> 赞同：15
> 
> 时间：2012-07-23T16:10:16.040
> 
> 标签：java, spring, spring-el

我有一个简单的 Spring Bean 表达式，当我在应用程序上下文文件中定义它时，它的评估结果很好：

```
<bean id="myConfigBean" class="com.example.myBeanConfigBean">
    <property name="myProperty" value="#{ someOtherBean.getData() }"/>
</bean> 
```

现在，我想以编程方式进行相同的评估。我使用了以下代码：

```
final ExpressionParser parser = new SpelExpressionParser();
final TemplateParserContext templateContext = new TemplateParserContext();
Expression expression = parser.parseExpression("#{ someOtherBean.getData() }", templateContext);
final String value = (String) expression.getValue(); 
```

这会引发异常：

```
EL1007E:(pos 22): Field or property 'someOtherBean' cannot be found on null 
```

我想我必须以某种方式设置一个根对象，以允许配置的 bean 像属性一样。但我还没有让它工作。任何人，谁已经这样做并且可以给出提示？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-23T16:53:05.187

实现 BeanFactoryAware 以获取对 bean 工厂的引用；然后...

```
StandardEvaluationContext context = new StandardEvaluationContext();
context.setBeanResolver(new BeanFactoryResolver(this.beanFactory));
Expression expression = parser.parseExpression("@someOtherBean.getData()"); 
// or "@someOtherBean.data"
final String value = expression.getValue(context, String.class); 
```

**编辑**

回答下面的评论。触发使用`@`bean factory resolver 访问 bean；另一种方法是将 a 添加`BeanExpressionContextAccessor`到评估上下文并使用 a`BeanExpressionContext`作为评估的根对象...

```
final ExpressionParser parser = new SpelExpressionParser();
StandardEvaluationContext context = new StandardEvaluationContext();
context.setBeanResolver(new BeanFactoryResolver(beanFactory));
context.addPropertyAccessor(new BeanExpressionContextAccessor());
Expression expression = parser.parseExpression("someOtherBean.getData()");
BeanExpressionContext rootObject = new BeanExpressionContext(beanFactory, null);

...

String value = expression.getValue(context, rootObject, String.class); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-11-13T20:02:12.910

请看@https [://www.mkyong.com/spring3/test-spring-el-with-expressionparser/](https://www.mkyong.com/spring3/test-spring-el-with-expressionparser/)

示例 java 代码

```
import org.springframework.expression.Expression;
import org.springframework.expression.ExpressionParser;
import org.springframework.expression.spel.standard.SpelExpressionParser;
import org.springframework.expression.spel.support.StandardEvaluationContext;

public class App {
    public static void main(String[] args) {

        ExpressionParser parser = new SpelExpressionParser();

        //literal expressions
        Expression exp = parser.parseExpression("'Hello World'");
        String msg1 = exp.getValue(String.class);
        System.out.println(msg1);

        //method invocation
        Expression exp2 = parser.parseExpression("'Hello World'.length()");
        int msg2 = (Integer) exp2.getValue();
        System.out.println(msg2);

        //Mathematical operators
        Expression exp3 = parser.parseExpression("100 * 2");
        int msg3 = (Integer) exp3.getValue();
        System.out.println(msg3);

        //create an item object
        Item item = new Item("mkyong", 100);
        //test EL with item object
        StandardEvaluationContext itemContext = new StandardEvaluationContext(item);

        //display the value of item.name property
        Expression exp4 = parser.parseExpression("name");
        String msg4 = exp4.getValue(itemContext, String.class);
        System.out.println(msg4);

        //test if item.name == 'mkyong'
        Expression exp5 = parser.parseExpression("name == 'mkyong'");
        boolean msg5 = exp5.getValue(itemContext, Boolean.class);
        System.out.println(msg5);

    }
} 
```

# javascript - 页面底部有太多额外的填充

> ID：11616318
> 
> 赞同：0
> 
> 时间：2012-07-23T16:10:18.903
> 
> 标签：javascript, jquery, html, css

我的页面底部有太多的填充，我不知道它为什么在那里。我在 Firefox 中查看了 Firebug，但似乎无法找出导致额外填充的元素。我知道这将是非常愚蠢的，但我无法为我的生活弄明白。感谢您的帮助！

[点击这里](http://retailsitecommon.afstores.com/Develop/FreshMarket/locations.html)可以找到该网站。

**编辑：** 我刚刚意识到这是 Firefox 特有的问题。当我在 Safari 中加载页面时，它看起来就像我期望的那样。知道为什么 Firefox 会在页面底部额外渲染 200 左右像素的页面（这会导致浏览器在页面不需要滚动条时有滚动条）。

感谢您已经给出的建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T16:12:59.800

检查样式表 ( `styles.css`) 的第 1197 行。

的高度`div.bottomLineContainer`被设置为`200px`。尝试将值更改为`100px`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T16:12:12.297

我只是看了一下网站。消除

```
.cf:before, .cf:after {
    content: "";
    display: table;
} 
```

它位于第 1361 行。如果您关闭任一属性，多余的空间就会消失。为了找到它，我只是有条不紊地删除了firebug中的每一段html，直到找到罪魁祸首，然后开始一个一个地关闭属性。

不错的网站。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-23T16:14:49.447

我会检查您在联系我们横幅下方列出的额外 DIV 声明。尝试删除它们，看看会发生什么。在此期间，我会检查我的结局。是你的影子框导致了额外的空间，我尝试在没有它的情况下加载页面，并且底部没有额外的填充。检查影子盒的文档。

# c# - DataGridView 变量格式

> ID：11616319
> 
> 赞同：0
> 
> 时间：2012-07-23T16:10:20.067
> 
> 标签：c#, datagridview

我有一个 DataGridView ，其中包含我从中提取的数据`SQL Server`。我永远不知道我会有多少记录，所以我需要网格可以根据提取的行数变化。

例子：

![在此处输入图像描述](../Images/f16c28c2e9cda3cdc3532ed49b929800.png)

*   图1：我现在拥有的。提取了 1 行，因此我有一个大的深灰色空间，其中可能是数据。
*   图片 2：我只想要提取 1 行。网格会根据行数自动调整大小。
*   图 3：我想要多行。

另外，我想删除总是添加的空行，添加新行将不是一个选项。

那可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:13:05.790

您正在寻找`DataSet.Datatable.Rows.Count`这将告诉您从您的 Sql Server 返回的总行数

**无法通过使用 DataGridView 控件的任何属性来更新这一点**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T16:16:12.967

您需要设置`AutoSizeColumns`属性：

```
datagridview.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.Fill;
datagridview.AutoResizeColumns(DataGridViewAutoSizeColumnsMode.DisplayedCells); 
```

假设您从 a 填充网格`DataSet`，您可以使用它来防止添加空行：

```
foreach (DataRow row in dataset.Tables[0].Rows)
{
      if (!string.IsNullOrWhiteSpace(row[0].ToString()))
      {
            //add row
      }
} 
```

# xml - 我是否错误地使用了这个 .DTD，或者只是误解了它应该做什么？

> ID：11616325
> 
> 赞同：0
> 
> 时间：2012-07-23T16:10:42.103
> 
> 标签：xml, dtd

感谢您阅读我的问题。我已经搜索并阅读了类似的问题，但没有一个能完全解释发生了什么。

我有一个 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/css" href="../wikiStyle.css"?>
<!DOCTYPE article SYSTEM "../article.dtd">

<article xmlns:xlink="http://www.w3.org/1999/xlink">
    <header>
        <title>Foreign relations of Malta</title>
        <id>19146</id>
    </header>

    <bdy>
        <link xlink:type="simple" xlink:href="../205/40205.xml">Albania</link>&nbsp;·
        <link xlink:type="simple" xlink:href="../588/67588.xml">Andorra</link>&nbsp;· 
    </bdy>
</article> 
```

如你看到的; 我引用了 .dtd 文件，它包含如下定义：

```
<!ENTITY nbsp   "&#160;"> <!-- no-break space = non-breaking space,
                                  U+00A0 ISOnum --> 
```

我的目标是在浏览器中以可读的方式显示这个 .xml 文件。CSS 完美地管理了这一点，除了 .xml 文件，比如这个，它包含像*nbsp 这样的元素；*

在这种情况下，我会收到如下错误：

```
XML Parsing Error: undefined entity

10.1126/science.288.5472.1775</weblink>. PMID 10877698.</cite>&nbsp;</entry>

--------------------------------------------------------------^ 
```

据我了解，.dtd 中的这一行应该向浏览器声明此元素，并使我能够在我的 xml 中使用   （并通过浏览器的解析器将其扩展为   以进行显示。

*   我对*应该*发生的事情的理解是否正确，或者我错过了什么？
*   如何声明此元素以便浏览器显示它？

请注意：我正在处理数百万个这些 XML 文件，但我不生成它们。我需要一个不涉及更改 .xml 文件本身的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:07:07.840

您的实体声明看起来不错，因此可能是浏览器未加载外部 DTD 的问题。（例如：[https](https://developer.mozilla.org/en/XML_in_Mozilla) ://developer.mozilla.org/en/XML_in_Mozilla ）

我认为处理此问题的唯一方法是将实体声明添加到每个文件的内部子集：

```
<!DOCTYPE article [
<!ENTITY nbsp "&#160;"> <!-- no-break space = non-breaking space,
                                  U+00A0 ISOnum -->
]> 
```

我知道您说过您正在处理数百万个这些文件并且您不生成它们，但是您可能能够编写 DOCTYPE 声明的更新脚本并对其进行预处理。

# image-processing - 为什么我的离散数据的双三次插值看起来很难看？

> ID：11616326
> 
> 赞同：1
> 
> 时间：2012-07-23T16:10:42.373
> 
> 标签：image-processing, bicubic

我有一个 128x128 的高程数据数组（使用 9 种颜色显示从 -400m 到 8000m 的高程），我需要将其调整为 512x512。我用双三次插值做到了，但结果看起来很奇怪。在图片中，您可以看到原始的、最近的和双三次的。注意：仅对高程数据进行插值，而不对颜色本身进行插值（保留色域）。在我的错误插值代码的双三次图像结果上看到的那些伪影是由离散（9 步）数据的插值引起的吗？

[http://i.stack.imgur.com/Qx2cl.png](http://i.stack.imgur.com/Qx2cl.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T02:08:41.087

您使用的双三次代码一定有问题。这是我使用 Python 的结果：

![双三次调整大小](../Images/7df8f9308c6257eacd4b38ab10bf1ff0.png)

外部周围的黑色边框是由于振铃而导致结果超出调色板的位置。

这是产生上述内容的程序：

```
from PIL import Image
im = Image.open(r'c:\temp\temp.png')

# convert the image to a grayscale with 8 values from 10 to 17
levels=((0,0,255),(1,255,0),(255,255,0),(255,0,0),(255,175,175),(255,0,255),(1,255,255),(255,255,255))
img = Image.new('L', im.size)
iml = im.load()
imgl = img.load()
colormap = {}
for i, color in enumerate(levels):
    colormap[color] = 10 + i
width, height = im.size
for y in range(height):
    for x in range(width):
        imgl[x,y] = colormap[iml[x,y]]

# resize using Bicubic and restore the original palette
im4x = img.resize((4*width, 4*height), Image.BICUBIC)
palette = []
for i in range(256):
    if 10 <= i < 10+len(levels):
        palette.extend(levels[i-10])
    else:
        palette.extend((i, i, i))
im4x.putpalette(palette)
im4x.save(r'c:\temp\temp3.png') 
```

**编辑：**显然 Python 的 Bicubic 也不是最好的。以下是我在 Paint Shop Pro 中能够使用与上述大致相同的步骤手动完成的操作。

![Paint Shop Pro 中的双三次](../Images/cad47427aaa25f3b2de5bd976e65446f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:49:17.537

虽然双三次插值有时会产生超出原始范围的插值（你能验证这是否发生在你身上吗？）看起来你确实可能有一个错误，但如果不看代码就很难说。作为一般规则，双三次解应该比最近邻解更平滑。

**编辑：**我收回这一点，我在您的图像中看不到原始范围之外的插值值。不过，我认为奇怪的部分是你在使用双三次时得到的“锯齿状”，你可能需要仔细检查一下。

# intersystems-cache - 查找全局下标中点

> ID：11616332
> 
> 赞同：1
> 
> 时间：2012-07-23T16:10:54.223
> 
> 标签：intersystems-cache

在 Caché ObjectScript（跨系统的 MUMPS 方言）中，有没有办法有效地跳到全局下标范围的键中的近似中点或线性点？相等，基于记录数。

我想将下标键范围分成大致相等的块，然后并行处理每个块。

知道全局中的键排列在某种二叉树中，这对于底层数据存储引擎来说应该是一个简单的操作，但我不确定是否有接口可以做到这一点。

我可以通过扫描全局的整个键空间来做到这一点，但这会破坏尝试并行运行操作的目的。在这个全局上，顺序扫描需要几个小时。在开始扫描之前，我需要划分密钥空间。

我希望每个线程都对键空间的大小大致相等的连续块进行单独扫描；问题是计算给每个线程的键范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:31:23.757

对于我的特殊需要，我发现我正在使用的应用程序具有我所说的全局索引。另一个由应用程序维护的具有不同键的全局变量，链接回主表。我可以在很短的时间内扫描它并从那里分解键集。

如果有人想出一种方法来做我想做的事情，只给出主要的全局，我会改变接受的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T06:05:14.920

您可以在函数 $order 或 $query 中使用第二个参数“direction”（1 或 -1）

# c# - 如何在struct中从字符串转换为字符串常量？

> ID：11616333
> 
> 赞同：0
> 
> 时间：2012-07-23T16:10:55.057
> 
> 标签：c#

所以我有这个结构：

```
public struct PurchaseOrderStatus {
    public const string Open = "Open", Received = "Received";
} 
```

如果我有以下情况，我该如何转换：

```
 string status = "Open"; 
```

至：

```
 PurchaseOrderStatus.Open; 
```

通过转换，我的意思是，我该怎么做：

```
 PurchaseOrderStatus POS;
    String status = "Open";
    POS = status; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T16:22:20.750

我建议在这里使用“智能枚举”：

```
public sealed class PurchaseOrderStatus
{
    public static readonly PurchaseOrderStatus Open =
        new PurchaseOrderStatus("Open");
    public static readonly PurchaseOrderStatus Received =
        new PurchaseOrderStatus("Received");

    private readonly string text;
    public string Text { get { return value; } }

    private PurchaseOrderStatus(string text)
    {
        this.text = text;
    }
} 
```

您可以在此处存储任意信息，包括*不是*有效标识符的文本（当然，只要它不改变）。它仍然是强类型的（不像你的字符串），你可以给它其他行为。如果您删除`sealed`修饰符并将子类添加为*嵌套*类，您甚至可以创建子类，这样它们仍然可以访问私有构造函数。

哦，与常规枚举不同，有一组*真正*有限的值（您定义的值 和）。`null`

唯一的缺点是你不能打开它。

# windows-phone-7 - 将文件从手机复制到 PC

> ID：11616335
> 
> 赞同：1
> 
> 时间：2012-07-23T16:10:58.833
> 
> 标签：windows-phone-7

有没有办法将文本文件（我已经用 C# 写过一些文件）从 windows phone 7 复制到计算机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T23:52:07.397

[在这一点上，套接字](http://msdn.microsoft.com/en-us/library/hh202874%28v=vs.92%29.aspx)是您最好的朋友，它是唯一可以通过 SDK 直接访问您的 PC 的链接。您也可以尝试[使用服务](http://msdn.microsoft.com/en-us/library/hh202874%28v=vs.92%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T16:22:10.800

嗯..我想你想把你在设备上生成的 txt 文件复制到电脑上？

由于设备的限制，您不能这样做..（您只能使用您的 IsolatedStorage 而不能使用其他任何东西（无需解锁设备））

您可以通过电子邮件发送文件内容或使用 skydrive 进行传输

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T17:06:44.873

如果您想要从 PC 访问隔离存储文件的方法，请查看[此处](http://www.j2i.net/BlogEngine/post/2010/08/24/Getting-to-my-Isolated-Files.aspx)。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T21:02:30.747

感谢您的建议。这正是我正在寻找的东西。希望它会帮助别人。

[http://msdn.microsoft.com/en-us/library/hh286408%28v=vs.92%29.aspx](http://msdn.microsoft.com/en-us/library/hh286408%28v=vs.92%29.aspx)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-23T16:17:43.690

您应该提供更多详细信息，您所说的复制是什么意思？

你只是想做一些类似 copy(TheFileToCopy, TheFileCreatedAsACopy) 的事情吗？在这种情况下，也许看看 msnd doc [http://msdn.microsoft.com/en-us/library/system.io.file.copy%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/system.io.file.copy%28v=vs.71%29.aspx) 和[http://msdn.microsoft .com/en-us/library/cc148994.aspx](http://msdn.microsoft.com/en-us/library/cc148994.aspx)

或者也许[http://msdn.microsoft.com/en-us/library/sfezx97z.aspx](http://msdn.microsoft.com/en-us/library/sfezx97z.aspx)

它对你有帮助吗？

# c# - 如何将 DataGridView 动态添加到 TabPage

> ID：11616340
> 
> 赞同：3
> 
> 时间：2012-07-23T16:11:24.463
> 
> 标签：c#, windows, datagridview, tabcontrol, tabpage

我有一个 TabControl。我动态地想要添加将动态添加 DataGridView 的 TabPages。我能够动态添加 tabPages，但是当我将 DataGridView 添加到动态 tabPage 时，什么都没有显示。感谢可以提供的任何帮助。

这是代码。

```
 myTabPage.SuspendLayout();
                    tabControlNonQueued.TabPages.Add(myTabPage);
                    loadDataGridToTab(dataTable, myTabPage);
    private void loadDataGridToTab(DataTable dt, TabPage tab)
    {
        DataGridView grid = new DataGridView();
        tab.Controls.Add(grid);
        tab.Refresh();
        grid.Visible = true;
        System.Windows.Forms.DataGridViewCellStyle dataGridViewCellStyle = new System.Windows.Forms.DataGridViewCellStyle();
        grid.AllowUserToAddRows = false;
        grid.AllowUserToDeleteRows = false;
        grid.AutoSizeColumnsMode = System.Windows.Forms.DataGridViewAutoSizeColumnsMode.Fill;
        grid.ColumnHeadersDefaultCellStyle = dataGridViewCellStyle;
        grid.ColumnHeadersHeightSizeMode = System.Windows.Forms.DataGridViewColumnHeadersHeightSizeMode.AutoSize;
        dataGridViewCellStyle.Alignment = System.Windows.Forms.DataGridViewContentAlignment.MiddleLeft;
        dataGridViewCellStyle.BackColor = System.Drawing.SystemColors.Control;
        dataGridViewCellStyle.Font = new System.Drawing.Font("Microsoft Sans Serif", 8.25F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        dataGridViewCellStyle.ForeColor = System.Drawing.SystemColors.WindowText;
        dataGridViewCellStyle.SelectionBackColor = System.Drawing.SystemColors.Highlight;
        dataGridViewCellStyle.SelectionForeColor = System.Drawing.SystemColors.HighlightText;
        dataGridViewCellStyle.WrapMode = System.Windows.Forms.DataGridViewTriState.True;
        grid.ColumnHeadersDefaultCellStyle = dataGridViewCellStyle;
        grid.ColumnHeadersHeightSizeMode = System.Windows.Forms.DataGridViewColumnHeadersHeightSizeMode.AutoSize;
        //grid.Columns.AddRange(new System.Windows.Forms.DataGridViewColumn[] {
        //this.cbDG});

        hideDGColumn(grid, "Counter");
        SetFontAndColors(grid);
        lockDataGrid(grid);
        BindingSource source = new BindingSource();
        source.DataSource = dt;
        grid.Dock = DockStyle.Fill;
        grid.DataSource = source;

    } 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T16:23:12.860

您是否尝试过将 tab.Controls.Add(grid) 语句移到配置网格之后？

另外，我注意到您正在使用“SuspendLayout()”来允许无闪烁更新。您还记得重新打开布局吗？

例如，这个：

```
myTabPage.SuspendLayout();
tabControlNonQueued.TabPages.Add(myTabPage);
DataGridView grid = new DataGridView();

// ... grid configuration and setup here ...

tab.Controls.Add(grid);
myTabPage.ResumeLayout();
tab.Refresh(); 
```

# asp.net - ASP.NET MVC 呈现通知等常见数据

> ID：11616341
> 
> 赞同：0
> 
> 时间：2012-07-23T16:11:29.813
> 
> 标签：asp.net, asp.net-mvc

在我的要求中，所有视图都应该能够根据控制器中的操作中发生的情况显示通知。目前的实现是在一个 BaseModel 中，它被所有需要显示通知的模型继承。然后，任何具有此要求的视图只需调用：

```
@{ Html.RenderPartial("MessageCtrl", Model); } 
```

并呈现通知。这在 Action 直接返回视图的情况下工作正常，并且通常在 Action 中像这样处理：

```
model.SetMessage(response);
return View(model); 
```

...其中 SetMessage 从我的服务返回的对象更新模型的通知相关属性。所有响应都实现了我创建的称为 IResponse 的接口，因此可以在整个过程中处理消息传递。

**当我需要从不同的操作返回视图并仍然显示通知时，问题就出现了。**

例如，在我的 EditUser 操作中，如果编辑成功，我想显示 Index 视图。为了从 EditUser 操作中实现这一点，我需要返回 RedirectToAction（因为简单地返回视图将返回正确的视图，其 URL 不正确，表明它不是 EditUser）。但是，RedirectToAction 失去了我的模型和 BaseModel 的所有概念，所以当它重定向时，它已经失去了我的通知。我知道我可以使用 RouteValues，但这违背了拥有通用基础模型驱动通知方法的目的。我什至查看了 ViewBag（通常我将其视为 MVC 的丑陋部分），但发现 ViewBag 仅在单个请求的生命周期内持续存在，并且使用 RedirectToAction，ViewBag 在到达目标时再次为空行动。另一个想法是将它存储在会话对象中，

这似乎是一个非常标准的要求。除了通过 RedirectToAction 的查询字符串之外，是否有一种标准化的方法可以将通用数据（如通知）传递到不同的视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:20:52.070

我认为您正在寻找`TempData`仅在一次重定向中保留会话中的数据。

# android - 带位图的 CustomListView - OutOfMemory 错误

> ID：11616343
> 
> 赞同：0
> 
> 时间：2012-07-23T16:11:36.493
> 
> 标签：android, bitmap, android-listview, android-arrayadapter, out-of-memory

我对 android 开发比较陌生，我正在尝试使用 ImageView 和 TextView 创建自定义 ListView。我正在将 URL 转换为位图图像，然后尝试在 imageView 中显示图像。但是我收到一个错误，我的应用程序立即崩溃。能够在我的 imageView 中显示可绘制对象，我进行了一些修改并尝试显示位图，然后我的应用程序崩溃了。任何帮助将不胜感激。这是我的 3 节课：

**编辑**我使用 asynctask 在单独的线程上获取位图图像，现在我的应用程序不再崩溃。但是当我开始活动时它不显示列表视图。这是我更新的代码。

**编辑**我再次更改了我的代码，我只在我的异步任务的执行方法中传递了一个 imageView。我现在可以在列表视图中看到文本，但看不到图像。这是我编辑的代码。

**编辑**我使用调试器找出位图没有显示的原因，我发现我的位图变量为空。这是因为我没有添加互联网权限。添加权限后，我的应用程序开始在给定行崩溃：

```
 b = BitmapFactory.decodeStream(image_url.openConnection() .getInputStream()); 
```

由于 OutofMemory 错误，我得到了 RuntimeException。我不知道如何解决这个问题。我将不胜感激任何帮助。谢谢 ！

这是我的 Loadimage AsyncTask 类：

```
 public class LoadImage extends AsyncTask<String, Integer, Bitmap>{

    Context callingContext = null;
    Bitmap b = null;

    ImageView view;

    public LoadImage(ImageView view){

        this.view = view;
    }

    @Override
    protected Bitmap doInBackground(String... arg0) {
        // TODO Auto-generated method stub
        String p_url = "http://java.sogeti.nl/JavaBlog/wp-content/uploads/2009/04/android_icon_256.png";

        Bitmap b = null;
        try {
            URL image_url = new URL(p_url);
            b = BitmapFactory.decodeStream(image_url.openConnection() .getInputStream());

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return b;
    }

    @Override
    protected void onPostExecute(Bitmap result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        view.setImageBitmap(result);

    }   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T16:32:42.793

您的代码正在崩溃，因为您在严格模式下在 UI 线程上从服务器加载图像文件。这通常被认为是不好的做法，因为如果图像需要很长时间才能下载，您的应用程序似乎已被锁定。

严格模式正在强制崩溃（它抛出异常）。如果您禁用严格模式，它应该可以让您的应用正常工作。但是，在 UI 线程上执行网络 I/O 的问题仍然存在。

更好的长期解决方案是使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)之类的东西。这会将您的图像加载到不同的线程上，从而使您的应用程序保持响应。[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)的文档有一个下载图像的简单示例，[这个帮助页面](http://developer.android.com/guide/components/processes-and-threads.html)有更多信息。

例如，我可能会将您的代码更改为类似这样的代码（请注意，我在没有测试运行的情况下编写此代码，因此可能存在一些错误）：

我会将您的列表条目更改为：

```
public class CustomList {

    public String iconUrl;
    public String title;
    public CustomList(){
        super();
    }

    public CustomList(String icon, String title) {
        super();
        this.icon = icon;
        this.title = title;
    }
} 
```

然后只将图标 URL 传递到您的列表中。

接下来创建一个 AsyncTask：

```
public class ImageDownloader extends AsyncTask<String, Integer, Bitmap> {
     public ImageDownloader(ImageView view){
          mView = view;
     }

     protected Bitmap doInBackground(String... url) {
        Bitmap b = null;
        try {
            URL image_url = new URL(url);
            b = BitmapFactory.decodeStream(image_url.openConnection() .getInputStream());
            list_data = new CustomList[]{
                    new CustomList(b,"Android")};
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return b;
     }

     protected void onPostExecute(Bitmap result) {
         mView.setImageBitmap(result);
     }
     ImageView mView;
} 
```

然后对于您的适配器，而不是设置图像，请执行以下操作：

```
new ImageDownloader(holder.thumbnail).execute(cl.icon); 
```

这应该足以让你开始。请注意，此示例存在几个问题：

1.  存在潜在的内存泄漏。一般来说，您不应该像我一样在 AsyncTask 中保留对视图或活动（或其他此类对象）的引用。
2.  如果您旋转手机并且列表发生变化，您可能会显示旧的缩略图。
3.  如果一个视图被回收，一个旧的缩略图可能会出现。

# oauth-2.0 - expirers_in 和多种作用域类型

> ID：11616349
> 
> 赞同：1
> 
> 时间：2012-07-23T16:12:01.570
> 
> 标签：oauth-2.0, oauth-provider

OAuth 2.0 v30 定义`expires_in`在令牌过期之前指定客户端时间。当您对客户要求的所有范围都有单一的持续时间时，这很有效。当有不止一种类型的范围时：例如离线 - 在线（或短期/长期，如果您愿意）OAuth 提供者应该返回多长时间？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-23T19:00:34.157

用户授予客户代表他访问特定范围内资源的权限。此权限基本上是在所有范围内无限期授予的（因为他对提供者如何处理它没有影响），至少在用户手动撤销提供者端的权限之前。如果他只撤销部分范围，则当前发布`access_token`的无效，客户必须使用`refresh_token`.

令牌过期的原因是当它们被盗时，攻击者只能在有限的时间内访问。因此，`expires_in`您设置为提供者的时间应该取决于您对客户的信任程度，他是否可以将令牌保密而不是范围。

# java - log4j 和弹簧

> ID：11616354
> 
> 赞同：0
> 
> 时间：2012-07-23T16:12:17.927
> 
> 标签：java, spring, log4j, apache-commons-logging

我正在开发一个 Java 桌面应用程序，并且我正在使用 Spring。现在我想使用 applicationContext.xml 将 log4j 注入我的类。我的 log4j 属性文件放在源文件夹 Resources/log4j.properties

在我的搜索过程中，我发现当它是一个 Web 应用程序时有很多方法，但我发现没有关于桌面应用程序的帮助。

我在我的源代码中使用 Apache 公共接口，现在我想注入 log4j 依赖项。

请帮帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:45:06.397

默认情况下，Log4J 将简单地从类路径根目录中的“log4j.properties”文件中读取其配置。由于您将 log4.properties 文件放在资源源文件夹中，这应该可以工作。

如果您不想将 log4j 配置存储在类路径中，则可以使用以下内容：

```
<bean id="log4jInitialization"
 class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
   <property name="targetClass"
      value="org.springframework.util.Log4jConfigurer" />
   <property name="targetMethod" value="initLogging" />
   <property name="arguments">
      <list>
         <value>myPropertiesFolder/log4j.xml</value>
      </list>
   </property>
</bean> 
```

# iis-6 - 访问 Web 服务器上的外部 URL

> ID：11616357
> 
> 赞同：0
> 
> 时间：2012-07-23T16:12:26.067
> 
> 标签：iis-6, webserver

如果我使用 RDP 登录到我们的 Web 服务器，我将无法通过它们的外部 URL 访问我们在该 Web 服务器上运行的任何站点。例如，假设我的 Web 服务器托管 www.example.com，当我登录到 Web 服务器时，打开浏览器并尝试访问 www.example.com，我看不到它。

但是，我们的一个站点以某种方式配置为像这样工作，如果我尝试访问该 URL，它会按您预期的那样工作。

不幸的是，这是由我们不再联系的服务器托管合作伙伴完成的。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:17:59.683

您可以通过多种方式做到这一点..

这取决于您的网络配置，但也可以是主机文件中的简单行或静态 dns 记录或该 IP 地址的特定路由。

如果您使用的是 IIS，您还应该在绑定菜单中的环回接口上将网站设置为“侦听”。

![绑定](../Images/28f68b6c9ee6ba9f794e6d2cf1362dde.png)

或者，对于 IIS 6：

![iis 6](../Images/f032dc9b8dd31be5842642c4f6e6f996.png)

# java - 你如何使用 android sdk 发送短信

> ID：11616360
> 
> 赞同：1
> 
> 时间：2012-07-23T16:12:32.787
> 
> 标签：java, android, sdk

我想弄清楚如何从我的应用程序发送短信。我尝试了以下方法：

```
try { 
    String newNumber, newMessage;
    newNumber = number.getText().toString();
    newMessage = message.getText().toString();
    smsManager.getDefault();
    smsManager.sendTextMessage(newNumber, null, newMessage,null, null);

    } catch (InterruptedException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
     }  
    }
}
    };thread.start(); 
```

但我得到了一只原木猫：

> 07-23 09:03:42.378: I/Process(14426): 发送信号。PID: 14426 SIG: 9 07-23 09:06:18.972: W/dalvikvm(14529): threadid=11: 线程退出未捕获异常 (group=0x40a381f8) 07-23 09:06:18.972: E/AndroidRuntime(14529 ): 致命异常：Thread-885 07-23 09:06:18.972: E/AndroidRuntime(14529): java.lang.NullPointerException 07-23 09:06:18.972: E/AndroidRuntime(14529): at com.johnnydicamillo。 sms.SmsSpammerActivity$1.run(SmsSpammerActivity.java:48) 07-23 09:06:19.238: W/IInputConnectionWrapper(14529): showStatusIcon on inactive InputConnection 07-23 09:06:44.855: I/Process(14529): 发送信号。PID：14529 SIG：9

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:21:32.153

看起来`smsManager`可能为 null，`getDefault()`是用于获取 an 默认实例的静态方法`SmsManager`，它不显示您正在设置任何内容。您可能希望该行类似于：

```
SmsManager smsManager = SmsManager.getDefault(); 
```

# java - 使用 JNI 将 java 与 C 计时器库接口

> ID：11616362
> 
> 赞同：3
> 
> 时间：2012-07-23T16:12:37.217
> 
> 标签：java, java-native-interface

我正在尝试使这个简单的示例起作用：

```
import java.io.*;

public class Timer {
    public static void main(String[] args) {
        setTimer(new Runnable() {
                public void run() {
                    System.out.println("tick");
                }
            },
            1000 /* msecs */
        );
        while (true) ;
    }

    native public static void setTimer(Runnable r, int msecs);

    static {
        System.loadLibrary("timer");
    }
} 
```

代码很简单。在JNI `setTimer`/C/Linux 中使用`SIGALRM`和`setitimer`. 示例应该每秒打印一次**刻度。**

JNI 库被编程为：

```
#include <signal.h>
#include <sys/time.h>

#include "Timer.h"
#include "error.h"

static JNIEnv *genv;
static jobject gobj;

void handler(int s) {
    jclass cls = (*genv)->GetObjectClass(genv, gobj);
    jmethodID mid = (*genv)->GetMethodID(genv, cls, "run", "()V");
    (*genv)->CallVoidMethod(genv, gobj, mid);
}

JNIEXPORT void JNICALL Java_Timer_setTimer
  (JNIEnv *env, jclass cls, jobject obj, jint msecs) {
    struct sigaction sa;
    struct itimerval it;

    sa.sa_flags = SA_RESTART;
    sigemptyset (&sa.sa_mask);

    genv = env;
    gobj = obj;
    sa.sa_handler = handler;
    it.it_interval.tv_sec = msecs/1000;
    it.it_interval.tv_usec = (msecs%1000)*1000;
    it.it_value = it.it_interval;

    if (sigaction (SIGALRM/*PROF*/, &sa, NULL) == -1
        || setitimer (ITIMER_REAL/*PROF*/, &it, NULL) == -1)
        SysError("setTimer: sigaction, setitimer: couldn't init timer");
} 
```

我正在使用信号链库，以免对 JVM 产生信号干扰：

```
LD_LIBRARY_PATH=. LD_PRELOAD=/usr/lib/jvm/java-6-openjdk/jre/lib/i386/libjsig.so java Timer 
```

SIGALRM 第一次使用消息触发 JMV 段错误：

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x00e9531c, pid=5742, tid=3077924544
#
... 
```

为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T05:04:05.770

问题是无效的 genv 和 gobj。genv 和 gobj 在变量集和离开 Java_Timer_setTimer 函数之间有效。您可以从当前 jvm 获取 env* 并将 obj 设置为全局 ref。我定义了新变量：

```
static JavaVM *jvm = NULL;
static jobject callback = NULL; 
```

在 Java_Timer_setTimer 中：

```
/* find the current jvm */
(*env)->GetJavaVM(env, &jvm);
/* upgrade callback to global ref */
callback = (*env)->NewGlobalRef(env, obj); 
```

在句柄中，使用 jvm 附加当前线程并调用回调：

```
void handler(int s) {
    if(jvm == NULL)
        return ;
    if(callback == NULL)
        return ;

    JNIEnv *env = NULL;
    jint res;
    res = (*jvm)->AttachCurrentThread(jvm, (void **)&env, NULL);
    if(res < 0)
    {
        fprintf(stderr, "Attach VM Thread failed\n");
        return ;
    }

    jclass cls = (*env)->GetObjectClass(env, callback);
    jmethodID mid = (*env)->GetMethodID(env, cls, "run", "()V");
    (*env)->CallVoidMethod(env, callback, mid);
    (*jvm)->DetachCurrentThread(jvm);
} 
```

最后，我们让它可以运行：

```
qrtt1@qrtt1-VirtualBox:/media/sf_VBoxSharedFolder/0Lab$ java -Djava.library.path=. -classpath bin Timer
tick Tue Jul 24 13:01:54 CST 2012
tick Tue Jul 24 13:01:55 CST 2012
tick Tue Jul 24 13:01:56 CST 2012
tick Tue Jul 24 13:01:57 CST 2012
tick Tue Jul 24 13:01:58 CST 2012 
```

* * *

完整的源代码如下：

```
#include "Timer.h"
#include <jni.h>
#include <signal.h>
#include <sys/time.h>
#include <stdio.h>

static JavaVM *jvm = NULL;
static jobject callback = NULL;

void handler(int s) {
    if(jvm == NULL)
        return ;
    if(callback == NULL)
        return ;

    JNIEnv *env = NULL;
    jint res;
    res = (*jvm)->AttachCurrentThread(jvm, (void **)&env, NULL);
    if(res < 0)
    {
        fprintf(stderr, "Attach VM Thread failed\n");
        return ;
    }

    jclass cls = (*env)->GetObjectClass(env, callback);
    jmethodID mid = (*env)->GetMethodID(env, cls, "run", "()V");
    (*env)->CallVoidMethod(env, callback, mid);
    (*jvm)->DetachCurrentThread(jvm);
}

/*
 * Class:     Timer
 * Method:    setTimer
 * Signature: (Ljava/lang/Runnable;I)V
 */
JNIEXPORT void JNICALL Java_Timer_setTimer
  (JNIEnv *env, jclass cls, jobject obj, jint msecs)
{

    struct sigaction sa;
    struct itimerval it;

    sa.sa_flags = SA_RESTART;
    sigemptyset (&sa.sa_mask);

    /* find the current jvm */
    (*env)->GetJavaVM(env, &jvm);
    /* upgrade callback to global ref */
    callback = (*env)->NewGlobalRef(env, obj);

    sa.sa_handler = handler;
    it.it_interval.tv_sec = msecs/1000;
    it.it_interval.tv_usec = (msecs%1000)*1000;
    it.it_value = it.it_interval;

    if (sigaction (SIGALRM/*PROF*/, &sa, NULL) == -1
            || setitimer (ITIMER_REAL/*PROF*/, &it, NULL) == -1)
    {
        // error.
    }
} 
```

# gdb - 获取在 GDB 中运行的挂起进程的堆栈跟踪

> ID：11616364
> 
> 赞同：1
> 
> 时间：2012-07-23T16:12:43.467
> 
> 标签：gdb, freebsd, hung

我试图弄清楚为什么我正在使用的程序挂起。

我最初认为通过 GDB 运行该问题已“解决”，但我得到的症状与以前完全相同 - 有什么方法可以向 GDB 发送信号或其他东西以打印堆栈跟踪，以便我可以尝试查看怎么了？

我正在使用 FreeBSD-9.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T16:19:18.237

您只需按 Control-C 即可中断 GDB 中正在运行的进程。

然后，您可以使用该`backtrace`命令获取回溯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T17:17:08.753

我最终通过使用 gcore(1) 创建 coredump 并使用 GDB 中创建的 coredump 启动 myprogram 来获得回溯。

# sql - 计算满足两个不同条件的人的查询

> ID：11616368
> 
> 赞同：2
> 
> 时间：2012-07-23T16:13:12.647
> 
> 标签：sql, sql-server-2008, common-table-expression

我需要找到一种方法来计算住在同一所房子里并投票“DEMO”、“REP”或“DEMO-REP”的选民人数。到目前为止，我已经得到了这个，[http://sqlfiddle.com/# !3/469d4/3](http://sqlfiddle.com/#!3/469d4/3)

例如，miles 和 Raquel 住在同一所房子里，并且都投了“REP”，他们将被计入“REP”列。Chris 和 Tania 都住在同一所房子里，并且投票了“REP”和“DEMO”，所以他们将进入“DEMO-REP”列。小提琴结果需要。

[1 http://img824.imageshack.us/img824/3305/resultbx.png](http://img824.imageshack.us/img824/3305/resultbx.png)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:20:59.750

我认为这可以满足您的要求：

```
select sum(votes) as total, sum(demo*(1-rep)) as demoonly,
       sum(rep*(1-demo)) as reponly, sum(demo*rep) as demorep
from (select address, cont(*) as votes,
             max(case when voted = 'DEMO' then 1 else 0 end) as demo,
             max(case when voted = 'REP' then 1 else 0 end) as rep
      from t
      group by address
     ) t 
```

假设您想要一个以上的家庭（地址）：

```
select sum(votes) as total, sum(demo*(1-rep)) as demoonly,
       sum(rep*(1-demo)) as reponly, sum(demo*rep) as demorep
from (select address, count(*) as votes,
             max(case when voted = 'DEMO' then 1 else 0 end) as demo,
             max(case when voted = 'REP' then 1 else 0 end) as rep
      from test4
      group by address
      having count(distinct name) > 1
     ) t 
```

在这里，我假设“地址”是家庭的代理，因为数据中没有家庭字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T16:38:30.357

编辑：这适用于您的 SQL Fiddle 代码。

我会这样做：

```
SELECT COUNT(Voted) AS TOTAL, 
(
SELECT COUNT(DISTINCT address) FROM test4
WHERE address NOT IN (SELECT address FROM test4 WHERE Voted = 'REP')
) AS Demo, 
(SELECT COUNT(DISTINCT address) FROM test4
WHERE address NOT IN (SELECT address FROM test4 WHERE Voted = 'DEMO')
) AS Rep,
(SELECT COUNT(DISTINCT address) FROM test4
WHERE address IN (SELECT address FROM test4 WHERE Voted = 'REP') AND address IN (SELECT address FROM test4 WHERE Voted = 'DEMO')
) AS DemoRep
  FROM test4 
```

# python - Django：我的 models.py 文件似乎无法同步到数据库。

> ID：11616371
> 
> 赞同：7
> 
> 时间：2012-07-23T16:13:25.043
> 
> 标签：python, database, django, terminal, syncdb

我尝试设置一个简单的 models.py 文件作为我在线关注的本教程的一部分。当我尝试 syncdb 命令时，出现以下错误：

```
 File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/core/management/base.py", line 231, in execute
    self.validate()
  File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/core/management/base.py", line 266, in validate
    num_errors = get_validation_errors(s, app)
  File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/core/management/validation.py", line 30, in get_validation_errors
    for (app_name, error) in get_app_errors().items():
  File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/db/models/loading.py", line 158, in get_app_errors
    self._populate()
  File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/db/models/loading.py", line 64, in _populate
    self.load_app(app_name, True)
  File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/db/models/loading.py", line 88, in load_app
    models = import_module('.models', app_name)
  File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/Users/Mike/Desktop/Main/Django-Development/BBN/Knights/models.py", line 3, in <module>
    class Users(models.Model):
  File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/db/models/base.py", line 99, in __new__
    new_class.add_to_class(obj_name, obj)
  File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/db/models/base.py", line 219, in add_to_class
    value.contribute_to_class(cls, name)
TypeError: Error when calling the metaclass bases
    unbound method contribute_to_class() must be called with EmailField instance as first argument (got ModelBase instance instead) 
```

这是我的 models.py 文件：

```
from django.db import models

class Users(models.Model):
    pen_name = models.CharField(max_length=30)
    email = models.EmailField

class Works(models.Model):
    user = models.ForeignKey(Users)
    date_published = models.DateField()

class Reviews(models.Model):
    work = models.ForeignKey(Works)
    date_published = models.DateField()

class Works_Subscriptions(models.Model):
    user = models.ForeignKey(Users)
    to_work = models.ForeignKey(Works)

class User_Subscriptions(models.Model):
    user = models.ForeignKey(Users)
    to_user = models.ForeignKey(Users)

class Books(models.Model):
    title = models.CharField(max_length=50)
    author = models.CharField(max_length=50) 
```

如果有任何帮助，我正在使用 sqlite3 并且在我在 models.py 文件中没有任何内容之前它可以工作（所以它只是将数据库与 django 的常用表同步）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-23T16:15:06.193

问题是

```
email = models.EmailField 
```

将其更改为

```
email = models.EmailField() 
```

这是因为 Django 模型类的属性是由元类修改的，`django.db.models.Model`而不是直接作为标准属性分配的，因此它们可以透明地与数据库对话等等。它变得很困惑，因为你试图给它`EmailField`类而不是那个类的实例。

# ruby-on-rails - Rails：Rubymine：GitHub

> ID：11616373
> 
> 赞同：6
> 
> 时间：2012-07-23T16:13:26.413
> 
> 标签：ruby-on-rails, rubymine

我似乎无法弄清楚如何将我的文件提交到 GitHub。

我在 MAC 上使用 RubyMine 4.5

我在本地设置了 git

我在 GitHub 上有一个私人帐户

从 RubyMine Preferences 中，我正确设置了我的 GitHub 凭据（并被 RubyMine 确认），但它没有让我选择在 GitHub 上选择存储库。

如何将文件提交到 GitHub 存储库？RubyMine 中有太多的 CVS 和 Git 菜单项。

PS：我已经阅读了在线帮助部分（我唯一可用的内容），并且我按照 GitHub 集成中的说明进行操作，但是我尝试提交的目录无法推送到 GitHub，RubyMine 告诉我没有什么可承诺的。这是我第一次在 GitHub 上使用 RubyMine。StackOverflow 上没有这方面的内容。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T22:20:40.660

好的，我想我已经在本地重新创建了您的情况，并且 RubyMine 似乎对管理遥控器的支持很差。如果您在本地创建一个 Git 存储库，然后（单独）在 GitHub 上创建一个存储库，那么在 RubyMine 中没有明显的方法可以将两者结合起来。

基本上，您需要从 shell 将 GitHub 设置为本地存储库的远程，一旦完成，RubyMine 将能够正常推送。

***请注意，以下说明假设您想用本地存储库中的完整历史记录覆盖您的 GitHub 存储库——如果您的 GitHub 存储库有您不想丢失的数据，请不要执行这些命令！见下文。***

打开终端：

```
cd /path/to/my/project/root
git remote add origin https://github.com/yourusername/yourrepo.git
git push -u origin +master 
```

现在，RubyMine 应该能够通过`VCS > Git > Push`

如果您的 GitHub 存储库已经提交并且您不想丢失这些更改，则需要创建一个新的 GitHub 存储库或将您的 GitHub 存储库克隆到另一个文件夹并将您的本地存储库合并到克隆中。

如果您尝试将现有的本地存储库推送到**新**的GitHub 存储库，则可以完全避免这种情况：只需使用该`VCS > Import into Version Control > Share project on GitHub`选项并使用对话框创建新的 GitHub 存储库。

# android - 是否可以通过蓝牙将 Android 手机连接到 LMX9838？

> ID：11616377
> 
> 赞同：0
> 
> 时间：2012-07-23T16:13:57.433
> 
> 标签：android, bluetooth, file-transfer

我正在做一个课程项目。我们正在制作一块电路板，它有一个连接到基于 ARM 的 MCU 的 LMX9838 芯片。我想在 Android 上制作一个应用程序，使用智能手机上的蓝牙和 LMX9838 蓝牙控制器将智能手机连接到我们的开发板。我的应用程序将能够通过 LMX9838 从智能手机向 MCU 发送命令，它也能够在手机和 MCU 之间传输数据（例如文件）。

这就是我想做的。但是我想知道是否可以连接智能手机上的蓝牙和LMX9838蓝牙控制器？如果有可能，我该怎么做？我知道我的问题很不具体，但你们可以给我一些关于基本步骤的提示，拜托。因为我从未使用过蓝牙技术，所以我在这方面的经验几乎为零。

有人有什么建议吗？提前致谢！

# c# - 方法包含默认参数值

> ID：11616378
> 
> 赞同：1
> 
> 时间：2012-07-23T16:14:08.447
> 
> 标签：c#

我想用 2 个参数在 c# 中定义一个函数，它们有它们的默认值，比如

```
 public T AccessEntity(string Id = null, string File = null)
    {
        return (from e in ServiceContext.CreateQuery<T>(TableName)
                where e.RowKey == Id || e.File == File
                select e).FirstOrDefault();
    } 
```

现在使用这个函数，用户可以按文件或 id 搜索他们的记录，但是如果用户尝试按文件搜索记录，那么我们如何将第一个参数映射到第二个形式参数而不传递任何虚拟值作为第一个参数。

我不想要这个 ： `invokingobj.AccessEntity(null, "name of file");`

这可能吗 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T16:16:12.103

您可以使用[*命名参数*](http://msdn.microsoft.com/en-us/library/dd264739.aspx)：

```
invokingobj.AccessEntity(File: "name of file") 
```

请注意，您*应该*将参数重命名为`file`，以符合[正常的 .NET 命名约定](http://msdn.microsoft.com/en-us/library/ms229004.aspx)（“在参数名称中使用驼峰大小写”）。

顺便说一句，几乎每个人（包括 MSDN）都对这里的两个默认值的名称感到困惑。它们是可选*参数*（它是用默认值修饰的参数）但命名*参数*（参数总是有名称 - 它是允许在 C# 4 中指定名称的参数）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T16:16:04.227

您可以使用命名~~参数~~参数调用该方法：

```
invokingobj.AccessEntity(File: "name of file"); 
```

有关使用命名参数和可选参数的更多信息，请参见：

[命名和可选参数（C# 编程指南）](http://msdn.microsoft.com/en-us/library/dd264739.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T16:16:12.917

> *我不想要这个 ：`invokingobj.AccessEntity(null, "name of file");`*

你不必 - 你可以这样做：

```
invokingobj.AccessEntity(File:"name of file"); 
```

您可以使用*命名参数*功能*定义*调用函数时要设置的参数

 ** * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T16:17:17.673

使用[命名参数](http://msdn.microsoft.com/en-us/library/dd264739.aspx)：

```
invokingObj.AccessEntity(file: "name of file"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T16:17:02.317

是的，试试这个：

```
 invokingobj.AccessEntity(File: "name of file"); 
```

这种语言特性称为“命名参数”，是众所周知的“可选参数”的扩展。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T16:18:00.453

一种选择是创建几种不同的方法。（如果参数有不同的类型，你可以有不同的重载，但因为它们都是`string`你不能。）

```
public T AccessEntityById(string Id)
{
    return AccessEntity(Id, null);
}

public T AccessEntityByFile(string file)
{
    return AccessEntity(null, file);
} 
```*

# c++ - C ++如何在获取其索引位置后获取子字符串

> ID：11616379
> 
> 赞同：2
> 
> 时间：2012-07-23T16:14:08.433
> 
> 标签：c++

我正在尝试解析[此页面](http://sg.finance.yahoo.com/q?s=USDSGD=X)！

```
string str2 ("<span class=\"time_rtq_ticker\"><span id=\"yfs_l10_usdsgd=x\">");
  size_t found;

  // different member versions of find in the same order as above:
  found=sdata.find(str2);
  if (found!=string::npos)
    cout << "first 'needle' found at: " << int(found) << endl; 
```

在我获得模式的“针”位置后如何获得货币汇率，我希望它在之后停止解析

对不起，我这样做是为了我的一个小项目，不是商业的，只是一些小作品

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T16:16:53.277

雅虎不为此提供网络服务吗？这会更简单。检查这个：

[http://developer.yahoo.com/finance/company.html](http://developer.yahoo.com/finance/company.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T18:17:58.233

`std::string.substr(pos,npos)`会给你`std::string`from pos （`found`在你的情况下）长度`npos`。要找出长度，您可能需要查找字符串“<”（下一个 html 标记的开头）并减去。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T16:23:18.420

我认为您应该使用 @Adel Boutros 所说的 Yahoo Finance 提供的 API，或者如果您想自己解析这样的事情，您至少应该使用完整的 HTML 解析器类。

有很多变化，但本质上，它们会读取标签并为您提供数据内容 - 您只需要添加一些处理程序来捕获您感兴趣的标签。每个解析器的工作方式略有不同，并且在速度或简单性方面具有不同的优势，但它们非常直截了当，并且会更加...稳定？比你在做什么。

这是关于选择 C++ HTML 解析器的一个有趣的 SO（但它看起来不稳定）。就个人而言，我只是对 python 进行外部调用来解析它，或者制作一个小的 java EXE，你可以调用它来将下载的网页解析为更可用的格式（我更喜欢 python，但更多人知道 Java 和它'也会工作）。

[https://stackoverflow.com/questions/489522/library-recommendation-c-html-parser](https://stackoverflow.com/questions/489522/library-recommendation-c-html-parser)

# database - 哪个更适合可扩展性多个数据库或 NoSql？

> ID：11616382
> 
> 赞同：-1
> 
> 时间：2012-07-23T16:14:15.430
> 
> 标签：database, oracle, web-applications, nosql, scalability

对于使用 Oracle 数据库构建的现有 Web 应用程序，有哪些可用选项可用于水平扩展。几个想法是：

1.  有多个数据库和多个应用程序服务器，每个都连接到不同的数据库和一个具有自己数据库的控制器应用程序，其作用是决定将哪个请求发送到哪个服务器。挑战包括在需要时将现有数据从一个数据库移动到另一个数据库，以便在多个数据库上平均分配负载。还保持所有数据库上的所有公共数据与控制器数据库同步。
2.  转移到 NoSql
3.  任何其他？请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T16:39:31.273

水平扩展 Oracle 数据库的标准方法是使用[Oracle Real Application Clusters (RAC)](http://www.oracle.com/technetwork/products/clustering/overview/index.html)。RAC 允许您在共享文件系统（即 NAS 或 SAN）上拥有单个数据库，该文件系统由同时在多个不同数据库服务器上运行的多个不同实例安装。Oracle 负责使各个节点的缓存中的数据保持同步。

如果您使用的是 Oracle 企业版，RAC 是一个额外费用的选项（您需要与您的 Oracle 销售代表交谈以获得报价）。RAC 包含在标准版中（尽管您可以在标准版 RAC 集群中拥有的机器数量和大小是有限的）。

# hibernate - Hibernate JPA 继承的 id 映射

> ID：11616389
> 
> 赞同：0
> 
> 时间：2012-07-23T16:14:53.383
> 
> 标签：hibernate, inheritance, annotations

首先，我对 JPA 和 Hibernate Annotations 非常陌生。

我在当前框架中开发了许多系统和解决方案，这些框架基于数据访问层上的 hibernate 3.5 和 hbm.xml。现在我决定迁移到 hibernate 4.1 和 Annotation 并摆脱 hbm.xml 文件。

但是我的问题来了。

我的所有实体都有一个名为 GenericEntity 的基类，其中包含“id”和其他一些字段（如“version”和...）。此 GenericEntity**不**直接映射到任何物理表，每个实体负责将这些字段映射到物理表/列。

现在在注释中，我找不到任何方法来省略实体中的 id 和版本字段/注释

这是我所拥有的：

```
public abstract class GenericEntity implements Serializable {

    public static final short UNSAVED_VALUE = -1;

    private long id = UNSAVED_VALUE;
    private int version;

    ... getters and setters
}

public class User extends GenericEntity {

    private String username;
    private String password;
    ... getters and setters
} 
```

而 hbm.xml 是

```
<class name="my.User" table="TBL_USER" optimistic-lock="version">
    <id name="id" column="USR_ID" unsaved-value="-1">
        <generator class="identity"/>
    </id>

    <version name="version" column="USR_VERSION"/>
    <property name="username" column="USR_USERNAME" type="string" />
    <property name="password" column="USR_PASSWORD" type="string" />
</class> 
```

GenericEntity 没有映射，用户也没有关于 GenericEntity 的继承映射。

我怎么能用注释做到这一点？！

一个解决方案是将 getId 和 setId 定义为抽象方法，但我无法将 id 和 version 添加到我的数万个实体中。

另外，我不能对 GenericEntity 使用休眠继承。因为，我不能轻易更改我当前的表，另一方面它会为性能付出很多代价。

另外，我想尽量减少对框架其他部分的更改。GenericEntity 在 DAL 中被广泛使用。

谢谢

梅萨姆特。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T16:45:18.300

您只需用 GenericEntity 类注释`@MappedSuperclass`，每个实体用`@AttributeOverride(s)`.

注释的 javadoc 解释了它。

# android - Android RelativeLayout 重叠

> ID：11616390
> 
> 赞同：1
> 
> 时间：2012-07-23T16:14:56.170
> 
> 标签：android

我在 android 中有一个聊天应用程序的相对布局。问题是我屏幕上的列表视图在增长最后一个元素时隐藏在我放置在底部的文本框和按钮后面。

![在此处输入图像描述](../Images/d67fa542eb1c984a3b93acdb01d91d8c.png)

我正在使用以下布局文件。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >
<LinearLayout     
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView android:id="@+id/PreviousChatsButton"
      android:padding="5dip"
      android:text="@string/ViewPreviousChats"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:gravity="center_horizontal"
      android:focusable="true"
      >
</TextView>

<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
/>

</LinearLayout>

<TextView android:id="@+id/NoChatsMsg"
          android:layout_centerHorizontal="true"
          android:layout_centerVertical="true"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:text="@string/NoNewChatMsg"
          />
<Button
    android:id="@+id/SubmitButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:text="@string/Submit"
    android:onClick="SubmitButtonClick" />

<EditText
    android:id="@+id/Chatbox"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@id/SubmitButton"
    android:layout_alignBottom="@id/SubmitButton"
    android:layout_alignParentLeft="true"
    android:layout_toLeftOf="@id/SubmitButton"
    android:ems="10"
    android:inputType="text" >
</EditText>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T16:19:01.260

你想做的是`LinearLayout`确保`android:layout_above="@+id/Chatbox"`它不会低于它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T16:20:06.223

//试试这对我来说工作正常

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/PreviousChatsButton"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:focusable="true"
        android:gravity="center_horizontal"
        android:padding="5dip"
        android:text="ViewPreviousChats" >
    </TextView>

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="0dp" 
        android:layout_weight="1"/>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/NoChatsMsg"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:text="@string/NoNewChatMsg" />

        <Button
            android:id="@+id/SubmitButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true"
            android:onClick="SubmitButtonClick"
            android:text="@string/Submit" />

        <EditText
            android:id="@+id/Chatbox"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@id/SubmitButton"
            android:layout_alignBottom="@id/SubmitButton"
            android:layout_alignParentLeft="true"
            android:layout_toLeftOf="@id/SubmitButton"
            android:ems="10"
            android:inputType="text" >
        </EditText>
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T16:20:57.390

用于[`android:layout_above`](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html#attr_android%3alayout_above)避免此问题：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

    <Button
        android:id="@+id/SubmitButton" ... />

    <LinearLayout     
         android:layout_above="@id/SubmitButton" ... >
         ...
    </LinearLayout> 
```

请注意，您必须在 LinearLayout 之前声明您的按钮才能正常工作。

# jquery - flexigrid 是否有任何主题？

> ID：11616392
> 
> 赞同：1
> 
> 时间：2012-07-23T16:14:59.807
> 
> 标签：jquery, flexigrid

除了默认主题之外，flexigrid 还有其他主题吗？

更改默认 flexigrid 主题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T23:18:46.707

看看这里： [http ://www.flexigrid-asp.net/demo/skinning.aspx](http://www.flexigrid-asp.net/demo/skinning.aspx)

在这里： [http ://www.grocerycrud.com/forums/topic/117-share-your-themes/](http://www.grocerycrud.com/forums/topic/117-share-your-themes/)

可以通过更改 flexigrid.css 文件和一些图像来完成上面示例中的简单主题化。

如果您的要求更复杂，那么您将需要更深入地研究 flexigrid 代码。

# wordpress - Wordpress - 用户图像未在 li 标签内输出

> ID：11616399
> 
> 赞同：-1
> 
> 时间：2012-07-23T16:15:24.010
> 
> 标签：wordpress

我试图在 jquery 轮播中显示我网站的作者，但由于某种原因，我的图像输出时带有`li`标签，我不知道为什么。

**代码**

`functions.php`

```
function contributors() {
    global $wpdb;

    $authors = $wpdb->get_results("SELECT ID, user_nicename from $wpdb->users ORDER BY display_name");

    foreach($authors as $author) {
        // display user image for each author
        echo '<li class="author" id="author-'.$author->ID.'">'.userphoto($author->ID).'</li>';
    }
} 
```

**模板文件**

```
<?php while ( have_posts() ) : the_post(); ?>

    <div id="authorlist"><ul id="authorcarousel"><?php contributors(); ?></ul></div>

<?php endwhile; // end of the loop. ?> 
```

**输出**

```
<div id="authorlist">
    <ul id="authorcarousel">
        <img src="/wordpress/wp-content/uploads/userphoto/1.jpg" alt="admin" width="143" height="150" class="photo" />
        <li class="author" id="author-1"></li>
        <img src="/wordpress/wp-content/uploads/userphoto/3.png" alt="" width="128" height="128" class="photo" />
        <li class="author" id="author-3"></li>
        <img src="/wordpress/wp-content/uploads/userphoto/2.png" alt="" width="128" height="128" class="photo" />
        <li class="author" id="author-2"></li>
    </ul>
</div> 
```

我的目标是在`li`标签之间输出的图像。

如果有人知道答案，这是一个额外的问题 - 如何编辑查询以便只显示作者而不显示站点管理员？我尝试`WHERE`在查询中添加一个子句，但它不起作用。

非常感谢任何帮助，因为我是 WordPress n00b。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:06:35.847

该`userphoto`函数回显图像 HTML，而不是返回它。因此，请尝试以下操作：

```
foreach($authors as $author) {
    echo '<li class="author" id="author-'.$author->ID.'">';
    userphoto($author->ID);
    echo '</li>';
} 
```

# apache-flex - Flex 3 中带标题的 GroubBox

> ID：11616401
> 
> 赞同：1
> 
> 时间：2012-07-23T16:15:31.903
> 
> 标签：apache-flex, flex3, adobe, panel, groupbox

我需要在 flex 3 中有一个组框 - 简单的边框，顶部有一个标题，但顶部的标题不应该有任何边框线穿过它。

我在网上搜索，我能得到的最接近的来源是

[http://keg.cs.uvic.ca/flexdevtips/titledborder/srcview/](http://keg.cs.uvic.ca/flexdevtips/titledborder/srcview/)

但问题是我无法在设计模式下查看组框上的内容。有谁知道如何解决这一问题？

然后我决定使用画布和输入框

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" xmlns:local="*">
<mx:TextInput 
        text="This should be my label" 
        x="124" y="72" 
        width="166" height="32" 
        borderStyle="solid" 
        fontWeight="bold" 
        color="#003366" backgroundColor="#D81010"/>

<mx:Canvas x="107" y="88" width="263" height="200" borderStyle="solid" label="Testst">
</mx:Canvas>            
</mx:Application> 
```

但我似乎无法让 Textinput 位于画布之上。有一条线穿过盒子，如下图所示

![在此处输入图像描述](../Images/5e0ed0f8fdb4ef4a912a4bb7d9637d0c.png)

有谁知道如何解决这个问题或有更好的主意？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:21:03.007

您正在寻找的是与 HTML 中的“fieldset”等效的组件。使用创建组件来更好地控制样式会更容易。对于 Flex 2/3，您可以使用[jwopitz-lib](http://code.google.com/p/jwopitz-lib/)；但如果您可以使用 Flex 4 或更高版本，请尝试使用[ShinyLib](http://blog.devinholloway.com/2012/03/flex-fieldset-component.html)组件（特别是[FieldSet 类](https://www.assembla.com/code/shinylib/subversion/nodes/trunk/src/com/shinynet/shinylib/components/FieldSet.as)和[FieldSet 外观](https://www.assembla.com/code/shinylib/subversion/nodes/trunk/src/com/shinynet/shinylib/skins/FieldSetSkin.mxml)）。如果您可以将应用程序迁移到 Flex 4 或最新的 Flex 会更容易，您会接触到更多的组件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T16:41:47.043

要使自定义组件在设计模式下工作，您需要将代码编译到 SWC 库中。然后在您的应用程序项目中引用 SWC 库。我从来没有费心去做这件事，我想你可能会得到好坏参半的结果。5 年多来我没有打扰过设计模式 :)

“窗口”组件（在您在问题中链接到的 URL 中）在设计模式下工作的原因是它扩展了 Flex 组件`TitleWindow`。由于它扩展了现有的 Flex 组件，我假设设计模式知道如何呈现它。

# objective-c - 带有 resizableImage 选项的 UIImage

> ID：11616403
> 
> 赞同：1
> 
> 时间：2012-07-23T16:15:35.157
> 
> 标签：objective-c, ios, uiimage

我想将图像设置为按钮的背景。所以我创建了一个图像：

![按钮](../Images/e558acb9b5e6e619158eae4a402b12f6.png)

然后我想将它实现为可拉伸的：

```
UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(20, 20, 200, 400)];  
[button setTitle:@"Test Button" forState:UIControlStateNormal];

UIImage *buttonImage = [_model.background resizableImageWithCapInsets:UIEdgeInsetsMake(6, 8, 6, 7)]; //this is screen 1
//UIImage *buttonImage = _model.background; //this is screen 2   

[button addTarget:self action:@selector(buttonPressed:) forControlEvents: UIControlEventTouchUpInside];        
[button setBackgroundImage:buttonImage forState:UIControlStateNormal];
[self addSubview:button]; 
```

我想像在屏幕 2 中一样进行背景拉伸，但角落会像屏幕 1 一样锐利。_model.background 是 UIImage 包含来自这篇文章顶部的原始按钮背景。

![屏幕一](../Images/325b73c89374c111f0c11a628d3c6d03.png) ![屏幕 2](../Images/3ae61745b030937f88af1c06b6776aee.png)

我用对了吗？我遵循文档，所以`UIEdgeInsetsMake(top,left,bottom,right)`应该是不可触及的角落，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T16:33:32.023

根据文档，插图内的部分（未通过帽设置锁定的部分）是*tiled*。所以你应该有一个小的 1 像素区域来平铺。例如，使插图成为`UIEdgeIndetsMake(20,8,19,7)`

这会产生：

![在此处输入图像描述](../Images/5f5451747f9b6c1b406df0705fd7954e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T16:29:09.287

老实说，这不是这种效果的最佳图片，但请试试这条线：

```
[button setBackgroundImage:[[UIImage imageNamed:@"image.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(20.f, 62.f, 20.f, 62.f)] forState:UIControlStateNormal]; 
```

# c# - Windows 窗体中的 Gif

> ID：11616406
> 
> 赞同：2
> 
> 时间：2012-07-23T16:15:41.303
> 
> 标签：c#, winforms, multithreading, gif

我正在构建一个操作文本文件的 Windows 窗体应用程序，操作过程需要时间，所以我创建了一个隐藏的 PictureBox 控件，并在其中放置了一个动画 gif 图像（如进度条），一旦该过程开始，我将显示PictureBox，但 gif 不动，因为我猜它在同一个过程中，有什么解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T16:20:32.473

您应该在另一个线程中进行长时间处理，或者只是使用后台工作人员。

msdn：http: [//msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

另外，您可以向进度条报告任何进度...这是使用示例[http://msdn.microsoft.com/en-us/library/cc221403(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/cc221403(v=vs.95).aspx)

请注意，当您进行繁重的计算时，您的 GUI 不会更新的主要原因之一是计算是在与运行的 UI 相同的线程上完成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T16:22:04.180

一种解决方案是使用线程，您在一个线程中触发了 tle 进程，然后显示图像...在这里，您有一个优秀的线程[初学者指南，](http://www.codeproject.com/Articles/26148/Beginners-Guide-to-Threading-in-NET-Part-1-of-n)线程初学者指南。

但另一个简单的解决方案是在进程启动之前显示图片框，因此在进程控制主线程之前，图片会显示在您的窗体中。

# asp.net - 是否可以在纸上为各种负载制作服务器/SQL 性能原型？

> ID：11616420
> 
> 赞同：0
> 
> 时间：2012-07-23T16:16:35.007
> 
> 标签：asp.net, sql-server-2008-r2, sql-server-2012

我正在尝试确定一个 Web 开发项目目前是否可行，并且到目前为止已经了解到拟议数据库的总行数（3000 万行、5 列和大约 3 GB 的存储空间）完全在预算范围内在存储要求方面，但由于预期用户将对数据库进行大量查询，我不确定这是否会导致管理不切实际的负载以使服务器提供足够的性能（在我的预算范围内）。

我将使用这个网格（300,000 行性能基准的现场演示 - [http://demos.telerik.com/aspnet-ajax/grid/examples/performance/linq/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/grid/examples/performance/linq/defaultcs.aspx)）。在“产品名称”框中插入搜索词并按 Enter 从查询到结果呈现需要 1.6 秒。在我（一个新手）看来，总共需要 1.6 秒的 300,000 行必须用 3000 万行花费更长的时间，所以我试图弄清楚

*   增加的行数会增加多少，达到 3000 万行
*   同时使用搜索网格的每增加 1000 人会增加多少时间。
*   需要哪些硬件要求才能将延迟降低到可接受的水平

希望如果我能弄清楚这一点，我可以对可行性进行更现实的评估。仅供参考：数据库不需要非常定期地更新，它更多的是用于只读目的。

对于这 3 点，这个问题可以在纸上原型吗？

*即使是广泛的球场估计——在不考虑优化的情况下，我是在说 5000 名用户的搜索时间低于 10 秒的数百美元、数千美元还是数万美元？*

[将是用于 AJAX Grid 的 asp.net RadControls，这些云托管服务器之一：4,096MB RAM 160GB 磁盘空间，以及 Microsoft® SQL Server® 2008 R2 和 SQL Server 2012]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T16:53:57.253

> 数据库不需要非常定期地更新，它更多地用于只读目的。

您的搜索过滤器允许子字符串搜索，因此数据库索引不会帮助您，搜索将逐行进行。

看起来您的数据可能适合 5GB 左右的内存。我会将整个内容存储在内存中并在那里搜索。

# extjs - 如何编辑具有另一个对象作为属性的记录

> ID：11616421
> 
> 赞同：0
> 
> 时间：2012-07-23T16:16:40.203
> 
> 标签：extjs

我正在使用 ExtJs 开发应用程序，其中一个功能是编辑已保存的记录。有一个网格，我可以在其中选择要编辑的行，然后会出现一个面板，其中包含要编辑的信息。但是其中一个可以编辑的属性是我系统的另一个对象，叫做一个配置，这个配置有一个id，在你编辑注册表的时候加载。问题是，当我单击允许您编辑的网格图标时，第一次检索到 id，第二次 id 不再出现，第三次显示以下错误：'

```
Uncaught TypeError: Cannot read property 'id' of undefined Grid.js:36
Ext.define.columns.items.handler Grid.js:36
Ext.define.processEvent 
Ext.define.processEvent Table.js:755
fire ext-debug.js:8583
Ext.define.continueFireEvent Observable.js:352
Ext.define.fireEvent Observable.js:323
Ext.override.fireEvent EventBus.js:22
Ext.define.processItemEvent Table.js:844
Ext.define.processUIEvent View.js:475
Ext.define.handleEvent View.js:404
(anonymous function)
Ext.apply.createListenerWrap.wrap 
```

我的代码是（当我单击编辑图标时）：

```
icon : Webapp.icon('editar.png'),
tooltip : 'Editar',
handler: function(view, rowIndex, colIndex, item, e) {                      
var record = Ext.getStore('EstacaoStore').getAt(rowIndex);
var form = Ext.create('PanelNovaEstacao');
record.set('modoIgnorar', record.data.modoIgnorar); 
record.set('latitude', record.data.latitude);   
record.set('longitude', record.data.longitude);
record.set('reiniciar', record.data.reiniciar);             
record.set('configuracaoCombo', record.data.configuracao.id);
record.set('ativar', record.data.ativar);
record.set('tipoColetor', record.data.tipoColetor);
form.loadRecord(record);
Ext.create('Ext.window.Window', {
title : 'Cadastro',
layout : 'fit',
modal : true,
width : 500,
height : 350,
items : [ form ]
}).show(); 
```

'PanelNovaEstacao' 代码是：

```
Ext.define('PanelNovaEstacao', {
extend : 'Ext.form.Panel',
title : 'Painel',
initComponent : function() {

    var combo = Ext.create('ComboBoxConfiguration', {
                name : 'configuracao'
            });

    Ext.apply(this, {
        bodyPadding : '10 0 0 10',
        items : [ {
            xtype : 'hiddenfield',
            name : 'id'
        }, {
            xtype : 'hiddenfield',
            name : 'numeroSerieAntigo'
        }, {
            xtype : 'numberfield',
            fieldLabel : 'Número de série',
            name : 'numeroSerie',
            minValue : 0,
            allowBlank : false
        }, combo
        {
            xtype: 'numberfield',
            fieldLabel: 'Latitude',
            name: 'latitude'
        }, {
            xtype: 'numberfield',
            fieldLabel: 'Longitude',
            name: 'longitude'
        },{
            xtype: 'radiogroup',
            fieldLabel : 'Estado',
            items : [ {
                boxLabel : 'Ativo',
                inputValue : true,
                checked: true,
                name : 'ativar'
            }, {
                boxLabel : 'Inativo',
                inputValue : false,
                name : 'ativar'
            } ]
        }, {
            xtype : 'checkbox',
            fieldLabel : 'Modo ignorar',
            name : 'modoIgnorar'
        }, {
            xtype : 'checkbox',
            fieldLabel : 'Reiniciar',
            name : 'reiniciar'
        }, {
            xtype : 'button',
            text : 'Salvar',
            textAlign : 'center',
            action : 'salvar'
        } ]
    });

    this.callParent(arguments);
} 
```

});

ComBox配置代码：

```
Ext.define('ComboBoxConfiguration', {
extend : 'Ext.form.ComboBox',
store : 'ConfiguracaoStore',
fieldLabel : 'Configurações',
displayField : 'id' 
```

});

有谁知道可能会发生什么？？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:32:13.353

This line is likely causing the issue: `record.set('configuracaoCombo', record.data.configuracao.id);`

The data that is coming back from the proxy does not have a `configuracao` property, so accessing it evaluates to `undefined`, at which point trying to access the sub-property `id` will lead to the error you are seeing.

Take a look at the data in the `EstacaoStore` and what's being returned by the store's proxy (or however you load it). You'll likely find a problem there.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:09:15.873

When I click in line and run the code: var record = Ext.getStore('EstacaoStore').getAt(rowIndex); console.log(record); The object that return is: (configuracao is synonymous to configuracaoEstacao)

![enter image description here](../Images/ae16c2388d5952c8465f096d5d7f3a11.png)

# php - PHP 或 Apache 似乎正在缓存通过 file_get_contents 或 include 读取的文件（不需要的行为）

> ID：11616427
> 
> 赞同：3
> 
> 时间：2012-07-23T16:16:53.743
> 
> 标签：php, apache, behavior

我们的 Web 应用程序具有在每个请求时提供给客户端的版本号，因此我们可以检测到代码的更新（即滚动更新）并显示一个弹出窗口，通知他们重新加载以利用最新更新。

但是我在服务器上更新版本号后遇到了一些奇怪的行为，有些请求返回新版本号，有些返回旧版本号，因此弹出窗口不断弹出，直到您重新加载页面几次。

最初我怀疑也许 apache 正在缓存它通过 file_get_contents 从磁盘读取的文件，所以我现在将它存储在一个包含在每个请求中的 php 文件中，而不是将版本号存储在一个纯文本文件中，但我遇到的情况完全相同问题！

任何人有任何想法可能会导致 apache 或 php 在我完成更新后自行提供旧信息吗？

编辑：我已经确认它不是浏览器缓存，因为我可以让客户端生成唯一的 url 到服务器（它可以通过重写来处理），我仍然看到同样的问题，一些请求返回旧版本号和一些新版本号，并且清除浏览器缓存无济于事

编辑 2：请求的响应标头

```
HTTP/1.1 200 OK
Date: Mon, 23 Jul 2012 16:50:53 GMT
Server: Apache/2.2.14 (Ubuntu)
X-Powered-By: PHP/5.3.2-1ubuntu4.7
Cache-Control: no-cache, must-revalidate
Pragma: no-cache
Expires: Sat, 26 Jul 1997 05:00:00 GMT
Vary: Accept-Encoding
Content-Encoding: gzip
Content-Length: 500
Connection: close
Content-Type: text/html 
```

编辑 3：因此尝试重现以获取响应标头，我发现我只能通过我们的完整部署过程来实现它，该过程涉及创建存储代码的版本化文件夹并将相关文件夹符号链接到 webroot 中。仅仅改变版本号是不够的！所以似乎与我创建的符号链接有某种关系！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T16:05:47.120

当符号链接发生变化时，我遇到了同样的问题。看看[https://bugs.php.net/bug.php?id=36555](https://bugs.php.net/bug.php?id=36555)这也许就是你要找的。

尝试（如本错误报告中所述）将 realpath_cache_size 设置为 0。

# asp.net - 使用 ASP.net Web App 访问托管在客户端 PC 上的 Web 服务

> ID：11616428
> 
> 赞同：0
> 
> 时间：2012-07-23T16:16:55.333
> 
> 标签：asp.net, web-services, c#-4.0, web-applications, client-server

我有一台可以访问我的网站 (CRM) 的客户端电脑。客户端 PC 将 API 工具包作为后台服务运行，并通过 SOAP 调用进行访问，只需标准 Web 参考和一些服务器端方法来调用 API 工具包的方法就可以了。

在我的本地 IIS 上运行 Web 应用程序时，一切都很好。web.config 中的引用将地址指向 localhost:8080，这是服务器的地址。为所有客户端提供具有动态服务 url 的自定义 web.config 不是一种选择。我尝试设置 url 属性，以便在启动 Web 应用程序时检索客户端计算机的主机名并更改服务引用的 url 属性，但是，这只有在所有计算机都在公司域上时才有效。以下参考资料适用于我的本地电脑，当从服务器而不是我的本地开发 IIS 运行时，手动将其更改为我的主机名失败。

```
<applicationSettings>
<CRMIntegration.Properties.Settings>
  <setting name="CRMIntegration_AgentBridgeService_WebserviceAgentBridgeService"
    serializeAs="String">
    <value>http://localhost:8080/AgentBridge</value>
  </setting>
</CRMIntegration.Properties.Settings> 
```

尽管有几种不同的方法尝试将服务映射到正确的客户端，但它仍然无法工作。

（我在想）：创建一个方法或函数来设置客户端 PC 的 Web 服务的正确路径，去掉 web.config 引用并编写一个扩展 Web 引用类来覆盖生成的 reference.cs 获取它的位置网址属性。

我已经看到几个 SaaS CRM 使用完全相同的 API 工具包完成此操作的示例，所以我知道它可以完成。在搜索了几天后，我不知道该往哪个方向看。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:08:50.943

解决方案比预期的要容易。我有两条路线：在 api 中使用带有 xml 的 jquery 或未记录的查询字符串。我选择了查询字符串，一切都很好。

# python - 检索和组合多个字典条目

> ID：11616441
> 
> 赞同：0
> 
> 时间：2012-07-23T16:17:47.513
> 
> 标签：python, parsing, dictionary

我有成对值的文件，如下所示：

```
123    456
84665   88
90  2339
2624    5371
6118    6774 
```

我还有一本字典，其中几个键包含多个值，由列表表示。例子：

```
{123: ['A1B1C1', '2X3P4T5O'], 456: ['C5H5J8F3', 'D3K21F9', 'F1N5NA3']} 
```

现在，我想要做的是，对于pairs 行中的每个条目（例如：`123`和`456`），获得这个：

```
A1B1C1 C5H5J8F3
A1B1C1 D3K21F9
A1B1C1 F1N5NA3
2X3P4T5O C5H5J8F
2X3P4T5O D3K21F9
2X3P4T5O F1N5NA3 
```

也就是说，将 123 键中的每个值与 456 键中的每个值组合在一起。有些键只有一个值，但其他键有多达 6 个。

我一直在处理这个：

```
for line in infile:
        lread += 1
        column = line.strip().split('\t')

        value1 = data.__getitem__(column[0])
        value2 = data.__getitem__(column[1])
        total1 = len(value1)
        total2 = len(value2)
        num1 = 0
        num2 = 0 
```

然后尝试使用 while 循环、for 循环以及 range(len()) 的各种组合，但无法做到我想要的。我很确定它是这样的，但由于我是编程新手，我似乎无法做到正确。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:21:47.850

两个嵌套的 for 循环应该做你想做的事：

```
for line in infile:
    columns = line.strip().split()
    for x in data[columns[0]]:
        for y in data[columns[1]]:
            print x, y 
```

根据您想要执行的操作，您还可以使用带有嵌套 for 循环的列表推导式或`itertools.product()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T16:26:34.417

您可以使用[列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)来执行此操作：

```
(a, b) = [data[x] for x in column]
values = [(x, y) for x in a for y in b] 
```

然后，值将是您想要的对的列表：

```
[('A1B1C1', 'C5H5J8F3'), ('A1B1C1', 'D3K21F9'), ('A1B1C1', 'F1N5NA3'), ('2X3P4T5O', 'C5H5J8F3'), ('2X3P4T5O', 'D3K21F9'), ('2X3P4T5O', 'F1N5NA3')] 
```

# ruby - 如何在 Windows 上安装 ruby -opengl？

> ID：11616443
> 
> 赞同：2
> 
> 时间：2012-07-23T16:17:49.667
> 
> 标签：ruby, windows, opengl, installation, rake

我在我的 windows7 x32 操作系统上有一个一键式 ruby​​ 安装。当尝试按照项目的说明[链接](http://ruby-opengl.rubyforge.org/)安装 ruby​​-opengl 时，无论我是从 ruby​​gems 安装还是手动构建，我都会收到以下错误：

“[dir]/lib/rake/gempackagetask 已弃用。请改用 ruby​​gems/package_task”

“[dir]/lib/mkrf/rakehelper.rb:44：使用 RbConfig 而不是过时和弃用的 Config。”

我尝试了几种解决方案，例如强制安装在 mswin 平台（--platform=mswin32）上，但没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:41:09.310

在 windows 平台上安装 ruby​​-opengl 的工作方法可以在这里找到：[线程](https://groups.google.com/forum/?fromgroups#!topic/rubyinstaller/vMR5mQVA_88)

我认为这可能会有所帮助，因为我花了一天多的时间寻找解决问题的线程，而修复实际上并不明显。

帖子中发布的修复可以总结如下：

[...

所以现在安装 ruby​​-opengl 是这样的（简而言之）：

*   安装 DevKit。

*   如果未安装，请安装 mkrf gem，然后对其应用 mingw 补丁。

*   下载ruby-opengl，以gem fetch为例，解压，修改一个c文件和三个mkrf_conf.rb

*   从解压缩的源代码构建 gem。gem 构建中有一个错误，它需要添加一个 require yaml（例如 ruby​​gems.rb）才能成功构建

*   在合适的地方添加glut.h和glut32.dll，我放在DevKit/mingw

*   最后 gem 安装重建的 gem

...]

# jquery - 用 jQuery 改变 img src

> ID：11616449
> 
> 赞同：1
> 
> 时间：2012-07-23T16:18:16.093
> 
> 标签：jquery

SO上有很多答案展示了如何在jQuery中使用.attr设置img src。由于某种原因，这不起作用。

```
<img id="imgMap" style="position:absolute;bottom:7px;right:7px;width:250px;height:250px;" />

<script>
$(function () {   
    $("#imgMap").attr( 'src', 'http://maps.googleapis.com/maps/api/staticmap?center=41.886456,-87.62325&zoom=14&size=250x250&sensor=false&markers=color:blue%7Clabel:S%7C41.886456,-87.62325');
});
</script> 
```

但是在 HTML 中内联的完全相同的 url 可以正常工作

```
<img id="imgMap2" runat="server" src="http://maps.googleapis.com/maps/api/staticmap?center=41.886456,-87.62325&zoom=14&size=250x250&sensor=false&markers=color:blue%7Clabel:S%7C41.886456,-87.62325" style="position:absolute;bottom:7px;right:7px;width:250px;height:250px;" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:24:48.783

这很好用：http: [//jsfiddle.net/ypDZw/](http://jsfiddle.net/ypDZw/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:07:46.453

你的代码对我来说很好，这里是链接：[jquery set attribute value](https://dl.dropbox.com/u/37250691/stackoverflow/jqueryimgattribute.html)

# perl - 从 perl 脚本执行命令失败

> ID：11616454
> 
> 赞同：1
> 
> 时间：2012-07-23T16:18:31.357
> 
> 标签：perl

$ssh 是 Net::SSH::Expect 对象。场景就像，从我的本地机器我需要 ssh 到测试服务器。从测试服务器我可以 ssh 到其他被测服务器并执行命令。所以 $ssh 句柄用于测试服务器。现在从测试服务器我正在对其他机器执行 ssh 并执行 mkexport。

```
 while($no_of_exports)
{
    my $share_name = &get_share_name();
    my $path="$fs" . "$share_name";

    $cmd="ssh mgmt001st001 mkexport $share_name $path --nfs \"*\\(rw,no_root_squash\\)\"";
    print "CMD: $cmd";
    $out=$ssh->exec("$cmd");
    print $out;
    --$no_of_exports;
}

 Output : 
  [root@ganesha36 ~]# 
  CMD: ssh mgmt001st001 mkexport kas142818597 /ibm/gpfs0/kas142818597 --nfs "*\(rw,no_root_squash\)"
 97 --nfs "*\(rw,no_rxport kas142818597 /ibm/gpfs0/kas1428185 
```

perl 脚本的命令执行失败但是当我从命令行运行相同的命令时它通过了：以下是我直接从测试服务器执行的相同命令。

```
 [root@ganesha36 ~]#  ssh mgmt001st001 mkexport kas327134640 /ibm/gpfs0/kas327134640        --nfs "*\(rw,no_root_squash\)"
  EFSSG0019I The export kas327134640 has been successfully created. 
```

# EFSSG1000I 命令成功完成。

以下是脚本中的行：

```
$cmd='ssh mgmt001st001 mkexport ' . $share_name . ' ' . $path . ' --nfs \'' . '\\*' . '\\(rw,no_root_squash\\)\'';
print "CMD: $cmd";
$out=$ssh->exec("$cmd");
print $out; 
```

这是输出：

```
CMD: ssh mgmt001st001 mkexport kas522199075 /ibm/gpfs0/kas522199075 --nfs '\*\(rw,no_root_squash\)'
75 --nfs '\*\(rw,no_xport kas522199075 /ibm/gpfs0/kas5221990 
> root_squash\)'
 EFSSF1156A An error occurred in NFS configuration. The client syntax cannot be parsed.     See "man exports" for help. Cause: *(rw,no_
bash: line 1: root_squash): command not found 
```

* * *

我已将 * 更改为客户端名称工作正常...但是 * 有什么问题

```
$cmd='ssh mgmt001st001 mkexport ' . $share_name . ' ' . $path . ' --nfs "' . 'client002' . '\\\\(rw,no_root_squash\\)"';
print "CMD: $cmd";
$out=$ssh->exec("$cmd");
print $out;

CMD: ssh mgmt001st001 mkexport kas482978105 /ibm/gpfs0/kas482978105 --nfs "client002\\(rw,no_root_squash\)"
05 --nfs "client002\xport kas482978105 /ibm/gpfs0/kas4829781 
> \(rw,no_root_squash\)"
EFSSG0019I The export kas482978105 has been successfully created.
EFSSG1000I The command completed successfully. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:17:49.577

假设`$ssh`是一个 Net::SSH::Expect 对象，你`mkexport`在命令行版本的远程主机上执行，但你`ssh`在 Perl 版本的远程主机上执行。这反过来又会导致由于未转义的`*`.

*   去除多余的`ssh mgmt001st001`。
*   `\\`在前面加上`*`。

# php - 自动重新生成 PHP 会话 ID

> ID：11616455
> 
> 赞同：2
> 
> 时间：2012-07-23T16:18:32.213
> 
> 标签：php, session, session-cookies

我发现在我的简单 Web 应用程序中，如果您将页面放置超过 5 分钟，然后重新加载页面，则第二次调用 session_id() 将返回不同的值。用户保持登录状态，因此会话数据被移动到新 ID，但我根据会话 ID 跟踪 MySQL 数据库中的购物车项目，当 ID 更改时，与购物车项目的关联丢失。

我的代码中没有任何地方调用过 session_regenerate_id()

帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-02T08:39:52.863

如果遇到这种情况，您可能还想检查几件事，并且您确实使用了 session_name()：

1.  来自[PHP 在线手册](http://au1.php.net/manual/en/function.session-name.php)：

> 警告！**会话名称不能仅由数字组成**，必须至少包含一个字母。

2.  确保您的 session_name() 参数中没有空格，例如

> **session_name('废话')**

这两种情况都会强制每次生成一个新的会话 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T17:54:11.957

您可能需要检查您的代码，看看您是否正在使用带有参数的 session_id()，因为这也会更改会话 ID。如果不查看代码，很难具体说明修复或知道出了什么问题。

# asp.net-mvc-4 - GAC中的asp.net web api系统dll？

> ID：11616456
> 
> 赞同：1
> 
> 时间：2012-07-23T16:18:34.893
> 
> 标签：asp.net-mvc-4, asp.net-web-api, gac

当我创建 ASP.NET Web API 项目时，它引用了存储在包文件夹中的所有系统 dll。当我将它部署到生产环境时，我可以在 GAC 中删除这些 dll 吗？当我停止asp.net MVC 4时，我不知道为什么那些系统dll还没有安装在GAC中。他们是否正在放弃在GAC中安装DLL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T05:27:40.080

不，不要将这些 DLL 部署到 GAC。

看到这个答案：[https ://stackoverflow.com/a/2451201/48082](https://stackoverflow.com/a/2451201/48082)

将这些 DLL 部署到您的应用程序 bin 目录。

# django - Django .. 注册不同类型的用户并处理他们的相关视图

> ID：11616457
> 
> 赞同：0
> 
> 时间：2012-07-23T16:18:40.350
> 
> 标签：django, django-models, django-views, django-authentication

我想了一会儿。我至少有两个演员/角色。“学生”和“导师”。到目前为止，我所做的是做出这样的选择字段：

```
 class UserProfile(UserenaBaseProfile):

        Roles = [('Student' , 'Student') , ('Tutor' , 'Tutor')]
        ..
        role = models.CharField(max_length = 20 , choices = actor_type , blank = True , null = True) 
```

现在我被困在如何在视图中划分它们！

有一种方法可以`user_passes_test`在视图上使用，但我也不知道如何制作组？！

如果我只有一个学生，我可以这样做：

```
class Student(UserProfile):
    """ 
    The Student actor and its necessary fields
    """

    courses        = models.ManyToManyField('courses.Course' , null = True, blank = True, related_name = _('student') , through = 'Registration')

    class Meta:
        verbose_name = _("Student")
        verbose_name_plural = _("Students")

    def save(self , *args , **kwargs):
        super(Student , self).save(*args , **kwargs)

        user, created = User.objects.get_or_create(username=self.username)
        group , created = Group.objects.get_or_create(name = "Student")
        if created: group.save()
        user.groups.add(group)
        user.save() 
```

您能否告诉我有关如何执行此操作的详细答案：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:22:32.957

```
@user_passes_test(lambda u: u.groups.filter(name='Student').exists())
def my_student_only_view(request):
    ... 
```

**更新**

如果您想使用`Student`自动过滤到“学生”组中的用户并自动将用户保存到该组的实际类，请使用代理模型和 subclass `User`，而不是`UserProfile`：

```
class StudentManager(models.Manager):
    def get_query_set(self, *args, **kwargs):
        qs = super(StudentManager, self).get_query_set(*args, **kwargs)
        return qs.filter(groups__name='Student')

class Student(User):
    class Meta:
        proxy = True

    objects = StudentManager()

    def save(self, *args, **kwargs):
        super(Student, self).save(*args, **kwargs)
        group, created = Group.objects.get_or_create(name='Student')
        self.groups.add(group) 
```

# ios - OS 3.0 上的 XCode 自动引用计数 (ARC)

> ID：11616461
> 
> 赞同：0
> 
> 时间：2012-07-23T16:19:07.463
> 
> 标签：ios, automatic-ref-counting

我正在使用 iOS SDK 5.1、Xcode 4.3.3。并开发一个启用自动引用计数 (ARC) 的项目。我读过 ARC 仅适用于 iOS 4 或更高版本。但是当我将部署目标设置为 OS 3.0 时，项目仍然可以正常编译。而且我正在使用带有 iOS 4.0 的设备进行测试，并且该应用程序在该设备上也可以正常工作。

我的问题是这个应用程序也可以在 OS 3.0 实际设备上运行吗？（ARC 开启）。

如果它有效，为什么苹果说它只适用于 iOS 4 或更高版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:23:21.267

只要您不使用`__weak`变量，您的代码就应该可以正常工作。ARC 代码在底层编译为常规的 MRC 代码，它只是为您处理`retain`//代码`release`。`autorelease`

# symfony - 如何循环遍历树枝中实体的变量？

> ID：11616467
> 
> 赞同：0
> 
> 时间：2012-07-23T16:19:28.463
> 
> 标签：symfony, doctrine, twig

我正在使用 symfony2 并使用教义查询访问了一个实体，然后我将其传递给我的树枝模板。这个实体有我想循环遍历的变量，而不必显式地命名每个变量。有没有办法用树枝来做到这一点，或者我应该尝试不同的设计？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T16:45:03.060

[树枝文档说](http://twig.sensiolabs.org/doc/tags/for.html#for)：

> 序列可以是数组或实现 Traversable 接口的对象。

因此，只要您实现[Traversable](http://php.net/Traversable)接口之一（[IteratorAggregate](http://php.net/manual/en/class.iteratoraggregate.php)或[Iterator](http://php.net/manual/en/class.iterator.php)），它就应该可以工作。

# c# - 如何在 SharePoint 中创建链接

> ID：11616469
> 
> 赞同：0
> 
> 时间：2012-07-23T16:19:31.333
> 
> 标签：c#, .net, sharepoint

我有一个 C# 脚本，它按照我需要的方式为我设置 SharePoint。我需要它做的一件事是在顶部链接栏和快速启动菜单中创建各种链接。我似乎找不到任何解释如何做到这一点的东西。我假设这是可能的。任何帮助是极大的赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:59:03.273

弄清楚了！

花了一些棘手的谷歌搜索，但[这个](http://msdn.microsoft.com/en-us/library/ms427791.aspx)页面详细介绍了如何做我需要的。

[http://msdn.microsoft.com/en-us/library/ms427791.aspx](http://msdn.microsoft.com/en-us/library/ms427791.aspx)

# python - 补丁不能继续一个特定的差异

> ID：11616470
> 
> 赞同：0
> 
> 时间：2012-07-23T16:19:40.870
> 
> 标签：python, diff, patch

我有一个这样的特定文件：

```
 +
 +                        %3)+Lorem
 +
 +                        %4)+Lorem
 +
 +                        %5)+Lorem
 +
 + 
```

我使用带有所有上下文行的 python 2.7 difflib 生成统一差异：

```
--- bug-3.txt   2012-07-23 15:25:42
+++ FILE    2012-07-23 15:25:42
@@ -1,8 +1,10 @@
 +
 +                        %3)+Lorem
 +
 +                        %4)+Lorem
 +
 +                        %5)+Lorem
 +
++                        %6)+Lorem
++
 + 
```

当我调用 patch (patch --verbose bug-3.txt bug-3.patch) 时，它给了我这个错误：

```
Hmm...  Looks like a unified diff to me...
The text leading up to this was:
--------------------------
|--- bug-3.txt  2012-07-23 15:25:42
|+++ FILE   2012-07-23 15:25:42
--------------------------
Patching file bug-3.txt using Plan A...
Hunk #1 FAILED at 1.
1 out of 1 hunk FAILED -- saving rejects to file bug-3.txt.rej
done 
```

我认为补丁中可能存在错误。你知道究竟是什么导致了这个错误以及如何处理它吗？

我运行 Ubuntu 12.04 并打补丁 2.6.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:31:59.150

看起来原始文件在每行的开头都包含一个空格，但是差异中缺少该空格。我希望您的差异输出看起来像这样：

```
--- bug-3.txt   2012-07-23 15:25:42
+++ FILE    2012-07-23 15:25:42
@@ -1,8 +1,10 @@
  +
  +                        %3)+Lorem
  +
  +                        %4)+Lorem
  +
  +                        %5)+Lorem
  +
+ +                        %6)+Lorem
+ +
  + 
```

也许您`strip()`在生成差异之前调用了文件中的每一行？

# sql - SQL - 通过非唯一 id 删除多个条目

> ID：11616471
> 
> 赞同：0
> 
> 时间：2012-07-23T16:19:49.510
> 
> 标签：sql, sql-server-2008

我有一个 SQL 查询，其中我有多个结果来自一个非唯一的 id，我想根据一个条目是否等于一个值来摆脱这些结果。

IE。`id, billID, transaction`- 可以有多个`billID`具有不同`transaction`值的条目。我想找到`transaction`相等的值，`'testValue'`然后删除所有带有`billID`.

到目前为止，我得到了放入`#tmp1`. 然后我将所有`billID`的位置`Transaction = 'testValue'`放入`#tmp2`.

我如何将这两者结合在一起，给出`#tmp1`where 不等于`billID`in #的结果`tmp2`？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T16:25:13.620

您可以在单个查询中执行此操作：

```
delete from t
where t.billid in (select billid from t where transaction = 'TestValue') 
```

# cocos2d-iphone - 获取手势位置 Cocos2d

> ID：11616472
> 
> 赞同：2
> 
> 时间：2012-07-23T16:19:49.827
> 
> 标签：cocos2d-iphone, position, uigesturerecognizer

现在我有两个手势，双击和单击。选择器是：

```
-(void)handleTap:(UITapGestureRecognizer *)tapRecognizer {
    CCLOG(@"Tap!");
} 
```

我想知道如何获得水龙头的位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T16:25:50.537

您可以使用识别器的`locationInView:`方法：

```
-(void)handleTap:(UITapGestureRecognizer *)tapRecognizer {
    CCLOG(@"Tap!");
    CGPoint loc = [tapRecognizer locationInView:tapRecognizer.view];
} 
```

# scheme - 在 MIT 方案中读取命令行参数

> ID：11616474
> 
> 赞同：5
> 
> 时间：2012-07-23T16:20:02.793
> 
> 标签：scheme, mit-scheme

我正在尝试使用 MIT 方案（在 GNU/Linux 下运行的 MIT/GNU 方案，版本 7.7.90.+ || 微代码 15.1 || 运行时 15.7）运行方案程序，并且我想访问命令行参数。

我查看了文档，但没有找到任何具体的内容。我已经尝试过命令行，但我收到一条错误消息：

```
;Unbound variable: command-line 
```

我是否必须加载一些库才能使用命令行，或者是否有其他功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T20:52:52.623

我设法找到了以下解决方案。

我创建了一个`init.scm`具有以下定义的文件：

```
(define command-line-args '())

(define parse-argument-list
  (lambda (arg-list)
    (set! command-line-args
      (if (null? arg-list)
          (list)
          (cdr arg-list)))))

(set-command-line-parser! "args" parse-argument-list) 
```

这样，当找到命令行选项时，调用`--args`该函数 。`parse-argument-list`

我已将此文件加载到解释器中并使用该过程`mit-scheme`保存了世界图像 ( ) 。`init.com``disk.save`

然后我编写了一个 shell 脚本 (bash)，它调用我的主 Scheme 脚本，如下所示：

```
mit-scheme --band "init.com" --interactive --batch-mode --args $* < myscript.scm 
```

最后，在我的主脚本中，我可以通过变量访问命令行参数

```
command-line-args 
```

我不确定这是否是标准/正确的方法，但至少它有效。

# vb6 - 为旧的 VB6 程序创建新的安装程序

> ID：11616483
> 
> 赞同：1
> 
> 时间：2012-07-23T16:20:27.410
> 
> 标签：vb6, installation

最近我的老板告诉我，他想要一个新的安装程序，用于他在 2001 年用 Visual Basic 6 创建的程序，此外他说“他希望它像那些 Adob​​e 安装程序之一”。

所以长话短说，在过去的几天里，我一直在使用我能找到的所有东西，但我找到的解决方案（主要是软件）都没有产生任何结果

为了澄清，他特别告诉我在没有程序源代码的情况下执行此操作，我只需要使用程序实际安装程序（甚至不是 .msi）程序的 .CAB 文件和他保存的文件夹实际安装方法的一些支持文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:27:40.953

您的旧设置是基于 PDW 的，应该有一个 Setup.lst 文件，其中列出了所有文件、安装位置和安装方式。这可以很容易地[转换为一个 Inno Setup 脚本](http://www.jrsoftware.org/iskb.php?vb)，它提供了比 PDW 本身可以提供的更好和更新的“安装体验”。

# c - 在 list_for_each_entry 中使用 break 是否安全？

> ID：11616488
> 
> 赞同：3
> 
> 时间：2012-07-23T16:20:56.990
> 
> 标签：c, linux-kernel

对循环使用中断指令是否安全，该`while/for`循环位于`list_for_each_entry`指令内部（在 Linux 内核中）？

举例：

```
list_for_each_entry(obj1, vars, list) {
    ...
    while(j < k)
    {
        ...
        if(k >= MAX_ITERATIONS) break; // break the while
        ...
    }
    ...
} 
```

while 循环会按预期中断还是会`list_for_each_entry`中断？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-23T16:22:44.963

`break` *总是*只跳出最内层的循环，所以外层的循环不受影响。事实上，要打破多层次的循环，你必须使用`goto`.

# asp.net - SQL Server 2008 R2 中的 AES 是否需要初始化向量？

> ID：11616491
> 
> 赞同：4
> 
> 时间：2012-07-23T16:21:10.547
> 
> 标签：asp.net, sql-server, encryption, cryptography, aes

我正在使用 AES_128 在 Sql Server 中测试加密。当我加密相同的文本（4111111111111111）时，加密的二进制数据每次都不同。

因为每次加密的数据都不一样，我需要使用初始化向量（IV）吗？我的理解是 IV 用于防止重复的加密文本以防止识别哪些值是相同的。

AES（CBC，CTR）的区块链方面是否会创建这些不同的加密值？

这是一个例子。这些是相同值（4111111111111111）加密三次的结果：

```
0x00AC935A664E3C4D97DD1F4A5E316333010000003D6FAE7E02787F52BC5D08BFE9E728E39DFA6CE4FAE2CDCD29D22BB8BEFF3FE9D9A02E7235558BEB11A41C218601B4DE
0x00AC935A664E3C4D97DD1F4A5E31633301000000EDB2D01D6A4DD46241AA616CF74FC41A148EAE6B42E47F3B902F5A04D0021EC34FBE08D634A4C234540565BFB68CD578
0x00AC935A664E3C4D97DD1F4A5E31633301000000D9671BB79C344B0835BB0DCB2FDD58A9AF05095B5ECE0C27077C7A57242674D92D9E1233B1ED1AAA007655F8D53A3DC8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T21:27:45.893

SQL Server 2008 将大量元数据添加到加密输出中，包括随机生成的 IV 值。只有输出的最后部分是加密数据。

除非您尝试在非 SQL 上下文中解密数据，否则这对您来说应该不是问题。如果是这种情况，您需要熟悉输出数据的确切格式，以便了解如何正确解密。

先前关于此主题的 stackoverflow 问题（[如何在 C# 和 SQL2k8 AES 加密之间获得兼容性？](https://stackoverflow.com/questions/2822592/how-to-get-compatibility-between-c-sharp-and-sql2k8-aes-encryption)）建议了一种可能的输出格式，但这似乎与您的输出不太匹配。采用建议的格式并将其应用于您的第一个输出示例，我们将拥有：

`00AC935A664E3C4D97DD1F4A5E316333` *对称密钥的 GUID*
`01000000` *固定版本号*
`3D6FAE7E02787F52BC5D08BFE9E728E3` *随机 IV*
`9DFA6CE4FAE2CDCD29D22BB8BEFF3FE9D9A02E7235558BEB11A41C218601B4DE` *?? 32 字节*

最后一个值似乎与建议的格式不匹配。既不是8字节头加上16字节数据的倍数，也不是28字节扩展头数据加上16字节数据的倍数。也许您的输出被截断了？

# ios - 刷新配置文件时 XCode“团队中的项目太少”错误

> ID：11616493
> 
> 赞同：34
> 
> 时间：2012-07-23T16:21:23.950
> 
> 标签：ios, xcode, provisioning-profile

我正在尝试构建我的应用程序。我已经安装了我的团队设置的配置文件。我已经安装了我的开发者证书和 WWDR 证书。但是当我刷新我的配置文件库时，它会抛出这个错误：

![在此处输入图像描述](../Images/b5fb98ce2395f9b4a039b5828e656ff1.png)

我不知道该怎么做。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-12T10:15:44.717

就像大多数人一样，我似乎有两个苹果账户：1）电子邮件地址账户和 2）只是苹果用户 ID 登录。

当您注册 iOS 开发者帐户时，只有一个帐户被批准为 iOS 开发者。这两个帐户是否合并并在苹果个人资料中链接并不重要，只有一个获得批准。您可以通过分别登录两个帐户到他们的开发者网站来检查这一点。一个帐户会说您是会员，另一个帐户会说支付成为 iOS 开发者的费用。

问题是您的钥匙串已经存储了过去的一个苹果 ID 凭据......并且您可能使用另一个苹果登录名注册了苹果 iOS 开发人员程序。Xcode 会自动获取钥匙串先前存储的“团队”部分的凭据，并且由于没有为 iOS 开发者帐户激活钥匙串中的该帐户，因此它抱怨没有人是“团队”中的有效开发者。

为了解决这个问题，

1.  从您的钥匙串登录中删除所有与苹果相关的内容。

2.  从苹果网站上撤销所有有​​问题的配置文件、证书等。

3.  仅使用 iOS 开发人员批准的 Apple 登录来重做配置过程。

4.  在 XCode Organizer 的 Teams 部分，单击底部的“刷新”图标并按照指示进行操作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-04T18:21:52.177

**当我使用没有有效 iOS 开发者证书**的Apple 开发者帐户时，这发生在我身上。证书要么已过期，要么一开始就从未购买过。

使用有效的 iOS 开发者帐户登录后，问题不再出现。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T20:25:22.800

我的解决方案是从 iTunes 和 Mac App Store 中简单注销。我使用不同的 Apple ID 登录。此 Apple ID 与我用于 iOS 程序的 Apple ID 不同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-04T00:22:37.577

我也收到了消息：“属性/团队/实体/开发人员中的项目太少”

在将我的帐户（与 iTunes 中的 macbook 连接并在 Xcode 中使用的帐户）添加到[https://developer.apple.com/membercenter/index.action#的“Peoples”下的“Developer”后，它现在可以工作了iPhone开发](https://developer.apple.com/membercenter/index.action#iPhoneDev)

试试看。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-03T18:57:58.217

如果有人从 Mac Develop 程序登陆这里，请快速说明：

我是 Apple 开发的新手，所以，也许这是一个常识，但我没有遇到过。

注册了 Mac 开发人员计划，而不是 iOS，并尝试“从开发人员门户刷新”，但出现完全相同的错误：“团队中的项目太少”。尝试了上面和其他地方的所有步骤，但没有成功。

最终打电话给他们的支持，只是发现此特定功能不适用于仅 Mac Dev（无 iOS Dev）会员配置文件。因此，手动下载/导入是解决方案，因为手机上的技术人员告诉我，它会寻找 iOS 团队，但没有找到并且会出错。

希望这有助于并为某人节省几个小时的挫败感。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-20T08:08:26.163

请参考： [https ://developer.apple.com/legacy/library/technotes/tn2250/_index.html](https://developer.apple.com/legacy/library/technotes/tn2250/_index.html)

供应配置文件刷新故障排除：

如果您收到错误消息：

**Teams 中的项目太少**

执行以下步骤：

1.  打开钥匙串访问>密码类别。

2.  删除 daw.apple.com 和 daw2.apple.com 的条目

3.  重试供应配置文件刷新过程。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-04T05:02:34.257

访问 developer.apple.com。在右上角的菜单区域中，选择“会员中心”。进入会员中心后，选择“证书、标识符和配置文件”。

验证您的帐户没有过期；或者如果是新的程序（或续订）订单已处理。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-01T00:23:53.057

在遵循此页面上的其他答案后，我仍然遇到了同样的问题。这是我需要做的事情才能使事情正常进行。

确保您已完全接受加入 Apple Developer 计划的邀请电子邮件。您的帐户管理员可以通过管理面板验证您的状态。

1.  单击“请验证您的电子邮件地址”电子邮件中的链接
2.  点击“提交”按钮完成注册

# jquery - jStorage在IE9中没有持久化密钥

> ID：11616505
> 
> 赞同：0
> 
> 时间：2012-07-23T16:22:08.353
> 
> 标签：jquery, internet-explorer-9, local-storage

我无法获得由 jStorage（使用的引擎是 userData）（jQuery）编写的 IE9 持久密钥。

写/读（一体机）似乎工作正常；getter 函数检索正确的值：

```
<!DOCTYPE html>
<html>

<head>
    <script   type="text/javascript" src="jquery-1.7.2.min.js"></script>
    <script   type="text/javascript" src="jquery-json.js"></script>
    <script   type="text/javascript" src="jstorage.js"></script>

    <script type="text/javascript">

        alert ("Localstorage support : " + $.jStorage.storageAvailable() );

        alert ('Setting bar -> aaa');
        $.jStorage.set('bar', 'aaa');

        alert ('Setting foo -> bbb');
        $.jStorage.set('foo', 'bbb');

        var foo = $.jStorage.get('foo')
        alert ('Getting foo =' + foo );

        alert ( "index = " + $.jStorage.index() );

    </script>
</head>
<body>
</body>
</html> 
```

但是，如果我使用以下内容来检索值，则索引为空且 foo 为 null ：

```
<!DOCTYPE html>
<html>

<head>
    <script   type="text/javascript" src="jquery-1.7.2.min.js"></script>
    <script   type="text/javascript" src="jquery-json.js"></script>
    <script   type="text/javascript" src="jstorage.js"></script>

    <script type="text/javascript">

        alert ("Localstorage support : " + $.jStorage.storageAvailable() );
        var foo = $.jStorage.get('foo');
        alert ('Getting foo =' + foo );

    </script>
</head>
<body>
</body>
</html> 
```

我不使用任何网络服务器，文件是直接从文件系统加载的（我*不想*使用任何网络服务器）。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T18:17:13.960

尝试在方法之外构建字符串： var msg = "Localstorage support : " + $.jStorage.storageAvailable(); 警报（味精）；

# iphone - 如何在 Xcode 4.2 中制作函数计算器？

> ID：11616509
> 
> 赞同：0
> 
> 时间：2012-07-23T16:22:18.207
> 
> 标签：iphone, xcode

所以我需要在 Xcode 4.2 中制作一个简单的应用程序，我已经设置了布局，只有一件事我坚持。我需要制作一个计算器，有人可以在其中输入几个数字，然后当您单击提交时，结果会在页面上弹出。

例如

预计每小时费率：

预计材料成本：

预计时间：

然后你会点击提交，在下一页你会看到

大概费用：

现在我需要知道的是如何在 Xcode 中使用该公式并让下一个屏幕显示该成本。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:54:41.590

如果您正在寻找有关如何在 iPhone 上制作计算器的教程，请在此处查看 **iPad 和 iPhone 应用程序开发**iTunes U 免费课程：http: [//itunes.apple.com/us/itunes-u/ipad-iphone-application-开发/id473757255](http://itunes.apple.com/us/itunes-u/ipad-iphone-application-development/id473757255)

它位于斯坦福大学的 Paul Hegarty 的 iTunes U 上。这是许多开发人员使用的很棒的教程，我强烈推荐这门课程。第一节或两节课是如何实现计算器。那是一个简单的数学计算器，可能与您需要的不同，但您可以从中获得一些有用的想法。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T16:42:17.020

从空视图模板开始，在 IB 中为每个输入值添加标签和 UITextField，然后添加 UIButton。将所有内容连接到 *.h 中的变量，在 *.m 文件中合成它们。为 UIButton 创建 IBAction，您可以在其中读取用户在 UITextFields 中输入的值，执行您的公式然后将其显示给用户。

我建议您阅读一些基本教程，这是非常简单的应用程序。

# localization - DOJO 本地化问题

> ID：11616514
> 
> 赞同：1
> 
> 时间：2012-07-23T16:22:34.980
> 
> 标签：localization, dojo

我在 DOJO 本地化方面苦苦挣扎了很长时间。

我的应用程序文件夹结构如下。

![在此处输入图像描述](../Images/213e6896c6c7f2d680632c3f29e98522.png)

并且，获取本地化字符串的代码如下。

```
 dojo.require("dojo.i18n");
    dojo.requireLocalization("CTop.recordings", "agent");
    dojo.addOnLoad(function () {
        //Returns a localized Object
        var localizedStrings = dojo.i18n.getLocalization("CTop.recordings", "agent", "de"); 
```

我得到空的**本地化字符串**对象。

如果我将录音文件夹移动到 dojo 文件夹的级别（即在 Scripts 下），则以下代码可以正常工作。

```
 dojo.require("dojo.i18n");
    dojo.requireLocalization("recordings", "agent");
    dojo.addOnLoad(function () {
        //Returns a localized Object
        var localizedStrings = dojo.i18n.getLocalization("recordings", "agent", "de"); 
```

将 CTop 文件夹添加到结构有什么问题？如何注册本地化路径？

我也尝试了以下方法，但没有成功。

```
dojo.require("dojo.i18n");
dojo.registerModulePath("myApp", "cTop.recordings.agent");
dojo.requireLocalization("myApp", "agent");
var localizedStrings = dojo.i18n.getLocalization("myApp", "agent", "de"); 
```

请指导我解决这个问题

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T20:52:43.003

试试这个（完整的 cTop 目录文件夹，如屏幕截图所示）

```
// point the top-level namespace (such like 'dojo' is) to a folder by relative URI
// path here is a relative to dojo.js
dojo.registerModulePath("myApp", "../cTop/recordings"); 
dojo.requireLocalization("myApp", "agent");
var localizedStrings = dojo.i18n.getLocalization("myApp", "agent", "de");

// if you were to have a module declared in a file called 'myModule.js' under 'cTop' folder
// one could require it by following
dojo.require("myApp.myModule"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T06:29:54.057

问题是我有两个同名的文件夹 CTop。重命名不需要本地化的文件夹。以下代码片段足以本地化。

```
dojo.i18n.getLocalization("CTop.recordings", "agent", "de"); 
```

# c# - 在MVC3中将jQuery添加到具有相同模型的表单中

> ID：11616521
> 
> 赞同：0
> 
> 时间：2012-07-23T16:22:57.710
> 
> 标签：c#, jquery, asp.net-mvc-3

我试图在同一个视图上有两个具有相似功能的提交表单，其中每个表单都被强输入到同一个模型。然后，我尝试将日期选择器添加到两个表单的相同输入中，但我不确定如何执行此操作。这是我的代码：

```
@using (@Ajax.BeginForm(...
                        new { id = "editScheduleForm" }))
{
    <div class="editor-label">
        @Html.LabelFor(model => model.StartTime)
    </div>
    <div class="editor-field">
        <input 
        @Html.EditorFor(model => model.StartTime)
        @Html.ValidationMessageFor(model => model.StartTime)
    </div>
} 
```

...

```
@using (@Ajax.BeginForm(...
                        new { id = "addScheduleForm" }))
{
    <div class="editor-label">
        @Html.LabelFor(model => model.StartTime)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.StartTime)
        @Html.ValidationMessageFor(model => model.StartTime)
    </div>
} 
```

这两种形式都在它们自己的强类型部分视图中。我自然地尝试简单地将 jQuery 中的 datepicker 添加到两个部分视图中，如下所示：

```
$(function () {
    $("#StartTime").datepicker();
}); 
```

但不出所料，它只适用于其中一种输入。我一直在尝试使用我添加到两个 Ajax 表单声明（例如 editScheduleForm 和 addScheduleForm）的 HTML id，但不确定如何执行此操作。有什么建议么？

**解决方案：** 正如 scottm 建议的那样，我查看了使用自定义编辑器模板的文档。我读了这个，详细介绍了我不知道存在的功能：http: [//msdn.microsoft.com/en-us/library/ee407399.aspx](http://msdn.microsoft.com/en-us/library/ee407399.aspx)

在这里，您可以指定一个模板，然后为 htmlFieldName 添加一个参数，这是专门为规避我正在发生的问题而设计的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T16:28:22.843

您可以向编辑器模板中的输入添加一个类。然后，您可以使用该类作为 jQuery 选择器。

添加一个名为`DateTime.cshtml`under的文件`~/Views/Shared/EditorTemplates`，并添加以下内容：

```
@model DateTime
@Html.TextBox("", (Model.HasValue ? Model.Value.ToShortDateString() : string.Empty), new { @class = "date" }) 
```

然后将此 jQuery 添加到页面中。

```
$(function () {
    $(".date").datepicker();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T16:34:26.350

[ID 在文档中必须是唯一的。](http://developer.mozilla.org/en/DOM/element.id)

永远不要依赖页面上的多个 id 正常工作。事实上，尽管博客中的大多数示例都是这样做的，但您几乎不应该将 ids 用作 jquery 选择器。

就像@scottm 说的。您应该使用类来标记您想要小部件化的项目。

这是一段简单的代码，因此您可以以声明方式创建 jq ui 小部件：

```
$(function() {

  $('[data-usewidget]').each(function() {
    var $this = $(this), widget = $this.data('usewidget');
    $.fn[widget] && $this[widget]();
  });

}); 
```

然后在你的html中

```
<input name=startTime data-usewidget=datepicker /> 
```

# javascript - cookie 未保存在 sencha touch 2 应用程序中

> ID：11616523
> 
> 赞同：1
> 
> 时间：2012-07-23T16:23:06.083
> 
> 标签：javascript, cookies, sencha-touch, sencha-touch-2

在我的响应标头中收到具有有效“set-cookie”值的服务器响应后，应用程序不会保存 cookie。

Heroku 上的 Rails 服务器是为 CORS（跨域 ajax 请求）设置的。Access-Control-Allow-Credentials = True 和方法 = POST、GET。

登录请求，响应中包含set-cookie，如下：

```
 Ext.Ajax.request({
            url: 'http://myurl/log_user_in.json',
            params: { username: user, password: pass, app_id: id },
            method: "POST" }); 
```

需要有关应用程序不保存 cookie 的原因的帮助。IE。执行 `document.cookie`，在获得“set-cookie”结果后`document.cookie = ''`

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T11:58:16.233

在这里找到答案：[https ://stackoverflow.com/a/7189502/1106877](https://stackoverflow.com/a/7189502/1106877)

不幸的是，Sencha 论坛的答案几乎没有提供有关如何执行此操作的指导。在 Sencha Touch 中，上面链接的等效解决方案是：

```
Ext.Ajax.request({
            url: 'http://myurl/log_user_in.json',
            params: { username: user, password: pass, app_id: id },
            withCredentials: true,
            useDefaultXhrHeader: false,
            method: "POST" }); 
```

它也适用于使用 Ajax 的商店代理。

确保 withCredentials 为 true 并且 useDefaultXhreader 为 false。这允许您的 ajax 请求查找、设置和请求可用的 cookie。当然，所有这些都假设您的服务器已设置为跨域 Ajax 调用。

# php - 在 PHP >= 5.3 中使用诸如 array_walk 之类的函数（和类似函数）来修改数组

> ID：11616525
> 
> 赞同：5
> 
> 时间：2012-07-23T16:23:10.960
> 
> 标签：php, arrays, pass-by-reference

PHP 有一些很棒的函数（比如 array_walk），可以让你处理数组中的每个元素。它们通常是这样设置的，因此您将要处理的数组指定为第一个参数，并将一个回调函数作为第二个参数应用于每个元素。这些函数返回指示成功的布尔值，而不是您可能期望的修改后数组的副本。如果要修改数组，则必须通过引用传递数组，例如`array_walk(&$my_array, 'my_callback');`

但是，在 PHP 5.3 及更高版本中，如果您通过引用传递给函数调用，则会收到 E_DEPRECATED 错误。

有谁知道（如果存在）使用这些函数来修改数组而不触发错误并且没有明确抑制它们的正确方法？这些旧的数组处理功能是否有更新的替代品。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T16:30:29.613

在 PHP >= 5.3 中，值通过引用隐式传递，由函数定义确定。

的函数定义[`array_walk()`](http://php.net/array_walk)：

```
bool array_walk ( array &$array , callable $funcname [, mixed $userdata = NULL ] ) 
```

注意`&$array`。因此，您不需要在 PHP >= 5.3 的函数调用中通过引用显式传递数组。

```
array_walk($my_array, 'my_callback'); 
```

但是，您需要确保*回调*相应地通过引用接受它的值（如**nickb**所示）。

另请查看[PHP 5.4 Call-time pass-by-reference - 是否可以轻松修复？](https://stackoverflow.com/questions/8971261/php-5-4-call-time-pass-by-reference-easy-fix-available)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-23T16:28:39.387

因为您应该定义回调以通过引用来接受其参数来修改数组。

```
array_walk( $my_array, function( &$el, $key) { $el = $el / 2; }); 
```

所以一个简单的例子是这样的：

```
$my_array = range( 2, 10, 2);
array_walk( $my_array, function( &$el, $key) { $el = $el / 2; });
var_dump( $my_array); 
```

将[输出](http://viper-7.com/xOsRuU)：

```
array(5) {
  [0]=>
  int(1)
  [1]=>
  int(2)
  [2]=>
  int(3)
  [3]=>
  int(4)
  [4]=>
  int(5)
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-30T21:47:44.050

您还可以将回调的参数作为 array_walk 的第三个参数传递。问题是如何将引用作为回调参数传递。这在调用 array_walk 时使用 & 前缀是可能的。这已被弃用，随后被定为非法。使用引用类型的第三个参数定义回调在这里没有帮助。

一种解决方法是在数组中传递一个引用（&$var 允许作为 'array' 的参数！）作为第三个参数，并在回调中取消引用数组以再次获取引用，如下所示：

```
function cb(&$v, $k, $ar) {
  $v='bla'.$k;
  $ar[0]++;
}
$count=0;
$arr = array('sint'=>'er','kla'=>'aas','en'=>'zwartepiet');
array_walk($arr,'cb',array(&$count));
var_dump($arr,$count); 
```

哪个打印：

```
array(3) {
  ["sint"]=>
  string(7) "blasint"
  ["kla"]=>
  string(6) "blakla"
  ["en"]=>
  string(5) "blaen"
}
int(3) 
```

当仍然允许调用时引用时，它曾经是可能的：

```
function cb(&$v, $k, $ref) {
  $v='bla'.$k;
  $ref++;
}
$count=0;
$arr = array('sint'=>'er','kla'=>'aas','en'=>'zwartepiet');
array_walk($arr,'cb',&$count);
var_dump($arr,$count); 
```

# linux - Shell - 将“od”命令的输出记录到变量中

> ID：11616532
> 
> 赞同：0
> 
> 时间：2012-07-23T16:23:34.827
> 
> 标签：linux, shell

我在论坛上读到要查找随机字符串，您应该使用以下语法：

```
od -a -A n /dev/urandom | head -30 | tr -d ' ' | tr -d '\n' | awk '{print substr($0,1,256)}' 
```

我怎么能把这个输出放到变量'var'而不是在屏幕上显示呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T16:25:22.177

使用反引号或`$()`，即

```
var=`command` 
```

或者

```
var=$(command) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T16:25:03.063

用反引号捕获它：````

```
VAR=`od -a -A n /dev/urandom | head -30 | tr -d ' ' | tr -d '\n' | awk '{print substr($0,1,256)}'` 
```

# c# - 关于c#.net中的xml序列化

> ID：11616533
> 
> 赞同：2
> 
> 时间：2012-07-23T16:23:42.170
> 
> 标签：c#, asp.net, .net, xml

我在面试中被问到以下问题：

*   解释 XML 序列化。

我不知道 XML 序列化是什么。我查看了一些网站，但找不到任何（简短而清晰的）关于 XML 序列化的解释。

有人能解释一下 XML 序列化是什么吗？这会有所帮助，这样我就可以对 XML 序列化有一个清晰的了解，并准备好在被问到这个问题时充满信心地面对未来的面试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T16:31:20.347

假设您有这样的课程：

```
Public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public int age { get; set; }
} 
```

和这个类的一个对象是这样的：

```
Person Student = new Person();
Student.FirstName = "John";
Student.LastName = "Smith";
Student.age= 24; 
```

然后当你 xml 序列化对象 Student。您将获得一个 XML 文件作为输出，其中包含以下内容：

```
<Person>
    <FirstName>John</FirstName>
     <LastName >Smith</LastName >
    <age>24</age>  
</Person> 
```

您可以反序列化 XML 以获取原始对象作为输出。

所以这是类和 XML 之间的一种转换 BTW XML 文件通常是文本文件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T16:50:12.707

要扩展 Youssef 的答案，您还可以通过执行以下操作来指定序列化 XML 的编写方式：

```
[XmlRoot("RootElementsName")]
Public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public int age { get; set; }
} 
```

这将产生如下 XML：

```
<RootElementsName>
    <FirstName>John</FirstName>
     <LastName >Smith</LastName >
    <age>24</age>  
</RootElementsName> 
```

您可以在此处阅读有关各种 XML 修饰符的更多信息：http: [//msdn.microsoft.com/en-us/library/e123c76w](http://msdn.microsoft.com/en-us/library/e123c76w)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T16:28:50.137

这意味着将对象转换为 XML 形式，以便它可以通过 HTTP 和其他传输协议进行传输，或者将其存储用于其他目的。`XML`被认为是不同系统之间的数据传输格式（甚至以不同的语言开发）。您可以以 XML 格式将数据从一个应用程序发送到另一个应用程序。大多数 Web 服务以 XML 格式返回数据。各种客户端可以访问这些 web 服务方法，而不必担心 web 服务是用什么平台/语言编写的，因为它只是处理传入的数据的 XML 形式。

更多阅读：http: [//msdn.microsoft.com/en-us/library/182eeyhh.aspx](http://msdn.microsoft.com/en-us/library/182eeyhh.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T16:54:18.187

[维基百科](http://en.wikipedia.org/wiki/Serialization)上的定义差不多是这样：

> 序列化是将数据结构或对象状态转换为可以存储（例如，在文件或内存缓冲区中，或通过网络连接链路传输）并稍后在相同或另一个计算机环境中“复活”的格式的过程.

*Xml*序列化只是序列化[Xml](http://en.wikipedia.org/wiki/Xml)作为存储和传输格式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T16:58:29.430

首先，我们需要了解为什么序列化在 C# 中很重要。当我们运行我们的 c# 应用程序时，我们将拥有 C# 对象。在某个时间点，您可能希望保留它，以便以后可以使用它。例如，如果您正在编写像 firefox 下载器这样的应用程序。当你关闭它时，如果你正在下载它，你可以用上次关闭的状态重新加载它。

因此，如果您想在硬盘中保留称为二进制序列化的状态。如果您想通过称为 xml 序列化的线路发送对象

# lua - 在 corona sdk 中设计一个无尽的滚动背景

> ID：11616534
> 
> 赞同：3
> 
> 时间：2012-07-23T16:23:45.777
> 
> 标签：lua, coronasdk

我必须建立一个赛车游戏。为此，我使用道路作为背景，我需要向下滚动并重复，以便屏幕始终显示移动的道路，即相对于用户汽车，道路似乎正在移动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T16:26:48.410

试试这个教程[http://mobile.tutsplus.com/tutorials/corona/corona-sdk-create-a-side-scroller-from-scratch/](http://mobile.tutsplus.com/tutorials/corona/corona-sdk-create-a-side-scroller-from-scratch/)它向您展示了如何制作一个包含连续移动背景的连续运行游戏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-16T20:11:21.853

仅供将来参考，这里是垂直滚动背景的代码：

```
local function moveBg(dt)  
  bg1.y = bg1.y + scrollSpeed * dt
  bg2.y = bg2.y + scrollSpeed * dt
  if (bg1.y - display.contentHeight/2) > display.actualContentHeight then
      bg1:translate(0, -bg1.contentHeight * 2)
  end
  if (bg2.y - display.contentHeight/2) > display.actualContentHeight then
      bg2:translate(0, -bg2.contentHeight * 2)
  end
end 
```

完整的教程在这里： http: [//lomza.totem-soft.com/tutorial-scrollable-background-in-corona-sdk/](http://lomza.totem-soft.com/tutorial-scrollable-background-in-corona-sdk/)

# php - 处理 & 作为 URL 中的字符

> ID：11616536
> 
> 赞同：0
> 
> 时间：2012-07-23T16:23:48.103
> 
> 标签：php, url

我正在制作一个学习编码的网站，并正在制作一个搜索网站。搜索是`$q`。

```
$q = ucwords(mysql_real_escape_string(trim($_REQUEST['q']))); 
```

然后我试图将链接指向用户可能想要搜索的其他单词。不幸的是，如果一个单词是“Example & Another Example”，`$q`则只有“Example”，其余的都被省略了。在 url 这有效（因为没有遗漏任何内容）*example+%26+another+example* 但这不起作用 Example%20&%20Another Example 。

我尝试使用 str_replace 替换所有的`&amp`，`%26`但它只是使`$q = null`. 有什么问题？

这是我的代码：

```
echo "<hr /><span><strong>Refine Search</strong><br/><br/>";
$result = mysql_query("SELECT * FROM subcat WHERE catnumber='1' LIMIT 0,10");
$subcaturl = str_replace("&amp;", "%26", $row['subcat']);
while($row = mysql_fetch_array($result))
{
    echo "<a href='search.php?q=". $subcaturl ."'/>" . $row['subcat'] ."</a>";
    echo "<br />";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T16:30:20.447

尝试[urlencode](http://php.net/manual/en/function.urlencode.php)：

```
$subcaturl = urlencode($row['subcat']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T16:29:30.230

看看 urlencode / urldecode - 这将有助于解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T16:33:56.130

PHP 会将 '&' 视为新参数的开头。为了将 '&' 作为 q 字符串的一部分，用户提交的数据需要在放入 URL 字符串之前转义 '&'。

你可以这样做作为一个例子：

```
str_replace ('&", "-", $row['subcat']); 
```

您也可以尝试对网址进行编码和解码

```
urlencode($row['subcat']);
urldecode($row['subcat']); 
```

# sql-server - CodeIgniter ActiveRecord 连接语句从 ON 子句中删除 '['

> ID：11616538
> 
> 赞同：3
> 
> 时间：2012-07-23T16:23:51.100
> 
> 标签：sql-server, codeigniter, activerecord

使用 Codeigniter (v1.7.2) Active Record Class 查询 MSSQL 数据库（外部数据库，我不控制表或字段名）

以下代码：

```
$this->db->select('[Key Field], MemberInfo.OtherField');
$this->db->limit(10);
$this->db->from('primaryTable');
$this->db->join('MemberInfo', '[Member Number] = Member_Number', 'left');
$this->db->where('[Member Number]  = 573');
$this->db->where('[Incident Date] BETWEEN '. $DateStart . ' AND ' . $DateEnd); 
```

产生以下查询（有语法错误）

```
SELECT  TOP 10 [Key Field], MemberInfo.OtherField
FROM primaryTable
LEFT JOIN MemberInfo ON Member Number] = Member_Number
WHERE [Member Number] = '573'
AND [Incident Date] BETWEEN 2012-01-01 AND 2012-07-19 
```

注意 JOIN 子句，它缺少字段名称上的开头“[”

我尝试使用双引号，结果相同。

任何人都有想法，这是 1.7.2 中的一个已知错误（我知道这是旧的，正在更新）？

**2.1.2 中也存在**更新问题****

 **下面接受的答案也是 2.1.2 的修复：更改 JOIN 函数中的正则表达式检查以查找开口`[`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T16:49:13.897

问题出在参数中`ON`。框架中不存在集成解决方案（版本 2 中没有）。

您有 2 个选项：

1.  [更改库 active_record 的核心](https://github.com/EllisLab/CodeIgniter/commit/428702387ca071db4686ec6d6c60bd35b01c33e4)

2.  [使用$this->db->query()](http://codeigniter.com/user_guide/database/results.html)将查询写在一个完整的链中；**

# gcc - g++ 'nullptr' 未在此范围内声明

> ID：11616539
> 
> 赞同：5
> 
> 时间：2012-07-23T16:23:56.367
> 
> 标签：gcc, null, g++

我在带有 git-bash 的 Windows 8 Release Preview 上使用 gcc-4.7.1。

```
$ g++ -v
Using built-in specs.
COLLECT_GCC=c:\Users\nikhil bhardwaj\mingw64\bin\g++.exe
COLLECT_LTO_WRAPPER=c:/users/nikhil bhardwaj/mingw64/bin/../libexec/gcc/x86_64-w
64-mingw32/4.7.1/lto-wrapper.exe
Target: x86_64-w64-mingw32
Configured with: /home/drangon/work/mingw-w64-dgn/source/gcc/configure --host=x8
6_64-w64-mingw32 --target=x86_64-w64-mingw32 --disable-nls --enable-languages=c,
c++,objc,obj-c++ --with-gmp=/home/drangon/work/mingw-w64-dgn/build/for_target --
enable-twoprocess --disable-libstdcxx-pch --disable-win32-registry --prefix=/hom
e/drangon/work/mingw-w64-dgn/target --with-sysroot=/home/drangon/work/mingw-w64-
dgn/target
Thread model: win32
gcc version 4.7.1 20120524 (prerelease) (GCC) 
```

当我尝试编译一个小代码片段时，

```
using namespace std;
struct node
{
    int data;
    node *left, *right;
};
node *newNode(int data)
{
    node *node = new (struct node);
    node->data = data;
    node->left = nullptr;
    node->right = NULL;
    return node;
} 
```

我得到这个错误，

```
$ g++ -I../includes bst.cpp
bst.cpp: In function 'node* newNode(int)':
bst.cpp:13:18: error: 'nullptr' was not declared in this sc
bst.cpp:14:19: error: 'NULL' was not declared in this scope 
```

我不能使用`NULL`或`nullptr`，我需要包含一些头文件吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T16:28:30.400

在 c++11 模式下尝试：

```
g++ -std=c++11 -I../includes bst.cpp 
```

# javascript - Ustream API 不工作？

> ID：11616542
> 
> 赞同：0
> 
> 时间：2012-07-23T16:24:14.810
> 
> 标签：javascript, html, api

我正在使用此代码来获取我的 ustream 状态。

```
 <font color='red'><span id="status">status</span></font>

    <script type="text/javascript">
    function set_status(status)
    {
    if (status == "offline")
    {    

    document.getElementById("status").innerHTML =
    "offline";
    }
    else if (status == "live")
    {    
    document.getElementById("status").innerHTML =
    "LIVE";
    }
    else
    {    
    document.getElementById("status").innerHTML  =
    "Error getting stream status!";
    }
    }
    </script>

    <script type="text/javascript"
    src="http://api.ustream.tv/html/channel/codtelevision/getValueOf/status?key=MY KEY CODE=set_status">
    </script> 
```

出于某种原因，什么也没有发生。我正在使用 jsfiddle.net 进行测试。如果有帮助的话。这是我的代码的链接：

[提琴手](http://jsfiddle.net/SPwvx/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:33:16.177

在您的 JSFiddle 中，Javascript 注释使用`//`或`/*` `*/`注释，而不是`<!--` `-->`. 这会导致语法错误，从而导致代码被忽略。

删除评论后，您将获得：

```
{"error": "Please use POST request"} 
```

# extjs - EXTJS 4 模型尝试创建持久记录（而不是更新）

> ID：11616543
> 
> 赞同：1
> 
> 时间：2012-07-23T16:24:19.210
> 
> 标签：extjs, model

为什么记录会通过调用 POST/Create 操作的 rest 代理成功保存，然后在后续保存时调用相同的 POST/Create 方法而不是 PUT/Update 方法？

**帖子**

```
var ref = beginQuestionnaireControl.getPegfileRef();
var Pegfile = Ext.create('Pegfect.model.Pegfile', {
  Id: 0,
  Reference: ref
});
Pegfile.save({
  scope: this,
  success: function (pegfile, operation) {
    this.activePegfile = pegfile;
    this.startQuestions();
  },
  failure: function () {
    alert('That ref is not unique');
  }
}); 
```

**还有 POSTS（期待一个 PUT）**

```
this.activePegfile.save({
      success: function () {
        successCallback();
      },
      failure: function () {
        alert('oops, error saving Pegfile');
      }
    }); 
```

**代理人**

```
proxy:
  {
    type: 'rest',
    url: 'Pegfile',
    timeout: 120000,
    noCache: false,

    reader:
    {
        type: 'json',
        root: 'data',
        successProperty: 'success'
    },

    writer:
    {
        type: 'json',
        writeAllFields: true
    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:35:01.120

诀窍是`Id`在模型上定义一个“”属性：

```
idProperty: 'Id' 
```

呼唤一些关于这个配置的约定......

# facebook - 如何制作一个将我重定向到我的网站的 Facebook 应用程序

> ID：11616544
> 
> 赞同：-1
> 
> 时间：2012-07-23T16:24:31.153
> 
> 标签：facebook, web, e-commerce

您如何制作可以在 facebook 上搜索并单击它的 facebook 应用程序，它会将您重定向到不同的网站。例如，如果您输入 1-800-Flowers 并单击应用程序 - 它会将您重定向到网站[http://ww30.1800flowers.com/template.do?id=template4&page=7900&conversionTag=true#flowers_facebook/offer](http://ww30.1800flowers.com/template.do?id=template4&page=7900&conversionTag=true#flowers_facebook/offer) straight离开。这很容易做到吗？如果是这样，怎么做？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:33:51.250

您可以首先在 Facebook 上创建一个应用程序并将其指向您网站上的一个页面。在页面上，添加[一些 JS 代码](http://www.webniraj.com/2012/05/09/forcing-your-facebook-app-to-run-in-an-iframe/)将用户从 Facebook 中弹出并发送到您的主页：例如：

```
window.top.location = 'http://yourwebsite.com'; 
```

但是，请记住，将应用程序简单地重定向到网站是违反 Facebook 条款的。您的网站必须是 Facebook Connected 或以某种方式使用 Facebook API 以增强用户体验。

# c# - 越界错误c#

> ID：11616549
> 
> 赞同：-2
> 
> 时间：2012-07-23T16:25:04.670
> 
> 标签：c#, .net

我试图将 csv 文件的内容读入不同的变量，以便发送到 Web 服务。它工作正常，但今天突然出现异常。

指数数组的边界之外：

我做错了什么？

```
String sourceDir = @"\\198.0.0.4\e$\Globus\LIVE\bnk.run\URA.BP\WEBOUT\";
// Process the list of files found in the directory. 
string[] fileEntries = Directory.GetFiles(sourceDir);
foreach (string fileName2 in fileEntries)
{
    // read values
    StreamReader st = new StreamReader(fileName2);
    while (st.Peek() >= 0)
    {
        String report1 = st.ReadLine();
        String[] columns = report1.Split(','); //split columns 
        String prnout = columns[0];
        String tinout = columns[1];
        String amtout = columns[2];
        String valdate = columns[3];
        String paydate = columns[4];
        String status = columns[5];
        String branch = columns[6];
        String reference = columns[7];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:36:03.040

只是为了理智，我把这里写的所有不同的笔记结合起来。这段代码更简洁一些，并且有一些验证。

尝试这个：

```
string dir = @"\\198.0.0.4\e$\Globus\LIVE\bnk.run\URA.BP\WEBOUT\";
foreach (string fileName2 in Directory.GetFiles(dir)) {
    StreamReader st = new StreamReader(fileName2);
    while (!sr.EndOfStream)  {
        string line = sr.ReadLine();
        if (!String.IsNullOrEmpty(line)) {
            string[] columns = line.Split(',');
            if (columns.Length == 8) {
                string prnout = columns[0];
                string tinout = columns[1];
                string amtout = columns[2];
                string valdate = columns[3];
                string paydate = columns[4];
                string status = columns[5];
                string branch = columns[6];
                string reference = columns[7];
            }
        }
    }
} 
```

编辑：正如其他一些用户所评论的，CSV 格式也接受文本限定符，这通常意味着双引号 (")。例如，文本限定行可能如下所示：

```
user,"Hello!",123.23,"$123,123.12",and so on, 
```

当您拥有像这样完全格式化的文件时，编写 CSV 解析代码会稍微复杂一些。多年来，我一直在解析格式不正确的 CSV 文件，我编写了一个几乎通过所有单元测试的标准代码脚本，但解释起来很痛苦。

```
/// <summary>
/// Read in a line of text, and use the Add() function to add these items to the current CSV structure
/// </summary>
/// <param name="s"></param>
public static bool TryParseLine(string s, char delimiter, char text_qualifier, out string[] array)
{
    bool success = true;
    List<string> list = new List<string>();
    StringBuilder work = new StringBuilder();
    for (int i = 0; i < s.Length; i++) {
        char c = s[i];

        // If we are starting a new field, is this field text qualified?
        if ((c == text_qualifier) && (work.Length == 0)) {
            int p2;
            while (true) {
                p2 = s.IndexOf(text_qualifier, i + 1);

                // for some reason, this text qualifier is broken
                if (p2 < 0) {
                    work.Append(s.Substring(i + 1));
                    i = s.Length;
                    success = false;
                    break;
                }

                // Append this qualified string
                work.Append(s.Substring(i + 1, p2 - i - 1));
                i = p2;

                // If this is a double quote, keep going!
                if (((p2 + 1) < s.Length) && (s[p2 + 1] == text_qualifier)) {
                    work.Append(text_qualifier);
                    i++;

                    // otherwise, this is a single qualifier, we're done
                } else {
                    break;
                }
            }

            // Does this start a new field?
        } else if (c == delimiter) {
            list.Add(work.ToString());
            work.Length = 0;

            // Test for special case: when the user has written a casual comma, space, and text qualifier, skip the space
            // Checks if the second parameter of the if statement will pass through successfully
            // e.g. "bob", "mary", "bill"
            if (i + 2 <= s.Length - 1) {
                if (s[i + 1].Equals(' ') && s[i + 2].Equals(text_qualifier)) {
                    i++;
                }
            }
        } else {
            work.Append(c);
        }
    }
    list.Add(work.ToString());

    // If we have nothing in the list, and it's possible that this might be a tab delimited list, try that before giving up
    if (list.Count == 1 && delimiter != DEFAULT_TAB_DELIMITER) {
        string[] tab_delimited_array = ParseLine(s, DEFAULT_TAB_DELIMITER, DEFAULT_QUALIFIER);
        if (tab_delimited_array.Length > list.Count) {
            array = tab_delimited_array;
            return success;
        }
    }

    // Return the array we parsed
    array = list.ToArray();
    return success;
} 
```

您应该注意，即使该算法如此复杂，它仍然无法解析在文本限定值中嵌入换行符的 CSV 文件，例如：

```
123,"Hi, I am a CSV File!
I am saying hello to you!
But I also have embedded newlines in my text.",2012-07-23 
```

为了解决这些问题，我有一个多行解析器，它使用 Try() 功能添加额外的文本行来验证主函数是否正常工作：

```
/// <summary>
/// Parse a line whose values may include newline symbols or CR/LF
/// </summary>
/// <param name="sr"></param>
/// <returns></returns>
public static string[] ParseMultiLine(StreamReader sr, char delimiter, char text_qualifier)
{
    StringBuilder sb = new StringBuilder();
    string[] array = null;
    while (!sr.EndOfStream) {

        // Read in a line
        sb.Append(sr.ReadLine());

        // Does it parse?
        string s = sb.ToString();
        if (TryParseLine(s, delimiter, text_qualifier, out array)) {
            return array;
        }
    }

    // Fails to parse - return the best array we were able to get
    return array;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T16:28:13.357

甚至没有看到 .csv 文件就很难猜到，但我的第一个是你没有 8 列。

如果您可以显示原始 .csv 文件并告诉我们异常出现的位置会更容易。

编辑：如果您认为数据没问题，我建议您调试并查看拆分调用在 Visual Studio 中返回的内容。这可能会有所帮助

编辑2：由于您是在循环中进行该处理，因此请确保每行至少有 8 列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T16:29:39.153

我的钱花在了坏数据文件上。如果这是等式中唯一发生变化的事情（也就是您没有进行任何代码更改），那么这几乎是您唯一的选择。

如果您的数据文件不太长，请在此处发布，我们可以肯定地告诉您。

您可以添加如下内容来检查无效的列长度：

```
while (st.Peek() >= 0)
{
    String report1 = st.ReadLine();
    String[] columns = report1.Split(','); //split columns 

    if(columns.Length < 8)
    {
         //Log something useful, throw an exception, whatever.  
         //You have the option to quitely note that there was a problem and 
         //continue on processing the rest of the file if you want.
         continue;
    }

    //working with columns below
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T16:30:14.743

由于您不知道 csv 文件中有多少列，您可能需要测试长度：

```
if (columns.Length == 8) {
     String prnout = columns[0];
     String tinout = columns[1];
     ...
} 
```

我敢打赌你只是得到了一个空行（最后是额外的 EOL），就这么简单

# javascript - 双引号/单引号的正则表达式

> ID：11616550
> 
> 赞同：3
> 
> 时间：2012-07-23T16:25:06.630
> 
> 标签：javascript, regex, string, replace, double-quotes

我目前正在使用正则表达式（在 Javascript 中）用智能引号替换双引号：

```
// ie: "quotation" to &ldquo;quotation&rdquo; 
```

这是我用来替换双引号的表达式：

```
str = str.replace(/"([A-Za-z ]*)"/ig, "&ldquo;$1&rdquo;") 
```

如果引号内的短语不包含额外的标点符号，则上述内容非常有效，但是，我还需要替换任何撇号：

```
// ie: replace "It's raining again" with &ldquo;It&rsquo;s raining again!&rdquo; 
```

如果不封装，替换单引号/撇号的表达式可以正常工作：

```
str.replace(/\'\b/g, "&rsquo;"); // returns it's as it&rsquo;s correctly

// Using both:
str.replace(/"([A-Za-z ]*)"/ig, "&ldquo;$1&rdquo;").replace(/\'\b/g, "&rsquo;");

// "It's raining again!" returns as "It&rsquo;s raining again!"
// Ignores double quotes 
```

我知道这是因为替换双引号的表达式仅与字母匹配，但我对正则表达式的有限经验让我对如何为可能还包含单引号的引号创建匹配感到困惑！

任何帮助将不胜感激！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:30:56.420

您可以在引号中包含除引号之外的所有内容：

```
str = str.replace(/"([^"]*)"/ig, "&ldquo;$1&rdquo;") 
```

另一种选择：使用非贪婪搜索：

```
str = str.replace(/"(.*?)"/ig, "&ldquo;$1&rdquo;") 
```

此外，我不确定您是否只需要更改单词末尾的单引号。改变所有这些会更好吗？

```
replace(/\'/g, "&rsquo;"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T16:31:22.163

您可以搜索任何不是`"`. 如果你有类似的`?`东西，我也会做一个懒惰的匹配：`"Hey," she said, "what's up?"``str`

```
str.replace(/"([^"]*?)"/ig, "&ldquo;$1&rdquo;").replace(/\'\b/g, "&rsquo;"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T16:54:55.493

只是为了添加到当前答案，您正在`[A-Za-z ]*`为双引号替换执行匹配，这意味着“匹配大写、小写或空格”。这不会 match `It's raining`，因为您的 match 表达式不包含单引号。

遵循匹配“除了另一个双引号之外的任何内容”的建议，因为使用您的原始正则表达式`She said "It's raining outside." He said "really?"`会产生一个类似的字符串`She said &rdquo;It's raining outside." He said "really?&rdquo;`（贪婪匹配将跳过“内部”双引号。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-08T16:57:43.370

限制引号左右的特殊字符是个好主意，尤其是在 html 文件中出现这种情况时。我正在使用这个。

```
str = str.replace(/([\n >*_-])"([A-Za-z0-9 ÆØÅæøå.,:;!#@]*)"([ -.,!<\n])/ig, "$1«$2»$3"); 
```

通过这种方式，您可以避免替换 html-tags 中的引号，例如 href="http.....

正常情况下，开引号的左边有一个空格，结束引号的右边还有一个空格。在 html 文档中，它可能是一个右括号、一个新行等。我还包括了挪威字符。:-)

# zend-framework - 如何在将不同的参数传递给每个实例的同时重用 paginationControl 部分

> ID：11616552
> 
> 赞同：0
> 
> 时间：2012-07-23T16:25:16.340
> 
> 标签：zend-framework, zend-paginator

我正在使用 paginationControl 部分，并通过第四个参数传递参数以允许我对“过滤”结果进行分页。这很好，但我希望能够对所有分页实例使用相同的部分，即使它们将使用不同的参数。

例如，“属性”按否过滤。卧室

在...的视图脚本中的分页控件实例中给出第四个参数

```
array('beds' => '$beds') 
```

并用于部分...

```
$this->beds 
```

而“客户”按位置过滤

在...的视图脚本中的分页控件实例中给出第四个参数

```
array('location' => '$location') 
```

并用于部分...

```
$this->location 
```

如何最好地做到这一点？我可以将第 4 个参数作为键和值的数组访问，并遍历数组并在 paginationControl 部分中为 url 视图帮助程序构建参数，如果我可以弄清楚如何访问该数组。但是，也许这不是采取的方法。

谢谢。

**编辑：**

这是我用来输出评论中要求的分页控件的部分内容。

```
 <div class="pagination">
      <div class="pages">

          <!-- First page link -->
             <?php if (isset($this->previous)): ?>
                <a href="<?= $this->url() . "?" . http_build_query(array('group_id' => $this->group_id, 'page' => $this->first)); ?>">Start</a>
          <?php else: ?>
                  <span class="disabled">Start</span>
          <?php endif; ?>

          <!-- Previous page link -->
          <?php if (isset($this->previous)): ?>
                <a href="<?= $this->url() . "?" . http_build_query(array('group_id' => $this->group_id, 'page' => $this->previous)); ?>">Previous</a>
          <?php else: ?>
              <span class="disabled">Previous</span>
          <?php endif; ?>
          <!-- Numbered page links -->

          <?php foreach ($this->pagesInRange as $page): ?>
              <?php if ($page != $this->current): ?>
                  <a href="<?= $this->url() . "?" . http_build_query(array('group_id' => $this->group_id, 'page' => $page)); ?>"><?= $page; ?></a>
              <?php else: ?>
                  <span class="current"><?= $page; ?></span>
              <?php endif; ?>
          <?php endforeach; ?>

          <!-- Next page link -->
          <?php if (isset($this->next)): ?>
                <a href="<?= $this->url() . "?" . http_build_query(array('group_id' => $this->group_id, 'page' => $this->next)); ?>">Next</a>
          <?php else: ?>
               <span class="disabled">Next</span>
          <?php endif; ?>

          <!-- Last page link -->
          <?php if (isset($this->next)): ?>
                <a href="<?= $this->url() . "?" . http_build_query(array('group_id' => $this->group_id, 'page' => $this->last)); ?>">End</a>
          <?php else: ?>
              <span class="disabled">End</span>
          <?php endif; ?>
      </div>
    </div> 
```

**更新：**

我接受了 RockyFords 解决方案，因为它回答了在分页控件部分实例化中访问通过第四个参数传递的参数的基本问题。但是，我将完整的 fina 部分包含在此处，以防其他读者希望结果参数生成查询字符串。

```
<div class="pagination">
  <div class="pages">
 <?php 
   $params = Zend_Controller_Front::getInstance()->getRequest()->getParams();
   unset($params['controller']);
   unset($params['action']);
 ?>

  <?= $this->first ?> 
  <!-- First page link -->
  <?php if (isset($this->previous)): ?>
        <a href="<?= $this->url() . "?" . http_build_query(array_merge($params , array('page' => $this->first))); ?>">Start</a>
  <?php else: ?>
        <span class="disabled">Start</span>
  <?php endif; ?>

  <!-- Previous page link -->
  <?php if (isset($this->previous)): ?>
        <a href="<?= $this->url() . "?" . http_build_query(array_merge($params , array('page' => $this->previous))); ?>">Previous</a>
  <?php else: ?>
       <span class="disabled">Previous</span>
  <?php endif; ?>
  <!-- Numbered page links -->

  <?php foreach ($this->pagesInRange as $page): ?>
      <?php if ($page != $this->current): ?>
          <a href="<?= $this->url() . "?" . http_build_query(array_merge($params , array('page' => $page))); ?>"><?= $page; ?></a>
      <?php else: ?>
          <span class="current"><?= $page; ?></span>
      <?php endif; ?>
  <?php endforeach; ?>

  <!-- Next page link -->
  <?php if (isset($this->next)): ?>
        <a href="<?= $this->url() . "?" . http_build_query(array_merge($params , array('page' => $this->next))); ?>">Next</a>
  <?php else: ?>
       <span class="disabled">Next</span>
  <?php endif; ?>

  <!-- Last page link -->
  <?php if (isset($this->next)): ?>
        <a href="<?= $this->url() . "?" . http_build_query(array_merge($params , array('page' => $this->last))); ?>">End</a>
  <?php else: ?>
      <span class="disabled">End</span>
  <?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T05:48:33.687

我想我明白了...

尝试类似：

```
<?php
if ($this->pageCount) :
    //you need to add each of the request parameters to url
    $params = Zend_Controller_Front::getInstance()
                    ->getRequest()->getParams();
    //remove the system parameters, $this->url will put them back
    unset($params['module']);
    unset($params['controller']);
    unset($params['action']);
    ?>
    <div class="paginationControl">         
                    <!--First Page Link -->
                    <?php if (isset($this->first)): ?>
                        <a href="<?php
                echo $this->url(array_merge($params, array('page' => $this->first)))
                        ?>">
                            &lt; First</a>
                    <?php else : ?>
                        <span class="disabled">&lt; First</span>
                    <?php endif ?>

                    <!--Previous Page Links-->
                    <?php if (isset($this->previous)) : ?>
                        <a href="<?php
                echo $this->url(array_merge($params, array('page' => $this->previous)))
                        ?>">
                            &lt; Prev</a>
                    <?php else : ?>
                        <span class="disabled">&lt; Prev</span>
                    <?php endif ?>
                <!--truncated ...--> 
```

使用与此类似的分页控件，您将能够将任何用户设置的参数传回 url。上面的第一个 if() 是非常重要的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:04:37.870

你不需要使用这个：

```
$params = Zend_Controller_Front::getInstance()->getRequest()->getParams(); 
```

您只需要查询数组：

```
$array = Zend_Controller_Front::getInstance()->getRequest()->getQuery(); 
```

这将使您不必取消设置变量，因为您将获得一个仅包含查询字符串的漂亮数组:)

# java - 比较2个字符串以查找它们是否包含与java相同的单词

> ID：11616558
> 
> 赞同：0
> 
> 时间：2012-07-23T16:26:01.780
> 
> 标签：java, search, levenshtein-distance

我正在使用 Levenshtein 距离，这是一个字符串度量，用于测量两个序列之间的差异量，以找到两个字符串之间的差异百分比。我想使用更好的方法来声明字符串是相似的使用字符串中的单词。

例如：假设我有一个包含 2 个段落的字符串，而第二个字符串仅包含第一个字符串的第二个段落。

我知道我可以比较每个字符串的第一个单词，然后是第二个等，但是如果发生像我提出的最后一个示例这样的情况，那将无效。

我在想也许将第一个字符串中的第一个单词与第二个字符串中的所有单词进行比较，但我担心这会使过程非常缓慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:48:10.717

将第一个字符串中的每个单词与第二个字符串中的所有单词进行比较可能会产生比 Levenshtein 距离稍好的性能，但数量级相同。Levenstein 距离为 O(m*n)，您的算法为 O(m^2)（其中 m 和 n 是字符串的长度）。

如果您只关心匹配**单词**（例如“color”和“color”将被视为两个完全不同**的字符串）并且忽略单词顺序**（例如“red color”和“color red”将被视为两个相同的字符串）和您不关心算法的空间复杂度，您可以创建第一个字符串的单词索引（例如哈希表），然后将第二个字符串中的每个单词与该索引进行比较。如果您的索引使用具有恒定时间插入和删除的数据结构，这会产生复杂度 O(m+n) 的算法。

# html - CSS 表 - 不考虑溢出的列

> ID：11616562
> 
> 赞同：1
> 
> 时间：2012-07-23T16:26:08.537
> 
> 标签：html, css, overflow, css-tables

我有一个表格，里面有几列，第二列有很多文本，将其他列推到右边太远。我希望我的桌子保持原样，如果一列中的文本太多而无法切断。我还应该提到我试图避免使用`table-layout:fixed`and `position:absolute`。这是我的代码：

**HTML**：

```
<table id="messages_list" class="listing rows clickable">
  <tbody>
    <tr>
      <th class="select"><input id="all" type="checkbox"></th>
      <th class="from">To</th>
      <th class="subject">Subject</th>
      <th class="date">Date</th>
    </tr>
    <tr class="item even " data-thread-id="16">
      <td class="first"><input class="checkbox" type="checkbox" name="id:16"></td>
      <td>LastName, FirstName, LastName2, FirstName2, LastName3, FirstName3, LastName4, FirstName4</td>
      <td>Hello</td>
      <td class="last">07/16/2012 12:26</td>
    </tr>
  </tbody>
</table> 
```

**CSS**：

```
table.listing {
  border: 0;
  border-spacing: 0;
  width: 100%;
  margin-bottom: 1em;
  overflow: hidden;
  white-space: nowrap;
}
table.listing th {
  padding: 4px 8px;
  font-size: 12px;
  background: #002A80;
  text-decoration: none !important;
  color: white !important;
  font-weight: bold;
  text-align: left;
}
th.select { 
  width: 10px; 
}
th.from { /* This is the column giving me problems */
  width: 20%;
  overflow: hidden;
}
th.date {
  width: 1%;
} 
```

## **活生生的例子：[廷克宾](http://tinkerbin.com/fyWMobKs)**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:29:01.570

将以下内容添加到`td`包含长文本的内容中。

```
style="word-break:break-word" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T16:36:22.930

您实际上并没有将溢出应用到正确的单元格。这`th.from`只是标题单元格，尽管这足以设置宽度，但该`overflow`属性不会进入该列中的其他单元格。

您需要`overflow: hidden`在 all 上设置`td`，使用第二个项目类型伪选择器，或者最简单的方法是将 from 类放在 the`td`和 style`td.from`上`th.from`。

看来您还需要`table-layout: fixed;`在桌子上或类似的东西上设置。表格喜欢调整大小以适合其内容，并且您的整个表格似乎正在调整大小以适合您明确告诉它不要换行的内容。我不能告诉你为什么它更喜欢扩展表格而不是隐藏溢出，但这是给你的表格。

table-layout 属性将告诉它仅根据您给它的尺寸呈现大小，而不是尝试根据内容计算出要制作多大的东西。这意味着像日期列上的 1% 宽度之类的东西可能会截断该列（除了在非常宽的屏幕上）。

我不确定是否有一种简单的方法可以在进行溢出并保持良好的大小调整时关闭包装。我认为固定布局表可能是您唯一的选择。

# ruby - 猴子补丁问题

> ID：11616565
> 
> 赞同：0
> 
> 时间：2012-07-23T16:26:25.140
> 
> 标签：ruby, monkeypatching

我正在使用 Ruby 1.9.2-p180。以下代码会引发错误：

> “test.rb:20:in `': main:Object (NameError) 的未定义局部变量或方法 `val'”

有没有办法让猴子修补工作返回`val`？

```
class Test
  def m
    "m"
  end
end

def inject(testObj, val)
  def testObj.m
    val
  end

  testObj
end

t = Test.new
puts t.m
puts inject(t, val).m 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T16:43:27.333

直接的问题是，在第 20 行，您正在调用

```
puts inject(t, val).m 
```

即您将`val`作为参数传递给`inject`，但您从未实际定义过`val`。您需要传递一个实际值，例如：

```
puts inject(t, 'Hello, World!').m 
```

或者`val`先定义：

```
val = 42
puts inject(t, val).m 
```

但是，如果你这样做，你会得到一个新的错误：

```
NameError: undefined local variable or method `val' for #<Test:0x007fa1228439b8> 
```

原因是在 Ruby 中，只有块可以是闭包。方法不会关闭它们周围的词汇环境。

这意味着这里：

```
def inject(testObj, val)
  def testObj.m
    val
  end

  testObj
end 
```

你有

*   `val`中未使用的方法参数`inject`
*   `val`对名为in的方法的完全不相关的方法调用`testObj.m`

如果要访问周围的范围，则需要使用块。值得庆幸的是，有一个（系列）方法采用块并定义方法：

```
def inject(testObj, val)
  testObj.define_singleton_method(:m) do
    val
  end

  testObj
end 
```

现在，一切都按预期工作：

```
puts inject(t, 'Hello, World!').m
# Hello, World! 
```

# boolean-logic - 退货案例的逻辑表示

> ID：11616566
> 
> 赞同：0
> 
> 时间：2012-07-23T16:26:26.200
> 
> 标签：boolean-logic, boolean-expression, mathematical-expressions

我试图将这个伪代码函数的返回案例表示为一个表达式。专门说明(A==X)&&(B==Y)时执行哪个return case

枚举定义为 {X, Y, Z}

```
Enum function(Enum A,Enum B)
    if ((A==X)||(B==X))
        return X
    else if ((A==Y)||(B==Y))
        return Y
    else
        return Z 
```

有谁知道如何正确地做到这一点。我试图使用 6 变量 Kmap，但我的答案似乎不正确。我得到的最接近的是以下内容：

```
R1 is the return case X
R2 is the return case Y
R3 is the return case Z

R1: ((A==X)||(B==X))
R2: ((!R1)&&((A==Y)||(B==Y)))
    (((!((A==X)||(B==X)))&&((A==Y)||(B==Y)))
R3: (!R2)
    (!(((!((A==X)||(B==X)))&&((A==Y)||(B==Y)))) 
```

但是当我去申请的时候！操纵我迷路的代表的案例。它会遵循类似于布尔逻辑的东西，其中 OR 变为 AND 并且 == 将变为 != ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:42:36.567

这是相同的逻辑。你在谈论德摩根定律。他们可能会在学校教你三到四种不同的方法来做同样的逻辑问题，用不同的符号来迷惑你。逻辑完全一样。不同的学科只是有自己的约定。

# powershell - 如何创建只读属性

> ID：11616567
> 
> 赞同：2
> 
> 时间：2012-07-23T16:26:31.053
> 
> 标签：powershell

当我运行此代码时，它会导致 $o 具有一个没有值的 Name 属性，即使我将“MyObj”作为名称传递。我究竟做错了什么？

谢谢你的帮助。

```
function CreateSomething {
    param( [string] $name )

    $o = new-object PSObject
    write-host '$name:' $name
    $o | add-member -name Name -passThru -force -memberType ScriptProperty -value { $name }
   $o
}

$o = CreateSomething -name MyObj
$o 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T16:44:20.763

你想在这里达到什么目的？

将`-value { $name }`是用于 ScriptProperty 的脚本块，它不知道`$name`（它不在范围内）

你可以这样做：

```
$o | add-member -name Name -passThru -force -memberType ScriptProperty -value { $name }.GetNewClosure() 
```

我不明白为什么你不能这样做：

```
$o | add-member -name Name -passThru -force -memberType NoteProperty -value $name 
```

注意：由于您`-passThru`在上述语句中使用，您可以省略`$o`函数最后一行中的 lone。

# iphone - 如何在截屏之前知道用户何时按下了 iOS 设备上的硬按钮？

> ID：11616569
> 
> 赞同：0
> 
> 时间：2012-07-23T16:26:35.207
> 
> 标签：iphone, listener, screenshot, tombstoning

在 iOS 上，当用户按下硬按钮时，系统似乎会截取应用程序的状态（以便在应用程序下次启动时显示，以使加载对用户透明）然后它调用 UIApplicationDelegate 的 applicationDidEnterBackground 来指示它进入后台状态的应用程序。那正确吗 ？

我需要做的是知道用户在系统截屏之前按下了硬按钮。实际上，我想在进入后台状态时修改我的视图，因为我想在将来再次启动应用程序时隐藏一些东西。

截屏后似乎调用了 applicationDidEnterBackground 。有没有办法被称为 BEFORE ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:32:38.550

您可以使用`UIApplicationWillResignActiveNotification`通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T16:29:02.853

`- (void)applicationWillResignActive:(UIApplication *)application`可能会在截屏之前运行。之前调用它`- (void)applicationDidEnterBackground:(UIApplication *)application`。如果它没有在屏幕截图之前运行，那么我认为您将无法在不使用私有 API 的情况下更改重新打开屏幕截图的数据。

# windows - 使用搜索词打开 Windows 资源管理器查找窗格

> ID：11616570
> 
> 赞同：3
> 
> 时间：2012-07-23T16:26:43.583
> 
> 标签：windows, windows-xp, command, find, explorer

我正在尝试创建一个应用程序，该应用程序打开 Windows 资源管理器搜索功能并搜索输入了指定术语的文件/文件夹。我已经有 Windows 索引服务引入的 Windows Vista SP1+（使用“search:query=”）命令的代码。这在 Windows XP 中不起作用，因此我正在寻找一个命令/代码（命令行、批处理脚本、c++ 等），该命令/代码将在“查找文件/文件夹”模式下打开 Windows 资源管理器，同时输入搜索词（使用命令从应用程序发送）。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-04-10T22:28:10.237

Yes, there is a (really long) command that can do a search.

```
explorer.exe search-ms:displayname=Search Results (or put whatever title you want)&crumb=System.Generic.String%3A(search string)&crumb=location:(path) 
```

Here's a breakdown of how it works:

If you run `explorer.exe path`, it will open the path you specify.
If you do a search and click on the icon used to show a path, it will show you a really long string of data. You can enter it as a path, and it will take you right back to the search.
In case you haven't figured it out, you can enter a command to take you to that path, therefore running a search.

# android - 内存不足时，Android不会从堆栈中杀死活动

> ID：11616575
> 
> 赞同：10
> 
> 时间：2012-07-23T16:26:55.983
> 
> 标签：android, android-activity, out-of-memory

我们一直在开发一个应用程序，它有一个下拉仪表板，允许用户在整个应用程序中导航。导航不是很标准，因为几乎每个活动都可以访问此菜单。在使用菜单打开活动一段时间后，堆栈开始增长。

所有这些活动都包含列表视图，里面有几个图像视图，每个大约需要 3mb。如果用户玩得足够多并在堆栈上创建超过 25 个活动，则会发生以下情况：

1.  抛出内存不足错误（堆增加直到没有更多的堆）。
2.  由于异常而显示一个对话框（不幸的是，%activity% 已停止。）
3.  抛出 outofmemerror 的活动已完成。
4.  堆栈中的所有活动都已完成，但保留了历史记录，因此可以备份，并且每个活动都由操作系统自动重新创建。

我期待系统在抛出 OutOfMemoryError 之前自动杀死堆栈中最旧的活动......

为了确保操作系统不会杀死旧的活动，我创建了一个每次分配 1mb 的测试应用程序。你猜怎么着：行为是一样的，并且抛出了 outofmemerror：

问题是：如果需要，我们如何告诉 Android 操作系统允许释放活动及其资源，这样我们就不会得到“不幸的是，您的活动已停止”。对话？

概念证明

```
    包 com.gaspar.memorytest；

`import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MemoryTestActivity extends Activity {
    /** Called when the activity is first created. */

    private byte[] mData;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main1);
        ((Button)findViewById(R.id.button)).setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent i = new Intent(MemoryTestActivity.this, MemoryTestActivity.class);
                startActivity(i);
            }
        });  
        mData = new byte[1*1024*1024];
    }
}` 

            回答 #1

赞同：14

时间：2012-07-23T16:45:14.800

我期待系统在抛出 OutOfMemoryError 之前自动杀死堆栈中最旧的活动

Android 不这样做。Android 会终止进程以释放系统内存以供其他进程使用。它不会以类似的方式参与应用内内存使用。

如果需要，我们如何告诉 Android 操作系统允许释放活动及其资源，这样我们就不会收到“不幸的是，您的活动已停止”。对话？

你不能。

相反，您需要将应用程序设计为使用更少的活动，或者每个活动使用更少的资源。例如，您可以通过“回收”现有活动实例[`FLAG_ACTIVITY_REORDER_TO_FRONT`](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_REORDER_TO_FRONT)，或者（正如 Tornquist 先生指出的那样），您可以`finish()`自己手动进行活动。

在使用菜单打开活动一段时间后，堆栈开始增长。

您可能应该`FLAG_ACTIVITY_REORDER_TO_FRONT`在这些菜单项上使用，以便将现有活动带入任务中，而不是每次都创建新活动。

            回答 #2

赞同：1

时间：2012-07-23T16:31:04.003

`finish()`在您开始新活动时调用将释放您要离开的活动。这将阻止您使用后退按钮访问它，但它应该会减少内存。

            回答 #3

赞同：0

时间：2012-10-05T10:53:33.427

根据android开发人员指南，我还认为系统会杀死旧活动以释放内存：

“当系统停止您的一项活动时（例如，当新活动开始或任务移至后台时），如果需要恢复系统内存，系统可能会完全销毁该活动。发生这种情况时，有关活动状态的信息如果发生这种情况，系统仍然知道该活动在后堆栈中有一个位置，但是当活动被带到堆栈顶部时，系统必须重新创建它（而不是恢复它）。为了避免丢失用户的工作，您应该通过在您的活动中实现 onSaveInstanceState() 回调方法来主动保留它。”

见链接： 
 [android活动](http://developer.android.com/guide/components/tasks-and-back-stack.html#ActivityState)

            回答 #4

赞同：0

时间：2017-07-17T10:59:06.160

使用意图标志 FLAG_ACTIVITY_REORDER_TO_FRONT

```
 Intent i = new Intent(ActivityD.this, ActivityA.class);
  i.setFlags(FLAG_ACTIVITY_REORDER_TO_FRONT);
 startActivity(i); 
```

这将简单地将 ActivityA 带到堆栈的前面，并将 B 和 C 留在它们所在的位置，我相信这就是你想要的。如果你想从堆栈中删除它，你显然可以在 D 上调用 finish() 。

            回答 #5

赞同：0

时间：2020-04-13T02:48:31.343

[CommonsWare 的回答](https://stackoverflow.com/a/11616829/3040498)是正确的，除了你可以尝试这个策略来释放底部堆栈的活动内存：

*   删除所有片段和/或`setContentView(null)`
*   `onResume`: 调用`Activity#recreate()`，或者只是简单地创建新的片段实例并将其添加回您的视图层次结构。

一件重要的事情，不要依赖这些事件`onLowMemory`，`onTrimMemory`。因为它们仅在整个系统以低内存运行时才被调用，因此您的应用程序可能会在此之前耗尽内存。您必须跟踪进程的内存使用情况并在它占用过多内存时采取适当的措施：

```
val maxMemory = Runtime.getRuntime().maxMemory()
val freeMemory = Runtime.getRuntime().freeMemory()
val totalMemory = Runtime.getRuntime().totalMemory()
val remainMemoryPercent = (freeMemory + maxMemory - totalMemory) * 100f / maxMemory

// check remainMemoryPercent and take action 
```

            回答 #6

赞同：0

时间：2021-12-24T00:24:28.583

对于这个问题，我们不能告诉 Android OS 这样做。想想看，这个系统有很多应用程序，如果每个人都这么说，那就糟糕了。但是系统给了我们通知，我们可以用这种方法做到这一点。

```
//in applicaion class
public void onTrimMemory (int level) {
  //according to different level do different things.
  //for example TRIM_MEMORY_UI_HIDDEN to finish old activities 

} 
```

我们也可以让activity实现`ComponentCallbacks`，在它自己的类中实现`onLowMemeroy`，然后当activity开始注册它时，销毁unregister。我们可以`ActivityLifecycleCallbacks`用来自动实现它。

```
//in application class
registerActivityLifecycleCallbacks(new ActivityLifecycleCallbacks(){

   void onActivityCreated(@NonNull Activity activity, @Nullable Bundle savedInstanceState);{
if(activity instanceOf ){
    registerComponentCallbacks((ComponentCallbacks)activity)
  }
}

...
void onActivityDestroyed(@NonNull Activity activity);{
  if(activity instanceOf ){
    unregisterComponentCallbacks((ComponentCallbacks)activity)
  }

}

})

// in activity implement ComponentCallbacks, override onlowMemeroy method
void onLowMemory();{
  //finish or remove some resouce
} 
```

至于为什么Android操作系统不能分配，那是因为操作系统有两种内存分配方式。
一种方法是java垃圾分配。它进行对象分配。
另一种方式是low memory kill，保证进程有足够的内存。当内存不足以运行应用程序时，它会在后台杀死其他应用程序。
您在java垃圾分配方式中的活动无法分配，因为它由ActivityThread持有。所以不能配置。
为了释放内存，我们可以在收到内存不足通知时完成旧的活动。

```

# c# - 来自 dll 的新实例

> ID：11616576
> 
> 赞同：0
> 
> 时间：2012-07-23T16:27:05.797
> 
> 标签：c#

我有一个 Windows 应用程序。我将另一个应用程序的 dll 添加到它的引用中。第二个应用程序有一个名为 MainForm 的表单。我想从该 dll 创建一个新实例并从中运行 MainForm？可能吗？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:28:42.790

你的意思是这样的：

```
using Project2; // Or whatever.

...

Application.Run(new MainForm()); 
```

? 如果这没有帮助，您需要提供更多信息。

# database-design - 如何构建我的数据库表以允许用户关注多个表（人员、主题、问题等）

> ID：11616577
> 
> 赞同：0
> 
> 时间：2012-07-23T16:27:06.117
> 
> 标签：database-design, social-networking, web-deployment

我想允许我网站上的用户关注我网站上的其他用户和主题，但我不确定如何将它们结合起来。想想 quora 如何让您关注用户、主题、问题、编辑等。

为了关注用户，我将保持非常简单：

```
user_id: int
followers_id: int 
```

但这仅对用户有好处，所以我考虑了如何：

```
user_id: int
date: Date
following: int(could be topic_id or user_id)
following_type: text(topic or user) 
```

我有点不确定这是否是最好的方法，因为我必须解析类型来查询主题或用户表（但好处是因为所有数据都在一个表中，我可以快速获取所有数据一个查询的以下信息）。

这是最好的方法还是有更好的（更有效，可扩展等）方法来实现这一目标？我应该将每种追随者类型分成不同的表格吗？我真的不确定我应该考虑什么设计。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:11:08.943

显而易见的可能性是增加链接表——每个可以连接的项目的组合一个。

但是，通过使用继承¹来避免这种扩散可能更易于管理：

![在此处输入图像描述](../Images/9e9bd58210e9042af92feba19ca99686.png)

*（未显示各种后续对象之间的关系。）*

这样，无论有多少种可关注项（用户、主题、问题、编辑等），FOLLOWER 表都涵盖了它们。

通常有[3 种策略](https://stackoverflow.com/questions/9174200/how-to-create-multiple-one-to-ones/9178524#9178524)来表示关系数据库中的继承。有关更多信息，请查看[ERwin 方法指南](http://tangra.si.umich.edu/~radev/654/resources/ERMGALL.PDF)中的“子类型关系” 。

* * *

*¹又名类别、子类型、子类、泛化层次结构等。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:39:49.633

有几种不同的方法可以处理这个问题。如果您想继续使用关系数据库，您将创建一个连接表（或多个）来跟踪您的所有“关注”。

如果您有时间查看一些非关系数据库，例如 MongoDB 或 Redis，您将能够准确地跟踪您想要的内容。这些服务允许您构建具有不同参数的自定义数据类型。关于这种风格的 DB 可能值得一读。

# java - Java jar包搜索中的思考

> ID：11616580
> 
> 赞同：-2
> 
> 时间：2012-07-23T16:27:24.907
> 
> 标签：java, classpath, importerror

最近我正在阅读关于 Java 中的思考。我电脑中的代码不起作用，即使我设置了类路径。

“导入静态 net.mindview.util.*；” 我需要帮助。

```
package iteration;
import  static net.mindviwe.util.*;
public class Exercise1 {
public static void main(String[] args) {
    for(int i=0;i<=100;i++){
        System.out.println(i);
    }
    int i=0;
    while(i<=100){
        print(i+"  ");
        i++;
    }

} 
```

这是我的课程路径：

导出 JAVA_HOME=/opt/jdk1.7.0_05：

导出 CLASSPATH=.:/opt/ThinkingJava/TinkingInJava.jar:/opt/ThinkingJava/typeinfo-pets.jar:

导出 PATH=$PATH:$JAVA_HOME/bin:

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:42:39.127

我只是在猜测，因为您的问题相当模糊，但是您将“类路径”作为标签...

运行 JRE 时，必须指定 JVM 可以找到所需类的位置。在这种情况下，您的代码使用`net.mindviwe.util.*`包，该包可能位于名为 mindviwe.jar 之类的 JAR 文件中。您可以指定 JRE 应使用 -classpath 变量查看 mindviwe.jar。您还可以使用 CLASSPATH 环境变量。

这一切都在[维基百科中讨论过](http://en.wikipedia.org/wiki/Classpath_%28Java%29)

当然，您的包名称中似乎也有一个错字，您将“w”和“e”调换了（mindview **vs** mindvi **we**）。这也可能是您的问题。

# c# - 从 JavaScript 中的文本 URL 返回可点击的 URL

> ID：11616585
> 
> 赞同：0
> 
> 时间：2012-07-23T16:27:49.927
> 
> 标签：c#, javascript

我正在处理级联下拉列表。当最后一项被选中时，它会根据之前的所有选择从 .cs 列表中提取信息。这运作良好。但是，我希望显示的结果包括可点击的链接以及其他信息。现在我正在使用 document.write 打开一个带有链接的新窗口。这并不理想。

```
 function formatHyper(hyper) {
    var NewWindow = window.open('', 'name', 'height=660,width=650,status=1');
    var str = "Parts";

    NewWindow.document.write(str.link(hyper));

} 
```

超是文本链接。从如下所示的外部 .cs 文件调用：

```
public class PhonePrice
{
private static List<Phone> Phones = new List<Phone>{
    new Phone{Make="Apple",Model="iPhone    4",Carrier="ATT",Colour="black",Price=00.00f,Hyper="http://www.google.com"}, 
```

当我完成最后一个下拉选择时，它将显示有关我的选择的信息，但随后会打开一个仅包含链接的新窗口。如果我删除 NewWindow 变量，它将仅加载当前页面中的链接，从而使其无法看到任何其他返回的数据。

我希望它像货币一样工作。但不是添加 $ 我希望它将文本转换为 URL

```
 function formatPrice(price) {
    return "$" + price.toFixed(2);
} 
```

这是在新窗口中打开可点击链接时的样子。我希望可点击的链接出现在未定义的位置。

**Apple iPhone 4
Carrier ATT
颜色：黑色
Hyper：未定义
价格：00.00 美元**

请帮忙！！

[这是完整代码的链接](http://www.2shared.com/file/fFgPZGQm/CDD.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T17:56:08.387

CascadingDropDowns.cshtml 文件的第 23 行。改变：

```
<p>Hyper: ${formatHyper(Hyper)}</p> 
```

至：

```
<p>Hyper: <a id="link">${formathyper(hyper)}</a></p> 
```

如果只有一个链接，那么这将起作用。如果可能不止一个，那么您需要使每个 ID 与超值匹配（假设它是唯一的）。

我无法用您的代码对此进行测试，但它应该可以工作。第一个答案的功能：

```
<script type="text/javascript"> 
var texttheysee = 'My Link'; 
$(function formathyper(hyper) { 
    $('a#link').attr('href', hyper); 
    $('a#link').text(texttheysee); 
}); 

</script> 
```

# c++ - 如何检测 Poco 子进程何时崩溃？

> ID：11616589
> 
> 赞同：1
> 
> 时间：2012-07-23T16:28:11.653
> 
> 标签：c++, c++11, poco-libraries

我正在使用 Poco 在我的应用程序中创建一个进程。如果进程正常退出或崩溃，我想重新启动该进程。

目前启动如下：

```
ProcessHandle ph = Process::launch( "foo.exe", args, 0, &outPipe, 0);
PipeInputStream istr(outPipe);
std::string s;
int c = istr.get();
while (c != -1)
{ 
    s += (char) c; c = istr.get(); 
} 
```

如上所示，通过等待输出堆结束来轻松处理优雅退出。

进程崩溃时如何处理？我需要在 Windows 和 Linux 上处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T05:55:50.173

在不同的线程中使用对象的[wait()](http://pocoproject.org/docs/Poco.ProcessHandle.html#9804)函数。`ProcessHandle`当 wait() 调用返回时，进程已终止。通常崩溃的进程有一个非零退出代码，并且`wait()`调用返回该退出代码

# php - MSSQL/PHP 存储过程调用和执行

> ID：11616592
> 
> 赞同：0
> 
> 时间：2012-07-23T16:28:13.450
> 
> 标签：php, sql-server, stored-procedures

我正在尝试访问存储过程，让它执行并使用 html 表来显示结果。我现在使用带有 mssql_init 和 mssql_execute 的 PHP.net 的代码：

```
?php
$month = $_POST['month'];
$year = $_POST['year'];
$dayfrm = $_POST['creditfrm'];
$dayto = $_POST['creditto'];
$crdayfrm = date("F j, Y", strtotime($dayfrm));
$crdayto = date("F j, Y", strtotime($dayto));
$monthhd = date("F Y", strtotime("$year-$month"));
$monthfrm = date("Y-m-d", strtotime("$year-$month"));
$monthto = date("Y-m-d", strtotime("$year-$month . +1 month"));
echo $monthfrm;
echo $monthto;
$date = date("F j,Y");
$stopro = "usp_CreditMemo";

if ($_POST['credsubmit']) {
        include('includes/header.php');
        echo "<title>Credit Memo Report for $monthhd</title>";
        print('<link rel="Shortcut Icon" href="liferay.ico" />');
        print('<head>');
        print('<link href="helper.css" media="screen" rel="stylesheet" type="text/css" />');
        print('<link href="dropdown.css" media="screen" rel="stylesheet" type="text/css" />');
        print('<link href="default.css" media="screen" rel="stylesheet" type="text/css" />');
//      include('includes/connection.php');
// Performing SQL query
$db = mssql_connect("10.xx.xx.xx","UN","PW");
mssql_select_db("DBName",$db);
$stmt = mssql_init('usp_StoredName');
mssql_bind($stmt, '@dateFrom',  '2012-05-01',   'SQLINT4',      false,  false,  20);
mssql_bind($stmt, '@dateTo',    '2012-06-01',   'SQLINT4',      false,  false,  20);
$result = mssql_execute($stmt)  or die('Query failed: ' . mssql_get_last_message());
// Printing results in HTML
echo "<h2 align=center style=margin-top:20>Credit Memo Report for: $monthhd</h2>";
echo "<table class=rptstable width=80%>\n";
print('<tr class="trstyle"><td>ID</td><td>DDI</td><td>Date</td><td>Amount</td><td>Name</td><td>Comments</td><td>Internal</td><td>Racker</td><td>Consolidated Inv.</td></tr>');
while ($line = mssql_fetch_array($result, MSSQL_ASSOC)) {
  echo "\t<tr>\n";
  foreach ($line as $col_value) {
      echo "\t\t<td>$col_value</td>\n";
  }
  echo "\t</tr>\n";
}
echo "</table>\n";// Free resultset
mssql_free_result($result);// Closing connection
mssql_close($db);
} 
```

当我这样做时，我得到一个空白页。如果我取出 mssql_bind，它会收到一条错误消息，指出存储过程需要 @date 输入。但是，他将其绑定为白页，没有错误消息显示，这一直意味着语法错误。我希望能够从名为 $monthfrm 和 $monthto 的表单中传递变量，但一次执行步骤。

每隔一段时间，根据我放入或取出的内容，我会收到一条错误消息，提示查询失败：将数据库上下文更改为“DBname”。

# algorithm - 二维矢量图形的最佳数据存储算法

> ID：11616594
> 
> 赞同：2
> 
> 时间：2012-07-23T16:28:16.633
> 
> 标签：algorithm, opengl, graphics, vector, 2d

我正在研究我希望是一个非常简单易用但功能强大的 2D 跨平台 CAD 软件包。我知道周围已经有一些这样的，但我这样做更多是为了学习经验而不是其他任何事情。

我正在使用 OpenGL 进行渲染，并且我希望能够在鼠标移过它时突出显示每个实体。我有用于查找实体上最近点的算法等，但我不想为每个动作扫描整个实体数据存储。

我看过四叉树、kd 树等，但我迷失的是如何使用它们来缩小整个实体的焦点。我见过的大多数示例似乎都是面向“点”的。我假设我想根据边界矩形进行索引，然后在该矩形内搜索那些实体的最近点。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:59:22.757

听起来您正在寻找类似[R-trees](http://en.wikipedia.org/wiki/R-tree)的东西，它们是基于轴方向边界框的树，其中（与 Kd 树不同）兄弟子树的框允许重叠。如果我没记错的话，有许多基于不同更新启发式的变体。

关于空间数据结构的权威参考，其中包括很多关于 R-trees 及其亲属的内容：

*   *多维和度量数据结构*的基础, Hanan Samet

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T16:47:32.263

思考“Kd 树”走向了正确的方向。现在您必须更进一步，将您的点扩展到具有位置和附加参数的多维图元。毕竟，Kd 的意思是“K 个维度”。

因此，对于圆或圆弧，您可以将中心位置存储在树的前两个维度中，然后将半径存储在第三个维度中（对于一组 2d 基元）。对于所有其他非圆形的基元，只需假设一个圆形边界区域。

对于线性基元，您可能需要查看 BSP 树。当然，您可以将 Kd 的概念与 BSP 结合起来，例如将 Kd 类节点用于弯曲图元，将 BSP 用于以线性凸段为界的图元。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T16:55:20.003

空间分区背后的想法是减少您需要执行的测试数量（及其计算需求），以便获得可以使用更精细方法测试的基元子集。

您必须使用整个实体的边界框并首先确定移动鼠标时位于鼠标下方的实体是正确的。

您还有其他一些选择：

1.  [如此](http://www.serpentine.com/blog/2007/01/11/two-dimensional-spatial-hashing-with-space-filling-curves/)链接中所示的空间散列。这允许您使用低成本距离函数（这适用于 2D，但易于扩展到 3D）执行线性（或分层）搜索。
2.  OpenGL 拾取 - 如果您在渲染代码中实现了足够好的剔除方法，则可以使用[OpenGL 拾取](http://www.lighthouse3d.com/opengl/picking/)来快速确定鼠标下的当前对象。如果你的剔除代码很快，这也会很快。

还有许多其他我确定我错过了 - 我会在我想到更多时添加它们。：） 希望这可以帮助！

# php - ReflectionFunctionAbstract::getClosureThis() 的目的是什么？

> ID：11616595
> 
> 赞同：4
> 
> 时间：2012-07-23T16:28:20.440
> 
> 标签：php, closures, php-5.3

随着PHP 5.3中[闭包的引入，在](http://php.net/manual/en/functions.anonymous.php)[ReflectionFunctionAbstract上引入了一个](http://php.net/manual/en/class.reflectionfunctionabstract.php)[getClosureThis()](http://php.net/manual/en/reflectionfunctionabstract.getclosurethis.php)方法。

任何人都知道它的用途是什么？文档没有说什么，谷歌到目前为止一直没用，我对不同 ReflectionFunction/ReflectionMethod 对象的尝试都返回了`NULL`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T17:05:20.577

正如它所说：

> 返回绑定到闭包的 this 指针

所以如果你有 PHP 5.4：

```
<?php
class MyObj {}
$foo = function() { };
$obj = new MyObj;
$foo = $foo->bindTo($obj); // Inside the newly returned closure, $this == $obj
$reflector = new ReflectionFunction($foo);
assert($obj === $reflector->getClosureThis()); 
```

即，它返回闭包的`$this`指针。

# css - 强制绝对定位的元素继承透明度

> ID：11616598
> 
> 赞同：5
> 
> 时间：2012-07-23T16:28:22.973
> 
> 标签：css, opacity

当一个元素被赋予 时`opacity`，该元素的所有静态和相对子元素都以部分透明度呈现。但是，带有`position: absolute`(or `position: fixed`) 的元素不会继承这一点，而是以完全不透明的方式呈现，除非另有明确说明。

现在，我可以`style.opacity`通过调用执行分配的函数来替换分配，然后循环遍历所有子项，获取他们的计算样式并查看他们的位置属性是否需要添加自己的`style.opacity`......但这有点像核弹.

我也知道我可以添加`opacity: inherit`到适当的元素中，但这仅在它们是褪色元素的直接子元素时才有效 - 如果它们是后代怎么办？

我想知道是否有办法强制元素继承正确的透明度。

旁注：`filter:alpha(...)`有趣的是，当我使用 IE 时，IE 会执行我想要的方式。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-28T13:39:59.230

事实证明，答案只是“确保绝对元素具有受透明度影响的相对容器”。我忘了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:42:00.613

根据评论，它似乎确实是 IE 唯一的问题。这似乎也是您需要解决的错误。但是仅在定位元素上设置...

```
opacity: inherit; /* IE9 */
filter: inherit; /* IE8 */ 
```

...在 IE8-9[*中确实会*传播给](http://jsfiddle.net/2Zqd6/4/)`absolute`继承的元素的子元素`opacity`，*假设这些子元素本身[没有`position`](http://jsfiddle.net/2Zqd6/5/)设置*（[即使`position: relative`对于 IE8](http://jsfiddle.net/2Zqd6/6/)也是如此；但是，[IE9 中的后续实验](http://jsfiddle.net/2Zqd6/10/)表明，元素的孙子`absolute`元素在其自身时似乎保持隐藏状态也是`position: absolute`）。任何其他定位的孩子都需要同样的。IE7（如果你在乎的话）晚上`inherit`在`filter`.

[IE9 可以通过`position: relative`设置](http://jsfiddle.net/2Zqd6/12/)为`#container`没有任何`inherit`设置 on来解决`#contained`，但这可能会严重影响您对`absolute`孩子的定位（尽管不是孩子`fixed`）。

**如果您正在处理 中的许多定位元素**，那么我建议*有条件地* [将此代码](http://jsfiddle.net/2Zqd6/8/)提供给 IE9 及以下（我没有测试 IE10）。

```
#container * {
    opacity: 0;
    filter: alpha(opacity=0);    
} 
```

# python - Python：列表理解与地图

> ID：11616599
> 
> 赞同：14
> 
> 时间：2012-07-23T16:28:22.943
> 
> 标签：python, performance

参考这个[Python List Comprehension Vs. 映射](https://stackoverflow.com/questions/1247486/python-list-comprehension-vs-map)`map`问题，有人可以解释为什么 List Comprehensions在列表理解不调用函数时给出更好的结果，即使在没有 lambda 函数`map`但在调用函数时给出最差的结果？

```
import timeit

print timeit.Timer('''[i**2 for i in xrange(100)]''').timeit(number = 100000)

print timeit.Timer('''map(lambda i: i**2, xrange(100))''').timeit(number = 100000)

print timeit.Timer(setup="""def my_pow(i):
    return i**2
""",stmt="""map(my_pow, xrange(100))""").timeit(number = 100000)

print timeit.Timer(setup="""def my_pow(i):
    return i**2
""",stmt='''[my_pow(i) for i in xrange(100)]''').timeit(number = 100000) 
```

结果：

```
1.03697046805 <-- list comprehension without function call
1.96599485313 <-- map with lambda function
1.92951520483 <-- map with function call
2.23419570042 <-- list comprehension with function call 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-23T16:35:20.353

您所有的计时结果都可以用这些事实来解释：

1.  CPython 具有相当高的函数调用开销。

2.  `map(f, it)`比 略快`[f(x) for x in it]`。

您的代码的第一个版本根本没有定义函数，因此没有函数调用开销。第二个版本需要定义一个函数，所以每次迭代都有函数调用开销。第三个版本完全等同于第二个版本——函数和 lambda 表达式是一回事。根据事实 2，最后一个版本甚至更慢。

# php - 脚本运行两次？

> ID：11616603
> 
> 赞同：3
> 
> 时间：2012-07-23T16:28:48.583
> 
> 标签：php, mysql

好的，所以我正在尝试制作一个安全的下载系统，其中具有特定许可证号的某个购买者可以访问下载，在他的许可被取消之前他可以下载两次。为了做到这一点，我在同一行中的“product_id”和“license_number”列旁边有一个“count”列。当我的 paypal ipn 脚本确认时，产品 ID 和许可证号会自动生成并传递给买家。

现在问题来了：当他们使用正确的变量访问下载页面时，计数会更新 +1，但由于某种原因，这个 sql 查询运行了两次，实际上我的数据库中得到了 +2。我已经对其进行了一些更改以首先检查该值，然后进行相应更改（以查看是否修复了错误），但错误仍未修复。

我个人认为，也许我调用文件下载会使脚本运行两次，还是我错了？

这是代码：

```
<?php

include ('../storescripts/connect_to_mysql.php');

// Looks first if the post variables have been set

if(!isset($_GET['id']) && ($_GET['lcn'])){

    // Error output
    echo 'The big PHP monster will not accept you into his cave without bringing an offering of variables!';

} else {

    // Set the variables
    $id = $_GET['id'];
    $license_number = $_GET['lcn'];

    // Check if there is such a thing (Yes, aliens) as the given id and license number
    $sql = mysql_query("SELECT * FROM secure_downloads WHERE product_id ='$id' AND license_number ='$license_number' LIMIT 1");

    $result = mysql_num_rows($sql);

    if($result > 0){

        // Now update the download count
        // Check first if the count is 0

        // Make a variable from the count sql   
        $sql_count = mysql_query("SELECT * FROM secure_downloads WHERE product_id='$id' AND license_number='$license_number' LIMIT 1");

        while($row = mysql_fetch_assoc($sql_count)){
                $count = $row['count']; 
            }

        // Check if the count is above two
        if ($count >= 2){
        // Download has already been downloaded 2 times, do not allow download
        echo 'The download limit for this file has been reached.';
        exit();

    } else if ($count = 0) {
        // Everything is alright, start downloading

        // Force the file download
        $file = 'test.jpg';
        // Change the count to 1
        mysql_query("UPDATE secure_downloads SET count=1 WHERE product_id = '$id' AND license_number = '$license_number'");
        readfile($file);
        exit();

        } else if ($count = 1) {

        // Everything is alright, start downloading

        // Force the file download
        $file = 'test.jpg';
        // Change the count to 2
        mysql_query("UPDATE secure_downloads SET count=2 WHERE product_id = '$id' AND license_number = '$license_number'");
        header('Content-Description: File Transfer');
        header('Content-Type: application/octet-stream');
        header('Content-Disposition: attachment; filename='.basename($file));
        header('Content-Transfer-Encoding: binary');
        header('Expires: 0');
        header('Cache-Control: must-revalidate');
        header('Pragma: public');
        header('Content-Length: ' . filesize($file));
        ob_clean();
        flush();
        readfile($file);

    exit();

    }

    } else {

        // It doesn't exist, tell the user either the variables were wrong or the 
        // download limit has been reached
        echo 'Cannot download the file, either the link is wrong or the download limit has been reached';
    }

}

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T16:37:52.870

```
} else if ($count = 0) { 
```

将其更改为`==`. 看起来您正在为每个循环分配`0`变量`count`，这可能是您遇到麻烦的原因。

这里还有一个问题：

```
} else if ($count = 1) { 
```

确保您的所有`if`语句都使用`==`(或`===`) 进行比较，而不是`=`分配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T16:31:28.373

查看服务器日志，看看您是否真的在下载 URL 上收到了两个请求？我见过某些浏览器（尤其是移动浏览器）在执行实际 GET 之前实际上发出 HEAD 请求的情况。如果您的代码无法区分这两种请求类型，它将执行两次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-11T03:41:56.550

就我而言，这是 favicon.ico 上缺少的路径引用，即。href="/favicon.ico" (好) vs href="favicon.ico" (坏)。

迈克回答下方的伊格纳斯评论有所帮助，但在日志中得到了证实。缺少的路径引用导致 Apache2 mod_rewrite 将 /controller/view/id 映射为 /controller/view/favicon.ico，这当然会导致日志中出现大量 PHP 错误，例如“PHP Notice: Undefined index: bar in foo.php第 83 行"。我知道索引存在，我可以看到打印在我面前的值。

一些帮助其他人调试/确认问题的工具。

```
<?php error_log($_SERVER['REQUEST_URI']); ?> 
```

使用命令行来跟踪错误。例如。

```
$ tail -F /var/log/apache2/error.log 
```

刷新，您会在日志中两次注意到类似的内容（也许更多？）。

例子：

```
[Thu Jan 11 03:20:44.211993 2018] [:error] [pid 21161] [client 192.168.0.1:34254] /controller/view/11, referer: http://localhost/controller/view/11

**NOTE: NO ERRORS HERE**

[Thu Jan 11 03:20:44.211993 2018] [:error] [pid 21161] [client 192.168.0.1:34254] /controller/view/favicon.ico, referer: http://localhost/controller/view/11

**NOTE: ERRORS START HERE** The line above is the culprit.

[Thu Jan 11 03:20:44.211993 2018] [:error] [pid 21161] [client 192.168.0.1:34254] PHP Notice:  Undefined index: bar in foo.php line 83

[Thu Jan 11 03:20:44.211993 2018] [:error] [pid 21161] [client 192.168.0.1:34254] PHP Notice:  Undefined index: bar2 in foo.php line 84

[Thu Jan 11 03:20:44.211993 2018] [:error] [pid 21161] [client 192.168.0.1:34254] PHP Notice:  Undefined index: bar3 in foo.php line 85 
```

这是一个愚蠢的错误，但修复起来并不有趣。+1 用于在处理代码时跟踪日志文件。还要感谢 Ignas 和 Mike。这是一个较老的问题，但是当您使用 Google 搜索“php 脚本执行两次”时，它是 Stack 的唯一答案，所以我想我会贡献并扩展其他两个想法。

# c# - 使用 ServerManager 类设置网站端口

> ID：11616606
> 
> 赞同：1
> 
> 时间：2012-07-23T16:29:00.187
> 
> 标签：c#, iis-7

我需要帮助使用 Microsoft.Web.Administration.ServerManager 类为网站设置端口。

首先我得到网站：

```
Site site = this._serverManager.Sites[section.WebsiteName]; 
```

然后我尝试从我传入的设置中设置端口：

```
foreach (Binding b in from binding in site.Bindings.Where(b => b != null && b.EndPoint != null)
                                  select binding)
            {
                b.EndPoint.Port = Int32.Parse(section.Port);
                Console.WriteLine(b.EndPoint.Port);
            }    this._serverManager.CommitChanges(); 
```

我把 writeline 放在那里检查，端口永远不会改变，为什么？我已经知道该网站是有效的，因为我在到达这里之前会检查它。

```
Binding binding = site.Bindings.CreateElement();
                binding.BindingInformation = String.Format("{2}:{0}:{1}", section.Port,b.Host, b.EndPoint.Address);
                //b.EndPoint.Port = Int32.Parse(section.Port);
                site.Bindings.Add(binding); 
```

我在上面试过了，我得到了一个关于 GetAttributeValue 的 COMException。

终于得到了它，这要归功于我必须做的下面的答案：

```
b.BindingInformation = String.Format("{2}:{0}:{1}", section.Port, b.Host, b.EndPoint.Address); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T18:25:09.810

你提交你的改变吗？

这是我在服务器管理应用程序中的代码（从 Xml 文档中的数据创建）：

```
ServerManager manager = new ServerManager();
Site site = manager.Sites[siteName];

foreach (XElement bindingNode in bindingsNode.Elements("Binding")) {
    Binding binding = site.Bindings.CreateElement();
    binding.BindingInformation = String.Format("{2}:{0}:{1}", bindingNode.Attribute("Port").Value, bindingNode.Value, bindingNode.Attribute("IP").Value);
    site.Bindings.Add(binding);
}

manager.CommitChanges(); 
```

# wordpress - 最近评论的wordpress自定义查询订单帖子

> ID：11616609
> 
> 赞同：0
> 
> 时间：2012-07-23T16:29:05.600
> 
> 标签：wordpress

正如标题所说，我希望您可以通过自定义循环来帮助我，该循环检索具有最新活动的帖子（意思是最后评论的帖子）。

基本上，对于我的主页，我试图从每个类别中检索一篇文章。不仅仅是任何帖子，而是最近获得批准评论的帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:41:21.737

这是未经测试的，但也许这样的事情可以让你开始：

```
function get_heated_posts()
{
    global $wpdb;
    $IDs = $wpdb->get_results("SELECT DISTINCT ID FROM wp_posts INNER JOIN wp_comments ON wp_posts.ID=wp_comments.comment_post_ID ORDER BY wp_comments.comment_date DESC", ARRAY_N);
    return $IDs;
}
$heated = get_heated_posts();
$query = new WP_Query(array('post__in'=>$heated, 'posts_per_page'=>-1));
if($query->have_posts()) : while($query->have_posts()) : $query->the_post();
    //POST HTML
endwhile;endif; 
```

# web-services - REST 何时/如何取代 SOAP

> ID：11616610
> 
> 赞同：2
> 
> 时间：2012-07-23T16:29:05.120
> 
> 标签：web-services, rest, soap

我目前正在写关于 IT 技术等的论文，我有一章比较 REST 和 SOAP，但我找不到 REST 是如何以及何时开始的（我的意思是过去的一些事件之王）（主要是在 Web ) 取代 SOAP 作为 Web 服务的技术。

你能帮我解决这个问题吗？;)

* * *

感谢您提供这些重要信息，但我的意思是别的。

我想向您展示 Google Insights for Search Tool 中的图表：

[谷歌洞察](http://www.google.com/insights/search/?hl=pl#q=rest%20api,soap%20api&cmpt=q)

正如您在 2008 年看到的那样，有一些关键字的交集数量之王搜索**rest api**和**soap api**。所以，我想依靠一些来源（当然我没有它们）或事件/事实，为什么这个交叉点可能会发生......最近发生的事件。

你明白我的观点吗？我知道这可能是该主题的非常独特的方法，但我想解释一下这种肥皂和休息交换。

**编辑**

有人有什么主意吗？我知道这是肥皂和休息 api 主题的不同方法，但也许有人知道如何“咬”这个主题；）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T20:17:53.590

[Roy Fielding 于 2000 年在他的博士论文](http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm)中引入了表述性状态转移 (REST) 一词。REST 描述了一种不特定于 Web API 的 Web 架构，但现在作为一种开发 Web API 的方法已经变得非常流行。[SOAP 于 2003 年 6 月成为 W3C 推荐标准](http://www.w3.org/2000/xp/Group/). 所以从技术上讲，REST 是在 SOAP 之前定义的，但是 SOAP 在一段时间内是开发 Web 服务的非常流行的方法，并且在开始时比 REST 更流行。但随后开发人员发现 SOAP 对于开发 Web 服务/API 来说过于臃肿且过于复杂，而 REST 可以很好地满足他们的需求。REST 的简单性似乎使其更受欢迎，而且它遵循基本的 HTTP 原则这一事实使其在异构平台上更加可移植。因此，历史上可能没有某个里程碑或事件导致了从 SOAP 到 REST 的转变。这只是逐渐过渡到最适合开发人员需求的方式。

**对 SOAP 历史的澄清**

SOAP 1.0 版实际上是由 Microsoft 于 1999 年 12 月推出的，因此这两种技术在定义时非常接近。但是直到 2000 年 5 月，它才被授予 W3C 成为标准，直到 2003 年才被提出建议。我认为，在它成为通用标准之前，整个开发社区都不能认为它是可行的为异构环境开发 Web 服务，这是 Web 服务和 SOA 的一大承诺。在那之前，它只是可以在 Microsoft 平台上使用的东西。

**基于 API 趋势评论的更新**

@GarciaPL 显示的 Google Insights 图非常有趣，我想我理解他试图在论文中展示的内容。但在得出强有力的结论时，我会小心处理这些数据。相同的 Google Insights 搜索显示在博客文章“ [REST in Peace, SOAP](http://royal.pingdom.com/2010/10/15/rest-in-peace-soap/) ”中。这篇博文中更具体的可能是显示 2,000 个 API 的图表，从 2008 年到 2010 年的趋势是转向 REST。此信息的原始来源在[这里](http://blog.programmableweb.com/2010/06/09/new-job-requirement-experience-building-restful-apis/). 这确实显示了公开公开 API 的 REST 趋势。论文是专门针对公开 API 的使用，还是针对一般的 Web 服务开发？如果是一般的网络服务，我不太确定。对于在 Microsoft 平台上开发内部项目的开发人员来说，今天使用的术语不是 SOAP，而是 Windows Communication Foundation (WCF)。尽管 SOAP 在幕后，但几乎没有必要讨论管道，因为 WCF 隐藏了很多内部结构。如果我在[“rest web service”、“soap web service”和“wcf web service”](http://www.google.com/insights/search/?hl=en-GB#q=rest%20web%20service,soap%20web%20service,wcf%20web%20service&cmpt=q)上进行 Google Insights 搜索，您会得到非常不同的结果，表明它们实际上正在融合。或者，如果您搜索[“restful 服务”、“soap 服务”和“wcf 服务”](http://www.google.com/insights/search/?hl=en-GB#q=restful%20service,soap%20service,wcf%20service&cmpt=q)它实际上显示 WCF 在 2008 年接管，REST 逐渐上升。

对于 API 的 REST 来说是有意义的，因为它们可移植、易于使用、可扩展且易于集成。对于一般 Web 服务的开发，我不太确定。我认为 WCF 仍然很受 Microsoft 开发人员的欢迎，它非常适合某些类型的项目。这只是为工作选择正确工具的问题。我将重申我之前所说的，我不认为它们是导致过渡到 RESTful API 的重大历史事件。我认为只是开发人员在学习什么是适合这项工作的工具。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T17:12:41.830

最适合您的地方是 Jim Webber 的书“实践中的 REST：超媒体和系统架构”

[http://www.amazon.com/REST-Practice-Hypermedia-Systems-Architecture/dp/0596805829](https://rads.stackoverflow.com/amzn/click/com/0596805829)

书中有专门的章节——第 11 章“Web 和 WS-*”。

当你在写关于 REST 的论文时，这本书是你必须的。

# java - java - 如何使用java将文件从url传输到ftp？

> ID：11616611
> 
> 赞同：3
> 
> 时间：2012-07-23T16:29:07.070
> 
> 标签：java, spring, file, url, ftp

给定一个 url，我想将该 url 中的文件传输到特定的 ftp。我有两个选择： 1）使用外部库（如 apache common-io）我可以从 url 获取文件，然后将其上传到 ftp。2) 打开两个套接字（到 url 和到 ftp）并简单地将文件从 url 传输到 ftp。

我是对的吗？最好的方法是什么？

我用的是弹簧。

以下是我找到的一些链接：

[如何使用 Java 从 Internet 下载和保存文件？](https://stackoverflow.com/questions/921262/how-to-download-and-save-a-file-from-internet-using-java).

[这是 apache common-io 库](http://commons.apache.org/io/api-release/index.html?org/apache/commons/io/package-summary.html)

**编辑**：

我正在处理 100-200M 的文件。

**更新：** 我选择先下载文件，然后上传。我选择这样做是因为我预计下载文件不会出现很多问题，但我预计将文件上传到 FTP 服务器会出现问题。所以，我认为错误处理会更好。缺少此解决方案是因为我将临时文件存储在磁盘中。如果我遇到一些问题，我会稍后更新。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T17:40:08.563

**1.**坦率地说，如果您使用**的是开源，那么请利用外部库。**

**2\. 不要重新发明轮子**，您可以使用**可信赖的库**，所以请使用它。

我还将我用来**上传和下载歌曲**的程序附加到`ftp server`使用`apache's common lib`

**上传：**

```
public void goforIt(){

        FTPClient con = null;

        try
        {
            con = new FTPClient();
            con.connect("192.168.2.57");

            if (con.login("Administrator", "KUjWbk"))
            {
                con.enterLocalPassiveMode(); // important!
                con.setFileType(FTP.BINARY_FILE_TYPE);
                String data = "/sdcard/vivekm4a.m4a";

                FileInputStream in = new FileInputStream(new File(data));
                boolean result = con.storeFile("/vivekm4a.m4a", in);
                in.close();
                if (result) Log.v("upload result", "succeeded");
                con.logout();
                con.disconnect();
            }
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }

    } 
```

**下载：**

```
public void goforIt(){
    FTPClient con = null;

    try
    {
        con = new FTPClient();
        con.connect("192.168.2.57");

        if (con.login("Administrator", "KUjWbk"))
        {
            con.enterLocalPassiveMode(); // important!
            con.setFileType(FTP.BINARY_FILE_TYPE);
            String data = "/sdcard/vivekm4a.m4a";

            OutputStream out = new FileOutputStream(new File(data));
            boolean result = con.retrieveFile("vivekm4a.m4a", out);
            out.close();
            if (result) Log.v("download result", "succeeded");
            con.logout();
            con.disconnect();
        }
    }
    catch (Exception e)
    {
        Log.v("download result","failed");
        e.printStackTrace();
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T16:37:36.740

1.  将要求您阅读 URL 引用的整个文件，然后才能将其发送到 ftp 服务器。如果文件非常大，可能需要在从 URL 连接读取时将其写入临时文件，然后在发送到 FTP 服务器时从临时文件中读取。使用这种方法，将读取 URL 和写入 FTP 服务器分开，您可以分别处理错误。例如，如果 URL 连接抛出异常，您可以相应地处理它，并可能重试请求。在尝试与 FTP 服务器进行任何通信之前，您可以确保拥有完整的文件。

2.  如果您已建立输入和输出流并准备好读取和写入它们，则可以执行此操作。这意味着您已经完成了所有协议，在 FTP 服务器上，这意味着告诉它您要上传文件，要上传文件的位置以及文件的名称。然后您可以简单地从 URL 输入流中读取并将该块写入 FTP 的输出流。因为这是流式传输的，如果您和网络服务器之间的通信，或者您和 FTP 服务器之间的通信被中断。您可能必须从头开始重新启动所有内容。

无论哪种方式都是可以接受的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:00:52.010

```
IMPORTS :
import org.apache.commons.net.ftp.FTP;
import org.apache.commons.net.ftp.FTPClient;

CODE : 
public static void main(String args[])
 try {
   //Create a FTP Client
   FTPClient ftp = new FTPClient();

  //Set Host Information
   ftp.connect(HOST_NAME);
   ftp.login(USER_NAME, PASSW)RD);

  //Set File Type "Specially for PDF's"
   ftp.setFileType(FTP.BINARY_FILE_TYPE, FTP.BINARY_FILE_TYPE);
   ftp.setFileTransferMode(FTP.BINARY_FILE_TYPE);

  //Change the current Directory to a desired one
   ftp.changeWorkingDirectory(SOME_DIRECTORY);

  //get File from the FTP location
   String fileNames[] = ftp.listNames();
   List<String> fTPFileNameList = new ArrayList<String>();

  //Iterate to get File Names
   if (fileNames != null && fileNames.length > 0) {
    for (String fName : fileNames) {
     fTPFileNameList.add((new File(fName)).getName());
    }
   }

  // Check the file is present on FTP
   if(fileNames != null && fileNames.length > 0 && fTPFileNameList.contains(FILE_NAME)){
    //File is present on FTP
   } else {
    //File is not present on FTP
    String httpURL = "YourDesiredURL";
    InputStream fis;
    try{
     fis = new URL(httpURL).openStream();
    } catch (FileNotFoundException e) {
     //File is not present on the URL
    }
    ftp.storeFile(FILE_NAME, fis);
    fis.close();
   }
   ftp.logout();
  } catch (Exception e) {
    e.printStackTrace();
   } 
  }

MAVEN DEPENDENCY : 

< dependency>
        < groupId>commons-net< /groupId>
        < artifactId>commons-net< /artifactId>
        < version>1.3.0</ version>
< /dependency>

JAR LOCATION : 
http://www.jarfinder.com/index.php/java/info/org.apache.commons.net.ftp.FTPClient 
```

# ios - 科尔多瓦/phonegap 2.0 iOS

> ID：11616614
> 
> 赞同：8
> 
> 时间：2012-07-23T16:29:24.433
> 
> 标签：ios, cordova-2.0.0

我收到 Main 和 App .m 文件中的 invokeString 的弃用警告。我还没有看到任何关于如何解决这个问题的帖子。到目前为止它工作正常，只是好奇。

```
self.viewController.invokeString = invokeString;   <-'invokeString' is depcrecated 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T15:57:51.877

这真的很有帮助，因为我不知道要评论多少……让我发疯。

[http://iphonedevlog.wordpress.com/2012/09/24/phonegap-2-1-0-in-mac-os-x-mountain-lion-10-8-from-download-to-ios-app-店铺/](http://iphonedevlog.wordpress.com/2012/09/24/phonegap-2-1-0-in-mac-os-x-mountain-lion-10-8-from-download-to-ios-app-store/)

在`MainViewController.m`注释掉：

```
/* #pragma UIWebDelegate implementation
- (void) webViewDidFinishLoad:(UIWebView*) theWebView
{
    ... all ...
} */ 
```

并`AppDelegate.m`注释掉：

```
// self.viewController.invokeString = invokeString; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T16:53:13.413

[CB-853] 弃用 window.invokeString - 改用 window.handleOpenURL(url)

[http://mail-archives.apache.org/mod_mbox/incubator-callback-commits/201207.mbox/%3C20120716205424.998B414A2D@tyr.zones.apache.org%3E](http://mail-archives.apache.org/mod_mbox/incubator-callback-commits/201207.mbox/%3C20120716205424.998B414A2D@tyr.zones.apache.org%3E)

# python - 使用 Python 将多个输入文件转换为一个 Excel 文件

> ID：11616615
> 
> 赞同：0
> 
> 时间：2012-07-23T16:29:24.020
> 
> 标签：python, excel

由于我对 Python 了解不多，所以我想问一下如何将多个输入文件保存到不同列中的一个 Excel 文件中？我有一个 python 脚本，它将单个日志文件作为输入：

```
file = 'output_1.log' 
```

并在 Excel 文件中在单个列中输出此日志文件的一些结果，如下所示：

```
data = open(file, 'r') 
```

如何更改这些命令以读取多个文本文件 ( `*.log`) 并将结果打印在单个 Excel 文件中的每个输入文件的不同列中？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:58:37.703

这会做你想要的。它单独读取每个文件以创建将每个文件名映射到其列表的字典。

```
import glob

data = {}
for infile in glob.glob("*.log"):
    with open(infile) as inf:
        data[infile] = [l[:-1] for l in inf]

with open("summary.xls", "w") as outf:
    outf.write("\t".join(data.keys()) + "\n")
    for sublst in zip(*data.values()):
        outf.write("\t".join(sublst) + "\n") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:06:45.467

大卫的回答是一个不错的选择。

就个人而言，我更倾向于使用 os.walk 之类的东西（如果从单个目录中提取所有内容）或从用户提供的列表中迭代它们来遍历所有日志文件。

至于编写 XLS 文件，您当然可以像 David 指出的那样使用 join 将其作为 TSV 来完成。但是，使用[XLWT 之](http://pypi.python.org/pypi/xlwt/)类的库可以让您更好地控制和访问更多 Excel 功能。如果您确实想将其作为 TSV 执行，您仍然可能希望查看[CSV](http://docs.python.org/library/csv.html)库及其编写器对象，以帮助处理文本引用等问题。

# javascript - 哪些 DOM 元素属性在修改时会导致浏览器执行重排操作？

> ID：11616619
> 
> 赞同：5
> 
> 时间：2012-07-23T16:29:50.690
> 
> 标签：javascript, dom

以下哪些 DOM 元素属性会导致浏览器执行重排操作？

*   `innerHTML`
*   `offsetParent`
*   `style`
*   `scrollTop`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-23T16:38:50.497

简而言之，任何导致元素改变大小或移动的属性都会导致回流，因为大小或位置的改变会影响其他元素。浏览器努力尽可能高效地识别可能需要重排的内容，但每个浏览器都有不同的方法。

不能影响元素大小或位置的属性（例如背景颜色）不应触发重排，但不能保证每个浏览器都足够智能来实现这一点。

在您的列表中：

`innerHTML`更改对象的 HTML，这肯定会影响大小和位置，并且至少会触发部分回流。

`offsetParent`在我看来，它是一个只读属性，不是您直接设置的，因此如果尚未安排其他内容，则读取它不应导致重排。

`style`是通往许多属性的门户，包括`height`并且`width`显然会导致至少部分回流。

`scrollTop`不需要导致重排，因为布局通常不会更改，只是一个元素（及其子元素）的滚动位置。布局应该保持不变，只需要重新绘制。

值得一提的是，大多数导致回流的属性不会立即导致回流，而是将回流安排在未来的一段时间内。这样，如果某些 javascript 运行更改了一堆不同的属性，每个属性都需要重排，则浏览器不会进行 N 次重排，而是安排重排，等待当前执行的 javascript 线程完成并然后它只执行一次需要的任何回流。有些属性在读取时会导致所有待处理的回流现在都完成，因为如果回流没有立即完成，这些属性可能具有不准确的值。您可以在之前的这篇文章中了解这一点：[在 javascript dom 操作后强制在 Internet Explorer 中刷新 DOM](https://stackoverflow.com/questions/1397478/forcing-a-dom-refresh-in-internet-explorer-after-javascript-dom-manipulation/1397505#1397505)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T16:47:30.993

这取决于。

*   `innerHTML`只有在设置它更改 DOM 时才会触发重排。
*   `offsetParent`不应该做任何事情，得到它可能会刷新渲染树队列。
*   `style`在设置它（或其属性）或链接这些操作时可能会触发重排和重绘。一些属性`color`应该只触发重绘。
*   `scrollTop`将触发设置重绘，获取它可能会刷新队列。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T16:33:42.070

奇怪的是，我很确定它们都会导致回流甚至重绘。

这是一篇关于这一切的文章： [回流和重绘](http://www.phpied.com/rendering-repaint-reflowrelayout-restyle/)

# asp.net - 如何在没有文件夹权限的情况下使用 ASP.NET 读取/写入 Microsoft Access 数据库？

> ID：11616620
> 
> 赞同：0
> 
> 时间：2012-07-23T16:29:52.137
> 
> 标签：asp.net, iis, ms-access

我有一个 ASP.NET C# 应用程序，它连接到另一个文件夹中的 Microsoft Access mdb 文件。该应用程序通过向该文件夹上的 ASPNET 和 IIS_WPG 用户授予读/写权限来工作。

有没有其他方法可以在不添加这些用户并授予他们读/写权限的情况下访问该数据库？我可以使用 .config 文件吗？

* * *

评论现在删除的答案

这是我的场景：我在 Windows Server 2003 机器（IIS6）中有应用程序，数据库在不同 IP 的文件夹中，问题是，我在 Server 2003 机器上将应用程序的读/写权限授予用户 ASPNET 和 IIS_WPG ，但我不能在数据库 IP 上做同样的事情，因为我确定那里没有 ASPNET 和 IIS_PWG 用户，我应该在 Server 2003 机器和数据库机器上创建相同的用户吗？

# ios - AFNetworking 无法在 ios iPad 中下载多个 m4a 文件

> ID：11616622
> 
> 赞同：0
> 
> 时间：2012-07-23T16:30:01.197
> 
> 标签：ios, ipad, afnetworking

我有一个 iPad 应用程序，可以从服务器下载音乐文件 m4a。我正在使用 AFHTTPRequestOperation 直接下载到我的文档目录 uisng outputStreamToFileAtPath。我不关心需要多长时间。我只需要下载文件，因为下载很可能会在几个小时后进行。当我尝试在我的 ipad 上运行它时，我收到以下错误消息。我确实得到了前 5 个和最后 5 个，但其余的超时。我的代码有问题吗？有没有办法增加超时值？或者除了AFNetworking还有什么我可以使用的吗？非常感谢任何帮助/想法。

> ERROR ERROR ERROR:Error Domain=NSURLErrorDomain Code=-1001 "请求超时。" UserInfo=0xc6e01c0 {NSErrorFailingURLStringKey=http://xxxx/Music/ece0b7c5ab71a24c6f6694986fc7a4a7.m4a, NSErrorFailingURLKey=http://xxx/Music/ece0b7c5ab71a24c6f6694986fc7a4a7.m4a, NSLocalizedDescription=The request timed out., NSUnderlyingError=0xc69c950 "The request timed out." } - 无法保存到路径：/var/mobile/Applications/207B2EFB-78E0-4BB2-8019-026B598ECE44/Documents/music/ece0b7c5ab71a24c6f6694986fc7a4a7.m4a

和代码：

```
- (void)saveFilesToDocDir
{
    NSString *fileLink = @"http://xxx/Music/";
    NSArray *dirPathSearch = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docDirPath = [dirPathSearch objectAtIndex:0];
    NSString *dirPath = [docDirPath stringByAppendingPathComponent:@"music/"];

    // if the sub directory does not exist, create it
    NSError *error = nil;
    NSFileManager *fileManager = [NSFileManager defaultManager];

    if (![fileManager fileExistsAtPath:dirPath])
    {
        NSLog(@"%@: does not exists...will attempt to create", dirPath);

        if (![fileManager createDirectoryAtPath:dirPath withIntermediateDirectories:YES attributes:nil error:&error])
        NSLog(@"errormsg:%@", [error description]);
    }

    self.processCount = 0;
    for (int i = 0; i < [self.musicFiles count]; i++)
    {
        NSString *filename = [self.musicFiles objectAtIndex:i];
        NSString *urlPath = [NSString stringWithFormat:@"%@%@", fileLink, filename];
        NSString *filePath = [dirPath stringByAppendingPathComponent:filename];

        // download the song file and save them directly to docdir
        NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:urlPath]];

        AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

        operation.outputStream = [NSOutputStream outputStreamToFileAtPath:filePath append:NO];
        [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) 
        {
            self.processCount++;
            NSLog(@"Song:%d Success!", processCount);

            // all the files have been saved, now update the playlist
            if (self.processCount == [self.musicFiles count])
            {
                [self updatePlaylist];
            }

        } failure:^(AFHTTPRequestOperation *operation, NSError *error) 
        {
            self.processCount++;
            NSLog(@"ERROR ERROR ERROR:%@ - could not save to path:%@", error, filePath);
        } ];

        [operation start];
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-27T07:05:54.697

```
[request setTimeoutInterval:1000]; 
```

为间隔设置一个适当的值（可以使用这个），在请求创建后添加它。

# android - Robolectric，单击列表项的问题

> ID：11616626
> 
> 赞同：8
> 
> 时间：2012-07-23T16:30:08.310
> 
> 标签：android, testing, integration-testing, robolectric, android-testing

我一直在努力解决这个问题，我认为我没有得到关于 Robolectric 的基本知识。通常一些谷歌搜索可以帮助我深入了解这类问题，但在此之间并查看示例代码我没有找到任何有用的东西。

我正在尝试模拟单击列表视图项并检查单击后是否启动了活动。我不断地回想我正在测试的当前活动是结果活动。我尝试删除所有列表项单击代码并检查结果活动，这作为我正在测试的 InstallationListActivity 回来了。所以我得出的结论是列表视图项没有被点击，我只是不知道为什么。我在下面的测试代码中设置的系统日志是我期望的值。该列表有 13 个项目，getChildAt(0) 返回标题。我认为获取第一个项目 (getChildAt(1)) 并在其上调用 performClick 或其子文本视图会启动我预期的活动，但似乎并非如此。反正，

```
 @Before
    public void setUp() {
        mAppLaunch = new ApplicationLaunchActivity();
        mAppLaunch.onCreate(null);
        mActivity = new InstallationListActivity();
        mActivity.onCreate(null);
    }

    @Test
    public void shouldHaveNonEmptyInstallationList() throws Exception {
        assert(mActivity.installationListCount() > 0);
    }

    @Test
    public void shouldHaveSameNumberOfElements() throws Exception {
        ListView installationListView = (ListView) mActivity.getListView();

        ShadowListView shadowListView = shadowOf(installationListView);

        assert(shadowListView.getChildCount() == mActivity.installationListCount());
    }

    @Test
    public void pressingTheFirstItemInTheListShouldLaunchVenueListActivity() {
        ListView installationListView = (ListView) mActivity.findViewById(android.R.id.list);

        System.out.println("qty: " + installationListView.getChildCount());
        System.out.println("class: " + installationListView.getChildAt(0).getClass());
        System.out.println("class: " + installationListView.getChildAt(1).getClass());
        System.out.println("class: " + installationListView.getChildAt(2).getClass());
        System.out.println("class: " + installationListView.getChildAt(3).getClass());
        System.out.println("class: " + installationListView.getChildAt(4).getClass());

        LinearLayout firstItemLayout = (LinearLayout) installationListView.getChildAt(1);
        TextView firstItem = (TextView) firstItemLayout.getChildAt(0);

        ShadowTextView shadowFirstItem = shadowOf(firstItem);
        ShadowLinearLayout shadowLayout = (ShadowLinearLayout) shadowOf(firstItemLayout);

        shadowLayout.performClick();
        shadowFirstItem.performClick();

        clickOn(firstItem);
        clickOn(firstItemLayout);

        System.out.println("class: " + firstItemLayout.getChildAt(0).getClass());
        System.out.println("Layout shadow" + shadowOf(firstItemLayout).getClass());
        System.out.println("First Item Text: " + shadowFirstItem.getText());

        ShadowActivity shadowActivity = shadowOf(mActivity);
        Intent startedIntent = shadowActivity.getNextStartedActivity();
        assertNotNull(startedIntent);
        ShadowIntent shadowIntent = shadowOf(startedIntent);

        assertThat(shadowIntent.getComponent().getClassName(), equalTo(VenueListActivity.class.getName()));
    }
} 
```

这是我用来构建列表视图的布局：

```
This is list.xml

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent">
    <ListView android:id="@android:id/list"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:cacheColorHint="#00000000"
              android:background="@drawable/background"/>
</LinearLayout>

list_item.xml

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:id="@+id/list_item"
              android:layout_height="fill_parent"
              android:layout_width="fill_parent">
    <TextView android:id="@+id/list_item_text"
              style="@style/tw_list_font"
              android:layout_width="match_parent"
              android:layout_height="wrap_content"
              android:textAppearance="?android:attr/textAppearanceLarge"
              android:gravity="center_vertical"
              android:paddingLeft="6dip"
              android:minHeight="?android:attr/listPreferredItemHeight" />
</LinearLayout> 
```

这是初始化列表的代码：

```
InstallationListActivity.java

setContentView(R.layout.list);
        final ListView installationListView = getListView();
        LayoutInflater inflater = getLayoutInflater();
        ViewGroup header = (ViewGroup) inflater.inflate(R.layout.header, installationListView, false);
        TextView headerText = (TextView) header.findViewById(R.id.header_text);
        headerText.setText("Installations On Live"); // TODO: This should not be hardcoded
        installationListView.addHeaderView(header, null, false);

        setListAdapter(new ArrayAdapter<Installation>(this, R.layout.list_item, R.id.list_item_text, mInstallations));

        // Click event
        installationListView.setClickable(true);
        installationListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> adapterView, View view, int position, long arg1) {
                Installation installationClicked = (Installation) installationListView.getItemAtPosition(position);
                if (LOCAL_LOG) {
                    Log.d(LOG_TAG, "Installation: " + installationClicked.toString() + " clicked.");
                    Log.d(LOG_TAG, installationClicked.toString() + " has installationDirectory: " +
                            installationClicked.rootDir);
                }
                AppState.installation = installationClicked;
                AppState.serverInstallationName = installationClicked.rootDir;
                Intent venueListIntent = new Intent(InstallationListActivity.this, VenueListActivity.class);
                startActivity(venueListIntent);
            }
        }); 
```

任何帮助深表感谢！万分感谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-02-04T12:30:17.763

尝试辅助方法 performItemClick：

```
Robolectric.shadowOf(listView).performItemClick(position); 
```

# javascript - 如何以类似 JSON 的格式打印圆形结构？

> ID：11616630
> 
> 赞同：806
> 
> 时间：2012-07-23T16:30:22.310
> 
> 标签：javascript, json, node.js

我有一个大对象要转换为 JSON 并发送。但是它具有圆形结构。我想扔掉任何存在的循环引用并发送任何可以字符串化的东西。我怎么做？

谢谢。

```
var obj = {
  a: "foo",
  b: obj
} 
```

我想将 obj 字符串化为：

```
{"a":"foo"} 
```

* * *

## 回答 #1

> 赞同：819
> 
> 时间：2013-08-21T09:54:48.920

在 Node.js 中，您可以使用[util.inspect(object)](http://nodejs.org/api/util.html#util_util_inspect_object_options)。它会自动将循环链接替换为“[Circular]”。

* * *

尽管是内置的*（无需安装）*，但您必须导入它

```
import * as util from 'util' // has no default export
import { inspect } from 'util' // or directly
// or 
var util = require('util') 
```

要使用它，只需调用

```
console.log(util.inspect(myObject)) 
```

另请注意，您可以将选项对象传递给检查*（请参阅上面的链接）*

```
inspect(myObject[, options: {showHidden, depth, colors, showProxy, ...moreOptions}]) 
```

* * *

*请阅读并为下面的评论者点赞...*

* * *

## 回答 #2

> 赞同：706
> 
> 时间：2012-07-23T16:56:43.717

`JSON.stringify`与自定义替换器一起使用。例如：

```
// Demo: Circular reference
var circ = {};
circ.circ = circ;

// Note: cache should not be re-used by repeated calls to JSON.stringify.
var cache = [];
JSON.stringify(circ, (key, value) => {
  if (typeof value === 'object' && value !== null) {
    // Duplicate reference found, discard key
    if (cache.includes(value)) return;

    // Store value in our collection
    cache.push(value);
  }
  return value;
});
cache = null; // Enable garbage collection 
```

此示例中的替换器并非 100% 正确（取决于您对“重复”的定义）。在以下情况下，将丢弃一个值：

```
var a = {b:1}
var o = {};
o.one = a;
o.two = a;
// one and two point to the same object, but two is discarded:
JSON.stringify(o, ...); 
```

但概念是：使用自定义替换器，并跟踪解析的对象值。

作为用 es6 编写的实用函数：

```
// safely handles circular references
JSON.safeStringify = (obj, indent = 2) => {
  let cache = [];
  const retVal = JSON.stringify(
    obj,
    (key, value) =>
      typeof value === "object" && value !== null
        ? cache.includes(value)
          ? undefined // Duplicate reference found, discard key
          : cache.push(value) && value // Store value in our collection
        : value,
    indent
  );
  cache = null;
  return retVal;
};

// Example:
console.log('options', JSON.safeStringify(options)) 
```

* * *

## 回答 #3

> 赞同：215
> 
> 时间：2018-12-11T19:34:45.273

我想知道为什么还没有人[从 MDN 页面发布正确的解决方案](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Cyclic_object_value#Examples)......

```
const getCircularReplacer = () => {
  const seen = new WeakSet();
  return (key, value) => {
    if (typeof value === "object" && value !== null) {
      if (seen.has(value)) {
        return;
      }
      seen.add(value);
    }
    return value;
  };
};

JSON.stringify(circularReference, getCircularReplacer()); 
```

看到的值应该存储*在一个集合*中，而不是存储在数组中（*在每个元素上*调用替换器），并且不需要尝试链中的`JSON.stringify` *每个元素*导致循环引用。

就像在接受的答案中一样，此解决方案会删除*所有重复值*，而不仅仅是循环值。但至少它没有指数级的复杂性。

* * *

## 回答 #4

> 赞同：83
> 
> 时间：2016-07-22T16:44:29.233

做就是了

```
npm i --save circular-json 
```

然后在你的 js 文件中

```
const CircularJSON = require('circular-json');
...
const json = CircularJSON.stringify(obj); 
```

[https://github.com/WebReflection/circular-json](https://github.com/WebReflection/circular-json)

注意：我与这个包无关。但我确实用它来做这个。

# 2020 年更新

请注意 CircularJSON 仅在维护中，**[flatted](https://github.com/WebReflection/flatted)**是它的继任者。

* * *

## 回答 #5

> 赞同：49
> 
> 时间：2013-07-21T14:47:09.100

我真的很喜欢 Trindaz 的解决方案 - 更详细，但是它有一些错误。我也为喜欢它的人修好了它们。

另外，我对缓存对象添加了长度限制。

如果我正在打印的对象真的很大——我的意思是无限大——我想限制我的算法。

```
JSON.stringifyOnce = function(obj, replacer, indent){
    var printedObjects = [];
    var printedObjectKeys = [];

    function printOnceReplacer(key, value){
        if ( printedObjects.length > 2000){ // browsers will not print more than 20K, I don't see the point to allow 2K.. algorithm will not be fast anyway if we have too many objects
        return 'object too long';
        }
        var printedObjIndex = false;
        printedObjects.forEach(function(obj, index){
            if(obj===value){
                printedObjIndex = index;
            }
        });

        if ( key == ''){ //root element
             printedObjects.push(obj);
            printedObjectKeys.push("root");
             return value;
        }

        else if(printedObjIndex+"" != "false" && typeof(value)=="object"){
            if ( printedObjectKeys[printedObjIndex] == "root"){
                return "(pointer to root)";
            }else{
                return "(see " + ((!!value && !!value.constructor) ? value.constructor.name.toLowerCase()  : typeof(value)) + " with key " + printedObjectKeys[printedObjIndex] + ")";
            }
        }else{

            var qualifiedKey = key || "(empty key)";
            printedObjects.push(value);
            printedObjectKeys.push(qualifiedKey);
            if(replacer){
                return replacer(key, value);
            }else{
                return value;
            }
        }
    }
    return JSON.stringify(obj, printOnceReplacer, indent);
}; 
```

* * *

## 回答 #6

> 赞同：44
> 
> 时间：2014-02-19T08:59:58.473

`JSON.decycle`请注意， Douglas Crockford还实现了一种方法。见他的 [cycle.js](https://github.com/douglascrockford/JSON-js/blob/master/cycle.js)。这允许您对几乎任何标准结构进行字符串化：

```
var a = [];
a[0] = a;
a[1] = 123;
console.log(JSON.stringify(JSON.decycle(a)));
// result: '[{"$ref":"$"},123]'. 
```

您还可以使用`retrocycle`方法重新创建原始对象。因此，您不必从对象中删除循环来对它们进行字符串化。

然而，这**不适**用于 DOM 节点（这是现实生活用例中循环的典型原因）。例如，这将抛出：

```
var a = [document.body];
console.log(JSON.stringify(JSON.decycle(a))); 
```

我制作了一个 fork 来解决这个问题（请参阅我的[cycle.js fork](https://github.com/Eccenux/JSON-js/blob/master/cycle.js)）。这应该可以正常工作：

```
var a = [document.body];
console.log(JSON.stringify(JSON.decycle(a, true))); 
```

请注意，在我的 fork中的工作方式与原始版本一样，并且在包含 DOM 节点/元素`JSON.decycle(variable)`时会引发异常。`variable`

当您使用时，`JSON.decycle(variable, true)`您接受结果不可逆的事实（retrocycle 不会重新创建 DOM 节点）。不过，DOM 元素在某种程度上应该是可识别的。例如，如果一个`div`元素有一个 id ，那么它将被替换为一个 string `"div#id-of-the-element"`。

* * *

## 回答 #7

> 赞同：40
> 
> 时间：2018-01-14T22:06:02.160

@RobW 的回答是正确的，但是这更高效！因为它使用 hashmap/set：

```
const customStringify = function (v) {
  const cache = new Set();
  return JSON.stringify(v, function (key, value) {
    if (typeof value === 'object' && value !== null) {
      if (cache.has(value)) {
        // Circular reference found
        try {
          // If this value does not reference a parent it can be deduped
         return JSON.parse(JSON.stringify(value));
        }
        catch (err) {
          // discard key if value cannot be deduped
         return;
        }
      }
      // Store value in our set
      cache.add(value);
    }
    return value;
  });
}; 
```

* * *

## 回答 #8

> 赞同：26
> 
> 时间：2015-05-13T01:48:16.610

我建议从@isaacs 检查[json-stringify-](https://github.com/isaacs/json-stringify-safe) safe——它在 NPM 中使用。

> 顺便说一句-如果您不使用 Node.js，您可以从[源代码的相关部分](https://github.com/isaacs/json-stringify-safe/blob/02cfafd45f06d076ac4bf0dd28be6738a07a72f9/stringify.js#L4)复制并粘贴第 4-27 行。

安装：

```
$ npm install json-stringify-safe --save 
```

要使用：

```
// Require the thing
var stringify = require('json-stringify-safe');

// Take some nasty circular object
var theBigNasty = {
  a: "foo",
  b: theBigNasty
};

// Then clean it up a little bit
var sanitized = JSON.parse(stringify(theBigNasty)); 
```

这产生：

```
{
  a: 'foo',
  b: '[Circular]'
} 
```

> 请注意，就像@Rob W 提到的香草 JSON.stringify 函数一样，您还可以通过将“替换器”函数作为第二个参数传递给`stringify()`. 如果您发现自己需要一个简单的示例来说明如何执行此操作，我刚刚编写了一个自定义替换器，它将错误、正则表达式和函数强制转换为人类可读的[字符串](https://github.com/node-machine/rttc/blob/master/lib/helpers/validate-recursive.js#L316)。

* * *

## 回答 #9

> 赞同：14
> 
> 时间：2013-01-28T04:50:02.957

*对于将来在您不*知道所有循环引用的键时寻找此问题的解决方案的谷歌用户，您可以使用 JSON.stringify 函数周围的包装器来排除循环引用。[请参阅https://gist.github.com/4653128](https://gist.github.com/4653128)上的示例脚本。

该解决方案本质上归结为在数组中保留对先前打印对象的引用，并在返回值之前在替换函数中检查它。它比仅排除循环引用更具限制性，因为它还排除了两次打印对象的可能性，其中一个副作用是避免循环引用。

示例包装器：

```
function stringifyOnce(obj, replacer, indent){
    var printedObjects = [];
    var printedObjectKeys = [];

    function printOnceReplacer(key, value){
        var printedObjIndex = false;
        printedObjects.forEach(function(obj, index){
            if(obj===value){
                printedObjIndex = index;
            }
        });

        if(printedObjIndex && typeof(value)=="object"){
            return "(see " + value.constructor.name.toLowerCase() + " with key " + printedObjectKeys[printedObjIndex] + ")";
        }else{
            var qualifiedKey = key || "(empty key)";
            printedObjects.push(value);
            printedObjectKeys.push(qualifiedKey);
            if(replacer){
                return replacer(key, value);
            }else{
                return value;
            }
        }
    }
    return JSON.stringify(obj, printOnceReplacer, indent);
} 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2013-10-26T11:02:28.777

如果

```
console.log(JSON.stringify(object)); 
```

结果是

> TypeError：循环对象值

然后你可能想像这样打印：

```
var output = '';
for (property in object) {
  output += property + ': ' + object[property]+'; ';
}
console.log(output); 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2015-07-08T11:37:21.643

```
var a={b:"b"};
a.a=a;
JSON.stringify(preventCircularJson(a)); 
```

评估为：

```
"{"b":"b","a":"CIRCULAR_REFERENCE_REMOVED"}" 
```

具有以下功能：

```
/**
 * Traverses a javascript object, and deletes all circular values
 * @param source object to remove circular references from
 * @param censoredMessage optional: what to put instead of censored values
 * @param censorTheseItems should be kept null, used in recursion
 * @returns {undefined}
 */
function preventCircularJson(source, censoredMessage, censorTheseItems) {
    //init recursive value if this is the first call
    censorTheseItems = censorTheseItems || [source];
    //default if none is specified
    censoredMessage = censoredMessage || "CIRCULAR_REFERENCE_REMOVED";
    //values that have allready apeared will be placed here:
    var recursiveItems = {};
    //initaite a censored clone to return back
    var ret = {};
    //traverse the object:
    for (var key in source) {
        var value = source[key]
        if (typeof value == "object") {
            //re-examine all complex children again later:
            recursiveItems[key] = value;
        } else {
            //simple values copied as is
            ret[key] = value;
        }
    }
    //create list of values to censor:
    var censorChildItems = [];
    for (var key in recursiveItems) {
        var value = source[key];
        //all complex child objects should not apear again in children:
        censorChildItems.push(value);
    }
    //censor all circular values
    for (var key in recursiveItems) {
        var value = source[key];
        var censored = false;
        censorTheseItems.forEach(function (item) {
            if (item === value) {
                censored = true;
            }
        });
        if (censored) {
            //change circular values to this
            value = censoredMessage;
        } else {
            //recursion:
            value = preventCircularJson(value, censoredMessage, censorChildItems.concat(censorTheseItems));
        }
        ret[key] = value

    }

    return ret;
} 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2012-07-23T17:26:56.113

将 JSON.stringify 方法与替换器一起使用。阅读本文档以获取更多信息。[http://msdn.microsoft.com/en-us/library/cc836459%28v=vs.94%29.aspx](http://msdn.microsoft.com/en-us/library/cc836459%28v=vs.94%29.aspx)

```
var obj = {
  a: "foo",
  b: obj
}

var replacement = {"b":undefined};

alert(JSON.stringify(obj,replacement)); 
```

找出一种用循环引用填充替换数组的方法。您可以使用 typeof 方法来查找属性是否属于“对象”类型 (reference)，并使用精确相等检查 (===) 来验证循环引用。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2015-08-18T10:08:28.063

我知道这是一个老问题，但我想推荐一个我创建的名为[smart-circular](https://github.com/Keenpoint/smart-circular)的 NPM 包，它的工作方式与其他提议的方式不同。如果您使用*大而深的对象*，它特别有用。

一些特点是：

*   用导致其第一次出现的路径（不仅仅是字符串*[circular]*）替换对象内部的循环引用或简单的重复结构；

*   通过在广度优先搜索中寻找循环，包确保这条路径尽可能小，这在处理非常大和深的对象时很重要，因为路径可能会变得非常长且难以遵循（自定义替换在JSON.stringify 做一个 DFS);

*   允许个性化替换，方便简化或忽略对象中不太重要的部分；

*   最后，路径完全按照访问引用字段所需的方式编写，这可以帮助您进行调试。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2018-08-01T21:55:04.990

JSON.stringify() 的第二个参数*还*允许您指定一个键名数组，这些键名应该从它在数据中遇到的每个对象中保留下来。这可能不适用于所有用例，但这是一个更简单的解决方案。

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify)

```
var obj = {
    a: "foo",
    b: this
}

var json = JSON.stringify(obj, ['a']);
console.log(json);
// {"a":"foo"} 
```

**注意：**奇怪的是，来自 OP 的对象定义不会在最新的 Chrome 或 Firefox 中引发循环引用错误。此答案中的定义已修改，因此*确实*引发了错误。

* * *

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2019-06-28T14:11:28.167

要更新覆盖 JSON 工作方式的答案（可能不推荐，但超级简单），请不要使用`circular-json`（已弃用）。相反，使用后继者，扁平化：

[https://www.npmjs.com/package/flatted](https://www.npmjs.com/package/flatted)

从@user1541685 上面的旧答案中借用，但替换为新答案：

`npm i --save flatted`

然后在你的 js 文件中

```
const CircularJSON = require('flatted');
const json = CircularJSON.stringify(obj); 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-08-04T19:42:24.587

我[在 github 上找到了 circular-json 库](https://github.com/WebReflection/circular-json)，它很好地解决了我的问题。

我发现一些有用的好功能：

*   支持多平台使用，但到目前为止我只用 node.js 对其进行了测试。
*   API 是相同的，因此您需要做的就是包含并使用它作为 JSON 替换。
*   它有自己的解析方法，因此您可以将“循环”序列化数据转换回对象。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-02-26T08:10:11.217

我这样解决这个问题：

```
var util = require('util');

// Our circular object
var obj = {foo: {bar: null}, a:{a:{a:{a:{a:{a:{a:{hi: 'Yo!'}}}}}}}};
obj.foo.bar = obj;

// Generate almost valid JS object definition code (typeof string)
var str = util.inspect(b, {depth: null});

// Fix code to the valid state (in this example it is not required, but my object was huge and complex, and I needed this for my case)
str = str
    .replace(/<Buffer[ \w\.]+>/ig, '"buffer"')
    .replace(/\[Function]/ig, 'function(){}')
    .replace(/\[Circular]/ig, '"Circular"')
    .replace(/\{ \[Function: ([\w]+)]/ig, '{ $1: function $1 () {},')
    .replace(/\[Function: ([\w]+)]/ig, 'function $1(){}')
    .replace(/(\w+): ([\w :]+GMT\+[\w \(\)]+),/ig, '$1: new Date("$2"),')
    .replace(/(\S+): ,/ig, '$1: null,');

// Create function to eval stringifyed code
var foo = new Function('return ' + str + ';');

// And have fun
console.log(JSON.stringify(foo(), null, 4)); 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2018-02-02T10:35:11.493

试试这个：

```
var obj = {
    a: "foo",
    b: obj
};

var circular_replacer = (value) => {
    var seen = [];
    if (value != null && typeof value == "object") {
        if (seen.indexOf(value) >= 0) return;
        seen.push(value);
    }
    return value;
};

obj = circular_replacer(obj); 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2019-05-16T23:12:30.990

尽管这已得到充分回答，但您也可以在使用`delete`运算符进行字符串化之前显式删除相关属性。

```
delete obj.b; 
const jsonObject = JSON.stringify(obj); 
```

[删除运算符](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/delete)

这将消除构建或维护复杂逻辑以删除循环引用的需要。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2019-08-28T14:20:36.763

```
function myStringify(obj, maxDeepLevel = 2) {
  if (obj === null) {
    return 'null';
  }
  if (obj === undefined) {
    return 'undefined';
  }
  if (maxDeepLevel < 0 || typeof obj !== 'object') {
    return obj.toString();
  }
  return Object
    .entries(obj)
    .map(x => x[0] + ': ' + myStringify(x[1], maxDeepLevel - 1))
    .join('\r\n');
} 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2020-09-18T09:02:03.243

该线程中的大多数答案都是专门针对使用的`JSON.stringify`——它们没有显示如何实际删除原始对象树中的循环引用。（好吧，以后不用再打电话`JSON.parse`了——这需要重新分配，并且对性能有更高的影响）

要从源对象树中删除循环引用，您可以使用如下函数：[https ://stackoverflow.com/a/63952549/2441655](https://stackoverflow.com/a/63952549/2441655)

然后可以使用这些通用的循环引用删除函数来对循环引用敏感函数（如`JSON.stringify`）进行安全的后续调用：

```
const objTree = {normalProp: true};
objTree.selfReference = objTree;
RemoveCircularLinks(objTree); // without this line, the JSON.stringify call errors
console.log(JSON.stringify(objTree)); 
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2021-02-01T07:01:12.843

此代码将无法循环引用：

```
 JSON.stringify(circularReference);
// TypeError: cyclic object value 
```

使用以下代码：

```
 const getCircularReplacer = () => {
  const seen = new WeakSet();
  return (key, value) => {
    if (typeof value === "object" && value !== null) {
      if (seen.has(value)) {
        return;
      }
      seen.add(value);
    }
    return value;
  };
};

JSON.stringify(circularReference, getCircularReplacer()); 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2015-05-20T10:52:23.290

使用此类对象解决此问题的另一种解决方案是使用此库

[https://github.com/ericmuyser/stringy](https://github.com/ericmuyser/stringy)

它很简单，您可以通过几个简单的步骤解决这个问题。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2016-03-14T16:00:58.627

根据其他答案，我最终得到以下代码。它适用于循环引用、具有自定义构造函数的对象。

从要序列化的给定对象，

*   缓存遍历对象时遇到的所有对象，并为每个对象分配一个唯一的 hashID（自动递增的数字也可以）
*   一旦找到循环引用，将新对象中的该字段标记为循环并将原始对象的 hashID 存储为属性。

**Github 链接**- [DecycledJSON](https://github.com/studiobytestorm/DecycledJSON/)

```
DJSHelper = {};
DJSHelper.Cache = [];
DJSHelper.currentHashID = 0;
DJSHelper.ReviveCache = [];

// DOES NOT SERIALIZE FUNCTION
function DJSNode(name, object, isRoot){
    this.name = name;
    // [ATTRIBUTES] contains the primitive fields of the Node
    this.attributes = {};

    // [CHILDREN] contains the Object/Typed fields of the Node
    // All [CHILDREN] must be of type [DJSNode]
    this.children = []; //Array of DJSNodes only

    // If [IS-ROOT] is true reset the Cache and currentHashId
    // before encoding
    isRoot = typeof isRoot === 'undefined'? true:isRoot;
    this.isRoot = isRoot;
    if(isRoot){
        DJSHelper.Cache = [];
        DJSHelper.currentHashID = 0;

        // CACHE THE ROOT
        object.hashID = DJSHelper.currentHashID++;
        DJSHelper.Cache.push(object);
    }

    for(var a in object){
        if(object.hasOwnProperty(a)){
            var val = object[a];

            if (typeof val === 'object') {
                // IF OBJECT OR NULL REF.

                /***************************************************************************/
                // DO NOT REMOVE THE [FALSE] AS THAT WOULD RESET THE [DJSHELPER.CACHE]
                // AND THE RESULT WOULD BE STACK OVERFLOW
                /***************************************************************************/
                if(val !== null) {
                    if (DJSHelper.Cache.indexOf(val) === -1) {
                        // VAL NOT IN CACHE
                        // ADD THE VAL TO CACHE FIRST -> BEFORE DOING RECURSION
                        val.hashID = DJSHelper.currentHashID++;
                        //console.log("Assigned", val.hashID, "to", a);
                        DJSHelper.Cache.push(val);

                        if (!(val instanceof Array)) {
                            // VAL NOT AN [ARRAY]
                            try {
                                this.children.push(new DJSNode(a, val, false));
                            } catch (err) {
                                console.log(err.message, a);
                                throw err;
                            }
                        } else {
                            // VAL IS AN [ARRAY]
                            var node = new DJSNode(a, {
                                array: true,
                                hashID: val.hashID // HashID of array
                            }, false);
                            val.forEach(function (elem, index) {
                                node.children.push(new DJSNode("elem", {val: elem}, false));
                            });
                            this.children.push(node);
                        }
                    } else {
                        // VAL IN CACHE
                        // ADD A CYCLIC NODE WITH HASH-ID
                        this.children.push(new DJSNode(a, {
                            cyclic: true,
                            hashID: val.hashID
                        }, false));
                    }
                }else{
                    // PUT NULL AS AN ATTRIBUTE
                    this.attributes[a] = 'null';
                }
            } else if (typeof val !== 'function') {
                // MUST BE A PRIMITIVE
                // ADD IT AS AN ATTRIBUTE
                this.attributes[a] = val;
            }
        }
    }

    if(isRoot){
        DJSHelper.Cache = null;
    }
    this.constructorName = object.constructor.name;
}
DJSNode.Revive = function (xmlNode, isRoot) {
    // Default value of [isRoot] is True
    isRoot = typeof isRoot === 'undefined'?true: isRoot;
    var root;
    if(isRoot){
        DJSHelper.ReviveCache = []; //Garbage Collect
    }
    if(window[xmlNode.constructorName].toString().indexOf('[native code]') > -1 ) {
        // yep, native in the browser
        if(xmlNode.constructorName == 'Object'){
            root = {};
        }else{
            return null;
        }
    }else {
        eval('root = new ' + xmlNode.constructorName + "()");
    }

    //CACHE ROOT INTO REVIVE-CACHE
    DJSHelper.ReviveCache[xmlNode.attributes.hashID] = root;

    for(var k in xmlNode.attributes){
        // PRIMITIVE OR NULL REF FIELDS
        if(xmlNode.attributes.hasOwnProperty(k)) {
            var a = xmlNode.attributes[k];
            if(a == 'null'){
                root[k] = null;
            }else {
                root[k] = a;
            }
        }
    }

    xmlNode.children.forEach(function (value) {
        // Each children is an [DJSNode]
        // [Array]s are stored as [DJSNode] with an positive Array attribute
        // So is value

        if(value.attributes.array){
            // ITS AN [ARRAY]
            root[value.name] = [];
            value.children.forEach(function (elem) {
                root[value.name].push(elem.attributes.val);
            });
            //console.log("Caching", value.attributes.hashID);
            DJSHelper.ReviveCache[value.attributes.hashID] = root[value.name];
        }else if(!value.attributes.cyclic){
            // ITS AN [OBJECT]
            root[value.name] = DJSNode.Revive(value, false);
            //console.log("Caching", value.attributes.hashID);
            DJSHelper.ReviveCache[value.attributes.hashID] = root[value.name];
        }
    });

    // [SEPARATE ITERATION] TO MAKE SURE ALL POSSIBLE
    // [CYCLIC] REFERENCES ARE CACHED PROPERLY
    xmlNode.children.forEach(function (value) {
        // Each children is an [DJSNode]
        // [Array]s are stored as [DJSNode] with an positive Array attribute
        // So is value

        if(value.attributes.cyclic){
            // ITS AND [CYCLIC] REFERENCE
            root[value.name] = DJSHelper.ReviveCache[value.attributes.hashID];
        }
    });

    if(isRoot){
        DJSHelper.ReviveCache = null; //Garbage Collect
    }
    return root;
};

DecycledJSON = {};
DecycledJSON.stringify = function (obj) {
    return JSON.stringify(new DJSNode("root", obj));
};
DecycledJSON.parse = function (json, replacerObject) {
    // use the replacerObject to get the null values
    return DJSNode.Revive(JSON.parse(json));
};
DJS = DecycledJSON; 
```

**示例用法 1：**

```
var obj = {
    id:201,
    box: {
        owner: null,
        key: 'storm'
    },
    lines:[
        'item1',
        23
    ]
};

console.log(obj); // ORIGINAL

// SERIALIZE AND THEN PARSE
var jsonObj = DJS.stringify(obj);
console.log(DJS.parse(jsonObj)); 
```

**示例用法 2：**

```
// PERSON OBJECT

function Person() {
    this.name = null;
    this.child = null;
    this.dad = null;
    this.mom = null;
}
var Dad = new Person();
Dad.name = 'John';
var Mom = new Person();
Mom.name = 'Sarah';
var Child = new Person();
Child.name = 'Kiddo';

Dad.child = Mom.child = Child;
Child.dad = Dad;
Child.mom = Mom;

console.log(Child); // ORIGINAL

// SERIALIZE AND THEN PARSE
var jsonChild = DJS.stringify(Child);
console.log(DJS.parse(jsonChild)); 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2017-01-25T10:31:14.297

我知道这个问题很老并且有很多很好的答案，但我发布这个答案是因为它的新风格*（es5+）*

```
Object.defineProperties(JSON, {
  refStringify: {
    value: function(obj) {

      let objMap = new Map();
      let stringified = JSON.stringify(obj,
        function(key, value) {

          // only for objects
          if (typeof value == 'object') {
            // If has the value then return a reference to it
            if (objMap.has(value))
              return objMap.get(value);

            objMap.set(value, `ref${objMap.size + 1}`);
          }
          return value;
        });
      return stringified;
    }
  },
  refParse: {
    value: function(str) {

      let parsed = JSON.parse(str);
      let objMap = _createObjectMap(parsed);
      objMap.forEach((value, key) => _replaceKeyWithObject(value, key));
      return parsed;
    }
  },
});

// *************************** Example
let a = {
  b: 32,
  c: {
    get a() {
        return a;
      },
      get c() {
        return a.c;
      }
  }
};
let stringified = JSON.refStringify(a);
let parsed = JSON.refParse(stringified, 2);
console.log(parsed, JSON.refStringify(parsed));
// *************************** /Example

// *************************** Helper
function _createObjectMap(obj) {

  let objMap = new Map();
  JSON.stringify(obj, (key, value) => {
    if (typeof value == 'object') {
      if (objMap.has(value))
        return objMap.get(value);
      objMap.set(value, `ref${objMap.size + 1}`);

    }
    return value;
  });
  return objMap;
}

function _replaceKeyWithObject(key, obj, replaceWithObject = obj) {

  Object.keys(obj).forEach(k => {

    let val = obj[k];
    if (val == key)
      return (obj[k] = replaceWithObject);
    if (typeof val == 'object' && val != replaceWithObject)
      _replaceKeyWithObject(key, val, replaceWithObject);
  });
}
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2020-07-12T07:06:39.780

您可以尝试 JSON 解析器库：[treedoc](https://www.npmjs.com/package/treedoc)。它支持循环引用，并且还使用引用对重复的对象进行重复数据删除。

`yarn add treedoc`

```
import {TD} from 'treedoc'
TD.stringify(obj); 
```

如果你想要更多的定制

```
import {TD, TDEncodeOption} from 'treedoc'

const opt = new TDEncodeOption();
opt.coderOption.setShowType(true).setShowFunction(true);
opt.jsonOption.setIndentFactor(2);
return TD.stringify(obj, opt); 
```

生成的 JSON 文件可以通过查看器[http://treedoc.org](http://treedoc.org)查看，它支持通过 JSON 节点引用进行导航。

*[无耻插件]我是这个库的作者*

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2020-10-25T19:39:38.590

我们使用[对象扫描](https://github.com/blackflux/object-scan)进行数据处理，这可能是一个可行的解决方案。这就是它的工作方式（也正确修剪数组）

```
// const objectScan = require('object-scan');

const prune = (data) => objectScan(['**'], {
  rtn: 'count',
  filterFn: ({ isCircular, parent, property }) => {
    if (isCircular) {
      if (Array.isArray(parent)) {
        parent.splice(property, 1);
      } else {
        delete parent[property];
      }
      return true;
    }
    return false;
  },
  breakFn: ({ isCircular }) => isCircular === true
})(data);

const obj = { a: 'foo', c: [0] };
obj.b = obj;
obj.c.push(obj);
console.log(obj);
// => <ref *1> { a: 'foo', c: [ 0, [Circular *1] ], b: [Circular *1] }

console.log(prune(obj)); // returns circular counts
// => 2

console.log(obj);
// => { a: 'foo', c: [ 0 ] }
```

```
.as-console-wrapper {max-height: 100% !important; top: 0}
```

```
<script src="https://bundle.run/object-scan@17.1.0"></script>
```

*免责声明*：我是[对象扫描的作者](https://www.npmjs.com/package/object-scan)

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2021-04-11T21:06:07.410

我为我的 LoggingUtilities 类创建了以下方法。以下方法获取源和目标对象，并通过给定的 maxLevel 将源分配给目标。

```
 static assignObjectByLevel(
    sourceObject: any,
    targetObject: any,
    currentLevel: number = 0,
    maxLevel: number = 3,
    showUndefinedValues = false
  ): any {
    if (currentLevel >= maxLevel) {
      return;
    }

    const objQueue = [];
    for (const key in sourceObject) {
      if (sourceObject.hasOwnProperty(key)) {
        const value = sourceObject[key];
        if (typeof value === "object") {
          objQueue.push({ key, value });
        } else {
          targetObject[key] = value;
        }
      } else {
        if (showUndefinedValues) {
          targetObject[key] = "undefined/null";
        }
      }
    }

    while (objQueue.length > 0) {
      const objVal = objQueue.pop();
      currentLevel++;
      targetObject[objVal.key] = {};
      this.assignObjectByLevel(
        objVal.value,
        targetObject[objVal.key],
        currentLevel,
        maxLevel,
        false
      );
    }
  } 
```

使用示例：

```
 const logObjParam = {
      level1: "value1",
      level2: {
        value2: "value2",
        level3: {
          value3: "value3",
          level4: {
            value4: " value4",
            level5: {
              value5: " value5",
            },
          },
        },
      },
    };

 let logObj = {};
 this.assignObjectByLevel(logObjParam, logObj); 
```

结果：

```
{
  "level1": "value1",
  "level2": {
    "value2": "value2",
    "level3": {
      "value3": "value3",
      "level4": {}
    }
  }
} 
```

# eclipse - Eclipse CDT 和源代码控制

> ID：11616633
> 
> 赞同：6
> 
> 时间：2012-07-23T16:30:52.107
> 
> 标签：eclipse, eclipse-cdt

我们的团队在 Eclipse CDT 用于存储项目信息的 .cproject（和 .project）文件中反复出现合并冲突时遇到了一些困难。我熟悉这里的帖子：[哪些 Eclipse 文件属于版本控制？](https://stackoverflow.com/questions/337304/which-eclipse-files-belong-under-version-control)但是 Eclipse CDT 的当前情况似乎很痛苦。具体来说，扫描仪似乎经常在其存储机制中产生合并冲突，并且在各处都使用某种项目标识符编号后缀来表示不断发生冲突的组件。我知道有一个错误开放，使源代码控制方案更友好。我想知道这个问题是否得到了修复（我们使用的是 Indigo SR2），或者是否有一个替代工作流程可以帮助我们解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T02:48:48.787

听起来您已经发现了冲突发生的位置。这太棒了。有了这些信息，您就可以使用一种解决方法，直到更正 .cproject 文件格式。您可以[为 diff 编写一个包装器，](http://svnbook.red-bean.com/en/1.4/svn.advanced.externaldifftools.html)用于检查文件名并过滤掉您知道不应在该文件中进行版本控制的信息。

如果您这样做，您可能希望将您的脚本发布到您提到的[Bugzilla 条目（这个？） 。](https://bugs.eclipse.org/bugs/show_bug.cgi?id=226457)

# javascript - 如何在 AngularJS 中进行双向过滤？

> ID：11616636
> 
> 赞同：124
> 
> 时间：2012-07-23T16:31:09.653
> 
> 标签：javascript, angularjs, data-binding, angularjs-scope

AngularJS 可以做的一件有趣的事情是将过滤器应用于特定的数据绑定表达式，这是一种方便的应用方式，例如，模型属性的特定于文化的货币或日期格式。在范围上具有计算属性也很好。问题是这些特性都不适用于双向数据绑定方案——从范围到视图只有单向数据绑定。这似乎是一个非常优秀的图书馆的明显遗漏——或者我错过了什么？

在[KnockoutJS](http://knockoutjs.com/)中，我可以创建一个读/写计算属性，它允许我指定一对函数，一个被调用以获取属性的值，一个在设置属性时被调用。例如，这使我能够实现文化感知输入 - 让用户键入“$1.24”并将其解析为 ViewModel 中的浮点数，并在输入中反映 ViewModel 中的更改。

我能找到与此类似的最接近的事情是使用This 允许我在属性更改`$scope.$watch(propertyName, functionOrNGExpression);`时调用一个函数。`$scope`但这并不能解决例如文化感知输入问题。当我尝试在方法本身中修改`$watched`属性时，请注意问题：`$watch`

```
$scope.$watch("property", function (newValue, oldValue) {
    $scope.outputMessage = "oldValue: " + oldValue + " newValue: " + newValue;
    $scope.property = Globalize.parseFloat(newValue);
}); 
```

( [http://jsfiddle.net/gyZH8/2/](http://jsfiddle.net/gyZH8/2/) )

当用户开始输入时，输入元素会变得非常混乱。我通过将属性拆分为两个属性来改进它，一个用于未解析的值，一个用于解析的值：

```
$scope.visibleProperty= 0.0;
$scope.hiddenProperty = 0.0;
$scope.$watch("visibleProperty", function (newValue, oldValue) {
    $scope.outputMessage = "oldValue: " + oldValue + " newValue: " + newValue;
    $scope.hiddenProperty = Globalize.parseFloat(newValue);
}); 
```

( [http://jsfiddle.net/XkPNv/1/](http://jsfiddle.net/XkPNv/1/) )

这是对第一个版本的改进，但有点冗长，请注意`parsedValue`范围更改的属性仍然存在问题（在第二个输入中键入一些内容，这会`parsedValue`直接更改。注意顶部输入没有更新）。这可能发生在控制器操作或从数据服务加载数据中。

有没有更简单的方法来使用 AngularJS 来实现这个场景？我是否缺少文档中的某些功能？

* * *

## 回答 #1

> 赞同：231
> 
> 时间：2012-10-18T05:55:16.913

事实证明，对此有一个非常优雅的解决方案，但没有很好的文档记录。

用于显示的格式化模型值可以由`|`操作员和 angular处理`formatter`。事实证明，ngModel 不仅有一个格式化程序列表，还有一个解析器列表。

## 1.使用`ng-model`创建双向数据绑定

```
<input type="text" ng-model="foo.bar"></input> 
```

## 2\. 在您的 Angular 模块中创建一个指令，该指令将应用于相同的元素并且取决于`ngModel`控制器

```
module.directive('lowercase', function() {
    return {
        restrict: 'A',
        require: 'ngModel',
        link: function(scope, element, attr, ngModel) {
            ...
        }
    };
}); 
```

## 3\. 在`link`方法中，将您的自定义转换器添加到`ngModel`控制器

```
function fromUser(text) {
    return (text || '').toUpperCase();
}

function toUser(text) {
    return (text || '').toLowerCase();
}
ngModel.$parsers.push(fromUser);
ngModel.$formatters.push(toUser); 
```

## 4\. 将新指令添加到已经具有`ngModel`

```
<input type="text" lowercase ng-model="foo.bar"></input> 
```

这是一个将模型中的文本转换为小写并在模型中转换回大写的[工作示例](http://jsfiddle.net/phaas/8jFpV/)`input`

*模型控制器*的API 文档也有一个简短的解释和其他可用方法的概述。

# javascript - 使用对象作为键

> ID：11616640
> 
> 赞同：0
> 
> 时间：2012-07-23T16:31:21.337
> 
> 标签：javascript, jquery

我正在构建一个问卷构建器，其中一些问题的答案可以导致后续问题。下一步是序列化这些数据并将其处理为 SQL 查询。即使我使用的是 jQuery，我认为`serializeArray()`它还不够复杂，无法以我想要的方式序列化数据，就像：

```
Answer = {
    'text': String,
    'default': String,
    'img_path': String
}

Question = { 
    'type': String,
    'text': String,
    'followups': {
        Answer : [Question, Question, ...],
        Answer : [Question],
        Answer : []
    }
} 
```

我遇到的问题是，当我尝试使用`Answer`对象作为`'followups'`映射中的键时——当我使用`JSON.stringify()`而不是对键进行字符串化时，它被输出为 [object Object]。

编辑：

对密钥进行字符串化是保留数据的一种方法，但也有一些令人讨厌的转义，例如

```
"followups": {
    "{\"text\":\"asdfasdfa\"}": []
} 
```

解决这个问题会很好，但我愿意接受任何有关序列化此表单的更好方法的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:38:10.977

您可能需要稍微修改您的数据结构，类似于以下内容：

```
Question = { 
    'type': String,
    'text': String,
    'followups': [
        {
            answer : Answer,
            questions : [Question, Question, ...]
        },
        {
            answer : Answer,
            questions : [Question]
        },
        {
            answer : Answer,
            questions : []
        }
    ]
} 
```

# java - 为什么在创建对象时调用构造函数？

> ID：11616644
> 
> 赞同：0
> 
> 时间：2012-07-23T16:31:50.093
> 
> 标签：java, constructor

据此[，](http://www.cis.upenn.edu/~matuszek/General/JavaSyntax/constructors.html)构造函数实际上是初始化器。并且根据[这个](https://stackoverflow.com/questions/9381959/when-is-an-object-created-after-a-constructor-is-called/9381992#9381992)`new`答案，在调用关键字之后的构造函数之前已经创建了对象。

所以我的问题是`new`如果我不想初始化任何东西，需要在关键字之后放置构造函数吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T16:37:02.167

像这样想...

1.  JVM 为对象分配内存，但尚未初始化或连接。
2.  JVM 为内存中的对象分配通用的东西，比如指向方法的指针、静态变量等。虽然对象存在，但它仍然不是通过执行构造函数唯一地初始化。
3.  构造函数被调用，它初始化对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T16:35:33.970

如果你不想初始化你的变量，你可以声明它：

```
MyObject myObject; 
```

但是，如果您希望能够对 做任何事情`myObject`，您需要创建一个变量可以指向的对象，这可以通过`new`关键字来完成。否则`myObject`只是指着一个大的没有。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T16:45:58.080

多年来，Java 上游语言中的术语侵入了 Java 语言。

过去 (C) 分配是与初始化分开的步骤。它们在 C++ 中结合，现在被认为是同一个东西。从技术上讲，“构造”中的操作顺序是

1.  为对象分配的内存
2.  按指定初始化该内存。

对于对象的父类，可以多次执行这些步骤。关键是分配总是在初始化之前，并且两者是紧密耦合的。分配必须先于初始化，否则初始化没有内存要初始化。构造函数保证两者都完成以避免其他语言中的早期问题，其中程序将通过访问已分配但未初始化的项目来访问随机数据。创建构造函数是为了防止此类错误。

现在，您分配给的东西是一个变量，并且变量包含对值的引用（在 Java 中，对于对象）。因此，您可以将变量简单地视为可以取消引用到值的名称。如果您想要一个新名称，但不想让它引用任何内容，那么 Keppil 的答案是最好的。

我的类型我的名字；

这将创建一个引用无值（null）的名称。

但是，在 Java 中，*必须*初始化对象值。没有“没有初始化的分配”，因为这相当于拥有一个具有随机内部状态的对象。随机内部状态意味着使用该对象（充其量）会产生随机结果，并且（最坏情况下）会引用不存在的对象。由于分配和初始化的构造紧密耦合，类型系统工作；没有它，理论上你可以引用一个不存在的对象，从而在 Java 中重新创建 C 的分段错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T16:36:12.880

您要初始化对象本身，包括为对象分配内存。还有其他内务处理也需要完成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T16:36:17.127

引用您发布的链接：

> 构造函数的工作是确保新对象处于有效状态...

你真的想创建一个对象而不让它处于有效状态吗？

但是，如果您只想要一个对象引用，只需声明一个并且不要调用 new。

```
MyClass mc; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T16:39:52.743

你是对的，Java语法可能是

```
String str = new 
```

代替

```
String str = new String() 
```

给你一个空字符串。问题是有时我们想像这样将参数传递给构造函数：

```
String str = new String("text") 
```

这就是我们调用构造函数的原因。为了保持语法一致，您还必须调用默认构造函数`String()`。在这种情况下`String`是一个不可变类，因此没有其他方法可以设置它的初始值。

# qt-creator - QtCreator：避免在 Qt 子目录项目中重新定义 LIBS

> ID：11616647
> 
> 赞同：1
> 
> 时间：2012-07-23T16:31:54.427
> 
> 标签：qt-creator, libs, subdirectory

我有一个`subdirs project`具有以下结构的 Qt：

```
ExternalQtProject 
QtSubdirProjects
  - GUI
  - WebService 
```

`WebService`包含`LIBS`来自外部 Qt 项目（WebService 中的 .pro 文件）

```
LIBS += -L<path to ExternalQtProject>
LIBS += <some ExternalQtProject .obj files> 
```

`GUI`使用 Web 服务（GUI 中的 .pro 文件）：

```
LIBS += -L<path to WebService>
LIBS += <WebService .obj files> 
```

所以基本上`GUI`是使用一个来自 的头文件`WebService`，而后者又使用来自`ExternalQtProject`.

问题：我遇到链接器问题，直到我将`LIBS`来自的条目`WebService`也包含在 中`GUI`，所以`GUI`最终得到来自 的所有 LIBS `ExternalQtProject`：

```
LIBS += -L<path to ExternalQtProject> # I want to avoid redefinition of this
LIBS += <some ExternalQtProject .obj files>  # I want to avoid redefinition of this
LIBS += -L<path to WebService>
LIBS += <WebService .obj files> 
```

由于有明确的依赖关系（GUI->WebService->ExternalQtProject），**有没有办法避免**对子项目`LIBS`重新定义？`GUI`

-- 编辑 1 --

[如何使用 QMake 的 subdirs 模板？](https://stackoverflow.com/questions/1417776/how-to-use-qmakes-subdirs-template)帮助我更好地构建我的项目，但还没有避免重复`LIBS`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T12:35:30.917

Qmake .pro 文件可以使用变量并包含其他文件。

例如，您可以在需要时使用 SOMELIST=foo.obj bar.obj 和 LIBS += $$SOMELIST。

SUBDIRS 模板用于列出不同的 .pro 文件，每个文件通常负责构建一个二进制文件或一个库。

# android - 模拟 BluetoothDevice 时的 PowerMock 和 Android TypeNotPresentExceptionProxy

> ID：11616651
> 
> 赞同：2
> 
> 时间：2012-07-23T16:32:03.443
> 
> 标签：android, unit-testing, junit, powermock

我的问题是我正在尝试模拟 BluetoothDevice 进行一些测试，但这是最后一课。因此，要使用 PowerMock 模拟它，我必须使用`@PrepareForTest`注释。但是，当我说 时`@PrepareForTest({BluetoothDevice.class})`，我得到了一个例外。这是错误输出的前几行：

```
java.lang.ArrayStoreException: sun.reflect.annotation.TypeNotPresentExceptionProxy
at sun.reflect.annotation.AnnotationParser.parseClassArray(Unknown Source)
at sun.reflect.annotation.AnnotationParser.parseArray(Unknown Source)
at sun.reflect.annotation.AnnotationParser.parseMemberValue(Unknown Source) 
```

这是我正在使用的代码（测试仍然需要填写，我只是在减少变量）：

```
@RunWith(PowerMockRunner.class)
@PrepareForTest({ BluetoothDevice.class })
public class BluetoothCommTest {
    @Test
    public void testBluetoothComm() {
        fail("Not yet implemented");
    }
} 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:30:58.927

我弄清楚发生了什么事。我按照[此页面](https://sites.google.com/site/androiddevtesting/)上的说明进行操作，他们提供的 android.jar 已过时，并且不包含蓝牙库。

为了解决这个问题，我使用了 Powermock 1.2.5 和 Android 15 SDK 中包含的 android.jar。

# symfony - 教义双向多对多关系问题

> ID：11616655
> 
> 赞同：1
> 
> 时间：2012-07-23T16:32:21.093
> 
> 标签：symfony, doctrine-orm

我已经仔细阅读了[Doctrine 文档](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.1/reference/association-mapping.html#many-to-many-bidirectional)，但是我无法在 2.2 版中建立多对多双向关系。这是代码：

**附件实体**

```
/**
 * @ORM\Entity
 * @ORM\Table(name="attachment")
 * @ORM\HasLifecycleCallbacks
 */
class Attachment
{
...

/**
 * @var ArrayCollection $users
 * 
 * @ORM\ManyToMany(targetEntity="User", inversedBy="attachments", cascade={"persist"})
 * @ORM\JoinTable(name="users_attachments")
 **/
private $users;
...

/**
 * Get associated users
 *
 * @return ArrayCollection 
 */
public function getUsers()
{
    return $this->users;
}

/**
 * Add User to this Attachment
 *
 * @return User
 */
public function addUser(User $user)
{
    $this->users[] = $user;
    return $this;
}

/**
 * Add Users to this Attachment
 * 
 * @param ArrayCollection
 */
public function setUsers($users)
{
    $this->users = $users;
} 
```

**用户实体**

```
/**
 * @ORM\Entity
 * @ORM\Table(name="fos_user")
 */
class User extends BaseUser
{
...

/**
 * @var \Doctrine\Common\Collections\ArrayCollection $attachments
 * 
 * @ORM\ManyToMany(targetEntity="Attachment", mappedBy="users", cascade={"persist", "remove"})
 * @ORM\JoinTable(name="users_attachments")
 **/
private $attachments;
...

/**
 * Add an Attachment
 *
 * @param ArrayCollection $attachments
 * @return User
 */
public function setAttachments(ArrayCollection $attachments)
{
    $this->attachments = $attachments;
    return $this;
}

/**
 * Add an Attachment
 *
 * @param Attachment $attachment
 * @return User
 */
public function addAttachment(Attachment  $attachment)
{
    $this->attachments[] = $attachment;
    return $this;
}

public function getAttachments()
{
    return $this->attachments;
} 
```

通过此设置，我可以使以下工作（即正确存储附件和用户）：

```
$attachment = $this->getDoctrine()
        ->getRepository('MyBundle:Attachment')
        ->find($attachment_id);
$attachment->addUser($this->getDoctrine()
        ->getRepository('MyBundle:User')
        ->find($user_id))
$em->persist($attachment);
$em->flush(); 
```

但是，我还需要让以下代码工作（即，它不会触发错误，但不会更新关系）：

```
$user = $this->getDoctrine()
        ->getRepository('MyBundle:User')
        ->find($user_id);
$user->addAttachment($this->getDoctrine()
        ->getRepository('MyBundle:Attachment')
        ->find($attachment_id))
$em->persist($user);
$em->flush(); 
```

如果我在添加附件后检查用户实体，我可以看到该实体已正确存储在内存中，但是当刷新 EM 时，不会发出任何查询。

应用属性

```
cascade={"persist"} 
```

对列定义似乎没有效果。错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:16:51.373

您应该首先阅读[这部分文档](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/association-mapping.html#many-to-many-bidirectional)。

我建议从 User 实体中删除 @JoinTable。

仍然在您的用户实体中，您应该这样做：

```
public function addAttachment(Attachment  $attachment)
{
    $attachment->addUser($this); // synchronously updating inverse side
    $this->attachments[] = $attachment;
    return $this;
} 
```

我的回答是假设您实际上希望您的 Attachment 实体成为您的拥有方，而您的 User 实体成为您的反方。

# javascript - OpenLayers.Filter.Function 未按预期工作。事实上，根本不工作

> ID：11616658
> 
> 赞同：2
> 
> 时间：2012-07-23T16:32:51.780
> 
> 标签：javascript, geocoding, openlayers

我正在尝试使用函数过滤器设置规则。但它不起作用：该层上的线条只是黑色的。更重要的是，我提供的用于过滤特征的函数永远不会被调用。

有人可以指出我犯了什么错误吗？

这是代码。

感谢您的时间和亲切的关心。

```
var my_filter = new OpenLayers.Filter.Function(
    function(attributes) {
       console.log(attributes);
       var x=0; 
       return true; 
});

var ruleLow = new OpenLayers.Rule({
    filter:my_filter ,
  symbolizer: {pointRadius: 10, fillColor: "green",
               fillOpacity: 0.5, strokeColor: "green"}
});

var my_style=new OpenLayers.Style( null,ruleLow);

var my_style_map=new OpenLayers.StyleMap({
    "temporary":my_style,
    "default":my_style,
    "select":my_style
});

this.vectors= new OpenLayers.Layer.Vector(
    "Vector Layer",
    {
        styleMap:my_style_map,
        renderers:this.renderer,
    }
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T00:33:16.897

很高兴与大家分享如何使用 OpenLayers.Filter.Function！！（所以我解决了我遇到的问题）：我基本上必须改变。

不管怎么说，多谢拉。

```
var my_filter = new OpenLayers.Filter.FeatureId({
    **type: OpenLayers.Filter.Function,**
    evaluate:function(attributes) {
       console.log(attributes);
       var x=0; 
       return true;

    }
});
var ruleLow = new OpenLayers.Rule({
    filter:my_filter,
  });

var my_style=new OpenLayers.Style( {pointRadius: 7, fillColor: "#FF3300",
               fillOpacity: 0.5, strokeColor: "#FF3300"},**{rules:[ruleLow]}**);

var my_style_map=new OpenLayers.StyleMap({
    "temporary":my_style,
    "default":my_style,
    "select":my_style

});
this.vectors= new OpenLayers.Layer.Vector(
    "Vector Layer",
    {
        styleMap: my_style_map, 
        renderers:this.renderer,
    }
); 
```

# html - 从多项选择中发布值

> ID：11616659
> 
> 赞同：73
> 
> 时间：2012-07-23T16:32:53.087
> 
> 标签：html, html-select

如何在表单中发布多项选择的值？当我点击提交时，没有发布任何选定的值。

```
<form id="form" action="" method="post">
    <div>
        <select id="inscompSelected" multiple="multiple" class="lstSelected">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>                
        </select>
        <input type="submit" value="submit">
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-07-23T16:34:44.673

您需要添加一个`name`属性。

由于这是一个多选，在 HTTP 级别，客户端只是发送多个具有相同名称的名称/值对，如果您使用带有`method="GET": someurl?something=1&something=2&something=3`.

对于 PHP、Ruby 和其他一些库/框架，您需要`[]`在名称末尾添加方括号 ( )。框架将解析该字符串并以某种易于使用的格式呈现它，例如数组。

除了手动解析请求之外，没有与语言/框架/库无关的方式来访问多个值，因为它们都有不同的 API

对于 PHP，您可以使用：

```
<select name="something[]" id="inscompSelected" multiple="multiple" class="lstSelected"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-17T17:41:12.297

试试这个：这里 select 是你的选择元素

```
let select = document.getElementsByClassName('lstSelected')[0],
    options = select.options,
    len = options.length,
    data='',
    i=0;
while (i<len){
    if (options[i].selected)
        data+= "&" + select.name + '=' + options[i].value;
    i++;
}
return data; 
```

数据形式为查询字符串 iename=value&name=anotherValue

# ios - DequeReusableAnnotationView 崩溃程序

> ID：11616662
> 
> 赞同：0
> 
> 时间：2012-07-23T16:33:06.550
> 
> 标签：ios, xcode, ipad, mapkit

我在 IOS 中编写了一个程序，我在地图上用大头针标记了几个点。现在我有了 dequereusableannotationview 代码，它可以在一个引脚上正常工作，但在我使用两个引脚或尝试在地图上标记两个点时崩溃。它仅在我注释掉一个注释或注释掉 dequeucode 时才有效但问题是....我什至需要那个 dequeu 代码吗？因为我将拥有的最多的引脚可能是...10 ..？

谢谢

```
// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
- (void)viewDidLoad
{
    [super viewDidLoad];

    MKMapView *mv=[[MKMapView alloc]initWithFrame:CGRectZero];
    mv.delegate=self;
    [self setView:mv];

    MapAnnotation* ann=[[MapAnnotation alloc]init];
    CLLocationCoordinate2D location;
    location.latitude=(double)51.501468;
    location.longitude=(double)-0.141596;
    [ann setCoordinate:location];
    [ann setTitle:@"test"];
    [ann setTitle:@"plz work"];
    [mv addAnnotation:ann];
    [ann release];

    MapAnnotation* AnnB=[[MapAnnotation alloc]init];
    CLLocationCoordinate2D locationB;
    locationB.latitude=(double)16.4944;
    locationB.longitude=(double)-151.7364;
    [AnnB setCoordinate:locationB];
    [AnnB setTitle:@"test"];
    [AnnB setSubtitle:@"work"];

    [mv addAnnotation:AnnB];
    [AnnB release];
}

-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation{
    MKPinAnnotationView *pinView=nil;

    if (annotation!=mapView.userLocation) {
        static NSString *defaultID=@"MYLoction";

        pinView=(MKPinAnnotationView *)[mapView
                                        dequeueReusableAnnotationViewWithIdentifier:defaultID];
        if (pinView=nil) {
            pinView=[[[MKPinAnnotationView alloc]initWithAnnotation:annotation reuseIdentifier:defaultID]autorelease];

            pinView.pinColor=MKPinAnnotationColorPurple;
            pinView.canShowCallout=YES;
            pinView.animatesDrop=YES;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:37:26.313

一个问题是，当您在

```
if (pinView=nil) { 
```

您正在使用赋值运算符 ，`=`而不是相等运算符，`==`。这将导致每次都`nil`被分配，因此您永远不会重用注释。`pinView`我很惊讶编译器没有捕捉到这一点。

此外，您实际上并没有在`viewForAnnotation:`. 试试这个：

```
-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:
    (id<MKAnnotation>)annotation {
    if(annotation == mapView.userLocation) {
        return nil;
    }

    static NSString *defaultID=@"MYLoction";

    MKPinAnnotationView *pinView = (MKPinAnnotationView *)[mapView 
        dequeueReusableAnnotationViewWithIdentifier:defaultID];

    if (!pinView) {
        pinView = [[[MKPinAnnotationView alloc] initWithAnnotation:annotation 
            reuseIdentifier:defaultID] autorelease];

        pinView.pinColor=MKPinAnnotationColorPurple;
        pinView.canShowCallout=YES;
        pinView.animatesDrop=YES;
    }

    return pinView;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T16:57:47.933

尝试此代码进行适当的更改。以下代码对我有用。

*   (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id)annotation {

    静态 NSString *identifier = @"MyLocation";
    if ([annotation isKindOfClass:[MNMyLocation class]]) {

    ```
    MKPinAnnotationView *annotationView = (MKPinAnnotationView *) [atmLocatorMap dequeueReusableAnnotationViewWithIdentifier:identifier];
    if (annotationView == nil) {
        annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:identifier];
    } else {
        annotationView.annotation = annotation;
    }

    annotationView.enabled = YES;
    annotationView.canShowCallout = YES;
    //annotationView.image=[UIImage imageNamed:@"arrest.png"];

    return annotationView; 
    ```

    }

    返回零；

} `

# apache - 将 localhost 重定向到其他端口，例如 127.0.0.1:8080？

> ID：11616667
> 
> 赞同：-1
> 
> 时间：2012-07-23T16:33:35.520
> 
> 标签：apache, localhost

> **可能重复：**
> [如何将 localhost 重定向到 127.0.0.1:8080？](https://stackoverflow.com/questions/11600408/how-to-redirect-localhost-to-127-0-0-18080)

由于未识别的问题，任何服务 pid4 都在使用我的 Windows 7-64 位 PC 的端口 80。我最终决定将我的默认端口更改为 8080。但是如何更改在 URL 中输入 localhost 时的方式，然后自动从 127.0.0.1:8080 获取数据。

我还将主机文件编辑为

```
127.0.0.1:8080 localhost 
```

但它没有用。它显示为未找到。请帮助我的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:38:54.040

某些原因您不能使用端口禁用服务？

还有，整个127 *。。*.* 块保留用于回送，您可以尝试将 apache 服务器绑定到 127.1.1.1 而不是 127.0.0.1

编辑：还有什么原因你不能把它加入书签，端口等等？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T16:42:10.530

简短的回答，你不能。hosts 文件包含地址-名称对，没有端口。

例如，如果你把

```
127.0.0.1 localhost mypc someothername 
```

在您的主机文件中，您可以使用`http://localhost`or `http://mypc`or`http://someothername`并且总是在您的本地主机上结束。

对于阻塞 80 端口的进程，请查看[此博客](https://iamfarshad.wordpress.com/2011/09/11/fix-microsoft-httpapi2-0/)，可能的罪魁祸首包括 SSRS、IIS 或 Web 部署代理服务

# javascript - 计算日期之间的天数

> ID：11616675
> 
> 赞同：0
> 
> 时间：2012-07-23T16:34:15.740
> 
> 标签：javascript

我正在尝试计算两个日期之间的天数，但只是不断收到“NaN。我查看了其他帖子，但无法完全解决：-S

```
function checkdate() {

var currentTime = new Date()
var month = currentTime.getMonth() + 1
var day = currentTime.getDate()
var year = currentTime.getFullYear()
var datenow = (day + "/" + month + "/" + year)  

var startdate = document.forms[0].datescopestart.value;
var sDate = new Date(Date.parse("startdate","dd/mm/yy"));

var totaldays = Date.datenow - Date.sDate;  
    alert(totaldays);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T16:37:32.120

这是我在库中使用了一段时间的功能，效果很好。

```
function days_between(date1, date2) {

  // The number of milliseconds in one day
  var ONE_DAY = 1000 * 60 * 60 * 24

  // Convert both dates to milliseconds
  var date1_ms = date1.getTime()
  var date2_ms = date2.getTime()

  // Calculate the difference in milliseconds
  var difference_ms = Math.abs(date1_ms - date2_ms)

  // Convert back to days and return
  return Math.round(difference_ms/ONE_DAY)

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T16:36:50.543

`startdate`删除调用中的引号`Date.parse`。并且`Date.`在计算中你的变量名前面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T16:38:21.190

最简单的方法如下：

```
var days = Math.floor(enddate.getTime()-startdate.getTime())/(24*60*60*1000); 
```

其中`startdate`和`enddate`是有效的 Date 对象。

# ruby-on-rails - ruby on rails 更改搜索路线

> ID：11616678
> 
> 赞同：1
> 
> 时间：2012-07-23T16:34:37.253
> 
> 标签：ruby-on-rails, url, search, routing

我的搜索表格：

```
<%= form_tag("/search/index/", :method => "get") do %>
    <%= text_field_tag :search, params[:search], :name => 'q' %>
<% end %> 
```

我的搜索控制器：

```
class SearchController < ApplicationController
  def index
    @query = params[:q]
  end
end 
```

当前网址：`http://localhost:3000/search/index/?utf8=✓3&q=`

我想要的是`http://localhost:3000/search?q=`

或至少与此类似的东西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T16:38:44.140

在您的 routes.rb 中，只需将搜索与索引匹配为

```
match "/search" => "search#index" 
```

# coffeescript - Ember.JS && Coffeescript

> ID：11616688
> 
> 赞同：5
> 
> 时间：2012-07-23T16:35:20.157
> 
> 标签：coffeescript, ember.js

我知道有 ember-rails gem，但是这会生成 javascript 而不是 Coffeescript。我很好奇是否有包含咖啡脚本生成器的 gem，或者是否有办法让 ember-rails 做到这一点。由于咖啡脚本是 Rails 3 中的默认设置，我认为这也是默认设置。显然我可以手动创建所有文件，我只是很好奇，因此团队中的其他人不必创建这些文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:36:10.183

它似乎正在路上：[https](https://github.com/emberjs/ember-rails/pull/93) ://github.com/emberjs/ember-rails/pull/93 在它合并到 ember-rails gem 之前，您可以将修改后的版本添加到您的 Gemfile：
`gem 'ember-rails', github: 'adrulz/ember-rails'`

没试过，但看起来还可以。

# jquery - Firefox 10 中未加载 Jquery

> ID：11616689
> 
> 赞同：0
> 
> 时间：2012-07-23T16:35:21.950
> 
> 标签：jquery, asp.net, firefox

Jquery 未在 Firefox 10.0.5 中加载，但在 IE 8 中加载。`alert`母版页中的以下消息在 IE 中有效，但在 FF 中无效：

```
<head runat="server">
    <script type="text/jscript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            alert("I'm here");
        });
    </script>
    <asp:ContentPlaceHolder ID="HeadContent" runat="server">
    </asp:ContentPlaceHolder>
</head> 
```

Firebug 显示消息`$ is not defined`。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T16:38:23.100

你需要这个：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

不是这个：

```
<script type="text/jscript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

请注意，我将`"text/jscript"`IE 支持但 Firefox 不支持的更改`"text/javascript"`为 IE 和 Firefox 都支持的 。

# asp.net - 除非在母版页中声明，否则不会显示背景图像

> ID：11616690
> 
> 赞同：-1
> 
> 时间：2012-07-23T16:35:27.393
> 
> 标签：asp.net, css, master-pages

使用下面的样式（css 文件链接到 Default.aspx，然后插入其母版页），我想控制颜色、重复和图像。前两个工作正常，但图像不显示。

```
body{
  background-color: #000000;
  background-image: url('images/bg_01.jpg');
  background-repeat: no-repeat;
} 
```

当我将样式显式添加到母版页上的正文标记时，它可以工作，但男孩确实看起来很难看。为什么会这样？我怎么能杀死它？

```
<body style="background-image: url('images/bg_01.jpg');">
  ...
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T16:46:18.317

在 CSS 文件中使用`background-image: url()`时，请确保 CSS 中的图像路径是**相对于 CSS 文件的路径**，而不是相对于正在使用 CSS 的页面。

例如，如果您的 CSS 文件位于`/styles/mystyle.css`并且您的图像位于，`/images/image.jpg`那么您的 url 应该是...

```
background-image: url(../images/image.jpg); 
```

# sql - SQL查询日期范围之间的总金额

> ID：11616693
> 
> 赞同：0
> 
> 时间：2012-07-23T16:35:32.107
> 
> 标签：sql

问题：我想返回在生成第一张发票后的第一个 15 天内创建的发票总额

发票表：

```
ClientID  InvoiceDate  InvoiceAmt
--------  -----------  ----------
150       1/15/2012    150
150       1/25/2012    1200
150       2/10/2012    800
250       1/12/2012    950
250       1/26/2012    1050
250       2/05/2012    1250
400       1/10/2012    500
400       1/26/2012    700 
```

因此，为每个创建的第一张发票如下：

```
150 = 1/15/2012
250 = 1/12/2012
400 = 1/10/2012 
```

现在我想从初始发票日期计算 15 天。所以计算应该返回：

```
150 = 1/30/2012
250 = 1/27/2012
400 = 1/25/2012 
```

现在我希望查询对适当日期范围的 InvoiceAmt 求和。

```
150 = 1350
250 = 2000
400 = 500 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T16:44:53.650

您可以使用以下内容（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/83354/1)）：

```
select i1.clientid
    , sum(invoiceamt) as Total
from invoice i1
inner join
(
    select clientid, min(invoicedate) mindate
    from invoice i
    group by clientid 
) i2
    on i1.clientid = i2.clientid
where i1.invoicedate between i2.mindate and dateadd(d, 15, mindate)
group by i1.clientid 
```

# php - 使用 UploadiFive 将多个文件上传到 FTP

> ID：11616696
> 
> 赞同：0
> 
> 时间：2012-07-23T16:35:34.890
> 
> 标签：php, javascript, jquery, file-upload, ftp

我一直在尝试使用 UploadiFive 将文件从单独的 Web 服务器上传到 FTP 服务器。[StackOverflow 上的这个](https://stackoverflow.com/questions/9802497/html-php-js-select-multiple-file-and-upload-via-ftp)问题解决了这个问题，但没有解决问题。我正在使用以下代码（取自前面提到的问题）尝试从 UploadiFive 上传文件：

```
if (!empty($_FILES)) {
$tempFile = $_FILES['Filedata']['tmp_name'];                          // 1

//$targetPath = $_SERVER['DOCUMENT_ROOT'] . $_REQUEST['folder'] . '/';  // 2
//$targetFile =  str_replace('//','/',$targetPath) . $_FILES['Filedata']['name']; // 3

$ftp_server = "***";  //address of ftp server.
$ftp_user_name = "***"; // Username
$ftp_user_pass = "***";   // Password
$conn_id = ftp_connect($ftp_server);
ftp_login($conn_id, $ftp_user_name, $ftp_user_pass); 
ftp_pasv ( $conn_id, true );

if( ftp_fput($conn_id, 'TEST/' . $_FILES['Filedata']['name'], $tempFile, FTP_BINARY)){                       // 4
    echo true;
}else{
    echo false;
}

ftp_close($conn_id);

} else {
    echo false;
} 
```

每当执行此代码时，文件都不会出现在本地 Web 服务器或 FTP 服务器上。这段代码在里面`uploadifive.php`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:51:41.637

使用此代码修复：

```
if (!empty($_FILES)) {

    $ftp_server = "****";
    $ftp_user = "****";
    $ftp_password = "****";
$tempFile   = $_FILES['Filedata']['tmp_name'];

    $file_to_upload = $tempFile;
    $remote_location = "/directoryname/". $_FILES['Filedata']['name'];

    // set up connection or exit with message
    $flink = ftp_connect($ftp_server) or exit("Can't connect to ftp server: $ftp_server");

    // login or at least try  
    if(ftp_login($flink, $ftp_user, $ftp_password)) {

     // if login successful use ftp_put to upload the file
     // if you upload binary files use mode FTP_BINARY
     if(ftp_put($flink, $remote_location, $file_to_upload, FTP_ASCII)) {

         echo "Success! File is uploaded!";
         } else {
               echo "Can't upload file";
         }
    } else {
         echo "Can't login with this user & password";
    }
     // close the connection
     ftp_close($flink);
     } 
```

# facebook-opengraph - 如何使用“og”（开放图）元标记进行 Facebook 分享

> ID：11616697
> 
> 赞同：122
> 
> 时间：2012-07-23T16:35:35.380
> 
> 标签：facebook-opengraph, meta

Facebook 从我的网站获取所有图片。

我只想分享该页面上的一张图片。

我听说过`og`meta标签，但我不知道怎么写。

* * *

## 回答 #1

> 赞同：361
> 
> 时间：2013-05-29T20:03:26.777

Use:

```
<!-- For Google -->
<meta name="description" content="" />
<meta name="keywords" content="" />

<meta name="author" content="" />
<meta name="copyright" content="" />
<meta name="application-name" content="" />

<!-- For Facebook -->
<meta property="og:title" content="" />
<meta property="og:type" content="article" />
<meta property="og:image" content="" />
<meta property="og:url" content="" />
<meta property="og:description" content="" />

<!-- For Twitter -->
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="" />
<meta name="twitter:description" content="" />
<meta name="twitter:image" content="" /> 
```

Fill the content =" ... " according to the content of your page.

For more information, visit *[18 Meta Tags Every Webpage Should Have in 2013](http://www.iacquire.com/blog/18-meta-tags-every-webpage-should-have-in-2013/)*.

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-07-23T16:43:34.297

Facebook 使用所谓的[开放图形协议](http://ogp.me/)来决定在您共享链接时要显示哪些内容。OGP 会查看您的页面并尝试决定要显示的内容。我们可以伸出援助之手，真正**告诉**Facebook 从我们的页面中获取什么。

**我们这样做的方式是使用`og:meta`标签。**

标签看起来像这样 -

```
 <meta property="og:title" content="Stuffed Cookies" />
  <meta property="og:image" content="http://fbwerks.com:8000/zhen/cookie.jpg" />
  <meta property="og:description" content="The Turducken of Cookies" />
  <meta property="og:url" content="http://fbwerks.com:8000/zhen/cookie.html"> 
```

您需要在`<head>`HTML 文件中放置这些或类似的元标记。不要忘记将值替换为您自己的值！

有关更多信息，您可以在其文档中阅读有关 Facebook 如何使用这些元标记的所有信息。这是那里的教程之一 - [https://developers.facebook.com/docs/opengraph/tutorial/](https://developers.facebook.com/docs/opengraph/tutorial/)

* * *

Facebook 为我们提供了一个很棒的小工具来帮助我们处理这些元标记 - 您可以使用[调试器](https://developers.facebook.com/tools/debug)查看 Facebook 如何查看您的 URL，它甚至会告诉您它是否存在问题。

这里要注意的一件事是，每次您对元标记进行更改时，您都需要再次通过[调试器](https://developers.facebook.com/tools/debug)提供 URL ，以便 Facebook 将清除缓存在其服务器上的有关您的 URL 的所有数据。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2014-10-02T10:26:46.793

我构建了一个用于元生成的工具。它预先配置了 Facebook、Google+ 和 Twitter 的条目，您可以在这里免费使用它：http: [//www.groovymeta.com](http://www.groovymeta.com)

为了进一步回答这个问题，`OG`标签（Open Graph）标签的工作方式与元标签类似，应该放在 HTML 文件的 HEAD 部分。有关如何有效使用 OG 标签的更多信息，请参阅[Facebook 的最佳实践。](https://developers.facebook.com/docs/sharing/best-practices)

# javascript - ASP。Net MVC / jQgrid 列过滤

> ID：11616698
> 
> 赞同：0
> 
> 时间：2012-07-23T16:35:49.453
> 
> 标签：javascript, asp.net-mvc-3, razor, jqgrid

通过一些工作，我终于得到了我的 jQGrid 工作。[我希望它具有演示](http://www.trirand.net/demoaspnetmvc.aspx)中的列过滤。

![在此处输入图像描述](../Images/7d44f96029511e69270c5fdd9674d583.png)

我的网格是：

```
 $(function () {
        $("#list").jqGrid({
            url: '/Work/DynamicGridData/',
            datatype: 'json',
            mtype: 'GET',
            colNames: ['Id', 'Job Title', 'Job Type','Job Priority','Rate','Creation Date','Deadline'],
            colModel: [
          { name: 'Id', index: 'JobDescriptionID', align: 'left' },
          { name: 'Job Title', index: 'JobTitle',align: 'left' },
          { name: 'Job Type', index: 'JobType.JobTypeName', align: 'left'},
          { name: 'Job Priority', index: 'JobPriority.JobPriorityName', align: 'left' },
          { name: 'Rate', index: 'JobType.Rate', align: 'left' },
          { name: 'Creation Date', index: 'CreationDate', align: 'left'},
          { name: 'Deadline', index: 'JobDeadline', align: 'left'}],
            pager: jQuery('#pager'),
            rowNum: 10,
            rowList: [5, 10, 20, 50],
            sortname: 'JobDescriptionID',
            sortorder: "desc",
            viewrecords: true,
            imgpath: '',
            caption: 'My first grid'
        });
    }); 
```

如图所示，我需要为列过滤做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:37:47.080

要添加工具栏搜索，您首先需要通过执行以下操作声明网格将具有工具栏：

```
$("#list").jqGrid('filterToolbar', options); 
```

[Options 是一个包含不同配置设置的对象，您可以在此处](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3atoolbar_searching&s%5B%5D=filtertoolbar)查看可用选项列表。

然后显示的搜索过滤器的类型取决于您在列模型中选择的内容。可用的选项在[这里](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3asearch_config)。

您链接到的演示适用于 jqGrid 的付费包装器版本，但是您的代码似乎是网格的标准免费版本，这是我的答案所基于的。如果您想查看免费版本的演示，那么这个[页面](http://www.trirand.com/blog/jqgrid/jqgrid.html)有很多。过滤器工具栏演示如下：

`New in version 3.7 -> Tooolbar search`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:41:40.193

我认为这个链接可以帮助你http://www.ok-soft-gmbh.com/jqGrid/SingleSearchFilter.htm

并检查这个也...

[jqgrid 中是否有用于添加高级过滤器以发布数据的 api？](https://stackoverflow.com/questions/5272850/is-there-an-api-in-jqgrid-to-add-advanced-filters-to-post-data/5273385#5273385)

# php - 是否可以在当前脚本中包含当前脚本？

> ID：11616699
> 
> 赞同：0
> 
> 时间：2012-07-23T16:35:50.817
> 
> 标签：php, include

是否允许这样做：

`main.php`：

```
//some code....

include "main.php";

//some more code.... 
```

这不会引起问题吗？

PHP 允许这种情况发生吗？如果确实如此，这样做的原因是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T16:38:01.003

是的，这是可能的，但不是一个好主意或好的设计。

如果您的包含是无条件的（即不受`if`语句保护），php 最终将因内存或 CPU 时间限制而终止。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T16:37:02.860

如果你声明任何类或函数，你就会遇到问题。

因为您不能两次声明它们。我不明白为什么你需要做这样的事情。有什么特别的原因吗？

# jquery - Jquery获取标签的所有内容，包括其他标签

> ID：11616706
> 
> 赞同：0
> 
> 时间：2012-07-23T16:36:28.993
> 
> 标签：jquery, html, string

可以说我有以下代码：

```
<p>
hello, how are you today, <a href="sfdjo.php">John</a>?
</p> 
```

有没有办法检索里面的所有文本，以便我有一个字符串：

```
'hello, how are you today, <a href="sfdjo.php">John</a>?' 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T16:38:22.947

是的。假设您的外部容器有一个可以引用的 ID 或类名，那么使用 html() 方法很简单，如下所示：

```
var containedHTML = $('#container').html(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T16:48:49.640

您可以通过使用获取字符串

```
var containedHTML = $('p').html(); 
```

如果您的 HTML 中有多个 p-tag，则会将其附加到结果中。

所以最好的办法是给你的 p-tag 一个 id 并在这个 id 上请求文本。

```
<p id="example">
    Text
</p> 
```

以下 JavaScript 将返回您的文本：

```
var containedHTML = $('#example').html(); 
```

# javascript - 与 jQuery 的 .contents() 等效的 JavaScript 是什么？

> ID：11616713
> 
> 赞同：8
> 
> 时间：2012-07-23T16:37:05.670
> 
> 标签：javascript, jquery

我想在我使用的 iframe 上更改类属性，`.contents()`它工作得很好。但我想使用 JavaScript 来做到这一点。我的代码是：

```
var $c = $('#myframe').contents();              
$c.find('.inner-wp').css('margin','0') 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T16:45:12.123

`.contents()`在框架上返回框架内的文档。因此，您正在寻找：

```
var frame = document.getElementById('myframe');
var c = frame.contentDocument || frame.contentWindow.document; 
```

注意：如果框架来自不同的来源，这将不起作用。
代码的其余部分：

```
var inner_wp = c.getElementsByClassName('inner-wp');
for (var i=0; i<inner_wp.length; i++) {
    inner_wp[i].style.margin = '0';
} 
```

# json - 杰克逊 2.0 循环关系

> ID：11616714
> 
> 赞同：1
> 
> 时间：2012-07-23T16:37:09.937
> 
> 标签：json, spring-mvc, annotations, jackson

我正在使用 jackson 2.0 来序列化一个引用自身的类。

```
Class A{
  String identifier;
  List<A> related;
} 
```

我希望 JSON 看起来像这样：

```
{ identifier: "name",
  related [ identifier: "related to name",
            identifier: "also related to name"]
} 
```

本质上，我想经历一个深度的递归。我试过了

```
@JsonIdentityInfo(generator=ObjectIdGenerators.IntSequenceGenerator.class, property="@id") 
```

但只有在有指向原始对象的链接时才会停止递归。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T17:00:19.427

Jackson 2.0 身份处理旨在按原样包含 Object 的第一个实例，并且仅包含使用 id 的辅助引用。

但是您可以为您的“相关”字段定义自定义序列化器（和反序列化器），以使用不同的序列化样式：

```
@JsonSerialize(contentUsing=MyIdOnlySerializer.class) List<A> related; 
```

并实施`MyIdOnlySerializer`，使其只写出`identifier`.

# jquery - 我的 Twitter Bootstrap 的 ScrollSpy 是否试图窥探不应该被窥探的元素？

> ID：11616723
> 
> 赞同：3
> 
> 时间：2012-07-23T16:37:48.907
> 
> 标签：jquery, backbone.js, scroll, twitter-bootstrap

我正在使用 BackboneJS 和 Bootstrap，并且我试图在访问者单击按钮后对某些内容启用滚动监视。

因此，当用户单击该按钮时，将执行以下操作：

```
$('#frontPageNav').css('display', 'block'); // It was hidden on load
$('#frontPageNav').scrollspy(); // Activate scrollspy, this is where the error happens
$('[data-spy="scroll"]').each(function () {
  var $spy = $(this).scrollspy('refresh'); // I think this is not needed because nothing was invisible before
});
$('#frontPageNav li').on('activate', function () { // This never gets emitted
  alert('activate!');
}); 
```

我想被监视的内容是这样放置的：

```
<div data-spy="scroll" data-target="#frontPageNav">
  <div id="home-top" class="row slide">
  </div>
  <div id="home-how" class="row slide">
  </div>
  <div id="home-join" class="row slide">
  </div>
</div> 
```

页面上没有其他元素具有 data-spy 属性，所以我认为这应该是唯一被监视的内容，但显然不是： On page load I get an error, ，`Uncaught TypeError: Cannot read property 'top' of null`这意味着 scrollspy 插件正在尝试查找`$.position()`一个不存在的元素。我在 Chrome 的开发人员工具中打开了异常刹车，未捕获的异常在 bootstrap.js 的第 454 行，`&& [[$href.position().top, href]]) || null`如果我 hover `href`，选择器用于我的标记中没有的元素，但我有一个指向哈希的链接。

这是否意味着 scrollspy 插件认为它应该监视所有链接`href="#something"`并在具有该 ID 的标记元素中查找？为什么不保持对元素的间谍活动`data-spy="scroll"`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T05:36:51.307

通过将 ScrollSpy 插件附加到特定元素，插件将侦听该元素上的滚动事件。但是，该插件使用**目标**选项来确定哪些链接有资格激活。除非明确提供**目标**，否则 ScrollSpy 插件将抓取*整个正文*以查找与选择器匹配的链接`'.nav li > a'`。通过提供一个**目标**，选择器将变为`target + ' .nav li > a'`，将搜索限制在**目标**内。

API 通过使用标记支持规范`data-target`，以及通过在 JavaScript 调用中将其作为选项传递`$('#myElement').scrollspy({target: '#myTarget'});`。

对[**如何激活 Twitter Bootstrap Affix 组件的链接**](https://stackoverflow.com/a/12125450/570918)[？](https://stackoverflow.com/a/12125450/570918)

# regex - RegEx.IgnoreCase 问题

> ID：11616724
> 
> 赞同：1
> 
> 时间：2012-07-23T16:37:49.233
> 
> 标签：regex, vb.net, ignore-case

例如，我有一个小函数，它返回两个其他字符串之间的字符串（考虑在单引号、双引号甚至简单的 html 标记之间）。

```
 Dim exp As String = String.Format("{0}(.*?){1}", beginMarker, endMarker) 
```

现在，如果我为 beginMarker 传入“<b>”，为结束标记传入“</b>”，并且我没有指定 RegEx.Ignore 大小写，它会正确返回匹配的小写 <b></b >。但是，一旦我指定 IgnoreCase，它就永远不会返回（假设输入相同）。这是一个示例函数（删除 RegexOptions.IgnoreCase 并且它可以工作）。此外，无论我是否逃避输入的标记，它似乎都不会改变输出，唯一的区别是 IgnoreCase：

我的问题是，我错过了什么（我使用了一个简单的例子，因为我实际上并没有用属性解析 HTML）？

输入：beginMarker = "<b>"
输入：endMarker = "</b>"
输入：searchText = "<b>这是一个测试</b>"
输入：beginMakers（没关系，真或假）

```
Public Shared Function GetStringInBetween(beginMarker As String, endMarker As String, searchText As String, includeMarkers As Boolean) As List(Of String)
    beginMarker = RegularExpressions.Regex.Escape(beginMarker)
    endMarker = RegularExpressions.Regex.Escape(endMarker)
    Dim exp As String = String.Format("{0}(.*?){1}", beginMarker, endMarker)
    Dim regEx As New RegularExpressions.Regex(exp)
    Dim returnList As New List(Of String)

    For Each m As Match In regEx.Matches(searchText, 0, RegexOptions.IgnoreCase)
        If includeMarkers = True Then
            returnList.Add(m.Value)
        Else
            returnList.Add(m.Value.TrimStart(beginMarker.ToCharArray).TrimEnd(endMarker.ToCharArray))
        End If
    Next

    Return returnList
End Function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T18:15:17.287

我不会使用 .NET 类名作为变量名，因为这可能会让人感到困惑。

这行得通，我更改了 Trim 函数，以便忽略大小写：

```
Imports System.Text.RegularExpressions

Module Module1

    Public Function GetStringInBetween(beginMarker As String, endMarker As String, searchText As String, includeMarkers As Boolean) As List(Of String)
        Dim exp As String = String.Format("{0}(.*?){1}", Regex.Escape(beginMarker), Regex.Escape(endMarker))
        Dim returnList As New List(Of String)

        For Each m As Match In Regex.Matches(searchText, exp, RegexOptions.IgnoreCase)
            If includeMarkers Then
                returnList.Add(m.Value)
            Else
                ' return the portion of the matched string without the markers
                returnList.Add(m.Value.Substring(beginMarker.Length, m.Value.Length - beginMarker.Length - endMarker.Length))
            End If
        Next

        Return returnList

    End Function

    Sub Main()
        ' include a \ to confirm the regex escaping 
        ' outputs: "hello, again"
        Console.WriteLine(String.Join(", ", GetStringInBetween("<x>", "</\x>", "<X>hello</\x> world <x>again</\x>", False).ToArray))
        Console.ReadLine()
    End Sub

End Module 
```

编辑：哦，是的，也使用**Option Strict On**。并且没有将 (String, Int32, String) 作为参数的 RegEx.Matches 重载。

# mysql - 通过读取另一个插入数据库

> ID：11616729
> 
> 赞同：0
> 
> 时间：2012-07-23T16:38:21.240
> 
> 标签：mysql, split

我有一个数据库 X，其中包含表 Y 和 Z。在 Y 中，我有一个名为 W 的列。它包含用逗号分隔的数据。我想要做的是通过 Y，在 W 中拆分数据，如果不存在则将其插入 Z。

我正在使用 MySQL 数据库。帮助？

编辑。更具体地说，我给你更多的信息。W 可以包含从零到数百的逗号分隔的项目。我希望代码检查它们是否存在于 Z 中。如果它们不存在，它将把它们插入 Z 中，每个人在自己的记录中用逗号分隔。因此，W 中的数据“a,b,c”看起来像 Z 中的“a”、“b”、“c”，都在它们自己的记录中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:21:30.290

这应该在您放置正确的主机、用户、密码、数据库、表格后执行...

```
<?php

$conn = new mysqli('some_host', 'some_user', 'some_pass', 'some_db');

if ($conn->connect_error) die('Connect Error (' . $mysqli->connect_errno . ') '. $mysqli->connect_error);

$zrows = array();

$result = $conn->query("SELECT W FROM Y");

if($result) while ($row = $result->fetch_object()){
    if(!empty($row->W)) foreach(explode(',',$row->W) as $v) $zrows[] = "('".$conn->real_escape_string($v)."')";

}
if(!empty($zrows)) {
    $conn->query("INSERT IGNORE INTO Z (`value`) VALUES ".implode(',',$zrows));
} 
```

如果行数过多，您可能会达到 PHP 的内存限制或 mysql 的 max_packet_size 在这种情况下，您可以一次插入几 1000 条记录

也忘了你需要一个`UNIQUE KEY`on `value`in`Z`

# regex - expr 字符串匹配

> ID：11616735
> 
> 赞同：0
> 
> 时间：2012-07-23T16:38:26.817
> 
> 标签：regex, bash

我想为 ex 匹配一个或多个事件。使用 expr 的废话。

这行得通。

```
$ expr "blahblahblah" : 'blahblah'
8 
```

这个正则表达式有什么问题？

```
$ expr "blahblahblah" : '\(blah\)\+'
blah 
```

我想要匹配的字符数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T16:44:47.893

由于您的问题已标记为`bash`，因此在现代版本的 shell 中，有比 expr 更好的设施，它们完全符合您的要求：

```
$ re='(blah)+'
$ [[ foo_blahblah_bar =~ $re ]] && echo "${#BASH_REMATCH[0]}"
8 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T16:44:40.143

首先，你需要`\(\)`代替`()`和`\+`代替`+`. 但这还不是全部。

您不能同时使用组`()`并获取匹配字符串的长度。

模式匹配返回在 ( 和 ) 或 null 之间匹配的字符串；如果 ( 和 ) 未使用，则返回匹配的字符数或 0。

您必须使用`wc`来获取字符串的长度：

```
$ expr "blahblahblahblah" : '\(\(blah\)\+\)' | wc -c
17 
```

或使用参数扩展：

```
$ m=$(expr "blahblahblahblah" : '\(\(blah\)\+\)') 
$ echo ${#m}
16 
```

（wc -c 也计算行尾，因此存在差异）。

但是如果你可以编写不带组的正则表达式，你会得到长度：

```
$ expr "blahhhhhbl" : "blah\+"
8 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T16:52:48.130

使用 sed：

```
echo "blahblahblah" | sed -n 's!\(\(blah\)*\).*!\1!p' | wc -c 
```

# javascript - 如何保持父表可用

> ID：11616741
> 
> 赞同：0
> 
> 时间：2012-07-23T16:38:49.117
> 
> 标签：javascript, node.js, sequelize.js

我有两个模型：`User`和`Phone`

该`User`模型有一个名为的字段，该字段`Phone_id`填充了该`Phone.id`字段。

我正在尝试遍历所有电话并显示电话名称和关联的用户分机号码。

但是，由于回调（我认为），当我到达方法的成功方法时，电话对象已经消失`getUser`。

代码如下：

```
var User = sequelize.import(__dirname + '/../models/User.js');
var Phone = sequelize.import(__dirname + '/../models/Phone.js');

Phone.hasOne(User,{ foreignKey: 'Phone_id'});

Phone.findAll().success(function(phones){
  for (var i = 0; i < phones.length; i++) {
    phones[i].getUser().success(function(user){
      console.log(xxxx.Name, user.Extension);
    });
}); 
```

如何在 console.log 语句 iow 中显示电话名称和用户分机，我需要用什么代替 xxxx ？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:40:24.363

你想要做的是：

```
var User = sequelize.import(__dirname + '/../models/User.js');
var Phone = sequelize.import(__dirname + '/../models/Phone.js');

Phone.hasOne(User,{ foreignKey: 'Phone_id'});

Phone.findAll().success(function(phones){
  phones.forEach(function(phone) {
    phone.getUser().success(function(user){
      console.log(phone.Name, user.Extension);
    });
  })
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:44:09.517

未经测试，但类似

```
var User = sequelize.import(__dirname + '/../models/User.js');
var Phone = sequelize.import(__dirname + '/../models/Phone.js');

Phone.hasOne(User,{ foreignKey: 'Phone_id'});

Phone.findAll().success(function(phones){
  phones.forEach(function(phone) {
    phone.getUser().success(function(phone) {
      return function(user){
        console.log(phone.Name, user.Extension);
      }
    }(phone))
  })
}); 
```

# c# - 保存 ArrayList 以供下次程序执行时使用

> ID：11616747
> 
> 赞同：2
> 
> 时间：2012-07-23T16:39:05.857
> 
> 标签：c#, arraylist, save, settings.settings

我有 ac# 程序将用户输入的数据保存到隐藏的 xml 文件中。我希望能够存储特定 xml 文件的文件名，以便当用户退出程序并再次重新输入时，他们可以从下拉列表中选择该文件的名称并将存储的数据加载到该文件中xml 文件转换成另一种形式。我正在考虑将文件的名称保存到数组列表中，因为它们是动态的，但是我无法找到一种方法来保存或保留此数组列表中的值，以便可以将它们分配给表单上的组合框用户进入应用程序。有没有人有任何建议或想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T16:42:31.110

如果要将 XML 文件保存到磁盘，为什么不在应用程序开始时读取目录以获取文件列表，然后使用检索到的文件名填充下拉列表？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T16:49:23.160

1.  将`.settings`文件添加到您的项目中。
2.  在设置编辑器中为您的隐藏文件列表提供名称（例如 HiddenFiles）
3.  选择`StringCollection`类型
4.  选择范围（默认为用户）
5.  在值编辑器中提供值。

现在您的设置将通过以下方式从代码中获得：

```
combobox.DataSource = Settings.Default.HiddenFiles; 
```

如果您想在此列表中添加另一个文件名（该用户稍后启动应用程序后可用）：

```
if (Settings.Default.HiddenFiles == null)
    Settings.Default.HiddenFiles = new StringCollection();
Settings.Default.HiddenFiles.Add(pathToFile);
Settings.Default.Save(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T18:08:13.427

这是在运行时产生异常的代码。

Settings1.Default.eventSaveArrayList.Add(clubNameTextBox.Text.ToString() + " " + DateString); Settings1.Default.Save();

# c++ - 不能在 C++ 中使用列表迭代器

> ID：11616748
> 
> 赞同：1
> 
> 时间：2012-07-23T16:39:11.480
> 
> 标签：c++, list, iterator

好的，所以我在包含迭代器的代码中有错误。
这是我的代码的错误部分：

```
for(list<char>::iterator it = eatUpRight.begin();it!= eatUpRight.end();it+=2)
{
    board[*it][*(it+1)]=3;
    _3eat2(*it,*(it+1),eatOptions,newCurrentEatingOption);
    board[*it][*(it+1)]=0;
} 
```

不要担心 board 和 _3eat2 以及任何其他标识符，因为这绝对不是问题。
所有你需要知道的是板是一个二维数组。

```
board[*it][*(it+1)] 
```

(it) 应该是二维数组的索引，但它给了我错误。并在我尝试使用迭代器的其他地方给我其他错误。
所以你能告诉我这段代码有什么问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T16:43:58.410

`it + 1`仅对 有效`RandomAccessIterators`。`list`不提供`RandomAccessIterators`，但提供双向迭代器。[在此处](http://en.cppreference.com/w/cpp/iterator)查看迭代器库的概述。使用[std::advance](http://en.cppreference.com/w/cpp/iterator/advance)来抽象出这些操作的差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T16:44:39.780

```
std::list<T>::iterator 
```

是一个`bidirectional iterator`。它没有`operator +(std::ptrdiff_t)`；使用`std::advance`而不是`operator +`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T18:00:09.303

补充说明：`it`不是索引而是迭代器。还有其他一些事情，这意味着您不能在与提供给您的集合不同的集合上使用它。

您从 . 接收`eatUpRight`并使用它（作为索引！）`board`。

# asp.net - asp.net 应用程序开始和结束事件序列

> ID：11616753
> 
> 赞同：0
> 
> 时间：2012-07-23T16:39:35.533
> 
> 标签：asp.net, events

我们正在记录这两个事件，但是我们看到应用程序启动更多，而不是成对看到它们。我的意思是而不是

应用程序开始，结束，开始，结束，开始，结束......

我们看

应用程序开始，结束，开始，开始，结束......（见两个没有结束的开始）

正常吗？应用程序是否在未触发 Application_End 事件的情况下重新启动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:43:29.330

这种行为的唯一可能原因是 w3wp 崩溃。在 Windows 事件日志中查找 W3WP 崩溃事件。

# php - + 富 + 与 . 富。php的区别？

> ID：11616759
> 
> 赞同：-1
> 
> 时间：2012-07-23T16:40:12.753
> 
> 标签：php, concatenation

> **可能重复：**
> [参考 - 这个符号在 PHP 中是什么意思？](https://stackoverflow.com/questions/3737139/reference-what-does-this-symbol-mean-in-php)

我似乎无法找到两者之间的区别的答案

```
somephp" + foo + "morephp 
```

和

```
somephp" . foo . "morephp 
```

Dreamweaver 认为两者在语法上都是正确的。我只需要一个文章链接或解释作为它们之间的区别吗？谢谢！:)

我的具体情况是我有 - CHILD_POS - 需要插入到静态字符串中。基本上... ：

```
echo 'some stuff goes here' +/. CHILD_POS +/. 'some more stuff goes here'; 
```

我不确定是使用 (+) 还是 (.)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-23T16:41:13.290

该`.`字符专门用于 PHP 中的字符串连接。该`+`符号用于数学运算。

请参阅相应的 PHP 手册页：

[字符串运算符](http://us3.php.net/manual/en/language.operators.string.php)

[算术运算符](http://us3.php.net/manual/en/language.operators.arithmetic.php)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-23T16:41:57.820

Using`+`将尝试将字符串转换为数字，通常会导致`0`.

Using`.`将连接字符串，这是您几乎总是想要的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-23T16:41:33.483

您不能在 php 中使用 + 进行字符串连接。所以没有区别，所以讨论。

# java - JToolBar - JButton - 图像未显示

> ID：11616760
> 
> 赞同：1
> 
> 时间：2012-07-23T16:40:29.350
> 
> 标签：java, eclipse, swing, embedded-resource, jtoolbar

我的主对话框中的按钮变得如此混乱。我认为在对话框中添加一个带有一些按钮的工具栏会很酷。

我目前正在使用应用程序工具栏中的图像来启动我的应用程序。它在 Plugin.xml 代码中

```
 icon="icons/ediOrb.png" 
```

所以在我的对话框中，我试图为我的 refreshButton 使用相同的图标

```
JToolBar toolbar = new JToolBar();
refreshButton = new JButton(new ImageIcon("icons/ediOrb.png"));
refreshButton.addActionListener(new ActionListener() {
     public void actionPerformed(ActionEvent e) {
        refreshTable();
     }
  });
  toolbar.add(refreshButton);
  centerPanel = new JPanel();
  centerPanel.setLayout(new BoxLayout(centerPanel, BoxLayout.PAGE_AXIS));
  centerPanel.setPreferredSize(new Dimension(850, 450));
  centerPanel.add(Box.createRigidArea(new Dimension(5, 0)));
  centerPanel.add(currentPanel);
  centerPanel.add(selectionsPanel);
  centerPanel.add(Box.createHorizontalGlue());
  centerPanel.add(Box.createRigidArea(new Dimension(0, 2)));
  centerPanel.add(buttonPanel);
  getContentPane().add(toolbar,BorderLayout.PAGE_START );
  getContentPane().add(centerPanel); 
```

该按钮没有显示图像。它只显示一个小点。它没有抛出任何错误，只是不显示图像。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:49:32.887

试试这个：

```
refreshButton = new JButton(new ImageIcon(getClass().getResource("/icons/ediOrb.png")).getImage())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-06T14:50:31.633

我遇到过同样的问题。在 Netbeans 我不得不去：

```
Run | Set Project Configuration | customize -- 
```

然后添加包含我的项目和图标的工作目录路径。我不确定如何在不同的 IDE 中执行此操作，但我的图标在此修复后出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T17:45:47.480

如果您的图标文件夹在 src 文件夹下。

```
JButton refreshButton = new JButton();
  try {
    Image img = ImageIO.read(getClass().getResource("icons/ediOrb.png"));
    refreshButton.setIcon(new ImageIcon(img));
  } catch (IOException ex) {
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T17:52:37.250

尝试

```
refreshButton .setIcon(new ImageIcon(getClass().getResource("icons/ediOrb.png"))); 
```

但是，请确保图像不太大（发生在我身上一次）+ 路径正确。通过给出 COMPLETE 路径对其进行测试。

# html - 空单元格在空时四处移动

> ID：11616762
> 
> 赞同：0
> 
> 时间：2012-07-23T16:40:31.070
> 
> 标签：html, html-table, cell

我用来创建页面菜单栏的样式表有问题。每当页面没有上一页或下一页时，单元格为空，CSS 仅应用背景图像。每当我尝试实现此解决方案时，构成菜单栏的单元格都会四处移动，并且所有内容都不再对齐。我需要帮助来尝试弄清楚如何解决这个问题。

![在此处输入图像描述](../Images/2893f188a4eff6796c94ceb4af3ba285.png)

以下是已应用于图像中显示为灰色后退按钮的空单元格的类。

```
td.menu-back-disabled {
    background-image: url('back_first.png');
    display: block;
    border-style: none;
    border-width: 0px;
    padding: 0px;
    height: 34px;
    width: 85px;    
}
li.menu-bar {
    list-style-type: none;
    background-image: url('top.png');
    background-repeat: repeat-x;
    border-style: none;
    border-width: 0px;
    padding: 0px;
    height: 34px;
    width: 100%;
} 
```

这是菜单栏的 html：

```
<table class="menu">
<br>
<tr>
<td>
<a href="https://peter-larsens-macbook.local:8081/cgi-bin/display?page=environment" class="menu-home">
</a>
</td>
<td class="menu-edit-selected">
</td>
<td>
<a href="https://peter-larsens-macbook.local:8081/cgi-bin/display?page=upload&number=1&filter=1" class="menu-upload">
</a>
</td>
<td>
<a href="https://peter-larsens-macbook.local:8081/cgi-bin/display?page=comments" class="menu-comments">
</a>
</td>
<td>
<a href="https://peter-larsens-macbook.local:8081/cgi-bin/display?page=log&number=1" class="menu-log">
</a>
</td>
<td>
<a href="https://peter-larsens-macbook.local:8081/cgi-bin/display?page=stats&number=1" class="menu-stats">
</a>
</td>
<td>
<a href="https://peter-larsens-macbook.local:8081/cgi-bin/display?page=settings" class="menu-settings">
</a>
</td>
<td class="menu-bar">
</td>
<td class="menu-bar-right">
</td>
<td class="menu-back-disabled">
</td>
<td>
<a href="https://peter-larsens-macbook.local:8081/cgi-bin/display?page=edit&number=2&filter=1" class="menu-next">
</a>
</td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:42:40.483

确保您的空单元格`&nbsp;`中有占位符。

另外，尽量避免桌子......

**编辑：**

这是我的桌子现在的样子。永远不应该有表格会换行的地方，因为它只有一列并且`width:100%;`

**CSS：**

```
 <style type="text/css">
        #menu {
            width:100%;
        }
        #menu td {
            text-align:center;
        }
        .menu-bar {
            width:30%;
        }
    </style> 
```

**HTML：**

```
 <table cellspacing="0" cellpadding="0" id="menu">
        <tr>
            <td>
                <a href="#" class="menu-home">Home</a>
            </td>
            <td class="menu-edit-selected">
                <a href="#" class="menu-home">Edit</a>
            </td>
            <td>
                <a href="#" class="menu-upload">Upload</a>
            </td>
            <td>
            <a href="#" class="menu-comments">Comments</a>
            </td>
            <td>
                <a href="#" class="menu-log">Log</a>
            </td>
            <td>
                <a href="#" class="menu-stats">Statistics</a>
            </td>
            <td>
                <a href="#" class="menu-settings">Settings</a>
            </td>
            <td class="menu-bar">&nbsp;</td>
            <td class="menu-bar-right">&nbsp;</td>
            <td class="menu-back-disabled">
                <a href="#" class="menu-next">Back</a>
            </td>
            <td>
                <a href="#" class="menu-next">Next</a>
            </td>
        </tr>
    </table> 
```

对此的任何更改都可能来自填充、边距或设置宽度。和`td.menu-bar`/或`td.menu-bar-right`不能设置为，`width:100%;`因为它意味着表格/行的整个宽度，而不是单元格。

# asp.net-mvc - 实体错误：查询的结果不能多 次枚举

> ID：11616764
> 
> 赞同：2
> 
> 时间：2012-07-23T16:40:38.673
> 
> 标签：asp.net-mvc, entity-framework, c#-4.0

使用说明以下内容的实体框架时出现错误：“查询的结果不能多​​次枚举”

stackoverflow 上类似问题的解决方案，提到在我的查询中添加“.ToList()”，但这也无济于事。这是我的代码：

```
List<Kit> kits = new List<Kit>();

            var storedProc = db.GetOrderDetails(orderNumber).ToList();

            foreach (var proc in storedProc.ToList())
            {
                 [...content here]
            } 
```

我的代码第一次成功查询。没有问题。当我使用新的“orderNumber”重新单击提交按钮时，它会引发此错误。

我也尝试过其他解决方案，例如 .AsEnumerable().ToList()，但仍然没有运气。知道为什么会发生这种情况吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:20:28.720

已经说过你已经`.ToList()`在一个地方尝试过“”，并且`AsEnumerable().ToList()`

很高兴这能有所帮助！
步骤1：

```
var veryFirst = storedProc.First(); 
```

第2步：

```
var returnValues = veryFirst.ReturnCode; 
```

然后尝试使用它，看看它是否有效？否则你可以尝试使用`IQueryable`

# java - 简单的基于 Java 的部署工具

> ID：11616765
> 
> 赞同：2
> 
> 时间：2012-07-23T16:40:44.087
> 
> 标签：java, linux, grails, maven

我正在为 JVM 项目（Java、Spring、Grails 等）寻找一个非常简单的部署工具，具有以下功能：

*   不需要专用服务器/代理/等，我想从一台开发人员机器（或 CI 服务器）作为简单的控制台命令运行部署
*   不需要任何特殊的服务器配置，也不应该为您进行服务器配置
*   只需使用 SCP 或理想情况下使用 rsync 上传 WAR（仅更新已更改的文件）
*   （理想情况下）静态文件上传到 s3/cloudfront
*   可以在远程服务器上运行命令（重新启动 tomcat 服务）
*   在服务器上存储一些最新版本，并能够回滚到其中的任何一个（基本上它应该是符号链接的更新）
*   可以配置为使用不同的服务器（测试、登台和生产）
*   （理想情况下）有一个 Maven 插件或 Grails 插件
*   支持并行上传到少数服务器

应该是这样的：

```
$ deploytool staging deploy 
$ deploytool staging rollback 
```

或者

```
$ mvn deploytool:deploy -P staging
$ mvn deploytool:rollback -P staging 
```

基本上它只是一个：

1.  编译 + 测试 + 构建存档
2.  在服务器上创建“日期”目录 ( `/.../application/version-%date%/`)
3.  将 WAR 内容上传到这个目录，从本地机器
4.  从以前的更新符号链接（`/.../application/current/`- >`/.../application/version-%date%/`
5.  重启tomcat ( `sudo service tomcat7 restart`)
6.  删除最旧版本的目录（仅保留最近 5 个版本，或最近 45 天的版本）
7.  如果有问题 - 将符号链接更新到以前的版本（并重新启动 tomcat）

我看过 Puppet 和 JClouds，但似乎是不同的东西，更多的是关于集群配置，而不是部署。目前我在一个项目中使用 Ruby Capistrano，在另一个项目中使用 bash 脚本。Capistrano 很好，但需要安装 rvm、ruby、gems 等，对于非 ruby​​ 团队来说效果不佳，并且需要对 java 项目进行大量自定义。

所以，我想知道，有没有类似 Capistrano 的 Java/JVM 项目工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:10:33.477

1.  使用`maven-compiler-plugin`,`maven-surefire-plugin`和`maven-war-plugin`构建
2.  用于`buildnumber-maven-plugin`创建具有当前时间戳值的属性
3.  使用`wagon-maven-plugin`生成的时间戳值将战争上传到登台服务器
4.  用于`sshexec-maven-plugin`启动 shell 脚本，该脚本将使用所选版本的应用程序重新启动 tomcat

# web-services - 方法中的参数太多...（在 Delphi XE 中从 WSDL 连接到 WebService）

> ID：11616766
> 
> 赞同：1
> 
> 时间：2012-07-23T16:40:43.977
> 
> 标签：web-services, delphi, wsdl, delphi-xe, queryinterface

有一个外部的Web 服务，分别需要客户端给他。基于 WSDL 标准的外壳 Embarcadero RAD Studio XE (Delphi XE) 创建了一个通常运行良好的单元，但在这种情况下有一个警告 - 在其中一个函数转移到 100 多个参数。当您在运行时创建用于调用 Web 服务的对象时，会出现错误“方法‘方法名称’中的参数过多”。如果参数的数量减少到 61，那么一切都开始工作 - 调用 Web 服务运行良好并返回响应。为什么会这样？翻了internet，结果却为零。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T17:41:06.913

这正是错误消息所说的原因。参数太多了。SOAP 包装器的代码生成器（在*Rio.pas*中）只允许将 252 个字节压入堆栈以调用包装的方法，该方法转换为 63 个指针大小的参数。（较大的参数可能需要更多字节，从而减少允许的参数总数。）

# c# - Google Checkout 发货商品订单状态通知

> ID：11616768
> 
> 赞同：0
> 
> 时间：2012-07-23T16:40:54.567
> 
> 标签：c#, google-checkout

我目前正在将 GC 实施到我的项目中。我可以正常发布和接收订单。我现在遇到的问题是尝试发布到 GC 以将订单状态更新为已交付。

我想实现这个：

```
_type=ship-items
&google-order-number=ORDER_NUMBER
&item-shipping-information-list.item-shipping-information-1.item-id.merchant-item-id=A1
&item-shipping-information-list.item-shipping-information-1.tracking-data-list.tracking-data-1.carrier=UPS
&item-shipping-information-list.item-shipping-information-1.tracking-data-list.tracking-data-1.tracking-number=5555AbCd
&send-email=true 
```

可以在这里看到：[https ://developers.google.com/checkout/developer/Google_Checkout_HTML_API_Line_Item_Shipping#Ship_Items](https://developers.google.com/checkout/developer/Google_Checkout_HTML_API_Line_Item_Shipping#Ship_Items)

我不明白的是如何将信息发送给 GC

我正在使用以下表格发送我的购物车信息，效果很好：

```
<form method="POST" action="https://sandbox.google.com/checkout/api/checkout/v2/checkoutForm/Merchant/MERCHANT_ID" accept-charset="utf-8">
<input type="hidden" name="item_name_1" value="PRODUCT_NAME" />
<input type="hidden" name="item_description_1" value="PRODUCT_DESCRIPTION" />
<input type="hidden" name="item_quantity_1" value="1" />
<input type="hidden" name="item_price_1" value="20.00" />
<input type="hidden" name="item_currency_1" value="GMP" />
</form> 
```

这是我应该发送交货通知的方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:03:01.487

You probably want to look at the Checkout Order Processing API.

Some docs below:

[https://developers.google.com/checkout/developer/Google_Checkout_XML_API_Processing#order_processing_api](https://developers.google.com/checkout/developer/Google_Checkout_XML_API_Processing#order_processing_api)

[http://support.google.com/checkout/sell/bin/answer.py?hl=en&answer=25397](http://support.google.com/checkout/sell/bin/answer.py?hl=en&answer=25397)

Also look at the Checkout client libraries sample code:

[https://developers.google.com/checkout/samplecode](https://developers.google.com/checkout/samplecode)

# php - 使用 apache 时访问外部数据库

> ID：11616770
> 
> 赞同：0
> 
> 时间：2012-07-23T16:40:54.607
> 
> 标签：php, mysql, apache

我正在尝试调整别人的网站。在本地 apache 设置上测试代码时如何访问他的数据库？这是我认为他编写的相关代码：

```
define("INCLUDE_PATH", "/home/inter/public_html/toolmanager/includes/");
$this->default_mySQL_database="domain.com,xxxx,xxxx,xxxx";
...
$include=constant("INCLUDE_PATH").$path.$filename;
$handle = fopen($include, "r");
$data = fread($handle, filesize($include));
fclose($handle); 
```

我在 fopen() 行收到此错误：

```
Warning: fopen(/home/inter/public_html/toolmanager/includes/platform/cache.php): failed to open stream: No such file or directory in C:\xampp\htdocs\toolmanager\toolmanager\includes\classloader_platform.php on line 401 
```

出于某种原因，它仍在尝试访问本地主机。我很难理解他的代码，所以如果我需要发布其他内容，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:23:07.813

该警告与您的数据库无关，但与您尝试读取的文件有关。实际上，您的常量 INCLUDE_PATH 指的是 linux 路径，但是您的错误向我们表明您在 Windows 机器上工作。

如果您想了解错误，请调整常量 INCLUDE_PATH，可能像这样：

`<?php define('INLUDE_PATH', 'C:/xampp/htdocs/toolmanager/toolmanager/includes/');`

对于数据库连接问题，mlishn 是正确的：您应该允许来自 mysql 的远程连接。

但您还必须：

*   创建远程用户
*   在防火墙上打开mysql端口
*   配置您的本地应用程序以与远程用户连接

这是一个几乎涵盖所有内容的教程：[http ://www.cyberciti.biz/tips/how-do-i-enable-remote-access-to-mysql-database-server.html](http://www.cyberciti.biz/tips/how-do-i-enable-remote-access-to-mysql-database-server.html)

但请注意：通过网络打开 mysql Db 是**危险**的！

编辑：添加修改建议（基于错误，需要检查）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T16:44:16.287

看起来这条线控制着数据库配置

```
$this->default_mySQL_database="domain.com,xxxx,xxxx,xxxx"; 
```

但是，您需要确保 MySQL 数据库服务器本身将接受来自您的测试服务器位置的指定用户/密码组合的连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T16:44:27.913

您需要在 mysql 数据库上启用远程访问。这是有关如何实现此目的的链接：[http ://www.cyberciti.biz/tips/how-do-i-enable-remote-access-to-mysql-database-server.html](http://www.cyberciti.biz/tips/how-do-i-enable-remote-access-to-mysql-database-server.html)

然后，一旦您具有远程访问权限，您就可以使用您创建的用户名从任何地方访问数据库。

# entity-framework - 与 EF Code First 迁移持续集成

> ID：11616772
> 
> 赞同：19
> 
> 时间：2012-07-23T16:41:10.263
> 
> 标签：entity-framework, migration, ef-code-first, continuous-integration

我想知道我是否可以完全自动化代码优先迁移以实现持续集成。

目前我的**持续集成**只是简单地更新代码更改，但是，我手动**生成迁移**，并更新我的持续集成服务器上的数据库。

生成迁移并自动更新数据库是否可靠/可能/推荐？

**例如：**

我有属性 userId 和用户名的用户。然后我将属性年龄添加到代码中。当前方案需要我创建一个迁移来捕获此更改，然后我将我的更改签入到版本控制中。持续集成将发现这种变化，并将部署新版本。我必须手动更新数据库（应该是自动化的）。

我是否也可以跳过迁移的生成，这样我可以简单地将属性年龄添加到代码中，持续集成将生成此迁移。不确定这是否被推荐。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-12T02:42:55.347

答案是肯定的，但不是你描述的那样。

您必须并且应该手动生成迁移。并非所有迁移都可以自动创建，在这些情况下，需要手动修改生成的迁移。列拆分、某些类型的数据类型更改等。

然后，您的 CI 服务器可以利用 migrate.exe 使您的数据库与您的模型同步。棘手的部分是处理导致降级的迁移。所以从 v1 到 v2 很容易，但从 v2 回到 v1 比较棘手，因为只有 v2 程序集知道如何“回到”到 v1。

我最终创建了一个自定义工具，它智能地执行迁移并自动确定要用于迁移的模型（上下文）程序集。您可以在此处了解如何执行此操作：[EF Code First Migrations to Deploy Older Version](https://stackoverflow.com/questions/22765527/ef-code-first-migrations-to-deploy-older-version)

最终结果是我可以签入模型更改/迁移，并且知道我的数据库更改将自动部署到属于我的 ci/cd 管道的任何环境 - 是的，这绝对包括生产。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-16T09:05:16.613

如果他们没有通过测试，持续集成的一部分也有可能回滚错误的更改。

*   您是否以可以降级的方式编写数据库升级脚本？
*   您是否为每次提交创建一些保存点或备份？
*   如果备份/还原错误提交，您会丢失数据库中的数据吗？
*   DDL 本身有什么不好的变化？

这些是您在实施之前应该考虑的一些问题。

# json - 带有 JSON 表单值更新的 Jquery AJAX

> ID：11616777
> 
> 赞同：0
> 
> 时间：2012-07-23T16:41:30.637
> 
> 标签：json, jquery, asp-classic

我以为我正朝着正确的方向前进。但是在某个地方，信息过载开始了。

简单的任务：我想让用户从下拉列表中选择一些东西，并让 jquery 从该选择中填充表单单元格。选择正在向我的 ASP 脚本发送一个 ID 请求，该脚本以 JSON 格式返回数据。但是 Jquery 根本没有填充表单。

这是我的jQuery。

```
<script>
$(document).ready( function() {
    $("#list-avail-reps").change( function() {
        var rep_id = $(this).val();
        var datastring = "ID="+rep_id;
    $.ajax({
        type: "GET",
        data: datastring,
        dataType: "json",
        url: "sales-reps.asp",
        success: function(data) {
            var rep_name=json.rep_name
            var rep_cell=json.rep_cell
            var rep_email=json.rep_email
            var rep_branch=json.rep_branch
            var branch_id=json.branch_id
            $("#rep_name").val(rep_name);
            $("#rep_cell").val(rep_cell);
            $("#rep_branch").val(rep_name);
            $("#rep_email").val(rep_email);
            $("#rep_active").val('1');
            $("#rep_login_ID").val(rep_id);
            $("#branch_ID").val(branch_ID);
        }
    });//end ajax command
    }); //end of listener
});//end document function
</script> 
```

我的 JSON 输出如下：

```
[
{
"rep_name":"Name here",
"rep_cell":"Number here",
"rep_branch":"More info",
"rep_email":"email here",
"branch_id":"5"
}
] 
```

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:44:37.943

您正在返回一个对象数组。要访问这些值，您需要首先选择数组的第一个索引：

```
var rep_name=data[0].rep_name
var rep_cell=data[0].rep_cell
var rep_email=data[0].rep_email
var rep_branch=data[0].rep_branch
var branch_id=data[0].branch_id 
```

`data`此外，您不会被退回`json`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T16:44:55.417

您应该使用`data`而不是`json`.

**示例**：

`data.rep_email`相对`json.rep_email`

返回的数据似乎是一个数组。因此，您将需要遍历您的数组（或假设索引为 0）。

**示例**：

```
var rep_email = data[0].rep_email 
```

或者

```
for (var i = 0; i < data.length; i++) {
    var rep_email = data[i].rep_email;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-26T08:00:36.660

var obj = JSON.parse(data); var rep_name=obj[0].rep_name

# android - Android 2.2 的操作栏，处理程序未通过 UI 更新

> ID：11616781
> 
> 赞同：0
> 
> 时间：2012-07-23T16:41:57.503
> 
> 标签：android, android-handler

我正在尝试抽象并创建一个操作栏（适用于 Android 2.2）。因此我自己写出来。由于某种原因，我无法让 HomeScreen 更新操作栏。这可能不是处理程序问题，比我猜的更基本。

我的类图就像 IBar (interface) ->implementedby-> ActionBarActivity (abstract class) ->extendedby-> HomeScreen 使用类`God` 公共静态方法。

`Only relevant pieces of code below`

ActionBarActivity，被我所有的 Activity 使用。

```
public abstract class ActionBarActivity extends Activity implements IBar {
    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.actionbar);

    connectionStatus = (ImageView) findViewById(R.id.connectStatus);
    connectionStatus.setOnClickListener(this);
    if (God.isConnectedToServer)
        connectionStatus.setImageDrawable(this.getResources().getDrawable(
                R.drawable.connect));
    else
        connectionStatus.setImageDrawable(this.getResources().getDrawable(
                R.drawable.disconnect));
    connectionStatus.setEnabled(true);

public void setConnectionStatus(boolean status) {
    Bundle bundle = new Bundle() ;
    bundle.putSerializable(God.BARVALUES, (IBar) this) ;
    Message message = updateBar.obtainMessage() ;
    message.setData(bundle);
    message.sendToTarget();
}
@Override
public boolean handleMessage(Message barData) {
    IBar barValues = (IBar) barData.getData()
            .getSerializable(God.BARVALUES);
--->>>if (barValues.getConnectionStatus())
        connectionStatus.setImageDrawable(this.getResources().getDrawable(
                R.drawable.connect));
    else if (!barValues.getConnectionStatus())
        connectionStatus.setImageDrawable(this.getResources().getDrawable(
                R.drawable.disconnect));
    return false;
}
public abstract boolean getConnectionStatus(); 
```

HomeScreen 扩展了 ActionBarActivity

```
public class HomeScreen extends ActionBarActivity {
@Override 
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.home);
    try {
        God.switchServer((ActionBarActivity)this, God.mCruiseOnServer);
    } catch (InvalidServerDNSorIPException e) {
        Toast.makeText(this, "Unable to connect to server", Toast.LENGTH_LONG).show();
        return ;
    } 
```

神级，公静。

```
public class God {
public static boolean switchServer(ActionBarActivity activity, String newServer) {
    ...
    activity.setConnectionStatus(true) ;
    ....
} 
```

操作栏上的图像按钮

```
<ImageView
    android:id="@+id/connectStatus"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@id/refresh"
    android:contentDescription="@string/connectionStatus" /> 
```

编辑：我在调试器下运行了这个，我执行到了 --->>> 行。这意味着我的 connection.setImageDrawable 被调用，但由于某种原因没有显示在我的 UI 上。我在这里错过了一些非常基本的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T04:01:04.087

根本原因是基类有一个 R.layout.actionbar，它与 R.id.actionbar 的实例不同，而不是我的主屏幕。

# ruby-on-rails-3 - 语法错误，意外的 kRETURN

> ID：11616786
> 
> 赞同：0
> 
> 时间：2012-07-23T16:42:14.513
> 
> 标签：ruby-on-rails-3, haml

我的代码产生`unexpected kRETURN`错误。我认为这是一个 HAML 问题，但我不知道为什么或如何解决它：

```
SyntaxError in MeasurementsController#index 
D:/myAppName/app/helpers/application_helper.rb:1: syntax error, unexpected kRETURN 
```

### 应用程序/helpers/application_helper.rb：

```
module ApplicationHelper

  def flash_helper
    return if flash.blank?
    out = ""
    flash.each do |key, msg|
      out += "<div class='flash #{key}'>#{msg}</div>"
    end
    raw out
  end  

  def comment
    # do nothing (ruby functions will always take a block)
  end

  def assets_server
    case Rails.env
    when /production|_prod|prd/i
      "assets"
    when /tqa/i
      "assets-tqa"
    else
      "assets-dev"
    end
  end

end 
```

我安装了这些宝石：

*   哈姆 (3.1.2, 3.0.25)
*   haml-rails (0.3.4)
*   导轨（3.2.6、3.2.3、3.1.0、3.0.7、3.0.1）

# forms - Symfony2 更改嵌入式表单的字段选项

> ID：11616789
> 
> 赞同：21
> 
> 时间：2012-07-23T16:42:23.947
> 
> 标签：forms, symfony, option

我的问题基本上是，是否可以从父表单更改嵌入字段的选项？

为了说明问题，请考虑这一点；我有一个像这样的父表单类型类：

```
class FruitFormType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('name', 'text')
            ->add('apple', new AppleFormType())
        ;
    } 
```

和一个单独的捆绑包中的子表单类型类，我不想编辑，如下所示：

```
class AppleFormType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('name', 'text')
            ->add('qty', 'integer', array('label' => 'rubbish label')
        ;
    } 
```

我想将标签更改`qty`为其他内容，但我只想在 中执行此操作`FruitForm`，而不是在使用的任何地方`AppleForm`。我曾希望能够做类似的事情：

```
class FruitFormType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('name', 'text')
            ->add('apple', new AppleFormType(), array('qty' => array('label' => 'better label')))
        ;
    } 
```

或者：

```
class FruitFormType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('name', 'text')
            ->add('apple', new AppleFormType())
        ;

        $builder->get('apple')->get('qty')->setOption('label', 'better label');
    } 
```

但这些（以及其他一些尝试）都没有让我失望。不存在`setOption`我可以看到的方法。

有谁知道这样做的方法？

谢谢

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-05T02:32:28.910

我还想更改选项，即 FOSUserBundle 中现有字段的明显“更改标签”案例。我知道我可以在 Twig 或翻译中做到这一点。

@redbirdo 用“似乎添加同名字段将替换它”为我指明了正确的方向。这是解决方案：

```
$field = $builder->get('username');         // get the field
$options = $field->getOptions();            // get the options
$type = $field->getType()->getName();       // get the name of the type
$options['label'] = "Login Name";           // change the label
$builder->add('username', $type, $options); // replace the field 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-05-09T09:49:55.230

非常感谢@Peter Wooster。在 Symfony 3.0 中，我不得不使用一些不同的东西：

我有一个自定义表单类型，添加如下字段：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder->add('my_field', ChoiceType::class, [
        // Some options here...
        'multiple' => false,
    ]);
} 
```

在另一个自定义表单类型中，我需要**扩展**上面的类型并更改一些选项：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    parent::buildForm($builder, $options);

    $myField = $builder->get('my_field');
    $fieldOptions = $myField->getOptions();
    // Retrieve the FormType. That is the part that is different.
    $fieldType = get_class($myField->getType()->getInnerType());
    $fieldOptions['multiple'] = true;
    // I can obviously put the name 'my_field' directly here
    $builder->add($myField->getName(), $fieldType, $fieldOptions);
} 
```

感谢楼上的回答，希望对我有帮助！

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-23T17:09:35.810

尝试这样的事情：

```
class AppleFormType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('name', 'text')
            ->add('qty', 'integer', array('label' => $options['qtyLabel'])
        ;
    }

    public function getDefaultOptions()
    {
        return array(
            'qtyLabel' = 'rubbish label';
        );
    }
} 
```

和：

```
class FruitFormType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('name', 'text')
            ->add('apple', new AppleFormType(), array('qtyLabel' => 'better label'))
        ;
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-07-27T20:02:42.380

我处于无法访问表单构建器代码但必须覆盖字段选项以添加`'required' => true`.

扩展 @peter-wooster 和 @thedamnedrhino 对 github 上的 symfony 问题的回复（[https://github.com/symfony/symfony/issues/11188](https://github.com/symfony/symfony/issues/11188)），我最终得到了这段代码。

```
$field = $form->get('combinaisons');
$options = $field->getConfig()->getOptions();
$type = $field->getConfig()->getType()->getName();
$options['required'] = true;
unset($options['em']);
$form->add('combinaisons', $type, $options); 
```

这适用于 symfony/symfony:2.3.21、教义/doctrine-bundle:1.2.0 和教义/orm:2.3.6

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-09T23:11:23.990

对于这种更改，修改视图通常要容易得多。

```
$view->vars['label'] = 'New label'; 
```

通常，您的视图将是父表单，因此它可能如下所示 - 从“日期”>“发布日期”更改：

```
$view = $form->createView(...);
$view->children['date']->vars['label'] = 'Publication date'; 
```

如果你的表单被封装在它自己的类型中，你可以使用 finishView 函数：

```
public function finishView(FormView $view, FormInterface $form, array $options)
{
    $view->children['date']->vars['label'] = 'Publication date';
} 
```

由于最终传递给模板引擎进行渲染的大部分内容都是直接数组形式，因此此时您可能会弄乱很多东西。

# xml - 清除 Flash 播放器的 XML 缓存

> ID：11616790
> 
> 赞同：1
> 
> 时间：2012-07-23T16:42:24.350
> 
> 标签：xml, flash, slideshow

我正在使用[SlideShowPro](http://slideshowpro.net)播放器来显示我的图片和视频。我遇到的问题是当我更新我的图片/视频时，网站仍然显示旧内容，直到我重置浏览器缓存。有没有办法可以重置服务器上的缓存，这样当我更新 XML 文件时，它会自动为所有用户显示新内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T16:51:55.660

有几种方法可以做到这一点。它们都有一个缺点，就是让浏览器每次都下载文件，不管它是否已经改变。

1.  [使用 HTTP 标头告诉浏览器不要缓存 XML](https://stackoverflow.com/questions/49547/making-sure-a-web-page-is-not-cached-across-all-browsers)。

2.  将[随机查询字符串](https://stackoverflow.com/questions/1234246/random-querystring-to-avoid-ie-caching)添加到 XML 文件的 URL。例如，添加“纪元时间”（自 1970 年以来以秒/毫秒为单位的时间）：

`http://myServer.com/myXmlUrl.xml?time=120001033`

# c++ - 一个有2个名字的类？

> ID：11616795
> 
> 赞同：7
> 
> 时间：2012-07-23T16:42:49.023
> 
> 标签：c++

在阅读代码时，我遇到了一个有 2 个标识符“命名它”的类：

```
class A_EXP Node
{
//..
}; 
```

我无法理解这意味着什么。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-23T16:45:03.930

`A_EXP` is probably a macro, possibly expanding to nothing at all. It may also expand to a `__declspec` or similar declaration, which modifies how the compiler will emit the class as object code. A common use of this pattern would be:

```
#define A_EXP __declspec(dllexport) 
```

# data-binding - knockout.js 基于 css 类添加可见性 observable

> ID：11616797
> 
> 赞同：2
> 
> 时间：2012-07-23T16:43:02.747
> 
> 标签：data-binding, knockout.js

我想根据页面上的另一个元素是否具有某个类来使 HTML 元素可见：

```
function MyViewModel() {
    var self = this;          

    this.showElement = ko.computed(function() {            
        return $('#history').hasClass('active');
    }, this);
}

<li data-bind="visible: showElement">Element Text</li>
<div id="summary" class="tab-pane fade in active"></div>
<div id="history" class="tab-pane fade in"></div> 
```

每当单击选项卡窗格时，该选项卡都会获得“活动”类。根据哪个选项卡处于活动状态，我想隐藏或显示 li 元素。我觉得我很接近，但错过了一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T17:36:54.773

我不建议这样做。该`showElement`属性不依赖于视图模型中的任何其他可观察对象，因此它永远不会被更新。

您应该更改它，以便`active`根据您的视图模型中选择的内容应用该类。然后你可以让你`Element Text`出现在它应该出现的时候。

将绑定添加到您的 div 以`active`根据某些条件应用该类，并根据您想要的条件将您的元素设置为可见：

```
<div id="summary" class="tab-pane"
     data-bind="click: select, css: { active: summaryActive }">SUMMARY</div>
<div id="history" class="tab-pane"
     data-bind="click: select, css: { active: historyActive }">HISTORY</div>

<li data-bind="visible: historyActive">Element Text</li> 
```

然后在您的视图模型中设置这些条件：

```
self.selected = ko.observable(null);
self.summaryActive = ko.computed(function () {
    return self.selected() === 'summary';
});
self.historyActive = ko.computed(function () {
    return self.selected() === 'history';
}); 
```

[小提琴](http://jsfiddle.net/Lgtkw/1/)

# crystal-reports - 共享子报表变量显示最后一条记录的值

> ID：11616808
> 
> 赞同：1
> 
> 时间：2012-07-23T16:44:01.910
> 
> 标签：crystal-reports, crystal-reports-2008

我有一个水晶报表，其子报表位于组的页脚。

此子报告显示基于传递给它的参数的计数。

我想在其他计算中使用这个值，所以我尝试创建一个共享数字变量。

但是，当我将带有共享数字变量的公式放在主报表中时——子报表本身旁边——**它似乎显示了上一条记录的值**。

## 主报告截图

（已删除业务特定信息）

红色方块是子报告，绿色方块是我要打印的变量

子报表显示正确值，绿色公式显示上一条记录的子报表值。

![截屏](../Images/4a4143c729b445d02b870336439f51ff.png)

## 子报告截图

一个公式，在报告页脚中：

![截屏](../Images/6c6f6d2dbed33a022152b8a86d9f1612.png)

## 子报告显示的公式

我相信这个公式在显示公式时正确设置了变量（**这可能是我遇到的问题的关键**）：

```
Shared numberVar tryit;
tryit :=0;

If IsNull(count({IDNumber})) then
(
0
)
else
(
tryit :=count({IDNumber});
count({IDNumber})
) 
```

## 在主报表上显示共享变量的公式

```
Shared NumberVar tryit;
tryit; 
```

* * *

## 尝试 1：将变量移动到子报告下方（不成功）

Craig 建议我将要显示的变量移动到子报告执行位置下方的页脚部分。

我试过这个；但是，我不需要显示子报告，当我抑制它时，由于子报告未执行，所有共享变量似乎都变为 0。

下图：红色框为子报表，橙色为共享变量。只要子报表也显示就可以工作，但我不需要子报表，需要共享变量对父报表进行额外计算。

![红色框是子报表，橙色是共享变量。 只要还显示子报告就可以工作](../Images/7a50df9e44944ffe80eb012ec0c845e9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:54:00.197

在包含您的子报表的部分下方插入一个部分——它将是组页脚 1b。将引用共享变量的公式移动到这个新部分。

** 编辑 **

您将无法取消子报表；这样做会阻止它的生成。我建议缩小它的垂直高度，然后禁用它的“可以增长”属性。一般来说，您只需要让子报表的 ReportFooter 部分可见，即可生成要生成的变量。考虑将公式的文本设置为白色。

或者，您可以使用 SQL 表达式代替子报表。它的 SQL 将嵌入到“主”报告的 SELECT 子句中。SQL 表达式需要返回一个标量值。

至于处理模型，请阅读：[Crystal Reports：报表处理模型](http://cogniza.com/wordpress/2006/05/14/crystal-reports-report-processing-model/)。实质上，报表引擎需要生成子报表才能填充共享变量。在同一部分中拥有引用共享变量的子报表和公式是不可靠的。

# rdf - 需要特定类型的 SPARQL 查询帮助

> ID：11616809
> 
> 赞同：0
> 
> 时间：2012-07-23T16:44:06.943
> 
> 标签：rdf, sparql

我有一个 RDF 三元组数据库，大致如下：keyword002 isKeywordIn doc0892 keyword002 短语“thisIsATest”

我有一个关键字列表，我想在一个查询中找到匹配项，例如，假设我有 10 个文档，并且我想知道（对于每个文档）关键字“testing3”、“ fubared","noob" 在文档中。

我可以构造什么 SPARQL 查询以便我可以指定一个确切单词的列表（我尝试了一个正则表达式过滤器，但似乎没有用。也给了我部分匹配项，但没有给我文档名称）并取回包含文档的名称和匹配的关键字？

我已经坚持了好几天了，我让它工作，但它是通过几个递归循环并且需要很长时间，我需要大幅加快速度。

*** *我的服务器已关闭，所以我现在无法访问我的 Triplestore，但感谢你们的回复！有什么问题我会再发帖，非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T17:30:09.167

未经测试，但一种方法是：

```
select distinct ?keyword ?document
where {
  ?keyword ns:isKeywordIn ?document;
           ns:phrase ?phrase.
  FILTER regex( ?phrase, "^(testing3|n00b|fubared)$", "i" )
} 
```

这将为您提供一对文档和关键字，其中关键字匹配任何一种用户输入模式。请注意`^ ... $`锚点的使用，以便您只获得完整的单词匹配，而不是部分匹配。但是，这可能会很慢，因为没有太多独特的信息可以用来索引查询，因此查询引擎必须测试语料库中的每个关键字。

另一种方法是联合多个关键字的测试：

```
select distinct ?keyword ?document
where {
  {?keyword ns:phrase "testing3" ; ns:isKeywordIn ?document}
  union
  {?keyword ns:phrase "n00b" ; ns:isKeywordIn ?document}
  union
  {?keyword ns:phrase "fubared" ; ns:isKeywordIn ?document}
} 
```

一个合理的查询优化器应该能够使用更具体的`:phrase`三元组来索引查询。但是，构造查询稍微复杂一些。另一个缺点是您没有`"i"`与正则表达式示例中的忽略大小写 ( ) 标志等效的标志，因此您的用户输入必须与您的关键字文本完全匹配。

最后一种替代方法是使用 SPARQL 扩展来利用三元存储旁边的自由文本索引。例如，对于 Jena，请参阅[LARQ](http://jena.apache.org/documentation/larq/index.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T17:22:51.583

通常，您应该避免在 SPARQL 查询中使用正则表达式。SPARQL 引擎通常不会很好地处理这个问题。那些确实提供了对文字值进行正则表达式或关键字类型搜索的特定功能，通常基于特殊的 Lucene 索引。通常，正则表达式最终只会对任何相关的字面值进行大量正则表达式，这可能非常昂贵。

这应该返回带有关键字“testing3”的文档

```
select ?doc ?name where {
  ?doc :name ?name .
  ?keyword :isKeywordIn ?doc .
  ?keyword :phrase "testing3" .
} 
```

如果要获取包含两个特定关键字的所有文档：

```
select ?doc ?name where {
  ?doc :name ?name .
  ?keyword :isKeywordIn ?doc .
  ?keyword :phrase "testing3" .
  ?kw :isKeywordIn ?doc .
  ?kw :phrase "noob" .
} 
```

如果要获取两个特定关键字中的任何一个的所有文档：

```
select distinct ?doc ?name where { 
  ?doc :name ?name .
  {
    ?keyword :isKeywordIn ?doc .
    ?keyword :phrase "testing3" .
  } union {
    ?kw :isKeywordIn ?doc .
    ?kw :phrase "noob" .
  } 
  } 
```

我认为这会让你想要你正在寻找的，拼写错误和你的领域本体的精确使用无法承受。

# java - buf = string.getbytes() 结果不一致

> ID：11616810
> 
> 赞同：1
> 
> 时间：2012-07-23T16:44:13.623
> 
> 标签：java, sockets, udp, client-server

当我在字符串上调用该`getBytes()`方法时，我得到不一致的结果，第一次执行语句时它只返回字符串的前 3 个字符，如果我再次调用该语句，它会返回完整的字符串，但它也只随机返回前三个字符每隔一段时间。我的服务器类的代码片段如下：

```
String reply = ("Current list of users includes: " + users);
buf = reply.getBytes();
packet = new DatagramPacket(buf, buf.length, address, port);
socket.send(packet); 
```

在客户端接收端，我有以下内容；

```
socket.receive(packet);
String response = new String(packet.getData());
System.out.println("ChatClient: Response from Server: " + response); 
```

第一次调用时，打印的所有内容都是“Cur”，然后第二次调用时，将打印完整的字符串以及存储在“用户”中的值。

无论如何，是否可以确保它在第一次以一致的方式正确运行？

# symfony - Symfony2 - 学说：迁移：差异可以创建与数据库无关的代码而不是 SQL 吗？

> ID：11616814
> 
> 赞同：5
> 
> 时间：2012-07-23T16:44:33.613
> 
> 标签：symfony, doctrine-orm, doctrine-migrations

Running`php app/console doctrine:migrations:diff`根据需要生成一个新的迁移类，以将当前数据库模式转换为实体更改指定的模式。

此示例显示了用于创建表的此类生成的类`fos_user`：

```
class Version20120712145445 extends AbstractMigration
{
    public function up(Schema $schema)
    {
        $this->abortIf($this->connection->getDatabasePlatform()->getName() != "mysql");        
        $this->addSql("CREATE TABLE fos_user (id INT AUTO_INCREMENT NOT NULL, ...);
    }

    public function down(Schema $schema)
    {
        $this->abortIf($this->connection->getDatabasePlatform()->getName() != "mysql");        
        $this->addSql("DROP TABLE fos_user");
    }
} 
```

如您所见，生成的迁移与特定的数据库服务器相关联，在此实例中为 MySQL。

由于（预期的）性能优势减少了测试执行时间，我想在测试环境中使用内存中的 sqlite 数据库。

我可以采用上面生成的 SQL 并将其转换为`$table = $schema->createTable(); $table->addColumn();`等价物，但是这样做既费时又会由于人工将 SQL 转换为代码的能力差而引入错误。

**教义：迁移：差异命令是否可以创建与平台无关的迁移代码，而不是上述特定于平台的 SQL？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T08:22:51.907

不，这在当前版本中是不可能的。如果您需要与数据库无关的迁移，您应该查看[LiquiBase](http://www.liquibase.org/)进行迁移。LiquiBase 也有一个 Symfony2 Bundle [LiquibaseBundle](https://github.com/RtxLabs/LiquibaseBundle)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-17T10:35:49.333

目前尚不支持其他数据库迁移工具，但他们正在计划支持一些数据库管理工具

请参阅[教义：DBAL-602](http://www.doctrine-project.org/jira/browse/DBAL-602)此票证是对 LiquiBase、DBDeploy 和 phinx 对教义迁移的支持的功能请求

# java - Apache Taglibs 和 Glassfish JSTL 的实现之间的区别？

> ID：11616817
> 
> 赞同：3
> 
> 时间：2012-07-23T16:44:39.767
> 
> 标签：java, maven, jstl, taglib

为了在 maven 项目中使用 JSTL（JSP taglibs），需要导入：

```
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>jstl</artifactId>
    <version>1.2</version>
</dependency> 
```

然而，这还不够，因为这只是一个 API。一种解决方案是使用[Glassfish 的实现](http://www.murraywilliams.com/2011/11/running-jstl-1-2-on-tomcat-7-using-maven/)，另一种是使用[Apache Taglibs](http://tomcat.apache.org/taglibs/)。

两者有什么区别，推荐哪一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T16:50:35.787

现在两者都支持 JSDL 1.2。~~Glassfish 支持 JSTL 1.2，而 Apache 支持 1.1 并带有“1.2 in the works”——自 2009 年以来，我认为这可能意味着该项目有点被放弃了~~。我已经将 GF 移植到 Tomcat 中（因为我们的大部分工作都是基于 GF 的，它是最容易借用的）并且没有遇到问题，但我可能只是幸运 :-)

编辑：wrt JSTL1.1 vs 1.2，引用自[Oracle JSTL 页面](http://www.oracle.com/technetwork/java/index-jsp-135995.html)

> JSTL 1.2 维护版本与作为 JavaServer Pages (JSP) 2.1 规范的一部分交付的统一表达式语言 (EL) 保持一致。多亏了 Unified EL，JSTL 标记（例如 JSTL 迭代标记）现在可以以直观的方式与 JavaServer Faces 组件一起使用。

# ios - 在网站的 Magento 产品目录部分显示 iOS 设备的灰色背景

> ID：11616823
> 
> 赞同：0
> 
> 时间：2012-07-23T16:44:59.063
> 
> 标签：ios, magento, mobile

当您在 iOS 设备上查看我们 magento 商店的某些页面时（不会显示在 android 或非移动设备上），作为产品目录一部分的网站的任何部分后面都会显示灰色背景：

[图 1](http://bit.ly/NGIjyY) [图 2](http://bit.ly/PASN4L)

灰色背景也显示在面包屑栏后面，以及magento原生的联系表格，但我无法在网站的其他方面显示它，例如主页的主体，其他的正文页等

起初我以为这可能是 Safari iOS 问题，但错误也出现在 iPhone Chrome 和 Mercury 浏览器中。

我无法在 iPhone 的错误控制台中显示任何错误。我也尝试过将 iOS 模拟器与 iWebkit 结合使用，但我也没有找到太多东西。

这可能是CSS问题吗？我试图为出现的每个部分确定一个类似的 css 类，但我看不到任何相似之处。

如果有任何帮助，我将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:14:31.263

打开你的styles.css（/skin/frontend/blank/theme110/css/styles.css），只需注释第87行：

`background: url("../images/main_block_bg.png") repeat scroll left top transparent;`

让我知道它解决了吗？

# asp.net - Listview - 无法控制的宽度 - 太宽

> ID：11616824
> 
> 赞同：0
> 
> 时间：2012-07-23T16:45:02.367
> 
> 标签：asp.net, vb.net, listview, html-table

我的列表视图太宽了。无论我将宽度标签放在哪里（使用 Listview 本身，在表格内。我应该把它们放在哪里？我的代码如下：我希望整个表格的宽度不超过 850 像素。

```
 <asp:ListView ID="ListView1" runat="server" EnableViewState = "true" Visible="true" wra>
                <LayoutTemplate>
                    <table cellpadding="1" width="850px" border="1" runat="server" id="tblProducts" >
                        <tr id="Tr1" runat="server">
                            <th id="Th1" runat="server">
                                Field Name
                            </th>
                            <th id="Th2" runat="server">
                                Type
                            </th>
                            <th id="Th3" runat="server">
                                XML Path
                            </th>
                            <th id="Th4" runat="server">
                                Vendor Path
                            </th>
                            <th id="Th5" runat="server">
                                Status
                            </th>
                            <th id="Th6" runat="server">
                                Comments
                            </th>
                            <th id="Th7" runat="server">
                                Edit
                            </th>
                            <th id="Th8" runat="server">
                                Forms
                            </th>
                            <th id="Th9" runat="server">
                                CU Specific
                            </th>
                        </tr>
                        <tr runat="server" id="itemPlaceholder" />
                    </table>
                    <asp:DataPager runat="server" ID="DataPager1" PageSize="50">
                        <Fields>
                            <asp:NumericPagerField ButtonCount="10" CurrentPageLabelCssClass="CurrentPage" NumericButtonCssClass="PageNumbers"
                                NextPreviousButtonCssClass="PageNumbers" NextPageText=" Next " PreviousPageText=" Previous " />
                        </Fields>
                    </asp:DataPager>
                </LayoutTemplate>
                <ItemTemplate>
                    <tr id="Tr2" runat="server">
                        <td>
                            <asp:Label ID="FieldName" runat="Server" Text='<%#Eval("FLD_NM") %>'/>
                        </td>
                        <td>
                            <asp:Label ID="Type" runat="Server" Text='<%#Eval("DATA_TYPE_CD") %>' />
                        </td>
                        <td>
                            <asp:Label ID="XMLPath" runat="Server" Text='<%#Eval("WS_XML_PATH_TX") %>' />
                        </td>
                        <td>
                            <asp:Label ID="VendorPath" runat="Server" Text='<%#Eval("FLD_NM") %>' />
                        </td>
                        <td>
                            <asp:DropDownList ID="Status" runat="Server" />
                        </td>
                        <td>
                            <asp:TextBox ID="Comments" runat="Server" MaxLength="100" />
                        </td>
                        <td>
                            <asp:LinkButton ID="EditButton" runat="Server" Text="Edit" CommandName="Edit" />
                        </td>
                        <td>
                            <asp:Label ID="Forms" runat="Server" Text='<%#Eval("FLD_NM") %>' />
                        </td>
                        <td>
                            <asp:Label ID="CUSpecific" runat="Server" Text='<%#Eval("FLD_NM") %>' />
                        </td>
                    </tr>
                </ItemTemplate>
                <EditItemTemplate>
                    <tr style="background-color: #ADD8E6">
                        <td>
                            <asp:LinkButton ID="UpdateButton" runat="server" CommandName="Update" Text="Update" />&nbsp;
                            <asp:LinkButton ID="CancelButton" runat="server" CommandName="Cancel" Text="Cancel" />
                        </td>
                        <td>
                            <asp:TextBox ID="FieldName" runat="server" Text='<%# Bind("FLD_NM") %>' MaxLength="50" /><br />
                        </td>
                        <td>
                            <asp:TextBox ID="DataType" runat="server" Text='<%# Bind("DATA_TYPE_CD") %>' MaxLength="50" /><br />
                        </td>
                    </tr>
                </EditItemTemplate>
            </asp:ListView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:51:17.950

尝试使用 css (style="width:850px;"):

```
<table cellpadding="1" style="width:850px;" border="1" runat="server" id="tblProducts" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T11:20:18.717

只需`<LayoutTemplate>`用下面提供的这个来改变你的，我希望它能解决你的问题。

```
<layouttemplate>
    <table id="tblProducts" runat="server">
        <tr id="Tr1" runat="server">
           <td id="Td1" runat="server">
              <table id="itemPlaceholderContainer" runat="server" style="width: 850px;">
                <tr id="Tr2" runat="server">
                  <th id="Th1" runat="server">Field Name</th>
                  <th id="Th2" runat="server">Type</th>
                  <th id="Th3" runat="server">XML Path</th>
                  <th id="Th4" runat="server">Vendor Path</th>
                  <th id="Th5" runat="server">Status</th>
                  <th id="Th6" runat="server">Comments</th>
                  <th id="Th7" runat="server">Edit</th>
                  <th id="Th8" runat="server">Forms</th>
                  <th id="Th9" runat="server">CU Specific</th>
                </tr>
                  <tr id="itemPlaceholder" runat="server"></tr>
              </table>
            </td>
         </tr>
         <tr id="Tr3" runat="server">
           <td id="Td2" runat="server" style="">
             <asp:DataPager runat="server" ID="DataPager1" PageSize="50">
                <Fields>
                   <asp:NumericPagerField ButtonCount="10" CurrentPageLabelCssClass="CurrentPage" NumericButtonCssClass="PageNumbers"
                                NextPreviousButtonCssClass="PageNumbers" NextPageText=" Next " PreviousPageText=" Previous " />
                </Fields>
             </asp:DataPager>
           </td>
         </tr>
    </table>
</layouttemplate> 
```

# html - 修改css气泡

> ID：11616831
> 
> 赞同：1
> 
> 时间：2012-07-23T16:45:32.467
> 
> 标签：html, css, dom

**CSS：**

```
.container {
    margin-left: 15px;
    width: 10px;
    background: #FFFFFF;
    border: 1px solid #CAD5E0;
    padding: 4px;
    position: relative;
    min-height: 10px;
    font-size:8px;
}
.container:before {
    content: '';
    display: block;
    position: absolute;
    top: 1px;
    left: 100%;
    width: 0;
    height: 0;
    border-color: transparent transparent transparent #CAD5E0;
    border-style: solid;
    border-width: 6px;
} 
```

**HTML：**

```
<a class="container">1</a>​ 
```

有人可以向我解释如何修改这个 css 以便将指针（三角形）放在框的左侧。

我在这个小提琴中有它：http: [//jsfiddle.net/DTZwA/](http://jsfiddle.net/DTZwA/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T16:48:25.243

只需更新这两行：

```
.container:before {
    right: 100%;
    border-color: transparent #CAD5E0 transparent transparent;
    /* All other properties are identical */
} 
```

这是小提琴：http: [//jsfiddle.net/YnD6C/](http://jsfiddle.net/YnD6C/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T16:56:15.530

我制作了一个插件，可以为你制作气泡 :)

当你制作箭头时，你必须从相反的角度思考。

将颜色值添加到您想要的颜色值的对面。

想让它向左走吗？把颜色放在右边。

[http://www.rosefalk.dk/library/base/index.html](http://www.rosefalk.dk/library/base/index.html)

# ios - iPad 应用程序开发 - 自定义和重新分发

> ID：11616832
> 
> 赞同：0
> 
> 时间：2012-07-23T16:45:44.753
> 
> 标签：ios, ipad

我需要制作一个 iPad 应用程序，允许我的客户配置应用程序（加载自己的数据库、图片），使其显示为他们自己的。然后，他们将能够使用他们的自定义图像、数据库等重新分发应用程序。最终最终用户将获取应用程序，它会显示为由中间人（我的客户）创建的应用程序。我们不能给中间人（我的客户）源代码。这可能吗？

# c# - 将 foreach 循环更改为 Parallel.ForEach 和奇怪的错误

> ID：11616833
> 
> 赞同：4
> 
> 时间：2012-07-23T16:45:46.473
> 
> 标签：c#

我有几个使用传统语法编写的循环

```
foreach(x in xs) {....} 
```

其中一些循环在计算方面非常密集，我只是使用如下并行语法更改了它们：

```
Parallel.ForEach(x, xs => {...}); 
```

我看到性能大幅提升！！现在我的问题是：我是在使用并行多线程引入错误吗？我读到线程安全很复杂，并且会产生奇怪的错误；我应该担心什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T16:57:09.090

访问共享状态很可能不会产生预期的结果。简单的例子：

```
int sum = 0;
for (int i = 0; i < 1000000; i++)
{
    sum++;
} 
```

将其更改为

```
Parallel.For(0, 1000000, i => { sum++; }); 
```

你会看到`sum`会有一些随机值，因为多个线程正在读/写`sum`。

如果您锁定更新，您将解决问题，但您实际上会将操作再次转换为顺序操作。

您需要确保循环中发生的任何事情都是安全的。

Microsoft Patterns and Practices 写了[一本书](http://www.microsoft.com/en-us/download/details.aspx?id=19222)来解释所有这些以及更多内容。在简单地更改代码以使用并行循环之前，您应该检查一下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T16:51:55.817

可以肯定地说 - 发布您的迭代/循环代码。

但总的来说，您的迭代应该彼此独立，并尽量避免共享状态。跨并行迭代资源的任何共享资源都可能引入错误。

此外，当您的计算依赖于其他一些计算或并行操作或循环时，更好地使用 TPL 任务链，它还有助于避免共享跨线程资源。

更多信息和示例以及模式/反模式在免费的 Microsoft 书籍中得到了很好的描述：并行编程模式：使用 .NET Framework 4 理解和应用并行模式

在这里下载

[http://www.microsoft.com/en-us/download/details.aspx?id=19222](http://www.microsoft.com/en-us/download/details.aspx?id=19222)

# java - 在 Java 中不使用 return 语句返回字符串值

> ID：11616834
> 
> 赞同：0
> 
> 时间：2012-07-23T16:45:46.907
> 
> 标签：java, return, hessian

预先感谢。

我正在寻找消息类型或任何在 Java 中返回字符串值的快速简便的方法。

例如。我有一个方法

```
void getStringvalues(int a, int b){

int c = a + b;

...
...
....

} 
```

上述方法是从 Hessian php 服务器调用的。

所以我必须像确认一样从Java向php发送一条消息。这必须是一个字符串。有没有办法做到这一点。

我可以使用 Return，但 java 方法与巨大的数据库和计算不一致。并且 php 的会话将过期，直到我完成整个过程并发送返回类型“”。在末尾。

或者我可以在流程开始时使用返回类型吗？

再次感谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T17:02:35.553

如果我理解正确，您希望您的 Java 方法返回一个中间结果，然后继续。所以你有两个解决方案：

1.  将方法拆分为两部分，并从客户端调用每个子方法：

    ```
    intermediateResult = server.doFirstPart();
    server.doSecondPart(); 
    ```

2.  使该方法在单独的线程中执行第二部分：

    ```
    public String doEverything() {
        ...
        String intermediateResult = ...;
        Thread t = new Thread(...);
        t.start(); // launch the thread to compute the rest asynchronously
        return intermediateResult;
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T16:48:25.490

不知道我是不是太了解你了，但那是你想要的吗？

```
public String getStringValues(int a, int b) {
    int c = a + b;
    String str = c + "";
    return str;
} 
```

# bash - '\r'：找不到命令 - .bashrc / .bash_profile

> ID：11616835
> 
> 赞同：340
> 
> 时间：2012-07-23T16:45:53.823
> 
> 标签：bash, shell, cygwin, newline

我有 Windows，使用 Cygwin，试图通过我的文件`JAVA_HOME`永久设置。`.bashrc`

**.bashrc：**

```
export PATH="$JAVA_HOME/bin:$PATH"  
export JAVA_HOME=$JAVA_HOME:"/cygdrive/c/Program Files (x86)/Java/jdk1.7.0_05" 
```

**.bash_profile：**

```
if [ -f ~/.bashrc ]; then
   source ~/.bashrc
fi 
```

**运行cygwin：**

```
-bash: $'\377\376if': command not found
-bash: $'then\r': command not found
: No such file or directorysu//.bashrc
-bash: /cygdrive/c/Users/jhsu//.bash_profile: line 3: syntax error near unexpected token `fi'
-bash: /cygdrive/c/Users/jhsu//.bash_profile: line 3: `fi' 
```

我不确定我是否从适用于另一个系统的教程中获取命令，或者我是否缺少步骤。或者空格导致我的命令无法正常运行。

我已经查看了多个类似的问题，但我没有找到一个问题与我的错误完全一致。

* * *

我的家乡路径：

```
$ echo $HOME
/cygdrive/c/Users/jhsu
$ echo ~
/cygdrive/c/Users/jhsu/ 
```

所以我相信文件应该放在正确的位置。

* * *

## 回答 #1

> 赞同：408
> 
> 时间：2012-07-23T17:10:35.583

**当 Cygwin 中所有其他方法都失败时......**

尝试`dos2unix`对相关文件运行命令。

当您看到如下错误消息时，它可能会有所帮助：

`-bash: '\r': command not found`

Windows 样式的换行符可能会导致 Cygwin 出现问题。

该`dos2unix`命令修改换行符，使其与 Unix/Cygwin 兼容。

**注意：** dos2unix 命令会*就地*修改文件，因此如有必要，请采取预防措施。

如果您需要保留原始文件，您应该先备份它。

**Mac 用户注意事项：**该`dos2unix`命令在 Mac OS X 上不存在。

查看[此答案](https://stackoverflow.com/q/1251999/778118)，了解使用不同工具的各种解决方案。

* * *

还有一个`unix2dos`相反的命令：

它修改 Unix 换行符，使它们与 Windows 工具兼容。

如果您使用记事本打开一个文件并且所有行一起运行，请尝试`unix2dos filename`.

* * *

## 回答 #2

> 赞同：336
> 
> 时间：2015-10-02T17:42:35.523

### 对于那些没有安装*dos2unix*（并且不想安装它）的人：

删除导致此错误的尾随`\r`字符：

```
sed -i 's/\r$//' filename 
```

**说明**：

选项`-i`用于*就地*`\r`编辑，我们直接在输入文件中删除尾随。因此要小心正确键入模式。

* * *

## 回答 #3

> 赞同：119
> 
> 时间：2015-10-06T15:15:22.223

对于使用[Notepad++的](https://notepad-plus-plus.org)**WINDOWS** (shell) 用户（使用 v6.8.3 检查），您可以使用选项更正特定文件

*   编辑 -> EOL 转换 -> Unix/OSX 格式

并再次保存您的文件。

编辑：仍然适用于 v7.5.1（2017 年 8 月 29 日）

编辑：2022 年 1 月 3 日。正如`VSCode`多次提到的。转到 VSCode 中的设置并`files.eol`在搜索字段中键入并设置为`\n`（Unix 格式）。请注意，这会为您的用户或所有文件的工作区更改此设置，并且可能不是您想要的。YMMV。

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2013-06-11T12:08:01.837

我正在使用 cygwin 和 Windows7，诀窍不是将`set -o igncr`.bashrc 放入您的 .bashrc 中，而是将整个`SHELLOPTS`放入 Windows 下的环境变量中。（所以 unix / cygwin 什么都没有......）我认为它不起作用，`.bashrc`因为正如我们用德语所说的那样，“水滴已经被吸走了”。;-) 所以我`SHELLOPTS`看起来像这样

```
braceexpand:emacs:hashall:histexpand:history:igncr:interactive-comments:monitor 
```

* * *

## 回答 #5

> 赞同：34
> 
> 时间：2015-09-29T13:36:16.103

**崇高的文字**

有了崇高，你就去

> 查看 -> 行尾 -> (select)Unix

然后保存文件。将解决此问题。

就这么简单！

* * *

## 回答 #6

> 赞同：30
> 
> 时间：2012-07-28T11:02:38.477

如果您使用的是最新的 Cygwin（例如 1.7），您还可以在第一个未注释的行上同时启动您的`.bashrc`和`.bash_profile`以下行：

```
# ~/.bashrc: executed by bash(1) for non-login shells.
# see /usr/share/doc/bash/examples/startup-files (in the package bash-doc)
# for examples
(set -o igncr) 2>/dev/null && set -o igncr; # this comment is needed 
```

`\r`这将强制 bash 忽略Windows 行分隔符中使用的回车 ( ) 字符。

请参阅[http://cygwin.com/ml/cygwin-announce/2010-08/msg00015.html](http://cygwin.com/ml/cygwin-announce/2010-08/msg00015.html)。

* * *

## 回答 #7

> 赞同：24
> 
> 时间：2018-08-23T16:44:32.580

尝试执行以下命令

```
vim .bashrc
:set ff=unix
:wq! 
```

* * *

## 回答 #8

> 赞同：22
> 
> 时间：2016-03-08T16:24:10.410

错误：

> `'\r'`： 找不到相关命令

是由于 shell 无法识别类似于 Windows 的 CRLF 行结尾 ( `0d 0a`)，因为它只期望`LF`( `0a`)。

* * *

### 吉特

如果您在 Windows 上使用 Git，请确保您在设置期间选择了“*按原样结帐”。*然后确保你运行: `git config --global core.autocrlf false`，这样 Git 在签出或提交文本文件时不会执行任何转换。

* * *

### `dos2unix`

如果您不使用 Git，您只需将这些受影响的文件/脚本转换回类 Unix 行尾 (LF)，方法是：

```
dos2unix ~/.bashrc 
```

^(注意：该`dos2unix`命令是`dos2unix`包的一部分。)

### Ex/Vim 编辑器 +`tr`

如果你安装了 Vim，下面的命令应该更正文件：

```
ex +'bufdo! %! tr -d \\r' -scxa ~/.bash* 
```

^(有用的别名：`alias dos2unix="ex +'bufdo! %! tr -d \\\\r' -scxa"`.)

### `tr`

这是使用的方法`tr`：

```
cat ~/.bashrc | tr -d '\r' > ~/.bashrc.fixed && mv -v ~/.bashrc.fixed ~/.bashrc 
```

或者：

```
tr -d '\r' < filename > new_filename 
```

^(注意：`\r`相当于`\015`。)

* * *

### `sed`

您可以尝试以下命令：

```
sed -i'.bak' s/\r//g ~/.bash* 
```

* * *

### `recode`

以下别名可能有用（替换`dos2unix`命令）：

```
alias unix2dos='recode lat1:ibmpc'
alias dos2unix='recode ibmpc:lat1' 
```

^(来源：[Windows 下的免费 Unix 工具（ssh、bash 等）](https://www.akadia.com/services/cygwin_tools.html)。)

* * *

### `perl`

以下`perl`命令可以将文件从 DOS 转换为 Unix 格式：

```
perl -p -i.bak -e 's/\015//g' ~/.bash* 
```

^(资料来源：[剥离 ^M](https://www.redhat.com/archives/redhat-list/1999-April/msg01710.html)。)

* * *

### `tofrodos`

在 Linux 上，比如 Ubuntu，它不带有`dos2unix`or的标准`unix2dos`，您可以安装`tofrodos`包 ( `sudo apt-get install tofrodos`)，并定义以下别名：

```
alias dos2unix=’fromdos’
alias unix2dos=’todos’ 
```

然后使用与上述相同的语法。

* * *

### 流浪汉

如果您使用的是 Vagrant VM，并且配置脚本会发生这种情况，请尝试将`binary`选项设置为`true`：

```
# Shell provisioner, see: https://www.vagrantup.com/docs/provisioning/shell.html
config.vm.provision "shell" do |s|
  s.binary = true # Replace Windows line endings with Unix line endings.
  s.path = "script.sh"
end 
```

请参阅：[Vagrant 中的 Windows CRLF 到 Unix LF 问题](https://stackoverflow.com/q/28651275/55075)。

* * *

## 回答 #9

> 赞同：18
> 
> 时间：2014-03-18T13:39:30.210

您还可以将选项添加`-o igncr`到 bash 调用，例如

```
bash -x -o igncr script.sh 
```

* * *

## 回答 #10

> 赞同：11
> 
> 时间：2017-06-02T23:22:04.707

根据这个[gist](https://gist.github.com/mymaneesh/7583980)，解决方案是创建一个`~/.bash_profile`（在`HOME`目录中），其中包含：

```
export SHELLOPTS
set -o igncr 
```

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2018-05-30T06:15:19.183

可能是您使用记事本++ 来创建/更新此文件。

EOL(Edit->EOL Conversion) 默认转换为 Windows。

在 Notepad++ 中更改 EOL 转换

```
Edit -> EOL Conversion -> Unix (LF) 
```

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2015-11-06T14:11:08.170

用记事本++解决：

1) 菜单->编辑->EOL 转换-> Unix/OSX 格式

2）然后保存

固定的

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2015-11-30T02:59:44.937

使用 notepad++(6.8.1) 将 shell 脚本从 windows 传送到 linux 的人。

在记事本 ++ 编辑 -> EOL 转换 -> Unix/OSX 格式中设置以下内容

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2015-02-24T09:08:31.733

我有同样的问题。解决方案：我用pspad编辑器编辑文件，并给它一个unix格式（菜单-格式-> UNIX）

我相信您可以使用许多其他编辑器将此格式设置为您的文件

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2015-09-21T17:37:51.280

# 对于那里的 Emacs 用户：

1.  打开文件
2.  Mx 设置缓冲区文件编码系统
3.  选择“unix”

这会将文件中的新字符更新为 unix 样式。更多关于 Emacs 中“换行表示”的信息可以在这里找到：

[http://ergoemacs.org/emacs/emacs_line_ending_char.html](http://ergoemacs.org/emacs/emacs_line_ending_char.html)

注意：如果希望从命令行执行上述步骤，则可以将上述步骤制作成 Emacs 脚本。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2017-05-25T07:17:36.163

由于从 Windows 机器创建/下载的文件/脚本可能会出现问题。请尝试转换成linux文件格式。

```
dos2unix ./script_name.sh 
```

或者

```
dos2unix ~/.bashrc 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2018-07-20T05:11:46.847

如果您在 Cygwin 安装中安装了 vim 包，则可以使用 vim 来修复此问题，而无需查找和替换。按如下方式启动 vim：（`vim filename.sh`通常它也别名为 vi）。然后，键入`:set fileformat=unix`，然后`:wq`（写入并退出）以保存您的更改。（这`:`会让你进入 vim 的编辑模式。）

我建议在 dos2unix 上使用它，因为 vim 可能更常用。

但是，最好将文本编辑器设置为将您计划在 Unix/Linux 环境中使用的文件保存为 Unix 文本格式。上面为 Notepad++ 给出的答案就是一个很好的例子。

附加说明：如果您不确定文件是什么类型（DOS 或 Unix），您可以使用`file filename.sh`. 这尤其有助于调试更模糊的问题（例如导入来自 Windows 的 SQL 转储时的编码问题）。

有关如何修改文本文件格式的其他选项，请参阅[此 IU 知识库文章](https://kb.iu.edu/d/acux "IU 知识库：如何在 Windows 和 Unix 文本文件之间进行转换")

有关 Bash 脚本和行尾的更多背景信息，请参阅[此 StackOverflow 问题](https://stackoverflow.com/questions/39527571/are-shell-scripts-sensitive-to-encoding-and-line-endings)。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-11-16T12:57:28.580

在[EditPlus](http://www.editplus.com)中，您可以从 `Document → File Format (CR/LF) → Change File Format...`菜单中执行此操作，然后选择`Unix / Mac OS X`单选按钮。

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2018-03-01T13:10:10.323

## 1\. 选择

![编辑器配置](../Images/17dc2873746255aed15278c6030067b9.png) [**EditorConfig**](http://editorconfig.org/) — 是我的选择。

* * *

## 2.相关性

此答案与 2018 年 3 月相关。将来，此答案中的数据可能已过时。

此答案的作者在 2018 年 3 月亲自使用了 EditorConfig。

* * *

## 3\. 限制

您需要使用[**受支持的 IDE/编辑器之一**](http://editorconfig.org/#download)。

* * *

## 4\. 论证

1.  简单的用法。我需要设置我的`.editorconfig`文件 1 次，在那里我创建我的项目，→ 我可以忘记[**一些特定于平台、样式和 IDE 的问题**](https://github.com/editorconfig/editorconfig/wiki/EditorConfig-Properties)。
2.  [**跨平台、跨语言、跨IDE、跨编辑器**](http://editorconfig.org/#download)。

* * *

## 5\. 例子

### 5.1。简单的

我为 Sublime Text → 我的文本编辑器安装了[**EditorConfig 插件。**](https://github.com/sindresorhus/editorconfig-sublime)我在 Sublime Text 中编辑文件。

例如，我有`sashacrlf.sh`文件：

```
echo "Sasha" &
echo "Goddess!" & 
```

我在 Cygwin 中运行这个文件：

```
$ bash sashacrlf.sh
Sasha
sashacrlf.sh: line 1: $'\r': command not found
Goddess! 
```

我`.editorconfig`在与`sashacrlf.sh`.

```
[*.sh]
end_of_line = lf 
```

这意味着，如果您`.sh`在编辑器的项目中保存任何带有扩展名的文件，EditorConfig 会为此文件设置 UNIX 行结尾。

我再次保存`sashacrlf.sh`在我的文本编辑器中。我`sashacrlf.sh`再次运行：

```
$ bash sashacrlf.sh
Sasha
Goddess! 
```

我无法在控制台中获得意外输出。

### 5.2\. 多个文件扩展名

例如，我想在所有扩展名为`.sh`,`.bashrc`和`.bash_profile`. 我将这些行添加到我的`.editorconfig`文件中：

```
[*.{sh,bashrc,bash_profile}]
end_of_line = lf 
```

现在，如果我保存任何带有或扩展名的文件`.sh`，EditorConfig 会自动为此文件设置 UNIX 行结尾。`.bashrc``.bash_profile`

* * *

## 6\. 附加链接

*   [**EditorConfig 官方网站**](http://editorconfig.org/)。

# shell - 在for循环中比较两个变量

> ID：11616836
> 
> 赞同：1
> 
> 时间：2012-07-23T16:45:56.703
> 
> 标签：shell, for-loop

我需要做一个 for 循环，但我对 shell 比较陌生。我想要相当于：

```
For i = 1 to limit 
```

就像在 Visual basic 中一样，其中“limit”是一个变量，设置为我希望 for 循环持续多长时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:59:53.763

在没有外部实用程序（如 seq）的情况下执行此操作的 POSIX 方法是使用 while 循环：

```
limit=10
i=0

while [ "$i" -le "$limit" ]; do
   ...
   i=$((i + 1))
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T16:48:25.447

`for i in $(seq 1 limit); do ...; done`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T16:52:21.543

如果：

```
limit=10 
```

然后在`zsh`使用中：

```
for i in {1..$limit}; do echo $i; done 
```

在`bash`使用 jordanm 或 Lars Kotthoff 建议的答案或使用这个：

```
for i in $(eval echo {1..$limit}); do echo $i; done 
```

### 编辑

两者都`bash`支持`zsh`这种 C 风格的循环：

```
for ((i=0;i <= limit; i++)); do echo $i; done 
```

注意，不需要`$`when within `(( ... ))`。

# .net - 使用 Entity Framework 4.0，是否有代码优先数据注释可以为 db 列定义默认值？

> ID：11616839
> 
> 赞同：2
> 
> 时间：2012-07-23T16:45:58.437
> 
> 标签：.net, entity-framework, ef-code-first

我在 Entity Framework 4.0 中使用代码优先模式。我希望数据库中的某些列具有默认值。

```
public class Customer
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }        
    //I need some kind of attribute like this
    [ColumnAttribute.Default = false]
    public bool IsEnabled { get; set; }
} 
```

我正在寻找一种将*IsEnabled*列默认值定义为*false*的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:54:24.570

我不知道有任何数据注释可以实现您的目标。我认为只是去老学校并将其设置在您的构造函数中是要走的路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T16:59:05.020

默认值没有注释，但您可以在 POCO 的构造函数中设置默认值。

# c# - 如何将字符串添加到指定列范围内的所有单元格？

> ID：11616842
> 
> 赞同：0
> 
> 时间：2012-07-23T16:46:14.513
> 
> 标签：c#, excel, range, office-interop

我正在使用电子表格，本质上我想在之前保存的给定范围的末尾添加一些文本。我搜索了论坛并遇到了各种似乎给出各种结果的技术。

我使用了以下代码：

```
foreach (Excel.Range row in MyGivenRange.Rows)
{
    Excel.Range cell = (Excel.Range)row.Cells[1, 1];
    cell.Value += "Add this text";
} 
```

这会将文本一个接一个地添加到范围内每个单元格的末尾，但是因为我的电子表格中有 11k 条记录，这需要一段时间。有什么捷径可以走吗？我已经尝试过各种作为复制和粘贴值。我可以在旁边的列中快速粘贴一些文本然后合并以节省时间吗？

只是想知道你们是否有任何想法我能做什么。对我来说，搜索每一行可能效率很低。和以前一样，我发现使用范围直接复制粘贴之前节省了我的时间。也许有一种特殊的方法可以在给定的列或范围上使用插入来立即调整每个实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:24:18.553

This is vba, but it should be fairly easy to convert to C#.

I wrote this in response to your question. Using `testit` updates approximately 16000 cells, and took about 6 seconds. The basic idea is to copy the Excel formulas into an array, update the array, and then paste the array back into Excel as the formulas.

```
Sub testit()
appendTextToRange "A1:D4000", "hey there"
End Sub

Sub appendTextToRange(rngAddress As String, append As String)
Dim arr() As Variant, c As Variant
arr = Range(rngAddress).Formula
For x = LBound(arr, 1) To UBound(arr, 1)
    For y = LBound(arr, 2) To UBound(arr, 2)
        Debug.Print arr(x, y)
        If arr(x, y) = "" Then
            arr(x, y) = append
        ElseIf Left(arr(x, y), 1) = "=" Then
            arr(x, y) = arr(x, y) & " & "" " & append & """"
        Else
            arr(x, y) = arr(x, y) & " " & append
        End If
    Next
Next
Range(rngAddress).Formula = arr
End Sub 
```

Warning: If you update any fields that are used for calculation with this, you will break your calculations.

# iis - Helicon Zoo Sinatra 静态文件

> ID：11616843
> 
> 赞同：0
> 
> 时间：2012-07-23T16:46:17.877
> 
> 标签：iis, sinatra

CSS 在使用 Helicon Zoo 和 Sinatra 的 IIS 7.5 上不能正常工作。

这是目录结构：

```
welcometo
 --public
  --styles
   --welcometo.css 
```

我使用 Webrick 测试了我的网站，它运行良好。

当我转到 localhost:4567/styles/welcometo.css 时，样式表显示在 Web 浏览器中。

当我访问 IIS 站点 /styles/welcometo.css 时，我收到此错误：

```
Try this:
get '/public/styles/welcometo.css' do
    "Hello World"
end 
```

[我从Helicon Zoo 的 Sinatra 页面](http://www.helicontech.com/zoo/usage/ruby-sinatra.htm)复制了 web.config 。这是静态文件部分：

```
<!-- Send static files through IIS -->
<rewrite>
    <rules>
            <rule name="Avoid Static Files" stopProcessing="true">
                <match url="^(?!public)(.*)$" ignoreCase="false" />
                    <conditions logicalGrouping="MatchAll" trackAllCaptures="true">
                        <add input="{APPL_PHYSICAL_PATH}" pattern="(.*)" ignoreCase="false" />
                        <add input="{C:1}public\{R:1}" matchType="IsFile" />
                    </conditions>
            <action type="Rewrite" url="public/{R:1}" />
                </rule>
        </rules>
</rewrite> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T18:04:36.883

我们忘记包含 /public 文件夹的 web.config 示例，抱歉。您可以在此处的 Ruby on Rails 安装页面上看到此示例：[IIS 上的 Ruby on Rails (2.3.x 和 3.xx)](http://www.helicontech.com/zoo/usage/ruby-on-rails.htm) 请将此 web.config 文件放入 /public 文件夹：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <handlers>
                <!-- 
                This disables Helicon Zoo handler and makes IIS processing static
                files directly.
                -->
                <remove name="rails.project#x64" />
                <remove name="rails.project#x86" />
        </handlers>
    </system.webServer>
</configuration> 
```

# sql - 删除重复记录留下 1

> ID：11616848
> 
> 赞同：2
> 
> 时间：2012-07-23T16:46:38.537
> 
> 标签：sql, merge, duplicates

我这样做`MERGE`是为了从我的两个表中获取所有唯一的项目编号：

```
MERGE INTO  XXINV.XXINV_ITEM_SNAP_EGS_E5A6 ISE
USING apps.XXRPT_INV_VALUATION_D535_V IVD
ON (IVD.ITEM_NUMBER = ISE.ITEM_NUMBER)
WHEN NOT MATCHED THEN 
INSERT (ORGANIZATION_CODE, ITEM_NUMBER)
VALUES (IVD.OWNING_ORG_CODE,IVD.ITEM_NUMBER) 
```

但问题是表中有重复的项目编号，但`IVD`表中没有，`ISE`所以我怎样才能摆脱合并带来的重复项（留下 1）。

注意我对 sql 很陌生。我使用 Toad for Oracle 10g

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T17:36:06.880

[看起来您可以](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_9016.htm)`USING`为Oracle 语句中的子句指定子查询`MERGE`，因此您可以执行以下操作：

```
MERGE INTO  XXINV.XXINV_ITEM_SNAP_EGS_E5A6 ISE
USING (select distinct ... from apps.XXRPT_INV_VALUATION_D535_V) IVD
ON (IVD.ITEM_NUMBER = ISE.ITEM_NUMBER)
WHEN NOT MATCHED THEN 
INSERT (ORGANIZATION_CODE, ITEM_NUMBER)
VALUES (IVD.OWNING_ORG_CODE,IVD.ITEM_NUMBER) 
```

# java - 从java到php5？

> ID：11616849
> 
> 赞同：2
> 
> 时间：2012-07-23T16:46:40.213
> 
> 标签：java, php

我被要求用 php5 进行一些开发（扩展现有模块）。我有 Java EE、JSF2、一般 webapps 的经验。但是没有编码任何php，甚至没有。

学习php5有多难？我应该注意的主要区别是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T17:06:29.983

这很简单。与其他语言相比，有很多很多的陷阱是您无法事先预测的，但无论如何，这都是您只能通过经验克服的问题，因此请立即开始。

然而，要极度警惕在线教程；几乎所有不在 Stack Overflow 上的 PHP 都是由非程序员为非程序员编写的，以“这既便宜又脏但会做”的态度 — 准备好质疑每一个实践，并尝试从你的 Java 中带来你可以做的事情可能的知识。

另请阅读：

*   [http://me.veekun.com/blog/2012/04/09/php-a-fractal-of-bad-design/](http://me.veekun.com/blog/2012/04/09/php-a-fractal-of-bad-design/)
*   [http://www.codinghorror.com/blog/2012/06/the-php-singularity.html](http://www.codinghorror.com/blog/2012/06/the-php-singularity.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T16:57:33.180

我前段时间做过这个。

在我看来，php 是一种结构化的脚本语言，比 JAVA 更易于使用和学习。

但是，由于它没有强大的 Java 结构，它会惹恼你。PHP函数及其结构存在很多不一致之处。即使它更容易开始和使用它，但在大型项目上工作可能会很困难，因为没有一个好的组织。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T17:00:07.680

不，它“与 Java 不太一样”，但学习曲线并没有那么陡峭。有很大的耐心和大量的谷歌搜索，你会找到你需要的一切。如果 Java 是您的第一语言，我会非常强调耐心。PHP 只是有自己的方式来处理有时非常令人沮丧的事情。如果你接受它的本来面目，并且厌恶用它“做 Java”的诱惑，你会没事的。过去它甚至会很有趣:-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T16:54:25.677

PHP一点也不难。当我第一次开始学习 PHP 时，我的 CS 教授告诉我它与 Java 几乎相同。

由于我对 PHP 还比较陌生，两者之间的主要区别可能是您不必在 PHP 中定义数据类型。

一路上帮助我的几个网站，[w3school](http://www.w3schools.com/php/default.asp)，[PHP 手册](http://php.net/manual/en/index.php)

`if/else`以及通过 using 使用语句的简短方法[`? and :`](http://davidwalsh.name/php-shorthand-if-else-ternary-operators)

我最近发现了[PDO](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)，它是防止 SQL 注入的好方法。希望你觉得它有帮助

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-23T17:05:03.293

听到这个我很难过。如果这发生在我身上，我可以想象！！！似乎因为您的工作场所“缺乏开发人员”而发生在您身上。

无论如何，PHP 并不像 Java 那样难，因为它不是一种编程语言，而是一种高度先进的脚本语言。但是，您可能也会觉得它很无聊。

你可以去 w3schools，参考 php 手册，当然还有 PHP 书籍，比如“Head First PHP and My SQL”。但是你的问题让我觉得他们要求的是高水平的发展。如果是，那么您需要时间，或者您必须与他们交谈，因为您知道，一天之内什么都学不到，因为我们是人类。

我强烈建议学习一本书，因为在线资源会在这里和那里教你，而且很可能只是基础知识。一旦您从 GOOD 材料中学习它，那么您当然可以找到高级 php 教程（特别是问题的答案）。

# ios5 - 将 ExclusiveTouch 设置为自定义 UITableViewCell

> ID：11616855
> 
> 赞同：2
> 
> 时间：2012-07-23T16:46:55.697
> 
> 标签：ios5, uitableview

我正在尝试将 ExclusiveTouch 属性设置为我的自定义 UITableViewCell。

但是，添加此代码似乎不起作用。

```
for (UIView *view in cell.subviews)
{
    if ([view isKindOfClass:[UIView class]])
         {
             view.exclusiveTouch = YES;
         }
} 
```

有人可以帮我弄清楚我错过了什么或我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T16:51:53.493

不确定但试一试：

```
cell.exclusiveTouch = YES
cell.contentView.exclusiveTouch = YES 
```

# backbone.js - 骨干.js + require.js + jsdoc3：jsdoc 缺少依赖问题

> ID：11616856
> 
> 赞同：3
> 
> 时间：2012-07-23T16:46:58.963
> 
> 标签：backbone.js, requirejs, jsdoc

我正在尝试使用 jsdoc3 记录我的模块化骨干应用程序。但是，当我尝试通过 jsdoc 运行此代码时，我收到错误“来自未捕获的 JavaScript 抛出的异常：错误：缺少依赖项：Backbone.model”：

```
 /**
    * A module representing a dog model
     * @module dogModel
     */

define([
    'underscore',
    'backbone'
    ], function(_, Backbone) {

    /**
    * @constructor
    * @requires Underscore
    * @requires Backbone
    * @extends Backbone.Model        
    */
        var dogModel = Backbone.Model.extend({
         //blah blah blah blah
        });

    return dogModel;
}); 
```

当我添加“@extends Backbone.Model”时发生错误。我也欢迎任何关于使用 jsdoc3 记录骨干应用程序（使用 require.js）的替代模式的建议。

提前致谢。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-08-22T07:06:17.497

如果您不介意查看替代文档生成器，您可能会喜欢[docco](http://jashkenas.github.com/docco/)。我将它与 Backbone + Require + Node.js 一起使用。效果很好！

# php - 我可以根据 ID 限制 PHP 中结果集的显示吗？

> ID：11616857
> 
> 赞同：0
> 
> 时间：2012-07-23T16:46:58.590
> 
> 标签：php, mysql, resultset

假设我从 mysql DB 调用中获得了以下结果集（基本示例，main 将有更多数据）：

```
customerID   |   name     |     item     |     price
====================================================
11111        |   John     |    pizza     |   10.00
11111        |   John     |    burger    |   5.00
11111        |   John     |    drink     |   2.00
22222        |   Mike     |    lasagna   |   11.00
22222        |   Mike     |    drink     |   2.00
33333        |   Sam      |    burger    |   5.00
33333        |   Sam      |    fries     |   3.00
33333        |   Sam      |    shake     |   5.00
33333        |   Sam      |    drink     |   2.00 
```

我想以表格形式显示结果，但限制 customerID 和 name 出现的时间，以及显示每个客户的小计：

```
customerID   |    name    |   item    |    price
===================================================
11111        |    John    |  pizza    |   10.00
             |            |  burger   |   5.00
             |            |  drink    |   2.00
             |            |           |   **17.00**
             |            |           |
22222        |    Mike    |  lasagna  |   11.00
             |            |  drink    |   2.00
             |            |           |   **13.00**
             |            |           |
33333        |    Sam     |  burger   |   5.00
             |            |  fries    |   3.00
             |            |  shake    |   5.00
             |            |  drink    |   2.00
             |            |           |   **15.00** 
```

我知道我**可以**进行多个数据库调用，但是如果可以一次性完成，那就太浪费了。我在表 1 中的结果集循环和使用 PHP 正确格式化时遇到问题，如表 2 所示。我有可能显示它的方式还是我**必须**进行多个数据库调用才能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:51:05.553

您可以使用 group_concat() 来实现这一点。

```
SELECT id, name, GROUP_CONCAT(item) AS items, GROUP_CONCAT(price) AS prices, SUM(price) AS total FROM ... GROUP BY id 
```

在这里，您以逗号分隔的字符串形式获得项目和价格，并在另一列中获得总计。

group_concat 可以有自己的顺序，有关更多信息，请查看： [http ://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T17:08:48.780

这最好直接在 PHP 中解决，因为您可以随意修改输出。

所以基本上你会做类似（未经测试）的事情：

```
$res = mysql_query("SELECT costumerID, name, item, price
                    FROM orders 
                    ORDER BY customerID, item");

echo "<table id='orders'>".
      "<tr><th>Name</th>".
      "<th>Item</th>".
      "<th>Price</th></tr>";

$lastCostumer = -1;
$subTotal = 0; 
while ($row = mysql_fetch_array($res))
     {
     // New costumer
     if ($lastCostumer != $row['costumerID'])
           {
           // Write the subtotal of previous costumer, unless this is the 1st one
           if ($lastCostumer != -1)
              echo "<tr><td></td>".
                   "<td></td>".
                   "<td><b>**".$subTotal."**</b></td></tr>";

           $subTotal = 0; 
           echo "<tr><td>".$row['name']."</td>".
                "<td>".$row['item']."</td>".
                "<td>".$row['price']."</td></tr>";

           $subTotal = $subTotal + $row['price'];
           $lastCostumer = $row['costumerID'];
           }
     else // Same costumer
           {
           echo "<tr><td></td>".  // Don't write the name
                "<td>".$row['item']."</td>".
                "<td>".$row['price']."</td></tr>";

           $subTotal = $subTotal + $row['price'];
           }
     }

// Write the subtotal of last costumer
echo "<tr><td></td>".
     "<td></td>".
     "<td><b>**".$subTotal."**</b></td></tr>";

echo "</table>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T16:50:28.737

您可以进行单个数据库调用。只需循环遍历 PHP 中的结果并相应地输出表格。换句话说，我不认为这是一个数据库问题，而是决定如何循环遍历数据集和呈现 HTML 元素的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T16:52:48.887

您可以在（子）查询中使用 CONCAT_WS 运算符。用作`'<br/>'`海分离器。然后按客户 ID 分组。但是，CONCAT_WS 的输出限制为 1024 个字符。

# android - 在 Android 中，在列表中显示 Google Places JSON 数据？

> ID：11616858
> 
> 赞同：0
> 
> 时间：2012-07-23T16:47:13.193
> 
> 标签：android, json

在下面的代码中，我可以显示从我的 Google Places URL 返回的第一个 JSON 地名结果。而不仅仅是第一项，我想显示整个返回的地名列表。这样做最简单的方法是什么？你能指点我一个教程，或者给出示例代码吗？

```
 HttpGet get = new HttpGet(bcURL.toString());
    HttpResponse r = client.execute(get);
    int status = r.getStatusLine().getStatusCode();
    if(status == 200){
        HttpEntity e = r.getEntity(); 
        String data = EntityUtils.toString(e); 
        json = new JSONObject(data); 
        JSONArray timeline = json.getJSONArray("results"); 
        JSONObject lastport = timeline.getJSONObject(0); 
        return lastport;
    }else{
        Toast.makeText(NewGPS3.this, "oops", Toast.LENGTH_SHORT);
        return null;
    } 
```

该行`JSONObject lastport = timeline.getJSONObject(0);`显示名字。我想显示一个列表，而不仅仅是第一个项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:56:45.833

```
for(int i = 0; i < timeline.size(); i++){
JSONObject lastport = timeline.getJSONObject(i); 
//Save the item to a ArrayList and use that list for your ListAdapter.
googlePlaces.add(lastPort);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:04:34.343

您将需要使用 JSONArray 对象才能访问数组。它应该是这样的：

```
JSONObject entireObject = new JSONObject("your JSON string here");
JSONObject mainObject = entireObject.getJSONObject("photos"); // main object in entire object
JSONArray arrayObject = mainObject.getJSONArray("photo"); // array object in the main object 
```

然后，您可以像其他任何数组一样遍历此数组：

```
for (int i = 0; i < arrayObject.length(); i++) {
    JSONObject photoData = arrayObject.getJSONObject(i);
    String yourString = photoData.getString("id");
} 
```

我从 Pro Android Media 中得到了一些。本书中有一个非常好的 JSON api 调用示例。您也可以免费获得源代码。

[http://www.amazon.com/Pro-Android-Media-Developing-Smartphones/dp/1430232676/ref=sr_1_1?ie=UTF8&qid=1343062690&sr=8-1&keywords=android+media](https://rads.stackoverflow.com/amzn/click/com/1430232676)

# java - 目录树中缺少包前缀——如何用 Eclipse 处理它？

> ID：11616859
> 
> 赞同：0
> 
> 时间：2012-07-23T16:47:20.097
> 
> 标签：java, eclipse, directory-tree

*我下载了一些 Java 程序源代码，并尝试将它们导入 Eclipse。*

假设我有一个名为“com.bar.foo.my”的包，目录设置如下：

```
src/bar/foo/bar/my 
```

因此来源有其不同的目录，但缺​​少“com”级别。

**问题：**如何设置 Eclipse 以便它能够理解这个“快捷方式”？

## 更新：

在顶层，程序由以下目录组成：

```
assets
bin
gen
libs
out
res
src 
```

我向他们展示以表明它不仅仅是放在`src`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:48:39.690

`src`简单的方法是在 Eclipse > `New`>中右键单击您的文件夹`Package`并创建一个名为`com`. 然后，您可以拖动其中的所有其他包来解决您的问题。

`src`我向您询问文件夹中的包名称（*我在您的问题中的评论*）的原因是确定您的类期望包结构如何。既然它们以 开头`com.bar.foo.`，那么为了让它们被 Eclipse 编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T16:55:57.183

很简单，创建一个 Java 项目，将“src”目录作为 Java 构建路径中的源文件夹（这可能是默认值），如果没有，请使用项目菜单上的 Build Path -> Configure Build Path 查看/更改它。

然后将它们导入您的工作区（使用 Import -> Files into workspace），然后在您的 src 文件夹下创建一个“com”包。

最后，将“bar”文件夹移动到“com”包（只需在包/项目资源管理器中拖放）。

（您不能缺少“com”文件夹，因为这违反了 Java 假设，即类加载器依赖于文件层次结构与包名称完全匹配。）

# android - 从应用程序中选择图像，并使我的应用程序出现在列表中（使用完成操作）？

> ID：11616860
> 
> 赞同：1
> 
> 时间：2012-07-23T16:47:22.240
> 
> 标签：android, android-intent

我希望用户在从另一个应用程序中选择图像时在列表中看到我的应用程序。

让我们以 Facebook 应用程序为例。您可以选择要附加到帖子的图像，这会打开通常只包含“图库”的“使用完成操作”对话框。我希望我的应用出现在此列表中。

（大多数类似的问题是关于从我自己的应用程序中选择图像，这根本不是我想要完成的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T01:22:42.270

向您希望启动的活动添加一个意图过滤器。Facebook 的正确意图是 PICK：

```
<intent-filter>
    <action android:name="android.intent.action.PICK" />
    <category android:name="android.intent.category.DEFAULT" />
    <data android:mimeType="image/*" />
</intent-filter> 
```

但是，这并没有涵盖 Tumblr 应用程序的相同场景，它显然使用了一些其他意图来执行相同类型的操作（附加照片）。

# ruby-on-rails - Rails 中的动态排名

> ID：11616864
> 
> 赞同：0
> 
> 时间：2012-07-23T16:47:47.240
> 
> 标签：ruby-on-rails, rating-system

一般“我该怎么做？” 问题。

比如说，我有一个 Rails 应用程序，用户可以在其中浏览书籍。我希望有一个推荐页面，其中列出了基于从 Facebook 的 Open Graph 集成数据的算法为该特定用户推荐的书籍。该算法的简化版本如下所示：

a（喜欢这本书的Facebook好友数量）+ b（喜欢这本书的总人数）

其中 a 和 b 是加权系数。

我会在哪里计算这个公式来返回建议？是否有有助于创建动态排名的宝石？

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T18:44:33.153

欢迎来到兔子洞。享受秋天！

您通常在谈论支持向量机。这里有一些不错的起点：

*   [实用机器学习](http://www.youtube.com/watch?v=vy_zQ1-F0JI)
*   [http://matthewkirk.com/presentations/Support-Vector-Machines-with-Jruby.pdf](http://matthewkirk.com/presentations/Support-Vector-Machines-with-Jruby.pdf)
*   [https://github.com/hexgnu/rmw-svm](https://github.com/hexgnu/rmw-svm)

# javascript - 检测 setInterval 计时器是否在 javascript 中完成

> ID：11616870
> 
> 赞同：1
> 
> 时间：2012-07-23T16:48:26.430
> 
> 标签：javascript, html, setinterval

我正在尝试使用 Javascipt 构建 HTML5 蛇游戏。我有一个主要问题需要解决，经过数小时的思考后无法解决。

这与 setInterval 和箭头键按下时的蛇运动有关。当快速按下箭头键时..几乎就像按下多个键一样游戏结束（它意味着当蛇跑过自己时结束）

解释该问题的工作模型：http: [//jsfiddle.net/MgsZp/29/](http://jsfiddle.net/MgsZp/29/)

情况：蛇正在向下移动，当我快速按下左键然后向上箭头时，蛇会越过自身（仅向上移动），因为左箭头的时间间隔立即被清除。相反，它应该向左然后向上移动。

我试图将在这种情况下按下的箭头键存储在 Array 中，但无法处理。

例子：

var 箭头数组 = [] ; /* 存储按下的箭头键 */

// 按键 setInterval(move_snake, timer) 的方向存储在 arrowArray[0]

// arrowArray.shift() 移除蛇移动的当前方向并让位于arrowArray[0]中的下一个方向

现在，当快速按下箭头键时，我如何等到蛇向一个方向移动，然后再向第二个方向移动。尝试在 setTimeout 中使用 setInterval 等待计时器结束，但没有成功。

帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:06:05.783

试试这个：在您的按键处理程序中，执行`arrowArray.push(newDirection);`并在每一帧中，关闭新方向或使用当前方向。这样，蛇每帧可以改变一次方向，如果蛇正在下降，那么用户在下一帧出现之前按右、上、右、下将导致正确的事情发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T17:01:53.473

这里有一个想法：与其用箭头键清除间隔并重新开始，不如让箭头键改变蛇在下一帧中前进的方向。这避免了我在改变蛇的方向时看到的一点延迟。箭头键应该只是设置下一个移动方向。然后当区间函数再次运行时，它会检查下一个方向是否有效。这解决了蛇试图朝相反方向移动的问题。

# apache-flex - S：应用程序无法解析输入

> ID：11616872
> 
> 赞同：0
> 
> 时间：2012-07-23T16:48:29.483
> 
> 标签：apache-flex, maven, flexmojos, flex-mojos

嗨，我是 Flex 的新手，正在研究 Flex 与 Flexmojos（Maven 插件）的集成，我尝试过集成，但在 Main.mxml 中编译时遇到了问题

> s：应用程序无法解析为类型

我正在使用 Flex SDK 4.6，我阅读了一些解决方案，指定检查命名空间并检查我的 SDK 版本，一切都很好。即使 mx:Application 返回相同的错误。

有没有人遇到过这样的问题，请指教！

谢谢。

--编辑

这是代码

```
<?xml version="1.0" encoding="utf-8"?>

<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600" currentState="loginState"
               backgroundColor="#788E99" xmlns:Mxmls="Mxmls.*"
               creationComplete="siteData.send()">
    <fx:Declarations>
        <mx:HTTPService url="assets/content.xml" id="siteData" resultFormat="e4x"/> 
    </fx:Declarations>

    <!-- <fx:Style source="../Cat-Clv.css">
    </fx:Style>-->

    <fx:Declarations>
        <fx:XMLList id="mainMenuXMLList">
            <menuitem id="adminmenu" label="{resourceManager.getString('resources','menubar.admin')}" data="admin" percentWidth="12.5" visible="false"> 
```

代码是这样开始的。pom文件

```
<?xml version="1.0" encoding="UTF-8"?>

<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <artifactId>abc</artifactId>
        <groupId>abc.abc.abc</groupId>
        <version>0.7</version>
    </parent>

    <groupId>abc.abc.abc.swf</groupId>
    <artifactId>abc-swf</artifactId>
    <version>0.3</version>
    <packaging>swf</packaging>

    <name>swf Application</name>

    <build>
        <sourceDirectory>src/main/flex</sourceDirectory>
        <testSourceDirectory>src/test/flex</testSourceDirectory>
        <plugins>
            <plugin>
                <groupId>org.sonatype.flexmojos</groupId>
                <artifactId>flexmojos-maven-plugin</artifactId>
                <!-- <version>3.8</version> <dependencies> <dependency> <groupId>com.adobe.flex</groupId> 
                    <artifactId>compiler</artifactId> <version>3.2.0.3958</version> <type>pom</type> 
                    </dependency> </dependencies> -->
                <dependencies>
                    <dependency>
                        <groupId>com.adobe.flex</groupId>
                        <artifactId>compiler</artifactId>
                        <version>4.6.b.23201</version>
                        <type>pom</type>
                    </dependency>
                </dependencies>
                <extensions>true</extensions>
                <configuration>
                    <iKnowWhatImDoingPleaseBreakMyBuildIwontBlameFlexmojosForStopWorking>true</iKnowWhatImDoingPleaseBreakMyBuildIwontBlameFlexmojosForStopWorking>

                    <locales>
                        <locale>en_US</locale>
                        <locale>fr_FR</locale>
                    </locales>
                </configuration>
            </plugin>
        </plugins>
    </build>

    <dependencies>
        <!-- <dependency> <groupId>com.adobe.flex.framework</groupId> <artifactId>flex-framework</artifactId> 
            <version>3.2.0.3958</version> <version>3.4.0.9271</version> <type>pom</type> 
            </dependency> -->

        <dependency>
            <groupId>com.adobe.flex.framework</groupId>
            <artifactId>framework</artifactId>
            <version>4.6.b.23201</version>
            <type>swz</type>
        </dependency>

        <!-- <dependency> <groupId>com.adobe.flex.framework</groupId> <artifactId>flex-framework</artifactId> 
            <version>3.4.0.9271</version> <type>pom</type> </dependency> -->
        <dependency>
            <groupId>com.adobe.flexunit</groupId>
            <artifactId>flexunit</artifactId>
            <version>0.85</version>
            <type>swc</type>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>com.cat.clv.swc</groupId>
            <artifactId>clv-swc</artifactId>
            <version>0.3</version>
            <type>swc</type>
        </dependency>
    </dependencies>

    <profiles>
        <profile><!--https://docs.sonatype.org/pages/viewpage.action?pageId=2949459 -->
            <id>m2e</id>
            <activation>
                <property>
                    <name>m2e.version</name>
                </property>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.maven.ide.eclipse</groupId>
                        <artifactId>lifecycle-mapping</artifactId>
                        <version>0.9.9-SNAPSHOT</version>
                        <configuration>
                            <mappingId>customizable</mappingId>
                            <configurators>
                                <configurator
                                    id='org.maven.ide.eclipse.configuration.flex.configurator' />
                            </configurators>
                            <mojoExecutions>
                                <mojoExecution>org.apache.maven.plugins:maven-resources-plugin::</mojoExecution>
                            </mojoExecutions>
                        </configuration>
                    </plugin>
                </plugins>
                <pluginManagement>
                    <plugins>
                        <plugin>
                            <groupId>org.apache.maven.plugins</groupId>
                            <artifactId>maven-resources-plugin</artifactId>
                            <version>2.4</version>
                        </plugin>
                    </plugins>
                </pluginManagement>
            </build>
        </profile>
    </profiles>
</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:37:52.947

这意味着 spark.swc 不包含在您的 swf 中，这是我配置 FlexMojo 的方式：

```
<configuration>
   <flashplayer.version.swf>13</flashplayer.version.swf>
   <sourceFile>org/htulipe/MyApp.mxml</sourceFile>          
</configuration> 
```

以下是我声明 Flash 依赖项的方式：

```
<dependencies>
    <dependency>
        <groupId>com.adobe.flex.framework</groupId>
        <artifactId>flex-framework</artifactId>
        <version>${flex.sdk.version}</version>
        <type>pom</type>
        <exclusions> 
            <exclusion> 
                <groupId>com.adobe.flex.framework</groupId> 
                <artifactId>playerglobal</artifactId> 
            </exclusion> 
        </exclusions>
    </dependency>

    <dependency> 
        <groupId>com.adobe.flex.framework</groupId> 
        <artifactId>playerglobal</artifactId> 
        <version>${flex.sdk.version}</version>
        <classifier>${flex.player.version.major}.${flex.player.version.minor}</classifier>
        <type>swc</type>
    </dependency> 

    <dependency>
        <groupId>com.adobe.flexunit</groupId>
        <artifactId>flexunit</artifactId>
        <version>4.0-rc-1</version>
        <type>swc</type>
        <scope>test</scope>
    </dependency>
</dependencies> 
```

希望它可能会有所帮助。另外，我建议不要将 iKnowWhatImDoingPleaseBreakMyBuildIwontBlameFlexmojosForStopWorking 选项设置为 true。该选项的名称非常雄辩。:)

# blackberry - Sencha Touch：非触控黑莓支持

> ID：11616875
> 
> 赞同：2
> 
> 时间：2012-07-23T16:48:32.793
> 
> 标签：blackberry, extjs, sencha-touch-2, blackberry-webworks

1.  在非触摸黑莓设备（如 Bold）上部署简单的 Sencha Touch 2 应用程序时，webfield 显示的内容高度约为 6 像素，而不是 100% 高度。该线程提供了一个解决方案： [http](http://www.sencha.com/forum/showthread.php?151188-Blackberry-Webworks-Issues) ://www.sencha.com/forum/showthread.php?151188-Blackberry-Webworks-Issues 但是，当我添加代码时，没有任何改变。问题：如何解决这个问题？ ![看起来像这样](../Images/9d89c86c5de58c3d2acaf38fab29a294.png)

2.  在 sencha 应用程序中禁用鼠标光标并启用非触摸 BB 设备的默认导航样式。这里提供了一个解决方案：[http](http://resilientcoder.blogspot.co.il/2011/03/getting-sencha-touch-to-work-on-non.html) ://resilientcoder.blogspot.co.il/2011/03/getting-sencha-touch-to-work-on-non.html不幸的是，看起来它是为 sencha touch 1 编写的，不是 2\. 问：有没有更好的解决方案？如果没有，我如何在 sencha touch 的商业版本中使用这个解决方案（他提到他的解决方案只适用于开源版本）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T02:01:36.197

（今天早上看到你的邮件）

回到OP，

1.  我们通过使用以下代码解决了这个问题。[与来源](http://www.sencha.com/forum/showthread.php?151188-Blackberry-Webworks-Issues)相同的概念。我们让我们的项目在 Blackberry Bold 9790（设备）上运行，但不是任何模拟器，因为当我们向文件系统写入内容时它会崩溃。

    ```
    (function() {
        // Define a blackberry viewport
        Ext.define('Ext.viewport.Blackberry', {
            extend: 'Ext.viewport.Default',
            constructor: function (config) {

                // Blackberry does not like height: 100%   
                this.superclass.config.height = this.getWindowHeight() + 'px';
                this.callParent([config]);
                return this;
            },    
            getWindowHeight: function () {
                //Don't know why need to deduct by 120?!
                return window.innerHeight-120;             
            }
        });

        // Insert a new Blackberry specific viewport
        Ext.override(Ext.viewport.Viewport, {
            constructor: function (config) {
                return Ext.create('Ext.viewport.Blackberry', config);
            }
        });

    })(); 
    ```

    然后，您可以创建任何组件并提供`fullscreen: true`. 它应该占据整个视口。

2.  我们已经在 BBOS 7+ 和 Sencha Touch 2 上开发了一个类似的应用程序，但是我们放弃了[Sencha Touch 团队自己所说的让非触控设备工作的想法，这就是为什么 Sencha Touch 被称为 Sencha **TOUCH**](http://www.sencha.com/forum/showthread.php?119572-SenchaTouch-for-non-touch-phones-like-BlackBerry-Curve&p=573507&viewfull=1#post573507)并且他们赢了' t 支持非触摸式移动设备。

    这是相当可怕的。我们无法让它在非触摸设备上工作，所以最后我们放弃了对非触摸设备的支持。我不能告诉你我们的方法是什么，因为我不记得这个问题的确切细节。粗略地说，我`sencha-touch-all-debug`在欺骗 Sencha 时搞砸了，该代码在桌面上运行以模拟点击，但触控设备将无法工作，因为无法将触控识别为点击。我会说与事件调度有关。我们花了将近一周的时间来解决这个问题，但最终还是放弃了。至今没有解决办法。我们只是将其保留在触摸设备上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T16:00:17.703

最后，@ [http://www.sencha.com/forum/showthread.php?151188-Blackberry-Webworks-Issues](http://www.sencha.com/forum/showthread.php?151188-Blackberry-Webworks-Issues)提出的解决方案适用于屏幕尺寸问题。

我只需要将代码块添加到我的项目的 sdk 视口文件夹（并添加 Blackberry.js 文件）。

关于我的第二个问题，看起来没有解决方案（如莱昂内尔所写）

# objective-c - 在objective-c类中访问c++数据成员

> ID：11616876
> 
> 赞同：1
> 
> 时间：2012-07-23T16:48:34.120
> 
> 标签：objective-c, objective-c++

我想做的很简单，但我可能语法错误。

我有一个带有`Note class`参数的 Objective-C 接口。Note.h 是一个 C++ 类，基本上看起来像这样：

```
#include <string>
using namespace std;

class Note {
public:
    string name;
    Note(string name){
        this->name = name; // ERROR: Cannot find interface declaration for 'Note'
    }

}; 
```

这是我使用 Note 的控制器。我将文件扩展名更改为 .mm

```
@class Note;
@interface InstrumentGridViewController : UIViewController {
@public
    Note* note;
}
@property (nonatomic, retain) Note* note; 
```

这就是我使用它的方式：

```
@implementation InstrumentGridViewController
@synthesize note;

- (void)buttonPressed:(id)sender {
    note = Note("fa"); // ERROR: Cannot convert 'Note' to 'Note*' in assignment
    NSLog(@"naam van de noot is %s", note->name); // ERROR: Cannot find interface declaration for 'Note'
} 
```

我收到了这三个错误（我已将它们作为注释添加到正确的行中）

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:59:23.670

您需要`Note`使用以下方式分配对象`new`：

```
- (void)buttonPressed:(id)sender
{
    if (note != 0)
        delete note;
    note = new Note("fa");
    NSLog(@"naam van de noot is %s", note->name.c_str());
} 
```

但是，在按钮按下操作方法中这样做似乎不正确......

也不要忘记`delete`在你的对象的`dealloc`方法中：

```
- (void)dealloc
{
    delete note;
    [super dealloc];
} 
```

最后，您的`@property`属性`retain`是错误的，因为它不是 Objective-C 对象；而是使用`assign`并更好地制作它`readonly`。

初始化大多数对象的更好方法是使用`const`对它们的引用而不是副本：

```
Note(const string &name)
{
    this->name = name;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:07:21.640

您的 Note C++ 类无效。将其声明改为：

```
class Note {
public:
    string name;
    Note(string aName) {
        name = aName;
    }
}; 
```

还要改变你的`InstrumentGridViewController`：

```
- (void)buttonPressed:(id)sender {
    note = new Note("fa");
    NSLog(@"naam van de noot is %s", note->name);
}

- (void)dealloc {
    delete note;
    [super dealloc];    // Use this only if not using ARC
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T19:36:15.480

该`Cannot find interface declaration for 'Note'`错误是由于`@class Note`我`Obj-C controller .h file.`的It's奇怪引起的，因为我有一个正在`@class`使用的工作示例项目并且它工作正常。

我使用前向声明修复了它，就像[这里](https://stackoverflow.com/questions/5920855/objective-c-and-objective-c)和[这里描述的那样。](http://www.iphonewarroom.com/2011/08/how-to-mix-objective-cm-and-ccpp-code.html)

```
// used typedef struct <classname> <classname>
typedef struct Note Note;

// instead of
@class Note 
```

以上内容位于 Obj-C 头文件中。在 .mm 文件中`#import "Note.h"`声明

# java - primefaces 多文件上传仅更新树表并上传第一个文件

> ID：11616877
> 
> 赞同：0
> 
> 时间：2012-07-23T16:48:34.773
> 
> 标签：java, jsf, jsf-2, primefaces

我有一个带有多个文件上传组件的树表。如果我上传 1 个文件，它会使用该文件正确更新我的树表。

如果我尝试同时上传多个文件（比如说文件 1 和文件 2），它只会用文件 1 更新树表。如果我然后上传另一个文件（文件 3），它会用文件 1、文件 2 更新树表，和 file3 所以这似乎是更新的问题。

有没有人对此有任何见解或知道这是否是一个错误？

```
<h:form id="attachmentsForm" enctype="multipart/form-data">
    <p:treeTable value="#{contentEditorBacking.attachments}" var="node">
        <p:column>
            <f:facet name="header">Name</f:facet>
            <h:outputLink value="#{node.link}" target="_blank" disabled="#{node.disabled}">
                <h:outputText value="#{node.displayName}"/>
            </h:outputLink>
        </p:column>

        <p:column>
            <f:facet name="header">Size</f:facet>
            <h:outputText value="#{node.size}" />
        </p:column>

        <p:column>
            <f:facet name="header">Modified By</f:facet>
            <h:outputText value="#{node.modifier}" />
        </p:column>

        <p:column>
            <f:facet name="header">Delete</f:facet>
            <p:commandLink styleClass="ui-icon ui-icon-trash" id="deleteProperty" actionListener="#{contentEditorBacking.deleteAttachment}" 
                    rendered="#{node.canDelete}" update="attachmentsForm">
                    <f:attribute name="filename" value="#{node.displayName}" />
                </p:commandLink>
        </p:column>
    </p:treeTable>
    &nbsp;&nbsp;
    <p:fileUpload fileUploadListener="#{contentEditorBacking.handleFileUpload}"
        mode="advanced" sizeLimit="#{contentEditorBacking.fileSizeLimit}"
        invalidSizeMessage="#{contentEditorBacking.fileSizeMessage}"
        allowTypes="#{contentEditorBacking.allowedFileTypes}" update=":controlTabs:attachmentsForm" />
</h:form> 
```

支持者

```
public void handleFileUpload(FileUploadEvent event) throws Exception{

        UploadedFile toSave = event.getFile();
        System.out.println("fileName = "+event.getFile());  
        String fileName = toSave.getFileName();
        String downloadLink = "";
        Long size = event.getFile().getSize();
        long version = 1;
        User user = cm.getUser();
        String creator = user.getUserName();
        Date modDate = new Date();
        boolean canDelete = true;
        boolean canUpdate = true;
        String displayName = fileName + "- pending";

        new DefaultTreeNode(new Attachment(downloadLink,size,version,creator,modDate,canDelete,canUpdate,displayName,true), attachRoot);
        addNeedToSaveMessage();
    } 
```

**编辑**

我向 treeTable 添加了一个 id，并将我的 fileUpload 更新更改为 treeTable 的 id 而不是表单标签的 id，然后解决了我的问题。

我一直认为通过更新一个父元素，它应该更新它的所有子元素。这不是真的还是在树表中有例外？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:20:35.350

显然对于文件上传组件，我不得不更新实际的树表而不是它的父表单标签。

# c - 以下用“C”编写的代码的输出是什么？

> ID：11616879
> 
> 赞同：0
> 
> 时间：2012-07-23T16:48:42.573
> 
> 标签：c

```
#include<stdio.h>
void main()
{
 char ***p="hello";
 printf("%c",++*p++);
} 
```

我不明白为什么 (*) 间接运算符在这里使用了 3 次。

当我编译这个程序时**，输出是 "j"**。但实际上听说p是指向字符数组的指针的指针。那为什么我得到输出为j。我不明白这背后的逻辑是什么。请帮助我理解这背后的实际逻辑。

当我只使用**一个间接运算符**并编译程序时，混乱会增加更多。然后**输出是 i** .means

```
void main()
{
 char *p="hello";
 printf("%c",++*p++);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:49:38.613

该代码没有有意义的 C 代码输出。该代码根本无效。

首先，`void main`不是`main`C 中函数的有效声明。`main`必须声明为返回`int`。

其次，`char ***p="hello"`初始化无效。字符串字面量`char *`在 C 中衰减为具有类型。 type 的值`char *`不能用于初始化 type 的对象`char ***`。

第三，取消引用`char ***`指针会产生一个 type 的指针值`char **`，它不能用格式说明符`printf`-ed 。`%c`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T17:05:34.490

首先，这是一种未定义的行为。

其次，它也不是正确的 C（或 C++）代码。由于非常量字符指针，它会生成此警告。

```
3.c: In function 'main':
3.c:5:12: warning: initialization from incompatible pointer type [enabled by default]
  char ***p="hello";
            ^ 
```

最好这样做：

```
#include <stdio.h>

int main()
{
    const char ***p="hello";
    printf("%c",++*p++);

    return 0;
} 
```

**关于它打印**的内容：程序已请求运行时以不寻常的方式终止它。但这是一种未定义的行为 - 您的结果可能会有所不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T18:27:13.827

您不明白为什么使用多重间接的原因是因为多重间接在这里没有意义；这只是这段代码中的众多问题之一。

`"hello"`是字符串字面量，它也是一个数组表达式，特别是“6 元素数组`char`”，在这种情况下被转换（“衰减”）为指向`char`; `p` *应*声明为

```
char *p = "hello"; 
```

该表达式`++*p++`尝试增加事物`p`指向的值（在本例中为字符`h`），并作为副作用前进`p`以指向下一个字符。修改字符串文字的行为是*未定义*的；根据平台的不同，字符串文字可能不可写，并且表达式`++*p++`可能会导致访问冲突。

以下是上述程序的更正版本，它给出了预期的结果：

```
#include <stdio.h>

int main(void)
{
  char h[] = "hello";
  char *p = h;
  printf("%c\n", ++*p++);
  return 0;
} 
```

我们没有指向字符串文字，而是`p`让它指向一个本地缓冲区，该缓冲区已使用字符串文字的*内容*进行了初始化。

# css - Rails：如何使用自定义 CSS 设置提交标签的样式

> ID：11616887
> 
> 赞同：6
> 
> 时间：2012-07-23T16:49:12.647
> 
> 标签：css, ruby-on-rails

下面的代码根据一些 css（“按钮”）创建一个表单并设置“提交”按钮的样式。问题是，当页面呈现时，它会在自定义的“按钮”css*顶部显示正常的 rails 提交标签按钮。*如何在提交表单的同时静音或禁用 rails 提交标签按钮的视觉方面？

```
=form_tag new_site_url, :method => :get do
  =text_field_tag :homepage,'', type: "text", class: 'text'
  %button
    =submit_tag "GO!" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T16:55:55.920

你能这样做吗：

```
=form_tag new_site_url, :method => :get do
  =text_field_tag :homepage,'', type: "text", class: 'text'
  =submit_tag "GO!", class: 'button' 
```

并设置按钮的css样式？

最好这样做：

```
=form_tag new_site_url, :method => :get do |f|
  =f.text_field '', type: "text", class: 'text'
  =f.submit "GO!", class: 'button' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-07T20:04:05.447

另一种方法是（rails 4.1）

```
<%= submit_tag("Submit", :class => "btn btn-warning" ) %> 
```

您可以在这里找到答案[http://api.rubyonrails.org/](http://api.rubyonrails.org/)

如果你在 form_for 工作，你会做

```
<%= f.submit("Submit", class: "btn btn-default" ) %> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-04T17:28:56.720

我正在使用老派 ruby​​(1.8.7) 和 rails(2.3.5)

这是我的提交标签对于自定义 CSS 样式的外观：

```
<%= submit_tag("Edit", :style => "width:30px;") %> 
```

其中“编辑”是按钮上显示的文本，“宽度：30px;” 是我的造型。您还可以级联样式：

```
<%= submit_tag("Edit", :style => "width:30px;color:blue;") %> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-09T09:10:01.180

您可以将样式键添加到哈希

```
<p><%= submit_tag l(:button_apply), :class => 'btn btn-default btn-sm', :name => 'submit', :style => 'margin-left: 42px' %></p> 
```

# ejabberd - 来自服务器的 Ejabberd 消息确认

> ID：11616892
> 
> 赞同：3
> 
> 时间：2012-07-23T16:49:29.483
> 
> 标签：ejabberd

我已经使用我的小型移动应用聊天程序设置并实现了 ejabberd 服务器。还为消息传递状态实现了 XEP-184。

但是我遇到了一个问题，我的应用程序如何知道我的消息是否确实已到达 ejabberd 服务器？

我的场景：我走进一个连接信号较弱的区域，信号勉强足以保持连接活跃，但经常超时。我试图发送一条消息，我怎么可能确认消息是否到达服务器？

希望我对我的问题足够清楚。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-06T07:18:00.450

我为此编写了一个 ejabberd mod，您可以在以下位置找到：

[https://github.com/kmtsar/ejabberd-mods](https://github.com/kmtsar/ejabberd-mods)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T08:55:34.600

一种可能的方法是实施[XEP-0198 Stream Management](http://xmpp.org/extensions/xep-0198.html)。流管理是最新 ejabberd 版本中的标准功能。

有了这个，客户端可以要求服务器保留收到的节的计数，并在感兴趣时要求服务器确认收到的节的数量。

然后，客户可以了解是否收到了一个或多个节。

这可以对每个单独的节进行：客户端要求对最后发送的节进行 ack，并期望来自服务器的 ACK。

理论上，您可以只实现“基本确认方案”——不需要完整的 XEP（包括流恢复）。

# c# - 如何将昨天的日期分配给参数C#

> ID：11616894
> 
> 赞同：3
> 
> 时间：2012-07-23T16:49:36.630
> 
> 标签：c#, sql-server, datetime, sql-server-2000

我有一个 C# 程序，它将作为 Windows 计划任务运行。该程序将加载、运行 SQL 查询、通过电子邮件发送存储在数据集中的结果，然后关闭。除了使用昨天的日期，我什么都有。

这是我当前的查询：

```
SELECT        Store_Id, Paid_Out_Amount, Paid_Out_Comment, Paid_Out_Datetime, Update_UserName, Till_Number, @startdate AS Start, @enddate AS Today
FROM            Paid_Out_Tb
WHERE        (Store_Id = 1929) AND (Paid_Out_Datetime BETWEEN @startdate AND @enddate) 
```

显然我需要在查询时分配@startdate 和@enddate。因为我需要 12AM 到 1159PM 这就是开始和结束的原因。举个例子。如果我今天想运行该程序，它将在昨天（23 日）进行搜索，因此 @startdate 将被分配 7/22/12 00:00:00 并且 @enddate 将被分配 7/22/12 23:59:59.. .

在查询而不是程序中这样做更有意义吗？如果是这样，我将如何更改查询？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T16:54:05.220

对现有答案的轻微改进，总是可以*从*昨天开始，而不必调用`DateTime`构造函数。

```
var todayStart = DateTime.Today;
var yesterdayStart = todayStart.AddDays(-1);
var yesterdayEnd = todayStart.AddSeconds(-1); // Ick... 
```

请注意，这将使用当前系统时区来表示“今天”的含义——你确定这是你想要的吗？您不妨考虑使用：

```
var todayUtcStart = DateTime.UtcNow.Date;
... 
```

`BETWEEN`将终点视为包容性是一种耻辱- 如果它相当于

```
start <= value && value < end 
```

那么你可以只给出两个午夜值，这会更清楚。

另请注意，虽然它不会使与数据库的交互变得更干净，但对于日期和时间的*其他*用途，您可能希望考虑我的[Noda Time](http://noda-time.googlecode.com)库，它包含一个专门用于表示*日期*的数据类型（另一个用于“时间of day") 等。*目的*当然是使用日期和时间来阐明代码。如果没有，我就失败了！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T16:52:09.780

您可以在 C# 中计算昨天的开始：

```
var yesterday = DateTime.Now.AddDays(-1);
var startOfYesterday = new DateTime(yesterday.Year, yesterday.Day, yesterday.Month);
com.Parameters.AddWithValue("@enddate", startOfYesterday); 
```

如果您使用的是 SQL Server 2008+，则可以将数据类型从 更改`datetime`为`date`. 后者只能存储日期，因此您不必担心日期时间部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T17:03:06.623

`between`在处理日期间隔时不要使用。`>=`使用起来更容易、更安全`<`。

像这样的东西会给你昨天没有参数的东西。

```
SELECT Store_Id, Paid_Out_Amount, Paid_Out_Comment, Paid_Out_Datetime, Update_UserName, Till_Number, @startdate AS Start, @enddate AS Today
FROM   Paid_Out_Tb
WHERE  Store_Id = 1929 AND 
       Paid_Out_Datetime >= dateadd(day, datediff(day, 0, getdate())-1, 0) and
       Paid_Out_Datetime < dateadd(day, datediff(day, 0, getdate()), 0) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T16:51:59.187

我假设你们都在寻找这种方式

```
DateTime yesterdDaysDateTime = DateTime.Now.AddDays(-1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T16:53:55.793

您应该始终使用参数化查询。

为了支持您正在寻找的内容，您可以将昨天的日期放入一个变量中并将该变量传递给您的参数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T17:01:00.807

这也可能有效，但存在性能缺陷：

```
 DateTime yesterday = DateTime.Today;
 Thread.Sleep(1000 * 60 * 60 * 24); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-23T17:04:04.923

您也可以在 SQL 中执行此操作：

```
SELECT Store_Id, Paid_Out_Amount, Paid_Out_Comment, 
        Paid_Out_Datetime, Update_UserName, Till_Number, @startdate AS Start, @enddate AS Today
FROM            Paid_Out_Tb
WHERE        (Store_Id = 1929) 
AND (Paid_Out_Datetime BETWEEN DATEADD(dd, 0, DATEDIFF(dd, 0, GETDATE())) 
    AND dateadd(second, -1, DATEADD(dd, 1, DATEDIFF(dd, 0, GETDATE())))) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-23T17:08:42.230

如果您想输入查询本身：

```
select (date_trunc('day', NOW()) - INTERVAL '1 day'); -- Yesterday Start
select (date_trunc('day', NOW()) - INTERVAL '1 second'); -- Yesterday End 
```

# clone - 如何使用克隆的 jQuery 对象为 div 内容中的每个 id 属性添加增量值

> ID：11616897
> 
> 赞同：1
> 
> 时间：2012-07-23T16:49:45.270
> 
> 标签：clone, jquery, jquery-click-event

很难弄清楚如何使用克隆的 jQuery 对象为 div 内容中的每个 id 属性添加增量值。

[http://jsfiddle.net/hvK8d/](http://jsfiddle.net/hvK8d/)

====================== HTML======================

```
 <div class="upload-file-container">
  <div class="uploadFile left clearfix">
    <input type="file" id="FileUpload1">
    <table id="RadioButtonList1">
      <tbody>
        <tr>
          <td><input type="radio" value="Resume"  id="RadioButtonList1_1">
            <label for="RadioButtonList1_1">Resume</label></td>
          <td><input type="radio" value="Letter of Recommendation"  id="RadioButtonList1_2">
            <label for="RadioButtonList1_2">Letter of Recommendation</label></td>
          <td><input type="radio" value="Other"  id="RadioButtonList1_3">
            <label for="RadioButtonList1_3">Other</label></td>
        </tr>
      </tbody>
    </table>
  </div>
  <a href="javascript:;" class="remove left">Remove</a> </div>
<div class=""><a class="plus" href="javascript:;">plus one</a></div> 
```

=====================JQUERY =====================

```
 //Cloning upload file control
$('.remove').live('click', function () {
    if (confirm("Are you sure you wish to remove this item?")) {
        $(this).parent().slideUp('fast', function () {
            $(this).remove();
        });
    }
    return false;
});

$('.plus').click(function () {
    console.log('cloning');
    var divCloned = $('.upload-file-container:first').clone();
    divCloned.hide().insertAfter('.upload-file-container:last').slideDown('fast');
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T17:49:07.563

为了完整起见，我将在这里放置一个使用“模板”的小解决方案。

用于隐藏模板的类：

```
.upload-file-container.template {
  display: none;
}  ​ 
```

做替换的一个小功能：

```
$.fn.template = function(variables) {
  return this.each(function() {
    this.innerHTML = this.innerHTML.replace(/{{(.+)}}/g, function(match, variable) {
      return variables[variable];
    });
    return this;
  });
}; 
```

一个模板：

```
<div class="upload-file-container template">
  <div class="uploadFile left clearfix">
    <input type="file" id="FileUpload{{id}}">
    <table id="RadioButtonList{{id}}"><tbody>
      <tr>
        <td>
          <input type="radio" value="Resume"  id="RadioButtonList{{id}}_1">
          <label for="RadioButtonList{{id}}_1">Resume</label>
        </td>
      </tr>
    </tbody></table>
  </div>
</div> 
```

用法：

```
var count = 0;

var divCloned = $(".upload-file-container.template")
  .clone()
  .removeClass("template")
  .template({
    id: count++
  }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T17:05:19.930

您应该`RadioButtonList[]`在属性中使用类似数组的表示法（例如 ），而不是使用编号的 ID，`name`并将标签包裹在`input`s 周围：

```
<td>
    <label for="RadioButtonList1_1">
        <input type="radio" value="Resume" name="RadioButtonList1[]">
        Resume
    </label>
</td>
<td>
    <label for="RadioButtonList1_2">
        <input type="radio" value="Letter of Recommendation" name="RadioButtonList2[]">
        Letter of Recommendation
    </label>
</td>
<td>
    <label for="RadioButtonList1_3">
        <input type="radio" value="Other" name="RadioButtonList3[]">
        Other
    </label>
</td> 
```

**PS**您还应该考虑使用比*RadioButtonList*更具描述性的名称。

# java - 我的实体没有持久化，但我可以很好地从数据库中读取

> ID：11616899
> 
> 赞同：3
> 
> 时间：2012-07-23T16:49:50.857
> 
> 标签：java, spring, hibernate, transient

我刚刚更新到 Hibernate 4.1.5 和 Spring 3.1.2（从 2.6ish 和 2.5 或其他东西......）。我已经设法将所有内容设置为从现有数据库中读取，并且所有页面都显示正常，但是在提交数据时没有任何内容被持久化到数据库中。我已将日志记录设置为跟踪级别以尝试跟踪此问题，并且事务归结为从我的日志中提取的以下 15 行：

```
DEBUG - org.hibernate.internal.SessionImpl - SessionImpl                    - Opened session at timestamp: 13430582784
TRACE - org.hibernate.internal.SessionImpl - SessionImpl                    - Setting flush mode to: AUTO
TRACE - org.hibernate.internal.SessionImpl - SessionImpl                    - Setting cache mode to: NORMAL
TRACE - org.hibernate.event.internal.AbstractSaveEventListener - AbstractSaveEventListener      - Transient instance of: ic.entities.MyEntity
TRACE - org.hibernate.event.internal.DefaultPersistEventListener - DefaultPersistEventListener    - Saving transient instance
TRACE - org.hibernate.event.internal.AbstractSaveEventListener - AbstractSaveEventListener      - Saving [ic.entities.MyEntity#<null>]
TRACE - org.hibernate.engine.spi.ActionQueue - ActionQueue                    - Adding an EntityIdentityInsertAction for [ic.entities.MyEntity] object
TRACE - org.hibernate.engine.spi.ActionQueue - ActionQueue                    - Adding insert with no non-nullable, transient entities: [EntityIdentityInsertAction[ic.entities.MyEntity#<delayed:0>]]
TRACE - org.hibernate.engine.spi.ActionQueue - ActionQueue                    - Adding resolved non-early insert action.
TRACE - org.hibernate.action.internal.UnresolvedEntityInsertActions - UnresolvedEntityInsertActions  - No unresolved entity inserts that depended on [[ic.entities.MyEntity#<delayed:0>]]
TRACE - org.hibernate.action.internal.UnresolvedEntityInsertActions - UnresolvedEntityInsertActions  - No entity insert actions have non-nullable, transient entity dependencies.
TRACE - org.hibernate.internal.SessionImpl - SessionImpl                    - Closing session
TRACE - org.hibernate.engine.jdbc.internal.LogicalConnectionImpl - LogicalConnectionImpl          - Closing logical connection
TRACE - org.hibernate.engine.jdbc.internal.JdbcResourceRegistryImpl - JdbcResourceRegistryImpl       - Closing JDBC container [org.hibernate.engine.jdbc.internal.JdbcResourceRegistryImpl@def577d]
TRACE - org.hibernate.engine.jdbc.internal.LogicalConnectionImpl - LogicalConnectionImpl          - Logical connection closed 
```

我首先注意到它会创建一条日志消息：正在保存 [ic.entities.MyEntity#< null>]。但是手动单步执行代码表明这是在 id 生成之前发生的，所以我想它应该看起来像这样......我起初以为第 10 和 11 行是错误的，但在单步执行代码之后似乎这些是唯一不会引发异常的有效代码路径，但可以看出会话关闭并且没有保存任何条目......任何帮助将不胜感激！

我使用以下代码：

**我的服务.java**

```
package ic.services;

import ic.entities.MyEntity;

import java.util.List;

public abstract class MyService extends BasicService<MyEntity>
{
    protected MyService()
    {
        super(MyEntity.class);
    }

    public abstract List<MyEntity> getAllByQuery(String query);
} 
```

**基本服务.java**

```
package ic.services;

import java.io.Serializable;
import java.util.List;

import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.persistence.Query;

public abstract class BasicService<T extends Serializable>
{
    @PersistenceContext protected EntityManager em;
    private final Class<T> entityClass;

    protected BasicService(Class<T> entityClass)
    {
        this.entityClass = entityClass;
    }

    public T getEntity(Object primaryKey)
    {
        return em.find(entityClass, primaryKey);
    }

    public void persist(T entity)
    {
        em.persist(entity);
    }

    public void delete(T entity)
    {
        em.remove(entity);
    }
} 
```

**我的实体.java**

```
package ic.entities;

import java.util.Date;

import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity 
@Table
public class MyEntity implements Serializable
{
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    private String notes;
    private Date submittedDate;
    private boolean enabled;

    public Long getId()
    {
        return id;
    }

    public void setId(Long id)
    {
        this.id = id;
    }

    public Date getSubmittedDate()
    {
        return submittedDate;
    }

    public void setSubmittedDate(Date submittedDate)
    {
        this.submittedDate = submittedDate;
    }

    public String getNotes()
    {
        return notes;
    }

    public void setNotes(String notes)
    {
        this.notes = notes;
    }

    public boolean isEnabled()
    {
        return enabled;
    }

    public void setEnabled(boolean enabled)
    {
        this.enabled = enabled;
    }

    @Override
    public boolean equals(Object obj) 
    {
        if(obj instanceof MyEntity)
        {
            MyEntity rhs = (MyEntity)obj;
            return rhs.id == this.id;
        }
        return false;
    }

    @Override
    public int hashCode()
    {
        return Long.valueOf(id).hashCode();
    }
} 
```

并称之为：

```
@SpringBean MyService myService; //(Using wicket @Springbean)
...
MyEntity entity = new MyEntity();
entity.setEnabled(true);
entity.setNotes("blah");
entity.setSubmittedDate(new Date());
myService.persist(entity); 
```

我有 web.xml 作为：

```
<context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:applicationContext.xml</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <filter>
        <filter-name>OpenEntityManagerFilter</filter-name>
        <filter-class>org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>OpenEntityManagerFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping> 
```

最后在 applicationContext.xml 中：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
           http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
           http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"></bean>

    <tx:annotation-driven/>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <context:annotation-config />
    <context:component-scan base-package="ic.services" />
</beans> 
```

同样，任何帮助都会很棒。我敢肯定，这对我来说一定是一件非常愚蠢的事情！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T18:27:11.550

尝试将 @Transactional 添加到您的持久服务方法中。

# android - Adobe AIR：屏幕一直变暗，即使启用了 KEEP_AWAKE

> ID：11616901
> 
> 赞同：2
> 
> 时间：2012-07-23T16:50:10.203
> 
> 标签：android, air

在开发适用于 Android 的应用程序（在 AS3 中，导出到 Air 3.2）时，我注意到即使我的代码行（应该）让设备保持唤醒状态也无法正常工作。

```
NativeApplication.nativeApplication.systemIdleMode = SystemIdleMode.KEEP_AWAKE; 
```

我在我的应用程序的构造函数中使用了这一行，但屏幕在大约 60 秒后一直变暗。有没有办法防止应用变暗？在我设置的超时后手机没有锁定，所以我想它可以部分工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T00:16:40.460

我的猜测是您没有足够的权限。确保您在应用的 XML 文件中启用了这些权限：

```
<uses-permission android:name="android.permission.WAKE_LOCK"/>
<uses-permission android:name="android.permission.DISABLE_KEYGUARD"/> 
```

# gwt - GWT DockLayoutPanel 空白页

> ID：11616902
> 
> 赞同：0
> 
> 时间：2012-07-23T16:50:11.327
> 
> 标签：gwt, errai

我正在尝试在 Jboss-erai 应用程序中使用 DockLayoutPanel。我的入口点类：

```
@EntryPoint
public class Application {

private Caller<UserService> userService;

private Label registerConfirmMessage;

@AfterInitialization
public void createUI() {

    DockLayoutPanel p = new DockLayoutPanel(Unit.EM);
    p.addNorth(new HTML("header"), 2);
    p.addSouth(new HTML("footer"), 2);
    p.addWest(new HTML("navigation"), 10);
    p.add(new HTML("content"));
    RootLayoutPanel.get().add(p);
} 
```

我的 Application.gwt.xml：

```
<!DOCTYPE module PUBLIC "-//Google Inc.//DTD Google Web Toolkit 2.4//EN"
    "http://google-web-toolkit.googlecode.com/svn/releases/2.4/distro-source/core/src/gwt-module.dtd">

<!-- GWT module definition: the rename-to attribute is used to have a shorter 
module name that doesn't reflect the actual package structure. -->
<module>
 <inherits name="org.jboss.errai.common.ErraiCommon" />
 <inherits name="org.jboss.errai.bus.ErraiBus" />
 <inherits name="org.jboss.errai.ioc.Container" />
 <inherits name="org.jboss.errai.enterprise.CDI" />
 <inherits name="org.hibernate.validator.HibernateValidator" />

 <source path="client" />   
 <source path="shared" />
</module> 
```

更改 DOCTYPE 时检测到不同的结果。所以：

在 IE6 中，它适用于任一 doctype

```
<!DOCTYPE HTML> 
```

Mozilla Firefox 14、Chrome 中的空白页

```
<!DOCTYPE> 
```

FF14 中的空白页，但在 Chrome 中有效。

所有其他文档类型都会导致空白页。

建议我请正确的解决方案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:41:33.270

从文档中：

> 此小部件仅在标准模式下工作，这要求运行它的 HTML 页面具有显式声明。

这意味着：

1.浏览器需要在标准模式下运行，而不是在怪癖模式下。

2.在你的 HTML 文件的开头你应该有这个：

```
<!doctype html>
<!-- The DOCTYPE declaration above will set the     -->
<!-- browser's rendering engine into                -->
<!-- "Standards Mode". Replacing this declaration   -->
<!-- with a "Quirks Mode" doctype is not supported. --> 
```

doctype 在应用程序启动的 HTML 页面中定义。

而不是 gwt.xml

另请查看下面的链接，它描述了 gwt 项目的组织方式：

[https://developers.google.com/web-toolkit/doc/latest/DevGuideOrganizingProjects](https://developers.google.com/web-toolkit/doc/latest/DevGuideOrganizingProjects)

# google-apps-script - 在 Google Apps Script Web App 中嵌入 Google 电子表格

> ID：11616905
> 
> 赞同：1
> 
> 时间：2012-07-23T16:50:25.867
> 
> 标签：google-apps-script

我正在使用 Google Apps Script 开发一个网络应用程序，我从网络中获取一些 JSON 结果。我想将这些结果显示为嵌入到 Web 应用程序本身屏幕中的一个面板中的小型电子表格。

这个想法是做这样的事情：

```
var verPanel = app.createVerticalPanel(); 
verPanel.add(some_spreadsheet); 
```

有什么办法可以直接在 UI 元素中嵌入电子表格对象？

非常感谢！

迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T16:57:10.007

目前这是不可能的。

# javascript - Ext.getCmp('panel') 给出 this.el 为 null 或不是对象

> ID：11616907
> 
> 赞同：1
> 
> 时间：2012-07-23T16:50:32.747
> 
> 标签：javascript, extjs4, extjs3

我有一个边框布局，我必须在其中展开和折叠东部区域以获得某些视图，屏幕在开始时工作正常，但是当您单击浏览器的刷新按钮并且如果东部区域折叠时，那么您得到了东部区域崩溃了，根据我的理解，这不应该发生，因为每次刷新时都会从头开始执行 extJS 代码，因此东部区域在刷新后必须可见。

为了使每次用户刷新时东部区域都扩大，我尝试了以下操作

```
 Ext.getCmp('center_panel').add({
        id: 'center_panel_container',
        layout: 'border',
        defaults: {
        'border': true
        },    
        items:[{
           id : 'header_panel',
           layout: 'fit',
           region: 'north',
           height: 30,
           items: [tbar]
        },{
           id: 'master_panel',
           layout: 'fit',
           region: 'center',
           width: '60%',
           bodyStyle:{"background-color":"white"},
           autoScroll: true,
           items: [panelLeft,panelLeftSchd,panelLeftStartUp]
        }, {
           id: 'report_panel',
           layout: 'fit',
           region: 'east',
           width : '40%',
           split:true,
           autoScroll: true,
           items: [panelRight,  panelRightStartUp]
    }]   
 });
        Ext.getCmp('report_panel').expand(true); 
```

但我收到以下错误**this.el is null or not an object**。

每次用户点击刷新时如何使东部区域扩大

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T16:56:31.167

发生这种情况是因为`Ext.getCmp('report_panel')`在您尝试调用其 expand 方法时未呈现。`setTimeout`那是因为 Ext-JS在布局组件时有时会使用 a 。最简单的解决方案是等待渲染事件并从该处理程序调用扩展

```
{
       id: 'report_panel',
       layout: 'fit',
       region: 'east',
       width : '40%',
       split:true,
       autoScroll: true,
       items: [panelRight,  panelRightStartUp],
       listeners: {
           render: function(panel) {
              panel.expand()
           }
       }
} 
```

您也可以等待`afterlayout`父容器的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:09:16.490

拆分器倾向于记住它的状态，因此在刷新时拆分器将自己设置为它在上一个会话中的位置，以便让它忘记他的状态，请执行以下操作

```
{
       id: 'report_panel',
       layout: 'fit',
       region: 'east',
       width : '40%',
       split:true,
       **stateful : false,**
       autoScroll: true,
       items: [panelRight,  panelRightStartUp]
} 
```

# c# - kentico IE '网页已过期'

> ID：11616910
> 
> 赞同：0
> 
> 时间：2012-07-23T16:50:38.433
> 
> 标签：c#, internet-explorer, kentico

我有一个 Kentico C# 站点，并且正在使用 Visual Web Developer 2008 Express Edition。

我有一个搜索表单并且它工作正常，但是当用户点击一个搜索结果项目时，他们会被带到一个新页面（假设会发生），然后当他们点击 IE 中的后退按钮时，它会将我带到一个页面说“网页已过期”，但当用户在此过期页面上单击刷新时，带有搜索表单和搜索结果的页面会返回。

我的问题是我如何得到它，所以当用户点击返回时，它会将他们带到带有搜索表单和搜索结果的页面，而不是显示“网页已过期”的页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:07:36.990

CacheControl 中响应的值是多少？您是否尝试过在响应中使用私有的、必须重新验证的？做一些研究，我还找到了下面的链接，我认为它可能会对你有所帮助。

[论坛一](http://forums.asp.net/t/1664698.aspx/1)

[论坛2](http://forums.asp.net/t/1277815.aspx)

此外，一位用户报告说，通过以下方式设置缓存会有所帮助：

```
 Response.Cache.SetCacheability(HttpCacheability.Private);

    Response.Cache.SetRevalidation(HttpCacheRevalidation.AllCaches);

    Response.Cache.SetExpires((DateTime.Now).AddDays(1));

    Response.Cache.SetValidUntilExpires(false); 
```

我们在 devnet.kentico.com 上的论坛比 stackoverflow 更频繁；）

问候，鲍里斯·波卡特科，肯蒂科

# xmpp - XMPP 波什 vs SignalR

> ID：11616917
> 
> 赞同：5
> 
> 时间：2012-07-23T16:51:30.997
> 
> 标签：xmpp, signalr

XMPP 是否比 SignalR 更有优势？他们都使用 http 长轮询机制，我无法决定是使用 XMPP 进行聊天应用还是使用 SignalR 并将所有内容保留在我的 IIS 服务器上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T08:13:56.653

SignalR 使用多种传输，请参阅此处的说明[SignalR 如何在内部工作？](https://stackoverflow.com/questions/7807066/how-signalr-works-internally). XMPP 的优点是更多的其他客户端可以开箱即用（gchat、pidgin 等）。但是，如果您愿意，您可以将两者都用于您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-17T21:53:20.060

SignalR 有很多实时通信方式。网络套接字！！你没听说过吗？SignalR 仅在您的旧计算机上没有其他可用时才使用长池。

# jquery - 向此下拉代码添加 jquery 效果

> ID：11616918
> 
> 赞同：0
> 
> 时间：2012-07-23T16:51:33.147
> 
> 标签：jquery, css, drop-down-menu

我有这个工作正常的下拉代码，它做了一个简单的显示。但是，我想添加一个简单的jQuery 效果，比如slideDown。我将如何添加它？

```
var timeout    = 500;
var closetimer = 0;
var ddmenuitem = 0;

function jsddm_open()
{  jsddm_canceltimer();
   jsddm_close();
ddmenuitem = $(this).find('ul').css('visibility', 'visible');}

function jsddm_close()
{  if(ddmenuitem) ddmenuitem.css('visibility', 'hidden');}

function jsddm_timer()
{  closetimer = window.setTimeout(jsddm_close, timeout);}

function jsddm_canceltimer()
{  if(closetimer)
{  window.clearTimeout(closetimer);
   closetimer = null;}}

$(document).ready(function()
{  $('#jsddm > li').bind('mouseover', jsddm_open)
   $('#jsddm > li').bind('mouseout',  jsddm_timer)});

document.onclick = jsddm_close; 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T16:56:30.450

将您的 jsddm_open 和 jsddm_close 函数替换为以下内容：对于 [速度]，您可以使用“慢”、“快”、“正常”或毫秒数来获得效果。

```
function jsddm_open()
{
    jsddm_canceltimer();
    jsddm_close();
    ddmenuitem = $(this).find('ul').show([speed],[callback]);
}

function jsddm_close()
{
    if(ddmenuitem)
        ddmenuitem.hide([speed]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T16:53:38.423

试试这个：

```
var timeout    = 500;
var closetimer = 0;
var ddmenuitem = 0;

function jsddm_open()
{  jsddm_canceltimer();
   jsddm_close();
ddmenuitem = $(this).find('ul').slideDown();}

function jsddm_close()
{  if(ddmenuitem) ddmenuitem.slideUp();}

function jsddm_timer()
{  closetimer = window.setTimeout(jsddm_close, timeout);}

function jsddm_canceltimer()
{  if(closetimer)
{  window.clearTimeout(closetimer);
   closetimer = null;}}

$(document).ready(function()
{  $('#jsddm > li').bind('mouseover', jsddm_open)
   $('#jsddm > li').bind('mouseout',  jsddm_timer)});

document.onclick = jsddm_close; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T16:53:53.840

如何更改此行：

```
ddmenuitem = $(this).find('ul').css('visibility', 'visible'); 
```

像这样：

```
ddmenuitem = $(this).find('ul').fadeIn('slow'); 
```

以及这一行：

```
if(ddmenuitem) ddmenuitem.css('visibility', 'hidden'); 
```

像这样：

```
if(ddmenuitem) ddmenuitem.fadeOut('slow'); 
```

fadeIn 和 fadeOut 可以更改为您想要的任何效果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T16:54:18.743

尝试更改这两个功能：

```
function jsddm_open()
{  jsddm_canceltimer();
   jsddm_close();
ddmenuitem = $(this).find('ul').slideDown();}

function jsddm_close()
{  if(ddmenuitem) ddmenuitem.slideUp();} 
```

# list - 带有居中徽标的导航

> ID：11616921
> 
> 赞同：0
> 
> 时间：2012-07-23T16:51:50.250
> 
> 标签：list, menu, navigation, center, graphical-logo

我正在使用动态内容 (WordPress)，并希望将徽标置于列表中间，例如： http: [//www.munto.net/queed-v1/](http://www.munto.net/queed-v1/)。

我对其进行了测试，并且我的理论有效，前提是两侧的项目数量相同......但如果它们不同，它会扰乱导航。

[您可以在http://joshrodgers.com/](http://joshrodgers.com/)上看到一个活生生的例子。

我所做的是将我的徽标作为背景图像并将其居中到我的无序列表，然后我在每个列表项上设置一个宽度（这样如果有一个超长的就不会弄乱导航），最后在第三个链接之后，我在列表项的右侧放置了 200 像素的边距（这样徽标上就没有列表项）......但是就像我说的那样，如果项目数量是偶数，这将非常有效，如果项目等于奇数，它看起来很有趣。

不知道最好的方法是什么，所以 - 解决这个问题的最佳方法是什么？

页面代码：

```
<html>
    <head>
        <title>Josh Rodgers - El Paso, Texas</title>
        <link rel="stylesheet" type="text/css" href="style.css" />
    </head>

    <body>
        <ul>
            <li>Home</li>
            <li>About Us</li>
            <li class="example">super new lodge</li>
            <li>Programs</li>
            <li>Events</li>
            <li>Contact Us</li>
           <li>Contact Us</li>
        </ul>
    </body>
</html> 
```

CSS 样式：

```
/* Reset */
@import url("reset.css");

body {
    margin: 0 auto;
    position: relative;
    width: 1000px;
}

ul {
    background: #ff0000 url("images/example.jpg") top center no-repeat;
    height: 200px;
    margin: 0 auto;
    text-align: center;
    width: 1000px;
}

li {
    background: #ffff00;
    color: #ff0000;
    display: inline-block;
    font-size: 20px;
    padding: 20px 0;
    position: relative;
    top: 70px;
    width: 100px;
}

li.example {
    margin-right: 200px;
} 
```

*在将其集成到 WordPress 之前，我想我会在一个普通的 php 解决方案上工作。

谢谢，乔什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:53:42.810

从设计的角度来看，我可能会考虑将徽标作为主页链接。许多网络用户习惯于单击徽标并将其带回家。您仍然可以在徽标下方合并主页文本。

我可能不会使用您的 margin-right: 200px 方法来不覆盖徽标，您在该列表项之前更改的任何内容都会移动边距。

最终，我建议重新考虑将徽标设置为背景图像并将其作为列表项之一。

# android - 以编程方式启用 GPS 不起作用

> ID：11616931
> 
> 赞同：0
> 
> 时间：2012-07-23T16:52:17.970
> 
> 标签：android, gps

我正在尝试通过单击按钮在我的应用程序中以编程方式启用/禁用（切换）GPS，但它不起作用。请帮忙。我的目标设备没有植根。

这是我正在使用的代码。

```
private void gps()
{
Intent intent=new Intent("android.location.GPS_ENABLED_CHANGE");
Button gps = (Button)findViewById(R.id.gpsButton);
if(isGPSon())
    {
    intent.putExtra("enabled", true);
    gps.setText(R.string.f2_gps_deact);
    }
else
    {
    intent.putExtra("enabled", false);
    gps.setText(R.string.f2_gps_act);
    }
sendBroadcast(intent); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T16:58:09.700

您不能以编程方式启用 GPS。您最多可以打开设置供用户执行此操作。

你可以这样做：

```
startActivityForResult(new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS), 100); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T16:56:53.640

> 我正在尝试通过单击按钮在我的应用程序中以编程方式启用/禁用（切换）GPS

由于明显的隐私原因，这在现代版本的 Android 上是不可能的。

> 但它不工作

Android SDK中没有任何`android.location.GPS_ENABLED_CHANGE`操作。内部使用了一个，但它只是宣布状态更改——它实际上并没有更改状态本身。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T17:48:43.317

您可以强制您的应用查看是否收到 GPS 信号。如果您没有收到信号，您可以进行选择对话框，以便用户可以选择进入设置并打开 gps。

```
// GPSTracker class
GPSTracker gps;

// CHECK GPS!
gps = new GPSTracker(YourActivityClass.this);
if (gps.canGetLocation()) {
} else {
    gps.showSettingsAlert();

        } 
```

然后新建一个类文件，把这段代码粘贴进去。。这段代码我没有写。我在某个地方找到它，不记得我从哪里得到它。

```
 import android.app.AlertDialog;
 import android.app.Service;
 import android.content.Context;
 import android.content.DialogInterface;
 import android.content.Intent;
 import android.location.Location;
 import android.location.LocationListener;
 import android.location.LocationManager;
 import android.os.Bundle;
 import android.os.IBinder;
 import android.provider.Settings;
 import android.util.Log;

 public class GPSTracker extends Service implements LocationListener {

private final Context mContext;

// flag for GPS status
boolean isGPSEnabled = false;

// flag for network status
boolean isNetworkEnabled = false;

// flag for GPS status
boolean canGetLocation = false;

Location location; // location
double latitude; // latitude
double longitude; // longitude

// The minimum distance to change Updates in meters
private static final long MIN_DISTANCE_CHANGE_FOR_UPDATES = 10; // 10 meters

// The minimum time between updates in milliseconds
private static final long MIN_TIME_BW_UPDATES = 1000 * 60 * 1; // 1 minute

// Declaring a Location Manager
protected LocationManager locationManager;

public GPSTracker(Context context) {
    this.mContext = context;
    getLocation();
}

public Location getLocation() {
    try {
        locationManager = (LocationManager) mContext
                .getSystemService(LOCATION_SERVICE);

        // getting GPS status
        isGPSEnabled = locationManager
                .isProviderEnabled(LocationManager.GPS_PROVIDER);

        // getting network status
        isNetworkEnabled = locationManager
                .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

        if (!isGPSEnabled || !isNetworkEnabled) {
            // no network provider is enabled
        } else {
            this.canGetLocation = true;
            // if GPS Enabled get lat/long using GPS Services
            if (isGPSEnabled) {
                locationManager.requestLocationUpdates(
                        LocationManager.GPS_PROVIDER, MIN_TIME_BW_UPDATES, MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                Log.d("GPS Enabled", "GPS Enabled");
                if (locationManager != null) {
                    location = locationManager
                            .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                    if (location != null) {
                        latitude = location.getLatitude();
                        longitude = location.getLongitude();
                    }
                }
            }
            if (isNetworkEnabled) {
                if (locationManager == null) {
                    locationManager.requestLocationUpdates(
                            LocationManager.NETWORK_PROVIDER, MIN_TIME_BW_UPDATES, MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                    Log.d("Network", "Network");
                    if (locationManager != null) {
                        location = locationManager
                                .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                        if (location != null) {
                            latitude = location.getLatitude();
                            longitude = location.getLongitude();
                        }
                    }
                }
            }
        }

    } catch (Exception e) {
        e.printStackTrace();
    }

    return location;
}

/**
 * Stop using GPS listener
 * Calling this function will stop using GPS in your app
 * */
public void stopUsingGPS(){
    if(locationManager != null){
        locationManager.removeUpdates(GPSTracker.this);
    }
}

/**
 * Function to get latitude
 * */
public double getLatitude(){
    if(location != null){
        latitude = location.getLatitude();
    }

    // return latitude
    return latitude;
}

/**
 * Function to get longitude
 * */
public double getLongitude(){
    if(location != null){
        longitude = location.getLongitude();
    }

    // return longitude
    return longitude;
}

/**
 * Function to check GPS/wifi enabled
 * @return boolean
 * */
public boolean canGetLocation() {
    return this.canGetLocation;
}

/**
 * Function to show settings alert dialog
 * On pressing Settings button will lauch Settings Options
 * */
public void showSettingsAlert(){
    AlertDialog.Builder alertDialog = new AlertDialog.Builder(mContext);

    // Setting Dialog Title
    alertDialog.setTitle("GPS settings");

    // Setting Dialog Message
    alertDialog.setMessage("GPS is not enabled. Do you want to go to settings menu?");

    // On pressing Settings button
    alertDialog.setPositiveButton("Settings", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog,int which) {
            Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
            mContext.startActivity(intent);
        }
    });

    // on pressing cancel button
    alertDialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
        dialog.cancel();
        }
    });

    // Showing Alert Message
    alertDialog.show();
}

@Override
public void onLocationChanged(Location location) {
}

@Override
public void onProviderDisabled(String provider) {
}

@Override
public void onProviderEnabled(String provider) {
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
}

@Override
public IBinder onBind(Intent arg0) {
    return null;
}
 } 
```

在我的应用程序中，我输入了共享首选项，以便用户可以决定是否要检查 gps。你可以这样做..

```
 SharedPreferences getData = PreferenceManager
            .getDefaultSharedPreferences(getBaseContext());
    String enableGPS = getData.getString("gps", "true");
    boolean enableGPSboolean = Boolean.parseBoolean(enableGPS);

    if (enableGPSboolean == (true)) {

        // CHECK GPS!
        // create class object
        gps = new GPSTracker(AddFish.this);

        if (gps.canGetLocation()) {

        } else {

            gps.showSettingsAlert();

        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T06:17:40.157

```
// location manager 
```

位置管理器位置管理器；位置监听器位置监听器；

obj_tgl_gps.setOnClickListener(new OnClickListener() {

```
 public void onClick(View v)
        {
            if (obj_tgl_gps.isChecked())
            {
                Intent intent = new Intent("android.location.GPS_ENABLED_CHANGE");
                intent.putExtra("enabled", true);
                sendBroadcast(intent);
            }
            else
            {
                Intent intent = new Intent("android.location.GPS_ENABLED_CHANGE");
                intent.putExtra("enabled", false);
                sendBroadcast(intent);
            }

        }
    }); 
```

# python - 如何将项目列表转换为python中的变量？

> ID：11616933
> 
> 赞同：3
> 
> 时间：2012-07-23T16:52:31.953
> 
> 标签：python, regex, list

我在 python 中有一个项目列表，如下所示：输入：

```
a=['nt','mt','pt'] 
```

我想将上面列表中的每个项目作为一个变量，然后将该变量分配给涉及该变量的正则表达式。

输出：我想要这样的东西：

```
nt=re.compile("%s=[a-z]+&" %nt)
mt=re.compile("%s=[a-z]+&" %mt)
pt=re.compile("%s=[a-z]+&" %pt) 
```

我该怎么做呢？？？谢谢。[抱歉没有以最好的方式提出问题]

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-23T16:54:17.310

[将数据保留在变量名之外。](http://nedbatchelder.com/blog/201112/keep_data_out_of_your_variable_names.html)不要使用变量，使用字典：

```
d = {name: re.compile("%s=[a-z]+&" % name) for name in a} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T17:28:42.303

毫无疑问最好使用字典键，而不是变量。但仅供参考，Python 中的变量实际上无论如何都存储在字典中，您可以通过调用`vars()`or来访问它`locals()`。这意味着*可以*通过分配给这个字典来动态创建变量，例如：

```
>>> new_var_name = 'my_var'
>>> vars()[new_var_name] = "I'm your new variable!"
>>> print my_var
"I'm your new variable!" 
```

老实说，我不知道篡改如何`vars()`是合理的。但这至少很有趣。无论如何，请使用 Sven Marnach 的答案。

# objective-c - 为什么 cocos2d 中 CCLayer 的声明奇怪？

> ID：11616937
> 
> 赞同：0
> 
> 时间：2012-07-23T16:52:48.220
> 
> 标签：objective-c, ios, cocos2d-iphone

我有一个 GameScene 类，在初始化期间我制作了一个场景并将一个孩子附加到它 - 一个层。我注意到它的奇怪代码：

```
 CCScene *scene = [CCScene node];
    CCLayer *layer = [GameScene node];
    [scene addChild:layer]; 
```

为什么不这样做呢？

```
CCLayer *layer = [CCLayer node]; 
```

这不会增加可读性，还是我在这里遗漏了一些基本的东西？另外，为什么不使用 alloc init 呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:22:28.020

```
[CCNode node]; 
```

是一个静态（类）方法。它会自动调用`[[[self alloc] init] autorelease];`

任何 CCNode 子类都可以使用这个静态初始化器进行初始化。它基本上是为了方便，实际上不需要。（虽然，就像我说的，很高兴拥有）。

类方法使用“+”号，实例方法使用“-”号。类方法类似于 Java 中的静态方法。可以在不创建该类的实例的情况下调用它们。它可能看起来像这样：`[YourClass doSomething]; //Doesn't need an instance of YourClass`

实例方法需要其类的实例才能运行。这看起来像：

```
YourClass *yClass = [[YourClass alloc] init];
[yClass doSomethingElse]; //Needs an instance of YourClass 
```

我没看过，但我认为该`node`方法看起来像这样：

```
+ (CCNode*)node {
    return [[[self alloc] init] autorelease];
} 
```

奇怪的声明只是返回一个场景（使用静态初始化程序初始化），其中您的自定义层作为子层，然后 CCDirector 可以使用和显示。

编辑：我觉得会增加清晰度。

奇怪的声明只是一个`+ (CCScene*)scene`返回场景的静态初始化程序。

# intellij-idea - 在 IntelliJ 中轻松切换到下一个参数

> ID：11616939
> 
> 赞同：5
> 
> 时间：2012-07-23T16:52:59.217
> 
> 标签：intellij-idea

假设您在一个带有两个参数的方法中，并且填充了第一个参数：

`foo("test",`

所以插入符号就在第二个“t”字母之后。在 Eclipse 中，可以在逗号之后进行 hit`Tab`和 caret 移动。Intellij IDEA 有这样的功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:03:05.190

请参阅相关问题：[IntelliJ 等效于 Eclipse TAB](https://stackoverflow.com/questions/8621006)并在 YouTrack 中[投票支持此功能。](http://youtrack.jetbrains.com/issue/IDEA-74666)

# c++ - 数组结构和结构数组 - 性能差异

> ID：11616941
> 
> 赞同：13
> 
> 时间：2012-07-23T16:53:00.117
> 
> 标签：c++, c, performance, caching, gcc

我有这样的课：

```
//Array of Structures
class Unit
{
  public:
    float v;
    float u;
    //And similarly many other variables of float type, upto 10-12 of them.
    void update()
    {
       v+=u;
       v=v*i*t;
       //And many other equations
    }
}; 
```

我创建了一个 Unit 类型的对象数组。并调用他们的更新。

```
int NUM_UNITS = 10000;
void ProcessUpdate()
{
  Unit *units = new Unit[NUM_UNITS];
  for(int i = 0; i < NUM_UNITS; i++)
  {
    units[i].update();
  }
} 
```

为了加快速度，并可能自动矢量化循环，我将 AoS 转换为数组结构。

```
//Structure of Arrays:
class Unit
{
  public:
  Unit(int NUM_UNITS)
  {
    v = new float[NUM_UNITS];
  }
  float *v;
  float *u;
  //Mnay other variables
  void update()
  {
    for(int i = 0; i < NUM_UNITS; i++)
    {
      v[i]+=u[i];
      //Many other equations
    }
  }
}; 
```

当循环无法自动矢量化时，数组结构的性能非常差。对于 50 个单元，SoA 的更新比 AoS 稍快。但是从 100 个单元开始，SoA 比 AoS 慢。在 300 个单位时，SoA 几乎差一倍。在 100K 单位时，SoA 比 AoS 慢 4 倍。虽然缓存可能是 SoA 的一个问题，但我没想到性能差异会如此之大。对 cachegrind 的分析显示两种方法的未命中次数相似。Unit 对象的大小为 48 字节。L1 缓存为 256K，L2 为 1MB，L3 为 8MB。我在这里想念什么？这真的是缓存问题吗？

**编辑：** 我正在使用 gcc 4.5.2。编译器选项是 -o3 -msse4 -ftree-vectorize。

我在 SoA 中做了另一个实验。我没有动态分配数组，而是在编译时分配了“v”和“u”。当有 100K 个单元时，这提供了比具有动态分配阵列的 SoA 快 10 倍的性能。这里发生了什么事？为什么静态分配的内存和动态分配的内存之间会有如此大的性能差异？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T16:56:59.060

在这种情况下，数组的结构对缓存不友好。

您同时使用两者`u`，`v`但如果它们有 2 个不同的阵列，它们将不会同时加载到一个缓存行中，并且缓存未命中将导致巨大的性能损失。

[`_mm_prefetch`](http://msdn.microsoft.com/en-us/library/84szxsww%28v=vs.100%29.aspx)可用于使`AoS`表示更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-02T18:23:48.360

对于大部分执行时间都在等待数据出现的代码来说，预取至关重要。现代前端总线具有足够的带宽，可以安全地进行预取，前提是您的程序不会超过其当前的负载集。

由于各种原因，结构和类可能会在 C++ 中产生许多性能问题，并且可能需要进行更多调整才能获得可接受的性能水平。当代码很大时，使用面向对象的编程。当数据很大（并且性能很重要）时，不要这样做。

```
float v[N];
float u[N];
    //And similarly many other variables of float type, up to 10-12 of them.
//Either using an inlined function or just adding this text in main()
       v[j] += u[j];
       v[j] = v[j] * i[j] * t[j]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-09T10:09:16.953

根据您的 CPU，您应该注意两件事可能会产生巨大的影响：

1.  结盟
2.  缓存行别名

由于您使用的是 SSE4，因此使用专门的内存分配函数返回在 16 字节边界对齐的地址而不是`new`可能会给您带来提升，因为您或编译器将能够使用对齐的加载和存储。我没有注意到较新的 CPU 有很大的不同，但是在较旧的 CPU 上使用未对齐的加载和存储可能会慢一些。

至于高速缓存行别名，英特尔在其参考手册中明确提及（搜索“英特尔® 64 和 IA-32 架构优化参考手册”）。英特尔表示您应该注意这一点，特别是在使用 SoA 时。因此，您可以尝试的一件事是填充您的数组，使其地址的低 6 位不同。这个想法是避免让它们争夺相同的缓存行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-08T11:49:03.130

当然，如果你没有实现矢量化，那么进行 SoA 转换的动力就没有多大了。

除了 __RESTRICT 在事实上被广泛接受之外，gcc 4.9 还采用`#pragma GCC ivdep`了打破假定的别名依赖关系。

至于显式预取的使用，如果它有用的话，当然你可能需要更多的SoA。主要的一点可能是通过提前获取页面来加速 DTLB 未命中解决，因此您的算法可能会变得更加需要缓存。

如果没有更多细节，包括关于你的操作系统的细节，我认为不能对你所谓的“编译时间”分配做出明智的评论。毫无疑问，高层次分配和重用分配的传统很重要。

# ruby-on-rails - 为自定义操作定义控制器似乎不起作用 Rails Admin

> ID：11616943
> 
> 赞同：2
> 
> 时间：2012-07-23T16:53:06.123
> 
> 标签：ruby-on-rails, rails-admin

嗨，大家好 ，

我在我的项目中实现了 rails admin 现在有几件事我目前坚持

1.  我想要一个链接（标记为发布者）在rails admin中我的用户控制器的列表视图中作为ajax链接使用**remote => true**在rails中完成的事情，然后为它编写相关的jscode和html代码

2.  对于上述自定义操作“ **mark_as_publisher** ”，我定义了这样的配置设置

    在**config/rails_admin.rb里面**

    ```
     config.actions do 

            # root actions
          dashboard                     # mandatory
          # collection actions 
          index                         # mandatory
          new
          export
          history_index
          bulk_delete
          # member actions
          show
          edit
          delete
          history_show
          show_in_app
          member :mark_as_publisher
     end 
    ```

    现在自定义动作的定义看起来像这样

    ```
    require "rails_admin_mark_as_publisher/engine"

    module RailsAdminMarkAsPublisher
    end

    require 'rails_admin/config/actions'

    module RailsAdmin
      module Config
        module Actions
          class MarkAsPublihser < Base
            RailsAdmin::Config::Actions.register(self)

            register_instance_option :collection do
              true
            end

            register_instance_option :http_methods do
              [:get,:post]
            end

            register_instance_option :route_fragment do
              'mark_as_publisher'
            end 

            register_instance_option :controller do
              Proc.new do
                binding.pry
                if request.get?
                  respond_to do |format|
                    format.html { render @action.template_name} 
                  end
                elsif request.post?
                  redirect_path = nil
                  if @object.update_attributes(:manager => true)
                    flash[:success] = t("admin.flash.successful", :name => @model_config.label, :action => t("admin.actions.mark_as_publisher.done"))
                    redirect_path = index_path
                  else
                    flash[:error] = t("admin.flash.error", :name => @model_config.label, :action => t("admin.actions.mark_as_publisher.done"))
                    redirect_path = back_or_index
                  end
                end  
              end
            end  
          end
        end
      end
    end 
    ```

现在**app/view/rails_admin/main/mark_as_publisher.erb**中相同定义的视图 看起来像这样

```
<%=  rails_admin_form_for @object, :url => mark_as_publisher_path(:model_name => @abstract_model.to_param, :id => @object.id), :as => @abstract_model.param_key,:method => :post ,:html => { :class => "form-horizontal denser", :data => { :title => "Mark" } } do |form| %>
  <%= form.submit "save" %>
<%end%> 
```

mark_as_publisher 的 get 和 post url 确实属于上面的控制器定义，保存上面的表单会导致错误调用

`could not find routes for '/user/5/mark_as_publisher' :method => "post"`

有没有人知道我错过了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-23T12:04:11.667

抱歉延迟回复，但我也遇到了完全相同的问题。

编辑：我注意到你已经有了这个，你试过重新启动你的服务器吗？

如果您添加以下内容，它将修复它。

```
 register_instance_option :http_methods do
      [:get,:post]
  end 
```

问题是默认情况下`Actions`只响应 :get 请求。

如果你跑

```
 rake routes 
```

你会看到一些类似的东西

```
 mark_as_publisher_path     GET     /:model_name/:id/mark_as_publisher(.:format)    rails_admin/main#mark_as_publisher 
```

[https://github.com/sferik/rails_admin/blob/master/lib/rails_admin/config/actions/base.rb#L89](https://github.com/sferik/rails_admin/blob/master/lib/rails_admin/config/actions/base.rb#L89)

# xml - 作为 CLIENT.ADDRESS.STATE 访问 XML 对象

> ID：11616948
> 
> 赞同：0
> 
> 时间：2012-07-23T16:53:37.947
> 
> 标签：xml, vb.net, visual-studio-2010, xml-parsing

```
CLIENT
  NAME
    FIRSTNAME
    LASTNAME
  ADDRESS
    ADD1
    ADD2
    CITY
    STATE
    ZIP 
```

想象一下 XML 文档中的上述内容（如果您尝试，这很容易......）

希望能够引用现在的 XML（或其他）对象：

CLIENT.NAME.FIRSTNAME = "LoriBeth"

这可能吗？从查看和使用 XML 对象来看，情况似乎并非如此。

# c# - 单击网格列时出现异常

> ID：11616950
> 
> 赞同：1
> 
> 时间：2012-07-23T16:53:38.407
> 
> 标签：c#, datagridview

我正在处理数据网格，并在 cellClick 事件上获取相关 texbox 上的数据以进行编辑。当我单击该行时，它可以正常工作，但是当我单击任何列时，它会给出异常，我不知道为什么。

这是我的代码：

```
private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
{
    itmId.Text = dataGridView1.Rows[e.RowIndex].Cells[0].Value.ToString();
    itmNme.Text = dataGridView1.Rows[e.RowIndex].Cells[1].Value.ToString();
    untCst.Text = dataGridView1.Rows[e.RowIndex].Cells[2].Value.ToString();
    qntty.Text = dataGridView1.Rows[e.RowIndex].Cells[3].Value.ToString();
    manfDate.Text = dataGridView1.Rows[e.RowIndex].Cells[4].Value.ToString();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T16:54:48.317

当您单击表格的标题时，它会发送 -1 的行索引。在其他情况下，此事件可以使用无效的 rowindex 和 columnindex 值触发。

在使用它们之前，您应该测试 rowindex 和 columnindex。

```
private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e) 
{ 
    if (e.RowIndex >= 0 && e.ColumnIndex >= 0) {
        // .. my code goes here ..
    }
} 
```

在某些情况下，您可能还需要测试 rowindex 和 columnindex 是否超出支持数据的限制。

# java - 如何将 blob 转换为 JSP 中显示的图像

> ID：11616955
> 
> 赞同：1
> 
> 时间：2012-07-23T16:54:00.900
> 
> 标签：java, jsp, blob

我正在尝试从数据库中检索图像。目前我能够展示：

```
 `com.mysql.jdbc.Blob@2aba2aba ` 
```

在我的jsp输出中。我可以知道如何将其转换为图像吗？

我用下面的来调出上面的

```
photo[i].getPhotoFileData(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T17:04:53.253

与您的 JSP 相比，HTML 文档的工作方式是一个更大的问题。您需要了解 HTML 不会直接嵌入图像。相反，它使用`<img>`标签来引用托管在不同 URL 上的图像。

为了在 HTML 页面上显示存储在数据库中的图像，您需要一个单独的 servlet 来处理对图像的请求。您的 JSP 应该呈现如下 HTML 文档：

```
<html>
  <head>
  ...
  </head>
  <body>
    ...
    <img src="www.mydomain.com/images/1234.png" />
    ...
  </body>
</html> 
```

然后，您将创建一个单独的 servlet 来处理对 /images 的所有请求，这将进行数据库调用并将原始字节从 blob 发送回响应的输出流。确保还根据您使用的图像编码正确设置 Content-Type 标头。

为了将图像发送回请求者，您有两个选项之一。您可以将 blob 的字节作为数组获取并将其写入 OutputStream（例如`out.write(blob.getBytes(0,blob.length());`）。或者您可以使用该`getBinaryStream()`方法，然后将字节从 InputStream 复制到 OutputStream。这是一个例子：

```
public static void copy(Blob from, OutputStream to)
    throws IOException {
  byte[] buf = new byte[4096];
  try(InputStream is = from.getBinaryStream()) {
    while (true) {
      int r = is.read(buf);
      if (r == -1) {
        break;
      }
      to.write(buf, 0, r);
    }
  }
} 
```

NB：这段代码没有经过测试甚至编译，它应该只是作为一个起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T18:26:36.073

You're getting a Blob object - not it's contents. If you want to get raw byte data you have to ask the Blob object for it, e.g.:

```
Blob blob =  photo[i].getPhotoFileData();
byte[] data = blob.getBytes(0, blob.length()); 
```

If you want to create an image on the fly, then just call:

```
BufferedImage img = ImageIO.read(new ByteArrayInputStream(data)); 
```

You can then save the image or ... actually I don't know what else. Thing. Stuff. Display it. Print. Limitless possibilities! Just like at zombo.com!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-20T12:29:28.653

首先将 blob 转换为输入流到 string 。然后使用该 String 而不是图像 URL 。

将 blob 转换为字符串

```
 try {
            Blob blob = staticOffer.getImage(); //blob of image from db
            strOut = new StringBuffer();
            String aux;
            BufferedReader br;

            br = new BufferedReader(new InputStreamReader(blob.getBinaryStream()));
            while ((aux=br.readLine())!=null) {
                strOut.append(aux);
            }
            offerPicStr = strOut.toString();

        } catch (Exception e) {
            e.printStackTrace();
        } 
```

现在以下列方式使用该字符串 html/jsp

```
<img src="data:image/jpeg;base64,${offerPicStr}" width="100" height="100"></img> 
```

# java - 更改 netbeans 提供的默认用户名和密码，并使用我在 tomcat-users.xml 中提到的用户名-密码组合

> ID：11616962
> 
> 赞同：0
> 
> 时间：2012-07-23T16:54:24.753
> 
> 标签：java, jakarta-ee, tomcat, netbeans

我从 netbeans启动*Tomcat 。*虽然我编辑了`tomcat-users.xml`tomcat的文件，但不接受用户名密码组合。Netbeans有它自己的。

![在此处输入图像描述](../Images/222e7ff2876dc60c2852a2bb15fe6a11.png)

有什么方法可以更改 netbeans 提供的默认用户名和密码，或者有什么方法可以使用我提到的用户名和密码`tomcat-users.xml`？

*（每当我覆盖密码或用户名时，它会在我重新启动 IDE 或下次检查时设置为初始值）*

是否有任何我需要更改的 netbeans 配置文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:07:38.790

NetBeans tomcat 用户名存储在文件 '.nbattr' 中，路径类似于 'your_home_folder.netbeans\7.1.1\config\J2EE\InstalledServers' ( `<attr name="username" stringvalue="tomcat"/>`)。

密码作为加密值存储在文件“win32.properties”中，路径类似于“your_home_folder.netbeans\7.1.1\config\Preferences\org\netbeans\modules\keyring”。

如果 NetBeans 不保存此值，则应检查写入权限。但我认为更好的是更正 'C:\Program Files\Apache Software Foundation\Apache Tomcat 7.0.22\conf\tomcat-users.xml' （在你的情况下）。首先，您必须添加下一行：

`</tomcat-users> tag: <user username="ide" password="...." roles="manager-script"/>`

# asp.net - ASP.NET 中的 Request.Headers["Header-Name"] 是否区分大小写？

> ID：11616964
> 
> 赞同：27
> 
> 时间：2012-07-23T16:54:33.743
> 
> 标签：asp.net, http-headers

在 ASP.NET 中是否`Request.Headers["Header-Name"]`区分大小写？如果是这样，如果我不确定客户端会将它发送到什么情况下，我应该如何获得某个标头（例如“X-requested-with”）？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-23T17:02:39.980

[不，根据RFC2616](http://www.ietf.org/rfc/rfc2616.txt)，它们不区分大小写

> 4.2 消息头
> 
> HTTP 标头字段，包括 general-header（第 4.5 节）、
> request-header（第 5.3 节）、response-header（第 6.2 节）和
> entity-header（第 7.1 节）字段，遵循与第 7.1 节中给出的相同的通用格式RFC 822 [9] 的 3.1。每个标头字段由
> 一个名称后跟一个冒号（“：”）和字段值组成。字段名称
> ***不区分大小写***。字段值可以在任意数量
> 的 LWS 之前，但最好使用单个 SP。
> 通过在每个额外行之前
> 至少使用一个 SP 或 HT ，可以将标题字段扩展到多行。应用程序在生成 HTTP 结构时应该遵循“通用形式”，其中一种是已知的或指示的，因为
> 可能存在一些无法接受任何内容的实现

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-23T17:01:50.423

`Request.Headers`不区分大小写。

借用[这个答案](https://stackoverflow.com/a/5259004/55153)：

> 来自[RFC 2616](http://www.ietf.org/rfc/rfc2616.txt)，“超文本传输​​协议 -- HTTP/1.1”，§4.2，“消息头”：
> 
> > 每个标头字段由一个名称后跟一个冒号（“：”）和字段值组成。字段名称不区分大小写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T17:09:56.973

我从未使用过 ASP.NET，但 RFC HTTP/1.1 定义[消息头](http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.2)字段名不区分大小写。

如果 ASP.NET 遵循 HTTP 规范，Request.Header["Header-Name"] 将返回与 Request.Header["header-name"] 相同的值。

# wordpress - Wordpress 不读取嵌入代码

> ID：11616965
> 
> 赞同：1
> 
> 时间：2012-07-23T16:54:40.537
> 
> 标签：wordpress, plugins

我安装了这个插件 (http://wordpress.org/extend/plugins/advanced-responsive-video-embedder/screenshots/) 以使我的 wordpress 网站上的视频大小响应。

但是，我遇到了问题。当我将这样的嵌入代码“[youtube id=vrXgLhkv21Y mode=normal]”放在 wordpress 附带的默认文本小部件上时，没有任何反应，代码像文本一样显示在网站上。

这可能是插件的问题，还是我的 wordpress 网站没有阅读此标签？插件冲突？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:05:32.920

默认情况下，短代码在小部件中不起作用。但是，您可以通过将以下内容添加到`functions.php`文件中来为小部件添加短代码功能。

```
add_filter('widget_text', 'do_shortcode'); 
```

然后，您应该能够在 WordPress 的默认文本小部件中使用简码。

# java - 关于jar文件的创建

> ID：11616966
> 
> 赞同：0
> 
> 时间：2012-07-23T16:54:40.777
> 
> 标签：java

我想通过 windows 中的命令窗口创建一个 jar 文件。我观察到您必须`jar`在 System PATH 变量中包含命令。`"jar"`如果它没有抛出错误，您可以通过在命令提示符中键入来检查它`"jar is not recognized as an internal or external command"`。就我而言，它正在引发错误。为此需要设置什么路径变量？有什么开源软件可以创建jar吗？请指教。

```
javin@localhost:~/Java jar -cvf HelloWorld.jar 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:59:18.043

`jar`是创建 jar 的开源二进制文件...它包含在所有 java JDK 中。

你还需要什么？

嗨，M。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T16:59:58.327

该`jar`命令是创建`jar`文件的程序，您无需查找其他程序。

如果`jar`在命令行键入命令时出现错误，该错误会提示您缺少或错误的内容。您可以使用此信息[以及 jar 命令的说明](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/jar.html)来修复问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T16:58:03.203

看看[这个](http://docs.oracle.com/javase/tutorial/deployment/jar/build.html)。它展示了如何制作一个罐子。我怀疑您可能没有设置 JAVA_HOME 环境变量，或者它不在您使用的用户路径上。[这](https://confluence.atlassian.com/display/DOC/Setting+the+JAVA_HOME+Variable+in+Windows)描述了如何在 windows 中设置它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T17:08:35.467

`jar`可执行文件将位于 jdk 安装目录的 bin 目录中。将其添加到您的中`$PATH`，它应该可以工作。

# javascript - 具有多行的 HTML 文本区域 onClick 和 onBlur 函数

> ID：11616976
> 
> 赞同：3
> 
> 时间：2012-07-23T16:55:30.493
> 
> 标签：javascript, html, onclick, textarea, onblur

我有一个文本区域，我将一些默认文本放入其中。假设默认的 textarea 文本是“在此处插入文本”。

我正在使用 JavaScript onClick 和 onBlur 函数来制作它，以便当用户单击带有“在此处插入文本”的文本区域时。消息，该消息将消失并由一个空格代替。如果 textarea 为空白并且用户单击它，则 textarea 将再次显示“在此处插入文本”。信息。这是我的这个过程的代码：

```
<textarea onclick="if(this.value=='Insert Text Here.'){this.value=''}" onblur="if(this.value==''){this.value='Insert Text Here.'}">Insert Text Here.</textarea> 
```

这段代码工作得很好。当“在此处插入文本”时会出现问题。替换为由多行组成的内容。例如：

```
<? $textarea = "Line 1\n\nLine 2"; ?>
<textarea onclick="if(this.value=='<? echo $textarea ?>'){this.value=''}" onblur="if(this.value==''){this.value=<? echo $textarea ?>'}"><? echo $textarea ?></textarea> 
```

在这种情况下，onClick 和 onBlur 命令被破坏，因为两个 textarea 标记之间的 $textarea 值与 onClick 和 onBlur 方法中使用的 $textarea 值之间存在不等式。两个标签之间的 $textarea 值为：

```
Line 1

Line 2 
```

而 onBlur 和 onClick 方法中 $textarea 的值是：

```
Line 1\n\nLine 2 
```

显然，这两者是不平等的。

我知道问题是什么，但我不知道如何解决它。我尝试用其他替代方法替换 \n，但问题归结为在标签之间处理 \n 的事实，而它没有在 onBlur 和 onClick 方法中注册为换行符。

有没有人有任何想法来解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T17:03:02.033

为 textarea 的标题赋予相同的默认值

```
 <?php $textarea = "Line 1\n\nLine 2"; ?>
  <textarea onclick="if(this.value==this.title){this.value=''}" onblur="if(this.value==''){this.value=this.title}" title="<?php echo $textarea ?>"><?php echo $textarea ?></textarea> 
```

这种方法有很多优点：

每次您将鼠标悬停在文本区域上时，它都会在此处显示 INSERT TEXT，这也被 facebook 使用

# windows - 定期回调调度

> ID：11616977
> 
> 赞同：0
> 
> 时间：2012-07-23T16:55:42.720
> 
> 标签：windows, kernel

我正在寻找一种在 NT 内核中以常规频率（比如 1hz）安排回调函数的方法。是否有任何框架支持？我在其中一篇文章中读到可以使用计时器对象，但我没有找到任何示例或此用例的任何文档。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T17:39:41.840

您正在寻找 Windows API 中的[`SetTimer`函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644906.aspx)。它允许您传递回调函数指针。

请注意，您必须有一个有效的 Windows 消息泵才能使此函数工作 - 回调作为消息处理的一部分发生。操作系统不只是中断你的程序并跳转到回调函数。

# ffmpeg - MP4 的实时转码和流式传输在 Android 中有效，但在 Flash 播放器中失败并出现 NetStream.Play.FileStructureInvalid 错误

> ID：11616979
> 
> 赞同：3
> 
> 时间：2012-07-23T16:55:47.053
> 
> 标签：ffmpeg, flash, live-streaming

最近我的任务是使用 ffmpeg 作为转码和流媒体工具。任务是将文件从给定格式转换为 MP4，并通过从标准输出中捕获它立即流式传输。到目前为止，一切都很好。流媒体与 android 标签的本机播放器以及 VLC 播放器配合得很好。问题出在 Flash 播放器上。它给出了以下错误：

> NetStream.Play.FileStructureInvalid ：Adobe Flash 无法导入具有无效文件结构的文件。

使用的 ffmpeg 标志是

```
$ ffmpeg -loglevel quiet -i somefile.avi -vbsf h264_mp4toannexb -vcodec libx264 \
-acodec aac -f MP4 -movflags frag_keyframe+empty_moov -re - 2>&1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:26:56.937

如[文档中所述`-movflags`](http://ffmpeg.org/ffmpeg.html#MOV_002fMP4_002fISMV)

> mov/mp4/ismv 多路复用器支持分片。`qt-faststart`通常，MOV/MP4 文件将所有数据包的所有元数据存储在一个位置（写在文件末尾，可以使用该工具将其移至开头以便更好地播放）。分片文件由许多片段组成，其中数据包和有关这些数据包的元数据存储在一起。写入碎片文件的优点是即使写入中断，文件也可解码（而普通的 MOV/MP4 如果没有正确完成，则无法解码），并且在写入非常长的文件时需要更少的内存（因为写入普通的 MOV /MP4 文件将有关每个数据包的信息存储在内存中，直到文件关闭）。 **缺点是它与其他应用程序的兼容性较差。**

要么切换到可以处理碎片 MP4 文件的 Flash 播放器，要么使用更好地支持流式传输的不同容器格式。

^(此外，`-re`它是一个仅输入选项，因此在输入之前而不是在输出之前指定它会更有意义。)

# javascript - JS：将控制台输出推送到客户端的最快方式

> ID：11616980
> 
> 赞同：1
> 
> 时间：2012-07-23T16:55:52.157
> 
> 标签：javascript, websocket, push, long-polling, faye

我目前正在创建一个实时在线 Web 控制台，它从 Bash 获取输出并将其显示在 PHP 驱动的 HTML 页面上。目前，我正在使用获取页面的全部内容并将DIV的内容替换为获取页面的内容的方法，这种方法非常低效，并且想知道如何更有效地做到这一点，例如WebSockets、Faye 或长轮询。

我可以将 Bash 输出发送给客户端的最快方法是什么？如果您认为我应该使用需要服务器端安装的东西，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T17:41:58.220

如果这对您的项目很重要，WebSockets 将为您提供比 AJAX/长轮询请求显着降低的延迟。

[websockify](https://github.com/kanaka/websockify)包含一个 telnet 示例（免责声明：我制作了 websockify）。Websockify 是 websocket 和 TCP 套接字之间的桥梁。您也许可以从中使用一些想法。特别是，如果您想要实现的不仅仅是显示原始文本，您可能需要查看该示例中包含的 Javascript 终端仿真器代码。

# python - 我应该使用什么来代替 django-sorl 已弃用的 ImageWithThumbnailsField？

> ID：11616994
> 
> 赞同：0
> 
> 时间：2012-07-23T16:56:43.273
> 
> 标签：python, django, sorl-thumbnail

我正在为似乎已弃用的 ImageWithThumbnailsField 苦苦挣扎。我应该改用什么？我不想重写我的项目的大部分，因为我只做轻微的错误修复和更新......

我得到的错误：

> 文件“/var/www/project/images/models.py”，第 6 行，从 sorl.thumbnail.fields 导入 ImageWithThumbnailsField ImportError：无法导入名称 ImageWithThumbnailsField

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T17:01:10.023

那一定是您使用的 sorl-thumbnail 的旧版本*。*我不确定该字段实际上为您做了什么，但现在您所拥有的只是`ImageField`. 如果您更改或删除它，它会自动更新缩略图注册表，并在管理中的表单字段旁边添加分配图像的缩略图。

如果您缺少任何其他功能，最好实际询问您可以针对该特定功能做什么。

# objective-c - 将所有属性的值从一个objective-c对象复制到另一个

> ID：11616999
> 
> 赞同：1
> 
> 时间：2012-07-23T16:56:58.610
> 
> 标签：objective-c, attributes

有时`copy`在某些类中没有实现，例如 in `UILabel`。一种解决方法是创建另一个对象并使用原始对象的属性值填充它。

[对于 C#](https://stackoverflow.com/a/2624847/641514)，我从 Jon Skeet 和 Marc Gravell 中找到了 MiscUtil 库，它提供了一个名为`PropertyCopy`.

在Objective-C中是否有一种等效（优雅）的方法来复制实例变量的值？

目前我正在手动进行

```
myobject.attr1 = otherOBject.attr1;
myobject.attr2 = otherOBject.attr2;
... 
```

但这很乏味且容易出错。