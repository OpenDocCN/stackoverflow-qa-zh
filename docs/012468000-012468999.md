# StackOverflow 问答 12468000-12468999

# c++ - C++在链表中插入和删除字符

> ID：12468003
> 
> 赞同：-1
> 
> 时间：2012-09-17T22:33:21.773
> 
> 标签：c++

我的问题是我试图根据用户在 int h 给出的特定位置的输入将一个字母插入到链表中......但是每次我运行程序时，只有列表中的第二个字符会发生变化，而不管用户放入程序的号码。

```
Example: 
 ./h
 Name: koala
 a<-l<-a<-o<-k
 Change the position: 2
 To the character: 3
 a<-l<-3<-o<-k
 Insert the Character: F
 To the Postion: 3
 a<-F<-l<-3<-o<-k 
```

我希望它看起来像。

```
 ./h
 Name: koala
 a<-l<-a<-o<-k
 Change the position: 2
 To the character: 3
 a<-l<-3<-o<-k
 Insert the Character: F
 To the Postion: 3
 a<-l<-3<-F<-o<-k 
```

我知道我的问题出在我的 list.cpp 中的 insert_char() 函数中，但就是不知道我做错了什么......

列表.h

```
#include <iostream>
using namespace std;
struct Node;
Node* new_list();
void insert_front(Node** plist,char x);
void insert_char(Node* plist, char x, int p);
void change_char(Node* plist, char x, int p);
void print_list(Node* list);
void delete_front(Node** plist);
void delete_list(Node** plist);
//void delete_char(Node* plist,int p);
struct Node {
  char x;
  Node *next;
}; 
```

主文件

```
struct Node {
  char x;
  Node *next;
};

int main(){
  Node *list;
  list = new_list(); //new empty list
  cout<<"Name: ";
  string name;
  cin>> name;
  for (int i =0; i < name.length(); i++)
  insert_front(&list, name[i]);
  //---------print list-------------------------
  print_list(list);
  cout <<"Change the position: ";
  int z;
  cin>> z;
  cout<< "To the character: " ;
  char x;
  cin>> x;
  change_char(list, x, z);
  print_list(list);
  cout <<"Insert the Character: ";
  char y;
  cin>> y;
  cout<< "To the Postion: ";
  int h;
  cin>> h;
  insert_char(list, y, h);
  print_list(list);
  return 0;
} 
```

列表.cpp

```
Node* new_list()
{
  Node* list = 0; //in C++ it is better to use 0 than NULL
  return list;
}
void insert_front(Node** plist,char x){
  Node* t;
  t = new Node;
  t->x = x;
  t->next = *plist;
  *plist = t;
  return;
}
void change_char(Node* plist, char x, int p)
{
  Node* s = plist;
  for (int i=1; i<p && 0!=s;i++)
    s = s->next;
  if (0 != s)
    s->x = x;
  return;
}
void insert_char(Node* plist, char x, int p){
  Node* s = plist;
  Node* a = new Node();
  for (int i=1; i<p && s; i++)
    a->next=s->next;
    s->next=a;
  if (0 !=s)
    a->x=x;
  return;
}

//void delete_char(Node* plist,int p)
void print_list(Node* list){
  Node* p;
  p = list;
  if(p == 0)
    cout << "--- empty list ---" << endl;
  while(p !=0){
    cout << p->x<<"<-";
    p = p->next;
  }
  cout << endl;
}
void delete_front(Node** plist){
  Node* t;
  if( *plist != 0){   // list is not empty
    t = (*plist);
    *plist = (*plist)->next;
    delete t;
  }
  }
void delete_list(Node** plist){
  while(*plist != 0) //while list not empty
    delete_front(plist);
}
bool is_empty(Node* list){
  return (list == 0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T22:59:16.990

for 循环`insert_char`只是一遍又一遍地“插入”字符。我认为您的意思是前进`s`到插入的起点（由 确定`h`）。

**更新：**

这部分是错误的，原因如下：

```
for (int i=1; i<p && s; i++)
  a->next=s->next;
  s->next=a; 
```

请注意，缩进具有误导性。由于您没有大括号，因此只有中间线是循环的一部分。实际上，你已经写了：

```
for (int i=1; i<p && s; i++) {
  a->next=s->next;
}
s->next=a; 
```

就个人而言，我总是在块上使用大括号，即使它们只包含一个语句。

因此，您设置`a->next`了一堆时间，而不是前进到您想要去的列表中的点。

您需要在循环中前进到您想要新元素的位置，然后进行实际插入。

```
// Advance s to index p.
for (int i = 1; i < p && s->next; i++) {
  s = s->next;
}
// Insert a at s.
a->next = s->next;
s->next = a; 
```

# iphone - 将框架导入现有项目

> ID：12468012
> 
> 赞同：0
> 
> 时间：2012-09-17T22:34:32.390
> 
> 标签：iphone, ios, cocoa-touch, frameworks

我正在尝试将 Parse.com 的框架导入现有项目，但由于某种原因，我无法访问框架中包含的所有头文件。当我创建一个新项目时，我可以很好地访问所有框架的对象、方法和头文件。如果我将它添加到另一个我没有玩过太多的现有项目中，它也可以正常工作。

我可以对现有项目做些什么来使其无法正确导入框架/不让我使用所有标题？

我已经在这个项目上工作了一段时间，并添加了许多其他框架（MKStoreKit、SDWebImage）并弄乱了应用程序的设置，所以我不知道从哪里开始尝试追踪这个问题。

谢谢！

**编辑**

当我将文件夹复制到 Dropbox 时，该框架也完全可以从该文件中运行......这里会发生什么？当您将项目从一个位置复制到另一个位置时，什么不会被转移？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T22:44:51.220

为了使标头可用，必须构建框架以公开公共标头。如果您自己构建框架，请确保检查构建阶段并指定公共标头

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T03:15:37.743

奇怪的问题。这是一个回归基础的建议。对不起，如果它看起来很明显。

我建议从项目中删除框架，然后转到 finder 并确保项目文件夹中没有残留的文件或目录。

此外，如果您使用的是 git，请确保在 .gitignore 中没有将文件从项目目录中排除的参考

做一个干净的转变，cmd K

然后转到项目信息选项卡，然后是框架，然后按 + 键添加新框架，然后选择其他，然后选择您的解析框架。

那应该工作。

如果没有，请执行所有操作，然后关闭并重新启动 Xcode，然后重新打开您的项目并重试。

# wireshark - wireshark - 使用 Paralleles 桌面时嗅探两个 ups 之间的流量

> ID：12468015
> 
> 赞同：1
> 
> 时间：2012-09-17T22:34:46.013
> 
> 标签：wireshark

我的 Windows 正在使用并行的虚拟机中运行。它分配给 ip 192.168.0.116。我的 Mac 被分配到 ip 192.168.0.129。如果我使用过滤器

> http 和 ip.addr eq 192.168.0.116 我从 192.168.0.116 发送到 192.168.0.129 的 ping 没有显示，尽管它有效。

我应该改变什么，使用并行是否需要我选择一些特定的接口。Windows 正在使用通过 Wi-Fi（非共享网络）的桥接连接运行。

你有什么建议吗？

# javascript - 导航表单字段并使用箭头键编辑文本

> ID：12468018
> 
> 赞同：3
> 
> 时间：2012-09-17T22:35:02.453
> 
> 标签：javascript, javascript-events

我有一个网站形式的脚本，其中按回车键或向右箭头将焦点更改为下一个字段，或者按向左箭头将焦点更改为上一个字段。

我需要能够在编辑文本时使用箭头键更改光标位置，而无需更改字段焦点，并且仅当光标位于文本的开头或结尾时才转到下一个字段。

我怎么能做到这一点？

脚本代码如下：

```
function tabulacion_manual(e,adelante,atras,saltar){
    if(saltar==1)
    {
        setTimeout(function(){
            $(adelante).focus();
            $(adelante).select();
        },150);
    }else{
        //tecla = (document.all) ? e.keyCode : e.which;
        tecla = (window.event) ? window.event.keyCode : e.keyCode;

        switch(tecla){
            case 37: //atras
                $(atras).focus();
                break;
            case 38: //arriba
                $(atras).focus();
                break;
            case 40: //abajo
                $(adelante).focus();
                break;
            case 39: //derecha
                $(adelante).focus();
                break;
            case 13: //enter
                $(adelante).focus();
                break;
        }
    }
    return true;
} 
```

html代码是：

```
<s:textfield name="programaFaena.fecha"  maxlength="10" tabindex="1" onkeypress="return tabulacion_manual(event,this,next())" autocomplete="off" readonly="false" > 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T00:37:54.927

例如：

```
 case 37: //atras
            //if the cursor is at the beginning of the field
            if (event.target.selectionEnd == 0) {
                $(atras).focus();
            }
            break;
        ...
        case 39: //derecha
            //if the cursor is at the end of the field
            if (event.target.textLength-event.target.selectionStart == 0) {
                $(adelante).focus();
            }
            break; 
```

# python - 制作目录时出现Python“FileExists”错误

> ID：12468022
> 
> 赞同：72
> 
> 时间：2012-09-17T22:35:30.050
> 
> 标签：python, file-io, filesystems, queue, cluster-computing

我有几个线程在集群系统上从 Python 并行运行。每个 python 线程输出到一个目录`mydir`。每个脚本在输出之前检查*mydir*是否存在，如果不存在则创建它：

```
if not os.path.isdir(mydir):
    os.makedirs(mydir) 
```

但这会产生错误：

```
os.makedirs(self.log_dir)                                             
  File "/usr/lib/python2.6/os.py", line 157, in makedirs
mkdir(name,mode)
OSError: [Errno 17] File exists 
```

我怀疑这可能是由于竞争条件造成的，其中一个工作在另一个工作之前创建了*目录*。这可能吗？如果是这样，如何避免这个错误？

我不确定这是一个竞争条件，所以想知道 Python 中的其他问题是否会导致这个奇怪的错误。

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2015-05-11T18:25:53.387

从 Python开始`>=3.2`，`os.makedirs()`可以采用第三个可选参数`exist_ok`：

```
os.makedirs(mydir, exist_ok=True) 
```

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-09-17T22:44:47.473

任何时候代码都可以在您检查某事和您对其采取行动之间执行，您将遇到竞争条件。避免这种情况的一种方法（以及 Python 中的常用方法）是尝试然后处理异常

```
while True:
    mydir = next_dir_name()
    try:
        os.makedirs(mydir)
        break
    except OSError, e:
        if e.errno != errno.EEXIST:
            raise   
        # time.sleep might help here
        pass 
```

如果你有很多线程试图创建一系列可预测的目录，这仍然会引发很多异常，但你最终会到达那里。在这种情况下，最好只有一个线程创建目录

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-09-17T22:37:56.680

捕获异常，如果 errno 为 17，则忽略它。`isdir`如果and`makedirs`调用之间存在竞争条件，这是您唯一可以做的事情。

但是，也有可能存在同名*文件*`os.path.exists`- 在这种情况下会返回`True`但`os.path.isdir`返回 false。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-13T09:45:36.467

I had a similar issues and here is what I did

```
try:
   if not os.path.exists(os.path.dirname(mydir)):
       os.makedirs(os.path.dirname(mydir))
except OSError as err:
   print(err) 
```

**Description:** Just checking if the directory already exist throws this error message **[Errno 17] File exists** because we are just checking if the ***directory name*** exist or not which will return the directory name of the **mydir** value being passed but not if it already exist or not. What is being missed is not checking if that directory already exist which can be done by checking the path with **os.path.exists()** and in there we passed the respective directory name.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-01T03:11:15.737

要忽略目录或文件存在错误，您可以尝试以下操作：

```
 except OSError, e:
        if e.errno != 17:
            print("Error:", e) 
```

# wordpress - 制作定制 WordPress 网站的步骤

> ID：12468025
> 
> 赞同：1
> 
> 时间：2012-09-17T22:36:00.457
> 
> 标签：wordpress, wordpress-theming

我想聘请一名自由程序员和设计师来定制我的 Wordpress 网站，但我不确定我应该先做什么。（对不起，这里是极端新手）

我应该聘请设计师将网站设计到像素，然后将这些图像提供给程序员吗？

或者我可以先聘请程序员，制作一个可用的测试版网站，然后聘请设计师来修复它。

哪个效率最高？

太感谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T23:09:55.293

根据我的经验，您可以从以下三个类别中的任何一个中找到人：设计师、开发人员或设计师**和**开发人员。Stack Overflow 不一定是要问这些问题的问题，但由于您是新来的，我会尽力为您指明一个好的方向。

我个人建议雇佣一名自由职业者来做这两件事，这是因为当他们去编程网站时，他们知道他们的设计意图。作为程序员，我会告诉你，没有什么比给一个完全没有上下文的网站设计更令人沮丧的了。仅仅被告知“把你看到的东西变成代码”通常不足以让开发人员继续前进。

这里有几个网站，我想找人帮助你进一步：

*   [http://www.wordpressfreelance.com/](http://www.wordpressfreelance.com/)
*   [http://www.freelancer.com/hire/Wordpress](http://www.freelancer.com/hire/Wordpress)
*   [https://www.elance.com](https://www.elance.com) <- 我听说这个网站特别好。

# .htaccess - htaccess 重定向非 www 到 www 与 CMS 冲突

> ID：12468031
> 
> 赞同：1
> 
> 时间：2012-09-17T22:36:52.390
> 
> 标签：.htaccess, mod-rewrite, redirect

希望有人可以提供帮助。很抱歉没有很好地了解 htaccess。我试图搜索并花了几个小时在各种选项上，但没有成功。

我正在使用 CMS，其中基本 URL 的格式为 domain.com/index.php/page-name

有一个管理员设置会丢失 index.php 并且只有 domain.com/page-name，它会在下面创建 htaccess 条目：

```
<IfModule mod_rewrite.c>
<IfModule mod_env.c>
SetEnv gp_rewrite gJjsF6q
</IfModule>
RewriteEngine On
RewriteBase "/"
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
<IfModule mod_cache.c>
RewriteRule /?(.*) "/index.php/$1" [L]
</IfModule>
<IfModule !mod_cache.c>
RewriteRule . "/index.php" [L]
</IfModule>
</IfModule> 
```

为了处理核心规范化，一直在尝试将对非 www URL 的任何请求重定向到 www，但到目前为止失败了。几乎所有内容都会产生某种服务器错误，500，或者，文档已移至此处 - 此外，在尝试使用 ErrorDocument 处理请求时遇到了 403 Forbidden 错误。

通过在末尾添加 www/non www 重写（如下所示），至少域功能但重定向仅适用于根。然后，每个其他页面都会忽略 /index.php/ 重写并再次以 domain.com/index.php/page-name 格式返回页面。

```
<IfModule mod_rewrite.c>
<IfModule mod_env.c>
SetEnv gp_rewrite gJjsF6q
</IfModule>
RewriteEngine On
RewriteBase "/"
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
<IfModule mod_cache.c>
RewriteRule /?(.*) "/index.php/$1" [L]
</IfModule>
<IfModule !mod_cache.c>
RewriteRule . "/index.php" [L]
</IfModule>
<Ifmodule mod_rewrite.c>
rewritecond %{http_host} ^domain.com [nc]
rewriterule ^(.*)$ http://www.domain.com/$1 [r=301,nc]
</Ifmodule>
</IfModule> 
```

本质上比没有重定向更糟糕。如果有人对如何维护核心 CMS 需求和解决 www/non www 提出建议，他们将非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T22:41:29.327

您需要将重定向规则放在其余规则之上并包含一个**标志**`L`：

```
<IfModule mod_rewrite.c>
    RewriteEngine On

    RewriteCond %{http_host} ^domain.com [NC]
    RewriteRule ^(.*)$ http://www.domain.com/$1 [L,R=301,NC]

    <IfModule mod_env.c>
        SetEnv gp_rewrite gJjsF6q
    </IfModule>

    RewriteBase "/"
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    <IfModule mod_cache.c>
        RewriteRule /?(.*) "/index.php/$1" [L]
    </IfModule>
    <IfModule !mod_cache.c>
        RewriteRule . "/index.php" [L]
    </IfModule>
</IfModule> 
```

# r - 更改 NpptoR 查找 Rgui.exe 的位置

> ID：12468034
> 
> 赞同：0
> 
> 时间：2012-09-17T22:37:00.427
> 
> 标签：r

这似乎是一个非常普遍但尚未解决的问题。当我打开 NpptoR 时，它说它找不到 Rgui.exe 文件，所以我无法在 R 中运行来自 NpptoR 的命令。我知道问题是 NpptoR 在错误的文件目录中查找。我的问题是，如何更改文件路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:44:47.723

这个问题通常是由于使用旧版本的`NPPtoR`（很可能）或`R`（不太可能）引起的。所以我推荐你：

1.  卸载`NPPtoR`
2.  卸载`R`
3.  重启你的电脑
4.  `R`从[这里](http://cran.r-project.org/bin/windows/base/)下载并安装最新版本。
5.  `NPPtoR`从[这里](http://sourceforge.net/projects/npptor/)下载并安装最新版本。

如果仍然失败，请在任务栏中的图标上单击鼠标右键，然后`NPPtoR`转到设置，您可以在其中更改文件夹。但是，如果您已完成上述步骤，我相信您将不需要这样做。

# arrays - 来自主题的复杂 Wordpress 循环

> ID：12468035
> 
> 赞同：0
> 
> 时间：2012-09-17T22:37:03.250
> 
> 标签：arrays, wordpress, loops, fluid-layout

我试图在这里建立一个类似的画廊/作品集页面：[http ://touch3.themeple.co/?page_id=130](http://touch3.themeple.co/?page_id=130)

我一直在思考这个问题，但我不是一个足够先进的程序员来独自完成这项工作。当您单击其中一个缩略图时，相应的信息会直接在缩略图下方展开，并将其下方的内容向下推送。

真的很快，它的工作方式似乎是：

每行缩略图进入一个名为“fluid-grid”的 div。

在那一行大拇指下，对应的信息分别呈现在它自己的隐藏 div 中。

当您单击缩略图时，信息会直接在缩略图下方展开。将其下方的内容/缩略图向下推。

我唯一能想到的是（请原谅我的措辞和术语）：

构造一个带有计数器的循环。渲染拇指和它的标签，然后当它需要渲染相应的信息时，将所有这些信息放在一个数组中（如果可能的话，我很喜欢数组）。然后，一旦计数器达到 3，关闭容器 div 标签（上面解释中的流体网格）并渲染每个数组条目。然后回到输出下一行。

我会朝着正确的方向前进吗？

无论如何，如果有人知道我将如何构建这个页面，我真的很感激，谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T00:57:50.953

有点模棱两可，我相信有很多方法可以实现这一目标，但如果是我：

我会首先循环所有图像，并附上他们的帖子 ID。

然后加载 .click() AJAX 以将帖子信息抓取为您想要的格式（[像这样](http://www.emanueleferonato.com/2010/04/01/loading-wordpress-posts-with-ajax-and-jquery/)），这样所有信息都不会在初始加载时被拉取

希望那有所帮助

# php - php ftp_connect 失败

> ID：12468037
> 
> 赞同：1
> 
> 时间：2012-09-17T22:37:32.947
> 
> 标签：php, ftp

我在建立 ftp 连接时遇到了问题。

大约 1 小时前，我修改并运行了一个脚本。

最初脚本 ftp 从我的服务器连接到 FastHost 服务器，复制了一些文件并关闭了连接。大约一个小时前，一切正常。

然后我修改了脚本，我告诉脚本删除一个文件，然后复制另一个文件，然后关闭连接。然而，该脚本试图通过 ftp 删除一个不存在的文件，这引发了错误。

注意到我的脚本错误，我用 svn 将我的脚本回滚到几个小时前，当时我知道脚本正在工作......

但是现在我的服务器无法通过 ftp 连接到 FastHost 服务器。

注意我知道连接细节是正确的，因为我可以用它们连接 filezila

我把自己锁在外面了吗？以前有人吃过他的吗？

*这是代码失败的地方：*

```
if($connection)
    {
        ftp_close($connection);
    }
$connection = @ftp_connect($host);

$login = @ftp_login($connection, $uname, $pword);

if(!$connection)
    {
        return "Connection Failure <br/>$host<br/>$uname<br/>$pword<br/>$docroot";
    }
elseif(!$login)
    {
        return "Login Failure <br/>$host<br/>$uname<br/>$pword<br/>$docroot";
    }
else{
        // enabling passive mode
        ftp_pasv( $connection, true ); 
```

它在 $connection 上一直失败。我希望可能有一个时间锁被调用并且今天早上会被清除但没有快乐。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:10:22.200

事实证明，如果您尝试通过 ftp 在不存在 FastHost 服务器的文件上删除文件，则基本上会将您的服务器添加到黑名单中。

由于在此黑名单上，您将无法通过 ftp 进行连接，直到锁定被解除。

今天早上联系 fasthost 团队后，他们确认了这一点并解除了锁定，现在一切都恢复正常了。

# wordpress - 从 query_posts 中排除“页面”

> ID：12468039
> 
> 赞同：1
> 
> 时间：2012-09-17T22:37:46.993
> 
> 标签：wordpress, wordpress-theming, jquery-post

我有一个页面列出了具有特定类别“新闻”的所有帖子。第一个结果总是它本身——页面！该页面甚至没有类别，但由于某种原因被列为一个。我只想检索“帖子”。

我的查询是：

```
query_posts( array ( 'category_name' => 'news', 'posts_per_page' => 4, 'orderby' => 'date', 'order' => 'ASC', 'post_type' => 'post' ) ); 
```

生成的页面可以在这里看到：

[http://vl.social-gamer.com/news-blog/](http://vl.social-gamer.com/news-blog/)

我很感激任何帮助。我还是一个 WP 菜鸟。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T22:53:51.900

如果您要做的只是获取类别列表，那么我建议您已经在 Wordpress 中使用了一个名为`wp_list_categories()`. [这是有关该特定功能的文档。](http://codex.wordpress.org/Template_Tags/wp_list_categories)

> 将类别列表显示为链接。单击类别链接时，该类别中的所有帖子将使用模板层次结构规则规定的适当类别模板显示在类别页面上。

请记住，这也会`echo`排除类别，而不仅仅是检索它们。我发现自己经常使用这个功能：

```
<?php wp_list_categories('title_li='); ?> 
```

但是，如果您只想查找某个类别的“帖子”而不是“页面”，那么请了解 Wordpress 中的页面与 Wordpress 中的帖子几乎相同。一个人的页面不能有类别，但帖子可以。帖子按日期排序，而页面则没有。存在一些差异，但出于所有意图和目的，两者之间的编码方式并没有太大差异。 [这是有关该讨论的更多信息。](http://www.johnhaydon.com/2010/03/wordpress-posts-vs-pages-everything-need-know/)

**编辑**

由于文件结构不正确，帖子的作者似乎遇到了这个问题。有关良好完整结构的参考，[请参阅此链接](http://themeshaper.com/2009/06/25/wordpress-theme-template-directory-structure-tutorial/)。

> **index.php**
> **header.php**
> **sidebar.php**
> **footer.php**
> **functions.php**
> **style.css**
> **page.php** <-- 这不是文章中的链接，但应该添加它来决定一个页面的页面布局帖子布局。

# c# - 冷融合解密到c#

> ID：12468047
> 
> 赞同：1
> 
> 时间：2012-09-17T22:39:08.803
> 
> 标签：c#, coldfusion, encryption

我从这个页面复制并使用了示例中的 C# 代码，[C# 相当于这个 ColdFusion Decrypt 函数](https://stackoverflow.com/questions/6396464/c-sharp-equivalent-to-this-coldfusion-decrypt-function)，但它对我不起作用。我不确定该页面上的coldfusion解密示例是否与我所拥有的相同。无论如何，我的coldfusion代码是这样的：

加密：

```
<cfset strBase64Value = ToBase64(encrypt(strValue,"mykey")) /> 
```

解密：

```
<cfset strDecrypted = decrypt(ToString(toBinary(strBase64Value)),"mykey") /> 
```

其中 strValue 是开头的字符串，strDecrypted 是返回的解密字符串，strBase64Value 是加密字符串，“mykey”是用于加密/解密字符串的密钥密码。

我的 C# 代码如下：

```
 private string ConvertString(string string1, string string2)
    {
        byte[] key = ASCIIEncoding.ASCII.GetBytes(string1);
        byte[] encryptedData = Convert.FromBase64String(string2);

        Aes aes = Aes.Create();
        aes.Mode = CipherMode.ECB;

        using (var ms = new MemoryStream())
        {
            using (var cs = new CryptoStream(ms, aes.CreateDecryptor(key, null), CryptoStreamMode.Write))
            {
                cs.Write(encryptedData, 0, encryptedData.Length);
            }
            byte[] decryptedData = ms.ToArray();
            string clearText = Encoding.ASCII.GetString(decryptedData);
            return clearText;
        }
    } 
```

我收到一条错误消息，提示“指定的密钥不是此算法的有效大小。参数名称：密钥”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T22:56:04.317

链接的示例使用 AES，这是一种完全不同的算法。您的代码使用旧的[cfmx_compat](http://cfdocs.org/decrypt)算法。标准 c# 库中没有等效项。但这里是[cfmx_compat 的 ac# 端口](https://stackoverflow.com/a/4627069/104223)（从开源的[Railo](http://www.getrailo.org/)引擎中提取：）。

也就是说，这`cfmx_compat`是非常不安全的，只是为了向后兼容而维护的。我强烈建议切换到更安全的算法，如 AES 等。

# asp.net - 在线程之间持久化上下文变量

> ID：12468050
> 
> 赞同：0
> 
> 时间：2012-09-17T22:39:23.730
> 
> 标签：asp.net, .net, wcf

我正在使用 .NET 4.0、ASP.NET 和 WCF。这是一个多层网络服务。我想在 Web 层中记录呼叫者 ID，然后在数据层中查询数据库时使用该 ID。

问题在于该应用在 Web 层和数据层之间使用了多线程（通过 .NET 任务库实现）业务层。方法很多，所以我想避免将调用者ID作为参数传递给业务层中的每个函数，然后传递给数据层中的每个函数。

有没有办法在“调用”上下文中保留一个值？我想到了 HttpContext 和 OperationContext，但据我所知，它们不会在线程切换时保持状态。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T23:00:55.530

如果您使用默认的 ASP.NET 身份验证，您应该能够从

```
HttpContext.Current.User.Identity 
```

但是让 BL 或 DAL 知道`HttpContext`并不是最好的主意，您不想将自定义 UI 代码嵌入到通用 BL 和 DA 层中。通常的流程是您在 UI 中创建一个用户（基于`HttpContext`），用户有一些方法和属性（位于 BL 中）。一个属性是 ID，方法可以使用此 ID。有些人喜欢将逻辑分离到单独的服务中——这些服务应该考虑到他们需要操作的所有信息。服务应获取用户或用户 ID（如果您的情况需要）。

如果您以这种方式设计应用程序，那么多线程应用程序将可以正常工作。每个线程都会有一个用户的本地副本。上下文切换将加载线程需要的所有数据，没有共享资源，每个线程都有自己的用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T22:43:47.710

您是正确的，因为 HttpContext 和 OperationContext 在每个线程的基础上有所不同（它们使用线程本地存储，这就是原因）。

但是我看到的解决方案很简单，只需使用您控制的静态类，并且该类将包含一个可公开访问的字典以进行值查找。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T23:20:49.483

如果您正在使用身份验证，请使用 Oleskii 的答案。

如果不使用身份验证并且您只想跟踪会话，那么

[HttpSessionState.SessionID 属性](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.httpsessionstate.sessionid%28v=vs.100%29.aspx)

我认为所有线程都会看到相同的值。

# selenium - 如何查找复选框的总数 - Selenium WebDriver

> ID：12468052
> 
> 赞同：1
> 
> 时间：2012-09-17T22:39:38.023
> 
> 标签：selenium, webdriver, selenium-webdriver

有没有办法计算存在的复选框总数？

这是页面生成的html源代码..

```
<tr> 
  <td>
    <span style="padding-left:15px;">
    <input id="ctl00_ContentPlaceHolder1_Control1_stCat_8" type="checkbox" name="ctl00$ContentPlaceHolder1$AddControl1$cat$lstCat$8"/>
    <label for="ctl00_ContentPlaceHolder1_AddControl1_lstCat_8">Item 1</label>
    </span>
 </td>
</tr>

<tr> 
  <td>
    <span style="padding-left:15px;">
    <input id="ctl00_ContentPlaceHolder1_Control1_stCat_9" type="checkbox" name="ctl00$ContentPlaceHolder1$AddControl1$cat$lstCat$8"/>
    <label for="ctl00_ContentPlaceHolder1_AddControl1_lstCat_9">Item 2</label>
    </span>
  </td>
</tr>

<tr> 
  <td>
    <span style="padding-left:15px;">
    <input id="ctl00_ContentPlaceHolder1_Control1_stCat_10" type="checkbox" name="ctl00$ContentPlaceHolder1$AddControl1$cat$lstCat$8"/>
    <label for="ctl00_ContentPlaceHolder1_AddControl1_lstCat_10">Item 3</label>
    </span>
  </td>
</tr> 
```

![在此处输入图像描述](../Images/d4f9f6724380a09f059506add64726d7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T01:18:11.130

这（或类似的东西）应该可以工作。

```
// WARNING: Untested code. Locator syntax may be
// slightly incorrect.
// Using C#, but other languages are similar.
// Assume driver is a valid IWebDriver instance.
ReadOnlyCollection<IWebElement> checkboxes = driver.FindElements(By.CssSelector("input[type='checkbox']"));
Console.WriteLine(checkboxes.Count); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-22T11:03:28.870

```
public int CountCheckBoxes(IWebDriver driver)
    {
        int countedCheckBoxes = driver.FindElements(By.XPath("//input[@type='checkbox']")).Count;
        return countedCheckBoxes;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-10T14:32:02.887

```
 int countedCheckBoxes = driver.FindElements(By.CssSelector("input[type='checkbox']")).Count; 
```

# coldfusion - 使用 onRequest 作为预处理器

> ID：12468053
> 
> 赞同：0
> 
> 时间：2012-09-17T22:39:39.250
> 
> 标签：coldfusion, cfquery

是否可以预处理 cfquery 命令，以便将 cfqueryparam 包裹在参数周围？

例子：

```
<cfquery name="local.qry">
SELECT FirstName
FROM Person
WHERE PersonID = #arguments.PersonID#
</cfquery> 
```

问：onRequest 可以预处理这个查询以确保 arguments.PersonID 是一个整数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T23:05:50.420

不。首先， onRequest() 在运行时执行，但此时所有代码都已编译，因此无论如何都不是正在执行的 CFML。所以你来晚了。

其次...您为什么要将代码编写时间（因为没有更好的术语）操作链接到运行时操作？代码编写一次，然后——即使是在一个流量不大的网站上——执行的频率也比这要高出几个数量级。因此，您的预处理操作将尝试在代码`#ordersOfMagnitude-1#`时间上运行，而不是这样做。

让我们退后一步……让你走上这条道路的根本问题是什么？这可能是需要研究的问题，而不是在运行时预处理代码的概念（可能会提出一个不同的问题，或者完全修改这个问题）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T12:13:25.873

我同意 Adam 的观点，只是想补充一点，如果您`cfqueryparam`在参数周围使用它，它可以在运行时为您验证类型。您只需要像这样更改您的查询：

```
<cfquery name="local.qry">
SELECT FirstName
FROM Person
WHERE PersonID = <cfqueryparam cfsqltype="cf_sql_integer" value="#arguments.PersonID#" />
</cfquery> 
```

如果 arguments.PersonID 不是有效的整数，则不会执行查询并会引发错误。

# hierarchy - 如何将回归量 [xreg/newxreg] 添加到分层时间序列预测方法 [forecast.hts]？

> ID：12468057
> 
> 赞同：1
> 
> 时间：2012-09-17T22:40:08.563
> 
> 标签：hierarchy, time-series, forecasting

我想要一个将回归量合并到 forecast.hts 中的示例/方法。下面似乎是正确的，但可惜没有产生预测。

```
require(hts)
data(htseg2)
ri <- runif(14)
rix <- runif(16)
htseg2y <- hts(window(allts(htseg2),start = c(1992), end=c(2005))[,8:17],htseg2$g)
htseg2x <- hts((window(allts(htseg2),start = c(1992), end=c(2005))*ri)[,8:17],htseg2$g)
htseg2nx <- hts((window(allts(htseg2),start = c(1992), end=c(2007))*rix)[,8:17],htseg2$g)

forecast.hts(htseg2y , h = 2, fmethod = c("arima"), positive = F, stepwise=F,ic=c("bic"),level=4,trace=TRUE
             ,xreg = allts(htseg2x)
             ,newxreg = allts(htseg2nx)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T23:28:02.833

您的分层时间序列`hts.mts`包括九个序列。您的外生变量`hts.mtsx$y`包含八个系列。您还可以对历史数据使用与未来数据相同的外生序列。

# php - 密码存储，使用 sha-512 的 hash() 或使用河豚 (bcrypt) 的 crypt()？

> ID：12468063
> 
> 赞同：2
> 
> 时间：2012-09-17T22:41:13.133
> 
> 标签：php, hash, sha, bcrypt, password-encryption

这是我当前在 PHP/SQL 项目中的密码散列程序...

*   从 /dev/urandom 获取每个用户的 512 位盐，存储在用户的数据库记录中，除了最终的哈希
*   从存储在文件系统中的 /dev/urandom 中获取 512 位“胡椒”。这是每个应用程序的常量，并且对于每个用户都是相同的
*   然后`hash('sha512', $password.$salt.$pepper, TRUE)`

哈希和盐以二进制形式存储在数据库中，主要是出于习惯。我认为这在安全性方面没有任何区别。如果有的话，它对于 SQL 备份来说稍微不方便，并且使 PHP 代码*看起来*稍微复杂一些。

如今`hash()`，SHA-256 或 SHA-512 是否被普遍认为已被 bcrypt 取代？
我相信 SHA-2 (256/512) 仍然被认为是加密安全的，我可能过度使用熵位。与攻击者从数据库转储中对 SHA-2 哈希进行逆向工程相比，这更有可能是我的代码中的一个缺陷导致问题。

但是我是否应该更新我的方法以改为`crypt()`与 CRYPT_BLOWFISH 一起使用（我相信这被称为 bcrypt，从技术上讲，河豚是一种密码而不是散列算法）？
甚至就像未来的最佳实践一样？

我并不特别担心算法的计算费用（在合理范围内）。这只会成为创建帐户、更改密码或登录时哈希然后比较时的一个因素。这些活动只占页面浏览量的一小部分。我想在某种程度上越慢越好，如果它使服务器更难生成，那么它将使攻击者的工作更慢以暴力破解。

干杯，B

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T22:54:00.590

如果你可以等到 php 5.5，将会有一些有用的内置函数：

[https://gist.github.com/3707231](https://gist.github.com/3707231)

到那时，使用 crypt - 你可以看看这个新功能的前向兼容端口：

[https://github.com/ircmaxell/password_compat](https://github.com/ircmaxell/password_compat)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T01:51:41.940

您肯定走在正确的轨道上，bcrypt 是一种非常好的存储密码的方法（scrypt 更好，但很难在 PHP 中找到一个好的实现）。

请记住，sha1、sha256、sha512*从未*用于散列密码。它们的设计速度很快，因此您可以在*最短的时间内*获取大型数据集并为其创建独特的签名。它们用于签名比其他任何东西都多。

您肯定想使用需要*更多*时间的散列算法。

**旁注：**有些人会争辩说胡椒毫无意义，因为如果他们入侵了您的系统，他们将可以使用您的盐和胡椒。

[这篇文章](https://stackoverflow.com/questions/401656/secure-hash-and-salt-for-php-passwords)对密码安全性有一些深刻的见解。

# ios - 如何使用 iOS5 在 Xcode 中播放现有视频？

> ID：12468068
> 
> 赞同：1
> 
> 时间：2012-09-17T22:42:20.110
> 
> 标签：ios

> **可能重复：**
> [在我的应用中访问 iOS 设备的视频应用中的视频](https://stackoverflow.com/questions/10680427/access-the-videos-in-videos-app-of-an-ios-device-in-my-app)

我想展示 UIImagePickerController 之类的东西，以便用户可以从**“电影”应用程序**或“**相机胶卷**”中选择视频。然后我想玩 MPMoviePlayer。

我找到了很多关于如何从相机胶卷（无论如何是照片库）打开视频的解释，但我没有发现关于**从电影应用程序播放视频的**任何内容。

提前致谢！

# php - IPv4 和 IPv6 禁止

> ID：12468069
> 
> 赞同：2
> 
> 时间：2012-09-17T22:42:32.373
> 
> 标签：php, ip, ipv6, ipv4

如果我想在我的网站上通过 IP 禁止用户，是否可以同时使用`IPv4`和`IPv6`？一些浏览器显然默认使用 IPv4 地址，而其他浏览器如果有可能，则使用 IPv6 地址。因此，如果我通过他们当前的 IP 禁止某人，他们只需要使用另一个导航器来绕过禁令。

tl; dr：是否可以将`IPv4`地址转换为`IPv6`或类似的东西以“统一”它们？

我使用 PHP 作为服务器端技术。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T22:46:03.003

不，这真的不可能。它们是完全独立的网络协议，彼此之间没有任何关系。

另外，我建议IP地址禁止只能与其他方法结合使用，因为很容易使用代理或其他方式从不同的IP地址访问您的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-14T13:18:01.670

您不能真正将一个转换为另一个，IPv4 和 IPv6 互联网本质上是两个逻辑上独立的网络，它们碰巧共享大部分相同的基础设施。

你可以做的事情。

1.  寻找与 6to4 和 teredo 转换机制相关的地址。当您看到一个将其转换为相应的 IPv4 地址以进行滥用控制比较时。
2.  请注意，客户倾向于以至少 /64 的块分配 IPv6，因此禁止单个 IPv6 地址通常没有多大意义。
3.  在关键页面上包含几个大部分不可见的资源（例如 1x1 像素透明图像），一个由仅 v4 的主机名提供，一个由仅 v6 的主机名提供。使用这些图像收集用户的两个地址（如果存在）。

# javascript - JavaScript：为什么我的时钟不工作了？

> ID：12468070
> 
> 赞同：0
> 
> 时间：2012-09-17T22:42:33.823
> 
> 标签：javascript

当我加载页面时，无论我做什么都不会出现时钟。我创建了两个按钮。如果我删除引用`stopTime()`包含的功能的按钮，`clearTimeout(t);`则会出现我的时钟。如果我把按钮放回去，我的时钟将无法工作。

```
<body onload="getTime()">

  <script>

  var t;

  function getTime() 
  {  
     var time = new Date();

     var hour = time.getHours();
     var minute = time.getMinutes();
     var second = time.getSeconds(); 

     hour = checkTime(hour);
     minute = checkTime(minute);
     second = checkTime(second);

     var actualtime = hour + ":" + minute + ":" + second;

     document.getElementById("time").innerHTML = actualtime;

     t = setTimeout(function(){getTime()},1000);
  }

  function checkTime(i)
  {
      if ( i < 10 )
          i = "0" + i;
      return i;
  }

  function stopTime();
  {
      clearTimeout(t);
  }

  </script>

</body>

</html> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T22:46:25.740

你在这里有一个语法错误：

```
function stopTime();
{
    clearTimeout(t);
} 
```

取出. `;`_`function stopTime()`

解决这个问题，您的代码对我来说运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T22:58:05.537

那里有 javascripts 错误。修复了js错误尝试下面的代码

```
var t;
function checkTime(i) {
    if (i < 10){ i = "0" + i;}
    return i;
}

function stopTime(){
    clearTimeout(t);
}

function getTime() {
    var time = new Date();

    var hour = time.getHours();
    var minute = time.getMinutes();
    var second = time.getSeconds();

    hour = checkTime(hour);
    minute = checkTime(minute);
    second = checkTime(second);

    var actualtime = hour + ":" + minute + ":" + second;

    document.getElementById("time").innerHTML = actualtime;

    t = setTimeout(function() {
        getTime();
    }, 1000);
} 
```

# iphone - 埃塞俄比亚 unicode 在 iphone 模拟器上显示为方框

> ID：12468071
> 
> 赞同：0
> 
> 时间：2012-09-17T22:42:41.110
> 
> 标签：iphone, ios, xcode

我正在尝试开发一个儿童教育 iOS（iPhone/ipad）应用程序，该应用程序在 UILable 上显示埃塞俄比亚 unicode（即埃塞俄比亚字符）；但我看到的只是每个字符的方框。例如，要显示第一个埃塞俄比亚字符（即 unicode 0x1260），我正在编写以下代码：

```
myLbl.text = @"\u1260"; 
```

但正如我所说，在 iPhone 模拟器上，我看到的是一个方形框。同样，我尝试编写 pi 和其他一些希腊字符，它们都可以正常工作。例如，此代码显示 pi ( π )：

```
myLbl.text = @"\u03c0"; 
```

为什么埃塞俄比亚的 unicode 显示为方框？我错过了什么？

非常感谢您的回复，

-泰迪熊

PS我使用xcode 4.4.1，仅在iOS模拟器上运行应用程序（不在设备上）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T00:28:33.870

只有当您使用的字体实际上包含这些字符的字形时，它才会起作用。只需尝试不同的字体。

# c++ - GLSL 纹理不起作用

> ID：12468074
> 
> 赞同：0
> 
> 时间：2012-09-17T22:43:25.147
> 
> 标签：c++, opengl, glsl

考虑以下：

```
virtual void Draw()
{
    _texture->Bind(0);

    _shader->Begin();
    _shader->SetUniform("WVPMatrix", _mvp);
    _shader->SetUniform("InColor", _color);
    _shader->SetUniformImm("InTexture", 0);
    _vbo.GetDeclaration().Activate();
    _vbo.Render(GL_QUADS, _ibo, 4);
    _shader->End();
}

void Texture2D::Bind(int index)
{
    if (index != -1)
    {
        glActiveTexture(GL_TEXTURE0 + index);
    }

    glBindTexture(GL_TEXTURE_2D, _textureID);
} 
```

_shader->Begin()、_shader->SetUniform、_shader->SetUniformImm、_vbo.GetDeclaration().Activate 和 _vbo.Render 的调用就像我将片段着色器设置为渲染静态颜色（甚至是颜色通过制服）它渲染得很好。

现在我正在尝试渲染一个texture2d（它加载得很好，我用立即模式进行了测试）并且我得到了一个黑屏，为什么？

顶点：

```
#version 330

layout(location = 0) in vec3 VertexPosition;
layout(location = 1) in vec2 VertexTexCoord;

uniform mat4 WVPMatrix;

out vec2 TexCoord0;

void main()
{
    TexCoord0 = VertexTexCoord;

    gl_Position = WVPMatrix * vec4(VertexPosition, 1);
} 
```

分段：

```
#version 330

in vec2 TexCoord0;

uniform sampler2D InTexture;
uniform vec4 InColor;

out vec4 OutFragColor;

void main()
{
    OutFragColor = texture(InTexture, TexCoord0) * InColor;
} 
```

PS：InColor 是白色的，所以它不会与纹理颜色混淆，并且 TexCoord0 是有效的，因为我已经将 OutFragColor 上的 R 和 B 设置为 TexCoord0 的 S 和 T 来调试它的值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T23:08:30.323

（发布簿记答案）

提问者忘记为他的纹理设置缩小过滤器，因此纹理不完整且不显示。

需要调用`glTexParameteri(GL_TEXTURE_2D, GL_MIN_FILTER, GL_LINEAR);`（或 GL_NEAREST）

# jquery - jquery nicescroll

> ID：12468082
> 
> 赞同：5
> 
> 时间：2012-09-17T22:44:01.500
> 
> 标签：jquery, jquery-plugins, nicescroll

我正在使用 nicescroll 插件。[http://areaaperta.com/nicescroll/](http://areaaperta.com/nicescroll/)

我只是有点怀疑。加载页面后，我可以从浏览器中看到我的默认滚动条，然后显示它的 nicescroll 条。我想将 nicescroll 栏应用于所有文档，并且我有以下代码

```
var nice = $("body").niceScroll({
        preservenativescrolling: false,
        cursorwidth: '8px',
        cursorborder: 'none',
        cursorborderradius:'0px',
        cursorcolor:"#39CCDB",
        autohidemode: false, 
        background:"#999999"
     }); 
```

如果我将 autohidemode 设置为 true，我不会从浏览器中看到默认滚动条。但我想让 nicescroll 栏始终可见。

有谁知道为什么会这样？？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T06:12:39.963

也许这可能会帮助你。这个对我有用。

```
<script id="twitter-wjs" src="../js/widgets.js"></script>
<script src="../js/jquery.min.js"></script>
<script src="../js/jquery.easing.1.3.js"></script>
<script src="../js/jquery.nicescroll.min.js"></script>

<script>

  // Hide Overflow of Body on DOM Ready //
$(document).ready(function(){
    $("body").css("overflow", "hidden");
});

// Show Overflow of Body when Everything has Loaded //
$(window).load(function(){
    $("body").css("overflow", "visible");        
    var nice=$('html').niceScroll({cursorborder:"",cursorcolor:"#333333",cursorwidth:"8px", boxzoom:true, autohidemode:false});

});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-12T15:51:33.927

这是您可能想要的示例：

```
if (jQuery().niceScroll) {
    $("html").niceScroll({
        scrollspeed: 70,
        mousescrollstep: 38,
        cursorwidth: 15,
        cursorborder: 0,
        cursorcolor: '#0C090A',
        cursorborderradius: 0,
        autohidemode: true,
        horizrailenabled: false
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T23:17:07.473

我的第一个想法是在你的css中制作你的类`.nicescroll`元素`overflow:hidden;`，这样滚动条就不会出现，

比在您的文档加载后（最好在 window.load 上）应用 nicescroll 插件并`overflow:auto`使用 jQuery 设置您的元素，例如：

CSS：

```
.nicescroll{overflow:hidden;} 
```

jQuery：

```
$(window).load(function(){
   $('.nicescroll').css({overflow:'auto'});
}); 
```

我认为在您的情况下，您必须向您的`body`元素添加一个 ID 或一个类（如我的示例中）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-26T20:35:02.760

好的！这是我的解决方案。我有同样的问题。我应用了很多方法，但它们对我不起作用。然后在搜索了几周后，我找到了这个解决方案。我正在使用**最新版本**的 niceScroll，它是 **v-3.7.6**

**html:-**

```
<div id="scrollable-div">
  <div class="content"></div>
</div> 
```

**CSS：-**

```
/*Adding overflow hidden*/
.scrollable-div{
  overflow: hidden;
} 
```

是的，就这么简单。只需给您的可滚动 div**溢出：隐藏。**您不需要为此使用任何 Javascript 代码。

在你的情况下，你可以简单地这样做：

```
body{
 overflow: hidden;
}
```

# ruby-on-rails - rails activerecord，朋友关系+ inverse_friend关系如何获得相互关系？包含代码

> ID：12468084
> 
> 赞同：1
> 
> 时间：2012-09-17T22:44:15.377
> 
> 标签：ruby-on-rails, activerecord, mutual-friendship

**试图找到相互关系，在朋友关系中，已经有朋友和逆朋友。但是如何结合它们来获得共同的朋友呢？** *似乎无法弄清楚我尝试了几个选项并在网上搜索了很长时间，只是没有看到它*

```
 has_many :friendships
  has_many :friends, :through => :friendships
  has_many :inverse_friendships, :class_name => "Friendship", :foreign_key => "friend_id"
  has_many :inverse_friends, :through => :inverse_friendships, :source => :user 
```

如何获得

```
has_many :mutual_friends ? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T23:08:35.000

你需要两个模型来找到共同的朋友吗？

你不能就这样吗

```
@mutualfriends = @user1.friends & @user2.friends 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T23:02:42.103

我不认为你可以定义一个共同的朋友协会。所以，让我们看一个共同的朋友类方法或范围。

我假设我们想要我们所有的朋友，我们是他们的朋友。

```
class User
  has_many :friendships
  has_many :friends, :through => :friendships
  has_many :inverse_friendships, :class_name => "Friendship", :foreign_key => "friend_id"
  has_many :inverse_friends, :through => :inverse_friendships, :source => :user

  def mutual_friends
    inverse_friends.joins(:friendships).where("friendships.user_id = users.id and friendships.friend_id = :self_id", :self_id => id).all
  end
end 
```

要将其作为关联进行，这将是您要尝试做的事情：

```
has_many :mutual_friends,
         :through => :inverse_friendships,
         :source => :user,
         :conditions => ["friendships.user_id = users.id and friendships.friend_id = :self_id", :self_id => id] 
```

问题在于 has_many :mutual_friends 关联定义中的 id 方法调用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T23:14:31.120

尝试两个查询的交集这里是一个关于那个的线程

[两个关系的交集](https://stackoverflow.com/questions/6435389/intersection-of-two-relations)

# c++ - 可以使用 drawContours 绘制点吗？

> ID：12468088
> 
> 赞同：0
> 
> 时间：2012-09-17T22:44:35.383
> 
> 标签：c++, image-processing, opencv

使用函数 findContours 和 approxPolyDP 来查找图像元素的轮廓。使用这些点，我使用 drawContours 函数在新图像中绘制多边形。我想使用 drawContours 函数生成的所有点来获取图形的质心和主轴，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T07:59:53.490

您不必将轮廓绘制到另一个图像。只需遍历它们，计算它们的力矩，然后计算质心（质心），每个力矩的主轴角。

**代码（未测试）：**

```
using namespace cv;
using namespace std;

[...]

// Get contours
vector<vector<Point> > contours;
vector<Vec4i> hierarchy;
findContours( canny_output, contours, hierarchy, CV_RETR_TREE, CV_CHAIN_APPROX_SIMPLE, Point(0, 0) );

// Get the moments
vector<Moments> mu(contours.size() );
for( int i = 0; i < contours.size(); i++ ) {
  mu[i] = moments( contours[i], false ); 
}

// Get the mass centers
vector<Point2f> mc( contours.size() );
for( int i = 0; i < contours.size(); i++ ) {
  mc[i] = Point2f( mu[i].m10/mu[i].m00 , mu[i].m01/mu[i].m00 ); 
}

// Get the angle of the main axis
vector<double> ama( contours.size() );
for( int i = 0; i < contours.size(); i++ ) {
  ama[i] = 0.5*atan2((2*mu[i].mu11),(mu[i].mu20-mu[i].mu02)); //need to be 2 arguments
} 
```

希望有帮助！有关更多信息，请查看以下链接：

*   [图像时刻 | 人工智能小屋](http://aishack.in/tutorials/image-moments/)
*   [结构分析和形状描述符 > 矩](http://docs.opencv.org/doc/tutorials/imgproc/shapedescriptors/moments/moments.html#moments)
*   [影像时刻](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=moments#moments)

# eclipse - 使用 Maven 和 git 的问题

> ID：12468099
> 
> 赞同：2
> 
> 时间：2012-09-17T22:45:21.747
> 
> 标签：eclipse, git, maven

我现在正在尝试在 Maven 上发布一个简单的项目，当我设置配置并开始在 eclipse 中构建时，它显示错误

```
[ERROR] Provider message:
[ERROR] The git-tag command failed.
[ERROR] Command output:
[ERROR] /bin/sh: git: command not found
[ERROR] -> [Help 1] 
```

结果，我预计我的 git 可能会出现一些问题。但是我可以在终端中正确运行 git，甚至可以提交代码并将其推送到我的 github（使用 eclipse），所以我认为 git 仍然应该正确安装（否则它如何将代码推送到 github？）。有没有人建议我应该在哪里检查以找出错误？谢谢。

# python - AppEngine remote_api 存根调用上的 BadRequestError

> ID：12468103
> 
> 赞同：3
> 
> 时间：2012-09-17T22:46:11.060
> 
> 标签：python, google-app-engine, remoteapi

尝试在我的 Python 2.7 AppEngine 应用程序中设置 remote_api 存根，以结合我的本地主机调试器使用数据存储访问（使用真实数据测试我的应用程序）。现在，我已经按照[这篇 AppEngine Remote API 文章](https://developers.google.com/appengine/docs/python/tools/remoteapi#Using_Remote_API_in_a_Local_Client)中的教程并提出了这段代码（来自我们应用程序中的 REST 处理程序）：

```
from google.appengine.ext.remote_api import remote_api_stub
from model import MyExpandoObject

# This returns my credentials
def auth_func():
    return ("me@gmail.com", "mypassword")

# TODO This too
def get(w_self):
    # Connect remote api in identical way to example docs:
    remote_api_stub.ConfigureRemoteApi(None, '/_ah/remote_api', auth_func,'bsl-dm-hrd.appspot.com')

    # This calls the database (breakpoint here)
    t_entity = MyExpandoObject.get_by_key_name('akey') 
```

现在，当我执行代码时，存根的配置通过了。然后，在调用数据库时，我在调试器中收到此错误：

```
    BadRequestError: app s~myapp 无法访问 app dev~myapp 的数据

```

我相信这是我需要修复的错误。请注意，表示这是 HRD 应用程序的 s~ 被正确报告为应用程序 ID 的一部分。我还包括了

```
builtins:
    - remote_api: on 
```

app.yaml 中的指令。

我的问题是，为什么我会收到这个错误？这实际上是从 remote_api 文章中获取的示例代码。以防万一，我还尝试通过与 AppEngine SDK 捆绑的 remote_api_shell.py 进行 remote_api 连接，并且能够连接到数据存储、导入模型和执行数据库调用。我很困惑为什么这会失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T23:05:59.853

你有不匹配的 appid' 你似乎没有设置 appid - 你有 None 作为 ConfigureRemoteApi 的第一个参数，你可能需要设置 dev_server 的 --partition arg 以获得你想要的 appid，或者为 ConfigureRemoteApi 调用提供一个 appid

# c++ - （多操作系统）获取可执行路径

> ID：12468104
> 
> 赞同：1
> 
> 时间：2012-09-17T22:46:16.287
> 
> 标签：c++, path, executable

我有一个包含许多不同操作系统的二进制文件的程序

我需要获取二进制文件的位置（想想自动更新程序）

如何在“你的”操作系统中这样做？

（把它想象成一个挑战，有点:)）

编辑注意：该程序可以是可移植的（运行闪存驱动器等）或安装（例如最初以 .deb 格式）

EDIT2：这是我已经拥有的：

```
/**
 * Get the location of the executable
 * @return the location of the executable, as a string.
 */
const char *GetExecutableLocation()
{
   const char *path;
   char buf[1024];

   #if defined (WIN32) || defined (WIN64)
      GetModuleFileName(path, &size);
   #elif defined (__APPLE__)
      _NSGetExecutablePath(path, &size);
   #elif defined(UNIX)
      if (readlink("/proc/self/exe", buf, sizeof(buf)) == -1) path = buf;
   #elif defined(__FreeBSD__)
      int mib[4];
      mib[0] = CTL_KERN;
      mib[1] = KERN_PROC;
      mib[2] = KERN_PROC_PATHNAME;
      mib[3] = -1;
      sysctl(mib, 4, buf, sizeof(buf), NULL, 0);
      path = buf;
   #elif defined(SUNOS)
      path = getexecname();
   #endif
   return path;
} 
```

（请注意，我只测试了 unix 部分，我不知道其他任何内容）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T23:51:49.783

没有便携的方式。

主要操作系统的粗略想法（我在这里省略了细节）：

*   Windows：调用 GetModuleFileNameW(nullptr) 获取执行程序的路径
*   MacOS：使用 [[NSBundle mainBundle] bundlePath] 来获取主包目录（也有对可执行文件本身的调用，但大多数时候你想找到你的数据文件）。您需要将此部分编译为 Objective-C++；我当时正在考虑使用 CFBundle，但当时发现它太乱了。
*   Linux：没有“真正好的”方法。我选择了 readlink(/proc/<mypid>/exe)，它在大多数情况下都可以使用。当程序通过硬链接调用时，它将失败。

注意：argv[0] 一般是没用的；它给出了用于在控制台环境中调用程序的名称，但不解析 shell 搜索路径，并且在某些环境中可能不可用。它在 Windows GUI 程序中不存在，当您通过 GUI 运行程序时，我什至不确定 MacOS 作为 argv[0] 传递的内容。

# url - mod_rewrite 覆盖页面中的所有链接

> ID：12468106
> 
> 赞同：1
> 
> 时间：2012-09-17T22:46:23.587
> 
> 标签：url, mod-rewrite, hyperlink

我正在使用以下 mod_rewrite 规则：

```
 **RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI}.php -f
    RewriteRule ^(.*)$ $1.php [L]** 
```

获得干净的网址，例如

```
 www.myweb.com/login 
```

从

```
 www.myweb.com/login.php 
```

我正在使用另一个重写规则

```
**RewriteRule ^itemdetail/([0-9]+)/?$ itemdetail.php?itemid=$1 [NC,L]** 
```

要得到

```
 www.myweb.com/itemdetail/100008 
```

从

```
 www.myweb.com/itemdetail?itemid=100008. 
```

这工作正常，但有一个问题。此重写规则在每个链接上添加一个子域。例如。如果到 css 文件的链接是 text.css 现在到这个 css 文件的链接是 itemdetail/text.css。主页链接现在是 www.myweb.com/itemdetail/home 而不是 www.myweb.com/home。我在这里做错了什么。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T22:50:52.823

> 此重写规则在每个链接上添加一个子域。例如。如果到 css 文件的链接是 text.css 现在到这个 css 文件的链接是 itemdetail/text.css。主页链接现在是 www.myweb.com/itemdetail/home 而不是 www.myweb.com/home。我在这里做错了什么。

您可以执行以下两种操作之一来处理此问题，或者将其添加到`itemdetail.php`页面标题（在`<head> </head>`标签内）：

```
<base href="/"> 
```

或者，您可以通过添加前导将您的 css 链接从相对 URL 更改为绝对 URL `/`，例如：

```
<link rel="stylesheet" href="/text.css" type="text/css"> 
```

否则，您可以尝试添加重写规则来取消写入 css 链接，但这通常是一个非常糟糕的主意，因为当您有意使用子目录时，它会破坏子目录中的 css：

```
RewriteRule ^itemdetail/(.*?)\.css$ /$1.css [L] 
```

# java - 在 500 java.lang.OutOfMemoryError 之后重定向

> ID：12468108
> 
> 赞同：0
> 
> 时间：2012-09-17T22:46:39.463
> 
> 标签：java, jsf, out-of-memory

我有一个 JSF 应用程序，我想确保在它出现 HTTP 500 错误时为用户提供有意义的响应。当我强制执行 OutOfMemoryError 时，该应用程序会死掉，但我从 Tomcat 6.0.35 得到一个默认的 500 错误页面。

我的应用程序设置的相关部分是：

网页.xml：

```
<filter>
    <filter-name>Error</filter-name>
    <filter-class>myApp.ErrorFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>Error</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

...

```
<error-page>
    <exception-type>javax.faces.application.ViewExpiredException</exception-type>
    <location>/expiredIndex.jsf</location>
</error-page>
<error-page>
    <exception-type>java.lang.Throwable</exception-type>
    <location>/error.jsf</location>
</error-page> 
```

错误过滤器.java：

```
public class ErrorFilter implements Filter {

static Logger logger = Logger.getLogger("MYAPP");

@Override
public void destroy() {
}

@Override
public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
    try {
        chain.doFilter(request, response);
    } catch (ServletException e) {
        logger.error(getDirID()+"|"+"Caught Servlet Exception");
        Throwable rootCause = e.getRootCause();
        logger.error(getDirID()+"|"+"Root cause is " + rootCause.toString());

        if (rootCause instanceof RuntimeException) { // This is true for any FacesException.
            logger.error(getDirID()+"|"+"Rethrowing exception as RuntimeException" + rootCause.toString());
            throw (RuntimeException) rootCause; // Throw wrapped RuntimeException instead of ServletException.
        } else {
            throw e;
        }
    }
}

@Override
public void init(FilterConfig arg0) throws ServletException {
}

public String getDirID() {
    DirID newDirID = new DirID();
    String dirID = newDirID.getDirID();

    return dirID;
} 
```

}

减少堆栈跟踪为您的乐趣：

```
2012-09-17 17:35:51,881|ERROR|[http-8080-1]:Exception in the filter chain
javax.servlet.ServletException: Servlet execution threw an exception
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:313)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 
```

...

```
Caused by: java.lang.OutOfMemoryError: Java heap space
at com.sun.facelets.util.FastWriter.overflow(FastWriter.java:50)
at com.sun.facelets.util.FastWriter.write(FastWriter.java:57) 
```

...

```
 Sep 17, 2012 5:35:51 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet Faces Servlet threw exception
java.lang.NullPointerException
    at myApp.DirID.getDirID(DirID.java:27)
    at myApp.ErrorFilter.getDirID(ErrorFilter.java:50)
    at myApp.ErrorFilter.doFilter(ErrorFilter.java:31) 
```

可能是最相关的位：

```
Sep 17, 2012 5:35:51 PM com.sun.faces.lifecycle.Phase doPhase
SEVERE: JSF1054: (Phase ID: RESTORE_VIEW 1, View ID: ) Exception thrown during phase execution: javax.faces.event.PhaseEvent[source=com.sun.faces.lifecycle.LifecycleImpl@16968dd]
Sep 17, 2012 5:35:51 PM org.apache.catalina.core.ApplicationDispatcher invoke
SEVERE: Servlet.service() for servlet Faces Servlet threw exception
javax.faces.application.ViewExpiredException: viewId:/error.jsf - View /error.jsf could not be restored. 
```

现在我对此的看法是，容器在达到最大内存限制时会死掉，因此在堆栈所在的状态下无法访问 error.jsf posh 错误页面。

我的问题是：

1.  鉴于原因是突然的内存不足错误，我可以从中恢复，以便服务器有足够的空间重定向到我的 error.jsf 页面吗？
2.  如果对 1 的回答是肯定的，那么最有效的实现方法是什么（最好使用代码片段来获得最大的权威性）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T23:05:10.413

基本上，1 的答案是否定的，你不应该尝试从 OOM 错误中恢复（更多信息[在这里](https://stackoverflow.com/q/2679330/1065197)，并检查评论和答案中提供的链接）。该错误将发布在您的 tomcat 日志和您的 Web 应用程序日志（如果有）中。

如果您遇到 OOM，我会使用像[VisualVM](http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/)这样的 Profiler来检查问题可能出在哪里并尝试解决问题。

附加信息：

*   [如何修复 Java 中的内存泄漏](http://www.openlogic.com/wazi/bid/188158/How-to-Fix-Memory-Leaks-in-Java)

* * *

另一件事，您可以使用错误代码处理错误，只需将其添加到您的 web.xml 中：

```
<error-page>
    <error-code>500</error-code>
    <location>/ErrorForCode500.html</location>
</error-page> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T23:09:12.390

Once you hit an OOM exception, the entire state of the application is suspect and shouldn't be recovered. Trying to handle it is kind of noble, but it's far more important to make sure it doesn't happen.

# database - PHP（Zend）与数据库之间的通信

> ID：12468111
> 
> 赞同：0
> 
> 时间：2012-09-17T22:47:03.743
> 
> 标签：database, sockets, zend-framework

我试图了解 Zend 框架和数据库之间的通信实际上是如何工作的（但这并不像看起来那么容易；））。

我主要关注 [Zend_Http_Client_Adapter_Socket](http://framework.zend.com/svn/framework/standard/trunk/library/Zend/Http/Client/Adapter/Socket.php)类，尤其是 read() 函数。它以某种神奇的方式接收来自数据库的响应并设置答案的状态。但是我无法发现实际数据处理在哪里完成。如果我想控制数据库返回的代码怎么办？我希望数据库在某些特殊情况下根据数据返回 204。在哪里可以做？我看到套接字通过等待彼此的请求/响应来启用通信。但是在数据库方面到底是在哪里完成的呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T07:54:48.573

我认为您应该更多地关注评论部分中提到的 RockyFord 的 Zend_Dd_Adapter。当我使用 ZF 时，我的模型分为两部分。保存数据库数据的对象和具有保存、编辑、删除、查找等方法的映射器。所以 Mapper 正在初始化一个新的 Zend_Db_Table_Abstract。例子：

```
class Application_Model_DbTable_Cable extends Zend_Db_Table_Abstract
{
    protected $_name = "cable";
    protected $_primary = "ID";
} 
```

Zend_Db_Table_Abstract 的实例应该存储在映射器中，然后可以调用，例如：

```
$this->dbTable->find($id); 
```

有关更多信息，请查看 ZF 的参考指南：[Zend_Db](http://www.framework.zend.com/manual/1.12/en/zend.db.html)

或者在这里问:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T08:38:13.137

> 在哪里可以做？我看到套接字通过等待彼此的请求/响应来启用通信。但是在数据库方面到底是在哪里完成的呢？

您的问题确实不适用于`Zend_Http_Client_Adapter_Socket`与数据库有关的问题。

`Zend_Http_Client_Adapter_Socket`处理*http*连接请求/响应周期。

Zend Framework 中的所有数据库适配器主要是PHP 扩展*的包装器（模拟和/或扩展函数*）。（PHP 扩展注册在 php.ini 文件中，格式为`extension=extension_name`）

我们大多数人目前都在为我们最喜​​欢的各种数据库使用 PDO 扩展。

因此，要真正回答您的问题，您需要深入研究为 PHP 创建数据库适配器。如果你真的很好奇，你可以从[http://www.php.net/manual/en/internals2.pdo.php开始。](http://www.php.net/manual/en/internals2.pdo.php)

`Zend_Http_Client_Adapter_Socket`但是，您可以对控制器进行编码，以根据数据库查询的结果返回响应 。

# wamp - 如何更改 php-cli 版本（Wamp）

> ID：12468112
> 
> 赞同：5
> 
> 时间：2012-09-17T22:47:04.243
> 
> 标签：wamp, php

很长一段时间以来，我一直在使用 php 5.3.5 安装 wamp 现在我正在使用 Symfony2.1，并且需要 intl 扩展所以我下载并安装了 php 5.4.6，并且第一次运行良好

但现在我在一个新项目中，我需要通过 php 控制台 (php-cli) 安装一些必需的包。其中一个捆绑包是 sonata-project/intl-bundle 当通过“php composer.phar update”请求更新时，我收到错误消息，似乎表明未安装 intl 扩展

经过一番谷歌搜索后，我了解到我的 php-cli 版本仍然是 5.3.5 所以我尝试更改我的 windows XP 环境变量 PATH 并将 5.3.5 路径替换为 5.4.6 路径但现在我在 dos 上收到以下错误安慰 ：

```
Failed loading c:/wamp/bin/php/php5.3.5/zend_ext/php_xdebug-2.1.0-5.3-vc6.dll
PHP 5.4.6 (cli) (built: Aug 15 2012 21:16:03)</br>
Copyright (c) 1997-2012 The PHP Group</br>
Zend Engine v2.4.0, Copyright (c) 1998-2012 Zend Technologies</br> 
```

有没有人可以帮我解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-04-06T06:04:44.577

您需要将 PHP 安装目录添加到 %PATH% 环境变量中。它通常类似于`C:\wamp64\bin\php\php7.0.4`PHP 安装目录或从 PHP 安装目录工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T23:44:53.787

以上看起来与您的 php.ini 有冲突。5.4.6 和 5.3.5 是否都使用相同的 php.ini 文件？

如果是这种情况，则 5.4.6 没有安装 xdebug 扩展，或者更可能是 5.4.6 使用更新的 API 版本导致不兼容问题。从 php.ini 文件中删除 xdebug 子句并重新运行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-04-21T09:23:56.503

在 Windows 10 中，您必须更新系统环境变量部分中的 PHP 路径，而不仅仅是用户。在那之后它会很好地工作......

祝你好运。

[![在此处输入图像描述](../Images/f6832eee382df79baec1485c36232373.png)](https://i.stack.imgur.com/D7mIf.png)

# android - 在 Android 中显示动态文本

> ID：12468113
> 
> 赞同：0
> 
> 时间：2012-09-17T22:47:09.140
> 
> 标签：android

我正在广播接收器中创建一个新活动，并试图弄清楚如何在视图中显示动态文本。

```
public class CallReceiver extends BroadcastReceiver {

  @Override
  public void onReceive(Context context, Intent intent) {
    String state = intent.getStringExtra(TelephonyManager.EXTRA_STATE);
    if (TelephonyManager.EXTRA_STATE_RINGING.equals(state)) {
      String incomingNumber = intent.getStringExtra(TelephonyManager.EXTRA_INCOMING_NUMBER);

      SystemClock.sleep(1);
      Intent myIntent = new Intent(context, CallerIdActivity.class);
      myIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_NO_USER_ACTION);
      context.startActivity(myIntent);
  }
} 
```

如何将incomingNumber 传递给我刚开始的活动显示的视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T22:57:27.813

与您首先获得数字的方式相同，通过在 Intent 中添加额外内容：

```
 Intent intent = new Intent(context, CallerIdActivity.class);
  intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_NO_USER_ACTION);
  intent.putExtra("IncomingNumber", incomingNumber);
  context.startActivity(intent); 
```

（您可能想要更改此 Intent 的名称，因为您现在有两个已命名的 Intent `intent`，这可能会在以后造成麻烦。）

并检查这个额外的`onCreate()`

```
public void onCreate(Bundle savedInstanceState) {
    ...
    String string = getIntent().getStringExtra("IncomingNumber");
    if(string != null) {
        // Do something
    }
} 
```

# php - 查询路径在本地而不是服务器上工作

> ID：12468115
> 
> 赞同：1
> 
> 时间：2012-09-17T22:47:24.320
> 
> 标签：php, development-environment, querypath

所以我一直在我的本地环境中使用查询路径开发一些东西，它是基于 MAMP 的 php 5.3.6，但是当我将它移到我的开发服务器时它停止工作。我的开发服务器是基于 php 5.3.2-1ubuntu4.10 的 LAMP。我一生都无法弄清楚为什么它会在我的本地而不是我的测试中起作用。我确实在两个环境中都启用了正确的 php 扩展。

它似乎与包含中的查询路径文件有关。PHP/MySQL 在两种环境中都运行良好。Querypath 需要启用 'libxml' 和 'dom' 扩展，它们在两个环境中都存在。我的 php 错误日志中没有显示任何内容，如果 querypath 有错误日志，那么这是我不知道的。

一个基本示例是这将在我的本地环境中得到响应：

```
<?php

$url = 'http://www.google.com';

$html = htmlqp($url);
print '<h1>TEST</h1>';

print_r ($html);

?> 
```

在我的开发环境中，不会打印“TEST”，这表明访问查询路径时出现了某种致命错误。而且，是的，我已经严格检查了我的相对路径。

更新：今天假期回来的一位同事，他建议我尝试使用 qp() 函数而不是 htmlqp()，这并没有使任何工作更好，但确实产生了一个错误，这很有帮助：致命错误：类'在第 158 行的 /Library/WebServer/Documents/fGalaxy54/fGalaxy54/include/QueryPath/src/QueryPath.php 中找不到 \QueryPath\DOMQuery'

所以由于某种原因，自动加载器没有加载 DOMQuery 类，我一直在将文件重新复制到服务器以确保事情没有损坏。无论如何，我的同事向我指出了他在服务器上其他地方托管的查询路径的副本，并且由于某种原因该副本工作正常。所以，什么都没有解决，但我在服务器的其他地方有一个工作副本。感谢所有的评论。

再次编辑以进一步澄清：

查询路径自动加载器没有加载 DOMQuery 类，当我使用不同的自动加载器时，在我的开发环境中一切正常。不确定这是否是某种 qp 错误，但这确实是一个奇怪的怪癖。

# php - 比较运算符

> ID：12468116
> 
> 赞同：3
> 
> 时间：2012-09-17T22:47:25.240
> 
> 标签：php, if-statement, comparison, operators

参考[这个链接](http://php.net/manual/en/language.operators.comparison.php)。

我知道字符串类型的操作数转换为数字，然后是通常的数学

但请参阅这些示例代码：

```
echo intval(1e1);       // 10
var_dump("1e1" == 10);  // true, and it's ok

echo intval(0x1A);      // 26
var_dump("0x1A" == 26); // true, and it's ok

echo intval(042);       // 34
var_dump("042" == 34);  // fasle, Why ?!!! 
```

为什么最后一个代码返回 false。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T23:00:30.657

那是因为 PHP 中的字符串到数字的转换是基于一些古老的 C 函数 - `strtod`. 其规则[如下](http://www.kernel.org/doc/man-pages/online/pages/man3/strtod.3.html)：

> 字符串（的初始部分）的预期形式是可选的前导空格，如 isspace(3) 所识别，可选的加号 ('+') 或减号 ('-')，然后是 (i) 十进制数, 或 (ii) 十六进制数 [...]
> 
> 十进制数由可能包含基数字符（小数点，取决于语言环境，通常为“.”）的十进制数字的非空序列组成，可选地后跟十进制指数。十进制指数由一个“E”或“e”组成，后跟一个可选的加号或减号，后跟一个非空的十进制数字序列，并表示乘以 10 的幂。[...]
> 
> 十六进制数由“0x”或“0X”后跟可能包含基数字符的非空十六进制数字序列组成，可选地后跟二进制指数。[...]

如您所见，“1e1”字符串具有非空序列“1”，后跟十进制指数“e1”。因此，它将被转换为十进制数 - 并变为 10。

'0x1A' 字符串遵循十六进制数的规则，将相应地转换为 26。但由于八进制数没有特定规则，“042”将转换为普通十进制 - 并变为 42。当然，不等于 34。

这不应与PHP 本身如何解析*数字文字相混淆。*以 0 开头的数字文字被视为表示八进制。所以，`intval(042)`本质上与`intval(34)`- 但不一样`intval("042")`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T22:54:08.390

就这样`PHP`滚。这是因为当您指定一个字符串并进行转换时，它会转换为一个数字，在您的情况下，第一个`1e1`表示`1 exponent 1`，`0x1A`是十六进制表示，最后一部分`042`本身是一个数字，它被转换为`42`但`intval(042)`表示整数 34 的八进制表示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T22:53:39.093

我不知道所有的数学废话，但是，

因为前两个示例很清楚您要做什么..将其转换为指数，然后将其转换为十六进制。但是第三个解决方案不清楚你在做什么，所以它把它转换成 42。换个方式想想。你试图解决一个问题，由于某种原因，“042”不等于 42。你会很困惑

所以使用你需要的东西，如果你需要一个 042 的 int 表示然后转换为一个 int，但如果它是一个字符串，不要指望它以这种方式工作。

# ios - 如何将视图放在从 UIWebView 内部触发的全屏电影上？

> ID：12468118
> 
> 赞同：-1
> 
> 时间：2012-09-17T22:47:41.793
> 
> 标签：ios, uiwebview

在我正在构建的应用程序内部，有一个 UIWebView 用于为用户提供“受限”浏览器。除了其他可以使用此浏览器完成的事情外，还可以访问一些可以以全屏模式播放视频的网站。

不幸的是，全屏模式会干扰应用程序所做的其他事情。最值得注意的是，应该显示在其他所有内容上的不活动警告隐藏在全屏视频后面。

此外，视频有时可以在 UIWebView 被破坏后继续播放——但我想这是一个单独的问题。

如何将我的文本强制置于全屏视频之上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T03:09:34.323

回答：你不能。这是不可能的。

# .net - WPF 右对齐功能区按钮

> ID：12468120
> 
> 赞同：0
> 
> 时间：2012-09-17T22:48:04.710
> 
> 标签：.net, wpf, ribbon, ribbon-control, ribboncontrolslibrary

有没有办法将功能区按钮向右对齐？我正在使用 Microsoft 功能区。

谢谢，

雷蒙德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T12:20:47.593

这个问题已经在这个链接中解决了。把它放在功能区组中。

[功能区按钮在 WPF 的功能区控件中未正确对齐](https://stackoverflow.com/questions/8707779/ribbonbutton-not-aligning-properly-in-ribbon-control-in-wpf)

# git - solaris x86下的git-svn

> ID：12468121
> 
> 赞同：0
> 
> 时间：2012-09-17T22:48:25.480
> 
> 标签：git, svn, git-svn

git-svn 在 solaris x86 下可以工作吗？

我已经安装了 git，但是当我想使用 git-svn 时它不起作用。

我在互联网上查找了“git-svn”包，但徒劳无功。它找不到它。

SomeBody 可以帮助我，或者请告诉我在哪里可以找到它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T22:57:54.690

`git-svn`需要`libsvn`安装。根据您的安装方式`git`（从源代码，从软件包），可能有不同的解决方案。如果它是一个包，则可能有一个辅助包`git-svn`具有额外的 SVN 库作为包依赖项。如果您从源代码构建，您可能需要为 SVN 安装开发包或从源代码构建它，并选择为客户端生成 SWIG 库。

# jquery - 如果用户在输入字段中单击，jQuery 会停止 setTimeout

> ID：12468122
> 
> 赞同：17
> 
> 时间：2012-09-17T22:48:30.537
> 
> 标签：jquery, input

我有以下 jQuery 函数：

```
 <script type="text/javascript">
  $(function() {
// setTimeout() function will be fired after page is loaded
// it will wait for 5 sec. and then will fire
// $("#successMessage").hide() function
setTimeout(function() {
    $("#subscribe-floating-box").animate({"height": "toggle"}, { duration: 300 });
}, 3000);
});
</script>

<script type="text/javascript">
   function ShowHide(){
   $("#subscribe-floating-box").animate({"height": "toggle"}, { duration: 300 });
}
</script> 
```

我也有以下表格：

```
<div id="subscribe-floating-box">
<form action="" method="post" accept-charset="utf-8" id="subscribe-blog">
<input type="text" name="email" style="width: 95%; padding: 1px 2px" value="someone@example.com" id="subscribe-field" onclick="if ( this.value == 'Email Address' ) { this.value = ''; }" onblur="if ( this.value == '' ) { this.value = 'Email Address'; }">
<input type="hidden" name="action" value="subscribe">
<input type="hidden" name="source" value="http://example.com">
<input type="hidden" name="redirect_fragment" value="blog_subscription-2">
<input type="submit" value="Subscribe" name="jetpack_subscriptions_widget">
</form>
</div> 
```

最后，有一个“按钮”（图像）可以打开一个表单。该按钮具有以下代码：

```
<a href="#" title="" onClick="ShowHide(); return false;" class="cart-buttom"><img src="<?php echo get_template_directory_uri(); ?>/library/images/email-signup-button.png" style="position:relative; top:-146px;" /></a> 
```

（请忽略内联 CSS - 这是我的工作草案）。

换句话说，我有一个打开订阅表单的电子邮件注册按钮。此表单最初显示，但在 3000 间隔后由 setTimeout 函数关闭，并在用户单击 email-signup-button.png 图像时回调。点击回调后，3000后不再自动隐藏。

我需要的是：如果查看者在电子邮件输入字段内单击，是否可以停止 setTimeout 函数？他不必开始输入任何内容，只要他在里面点击即可。如果他决定输入电子邮件地址，我不希望表单关闭。虽然不太可能有人在访问该站点后立即去里面写她/他的电子邮件，但我想消除这种可能性。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-09-17T22:56:41.463

您需要捕获 id`setTimeout`并将其清除：

```
var id = setTimeout(function(){alert('hi');}, 3000);
clearTimeout(id); 
```

这个的实现看起来像这样：

```
var timeoutId = setTimeout(function() {
  $("#subscribe-floating-box").animate({"height": "toggle"}, { duration: 300 });
}, 3000);

$('#subscribe-field').focus(function(){
  clearTimeout(timeoutId);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T22:56:31.060

您可以使用

```
var timer=setTimeout(...); 
```

当你想停止它时，使用

```
clearTimeout(timer); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-17T23:04:52.300

我有点慢，因为我做了[http://jsfiddle.net/2tdL9/](http://jsfiddle.net/2tdL9/)但每个人都是正确的 clearTimeout() 是答案

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-17T23:05:09.003

改变你的`ShowHide()`功能是这样的：

```
function ShowHide(){
   window.eto = setTimeout(function() {
       $("#subscribe-floating-box").animate({"height": "toggle"}, { duration: 300 });
   }, 3000);
} 
```

并且`onclick`您的输入电子邮件的处理程序如下所示：

```
onclick="clearTimeout(window.eto);if ( this.value == 'Email Address' ) { this.value = ''; }" 
```

那应该是你想要的。

# jquery - 为什么 Chrome 中的 img 和 div 宽度计算错误？

> ID：12468124
> 
> 赞同：1
> 
> 时间：2012-09-17T22:48:47.940
> 
> 标签：jquery, image, google-chrome, html, center

我使用以下代码在 DIV
属性中水平和垂直居中图像 DIV is `width`& `height`, `overflow:hidden`, and `display:block`。

问题：仅在 Chrome`margin-top`中`margin-left`计算错误，而代码在 FF 和 IE 中运行良好

```
$('.centerImage').each(function(i) {
    var divH = $(this).parent().height();
    var divW = $(this).parent().width();
    var orgImgH = $(this).height();
    var orgImgW = $(this).width();
    if (orgImgH > orgImgW) {
        $(this).css('width', divW);
        var imgH = $(this).height();
        var mTop = (divH - imgH) / 2;
        $(this).css("margin-top", (mTop < 0) ? mTop : -mTop); //if margin-top value is less than 0 use as is and greater than 0 multiply by -1
    } else {
        $(this).css('height', divH);
        var imgW = $(this).width();
        var mLeft = (divW - imgW) / 2;
        //alert(imgW); alert(mLeft); //chrome bug
        $(this).css("margin-left", (mLeft < 0) ? mLeft : -mLeft);
    }
}); 
```

有任何想法吗？

# c++ - 写入共享内存的频率限制？

> ID：12468126
> 
> 赞同：1
> 
> 时间：2012-09-17T22:48:54.180
> 
> 标签：c++, c, windows, memory, shared-memory

单线程应用程序 (C++) 连续锁定、写入和解锁共享内存 -**每秒四次**（循环被编程设置为每秒运行一次，循环中有 4 次写入且没有读取）。

> EnterCriticalSection(cs);
> WriteToSharedMem();
> LeaveCriticalSection(cs);

另一个应用程序 (C) 将每隔几分钟访问此共享内存**一次**。

以这种速度写入共享内存有什么问题吗？

Windows XP
C++

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T22:56:03.477

您给出的速率（每秒四次）不会造成问题，但[您不能跨进程使用临界区](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682530%28v=vs.85%29.aspx)。您需要一个内核级同步对象，例如[mutex](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684266%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T22:51:35.537

一点也不。您每秒可以获取/释放锁数千次（或数万次或数十万次）。您可以轻松地进行快速基准测试。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-17T22:55:58.407

以这个速度绝对没有！这非常慢，但是我不确定关键部分是你想要使用的，我记得它只确保线程安全，而不是跨应用程序安全，你应该寻找其他东西来锁定共享内存。您必须使用一些[进程间通信 (IPC)](http://tldp.org/LDP/tlk/ipc/ipc.html)机制来确保使用共享内存进行原子操作。

# javascript - 如何从特定的电子邮件帐户以 javascript 或 python 发送电子邮件？

> ID：12468131
> 
> 赞同：-1
> 
> 时间：2012-09-17T22:49:40.267
> 
> 标签：javascript, python, email

我的计算机上有一个 html 文件，它以电子邮件地址 (gmail) 和密码作为输入。我想使用 javascript 或 python 使用给定的电子邮件地址登录 gmail 帐户并将消息发送到另一个电子邮件地址。我该怎么做？javascript或python都可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T22:55:45.757

[来自谷歌](https://developers.google.com/google-apps/gmail/)：

> “Gmail 支持用于访问和发送电子邮件的标准 IMAP 和 SMTP 协议。Gmail IMAP 和 SMTP 服务器已扩展为支持通过行业标准 OAuth 2.0 协议进行的授权。”

所以看起来你应该能够使用 OAuth STMP/IMAP Javascript 库来完成这项工作。有关示例，请参阅此 SO 文章：[在 javascript/node.js 中连接到 Gmail IMAP API](https://stackoverflow.com/q/9795794/573083)

另一种选择是查看[Gmailr API](http://www.jamesyu.org/2011/02/05/introducing-gmailr-an-unofficial-javscript-api-for-gmail/)。

虽然这对您来说不是一个即插即用的解决方案，但它是大多数早期 3rd 方 gmail 扩展器显然使用的过程。

# c++ - 寻找下一个像素的优雅方法

> ID：12468132
> 
> 赞同：1
> 
> 时间：2012-09-17T22:49:49.210
> 
> 标签：c++, sorting, line, pixel

我正在跟随一条有时与其他线相交的像素线，并且我试图找到一种优雅的方式来保持在同一条线上。

![行示例](../Images/c678b475eb3c8bdbc31960be45f43d56.png) ![行示例2](../Images/e5f009f6485df6fbe182e4452c1bae27.png)

当前像素为`0`（蓝色）。前一个像素是`-1`（黑色）。

在第一幅图像中，有两个可能的下一个像素（绿色和红色），但`1`应该选择绿色像素 ( )，因为它延续了线条。

在第二张图片中，有两个绿色像素 ( `1`)，我会同样满意 - 只要不是红色像素，我不介意在它们之间做出选择。

在伪 cpp 中：

```
vector<Point> points;

for (i = x - 1; i < x + 2; i++) {
    for (j = y - 1; j < y + 2; j++) {
        if (i == x && j == y) {
            continue;
        }

        if (IS_ON(i, j) && NOT_VISITED(i, j)) {
            points.push_back(Point(i, j));
        }
    }
}

// sort points to find closest to opposite lastX,lastY

lastX = x;
lastY = y;

x = points[0].x;
y = points[0].y; 
```

排序步骤是我正在努力解决的问题。

我正在考虑使用 std::sort 但我很难制定比较函数。

合适的比较函数是什么样的，或者有更优雅的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T23:18:25.320

如果 currentP=(x,y) 是您的当前点，lastP 是前一点，然后通过取点积来测试所有可能的点 p

> (currentP-lastP)*(p-currentP)

并选择点积最大的p。有关点积，请参见维基百科。

# python - 问题 diffing JSON (twitter API)

> ID：12468139
> 
> 赞同：0
> 
> 时间：2012-09-17T22:50:59.200
> 
> 标签：python, json, twitter, diff

我正在编写一个相当简单的脚本来监控和存档给定用户的推文——现在，我的配置每五分钟请求一个帐户的 20 条最新推文（API 限制），然后检查其中哪些是新的，并且将新的附加到文件中。应该很简单。

我现在正在做的只是下面的循环，你被定义为 twitter api 的 json 输出：

```
json_u = json.loads(u)
after first run:
  q = [x for x in json_u if x not in old_u]
  write q
old_u = json_u
wait five minutes 
```

问题是 q = 行似乎没有做正确的工作，因为 q 变量最终每次都包含所有 20 条新推文。认为 python 在这种构造上遇到了困难（json_u 应该是 20 个字典的列表），我想以这种方式实现它：

```
q = [x for str(x) in json_u if str(x) not in old_u] 
```

但它会引发 SyntaxError: can't assign to function call 错误。

有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T23:14:56.633

语法是 [ ... 中变量的表达式 ]，这就是您收到语法错误的原因。

你原来的列表理解很好。问题似乎是您在 jason_u 中的听写与 old_u 中的听写不同。

您是否打印了字典并查找了时间戳等差异？

# java - 格式化 slf4j 以使用颜色记录消息类型

> ID：12468141
> 
> 赞同：19
> 
> 时间：2012-09-17T22:51:10.150
> 
> 标签：java, logging, slf4j

我正在使用 slf4j 登录我的 Java 应用程序。它涉及很多日志记录和日志监控。
有时，当整个日志以黑色打印时，很难从日志中读取和查找信息。
只是为了使其更具可读性，是否可以用不同颜色记录不同类型的消息？
例如，红色或不同字体大小的所有错误级别消息以及蓝色和不同字体大小的所有信息级别消息。

欢迎任何建议或帮助。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T06:03:06.420

无法更改`slf4j`日志的颜色，因为没有格式化程序。SLF4J 是您的应用程序和一些日志记录工具之间的中间件，例如 Log4j 或 Logback。

您可以更改 Log4j 输出中的颜色，如此[处](https://stackoverflow.com/questions/7848325/making-a-log4j-console-appender-use-different-colors-for-different-threads)所述。我建议使用jcabi [-log中的](http://www.jcabi.com/jcabi-log/multicolor.html)[MulticolorLayout](http://www.jcabi.com/jcabi-log/apidocs/com/jcabi/log/MulticolorLayout.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T06:14:16.787

你必须记住的事情。

首先，SLF4J 只是一个日志外观。如何处理实际的日志消息取决于它使用的绑定。因此你的问题是无效的，相反，你应该引用你想要使用的实现（LogBack？Log4J？等）

其次，“着色”在大多数情况下没有意义。例如，如果您引用纯文本日志文件，我们无法控制颜色，因为它们都是纯文本（除非您的编辑器为您的日志消息格式内置了特殊的语法突出显示）。如果您想在控制台/终端中查看颜色，或者您将日志输出为允许您包含颜色信息的文件格式（例如 HTML），这可能是有意义的。

考虑到这两个想法，这是我的建议。

LogBack在控制台输出中内置了对[http://logback.qos.ch/manual/layouts.html#coloring着色的支持。](http://logback.qos.ch/manual/layouts.html#coloring)如果您正在寻找在控制台输出中查看颜色的方法，并且您可以使用 LogBack，那么这就是您正在寻找的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-17T23:25:35.847

我想到了两个解决方案。它们不是颜色，而是替代解决方案：

1.  在您的 File Appender 配置中，您可以配置模式以包含日志级别（错误、警告等）。然后你可以 grep 文件，按级别过滤消息。

2.  您可以配置具有不同级别阈值的两个文件附加程序（用于两个单独的日志文件）。例如，一个人会将调试级别以上的所有日志（例如信息、警告、错误）记录到logs.txt中，而另一个只会将错误日志记录到errors.txt中

希望能帮助到你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-15T14:45:52.693

将下一个 appender 添加到 logback.xml 以着色日志输出：

```
<appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <!-- encoders are assigned the type
             ch.qos.logback.classic.encoder.PatternLayoutEncoder by default -->
        <encoder>
            <Pattern>%d %highlight(%-5level) [%thread] %cyan(%logger{15}): %msg%n</Pattern>
        </encoder>
</appender> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-16T05:17:41.550

我对日志级别和包都使用过滤器。这个例子来自 Spring boot application.properties

```
 logging.level.root=warn
   logging.level.org.springframework=warn
   logging.level.org.hibernate=warn
   logging.level.org.starmonkey.brown=DEBUG 
```

这样我只看到我想看到的消息

# ios - 当 Reachability 发生变化时连续关闭 ViewController

> ID：12468142
> 
> 赞同：2
> 
> 时间：2012-09-17T22:51:23.620
> 
> 标签：ios, uiviewcontroller, reachability, dismiss

我正在编写一个游戏，用户只有在有活动的互联网连接时才能玩。如果互联网状态发生变化，我想关闭所有 ViewController 并返回登录屏幕。这是层次结构：

我的 App Delegate 通过以下方式显示 LoginViewController：

```
self.window.rootViewController = loginViewController;
[self.window makeKeyAndVisible]; 
```

在这里，用户登录。登录时，我检查连接并处理错误。如果登录成功 loginViewController 使用 mainViewController

```
[self presentModalViewController:self.mainViewController animated:YES]; 
```

然后mainViewController呈现其他控制器，可以呈现其他控制器等等。目前和解雇例程工作正常。

现在，如果可达性状态发生变化，我想显示警报并强制应用返回登录屏幕。我知道如何收听这些通知并采取适当的行动。这是有据可查的:)

如何关闭所有视图控制器，直到我回到登录屏幕？我是否需要在所有视图控制器中收听通知并分别关闭它们？有没有办法在父级（如应用程序委托）中捕获通知并从那里解除所有视图控制器（而不事先持有对所有视图控制器的引用）？

显然，我没有使用 navigationController 所以

```
[self.navigationController popToRootViewControllerAnimated:NO]; 
```

不可能。

编辑：或者，我可以关闭并释放所有内容并从头开始，就像应用程序是新启动的一样。这是更好的方法吗？我该怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T00:12:25.257

好的，我解决了。只需调用

```
[self dismissModalViewControllerAnimated:NO]; 
```

在 loginViewController 上关闭主视图控制器和堆栈上的所有控制器。

# cordova - Phonegap 音频元素

> ID：12468150
> 
> 赞同：0
> 
> 时间：2012-09-17T22:52:47.333
> 
> 标签：cordova, html5-audio

我正在尝试使用音频标签在 Phonegap 中播放音乐。不幸的是，如果我动态更改“src”属性，最终它会变得混乱并卡住。在 Android 上，播放头会立即跳到结尾并拒绝播放任何内容，而在 iOS 上，它仍然会播放音乐，但会将控件变成“无法播放此文件”的字样，因此您无法再控制它了。当我在常规网络浏览器中使用它时，不会发生这种情况。是否有任何快速解决方法，例如每次播放时重新创建音频元素？

我注意到 Phonegap 有一个音频 API。也许这比在 phonegap 中使用音频元素更可靠？是否有任何简单的音频元素替换用于phonegap？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:23:34.033

如果 phonegap 没有保证支持它，音频方法的问题（例如 2.3 之前的 android 有支持它的问题）并且你永远不知道在不同平台上会发生什么，我建议你使用 phonegap 媒体 API，因为它是本机的方法（它在各种平台上有不同的方式），因此您的音频将以最佳状态播放。

快速示例：

```
 // Audio player
    //
    var my_media = new Media(src, onSuccess, onError);

    // Update media position every second
    var mediaTimer = setInterval(function() {
        // get media position
        my_media.getCurrentPosition(
            // success callback
            function(position) {
                if (position > -1) {
                    console.log((position) + " sec");
                }
            },
            // error callback
            function(e) {
                console.log("Error getting pos=" + e);
            }
        );
    }, 1000); 
```

更多信息请访问：[http ://docs.phonegap.com/en/1.0.0/phonegap_media_media.md.html](http://docs.phonegap.com/en/1.0.0/phonegap_media_media.md.html)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-10T01:50:46.667

在对 Phonegap Audio API 进行了一次非常令人沮丧的体验之后，我决定使用 Phonegap 播放音乐是不切实际的。

# javascript - 在谷歌地图中禁用信息窗口

> ID：12468151
> 
> 赞同：0
> 
> 时间：2012-09-17T22:53:06.610
> 
> 标签：javascript, html, google-maps, geolocation

嗨，您是否在我的谷歌地图上禁用了谷歌信息窗口，正如您通过访问[http://harpers.everythingcreative.co.uk/contact](http://harpers.everythingcreative.co.uk/contact)所看到的那样，信息窗口看起来很奇怪并且显示的地址不正确。

```
 // ---------- Geolocation ----------    
function fallback() {
            var myOptions = {
            center: new google.maps.LatLng(51.43255949795703, -0.461750328540802),
            zoom: 14,
            mapTypeId: google.maps.MapTypeId.ROADMAP
            };

            var map = new google.maps.Map(document.getElementById("Map_Canvas"),
            myOptions);

            var markerPos = new google.maps.LatLng(51.43255949795703, -0.461750328540802);
            var marker = new google.maps.Marker({
            position: markerPos,
            map: map,
            title: "The Harpers Hairdressing"
            });
            }

   function initGeolocation() 
    { 
           if(navigator.geolocation) 
            { 
              // Call getCurrentPosition with success and failure callbacks 
              navigator.geolocation.getCurrentPosition( success, fail ); 
            } 
        else 
            { 
              fallback()
               } 
    } 
    var directionDisplay; 
    var directionsService = new google.maps.DirectionsService(); 
    var map; 
    function success(position) { 
      directionsDisplay = new google.maps.DirectionsRenderer(); 
      coords = new google.maps.LatLng(position.coords.latitude, 
position.coords.longitude); 
      var myOptions = { 
        zoom:12, 
        mapTypeId: google.maps.MapTypeId.ROADMAP, 
        center: coords 
      } 
      map = new google.maps.Map(document.getElementById("Map_Canvas"), 
myOptions); 
      directionsDisplay.setMap(map);
      calcRoute();
    } 
    function calcRoute() { 
      var start = coords; 
      var end = new google.maps.LatLng(51.43255949795703, -0.461750328540802); 
      var request = { 
        origin:start, 
        destination: "3 Fir Tree Place, Church Road, Ashford, Middlesex, TW15 2PH",
        travelMode: google.maps.TravelMode.DRIVING,
      }; 
      directionsService.route(request, function(result, status) { 
        if (status == google.maps.DirectionsStatus.OK) { 
          directionsDisplay.setDirections(result); 
        } 
      }); 
    } 
        function fail() 
        { 

           fallback();

} 
```

如您所见，后备是一个简单的标记，它不显示和信息窗口，但方向显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-12T02:51:51.347

在图层选项中使用 suppressInfoWindows:true ：

```
layer = new google.maps.FusionTablesLayer({
        map: map,
        heatmap: {
            enabled: false
        },
        options: {
            suppressInfoWindows:true
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T10:43:01.170

在您的 DirectionsRenderer 对象上，您可以传入一个 DirectionsRendererOptions 选项结构。其中有一个 markerOptions 值，您应该能够使用它来取消标记与地图的关联。

像这样的东西可能会起作用：

```
directionsDisplay = new google.maps.DirectionsRenderer({
  markerOptions : {
        map: null,  //  you probably would only need 1 or the other of these two values
        visible: false
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T18:11:41.450

使用邓肯的修复，我只使用了 clickable:false 选项，它似乎可以解决问题，非常感谢！

```
 directionsDisplay = new google.maps.DirectionsRenderer({
        markerOptions : {
            visible: true,
            clickable: false
        }
  }); 
```

# opencl - OpenCL - 全局内存读取性能优于本地

> ID：12468152
> 
> 赞同：1
> 
> 时间：2012-09-17T22:53:07.317
> 
> 标签：opencl, gpgpu

我有一个在 NVidia GTX 680 上运行的内核，当从使用全局内存切换到本地内存时，它的执行时间会增加。

我的内核是有限元光线追踪器的一部分，现在在处理之前将每个元素加载到本地内存中。每个元素的数据存储在结构*fastTriangle*中，其定义如下：

```
typedef struct fastTriangle {
    float cx, cy, cz, cw;
    float nx, ny, nz, nd;
    float ux, uy, uz, ud;
    float vx, vy, vz, vd;
} fastTriangle; 
```

我将这些对象的数组传递给内核，编写如下（为简洁起见，我删除了不相关的代码：

```
__kernel void testGPU(int n_samples, const int n_objects, global const fastTriangle *objects, __local int *x_res, __global int *hits) {
    // Get gid, lid, and lsize

    // Set up random number generator and thread variables

    // Local storage for the two triangles being processed
    __local fastTriangle triangles[2]; 

    for(int i = 0; i < n_objects; i++) {    // Fire ray from each object
        event_t evt = async_work_group_copy((local float*)&triangles[0], (global float*)&objects[i],sizeof(fastTriangle)/sizeof(float),0);

        //Initialise local memory x_res to 0's

        barrier(CLK_LOCAL_MEM_FENCE);
        wait_group_events(1, &evt);      

        Vector wsNormal = { triangles[0].cw*triangles[0].nx, triangles[0].cw*triangles[0].ny, triangles[0].cw*triangles[0].nz};

        for(int j = 0; j < n_samples; j+= 4) {
            // generate a float4 of random numbers here (rands

            for(int v = 0; v < 4; v++) {    // For each ray in ray packet
                //load the first object to be intesected
                evt = async_work_group_copy((local float*)&triangles[1], (global float*)&objects[0],sizeof(fastTriangle)/sizeof(float),0);

                // Some initialising code and calculate ray here
                // Should have ray fully specified at this point;

                for(int w = 0; w < n_objects; w++) {        // Check for intersection against each ray

                    wait_group_events(1, &evt);

                    // Check for intersection against object w

                    float det = wsDir.x*triangles[1].nx + wsDir.y*triangles[1].ny + wsDir.z*triangles[1].nz;
                    float dett = triangles[1].nd - (triangles[0].cx*triangles[1].nx + triangles[0].cy*triangles[1].ny + triangles[0].cz*triangles[1].nz);

                    float detpx = det*triangles[0].cx + dett*wsDir.x;
                    float detpy = det*triangles[0].cy + dett*wsDir.y;
                    float detpz = det*triangles[0].cz + dett*wsDir.z;

                    float detu = detpx*triangles[1].ux + detpy*triangles[1].uy + detpz*triangles[1].uz + det*triangles[1].ud;
                    float detv = detpx*triangles[1].vx + detpy*triangles[1].vy + detpz*triangles[1].vz + det*triangles[1].vd;

                    // Interleaving the copy of the next triangle
                    evt = async_work_group_copy((local float*)&triangles[1], (global float*)&objects[w+1],sizeof(fastTriangle)/sizeof(float),0);

                    // Complete intersection calculations

                } // end for each object intersected

                if(objectNo != -1) atomic_inc(&x_res[objectNo]);
            } // end for sub rays
        } // end for each ray
        barrier(CLK_LOCAL_MEM_FENCE);

        // Add all the local x_res to global array hits

        barrier(CLK_GLOBAL_MEM_FENCE);
    } // end for each object
} 
```

当我第一次编写这个内核时，我没有在本地内存中缓冲每个对象，而是从全局内存中访问它，即我将使用 objects[i].cx 而不是 triangles[0].cx

在开始优化时，我切换到使用上面列出的本地内存，但随后观察到执行运行时间增加了大约 25%。

为什么使用本地内存缓冲对象而不是直接在全局内存中访问它们时性能会更差？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T06:55:00.257

本地内存是否可以帮助您更快地运行，这实际上取决于您的程序。使用本地内存时需要考虑两件事：

1.  将数据从全局复制到本地以及再次从本地复制到全局时，您需要进行额外的计算。

2.  我看到你有 3 次“障碍（...）”，这些障碍是性能杀手。所有 OpenCL 任务都必须等待所有其他任务。这样，并行性受到阻碍，任务不再独立运行。

当您在计算中多次读取数据时，本地内存非常有用。但是，与复制和同步相比，快速读取和写入需要为您带来更多的性能提升。

# vb.net - 在 vb.net 应用程序 Win32 错误中使用 Robocopy

> ID：12468153
> 
> 赞同：0
> 
> 时间：2012-09-17T22:53:20.423
> 
> 标签：vb.net, winapi, robocopy

我正在 vb.net 中开发一个需要使用 Robocopy 将目录和目录中的所有内容复制到指定目录的应用程序。必须使用 Robocopy，因为与拖放不同，它保留了修改日期以及它移动的文件和文件夹的其他属性。我正在使用以下代码来启动此操作，但出现错误

> Win32 ExceptionUnhandled，找不到指定的文件。

我已经完成了我的研究，这似乎是调用 Robocopy 的最有效方式......任何帮助将不胜感激。

```
Imports System
Imports System.IO
Imports System.Diagnostics
Imports System.Threading
Imports System.Windows.Forms

Public Class Form1

    Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles         MyBase.Load

    End Sub

    Private Sub Button2_Click(sender As System.Object, e As System.EventArgs) Handles Button2.Click
        Dim srcFold As String = TextBox1.Text
        Dim destFold As String = TextBox2.Text

        'Dim oProcess As New ProcessStartInfo
        'oProcess.FileName = "C:\windows\SysWow64\robocopy.exe"
        'oProcess.Arguments = "C:\upsdnc\11111\" & "C:\ups\11111_dnc" & "/E /Z /dcopy:T /fft /R:10 /ETA /log:C:\copy.log /tee"

       System.Diagnostics.Process.Start("C:\Windows\SysWow64\Robocopy.exe C:\upsdnc\11111 C:\ups\11111_dnc /E /Z /dcopy:T /fft /R:10 /ETA /log:C:\copy.log /tee")

    End Sub 
```

如您所见，我也尝试使用 ProcessStartInfo 但我被告知 Process.Start 更简单。

此外，要使用 Robocopy，格式为“源文件夹”“目标文件夹”后跟选项，如您在上面的代码中所见

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T05:39:27.270

`C:\`尝试使用例如子文件夹中的日志文件`C:\log\copy.log`

如今，您通常无法写入`C:\`根目录。

# python - 从 2D 列表中检索项目

> ID：12468157
> 
> 赞同：0
> 
> 时间：2012-09-17T22:53:25.430
> 
> 标签：python

我有一个 2D 列表，其中每个“行”都有一个索引、名称和路径等`[(1L, "bar", "foo/bar"), (2L, "app", "some/app"),]`。我试图从这个给定的 2D 列表和索引中检索一个“行”。例如，索引 1 应该返回`(1L, "bar", "foo/bar")`。我知道我可以遍历整个列表并比较索引，直到找到像这样的对象：

```
my_index = 1    
for row in my_list:
    if (row[0] == my_index)
        return row
return False 
```

我想知道在 python 中是否有更清洁/更好的方法来执行此操作，因为我是 python 新手。我知道列表有一个索引方法，它可以从列表中返回索引，但我不确定如何将它与 2D 列表一起使用。提前致谢！哦，而且，可以假设每个对象只有一个实例（即：没有重复）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T23:03:29.197

看起来你最好使用字典而不是列表，所以你的数据看起来像这样：

```
my_dict = {1L: (1L, "bar", "foo/bar"),
           2L: (2L, "app", "some/app")} 
```

这使您可以通过索引有效地访问每个元素：

```
>>> my_dict[1]
(1L, 'bar', 'foo/bar') 
```

以下是从列表中创建字典的方法：

```
my_dict = {row[0]: row for row in my_list} 
```

或者在 Python 2.6 及以下版本上：

```
my_dict = dict((row[0], row) for row in my_list) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T23:02:28.973

如果您的列表是静态的（意味着您不会从中添加/删除项目），您可能需要考虑对其进行排序。

默认情况下，如果我没记错的话，元组按它们的第一个元素排序，因此你应该有一个排序列表，其中**my_list[x-1] 索引为 x**

```
my_list.sort()
row = my_list[my_index - 1] 
```

# c++ - 未找到 Opencv 的 gcc 编译错误 cv.h

> ID：12468160
> 
> 赞同：2
> 
> 时间：2012-09-17T22:53:41.307
> 
> 标签：c++, linux, ubuntu, opencv

每次我尝试编译一个示例程序时，我都会得到 cv.h not found, highgui.c not found。我尝试转到opencv中的includes文件夹并做了一个sudo copy *到usr/includes并没有太大帮助：我得到以下输出有人可以告诉我我做错了什么吗？

```
stream_server.c:19:25: fatal error: /usr/include/highgui.h: Permission denied
compilation terminated.
uc@uc-HP-Pavilion-dv6-Notebook-PC:~/Desktop$ sudo gcc stream_server.c -o streamserver
stream_server.c: In function ‘quit’:
stream_server.c:174:5: warning: format not a string literal and no format arguments [-Wformat-security]
stream_server.c:177:5: warning: format not a string literal and no format arguments [-Wformat-security]
/tmp/ccVnjC7y.o: In function `cvDecRefData':
stream_server.c:(.text+0xa9a): undefined reference to `cvFree_'
stream_server.c:(.text+0xb22): undefined reference to `cvFree_'
/tmp/ccVnjC7y.o: In function `cvGetRow':
stream_server.c:(.text+0xc39): undefined reference to `cvGetRows'
/tmp/ccVnjC7y.o: In function `cvGetCol': 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T23:08:17.873

您遇到的第一个问题是您显然安装了一些没有正确权限的文件。由于您似乎可以使用`sudo`，因此您可能需要修复文件的权限：

```
sudo chmod a+r /usr/include/highgui.h 
```

（类似于您没有读取权限的其他文件）。

另一个问题表明您的代码要编译但没有链接。这很可能是因为您要么完全错过了库名称，要么将它放在错误的位置：确保在您提供的任何翻译单元**之后**`-lhighgui -lcvaux -lcxcore`使用（这是我从文档中收集的；我自己没有使用过这个库）（例如，在; 之后，这看起来有点像 C 文件，暗示了错误的语言标签在起作用）。**`stream_server.c`**

# delphi - Delphi中的FormShow

> ID：12468161
> 
> 赞同：0
> 
> 时间：2012-09-17T22:53:43.770
> 
> 标签：delphi

我想知道delphi 2010中的formshow在哪里，因为我只能在我的项目中看到一个formcreate。

我问的原因是因为我需要在FormShow事件处理程序中添加Randomize，如下所示：

```
procedure TfrmWinnaSpree.FormShow(Sender: TObject);
begin
  Randomize;
end; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-18T01:30:17.773

`Events`创建事件处理程序的方式与在 Delphi 中创建几乎每个事件处理程序的方式相同，方法是双击`Object Inspector`.

单击表单本身（不是表单上的任何控件），然后切换到`Object Inspector`. 单击`Events`选项卡，然后向下滚动到`OnShow`事件。双击事件名称旁边的右半部分，IDE 将创建一个新的空事件处理程序并将光标放在正确的位置开始编写代码。

![对象检查器 OnShow 图像](../Images/41c51140a74b358c34ee9a6696b7eaad.png)

```
procedure TForm3.FormShow(Sender: TObject);
begin
  |
end; 
```

但是，`FormShow`调用 的地方是错误的`Randomize`，因为`FormShow`每次显示表单时都会执行，并且可能不止一次发生。这是一个示例（假设有两种形式，*Form1*和*Form2*，像往常一样在 .dpr 文件中使用默认变量名自动创建，这当然是一个坏主意 - 这是为了证明您的问题目的存在问题）：

```
procedure TForm2.FormShow(Sender: TObject);
begin
  ShowMessage('In FormShow');
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  Form2.Visible := not Form2.Visible;
end; 
```

运行程序，点击`TForm1.Button1`多次；每隔一段时间，您都会看到*In FormShow*消息。

调用*Randomize*的正确位置是：

*   在主窗体的*FormCreate 中*
*   在主窗体单元的初始化部分

    ```
    unit uMainForm;

    interface

      ...

    implementation

      ...

    initialization 

    Randomize;

    end. 
    ```

*   在您的项目源 (.dpr) 文件中

    ```
    program MyGreatApp;

    uses
      Math,
      Vcl.Forms,
      uMainForm in 'uMainForm.pas' {Form1};

      {$R *.RES}

    begin
      Randomize;
      Application.Initialize;
      Application.MainFormOnTaskbar := True;
      Application.Title := 'My Super App';
      Application.CreateForm(TForm1, Form1);
      Application.Run;
    end. 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T06:25:56.433

或者，您也可以覆盖受保护的方法 TForm.DoShow：

```
type
  TForm = class(Forms.TForm)
  protected 
    procedure DoShow; override;
  end;

implementation

procedure TForm.DoShow;
begin.
  // custom show code
  inherited;
  // custom show code
end; 
```

与基于事件的方法相比，优势在于您可以将自定义代码放在继承的调用之前或之后。

# mkmapview - 停止 MKMapKit 位置服务时定期崩溃

> ID：12468162
> 
> 赞同：0
> 
> 时间：2012-09-17T22:53:45.570
> 
> 标签：mkmapview

在 applicationDidEnterBackground 方法中停止 MKMapView 位置服务时，我很少遇到崩溃。（我这样做是为了确保我的应用在后台运行时不使用定位服务。）

导致崩溃的代码如下所示：

```
- (void)MyAppDelegate applicationDidEnterBackground:(UIApplication *app) {
     [self.baseAppViewController stopUserTracking];
} 
```

stopUserTracking 方法执行以下操作：

```
-(void)stopUserTracking {
    [baseAppViewController.mapView setUserTrackingMode:MKUserTrackingModeNone];
    [baseAppViewController.mapView setShowsUserLocation:NO];
} 
```

请注意，应用程序永远不会释放 baseAppViewController；mapView 也不是。baseAppViewController 是其 mapView 的委托。委托永远不会设置为零。

这是堆栈跟踪，它以对 MKNormalizedPointForLayer 的调用结束。我在别处读到 MKNormalizedPointForLayer 可能是由于注释 latlng 无效（http://stackoverflow.com/questions/9766272/error-in-main-thread-mknormalizedpointforlayer）。但是我怀疑我的应用程序是否属于这种情况：我已经尝试故意添加带有无效 lat/lngs 的注释，但没有收到此错误。由于 MKTilesRequireGoogleLegalNotices 调用而发生这种情况的事实很有趣，但完全令人费解。有什么想法吗？

```
Thread 0 Crashed:
0   MapKit                              0x32b5de94 MKNormalizedPointForLayer + 28043
1   MapKit                              0x32b5dd8f MKNormalizedPointForLayer + 27782
2   MapKit                              0x32b5dca3 MKNormalizedPointForLayer + 27546
3   MapKit                              0x32b6b901 MKTilesRequireGoogleLegalNotices + 44500
4   MapKit                              0x32b69eed MKTilesRequireGoogleLegalNotices + 37824
5   MapKit                              0x32b50673 MKTileSupportsTileSetStyle + 15378
6   MyApp                           0x00040061 -[BaseAppViewController stopUserTracking] (BaseAppViewController.m:785)
7   MyApp                           0x0001e3c9 -[MyAppDelegate applicationDidEnterBackground:] (MyAppDelegate.m:325)
8   UIKit                               0x334fd235 -[UIApplication _handleApplicationSuspend:eventInfo:] + 760
9   UIKit                               0x3348deff -[UIApplication handleEvent:withNewEvent:] + 2094
10  UIKit                               0x3348d567 -[UIApplication sendEvent:] + 54
11  MyApp                           0x000fcb41 -[UIApplication(HMCustom) customSendEvent:] + 85
12  UIKit                               0x3348cf3b _UIApplicationHandleEvent + 5826
13  GraphicsServices                    0x3764c22b PurpleEventCallback + 882
14  CoreFoundation                      0x35a2d523 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 38
15  CoreFoundation                      0x35a2d4c5 __CFRunLoopDoSource1 + 140
16  CoreFoundation                      0x35a2c313 __CFRunLoopRun + 1370
17  CoreFoundation                      0x359af4a5 CFRunLoopRunSpecific + 300
18  CoreFoundation                      0x359af36d CFRunLoopRunInMode + 104
19  GraphicsServices                    0x3764b439 GSEventRunModal + 136
20  UIKit                               0x334bbcd5 UIApplicationMain + 1080
21  MyApp                           0x000026d3 main (main.m:27)

Thread 1:
0   libsystem_kernel.dylib              0x362ff3a8 kevent + 24
1   libdispatch.dylib                   0x348e9c29 _dispatch_mgr_wakeup + 0

Thread 2:
0   libsystem_kernel.dylib              0x362ff004 mach_msg_trap + 20
1   CoreFoundation                      0x35a2d3f3 __CFRunLoopServiceMachPort + 126
2   CoreFoundation                      0x35a2c12b __CFRunLoopRun + 882
3   CoreFoundation                      0x359af4a5 CFRunLoopRunSpecific + 300
4   CoreFoundation                      0x359af36d CFRunLoopRunInMode + 104
5   WebCore                             0x318aeca3 _ZL12RunWebThreadPv + 402
6   libsystem_c.dylib                   0x32e1c735 _pthread_start + 320

Thread 3:
0   libsystem_kernel.dylib              0x362ff004 mach_msg_trap + 20
1   CoreFoundation                      0x35a2d3f3 __CFRunLoopServiceMachPort + 126
2   CoreFoundation                      0x35a2c12b __CFRunLoopRun + 882
3   CoreFoundation                      0x359af4a5 CFRunLoopRunSpecific + 300
4   CoreFoundation                      0x359af36d CFRunLoopRunInMode + 104
5   MyApp                           0x00033823 LoggerWorkerThread (LoggerClient.m:494)
6   libsystem_c.dylib                   0x32e1c735 _pthread_start + 320

Thread 4:
0   libsystem_kernel.dylib              0x3630f570 __select + 20
1   libsystem_c.dylib                   0x32e1c735 _pthread_start + 320

Thread 5:
0   libsystem_kernel.dylib              0x362ff004 mach_msg_trap + 20
1   CoreFoundation                      0x35a2d3f3 __CFRunLoopServiceMachPort + 126
2   CoreFoundation                      0x35a2c12b __CFRunLoopRun + 882
3   CoreFoundation                      0x359af4a5 CFRunLoopRunSpecific + 300
4   CoreFoundation                      0x359af36d CFRunLoopRunInMode + 104
5   Foundation                          0x354e8bb9 +[NSURLConnection(Loader) _resourceLoadLoop:] + 308
6   Foundation                          0x354e8a81 -[NSThread main] + 72
7   Foundation                          0x3557c591 __NSThread__main__ + 1048
8   libsystem_c.dylib                   0x32e1c735 _pthread_start + 320

Thread 6:
0   libsystem_kernel.dylib              0x362ff004 mach_msg_trap + 20
1   CoreFoundation                      0x35a2d3f3 __CFRunLoopServiceMachPort + 126
2   CoreFoundation                      0x35a2c12b __CFRunLoopRun + 882
3   CoreFoundation                      0x359af4a5 CFRunLoopRunSpecific + 300
4   CoreFoundation                      0x359af36d CFRunLoopRunInMode + 104
5   MapKit                              0x32b4de1d MKTileSupportsTileSetStyle + 5052
6   Foundation                          0x354e8a81 -[NSThread main] + 72
7   Foundation                          0x3557c591 __NSThread__main__ + 1048
8   libsystem_c.dylib                   0x32e1c735 _pthread_start + 320

Thread 7:
0   libsystem_kernel.dylib              0x362ff004 mach_msg_trap + 20
1   CoreFoundation                      0x35a2d3f3 __CFRunLoopServiceMachPort + 126
2   CoreFoundation                      0x35a2c12b __CFRunLoopRun + 882
3   CoreFoundation                      0x359af4a5 CFRunLoopRunSpecific + 300
4   CoreFoundation                      0x359af36d CFRunLoopRunInMode + 104
5   MyApp                           0x0007e78b +[ASIHTTPRequest runRequests] + 171
6   Foundation                          0x354e8a81 -[NSThread main] + 72
7   Foundation                          0x3557c591 __NSThread__main__ + 1048
8   libsystem_c.dylib                   0x32e1c735 _pthread_start + 320

Thread 8:
0   libsystem_kernel.dylib              0x362ff004 mach_msg_trap + 20
1   CoreFoundation                      0x35a2d3f3 __CFRunLoopServiceMachPort + 126
2   CoreFoundation                      0x35a2c12b __CFRunLoopRun + 882
3   CoreFoundation                      0x359af4a5 CFRunLoopRunSpecific + 300
4   CoreFoundation                      0x359af36d CFRunLoopRunInMode + 104
5   WebCore                             0x318d80d9 _ZN7WebCoreL15runLoaderThreadEPv + 128
6   libsystem_c.dylib                   0x32e1c735 _pthread_start + 320

Thread 9:
0   libsystem_kernel.dylib              0x3630fcd4 __workq_kernreturn + 8

Thread 10:
0   libsystem_c.dylib                   0x32e16cc8 start_wqthread + 0

Thread 11:
0   libsystem_kernel.dylib              0x3630fcd4 __workq_kernreturn + 8

Thread 12:
0   libsystem_kernel.dylib              0x3630fcd4 __workq_kernreturn + 8

Thread 13:
0   libsystem_kernel.dylib              0x3630fcd4 __workq_kernreturn + 8

Thread 14:
0   libsystem_kernel.dylib              0x362ff004 mach_msg_trap + 20
1   CoreFoundation                      0x35a2d3f3 __CFRunLoopServiceMachPort + 126
2   CoreFoundation                      0x35a2c12b __CFRunLoopRun + 882
3   CoreFoundation                      0x359af4a5 CFRunLoopRunSpecific + 300
4   CoreFoundation                      0x359af36d CFRunLoopRunInMode + 104
5   Foundation                          0x354dcb75 -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 256
6   MyApp                           0x0011d50d +[FlurryHTTPEater sendMethod:to:body:headerFields:timeoutInterval:useWebView:] (FlurryHTTPEater.m:67)
7   MyApp                           0x00126ae9 +[FlurrySession sendSessionsToServerWithTimeout:useWebView:requestAppCircleAds:requestVideoAds:requestAppSpotAds:requestReengageAds:sendCurrentSession:] (FlurrySession.m:1053)
8   MyApp                           0x001265c7 +[FlurrySession sendSessionsToServerForAppCircle] (FlurrySession.m:1016)
9   Foundation                          0x354e8a81 -[NSThread main] + 72
10  Foundation                          0x3557c591 __NSThread__main__ + 1048
11  libsystem_c.dylib                   0x32e1c735 _pthread_start + 320

Thread 15:
0   libsystem_kernel.dylib              0x3630fcd4 __workq_kernreturn + 8

Thread 16:
0   libsystem_kernel.dylib              0x3630fcd4 __workq_kernreturn + 8

Thread 17:
0   libsystem_kernel.dylib              0x3630fcd4 __workq_kernreturn + 8

Thread 0 crashed with ARM Thread State:
    r0: 0x00000000     r1: 0x00000000     r2: 0x00000000     r3: 0x41a00000 
    r4: 0x003b3520     r5: 0x003b3520     r6: 0xfffffffc     r7: 0x2fea761c 
    r8: 0x3f01fae8     r9: 0x00000000    r10: 0x0eaec170    r11: 0x3f485f10 
    ip: 0xbff00000     sp: 0x2fea7610     lr: 0x32b548ef     pc: 0x32b5de94 
  cpsr: 0x20080030 

Binary Images:
  (truncated) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T23:11:39.260

我不是 100% 肯定会这样，但您的问题可能来自“代表”问题。尝试在您的方法 stopUserTracking 中调用此行：

```
baseAppViewController.mapView.delegate = nil; 
```

这应该可以防止地图将信息发送到视图控制器的已释放实例，从而导致您的应用程序崩溃。当您的应用程序从后台重新加载时（可能在 viewWillAppear 中？），请务必添加此行，以确保您的应用程序行为正确：

```
 baseAppViewController.mapView.delegate = self; 
```

如果它不能解决您的问题，请尝试在您的配置选项中启用“僵尸对象”，如此处所述：[如何在 Xcode 4 中设置 NSZombieEnabled？](https://stackoverflow.com/questions/2190227/how-do-i-set-up-nszombieenabled-in-xcode-4)当应用程序中发生此类意外错误时，它通常有助于了解发生了什么。

# php - 我在哪里可以将日志存储在 PHP 应用程序中，以便无法通过 HTTP 访问它们？

> ID：12468165
> 
> 赞同：2
> 
> 时间：2012-09-17T22:53:57.163
> 
> 标签：php, apache, logging, log4php

对不起，如果这是一个微不足道的问题。

我是 PHP 的新手，我正在从头开始创建一个项目。我需要将我的应用程序日志（使用 log4php 生成）存储为文件，并且我不希望它们公开。

它们现在存储在我的 PHP 应用程序文件夹 ( `/myAppFolder/logs`) 下的子文件夹中，因此它们由 Apache 提供服务。

我应该将它们存储在哪里，或者我应该做些什么来防止它们被 Apache 作为内容提供？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T22:59:17.950

您可以将它们放在根目录上方的目录中，或者，如果您在共享主机上/由于某种原因无法将文件放在根目录上方，则可以将它们放在拒绝所有 HTTP 访问的目录中。

所以你可以有一个名为“secret_files”的`.htaccess`文件夹，里面有一个文件：

**.htaccess**：

```
deny from all 
```

这将阻止 HTTP 访问该文件夹中的文件/子文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T22:58:18.340

不在公共根目录下的某个地方！？

这更像是一个服务器配置问题，因为它取决于您的服务器，但在 apache 中，您可以使用自定义日志指令来设置位置，所以如果您有

```
/www/myapp 
```

创造

```
/www/log 
```

并把它们放在那里。您需要控制配置才能执行此操作，因此请查看您的网络主机文档以了解如何操作。

# wcf - WCF 数据服务自定义基本身份验证

> ID：12468170
> 
> 赞同：1
> 
> 时间：2012-09-17T22:54:21.523
> 
> 标签：wcf, authentication, cordova, datajs

我在 .NET 中有一个 WCF 数据服务，我在 Phonegap 中使用 datajs 使用这个服务。我正在尝试实现此处描述的身份验证： [//goo.gl/0xQvC](http://goo.gl/0xQvC)，并使用 OData.read 方法发送凭据。当我使用 HttpContext.Current.Request.Headers["Authorization"] 读取服务中的凭据时，我发现它们是空的。我做错了什么？

服务代码：

```
[ServiceBehavior( IncludeExceptionDetailInFaults = true )]
    public class TeyunaDataService : DataService< Meteora.TeyunaServices.Models.TeyunaContext >
    {
        public static void InitializeService(DataServiceConfiguration config)
        {
            config.SetEntitySetAccessRule("Clientes", EntitySetRights.AllRead );
            config.SetEntitySetAccessRule("Transacciones", EntitySetRights.All);

            config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V2;
            config.UseVerboseErrors = true;
        }

        public TeyunaDataService()
        {
            this.ProcessingPipeline.ProcessingRequest += new EventHandler<DataServiceProcessingPipelineEventArgs>(OnRequest);
        }

        void OnRequest(object sender, DataServiceProcessingPipelineEventArgs e)
        {
            var auth = HttpContext.Current.Request.Headers["Authorization"]; //This is empty                
        }
    }
} 
```

* * *

Javascript客户端代码：

```
OData.read({ requestUri: url, user: "pruebausr", password: "passprb" },    
    function (data, request) {
        // ... code to procesing data (It works fine)

    },  function(err) {
            $.mobile.hidePageLoadingMsg();
            alert("Error al obtener clientes. " + err.message);
    }
); 
```

* * *

服务 web.config 在这里： [https ://gist.github.com/3746043](https://gist.github.com/3746043)

我正在使用：WCF 数据服务 5\. IIS Express。

# bash - 使用 awk 、sed 或 bash 将小写文件名更改为大写

> ID：12468173
> 
> 赞同：5
> 
> 时间：2012-09-17T22:54:43.740
> 
> 标签：bash, sed, awk

我想用 awk/sed/bash 将小写文件名更改为大写

您的帮助将不胜感激

```
aaaa.txt
vvjv.txt
acfg.txt 
```

期望的输出

```
AAAA.txt
VVJV.txt
ACFG.txt 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-17T23:01:58.800

**前言：**

如果您不关心扩展的大小写，只需在 shell 循环中使用 'tr' 实用程序：

```
for i in *.txt; do mv "$i" "$(echo "$i" | tr '[a-z]' '[A-Z]')"; done 
```

如果您确实关心扩展的情况，那么您应该知道有不止一种方法可以做到这一点（[TIMTOWTDI](https://en.wikipedia.org/wiki/There's_more_than_one_way_to_do_it)）。就个人而言，我相信这里列出的*Perl*解决方案可能是 Linux 下最简单、最灵活的解决方案。如果您有多个文件扩展名，只需指定您希望保持不变的数字。*BASH4*解决方案也是一个很好的解决方案，但您必须愿意将扩展名写出几次，或者使用另一个变量来存储它。但是，如果您需要严重的可移植性，那么我建议使用八进制的这个答案中的最后一个解决方案。某些版本的 Linux 还附带了一个名为*rename的工具*这也可能值得一试。它的用法因发行版而异，因此请键入`man rename`以获取更多信息。

**解决方案：**

使用**[Perl](http://www.kichwa.com/quik_ref/spec_variables.html)**：

```
# single extension
perl -e 's/\.[^\.]*$/rename $_, uc($`) . $&/e for @ARGV' *.txt

# multiple extensions
perl -e 's/(?:\.[^\.]*){2}$/rename $_, uc($`) . $&/e for @ARGV' *.tar.gz 
```

* * *

使用**[BASH4](http://tldp.org/LDP/abs/html/parameter-substitution.html#PARAMSUBREF)**：

```
# single extension
for i in *.txt; do j="${i%.txt}"; mv "$i" "${j^^}.txt"; done

# multiple extensions
for i in *.tar.gz; do j="${i%.tar.gz}"; mv "$i" "${j^^}.tar.gz"; done

# using a var to store the extension:
e='.tar.gz'; for i in *${e}; do j="${i%${e}}"; mv "$i" "${j^^}${e}"; done 
```

* * *

使用**[GNU awk](https://www.gnu.org/software/gawk/manual/html_node/String-Functions.html)**：

```
for i in *.txt; do

    mv "$i" $(echo "$i" | awk '{ sub(/.txt$/,""); print toupper($0) ".txt" }');
done 
```

使用**[GNU sed](http://timmurphy.org/2013/02/24/converting-to-uppercase-lowercase-in-sed/)**：

```
for i in *.txt; do

    mv "$i" $(echo "$i" | sed -r -e 's/.*/\U&/' -e 's/\.TXT$/\u.txt/');
done 
```

* * *

使用**[BASH3.2](http://www.cyberciti.biz/faq/unix-linux-sed-ascii-control-codes-nonprintable/)**：

```
for i in *.txt; do

    stem="${i%.txt}";

    for ((j=0; j<"${#stem}"; j++)); do

        chr="${stem:$j:1}"

        if [[ "$chr" == [a-z] ]]; then

            chr=$(printf "%o" "'$chr")

            chr=$((chr - 40))

            chr=$(printf '\'"$chr")
        fi

        out+="$chr"
    done

    mv "$i" "$out.txt"

    out=
done 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-17T23:09:08.290

通常，对于小写/大写修改，经常使用“tr”（翻译字符）实用程序，它来自用于字符替换的命令行实用程序集。

```
dtpwmbp:~ pwadas$ echo "xxx" | tr '[a-z]' '[A-Z]'
XXX
dtpwmbp:~ pwadas$ 
```

此外，对于重命名文件，还有 perl ( man rename ) 提供的“rename”实用程序。

```
 SYNOPSIS
       rename [ -v ] [ -n ] [ -f ] perlexpr [ files ]

DESCRIPTION
       "rename" renames the filenames supplied according to the rule specified as the first argument.  The perlexpr argument is a Perl expression which is expected to modify the $_ string in
   Perl for at least some of the filenames specified.  If a given filename is not modified by the expression, it will not be renamed.  If no filenames are given on the command line,
   filenames will be read via standard input.

   For example, to rename all files matching "*.bak" to strip the extension, you might say

           rename 's/\.bak$//' *.bak

   To translate uppercase names to lower, you'd use

           rename 'y/A-Z/a-z/' * 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-18T08:16:39.097

我建议使用`rename`，如果您只想大写文件名而不是扩展名，请使用以下内容：

```
rename -n 's/^([^.]*)\.(.*)$/\U$1\E.$2/' * 
```

`\U`大写所有直到`\E`，请参阅[perlreref(1)](http://perldoc.perl.org/perlreref.html)。`-n`当您对输出感到满意时删除。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T23:13:24.697

```
for f in *.txt; do
  mv "$f" "`tr [:lower:] [:upper:] <<< "${f%.*}"`.txt"
done 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-18T00:26:13.290

Bash 4 参数扩展可以执行大小写更改：

```
for i in *.txt; do
  i="${i%.txt}"
  mv "$i.txt" "${i^^?}.txt"
done 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-18T00:29:28.273

重击：

```
for f in *.txt; do 
    no_ext=${f%.txt}
    mv "$f" "${no_ext^^}.txt"
done 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-18T12:26:11.170

一种更简单、轻量级和便携的方法是：

```
for i in *.txt
do 
    fname=$(echo $i | cut -d"." -f1 | tr [a-z] [A-Z])
    ext=$(echo $i | cut -d"." -f2)
    mv $i $fname.$ext
done 
```

这几乎适用于 BASH 的每个版本，因为我们使用的是每个 Unix 风格中最常见的外部实用程序（cut、tr）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-06-13T07:10:57.743

只需使用（在终端上）：

```
for i in *.txt; do mv $i `echo ${i%.*} | tr [:lower:] [:upper:]`.txt; done; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-18T07:04:10.410

这可能对您有用（GNU sed）：

```
printf "%s\n" *.txt | sed 'h;s/[^.]*/\U&/;H;g;s/\(.*\)\n/mv -v \1 /' | sh 
```

或更简单地说：

```
printf "%s\n" *.txt | sed 'h;s/[^.]*/\U&/;H;g;s/\(.*\)\n/mv -v \1 /e' 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-12-28T11:06:14.407

```
for i in *.jar; do mv $i `echo ${i%} | tr [:upper:] [:lower:]`; done; 
```

这对我有用。

# facebook - Facebook Open Graph - 仍然显示错误的图像

> ID：12468174
> 
> 赞同：0
> 
> 时间：2012-09-17T22:55:03.427
> 
> 标签：facebook, image, facebook-graph-api, caching

我的 Open Graph 发布操作仍然显示在墙上不正确的图像中。我试图清理浏览器中的缓存 - 没有帮助......

我也尝试过以这种方式清空 FB OG 缓存（在 Facebook 对象调试器中）：

```
http://my-website.com/my-app/?fbrefresh=CAN_BE_ANYTHING 
```

但收到此错误：

```
Object Invalid Value:   Object at URL 'http://my-website.com/my-app/?fbrefresh=CAN_BE_ANYTHING' of type 'app_url_name:object_name' is invalid because the given value '' for property 'og:url' could not be parsed as type 'url'. 
```

我读到 Facebook 每 24 小时清理一次缓存，但这已经是第三天了……

那么，如果上面的尝试不起作用，我怎么能清空缓存呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:26:03.593

您必须先修复**og:url**值，然后才能清除缓存。

[http://developers.facebook.com/tools/debug/og/echo?q=http://YOUR_OBJECT_URL](http://developers.facebook.com/tools/debug/og/echo?q=http://YOUR_OBJECT_URL)的结果是什么

（请注意，它是您必须使用的**Open Graph 对象的 URL。）**

# html - 什么是不可替换的内联元素？

> ID：12468176
> 
> 赞同：51
> 
> 时间：2012-09-17T22:55:12.153
> 
> 标签：html, css

[在阅读CSS2 规范的](http://www.w3.org/TR/CSS2/visudet.html#the-height-property)**height**属性时遇到以下情况：

> 适用于：所有元素，但未替换的内联元素、表格列和列组

我了解替换元素（`<img>`）或内联元素（`<button>`，`<a>`）是什么，但无法找到非替换内联元素的示例。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-09-18T06:33:07.707

对于大多数实际目的，最好将“替换”理解为“嵌入”。所以“不可替换元素”只是一个这样渲染的元素，而不是导致一些外部内容出现在它的位置。

“不可替换的内联元素”这一表述没有它自己的定义：它只是指任何既是非替换元素又是内联元素的元素。比如`<a>`。HTML 中的大多数元素都是不可替换的。非替换元素只是一个不是替换元素的元素。

然而，在 CSS 规范中，只有“替换元素”这个概念的一般描述，没有任何此类元素的明确列表。这是可以理解的，因为 HTML 的发展相当独立于 CSS。

随着时间的推移，这个概念发生了一些变化。[CSS 1 规范](http://www.w3.org/TR/2008/REC-CSS2-20080411/conform.html#replaced-element)说： “在 HTML 中，IMG、INPUT、TEXTAREA、SELECT 和 OBJECT 元素可以是替换元素的示例。” 在较新的规范中，不再包含表单字段。这反映在 HTML5 草案中，其中[渲染](http://www.w3.org/TR/html5/rendering.html)部分明确列出了不可替换元素下的表单控件。据它说，唯一被替换的元素是那些将外部内容（例如图像、视频、小程序或 HTML5 画布）嵌入到 HTML 文档中的`menu`元素——除了也提到了修改后的元素（预计将在与浏览器控件相呼应的方式，因此它也嵌入了外部内容）。

这种变化反映了浏览器的发展。早期的浏览器使用系统例程以一种不受 CSS 任何东西影响的方式实现表单字段，并且这种方法仍然存在，但现在表单字段大多可以用 CSS 格式化，因此它们已经有效地从替换变为非替换的元素。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-09-17T23:02:33.313

David Baron[在他的网站上讨论了这个问题](http://dbaron.org/css/2000/01/dibm)。

> 内联元素有两种类型：替换内联元素和非替换内联元素。一般来说，非替换元素是那些内容包含在文档中的元素，而替换元素是那些内容在文档之外的元素。例如，在代码中：
> 
> 访问`<a href="http://www.w3.org/">World Wide Web Consortium</a>` 以了解...`a`元素的内容是“万维网联盟”。被替换的元素是那些内容来自一些外部来源的元素，例如，一个`object`或`img`元素。
> 
> `inline-table`然而，就内联框模型而言，除了具有显示类型的元素和`inline-block`（后者是 CSS3 提议的用于容纳表单元素的类型）的元素被视为替换元素外，定义与上述相同 。

非替换内联元素的好例子是`span`, `strong`, `i`, `b`,`em`等。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-09-17T23:49:36.617

您可以在索引中找到[替换元素的定义：](http://www.w3.org/TR/CSS2/conform.html#replaced-element)

> 其内容超出 CSS 格式化模型范围的元素，例如图像、嵌入文档或小程序。例如，HTML IMG 元素的内容经常被其“src”属性指定的图像所替代。被替换的元素通常具有固有尺寸：固有宽度、固有高度和固有比率。例如，位图图像具有以绝对单位指定的固有宽度和固有高度（显然可以从中确定固有比率）。另一方面，其他文档可能没有任何固有尺寸（例如，空白 HTML 文档）。
> 
> 如果认为被替换元素可能会将敏感信息泄露给第三方，则用户代理可能会认为被替换的元素没有任何内在维度。例如，如果 HTML 文档根据用户的银行余额改变了内在大小，那么 UA 可能想要表现得好像该资源没有内在尺寸一样。
> 
> CSS 渲染模型中不考虑替换元素的内容。

不可替换的内联元素是内联且不符合上述规定的内容。粗略地说，它是一个包含（或可以包含）可以正常设置样式的文本的元素。( `a`, `b`, `cite`, `def`, `em`, 等)

# python - UnicodeDecodeError：“utf8”编解码器无法解码字节 0x9c

> ID：12468179
> 
> 赞同：360
> 
> 时间：2012-09-17T22:55:52.990
> 
> 标签：python, linux, python-unicode

我有一个套接字服务器，它应该从客户端接收 UTF-8 有效字符。

问题是一些客户端（主要是黑客）正在通过它发送所有错误类型的数据。

我可以轻松区分真正的客户，但我将所有发送的数据记录到文件中，以便以后进行分析。

有时我会得到这样`œ`的字符导致`UnicodeDecodeError`错误。

我需要能够使用或不使用这些字符来制作字符串 UTF-8。

* * *

**更新：**

对于我的特殊情况，套接字服务是 MTA，因此我只希望接收 ASCII 命令，例如：

```
EHLO example.com
MAIL FROM: <john.doe@example.com>
... 
```

我在 JSON 中记录了所有这些。

然后一些没有好心的人决定发送各种垃圾。

这就是为什么对于我的具体情况，去掉非 ASCII 字符是完全可以的。

* * *

## 回答 #1

> 赞同：395
> 
> 时间：2012-09-17T23:05:11.223

[http://docs.python.org/howto/unicode.html#the-unicode-type](http://docs.python.org/howto/unicode.html#the-unicode-type)

```
str = unicode(str, errors='replace') 
```

或者

```
str = unicode(str, errors='ignore') 
```

**注意：** *这将删除（忽略）有问题的字符，返回没有它们的字符串。*

*对我来说，这是理想的情况，因为我使用它来保护我的应用程序不允许的非 ASCII 输入。*

**或者：**使用[`codecs`](https://docs.python.org/2/library/codecs.html#codecs.open)模块中的 open 方法读取文件：

```
import codecs
with codecs.open(file_name, 'r', encoding='utf-8',
                 errors='ignore') as fdata: 
```

* * *

## 回答 #2

> 赞同：129
> 
> 时间：2018-02-12T17:08:35.830

将引擎从 C 更改为 Python 对我有用。

引擎是C：

```
pd.read_csv(gdp_path, sep='\t', engine='c') 
```

> “utf-8”编解码器无法解码位置 18 中的字节 0x92：无效的起始字节

引擎是 Python：

```
pd.read_csv(gdp_path, sep='\t', engine='python') 
```

对我来说没有错误。

* * *

## 回答 #3

> 赞同：76
> 
> 时间：2016-06-09T10:21:19.290

既然我已经迁移到 Python 3，这种类型的问题就出现了。我不知道 Python 2 只是简单地滚动文件编码的任何问题。

我发现了这个对差异的很好的解释，以及在上述方法都不适合我之后如何找到解决方案。

[http://python-notes.curiousefficiency.org/en/latest/python3/text_file_processing.html](http://python-notes.curiousefficiency.org/en/latest/python3/text_file_processing.html)

简而言之，要使 Python 3 的行为尽可能与 Python 2 相似，请使用：

```
with open(filename, encoding="latin-1") as datafile:
    # work on datafile here 
```

但是，阅读文章，没有一种万能的解决方案。

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2012-09-17T23:06:39.330

```
>>> '\x9c'.decode('cp1252')
u'\u0153'
>>> print '\x9c'.decode('cp1252')
œ 
```

* * *

## 回答 #5

> 赞同：34
> 
> 时间：2019-05-31T03:21:36.787

首先，使用 get_encoding_type 获取文件的编码类型：

```
import os    
from chardet import detect

# get file encoding type
def get_encoding_type(file):
    with open(file, 'rb') as f:
        rawdata = f.read()
    return detect(rawdata)['encoding'] 
```

第二，使用以下类型打开文件：

```
open(current_file, 'r', encoding = get_encoding_type, errors='ignore') 
```

* * *

## 回答 #6

> 赞同：29
> 
> 时间：2017-03-13T11:19:57.020

我有同样的问题，`UnicodeDecodeError`我用这条线解决了它。不知道是否是最好的方法，但它对我有用。

```
str = str.decode('unicode_escape').encode('utf-8') 
```

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2020-06-03T18:09:43.207

此解决方案在使用拉丁美洲口音（例如“ñ”）时效果很好。

我只是通过添加解决了这个问题

```
df = pd.read_csv(fileName,encoding='latin1') 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2020-11-03T12:00:58.150

我已经使用此代码解决了这个问题

```
df = pd.read_csv(path, engine='python') 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2014-04-10T11:26:24.183

以防万一有人遇到同样的问题。我正在将 vim 与[YouCompleteMe](https://github.com/Valloric/YouCompleteMe)一起使用，无法使用此错误消息启动 ycmd，我所做的是：`export LC_CTYPE="en_US.UTF-8"`，问题消失了。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-03-11T12:45:14.750

如果您需要更改文件，但不知道文件的编码，该怎么办？如果您知道编码与 ASCII 兼容并且只想检查或修改 ASCII 部分，则可以使用 surrogateescape 错误处理程序打开文件：

```
with open(fname, 'r', encoding="ascii", errors="surrogateescape") as f:
    data = f.read() 
```

# iphone - 在 iOS 中模拟应用升级

> ID：12468180
> 
> 赞同：6
> 
> 时间：2012-09-17T22:55:53.163
> 
> 标签：iphone, objective-c, ios, ipad

我正在尝试模拟从 2.0 版升级到 2.1 版。我在 testflight 中托管了 2.0 版，所以我确实将它安装在我的设备中。然后我尝试从 xcode 运行该应用程序。但是发生的事情是该应用程序没有重叠，而是创建了两个具有相同名称的应用程序。我怎样才能使它在我从 xcode 运行应用程序时覆盖旧版本？

我已经确保捆绑标识符是相同的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-17T23:36:56.403

[那么可以在此处@此链接](https://stackoverflow.com/questions/4367002/is-device-deployment-enough-to-simulate-application-update)找到更新时可以获得的信息。

> 当用户更新应用程序时，Documents 文件夹会按原样存储，包括 NSUserDefaults（但是，有时用户通过 iTunes 下载应用程序并替换整个应用程序，哭着说“OMG！更新杀死了我所有的关卡进度！”）；应用程序包被删除并被新的替换（无论如何，它对用户来说是只读的）；重新部署新的构建版本就足够了；

您无法访问模拟器内的应用商店，因为：@link [here](https://stackoverflow.com/questions/8137791/can-i-access-the-app-store-from-within-the-ios-simulator)

> 它是模拟器而不是模拟器。即使模拟器中有 App Store，商店中的任何应用程序都不会运行，因为它们是为 ARM CPU 编译的，而模拟器运行 x86 代码。

另一个堆栈溢出@[链接在这里](https://stackoverflow.com/questions/3268079/simulating-an-update-in-iphone-sdk)指出：

> 构建并安装旧版本，生成一些数据，然后在其上安装新版本。
> 
> 为了在提交到 Appstore 之前进行测试，我通常会再次从 AppStore 下载旧版本，然后使用 Xcode 安装较新版本 - 用于您的下一次更新... ;-)

另一个堆栈溢出（我丢失了链接）状态：

> 不，模拟器运行 i386 二进制文件，而 iPhone 应用商店应用程序是 ARM 二进制文件应用程序。
> 
> iOS 应用程序被编译为机器代码，Android 应用程序使用字节码在虚拟机中运行，并在运行时转换为机器代码。

所以不，我不相信你可以在模拟器中运行它，你怎么能在 iPhone 上保存旧项目并测试两者。苹果文档是@[这个链接在这里。](http://developer.apple.com/library/ios/#DOCUMENTATION/Xcode/Conceptual/ios_development_workflow/25-Using_iOS_Simulator/ios_simulator_application.htmldeployment%20of%20new%20build%20version%20will%20be%20enough;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T07:30:04.303

阅读：[https ://developer.apple.com/library/ios/technotes/tn2285/_index.html](https://developer.apple.com/library/ios/technotes/tn2285/_index.html)

您无法在 XCode 中模拟更新（无论是在模拟器中还是在连接的设备中）。您必须通过 iTunes 创建 IPA 文件并模拟更新过程。

# c# - .gitignore 仍然包括文件

> ID：12468182
> 
> 赞同：2
> 
> 时间：2012-09-17T22:55:59.387
> 
> 标签：c#, visual-studio, github

我为我的仓库 ( [https://github.com/feick/Water-Tank](https://github.com/feick/Water-Tank) )下载`.gitignore`了 C# ( [https://github.com/github/gitignore/blob/master/CSharp.gitignore](https://github.com/github/gitignore/blob/master/CSharp.gitignore) )。我在第一次提交中包含了，然后我对项目文件进行了第二次提交。在我的仓库中，它仍然显示在使用（/bin、/obj 等）时应该排除的不需要的文件夹/文件。我假设这是我的用户错误，所以我想知道是否有人可以让我知道我做错了什么。`.gitignore``.gitignore`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T22:58:46.903

`CSharp.gitignore`将文件重命名为`.gitignore`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T23:21:09.280

由于您已经将这些文件提交到您的存储库，因此您必须删除它们（`git rm`例如使用 ）并提交。

不好的部分是二进制文件仍将永远存在于 repo 中，因此您可能应该删除并重新创建它。

# java - java STDIN nextLine() 中的扫描仪

> ID：12468193
> 
> 赞同：1
> 
> 时间：2012-09-17T22:57:03.893
> 
> 标签：java, java.util.scanner

我们的教授让我们做一个实验室来解析字符串。他拒绝让我们使用文件，并说如果他复制并粘贴一段字符串，我们必须对其进行解析。我的问题是我不确定在复制和粘贴时如何从 STD 获取数据（我可以用文件更容易地做到这一点）。

```
public static void main(String[] args)
  {
    Scanner finput;
    String input;
    System.out.println("Enter Data: ");
    finput = new Scanner(System.in);

    input = finput.nextLine();
            System.out.println("OUTPUT")
    System.out.println(input);
    System.out.println(input.length());
    while(finput.hasNextLine())
    {
        input = finput.nextLine();
        System.out.println(input);
    }
  } 
```

到目前为止，我唯一的问题是当我将一段复制并粘贴到控制台（使用 Eclipse）时，除非我按 Enter，否则它不会抓取最后一行。如果我再次输入内容并按回车键，则上一行将与新条目连接，如下所示。

```
Enter Data:
FirstLine
SecondLineOUTPUT
FirstLine
junk
SecondLinejunk 
```

如果输入只是逐行输入，我就不会遇到这个问题，而且我也不知道为什么如果我复制粘贴它不需要我按回车键来进行进度....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T23:09:24.473

没有办法按照您的想法进行操作，因为输入流无法知道行的“结束”是什么，除非您按下回车键。

考虑是否要输入文本：

```
ABCD
EFGH 
```

但你真的只是想让第二行成为`EFG`，而不是`EFGH`。怎么可能有办法确定呢？复制+粘贴与实际打字完全一样，只是要快得多。

我猜你的教授会在段落末尾为你按下回车键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-11T07:47:51.617

就在你复制的时候..再复制一个空格作为输入！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-02T12:54:59.707

您只需要通过发送 EOF 字符（在 Unix/Linux 中为 CTRL+D，在 Windows 中为 CTRL+Z）来告诉控制台您完成了输入。

# c++ - 如何在 Visual Studio 中读取调试内存窗口

> ID：12468194
> 
> 赞同：9
> 
> 时间：2012-09-17T22:57:13.613
> 
> 标签：c++, linux, visual-studio-2010, memory-management

我之前在 Visual Studio 中使用过调试模式，但我从来没有使用过内存窗口。如果我有一个简单的应用程序计算 a=b+c 并使 b =8 和 c=-2，我如何在不使用手表的情况下找到内存窗口中的地址 a、b 和 c 及其值？

当我尝试时，我看到了大量我无法理解的“胡言乱语”。这是一个屏幕截图：

![在此处输入图像描述](../Images/bc62a40b35194a40560f5a3884c897f9.png)

如果我想做同样的事情，但在 Linux 环境中，我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-17T23:05:38.393

在 Visual Studio 中查找变量地址的一种方法是使用 QuickWatch 窗口（如果您不知道热键，则在调试菜单下，`Ctrl`++ `Alt`）`Q`。如果键入`&a`，它将显示变量的地址`a`。然后，您可以在内存窗口中输入该地址。或者你可以直接进入`&a`内存窗口。

但是要在内存窗口中查看所有变量，它们需要彼此相距几个字节，因为它显示了连续的内存。对于堆栈上的局部变量，这通常不是问题。对于整数变量，您可以通过右键单击内存窗口并更改布局（例如，选择带符号显示的 4 字节整数）来更轻松地以可读格式查看它们。

说了这么多，使用监视窗口似乎要简单得多，因为一切都已经很好地标记了，并且很容易分辨哪个值与哪个变量相关联。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-08-30T20:17:57.050

> *我看到了大量的“胡言乱语”*：一个小例子可能会有所帮助（尤其是对于下一个读者：）

1.  复制/粘贴以下代码并进行调试：

    ```
    struct MyStruct
    {
        int age;
        char code_1;
        char code_2;
        char code_3;
    };

    int main()
    {
        int int_variable = 65;

        int* adresse_int_variable = &int_variable;

        int int_variable2 = 10000;

        char char_variable_1 = 'A';

        char char_variable_2 = 'B';

        cout << " sizeof(int_variable) " << sizeof(int_variable) << endl;
        cout << " sizeof(char_variable_1) " << sizeof(char_variable_1) << endl;

        MyStruct mystruct;
        mystruct.age = int_variable2;
        mystruct.code_1 = 'A';
        mystruct.code_2 = char_variable_2;
        mystruct.code_3 = int_variable;
        return 0;
    } 
    ```

2.  运行 Visual Studio 调试器，将监视添加到所有变量（右键单击每个变量并单击“添加监视”）。现在如果它没有打开，打开监视窗口（菜单*Debug* → *Window*`adresse_int_variable` → *Watch），然后将变量从监视窗口拖放到内存窗口。您将获得以下内容：

    [![在此处输入图像描述](../Images/06bfc97d5135faf86859d18bb306361d.png)](https://i.stack.imgur.com/B1Z8E.png)

3.  您会观察到该值`41`出现在此地址。在十六进制中，0x41 等于 65。所以你看到变量的地址`int_variable`实际上包含 65。（请注意，实际上内存包含位：01000001，但它以十六进制表示以方便阅读。）

4.  在内存窗口中输入`&int_variable2`，你会得到：

    [![在此处输入图像描述](../Images/85be633e576f98baadbfb1816463f2b4.png)](https://i.stack.imgur.com/KL6M6.png)

    `int_variable2`保存该值`10000`，并且以十六进制表示`0x2710`。现在查找为变量`char_variable_1`和存储的值`char_variable_2`：您会看到`0x41`和`0x42`。这是在[ASCII 表](http://www.rapidtables.com/code/text/ascii-table.htm)`A`中`B`编码的方式。注意在内存中和都是一样的。`int_variable``char_variable_1`

5.  最后进入`&mystruct`内存窗口，你会看到：

    [![在此处输入图像描述](../Images/4bedcd59f8e52e357e8452eff9c7ba61.png)](https://i.stack.imgur.com/esq9Y.png)

    这对应于`mystruct`变量的内存，它保存四个变量（an`int`和三个`char`s）。您会看到`age`变量 ( `10000 = 0x2710`) 和以下三个字符：`A`,`B`和`65`存储为`0x41`, `0x42`, `0x41`（从右到左）。请注意，在窗口的右侧，您可以看到`ABA`内存的字符串表示形式（如果不是右键单击窗口并单击 ANSI）。

6.  尝试使用更复杂的变量，阅读有关[字节序](https://en.wikipedia.org/wiki/Endianness)和[数据结构对齐](https://en.wikipedia.org/wiki/Data_structure_alignment)的信息。另请参阅[MSDN 上的内存窗口页面](https://msdn.microsoft.com/en-us/library/s3aw423e.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T23:06:42.267

尝试使用 char * 并在“内存”窗口中打开其地址。解释它的输出会更简单。至于Linux环境，我猜你可以在GDB上使用这个教程：[http ://www.ofb.net/gnu/gdb/gdb_56.html](http://www.ofb.net/gnu/gdb/gdb_56.html)

时不时看到[这样](https://stackoverflow.com/questions/12309838/visual-patterns-in-memory)的东西很有趣:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T01:51:35.213

我必须查看反汇编代码并找出寄存器的值。

# java - 选择时如何更改JButton图标？

> ID：12468203
> 
> 赞同：3
> 
> 时间：2012-09-17T22:58:45.463
> 
> 标签：java, swing, applet, icons, jbutton

我想在用户按下/释放按钮时更改 JButton 图标。

选择 JButton 时的图标图像

![在此处输入图像描述](../Images/8e40ab792e95e825cbcf7c309c58a9f5.png)

取消选择 JButton 并释放 JButton 时的图标图像：

![取消选择/释放时](../Images/1bd79236f36d0783e21a03844e9f1509.png)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-17T23:05:08.903

```
JButton b = new JButton(Icon x); // Create button with normal icon
   b.setIcon(Icon x);
   b.setDisabledIcon(Icon x);
   b.setPressedIcon(Icon x);
   b.setSelectedIcon(Icon x);
   b.setDisabledSelectedIcon(Icon x); 
```

参考： [http ://www.leepoint.net/notes-java/GUI/components/20bu​​ttons/23buttonicons.html](http://www.leepoint.net/notes-java/GUI/components/20buttons/23buttonicons.html)

# iphone - 需要从 UIKeyboard 中删除键

> ID：12468205
> 
> 赞同：1
> 
> 时间：2012-09-17T22:58:51.897
> 
> 标签：iphone, ios, cocoa-touch, uiview, uikeyboard

我需要从键盘上删除特定的键。我环顾四周，发现了如何添加自定义键以及如何删除它们。但是，我需要删除一个内置密钥。例如，假设我想从键盘上删除 a 键。

下面的代码只是从视图中删除了整个键盘，这不是我想要的。

```
- (void)keyboardDidShow:(NSNotification *)aNotification {        
    for (UIWindow *keyboardWindow in [[UIApplication sharedApplication] windows]) 
    {   
        // Now iterating over each subview of the available windows
        for (UIView *keyboard in [keyboardWindow subviews]) {   
            // Check to see if the description of the view we have 
            // referenced is UIKeyboard.
            // If so then we found the keyboard view that we were looking for.
            if([[keyboard description] hasPrefix:@"<UIPeripheralHost"] == YES)                    
                [[keyboard.subviews objectAtIndex:0]removeFromSuperview];                
        }            
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T23:24:04.673

您最好制作一个自定义键盘并添加您想要的键，而不是尝试更改内置键盘，这可能会破坏或导致批准问题。这里有些例子：

[http://brygruver.squarespace.com/blog/2009/10/1/creating-a-custom-number-pad.html](http://brygruver.squarespace.com/blog/2009/10/1/creating-a-custom-number-pad.html)

[http://www.iphonedevsdk.com/forum/iphone-sdk-tutorials/7350-adding-subviews-custimize-keyboard.html](http://www.iphonedevsdk.com/forum/iphone-sdk-tutorials/7350-adding-subviews-custimize-keyboard.html)

# c# - 在 C# 页面中读取 JSON 数据？

> ID：12468206
> 
> 赞同：0
> 
> 时间：2012-09-17T22:58:53.863
> 
> 标签：c#, jquery, .net, json, webforms

我通过 ajax 将数据发布到 aspx 页面，现在我不知道如何阅读它。我只需要获取通过 JSON 传递的字符串并将它们分配给某些变量并操作 .aspx 文件中的变量。我该怎么做呢？

这是jQuery：

```
var ceSaveDatea = {};
    ceSaveDatea.one = requestNumber;
    ceSaveDatea.two = itemTypeID;
    ceSaveDatea.three = servicesRequired;
    ceSaveDatea.four = otherComments;
    ceSaveDatea.five = suggestedReplacements;
    ceSaveDatea.six = internalTestingRequired;
    ceSaveDatea.seven = externalTestingRequired;
    ceSaveDatea.eight = ceGeneralComments;

    /*
    var url = "../ajaxURLs/ComponentEngineering.aspx?requestNumber=" + requestNumber + "&itemTypeID=" + itemTypeID + "&servicesRequired=" + servicesRequired + "&otherComments=" + otherComments + "&suggestedReplacements=" + suggestedReplacements + "&internalTestingRequired=" + internalTestingRequired + "&externalTestingRequired=" + externalTestingRequired + "&ceGeneralComments=" + ceGeneralComments;
    var encodedURL = EncodeURL(url);
    */

    $.ajax({
        type: "POST",
        url: "/ajaxURLs/ComponentEngineering.aspx",
        data: JSON.stringify(ceSaveDatea),  
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        cache: false,
        success: function (data) {
            alert(data);
            if (data != '')
                $('#checkboxContainerDiv').html(data);
        },
        error: function(msg) {
        alert('error');
        }
    }); 
```

然后我只需要获取这些信息并在 ComponentEngineer.aspx 页面上进行转换。它不是网络服务。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T23:26:45.027

如果你想在 C# 代码中处理 JSON，我强烈建议你去探索[JSON.NET](http://james.newtonking.com/projects/json-net.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T03:29:42.713

以下代码应该可以满足您的需求：

```
 JavaScriptSerializer serializer = new JavaScriptSerializer();
        Dictionary<object, object> jsonLookup = ((Dictionary<object, object>)serializer.Deserialize<Dictionary<object, object>>(jsonSource)); 
```

传递给 Deserialize 方法的“jsonSource”是您的 JSON 字符串。

先决条件是：

*   包括对 .NET 程序集的引用：System.Web.Extensions
*   在类文件的顶部包含一个 using 语句： using System.Web.Script.Serialization;

# multithreading - delphi xe下服务应用程序中的线程不起作用

> ID：12468214
> 
> 赞同：3
> 
> 时间：2012-09-17T22:59:35.343
> 
> 标签：multithreading, delphi, service, adoconnection

'MyThread' 不运行。我不知道问题是否发生在“DataTransferServiceStart”程序上。我猜“DataTransferServiceStart”程序没有执行。IDE是德尔福XE。请帮助我，非常感谢。

线程单位：

```
unit Unit_MyThread;

interface

uses
  Classes, SysUtils;

type
  TMyThread = class(TThread)
  private
    { Private declarations }
  protected
    procedure Execute; override;
  end;

implementation

procedure TMyThread.Execute;
var
  log: TextFile;
  logPath: String;
  i: Integer;
begin
  logPath := 'd:\test.log';
  AssignFile(log, logPath);
  Append(log);
  i := 0;
  while not self.Terminated do
  begin
    Sleep(1);
    Writeln(log, IntToStr(i));
    if i=10 then
      Terminate;
    i := i + 1;
  end;
  CloseFile(log);
end;

end. 
```

主要服务单位：

```
unit Unit_main;

interface

uses
  Windows, Messages, SysUtils, Classes, Graphics, Controls, SvcMgr, Dialogs,
  ExtCtrls, DB, ADODB, Unit_MyThread;

type
  TDataTransferService = class(TService)
  DBSrc: TADOConnection;

  procedure DataTransferServiceStart(Sender: TService; var Started: Boolean);
  procedure DataTransferServiceContinue(Sender: TService; var Continued: Boolean);
  procedure DataTransferServicePause(Sender: TService; var Paused: Boolean);
  procedure DataTransferServiceStop(Sender: TService; var Stopped: Boolean);

  public
    function GetServiceController: TServiceController; override;
  end;
var
  DataTransferService: TDataTransferService;
  MyThread: TMyThread;
implementation

{$R *.DFM}

procedure ServiceController(CtrlCode: DWord); stdcall;
begin
  DataTransferService.Controller(CtrlCode);
end;

function TDataTransferService.GetServiceController: TServiceController;
begin
  Result := ServiceController;
end;

procedure TDataTransferService.DataTransferServiceStart(Sender: TService;
  var Started: Boolean);
begin
  MyThread := TMyThread.Create(False);
  Started := True;
end;

procedure TDataTransferService.DataTransferServiceContinue(Sender: TService;
  var Continued: Boolean);
begin
  MyThread.Start;
  Continued := True;
end;

procedure TDataTransferService.DataTransferServicePause(Sender: TService;
  var Paused: Boolean);
begin
  MyThread.Suspended := true;
  Paused := True;
end;

procedure TDataTransferService.DataTransferServiceStop(Sender: TService;
  var Stopped: Boolean);
begin
  MyThread.Terminate;
  Stopped := True;
end;

end. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T11:58:50.537

您的服务很可能无法启动，因为您`TADOConnection`的服务中有一个组件。您不能在服务中执行此操作。由于 ADO 是 COM，因此您必须使用 和 初始化每个线程`CoInitialize(nil)`，`CoUninitialize`并且只能在其中创建/使用您的数据库组件。

```
uses
  ActiveX;

procedure TDataTransferService.DataTransferServiceStart(Sender: TService;
  var Started: Boolean);
begin
  CoInitialize(nil);
  DBSrc:= TADOConnection.Create(nil);
  //Initialize and Connect DBSrc
  MyThread := TMyThread.Create(False);
  Started := True;
end;

procedure TDataTransferService.DataTransferServiceStop(Sender: TService;
  var Stopped: Boolean);
begin
  MyThread.Terminate;
  //Disconnect DBSrc
  DBSrc.Free;
  CoUninitialize;
  Stopped := True;
end; 
```

在这里阅读：[可以在线程中使用 TADOConnection](https://stackoverflow.com/questions/3266532/ok-to-use-tadoconnection-in-threads)

# java - 创建一个构造 Rectangle 对象的程序 (java.awt.Rectangle)

> ID：12468216
> 
> 赞同：1
> 
> 时间：2012-09-17T22:59:43.673
> 
> 标签：java

我正在使用 Dr. Java，语言是 java ...我是初学者 * 只是一个基本的矩形

问题：

创建一个构造 Rectangle 对象 (java.awt.Rectangle) 的程序。该对象应该有一个`getWidth(5)`和一个`getHeight(8)` 计算和`System.out.println()`矩形对象的面积。然后计算周长并打印它。

**到目前为止我有什么**

```
//finding the area
int Width = 5;
int Height = 8;
Rectangle bob = new Rectangle(0,0,5,8);
double area = bob.getWidth()*bob.getHeight();
System.out.println("area = " + area);

 // Find the perimeter  
double perimeter = 2*(bob.getHeight()) + 2*(bob.getWidth()); 
System.out.println("get the perimeter = " + perimeter);` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T23:48:05.877

你试过[这个教程](http://docs.oracle.com/javase/tutorial/2d/index.html)吗？它涵盖了 Java 2D 的基础知识，可以帮助您解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T01:36:31.440

您走在正确的轨道上，但是您需要阅读一些有关其`System.out.println(...)`工作原理的信息。

```
Rectangle bob = new Rectangle(10,20,5,8); 
double area = bob.getWidth()*bob.getHeight(); 
System.out.println("area = + area"); 
```

虽然您确实有一个名为 的变量`area`，但您没有在`println`语句中引用它。您在`println`语句中拥有的是一个字符串，它恰好有两个连续的一系列字符，拼写为“区域”，但没有一个是对变量名称的引用。

```
System.out.println("area = " + area); 
```

是完全不同的。有一个字符串，`"area = "`和一个将字符串连接到变量的连接运算符`area`（将自动转换为`String`类型。它是“移动”字符串的终止引号的一个好点，但*含义*完全不同。

```
"area = + area" 
```

一个字符串，带有一些有趣的字符

```
"area = " + area 
```

一个字符串、一个连接运算符和第二个将“转换”为字符串的名称。

# c# - 使用 LINQ to SQL 读取大表：内存不足与分页缓慢

> ID：12468219
> 
> 赞同：5
> 
> 时间：2012-09-17T23:00:06.063
> 
> 标签：c#, sql, database, linq, skip-take

我有一个巨大的表格，我需要按特定顺序阅读并计算一些汇总统计信息。该表已经有一个正确顺序的聚集索引，因此获取记录本身非常快。我正在尝试使用 LINQ to SQL 来简化我需要编写的代码。问题是我不想将所有对象加载到内存中，因为 DataContext 似乎将它们保留在周围——但尝试对它们进行分页会导致可怕的性能问题。

这是故障。最初的尝试是这样的：

```
var logs = 
    (from record in dataContext.someTable 
     where [index is appropriate]
     select record);

foreach( linqEntity l in logs )
{
    // Do stuff with data from l
} 
```

这是相当快的，并且以良好的速率流式传输，但问题是应用程序的内存使用量不断增加，从未停止过。我的猜测是 LINQ to SQL 实体被保存在内存中并且没有被正确处理。[因此，在创建大量对象 C# 时](https://stackoverflow.com/questions/2727591/out-of-memory-when-creating-a-lot-of-objects-c-sharp)读取内存不足后，我尝试了以下方法。这似乎是许多人使用的常见`Skip`/`Take`范例，具有节省内存的附加功能。

请注意，这`_conn`是预先创建的，并且会为每个查询创建一个临时数据上下文，从而导致相关实体被垃圾收集。

```
int skipAmount = 0;
bool finished = false;

while (!finished)
{
    // Trick to allow for automatic garbage collection while iterating through the DB
    using (var tempDataContext = new MyDataContext(_conn) {CommandTimeout = 600})
    {               
        var query =
            (from record in tempDataContext.someTable
             where [index is appropriate]
             select record);

        List<workerLog> logs = query.Skip(skipAmount).Take(BatchSize).ToList();
        if (logs.Count == 0)
        {
            finished = true;
            continue;
        }

        foreach( linqEntity l in logs )
        {
            // Do stuff with data from l
        }

        skipAmount += logs.Count;
    }
} 
```

现在，当我通过数据流式传输时，我有一个理想的行为，即内存使用量根本不会增加。然而，我有一个更糟糕的问题：每个`Skip`都导致数据加载越来越慢，因为底层查询似乎实际上导致服务器遍历所有先前页面的所有数据。在运行查询时，每个页面的加载时间越来越长，我可以看出这正在变成二次运算。此问题已出现在以下帖子中：

*   [LINQ Skip() 问题](https://stackoverflow.com/questions/5261717/linq-skip-problem)
*   [LINQ2SQL 选择订单并跳过/接受](https://stackoverflow.com/questions/8202907/linq2sql-select-orders-and-skip-take)

我似乎找不到使用 LINQ 执行此操作的方法，该方法允许我通过分页数据来限制内存使用，但仍然可以在恒定时间内加载每个页面。有没有办法正确地做到这一点？**我的直觉是，可能有某种方法可以告诉 DataContext 明确忘记上面第一种方法中的对象，但我不知道该怎么做。**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-17T23:20:30.983

疯狂地抓了几根吸管后，我发现这`DataContext`可能`ObjectTrackingEnabled = false`正是医生所要求的。毫不奇怪，它是专门为这样的只读案例设计的。

```
using (var readOnlyDataContext = 
    new MyDataContext(_conn) {CommandTimeout = really_long, ObjectTrackingEnabled = false})
{                                                 
    var logs =
        (from record in readOnlyDataContext.someTable
         where [index is appropriate]
         select record);

    foreach( linqEntity l in logs )
    {
        // Do stuff with data from l   
    }                
} 
```

上述方法在通过对象流式传输时不使用任何内存。写入数据时，我可以使用`DataContext`启用了对象跟踪的其他设备，这似乎可以正常工作。但是，这种方法确实存在 SQL 查询可能需要一个小时或更长时间才能流式传输和完成的问题，因此如果有一种方法可以在不影响性能的情况下进行上述分页，我愿意接受其他选择。

**关于关闭对象跟踪的警告**：我发现当您尝试使用相同的多个并发读取时`DataContext`，您不会收到错误`There is already an open DataReader associated with this Command which must be closed first.`应用程序只是进入一个无限循环，CPU 使用率为 100%。我不确定这是 C# 错误还是功能。

# objective-c - else 语句未触发

> ID：12468220
> 
> 赞同：0
> 
> 时间：2012-09-17T23:00:15.103
> 
> 标签：objective-c, if-statement

我一直在尝试创建一个 if else 语句，它将根据某些约束返回一个文本字符串。前 3 个约束有效，但是当最后一个约束的事件发生时，它会再次触发第二个。随机数生成器偶尔会使用 0 值，所以我想说明这一点。我对此并不陌生，并为缩进等道歉。

我一直在这里找了一会儿，找不到任何似乎涵盖这一点的东西。如果我错过了它，也将不胜感激在正确方向上的提示。

```
double txtestimateCategory = [mynum computeVolume];
NSLog(@"The volume is %f", txtestimateCategory);
int v = ((txtestimateCategory * 1));
if ((v >= 8000))
{
    NSLog(@"The box is large");
}
else if ((1 <= v < 1000))
{
    NSLog(@"The box is small");
}
else if ((1000 <= v < 8000))
{
    NSLog(@"The box is medium");
}
else
{
      NSLog(@"The box is a lie");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T23:09:04.830

比较器是二元运算符。你必须写：

```
else if (1 <= v && v < 1000) 
```

等等

（否则，您将评估类似`true < 1000`, 并隐式`true`转换为`1`。不是您的意思！）

# java - 格式化秒和分钟

> ID：12468226
> 
> 赞同：15
> 
> 时间：2012-09-17T23:00:46.187
> 
> 标签：java, time, format

我需要从毫秒格式化秒和分钟。我正在使用倒数计时器。有人有建议吗？我看了乔达时间。但我需要的只是一种格式，所以我有 1:05 而不是 1:5。谢谢

```
private void walk() {
    new CountDownTimer(15000, 1000) {
        @Override
        public void onFinish() {
            lapCounter++;
            lapNumber.setText("Lap Number: " + lapCounter);
            run();
        }

        @Override
        public void onTick(long millisUntilFinished) {
            text.setText("Time left:" + millisUntilFinished/1000);
        }
    }.start();
} 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-09-17T23:17:28.250

您可以使用标准的日期格式化类来做到这一点，但这可能有点重。我只会使用 String.format 方法。例如：

```
int minutes = time / (60 * 1000);
int seconds = (time / 1000) % 60;
String str = String.format("%d:%02d", minutes, seconds); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-17T23:12:59.617

只要您知道自己的时间不会超过 60 分钟，一个真正懒惰的方法就是约会并使用`SimpleDateFormat`

```
public void onTick(long millisUntilFinished) {
     SimpleDateFormat dateFormat = new SimpleDateFormat("mm:ss");
     dateFormat.setTimeZone(TimeZone.getTimeZone("GMT"));
     Date date = new Date(millisUntilFinished);
     text.setText("Time left:" + dateFormat.format(date));
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-02-11T10:37:38.253

我会用

```
org.apache.commons.lang.time.DurationFormatUtils.formatDuration(millisUntilFinished, "mm:ss") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T04:02:39.903

我使用了 Apache Commons StopWatch 类。它的 toString 方法的默认输出类似于 ISO8601，小时:分钟:秒.毫秒。

[Apache 秒表示例](http://www.java2s.com/Code/JavaAPI/org.apache.commons.logging/StopWatchgetTime.htm)

# dll - 16 位 DLL 的 Dependency Walker 等效项

> ID：12468229
> 
> 赞同：2
> 
> 时间：2012-09-17T23:00:56.560
> 
> 标签：dll, dependencies, 16-bit

我需要找到一个 16 位 DLL 文件的依赖项和函数。我找到了 Dependency Walker，它看起来非常有用，但它不适用于 16 位 DLL。有谁知道一个好的替代方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T23:46:33.763

您可以尝试[SCANBIN](http://www.bellamyjc.org/en/scanbin.html)，看起来它可以完成工作，并且网页直接来自 90 年代。

# c - for循环上的C分段错误

> ID：12468231
> 
> 赞同：2
> 
> 时间：2012-09-17T23:01:05.030
> 
> 标签：c, loops, for-loop, segmentation-fault, fault

```
int main(int argc, char **argv){

    // If the user does not have the right amount of arguments exit the program and display message
    if(!(argc >= 2)){
        printf("Usage: %s -l -c -w -L <filenames>");
        exit(-1);
    }

    size_t iscFlag = 0;
    size_t islFlag = 0;
    size_t iswFlag = 0;
    size_t isLFlag = 0;
    FILE *src; 
    puts("Work work");  
    // For loop that checks for all the flags
    int i;
    for(i = 1; i < 5; i++){
        if(strcmp(argv[i], "-c") == 0){
            iscFlag = 1;            
        }else if(strcmp(argv[i], "-l") == 0){
            islFlag = 1;
        }else if(strcmp(argv[i], "-w") == 0){
            iswFlag = 1;
        }else if(strcmp(argv[i], "-L") == 0){
            isLFlag = 1;
        }
    } 
```

我正在尝试制作一个简单的 for 循环来检查标志以在 UNIX 类型的终端中重新创建 wc 命令。有人知道for循环是怎么回事吗？我得到一个分段错误。还有更多代码，但我只是发布其中的一部分。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T23:03:33.500

和

```
for(i = 1; i < 5; i++){
    if(strcmp(argv[i], "-c") == 0){ 
```

你应该确保`argc >= 5`，否则`strcmp`会收到一个`NULL`指针`i == argc`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T23:04:12.763

您正在查看您`argv[i]`何时`i`一路上升到四个，但您只检查`argc >= 2`. 我想当你有三个或四个参数时你会得到一个段错误，只有当你有五个或更多参数时它才会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T23:04:29.490

```
for(i = 1; i < 5; i++){
        if(strcmp(argv[i], "-c") == 0){
            iscFlag = 1;
            continue;           
        }else if(strcmp(argv[i], "-l") == 0){
            islFlag = 1;
            continue;
        }else if(strcmp(argv[i], "-w") == 0){
            iswFlag = 1;
            continue;
        }else if(strcmp(argv[i], "-L") == 0){
            isLFlag = 1;
            continue;
        }
        break;
    } 
```

用它修复它！

# bash - 在shell中打印具有多行值的变量？

> ID：12468233
> 
> 赞同：18
> 
> 时间：2012-09-17T23:01:19.643
> 
> 标签：bash, shell, unix, environment-variables

在 Bash（或其他 shell）中，如何打印具有多行值的环境变量？

```
text='line1
line2' 
```

我知道一个简单的通常`echo $text`不会开箱即用。一些 $IFS 调整会有帮助吗？

我目前的解决方法是`ruby -e 'print ENV["text"]'`. 这可以在纯shell中完成吗？我想知道`env`command 是否会采用未解析的 var 名称，但似乎没有。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-09-17T23:08:12.200

与往常一样的解决方案。

```
echo "$text" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T23:08:56.493

```
export TEST="A\nB\nC"
echo $TEST 
```

给出输出：

```
A\nB\nC 
```

但：

```
echo -e $TEST
A
B
C 
```

因此，假设我正确理解了您的问题，答案似乎是**echo的“** **-e** ”参数。

# javascript - 如何删除事件侦听器？

> ID：12468240
> 
> 赞同：0
> 
> 时间：2012-09-17T23:02:00.443
> 
> 标签：javascript, jquery, javascript-events

> **可能重复：**
> [JavaScript：删除事件侦听器](https://stackoverflow.com/questions/4402287/javascript-remove-event-listener)

在单击“开始”按钮后，我试图从导航中删除一些事件侦听器。我似乎没有什么可以开火的。

这是我用来执行此操作的代码：

```
var startButton = document.getElementById('startButton');

startButton.addEventListener('click', function() {
    hrNav.removeEventListener('mousedown', highlight, false);
    alert('Did it remove the listener?');
}, false); 
```

我试图删除的事件监听器是：

```
if(hrNav.addEventListener){  
    hrNav.addEventListener('mousedown', highlight, false);  
    return true;  
} else {  
    hrNav.attachEvent('on'+'click', highlight);  
    return true;  
} 
```

所有这些都包含在一个 jQuery`document.ready`函数中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T23:31:43.820

既然你说你正在使用 jQuery。尝试这样的事情：http: [//jsfiddle.net/MmFb2/4/](http://jsfiddle.net/MmFb2/4/)

**JS**

```
$(function(){
    var startButton = $('#startButton');
    var hrNav = $('#hrNav');

    startButton.bind('click', function() {
        hrNav.unbind('click');
    }); 

    var toggle = false; 
    hrNav.bind('click', function(){
        var ele = $(this); 
        if(toggle){
            ele.css('background-color', '');
        }else{            
            ele.css('background-color', 'yellow');
        }
        toggle = !toggle;
    });
}); 
```

​<strong>HTML

```
<input id="startButton" type="button" value='click to disable' />
<div id="hrNav">Click me to highlight</div>​ 
```

# sql - 查询 Derby 时如何指定组内结果的顺序？

> ID：12468245
> 
> 赞同：2
> 
> 时间：2012-09-17T23:02:31.220
> 
> 标签：sql, group-by, sql-order-by, derby

我正在使用 Derby 数据库。

我有一张这样的桌子：

```
TB_ORDERS
BUYER_NAME  DATE_CREATED    OTHER_COLLUMS ......
---------------------------------------------
 DAVID       2012-09-01         ----
 PETER       2012-09-14         ----
 DAVID       2012-09-05         ----
 PETER       2012-09-02         ----
 DAVID       2012-08-15         ----
 MARY        2012-09-02         ----
 MARY        2012-09-15         ---- 
```

我试图获得按 BUYER_NAME 分组的结果，其中每个组应按 DATE_CREATED 排序，最后按组的最近日期排序，如下所示：

```
MARY    2012-09-15
MARY    2012-09-12
PETER   2012-09-14
PETER   2012-09-02
DAVID   2012-09-05
DAVID   2012-09-01
DAVID   2012-08-15 
```

如您所见，Mary's Group 具有最新的 date_created，因此它位于顶部。然后我们将彼得的小组排在第二位（请注意，彼得小组的日期“09-14”高于玛丽小组的一个日期“09-12”但是，彼得小组放在玛丽小组之后，因为每件事都应该由组的最近日期。

我已经尝试了我所知道的所有事情，但没有成功。我得到的最接近的是：

```
Select date_created, buyer_name 
From ORDERS 
Order By buyer_name,date_created Desc; 
```

但是，这些组不按最近的组日期排序。

我应该在我的代码中这样做还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:27:17.677

此查询将为您提供每个买家名称的最新创建日期以及您已经拥有的结果集。如果您在 Order By 子句中包含这个新列，它应该可以解决问题：

```
Select o.date_created, o.buyer_name,
       (select max(date_created) from orders where buyer_name = o.buyer_name) as most_recent_date
From ORDERS o
Order By most_recent_date, o.buyer_name, o.date_created Desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T23:08:25.423

恩里克，感谢您提供如此优雅的解决方案。在发布问题之前，我已经尝试了至少 3 天。

现在，我有了一个新的。当我尝试对每页 3 个条目的查询进行分页时，我在第一页和第二页中都得到了 Petter。为了解决这个问题，我使用了一个子查询，在其中我选择了按买家分组的所有不同的 date_created，这就是我进行分页的地方。有用。但是，它不像您的那样优雅和高效。这是我糟糕的解决方案（我添加了一个新行“WHERE”）：

```
Select o.date_created, o.buyer_name,
    (select max(date_created) from orders where buyer_name = o.buyer_name) as most_recent_date
From ORDERS o  
    where buyer_name in (SELECT buyer_name FROM ORDERS  WHERE date_created in (SELECT  MAX(date_created)  FROM ORDERS GROUP BY buyer_name ORDER BY 1 DESC OFFSET 3 ROWS FETCH NEXT 3 ROWS ONLY))
Order By  most_recent_date, o.buyer_name, o.date_created ASC

PS: the resultset shows the oldest date first and for that I am using a
Collections.reverse(list); 
```

知识是好的，但想象力更好。

再次感谢你的时间，阿曼多

# javascript - 如何在 JQuery/Javascript 中检测点击的 href URL

> ID：12468247
> 
> 赞同：3
> 
> 时间：2012-09-17T23:02:34.497
> 
> 标签：javascript, jquery

有谁知道如何在 JQuery 中检测点击的 href URL？例如我有以下链接，有些是重定向到新页面，有些会调用 javascript 来展开 div。如果没有使用 ID，我如何使用 JQuery/Javascript 来检测 href。

```
<a href="www.test.com">Test 1</a>
<a href="javascript:test()">Test 2</a>
<a href="www.test2.com">Test 3</a>
<a href="www.test3.com">Test 4</a>
<a href="javascript:test2()">Test 5</a> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T23:14:11.847

> 有谁知道如何在 JQuery 中检测点击的 href URL？

```
$("a").click(function(event){
    // Capture the href from the selected link...
    var link = this.href;

    alert(link);

    // do something if required....

    // would prevent the link from executing, if that is something you want to do...
    return false; // not needed if you want the link to execute normally...
}); 
```

# java - 将递归转换为迭代

> ID：12468251
> 
> 赞同：3
> 
> 时间：2012-09-17T23:02:58.527
> 
> 标签：java, recursion, iteration

我正在尝试将这种递归方法转换为迭代方法，但我有点卡住了，因为我的书解释得不够多。此方法在两个值之间的数组中搜索特定值并返回索引。任何帮助或正确方向的观点将不胜感激。

```
public static int binarySearch(int anArray[], int first, int last, int value) {
    int index;

    if (first > last) {
        index = -1;
    } else {
        int mid = (first + last) / 2;

        if(value == anArray[mid]) {
            index = mid;
        } else if(value < anArray[mid]) { //Point x
            index = binarySearch(anArray, first, mid - 1, value);
        } else { //Point Y
            index = binarySearch(anArray, mid + 1, last, value);
        }
    }

    return index;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T23:13:14.180

在这种情况下，它实际上是一个非常简单的转换。基本上，您只需将整个事物包装在一个循环中，并修改您的参数，而不是进行递归调用。

在函数中有多个递归调用的情况下（例如遍历树），它变得更加复杂；但是，在这种情况下，迭代版本和递归版本几乎相同。

```
public static int binarySearch(int anArray[], int first, int last, int value) {

    do {
        if (first > last) {
            return -1;
        } else {
            int mid = (first + last) / 2;

            if(value == anArray[mid]) {
                return mid;
            } else if(value < anArray[mid]) { //Point x
                last = mid - 1;
                //index = binarySearch(anArray, first, mid - 1, value);
            } else { //Point Y
                first = mid + 1;
                //index = binarySearch(anArray, mid + 1, last, value);
            }
        }
    }
    while(true);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T23:15:15.837

你这样做。识别参数并将它们变成循环变量。不要调用函数，而是更新变量。而不是从函数返回 - 从循环中退出：

```
public static int binarySearch(int anArray[], int first, int last, int value) {
  int index;
  int done = 0;              // LOOP CONTROL

  while (done == 0) {        // A LOOP:

    if (first > last) {
        index = -1;          // RETURN ---> EXIT FROM LOOP
        done = 1;
    } else {
        int mid = (first + last) / 2;

        if(value == anArray[mid]) {
            index = mid;     // RETURN ---> EXIT FROM LOOP
            done = 1;
        } else if(value < anArray[mid]) { //Point x
            // index = binarySearch(anArray, first, mid - 1, value);
            // CALL ---> UPDATE THE VARIABLES
            last = mid-1;
        } else { //Point Y
            // index = binarySearch(anArray, mid + 1, last, value);
            // CALL ---> UPDATE THE VARIABLES
            first = mid+1;
        }
    }
  } // END LOOP

  return index;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-17T23:10:02.153

这可以在您接到尾随电话时完成。考虑到

```
int f(int x, int y) {
  if (x == 0) { return y; }
  return f(y - 1, x);
} 
```

相当于

```
int f(int x, int y) {
  while (true) {
    // The body of your method goes here as normal.
    if (x == 0) { return y; }
    // Instead of returning the result of a recursive call though,
    // compute the parameters to tail call
    int newX = y - 1;
    int newY = x;
    // overwrite parameters with values to tail call
    x = newX;
    y = newY;
    // let the loop jump us back to the top of the method.
    continue;  // You can put continue in place of return
  }
} 
```

当您的方法调用其他方法时，这些在语义上并不完全等效，因为 Java 允许[调用堆栈自省](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#getStackTrace%28%29)，但由于调用堆栈与被调用者不同，您不太可能遇到问题——这是您最可能遇到的问题into 是你会得到一个无限循环而不是一个`StackOverflowError`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T23:12:56.543

我可以假设，在第一次调用此方法时，`first=0`并且`last=anArray.length`.

从那里开始，我将提出以下建议

```
public static int binarySearch_iterative(int[] anArray, int value) {
    int first, last, mid, index;
    first = 0;
    last = anArray.length - 1; // The last cell of the array

    while(first <= last) {
        mid = (first + last) / 2;
        if(anArray[mid] == value) {
            index = mid;
            break;
        } else {
            if(value < anArray[mid]) {
                last = mid;
            } else {
                first = mid;
            }
        }
        if(first > last) {
            index = -1;
            break;
        }
    }
    return index;
} 
```

我希望这可以帮助你。

# oop - OO：保持相关对象之间一致性的好方法

> ID：12468252
> 
> 赞同：0
> 
> 时间：2012-09-17T23:03:28.230
> 
> 标签：oop, consistency

我有两个类，Server 和 Application，具有多对多的关系：一个服务器可以运行多个应用程序，一个应用程序可以跨多个服务器运行。第三个类 Host 表示单个服务器上的单个应用程序，包括对 Application 和 Server 对象的引用以及其他数据，例如服务器上的应用程序使用的磁盘空间量。Server 和 Application 对象都包含其所有主机的列表：因此，应用程序了解主机，主机了解应用程序，服务器了解主机，主机了解服务器。

我的项目的目的是制定将一堆应用程序迁移到新服务器上的时间表。最初，每个应用程序都有一个迁移开始日期和迁移结束日期。一些应用程序还具有虚拟化的开始和结束日期。如果迁移不能在应用程序的限制内执行（不管这些是什么），就会发生虚拟化。它发生在迁移之前并将应用程序从其约束中释放出来。Application 对象持有一个名为“Schedule”的对象，其中包括这 4 个日期以及一个表示是否要虚拟化的布尔标志，以及一个包含迁移所需工时的“月”列表（或虚拟化）每个特定月份的应用程序。

我们现在希望允许服务器在指定日期单独进行虚拟化。这些服务器上的所有应用程序（或部分应用程序，即主机）将在该日期进行虚拟化；它们将与应用程序的其余部分一起迁移。我们最初决定让服务器类拥有自己的 Schedule 对象。然后在服务器中设置虚拟化日期。但是，我们决定要保持服务器和应用程序计划的一致性 - 例如，服务器计划的迁移开始日期和结束日期应分别设置为在该服务器上运行的所有应用程序的最早开始日期和最晚结束日期服务器。这意味着每次更新应用程序日期时，我们都必须记住更新其所有服务器日期（通过主机对象）。或者，如果我们想更新应用程序'

然后我们考虑在每个 Host 对象中放置一个 Schedule 对象。这解决了一致性问题，但导致了相当多的冗余：因为属于应用程序的所有主机对象都必然具有相同的迁移日期（但可能是不同的虚拟化日期），当您为应用程序设置迁移日期时，您有为每个主机设置相同的日期。此外，在某些情况下，我们需要计算出服务器和应用程序的最早开始日期和最晚结束日期，如上所述。这将涉及：在每个应用程序和服务器对象中保存此数据（有效地为每个对象提供自己的调度，从而带回一致性问题），或者：通过循环在每次需要时动态计算此数据通过所有主持人的日程安排。应用程序每月所需的工时也是如此，它是在应用程序级别计算的，每个主机每月分成几小时，然后在我们需要在应用程序级别再次计算时重新计算。正如您所料，这丝毫没有效率。

这不是一个简单的问题，但我想知道是否有任何公认的策略来处理这种情况。提前抱歉我的帖子冗长；希望我已经把情况说得够清楚了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:52:38.813

一旦我们进入第三段，这很复杂

我将使用以下设计原则

1.  保持应用程序、服务器、主机对象包含最低要求的行为和状态。

例如，应用程序对象可能包含开始日期、结束日期以及虚拟化开始和虚拟化结束日期。想想它是否需要包含服务器列表？或主机实例？

1.  然后想想像这样的小框架作品。

    a) MigrationManager 使用 List 完成迁移的完整过程

b) MigratioContext 将为迁移过程合成信息。

c) ErrorContext 将复合错误和异常处理

Migration Manager 获取 Scheduler 的实例并安排迁移

通过这种方式，我们可以围绕核心业务对象和业务逻辑逐步演化出一种框架类的东西。

重要的事情要记住

1.  关注点分离。
2.  代码的可重用性：例如，您的 Application 对象可能不需要捆绑整个迁移过程。相反，这些事情可以由另一个对象来完成

（此答案基于我的高级理解和可能错误的假设。但我认为您可能会得到一些指导来构建应用程序以满足要求）

我还有一次建议。使用 StarUML 或 ArgoUML 等建模工具将您的想法以图片形式呈现。这将有助于所有成员快速进入问题。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T22:05:55.650

我认为面向对象编程的一个基本原则是，在可能的范围内，状态的每个可变方面都应该始终有一个明确定义的所有者（该所有者可能反过来又被另一个实体所拥有，这由另一个实体转等）。其他对象和实体可能持有对该可变状态的引用，但任何此类引用都应该从所有者的角度来考虑。例如，如果一个方法接受一个对集合的引用并且应该填充它，那么该方法不会考虑操作它拥有的集合，而是考虑操作其他人拥有的集合，因为该实体的利益。

有时需要有不同的对象来拥有应该是相同可变状态的单独副本。这种情况经常出现在图形用户界面之类的事物中，其中对象可能“拥有”对象的旋转角度，但显示控件可能需要缓存该对象在其当前方向上的私有渲染。在一个对象被指定为绝对主控的情况下，这种情况的处理可能会大大简化，并且它会通知其他对象其状态。如果有多个对象，其中没有一个具有独占所有权，但所有对象都应该保持同步，这将非常复杂。

如果您可以使用您的模型以便不需要复制任何状态，我强烈建议您这样做。然而，至关重要的是，您的模型能够代表所有感兴趣的场景，包括两件本应处于相同状态的事物可能不处于相同状态的可能性。最重要的是，状态的每个方面都有明确定义的所有权链，因此当状态的某个方面发生变化时，可以说出谁的状态受到影响。

# javascript - Phonegap 更改按钮值 onclick

> ID：12468255
> 
> 赞同：1
> 
> 时间：2012-09-17T23:03:31.937
> 
> 标签：javascript, android, button, cordova, jquery-mobile

我正在使用 phonegap 并有一些像这样的按钮：

```
<input id="my_button" type="button" onclick="my_function();"/> 
```

我想捕捉点击事件来改变按钮的值，

```
my_function () {
    alert('42');
    document.getElementById('my_button').value = 'foo bar baz';
} 
```

当我在手机中测试该代码时，会显示警报，但按钮值保持不变......

PD：我也在使用jquery mobile，不知道这是否会有所不同。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T23:38:58.377

要更新 jQuery Mobile 按钮小部件的文本，您可以使用`.button()`jQuery Mobile 公开的方法。这很有帮助，因为不同类型的按钮 ( `<a/ >`/ `<input />`/ `<button />`) 需要以不同方式更新。

这是一个例子：

```
my_function () {
    $("#my_button").val("foo bar baz").button("refresh");
} 
```

文档：http: [//jquerymobile.com/demos/1.1.1/docs/buttons/buttons-methods.html](http://jquerymobile.com/demos/1.1.1/docs/buttons/buttons-methods.html)

这是一个演示：http: [//jsfiddle.net/4YPHe/](http://jsfiddle.net/4YPHe/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T05:21:06.747

您还可以使用**jquery的****[attr](http://api.jquery.com/attr/)**方法。 例如： 快乐编码！ **`$("#my_button").attr('value','you_can_change_your_value_here');`**

# ios - UINavigationController更改后ios UIScrollView图像缩放更改

> ID：12468258
> 
> 赞同：0
> 
> 时间：2012-09-17T23:03:39.523
> 
> 标签：ios, uiscrollview, zooming

我有一个带有 UINavigationController 更改视图控制器的应用程序。这些视图控制器中的每一个都有一个 UIScrollView 和一个为缩放设置的 UIImageView。但是，在返回时，有时之前的视图控制器会显示高度放大的图像；而不是推动新控制器之前的位置。在我的视图控制器的 -viewWillAppear 方法中，我将 zoomScale 设置为滚动视图的框架宽度与其内容宽度的比率。弹出视图控制器时，如何使缩放级别至少回到默认值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T23:10:14.090

你让你的 pop 首先运行一个函数，在 pop 到 之后存储你想要的值`NSDictionary`，然后在原始视图控制器的 viewDidLoad 中检索它。

然后使用您的检索数据以您想要的任何状态显示图像。

有关 NSDictionary 教程的链接，请查看[此站点](http://www.roseindia.net/tutorial/iphone/examples/nslog/nslogndictionary.html)和[此 youtubeVideo。](http://www.youtube.com/watch?v=On_6fC9ZFDw)

# powershell - 为 PowerShell 的 Invoke-Expression 转义变量中的字符

> ID：12468259
> 
> 赞同：4
> 
> 时间：2012-09-17T23:03:53.357
> 
> 标签：powershell

我编写了一个脚本，通过使用 7-Zip 压缩文件来备份一堆文件。问题是某些文件包含“&”和“'”（单引号）。我尝试用“`'”或“`'”替换它们（在下面的变量中），但这也不起作用。我想我不确定与[Invoke-Expression](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/invoke-expression?view=powershell-6)一起使用时转义字符是如何工作的。

以下是代码行：

```
$exec = "& 'C:\Program Files\7-Zip\7z.exe' u -mx5 -tzip -r  '$DestFileZip' '$DestFile'"

Invoke-Expression $exec 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-29T07:36:46.103

[该线程](http://social.technet.microsoft.com/Forums/windowsserver/en-US/cd08c144-7105-421d-bbce-ab27dcee0fb7/escaping-parameters-for-an-external-program-in-invokeexpression)提到：

```
$exec = @'
& "C:\Program Files\7-Zip\7z.exe" u -mx5 -tzip -r "$DestFileZip" "$DestFile"
'@

Invoke-Expression $exec 
```

> 使用`@" "@`分隔符，变量和子表达式将被扩展，但引号和其他特殊字符被视为文字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T23:43:41.283

如果您放弃 Invoke-Expression 并直接执行 7z 是否有效，例如：

```
& 'C:\Program Files\7-Zip\7z.exe' u -mx5 -tzip -r -ppeople123 $DestFileZip $DestFile 
```

尽管您正在使用文件更新 zip，但我不确定您为什么要使用`-r`- 除非 $DestFile 真的是一个目录？无论如何，使用 7z 9.20 这对我有用 - 没有错误：

```
C:\> $destZip = "foo&bar's.zip"
C:\> $destFile = "foo&bar's.txt"
C:\> & 'C:\Program Files\7-Zip\7z.exe' u -mx5 -tzip -ppeople123 $destZip $destFile

7-Zip [64] 9.20  Copyright (c) 1999-2010 Igo Pavlov  2010-11-18    
Scanning

Creating archive foo&bar's.zip

Compressing foo&bar's.txt

Everything is OK 
```

# javascript - jQuery Mobile 滑块捕捉？

> ID：12468263
> 
> 赞同：1
> 
> 时间：2012-09-17T23:04:27.770
> 
> 标签：javascript, jquery, jquery-mobile, jquery-slider

我花了 2 个小时来尝试来自不同来源的随机代码，这些代码声称他们已经设法将滑块捕捉到特定点。我不确定这对于 jQuery Mobile 库是否可行，因为 jQuery UI 版本确实支持它，但我真的需要为当前项目找出一些东西。

基本上我有一个不同日期的时间表。它们不在“步数”中，例如 10 或 20，它们是不同的数字。像 1、3、10、12、32 之类的东西。我需要滑块在这些点上捕捉。

目前，我有一些东西只在测试 step attr。

```
$('#slider-1').live( "change", function(e) {
    var step = $(this).attr('step'),
        val = $(this).val();
    if(step % val == step || val == step){
        console.log(val)
    }
}); 
```

我在使用滑块时遇到的问题，不仅仅是捕捉问题，是当我在 20 或 40 或 60 等附近滑动时，我正在获取控制台日志。它没有登录 20 等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T00:32:35.413

Figured it out after many iterations of code and reading the documentation for specific events I can bind.

So essentially I had a timeline of numbers in my array that looks something like:

-0--10--20-----70--100---150---200---250---300---350---400-----500----------------1000

I needed to snap to the nearest number depending on the position of the slider-handle. I did this by testing the current value when the slider was being moved against the closest number in the array. I would then dynamically change the sliders value and would then have to do a force refresh of the slider to see the change.

```
$(function() {

    /*  
    Array of values between 0 - 1000 (can be any set of numbers you want to snap to, 
    but you must make sure the 'max' attribute on the input element is <= the last 
    value in the array)  
    */
    var values = [0, 10, 20, 70, 100, 150, 200, 250, 300, 350, 400, 500, 1000],

        /*
        A way for us to check the current and previous values of the slider so we only 
        call doSomething() if these are different. This way the function isn't called twice. These should NOT have the same values on init.
        */
        currentVal = 0,
        prevVal = null,

        // Assign our slider to a variable so we're not hitting the dom repeatedly. 
        $slider = $("#slider-1");

    /*
    After each change of our input value, we assign the slider value to the nearest number
    in our array for our "snap" effect
    */
    $($slider).bind("change", function(){
        $($slider).val(findNearest($($slider).val()))
    });

    /*
    We must capture click events on the slider itself if the user doesn't drag the handle.
    */
    $(".ui-slider[role=application]").bind("vclick",function(){
        $($slider).slider('refresh');
    })

    /*
    jQuery creates new dom elements for us, which in the case of the handle, is an anchor element. 
    Use mouseup method to test on the computer, otherwise touchend method for mobile devices.
    */
    $("a.ui-slider-handle").touchend(function(){
        // If our currentVal hasn't changed after a snap action, do nothing, otherwise call doSomething()
        if(currentVal != prevVal) {
            prevVal = currentVal;
            doSomething();
        }

        // Force slider refresh for visible snap effect
        $($slider).slider('refresh');
    })

    // Used to iterate over our array and check for nearest value to what is passed in
    function findNearest(goal) {
        var closest = null;
        $.each(values, function(){
          if (closest == null || Math.abs(this - goal) < Math.abs(closest - goal)) {
            closest = this;
          }
        });
        return currentVal = Number(closest);
    }

    function doSomething(){
        ... 
    }
}); 
```

And my HTML:

```
<label for="slider-1" id="slider_label_1">Input slider:</label>
<input type="range" name="slider-1" id="slider-1" value="0" min="0" max="1000" step="10" /> 
```

# c - 如何使用 libavcodec 流式传输带有 mp3 音频的 h.264 视频？

> ID：12468265
> 
> 赞同：4
> 
> 时间：2012-09-17T23:04:28.530
> 
> 标签：c, ffmpeg, libavcodec

我从网络摄像头读取 h.264 帧并从麦克风捕获音频。我需要将实时视频流式传输到 ffserver。在调试期间，我使用 ffmpeg 使用以下命令从 ffserver 读取视频：

```
ffmpeg -i http://127.0.0.1:12345/robot.avi -vcodec copy -acodec copy out.avi 
```

我的输出文件中的视频略微加速。如果我添加一个音频流，它会加速几次。有时输出文件中没有音频。

这是我的音频编码代码：

```
#include "v_audio_encoder.h"

extern "C" {
#include <libavcodec/avcodec.h>
}
#include <cassert>

struct VAudioEncoder::Private
{
    AVCodec *m_codec;
    AVCodecContext *m_context;

    std::vector<uint8_t> m_outBuffer;
};

VAudioEncoder::VAudioEncoder( int sampleRate, int bitRate )
{
    d = new Private( );
    d->m_codec = avcodec_find_encoder( CODEC_ID_MP3 );
    assert( d->m_codec );
    d->m_context = avcodec_alloc_context3( d->m_codec );

    // put sample parameters
    d->m_context->channels = 2;
    d->m_context->bit_rate = bitRate;
    d->m_context->sample_rate = sampleRate;
    d->m_context->sample_fmt = AV_SAMPLE_FMT_S16;
    strcpy( d->m_context->codec_name, "libmp3lame" );

    // open it
    int res = avcodec_open2( d->m_context, d->m_codec, 0 );
    assert( res >= 0 );

    d->m_outBuffer.resize( d->m_context->frame_size );
}

VAudioEncoder::~VAudioEncoder( )
{
    avcodec_close( d->m_context );
    av_free( d->m_context );
    delete d;
}

void VAudioEncoder::encode( const std::vector<uint32_t>& samples, std::vector<uint8_t>& outbuf )
{
    assert( (int)samples.size( ) == d->m_context->frame_size );

    int outSize = avcodec_encode_audio( d->m_context, d->m_outBuffer.data( ),
                                        d->m_outBuffer.size( ), reinterpret_cast<const short*>( samples.data( ) ) );
    if( outSize ) {
        outbuf.resize( outSize );
        memcpy( outbuf.data( ), d->m_outBuffer.data( ), outSize );
    }
    else
        outbuf.clear( );
}

int VAudioEncoder::getFrameSize( ) const
{
    return d->m_context->frame_size;
} 
```

这是我的流式视频代码：

```
#include "v_out_video_stream.h"

extern "C" {
#include <libavformat/avformat.h>
#include <libavutil/opt.h>
#include <libavutil/avstring.h>
#include <libavformat/avio.h>
}

#include <stdexcept>
#include <cassert>

struct VStatticRegistrar
{
    VStatticRegistrar( )
    {
        av_register_all( );
        avformat_network_init( );
    }
};

VStatticRegistrar __registrar;

struct VOutVideoStream::Private
{
    AVFormatContext * m_context;
    int m_videoStreamIndex;
    int m_audioStreamIndex;

    int m_videoBitrate;
    int m_width;
    int m_height;
    int m_fps;
    int m_bitrate;

    bool m_waitKeyFrame;
};

VOutVideoStream::VOutVideoStream( int width, int height, int fps, int bitrate )
{
    d = new Private( );
    d->m_width = width;
    d->m_height = height;
    d->m_fps = fps;
    d->m_context = 0;
    d->m_videoStreamIndex = -1;
    d->m_audioStreamIndex = -1;
    d->m_bitrate = bitrate;
    d->m_waitKeyFrame = true;
}

bool VOutVideoStream::connectToServer( const std::string& uri )
{
    assert( ! d->m_context );

    // initalize the AV context
    d->m_context = avformat_alloc_context();
    if( !d->m_context )
        return false;
    // get the output format
    d->m_context->oformat = av_guess_format( "ffm", NULL, NULL );
    if( ! d->m_context->oformat )
        return false;

    strcpy( d->m_context->filename, uri.c_str( ) );

    // add an H.264 stream
    AVStream *stream = avformat_new_stream( d->m_context, NULL );
    if ( ! stream )
        return false;
    // initalize codec
    AVCodecContext* codec = stream->codec;
    if( d->m_context->oformat->flags & AVFMT_GLOBALHEADER )
        codec->flags |= CODEC_FLAG_GLOBAL_HEADER;
    codec->codec_id = CODEC_ID_H264;
    codec->codec_type = AVMEDIA_TYPE_VIDEO;
    strcpy( codec->codec_name, "libx264" );
//    codec->codec_tag = ( unsigned('4') << 24 ) + (unsigned('6') << 16 ) + ( unsigned('2') << 8 ) + 'H';
    codec->width = d->m_width;
    codec->height = d->m_height;
    codec->time_base.den = d->m_fps;
    codec->time_base.num = 1;
    codec->bit_rate = d->m_bitrate;
    d->m_videoStreamIndex = stream->index;

    // add an MP3 stream
    stream = avformat_new_stream( d->m_context, NULL );
    if ( ! stream )
        return false;
    // initalize codec
    codec = stream->codec;
    if( d->m_context->oformat->flags & AVFMT_GLOBALHEADER )
        codec->flags |= CODEC_FLAG_GLOBAL_HEADER;
    codec->codec_id = CODEC_ID_MP3;
    codec->codec_type = AVMEDIA_TYPE_AUDIO;
    strcpy( codec->codec_name, "libmp3lame" );
    codec->sample_fmt = AV_SAMPLE_FMT_S16;
    codec->channels = 2;
    codec->bit_rate = 64000;
    codec->sample_rate = 44100;
    d->m_audioStreamIndex = stream->index;

    // try to open the stream
    if( avio_open( &d->m_context->pb, d->m_context->filename, AVIO_FLAG_WRITE ) < 0 )
         return false;

    // write the header
    return avformat_write_header( d->m_context, NULL ) == 0;
}

void VOutVideoStream::disconnect( )
{
    assert( d->m_context );

    avio_close( d->m_context->pb );
    avformat_free_context( d->m_context );
    d->m_context = 0;
}

VOutVideoStream::~VOutVideoStream( )
{
    if( d->m_context )
        disconnect( );
    delete d;
}

int VOutVideoStream::getVopType( const std::vector<uint8_t>& image )
{
    if( image.size( ) < 6 )
        return -1;
    unsigned char *b = (unsigned char*)image.data( );

    // Verify NAL marker
    if( b[ 0 ] || b[ 1 ] || 0x01 != b[ 2 ] ) {
        ++b;
        if ( b[ 0 ] || b[ 1 ] || 0x01 != b[ 2 ] )
            return -1;
    }

    b += 3;

    // Verify VOP id
    if( 0xb6 == *b ) {
        ++b;
        return ( *b & 0xc0 ) >> 6;
    }

    switch( *b ) {
    case 0x65: return 0;
    case 0x61: return 1;
    case 0x01: return 2;
    }

    return -1;
}

bool VOutVideoStream::sendVideoFrame( std::vector<uint8_t>& image )
{
    // Init packet
    AVPacket pkt;
    av_init_packet( &pkt );
    pkt.flags |= ( 0 >= getVopType( image ) ) ? AV_PKT_FLAG_KEY : 0;

    // Wait for key frame
    if ( d->m_waitKeyFrame ) {
        if( pkt.flags & AV_PKT_FLAG_KEY )
            d->m_waitKeyFrame = false;
        else
            return true;
    }

    pkt.stream_index = d->m_videoStreamIndex;
    pkt.data = image.data( );
    pkt.size = image.size( );
    pkt.pts = pkt.dts = AV_NOPTS_VALUE;

    return av_write_frame( d->m_context, &pkt ) >= 0;
}

bool VOutVideoStream::sendAudioFrame( std::vector<uint8_t>& audio )
{
    // Init packet
    AVPacket pkt;
    av_init_packet( &pkt );
    pkt.stream_index = d->m_audioStreamIndex;
    pkt.data = audio.data( );
    pkt.size = audio.size( );
    pkt.pts = pkt.dts = AV_NOPTS_VALUE;

    return av_write_frame( d->m_context, &pkt ) >= 0;
} 
```

这是我的使用方法：

```
BOOST_AUTO_TEST_CASE(testSendingVideo)
{
    const int framesToGrab = 90000;

    VOutVideoStream stream( VIDEO_WIDTH, VIDEO_HEIGHT, FPS, VIDEO_BITRATE );
    if( stream.connectToServer( URI ) ) {
        VAudioEncoder audioEncoder( AUDIO_SAMPLE_RATE, AUDIO_BIT_RATE );
        VAudioCapture microphone( MICROPHONE_NAME, AUDIO_SAMPLE_RATE, audioEncoder.getFrameSize( ) );

        VLogitecCamera camera( VIDEO_WIDTH, VIDEO_HEIGHT );
        BOOST_REQUIRE( camera.open( CAMERA_PORT ) );
        BOOST_REQUIRE( camera.startCapturing( ) );

        std::vector<uint8_t> image, encodedAudio;
        std::vector<uint32_t> voice;
        boost::system_time startTime;
        int delta;
        for( int i = 0; i < framesToGrab; ++i ) {
            startTime = boost::posix_time::microsec_clock::universal_time( );

            BOOST_REQUIRE( camera.read( image ) );
            BOOST_REQUIRE( microphone.read( voice ) );
            audioEncoder.encode( voice, encodedAudio );

            BOOST_REQUIRE( stream.sendVideoFrame( image ) );
            BOOST_REQUIRE( stream.sendAudioFrame( encodedAudio ) );

            delta = ( boost::posix_time::microsec_clock::universal_time( ) - startTime ).total_milliseconds( );
            if( delta < 1000 / FPS )
                boost::thread::sleep( startTime + boost::posix_time::milliseconds( 1000 / FPS - delta ) );
        }

        BOOST_REQUIRE( camera.stopCapturing( ) );
        BOOST_REQUIRE( camera.close( ) );
    }
    else
        std::cout << "failed to connect to server" << std::endl;
} 
```

我认为我的问题在于 PTS 和 DTS。谁能帮我？

# c# - .NET Framework 4.5 的意外加速

> ID：12468267
> 
> 赞同：5
> 
> 时间：2012-09-17T23:04:47.027
> 
> 标签：c#, .net

在过去的几个月里，我一直在运行一个我用 C# 编写的处理器密集型程序，它被称为 Zeros6。

到目前为止，大约经过的时间为 157 天，总处理器时间为 1,217 天。【电脑部分细节：Intel Core i7 2600 / 3.4 GHz / 4 cores + hyperthreading -> 8个处理器。】

我使用 Visual Studio Express 2010 和 .NET Framework 的第 4 版（我认为）编写了该程序。

不管怎样，今天我决定安装 Visual Studio Express 2012。安装程序安装了 .NET Framework 4.5 版，然后请求重新启动以继续安装。我停止了 Zeros6 程序并确定了重新启动。重启后 Zeros6 像往常一样自动重启，Visual Studio 安装继续并很快完成。然后我震惊地发现 Zeros6 的运行速度比平时快得多。通常相当稳定在 5.5（每位数皮秒）的速度指标已降至 2.0 - 我从未见过低于 5.34。然后我停止并启动了几次程序，然后再次重新启动计算机，但速度继续提高。如果我们称旧速度为 100%，则新速度为 275%！

我很想知道发生了什么。

一些声明...

```
uint[] digits;  
uint   startI;  
uint   stopI;  
public static readonly int  bigPowerIncrement = 34;  
public static readonly uint myBase = 1000000000; 
```

所有 8 个处理器大部分时间都在做这件事……

```
 {
    ulong carry = 0;
    unchecked
    {
      for (uint i = startI; i < stopI; i++)
      {
        ulong m = ((ulong)digits[i] << bigPowerIncrement) | carry;
        carry = m/myBase;
        if ((digits[i] = (uint)(m - myBase*carry)) < 1000000)
        { // do this about one time in 1000...
          h.specials[h.specialCount++] = i;
        }
      } // i loop
    } // unchecked
    h.carry = carry;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T23:09:37.443

很难*确切*知道有哪些改进，但 .NET 4.5 中有不少改进。由于它是对 .NET 4 的就地升级，您将从这些改进中受益。

> h.specials[h.specialCount++] = i;

例如，如果`h.specials`是 a `ConcurrentDictionary<T,U>`，仅此一项就可能是改进。该`ConcurrentDictionary<T,U>`类型在 .NET 4.5 中得到了显着改进。

它也可能只是一种新的或更改的 JIT 优化，现在使您受益，这是以前没有的，或者许多其他事情。

# java - 如何在不使用 Java 中的 JMF 的情况下控制视频上的 fps

> ID：12468268
> 
> 赞同：1
> 
> 时间：2012-09-17T23:04:49.787
> 
> 标签：java

我即将编写一个程序，可以将 .rgb 视频文件作为输入，并指定他的 fps 并播放出来。但是不使用JMF包我怎么能达到这个目的，因为我觉得这个程序的意思是知道逐帧是如何工作的，所以我决定使用BufferedImage作为我的工具来实现这个程序，但我还是不知道它是如何在视频上工作的（逐帧）。

这是TA给我们的入门代码：我尝试了很多东西，但是两帧之间的延迟非常明显，我不知道为什么。是否有任何有效的方法可以在不使用任何 JMF 包的情况下逐帧播放视频。

```
import java.awt.*;
import java.awt.image.*;
import java.io.*;
import javax.swing.*;

public class imageReader {

    public static void main(String[] args) {
        String fileName = args[0];
        int width = Integer.parseInt(args[1]);
        int height = Integer.parseInt(args[2]);

        BufferedImage img = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);

        try {
            File file = new File(fileName+".rgb");
            InputStream is = new FileInputStream(file);
            //BufferedInputStream bis = new BufferedInputStream(is);

            long len = file.length();  //bytes in one frame (consist of R,G,B frame)
            byte[] bytes = new byte[10000000];

            int offset = 0;
            int numRead = 0;
            while (offset < bytes.length && (numRead=is.read(bytes, offset, bytes.length-offset)) >= 0) {
                offset += numRead;
            }
            System.out.println("\noffset = "+ offset);   //7603200
            System.out.println("numRead = "+ numRead);   //7603200
            System.out.println("file length: " + len);   //7603200
            System.out.println("frame #: "+ (offset/(width*height*3))); //100

            JFrame frame = new JFrame();  
            frame.setVisible(true);

            int ind = 0;
            int f = 1;

            while(ind < offset){
                for(int y = 0; y < height; y++){

                    for(int x = 0; x < width; x++){

                        byte a = 0;
                        byte r = bytes[ind];
                        byte g = bytes[ind+height*width];
                        byte b = bytes[ind+height*width*2]; 

                        int pix = 0xff000000 | ((r & 0xff) << 16) | ((g & 0xff) << 8) | (b & 0xff);
                        //int pix = ((a << 24) + (r << 16) + (g << 8) + b);
                        img.setRGB(x,y,pix);
                        ind++;
                    }
                }
                JLabel label = new JLabel(new ImageIcon(img));  
                frame.getContentPane().add(label, BorderLayout.CENTER);  
                frame.pack();  
                System.out.println("frame #: "+ ind);
            }

            System.out.print("end");

        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        // Use a label to display the image
        /*JFrame frame = new JFrame();
         *JLabel label = new JLabel(new ImageIcon(img));
         *frame.getContentPane().add(label, BorderLayout.CENTER);
         *frame.pack();
         *frame.setVisible(true);
         **/

    }

} 
```

这段代码出了什么问题？？

# php - 未定义的索引：页面在

> ID：12468275
> 
> 赞同：7
> 
> 时间：2012-09-17T23:05:34.567
> 
> 标签：php, pagination, php-5.3

好的，我的页面上出现上述错误，我是第一次使用 PHP 5.3，之前使用过此代码，但从未收到此通知，所以我希望得到一些指导。我已经查看了一些问题，但是当我尝试将解决方案应用于我的代码时，它似乎不起作用。

此代码是来自纸混搭的 PHP 分页脚本，因此如果我能找到答案，它可能会帮助其他也在使用此代码并遇到相同问题的人。

生成通知的代码是这样的 -

```
$page = mysql_escape_string($_GET['page']);
if($page){
    $start = ($page - 1) * $limit; 
}else{
    $start = 0; 
    } 
```

从我读过的内容来看，建议添加 isset 并将代码更改为如下所示，但是我仍然遇到相同的错误。

```
$page = mysql_real_escape_string($_GET['page']);
 if(!isset($page)){
    $start = ($page - 1) * $limit; 
}else{
    $start = 0; 
    } 
```

任何意见，将不胜感激。

谢谢

斯坦

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T23:08:42.517

“未定义索引”错误基本上是在告诉您您尝试使用没有匹配元素的索引从数组中获取某些内容。

在这种情况下，问题出在您的`isset()`呼叫上方的行中。索引`'page'`未在您的`$_GET`数组中定义。所以你需要先检查是否`$_GET['page']`设置：

```
if (isset($_GET['page'])) {
  $page = mysql_real_escape_string($_GET['page']);
  // do more stuff
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-12T18:44:00.733

我遇到了一些问题..这是我得到的最好和最短的解决方案..

```
$page = (isset($_GET["page"]) ? $_GET["page"]:$config["per_page"] =''); 
```

或者

```
$page = (isset($_GET['page'])) ? $_GET['page'] : 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T23:08:27.843

错误在你的第一行做

```
$page = isset($_GET['page']) ? mysql_real_escape_string($_GET['page']) : 0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T23:09:03.130

在您的代码中，您检查页面是否未设置，然后使用该页面，从而产生相同的通知。只需远程感叹号。试试这个：

```
$page = mysql_real_escape_string($_GET['page']);
 if(isset($page)){
    $start = ($page - 1) * $limit; 
}else{
    $start = 0; 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T23:09:06.480

尽管我在您的代码中看不到它，但我愿意打赌您`$_GET['page']`的代码中有一个空变量。进行分页时，如果您使用`<a href="somePage.php?page=4`链接样式，则需要继续将变量附加到锚标记。

检查您的链接以确保您*一直*将其传递回去。

`undefined index`当您尝试访问不存在的数组元素时会出现错误消息- 在这种情况下，它几乎可以肯定是`$_GET`数组。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-14T09:11:04.977

* * *

**希望这会有所帮助**

```
<?php
# default page
$default = 'home.php';

# set document root path
$base = $_SERVER['DOCUMENT_ROOT'].'/redirect/';

# list of all site pages + the id they will be called by
$pages = array('home' => 'home.php','about' => 'about.php','contact' => 'contact.php');
if (isset($_GET['page'])) {
  $page = mysql_real_escape_string($_GET['page']);
if(array_key_exists($_GET['page'], $pages))
{
foreach($pages as $pageid => $pagename) {
if($_GET['page'] == $pageid && file_exists($base.$pagename))
{
          /* if somebody's making a request for ?page=xxx and
          the page exists in the $pages array, we display it
          checking first it also exists as a page on the server */
          include $base.$pagename;
      }
   } // end foreach
}
else {
          /* if the page isn't listed in $pages, or there's no ?page=xxx request
          we show the default page, again we'll also just make sure it exists as a file
          on the server */
          if(file_exists($base.$default)) include $base.$default;
 }
} else {
    header ("Location: index.php?page=home");
}

?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>My Website</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<body>
<div style="height:50px;border:1px solid #000;margin-bottom:10px">

</div>

<div style="float:left;width:15%;border:1px solid #000">
 <ul style="margin-left:10px;list-style-type:none">
     <li><a href="index.php?page=home">Home</a></li>
     <li><a href="index.php?page=about">About</a></li>
     <li><a href="index.php?page=contact">Contact</a></li>
 </ul>
</div>

<div style="float:right;width:80%;border:1px solid #000">
     <div style="padding:4px">
     <!-- content here -->
     </div>
</div>
</body>
</html> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-09-17T23:10:54.870

你应该这样做

```
if(isset($_GET['page']){  
  $page = mysql_real_escape_string($_GET['page']);  
  if(!isset($page)){  
     $start = ($page - 1) * $limit;   
  }else{  
    $start = 0; 
  }   
} 
```

`Undefined index: page`指一些`array`特定的错误。`index`在您的代码中，具有值`page`的数组`$_GET`应该是需要一些保护的代码的第一行。

# c++ - 对于可移植代码，我应该使用 long long 还是 int64_t？

> ID：12468281
> 
> 赞同：43
> 
> 时间：2012-09-17T23:06:10.713
> 
> 标签：c++, c, types, int64, long-long

我有一个用 C 和 C++ 编写的开源代码库。我正在寻找一种保证*至少*64 位宽的整数类型，它可以在大多数 OS X（英特尔，64 位）和具有开源 C 和 C++ 编译器的 Linux 机器上可靠地编译，而无需太多最终用户的额外工作。Windows 和 32 位客户端支持此时并不重要。

我在 OS X 上做了一些测试，开发者工具附带的最新 GCC 不支持 C+11 模式（因此似乎不能保证`long long`. Clang 也不支持这个，虽然它支持`long long`如果 C99 模式启用，在某个版本之后。

当可移植性是一个重要目标时，一般建议使用`int64_t`代替吗？`long long`使用格式说明符似乎很痛苦。

我可以可靠地将一个`int64_t`to `long long`（同样与 with 的`unsigned`等价物`uint64_t`）一起使用以将它与`long long`作为参数的现有函数和库一起使用吗？（当然，又回来了。）

在这种情况下，如果我发布的代码需要 Clang 功能而不是 GCC，那么 Clang 会取代 GCC 作为 Linux 上的首选编译器吗？在向最终用户提供源代码时，大多数情况下我可以期待那个编译器吗？

基本上，我想向其他将这两种类型用于可移植 C 和 C++ 代码的开发人员征求一些建议，考虑到上述目标，他们可能会对什么可能是更好的长期方式提出一些建议.

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-17T23:15:11.703

类型`long long`和`unsigned long long`是标准 C 和标准 C++ 类型，每个类型至少有 64 位。我知道的所有编译器都提供这些类型，除非可能在某种`-pedantic`模式下，但在这种情况下`int64_t`，或者`uint64_t`在 C++ 2011 之前的编译器中也不可用。在所有系统`<stdint.h>`上也都可用。也就是说，据我所知，你如何拼写类型并不重要。的主要目标`<stdint.h>`是为特定位数提供最佳匹配。如果您至少需要 64 位，但您还想利用这种类型的快速实现，您可以使用`int_least64_t`or `uint_least64_t`from `<stdint.h>`or `<cstdint>`（如果是后者，名称在 namespace 中定义`std`）。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-09-17T23:12:26.847

> 当可移植性是一个重要目标时，一般建议使用`int64_t`代替吗？`long long`

`int64_t`如果编译器提供但不提供，我会感到非常惊讶`long long`。

如果`long long`存在，它必须至少有 64 位，所以从`(u)int64_t`to 转换`(unsigned) long long`是保值的。

如果你需要一个*正好是*64 位的类型，使用`(u)int64_t`，如果你需要*至少*64 位，`(unsigned) long long`就可以了，就像`(u)int_least64_t`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-05-11T14:43:19.963

使用 int64_t。int64_t 表示 64 位，无论您走到哪里，都会得到 64 位。long long 实际上与 long 一样依赖于实现。也就是说，long long 必须大于或等于 long，但这可能因编译器和平台而异。

# bison - 使用积分 YYSTYPE 使 bison/flex 解析器可重入

> ID：12468282
> 
> 赞同：1
> 
> 时间：2012-09-17T23:06:25.340
> 
> 标签：bison, flex-lexer, reentrancy

我在按照步骤使我的 bison/flex 解析器可重入时遇到了麻烦。

问题似乎出在词法分析器中。由于所有解析器都是可重入的，我不能再直接分配 yylval。相反，根据[Flex 手册](http://westes.github.io/flex/manual/Reentrant-Functions.html)，我必须调用此函数：

```
void yyset_lval ( YYSTYPE * yylvalp , yyscan_t scanner ); 
```

但问题是，YYSTYPE 是一个整数类型。它不是动态分配的值，也根本不是左值，所以我不能将指针传递给它！我是否遗漏了什么，如果没有，我应该如何设置 yylvalue？我从来没有遇到过不可重入解析器的这个问题！

更新：好的，我想我可能已经解决了积分类型的问题。现在解析器似乎崩溃了，因为没有设置输入，而且我没有找到任何关于如何告诉词法分析器从哪里读取输入的文档。

弹性文件：

```
%{
#define YYSTYPE Token // Token is a typedef to an integral type
// following two lines added per suggestion from Chris Dodd
#define YYPARSE_PARAM yyscan_t scanner
#define YYLEX_PARAM scanner

%}
%option reentrant
%option bison-bridge

// ...

{D}+{IS}?               {
    *yylval = Tokenint(strtol(yytext,0,10));
     return(CONSTANT); 
} 
```

野牛档案：

```
%{
#define YYSTYPE Token
%define pure-parser
%lex-param {void * scanner}
%parse-param {void * scanner}
%token CONSTANT
// ... 
```

在解析器的这一行发生崩溃：

```
*yy_cp = yyg->yy_hold_char; 
```

我怀疑我可能没有为解析正确初始化所有内容。手册在这个主题上非常混乱，经常引用类型或变量而不解释它们来自哪里或为什么使用它们。我以这种方式调用解析：

```
void * scanner;
yylex_init(&scanner);
yyparse(scanner); // Note: was &scanner, this is wrong and will crash! 
```

通过阅读源代码，yylex_init 正在分配 a`struct yyguts_t`并将其清零。当我到达崩溃时，yy_cp 是一个空指针，实际上整个`struct yyguts_t`仍然是零！所以我怀疑我没有正确初始化*某些东西*，这导致它不知道从哪里获得输入。

最终编辑：我将把这个问题标记为已回答我的原始问题，并将新问题作为新问题重新打开。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T01:00:35.160

通常要制作可重入解析器/扫描器，您将`%option bison-bridge`在`.l`文件和文件`%define api.pure`中使用`.y`。这使得`yylval`一个参数`yylex`而不是一个全局变量。此外，您还需要：

```
%{
#define YYPARSE_PARAM yyscan_t scanner
#define YYLEX_PARAM scanner
%} 
```

在`.y`文件的顶部，将额外的`scanner`参数通过解析器传递给词法分析器。

现在如果`YYSTYPE`是（您的文件`int`中没有`%union`或声明），那么您只需说`YYSTYPE``.y``.l``*yylval = whatever;`

# ios - 无法在模拟器或设备中运行 iOS 项目

> ID：12468290
> 
> 赞同：0
> 
> 时间：2012-09-17T23:07:26.650
> 
> 标签：ios, xcode

我在我的 xcode 项目中进行了一些更改，不知何故，这导致我无法在模拟器或设备中运行该应用程序。我现在可以看到的唯一选项是我的 Mac 64 位。我该如何解决？目标是正确的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T03:43:08.513

尝试这个：

转到编辑方案（在停止按钮附近下拉），然后选择 Excecutable 作为“yourapp.app”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T23:15:42.093

如果您在 XCode (4.4.1) 中打开项目，在左上角单击文件夹图标，然后选择您的项目图标以打开项目设置页面。单击“摘要”选项卡，然后您应该会看到“设备”，您可以在其中选择要定位的设备。

如果这不起作用（您没有看到“iOS 应用程序目标”），您可能需要进入“构建设置”并选择不同的“基础 SDK”——我通常选择“最新 iOS”。您可能选择了 Mac OS X SDK。还要检查“支持的平台”以选择“iOS”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-30T13:26:59.787

另一种为我做的方式......

去管理方案并点击`Autocreate schemes now`左上角..

希望能帮助到你

# flash - 只有某些嵌入式字体有效 - Flex 4.6

> ID：12468291
> 
> 赞同：1
> 
> 时间：2012-09-17T23:07:32.200
> 
> 标签：flash, apache-flex, fonts, flash-builder, embed

我现在完全不知所措......

我一直在尝试将此字体嵌入到我的 Flex 移动应用程序中：
[http ://www.font-zone.com/download.php?fid=111](http://www.font-zone.com/download.php?fid=111)

但由于某种原因它不会显示，它只是恢复为默认值....我尝试过的所有自定义字体都有同样的问题，但有一个：
[http ://www.fonts101.com/fonts /view/Uncategorized/28299/滑块](http://www.fonts101.com/fonts/view/Uncategorized/28299/Slider)

这是我正在使用的代码：

```
global
{
    font-family: bank-gothic-medium-bt;
}
@font-face
{
    fontFamily: bank-gothic-medium-bt;
    src: url("D:\Users\Oisin\Pictures\MW3 Builder\bank-gothic-medium-bt.ttf");
    embedAsCFF: true;
} 
```

我尝试了多种字体和单一名称的字体（认为这可能是问题），但仍然没有。

任何帮助将非常感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:10:07.537

Aha! Got it....

For anyone else having this extremely ridiculous problem...

```
Ensure your font is BOLD! 
```

Buttons by default use bold fonts, and even though I tried specifying the fontWeight(font-weight) to normal it wasn't working.

Now I can actually get started on the app.....phew!

Thanks for all your answers guys!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:31:21.217

这可能是两件事：

1.  Flash 不会嵌入所有字体。出于法律原因，它不会嵌入某些字体。但是，我从未在 Flash CS 之外遇到过这个问题。在 Flash Builder 中，一切似乎都运行良好。
2.  我相信你设置 fontFamily 不正确。当您嵌入字体时，您需要传递一个字符串值作为名称。当你在 CSS 中调用它时，它应该不带引号。这是我嵌入字体的方式（使用 Flash Builder 4.5 和 4.6 以及 3.1-3.4 AIR SDK）

    @font-face { src: url("assets/fonts/BebasNeue.otf"); fontFamily: "BebasNeueEmbedded"; 嵌入AsCFF：真；}

    .progressMeterText { fontFamily: BebasNeueEmbedded; 字体查找：嵌入式CFF；颜色：#828282；字体大小：18pt；}

如果格式显示不正确，我深表歉意。编辑似乎不想接受这种格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T15:39:17.620

也许这会帮助你：

```
var textLayoutFormat:TextLayoutFormat = new TextLayoutFormat();
textLayoutFormat.fontLookup = FontLookup.EMBEDDED_CFF;
textLayoutFormat.renderingMode = RenderingMode.CFF;

textLayoutFormat.color = 0x336633;
textLayoutFormat.fontFamily = "CUSTOM_FONT_FAMILY";
textLayoutFormat.fontSize = 14;

var uic:UIComponent = UIComponent(FlexGlobals.topLevelApplication);
_textFlow.flowComposer.swfContext = ISWFContext(uic.getFontContext(textLayoutFormat.fontFamily, false, false, true));

IEditManager(_textFlow.interactionManager).applyFormatToElement(_textFlow,textLayoutFormat);
_textFlow.flowComposer.updateAllControllers(); 
```

特别是，下面两行是解决方案：

```
var uic:UIComponent = UIComponent(FlexGlobals.topLevelApplication);
_textFlow.flowComposer.swfContext = ISWFContext(uic.getFontContext(textLayoutFormat.fontFamily, false, false, true)); 
```

# java - Spring MessageSource 多次解析/插入字符串

> ID：12468293
> 
> 赞同：1
> 
> 时间：2012-09-17T23:07:33.657
> 
> 标签：java, spring, internationalization

所以，我相当肯定这仅仅是因为我自己缺乏对 Spring 和 Java 中如何发生各种消息解析/插值的理解，我想要什么：

`InternationalMessages.properties`

```
BadParsingFormat={{0}} should fall betweeen {1} and {2}
pointTop=The top coordinate
pointLeft=The left coordinate 
```

`APIEndPoint.java`

```
// Standard implementation and wiring of message source
@Autowired
MessageSource messageSource;

public void someMethod(String somethingToParse) {
    String parsed;
        try {
            parsed = SomeKindOfParser.parse(somethingToParse);
        }
        catch(BadParsingFormatException exception) {
            String error = messageSource.getMessage("BadParsingFormat",
                new Object[]{
                        exception.getVariableName(),
                        exception.getLowerBound(),
                        exception.getUpperBound()
                });
            // Do something useful with this error message
        }
} 
```

在这个俗气的例子中，`exception.getVariableName()`将返回`pointTop`或返回。`pointLeft`我还想进一步解析/插入这些特定名称，但我似乎无法完成。我知道我可以使用另一个 messageSource 调用并单独获取该捆绑包值，但如果我可以避免这种情况，我会更喜欢它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T02:23:38.073

除了您已经建议的方法之外，想不出任何其他方法 - 再次调用 messageSource：

```
BadParsingFormat={0} should fall betweeen {1} and {2}
pointTop=The top coordinate
pointLeft=The left coordinate 
```

带代码

```
 String error = messageSource.getMessage("BadParsingFormat",
            new Object[]{
                    messageSource.getMessage(exception.getVariableName(),null, null),
                    exception.getLowerBound(),
                    exception.getUpperBound()
            }); 
```

# python - 数据容器：类与字典

> ID：12468294
> 
> 赞同：5
> 
> 时间：2012-09-17T23:07:47.470
> 
> 标签：python, class, dictionary

在我看来，鼓励字典超过定义类和使用类。我什么时候应该在课堂上使用字典，反之亦然？

例如，如果我想要一个人字典并且每个人都有一个名字和其他属性，两种简单的方法是：

1.  建立人民字典。每个键将是人名，值将是该人所有属性的字典。

2.  创建一个`Person`包含这些属性的类，然后有一个`Person`s 的字典，名称为键，`Person`对象为值。

两种解决方案似乎都有效并实现了目标，但似乎 python 中的字典仍然是要走的路。实现非常不同，如果我想来回切换，我可能会遇到很多变化，从基于类的实现到基于字典的实现，反之亦然。

那我在交易什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T23:30:48.897

字典是开始或尝试解决问题的方法的好方法。它们不能替代精心设计的课程。有时它是正确的“最终解决方案”，也是处理“我只需要携带一些数据”需求的最有效方式。我发现有时从字典开始很有用，并且通常会编写一些函数来提供我正在处理的特定案例所需的额外行为。在某些时候，我通常会发现切换到使用类而不是字典会更整洁。这通常取决于满足情况需要所需的行为的数量和复杂性。因为在 Python 中定义和使用类非常容易，我发现我从“字典加函数”切换 很早就上课了。（我发现的一件事是“快速组合解决方案”程序在很多情况下都有自己的生命——拥有可以扩展和重构的真实类而不是大量(ab) 使用字典的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T23:09:22.137

除非您还想用数据封装行为，否则您应该使用字典。类不仅用于存储数据，还用于指定对该数据执行的操作。

# jquery - 集成 jQuery.validate 和 selected.js

> ID：12468313
> 
> 赞同：3
> 
> 时间：2012-09-17T23:09:44.467
> 
> 标签：jquery, validation, jquery-chosen

我正在尝试使用由choosen.js 生成的选择下拉列表在表单上设置验证

这是我的代码：

```
$('.chzn-single').bind("change", function(){
     $myform.validate().element($(this));
}); 
```

我在想这样的事情可以工作，但我没有任何成功。有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T23:17:30.497

我通过这样做完成了它：

```
var validator = $("#formid").data('validator');
validator.settings.ignore = ":hidden:not(select)"; 
```

通过这样做，您将验证隐藏的选择字段；chzn 隐藏您的默认列表并将其替换为自己的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T08:01:27.763

在遇到这个问题几天后，我找到了一种对我有用的方法。您需要在选择更改时触发验证，这可以通过 .change() 函数来完成。我使用了以下代码：

```
$("#chosenElement").chosen().change(function() {
        $("#myForm").validate().element("#chosenElement");
    }); 
```

我正在使用所有最新版本（jquery 1.9，jquery.validate 1.11.1，选择 0.9.12）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-23T11:36:22.507

这就是我正在使用的......

```
 $.validator.setDefaults({
        ignore: null, // you can use ":hidden:not(select)"
        errorPlacement: function(error, element) {
            if(element.hasClass('chzn-done')) {
                var id = element.attr("id");
                $("#"+id+"_chzn a").addClass("error");
            }
        }
    });

    $('#myform').validate();//use your form ID or class selector

    $('select').chosen()
        .change(function () {
            var id = $(this).attr("id");
            if($(this).valid())
                $("#"+id+"_chzn a").removeClass("error");
            else
                $("#"+id+"_chzn a").addClass("error");
    }); 
```

然后在css中

```
.chzn-container a.error {
    border-color: red !important;
} 
```

希望这可以帮助....

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-10-09T22:41:32.907

试试这个。

验证时：

```
ignore: function(index, element) {
    return !!$(element).parents(':hidden').length;
}
```

选择时：

```
$('.chosen-select').chosen().change(function() {
   $(this).trigger('click');
});
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-11-25T09:18:11.287

```
This Code will check validation on submit and also when choosen change is fired.
$("#form").validate({
                errorPlacement: function (error, element) {
                    if (element.is('select')) {
                        error.insertAfter(element.siblings(".chosen-container"));
                    } else {
                        error.insertAfter(element);
                    }
                },
                highlight: function (element, errorClass, validClass) {
                    $(element).next().addClass(errorClass);
                },
                unhighlight: function (element, errorClass, validClass) {
                    $(element).next().removeClass(errorClass);
                }
            });

            $(".chosen-select").chosen().change(function () {
                $("#form").validate().element(".chosen-select");
            }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-17T14:07:19.327

最简单的方法是使用以下方法：

这不仅解决了无法查看验证的问题，而且还将标准的**“input-validation-error”**类应用于 selected.js 样式的选择。

有两种情况需要在提交表单和选择更改时都应用它。请参阅下面的三段代码。

1.  第一个设置表单验证以验证隐藏元素。
2.  第二个检查提交时选择的验证。
3.  第三个检查更改时选择的验证。

**设置表单验证以显示隐藏：**

```
var validator = $("#FormID").data('validator');
validator.settings.ignore = ":hidden:not(select)"; 
```

**检查表单提交：**

```
$('#FormID').on('submit', function () {
    var ChosenDropDowns = $('.chzn-done');
    ChosenDropDowns.each(function (index) {
        var ID = $(this).attr("id");
        if (!$(this).valid()) 
        {
            $("#" + ID + "_chzn a").addClass("input-validation-error");
        }
        else 
        {
            $("#" + ID + "_chzn a").removeClass("input-validation-error");
        }
    });
}); 
```

**检查选择更改：**

```
$(".chzn-select").chosen().change(function () {
    var ID = $(this).attr("id");
    if (!$(this).valid()) {
        $("#" + ID + "_chzn a").addClass("input-validation-error");
    }
    else {
        $("#" + ID + "_chzn a").removeClass("input-validation-error");
    }
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-23T21:13:23.413

它忽略了原始选择，因为它是隐藏的。我得到了：

```
$("#Form").data("validator").settings.ignore = ""; 
```

或者

```
var settings = $.data($('#Form')[0], 'validator').settings;
settings.ignore += ':not(.chzn-done)'; 
```

去工作。

# c# - GridView 不显示已通过 CollectionViewSource 异步检索的数据

> ID：12468314
> 
> 赞同：1
> 
> 时间：2012-09-17T23:09:51.273
> 
> 标签：c#, xaml, windows-8, async-await

我正在尝试做的是检索文件集合（异步），然后显示在按文件名的第一个字母分组的 GridView 中。

例如，如果一个文件名为“Pic”，它将显示在标题“P”内的列下。

以下是我的视图模型中的一些代码：

```
public ObservableCollection<File> Files { get; set; }
public List<FileCategory> Items { get; set; }
private FileRepository _fileRepository;
public MoviesPageViewModel()
{
        _fileRepository = new FileRepository();
        this.Construct();
        var filesByCategories = Files.GroupBy(x => x.Title[0].ToString())
            .Select(x => new FileCategory { Title = x.Key, Items = new ObservableCollection<File>(x)});
        Items = filesByCategories.ToList();
}  
private async void Construct()
    {
        Files = new ObservableCollection<File>();
        IList _files = await _fileRepository.GetFiles();
        foreach (File file in _files)
        {
            Files.Add(file);
        }
    } 
```

这是视图中的 CollectionViewSource

```
<CollectionViewSource
        x:Name="groupedItemsViewSource"
        Source="{Binding Items}"
        IsSourceGrouped="true"
        ItemsPath="Items"/> 
```

以及来自同一视图的 GridView（减去模板）

```
<GridView
    x:Name="itemGridView"
    AutomationProperties.AutomationId="ItemGridView"
    AutomationProperties.Name="Grouped Items"
    Margin="116,0,40,46"
    ItemsSource="{Binding Source={StaticResource groupedItemsViewSource}}"
    ItemTemplate="{StaticResource Standard250x250ItemTemplate}"> 
```

当我构建和运行时，屏幕上什么也没有。但是，我知道代码即将开始工作，因为：

1.  在构造函数中删除对 Construct() 的调用并将其替换为一些代码以将一些 File 对象硬编码到 Files
    集合中会产生所需的输出。
2.  删除 CollectionViewSource 的使用并将 GridView 直接绑定到 Files 集合（并且仍然使用异步代码）会在屏幕上显示集合，但当然它们不会被过滤，因为这绕过了 Items 的使用（并将 GridView 绑定到 Items也不产生任何结果）

我相信这可能是因为我的 Items 集合没有任何更改通知，因此集合没有更新到屏幕，因为异步调用在初始加载后进行。

有人知道为什么会发生这种情况和/或提供有关修复的任何建议吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T23:15:35.867

问题是`CollectionViewSource`绑定到`Items`集合并且您正在向集合中添加`Files`项目

更改您的代码以添加`Items`或更改您的 XAML 以指向`Files`

您可能还需要调用 Add 操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T23:37:19.103

我通过进行一些更改来实现这一点。

我将 Items 集合变成了 ObservableCollection，然后移动了 linq 查询并将查询结果添加到异步 Construct 方法中。

这感觉很混乱，但它现在有效。谢谢大家！

# java - 在java中以编程方式编辑apk文件

> ID：12468319
> 
> 赞同：2
> 
> 时间：2012-09-17T23:10:02.210
> 
> 标签：java, android, zip, apk, zipfile

这个问题有点复杂，所以请多多包涵：我有一个 apk 文件，我试图在安装后以编程方式修改。我正在用另一个应用程序编辑它。我首先尝试使用用于 zip 文件管理的内置 java 类来执行此操作，但是当我尝试完全复制除我要修改的文件之外的所有文件并更改我要修改的文件时，应用程序将不再运行。我认为这是因为签名或其他原因，但是当我使用 winRAR 做同样的事情时（解压缩所有文件，创建一个新的 zip 存档，将所有文件复制到具有正常压缩的新 zip 存档中）并将新的 apk ssh 到我的 /data/应用程序文件夹，它工作正常。我的问题是为什么会这样。我认为这可能与 zip headers 或类似的东西有关，有人有什么想法吗？

PS：这是我用来重写 zip 文件的 java 进程的示例：

```
p = Runtime.getRuntime().exec("su");
ZipInputStream in = new ZipInputStream(new FileInputStream("This is the apk containing the asset I want to use to replace the other asset"));
ZipEntry e;
while((e = in.getNextEntry()) != null)
{
    if(e.getName().equals("asset i want to use to replace the other asset"))
        break;
}
ZipOutputStream out = new ZipOutputStream(new FileOutputStream("the output zip file"));
ZipInputStream original = new ZipInputStream(new FileInputStream("the apk i am trying to modify"));
ZipEntry f;
byte[] buf = new byte[1024];
while((f = original.getNextEntry()) != null)
{
    if(!f.getName().equals("the asset i want to replace"))
    {
        out.putNextEntry(new ZipEntry(f.getName()));
        int len;
        while ((len = original.read(buf)) > 0) {
            out.write(buf, 0, len);
        }
        original.closeEntry();
        out.closeEntry();
    }
    else
    {
        out.putNextEntry(new ZipEntry(e.getName()));
        int len;
        while ((len = in.read(buf)) > 0) {
            out.write(buf, 0, len);
        }
        out.closeEntry();
    }
}
in.close();
out.close();
original.close(); 
```

我已经在 android 系统和使用常规软件的 windows 上运行了这个过程，我可以在 winRAR 中打开输出，除了我更改的资产文件之外，它似乎是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T22:32:28.500

您应该知道的唯一一件事是签名 apk 工具的工作原理（解决校验和 - 它们是 zip 条目。目标文件夹是带有 CERT.RSA 的 META-INF - 存在编码校验和以及其他调试信息、CERT.SF 和 MANIFEST .MF - 带有 SHA1-Digest - Base64 编码的哈希（它们很容易被您自己检测到））。但这是真正的黑客攻击！该代码可能很有用（并且被许多“智能程序员”用于动态更改应用程序的图片）并且可能很危险 - 因为您的 apk 文件可以增加到 GB 大小 - 如果您愿意的话。

我认为这个技巧不应该在世界范围内的人们之间传播——它将被限制在程序员的小圈子里。

# ios - setNeedsDisplay 不调用 drawRect:(CGRect)rect

> ID：12468320
> 
> 赞同：2
> 
> 时间：2012-09-17T23:10:03.010
> 
> 标签：ios, quartz-graphics, quartz-2d, cgrect

我正在尝试遵循有关如何在屏幕上绘制一些形状的指南，但在应用程序启动时它工作正常，但我无法使用“重新绘制”形状`setNeedsDisplay`我已经尝试了很多漂浮的东西，比如执行主线程，但它不起作用。

我的应用程序是由这个组成的：

![在此处输入图像描述](../Images/b57b498c15bd9f6f06c0e2cffa41ac3d.png)

我的 UIView 有它自己的类，`DrawView`. 这是我的代码：

**绘图视图.h**

```
#import <UIKit/UIKit.h>

NSInteger drawType;

@interface DrawView : UIView

-(void)drawRect:(CGRect)rect;
-(void)drawNow:(NSInteger)type;

@end 
```

**绘图视图.m**

```
#import "DrawView.h"

@implementation DrawView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)drawRect:(CGRect)rect {

    CGContextRef context = UIGraphicsGetCurrentContext();
    UIColor *color = [UIColor orangeColor];
    CGContextSetStrokeColorWithColor(context, color.CGColor);
    CGContextSetFillColorWithColor(context, color.CGColor);

    NSLog(@"Type: %i",drawType);

    switch (drawType) {
            case 0:
                CGContextMoveToPoint(context, 10, 100);
                CGContextAddLineToPoint(context, 300, 300);
                CGContextSetLineWidth(context, 2.0);
                CGContextStrokePath(context);
                break;
            case 1:
                CGContextAddEllipseInRect(context,CGRectMake(10, 100, 300,440));
                CGContextDrawPath(context, kCGPathFillStroke);
                break;
            case 2:
                CGContextAddRect(context, CGRectMake(10, 100,300,300));
                CGContextDrawPath(context, kCGPathFillStroke);
                break;
            default:
                break;
    }

}

-(void)drawNow:(NSInteger)type {
    drawType = type;
    NSLog(@"Draw Now! %i",drawType);

    //[self setNeedsDisplay]; // Not working...
    //[self performSelectorOnMainThread:@selector(setNeedsDisplay) withObject:nil waitUntilDone:YES]; // Not Working
}

@end 
```

**视图控制器.h**

```
#import <UIKit/UIKit.h>
#import "DrawView.h"

DrawView *mydraw;

@interface ViewController : UIViewController
@property (weak, nonatomic) IBOutlet UISegmentedControl *drawTypeSW;

- (IBAction)drawNow:(id)sender;
@end 
```

**视图控制器.m**

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize drawTypeSW;

- (void)viewDidLoad
{
    [super viewDidLoad];
    mydraw = [[DrawView alloc] init];
}

- (void)viewDidUnload
{
    [self setDrawTypeSW:nil];
    [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (IBAction)drawNow:(id)sender {
    [mydraw drawNow:drawTypeSW.selectedSegmentIndex];
}
@end 
```

当我打开应用程序时，会画一条线，但是当我尝试使用按钮绘制其他内容时，`Draw Now`它不起作用，什么也没有发生，`- (void)drawRect:(CGRect)rect`也没有被调用。为什么？我错过了什么？

谢谢 ;）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T00:31:42.917

**进一步编辑，最终解决方案**：正在创建的 DrawView`viewDidLoad`没有作为子视图添加到 ViewController。添加以下行应使其正确显示（除了下面的其他修复）：

```
[self.view addSubview:mydraw]; 
```

**编辑**：我的答案的扩展（它仍然存在，但我认为不再是问题的核心）。您在界面`myDraw` *之外*声明（并在 DrawView 的头文件中执行类似的操作）。代替

```
DrawView *mydraw;

@interface ViewController : UIViewController
//snip
@end 
```

尝试：

```
@interface ViewController : UIViewController
{
DrawView *mydraw;
}
//snip
@end 
```

**原始答案：** 变量`myDraw`尚未正确初始化 -`UIView`需要使用 initWithFrame （用于编程创建）或 initWithCoder （在笔尖或情节提要中）进行初始化。使用 init 创建它意味着它的框架位置/大小为 0（并且其他 UIView 功能可能未正确初始化），这反过来意味着它不会正确绘制。

尝试 a) 在您的 nib/storyboard 中创建一个 UIView，将其转换为 DrawView，并使`drawView`您的 ViewController 定义中的字段成为该视图的出口。或者 b) 将其从您的笔尖中移除，使用 initWithFrame 创建您的 DrawView，并在屏幕上为其指定位置和大小。

# visual-studio-2010 - CUIT（编码 UI 测试） - 查找动态控件

> ID：12468322
> 
> 赞同：0
> 
> 时间：2012-09-17T23:10:17.483
> 
> 标签：visual-studio-2010, web-controls, coded-ui-tests

我正在开发一个自动化测试应用程序来测试一个 Web 应用程序。在这里，我无法找到由 Web 应用程序代码动态创建的控件。它们的属性不断变化。

**示例：**某些控件在第一次执行时不会出现，但会在下次执行时出现。Web 应用程序还将创建一个 XML 文件来存储网页中所有控件的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-30T09:44:08.440

我也很久以前在 CodedUI 中遇到过这个问题，我通过编辑控件的属性解决了这个问题。我建议你，

(1) 转到要定位的动态控件的属性，

(2) 你会发现**propertyName, PropertyExpressionOperator & PropertyValue**。

`*(example : propertyName = id,
PropertyExpressionOperator = equals,
PropertyValue = button12)*`

(3) 现在将**PropertyExpressionOperator** （*即equals ）改为“contains”，并去掉***PropertyValue**中不断变化的值（*即button12 -> button*）

(4) 所以属性看起来像

`*(example : propertyName = id,
PropertyExpressionOperator = contains,
PropertyValue = button)*`

(5) 现在您可以找到它了。

相信它可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T02:36:21.163

屠宏。

我使用了可以做到这一点的[CUITe（编码 UI 测试增强框架） 。](http://cuite.codeplex.com)

例如，[变更集](http://cuite.codeplex.com/SourceControl/changeset/21564)21564 在 Sample_CUITeTestProject\BrowserWindowTests.cs 中有一个示例单元测试，如下所示：

```
[TestMethod]
[WorkItem(608)]
public void GenericGet_WithHtmlControls_GetsControlsDynamically()
{
    //Arrange
    CUITe_BrowserWindow bWin = CUITe_BrowserWindow.Launch("http://mail.google.com", "Gmail: Email from Google");

    //Act
    bWin.Get<CUITe_HtmlEdit>("Id=Email").SetText("xyz@gmail.com");
    bWin.Get<CUITe_HtmlPassword>("Id=Password").SetText("MyPa$$Word");
    bWin.Get<CUITe_HtmlInputButton>("Id=signIn").Click();
    bWin.Close();
} 
```

# java - 在 onClickListener 中的活动之间传递数据

> ID：12468323
> 
> 赞同：0
> 
> 时间：2012-09-17T23:10:19.493
> 
> 标签：java, android, eclipse, sdk

我想获取一个字符串并通过该`onClickListener`方法将其发送到其他活动，我已经在另一个活动中拥有代码，它将被捕获，我通过这样做让它工作：
示例：`String Culo = lblMensaje.getText().toString;`

这样我可以获取文本并将其发送到另一个活动，但它不如发送原始字符串那么有效.. 可以发送它吗？

```
final String sexos[] =
                new String[] {"00311712 Biología I","Mar-Jue 7:00am Prof.Briceño","Elem3","Elem4","Elem5"};

      final String[] datos =
                 new String[]{"0031711 Lab Biologia","Lun-Mar 9:30am prof. Marcarian","Elem3","Elem4","Elem5"};

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.pipe);

            final TextView lblMensaje = (TextView)findViewById(R.id.LblMensaje);
            final Spinner cmbOpciones = (Spinner)findViewById(R.id.CmbOpciones);

            final String[] datos =
                    new String[]{"0031711 Lab Biologia","Lun-Mar 9:30am prof. Marcarian","Elem3","Elem4","Elem5"};

            ArrayAdapter<String> pipe =
                new ArrayAdapter<String>(this,
                    android.R.layout.simple_spinner_item, datos);

            pipe.setDropDownViewResource(
              R.layout.multiline_spinner_dropdown_item);

            cmbOpciones.setAdapter(pipe);

            cmbOpciones.setOnItemSelectedListener(
             new AdapterView.OnItemSelectedListener() {
                    public void onItemSelected(AdapterView<?> parent,
                        android.view.View v, int position, long id) {
                            lblMensaje.setText("Seleccionado: " + datos[position]);

                    }

                    public void onNothingSelected(AdapterView<?> parent) {
                        lblMensaje.setText("");
                    }

            });

            final TextView lblMensaje1 = (TextView)findViewById(R.id.LblMensaje1);
            final Spinner cmbOpciones1 = (Spinner)findViewById(R.id.CmbOpciones1);

            final String sexos[] =
               new String[] {"00311712 Biología I","Mar-Jue 7:00am Prof.Briceño","Elem3","Elem4","Elem5"};

         ArrayAdapter<String> adaptador1 =
            new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_item, sexos);

        adaptador1.setDropDownViewResource(
                android.R.layout.simple_spinner_dropdown_item);

        cmbOpciones1.setAdapter(adaptador1);

        cmbOpciones1.setOnItemSelectedListener(
         new AdapterView.OnItemSelectedListener() {
                public void onItemSelected(AdapterView<?> parent,
                    android.view.View v, final int position, long id) {          
                        lblMensaje1.setText(sexos[position]);

                }

                public void onNothingSelected(AdapterView<?> parent) {
                    lblMensaje1.setText("");
                }

        });
        Button BotonPasar1;
        BotonPasar1 = (Button)findViewById(R.id.VB1);
         BotonPasar1.setOnClickListener(new View.OnClickListener(){

         public void onClick(View v) {
            // TODO Auto-generated method stub

            String Culo;

       Culo = datos[position];
            String Culoq;
            Culoq = sexos[position];

            SharedPreferences mypreferences = getSharedPreferences("myPrefs", Context.MODE_PRIVATE);
            SharedPreferences.Editor editor = mypreferences.edit();
            editor.putString("Culo",Culo);
            editor.commit();

               SharedPreferences mypreferences1 = getSharedPreferences("myPrefs", Context.MODE_PRIVATE);
              SharedPreferences.Editor editor1 = mypreferences1.edit();
            editor1.putString("Culoq", Culoq);
            editor1.commit();

                  String Culo1 = String.valueOf(Culoq + 1);

            SharedPreferences mypreferences2 = getSharedPreferences("myPrefs", Context.MODE_PRIVATE);
            SharedPreferences.Editor editor2 = mypreferences2.edit();
            editor2.putString("Culo1",Culo1);
            editor2.commit();

         }

        });
         Button BotonPasar2;
         BotonPasar2 = (Button)findViewById(R.id.VB2);
          BotonPasar2.setOnClickListener(new View.OnClickListener(){

          public void onClick(View v) {
             // TODO Auto-generated method stub
           Intent pasarahorario = new Intent("com.reversiblelabs.unisvenecas.udobeta.HORARIO");                          
          startActivity(pasarahorario);

          }

         });

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T23:22:21.043

通过使用意图，您可以只使用 putextra 方法并在其他类中捕获它？

在你说的 onClick 方法中：

```
Intent pasarahorario = new Intent("com.reversiblelabs.unisvenecas.udobeta.HORARIO");                          
startActivity(pasarahorario); 
```

只需添加

```
pasarahorario.putExtra("title", lblMensaje.getText().toString); 
```

在您调用的其他活动中：

```
String text = getIntent().getExtras().get("title").toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T06:05:35.333

这可能会帮助你

就像您的第一个 ActivityA 中的 SharedPreferences

```
 Intent myintent= new Intent(FirstActivity.this,SecondActivity.class);
            SharedPreferences spref = this.getSharedPreferences("mynotifyid", MODE_WORLD_WRITEABLE);
            SharedPreferences.Editor spreedit = spref.edit();
            spreedit.putString("Name1", str1.toString());              
            spreedit.commit();
            startActivity(myintent); 
```

在你的第二个活动B

```
 SharedPreferences spref = context.getSharedPreferences("mynotifyid", Context.MODE_WORLD_WRITEABLE);
        String str1 = spref.getString("Name1",""); 
```

为了您的对象保存目的，使用 SharedPreferences

# postgresql - 推送到 PostgreSQL 时，会创建一个 .dat 文件吗？使用水龙头

> ID：12468325
> 
> 赞同：2
> 
> 时间：2012-09-17T23:10:54.833
> 
> 标签：postgresql, heroku, gem, taps

由于 Heroku 现在支持 ruby​​ 1.9.3 但不支持 sqlite3，所以我终于开始探索 Heroku 使用 PostgreSQL 的方式。花了一点时间来理解和配置，但我在周末开车并获得了一些扎实的知识。然而，引起我注意的一件事是 .dat 文件的创建。使用

```
 heroku db:push 
```

显然将数据库推送到 Heroku - 点击 gem 安装 - 但也创建 .dat 文件。有人知道这个文件是什么吗？它只是一个会话收据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:17:47.610

当这些文件开始在 git 中显示为未跟踪的文件时，我想知道这一点。看起来它确实只是一个会话收据。我最初认为这些文件可以让您以某种方式恢复中断的数据库迁移，但快速浏览 taps 源代码后发现它只是一张收据（生成的 .dat 文件永远不会在任何地方加载）。

以下是来自 taps 的[github repo](https://github.com/ricardochimal/taps/blob/master/lib/taps/operation.rb)的相关代码：

```
def store_session
  file = "#{file_prefix}_#{Time.now.strftime("%Y%m%d%H%M")}.dat"
  puts "\nSaving session to #{file}.."
  File.open(file, 'w') do |f|
    f.write(OkJson.encode(to_hash))
  end
end

def to_hash
  {
    :klass => self.class.to_s,
    :database_url => database_url,
    :remote_url => remote_url,
    :session_uri => session_uri,
    :stream_state => stream_state,
    :completed_tables => completed_tables,
    :table_filter => table_filter,
  }
end 
```

# process - 在 KMDF 驱动程序中处理退出/删除通知

> ID：12468326
> 
> 赞同：0
> 
> 时间：2012-09-17T23:11:03.517
> 
> 标签：process, notifications, driver, kmdf

当进程停止时，我需要在 KMDF 驱动程序中获得通知。我不想使用`PsSetCreateProcessNotifyRoutine`，因为这会通知我创建或销毁的每个进程。只有当我感兴趣的某些进程 ID 被销毁/退出/删除时，我才想知道/收到通知。（我不关心进程创建）。

我想到的一种方法是与驱动程序共享应用程序创建的事件。我将在驱动程序中创建一个工作线程并使其等待用户创建的事件，当应用程序终止时，等待将中止。这是了解进程何时终止/关闭的好方法，还是有更多标准方法可以做到这一点？我在一些论坛上读到共享事件不是一个好主意，我应该使用重叠的 ioctl，但这显然在这里不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T21:42:04.580

已解决：这就是我所做的：（我的驱动程序是顶级单片驱动程序）

1.  使用带有进程 ID 的 ZwOpenProcess 来获取进程的句柄。

2.  使用 ObReferenceObjectByHandle 和进程句柄来获取调度程序对象。

3.  使用 PsCreateSystemThread 创建了一个系统线程并传入了调度的对象。

4.  使用 KeWaitForSingleObject 使上述步骤中创建的系统线程等待调度的对象。

5.  以编程方式终止进程或导致异常，然后使用 X gui 按钮将其关闭。所有这些都唤醒了创建的系统线程。

当感兴趣的进程终止时，这基本上会给我通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T00:25:51.057

只需使用 PsSetCreateProcessNotifyRoutine 并检查 ProcessId。

# c# - 如何从组合框中提取嵌入的值？

> ID：12468329
> 
> 赞同：1
> 
> 时间：2012-09-17T23:11:43.993
> 
> 标签：c#, winforms, dictionary, combobox, key-value-observing

我以这种方式使用基础值和显示值填充我的组合框：

```
Dictionary<int, string> Platypi = duckBillData.GetPlatypiVals();
comboBoxPlatypus.DataSource = new BindingSource(Platypi, null);
comboBoxPlatypus.ValueMember = "Key";
comboBoxPlatypus.DisplayMember = "Value"; 
```

现在我想提取所选项目的 ValueMember。我怎么做？“显而易见”的事情似乎都没有“ValueMember”......我试过了：

```
int id = comboBoxPlatypus.ValueMember;
int id = comboBoxPlatypus.SelectedIndex. <-- no "ValueMember" here...
int id = comboBoxPlatypus.SelectedItem. <-- no "ValueMember" here... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T23:24:50.573

`ValueMember`*告诉组合框要绑定*到原始集合的哪个属性，它不是绑定对象本身。 `SelectedItem`应该包含您的结果值。您只需要将其转换为正确的类型，在这种情况下，这就是您的`int`密钥。

```
int id = (int) comboBox.SelectedItem; 
```

# c# - VS2012 运行测试方法后运行新的程序实例

> ID：12468330
> 
> 赞同：1
> 
> 时间：2012-09-17T23:12:01.233
> 
> 标签：c#, unit-testing, vs-unit-testing-framework

我有一个静态配置类，它在程序启动时加载了值，并且任何进一步修改它的尝试都会引发异常。

不幸的是，VS2012 的单元测试套件保留了在整个测试过程中运行的程序的相同实例，并且在不同的测试中我想测试不同的配置。有没有办法强制运行者“重置”程序或在它的新实例中运行进一步的测试？我想以一种避免将解决方法代码添加到配置类的方式来执行此操作，以适应这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T17:38:49.570

不，目前没有这样的选择。

您应该重新初始化此静态配置作为您的 TestInitialize/TestCleanup 方法的一部分，但是是的，这意味着添加一些代码来帮助实现这一点。

# linux - QueryPerformanceCounter Linux 等效项

> ID：12468331
> 
> 赞同：6
> 
> 时间：2012-09-17T23:12:06.590
> 
> 标签：linux, porting

通过[这个](https://stackoverflow.com/questions/464618/whats-the-equivalent-of-windows-queryperformancecounter-on-osx)线程后，我了解到clock_gettime() 和clock_getres() 是在Linux 环境中实现QueryPerformanceCounter 和QueryPerformanceFrequency 的一个选项。

许多示例建议读取clock_gettime 返回的值并使用它。但这只是纳秒数，而不是滴答数！因此，在 Linux 中获取滴答数的唯一方法是使用 clock_gettime() 和 clock_getres() 的组合。如果我错了，请纠正我。

所以我实现了我的 QueryPerformanceCounter（它看起来很丑！）所以想知道是否有更好的方法来为 Linux 实现 QueryPerformanceCounter。我的代码如下 -

```
__int64 QueryPerformanceCounter()
{
    __int64 nsec_count, nsec_per_tick;
    /*
     * clock_gettime() returns the number of secs. We translate that to number of nanosecs.
     * clock_getres() returns number of seconds per tick. We translate that to number of nanosecs per tick.
     * Number of nanosecs divided by number of nanosecs per tick - will give the number of ticks.
     */
     struct timespec ts1, ts2;

     if (clock_gettime(CLOCK_MONOTONIC, &ts1) != 0) {
         printf("clock_gettime() failed");
         return -1;
     }

     nsec_count = ts1.tv_nsec + ts1.tv_sec * nsec_per_sec;

     if (clock_getres(CLOCK_MONOTONIC, &ts2) != 0) {
         LOG_ERROR("clock_getres() failed");
         return -1;
     }

     nsec_per_tick = ts2.tv_nsec + ts2.tv_sec * nsec_per_sec;

     return (nsec_count / nsec_per_tick);
} 
```

谢谢！

# excel - 计算字段无法正确评估

> ID：12468333
> 
> 赞同：0
> 
> 时间：2012-09-17T23:12:23.963
> 
> 标签：excel, excel-2010, office-2010

好的，我在工作表上有一个表格，其中有一些用于计算的列

```
PPS | Qty | TtlPrice | Comm | Fee | Ttl | format 
```

**列定义**

*   PPS——直`Numeric(9,5)`
*   数量 - 直`Numeric(12,0)`
*   ttl价格 -`PPS * Qty`
*   Comm - 标准统一费率
*   费用 -`=IF([@PPS] > 1, -SUM(0.005 * [@Qty]), 0)`
*   TTL -`=SUM([@TtlPrice]:[@Fee])`
*   format - 条件格式控制列

问题是，当我评估该`Fee`列时，它实际上与您的想法相反。上面的任何值`1`都被评估为`True`条件子句部分，然后评估`-Sum(.005*[@Qty])`而不是，`0`反之亦然，任何小于的 PPS`1`都被评估为`False`。

在处理 Excel 表格中的行引用时，是否有一个我以前没有注意到的怪癖会导致这种性质？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T23:34:12.677

你试过这个收费吗？

```
=IF([@PPS] > 1, 0, -SUM(0.005 * [@Qty])) 
```

你的问题让我有点困惑，所以如果我遗漏了什么，请发表评论，我会修改/删除我的答案。

# javascript - 如何从 html 页面创建文件并附加数据？

> ID：12468335
> 
> 赞同：4
> 
> 时间：2012-09-17T23:12:28.230
> 
> 标签：javascript, python, html, file, server-side

我的桌面上有一个需要一些输入的 html 文件。我将如何将该输入写入计算机上的文件？我是否必须使用另一种语言来做到这一点（即 python 或 javascript？），我将如何去做？在相关说明中，有什么方法可以让 javascript 从 html 文件中启动应用程序（目标是写入我计算机上的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T23:18:02.950

浏览器具有很多安全性，可以防止对您的计算机进行这种级别的控制。这是一件好事。您不希望随机网站能够在访问它们的任何人的计算机上执行此操作。

他们这样做的方法是编写一个您的浏览器可以访问的 Web 应用程序。浏览器可以将数据提交给在您自己的计算机上运行的应用程序，您的应用程序可以操作文件系统或做许多其他事情。

所以不，浏览器不能做这些事情。是的，您必须使用“另一种语言”来创建在浏览器本身之外运行的东西。您可以使用 javascript（请参阅 node.js）或 python 来执行此操作，以及几乎任何其他存在的编程语言来创建这样的东西。选择哪个取决于您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T23:23:52.947

您将不得不使用另一种语言。您应该看到[Save file Javascript with file name](https://stackoverflow.com/questions/7717851/save-file-javascript-with-file-name)（这需要您在您的网站上创建它并让用户下载它）和[Python Save to file](https://stackoverflow.com/questions/9536714/python-save-to-file)（要在 HTML 中实现 Python，请参见[此处](http://python.about.com/od/cgiformswithpython/ss/pycgitut2_all.htm)）。或者在 Javascript 中，您可以 [`ActiveX`](http://en.wikipedia.org/wiki/ActiveX)通过执行 * 来保存文件：

活动X

```
function WriteToFile()
{
var fso = new ActiveXObject("Scripting.FileSystemObject");
var s = fso.CreateTextFile("C:\\Test.txt", true);
s.WriteLine('Hello');
s.Close();
} 
```

Python

```
myFile = open('Failed.py', 'w')
myFile.write('whatever')
myFile.close() 
```

Javascript（非 ActiveX）

```
uriContent = "data:application/octet-stream;filename=filename.txt," + 
          encodeURIComponent(codeMirror.getValue());
newWindow=window.open(uriContent, 'filename.txt'); 
```

**注意：我真的不推荐使用`ActiveX`，请参阅[ActiveX 和 Javascript 不要混合](http://javascript.about.com/od/hintsandtips/a/activex.htm)了解更多详细信息*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T00:50:18.133

现在可以使用`FileWriter`目前仅受 Chrome 和 Opera 支持的 API 使用 Javascript 写入本地文件：

[http://caniuse.com/#search=filewriter](http://caniuse.com/#search=filewriter)

以下是来自 HTML5Rocks.com 的一些示例代码：

```
function onInitFs(fs) {

  fs.root.getFile('log.txt', {create: true}, function(fileEntry) {

    // Create a FileWriter object for our FileEntry (log.txt).
    fileEntry.createWriter(function(fileWriter) {

      fileWriter.onwriteend = function(e) {
        console.log('Write completed.');
      };

      fileWriter.onerror = function(e) {
        console.log('Write failed: ' + e.toString());
      };

      // Create a new Blob and write it to log.txt.
      var blob = new Blob(['Lorem Ipsum'], {type: 'text/plain'});

      fileWriter.write(blob);

    }, errorHandler);

  }, errorHandler);

}

window.requestFileSystem(window.TEMPORARY, 1024*1024, onInitFs, errorHandler); 
```

[http://www.html5rocks.com/en/tutorials/file/filesystem/](http://www.html5rocks.com/en/tutorials/file/filesystem/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T23:17:58.923

你的问题有点难以回答。如果“它需要一些输入”是指`form`涉及一个元素，那么您可以通过像[PHP](http://php.net/)这样的语言来处理它。

如果您只是想编辑代码并开始学习 HTML，那么 Notepad/TextEdit 和**现代**网络浏览器是您最好的新朋友。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-09T00:56:44.640

**简短的回答：**

你不能。Web 浏览器安全性和沙盒化可以防止这种情况。

**更长的答案：**

设置一个小型 LAMP 堆栈、Ruby on rails（本地主机服务器）、Python/Django（本地主机服务器）来托管您的 HTML/Web 表单。当您将数据输入表单时，本地守护程序可以处理将数据附加到文件中。

使用 HTML5，您可以获得允许您写入本地文件系统的特殊钩子，但这些钩子可能是特定于浏览器的，并且可能会不时中断。

# python - 为什么它适用于 python 类型转换？

> ID：12468337
> 
> 赞同：2
> 
> 时间：2012-09-17T23:12:46.507
> 
> 标签：python

我知道如果我想在 Python 中进行类型转换，我应该使用内置函数。

例如：

```
number = int('100') 
```

但我正在使用 c# 样式进行转换

```
number = (int)('100') 
```

它也有效，你能告诉我为什么它有效吗？

如果我尝试使用下面的代码做同样的事情，它就不起作用。

```
number = (int)'100' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T23:15:40.997

Python 没有“类型转换”；您正在传递`'100'`给`int` **构造函数**。将括号放在类型周围不会更改其值，但从类型的参数中删除括号意味着它不再是构造函数调用，而是语法错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T23:19:46.640

除了指定函数参数时，`(x)`与 相同`x`，因此`(int)('100')`等价于`int('100')`。

他们甚至编译成相同的字节码：

```
>>> import dis
>>> dis.dis(lambda: int('100'))
  1           0 LOAD_GLOBAL              0 (int)
              3 LOAD_CONST               1 ('100')
              6 CALL_FUNCTION            1
              9 RETURN_VALUE
>>> dis.dis(lambda: (int)('100'))
  1           0 LOAD_GLOBAL              0 (int)
              3 LOAD_CONST               1 ('100')
              6 CALL_FUNCTION            1
              9 RETURN_VALUE 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T23:58:10.670

```
int('100') 
```

这意味着“找到名为 的对象`int`，并将其作为函数调用，`'100'`作为参数传递”。

```
(int)('100') 
```

这意味着同样的事情，因为左侧是 now `(int)`，与 相同`int`，原因`(3)`与 相同`3`。

```
(int)'100' 
```

根据相同的原则，这与 相同`int '100'`，这是一个语法错误：您有两个对象 -`int`类和字符串`'100'`- 彼此相邻，没有运算符或其他指示它们应该如何交互。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T23:19:58.360

在 python 中，“int”是一个类，调用“int('100')”会调用带有参数“100”的 int 类的 __init__ 方法。这构造了一个 int 对象。

表达式“(int)”与“int”没有什么不同。Python 没有像其他一些语言那样的转换/转换运算符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T23:23:21.653

在 python 中，函数是第一类对象，因此`int`实际上`(int)`是同一个对象，内置函数[int](http://docs.python.org/library/functions.html#int)。

```
>>> a = (int)
>>> a('100')
100
>>> a is int
True 
```

您可以像上面的示例中那样调用函数，但不能将其用作强制转换、c 样式。

# entity-framework - EF4 db-first：如何添加缺失的关系

> ID：12468351
> 
> 赞同：1
> 
> 时间：2012-09-17T23:14:14.387
> 
> 标签：entity-framework, database-first

我正在使用 db-first 为只读数据库创建对象模型，但某些关系不会自动拾取。例如在 Foo.BarId 中不会自动连接到 Bar 对象。如果单击 BarId 属性，则在上下文菜单或属性窗口中看不到任何将其与 Bar 关联的内容。我怎样才能在不搞砸任何事情的情况下手动声明外键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:38:25.327

想通了自己...这里是步骤：

（关于模型设计师）

1.  从 Foo 实体中删除 BarId 属性。
2.  右键单击 Foo 实体（不是它的任何属性），添加 Foo 和 Bar 之间的关联。
3.  单击关联箭头。
4.  在 Mapping Details 窗口中，添加“Foo”表。
5.  将 Foo.Id 映射到 Foo.Id，将 Bar.Id 映射到 Foo.BarId。

完毕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T03:30:01.340

确保两个表都有主键并且 Bar 表定义了外键。

# git - 在 Windows 上设置 git 和 ssh 并使用 ssh-agent 通过 msysgit 存储密码

> ID：12468353
> 
> 赞同：4
> 
> 时间：2012-09-17T23:14:26.650
> 
> 标签：git, ssh, msysgit

好的，这是一个非常具体的问题，但我在弄清楚它时遇到了一些挑战，所以我想我会分享我的经验，所以如果其他人遇到同样的问题，他们可以更快地解决它。

目标：使用 ssh-agent 和 msysgit 尽可能安全地存储 ssh 密钥密码，以防止必须为涉及远程存储库的每个 git 命令键入它

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T23:14:26.650

1）`.bashrc`在用户目录中创建一个文件（默认 windows `C:\Users\UserName\`）
注意：如果你认为你可以在 Windows 资源管理器中右键单击目录并创建一个名为`.bashrc`你（和我）的文件，很遗憾，你会从错误中得到一个错误资源管理器阻止您创建没有名称的文件。因此，我通过执行从我的 git bash 执行此操作`echo 'blah' >> .bashrc`，以便我可以在记事本中编辑文件以将所需的代码放入其中。

2）`.bashrc`在文本编辑器中编辑并将代码放在此处：[https](https://help.github.com/articles/working-with-ssh-key-passphrases#platform-windows) : //help.github.com/articles/working-with-ssh-key-passphrases#platform-windows 在“Auto-launching ssh-agent on msysgit”下

3）重新启动bash。

故障排除：`ps`将显示所有正在运行的进程。我发现当我对此进行测试时，启动 bash 时并没有提示我输入密码。当我执行时，`ps`我注意到许多 ssh-agents 正在运行。将它们全部杀死后，我能够重新启动 git bash 并且一切正常。识别这个问题花了我最长的时间。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-05-22T13:39:04.430

如何在 git repo-url 中包含 pass：

```
git clone http://username:password@example.com/git/Project.git . 
```

这不是很安全的解决方案，但有效:)

# css - 使用 Font Awesome 图标作为项目符号，带有单个列表项元素

> ID：12468359
> 
> 赞同：139
> 
> 时间：2012-09-17T23:15:07.960
> 
> 标签：css, font-awesome

我们希望能够使用 Font Awesome ( [http://fortawesome.github.com/Font-Awesome/](http://fortawesome.github.com/Font-Awesome/) ) 图标作为 CMS 中无序列表的要点。

CMS 上的文本编辑器仅输出原始 HTML，因此无法添加其他元素/类。

这意味着当标记看起来像这样时显示图标：

```
<ul>
<li>Item 1</li>
<li>Item 2</li>
<li>Item 3</li>
</ul> 
```

我可以看到的第一个问题是 Font Awesome 是否需要不同的 font-family 属性，这需要单独的元素。

这可能使用纯CSS吗？或者我是否必须使用 jQuery 之类的东西将元素附加到每个列表项的开头？

我意识到我们可以使用背景图像的后备，但如果可能的话，使用 Font Awesome 会很棒。

* * *

## 回答 #1

> 赞同：259
> 
> 时间：2013-10-29T11:18:04.097

解决方案：

[http://jsfiddle.net/VR2hP/](http://jsfiddle.net/VR2hP/)

```
ul li:before {    
    font-family: 'FontAwesome';
    content: '\f067';
    margin:0 5px 0 -15px;
    color: #f00;
} 
```

这是一篇[博文](http://www.sitepoint.com/use-webfont-icons-bullet-points-html5-lists/)，深入解释了这种技术。

* * *

## 回答 #2

> 赞同：164
> 
> 时间：2014-01-07T04:36:16.363

新的 fontawesome（4.0.3 版）让这很容易做到。我们只需使用以下类：

```
<ul class="fa-ul">
  <li><i class="fa-li fa fa-check-square"></i>List icons (like these)</li>
  <li><i class="fa-li fa fa-check-square"></i>can be used</li>
  <li><i class="fa-li fa fa-spinner fa-spin"></i>to replace</li>
  <li><i class="fa-li fa fa-square"></i>default bullets in lists</li>
</ul> 
```

根据这个（新）网址： http: [//fontawesome.io/examples/#list](http://fontawesome.io/examples/#list)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-09-01T09:01:06.957

我想建立在上面和其他地方给出的一些答案的基础上，并建议使用**绝对定位**以及**:before 伪类**。上面的许多示例（以及类似问题中）都使用了自定义 HTML 标记，包括 Font Awesome 的处理方法。这与最初的问题背道而驰，并不是绝对必要的。

[在这里演示](http://codepen.io/anon/pen/oFaEm)

```
ul {
  list-style-type: none;
  padding-left: 20px;
}

li {
  position: relative;
  padding-left: 20px;
  margin-bottom: 10px
}

li:before {
  position: absolute;
  top: 0;
  left: 0;
  font-family: FontAwesome;
  content: "\f058";
  color: green;
} 
```

基本上就是这样。[您可以在Font Awesome 备忘](http://fortawesome.github.io/Font-Awesome/cheatsheet/)单上获取用于 CSS 内容的 ISO 值。只需使用带有反斜杠前缀的最后 4 个字母数字。所以`[&#xf058;]`变成`\f058`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-17T23:31:11.773

[在他们的示例页面](http://fortawesome.github.com/Font-Awesome/#examples)上有一个如何在无序列表旁边使用 Font Awesome 的示例。

```
<ul class="icons">
  <li><i class="icon-ok"></i> Lists</li>
  <li><i class="icon-ok"></i> Buttons</li>
  <li><i class="icon-ok"></i> Button groups</li>
  <li><i class="icon-ok"></i> Navigation</li>
  <li><i class="icon-ok"></i> Prepended form inputs</li>
</ul> 
```

如果您在尝试此代码后找不到它工作，那么您没有正确包含该库。根据他们的网站，您应该包括以下库：

```
<link rel="stylesheet" href="../css/bootstrap.css">
<link rel="stylesheet" href="../css/font-awesome.css"> 
```

还可以在他的网站[CSS Tricks](http://css-tricks.com/)上查看异想天开的[Chris Coyier 关于图标字体的帖子](http://css-tricks.com/html-for-icon-font-usage/)。

[这是他的截屏视频](http://css-tricks.com/video-screencasts/113-creating-and-using-a-custom-icon-font/)，还讨论了如何创建自己的图标字体。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-11T05:23:28.333

@Tama，你可能想检查这个答案：[Using Font Awesome icons as bullets](https://stackoverflow.com/questions/12303533/using-font-awesome-icons-as-bullets/14806308#14806308)

基本上，您可以通过仅使用 CSS 来完成此操作，而无需 FontAwesome 和此处的其他答案所建议的额外标记。

换句话说，您可以使用您在初始帖子中提到的相同基本标记来完成您需要的事情：

```
<ul>
  <li>...</li>
  <li>...</li>
  <li>...</li>
</ul> 
```

谢谢。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-09-14T13:05:58.837

在 Font Awesome 5 中，可以使用纯 CSS 来完成，如上述一些答案中的一些修改。

```
ul {
  list-style-type: none;
}

li:before {
  position: absolute;
  font-family: 'Font Awesome 5 free';
          /*  Use the Name of the Font Awesome free font, e.g.:
           - 'Font Awesome 5 Free' for Regular and Solid symbols;
           - 'Font Awesome 5 Brand' for Brands symbols.
           - 'Font Awesome 5 Pro' for Regular and Solid symbols (Professional License);
          */
  content: "\f1fc"; /* Unicode value of the icon to use: */
  font-weight: 900; /* This is important, change the value according to the font family name
                       used above. See the link below  */
  color: red;
} 
```

如果没有正确的字体粗细，它只会显示一个空白方块。

[https://fontawesome.com/how-to-use/on-the-web/advanced/css-pseudo-elements#define](https://fontawesome.com/how-to-use/on-the-web/advanced/css-pseudo-elements#define)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-10T17:54:11.357

我使用标准`<ul>`和`<i>`内部的解决方案`<li>`

```
 <ul>
    <li><i class="fab fa-cc-paypal"></i> <div>Paypal</div></li>
    <li><i class="fab fa-cc-apple-pay"></i> <div>Apple Pay</div></li>
    <li><i class="fab fa-cc-stripe"></i> <div>Stripe</div></li>
    <li><i class="fab fa-cc-visa"></i> <div>VISA</div></li>
  </ul> 
```

[![在此处输入图像描述](../Images/26105e3a4dbb64fb7a948db716bdec68.png)](https://i.stack.imgur.com/uo4b8.png)

[在这里演示](https://codepen.io/hicTech/pen/LdqKmq?editors=1100)

# objective-c - 在块保留周期中调用函数

> ID：12468362
> 
> 赞同：4
> 
> 时间：2012-09-17T23:15:32.453
> 
> 标签：objective-c, ios, block, retain-cycle

如果我从块内部调用的函数引用“self”，那会创建一个保留循环吗？

```
__weak id weakSelf = self;

- (void)firstFunction
{
    id strongSelf = weakSelf;
    if (!strongSelf) return;

    [anObject performBlock:^{
        [strongSelf secondFunction];
    }];
}

- (void)secondFunction
{
    [self doSomeCrazyStuff];
    self.counter++;
    //etc.
} 
```

我在'secondFunction'中调用'self'，我需要将我的弱指针传递给这个函数并使用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T23:52:49.333

潜在的。

保留循环是通过*强*引用循环创建的，除了变量上的限定符（即弱、强）之外，这些引用来自的实际变量是不相关的*。*因此`strongSelf`，您的块引用是一个强引用，`self`并且您具有相同的保留周期潜力，就像您使用`self`它自己一样。

回复：评论

让你的块保持弱引用是解决这个问题的标准方法。如果你`weakSelf`在你的块中使用，那么就没有强引用，如果在调用块时`weakSelf`调用`nil`将`[weakSelf secondFunction]`什么都不做——你可以`nil`在 Objective-C 中发送消息。您不会创建循环，在调用块期间可能会创建引用的强副本，但这将在调用块返回后进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T00:44:20.997

我可能是错的，但我在这里看不到保留周期。

除非将块复制到堆中，否则块是堆栈分配的。

我不使用 ARC，所以你的里程可能会有所不同，但至少没有 ARC，当块被堆栈分配并且它没有对 self 的保留引用时，我不会期望保留周期。

对 self 的引用将被复制到块堆栈中，如果超出范围，块将继续访问副本，直到块终止。

我不假设知道 ARC 是如何管理这个的，我认为如果你要使用 ARC，你应该知道它是如何工作的。

但就非 ARC 代码而言，我在此代码中看不到任何保留周期。

# javascript - 外部 javascript 在 ruby on rails 中不起作用

> ID：12468366
> 
> 赞同：1
> 
> 时间：2012-09-17T23:15:42.763
> 
> 标签：javascript, ruby-on-rails

我尝试使用

```
<%= javascript_include_tag "application" %> 
```

并在 app/assets/javascripts/ 中插入我的外部 javascript 文件，但由于某种原因，这个 javascript 文件应该实现的效果不起作用。我怀疑这是因为我之前安装了coffeescript，所以我通过从我的Gemfile 中删除coffee-rails 并重新运行捆绑安装来卸载它。我的 app/assets/javascripts/application.js 也有

```
//= require_tree . 
```

行在里面。

我也在本地测试这个，使用 Rails 服务器，然后在 localhost:3000 上查看它。

任何想法为什么它不起作用？

提前致谢！

# c++ - 如何在 C++ 的 while 循环中存储先前的迭代？

> ID：12468373
> 
> 赞同：2
> 
> 时间：2012-09-17T23:17:13.120
> 
> 标签：c++, loops, while-loop

我看到一个类似标题的东西得到了回答，但是内容对我来说太密集了，因为我不太了解 c++。

我对编程很陌生，我不知道如何将以前的迭代存储在我的 while 循环中。我正在尝试使用 while 循环将用户文本写入文件，并以两个`\n`字符结束他们的输入。这就是我的问题所在，因为使用我当前的代码，输入以一个 enter 实例结束。

我的代码看起来像这样，但我知道`temp`并且`new_advice`是相同的：

```
char new_advice, temp;
while( (!(new_advice == '\n' + '\n'))) && (!(temp == '\n')) )
{
    temp = new_advice;
    cin.get(new_advice);
    fout.put(new_advice);
} 
```

编辑*好吧，我想我不清楚我在问什么。

最初的任务是“允许用户输入建议，这样它可以是任意数量的行。用户被告知通过按两次返回键来结束他或她的建议。然后您的程序可以测试以查看它通过检查它何时读取了两次连续出现的字符'\n'，已到达输入末尾。”

这会改变我的问题的任何答案吗？

我现在尝试使用代码执行此操作：

```
char new_advice;
         int temp = 0;

         while(temp < 2)
         {
         if(new_advice == '\n')
         {
         temp = temp++;
         }
         cin.get(new_advice);
         fout.put(new_advice);

         } 
```

但这也不起作用，我的程序无法将 enter 识别为结束程序。整个程序的上下文是否值得发布？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T23:28:59.197

I don't really want to answer your specific question, since the idiomatic way of doing what you want is rather different, and quite a bit cleaner:

```
std::ofstream outfile("output.txt");

for (std::string line; std::getline(std::cin, line); )
{
    if (line.empty()) { break; }

    outfile << line << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T23:27:28.167

这么多的事情。

首先，为了清楚起见，去掉多余的括号。然后，使用`a != b`代替`!(a == b)`.

这会产生`while(new_advice != '\n' + '\n') && temp != '\n')`，我不确定这应该做什么（即使忽略不匹配的括号也会导致编译错误）：`'\n' + '\n'`添加两个字符，这是一个整数加法。但即使不是，而是字符串连接，您随后会将结果（两​​个字符的字符串）与单个字符进行比较。这永远不会屈服`true`。

现在，关于逻辑：只需用 return 分隔每一行，并在末尾添加一个额外的 return 字符：

```
std::string line;
while (std::getline(std::cin, line))
    std::cout << line << "\n";

std::cout << "\n"; 
```

……像 π 一样简单。

但除此之外，以两个换行符结束输入是不寻常的。相反，（在 UNIX 中）惯例是，每一行最后都由一个换行符分隔。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T23:27:09.210

`char``int`如果在`+`表达式中使用， s 将被提升为s。你到底想比较什么？

> 我的代码看起来像这样，但我知道 temp 和 new_advice 是一样的：

然后这
`(!(new_advice == '\n' + '\n'))) && (!(temp == '\n'))`将立即失败。

而且你的括号'不匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T23:28:51.147

简化您的循环，以便在您输入时进行检查：`while(cin) {`.

如果您需要存储以前的值，请将该变量仅留在循环之外：

```
char previous = '\0';
while (cin) { 
```

我认为你真的想找到一个行尾并添加一个'\ n'，但这在 Windows 和 unix 之间是不可移植的。std::getline 答案效果更好。但是，假设你想自己做这个......

在循环中声明并给你当前的角色一个值。

```
 char current;
    cin >> current; 
```

然后通过再次检查来仔细检查您是否确实收到了有效输入`cin`。

```
 if(!cin) {
        break;
    } 
```

接下来，对这个角色做任何你需要的事情：

```
 fout << current;
    if(`\n` == current) {
        fout << '\n'; // though std::endl would be more portable
    } 
```

最后，更新您之前的变量。

```
 previous = current;
} 
```

我试图通过解决这个问题来理解所涉及的多个概念，尽管我认为你不需要大部分。`std::getline`答案会奏效，但不会教给您您尝试做的所有事情。

# jquery - 使 jquery 函数在页面加载时运行

> ID：12468374
> 
> 赞同：20
> 
> 时间：2012-09-17T23:17:19.703
> 
> 标签：jquery, function, opacity

我有一个 jquery 函数来更改鼠标悬停时图像的不透明度以产生脉动效果，但我想更改它以便图像在页面加载后立即脉动，删除鼠标悬停元素鼠标悬停和鼠标移出.

这是我的代码

```
 (function($) {
        $(document).ready(function() {
            window.pulse_image = null;
            window.pulse_continue_loop = false;

            $('.pulse_image').mouseover(function() {
            // User is hovering over the image.
            window.pulse_continue_loop = true;
            window.pulse_image = $(this);

            PulseAnimation(); // start the loop
        }).mouseout(function() {
            window.pulse_continue_loop = false;
            window.pulse_image.stop();
            window.pulse_image.css('opacity',1);
        });
    });
})(jQuery);

function PulseAnimation()
{
    var minOpacity = .33;
    var fadeOutDuration = 650;
    var fadeInDuration = 650;

    window.pulse_image.animate({
        opacity: minOpacity
    }, fadeOutDuration, function() {
        window.pulse_image.animate({
            opacity: 1
        }, fadeInDuration, function() {
            if(window.pulse_continue_loop) {
                PulseAnimation();
            }
        })
    });
} 
```

来自 [http://www.infinitywebcreations.com/2011/01/how-to-create-a-throbbingpulsing-image-effect-with-jquery/](http://www.infinitywebcreations.com/2011/01/how-to-create-a-throbbingpulsing-image-effect-with-jquery/)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-17T23:24:32.487

```
(function($) {
    $(document).ready(function() {
        window.pulse_image = $('.pulse_image');
        window.pulse_continue_loop = true;
        PulseAnimation(); // start the loop
    });
})(jQuery);​ 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-17T23:20:37.423

我不明白为什么你不能只删除与`mouseover`and`mouseout`事件相关的代码。如果“页面加载”是指加载 HTML 文档时，请尝试以下操作：

```
$(document).ready(function() {
    window.pulse_image = $('.pulse_image');
    window.pulse_continue_loop = true;
    PulseAnimation();
}); 
```

如果“页面加载”是指页面上的所有图像也已加载，请尝试以下操作：

```
$(window).load(function() {
    window.pulse_image = $('.pulse_image');
    window.pulse_continue_loop = true;
    PulseAnimation();
}); 
```

后一个代码示例将等待所有图像完成加载。这将通过`window`“加载”触发。相反，第一个代码示例显示`document`准备就绪，这意味着文档已加载，但并非与文档相关的所有资源都已加载。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-17T23:22:08.377

```
 $(document).ready(function() {
    window.pulse_continue_loop = true;
    window.pulse_image = $('.pulse_image');
    PulseAnimation(); // start the loop
  }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-21T10:18:42.733

**这是我的方法：**

```
 <script type="text/javascript">
    $(document).ready(function () {
        alert('Document Ready'); 
        $("#imgPreview").attr('src', '/Upload/Upload_Image.png');
    });
</script> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-17T23:42:26.223

有很多方法可以产生这种效果，但我发现最快的一种方法是

```
 setTimeout(function(){
     $(".pulse_image").trigger('mouseover');
 }, 1300); 
```

这肯定不是最好的解决方案，但它会做“技巧”......只需将其添加到`document.ready`回调中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-07-20T17:09:58.313

这是一个在页面加载时使用 ajax 调用加载默认数据的变体。

```
$(document).ready(function() {

    $.ajax({
        type: 'post',
        url: 'include/ajax.php',
        data: $('#search_filters').serialize(),
        success: function (response) {
            $('#search_display').html(response);
        }
    });

}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-24T11:58:43.467

```
 $(document).ready(function() {
    window.pulse_continue_loop = true;
    window.pulse_image = $('.pulse_image');
    setTimeout(function(){
      PulseAnimation();
    } // start the loop
  }); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-09-17T09:28:59.210

你也可以试试这个方法。这将在您的页面加载时触发。

```
function pageLoad(sender,args) {
// call your function
} 
```

# objective-c - 调整 NSWindow 大小时自动调整所有视图的大小

> ID：12468381
> 
> 赞同：0
> 
> 时间：2012-09-17T23:17:57.877
> 
> 标签：objective-c, macos, cocoa

当调整 NSWindow 的大小时，我正在尝试调整 NSViewController 中所有子视图的大小。NSWindow 视图包含 NSViewController.view 作为子视图。我将 autoResizing 设置为 YES，并将 autoResizing 掩码设置为水平和垂直。

```
 [self.view setAutoresizesSubviews:YES];
    [background setAutoresizingMask:NSViewWidthSizable | NSViewHeightSizable]; 
```

但是，这种技术对我不起作用。请注意，我所有的组件都是通过代码添加的，而不是使用 IB。所以我的问题是：

*   我应该添加什么以使其自动调整大小？
*   我使用 OpenGL 在另一个视图中绘制。我需要对新尺寸进行计算吗？当我将 cocos2d 用于另一个应用程序时，我不必担心计算。那么这里有类似的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T01:03:32.617

如果您希望 UI 组件响应布局更改，则需要在它们上设置布局约束。在 IB 中，有一些默认值不是您想要的，但它们可以进行调整。

自动调整大小是用词不当。根据预设的布局约束调整组件大小将是一个更好但更长的名称。

我想没有免费的午餐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T05:22:52.937

尝试这个：

```
[self.window.contentView setAutoresizesSubviews:YES]; 
```

而不是这个

```
[self.view setAutoresizesSubviews:YES]; 
```

如果您仍然需要调整子视图的大小或重新定位，可以在委托函数中进行。

```
- (void)windowDidResize:(NSNotification *)notification{ 
} 
```

# qt - 用于harmattan 开发的Qt 创建者更新

> ID：12468389
> 
> 赞同：2
> 
> 时间：2012-09-17T23:18:30.707
> 
> 标签：qt, ubuntu-12.04, meego-harmattan

我正在尝试更新用于harmattan 开发的Qt sdk。这是我正在遵循的指令

[harmattan-dev.nokia.com/docs/library/html/guide/html/Developer_Library_Getting_started_with_Harmattan_using_Qt_SDK_Installing_Qt_SDK_on_Linux.html](http://harmattan-dev.nokia.com/docs/library/html/guide/html/Developer_Library_Getting_started_with_Harmattan_using_Qt_SDK_Installing_Qt_SDK_on_Linux.html)

在成功安装 Qt 并移动到更新 Qt sdk 以进行harmattan开发的第一点

> 要使用 MeeGo 1.2 Harmattan API 目标更新 Qt SDK，请单击 Qt Creator 顶部工具栏上的帮助并选择启动更新程序。在 Package manager 选项卡上，您可以在 Qt SDK > Development Tools > Harmattan > MeeGo 1.2 Harmattan 下找到 MeeGo 1.2 Harmattan API 目标。您还可以选择其他目标，例如 Harmattan 仿真器 (QEMU)。

当我去启动更新程序 - > 包管理器并点击下一步。计算机挂起（无响应），过了一会儿显示我的登录屏幕（好像它已经重新启动，但没有显示任何重新启动时通常会出现的重新启动迹象），一旦我登录，我以前的所有进程都消失了，包括 qt creator。我不知道这里有什么问题。我的盒子在 ubuntu lts 12.04 上，qt sdk 是 1.2.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:59:29.043

这是由 SDKMaintenanceTool 的 QWidgets 中的错误引起的。解决方法是使用参数从终端启动更新程序`-style cleanlooks`

```
~ $ /path/to/QtSDK/SDKMaintenanceTool -style cleanlooks 
```

# c++ - 在 Visual Studio 2010 中链接 libfftw3-3.lib

> ID：12468391
> 
> 赞同：3
> 
> 时间：2012-09-17T23:19:03.843
> 
> 标签：c++, linker, fftw

我正在尝试在 Visual Studio 2010 中创建一个使用 FFTW 的简单项目。我无法链接库。

[我已经按照他们的 Windows 页面](http://fftw.org/install/windows.html)上的指示创建了 64 位 .lib 文件

我解压缩了他们下载的 64 位版本，并在该目录中运行了指定的工具。我已经将它解压缩到一个名为“fftw”的文件夹中，作为我项目的兄弟。

在 Visual Studio 中，我创建了一个具有所有默认值的 C++ 控制台应用程序。默认构建类型是调试 Win32。我已将此行添加到*Configuration Properties→Linker*： `C:\Users\XXXXX\Documents\Visual Studio 2010\Projects\fftw\libfftw3-3.lib`

我还添加了 libfftw3-3.lib 到*配置属性→链接器→输入*，并在那里尝试了一个完整路径。

我包括 StdLib 复合体和 FFTW：

```
#include <complex>
#include "..\..\fftw\fftw3.h" 
```

我的主要功能只有他们的示例代码：

```
int _tmain(int argc, _TCHAR* argv[])
{
  const int N = 1024;
  fftw_complex in[N], out[N];
  fftw_plan p;
  p = fftw_create_plan(N, FFTW_FORWARD, FFTW_ESTIMATE);
  fftw_one(p, in, out);
  fftw_destroy_plan(p);  
  return 0;
} 
```

当我尝试构建时，我得到了这个：

```
1>------ Build started: Project: FFTTest, Configuration: Debug Win32 ------
1>  FFTTest.cpp
1>c:\users\XXXXX\documents\visual studio 2010\projects\ffttest\ffttest\ffttest.cpp(34): error C3861: 'fftw_create_plan': identifier not found
1>c:\users\XXXXX\documents\visual studio 2010\projects\ffttest\ffttest\ffttest.cpp(36): error C3861: 'fftw_one': identifier not found
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

有人可以向我展示我的错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T13:52:46.613

找到它：`fftw_create_plan()`并且`fftw_one()`是已从 FFTW3 中删除的功能。

您可能已经从[FFTW2 教程](http://www.fftw.org/fftw2_doc/fftw_2.html)中获得了代码，请参阅[FFTW3 教程](http://www.fftw.org/fftw3_doc/Complex-One_002dDimensional-DFTs.html#Complex-One_002dDimensional-DFTs)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T23:36:53.660

不要在路径中使用反斜杠：

```
#include "../../fftw/fftw3.h" 
```

C/C++ 中的反斜杠被解释为转义字符，要生成反斜杠，您需要将其加倍，但通常始终用于`/`制作路径分隔符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T14:38:29.417

我试图将 FFTW v2 API 与 FFTW v3 库一起使用。[他们的v3 教程页面](http://www.fftw.org/fftw3_doc/Tutorial.html#Tutorial)上有一个工作示例。

我上面引用库的步骤很好。您可能还希望将 FFTW DLL 放入可执行文件所在的目录中。

# service-broker - Service Broker 应用程序队列禁用事件

> ID：12468392
> 
> 赞同：2
> 
> 时间：2012-09-17T23:19:15.147
> 
> 标签：service-broker

我正在尝试`BROKER_QUEUE_DISABLED`事件通知中的一个选项，它似乎没有正确生成代理队列禁用事件。有人可以验证我创建的脚本吗？（见下文）

脚本：

```
CREATE QUEUE NotifyQueue

GO

CREATE

SERVICE NotifyService

ON

QUEUE NotifyQueue

[http://schemas.microsoft.com/SQL/Notifications/PostEventNotification]);

GO

CREATE ROUTE NotifyRoute
 WITH SERVICE_NAME = 'NotifyService',
 ADDRESS = 'LOCAL';
 GO

CREATE

EVENT NOTIFICATION [CHS_QueueDisabledNotif] 

       ON QUEUE [CHS_Change_Queue] WITH FAN_IN 

       FOR BROKER_QUEUE_DISABLED

       TO SERVICE 'NotifyService', 'current database'

--Testing

--Try Disabling Application Queue

ALTER QUEUE dbo.CHS_Change_Queue WITH STATUS = OFF

SELECT * FROM NotifyQueue 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:25:20.473

我找到了我的问题的答案:)

如果我们手动关闭队列，SQL 引擎将不会生成禁用事件。只有在激活过程中发生任何错误时才会生成。我在激活过程中添加了自定义错误，类似于`SELECT 1/0`SQL 可以生成禁用事件。

# bash - bash 如果为空字符串

> ID：12468396
> 
> 赞同：2
> 
> 时间：2012-09-17T23:19:46.357
> 
> 标签：bash, if-statement

有些人可能在 Ubuntu 中通过终端安装或更新时发现了这一点

你得到一个类似的问题

> “您是否安装或删除软件包 [Y/n]？”

当你按下回车时，它就像你输入“Y”或“y”时一样

所以我想知道如何在 bash 中做到这一点这是我到目前为止所拥有的？

```
echo "question?[Y/n]"
read choose
if [ $choose ~= "Y" ] [ $choose ~= "y" ] [ $choose ~= "" ]
then 
#code
fi 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T23:34:14.577

经典地（意味着它可以在 POSIX-ish shell 中工作`bash`），你会写：

```
echo "Question? [Y/n]"
read choose
if [ "$choose" = "Y" ] || [ "$choose" = "y" ] || [ -z "$choose" ]
then 
    # code
fi 
```

引号确保测试操作员看到一个参数，即使`$choose`是一个空字符串。

该`[[`运算符似乎允许您在不引用字符串的情况下逃脱，但它不是 POSIX shell 的一部分。POSIX 通过以下方式认识到它的存在：

> 以下单词在某些实现中可能被识别为保留字（当没有引用任何字符时），导致未指定的结果：
> 
> ```
> [[    ]]    function    select 
> ```

如果您希望 shell 将光标留在提示符所在的同一行，您可以使用：

```
printf "Question? [Y/n] " 
```

POSIX shell 识别`\c`转义；`bash`才不是：

```
echo "Question? [Y/n] \c" 
```

（可能有一种方法可以`bash`处理它，但`printf`可能更便携。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T23:41:47.777

```
echo -n "Question? [Y/n]"
read choose 
shopt -s nocasematch
if [[ "${choose:=Y}" =~ Y ]]; then
     # they said yes
else
     # they said something else
fi 
```

这种方法有一个可能的优势，即`$choose`如果您稍后检查它，它会保留设置为 Y。如果您希望以后能够知道他们是输入了`Y`还是刚刚按下了输入，您可以`${choose:-Y}`改用。

如果您不想设置`nocasematch`，您可以随时明确检查`Y`和`y`。或者，如果您喜欢该`nocasematch`解决方案但关心保留标志的状态，您可以检查并恢复它：

```
shopt -q nocasematch
let not_set=$?
shopt -s nocasematch 
```

...

```
if (( not_set )); then
   shopt -u nocasematch
fi 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T23:29:04.287

见`test(1)`。

```
[ "$choose" = "Y" -o "$choose" = "y" -o "$choose" = "" ] 
```

你**必须**把变量放在双引号之间，否则表达式会产生一个空变量的错误，因为它们各自的左边都是空的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T23:22:00.273

"read" 读取输入以进入。因此，如果您只想接受“输入”作为答案，请尝试使用“”答案。您可以使用 [[ ]] 而不是“test”命令来检查字符串（ man test ）

```
dtpwmbp:~ pwadas$ [[ -z "" ]] && echo yes 
yes
dtpwmbp:~ pwadas$ [[ -z "ABCD" ]] && echo yes 
dtpwmbp:~ pwadas$ 
```

在这里，测试字符串的零长度。

# vb.net - Basic Visual Basic 程序错误 - 可能是变量错误

> ID：12468398
> 
> 赞同：1
> 
> 时间：2012-09-17T23:20:01.900
> 
> 标签：vb.net, visual-studio-2010

我正在为 Visual Basic 编写这个程序，它将根据用水量确定账单。我的问题是我输入的所有值在命令提示符中都返回为零。谁能解释这段代码有什么问题？

* * *

```
Option Explicit On
Option Strict On

Imports System

module eurekawatercompany

  Sub Main ()
    ' Declare variables of problem
    Dim waterusage as double 
    Dim totalcharge as double

    ' Prompts for user to enter their water usage.
    Console.write ("Please enter your current water usage (cubic feet): ")
    waterusage = convert.toint32(console.readline())
      If (waterusage < 1000) then
      totalcharge = 15

      End If

      If (1000 > waterusage) and (waterusage < 2000) then
      totalcharge = 0.0175 * waterusage + 15

      End If

      else if (2000 < waterusage) and (waterusage > 3000) then
      totalcharge = 0.02 * waterusage + 32.5

      End If
      ' 32.5 is the price of exactly 2000cm^(3) of water

      else if (waterusage > 3000) then
      totalcharge = 70

      End If

    Console.out.writeline ("Total charge is: ")
      Console.out.writeline (totalcharge)

  End sub

End Module 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T23:26:53.303

首先，您的声明：

```
If (1000 > waterusage) and (waterusage < 2000) then 
```

相当于：

```
If (waterusage < 1000) and (waterusage < 2000) then 
```

这意味着它的测试`waterusage`既小于 1000*又*小于 2000（即，它小于 1000）*。*我想你的意思可能是这样的：

```
If (waterusage > 1000) and (waterusage <= 2000) then 
```

您会注意到我也使用`<=`过，因为您的`if`语句根本不处理边缘情况（2000 既不小于也不大于 2000，因此输入 2000 不会导致您的原始`if`语句触发）。

您还需要对`0 to 1000`和`2000 to 3000`案例进行类似的更改。

* * *

我也不*完全*确定：

```
:
End If
else if ... 
```

构造是正确的（除非 VB.NET自 VB6 时代以来在较低级别发生了*巨大*变化（我知道有很多变化，但改变这样一个低级的东西`if`是不可能的）。`end if`关闭据我所知，*整个* 声明，所以应该在and*之间*。`if``else`*`if``end if`*

 *所以我会看类似的东西：

```
Option Explicit On
Option Strict On
Imports System
Module EurekaWaterCompany

Sub Main ()
    Dim WaterUsage as double
    Dim TotalCharge as double

    Console.Out.Write ("Please enter your current water usage (cubic feet): ")
    WaterUsage = Convert.ToInt32 (Console.In.ReadLine())

    If (WaterUsage <= 1000) then
        TotalCharge = 15
    ElseIf (WaterUsage > 1000) and (WaterUsage <= 2000) then
        TotalCharge = 0.0175 * WaterUsage + 15
    ElseIf (Waterusage > 2000) and (WaterUsage <= 3000) then
        TotalCharge = 0.02 * WaterUsage + 32.5
    Else
        TotalCharge = 70
    End If

    Console.Out.WriteLine ("Total charge is: ")
    Console.Out.WriteLine (TotalCharge)
End sub

End Module 
```

该代码还有一些小的修复，例如正确指定I/O`Out`和`In`使用“正确”大写，尽管它没有经过全面测试并且可能仍然存在一些语法错误。代码背后的想法（基本上是`if`声明）仍然是合理的。

* * *

但是，您可能需要检查您的规格。

当公用事业公司对其资源收费时，他们倾向于对超出一定水平的*超额部分征收更高的费率，而不是全部金额。*换句话说，我预计*前*1000 立方英尺的收费为 15 美元，然后每立方英尺收取 1.75 美分*，*这将使您的陈述看起来更像：

```
ElseIf (WaterUsage > 1000) and (WaterUsage <= 2000) then
    TotalCharge = 0.0175 * (WaterUsage - 1000) + 15 
```

在这种情况下，这是有道理的，因为第一千人的收费为 1.5c/ft 3，第二千人的费用为 1.75c/ft ³ ^，第三千人的费用为2c/ft ³，下限为 15 美元（无论您实际使用多少，您都会收取前一千美元的费用），对于使用超过三千立方英尺的任何人，您将收取 70 美元的固定费用（有点像罚款率）。

但是，这是我的假设，根据经验。可能是您的规范另有说明，在这种情况下，请随意忽略本节。*

# c# - FileStream 将“额外”字符添加到 TXT 文件

> ID：12468399
> 
> 赞同：3
> 
> 时间：2012-09-17T23:20:04.397
> 
> 标签：c#, stream, filestream

无论我读取 TXT 文件还是 XML 文件，我总是会看到“额外”信息添加到我的文件中，这些信息保存到磁盘中。我们首先执行以下操作：

```
FileStream fs = new FileStream(fileMoverFile.SourcePath, FileMode.Open, FileAccess.Read); 
```

然后我们分配`fs`一个类型的变量，`Stream`我们将其传递给下面的函数：

```
private void SaveToDisk(Stream fileStream, string saveToPath)
{
  if (!Directory.Exists(Path.GetDirectoryName(saveToPath)))
  {
    Directory.CreateDirectory(Path.GetDirectoryName(saveToPath));
  }
  FileStream outputStream = new FileInfo(saveToPath).OpenWrite();
  const int bufferSize = 1024;
  byte[] buffer = new byte[bufferSize];
  int bytesRead = fileStream.Read(buffer, 0, bufferSize);
  while (bytesRead > 0)
  {
    outputStream.Write(buffer, 0, bufferSize);
    bytesRead = fileStream.Read(buffer, 0, bufferSize);
  }
  outputStream.Close();
} 
```

当我打开保存到磁盘的文件时，我看到了额外的信息，这些信息基本上是同一个文件的一些内容与不属于该文件的一些其他信息重复。很奇怪。

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T23:23:55.310

您需要写入`bytesRead`字节，而不是`bufferSize`字节：

```
int bytesRead = fileStream.Read(buffer, 0, bufferSize);
while (bytesRead > 0)
{
    outputStream.Write(buffer, 0, bytesRead); // Change this here 
```

现在，当您到达输入流的末尾时，您可能写入的数据多于您读入的数据，这将导致文件末尾出现“额外的垃圾”。

话虽如此，如果您的目标只是复制流，则可以只使用[Stream.CopyTo](http://msdn.microsoft.com/en-us/library/dd782932.aspx)（前提是您在 .NET 4+ 中）。这完全避免了读/写循环，并大大简化了您的代码：

```
private void SaveToDisk(Stream fileStream, string saveToPath)
{
  if (!Directory.Exists(Path.GetDirectoryName(saveToPath)))
  {
    Directory.CreateDirectory(Path.GetDirectoryName(saveToPath));
  }
  using(FileStream outputStream = new FileInfo(saveToPath).OpenWrite())
  {
      fileStream.CopyTo(outputStream);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T23:22:48.970

您没有正确使用缓冲区。如果调用`fileStream.Read()`返回的值小于该值，`bufferSize`您的程序仍会继续读取包含先前读取数据的缓冲区的其余部分。

这是你应该如何做的：

```
using(FileStream output = new FileStream( saveToPath, FileMode.Create, FileAccess.Write )) {

    Byte[] buffer = new Byte[ 32 * 1024 ]; // a 32KB-sized buffer is the most efficient
    Int32 bytesRead;

    while( (bytesRead = fileStream.Read( buffer, 0, buffer.Length ) ) > 0 ) {

        output.Write( buffer, 0, bytesRead );
    }
    output.Flush();
} 
```

请注意我如何使用`using`和`bytesRead`限制重写到输出的数据。

# spotify - 是否可以使用 Spotify 应用程序访问 Spotify 上的朋友？

> ID：12468402
> 
> 赞同：2
> 
> 时间：2012-09-17T23:20:25.960
> 
> 标签：spotify, social

嗨，我对 Spotify 应用程序 API 非常陌生，但我对编程有了一些了解，因为它只使用 HTML、CSS 和 JavaScript，所以我在理解我需要使用的代码方面不会有问题。然而，我一直试图在 API 文档中找到我需要的东西，但老实说，这完全是废话，不是那么详细和非常糟糕的例子。无论如何，我需要访问用户的朋友来检查我的数据库中的用户 ID 并基于此获取一些信息。现在我在这方面找不到任何东西，但我想那里一定有社交部分，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T09:24:00.000

不幸的是，Apps API 没有好友支持——这就是你找不到它的原因。

# oracle - 尝试在 Oracle 中进行 UNION

> ID：12468410
> 
> 赞同：0
> 
> 时间：2012-09-17T23:21:36.140
> 
> 标签：oracle, plsql

我有两个要尝试联合的查询。两个查询分别工作，我很确定所有数据类型都匹配。我在第一个查询中收到错误“不是按表达式分组”。我还在第二个中得到了“Dealer_label invalid indetifier”。我意识到这是一个很长的查询，但如果有人立即看到一些东西，那么我会很感激。谢谢

```
SELECT Item_Category
        , 'CATEGORY: ' || Item_Category AS Item_Category_Header
        , Item_SubCategory
        , Item_Category || ' TOTALS: ' AS Item_Category_Total
              ,Item_RCN
              , (SELECT SUBSTR(TRIM(IC2.ic_short_descr),1,50) FROM ITEM_CATALOG IC2 WHERE TO_NUMBER(IC2.ic_rcn) = Item_RCN AND IC2.ls_year = License_Year AND ROWNUM = 1) AS Item_Description
              ,License_Year
              , Discount_Type
              , Status_Type
              ,Dealer_Fee 
              , Item_State_Fee
              , Item_Trans_Fee
              , Total_Licenses_Sold
              , Total_State_Fee
              , Total_Trans_Fee
              , AO_Trans_Fee
              , WDFW_Trans_Fee
        FROM (SELECT Item_Category
                     , Item_SubCategory
                     , Item_RCN
                     , License_Year
                     , Discount_Type
                     , Status_Type
                     , Dealer_Fee 
                     ,Item_State_Fee, Item_Trans_Fee
                     ,SUM(Total_Licenses_Sold) AS Total_Licenses_Sold
                     , SUM(Total_State_Fee) AS Total_State_Fee
                     , SUM(Total_Trans_Fee) AS Total_Trans_Fee
                     ,SUM(AO_Trans_Fee) AS AO_Trans_Fee
                     , SUM(WDFW_Trans_Fee) AS WDFW_Trans_Fee
              FROM (SELECT /*+ index(IT ITEM_X4) */ 
                          TRIM(LT.lt_descr) AS Item_Category
                          , TRIM(ITT.itt_name) AS Item_SubCategory
                          , TO_NUMBER(IT.ic_rcn) AS Item_RCN
                          , LS.ls_year AS License_Year
                          ,SUBSTR(TRIM(DT.di_descr),1,3) AS Discount_Type
                          , IT.is_id AS Status_Type
                          , 0.00  AS Dealer_Fee
                          ,CASE WHEN NVL(IT.it_state_fee, 0.00) = 0.00 THEN 0.00 ELSE IT.it_state_fee / NVL(IT.it_quantity, 1) END AS Item_State_Fee
                          ,CASE WHEN NVL(IT.it_other_fee, 0.00) = 0.00 THEN 0.00 ELSE IT.it_other_fee / NVL(IT.it_quantity, 1) END AS Item_Trans_Fee
                          ,NVL(IT.it_quantity * CASE WHEN IT.is_id IN ('DC','SC') THEN -1 ELSE 1 END, 0) AS Total_Licenses_Sold
                          ,NVL(IT.it_state_fee * CASE WHEN IT.is_id IN ('DC','SC') THEN -1.00 ELSE 1.00 END, 0.00) AS Total_State_Fee
                          ,NVL(IT.it_other_fee * CASE WHEN IT.is_id IN ('DC','SC') THEN -1.00 ELSE 1.00 END, 0.00) AS Total_Trans_Fee
                          ,CASE WHEN NVL(IT.it_other_fee, 0.00) = 0.00 OR NVL(4, 0.00) = 0.00 THEN 0.00 
                            ELSE ROUND(IT.it_state_fee * CASE WHEN IT.is_id IN ('DC','SC') THEN -1.00 ELSE 1.00 END * (4 / 100), 2) 
                           END AS AO_Trans_Fee
                          ,CASE WHEN NVL(IT.it_other_fee, 0.00) = 0.00 OR NVL(4, 0.00) = 0.00 THEN 0.00 
                            ELSE (IT.it_other_fee * CASE WHEN IT.is_id IN ('DC','SC') THEN -1.00 ELSE 1.00 END) - 
                              ROUND((IT.it_state_fee * CASE WHEN IT.is_id IN ('DC','SC') THEN -1.00 ELSE 1.00 END * (4 / 100)), 2) 
                           END AS WDFW_Trans_Fee
                    FROM ITEM IT
                    JOIN ITEM_CATALOG IC ON IC.ic_id = IT.ic_id
                    JOIN DISCOUNT_TYPE DT ON DT.di_id = IT.di_id
                    JOIN LICENSE_TYPE LT ON LT.lt_id = IT.lt_id
                    JOIN ITEM_TYPE ITT ON ITT.itt_id = IT.itt_id
                    JOIN LICENSE_SEASON LS ON LS.ls_id = IT.ls_id
                    JOIN AGENT AG ON AG.ag_id = IT.ag_id
                    JOIN AGENT_TYPE AGT ON AGT.at_id = AG.at_id
                    LEFT JOIN CORPORATION CP ON CP.cp_id = AG.cp_id
                    LEFT JOIN BUSINESS_TYPE BT ON BT.bt_id = AG.bt_id
                    WHERE IT.it_status_ind = 'A'
                      AND (IT.is_id IN ('AC','DC','SC','EX') OR (IT.is_id = 'DU' AND NVL(IT.it_state_fee, 0) != 0)) -- Exclude voids and false duplicates.
                      AND IT.ic_rcn != '999' -- Exclude Dealer Fees.
                      AND IT.it_status_set_date BETWEEN TO_DATE('04/01/2012' || ' 00:00:00', 'MM/DD/YYYY HH24:MI:SS') + 2/24
                                                    AND TO_DATE('04/07/2012' || ' 23:59:59', 'MM/DD/YYYY HH24:MI:SS') + 2/24 
                 /*     AND (:p_ls_year IS NULL OR LS.ls_year = :p_ls_year)
                      AND (:p_dealer_id IS NULL OR AG.AG_ID = :p_dealer_id)
                      AND (:p_discount_type IS NULL OR DT.di_id = :p_discount_type)
                      AND (:p_corp_id IS NULL OR CP.CP_ID = :p_corp_id)
                      AND (:p_lt_id IS NULL OR LT.lt_id = :p_lt_id) --Category
                      AND (:p_itt_id IS NULL OR ITT.itt_id = :p_itt_id) --SubCategory*/

                  ) ReportRollup
        GROUP BY Item_Category, Item_SubCategory, Item_RCN, License_Year, Discount_Type, Status_Type, Item_State_Fee, Item_Trans_Fee
        ORDER BY Item_Category, Item_SubCategory, Item_RCN, License_Year, Discount_Type, Status_Type, Item_State_Fee, Item_Trans_Fee
        ) ReportDetails  

  UNION

    SELECT     'DEALER FEES' AS Item_Category
           ,'CATEGORY: DEALER FEES' AS Item_Category_Header
           ,'DEALER FEES' AS Item_Subcategory
           ,'DEALER FEE TOTALS:' AS Item_Category_Total
           ,Report_Group AS Item_RCN
            ,Dealer_Label AS Item_Description
            ,License_Year
            ,'DF' AS Discount_Type 
            ,'DF' AS Status_Type 
            ,SUM(Dealer_Fee) AS Dealer_Fee
            ,0 AS Item_State_Fee 
            ,0 AS Item_Trans_Fee 
            ,0 AS Total_Licenses_Sold 
            ,0 AS Total_State_Fee 
            ,0 AS Total_Trans_Fee
            ,0 AS AO_Trans_Fee 
            ,0 AS WDFW_Trans_Fee 
      FROM (SELECT /*+ index(IT ITEM_X4) */ 
              CASE 
                WHEN AGT.at_id = 7 THEN 9996 -- Internet.
                WHEN AGT.at_id = 4 THEN 9997 -- Telephone.
                WHEN NVL(AG.bt_id,'O') = 'S' THEN 9998 -- State Agency.
                ELSE 9999 -- All others.
              END Report_Group
              ,CASE WHEN AGT.at_id = 7 THEN TO_CHAR(AG.ag_id) -- Internet.
                 WHEN AGT.at_id = 4 THEN TO_CHAR(AG.ag_id) -- Telephone.
                 WHEN NVL(AG.bt_id,'O') = 'S' THEN TRIM(AG.ag_name) || ' - ' || TO_CHAR(AG.ag_id)   -- State Agency.
                 ELSE 'ALL OTHERS'
               END Dealer_Label
              ,LS.ls_year License_Year
              ,NVL(IT.it_agent_fee * CASE 
                    WHEN IT.is_id IN ('DC','SC') 
                    THEN -1.00 
                    ELSE 1.00 
                   END, 0.00) Dealer_Fee
              FROM ITEM IT
              JOIN ITEM_CATALOG IC ON IC.ic_id = IT.ic_id
              JOIN DISCOUNT_TYPE DT ON DT.di_id = IT.di_id
              JOIN LICENSE_TYPE LT ON LT.lt_id = IT.lt_id
              JOIN ITEM_TYPE ITT ON ITT.itt_id = IT.itt_id
              JOIN LICENSE_SEASON LS ON LS.ls_id = IT.ls_id
              JOIN AGENT AG ON AG.ag_id = IT.ag_id
              JOIN AGENT_TYPE AGT ON AGT.at_id = AG.at_id
              LEFT JOIN CORPORATION CP ON CP.cp_id = AG.cp_id
              LEFT JOIN BUSINESS_TYPE BT ON BT.bt_id = AG.bt_id
              WHERE IT.it_status_ind = 'A'
                AND (IT.is_id IN ('AC','DC','SC','EX') OR (IT.is_id = 'DU' AND NVL(IT.it_state_fee, 0) != 0)) -- Exclude voids and false duplicates.
                AND IT.ic_rcn = '999' -- Exclude Dealer Fees.
                AND IT.it_status_set_date BETWEEN TO_DATE('04/01/2012'|| ' 00:00:00', 'MM/DD/YYYY HH24:MI:SS') + 2/24
                                              AND TO_DATE('04/07/2012' || ' 23:59:59', 'MM/DD/YYYY HH24:MI:SS') + 2/24 
      /*    AND (:p_ls_year IS NULL OR LS.ls_year = :p_ls_year)
                AND (:p_dealer_id IS NULL OR AG.AG_ID = :p_dealer_id)
                AND (:p_discount_type IS NULL OR DT.di_id = :p_discount_type)
                AND (:p_corp_id IS NULL OR CP.CP_ID = :p_corp_id)
                AND (:p_lt_id IS NULL OR LT.lt_id = :p_lt_id) --Category
                AND (:p_itt_id IS NULL OR ITT.itt_id = :p_itt_id) --SubCategory*/ 

           ORDER BY Report_Group     
              ) DealerFees
      GROUP BY Report_Group
              ,Dealer_Label
              ,License_Year
      ORDER BY Dealer_Label
              ,License_Year
 ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T23:42:53.127

列表行：

```
 ,Dealer_Label AS Item_Description 
```

`Dealer_Label`将子查询重命名为`Item_Description`：

```
 GROUP BY Report_Group
              ,Dealer_Label
              ,License_Year
      ORDER BY Dealer_Label
              ,License_Year 
```

应该

```
 GROUP BY Report_Group
              ,Item_Description
              ,License_Year
      ORDER BY Item_Description
              ,License_Year 
```

或者从选择列表中删除新标签。

# ruby-on-rails-3 - Rails 应用程序中的批处理作业"

> ID：12468422
> 
> 赞同：0
> 
> 时间：2012-09-17T23:23:20.770
> 
> 标签：ruby-on-rails-3

我有一种情况我不知道如何解决......我有一个 Rails 应用程序，我在其中存储设备令牌以向 iOS 设备发送推送通知。我有一个控制面板，我在其中创建一个查询来获取我想要通知的设备，但是发送过程需要一些时间，所以我怎样才能让一个进程在后台运行或类似的东西？这样做的最佳方法是什么？

任何的想法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T23:25:07.947

后台工作，delayed_job gem 上有一个很棒的 railscast 看看，如果您计划在 heroku 上运行您的应用程序，您将需要一个工作人员测功机

[http://railscasts.com/episodes/171-delayed-job](http://railscasts.com/episodes/171-delayed-job)

# xml - 如何为多答案复选框 QuestionSpec 制作答案键 XML？

> ID：12468424
> 
> 赞同：1
> 
> 时间：2012-09-17T23:23:37.217
> 
> 标签：xml, mechanicalturk, qualifiers

我正在用一个多答案复选框问题进行资格测试。

```
<AnswerSpecification>
  <SelectionAnswer>
    <StyleSuggestion>checkbox</StyleSuggestion>
    <Selections>
      <Selection>
        <SelectionIdentifier>grammar</SelectionIdentifier>
        <Text>Bad grammar.</Text>
      </Selection>
      <Selection>
        <SelectionIdentifier>spelling</SelectionIdentifier>
        <Text>Bad spelling</Text>
      </Selection>
      <Selection>
        <SelectionIdentifier>punctuation</SelectionIdentifier>
        <Text>Bad punctuation</Text>
      </Selection>
      ...
    </Selections>
  </SelectionAnswer>
</AnswerSpecification> 
```

问题显示得很好，但是 AnswerKey.xml 可以验证，但不能正常工作。

```
<Question>
 <QuestionIdentifier>my_question_id</QuestionIdentifier>
 <AnswerOption>
   <SelectionIdentifier>grammar</SelectionIdentifier>
   <AnswerScore>5</AnswerScore>
 </AnswerOption>
 <AnswerOption>
   <SelectionIdentifier>punctuation</SelectionIdentifier>
   <AnswerScore>5</AnswerScore>
 </AnswerOption>
</Question> 
```

如果工人同时选择“语法”和“标点符号”，最终的分数应该是 10，但结果是零。

其他人有这个问题吗？

谢谢，

琳达

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-28T21:04:55.230

我认为您必须将两个答案一起指定为第三种响应模式：

```
<Question>
 <QuestionIdentifier>my_question_id</QuestionIdentifier>
 <AnswerOption>
   <SelectionIdentifier>grammar</SelectionIdentifier>
   <AnswerScore>5</AnswerScore>
 </AnswerOption>
 <AnswerOption>
   <SelectionIdentifier>punctuation</SelectionIdentifier>
   <AnswerScore>5</AnswerScore>
 </AnswerOption>
 <AnswerOption>
   <SelectionIdentifier>grammar</SelectionIdentifier>
   <SelectionIdentifier>punctuation</SelectionIdentifier>
   <AnswerScore>10</AnswerScore>
 </AnswerOption>
</Question> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-16T01:03:52.560

或者，您也可以将每个复选框选项设为自己独特的“问题”，然后您不必担心指定每个可能的排列。

# android - Android 活动 - 背景可绘制动画

> ID：12468425
> 
> 赞同：6
> 
> 时间：2012-09-17T23:23:38.600
> 
> 标签：android, background, animated

问题很简单，但是对于像我这样的android初学者还没有找到任何简单的答案......

如何在 android 中为可绘制的背景设置动画？

如果可能的话，我想通过一些简单易懂的方式来实现 bakcground 动画。

非常感谢您的帮助问候，布鲁诺

编辑：经过一番谷歌搜索后，我设法实现了我的目标。我使用了 hasanghaforian 描述的方法和在这个简单的动画示例[http://code.google.com/p/android-animation-example/中找到的应用机制](http://code.google.com/p/android-animation-example/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T00:01:19.163

您可以使用 RelativeLayout 或 AbsoluteLayout ，将图像（覆盖它的父级）放入其中，然后安装活动的当前布局。现在，如果您为该图像设置动画，您的活动的背景似乎会动画。
例如，假设这是您的活动的当前布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/vg"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/img"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" />
</LinearLayout> 
```

现在这个布局看起来像以前的布局，你可以为它的 ID 的图像设置动画`img1`（它看起来像 backgr:ound of main layout）：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/vg"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/img1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_x="0dp"
        android:layout_y="0dp"
        android:src="@drawable/bright_sun" />
    <LinearLayout
    android:id="@+id/vg2"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

        <ImageView
        android:id="@+id/img"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" />
    </LinearLayout>

</RelativeLayout> 
```

# c++ - 用于 3D 重建的 OpenCV 未校准相机校正

> ID：12468426
> 
> 赞同：1
> 
> 时间：2012-09-17T23:23:46.873
> 
> 标签：c++, opencv, 3d, camera-calibration, homography

我正在运行 OpenCV 2.4.2。

我的项目包括一个 3D 人脸识别。

**我正在尝试从未经校准的相机**拍摄的一对图像创建一个 3D 模型。
我的目标是获得一些用于识别过程的 3D 特征。

我正在尝试校准和校正相机，但没有得到好的结果。
我做了这些步骤：

*   从 2 张图像中提取 SURF 特征
*   发现 2 个图像特征之间的对应关系
*   计算基本矩阵感谢`findFundamentalMat`
*   用于`stereoRectifyUncalibrated`获取单应矩阵
*   `warpPerspective`与第一个图像和第一个单应矩阵一起使用以查看结果。

我得到了一个非常糟糕的结果，我现在不知道该怎么办......

那个算法对吗？有什么建议吗？

我可以使用什么样的 3D 功能来获得更好的人脸识别？

这里是校准代码：

```
/// Conversione di 1 vettore di keypoints in 2 vettori di Point2f
vector<int> pointIndexesLeft;
vector<int> pointIndexesFront;

for (vector<DMatch>::iterator it= matches_FL.begin(); it!= matches_FL.end(); ++it) {
    // Estrazione degli indici
    pointIndexesLeft.push_back(it->queryIdx);
    pointIndexesFront.push_back(it->trainIdx);
}

// Convrsione dei keypoints in Point2f
vector<cv::Point2f> selPointsLeft, selPointsFront;
KeyPoint::convert(keypoints_left,selPointsLeft,pointIndexesLeft);
KeyPoint::convert(keypoints_front,selPointsFront,pointIndexesFront);

// Calcolo della matrice fondamentale
Mat F = findFundamentalMat(
                           Mat(selPointsFront), // points in first image
                           Mat(selPointsLeft), // points in second image
                           CV_FM_RANSAC);       // 8-point method

/// Rettifico la camera
Mat H1,H2;
stereoRectifyUncalibrated(selPointsFront, selPointsLeft, F, img_front.size(), H1, H2,3);

Mat out_right= Mat::zeros(img_front.rows, img_front.cols, img_front.depth());
Mat out_left= Mat::zeros(img_left.rows, img_left.cols, img_front.depth());

warpPerspective(img_front,out_right, H1, img_front.size(), INTER_LINEAR | WARP_INVERSE_MAP, BORDER_TRANSPARENT);
warpPerspective(img_left,out_left, H2, img_left.size(), INTER_LINEAR | WARP_INVERSE_MAP, BORDER_TRANSPARENT);

imshow("out_right", out_right);
imshow("out_left", out_left); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T20:48:01.863

首先，第一次检测/识别与 3D 重建无关。假设您确实想从一台未校准的相机对物体进行 3D 重建，通常有两种选择：

1）您首先使用校准图案（通常是象棋图案）校准相机；请参阅 camera_calibration.cpp 示例。

2）你可以同时校准和做3D重建，最简单的过程是这样的：首先使用任何特征检测算法提取显着点（特征）（每个都有优点和缺点，但是你应该得到工作结果），为找到的特征提取描述符，匹配两张条件良好的照片的描述符，找到基本矩阵 F，从 F 中提取两个投影矩阵（3x4 矩阵），对匹配的特征进行三角剖分，然后通过切除递归进行：使用已计算的 3D 点和新照片中匹配的特征来计算其相机矩阵（内在和外在矩阵），对新照片带来的新特征进行三角剖分，并对整个重建空间（相机和3D 点）。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T19:32:06.297

相信我，没有任何内在数据的 3D 重建是一种痛苦。我正在用改进的平板扫描仪做同样的事情。

您还可以查看以下帖子：[2 幅图像的 3d 重建，没有有关相机的信息](https://stackoverflow.com/questions/9026567/3d-reconstruction-from-2-images-without-info-about-the-camera)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-08T06:40:22.083

尽管我不确定您要使用这种面部图像方法来完成什么，但我发现您的方法存在以下问题。

在找到单应矩阵 H1、H2 之前一切都很好，但在那之后：

```
warpPerspective(img_front,out_right, H1, img_front.size(), INTER_LINEAR | WARP_INVERSE_MAP, BORDER_TRANSPARENT);
warpPerspective(img_left,out_left, H2, img_left.size(), INTER_LINEAR | WARP_INVERSE_MAP, BORDER_TRANSPARENT);
```

请参阅参考资料：[warpPerspective on opencv doc](http://docs.opencv.org/2.4/modules/imgproc/doc/geometric_transformations.html#void%20warpPerspective(InputArray%20src,%20OutputArray%20dst,%20InputArray%20M,%20Size%20dsize,%20int%20flags,%20int%20borderMode,%20const%20Scalar&%20borderValue))

不应有 WARP_INVERSE_MAP 标志，因为 H1 是前向单应性而非后向单应性。通过不使用此标志并使用未校准的相机图像，我得到了正确的结果。当您使用未校准的相机时，实际上没有问题，只要您能够在多次迭代中一致地识别基本矩阵。

试试这个，让我们知道它是否对你有用。

# oracle - 为 Oracle Membership Provider 设置拥有模式

> ID：12468430
> 
> 赞同：0
> 
> 时间：2012-09-17T23:24:10.297
> 
> 标签：oracle, membership-provider

我的团队正在使用 Oracle Membership Provider 来帮助管理 .NET 4、MVC3 Web 应用程序的用户。我们最近发现，我们的客户坚持认为拥有对象的架构与 Web 应用程序用于连接数据库的架构/用户不同。授予第二个模式的权限不是问题，但是我们如何配置 Membership Provider 以在与连接用户不同的模式中查看其表、函数等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T22:41:33.987

同义词似乎是唯一的答案。我们没有使用 Membership Provider 的所有功能，但以下查询似乎足以生成我们需要的同义词：

```
DECLARE
  CURSOR ora_obj_rows IS (SELECT * FROM ALL_OBJECTS WHERE OWNER = '&owner_user' AND OBJECT_NAME LIKE 'ORA_ASPNET%' AND OBJECT_TYPE IN ('TABLE', 'PACKAGE', 'FUNCTION'));
BEGIN
FOR ora_obj IN ora_obj_rows
LOOP
  EXECUTE IMMEDIATE 'CREATE SYNONYM "' || '&login_user' || '"."' || ora_obj.OBJECT_NAME || '" FOR "' || '&owner_user' || '"."' || ora_obj.OBJECT_NAME || '"';
END LOOP;
END;
/ 
```

`&owner_user`和`&login_user`是在执行时填写的参数。（因为我们使用的是脚本，所以我们`DEFINE`在上面。）执行此查询的用户需要能够看到 ALL_OBJECTS 中的对象，并有权在登录用户上创建 SYNONYM。此外，需要对这些对象授予适当的读写权限。

如果其他人有更好的东西，我很乐意将其标记为答案。

# email - CDO 检查电子邮件是否已收到/有效

> ID：12468432
> 
> 赞同：0
> 
> 时间：2012-09-17T23:24:33.713
> 
> 标签：email, asp-classic, response, cdo.message

我想将带有错误/无效电子邮件的用户添加到我数据库中的表中。（原因：教授添加的学生可能写错了他们的电子邮件，我们想联系教授并提供一份报告，要求他们进行验证）是否有类似收据之类的东西来查看实际收到的内容：[http://classicasp。 aspfaq.com/email/can-i-get-cdo-messages-to-return-a-read-receipt.html](http://classicasp.aspfaq.com/email/can-i-get-cdo-messages-to-return-a-read-receipt.html)

如果邮件服务器的响应不是收到的，则将电子邮件添加到我的表中。

我想在脚本运行时立即收到此信息，但如果这是不可能的 - 你能想出一种方法来执行这个脚本吗？我可以每周运行一次。似乎很多邮件服务器都禁用了 VRFY，所以我不确定这是否是一个有效的选项：[http ://onlamp.com/pub/a/onlamp/excerpt/sendmailckbk_chap01/index1.html?page=2](http://onlamp.com/pub/a/onlamp/excerpt/sendmailckbk_chap01/index1.html?page=2)

我的代码可以正常发送电子邮件；我只需要添加这个功能。

# python - 为什么python中的strip方法不采用文本文件中的两个“\ n”

> ID：12468440
> 
> 赞同：1
> 
> 时间：2012-09-17T23:25:14.410
> 
> 标签：python

```
import pdb
input_file_eng = open('engltreaty.txt')
word_list_eng = input_file_eng.read()
pure_word_list_eng = word_list_eng.strip("\n").strip("\r").strip('-').strip('.').strip(',').strip('(').strip(')').strip('[').strip(']')
pdb.set_trace()
input_file_eng.close() 
```

在断点处，我检查了字符串 pure_word_list_eng，它仍然包含 '[',']',"\n" "\n\n"

我下面是文本文件：

> 维多利亚女王陛下 大不列颠及爱尔兰联合王国女王以她的皇室宠爱新西兰的土著酋长和部落，急于保护他们的正当权利和财产，并确保他们享有和平与良好秩序由于大量女王陛下的臣民已经在新西兰定居，而且欧洲和澳大利亚的移民正在迅速扩大，这仍在进行中，以组建和任命一名获得适当授权的官员来与新西兰原住民相处以表彰女王陛下”s 对这些岛屿的全部或任何部分的主权权力——因此，女王陛下希望建立一种固定形式的民事政府，以期避免因缺乏必要的法律和制度而必须对当地人造成的不良后果人口和她的臣民非常高兴地授权并授权我威廉霍布森担任女王陛下皇家海军领事的上尉和新西兰某些地区的副总督，该地区可能或以后将被割让给女王陛下，邀请联邦和新西兰独立酋长同意以下条款和条件。
> 
> 第一条 【第 1 条】新西兰联合部落联盟的酋长和尚未成为联盟成员的独立独立酋长绝对无保留地向英国女王陛下割让一切权利和权力上述邦联或个别酋长分别行使或拥有或可能被假定在其各自领土上作为其唯一主权行使或拥有的主权。
> 
> 第 2 条 [第 2 条] 英国女王陛下确认并保证新西兰的酋长和部落及其各自的家庭和个人完全专有和不受干扰地拥有他们的土地和庄园、森林、渔业和其他财产。可以集体或个人拥有，只要他们希望和渴望保留这些东西；但联合部落的酋长和各个部落的酋长将优先购买权让与女王陛下代表他们对待。
> 
> 第三条 [第 3 条] 鉴于此，英国女王陛下向新西兰原住民提供皇家保护，并赋予他们英国臣民的所有权利和特权。
> 
> （签名）威廉·霍布森，副州长。
> 
> 因此，现在我们新西兰联合部落联盟的酋长们在怀唐伊的维多利亚州议会集会，我们这些新西兰独立独立的酋长声称对以我们各自的名字指定的部落和领土拥有权力，已经充分理解上述条约的规定，接受并在其全部精神和意义下签署，我们已在分别指定的地点和日期签名或标记。在我们的主一千八百四十年二月六日在怀唐伊完成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T23:26:49.990

从[文档](http://docs.python.org/library/stdtypes.html#str.strip)：

> **返回删除了前导和尾随字符**的字符串的副本。

试试`str.replace()`吧。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T23:36:31.147

试试[str.translate](http://docs.python.org/library/string.html#string.translate)

> string.translate(s, table[, deletechars])
> 从 s 中删除 deletechars 中的所有字符（如果存在），然后使用 table 翻译字符，table 必须是 256 个字符的字符串，给出每个字符值的翻译，由它的序数索引。如果 table 为 None，则仅执行字符删除步骤。

所以

```
pure_word_list_eng = word_list_eng.translate(None, "\n\r-.,()[]") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-17T23:34:21.693

正如 Ignacio 所提到的，`str.strip()`只删除字符串开头和结尾的字符。您应该使用`str.replace()`, 或使用正则表达式的替代方法：

```
import re
pure_word_list_eng = re.sub(r'[-\n\r.,()]+', '', word_list_eng) 
```

# c++ - c：传入变量的wordexp

> ID：12468441
> 
> 赞同：2
> 
> 时间：2012-09-17T23:25:21.570
> 
> 标签：c++, c, parsing, arguments

我似乎无法让它工作。`wordexp()`当我这样称呼它时，效果非常好：

```
wordexp("beep", &p, 0);
w = p.we_wordv;
argc = p.we_wordc; 
```

但是我想传入一些用户将输入的值，然后从中获取`argv`and `argc`。现在我有以下代码，但我总是收到“分段错误”或“EXC_BAD_ACCESS”：

```
char **parseCommand(char *args, int *argc) {
    printf("args %s\n", args);
    wordexp_t p;
    char **w;
    int i;
    char *beep;

    wordexp(args, &p, 0);

    w = p.we_wordv;
    argc = p.we_wordc;

    wordfree(&p);
    return w;
} 
```

当我打印参数时，它会显示它。我什至尝试`strcpy`将 args 转换为另一个字符串。但仍然得到错误。一定很傻（或者不能用wordexp做到这一点）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T23:39:01.490

我怀疑你的问题是

> 函数 wordfree() 再次释放分配的内存。更准确地说，它不会释放它的参数，而是释放数组 we_wordv 和指向的字符串。

所以你返回一个指向`free`d 内存的指针，当你访问它时，分段错误并不少见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T01:53:45.593

从我的角度来看，如果您将 p.we_wordv 分配给“w”，然后销毁“p”对象/结构，则整个内容（内部的字段 - we_wordv）也会被销毁，这意味着“w”指向一些随机数据，其取决于编译器或当前运行时情况（如果它们仍然有效）。

您应该使用 malloc 为 p 分配内存，然后复制内容并返回指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T23:29:50.587

您只能从 main() 直接访问 argv[] 和 argc。从那里您可以将它们传递给其他功能。

```
int main(int argc, char * argv[])
{
    char ** parsed = parseCommand(argc, argv);
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T01:35:18.150

感谢您的回答。但是，看起来错误是因为它传递了一个带有换行符的字符串，但它不喜欢这样。从字符串中删除换行符后，似乎现在可以工作了。

# javascript - 使用 postMessage 在不同域的 iframe 中的本地存储

> ID：12468443
> 
> 赞同：6
> 
> 时间：2012-09-17T23:25:28.450
> 
> 标签：javascript, html, browser, local-storage

我的问题与[使用 localStorage 的性能挫折](http://www.nczonline.net/blog/2012/04/25/the-performance-of-localstorage-revisited/)和可能的解决方法有关。据我了解（我对此不太确定），一旦在页面上看到对 localStorage 的引用（编译时间？），它就会阻塞线程并从磁盘读取数据以填充 localStorage 内存以供参考. 或者，如果域过去存储过数据，它可能会在磁盘上查找数据，因此它知道本地存储已经在那里使用。

在任何一种情况下，由于 localstorage api 是同步的，它会阻止线程从磁盘读取，让我们等待数据被读取，然后页面才能执行其他任何操作。假设我们在页面中插入一个 iframe，该页面以不同的域作为其源动态加载。如果我们使用这个 iframe 来通过 postMessage 进行所有本地存储的读取和写入，如[本文](http://www.nczonline.net/blog/2010/09/07/learning-from-xauth-cross-domain-localstorage/)所述，那么线程不是只有在加载 iframe 时才被阻塞吗？这是否为我们提供了使用本地存储的异步方法？还是我完全不在了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T06:52:40.240

由于每个窗口和 iframe 在单独的浏览器执行上下文中运行（即它们都同时执行）——那么是的，这应该会让你通过 postMessage 异步 localStorage。显然，从不同域加载 iframe 与从同一域加载可能会对系统的安全性产生影响。虽然 postMessage 确实可以跨域工作，但我宁愿从我完全信任的域（即我自己的域）加载这个 iframe。

# c++ - 在 wxWidgets 中，有没有办法避免在调整窗口大小时按钮仅部分显示？

> ID：12468446
> 
> 赞同：0
> 
> 时间：2012-09-17T23:25:56.940
> 
> 标签：c++, user-interface, layout, wxwidgets

我刚从[wxWidgets](http://www.wxwidgets.org/)开始，我找不到一种方法让 sizer 内的按钮始终以全尺寸显示

IE。不应允许用户过多地减小窗口大小。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:45:31.493

[wxTopLevelWindow::SetMinSize](http://docs.wxwidgets.org/trunk/classwx_top_level_window.html#ac491313979c027b67526786b06167e6d)允许您设置窗口可以调整到的最小尺寸。如果需要，您可以随时以编程方式使其变小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T23:28:07.280

完成向布局添加控件后，使用 GetSizer()->Fit()。

[http://docs.wxwidgets.org/2.9.4/classwx_sizer.html#abad9cedc0cbe9ade2c799da23462d17e](http://docs.wxwidgets.org/2.9.4/classwx_sizer.html#abad9cedc0cbe9ade2c799da23462d17e)

刚刚注意到你想阻止**用户**。而不是 sizer，以免将窗口缩小得太远。

这样做的方法是处理调整大小事件。在处理程序中检查新大小与最小大小，如果它太小，则不允许调整大小发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T09:32:58.693

Sizer 在其元素之间分配可用大小。如果没有足够的可用空间，将不可避免地发生一些不好的事情，即至少某些控件将没有足够的大小。

为了防止这种情况发生，您必须确保最初的顶层窗口足够大，并且用户不能将其调整为更小的尺寸。实现它的最简单方法是`SetSizerAndFit(sizer)`在将 sizer 与顶层窗口关联时调用。这将同时完成这两件事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T18:17:25.887

好的，最终我得到了答案。附加到框架的 sizer 必须调用[SetSizeHints()](http://docs.wxwidgets.org/2.8/wx_wxtoplevelwindow.html#wxtoplevelwindowsetsizehints)

编辑：将它称为顶级窗口是正确的，如下所示。

# java - Java：线程“主”java.lang.NoClassDefFoundError 中的异常：org/slf4j/LoggerFactory

> ID：12468448
> 
> 赞同：0
> 
> 时间：2012-09-17T23:26:13.853
> 
> 标签：java, logging, slf4j

我有一个项目结构为

```
myproject/
         moduleA/
         moduleB/
         moduleC/ 
```

`myproject`有`pom.xml`作为

```
 <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>1.6.4</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>ch.qos.logback</groupId>
            <artifactId>logback-classic</artifactId>
            <version>1.0.3</version>
            <scope>provided</scope>
        </dependency> 
```

现在`moduleC`需要`moduleB`代码，因此它将依赖项引用为

```
 <dependency>
            <groupId>com.org.myproject</groupId>
            <artifactId>moduleB</artifactId>
            <version>${project.version}</version>
        </dependency> 
```

但是当我在中执行课程时`moduleC`，它会抱怨

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory
......
Caused by: java.lang.ClassNotFoundException: org.slf4j.LoggerFactory 
```

当我的`moduleC`班级执行`moduleB`代码时会发生这种情况。

我做错了什么？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T23:38:18.680

您将依赖项设置为“已提供”，这意味着它们不会包含在您的运行时类路径中。您基本上是在告诉 Maven 您将在运行时提供这些文件，因此它们可以在那里进行编译，但除非您手动将它们放入类路径中，否则它们在您运行时将不存在。

看看这里：[http](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope) ://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope 了解每个范围级别的更多信息。

如果您不指定任何内容，则将编译范围：

> 编译是默认范围，如果没有指定则使用。编译依赖项在项目的所有类路径中都可用。此外，这些依赖关系会传播到依赖项目。

因此，您可以省略作用域标记或将其显式添加为编译，并且当您运行应用程序时，依赖项将包含在运行时类路径中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T13:10:57.310

根据@Dave 的评论，我确实添加了以下内容，`pom.xml`并且事情开始照常工作

```
 <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>1.6.6</version>
        </dependency>
        <dependency>
            <groupId>ch.qos.logback</groupId>
            <artifactId>logback-classic</artifactId>
            <version>1.0.6</version>
        </dependency> 
```

# c# - 使用 SED 在 XML 标记之间提取值

> ID：12468449
> 
> 赞同：2
> 
> 时间：2012-09-17T23:26:24.613
> 
> 标签：c#, windows, sed, grep

我正在从服务器接收以下格式的数据：

```
gin</type><sessionId>1601</sessionId><directory><default>DepthOfBook</default><study type="DepthOfBook"/ 
```

如何从该字符串中提取值 1601？我一直在尝试以下方法，但因正确的 SED 语法而迷失了方向：

```
 sed -n "/sessionId/,/\/sessionId/p" 

    sed -e "s/<sessionId/\n/g"| sed -n "/sessionId/,/\/sessionId/p" 

    sed -e "s/</\n/g"| sed -n "/sessionId/,/sessionId/p" 
```

如何提取此值（通常是两个 XML 标记之间的值，当字符串为一个长多行字符串时）？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T06:03:45.773

这可能对您有用（GNU sed）：

```
sed '/<sessionId>/!d;s//\n/;s/[^\n]*\n//;:a;$!{/<\/sessionId>/!N;//!ba};y/\n/ /;s/<\/sessionId>/\n/;P;D' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T23:42:40.993

像这样的东西会起作用：

```
 sed -e 's/<\/sessionId>/<\/sessionId>\n/g' | sed -n 's/.*<sessionId>\([^<]*\)<\/sessionId>.*/\1/p' 
```

第一部分是因为 sed 在匹配时尝试尽可能多地吃掉一行，这将找到所有`sessionId`出现的地方并自行将它们分成一行。

下一部分匹配`sessionId`标签之间的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T23:46:05.940

我建议使用[XPath](http://www.w3schools.com/xpath/xpath_syntax.asp)，它是一种 XML 查询语言。如果您安装了 Perl [XML::XPath](http://search.cpan.org/dist/XML-XPath/XPath.pm)模块，那么您只需在 shell 中使用以下命令：

```
xpath -q -e '//sessionId/text()' <input_file> 
```

# ruby-on-rails - 我想在不使用 RVM 的情况下将我的 OS X ruby 版本更改为 1.9

> ID：12468459
> 
> 赞同：0
> 
> 时间：2012-09-17T23:27:28.483
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, macos

是的，你没听错！我想暂时取消 RVM，然后运行 ​​Ruby 1.9.3 的系统级安装

换句话说，我只想将我的 Mountain Lion 安装附带的旧 1.8.7 版 ruby​​ 升级到 1.9.3。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T23:33:52.557

你可以用自制软件安装它

```
$ brew install ruby 
```

但我真的不认为这是一个好主意。RVM 是管理 ruby​​ 安装和 gemsets 的完美工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:15:20.997

我强烈推荐[rbenv](https://github.com/sstephenson/rbenv)。

即使您手动或通过自制软件安装了 ruby​​，您也可以简单地将其符号链接到 rbenv 中，它就可以正常工作（TM）：

```
cd ~/.rbenv/versions
ln -s /usr/local/Cellar/ruby/1.9.3-p125 1.9.3-p125
rbenv rehash 
```

那是因为 rbenv 不会修改 shebang 行之类的东西。它只做它需要做的事情，并且不会对你的 shell 做任何有趣的事情。

# android - 自行创建和删除应用程序的 Android 启动器

> ID：12468462
> 
> 赞同：-2
> 
> 时间：2012-09-17T23:27:46.810
> 
> 标签：android, launcher

我对 Android 很陌生，不过我确实知道一些 Java。

我想制作一个可以创建应用程序并根据某些条件（例如，在一天中的时间）删除它们的启动器。所以早上，它会在屏幕上显示应用程序，晚上，它会删除它。

如果应用程序文件已经存在，这可能吗？我该怎么做，请包含一些示例代码谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T23:49:31.793

好吧，如果您只想切换应用程序的显示，请从[此处](https://stackoverflow.com/questions/3191602/how-to-re-build-the-default-launcher-application?rq=1)的第二个答案的源代码开始。这应该让你开始 - 至于一天中的时间，从系统中获取它是非常微不足道的。但是，如果您想包含小部件，就像我指出您提到的答案一样，当前的 API 似乎并没有暴露出来（尽管[这里的答案](https://stackoverflow.com/questions/9746173/adding-widgets-to-a-launcher-page-without-bindappwidgetid)似乎表明它是可能的，但我只是没有尝试过）。

祝你好运！

# javascript - JS 如何在图像路径中包含变量？

> ID：12468465
> 
> 赞同：-1
> 
> 时间：2012-09-17T23:28:10.863
> 
> 标签：javascript

我正在使用 google maps api 在地图上显示一些点。我需要每个标记在地图上显示不同的图标，具体取决于其类型。例如，容纳一个红点并存储一个蓝点。类型由变量 "exacttype" 指出。现在有一个变量`var icon`包含这样的路径`icon.image='....apath/iconred.png';` 我怎样才能在图标路径中包含这个变量，所以我不需要创建不同的图标变量？像这样：`icon.image='...apth/icon"exacttype".png;` 我这样做的原因是我已经有两种类型的图标 A 和 B，但是可以说图标 A 确实需要根据它们的详细信息相互区分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T23:30:48.827

这个怎么样：

```
icon.image = '....apath/iconred.png'
icon.image = icon.image.replace(/icon[^.]+(?=[.]png)/, 'icon' + exacttype); 
```

换句话说，您将 'icon' 及其后面的所有非点符号替换为 'icon' 和存储在`exacttype`变量中的字符串的串联。借助后视表达式可以使其更加简洁`/(?<=icon)[^.]+(?=[.]png)/`，但 JS 不支持。

# c# - 模型容器更新方法

> ID：12468469
> 
> 赞同：0
> 
> 时间：2012-09-17T23:28:57.323
> 
> 标签：c#, sql, linq, entity-framework, c#-4.0

大家好 - 我有这个测验问题，看看这个方法是否有问题，我解决了其他问题，但我看不出这个方法有什么问题。你们能发现这种方法有什么问题吗？

```
private void UpdateUsers(List<string> users) 
    {
 foreach (var user in users) 
    { 
    ModelContainer DBContext = new ModelContainer(); 
    var u = from q in DBContext.Users 
    where q.Name == user 
    select q; 
    u.IsActive = true;
     DBContext.SaveChanges();
     } 
    } 
```

提前致谢， Laziale

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T23:41:40.833

你应该这样做：

```
private void UpdateUsers(List<string> users) 
{
    using(DBContext context = new DBContext("myConnectionString"))
    {
        foreach (var user in users) 
        {
            var u = from q in DBContext.Users
                where q.Name == user 
                select q; 
            u.IsActive = true;
        } 
    }
} 
```

使用该`using`语句，DBContext 应该会自动保存自己。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T23:39:42.203

您正在为每次迭代创建一个 ModelContainer 实例，这看起来很狡猾。

我会做类似的事情：

```
using(ModelContainer DBContext = new ModelContainer())
{

    foreach (var user in users) 
    { 
        var u = (from q in DBContext.Users 
         where q.Name == user 
         select q).FirstOrDefault(); 

        if(u!=null)
        {
            u.IsActive = true;
        }
  }
  DBContext.SaveChanges(); //Save changes once, and not per user. Unless you can but I doubt it.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T23:31:11.100

应该是`select q.FirstOrDefault();`或`var u`将是一个`IEnumerable`，不是吗？

# node.js - NodeJS gm 调整大小和管道响应

> ID：12468471
> 
> 赞同：8
> 
> 时间：2012-09-17T23:29:02.817
> 
> 标签：node.js, imagemagick

有没有办法将调整大小的图像传递给我的快速回复？

类似于以下内容：

```
var express = require('express'),
    app = express.createServer();

app.get('/', function(req, res){

    gm('images/test.jpg')
        .resize(50,50)
        .stream(function streamOut (err, stdout, stderr) {
            if (err) return finish(err);
            stdout.pipe(res.end, { end: false }); //suspect error is here...
            stdout.on('end', function(){res.writeHead(200, { 'Content-Type': 'ima    ge/jpeg' });});
            stdout.on('error', finish);
            stdout.on('close', finish);
    });
});

app.listen(3000); 
```

不幸的是，这会导致错误......
很确定我有一些语法错误。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-30T21:21:43.250

你的问题实际上帮助我得到了同样问题的答案。它是如何为我工作的：

```
 var express = require('express'),
    app = express.createServer();

app.get('/', function(req, res, next){

    gm('images/test.jpg')
        .resize(50,50)
        .stream(function streamOut (err, stdout, stderr) {
            if (err) return next(err);
            stdout.pipe(res); //pipe to response

            // the following line gave me an error compaining for already sent headers
            //stdout.on('end', function(){res.writeHead(200, { 'Content-Type': 'ima    ge/jpeg' });}); 

            stdout.on('error', next);
    });
});

app.listen(3000); 
```

我删除了对完成函数的所有引用，因为它没有定义并将错误发送到表达错误处理程序。希望它可以帮助某人。我还想补充一下，我使用的是 express 3，所以创建服务器略有不同。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-30T21:48:49.790

`res`您收到错误是因为您想在通过管道传输图像后写入。在管道图像**之前**尝试设置标题：

```
var express = require('express'),
    app = express.createServer();

app.get('/', function(req, res){

  res.set('Content-Type', 'image/jpeg'); // set the header here

  gm('images/test.jpg')
    .resize(50,50)
    .stream(function (err, stdout, stderr) {
      stdout.pipe(res)
    });
});

app.listen(3000); 
```

# android - ListView findViewById 返回 null

> ID：12468473
> 
> 赞同：3
> 
> 时间：2012-09-17T23:29:23.843
> 
> 标签：android, listview, android-listview

我没有使用 ListActivity，因为我想扩展 FragmentActivity。相反，我正在尝试使用：

```
ListView lv = (ListView) findViewById(R.id.mainListView); 
```

不幸的是 lv 为空。

在我的 xml 中，我有：

```
 <ListView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainListView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1" >
</ListView> 
```

我也尝试过为列表视图使用不同的 android id，例如在使用 ListActivity 时必须使用的那个，但它始终为 Null。

编辑：我试图在调用 setContentView 之前调用 findViewById。调用 setContentView 首先修复它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T16:35:33.710

正如 JRaymond 前段时间在评论中提到的，我需要在使用 findViewById 之前调用 setContentView。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-27T09:49:02.053

你应该放在`setContentView`上面`findViewById`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T00:17:10.100

尝试：

```
ListView lv = (ListView) view.findViewById(R.id.mainListView); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T06:18:59.010

这可能会帮助你

```
 xmlns:android="http://schemas.android.com/apk/res/android" 
```

将其从 xml 中的 Listview 中删除并使用

```
<ListView
    android:id="@+id/mainListView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1" >
</ListView> 
```

# php - 而不是文件下载获取当前页面的转储

> ID：12468478
> 
> 赞同：-1
> 
> 时间：2012-09-17T23:30:28.363
> 
> 标签：php

我正在强制下载文件。它是一个 xml 文件。问题是，当我下载它时，该文件包含开始下载的当前页面的 html 转储。这是片段

**文件：/bitrix/modules/export/admin/export.php**

```
 $name='market'.date('Y-m-d-H-i-s').'.yml';
 $file='/bitrix/modules/export/export/'.$name;
 $filename=$_SERVER["DOCUMENT_ROOT"].$file;
 $fp=fopen($filename,"wb");
 /*
 *
 * Here goes some generating script
 *
 */
 fclose($fp);
 header('Content-disposition:attachment;filename="'.$name.'"');
 header('Content-type: application/svg+xml');
 readfile(realpath($file)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T02:13:29.387

当下载脚本包含空行、不同的代码等时，很难让下载脚本工作。在生成文件后发布文件名应该可以。下载脚本示例：

```
<?php
if ( isset ( $_REQUEST[ 'filename' ] ) ) {
  $FileName       = $_REQUEST[ 'filename' ];
  $DownloadFolder = "MyDowloads";
  status_header( 200 );
  header( "Content-type: application/force-download" );
  header( 'Content-type: application/svg+xml' );
  $saveas = $FileName;
  header( "Content-Disposition: attachment; filename=\"$saveas\"" );
  readfile( $DownloadFolder . $FileName );
}
?> 
```

希望这可以帮助。

# mysql - 如何在mysql中选择性地计算记录并按日期对它们进行分组？

> ID：12468479
> 
> 赞同：2
> 
> 时间：2012-09-17T23:30:37.080
> 
> 标签：mysql, aggregate-functions

我有三个 MySQL 表：customers、persons 和 dates_d

`customers`并且`persons`通过`agent_code`

dates_d 只是一个包含过去 10 年和接下来 10 年的所有日期的表。

该密钥允许我确定每个人输入了多少客户。我还有另一个带有输入客户日期的键，因此我可以查询数据库并查看每个月、年、周等输入了多少客户...

如果我运行以下查询，我当前的数据库示例包含去年 8 月的记录：

```
 SELECT COUNT(customers.hash) FROM customers
 LEFT JOIN persons ON persons.agent_code
 WHERE customers.agent_code = persons.agent_code
 GROUP BY customers.agent_code 
```

它会告诉我每个代理的客户数量。但我需要知道有多少客户，每个代理进入当前一周，并按天分组。

我知道这并不难，我或多或少想到了一种使它起作用的方法：

1.  加入 dates_d 和客户表
2.  加入客户表和人员表。
3.  按日期过滤信息并按人、按天分组。

所以我可以将其显示为：

```
托马斯，布莱恩：

星期一 17: 20 位顾客
星期二 18：12 位顾客。
19 日星期三：3 位顾客。
星期四 20: 0 客户
```

等等。

再一次，我一直在尝试不同的查询，但我无法从数据库中找到我需要的信息。我不是在询问具体的查询，但是任何能指引我正确方向的帮助都将不胜感激！

谢谢！

编辑 1：示例数据：

```
CREATE TABLE IF NOT EXISTS `customers` (
  `hash` varchar(32) NOT NULL,
  `date_joined` date NOT NULL,
  `agent_code` int(5) NOT NULL DEFAULT '0',
  PRIMARY KEY (`hash`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO `customers` (`hash`, `date_joined`, `agent_code`) VALUES
('0323619e9dd37726ad9aede6b8941022', '2012-09-17', 20004),
('0a5a74acc39773c191b87b759799b0c0', '2012-08-02', 22109),
('1aa4d97ba79dce047d519efe3832b5e5', '2012-07-19', 22109),
('2605578b2e35f01f473591d8f3ed3c51', '2012-08-06', 20003),
('26ce0904a6ea30da9b181a301937664e', '2012-07-30', 20003);

 CREATE TABLE IF NOT EXISTS `persons` (
  `agent_code` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`agent_code`)
 ) ENGINE=InnoDB DEFAULT CHARSET=utf8;

  INSERT INTO `persons` (`agent_code`) VALUES
  (20003),(20004); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T23:54:00.580

这是你想要的？下面的查询显示了`agent_code`20003 年的结果。您可以根据需要添加基于日期的条件（例如日期范围或指定星期）。

[您可以在这里](http://sqlfiddle.com/#!2/81d3a/1)看到它的实际效果。

**询问**

```
SELECT DATE_FORMAT(customers.date_joined, '%W %e') AS 'dt', persons.agent_code AS 'agent', COUNT(*) AS 'customers'
FROM customers 
INNER JOIN persons ON persons.agent_code = customers.agent_code
WHERE persons.agent_code = 20003
GROUP BY customers.date_joined, persons.agent_code 
```

**结果**

```
| DT | 代理 | 客户 |
---------------------------------
| 星期一 30 | 20003 | 1 |
| 星期一 6 | 20003 | 1 |
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T23:54:26.727

本周：

```
select c.agent_code, c.date_joined, count(c.hash) 
from 
    customers c
    left join 
    persons p on p.agent_code = c.agent_code
where weekofyear(date_joined) = weekofyear(current_date) 
group by c.agent_code, c.date_joined
;
+------------+-------------+---------------+
| agent_code | date_joined | count(c.hash) |
+------------+-------------+---------------+
|      20004 | 2012-09-17  |             1 |
+------------+-------------+---------------+ 
```

如果您想要另一周，请替换`current_date`该周内的任何日期。

# sql - 如何获得不明显的值（计数> 1）

> ID：12468480
> 
> 赞同：2
> 
> 时间：2012-09-17T23:30:39.023
> 
> 标签：sql, sql-server, vb.net, visual-studio, sql-server-2008

我正在尝试（在 SQL Server 2k8 中）多次获取存在位置的`TheField`列表`TheField`。类似于以下内容（除非我知道这是不对的）：

```
SELECT TheField FROM TheTable WHERE COUNT(TheField) > 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T23:32:05.360

您可以使用[`GROUP BY`](http://msdn.microsoft.com/en-us/library/ms177673%28v=sql.100%29.aspx)with[`HAVING`](http://msdn.microsoft.com/en-us/library/ms180199%28v=sql.100%29.aspx)子句：

```
SELECT TheField, COUNT(*) AS Count
FROM TheTable 
GROUP BY TheField
HAVING COUNT(*) > 1 
```

> 指定组或聚合的搜索条件。HAVING 只能与 SELECT 语句一起使用。HAVING 通常用于 GROUP BY 子句。当不使用 GROUP BY 时，HAVING 的行为类似于 WHERE 子句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T23:31:25.300

使用[`HAVING`](http://msdn.microsoft.com/en-us/library/ms180199.aspx)子句：

```
SELECT TheField 
FROM TheTable 
GROUP BY TheField
HAVING COUNT(TheField) > 1 
```

# java - 如何防止 Guice 注入未绑定在模块中的类？

> ID：12468483
> 
> 赞同：7
> 
> 时间：2012-09-17T23:30:47.357
> 
> 标签：java, guice

```
import com.google.inject.AbstractModule;
import com.google.inject.Guice;
import com.google.inject.Inject;
import com.google.inject.Injector;

public class GuiceDemo
{
    public static void main(String[] args)
    {
        new GuiceDemo().run();
    }

    public void run()
    {
        Injector injector = Guice.createInjector(new EmptyModule());
        DemoInstance demoInstance = injector.getInstance(DemoInstance.class);
        assert(demoInstance.demoUnbound == null);
    }

    public static class EmptyModule extends AbstractModule
    {
        @Override
        protected void configure()
        {
        }
    }

    public static class DemoInstance
    {
        public final DemoUnbound demoUnbound;

        @Inject
        public DemoInstance(DemoUnbound demoUnbound)
        {
            this.demoUnbound = demoUnbound;
        }
    }

    public static class DemoUnbound
    {
    }
} 
```

我可以阻止 Guice 向 DemoInstance 的构造函数提供 DemoUnbound 的实例吗？

本质上，我正在寻找一种在完全显式绑定模式下运行 Guice 的方法，其中注入未绑定的类是错误的。

你如何让 Guice 注入一个未绑定在模块中的类成为错误？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-18T03:54:46.940

尝试放入`binder().requireExplicitBindings();`您的模块。它不会阻止您注入具体的类，但它需要一个模块来包含`bind(DemoUnbound.class);`以使其更加明显。

[阅读 Binder 文档](https://google.github.io/guice/api-docs/4.2.3/javadoc/com/google/inject/Binder.html#requireExplicitBindings--)以获取更多信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-17T23:39:39.927

如果你在这里使用一个接口而不是一个具体的类来进行 DemoUnbound，Guice 会抛出一个异常，因为它找不到合适的类来注入：

```
public class GuiceDemo
{
    public static void main(String[] args)
    {
        new GuiceDemo().run();
    }

    public void run()
    {
        Injector injector = Guice.createInjector(new EmptyModule());
        DemoInstance demoInstance = injector.getInstance(DemoInstance.class);
        assert(demoInstance.demoUnbound == null);
    }

    public static class EmptyModule extends AbstractModule
    {
        @Override
        protected void configure()
        {
        }
    }

    public static class DemoInstance
    {
        public final DemoUnbound demoUnbound;

        @Inject
        public DemoInstance(DemoUnbound demoUnbound)
        {
            this.demoUnbound = demoUnbound;
        }
    }

    public interface DemoUnbound
    {
    }
} 
```

# objective-c - 仅显示 UITableView 中的前 10 个单元格

> ID：12468486
> 
> 赞同：0
> 
> 时间：2012-09-17T23:31:24.980
> 
> 标签：objective-c, ios, uitableview

有没有办法只显示 UITableView 中的前 10 个单元格？我有一个从 XML 文件填充的 UITableView，我只想显示前 10 个单元格。问题是 UITableView 在这些部分中有多个部分和行。每个用户的行数和节数不同。

是否可以隐藏其余单元格或不首先显示它们（例如，通过不在 cellForRowAtIndexPath 中添加它们），我尝试在 cellForRowAtIndexPath 中有一个计数器，每次调用 cellForRowAtIndexPath 方法时 + 1。我 NSLog'ed 计数器，它变得非常大，直到 80，我什至在 UITableView 中没有 30 个单元格。

谢谢！

**编辑：** 问题是每次滚动 UITableView cellForRowAtIndexPath 时，每次滚动经过 indexPath（对于相同的 indexPath）时都会调用，因此计数器无效。

**编辑2：** 我认为它不起作用，所以我修改了我的XML文件以在文件中有一个计数器，现在我可以从xml文件中检查计数器是否大于10并检查它以修改cellForRowAtIndexPath中的单元格.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T23:37:59.040

您可以通过更改中的返回值来限制“加载”的行数`- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section`。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
       return 10; 
} 
```

这个客场`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`只会被叫10次。

**关于你的柜台：（**你可能做错了）

你宣布它为`NSInteger *somensint;`？

NSInteger 是一个原始的，而不是一个对象！你真正在做的是增加 NSInteger* 指向的内存地址。由于 NSInteger 的长度为 4 个字节，因此每次递增它时，编译器都会假定，由于它是一个指针，因此您希望跳转到内存中的下一个 NSInteger，这就是为什么您会得到 4 的倍数。只需在`*`声明时删除NSInteger，你应该已经准备好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T23:38:22.753

这些是您要实现的 2 种方法。这将允许您限制 tableview 中的部分和行数，而无需操作您的 xml 数据。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
```

# c - 在C中读取固定数量的字节？

> ID：12468489
> 
> 赞同：0
> 
> 时间：2012-09-17T23:31:37.050
> 
> 标签：c

我必须编写一个可以一次读取三个字节数据的算法，例如：

例如，假设用户输入：Uof

二进制中的 Uof 将显示为 01010101 01101111 01100110

我需要帮助将其分成四个相等的部分，每个部分六位，如下所示：

010101 (21)

010110 (22)

111101 (61)

100110 (38)

我只被允许使用整数。我可以读取第一个字符，将其向右移动两个并得到结果 21 没问题。

获得 22 对我来说毫无意义。任何指针都会有所帮助，不需要确切的解决方案，但是有什么可以让我思考的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T23:39:43.943

问你自己：

*   每个部分的 6 位来自哪里？

*   如何将位移动到值中的不同位置？

*   我怎样才能结合两个值，以便只取每个有趣的位？

为了帮助您回答第三个问题，您还可以问自己：

*   我如何*屏蔽*一个值，以使有趣的位保持原样，而非有趣的位全部变为 0（或全部变为 1）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T00:07:22.627

好的，首先，我们将尝试将 3 个字节放入一个整数中。我们将使用移位和`OR`逻辑。假设我们有`a`,`b`和`c`输入变量。(`Uof`将分别拆分为`a`,`b`和`c`)。

我们首先为`b`变量增加 1 个字节的空间：

```
(b << 8) 
```

所以`01101111`转化为`0110111100000000`。

现在我们`OR` `c`进入`b`，所以零实际上是`c`：

```
((b << 8) | c)) 
```

现在，我们对`a`. 我们在 的右边保留了更多的 16 位`a`，所以我们可以`OR`得到最后一个表达式。

```
((a << 16) | ((b << 8) | c)) 
```

到目前为止，我们已将所有位合并为一个 4 字节整数。

我们现在只需要将它分成 4 个部分，每个部分 6 位。我们将为此使用*掩码*逻辑。

首先，当我们使用“掩码”逻辑时，我们必须自己制作掩码。我们的掩码是`0x3F`（取自二进制数111111，即6位），所以当我们`AND`数的时候，有了这个掩码，我们就可以提取出右边的前6位：

```
r1 = (merged & 0x00003F); 
```

代表`r1`什么`result 1`。

现在，同样的事情，但合并后的数字向右 6 位，所以我们可以取下一个 6 位数字，以此类推：

```
r1 = ((merged >> 0)  & 0x3F);
r2 = ((merged >> 6)  & 0x3F);
r3 = ((merged >> 12) & 0x3F);
r4 = ((merged >> 18) & 0x3F); 
```

因此，最终代码将是：

```
char /*or int*/ a, b, c;
int merged, r1, r2, r3, r4;

scanf(" %c %c %c", &a, &b, &c);

merged = ((a << 16) | ((b << 8) | c));

r1 = ((merged >> 0)  & 0x3F);
r2 = ((merged >> 6)  & 0x3F);
r3 = ((merged >> 12) & 0x3F);
r4 = ((merged >> 18) & 0x3F);

printf("%d %d %d %d\n", r1, r2, r3, r4); 
```

**编辑：**我已经更正了面具部分。

# javascript - javascript确保两个选项分开

> ID：12468491
> 
> 赞同：0
> 
> 时间：2012-09-17T23:31:44.720
> 
> 标签：javascript, html

我有两个选择框，例如，允许用户选择有效日期

```
<select name="valid">
    <option>monday</option>
    <option>tuesday</option>
    <option>wednesday</option>
    <option>thursday</option>
    <option>friday</option>
    <option>saturday</option>
    <option>sunday</option>
</select>

<select name="valid-2">
    <option>monday</option>
    <option>tuesday</option>
    <option>wednesday</option>
    <option>thursday</option>
    <option>friday</option>
    <option>saturday</option>
    <option>sunday</option>
</select> 
```

我需要一种方法来确保用户选择星期一然后他们不能在有效的 2 选择下拉菜单中选择星期一或星期二。

但是，如果没有做一些事情，比如禁用有效两天的两天，我不知道该怎么做。

我想我可以在用户选择第一个下拉菜单后进行第二个选择下拉菜单。

所以我的问题是你会怎么做。有没有简单易行的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T00:05:58.067

由于我们开始使用 jQuery，这是我的解决方案：

```
$(function () {
    var $one = $("[name='valid']"), 
        $two = $("[name='valid-2']"), 
        $both = $($one).add($two),
        $error = $("#error");

    $both.on("change", function () {
        var index = $one.find(":selected").index(),
            index_two = $two.find(":selected").index();

        //Note: will also catch sunday/monday combo (that's why it's % 6)
        if((Math.abs(index_two - index) % 6) < 2) {
            //Show an error of some sort, like this:
            $both.css("border", "1px solid red");
            $error.text("Dates cannot be less than 2 days apart!");
        } else {
            //Hide the error message:
            $both.css("border", "");   
            $error.text("");
        }
    });
}); 
```

我在选项后抛出了一个错误`<span>`，你可以在我的 JSFiddle 演示中看到它：

[http://jsfiddle.net/V7HMU/](http://jsfiddle.net/V7HMU/)

正如其他人所说，可能需要某种基于 onsubmit 的验证。当网站批评他们的每一个选择时，用户不得不即时整理东西，这对用户来说有点烦人。但是，如果您想提供一些帮助文本，这是一种非常简单的方法。

我应该注意，如果您将 ID 分配给`<select>`下拉菜单，并且还提供了一些更简单的方法来衡量值（例如给它们提供数值），这可能会更有效。但我不想过多地弄乱您的 HTML（除了默认为有效选项）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T01:00:27.703

您可以执行以下操作，如果它在第一天之后不到两天，则提供修复第二天的提示。请注意，它环绕一周，因此在第一个选择中选择星期日意味着您必须在第一个选择中选择星期二或更晚。

```
<script>
function validateSelect(el) {

  var msgEl = document.getElementById('errMsg');
  var errMsg = 'Second day must be at least two days after first day';
  var val1 = el.form.valid.selectedIndex;
  var val2 = el.form['valid-2'].selectedIndex;

  val2 = val2 < val1? val2 + el.options.length : val2;

  msgEl.innerHTML = (val2 - val1) < 2? errMsg : '';

}
</script>

<form ...>
<select name="valid" onchange="validateSelect(this);">
    <option selected>monday</option>
    <option>tuesday</option>
    <option>wednesday</option>
    <option>thursday</option>
    <option>friday</option>
    <option>saturday</option>
    <option>sunday</option>
</select>

<select name="valid-2" onchange="validateSelect(this);">
    <option selected>monday</option>
    <option>tuesday</option>
    <option>wednesday</option>
    <option>thursday</option>
    <option>friday</option>
    <option>saturday</option>
    <option>sunday</option>
</select>
<span id="errMsg"></span>
</form> 
```

# jquery - MVC 或 Web 服务 + jQuery

> ID：12468496
> 
> 赞同：0
> 
> 时间：2012-09-17T23:32:13.490
> 
> 标签：jquery, web-services, model-view-controller

我是 MVC 的新手，但已经与 WS 合作超过 4 年。

我必须构建一个报告 Web 应用程序（一些网格和一些图形），我想知道构建它的最佳方法是什么。这个应用程序需要可以从许多不同的浏览器/设备（智能手机、iPad、desktop-win、desktop-mac 等）访问并保持持久性，所以我正在考虑一个用于非 javascript 设备的 UI 和另一个使用 jQuery 的 UI，两者使用网络服务。

另一方面，我读过 MVC 并且在多个站点上说我可以创建一些返回整个视图（[Khaja 的响应](http://bit.ly/QkgQ8P)）的方法和其他使用 jQuery 的方法。

我想知道你对此的看法，这样我才能做出更好的决定。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:21:59.893

绝对可以在 MVC 中做到这一点。目前尚不清楚您是否想要一个可编辑的网格（也许不是因为您正在做报告服务）......无论如何，在 mvc 的模型部分中，返回表类型或列表类型的对象，您可以在您的查看部分。您可以从模型本身自动创建视图。对于图像，如果路径存储在数据库中，请使用以下语法

```
<img src= "@Url.Content(Model.PictureLocation)" alt="IMAGES" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T13:11:01.207

Jorge，如果您更喜欢处理 services\API，那么您应该尝试使用**Web API**。见：[http ://www.asp.net/web-api](http://www.asp.net/web-api)

它实际上是 MVC4 的附加功能集。它非常支持创建基于 RESTful Json 的 API。这将与 jquery 很好地工作

这是一个值得观看的精彩视频：http: [//channel9.msdn.com/Shows/Web+Camps+TV/Dan-Roth-Takes-Us-on-a-Deep-Dive-into-Web-API](http://channel9.msdn.com/Shows/Web+Camps+TV/Dan-Roth-Takes-Us-on-a-Deep-Dive-into-Web-API)

此外，这是一个使用 Web API + jquery 的不错的示例项目：http: [//code.msdn.microsoft.com/Contact-Manager-Web-API-0e8e373d/](http://code.msdn.microsoft.com/Contact-Manager-Web-API-0e8e373d/)

# c# - 在将 URL 加载到 HtmlAgilityPack 中的文档时，如何添加 webRequest 以设置超时？

> ID：12468497
> 
> 赞同：2
> 
> 时间：2012-09-17T23:32:29.827
> 
> 标签：c#, html-agility-pack

加载网址时我有这段代码：

```
private List<string> test(string url, int levels,DoWorkEventArgs eve)
        {
            HtmlWeb hw = new HtmlWeb();
            List<string> webSites;
            try
            {
                this.Invoke(new MethodInvoker(delegate { Texts(richTextBox1, "Loading The Url: " + url + "..." , Color.Red); }));
                doc = hw.Load(url);
                this.Invoke(new MethodInvoker(delegate { Texts(richTextBox1, "Done " + Environment.NewLine, Color.Red); })); 
```

有时，当它加载 url 时，由于 url 变量中的网站没有响应，它会花费很多时间。我想添加一个超时，所以让我们说在 X 秒后它会抛出一条消息，比如“有一个超时”。

现在 HtmlAgilityPack 没有任何超时属性或类。所以我想在我的 Form1 中创建一个新函数，它将使用 webrequest 和 webresponde 并在这个新函数中设置一个超时，然后在加载 url 之前调用这个函数。

有人可以告诉我如何使新功能与我的代码一起使用吗？还有超时。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-15T01:23:49.973

来源：[http ://blog.jongallant.com/2012/07/htmlagilitypack-set-timeout.html#.VBY-_fmSz3Q](http://blog.jongallant.com/2012/07/htmlagilitypack-set-timeout.html#.VBY-_fmSz3Q)

```
var web = new HtmlWeb();
web.PreRequest = delegate(HttpWebRequest webRequest)
{
     webRequest.Timeout = 4;
     return true;
};
var doc = web.Load("http://www.msn.com/"); 
```

请注意，超时值是在请求超时之前等待的毫秒数。默认值为 100,000 毫秒（100 秒）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T04:41:01.517

`html`我对敏捷超时一无所知。但我正在这样使用它。也许它对你有帮助。祝你好运。

```
 String Data = GetURLData(url);
    HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
    doc.LoadHtml(Data);

    public static string GetURLData(string URL)
    {
        try
        {
            HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(URL);
            request.UserAgent = "Omurcek";
            request.Timeout = 4000;
            WebResponse response = request.GetResponse();
            Stream stream = response.GetResponseStream();
            StreamReader reader = new StreamReader(stream);
            return reader.ReadToEnd();
        }   

        catch (Exception ex )
        {
            LogYaz("Receive DATA Error : " + URL   + ex.ToString());
            return "";
        }

    } 
```

# python - 将 MailChimp 与 SendGrid 一起使用

> ID：12468498
> 
> 赞同：2
> 
> 时间：2012-09-17T23:32:43.560
> 
> 标签：python, email, html-email, mailchimp, sendgrid

我使用他们的模板生成器在 MailChimp 中构建了一个电子邮件模板。

我想将此电子邮件发送给某些事件的个人。例如，如果有人忘记了他们的密码，我想向他们发送我在 MailChimp 中创建的“忘记密码”模板。

我看过 MailChimp 的 API，但它似乎对非批量电子邮件发送不太友好。我将如何使用从 MailChimp 创建的 HTML 模板但将 SendGrid 用于 SMTP 发送这样的交易电子邮件？

代码看起来像这样：

```
if action == 'forgot_password':
    email = mailchimp.get_template(forgot_password)
    sendgrid.send_mail(user, subject, email, from) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:17:24.770

不确定您使用什么 Mailchimp 库来获取模板。做了一些谷歌搜索并无法弄清楚，但假设`get_template`返回电子邮件的 html 内容，您可以这样做：

```
import sendgrid

s = sendgrid.Sendgrid('username', 'password', secure=True)

if action == 'forgot_password'
  html = mailchimp.get_template(forgot_password)
  message = sendgrid.Message("from@mydomain.com", "subject", text_version_of_template, html)
  message.add_to("someone@example.com", "John Doe")
  s.smtp.send(message) 
```

有关获取 html 的文本版本的详细信息，请参阅[此问题](https://stackoverflow.com/questions/1668081/best-way-to-convert-html-to-plaintext-using-python)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:25:56.300

这正是 MailChimp 的[Mandrill 事务性邮件服务](http://mandrill.com/)的用途——它还允许某些级别的模板重用。

# jquery - cakephp 2.1 json 错误 404 用于 jquery 获取

> ID：12468501
> 
> 赞同：1
> 
> 时间：2012-09-17T23:33:40.597
> 
> 标签：jquery, json, cakephp

使用 cake 2.1，我试图通过 ajax 获取 json 记录列表。找不到缺少的东西：

在 routes.php 上，添加了：

```
Router::parseExtensions('json'); 
```

我的控制器中的操作：

```
public function getdirs($id = null) {
    $this->RequestHandler->setContent('json', 'application/json');
    $dirArray = $this->Dir->find('all');
    debug($dirArray);
    $this->set('dirArray', $dirArray);
    $this->set('_serialize', 'dirArray');
} 
```

在我看来，（编辑父记录-101-并需要获取其子记录），我正在使用这个jquery：

```
function updateTable() {
    var path = "/dirs/getdirs/101.json"; 
    $.post(path,null,function(data) {
    //$.get(path, function(data) {
        alert('backFromServer');
        alert(data);
    });        
} 
```

未达到“backfromserver”警报。另外，我不确定如何测试错误可能在哪里。

一旦我获得了 json 数据，将在我的视图中填充一个 div 部分，这部分我已经涵盖，但需要来自服务器的数据。

我真的很感谢一些帮助，这几天一直在努力解决这个问题。

谢谢 ！！

**更新** 固定为 .json 扩展名并删除了自动渲染；萤火虫的反应是：

```
{"code":"404","url":"\/dirs\/getdirs\/101.json","name":"Controller class Controller could not be found."}

"NetworkError: 404 Not Found - http://dev.opm.asc/dirs/getdirs/101.json" 
```

仔细检查了我的操作，它被称为 getdirs 好吧：

```
public function getdirs($id = null) {
    $this->RequestHandler->setContent('json', 'application/json');
    $dirArray = $this->Dir->find('all');
    debug($dirArray);
    $this->set('dirArray', $dirArray);
    $this->set('_serialize', 'dirArray');
} 
```

未找到该操作的可能原因是什么？

至于通用视图，在这种情况下，我只想获取数据数组并填充一些 div；

请帮忙。

太感谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T23:43:37.957

```
var path = "/dirs/getdirs/101.js"; 
```

这不应该是

```
var path = "/dirs/getdirs/101.json"; 
```

尝试安装 firebug - [http://getfirebug.com/](http://getfirebug.com/)或按 F12，如果您使用的是 chrome for chrome 的开发人员工具。这将使您设置调试http。尝试网络选项卡。您可以检查请求并查看错误的确切位置。这将使您确切地看到正在发送的内容和正在接收的内容。

另外，不确定您是否发布了部分代码，但如果您这样做：

```
$this->autoRender = false; 
```

你需要手动调用渲染

```
$this->render('path/to/view'); 
```

我建议创建一个通用视图，您可以在输出 json 的操作之间共享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:53:42.070

404 错误是由于我在控制器顶部定义的权限造成的，例如：

```
public function isAuthorized($user) {
    $AuthAddRoles = array(0, 1);
    if ($this->request->action === 'add') {
        if (in_array($this->Auth->user('role'), $AuthAddRoles)) {
            return true;
        }
    }
} 
```

我只需要以相同的方式授权 ajax 操作，它就解决了。

感谢 dubvfan87 提供的所有好的指点。现在json响应开头自带代码，这里解决：[cakephp render-false action still echoes html template](https://stackoverflow.com/questions/12062097/cakephp-render-false-action-still-echoes-html-template)

# java - 如何在apache httpclient中获取客户端的会话ID

> ID：12468506
> 
> 赞同：0
> 
> 时间：2012-09-17T23:34:09.507
> 
> 标签：java, web-services, httpclient, session-variables, apache-httpclient-4.x

我正在验证尝试使用用户名和密码登录到 Web 服务。然后我必须在随后的我们调用中使用 sessionid 。我正在使用 apache HttpClient (legacy version) 2.0.2 。

下面是我进行身份验证的客户端代码。我的问题是，如何在身份验证后获取会话 ID 以及如何在后续调用中使用相同的会话 ID。

```
import java.io.IOException;

import org.apache.commons.httpclient.Header;
import org.apache.commons.httpclient.HttpClient;
import org.apache.commons.httpclient.methods.GetMethod;
public class TestHttpClient {

    public static void main(String args[]) {
        try {
            HttpClient client = new HttpClient();
            GetMethod get = new HttpGet("www.google.com");

            org.apache.commons.httpclient.UsernamePasswordCredentials upc =
                    new org.apache.commons.httpclient.UsernamePasswordCredentials("user", "pwd");

            client.getState().setCredentials(null, null, upc);

            get.setDoAuthentication(true);

            client.setConnectionTimeout(60000);

            client.executeMethod(get);

            System.out.println(get.getResponseBodyAsString());
        }
        catch (IOException e) {
            e.printStackTrace();
        }
    }

} 
```

感谢您帮助新手进行 Web 开发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:27:41.210

以下是获取 Session id 的方法：

```
.......

client.executeMethod(get); 

Header[] headers=get.getResponseHeader("jsessionid");

if(headers!=null && headers.length>0){

 String sessionId=headers[0].getValue();

} 
```

我相信会有更好的方法来处理经过身份验证的会话，而无需您读取会话 ID 往复。

# java - 有没有快速将文件复制到 sdcard 的方法

> ID：12468510
> 
> 赞同：0
> 
> 时间：2012-09-17T23:34:20.273
> 
> 标签：java, android

我具有将存储在资产中的 jpeg 复制到 SD 卡的功能。它有效，但非常非常慢。平均文件大小约为 600k 。有没有更好的方法来做到这一点，代码：

```
void SaveImage(String from, String to) throws IOException {
  // opne file from asset
  AssetManager assetManager = getAssets();
  InputStream inputStream;
  try {
    inputStream = assetManager.open(from);
  } catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    return;
  }

  // Open file in sd card
  String extStorageDirectory = Environment.getExternalStorageDirectory().toString();
  OutputStream outStream = null;
  File file = new File(extStorageDirectory, to);
  try {
    outStream = new FileOutputStream(file);
  } catch (FileNotFoundException e) {
    e.printStackTrace();
    return;
  }

  int c;
  while ((c = inputStream.read()) != -1) {
    outStream.write(c);
  }

  outStream.close();
  inputStream.close();
  return;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T23:40:14.803

一次读取和写入多个字符。16KB 可能是一个合理的缓冲区大小，尽管您可以随意尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T00:33:01.590

您应该尝试使用`Buffer` Classes`BufferedInputStream`和`BufferedOutputStream`

```
InputStream inputStream;
BufferedInputStream bis;
try {
    inputStream = assetManager.open(from);
    bis = new BufferedInputStream(inputStream);
} catch (IOException e) {
...
...
try {
    outStream = new BufferedOutputStream(new FileOutputStream(file));
} catch (FileNotFoundException e) {
...
...
    while ((c = bis.read()) != -1) {
    ...
    }
...
...

bis.close(); 
```

祝你好运

# c# - 添加私有成员变量会导致命名空间在 C# 程序集中丢失？

> ID：12468515
> 
> 赞同：0
> 
> 时间：2012-09-17T23:34:44.203
> 
> 标签：c#, .net

这可能是我在使用 .NET/C# 时遇到过的最奇怪的错误——从外部程序集中添加一个类型的私有成员变量显然会导致我自己的命名空间丢失。

我在一个解决方案中有两个项目：

*   用户界面
*   核

`UI`包含对 的项目引用`Core`。

`Core`包含对来自[http://code.google.com/p/twaindotnet/](http://code.google.com/p/twaindotnet/)`TwainDotNet.dll`的版本 TwainDotNet-1.0-12-03-2011的引用

在我的`Core`项目中，添加以下代码（这就是全部！）足以导致问题：

```
using TwainDotNet;

namespace Core
{
    public class TwainMonitor 
    {
        private Twain _twain; //comment this field out, and
                              //everything builds fine.
    }
} 
```

症状是`Core`构建良好。但`UI`抱怨说：

```
The type or namespace name 'Core' could not be found (are you missing 
a using directive or an assembly reference?) 
```

为什么从外部程序集中添加一个类型的私有成员变量会导致我自己的命名空间在操作中丢失？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T23:49:32.870

我不能确定这实际上是您的问题，但是在从针对**客户端**框架配置文件的项目中引用针对**完整**框架配置文件的事物之前，我已经经历过这些症状。

 **我会尝试的是，确保您在两个项目的项目属性中都针对 .Net 4 Full 配置文件而**不是客户配置文件。****

# haskell - 使用 TLS 通过 SMTP 发送邮件

> ID：12468516
> 
> 赞同：34
> 
> 时间：2012-09-17T23:34:54.190
> 
> 标签：haskell, smtp, smtpclient

有人知道我可以用来通过 SMTP 从 Haskell 发送邮件的任何好的库吗？我发现`SMTPClient`和`HaskellNet`。前者不支持`TLS`，后者似乎没有使用 TLS 通过 SMTP 发送电子邮件的示例。有没有人设法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-19T09:51:01.250

Read This Pages :
[http://hackage.haskell.org/package/HaskellNet-SSL-0.2.1/docs/Network-HaskellNet-SMTP-SSL.html](http://hackage.haskell.org/package/HaskellNet-SSL-0.2.1/docs/Network-HaskellNet-SMTP-SSL.html)
Easily Connector :) [https://github.com/dpwright/HaskellNet-SSL](https://github.com/dpwright/HaskellNet-SSL)
Maybe this can help you!
Set Your Username And Password:
By send commands

```
sendCommand :: SMTPConnection -> Command -> IO (ReplyCode, ByteString) 
```

# php - CakePHP 没有从 saveMany 获得验证消息（从 Behavior 调用）

> ID：12468517
> 
> 赞同：1
> 
> 时间：2012-09-17T23:35:16.597
> 
> 标签：php, cakephp, cakephp-2.1

所以，我有一个支持从 Excel 文件上传数据到模型的行为。在此行为中，我调用 saveMany，它工作正常。但是，如果数据无效，我不会收到任何错误，只会出现静默失败（在这种情况下我会返回一般错误，但我想要验证失败的详细信息）。

我确信有一种方法可以解决这个问题，我作为一个 CakePHP 新手，不知道。这是行为的主要功能（这里有一堆额外的逻辑可能与问题无关，但我不愿意剔除它以防它被证明是微妙相关的）：

```
public function parseExcelFile(Model &$model, $fileInfo, $lookupKeys, $otherData = null, $referencedFields = null) {
    $allowedTypes = array('application/vnd.ms-excel');
    if ((isset($fileInfo['error']) && $fileInfo['error'] == 0) ||
        (!empty( $fileInfo['tmp_name']) && $fileInfo['tmp_name'] != 'none')) {
        // basic pre-checks are done.  Now ask PHP if it's a good file
        if (is_uploaded_file($fileInfo['tmp_name'])) {
            // it's a good uploaded file.  Now check the type
            if (in_array($fileInfo['type'], $allowedTypes)) {

                $data = new Spreadsheet_Excel_Reader($fileInfo['tmp_name']);

                // Check text of header row to be sure that it hasn't been changed (equal to db field name)
                $numAltered = 0;
                $numAdded = 0;
                $schema = $model->schema();
                $newModelData = array($model->name => array()); // this is a holder for the data to be added to the model
                $fieldlist = array();   // this will be an array of field names found in the Excel file, and which we have data for
                $newData = $this->modifyDataForReferencedFields($model, $data, $referencedFields);  // $newData is now 0-based.
                for ($curCol = 0; $curCol < count($newData[0]); $curCol++) {
                    $curFieldName = $newData[0][$curCol];
                    if (!array_key_exists($curFieldName, $schema)) {
                        return 'Row header "'.$curFieldName.'" is not one of the database fields.'
                                .'  You probably altered the template in an incorrect manner.';
                    } else {
                        // set up the fieldlist and newModelData arrays
                        array_push($fieldlist, $curFieldName);
                        $newModelData[$model->name][$curFieldName] = null;
                    }
                }
                // append $otherData fields to fieldlist
                foreach ($otherData as $key => $value) {
                    array_push($fieldlist, $key);
                }

                // So, the headers seem okay, let's try to enter the data into the Model
                $saveData = array();
                for ($curRow = 1; $curRow < count($newData); $curRow++) {   // row 0 is the headers
                    // put the data into the newModelData
                    for ($curCol = 0; $curCol < count($newData[0]); $curCol++) {
                        $curFieldName = $newData[0][$curCol];
                        $curVal = $newData[$curRow][$curCol];
                        $newModelData[$model->name][$curFieldName] = $curVal;
                    }
                    $existingID = $this->existingID($model, $lookupKeys, $newModelData[$model->name]);
                    if ($existingID) {
                        // we must be updating a model entry, so set the ID
                        $newModelData[$model->name]['id'] = $existingID;
                        $numAltered++;
                    } else {
                        // otherwise, unset
                        unset($newModelData[$model->name]['id']);
                        $numAdded++;
                    }

                    // Add in the fixed fields
                    foreach ($otherData as $key => $value) {
                        $newModelData[$model->name][$key] = $value;
                    }
                    array_push($saveData, $newModelData);
                }
                $options = array('fieldlist' => $fieldlist);
                if ($model->saveMany($saveData, $options)) {
                    return 'From the uploaded file, '.$numAdded.' records were added and '.$numAltered.' records were updated.';
                } else {
                    return 'There was a problem with the uploaded data.';
                }
            } else {
                return "The chosen file was not one of the allowed types.";
            }
        } else {
            return "There was something wrong with the upload process.";
        }
    } else {
        return "No file was chosen for uploading.";
    }
} 
```

这是上传表单提交时调用的控制器操作：

```
public function processUpload() {
    // now parse the file in the model
    $result = $this->Instructor->parseExcelFile(
        $this->data['Instructor']['bulkData'],
        array(  // field(s) for looking up data in the model to see if we are adding or updating
            'username',
        ),
        array(  // a set of fixed fields to add to all entries, new or updates
            'department_id' => $this->request->data['Instructor']['department_id'],
            'role' => 'instructor',
            'password' => '')
    );
    $this->Session->setFlash($result);                  
    $this->redirect($this->referer(), null, true);
} 
```

提前致谢。-戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T06:58:43.030

该模型有一些方法可以调用以检查记录。你应该可以使用 [Model->validateMany()](http://api20.cakephp.org/class/model#method-ModelvalidateMany) 模型类还有一些其他的手动验证方法：

[Model->validateAssociated()](http://api20.cakephp.org/class/model#method-ModelvalidateAssociated)用于验证单个记录及其所有直接关联的记录，而[Model->validates()](http://api20.cakephp.org/class/model#method-Modelvalidates)如果所有字段都通过验证，则返回 true。

[检查Cake Book](http://book.cakephp.org/2.0/en/models/data-validation.html)的 DataValidation 部分。Cake 2.2.x 还引入了[动态更改验证规则](http://book.cakephp.org/2.0/en/models/data-validation.html#dynamically-change-validation-rules)的概念，它可以派上用场。

干杯! :)

# artificial-intelligence - 机器视觉和游戏求解器研究

> ID：12468521
> 
> 赞同：0
> 
> 时间：2012-09-17T23:36:21.397
> 
> 标签：artificial-intelligence, computer-vision, game-development

我目前正在为游戏求解器创建智能代理。该系统将托管在与将要玩的游戏主机不同的计算机中。因此，我正在寻找将机器视觉用于游戏求解器的类似研究或项目。顺便说一句，该游戏是棋盘游戏/涉及瓷砖。

这些是我认为我需要做的事情：

*   边缘检测
*   模式识别
*   类似于用于检测棋盘的棋盘/棋子检测

我真的找不到使用谷歌搜索对我有益的东西，即使在谷歌学术中使用高级搜索也没有给我相关的研究。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:50:58.377

这将是一个多步骤的过程，没有单一的算法可以为你做这一切，很少有研究人员会给出他们用来解决问题的完整算法。但是，您想要用来完成自己的工作的所有部分都有很好的文档记录。

基本上，你会想要使用边缘检测，也许还需要区域增长来找到棋盘，然后像霍夫圆检测这样的东西来找到游戏碎片（假设它是跳棋，如果它是扫雷，你会打开另一罐蠕虫与 OCR）。

对于视觉部分，您不需要任何与模式识别或机器学习相关的东西。你会给它一个非常干净的董事会形象，对于它的外观和行为有非常严格的规则。因此，只需为该板和该问题编写代码即可。

# label - JavaFX - 标签 - 如何访问类成员

> ID：12468525
> 
> 赞同：2
> 
> 时间：2012-09-17T23:36:41.953
> 
> 标签：label, javafx-2, fxml

所以我的问题很简单。当他们是 a而不是 a时，我可以访问*单独班级中的班级成员，但当他们**是*时，我似乎不能。使用 JDK 7u6（带 JavaFX 2.2）。`String``Label` *`Label`*

 *简单的例子。第一个有效，第二个无效。 `foo.label`可以在第一个示例中分配，但我在第二个示例中得到一个 NullPointer。谁能解释为什么`foo.label`在下面的第二个示例中为 null ？

更新：我从原始问题中删除了@FXML 注释，因为我认为它们对于我遇到的问题不是必需的。[另外，请参阅@jewelsea](https://stackoverflow.com/a/12468971/492404)对答案的评论......最后，为了完整性，我添加了我的 FXML 文件（在 Q 的底部）。

这有效：

```
// Example 1:
public class SampleController implements Initializable {
    Foo foo = new Foo();

    public void handleButtonAction(ActionEvent event) {
        System.out.println("You clicked me!");
        foo.label = "Hello World!";
        System.out.println(foo.label);
    }

    @Override public void initialize(URL url, ResourceBundle rb) {
    }    
}

// Example 1 -- Foo.java:
public class Foo {
    public String label;
} 
```

这*不起作用*：

```
// Example 2:
public class SampleController implements Initializable {
    Foo foo = new Foo();

    public void handleButtonAction(ActionEvent event) {
        System.out.println("You clicked me!");
        foo.label.setText("Hello World!");  // gives NullPointer exception !!
    }

    @Override public void initialize(URL url, ResourceBundle rb) {
    }    
}

// Example 2 -- Foo.java:
import javafx.scene.control.Label;

public class Foo {
    public Label label;
} 
```

这是我的 FXML 文件，用于上述任一示例：

```
<AnchorPane id="AnchorPane" prefHeight="200" prefWidth="320" xmlns:fx="http://javafx.com/fxml" fx:controller="javafxapplication4.SampleController">
    <children>
        <Button layoutX="126" layoutY="90" text="Click Me!" onAction="#handleButtonAction" fx:id="button" />
        <Label layoutX="126" layoutY="120" minHeight="16" minWidth="69" fx:id="label" text="hey!" />
    </children>
</AnchorPane> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T00:45:25.773

在您的第二个示例中，您永远不会将 foo 标签初始化为任何内容，因此它将保持为空。

您确实创建了一个 Foo 对象，`Foo foo = new Foo();`但这不会初始化 Foo 内部的标签字段成员。特别是，@FXML 注释不会以您在提供的代码中使用它的方式做任何事情。这是因为 Foo 不是控制器。

允许您的示例运行的一些方法：

*1\. 摆脱 Foo*

*   搬进`@FXML public Label label;`你的`SampleController`.
*   摆脱`Foo`类并确保您的 fxml 定义了`fx:id="label"`.

*2\. 在 SampleController 中初始化 Foo 标签*

*   将以下代码放入示例控制器的初始化方法中：`foo.label = new Label();`.
*   此外，在初始化时，将 foo 标签添加到某个容器（例如布局窗格）中，以便它可见。

*3\. 使 Foo 成为嵌套控制器*

*   保留 Foo 类。
*   `@FXML Foo foo;`使用而不是初始化控制器中的 Foo 实例`Foo foo = new Foo();`。
*   使 Foo 类成为控制器（实现[Initializable](http://docs.oracle.com/javafx/2/api/javafx/fxml/Initializable.html)或定义具有适当签名的初始化方法）。
*   在您引用的 fxml 中`SampleController`，还有`fx:include`一个新的 foo.xml 文档的声明，该文档将`fx:id="label"`Foo 实例设置为允许初始化。

第三种方式似乎与您想要的最接近，并且它的文档位于 FXML 文档简介的[嵌套控制器](http://docs.oracle.com/javafx/2/api/javafx/fxml/doc-files/introduction_to_fxml.html#nested_controllers)部分。

*注意：*这个问题更多的是关于如何使用@FXML 初始化类的成员，然后是如何访问类成员。访问只是通过普通的 getter/setter 或成员字段访问，就像您在示例中已经拥有的那样。

`foo.label = "Hello World!";`您的第一个示例有效，因为您在使用之前明确地将 foo.label 初始化为新字符串（使用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T00:55:22.327

伙计，你把整个事情搞混了！但它发生了。

首先，在示例 1 中：

```
public String label; 
```

是字符串而不是标签。而且我很确定您没有在 FXML 文件中使用字符串（不是说您不能，但它根本不会显示在舞台中）

无论如何，当您使用“=”符号时，您正在初始化您的字符串，当您将**@FXML**放在不实现 Initializable 接口的类中时，您不会从 FXML 文件中初始化任何内容（顺便说一下，必须引用可初始化，因为它是控制器），因此，您正在引用一个空对象。

要解决示例 2 中的问题，您需要：

// 示例 2：

```
import javafx.fxml.FXML;
import javafx.scene.control.Label;

public class SampleController implements Initializable {
    @FXML public Label label;

    @FXML private void handleButtonAction(ActionEvent event) {
        System.out.println("You clicked me!");
        foo.label.setText("Hello World!");  // gives NullPointer exception !!
    }

    @Override public void initialize(URL url, ResourceBundle rb) {
    }    
} 
```

并确保您有一个 FXML 文件，例如：

```
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Label?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.control.Button?>

<AnchorPane xmlns:fx="http://javafx.com/fxml" fx:id="whatever-id" fx:controller="samplecontroller.package.SampleController">
   <children>
      <Label fx:id="label" text="not really necessary" />
      <Button fx:id"btnLabelChanger" onmouseclick="#handleButtonAction"/>
   </children>
</AnchorPane> 
```

我希望它有所帮助。干杯。*

# android - java.security.cert.CertPathValidatorException：找不到证书路径的信任锚

> ID：12468526
> 
> 赞同：1
> 
> 时间：2012-09-17T23:36:47.023
> 
> 标签：android, ssl, certificate

我正在 Android 上开发一个客户端应用程序，它连接到负载均衡器后面的 AWS 上的服务器，我在 GoDaddy 上创建了一个 SSL 证书并将其添加到负载均衡器上。

浏览器上一切正常，它可以识别证书，但是当我尝试使用 Android 调用 API 时，我得到了这个异常：

> 09-18 01:18:55.187：W/System.err(32585)：原因：java.security.cert.CertPathValidatorException：找不到证书路径的信任锚。

我发现一些讨论谁说要在应用程序上添加证书，但是没有办法在证书服务器端修复它吗？这不是证书的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T12:26:34.453

我通过使用正确的组织单位名称和通用名称创建一个新的 .csr 来修复它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T08:32:13.850

在这种情况下，我会说官方的 Android 文档将是你最好的朋友。见这里：http: [//developer.android.com/training/articles/security-ssl.html#UnknownCa](http://developer.android.com/training/articles/security-ssl.html#UnknownCa)

这就是他们所说的，既解决了问题又非常聪明：

> 在这种情况下，发生 SSLHandshakeException 是因为您有一个不受系统信任的 CA。这可能是因为您拥有来自 Android 尚未信任的新 CA 的证书，或者您的应用在没有 CA 的旧版本上运行。更多情况下，CA 是未知的，因为它不是公共 CA，而是由政府、公司或教育机构等组织颁发的私人 CA，供他们自己使用。
> 
> 幸运的是，您可以教 HttpsURLConnection 信任一组特定的 CA。这个过程可能有点复杂，所以下面是一个从 InputStream 中获取特定 CA 的示例，使用它来创建一个 KeyStore，然后使用它来创建和初始化一个 TrustManager。TrustManager 是系统用来验证来自服务器的证书，并且通过从具有一个或多个 CA 的 KeyStore 创建一个证书，这些将是该 TrustManager 信任的唯一 CA。
> 
> 给定新的 TrustManager，该示例初始化一个新的 SSLContext，它提供了一个 SSLSocketFactory，您可以使用它来覆盖 HttpsURLConnection 中的默认 SSLSocketFactory。这样，连接将使用您的 CA 进行证书验证。

# javascript - 在 jquery 中使用 event.target 转换 event.srcElement

> ID：12468527
> 
> 赞同：1
> 
> 时间：2012-09-17T23:36:48.510
> 
> 标签：javascript, jquery

我对跨浏览器兼容性有疑问。

我想在下面的代码中使用`event.target`而不是`event.srcElement`使它适用于 Firefox。

我用过`target = event.target || event.srcElement`。它不工作。任何帮助将不胜感激。

```
function jumptoPopupMenuItem(theMenuID) 
{                
  if (event.srcElement.className == "RightClickMenuItems") 
  {
    if (event.srcElement.getAttribute("url") != null)
    {        
      var strParameters = "";                                    
      if (theMenuID == "mnuAppointmentMenu")
      {
        strParameters = "AppointmentNumber=" + m_strAppointmentTypeYearNumber;
      }
      else if (theMenuID == "mnuAvailableHourMenu")
      {
        strParameters = "PreFillLanguageID=" + m_nLanguageID;
        strParameters = strParameters + "&PreFillInterpreterID=" + m_nInterpreterID;
        strParameters = strParameters + "&PreFillDateOfService=" + m_dtDateOfService;
      }
      if (event.srcElement.getAttribute("target") != null)
      {
        var PopupWindow = window.open(
            event.srcElement.url + strParameters, 
            event.srcElement.getAttribute("target"));
        PopupWindow.focus();
      }
      else
      {
        window.location = event.srcElement.url;
      }
    }
    hidePopupMenu(theMenuID);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T05:58:18.410

如果您使用的是 jquery，只需使用`var $target = $(e.target);`-- 它会为浏览器做正确的事情。

# windows - 在Windows server 2012上通过无线直接访问IIS，无需路由器

> ID：12468528
> 
> 赞同：0
> 
> 时间：2012-09-17T23:36:49.390
> 
> 标签：windows, iis, networking, webserver, dhcp

刚买了一台新服务器并在上面安装了windows server 2012。服务器有一个无线设备。

我计划在该服务器中部署一个 Web 应用程序，并希望所有用户通过无线直接连接到该服务器（不使用任何路由器/交换机）。所以基本上，windows server 2012 安装了 DHCP 来为无线连接到该服务器的任何用户分配 IP 地址；并且用户能够导航到部署在 IIS 中的网站。

如何配置 windows server 2012 以提供此功能？最终结果将是： -> 用户可以看到 Windows 服务器广播的 WIFI 名称 -> 然后用户通过一些安全保护连接到它（例如：WEP） -> 然后用户打开他的浏览器并导航到通过键入本地 IP 地址来访问 Web 应用程序。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T23:55:39.123

路由器/防火墙具有所有相同的功能 - 无线和内置 DHCP 服务器，至少具有一个**主要**优势 - 专为这项工作而设计和制造。**提供对任何**业务资源的直接**和**无线访问是**不可以的**。 理想情况下，Web 服务器应该在他们自己的 DMZ 中，单独的子网是一个明确的优势。显然**不**直接连接到同一网络上的许多客户端-如果您按照您的要求进行操作，如果任何一台计算机受到威胁，您会自动打开整个网络上的**所有计算机-这****不是**一个好主意。

# filepicker.io - 从 filepicker.io 获取静态文件

> ID：12468535
> 
> 赞同：3
> 
> 时间：2012-09-17T23:37:21.200
> 
> 标签：filepicker.io

Filepicker.io 似乎总是返回`Content-Disposition: attachment; ..`导致它下载或抛出另存为对话框的文件。

如何获取没有此标头的文件？我希望用户能够在他们的浏览器中打开图像。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T23:38:33.150

您可以使用该`?dl=false`标志。

[https://www.filepicker.io/api/file/hFHUCB3iTxyMzseuWOgG?dl=false](https://www.filepicker.io/api/file/hFHUCB3iTxyMzseuWOgG?dl=false)

# html - ruby on rails 代码语法，包括一些 haml 和模型视图控制

> ID：12468536
> 
> 赞同：0
> 
> 时间：2012-09-17T23:37:47.277
> 
> 标签：html, ruby-on-rails, ruby, ruby-on-rails-3, model-view-controller

我有以下代码。[这是从 ruby​​ 控制器有条件地设置 CSS 样式](https://stackoverflow.com/questions/9646815/conditionally-setting-css-style-from-ruby-controller)的原始帖子

```
%th{:class => @title_header}= link_to 'Title', my_path(:sort => 'title'), :id => 'title_header' 
```

我知道 link_to 工作

1.我不明白什么是 :class 和 :class 是关键字吗？

2.我知道当我们创建一个模型时，我们会得到一个model_path，但是在这种情况下，为什么我们可以将一个参数传递给my_path？

3\. 那 :sort 也是rails中的关键字吗？

4\. :id 是 rails 中的关键字吗？

5.所以在这种情况下，我们用 my_path 做什么？它会返回一些东西吗？

6\. :id 怎么样，在这种情况下它做了什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T02:58:21.567

:sort 和 :class 是 Ruby 中的符号，表示不会像字符串那样在代码中改变的标识符。它们被用作键/值的散列定义中的键。

当您将名称/值对的散列传递给 HAML 中的 %th 之类的标签时，它会将它们转换为标签上的 HTML 属性。这允许您使用实例变量@title_header 中的类名列表动态设置 TH 标记上的“类”属性的值。

my_path 是一个命名路由助手，它代表一个函数，用于为 Rails 路由集中命名的路由生成 URI。您可以传递各种选项来更改 URI 的生成方式。默认情况下，任何不是路由生成选项的选项都会作为查询参数注入到生成的 URI 上。所以如果 my_path => /my/path，那么 my_path(:foo => 'bar') => /my/path?foo=bar。

在这种情况下，此查询参数可能指示在该 URI 处生成的数据的排序顺序。

以同样的方式，link_to 函数接受一个选项哈希作为它的最后一个参数，它决定了如何生成链接元素。此函数上设置的最后一个选项是 html_options，其中哈希的属性映射到生成的 A 标记的属性。在这种情况下，哈希中的 :id 符号和值将生成具有给定值的“id”HTML 属性。

既然你问了，这里有一个关于什么是 CSS 类的很好的参考：[http ://www.tizag.com/cssT/class.php](http://www.tizag.com/cssT/class.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T07:24:34.650

```
%th{:class => @title_header}= link_to 'Title', my_path(:sort => 'title'), :id => 'title_header' 
```

将会

```
<th class="value of ruby variable @title_header">
  <a href="value_of_my_path?sort=title" id="title_header">Title</a>
</th> 
```

什么是类属性？

这是元素的 css 类定义。

# firefox - 带有渐变叠加的 CSS3 背景 - 渐变仅适用于 Firefox

> ID：12468540
> 
> 赞同：3
> 
> 时间：2012-09-17T23:38:09.010
> 
> 标签：firefox, css, webkit

我正在尝试在背景图像上叠加 CSS 渐变。我已经让它在 Firefox 中工作，但在 safari 和 chrome 中我只得到背景图像，没有渐变。

[（我使用http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)生成了渐变代码，然后在每一行的末尾简单地添加了 url() ）

**更新：**似乎我的问题可能是 webkit 显示图像后面的渐变，而不是像我需要的那样在顶部，而 Firefox 确实如此。

```
 background: -moz-linear-gradient(top, rgba(0, 0, 0, 0) 0%, rgba(99, 130, 169, 0.7) 100%), url(app/bg.jpg) no-repeat center center fixed; /* FF3.6+ */
  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(0, 0, 0, 0)), color-stop(100%, rgba(99, 130, 169, 0.7))), url(app/bg.jpg) no-repeat center center fixed; /* Chrome,Safari4+ */
  background: -webkit-linear-gradient(top, rgba(0, 0, 0, 0) 0%,rgba(0,0,0,0.16) 100%), url(app/bg.jpg) no-repeat center center fixed; /* Chrome10+,Safari5.1+ */
  background: -o-linear-gradient(top, rgba(0, 0, 0, 0) 0%,rgba(99, 130, 169, 0.7) 100%), url(app/bg.jpg) no-repeat center center fixed; /* Opera 11.10+ */
  background: -ms-linear-gradient(top, rgba(0, 0, 0, 0) 0%,rgba(99, 130, 169, 0.7) 100%), url(app/bg.jpg) no-repeat center center fixed; /* IE10+ */
  background: linear-gradient(to bottom, rgba(0, 0, 0, 0) 0%,rgba(99, 130, 169, 0.7) 100%), url(app/bg.jpg) no-repeat center center fixed; /* W3C */ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T23:50:03.137

在这种情况下，我建议使用速记符号，它会使阅读和维护变得更加容易（并且可以解决问题）。这是一个工作示例（和一个演示：http: [//jsfiddle.net/joshnh/yyy7V/](http://jsfiddle.net/joshnh/yyy7V/)）：

```
.foo {
    background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, rgba(0, 0, 0, 0)), color-stop(100%, rgba(99, 130, 169, 0.7))), url('http://lorempixel.com/400/300/'); /* Chrome,Safari4+ */
    background-image: -webkit-linear-gradient(top, transparent, rgba(99,130,169,.7)), url('http://lorempixel.com/400/300/'); /* Chrome10+,Safari5.1+ */
    background-image:    -moz-linear-gradient(top, transparent, rgba(99,130,169,.7)), url('http://lorempixel.com/400/300/'); /* FF3.6+ */
    background-image:     -ms-linear-gradient(top, transparent, rgba(99,130,169,.7)), url('http://lorempixel.com/400/300/'); /* IE10+ */
    background-image:      -o-linear-gradient(top, transparent, rgba(99,130,169,.7)), url('http://lorempixel.com/400/300/'); /* Opera 11.10+ */
    background-image:         linear-gradient(to bottom, transparent, rgba(99,130,169,0.7)), url('http://lorempixel.com/400/300/'); /* W3C */

    background-repeat: no-repeat;
    background-position: 50% 50%;
    background-attachment: fixed;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T12:46:22.967

图像在 WebKit 中的渐变*后面。*只是 WebKit 代码使用了另一种颜色，`rgba(0,0,0,0.16)`，这比用于其他浏览器的颜色*更难发现*`rgba(99,130,169,0.7)`， 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T23:40:27.697

我相信这里的问题来自您的 CSS 的排序。 [试试 Chris Coyier 的方法。](http://css-tricks.com/css3-gradients/)

```
.gradient-bg {
   background-color: #1a82f7; 
   background-image: url(images/fallback-gradient.png); 
   background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#2F2727), to(#1a82f7));
   background-image: -webkit-linear-gradient(top, #2F2727, #1a82f7); 
   background-image:    -moz-linear-gradient(top, #2F2727, #1a82f7);
   background-image:     -ms-linear-gradient(top, #2F2727, #1a82f7);
   background-image:      -o-linear-gradient(top, #2F2727, #1a82f7);
} 
```

# ruby-on-rails - Ruby on Rails 中的自定义 URL 路由

> ID：12468542
> 
> 赞同：0
> 
> 时间：2012-09-17T23:38:20.827
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我目前正在学习 ruby​​ on rails 3.0

我创建了一个帖子表，其中有一列名为friendly

而不是使用 /post/:id 我想使用 /post/:friendly

这意味着 URL 看起来像 /post/post-title 而不是 /post/1

我使用此代码正确构建了控制器。

```
def show
  @post = Post.find(params[:friendly])

  respond_to do |format|
    format.html
    format.json { render :json => @post }
  end
end 
```

但我不确定如何更改 routes.rb 以实现此更改。

现在它只是说

```
resources :post 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T00:03:51.773

[您可以在模型http://apidock.com/rails/ActiveRecord/Base/to_param](http://apidock.com/rails/ActiveRecord/Base/to_param)上使用 to_param 方法

如果您将对象 ID 保留在友好名称中，例如 1-some-name, 2-some-other-name，您将无需执行任何其他操作。Rails 将从字符串中删除 id 并使用它来查找您的对象。如果不这样做，则必须更改控制器以使用 find_by_friendly(params[:id]) 而不是 find(params[:id])

另一种选择是使用像[https://github.com/norman/friendly_id](https://github.com/norman/friendly_id)这样的 gem来完成此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T00:40:09.780

如果想在find上改变id变量的格式，可以改变路由如下

```
resources :post, :except => find do
  # Change the find to accept an id that's alphanumeric, but you can change 
  # this regex to whatever you need.
  get 'find', :on => :member, :constraints => { :id => /[a-zA-Z]*/ }
end 
```

然后，要在帖子#find 中获取帖子，您需要执行

```
Post.find_by_friendly(Params[:id]) 
```

一个问题是这会破坏辅助路径 - 例如`post_path(@post)`需要成为`post_path(:id => @post.friendly)`

[http://guides.rubyonrails.org/routing.html#http-verb-constraints](http://guides.rubyonrails.org/routing.html#http-verb-constraints)

# java - 如何将 iText 文档转换为 javax.activation.DataSource？

> ID：12468547
> 
> 赞同：1
> 
> 时间：2012-09-17T23:38:39.630
> 
> 标签：java, stream, itext

是否可以将 iText 文档变量转换为`javax.activation.DataSource`? 如果没有，有没有办法可以将 iText 文档转换为 an`InputStream`或 an `OutputStream`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T01:20:11.440

好吧，通常情况相反，您从数据源制作 PDF。

无论如何，这是一个示例，其中我已将 PDF 的内容转换为流。您可以根据需要更改流类型：

```
package com.quicklyjava;

import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.io.InputStream;

import com.itextpdf.text.pdf.PdfReader;
import com.itextpdf.text.pdf.parser.PdfTextExtractor;

public class JavaReadPDF {

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub
    try {
        PdfReader reader = new PdfReader("c:/XML.pdf");
        String page1 = PdfTextExtractor.getTextFromPage(reader, 1);
        InputStream is = new ByteArrayInputStream(page1.getBytes());
        System.out.println(page1);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

} 
```

# jquery - 使用 jQuery 淡化/动画位置变化

> ID：12468548
> 
> 赞同：1
> 
> 时间：2012-09-17T23:38:54.483
> 
> 标签：jquery, header, fade, fixed, nav

我的标题设置为 920px 居中的宽度，并且使用标题下方的代码变得固定并在用户滚动时改变不透明度。我很容易达到了我想要的效果，尽管变化发生在瞬间。我想知道我是否可以使更改逐渐消失？我试过使用 CSS3 过渡但没有运气。

```
 <script>
  $(function() {

    // grab the initial top offset of the navigation 
    var sticky_navigation_offset_top = $('header').offset().top;

    // our function that decides weather the navigation bar should have "fixed" css position or not.
    var sticky_navigation = function(){
        var scroll_top = $(window).scrollTop(); // our current vertical position from the top

        // if we've scrolled more than the navigation, change its position to fixed to stick to top,
        // otherwise change it back to relative
        if (scroll_top > sticky_navigation_offset_top) { 

            $('header').css({ 'position': 'fixed', 'position': 'fixed', 'opacity':0.8,  'top':0, 'left':0 });

        } else {
            $('header').css({ 'position': 'relative' }); 
        }   

    };

    // run our function on load
    sticky_navigation();

    // and run it again every time you scroll
    $(window).scroll(function() {
         sticky_navigation();
    });

});
  </script> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T23:46:09.060

您可以将样式放入 2 个单独的类中并使用 jQuery UI 的[**switchClass()**](http://jqueryui.com/demos/switchClass/)

> **switchClass（删除，添加，[持续时间]）**
> 
> 使用可选的转换从第一个参数中定义的类切换到定义为第二个参数的类。

添加一些样式类：

```
style1{
    position: fixed;
    opacity: 0.8;
    top: 0;
    left: 0;
}

style2{
    position: relative;
} 
```

在它们之间切换：

```
if (scroll_top > sticky_navigation_offset_top) {
    $('header').switchClass("style2", "style1", 300);
} else {
    $('header').switchClass("style1", "style2", 300);
}​ 
```

或者，您可以进一步研究 CSS3 转换。我自己还没有使用过它们，但它们可能能够达到您的需要。

# ruby - 正则表达式查找 C 注释

> ID：12468551
> 
> 赞同：1
> 
> 时间：2012-09-17T23:39:08.127
> 
> 标签：ruby, regex, parsing

我需要一个 Ruby 中的正则表达式来查找 C 指令之前的注释。

例如我有这个文件`example.c`

```
/*
 * COMMENT NUMBER 1
 */
x = rb_define_class_under (foo, "MyClassName1", bar);

/*
 * COMMENT NUMBER 2
 */
y = rb_define_class_under (foo, "MyClassName2", bar);

/*
 * COMMENT NUMBER 3
 */
z = rb_define_class_under (foo, "MyClassName3", bar); 
```

然后我在 ruby​​ 中有我的解析器，`parser.rb`如下所示：

```
content = File.open('example.c').read

if content =~ /((?>\/\*.*?\*\/))([\w\.\s]+\s=\s)?rb_define_class_under.*?"(MyClassName1)"/m
  puts "Comment number 1 is:"
  puts $1
end

if content =~ /((?>\/\*.*?\*\/))([\w\.\s]+\s=\s)?rb_define_class_under.*?"(MyClassName2)"/m
  puts "Comment number 2 is:"
  puts $1
end

if content =~ /((?>\/\*.*?\*\/))([\w\.\s]+\s=\s)?rb_define_class_under.*?"(MyClassName3)"/m
  puts "Comment number 3 is:"
  puts $1
end 
```

现在我期望的输出是这样的：

```
Comment number 1 is:
/*
 * COMMENT NUMBER 1
 */
Comment number 2 is:
/*
 * COMMENT NUMBER 2
 */
Comment number 3 is:
/*
 * COMMENT NUMBER 3
 */ 
```

但我得到：

```
Comment number 1 is:
/*
 * COMMENT NUMBER 1
 */
Comment number 2 is:
/*
 * COMMENT NUMBER 1
 */
Comment number 3 is:
/*
 * COMMENT NUMBER 1
 */ 
```

任何想法？获得预期输出的正确正则表达式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T23:52:57.630

尝试添加`.*`到正则表达式的开头。

目前，您的正则表达式中的`.*?`after`rb_define_class_under`导致您始终匹配并捕获字符串的第一部分，并且`.*?`匹配直到您实际查找的类名。

通过在正则表达式的开头添加一个贪心匹配，您可以确保您只在`/*`您想要的类名之前的最后一个开始您的捕获组。

示例：[http ://www.rubular.com/r/Orja089zAI](http://www.rubular.com/r/Orja089zAI)

请注意，您仍然从字符串的开头匹配，但第一个捕获组是正确的注释。

# gwt - GWT 历史机制

> ID：12468553
> 
> 赞同：1
> 
> 时间：2012-09-17T23:39:33.720
> 
> 标签：gwt, history, gwt-history

我正在尝试将历史记录功能添加到我的 GWT 应用程序中。

据我了解，GWT 必须提供的基本历史支持确实是基本的……或者我应该说*非常*基本。

除了当前位于堆栈顶部的令牌之外，它并没有真正存储有关状态的任何其他信息。这意味着我希望得到像弹出令牌这样的信息，这是我们刚刚离开的那个，也可能会得到信息，无论是按下还是前进。

基本机制假定页面没有“高级”状态，即如果当前标记是“菜单”，那么我们从哪里进入这个菜单页面并不重要。但是，我想检查我们此时是否要离开特定页面，因为如果我们这样做了，那么我想先显示警告以保存数据。

此外，我的一些页面没有使用默认构造函数，而是从当前显示的页面中获取特定信息。这使我无法在一个集中的地方创建所有页面，并且应用程序中的所有按钮都只是在玩弄历史令牌。（如第 37 页所建议的[那样。）](http://courses.coreservlets.com/Course-Materials/pdf/ajax/GWT-History.pdf)

无论如何，我在这里很迷茫。我不确定要在不重写我的应用程序的情况下实现对后退/前进的基本支持要采取什么途径。

任何人的想法或想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:35:29.503

如果您需要跟踪您来自哪里，您可以轻松地自己完成：就像将令牌存储在全局状态中一样简单，并且仅在您对新令牌执行操作后才更新它。

仅供参考，`PlaceController`就是这样做的（使用`Place`抽象而不是基于字符串的标记）。它还会触发一个`PlaceChangeRequestEvent`，您可以`setMessage`在实际执行移动之前要求用户确认（`PlaceChangeEvent`）。

我不是建议你改用使用`PlaceController`而不是生的`History`（即使我相信你不会后悔），只是指出这是可能的。

另请参阅[如何确定我在 GWT 中的历史记录中是“前进”还是“后退”？](https://stackoverflow.com/q/2693527/116472)和[GWT 2.1 Place/Activity 技术故障：在导航确认之前 URL 发生变化](https://stackoverflow.com/q/4331060/116472)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T00:48:55.903

我假设您熟悉 GWT 活动和地点设计模式。它提供了您需要的所有机制，即活动中的令牌和 mayStop() 方法。

如果我有一个可能有未保存数据的视图，我总是实现一个从 mayStop() 调用的 hasChanges() 方法，以警告用户是否可能丢失任何更改。

请注意，您可以根据需要使令牌变得具体。令牌可能包含您需要的有关页面的任何信息，因此您可以对其进行解析和操作。就像是：

myPage.jsp/#CALENDAR:classId=900&option=teachers&menuItem=month

如果需要，您可以轻松地将前一页添加到您的令牌中。

活动和地点模式为我提供了我需要的一切，我不必担心历史管理——我让浏览器来做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T00:46:26.957

令牌机制是基本的，但没有什么能阻止您构建复杂的令牌来表示其他状态并解析它以稍后检索该状态。当然，它受到浏览器支持的令牌或 URL 大小的限制，但你仍然可以用它做很多事情。你是对的，它没有为更复杂的事情提供太多支持，比如面包屑和历史跟踪。实现这些需要一些编码。

# iphone - 尝试使用AVAudioRecorder，调试时出现异常

> ID：12468559
> 
> 赞同：0
> 
> 时间：2012-09-17T23:40:25.430
> 
> 标签：iphone, objective-c, xcode, ios5, avaudiorecorder

我正在尝试使用下面的代码为 iphone 创建一个带有开始和停止按钮的简单录音机。

编译工作正常，但是当我尝试调试程序并按下开始按钮时，我得到线程 1：跟踪，在它显示“错误：nil];”的行

甚至不确定如何开始弄清楚这意味着什么。顺便说一下，这将是第一次使用 Objective-c 和 xcode。

```
// Start recording or warn that already started
- (IBAction)startButton_clicked:(id)sender {
    if (currentlyRecording == false)
    {
        // Sets recorder settings
        [[AVAudioSession sharedInstance]
         setCategory: AVAudioSessionCategoryRecord
         error: nil];
        NSDictionary *recordSettings =
        [[NSDictionary alloc] initWithObjectsAndKeys:[NSNumber numberWithFloat: 44100.0], AVSampleRateKey,
         [NSNumber numberWithInt: kAudioFormatAppleLossless], AVFormatIDKey,
         [NSNumber numberWithInt: 1], AVNumberOfChannelsKey,
         [NSNumber numberWithInt: AVAudioQualityMax],
         AVEncoderAudioQualityKey, nil];
        // Determine file name
        NSString *fileDir = [NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES) objectAtIndex:0];
        NSString *filePath = [NSString stringWithFormat:@"%@/%@.wav", fileDir , GetCurrentTime()];
        //debugText.text = [NSString stringWithFormat:@"%@", filePath]; // DEBUGGING

         // Prepare recording
         soundFileURL = [[NSURL alloc] initWithString:filePath];
         AVAudioRecorder *newRecorder =
         [[AVAudioRecorder alloc] initWithURL: soundFileURL
         settings: recordSettings
         error: nil];
         [recordSettings release];
         soundRecorder = newRecorder;
         [newRecorder release];

         // Record
         [soundRecorder prepareToRecord];
         [soundRecorder record];
         currentlyRecording = true;
         headLabel.text = @"Started";
    }

    // if currentlyrecording is already true
    else headLabel.text = @"Already Started";
}

// stops recording or warns that already stopped
- (IBAction)stopButton_clicked:(id)sender {
    if (currentlyRecording == true)
    {
        // Stop recording & clear vars
        [soundRecorder stop];
        soundRecorder = nil;
        currentlyRecording = false;
        headLabel.text = @"Stopped";
    }

    // if currentlyrecording is already false
    else headLabel.text = @"It's not even on!";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T15:53:22.547

我遇到了类似的问题。我自己在 [AVAudioSession sharedInstance] 上获得了一个异常断点，在控制台窗口中也没有异常。但是，我确实在控制台输出中得到了这个：

```
<com.apple.main-thread> AddPropertyListenerImp posting message to kill mediaserverd (0) 
```

我也在我的应用程序中录制，但是当我的录制出现故障并重新启动应用程序时，我得到了这个。所以这是应用程序的全新运行 - 但显然由于之前发生的事情，该设备已进入有问题的状态。

希望有所帮助-我知道这不是解决方案的直接答案，但我想阐明更多信息。

# maven - 是否可以先让 maven 配置查看本地 nexus 存储位置？

> ID：12468562
> 
> 赞同：0
> 
> 时间：2012-09-17T23:40:29.820
> 
> 标签：maven, jenkins, maven-3, nexus, bamboo

我们在与我们的 nexus 服务器相同的服务器上安装了 Jenkins（和 Bamboo）。我想知道`~/.m2/settings.xml`在下载人工制品之前是否可以先在nexus磁盘位置检查maven配置？

Sonatype 似乎存储在与 Maven 相同的结构中，但具有存储库 ID 的父目录。IE

`/data/nexus/sonatype-work/nexus/storage/central/commons-cli/commons-cli/1.2/commons-cli-1.2.jar`

我不希望詹金斯能够真正下载到这个位置，因为我认为这可能很危险，但是我想让它先咨询这个位置。然后 Jenkins 可以自由下载它喜欢的东西，如果它不存在，这将触发 Nexus 也首先下载人工制品；然后可以通过在夜间为 Jenkins 创建一个停电来解决这种双重问题，以防止在批处理脚本检查重复文件并将它们从 Jenkins 本地存储库中删除时发生构建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:40:11.533

使用 mvn 和离线选项（mvn --help ->

```
-o,--offline                           Work offline

$ mvn -offline 
```

# javascript - 如何在我的游戏中添加文字

> ID：12468563
> 
> 赞同：-1
> 
> 时间：2012-09-17T23:40:30.623
> 
> 标签：javascript, html

我正在尝试在我的纯 javascript/html5 游戏中实现一个主菜单，我想知道是否可以在游戏本身中显示文本！我试过：填充（255、0、0）；text("你好！", 50, 50); 但由于某种原因，什么也没有发生。有没有办法做到这一点，如果没有，有没有办法用纯javascript制作主菜单？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T23:44:10.307

尝试使用`fillText()`. 这是一个教程：[HTML5：绘制图像并将文本添加到画布元素](http://www.techrepublic.com/blog/webmaster/html5-drawing-images-and-adding-text-to-the-canvas-element/586)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T23:44:47.100

假设您指的是`canvas`元素，那么您应该[参考这里](http://www.html5tutorial.info/html5-canvas-text.php)。然而，就我个人而言，我不明白为什么你不能在画布上放置一个无序列表并告诉链接触发事件而不是加载页面。

```
<ul>
    <li><a href="#play">Play</a></li>
    <li><a href="#about">About</a></li>
    <li><a href="#options">Options</a></li>
    <li><a href="#quit">Quit</a></li>
</ul> 
```

# bash - 外壳中的Getopt

> ID：12468571
> 
> 赞同：1
> 
> 时间：2012-09-17T23:42:02.047
> 
> 标签：bash, getopt

我正在编写一个 shell 脚本来解析选项。它正确解析了选项，但是当我省略任何输入参数时，它不会出现在 while 循环中。有人可以帮忙吗？

```
TEMP=`getopt -o ha:b:d:e:c: --l ca: \-n "$x" -- "$@"`

eval set -- "$TEMP"

while true; do

  case "$1" in

    -h)      print $USAGE
             exit 0 ;;
    -a)      case "$2" in
               -*|"") error "Option t, requires argument";
                      exit 1;;

               *)  print $2
                   T=${2^^} ; 
                   shift 2 ;;
             esac ;;

    -b)      case "$2" in
               -*|"") error "Option p, requires argument";
                   exit 1 ;;

               *)  print $2
                   PE=${2^^} ; 
                   shift 2 ;
             esac ;;

    -d)      case "$2" in
               -*|"") error "Option f, requires argument";
                      exit 1 ;;

               *)  print $2 ; 
                   IN=$2 ;
                   shift 2 ;;
             esac ;;

    -e)      case "$2" in
               ""|-*) error "Option e, requires argument";
                      exit 1 ;;

               *)  print  $2 ; 
                   KEY=$2 ;
                   shift 2 ;;
             esac ;;
    -c|--ca) case "$2" in
               ""|-*) error "Option c, requires argument"; 
                   exit 1;;

               *)  print $2 ;
                   C=${2};
                   shift 2 ;;
             esac ;;

   --)       shift ;
             break ;;

    *)       error "Invalid Input!" ;
             exit 1 ;;

  esac
done

USAGE:foo.sh -a arg1 -b arg2 -c arg3 -d arg 4 -e arg5 
```

这工作正常，但

```
foo.sh -a arg1 -b arg2 -c arg3 
```

不会从while循环中出来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T04:47:58.343

当您使用`getopt`而不是内置 时`getopts`，循环条件应该是：

```
while [ $# -gt 0 ]
do
    case "$1" in
    ...
    esac
done 
```

您也不需要变量`$TEMP`；你可以简单地使用：

```
eval set -- $(getopt -o ha:b:d:e:c: --l ca: \-n "$x" -- "$@") 
```

通常，`$(...)`符号比反引号更可取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T04:49:11.310

你永远不会退出循环；您如何期望退出？一种常见的安排是`$#`在​​顶部进行检查，并且仅在它是 zonzero 时才进行。

# r - 数据对象是否持久存在于 openCPU 的 R 会话中？

> ID：12468574
> 
> 赞同：4
> 
> 时间：2012-09-17T23:42:35.467
> 
> 标签：r, opencpu

我想提供一个需要访问大型数据集的网络工具。优选地，这个 R 数据对象应该被加载到内存中一次，然后可用于用户定义的查询。

openCPU 框架是否以任何方式支持持久数据对象，还是每个查询都从空白开始？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T18:33:50.977

OpenCPU API 是无状态的，无法在请求之间保持进程处于活动状态。但是您可以通过将数据集放入一个包中并将其安装在服务器上来轻松解决您的问题。

您可以使用[服务器手册](http://jeroenooms.github.com/opencpu-manual/opencpu-server.pdf)`preload`中描述的选项，或者在服务器启动时使用脚本将数据集与内存中的数据集一起加载。这样，当请求进来时，数据就可以使用了。`/etc/opencpu/Rprofile`

# jquery - mouseenter 上的联合 jquery

> ID：12468579
> 
> 赞同：0
> 
> 时间：2012-09-17T23:43:21.690
> 
> 标签：jquery, mouseenter

我有一个带有下拉子菜单的导航。当下拉出现时，我想要一个菜单​​+下拉的联合，如下所示：

![在此处输入图像描述](../Images/6d7d66b7d75830d019413e338d2becbc.png)

因此，如果鼠标以粉红色退出整个块，则子导航消失。目前，如果鼠标只退出下拉菜单，下拉菜单就消失了。我看到了[这个例子](https://stackoverflow.com/questions/1041344/jquery-multiple-class-selector)，但是将课程组合在一起对我不起作用。

这是[我的小提琴](http://jsfiddle.net/nalagg/2DXGr/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T00:19:35.710

为什么不从`mouseenter`AND的目标中删除子类`mouseleave`？像[这样](http://jsfiddle.net/2DXGr/4/)：

```
var animate;
$(".myClass").mouseenter(function () {
  clearTimeout(animate);
  $('.myClass').css('background-color','#777');
  $('.mySubClass').css('display','inline');
});
$(".myClass").mouseleave(function() {
  animate = setTimeout(function(){
    $('.myClass .mySubClass').css('display','none');
    $('.myClass').css('background-color','#49616a');
  }, 800);
});​ 
```

...因为`.myClass`覆盖区域已经是菜单和下拉菜单的结合（因为相应的元素包括链接和下拉菜单）。

我在这里修复了另一个潜在的错误：可能将 mouseleave-mouseenter 事件排序得太快，然后超时功能将触发，即使它不应该触发（因为光标停留在菜单区域中）。为了防止这种情况，添加了一个附加变量 ( `animate`)；它将超时存储在`mouseleave`处理程序中，并在“mouseenter”中清除它。

# ios - IOS5西班牙字符编码

> ID：12468591
> 
> 赞同：0
> 
> 时间：2012-09-17T23:45:04.833
> 
> 标签：ios, character-encoding

我有一个带有 UItextfield 的表单，当输入这个字符（ á é í ó ú ü ñ ）并通过 POST 方法发送到服务器时，这个字符的内容会被转换。

例如：在文本字段中写的这个单词“ñiña”在输出时变为“√±i√±a”

```
 NSString *post = [NSString stringWithFormat:@"&email=%@&password=%@&id_user=%@&iso_pais=%@&lugar=%@&titulo=%@&comment=%@&api_key=3333333",emailstring,passstring,idstring,locatedAtisocountry,cityLabel.text,title.text,description.text];

                NSLog(@"%@",post);
                NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
                NSString *postLength = [NSString stringWithFormat:@"%d",[postData length]];
                NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
                [request setURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://www.myweb.com/api/exp?format=json"]]];
                [request setHTTPMethod:@"POST"]; 
```

post方法的输出是：

```
&email=username&password=5555&id_user=1032&iso_pais=PL&lugar=Madrid&titulo=√±i√±a&comment=&api_key=3333333 
```

但是服务器端将键“titulo”的内容解码为“nina”，应该是“ñiña”

我怎样才能用这个字符解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T00:20:33.280

我认为`NSUTF8StringEncoding`当您尝试保留重音符号而不是`NSASCIIStringEncoding`.

您可能需要更新服务器编码，因为两者需要匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T00:33:51.857

通过 GET 或 POST 参数传递字符时，您应该使用百分比转义符。

使用该`stringByAddingPercentEscapesUsingEncoding:`方法。

也不要使用`NSASCIIStringEncoding`，但`NSUTF8StringEncoding`如果您的服务器支持 UTF8（希望它支持）并且不允许有损转换（这是代码中将“ñ”转换为“n”的部分）

# html - 页面底部页脚后的空格

> ID：12468593
> 
> 赞同：0
> 
> 时间：2012-09-17T23:45:21.093
> 
> 标签：html, css, footer, space

编辑 - 问题已解决。谢谢大家的帮助！

在这个 URL 中，布局是我想要的（所有重叠的图像）。然而，页面底部有一个巨大的空白，我很难摆脱它。

我做了一些搜索并尝试了不同的方法，但没有成功。

将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T23:59:55.893

在使用开发人员工具玩 CSS 时，问题似乎在于，当您为 设置`top`属性时`#absolute-container`，间隙是容器在移动之前所在的空间。我发现这是一种解决方法：不是设置`top`属性，而是将 of设置`margin-top`为.`#absolute-container``-723px`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T00:02:44.483

很简单，就是因为这个：

```
#absolute-container {top: -723px;} 
```

一个更完整的答案是......您的页面构造错误。以更简单的方式重做。我不能为你做，但是像这样绝对定位东西并在页面上移动它们不是好的设计。

# magento - magento 连接 1.0 和 2.0 的软件包

> ID：12468595
> 
> 赞同：0
> 
> 时间：2012-09-17T23:45:53.310
> 
> 标签：magento

将我的包裹提交到 magento connect 时，我收到了以下消息的拒绝：

> 扩展打包：正确重新打包您的扩展，以便兼容的社区版和/或企业版与正确的频道相对应。（Magento Connect 1.0 和 Magento Connect 2.0）。不要作为新的扩展重新提交。它将被拒绝并从您的帐户中删除。按照指南中的说明重新打包并重新提交

我使用 magento 1.7 上的内置扩展打包程序打包了我的扩展，并标记了“1.5 及更高版本”和“Pre 1.5”。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T18:37:09.893

Roy, ​​packager 在 var/connect/ 和 var/pear/ 中创建了 2 个不同的包。第一个包是 Magento Connect 2.0 版本，第二个是 1.0 版本。

诀窍是您应该从 var/pear/ 上传 magento connect 1.0 的版本，它将自动转换为 2.0 版本

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T01:44:10.757

Magento 有一套关于如何编写、打包扩展和设计个人资料的指南[http://www.magentocommerce.com/magento-connect/create_your_extension/](http://www.magentocommerce.com/magento-connect/create_your_extension/)

Magento Connect 包装扩展指南文件的链接如下：http:
[//info.magento.com/rs/magentocommerce/images/packagingmagentoconnectextensions6%200.pdf](http://info.magento.com/rs/magentocommerce/images/packagingmagentoconnectextensions6%200.pdf)

# debugging - 给定进程名称（而不是给出所有进程的 PID 的 netstat）查找进程的进程 ID（仅）

> ID：12468599
> 
> 赞同：0
> 
> 时间：2012-09-17T23:46:18.923
> 
> 标签：debugging, batch-file, automation, command-prompt, dll-injection

我需要执行以下操作：

1.  启动火狐
2.  加载包含一些插件内容的页面
3.  查找插件进程的processID
4.  使用 processID 将 cdb 附加到插件进程
5.  检测插件加载的 DLL

为了使用批处理脚本自动执行此操作，我需要一种方法来查找给定进程名称的 processID。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T09:19:28.553

You could use wmic to return that: `wmic process where name="cmd.exe" get processid` gets you pids of all cmd.exe running.
Assuming you do not know full process name (is that's why you could not use `cdb -pn`?) you could also use `like`:
`wmic process where 'name like "%cmd%"' get processid` will get everything with `cmd` anywhere in it's name. It's also possible to use other SQL wildcards.

To see what properties you can query, open wmic (just do `wmic` from command line) and issue `process get /?`

Note: wmic produces output in Unicode and attaches double `<CR>` to it's output lines. This sometimes requires special attention and handling in your batch.

# iphone - 如何在ios中将元素数组与字符串进行比较？

> ID：12468605
> 
> 赞同：-6
> 
> 时间：2012-09-17T23:46:49.377
> 
> 标签：iphone, ios, xcode, cocoa

```
 - (void)viewDidLoad
    {
        [super viewDidLoad];

 NSMutableArray *imageArray=[[NSMutableArray alloc]initWithObjects:@"pic1.png",@"pic2.png",@"pic3.png",@"pic4.png",nil];

NSMutableArray *username=[[NSMutableArray alloc]initWithObjects:@"A",@"B",@"C",@"D" ,nil];

        [self scrollViewAction];

    }

    -(void)scrollViewAction

    {

        int x=5,y=0;

        for(int i=0;i<[DetailsArray count];i++)

        {

            UIButton *btn=[[UIButton alloc]init];

[btn setFrame:CGRectMake(x, y, 90, 90)];

            UILabel *usernameLabel=[[UILabel alloc]init];

            [btn addTarget:self action:@selector(btnClicked) 

forControlEvents:UIControlEventTouchUpInside];

            btn.tag=i;

            image=[UIImage imageWithData:[NSData dataWithContentsOfFile:@"imageArray"]];

            if(i==0||i==1||i==2)

            {

                usernameLabel=[[UILabel alloc]initWithFrame:CGRectMake(x,90,90,10)];

            }

else

            {

                usernameLabel=[[UILabel alloc]initWithFrame:CGRectMake(x,y+90,90,10)];

            }

            usernameLabel.text=username;

    -------------------------------------------------------(here I am getting cant compare 

array with string)

            usernameLabel.backgroundColor=[UIColor blueColor];

            usernameLabel.font=[UIFont systemFontOfSize:12];

            [usernameLabel setTextAlignment:UITextAlignmentCenter];

            [self.scrollview addSubview:btn];

            [self.scrollview addSubview:usernameLabel];

             x=x+110;

            if((i+1)%3==0)

            {

                x=5;

                y=y+110;//y=y+115;

            }

            self.scrollview.contentSize= CGSizeMake(320,y+200);

        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T23:52:35.523

```
usernameLabel.text=username; 
```

username 是 NSMutableArray 的一个实例，这不是预期的（NSString 的一个实例）。也许你想做这样的事情？

```
usernameLabel.text=[username objectAtIndex:0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T00:41:07.743

```
for (NSString *name in username) {
   if ([name isEqualToString(usernameLabel.text)])
//matched string found
} 
```

# android - IntelliJ 和 android.support.v7.widget.GridLayout

> ID：12468606
> 
> 赞同：4
> 
> 时间：2012-09-17T23:47:13.090
> 
> 标签：android, intellij-idea, classnotfoundexception, grid-layout, android-support-library

我在我的 IntelliJ 项目中设置支持 v7 GridLayout 库或在我的代码中正确引用它时遇到了麻烦。

我目前在我的项目中使用 ActionBarSherlock 和 Facebook 库，并以相同的方式设置了支持 GridLayout 库（在 src 文件夹中没有源，我告诉 IntelliJ 将项目目录用作 jar 文件夹）。一切看起来都很好，构建并部署到了我的测试设备，但是当我尝试扩展布局时，我的应用程序崩溃了。

```
09-17 17:07:43.916: ERROR/AndroidRuntime(4143): FATAL EXCEPTION: main
    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example/com.example.MainHostActivity}: android.view.InflateException: Binary XML file line #8: Error inflating class android.support.v7.widget.GridLayout
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2753)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2769)
    at android.app.ActivityThread.access$2500(ActivityThread.java:129)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2117)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:143)
    at android.app.ActivityThread.main(ActivityThread.java:4717)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:521)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
    at dalvik.system.NativeStart.main(Native Method)
    Caused by: android.view.InflateException: Binary XML file line #8: Error inflating class android.support.v7.widget.GridLayout
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:576)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
    at com.decoderhq.indieshuffle.PlayerFragment.onCreateView(PlayerFragment.java:63)
    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:846)
    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1061)
    at android.support.v4.app.FragmentManagerImpl.addFragment(FragmentManager.java:1160)
    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:272)
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:558)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
    at com.actionbarsherlock.internal.ActionBarSherlockCompat.setContentView(ActionBarSherlockCompat.java:857)
    at com.actionbarsherlock.app.SherlockFragmentActivity.setContentView(SherlockFragmentActivity.java:251)
    at com.example.MainHostActivity.onCreate(MainHostActivity.java:58)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2717)
    ... 11 more
    Caused by: java.lang.ClassNotFoundException: android.support.v7.widget.GridLayout in loader dalvik.system.PathClassLoader[/data/app/com.example.MyApp.apk]
    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
    at android.view.LayoutInflater.createView(LayoutInflater.java:466)
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:565)
    ... 30 more 
```

IntelliJ 还告诉我，我的 GridLayout 在 XML 设计器中“此处不允许”，我无法在各种搜索引擎中找到任何帮助。我的布局（截断长度）如下：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:grid="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <android.support.v7.widget.GridLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        grid:columnCount="3"
        grid:rowCount="2"
        android:id="@+id/player_grid">

    <!-- previous artist label button/view -->
    <LinearLayout
            android:id="@+id/prev_artist_label_layout"
            android:background="@drawable/player_prev_artist_bg_full"
            android:padding="10dp"
            grid:layout_column="0"
            grid:layout_row="0">

        <TextView
                android:id="@+id/prev_artist_label"
                android:layout_height="wrap_content"
                android:layout_width="0dp"
                android:layout_weight="1"
                android:layout_gravity="center"
                android:singleLine="true"
                style="@style/PlayerArtistText"
                android:ellipsize="end"/>
        <ImageView
                android:id="@+id/prev_artist_label_arrow"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="5dp"/>

    </LinearLayout>

    <!-- more cells in the grid [truncated for length] -->

    </android.support.v7.widget.GridLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@id/player_grid">

    <TextView
            android:id="@+id/curr_time_label"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            style="@style/PlayerTimeLabels"
            android:text="00:00"
            android:layout_marginLeft="20dp"
            android:layout_marginRight="10dp"/>
    <SeekBar
            android:layout_height="wrap_content"
            android:layout_width="0dp"
            android:layout_weight="1"
            android:id="@+id/seek_bar"/>
    <TextView
            android:id="@+id/duration_time_label"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            style="@style/PlayerTimeLabels"
            android:text="00:00"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="20dp"/>

</LinearLayout>

</RelativeLayout> 
```

Coles 备注：我在 RelativeLayout 中有一个支持 GridLayout 和一个位于顶部的 LinearLayout，锚定在 RelativeLayout 的底部。

日志表明我错过了一门课。我希望我只是没有正确设置图书馆，因为我想不出它还能是什么。希望有一些 IntelliJ/Android 知识的人可以为我指明正确的方向。

如果这个问题缺少一些信息，请放轻松 - 这是我第一次尝试使用 stackoverflow 寻求帮助。

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-18T13:21:07.830

好的，我想通了。原来是配置问题。这是我为设置支持 GridLayout 库以及在代码中引用类所做的工作。

*   将 [android-sdk-folder]/extras/android/support/v7/gridlayout 文件夹复制到您的项目 libs 文件夹

在 IntelliJ 中设置支持 GridLayout 库：

*   项目结构 -> 项目设置窗格中的模块 -> 新模块
*   从头开始创建模块 -> 下一步
*   为项目命名，浏览到您的 libs/gridlayout 文件夹并选择 Content Root，保留由 Content Root 分配设置的 Module Root，然后选择 Android Module type -> Next
*   不要创建源目录 -> 下一步
*   不要创建 Android 应用程序结构 -> 完成
*   在 Project Settings 窗格中选择 Facets -> 选择您的新模块 -> 检查“Is Library Project”

在 IntelliJ 中添加对项目的依赖关系：

*   在项目设置窗格中选择模块 -> 选择您希望在其中使用支持 GridLayout 的项目
*   选择 Dependancies 选项卡 -> 单击 [+] 添加新的 Module Dependancy
*   从上一部分中选择您的支持库

您还需要在支持项目 libs 目录中添加对支持 v7 GridLayout jar 文件的引用。

*   仍然在 Dependancies 选项卡上 -> 单击 [+] 添加新库 -> Java
*   浏览到 libs/gridlayout/libs 文件夹并选择 support v7 GridLayout .jar
*   选择级别（我只需要项目级别）-> 确定

希望这对其他人有所帮助-我浪费了大部分时间。=|

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-22T02:11:39.013

一个更简单的解决方案：

首先你需要添加对 gradle 的依赖，所以打开 build.gradle 和

```
dependencies {
    compile 'com.android.support:support-v4:13.0.+'
    compile "com.android.support:gridlayout-v7:18.0.+"
} 
```

这就是[http://developer.android.com/tools/support-library/setup.html#](http://developer.android.com/tools/support-library/setup.html#) 但它似乎并没有完全工作。那么你需要让android studio识别它。

1.  文件 > 导入模块
2.  导航到 sdk/extras/android/support/v7/gridlayout

重建项目后，它开始为我工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-10T15:43:14.213

您现在只需要将 . 添加`support gridlayout`到您的依赖项中。

```
dependencies {
    compile 'com.android.support:gridlayout-v7:19.1.0'
} 
```

然后检查`README`位于 中的说明`sdk/extras/android/support/v7/gridlayout`。最值得注意的是，您必须`xmlns:app="http://schemas.android.com/apk/res-auto"`为某些属性使用命名空间。

```
<android.support.v7.widget.GridLayout xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    app:orientation="horizontal"
    app:columnCount="8"
    app:rowCount="8"> 
```

# php - 将查询字符串附加到 URL

> ID：12468608
> 
> 赞同：1
> 
> 时间：2012-09-17T23:47:22.893
> 
> 标签：php, javascript, query-string

> *“附加一个带有先前网址中已经存在的附件的网址？”* 这是最令人困惑的标题——我知道。但我想不出更好的方式来解释它。

也许下面的例子会有所帮助。

我有网址 1：`http://example.com/?value=xyz&stuff=abc`

如果有人点击页面内的链接，我可以传递附加值吗？

IE：`http://www.example.org/?value=xyz&stuff=abc`

感谢和抱歉成为这样的菜鸟。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T01:16:47.810

您询问的这些附件是 URI 的实际所谓的*查询*部分：

```
<scheme>://<authority><path>?<query>

  foo://example.com:8042/over/there?name=ferret#nose
  \_/   \______________/\_________/ \_________/ \__/
   |           |            |            |        |
scheme     authority       path        query   fragment 
```

> 取自：*3\. 语法组件*(RFC 3986) [https://www.rfc-editor.org/rfc/rfc3986#page-16](https://www.rfc-editor.org/rfc/rfc3986#page-16)

然后，您需要一个辅助函数，将（可选）附加`<query>`到现有`<scheme>://<authority><path>`部分。我忽略了`<fragment>`这个例子，因为它需要在最后添加，我想留下一些东西作为练习：

```
function href_append_query($href)
{
    $query = isset($_SERVER['QUERY_STRING'])
        ? '?' . $_SERVER['QUERY_STRING']
        : ''
    ;

    $query = strtr(
        $query, [
            '"' => '&quot;',
            "'" => '&#39;',
            '&' => '&amp;'
        ]
    );

    return $href . $query;
} 
```

它的用法：

```
<a href="<?=href_append_query('http://step2.com/')?>Some link</a> 
```

这个小功能将确保`QUERY_STRING`可以通过[`$_SERVER`^(*Docs*)](http://php.net/manual/en/reserved.variables.server.php)获得的现有内容被编码为 HTML 输出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T23:51:58.833

如果链接是用 PHP 构建的，只需将原始查询字符串附加到它们：

```
<a href="http://step2.com/?<?php echo $_SERVER['QUERY_STRING']; ?>">Some link</a> 
```

在 JavaScript 中，只需将 的值附加`window.location.search`到您需要“传递”查询字符串的所有链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-06T09:06:55.647

您还可以使用 js/jquery 将现有查询字符串附加到页面上的每个链接：

```
 $(function() {
    $('a').each(function() {
      link = $(this).attr('href');
      query = window.location.search;
      if (link.indexOf('?') !== -1 && query !== '') {
        query = query.replace('?','&');
      }
      $(this).attr('href',link+query);
    });
  }); 
```

# android - 如何将新意图中的变量传递回在android中创建它的类

> ID：12468610
> 
> 赞同：0
> 
> 时间：2012-09-17T23:47:37.947
> 
> 标签：android, android-intent, android-activity, parameter-passing

我知道我的标题可能有点复杂，但我真的很困惑，想不出更好的标题。

我的问题：我有一个创建新的主类`intent`。这个新`intent`的基本上只是一个弹出窗口，`EditText`里面有一个按钮。

我的主要课程`intent`是这样创建的：

```
Intent i = new Intent("com.stevedub.GS.INPUTMPG");
startActivity(i); 
```

我想要做的是以某种方式获取用户`EditText`在 new 中输入的数据，`Intent`并在我的主类中使用该整数进行计算。我只是不知道如何做到这一点。

这是我的第二堂课的代码，用于新的`Intent`.

```
public class InputMPG extends Activity {

EditText mpg;
Button b;
String ans;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.inputmpg);

    mpg = (EditText) findViewById(R.id.MPGinput);
} 
```

现在新活动只是一个类的准系统，因为我不知道是否应该`EditText`在该类中初始化按钮和 。任何指出我正确方向的人将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T00:04:04.857

您需要做的是综合考虑。

首先，使用以下命令启动活动：

```
Intent intent = new Intent("com.stevedub.GS.INPUTMPG");
startActivityForResult(intent, RETURN_CODE); 
```

然后在您的 InputMPG 类中，使用以下内容设置 Return 值：

```
Intent returnIntent = new Intent();
returnIntent.putExtra("result", editText.getText());
setResult(RESULT_OK, returnIntent); 
```

最后，要在原始 Activity 中接收数据，请使用 onActivityResult 方法：

```
public void onActivityResult(int requestCode, int resultCode, Intent intent) {
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == RETURN_CODE && resultCode == RESULT_OK) {
        //get value from intent
    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T23:58:58.910

尝试使用[startActivityForResult()](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)

# python - 正则表达式删除字符串中的重复字符模式

> ID：12468613
> 
> 赞同：11
> 
> 时间：2012-09-17T23:48:30.680
> 
> 标签：python, regex

我有一个可能有重复字符模式的字符串，例如

```
'xyzzyxxyzzyxxyzzyx' 
```

我需要编写一个正则表达式，用最小的重复模式替换这样的字符串：

```
'xyzzyxxyzzyxxyzzyx' becomes 'xyzzyx',

'abcbaccbaabcbaccbaabcbaccba' becomes 'abcbaccba' 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T23:54:37.227

使用以下内容：

```
> re.sub(r'(.+?)\1+', r'\1', 'xyzzyxxyzzyxxyzzyx')
'xyzzyx'
> re.sub(r'(.+?)\1+', r'\1', 'abcbaccbaabcbaccbaabcbaccba')
'abcbaccba'
> re.sub(r'(.+?)\1+', r'\1', 'iiiiiiiiiiiiiiiiii')
'i' 
```

它基本上匹配一个重复自身的模式`(.+?)\1+`，并删除除重复模式之外的所有内容，该模式在第一组中捕获`\1`。另请注意，在这里使用不情愿的限定符 ie`+?`会使正则表达式回溯很多。

**[演示](http://ideone.com/M8ZzM)**。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T00:05:24.003

由于您想要最小的重复模式，因此以下内容应该适合您：

```
re.sub(r'^(.+?)\1+$', r'\1', input_string) 
```

和锚确保您不会在字符串的中间找到匹配项，并且通过使用`^`而不只是您将获得最短的模式（使用类似的字符串比较结果）。`$``.+?``.+``'aaaaaaaaaa'`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T03:13:21.093

试试这个正则表达式模式并捕获第一组：

```
^(.+?)\1+$ 
```

*   `^`字符串/行开头的锚点
*   `.`除换行符以外的任何字符
*   `+`表示至少 1 次出现的量词
*   `?`使`+`懒惰而不是贪婪，从而为您提供最短的模式
*   `()`捕获组
*   `\1+`带量词的反向引用表示模式应该至少重复一次
*   `$`字符串/行尾的锚点

在这里测试它：[Rubular](http://rubular.com/r/Fa10P9Q3fB)

* * *

上面的解决方案做了很多影响性能的回溯。如果您知道这些字符串中不允许使用哪些字符，则可以使用否定字符集来消除回溯。例如，如果不允许使用空格，则

```
^([^\s]+)\1+$ 
```

# android - OnCreate() 与 OnStart()

> ID：12468614
> 
> 赞同：16
> 
> 时间：2012-09-17T23:48:36.973
> 
> 标签：android, android-activity, android-lifecycle

> **可能重复：**
> [onCreate() 和 onStart() 之间的区别？](https://stackoverflow.com/questions/6812003/difference-between-oncreate-and-onstart)
> [Android Activity 生命周期 - 所有这些方法的用途是什么？](https://stackoverflow.com/questions/8515936/android-activity-life-cycle-what-are-all-these-methods-for)

OnCreate 和 OnStart 有什么区别？

我的理解是，仅在第一次打开应用程序时才调用 OnCreate，并且永远不会再次调用。这是真的？有人可以用自己的话详细说明而不是复制和粘贴定义吗？谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-17T23:53:09.483

只要您的设备没有终止活动，例如由于系统资源不足，那么每当您离开应用程序并返回时，就会调用 onStart。但是，如果应用程序进程被杀死，那么当您返回时，将再次调用 onCreate，因为您的所有资源都将被释放。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-17T23:55:47.360

认真的文档——我不是在开玩笑——有一个[非常非常漂亮的图像](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)，描述了`Activity`生命周期（它如何开始、工作和结束）是如何运作的。

直接链接[在这里](http://developer.android.com/images/activity_lifecycle.png)的图像基本上是这样说的：

*   `onCreate()`在创建时调用`Activity`；即启动或启动。（另外，当方向改变时触发。）当进程被杀死时再次调用它，然后返回。
*   `onStart()``onCreate()`在启动时被称为跟随。此外，当*应用*程序导航回 after `onStop()`（和follow*在前台并与用户交互*“）。`onRestart()``Activity`

 *这张图用不到 1000 个字比我能做到的更准确地解释它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-17T23:54:43.123

最好从相反的函数开始解释这一点：onDestroy 和 onStop。

onDestroy 在 Activity 被处理或关闭时被调用。下次打开时，会调用 onCreate。

每当应用程序消失且不再可见时，就会调用 onStop。这通常是由在旧活动之上创建的新活动引起的。当活动再次可见时，将调用 onStart。

此页面上的图表很好地解释了活动可以处于的各种状态，以及相关的转换方法：http: [//developer.android.com/training/basics/activity-lifecycle/starting.html](http://developer.android.com/training/basics/activity-lifecycle/starting.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T23:57:41.700

几乎。onCreate 通常在应用启动时调用，但也可能在 Activity 因其他原因被销毁/释放时调用。基本上，如果你想为 Activity 做一次设置，你应该重写 onCreate。如果您想在用户每次导航到 Activity 时执行某些操作，您应该覆盖 onStart。如果您想在每次 Activity 变为可见/活动时执行某些操作，请使用 onResume。如果您想为整个应用程序进行一次性设置，即只运行一次，您应该使用 onCreate，但请检查您是否已完成该设置，只有在您没有完成时才这样做。

查看此页面上非常有用的图表：[活动参考](http://developer.android.com/reference/android/app/Activity.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T23:57:18.327

该网站提供了 Android 生命周期的可靠图形表示：http: [//developer.android.com/training/basics/activity-lifecycle/starting.html](http://developer.android.com/training/basics/activity-lifecycle/starting.html)

`onStart()`每当应用程序变得可见时调用。这包括首次创建应用程序的时间以及在未终止的情况下重新显示在屏幕上的时间。当用户切换应用程序并且应用程序位于后台时，会发生第二种行为。当应用程序变得不可见时，`onStop()`被调用，但是当应用程序被完全“销毁”时，`onDestroy()`被调用。调用后`onDestroy()`，必须在生命周期开始时再次创建应用程序。

重要的是要注意，`onStart()`在应用程序由于对话框之类的原因而失去焦点后不会调用它。在这种情况下，在重新获得焦点时`onPause()`调用`onResume()`*

# html - 如何将相邻选择器编辑为嵌套选择器

> ID：12468618
> 
> 赞同：4
> 
> 时间：2012-09-17T23:49:30.753
> 
> 标签：html, css, css-selectors

我有从这个网站借来的自定义单选按钮：http: [//www.inserthtml.com/2012/06/custom-form-radio-checkbox/](http://www.inserthtml.com/2012/06/custom-form-radio-checkbox/)

不幸的是，我正在使用一个有用的插件，我无法轻易修改它在我的 DOM 中使用标签内的嵌套输入填充，这样......

```
<label>
  <input class="regular-radio"> 
```

我想使用选择器`.regular-radio + label`来选择标签。但是，它仅适用于：

```
<input class="regular-radio">
<label> 
```

我在这里展示了我的例子：http: [//jsfiddle.net/BR3MB/](http://jsfiddle.net/BR3MB/)

我如何修改该 CSS 以处理父标签而不是相邻标签？
在这种情况下，我真的很难编辑 DOM，因为已经有很多依赖于该结构。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T23:55:43.733

不幸的是，目前这不能使用 CSS 来完成，因为 CSS 只能从右到左读取。这意味着选择器中最右边的元素将是接收样式的元素，并且最右边的元素必须始终是选择器中它左侧的任何元素的子元素或兄弟元素。对您来说，问题在于您要设置样式的元素是父元素。

作品中有一个父选择器（[http://www.red-team-design.com/css-parent-selector](http://www.red-team-design.com/css-parent-selector)），但在此之前您将不得不求助于使用 JavaScript。

话虽如此，我认为在这种情况下最好的解决方案是将插件的输出更改为更有用的东西（如果可能的话）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T23:54:18.377

遗憾的是，没有用于父样式的 CSS 选择器。获取父样式的唯一方法是通过 Javascript。在 CSS Tricks 上，[Chris Coyier 谈到了](http://css-tricks.com/parent-selectors-in-css/)是否将这个选择器添加到规范中的争论的优点和缺点。就个人而言，我希望它存在，但希望我的代码永远不会工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T23:55:09.797

在 CSS 中选择元素的父级是不可能的。您可能必须使用类似这样的方法来选择它：

```
label:nth-of-type(x) {} 
```

其中 x 是父标签的编号。

# haskell - ST 单子是如何工作的？

> ID：12468622
> 
> 赞同：82
> 
> 时间：2012-09-17T23:49:57.987
> 
> 标签：haskell, monads

我知道 ST monad 有点像 IO 的小兄弟，而后者又是增加了`RealWorld`魔法的状态 monad。我可以描绘状态，并且可以描绘 RealWorld 以某种方式被放入 IO，但每次我编写ST monad 的类型签名时都会让我感到困惑`ST`。`s`

举个例子，`ST s (STArray s a b)`。那里的工作怎么样`s`？它只是用于在计算之间建立一些人为的数据依赖关系，而不能像状态单子中的状态那样被引用（由于`forall`）？

我只是提出想法，非常感谢比我更有知识的人向我解释。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-09-18T00:11:34.673

`s`保持 monad 内部的对象不会`ST`泄漏到`ST`monad 外部。

```
-- This is an error... but let's pretend for a moment...
let a = runST $ newSTRef (15 :: Int)
    b = runST $ writeSTRef a 20
    c = runST $ readSTRef a
in b `seq` c 
```

好的，这是一个类型错误（这是一件好事！我们不想`STRef`泄漏到原始计算之外！）。这是一个类型错误，因为额外的`s`. 请记住，`runST`有签名：

```
runST :: (forall s . ST s a) -> a 
```

这意味着`s`您正在运行的计算必须没有任何限制。因此，当您尝试评估时`a`：

```
a = runST (newSTRef (15 :: Int) :: forall s. ST s (STRef s Int)) 
```

结果将具有 type `STRef s Int`，这是错误的，因为`s`已“逃逸”到`forall`in之外`runST`。类型变量总是必须出现在 a 的内部`forall`，并且 Haskell 允许在任何地方使用隐式`forall`量词。根本没有规则可以让您有意义地找出`a`.

**另一个例子`forall`：**为了清楚地说明为什么你不能让事情逃脱 a `forall`，这里有一个更简单的例子：

```
f :: (forall a. [a] -> b) -> Bool -> b
f g flag =
  if flag
  then g "abcd"
  else g [1,2]

> :t f length
f length :: Bool -> Int

> :t f id
-- error -- 
```

当然`f id`是一个错误，因为它会根据布尔值是真还是假返回一个列表`Char`或一个列表。`Int`这完全是错误的，就像`ST`.

**另一方面，**如果您没有`s`type 参数，那么即使代码显然是非常虚假的，一切都可以进行类型检查。

**ST**的实际工作原理：在实现方面，`ST`monad 实际上与 monad 相同，`IO`但接口略有不同。当您在幕后使用`ST`实际得到的 monad或等效项时。您可以安全地执行此操作的原因是因为所有相关函数`unsafePerformIO`的类型签名，尤其是带有.`ST``forall`

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-09-18T09:18:15.120

The `s` is just a hack that makes the type system stop you doing things which would be unsafe. It doesn't "do" anything at run-time; it just makes the type checker reject programs that do dubious things. (It is a so-called *phantom type*, a thing with only exists in the type checker's head, and doesn't affect anything at run-time.)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-06T09:39:37.320

> 举个例子`ST s (STArray s a b)`：`s`那里的工作如何？

GHCi 会议时间：

```
GHCi, version 8.4.3: http://www.haskell.org/ghc/  :? for help
Prelude> let _ = (\x -> x^4) 5 in x

<interactive>:2:27: error: Variable not in scope: x
Prelude> 
```

*局部变量*的*范围*（或*参考框架*） 是 lambda/匿名函数- 在该范围之外，否则未定义，因此会出现错误。 *`x``\x -> x^4``x`*

 *的类型`runST`：

```
runST :: (forall s . ST s a) -> a 
```

以类似的方式工作：*局部量化*的类型变量的范围`s`是类型`ST s a`（ 的`runST`参数的类型） - 如果`s`出现在结果的类型中，它也超出其范围并且也缺乏合理的定义，导致类型错误。

所以如果你：

*   有行动`m :: ST s (STArray s a b)`

*   并且您无意中尝试从以下位置提取可变数组`m`：

    ```
     … (let arr = runST m in …) … 
    ```

...*逃离*`s`其范围：

```
forall s . ST s (STArray s a) 
```

（以及类型系统对其进行检测）会停止[共享可变状态](https://mb21.github.io/blog/2021/01/23/pure-functional-programming-and-shared-mutable-state.html)，这是众所周知的难以捉摸的错误来源，尤其是在并行性和并发性的上下文中。*

# sql - 加入一对多并检索单个结果

> ID：12468623
> 
> 赞同：16
> 
> 时间：2012-09-17T23:49:59.783
> 
> 标签：sql, postgresql, select, join, one-to-many

我有两个表，如果重要的话，在 PostgreSQL 中，有一对多的关系。我需要加入他们，以便对于每个“一个”，我只能从“许多”表中获得单个结果。不仅如此，我还需要从“许多”表中挑选出具体的结果。

```
表_A
身份证 | 姓名 | 日期 | 更多科尔斯....
1 | 约翰 | 2012-01-10 | ……
2 | 丽莎 | 2012-01-10 | ……
3 | 安妮 | 2012-01-10 | ……
4 | 詹姆斯 | 2012-01-10 | ……
...

表_B
身份证 | 代码1 | 代码2 | 种类
1 | 04020 | 85003 | 1
1 | 04030 | 85002 | 4
2 | 81000 | 80703 | 1
3 | 87010 | 80102 | 4
3 | 87010 | 84701 | 5
4 | 04810 | 85003 | 1
4 | 04030 | 85002 | 4
4 | 04020 | 85003 | 1
...

查询结果
身份证 | 姓名 | 日期 | 代码1 | 代码2
1 | 约翰 | 2012-01-10 | 04020 | 85003
2 | 丽莎 | 2012-01-10 | 81000 | 80703
3 | 安妮 | 2012-01-10 | 87010 | 80102
4 | 詹姆斯 | 2012-01-10 | 04810 | 85003
...

```

TABLE_B 中的 SORT 列实际上是重新排序的 CODE2 中的最后一个字符。CODE2 可以以 1-9 结尾，但 3 最重要，然后是 5、7、4、2、1、0、6、8、9，因此 3-->1、5-->2、7-->3 等等向前。

我面临的问题是我需要 TABLE_B 中排序是最低数字的行。在某些情况下，有多个最小情况（请参阅 TABLE_B 中的 ID=4），那么选择具有最低 ID 的哪一行并不重要，只要该 ID 有一个结果即可。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-18T01:43:28.180

使用 PostgreSQL 更简单、更短、更快`DISTINCT ON`：

```
SELECT DISTINCT ON (a.id)
       a.id, a.name, a.date, b.code1, b.code2
FROM   table_a a
LEFT   JOIN table_b b USING (id)
ORDER  BY a.id, b.sort 
```

[这个密切相关的答案](https://stackoverflow.com/a/7630564/939860)中的详细信息、解释、基准和链接。
我使用 a `LEFT JOIN`，因此不会删除`table_a`没有任何匹配行的行。`table_b`

旁注：

`date`虽然在 PostgreSQL 中被允许，但将其用作列名是不明智的。它是每个 SQL 标准中的[保留字](http://www.postgresql.org/docs/current/interactive/sql-keywords-appendix.html)，也是 PsotgreSQL 中的类型名称。

命名 ID 列也是一种反模式`id`。没有描述性，也没有帮助。一种（许多）可能的命​​名约定是在它是主键的表之后命名它：`table_a_id`. 引用它的外键名称相同（如果没有其他自然名称优先）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-17T23:55:27.770

PostgreSQL 支持**[窗口函数](http://www.postgresql.org/docs/9.1/static/tutorial-window.html)**。尝试这个，

```
SELECT d.ID, d.NAME, d.DATE, d.CODE1, d.CODE2
FROM
(
  SELECT  a.ID, a.NAME, a.DATE,
          b.CODE1, b.CODE2,
          ROW_NUMBER() OVER(PARTITION BY a.ID ORDER BY b.SORT ASC, b.CODE2 DESC) AS ROWNUM
  FROM    TableA a
          INNER JOIN TableB b
            ON a.ID = b.ID
) d
WHERE d.RowNum = 1 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!1/9493d/35)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T00:10:42.090

这是我在 SQL Server 上要做的事情。

```
SELECT a.ID,
    a.NAME,
    a.DATE,
    b.CODE1,
    b.CODE2
FROM TABLE_A a
JOIN TABLE_B b
    on a.ID = b.ID
WHERE b.SORT = (SELECT MIN(SORT) 
    FROM TABLE_B
    WHERE ID = b.ID) 
```

# phpmyadmin - 局域网上的phpMyAdmin连接字符串

> ID：12468626
> 
> 赞同：0
> 
> 时间：2012-09-17T23:50:31.487
> 
> 标签：phpmyadmin

我在地下室的 debian 计算机上使用 php5 运行 phpmyadmin，但我不知道如何更改连接字符串。我刚刚收到错误消息：

> 查询失败：用户 'www-data'@'localhost' 的访问被拒绝（使用密码：否）

这是我在使用 000webhost 作为开发服务器时修改的代码：

```
<?php
$mysql_host = "192.168.1.138";
$mysql_database = "db_main";
$mysql_user = "username";
$mysql_password = "deadmantellnotales";

$con = mysql_connect($mysql_host, $mysql_user, $mysql_password);
mysql_select_db($mysql_database);

?> 
```

我似乎找到的线程都没有 php 解决方案，我在我的谷歌搜索中不断得到 java 结果，清楚地表明 php。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T23:57:54.230

通常，当您尝试不提供密码登录时会出现您给出的错误消息（这就是您看到消息“使用密码 NO”的原因）。

我认为，您正在编辑的脚本不是您尝试运行它时运行的脚本。首先跟踪流程以找出导致此错误消息的脚本并编辑该脚本。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T00:25:34.990

您是否在与 mysql 数据库相同的服务器上运行脚本？如果是这样，那么使用本地主机。如果没有，请使用它的IP。

# jquery - 根据点击了多少是单选框来旋转元素

> ID：12468627
> 
> 赞同：1
> 
> 时间：2012-09-17T23:50:33.440
> 
> 标签：jquery

我正在尝试通过在调查中查找每次单击“是”来旋转“速度计”上的指针，并且对于每次单击，我都想将指针旋转几度，但我不准确知道如何获得这种效果。这就是我得到的：

```
jQuery('input[value="Yes"]').on('click', function (){

        jQuery('#progress').animate( marginBottom: +=4 }, 
        {
            step: function(now,fx) {
                jQuery(this).css('-webkit-transform','rotate('+now+'deg)'); 
                };  

        }); 
```

CSS：

```
#progress{
top: 78px;
left: 34px;
height: 0px;
width: 130px;
position: relative;
border: 2px solid #232323;
border-radius: 2px;
-webkit-transform: rotate(7deg); 
```

}

这是小提琴：http: [//jsfiddle.net/pTkkS/2/](http://jsfiddle.net/pTkkS/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T00:10:14.053

## *[jsFiddle](http://jsfiddle.net/pTkkS/6/)*

```
$('input[value=Yes]').on('change', function() {
    $('#progress').animate(
        {
            marginBottom: '+=4'
        },{
            step: function(now, fx) {
                $(this).css({transform: 'rotate(' + now + 'deg)'});
        }
    });
}); 
```

# bash - lsof 应该为一组 pid 提供所有打开的文件

> ID：12468629
> 
> 赞同：13
> 
> 时间：2012-09-17T23:51:10.520
> 
> 标签：bash, shell, scripting, freebsd, lsof

我有 30 个在服务器上运行的进程实例，并希望记录每个进程的打开文件以进行分析。

我运行了以下命令：

```
* ps auwwx | grep PROG_NAME | awk '{print $2}' | xargs lsof -p | less 
```

它抱怨说，*“lsof：状态错误：没有这样的文件或目录”*

但是，如果我运行`lsof -p < pid >`它，它会给我该进程的打开文件列表。如何获取 FreeBSD 机器上所有 30 个进程实例的所有打开文件的列表。

此外，我不希望列出共享库。如果我这样做`-d "^txt"`，它不会显示我想要显示的其他一些数据库文件。有没有其他方法可以 grep 出 .so 文件？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-18T00:18:17.757

该`lsof -p`选项采用逗号分隔的 PID 列表。您使用的方式`xargs`将 pids 作为单独的参数传递，导致一些被解释为文件名。

尝试`lsof -p $(your grep | tr '\012' ,)` 这将有一个尾随逗号，我不确定是否`lsof`会在意，但`sed`如有必要，您可以将其关闭。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-18T00:19:13.817

您可以使用每个 pid`xargs -L1 lsof -p`运行一次。`lsof`

更好的是：用于`lsof -c`从与特定模式匹配的命令中列出所有打开的文件：

```
lsof -c bas # list all processes with commands starting with 'bas'
lsof -c '/ash$/x' # list all commands ending with 'ash' (regexp syntax) 
```

# mysql - 为什么我在尝试从 EC2（都在 us-west 上）连接到 RDS 时看到“SSL 连接错误”？

> ID：12468631
> 
> 赞同：1
> 
> 时间：2012-09-17T23:51:32.917
> 
> 标签：mysql, ssl, amazon-ec2, amazon-rds

我在 us-west 上创建了一个新的多可用区 RDS 实例，**并将**我的一个 EC2 实例（也在 us-west 上）的私有和公共 IP 地址添加到其安全组中。

我尝试通过以下`mysql`命令进行连接：

```
mysql -h [RDS Endpoint] -P 3306 -u admin -p 
```

但我看到以下错误：

```
ERROR 2026 (HY000): SSL connection error 
```

事实证明，RDS 实例恰好位于**us-west-1c**可用区，而我尝试连接的 EC2 实例位于**us-west-1b**中。因此，我尝试从 1c 中的不同 EC2 实例进行连接，果然成功了。

*但是*，当我尝试对 us-west-1b 进行同样的操作时（即，在 1b 上创建一个 RDS 实例，然后尝试从 1b 上的 EC2 实例连接到它），这*并没有*奏效。

所以：

```
EC2 Instance AZ | RDS Instance AZ | Success?
----------------+-----------------+---------
us-west-1c      | us-west-1c      | Yes
us-west-1b      | us-west-1c      | No
us-west-1b      | us-west-1b      | No 
```

我真的在这个问题上摸不着头脑。如果这个问题有点难以理解，我深表歉意；真的，我只是希望其他人也遇到过同样的问题并已经解决了。如果是这样，请分享您来之不易的知识！

# windows - OpenSUSE Apache - Windows LDAP - 组用户认证 - Mercurial

> ID：12468634
> 
> 赞同：0
> 
> 时间：2012-09-17T23:52:31.267
> 
> 标签：windows, apache, mercurial, ldap, suse

*   操作系统：OpenSUSE Linux
*   版本控制：Mercurial Hg
*   网页前端：Apache2.2

我可以点击浏览 http://servername:port/hg

当我单击它时，它会提示我输入 Windows AD 目录凭据。

现在，我在 /srv/www/htdocs/hg/repos 文件夹中有以下存储库：

*   回购项目A
*   回购项目B
*   回购项目C

单击上面的存储库链接就可以了，因为我可以看到 Hg 前端。

# 现在，我想添加身份验证和授权，以便：

*   一个）

    *   只有用户“c123456”、“c654321”可以提交 RepoProjectA 中的文件。
    *   只有用户“c222222”和“c333333”可以推送更改，其他人不能推送

    对于上述内容，我需要更改哪些文件 (???) 以及我应该添加哪些更改/条目来实现这一点。

    PS：我使用 LDAP 作为使用 Windows Active Directory 的身份验证。我是否仍然需要使用 htpasswd2 或 htdigest2 模块来创建任何用户文件——或者为了授予对组的访问权限，创建任何组文件？？？？我认为，可以从 Active Directory 中已有的内容中获取这些组。由于这些是不同的项目存储库，我需要单独的 .htaccess 文件吗？一个全局文件就不能解决问题吗？

*   二）

    *   只有用户“u123456”和“u654321”可以在 RepoProjectB 的分支“branch1”上提交文件。（假设我们在 RepoProjectB 中有一个分支“branch1”）。
    *   只有用户“u222222”和“u333333”可以推送文件
    *   没有人可以在 TRUNK/default 分支上提交/推送任何内容
    *   例外：“RepoProjectB-GROUP”或“ABCDGroup”组中的每个人都可以在此存储库或其分支中执行任何操作。

对于上述内容，我需要更改哪些文件 (???) 以及我应该添加哪些更改/条目来实现这一点。

*   C) 我尝试在我的 Windows 客户端机器上使用 CMD 提示符和实用程序 TortoiseHg，同时在 Hg 中执行任何操作（克隆、分支、添加、提交、推送等），每次都会提示我提供用户名和密码。它正在工作，但我在 Hg 中的每一个动作都会得到提示。

    如何限制让用户在每个会话中仅提供一次 Windows Active Directory 凭据。

任何人都可以放一些光。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T02:18:50.810

在 mercurial 密钥环方面取得了一些进展，接下来我要做的是开始使用更细粒度的组并以 Directory 指令方式允许/拒绝。

更多相关信息在：

```
http://stackoverflow.com/questions/14267873/mercurial-hg-no-changes-found-cant-hg-push-out/14269997#14269997
http://www.linuxquestions.org/questions/showthread.php?p=4867412#post4867412
http://stackoverflow.com/questions/12503421/hg-push-error-and-username-not-specified-in-hg-hgrc-keyring-will-not-be-used/14270602#14270602
http://stackoverflow.com/questions/12468634/opensuse-apache-windows-ldap-group-user-authentication-mercurial/14270648#14270648 
```

如果在 mercurial 中多次提示用户凭据。设置 Mercurial_Keyring 然后

这个问题来了，没有人以简单的方式解释。

？？？--如果我使用服务器名、服务器名的 IP 或服务器名的 FQDN，如何使

**[auth]**
*xx.prefix = servername/hg_or_something对服务器名/hg 位置下的所有存储库起作用？*

答案：Arun • 2 分钟前 -</p>

```
OK, I put this in ~/.hgrc (Linux/Unix -home directory's .hgrc hidden file) or Windows users %UserProfile%/mercurial.ini or %HOME%/mercurial.ini file.

[auth]
default1.schemes = http https
default1.prefix = hg_merc_server/hg
default1.username = c123456

default2.schemes = http https
default2.prefix = hg_merc_server.company.com/hg
default2.username = c123456

default3.schemes = http https
default3.prefix = 10.211.222.321/hg
default3.username = c123456

Now, I can checkout using either Server/IP/Server's FQDN. 
```

# python - wxPython 应用程序在执行期间冻结

> ID：12468644
> 
> 赞同：2
> 
> 时间：2012-09-17T23:53:31.917
> 
> 标签：python, wxpython

我正在使用 python 2.7 和 wxpython 2.8 创建一个应用程序，它应该在文件列表上执行一个长循环（几个小时）。

我编写了一个按钮，当我按下它时应该会中断循环，但是在我启动应用程序的那一刻，它会冻结，并且在循环结束之前我无法以任何方式进行交互。我还尝试添加一小段睡眠时间`time.sleep`，最多 1 秒，这对速度非常不利，并且不能解决问题。

有没有办法“在后台”运行这个循环，这样用户仍然可以修改一些参数，更重要的是停止循环？

我可以说循环不需要很多资源，它只需要很多时间，所以我不明白为什么它会冻结。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T03:58:29.277

在此类问题的标准解决方案中使用线程。进程和事件下的 wxPython 演示 | Threads 有一个使用线程的工作示例。

从 wxPython（和大多数其他 gui）运行线程时存在一些问题，因此您可能需要阅读示例中的注释，并且可能需要阅读 wiki 以了解正在发生的事情等。特别是，wxPython 需要从主线程，所以你的文件处理在不同的线程中，然后你的文件处理应该使用类似 wx.PostEvent 或 wx.CallAfter 的东西与主线程进行通信。

# node.js - 让永远识别重启更快

> ID：12468645
> 
> 赞同：2
> 
> 时间：2012-09-17T23:53:42.280
> 
> 标签：node.js, forever

我在开发过程中一直使用我的 node.js 站点，以便它在特定代码更改时重新启动站点。永远识别文件已更改并且需要重新启动有点慢。我怎样才能让它更快地检测到呢？

顺便说一句，node-supervisor 的工作速度要快得多，但由于不同的原因我不能使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T07:23:08.320

为了使其更快，请尝试减少“永远”必须监视的文件数量。

创建一个名为 .foreverignores 的文件，它类似于 .gitignore
里面 .foreverignores 添加所有你可以特别忽略的文件夹

```
node_modules/ 
```

另一种解决方案是只看一个文件，例如

```
forever -w app.js app.js 
```

这取决于您的需求。

# java - 在 JPanel 之间切换

> ID：12468654
> 
> 赞同：3
> 
> 时间：2012-09-17T23:54:34.807
> 
> 标签：java, arraylist, jframe, jpanel, visible

我正在尝试制作游戏。游戏中有几个不同的屏幕，例如主菜单和实际游戏屏幕。其中每一个都是一个单独的 jpanel 扩展。我已将它们中的每一个添加到我的 JFrame 中，这是一个名为 Game 的类。在我的游戏课中，我有以下方法

```
public void addPanel( JPanel p ) {
    panels.add( p ); // An array of all the different panels I need
    this.getContentPane().add( p );
}

public void switchToPanel( JPanel p ) {
    for ( JPanel somePanel : panels ) {
        somePanel.setVisible( false );
    }

    p.setVisible( true );
    repaint();
} 
```

重点是我有许多不同的面板，当我需要显示一个特定的面板时，例如菜单屏幕，我调用 switchToPanel(myPanel)。基本上只是隐藏每个面板，然后取消隐藏我需要查看的面板。唯一的问题是这些面板在我切换到它们时没有出现。唯一会出现的是我最后添加的面板。在Objective CI中，一直使用这种技术在视图之间切换，我从来没有遇到过任何问题。java中不允许这种事情吗？

编辑：现在我在切换后调用 repaint() ，但它仍然无法正常工作

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T23:59:32.173

你可以做很多不同的事情来达到同样的效果。

我提出的第一个建议是使用[CardLayout](http://docs.oracle.com/javase/7/docs/api/java/awt/CardLayout.html)（[如何使用 CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)），因为这是它的设计目的。

另一种是使用[JTabbedPane](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTabbedPane.html)（[如何使用选项卡式窗格](http://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T02:55:10.720

If you are making a game, you make it in a separate thread different from the `EDT`. Most games show different screens by not changing panels but they use a single panel, on which they render according to `GameState`.

Here's an example.

```
public class MyGame extends JPanel implements Runnable {

    public static enum GameState {
        MENU, INTRO, LEVELS, END, TITLES
    }

    GameState state = GameState.MENU;

    public MyGame(){
        setDoubleBuffered(true);
        // Initialize the resources
        new Thread(this).start();
    }

    public void update(long elapsedTime){
        switch (state){
            case MENU:
                // Show the menu
                break;
            ....
        }
    }

    private void GameLoop(){
        // Game Loop goes here
    }

    public void run(){
        GameLoop();
    }

    public void paint(Graphics g){
        // switch and draw your game
    }

    public static void main(String[] args){
        JFrame f = new JFrame("MyGame");
        f.setSize(640, 480);
        f.add(new MyGame());
        f.setVisible(true);
    } 
```

}

If one state ie., a menu completed, change the `state` variable. And first learn using a `GameEngine` before you make it on your own.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-18T03:48:41.797

如果要在两个面板之间切换，请将这些面板添加到另一个 JPanel 并使用 cardLayout。然后，在添加之前`JPanel`删除当前的。像这样：

```
parentPanel.removeAll();
parentPanel.repaint();
parentPanel.revalidate();

parentPanel.add(childPanel1);
parentPanel.repaint();
parentPanel.revalidate(); 
```

同样对其他子面板做同样的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-28T09:01:02.200

```
 public static void main(String[] args) {
        JFrame jFrame = new JFrame("Test");
        jFrame.setSize(500, 500);
        jFrame.setLocationRelativeTo(jFrame.getOwner());
        jFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        jFrame.setLayout(new BorderLayout());
        var jPanel = new JPanel(new BorderLayout());

        jFrame.add(jPanel, BorderLayout.CENTER);

        AtomicBoolean b = new AtomicBoolean(false);

        jFrame.add(new JButton("Switch") {
            {
                addActionListener(e -> {
                    b.set(!b.get());

                    jPanel.removeAll();
                    jPanel.repaint();
                    jPanel.revalidate();

                    jPanel.add(b.get() ? new JPanel() {
                        @Override
                        protected void paintComponent(Graphics g) {
                            setBackground(Color.RED);
                            super.paintComponent(g);
                        }
                    } : new JPanel() {
                        @Override
                        protected void paintComponent(Graphics g) {
                            setBackground(Color.GREEN);
                            super.paintComponent(g);
                        }
                    });
                    jPanel.repaint();
                    jPanel.revalidate();

                });
            }
        }, BorderLayout.SOUTH);

        jFrame.setVisible(true);
    } 
```

# html - Rails 如何从用户输入的 url 解析链接标签

> ID：12468657
> 
> 赞同：0
> 
> 时间：2012-09-17T23:54:42.763
> 
> 标签：html, ruby-on-rails, ruby, ruby-on-rails-3

我希望能够查看用户输入的 url 上的页面是否包含类似于以下内容的内容：

```
<link rel="alternate" type="application/rss+xml" ... href="http://feeds.example.com/MyBlog"/> 
```

这样我就可以消除一种解析 atom 或 rss feed url 的选项。

有什么好的方法吗？我是否必须让我的服务器解析用户 url 的整个 html 并通过所有这些？

我需要在解析后使用变量中的 url

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T00:17:36.787

您可以使用 Nokogiri gem - [http://www.nokogiri.org/](http://www.nokogiri.org/)

这是使用他们的 css 样式文档搜索语法的示例：

```
require 'nokogiri'
require 'open-uri'

document = Nokogiri::HTML(open('http://www.example.com/'))
rss_xml_nodes = doc.css('link[rel="alternate"][type="application/rss+xml"]')
rss_xml_hrefs = rss_xml_nodes.collect { |node| node[:href] } 
```

rss_xml_nodes 将包含 Nokogiri XML 元素的数组

rss_xml_hrefs 将包含一个字符串数组，其中包含节点的 href 属性

```
rss_xml_nodes.empty?
=> false

rss_xml_hrefs
=> ["http://www.example.com/rss-feed.xml", "http://www.example.com/rss-feed2.xml"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T01:34:15.390

我相信您确实必须解析所有内容，因为除了通过单个 http 请求获取所有内容之外，没有其他方法可以获取任何内容。为此，您可以使用 Ruby 的 Net:HTTP 类，如下所示：

```
require 'net/http'

url = URI.parse('http://www.example.com/index.html')
req = Net::HTTP::Get.new(url.path)
res = Net::HTTP.start(url.host, url.port) {|http|
  http.request(req)
}

# regex below grabs all the hrefs on link tags
# print all the matches
res.body.scan(/<link[^>]*href\s*=\s*["']([^"']*)/).each {|match| 
  puts match
} 
```

# c# - 以编程方式将控件添加到 WPF 4.5 中的 Grid RowDefition

> ID：12468658
> 
> 赞同：19
> 
> 时间：2012-09-17T23:54:56.133
> 
> 标签：c#, .net, wpf, xaml, .net-4.5

我已经通过这个网站（和许多其他网站）试图弄清楚发生了什么以及为什么这不起作用。我正在运行 VS2012 并创建了一个 WPF C# 应用程序（目标 .NET 4.5）。我是 WPF 新手，已经花了很多年编写 Windows 窗体应用程序的代码，但我决定冒险一试，到目前为止我很喜欢 XAML。

最终我想：1）删除我网格中特定行（RowDefinition）中的用户控件 2）在该特定行中放置另一个用户控件

但是我似乎无法放置一个简单的按钮控件。我想要做的是在第 4 行放置一个按钮（3 个零索引）。这是我的 XAML：

```
<Window
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:Custom="http://schemas.microsoft.com/winfx/2006/xaml/presentation/ribbon"
x:Class="TestApp2_WindowsClient.MainWindow"
Title="Test App 2" Height="700" Width="1000" MinHeight="700" MinWidth="1000" MaxHeight="700" MaxWidth="1000" FontSize="12" FontFamily="Segoe UI Semibold">
<Grid VerticalAlignment="Top" Name="gridMain">
    <Grid.RowDefinitions>
        <RowDefinition Height="60"/>
        <RowDefinition Height="152"/>
        <RowDefinition Height="240"/>
        <RowDefinition Height="60"/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="0"/>
    </Grid.ColumnDefinitions>

<StackPanel Name="stackButtons1" HorizontalAlignment="Left" Height="50" Margin="4,4,-310,4" Grid.Row="0" VerticalAlignment="Top" Width="300" Orientation="Horizontal" >
        <Button Content="Show Bookings" Height="24" Margin="4,0,0,0" Click="Button_Click_1" />
        <Button Content="Show Radio Buttons" Height="24" Margin="4,0,0,0" Click="Button_Click_2" />
    </StackPanel>

</Grid>
</Window> 
```

按钮代码（堆栈面板中的第一个按钮）是：

```
Button MyControl = new Button();
MyControl.Content = "Test Button!";

Grid.SetRow(MyControl, 3); 
Grid.SetColumn(MyControl, 0); 
gridMain.Children.Add(MyControl); 
```

我可以看到（在我的手表中）每次单击第一个按钮时 gridMain.Children 计数值都会增加，但屏幕上什么都没有出现。

这可能真的很愚蠢，但是几个小时的搜索和尝试一堆不同的代码并没有帮助。

提前致谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-18T00:11:22.693

```
<ColumnDefinition Width="0"/> 
```

如果您增加宽度，也许您可​​以看到按钮。

# javascript - Javascript StackOverflow 错误

> ID：12468659
> 
> 赞同：1
> 
> 时间：2012-09-17T23:55:02.827
> 
> 标签：javascript, class, stack-overflow

我希望我能得到一些帮助，弄清楚为什么我的一些代码会导致堆栈溢出。

有问题的代码：

```
var ClassCreator = {
    create: function(class_object,ParentClass){
        var created_class = null;

        created_class = function(){        
            if(arguments.length == 0){
                this.constructor();
            }else{
                this.constructor.apply(this,arguments);
            }        
        };

        this._grantInheritance(created_class,ParentClass);
        this._grantMethods(created_class,class_object);    

        return created_class;
    },

    _grantInheritance: function(created_class,ParentClass){
        if(ParentClass){
            created_class.prototype = ParentClass.prototype;
            created_class.prototype.BaseClass = ParentClass;
        }
    },

    _grantMethods: function(created_class,creation_object){
        //If there's no constructor provided, add a default constructor.
        if(!creation_object.constructor){
            creation_object.prototype.constructor = function(){};
        }

        //Add the creation_object's methods to the class we're creating.
        for(var property in creation_object){
            created_class.prototype[property] = creation_object[property];
        }
    }
};

var SuperSuperObject = ClassCreator.create({
    constructor: function(){
        document.write("Hello");
    }
});

var SuperObject = ClassCreator.create({
    constructor: function(){
        this.BaseClass.call(this);

        document.write(" ");
    }
},SuperSuperObject);

var RegularObject = ClassCreator.create({
    constructor: function(){
        this.BaseClass.call(this);

        document.write(" World");
    }
},SuperObject);

var test = new RegularObject();​ 
```

据我了解，当我在 RegularObjects 构造函数中调用 this.BaseClass.call 时，它会再次尝试调用 RegularObjects 构造函数，从而导致堆栈溢出。为什么它调用RegularObject 的构造函数而不是SuperObject 的构造函数，我不知道。有任何想法吗？

* * *

**编辑**：我的解决方案，以防将来有人会喜欢它：

```
var ClassCreator = {
    __PROTOTYPE_CONSTRUCTOR_SIGNAL__:  "1821fe18a870e71b29a6219e076b80bb",

    create: function(class_object,ParentClass){
        var created_class = null;

        created_class = function(){
            var call_class = null;

            if(arguments.length == 1){
                if(arguments[0] == ClassCreator.__PROTOTYPE_CONSTRUCTOR_SIGNAL__){
                    if(this.prototypeConstructor){
                        this.prototypeConstructor();
                    }

                    return;
                }
            }

            if(!this.__construct_stack){
                this.__construct_stack = 0;
            }
            call_class = this;
            for(var counter = 0;counter<this.__construct_stack;counter++){
                call_class = call_class.BaseClass.prototype;
            }
            this.__construct_stack++;

            if(arguments.length == 0){
                call_class.constructor.call(this);
            }else{
                call_class.constructor.apply(this,arguments);
            }

            return this;
        };

        this._grantInheritance(created_class,ParentClass);
        this._grantMethods(created_class,class_object); 

        return created_class;
    },

    _grantInheritance: function(created_class,ParentClass){
        if(ParentClass){
            created_class.prototype = new ParentClass(this.__PROTOTYPE_CONSTRUCTOR_SIGNAL__);
            created_class.prototype.BaseClass = ParentClass;
        }
    },

    _grantMethods: function(created_class,creation_object){
        //If there's no constructor provided, add a default constructor.
        if(!creation_object.constructor){
            creation_object.prototype.constructor = function(){};
        }

        //Add the creation_object's methods to the class we're creating.
        for(var property in creation_object){
            created_class.prototype[property] = creation_object[property];
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T03:10:21.677

## 问题

在RegularObject 的构造函数中，您将其BaseClass 方法的上下文设置为RegularObject。现在，当您进入 SuperObject 的构造函数时，“ **this** ”将引用 RegularObject（您刚刚来自的同一对象），然后您将再次调用 RegularObject 的 BaseClass 方法（使其与`this.BaseClass.call(this);`RegularObject 的构造函数中的相同）。而且因为您再次使用相同的对象“调用” BaseClass，您会得到一个 stackoverflow / 无限循环。

不是最好的解释，但也许一些例子会有所帮助......

**例子**

这是一个简化的代码块，突出显示正在发生的事情

小提琴：http: [//jsfiddle.net/GVkDv/1/](http://jsfiddle.net/GVkDv/1/)

```
var base = function(){
    //"this" now references the object we just came from along with it's methods 
    //and properties. 
    this.BaseClass.call(this); 
}

base.prototype.BaseClass = function(){ alert('made it to the base'); }

var derived = function(){
    alert('About to stackoverflow'); 
    this.BaseClass.call(this);//"call" keeps the context to the object we're on 
}

derived.prototype = new base(); //construct base the first time. 1st Alert.
derived.prototype.BaseClass = base; 

var x = new derived(); ​ 
```

## 解决方案

要修复它，您需要维护一个上下文对象来引用继承的基类的实例。

**例子：**

小提琴：http: [//jsfiddle.net/bboone/GVkDv/6/](http://jsfiddle.net/bboone/GVkDv/6/)

```
var superbase = function(){
    var ctx = this; //maintain context of the initialized prototype object

    this.init = function(){
        alert('superbase'); 
    };

    this.init(); 
}

var base = function(){
    var ctx = this; //maintain context of the initialized prototype object

    this.init = function(){
        //ctx and this are referencing different objects
        ctx.BaseClass.init.call(this); 
    };

    this.init(); 
}

base.prototype = new superbase(); //construct superbase the first time. 1st Alert.
base.prototype.BaseClass = base.prototype;    

var derived = function(){
    var ctx = this; 

    this.init = function(){
        //ctx and this are referencing different objects
        ctx.BaseClass.init.call(this); 
    };

    this.init(); 
}

derived.prototype = new base(); 
derived.prototype.BaseClass = derived.prototype; 

var x = new derived(); 
x.init(); //call all the way down the inheritance chain. 
```

我应该指出有很多有据可查/经过审查的继承模式。

一些例子：

*   John Resig -[简单的 JavaScript 继承](http://ejohn.org/blog/simple-javascript-inheritance/)
*   Douglas Crockford - [JavaScript 中的经典继承](http://www.crockford.com/javascript/inheritance.html)

# php - mysql结果的php分页

> ID：12468670
> 
> 赞同：0
> 
> 时间：2012-09-17T23:56:23.010
> 
> 标签：php, mysql, pagination

我知道我可能会再问一次，但我尝试了分页上可用的问题，但无法正确理解 dem ...需要知道对以下查询结果进行分页的方式：

```
$query = "SELECT * FROM info WHERE Cat1 = 'novel'";
$result = mysql_query($query);
if (!$result) die ("DAtabase acces faild bc : ". mysql_error());

echo " <ul class=listbkwide2>";

while($data = mysql_fetch_object($result))
{
$id = $data->id;
$name = $data->Bname ;
$continent = $data->Bauthor;

    echo "  <li class=bkd><a href='details.php?bid=$id'> 
         <img src='images/sbs/$name.jpg'  title='$name' alt=''>
      <ul class=showcasetitle> <span> $name </span> </ul>
       <p class=authname> By    <span> $continent</span></p>  
      ";
}
echo " </ul> ";
ini_set('display_errors', '1');
mysql_close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T00:18:08.140

您需要维护偏移量，然后`LIMIT`在查询中添加一个子句。

```
[LIMIT {[offset,] row_count | row_count OFFSET offset}] 
```

请参阅[文档](http://dev.mysql.com/doc/refman/5.0/en/select.html)。

# db2 - DB2 - 将模式从 v9.5 迁移到 v10.1

> ID：12468675
> 
> 赞同：0
> 
> 时间：2012-09-17T23:57:39.983
> 
> 标签：db2

我在 DB2 v9.5 数据库中有一个模式，它下面有 20 个表。现在我需要将这个模式下的所有表迁移到一个新的 DB2 v10.1 数据库。实现这一目标的最简单方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:16:13.000

截至目前，我正在使用 db2move 导出/导入在两组表（v9.5 和 v10.1）之间移动数据

谢谢，奈杜

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:57:58.523

IBM 在信息中心有一个[升级指南](http://publib.boulder.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.qb.upgrade.doc/doc/c0023662.html)，其中包含从较低版本升级到 DB2 v10.1 所需的所有步骤（我猜你在这里使用的是 Linux/Unix/Windows，因为你说的是​​从 9.5 升级到 10.1） .

# uialertview - iOS6 中 UIAlertView 上的 EXC_BAD_ACCESS 代码 2

> ID：12468677
> 
> 赞同：43
> 
> 时间：2012-09-17T23:57:42.623
> 
> 标签：uialertview, exc-bad-access, ios6, xcode4.5

我试图弄清楚为什么我的应用程序会崩溃。

它在带有 ios5.1 的模拟器中运行的 Xcode 4.4 中运行良好，但是当我切换到 xcode 4.5 和 ios6 时，我得到一个 EXC_BAD_ACCESS 代码 2。这是我的代码：

```
- (void) myMethod
{
    UIAlertView *alertview = [[[UIAlertView alloc]initWithTitle:@"Title" message:@"message" delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil] autorelease];
    alertview.tag = 1
    [alertview show];
} 
```

这给了我一个 EXC_BAD_ACCESS 代码 2 就`[UIAlertView show]`行了

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-09-18T11:12:09.823

我懂了。我有同样的问题，在我的情况下，似乎该方法现在是从后台抛出的（现在在 ios7 中，在 ios6 中 UIAlertView 自动放入主线程，正如@nodepond 所说-谢谢！-）..

尝试确保从主线程显示该方法：

```
[alertView performSelectorOnMainThread:@selector(show) withObject:nil waitUntilDone:YES]; 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-21T02:23:52.430

它发生在我身上，即使在 2014 年也是如此。问题是想要使用已经发布的对象。

我做错了什么：

```
//class B with UIAletViewDelegate

-(void) showAlert{
 UIAlertView * alert = [[UIAlertView alloc] initWithTitle bla bla...];
 [alert show];
}

//class A
viewDidLoad{
 MyClassB *B = [[B alloc] init];
 [B showAlert];
} 
```

什么是正确的方法：

```
//Class A
@implementation A{
    ClassB *B;
}

 viewDidLoad{
     B = [[B alloc] init];
     [B showAlert];
 } 
```

# xsd - 使子标签依赖于 XML Schema 中父级的属性

> ID：12468681
> 
> 赞同：0
> 
> 时间：2012-09-17T23:58:10.660
> 
> 标签：xsd

我创建了一个如下所示的 XML 文件

```
 <monitor>
    <widget name="Widgets/TestWidget1">
        <state code="VIC" />
        <state code="TAS" />
    </widget>
    <widget name="Widgets/TestWidget2">
        <client code="someclient" />
    </widget>
  </monitor> 
```

标记的 name 属性`<widget>`告诉解析器要加载什么小部件（它们是 asp.net 用户控件）。

我正在尝试为上述创建一个模式文件，问题是`<widget>`支持的子标签内部依赖于 name 属性。所以 TestWidget1 支持`<state>`标签，TestWidget2 支持`<client`标签。

目前我的 XML Schema 文件只显示所有可能的`<widget>`子标签，无论它们是否受支持。

如何编写一个仅允许基于名称属性的特定子标签的 XML 模式文件？如果这是不可能的，我有什么选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:28:37.837

You have several options. The simplest and most direct is to re-think your problem a bit. If the legal content of element E1 and the legal content of element E2 are different, then the simplest design is to call them different things, because in XSD as in DTDs the legal content of an element depends on the element type name. A devil's advocate would ask you "if you want different kinds of widget to obey different rules, why are you telling the validator that they are the same kind of widget? Tell the validator the truth, by giving them different names. So don't call them and so on, call them and ."

In XSD 1.1 you can also use conditional type assignment or assertions to define constraints on the legal combinations of attributes and children, but not every schema-aware editor is going to have the chops necessary to analyse the conditional type assignment rules and attributes and understand what to prompt you with.

# arduino - Arduino“avrdude”错误

> ID：12468683
> 
> 赞同：1
> 
> 时间：2012-09-17T23:59:06.650
> 
> 标签：arduino

我一直在使用带有 Arduino Uno 芯片的 Arduino 系统，但最近遇到了一个我无法解决的问题。问题是每当我尝试将新程序上传到我的芯片时，我都会收到以下错误：

```
avrdude: stk500_getsync(): not in sync: resp=0x00 
```

我做了一些研究，我已经尝试了人们建议的一切。我检查了 COM 端口，检查了芯片类型，检查了组件安装，更新了 FTDI 驱动程序，点击了重置按钮，尝试了最新的 Arduino 软件，是的，我什至确保板子已插入计算机。

今年早些时候，我将代码上传到我的开发板完全没有问题，自从我上次尝试以来几乎没有任何改变。唯一改变的是我用来上传程序的电缆，我也尝试了几种不同的电缆。会不会只是一批坏电缆？这似乎不太可能。我也尝试将代码上传到不同的板上，结果相同。

这让我很沮丧，因为我真的很想继续我的项目。但是，如果我什至不能打印“Hello World！”，那将不会发生。到串行监视器。我在 32 位 Windows 7 机器上运行。任何解决此问题的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:02:42.957

如果您希望使用串行进行正常上传，则应确保您的首选项未设置为“使用编程器上传”，并且您没有从任何 Arduino 菜单中选择“使用编程器上传”。

编辑

如果您没有覆盖编程器，那么您必须在工具菜单板列表中选择了错误的板。`lpt1`错误消息中的内容不是 Uno 使用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:29:25.510

事实证明，问题出在我使用的 FTDI 电缆上。我尝试了一堆不同的电缆，直到找到一个可以工作的电缆，现在上传没有任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-06T05:09:04.033

检查您在 tools-> board 中选择的板。如果您选择了错误的电路板错误如上所示。如果选择了正确的板仍然得到相同的错误，那么它肯定是引导加载程序崩溃错误。您需要上传引导加载程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-22T12:52:05.233

有时零件连接到数字引脚 0 和 1。这些零件会干扰计算机和 arduino 之间的通信，所以我推荐这个程序。

1.  检查是否有东西连接到 D0 和 D1。

2.  如果连接了某些东西，请拔下它们。

3.  上传草图。

4.  在步骤 2 中拆下的插头部件。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-03-05T23:22:15.467

你的 arduino 可能不是 uno，把 board 换成 Duemilanove。

# objective-c - 在 UIImageView 上点击手势事件未触发

> ID：12468684
> 
> 赞同：1
> 
> 时间：2012-09-17T23:59:15.237
> 
> 标签：objective-c, ios

我正在尝试在 UIImageView 上实现轻击手势识别器。但是我无法让处理点击事件的方法触发。我已经将我的代码与 stackoverflow 上许多类似问题的答案进行了比较，但问题仍然存在。以下是我的应用程序中的相关代码。有人可以告诉我我做错了什么吗？

视图控制器.h

```
IBOutlet UIImageView *topLeftImage;

-(IBAction)handleSingleTap:(UITapGestureRecognizer*)gestureView; 
```

视图控制器.m

```
- (void)viewDidUnload
{
    [super viewDidUnload];

    UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)];
    topLeftImage.userInteractionEnabled = YES;
    [topLeftImage addGestureRecognizer:singleTap];

}

- (void)handleSingleTap:(UITapGestureRecognizer *)gestureRecognizer {

    NSLog(@"Tap detected.  Booyah!");
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T00:11:48.353

试试这个。你把你的代码放在 viewDidUnload 里，完全放错地方了。你想要 viewDidLoad。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)];
    topLeftImage.userInteractionEnabled = YES;
    [topLeftImage addGestureRecognizer:singleTap];

} 
```

# node.js - 使用 node.js + perfectapi 针对 MongoDB 的服务器端 API

> ID：12468687
> 
> 赞同：0
> 
> 时间：2012-09-17T23:59:43.530
> 
> 标签：node.js, mongodb

如何使用[node.js](http://nodejs.org) + [perfectapi针对](http://perfectapi.github.com/node-perfectapi)[MongoDB](http://www.mongodb.org)创建服务器端 API ？

我因此设置了一个 Mongo 数据库：

```
dbpath = /Users/me/srv/db
bind_ip = 127.0.0.1
noauth = true
verbose = true 
```

一个像这样的完美api脚本srv.js：

```
var mongo = require('mongodb'), Server = mongo.Server, Db = mongo.Db;
var db = new Db('timedb',new Server('localhost',27017,{auto_reconnect:true},{}));

db.open
(
    function(error,unused)
    {
        if(error) console.log("Cannot connect to database.");
        else console.log("We are now connected to the database.");
    }
);

var perfectapi = require('perfectapi');
var path = require('path');
var configPath = path.resolve(__dirname,'api.json');
var parser = new perfectapi.Parser();

parser.on
(
    "create",
    function(config,callback)
    {
        console.log(config)
        db.collection
        (
            'times',
            function(error,collection)
            {
                if(error) 
                {
                    console.log("Error in collection");
                    callback(error);
                }
                else
                {
                    console.log(config.options.time);
                    console.log("Success in collection");
                    collection.insert
                    (
                        config.options,
                        {safe:true},
                        function(error,callback)
                        {
                            if(error) console.log("Error inserting: "+error);
                            else
                            {
                                db.close();
                                callback(null,{"guid":"123"});
                            }
                        }
                    );
                }
            }
        );
    }
);

module.exports = parser.parse(configPath); 
```

和这样的 api.json：

```
{
    "exports":"srv",
    "path":"api/v1",
    "signature":
    [
        {
            "name":"create",
            "synopsis":"Create a new record.",
            "verb":"POST",
            "options":
            [
                {"option":"time","required":true}
            ],
            "returns":
            [
                {"name":"guid","description":"The ID of the new record."}
            ]
        }
    ]
} 
```

当我运行它时

```
node srv.js create --time 2012-09-10 
```

我明白了

```
{ environment: {}, options: { time: '2012-09-10' } }
2012-09-10
Success in collection
We are now connected to the database. 
```

然后脚本挂起并且没有在磁盘上创建数据库。另一方面，如果我停止 MongoDB 并再次运行脚本，我会得到

```
{ environment: {}, options: { time: '2012-09-10' } }
2012-09-10
Success in collection
Cannot connect to database. 
```

脚本终止。

# xml - 通过访问链接下载 XML 文件

> ID：12468691
> 
> 赞同：0
> 
> 时间：2012-09-18T00:00:18.010
> 
> 标签：xml, file, download

我有一个 XML 文件，只能通过访问 domain.com/file.xml 获得。当有人访问我希望它被下载而不是在浏览器中打开的链接时。没有物理链接，只有必须放在地址栏中的域链接。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T00:12:26.350

最好的方法是指定特定的标头，例如使用 PHP。[PHP 文档](http://php.net/manual/en/function.readfile.php)提供了一个很好的示例
：

```
<?php
$file = 'file.xml';

if (!file_is_readable($file)) {
    return;
}

header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename='.basename($file));
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
header('Content-Length: ' . filesize($file));

ob_end_clean();
readfile($file); 
```

添加上面的代码`download.php`并将文件上传到`file.xml`目录。
现在您可以通过访问下载文件`domain.com/download.php`。
这是最好的跨浏览器兼容解决方案。
其他服务器端语言也可以完成这项工作。

# javascript - 默认所有主干模型新 url 为 .json 和模型以包含 ID

> ID：12468695
> 
> 赞同：1
> 
> 时间：2012-09-18T00:00:52.337
> 
> 标签：javascript, ruby-on-rails, backbone.js

我正在使用带有 Backbone 的标准 Rails 堆栈。按照这里的教程：[http](http://www.jamesyu.org/2011/01/27/cloudedit-a-backbone-js-tutorial-by-example/) ://www.jamesyu.org/2011/01/27/cloudedit-a-backbone-js-tutorial-by-example/我得到以下代码：

```
Models.Users = Backbone.Model.extend({
  url: function() {
    var base = '/users'
    if (this.isNew()) return base + '.json';
    else return base + (base.charAt(base.length - 1) == '/' ? '' : '/') + this.id;
  }
}); 
```

这段代码很好用。

但是，每当我创建一个新模型时，我都会复制并粘贴完全相同的两行代码：

```
 if (this.isNew()) return base + '.json';
    else return base + (base.charAt(base.length - 1) == '/' ? '' : '/') + this.id; 
```

我在代码中唯一改变的是基本变量。

这似乎是非常错误的。有没有办法更好地做到这一点？我不应该像这样修改 Backbone 的 url 以使其与 Rails 一起工作吗？有没有更好的方法，这样我就不必一遍又一遍地复制和粘贴同一行代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T04:31:45.837

> 但是，每当我创建一个新模型时，我都会复制并粘贴完全相同的两行代码

你什么意思？如果您要实例化相同的模型，为什么需要这样做？但是，不清楚您的意思是否是创建新的（单独的）模型。如果你这样做，你可以把这段代码放在模型基类中，可以这么说：

```
var MyModel = Backbone.Model.extend({
 url: function(base){
  if(base)
   //... do something

  else
   //... do something else
 } 
```

然后您可以直接从 MyModel 继承其他模型：

```
var AnotherModel = MyModel.extend({...}); 
```

如果我正确理解你的问题，这样的事情应该可以解决你的问题。只需检查 base 是否存在，这样当 Backbone 查询`url()`没有参数时，它仍然可以返回有效值。`base`您可以通过将这些 es 作为选项传递给模型的方法来初始化这些es `initialize`。

如果不是继承，则只需创建类似于`url`上述方法的方法，然后传入`parameter`for each 模型。

我不太确定混淆是什么，但恕我直言，这两个都应该起作用:)

# php - mongodb 更新或插入子数组

> ID：12468697
> 
> 赞同：3
> 
> 时间：2012-09-18T00:01:27.123
> 
> 标签：php, arrays, mongodb, sub-array

好的，我需要做以下事情

我有 mongo 收集为

```
array (
  '_id' => new MongoId("50513d8338fc5de706000000"),
  'offers' => 
  array (
    '0' => 
    array (
      'minspend' => '50.00',
      'cashback' => '1.50',
      'percentage' => '0.03',
    ),
    '1' => 
    array (
      'minspend' => '100.00',
      'cashback' => '3.00',
      'percentage' => '0.03',
    ),
  ),
  'percentageTotal' => '0.06',
  'test' => new MongoInt32(1),
) 
```

但可以说我只想更新这部分

```
array (
        '0' => 
        array (
          'minspend' => '50.00',
          'cashback' => '1.50',
          'percentage' => '0.03',
        ), 
```

在不重新创建该数组中的整个数据集合的情况下更改子数组的该部分的最佳方法是什么。

有没有可能做这样的事情

```
array (
        '0' => 
        array (
'Offer_id'=> new MongoId(5715671561715),
          'minspend' => '50.00',
          'cashback' => '1.50',
          'percentage' => '0.03',
        ), 
```

)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T05:35:41.667

您可以`$set`与点符号一起使用来指定要更新的数组元素：

```
$collection->update(
    array("_id" => new MongoId("50513d8338fc5de706000000")), 
    array("$set" => array("offers.0" => 
        array (
            'minspend' => '50.00',
            'cashback' => '1.50',
            'percentage' => '0.03',
        )
    ))
); 
```

`offers.0`指数组中的第 0 个（= 第一个）元素。如果你想更新第二个，你会使用`offers.1`作为键。

For your second question, I'm assuming you want to add the MongoId to the sub-document. You can do that the same way, simply by adding `'Offer_id' => new MongoId(),` before minspend. This will create a new unique MongoId and add it to the sub-document. If you want to add an existing MongoId instead, use `new MongoId("...")` and replace the `...` with the 24 hexidecimal character long string.

If you already have an Offer_id and only want to change the offer that matches that id, you can use the positional $ syntax:

```
$collection->update(
    array("_id" => new MongoId("50513d8338fc5de706000000"),
          "offers.Offer_id" => new MongoId("5059637720dfeda164ec0fe7")), 

    array("$set" => array("offers.$" => 
        array (
            'minspend' => '50.00',
            'cashback' => '1.50',
            'percentage' => '0.03',
        )
    ))
); 
```

You query for the document with the correct `_id` and additionally for the `offers.Offer_id`. In the update part of the command, you use `offers.$` where $ will automatically match the correct sub-document that contains the Offer_id.

# java - 如何在插入包含对象集的对象列表期间忽略唯一违规

> ID：12468698
> 
> 赞同：6
> 
> 时间：2012-09-18T00:01:27.687
> 
> 标签：java, hibernate, postgresql-9.1, spring-data-jpa

我将 PostgreSQL 和 Spring 数据 JPA 与 Hibernate 一起使用。我与 orphanRemoval = false 有关系 OneToMany 因为我经常将许多孩子添加到关系中。

家长：

> @OneToMany(mappedBy = "parent", cascade = { CascadeType.ALL }, orphanRemoval = false, fetch = FetchType.LAZY) public Set getChildren() { return children; }

孩子：

> @ManyToOne @JoinColumn(name = "parent_id") public Parent getParent() { return parent; }

要持久化或合并对象，我使用方法

> 可迭代<T>保存（可迭代<扩展T>实体）

形成 CrudRepository。我保存了父母列表，其中每个父母都包含一组孩子。子表具有唯一约束。如果发生约束冲突，我想忽略它并忽略（不持久）违反约束的孩子，但我想插入每个不违反约束的孩子。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T08:27:39.300

通过异常处理这个脏东西。

1.  尝试更新数据库，如果可以在这里休息。捕获 UniqueViolationException 并找到 JDBCException。Upcast 到您的合格数据库异常并找到损坏的孩子。

2.  从父级中删除子级。

3.  转到 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T05:36:34.627

干净的方法是过滤将产生唯一违规异常的实体。过滤这些实体后，您可以保存好的实体。

应该使用异常，因为它们实际上是：异常。

# c# - 遵守 EnumMemberAnnotation 的 Enum.ToString()

> ID：12468700
> 
> 赞同：9
> 
> 时间：2012-09-18T00:01:51.023
> 
> 标签：c#, serialization, enums, json.net, datacontract

我有一个带有注释的枚举，`EnumMember`以促进类似于以下内容的 JSON.NET 序列化：

```
[DataContract]
[JsonConverter(typeof(StringEnumConverter))]
public enum Status
{
    [EnumMember(Value = "NOT_ADMITTED")]
    NotAdmitted,
    [EnumMember(Value = "ADMITTED")]
    Admitted
} 
```

现在，独立于 JSON.NET 序列化，我想将枚举的实例转换为字符串，同时遵守`EnumMember`数据合同中的注释，例如：

`aStatusInstance.ToString() == "NOT_ADMITTED"`.

有什么建议么？谢谢！

**更新：我的解决方案**

我修改了接受的答案中的代码以创建一个扩展方法来检索 EnumMember 值：

```
 public static string GetEnumMemberValue(this Enum enumValue)
    {
        var type = enumValue.GetType();
        var info = type.GetField(enumValue.ToString());
        var da = (EnumMemberAttribute[])(info.GetCustomAttributes(typeof(EnumMemberAttribute), false));

        if (da.Length > 0)
            return da[0].Value;
        else
            return string.Empty;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T01:30:10.713

我将使用描述属性并使用与 EnumMember 相同的值来装饰枚举：

```
 [DataContract]
    [JsonConverter(typeof(StringEnumConverter))]
    public enum Status
    {
        [EnumMember(Value = "NOT_ADMITTED")]
        [Description("NOT_ADMITTED")]
        NotAdmitted,
        [EnumMember(Value = "ADMITTED")]
        [Description("ADMITTED")]
        Admitted
    } 
```

您可以使用此代码片段对其进行解析。这是作为 Enum 类的扩展编写的：

```
 public static string GetDescription(this Enum enumValue)
    {
        Type type = enumValue.GetType();
        FieldInfo info = type.GetField(enumValue.ToString());
        DescriptionAttribute[] da = (DescriptionAttribute[])(info.GetCustomAttributes(typeof(DescriptionAttribute), false));

        if (da.Length > 0)
            return da[0].Description;
        else
            return string.Empty; 
    } 
```

然后，您可以将其与以下内容进行比较：

```
 aStatusInstance.GetDescription() == "NOT_ADMITTED" 
```

# python - 基本的朋友时间线算法？

> ID：12468702
> 
> 赞同：0
> 
> 时间：2012-09-18T00:02:14.657
> 
> 标签：python, algorithm, google-app-engine

我敢肯定，今天的许多在线服务必须执行与我正在做的类似的任务。一个用户有朋友，我想在他们的朋友最后一次状态更新日期之后获取所有用户朋友的所有状态更新。

那是一口，但这是我所拥有的：

一个用户说有 10 个朋友。我想做的是为他所有的朋友获取新的状态更新。所以，我准备了一本包含每个朋友最后状态日期的字典。就像是：

```
for friend in user:
    dictionary['userId] = friend.id
    dictionary['lastDate'] = friend.mostRecentStatusUpdate.date 
```

然后，在我的服务器端，我做这样的事情：

```
for dict in friends:
    userId = dict['userId]
    lastDate = dict['lastDate']
    # each get below, however, launches an RPC and does a separate table lookup, so if I have 100 friends, this seems extremely inefficient
    get statusUpdates for userId where postDate > lastDate 
```

上述方法的问题在于，在服务器端，for 循环的每次迭代都会启动一个新查询，该查询会启动一个 RPC。所以如果朋友多的话，就显得效率真的很低了。

有没有更好的方法来设计我的结构以使这项任务更有效率？Twitter 是怎么做这样的事情的，它会在哪里获得新的时间线更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:04:05.207

从高层次来看，我建议您遵循规定的应用程序引擎口头禅 - 使写入变得昂贵以使读取变得便宜。

对于每个朋友，您应该保留一组已知朋友及其最近的状态更新。这将允许您在写入时更新朋友。这对于写入来说是昂贵的，但可以节省您在读取时的处理和查询。这也假设你读的比写的多。

此外，如果您只是想为每个朋友显示 N 个最新更新，我建议您使用[NDB Structured 属性](https://developers.google.com/appengine/docs/python/ndb/properties#structured)来存储 Friend 对象 - 这样您就可以创建匹配的数据结构。作为对象的一部分，创建与状态更新相对应的键集合。写入状态更新时，添加到集合中，并可能删除较旧的条目（如果空间是一个问题）。

这样，当您需要检索更新时，您可以通过键获取它们，而不是更昂贵的查询类型。

避免任何额外查询的替代方法是保留整个更新而不仅仅是键。但是，这对于存储来说会大很多——10 个朋友都相互连接，这意味着同一个更新的 100 个版本。

# c++ - 重载与面向对象的关系

> ID：12468703
> 
> 赞同：-1
> 
> 时间：2012-09-18T00:02:18.980
> 
> 标签：c++, oop, operator-overloading, overloading

C++中的函数重载和面向对象之间有关系吗？

如果是，那么这种关系是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T00:16:02.603

它们在某种意义上是相关的，大多数面向对象系统的特征之一是某种多态性，而重载也提供了一种多态性（特别是一种特殊多态性）。

C++ 主要以三种方式提供多态性：

*   重载（一种特殊的多态性）
*   模板（也是一种特殊的多态性）
*   类继承（由于将每个类都定义为一个类型而导致的一种子类型多态性）

事实上，这些特性中的每一个都提供了某种使它们相关的多态性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T00:11:31.957

这些是不同的概念。

如前所述，重载是使用类型来确定功能。

面向对象编程是通过建模事物的概念对数据和功能进行逻辑组织 - 通常是真实世界的事物或其抽象。

寻求解决类似问题的语言通常同时提供这两种功能，但一种工具可以自由使用一种工具，而另一种工具则不能无害。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-18T00:02:18.980

函数重载与面向对象中最深刻的思想之一有关：数据类型决定函数或运算符如何行为的思想。

一个相关的想法是运算符重载。运算符（例如 + 或 -）可以应用于不同的数据类型，并且运算符将为所涉及的类型做正确的事情。

您还可以为自己的类型编写运算符函数。

您可以在核心语言中看到运算符重载。两个整数相加和两个浮点数相加需要不同的机器指令。

C++ 编译器根据表达式中的类型执行不同的低级例程：

```
a + b 
```

如果参数的类型发生变化，编译器会生成不同的指令。

再一次，这个想法在面向对象中根深蒂固：所涉及的数据类型决定了函数的行为。

然而，重载并不是这个想法的完整实现。在编译时可能不完全了解类型信息。这就是多态性发挥作用的地方。

# google-apps-script - 谷歌电子表格：无权访问应用程序脚本编辑器，但我是所有者

> ID：12468706
> 
> 赞同：0
> 
> 时间：2012-09-18T00:02:34.957
> 
> 标签：google-apps-script

我有一个令人沮丧的脚本编辑器问题，我确定我在做一些简单的错误 - 很高兴得到任何建议！

我选择脚本编辑器（来自谷歌电子表格）：

![单击脚本编辑器...](../Images/9118abd9a216b4d425397b872ec77d33.png)

然后我到达权限被拒绝错误，建议我请求访问： ![在此处输入图像描述](../Images/9cc06f2c615ea4a047dc05fe5bd99ea9.png)

但是，我是此电子表格的所有者，我没有收到任何许可电子邮件：

![在此处输入图像描述](../Images/4adde997b9aaca124f9ac4440ed63e33.png)

那么，知道发生了什么吗？请求许可后，我没有收到任何电子邮件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T04:16:45.527

我可以想到一些可能导致问题的基本事情......

您是否在同一个浏览器中登录了多个帐户？当同时登录多个企业和个人帐户时，可能会发生一些奇怪的事情。

我会清除您的浏览数据，确保只登录一个帐户，然后重试 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T05:08:02.950

作为电子表格的所有者并不一定意味着您是脚本的所有者。尝试找出谁是脚本的所有者，并要求他们与您共享脚本。

虽然您将能够查看和编辑脚本，但您仍然无法执行一些特权任务，例如作为 web 应用程序部署、管理版本。

# python - 从 Tastypie URL 检索变量和处理列表

> ID：12468707
> 
> 赞同：0
> 
> 时间：2012-09-18T00:02:41.973
> 
> 标签：python, django, tastypie

假设我的 override_urls 是这样的：

```
def override_urls(self):
    return [
        url(r"^(?P<resource_name>%s)/(?P<user__username>\w{4,30})%s$" % (self._meta.resource_name, trailing_slash()), self.wrap_view('dispatch_list'), name="api_dispatch_list"),
        ] 
```

我想对 user__username 进行一些自定义处理：我想获取用户的所有“帖子”对象并将其与他们关注的每个人的帖子对象结合起来。

如何获取 user__username 以供 get_object_list 处理？我尝试使用 request.GET.get('user__username') 从请求中获取它，但这似乎没有意义（并且没有用）。

PS，无论如何将 user__username 变成用户名（为了美观）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:43:11.457

user_username 参数在 kwargs 中通过调度过程而不是在 request.GET 中传递。

您可能想要覆盖 [get_list 方法](https://github.com/toastdriven/django-tastypie/blob/master/tastypie/resources.py#L1116)并处理其中的附加参数。如果你这样做，你可以随意命名你的论点，并以你希望的方式处理它。

# c# - 从位于单独类项目中的实体框架模型创建项目数据源

> ID：12468710
> 
> 赞同：0
> 
> 时间：2012-09-18T00:03:22.597
> 
> 标签：c#, visual-studio-2010, visual-studio, entity-framework, entity-framework-4

我很难找到创建项目数据源的示例，该数据源指向位于单独项目中的实体框架模型。更具体地说，我有一个简单的类项目，它只包含我的实体框架模型，我可以在许多项目中毫无问题地重复使用它。

在一个新项目中，我想利用一些商业数据绑定控件的一些设计时数据绑定工具来加快我的一些开发任务。如果我去添加一个新的项目数据源，我只能生成一个新的 EF 模型或添加一个空模型，我无法从单独的项目中添加现有模型。

我尝试从 EF 类项目中复制连接字符串和 .datasource 文件，但“数据源”窗口中没有显示任何内容。我看过很多关于如何将 EF 模型移动到一个单独的类项目的文章，它工作得很好，我只是没有找到任何关于创建指向它的“设计时”项目数据源的任何东西。

谁能指出我正确的方向？非常感谢您提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:20:40.873

我对此感到很愚蠢，但我发现了问题所在，也许它会对某人有所帮助。我刚刚从事的项目是一个仅限 64 位的项目。我敢肯定，如果项目的任何部分或任何程序集仅 64 位，那么您可以猜到其余部分，与 datasouces 窗口有关的任何事情都根本不起作用。有点烦人，没有错误或在任何地方记录它，但你能做什么。感谢所有试图帮助我的人。

# ios - iOS 有没有好的基于 XML 的布局引擎？

> ID：12468712
> 
> 赞同：2
> 
> 时间：2012-09-18T00:03:40.900
> 
> 标签：ios, xml

故事板和程序化 UIView 创建并不特别擅长定义复杂的布局，其中某些项目（例如标签）可能具有动态定义的高度。我想要一个简单的基于 XML 的布局引擎，例如 HTML/CSS 的基本实现，它允许我以我习惯于 HTML/ 的 DRY 方式使用边距、填充、边框等定义视图CSS。有没有尝试这个的开源库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T00:36:02.930

YU NO 等待 iOS6 的 AutoLayout 功能？;-)

这将允许您定义约束和动态元素高度、宽度、大小、边距、填充……与其他元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-12T07:20:15.903

虽然它有很多很棒的功能，比如动态元素高度、宽度、大小、边距、填充。我认为 AutoLayout 太难研究、编辑、合并、维护了。

您可以检查[BeeFramework](https://github.com/gavinkwoe/BeeFramework)。它使用像 Android 一样简单的 xml 布局。它有一个 XML Interface Builder，你可以在编写 UI 代码时看到 UI

作者正在研究另一个项目[samurai-native](https://github.com/hackers-painters/samurai-native)。它使用本机代码和 CSS。我认为它比 react-native 更棒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-11T21:22:53.177

我知道这是一个老问题，但如果有人对此感兴趣 - MarkupKit 是我专门为解决此类用例而创建的一个开源项目：

[https://github.com/gk-brown/MarkupKit](https://github.com/gk-brown/MarkupKit)

它允许您使用人类可读的 XML 标记语言（类似于 XAML 或 Android）构建本机 iOS 用户界面。它通过基于 JSON 的“属性模板”支持类似 CSS 的样式，并提供一组`UIView`子类来简化自动布局。

# android - 一旦我的应用程序进程被杀死，我的活动状态是什么？

> ID：12468717
> 
> 赞同：3
> 
> 时间：2012-09-18T00:04:08.707
> 
> 标签：android, android-activity

我一直在通过运行一个消耗内存的应用程序来测试我的程序的行为，该应用程序会强制我的应用程序被杀死。[在阅读了onSaveInstanceState 捆绑包保存在哪里](https://stackoverflow.com/questions/8091992/where-is-the-bundle-of-onsaveinstancestate-saved)的答案后？，我对我看到的一些结果感到困惑。

该链接中给出的两个答案都暗示，当需要回收内存时，会破坏单个活动，而不是应用程序。但根据[http://developer.android.com/guide/components/processes-and-threads.html](http://developer.android.com/guide/components/processes-and-threads.html)，进程 - 而不是单个活动 - 被杀死。而且由于所有组件通常在同一个进程中运行，我希望整个应用程序在内存不足的情况下被杀死。我的测试与 Android 文档一致，因为当我运行我的内存消耗应用程序时，我不再看到该进程正在运行。

因此，如果整个过程被杀死，我是否正确假设该问题中给出的答案不正确？但是，如果是这样，如果进程被终止，当我恢复我的应用程序时，是什么让我的 Bundle 存在？真的保证永远不会写入磁盘吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T00:15:16.207

> 该链接中给出的两个答案都暗示，当需要回收内存时，会破坏单个活动，而不是应用程序。

这是不正确的，尽管我自己在这一点上困惑了很长时间。

恕我直言，该问题的三个答案中最多有一个“暗示当需要回收内存时会破坏单个活动，而不是应用程序”。

> 但是，如果是这样，如果进程被终止，当我恢复我的应用程序时，是什么让我的 Bundle 存在？

有时，没有什么是“保持 [your] Bundle 周围”。其他时候，操作系统的核心过程是“保留 [your] Bundle”。

> 真的保证永远不会写入磁盘吗？

不是“保证的”，因为没有记录它是否写入磁盘。如果它*被*写入磁盘，它将由操作系统进程（不是你的）完成，并且该文件应该不被其他进程读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-13T21:37:33.310

正如今天的文档所说，保存的实例状态被序列化到磁盘。

[![在此处输入图像描述](../Images/aac7365a36dca7f39dc1b885c7c35273.png)](https://i.stack.imgur.com/XpXIM.png)

[https://developer.android.com/topic/libraries/architecture/saving-states#options_for_preserving_ui_state](https://developer.android.com/topic/libraries/architecture/saving-states#options_for_preserving_ui_state)

# haskell - haskell 会擦除类型吗？

> ID：12468722
> 
> 赞同：21
> 
> 时间：2012-09-18T00:04:55.983
> 
> 标签：haskell, type-erasure

Haskell 是否擦除类型，如果是，这在哪些方面与 Java 中发生的类型擦除相似/不同？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-18T01:05:05.027

警告：经验+推理。请咨询为 The Truth 使用两种编译器的人。

从某种意义上说，类型检查是在编译时完成的，并且类型系统的几个复杂特性被简化为更简单的语言结构，是的，但方式与 Java 完全不同。

类型签名不会产生运行时开销。Haskell 编译器擅长程序转换（它有更多的余地，因为在许多情况下，程序的运行顺序并没有由程序员指定），并且会自动内联适当的定义并将 haskell-polymorhpic (=java-generic) 函数专门用于特定类型等，如果它认为合适的话，如果它有帮助的话。这类似于 Java 类型擦除，但更是如此。

Haskell 中本质上不需要类型转换来确保类型安全，因为 Haskell 被设计成从头开始就是类型安全的。我们不会求助于将所有东西都变成一个对象，我们也不会将它们转换回去，因为多态（通用）函数确实适用于*任何*数据类型，无论是指针类型还是未装箱的整数，它都能正常工作，没有诡计。因此，与 Java 不同，强制转换不是编译多态（通用）代码的特性。Haskell 的人倾向于认为，如果你在进行类型转换，无论如何你都告别了类型安全。

关于如何在编译时确保代码的静态类型正确性可以避免运行时开销的一个很好的例子，`newtype`Haskell 中有一个构造，它是现有类型的类型安全包装器，它被完全编译掉了——所有的构造和破坏都很简单不会在运行时发生。类型系统确保在编译时它被正确使用，它不能在运行时得到，除非使用（类型检查的）访问器函数。

多态（通用）函数没有多态开销。Haskell 重载函数（Java-interface-instance 方法）具有数据开销，因为隐式函数字典用于似乎是对 Java 程序员的后期绑定，但实际上再次在编译时确定。

总结：是的，甚至比在 Java 中更是如此，而且不，它们在运行时从来没有被擦除过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T09:14:05.790

C and Pascal have type erasure. Java lets you inspect classes at run-time - even dynamically loaded ones!

What Haskell does is much closer to Pascal than to Java.

# php - 在数组中缓存 json 数据并引用 id 来填充类型

> ID：12468724
> 
> 赞同：1
> 
> 时间：2012-09-18T00:05:22.693
> 
> 标签：php, arrays, json, session, caching

我的函数返回一堆属性 id 及其对应的 json 格式名称。例如：

```
{
    "DETAILS": [
        {
            "ATTR_ID": "522",
            "ATTRIBUTE_ID": "4222",
            "ATTRIBUTE_TYPE": "email",

        },
        {
            "ATTR_ID": "523",
            "ATTRIBUTE_ID": "4006",
            "ATTRIBUTE_TYPE": "interest",

        }
    ]
} 
```

我需要将它存储在我需要缓存的数组中。（我可能会使用 $_SESSION）

现在另一个函数返回我一组属性 ID：

```
 $val_array = $subarray[arrayOfAttributes];
    foreach ($val_array as $val)
    {
        print "Attrib Value: $val\n"; //This will print ids 4222,4223,etc
    }
what I need to do is correspond the ids with the type from the cache nad print out the respective Types. 
```

我无法将此逻辑表述为代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T02:10:05.257

```
function getAttrType($id, $array){
  // $array is your 'DETAILS' array.
  foreach($array as $a){
    if($a['ATTR_ID'] == $id){
      return $a['ATTRIBUTE_TYPE'];
    }
  }
}

print getAttrType(523, $array); // will output 'interest'
print getAttrType(522, $array); // will output 'email'
print getAttrType(123, $array); // will output nothing 
```

不知道这是否是您正在寻找的东西，也许这可以让您朝着正确的方向前进。

# string - Excel 字符串解析

> ID：12468726
> 
> 赞同：0
> 
> 时间：2012-09-18T00:05:27.340
> 
> 标签：string, parsing, excel, vba

我有一个电子表格，它使用字符串约定来传达有关各个“案例”的详细程度。

约定如下： 字符串中的数据有 5 个主要类别。1=类别，2=工具，3=文档，4=过程，5=工作帮助。

每个类别可以有多个子类别，每 5 个类别按 1a、1b、1c 或 2a、2b、2c 等细分。

主类与子类用“:”分隔，子类与子类用“,”分隔，而子类与新的主类用“;”分隔

字符串示例：“1:1i;2:2a;3:3a,3d,3l;4:4a”

以下是值类别的示例细分：

```
CATEGORY    1
Incorrect:VG:QOC    1i

TOOLS   2
Macro:Used  2a

DOCUMENTATION   3
TAT:Missing 3a
ROUTING:Missing 3d
STORY:Missing Impact to Health  3i

PROCESS 4
CNX Checklist Not Used  4a 
```

我希望能够以文本形式提取标记了主要类别和子类别的内容。

示例查询：
在所有字符串中，主类别 4 被标记了多少次？在所有 4 个标记中，4a 标记了多少次？在一个“案例”或字符串上标记的所有元素是什么？

我可以构建字符串，但我无法解析它们。请帮忙... ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:44:01.313

您正在寻找的功能是[拆分](http://msdn.microsoft.com/en-us/library/6x627e5f%28v=vs.80%29.aspx)（此链接适用于 VB 功能，但在 VBA 中的行为几乎相同）。您可以将特定字符串传递给它并指定分隔符，它将返回每个值的数组。

在您的情况下，由于您的字符串有多个分隔符，您需要多次执行。

第一个潜在问题是如果您没有给定类别的子类别怎么办？如果您的字符串中的每个类别始终至少有子类别，那很好，但如果可能存在没有子类别的情况，那么您需要确保您的最高级别分组仍然由`;`.

由于您没有说明如何将信息呈现给用户，因此下面的示例将在 Excel 的中间窗口中打印出与您所期望的内容相近的内容。

```
Option Explicit

Sub SplitExample()
Dim inputString As String
Dim categories() As String
Dim subCategories() As String
Dim individualSubCat() As String
Dim cat As Variant
Dim subCat As Variant
Dim cnt As Integer

    inputString = "1:1i;2:2a;3:3a,3d,3l;4:4a"

    categories = Split(inputString, ";")

    For Each cat In categories

        subCategories = Split(cat, ":")

        If UBound(subCategories) >= 0 Then
            Debug.Print ("Category " & subCategories(0))

            If UBound(subCategories) > 0 Then
                individualSubCat = Split(subCategories(1), ",")
                Debug.Print (vbTab & "Has " & UBound(individualSubCat) - LBound(individualSubCat) + 1 & " flag(s)")

                For Each subCat In individualSubCat
                    Debug.Print (vbTab & subCat & " was flagged " & CountSubCategory(individualSubCat, subCat) & " time(s)")
                Next

            Else
                Debug.Print (vbTab & "No Subcategories flagged")
            End If

            Debug.Print ("")

        End If

        Erase subCategories
        Erase individualSubCat

    Next

End Sub 
```

这是一个可以轻松计算子类别的功能

```
Private Function CountSubCategory(individualSubCategories() As String, ByVal subCat As String) As Integer
Dim cnt As Integer
Dim value As Variant

    cnt = 0

    For Each value In individualSubCategories
        If value = subCat Then cnt = cnt + 1
    Next

    CountSubCategory = cnt

End Function 
```

并使用您的示例字符串作为输入，上面的代码将打印：

```
Category 1
    Has 1 flag(s)
    1i was flagged 1 time(s)

Category 2
    Has 1 flag(s)
    2a was flagged 1 time(s)

Category 3
    Has 3 flag(s)
    3a was flagged 1 time(s)
    3d was flagged 1 time(s)
    3l was flagged 1 time(s)

Category 4
    Has 1 flag(s)
    4a was flagged 1 time(s) 
```

上面的代码将打印每个标志，即使有重复。你没有说这是否是理想的行为。从数组中过滤或分组重复项并不简单，但最好使用 VBA 中的 Collection 或 Dictionary 类来完成。（查看[这个问题](https://stackoverflow.com/q/11870095/250725)以帮助过滤数组中的重复项）。

上面的代码只是一个示例，展示了需要做什么以及如何完成解析（因为那是您的特定要求）。要真正将其变成工作代码，您需要做两件事：

1.  在 VBA 中创建一个 Function 或 Sub 代码以在上面解析它（基本上是上面的内容`SplitExample()`）并给它一个名称（如`ParseErrorCodes`），并让它接受一个名为`inputString`. 然后，您将从构建字符串的方法中调用它（您说您已经可以这样做）并将该字符串传递给该方法。
2.  决定如何输出结果。实际上，您可以用`Debug.Print`可以在某处输出结果的东西替换这些行（大概是另一个 Excel 电子表格，这样您就可以创建您正在寻找的图表）。

基本思想是：

```
Sub OutputErrorCodes()
Dim inputString as String

    ' You code to read your string values from where-ever you keep them
    '  and build the inputString
    ' this source could be a file, or a worksheet in the Excel Workbook
    '  or could be an external datasource like a database or even an internet 
    '  location
    ' once you build your inputString, you just need to call ParseErrorCodes 

    ParseErrorCodes inputString

End Sub

Sub ParseErrorCodes(input as String)

    ' MyCode from above with some modifications
    '  - You need to remove the Dim for inputString and the assignment for 
    '     inputString
    '  - You need to replace the Debug.Print lines with your method of 
    '     defining the output
    '    *  this can be via outputing directly to an excel spreadsheet or 
    '        maybe a global variable
    '    *  outputing to an excel spreadsheet would probably be the best 
    '        option and allow for more dynamic flags, but you need to decide 
    '        where to output it in the code

End Sub

Private Function CountSubCategory(individualSubCategories() As String, 
                                  ByVal subCat As String) As Integer)

    ' this code can probably be taken directly from my example

End Function 
```

# windows-7 - 在 Win 7 上安装 Cygwin 1.7.15-1

> ID：12468730
> 
> 赞同：0
> 
> 时间：2012-09-18T00:06:04.520
> 
> 标签：windows-7, cygwin

我下载并运行设置，它似乎正常完成，但完成后我的启动菜单中没有 cygwin 或桌面上的快捷方式，我选择了这两个。C:\cygwin 确实存在，其下有子目录。我执行 c:\cygwin\bin\xterm。它在屏幕上闪烁并显示一条错误消息，但阅读速度太快了。我之前在 XP 上运行过 cygwin 没有问题，但这是第一次使用 Win 7。

是否有一些后台进程需要运行 cygwin 才能工作？我想知道安装是否正常，但我只是缺少启动后台进程的启动菜单项或桌面图标，或者我需要创建一些路径或注册表项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T23:14:54.583

问题是我没有以管理员身份安装。当我以管理员身份返回并重新安装时，一切正常。

# c# - 如何有效地杀死 C# 中的线程？

> ID：12468734
> 
> 赞同：16
> 
> 时间：2012-09-18T00:07:01.170
> 
> 标签：c#, .net, multithreading, .net-3.5

[老实说](https://stackoverflow.com/questions/1051838/killing-a-thread-c)，我并不是[想](https://stackoverflow.com/questions/5034538/how-to-kill-a-c-sharp-thread)[打败](https://stackoverflow.com/questions/2900003/c-sharp-threads-abort)一匹[死](https://stackoverflow.com/questions/2251964/c-sharp-thread-termination-and-thread-abort) [马](https://stackoverflow.com/questions/1327102/how-to-kill-a-thread-instantly-in-c)。而且我已经阅读了关于线程终止的所有建议，但是，请考虑代码。它执行以下操作：

1.  它启动一个线程（通过`StartThread`方法）
2.  它调用数据库在 ServiceBroker 队列中查找任何内容。请注意`WAITFOR`命令 - 这意味着它将坐在那里，直到队列中有东西。这一切都在`MonitorQueue`方法中。
3.  杀死线程。我试过`.Interrupt`了——它似乎什么也没做。然后我尝试`.Abort`了，它永远不应该被使用，但即使这样也没有任何作用。

    ```
    Thread thxMonitor = new Thread(MonitorQueue);
    void StartThread() {
        thxMonitor.Start();
    }

    void MonitorQueue(object obj) {
        var conn = new SqlConnection(connString);
        conn.Open();
        var cmd = conn.CreateCommand();
        cmd.CommandTimeout = 0; // forever and ever
        cmd.CommandType = CommandType.Text;
        cmd.CommandText = "WAITFOR (RECEIVE CONVERT(int, message_body) AS Message FROM SBQ)";

        var dataTable = new DataTable();
        var da = new SqlDataAdapter(command);

        da.Fill(dataTable);
        da.Dispose();
    }

    void KillThreadByAnyMeansNecessary() {
        thxMonitor.Interrupt();
        thxMonitor.Abort();
    } 
    ```

真的可以杀死一个线程吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T00:37:09.313

我讨厌不回答你的问题，但考虑以不同的方式解决这个问题。T-SQL 允许使用 WAITFOR 指定 TIMEOUT 参数，这样如果在一定时间内没有收到消息，则语句将退出并必须再次尝试。您在必须等待的模式中一遍[又一](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687032%28v=vs.85%29.aspx)遍地[看到](http://msdn.microsoft.com/en-us/library/tdc87f8y.aspx)这一点。权衡是您不会在请求时*立即*使线程死亡——您必须等待超时到期，然后线程才会终止。

您希望这种情况发生得越快，超时间隔就越小。想要它立即发生吗？那么你应该改为轮询。

```
static bool _quit = false;

Thread thxMonitor = new Thread(MonitorQueue);
void StartThread() {
    thxMonitor.Start();
}

void MonitorQueue(object obj) {

    var conn = new SqlConnection(connString);
    conn.Open();
    var cmd = conn.CreateCommand();
    cmd.CommandType = CommandType.Text;
    cmd.CommandText = "WAITFOR (RECEIVE CONVERT(int, message_body) AS Message FROM SBQ) TIMEOUT 500";

    var dataTable = new DataTable();    

    while(!quit && !dataTable.AsEnumerable().Any()) {
        using (var da = new SqlDataAdapter(command)) {    
            da.Fill(dataTable);
        }
    }
}

void KillThreadByAnyMeansNecessary() {
    _quit = true;
} 
```

**编辑**：

尽管这感觉像是轮询队列，但实际上并非如此。当您进行轮询时，您正在积极检查某些内容，然后您正在等待避免“旋转”的情况，即您不断地烧毁 CPU（尽管[有时](http://en.wikipedia.org/wiki/Spinlock)您甚至不等待）。

考虑检查条目时轮询方案中发生的情况，然后等待 500 毫秒。如果队列中没有任何内容并且 200 毫秒后有消息到达，则在轮询时必须再等待 300 毫秒才能获取消息。对于超时，如果消息在“等待”方法的超时 200 毫秒后到达，则消息会立即得到处理。

轮询时的等待与紧密循环中轮询时的恒定高 CPU 所强制的时间延迟是轮询通常不能令人满意的原因。等待超时没有这样的缺点——唯一的权衡是你必须等待你的超时到期，然后你的线程才能死掉。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-18T01:06:21.607

设置一个 Abort 标志来告诉线程需要终止。将虚拟记录附加到 ServiceBroker 队列。WAITFOR 然后返回。然后线程检查它的'Abort'标志，发现它被设置，从队列中删除虚拟记录并退出。

另一种变体是将“真正的”毒丸记录添加到由 ServiceBroker 监视的表的规范中 - 非法记录号等。这将完全避免以任何直接方式接触线程 - 总是一件好事:) 这可能会更复杂，特别是如果每​​个工作线程都希望在实际终止时通知，但如果工作线程仍然有效， ServiceBroker 和 DB 都在不同的盒子上。我将其添加为编辑，因为经过更多考虑，它似乎更灵活，毕竟，如果线程通常只通过它进行通信。数据库，为什么不只用数据库关闭它们呢？没有 Abort()，没有 Interrupt()，希望没有产生锁定的 Join()。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-18T00:37:57.247

而不是杀死你的线程，改变你的代码使用 WAITFOR 一个小的超时。

超时后，检查线程是否被中断。

如果没有，请返回并再次等待。

是的，waitfor 的“全部意义”是等待某事。但是，如果您希望某些东西具有响应性，则不能要求一个线程等待 Infinity，然后期望它听其他任何东西。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-18T13:39:38.343

**不要这样做！严重地！**

您需要调用来杀死线程的函数是[`TerminateThread`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686717%28v=vs.85%29.aspx)函数，您可以通过 P/Invoke 调用该函数。关于为什么您不应该使用此方法的所有原因都在文档中

> TerminateThread 是一个*危险的函数*，只能在最极端的情况下使用。**仅当您确切知道目标线程在做什么时才应该调用 TerminateThread，并且您控制了目标线程在终止时可能正在运行的所有代码**。例如，TerminateThread 可能会导致以下问题：
> 
> *   如果目标线程拥有临界区，该临界区将不会被释放。
> *   如果目标线程正在从堆中分配内存，则不会释放堆锁。
> *   如果目标线程在终止时正在执行某些 kernel32 调用，则线程进程的 kernel32 状态可能不一致。
> *   如果目标线程正在操作共享 DLL 的全局状态，则 DLL 的状态可能会被破坏，从而影响 DLL 的其他用户。

需要注意的重要一点是粗体字，以及在 CLR / .Net 框架下，您**永远不会**确切知道目标线程在做什么（除非您碰巧编写了 CLR）。

澄清一下，*在运行 .Net 代码的线程上调用 TerminateThread 很可能会使您的进程死锁，或者处于完全不可恢复的状态*。

如果您找不到某种方法来中止连接，那么您最好让该线程在后台运行，而不是尝试使用`TerminateThread`. 其他人已经发布了关于如何实现这一目标的替代建议。

* * *

该[`Thread.Abort`](http://msdn.microsoft.com/en-us/library/ty8d3wta.aspx)方法*稍微*安全一些，因为它会引发`ThreadAbortException`而不是立即拆除您的线程，但是这具有并不总是有效的缺点 - 如果 CLR 实际在该线程上运行代码，CLR 只能抛出异常，但是在这种情况下线程可能正在等待一些 IO 请求在本机 SQL Server 客户端代码中完成，这就是为什么您的调用`Thread.Abort`没有做任何事情，并且在控制权返回给 CLR 之前不会做任何事情。

`Thread.Abort`无论如何也有它自己的问题，通常被认为是一件坏事，但是它*可能*不会完全处理你的过程（尽管它仍然可能，这取决于运行的代码正在做什么）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-18T00:20:25.543

立即终止线程并不容易。有一个潜在的潜在问题与之相关：

你的线程获得了一个锁，然后你在它释放锁之前杀死它。现在需要锁的线程会卡住。

您可以使用一些全局变量来告诉线程停止。您必须在线程代码中手动检查该全局变量，如果看到它表明您应该停止，则返回。

请参考这个问题讨论同样的事情： [如何在 C# 中立即终止线程？](https://stackoverflow.com/questions/1327102/how-to-kill-a-thread-instantly-in-c)

# macos - 当我连接到 xampp 时，Mac osx 上的主机名 Error001 描述错误消息

> ID：12468735
> 
> 赞同：0
> 
> 时间：2012-09-18T00:07:04.933
> 
> 标签：macos, xampp

我似乎无法连接到我机器上的 xampp。我收到此错误消息 HostnameError001Description。我已经尝试使用此解决方案[http://www.techyv.com/questions/xampp-hostname-error-001-description](http://www.techyv.com/questions/xampp-hostname-error-001-description)修复它，但这似乎不起作用。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:31:03.670

您是否对安全性进行了任何更改？

在我尝试通过执行以下操作更改某些内容后，我遇到了同样的错误：sudo /Applications/XAMPP/xamppfiles/xampp security

修复是再次运行：sudo /Applications/XAMPP/xamppfiles/xampp security

提示要求用德语回答，所以在提示中输入“nein”（英语中没有）。

相当XAMPP，然后再试一次。

如果上述方法不起作用，解决方法： sudo /Applications/XAMPP/xamppfiles/xampp start sudo /Applications/XAMPP/xamppfiles/xampp stop

对我来说，XMAPP 应用程序经过几次尝试后运行良好。

# regex - 使用正则表达式和错误消息的 Asp.Net MVC 4.0 模型本地化

> ID：12468737
> 
> 赞同：1
> 
> 时间：2012-09-18T00:07:20.993
> 
> 标签：regex, asp.net-mvc, model-view-controller, resources

如何创建从资源文件中获取 RegularExpression 和 ErrorMessage 的自定义 RegularExpressionValidator？

```
 [RegularExpression(@"\d{5}(-\d{4})?",
          ErrorMessageResourceType = typeof(Global), ErrorMessageResourceName = "regExpValforPostal_ErrorMessage")]
        public string PostalCode { get; set; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T16:11:49.470

> 资源文件名为 Global ：
> 
> Global.resx、Global.zh.resx、Global.fr-ca.resx

```
 [AttributeUsage(AttributeTargets.Field | AttributeTargets.Property, AllowMultiple = false)]
    public class LocalizedRegexAttribute : RegularExpressionAttribute
    {

        static LocalizedRegexAttribute()
        {
            // necessary to enable client side validation
            DataAnnotationsModelValidatorProvider.RegisterAdapter(typeof(LocalizedRegexAttribute), typeof(RegularExpressionAttributeAdapter));
        }

        public LocalizedRegexAttribute(string _RegularExpression, string _ErrorMessageResourceName, Type _ErrorMessageResourceType)
            : base(LoadRegex(_RegularExpression))
        {
            ErrorMessageResourceType = _ErrorMessageResourceType;
            ErrorMessageResourceName = _ErrorMessageResourceName;

        }

        private static string LoadRegex(string key)
        {
            var resourceManager = new ResourceManager(typeof(Water.Localization.Resources.Global));
            return resourceManager.GetString(key);
        } 
```

> 在您的模型类中，您需要使用自定义数据注释传递 ​​3 个参数，如下所示：

```
[LocalizedRegex("regExpValforPostal_ValidationExpression", "regExpValforPostal_ErrorMessage", typeof(Global))]
        public string PostalCode { get; set; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T00:23:28.533

如果您的资源文件名为 Validations.he.resx 并且在其中您同时具有“RegexExpression”和“ErrorMessage”，则应使用此：

**更新 #1：添加了选项 2**

*   选项1：

    > ```
    > public class LocalizedRegexAttribute :RegularExpressionAttribute
    > {
    >     public LocalizedRegexAttribute () : base(Validations.RegexExpression)
    >     {
    > 
    >     }
    > 
    >     public override string FormatErrorMessage(string name)
    >     {
    >         return base.FormatErrorMessage(ValidationStrings.ErrorMessage);
    >     }
    > } 
    > ```

*   选项 2：

> ```
> public class EmailAddressAttribute :ValidationAttribute {
> public EmailAddressAttribute()
> {
> 
> }
> 
> public override bool IsValid(object value)
> {
>     Regex regex = new Regex(Validations.RegexExpression);
>     return regex.IsMatch(value.ToString());
> }
> 
> public override string FormatErrorMessage(string name)
> {
>     return base.FormatErrorMessage(ValidationStrings.ErrorMessage);
> } } 
> ```

比你会像这样使用它：

```
[LocalizedRegexAttribute]
public string PostalCode { get; set; } 
```

# xpages - 启用 enableModifiedFlag 属性后隐藏名称选择器的文档更改消息

> ID：12468739
> 
> 赞同：1
> 
> 时间：2012-09-18T00:07:27.333
> 
> 标签：xpages

我在表单上启用了这个属性。该表单具有多个字段以及几个名称选择器。当我单击名称选择器时，我收到文档更改消息。如何为名称选择器停止此消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:21:14.613

此问题已在 Domino 9.0 中修复 - 并且应该存在于 2012 年圣诞节之前发布的 9.0 的公共测试版中。此外，此修复也应该在 2012 年 11 月之后的扩展库版本中可用。

如果它不适合你，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:55:30.453

我们最近升级到分机。Lib 版本 8.5.3.20130315-0724（2013 年 4 月 4 日）。**但仍然 enableModifiedFlag 在IE**中不起作用。我试图描述以下步骤：

1.  打开 Xpage 并将 enableModifiedProperty 设置为“true”。
2.  更新任何输入字段。
3.  从值选择器中选择名称。
4.  在所选值上按“X”。轰……它显示“你想离开这个页面吗”对话框。

我检查了 FireFox。它按预期工作。

干杯，拉维

# internet-explorer - 带有 Internet Explorer 的 CORS - 支持基本身份验证？

> ID：12468741
> 
> 赞同：8
> 
> 时间：2012-09-18T00:07:35.153
> 
> 标签：internet-explorer, basic-authentication, cors

在 Internet Explorer 中使用 CORS（跨源资源共享）时 - 它是否支持提供授权（即基本授权）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-18T13:53:14.343

简短的回答：没有。更长的答案：

Internet Explorer 7 及更低版本不支持 CORS

Internet Explorer 8 和 9 通过 XDomainRequest 对象提供有限的 CORS 支持。XDomainRequest 对象不支持自定义标头，因此它不支持`Authorization`标头。（来源：http: [//blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx](http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx)）

即将推出的 Internet Explorer 10 将完全支持 CORS，其中包括对自定义标头（如`Authorization`. （来源：http: [//blogs.msdn.com/b/ie/archive/2012/02/09/cors-for-xhr-in-ie10.aspx](http://blogs.msdn.com/b/ie/archive/2012/02/09/cors-for-xhr-in-ie10.aspx)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T03:47:25.990

任何需要使用凭据支持 IE7、8、9 的公共站点，请勿使用 CORS。Internet 区域“跨域访问数据源”中禁用了功能。只有受信任的区域域才能进行跨域调用。

# android - 使用 HttpClient 在 Android 应用程序中调用 Web 服务

> ID：12468743
> 
> 赞同：0
> 
> 时间：2012-09-18T00:08:09.643
> 
> 标签：android, apache-httpclient-4.x

我是 android 和 web 服务的新手。我想创建一个使用 HttpClient 使用 web 服务的 android 应用程序。然而我很困惑，如何做到这一点。我会解释我需要做什么。

说，我们在[http://www.w3schools.com/webservices/tempconvert.asmx](http://www.w3schools.com/webservices/tempconvert.asmx) WSDL url=http://www.w3schools.com/webservices/tempconvert.asmx?WSDL有一个网络服务

我需要的是在android应用程序中调用“FahrenheitToCelsius”方法并从中返回值。我不能使用HttpClient来做到这一点吗？因为它似乎只获取 GET 和 POST 等 HTTP 方法。

当我搜索这个时，我发现下面的网站是一个更常见的建议。但它不包含我需要做的事情。 [http://lukencode.com/2010/04/27/calling-web-services-in-android-using-httpclient/](http://lukencode.com/2010/04/27/calling-web-services-in-android-using-httpclient/)

（我可以调用“FahrenheitToCelsius”方法并使用 ksoap 库返回值。但现在我也需要使用 HttpClient 来完成）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T00:38:33.103

澄清一下——当你通过它的 WSDL 文件连接到一个 web 服务时，你正在使用一种非常特殊的 web 服务——特别是一个[SOAP](http://en.wikipedia.org/wiki/SOAP) web 服务。

连接到 SOAP Web 服务的典型方法是找到您选择的语言的库，或者找到一个实用程序，该实用程序将使用 WSDL 为您生成与 Web 服务通信的代码。

一种用于在 Android 上连接到 SOAP 的流行实用程序称为[ksoap-android](http://code.google.com/p/ksoap2-android/)。

# jquery - 鼠标滚轮插件在Firefox中不起作用

> ID：12468744
> 
> 赞同：0
> 
> 时间：2012-09-18T00:08:33.783
> 
> 标签：jquery, mousewheel

我一直在使用brandon aarons mousewheel插件并且正在使用webkit浏览器但是它在firefox上不起作用。

这是brandon aaron的原始代码，在webkit上很棒

```
$('body').on('mousewheel', function(event, delta){
  this.scrollLeft -= (delta*30);
  event.preventDefault();
}); 
```

所以我切换到[http://cobbweb.me/blog/2012/03/30/jquery-mousewheel-plugin-version-2/](http://cobbweb.me/blog/2012/03/30/jquery-mousewheel-plugin-version-2/) 应该可以在firefox上工作，尝试了这个代码

```
$('body').on('mousewheel', function(event, delta, deltaX, deltaY){

  event.preventDefault();
}); 
```

我试图将 scrollLeft 放在那里，并用 deltaY 替换并 DOMMouseScroll 或 MozMousePixelScroll 但仍然无济于事。如何使这项工作绑定在鼠标滚轮上，以便我的页面在 Firefox 上水平滚动？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-02T10:34:13.073

您应该检查[在 Firefox 中不工作的 body 上的 scrollLeft](https://stackoverflow.com/questions/18004186/scrollleft-on-body-not-working-in-firefox)

他们通过更改`$('body')...`为来修复它`$('html, body')...`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T00:25:26.643

您可以通过自己处理 DOM 事件（使用*和*不使用插件）来解决此问题。

像这样：

```
$('body').on('mousewheel DOMMouseScroll MozMousePixelScroll', function(event, delta, deltaX, deltaY){
    event.preventDefault();
}); 
```

[你可以在这里](http://jsfiddle.net/7PSyn/1/)看到它的实际效果（在 Chrome 和 Firefox 中测试）。

但是，`scrollLeft`似乎`scrollTop`在 Firefox 中不起作用（在 jQuery 或基本 JavaScript 中）。看到[这个小提琴](http://jsfiddle.net/7PSyn/3/)（应该输出“5”；在 Chrome 上这样做，但在 Firefox 上吐出“0”）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-06T18:48:28.167

尝试：（1）事件'mousewheel'，（2）函数（事件）和（3）使用event.deltaFactor * event.deltaX来检测滚动距离。

检查[https://github.com/jquery/jquery-mousewheel](https://github.com/jquery/jquery-mousewheel)，非常短的部分“获取滚动距离”。

# c++ - 使用 boost::timed_join 和 FreeLibrary 时崩溃

> ID：12468752
> 
> 赞同：1
> 
> 时间：2012-09-18T00:11:07.283
> 
> 标签：c++, dll, segmentation-fault, boost-thread, freeze

我需要使用`LoadLibrary`和`GetProcAddress`调用某些dll（插入我的应用程序）中的函数，但我不希望它们能够通过包含无限循环或挂起自己来挂起我的程序，所以我正在尝试使用`boost::thread`（没有经验）来规避这一点。但是，如果某个函数确实挂起，我在调用`FreeLibrary`清理时会因 ACCESS_DENIED (0x00000005) 而崩溃。

这是重现问题的最小 DLL ( `mydll.dll`)：

```
extern "C" {
    void __declspec(dllexport) foo() {
        for(;;); //<-- infinite loop
    }
} 
```

这是一个崩溃的最小cpp。为简洁起见，我省略了错误检查，但我可以向您保证不会出现错误：

```
#include <boost/thread.hpp>
#include <iostream>
#include <windows.h>

int main() {
    using FuncType = void (*)();

    HMODULE dll = LoadLibrary("mydll.dll");

    FuncType func = (FuncType)GetProcAddress(dll, "foo");

    boost::thread thr = [func] {func();};

    if (!thr.timed_join(boost::posix_time::seconds(1))) {
        std::cout << "Timed out.";
        //thr.detach();
        FreeLibrary(dll);
    }

    for (;;);
} 
```

运行时，“超时”。被打印并且崩溃时的调用堆栈（CodeBlocks上的gdb）如下：

```
#0 00000000 0x6c1c1214 in ??() (??:??)
#1 0040133E operator() (__closure=<optimized out>) (C:\...\thread test.cpp:17)
#5 00000000 0x00000000 in ??() (??:??) 
```

没有优化，就变成了：

```
#0 00000000 0x6c1c1214 in ??() (??:??)
#1 00401348 operator() (__closure=0x898f90) (C:\...\thread test.cpp:17)
#2 00401780 boost::detail::thread_data<main()::<lambda()> >::run(void)(this=0x898f70) (c:/.../boost/thread/detail/thread.hpp:62)
#5 00000000 0x00000000 in ??() (??:??) 
```

我尝试的第一件事是在`thr.detach();`上面注释掉的行中添加，但这产生了相同的结果。

我也尝试了以下无济于事：

*   用函数替换 lambda（我不确定 Boost 与 C++11 的匹配度如何）--- 崩溃
*   注释掉该`FreeLibrary`行 --- 工作正常，但我宁愿在加载后释放它，即使它是基于引用的。我也对以后工作的这种行为持谨慎态度。
*   将 DLL 中的无限循环替换为返回的 --- 工作正常，但我不能指望它
*   不使用`LoadLibrary`或任何东西并内联无限循环---工作正常，但我需要使用 DLL：

> boost::thread thr = []{for (;;);};

DLL 和 cpp 都是在 Windows 7 64 位上使用 GCC 4.7.1 和 32 位输出类型编译的。我的 Boost 版本是 1.49.0。如果没记错的话，我想在转移到另一台计算机之前，我在 Windows XP 32 位（相同的编译器等）上进行了一两次测试。

为什么会崩溃？如何确保我动态调用的函数不会挂起我的程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T00:18:21.150

从根本上说，你不能那样做。线程不提供那种隔离。如果需要，请使用流程。

# java - 使用 Java 将 Long Raw bmp 文件写入 Oracle 数据库

> ID：12468755
> 
> 赞同：0
> 
> 时间：2012-09-18T00:11:29.593
> 
> 标签：java, oracle, long-integer, bmp

我正在尝试使用 java 将 bmp 文件保存到旧版 oracle 数据库中的一个长原始列中，但我运行得不好。这是我使用的代码：

```
InputStream input2 = new ByteArrayInputStream(bytesArchivo);
String sql = "UPDATE firma_legal SET " +
                     "      firma = ? " +
                     "WHERE cod_unicom = 1120";
OraclePreparedStatement  stat =
                (OraclePreparedStatement) connection.prepareStatement(sql);
stat.setBinaryStream(1, input2, (int)archivo.length());
stat.executeUpdate();
input2.close(); 
```

代码执行得很好，但是当我在数据库中看到时，它并没有更新我想要的行，而是把这个字符串“BMF;”。

![行已更新](../Images/24989899b0b82e43d78f631c88c5a643.png)

如何将此文件插入长原始列？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T02:32:51.393

请检查值`archivo.length()`，是否等于 4？

或者

中有或只有 4 个字节可用`input2`，请尝试`input2.available()`签出。

# javascript - 如何使用 jQuery.ajax 将 javascript 作为文本发布

> ID：12468759
> 
> 赞同：1
> 
> 时间：2012-09-18T00:12:04.523
> 
> 标签：javascript, jquery, asp-classic

我有一个表单，要求用户在 textarea 中输入他们的 Google Analytics 代码。然后我将此字符串传递给 ajax 帖子并收到一条错误消息，指出我正在传递一个无效对象。（我没有在这里粘贴整个错误消息，因为它很长..）

正如预期的那样，Google Analytics 代码采用以下形式；

```
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'some_number']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> 
```

我用它发布到服务器：

```
 $.ajax({
            type: "POST",
            url: "Settings.aspx/setStats",
            data: "{'skey': 'ga_code', 'sval':'" + el.val() + "'}",
            dataType: "json",
            contentType: "application/json; charset=utf-8"
        }); // el.val() being the google analytics code.. 
```

我怎样才能在没有错误的情况下发布这个？另外，当用户需要更新它时，我也需要得到它。收到它时也会出现同样的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T00:15:22.487

你的对象不是这样的；它是一个字符串，您将一个字符串作为对象传递..尝试以下操作：

```
data: { skey: 'ga_code', sval: el.val() }, 
```

通常对象被转换为查询字符串，如[文档页面](http://api.jquery.com/jQuery.ajax/)所述，但由于您将字符串传递给转换器，我相信它不会起作用。

**更新：**

看来我有点错了。以上是无效的json，以下应该可以工作，作为对上述内容的更正：

```
data: { "skey": "ga_code", "sval": el.val() } 
```

[从我正在阅读](http://www.json.org/)的内容来看，键和值必须双引号，尽管我有点困惑，因为我使用 json 就像我第一次给你的一样，没有任何问题。最后，我会推荐[这个网站](http://jsonlint.com/)来测试你的 JSON 是否有效。

如果这仍然不起作用，那么我建议您将 contentType 更改为以下内容：

```
"application/x-www-form-urlencoded; charset=utf-8" 
```

# android - Android - Orbot 内置应用程序

> ID：12468760
> 
> 赞同：3
> 
> 时间：2012-09-18T00:12:17.113
> 
> 标签：android, proxy, tor

**注意：**如果您不知道 TOR 或 Orbot 是什么，请查看以下链接：
[https](https://www.torproject.org/)

://www.torproject.org/ 所以，我想知道是否可以将 TOR 支持添加到我的应用程序中。这将为用户减轻寻找工作代理的压力，此外，TOR 是最安全的代理之一。

我知道 TOR 团队制作了一个名为“ [Orbot](https://play.google.com/store/apps/details?id=org.torproject.android) ”的应用程序，它允许 Android 设备使用 orbot 代理应用程序。问题是，Orbot 代理应用程序的唯一方法是如果他们有 ROOT 并且某些用户不喜欢采用技术方法，尤其是当它有“这可能会破坏您的设备！”时 所以我想是否有可能撕掉 Orbot 源并将其添加到我的应用程序中，以便我的应用程序被代理。

这可以让很多人免于下载多个应用程序并缩短设置时间（因为我的应用程序必须具有代理支持才能通过我没有见过的 TOR 代理，所以我真的不知道如何拥有这样的东西) 但我不确定源代码中的哪里是到 TOR 网络的实际路由，我认为我可以在这方面得到一点提升。
**我不是想制作自己的 Orbot，我会给予信任**

所以，有人知道从哪里开始吗？我反编译了常规的 Orbot 应用程序并浏览了源代码，但没有多少响动。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T00:17:47.093

使用[ORlib](https://github.com/guardianproject/Orlib)，它“是一个 Android 库，可供希望通过 Orbot/Tor 路由其网络流量的任何应用程序使用”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-18T15:43:30.943

如果你想避免强迫用户安装 Orbot，你可以使用[这个项目](https://github.com/jehy/Tor-Onion-Proxy-Library)在你的应用程序中包含 Tor，该项目包含 Orbot 的 Tor 二进制文件并允许完全控制它。

# java - 杰克逊枚举序列化和反序列化器

> ID：12468764
> 
> 赞同：263
> 
> 时间：2012-09-18T00:12:44.017
> 
> 标签：java, enums, jackson, jsonserializer

我正在使用 JAVA 1.6 和 Jackson 1.9.9 我有一个枚举

```
public enum Event {
    FORGOT_PASSWORD("forgot password");

    private final String value;

    private Event(final String description) {
        this.value = description;
    }

    @JsonValue
    final String value() {
        return this.value;
    }
} 
```

我添加了一个@JsonValue，这似乎可以将对象序列化为：

```
{"event":"forgot password"} 
```

但是当我尝试反序列化时，我得到了

```
Caused by: org.codehaus.jackson.map.JsonMappingException: Can not construct instance of com.globalrelay.gas.appsjson.authportal.Event from String value 'forgot password': value not one of declared Enum instance names 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：323
> 
> 时间：2013-12-06T10:23:35.357

*如果您希望将枚举*类与其 JSON 表示完全解耦， [*@xbakesx*](https://stackoverflow.com/a/13368831/814702)指出的序列化器/反序列化器解决方案是一个很好的解决方案。

 *或者，如果您更喜欢独立的解决方案，基于`@JsonCreator`和`@JsonValue`注释的实现会更方便。

因此，利用[*@Stanley*](https://stackoverflow.com/a/17420756/814702)的示例，以下是一个完整的独立解决方案（Java 6，Jackson 1.9）：

```
public enum DeviceScheduleFormat {

    Weekday,
    EvenOdd,
    Interval;

    private static Map<String, DeviceScheduleFormat> namesMap = new HashMap<String, DeviceScheduleFormat>(3);

    static {
        namesMap.put("weekday", Weekday);
        namesMap.put("even-odd", EvenOdd);
        namesMap.put("interval", Interval);
    }

    @JsonCreator
    public static DeviceScheduleFormat forValue(String value) {
        return namesMap.get(StringUtils.lowerCase(value));
    }

    @JsonValue
    public String toValue() {
        for (Entry<String, DeviceScheduleFormat> entry : namesMap.entrySet()) {
            if (entry.getValue() == this)
                return entry.getKey();
        }

        return null; // or fail
    }
} 
```

* * *

## 回答 #2

> 赞同：245
> 
> 时间：2015-09-22T17:56:59.033

请注意，从 2015 年 6 月的[这次提交](https://github.com/FasterXML/jackson-databind/commit/707db7a972e2d088647450f9a890c438fb735933)（Jackson 2.6.2 及更高版本）开始，您现在可以简单地编写：

```
public enum Event {
    @JsonProperty("forgot password")
    FORGOT_PASSWORD;
} 
```

该行为记录在这里：[https ://fasterxml.github.io/jackson-annotations/javadoc/2.11/com/fasterxml/jackson/annotation/JsonProperty.html](https://fasterxml.github.io/jackson-annotations/javadoc/2.11/com/fasterxml/jackson/annotation/JsonProperty.html)

> 从 Jackson 2.6 开始，此注释也可用于更改 Enum 的序列化，如下所示：
> 
> ```
>  public enum MyEnum {
>       @JsonProperty("theFirstValue") THE_FIRST_VALUE,
>       @JsonProperty("another_value") ANOTHER_VALUE;
>  } 
> ```
> 
> 作为使用 JsonValue 注释的替代方法。

* * *

## 回答 #3

> 赞同：97
> 
> 时间：2013-07-02T08:21:32.310

您应该创建一个静态工厂方法，该方法采用单个参数并使用`@JsonCreator`（自 Jackson 1.2 起可用）对其进行注释

```
@JsonCreator
public static Event forValue(String value) { ... } 
```

[在此处](http://fasterxml.github.io/jackson-annotations/javadoc/2.2.0/index.html?com/fasterxml/jackson/annotation/JsonCreator.html)阅读有关 JsonCreator 注释的更多信息。

* * *

## 回答 #4

> 赞同：47
> 
> 时间：2012-11-13T21:08:57.560

**实际答案：**

枚举的默认反序列化器用于`.name()`反序列化，因此它不使用`@JsonValue`. 因此，正如@OldCurmudgeon 指出的那样，您需要传入`{"event": "FORGOT_PASSWORD"}`以匹配该`.name()`值。

另一个选项（假设您希望写入和读取 json 值相同）...

**更多信息：**

（还有）另一种方法可以使用 Jackson 来管理序列化和反序列化过程。您可以指定这些注释以使用您自己的自定义序列化器和反序列化器：

```
@JsonSerialize(using = MySerializer.class)
@JsonDeserialize(using = MyDeserializer.class)
public final class MyClass {
    ...
} 
```

然后你必须写`MySerializer`，`MyDeserializer`看起来像这样：

**我的序列化器**

```
public final class MySerializer extends JsonSerializer<MyClass>
{
    @Override
    public void serialize(final MyClass yourClassHere, final JsonGenerator gen, final SerializerProvider serializer) throws IOException, JsonProcessingException
    {
        // here you'd write data to the stream with gen.write...() methods
    }

} 
```

**我的反序列化器**

```
public final class MyDeserializer extends org.codehaus.jackson.map.JsonDeserializer<MyClass>
{
    @Override
    public MyClass deserialize(final JsonParser parser, final DeserializationContext context) throws IOException, JsonProcessingException
    {
        // then you'd do something like parser.getInt() or whatever to pull data off the parser
        return null;
    }

} 
```

最后一点，特别是对`JsonEnum`使用 method 序列化的枚举执行此操作时`getYourValue()`，您的序列化器和反序列化器可能如下所示：

```
public void serialize(final JsonEnum enumValue, final JsonGenerator gen, final SerializerProvider serializer) throws IOException, JsonProcessingException
{
    gen.writeString(enumValue.getYourValue());
}

public JsonEnum deserialize(final JsonParser parser, final DeserializationContext context) throws IOException, JsonProcessingException
{
    final String jsonValue = parser.getText();
    for (final JsonEnum enumValue : JsonEnum.values())
    {
        if (enumValue.getYourValue().equals(jsonValue))
        {
            return enumValue;
        }
    }
    return null;
} 
```

* * *

## 回答 #5

> 赞同：42
> 
> 时间：2014-07-02T17:37:04.200

我找到了一个非常简洁明了的解决方案，当您无法像我的情况那样修改枚举类时特别有用。然后，您应该提供一个启用了特定功能的自定义 ObjectMapper。这些功能自 Jackson 1.6 起可用。所以你只需要`toString()`在你的枚举中写方法。

```
public class CustomObjectMapper extends ObjectMapper {
    @PostConstruct
    public void customConfiguration() {
        // Uses Enum.toString() for serialization of an Enum
        this.enable(WRITE_ENUMS_USING_TO_STRING);
        // Uses Enum.toString() for deserialization of an Enum
        this.enable(READ_ENUMS_USING_TO_STRING);
    }
} 
```

还有更多与枚举相关的功能可用，请参见此处：

[https://github.com/FasterXML/jackson-databind/wiki/Serialization-Features](https://github.com/FasterXML/jackson-databind/wiki/Serialization-Features) [https://github.com/FasterXML/jackson-databind/wiki/Deserialization-Features](https://github.com/FasterXML/jackson-databind/wiki/Deserialization-Features)

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2019-04-04T21:29:58.507

试试这个。

```
public enum Event {

    FORGOT_PASSWORD("forgot password");

    private final String value;

    private Event(final String description) {
        this.value = description;
    }

    private Event() {
        this.value = this.name();
    }

    @JsonValue
    final String value() {
        return this.value;
    }
} 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2021-03-23T16:08:34.163

我喜欢[接受的答案](https://stackoverflow.com/a/20421494/10871073)。但是，我会对其进行一些改进（考虑到现在有高于版本 6 的 Java 可用）。

例子：

```
 public enum Operation {
        EQUAL("eq"),
        NOT_EQUAL("ne"),
        LESS_THAN("lt"),
        GREATER_THAN("gt");

        private final String value;

        Operation(String value) {
            this.value = value;
        }

        @JsonValue
        public String getValue() {
            return value;
        }

        @JsonCreator
        public static Operation forValue(String value) {
            return Arrays.stream(Operation.values())
                .filter(op -> op.getValue().equals(value))
                .findFirst()
                .orElseThrow(); // depending on requirements: can be .orElse(null);
        }
    } 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2015-10-08T21:32:47.333

您可以自定义任何属性的反序列化。

使用 annotationJsonDeserialize ( `import com.fasterxml.jackson.databind.annotation.JsonDeserialize`) 为将要处理的属性声明您的反序列化类。如果这是一个枚举：

```
@JsonDeserialize(using = MyEnumDeserialize.class)
private MyEnum myEnum; 
```

这样，您的类将用于反序列化属性。这是一个完整的例子：

```
public class MyEnumDeserialize extends JsonDeserializer<MyEnum> {

    @Override
    public MyEnum deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException {
        JsonNode node = jsonParser.getCodec().readTree(jsonParser);
        MyEnum type = null;
        try{
            if(node.get("attr") != null){
                type = MyEnum.get(Long.parseLong(node.get("attr").asText()));
                if (type != null) {
                    return type;
                }
            }
        }catch(Exception e){
            type = null;
        }
        return type;
    }
} 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2016-01-29T23:32:16.283

这是另一个使用字符串值而不是映射的示例。

```
public enum Operator {
    EQUAL(new String[]{"=","==","==="}),
    NOT_EQUAL(new String[]{"!=","<>"}),
    LESS_THAN(new String[]{"<"}),
    LESS_THAN_EQUAL(new String[]{"<="}),
    GREATER_THAN(new String[]{">"}),
    GREATER_THAN_EQUAL(new String[]{">="}),
    EXISTS(new String[]{"not null", "exists"}),
    NOT_EXISTS(new String[]{"is null", "not exists"}),
    MATCH(new String[]{"match"});

    private String[] value;

    Operator(String[] value) {
        this.value = value;
    }

    @JsonValue
    public String toStringOperator(){
        return value[0];
    }

    @JsonCreator
    public static Operator fromStringOperator(String stringOperator) {
        if(stringOperator != null) {
            for(Operator operator : Operator.values()) {
                for(String operatorString : operator.value) {
                    if (stringOperator.equalsIgnoreCase(operatorString)) {
                        return operator;
                    }
                }
            }
        }
        return null;
    }
} 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2016-08-31T22:05:55.810

您可以采用多种方法将 JSON 对象反序列化为枚举。我最喜欢的风格是创建一个内部类：

```
import com.fasterxml.jackson.annotation.JsonCreator;
import com.fasterxml.jackson.annotation.JsonFormat;
import com.fasterxml.jackson.annotation.JsonProperty;
import org.hibernate.validator.constraints.NotEmpty;

import java.util.Arrays;
import java.util.Map;
import java.util.function.Function;
import java.util.stream.Collectors;

import static com.fasterxml.jackson.annotation.JsonFormat.Shape.OBJECT;

@JsonFormat(shape = OBJECT)
public enum FinancialAccountSubAccountType {
  MAIN("Main"),
  MAIN_DISCOUNT("Main Discount");

  private final static Map<String, FinancialAccountSubAccountType> ENUM_NAME_MAP;
  static {
    ENUM_NAME_MAP = Arrays.stream(FinancialAccountSubAccountType.values())
      .collect(Collectors.toMap(
        Enum::name,
        Function.identity()));
  }

  private final String displayName;

  FinancialAccountSubAccountType(String displayName) {
    this.displayName = displayName;
  }

  @JsonCreator
  public static FinancialAccountSubAccountType fromJson(Request request) {
    return ENUM_NAME_MAP.get(request.getCode());
  }

  @JsonProperty("name")
  public String getDisplayName() {
    return displayName;
  }

  private static class Request {
    @NotEmpty(message = "Financial account sub-account type code is required")
    private final String code;
    private final String displayName;

    @JsonCreator
    private Request(@JsonProperty("code") String code,
                    @JsonProperty("name") String displayName) {
      this.code = code;
      this.displayName = displayName;
    }

    public String getCode() {
      return code;
    }

    @JsonProperty("name")
    public String getDisplayName() {
      return displayName;
    }
  }
} 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2018-07-20T15:26:03.857

在枚举的上下文中，使用`@JsonValue`now（自 2.0 起）可用于序列化*和*反序列化。

根据[jackson-annotations javadoc`@JsonValue`](https://fasterxml.github.io/jackson-annotations/javadoc/2.9/com/fasterxml/jackson/annotation/JsonValue.html)：

> 注意：当用于 Java 枚举时，一个附加功能是注释方法返回的值也被认为是要反序列化的值，而不仅仅是要序列化的 JSON 字符串。这是可能的，因为 Enum 值的集合是恒定的，并且可以定义映射，但对于 POJO 类型通常不能这样做；因此，这不用于 POJO 反序列化。

因此，`Event`使用 jackson 2.0+ 像上面一样对枚举进行注释（对于序列化和反序列化）。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2019-03-13T18:34:18.057

除了使用@JsonSerialize @JsonDeserialize，您还可以在对象映射器中使用SerializationFeature 和DeserializationFeature（杰克逊绑定）。

例如 DeserializationFeature.READ_UNKNOWN_ENUM_VALUES_USING_DEFAULT_VALUE，如果提供的枚举类型未在枚举类中定义，则提供默认枚举类型。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-03-10T14:39:41.947

就我而言，这是解决的问题：

```
import com.fasterxml.jackson.annotation.JsonCreator;
import com.fasterxml.jackson.annotation.JsonFormat;
import com.fasterxml.jackson.annotation.JsonProperty;

@JsonFormat(shape = JsonFormat.Shape.OBJECT)
public enum PeriodEnum {

    DAILY(1),
    WEEKLY(2),
    ;

    private final int id;

    PeriodEnum(int id) {
        this.id = id;
    }

    public int getId() {
        return id;
    }

    public String getName() {
        return this.name();
    }

    @JsonCreator
    public static PeriodEnum fromJson(@JsonProperty("name") String name) {
        return valueOf(name);
    }
} 
```

序列化和反序列化以下 json：

```
{
  "id": 2,
  "name": "WEEKLY"
} 
```

我希望它有帮助！

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-05-29T12:00:41.070

我发现的最简单的方法是对枚举使用 @JsonFormat.Shape.OBJECT 注释。

```
@JsonFormat(shape = JsonFormat.Shape.OBJECT)
public enum MyEnum{
    ....
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-07-02T09:55:15.407

我是这样做的：

```
// Your JSON
{"event":"forgot password"}

// Your class to map 
public class LoggingDto {
    @JsonProperty(value = "event")
    private FooEnum logType;
}

//Your enum
public enum FooEnum {

    DATA_LOG ("Dummy 1"),
    DATA2_LOG ("Dummy 2"),
    DATA3_LOG ("forgot password"),
    DATA4_LOG ("Dummy 4"),
    DATA5_LOG ("Dummy 5"),
    UNKNOWN ("");

    private String fullName;

    FooEnum(String fullName) {
        this.fullName = fullName;
    }

    public String getFullName() {
        return fullName;
    }

    @JsonCreator
    public static FooEnum getLogTypeFromFullName(String fullName) {
        for (FooEnum logType : FooEnum.values()) {
            if (logType.fullName.equals(fullName)) {
                return logType;
            }
        }
        return UNKNOWN;
    }

} 
```

因此 LoggingDto 类的属性“logType”的值将是 DATA3_LOG

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-08-27T13:05:19.027

这篇文章很旧，但如果它可以帮助某人，请使用 JsonFormat.Shape.STRING

```
@JsonFormat(shape = JsonFormat.Shape.STRING)
public enum SomeEnum{
    @JsonProperty("SOME_PROPERTY")
    someProperty,
    ...
} 
```

代码结果是这样的

```
{"someenum":"SOME_PROPERTY"} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-12-01T05:44:33.410

```
@JsonFormat(shape = JsonFormat.Shape.OBJECT)
public enum LoginOptionType {

 PHONE(1, "Phone"), MAIL(2, "mail"), PERSONAL_EMAIL(3, "Personal email");

private static List<LoginOptionType> all;

static {
    all = new ArrayList<LoginOptionType>() {
        {
            add(LoginOptionType.PHONE);
            add(LoginOptionType.MAIL);
            add(LoginOptionType.PERSONAL_EMAIL);
        }
    };
}

private final Integer viewValue;

private final String name;

LoginOptionType(Integer viewValue, String name) {
    this.viewValue = viewValue;
    this.name = name;
}

public Integer getViewValue() {
    return viewValue;
}

public String getName() {
    return name;
}

public static List<LoginOptionType> getAll() {
    return all;
}
} 
```

> 回复

```
[
{
    "viewValue": 1,
    "name": "Phone"
},
{
    "viewValue": 2,
    "name": "mail"
},
{
    "viewValue": 3,
    "name": "Personal email"
}
] 
```*

# jquery - 使用 Jquery 为 Div 宽度和位置设置动画（或 Div 消失的情况）

> ID：12468765
> 
> 赞同：0
> 
> 时间：2012-09-18T00:12:53.020
> 
> 标签：jquery, html, jquery-animate, position

所以，

我已经将两个相邻 DIV 的 JSfiddle 放在一个容器 div 中。当光标悬停在两个子 div 上时，它们应该水平扩展以填充容器。这适用于最左边的 DIV，但是当我尝试与右侧的子 DIV 相同的动画（即，必须在*两个*方向上扩展以填充容器的 DIV）时，它运行不顺畅。我试图同时为子 DIV 向容器左边缘的移动及其扩展设置动画，但这些属性在我正在使用的脚本中不起作用。有什么想法吗？

[请参阅此处](http://jsfiddle.net/Koubenec/F84FA/32/)的 JSfiddle 。（**此小提琴已过时，更新版本见下文**）

**编辑：**

我在使用这个 JScript 为 DIV 向左移动动画方面取得了进展：

```
$(document).ready(function() {
    $("#profdevcontainer").hover(function() {
        $(this).stop().animate({
            width: '1005px',
            marginLeft: '-170px',
            // 'z-index': '99'
        }, 'fast');
    }, function() {
        $(this).stop().animate({
            width: '250px',
            marginLeft: '0px'
        }, 'fast');   
    });
}); 
```

但是当 DIV 的动画几乎完成时，它会消失，正如您在更新后的[JSfiddle](http://jsfiddle.net/Koubenec/bVPwT/30/)中看到的那样。我确信这与我的父容器的溢出属性有关，但我能想到的唯一可能的原因是：

1.  我在悬停时应用的 CSS 属性和我用 javascript 制作动画的属性之间存在冲突，
2.  动画尺寸以某种方式触发了溢出。

这些是有问题的 div 的 CSS：

```
#profdevcontainer {
width: 250px;
height: 60px;
background-color: yellow;
float: left;
margin-right: 3px;
}

#profdevcontainer:hover {
/* animated wit css / width: 1005px; */
/* animated wit css / height: 60px;
/* animated wit css / background-color: yellow;
/* animated wit css / float: left; */
/* position: absolute; */
z-index: 99;
margin-right: 3px; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T00:29:01.370

通过为 DIV 设置负左边距以将它们引导到正确的位置并避免闪烁，我能够获得所需的效果。jsfiddle 在[这里](http://jsfiddle.net/Koubenec/WTcZc/22/embedded/result/)。

# memcached - 如何清除centos上的memcached？

> ID：12468766
> 
> 赞同：0
> 
> 时间：2012-09-18T00:13:27.503
> 
> 标签：memcached, centos

我有一个运行 memcached 的 centos 服务器。我使用 spymemcached 客户端来存储缓存键值对。

我需要清除所有缓存值和键。

我是在客户端还是服务器端执行此操作？

我已经尝试过 telnet 方法来 flush_all

我在 spymemcached 方面尝试过：

冲洗（）；

这些都不会清除缓存。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T05:41:04.110

`flush();`只是使 memcached 缓存中的所有项目无效。您可能需要重新启动 memcached 服务器以清除缓存。从技术上讲，使用 go `flush();`memcached 是安全的，它将在需要时使用分配的内存。

# c# - 在多个类中引用相同的对象实例

> ID：12468767
> 
> 赞同：0
> 
> 时间：2012-09-18T00:13:48.477
> 
> 标签：c#, class, object

如果在 C# 中给定相同的名称和相同的命名空间，您能否引用（不传递对象）在您的 main 中创建的另一个类的对象？

就像说你有 Main、A 类和 B 类。在 Main 你有“A ap = new A();” 如果您创建“A ap = new A();” 在 B 类内部，这两个对象会引用对象 A 的同一个实例吗？因此，如果您更改主对象“ap”中的值，它也会更改 B 类中对象“ap”的相同变量。基本上它们是否指向堆中 A 类的相同实例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T00:18:05.923

`new`顾名思义，每次使用 时，都会在堆上创建一个新对象。现在，如果您希望这两个类指向同一个对象，您可以将对象`ap`（或者更具体地说，引用变量的值`ap`）传递给类 B，它们将指向同一个对象。

# javascript - Dojo Query 在选择页面中的元素时需要帮助

> ID：12468768
> 
> 赞同：0
> 
> 时间：2012-09-18T00:13:49.017
> 
> 标签：javascript, dojo

我有包含以下元素的 HTML 页面

```
<img src='some link' id='_id_portlet1_1234' > link </img>     
<img src='some link' id='_id_portlet2_4567' > link </img> 
```

我必须选择模式为`_id_portlet*`with dojo.query 的所有 id 元素。你们能帮忙提供 dojo.query 以获取上述 id 元素的列表吗？这里的源代码是由模板文件生成的，每次呈现页面时，都会在 id 后面附加一个随机数。我需要选择所有遵循`_id_portlet*`. 谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T00:31:07.893

第一件事 -`<img>`没有结束标签，所以不是无效

```
<img src="some link" id="_portlet1_1234" class="portlet"> link </img> 
```

你应该使用

```
<img src="some link" id="_portlet1_1234" class="portlet" /> 
```

* * *

并为选择图像试试这个

```
dojo.query('img[id^="_id_portlet"]').style("border", "5px solid red"); 
```

[**演示**](http://jsfiddle.net/uWGeT/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T00:26:24.887

你应该使用类：

```
<img src="some link" id="portlet1_1234" class="portlet"> link </img>     
<img src="some link" id="portlet2_4567" class="portlet"> link </img> 
```

然后我不知道dojo，但是在普通的javascript中你可以使用

```
document.getElementsByClassName("portlet"); 
```

`_id_`在它的开头添加`id`它是一个pleonasm。

# eclipse - Eclipse 不解析类型

> ID：12468769
> 
> 赞同：2
> 
> 时间：2012-09-18T00:14:07.007
> 
> 标签：eclipse, eclipse-cdt

我正在为我正在学习的课程使用 Eclipse Juno CDT，但它告诉我它无法解析包含文件中的类型，而且这些不是我编写的标题。

如果我通过命令行通过 g++ 运行它，我编写的程序完全可以编译和运行。问题是我无法在 Eclipse 中调试，因为它甚至无法识别字符串等基本类型。此外，没有代码完成。它发现包含文件很好，我可以打开它们并查看内容，但它仍然无法解析类型。

我已经为有类似问题的人看到了很多建议，但结果都是没有找到包含文件，这不是我的问题。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T21:53:39.407

您可能已经为标题本身包含了正确的目录。在我的系统上是：/usr/include/c++/4.4.6/

但是，您可能没有包含宏_GLIBCXX_BEGIN_NAMESPACE 定义的目录。如果没有这个宏定义，eclipse 不知道 stl 类型在 std 命名空间中。在我的系统上，这个宏定义被隐藏在主 c++ 目录下。尝试将以下路径添加到包含列表中：

```
/usr/include/c++/4.4.6/x86_64-redhat-linux
/usr/include/c++/4.4.6/x86_64-redhat-linux/bits 
```

如果您不在 redhat 上，请寻找类似的东西。您可以转到 /usr/include 并运行以下 grep 以查找具有必要宏定义的标头：

```
grep -R -P "define\\s*_GLIBCXX_BEGIN_NAMESPACE\(" . 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T00:23:12.747

也许这些类型在命名空间中，而您没有限定它们（也没有使用 using 声明）。

# javascript - 将参数传递给 setTimeout

> ID：12468775
> 
> 赞同：3
> 
> 时间：2012-09-18T00:15:08.830
> 
> 标签：javascript, jquery, settimeout

将参数从函数传递到`setTimeout`调用中是什么意思？怎么又`path`回来了`undefined`？而我应该怎么做呢？

```
$('.curatorSpace').bind('click', function() {
    var path = $(this).attr('data-path');
    setTimeout(function(path) {
        if($('#curatorRibbon').hasClass('ui-draggable-dragging')){return false}
        runOverlay(path);
    }, 100);
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T00:16:38.873

你不需要/必须在那里传递任何东西。`path`是一个*自由变量*，由您传入的匿名函数关闭`setTimeout`。因此，您可以访问它。

```
setTimeout(function() {
    if($('curatorRibbon').hasClass('ui-draggable-dragging')){return false}
    runOverlay(path);  // path gets resolved in the parent context
}, 100); 
```

实际上，通过声明`path`该匿名函数的形式参数，您已经通过作用域链覆盖了该变量查找过程。摆脱它。

# ruby-on-rails - Rails 线程饥饿

> ID：12468781
> 
> 赞同：1
> 
> 时间：2012-09-18T00:15:46.230
> 
> 标签：ruby-on-rails, ruby, multithreading, memory-leaks, rake

我目前正在开发一项 IMAP 服务，该服务从 Gmail 中提取用户电子邮件的滑动窗口，并将其存储在本地，以提高性能。传输、解码和存储电子邮件是可行的，但是通过 IMAP IDLE 命令空闲的线程在保持活力方面遇到了困难。

怎么了？线程通过运行 rake 任务启动，每个用户一个线程。这工作正常，如果 IMAP IDLE 信号丢失、连接重置或线程死亡，我将重新启动有问题的线程。但是代码似乎会导致内存泄漏或其他原因，从而导致线程饥饿。换句话说，由于没有收到 IMAP IDLE 信号，线程被成功识别为死亡，但是当我尝试重新启动它们时，线程不会自行执行。

更具体地说，内存使用量在几天内从**64 MiB 增加到 >300 MiB ，可能导致线程不足。**不过，我不确定这一点。在登台机器上使用较少的线程（仅 15 个用户 = 15 个线程，加上 Ruby IMAP 库中的 15 个额外线程）进行调试并计算创建的对象时，只能发现内存使用量的增加可以忽略不计。

因此，我的问题是...... ;)

*   如何正确调试？
*   Ruby 是否存在线程饥饿问题？我们也尝试过 JRuby，但无济于事。
*   还有其他人是否遇到过或是否有其他人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:54:18.760

这是一个很长的尝试，但是如果您怀疑您的代码或某些库泄漏了线程或内存，您可以尝试[使用 Plumbr](http://plumbr.eu)与您的应用程序的 JRuby 版本。Plumbr 的主要目标是发现 Java 应用程序中的内存泄漏，但我们也有一些基于 JVM 的语言的成功案例。

# code-signing - 使用 Apple 证书对 Windows 程序进行代码签名？

> ID：12468783
> 
> 赞同：32
> 
> 时间：2012-09-18T00:16:29.720
> 
> 标签：code-signing, osx-gatekeeper

我正在尝试最小化为 Mac OS X 和 Windows 开发程序所需的代码签名证书的成本。据我所知，我不能使用 3rd 方证书来签署我的 OS X 程序并让它通过[GateKeeper ，如此](https://developer.apple.com/resources/developer-id/)[处](https://stackoverflow.com/questions/10592638/using-existing-ca-issued-cert-to-sign-os-x-application-and-keep-gatekeeper-happy)所示。

我可以换一种方式使用 Apple Developer 证书来签署我的程序的 Windows 版本吗？

还相关： [非 Apple 颁发的代码签名证书：它可以与 Mac OS 10.8 Gatekeeper 一起使用吗？](https://stackoverflow.com/questions/11833481/non-apple-issued-code-signing-certificate-can-it-work-with-mac-os-10-8-gatekeep)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-11T23:06:10.483

前段时间也有同样的想法。但我不认为这是可能的，因为 Apple Developer Certificate 是由 Apple 验证（签名）的，而且我认为 Apple Root Certificate 不会安装在普通的 Windows 机器上。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-03-30T14:57:03.083

嗨 Joe LTNS 每次我的 Comodo CS 证书更新时，我都会检查这个问题的状态，因为麻烦/金钱与 Apple 相比

唉，Apple 的 CA 仍然不在 Windows 黄金名单 AFAIK 中。我检查了Win10下的Apple Software Update，它的证书颁发者是Verisign。

OT 这里不是证书专家，但如果 Apple 炮制了 CA 和 Apple 都可以担保/撤销的中间证书，那么不少 Windows 开发人员会为 Apple 的 100 美元开发计划支付 100 美元的 5 年非 MAS 代码设计证书（并且可能会涉足 App Store/ios 开发作为奖励）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-03-22T15:17:07.697

这是一篇关于它的详细文章：http: [//luminaryapps.com/blog/code-signing-and-packaging-windows-apps-on-a-mac/](http://luminaryapps.com/blog/code-signing-and-packaging-windows-apps-on-a-mac/)以及更普遍的关于在 Mac 上对 Windows 应用程序进行代码签名的文章。我引用：

> 现在您需要获得 Windows 开发人员证书。不幸的是，您不能使用您的 Apple 证书（好吧，实际上您可以，但这无济于事，因为 Apple 不是 Windows 认可的证书颁发机构）。这是 Windows 认可的根证书颁发机构的列表。

所以这似乎证实了其他答案。

# php - 在 htmlentities 中使用 php 5.4 的新常量 ENT_DISALLOWED

> ID：12468786
> 
> 赞同：5
> 
> 时间：2012-09-18T00:17:18.003
> 
> 标签：php, utf-8, php-5.3, porting, html-entities

我试图以 htmlencoded 方式输出一个字符串，并且该[`htmlentities()`函数](http://php.net/htmlentities)始终返回一个空字符串。

我确切地知道它为什么这样做。好吧，我没有运行 PHP 5.4 我安装了最新的 PHP 5.3 版本。

问题是我将如何能够对具有无效代码单元序列的字符串进行 htmlencode。

根据手册，`ENT_SUBSTITUTE`是要走的路。但是这个常量在 PHP 5.3.X 中没有定义。

我这样做了：

```
if (!defined('ENT_SUBSTITUTE')) {
    define('ENT_SUBSTITUTE', 8);
} 
```

仍然没有运气。`htmlentities`仍然返回空字符串。

我想尝试一下`ENT_DISALLOWED`，但我找不到它对应的 long 值。

所以我的问题是两个折叠

1.  PHP 5.4 的常量值是`ENT_DISALLOWED`多少？

2.  如何确保可以清除包含非 UTF-8 字符（例如[*智能引号）的字符串？*](http://en.wikipedia.org/wiki/Quotation_mark_glyphs)- 不仅仅是智能引号，还有任何导致`htmlentities()`返回空白字符串的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-11T12:27:24.643

确实，`htmlentities()`在 PHP 5.3 中没有`ENT_SUBSTITUTE`标志，但是它有（不是真正建议的）`ENT_IGNORE`标志。注意注意事项并在使用前尝试理解它：

> 不鼓励使用此标志，因为它[可能具有安全隐患](http://unicode.org/reports/tr36/#Deletion_of_Noncharacters)。

最好首先了解输入字符串存在问题的原因。大多数情况下，用户只是缺少指定正确的编码。

例如，首先将字符串重新编码为 UTF-8，然后将其传递给`htmlspecialchars()`or `htmlentities()`。说到智能引号，您可能正在使用 Windows-1252 编码的字符串。您甚至不需要在使用前进行转换，您只需正确指定字符集（PHP 5.3）：

```
htmlentities($string, ENT_QUOTES, $encoding = 'Windows-1252'); 
```

当然，这只适用*于*输入*`$string`*以 Windows-1252 (CP1252) 编码的情况。首先找出正确的编码，然后它通常没有问题。对于不支持的编码，首先重新编码为支持的编码，例如使用[*iconv*](http://php.net/book.iconv)或[*mb_string*](http://php.net/book.mbstring)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T21:18:02.203

如您所说，[添加了这些常量](http://php.net/manual/en/changelog.strings.php)在`5.4.0`. 问题是，支持也是新的`5.4.0`。这意味着您可以传递任何您想要的值，老年人`htmlentities`不会理解它。

最有可能的情况是，php changelog 非常具有误导性。

# wicket - Wicket：一页中有多个反馈面板？

> ID：12468788
> 
> 赞同：3
> 
> 时间：2012-09-18T00:17:37.867
> 
> 标签：wicket, feedbackpanel

我可以有多个反馈面板并以某种方式确定哪个属于什么？

当我尝试添加多个时，所有验证消息都会发送到所有面板。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T10:35:53.473

你可以使用`IFeedbackMessageFilter`你自己发现的。至于您的答案中提到的否定过滤器，我想您想在 final 中捕获任何以前未显示的消息`FeedbackPanel`。这可以使用带有以下接受方法的 FeedbackMassagefilter 存档：

```
public boolean accept(FeedbackMessage message) {
    return !message.isRendered();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T02:45:11.493

找到了答案。可以使用以下方法过滤发送到反馈面板的消息`IFeedbackMessageFilter`：

```
this.feedbackPanel.setFilter( new ContainerFeedbackMessageFilter(this) ); 
```

不过，我需要某种否定过滤器来处理另一个过滤器。

# python - 治愈 ang2pix:pla nckerror

> ID：12468796
> 
> 赞同：1
> 
> 时间：2012-09-18T00:18:25.367
> 
> 标签：python

I am trying to convert CATALOG.FIT into healpix fits image. I am able to read fits catalog and convert ra and dec into theta and phi. But when I use ang2pix, it throws an error"

```
 Error encountered at /home/faisal/healpy/healpy-healpy-aa5f605/hpbeta  
 /Healpix_cxx/healpix_base.cc, line 829
 (function I T_Healpix_Base<I>::loc2pix(double, double, double, bool) const [with I = 
 long int]) 
```

must not happen

terminate called after throwing an instance of 'PlanckError' Abort

```
-------------------
import numpy as np

import string as s

from scipy.interpolate import interp1d

import matplotlib.pyplot as plt

import healpy as hp

from numpy import sin, cos, arccos, arcsin, arctan2

import astro_util as au

#start healpy---------------------------

nvss_ra=np.arange(1,100,1) 

nvss_dec=np.arange(1,100,1)

print nvss_ra

theta,phi= au.euler(nvss_ra,nvss_dec,1)

print theta

theta1=theta/(57.3248)

phi1=phi/(57.3248)+((3.14159265359)/2)

nvssmap=np.zeros(hp.nside2npix(512))

#Working till this point

pix=hp.pixelfunc.ang2pix(512,theta1, phi1)

nvssmap[pix]=1

hp.fitsfunc.write_map("nvss_map.fits",nvssmap) 
```

* * *

Please reply if someone also faced the similar problem.

Thanks

Faisal

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T01:39:27.290

发现问题，`theta`定义在 0 和 pi 之间，如果你给`ang2pix`一个负值，它会失败并出现该错误。

我将在 healpy 源代码中添加更有意义的错误消息。

# jquery - I keep getting the error "Object # has no method 'on'" in jQuery 1.8 when trying to trigger click events on dynamically loaded elements I am using jQuery 1.8 and have been getting this error on some pages when I use the .on() fun 问问题 问问题 2012-09-18T00:18:36.243 1154 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I am using jQuery 1.8 and have been getting this error on some pages when I use the .on() function. Other pages, seemingly doing the exact same thing -- attaching triggers to dynamically created elements, that I use do not generate this error: Uncaught TypeError: Object # has no method 'on' JS: $(document).ready(function(){ $(document).on("click","button.pagebutton",function() { $("div#pagesforreview").hide(); jsD=Date(); jsP=$(this).html(); $("div#externpage").load("prexternpage.php",{d:jsD,p:jsP},function() { $("div#externpage").show(); $("div#pageactions").show(); jsNc=1; $("div#pagecomments").load("praddcomment.php",{d:jsD,nc:jsNc},function() { $("div#pagecomments").show(); }); }); }); }); All dynamically generated 'pagebutton' buttons, don't trigger. And the error shows up. If I use the .live() method that is deprecated, no problems. But I prefer to use the proper new 1.8 non-deprecated method, if possible? You can use xargs -L1 lsof -p to run lsof once per pid. Even better: use lsof -c to list all open files from commands matching a specific pattern: lsof -c bas # list all processes with commands starting with 'bas' lsof -c '/ash$/x' # list all commands ending with 'ash' (regexp syntax) jqueryjquery-1.8 4 2 回答 2 This answer is useful 0 而是 $(document).ready(function(){ 在第一行写下这个： jQuery(document).ready(function($){ 它对我有用。 于 2014-01-17T14:28:47.650 回答 This answer is useful 0 我发现我的头文件是从我的生产服务器而不是我的开发服务器（1.8 版）加载 jquery 库（1.6 版）......从而产生了问题。哦。感谢您的评论。 于 2012-09-18T20:37:36.357 回答 Related 2 c++ - 0xC0000005：访问冲突写入位置 c++ 数组 3 javascript - javascript: goto 语句 1 variables - 我想用base64编码将值传递给icewarp。Icewarp 需要解码脚本吗？ 1 c++ - 是否可以将 C++ 共享库加载到 Mathematica 8.0？ 0 java - 将editText放在relativeLayout中的组件下方，但组件填满屏幕？ 1 javascript - 在javascript中替换图像而不是添加到列表 2 html - 我可以缩放图像以超出其绑定的框吗？ 1 android - 如何从 Android 中的特定号码中删除彩信？ 1 c# - 可查询的基于 Web 的结果的设计 5 java - 如何降低两个列表算法中搜索的复杂性？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12468797
> 
> 赞同：1
> 
> 时间：
> 
> 标签：jquery, jquery-1.8

I am using jQuery 1.8 and have been getting this error on some pages when I use the .on() function. Other pages, seemingly doing the exact same thing -- attaching triggers to dynamically created elements, that I use do not generate this error:

```
Uncaught TypeError: Object #<Object> has no method 'on' 
```

JS:

```
$(document).ready(function(){
    $(document).on("click","button.pagebutton",function() {
        $("div#pagesforreview").hide();
        jsD=Date();
        jsP=$(this).html();
        $("div#externpage").load("prexternpage.php",{d:jsD,p:jsP},function() {
            $("div#externpage").show();
            $("div#pageactions").show();
            jsNc=1;
            $("div#pagecomments").load("praddcomment.php",{d:jsD,nc:jsNc},function() {
            $("div#pagecomments").show();
            });
        });
    });
}); 
```

All dynamically generated 'pagebutton' buttons, don't trigger. And the error shows up. If I use the .live() method that is deprecated, no problems. But I prefer to use the proper new 1.8 non-deprecated method, if possible?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T14:28:47.650

而是 `$(document).ready(function(){` 在第一行写下这个： `jQuery(document).ready(function($){` 它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T20:37:36.357

我发现我的头文件是从我的生产服务器而不是我的开发服务器（1.8 版）加载 jquery 库（1.6 版）......从而产生了问题。哦。感谢您的评论。

# c++ - 使用 stringstream 标记具有不同分隔符的字符串

> ID：12468798
> 
> 赞同：1
> 
> 时间：2012-09-18T00:18:39.363
> 
> 标签：c++, parsing, tokenize, stringstream

如何使用 stringstream 来标记看起来像这样的行。

[标签] 操作码 [arg1] [,arg2]

标签可能并不总是存在，但如果不存在，则会有一个空白区域。操作码始终存在，并且操作码和 arg1 之间有一个空格或制表符。然后 arg1 和 arg2 之间没有空格，但它用逗号分隔。

此外，一些空白行上会有空白，因此需要丢弃它们。'#' 是注释

例如：

```
#Sample Input
TOP  NoP
     L   2,1
VAL  INT  0 
```

这只是我将从中读取的文本文件的一个示例。因此，在第一行的标签中将是 TOP 并且操作码将 = NOP 并且没有传递任何参数。

我一直在努力，但我需要一种更简单的方法来标记化，从我所见，stringstream 似乎是我想使用的，所以如果有人能告诉我如何做到这一点，我我真的很感激。

我一直在绞尽脑汁思考如何做到这一点，只是为了向你展示我不只是不工作就问，这是我当前的代码：

```
int counter = 0;
int i = 0;
int j = 0;
int p = 0;

while (getline(myFile, line, '\n'))
{

    if (line[0] == '#')
    {
        continue;
    }

    if (line.length() == 0)
    {
        continue;
    }

    if (line.empty())
    {
        continue;
    }

    // If the first letter isn't a tab or space then it's a label

    if (line[0] != '\t' && line[0] != ' ')
    {

        string delimeters = "\t ";

        int current;
        int next = -1;

        current = next + 1;
        next = line.find_first_of( delimeters, current);
        label = line.substr( current, next - current );

        Symtablelab[i] = label;
        Symtablepos[i] = counter;

        if(next>0)
        {
            current = next + 1;
            next = line.find_first_of(delimeters, current);
            opcode = line.substr(current, next - current);

            if (opcode != "WORDS" && opcode != "INT")
            {
                counter += 3;
            }

            if (opcode == "INT")
            {
                counter++;
            }

            if (next > 0)
            {
                delimeters = ", \n\t";
                current = next + 1;
                next = line.find_first_of(delimeters, current);
                arg1 = line.substr(current, next-current);

                if (opcode == "WORDS")
                {
                    counter += atoi(arg1.c_str());
                }
            }

            if (next > 0)
            {
                delimeters ="\n";
                current = next +1;
                next = line.find_first_of(delimeters,current);
                arg2 = line.substr(current, next-current);

            }
        }

        i++;

    }

    // If the first character is a tab or space then there is no label and we just need to get a counter
    if (line[0] == '\t' || line[0] == ' ')
    {
        string delimeters = "\t \n";
        int current;
        int next = -1;
        current = next + 1;
        next = line.find_first_of( delimeters, current);
        label = line.substr( current, next - current );

    if(next>=0)
        {
            current = next + 1;
            next = line.find_first_of(delimeters, current);
            opcode = line.substr(current, next - current);

            if (opcode == "\t" || opcode =="\n"|| opcode ==" ")
            {
                continue;
            }

            if (opcode != "WORDS" && opcode != "INT")
            {
                counter += 3;
            }

            if (opcode == "INT")
            {
                counter++;
            }

            if (next > 0)
            {
                delimeters = ", \n\t";
                current = next + 1;
                next = line.find_first_of(delimeters, current);
                arg1 = line.substr(current, next-current);

                if (opcode == "WORDS")
                {
                    counter += atoi(arg1.c_str());
                }

            }

            if (next > 0)
            {
                delimeters ="\n\t ";
                current = next +1;
                next = line.find_first_of(delimeters,current);
                arg2 = line.substr(current, next-current);

            }
        }

    }
}

myFile.clear();
myFile.seekg(0, ios::beg);

while(getline(myFile, line))
{
    if (line.empty())
    {
        continue;
    }

    if (line[0] == '#')
    {
        continue;
    }

    if (line.length() == 0)
    {
        continue;
    }

    // If the first letter isn't a tab or space then it's a label

    if (line[0] != '\t' && line[0] != ' ')
    {

        string delimeters = "\t ";

        int current;
        int next = -1;

        current = next + 1;
        next = line.find_first_of( delimeters, current);
        label = line.substr( current, next - current );

        if(next>0)
        {
            current = next + 1;
            next = line.find_first_of(delimeters, current);
            opcode = line.substr(current, next - current);

            if (next > 0)
            {
                delimeters = ", \n\t";
                current = next + 1;
                next = line.find_first_of(delimeters, current);
                arg1 = line.substr(current, next-current);

            }

            if (next > 0)
            {
                delimeters ="\n\t ";
                current = next +1;
                next = line.find_first_of(delimeters,current);
                arg2 = line.substr(current, next-current);

            }
        }

        if (opcode == "INT")
        {
            memory[p] = arg1;
            p++;
            continue;
        }

        if (opcode == "HALT" || opcode == "NOP" || opcode == "P_REGS")
        {
            memory[p] = opcode;
            p+=3;
            continue;
        }

        if(opcode == "J" || opcode =="JEQR" || opcode == "JNE" || opcode == "JNER" || opcode == "JLT" || opcode == "JLTR" || opcode == "JGT" || opcode == "JGTR" || opcode == "JLE" || opcode == "JLER" || opcode == "JGE" || opcode == "JGER" || opcode == "JR")
        {
            memory[p] = opcode;
            memory[p+1] = arg1;
            p+=3;
            continue;
        }

        if (opcode == "WORDS")
        {
            int l = atoi(arg1.c_str());
            for (int k = 0; k <= l; k++)
            {
                memory[p+k] = "0";
            }

            p+=l;
            continue;
        }

        else
        {
            memory[p] = opcode;
            memory[p+1] = arg1;
            memory[p+2] = arg2;
            p+=3;
        }

    }

    // If the first character is a tab or space then there is no label and we just need to get a counter        

    if (line[0] == '\t' || line[0] == ' ')
    {
        string delimeters = "\t ";
        int current;
        int next = -1;
        current = next + 1;
        next = line.find_first_of( delimeters, current);
        label = line.substr( current, next - current );

    if(next>=0)
        {
            current = next + 1;
            next = line.find_first_of(delimeters, current);
            opcode = line.substr(current, next - current);

            if (opcode == "\t" || opcode =="\n"|| opcode ==" "|| opcode == "")
            {
                continue;
            }

            if (next > 0)
            {
                delimeters = ", \n\t";
                current = next + 1;
                next = line.find_first_of(delimeters, current);
                arg1 = line.substr(current, next-current);

            }

            if (next > 0)
            {
                delimeters ="\n\t ";
                current = next +1;
                next = line.find_first_of(delimeters,current);
                arg2 = line.substr(current, next-current);

            }
        }

        if (opcode == "INT")
        {
            memory[p] = arg1;
            p++;
            continue;
        }

        if (opcode == "HALT" || opcode == "NOP" || opcode == "P_REGS")
        {
            memory[p] = opcode;
            p+=3;
            continue;
        }

        if(opcode == "J" || opcode =="JEQR" || opcode == "JNE" || opcode == "JNER" || opcode == "JLT" || opcode == "JLTR" || opcode == "JGT" || opcode == "JGTR" || opcode == "JLE" || opcode == "JLER" || opcode == "JGE" || opcode == "JGER" || opcode == "JR")
        {
            memory[p] = opcode;
            memory[p+1] = arg1;
            p+=3;
            continue;
        }

        if (opcode == "WORDS")
        {
            int l = atoi(arg1.c_str());
            for (int k = 0; k <= l; k++)
            {
                memory[p+k] = "0";
            }

            p+=l;

            continue;
        }

        else
        {
            memory[p] = opcode;
            memory[p+1] = arg1;
            memory[p+2] = arg2;
            p+=3;
        }
    }
} 
```

我显然想让这变得更好，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T10:18:53.837

在你为维护那些庞大的语句或尝试学习 Boost Spirit 而发疯之前`if`，让我们尝试编写一个非常简单的解析器。这篇文章有点长，没有直截了当，所以请多多包涵。

首先，我们需要一个语法，这似乎很简单：

> > ```
> >  line
> >           label(optional)   opcode   argument-list(optional)
> > 
> >     argument-list
> >           argument
> >           argument, argument-list 
> > ```

英文：一行代码由一个可选标签、一个操作码和一个可选参数列表组成。参数列表可以是单个参数（整数），也可以是后跟分隔符（逗号）和另一个参数列表的参数。

让我们首先定义两个数据结构。标签应该是唯一的（对吗？），所以我们会有一组字符串，这样我们就可以随时轻松地查找它们，如果发现重复的标签可能会报告错误。下一个是字符串到 的映射`size_t`，它充当有效操作码的符号表以及每个操作码的预期参数数量。

```
std::set<std::string> labels;
std::map<std::string, size_t> symbol_table = {
    { "INT", 1},
    { "NOP", 0},
    { "L",   2}
}; 
```

我不知道`memory`您的代码到底是什么，但是您计算偏移量以计算将参数放在何处的方式似乎过于复杂。让我们定义一个可以优雅地保存一行代码的数据结构。我会做这样的事情：

```
typedef std::vector<int> arg_list;

struct code_line {
    code_line() : label(), opcode(), args() {}
    std::string  label;      // labels are optional, so an empty string
                             // will mean absence of label
    std::string  opcode;     // opcode, doh
    arg_list     args;       // variable number of arguments, it can be empty, too.
                             // It needs to match with opcode, we'll deal with
                             // that later
}; 
```

语法错误是一种不容易恢复的异常情况，所以让我们通过抛出异常来处理它们。我们简单的异常类可以如下所示：

```
struct syntax_error {
    syntax_error(std::string m) : msg(m) { }
    std::string msg;
}; 
```

标记化、词法分析和解析通常是独立的任务。但我想对于这个简单的例子，我们可以将分词器和词法分析器组合在一个类中。我们已经知道我们的语法是由哪些元素构成的，所以让我们编写一个类，它将输入作为文本并从中提取语法元素。界面可能如下所示：

```
class token_stream {
    std::istringstream stream; // stringstream for input
    std::string buffer;        // a buffer for a token, more on this later
public:
    token_stream(std::string str) : stream(str), buffer() { }

    // these methods are self-explanatory
    std::string get_label();
    std::string get_opcode();
    arg_list get_arglist();

    // we're taking a kind of top-down approach with this,
    // so let's forget about implementations for now
}; 
```

还有工作马，一个试图理解标记并`code_line`在一切正常时返回一个结构的函数：

```
code_line parse(std::string line)
{
    code_line temp;
    token_stream stream(line);

    // Again, self-explanatory, get a label, opcode and argument list from
    // token stream.

    temp.label = stream.get_label();
    temp.opcode = stream.get_opcode();
    temp.args = stream.get_arglist();

    // Everything went fine so far, remember we said we'd be throwing exceptions
    // in case of syntax errors.

    // Now we can check if we got the correct number of arguments for the given opcode:

    if (symbol_table[temp.opcode] != temp.args.size()) {
        throw syntax_error("Wrong number of parameters.");
    }

    // The last thing, if there's a label in the line, we insert it in the table.
    // We couldn't do that inside the get_label method, because at that time
    // we didn't yet know if the rest of the line is sintactically valid and a
    // exception thrown would have left us with a "dangling" label in the table.

    if (!temp.label.empty()) labels.insert(temp.label);

    return temp;
} 
```

以下是我们如何使用这一切：

```
int main()
{
    std::string line;
    std::vector<code_line> code;

    while (std::getline(std::cin, line)) {

        // empty line or a comment, ignore it
        if (line.empty() || line[0] = '#') continue;

        try {
            code.push_back(parse(line));
        } catch (syntax_error& e) {
            std::cout << e.msg << '\n';

            // Give up, try again, log... up to you.
        }
    }
} 
```

如果输入被成功解析，我们现在得到一个包含所有信息（标签、参数数量）的有效行向量，并且可以用它做几乎任何我们喜欢的事情。IMO，此代码将比您的代码更容易维护和扩展。例如，如果您需要引入新的操作码，只需在 map ( `symbol_table`) 中添加另一个条目。与你的`if`陈述相比如何？:)

唯一剩下的是`token_stream`s 方法的实际实现。我是这样做的`get_label`：

```
std::string token_stream::get_label()
{
    std::string temp;

    // Unless the stream is empty (and it shouldn't be, we checked that in main),
    // operator>> for std::string is unlikely to fail. It doesn't hurt to be robust
    // with error checking, though

    if (!(stream >> temp)) throw ("Fatal error, empty line, bad stream?");

    // Ok, we got something. First we should check if the string consists of valid
    // characters - you probably don't want punctuation characters and such in a label.
    // I leave this part out for simplicity.

    // Since labels are optional, we need to check if the token is an opcode.
    // If that's the case, we return an empty (no) label.

    if (symbol_table.find(temp) != symbol_table.end()) {
        buffer = temp;
        return "";
    }

    // Note that above is where that `buffer` member of token_stream class got used.
    // If the token was an opcode, we needed to save it so get_opcode method can make
    // use of it. The other option would be to put the string back in the underlying 
    // stringstream, but that's more work and more code. This way, get_opcode needs   
    // to check if there's anything in buffer and use it, or otherwise extract from
    // the stringstream normally.

    // Check if the label was used before:

    if (labels.count(temp))
        throw syntax_error("Label already used.");

    return temp;
} 
```

就是这样。我将其余的实现留给您作为练习。希望它有所帮助。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T00:23:34.370

你肯定需要正则表达式，比如 boost regex；或用于此版本问题的词法分析和解析工具，例如 lex/yacc、flex/bison 或 boost spirit。

在这种复杂性下维护字符串和流是不值得的。

# php - 避免为多个产品重复同一页面

> ID：12468801
> 
> 赞同：1
> 
> 时间：2012-09-18T00:19:08.230
> 
> 标签：php, internal-server-error

我有一个产品名称及其图像的列表，因为我想避免为多个产品重复同一页面。我正在执行以下操作：

我正在向 a 变量传递我想出`id`现在 products.php 页面中的名称，例如，我正在使用 `products.php?id=anyname` 和使用`$_GET`来了解 id 名称变量。然后我用一个数组填充一个菜单，其中包含我需要的所有名称

例如，在我将显示的菜单中：

`key: gfon` 和`value: Fondant pt`

然后将加载带有 gfon.png 的图像

这是代码

```
<li>
        <a href="menu.html" style="padding:8px 30px;">THE MAIN MENU</a>
        <ul>                

<?php
   if (isset($_GET['id'])) {
       $product = $_GET['id'];
   }

  $array = array(
    "gfon"  => "Fondant pt",
    "galf"  => "Alfajores gy",
    "gdom"  => "Domino tre",
    "gesp"  => "Espiral ere",
    "gsan"  => "Sandwich  we ",
    );

   foreach($array as $key => $val) {
    echo "<li><a href=\"http://www.mysite.com/products.php?id=".$key."\">".$val."</a>    </li>";
    }
    ?>
    </ul>
 </li> 
```

然后是根据所选产品更改图片的部分

```
<?php 
echo "<h1>";
switch ($product) {
      case "gfon":
      echo "Fondant</h1>";          
      break;

      case "galf":
      echo "Alfajores</h1>";
      break;

      case "gdom":
      echo "Domino</h1>";
      break;

      case "gesp":
      echo "Espiral</h1>";
      break;            

     case "gsan":
     echo "Sandwich</h1>";
     break;         

}
echo "<p> <a href=\"http://www.mysite.com\"><img src=\"images/".$product.".png\" alt=\"" .$product." width=\"300\" height=\"300\" align=\"right\"/> </a>"

?> 
```

有时它工作，有时不工作，我偶尔会收到此错误

> 内部服务器错误
> 
> 服务器遇到内部错误或配置错误，无法完成您的请求。请联系服务器管理员，告知错误发生的时间以及您可能所做的任何可能导致错误的事情。
> 
> 服务器错误日志中可能提供有关此错误的更多信息。

另外我无权访问日志文件:(有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T00:58:19.727

您确实需要检查服务器日志以了解具体问题，但您的代码也存在问题，这里有一些更改。

```
<?php 
// Define your array before checking the $_GET['id']
$array = array(
"gfon"  => "Fondant pt",
"galf"  => "Alfajores gy",
"gdom"  => "Domino tre",
"gesp"  => "Espiral ere",
"gsan"  => "Sandwich  we ",
);
// Check that the id is in the array as a key and assign your product var, else set as null
$product = (isset($_GET['id']) && array_key_exists($_GET['id'],$array)) ? $_GET['id'] : null;

// Output your html
?>
<li>
    <a href="menu.html" style="padding:8px 30px;">THE MAIN MENU</a>
    <ul>                
    <?php foreach($array as $key=>$val):?>
        <li><a href="http://www.mysite.com/products.php?id=<?=$key?>"><?=$val?></a></li>
    <?php endforeach;?>
    </ul>
</li>

<?php 
// Replacing the switch statement with a simple if else
// Is $product not null? ok it must be within the array
if($product !== null){
    // Use explode to chop up the string and grab the first value.
    echo '<h1>'.explode(' ',$array[$product])[0].'</h1>';
    echo '<p><a href="http://www.mysite.com"><img src="images/'.$product.'.png" alt="'.$product.'" width="300" height="300" align="right" /></a>';
}else{
    // Echo something default
    echo '<h1>Default</h1>';
    echo '<p><a href="http://www.mysite.com"><img src="images/default.png" alt="" width="300" height="300" align="right" /></a>';
}
?> 
```

我注意到`alt=\"" .$product." width=\"300\"`会影响您的输出，因为您没有关闭 alt 属性。

# java - regex needed which matches for two sample string

> ID：12468803
> 
> 赞同：1
> 
> 时间：2012-09-18T00:19:13.873
> 
> 标签：java, regex

I have two input strings :

`this-is-a-sample-string-%7b3DES%7dFPvKTjGHUA3lD9Us70rfjQ==?Id=113690_2&Index=0&Referrer=IC`

`this-is-a-sample-string-%7b3DES%7dFPvKTjGHUA3lD9Us70rfjQ==`

What I want is only the `%7b3DES%7dFPvKTjGHUA3lD9Us70rfjQ==` from both of the sample strings.

I tried by using the regex `[a-zA-Z-]+-(.*)` which works fine for the second input string.

```
String inputString = "this-is-a-sample-string-%7b3DES%7dFPvKTjGHUA3lD9Us70rfjQ==";
String regexString = "[a-zA-Z-]+-(.*)";

Pattern pattern = Pattern.compile(regexString);
Matcher matcher = pattern.matcher(inputString);

if(matcher.matches()) {
    System.out.println("--->" + matcher.group(1) + "<---");
} else {
    System.out.println("nope");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T03:44:47.520

以下模式将所需组与提供的有限信息和示例相匹配：

```
-([^-?]*)(?:\?|$)

.*-(.*?)(?:\?|$) 
```

第一个将匹配连字符，然后将所有字符分组为 ? 或字符串的结尾。

第二个匹配尽可能多的字符和连字符，后跟最小的字符串到下一个问号或字符串的末尾。

有几十种写东西的方法可以匹配这个文本，所以我只是在猜测这是否是你想要的。如果这不是您所追求的，请详细说明您要完成的工作。

# python - yaml多嵌套和python字典

> ID：12468806
> 
> 赞同：13
> 
> 时间：2012-09-18T00:19:55.523
> 
> 标签：python, yaml

我是 yaml 的新手，输出是预期的格式，但想知道是否有更好的方法在 yaml 中构造下面的嵌套对象。

```
import yaml
yaml.load ("""
test1:
    a: 
      a1:
        a2:
          a3: 0
          b3: 0
          c3: 0
        b2:         
          a3: 0
          b3: 0
          c3: 0
        c2:
          a3: 0
          b3: 0
          c3: 0  
      b1:
        a2:
          a3: 0
          b3: 0
          c3: 0
        b2:         
          a3: 0
          b3: 0
          c3: 0
        c2:
          a3: 0
          b3: 0
          c3: 0 
      c1:
        a2:
          a3: 0
          b3: 0
          c3: 0
        b2:         
          a3: 0
          b3: 0
          c3: 0
        c2:
          a3: 0
          b3: 0
          c3: 0 
    b: 
      a1:
        a2:
          a3: 0
          b3: 0
          c3: 0
        b2:         
          a3: 0
          b3: 0
          c3: 0
        c2:
          a3: 0
          b3: 0
          c3: 0  
      b1:
        a2:
          a3: 0
          b3: 0
          c3: 0
        b2:         
          a3: 0
          b3: 0
          c3: 0
        c2:
          a3: 0
          b3: 0
          c3: 0 
      c1:
        a2:
          a3: 0
          b3: 0
          c3: 0
        b2:         
          a3: 0
          b3: 0
          c3: 0
        c2:
          a3: 0
          b3: 0
          c3: 0 
    c: 
      a1:
        a2:
          a3: 0
          b3: 0
          c3: 0
        b2:         
          a3: 0
          b3: 0
          c3: 0
        c2:
          a3: 0
          b3: 0
          c3: 0  
      b1:
        a2:
          a3: 0
          b3: 0
          c3: 0
        b2:         
          a3: 0
          b3: 0
          c3: 0
        c2:
          a3: 0
          b3: 0
          c3: 0 
      c1:
        a2:
          a3: 0
          b3: 0
          c3: 0
        b2:         
          a3: 0
          b3: 0
          c3: 0
        c2:
          a3: 0
          b3: 0
          c3: 0  

""") 
```

输出：

```
'test1': {'a': {'a1': {'c2': {'c3': 0, 'a3': 0, 'b3': 0}, 'a2': {'c3': 0, 'a3': 0, 'b3': 0}, 'b2': {'c3': 0, 'a3': 0, 'b3': 0}}, 'c1': {'c2': {'c3': 0, 'a3': 0, 'b3': 0}, 'a2': {'c3': 0, 'a3': 0, 'b3': 0}, 'b2': {'c3': 0, 'a3': 0, 'b3': 0}}, 'b1': {'c2': {'c3': 0, 'a3': 0, 'b3': 0}, 'a2': {'c3': 0, 'a3': 0, 'b3': 0}, 'b2': {'c3': 0, 'a3': 0, 'b3': 0}}}, 'c': {'a1': {'c2': {'c3': 0, 'a3': 0, 'b3': 0}, 'a2': {'c3': 0, 'a3': 0, 'b3': 0}, 'b2': {'c3': 0, 'a3': 0, 'b3': 0}}, 'c1': {'c2': {'c3': 0, 'a3': 0, 'b3': 0}, 'a2': {'c3': 0, 'a3': 0, 'b3': 0}, 'b2': {'c3': 0, 'a3': 0, 'b3': 0}}, 'b1': {'c2': {'c3': 0, 'a3': 0, 'b3': 0}, 'a2': {'c3': 0, 'a3': 0, 'b3': 0}, 'b2': {'c3': 0, 'a3': 0, 'b3': 0}}}, 'b': {'a1': {'c2': {'c3': 0, 'a3': 0, 'b3': 0}, 'a2': {'c3': 0, 'a3': 0, 'b3': 0}, 'b2': {'c3': 0, 'a3': 0, 'b3': 0}}, 'c1': {'c2': {'c3': 0, 'a3': 0, 'b3': 0}, 'a2': {'c3': 0, 'a3': 0, 'b3': 0}, 'b2': {'c3': 0, 'a3': 0, 'b3': 0}}, 'b1': {'c2': {'c3': 0, 'a3': 0, 'b3': 0}, 'a2': {'c3': 0, 'a3': 0, 'b3': 0}, 'b2': {'c3': 0, 'a3': 0, 'b3': 0}}}}} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-18T01:55:17.713

我可以想出两种方法来节省你在 yaml 前面打字的时间。

*使用短映射语法：*

```
test1:
    a:
      a1:
        a2: {a3: 0, b3: 0, c3: 0}
        b2: {a3: 0, b3: 0, c3: 0}
        c2: {a3: 0, b3: 0, c3: 0}
      b1:
        a2: {a3: 0, b3: 0, c3: 0}
        b2: {a3: 0, b3: 0, c3: 0}
        c2: {a3: 0, b3: 0, c3: 0}
      c1:
        a2: {a3: 0, b3: 0} 
```

*使用别名：*

```
entry: &aliasentry
  a2: {a3: 0, b3: 0, c3: 0}
  b2: {a3: 0, b3: 0, c3: 0}
  c2: {a3: 0, b3: 0, c3: 0}

test1:
    a:
      a1: *aliasentry
      b1: *aliasentry
      c1: {a2: {a3: 0, b3: 0}} 
```

# mysql - Multiple Entries to Mysql

> ID：12468807
> 
> 赞同：0
> 
> 时间：2012-09-18T00:20:00.083
> 
> 标签：mysql, phpmyadmin, registration

I have a registration page where a user can register him/herself along with 20 other people. Now I can store all those values in fine, the question I have is how to identify in the table. So let's say John registers himself and 20 of his friends. In the table, I would label him and his group with an ID number of 1, but I would label his ID specifically with a star so I know that he's the one who registered everyone else.

That's the idea I'm trying to get at, but I don't know how to do that in practice. What is the best way and how do I really go about doing this? I think I can write the code but I just need some concepts to work off of.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T00:43:23.187

您可以为此创建三个表。其中`UserList`包含所有用户的所有记录。其中`GroupList`包含所有组和组的所有者。最后`PersonGroup`包含**user_id**和某个用户所属的组。

```
CREATE TABLE UserList
(
    ID INT AUTO_INCREMENT,
    FullName VARCHAR(50),
    -- ... other columns if you want ...
    CONSTRAINT ul_pk PRIMARY KEY (ID),
    CONSTRAINT ul_uq UNIQUE (FullName)
);

CREATE TABLE GroupList
(
    ID INT AUTO_INCREMENT,
    GroupName VARCHAR(25),
    OwnerID INT,
    -- ... other columns if you want ...
    CONSTRAINT gl_PK PRIMARY KEY (ID),
    CONSTRAINT gl_UQ UNIQUE(GroupName),
    CONSTRAINT gl_FK FOREIGN KEY (OwnerID) REFERENCES UserList(ID)
);

CREATE TABLE PersonGroup
(
    RecordID INT AUTO_INCREMENT,
    User_ID INT,
    GROUP_ID INT,
    CONSTRAINT pg_PK PRIMARY KEY (RecordID),
    CONSTRAINT pg_uq UNIQUE (User_ID, GROUP_ID),
    CONSTRAINT pg_FK1 FOREIGN KEY (User_ID) REFERENCES UserList(ID),
    CONSTRAINT pg_FK2 FOREIGN KEY (GROUP_ID) REFERENCES GroupList(ID)
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T00:34:42.323

这可能是@Adrian 所说的重复，但我并没有真正理解他的意思，所以......

当 John 注册时，他会得到一个 user_id，对吗？

向表中添加 registrar_id 列。

对于其他 20 条用户记录，将 John 的 user_id 放入 registrar_id 列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T00:22:46.457

有点难以完全准确，但也许记录用于注册的 ip，然后您通常会知道有多少帐户来自该 ip。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T00:24:03.523

如果他们注册的是 NULL，那么添加一个 RegisteredByID 列怎么样，然后也很容易找到该组。

# ruby-on-rails - Error when launching rails server - getting "uninitialized constant Devise::Models::Invitable (NameError)"

> ID：12468808
> 
> 赞同：6
> 
> 时间：2012-09-18T00:20:06.470
> 
> 标签：ruby-on-rails, ruby

I am new to rails and am trying to follow along with this prelaunch signup tutorial - [http://railsapps.github.com/tutorial-rails-prelaunch-signup.html](http://railsapps.github.com/tutorial-rails-prelaunch-signup.html)

When initializing the rails server using $ rails s, I get the following error message:

Users/pv/.rvm/gems/ruby-1.9.3-p194@rails326/gems/devise-2.1.2/lib/devise/models.rb:97:in `const_get': uninitialized constant Devise::Models::Invitable (NameError)

followed by a bunch of file paths, such as:

```
from /Users/patrickvihtelic/.rvm/gems/ruby-1.9.3-p194@rails326/gems/devise-2.1.2/lib/devise/models.rb:97:in `block (2 levels) in devise'
from /Users/patrickvihtelic/.rvm/gems/ruby-1.9.3-p194@rails326/gems/devise-2.1.2/lib/devise/models.rb:92:in `each'
from /Users/patrickvihtelic/.rvm/gems/ruby-1.9.3-p194@rails326/gems/devise-2.1.2/lib/devise/models.rb:92:in `block in devise'
from /Users/patrickvihtelic/.rvm/gems/ruby-1.9.3-p194@rails326/gems/devise-2.1.2/lib/devise/models.rb:123:in `devise_modules_hook!'
from /Users/patrickvihtelic/.rvm/gems/ruby-1.9.3-p194@rails326/gems/devise-2.1.2/lib/devise/models.rb:90:in `devise'
from /Users/patrickvihtelic/code/rails-prelaunch-signup/app/models/user.rb:5:in `<class:User>'
from /Users/patrickvihtelic/code/rails-prelaunch-signup/app/models/user.rb:1:in `<top (required)>'
from /Users/patrickvihtelic/.rvm/gems/ruby-1.9.3-p194@rails326/gems/activesupport-3.2.8/lib/active_support/inflector/methods.rb:230:in `block in constantize'
from /Users/patrickvihtelic/.rvm/gems/ruby-1.9.3-p194@rails326/gems/activesupport-3.2.8/lib/active_support/inflector/methods.rb:229:in `each'
from /Users/patrickvihtelic/.rvm/gems/ruby-1.9.3-p194@rails326/gems/activesupport-3.2.8/lib/active_support/inflector/methods.rb:229:in `constantize'
from /Users/patrickvihtelic/.rvm/gems/ruby-1.9.3-p194@rails326/gems/devise-2.1.2/lib/devise.rb:256:in `get' 
```

Can anyone please give me a hint or point me in the right direction?

Thanks!

Pat

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-13T08:48:20.387

您需要添加：

```
require 'devise_invitable' 
```

到 config/initializers/devise.rb。这将摆脱这个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T01:39:13.837

您获得的“文件路径列表”称为“堆栈跟踪”。它从顶部开始，显示发生错误的行号和文件。随后的行是调用发生错误的函数的函数，然后是调用该函数的函数，依此类推。这可以帮助您找出错误是否是由于输入错误造成的，问题是从哪里开始的。

在这种情况下，您尝试调用 Devise 引擎，但它反对您使用的名称。在这种情况下，它位于 Devise 的模型模块中。查看该模块[的文档](http://rubydoc.info/github/plataformatec/devise/Devise/Models)，我发现没有定义 Invitable 模块或类。你可能想看看[这个问题](https://stackoverflow.com/q/6604383/306084)。

# java - Java: getter method vs. public instance variable: performance and memory

> ID：12468813
> 
> 赞同：6
> 
> 时间：2012-09-18T00:21:24.380
> 
> 标签：java, performance, memory-management

Sorry for the noob questions. Passing by reference vs. value is hard!

So I have a class with pretty big data structures-- multidimensional arrays. I need to access these arrays from another class. I could just make the arrays public and do the classic objectWithStructures.structureOne. Or, I could do getters: adding a method like public int[][][] getStructureOne().

Does having a getter make a copy of the multidimensional array? Or does it pass it by reference and you just can't alter the object referenced?

I'm worried about memory and performance. But making the data structures public, while faster if it doesn't cause copies to be made, seems like poor coding practice.

ADDENDUM: So when I return a reference to an object (e.g. an array) using a getter method, can that object be edited by whoever uses the getter method? Or is it somehow "locked" for editing so that only the class it's in can alter that object?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T01:11:32.307

> 通过引用与值传递很难

在 Java 中，一切都是按值传递的。原始类型通过它们的值传递，复杂类型通过它们的引用值传递。数组不是原始的，因此它们的引用被传递。

> 我可以将数组公开......或者，我可以做吸气剂

如果它们是，`public`那么其他类可以更改您的对象包含的数组引用。如果有 getter 返回对数组的引用，则调用者可以更改数组的内容。两者都相当糟糕。这也回答了您的附录问题。

我认为选项如下：

*   正如@Bohemian 建议的那样，对单个单元格使用吸气剂。如果需要对数组对象进行任何锁定，则此处可能会有额外的问题

*   返回对数组的引用并相信你的调用者不会把它搞砸。额外的 chekcs 可以通过在编译时检查访问来实现

*   在对象内部维护数组的*两个*副本。一个返回 getter，另一个返回实际工作。您可以记录更改数组没有效果，并在从 getter 返回时断言它们的内容相同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T00:51:34.217

Actually in java, technically everything is pass by value, because a *reference* is the *value* of the memory address, however you can think of it as pass by reference.

As for performance, I doubt there's a measurable difference, because the JVM JIT compiler will probably in-line the accessor method (the "getter"). As a matter of style, it is considered better to use getters in preference to making your fields public.

As for safe publishing (allowing safe access to private data) - no, the object isn't "locked in read only mode"; it's completely editable because arrays are mutable.

To safely allow access to your data array, you basically have two choices:

1.  return a *copy* of the array from your getter - expensive
2.  provide an API that returns the element at a given position - simple to code, but may be harder to change array dimensions later because the API has been defined for your class

An example of providing an API might be:

```
public int getStructureOne(int x, int y, int z) {
    return structureOne[x][y][z];
} 
```

This method is completely safe, because primitives (like `int`) are passed by value - it the caller changes the value of the variable into which the result of this method is assigned, nothing happens to the array.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T00:26:51.440

一切都是按*值*传递的，但 getter 将返回对数组的*引用*，不涉及副本。

任何修改的人都会被引用该数组的每个人看到。

至于 1) 性能，唯一知道的方法是进行基准测试。get 方法会增加开销，但是如果您的结构很大，那么对结构中元素的任何访问都会使添加的方法调用的任何开销相形见绌。

至于2）糟糕的编码实践，这真的取决于你在做什么。您的代码是否需要*确保*它不能被其他任何人修改？然后返回一份。或者更好的是，强制调用者请求数据范围，并且只返回他们需要的范围的副本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T03:54:02.883

Java 通过值传递所有内容。Java 引用是按值传递的指针。

# php - 如何将多维数组变成关联数组

> ID：12468817
> 
> 赞同：1
> 
> 时间：2012-09-18T00:21:43.903
> 
> 标签：php, sql

我希望我不会在这里重新发布或多余，仍然在摸索 php 数组。我有一个看起来像这样的多维数组：

```
Array
(
[0] => stdClass Object
    (
        [field_name] => step_one
        [field_value] => A Message
    )

[1] => stdClass Object
    (
        [field_name] => message_color
        [field_value] => 
    )

[2] => stdClass Object
    (
        [field_name] => Submitted Login
        [field_value] => admin
    )

[3] => stdClass Object
    (
        [field_name] => Submitted From
        [field_value] => 127.0.0.1
    )

[4] => stdClass Object
    (
        [field_name] => step_one
        [field_value] => Another Message
    )

[5] => stdClass Object
    (
        [field_name] => message_color
        [field_value] => orange
    )

[6] => stdClass Object
    (
        [field_name] => Submitted Login
        [field_value] => admin
    )

[7] => stdClass Object
    (
        [field_name] => Submitted From
        [field_value] => 127.0.0.1
    )

[8] => stdClass Object
    (
        [field_name] => step_one
        [field_value] => some Other Idea
    )

[9] => stdClass Object
    (
        [field_name] => message_color
        [field_value] => pink
    )

[10] => stdClass Object
    (
        [field_name] => Submitted Login
        [field_value] => admin
    )

[11] => stdClass Object
    (
        [field_name] => Submitted From
        [field_value] => 127.0.0.1
    ) 
```

) 我希望它看起来像这样：

```
 Array( 
  Array [0] (
      [step_one] => Message
      [message_color] => 
      )
   Array [1] (
      [step_one] => Another Message
      [message_color] => orange

   )
   Array [2] (
      [step_one] => some other idea
      [message_color] => pink
   ) 
```

但我不知道如何在 php 中到达那里。我已经尝试过array_merge() 和array_combine()，但我只是没有得到任何结果。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T00:26:38.393

这是一个简单的循环可以做到这一点。

```
foreach($obj_array as $obj){
    $a_array[$obj->field_name]=$obj->field_value;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T00:34:53.960

蒂姆威瑟斯解决方案或...

```
function gather($arr){
  return array($arr->field_name=>$arr->field_value);
}

$newArr = array_map('gather',$oldArr); 
```

oldArr 是原始的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T01:47:11.420

```
$reduce = function($input)
{
    $current = 0;
    return array_reduce($input, function($a, $b) use (&$current) {
        isset($a[$current][$b->field_name]) && $current++;
        $a[$current][$b->field_name] = $b->field_value;
        return $a;
    }, array());
};

print_r($reduce($input)); 
```

输出（我有一个较小的数据集）：

```
Array
(
    [0] => Array
        (
            [step_one] => A Message
            [message_color] => 
        )

    [1] => Array
        (
            [step_one] => Another Message
        )

) 
```

`$current`如果当前索引 ( ) 中的键已经存在，则调整是开始一个新元素。

# java - Testing for Upper and Lowercase in Java

> ID：12468818
> 
> 赞同：0
> 
> 时间：2012-09-18T00:22:01.080
> 
> 标签：java, uppercase, lowercase

I need to create a Java program named `UpperOrLower` that asks a user to type a number and prints "*Uppercase or lowercase: true*" if the unicode character with that number is either uppercase or lowercase and "*Uppercase or lowercase: false*" otherwise.

```
import java.util.Scanner;

public class UpperOrLower {
        public static void main(String args[]) {

                Scanner input = new Scanner(System.in);

                System.out.print("Enter an integer: ");
                int value = input.nextInt();
                char digit = (char) value;
                boolean isUpperOrLower =
                        (Character.isUpperCase || Character.isLowerCase);

                System.out.println("Uppercase or Lowercase: " +isUpperOrLower);

        }
} 
```

Here's what I have, I keep getting errors, and I have no idea how to fix them.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T00:27:08.490

[`Character.isUpperCase(char c)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#isUpperCase%28char%29)接受一个角色。您需要调用传入角色的方法，以便它知道它正在测试什么。

```
boolean isUpperOrLower =
                    (Character.isUpperCase(digit) || Character.isLowerCase(digit)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T00:26:00.233

试试这个：

```
boolean isUpperOrLower = Character.isUpperCase(digit) || Character.isLowerCase(digit); 
```

`isUpperCase`并且是以s 作为参数的类`isLowerCase`的静态方法。`Character``char`

你也可以这样做：

```
boolean isUpperOrLower = (digit >= 'A' && digit <= 'z') 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-18T00:32:04.133

```
import java.util.Scanner;

public class UpperOrLower { public static void main(String args[]) {

            Scanner input = new Scanner(System.in);

            System.out.print("Enter an integer: ");
            int value = input.nextInt();
            char digit = (char) value;
            boolean isUpperOrLower =
                    (Character.isUpperCase (digit) || Character.isLowerCase(digit));
            System.out.println("The Charecter is: " +digit);
            System.out.println("Uppercase or Lowercase: " +isUpperOrLower);

    }
} 
```

# mysql - mysql 结构，用于在一个字段中包含两个引用

> ID：12468821
> 
> 赞同：0
> 
> 时间：2012-09-18T00:22:22.870
> 
> 标签：mysql

这似乎应该很容易，但我正在用头撞墙。我在 php/mysql 中创建一个站点，当用户打开一周中的某一天时，它将列出按时间块分组的分配给他们的任务，例如 8-11、11-14 等。

我有一个像这样设置的表，其中的字段旨在引用另一个包含任务的表。每个整数对应于任务表中的一个唯一任务。

```
 8-11   11-14  14-17  17-20   20-23 
Mon     1       3      4      1   2
Tues   1,3      4      5      6   7 
Wed    1,2,3    5      4      8   9 
```

如您所见，有些日子在不同时间有重复的任务（例如，在星期一，任务 1 在 8-11 和 17-20 时段执行）。而最让我困惑的是如何设置表或连接多个表以解决具有多个任务的时间段，例如，周三 8-11 班有三个任务，1、2 和 3。

我的问题：您能否建议最适合此的表结构，以及检索给定日期任务的示例查询？谢谢你。任何帮助是极大的赞赏。

** 编辑 ** 这就是我要问的问题：看看星期三 8-10，我怎样才能从任务表中拉出三个任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T00:58:46.103

[http://sqlfiddle.com/#!2/2130b/8](http://sqlfiddle.com/#!2/2130b/8)

```
CREATE TABLE work_periods (work_period_id int unsigned, weekday int unsigned, description varchar(50));
CREATE TABLE tasks (task_id int unsigned, description varchar(50));
CREATE TABLE work_period_task_assignments (work_period_id int unsigned, task_id int unsigned);
INSERT INTO work_periods VALUES (1, 1, 'Mon 8-11'), (2, 1, 'Mon 11-14'), (3, 1, 'Mon 14-17');
INSERT INTO tasks VALUES (1, 'Drink Coffee'), (2, 'Make Toast'), (3, 'Do Work');
INSERT INTO work_period_task_assignments VALUES (1, 1), (1, 2), (2,3), (3,3);

SELECT p.description as period, t.description as task FROM work_periods p
INNER JOIN work_period_task_assignments wpta
ON wpta.work_period_id = p.work_period_id 
INNER JOIN tasks t
ON wpta.task_id = t.task_id 
WHERE p.weekday = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T00:31:10.653

怎么样：

```
period (id, desc, start_hour, end_hour), e.g. "8-11"
task (id, desc), e.g. "Task 1")
period_task (period_id, task_id) 
```

因此，对于任务 1，您在 period_task 中有三行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T00:34:14.833

对于结构，您可以使用单个分配表：

```
CREATE TABLE assignments (
  assignment_id int AUTO_INCREMENT PRIMARY KEY,
  user int,
  dt datetime,
  assignment_name varchar(50)) 
```

然后，您可以使用`CASE`对分配的数量进行分组。这是一些伪代码：

```
SELECT timeRange, COUNT(*) AS assignments
FROM
    (SELECT
        CASE
            WHEN HOUR(dt) BETWEEN 8 AND 11 THEN '8-11'
            WHEN HOUR(dt) BETWEEN 11 AND 14 THEN '11-14'
            WHEN HOUR(dt) BETWEEN 14 AND 17 THEN '14-17'
            WHEN HOUR(dt) BETWEEN 17 AND 20 THEN '17-20'
            WHEN HOUR(dt) BETWEEN 20 AND 23 THEN '10-23'
        END AS timeRange
    FROM assignments) t
GROUP BY t.timeRange 
```

您可以根据需要添加过滤条件`user`和`date`范围。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T00:48:40.650

为了清楚起见，一个字段中不能有 2 个引用，所以我使用一个表来保存交叉引用......即 daily_tasks，您可以在一天中的每个时间段插入任意数量的项目，唯一的限制是您不能在一个时间段内两次执行相同的任务，但即使删除主键声明也可以删除

```
create table task(
   id tinyint unsigned not null auto_increment primary key,
   name text not null
) engine InnoDB;

create table timeslot(
   id int unsigned not null auto_increment primary key,
   date date not null,
   time tinyint unsigned not null
) engine InnoDB;

create table daily_tasks(
   timeslot int unsigned not null,
   task tinyint unsigned not null,
   foreign key(timeslot) references timeslot(id) on update cascade on delete cascade,
   foreign key(task) references task(id) on update cascade on delete cascade,
   primary key(timeslot,task)
) engine InnoDB; 
```

插入一些样本数据

```
insert into task (name) values ('wake up'), ('wash'), ('eat'), ('drink'), ('go to work'), ('do some work');
insert into timeslot (date, time) values ('2012-09-18', 8), ('2012-09-18', 11), ('2012-09-18', 14), ('2012-09-18', 17), ('2012-09-18', 20);
insert into daily_tasks values (1, 1), (1,3), (1,4), (1,5), (2,6), (3,6), (4,3), (4,4), (4,2); 
```

选择一天的所有任务

```
select timeslot.time, task.name from timeslot join daily_tasks on daily_tasks.timeslot = timeslot.id join task on task.id = daily_tasks.task where timeslot.date = '2012-09-18' order by timeslot.time asc; 
```

查询结果

```
+------+--------------+
| time | name         |
+------+--------------+
|    8 | wake up      |
|    8 | eat          |
|    8 | drink        |
|    8 | go to work   |
|   11 | do some work |
|   14 | do some work |
|   17 | wash         |
|   17 | eat          |
|   17 | drink        |
+------+--------------+
9 rows in set (0.00 sec) 
```

具有串联任务的替代查询

```
select timeslot.time, group_concat(task.name) from timeslot join daily_tasks on daily_tasks.timeslot = timeslot.id join task on task.id = daily_tasks.task where timeslot.date = '2012-09-18' group by timeslot.time asc; 
```

导致

```
+------+------------------------------+
| time | group_concat(task.name)      |
+------+------------------------------+
|    8 | wake up,eat,drink,go to work |
|   11 | do some work                 |
|   14 | do some work                 |
|   17 | wash,eat,drink               |
+------+------------------------------+
4 rows in set (0.01 sec) 
```

因为显然所有间隔都是 3 小时长我没有包括任务的结束时间，因为这可以通过将 3 添加到时间来计算

# python - Python datetime - setting fixed hour and minute after using strptime to get day,month,year

> ID：12468823
> 
> 赞同：240
> 
> 时间：2012-09-18T00:22:41.650
> 
> 标签：python, date, datetime, time, date-manipulation

I've successfully converted something of `26 Sep 2012` format to `26-09-2012` using:

```
datetime.strptime(request.POST['sample_date'],'%d %b %Y') 
```

However, I don't know how to set the hour and minute of something like the above to 11:59\. Does anyone know how to do this?

Note, this can be a future date or any random one, not just the current date.

* * *

## 回答 #1

> 赞同：483
> 
> 时间：2012-09-18T00:28:24.963

使用[`datetime.replace`](https://docs.python.org/3.5/library/datetime.html#datetime.datetime.replace)：

```
from datetime import datetime
dt = datetime.strptime('26 Sep 2012', '%d %b %Y')
newdatetime = dt.replace(hour=11, minute=59) 
```

另外值得注意的是：`datetime.replace`返回一个新的副本`datetime`（因为`datetime`是不可变的）：在这方面就像`str.replace`。

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2017-05-12T08:48:53.533

[datetime.replace()](https://docs.python.org/3.5/library/datetime.html#datetime.datetime.replace)将提供最佳选择。此外，它还提供了替换日、年和月的功能。

假设我们有一个`datetime`对象，日期表示为： `"2017-05-04"`

```
>>> from datetime import datetime
>>> date = datetime.strptime('2017-05-04',"%Y-%m-%d")
>>> print(date)
2017-05-04 00:00:00
>>> date = date.replace(minute=59, hour=23, second=59, year=2018, month=6, day=1)
>>> print(date)
2018-06-01 23:59:59 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2020-07-27T08:14:05.170

如果您将日期作为`datetime.datetime`（或`datetime.date`）实例并希望通过`datetime.time`实例中的时间将其组合，则可以使用 classmethod [`datetime.datetime.combine`](https://docs.python.org/3/library/datetime.html#datetime.datetime.combine)：

```
import datetime
dt = datetime.datetime(2020, 7, 1)
t = datetime.time(12, 34)
combined = datetime.datetime.combine(dt.date(), t) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-14T06:31:33.687

**将日期时间转换为最大值或最小值的快捷方式**

```
import datetime

def dt_time_min(dt):
    """converts any datetime/date to new datetime with same date and time=0:00:00"""
    return datetime.datetime.combine(dt, datetime.time.min)

def dt_time_max(dt):
    """converts any datetime/date to new datetime with same date and time=23:59:59.999999"""
    return datetime.datetime.combine(dt, datetime.time.max) 
```

# javascript - jqmobi 动态地将项目添加到页脚？

> ID：12468825
> 
> 赞同：1
> 
> 时间：2012-09-18T00:23:02.227
> 
> 标签：javascript, jquery, dynamic, footer, jqmobi

在异步调用检索数据后，我需要在 jQMobi 的导航栏中动态添加按钮。我正在使用 append 方法，但在追加完成后它不会自动刷新页脚。如果我返回上一页并再次返回带有导航栏的页面，则会显示新按钮。我如何从js刷新？

我的功能：

```
function createNavBar(categories) {
// remove any previous items, except for home
var elements = $('#event-footer').children().not('#navbar-home');
$(elements).remove(elements);

// add new items
for(var i=0;i<categories.length;i++)
{
    $('#event-footer').append('<a href="#event-home" class="icon home" data-transition="none">'+categories[i].get("Name")+'</a>');        
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T16:33:52.143

您是否尝试过使用 ui 方法 $.ui.updateNavbarElements() 来做到这一点？

尝试：

```
function createNavBar(categories) {
    // get home element
    var elements = [$('#navbar-home').get()];

    // add new items
    for(var i=0;i<categories.length;i++)
    {
        elements.push('<a href="#event-home" class="icon home" data-transition="none">'+categories[i].get("Name")+'</a>');        
    }

    $.ui.updateNavbarElements($(elements));
} 
```

加油:)

# vba - “对象'_global'的方法'工作表'失败”每隔一次运行错误

> ID：12468826
> 
> 赞同：6
> 
> 时间：2012-09-18T00:23:02.133
> 
> 标签：vba, excel, ms-word

我编写了一个 VBA Sub（如下），它应该打开给定目录中的所有 .docx 和/或 .xlsx 文件，执行查找/替换操作，然后用新文件覆盖原始文件。**每隔一次，它就会**按预期工作，它是为 .xlsx 文件运行的，并且每隔一次就会抛出错误“对象 '_Global' 的方法 'Sheets' 失败”。这是我第一次尝试在 VBA 中编程，所以可能有一个我看不到的非常简单的答案。它在代码行上中断：“For i = 1 To oWB.Sheets.Count”

感谢您的关注

```
Option Explicit
Public SearchPhrase As String
Public ReplacePhrase As String

Sub StringReplacer()

 Dim fd As FileDialog
 Dim PathOfSelectedFolder As String
 Dim SelectedFolder
 Dim SelectedFolderTemp
 Dim MyPath As FileDialog
 Dim fs
 Dim ExtraSlash As String
 ExtraSlash = "\"
 Dim MyFile
 Dim rngTemp As Range
 Dim MinExtensionX As String
 Dim arr() As Variant
 Dim lngLoc As Variant
 Dim oExcel As New Excel.Application
 Dim oWB As Excel.Workbook
 Dim ws As Worksheet
 Dim i As Integer
 Dim doc As String
 Dim xls As String
 Dim redlines As String

 'get desired file extensions from checkboxes in GUI and put them into an array
 doc = ActiveDocument.FormFields("CKdocx").CheckBox.Value
 If doc = True Then
    doc = "docx"
 Else
    doc = " "
 End If
 xls = ActiveDocument.FormFields("CKxlsx").CheckBox.Value
 If xls = True Then
    xls = "xlsx"
 Else
    xls = " "
 End If
 arr = Array(doc, xls)

 'set redlines variable from redlines checkbox in GUI
 redlines = ActiveDocument.FormFields("CKredlines").CheckBox.Value

 'Prepare to open a modal window, where a folder is selected
 Set MyPath = Application.FileDialog(msoFileDialogFolderPicker)
 With MyPath
    'Open modal window
    .AllowMultiSelect = False
    If .Show Then
        'The user has selected a folder
        'Loop through the chosen folder
        For Each SelectedFolder In .SelectedItems
            'record name of the selected folder
            PathOfSelectedFolder = SelectedFolder & ExtraSlash
            Set fs = CreateObject("Scripting.FileSystemObject")
            Set SelectedFolderTemp = fs.GetFolder(PathOfSelectedFolder)
            'Loop through the files in the selected folder
            For Each MyFile In SelectedFolderTemp.Files
                'grab extension of file
                MinExtensionX = Mid(MyFile.Name, InStrRev(MyFile.Name, ".") + 1)
                'check to see if extension of the file is in the accepible list
                If IsInArray(MinExtensionX, arr) Then

                    If MinExtensionX = "docx" Then
                        'Open the Document (.docx)
                        Documents.Open FileName:=PathOfSelectedFolder & MyFile.Name
                        'turn off "track changes" if that option was selected
                        If redlines = True Then
                        ActiveDocument.TrackRevisions = False
                        ActiveDocument.Revisions.AcceptAll
                        End If
                        'replace all keyphrases (.docx)
                        Set rngTemp = ActiveDocument.Content
                        With rngTemp.Find
                            .ClearFormatting
                            .Replacement.ClearFormatting
                            .MatchWholeWord = True
                            .Execute FindText:=SearchPhrase, ReplaceWith:=ReplacePhrase, Replace:=wdReplaceAll
                        End With
                        'save and close the document (.docx)
                        Application.DisplayAlerts = False
                        ActiveDocument.SaveAs FileName:=PathOfSelectedFolder & MyFile.Name
                        ActiveDocument.Close
                        Application.DisplayAlerts = True
                    End If

                    If MinExtensionX = "xlsx" Then
                        'open the document (.xlsx)
                        oExcel.Visible = True
                        Set oWB = oExcel.Workbooks.Add(PathOfSelectedFolder & MyFile.Name)
                        oWB.Activate
                        'replace all keyphrases sheet by sheet(.xslx)
                        For i = 1 To oWB.Sheets.Count
                            Sheets(i).Activate
                            ActiveSheet.Cells.Replace What:=SearchPhrase, Replacement:=ReplacePhrase, LookAt:=xlPart, MatchCase:=False
                        Next i
                        'save and close the document (.xslx)
                        Application.DisplayAlerts = False
                        oWB.SaveAs FileName:=PathOfSelectedFolder & MyFile.Name
                        oWB.Close
                        Application.DisplayAlerts = True
                    End If

                End If
            Next
        Next
    End If
 End With

 'close teh excel application and clean up
 oExcel.Quit
 Set oExcel = Nothing

 End Sub

Function IsInArray(stringToBeFound As String, arr As Variant) As Boolean
IsInArray = (UBound(Filter(arr, stringToBeFound)) > -1)
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T04:31:21.577

问题出在这一行：`Sheets(i).Activate` 替换为`oWB.Sheets.Activate`

由于您会遇到其他问题，我用所有正确的引用重写了“.xlsx”文件的整个 if 语句。我还添加了冗长的评论来解释我更改它的原因：

```
If MinExtensionX = "xlsx" Then
    'open the document (.xlsx)
    oExcel.Visible = True
    Set oWB = oExcel.Workbooks.Add(PathOfSelectedFolder & MyFile.Name)
    oWB.Activate
    'replace all keyphrases sheet by sheet(.xslx)
    For i = 1 To oWB.Sheets.Count
        oWB.Sheets(i).Activate 'Must provide the workbook or Sheets() fails
        oWB.ActiveSheet.Cells.Replace What:=SearchPhrase, Replacement:=ReplacePhrase, LookAt:=xlPart, MatchCase:=False 'Must provide the workbook or tries to find activesheet in calling application.
    Next i
    'save and close the document (.xslx)
    oExcel.DisplayAlerts = False 'Using Application instead of oExcel affects calling app instead of Excel
    oWB.SaveAs Filename:=PathOfSelectedFolder & MyFile.Name
    oWB.Close
    oExcel.DisplayAlerts = True 'Using Application instead of oExcel affects calling app instead of Excel
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T06:16:45.833

这可能不是您的具体问题，但就我而言，它已经过去了。`Sheets`当您不需要它包含`Worksheets`但不包含的其他类型的工作表时，使用已被证明会导致很多问题。尝试将所有`Sheets`引用替换为`Worksheets`.

# python - Python没有正确循环

> ID：12468828
> 
> 赞同：0
> 
> 时间：2012-09-18T00:23:05.460
> 
> 标签：python, loops

我有一个问题，Python 没有正确循环文件中的行。在第一个块中，它正确地循环遍历行并显示文件中的每一行。然而，在第二个块中，它只执行文件的第一行，然后停止。块 2 的输出应该相同，但事实并非如此。这让我快疯了。

```
BLOCK-1
f = open(filename, 'r')
for line in f:
    print line,
f.close() 
```

.

```
BLOCK-2
f = open(filename, 'r')
for line in f:
    match = re.search(r'^(.*)$', line)
    if match:
        print match.group(1)
    else:
        return "DOES NOT MATCH" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T00:25:53.070

您的 block-2 代码有一个 return 语句。任何与您的正则表达式不匹配的行都会中断循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T00:28:01.127

你确定你不是这个意思`print "DOES NOT MATCH"`？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T00:38:15.970

似乎`regex`与第二行不匹配

打印出不匹配的内容会很有帮助，因此您可以找出不匹配的原因

```
f = open(filename, 'r')
for line in f:
    match = re.search(r'^(.*)$', line)
    if match:
        print match.group(1)
    else:
        print repr(line), "DOES NOT MATCH"   # <--- Just add this line
        return "DOES NOT MATCH" 
```

# c++ - 如何将 URI 列表编码为字符串？

> ID：12468833
> 
> 赞同：1
> 
> 时间：2012-09-18T00:23:36.243
> 
> 标签：c++, html, qt, url, uri

我需要将 http URI 列表存储为单个字符串。语言/工具包无关紧要，但为了完整起见，语言是 C++，我使用的主要工具包是 Qt（我实际上是在尝试将字符串列表放入单个 QString，因为它是少数 Qt 类型之一当它进入 QDataStream => QVariant => QSettings 时，它不会以非人类可读的方式被腌制。）

是否有一个“安全”字符可以用来分隔这个 URI 字符串列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T00:27:03.357

您可以使用空格，只要 URI 中的所有空格都编码为`+`. 您还可以使用类似的组合`%~`或任何其他组合 a`%`后跟一个不能出现在`%`URI 中的 a 之后的字符。使用换行符或制表符也可以。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T00:32:55.490

这取决于 URI 是否是百分比编码的（例如，当您在 URL 栏中的 URL 中键入空格并且浏览器将其替换为 %20 时）。

如果它们被编码，则可以使用许多字符，甚至是一个空格。如果没有，我认为没有像这样的“安全”角色。在这种情况下，也许您可​​以在将 URI 存储在一起之前对其进行编码，然后再对它们进行解码。

# python - 在 python 2.6 解决方案中包含 DES.pyd 时出错

> ID：12468835
> 
> 赞同：0
> 
> 时间：2012-09-18T00:23:52.983
> 
> 标签：python, des, pycrypto, pyd

我已经在我的 Windows 7 x64 系统上安装了 Python 2.7，并编译并内置了 PyCrypto 2.5。在我的安装路径中，`D:\Python27\Lib\site-packages\Crypto\Cipher`我看到了`DES.pyd`. 我已经用dependency walker打开了它，并确保它`initDES`是唯一的出口。

我想做的是复制/粘贴`DES.pyd`它，因为它已经构建并在我的代码中使用它。所以现在我的项目文件夹`D:\project`包含`test.py`和`DES.pyd`.

`test.py`包含代码：

```
import sys
sys.path.append("D:\\project\\")
import DES
print 'hi' 
```

运行时`test.py`，我收到以下错误：

```
Traceback (most recent call last):
  File "test.py", line 3, in <module>
    import DES
SystemError: dynamic module not initialized properly</code></pre> 
```

这个练习的目的是能够发送`DES.pyd`和发送`test.py`给我的朋友，而不需要他们构建和安装 pycrypto（一个 PITA）。我完全理解我上面的代码完全不涉及 DES，它无法导入它的事实是我的主要好奇心。接下来是使用 DES 的真实代码。

`DES.pyd`另外，如果我直接从 python 路径导入`from Crypto.Cipher import DES`就好了。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T05:45:39.700

查看[https://github.com/dlitz/pycrypto/blob/master/src/block_template.c#L801](https://github.com/dlitz/pycrypto/blob/master/src/block_template.c#L801)的源代码。模块名称被硬编码为`Crypto.Cipher._DES`. `_DES.pyd`如果不在`Crypto.Cipher`包目录中，初始化将失败。

# php - 需要帮助诊断：解析错误：语法错误，意外的 T_FUNCTION

> ID：12468836
> 
> 赞同：1
> 
> 时间：2012-09-18T00:23:59.767
> 
> 标签：php

我收到此错误：

> 解析错误：语法错误，意外的 T_FUNCTION

在这段代码中：

```
<?php
    $uniqueFtypes = $ftypes = $converter->GetConvertedFileTypes();
    array_walk(
        $uniqueFtypes, 
        function(&$ftype, $key) {
            $ftype = $ftype['fileExt'];
        }
    );
    $uniqueFtypes = array_values(array_unique($uniqueFtypes));
    foreach ($uniqueFtypes as $key => $uftype)
    {
        echo $uftype;
        echo ($uftype != end($uniqueFtypes)) ? (($key != count($uniqueFtypes)-2) ? ', ' : ', or ') : '';
    }
?> 
```

在这一行：

```
array_walk(
    $uniqueFtypes, 
    function(&$ftype, $key) {
        $ftype = $ftype['fileExt'];
    }
); 
```

PHP版本：5.2.17

它适用于本地主机，我使用的是最新的 UniServer。但是当我把它移到我的主机上时，它给出了那个错误。

有什么帮助吗？:)

编辑：这是其他人，我不确定它是否需要修复。

```
ini_set('max_execution_time',0);
ini_set('display_errors',0);

// Instantiate converter class
include 'VideoConverter.class.php';
$converter = new VideoConverter();

// On download of converted file
if (isset($_GET['output']))
{
    $converter->DownloadConvertedFile($_GET['output']);
} 
```

第二

```
 $vidHosts = array_values($converter->GetVideoHosts());
    foreach ($vidHosts as $key => $host)
    {
        echo $host['name'];
        echo ($host != end($vidHosts)) ? (($key == count($vidHosts)-2) ? ((count($vidHosts) > 2) ? ', and ' : ' and ') : ', ') : '';
    } 
```

这两个也需要修复吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T00:27:59.857

在 php 5.3 之前你不能使用闭包。您需要在 to`function`的第二个参数中`array_walk`更改它`create_function`。尝试：

```
array_walk($uniqueFtypes, create_function('&$ftype, $key;',
   '$ftype = $ftype["fileExt"];')); 
```

# python - 请求处理程序不起作用

> ID：12468841
> 
> 赞同：0
> 
> 时间：2012-09-18T00:24:41.260
> 
> 标签：python, google-app-engine, templates, event-handling, request

单击我的登录/注销链接，它可以正常工作（重新加载页面，更新链接文本）。

我还有一个请求处理程序，它向我发送一封包含已提交表单输入值的电子邮件，然后加载同一页面。它似乎也正常工作（我收到了电子邮件，显示了正确的值）。

问题是，如果我在提交表单后单击相同的登录/注销，它就不起作用。它确实将我带到了登录页面，但最终进入了一个空白屏幕。它在地址栏中显示了我的应用程序的 url，但其他所有内容都是白色的。

```
import os
from google.appengine.ext.webapp import template

import cgi
import datetime
import urllib
import wsgiref.handlers

from google.appengine.ext import db
from google.appengine.api import users
from google.appengine.ext import webapp
from google.appengine.ext.webapp.util import run_wsgi_app
from google.appengine.api import mail

class Greeting(db.Model):
    author = db.StringProperty()
    duties = db.StringProperty(multiline=True)
    date = db.DateTimeProperty(auto_now_add=True)

class e_mail(db.Model):
     address = db.StringProperty()

def guestbook_key(guestbook_name= users.get_current_user()):
    return db.Key.from_path('Guestbook', guestbook_name or 'default_guestbook')

class MainPage(webapp.RequestHandler):
    def get(self):
        guestbook_name=self.request.get('guestbook_name')
        greetings_query = Greeting.all().ancestor(
        guestbook_key(guestbook_name)).order('-date')
        greetings = greetings_query.fetch(1000)
        nickname = None

        if users.get_current_user():
            url = users.create_logout_url(self.request.uri)
            url_linktext = 'LOGOUT'

            template_values = {
                'greetings': greetings,
                'url': url,
                'url_linktext': url_linktext,
            }

            path = os.path.join(os.path.dirname(__file__), 'about.html')
            self.response.out.write(template.render(path, template_values))
        else:
            url = users.create_login_url(self.request.uri)
            url_linktext = 'LOGIN'

            template_values = {
                'greetings': greetings,
                'url': url,
                'url_linktext': url_linktext,
            }

            path = os.path.join(os.path.dirname(__file__), 'about.html')
            self.response.out.write(template.render(path, template_values)) 

class Email_SignUp(webapp.RequestHandler):
    def post(self):
        user = users.get_current_user()
        guestbook_name=self.request.get('guestbook_name')
        greetings_query = Greeting.all().ancestor(
        guestbook_key(guestbook_name)).order('-date')
        greetings = greetings_query.fetch(1000)
        nickname = None

        if users.get_current_user():
            url = users.create_logout_url(self.request.uri)
            url_linktext = 'LOGOUT'

            template_values = {
                'greetings': greetings,
                'url': url,
                'url_linktext': url_linktext,
            }

            e_mail.address = self.request.get('emailAdd')

            path = os.path.join(os.path.dirname(__file__), 'about.html')
            self.response.out.write(template.render(path, template_values))

            mail.send_mail(sender="Do Not Reply <myemail@address.com>",
                       to="Do Not Reply <myemail@address.com>",
                       subject=e_mail.address,
                       body="""
                           Here is the test message                               
                           """)

        else:
            url = users.create_login_url(self.request.uri)
            url_linktext = 'LOGIN'

            template_values = {
                'greetings': greetings,
                'url': url,
                'url_linktext': url_linktext,
            }

            e_mail.address = self.request.get('emailAdd')

            path = os.path.join(os.path.dirname(__file__), 'about.html')
            self.response.out.write(template.render(path, template_values))

            mail.send_mail(sender="Do Not Reply <myemail@address.com>",
                       to="Do Not Reply <myemail@address.com>",
                       subject=e_mail.address,
                       body="""
                           Here is the test message                               
                           """) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T02:07:45.533

通常用户访问 MainPage，并且您创建一个登录链接，在登录/注销完成后重定向到 MainPage()。

但是，在提交表单后，他们会获得一个登录链接，该链接最终会重定向回 Email_Signup()。如果他们点击它，他们将尝试登录，然后被重定向到没有 GET 处理程序的 Email_Signup()，因此它只显示一个空白页面。

# r - 尽管安装并加载了 reshape2，但找不到函数“cast”

> ID：12468843
> 
> 赞同：18
> 
> 时间：2012-09-18T00:24:55.243
> 
> 标签：r, reshape2

遵循 Hadley Wickham在第 2.4 节中的[“探索数据和模型的实用工具”](http://had.co.nz/thesis/)示例，我得到了*铸造熔融数据*`Error: could not find function "cast"`。我已经安装并加载了 reshape2 包。

```
> cast(msmithsm, time + subject ~ variable)
Error: could not find function "cast" 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-18T00:31:06.647

在**reshape2**中，`cast()`已被*两个*函数替换：`acast()`和`dcast()`.

从`?cast`，在**reshape2**包中：

> 描述：
> 
> 根据您想要矢量/矩阵/数组输出还是数据帧输出，使用“acast”或“dcast”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-10T14:43:17.143

有相关问题（错误：找不到函数“dcast”）。我有旧图书馆，图书馆（plyr），所以只是添加到代码中......

```
install.packages("reshape2") # may already be installed
library(reshape2) 
```

然后 dcast 再次工作

# ruby-on-rails - rails send_file 和 pdf

> ID：12468846
> 
> 赞同：0
> 
> 时间：2012-09-18T00:25:36.763
> 
> 标签：ruby-on-rails

非常简单...我只想显示我保存在公共目录中的本地 pdf 文件，而不是作为下载链接。所以我想我应该像这样使用 send_file ：

```
<%= send_file("http://localhost:3000/exex11.pdf", :type => 'application/pdf', :disposition => 'inline') %> 
```

但是，我得到：`undefined method`#<#:0x94c3020>` 的 send_file' 注意，我知道我应该使用 root_url 但我使用 localhost:3000 只是为了测试目的。

我检查了这只是为了确保文件在那里：

```
<%= link_to "The file", "http://localhost:3000/exex11.pdf" %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T01:22:04.417

> 所以我想我应该像这样使用 send_file

我想您应该在控制器的操作中使用它而不是在视图中使用

# replace - 添加 jQuery .replace() 后 Prototype.js 停止工作，其他 jQuery 工作正常

> ID：12468847
> 
> 赞同：0
> 
> 时间：2012-09-18T00:25:47.993
> 
> 标签：replace, prototypejs, jquery

我正在为一个项目使用[Acuity Scheduling](http://acuityscheduling.com)。它使用prototype.js 并允许我将自己的自定义代码添加到页面的页眉和页脚（通过iframe 提供给我的网站）。我不熟悉prototype.js，所以我以一种不会冲突的方式使用jQuery。我的 jQuery 代码和prototype.js 工作得很好，直到我添加了这段代码：

```
jQuery('body').html(jQuery('body').html().replace('an Appointment','a Session')); 
```

**我正在寻找一种方法来使用 jQuery 替换 iframe 中的特定单词，而不会破坏其他 jQuery 代码或prototype.js。**

你可以在这里看到我的 iframe 的内容：[https ://acuityscheduling.com/schedule.php?owner=11134756](https://acuityscheduling.com/schedule.php?owner=11134756)

如果您查看源代码，您会在底部看到我添加的代码：

```
<script language="javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script> 

<script language="javascript">
  jQuery.noConflict();

  jQuery(document).ready(function(){
    jQuery('body').on('click', '.time-selection', function() {
      jQuery('.continueAlert').hide();   
      jQuery('#rest').append('<p class="continueAlert">Please enter your name and contact info below.</p>');  
    });

    jQuery('body').html(jQuery('body').html().replace('an Appointment','a Session'));

  });
</script> 
```

谢谢你尽你所能的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:10:18.157

我看到您通过针对特定元素的原型设置了一些事件侦听器：

```
Event.observe(input, 'focus', function(){InputPrompt.focus(input);});
Event.observe(input, 'blur', function(){InputPrompt.blur(input);});
Event.observe(input, 'keypress', function(){input.label.hide();}); 
```

（可能还有更多，但这些是我能够快速发现的）

当您替换一个元素的 innerHTML 属性（这是您使用 jQuery 查找/替换片段所做的）时，浏览器基本上会“丢弃”旧的 DOM 元素并创建新的元素。因此，您在更新 innerHTML 后在页面上看到的元素与您之前看到的元素不同，它们是附加了事件侦听器的元素。这就是为什么一切都“停止工作”

我看到两个选项：

1.  更新您的查找/替换脚本以仅更新文本节点。这将确保具有事件侦听器的包含元素不会被弄乱。

2.  使用不针对特定元素的事件委托。查看[Event.on](http://api.prototypejs.org/dom/Event/on/)，密切注意可选的“选择器”参数。就像是：

    document.on('focus', 'input', function(event, inputElement) { InputPrompt.focus(inputElement); });

我觉得第一个选项对本页面上已经建立的代码的侵入性较小。

编辑：这是在所有文本节点上查找/替换的非常强力的方法（使用原型）。可能有一种更有效的方法来做到这一点。不幸的是，您不能使用 CSS 选择器来匹配文本节点，因此所有子节点的过滤等等 -

```
document.body.select('*:not(script)').each(function(el){
  $A(el.childNodes).each(function(child){
    if (child.nodeType === 3) { // only get text nodes
      child.nodeValue = child.nodeValue.replace('an Appointment', 'a Session');
    }
  })
}); 
```

# java - “线程“主”java.lang.NullPointerException中的异常”ArrayList

> ID：12468851
> 
> 赞同：-1
> 
> 时间：2012-09-18T00:26:01.183
> 
> 标签：java, nullpointerexception

人们，我需要你的帮助来解决这个问题，因为我找不到合适的解决方案来解决它。

问题是：

```
**Exception in thread "main" java.lang.NullPointerException
    at edu.maimonides.www.progmul3.tps.tp1.Garage.park(Garage.java:57)
    at edu.maimonides.www.progmul3.tps.tp1.GarageElPlus.main(Garage.java:29)
Java Result: 1** 
```

// 翻译：汽车 = 汽车 - 摩托 = 摩托车 - Camioneta = 货车

```
**Class Park Slot**

public class Park Slot {

  private ArrayList<Integer> bigParkSlot =  
       new ArrayList<>(Arrays.asList(1, 3, 5, 7, 9, 11));
   private ArrayList<Integer> avaliableParkSlot =  
       new ArrayList<>(Arrays.asList(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 
              11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22));
   private Map<Integer, String> busyParkSlot = new HashMap<>();
   private ArrayList uncoveredParkSlot =  
       new ArrayList<>(Arrays.asList(11, 12, 13, 14, 15, 16, 17, 18, 19, 20));
   private ArrayList coveredParkSlot = 
       new ArrayList<>(Arrays.asList(1, 2, 3, 4, 5, 6, 7, 8, 9, 10));

   }

   **Class Garage**  

    // Line 57
    // the problem is here

   ArrayList<Integer> pElem = c.getavaliableParkSlot();

   int num = pElem.iterator().next(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T00:34:13.820

我在这里很快发现了这个问题：

```
private Park Slot c; 
```

解决方案在这里：

```
private Park Slot c = new Park Slot(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T00:28:20.327

`c`变量分配在哪里？它可能是空的。

# javascript - 按键时获取当前div的id

> ID：12468854
> 
> 赞同：0
> 
> 时间：2012-09-18T00:26:18.937
> 
> 标签：javascript, jquery

我的文档中有 3 个`div`部分，`HTML`每当按键时我都试图在彼此之间切换。这个想法是，当一个按键事件发生时，我得到了`id`当前的`div`，根据那个`id`，我在右边淡入`div`（如果它是 div 1，淡入 div 2，等等）。

我的 HTML 代码如下：

```
<div id="home" class="current">
        <p align="center">Home</p>
        <p align="center">
           Some content
        </p>
    </div>
    <div id="about">
        <p align="center">About</p>
        <p align="center">
           Some content 
        </p>
    </div>
    <div id="contact">
        <p align="center">Contact Form</p>
        <p align="center">
            Some content
        </p>
    </div> 
```

`jQuery`代码：

```
<script>
$("#target").keypress(function(){

        var id = $(this).html().toLowerCase();
          console.log('id is: '+id);    
        $('.current').fadeOut(900, function(){
            $('#'+id).fadeIn(900);
            $('.current').removeClass('current');
            $('#'+id).addClass('current');

        });

    });
</script>
​ 
```

上面的代码不起作用，我是新的`jQuery`事件，请你指导我正确的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T00:35:53.040

使用`keyup`and`.val`代替。

```
$("#target").keyup(function(){

    var id = $(this).val().toLowerCase();
    $('.current').removeClass('current').fadeOut(900, function(){
        $('#'+id).fadeIn(900).addClass('current');
    });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T03:54:18.560

你需要一个事件监听器。如果您希望它是任何键（而不是特定键），您可以删除 keyCode 条件语句

```
$(document).keyup(function(e) {
 if (e.keyCode == 13) {             // enter key
  var id = $('.current').attr('id');
  if (id == "whatever") {
    ............
  } else if (id == "somethingelse") {
    ............
  }
 }
}); 
```

# python - 在 Python 中定义一个默认的类属性？

> ID：12468855
> 
> 赞同：2
> 
> 时间：2012-09-18T00:26:20.950
> 
> 标签：python

不确定这在 Python 中是否可行，但我希望将一个类的实例作为模块级全局变量，在调用时返回一个默认属性。

这个想法来自[这个问题](https://stackoverflow.com/q/460586)，它覆盖`__call__`了一个类来模拟一个函数。

这个想法的快速（未经测试）示例：

```
class _foo(object):
    __slots__ = ("_foo",)
    _init = False

    def __init__(self):
        if not _init:
            self._foo = ["bar", "baz", "zog"]

    def __call__(self, item=None):
        if itme is not None:
            return self._foo[item]
        else:
            return self._foo

    def __getitem__(self, item):
        return self._foo[item]

# Module level
FOO = _foo() 
```

假设上面的代码在一个模块（foo.py）中。使用解释器，我可以让可调用的表单按照我的意愿工作，但不是不可调用的表单。

```
>>> import foo

# callable forms
>>> foo.FOO(0)
"bar"
>>> foo.FOO()
["bar", "baz", "zog"]

# attribute forms
>>> foo.FOO[2]
"zog"

# doesn't work
>>> foo.FOO
<foo._foo object at 0xdeadbeef>

# desired output
>>> foo.FOO
["bar", "baz", "zog"] 
```

我的想法是我需要以某种方式定义一个默认属性，以便在直接调用实例时，我得到我选择的内部列表/字典。**我可以通过覆盖repr**来作弊并做到这一点，但这有点破坏了 Python 自己的 API，我想避免这种情况。在方括号 ( `>>> foo.FOO[]`) 中不传递任何值会产生语法错误。

我希望任何潜在的解决方案至少与 Python 2.4 兼容，最多与 2.7 兼容。如果这是不可能的，那么我想我会坚持使用可调用格式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T01:21:47.803

这是不可能的，对不起。您不能`foo.FOO`既是可调用的（`_foo`实例）又是纯粹的列表对象。

当然，我确实说过“纯粹”。如果你觉得偷偷摸摸...

```
class _foo(list):
    _init = False
    def __init__(self):
        if self._init:
            list.__init__(self)
        else:
            list.__init__(self, ['bar', 'baz', 'zog'])

    def __call__(self, item=None):
        if item is None:
            return self
        return self[item]

FOO = _foo() 
```

用法：

```
>>> FOO()
['bar', 'baz', 'zog']
>>> FOO(0)
'bar'
>>> FOO
['bar', 'baz', 'zog'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T01:13:50.527

我不确定你的意思*现在，当我在另一个模块中尝试这个时，我得到一个 AttirbuteError that FOO doesn't exist within the module*，这个导入你的模块的代码对我来说可以正常工作

```
import foo
FOO2 = foo.FOO
print(FOO2())
print(FOO2(1)) 
```

Python 2.7.3

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T00:28:00.670

在您的类上定义`__repr__(self)`以定义其实例在 Python 解释器中的显示方式。在这种情况下，也许`return repr(self._foo)`。

# python - 在python中创建目录和子目录中所有文件的列表

> ID：12468857
> 
> 赞同：0
> 
> 时间：2012-09-18T00:26:36.580
> 
> 标签：python, map, lambda, python-2.7, directory-listing

我想提出列出目录及其子目录中所有文件的最佳方式。完成后，我想过滤掉它们。因此，最佳情况下，这将在 2 行中完成：

```
def getFilesContaining(filename):
    files = map(lambda x: os.path.join(x, file), os.walk('.')) #Note: this map does NOT work
    filtered_files = filter(lambda x: filename in x, files)
    return filtered_files 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T00:32:13.853

```
def getFilesContaining(filename):
    paths = (os.path.join(root, f) for root, dirs, files in os.walk('.')
             for f in files) 
    return (path for path in paths if filename in path) 
```

这将返回一个迭代器。在您的版本中，`filter`返回一个列表。如果您真的想要一个列表，请将外部括号替换为`(...)`括号，将返回值更改为列表理解`[...]`。

# datatables - jQuery dataTables - 最小列宽和表格水平滚动

> ID：12468858
> 
> 赞同：0
> 
> 时间：2012-09-18T00:26:37.143
> 
> 标签：datatables, jquery-datatables

我在使用 Datatables 时遇到了两个问题。首先，我需要选择一个最小列宽，如果内容较大，则必须将列调整为内容宽度。

而且，我正在尝试使用以下代码来设置水平滚动条，但这会导致标题栏和内容栏的大小和位置出现问题。

```
$(".dataGrid").dataTable({
    "bJQueryUI": true,
    "sPaginationType": "full_numbers",
    "sScrollX": "100%",
    "sScrollXInner": "110%",
    "bScrollCollapse": true
}); 
```

# java - 获取 hadoop ChecksumException：校验和错误

> ID：12468868
> 
> 赞同：0
> 
> 时间：2012-09-18T00:28:23.897
> 
> 标签：java, hadoop, hdfs

我们正在尝试将文件从本地复制到 hadoop。但偶尔会得到：

```
org.apache.hadoop.fs.ChecksumException: Checksum error: /crawler/twitcher/tmp/twitcher715632000093292278919867391792973804/Televisions_UK.20120912 at 0
    at org.apache.hadoop.fs.FSInputChecker.verifySum(FSInputChecker.java:277)
    at org.apache.hadoop.fs.FSInputChecker.readChecksumChunk(FSInputChecker.java:241)
    at org.apache.hadoop.fs.FSInputChecker.read1(FSInputChecker.java:189)
    at org.apache.hadoop.fs.FSInputChecker.read(FSInputChecker.java:158)
    at java.io.DataInputStream.read(DataInputStream.java:83)
    at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:66)
    at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:45)
    at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:98)
    at org.apache.hadoop.fs.FileUtil.copy(FileUtil.java:224)
    at org.apache.hadoop.fs.FileSystem.copyFromLocalFile(FileSystem.java:1119)
    at mcompany.HadoopTransfer.copyToHadoop(HadoopTransfer.java:81)
    at mcompany.apps.Start.pushResultFileToSubfolder(Start.java:498)
    at mcompany.apps.Start.run(Start.java:299)
    at mcompany.apps.Start.main(Start.java:89)
    at mcompany.apps.scheduler.CrawlerJobRoutine.execute(CrawlerJobRoutine.java:15)
    at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
    at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:525) 
```

错误 2012-09-17 16:45:49,991 [amzn_mkpl_Worker-1] mcompany.apps.Start - 无法将文件推送到出站位置

调用 copyFromLocal 文件时出现异常。如果我们删除 .crc 文件，它工作正常。任何人都可以就为什么会出现这个 crc 问题提出一些建议吗？非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:52:30.140

您应该检查您用于计算 crc 的算法是否与 HDFS 的版本相当。

# input - 直接在输入字段内自动完成

> ID：12468878
> 
> 赞同：4
> 
> 时间：2012-09-18T00:29:55.380
> 
> 标签：input, autocomplete

我想在我的网站上添加一个自动完成系统，我搜索了一段时间，但没有找到我要找的东西，很难解释。

我想要一个直接在其内部自动完成输入的系统。谷歌使用“通用”自动完成加上这个，但似乎没有其他人做过这样的事情！

一些简单而合乎逻辑的东西......如果不存在，怎么可能做这样的事情？

这是谷歌系统：

[谷歌自动完成内部输入](http://i.stack.imgur.com/unaOQ.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T01:48:06.607

解决方案可能是在输入框上方放置一个带有灰色文本的 div，以显示第一个自动完成选项与文本框中当前文本之间的区别。

按下按键 - 任何常见的自动完成都会生成匹配项目的列表。取第一个并在他身上设置一个选定的样式（通过使用.addClass()），将文本框内容与第一项内容之间的差异放在灰色的div上。

我发现了一个有趣的扩展，默认选择第一个选项：

[http://github.com/scottgonzalez/jquery-ui-extensions/blob/master/autocomplete/jquery.ui.autocomplete.selectFirst.js](http://github.com/scottgonzalez/jquery-ui-extensions/blob/master/autocomplete/jquery.ui.autocomplete.selectFirst.js)

```
$( el ).autocomplete({
      selectFirst: true
}); 
```

您可以使用它并对其进行更改以满足您的需求。例如，您可以将以下代码添加到“jquery.ui.autocomplete.selectFirst.js”文件中：

```
if (menu.element.children().first().length == 1)
{
    $("#autocomplete").val(menu.element.children().first()[0].childNodes[0].childNodes[0].data);
} 
```

它不仅会选择，而且实际上会将其插入到文本框中（**注意：**我只是举了你可以做什么的例子，这个代码本身是不够的）。

# bash - Bash 脚本错误：“函数：未找到”。为什么会出现这种情况？

> ID：12468889
> 
> 赞同：80
> 
> 时间：2012-09-18T00:31:49.873
> 
> 标签：bash, shell, unix, ubuntu, terminal

我正在尝试`bash script`在我的 Ubuntu 机器上运行 a ，但它给了我一个错误：

> 未找到函数

为了测试，我创建了以下脚本，该脚本在我的笔记本电脑上运行良好，但在我的台式机上运行良好。关于为什么的任何想法？如果相关的话，我的笔记本电脑是 Mac。

```
#!/bin/bash

function sayIt {   
   echo "hello world"
}

sayIt 
```

这会在我的笔记本电脑上返回“hello world”，但在我的桌面上会返回：

> run.sh：3：找不到函数你好世界 run.sh：5：语法错误：“}”意外

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2012-09-18T00:59:44.407

很可能在您的桌面上，您实际上并没有在其下运行，`bash`而是在`dash`其他一些不识别`function`关键字的 POSIX 兼容 shell 下运行。关键字是一个bashism `function`，一个 bash 扩展。POSIX 语法不使用`function`并且强制使用括号。

```
$ more a.sh
#!/bin/sh

function sayIt {   
   echo "hello world"
}

sayIt
$ bash a.sh
hello world
$ dash a.sh
a.sh: 3: function: not found
hello world
a.sh: 5: Syntax error: "}" unexpected 
```

POSIX 语法适用于以下两种情况：

```
$ more b.sh
#!/bin/sh

sayIt () {   
   echo "hello world"
}

sayIt
$ bash b.sh
hello world
$ dash b.sh
hello world 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2017-10-17T07:08:46.887

我遇到了同样的问题，然后我修改了语法，它对我有用。尽量**去掉**关键字***function***，在函数名后*加**括号() 。***

```
#!/bin/bash

sayIt()
{   
   echo "hello world"
}

sayIt 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-03-14T18:54:36.423

ls -la /bin/sh

检查它指向 bash 或 dash 的符号链接

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-11-14T02:19:41.503

对我来说，我只是编辑了 bash 配置文件并忘记**重新启动**我的终端会话。

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2012-09-18T00:36:21.653

在函数名之后或调用时不需要 () 吗？

```
function sayIt() { ...
}

sayIt() 
```

? :)

嗯，实际上，在我的 mac 上，它就像你粘贴的那样工作..

```
dtpwmbp:~ pwadas$ cat aa.sh 
#!/bin/bash

function sayIt() {   
   echo "hello world"
}

sayIt

dtpwmbp:~ pwadas$ ./aa.sh 
hello world
dtpwmbp:~ pwadas$ 
```

比较 bash 版本，AFAIR 一些旧版本需要“()”。

```
dtpwmbp:~ pwadas$ bash --version
GNU bash, version 3.2.48(1)-release (x86_64-apple-darwin12)
Copyright (C) 2007 Free Software Foundation, Inc.
dtpwmbp:~ pwadas$ 
```

还要比较两个 shell 上的 shopt 选项（ man bash ）的状态，也许其中一个打开或关闭了一些兼容语法？不带参数的“shopt”命令将列出支持的选项状态。

[某些 bash 脚本中使用的“function”关键字是什么？](https://stackoverflow.com/questions/7917018/what-is-the-function-keyword-used-in-some-bash-scripts)

# php - 图像数据在到达浏览器的途中被损坏

> ID：12468893
> 
> 赞同：1
> 
> 时间：2012-09-18T00:32:36.100
> 
> 标签：php, apache, drupal, drupal-7

我在 LAMP 环境中的 Drupal 下运行了一个应用程序。它从数据库中提供图像。在我的个人机器（OS X Lion）上，它工作正常。在开发服务器 (Amazon EC2) 上，完全相同的代码不起作用。两台服务器都运行 PHP 5.3。我已经确认数据`echo $fileData`在浏览器接收到数据之间已损坏。此外，我已经确认如果数据是 base64 编码的，则数据不会损坏（我使用脚本来请求数据，对其进行解码并将其保存到文件中）。

在 Drupal 方面，代码位于创建菜单回调的模块中；回调函数直接回显文件数据以避免将整个图像存储在内存中（我使用 PDO::FETCH_BOUND 和 PDO::PARAM_LOB 来创建一个流，但是当我试图找到问题时它现在正在进入一个字符串; 不是这样）。菜单条目有一个自定义的传递回调，它基本上什么都不做。我尝试刷新任何输出缓冲，认为 Drupal 可能过于努力地支持 Unicode 或其他东西，但这也无济于事。

我希望有人知道可能导致我的问题的原因。如果我还不够清楚，我会发布一些代码；现在它充满了注释掉的功能，所以需要一些清理。

**更新1：**

我整理了一些示例代码，但没有出现错误；我可以将代码转换为 Drupal 模块来测试该代码堆栈。但是，我已将错误范围缩小到`echo $fileData`. 代码看起来像这样：

```
function example_menu() {
  $pages['mpicture/%'] = array(
    'title' => 'Picture handler',
    'page callback' => 'example_picture',
    'page arguments' => array(1),
    'delivery callback' => 'example_deliver_png',
    'access callback' => TRUE,
    'type' => MENU_CALLBACK,
  );
}

function example_picture($fileID) {
  // Point 1
  example_output_file($fileID);
}

function example_deliver_png($content) {
}

function example_output_file($fileID) {
  $statement = db_select('mfiles', 'f')
    ->fields('f', array('fileType', 'fileSize', 'fileData', 'fileData64', 'lastModified'))
    ->condition('fileID', $fileID, '=')
    ->execute();

  if ($file = $statement->fetchAssoc()) {
    header('Content-Type: ' . $file['fileType']);
    // Point 2
    header('Content-Length: ' . $file['fileSize']);
    echo $file['fileData'];
  }
} 
```

这不起作用。如果我改成`Point 2`这样：

```
 // Point 2
    header('Content-Length: ' . $file['fileSize']*4/3);
    echo $file['fileData64']; 
```

只要我的客户端`base64_decode`在输出上运行 a ，它就可以正常工作。但是，如果我这样做：

```
 // Point 1
  ob_start()
  example_output_file($fileID);
  $output = base64_encode(ob_get_clean());
  header('Content-Length: ' . strlen($output));
  echo $output; 
```

...它不适用于同一个`base64_decode`ing 客户端。怎么可能？

是的，我将数据存储了两次；在我运行的每一个测试中，我是否使用都没有关系`$file['fileData']`，`base64_decode($file['fileData64'])`所以我认为这不是数据库问题。

**更新 2：**

但奇怪的是，这有效：

```
 // Point 1
  ob_start()
  example_output_file($fileID);
  $output = base64_encode(trim(ob_get_clean()));
  header('Content-Length: ' . strlen($output));
  echo $output; 
```

所以，我想现在我试图找到打印空白的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:01:31.103

我要勒死实习生。我发誓。不是真的，这是一种表达方式……但我很生气。

整个问题是因为他添加的一个新文件的末尾有空格。一个简单的“?>\n”。这在服务器上的每一页之前打印的空白，包括图像处理程序。空白使图像损坏。

我想这里的道德是永远不要在文件末尾关闭 PHP 标记，并确保与您一起工作的每个人都这样做。

# excel - Excel中条件的求和范围

> ID：12468897
> 
> 赞同：0
> 
> 时间：2012-09-18T00:33:13.307
> 
> 标签：excel, date, sum, range

我有一个这样的 Excel 表格

```
 date (A)       value (B)
 1    2012-09-01     1
 2    2012-09-02     2
 3    2012-10-01     5 
```

`value`如果月份和年份与当前日期相同，我想对 s 求和。

预期的结果将`3`在示例中。

我试过

```
=SUM((MONTH(A1:A3)=MONTH(TODAY()))*B1:B3) 
```

但结果是`0`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T00:54:40.103

我能想到的唯一方法是添加一个 C 列，然后对其求和。 ![在此处输入图像描述](../Images/d2ea1d4d29425662aedc5f8b6d0a5b9b.png)

对于使用不确定变量的条件和（在这种情况下为 now() ），我从来没有很幸运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T00:58:52.323

为了有条件地对数据求和，您将不得不再创建两列并在 Excel 中使用 SUMIFS 函数。SUMIFS 语法是 =SUMIFS（要求和的值的范围，检查条件的第一个范围，第一个范围的条件，检查条件的第二个范围，第二个范围的条件，...）。为了使用它，您将不得不添加一个月份列 (C) 和一个年份列 (D)。用 =MONTH(A1) 填充 C1，然后将公式向下拖动。接下来用 =YEAR(A1) 填充 D1 并将该公式也向下拖动。您将获得以下信息：

```
 date (A)       value (B)    month (C)    year (D)
 1   2012-09-01     1            9            2012
 2   2012-09-02     2            9            2012
 3   2012-10-01     5            10           2012 
```

然后用公式 =SUMIFS(B1:B3, C1:C3, MONTH(TODAY()), D1:D3, YEAR(TODAY())) 填充您想要总计的单元格，它应该为您提供第 1 行和第 2 行3的总和。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T01:31:51.500

`=SUM(IF(MONTH(A1:A3)=MONTH(NOW()),1,0)*B1:B3)`

这就是你所说的，你必须通过键入`ctrl`+ `shift`+输入这个公式作为数组公式`enter`，而不仅仅是`enter`.

# .net - 使用命令行参数将 .NET 4.0 定位到 msbuild 后出现 BadImageFormatException

> ID：12468899
> 
> 赞同：1
> 
> 时间：2012-09-18T00:33:30.623
> 
> 标签：.net, visual-studio, msbuild, badimageformatexception

我有一个应用程序和一个它所依赖的 dll，在他们的 csproj 文件中已将其设置为目标 .NET 3.5。我们正在尝试通过`/p:TargetFrameworkVersion=v4.0`作为命令行参数传入 msbuild（使用 NAnt）来构建这两个项目以面向 .NET 4.0。构建成功，但运行程序立即崩溃并出现 BadImageFormatException -“此程序集由比当前加载的运行时更新的运行时构建，无法加载”

使用 .NET 反射器，我检查了输出 exe 和 dll 的所有引用 - 一切都引用 .NET 4.0 dll；没有引用 .NET 2；然而我的调试器告诉我 mscorlib 2.0.50727.4971 已经加载。

将项目本身更改为面向 .NET 4，然后在 Visual Studio 中构建工作正常 - 没有问题。

我有点卡在这里，因为我不知道下一个调查步骤可能是什么。我不知道它为什么要加载那个版本的 mscorlib。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T06:43:51.690

检查 < **supportedRuntime** > 元素是否存在于应用程序的`app.config`. 这必须指定应用程序支持的所有公共语言运行时版本。**有关 < supportedRuntime** > 元素的完整描述，请参阅[http://msdn.microsoft.com/en-us/library/w4atty68.aspx 。](http://msdn.microsoft.com/en-us/library/w4atty68.aspx)

 **在您的情况下，由于该应用程序以前针对 .NET 3.5，因此`app.config`很可能有 CLR 的“v2.0.50727”条目，但我怀疑“v4.0”没有相应的条目。

如上篇文章所述，如果条目被完全删除，则用于构建应用程序的运行时版本。我相信建议每个支持的版本都在`app.config`.**

# python - 在 Python 中创建点类

> ID：12468900
> 
> 赞同：4
> 
> 时间：2012-09-18T00:33:31.370
> 
> 标签：python, class, function, methods, point

我正在尝试在 python 中创建一个名为“Point”的类。我正在尝试在坐标平面 x 和 y 上创建一个点并跟踪它们。以及找到点之间的距离。我必须使用函数和方法。我已经开始了，这是我的代码。当我去执行程序时，我不确定如何使用它。任何帮助将不胜感激。

编辑：更新代码

```
import math

class Point(object):
    '''Creates a point on a coordinate plane with values x and y.'''

    COUNT = 0

    def __init__(self, x, y):
        '''Defines x and y variables'''
        self.X = x
        self.Y = y

    def move(self, dx, dy):
        '''Determines where x and y move'''
        self.X = self.X + dx
        self.Y = self.Y + dy

    def __str__(self):
        return "Point(%s,%s)"%(self.X, self.Y) 

    def getX(self):
        return self.X

    def getY(self):
        return self.Y

    def distance(self, other):
        dx = self.X - other.X
        dy = self.Y - other.Y
        return math.sqrt(dx**2 + dy**2)

    def testPoint(x=0,y=0):
        '''Returns a point and distance'''
        p1 = Point(3, 4)
        print p1
        p2 = Point(3,0)
        print p2
        return math.hypot(dx, dy)

    print "distance = %s"%(testPoint()) 
```

我仍然需要帮助来理解如何实际使用代码。这就是我创建该`testPoint`功能的原因。当我实际去执行 IDLE 中的代码时，我如何证明一切正常？谢谢一群人！！

我还需要在构造函数中添加代码，以便在`COUNT`每次创建 Point 对象时递增 1。我还需要添加适当的代码，以便可以使用比较运算符比较点，同时根据与原点的距离比较“点”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T00:49:39.523

不要忘记`math.hypot`

```
def distance(self, p):
    dx = self.X - p.X
    dy = self.Y - p.Y
    return hypot(dx, dy) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T00:40:34.487

*   你声明`distance`接受一个论点`p`；在您将其称为`other`. 在声明中更改`p`为`other`，以便它们匹配。

*   `sqrt()`不是内置的；您需要做`import math`并将其称为`math.sqrt()`.

*   你没有对`testPoint()`你声明的函数做任何事情；您可以通过在末尾添加一行来调用它，例如：

`print "distance = %s"%(testPoint())`

此时，您的代码可以工作并计算您的点之间的距离为 4.0。

现在，一些风格问题：

*   在 Python 中，您通常不会将成员变量私有化，也不会费心编写琐碎的 getter 和 setter，因此您可以删除`getX()`and`getY()`方法，只需引用`p.X`并`p.Y`直接给定一个`Point p`.

*   该`math`模块具有方便的斜边功能，因此`distance()`您可以将返回线更改为`return math.hypot(dx,dy)`.

*   默认情况下，用户定义的对象有一个没有吸引力的字符串表示：

    `<__main__.Point object at 0x1004e4550>`

您应该在您的类中定义一个字符串转换方法，如下所示：

```
 def __str__(self):
        return "Point(%s,%s)"%(self.X,self.Y) 
```

这将在打印对象时使用，或者需要转换为字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-02T18:23:27.237

哼，为什么不使用复数而不是点类呢？它具有您正在搜索的所有属性以及更多属性（例如旋转）。

这是一个使用迂腐符号“OOP”复合体的示例：

[https://gist.github.com/jul/9286835](https://gist.github.com/jul/9286835)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T00:41:24.463

在您的 Point.distance 方法中，您引用 other.X 和 other.Y；其他不存在。

您应该将距离签名更改为距离（自我，其他）或更改代码以使用 p。

您还需要导入 math.sqrt：

```
from math import sqrt 
```

# cordova - Phonegap，JQuery 移动 MVC

> ID：12468902
> 
> 赞同：0
> 
> 时间：2012-09-18T00:33:54.100
> 
> 标签：cordova, jquery-mobile

有没有办法在 phonegap+jqm 中实现某种 MVC 文件排序？我试图单独存储我的文件并将它们包含在我的 index.html 中。它似乎没有添加一些js文件。

如果我有`<script type="text/javascript" src="js/Controller.js"></script>` Controller.js 应该是什么样子？我只有我的代码吗

```
errorHandler = function (transaction, error) { 
    // returns true to rollback the transaction
    return true;  
} 
```

或者我需要将它们包装在一些标签下？我的应用似乎不包含我的 controller.js 代码。

简而言之......我怎样才能最好地实现 MVC 类型的布局以便于管理并确保我的文件被包含在内？

# three.js - 三.js 更新几何面materialindex

> ID：12468906
> 
> 赞同：9
> 
> 时间：2012-09-18T00:34:38.110
> 
> 标签：three.js, webgl

有没有办法改变现有网格面上的材质索引？[How to Update Things](https://github.com/mrdoob/three.js/wiki/Updates)文档中没有对此进行讨论，因此我不确定是否可行。我为此使用了 WebGLRenderer 上下文。

这基本上是我想要做的：

```
// Make a mesh with two materials
var texture = THREE.ImageUtils.loadTexture(IMAGE_URL);
var geometry = new THREE.Geometry();
geometry.materials.push(new THREE.MeshBasicMaterial({ wireframe: true, vertexColors: THREE.FaceColors}));
geometry.materials.push(new THREE.MeshBasicMaterial({ map: texture, overdraw: true}));

whatever.forEach(function(w, i) { 
  geometry.vertices.push(makeVerts(w));

  var materialIndex = 0;
  var color = new THREE.Color(i);
  geometry.faces.push(new THREE.Face4(i*4+0, i*4+1, i*4+2, i*4+3, 
                    null, color, materialIndex));
});

var mesh = new THREE.Mesh(geometry, new THREE.MeshFaceMaterial());
scene.add(mesh)

// Later on, change some faces to a different material

geometry.faces.filter(someFilter).forEach(function(face) {
  face.color = someOtherColor;
  face.materialIndex = 1;
}

geometry.colorsNeedUpdate = true; // This is how to update the color, and it works.
//geometry.materialsNeedUpdate = true; // This isn't a thing, is it? 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-18T01:24:14.717

**此答案仅适用于 r.125 之前的 three.js 版本。**

这种行为已经改变。

如果您正在使用`THREE.Geometry`，您可以使用以下模式来更改面部材质索引：

```
mesh.geometry.faces[ 0 ].materialIndex = 1; 
```

如果几何图形已预先渲染，您还必须设置

```
mesh.geometry.groupsNeedUpdate = true; 
```

三.js r.124

# javascript - 编辑 Mobify 网站菜单

> ID：12468910
> 
> 赞同：1
> 
> 时间：2012-09-18T00:34:50.387
> 
> 标签：javascript, mobile, web, zepto, mobify

我使用服务 Mobify (www.mobify.com) 来创建我的网站的移动版本。我已经完成了我想做的所有事情，除了编辑我的菜单。我想从菜单中删除一些项目和/或添加子菜单项。如果有人对 Mobify 有任何了解，我将非常感谢您的帮助。

编辑

```
<nav id="x-navigation">
    <div>
        <ul>
        {! We decend into the header object, and use {.}  to iterate through each element in navigation !}  
        {#header}
            {#navigation}
                <li>{.}</li>
            {/navigation}
        {/header}
        </ul>
   </div>
</nav> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T01:16:15.123

当您提取菜单时，我猜您正在做这样的事情：

```
menu: function() {
    return $('.menu');
} 
```

但实际上你可以拥有更高级的选择器！例如，如果您的菜单如下所示：

```
<ul class="menu">
    <li class="home"><a href="/">Home</a></li>
    <li class="about"><a href="/about/">About</a></li>
    <li class="contact"><a href="/contact/">Contact</a></li>
</ul> 
```

如果你只想要前两个锚点，你可以这样做：

```
menu: function() {
    return $('.menu a').splice(0,2);   
} 
```

或者，如果您只想要“Home”和“Contact”锚点：

```
menu: function() {
    var $menu = $('.menu');
    $menu.find(".about").remove();
    return $menu.find('a')
} 
```

这些只是您可以做的几个例子。实际上，您可以做任何 Javascript 和 Zepto 允许的事情！

# c - 在C中每次循环迭代读取三个字符？

> ID：12468911
> 
> 赞同：4
> 
> 时间：2012-09-18T00:34:52.853
> 
> 标签：c, input, io, getchar

这对我来说毫无意义，但希望你们中的一个人理解它为什么这样做。

我有一个作业需要使用 getchar() 读取三个字符，因为三个相邻的整数彼此相关，所以我设置了一个循环结构如下：

```
int c1, c2, c3 = 0;

while(c3 != EOF) {
    c1 = getchar();
    c2 = getchar();
    c3 = getchar();
    ... do something with them...
} 
```

问题是如果字符的数量不能被三整除，最后的迭代就不会执行。因此，如果输入字符“Abcd”，它将在 Abc 上执行第一次迭代，但第二次迭代不会对 D 执行任何操作。“Abcde”也是如此，但 Abcdef 会起作用。

这是一个家庭作业，所以不要为我解决这个问题，但是如果没有找到那么多字符，它只是终止循环，这对于 getchar 是否有些奇怪？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T00:47:06.337

`getchar`是一个阻塞调用，所以它在读取字符或遇到 EOF 之前不会返回。

因此，要么检查是否有`c1`，`c2`要么`c3`是相应`getchar`调用之后的换行符（查看输入行是否已结束），或按`Ctrl+D`(*nix, OS X) 或`Ctrl+Z`(Windows) 来表示结束-文件（EOF）。在 EOF 之后，`getchar`总是会立即返回`EOF`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T14:43:26.780

将您的问题分解为状态。定义在不同状态下对不同输入应该做什么。翻译成代码。

在您的情况下，您需要弄清楚输入不需要的长度何时会影响您以及如何处理它。读取三元组可以正常工作，但是对于您获得的每个字符，您需要查看是否应该提出错误或以特殊方式处理它。

尝试运行字符串`""`, `"a"`, `"ab"`,`"abc"`和`"abcd"`通过您描述的状态，看看您是否可以以理智的方式处理它们。当这可行时，编写代码应该不是问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T15:35:54.030

模拟短文件的一种简单方法是在程序中使用 echo 和管道：

```
echo ABC | ./program_name 
```

这样，您可以在命令行上使用不同的字符串进行测试。echo 的输出将通过管道传输到程序的标准输入。程序中的标准输入将在字符串末尾关闭。这避免了当您直接使用键盘进行测试时导致 getchar 阻塞的 EOF 问题（终端行/字符输入法除外）。

另一个问题是 EOF 是一个 int 常量。因此，请检查您的代码是否稍后不会将 c1、c2、c3 转换为 char。没关系，但是如果将它们转换为char，则无法再与EOF进行比较。

# cygwin - 当我在 Cygwin 中使用管道连接命令时，为什么命令不“独立”执行？

> ID：12468913
> 
> 赞同：2
> 
> 时间：2012-09-18T00:35:10.077
> 
> 标签：cygwin, pipe

我是 Cygwin 的初学者。如果我有：

```
cat output.txt | rm output.txt 
```

我想在删除文件之前打印出结果，但是即使这些命令在单独输入 Cygwin 时可以正常工作，也不会打印结果。相似地：

```
grep -c 'ps' count.tmp | rm count.tmp 
```

我想显示文件被删除`grep -c 'ps' count.tmp`之前的结果。`count.tmp`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T00:37:50.263

不要管它们。

改为这样做：

```
cat output.txt ; rm output.txt
grep -c 'ps' count.tmp ; rm count.tmp 
```

编辑：管道（`|`）获取一个命令的标准输出并将其运行到另一个命令的标准输入中......就像这样：

```
# Get the number of lines
cat output.txt | wc -l 

or 

echo "Hello there" | tr -d' ' 
```

要加入命令，请使用`;`或`&&`

将`;`一个接一个地运行命令

```
echo Hi ; false; echo there 
```

`&&`仅当上一个命令以零状态码（成功）退出时，才会运行下一个命令。

```
echo Hi && false && echo there 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T00:43:59.957

管道命令[可以按任何顺序运行](https://unix.stackexchange.com/questions/37508/in-what-order-do-piped-commands-run/37513)，因此不能保证该`rm`命令不会先运行。利用

```
cat output.txt && rm output.txt 
```

`cat`只有在命令成功时才会删除文件。

# javascript - 在网页呈现之前删除脚本块

> ID：12468914
> 
> 赞同：1
> 
> 时间：2012-09-18T00:35:17.360
> 
> 标签：javascript, facebook

我们想要一种方法来快速确定某个条件，以便我们可以在页面呈现之前删除 javascript 块，例如 adsense 控件。我们要确定的条件是当前用户正在从 Facebook 的平台作为 IFrame 应用程序查看 asp.net 网站的内容。是否可以使用这样的一些

IsFacebookHere 函数（）{

```
 FB.init({ 
        appId: 'my appID value', 
        cookie: true, 
        xfbml: true, 
        status: true });

FB.getLoginStatus(function (response) {
        if (response.authResponse) {
           //  Remove the Adsense from the User experience
        } else {
            // do something else...maybe show a login prompt
        }
    }); 
```

}

Iso，把它放在哪里最有效？我认为 document.ready 为时已晚。任何替代方法或建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:54:29.160

> 我们想要一种方法来快速确定某个条件，以便我们可以在页面呈现之前删除 javascript 块，例如 adsense 控件。我们要确定的条件是当前用户正在从 Facebook 的平台作为 IFrame 应用程序查看 asp.net 网站的内容。

您应该已经在服务器端执行该操作：查找`signed_request`参数——如果将其传递给您的脚本，那么它很可能在 Facebook iframe 中被调用。

# python - Django发布时间到数据库

> ID：12468915
> 
> 赞同：3
> 
> 时间：2012-09-18T00:35:19.593
> 
> 标签：python, django

我是 Django 的新手，正在尝试建立一个博客来记录用户登录的时间和用户注销的时间。

我猜这会出现在视图中，但我不知道如何解决这个问题。

我将如何发送用户登录数据库的时间？

任何提示和指导将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T00:43:02.547

[`auth.model.User.last_login`](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.models.User.last_login)假设您使用的是 Django 的内置身份验证，您可以使用它来获取用户的最后登录时间：

```
user = User.objects.get(username='johndoe')
last_login = user.last_login 
```

如果您想将此数据存储在`User`表格以外的其他位置，您只需将其插入`last_login`您想要的表格即可。否则，它已经在`models.User`.

至于记录注销，您可以使用以下视图进行`logout`查看：

```
from django.contrib.auth import logout
from django.utils import timezone

def logout_view(request):
    logout(request)
    logout_time = timezone.now()
    # Now save your logout_time to the table you want
    # Redirect to a success page. 
```

或者，您可以利用 Django 的`user_logged_out`信号（在 Django 1.3+ 中可用）来记录每次用户注销时的最后一次注销时间：

```
from django.contrib.auth.signals import user_logged_out

def update_last_logout(sender, user, **kwargs):
    """
    A signal receiver which updates the last_logout date for
    the user logging out.
    """
    user.last_logout = timezone.now()
    user.save(update_fields=['last_logout'])
user_logged_out.connect(update_last_logout) 
```

您可以将其放在`models.py`文件的底部。请注意，上面的解决方案假定您将扩展`User`模型以包含`last_logout`字段。如果你不确定你将如何去做，你可以从这里开始：[Django Tip 5: Extending contrib.auth.models.User](http://www.ryanwest.info/blog/2011/django-tip-5-extending-contrib-auth-models-user/)。

事实上，第二种方法正是 Django 更新`last_login`的方式`User`：[models.py](https://github.com/django/django/blob/master/django/contrib/auth/models.py)。

* * *

参考：

1.  [官方 Django 文档`last_login`](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.models.User.last_login)
2.  [扩展`contrib.auth.models.User`](http://www.ryanwest.info/blog/2011/django-tip-5-extending-contrib-auth-models-user/)

# c# - 2D 纹理贴图排序

> ID：12468916
> 
> 赞同：0
> 
> 时间：2012-09-18T00:35:36.957
> 
> 标签：c#, c#-4.0, xna

我想知道如何将Texture2D“分类”成不同的“Tiles”。我在想你可以为贴图创建一个 2D 数组，然后根据纹理贴图中的位置制作图块，并将它们分配给 2D 数组的不同值。但我真的坚持这个想法，需要一些代码帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T21:17:00.667

我使用 int[,] 来映射纹理，int[,] 的每个部分中的不同数字表示不同的纹理，我只需使用两个 for() 循环，使用 int[ 的 GetLength() ,]。

# c# - Form.Invoke() 在表单隐藏时不运行，

> ID：12468918
> 
> 赞同：3
> 
> 时间：2012-09-18T00:35:49.733
> 
> 标签：c#, multithreading

如果我采用 C# 表单 (WinForms) 并使其不可见：

```
MyForm.Visible = false; 
```

然后在我创建的单独线程中；以下代码执行：

```
 this.Invoke(new MethodInvoker(delegate()
                                          {
                                              ProgressBar2.Visible = false;
                                          })); 
```

我的应用程序将冻结而不会继续。如果 MyForm 可见，则线程中的上述代码运行良好。如果它不可见，则代码在读取“this.Invoke（new MethodInvoker（delegate（）”）行后立即停止运行。它不会出错，它只是坐在那里（我设置了一个断点来观察就在“this.Invoke(new MethodInvoker(delegate()”)之后坐在那里。

关于为什么当我的表单被隐藏时它不会执行的任何想法？以及如何解决这个问题？我正在使用“this.Invoke(new MethodInvoker(delegate()”)，因为我需要能够将 MainForm 上的进度条控件设置为可见（并且我必须在主 UI 线程之外的另一个线程上执行此操作）并且我想要无论表单是否可见，都要这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T01:00:56.610

当表单被隐藏时，我相信消息泵不再运行。我知道 Invoke 机制需要消息泵运行。

您可以通过将不透明度设置为 0 而不是可见性来解决此问题，但这有其自身的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-18T01:08:30.867

将您的表单包装在一个元素中并设置其样式=“显示：无；”。将 visible 设置为 false 会导致对象不在客户端代码中呈现。

# ms-access - 命令按钮不会在笔记本电脑上打开报告，但可以在其他计算机上使用

> ID：12468922
> 
> 赞同：1
> 
> 时间：2012-09-18T00:36:03.460
> 
> 标签：ms-access

好吧，我开始感到沮丧。我们制作了这个访问程序来设置部分限制，并且一切似乎都可以在我们尝试过的 PC 上运行。我的老板在他的 PC 上向某人展示了该程序，但是当他到达打开报告的按钮时，他们无法打开。有谁知道这可能是什么原因造成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:09:43.463

我真的很不想回答我自己的问题，但我发现了问题，并且报告现在正在打开。我只是偶然发现了这个，但它似乎有效。我将在 SharePoint 网站上显示的设置更改为不显示。我以前从未注意到这个选项，所以我试了一下。SharePoint 在我当时不知道的笔记本电脑上，我对此一无所知，但至少它现在显示在屏幕上。

# combobox - 在 EXTJS3 的 ComboBox 中的选项之间添加分隔线

> ID：12468927
> 
> 赞同：3
> 
> 时间：2012-09-18T00:37:06.673
> 
> 标签：combobox, extjs3

我正在尝试在 extjs 3.4 的组合框中的选项之间添加一条线。我可以添加该行，但无法使用远程位置的数据填充该行。（如果我删除修改后的 tpl 选项，它会填充）。

这是我的代码。我只需要在“组”字段之间添加一条线，所以说我有 3 个不同长度的不同字段，我需要将它们分开。

我刚开始学习模板和 api 和谷歌搜索并没有太大帮助，所以在询问的时候。感谢人们提供的任何指导。

此外，其中一些代码正在尝试使用 api 或其他论坛，但没有成功。

```
var recipientStore = new Ext.data.Store ({
        autoload: false,
        url: '../../../messaging/inc/action.php?list=to_options',
        reader: new Ext.data.JsonReader ({
            root: 'to_options',
            id: 'id',
            fields: ['id', 'name', 'group']
        })
    });

    var setRecipient = new Ext.form.ComboBox ({
        fieldLabel: 'To',
        store: recipientStore,
        mode: 'local',
        valueField: 'id',
        displayField: 'name',
        editable: false,
        width: 150,
        triggerAction: 'all',
        value: 'group',
        tpl: '<tpl for = "."><div ext:gtip="{value}" class="x-combo-list-item">{value}</div><tpl if = "xindex == 2"><hr /></tpl></tpl>'
    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T20:16:52.300

从[user1637759 的回答](https://stackoverflow.com/a/12481276/1449525)中记下来，我想出了以下几点：

```
Ext.define('common.field.GroupingComboBox', {

    extend: 'Ext.form.field.ComboBox',
    alias: 'widget.common.field.GroupingComboBox',

    constructor: function (args) {
        var me = this,
            groupField = args.groupField || "group",
            groupDisplayField = args.groupDisplayField || groupField,
            displayField = args.displayField || "name";

        args.tpl = new Ext.XTemplate(
            '<tpl for=".">',
            '<tpl if="this.' + groupField + ' != values.' + groupField + '">',
            '<tpl exec="this.' + groupField + ' = values.' + groupField + '"></tpl>',
            '<div class="x-panel-header-default x-panel-header-text-container x-panel-header-text x-panel-header-text-default" title="{' + groupDisplayField + '}">{' + groupDisplayField + '}</div>',
            '</tpl>',
            '<div class="x-boundlist-item">{' + displayField + '}</div>',
            '</tpl>'
        );

        me.callParent(arguments);
    }
}); 
```

大致看起来像这样

![ExtJS 分组组合框](../Images/887b0df743cbd5ff2f12b701ba9ca6a7.png)

虽然这不提供潜水线，但分组有助于将不同的部分分开，我相信这可能会更好。

*警告：我使用的是 ExtJS 4，我不能确定我的解决方案的任何部分是否会在 ExtJS 3 中失败。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T16:35:55.340

我让它以正确的方式使用模板。

下面是正确的代码：

```
var recipientStore = new Ext.data.Store ({
    autoload: false,
    url: '../../../messaging/inc/action.php?list=to_options',
    reader: new Ext.data.JsonReader ({
        root: 'to_options',
        id: 'id',
        fields: ['id', 'name', 'group']
    })
});

var setRecipient = new Ext.form.ComboBox ({
    fieldLabel: 'To',
    store: recipientStore,
    valueField: 'id',
    displayField: 'name',
    editable: false,
    width: 150,
    allowBlank: false,
    triggerAction: 'all',
    tpl: new Ext.XTemplate(
        '<tpl for=".">',
        '<tpl if="this.group != values.group">',
        '<tpl exec="this.group = values.group"></tpl>',
        '<hr><h1><span style="color:gray;">{group}</span></h1><hr>',
        '</tpl>',
        '<div class="x-combo-list-item">{name}</div>',
        '</tpl>'
    )
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T17:45:21.153

既然您询问了 Extjs3，这个扩展可能是一个更好的解决方案：[http ://www.sencha.com/forum/showthread.php?45412-Ext.ux.form.GroupComboBox](http://www.sencha.com/forum/showthread.php?45412-Ext.ux.form.GroupComboBox)

它是为 Extjs 2 编写的，但在我应用了帖子 15 中讨论的调整后，它在 Extjs 3 中对我来说效果很好。

请注意，这在 Extjs 4 中不起作用，在 Extjs 4 中执行此操作的讨论在这里：[http ://www.sencha.com/forum/showthread.php?134344-Grouping-Combo](http://www.sencha.com/forum/showthread.php?134344-Grouping-Combo)

# html - 使用 Dot Net Nuke Wizard 在网页中嵌入 PDF

> ID：12468934
> 
> 赞同：0
> 
> 时间：2012-09-18T00:37:59.497
> 
> 标签：html, dotnetnuke

我正在尝试在我的网页中嵌入 PDF 文件。我正在通过 Dot Net Nuke 更新网页。

**我的问题：**我在 Dot Net Nuke 的页面编辑向导中添加了以下 HTML。当我在添加新的 HTML 后单击保存并访问我更新的网页时，HTML（对于 iframe）不存在吗？Dot Net Nuke 是否不允许嵌入 PDF 或其他内容？

```
<iframe src="http://docs.google.com/gview?url=http://mypdf.pdf&embedded=true" style="width:718px; height:700px;" frameborder="0"></iframe> 
```

如果 Dot Net Nuke 让我自己编写 .aspx 文件，这会容易得多。**您知道如何使用 Dot Net Nukes 向导嵌入 PDF 吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T01:49:03.197

您应该能够在 DotNetNuke HTML 模块中包含 iFrame。但是，如果这引起了麻烦 - 然后编辑您已添加到页面的特定 HTML 模块的“设置”。

将您的代码添加到该模块设置中的“页脚”部分。这会将您的代码直接放在页面上，并且不会被 HTML 编辑器篡改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T21:19:21.113

默认的 HTML 编辑器配置旨在从您的内容中去除 IFrame 等内容。

如果您以主机用户身份登录，您可以转到“主机”->“Html 编辑器配置管理器”并禁用去除此内容的选项。

# java - 从超类的任何子类继承 (Java)

> ID：12468937
> 
> 赞同：4
> 
> 时间：2012-09-18T00:38:28.220
> 
> 标签：java, generics, inheritance, multiple-inheritance

我是一名 C++ 程序员，在 C++ 中我可以做这样的事情：

```
class SuperSuper
{
    virtual void newItem()=0;
}

class SubSuperA:public SuperSuper
{
     virtual void newItem()
     {
         //do something
     }
}

class SubSuperB:public SuperSuper
{
     virtual void newItem()
     {
         //do something different (disappear! :)
     }
}

template <class T>
class SubSub:public T
{
    virtual void newItem()
    {
         T::newItem();
         //do a third thing
    }
} 
```

我想在 Java 中做到这一点，但是我感觉它（至少直接）是不可能的

我在 Java 中轻松设置了前三个类，如下所示：

```
public abstract class SuperSuper
{
    abstract void newItem(Item item);
}

public class SubSuperA extends SuperSuper
{
    @Override void newItem(Item item)
    {
        //stuff
    }
}

public class SubSuperB extends SuperSuper
{
    @Override void newItem(Item item)
    {
        //other stuff
    }
}
//SubSuperC,D,etc 
```

目前正在实施第四个，如下所示：

```
SubSuperA sa=new SubSuperA() {
    @Override public void newItem(Item item)
    {
        super.newItem(item);
        //A lot of stuff that will be changing constantly throughout development
    }
};

SubSuperB sb=new SubSuperB() {
    @Override public void newItem(Item item)
    {
        super.newItem(item);
        //A lot of stuff that will be changing constantly throughout development
    }
}; 
```

请注意，这两个覆盖具有相同的功能。无论它基于什么 SubSuper*，替换 newItem() 都是相同的。显然，这将是一场噩梦。我希望我可以像这样声明一个 SubSub 类

```
 public class SubSub<T> extends T {
    @Override public void newItem(Item item)
    {
        super.newItem(item);
        //A lot of stuff that will be changing constantly throughout development
    }
 } 
```

我可以像这样实例化

```
 SubSub ss=new SubSub<SubSuperA> 
```

等等......但是java中的这个错误：

```
"Cannot refer to the type parameter T as a supertype." 
```

我根据该错误环顾四周，发现[从通用超类型扩展？](https://stackoverflow.com/questions/2000478/extend-from-generic-supertype)它声称使用该方法无法实现我想要做的事情。

我真正需要做的：我有一个与平台无关的推特客户端，它只处理接收推文、存储推文等。它有一个抽象的列类（SuperSuper），我可以为各种不同类型的列（SubSuper）扩展（家庭时间线，提及等），并且每个过滤掉他们想要在 newItem() 中显示的推文。我希望能够为不同的平台插入各种 GUI，并且我需要客户端调用 GUI 特定函数 (SubSub) 来处理将每个单独的推文添加到 GUI 库。拥有一个可以扩展任何 Column 派生类的 GUI 特定类将是理想的解决方案

由于显然这种直接实现在 Java 中是不可能的，我想知道是否有一些语法技巧可以实现相当相似的东西，或者我是否应该创建一个接口，该接口将由 SuperSuper 和 SuperSub* 存储和调用由我的 GUI 处理程序而不是 SubSub 实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T02:13:11.230

模板可以使用 Java 的泛型。然而，在 Java 中，接口远比继承更流行。这是因为 Java 不支持多重继承。

在 C++ 中，您可以扩展多个类。

```
class X : public A, public B, private C { } 
```

因为 C++ 没有区分虚拟类和非虚拟*类*，只有虚拟成员和非虚拟*成员*，所以在可能有也可能没有虚拟方法的类之间没有正式的区别。

另一方面，Java 具有三种不同的类类型：

*   具体（完全非虚拟，所有方法都是具体的）
*   摘要（部分虚拟，部分非虚拟）
*   接口（完全虚拟，没有具体方法）

在 Java 中，虚拟方法被称为抽象方法，所以我将在这里称它们为抽象方法。

Java 也有泛型。泛型在语法上类似于模板，但在实现方面完全不同。我将把实施研究留给您（在您的搜索中使用的关键字是“擦除”）。

泛型在类上声明。例如，Java 与 C++ 的等价物`vector`是`ArrayList`类。它的使用非常相似：

```
List<String> strs = new ArrayList<String>(); 
```

这里，`List`是一种超类型的`ArrayList`. `List`是一个接口，并`ArrayList`实现它。`List`它本身在其声明中声明了一个泛型类型，如下所示：

```
public interface List<E> ... {

    // ...

    E get(int index);

    // ...
} 
```

注意如何`get`返回`E`。这里，`E`没有具体定义。它是一个泛型类型，在这种情况下，任何东西都可以用来代替它，`String`, `Object`, `Boolean`, 你自己的类等等。

`ArrayList`实现`List`，并且还声明了一个泛型类型：

```
public ArrayList<E> implements List<E>, ... {

    // ...

    public E get(int index) {
        // bounds check
        return elements[i];
    }

    // ...
} 
```

您还可以使用类型边界限制泛型上的类型。这有点超出了这个范围，因为你想要的不是真正的泛型。你想要接口。

在您的示例中，您将首先声明一个带有`newItem`.

```
public interface A {
    void newItem();
} 
```

每个方法都必须来自具体的实现或接口，因此需要这个接口。具体来说，这个接口相当于`SuperSuper`. 它是一个完全虚拟的类（接口）。现在为您的课程：

```
public class B implements A {
    @Override
    public void newItem() {
        // Do something
    }
}

public class C implements A {
    @Override
    public void newItem() {
        // Do something else
    }
} 
```

最后一点，对于像我这样没有太多 C++ 经验的人来说，这有点令人困惑，但我假设你所说的是你想用一个`newItem`方法创建一个模板类型。在 Java 中，这将是`A`接口的另一种实现，或者您可以扩展 B 或 C 并覆盖它们的方法。

```
public class D extends B {
    @Override
    public void newItem() {
        // And yet another something else
    }
} 
```

然后使用`newItem`方法很简单：

```
A a = new B(); // or "new C()" or "new D()"
a.newItem(); 
```

就像你可以说的那样

```
SuperSuper* a = new SubSuperA(); 
```

在 Java 中，您可以对接口、抽象类和具体类做同样的事情，就像我在上面所做的那样。

所以我认为接口是解决你问题的方法。我强烈建议您阅读有关如何在 Java 中使用接口的内容。它们在没有多重继承的情况下提供了强大的类型。我会很快找到几个链接。

*   [多态性](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)的复习。
*   在线教科书，关于[多态性和接口](http://www.artima.com/objectsandjava/webuscript/PolymorphismInterfaces1.html)的章节。
*   关于一般接口的书：[面向接口的设计](https://rads.stackoverflow.com/amzn/click/com/0976694050)。

希望那些帮助。如果您需要任何澄清，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T05:23:06.860

你不能。

C++ 模板实际上是源代码“模板”。当您有一个模板类或函数时，对于用作类型参数的每种类型，编译器都会有效地生成（“实例化”）源代码的单独副本，其中类型参数替换为实际类型参数。例如，`vector<int>`and`vector<string>`是完全独立的类型，其函数的编译代码也可能是独立的（就像它们是独立的类型一样）。

这就是为什么可以做一些事情，比如从类型参数继承。对于编译器，它只是用任何类型的参数替换`T`它看到的任何地方。生成的代码是有效的，所以它可以工作。

Java 中的泛型非常不同。泛型类或方法只有一份编译后的代码副本。该一个版本的编译代码必须同时适用于其范围内的*任何可能的类型参数（现有的或未来的）。*

所以想想如果你能按照你的建议去做这意味着什么。类的编译代码只有一份副本`SubSub`，它继承了，嗯`T`，不管它是什么。所以它必须同时继承*每种*类型。这怎么可能？一个类只能有一个明确的父类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T03:15:44.017

根据您的 Java 代码，我认为您真的想要装饰器模式：

```
public class SubSub<T extends SuperSuper> extends SuperSuper {

     private final Class<T> clazz;

     public SubSub(Class<T> clazz){
         this.clazz = clazz;
     }

     @Override
     public void newItem(Item item){
          T sup = clazz.newInstance();
          sup.newItem(item);
          // other stuff
     }
} 
```

使用如下调用：

```
SubSub<SubSuperA> foo = new SubSub<SubSuperA>(SubSuperA.class); 
```

您可以完全摆脱泛型，例如，如果您只想将类的名称作为参数传递：

```
public class SubSub extends SuperSuper {

     private final SuperSuper _super;

     public <T extends SuperSuper> SubSub(Class<T> clazz){
         _super = clazz.newInstance();
     }

     @Override
     public void newItem(Item item){
          _super.newItem(item);
          sup.newItem(item);
          // other stuff
     }
} 
```

使用以下形式的实例化：

```
SubSub foo = new SubSub(SubSuperA.class); 
```

或者：

```
SubSub foo = new SubSub((Class<SuperSuper>) Class.forName("SubSuperA")); 
```

# java - I can't get JUnit working on easy Java example

> ID：12468943
> 
> 赞同：1
> 
> 时间：2012-09-18T00:40:22.790
> 
> 标签：java, maven, junit

I can't get this JUnit test working on this easy Java example I am working on. It works inside Eclipse but not from the command line... mvn test

Here is my test code:

```
import junit.framework.Assert;
import org.junit.Test;
import org.runnablejar.TestJAR.App;

public class TestApp {
    @Test
    public void testPrintHelloWorld() {

        Assert.assertEquals(App.getHelloWorld(), "Hello Worl");

    }
} 
```

Here is my test output:

```
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Building TestJAR
[INFO]    task-segment: [test]
[INFO] ------------------------------------------------------------------------
[INFO] [resources:resources {execution: default-resources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/jsmith/workspace-sts-3.0.0.RELEASE/TestJAR/src/main/resources
[INFO] [compiler:compile {execution: default-compile}]
[INFO] Nothing to compile - all classes are up to date
[INFO] [resources:testResources {execution: default-testResources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/jsmith/workspace-sts-3.0.0.RELEASE/TestJAR/src/test/resources
[INFO] [compiler:testCompile {execution: default-testCompile}]
[INFO] Compiling 2 source files to /home/jsmith/workspace-sts-3.0.0.RELEASE/TestJAR/target/test-classes
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Compilation failure
/home/jsmith/workspace-sts-3.0.0.RELEASE/TestJAR/src/test/java/TestApp.java:[7,2] annotations are not supported in -source 1.3
(use -source 5 or higher to enable annotations)
    @Test

[INFO] ------------------------------------------------------------------------
[INFO] For more information, run Maven with the -e switch
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2 seconds
[INFO] Finished at: Mon Sep 17 20:36:52 EDT 2012
[INFO] Final Memory: 10M/98M
[INFO] ------------------------------------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T00:43:55.487

You need to configure the `maven-compiler-plugin` to use 1.5 or 1.6.

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <configuration>
        <source>1.6</source>
        <target>1.6</target>
    </configuration>
</plugin> 
```

# php - 在 Zend 模型中使用 join()

> ID：12468950
> 
> 赞同：3
> 
> 时间：2012-09-18T00:42:21.503
> 
> 标签：php, zend-framework, join

我想使用连接创建一个模型。这是我的代码：

```
$userModel = new self;
$select = $userModel->select();
$select->setIntegrityCheck(false)
   ->from(array('u' => 'accounts'),array('username','email'))
   ->where('u.id = ?',$id)
   ->join(array('i' => 'permissions'),'i.user_id = u.id',array('permission_type'));
$user = $userModel->fetchRow($select); 
```

这完美地工作。唯一的问题是权限表中的权限类型有多个条目。使用这段代码，我只得到模型中的第一个条目！有没有办法解决这个问题，并获取所有条目？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T01:40:36.867

我相信您可能正在寻找 fetchAll。像这样：

```
...
$users = $userModel->fetchAll($select); 
```

更多信息在这里[http://framework.zend.com/manual/1.12/en/zend.db.table.rowset.html](http://framework.zend.com/manual/1.12/en/zend.db.table.rowset.html)

# php - 不要删除 CakePHP 分页中活动页面上的“a”链接

> ID：12468953
> 
> 赞同：0
> 
> 时间：2012-09-18T00:42:47.280
> 
> 标签：php, html, css, cakephp, twitter-bootstrap

我正在使用 CakePHP，我需要在我的页面中对一些内容进行分页。

我正在使用带有 CakePHP 的 Twitter Bootstrap 布局，但不幸的是，CakePHP 使用以下逻辑进行分页：

如果活动链接等于活动页面，那么它只是`a`从链接中删除标签。

但是，为了我的`Twitter Bootstrap layout`工作，我需要`a`在所有分页编号（包括活动编号）中使用该标签：http: [//twitter.github.com/bootstrap/components.html#pagination](http://twitter.github.com/bootstrap/components.html#pagination)

我是否需要创建一个全新的 Helper 来执行此操作，或者是否有“最简单”的解决方案？

我不想破解（更改）twitter bootstrap 和 CakePHP 核心......

谢谢！

伊万

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T06:07:40.423

除了所需的分页链接之外，您还可以使用其中一个用户贡献的[引导插件来获得更多好东西。](http://plugins.cakephp.org/packages?query=bootstrap)推荐使用nodesagent和slywalker的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T03:47:24.837

我建议覆盖默认的 PaginatorHelper。基本上，您创建一个像 MyPaginatorHelper 这样扩展 PaginatorHelper 的新类，从原始助手中找到您需要修改的方法，从原始助手中复制它们并在您的助手中修改它们。您可能需要覆盖的方法是 numbers()。所以你的班级看起来像这样：

```
<?php

class MyPaginatorHelper extends PaginatorHelper {

function numbers() {
...copy paste and modify...
} 
```

请记住视图中的 $this->MyPaginatorHelper（而不是原始视图）。这不会破坏任何东西，并且即使在更新核心之后无需任何更改也*应该可以工作。*

# php - 使用 Jquery 获取数据值并将其提供给会话变量

> ID：12468954
> 
> 赞同：1
> 
> 时间：2012-09-18T00:42:55.953
> 
> 标签：php, jquery

我需要帮助，因为我在这方面完全是新手。

我在标题中设置了一个会话：

```
session_start(); 
$_SESSION['catname'] = $catname; 
```

我在单页中检索到：

```
$catname = $_SESSION['catname']; 
session_destroy(); 
```

我有几个 div，每个都有 jquery 可以使用的数据类型：

```
<div class="mydiv1" data-category="cat1"></div>

<div class="mydiv2" data-category="cat2></div> 
```

是否可以在点击函数上使用 jquery 从数据类别中获取“cat1”和“cat2”并使用它为我的会话变量提供 $catname？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T01:03:14.553

我认为您需要为此使用ajax。

也许是这样的：

```
$("#button").click(function(){
var catname = $("#mydiv1").attr("data-category");
$.ajax({
    type : "POST",
    url : "file.php",
    data : "&catname="+catname,
    success : function(data){
         alert("Success");
    }
});
}); 
```

您将通过获取猫名将会话变量存储在“file.php”中。似乎你在这里有类似的问题：[save-value-in-php-session-variable](https://stackoverflow.com/questions/3261978/save-value-in-php-session-variable)

# android - Android：检查通知

> ID：12468955
> 
> 赞同：0
> 
> 时间：2012-09-18T00:43:00.363
> 
> 标签：android, android-intent

我是 android 新手，正在尝试使用我认为应该是一个简单的真/假陈述。我想做的（甚至不确定是否有可能）只是检查是否有任何待处理的通知。所以基本上，如果 android 设备顶部的 LED 从短信、Facebook 帖子、语音邮件或任何我可以将 True 返回到布尔值的东西闪烁。

在这一点上，我不需要对他们做任何事情。我只是想知道它是否可能（如果是，如何）看看是否有任何东西在等待并且没有清除它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T00:58:35.697

我建议在进一步学习之前先学习一些教程或阅读一两本书，从而更好地适应 Android 平台。

但是，要回答您的问题，您无法在状态栏中查看来自其他应用程序的通知。`Notification`但是，您可以通过和`NotificationManager`类控制自己的通知。这是他们的文档：

[http://developer.android.com/reference/android/app/Notification.html](http://developer.android.com/reference/android/app/Notification.html)

[http://developer.android.com/reference/android/app/NotificationManager.html](http://developer.android.com/reference/android/app/NotificationManager.html)

# mysql - 加入/排序运行缓慢

> ID：12468958
> 
> 赞同：0
> 
> 时间：2012-09-18T00:43:11.740
> 
> 标签：mysql, sql, join, sql-order-by

我花了几个小时制作了一个 SQL 查询，它执行 a`JOIN`并将两列排序在一起，这是我以前没有处理过的。这是查询：

```
SELECT `m`.`id`, `m`.`primary_category_id`, `m`.`primary_category_priority`, `m`.`description`
FROM (`merchant` AS m)
LEFT JOIN `merchant_category`
    ON `merchant_category`.`merchant_id` = `m`.`id`
WHERE
    `merchant_category`.`category_id` = '2'
    OR `m`.`primary_category_id` = '2'
GROUP BY `m`.`id`
ORDER BY
    LEAST(merchant_category.priority = 0, `primary_category_priority` = 0) ASC,
    LEAST(merchant_category.priority, `primary_category_priority` ) ASC
LIMIT 10 
```

它必须将两列排序在一起，一列来自 Mercer_category 表，一列来自商人表，以便将它们排序在一起。每一行`merchant`都有一个“主要”类别，直接在表中引用，以及零个或多个“次要”类别，存储在`merchant_category`表中。现在它工作正常，但速度很慢：通常在我的生产数据库上超过一分钟。我想`JOIN`加上复杂的排序会导致问题，但我能做什么？

**编辑**这是两个表的模式：

```
CREATE TABLE IF NOT EXISTS `merchant` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(100) CHARACTER SET utf8 NOT NULL,
  `primary_category_id` int(11) NOT NULL,
  `primary_category_priority` int(10) unsigned NOT NULL DEFAULT '0',
  `description` mediumtext CHARACTER SET utf8 NOT NULL,
  PRIMARY KEY (`id`)
)

CREATE TABLE IF NOT EXISTS `merchant_category` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `merchant_id` int(10) NOT NULL,
  `category_id` int(10) NOT NULL,
  `priority` int(10) unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`)
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T01:17:41.863

尝试在第二张表上添加外键约束，

```
CREATE TABLE IF NOT EXISTS `merchant_category` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `merchant_id` int(10) NOT NULL,
  `category_id` int(10) NOT NULL,
  `priority` int(10) unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  CONSTRAINT mc_fk FOREIGN KEY (`merchant_id`) REFERENCES `merchant`(`id`)
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T00:56:34.937

您强制它`LEAST`为每一行运行（两次！）以便对其进行排序。它不能为此使用索引。

# c# - 为长时间运行的进程设计 FSM 的最佳实践

> ID：12468959
> 
> 赞同：1
> 
> 时间：2012-09-18T00:43:13.950
> 
> 标签：c#, fsm

我主要是 ac# 开发人员，正在寻找一些关于为一系列长时间运行的进程设计有限状态机的指导（理论和/或代码示例）。定义的每个操作都可以运行几分钟。我只是使用 Windows 任务计划程序来管理计划和实例化。

下面是我正在查看的内容的简化大纲。到目前为止，我已经使用 Stateless 构建了 Op Status FSM。现在，我正在尝试找出处理操作顺序的最佳方法，其中包含一些条件，例如项目#3 所示。这些条件基于 Op2 产生的数据。

到目前为止我考虑过的选项：

*   为操作序列创建一个 FSM（似乎过于复杂，但也许我在某处缺少基本知识）
*   为每个操作创建一个操作管理器，让每个管理器担心它感兴趣的状态以及下一个状态应该是什么

**操作 -> 按顺序执行下一个操作**

1.  无 -> Op1
2.  操作 1 -> 操作 2
3.  Op2 -> Op3 或 Op4 有条件
4.  操作 3 -> 操作 4
5.  操作 4 -> 操作 5
6.  Op5 -> 无

**操作状态**

*   闲
    *   触发器：计划 -> 待定
    *   约束：必须设置操作
*   待办的
    *   触发器：运行 -> 运行
*   跑步
    *   触发器：失败 -> 错误
    *   触发器：成功 -> 空闲
    *   触发器：未就绪 -> 待处理
*   错误
    *   触发器：重试 -> 待处理
    *   触发器：取消 -> 空闲（删除分配的操作）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T00:46:10.367

This really sounds like the specific use case intended for [Windows Workflow Foundation](http://msdn.microsoft.com/en-us/library/dd489441.aspx). It provides all of the required plumbing to handle this type of scenario, including the ability to persist the workflows, restart them, etc.

# matlab - 如何在MATLAB中的contourf函数中设置任意最大值和最小值的色阶？

> ID：12468961
> 
> 赞同：1
> 
> 时间：2012-09-18T00:43:24.097
> 
> 标签：matlab, colors, scaling, fill, contour

一个简单的问题。无论如何要告诉 Matlab 函数“contourf”，用我给定的值（而不是数据集的值）缩放颜色？我知道你可以简单地调用这个函数

```
contourf(x,y,Data, v) 
```

并在 v 向量中设置范围，但我的问题是 Matlab 会自动检查 v 向量中的指定值是否确实存在于数据中？如果它们不存在，则它会自动将颜色范围重新调整为数据集中可用的最大值和最小值。

例如，如果

```
Data =[0 1 2; 3 4 5; 6 7 8]; 
v=-10:1:10; 
```

然后当我打电话时

```
contourf(x,y,Data,v) 
```

显示的颜色图会自行缩放

```
v=[0:8]; 
```

我要求这样做的原因是我想为各种数据集绘制多个等高线图，但我需要始终具有与最大值/最小值相关联的相同颜色代码，这些颜色代码可能不一定在传递给 contourf 函数的当前数据数组中.

我希望我足够清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T04:31:50.623

看看`caxis`命令。我没有用 测试它`contourf`，但我认为这就是你所追求的。

像这样使用它：

```
caxis([ cmin cmax ]) 
```

其中`cmin`和`cmax`是当前颜色映射中作为索引给出的最小和最大颜色。来自`help caxis`：

> CAXIS 是一个设置坐标区属性 CLim 和 CLimMode 的函数。

这意味着您也可以手动修改这些轴设置（即，`set(gca, 'clim', [...])`）

# ruby - 当 1.8.7 不在 rvm 下时将 Ruby 从 1.8.7 升级到 1.9.3

> ID：12468962
> 
> 赞同：3
> 
> 时间：2012-09-18T00:43:48.090
> 
> 标签：ruby, rvm

我将 ruby​​ 1.8.7 作为我机器中的默认版本。问题是它不在 RVM 下，切换到 1.9.3 什么也没做。

如何卸载 1.8.7 并使 1.9.3 成为默认的 ruby​​ 版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T03:33:23.163

```
$ rvm list

rvm rubies
   ruby-1.8.6-p420 [ x86_64 ]
   ruby-1.8.7-p334 [ x86_64 ]
=> ruby-1.9.2-p180 [ x86_64 ]
   ruby-1.9.3-p194 [ x86_64 ]

$ rvm remove 1.8.7-p334

Removing /usr/local/rvm/src/ruby-1.8.7-p334...
Removing /usr/local/rvm/rubies/ruby-1.8.7-p334...
Removing ruby-1.8.7-p334 aliases...
Removing ruby-1.8.7-p334 wrappers...
Removing ruby-1.8.7-p334 environments...
Removing ruby-1.8.7-p334 binaries...

$ rvm use --default 1.9.3-p194

Using /usr/local/rvm/gems/ruby-1.9.3-p194

$ rvm list

rvm rubies
   ruby-1.8.7-p334 [ x86_64 ]
   ruby-1.9.2-p180 [ x86_64 ]
=> ruby-1.9.3-p194 [ x86_64 ] 
```

如果`rvmsudo rvm`您以 root 身份安装 RVM 并希望您的更改反映给所有用户，请使用此选项。

编辑：我刚刚意识到你说 1.8.7 默认情况下在系统上。只需以 root 身份安装 RVM 并安装 1.9.3，然后按照我上面描述的使用`rvmsudo`. 确保使用最新版本的 RVM。干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T00:50:09.437

你在什么机器上？一种方法是`rvm use 1.9.3 --default`。如果这对您在控制台上不起作用，请考虑将其放在您的最后一行`~/.zshrc`或`~/.bashrc`-- 无论您使用哪个 shell。

# php - 为什么 var_dump($_POST) 没有显示我的所有变量？

> ID：12468967
> 
> 赞同：0
> 
> 时间：2012-09-18T00:44:44.923
> 
> 标签：php, html, post

我有一个表单，其中有超过 350 个 name="somename" 附加到 HTML 输入元素。当我运行 var_dump($_POST) 时，只有 150 个出现，这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T01:18:48.587

确保在 html 中，您正在使用

```
<input name="name[]" value=""/> 
```

代替

```
<input name="name" value=""/> 
```

如果名称属性中没有括号，php 将用每个新名称字段覆盖 $_POST['name']。

# jquery - 隐藏的 div 将固定的 div 移动到窗口的中间

> ID：12468969
> 
> 赞同：3
> 
> 时间：2012-09-18T00:45:06.170
> 
> 标签：jquery, css, positioning

我对 css 中的定位非常陌生（例如相对、固定、绝对）。我想要做的是在我的屏幕顶部创建一个固定的导航栏，当用户向下滚动内容时它会保留在那里。

这很容易通过将其定位为绝对、top:0、left:0 来完成。问题是，当用户单击导航菜单中的“联系人”时，我有一个隐藏的联系人面板会向下滑动。我希望导航栏随之向下移动，出现在联系面板下方。所以我不得不将导航从绝对位置更改为固定位置。这允许它向下移动到联系人面板下方，但是当您继续滚动时，导航栏仍保留在窗口的中间，而不是在最顶部。

我在这里有一些示例代码：http: [//jsfiddle.net/hwDwR/51/](http://jsfiddle.net/hwDwR/51/)

总而言之，我希望绿色导航栏“粘”在蓝色接触面板上，直到导航栏到达窗口顶部。我希望导航栏始终显示在顶部（就像它在显示隐藏的 div 之前出现的那样），即使在显示隐藏内容之后也是如此。

希望我能够解释我正在尝试做的事情。任何帮助将不胜感激！

**已解决：再次感谢您的回复，但这是我的目标：http: [//jsfiddle.net/hwDwR/66/](http://jsfiddle.net/hwDwR/66/)（将在 6 小时内作为答案发布）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T01:01:58.793

请试试这个：http: [//jsfiddle.net/z2LVR/](http://jsfiddle.net/z2LVR/)

它表现的原因是因为内容 div 位于固定的顶部`div`

希望它适合原因`:)`

**代码**

```
 <div id="nav">
     my | nav | bar | contact (click me)
 </div>
  <div class="panel">
  Contact information to slide down (and stay down).
 </div>

$(document).ready(function(){
  $("#nav").click(function(){
    $(".panel").slideDown("slow"); // you can use slideToggle if you want. Just a suggestion.
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T01:34:24.993

将此行添加到`click`处理程序：

`$("#nav").animate({'top':'200px'},'slow');`

并添加`position: fixed`到`.panel`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T01:40:34.830

[http://jsfiddle.net/jklm313/hwDwR/57/](http://jsfiddle.net/jklm313/hwDwR/57/)

将 'nav' 和 'panel' 包裹在一个 div 中并对其应用固定定位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T01:27:41.260

这是我追求的效果：http: [//jsfiddle.net/hwDwR/66/](http://jsfiddle.net/hwDwR/66/)

再次感谢您的回复，我已经为此困惑了一两天。

# mysql - 休眠会话打开后奇怪的 150 毫秒延迟

> ID：12468970
> 
> 赞同：1
> 
> 时间：2012-09-18T00:45:09.143
> 
> 标签：mysql, performance, hibernate, sessionfactory

我正在使用 hibernate 3.6、hibernatetemplate、hibernateDaoSupport、opensessioninviewfilter 和 mysql db，我查看了我的查询性能，我发现每个查询在查看日志后都需要或多或少 300 毫秒来执行我发现有一个奇怪的打开休眠会话后的延迟：

18/09/12 01:23:59:721 调试 org.hibernate.impl.SessionImpl - 在时间戳打开会话：5521112431497216 18/09/12 01:23:59:884 调试 org.hibernate.jdbc.AbstractBatcher - 即将打开 PreparedStatement（打开 PreparedStatements：0，全局：0）

打开会话并打开准备好的语句后或多或少有 160 毫秒的间隙，我不知道发生了什么，我激活了二级缓存的连接池，但查询真的很快，只是这个差距是杀了我，我检查了即使 sessionfactory 在每次调用中都是相同的并且看起来是一样的，我什至试图拉出 opensessioinviewfilter。

# activemq - ActiveMQ 5.6 慢消息转发

> ID：12468973
> 
> 赞同：1
> 
> 时间：2012-09-18T00:45:48.323
> 
> 标签：activemq

我有这些应用程序服务器运行 Tomcat 将消息排队到本地嵌入式代理。这些消息被转发到一个独立的代理。有另一台机器连接到使用消息的独立代理。嵌入式代理和独立代理是持久的。

我有这个队列在嵌入式代理中增长得比消息转发到独立代理更快。我可以清楚地看到调度计数小于入队计数。我看到嵌入式代理上的这个队列只有一个消费者连接到独立代理，许多消费者连接到独立代理。

独立代理中的队列大小几乎为 0，CPU 大约 95% 处于空闲状态，这意味着独立代理没有达到最大值，消息没有堆积在独立代理上，而是在嵌入式代理中。

是否有配置参数可以使独立代理增加从嵌入式代理读取的线程/消费者数量？或者让嵌入式代理更快或更多地向独立代理发送消息？

我在所有服务器上运行 ActiveMQ 5.6.0。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:49:34.773

查看了 ActiveMQ 站点中的所有优化教程以及他们的贡献者编写的优化教程并禁用了管道订阅，增加了独立代理中的内存量并增加了 networkConector 条目的数量。

所有这些更改都使事情变得更好，但消息的转发速度仍然比生成的慢。最终解决方法是我的磁盘不是高性能磁盘，通信带宽为 100%

当我等待获得强大的 RAID 时，我让独立代理非持久化，并且我看到我的队列在几分钟内就耗尽了。从那以后，它们几乎保持不变。

# java - Java中的树实现

> ID：12468981
> 
> 赞同：4
> 
> 时间：2012-09-18T00:46:27.117
> 
> 标签：java, tree

我得到了以下树：

![原始树](../Images/b98938adcf8f1079a6c4c7bb851c70a3.png)

然后我们被告知使用 last-child/previous-sibling 方法来改变这三个的实现。结果如下：

![最后一个孩子/上一个兄弟方法之后的树](../Images/969fade1a551e09033e0ca53f71e4661.png)

我现在正在研究 Java 实现以在这棵树上执行不同的功能。我们有一个 Tree 接口和一个 TreeNode 接口。它们都有许多我们要填写的功能。

节点是这样创建的：

```
MyTreeNode a = new MyTreeNode ("a"); 
```

以这种方式创建树（带有根）：

```
MyTree     tree = new MyTree (a); 
```

最后，节点被赋予兄弟姐妹，如下所示：

```
e.setChild(j);
e.setSibling(d); 
```

我已经编写了 setChild、setSibling、getNextSibling、getFirstChild 和 getChildren 的方法。例如，这是 getChildren 的代码：

```
public List getChildren ()
{
    List <MyTreeNode> children = new ArrayList <MyTreeNode> ();

    MyTreeNode x = this.child;

    children.add(x);

    while (x != null && x.sibling != null) {
        x = x.sibling;
        children.add(x);
    }

    return children;
} 
```

我现在完全不知道如何编写节点子树的高度、深度、大小、getPreOrder、getPostOrder 和树大小的方法。

由于树现在处于这种不同的表示中，我不确定如何编写递归方法来检查节点的高度或深度。通常，据我了解，您会递归检查左/右子树..但现在没有（据我所知）。我能想到的唯一方法是使用许多 if 语句和 while 循环遍历每个节点。但这不是最好的方法。

如何使用树的这种实现递归地编写这些方法？

另外，我不确定如何获取有关整个树的详细信息，因为节点不会以任何方式存储在一起。它们是按照我上面展示的方式实现的，所以我不确定如何集体收集有关所有节点的数据。

如何在整个树的所有节点上创建树大小、isEmpty 或 makeEmpty 等方法？

抱歉，解释过于冗长。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T00:59:49.810

假设您的树有这样的节点结构：

```
public class Node{
   String nodeName;

   Node left;
   Node right;

   public Node(String nodeName, Node left, Node right){
     this.nodeName = nodeName;
     this.left     = left;
     this.right= right;
   }
} 
```

以下是我对如何构建新树的看法：当您向树中添加新节点时，您仍将维护您的树结构。根据您将节点添加到树的方式，您仍将继续添加到父节点的左侧或右侧。

可视化新树的一种可能方法是这样的：

```
 A
               /
              E
            /   \
           D     J
         /   \   / \
        C    H  I   K
       /
      B
     /
    G
   /    
  F 
```

*注意：我在这里假设如果它是一个孩子，它会被添加到你父母的左边。但这最好取决于您的要求*

如果您可以以这种方式可视化这棵树，那么您用于获取高度、前序、后序遍历的递归函数仍然保持不变。

还有一些提示：

*   添加兄弟节点就像在节点的父节点的左侧或右侧添加一个节点，即如果当前节点位于其父节点的左侧，您将在右侧添加新节点。

*   添加一个孩子将保持不变。根据您的逻辑，您可以将新节点添加为当前节点的左子节点或右子节点。

# python - 在 python、bash 或 perl 中，我怎样才能人为地膨胀我的内存

> ID：12468983
> 
> 赞同：3
> 
> 时间：2012-09-18T00:46:59.483
> 
> 标签：python, memory

Hopefull真的很简单。我想人为地膨胀我的记忆......我这样做是为了测试......在linux中的任何方式都可以。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T00:48:46.507

Python：

```
x = [0]
while True: x.extend(x) 
```

这将使大小翻倍，`x`直到内存用完（你得到`MemoryError`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T00:54:40.753

只做一个字符串。只有几个额外的字节开销，而且非常快，因为内存是一次性分配的

```
dummy = ' '*num_bytes_to_use_up 
```

没有可移植的方式来询问有多少可用内存

linux下可以看/parse`/proc/meminfo`

```
>>> open('/proc/meminfo').readlines()[1]
'MemFree:         1248940 kB\n'
>>> dummy = ' '*1000000000
>>> open('/proc/meminfo').readlines()[1]
'MemFree:          271472 kB\n'
>>> del dummy
>>> open('/proc/meminfo').readlines()[1]
'MemFree:         1243464 kB\n' 
```

# sql-server - 在 SQL Server 中，如何让选择返回空字符串，并且在为空时不为空

> ID：12468985
> 
> 赞同：3
> 
> 时间：2012-09-18T00:47:07.630
> 
> 标签：sql-server

我有一个可为空的 varchar，即使它为空，我也希望我的选择返回一个空字符串而不是空字符串。那是

```
SELECT FIRST, LAST 
FROM CUSTOMER 
```

我想要的是如果`FIRST`为空，我希望返回为`""`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T00:50:39.863

你也可以使用

```
SELECT COALESCE(FIRST, ''), LAST FROM CUSTOMER 
```

这具有更便携的优点（COALESCE 是 SQL 标准的一部分，ISNULL 不是）

您还可以使用任意数量的参数，例如

```
SELECT COALESCE(FIRST, SECOND, THIRD, '')... 
```

并且 COALESCE 将使用遇到的第一个非空值

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-18T00:48:52.133

```
SELECT isnull(FIRST,'') AS FIRST, LAST FROM CUSTOMER 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T00:49:41.673

```
select isNull(First,'') from customer 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T00:51:14.560

```
SELECT COALESCE(FIRST, ''), LAST FROM CUSTOMER 
```

也可以

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-16T18:24:37.237

```
CREATE FUNCTION [dbo].[ParamParserFn]
    (
      @delimString VARCHAR(255) ,
      @delim CHAR(1)
    )
RETURNS @paramtable TABLE
    (
      [Index] INT ,
      [Token] INT
    )
AS 
    BEGIN

        DECLARE @len INT ,
            @index INT ,
            @nextindex INT ,
            @counter INT ,
            @data VARCHAR(50)

        SET @len = DATALENGTH(@delimString)
        SET @index = 0
        SET @nextindex = 0
        SET @counter = 0

        WHILE ( @len + 1 > @index ) 
            BEGIN

                SET @nextindex = CHARINDEX(@delim, @delimString, @index)

                IF ( @nextindex = 0 ) 
                    SET @nextindex = @len + 1

                INSERT  @paramtable
                        SELECT  @counter ,
                                SUBSTRING(@delimString, @index,
                                          @nextindex - @index)

                SELECT  @index = @nextindex + 1 ,
                        @counter = @counter + 1
            END

        RETURN
    END 
```

# php - 尝试使用 bit.ly api 批量缩短网址

> ID：12468987
> 
> 赞同：2
> 
> 时间：2012-09-18T00:47:30.240
> 
> 标签：php, api

我正在使用 bit.ly api 尝试一次缩短多个 url，但没有任何成功。

```
 <?php

 $sites = array( 
'http://api.bit.ly/shorten?version=2.0.1&login=bitlyexample&apiKey=R_8b726077f3d5c6029700c29e529395d3&format=text&longUrl=http://myurl.com', 
'http://api.bit.ly/shorten?version=2.0.1&login=bitlyexample&apiKey=R_8b726077f3d5c6029700c29e529395d3&format=text&longUrl=http://myurl3.com', 
); 

foreach ( $sites as $site ) { 
    $xmlDoc = new DOMDocument();  
    if ( @$xmlDoc->load($site) ) { 
        echo "{$site} successful<br />\n"; 
    } else { 
        echo "{$site} invalid<br />\n"; 
    } 
} 
die();  

?> 
```

如何将长网址数组转换为 bit.ly 列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T00:52:56.377

尝试使用 file_get_contents()

```
$sites = array(
    'http://api.bit.ly/shorten?version=2.0.1&login=bitlyexample&apiKey=R_8b726077f3d5c6029700c29e529395d3&format=text&longUrl=http://myurl.com',
    'http://api.bit.ly/shorten?version=2.0.1&login=bitlyexample&apiKey=R_8b726077f3d5c6029700c29e529395d3&format=text&longUrl=http://myurl3.com',
);

foreach ( $sites as $site ) {
    $shortened_url = file_get_contents($site);
    if($shortened_url)
        echo "$shortened_url <br/>";
}
die(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T01:00:21.383

这是生成链接的函数，请务必将登录名和 api 密钥替换为您的：

```
function get_short_link($url) {
  $bitly_login="**login**";
  $bitly_apikey="**apikey**";

  $api_call = file_get_contents("http://api.bit.ly/shorten?version=2.0.1&longUrl=".$url."&login=".$bitly_login."&apiKey=".$bitly_apikey);

  $bitlyinfo=json_decode(utf8_encode($api_call),true);

  if ($bitlyinfo['errorCode']==0) {
    return $bitlyinfo['results'][urldecode($url)]['shortUrl'];
  } else {
    return false;
  }
} 
```

然后，要运行该函数，请将其放入 foreach 循环中：

```
$bitlyarray = array();
$arraylist = array(
  'http://www.siteone.com',
  'http://www.sitetwo.com',
  'http://www.sitethree.com'
);

foreach($arraylist as $link)
{
  $bitlyarray[] = get_short_link($link);
}

var_dump($bitlyarray); 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T22:14:45.750

这是一个与 bit.ly API 集成的免费 PHP 客户端库： [https ://www.mashape.com/mashaper/bitly](https://www.mashape.com/mashaper/bitly)

只需将 getShortenedUrl 挂钩到您的 foreach 循环中，您就应该是金色的。

* * *

完全披露，我是 Mashape 的工匠倡导者，也是我大学时的 PHP 黑客。如果您有任何进一步的问题，请随时与我联系。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T02:24:33.367

就我个人而言，我会在 fgc 上使用 curl，因为它更快，并且由于您想要进行批量转换，那么为什么不实现 curl multi，这将加快 api 请求的等待时间。越快越好对吧？

```
function curl_multi($urls) {
    $curly = array();
    $result = array();

    $mh = curl_multi_init();
    foreach ($urls as $id=>$url) {
        $curly[$id] = curl_init();

        curl_setopt($curly[$id], CURLOPT_URL,            $url);
        curl_setopt($curly[$id], CURLOPT_HEADER,         0);
        curl_setopt($curly[$id], CURLOPT_RETURNTRANSFER, true);
        curl_setopt($curly[$id], CURLOPT_TIMEOUT,        30);
        curl_setopt($curly[$id], CURLOPT_USERAGENT,      'Mozilla/5.0 (Windows NT 5.1; rv:5.0) Gecko/20100101 Firefox/5.0 Firefox/5.0');
        curl_setopt($curly[$id], CURLOPT_REFERER,        $url);
        curl_setopt($curly[$id], CURLOPT_ENCODING,       'gzip,deflate');
        curl_setopt($curly[$id], CURLOPT_AUTOREFERER,    true);
        curl_setopt($curly[$id], CURLOPT_RETURNTRANSFER, true);

        curl_multi_add_handle($mh, $curly[$id]);
    }
    $running = null;
    do {
        curl_multi_exec($mh, $running);
    } while($running > 0);
    foreach($curly as $id => $c) {
        $result[$id] = curl_multi_getcontent($c);
        curl_multi_remove_handle($mh, $c);
    }
    curl_multi_close($mh);
    return $result;
}

$sites = array( 
'http://api.bit.ly/shorten?version=2.0.1&login=bitlyexample&apiKey=R_8b726077f3d5c6029700c29e529395d3&format=text&longUrl=http://myurl.com', 
'http://api.bit.ly/shorten?version=2.0.1&login=bitlyexample&apiKey=R_8b726077f3d5c6029700c29e529395d3&format=text&longUrl=http://myurl3.com', 
); 

$result = curl_multi($sites);

print_r($result);
/*
Array
(
    [0] => http://bit.ly/UhaW9E
    [1] => http://bit.ly/RlX21s
)
*/ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T15:57:27.660

你也可以使用线程，或者一些工人......

[https://github.com/krakjoe/pthreads](https://github.com/krakjoe/pthreads)

享受 ...

# ruby-on-rails - 如何将 validates_uniqueness_of 与 ActiveModel 一起使用？

> ID：12468988
> 
> 赞同：0
> 
> 时间：2012-09-18T00:48:34.023
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, activemodel

我正在使用 ActiveModel 使我的无表模型感觉像 ActiveRecord 模型。我正在使用自定义商店，我需要能够验证记录的唯一性。

如何使用 ActiveModel 实现所需的唯一性检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T01:40:14.423

我最终做了这样的事情：

```
class Theme < Base

  include ActiveModel::Validations

  attr_accessor :id, :name
  validate      :uniqueness_of_theme_name, :on => :create

  def initialize(attrs = {})
    attrs.each do |name, value|
      send("#{name}=", value)
    end
  end

  def uniqueness_of_theme_name
    errors.add(:name, "name is already in use") unless Theme.find_by_name(name).nil?
  end

  def self.find_by_name(name)
    return store.find({ 'name' => "/^#{name}$/i" }).any?
  end

  def self.create(attributes = {})
    theme = Theme.new(attributes)
    theme.save

    return theme
  end

  def persisted?
    id && !id.nil?
  end

  def save()
    # only call validation during create context
    context = persisted? :update : :create
    false if invalid?(context)
    store.save(self)
    true
  end

  def self.create(attrs = {})
    theme = Theme.new(attrs)
    theme.save
    theme
  end

end 
```

也许有人可以告诉我这是否是正确的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T01:25:41.447

检查这个 railscasts，它可能会有所帮助

[http://railscasts.com/episodes/193-tableless-model](http://railscasts.com/episodes/193-tableless-model)

完成模型后，添加验证，然后添加 @model.valid?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T04:39:06.903

ActiveModel 可以根据另一个[railscasts](http://railscasts.com/episodes/219-active-model)使用，这更适合该用例。

```
class Theme

  include ActiveModel::Validations
  include ActiveModel::Conversion
  extend ActiveModel::Naming

  attr_accessor :id, :name

  validates :name, uniqueness: true, on: :create

  def initialize(attributes = {})
    attributes.each do |name, value|
      send("#{name}=", value)
    end
  end

  def persisted?
    false
  end
end 
```

# c - C中的字符数组和getline

> ID：12468994
> 
> 赞同：1
> 
> 时间：2012-09-18T00:48:53.147
> 
> 标签：c, terminal, char, stdin

```
 int bytes_read;
       int rv;
       int nchars = 200;  /*max possible number for the input of the user*/
       size_t nbytes = nchars;  /*size of chars in bytes*/
       char *commands[2];
       char *line = malloc(nbytes + 1);
       bytes_read = getline(&line, &nbytes, stdin);  /*read line from stdin*/
       if (bytes_read == -1) {
           printf("Read line error");
           exit(-1);
       } else {
           if (line[strlen(line-1)] == '\n') {
               line[strlen(line-1)] = '\0';  /*change new line character in the end of the line of stdin*/
           }
       }
       if (strcmp(line,"exit") == 0) {
            rv = 3;
            exit(rv);
       }
       commands[0] = line;
       commands[1] = NULL;
       execvp(commands[0], commands);
       perror("Execution error");
       exit(-1); 
```

我在上面的代码中有问题。如果我使用`getline`甚至`fgets`从终端获取用户的输入，并键入`"ls"`例如 execvp 打印出“没有这样的文件或目录”。但如果我把`commands[0]="ls"`它运行正确。可能是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T02:19:52.237

```
if (line[strlen(line-1)] == '\n') {
    line[strlen(line-1)] = '\0';  /*change new line character in the end of the line of stdin*/ 
```

删除 '\n' 的逻辑看起来不正确。我认为应该是：

```
if (line [ strlen(line) - 1 ] == '\n' )
    line [ strlen(line) - 1 ] = '\0';  /*change new line character in the end of the line of stdin*/ 
```

# objective-c - Restkit Cache 问题 iOS 保存更新属性

> ID：12468998
> 
> 赞同：0
> 
> 时间：2012-09-18T00:49:05.053
> 
> 标签：objective-c, ios, xcode, parsing, restkit

我正在构建一个使用 restkit for IOS 的应用程序。我相信缓存区有问题。我为初始启动设置了我的应用程序，以获取大量数据并使用 restkit 将其映射到核心数据中。一切正常，数据显示在表格视图中。现在，如果我让应用程序进入后台，然后再次单击应用程序以恢复，我会调用相同的方法来加载数据，但这次我将版本号发送到服务器以仅取回已更改、添加或自上次拉取后已删除。这一切都很好，但是当我去显示这些对象时，我得到的数据与第一次拉动中的数据相同。我相信这可能是缓存问题的清除，但我不知道。帮助不胜感激。

RKObjectManager* objectManager = [RKObjectManager objectManagerWithBaseURLString:@"http://link.com"]; objectManager.client.requestQueue.showsNetworkActivityIndi​​catorWhenBusy = YES; objectManager.objectStore = [RKManagedObjectStore objectStoreWithStoreFilename:@"34453434.sqlite"]; RKManagedObjectMapping* 悬崖映射 = [RKManagedObjectMapping mappingForClass:[悬崖类] inManagedObjectStore:objectManager.objectStore];

```
cliffMapping.primaryKeyAttribute = @"cliffID";
cliffMapping.rootKeyPath = @"cliffs";
[cliffMapping mapKeyPath:@"name" toAttribute:@"name"];
[cliffMapping mapKeyPath:@"cliffId" toAttribute:@"cliffID"];
[cliffMapping mapKeyPath:@"description" toAttribute:@"cliffDescription"];
[cliffMapping mapKeyPath:@"notes" toAttribute:@"notes"];
[cliffMapping mapKeyPath:@"city" toAttribute:@"city"];
[cliffMapping mapKeyPath:@"intensity" toAttribute:@"intensity"];
[cliffMapping mapKeyPath:@"latitude" toAttribute:@"latitude"];
[cliffMapping mapKeyPath:@"height" toAttribute:@"height"];
[cliffMapping mapKeyPath:@"longitude" toAttribute:@"longitude"];
[cliffMapping mapKeyPath:@"zipcode" toAttribute:@"zipcode"];
[objectManager.mappingProvider setMapping:cliffMapping forKeyPath:@"cliffs"];
[objectManager.mappingProvider addObjectMapping:cliffMapping];

RKManagedObjectMapping* stateMapping = [RKManagedObjectMapping mappingForClass:[State class] inManagedObjectStore:objectManager.objectStore];
stateMapping.rootKeyPath = @"States";
stateMapping.primaryKeyAttribute = @"stateID";
[stateMapping mapKeyPath:@"stateId" toAttribute:@"stateID"];
[stateMapping mapKeyPath:@"name" toAttribute:@"name"];
[stateMapping mapKeyPath:@"version" toAttribute:@"sversion"];
[stateMapping mapKeyPath:@"cliffAmount" toAttribute:@"cliffAmount"];
[stateMapping mapRelationship:@"cliffs" withMapping:cliffMapping];
[objectManager.mappingProvider setMapping:stateMapping forKeyPath:@"States"];
[objectManager.mappingProvider addObjectMapping:stateMapping];
[objectManager loadObjectsAtResourcePath:@"/Application/getEverything" usingBlock:^(RKObjectLoader *loader){
    loader.serializationMIMEType = RKMIMETypeJSON;
    loader.resourcePath = @"/Application/getEverything";
    loader.method = RKRequestMethodPOST;
    loader.delegate = self;
    loader.objectMapping = stateMapping;
}]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:14:14.137

您只需将其保存在对象加载器委托方法中。

```
- (void)objectLoader:(RKObjectLoader *)objectLoader didLoadObjects:(NSArray *)objects
{ 
   [[RKObjectManager sharedManager].objectStore.managedObjectContextForCurrentThread      save:nil];
} 
```