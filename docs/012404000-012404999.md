# StackOverflow 问答 12404000-12404999

# ios - 函数 STAssertEqualObjects 的隐式声明在 C99 中无效？为什么？

> ID：12404005
> 
> 赞同：0
> 
> 时间：2012-09-13T10:14:32.873
> 
> 标签：ios

我想在 iphone 中加密一条消息。我有模数和指数。我参考的代码

[如何从公钥的指数和模数创建 SeckeyRef 并在 SecKeyEncrypt 方法中使用](https://stackoverflow.com/questions/11516355/how-to-create-seckeyref-from-exponent-and-modulus-of-public-key-and-use-in-secke)

```
+(NSString *)encryptRSA:(NSString *)plainTextString key:(NSString *)key
{

     NSString *publicKeyIdentifier = [NSString stringWithFormat:@"%@.publickey",[[NSBundle   mainBundle] bundleIdentifier]];
     [Crypto setPublicKey:key tag:(NSString *)publicKeyIdentifier];

     SecKeyRef publicKey = NULL;
     NSData * publicTag = [self PublicKeyItems/*publicKeyIdentifier      dataUsingEncoding:NSUTF8StringEncoding*/];
     NSMutableDictionary *queryPublicKey = [[[NSMutableDictionary alloc] init] autorelease];
     [queryPublicKey setObject:(id)kSecClassKey forKey:(id)kSecClass];
     [queryPublicKey setObject:publicTag forKey:(id)kSecAttrApplicationTag];
     [queryPublicKey setObject:(id)kSecAttrKeyTypeRSA forKey:(id)kSecAttrKeyType];
     [queryPublicKey setObject:[NSNumber numberWithBool:YES] forKey:(id)kSecReturnRef];

     SecItemCopyMatching((CFDictionaryRef)queryPublicKey, (CFTypeRef *)&publicKey);

     if (!publicKey)
     {
         if(publicKey) CFRelease(publicKey);

         [Exception raise:FAILURE function:__PRETTY_FUNCTION__ line:__LINE__ description:@"Could not decrypt."];

} 
```

我也同时使用 BasicEncodingRules.m 和 .h。但我有一个警告

```
+ (NSData*) PublicKeyItems

{

    NSString *exp = @"010001";
    NSLog(@"Publickeyexp -%@",exp);
    NSData *publickeyexpdata= [self stringasdata:exp];
    NSLog(@"publickeyexpdata = %@",publickeyexpdata);
    NSString *mod = @"008903fb6d15f352ed3b45add3216f632f7139954a5631337aba7d645ed38482e3a810b4db26aab4d1df58c147230f0c75631a3dd0554b50de44e79f4fcf205c89fd3f80e0ff8d16c2e9f56ed3ab177953d54c9c30357d04e677cedd9912906ef8a046d7b0185b7f2022a8e435b0c6ecaef93f089fc3aa3f3677550b5d842046c7";
    NSLog(@"Publickeymod -%@",mod);
    NSData *publickeymoddata= [self stringasdata:mod];
    NSLog(@"publickeymod = %@",publickeyexpdata);

    NSMutableArray *publicarray = [[NSMutableArray alloc] init];
    [publicarray addObject:publickeyexpdata];
    [publicarray addObject:publickeymoddata];
    NSData *testData = [publicarray berData];
    NSLog(@"testdata = %@",testData);
    NSMutableArray *testData1 = [testData berDecode];
    NSLog(@"testarray = %@",testData1);

    STAssertEqualObjects(testData, testData1, @"Big items decode failed");
// warning at this line, with content "Implicit declaration of function STAssertEqualObjects is invalid in C99"

    NSData *testData2 = [testData1 berData];
    NSLog(@"PublicKeyData using Publickeyitems = %@",testData2);
    return testData2;
} 
```

所以我不能建立 Crypto.o

请帮我！不管怎么说，还是要谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:18:58.857

STAssertEqualObjects 用于SenTest（即xcode 附带的单元测试框架）。此代码是否在单元测试中？如果不是，那是你的问题。试试`NSAssert*`。

# symfony - 在表单处理程序中调用表单值

> ID：12404007
> 
> 赞同：-3
> 
> 时间：2012-09-13T10:14:39.420
> 
> 标签：symfony

这是我的问题。

我目前正在学习 Symfony，并且我创建了一个带有 formType 文件和 formHandler 的表单。我现在想在我的处理程序中使用表单的值，但我不知道如何调用这些值，我可以使用哪种方法？我尝试了许多请求类的方法，但它不起作用。请问你能帮帮我吗？

这是我的处理程序。我的一些尝试仍在评论中，它很简单，我只是想做一个回应。

```
class adminFormHandler
{
    protected $form;
    protected $request;
    protected $em;

    public function __construct(Form $form, Request $request, EntityManager $em)
    {
        $this->form    = $form;
        $this->request = $request;
        $this->em      = $em;
    }

    public function process()
    {
        if( $this->request->getMethod() == 'POST' )
        {
            $this->form->bindRequest($this->request);

            //if( $this->form->isValid() )
            //{
                //echo $this->request->get('nom');
                //$param = $this->request->request->keys();
                //$param = $this->form->getData(nom);
                //echo $param;
                $myfield = $form->getAttribute('nom');
                echo $myfield->getData();
                //echo $param;//$this->form->get('nom')->getText();
                //$this->onSuccess($this->form->getData());

                return true;
            //}
        }

        return false;
    }

    public function onSuccess1(/*Students $students*/)
    {
        //$this->em->persist($students);
        //$this->em->flush();
        echo'on success 1';
    }

    public function onSuccess2()
    {
        //$this->em->persist($students);
        //$this->em->flush();
        echo'on success 2';
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T12:28:15.123

您可以使用：

```
$data = $this->form->getData();
$myfield = $data['nom']; 
```

或者

```
$myfield = $this->form->get('nom')->getData(); 
```

# oop - 从哪里提取 Sprite 纹理

> ID：12404008
> 
> 赞同：0
> 
> 时间：2012-09-13T10:14:42.130
> 
> 标签：oop, design-patterns, 2d-games

因此，在制作 2D 游戏时，有一种常见的模式是创建对象并为每个对象设置精灵。有些对象有很多精灵，有些只有 1 个。

有两种明显的方法可以处理这个问题。

1.  创建一个 SpriteManager 类来拉入所有精灵并将它们发送到您的每个类。

这种方法的问题似乎是您必须为每个类创建唯一的接口以将精灵传递给它，因为每个类都可以使用任意数量的精灵。

1.  向每个类发送一个对它需要的资源的引用，以获取它自己的纹理并处理类中的所有内容。

这样做可以让您扩展一个基本的 sprite 类并通过只使用一个 sprite setter 函数来编写并由所有子级继承来节省自己的时间。

所以我的问题是哪个更好，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T03:54:02.627

要回答我自己的问题，最好创建某种了解所有精灵的精灵管理器。

向对象发送加载纹理所需的工具的问题是，如果您有多个对象实例，您最终可能会多次加载相同的纹理。

# ruby-on-rails - 为什么 Rails 不希望您在现有 Rails 项目中创建 Rails 项目

> ID：12404009
> 
> 赞同：0
> 
> 时间：2012-09-13T10:14:50.053
> 
> 标签：ruby-on-rails

我想在现有的 rails 应用程序中创建另一个项目。我的理由是：

*   他们有一些常见的模型，我可以从内部应用程序链接到这些模型，
*   它们在同一个数据库上运行
*   他们将拥有一个版本控制系统（无需额外配置和移动）

除了我为什么要这样做之外，我只想知道**为什么 rails 会阻止您这样做？**在我的测试中，没有暴露出任何冲突。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T10:18:05.220

您应该为此使用 Rails 引擎。这是关于它的 Railscasts 插曲。[http://railscasts.com/episodes/149-rails-engines](http://railscasts.com/episodes/149-rails-engines)

# php - 使用 Composer 将 Auth 和 Acl 组件添加到自定义框架中

> ID：12404010
> 
> 赞同：1
> 
> 时间：2012-09-13T10:15:03.783
> 
> 标签：php, authorization, composer-php

我开发了自己的 PHP 框架，用于为许多不同的应用程序提供动力。目前，它使用 Twig、Symfony YAML、Monolog 和 Facebook SDK 作为组件。现在我需要创建一个管理部分，以便那些更新内容的人可以登录到一个安全区域，而且很可能是一个用户部分，所以他们的角色也会不同。

我喜欢 Zend 和 Symfony 组件的外观，并且发现了许多与之相关的 Stack Overflow 问题，但我想知道：

1.  如果我使用 Symfony2 的安全组件，我如何在 Symfony2 框架之外使用它？组件手册中非常令人沮丧地缺少这一点，因为他们已经记录了其他所有组件。

2.  如果我使用 Zend_Auth 和 Zend_Acl，我可以用 Composer 加载它们，而不下载完整的堆栈吗？还是我必须手动下载并提取类？

3.  你推荐另一个包吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:21:37.793

找到了解决方案。[http://packages.zendframework.com/](http://packages.zendframework.com/)

原因我之前没有发现，Zend 2 使用它自己的存储库而不是 Packagist。

**作曲家.json：**

```
"repositories": [
    {
        "type": "composer",
        "url": "http://packages.zendframework.com/"
    }
], 
```

和

```
"require": {
    "zendframework/zend-authentication": "2.0.*",
    "zendframework/zend-permissions-acl": "2.0.*"
},

"minimum-stability": "beta" 
```

虽然我正在使用`"minimum-stability": "dev"`我的项目

# android - GCM 寄存器在我的模拟器上不起作用

> ID：12404012
> 
> 赞同：13
> 
> 时间：2012-09-13T10:15:07.877
> 
> 标签：android, google-cloud-messaging

我在我的应用程序上使用了 GCM 服务，在对堆栈溢出成员进行了更多研究后，我做了我的代码，当我尝试在我的模拟器上测试代码时，我没有找到任何注册信息告诉我我的模拟器已注册。此外，我在 Google API 上创建了我的帐户以接收任何报告，但我没有找到任何东西。所以我需要你的帮助：

1-请检查我的代码，直到我出现错误时，我会用完整的例子反馈给你：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.elarabygroup"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <permission
        android:name="com.example.elarabygroup.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.example.elarabygroup.permission.C2D_MESSAGE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <uses-permission android:name="android.permission.WRITE_SETTINGS" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".ElarabyGroup"
            android:label="@string/title_activity_elaraby_group" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver
            android:name="com.google.android.gcm.GCMBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

                <category android:name="com.example.elarabygroup" />
            </intent-filter>
        </receiver>

        <service android:name=".GCMIntentService" />
        <!--
            android:name=".GCMIntentService"
            android:enabled="true" />
        -->
    </application>

</manifest> 
```

```
package com.example.elarabygroup;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.net.Uri;
import android.os.Bundle;
import android.util.Log;
import android.webkit.WebView;
import com.google.android.gcm.GCMRegistrar;

public class ElarabyGroup extends Activity {
    private String TAG;
    private String SENDER_ID = "222874571774";
    private WebView webView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_elaraby_group);

        try {

            Intent registrationIntent = new Intent(
                    "com.google.android.c2dm.intent.REGISTER");

            /* Registering for GCM /An Android application needs to register with GCM servers before it can receive messages*/
            registrationIntent.putExtra("app",
                    PendingIntent.getBroadcast(this, 0, new Intent(), 0));
            registrationIntent.putExtra("sender", SENDER_ID);
            startService(registrationIntent);

            Log.i(TAG, "[checkNotifRegistration] checkDevice");
            GCMRegistrar.checkDevice(this);
            Log.i(TAG, "[checkNotifRegistration] checkManifest");
            GCMRegistrar.checkManifest(this);
            if (GCMRegistrar.isRegistered(this)) {
                Log.i(TAG,
                        "[checkNotifRegistration] reg id : "
                                + GCMRegistrar.getRegistrationId(this));
            }
            final String regId = GCMRegistrar.getRegistrationId(this);
            if (regId.equals("")) {
                // SENDER_ID is my project id into google account url
                GCMRegistrar.register(this, SENDER_ID);
                Log.i(TAG,
                        "[checkNotifRegistration] reg id : "
                                + GCMRegistrar.getRegistrationId(this));

            } else {
                Log.i(TAG, "[checkNotifRegistration] already registered as : "
                        + regId);
            }
        } catch (Exception e) {
            Log.e(TAG, "[checkNotifRegistration] Exception : " + e.getMessage());
            e.printStackTrace();
        }

        /*
         * GCMRegistrar.checkDevice(this); GCMRegistrar.checkManifest(this);
         * 
         * 
         * final String regId = GCMRegistrar.getRegistrationId(this); if
         * (regId.equals("")) { GCMRegistrar.register(this, "1111111111"); }
         * else { Log.v(TAG, "Already registered"); }
         */
        try {

            ConnectivityManager con = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);

            if (con.getNetworkInfo(0).getState() == NetworkInfo.State.DISCONNECTED
                    && con.getNetworkInfo(1).getState() == NetworkInfo.State.DISCONNECTED) {
                AlertDialog.Builder builder = new AlertDialog.Builder(this);

                builder.setMessage("No Internet connection");
                AlertDialog alert = builder.create();
                alert.show();

            } else

            {

                webView = (WebView) findViewById(R.id.webView1);
                webView.getSettings().setJavaScriptEnabled(true);
                webView.loadUrl("http://m.elarabygroup.com");
            }

        } catch (Exception e) {

            AlertDialog.Builder builder = new AlertDialog.Builder(this);

            builder.setMessage(e.getMessage().toString());

            AlertDialog alert = builder.create();

            String url = "http://m.elarabygroup.com/";

            Intent i = new Intent(Intent.ACTION_VIEW);
            i.setData(Uri.parse(url));
            startActivity(i);

        }

    }
    /*
    public class MyBroadcastReceiver extends BroadcastReceiver {

        @Override
        public final void onReceive(Context context, Intent intent) {
            GCMIntenetService.runIntentInService(context, intent);
            setResult(Activity.RESULT_OK, null, null);
        }
    }
    */

}
/*
 * @Override public boolean onCreateOptionsMenu(Menu menu) {
 * getMenuInflater().inflate(R.menu.activity_elaraby_group, menu); return true;
 * } }
 */ 
```

```
package com.example.elarabygroup;

import com.google.android.gcm.GCMBaseIntentService;
import com.google.android.gcm.GCMRegistrar;

import android.content.Context;
import android.content.Intent;
import android.os.PowerManager;
import android.provider.Settings.Secure;
import android.util.Log;

public class GCMIntenetService extends GCMBaseIntentService {
    private static  String GCM_SENDER_ID = "1111111111111";

    public GCMIntenetService() {
        super();
    }

    @Override
    protected void onRegistered(Context context, String registrationId) {
        Log.i(TAG, "Device registered: regId = " + registrationId);
        GCMRegistrar.setRegisteredOnServer(context, true);
    }

    @Override
    protected void onUnregistered(Context context, String registrationId) {
        Log.i(TAG, "Device unregistered");
        if (GCMRegistrar.isRegisteredOnServer(context)) {
            String regId = "";
            Log.i(TAG, "unregistering device (regId = " + regId + ")");
            GCMRegistrar.setRegisteredOnServer(context, false);
        } else {
            // This callback results from the call to unregister made on
            // ServerUtilities when the registration to the server failed.
            Log.i(TAG, "Ignoring unregister callback");
        }
    }

    @Override
    protected void onError(Context context, String errorId) {
        // push error processing
    }

    @Override
    protected void onMessage(Context arg0, Intent arg1) {
        Log.i(TAG, "Received message");
        Log.i(TAG, "EXTRAS" + arg1.getExtras());
        // String message = getString(R.string.gcm_message);
        generateNotification(arg0,
                arg1.getStringExtra("Please download our new updates"));
        // notifies user about message

    }

    private void generateNotification(Context arg0, String stringExtra) {
        // TODO Auto-generated method stub

    }

    public static void registerInGCMService(Context context) {

        GCM_SENDER_ID = Secure.getString(context.getContentResolver(),
                Secure.ANDROID_ID);

        if (!checkIsGCMServiceAvailable(context)) {
            return;
        }
        final String regId = GCMRegistrar.getRegistrationId(context);
        if (regId.equals("")) {
            try {
                GCMRegistrar.register(context, GCM_SENDER_ID);
            } catch (Exception ex) {
            }
        } else {
            // Already registered
        }

    }

    public static boolean checkIsGCMServiceAvailable(Context context) {
        try {
            GCMRegistrar.checkDevice(context);
            GCMRegistrar.checkManifest(context);
            return true;
        } catch (Throwable th) {
            return false;
        }
    }

} 
```

我附上了我的日志猫消息

2- 我的 Google API 帐户中的状态如何？

服务状态 Google Cloud Messaging for Android 无已知问题

![原木猫](../Images/0074f1f0917fea2af838f97e5b957c79.png)

![模拟器消息](../Images/43e6b1d97bbb435ece126d0bf130c98c.png)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-13T10:21:38.160

首先将您的模拟器目标设置为 Google API 并将一个 google 帐户添加到您的模拟器。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-04T09:18:45.560

**将谷歌帐户添加到您的模拟器：** 设置->帐户和同步->添加帐户**（来自@curious_mind 评论）**

> 如果模拟器运行的是 Android 4.0.4 或更高版本，则此步骤是可选的，因为从该版本开始，GCM 不需要帐户。

对我来说它解决了这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T12:24:42.287

只是您可以使用[此模拟器](http://girishbhutiya.blogspot.in/2012/09/testing-push-notification-android-market-in-emulator.html)并在此模拟器中测试您的应用程序，我认为它会正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-09T07:32:44.933

您可以将模拟器用于 GCM 功能，但您需要跟踪一些要点，因为您的模拟器版本应该是 2.2 或更高版本并且包含 Google API（必须）。创建此模拟器 AVD 后，请在模拟器中按照以下步骤操作：1.) 转到设置 --> 帐户和同步，2.) 然后添加一个 Google 帐户并开启同步。3.) 在清单文件中定义互联网权限

```
<manifest xlmns:android...>
 ...
 <uses-permission android:name="android.permission.INTERNET"></uses-permission>
</manifest> 
```

4.) 在 manifest 中定义 GCM 相关权限

完成此操作后，您应该准备好注册 GCM 并接收来自它的消息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-27T12:32:23.397

转到您的 android SDK 文件夹并打开 SDK Manager 并在 Extras 部分下安装 Google Cloud Messaging for Android Library。（如果您没有看到 Google Cloud Messaging for Android Library，请将您的 SDK 管理器更新到最新版本）

安装库后，它将在您的 Andoird_SDK_Folder\extras\google\gcm\gcm-client\dist 中创建 gcm.jar 文件。稍后您需要将此 .jar 文件添加到您的 android 项目中。

首先将您的模拟器目标设置为 Google API。

启动模拟器后，按菜单按钮转到设置。选择帐户和同步。然后按添加帐户按钮并添加一个 Google 帐户

最后在模拟器上测试您的应用程序。

# requirejs - SoundManager2 和 require.js

> ID：12404023
> 
> 赞同：4
> 
> 时间：2012-09-13T10:15:42.180
> 
> 标签：requirejs, soundmanager2

SoundManager2 flash 组件需要一个特定的全局 JavaScript 变量 (soundManager) 才能出现在全局范围内。通过这种方式，Flash 播放器与 SoundManager2 JavaScript API 进行通信。

问题是，当您想使用 AMD (require.js) 构建 Web 应用程序时，您必须做出妥协并让这个全局变量存在。

有什么办法不破坏 AMD 构建包括 SoundManager 在内的应用程序的方式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T19:28:26.587

使用 RequireJS **shim 配置**将您的非 AMD 库包装为导出全局变量的模块： [http ://requirejs.org/docs/api.html#config-shim](http://requirejs.org/docs/api.html#config-shim)

```
requirejs.config({
    paths: {
        'soundmanager2' : 'some/path/soundmanager2'
    },
    shim: {
        'soundmanager2': {
            exports: 'soundManager'
        }
    }
}); 
```

然后，像任何其他依赖项一样需要 SoundManager2 shim，并在您自己的模块代码中使用它：

```
define(['soundmanager2'], function(soundManager) {
    soundManager.setup({ ... });
    soundManager.beginDelayedInit();
    // The following may help Flash see the global.
    window.soundManager = soundManager;
    return soundManager;
}); 
```

# sql - SQL Fiddle 移至 SO Data？

> ID：12404029
> 
> 赞同：1
> 
> 时间：2012-09-13T10:16:04.927
> 
> 标签：sql

这个问题是完全不可接受的，将被关闭，但......

SQL Fiddle 是否已合并到 Stack Exchange 中？例如在[这里](https://data.stackexchange.com/stackoverflow/query/79951/pagining-in-sql-server)

另外 -[这太](https://data.stackexchange.com/stackoverflow/query/785/how-many-upvotes-do-i-have-for-each-tag)疯狂了 - 我说这是查询 SO 本身的 sql 是否正确？

（……等不及要玩了。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:18:22.280

首先，这样的问题应该在元数据中。

其次，数据浏览器已经存在了一段时间；它不是关于执行任意 SQL 代码，而是针对 SO 数据库的查询。

有关数据浏览器的更多问题，请参阅元：[https ://meta.stackexchange.com/questions/tagged/data-explorer](https://meta.stackexchange.com/questions/tagged/data-explorer)

# android - Titanium "label.width" 适用于 iOS 但不适用于 Android

> ID：12404030
> 
> 赞同：1
> 
> 时间：2012-09-13T10:16:06.800
> 
> 标签：android, ios, titanium

我正在用钛开发一个应用程序，并成功完成了 iOS 版本。Android 存在一些问题，这里有一个。

该视图包含许多标签，用于以 A: **B**格式显示数据 （注意 B 为粗体）。那个粗体部分是必要的，也是我需要两个标签的原因。

这是我正在使用的代码：

```
if(restaurant && !(restaurant=='no' && restaurant.length=='2')){
    var restaurant_label = Ti.UI.createLabel({
        text:'Restaurant:',
        left:3,
        height:20,
        width:'auto',
        top:0,
        textAlign:'left',
        color:'#000',
        font:{
            fontFamily:'Helvetica Neue',
            fontSize:13,
            fontWeight:'Regular'
        }
    });
    view.add(restaurant_label);
    var restaurant_value = Ti.UI.createLabel({
        text:restaurant,
        left:restaurant_label.width+10,
        height:'auto',
        width:'auto',
        top:-18,
        textAlign:'left',
        color:'#000',
        font:{
            fontFamily:'Helvetica Neue',
            fontSize:13,
            fontWeight:'Bold',
            fontStyle:'Italic'
        }
    });
    view.add(restaurant_value);
    check_localservices = false;
} 
```

“值”标签需要在正确的位置，但android似乎无法获取之前添加的标签的宽度。

是什么赋予了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T17:14:55.560

它出现在错误报告中，关于 label.width 查询应该报告的内容存在一些问题。根据 1.7 版的错误报告，对您的查询的正确响应应在 Android 上返回“自动”。之所以如此，是因为您将“auto”作为宽度值。它会返回“自动”吗？

[https://jira.appcelerator.org/browse/TIMOB-3202](https://jira.appcelerator.org/browse/TIMOB-3202)

碰巧看起来那里列出了正确的代码以获得您正在寻找的值。我没有对此进行测试，但看来您可能正在查询错误的值。

对于您的情况，您似乎想要使用：

```
var restaurant_value = Ti.UI.createLabel({
        text:restaurant,
        left:restaurant_label.size.width+10, // <===== size
        height:'auto',
        width:'auto',
        top:-18,
        textAlign:'left',
        color:'#000',
        font:{
            fontFamily:'Helvetica Neue',
            fontSize:13,
            fontWeight:'Bold',
            fontStyle:'Italic'
        }
    }); 
```

根据评论，您可能还需要在“打开”窗口后查询 size 属性。如果您查看 Paul Dowsett 的答案，他有一个关于“打开”事件的侦听器示例。

# haskell - 由于垃圾回收，Haskell 程序中会出现多长时间的暂停？

> ID：12404031
> 
> 赞同：19
> 
> 时间：2012-09-13T10:16:14.930
> 
> 标签：haskell, garbage-collection, delay

关于我的另一个问题[Haskell 集合是否保证每个操作的最坏情况界限？](https://stackoverflow.com/q/12393104/1333025)，我很好奇：**垃圾回收会造成多长时间的停顿？**

Haskell 是否使用某种增量垃圾收集，以便程序一次只停止一小段时间，或者在极端情况下它可以停止几秒钟？

我找到了两篇 SPJ 关于这个主题的论文： [https](https://research.microsoft.com/en-us/um/people/simonpj/papers/non-stop/index.htm) ://research.microsoft.com/en-us/um/people/simonpj/papers/non-stop/index.htm 。但是如果这些想法实际上被 GHC（或其他 Haskell 实现）采用，我没有找到参考。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-13T11:15:57.143

GHC 是为计算吞吐量而设计的，而不是延迟。因此，GHC 使用[带有线程局部堆的](http://research.microsoft.com/en-us/um/people/simonpj/papers/parallel/local-gc.pdf)[分代、多线程](http://community.haskell.org/~simonmar/papers/parallel-gc.pdf)垃圾收集器。线程本地对象的垃圾收集不会停止其他线程。全局堆偶尔的major GC会暂停所有线程。

通常，暂停时间为几毫秒，但不能保证延迟。

[您可以通过几个运行时标志](http://www.haskell.org/ghc/docs/7.0.1/html/users_guide/runtime-control.html)（例如 gc`-I`间隔）来控制 GC 的频率。

# javascript - 大 SVG / Raphael 圆在动画时扭曲

> ID：12404032
> 
> 赞同：1
> 
> 时间：2012-09-13T10:16:29.540
> 
> 标签：javascript, svg, raphael

我正在使用 Raphael 为圆圈制作动画。当圆圈很大时，当圆圈移动时，我会在圆圈周围出现伪影。这似乎是一个剪辑/重绘区域问题，想知道是否有解决方法？

它在 Firefox 中似乎没问题（如果有点生涩）并且在 Chrome 中看起来非常可靠。在填充属性上使用不透明度也会加剧这种情况，即`rgba(255,0,0,0.7)`

这是一个显示问题的[jsFiddle](http://jsfiddle.net/vHRUT/3/)。只需单击右侧的纸张即可移动圆圈。

代码：

```
var discattr = {
    fill: "#666",
    stroke: "none",
    width: 35
};

var paper = Raphael("svgcontainer", 400, 400);

circle = paper.circle(150, 150, discattr.width, discattr.width).attr({
    stroke: "none",
    fill: "rgba(255,0,0,0.7)"
});

var coords = []

var animateCircle = function(coords) {
   if (!coords.length) return;
   var nextCoords = coords.shift()
   var move = Raphael.animation(nextCoords, 500, "linear", function() {animateCircle(coords)});
   circle.animate(move);
}    

$("#svgcontainer").on("mouseup", function(e) {
    coords.push({cx: e.pageX, cy: e.pageY})

    animateCircle(coords);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:50:22.243

缓冲是一种用于防止动画伪影（如 JamWaffles 指出的撕裂）的技术。如果您查看[此 Stack Overflow 问题](https://stackoverflow.com/questions/9498558/combine-a-group-of-shapes-into-an-image)的答案，您会发现有关 SVG 设置以打开缓冲的信息，但到目前为止，主要浏览器似乎不支持它。

# ftp - Jenkins 远程 ftp rsync

> ID：12404033
> 
> 赞同：0
> 
> 时间：2012-09-13T10:16:30.070
> 
> 标签：ftp, jenkins, maven-plugin, rsync, jenkins-plugins

我在我的项目中使用 jenkins，并将其设置到我的 pom.xml 中：

```
<plugin>
<groupId>com.atlassian.maven.plugins</groupId>
<artifactId>maven-upload-plugin</artifactId>
<version>1.1</version>
<configuration>
<serverId>ftpserver</serverId>
<resourceSrc>
${project.basedir}/target/${project.artifactId}-${project.version}/*
</resourceSrc>
<resourceDest>/var/www/html</resourceDest>
<url>ftp://151.1.155.25/</url>
</configuration>
</plugin> 
```

现在我只想复制远程主机上修改过的文件。是否可以使用 rsync 选项？还是我必须使用另一种插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:41:45.510

您可以使用 shell 脚本为您运行 rsync，或者使用“通过 ssh 传输”的内置功能，我认为它使用 SCP 或类似的东西。它将更新/添加但不会删除。

# selenium - 创建具有 selenium Web 驱动程序的 OSGI 包时未解决依赖关系

> ID：12404037
> 
> 赞同：0
> 
> 时间：2012-09-13T10:16:53.447
> 
> 标签：selenium, dependencies, osgi, bundle, pom.xml

我正在尝试创建一个具有 selenium firefox Web 驱动程序的 OSGI 包。我在 Maven 项目中使用了相同的依赖项，并且一切正常。但是当我创建包时，编译没有问题。但是在安装 bundle 时，有一些内部依赖项无法解决。maven bundle 插件 embed-transitivy 中有一个属性。我将它设置为 true ，它几乎解决了 firefox-webdriver 的所有内部依赖项。还有一些无法解决。

错误：

```
net.sf.cglib.asm.util -- Cannot be resolved
org.apache.avalon.framework.logger -- Cannot be resolved
org.apache.log -- Cannot be resolved
org.apache.log4j from log4j.over.slf4j (4)
org.apache.tools.ant -- Cannot be resolved
org.apache.tools.ant.types -- Cannot be resolved
org.codehaus.aspectwerkz.hook -- Cannot be resolved
sun.misc -- Cannot be resolved 
```

此外，当我在 cglib-nodep.2.1_3.jar 中搜索 net.sf.cglib.asm.util 时，没有这样的类。内部使用 cglib-nodep.2.1_3.jar 的 firefox 驱动程序。我猜2.1_3版本有问题。我不知道 OSGI 如何解析这个版本名称。

有人可以弄清楚可能是什么问题。我在哪里可以找到 net.sf.cglib.asm.util 类？

PS：我使用的是 2.25.0 版本的 firefox-driver，它在内部依赖于 cglib 并获取它的 2.1_3 版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-07T20:56:23.327

听起来你正面临这里描述的问题[http://spring.io/blog/2009/01/19/exposing-the-boot-classpath-in-osgi/](http://spring.io/blog/2009/01/19/exposing-the-boot-classpath-in-osgi/)和这里[http://blog.meschberger.ch/2008 /10/osgi-bundles-require-classes-from.html](http://blog.meschberger.ch/2008/10/osgi-bundles-require-classes-from.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T10:57:20.177

我认为有一个不同的问题。你可能想看看这个。 [http://code.google.com/p/google-guice/issues/detail?id=208](http://code.google.com/p/google-guice/issues/detail?id=208)

您遇到了同样的问题。所以读那个。它可能会有所帮助。

# node.js - Node.js 和密码安全：三个问题

> ID：12404038
> 
> 赞同：5
> 
> 时间：2012-09-13T10:17:00.570
> 
> 标签：node.js, express, security, bcrypt, password-encryption

我以前从未编写过用户身份验证系统，对于这个项目，我需要在安全性和效率之间取得平衡（这意味着我不能花费数百个工时来解决这个问题，但我需要保留密码和登录信息安全的）。

我将 Node.js 与 express 框架和护照一起用于身份验证和会话。

到目前为止，我所做的研究表明需要解决三个问题。在今天之前，我真的不知道是否存在针对这些问题的任何通用解决方案，并且几个小时的随机研究并没有让我对我找到的答案的完整性充满信心。

问题：

1.  不要将未加密的纯文本密码存储在数据库中（可能的答案：在服务器上对密码进行加盐/散列，并将散列存储在数据库中。）

2.  不要通过非安全的 http 连接传递纯文本密码（可能的答案：A--仅使用 Https 进行身份验证过程。之后使用 http。B--在登录页面向用户发送随机盐，散列密码客户端，然后取消散列并重新加密以进行数据库存储。）

3.  不要使用 GPU 每秒可以破解 700,000,000 个密码的弱加密方法。（可能的答案：bcrypt）

这些只是我在 3 小时的研究中找到的最明智的答案。我不知道这些是否足够，它们的弱点是什么或可能有哪些替代方案。我会很感激任何进一步的见解（另请注意：我什至不确定 - https 是否在传输密码时充分保护密码？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T10:28:16.130

安全方面的最佳实践有很多，但其理念本质上是相同的：抱最好的希望，期待最坏的结果。这解释了你的三个问题：

1.  假设有人获得了对您数据库的访问权限，您不希望密码被泄露的可能性。散列密码保证您无法从散列中获取密码。
2.  这是为了避免中间人攻击。服务器在向服务器传递请求和从服务器传递请求时，可以轻松地监听和记录密码。即使您认为不可能进行中间人攻击，也要抱最好的希望并期待最坏的情况。
3.  使用易于记住但其他人难以猜测的长密码。如果您可以将尝试次数限制为每 5 分钟 3 次，那就更好了，因为这需要更多的时间来破解。

这三个中的每一个都以某人*已经*破解您的系统并进行损坏控制或由于需要大量时间而使其几乎不可能破解的想法为中心。性能很重要，但总是*不如*安全重要。主要使用常识，不要基于假设损害安全性，因为这是在安全性中插入错误的最可靠方法。简而言之，抱最好的希望，做最坏的打算。

# android - android中的自定义组合框？

> ID：12404047
> 
> 赞同：1
> 
> 时间：2012-09-13T10:17:20.880
> 
> 标签：android, combobox, spinner

如何在 android 中创建一个组合框，如下图所示？

我只能在android中看到微调器。但我想喜欢这张照片。

有谁能帮帮我？？

![在此处输入图像描述](../Images/69034e5012d3d6a5686a2b08e93f0955.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:22:16.763

创建一个自定义按钮，然后单击[显示一个](http://androidresearch.wordpress.com/2012/05/06/how-to-create-popups-in-android/)带有 ListView 的弹出窗口。同样在单击时使弹出窗口出现在按钮下方。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-13T10:25:34.797

NewQuickAction3D 是一个小型 android 库，用于创建具有 Gallery3D 应用程序样式的 QuickAction 对话框。

试试[这个](https://github.com/chemalarrea/DemoSlidingDrawer/tree/f1d5829734721f250166fa12543d9fbe77f03ed6/lorensiuswlt-NewQuickAction3D-4273b56)

希望能帮到你。。

# objective-c - 为 iOS5 编译 FFMPEG 时的大问题

> ID：12404051
> 
> 赞同：4
> 
> 时间：2012-09-13T10:17:37.660
> 
> 标签：objective-c, xcode, compiler-construction, ffmpeg, ios5.1

我正在尝试为 iOS5 编译 ffmpeg 库。我尝试了不同的选项，但没有一个有效。

我下载了这个：[https](https://github.com/ciphor/ffmpeg4ios) ://github.com/ciphor/ffmpeg4ios 。

我尝试了原始的 build_armv7，但它没有用。我编辑了 build_arm7 文件，现在它看起来像这样：

```
#!/bin/tcsh -f

if (! -d armv7) mkdir armv7
if (! -d lib) mkdir lib

rm armv7/*.a

make clean

./configure --disable-network --disable-mpegaudio-hp --disable-lpc --disable-vaapi 
--disable-vdpau --disable-hwaccels --disable-mmx --disable-mmx2 --disable-sse 
--disable-ssse3 --disable-avx --disable-amd3dnow --disable-amd3dnowext --disable-vis 
--disable-mmi --disable-doc --disable-yasm --disable-ffmpeg --disable-ffplay 
--disable-ffprobe --disable-ffserver --disable-rdft --disable-dxva2 --disable-encoders 
--disable-decoders --enable-decoder=h264 --disable-bsfs --disable-protocols 
--disable-indevs --disable-outdevs --disable-devices --disable-filters --disable-demuxers --enable-demuxer=h264 
--disable-muxers --disable-parsers --enable-parser=h264 --enable-cross-compile --arch=arm 
--target-os=darwin 
--cc=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/arm-apple-darwin10-llvm-gcc-4.2 --as='gas-preprocessor/gas-preprocessor.pl /Aplications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/arm-apple-darwin10-llvm-gcc-4.2' 
--sysroot=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk --cpu=cortex-a8 
--extra-cflags='-pipe -Os -gdwarf-2 -issysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk -m${thumb_opt:-no-thumb} 
-mthumb-interwork' --extra-ldflags='-arch armv7 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk' --enable-pic

make

mv libavcodec/libavcodec.a armv7/
mv libavdevice/libavdevice.a armv7/
mv libavformat/libavformat.a armv7/
mv libavutil/libavutil.a armv7/
mv libswscale/libswscale.a armv7/

rm lib/*.a

cp armv7/*.a lib/ 
```

但我得到这个错误：

> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/arm-apple-darwin10-llvm-gcc-4.2 无法创建可执行文件。C 编译器测试失败。

我浏览了整个互联网。我已经阅读了关于 stackoverflow 的所有帖子，但没有一个对我有帮助。请告诉我我做错了什么，请不要给我发链接：相信我，我都看到了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T10:38:56.513

这对我来说适用于 iOS 5.0 和 Snow Leopard。您必须更改 ldflags、sysroot 和 cc 才能为 Mountain Lion 中的文件提供有效路径，因为 Xcode 已移至另一个文件夹。

```
./configure \
--extra-ldflags=-L/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.0.sdk/usr/lib/system \
    --disable-muxers \
    --disable-demuxers \
    --disable-devices \
    --disable-parsers \
    --disable-protocols \
    --disable-filters \
    --disable-bsfs \
    --disable-doc \
    --disable-ffmpeg \
    --disable-ffplay \
    --disable-avfilter \
    --disable-avformat \
    --disable-ffserver \
    --disable-decoders \
    --disable-encoders \
    --disable-network \
    --enable-decoder=h261 \
    --enable-decoder=h263 \
    --enable-decoder=h263p \
    --enable-encoder=h261 \
    --enable-encoder=h263 \
    --enable-encoder=h263p \
    --enable-cross-compile \
    --enable-hardcoded-tables \
    --enable-memalign-hack \
    --enable-neon \
    --arch=arm \
    --target-os=darwin \
    --cc=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/gcc \
    --sysroot=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.0.sdk \
    --cpu=cortex-a8 \
    --extra-cflags='-arch armv7 -mno-thumb -mfpu=neon -mfloat-abi=softfp' \
    --extra-ldflags='-arch armv7 -mno-thumb -mfpu=neon -mfloat-abi=softfp' 2>&1 | tee configure.log

    make clean 
    make 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T10:23:52.490

检查`config.log`根编译目录中的文件并搜索“C 编译器测试失败。”您将在那里找到尝试过的命令及其失败的确切原因（即编译器输出）。

可能是编译器安装目录不是/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/，或者找不到某个库等等...

实际上，我看到的是您在`configure`命令行上指定了一些路径。您是否检查过它们是否适合您的 Xcode 版本？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T19:39:42.127

如果您需要 ffmpeg 11 您可能需要使用雪豹或狮子，Mountain lion 似乎缺少关键的 gcc 编译器组件。我们正在研究为此修复我们的构建脚本

如果版本对你来说不是那么重要，我们有一个 ffmpeg 8 的预构建框架，实际上我们没有发现使用两者之间有什么很大的区别，并且发现 ffmpeg 8 的性能问题较少。

[https://github.com/mooncatventures-group/ffmpegDecoder](https://github.com/mooncatventures-group/ffmpegDecoder)

如果您有一个带有狮子或雪豹的构建框，您可能可以修改我们的构建脚本并构建 ffmpeg 11 ，其他人已经这样做了。

# ruby-on-rails - 可以在 Ruby 中的一行上使用条件和循环吗？

> ID：12404053
> 
> 赞同：1
> 
> 时间：2012-09-13T10:17:48.017
> 
> 标签：ruby-on-rails, ruby

如何将以下代码转换为后者？

```
<div id="faqs">
  <% if @faqs.length > 0 %>
    <% @faqs.each do |faq| %>
      <div class="faq">
        <strong>Q:</strong> <%= faq.question %>
        <br />
        <strong>A:</strong> <%= faq.answer %>
      </div>
    <% end %>
  <% else %>
    <p>No FAQs to display.</p>
  <% end %>
</div>

<div id="faqs">
  <% @faqs.empty? ? content_tag(:p, "No FAQs to display.") : @faqs.each do |faq| %>
    <div class="faq">
      <strong>Q:</strong> <%= faq.question %>
      <br />
      <strong>A:</strong> <%= faq.answer %>
    </div>
  <% end %>
</div> 
```

我很好奇我是否可以让后一个代码工作。目前唯一失败的元素`content_tag()`是没有显示 - 这是因为我没有使用可打印的 ruby​​ 标签 ( `<%= # %>`) 但使用它们会转储内容下方的常见问题解答对象。

我考虑使用在红宝石标签内`puts()`打印`content_tag()`while，但这没有用。

我试图搜索这个问题，但没有产生任何有用的东西。

这是可以实现的吗？如果可以，除了更漂亮之外，它还有其他好处吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T10:43:11.827

这应该可以工作（为了清楚起见，我在单独的辅助方法中移动了 FAQ 标记生成）：

```
<div id="faqs">
  <%= raw (@faqs.empty? ? content_tag(:p, "No FAQs to display.") : @faqs.map { |faq| faq_div(faq) }.join) %>
</div> 
```

或者，也许更干净：

```
<div id="faqs">
  <%= content_tag(:p, "No FAQs to display.") if @faqs.empty? %>
  <%= raw @faqs.map { |faq| faq_div(faq) }.join %>
</div> 
```

同时，在助手中：

```
def faq_div(faq)
  '<div class="faq"><strong>Q:</strong> %s<br /><strong>A:</strong> %s</div>' % [faq.question, faq.answer]
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T10:40:10.303

如果您可以将循环体放在辅助函数中并`content_tag`从中返回输出，则可以使后面的代码工作的一种方法。视图文件中的行可能有点像这样。

```
<%= @faqs.empty? ? content_tag(:p, "No FAQs to display.") : printList(@faqs) %> 
```

并且您的`printList`函数将返回嵌套`content_tag`s 的输出。您可以制作可用于任何列表的通用列表打印功能。

一些如此明显但仍然共享的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T10:30:34.857

这应该有效：

```
<% if @faqs.each do |faq| %>
  <div class="faq">
    <strong>Q:</strong> <%= faq.question %>
    <br />
    <strong>A:</strong> <%= faq.answer %>
  </div>
<% end.empty? %>
  <p>No FAQs to display.</p>
<% end %> 
```

# ipad - 移动 Safari SVG（关于 )

> ID：12404054
> 
> 赞同：1
> 
> 时间：2012-09-13T10:17:49.467
> 
> 标签：ipad, svg, mobile-safari

当代码在ipad上运行时，图片上有一些线条（白色或黑色）。当我点击“缩放”按钮时，线条会移动。但在计算机上运行代码时这是正常的。如何找出问题？新文件

```
<body>
<script type="text/javascript">
function zoom(){
    var svg = document.getElementById("svg");
    var viewBox = svg.getAttribute("viewBox").split(",")
    svg.setAttribute("viewBox",[viewBox[0]-10,viewBox[1]-10,viewBox[2],viewBox[3]])
    console.info(viewBox)
}
</script>
<svg id="svg" width="500" height="500" xmlns="http://www.w3.org/2000/svg"  viewBox="-200,-200,500,500">
<defs>
<pattern id="raphael-pattern-0" x="0" y="0" patternUnits="userSpaceOnUse" width="116"  height="116">
<rect x="0" y="0" width="118" height="118" fill="green"/>
</pattern>
</defs>
<path  stroke-width="0" stroke-opacity="0" fill-opacity="1" fill="url(#raphael-pattern-0)" stroke="#000000" d="M204.610 -279.078 L204.610 170.922 L-245.390 170.922 L-245.390 -279.078 z"/>
</svg>

    <input type="button" value="ZOOM" onclick="zoom()">
</body>
</html> 
```

# php - 如何在php文件中隐藏数据库名称

> ID：12404055
> 
> 赞同：2
> 
> 时间：2012-09-13T10:17:50.460
> 
> 标签：php, mysql

我的数据库名称是**student**，我的问题是每次我在 php 文件中包含数据库名称时，使用**include('student.php');** student.php 文件连接 mysql 查询语句。**这是正常**的，但我想在任何地方或其他人看不到数据库和数据库设置的地方隐藏数据库名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:22:57.837

我不确定这是否是正确的答案，但我们通常在 Rails 中这样做是通过将数据库设置设置为服务器（和本地）上的环境变量，并让我们的应用程序使用这些环境变量来配置该数据库连接。您可以在您的 PHP 应用程序中执行相同的操作，以对编辑代码的人员和源代码控制隐藏数据库名称（和密码）。它还有助于部署到多个服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:24:45.830

您可以做的最佳解决方案是使用镜像设置您的数据库，该用户仅有权执行正常操作，但无权访问或删除数据库。

这样，您的学生做什么或将数据库视为什么都无关紧要。

# iphone - 有没有办法让非技术用户向我发送 iPhone 设备 ID？

> ID：12404058
> 
> 赞同：0
> 
> 时间：2012-09-13T10:17:57.907
> 
> 标签：iphone

我目前正在与一些不同的用户一起测试我的 iPhone 应用程序。不过，到目前为止，我只能与亲自遇到的用户进行测试，并将他们的 iPhone 连接到我的 Macbook Air 并使用 Xcode 获取设备 ID。

我自己不是 Apple 用户，我不确定 Xcode 是否是获取设备 ID 的唯一方法，或者它是否安装在大多数 Macbook 上，或者什么。

我有一些用户要求加入我的测试阶段，但他们生活在世界各地，所以即使我愿意，我也无法合理地去见他们。此外，一些用户有 iPhone，但没有 Mac。

那么，是否有一种简单、对最终用户友好的方式可以让他们找出他们的设备 ID 并将其发送给我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T10:19:36.423

您可以在 iTunes 中获取设备 ID：

1.  启动 iTunes 并连接您的 iPhone。

2.  在右侧窗格中，找到有关您的 iPhone 的信息，包括其名称、容量、软件版本、序列号和电话号码。

3.  点击序列号。

有关更多详细信息和图片，请参阅[此帖子](http://www.innerfence.com/howto/find-iphone-unique-device-identifier-udid)。

# android - 如何在不丢失先前数据的情况下调用另一个意图？

> ID：12404070
> 
> 赞同：0
> 
> 时间：2012-09-13T10:18:47.277
> 
> 标签：android, eclipse

我的申请中有 2 页。从页面 AI 调用页面 B。在页面 BI 上有一个由用户填写的 ListView。现在，当用户单击手机的后退按钮时，他会返回页面 A。但是当他单击菜单并再次选择添加项目时，它会打开页面 B，但我的 ListView 是空的。如何在不丢失 ListView 数据的情况下返回页面 B？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:21:46.447

覆盖`onBackPressed`页面 B，并将数据保存在某个位置..
然后在`onStart`页面 B 中重新加载数据..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:37:17.383

您可以使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)在列表中保存和加载数据

IE

```
 @Override
 public boolean onKeyDown(int keyCode, KeyEvent event)  {
 SharedPreferences settingsActivity = getPreferences(MODE_PRIVATE);
 SharedPreferences.Editor prefEditor = settingsActivity.edit();
 prefEditor.putString(LISTFROMB, savedItems);
 prefEditor.commit();
   }
 return super.onKeyDown(keyCode, event);
    } 
```

然后将其加载到 A 中：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.simple);

    // Find the ListView resource.
    mainListView = (ListView) findViewById(R.id.list);

    ArrayList<String> selectedItems = new ArrayList<String>();
    SharedPreferences settingsActivity = getPreferences(MODE_PRIVATE);
    String savedItems = settingsActivity.getString(LISTFROMB, "");
    selectedItems.addAll(Arrays.asList(savedItems.split(",")));

    [CALL YOUR ADAPTER HERE WITH THE SELECTED ITEMS LIST]

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T10:38:21.950

实现此目的的一种方法是使用`SharedPreferences`：

```
public void onStop(Bundle bundle)
{
   SharedPreferences mySharedPreferences = getPreferences(MODE_PRIVATE);
   SharedPreferences.Editor editor = mySharedPreferences.edit();
   editor.putBoolean("myBool",true);
   //Continue saving all the data you need to recreate the listView
} 
```

然后，当您重新启动活动时，您可以在 OnCreate() 方法中重新加载首选项，如下所示：

```
public void onCreate(Bundle bundle)
{
    SharedPreferences mySharedPreferences = getPreferences(MODE_PRIVATE);
    // Retrieve the saved values.
    boolean myBool = mySharedPreferences.getBoolean("myBool");
    //Recreate the ListView here
} 
```

这可能不是最干净的方法。但是由于`onSavedInstanceState`不能在您的情况下使用，因此必须这样做:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T11:57:49.347

谢谢你的帮助。我通过在页面 A 中声明 ArrayList 解决了这个问题。所以现在当我回到页面 B 时，ListView 的源在页面 A 中，很容易将其加载回来。

不知道这种方法是否错误。如果您认为不应该这样做，请留下您的评论。

# search-engine - 在 Rikulo 中创建的 UI 可以被搜索引擎索引吗？

> ID：12404075
> 
> 赞同：2
> 
> 时间：2012-09-13T10:19:03.070
> 
> 标签：search-engine, dart, rikulo

UI 是在 Dart 中创建的，并且 Dart 代码将被编译为 JavaScript。如何让它们被搜索引擎收录？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T15:58:55.010

根据（http://www.forbes.com/sites/velocity/2010/06/25/google-isnt-just-reading-your-links-its-now-running-your-code/）：

> 周五，谷歌发言人向福布斯证实，谷歌确实超越了对 JavaScript 的“解析”。“谷歌可以解析和理解一些 JavaScript，”发言人说。

但是，tomyeh的回答也很好:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:19:03.070

如果 UI 是用纯 Dart 编写的，它们将不会被索引。但是，您可以使用标记语言[Rikulo EUL](https://github.com/rikulo/rikulo-eul)将 UI 嵌入 HTML 页面中。因为 EUL 可以编写为 HTML 片段，所以它们将被搜索引擎索引。

例如，在下面的代码片段中，“Rich widgets”是一个标签，将被搜索引擎索引。

```
<div data-layout="type: linear">
   Rich widgets: <div class="Switch" data-value="true"/>
</div> 
```

真实示例请参考[Scroll View 示例](https://github.com/rikulo/rikulo-eul/tree/master/example/scroll-view)。

# twitter-bootstrap - 推特引导程序中的“示例”标题

> ID：12404077
> 
> 赞同：5
> 
> 时间：2012-09-13T10:19:06.903
> 
> 标签：twitter-bootstrap

在 twitter 引导程序上有一些功能示例，这些示例包含在具有类“bs-docs-example”的 DIV 中。每个这样的 DIV 的左上角都有字符​​串“示例”。我想知道那个字符串是从哪里来的，我是否可以使用/自定义它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T10:33:01.650

如果您[查看 Github for Bootstrap](https://gist.github.com/3619682)，您会发现它`.bs-docs-example`已`content: "Example"`设置好`::after`（有关[如何使用 CSS3 管理内容的说明，请参见此处](http://nooshu.com/adding-content-using-css3)）。

基本上， .bs-docs-example 附加了这种风格：

```
.bs-docs-example::after
{
    content: "Example";
    position: absolute;
    top: -1px;
    left: -1px;
    padding: 3px 7px;
    font-size: 12px;
    font-weight: bold;
    background-color: whiteSmoke;
    border: 1px solid #DDD;
    color: #9DA0A4;
    -webkit-border-radius: 4px 0 4px 0;
    -moz-border-radius: 4px 0 4px 0;
    border-radius: 4px 0 4px 0;
} 
```

如果您修改`content`成员，您将修改文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T14:58:52.717

我知道这有点晚了，但我也想要相同的功能，但想用自定义文本代替单词 example。我想出了一个快速的小工作，使用非常接近的现有引导程序代码，不需要破解引导程序。

也许这可以帮助其他正在寻找的人

```
<div class="row">    
  <div class="span12 thumbnail">
    <span class="thumbnail span1 muted text-center" style="margin-top:-5px; margin-left:-5px; background-color:#f5f5f5;">
      <small><strong>YOUR CUSTOM TEXT</strong></small>
    </span>    
  </div>
</div> 
```

基本上，您使用缩略图类来获取 div 周围的边框，然后在嵌套 div 中再次使用它并偏移它并更改背景颜色。除了右上角和左下角略微弯曲外，它看起来非常接近，但是您可以在框中放置任何您想要的内容，文本，链接等。

# spring - 为什么服务没有用 Spring 注入控制器？

> ID：12404078
> 
> 赞同：2
> 
> 时间：2012-09-13T10:19:09.340
> 
> 标签：spring, spring-mvc

我的控制器和服务注入有问题。在 Junit 测试中，所有数据都添加到数据库中，并且我的测试 junit 没有返回错误。但是当我在控制器中注入服务时，系统返回一个空对象而不是实例化：

我的服务：

```
package mypackage.services
public interface ExampleService {
public abstract String helloWorld();
}

package mypackage.services;
import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Service;
@Service("exampleService")
@Scope("singleton")
public class ExampleServiceImpl implements ExampleService {
@Override
public String helloWorld(){
    return "Hello World !";
}
} 
```

我的控制器：

```
package mypackage.controller;

import javax.servlet.http.HttpServletRequest;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.context.ApplicationContext;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.ModelAndView;

@Controller
@RequestMapping("/planning")
public class PlanningController {

@Autowired
public ExampleService exampleService;

@RequestMapping(method = RequestMethod.GET)
public final ModelAndView planning(final HttpServletRequest request) {
    exampleService.helloWorld();
    final ModelAndView mav = new ModelAndView("planning", "tasks", "tasks");
    return mav;
}
} 
```

Spring-Servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"     xmlns:p="http://www.springframework.org/schema/p"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:aop="http://www.springframework.org/schema/aop"
xmlns:tx="http://www.springframework.org/schema/tx" xmlns:jee="http://www.springframework.org/schema/jee"
xmlns:jpa="http://www.springframework.org/schema/data/jpa"
xsi:schemaLocation="
   http://www.springframework.org/schema/beans
   http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
   http://www.springframework.org/schema/context
   http://www.springframework.org/schema/context/spring-context.xsd
   http://www.springframework.org/schema/mvc
   http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
   http://www.springframework.org/schema/aop
   http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
   http://www.springframework.org/schema/tx
   http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
   http://www.springframework.org/schema/jee
   http://www.springframework.org/schema/jee/spring-jee-3.1.xsd
   http://www.springframework.org/schema/data/jpa
   http://www.springframework.org/schema/data/jpa/spring-jpa.xsd">

<!-- Use @Component annotations for bean definitions -->
<context:component-scan base-package="mypackage.services" />                                          
<context:component-scan base-package="mypackage.controller" />

<!-- Use @Controller annotations for MVC controller definitions -->
<mvc:annotation-driven />
<aop:aspectj-autoproxy proxy-target-class="true" />

<!-- View resolver -->
<bean
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/" />
    <property name="suffix" value=".jsp" />
</bean>
<bean
    class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
    <property name="order" value="1" />
    <property name="mediaTypes">
        <map>
            <entry key="json" value="application/json" />
        </map>
    </property>
    <property name="defaultViews">
        <list>
            <!-- Renders JSON View -->
            <bean
                class="org.springframework.web.servlet.view.json.MappingJacksonJsonView" />

        </list>
    </property>
</bean>

<mvc:interceptors>
    <!-- Resolve the device that originated the web request -->
    <bean
        class="org.springframework.mobile.device.DeviceResolverHandlerInterceptor" />
</mvc:interceptors>

<jee:jndi-lookup id="dataSource" jndi-name="java:comp/env/jdbc/myDatasource" />
<tx:annotation-driven transaction-manager="transactionManager" />
<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceUnitName" value="myPU" />
    <property name="dataSource" ref="dataSource" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="showSql" value="true" />
            <property name="database" value="ORACLE" />
        </bean>
    </property>
    <property name="jpaProperties">
        <props>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.format_sql">true</prop>
            <prop key="hibernate.dialect">org.hibernate.dialect.OracleDialect</prop>
            <prop key="hibernate.hbm2ddl.auto">create</prop>
            <prop key="hibernate.c3p0.maxSize">1</prop>
            <prop key="hibernate.c3p0.minSize">1</prop>
            <prop key="hibernate.c3p0.acquireIncrement">1</prop>
            <prop key="hibernate.c3p0.idleTestPeriod">300</prop>
            <prop key="hibernate.c3p0.maxStatements">0</prop>
            <prop key="hibernate.c3p0.timeout">1800</prop>
            <prop key="hibernate.c3p0.checkoutTimeout">0</prop>
            <prop key="hibernate.c3p0.preferredTestQuery">SELECT * FROM dual</prop>
        </props>
    </property>
</bean>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean> 
```

和我的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
 http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

 <display-name>Archetype Created Web Application</display-name>

 <servlet>
   <servlet-name>spring</servlet-name>
<servlet-class>
  org.springframework.web.servlet.DispatcherServlet
</servlet-class>
<init-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:spring-servlet.xml</param-value>
</init-param>
<load-on-startup>1</load-on-startup>    
</servlet>

 <servlet-mapping>
 <servlet-name>spring</servlet-name>
 <url-pattern>*.html</url-pattern>
 <url-pattern>*.json</url-pattern>
 </servlet-mapping>

 <listener>
  <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
  </listener>
<context-param>
<param-name>log4jConfigLocation</param-name>
<param-value>classpath:log4j.xml</param-value>
 </context-param>
 <filter>
    <filter-name>sitemesh</filter-name>
<filter-class>com.opensymphony.sitemesh.webapp.SiteMeshFilter</filter-class>
  </filter>

  <filter-mapping>
<filter-name>sitemesh</filter-name>
<url-pattern>/*</url-pattern>
  </filter-mapping>
  <resource-ref>
<description>My DataSource Reference</description>
<res-ref-name>jdbc/myDatasource</res-ref-name>
<res-type>javax.sql.DataSource</res-type>
<res-auth>Container</res-auth>
  </resource-ref>

  <session-config>
   <session-timeout>
     30
   </session-timeout>
  </session-config>
  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>
  </web-app> 
```

我的测试：

```
...
@Autowired
private ApplicationContext applicationContext;

@Test
public void testPlanning() {
    LOGGER.debug("Start testPlanning");

    boolean c = applicationContext.containsBean("exampleService");
    System.out.println(c);

    final PlanningController avc = new PlanningController();        
    final Object mav = avc.planning(request);
    Assert.assertEquals(200, response.getStatus());
    Assert.assertTrue(mav instanceof ModelAndView);
    ModelAndViewAssert.assertViewName((ModelAndView) mav, "planning");
    final BindingResult result = mock(BindingResult.class);
    when(result.hasErrors()).thenReturn(true);
    LOGGER.debug("End testPlanning");
} 
```

我从一个类继承我的测试：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:spring-servlet.xml"})
@TestExecutionListeners({ DependencyInjectionTestExecutionListener.class,
DirtiesContextTestExecutionListener.class,
TransactionalTestExecutionListener.class,
DbUnitTestExecutionListener.class})

public abstract class N2WIAppConfigTest {

private static final Logger LOGGER = LoggerFactory
        .getLogger(PlanningControllerTest.class);

@BeforeClass
public static void setUpClass() throws Exception {
    // rcarver - setup the jndi context and the datasource
    LOGGER.debug("CALL setUpClass");
    try {
        // Create initial context
        System.setProperty(Context.INITIAL_CONTEXT_FACTORY,
                "org.apache.naming.java.javaURLContextFactory");
        System.setProperty(Context.URL_PKG_PREFIXES, "org.apache.naming");
        SimpleNamingContextBuilder builder = SimpleNamingContextBuilder
                .emptyActivatedContextBuilder();
        // Construct DataSource
        ComboPooledDataSource ds = new ComboPooledDataSource();
        ds.setDriverClass("oracle.jdbc.driver.OracleDriver");
        ds.setJdbcUrl("jdbc:oracle:thin:@localhost:1521:xe");
        ds.setUser("nemo2");
        ds.setPassword("nemo2");
        builder.bind("java:comp/env/jdbc/myDatasource", ds);
        builder.activate();
    } catch (NamingException ex) {
        System.out.println("###################################");
        ex.printStackTrace();

    }

}
} 
```

我尝试在我的测试中加载 ApplicationContext 以及是否加载了服务并且是这种情况。但是在 PlanningController 中，并没有注入服务。

问题出现在 PlanningController 中。ExampleService 没有注入，不明白为什么。你有什么主意吗 ？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:34:47.240

为了`@Autowire`工作，我们需要配置一些东西

*   `<context:annotation-config />`在 context.xml 中，**你错过了这个。**
*   `xmlns:context="http://www.springframework.org/schema/context`在`<beans ..`标签中
*   Spring Sterio 类型注释等`@Controller, @Component, @Service`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:28:45.903

那是因为在这一行：

```
final PlanningController avc = new PlanningController(); 
```

您正在手动创建一个 bean 实例，而不是将其留给 spring，因此 spring 无法自动装配依赖项。

您应该将 bean 创建留给容器（在本例中为 spring）或自己设置 bean 属性。

在您的情况下，您可以使用访问 spring-managed`PlanningController`实例

```
applicationContext.getBean(PlanningController.class); 
```

# encryption - HTTPS URL 加密

> ID：12404082
> 
> 赞同：0
> 
> 时间：2012-09-13T10:19:31.480
> 
> 标签：encryption, ssl, https, cryptography, ssl-certificate

当我们使用 https............例如发送登录凭据时（https://example.com?username=aaaa&password=aaaa123）。HTTPS 使用 SSL 证书加密数据。所以 url 将是加密的字符串。我给出了两个具有相同 url 的请求（https://example.com?username=aaaa&password=aaaa123）。在每个请求中，都会对 url 进行加密。第一个请求的加密url和第二个请求的加密url一样吗？每次客户端和服务器之间的 SSL 证书都会有所不同吗？

谢谢，伊克巴尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:47:02.790

> 第一个请求的加密url和第二个请求的加密url一样吗？

URL 将是相同的，因为您是这么说的。如果你问URL的*加密*是否会不同，这个问题没有意义。任何人都无法分辨，因为整个请求都是加密的，所以不可能挑出包含加密 URL 的部分。

> 每次客户端和服务器之间的 SSL 证书都会有所不同吗？

SSL 证书对于整个 SSL 会话都是相同的，只要客户端和服务器都记住它，它就会在当前连接之外持续存在。

# php - PHPUnit 测试错误

> ID：12404086
> 
> 赞同：0
> 
> 时间：2012-09-13T10:19:57.533
> 
> 标签：php, netbeans, phpunit

我正在尝试在 Netbeans 的 PHPUnit 中编写我的第一个测试。我尝试按照 Netbeans 网站[http://netbeans.org/kb/docs/php/phpunit.html](http://netbeans.org/kb/docs/php/phpunit.html)上的示例进行操作，但我不断收到以下错误。我不知道发生了什么，因为我按照网站上的指示做了所有事情。

```
> PHP Fatal error:  Class 'Calculator' not found in C:\wamp\www\Calculator\tests\CalculatorTest.php on line 18
PHP Stack trace:
PHP   1\. {main}() C:\wamp\bin\php\php5.3.8\phpunit:0
PHP   2\. PHPUnit_TextUI_Command::main() C:\wamp\bin\php\php5.3.8\phpunit:46
PHP   3\. PHPUnit_TextUI_Command->run() C:\wamp\bin\php\php5.3.8\pear\PHPUnit\TextUI\Command.php:130
PHP   4\. PHPUnit_TextUI_TestRunner->doRun() C:\wamp\bin\php\php5.3.8\pear\PHPUnit\TextUI\Command.php:192
PHP   5\. PHPUnit_Framework_TestSuite->run() C:\wamp\bin\php\php5.3.8\pear\PHPUnit\TextUI\TestRunner.php:325
PHPUnit 3.6.12 by Sebastian Bergmann.
PHP   6\. PHPUnit_Framework_TestSuite->run() C:\wamp\bin\php\php5.3.8\pear\PHPUnit\Framework\TestSuite.php:705
PHP   7\. PHPUnit_Framework_TestSuite->runTest() C:\wamp\bin\php\php5.3.8\pear\PHPUnit\Framework\TestSuite.php:745
PHP   8\. PHPUnit_Framework_TestCase->run() C:\wamp\bin\php\php5.3.8\pear\PHPUnit\Framework\TestSuite.php:772
PHP   9\. PHPUnit_Framework_TestResult->run() C:\wamp\bin\php\php5.3.8\pear\PHPUnit\Framework\TestCase.php:751
PHP  10\. PHPUnit_Framework_TestCase->runBare() C:\wamp\bin\php\php5.3.8\pear\PHPUnit\Framework\TestResult.php:649
PHP  11\. CalculatorTest->setUp() C:\wamp\bin\php\php5.3.8\pear\PHPUnit\Framework\TestCase.php:801 
```

任何帮助将不胜感激，以帮助我了解做错了什么。

截屏 ![在此处输入图像描述](../Images/920a8c3016c4a27c44c232e6810db3c0.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T10:48:20.357

您应该确保`Calculator`单元测试可以找到包含该类的文件。

```
require_once dirname(__FILE__) . '/../Calculator.php'; 
```

测试类放在一个子目录下，所以需要声明相对于文件的路径，包含unittest。也许您的应用程序使用自动加载，但您的单元测试不知道它。

如果您使用 Netbeans 创建单元测试，则路径应该已经正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:24:38.557

```
PHP Fatal error:  Class 'Calculator' not found 
```

如果你在网页中做了同样的事情，为什么计算器可以在网页中加载？

尝试包括他抱怨的文件。

# validation - 如何在 Play 中的特定表单字段上设置自定义验证错误！2.*

> ID：12404088
> 
> 赞同：4
> 
> 时间：2012-09-13T10:20:11.807
> 
> 标签：validation, playframework-2.0

基本上我有一个以下表单类。

```
public static class BasicForm {
    @Required
    public String name;
    @Required
    @Email
    public String email;
    @Required
    public String password;
    @Required
    public String confirmPassword;

    public List<ValidationError> validate() {
        if (User.findByEmail(email) != null) {
            List<ValidationError> validationErrorList = new ArrayList<ValidationError>();
            validationErrorList.add(new ValidationError("email", "error.alreadyexists", new ArrayList<Object>()));
            return validationErrorList;
        }
        return null;
    }

} 
```

如您所见，我正在尝试验证电子邮件地址的唯一性。如果电子邮件不是唯一的，**我想在电子邮件字段上显示错误消息，而不是作为全局错误消息**

实现 validate() 方法以实现此目的的正确方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T13:53:37.760

您应该使用`validate`具有以下签名的方法：

```
public Map<String, List<ValidationError>> validate() 
```

这样，您可以将错误添加到单个字段，如下所示：

```
Map<String, List<ValidationError>> errors = null;
if (emailIsBad) {
    errors = new HashMap<String, List<ValidationError>>();
    List<ValidationError> list = new ArrayList<ValidationError>();
    list.add(new ValidationError("email", "email is bad"));
    errors.put("email", list);
}
return errors; 
```

请注意，如果您应该返回一个*空*地图，它仍然会将表单呈现为错误。如果希望`validate()`方法成功，则需要返回 null。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-07T00:13:05.700

没有足够的代表发表评论（还），但不要忘记包含正确的导入语句：

```
import.play.data.validation.*; 
```

由于陈述不正确，我浪费了几分钟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-14T22:40:30.427

这是我根据丹尼尔的代码提出的：我的代码检查密码确认。

```
public Map<String, List<ValidationError>> validate() {
       Map<String, List<ValidationError>> errors = null;

            if (!password.equals(confirmPassword)) {
                errors = new HashMap<>();
                List<ValidationError> list = new ArrayList<>();
                list.add(new ValidationError("password", "Passwords do not match"));
                errors.put("password",list);
                errors.put("confirmPassword", list);
            }

            return errors;
        } 
```

# php - 每个动作都有相同的线条 - 我应该让它们这样吗？- Symfony2

> ID：12404091
> 
> 赞同：2
> 
> 时间：2012-09-13T10:20:22.647
> 
> 标签：php, symfony, doctrine-orm

我有一个控制器，它具有在数据库中插入、更新、删除和其他一些操作，但几乎所有操作都包含以下行：

```
$em = $this->getDoctrine()->getEntityManager(); 
$friend = $em->getRepository('EMMyFriendsBundle:Friend')->find($id);
$user = $this->get('security.context')->getToken()->getUser(); 
```

这可以吗，还是代码重复？我试图创建一个名为的属性`$em`并拥有一个像这样的构造函数：

```
public function __construct()
{
    $this->em = $this->getDoctrine()->getEntityManager();
} 
```

但它没有用。至于查询，尤其是带有`$id`参数的查询，我什至不知道如何将它们分隔在一个地方，以便每个操作都能够使用它们。一种方法是函数，但是这样的函数有意义吗？如果是，它应该返回什么？数组？

请告诉我最佳方法！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T11:03:30.427

What I do, for Symfony2, in the controllers to avoid code duplication is creating a class called `Controller.php` in which I put the function I often use.

For example :

```
<?php

namespace YourProject\Bundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller as BaseController;

/**
 * Base Controller for xxBundle
 */
class Controller extends BaseController
{
    /**
     * Get repository
     *
     * @param string $class class
     *
     * @return Doctrine\ORM\EntityRepository
     */
    protected function getRepository($class)
    {
        return $this->getDoctrine()->getEntityManager()->getRepository($class);
    }

    /**
     * Set flash
     *
     * @param string $type type
     * @param string $text text
     */
    protected function setFlash($type, $text)
    {
        $this->get('session')->getFlashBag()->add($type, $text);
    }

    /**
     * Returns the pager
     *
     * @param integer        $page    Page
     * @param integer        $perPage Max per page
     * @param Doctrine_Query $query   Query
     *
     * @return \Pagination
     */
    public function getPager($page = 1, $perPage = 10, $query = null)
    {
        $paginator = $this->get('knp_paginator');

        $pagination = $paginator->paginate(
            $query,
            $this->get('request')->query->get('page', 1),
            $perPage
        );

        return $pagination;
    } 
```

After creating this controller, you need to make your apps controller `extends` the controller you've created.

That way, you avoid duplicated code and alias for popular method.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:53:58.690

您正在寻找的东西可能是参数转换器，它将动作参数直接映射到对象。

以下是描述和一些示例：

[http://symfony.com/doc/2.0/bundles/SensioFrameworkExtraBundle/annotations/converters.html](http://symfony.com/doc/2.0/bundles/SensioFrameworkExtraBundle/annotations/converters.html)

**编辑：**

一篇有趣的文章中的更多信息：

[http://www.adayinthelifeof.nl/2012/08/04/multiparamconverter-for-symfony2/](http://www.adayinthelifeof.nl/2012/08/04/multiparamconverter-for-symfony2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T11:01:09.653

你可以做：

```
private $em;
private $friend;
private $user;

private function init($id==null) {
    $this->em = $this->getDoctrine()->getEntityManager(); 
    $this->friend = $id?$this->em->getRepository('EMMyFriendsBundle:Friend')->find($id):null;
    $this->user = $this->get('security.context')->getToken()->getUser();
} 
```

然后你可以调用你的行动

```
$this->init($id); 
```

或者

```
$this->init(); 
```

你会有

```
$this->em;
$this->friend;
$this->user; 
```

可用的。请注意，我允许不设置 $id 参数，因为我猜在某些操作中您不会拥有它。

如果您希望此 init 函数在不同的控制器中可用，请创建一个基本控制器并从中扩展，如另一个答案中所建议的那样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T11:01:22.383

如果您仅在几个控制器中拥有该代码，则可以将该代码包装到两者的受保护方法中。

If you think that you can reuse that code in more parts of your application then you should start to think if you need write a validator, use a service or another kind of design

# java - WebSphere MQ 配置问题

> ID：12404092
> 
> 赞同：3
> 
> 时间：2012-09-13T10:20:24.723
> 
> 标签：java, jms, websphere, ibm-mq, mq

配置 MQ 连接工厂后出现以下错误。

> java.lang.ClassCastException：com.ibm.ejs.jms.JMSQueueConnectionFactoryHandle 与 com.ibm.mq.jms.MQQueueConnectionFactory 不兼容

我的代码片段异常指向：

> 字符串 queueConnectionJndi = props.getProperty(queueConnection + MQ_CONN); queueConnectionFactory = MQQueueConnectionFactory)initialContext.lookup(queueConnectionJndi);

我无法找出造成这种情况的根本原因。

任何人都可以帮助我，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:04:12.567

没有更多上下文就无法确定，但看起来像这个方法调用：

```
initialContext.lookup(queueConnectionJndi); 
```

正在返回 com.ibm.ejs.jms.JMSQueueConnectionFactoryHandle 类型的对象，该对象无法转换为 com.ibm.mq.jms.MQQueueConnectionFactory。

你能提供更多的上下文吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:08:07.953

这篇[关于旧 nabble 的帖子](http://old.nabble.com/Axis2-JMSListener-on-Websphere-td15165852.html)听起来像是一个类似的问题，可能会对您有所帮助。

具体来说，最终响应谈到删除`jms.jar`可能在您部署的 WAR 中的任何文件。检查您的`WEB-INF/lib`. 某些 jar 由 Websphre 容器提供，不应将它们包含在您的 WAR 中。

[Spring Fourm 上的这篇文章](http://forum.springsource.org/showthread.php?62562-JMS-Spring-JSF-on-WAS-Class-loader-issues)还指出了由不应存在的类路径中包含的 jar 引起的这种性质的问题

如果您发现以下任何内容，请删除它们...

```
naming.jar
providerutil.jar
jndi.jar
jms.jar
mq.jar
websphere.jar 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T06:55:18.347

WAS 使用的 MQ jar 和我的应用程序使用的不同，所以出现了这个问题。当我更正类路径时，它已解决。很抱歉给您带来麻烦，感谢您的帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T22:34:36.133

您能否重写代码以使用 JMS 标准（[ConnectionFactory](http://docs.oracle.com/javaee/6/api/javax/jms/ConnectionFactory.html)或[QueueConnectionFactory](http://docs.oracle.com/javaee/6/api/javax/jms/QueueConnectionFactory.html)）而不是 Websphere MQ 特定的实现类？这样您就不会将您的应用程序绑定到 Websphere MQ 并将其移植到替代 MQ 实现会更容易......

IE

```
import javax.jms.QueueConnectionFactory;
...

queueConnectionFactory = (QueueConnectionFactory)initialContext.lookup(jndiName); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-29T21:17:50.733

我经历了很多反复试验才能找到答案（至少是我问题的答案）。我希望这个解决方案也能解决你的问题。正如另一篇文章中提到的，不包括 jms 库作品。但是如何排除 jms 库并且仍然能够编译代码呢？那是一件似乎没有人提到过的事情。解决方案是将 jms 库的范围设置为“提供”（如果您使用的是 Maven 或 Gradle）。

如某处所述：

“已提供意味着您需要 JAR 进行编译，但在运行时环境已经提供了一个 JAR，因此您不需要将它与您的应用程序一起打包。对于 Web 应用程序，这意味着 JAR 文件不会被放到WEB-INF/lib目录下。”

所以在你的 pom.xml 添加/更新这些：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-jms</artifactId>
    <version>4.3.4.RELEASE</version>
    <exclusions>
        <exclusion>
            <groupId>javax.jms</groupId>
            <artifactId>javax.jms-api</artifactId>
        </exclusion>
    </exclusions>
</dependency>

<dependency>
    <groupId>javax.jms</groupId>
    <artifactId>jms</artifactId>
    <version>1.1</version>
    <scope>provided</scope>
</dependency> 
```

希望这对那些因缺乏互联网答案而感到沮丧的人有所帮助。

删除所有 ibm 库。他们没用。一旦你部署到 Websphere 上，它无论如何都会使用它的库。

# c++ - 智能指针数组

> ID：12404095
> 
> 赞同：0
> 
> 时间：2012-09-13T10:20:42.527
> 
> 标签：c++, pointers, ownership

我创建了一个智能指针类，如：

```
template <class T>
class Owner
{
    T* m_p;
public:
    Owner(T *p=0) : m_p(p) {}
    ~Owner() { if (m_p) delete m_p; }
    T* operator ->() { return m_p; }
    T& operator *() { return *m_p; }
    // other members.
}; 
```

它工作得很好（类似于`auto_ptr`in boost 库），但现在我需要将智能指针的动态数组存储在 obj 中，并且它必须支持：

1）将新的智能指针插入到智能指针数组中，让数组调整大小并获得新obj的所有权，

2）动态删除一个智能指针并释放资源，

3）当最终确定数组时，所有对象都被删除。

我在考虑使用`std::vector<Owner<T> >`，但似乎 c++ 最佳实践建议不要将智能指针存储在 std 容器中，因为复制/分配行为，那么我可以采用哪些其他方法来实现这一点？类似于以下示例中的 OwnerArr ：

```
 class Adapter;

 class Computer
 { 
 public:
      Computer() {}
      ~Computer() { // adapters get freed automatically here. }

      void insertAdapter(Adapter* pAdapter) { m_adapters->appendOne(pAdapter); }
      OwnerArr<Adapter>   m_adapters;
 }; 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:03:21.830

您不能将您的`Owner`, or `std::auto_ptr`（无论如何都不应该使用，因为它已被弃用）存储在标准容器中，因为它们不是真正可复制的。

在 C++11 中，有`std::unique_ptr`：一个用于替换的单一所有权智能指针`auto_ptr`，它是可移动的，但不可复制。只要您不需要做任何涉及复制它的事情，它就可以移动或放置到任何容器中。如果您需要多个指针来共享同一对象的所有权，那么您可以`std::shared_ptr`改用。

如果由于某种原因你被旧语言版本卡住了，那么 Boost 可以为你提供[智能指针](http://www.boost.org/doc/libs/release/libs/smart_ptr/smart_ptr.htm)，包括一个`shared_ptr`非常类似于标准的[指针容器](http://www.boost.org/doc/libs/release/libs/ptr_container/doc/ptr_container.html)，或者类似于你的`OwnerArray`.

如果您决定推出自己的资源管理课程，请始终记住[“三法则”](https://stackoverflow.com/questions/4172722)。您展示的类隐式生成了复制构造函数和复制赋值运算符，这可能导致两个指针拥有 - 并尝试删除 - 同一个对象，这非常糟糕。您需要防止复制（通过删除这些函数，或者（2011 年之前）将它们声明为私有而没有实现），或者实现某种安全复制语义。

# java - android mapView 未解决

> ID：12404096
> 
> 赞同：0
> 
> 时间：2012-09-13T10:20:48.923
> 
> 标签：java, android, eclipse, google-maps-api-3

我在 eclipse/java 中的 mapView 有以下问题。

使用`mapView.getOverlays()`我得到错误。

> mapView 无法解析

我尝试对 mapView 使用局部变量（使用 MapView），但它崩溃了。mapView 是否在某处声明？

我进口`com.google.android.maps.MapView;`

但我无法访问代码，[官方文档](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/MapView)也没有帮助

并且[MapView 无法解析或不是字段](https://stackoverflow.com/questions/10667530/mapview-cannot-be-resolved-or-is-not-a-field)也没有帮助

我已经安装了 SDK 并在 Eclipse 中检查了 Google API

> 项目构建目标

我可以毫无问题地显示地图

我的 MainActivity 扩展了 MapActivity

这是完整的代码

```
package com.example.test_app;

import java.util.List;

import android.app.Activity;
import com.example.test_app.MyLocation;
import com.example.test_app.MyLocation.LocationResult;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;

import android.content.Context;

import android.location.Location;
import android.location.LocationProvider;

import android.location.LocationListener;

import android.location.LocationManager;

import android.os.Bundle;

import android.widget.Toast;

public class MainActivity extends MapActivity

{

/** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState)

{

    super.onCreate(savedInstanceState);
    MapView mapView = (MapView) findViewById(R.id.mapview);
    if (mapView == null)
        Toast.makeText(getApplicationContext(),"mapview is null",Toast.LENGTH_SHORT).show();
    else
        mapView.setBuiltInZoomControls(true);

    setContentView(R.layout.activity_main);

    LocationResult locationResult = new LocationResult(){
        @Override
        public void gotLocation(Location loc){
            Toast.makeText(getApplicationContext()," long : " +loc.getLongitude()+ " lat :"+ loc.getLatitude(),Toast.LENGTH_SHORT).show();
            //List<Overlay> mapOverlays = mapView.getOverlays();
        }
    };
    MyLocation myLocation = new MyLocation();
    myLocation.getLocation(this, locationResult);

}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

}/* End of UseGps Activity */ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T10:36:32.670

将此添加到您的清单中

```
<uses-library android:name="com.google.android.maps"/> 
```

在你的布局中

```
<com.google.android.maps.MapView
    android:id="@+id/mv"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:apiKey="---- Your Key -------"
    /> 
```

你犯了一个愚蠢的错误。将您的 setContentView 移到 MapView 的声明之上。出于这个原因，它得到了那个错误

```
super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_map);

        MapView mapView = (MapView) findViewById(R.id.mv); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:52:38.293

好的，问题解决了。

我不得不使用`setContentView(R.layout.activity_main);`.

前`MapView mapView = (MapView) findViewById(R.id.mapview);`

愚蠢的错误。

# jquery - 点击时的 jQplot 工具提示

> ID：12404098
> 
> 赞同：2
> 
> 时间：2012-09-13T10:20:50.593
> 
> 标签：jquery, mobile, jqplot, jqplot-highlighter

我在[http://www.jqplot.com/tests/cursor-highlighter.php](http://www.jqplot.com/tests/cursor-highlighter.php)使用 jqplot 的荧光笔插件。当我在移动设备上使用它时，我希望工具提示在点击/触摸时显示，而不是在悬停时显示。有没有办法做到这一点？

我试过改变

```
$.jqplot.eventListenerHooks.push(['jqplotMouseMove', handleMove]); 
```

在 jqplot.highlighter.js 的开头

```
$.jqplot.eventListenerHooks.push(['jqplotDataClick', handleMove]); 
```

但没有成功。也许我理解错了整个事情？

（与此同时，我找到了解决方案：如果您使用的是modernizr，请将上面的行替换为：

```
var monitorTouch;

if($('html').hasClass('touch')) {
    monitorTouch = 'jqplotClick';
} else {
    monitorTouch = 'jqplotMouseMove';
}

$.jqplot.eventListenerHooks.push([monitorTouch, handleMove]); 
```

这样，如果您的移动设备启用了触控，则工具提示将在点击时激活；否则，它将在鼠标悬停时激活。

# github - github中的“附加代码”是什么意思

> ID：12404101
> 
> 赞同：0
> 
> 时间：2012-09-13T10:20:59.880
> 
> 标签：github

最近我在 github 上托管的一个开源项目中提出了 pull request。现在我已经解决的问题列表旁边有一个文本“附加代码”。“附加代码”是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:26:53.060

我对您关心的问题的理解如下：

*   一个 GitHub 项目有一个**问题 X**
*   你修复了它并发送了一个**拉取请求 Y**
*   现在，**问题 X**旁边显示*“附加代码” 。*

粗略地说，从 GitHub 的角度来看，Pull Request 与一些提交一起是一个问题。因此，您也可以在“问题”选项卡中查看所有拉取请求。

可能发生的情况是，其他人也在解决**问题 X**以尝试修复它。但是，与您相反，他没有打开拉取请求，而是将他的代码链接到**发出 X**，从而将其转换为拉取请求。如果我是对的，**问题 X现在也应该与您的****拉取请求 Y**一起出现在 Pull Request 选项卡中。

实际上，**[GitHub API](http://developer.github.com/v3/pulls/#create-a-pull-request)**公开了一种通过将提交线程（分支）链接到问题来将问题转换为拉取请求的方法。

一个不错的工具可以简化“附加一些代码”到问题的过程。您可以查看**[http://issue2pr.heroku.com](http://issue2pr.heroku.com)**了解更多信息。

例如，此**[问题](https://github.com/libgit2/libgit2/pull/866)**已由 joshtriplett 打开并由*arrbee**转换*为拉取请求。

 *## 更新：

重新阅读您的问题，我现在发现它也可以以不同的方式理解。让我们试试这个。

我的理解：你向一个项目发送了一个自发的拉取请求。此拉取请求出现在**问题**和**拉**取请求两个选项卡中。但是，在“**问题**”选项卡下，提到了*“附加代码” 。*

如前所述，拉取请求是某种“增强”问题。它带有标题、创建者、描述和一些提交。这解释了为什么您的拉取请求出现在两个选项卡下。*“附加代码”*意味着该问题嵌入了一些修复/增强项目的提交。*

# java - 使用Java在WebDriver中获取组合框的选定选项的标签之间的文本

> ID：12404102
> 
> 赞同：0
> 
> 时间：2012-09-13T10:21:01.120
> 
> 标签：java, combobox, selenium-webdriver

我有以下组合框/下拉代码片段：

```
<select id="color">
<option value="">Select color</option>
<option value="1">Blue</option>
<option value="2">Green</option>
<option value="3">Red</option> 
```

如果我选择蓝色，则蓝色将显示在组合/下拉列表中。我想使用 Java 使用 Selenium 2 (WebDriver) 获取标签之间的文本，以检查组合框中显示的选定值。如何从组合框的选定值中获取文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:36:21.053

尝试这个：

```
select.getFirstSelectedOption().getText(); 
```

或者

```
select.getFirstSelectedOption().getAttribute("your attribute"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T11:12:09.203

要查找选项选择器的所有值：

```
String css1 ="select[id='color'] option[value='']"
String css2 ="select[id='color'] option[value='1']"
String css3 ="select[id='color'] option[value='2']"
String css4 ="select[id='color'] option[value='3']" 
```

第一种方式：如上所述塔肯：

```
driver.findElement(By.cssSelector(css1)).getText().trim(); 
```

第二种使用JS的方式：

```
String getTextByjs(String css) {
JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();

stringBuilder.append("var x = $(\""+css+"\");");
        stringBuilder.append("return x.text().toString();")       ;

       String res= (String) js.executeScript(stringBuilder.toString());
return res;

}
getTextByjs(String css1) 
```

# r - 控制点阵密度图中绘图符号的 alpha 值

> ID：12404104
> 
> 赞同：3
> 
> 时间：2012-09-13T10:21:05.850
> 
> 标签：r, lattice

我正在尝试使用**lattice**库的`densityplot`功能来显示一些数据。我的数据集非常混乱，所以我想减少绘制在底部的符号的 alpha 值（这样你就可以更清楚地看到过度绘制的情况）。但是，如果不使实际密度曲线同样不透明，我似乎无法仅更改这些符号的 alpha 值。我正在使用图形的选项并为and`par.settings`设置不同的值（这适用于更改线型和符号，但由于某种原因不能更改 alpha 值）。我使用 iris 数据集做了一个小例子来说明我的问题/当前方法。如果有人有任何建议，我将不胜感激。`superpose.line``superpose.symbol`

```
library(lattice) 
data(iris) 

graph.settings <- list(superpose.line = list(lty = 1:3, lwd = 2, alpha = 1),
                       superpose.symbol = list(pch = 1:3, alpha = 0.3)) 
densityplot( ~ Sepal.Length, data = iris, groups = Species, 
            auto.key = list(columns = 3), aspect = 1, 
            main = "Density Plot of Sepal Lengths", xlab = "Length (mm)", 
            par.settings = graph.settings) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T14:03:57.893

这是一个快速的解决方案。它通过提供一个“自定义”面板函数来工作，该函数调用`panel.densityplot()`两次：第一次调用为您提供地毯点`alpha=0.3`；第二个用 覆盖密度曲线`alpha=1`。

```
library(lattice) 
data(iris) 

graph.settings <- list(superpose.line = list(lty = 1:3, lwd = 2),
                       superpose.symbol = list(pch = 1:3)) 
densityplot( ~ Sepal.Length, data = iris, groups = Species, 
            auto.key = list(columns = 3), aspect = 1, 
            main = "Density Plot of Sepal Lengths", xlab = "Length (mm)", 
            par.settings = graph.settings,
            panel = function(x, ...) {
                panel.densityplot(x, ..., alpha = 0.3)
                panel.densityplot(x, ..., plot.points=FALSE, alpha = 1)
            }) 
```

# delphi - Delphi datasnap RESTful URL 如果包含带有字符 T/F/Y/N 的参数将转换为布尔值 True 和 False

> ID：12404105
> 
> 赞同：4
> 
> 时间：2012-09-13T10:21:09.443
> 
> 标签：delphi, url, rest, delphi-xe2, datasnap

我有一个接受字符串参数“CompanyName”的服务器方法“CustomerLookup”，用户可以输入任何字符，CustomerLookup 方法将返回部分符合条件的客户列表。我的 REST URL 如下所示，最后一个词“t”是方法的参数

```
http://localhost/datasnap/rest/TSales_SM/CustomerLookup/t 
```

我的预期结果是，如果用户输入“t”，方法将返回所有与“t”部分匹配的客户公司名称。但我发现某些字符，如 T & Y 将转换为 True，N & F 将转换为 false。转换代码在 delphi unit -> DataSnap.DSService 中实现

```
procedure TDSRESTService.BuildParamArray(const Params: TStringList; var ParamArray: TJSONArray);
  var
    I: Integer;
    S: String;
    LValue: Double;
  begin
    ParamArray := TJSONArray.Create;
    for I := 0 to Params.Count - 1 do
    begin
      S := Params[I];
      if (AnsiIndexText(S,TrueBoolStrs) > -1) then
         ParamArray.AddElement(TJSONTrue.Create)
      else if AnsiIndexText(S,FalseBoolStrs) > -1 then
         ParamArray.AddElement(TJSONFalse.Create)
      else if AnsiCompareStr(S,NULL) = 0 then
         ParamArray.AddElement(TJSONNull.Create)
      else
         if TDBXPlatform.TryJsonToFloat(S, LValue) then
           ParamArray.AddElement(TJSONNumber.Create(S))
         else
           ParamArray.AddElement(TJSONString.Create(S));
    end;
  end; 
```

谁能告诉我如何防止系统将 T、F、Y、N 转换为真假

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T08:13:31.117

我认为您的代码中必须有一些地方定义如下：

```
SetLength(TrueBoolStrs, 4);
TrueBoolStrs[0] := 'True';
TrueBoolStrs[1] := 'T';
TrueBoolStrs[2] := 'Yes';
TrueBoolStrs[3] := 'Y';

SetLength(FalseBoolStrs, 4);
FalseBoolStrs[0] := 'False';
FalseBoolStrs[1] := 'F';
FalseBoolStrs[2] := 'No';
FalseBoolStrs[3] := 'N'; 
```

解决方法是将 TDSRestService.BuildParamArray 修补为：

```
procedure TDSRESTService.BuildParamArrayPatch(const Params: TStringList;
  var ParamArray: TJSONArray);
const NULL = 'null';
var
  I: Integer;
  S: String;
  LValue: Double;
begin
  ParamArray := TJSONArray.Create;
  for I := 0 to Params.Count - 1 do
  begin
    S := Params[I];
    if SameText(S, 'true') then
      ParamArray.AddElement(TJSONTrue.Create)
    else if SameText(S, 'false') then
      ParamArray.AddElement(TJSONFalse.Create)
    else if AnsiCompareStr(S, NULL) = 0 then
      ParamArray.AddElement(TJSONNull.Create)
    else if TDBXPlatform.TryJsonToFloat(S, LValue) then
      ParamArray.AddElement(TJSONNumber.Create(S))
    else
      ParamArray.AddElement(TJSONString.Create(S));
  end;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T13:33:10.843

他们正在转换为真和假，因为显示的代码正是这样做的。它调用`AnsiIndexText(S,TrueBoolStrs)`，并且由于`TrueBoolStrs`数组包含 string `T`，它匹配并将一个`TJSONTrue`对象插入到您的数组中。如果您不希望这种情况发生，则必须避免调用此函数。

您可以执行更有限的搜索——而不是检查`TrueBoolStrs`数组中的所有值，只需检查您希望被视为布尔值的特定值。`TrueBoolStrs`您可以通过预先修改的内容来执行此操作而无需修改功能。（它是 SysUtils 单元中的全局变量。）但是，如果有人尝试使用包含数字的公司名称搜索客户，您会发现您会遇到类似的问题——它将参数转换为`TJSONNumber`.

你是编写程序和定义参数的人，所以如果你知道某个字段名称应该具有某种类型，那么当它可能猜错时，不要使用尝试*猜测类型的函数。*你已经知道`CustomerLookup`函数的参数是一个字符串，所以直接将参数转换为a `TJSONString`，或者直接使用原始字符串，没有任何JSON内容。

如果 Datasnap 完全在您的控制之外调用此函数，那么您可能会尝试找到一种方法来访问原始参数列表而不是 JSON 转换的参数列表，因为后者是不可靠的。

如果您想要 JSON 转换的版本，但您仍然可以访问原始参数列表，那么另一个想法是在基于上面显示的自定义编写的转换函数中包含某种形式的预期类型信息。然后该函数可以使用预期的类型来指导它的猜测——如果它正在读取一个应该具有布尔值的参数，则只搜索布尔字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-18T05:03:35.577

我有一个类似的问题，在这里可能是一样的。在我的 Servermethod 中，我期望有几个参数，我都以字符串的形式读入：

```
TServerMethods1.InsertMember(userid, Pw, MemberName, PhoneNumber: string): TJsonArray; 
```

过了一会儿，人们抱怨电话号码转移不正确，前面的“0”被切断了。所以在过程中的某个地方，它会尝试将参数评估为它认为适合的类型！因此，对于电话号码“08979”，它认为它是一个数字，而我的 InsertMember 函数接收到一个“8979”作为电话号码。我可以想象它在你的情况下也是如此！解决方案是，不使用字符串类型，而是使用参数中的 JSonType。于是我把界面改成了：

```
TServerMethods1.InsertMember(juserid, jPw, jMemberName, jPhoneNumber: TJSONString): TJsonArray; 
```

但是现在参数是 jsonobjects 并且需要特殊处理以防有人将参数留空。为此，我使用了局部变量。对于每个接收到的参数，我进行了以下检查并将其复制到局部变量：

如果未分配（jPhoneNumber）则 PhoneNumber:= '' else PhoneNumber:= UpperCase(StringReplace(jPhoneNumber.ToString,'"','',[rfReplaceAll]));

在那之后，一切都奏效了。在您的情况下，我认为他将 t 和 f 转换为布尔值，因为他试图从电话号码中提取一个数字！从那时起，我一直使用 TJSonobjects。

# android - Unity 3D Text：在位置更改时更新位置

> ID：12404107
> 
> 赞同：0
> 
> 时间：2012-09-13T10:21:13.980
> 
> 标签：android, unity3d

我正在使用 Unity 和 vuforia for Android 创建一个 AR 应用程序（项目）。我有一个 3d 文本，我想根据用户的位置更改它的位置。

现在，我可以得到他的位置和更新，我可以使用 OnGUI 函数在 Gui 标签上显示它。

3d 文本是一个预制件，所以每次用户到达新位置时我都必须实例化它吗？

3d 文本应该只出现一次（取决于他当前的位置）。这意味着，我必须首先销毁以前实例化的文本，还是会被覆盖？

最后，我应该在哪里编写实例化代码？我的意思是，在 Update() 函数上？开始（）？因此仅在位置更改时运行，而不是一直运行。

我目前正在熟悉 Unity，并试图弄清楚它是如何工作的。问我是否需要更多信息。

提前感谢您的时间和答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:42:12.360

取决于您的项目设置，可能还有其他方法可以做到这一点，但我建议通过网格渲染器隐藏 3D 文本。在您的代码中，如果自上次更新以来位置发生变化，您想检查更新功能。你如何做到这一点是通过创建两个变量：一个用于用户当前位置，一个用于上一次更新调用中的位置。所以这里的秘密是两个函数：Update 和 LateUpdate。

这是一个例子

```
#pragma strict
@script ExecuteInEditMode;

var curPos : Vector3;
var lastPos : Vector3;
var timeToWait : float = 2.0;
var shwoing : boolean;

function Start()
{
    ShowText(false);
}

function Update()
{
    // check if our current position is the same as our last position
    if(lastPos != curPos && !showing)
    {
        ShowText(true);     // Show the 3d text
    }

    if(lastPos == curPos && showing)
    {
        ShowText(false);    // Don't show the text
    }
}

function LateUpdate()
{
    lastPos = curPos;   // change our last Positon to our current position
}

function ShowText(state : boolean)
{
    renderer.enabled = state;    // enable or disable the renderer
    showing = true;              // variable to tell to keep showing text
    yield WaitForSeconds(timeToWait);   // wait a few seconds before changing the state
    showing = false;             // tell update to not show text
} 
```

以这种方式做事，您不必面对清理场景的麻烦，因为您只需处理一次 3DText 实例。我希望这会有所帮助……它可能需要做一些工作，但我现在得跑了。让我知道你是否需要我再解释一下。

# mercurial - 为 Go 包设置 Mercurial 存储库

> ID：12404109
> 
> 赞同：3
> 
> 时间：2012-09-13T10:21:17.327
> 
> 标签：mercurial, go

我正在努力为 go 包设置本地 Mercurial 存储库。

所有 mercurial 包目录都可以位于以下 url 下：

```
https://server.example.com/go-packages/ 
```

我可以通过以下方式克隆一个包：

```
hg clone https://server.example.com/go-packages/packagename 
```

这很好用。

当我想用`go`命令行安装包时：

```
go get server.example.com/go-packages/packagename 
```

我收到以下错误：

```
package server.example.com/go-packages/packagename: unrecognized import path "server.example.com/go-packages/packagename" 
```

但是当我按照[http://golang.org/cmd/go/](http://golang.org/cmd/go/)中的说明进行操作时：

```
go get server.example.com/go-packages/packagename.hg 
```

它完美地工作。

在上面的文件中，他们谈到了一个`<meta>`标志。所以我用以下条目创建了一个 index.html：

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="go-import" content="import-prefix hg repo-root">
        <title>packagename</title>
    </head>
    <body>
        <h1>packagename</h1>
    </body>
</html> 
```

# 更新：

当我这样做时，`wget -O- https://server.example.com/go-packages/packagename/?go-get=1 --no-check-certificate`我得到：

```
!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="go-import" content="import-prefix hg repo-root">
        <title>packagename</title>
    </head>
    <body>
        <h1>packagename</h1>
    </body>
</html> 
```

# 更新 2

我看到，我的内容是错误的（复制粘贴错误），现在我将其更改为：

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="go-import" content="server.example.com/go-packages/packagename hg https://server.example.com/go-packages/packagename" />
        <title>packagename</title>
    </head>
    <body>
        <h1>packagename</h1>
    </body>
</html> 
```

`go-packages`包含 mercurial 存储库的目录在哪里`packagename`。

但仍然`go get server.example.com/go-packages/packagename`无法正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T11:00:13.747

在查看了[这个问题](http://code.google.com/p/go/issues/detail?id=3099)（以及附加的[代码审查](http://codereview.appspot.com/5660051/)）和[这个线程](http://code.google.com/p/go/source/detail?r=0af5bcfdb4c1)之后：

*   确保您的“import-prefix hg repo-root”格式正确
    *   import-alias-prefix 必须是使用“ `go get`”获取的包的前缀或完全匹配。
    *   full-repo-root 必须是包含方案*但不*包含“ `.vcs`”限定符的存储库的完整 URL 根。
    *   `vcs`是“ ” `git`、“ `hg`”、“ `svn`”等之一。
*   确保从中获取的页面`https://<import>?go-get=1` 确实是您的`index.html`页面（不是`index.htm`或任何其他`DirectoryIndex`指令，`httpd.conf`例如，如果这是在文件中设置的）

> 如果 import-alias-prefix 与导入不完全匹配，则在声明的根（不需要是域的根）处执行另一个 HTTP *提取*。
> 
> 例如，假设 " `camlistore.org/pkg/blobref`" 在其 HTML 头中声明：
> 
> ```
> <meta name="go-import" content="camlistore.org git https://camlistore.org/r/p/camlistore" /> 
> ```
> 
> ... 然后：
> 
> ```
> $ go get camlistore.org/pkg/blobref 
> ```
> 
> ...查看以下 URL：
> 
> ```
> https://camlistore.org/pkg/blobref?go-get=1
> http://camlistore.org/pkg/blobref?go-get=1
> https://camlistore.org/?go-get=1
> http://camlistore.org/?go-get=1 
> ```
> 
> 最终，它在根 ( `camlistore.org/`) 处找到相同的`go-import`：
> 
> ```
> <meta name="go-import" content="camlistore.org git https://camlistore.org/r/p/camlistore" /> 
> ```
> 
> ...并继续信任它，在磁盘上`//camlistore.org/r/p/camlistore` “”的导入路径中检查 git。`camlistore.org`

# java - RSS 爬虫提要阅读器

> ID：12404110
> 
> 赞同：-1
> 
> 时间：2012-09-13T10:21:20.647
> 
> 标签：java, rss, web-crawler, rss-reader

如果可能的话，我需要在一个项目中使用开源 rss 爬虫和提要阅读器（或两个不同的工具）。我见过很多不同的工具，你知道哪一个是最好的吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:35:04.143

如果您想要完整的搜索引擎，请查看[Apache Nutch](http://nutch.apache.org/about.html)。

如果您只是想了解网络爬虫的原理 - 请阅读[“编程集体智能”中的非常简单的介绍和](https://rads.stackoverflow.com/amzn/click/com/0596529325)[“信息检索简介”中的](https://rads.stackoverflow.com/amzn/click/com/0521865719)更高级介绍。

如果您需要解析 rss 和 atom 提要，请使用[Rome](http://mvnrepository.com/artifact/rome/rome)。

还要查看任何刮板，例如[Web-Harvest](http://web-harvest.sourceforge.net/)。

# xslt - XSLT 中用于动态构建 XML 的嵌套循环

> ID：12404116
> 
> 赞同：1
> 
> 时间：2012-09-13T10:21:39.437
> 
> 标签：xslt, loops, dynamic, nested

我从 Cognos 获得了一个 XML 文档输出，我想将其用作 Crystal 报表的输入。但是，Crystal Report 所需的 XML 格式与 Cognos 输出的 XML 格式不同。

我正在尝试使用 XSLT 转换输入 XML 文档 (Cognos) 以获得 Crystal 所需的 XML。

设置上下文后，下面是来自 Cognos 的输入 XML：

```
<?xml version="1.0"?>
<dataset>
<metadata>
    <item Name="EmpId" />
    <item Name="EmpName" />
    <item Name="DeptName" />
</metadata>
<data>
    <rows>
        <row>
            <value>1</value>
            <value>John</value>
            <value>Finance</value>
        </row>
        <row>
            <value>2</value>
            <value>Peter</value>
            <value>Admin</value>
        </row>
    </rows>
</data> 
```

Crystal Report 所需的所需 XML 格式：

```
<?xml version="1.0"?>
<dataset>
<row>
    <EmpId>1</EmpId>
    <EmpName>John</EmpName>
    <DeptName>Finance</DeptName>
</row>
<row>
    <EmpId>2</EmpId>
    <EmpName>Peter</EmpName>
    <DeptName>Admin</DeptName>
</row>
</dataset> 
```

我在 XSLT 下面写了所需的转换：

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>
<xsl:template match="/">
<dataset>
<xsl:for-each select="./dataset/data/rows/row">
    <row>
        <xsl:for-each select="/dataset/metadata/item">
            <xsl:element name="{@Name}">
                <xsl:for-each select="/dataset/data/rows/row/value">
                    <xsl:value-of select="."/>
                </xsl:for-each>                 
            </xsl:element>
        </xsl:for-each>             
    </row>
</xsl:for-each>
</dataset>
</xsl:template>
</xsl:stylesheet> 
```

我得到低于输出：

```
<?xml version="1.0" encoding="UTF-16"?>
<dataset>
<row>
    <EmpId>1JohnFinance2PeterAdmin</EmpId>
    <EmpName>1JohnFinance2PeterAdmin</EmpName>
    <DeptName>1JohnFinance2PeterAdmin</DeptName>
</row>
<row>
    <EmpId>1JohnFinance2PeterAdmin</EmpId>
    <EmpName>1JohnFinance2PeterAdmin</EmpName>
    <DeptName>1JohnFinance2PeterAdmin</DeptName>
</row> 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T12:10:11.477

**这个简短而简单的转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:variable name="vNames" select="/*/metadata/*/@Name"/> 

 <xsl:template match="/*/data">
     <dataset><xsl:apply-templates/></dataset>
 </xsl:template>

 <xsl:template match="row">
  <row><xsl:apply-templates/></row>
 </xsl:template>

 <xsl:template match="row/*">
  <xsl:variable name="vPos" select="position()"/>
  <xsl:element name="{$vNames[$vPos]}"><xsl:apply-templates/></xsl:element>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于提供的 XML 文档时**（添加了一个缺少的结束标记以使其格式正确）：

```
<dataset>
    <metadata>
        <item Name="EmpId" />
        <item Name="EmpName" />
        <item Name="DeptName" />
    </metadata>
    <data>
        <rows>
            <row>
                <value>1</value>
                <value>John</value>
                <value>Finance</value>
            </row>
            <row>
                <value>2</value>
                <value>Peter</value>
                <value>Admin</value>
            </row>
        </rows>
    </data>
</dataset> 
```

**产生想要的正确结果：**

```
<dataset>
   <row>
      <EmpId>1</EmpId>
      <EmpName>John</EmpName>
      <DeptName>Finance</DeptName>
   </row>
   <row>
      <EmpId>2</EmpId>
      <EmpName>Peter</EmpName>
      <DeptName>Admin</DeptName>
   </row>
</dataset> 
```

**说明**：

1.  使用模板和 XSLT 模板选择机制来完成这项工作。作为 XSLT 中的一项规则，我们更喜欢**[`xsl:apply-templates`](http://www.w3.org/TR/1999/REC-xslt-19991116#element-apply-templates)**——**[`xsl:for-each`](http://www.w3.org/TR/1999/REC-xslt-19991116#element-for-each)**从而获得更简单、更可扩展、更易理解和可维护的代码。这是一个几乎 100% 的“推送式”解决方案的示例。

2.  **[`xsl:variable`](http://www.w3.org/TR/1999/REC-xslt-19991116#element-variable)**用于获取（一次且永远）我们将不断使用的节点。

3.  保存**[`position()`](http://www.w3.org/TR/xpath/#function-position)**在变量中以供以后在其他上下文中使用 -`position()`取决于上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T11:49:52.370

我会使用`<template>`and`<apply-templates>`机制来解决这个问题。`For-each`我认为这不是去这里的正确方式。

XML 输入：

```
<?xml version="1.0"?>
<dataset>
<metadata>
    <item Name="EmpId" />
    <item Name="EmpName" />
    <item Name="DeptName" />
</metadata>
<data>
    <rows>
        <row>
            <value>1</value>
            <value>John</value>
            <value>Finance</value>
        </row>
        <row>
            <value>2</value>
            <value>Peter</value>
            <value>Admin</value>
        </row>
    </rows>
</data>
</dataset> 
```

将此样式表应用于它：

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>

<xsl:template match="/">
    <dataset>
        <xsl:apply-templates select="//row"/>
    </dataset>
</xsl:template>

<xsl:template match="row">
    <row>
        <xsl:apply-templates select="value"/>
    </row>
</xsl:template>

<xsl:template match="value">
    <xsl:variable name="index">
        <xsl:number/>
    </xsl:variable>
    <xsl:element name="{../../../../metadata/item[position() = $index]/@Name}">
        <xsl:apply-templates select="@* | node()"/>
    </xsl:element>
</xsl:template>

</xsl:stylesheet> 
```

你得到这个输出：

```
<?xml version="1.0" encoding="utf-8"?>
<dataset>
<row>
    <EmpId>1</EmpId>
    <EmpName>John</EmpName>
    <DeptName>Finance</DeptName>
</row>
<row>
    <EmpId>2</EmpId>
    <EmpName>Peter</EmpName>
    <DeptName>Admin</DeptName>
</row>
</dataset> 
```

我通过匹配和应用某些模板创建的`dataset`和元素。`row`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T05:49:57.337

在自定义[@DimitreNovatchev](https://stackoverflow.com/questions/12404116/nested-loops-in-xslt-for-dynamically-building-xml/12405943#12405943)提供的解决方案后，我能够获得所需的 XML 转换。

**输入 XML**

```
<?xml version="1.0"?>
<dataset  xmlns="http://developer.cognos.com/schemas/xmldata/1/"  xmlns:xs="http://www.w3.org/2001/XMLSchema-instance">
<metadata>
    <item name="Employee Id" />
    <item name="Employee Name" />
    <item name="Department Name" />
</metadata>
<data>      
    <row>
        <value>1</value>
        <value Salutation="Dr." >John</value>
        <value>Finance</value>
    </row>
    <row>
        <value>2</value>
        <value Salutation="Mr." >Peter</value>
        <value>Admin</value>
    </row>      
</data> 
```

**XSLT 转换**

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:c="http://developer.cognos.com/schemas/xmldata/1/" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output indent="yes"/>
<xsl:strip-space elements="*"/>
<xsl:variable name="vNames" select="/*/c:metadata/*/@name" />
<xsl:template match="/*/c:data">
<dataset>
    <xsl:apply-templates/>
</dataset>
</xsl:template>
<xsl:template match="c:row">
<row>
    <xsl:apply-templates/>
</row>
</xsl:template>
<xsl:template match="c:row/*">
<xsl:variable name="vPos" select="position()"/>
<xsl:element name="{translate($vNames[$vPos], ' ', '_')}">
    <xsl:apply-templates select="@*"/>
    <xsl:apply-templates/>
</xsl:element>
</xsl:template>
<xsl:template match="@*">
<xsl:attribute name="{name()}">
    <xsl:value-of select="." />
</xsl:attribute>
</xsl:template> 
```

</xsl:样式表>

**输出 XML**

```
<?xml version="1.0" encoding="UTF-16"?>
<dataset xmlns:c="http://developer.cognos.com/schemas/xmldata/1/">
<row>
    <Employee_Id>1</Employee_Id>
    <Employee_Name Salutation="Dr.">John</Employee_Name>
    <Department_Name>Finance</Department_Name>
</row>
<row>
    <Employee_Id>2</Employee_Id>
    <Employee_Name Salutation="Mr.">Peter</Employee_Name>
    <Department_Name>Admin</Department_Name>
</row> 
```

# python - 神经网络训练图像以便将其 unicode 作为输出 - python

> ID：12404128
> 
> 赞同：2
> 
> 时间：2012-09-13T10:22:28.280
> 
> 标签：python, pybrain

我有一个角色的形象。我想制作一个神经网络，以便将像素的线性数组作为输入并生成字符的 Unicode，以便我可以将它与该字符的实际 Unicode 进行比较。我使用 pybrain 进行了尝试，但无法编写可以生成 Unicode 的代码。这些是我将用于神经网络的参数：

• 学习率 = 150

• S 形斜率 = 0.026

• 权重偏差 = 30

• 时期数 = 300（最大值）

• 平均误差阈值 = 0.0002

我正在考虑以下算法：

1.  根据指定的拓扑参数组成网络
2.  在指定的 ± 权重偏差值内使用随机值初始化权重。 [7]
3.  加载训练集文件（输入图像和所需的输出文本）
4.  分析输入图像并将所有检测到的符号映射到线性阵列中
5.  从文件中读取所需的输出文本并将每个字符转换为二进制 Unicode 值以单独存储
6.  对于每个字符：计算前馈网络的输出 b. 与对应于符号的期望输出进行比较并计算误差 c。在每个链接上反向传播误差以调整权重
7.  移动到下一个字符并重复步骤 6，直到所有字符都被访问
8.  计算所有字符的平均误差
9.  重复第 6 步和第 8 步，直到指定的 epoch 数 是否达到错误阈值？如果是，则中止迭代 b。如果不继续迭代

我无法在第 6 步生成 unicode 作为神经网络的输出。请帮助

# python - Pycharm：在 dict 关键字中显示错误？

> ID：12404130
> 
> 赞同：1
> 
> 时间：2012-09-13T10:22:39.573
> 
> 标签：python, syntax, error-handling, syntax-error, pycharm

我正在使用`Pycharm`：`2.6`

问题是它的错误检查行为很奇怪。我有一段按预期工作的代码。但是pycharm在基本结构中显示错误`python`

难道我做错了什么 ？

或者

我可以让它显示错误`keyword` `dict`吗？

**这是一个屏幕截图：**

![关键字字典错误](../Images/557ae3591a7d37a08da46c19036843c3.png)

错误：`Unresolved reference dict`[怎么可能]

我该如何解决？我无法处理这种错误！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T11:35:43.880

此错误记录在[PY-7451](http://youtrack.jetbrains.com/issue/PY-7451)中。它已在 PyCharm 2.6.1 中修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:27:50.117

你可能遇到过这个错误：[PyCharm doesn't identify builtins for me](http://forum.jetbrains.com/thread/PyCharm-291)

推荐的解决方案是：

> 设置 | 中的“重新加载”按钮 Python Interpreters 重新生成二进制模块的骨架，包括内置函数。请尝试按下它。

# sql-server - cakephp 2.2.2 与 mssql sql server 的数据库连接

> ID：12404133
> 
> 赞同：3
> 
> 时间：2012-09-13T10:23:04.923
> 
> 标签：sql-server, database-connection, cakephp-2.0

我正在尝试将`CakePHP 2.2.2`稳定版本与`MS SQL`数据库连接。

下面是我正在使用的数据库连接：

```
public $default = array(
    'datasource' => 'Database/Mssql',
    'persistent' => false,
    'host' => '192.192.1.1',
    'login' => 'username',
    'password' => 'password',
    'database' => 'dbname',
    'prefix' => '',
    //'encoding' => 'utf8',
); 
```

当我连接 CorePHP 时 - 它可以工作，所以我使用的所有凭据都是正确的，但是当我连接 CakePHP 2.2.2 版本时，返回以下错误：

```
Cake is NOT able to connect to the database.
Datasource class Mssql could not be found. 
```

我在路径上的 dbo 库中有以下文件：`cakephp/lib/Cake/Model/Datasource/Database`

```
Mysql.php
Postgres.php
Sqlite.php
Sqlserver.php 
```

所以我相信`MS SQL Server`连接所需的所有文件都存在于我的 Cake 版本中。

让我知道我缺少什么或有什么问题。

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T03:19:43.973

我认为正确的数据源字符串是“Sqlserver”而不是“mssql”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-13T14:25:08.977

**Sqlserver**数据源依赖于名为 pdo_sqlsrv 的 Microsoft 的 PHP扩展**。**此 PHP 扩展不包含在 PHP 的基本安装中，必须单独安装。

此外，必须安装 SQL Server Native Client 才能使扩展工作。由于 Native Client**仅适用于 Windows**，您将无法在 Linux、Mac OS X 或 FreeBSD 上安装它。

# c++ - 是否有任何工具支持基于检查点的 C++ 内存使用分析

> ID：12404134
> 
> 赞同：2
> 
> 时间：2012-09-13T10:23:06.780
> 
> 标签：c++, windows, linux, memory-profiling, checkpoint

我正在开发基于网络的应用程序。我想查看应用程序不同阶段之间的内存使用情况，例如初始化和释放之间的内存使用情况或发送和接收之间的内存使用情况。我已经用谷歌搜索并尝试找到解决方案，但没有完全符合我要求的帖子。

拜托，你们可以建议任何可以帮助我在 Linux 和 Windows 平台上执行**基于检查点的内存分析的工具或过程。**

提前致谢

* * *

以下代码

```
_CrtMemState memState1;
_CrtMemCheckpoint(&memState1);

char *p = new char[100];
p = new char[100];
p = new char[100];
p = new char[100];
p = new char[100];

_CrtMemState memState2;
_CrtMemCheckpoint(&memState2);
_CrtMemState memStateDiff;
_CrtMemDifference(&memStateDiff, &memState1, &memState2);
_CrtMemDumpStatistics(&memStateDiff);' 
```

给我输出

```
0 bytes in 0 Free Blocks.
0 bytes in 0 Normal Blocks.
0 bytes in 0 CRT Blocks.
0 bytes in 0 Ignore Blocks.
0 bytes in 0 Client Blocks.
Largest number used: 0 bytes.
Total allocations: 0 bytes. 
```

我在 Windows 7 Ultimate 上使用 Visual Studio 2010 Professional。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T10:26:59.417

基于检查点的内存使用内置于 Visual C++ 中的调试 CRT 库中。

[http://msdn.microsoft.com/en-us/library/974tc9t1(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/974tc9t1(v=vs.80).aspx)

# c# - 如何根据实体输入参数过滤 IEnumerable

> ID：12404136
> 
> 赞同：6
> 
> 时间：2012-09-13T10:23:09.560
> 
> 标签：c#, .net, asp.net-mvc, entity-framework, nhibernate

我现在正在使用实体框架-但这是所有 ORM 甚至 IEnumerable 之间“共享”的问题。

假设我在 MVC 中有一个方法，如下所示：

```
[HttpPost]
public ActionResult Foo(FooModel model)
{
    var context = new Context(); -- The EF session
    var data = context.Foo.Where(???).ToList();
    return View(data);
} 
```

我想根据输入参数查询上下文，例如：

```
var data = context.Foo.Where(x => x.Date == model.Date &&
                             x.Name == model.Name &&
                             x.ItemCode = model.ItemCode).ToList(); 
```

但它比这更复杂，因为如果上面的参数之一（`Date`\ `Name`\ `ItemCode`）为空，我不想将它包含在查询中。
如果我硬编码，它看起来类似于：

```
var query =  context.Foo;

if (model.Date != null)
    query =query.Where(x => x.Date == model.Date);

if (model.ItemCode != null)
    query =query.Where(x => x.ItemCode == model.ItemCode);
... 
```

一定有比这更简单的方法。我需要一种方法来生成要在 Where 方法中使用
的类型的表达式。`Expression<T, bool>`

```
[HttpPost]
public ActionResult Foo(FooModel model)
{
    var context = new Context(); -- The EF session
    var data = context.Foo.Where(THE_EXPRESSION).ToList();
    return View(data);
} 
```

是否有内置方法来构建该表达式？nuget中是否有一个包可以做到这一点？

* * *

**更新：**模型实体中可能有 30 多个属性；为每个查询写 30 次 Where 可能会让人头疼：

```
.Where(model.Date != null, x => x.Date == model.Date)
.Where(model.Name != null, x => x.Name == model.Name)
.Where(model.ItemCode != null, x => x.ItemCode == model.ItemCode)
...
...
...
.ToList(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T10:45:25.430

您的硬编码方法通常是最好的方法。

但是，您可以尝试通过编写适当的扩展方法来帮助保持代码整洁，从而使您的生活更轻松一些。

试试这个例如：

```
public static class QueryableEx
{
    public static IQueryable<T> Where<T>(
        this IQueryable<T> @this,
        bool condition,
        Expression<Func<T, bool>> @where)
    {
        return condition ? @this.Where(@where) : @this;
    }
} 
```

现在您可以编写以下代码：

```
[HttpPost]
public ActionResult Foo(FooModel model)
{
    using (var context = new Context())
    {
        var data = context.Foo
            .Where(model.Date != null, x => x.Date == model.Date)
            .Where(model.Name != null, x => x.Name == model.Name)
            .Where(model.ItemCode != null, x => x.ItemCode == model.ItemCode)
            .ToList();
        return View(data);
    }
} 
```

（请不要忘记处理您的上下文或使用`using`为您完成它。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-13T11:25:00.247

试试看。这是使用反射和表达式来动态构建查询。我只用对象测试它。

```
static IQueryable<T> Filter<T>(IQueryable<T> col, T filter)
{
    foreach (var pi in typeof(T).GetProperties())
    {
        if (pi.GetValue(filter) != null)
        {
            var param = Expression.Parameter(typeof(T), "t");
            var body = Expression.Equal(
                Expression.PropertyOrField(param, pi.Name),
                Expression.PropertyOrField(Expression.Constant(filter), pi.Name));
            var lambda = Expression.Lambda<Func<T, bool>>(body, param);
            col = col.Where(lambda);
        }
    }

    return col;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T10:52:50.280

我认为你应该将你的逻辑封装到你的 Foo 实体中，例如

```
 public Foo
   {
     public bool isMatch(Model model)
     {
       // check your rules and return result
     }
   } 
```

并在 linq 中使用它。或查看[规范模式](https://stackoverflow.com/questions/1436663/specification-pattern-example)

# html - 同一行中的两个 div 一个 div 居中，另一个 div 在右侧

> ID：12404138
> 
> 赞同：1
> 
> 时间：2012-09-13T10:23:16.397
> 
> 标签：html, css

我有这样的情况

```
 CustomerInformation                               button 
```

以上是我想要的输出

```
 <div id="headerCustomer">   

<h:outputText  style="font-size: 18px;font-weight:bold;"  value="CustomerInformation " ></h:outputText>

<input type="button"></input>

    </div> 
```

上述实现的CSS可能是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:28:51.403

...................................

***[演示](http://tinkerbin.com/ETRBRKPI)***

嗨，现在轻松做到这一点

像这样

**CSS**

```
 #headerCustomer{
    background:red;
      position:relative;
    }
    .cntr{
    font-size: 18px;font-weight:bold;
      background:green;
      display:block;
      width:500px;
      margin:0 auto
    }
.inbg{
position:absolute;top:0; right:0;
} 
```

***HTML***

```
<div id="headerCustomer">   

<h:outputText   value="CustomerInformation" class="cntr">Hello the the text here</h:outputText>

<input type="button" value="submit" class="inbg">

    </div> 
```

***[演示](http://tinkerbin.com/ETRBRKPI)***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:34:44.483

试试这个

```
<div id="headerCustomer"> 
<div style="float:left; padding-left:100px;" >
<h:outputText  style="font-size: 18px;font-weight:bold;"  value="CustomerInformation">    </h:outputText>
</div>
<div style="float:right" ><input type="button" /></div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T10:36:19.257

我希望你看起来像这样：- [http://tinkerbin.com/jLXcBKTL](http://tinkerbin.com/jLXcBKTL)

**HTML**

```
<div id="headerCustomer">   
<h:outputText value="CustomerInformation " >Customer Information</h:outputText>
<input type="button" value="submit"></input>
</div> 
```

**CSS**

```
#headerCustomer {
background:red;
text-align:center;
font-size: 18px;
font-weight:bold; 
}
input[type=button] { 
  float: right;
  width:100px;
  height:20px;  
} 
```

# mips - 试图计算一个五级流水线处理器执行指令的时间

> ID：12404140
> 
> 赞同：1
> 
> 时间：2012-09-13T10:23:20.673
> 
> 标签：mips, pipeline

假设 M5 是一个**五阶段流水线实现**。

我知道五级管道有以下步骤：

```
 IF -- instruction fetch (and PC update)
    ID -- instruction decode (and get operands from registers)
    EX -- ALU operation (can be effective address calculation)
    MA -- memory access
    WB -- write back (results written to register(s)) 
```

如果假设有 100 条 MIPS 指令，指令组合如下：

```
Loads 23%, Stores 12%, Conditional Branches 12%, Jumps
8% and R-type instructions 45%.

The CPU clock frequency is 1.2 GHz 
```

我正在尝试计算执行 100 条指令的时间。我了解如何使用此公式计算非管道的时间

```
ExTime = Instruction count * CPI * Clock period in seconds 
```

我将频率转换为周期，`1/f = 8.33 * 10^-10 seconds` 但我不确定计算此管道执行时间的方法，我是否需要知道管道实现的周期？

请帮帮我，因为我在网上找不到像样的例子。谢谢

**编辑**

我想我找到了答案！

我发现了一些信息

```
INSTRUCTION LATENCY = 5 time units THEREFORE
INSTRUCTION THROUGHPUT = 5 * (1 / 5) = 1 instruction per time unit
So in this case it would be: 
ExTime in seconds = Number of instructions * clock cycle period in seconds 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-07T17:55:12.120

忽略分支/跳转刷新所花费的时间：

给定指令组合中指令的平均周期数 =

(0.23)*5 + (0.12)*4 + (0.12)*4 + (0.08)*4 + (0.45)*4 = 4.23 个时钟周期

（加载需要 5 个周期，存储：4，R：4，跳转/分支：4）

现在，

1 条指令平均占用的周期数 = 4.23

=> 100 条指令平均占用的周期数 = 423

时钟频率 = 1.2Ghz

=> 1 个周期所需的时间 = 8.33 * 10^-10

=> 423 个周期所用的时间 = 3.5236 * 10^-7 = Ans

# java - 有大量参数的函数有什么解决方法吗？

> ID：12404141
> 
> 赞同：5
> 
> 时间：2012-09-13T10:23:23.490
> 
> 标签：java, function, arguments

我每天调用一次函数：

```
new SubmitLogs().mail(IP, date_time_UTC, date_time_IST , pageVisited , userCountry , userRegion , city , userAgent); 
```

函数参数不断增长。最初是这样的：

```
new SubmitLogs().mail(IP, date_time_UTC, userAgent); 
```

现在它还有 5 个参数。预计一周内会包含更多参数。现在我不喜欢这样。维护有这么多参数的函数对我来说似乎不是一件好事。有什么解决方法吗？如果函数不断增长，我将永远不想向函数发送大约 50 个参数。该电话的作用是通过电子邮件发送带有简短消息和简短主题的参数中的详细信息。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-13T10:24:50.493

你真的有两个选择

1.  尝试将一些参数组合到一个对象中。这会将类似的东西封装在一起。例如，您可以将 userRegion、userCountry 和 city 放在一个 Location 对象中

2.  或者，[Builder](http://www.informit.com/articles/article.aspx?p=1216151&seqNum=2)模式很好。Josh Bloch 的 Effective Java 有一个很好的章节。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T10:29:33.047

这听起来像：

1.  封装问题。将你的论点组合成一个或多个逻辑连贯的对象
2.  范围问题。*你的方法是不是做得太多了？*或者是您可以在包含对象上配置的实例类型信息。

我的一个朋友曾经对我说。

> 如果一个函数有 10 个参数，这通常表明你忘记了另外 5 个参数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T10:27:47.510

听起来您需要更多对象来表示相关对象组。

```
new SubmitLogs().mail(IP, date_time_UTC, date_time_IST , pageVisited , userCountry , userRegion , city , userAgent); 
```

看起来有一些物体等着出来。

```
public class UserLocation { 
    private string userCountry; 
    private string userRegion;
    private string city;
    // ...
} 
```

现在你已经简化了一点

```
new SubmitLogs().mail(IP, data_time_UTC, date_time_IST, pageVisited, userLocation, userAgent); 
```

我不知道您的域，但您可能可以找到其他数据组将这些数据组合在一起。

将数据汇总在一起后，您可能会发现方法开始自然地转移到这些类中。例如，UserLocation 可能具有将该信息写入流的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T10:27:11.350

创建一个值对象并改为传递该值对象。如果是远程调用什么的，记得实现Serializable。

```
class MailParams {

    String ip;
    String dateTimeUTC;
    String dateTimeIST;
    // .... and so on
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T10:27:52.357

我只需要将电子邮件作为参数发送到此方法所需的强制参数，所有可选参数都将通过 Map 提供，其中此映射的键将是 Enum，其中包含可能的可选参数及其类型的列表value 是给定调用的该属性的值。

```
new SubmitLogs().mail(sender, receiver, subject, body, ImmutableMap.<SubmitLogMailParams, Object>of(<param1>, <value1>, <param2>, <value2>, ...); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-13T10:27:57.427

提供该方法的不同实现 - 具有 3 个参数的 mail()、具有 10 个参数的 mail() 等，因此可以使用最匹配的一个。

# ios - MFI Apple 计划/认证

> ID：12404147
> 
> 赞同：1
> 
> 时间：2012-09-13T10:24:06.140
> 
> 标签：ios, external-accessory, mfi

对于初创公司，哪些参数可以使认证请求获得 Apple 批准？

我知道这里的常见问题解答中描述了两种类型的[认证](http://mfi.apple.com/faqs.html)

他们说：

> 大批量制造设施有资格获得 MFi 制造许可证。

大容量 = ????

我有兴趣构建控制它们所需的 MFI 配件和应用程序。

当然，我这样做的兴趣是赚取一些利润，但我不知道使MFI程序有效作为制造商的参数是什么（我发送了Apple MFI请求进入程序）

我宁愿不使用[这种](http://www.redpark.com/)解决方案，只想卖掉自己的配件。

我正在等待 Apple 对我的 MFI 计划请求进行审核，我向他们解释了我的配件类型在音乐领域。

如果太复杂，我想知道是否可以通过只有 iOS 开发人员程序（可能使用[EAAccessory 库](http://developer.apple.com/library/ios/#documentation/ExternalAccessory/Reference/EAAccessory_class/Reference/Reference.html)）的 USB 电缆（Arduino 或 MSP430）与外部设备进行通信并构建要销售的产品。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-23T04:22:35.137

达里奥；

如果您想通过 30 针连接器或新的 Lightning 连接器连接您的配件，或者如果您希望任何用户开发的应用程序通过 iOS“外部配件框架”与配件通信，配件必须在以下开发MFi 许可证。

与 iOS 设备的任何 USB 通信都需要使用 30 针连接器或闪电连接器。

您应该注意，Apple 只会向符合其标准并愿意接受信用检查的公司实体授予 MFi 许可证。此外，在最近对 MFi 计划进行重组后，MFi 配件现在只能由获得“MFi 制造许可证”的公司制造。如常见问题解答中所述，Apple 只会将制造许可证授予拥有大批量制造设施的公司。只有获得 MFi 制造许可证的公司才能购买使配件能够连接到 iOS 设备或通过 iOS 外部配件框架与用户开发的应用程序通信的专有组件。

所以，你的问题的现实答案是，“我可以毫无问题地将我的产品投放市场吗？” 很简单，没有。

其他一些选择是实现一个通过 wi-fi 与 iPhone 通信的配件，或者实现一个可以通过 CoreBluetooth 框架与用户开发的应用程序通信的“Bluetooth-LE”配件。

但是，如果您选择 Bluetooth-LE 选项，请记住 iPhone 4S 或 iPad 3rd gen 之前的 iOS 设备没有支持 Bluetooth-LE 的硬件。

在任何情况下，您都必须先让 Apple 批准您的应用程序，然后才能通过应用程序商店提供该应用程序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-24T23:57:09.960

达里奥；

Apple MFi 许可结构的最新变化已经关闭了小公司和“初创企业”推销“有线”iOS 配件的任何机会。MFi 开发者许可证的准入要求并不难满足，因此小公司仍然可以开发 MFi 配件。但是，找到一家愿意让您的设计通过 Apple 认证程序，然后为您制造配件的“MFi 制造被许可方”公司，对于大多数小公司或“初创企业”来说，可能是一个难以逾越的障碍。

剩下三个“无线”选项……蓝牙 MFi、蓝牙-LE 和 wi-fi。不幸的是，新的 MFi 要求似乎也适用于蓝牙 MFi 配件，使蓝牙-LE 和 wif-fi 成为唯一现实的选择。

如果您的配件对数据吞吐量的要求不高，蓝牙 LE 可能是您的最佳选择。假设您满足排放、安全等方面的所有其他监管要求，您将能够在不受 Apple 限制的情况下销售您的产品。这枚硬币的另一面是你不能在你的产品或包装上使用任何苹果的“商业外观”。很明显，Apple 愿意批准与蓝牙 LE 配件接口的设计合理的应用程序。

不过，正如我之前指出的，只有最新的 iOS 设备（iPhone 4S、iPad 3rd gen 等）才有支持蓝牙 LE 所需的 RF 硬件。

您可以在 lists.apple.com 的“Bluetooth-dev”区域的档案中找到有关 Bluetooth-LE 配件的大量信息。相应的 CoreBluetooth 框架对所有 Apple iOS 开发者开放。

如果 Bluetooth-LE 解决方案不适合您，wi-fi 是唯一可行的选择。与蓝牙 LE 配件一样，有许多 Apple 批准的应用程序可以与独特的 Wi-Fi 配件配合使用。

问候，

马克戴维斯

# php - PHP回显中的Jquery

> ID：12404149
> 
> 赞同：0
> 
> 时间：2012-09-13T10:24:10.453
> 
> 标签：php, jquery

这是我的 php 和 jquery 代码：

```
<?php
require('connection.php');
$query="select title,content from blogs";
echo '<html><head>';
echo '<link rel="stylesheet" href="blog.css" />';
echo '<script src="jquery.js"></script>';
//echo '<script src="blogs.js"></script>';
echo "</head><body>";
$i=0;
if($result=$mysqli->query($query))
{
while($news=$result->fetch_row())
{
echo "<br/><br />"."<strong ><h2 onclick='$(document).ready(function() {
    $(this).click(function(){ $(\"#a".$i."\").toggle(\"slow\");});});'>". $news[0]."</h2></strong>"."<br/><br />";
echo "<div id='a".$i."'>".$news[1]."</div>";
$i++;
}
$result->close();
echo "</body></html>";
}
?> 
```

这有效但不稳定。当我单击第一个标题时，它会像动画一样切换 2 到 3 次。当我单击第二个标题时，第一个和第二个标题内容会切换。这是输出 php 源代码中的函数调用。

```
<strong ><h2 onclick='$(document).ready(function() {
    $(this).click(function(){ $("#a0").toggle("slow");});});'>HELLO WORLD</h2></strong> 
```

请让我知道为什么会这样？我是 jquery 的新手，所以我内联使用它。我知道这样做是一种不好的做法，并且消除了使用 jquery 的最大优势。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:34:17.893

只需以下内容就足够了，并且可能会摆脱您的意外行为。

```
<h2 onclick='$("#a0").toggle("slow")'>hello world</h2> 
```

此外，您通常会在 javascript 文件或 javascript 标记中执行此操作。在 h2 上放置一个 ID，并将侦听器添加到其中。

此外，一个好的做法是将粗体应用到带有 css 文件的 h2 元素，而不是用 strong 来膨胀你的 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:35:23.587

我最好做这样的事情：

```
<?php
require('connection.php');
$query="select title,content from blogs";
echo '<html><head>';
echo '<link rel="stylesheet" href="blog.css" />';
echo '<script src="jquery.js"></script>';
echo '<script type="text/javascript">';
echo '    $(document).ready(function() {';
echo '    $("h2").click(function(){ ;$('#a' + $(this).data("id")).toggle("slow");});});';
echo '</script>';
//echo '<script src="blogs.js"></script>';
echo "</head><body>";
$i=0;
if($result=$mysqli->query($query))
{
while($news=$result->fetch_row())
{
echo "<br/><br />"."<strong ><h2 data-id=".$i.">". $news[0]."</h2></strong>"."<br/><br />";
echo "<div id='a".$i."'>".$news[1]."</div>";
$i++;
}
$result->close();
echo "</body></html>";
}
?> 
```

此代码将使用 h2 标记中的 data-id `$(this).data("id")`（请参阅，它已添加到我的代码中），因此您可以轻松找到所需的 div 并且不需要每个 h2 的 onclick。$(document).ready() 仅用于在页面完全加载后调用某些代码一次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T10:37:50.510

这是您清理后的代码：

```
<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="blog.css" />
    <script src="jquery.js"></script>
    <!--<script src="blogs.js"></script>-->
    <script>
      $(function(){
        $('h2').click(function(){
          $(this).next().toggle('slow')
        })
      })
    </script>
  </head>
  <body>';
<?php
  require('connection.php');
  $query="select title,content from blogs";
  $i=0;
  if($result=$mysqli->query($query)) {
    while($news=$result->fetch_row()) {
      echo "
    <h2><strong>{$news[0]}<strong></h2>
    <div id='a$i'>{$news[1]}</div>";
      $i++;
    }
    $result->close();
  }
?>
  </body>
</html> 
```

# ruby - 带有图表的 Ruby 图形用户界面

> ID：12404151
> 
> 赞同：1
> 
> 时间：2012-09-13T10:24:11.413
> 
> 标签：ruby

我希望能够做两件事：

1.  有一个用于 ruby​​ 的 gui，我可以从中运行一些脚本/计算。
2.  通过图表显示结果。

结果将只是一个简单的数组。最好将所有这些都放在 gui 中，这样它就可以像普通程序一样运行。

任何帮助将不胜感激。

谢谢！

编辑：我忘了提，图表可以是简单的折线图。没有什么花哨。但是他们需要能够显示一组结果，比如 100,000 个点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:41:48.460

我可能应该对这个话题保持沉默，因为我缺乏实践经验，但我建议将 1\. 和 2\. 视为完全独立的问题。可以找到 2\. 的提示，例如。在 SO 线程 [Ruby: building a plot of function](https://stackoverflow.com/questions/1561729/ruby-building-a-plot-of-function)中，而在 1\. 中，我在[Ruby GTK](http://ruby-gnome2.sourceforge.jp/)方面取得了一定的成功。

这并不构成对您问题的完整答案，您不应将其标记为已接受的答案。由于缺乏兴趣和/或不愿回答其他人，我发布了它。我仍在等待大专业人士来教我和提问者如何做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T01:55:13.703

看起来[ruby​​-gsl 可以满足](http://rb-gsl.rubyforge.org/)您的要求。您可以直接在 irb 中调用绘图函数。请参阅[屏幕截图](http://rb-gsl.rubyforge.org/files/rdoc/screenshot_rdoc.html)，了解您将如何与之交互。

# php - 如何检查数组中是否存在值php

> ID：12404154
> 
> 赞同：1
> 
> 时间：2012-09-13T10:24:26.173
> 
> 标签：php, arrays, loops, foreach

我可以检查数组中的值吗？

我的意思是如果我有这样的数组

```
$image=array(
    1 =>$_FILES['image1']['name'],
    2 =>$_FILES['image2']['name'],
    3 =>$_FILES['image3']['name'],
    4 =>$_FILES['image4']['name'],
    5 =>$_FILES['image5']['name'],
    6 =>$_FILES['image6']['name'],
); 
```

我想知道具有图像名称的键是什么，并且我想根据数组键号更新 mysql 表的某些列，这些列具有图像名称。

我也想写一个 sql 查询来做到这一点。（这是我想要的一个例子。我知道这个查询是错误的）

```
$query="
    UPDATE mytablename
    foreach($image as $valeu){
        echo'$image(1)=$value';
        echo'$image(2)=$value';
        echo'$image(3)=$value';
        echo'$image(4)=$value';
        echo'$image(5)=$value';
        echo'$image(6)=$value';
    }
"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T10:26:50.910

`array_search`是你的朋友：

```
$key = array_search($image_name, $image); 
```

[http://www.php.net/manual/en/function.array-search.php](http://www.php.net/manual/en/function.array-search.php)

每当您对数组进行操作时，请阅读[数组函数](http://php.net/manual/en/ref.array.php)列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T10:27:38.067

从外观上看，如果您的数组中存在一个键，它会附加一个图像吗？

至于查询，您可以使用内爆来获取文件的名称，如下所示：

```
 $query="
    update myTableName 
    set someValue=1 
        where imageName in (".implode($image).")"; 
```

或者，如果您需要获取数组键，那么您可能必须先执行一个循环：

```
$IDArray=array();
foreach($image as $key => $val)
{
    $IDArray[]=$key;
}

$query="
    update myTableName 
    set someValue=1 
        where imageID in (".implode($IDArray).")"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T10:30:53.837

你可以这样做，

```
foreach($image as $key=>$imgInfo)
{
   if(isset($imgInfo['name']))
   {
      $validKeys = $key.',';
   }
}
$validKeys = rtrim($validKeys,','); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T12:12:51.110

我用自己的方式来做到这一点。

```
$image=array(
1 =>$_FILES['image1']['name'],
2 =>$_FILES['image2']['name'],
3 =>$_FILES['image3']['name'],
4 =>$_FILES['image4']['name'],
5 =>$_FILES['image5']['name'],
6 =>$_FILES['image6']['name'],
);
$i=1;
    $sql  = "UPDATE salehotel ";
    $sql .="SET"." ";
foreach($image as $value){
    if(!$value==""){    
    $sql .=  "`image".$i."`"."="."'". $value ."'".",". " ";
    $i++;
    }

}

$sql .="
      `name`='$name',
      `status`='$status',
      `type`='$type',
      `location`='$location',
      `price`='$price',
      `description`='$description'
    WHERE  
      `property_id`='$edit'
      "; 
```

这是一种非常简单的方法，但它可以完成我的工作。谢谢你们

# mysql - mysql - 长查询中重复子查询的替代方法

> ID：12404156
> 
> 赞同：1
> 
> 时间：2012-09-13T10:24:35.097
> 
> 标签：mysql, subquery

正在将一个表的一行插入到另一个表中，为此我有一个类似的查询

```
INSERT INTO table1 
        (id,name,fieldname,address) 
SELECT (SELECT id FROM usertable WHERE name = 'namevalue'),
        name,
       ( SELECT fieldname FROM fielddata WHERE id IN 
         (SELECT id FROM usertable  WHERE name = 'namevalue') ),
       address 
FROM   sourcetable 
WHERE  cond = 'value' 
```

在上面的查询中，下面的子查询重复了两次，有没有办法只使用一次子查询并保留该值并在其他地方使用它。

```
SELECT id FROM usertable WHERE name = 'namevalue' 
```

让我知道是否需要更多详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:33:14.343

了解[SQL 连接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)：

```
INSERT INTO table1 (id, name, fieldname, address)
SELECT usertable.id,
       sourcetable.name,
       fielddata.fieldname,
       sourcetable.address
FROM   sourcetable
  JOIN usertable ON sourcetable.cond = 'value'
                AND usertable.name = 'namevalue'
  LEFT JOIN fielddata ON fielddata.id = usertable.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:33:24.633

尝试这个：

```
INSERT INTO table1 
    (id,name,fieldname,address) 
SELECT sub.id, 
   sub.name,
   ( SELECT fieldname FROM fielddata WHERE id IN sub.id ),
   sub.address
FROM
(
    SELECT (SELECT id FROM usertable WHERE name = 'namevalue') id,
        name,
        address 
    FROM sourcetable 
    WHERE cond = 'value' 
) sub 
```

# gwt - 在 GAS 应用程序上对齐锚文本

> ID：12404160
> 
> 赞同：0
> 
> 时间：2012-09-13T10:24:42.067
> 
> 标签：gwt, google-apps-script

我在[https://script.google.com/macros/s/AKfycbwvCnn7WfTWsU2sz-8ONeM_gLM_y5pZd31s6lb68bjyx1bETOyy/exec](https://script.google.com/macros/s/AKfycbwvCnn7WfTWsU2sz-8ONeM_gLM_y5pZd31s6lb68bjyx1bETOyy/exec)上将锚文本“说明”对齐时遇到问题 这是代码>>

```
//App instruction
var instlink =  app.createAnchor('Instructions', 'https://sites.google.com/site/1000eventz/')
  .setStyleAttribute('text-align', 'right')
  .setHorizontalAlignment(UiApp.HorizontalAlignment.RIGHT)
  .setId('instlink'); 
```

更多代码>> [https://script.google.com/d/1H6DLb8L6Qd3g55Dzn_A7ed61QvM_OcrLINDfya1i1h7JAyV_jLH7nmcq/edit](https://script.google.com/d/1H6DLb8L6Qd3g55Dzn_A7ed61QvM_OcrLINDfya1i1h7JAyV_jLH7nmcq/edit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T21:29:59.200

尝试将小部件添加到 Horizo​​ntalPanel，将其宽度设置为 100%，并将此面板的 Horizo​​ntalAlignment 设置为 UiApp.Horizo​​ntalAlignment.RIGHT。最后在您之前添加锚小部件的位置添加此 Horizo​​ntalPanel（包含小部件）。

这只是我头脑中的编码，我还没有测试过，但它应该可以工作。

让我知道，我希望它有所帮助。

# api - 动作和对象图 api 查询？

> ID：12404163
> 
> 赞同：0
> 
> 时间：2012-09-13T10:24:50.657
> 
> 标签：api, facebook-graph-api, facebook-javascript-sdk

我可以成功地将自定义 {action}/{object} 提交到 facebook graph api。

我想知道是否有一种方法可以查询所有 {objects}/{actions} 的图形 api？

例如，我想检索使用我的 facebook 应用程序制作的所有 {objects} 的列表？我想获取最初创建 {object} 的用户我还想获取对特定 {object{ 等采取 {action} 的用户

我希望我很清楚......例如考虑facebook食谱的例子：

[https://developers.facebook.com/docs/opengraph/tutorial/](https://developers.facebook.com/docs/opengraph/tutorial/)

我想查询“烹饪”特定“食谱”的用户列表

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:57:26.077

> I'd like to query for a list of users who have "cooked" a specific "recipe"

AFAIK there is no way to do that; you can only query an individual user for `/me/namespace:action`, to see which actions they have published.

> And I want to get the user that originally created the {object} Also I want to get the users that have took {action} on a specific {object{ etc

Then your best way to go is to save that kind of information to your own database, at the point when these actions happen.

# javascript - nodejs expressjs 上传图片并显示

> ID：12404164
> 
> 赞同：4
> 
> 时间：2012-09-13T10:24:53.037
> 
> 标签：javascript, jquery, node.js, express

我有以下代码

应用程序.js

```
var express = require('express'),
  fs = require('fs'),
  format = require('util').format;

var app = express();

app.configure(function() {
  app.use(express.bodyParser());
  app.use(express.bodyParser({uploadDir:'./static/files/'}))
  app.use(express.methodOverride());
  app.use(express.static(__dirname + '/static'));
  app.use(express.errorHandler({
    dumpException: true,
    showStack: true
  }));
});
app.set('views',__dirname + '/views');
app.set('view engine', 'jade'); 
```

好的，那么我有这条路线

```
app.post('/addPhoto', products.addPhoto); 
```

这种形式

```
form(action='/new', method='POST', enctype="multipart/form-data")
 input(type='text', name="name", placeholder='nanme')
 input(type='text', name="description",placeholder='description')
 input(type='text', name="thumbnail_img",placeholder='path')
 input(type='number', name='price', placeholder='123')
 input(type="file", name="thumbnail")    
 input(type='submit') 
```

我绝望地使用 thumbnail_img 来修改路径

现在在 products.js

```
var products = exports.products = [];

var format = require('util').format;
var  fs = require('fs');

products.push(
  {  id:0,
     name:'name 1',
     description:'description1',
     thumbnail_img: '',
     price: 100 },
  {  id:1,
     name: 'name_2',
     description: 'description2',
     thumbnail_img: '',
     price: 150
  }
);

 exports.addPhoto = function(req,res){
  var body = req.body;
  var tmp_path = req.files.thumbnail.path;
  var target_path = './static/files/' + req.files.thumbnail.name;

  fs.rename(tmp_path, target_path, function(err) {
    if (err) throw err;
    fs.unlink(tmp_path, function() {
    body.thumbnail_img =  target_path;
      if (err) throw err;
    });
  });

  var body = req.body;

 // Fun here is I got a path starting with a .
 // so this code is for remove the .    

  var n = target_path.toString()
  var n2 = n.replace('.','');
  body.thumbnail_img =  n2;

  products.push(req.body);
  res.redirect('/products');
 }; 
```

问题是当我使用模板显示产品时，src 属性显示如下，`src="./static/files/name-fo-the-pics"`所以我如何显示我上传的图像

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T07:29:44.130

在这种情况下，您可以做的是获得存储文件的目标路径并将其保存到数据库中。

使用此方法上传

```
app.post('/upload', function(req, res) {

    // get the temporary location of the file
    var tmp_path = req.files.thumbnail.path;
    // set where the file should actually exists - in this case it is in the "images" directory
   target_path = '/tmp/' + req.files.thumbnail.name;
    // move the file from the temporary location to the intended location
    fs.rename(tmp_path, target_path, function(err) {
        if (err) throw err;
        // delete the temporary file, so that the explicitly set temporary upload dir does not get filled with unwanted files
        fs.unlink(tmp_path, function() {
            if (err) throw err;

        });
    });
}); 
```

在检索时显示此方法中的路径

```
fs.readFile(target_path, "binary", function(error, file) {
    if(error) {
      res.writeHead(500, {"Content-Type": "text/plain"});
      res.write(error + "\n");
      res.end();
    } else {

      res.writeHead(200, {"Content-Type": "image/png"});
      res.write(file, "binary");

    } 
```

它应该工作。

# python - 如何从 python 知道 sftp 中的当前工作目录

> ID：12404168
> 
> 赞同：4
> 
> 时间：2012-09-13T10:25:03.067
> 
> 标签：python, operating-system, sftp, paramiko

我已经用一些细节连接到 sftp 以从 python 中使用 paramiko 获取一些文件，代码如下

```
import paramiko
import os
import ftplib

ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy( paramiko.AutoAddPolicy() )
ssh.connect('sftp.example.com', username='user', password='pass')
ftp = ssh.open_sftp()
files = ftp.listdir()
print files,"----< Total files"
print ftp.cwd(),"---< Current working diectory"

for feedFile in files:
    if feedFile == 'LifeBridge':
        ftp.chdir(feedFile) 
```

**结果**

```
['Emerson', 'Lehighvalley', 'LifeBridge', 'stmaryct'] ----< Total files

File "test_sftp.py", line 11, in <module>
    print ftp.cwd()   ---< Current working diectory
AttributeError: 'SFTPClient' object has no attribute 'cwd' 
```

我在这里做的是

1.  试图找到 sftp 的当前工作目录

2.  作为打印文件的结果，上面有一个文件列表，我正在尝试检查它们是文件夹还是文件，如果它们是我想输入到 文件夹中的`LifeBridge`文件夹

最后谁能告诉我以下

1.  如何查看 sftp 的当前工作目录
2.  如何检查上述列表的结果是文件还是文件夹

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T10:30:05.347

您正在寻找该[`.getcwd()`方法](http://www.lag.net/paramiko/docs/paramiko.SFTPClient-class.html#getcwd)：

> 返回此 SFTP 会话的“当前工作目录”，由 paramiko 模拟。如果没有设置目录`chdir`，则此方法将返回`None`。

因此，在会话开始时，如果您需要当前工作目录，请先尝试`.chdir('.')`（更改到当前目录）。

该`.listdir()`方法仅返回目录中项目的名称。如果您需要有关这些文件的更多信息，则需要使用该[`.listdir_attr()`方法](http://www.lag.net/paramiko/docs/paramiko.SFTPClient-class.html#listdir_attr)，它会返回一个[`SFTPAttributes`实例](http://www.lag.net/paramiko/docs/paramiko.SFTPAttributes-class.html)列表。

一个实例通过属性`SFTPAttributes`告诉你文件有什么模式。`.st_mode`使用该[`stat.S_ISDIR(mode)`函数](http://docs.python.org/library/stat.html#module-stat)测试文件是否为目录。

# iphone - UITextField 在输入时给出建议

> ID：12404170
> 
> 赞同：0
> 
> 时间：2012-09-13T10:25:08.177
> 
> 标签：iphone, ios, uitextfield

就像在谷歌中我们写“ahe”它会显示如下截图所示的建议。当我们打字时，我的 iPhone UITextField 怎么可能？？？![在此处输入图像描述](../Images/980232d7ad11a37b01255f2f64005b44.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:41:25.497

添加自我委托方法，当您的文本字段发生任何变化时将调用该方法。

```
[yourTextField addTarget:self action:@selector(textFieldDidChange) forControlEvents:UIControlEventEditingChanged];

- (void)textFieldDidChange
{
    //you may need to call [resultArray removeAllObjects] to get fresh list of cities here.
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"City like[cd] %@",[NSString stringWithFormat:@"*%@*", yourTextField.text]];
    resultArray = [[cityArray filteredArrayUsingPredicate:predicate] mutableCopy];
} 
```

PS在这里，`cityArray`包含城市列表，并`resultArray`返回过滤后的城市列表类型`NSMutableArray`。此外，在`NSPredicate`City 是我正在执行搜索操作的字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T11:10:07.217

你试试这个：

[https://github.com/keyf/AutocompletionTableView/downloads](https://github.com/keyf/AutocompletionTableView/downloads)

而这也——

最简单的方法是创建一个方法并将其与带有事件 UIControlEventEditingChanged 的​​ UiTextfield 连接，这将为您提供在文本字段中输入的每个字符的跟踪。

```
[self.selectedTextField addTarget:self action:@selector(enterInLabel ) forControlEvents:UIControlEventEditingChanged];

-(void)enterInLabel 
{ 
selectedLabel.text=selectedTextField.text;
} 
```

# jakarta-ee - JavaEE、PrimeFaces、某种“h:link”验证

> ID：12404178
> 
> 赞同：1
> 
> 时间：2012-09-13T10:25:57.857
> 
> 标签：jakarta-ee, primefaces

我很抱歉这个基本问题，但我在这里有点麻烦......我有以下treeTable：

```
<p:treeTable id="tree" value="#{things.allThings}" var="item">
    <!-- some <p:column> and stuff -->
    <!-- now the important one -->
    <p:column>
        <h:link id="stuff" outcome="stuffList" value="Stuff">
             <f:param name="type" value="things"/>
             <f:param name="id" value="#{item.id}"/>
        </h:link>
    </p:column> 
```

我需要的是隐藏链接`#{item.id} != "5"`，例如。或某种验证，例如`show h:link only if #{item.id} == "5"`

是否存在 h:link 的标签或类似的东西来实现它？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:34:02.700

使用`rendered`属性`<h:link>`

例子

```
<h:link id="stuff" outcome="stuffList" value="Stuff" rendered="#{item.id ne 5}"/> 
```

# php - 试图填充数据库，因为插入，cakephp 不保存

> ID：12404179
> 
> 赞同：0
> 
> 时间：2012-09-13T10:26:01.640
> 
> 标签：php, mysql, cakephp

我有一个 csv 脚本，它接受 csv 记录并导入到 mysql 数据库中。问题是 cakephp 没有成功保存数据，而 cakephp 没有给出任何验证错误。如果我从保存中删除 parent_id 或 id，那么它会成功导入所有记录，但是当我添加 id 和 parent id 列时，它会返回不保存。有时它会添加第一条记录然后停止。当我浏览代码时，cake 正在尝试查找已经存在的记录。即使存在现有 ID，我也希望它进行插入。

```
public function admin_uploadTopics() {
    $enabled = true;        
    if($enabled) {
        $response = array();
        $response['success'] = 0;
        $response['failure'] = 0;
        //Represents a record set row number
        $cr = 0;
        //will hold each column field name      
        $field = array();
        //variable that will store the entire record set
        $d = array();
        //opens csv file
        if (($handle = fopen(APP."../topics", "r")) !== FALSE) {
            //loops through each line
            while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
                $num = count($data);
                //creates a row             
                $d[$cr] = array();
                for ($c=0; $c < $num; $c++) {
                    //if this is the first r, gather the field names
                    if($cr == 0) {
                        $field[$c] = $data[$c];
                    } else {//else gather the data
                        if($c == 0) {
                            $d[$cr]['Topic'] = array();
                        }//this constructs a array that puts the data with the correct field name
                        //this is the second row (1) but I want it to begin at 0 so I do cr-1
                        $d[$cr-1]['Topic'][$field[$c]] = $data[$c];                         
                    }
                }
                if($cr) {
                    //reset model
                    $this->Topic->create();
                    //save the row
                    //$d[$cr-1]['Topic']['id'] = '';
                    //$d[$cr-1]['Topic']['parent_id'] = '';
                    if($this->Topic->save($d[$cr-1], false)) {
                        $response['success'] += 1;
                    } else {
                        $response['failure'] += 1;
                    }                       
                }
                //create new record row 
                $cr++;
            }
            fclose($handle);
        }
        echo "There were ".$response['failure']." errors and ".$response['success']." success when resetting.";
        exit();         
    }
    exit();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:43:15.920

试试这个保存

```
if($this->Category->save($data, false)) {
        echo "Saved!<br/>";
    }
    else{
        pr($this->validateErrors($this->Category));

    } 
```

你也需要看看这个数组。

```
$t = array(
        'id'=>(isset($cat['id'])?$topic['id']:""),
        'parent_id'=>(isset($topic['parent_id'])?$topic['parent_id']:""),
        'lft'=>(isset($cat['lft'])?$topic['lft']:""),
        'rght'=>(isset($cat['rght'])?$topic['rght']:""),
        'name'=>(isset($cat['name'])?$topic['name']:""),
        'description'=>(isset($cat['description'])?$topic['description']:""),
        'is_active'=>(isset($cat['is_active'])?$topic['is_active']:""),
        'zin_members_only'=>(isset($cat['zin_members_only'])?$topic['zin_members_only']:""),
        'not_show_submit_request_link'=>(isset($topic['not_show_submit_request_link'])?$cat['not_show_submit_request_link']:"")
    ); 
```

**您在这些行中多次使用 $topic 但我找不到 $topic 来自哪里**

# ruby-on-rails - Capistrano：运行 cap deploy:install ROLES=role1 在 role1 服务器上运行所有任务

> ID：12404180
> 
> 赞同：1
> 
> 时间：2012-09-13T10:26:03.170
> 
> 标签：ruby-on-rails, deployment, capistrano

我有一个简化的 capistrano 部署设置，看起来像这样：

```
server "server_ip1", :role1
server "server_ip2", :role2 
```

还有一对任务

```
namespace :postgresql do
  desc "Install necessary ubuntu packages"
  task :install, roles: [:role2] do
    run "#{sudo} apt-get -y install postgresql libpq-dev"
  end
  after "deploy:install", "postgresql:install"
end

namespace :app_install do
  desc "Install necessary ubuntu packages"
  task :install, roles: [:role1, :role2] do
    run "#{sudo} apt-get -y install imagemagick"
  end
  after "deploy:install", "app_install:install"
end 
```

现在的问题是，如果我运行`cap deploy:install ROLES=role1`它正确运行 server_ip1 上的任务，但它同时运行任务 app_install:install 和 postgresql:install

有趣的是，如果我运行`cap deploy:install`（没有 ROLES=role1），它会“正确”完成所有操作。

我有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:05:07.117

这解决了我的问题[如何使用 Capistrano 部署到单个特定服务器](https://stackoverflow.com/questions/429816/how-to-deploy-to-a-single-specific-server-using-capistrano)

# asp.net - 页面上有多个类似 Facebook 的按钮

> ID：12404181
> 
> 赞同：0
> 
> 时间：2012-09-13T10:26:04.143
> 
> 标签：asp.net, facebook

我正在制作一个在单个页面上包含 10 多种产品的网站。问题是我如何为每个产品添加一个类似 Facebook 的按钮，以及我将如何管理它们。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T06:00:14.120

我有一段时间遇到了麻烦，所以我做了一个工具来帮助它。它将存储所有打开的图形信息并为您生成类似的按钮代码。试试看，让我知道它是否适合你。

[Facebook/Open Graph Like 按钮生成器](http://o-e.us/fb/lbg)

# objective-c - Objective-C C 风格函数

> ID：12404187
> 
> 赞同：4
> 
> 时间：2012-09-13T10:26:22.270
> 
> 标签：objective-c, c

在做objective-c时，我是否必须写出如下函数：

```
- (int) someFunction: (int) a someParam: (int) b; 
```

或者我可以使用常规的 C 风格：

```
void someFunction(int a, int b); 
```

如果我可以做 C 风格，那么用 Objective-C 风格做有什么好处吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T10:30:11.673

如果你愿意，你可以使用常规的 C 函数，因为 Objective-C 只是 C 的超集。

如果你想使用 Objective-C 的特性，比如类、消息、继承等，你需要使用 Objective-C 语法，当然还要使用 Cocoa/CocoaTouch SDK。

您可以在文件中混合使用 Objective-C 和 C 代码，并让 Objective-C 方法调用纯 C 函数。`objc_msgSend`您还可以通过直接访问Objective-C 运行时层（例如，使用函数）从纯C 函数调用Objective-C 方法。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-13T10:30:40.037

这不是 Objective-C 函数，而是一种方法。它可以访问实例的变量和其他方法。两者不等价。在大多数情况下，您应该使用 Objective-C 方法。为什么要使用 C 函数？你想做什么？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T10:31:34.397

第一条语句是方法声明，第二条语句是函数。它们是完全不相关的两件事。两者都在 Objective-C 中被接受。但是方法声明只能发生在`@interface` `@end`. 并且函数声明不能​​发生在两者之间`@interface` `@end`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-05T17:20:28.753

两者的区别是泛型方法和实例方法的区别。第一个例子是一个泛型方法。它可以从任何地方调用（只要编译器可以找到它）并且不需要任何对象的实例。如果您使用过 CGPointMake(x,y) 之类的方法，这些方法将设置为通用（C 风格）方法。

```
someFunction(4,5); 
```

第二种是实例方法。它仅在一个类内部定义，开头的 - 表示您必须拥有该类的实例才能调用该方法。所以

```
Foo *myFoo = [[Foo alloc] init];
[myFoo someFunction:4 someParam:5]; 
```

我倾向于将第一种样式用于不一定属于一个类或另一个类的简单实用方法，例如数学或点操作方法。您的大多数方法可能应该是实例方法，但这是一个更长的答案（面向对象的设计）。

# mysql - mySQL - 从某个用户的 1 个表中选择第一行和最后一行数据

> ID：12404189
> 
> 赞同：0
> 
> 时间：2012-09-13T10:26:28.447
> 
> 标签：mysql, database

我有一个包含许多数据行的表，其中有一列填充了日期。我需要在两个日期之间选择他们的第一行和最后一行。

**示例：**
评分表：

```
id      userId       value1         value2        date
1       1            1              2             2012-09-01 00:00:00
2       1            5              8             2012-09-03 00:00:00
3       1            7              11            2012-09-04 00:00:00
4       1            9              14            2012-09-05 00:00:00 
```

我需要获取 userId 1 的日期 2012-09-02 00:00:00 和 2012-09-04 00:00:00 之间的值 value1 和 value2。

期望的结果应该是：

```
userId    value1_old    value2_old    value1_new    value2_new
1         5             8             7             11 
```

_old 值应包含较早的数据，但最接近日期 2012-09-02 00:00:00。
值 _new 应包含较早的数据，但最接近日期 2012-09-04 00:00:00

问题是，我如何获取这些数据？我不知道如何让它工作。

在此先感谢，
马克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T10:32:23.603

```
SELECT   t.userId,
         first.value1 AS value1_old,
         first.value2 AS value2_old,
          last.value1 AS value1_new,
          last.value2 AS value2_new
FROM     (
  SELECT   userId, MIN(date) AS first, MAX(date) AS last
  FROM     Score
  WHERE    userId = 1
       AND date BETWEEN '2012-09-02 00:00:00' AND '2012-09-04 00:00:00'
) t
    JOIN Score first ON first.userId = t.userId AND first.date = t.first
    JOIN Score  last ON  last.userId = t.userId AND  last.date = t.last 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/adfef/1/0)上查看。

# javascript - jQuery 在多维数组/对象中查找匹配值

> ID：12404190
> 
> 赞同：4
> 
> 时间：2012-09-13T10:26:29.680
> 
> 标签：javascript, jquery, multidimensional-array

如何正确编写此脚本，以便我可以匹配对象上的值。

```
var objGroup = [
  { "color": "YELLOW", "number": "11,7,44,22" },
  { "color": "BLUE", "number": "8,20,9" },
  { "color": "GREEN", "number": "12,34,55" }
];
objGroup.map(function (groupNum) {
  if (groupNum.number== "11") {
    alert(groupNum.color);
  } else {
    return null
  }
});​ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T10:37:35.747

这将返回具有包含所提供数字的数字值的对象。

```
var objGroup = [
  { "color": "YELLOW", "number": "11,7,44,22" },
  { "color": "BLUE", "number": "8,20,9" },
  { "color": "GREEN", "number": "12,34,55" }
];

var found = findItem(objGroup, '11');

function findItem(array, value) {
    for (var i = 0; i < array.length; i++) {
        if (array[i].number.split(',').indexOf(value) >= 0) {
           return objGroup[i];
        }
    }
}

if (found) {
    alert(found.color);
} 
```

[http://jsfiddle.net/rVPu5/](http://jsfiddle.net/rVPu5/)

替代使用较新的 .filter 函数，该函数不会被广泛支持：

```
var found = objGroup.filter(function(item) {
    if (item.number.split(',').indexOf('11') >= 0) {
        return true;
    }
    return false;
});

if (found.length > 0) {
    alert(found[0].color);
} 
```

[http://jsfiddle.net/rVPu5/2/](http://jsfiddle.net/rVPu5/2/)

最后 - jQuery 版本：

```
var found = $.map(objGroup, function(item) {
    if (item.number.split(',').indexOf('11') >= 0) {
        return item;
    }
});

if (found.length > 0) {
    alert(found[0].color);
} 
```

[http://jsfiddle.net/rVPu5/3/](http://jsfiddle.net/rVPu5/3/)

# ios - iphone - Xcode 4.5 更新后 UITableView 不滚动

> ID：12404191
> 
> 赞同：0
> 
> 时间：2012-09-13T10:26:34.673
> 
> 标签：ios, xcode, uitableview, cocoa-touch, uikit

我的应用程序有很多`UITableViews`嵌入到`NavigationController`. 在我更新到 Xcode 4.5 GM 后，其中一个表已停止滚动。上面没有任何其他视图。关于什么可能是错的任何想法？

![在此处输入图像描述](../Images/47f24437d5b57c00bfa2059ac1aff210.png)

**更新：**

我的 tableView 上有两个手势识别器来识别左右滑动。如果我删除它们 - tableview 正在滚动......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:55:26.760

看起来这是 Xcode 4.5 中的一个错误 在以编程方式添加手势识别器之后，一切都应该完美运行！

# c# - 时间：2019-06-01 标签：c#chart垂直文本注释

> ID：12404193
> 
> 赞同：4
> 
> 时间：2012-09-13T10:26:38.190
> 
> 标签：c#, charts

我正在向 ac# 折线图添加注释。我想更改文本方向，但看不到任何允许这样做的设置。

```
RectangleAnnotation annotation = new RectangleAnnotation();
annotation.AnchorDataPoint = chart1.Series[0].Points[x];
annotation.Text = "look an annotation";
annotation.ForeColor = Color.Black;
annotation.Font = new Font("Arial", 12); 
annotation.LineWidth = 2;   
chart1.Annotations.Add(annotation); 
```

注释已正确添加到图形中，矩形和文本从左到右运行。我想让它向上和向下运行。关于如何实现这一目标的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T18:31:46.453

您不能使用注释库旋转注释。您必须使用`postpaint`或`prepaint`。[这](http://weblogs.asp.net/stevewellens/archive/2008/12/03/custom-annotate-your-charts.aspx)是一个如何使用 post-paint 事件的好例子。希望这可以帮助。我将包含以下链接中的代码：

```
protected void Chart1_PostPaint(object sender, ChartPaintEventArgs e)
{
if (e.ChartElement is Chart)
{
    // create text to draw
    String TextToDraw;
    TextToDraw = "Printed: " + DateTime.Now.ToString("MMM d, yyyy @ h:mm tt");
    TextToDraw += " -- Copyright © Steve Wellens";

    // get graphics tools
    Graphics g = e.ChartGraphics.Graphics;
    Font DrawFont = System.Drawing.SystemFonts.CaptionFont;
    Brush DrawBrush = Brushes.Black;

    // see how big the text will be
    int TxtWidth = (int)g.MeasureString(TextToDraw, DrawFont).Width;
    int TxtHeight = (int)g.MeasureString(TextToDraw, DrawFont).Height;

    // where to draw
    int x = 5;  // a few pixels from the left border

    int y = (int)e.Chart.Height.Value;
    y = y - TxtHeight - 5; // a few pixels off the bottom

    // draw the string        
    g.DrawString(TextToDraw, DrawFont, DrawBrush, x, y);
} 
```

}

编辑：我刚刚意识到这个例子实际上并没有旋转文本。我知道你必须使用这个工具，所以我将尝试找到一个使用 postpaint 旋转文本的示例。

编辑2：啊。就[在这里](https://stackoverflow.com/questions/4460258/c-rotated-text-align)。基本上您需要使用该`e.Graphics.RotateTransform(270);`属性（该线将旋转 270 度）。

# sitefinity - SiteFinity：将本地文件的内容包含在内容块中的最简单方法是什么？

> ID：12404198
> 
> 赞同：0
> 
> 时间：2012-09-13T10:26:57.597
> 
> 标签：sitefinity

有没有一种简单的方法可以将本地 txt 片段文件的内容包含在 siteFinity 页面的内容块中？有点像旧的 HTML 服务器端包含（我假设这行不通！）

```
 <!--#include virtual="../quote.txt" --> 
```

无论如何要这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:25:02.473

没有内置的方式来显示来自内容块的文件内容。

如果您通过网络服务器公开文件，则可以使用 javascript/jquery 执行此操作，以便可以从客户端访问它，如下所示：[http ://www.c-sharpcorner.com/Blogs/9377/load-text -file-in-javascript.aspx](http://www.c-sharpcorner.com/Blogs/9377/load-text-file-in-javascript.aspx)

如果您需要保护文件，最好的办法可能是创建一个简单的用户控件 (.ascx)，该控件使用 System.IO.File 从服务器读取，然后将此控件注册为小部件以放置在任何页面上。

只要确保您缓存文件，否则它每次都会从文件系统中读取并在您的页面上造成瓶颈。

希望这会有所帮助！

# ruby-on-rails - Rails formtastic - 编辑表单不传递实例以更新控制器中的方法

> ID：12404203
> 
> 赞同：0
> 
> 时间：2012-09-13T10:27:10.860
> 
> 标签：ruby-on-rails, ruby, formtastic

我有一个用于“编辑”现有团队的表格。这是视图：

**/app/views/teams/edit.html.erb**

```
<%= semantic_form_for @team do |f| %>

  <%= f.inputs %>
  <%= f.actions %>

<% end %> 
```

这是控制器的代码：

**/app/controllers/teams_controller.rb**

```
 def edit
    @team = Team.find(params[:id])
  end

  def update
    if @team.update_attributes(params[:team])
      redirect_to @team
    else
      render 'edit'
    end
  end 
```

但是，当我转到 /teams/1/edit 并更改团队名称并单击更新以提交表单时，它给出了错误：**undefined method `update_attributes' for nil:NilClass**

在控制器中更新方法的开头，我做了一个：

```
raise @team.inspect 
```

当我看到@team 在更新方法中被检查为 nil 时，我的怀疑被证明是正确的（即它的值没有通过）。

有谁知道我在这里哪里出错了？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:34:22.230

问题是您需要在更新操作中定义@team，然后才能使用它。只需将此行添加到操作的开头：

```
@team = Team.find(params[:id]) 
```

# c# - 获取每个项目的最大值通用列表

> ID：12404208
> 
> 赞同：1
> 
> 时间：2012-09-13T10:27:22.570
> 
> 标签：c#, linq

我想知道你能不能帮忙。

我有一份信息清单；

ClientNo SequenceNo

这可能包含以下数据：

Cli No : 0000001, seq: 1 Cli No: 0000001, seq:
2 Cli No: 0000001, seq:
3 Cli No: 0000001, seq
: 3
Cli No: 0000002, seq: 1
Cli No: 0000002, seq: 1
Cli No : 0000002, seq: 2
Cli No: 0000002, seq: 2

我想生成一个最大序列号列表。

请注意，根据上面的示例，序列号可以重复多次。

所以我想从示例中得出的列表是：

Cli 号：0000001，seq：3 Cli 号：0000001，seq
：3
Cli 号：0000002，seq：2
Cli 号：0000002，seq：2

我试过了;

```
 var x = criticalNotesData.OrderBy(y => y.ClientNo)
         .ThenBy(z => z.SequenceNo).ToList();
  var m = x.Max(r => r.SequenceNo).ToList(); 
```

但最大值只是提供列表中的最大序列号，而不是每个客户端。

谢谢，

大卫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T10:59:04.477

使用`GroupBy` *两次*然后`OrderByDescending`获取`First`而不是使用`Max`，通过这种方式，您不需要*创建新对象*并且仍然*可以获得重复的最大项目*

```
var result = criticalNotesData.GroupBy(x => x.ClientNo)
                              .SelectMany(g => g.GroupBy(y => y.SequenceNo)
                                                .OrderByDescending(gg => gg.Key)
                                                .First()
                                           ); 
```

结果将正是您想要的：

```
Cli No: 0000001, seq: 3 
Cli No: 0000001, seq: 3 
Cli No: 0000002, seq: 2 
Cli No: 0000002, seq: 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:32:11.870

你需要 GroupBy

```
var maxItems = criticalNotesData.GroupBy(p => p.ClientNo)
                                .Select(r => r.Max(q => q.SeqNo)); 
```

像这样的东西。
或者

```
var maxItemsClientWise = from p in criticalNotesData
                           group p by p.ClientNo into r
                           select new { MaxSeq = r.Max(g => g.SeqNo), 
                                        Client = r.First().ClientNo }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T10:32:34.967

我不能尝试，但我认为这应该可行！

```
var m = x.GroupBy(r => r.ClientNo).Select(g => g.Max(x => x.SequenceNo)); 
```

编辑：了解客户：

```
var m = x.GroupBy(r => r.ClientNo).Select(g => new { ClientID = g.Key, Max = g.Max(x => x.SequenceNo) }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T10:41:44.540

您可以使用以下查询根据您的条件获取类对象的列表。

```
var query = (from t in list
            group t by t.CliNo into tgroup
            select new ClientSequence
            {
                CliNo = tgroup.Key,
                seq = tgroup.Max(r => r.seq)

            }).ToList(); 
```

假设您的类结构是：

```
class ClientSequence
{
    public string CliNo { get; set; }
    public int seq { get; set; }
} 
```

你的清单是：

```
List<ClientSequence> list = new List<ClientSequence>
       {
           new ClientSequence{ CliNo= "0000001", seq= 1},
           new ClientSequence{ CliNo= "0000001", seq= 2},
           new ClientSequence{ CliNo= "0000001", seq= 3},
           new ClientSequence{ CliNo= "0000002", seq= 1},
           new ClientSequence{ CliNo= "0000002", seq= 1},
           new ClientSequence{ CliNo= "0000002", seq= 1},
           new ClientSequence{ CliNo= "0000002", seq= 2},
           new ClientSequence{ CliNo= "0000002", seq= 2},
   }; 
```

输出：

```
foreach (ClientSequence cs in query)
{
    Console.Write("Client No.: " + cs.CliNo);
    Console.WriteLine(" Max Sequence No.: " + cs.seq);
} 
```

它会打印

```
Client No.: 0000001 Max Sequence No.: 3
Client No.: 0000002 Max Sequence No.: 2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T10:34:14.270

对于每个“客户”条目，您希望知道最高序列。因此，这意味着结果应该是一个序列（每个客户端），而不是 Max 返回的单个值。怎么样：

```
var maxSequence = criticalNotesData
      .GroupBy(n => n.ClientNo)
      .Select(g => new { Client = g.Key, Max = g.Max(i => i.SequenceNo) } );

foreach ( var entry in maxSequence )
{
    Console.WriteLine("Client {0} has max sequence of {1}", 
                      entry.Client, entry.Max); 
}

// Looking at your original, you now want only to know the (from the original)
// the entries matching MAX.  Since you now know the max per client, a second
// operation is needed.
var maxValueEntries = criticalNotesData
        .Where(n => maxSequence
                      .Single(c => c.Client == n.Client)
                      .Max == n.SequenceNo)); 
```

`maxValueEntries`正在进行大量查找，因此值字典可能会更好。

```
// Turning the original into a Dictionary of clientNo returning the 
// max sequence.
var maxSequence2 = criticalNotesData
      .GroupBy(n => n.ClientNo)
      .Select(g => new { Client = g.Key, Max = g.Max(i => i.SequenceNo) } )
      .ToDictionary(c => c.Client, c => c.Max);
var maxValueEntries2 = criticalNotesData
        .Where(n => maxSequence2[n.Client] == n.SequenceNo)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-13T22:04:02.413

假设这样的数据：

```
var list = new []
{
    new { CliNo= "0000001", SeqNo= 1 },
    new { CliNo= "0000001", SeqNo= 2 },
    new { CliNo= "0000002", SeqNo= 1 },     
    new { CliNo= "0000001", SeqNo= 3 },
    new { CliNo= "0000001", SeqNo= 3 },
    new { CliNo= "0000002", SeqNo= 1 },
    new { CliNo= "0000002", SeqNo= 1 },
    new { CliNo= "0000002", SeqNo= 2 },
    new { CliNo= "0000002", SeqNo= 2 },
}; 
```

你可以使用这个：

```
var output = 
    from i in list
    orderby i.CliNo, i.SeqNo
    group i by i.CliNo into g
    let max = g.Max(x => x.SeqNo)
    from r in g where r.SeqNo == max
    select r; 
```

我在评论中所说的仍然有效，数据的初始顺序很重要，在这段代码中我采用了一般方法，但是如果您对初始顺序有保证，那么如果您的来源有其他策略可以更有效数据很昂贵。

# sql - MS Access 中的数据库设计

> ID：12404211
> 
> 赞同：0
> 
> 时间：2012-09-13T10:27:36.140
> 
> 标签：sql, ms-access

我有一个包含 3 个表的 Access 数据库：

**客户经理**

```
ID | Name | Office | Email | EmployeeID 
```

**客户**

```
ID | Name | EmployeeID 
```

其中`EmployeeID`表示负责的客户经理。到现在为止还挺好。

现在我还有 Table3（任务），其中注册了有关客户的工作。

**任务**

```
ID | Client Name | Task | Date | EmployeeID 
```

我的问题是，当`Clients`表格更新（客户获得新的客户经理）时，`EmployeeID`与此客户相关的所有任务 i Table3 都会更新为新的 EmployeeID。

是否可以在表格之间“链接”？或者你会建议任何其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T10:30:33.907

表 3 中没有 Client Name 和 EmployeeID，而是使用 ClientID。

# c++ - 单元测试浮点信号处理库时的错误界限

> ID：12404214
> 
> 赞同：1
> 
> 时间：2012-09-13T10:27:42.683
> 
> 标签：c++, unit-testing, floating-point, signal-processing

我有一个符合规范的信号处理库。但是，我已经确定了一些重构的好地方。一段时间以来，我一直打算将单元测试纳入我的工作流程，这看起来是一个尝试非平凡代码的好机会。这样我就可以测试重构后的输出是否几乎相同。

我正在尝试将[catch](http://www.levelofindirection.com/journal/2010/12/28/unit-testing-in-c-and-objective-c-just-got-easier.html)作为测试框架，但是，这个细节可能无关紧要，因为（据我所知）所有测试框架都取决于操作员的结果，即

```
REQUIRE(i_x == 2) 
```

但是，对于浮点数据，需要某种形式的错误边界检查。.

```
const float target = 2.000f;
const float tolerance = 0.000005f;
const float err = target*tolerance;
REQUIRE( (f_x > target-err) && (f_x < target+err) ) 
```

对于每个编写的测试，这很快就会变得很难看，所以我当然可以创建一个（模板化的）全局函数，它返回一个`bool`给定的`x`,`target`和`tolerance`作为参数。

这是其他人都这样做的方式吗？这是最佳实践还是我错过了一个技巧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T14:14:31.480

测试对上下文高度敏感。您提出的测试测试相对误差。本质上，您是在断言，在这种特殊情况下：

*   正常的、可接受的代码更改可能会在每个结果中产生相对于结果而言很小的偏差。
*   错误很可能会产生相对于结果而言不小的偏差。

总的来说，我认为第二个断言通常是安全的。“随机”代码更改可能会至少在某些值上产生巨大差异。但是，可能有一些应用程序可以很好地处理浮点数，在这种情况下，小的偏差可能会导致超出规范的结果。例如，假设您有一个反正弦例程，它返回的结果与正确结果仅略有不同：当正确结果为 1 时，它返回 1+2 ^(-23)。稍后，此结果 x 用于表达式，例如`sqrt(1-x*x)`. 这个表达式对于所有数学上正确的反正弦值（对于实数输入）都是实数，但是，给定一个略大于 1 的 x，它会尝试取负数的平方根，并且会发生错误。所以你必须决定第二个断言是否适合你的应用程序。

第一个断言更值得怀疑。浮点运算中的误差源并不总是与最终结果成正比。例如，考虑对某些输入信号进行离散傅里叶变换 (DFT)。对于几乎每个输出数字，每个输入数字都贡献了一部分。偶然地，一些单独的输出数字将接近于零。但是，它们中的错误可能与输入中的大量数字成正比。因此，对此类输出数字应用相对误差测试将产生错误的错误指示。相反，有必要允许输入以某种方式缩放错误。

# eclipse - Eclipse：“Run as”不显示列表元素（例如“Run as android application”）

> ID：12404216
> 
> 赞同：10
> 
> 时间：2012-09-13T10:27:44.373
> 
> 标签：eclipse, runas

今天早上我更新了我的 Ubuntu 版本，现在我无法从 Eclipse 运行我的应用程序。

问题是当我单击“运行方式”时出现的列表是空的，我无法运行任何东西。

我该如何解决这个问题？

我能看到的唯一错误，告诉我：

```
An internal error occurred during: "Compute launch button tooltip".
org/eclipse/cdt/core/model/CoreModel 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-13T12:56:25.657

运行命令：

```
sudo apt-get --reinstall install tzdata-java 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:35:47.010

这是因为 Eclipse 没有检测到您的应用程序目标，如果安装的 Eclipse 支持您要运行的内容，您可以从“运行方式 -> 运行配置...”访问它，然后选择您要运行的应用程序目标并配置它，它需要一些应用程序设置，以满足应用程序的需要。

# extjs - 未显示 rootVisible = true 的树形面板

> ID：12404227
> 
> 赞同：2
> 
> 时间：2012-09-13T10:28:22.440
> 
> 标签：extjs, root, extjs4.1, treepanel

我的树在使用时正确显示`rootVisible: false`。但是将其设置`true`为不会导致树显示并且不会出现错误。

`/`我的目标是显示一个我可以定义为或的根节点`Root`。如何做到这一点？

* * *

我的解决方案：

放入并将其添加`rootVisible`到`true`我的树店：

```
root: {
               id       : '/',
               expanded : false,
               name     : '/',
               type     : 'folder',
               path     : '/',
               root     : true
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T10:46:40.017

默认情况下，根节点的名称是`Root`。但是您可以指定任何其他名称。

```
var store = Ext.create('Ext.data.TreeStore', {
    root: {
        text: "/",
        expanded: true,
        children: [
            { text: "detention", leaf: true },
            { text: "homework", expanded: true, children: [
                { text: "book report", leaf: true },
                { text: "alegrbra", leaf: true}
            ] },
            { text: "buy lottery tickets", leaf: true }
        ]
    }
});

Ext.create('Ext.tree.Panel', {
    title: 'Simple Tree',
    width: 200,
    height: 150,
    store: store,
    rootVisible: true,
    renderTo: Ext.getBody()
}); 
```

如果这没有帮助，请从服务器、TreeStore、阅读器发送的数据中发布更多代码。

# android - 这是否可以通过编程方式添加和配置交换帐户

> ID：12404230
> 
> 赞同：1
> 
> 时间：2012-09-13T10:28:42.153
> 
> 标签：android, exchange-server, accountmanager, accounts

在android上，我们可以通过settings->Account&sync->add account->Corporate手动添加账户，然后我们填写字段并添加账户。

我想以编程方式执行此操作。我在互联网上搜索但没有找到任何方法来做到这一点。

我发现了两个帖子（[http://code.google.com/p/android/issues/detail?id=21233](http://code.google.com/p/android/issues/detail?id=21233) 和[Android 如何以编程方式添加/配置 Exchange 设置？](https://stackoverflow.com/questions/4056043/android-how-to-add-configure-exchange-setting-programmatically)），之后看起来这是不可能的。 ..但是有人知道怎么做吗？

我们可以通过 Intent Settings.ACTION_ADD_ACCOUNT 以编程方式打开屏幕设置->帐户&同步->添加帐户。我也可以以某种方式填写这些字段吗？

有这样做的意图吗？或者我可以以某种方式使用客户经理吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T14:33:32.013

我也遇到过这个问题，我得到的唯一答案是对于 Android 3.0 及更高版本是否，而对于 2.3 及更低版本则不是。

*   对于平台 2.3 及更低版本，您可以使用 Exchange 帐户创建屏幕的参数调用意图，因此将填写所有字段。

    ```
    //Gingerbread and lower
    ComponentName localComponentName = new ComponentName("com.android.email", "com.android.email.activity.setup.AccountSetupBasics");
    Intent exchangeIntent = new Intent("android.intent.action.MAIN");
    exchangeIntent.putExtra("com.android.email.AccountSetupBasics.username", mUserName);
    exchangeIntent.putExtra("com.android.email.AccountSetupBasics.password", mPassword);
    exchangeIntent.putExtra("com.android.email.extra.eas_flow", true);
    exchangeIntent.setComponent(localComponentName);
    exchangeIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
    ```

    *（此代码基于我在堆栈交换中找到的答案，但我无法再次找到它以供参考）*

    您必须了解此解决方案不适用于没有默认电子邮件客户端的设备。

    我认为这个解决方案是一种 hack 而不是真正的解决方案，但这就是我发现的。

*   从 HoneyComb 开始，交换帐户创建屏幕已更改，它不再从意图中获取这些参数，因此此解决方案不适用，我找不到任何其他方法。

*   我尚未实施的另一个解决方案是使用第 3 方电子邮件客户端，该客户端提供创建、删除或修改交换帐户所需的 API

希望我有所帮助

# jquery - 在图像悬停时激活文本悬停

> ID：12404233
> 
> 赞同：-1
> 
> 时间：2012-09-13T10:28:48.913
> 
> 标签：jquery, hover

项目的标题在悬停时有一个边框底部，我希望当我将鼠标悬停在项目的图像上时它也会显示，而不仅仅是当我将鼠标悬停在文本上时。

我尝试使用 css 没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:37:28.080

您可以使用 jQuery 悬停事件。在悬停图像时，您可以在回调中使用以下代码：

```
$(".link1").css("text-decoration","underline"); 
```

# mysql - 如何在 MySQL 数据库中存储货币符号？

> ID：12404234
> 
> 赞同：0
> 
> 时间：2012-09-13T10:28:49.147
> 
> 标签：mysql, unicode

我想存储所有国家使用的所有国家和货币。为此，我将表创建为：

```
 ______________________________________
|countries                             |
|--------------------------------------| 
|id pk, ai                             |
|currency_id fk references 'currencies'|
|country                               |

 ____________
|currencies  |
|------------|
|id pk,ai    |
|currency    |
|code        |
|symbol      | 
```

在货币表中，我将货币符号存储为美元，例如 $。我从 PHPMyAdmin 3.4.5 插入值。它适用于 $、€ 等符号。但是当我插入阿富汗或马其顿的符号时，插入的值显示为 ??? 在符号列中。我怎样才能解决这个问题？请提出方法来做到这一点。我应该存储实际角色还是其他技术？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T10:42:06.227

你必须检查你的表`collations`和`character sets`数据库，它们必须匹配，对于你的问题，你必须使用`utf8_general_ci` [帮助](http://dev.mysql.com/doc/refman/5.1/en/charset-connection.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:32:37.510

我只是猜测您可能已经使用默认字符集创建了表。表应该有字符集 UTF 8。

此外，是否有可能正确插入了值，但 phpmyadmin 未正确显示？（我从未使用过phpmyadmin）

# java - Android OpenGL-ES 删除 2 个纹理之间的 alpha 通道

> ID：12404237
> 
> 赞同：0
> 
> 时间：2012-09-13T10:28:56.980
> 
> 标签：java, android, opengl-es

我有一类我的方形图。当我绘制这个正方形 2 次时，它会在它们之间创建 alpha 通道。这是图片：[http](http://dl.dropbox.com/u/25397982/Screenshot_2012-09-13-16-21-22.png) ://dl.dropbox.com/u/25397982/Screenshot_2012-09-13-16-21-22.png那么如何解决这个错误呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:35:33.700

您可以在绘制正方形之前禁用 Alpha 混合。您可以通过在 gldraw 调用之前添加行 glDisable(GL_BLEND) 来做到这一点。

# nhibernate - NHibernate 3.3.1 显式多态

> ID：12404239
> 
> 赞同：4
> 
> 时间：2012-09-13T10:29:10.163
> 
> 标签：nhibernate

我使用 NH 3.3.1。假设简单的类：

```
public class TestBase
{
    public virtual int Id { get; set; }

    public virtual string A { get; set; }
}

public class Test : TestBase
{
    public virtual string B { get; set; }
} 
```

和他们的映射：

```
public sealed class TestBaseMap : ClassMap<TestBase>
{
    public TestBaseMap()
    {
        this.Polymorphism.Explicit();
        this.Id(a => a.Id).GeneratedBy.Identity();
        this.Map(a => a.A);
    }
}

public sealed class TestMap :SubclassMap<Test>
{
    public TestMap()
    {
        this.Map(a => a.B);
    }
} 
```

即使指定了 Polymorphism.Explicit()，NH 在查询 TestBase 时仍然离开连接 Test。

```
var a = this.Session.Get<TestBase>(1); 
```

我真的不需要这个加入，因为会有很多子类。我检查了fluent生成的xml。没关系，“显式”条款就在那里。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:58:15.833

我猜想显式多态性仅用于查询，而不用于 session.Get。但我找不到任何参考资料。

* * *

尽量不要查询基类，但总是有一个具体的子类（在大多数情况下这是一个更好的设计）：

```
public abstract class TestBase
{
    public virtual int Id { get; set; }

    public virtual string A { get; set; }
}

public class TestA : TestBase
{
    public virtual string B { get; set; }
}

public class TestB : TestBase
{
    public virtual string B { get; set; }
}

var a = this.Session.Get<TestA>(1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T17:41:08.083

好的。我懂了。正如 Stefan 所说，我制作了抽象的 TestBase。但是由于我确实需要在没有很多左连接的情况下查询 TestBase 表，所以我引入了存根类：

```
public class TestStub : TestBase
{
    // nothing   
} 
```

这个类绝对是空的。地图：

```
public sealed class TestStubMap : SubclassMap<TestStub>
{
    public TestStubMap()
    {
        this.Table("TestBase");
        this.KeyColumn("Id");
    }
} 
```

现在我可以查询：

```
var a = this.Session.Get<TestStub>(1) 
```

它只产生一个连接（TestBase join TestBase）。所以现在我可以从 db 获取我的 TestBase 而无需开销。我不喜欢 hack，但如果内置逻辑不起作用（多态 = 显式），那么剩下要做的事情。

# javascript - ajax（代码）块之后的代码需要延迟

> ID：12404247
> 
> 赞同：0
> 
> 时间：2012-09-13T10:29:45.167
> 
> 标签：javascript, jquery, ajax, datatables

我有一个很长的问题以及我的完整代码，但现在它更短了。

```
 function showRecord(tbl) {
    myDataTable.fnDestroy();
    $.ajax(
    {
        data: "tableName=" + tbl,
        url: "showTable.php",
        dataType: "html",
        success: function (data) { $("#example").html(data); }
    });
    alert('I get desired output as long as I do not comment/remove this alert');
    myDataTable = $('#example').dataTable();
} 
```

**但是**如果我只是评论`alert`我没有从数据库中获取数据

如果我不使用（来自[datatables.net](http://datatables.net)`$('#example').dataTable();`的用于分页的 jquery 插件），那么代码可以在没有警报的情况下正常工作。

```
function showRecord(tbl) {
    //myDataTable.fnDestroy();
    $.ajax(
    {
        data: "tableName=" + tbl,
        url: "showTable.php",
        dataType: "html",
        success: function (data) { $("#example").html(data); }
    });
  //alert('I get desired output as long as I do not comment/remove this alert');
  //myDataTable = $('#example').dataTable();
} 
```

我需要知道为什么在第一个代码示例中需要警报。如果它导致延迟，为什么这里需要延迟以及如何在不使用的情况下实现这一点`alert`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:38:39.707

试试这个。

```
 function showRecord(tbl) {

        //myDataTable.fnDestroy();
        $.ajax(
        {
            data: "tableName=" + tbl,
            url: "showTable.php",
            dataType: "html",
            success: function (data) { 
                $("#example").html(data);
                myDataTable = $('#example').dataTable(); }
        });
      //alert('I get desired output as long as I do not comment/remove this alert');
      //
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T12:42:39.663

Ajax 调用是异步的。在第一个代码块中（如果没有`alert`） ajax 调用被执行，然后立即（在服务器响应之前）执行此行：

```
myDataTable = $('#example').dataTable(); 
```

并且由于服务器没有返回结果还`$('#example')`为空。你可以这样说：

```
function showRecord(tbl) {
    myDataTable.fnDestroy();
    $.ajax(
    {
        data: "tableName=" + tbl,
        url: "showTable.php",
        dataType: "html",
        success: function (data) {
            $("#example").html(data);
            myDataTable = $('#example').dataTable();
        }
    });
} 
```

# java - 实时打印 Runtime.getRuntime().exec() 输出

> ID：12404255
> 
> 赞同：0
> 
> 时间：2012-09-13T10:30:08.147
> 
> 标签：java, runtime.exec, outputstream

我正在编写一个 Java 程序，用于以设定的时间间隔调用 PHP 脚本。PHP 脚本输出大量数据，客户端要求 Java 程序在脚本运行时显示所有 PHP 脚本的输出。

我使用的方法是：

```
Runtime.getRuntime().exec(new String[]{"php", "file.php"}); 
```

然后使用 an`InputStreamReader`来获取输出，主要使用[此处](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html?page=4)的示例。我遇到的问题是流读取器仅在 PHP 脚本退出后才输出数据（考虑到输出是如何循环的，这很有意义）。

我将如何在脚本运行时实时打印脚本的输出？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T10:36:33.790

我通过从一个单独的线程读取输出来做到这一点：

```
 Process p = Runtime.getRuntime().exec(commands);
  final InputStream stream = p.getInputStream();
  new Thread(new Runnable() {
    public void run() {
      BufferedReader reader = null;
      try {
        reader = new BufferedReader(new InputStreamReader(stream));
        String line = null;
        while ((line = reader.readLine()) != null) {
          System.out.println(line);
        }
      } catch (Exception e) {
        // TODO
      } finally {
        if (reader != null) {
          try {
            reader.close();
          } catch (IOException e) {
            // ignore
          }
        }
      }
    }
  }).start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T09:21:10.940

现在我决定接受 Andrew Thompson 的建议：

```
ProcessBuilder builder = new ProcessBuilder(command);
builder.redirectErrorStream(true);
Process process = builder.start();

InputStreamReader istream = new  InputStreamReader(process.getInputStream());
BufferedReader br = new BufferedReader(istream);

String line;
while ((line = br.readLine()) != null){
   System.out.println(line);
}

process.waitFor(); 
```

不过，这仍然不是我想要的，所以现在我没有回答这个问题。

# git - 替换git中一个目录的内容

> ID：12404257
> 
> 赞同：8
> 
> 时间：2012-09-13T10:30:11.703
> 
> 标签：git

想象一下，我有一个包含目录 Dir1 和 Dir2 的存储库，并且我在 branchA 中。

想象一下，我想去掉 Dir2 的内容，并在 master 分支中用 Dir2 替换它们，同时保留 Dir1 的内容。

我不希望这会那么简单，但理想情况下：

```
cd Dir2
git [magic that replaces current dir with the contents of master branch] 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-13T10:36:21.450

从分支中删除并`Dir2`从分支中 获取它：`branchA`
`master`

```
$ git checkout branchA
$ git rm -r Dir2
$ git checkout master -- Dir2
$ git commit -m "replaced Dir with Dir2 from master" 
```

# java - 真正的交互式命令行

> ID：12404258
> 
> 赞同：1
> 
> 时间：2012-09-13T10:30:19.633
> 
> 标签：java

在Java中是否有可能让用户在“按下时”而不是在他点击返回时按下？

因此，例如，如果用户点击 ABC，然后点击`Ctrl`+ `Z`，我希望程序在此处结束（到达流的结尾），而不是在他按下回车键之后。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T11:09:02.473

`Ctrl`当您按下+时，Windows 实际上并没有结束流`Z`；您可以继续编辑该行，当您按下 时，应用程序只会看到流的结尾`Return`。

这与 Unix 略有不同，其中`Ctrl`+会将当前缓冲的行发送到应用程序（没有换行符），并且当您在 a或另一个+之后按+`D`发送空缓冲区时，应用程序只会感知流的结尾。`Ctrl``D``Return``Ctrl``D`

**编辑**：在 Windows 上，您可以使用[SetConsoleMode](http://msdn.microsoft.com/en-us/library/ms686033.aspx)函数来读取单个字符。我不确定你会怎么称呼它；似乎有三个选择：

1.  通过 JNI 到调用 SetConsoleMode 的 DLL
2.  调用调用 SetConsoleMode 的程序
3.  将您的程序包装在调用 SetConsoleMode 的启动器中
4.  **编辑**：使用 JNA 调用 SetConsoleMode。

# jakarta-ee - 使用 maven 的项目的 JBOSS 依赖项

> ID：12404259
> 
> 赞同：4
> 
> 时间：2012-09-13T10:30:20.613
> 
> 标签：jakarta-ee, maven, jboss, jboss5.x

这应该很简单，但无法弄清楚。我有一个使用 Maven 构建的 Web 项目，将部署在 JBOSS-EAP 5.1 服务器上。我应该在我的 pom.xml 中添加什么，以便 Maven 在构建时可以访问 JBOSS EAP 库？

我可以使用特定的依赖项或插件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T16:10:07.093

考虑到 JBoss 是一个 EE 容器，添加 JavaEE 依赖就足够了。

```
<dependency>
    <groupId>javax</groupId>
    <artifactId>javaee-api</artifactId>
    <version>6.0</version>
    <scope>provided</scope>
</dependency> 
```

提供的范围确保应用程序部署到服务器后使用 JBoss 自己的库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T11:08:28.963

您必须首先确定您的项目依赖项到底是什么，并将它们作为依赖项添加到您的`pom.xml`. 现在确定 jboss 可用的所有内容，并确定这些依赖项的范围`<scope>provided</scope>`，使其不与`war`. 在构建期间，maven 必须从 maven 存储库中获取 jars。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T11:32:24.320

AFAIK 这是 EAP 6 的一项功能，即使在那时也是实验性的。[从这里](https://sso.jboss.org/login?service=https%3A%2F%2Fissues.jboss.org%2Fbrowse%2FJBPAPP-1935%3F_sscc%3Dt&gateway=true)和[这里](http://blog.akquinet.de/2012/03/20/jboss-enterprise-maven-repository-available-with-the-enterprise-application-platform-6-beta/)查看更多信息：

> 对先前版本的一个重大改进是，EAP 6 附带了一个 Maven 存储库，其中包括所有与 EAP 相关的 Maven 工件。缺少 maven 存储库是以前 EAP 版本的一大缺点。必须将所需的 Maven 工件从 EAP 分发版手动部署到您自己的本地 Maven 存储库或您的企业 Maven 存储库（如 Nexus 或 Artifactory）中。

所以不，我认为 Jboss EAP 5.X 不存在这样的存储库。

这意味着在实践中，您有以下选择，从最推荐到最不推荐：

*   拥有一个 Intranet 存储库，例如 Nexus 或 Artifactory，并在那里安装这些项目。然后，您可以将它们称为 pom.xml 中的依赖项。推荐使用此选项。
*   仅将它们本地安装到每个开发人员本地 maven 存储库中。您将为此使用 mvn install-file，每个开发人员都需要自己执行此操作。之后，每个依赖项都可以像其他依赖项一样从 pom 中引用。
*   在 pom 上使用系统范围，直接指向存储在硬盘驱动器上某处的库。这将是一个脆弱的设置，很容易破坏。

将库存储在 Intranet 存储库中并使用它应该不会太难。为开发人员提供 Intranet 存储库是您无论如何都应该使用的最佳实践。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-04T18:11:02.957

Jboss 软件包现在（并且已经有好几年了）在

```
 <repository>
            <id>jboss-repository</id>
            <name>JBoss Repository</name>
            <url>https://repository.jboss.org/nexus/content/groups/public-jboss/</url>
        </repository> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-04T15:50:13.167

（*以下是问题中[错误包含](https://stackoverflow.com/revisions/12404259/2)*OP的答案）

我最终所做的是将以下依赖项添加到我的 pom 中：

```
 <dependency>
        <groupId>javax.j2ee</groupId>
        <artifactId>j2ee</artifactId>
        <version>1.5</version>
        <scope>provided</scope>
    </dependency> 
```

不是我所问问题的直接答案（我专门询问了 JBOSS），但它为我提供了我需要编译的所有 Java EE API。我无法使用它运行任何东西，因为它没有实现任何 API - 这是由我的 Java EE 应用程序服务器（在本例中为 JBOSS）提供的。

# web-services - CXF Web 服务客户端 - 调用 Web 服务时未收到数据

> ID：12404261
> 
> 赞同：2
> 
> 时间：2012-09-13T10:30:29.057
> 
> 标签：web-services, soap, cxf

我已经创建了一个客户端来使用 maven 和 CXF 访问 WS，也遵循[这里](http://www.logicsector.com/java/how-to-create-a-wsdl-first-soap-client-in-java-with-cxf-and-maven/)和[这里](http://cxf.apache.org/docs/maven-cxf-codegen-plugin-wsdl-to-java.html)的教程。我已经使用 SoapUI 多次测试了 Web 服务并收到了结果。但是，当我从客户端调用相同的 Web 服务时，我总是得到一个空响应。在 Web 服务端，我观察到响应已正确发送，在 SoapUI 和我的客户端应用程序的情况下。这是在客户端控制台上打印的内容：

```
WS init successful. Service class instantiated.
In servlet Calling service now
Action is -- JAX-WS RI 2.1.6 in JDK 6: Stub for http://172.18.40.131:8080/AccountWithCXF/services/AccountSearchActionPort
In servlet after Calling service. list is -> [] 
```

有人可以帮帮我吗？

以下是 WSDL：

```
<?xml version='1.0' encoding='UTF-8'?><wsdl:definitions name="AccountSearchActionService" targetNamespace="http://webservice/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://webservice/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <wsdl:types>
<schema xmlns="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://webservice/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<import namespace="http://webservice/" schemaLocation="http://172.18.40.131:8080/AccountWithCXF/services/AccountSearchActionPort?xsd=accountsearchaction_schema1.xsd"/>
</schema>
  </wsdl:types>
  <wsdl:message name="getAccountsResponse">
    <wsdl:part element="tns:getAccountsResponse" name="parameters">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="getAccounts">
    <wsdl:part element="tns:getAccounts" name="parameters">
    </wsdl:part>
  </wsdl:message>
  <wsdl:portType name="AccountSearchAction">
    <wsdl:operation name="getAccounts">
      <wsdl:input message="tns:getAccounts" name="getAccounts">
    </wsdl:input>
      <wsdl:output message="tns:getAccountsResponse" name="getAccountsResponse">
    </wsdl:output>
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="AccountSearchActionServiceSoapBinding" type="tns:AccountSearchAction">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="getAccounts">
      <soap:operation soapAction="urn:GetAccounts" style="document"/>
      <wsdl:input name="getAccounts">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getAccountsResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="AccountSearchActionService">
    <wsdl:port binding="tns:AccountSearchActionServiceSoapBinding" name="AccountSearchActionPort">
      <soap:address location="http://172.18.40.131:8080/AccountWithCXF/services/AccountSearchActionPort"/>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions> 
```

我在我的 servlet 的 init() 方法中设置 Web 服务存根

```
public void init() throws ServletException {
   super.init();
   service = new AccountSearchActionService();
   System.out.println("WS init successful. Service class instantiated.");
} 
```

Servlet 中调用 Web 服务的代码段：

```
AccountSearchAction action = service.getAccountSearchActionPort();
System.out.println("Action is -- "+action);
List<Account> list = action.getAccounts(param);
System.out.println("In servlet after Calling service. list is -> "+list); 
```

如果我使用带有搜索查询“express”的 SoapUI 调用此 Web 服务，以下是我得到的响应：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <ns2:getAccountsResponse xmlns:ns2="http://webservice/">
         <ns2:return>
            <accountId>3067822</accountId>
            <accountName>FBB EXPRESS INC.</accountName>
         </ns2:return>
      </ns2:getAccountsResponse>
   </soap:Body>
</soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:39:08.440

最简单的调试方法是捕获请求和响应 XML。

一种方法是发送日志拦截器。

另一种方法是使用 tcpmon 来捕获请求/响应和响应。tcpmon 像代理一样工作 - 将其设置为侦听某个端口，然后将其转发到原始服务主机：端口。使客户端向 tcpmon 端口发送请求。

# magento - 允许在不选择属性的情况下添加可配置产品

> ID：12404270
> 
> 赞同：1
> 
> 时间：2012-09-13T10:30:54.367
> 
> 标签：magento, php

我已经设置了一些带有更改颜色选项的配置产品。目前，我有一个表格，其中显示了所有选项，因此您可以一次添加多个选项，但它还显示属性显示的颜色样本。

问题是，如果没有单击色样，则无法添加到购物车，因此我需要某种方式使 Magento 允许用户在不选择属性的情况下添加到购物车。

我已将属性颜色更改为 Values Required: No 但这还没有解决问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:15:37.917

如果您尝试按照@slayer-birden 的建议预先选择属性选项，则有一个扩展允许我们在配置相关产品时选择默认选项 -[在产品编辑页面上设置预配置值](http://www.magentocommerce.com/magento-connect/set-preconfigured-values-on-product-edit-page-9945.html)

我还没有亲自尝试过，但看起来它会成功。

# php - 如果文件存在则重写扩展名，如果文件不存在则重定向，使用 htaccess

> ID：12404271
> 
> 赞同：1
> 
> 时间：2012-09-13T10:30:58.467
> 
> 标签：php, .htaccess, rewrite

使用 .htaccess，我想将不存在的文件重定向到控制器页面，并将存在的 .php 文件的扩展名重写为 .html 扩展名。如果文件存在并且是 .html 页面，我希望它保持不变。每次我尝试将重写规则从 .php 注入到 .html 时，我似乎都会弄乱到控制器页面的重定向。所以我不确定从这里去哪里：

```
Options -Indexes
Options +FollowSymLinks
DirectoryIndex index.php
ErrorDocument 404 /404.php

<IfModule mod_rewrite.c>
  RewriteEngine on
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} !=/favicon.ico
  RewriteRule ^(.*)$ mycontroller.php [L,QSA]
</IfModule> 
```

任何帮助我将不胜感激。

***编辑***

我似乎在[这里](https://stackoverflow.com/questions/4548860/replacing-php-ext-with-html-through-htaccess)找到了大部分答案（但我必须省略 ReweriteBse 否则它不起作用）。最大的问题是，现在，我现有的 .html 文件不起作用，它只为我的带有 .html 扩展名的 .php 文件提供服务，并将所有其他文件定向到控制器。现有的 .html 文件转到我的 404 页面。我想知道如何保持现有的 .html 文件完好无损。我的新代码如下：

```
 RewriteEngine on

  RewriteCond %{THE_REQUEST} (.*)\.php  
  RewriteRule ^(.*)\.php $1.html [R=301,L]  

  RewriteCond %{THE_REQUEST} (.*)\.html  
  RewriteRule ^(.*)\.html $1.php [L]  

  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} !=/favicon.ico
  RewriteRule ^(.*)$ mycontroller.php [L,QSA] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T16:34:29.527

尝试：

```
<IfModule mod_rewrite.c>
  RewriteEngine on

  # If a request for a php file is made, check that it's actually a php file then redirect the browser
  RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /(.*?)\.php($|\ )
  RewriteCond %{REQUEST_FILENAME} -f
  RewriteRule ^(.*?)\.php$ /$1.html [L,R=301]

  # If a request for an html file is made, check that it's a php file, and if so, serve the php file:
  RewriteCond %{REQUEST_URI} ^/(.*?)\.html$
  RewriteCond %{DOCUMENT_ROOT}/%1.php -f
  RewriteRule ^ /%1.php [L]

  # Everything else goes to the controller
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} !=/favicon.ico
  RewriteRule ^(.*)$ mycontroller.php [L,QSA]
</IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:56:33.087

试试这个（我添加了一个重写条件以避免无限循环，方法是添加参数 r=0 并测试它是否存在）：

```
 RewriteEngine on

  RewriteCond %{QUERY_STRING} ^(.*&)?r=0(&.*)?$
  RewriteRule ^(.*)\.php$ $1.html [L,R=301,QSA]

  RewriteCond %{REQUEST_FILENAME} ^(.*)\.html$
  RewriteCond %1.php -f
  RewriteRule ^(.*)\.html$ $1.php?r=0 [L,QSA]

  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} !=/favicon.ico
  RewriteRule ^(.*)$ mycontroller.php [L,QSA] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T03:29:02.783

我确信有更好的方法可以做到这一点，但以下方法可以满足我的需要。尽管我尝试过，但提供的其他答案似乎不起作用。

```
Options -Indexes
Options +FollowSymLinks
DirectoryIndex index.php
ErrorDocument 404 /404.php

<IfModule mod_rewrite.c>
  RewriteEngine on

  # Check if .html file already exists -- if so, do nothing
  RewriteCond %{REQUEST_FILENAME} -f
  RewriteCond %{THE_REQUEST} (.*)\.html  
  RewriteRule ^.*$ - [NC,L] 

  # Check if .php file already exists -- if so, rewrite extension to .html
  RewriteCond %{REQUEST_FILENAME} -f
  RewriteCond %{THE_REQUEST} (.*)\.php  
  RewriteRule ^(.*)\.php $1.html [R=301,L]  

  RewriteCond %{THE_REQUEST} (.*)\.html  
  RewriteRule ^(.*)\.html $1.php [L]  

  # All else goes to the controller page
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} !=/favicon.ico
  RewriteRule ^(.*)$ mycontroller.php [L,QSA]
</IfModule> 
```

# php - Apache 上的 wkhtmltopdf 进程永无止境

> ID：12404272
> 
> 赞同：1
> 
> 时间：2012-09-13T10:31:04.573
> 
> 标签：php, apache, wkhtmltopdf

我有一个 PHP 脚本来生成带有 wkhtmltopdf 和 xvfb 的 PDF（模拟 X 服务器）。

使用命令行，没有问题。

当这个脚本被合并到我的网站时，wkhtmltopdf 永远不会停止。

我在用

*   阿帕奇 2.4
*   PHP 5.4
*   wkhtmltopdf 0.11.0 rc1

什么会导致这个问题？

# postgresql - postgres 部分索引

> ID：12404275
> 
> 赞同：3
> 
> 时间：2012-09-13T10:31:27.603
> 
> 标签：postgresql, indexing

我有一个大约有 30 列的表， column `a integer not null`，`b boolean not null`其中`c integer not null`包括。并且有一个经常运行的查询`a = 2 and b is true and c = <something>`，即

```
select * from my_table where a = 2 and b is true and c = 3215

```

问题是：我应该在部分索引中包含`a`和`b`列，如下所示：

```
创建索引 idx_my_table_a_b_c
在 my_table 上
使用 btree (a, b, c)
其中 a = 2 且 b 为真；

```

或者我不应该像这样：

```
创建索引 idx_my_table_a_b_c
在 my_table 上
使用 btree (c)
其中 a = 2 且 b 为真；

```

在第一种情况下`explain`输出

```
“在 my_table 上使用 idx_my_table_a_b_c 进行索引扫描（成本=0.00..8.27 行=1 宽度=4007）”
" 索引条件：((b = true) AND (a = 2))"

```

第二`Index cond`部分没有

```
“在 my_table 上使用 idx_my_table_a_b_c 进行索引扫描（成本=0.00..8.27 行=1 宽度=4007）”

```

顺便说一句，这是什么`Index cond`意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T15:09:44.507

如果您的索引谓词是严格相等的，那么在索引中包含谓词列是没有意义的。每个索引条目将具有相同的列值，因此不会有助于索引查找，它们只会减慢插入和查找速度并使索引膨胀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:45:09.703

我的猜测（！）是：在第一种情况下（三列索引），除了现有的“索引条件”之外，需要评估的列位于索引的末尾，因此索引扫描需要以不同的方式评估条件.

在第二种情况下（单列索引），在 where 条件中使用的列（除了已经“索引的条件”之外）是索引的前导列，可以更有效地使用。

我希望索引的`(c,a,b)`行为方式相同（注意与三列索引相比的不同顺序）。

# html - 输入字段按钮动态工具提示的最佳方式

> ID：12404276
> 
> 赞同：0
> 
> 时间：2012-09-13T10:31:29.403
> 
> 标签：html, css

我目前正在编写一个 html (php) 菜单，我想在其中使用按钮的工具提示。因为我想使用表单向我传输单击了哪个按钮（通过方法 = POST），所以我不使用，而是使用。

我的问题是我不确定创建这些工具提示的最佳方法是什么（特别是因为我希望文本是动态的......因为我计划在未来使用本地化。因此使用图像已经过时了那里的问题）。

我知道如何将工具提示与 结合使用，但如前所述，我不确定将工具提示与按钮结合使用的最佳方法是什么。示例源代码（作为此处的注释，我使用会话变量来查看用户使用的语言）：

```
<input type='button' value="<?php translate('Messages');?>" class='messages'>
<input type='button' value="<?php translate('Logout');?>" class='logout'> 
```

Tnx 的所有帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T10:38:26.333

HTML5 规范定义了一组几乎所有元素都支持的全局属性。这包括`title`规范中用于存储有关元素的附加信息的属性。因此，您可以动态地将工具提示文本输出到`title`属性中，该属性将出现在翻转时，而无需 JavaScript。如果您选择使用 JavaScript 提取文本并将其输出到自定义样式的工具提示中，它还可以使文本易于访问。

```
<input type='button' value="<?php translate('Messages');?>" id="messages_btn" title="<?php translate("tooltip_messages")?>">" class='messages'> 
```

希望这是有道理的。

# java - 在 IntelliJ IDEA 中启用静态数据重新加载

> ID：12404279
> 
> 赞同：1
> 
> 时间：2012-09-13T10:31:43.013
> 
> 标签：java, intellij-idea

我在 IntelliJ IDEA 中遇到以下问题：在调试模式下启动 Tomcat 后，我​​试图修改静态数据（JavaScript、CSS、HTML 等），但这些更改不会在 Web 应用程序中自动更新。这些更改仅在重建 WAR 后应用。我将如何在 IDEA 或类似的东西中打开自动静态数据重新加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:45:40.890

**使用战争**神器时无法进行热重装，请切换到已**爆炸**的神器并参阅[更新](http://www.jetbrains.com/idea/webhelp/updating-a-running-java-ee-application.html)功能的帮助部分。

# java - Android将文件保存到存储卡

> ID：12404281
> 
> 赞同：1
> 
> 时间：2012-09-13T10:31:46.120
> 
> 标签：java, android, android-emulator, jsch

在下面的程序中，我得到了如下所示的异常。基本上我要做的是我正在将文件从远程系统复制到设备。但是当在模拟器和设备上保存到存储卡时，我遇到了异常。以下异常来自模拟器，我可以说存储卡未连接到模拟器，因此异常。但代码是否适用于物理设备。

如何使代码在模拟器和设备上工作

例外：

```
 09-13 15:47:16.789: I/System.out(400): java.io.FileNotFoundException: /mnt/sdcard/Download/new.txt (Not a directory) 
```

代码：

```
package com.scp2;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;

import com.jcraft.jsch.*;

import android.app.Activity;
import android.os.Bundle;
import android.os.Environment;
import android.widget.Toast;

public class Scp2Activity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

            JSch jsch = new JSch();
            Session session = null;
            try {
                session = jsch.getSession("guest", "17.30.5.2", 22);

                session.connect();
                Toast.makeText(this,  "in try2" , Toast.LENGTH_SHORT).show();

                channel.connect();
                ChannelSftp sftpChannel = (ChannelSftp) channel;
                File ofile = new File(Environment.getExternalStoragePublicDirectory (Environment.DIRECTORY_DOWNLOADS),"new.txt");
                Toast.makeText(this, ofile.toString() , Toast.LENGTH_SHORT).show();
                                   try {
                    FileOutputStream f = new FileOutputStream(ofile);
                  sftpChannel.get("/root/a.txt","/mnt/sdcard/download/dd.txt");
                  /*OR What shoud the abobe statement be **/
              //sftpChannel.get("/root/a.txt",ofile); or this statement is correct

                } catch (FileNotFoundException e) {
                    e.printStackTrace();
                         System.out.println(e.toString());
                }

                sftpChannel.exit();
                session.disconnect();
            } catch (JSchException e) {
                e.printStackTrace(); 

            } catch (SftpException e) {
                e.printStackTrace();

            }

    }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T10:41:24.560

这样做是为了创建文件；比你更好、更安全的方法

```
File dir = new File(Environment.getExternalStorageDirectory(),"/Downloads/");
dir.mkdirs();
String strFileName = "dd.html";
File file = new File(dir,strFileName); 
```

# google-chrome - CSS 转换使 Chrome 崩溃

> ID：12404282
> 
> 赞同：1
> 
> 时间：2012-09-13T10:31:47.430
> 
> 标签：google-chrome, css, ubuntu, virtualbox

我在 Windows 7 主机上使用 VirtualBox (4.1.14) 运行 Ubuntu (12.04.1 LTS)。似乎，使用 Chrome (21.0.1180.89)，CSS 转换导致浏览器以一种奇怪的方式锁定。

这可以使用此页面进行测试：http: [//benmurden.com/css3test/css3test.html](http://benmurden.com/css3test/css3test.html)

简而言之，它看起来像浏览器的“内容区域”，即除了 URL 栏、选项卡列表等之外的任何内容都在 CSS 转换期间或之后停止渲染，并“卡”在所有其他打开的进程之上。我仍然可以关闭有问题的选项卡或浏览器本身，因为浏览器的那个区域是完全响应的。我什至可以切换到另一个进程，它将在其顶部的“卡住”内容区域下部分可见。

我打算用屏幕截图来演示这种特殊效果，但是在以这种方式锁定 Chrome 并切换到它后面的文本编辑器后，只有文本编辑器在屏幕截图上完全可见，并且锁定的 Chrome 无处可去见过。这让我相信这可能是 VirtualBox 而不是 Chrome 本身的问题。再说一次，我旁边坐着一个几乎相同的设置：在 Ubuntu 上运行 Chrome 的相同类型的机器使用 VirtualBox 与这三个相同的版本，他没有遇到这个问题。

我无法在我当前使用的任何其他浏览器和主机/访客组合上重现此问题。那些是：

*   Ubuntu 上的 Firefox (15.0.1)
*   Windows 7 上的火狐 (15.0.1)
*   Windows 7 上的 Chrome (21.0.1180.89)

如果我可以提供任何其他有用的信息，请告诉我。

谢谢！

# qt - Qt - 已连接但不起作用

> ID：12404283
> 
> 赞同：3
> 
> 时间：2012-09-13T10:32:04.443
> 
> 标签：qt, connect, qwidget, qpushbutton

我的项目中的一个类有问题，单击后出现带有 QTableWidget 和 QPushButton 的新窗口，单击按钮后我应该在标准输出上进行“测试”，但没有显示，这里是这段代码的一部分：

标题：

```
class ClientsSelector : public QWidget {
Q_OBJECT

public:
ClientsSelector(InvoiceTab* parent);
QWidget *window;

private:
QPushButton *accept;

public slots:
void loadData(); 
```

构造函数：

```
window = new QWidget();
layout = new QGridLayout();
layout->addWidget(table, 0, 0);

/*code*/

accept = new QPushButton(QString::fromUtf8("Load data"));
connect(accept, SIGNAL(clicked()), this, SLOT(loadData()));
layout->addWidget(accept, 0, 1);

/*code*/

window->setLayout(layout);

window->show(); 
```

方法：

```
void ClientsSelector::loadData() {

QTextStream std(stdout);
std << "test" << endl;

} 
```

我什至没有一个警告或错误。我在标准输出上什么都没有，看起来按钮连接到错误的对象（？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:50:38.963

你如何实例化`ClientsSelector`？它不是偶然的单例或全局变量吗？尝试将调用移动到在构造`connect`函数之后调用的单独的 init 函数。`ClientsSelector`它在类似的 WTF 情况下帮助了我。这与每个 QObject 继承者都有一个静态元数据成员这一事实有关，在构造函数完成之前，您无法确定它何时完全初始化。`connect`没有该元数据将无法工作。

例如，请参见此处：[http ://www.qtcentre.org/threads/9479-connect-in-constructor](http://www.qtcentre.org/threads/9479-connect-in-constructor)

如果仍然丢失，请查看[此清单](http://samdutton.wordpress.com/2008/10/03/debugging-signals-and-slots-in-qt/)。Qt 信号非常好用，大家有时会忘记它也有一些要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:35:14.820

好像您忘记了测试打印输出上的“关闭”。

尝试使用

```
qDebug() << "test"; 
```

而不是 QTextstream

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T05:33:02.243

您可以执行以下操作以确保建立连接并调用插槽。

1.  connect 函数返回连接状态。检查连接是否正确。
2.  放置一个断点并查看按下按钮时是否调用了 loadData()。

这可能有助于找到原因。

# database - 带有存储过程的 SQL SERVER 2008 最终选择命令

> ID：12404293
> 
> 赞同：0
> 
> 时间：2012-09-13T10:32:39.300
> 
> 标签：database, sql-server-2008, datetime, stored-procedures

我想把它做好是微不足道的。

在下面的屏幕截图中，每个用户（用户 ID）都有两个结果（这是一种重复）

如何修复查询以使每个用户仅获得一个结果

（每个用户可以有2组“TimeIn”和“TimeOut”活动）

所以如果给定的用户确实有第二个“入口”但没有离开我只需要第一个关闭的入口/离开+第二个入口/仍在工作

![在此处输入图像描述](../Images/5e6a1b8febf0d007eda7f1225d82edbb.png)

这是存储过程

```
 create table #tmp (tId int, UserId int, 
    TimeIn1 smalldatetime, [TimeOut1] smalldatetime, 
    TimeIn2 smalldatetime, [TimeOut2] smalldatetime, tId2 int,
    ActiveDate smalldatetime, ReasonID int, Name nvarchar(100), ReasonType nvarchar(100),
    TotalMins int)

    insert into #tmp (tId, UserId, TimeIn1, TimeOut1, ActiveDate, ReasonID, Name, ReasonType)
    SELECT
    t1.tId, t1.UserId, t1.TimeIn, t1.[TimeOut], t1.ActiveDate, t1.ReasonID, tblCustomers.name,tblTimeReas.ReasonType
    FROM tblTime t1
    inner join tblTimeReas on t1.ReasonID = tblTimeReas.ReasonID
    inner join tblCustomers on t1.UserId=tblCustomers.custID
    where (t1.userid in (select custID from tblCustomers where Classification =35) )
    and (DATEPART(DAY,t1.timein)= DATEPART(DAY,GETDATE()))
    and (DATEPART(MONTH,t1.timein)= DATEPART(MONTH,GETDATE()))
    and (DATEPART(YEAR,t1.timein)= DATEPART(YEAR,GETDATE()))

    update #tmp
    set tId2 = (select top 1 tId from 
    tblTime t2 where (userid in (select custID from tblCustomers where Classification =35)) and DATEDIFF(day,t2.timein,#tmp.timein1)=0
                    and t2.tId>#tmp.tId order by tId asc)

    update #tmp
    set TimeIn2 = (select TimeIn from tblTime where tId=tId2),
        TimeOut2 = (select [TimeOut] from tblTime where tId=tId2)

    update #tmp set TotalMins = (
        isnull(DATEDIFF(minute,timein1,timeout1),0)+
        isnull(DATEDIFF(minute,timein2,timeout2),0)

    )

    select *  from #tmp order by TimeIn1
    drop table #tmp 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T23:09:55.820

不知道怎么做，我没有参加 sql server 和数据库的课程，但这是我用于灵活过滤的最终代码

```
 create table #tmp (tId int, UserId int, 
    TimeIn1 smalldatetime, [TimeOut1] smalldatetime, 
    ActiveDate smalldatetime, ReasonID int, Name nvarchar(100), ReasonType nvarchar(100),
    TotalMins int)

    insert into #tmp (tId, UserId, TimeIn1, TimeOut1, ActiveDate, ReasonID, Name, ReasonType)
    SELECT
    t1.tId, t1.UserId, t1.TimeIn, t1.[TimeOut], t1.ActiveDate, t1.ReasonID, tblCustomers.name,tblTimeReas.ReasonType
    FROM tblTime t1
    inner join tblTimeReas on t1.ReasonID = tblTimeReas.ReasonID
    inner join tblCustomers on t1.UserId=tblCustomers.custID
    where (t1.userid in (select custID from tblCustomers where Classification Like '%,35%') )
    and (DATEPART(DAY,t1.timein)= DATEPART(DAY,GETDATE()))
    and (DATEPART(MONTH,t1.timein)= DATEPART(MONTH,GETDATE()))
    and (DATEPART(YEAR,t1.timein)= DATEPART(YEAR,GETDATE()))
    and TimeOut is null

    update #tmp set TotalMins = (
        isnull(DATEDIFF(minute,timein1,GETDATE()),0)
    )

    select *from #tmp  order by TimeIn1 
    drop table #tmp 
```

# objective-c - 缩放 UIImageView 以适应屏幕宽度

> ID：12404299
> 
> 赞同：8
> 
> 时间：2012-09-13T10:33:08.127
> 
> 标签：objective-c, uiimageview

我有一个`UIImageView`使用 Storyboard 里面创建的`UIViewController`。

我正在尝试重新缩放图像的宽度以适应屏幕宽度并按比例重新缩放高度：

```
[fImage setImage:[UIImage imageNamed: @"f2345.jpeg"]];
[fImage sizeToFit];
fImage.contentMode = UIViewContentModeScaleAspectFit;
CGRect frame = filmImage.frame;
frame.size.width = [[UIScreen mainScreen] bounds].size.width;
// Alternative way to do the similar thing - gives the same result in my case
// frame.size.width = [[UIScreen mainScreen] applicationFrame].size.width;
fImage.frame = frame; 
```

然后它显示一个缩放的图像，但它适合其他一些区域，并且我的图像周围有一个空白。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-13T10:40:34.567

尝试使用此代码：

```
float imgFactor = frame.size.height / frame.size.width;
frame.size.width = [[UIScreen mainScreen] bounds].size.width;
frame.size.height = frame.size.width * imgFactor; 
```

# mysql - 如何使用 SQL 从每个组中仅获取一个结果

> ID：12404300
> 
> 赞同：3
> 
> 时间：2012-09-13T10:33:07.160
> 
> 标签：mysql, sql, unique, distinct

我真的不知道如何查询这个任务。

我需要为表中每条记录的第一行获取时间，但是每次当我有一组相同的结果时，我需要在它发生并且信号等于 1 时获取第一个结果。

我不知道如何正确解释它，但我会举一个例子，你会明白我的意思。

记录：

```
ID| Time | Serial | Signal
 1| 10:59|   12   |   1
 2| 11:00|   12   |   1
 3| 11:01|   12   |   1
 4| 11:01|   13   |   1
 5| 11:02|   12   |   0
 6| 11:03|   12   |   0
 7| 11:05|   13   |   1
 8| 11:07|   12   |   1 
```

所以我需要这个结果：

```
ID| Time | Serial | Signal
 1| 10:59|   12   |   1
 4| 11:01|   13   |   1
 7| 11:05|   13   |   1
 8| 11:07|   12   |   1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T10:51:33.913

您的确切逻辑尚不清楚，据我所知，您希望获得每行`signal`1 的序列值从一个时间变化到另一个的位置。

这可以使用一个变量来跟踪前一行中序列的值来完成（下面我的查询中的变量@t）。

```
SELECT  ID, Time, `Serial`, `Signal`
FROM    (   SELECT  ID,
                    Time,
                    `Serial`,
                    `Signal`,
                    CASE WHEN `Serial` = @t THEN 0 ELSE 1 END AS IsNew,
                    @t:= `Serial`
            FROM    T,
                    (SELECT @t:=0) t2
            ORDER BY Time
        ) t
WHERE   IsNew = 1
AND     `Signal` = 1 
```

**[SQL小提琴](http://sqlfiddle.com/#!2/45547/15)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:47:17.993

您可以通过为连续值生成排名`Serial`，然后仅选择具有第一排名的记录来做到这一点。试试这个查询：

```
SELECT id, atime, serial, asignal
FROM (
      SELECT id,
             atime,
             asignal,
             IF(a.serial = @var_serial, (@var_rank:= @var_rank + 1),
                                        @var_rank := 1) AS rank,
             (@var_serial := a.serial) AS Serial
      FROM test_table a, (SELECT @var_rank := 1, @var_serial := 0) r
      ORDER BY id ASC
     )a
WHERE asignal = 1
      AND rank = 1; 
```

# 示例：[SQLFiddle](http://sqlfiddle.com/#!2/d7cf6/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T10:39:13.420

我会开始尝试类似的东西

```
SELECT * FROM tablename where Signal=1  GROUP BY Time ORDER BY Time ASC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T10:42:32.230

```
SELECT * FROM your_table
WHERE id IN (
  SELECT MIN(id) FROM your_table
  WHERE Signal != 0
  GROUP BY Serial
) 
```

# jquery - 在 asp.net MVC 3 中更改输出布局的注释代码行！！为什么？

> ID：12404301
> 
> 赞同：0
> 
> 时间：2012-09-13T10:33:15.710
> 
> 标签：jquery, asp.net-mvc-3

我在 c# 中有一个 asp.net mvc3 项目。在其中一个视图“Index.cshtml”中，我有许多后续代码行（jquery code）被注释，但是当我运行应用程序时，这会导致页面的输出布局/排列变得混乱. 删除注释代码后，它可以正常工作。为什么会有这种奇怪的行为？有人有什么想法吗？

链接到整个代码：[http ://dl.dropbox.com/u/85098448/Index.cshtml](http://dl.dropbox.com/u/85098448/Index.cshtml)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:39:09.107

取消注释最后一行`});`

# concurrency - 为什么 Azure 不在我的两个实例之一上分派 HTTP 请求？

> ID：12404302
> 
> 赞同：0
> 
> 时间：2012-09-13T10:33:17.313
> 
> 标签：concurrency, azure, load-balancing, azure-web-roles

我有一个带有两个实例的 Azure Web 角色。两个实例都“准备就绪”——运行正常。

在我的桌面上，我有四个相同程序的实例同时运行并使用 HTTP 请求访问 Web 角色 URL。然而，根据日志，所有请求都仅分派到实例 0。我需要将请求分派到两个实例以测试并发操作。

为什么请求没有分派到第二个实例，我如何让它们在那里分派？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:08:29.697

这可能来自负载均衡器优化请求路由，因为所有请求都来自同一个 IP。虽然看起来很像，但 Azure 中的 LB 并不是真正的愚蠢循环。

如果您只是没想到这一点，但服务器正在处理负载，那么您就可以了。您甚至可以关闭第二个实例，直到您的指标显示服务器正忙（为您节省资金）。

如果您需要能够从同一个 IP 进行负载平衡，那么我可能会考虑使用队列。尽管这对于 Web 请求来说是不寻常的（与某些后端处理相比）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T12:35:29.083

看起来这种行为是由于 IIS“保持活动状态”（`<system.webServer><httpProtocol allowKeepAlive="true">`。因为“保持活动状态”一旦客户端由实例提供服务，它就会被该实例卡住。

禁用“保持活动”会删除它，并且请求现在或多或少随机地到达所有实例。MSDN 表示禁用“保持活动”可能会降低性能，但为了测试并发操作，它会没问题。

# html - 在文本字段中居中占位符和输入文本

> ID：12404304
> 
> 赞同：7
> 
> 时间：2012-09-13T10:33:25.897
> 
> 标签：html, css

我想知道是否可以将占位符和用户将在文本字段中输入的输入居中。我想这是可能的，但我无法弄清楚。有人可以帮忙吗？我有问题的文本字段的代码如下...

```
<input type="text" style="font-weight:bold:" name="kword" id="kword" autofocus ="on" placeholder="Enter Keyword(s)" autocomplete ="on"/> 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T10:39:17.270

这可以用来`text-align:center`

CSS：

```
input, input[placeholder] {
    text-align: center;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-16T11:37:24.070

定位浏览器特定的占位符伪元素，如下所示：

```
input {
  text-align: center;
}

::-webkit-input-placeholder {
  text-align: center;
}
:-moz-placeholder {
  /* Firefox 18- */
  text-align: center;
}
::-moz-placeholder {
  /* Firefox 19+ */
  text-align: center;
}
:-ms-input-placeholder {
  text-align: center;
}
```

```
<input type="text" style="font-weight:bold;" placeholder="Enter Keyword(s)" />
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-24T08:49:17.517

就我而言，一个好的解决方案是：

```
div.search {display: flex;}

input::placeholder {align-self: center;} 
```

# php - 从数据库中查询数据然后填充表

> ID：12404305
> 
> 赞同：0
> 
> 时间：2012-09-13T10:33:26.947
> 
> 标签：php, database, prado

我该如何实现：
我想创建一个网页，其中有一个表格并用我的数据库中的一些字段填充它。我的表格中的项目可以通过单击表格标题进行排序（升序/降序）。可以按行选择项目，然后单击它，将引导我编辑条目。就像 phppos 中的表格的实现方式一样（[https://demo.phppointofsale.com/](https://demo.phppointofsale.com/)）。我正在使用 PHP 并使用 prado 框架。

# c++ - C++ 动态定义函数

> ID：12404307
> 
> 赞同：2
> 
> 时间：2012-09-13T10:33:41.523
> 
> 标签：c++, math, dynamic, methods, console

我正在使用控制台计算器上的 Visual c++，我正在创建一种让用户定义自定义线性函数的方法。这就是我难过的地方：一旦我获得了用户想要的函数名称、斜率和 y 截距，我需要使用这些数据来创建一个可以传递给 muParser 的可调用函数。

在 muParser 中，您可以像这样定义自定义函数：

```
double func(double x)
{
    return 5*x + 7; // return m*x + b;
}

MyParser.DefineFun("f", func);
MyParser.SetExpr("f(9.5) - pi");
double dResult = MyParser.Eval(); 
```

如何根据用户输入的值“m”和“b”动态创建这样的函数并将其传递给“DefineFun()”方法？这是我到目前为止所拥有的：

```
void cb_SetFunc(void)
{
    string FuncName, sM, sB;
    double dM, dB;
    bool GettingName = true;
    bool GettingM = true;
    bool GettingB = true;
    regex NumPattern("[+-]?(?:0|[1-9]\\d*)(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?");

    EchoLn(">>> First, enter the functions name. (Enter 'cancel' to abort)");
    EchoLn(">>> Only letters, numbers, and underscores can be used.");

    try
    {
        do // Get the function name
        {
            Echo(">>> Enter name: ");
            FuncName = GetLn();
            if (UserCanceled(FuncName)) return;

            if (!ValidVarName(FuncName))
            {
                EchoLn(">>> Please only use letters, numbers, and underscores.");
                continue;
            }
            GettingName = false;

        } while (GettingName);

        do // Get the function slope
        {
            Echo(">>> Enter slope (m): ");
            sM = GetLn();
            if (UserCanceled(sM)) return;

            if (!regex_match(sM, NumPattern))
            {
                EchoLn(">>> Please enter any constant number.");
                continue;
            }
            dM = atof(sM.c_str());
            GettingM = false;

        } while (GettingM);

        do // Get the function y-intercept
        {
            Echo(">>> Enter y-intercept (b): ");
            sB = GetLn();
            if (UserCanceled(sB)) return;

            if (!regex_match(sB, NumPattern))
            {
                EchoLn(">>> Please enter any constant number.");
                continue;
            }
            dB = atof(sB.c_str());
            GettingB = false;

        } while (GettingB);

            // ------------
            // TODO: Create function from dM (slope) and
            // dB (y-intercept) and pass to 'DefineFun()'
            // ------------
    }
    catch (...)
    {
        ErrMsg("An unexpected error occured while trying to set the function.");
    }
} 
```

我在想没有办法为每个用户定义的函数定义一个单独的方法。我是否需要`vector<pair<double, double>> FuncArgs;`跟踪适当的斜率和 y 截距，然后从函数中动态调用它们？当我将它传递给时，我将如何指定要使用哪对`DefineFun(FuncStrName, FuncMethod)`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T11:25:46.270

您需要的（除了脚本语言解释器）称为[“蹦床”](http://en.wikipedia.org/wiki/Trampoline_(computing))。没有创建这些的标准解决方案，特别是因为它涉及在运行时创建代码。

当然，如果您接受固定数量的蹦床，您可以在编译时创建它们。如果它们都是线性的，这可能会更容易：

```
const int N = 20; // Arbitrary
int m[N] = { 0 };
int b[N] = { 0 };
template<int I> double f(double x) { return m[I] * x + b; } 
```

这定义了一组 20 个分别`f<0>...f<19>`使用的函数`m[0]...m[19]`。

**编辑：**

```
// Helper class template to instantiate all trampoline functions.
double (*fptr_array[N])(double) = { 0 };
template<int I> struct init_fptr<int I> {
  static const double (*fptr)(double) = fptr_array[I] = &f<I>;
  typedef init_fptr<I-1> recurse;
};
template<> struct init_fptr<-1> { }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:51:52.187

我会保持简单：

```
#include <functional>

std::function<double(double)> f;   // this is your dynamic function

int slope, yintercept;             // populate from user input

f = [=](double x) -> double { return slope * x + yintercept; }; 
```

现在您可以将对象传递`f`给您的解析器，然后它可以`f(x)`自行调用。`slope`函数对象将和的捕获值打包`yintercept`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T13:05:30.983

[GiNaC](http://www.ginac.de/)是可以解析和评估数学表达式的 C++ 库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T10:43:22.937

尝试在您的应用程序中嵌入一些脚本语言。几年前，我将 Tcl 用于类似目的 - 但我不知道当前时间的最佳选择是什么。

您可以从 Tcl 开始，也可以自己搜索更好的东西：

请参阅：[将 Tcl/Tk 添加到 C 应用程序](http://wiki.tcl.tk/3474)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T12:49:27.010

生成可绑定到 boost 函数的固定函数数组。

其他人已经说过类似的方法，但是由于我花时间编写代码，所以无论如何都在这里。

```
#include <boost/function.hpp>

enum {
    MAX_FUNC_SLOTS = 255
};

struct FuncSlot
{
    double (*f_)(double);
    boost::function<double(double)> closure_;
};

FuncSlot s_func_slots_[MAX_FUNC_SLOTS];

template <int Slot>
struct FuncSlotFunc
{
    static void init() {
        FuncSlotFunc<Slot-1>::init();
        s_func_slots_[Slot - 1].f_ = &FuncSlotFunc<Slot>::call;
    }
    static double call(double v) {
        return s_func_slots_[Slot - 1].closure_(v);
    }
};
template <> struct FuncSlotFunc<0> {
    static void init() {}
};

struct LinearTransform
{
    double m_;
    double c_;
    LinearTransform(double m, double c)
        : m_(m)
        , c_(c)
    {}
    double operator()(double v) const {
        return (v * m_) + c_;
    }
};

int _tmain(int argc, _TCHAR* argv[])
{
    FuncSlotFunc<MAX_FUNC_SLOTS>::init();

    s_func_slots_[0].closure_ = LinearTransform(1, 0);
    s_func_slots_[1].closure_ = LinearTransform(5, 1);

    std::cout << s_func_slots_[0].f_(1.0) << std::endl; // should print 1
    std::cout << s_func_slots_[1].f_(1.0) << std::endl; // should print 6

    system("pause");
    return 0;
} 
```

因此，您可以使用以下命令获取函数指针： s_func_slots_[xxx].f_ 并使用 s_func_slots_[xxx].closure_ 设置您的操作

# c++ - 无法编译仿函数模板

> ID：12404308
> 
> 赞同：0
> 
> 时间：2012-09-13T10:33:46.000
> 
> 标签：c++

我正在尝试定义一个函数

```
template<typename Functor> static void start(DataSize size, ThreadNum threadNum, Functor f)
{
    ....

    std::for_each<int>(allocated, size, f);

    ....
} 
```

分配和大小只是 int。

调用者调用函数

```
start(image.width() * image.height(), _threads, RGBHistogramFun<T>(image, hist)); 
```

和

```
template<typename T> class RGBHistogramFun
{
    ...

    void operator()(std::size_t i)
    {
        ....
    }
} 
```

我将模板的 T 设置为 int 。我正在尝试定义 std::for_each 以便它为从分配到大小的每个整数调用 RGBHistogramFun::operator(std::size_t i) 。operator() 将使用索引来操作其内部数组数据。

但是，我收到关于 xutility 的编译器错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T10:39:28.860

n3337 25.2.4

```
template<class InputIterator, class Function>
Function for_each(InputIterator first, InputIterator last, Function f); 
```

> 效果：将 f 应用于**取消引用**范围 [first,last) 中的每个迭代器的结果，从 first 开始，一直到 last - 1。

`int`不能`dereferenced`。

# c# - 如何将给定的 xml 格式化为单行（不带空格）

> ID：12404317
> 
> 赞同：-4
> 
> 时间：2012-09-13T10:34:18.220
> 
> 标签：c#, xml, xml-parsing

使用 C# 如何将给定的 xml 文件格式化为单行（没有空格）？

如果有空格和换行符，我的输出会给出符号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:54:35.067

您可以使用字符串的 Replace 方法来格式化 xmlString，然后将其保存到输出：

```
string singleLineXml = xml.Replace(System.Environment.NewLine, " ") 
```

或者

```
string singleLineXml = xml.Replace("\r\n", " ") 
```

删除换行符>删除空格后：

```
singleLineXml.Remove(' '); 
```

是的@Steve Wellens，Remove(' ') 是个坏主意.. 让我们试试

```
singleLineXml.Replace("> <","><"); 
```

我找到了相关线程，可能有助于[将字符串写入 XML 文件而不格式化（C#）](https://stackoverflow.com/questions/5991561/writing-string-to-xml-file-without-formatting-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:02:12.440

用这个：

```
public static string StripXmlWhitespace(string Xml)
{
    Regex Parser = new Regex(@">\s*<");
    Xml = Parser.Replace(Xml, "><");

    return Xml.Trim();
} 
```

# facebook - 黑莓中的 Facebook 集成中没有登录屏幕

> ID：12404320
> 
> 赞同：0
> 
> 时间：2012-09-13T10:34:29.517
> 
> 标签：facebook, blackberry, logout

我正在开发一个使用 3rd 方应用程序 Facebook 的黑莓应用程序。

现在，我的问题是，当我第一次发布消息时，我将被重定向到 Facebook 登录屏幕并发布消息。但是一旦我从我的应用程序注销并再次登录以将消息发布到 facebook，它会直接发布消息而不询问凭证信息。

登录facebook的以下代码：

```
 public class FacebookMain implements ActionListener{// extends MainScreen implements ActionListener {

        // Constants
        public final static String NEXT_URL = "http://www.facebook.com/connect/login_success.html";
        public final static String APPLICATION_ID ="261890490596037"; 
        private final static long persistentObjectId = 0x854d1b7fa43e3577L;
        //APPLICATION SECRET ID="f7e096af696ef81e72268f49a6381a8d"

        static final String ACTION_ENTER = "updateStatus";
        static final String ACTION_SUCCESS = "statusUpdated";
        static final String ACTION_ERROR = "error";
        private ActionScreen actionScreen;

        private PersistentObject store;

        private LoginScreen loginScreen;
        private LogoutScreen logoutScreen;
        private HomeScreen homeScreen;
        private UpdateStatusScreen updateStatusScreen;
        private RecentUpdatesScreen recentUpdatesScreen;
        private UploadPhotoScreen uploadPhotoScreen;
        private FriendsListScreen friendsListScreen;
        private PokeFriendScreen pokeFriendScreen;
        private PostWallScreen postWallScreen;
        private SendMessageScreen sendMessageScreen;

        private String postMessage;

        private FacebookContext fbc;
        public static boolean isWallPosted=false;

        public FacebookMain(String postMessge) {
            this.postMessage=postMessge;

            checkPermissions();
            init();

            if ((fbc != null) && fbc.hasValidAccessToken()) {

                /*homeScreen = new HomeScreen(fbc);
                homeScreen.addActionListener(this);
                UiApplication.getUiApplication().pushScreen(homeScreen);*/

                try {
                    new FBUser("me", fbc.getAccessToken()).setStatus(postMessage);
                    actionScreen=new ActionScreen();
                    actionScreen.fireAction(ACTION_SUCCESS);
                    Dialog.alert("Wall Posted ");
                    isWallPosted=true;
                    //UiApplication.getUiApplication().popScreen(loginScreen);
                } catch (Exception e) {
                    actionScreen.fireAction(ACTION_ERROR, e.getMessage());
                    //UiApplication.getUiApplication().popScreen(loginScreen);
                }

            } else {

                loginScreen = new LoginScreen(fbc,postMessge);
                loginScreen.addActionListener(this);
                UiApplication.getUiApplication().pushScreen(loginScreen);
            }
        }

        private void init() {
            store = PersistentStore.getPersistentObject(persistentObjectId);
            synchronized (store) {
                if (store.getContents() == null) {
                    store.setContents(new FacebookContext(NEXT_URL, APPLICATION_ID));
                    store.commit();
                }
            }
            fbc = (FacebookContext) store.getContents();
        }

        private void checkPermissions() {

            ApplicationPermissionsManager apm = ApplicationPermissionsManager.getInstance();
            ApplicationPermissions original = apm.getApplicationPermissions();

            if ((original.getPermission(ApplicationPermissions.PERMISSION_INPUT_SIMULATION) == ApplicationPermissions.VALUE_ALLOW) && (original.getPermission(ApplicationPermissions.PERMISSION_DEVICE_SETTINGS) == ApplicationPermissions.VALUE_ALLOW) && (original.getPermission(ApplicationPermissions.PERMISSION_CROSS_APPLICATION_COMMUNICATION) == ApplicationPermissions.VALUE_ALLOW) && (original.getPermission(ApplicationPermissions.PERMISSION_INTERNET) == ApplicationPermissions.VALUE_ALLOW) && (original.getPermission(ApplicationPermissions.PERMISSION_SERVER_NETWORK) == ApplicationPermissions.VALUE_ALLOW) && (original.getPermission(ApplicationPermissions.PERMISSION_EMAIL) == ApplicationPermissions.VALUE_ALLOW)) {
                return;
            }

            ApplicationPermissions permRequest = new ApplicationPermissions();
            permRequest.addPermission(ApplicationPermissions.PERMISSION_INPUT_SIMULATION);
            permRequest.addPermission(ApplicationPermissions.PERMISSION_DEVICE_SETTINGS);
            permRequest.addPermission(ApplicationPermissions.PERMISSION_CROSS_APPLICATION_COMMUNICATION);
            permRequest.addPermission(ApplicationPermissions.PERMISSION_INTERNET);
            permRequest.addPermission(ApplicationPermissions.PERMISSION_SERVER_NETWORK);
            permRequest.addPermission(ApplicationPermissions.PERMISSION_EMAIL);
            permRequest.addPermission(ApplicationPermissions.PERMISSION_INTERNET);
            permRequest.addPermission(ApplicationPermissions.PERMISSION_AUTHENTICATOR_API);
            permRequest.addPermission(ApplicationPermissions.PERMISSION_SERVER_NETWORK);
            permRequest.addPermission(ApplicationPermissions.PERMISSION_WIFI);

            boolean acceptance = ApplicationPermissionsManager.getInstance().invokePermissionsRequest(permRequest);

            if (acceptance) {
                // User has accepted all of the permissions.
                return;
            } else {
            }
        }

        public void saveContext(FacebookContext pfbc) {
            synchronized (store) {
                store.setContents(pfbc);
                System.out.println(pfbc);
                store.commit();
            }
        }

        public void logoutAndExit() {
            saveContext(null);
            logoutScreen = new LogoutScreen(fbc);
            logoutScreen.addActionListener(this);
        }

        public void saveAndExit() {
            saveContext(fbc);
            exit();
        }

        private void exit() {
            AppenderFactory.close();
            System.exit(0);
        }

        public void onAction(Action event) {/*

            if (event.getSource() == loginScreen) {
                if (event.getAction().equals(LoginScreen.ACTION_LOGGED_IN)) {
                    try {
                        fbc.setAccessToken((String) event.getData());
                        try {
                            new FBUser("me", fbc.getAccessToken()).setStatus(postMessage);
                            actionScreen=new ActionScreen();
                            actionScreen.fireAction(ACTION_SUCCESS);
                            Dialog.alert("Wall Posted ");
                        } catch (Exception e) {
                            actionScreen.fireAction(ACTION_ERROR, e.getMessage());
                        }
                        try {
                            if (homeScreen == null) {
                                homeScreen = new HomeScreen(fbc);
                                homeScreen.addActionListener(this);
                            }
                            UiApplication.getUiApplication().pushScreen(homeScreen);

                        } catch (Exception e) {
                            e.printStackTrace();
                            Dialog.alert("Error: " + e.getMessage());
                        }

                    } catch (Throwable t) {
                        t.printStackTrace();
                        Dialog.alert("Error: " + t.getMessage());
                    }

                } else if (event.getAction().equals(LoginScreen.ACTION_ERROR)) {
                    Dialog.alert("Error: " + event.getData());
                }

            } else if (event.getSource() == logoutScreen) {
                if (event.getAction().equals(LogoutScreen.ACTION_LOGGED_OUT)) {
                    exit();
                }

            } else if (event.getSource() == homeScreen) {
                if (event.getAction().equals(UpdateStatusScreen.ACTION_ENTER)) {
                    if (updateStatusScreen == null) {
                        updateStatusScreen = new UpdateStatusScreen(fbc);
                        updateStatusScreen.addActionListener(this);
                    }
                    UiApplication.getUiApplication().pushScreen(updateStatusScreen);
                    try {
                        new FBUser("me", fbc.getAccessToken()).setStatus("");
                        actionScreen=new ActionScreen();
                        actionScreen.fireAction(ACTION_SUCCESS);
                    } catch (Exception e) {
                        actionScreen.fireAction(ACTION_ERROR, e.getMessage());
                    }

                } else if (event.getAction().equals(RecentUpdatesScreen.ACTION_ENTER)) {
                    if (recentUpdatesScreen == null) {
                        recentUpdatesScreen = new RecentUpdatesScreen(fbc);
                        recentUpdatesScreen.addActionListener(this);
                    }
                    recentUpdatesScreen.loadList();
                    UiApplication.getUiApplication().pushScreen(recentUpdatesScreen);

                } else if (event.getAction().equals(UploadPhotoScreen.ACTION_ENTER)) {
                    if (uploadPhotoScreen == null) {
                        uploadPhotoScreen = new UploadPhotoScreen(fbc);
                        uploadPhotoScreen.addActionListener(this);
                    }
                    UiApplication.getUiApplication().pushScreen(uploadPhotoScreen);

                } else if (event.getAction().equals(FriendsListScreen.ACTION_ENTER)) {
                    if (friendsListScreen == null) {
                        friendsListScreen = new FriendsListScreen(fbc);
                        friendsListScreen.addActionListener(this);
                    }
                    friendsListScreen.loadList();
                    UiApplication.getUiApplication().pushScreen(friendsListScreen);

                } else if (event.getAction().equals(PokeFriendScreen.ACTION_ENTER)) {
                    if (pokeFriendScreen == null) {
                        pokeFriendScreen = new PokeFriendScreen(fbc);
                        pokeFriendScreen.addActionListener(this);
                    }
                    UiApplication.getUiApplication().pushScreen(pokeFriendScreen);

                } else if (event.getAction().equals(PostWallScreen.ACTION_ENTER)) {
                    if (postWallScreen == null) {
                        postWallScreen = new PostWallScreen(fbc);
                        postWallScreen.addActionListener(this);
                    }
                    postWallScreen.loadList();
                    UiApplication.getUiApplication().pushScreen(postWallScreen);

                } else if (event.getAction().equals(SendMessageScreen.ACTION_ENTER)) {
                    if (sendMessageScreen == null) {
                        sendMessageScreen = new SendMessageScreen(fbc);
                        sendMessageScreen.addActionListener(this);
                    }
                    UiApplication.getUiApplication().pushScreen(sendMessageScreen);
                }

            } else if (event.getSource() == updateStatusScreen) {
                if (event.getAction().equals(UpdateStatusScreen.ACTION_SUCCESS)) {
                    Dialog.inform("Status updated");

                    try {
                        UiApplication.getUiApplication().popScreen(updateStatusScreen);
                    } catch (IllegalArgumentException e) {
                    }

                } else if (event.getAction().equals(UpdateStatusScreen.ACTION_SUCCESS)) {
                    Dialog.alert("Error: " + event.getData());
                }

            } else if (event.getSource() == recentUpdatesScreen) {
                if (event.getAction().equals(RecentUpdatesScreen.ACTION_SUCCESS)) {
                    try {
                        UiApplication.getUiApplication().popScreen(recentUpdatesScreen);
                    } catch (IllegalArgumentException e) {
                    }
                } else if (event.getAction().equals(RecentUpdatesScreen.ACTION_ERROR)) {
                    Dialog.alert("Error: " + event.getData());
                }
            } else if (event.getSource() == uploadPhotoScreen) {
                if (event.getAction().equals(UploadPhotoScreen.ACTION_SUCCESS)) {
                    try {
                        UiApplication.getUiApplication().popScreen(uploadPhotoScreen);
                    } catch (IllegalArgumentException e) {
                    }
                } else if (event.getAction().equals(UploadPhotoScreen.ACTION_ERROR)) {
                    Dialog.alert("Error: " + event.getData());
                }
            } else if (event.getSource() == friendsListScreen) {
                if (event.getAction().equals(FriendsListScreen.ACTION_SUCCESS)) {
                    try {
                        UiApplication.getUiApplication().popScreen(friendsListScreen);
                    } catch (IllegalArgumentException e) {
                    }
                } else if (event.getAction().equals(FriendsListScreen.ACTION_ERROR)) {
                    Dialog.alert("Error: " + event.getData());
                }
            } else if (event.getSource() == pokeFriendScreen) {
                if (event.getAction().equals(PokeFriendScreen.ACTION_SUCCESS)) {
                    try {
                        UiApplication.getUiApplication().popScreen(pokeFriendScreen);
                    } catch (IllegalArgumentException e) {
                    }
                } else if (event.getAction().equals(PokeFriendScreen.ACTION_ERROR)) {
                    Dialog.alert("Error: " + event.getData());
                }
            } else if (event.getSource() == postWallScreen) {
                if (event.getAction().equals(PostWallScreen.ACTION_SUCCESS)) {
                    Dialog.inform("Wall posted");

                    try {
                        UiApplication.getUiApplication().popScreen(postWallScreen);
                    } catch (IllegalArgumentException e) {
                    }
                } else if (event.getAction().equals(PostWallScreen.ACTION_ERROR)) {
                    Dialog.alert("Error: " + event.getData());
                }
            } else if (event.getSource() == sendMessageScreen) {
                if (event.getAction().equals(SendMessageScreen.ACTION_SUCCESS)) {
                    try {
                        UiApplication.getUiApplication().popScreen(sendMessageScreen);
                    } catch (IllegalArgumentException e) {
                    }
                } else if (event.getAction().equals(SendMessageScreen.ACTION_ERROR)) {
                    Dialog.alert("Error: " + event.getData());
                }
            }
         */}
    } 
```

和下面的代码来清除凭证

```
public void logoutAndExit() {
        saveContext(null);
        logoutScreen = new LogoutScreen(fbc);
        logoutScreen.addActionListener(this);
    } 
```

# android - 当一个片段失去焦点然后重新获得焦点时，为什么它的 onResume() 方法在此期间从未被调用？

> ID：12404321
> 
> 赞同：11
> 
> 时间：2012-09-13T10:34:31.327
> 
> 标签：android, android-fragments

**片段 A**已获得焦点。创建**Fragment B**时，**B**现在获得焦点。这会导致**A**失去焦点，但它仍然可见。现在如果**B**被摧毁，**A**会再次获得焦点。当**A**重新获得焦点时，它的`onResume()`方法是否被调用？如果不是，为什么？

（**A**和**B**在同一个活动中。）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-12T18:16:48.803

在您描述的情况下，未调用 onResume() 方法。查看[有关 android 片段生命周期的文档](http://developer.android.com/guide/components/fragments.html#Lifecycle)。

onResume() 在片段第一次添加到 UI 时调用，然后每次从暂停状态返回时调用。如果片段被添加到后台堆栈，用户点击主页按钮并隐藏应用程序，或者如果其他应用程序接管电话（例如用户接听电话），片段将被暂停。一般来说，如果您的片段和应用程序完全可见，片段没有被暂停。

UI 焦点不应与活动/片段生命周期相混淆。您所描述的情况似乎更适合[OnFocusChangeListener](http://developer.android.com/reference/android/view/View.OnFocusChangeListener.html)。

# android - 在后台加载资源，并在 andEngine 中加载场景

> ID：12404327
> 
> 赞同：0
> 
> 时间：2012-09-13T10:35:02.787
> 
> 标签：android, andengine

我正在使用andEngine 开发游戏。游戏加载资源时如何显示加载进度而不是黑屏。？

# python - Python map v2.7 不再适用于 v3.2

> ID：12404330
> 
> 赞同：1
> 
> 时间：2012-09-13T10:35:14.723
> 
> 标签：python, map, lambda, python-3.x

我在 Python v2.7 中的代码不再适用于 Python v3.2

我到处搜索，但没有找到这种情况。似乎`self.buildGraph(i, n)`从未真正调用过该函数

```
n = 33
map(lambda i : self.buildGraph(i, n), range(n)) 
```

但是具有以下功能：

```
map(lambda x : fu(a, x), range(10)) 
```

没有问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T10:39:24.020

在 python 3中， [map](http://docs.python.org/release/3.1.5/library/functions.html#map)返回[惰性迭代器对象](http://docs.python.org/release/3.0.1/whatsnew/3.0.html#views-and-iterators-instead-of-lists)，就像在 python 2 中的[imap](http://docs.python.org/library/itertools.html#itertools.imap)，所以你需要评估你的迭代器，例如：

```
list(map(lambda i : self.buildGraph(i, n), range(n))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:58:38.650

我看不出您的一个`map`示例如何提供您所期望的，而另一个没有，但作为一般提示，在 3.x 中使用现有 2.x 代码时 - 使用[2to3 工具](http://docs.python.org/library/2to3.html)确保地图/过滤器/范围等之间的行为变化......不要在后面咬你。

# sql - 什么时候sql查询的隐式顺序不是主键

> ID：12404335
> 
> 赞同：0
> 
> 时间：2012-09-13T10:35:28.080
> 
> 标签：sql, linq-to-sql, sql-server-2008-r2, sql-order-by, undefined-behavior

在什么情况下，没有显式排序的 linq-to-sql 查询会返回未按主键排序的项目？

（我知道 SQL 语句没有隐式顺序，并且获得定义顺序的正确方法是显式设置它）

例如：给定一个带有 table`parent`和 table的 SQL 数据库`children`：

表父具有以下字段：

*   *ID*（int、主键、自动值、聚集索引）
*   *名称*（varchar）

表儿童具有以下字段：

*   *ID*（int、主键、自动值、聚集索引）
*   *parentID*（int，具有非聚集索引的外键）
*   *名称*（varchar）

通过以下方式使用 linq-to-sql 访问：

```
var parent = dc.Parent.First(p=>p.ID==123);
...
foreach (var child in parent.Children)
    Console.WriteLine(child.ID) 
```

据我所知，linq-to-sql 只是`select xy from Children Where parentID=123`在后台执行 a ，但我不确定中间是否有一些额外的缓存

*什么情况下child.ID不会升序排序？*

如果我想保证订单，正确的做法显然是
`foreach (var child in parent.Children.OrderBy(c=>c.ID);`
我意识到没有明确的 OrderBy 订单是官方未定义的，不能依赖任何隐式排序。

但是，我有一些代码直到现在才使用显式顺序，并且直到最近才通过所有测试，但现在偶尔会失败，我只是对原因感到好奇。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:45:00.500

发生的情况可能是子表中数据的选择性发生了变化。这会导致表的统计数据发生变化，这可以解释数据顺序突然变化的原因。您只是很幸运，它碰巧按照您之前想要的顺序对事物进行了排序，但是保证特定顺序的唯一方法是使用显式的 ORDER BY 语句。

# mvvm - 我的用户控件和 ViewModel 之间的绑定

> ID：12404337
> 
> 赞同：0
> 
> 时间：2012-09-13T10:35:36.307
> 
> 标签：mvvm, binding, properties, dependencies, prism

不能做绑定

随机 (MyViewModel) -> VMTestValue (MyViewModel) -> TestUserControl (MainWindow)

“MyViewModel”是“MainWindow”的 ViewModel

所有项目：[http ://rusfolder.com/32608140](http://rusfolder.com/32608140)

测试用户控件.xaml

```
<UserControl x:Class="TestBinding.TestUserControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             Background="Green"
             d:DesignHeight="300" d:DesignWidth="300">
    <Grid>
        <TextBlock Background="Gray" Margin="50" FontSize="18" Text="{Binding TestValue}" />
        <Rectangle  Height="200" Width="{Binding TestValue}" Fill="#FFFF1717" />
    </Grid>
 </UserControl> 
```

测试用户控件.cs

```
...
public TestUserControl()
        {
            InitializeComponent();

            this.DataContext = this;
        }

        public static readonly DependencyProperty TestValueProperty =
           DependencyProperty.Register("TestValue", typeof(int), typeof(TestUserControl),
               new FrameworkPropertyMetadata((int)255)
               );

        public int TestValue
        {
            set { SetValue(TestValueProperty, value); }
            get
            {
                return (int)GetValue(TestValueProperty);
            }
        }
... 
```

MyViewModel.cs

```
using System;

using System.Timers;
using Microsoft.Practices.Prism.ViewModel;

namespace TestBinding
{
    class MyViewModel : NotificationObject
    {
        private int _VMTestValue;

        private Timer timer;
        private Random _random;

        public MyViewModel()
        {
            _random=new Random();

            timer=new Timer();
            timer.Interval = 500;
            timer.Elapsed += new ElapsedEventHandler(timer_Elapsed);
            timer.Start();
        }

        void timer_Elapsed(object sender, ElapsedEventArgs e)
        {
            VMTestValue = _random.Next(10, 300);
        }

        public int VMTestValue
        {
            set 
            { 
                _VMTestValue = value;
                this.RaisePropertyChanged(() => this.VMTestValue);
            }
            get { return _VMTestValue; }
        }
    }
} 
```

主窗口.cs

```
...
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            this.DataContext = new MyViewModel();
        }
    }
... 
```

主窗口.xaml

```
...
<TestBinding1:TestUserControl TestValue="{Binding VMTestValue}" />
<TextBlock VerticalAlignment="Bottom" Background="Blue" FontSize="20" Text="{Binding VMTestValue}" />
... 
```

**为什么我不能去UserControl？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T12:06:40.060

除了狒狒，我在我的项目中这样做：

删除**this.DataContext = this;** 并将以下内容添加到您的 xaml

```
<UserControl x:Class="TestBinding.TestUserControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         Background="Green"
         d:DesignHeight="300" d:DesignWidth="300"
         x:Name="uc">
<Grid>
    <TextBlock Background="Gray" Margin="50" FontSize="18" Text="{Binding ElementName=uc,Path=TestValue}" />
    <Rectangle  Height="200" Width="{Binding ElementName=uc,Path=TestValue}" Fill="#FFFF1717" />
</Grid>
</UserControl> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:45:09.627

您应该让您的 UserControl 继承 DataContext：

```
public TestUserControl()
{
    InitializeComponent();

    //this.DataContext = this;
} 
```

如果要将 TestUserControl 的 DataContext 保留给自己，可以使用 RelativeSource：

```
<TestBinding1:TestUserControl TestValue="{Binding DataContext.VMTestValue, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}}" /> 
```

或者使用 ElementName，假设您的 MainWindow 被命名为**mainWin**：

```
<TestBinding1:TestUserControl TestValue="{Binding VMTestValue, ElementName=mainWin}" /> 
```

# forms - modelAttribute 和 commandName 的区别

> ID：12404340
> 
> 赞同：24
> 
> 时间：2012-09-13T10:35:39.640
> 
> 标签：forms, spring, spring-mvc, jstl

发送表单数据时使用 commandName 和 modelAttribute 有什么区别？

```
<form:form method="post" modelAttribute="csvFileUploadVO"> 
```

和

```
<form:form method="post" commandName="csvFileUploadVO"> 
```

我应该在哪个时间点使用它们中的任何一个？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-13T10:43:49.673

没有区别，由于历史原因存在两种不同的属性。

# wpf - 在wpf mvvm中单击按钮时将集合绑定到xamdatagrid

> ID：12404342
> 
> 赞同：2
> 
> 时间：2012-09-13T10:35:51.050
> 
> 标签：wpf, infragistics, buttonclick, xamdatagrid

如何在wpf mvvm中单击按钮时将集合绑定到xamdatagrid？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T10:47:36.120

XAML

```
 <Button Command="{Binding ButtonCommand}">Button</Button>
   <DataGrid ItemsSource="{Binding MyCollection}">
   ...
   configure columns to MyRowViewModel
   ...
   </DataGrid> 
```

视图模型

```
 public class MyViewModel
   {
     public ICommand ButtonCommand {get;set;}
     public ObservableCollection<MyRowViewModel> MyCollection {get;set;}
   } 
```

并在 OnLoad 中设置：

```
 View.DataContext = viewModel; 
```

并在调用命令时更改您的集合或创建并 wpf 自动更新您的网格

# php - 强制下载附件而不是自动打开它

> ID：12404344
> 
> 赞同：2
> 
> 时间：2012-09-13T10:35:55.337
> 
> 标签：php, wordpress, download

我有一个列出附件的网站。单击这些附件会导致两种行为之一 -

1.  附件将在同一窗口中打开。
2.  附件向用户显示了一个对话框以打开或保存文档。

数字 1 似​​乎只发生在 PDF 上，但有没有办法让所有附件都向用户显示“保存/打开/取消”弹出窗口？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T10:46:44.993

仅适用于 PDF ..

```
// The user will receive a PDF to download
header('Content-type: application/pdf');

// File will be called downloaded.pdf
header('Content-Disposition: attachment; filename="downloaded.pdf"');

// The actual PDF file on the server is source.pdf
readfile('source.pdf'); 
```

...

对于所有其他文件类型，也许您可​​以使用`echo mime_content_type('Yourfile.ext')`..o

```
header('Content-type: '.mime_content_type('Yourfile.ext'));
header('Content-Disposition: attachment; filename="'.$output_filename.'"');
readfile($source_filename); 
```

请注意，我没有测试它...

Content-type 标头指定要下载的文件类型，由 mime 类型指定。Content-Disposition 标头指定要下载的文件的新文件名。readfile 行不是发送的标头，而是从文件中获取所有数据并输出的 PHP 调用。您传递给 readfile 函数的参数是要下载的实际 pdf 文件的位置。

更新

`mime_content_type()`功能已**弃用**。你需要用这个替换......

```
$finfo = new finfo;

$fileinfo = $finfo->file($file, FILEINFO_MIME); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:37:10.200

您需要发送适当的内容类型标头（）。

示例（对于 pdf，但如果您调整 mimetype，则适用于任何内容）：

```
<?php
header('Content-disposition: attachment; filename=huge_document.pdf');
header('Content-type: application/pdf');   // make sure this is the correct mime-type for the file
readfile('huge_document.pdf');
?> 
```

补充阅读：

[http://webdesign.about.com/od/php/ht/force_download.htm](http://webdesign.about.com/od/php/ht/force_download.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T11:47:06.813

使用@HappyApe 提供的答案，这是我在单击 Wordpress 中的附件链接时用于实现强制下载文档的完整代码。

```
/**
 * Check that a page is the permalink of an attachment and force the download of the attahment if it is
 */
add_action('template_redirect', 'template_redirect');
function template_redirect(){

    global $post;

    /** Get the attachment URL as a pertty link ($url) and as a link to the file ($guid) */
    $url = get_permalink($post->ID);
    $guid = wp_get_attachment_url($post->ID);

    /** Get the file name of the attachment to output in the header */
    $file_name = basename(get_attached_file($post->ID));

    /** Get the location of the file on the server */
    $file_location = $_SERVER['DOCUMENT_ROOT'].substr($guid, strpos($guid, '/wp-content'));

    /** Get the file Mime Type */
    $finfo = new finfo;
    $mime_type = $finfo->file($file_location, FILEINFO_MIME);

    /** Check that the page we are on is a local attachment and force download if it is */
    if(is_local_attachment($url)) :

        header("Content-type: ".$mime_type, true, 200);
        header("Content-Disposition: attachment; filename=".$file_name);
        header("Pragma: no-cache");
        header("Expires: 0");

        readfile($guid); 

        exit();

    endif;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-11T22:54:35.533

我一直将它用作通用 mime，您所要做的就是传递一些参数：

```
// Check download token
if (empty($_GET['mime']) OR empty($_GET['token']))
{
    exit('Invalid download token 8{');
}

// Set operation params
$mime = filter_var($_GET['mime']);
$ext  = str_replace(array('/', 'x-'), '', strstr($mime, '/'));
$url  = base64_decode(filter_var($_GET['token']));
$name = urldecode($_GET['title']). '.' .$ext; 

// Fetch and serve
if ($url)
{
    $size=get_size($url);
    // Generate the server headers
    if (strpos($_SERVER['HTTP_USER_AGENT'], 'MSIE') !== FALSE)
    {
        header('Content-Type: "' . $mime . '"');
        header('Content-Disposition: attachment; filename="' . $name . '"');
        header('Expires: 0');
        header('Content-Length: '.$size);
        header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
        header("Content-Transfer-Encoding: binary");
        header('Pragma: public');
    }
    else
    {
        header('Content-Type: "' . $mime . '"');
        header('Content-Disposition: attachment; filename="' . $name . '"');
        header("Content-Transfer-Encoding: binary");
        header('Expires: 0');
        header('Content-Length: '.$size);
        header('Pragma: no-cache');
    }

    readfile($url);
    exit;
}

// Not found
exit('File not found 8{'); 
```

然后你像这样传递你的链接：

```
<a href="download.php?mime=++your file ext++&title=++ your file title ++&token=++your link to a file++">Download my file</a> 
```

标题是可选的:)

# ipad - 如何使 iPad 中的 iCal 根据设备的时区在适当的时间转换接收到的事件

> ID：12404348
> 
> 赞同：1
> 
> 时间：2012-09-13T10:36:11.347
> 
> 标签：ipad, outlook, timezone, icalendar

我正在使用 DDay.iCal 库创建一个应该在确切时区的事件：

```
BEGIN:VCALENDAR
VERSION:2.0
METHOD:PUBLISH
PRODID:someId
BEGIN:VTIMEZONE
TZID:Central Europe Standard Time
BEGIN:STANDARD
DTSTART:20111002T030000
RRULE:FREQ=YEARLY;BYDAY=-1SU;BYHOUR=3;BYMINUTE=0;BYMONTH=10
TZNAME:Central Europe Standard Time
TZOFFSETFROM:+0200
TZOFFSETTO:+0100
END:STANDARD
BEGIN:DAYLIGHT
DTSTART:20110301T020000
RRULE:FREQ=YEARLY;BYDAY=-1SU;BYHOUR=2;BYMINUTE=0;BYMONTH=3
TZNAME:Central Europe Daylight Time
TZOFFSETFROM:+0100
TZOFFSETTO:+0200
END:DAYLIGHT
END:VTIMEZONE
BEGIN:VEVENT
DESCRIPTION:Some Description
DTEND;TZID=Central Europe Standard Time:20120919T163000
DTSTAMP:20120913T082257Z
DTSTART;TZID=Central Europe Standard Time:20120919T160000
LOCATION:Some Location
SEQUENCE:0
SUMMARY:Some Summary
UID:1cf04d1c-2b5c-474c-86f4-108101da9b7a
END:VEVENT
END:VCALENDAR 
```

如您所见，该事件在中欧标准时间 16:00 - 16:30 宣布。

我在另一个时区 - GMT + 2。

当我在 win7 中将事件添加到 Outlook 时 - 它被转换为我的当地时间 = 从 17 到 17:30。

当我将它添加到朋友的 Mac 时 - 它会转换为他的当地时间。

当我尝试将其添加到设置为相同时区的 Ipad 中 - GMT + 2 并且启用时区支持时，它不会被转换但设置为 16 - 16:30 并且事件的时区被置于浮动.

所以我的问题是我应该在事件设置中进行哪些更改以识别它并转换为正确的时间？

或者也许我应该更改 iPad 设置中的某些内容。

# jquery - fancyBox 下载缓存的图像？

> ID：12404354
> 
> 赞同：1
> 
> 时间：2012-09-13T10:36:30.047
> 
> 标签：jquery, fancybox

我一直在使用 Firebug 监视浏览器和服务器之间的网络通信。我看到我的缩略图被下载（`200 OK`）以及应该出现在 fancyBox 中的更大版本的图像（也是`200 OK`）。我正在预加载更大的图像。

当我单击缩略图时，fancyBox 中会出现较大的图像。在 Firebug 中，我看到 fancyBox 请求更大的图像并获得`304 Not Modified`. 这完全符合我的要求，只是它似乎只在 Chrome 中表现得像这样。在 FF 中，它会再次下载较大的图像 - 导致`200 OK`.

任何想法为什么 fancyBox/FF 再次下载图像？`200 OK`如果资源已经被缓存，它是如何获得的？

# javascript - 离开页面时弹出消息

> ID：12404355
> 
> 赞同：3
> 
> 时间：2012-09-13T10:36:30.843
> 
> 标签：javascript, html, dialog, popup, window.onunload

我希望开发一个类似于该`window.beforeunload`功能的小弹出消息，以通知用户，如果他们离开当前页面，他们将丢失所有数据。

然而，该`beforeunload`事件的问题是它经常触发。

我希望仅在用户关闭页面或单击将他们带离当前页面的链接时触发弹出消息，以确保他们知道他们当前的操作将导致他们拥有的表单数据丢失进入至今。

然而`beforeunload`，当他们刷新页面时，事件会进一步触发，这在这种情况下是不需要的，并且在提交论坛时也是如此。

谁能告诉我开发这个的最佳方法。我考虑过使用基本的确认对话框并在适当的情况下触发它，但是是否有可能知道用户是否正在刷新页面，以及是否正在提交论坛（没有 jQuery）。

我怎样才能让这个对话框在适当的时候触发？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T10:52:02.537

不幸的是，我认为这是不可能的。出于安全原因，页面卸载事件非常有限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T12:28:11.770

假设表单不是太复杂，可以使用 Ajax 调用保存表单数据，这意味着不会重新加载页面。因此，`beforeunload`它将按照设计的方式运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T11:43:44.400

如果您只希望它在用户添加或更改表单数据时出现，为什么不检查数据的更改？如果是，则返回问题`beforeunload`，如果不是，则什么也不做。

# php - 按固定长度拆分字符串

> ID：12404360
> 
> 赞同：7
> 
> 时间：2012-09-13T10:36:43.140
> 
> 标签：php, string, unicode, split, fixed

我正在寻找将 unicode 字母数字类型的字符串拆分为固定长度的方法。例如：

```
    992000199821376约翰·史密斯 20070603

```

并且数组应如下所示：

```
Array (
 [0] => 99,
 [1] => 2,
 [2] => 00019982,
 [3] => 1376,
 [4] => "John Smith",
 [5] => 20070603
) 
```

数组数据将像这样拆分：

```
    Array[0] - 帐户类型 - 必须为 2 个字符长，
    Array[1] - 帐户状态 - 必须为 1 个字符长，
    Array[2] - 帐户 ID - 长度必须为 8 个字符，
    Array[3] - 帐户设置 - 长度必须为 4 个字符，
    Array[4] - 用户名 - 长度必须为 20 个字符，
    Array[5] - 加入日期 - 长度必须为 8 个字符。

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T13:19:09.133

或者，如果您想避免怀孕：

```
$string = '992000199821376John Smith          20070603';
$intervals = array(2, 1, 8, 4, 20, 8);

$start = 0;
$parts = array();

foreach ($intervals as $i)
{
   $parts[] = mb_substr($string, $start, $i);

   $start += $i;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:03:37.957

```
 $s = '992000199821376Николай Шмидт       20070603';

    if (preg_match('~(.{2})(.{1})(.{8})(.{4})(.{20})(.{8})~u', $s, $match))
    {
        list (, $type, $status, $id, $settings, $name, $date) = $match;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T13:16:50.237

使用 substr 函数很容易做到这一点。

```
$accountDetails = "992000199821376John Smith          20070603";
$accountArray = array(substr($accountDetails,0,2),substr($accountDetails,2,1),substr($accountDetails,3,8),substr($accountDetails,11,4),substr($accountDetails,15,20),substr($accountDetails,35,8)); 
```

应该做的伎俩，除了正则表达式（如akond所建议的那样）可能是要走的路（而且更灵活）。（认为​​这仍然是有效的替代选项）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T21:21:38.087

无法以您要求的方式拆分 unicode 字符串。

不使零件无效是不可能的。有些代码点无法突出，例如：שׁ 是 2 个代码点（在 UTF-8 和 UTF-16 中是 4 个字节），您不能拆分它，因为它是未定义的。

当您使用 unicode 时，“字符”是一个非常模糊的术语。有代码点、字形等。在[http://www.utf8everywhere.org](http://www.utf8everywhere.org)上查看更多信息，关于“字符串长度”的部分

# c++ - 'decltype' 的参数不正确

> ID：12404362
> 
> 赞同：6
> 
> 时间：2012-09-13T10:36:57.913
> 
> 标签：c++, visual-studio-2010

```
template<class T>
std::vector<T> convert(int argument)
{
}

int main()
{
  decltype(&convert<int>);
  return 0;
} 
```

以下给出了 Visual Studio 2010 的此错误：

```
error C3555: incorrect argument to 'decltype' 
```

为什么？

我正在尝试创建一个 std::map ，其中键是枚举，值是函数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T10:48:39.980

[VS2010 错误](http://softnfuzzy.blogspot.be/2011/12/decltype-on-visual-studio.html)。该链接也有一个解决方法：

```
template <typename T> T identity(T);
decltype(identity(&convert<int>)); 
```

# html - arial 窄体是 serif 还是 sans serif？

> ID：12404369
> 
> 赞同：-2
> 
> 时间：2012-09-13T10:37:24.910
> 
> 标签：html, fonts

我在站点菜单中使用 arial 窄字体。据说你不应该在菜单中使用衬线字体。我只是想知道 arial 窄字体是 serif 还是 sans serif？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T10:43:25.650

Sans-serif 基本上是法语的“无衬线”。

衬线是字体设计师用来使字体看起来不同的艺术线条，但不应减损字母形状。

如果您查看无衬线字体的 T，您通常会看到一条垂直线和一条水平线。在衬线字体中，可能有短线悬挂在水平线的任一端。这些是衬线。

在我的 Windows 系统上，Arial 是无衬线字体，而 Times New Roman 是衬线字体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:40:08.340

Arial Narrow 是无衬线字体。[在此处](http://en.wikipedia.org/wiki/Sans-serif)阅读有关衬线和无衬线的更多信息。

# javascript - JS - getElementById 不工作。Firefox 抛出：语法错误 Chrome 抛出：意外 }

> ID：12404373
> 
> 赞同：0
> 
> 时间：2012-09-13T10:37:35.410
> 
> 标签：javascript, forms, this, getelementbyid

验证表单不起作用。您可以在下面看到代码和错误消息。不要认为是 JS 的问题，Chrome 和 Firefox 指向 HTML 部分。请参阅我从 Firefox 的 Firebug 制作的屏幕截图。

![在此处输入图像描述](../Images/277bb333daaf9d600c727775fba24a43.png)

HTML：

```
<div>Enter your state code:<input id="state" name="state" type="text" size="2" onblur="isStateOk(this.document.getElementById("state_help"));"/>        
<span id="state_help"></span></div> 
```

Javascript：

```
function isStateOk(inputField, helpId) {        // See if the input value contains any text

    return editNodeText (/^A[LKSZRAEP]|C[AOT]|D[EC]|F[LM]|G[AU]|HI|I[ADLN]|K[SY]|LA|M[ADEHINOPST]|N[CDEHJMVY]|O[HKR]|P[ARW]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY]$/, inputField.value, helpId, "Enter a State Code in Uppercase (Ex.NY, PA, CA)");
} 
```

注意：`eclipse`在（“”）下显示红色虚线`state_help`。也许`id`根本`span`找不到？虽然开始打字时我确实得到了代码帮助`state_`

更新： JAVASCRIPT 文件：指向以下文件中第一个函数的新错误消息：

```
function editNodeText(regex, input, helpId, helpMessage) {        // See if the visitor entered the right information

    if (!regex.test(input)) {          // If the wrong information was entered, warn them

        if (helpId != null)

            while (helpId.firstChild) // Remove any warnings that may exist

                helpId.removeChild(helpId.firstChild);

                helpId.appendChild(document.createTextNode(helpMessage)); // Add new warning

                return false;
    } else {          // If the right information was entered, clear the help message

        if (helpId != null){

            while (helpId.firstChild) // Remove any warnings that may exist

                helpId.removeChild(helpId.firstChild);
        }

        return true;

    }   
}

//inputField – ID Number for the html text box
//helpId – ID Number for the child node I want to print a warning in
//See if the input value contains any text
function isTheFieldEmpty(inputField, helpId) {          

    return editNodeText(/^[A-Za-z\.\' \-]{2,15}\s?[A-Za-z\.\' \-]{2,15}\s?[A-Za-z\.\' \-]{2,15}/, inputField.value, helpId, "Please enter a valid name.");
} // inputField.value – Value typed in the html text box

function isAddressOk(inputField, helpId) {        // See if the input value contains any text

    return editNodeText(/^[A-Za-z0-9\.\' \-]{5,30}$/, inputField.value, helpId, "Enter a Street (Ex.1234 Main St.)");
}

function isStateOk(inputField, helpId) {        // See if the input value contains any text

    return editNodeText (/^A[LKSZRAEP]|C[AOT]|D[EC]|F[LM]|G[AU]|HI|I[ADLN]|K[SY]|LA|M[ADEHINOPST]|N[CDEHJMVY]|O[HKR]|P[ARW]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY]$/, inputField.value, helpId, "Enter a State Code in Uppercase (Ex.NY, PA, CA)");
}

function isPhoneOk(inputField, helpId) {        // See if the input value contains any text

    return editNodeText(/^([0-9]( |-)?)?(\(?[0-9]{3}\)?|[0-9]{3})( |-)?([0-9]{3}( |-)?[0-9]{4}|[a-zA-Z0-9]{7})$/, inputField.value, helpId, "Enter a Phone Number (Ex.412-828-3000)");
}

function isEmailOk(inputField, helpId) {        // See if the input value contains any text

    return editNodeText(/^[A-Za-z0-9._-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/, inputField.value, helpId, "Enter an Email (Ex. cimdata@javascript.de)");

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:39:12.453

对包含在 html 属性的双引号中的 JS 字符串使用单引号，否则结果无法解析；

从：

```
onblur="isStateOk(this.document.getElementById("state_help"));"/> 
```

到：

```
onblur="isStateOk(this.document.getElementById('state_help'));"/> 
```

# jquery - 在ajax通话期间挂起的cordova phonegap页面

> ID：12404374
> 
> 赞同：0
> 
> 时间：2012-09-13T10:37:38.027
> 
> 标签：jquery, iphone, xcode, cordova, xcode4.2

我正在将cordova phonegap 用于移动应用程序。使用设置超时功能，我在页面加载后通过 ajax 调用一些数据。但是，当我使用它时，应用程序在 ajax 数据传输期间的时间间隔内被挂起。之后一切都运行良好。怎么解决，有什么办法

```
window.setTimeout(function(){

                                  // $("#home").slideDown(1000);

                                  // $("#home").addClass('curr');

                                  $("#datepicker").datepicker({ minDate: +1, maxDate: "+12M" });
                                  var twitterBox = $("#twitterBox");
                                  $.getJSON("http://api.twitter.com/1/users/show.json?screen_name=santanu1122&callback=?", function(tweetdata) {
                                            twitterBox.append("<p id=\"twitterUser\" class=\"twick\"><a onclick=\"newWin(this.href);return false;\" href=\"http://twitter.com/"+tweetdata.screen_name+"\">@"+tweetdata.screen_name+"</a><br/>Followers: "+tweetdata.followers_count+" Tweets: "+tweetdata.statuses_count+"</p>\n");
                                            getTweets();
                                            });

                                  $.ajax({
                                         type: "POST",
                                         url: "http://XXXXXXXXXXXXXX/fetchnewsfeed.php",
                                         data:"",
                                         success: function(newsfeedbyadmindetails){
                                         $('#newsfeedbyadmin').html(newsfeedbyadmindetails);
                                         $('#example1').fbWall({ id:'santanu.ece',accessToken:'XXXXxxxxxxxxxxxxxxxxxx'});
                                         }
                                         }).bind();

                                  }, 5500); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:09:15.720

最好的方法是扩展这一切-不要一起加载，先加载facebook，然后在几秒钟后加载twitter等等......

如果结果太多，Tou 甚至可以从 twitter 中拆分结果。然后，您可以每隔几秒钟更新 20 个结果 - 只要确保页面不会在当前视图之外滚动太多，如果可能的话。

另一种方法是在您进行更新并在之后隐藏它时使用一条消息 - 例如“正在加载...”。

这实际上取决于您正在寻找的用户体验。

# iphone - 再次设置后从 iPhone 中的 NSUserDefault 检索值

> ID：12404376
> 
> 赞同：0
> 
> 时间：2012-09-13T10:37:44.413
> 
> 标签：iphone, ios5, nsuserdefaults

在 App 委托中，我有以下代码：

```
NSUserDefaults *pref = [NSUserDefaults standardUserDefaults];
NSString *alrmTime = @"10:00 AM"; 
[pref setObject:alrmTime forKey:@"alarmTime"];
[prefs synchronize]; 
```

从这里我使用代码从控制器 A 中的 App 委托用户 Daeault 获取

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSString *tempAlarmTime = [defaults stringForKey:@"alarmTime"];
cell.textLabel.text = [NSString stringWithFormat:@"Remind At %@", tempAlarmTime]; 
```

现在，我需要在 Controler B 中设置这个用户默认值，对于这个 m 使用这个：

`NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults]; [prefs setObject:mTimeIntervalSTR forKey:@"alarmTime"]; [prefs synchronize];`

现在，当我需要在控制器 A 中获取这个新值时，它即将到来的 Null。为什么会发生这种情况，我将如何获得新的设定值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:53:04.853

在控制器 B 中使用以下内容更改用户默认值

```
NSString *timeString =[[[NSUserDefaults standardUserDefaults] objectForKey:@"alarmTime
    "]mutableCopy];

        timeString = mTimeIntervalSTR;

 [[NSUserDefaults standardUserDefaults]setObject:timeString
     forKey:@"alarmTime "]; 

        [[NSUserDefaults standardUserDefaults]synchronize]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-13T10:41:59.370

添加值后，调用`[[NSUserDefaults standardUserDefaults] synchronize];`.

# php - 在 preg_replace 中使用 strtr？

> ID：12404378
> 
> 赞同：0
> 
> 时间：2012-09-13T10:37:52.973
> 
> 标签：php, preg-replace, strtr

我想在 preg_replace中重新格式化`preg_replace()`匹配。`strtr()`是否可以 ？

我做了以下事情：

```
$array = array("#" => "_", "/" => "-");
$output = preg_replace($regex, '<span>'.strtr('$0', $array).'</span>', $input); 
```

在我的示例中，Z#（对应于我的`preg_replace`匹配项，$0 中的`strtr`）应该变为 Z_，但没有任何反应。

谢谢 ！

*注意。$regex 是一个匹配 $input 某些部分的正则表达式，它可以工作。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:17:07.567

使用**e** -修饰符：

```
$output = preg_replace('/$regex/e', '"<span>".strtr("$0", $array)."</span>"', $input); 
```

# android - Sip 呼叫在 Android 果冻豆中不起作用

> ID：12404379
> 
> 赞同：1
> 
> 时间：2012-09-13T10:37:58.067
> 
> 标签：android

SIP 调用在 Android 果冻豆版本中不起作用。但相同的代码适用于冰淇淋三明治版本。在果冻豆中出现错误“sip 注册失败”和“无法创建 sip 会话，网络不可用”。我在 Nexus 果冻豆版平板电脑中检查了这个应用程序。

这是我的代码。请任何人帮助我...！

**代码**：

```
SipProfile.Builder builder = new SipProfile.Builder(name, domain);
builder.setPassword(password);
me = builder.build();
Intent i = new Intent();
i.setAction("android.SipDemo.INCOMING_CALL");

PendingIntent pi = PendingIntent.getBroadcast(SipRegActivity.this, 0,i,Intent.FILL_IN_DATA);
manager.open(me, pi, null);

updateStatus("is opened ::  "+manager.isOpened(me.getUriString()));

manager.setRegistrationListener(me.getUriString(),new SipRegistrationListener() {

public void onRegistering(String localProfileUri) {
    updateStatus("SipRegistering ... ");
}

public void onRegistrationDone(String localProfileUri,long expiryTime) {
    updateStatus("SipRegistering done ... ");
}

        public void onRegistrationFailed(String localProfileUri, int errorCode,String errorMessage) {

    }
});

initiateCall();

public void initiateCall() {

    audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);

    try {
        SipSession.Listener sessionListener = new SipSession.Listener(){
            @Override
            public void onCalling(SipSession session) {

                String callId = session.getCallId();

            }

        };
        SipAudioCall.Listener listener = new SipAudioCall.Listener() {

            @Override
            public void onCallEstablished(SipAudioCall call) {

                updateStatus("Call is Established");
            }

            @Override
            public void onRinging(SipAudioCall call, SipProfile caller) { 
                super.onRinging(call, caller);
            }

            @Override
            public void onRingingBack(SipAudioCall call) {

                super.onRingingBack(call);

                 updateStatus("Ringing"+call.getState());

            }

            @Override
            public void onCallEnded(SipAudioCall call) {
                updateStatus("Call Ended.");

            }
        };

        SipSession ss = manager.createSipSession(me, sessionListener);
        call = manager.makeAudioCall(me.getUriString(),peerproile, listener, 120);
        call.startAudio(); 
```

我也被授予权限。

并且还检查了 isVoipSupported() 和 isApiSupported()。这些方法返回 true。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:43:04.103

它不依赖于 Android OS ICS 或 JB，它依赖于您的物理设备。

并非所有 Android 设备都支持使用 SIP 的 VOIP 呼叫。您应该始终调用`isVoipSupported()`以验证设备是否支持 VOIP 呼叫并`isApiSupported()`验证设备是否支持 SIP API。

[参考这里：](http://developer.android.com/guide/topics/connectivity/sip.html#requirements)

# html - 将子 div 标签水平放置，尽管父 div 标签宽度

> ID：12404380
> 
> 赞同：3
> 
> 时间：2012-09-13T10:38:04.293
> 
> 标签：html, css

鉴于这个CSS：

```
#parent {
    width: 100px;
    height: 100px; 
    background-color: #090;
}
.childs {
    width: 50px;
    height: 50px; 
    background-color: #009;
    border: 1px solid #999;
} 
```

这个html：

```
 <div id="parent">
        <div class="childs"><p>aaa</p></div>
        <div class="childs"></div>
        <div class="childs"></div>
   </div> 
```

这是演示 [http://jsfiddle.net/A3PJu/2/](http://jsfiddle.net/A3PJu/2/)

我希望孩子 div 水平放置而不是垂直放置（就像现在一样），如何做到这一点？

`float: left`对于儿童标签，在这种情况下不起作用

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T10:44:07.833

您可以将**display:inline-block**与**white-space:nowrap**一起使用。像这样写：

```
#parent {
        width: 100px;
        height: 100px;
        background-color: #090;
        white-space:nowrap;
        font-size:0;
    }
    .childs {
        width: 50px;
        height: 50px;
        background-color: #008;
        border: 1px solid #999;
        display:inline-block;
        *display:inline;/* For IE7 */
        *zoom:1;/* For IE7 */
        white-space:normal;
        font-size:13px;
        vertical-align:top;
    } 
```

检查这个[http://jsfiddle.net/A3PJu/3/](http://jsfiddle.net/A3PJu/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:41:21.763

问题是父元素的宽度不够大 3 倍 50px `.childs`。如果你将`#parent`宽度增加到 200px，`float: left`就可以了。

# colors - 我的窗口标题在哪里？

> ID：12404381
> 
> 赞同：0
> 
> 时间：2012-09-13T10:38:06.863
> 
> 标签：colors, window, titanium, appcelerator, title

大家，我的问题很简单：我正在使用Android模拟器。我尝试创建一个带有标题的简单空窗口（如此简单））但是.....为什么这段代码不能正常工作：

```
Ti.UI.setBackgroundColor('#1E563F');

var win1 = Ti.UI.createWindow({
    title: 'HOY',
    exitOnClose: true
});

win1.open(); 
```

我在模拟器上看到标题为 === '我的项目名称'但 != 'HOY' 的空窗口，这是为什么呢？如果我添加字符串 navBarHidden: true 我有空的黑色窗口... WTF...我希望至少有颜色 == #1E563F 的窗口...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:36:08.487

您需要将窗口创建为：

```
var win1 = Ti.UI.createWindow({
    title: 'HOY',
    exitOnClose: true,
    navBarHidden: false,
    backgroundColor: '#1E563F'   
}); 
```

# sql - Rails ActiveRecord - 如何获取两个日期之间的记录

> ID：12404382
> 
> 赞同：24
> 
> 时间：2012-09-13T10:38:10.573
> 
> 标签：sql, ruby-on-rails, postgresql, activerecord

我有两个日期列 -`from_date`在`to_date`一个数据库表中。

例子：

*   `from_date`: **2012-09-10**
*   `to_date`: **2012-09-30**
*   `today`: **2012-09-13**

`today`如果的日期介于`from_date`和之间，我需要获取所有记录`to_date`。如何使用 SQL 查询来做到这一点？

如果我已经加载了相应的记录，我可以很容易地确定今天的日期是否介于`from_date`和之间`to_date`，但我不知道如何直接从数据库表中获取这些记录。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2014-09-19T08:57:23.190

查看[Rails 指南](http://guides.rubyonrails.org/active_record_querying.html)中的 Range 条件：

```
Client.where(created_at: (Time.now.midnight - 1.day)..Time.now.midnight) 
```

这将产生以下 SQL：

```
SELECT * FROM clients WHERE (clients.created_at BETWEEN '2008-12-21 00:00:00' AND '2008-12-22 00:00:00') 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-09-13T11:09:58.077

```
data = ModelName.where("today >= from_date AND today <= to_date") 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-12-20T16:16:04.353

A secure and easy way to do this would be:

```
Model.where(':date BETWEEN from_date AND to_date', date: Date.current) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-11-02T15:11:42.223

你可以这样使用：

```
Data = Model.where("date(now()) between from_date and to_date") 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-09-13T10:54:01.830

```
data = ModelName.find(:all, :conditions => "today >= from_date and today <= to_date") 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-10-03T08:38:13.830

这应该可以解决问题。

```
today = Date.today

data = ModelName.where("from_date <= ? AND to_date >= ?", today, today) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-02-05T13:04:23.950

您可以使用下面的 gem 来查找日期之间的记录，

这个 gem 很容易使用和更清晰[Star](https://github.com/radar/by_star)正在使用这个 gem，API 更清晰，文档也得到了很好的解释。

```
ModelName.between_times(Time.zone.now - 3.hours,  # all posts in last 3 hours
                  Time.zone.now) 
```

在这里你也可以通过我们的领域`ModelName.by_month("January", field: :updated_at)`

请查看文档并尝试一下。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-16T16:13:27.783

好的，在谷歌长时间搜索寻找一种“rails 方式”来使用两个日期字段和一个变量进行 BETWEEN 之后，我找到的最近似的解决方案是创建你自己的[范围](http://guides.rubyonrails.org/active_record_querying.html#scopes)来做到这一点。

在您的 ApplicationRecord 中写入：

```
class ApplicationRecord < ActiveRecord::Base

  scope :between_fields, -> (value, initial_date, final_date) { 
    where "('#{value}' BETWEEN #{initial_date} AND #{final_date})"
   }

end 
```

所以现在，无论你需要在哪里做一个，你都可以做：

```
@clients = Client.between_fields(params[:date], :start_date, :final_date)
# SELECT * FROM clients WHERE ('2017-02-16 00:00:00' BETWEEN start_date AND final_date) 
```

您可以将其与其他“位置”结合起来，根据需要进行具体查询。

# c# - 如何以 XML 格式从 WCF 服务读取消息？

> ID：12404386
> 
> 赞同：1
> 
> 时间：2012-09-13T10:38:20.930
> 
> 标签：c#, asp.net, .net, wcf

我有一个 WCF 服务，它有一个 GetEmployees() 方法。我需要使用*Response.Write*方法在 ASP.NET 网站中以**XML 格式显示生成的消息。**最简单的方法是什么？

 *注意：我们需要显示完整的消息；不仅是数据内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:49:12.417

编写自己的行为，可以在反序列化前得到soap消息

在类属性中实现接口并`IClientMessageInspector`使用它`IDispatchMessageInspector`

[微软](http://msdn.microsoft.com/us-en/library/aa717047.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T05:14:25.733

我使用**了 WCF 测试客户端**。引用了浏览 svc 时获得的 svc url (http://localhost:1791/CalculationService.svc)。使用工具中的**调用**操作。请参阅给我 SOAP 信封的 XML 选项卡。

你觉得这种方法有什么缺点吗？[当然我不能在asp.net中使用它。但它会满足我目前的需要]

WcfTestClient：在“Visual Studio 命令提示符”中键入“WcfTestClient”命令。[http://blogs.msdn.com/b/wcftoolsteamblog/archive/2010/01/04/tips-for-launching-wcf-test-client.aspx](http://blogs.msdn.com/b/wcftoolsteamblog/archive/2010/01/04/tips-for-launching-wcf-test-client.aspx)*

# jquery - 如何在 H1 和 href 标签中放置第一个单词

> ID：12404390
> 
> 赞同：3
> 
> 时间：2012-09-13T10:38:31.280
> 
> 标签：jquery

我正在尝试在 H1 标签中的第一个单词周围插入一个跨度。

不幸的是，标签也可以是链接，并且可以包含类等，例如：

1.  来源 =`<h1>This is a test</h1>`

    输出 =`<h1><span>This</span> is a test</h1>`

2.  来源 =`<h1 class="blah blah"><a href="#">This is a test<a/></h1>`

    输出 =`<h1 class="blah blah"><a href="#"><span>This</span> is a test<a/></h1>`

有没有人在说jQuery之前做过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:42:59.983

这可以通过

```
$(' your selecter').each(function(){
     var one = $(this);
     one.html(one.html().replace(/^(\w+)/, '<span>data</span>'));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:54:19.410

你可以试试这个，它适用于这两个例子。

```
$('h1').each(function(){
     var self = $(this);
     var p = self.text().split(' ');
     var html = self.html().replace(p[0], '<span>'+ p[0] +'</span>');
     self.html(html);
}); 
```

检查这个**[演示](http://jsfiddle.net/6seeW/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T10:44:20.210

适用于其中的“a”标签和纯文本。

```
$('h1').each(function(){
        if($(this).find('a').length>0)
        {
            var text = $(this).find('a').html();
            text = text.split(' ');
            if(text.length>0)
            {
                text[0] = '<span>' + text[0] + '</span>';
                $(this).find('a').html(text.join(' '));
            }
        }
        else
        {
            var text = $(this).html();
            text = text.split(' ');
            if(text.length>0)
            {
                text[0] = '<span>' + text[0] + '</span>';
                $(this).html(text.join(' '));
            }
        }
    }); 
```

[**演示**](http://jsfiddle.net/vUneZ/5/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T10:42:01.533

查看[lettering.js](http://letteringjs.com/) 你可以让它包裹单词和字母。这很棒。

# javascript - jQuery 和 IE 的问题

> ID：12404393
> 
> 赞同：0
> 
> 时间：2012-09-13T10:38:51.150
> 
> 标签：javascript, jquery, internet-explorer, opacity

我正在构建一个自定义 jQuery 幻灯片，它可以有效地查看每个“幻灯片”并一次隐藏其中的所有“框架”，然后查看下一张幻灯片，并取消隐藏其中的所有框架。很简单。

幻灯片在 Chrome 和 Firefox 中完美运行，但在 IE9 中不适用（还没有在 IE8 或更低版本中进行测试）。在 IE9 中，该脚本成功地隐藏了当前幻灯片中的框架，但并未按应有的方式取消隐藏下一张幻灯片中的框架。

Javascript：

```
function slideshow(){

var slides = $('.slide'); //all slides
var delay = 8000; // 3s //delay between slides. must be at least 3 times speed
var speed = 3500;
var gap = 1000;

//for each slide
$.each(slides, function(index, value){ 

    //run animation function after each delay
    setTimeout(function(){
        changeSlides(index);
    }, delay + (delay * index));
});

function changeSlides(i){
    lastIndex = slides.length - 1;
    prevIndex = i-1;
    nextIndex = i+1;

    curSlide = slides[i];
    prevSlide = slides[prevIndex];
    nextSlide = slides[nextIndex];
    firstSlide = slides[0];
    lastSlide = slides[lastIndex];

    $(curSlide).removeClass("active-slide");
    removeFrames(curSlide);

    if (i == (lastIndex)){ // if last slide 
        $(firstSlide).addClass("active-slide");
        addFrames(firstSlide);
        slideshow();
    }else{
        $(nextSlide).addClass("active-slide");
        addFrames(nextSlide);
    }
};

function removeFrames(slide){
    remFrames = $(slide).find('.frame');
    console.log(remFrames); 
    $.each(remFrames, function(index, value){

        setTimeout(function(){
            frame = remFrames[index];
            $(frame).animate({"opacity" : 0}, speed);

        }, gap + (gap * index));

    });
};

function addFrames(slide){
    frames = $(slide).find('.frame');

    $.each(frames, function(index, value){

        setTimeout(function(){
            frame = frames[index];
            $(frame).animate({"opacity" : 1}, speed);

        }, gap + (gap * index));

    });
};

};

slideshow(); 
```

在 IE 中，可以正常工作，`removeFrames`但似乎没有返回任何元素，因此序列没有运行。这个问题不会出现在函数中，即使它们实际上除了值之外是相同的。`.find``addFrames``.each``removeFrames``opacity`

HTML：

```
<div class="slideshow">
<!-- 1 -->
<div class="slide v-pair active-slide">
    <div class="grid-wrap">
            <div class="grid-col col-one-half frame">
                <img src="assets/img/photos/ferme-fireplace.jpg" alt="La Ferme d'elise" />
            </div>
            <div class="grid-col col-one-half frame">
                <img src="assets/img/photos/ferme-ext.jpg" alt="La Ferme d'elise" />
            </div>
    </div>
</div>

<!-- 2 -->
<div class="slide h-pair">
    <div class="frame">
        <img src="assets/img/photos/ferme-night.jpg" alt="La Ferme d'elise" class="h-image" />
    </div>
    <div class="frame">
        <img src="assets/img/photos/ferme-group.jpg" alt="La Ferme d'elise" class=" frame" />
    </div>
</div>

<!-- 3 -->
<div class="slide full">
    <div class="frame">
        <img src="assets/img/photos/ferme-dining.jpg" alt="La Ferme d'elise" class="frame" />
    </div>
</div>

<!-- 4 -->
<div class="slide v-trio">
    <div class="grid-wrap">
            <div class="grid-col col-one-half frame">
                <img src="assets/img/photos/ferme-fireplace.jpg" alt="La Ferme d'elise" />
            </div>
            <div class="grid-col col-one-half frame">
                <div class="h-col">
                    <img src="assets/img/photos/ferme-suite-alt.jpg" alt="La Ferme d'elise" />
                </div>
                <div class="h-col frame">
                    <img src="assets/img/photos/ferme-lounge-alt.jpg" alt="La Ferme d'elise" />
                </div>
            </div>
    </div>
</div>

<!-- 5 -->
    <div class="slide h-trio">
        <img src="assets/img/photos/ferme-night.jpg" alt="La Ferme d'elise" class="h-image frame" />
        <div class="grid-wrap">
            <div class="grid-col col-one-half frame">
                <img src="assets/img/photos/ferme-lounge.jpg" alt="La Ferme d'elise" />
            </div>
            <div class="grid-col col-one-half frame">
                <img src="assets/img/photos/ferme-suite.jpg" alt="La Ferme d'elise" />
            </div>
        </div>
    </div>
</div> 
```

如果有人可以帮助或指出正确的方向来解决此问题，将不胜感激！

# android - 如何检查 Android 应用程序是否由用户或其他应用程序启动

> ID：12404395
> 
> 赞同：3
> 
> 时间：2012-09-13T10:38:57.847
> 
> 标签：android

Android有没有办法检查应用程序是由用户启动还是由另一个应用程序/系统启动？例如，应用程序提供服务或注册为内容提供者。当它启动时，我需要知道它是由交互式用户直接启动的，还是通过 startService 启动的，还是由 ContentResolver 启动的。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:01:26.033

您可以将一些额外的数据（捆绑）放入`Intent`启动您的应用程序。额外数据中不同类型的值将允许您确定哪个服务（或其他）启动了您的应用程序。

# php - 无法获取流内容 - 导致内部服务器错误

> ID：12404396
> 
> 赞同：0
> 
> 时间：2012-09-13T10:39:04.143
> 
> 标签：php, sockets, curl

我想验证来自贝宝的 IPN 响应，但由于某种原因我无法读取响应。

这是我正在尝试使用的代码：

```
$fp = fsockopen ('ssl://www.sandbox.paypal.com', 443, $errno, $errstr, 30);

if(!$fp)die();

fputs($fp, $header . $postback);

$res=stream_get_contents($fp); #this triggers 500 error 
```

它确实打开了一个连接，确实`fputs`，但是在最后一行它挂断了，并且在相当长的等待返回之后`500 error`。

有什么想法有什么问题吗？

**注意：**即使我评论该`fputs`行，也会发生完全相同的事情。

标题：

```
$postback='cmd=_notify-validate&'.http_build_query($_POST);

// build the header string to post back to PayPal system to validate
$header = "POST /cgi-bin/webscr HTTP/1.1\r\n";
$header .= "Host: www.sandbox.paypal.com\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Content-Length: " . strlen($postback) . "\r\n\r\n"; 
```

**编辑**

我尝试使用 curl，但它总是让我得到一个空的响应：

```
$ch = curl_init( 'https://www.sandbox.paypal.com/cgi-bin/webscr' );
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1) ;
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $postback);
$strCurlResult = curl_exec($ch);
curl_close( $ch );
echo $strCurlResult; 
```

上面的代码什么也没输出。

# javascript - JSON 的 application/json 标头无法在 chrome/IE 上运行，而在 Firefox 上运行良好

> ID：12404405
> 
> 赞同：0
> 
> 时间：2012-09-13T10:39:24.230
> 
> 标签：javascript, jquery, ajax, json

我正在发送一个 ajax 请求来提取 Web 服务列表，然后稍后在表格中显示它们。但是，该代码可以在 Firefox 上正确运行，但不能在 chorome 和 IE 上运行。

**阿贾克斯请求：**

```
$.ajax({
   url: 'http://dev.ragld.com/services/',
   method: 'GET',
   accept: 'application/json',
   beforeSend: setHeader,
   async: false, 
   success: function(data){  
       var servicesObj = $.parseJSON(data);

       $.each(servicesObj, function(i, serviceItem){
           alert(serviceItem.name);
       });
   }
});

//function to setup header information
function setHeader(xhr){
    xhr.setRequestHeader('accept', 'application/json'); 
} 
```

**JSON响应：**

```
[
    {
        "name": "OS-ONS-bar",
        "type": "RelationshipService",
        "endpoint": "http://dev.ragld.com/services/bar/"
    },
    {
        "name": "OS-ONS-sameAs",
        "type": "RelationshipService",
        "endpoint": "http://dev.ragld.com/services/sameas/"
    },
    {
        "name": "Maths Service 2",
        "type": "ArithmeticService",
        "endpoint": "http://dev.ragld.com/services/arithmetic/"
    }
] 
```

**错误我用上面的代码进入chrome：**

```
Uncaught TypeError: Cannot read property 'length' of null jquery.min.js:2
e.extend.each jquery.min.js:2
$.ajax.success admin.php:157
f.Callbacks.o jquery.min.js:2
f.Callbacks.p.fireWith jquery.min.js:2
w jquery.min.js:4
f.support.ajax.f.ajaxTransport.send.d jquery.min.js:4
f.support.ajax.f.ajaxTransport.send jquery.min.js:4
f.extend.ajax jquery.min.js:4
(anonymous function) admin.php:148
f.Callbacks.o jquery.min.js:2
f.Callbacks.p.fireWith jquery.min.js:2
e.extend.ready jquery.min.js:2
c.addEventListener.B 
```

**问题：**

1.  这适用于 Firefox，但不适用于 Chrome 和 IE。
2.  现在，如果我删除它`$.parseJSON`，那么它可以在 chrome 上工作，但不能在 firefox/IE 上工作

PS：ajax 请求是向不同的服务器发出的，此代码是不同的。任何人都请提供适用于所有浏览器的解决方案？？？

**EDIT1：** 看起来chrome会自动解析它或获取json标头，而在firefox中我们需要使用parseJSON显式解析它？？？有任何想法吗？

**EDIT2（来自 FireFox 的 console.log）：**

```
[{"name":"OS-ONS-bar","type":"RelationshipService","endpoint":"http:\/\/dev.ragld.com\/services\/bar\/"},{"name":"OS-ONS-sameAs","type":"RelationshipService","endpoint":"http:\/\/dev.ragld.com\/services\/sameas\/"},{"name":"Maths Service 2","type":"ArithmeticService","endpoint":"http:\/\/dev.ragld.com\/services\/arithmetic\/"}] 
```

**来自 Chrome 的 console.log：** ![在此处输入图像描述](../Images/a378f40568957c1c0803c85c34a53379.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T12:04:55.420

您应该将[ajax 选项](http://api.jquery.com/jQuery.ajax/) `dataType`指定为“json”。否则 jQuery 将不得不猜测它应该返回什么数据类型，你可能会得到各种结果。

> **数据类型**
> 
> 如果没有指定，jQuery 将尝试根据响应的 MIME 类型推断它（XML MIME 类型将产生 XML，在 1.4 中 JSON 将产生一个 JavaScript 对象，在 1.4 中脚本将执行脚本，其他任何内容都将是作为字符串返回）。

查看我在 FF、IE 和 Chrome 中运行的[**演示。**](http://jsfiddle.net/WXX9H/)

您应该检查 XHR 响应并确保您的服务实际上正在返回 JSON。

# java - iBatis 3 - 用于连接的多列集合

> ID：12404406
> 
> 赞同：1
> 
> 时间：2012-09-13T10:39:27.430
> 
> 标签：java, join, ibatis

我对 iBatis 3 及其 Collection 声明有一点问题。

例如，我有一个名为 Boy 的 POJO，其属性为 List girlFriends；

一个男孩可能有多个女孩。

通常我使用带有集合语句的 resultMap，例如：

```
<collection property="girlFriends" column="idBoy" 
                     javaType="List" ofType="Girl"
                     select="package.GirlDao.loadGirlsByIdBoy" /> 
```

当加载方法需要 Map 中使用的多个参数时，我该如何做同样的事情？

在 GirlDao 中采用这个加载方法：

```
loadGirlByBoy(@Param("idBoy") Long idBoy, @Param("sex") String sex); 
```

我试图做这样的事情（将“性”列添加到集合中）：

```
<collection property="girlFriends" column="idBoy,sex" 
                         javaType="List" ofType="Girl"
                         select="package.GirlDao.loadGirlsByBoy" /> 
```

但它不起作用。

如何在没有对象的情况下进行具有多个参数的“连接”？

谢谢。

# file - 如何从除最新文件外的通用名称目录中删除 unix 文件

> ID：12404414
> 
> 赞同：0
> 
> 时间：2012-09-13T10:40:09.483
> 
> 标签：file, unix, delete-file

我有多个名称格式如下所述的文件：

1.  ABC_Report_v-20120801_1741.csv
2.  ABC_Report_v-20120801_1741.csv
3.  ABC_Report_v-20120907_1254.csv
4.  XYZ_Dashboard_v-20120802_1804.csv
5.  XYZ_Dashboard_v-20120806_2031.csv
6.  XYZ_Dashboard_v-20120802_1946.csv

我想删除除了最新的文件之外的所有文件，`ABC_Report_v-20120907_1254.csv`并且应该删除字符`XYZ_Dashboard_v-20120802_1946.csv` 之前具有相同名称的多个文件，只保留最新的文件。`_v`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:00:19.620

请注意，这不能防止重复行。您应该`uniq`在像这样处理之前列出您的文件列表，或者记住在尝试删除已经消失的文件时忽略错误。

```
$ awk -F- 'NR>1 && $1==base {print last} {base=$1;last=$0}' files.txt
ABC_Report_v-20120801_1741.csv
ABC_Report_v-20120801_1741.csv
XYZ_Dashboard_v-20120802_1804.csv
XYZ_Dashboard_v-20120806_2031.csv 
```

从这里开始，一旦您确认匹配的文件是要保留的文件，您就可以通过`xargs -n 1 rm`.

请注意，此解决方案*要求*您的文件列表按日期预先排序。这应该是`ls`大多数系统的默认行为。所以：

```
$ ls | awk '...' | xargs -n 1 rm -v 
```

在您对自己所做的事情不是 100% 有信心的情况下进行程序化删除之前，请务必备份您的数据。哎呀，无论如何都要备份您的数据。永远不知道下一个太阳黑点什么时候会到来。

# php - EXEC 功能无法以所需的方式工作

> ID：12404415
> 
> 赞同：0
> 
> 时间：2012-09-13T10:40:13.583
> 
> 标签：php, mysql, console

我正在尝试`exec()`在 php 中使用，但看起来我所有的努力都是徒劳的！

请帮助我：我的代码有什么问题？

```
$cmd = "mysqldump -u root my_db table1 table2 > /home/aditi/Desktop/databasedump.sql";              
$res = exec($cmd , $ot , $res); 
```

但我没有看到这个文件。但是当我在控制台上这样做时没有问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:46:21.857

代码是正确的。确保正在执行 PHP 文件的用户具有写入指定文件夹的权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:46:27.363

几个可能的原因：

*   转储密码丢失：`$cmd = "mysqldump -u root -pPassword my_db table1 table2 > /home/aditi/Desktop/databasedump.sql";`

*   运行 shell 时，mysqldump 不在路径中：`$cmd = "/usr/bin/mysqldump -u root -pPassword my_db table1 table2 > /home/aditi/Desktop/databasedump.sql";`

*   不要忘记 webserver 进程以另一个用户身份运行，就像在 shell 中运行代码一样。确保网络服务器用户 ID 有权访问用于写入转储的文件夹。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T11:04:52.547

您是否检查过其他使用 exec 的简单命令，例如 echo exec("pwd");。如果这不起作用，请检查您的域是否启用了安全模式。如果是，请关闭安全模式。如果该代码正在运行，请检查文件夹的路径和权限。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T11:09:13.043

1.  正如@Kalai 指出的那样，尝试其他简单的命令来查看是否`exec`有效。

2.  `sudo`作为 PHP 用户并从 shell 执行同一行以查看它是否在 PHP 脚本之外工作。相关：[https ://serverfault.com/questions/252552/sudoers-syntax-to-run-shell-script-as-php-user](https://serverfault.com/questions/252552/sudoers-syntax-to-run-shell-script-as-php-user)

# javascript - GoogleFeed 检索图像

> ID：12404416
> 
> 赞同：0
> 
> 时间：2012-09-13T10:40:19.983
> 
> 标签：javascript, rss, google-feed-api

我正在使用 GoogleFeed API ( [https://developers.google.com/feed/](https://developers.google.com/feed/) ) 使用以下代码检索 RSS 提要：

```
 function loadAuto(){
    google.load("feeds", "1");  
    function initialize() {
        var feed = new google.feeds.Feed("http://www.automoto.sk/rss");
        feed.setNumEntries(window.localStorage.getItem("entriesNumber"));
        feed.load(function(result) {
            if (!result.error) {
                var feedlist = document.getElementById("feedAuto");
                for (var i = 0; i < result.feed.entries.length; i++) {
                    var li = document.createElement("li");
                    var entry = result.feed.entries[i];
                    var A = document.createElement("A");
                    var descriptionSettings = window.localStorage.getItem("descriptionSettings");
                    if (descriptionSettings=="true"){
                        var h3 = document.createElement("h3");
                        var p = document.createElement("p");
                        var pDate = document.createElement("p");
                        pDate.setAttribute("style","text-align: right; margin-top: 5px;");
                        var publishedDate = new Date(entry.publishedDate);
                        publishedDateConverted = convertTime(publishedDate);
                        pDate.appendChild(document.createTextNode(publishedDateConverted));
                        h3.setAttribute("style","white-space: normal;")
                        h3.appendChild(document.createTextNode(entry.title));
                        p.setAttribute("style","white-space: normal;")
                        p.appendChild(document.createTextNode(entry.content));
                        A.setAttribute("href",entry.link);
                        A.appendChild(h3);
                        A.appendChild(p);
                        A.appendChild(pDate);
                        }
                    else{
                        A.setAttribute("href",entry.link);
                        A.appendChild(document.createTextNode(entry.title));
                    };
                    li.appendChild(A);
                    feedlist.appendChild(li);
                }
                $("#feedAuto").listview("refresh");
            }
        });
    }
    google.setOnLoadCallback(initialize);
}; 
```

一切正常，但我无法加载一个元素。这是RSS结构：

```
<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
  <channel>
   <title>automoto.sk</title>
   <link>http://www.automoto.sk</link>
   <description>automoto.sk</description>   
   <language>sk</language>
   <image><title>automoto.sk</title><url>http://img.automoto.sk</url><link>http: //www.automoto.sk</link></image>
   <pubDate>Thu, 13 Sep 2012 12:22:45 +0200</pubDate>
    <item>
     <title><![CDATA[Nová Kia pro_ceed: Najdynamickejší Slovák]]></title>
     <link>http://www.automoto.sk/clanok/188988/nova-kia-pro-ceed-najdynamickejsi-slovak</link>
     <pubDate>Thu, 13 Sep 2012 09:22:00 +0200</pubDate>
     <guid isPermaLink="false">5e14ddbf095fe497eaf03f9a8cd88773</guid>
     <description><![CDATA[PARÍŽ 2012    Trojdverový variant druhej generácie typu cee’d má podstatne štipľavejší dizajn ako jeho praktickejší brat.]]></description>
     <enclosure url="http://img.automoto.sk/img/20/title/1395542-img-nova-kia-pro-ceed.jpg" length="0" type="image/jpeg"></enclosure>
    </item>
</rss> 
```

我需要加载位于附件中的 img，但我不知道如何加载附件 url 变量。也许将格式更改为 XML 就可以了。我已经尝试将其更改为 XML，但我无法让它工作。因此，如果您知道如何以 JSON 格式加载图像，或者如果您知道如何转换 initialize() 函数以便它可以使用 XML 然后加载 img URL，请发表您的建议。

**PS：**你可以在这个网站找到RSS [http://www.automoto.sk/rss/](http://www.automoto.sk/rss/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:44:58.940

我已经让它使用混合格式工作。所以我的代码变成了这样：

```
var feed = new google.feeds.Feed("http://www.automoto.sk/rss");
feed.setResultFormat(google.feeds.Feed.MIXED_FORMAT); 
```

然后我添加了这个：

```
var entryImageUrl = entry.xmlNode.getElementsByTagName("enclosure")[0].getAttribute("url"); 
```

里面循环。

# css - 自动高度在 FF 和 Chrome 中不起作用

> ID：12404417
> 
> 赞同：2
> 
> 时间：2012-09-13T10:40:32.553
> 
> 标签：css

我无法让自动高度适用于 FF 或 Chrome。它在 IE 中运行良好，但在 FF 和 Chrome 中，它基本上使 div 的高度与页面本身一样多，即使内容没有填充元素。它只会在实际内容下留下一个巨大的空白区域。

```
<center>
    <div id = "choosearea">
        <div id = "logbar">
            <div id = "logbartext">Choose Your Area
            </div>
        <div id = "log">
          <a href = "?action=home">Home</a>   
          <a href = "?action=logout&NOHEADERS=1">Log Out</a>
        </div>
    </div>
    <div id = "header">
        <div id = "ss_logo">
          <img src="http://i1157.photobucket.com/albums/p595/Gamethefirst/ssnewbanner1.png">
        </div>
        <div id = "area">Serving:<br><u>SouthWest Ohio<br>Northern Kentucky<br>SouthEast Indiana</u>
        </div>  
    </div>
 <center>
    <div id = "menu">
    </div>
 </center>
    <div width = "100%" align = "center">
      <div id = "paddingbox">
        <div id = "chooseareatext">
          <p>Choose the area which you reside from the options below in order to post/view your ad.</p>
          <ul class = "bullets">
           <li><a href = "?board=swohio">SouthWest Ohio</a></li>
           <li><a href = "?board=nk">Northern Kentucky</a></li>
           <li><a href = "?board=indi">SouthEast Indiana</a></li>
          </ul>
        </div>
        <div id = "affs">
          <h3>Need Supplies? Get Great Deals From Our Friends!</h3>
        </div>
      </div>
    </div>
  </div>
</center> 
```

样式表

```
#choosearea {
    height: auto;
} 
```

这是一个例子： [http ://skillswap.boards.net/index.cgi?board=postad](http://skillswap.boards.net/index.cgi?board=postad)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:38:22.153

CSS[`height`](http://www.w3.org/wiki/CSS/Properties/height)默认值为`auto`. 正是`height:100%`on`#paddingbox`导致它`<div>`非常长，在 FF 和 Chrome 上创建了大面积的空白区域。删除它应该可以解决问题。

此外，您示例中的某些标记在 HTML 规范的较新版本中无效或已弃用。

例如`width="100%"`不是一个有效的属性。要应用内联样式，正确的语法是`<div style="width:100%">`

自 HTML 4.01 起，`<center>`标签和`align="center"`属性也已被弃用，在 HTML 5 中不存在，推荐的方法是使用 CSS 向标记添加表示方面，`margin:0 auto`例如`text-align:center`。请参阅[为什么 HTML 中不推荐使用 <center> 标记？](https://stackoverflow.com/questions/1798817/why-is-the-center-tag-deprecated-in-html)有关这方面的更多详细信息。由于问题中已经有一个样式表，它可能有助于分离内容（HTML）和演示文稿（CSS） - [http://www.alistapart.com/articles/separationdilemma/](http://www.alistapart.com/articles/separationdilemma/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T05:46:54.670

用body风格写这个：

```
position: absolute; 
```

# html - 字体在 ipad 设备中无法正常显示

> ID：12404420
> 
> 赞同：1
> 
> 时间：2012-09-13T10:40:36.437
> 
> 标签：html, ipad, web

我在 ipad 的网页上使用 Helvetica Italic New 字体，它在 pc 的浏览器上运行良好，但在设备上显示不一样。

font-family:"Helvetica Neu" 它不在设备上显示此字体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:47:05.980

Helvetica Neue 应该可以在 iOS 5 设备上使用，请参阅此处[的官方字体列表。](http://support.apple.com/kb/HT4980?viewlocale=en_US&locale=en_US)您是否正确拼写了字体名称？

# c# - Restsharp响应总是空的

> ID：12404421
> 
> 赞同：0
> 
> 时间：2012-09-13T10:40:37.570
> 
> 标签：c#, windows-phone-7, restsharp

我不知道我在这里做错了什么。它应该是非常基本的。服务器返回 JSON，我向它发送用户名和密码

```
var email = emailLoginTextBox.Text;
var password = passwordLoginTextBox.Password;
var client = new RestClient("http://www.mywebsite.com");
var request = new RestRequest("signin", Method.POST);

request.AddParameter("em", email);
request.AddParameter("pw", password);
var result = "";

client.ExecuteAsync(request, (response) =>
                                             {
                                                 result = response.Content;
                                             }
                );
Console.Write(result); 
```

executeAsync 调用似乎什么都不做。结果始终为空。我正在使用通过 Nuget 安装的最新 Restsharp。同样在 Fiddler 中，调用 executeAsync 时没有流量。这是正常的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:13:30.797

您的请求是异步的。Console.WriteLine 在回调之前执行。

尝试这个

```
var email = emailLoginTextBox.Text;
var password = passwordLoginTextBox.Password;
var client = new RestClient("http://www.mywebsite.com");
var request = new RestRequest("signin", Method.POST);

request.AddParameter("em", email);
request.AddParameter("pw", password);
var result = "";

client.ExecuteAsync(request, (response) =>
    {
        result = response.Content;
        Console.Write(result);
    }
); 
```

# javascript - 在 .csv 文件中写入度数符号

> ID：12404425
> 
> 赞同：1
> 
> 时间：2012-09-13T10:41:11.210
> 
> 标签：javascript, android, csv, utf

我正在尝试从android代码将°C和°F符号写入我的csv文件，但它在csv文件中显示了一些垃圾。提前谢谢你。请帮助我将度数符号写入 csv 文件

```
 PrintWriter csvWriter = new PrintWriter(new FileWriter(file, true));
 csvWriter.print("°C");
 csvWriter.close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T10:43:51.910

您可以在 Java 中使用摄氏温度的 Unicode 符号： **“** \u2103” ，对于华氏度，您可以使用：**“\u2109”**。

# iphone - iOS 4.3.5 和无限循环

> ID：12404426
> 
> 赞同：0
> 
> 时间：2012-09-13T10:41:18.533
> 
> 标签：iphone, objective-c, ios, xcode

iOS 4.3.5 和无限循环

有人有这个奇怪的错误吗？

1）创建一些应用程序并在任何地方添加此代码行

```
..
NSLog(@"app is started");
..
while (true)
{
// do nothing
} 
```

2) 在 iPhone iOS 4.3.5 中运行此应用程序并获得无限循环

3）按主页，然后双击主页，然后点击'-'杀死一个应用程序

4）点击应用程序在 1 秒、3 秒、10 秒、60 秒或 900 秒后重新启动他。

5）应用程序没有关闭，没有崩溃，它一直在运行。它永远无法关闭

怎么了 ？这是 iOS 4.3.5 的问题？

而且，我能知道什么用户正在尝试关闭应用程序吗？

似乎 SIGKILL 没有被调用

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:49:28.867

这似乎是 iOS 4 中的一个错误。在 iOS 5 及更早版本中它工作正常。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-13T11:53:59.743

**while(true)**等于**while(1)**如果您不提供任何条件来中断循环，这将导致任何计算机编程语言中的无限循环。它不是 iOS 4.3.5 的问题。

[参考这个](http://en.wikipedia.org/wiki/While_loop)

# java - Selenium + JUnit：测试顺序/流程？

> ID：12404430
> 
> 赞同：12
> 
> 时间：2012-09-13T10:41:28.963
> 
> 标签：java, jakarta-ee, testing, selenium, junit

我正在使用 Selenium 来测试我的 java web 应用程序的 html 页面（实际上是 JSP）。我的网络应用程序需要一个流程来访问每个页面（它是一个小型在线游戏网络应用程序），例如：要进入页面 B，您需要进入页面 A，输入一些文本并按下按钮以进入页面B. 显然我已经进行了一些测试来验证页面 A 是否正常工作。

我希望能够编写更多测试，以检查在页面 A 的测试运行后，我将让页面 B 的测试运行（等等应用程序的其余部分）。简而言之：以某种方式在我的测试中定义一些顺序。

在过去几天阅读了大量有关测试的内容后，我在这个特定主题上找不到任何有趣的东西。因此，我现在征求意见。

我已经确定的可能解决方案：

1.  为页面 A 定义（在同一个测试类中）测试方法，然后为测试 B 定义测试方法。然后命令测试方法的执行。但是我们知道 JUnit（但 TestNG 不允许）不允许测试方法执行排序，请参阅[SO question selenium-junit-tests-how-do-i-run-tests-within-a-test-in-sequential-order](https://stackoverflow.com/questions/8518314/selenium-junit-tests-how-do-i-run-tests-within-a-test-in-sequential-order)

2.  将所有测试（针对页面 A、页面 B 等）分组到一种测试方法下。但我读过它很糟糕，请参阅[SO question: junit-one-test-case-per-method-or-multiple-test-cases-per-method](https://stackoverflow.com/questions/6252187/junit-one-test-case-per-method-or-multiple-test-cases-per-method)。做硒测试时有那么糟糕吗？我已经看到一些代码这样做了，所以我认为它可能不是。

3.  将所有测试（对于页面 A、页面 B 等）分组在一个测试方法下，但使用 JUnit 的 ErrorCollector 类：[ErrorCollector](http://www.catosplace.net/blogs/personal/2009/09/04/junit-4-7-error-collector-core-rule/)允许您在同一方法中执行有序检查，如果失败但让方法（因此检查）一直运行到最后。这个解决方案对我来说似乎太“残酷”了。

4.  使用 JUnit 的 TestSuite 类：它按照套件中定义的测试类的顺序运行套件中列出的测试。因此，这将涉及在测试类中使用独立的测试方法来测试页面 A（比如说 TestA），然后是在测试类中测试页面 B 的所有测试方法（比如说 TestB），等等。然后将它们插入到测试套件中，例如 @SuiteClasses( {TestA.class, TestB.class, TestC.class, ...} )

5.  将[JUnit 的 TestSuite 类](http://www.junit.org/apidocs/junit/framework/TestSuite.html)与 JUnit 的 ErrorCollector 类结合使用。哦，好吧，既然我们可以，您可能希望在不同的类中对每个页面进行分组测试，并在该组页面之上使用 ErrorCollector 测试“区域”。如果您的网页非常密集或其他原因，此解决方案可能非常有用。

6.  相当激进：使用其他工具（例如[TestNG](http://testng.org/)）来访问测试方法排序等功能。

注意：我想有些人会推荐最后一个解决方案（迁移到 TestNG），但我也想听听与 JUnit 相关的其他想法/意见。例如，如果我在一个无法（由于某种原因）迁移到另一个测试框架的团队中工作，那么他们将如何解决这个测试排序问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T12:25:14.227

为什么要迁移？您可以使用 JUnit 进行单元测试，并使用另一个框架进行更高级别的测试。在您的情况下，它是一种接受或功能或端到端，您如何命名它并不重要。但重要的是要了解这些测试*不是*单元测试。它们遵循不同的规则：它们更复杂，运行时间更长且频率更低，它们需要复杂的设置，外部依赖，并且可能偶尔会失败。为什么不为他们使用另一个框架（甚至是另一种编程语言）？

可能的变体是：

*   BDD 框架：已经提到过[Cucumber](http://cukes.info/)、[JDave](http://jdave.org/)、[JBehave](http://jbehave.org/)、[Spock](http://code.google.com/p/spock/)。例如，Spock 是基于 JUnit 和 Groovy =)
*   [测试NG](http://testng.org/doc/index.html)

如果添加另一个框架不是一个选项：您为 JUnit 枚举了更多选项，那么我可以想象 =) 我会将流的整个测试脚本放在一个测试方法中，并将测试代码组织到“驱动程序”中。这意味着您的端到端测试不会直接调用您的应用程序或 Selenium API 的方法，而是将它们包装到驱动程序组件的方法中，这些方法隐藏了 API 的复杂性，并且看起来像是发生了什么或预期什么的陈述。看例子：

```
@Test 
public void sniperWinsAnAuctionByBiddingHigher() throws Exception {
    auction.startSellingItem();

    application.startBiddingIn(auction);
    auction.hasReceivedJoinRequestFrom(ApplicationRunner.SNIPER_XMPP_ID);

    auction.reportPrice(1000, 98, "other bidder");
    application.hasShownSniperIsBidding(auction, 1000, 1098);

    auction.hasReceivedBid(1098, ApplicationRunner.SNIPER_XMPP_ID);

    auction.reportPrice(1098, 97, ApplicationRunner.SNIPER_XMPP_ID);
    application.hasShownSniperIsWinning(auction, 1098);

    auction.announceClosed();
    application.hasShownSniperHasWonAuction(auction, 1098);
} 
```

摘自“ [Growing Object-Oriented Software Guided by Tests](http://www.growing-object-oriented-software.com/) ”。这本书真的很棒，我强烈推荐阅读它。

这是真正的端到端测试，它使用真正的 XMPP 连接、Openfire jabber 服务器和 WindowLicker Swing GUI 测试框架。但是如果将所有这些东西卸载到驱动程序组件。在您的测试中，您只会看到不同的参与者是如何交流的。它是有序的：在应用程序开始投标后，我们检查拍卖服务器是否收到加入请求，然后我们指示拍卖服务器报告新价格并检查它是否反映在 UI 中等等。整个代码可在[github](https://github.com/sf105/goos-code/blob/master/test/end-to-end/test/endtoend/auctionsniper/AuctionSniperEndToEndTest.java)上找到。

github 上的示例很复杂，因为该应用程序并不像通常在书籍示例中发生的那样简单。但是那本书逐渐给出了它，我能够按照本书指南从头开始构建整个应用程序。事实上，这是我读过的唯一一本关于 TDD 和自动化开发人员测试的书，它给出了如此彻底和完整的示例。我读过很多。但请注意，Driver 方法不会使您的测试成为单元。它只是让你隐藏复杂性。它也可以（并且应该）与其他框架一起使用。如果需要，它们只是为您提供了将测试拆分为连续步骤的额外可能性；编写用户可读的测试用例；将测试数据外部化为 CSV、Excel 表格、XML 文件或数据库，以使您的测试超时；与外部系统、servlet 和 DI 容器集成；定义和运行单独的测试组；提供更人性化的报告等。

关于制作所有测试单元。除了诸如用于数学、字符串处理等的实用程序库之类的东西之外，任何东西都是不可能的。如果您有完全单元测试的应用程序，这意味着您不是测试所有应用程序，或者您不了解哪些测试是单元测试，哪些不是。第一种情况可能没问题，但所有未涵盖的内容都必须由开发人员、测试人员、用户或任何人手动测试和重新测试。这很常见，但最好是有意识的决定而不是随意的决定。为什么不能对所有内容进行单元测试？

单元测试有很多定义，它会导致圣战）我更喜欢以下内容：“单元测试是对程序单元的独立测试”。有人说：“嘿，单元是我的应用程序！我测试登录，它是简单的单元函数”。但也有*孤立*地隐藏的语用学。为什么我们需要将单元测试与其他单元测试区分开来？因为这是我们的第一个安全网。他们必须很快。你经常提交（例如 git）并且你*至少运行它们*在每次提交之前。但是想象一下，“单元”测试需要 5 分钟才能运行。您要么减少运行它们的频率，要么减少提交频率，或者一次只运行一个测试用例或什至一种测试方法，或者您将每 2 分钟等待一次，以便在 5 分钟内完成测试。在那 5 分钟内，您将进入 Coding Horror，接下来的 2 小时将在那里度过 =) 并且单元测试绝不能偶尔失败。如果他们这样做 - 你将不会信任他们。因此，隔离：您必须从单元测试中隔离缓慢和零星故障的来源。因此，隔离意味着单元测试不应该使用：

*   文件系统
*   网络、套接字、RMI 等
*   图形用户界面
*   多线程
*   外部库需要测试框架并支持像 Hamcrest 这样的简单库

并且单元测试必须是本地的。当您在编码后 2 分钟内出现缺陷时，您希望只有一个或多个测试失败，而不是整个套件的一半。这意味着您在单元测试中测试有状态行为的能力非常有限。您不应进行进行 5 次状态转换以达到先决条件的测试设置。因为第一次转换失败将破坏至少 4 个后续转换的测试以及您当前为第 6 次转换编写的另一个测试。任何非平凡的应用程序中都有相当多的流程和状态转换。所以这不能进行单元测试。出于同样的原因，单元测试不得在数据库、静态字段、Spring 上下文等中使用可更改的共享状态。这正是 JUnit 为每个测试方法创建新的测试类实例的原因。

因此，您会看到，无论您如何重新编码，您都无法对 Web 应用程序进行完全单元测试。因为它有流、JSP、servlet 容器等等。当然，您可以忽略这个定义，但它非常有用）如果您同意将单元测试与其他测试区分开来是有用的，并且这个定义有助于实现这一点，那么您将寻求另一个框架或至少另一种方法不是单元的测试，您将为不同类型的测试创建单独的套件，依此类推。

希望，这会有所帮助）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T10:56:58.513

您可以实现自己的，可能会根据 yo9u 定义的标准`Runner`包装其他测试和排序测试。`Runner`如果你真的需要这个。

但我不认为这是必要的。我知道如果页面 A 不起作用，则传递给 B 也不起作用。所以你想先运行测试 A，然后运行测试 A->B。但这真的有意义吗？例如，如果测试 A->B 首先运行并失败，因为它无法到达页面 A，其他验证测试 A 的测试也会失败。因此，两个测试都将失败，并且 id 不依赖于测试顺序。

但是，如果您的意思是要使用测试 A 作为测试 B 的设置操作，这是非常糟糕的做法。您可以使用测试 A 的逻辑作为测试 B 的开始，但您不应该在两个测试之间进行耦合。一个明显的原因是这使得调试非常困难。要调试测试 A->B，您必须同时运行 A 和 A->B 测试，这意味着您可能必须运行所有测试（至少在一个测试用例中）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T21:44:10.973

JUnit 并不是真正为流/集成级别测试而设计的。

对于这种情况，我设计了自己的 Runner 来保证测试运行的顺序，并且为所有测试重用相同的测试类实例，这样你就可以将一个步骤的值传递给另一个。

（是的，这对于单元测试来说是一种不好的做法——但我们并不是在谈论单元测试，即使它们是使用 jUnit 运行的）。

使用其他工具（cucumber、fitnesse、TestNG 等）也是一个很好的解决方案——但是项目中的测试工具太多了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T11:15:26.947

我们使用框架调用 Cucumber。其行为驱动的发展。因此，本质上，您可以创建与流程无关的测试功能，并使用功能来控制测试流程。

Example Page 1，输入 2 输入，点击回车，验证 page 2 加载了一个东西。

然后你会在一个功能文件中拥有它：

```
Given Page 1
   Then I enter text1
   Then I enter text2
   Then I click button
   Then I see page 2 
```

在你的代码中，你可以有一个实现这些步骤的类。使用黄瓜框架，您可以使用注释来表示测试代码和功能文件之间的映射。

```
...
@Given("^Page 1$")
public void iLoadPage1() {
  WebDriver driver = new ....
  driver.go('URL');
}

@Given("I enter (.*)$")
public void iEnterTest(String txt) {
  ...
}

... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-05T10:32:02.840

另一个可行的选项是将 JUnit 参数化应用到您的测试中。我目前的理解是，实现的参数总是按照它们提供的顺序执行。

使用该概念，您可以让 JUnit 实现接受 URL 作为构造函数参数，并根据提供的参数在内部分叉测试。

为了确保您使用相同的 WebDriver 引用，它可能需要是静态的 @BeforeClass/@AfterClass 声明。这样您就可以将参数链接在一起，有效地测试“从上一个测试我在 X 页上。在这里我将执行任务 Y。在这个测试结束时，我将在 Z 页上，或处于状态 A”。

在单元级测试中，我肯定会说这种解决方案的形式不好，但是当您集成像 Selenium 这样的工具时，您就开始在集成测试级别上采取行动。我自己对这个概念还很陌生，但在集成测试级别，模块化规则似乎有点模糊，因为你会有依赖的条件。

我很好奇，所以我试了一下。如果我们假设我们可以将应用程序视为与测试相关的静态资源，它就像我想的那样。

```
package demo.testing;

import java.util.List;

import org.junit.Assert;
import org.junit.BeforeClass;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.Parameterized;
import org.junit.runners.Parameterized.Parameters;

import com.google.common.base.Predicate;
import com.google.common.base.Predicates;
import com.google.common.collect.Lists;

@RunWith(Parameterized.class)
public class SequentialParams {

    private static SystemState state;

    @BeforeClass
    public static void validateBeforeState() {
        state = new SystemState();

        Assert.assertFalse(state.one);
        Assert.assertFalse(state.two);
        Assert.assertFalse(state.three);
        Assert.assertFalse(state.four);
    }

    @Parameters
    public static Object buildParameters() {
        Runnable reset = new Runnable() {

            public void run() {
                state.one = false;
                state.two = false;
                state.three = false;
                state.four = false;
            }
        };
        Runnable oneToTrue = new Runnable() {

            public void run() {
                state.one = true;
            }
        };
        Runnable twoToTrue = new Runnable() {

            public void run() {
                state.two = true;
            }
        };
        Runnable threeToTrue = new Runnable() {

            public void run() {
                state.three = true;
            }
        };
        Runnable fourToTrue = new Runnable() {

            public void run() {
                state.four = true;

            }
        };

        Predicate<SystemState> oneIsTrue = new Predicate<SequentialParams.SystemState>() {
            public boolean apply(SystemState input) {
                return input.one;
            }
        };
        Predicate<SystemState> twoIsTrue = new Predicate<SequentialParams.SystemState>() {
            public boolean apply(SystemState input) {
                return input.two;
            }
        };
        Predicate<SystemState> threeIsTrue = new Predicate<SequentialParams.SystemState>() {
            public boolean apply(SystemState input) {
                return input.three;
            }
        };
        Predicate<SystemState> fourIsTrue = new Predicate<SequentialParams.SystemState>() {
            public boolean apply(SystemState input) {
                return input.four;
            }
        };

        Predicate<SystemState> oneIsFalse = new Predicate<SequentialParams.SystemState>() {
            public boolean apply(SystemState input) {
                return !input.one;
            }
        };
        Predicate<SystemState> twoIsFalse = new Predicate<SequentialParams.SystemState>() {
            public boolean apply(SystemState input) {
                return !input.two;
            }
        };
        Predicate<SystemState> threeIsFalse = new Predicate<SequentialParams.SystemState>() {
            public boolean apply(SystemState input) {
                return !input.three;
            }
        };
        Predicate<SystemState> fourIsFalse = new Predicate<SequentialParams.SystemState>() {
            public boolean apply(SystemState input) {
                return !input.four;
            }
        };
        List<Object[]> params = Lists.newArrayList();

        params.add(new Object[]{Predicates.and(oneIsFalse, twoIsFalse, threeIsFalse, fourIsFalse), oneToTrue, Predicates.and(oneIsTrue, twoIsFalse, threeIsFalse, fourIsFalse)});
        params.add(new Object[]{Predicates.and(oneIsTrue, twoIsFalse, threeIsFalse, fourIsFalse), twoToTrue, Predicates.and(oneIsTrue, twoIsTrue, threeIsFalse, fourIsFalse)});
        params.add(new Object[]{Predicates.and(oneIsTrue, twoIsTrue, threeIsFalse, fourIsFalse), threeToTrue, Predicates.and(oneIsTrue, twoIsTrue, threeIsTrue, fourIsFalse)});
        params.add(new Object[]{Predicates.and(oneIsTrue, twoIsTrue, threeIsTrue, fourIsFalse), fourToTrue, Predicates.and(oneIsTrue, twoIsTrue, threeIsTrue, fourIsTrue)});

        params.add(new Object[]{ Predicates.and(oneIsTrue, twoIsTrue, threeIsTrue, fourIsTrue), reset, Predicates.and(oneIsFalse, twoIsFalse, threeIsFalse, fourIsFalse)});

        params.add(new Object[]{Predicates.and(oneIsFalse, twoIsFalse, threeIsFalse, fourIsFalse), threeToTrue, Predicates.and(oneIsFalse, twoIsFalse, threeIsTrue, fourIsFalse)});
        params.add(new Object[]{Predicates.and(oneIsFalse, twoIsFalse, threeIsTrue, fourIsFalse), oneToTrue, Predicates.and(oneIsTrue, twoIsFalse, threeIsTrue, fourIsFalse)});
        params.add(new Object[]{Predicates.and(oneIsTrue, twoIsFalse, threeIsTrue, fourIsFalse), fourToTrue, Predicates.and(oneIsTrue, twoIsFalse, threeIsTrue, fourIsTrue)});
        params.add(new Object[]{Predicates.and(oneIsTrue, twoIsFalse, threeIsTrue, fourIsTrue), twoToTrue, Predicates.and(oneIsTrue, twoIsTrue, threeIsTrue, fourIsTrue)});

        return params;
    }

    Predicate<SystemState> verifyStartState;
    Runnable changeState;
    Predicate<SystemState> verifyEndState;

    public SequentialParams(Predicate<SystemState> pre, Runnable task, Predicate<SystemState> post) {
      verifyStartState = pre;
      changeState = task;
      verifyEndState = post;
    }

    @Test
    public void perform() {
        Assert.assertTrue(verifyStartState.apply(state));
       changeState.run();
       Assert.assertTrue(verifyEndState.apply(state));
    }

    private static class SystemState {
        public boolean one = false;
        public boolean two = false;
        public boolean three = false;
        public boolean four = false;

    }

} 
```

# javascript - xmlhttp.responseText 不显示文本

> ID：12404431
> 
> 赞同：0
> 
> 时间：2012-09-13T10:41:33.510
> 
> 标签：javascript, xmlhttprequest, responsetext

我遇到了 ajax responseText 的情况。来自 url 的响应文本功能良好。但是ajax代码里面的东西出了问题。它无法识别响应文本并将类添加到目标 ID。这是代码：

```
<script type="text/javascript">
function updateField(nameValue){
    var xmlHttp=null;
    try{
        xmlHttp=new XMLHttpRequest();
        }
catch (e){
    try{
        xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
catch (e){
    alert("No AJAX!");
    return false;
    }
}
xmlHttp.onreadystatechange=function(){
    if(xmlHttp.readyState==4){
        if (xmlHttp.status==200){
            //this will be called after update
                var responseText = xmlHttp.responseText;        
            }
        }
    }
    //this will send the data to server to be updated
    xmlHttp.open("GET", 'inc/room_rate_updatez.php?'+ nameValue, true);
    xmlHttp.send(null);
}

function doSomethingAfterUpdate(retValFromPHP){
//retValFromPHP can be any thing you want!

    if (reponseText == "Failed"){
       document.getElementById("result").innerHTML=xmlhttp.responseText.className = "error";
    }else{
       document.getElementById("result").innerHTML=xmlhttp.responseText.className = "success";
    }
}

</script>

<div id="result"></div><input type="text" name="rate|498|6500-5200-4600-5600-4100|0" id="498" value="6500" size="10" onchange="updateField(this.name + '=' + this.value);"/> 
```

room_rate_updatez.php 的响应是“成功”和“失败”。我已经尝试了很多次让它工作，但没有运气。请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-16T10:14:43.640

```
Check the readyState & status like below.

if (xmlHttp.readyState==4 && xmlHttp.status==200)
 {
  var httpResp=xmlhttp.responseText;
 }
var scriptObj1 = $.parseJSON(httpResp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:52:25.007

尝试这个：

```
function updateField(nameValue){
   var xmlHttp=null;
   ....
   xmlHttp.onreadystatechange=function(){
    if(xmlHttp.readyState==4){
        if (xmlHttp.status==200){
            //this will be called after update
                var responseText = xmlHttp.responseText;        
                doSomethingAfterUpdate(responseText);
            }
        }
    }
    //this will send the data to server to be updated
    xmlHttp.open("GET", 'inc/room_rate_updatez.php?'+ nameValue, true);
    xmlHttp.send(null);
}

function doSomethingAfterUpdate(retValFromPHP){
//retValFromPHP can be any thing you want!

    if (retValFromPHP == "Failed"){
       document.getElementById("result").innerHTML = "error";
       document.getElementById("result").className = "error" 
    }else{
       document.getElementById("result").innerHTML = "success";
       document.getElementById("result").className = "success" 
    }
} 
```

# java - 通过 JSON 到 java 的 DOM 事件

> ID：12404432
> 
> 赞同：1
> 
> 时间：2012-09-13T10:41:33.260
> 
> 标签：java, javascript, json, events, dom

嘿，我正在尝试将 DOM 事件（在 FF 扩展上捕获的鼠标单击）发送到 java web 服务。如果我可以只使用 json 和一点魔法来 jsonify 事件，然后也许一些 java API 来接收它，那将非常有用 =)

你们中的任何人都知道任何可以解决问题的方法吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:48:19.817

你的问题包括2：

1) 如何将 java 脚本对象转换为 JSON？

答案是：[将 JS 对象转换为 JSON 字符串](https://stackoverflow.com/questions/4162749/convert-js-object-to-json-string)

2) 如何将 Json 对象发送到服务器？答案是：使用 AJAX：[http ://www.w3schools.com/ajax/ajax_example.asp](http://www.w3schools.com/ajax/ajax_example.asp)

# java - 配置黄瓜guice

> ID：12404434
> 
> 赞同：3
> 
> 时间：2012-09-13T10:41:39.110
> 
> 标签：java, guice, cucumber-jvm

我正在尝试在我的步骤定义中使用 DI。我有一个模块，

```
public class MyModule extends AbstractModule
{
    private final static MyInterface INSTANCE = new MyInterfaceImpl();

    @Override
    protected void configure()
    {
        bind(MyInterface.class).toInstance(INSTANCE);
    }
} 
```

并希望将此实例注入步骤定义的构造函数中。

```
public class MyStepDefs
{
    private final MyInterface instance;

    @Inject
    public MyStepDefs(MyInterface instance)
    {
        this.instance = instance
    }
} 
```

我想我需要使用 cucumber-guice.properties 文件配置 GuiceFactory 但我真的不知道这是什么？目前我得到的错误是，

```
java.lang.NoClassDefFoundError: javax/inject/Singleton
    at cucumber.runtime.java.guice.GuiceFactory$CucumberModule.configure(GuiceFactory.java:86) 
```

我还应该使用 Provider 进行构造函数注入吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-01-12T03:46:17.347

从 cucumber-guice v1.2.4 开始，这略有改变。首先配置文件已更改名称，现在是`cucumber.properties`.

其次，现在除了构建模块之外，您还必须构建一个扩展类并将其`cucumber.runtime.java.guice.InjectorSource`设置为`guice.injector-source`属性文件中的值。因此，除了您已经创建的两个类之外，您还必须创建第三个类：

```
public class MyInjectorSource implements InjectorSource {

       @Override
       public Injector getInjector() {
            return Guice.createInjector(Stage.PRODUCTION, CucumberModules.createScenarioModule(), new MyModule());
       }
} 
```

然后`cucumber.properties`将 guice.injector-source 设置为这个新类的完全限定名称。`cucumber.properties`应该像以前一样在`src/main/resources`（或`src/test/resources`取决于您的要求）。

自然，您仍然需要`pom.xml`文件中的依赖项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T13:49:27.847

和`MyModule`类`MyStepDefs`都很好。这`NoClassDefFoundError`是由于没有将最新版本的 Guice 添加为依赖项。我加了这个，

```
<dependency>
  <groupId>com.google.inject</groupId>
  <artifactId>guice</artifactId>
  <version>3.0</version>
</dependency> 
```

到我的`POM.xml`.

该`cucumber-guice.properties`文件进入`src/main/resources`文件夹。该文件由`GuiceFactory`类读取，并且应该包含您要使用的 Guice 模块的属性。例如..

`guiceModule=com.felix.cucumber.MyModule`

# asp.net-mvc-4 - 如何使 WebSecurity.Login 使用用户名或电子邮件登录？

> ID：12404438
> 
> 赞同：20
> 
> 时间：2012-09-13T10:41:45.293
> 
> 标签：asp.net-mvc-4, .net-4.5, simplemembership

`WebSecurity.Login`在 simplemembership 中获取用户名和密码，如何使其使用用户名或电子邮件而不是用户名登录用户？，使用户可以自由输入他的电子邮件或用户名登录。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-20T19:05:43.633

您可以继承`SimpleMembershipProvider`并像这样覆盖该`ValidateUser`方法。

```
public class ExtendedSimpleMembershipProvider : SimpleMembershipProvider
{
    public override bool ValidateUser(string login, string password)
    {
        // check to see if the login passed is an email address
        if (IsValidEmail(login))
        {
            string actualUsername = base.GetUserNameByEmail(login);
            return base.ValidateUser(actualUsername, password);
        }
        else
        {
            return base.ValidateUser(login, password);
        }

    }

    bool IsValidEmail(string strIn)
    {
        // Return true if strIn is in valid e-mail format.
        return Regex.IsMatch(strIn, @"^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$");
    }

} 
```

这只是一种方法。您可以自己编写`MembershipProvider`，但如果您只需要更改`ValidateUser`方法，这应该可以工作。

将以下配置添加到 web.config 以设置提供程序。

```
 <membership defaultProvider="ExtendedSimpleMembershipProvider">   
    <providers>
    <clear/>
    <add name="ExtendedSimpleMembershipProvider"
         type="MyProject.Web.SimpleMembershipProvider, MyProject.Web"/>
    </providers>
  </membership> 
```

这应该让你朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-21T11:13:40.530

WebSecurity 只是`FormsAuthentication`在后台调用。你可以这样做：

```
if (WebSecurity.UserExists(username)) 
{
     FormsAuthentication.SetAuthCookie(username, false);
} 
```

好奇你为什么需要这个功能。（仅供参考：我需要这样做的原因是，如果用户在 Express Checkout（购物车）流程中通过 PayPal 进行了身份验证，我允许他们以同一用户身份自动登录到我的网站，因为我认为这样做的风险非常低不是对的人）。

可能有用：[FormsAuthentication 和 WebSecurity 之间的区别](https://stackoverflow.com/questions/12679050/difference-between-formsauthentication-and-websecurity)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-07T08:07:20.117

您可以从 UserProfiles 表中提取具有给定电子邮件的用户

```
 [HttpPost]
[AllowAnonymous]
[ValidateAntiForgeryToken]
public ActionResult Login(LoginModel model, string returnUrl)
{
  var login = false;
  if (ModelState.IsValid)
  {
    if (!model.UserName.Contains("@"))
    {
      if (WebSecurity.Login(model.UserName, model.Password, persistCookie: model.RememberMe))
        login = true;
    }
    else
    {
      var targetUser = db.UserProfiles.Where(u => u.Email == model.UserName).FirstOrDefault();
      if (targetUser != null && WebSecurity.Login(targetUser.UserName, model.Password, persistCookie: model.RememberMe))
        login = true;
    }

  }
  if (login)
    return Redirect(returnUrl);
  // If we got this far, something failed, redisplay form
  ModelState.AddModelError("", "The user name or password provided is incorrect.");
  return View(model);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T13:04:34.387

不要使用电子邮件进行用户识别。这是一件很容易猜测的事情，今天人们可以使用一种工具来为他们猜测。这就是为什么使用用户名，它可以是任何东西。

话虽如此，如果您真的想要 - 您可以使用用户名/电子邮件 + 密码所在的表的 ID，并将其首先与用户名匹配，如果失败则将其与电子邮件匹配。如果两者都失败，则登录失败。

将下面的代码用于您的检查代码应该没有问题，因为您没有在此处发布任何内容，我无法修改以查看您需要的内容。

```
WebSecurity.GetUserId(email); 
```

对于您关于 MVC 的下一个问题，您应该首先查看 ASP 论坛，然后在这里尝试。只是一个意见

# sap-erp - 出境装运 IDOC 在更改时触发

> ID：12404444
> 
> 赞同：1
> 
> 时间：2012-09-13T10:42:00.533
> 
> 标签：sap-erp, idoc

我需要在 VT02N 中发送有关更改数据的出库 idoc。

```
Message type: SHPMNT.

Basic Type: SHPMNT06.

Extension: SHPMNTEXT. 
```

> ```
> Message control:
> 
> Application: V7.
> 
> Message Type: ZEDI. (output type that i defined for this)
> 
> Process Code: SD11. 
> ```

当我从 VT01N 创建货件时，我能够完美地创建 idoc，但是当我更改它时，我无法再次创建它。

请在这个问题上帮助我。

谢谢你。

塔尔哈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:49:56.457

您必须在您的消息类型上激活“多发”设置。该设置应可通过消息类型的“常规数据”部分中的事务 V/82 获得。

# sqlite - 虚拟表中的记录顺序不正确

> ID：12404446
> 
> 赞同：3
> 
> 时间：2012-09-13T10:42:02.100
> 
> 标签：sqlite, sqlite, virtual

在测试我们的`SQLite Virtual Table`机制实现过程中，我们遇到了意外的行为。对于以下`virtual table`结构：

```
create table X(ID int, RL real) 
```

此查询按 RL 字段以正确的降序返回所有记录。

**查询 1**：

```
select * from VTab t1 left outer join VTab t2 on t1.ID = t2.ID order by t1.RL desc; 
```

**执行计划一**：

```
explain query plan select * from VTab t1 left outer join VTab t2 on t1.ID = t2.ID order by t1.RL desc;  

0|0|0| SCAN TABLE VTab AS t1 VIRTUAL TABLE INDEX 0:D1; (~0 rows)
0|1|1| SCAN TABLE VTab AS t2 VIRTUAL TABLE INDEX 4:C0=0; (~0 rows) 
```

`D1`这是我们的`xBestIndex`方法实现生成的值，表示*按字段 #1 = RL 降序排序*。 `C0=0`这里意味着*字段 #0 = ID 的相等操作*。这按预期工作。

但是，下一个查询返回行（`RL`字段的别名不同）而不进行任何排序。

**查询 2**：

```
select * from VTab t1 left outer join VTab t2 on t1.ID = t2.ID order by t2.RL desc 
```

**执行计划2**：

```
explain query plan select * from VTab t1 left outer join VTab t2 on t1.ID = t2.ID order by t2.RL desc;  

0|0|0| SCAN TABLE VTab AS t1 VIRTUAL TABLE INDEX 0: (~0 rows)
0|11| SCAN TABLE VTab AS t2 VIRTUAL TABLE INDEX 4:C0=0; (~0 rows) 
```

如您所见，没有提到要排序的索引。针对真实表（与我们的虚拟表具有完全相同的结构）执行的查询如下所示：

**查询 3**：

```
select * from Table1 t1 left outer join Table1 t2 on t1.ID = t2.ID order by t2.RL desc 
```

**执行计划3**：

```
explain query plan select * from Table1 t1 left outer join Table1t2 on t1.ID = t2.ID order by t2.RL desc;  

0|0|0| SCAN TABLE Table1 AS t1 (~1000000 rows)
0|1|0| SEARCH TABLE Table1 AS t2 USING AUTOMATIC COVERING INDEX (ID=?)
0|1|0| (~7 rows)
0|0|0| USE TEMP B-TREE FOR ORDER BY 
```

如您所见，使用`B-tree`那里进行排序。

在我们这边，我们检查了我们在`sqlite3_index_orderby`结构（结构的一部分`sqlite3_index_info`）中收到的内容，当它们出现时`xBestIndex`，它们不包含任何关于排序的信息。out 参数也`orderByConsumed`返回 False（因为我们的输出没有排序，我们假设[sqlite](/questions/tagged/sqlite "显示标记为“sqlite”的问题")本身会对行进行排序）。

这是`SQLite Virtual Table`支持中的错误还是我们错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T10:52:00.890

正如评论中`allocateIndexInfo()`所说，只有“ORDER BY 子句仅包含当前虚拟表中的列”时，您的虚拟表才有机会实现排序。在您的查询中，排序列来自的虚拟表仅用于查找 ID 列，并且单个值的此类查找不可用于排序。

* * *

使用 SQLite 3.7.14，我在查询 2 的计划中确实得到了“USE TEMP B-TREE FOR ORDER BY”。xBestIndex 返回的值是什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T16:16:01.117

The reason of the problem lied in improper handling of the `orderByConsumed` output flag value.

For this query with `JOIN`, our `xBestIndex` implementation returned `orderByConsumed = True` for the index that matched `ON` condition, which actually wasn't correct because no ordering was done in that case. This disregarded any further `ORDER BY` clause members.

After the fix `orderByConsumed` started return `True` only for the indexes where `nOrderBy` flag was greater than 0 and `False` otherwise.

# ruby - FB 应用程序在回调时重定向到 iframe 之外

> ID：12404465
> 
> 赞同：0
> 
> 时间：2012-09-13T10:43:18.410
> 
> 标签：ruby, facebook, sinatra, facebook-javascript-sdk

我正在制作一个应用程序，一切正常。当我单击一个名为“帐户”的链接时，它会转到 /auth/facebook 太棒了！一旦我接受了应用程序/权限，它就会重定向回 Heroku 上的外部，在验证 FB 徽标时也会出现“转到 Facebook”。在对 FB 徽标进行一些研究时，这是由于 FB 页面被加载到 FB iframe 中，因此如果可以在不同窗口中从 iframe 中突破身份验证，这应该解决问题。在重定向问题上，我已将回调设置为重定向到我的 FB 应用程序链接。这里唯一的问题是，如果有人单击帐户“他们想转到帐户页面”，所以我的解决方法很愚蠢，因为当我希望它转到页面时，它会将用户发送回 iframe 内的索引页面在 iframe ie 帐户中单击。

如果有人对此有任何想法，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:50:26.503

> 在对 FB 徽标进行一些研究时，这是由于 FB 页面被加载到 FB iframe 中，因此如果可以在不同的窗口中从 iframe 中突破身份验证，这应该解决问题。

不要进行 HTTP 重定向，而是使用 JavaScript：

```
top.location.href = "{URL}"; 
```

（顺便说一句，这已经讨论过多次了。）

# php - 如何使用彗星（在nginx中禁用输出缓冲，它在apache中正常工作但在nginx中不起作用）？

> ID：12404469
> 
> 赞同：1
> 
> 时间：2012-09-13T10:43:22.620
> 
> 标签：php, nginx, comet, output-buffering

我的站点中有一个彗星驱动的聊天脚本

我的服务器配置是带有 PHP-FPM 的 NGINX，我还在不同的端口上安装了 apache。

当我尝试在 Apache 上运行聊天脚本时，当我用 1024 个字符填充缓冲区时（我的输出缓冲大小为 1 KB），它会自动刷新那在 apache 中。

但在 nginx 中却没有。

我的代码与此非常相似

```
<?php

// this is to fill the buffer and start output; and it works on apache normally
echo str_repeat(" ",1024); 

while($condition){

  // Some code here...
  $messages = getMessagesFromDatabase();

 if($messages){
  echo "output";   // output works on apache but not nginx
  flush();
  ob_flush();
 }

 usleep(500000); // 0.5 Second

}

?> 
```

在我的 nginx 配置中，我关闭了 gzip，关闭了 proxy_buffering，

有没有办法避免在nginx中缓冲，我在stackoverflow中搜索了很多，但我无法找到解决方案

**请注意：我不想在我的所有 php 配置中关闭缓冲我只想在聊天脚本中发生这种情况**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T12:14:39.697

升级您的 nginx 服务器 {} 配置：

```
fastcgi_keep_conn on; # < solution

proxy_buffering off;
gzip off; 
```

# android - 如何处理xml响应中的空标签

> ID：12404472
> 
> 赞同：-1
> 
> 时间：2012-09-13T10:43:34.057
> 
> 标签：android

在我的 xml 中可能有空标签，例如

问题是当我解析 xml 时，当我到达 xml 中的这一行时，我得到了空指针异常。我应该如何在我的解析文件中检查这样的标签？请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:54:49.440

在您的代码中添加**空**检查...如下所示...

```
if(employees.item(k).getFirstChild() != null) {
    employees.item(k).getFirstChild().getNodeValue()
} 
```

# mysql - MySQL + Galera 集群复制，出错怎么办？

> ID：12404474
> 
> 赞同：0
> 
> 时间：2012-09-13T10:43:41.927
> 
> 标签：mysql, sql, replication, percona

我计划将 MySQL 与 Galera 集群复制（Percona XtraDB Cluster）一起使用。

我是这种复制技术的新手，我需要澄清一下。

当我尝试在与集群其余部分不同步的节点上执行一些 SQL 查询时（即网络故障，仲裁决定该节点出现故障并将其从主要组件中删除），究竟会发生什么？

如何在 SQL 客户端应用程序端检测到这种情况？IE。我会在 SQL SELECT * FROM xxx 上遇到什么错误；或 UPDATE xxx SET yyy=zzz;?

当节点不同步时，我怀疑所有读/写操作都应该以失败结束，以防止脑裂和其他问题，但是我会遇到什么错误以及如何检查它？

我需要的是检测我连接的节点错误，所以我可以重新连接到另一个节点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:34:00.987

由于在这种情况下缺少更好的代码，mysqld 将返回 1047 (ER_UNKNOWN_COM_ERROR)。因此，当返回此代码时，您可以检查`wsrep_local_state`状态变量。如果为 0，则该节点从主组件中分区。

# php - 图像从 iOS 发送到 php 服务器

> ID：12404479
> 
> 赞同：0
> 
> 时间：2012-09-13T10:44:00.053
> 
> 标签：php, ios, stream

我想使用这段代码将图像文件发送到 php 服务器

```
-(void)saveImageToServer
{
    NSData *dataImage = UIImageJPEGRepresentation([arrImage objectAtIndex:0], 0.8f);   
    NSString *urlString = @"http://myurl:8002/FileService/REST/UploadFile?fileName=file.png";
    NSString *filename = @"test";
    NSMutableURLRequest* request= [[[NSMutableURLRequest alloc] init] autorelease];
    [request setURL:[NSURL URLWithString:urlString]];
    [request setHTTPMethod:@"POST"];
    NSString *boundary = @"---------------------------14737809831466499882746641449";
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
    [request addValue:contentType forHTTPHeaderField: @"Content-Type"];   
    NSMutableData *postbody = [NSMutableData data];
    [postbody appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [postbody appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"image\"; filename=\"%@.png\"\r\n", filename] dataUsingEncoding:NSUTF8StringEncoding]];
    [postbody appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [postbody appendData:[NSData dataWithData:dataImage]];
    [postbody appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [request setHTTPBody:postbody];
    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSString* returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];
    NSLog(@"test %@",returnString);
} 
```

但我在服务器上收到的是什么

"

-----------------------------14737809831466499882746641449 内容处置：表单数据；名称=“图像”；文件名="test.png" 内容类型：应用程序/八位字节流

ˇÿˇ‡" 知道我犯了什么错误

# apache - htaccess 重定向模式

> ID：12404481
> 
> 赞同：0
> 
> 时间：2012-09-13T10:44:17.800
> 
> 标签：apache, .htaccess

如何使用 htaccess 使用正则表达式来重定向所有传入链接

从`example.com/test-en/`到`example.com/test/`

如果在根域名之后字符串包含后缀-en，则应将其过滤掉，如果匹配重定向。

这是我正在尝试做的漏洞代码

```
RewriteCond %{HTTP_HOST} http://www.example.co.uk [NC]
**RewriteRule ^tag/(.*)-en/$ http://www.example.co.uk/$1 [L,R=301]**
RewriteRule ^\d{4}/\d{2}/\d{2}/(.*)$ http://www.example.co.uk/$1 [L,R=301]
RewriteRule ^\d{4}/\d{2}/(.*)$ http://www.example.co.uk/$1 [L,R=301] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T16:39:04.367

你有规则：

```
RewriteRule ^tag/(.*)-en/$ http://www.example.co.uk/$1 [L,R=301] 
```

但是你要求一个没有`/tag`前面的重定向。（对于不同的域），但如果你想保留标签，你需要在你的目标中添加它：

```
RewriteRule ^tag/(.*)-en/$ http://www.example.co.uk/tag/$1 [L,R=301] 
```

否则，该规则对我来说非常适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:45:54.417

这应该这样做：

```
RewriteRule /?test-[a-zA-Z]{2}/ /test/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T10:49:15.900

尝试这个 ：

```
RewriteRule ^(.*)-en/?$ /$1/ [L] 
```

# jquery - 用于检测文本输入更改的跨浏览器解决方案，包括复制和粘贴到字段中？

> ID：12404483
> 
> 赞同：0
> 
> 时间：2012-09-13T10:44:23.853
> 
> 标签：jquery, internet-explorer, cross-browser, jquery-events

我开始使用`$('#myInput').bind('input', function() {`，但这在 IE 中不起作用。

检测文本输入字段的任何更改（包括用户是否复制并粘贴到该字段）的最佳跨浏览器解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:07:34.700

## 间隔。

他们很难看。不必要。几乎所有人都讨厌。但这是为数不多且迄今为止最具弹性的在 IE 上测试用户输入的方法之一。

**原因：**

*   `.on('input', function(){})`在 IE<9 中不受支持，并且在 IE9-10 中存在错误 - 删除字符时不会触发。
*   `keyup`远非完美，您可以从右键菜单和工具栏中粘贴。
*   据我记得，自 IE6 以来，该`paste`事件得到了很好的支持，但是键盘输入和粘贴并不是输入值的唯一方法。您也可以在输入中选择、拖放文本。这是实现 IE 支持时首选间隔的原因之一。

在 IE 中，您也可以将[`onpropertychange`](http://msdn.microsoft.com/en-us/library/ie/ms536956%28v=vs.85%29.aspx)其作为后备，但它会在对象属性更改时触发，从而迫使您像使用 Interval 一样执行类似的“值更改”验证。因此，我宁愿编写一个适用于所有浏览器的单个区间，也不愿为所有浏览器编写代码而为 IE 编写另一个代码。

所以我建议的解决方案是：

1.  使用间隔如下：

    ```
    $(function() {
        var input = $('#foo'); //change this selector to your input
        function checkchange() {
            var v = input.val();
            if (input.data('v') === v) return;
            input.data('v', v);
            //do stuff
        }
        input.data('v', input.val());
        setInterval(checkchange, 100);
    }); 
    ```

[**小提琴**](http://jsfiddle.net/ult_combo/33Mtf/1/)

或者 2\. 将[GCF](https://developers.google.com/chrome/chrome-frame/)放在模式上并隐藏 X 按钮，从而强制 IE 用户安装它，您将永远不必再次编写特定于 IE 的代码 - 我会尽可能地这样做！再说一次，我的目标受众通常不包括 IE 用户。

# android - Android 应用内购买安全

> ID：12404486
> 
> 赞同：0
> 
> 时间：2012-09-13T10:44:49.477
> 
> 标签：android, in-app-purchase

好的，（对我来说）这是一个相当复杂的问题，让我的菜鸟大脑受伤。

在我的游戏中，有一系列特殊动作（连击）。我打算将其中大部分用于应用程序购买。此外，关闭广告将是应用内购买。

有人向我建议，玩家还应该能够通过扩展游戏来获得连击。也许可以购买在游戏中赚取“积分”，他可以使用。

无论哪种方式，在我看来，存储组合对玩家可用这一事实的唯一方法是将指标存储在“共享偏好”中。

我担心的是共享偏好对用户干扰的脆弱性。据我了解，“共享首选项”只是一个可供任何 root 用户使用的 .xml 文件。如何阻止用户简单地访问 .xml 并将数据更改为“combo1 = true”或 credits = “1,000,000”或“ads = off”？

在我写这篇文章的时候，我意识到我可以使用用户无法猜到的代码，而不是使用像“true”或“off”这样明显的词。那会安全吗？

但是学分呢？当值可以是任何值时，如何存储用户无法猜测的值。

我想我可以使用从值和游戏代码中的等式派生的代码来处理值。所以在游戏中有一个方程

代码 =((学分/2)*10)+1)。

这意味着如果 credits 是 1000，那么存储在 sharedprefs 中的值必须是 50011000。所以除非用户知道等式，否则他们将无法在 .xml 中输入有效值

这些想法有意义吗？他们会工作吗？有没有更好、更成熟的方法来做到这一点？

很抱歉成为这样的菜鸟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T11:40:57.180

像这样共享首选项以保存数据根本不是一个好选择。如果用户从设置中清除数据，他的所有信用都将消失，甚至他的购买历史记录都将消失，您应该有远程服务来执行此操作。所以请使用远程服务器来保存该数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:50:30.923

使用具有唯一校验和算法的数字签名或代码，该算法必须经过验证才能被接受。

这会将问题更改为对程序进行逆向工程以发现密钥或禁用检查。

即使这样也不是真正的安全，而只是让它变得更难。

# python - 在 timeit() 中从同一模块调用方法时导入错误

> ID：12404487
> 
> 赞同：2
> 
> 时间：2012-09-13T10:44:52.433
> 
> 标签：python, timeit

我想使用方法*getExecutionTime()测量 Python 方法**sayHello()*的执行时间。它们都在一个模块中，并且*getExecutionTime()* -方法应该可以从外部调用。

 **代码如下所示：

```
def getExecutionTime():
    t = timeit.Timer("sayHello", "from __main__ import sayHello")
    return t.timeit(2)

def sayHello():
    print("Hello") 
```

我不断收到 ImportError 说：“无法在文件中导入名称 sayHello ...”

我在 Timer 构造函数中添加了范围参数 ( `"from __main__ import sayHello"`)，以使*sayHello()*方法在 timeit 范围内可用。

**注意：**我不想在此方法的主要部分调用 getExecutionTime()，我想从其他地方调用该方法。

任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T10:53:55.553

我有一个文件，字面上是这样的：

```
import timeit

def getExecutionTime():
    t = timeit.Timer("sayHello()", "from __main__ import sayHello")
    return t.timeit(2)

def sayHello():
    print("Hello")

print(getExecutionTime()) 
```

运行时，它会打印`Hello`两次，然后是执行时间。（另请注意，它`sayHello()`不是`sayHello`在`Timer`设置中）。

您是在 IDE 中运行它吗？在 Python 2.7 和 3.2 下，它适用于我的命令行和 IDLE。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2017-09-25T07:47:23.877

编写的代码并导入了 timeit，对我来说也可以正常工作，没有 ImportError ...**

# sql - PIVOT 表中的日期比较

> ID：12404491
> 
> 赞同：0
> 
> 时间：2012-09-13T10:45:02.573
> 
> 标签：sql, sql-server-2008, pivot

我有一个关于 PIVOT 表的查询，比如，

```
SELECT * 
   FROM (SELECT ID, ID,Date FROM Table1) AS P 
PIVOT 
    (   
      COUNT (P.ID)
      FOR P.Date in ([08/17/2006],[08/18/2006])  -- [MM/DD/YYYY] - Format
    ) as pvt 
```

在上面的查询中，`P.Date`是`datetime2(7)`这样的，我得到的数据是，

```
P.Date = '2006-08-17 15:30:23.0000000' 
```

但我在比较`'2006-08-17'`。这里的日期部分是相同的，即使我没有得到结果。

我的目标是在日期匹配时显示 ID 的计数。

我已经尝试过`Convert()`，但它不允许`PIVOT`在`FOR`块中使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T10:48:08.437

您需要`CAST()`在内部选择中执行：

```
SELECT *
FROM 
(
  SELECT ID, ID, Cast(yourDateValue as Date) newdate  -- perform the conversion here
  FROM Table1 
) AS P 
PIVOT 
(   
  COUNT (P.ID)
  FOR newdate in ([08/17/2006], [08/18/2006])  -- [MM/DD/YYYY] - Format
) as pvt 
```

# c# - REST Web 服务是否为 ASP.NET Web App 保护

> ID：12404492
> 
> 赞同：-1
> 
> 时间：2012-09-13T10:45:03.963
> 
> 标签：c#, asp.net, web-services, rest

任何人请解释我。REST Web 服务对 ASP.NET Web 应用程序是否安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:47:52.203

这取决于您所说的安全是什么意思。

如果 REST Web 服务托管在 SSL 安全域上，那么在涉及的数据将被加密的意义上，它将是安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:04:45.997

如上面的答案所述，这取决于您的配置。您可以拥有安全或部分安全的 REST 服务。

检查以下链接以获得清晰的理解。

如何配置安全的 WCF 休息服务：

[如何使用用户名/密码 + SSL 使用 WCF 配置安全 RESTful 服务](https://stackoverflow.com/questions/141484/how-to-configure-secure-restful-services-with-wcf-using-username-password-ssl)

保护 ASP.NET 的 WCF Rest 服务：

[http://forums.asp.net/t/1689271.aspx/1](http://forums.asp.net/t/1689271.aspx/1)

# ios - IOS 5 上的 Xcode 4.5 错误

> ID：12404495
> 
> 赞同：5
> 
> 时间：2012-09-13T10:45:11.520
> 
> 标签：ios, xcode, ios6, xcode4.5

我安装了 xcode 的 GM 版本，当我尝试在 IOS 5 上安装我的应用程序时开始收到此错误。该应用程序在 IOS 6 上运行良好。有人可以告诉我可能是什么问题吗？我包含了 libobjc.A.dylib 库，我得到了相同的。

> dyld：惰性符号绑定失败：找不到符号：_objc_setProperty_atomic_copy
> 
> 引用自：/var/mobile/Applications/8BCAAF22-5857-427D-9FDA-48D369CF3DD8/FlipBookApp.app/FlipBookApp 预期在：/usr/lib/libobjc.A.dylib
> 
> dyld：找不到符号：_objc_setProperty_atomic_copy 引用自：/var/mobile/Applications/8BCAAF22-5857-427D-9FDA-48D369CF3DD8/FlipBookApp.app/FlipBookApp 预期在：/usr/lib/libobjc.A.dylib

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-13T14:03:31.323

在 GData 项目中 -> 构建设置 -> 将“iOS 部署目标”更改为 5.1

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-20T17:17:04.787

The "iOS deployment target" value of your added static library must less than or equal your project's.

# php - 如何在 PHP 中设置 X-Forwarded-For 以使用 simplexml_load_file 发送客户端 IP

> ID：12404497
> 
> 赞同：2
> 
> 时间：2012-09-13T10:45:23.200
> 
> 标签：php

我们使用 X-Forwarded-For 获得了代理背后的客户端真实 IP。

但现在的问题是，当我们使用 simplexml_load_file 调用 Web 服务时，托管 Web 服务的服务器获取的是我们服务器的 IP，而不是真正的客户端服务器。

所以我们需要一种方法在 X-Forwarded-For 头中设置 IP，以便 webservice 获取客户端的 IP，这意味着它会感觉客户端 IP 已经调用了 webservice。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T10:59:06.360

一种可能性是开始使用[`curl`](http://php.net/manual/en/ref.curl.php)与 Web 服务进行通信，以便您能够设置标头值

```
$ip = '123.123.123.123'; // your client's IP Address
curl_setopt( $ch, CURLOPT_HTTPHEADER, array("REMOTE_ADDR: $ip",
                                            "X_FORWARDED_FOR: $ip")); 
```

# asp.net - 使用 dbml 类时，如何仅从表中选择特定记录？

> ID：12404500
> 
> 赞同：0
> 
> 时间：2012-09-13T10:45:37.667
> 
> 标签：asp.net, linq-to-sql, dynamic-data

在我的项目中，我使用`dynamic data`控件来生成`lable`, `textbox`,`dropdownlist`

我正在使用`.dbml`类绑定所有值`linq to sql`

现在，当我使用以下代码填充我的下拉列表时，它会填充表中的所有值，`Users`但我只想显示一些值，我该如何实现？

代码：

```
 partial class WorkFlow{}

    [DisplayName("Flow")]
    [DisplayColumn("FlowItem", "InitDate", true)]
    public class FlowMeta
    {
        [Display(Name = "Trade", Order = 1)]
        public WorkFlowItem WorkFlowItem { get; set; }

        [Display(Name = "Users", Order = 2)]
        public Users User { get; set; }
    } 
```

在这里它填充`Users`表中的所有记录并将其动态绑定到下拉列表我该如何修改它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:04:05.363

您可以在您的控制器中以这种方式创建一个函数：

```
 public void populatelistbox()
    {

        int id = Convert.ToInt32(Session["user"].ToString());

        var enroll = from s in db.EnrollTrainee
                     join a in db.CreateUsers on s.TraineeID equals a.User_Userid
                     where s.TrainerID == id
                     select new { a.User_Userid, a.User_name };

        ViewBag.Enroll = new MultiSelectList(enroll, "User_Userid", "User_name");
    } 
```

您需要根据您的要求在您的 Lambda 操作中执行一些条件。

之后，您可以通过这种方式调用此函数：

```
 [HttpGet]
    public ActionResult Create()
    {
        populatelistbox();
        return View();  
    } 
```

# .net - 针对 XSD 验证 XML，无需回调

> ID：12404503
> 
> 赞同：0
> 
> 时间：2012-09-13T10:45:44.950
> 
> 标签：.net, xml, powershell, xsd, xml-validation

我正在寻找一种尽可能简单的 .NET 方法来针对 XSD 文件验证 XML 文件，如下所示：

```
validator.IsValid(xmlFile, xsdFile) 
```

我在 stackoverflow 上发现了一些问题（和答案），但它们都需要回调函数。我的目标是 oneliner，因为我想在 PowerShell 中执行它：

```
$validator = new-object SomeValidator
$validator.IsValid(xmlFile, xsdFile) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:42:04.823

获取[PowerShell 社区扩展](http://pscx.codeplex.com)并使用`Test-Xml`cmdlet。此 cmdlet 不仅可以测试格式是否正确，还可以针对架构进行验证。请务必获取 2.1（或 3.0）测试版，因为 2.0 生产版本存在模式验证错误。这是一个例子：

```
Test-Xml $xmlfile -Schema $xsdFile 
```

# macos - 我是否需要管理员权限才能使用 FSEvents 监控 Mac 中的文件

> ID：12404510
> 
> 赞同：0
> 
> 时间：2012-09-13T10:46:04.620
> 
> 标签：macos, fsevents

我正在尝试在 Mac 中为我的应用程序获取文件系统事件通知。当我在谷歌上搜索 FSEvents 时，注意到 Dropbox 也在使用 FSEvents，它要求管理员权限来运行“dbfseventsd”进程。我是否还需要对我的应用程序具有管理员权限才能监视目录中的更改..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:43:29.477

来自苹果的文档

文件系统权限和文件系统事件

与文件系统事件相关的最明显的安全问题是隐私问题之一。如果 Bob 可以看到 Alice 的主目录更改的事件列表，那么 Bob 可能会看到 Alice 不想让他看到的东西。例如，Alice 的目录名称可能与未发布的 Apple 产品的代码名称一致。

为了防止这种潜在的安全漏洞，除非用户可以通过标准文件系统权限访问修改后的目录，否则用户不会收到任何事件。

注意：作为副作用，呈现给文件系统事件客户端的事件 ID 不一定是连续的，即使用户正在监视从根目录开始的所有目录上的所有事件。**只有以 root 用户身份运行的应用程序才能保证接收所有事件。**

# android - Android 标签栏在非标签活动中可见

> ID：12404513
> 
> 赞同：0
> 
> 时间：2012-09-13T10:46:21.487
> 
> 标签：android, tabbar, visible

我在非标签栏活动中的标签栏可见性有问题。如何在非标签活动中设置标签栏？

代码

```
TabHost tabHost = (TabHost)findViewById(android.R.id.tabhost);

    TabSpec firstTabSpec = tabHost.newTabSpec("tab_id1");
    TabSpec secondTabSpec = tabHost.newTabSpec("tab_id2");
    TabSpec thirdTabSpec = tabHost.newTabSpec("tab_id3");

    firstTabSpec.setIndicator("First").setContent(new Intent(this,FirstTab.class));
    secondTabSpec.setIndicator("Second ").setContent(new Intent(this,SecondTab.class));
    thirdTabSpec.setIndicator("Third").setContent(new Intent(this,ThirdTab.class));

    tabHost.addTab(firstTabSpec);
    tabHost.addTab(secondTabSpec);
    tabHost.addTab(thirdTabSpec); 
```

这是标签栏的代码.....我有 5 个活动..firstTab、secondTab、thirdTab、fourthActivity、fifthActivity。但问题是，选项卡栏仅对 3 个选项卡活动可见，但在第四活动和第五活动中不可见。如何在剩余活动中显示标签栏？请帮我.....

谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T10:31:04.933

解决了。将第一个选项卡活动更改为选项卡组。将默认选项卡组活动设置为第一个选项卡。

```
firstTabSpec.setIndicator("First").setContent(new Intent(this,TABGROUP.class));
secondTabSpec.setIndicator("Second ").setContent(new Intent(this,SecondTab.class));
thirdTabSpec.setIndicator("Third").setContent(new Intent(this,ThirdTab.class)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T15:52:08.523

将按钮放在选项卡上。

# apache - 如何使 Reviewboard 网站正常工作

> ID：12404517
> 
> 赞同：2
> 
> 时间：2012-09-13T10:46:32.440
> 
> 标签：apache, ubuntu-11.04, review-board

我在我的系统上安装了审查委员会及其所有依赖项。现在我需要建立一个评论板网站。我按照官方网站上的说明设置站点；但它没有用。谷歌搜索了 2 天，没有任何帮助。指令在任何地方都是 98% 相同的，但不像它在我的系统上所说的那样工作。问题是 - 在我的本地主机上设置后，每个站点都会打开审查板页面，包括这个，除了本地主机本身。但是审查板页面总是显示

> “ReviewBoard 正在打盹” 我在 apache error.log 中搜索了错误，但没有发现任何有用的信息。我在这里做错了什么有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T17:11:59.987

这个问题通常是配置错误或缺少包。我遇到过同样类型的问题，第一步是确保 python 工具正常工作。

如果您`ImportError`在尝试使用 pythonn 或 pip 时看到。在 Python 环境中，该`setuptools`包可能已被删除或链接已被删除。

要解决此问题，请运行 setuptools 的安装脚本：

```
curl https://bitbucket.org/pypa/setuptools/raw/bootstrap/ez_setup.py | python 
```

在 Debian 或 Ubuntu 中使用

```
curl https://bitbucket.org/pypa/setuptools/raw/bootstrap/ez_setup.py | sudo python 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T01:17:28.423

我遇到了同样的错误，在您的评论板设置文件 (settings.py) 中，将 DEBUG 设置为 True。这为您提供了有关不工作的更多信息的日志。

要么运行接收错误的 url，要么从命令行输入：tail -f /path/to/errorlog

这为您提供了调试信息。

然后把它贴在这里。

# android - Android：从 GCM 一次又一次地获得相同的通知

> ID：12404519
> 
> 赞同：1
> 
> 时间：2012-09-13T10:46:43.753
> 
> 标签：android, google-cloud-messaging

我已经在我的应用程序中实现了 GCM。从应用服务器，我应该得到三个不同的通知。但是，我一次又一次地收到相同的通知。同时，从服务器端调用了三个不同的 url。我没有得到，有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T20:59:23.050

您确定您的服务器没有一遍又一遍地发送通知吗？

# c# - 传递值在线程 c# 上抛出类

> ID：12404523
> 
> 赞同：1
> 
> 时间：2012-09-13T10:47:00.703
> 
> 标签：c#, multithreading, class, object, instance

可悲的是，我第三次问这个问题，我认为每次我问它都没有意义，但是是的，让我们再次尝试更多的单词/代码，还有照片和简单的测试，我有 2 个类，一个接收数据包并从中获取值它们和另一个应该使用这些值，但我未能从此类中获取它们注意：这些值将由新线程使用，因此让我们显示代码

```
namespace ProxyParadise.Network.Packets
{

    public class PacketHandler
    {
        public PacketHandler() // takes no parameters using get/set , failed take 1
        {
            Console.WriteLine("defining an object to get x,y take 1, value now is (" + actualX + "," + actualY + ")");
        }
        public void getxy(ushort Actualx, ushort Actualy) //using get and set with parameters failed take 2
        {
            Console.WriteLine("defining an object to get x,y take 2, value now is (" + actualX + "," + actualY + ")");
            actualX = actualX; Actualy = actualY;
        }
        public ushort actualX { get; set; }
        public ushort actualY { get; set; }
public unsafe void HandleServer(byte[] data)
        {
            try
            {
                    var type = *((ushort*)(ptr + 2));
                    switch (type)
                    {
                        case 10010:
                            {
                                if (BitConverter.ToUInt16(data, 24) != 0)
                                {
                                    actualX = BitConverter.ToUInt16(data, 24);
                                    actualY = BitConverter.ToUInt16(data, 26);
                                    Console.WriteLine("account coords updated to (" + actualX + "," + actualY + ")");
                                }
                                break;
                            }
                    } 
```

这是一张测试这个的图片，它会在每次更新时在控制台上写行，一旦我收到这个数据包 ![测试 1](../Images/78623148d08fa2be7380ce5b692441f8.png) 现在我试图在另一个类上获取这些值，所以我对它们做一些事情并将数据包发送到服务器，所以这是另一堂课（全班，所以谁说我不应该发布重要部分是有意义的）

```
public class ClientBase
{
    GameUser role2;
    PacketHandler ph = new PacketHandler();
        public ushort X, Y;
        PacketHandler ph2 = new PacketHandler();

    public ClientBase(GameUser role)
    {
        role2 = role;
        Thread T = new Thread(HuntThread) { Name = "Hunt Thread" };
        T.Start(this);
        Console.WriteLine("with name : " +T.Name +  " with execution context : "+T.ExecutionContext +" with state : "+ T.IsAlive + " with id : " + T.ManagedThreadId);
       T.Join();
    }
    Monster GetNextkill()
    {
       // byte Range = 18;
        Monster CurrentTarget = null;
        foreach (KeyValuePair<uint, Monster> Pair in Dictionary.Clone(Dictionary.Monsters))
        {
          //  if (Math.Max(Math.Abs( - Pair.Value.X), Math.Abs(pp.Y - Pair.Value.Y)) > 18)
          //  {
          //      Dictionary.Monsters.Remove(Pair.Key);
          //  }
           // else if (Math.Max(Math.Abs( - Pair.Value.X), Math.Abs(pp.Y - Pair.Value.Y)) <= Range)
           // {
           //     Range = (byte)Math.Max(Math.Abs(this.X - Pair.Value.X), Math.Abs(this.Y - Pair.Value.Y));
                CurrentTarget = Pair.Value;
             //   Console.WriteLine("there is " + Dictionary.Monsters.Count + " monster around you");
          //  }
        }
        return CurrentTarget;
    }
    public void HuntThread(object Sender)
    {
        try
        {
            ClientBase Client = Sender as ClientBase;
            while (true)
            {
                Monster Target = GetNextkill();
                if (Target != null)
                {
                    Thread.Sleep(1000);
                    ProxyParadise.Network.Packets.PacketStructure ps = new ProxyParadise.Network.Packets.PacketStructure();
                    //       ps.__Packet1022XP(Target.UID, Target.X, Target.Y); 
                    int xxx = Target.X - 1;
                    int yyy = Target.Y - 1;
                    ph2.getxy(X, Y);
                    Console.WriteLine("x and y in the thread is " + X + Y);
                    ps.__Packet10010(Target.X, Target.Y, role2, "normal", "server", ph.actualX, ph.actualY);
                    Thread.Sleep(1000);
                    ps.__Packet10010(Target.X, Target.Y, role2, "sdasdsa", "client", role2.X, role2.Y);
                    Thread.Sleep(1000);
                    ps.__Packet1022NONEXP(Target.UID, Target.X , Target.Y, role2);
                    //if fatal strike is on attack the monster 
                    //else
                    //jump next to the target and attack
                    Dictionary.Monsters.SafeRemove(Target.UID);

                }
                return;
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine("expection error : " + ex);
        }
    }
    public uint UID;

} 
```

所以现在的问题是设置/获取和定义对象以获取值的两种方式（我通过尝试从方法中获取它们也做了两次结构，但在两种情况下都失败了）

现在这是测试图像 ![在此处输入图像描述](../Images/9db058408575e04ce982d42a92e57ba2.png)

我怀疑为什么它是零，我有时认为这是因为新对象而其他时候我认为这是因为线程

这次我真的很想得到帮助，因为我已经尝试了 4 天，并且做了很多我听说过的方法（但不是锁），我真的很感谢你阅读这篇文章并帮助我度过你的时间和我对此表示赞赏的信息:) 也感谢将修复我的拼写和语法的 mod

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:18:31.940

您在此处显示的参数和属性名称中的大写/小写字母是否与您正在运行的代码中的完全相同？

```
public void getxy(ushort Actualx, ushort Actualy) //using get and set with parameters failed take 2
{
    Console.WriteLine("defining an object to get x,y take 2, value now is (" + actualX + "," + actualY + ")");
    actualX = actualX; Actualy = actualY;
} 
```

因为如果我更改参数的名称，您应该会明白为什么这看起来不对。

```
public void getxy(ushort inputx, ushort inputy) //using get and set with parameters failed take 2
{
    Console.WriteLine("defining an object to get x,y take 2, value now is (" + actualX + "," + actualY + ")");
    actualX = actualX; inputy = actualY;
} 
```

这当然可以解释为什么它们总是为零，它们永远不会改变。

您是否尝试过在代码中放置断点并在调试中单步执行代码，特别是 getxy 方法以准确查看每次输入和输出值是什么？

# windows - SQL Server 2005 登录错误

> ID：12404525
> 
> 赞同：1
> 
> 时间：2012-09-13T10:47:03.530
> 
> 标签：windows, sql-server-2005, login

我是第一次使用 SQL Server。我将它安装在我的 Windows 7 机器上。当我尝试登录服务器时，它给了我一个错误，

> *用户 'Admin-PC\Admin' 登录失败。（.Net SqlClient 数据提供者）*
> 
> *登录失败 - 错误号：18456 - 严重性：14 - 状态：1*

我正在使用 Windows 默认身份验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:53:25.157

此答案引用[自此博客](http://blogs.msdn.com/b/sql_protocols/archive/2006/02/21/536201.aspx)

我正在逐字复制以下相关部分：-

错误消息保持相当通用，以防止信息泄露给未经身份验证的客户端。特别是，`State`无论问题的性质如何，“ ”都将始终显示为“1”。要确定失败的真正原因，管理员可以查看服务器的错误日志，其中将写入相应的条目。一个条目的例子是：

```
2006-02-27 00:02:00.34 Logon     Error: 18456, Severity: 14, State: 8.
2006-02-27 00:02:00.34 Logon     Login failed for user '<user name>'
                                            . [CLIENT: <ip address>] 
```

消息的关键是`State`服务器将准确设置以反映问题根源的“ ”。在上面的示例中，状态 8 表示身份验证失败，因为用户提供了错误的密码。

```
ERROR STATE  ERROR DESCRIPTION
2 and 5      Invalid userid
6            Attempt to use a Windows login name with SQL Authentication
7            Login disabled and password mismatch
8            Password mismatch
9            Invalid password
11 and 12    Valid login but server access failure
13           SQL Server service paused
18           Change password required 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:36:31.027

真正的问题是 Windows 7 上的“以管理员身份运行”。当我选择此选项时，我将能够使用 MSSQL 服务器。

# javascript - IE 参数在 setTimeout 中使用时未定义

> ID：12404528
> 
> 赞同：6
> 
> 时间：2012-09-13T10:47:06.583
> 
> 标签：javascript, internet-explorer, settimeout

> **可能重复：**
> [setTimeout Internet Explorer](https://stackoverflow.com/questions/9568248/settimeout-internet-explorer)

[`setTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)将函数参数传递给调用相同的函数时，我是否遗漏了某些内容或 Internet Explorer 中是否存在问题？

这将在 Internet Explorer 中永远运行：

```
function myFunction(myParam, tries){
  if (typeof tries == "undefined"){
    tries = 0;
  }
  tries++;
  if (tries < 2){
    setTimeout(myFunction, 50, myParam, tries);
  }
}
myFunction("something"); 
```

有没有办法解决这个问题？

[http://fiddle.jshell.net/rH3gx/](http://fiddle.jshell.net/rH3gx/)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-13T10:49:25.787

解释和解决方案[在 MDN 中](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)：

> 如果您需要将参数传递给回调函数，但需要它在不支持发送额外参数的 Internet Explorer 中工作（setTimeout() 或 setInterval() 都不支持），您可以包含此 IE 特定的兼容性代码只需将其插入脚本的开头，即可在该浏览器中为两个计时器启用 HTML5 标准参数传递功能。

```
if (document.all && !window.setTimeout.isPolyfill) {
  var __nativeST__ = window.setTimeout;
  window.setTimeout = function (vCallback, nDelay /*, argumentToPass1, argumentToPass2, etc. */) {
    var aArgs = Array.prototype.slice.call(arguments, 2);
    return __nativeST__(vCallback instanceof Function ? function () {
      vCallback.apply(null, aArgs);
    } : vCallback, nDelay);
  };
  window.setTimeout.isPolyfill = true;
}

if (document.all && !window.setInterval.isPolyfill) {
  var __nativeSI__ = window.setInterval;
  window.setInterval = function (vCallback, nDelay /*, argumentToPass1, argumentToPass2, etc. */) {
    var aArgs = Array.prototype.slice.call(arguments, 2);
    return __nativeSI__(vCallback instanceof Function ? function () {
      vCallback.apply(null, aArgs);
    } : vCallback, nDelay);
  };
  window.setInterval.isPolyfill = true;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-13T10:52:32.957

[http://fiddle.jshell.net/rH3gx/2/](http://fiddle.jshell.net/rH3gx/2/)

您需要将函数包装在不需要参数的函数中：

```
function myFunction(myParam, tries){
  if (typeof tries == "undefined"){
    tries = 0;
  }
  tries++;
  if (tries < 2){
    setTimeout(function() {
         myFunction(myParam, tries);
    }, 50);

  }
}

myFunction("something"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T10:53:44.693

```
setTimeout(function(){myFunction(myParam, tries);}, 50); 
```

[http://fiddle.jshell.net/rH3gx/1/](http://fiddle.jshell.net/rH3gx/1/)

# php - 无法从 Flash PHP 解码 AMF 编码消息

> ID：12404532
> 
> 赞同：2
> 
> 时间：2012-09-13T10:47:24.787
> 
> 标签：php, flash, amf, amfphp

我正在以 AMF 格式从 flash 接收编码数据，但我想在 php 中对其进行解码。

我不知道如何使用库[https://github.com/silexlabs/amfphp-2.0/blob/master/Amfphp/Core/Amf/Serializer.php](https://github.com/silexlabs/amfphp-2.0/blob/master/Amfphp/Core/Amf/Serializer.php)

我找不到指示如何对 AMF 编码消息进行简单解码的示例代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T17:22:17.980

我建议不要使用 Zend_Amf，它的编写考虑了一些神秘的误解，他们认为这是“架构”...... AMFPHP 仍然存在，并且由一些不太喜欢 Zend 的人维护[http:// sourceforge.net/projects/amfphp/](http://sourceforge.net/projects/amfphp/)

这是他们的网站，其中包含有关如何设置的示例和说明等：[http ://www.silexlabs.org/amfphp/](http://www.silexlabs.org/amfphp/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:57:49.103

我曾经遇到过同样的问题，并解决如下。

您可以在 Flash 中使用 javascript base64 编码，而在 PHP 中可以使用 base64_decode 函数。我以前用过，效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T08:51:47.060

看看[nekoserver](http://code.google.com/p/nekoserver)项目。[它是用Haxe](http://haxe.org)编写的 amfphp 的简化类似物。在那里您可以找到[nekoserver.amf.io](http://code.google.com/p/nekoserver/source/browse/trunk/nekoserver/amf/io/)包，查看`AmfDeserializer.hx`（读取元数据）和`Amf3Reader.hx`（读取消息正文）。那里的一切都非常简单。好吧，我猜项目是用 Haxe 编写的这一事实对你来说不是很好，但你不应该害怕 Haxe 的语法与 Actionscript 语法非常相似。

另外我建议查看[AMF 格式规范](http://download.macromedia.com/pub/labs/amf/amf3_spec_121207.pdf)。

**PS。**我是否正确理解您需要 AMF3（而不是 AMF0）？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-29T05:38:01.077

看看一个非常可靠的 PHP 扩展，用于编码/解码 AMF3 流，而无需使用纯 PHP 编码器/解码器 - [https://github.com/neoxic/php-amf3](https://github.com/neoxic/php-amf3)

# typo3 - Typoscript：如何获取当前页面的第一个子页面的ID？

> ID：12404535
> 
> 赞同：0
> 
> 时间：2012-09-13T10:47:38.517
> 
> 标签：typo3, typoscript

我想在我的模板中有一个指向第一个子页面的链接（它是一个部分概述页面，所以总会有可用的子页面）。链接将始终具有相同的文本。

如何获取第一个子页面的 ID？

```
pagelink = TEXT
pagelink {
    value = Link to first child page
    typolink {
        parameter = [[id of first child page]]
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:00:58.020

这是一个简单的解决方案：

```
pagelink = HMENU
pagelink {
    # only display if there is a subpage
    stdWrap.required = 1
    # with value directory, the default special.value is the current page id
    special = directory
    # limit to 1 page
    maxItems = 1
    # link item
    1 = TMENU
    1 {
        NO = 1
    }
} 
```

要覆盖页面标题，请使用以下命令：

```
pageLink = HMENU
pageLink {
    # only display if there is a subpage
    stdWrap.required = 1
    # with value directory, the default special.value is the current page id
    special = directory
    # limit to 1 page
    maxItems = 1
    # link item
    1 = TMENU
    1 {
        NO = 1
        NO {
            doNotLinkIt = 1
            stdWrap.cObject = TEXT
            stdWrap.cObject {
                typolink.parameter.field = uid
                # override text of menu item
                value = Dummy Text
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T12:44:53.170

有几种方法可以做到这一点（例如使用 HMENU），但我会选择这个，因为如果您决定让它更复杂（例如在文本链接中的某处有页面标题，基于缩略图渲染），它会很清晰且易于修改在媒体领域）。

```
pagelink = CONTENT
pagelink {
  table = pages
  select {
    pidInList = this
    orderBy = sorting ASC
    max = 1
  }
  renderObj = TEXT
  renderObj {
    value = Link to first child page
    typolink {
      parameter.field = uid
    }
  }
} 
```

**笔记**

*   要将页面标题作为文本链接，请替换`value = Link to first child page`为`field = title`
*   它将仅在该概述页面上显示正确的链接，而不是在其子页面上。要在子页面上显示它，必须采用不同的方法。

# curl - 如何通过“shell-command-on-region”将区域传递给 shell 命令？

> ID：12404538
> 
> 赞同：1
> 
> 时间：2012-09-13T10:47:53.463
> 
> 标签：curl, emacs, elisp

好的，也许是菜鸟问题，但我无法找到有关这些东西的信息。我想编写一个函数，该函数接受在区域中选择的任何内容并将其传递给 curl。卷曲返回一些东西，我想要那个东西来替换选定的区域。换句话说，在一个区域中选择 www.foo.com 并运行该函数后，它将被替换为 curl 如果在命令行上运行返回的任何`curl www.foo.com`.

这是我的尝试，这是非常非常错误的。基本上，我不知道如何将该选定区域作为变量传递给`shell-command-on-region`：

```
(defun curl-something()
  (interactive)
  (setq region ((region-beginning)(region-end)))
  (shell-command-on-region (region-beginning) (region-end) (shell-command (concat "curl" region)) nil t)) 
```

另外，如果有人对在哪里学习基本的 elisp 文本操作编程有任何指示，请分享它们（请不要参考手册）。谢谢！

编辑：

感谢兰迪莫里斯，我能够找出答案：

```
(defun curl-something (begin end)
  (interactive "r")
  (shell-command-on-region begin end (concat "curl -s " (buffer-substring begin end)) nil t)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:06:17.993

您需要将“r”标志传递给`(interactive)`. 然后，您的函数将作为数字参数传递区域的开始和结束，您可以使用它来获取区域中的文本。

这是取自[ErgoEmacs](http://ergoemacs.org/emacs/elisp_idioms.html)的示例：

```
(defun dosomething-region (p1 p2)
  "Prints region starting and ending positions." 
  (interactive "r")
  (message "Region starts: %d, end at: %d" p1 p2)) 
```

以下函数将获取 url 并将其传递给 curl，然后将该网站的内容转储到新缓冲区中：

```
(defun curl-something (begin end)
  (interactive "r")
  (shell-command (concat "curl " (buffer-substring begin end)))) 
```

同样值得注意的是`url-`这类事情的本机功能，但我意识到这超出了这个问题的范围。

# c# - C#中的Tabcontrol页面清除所有控件

> ID：12404540
> 
> 赞同：2
> 
> 时间：2012-09-13T10:47:59.313
> 
> 标签：c#, .net, winforms

我有一个标签页，其中包含文本框、下拉列表、复选框、组框中的所有内容和一些标签。现在我想在用户单击按钮时清除所有控件。我应该如何实施？我进行了很多搜索，认为会有一个标准的库方法。我发现的只是一些带有 for-each 循环的方法（在组框内不起作用。）请指导我如何处理这个问题。基本上我想要一个像 Tabpage.load(); 这样的方法 它将选项卡带到其初始状态。如果可能的话，我想保留特定的文本框。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T11:41:03.530

很多 Winforms 程序员都把这种代码弄错了。到目前为止，您得到的答案也不例外。Controls.Clear() 和 Controls.Remove() 方法**非常**危险。这些方法按预期从其父级中删除控件，但它们不*释放*控件。它们被重新托管在一个名为“ParkingWindow”的内部隐藏窗口上。为了保持本机窗口处于活动状态，准备好移动到另一个父窗口。

这是一个*非常*好的功能，但不幸的是，这是无法控制的窗口句柄泄漏的主要来源。因为到目前为止，实际意图是处置它们，而不是重新托管它们。要永久删除控件，您**必须**使用他们的 Dispose() 方法。这也会自动将它们从 Controls 集合中删除。

这是第二个陷阱，您不能使用 foreach 来迭代 Controls 集合。这仅处理偶数编号的控件，这是集合被 foreach 循环修改的副作用。您必须向后迭代它，如下所示：

```
 public static void UnloadTabpage(TabPage page) {
        for (int ix = page.Controls.Count - 1; ix >= 0; --ix) {
            page.Controls[ix].Dispose();
        }
    } 
```

另外，不要*像*Justin 那样递归。释放控件也会自动释放该控件的任何子控件。也许您的组框有问题，不是很清楚。

只是为了好玩，这是另一个真正驱动要点的实现：

```
 public static void UnloadTabpage(TabPage page) {
        while (page.Controls.Count > 0) page.Controls[0].Dispose();
    } 
```

但这并不容易让您有选择地删除控件，就像您提到的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:50:46.273

使用`ControlCollection.Clear()`方法。[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.clear.aspx)

```
myTabControl.Controls.Clear() 
```

如果要保留某些控件，您可以

*   使用枚举和条件检查仅删除您需要的控件。
*   清除所有控件，然后仅读取要保留的控件。

这取决于您要保留多少控件与要删除多少控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T14:39:59.557

首先，您必须确定每种控件的“清晰”含义。即，它可能意味着将文本设置为 strimg.Empty 用于 TextBox，将 Checked 设置为 false 用于 CheckBox 并且对标签不执行任何操作。对于 GroupBox，清除可能意味着递归清除其控件。一旦决定了你要做什么，你可以定义一个委托类型并创建这些委托的字典，其中控件的类型是关键。现在，您可以在控件集合上循环应用正确的委托。代码比解释简单：

```
public delegate void ClearControl(Control aCtrl);

private static Dictionary<Type, ClearControl> _clearDelegates;

public static Dictionary<Type, ClearControl> ClearDelegates
{
    get 
    { 
        if (_clearDelegates== null)
            InitializeClearDelegates();
        return _clearDelegates; 
    }
}

private static void InitializeClearDelegates()
{
    _clearDelegates= new Dictionary<Type, ClearControl>();
    _clearDelegates[typeof(TextBox)] = new ClearControl(delegate(Control aCtrl) 
    {
        ((TextBox)aCtrl).Text = string.Empty;
    });
    _clearDelegates[typeof(CheckBox)] = new ClearControl(delegate(Control aCtrl)
    {
        ((CheckBox)aCtrl).Checked = false;
    });
    _clearDelegates[typeof(GroupBox)] = new ClearControl(delegate(Control aCtrl)
    {
        foreach (Control innerCtrl in ((GroupBox)aCtrl).Controls)
            Clear(innerCtrl);
    });
    _clearDelegates[typeof(TabPage)] = new ClearControl(delegate(Control aCtrl)
    {
        foreach (Control innerCtrl in ((TabPage)aCtrl).Controls)
            Clear(innerCtrl);
    });
    // ... other controls
}

public static object Clear(Control aCtrl)
{
    ClearControl aDel;
    if (ClearDelegates.TryGetValue(aCtrl.GetType(), out aDel))
        aDel(aCtrl);
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-13T10:52:58.753

这对我有用，包括 GroupBox，

```
 void ClearControls(Control parent)
    {
        while (parent.Controls != null && parent.Controls.Count > 0)
        {
            ClearControls(parent.Controls[0]);
            parent.Controls.Remove(parent.Controls[0]);
        }
    } 
```

# django - Django 字段的自定义验证器将不会运行

> ID：12404543
> 
> 赞同：0
> 
> 时间：2012-09-13T10:48:08.190
> 
> 标签：django, forms, modelform, django-forms

我已经用 ModelForm 设置了一个 Django 页面（感谢评论），但现在我的`save()`方法没有定义。

当您尝试保存表单时，我加载`player_add`视图的页面会给出一个。`global name 'save' is not defined`

有人可以解释为什么这种保存方法会出错，因为它实际上保存到模型并在我回到我的玩家列表时显示正确的数据？

我的`models.py`：

```
from django.db import models
from datetime import date
from django.core import validators
from django.utils.translation import ugettext as _
import re

def validate_email(value):
    return True if validators.email_re.match(value) else False

def validate_phone(value):
    value = re.sub(' ', '', value) # get rid of any spaces
    return True if re.match(r'/^(\d){11}', value) else False # don't think this regex actually works

class Player(models.Model):
    name = models.CharField(max_length = 100)
    telnum = models.CharField('Telephone', max_length = 15, validators = [validate_phone],
                            error_messages = {  'invalid': _('Please enter a valid phone number')})
    dob = models.DateField('Date of Birth')
    email = models.CharField('MyEmail', max_length = 50, validators = [validate_email],
                            error_messages = {  'invalid': _('Please enter a valid email address.'),
                                                'required': _('You need to enter a valid email address.')})

    class Meta:
        db_table = "Players"
        ordering = ['name']

    class Admin:
        pass

def __unicode__(self):
    return self.name 
```

`forms.py`：

```
from django.forms import ModelForm
from packages.models import Player

class PlayerForm(ModelForm):
    class Meta:
        model = Player 
```

我对添加到 Player 模型的看法：

```
def player_add(request):
    form = PlayerForm(request.POST or None)
    if form.is_valid():
        cmodel = form.save()
        cmodel = save()
        return redirect(players)
    return render_to_response('players/player_add.html',
                            {'player_form': form},
                            context_instance = RequestContext(request)) 
```

# servlets - 我想写一个支持 https 连接的 servlet

> ID：12404544
> 
> 赞同：-2
> 
> 时间：2012-09-13T10:48:12.933
> 
> 标签：servlets, https

我想编写一个支持 https 连接的 servlet。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:53:00.293

在创建 servlet 以支持 HTTPS 时，您不必做任何不同的事情。

但是，您必须更改应用程序服务器以接受 HTTPS 请求。例如，对于 Tomcat，您可以通过[在 server.xml 中创建一个 HTTPS 连接器来](http://tomcat.apache.org/tomcat-7.0-doc/config/http.html#SSL_Support)做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:56:57.310

通常，您不需要更改您的 servlet，您应该能够将其部署到通过 HTTP 或 HTTPS 为页面提供服务的应用服务器。您要做的所有工作就是配置您的应用程序服务器。假设您使用的是 Tomcat，以下链接应解释 - [http://tomcat.apache.org/tomcat-5.5-doc/ssl-howto.html](http://tomcat.apache.org/tomcat-5.5-doc/ssl-howto.html)

# sql - 将 SQL 转换为 ActiveRecord

> ID：12404550
> 
> 赞同：0
> 
> 时间：2012-09-13T10:48:21.453
> 
> 标签：sql, ruby, activerecord

我需要帮助将这段 T-SQL 转换为 ActiveRecord 查询

```
select entry
from faxlog
group by entry
having count(entry) >= 8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:35:45.617

试试这个：

```
Faxlog.group(:entry).select("entry").having("count(entry) >= ?", 8) 
```

# sass - SASS/Compass 可以将 foo.scss 编译为 foo.min.css 和 foo.dbg.css 吗？

> ID：12404551
> 
> 赞同：11
> 
> 时间：2012-09-13T10:48:22.743
> 
> 标签：sass, compass-sass

我想将一组`.scss`文件编译为不同的文件名。

在开发中，我想编译例如。`foo.scss`到`foo.dbg.css`（未缩小并带有评论）。在生产中，我想拥有例如。`foo.min.css`（缩小）。

有没有办法告诉 SASS/Compass 使用什么作为目标扩展？命令行开关？一个`config.rb`选项？

编写一个首先编译然后重命名文件的脚本似乎是一个糟糕的选择，因为那样我就不能`compass watch`有效地使用。

（好吧，我*可以*编译到两个不同的输出目录，然后编写一个从那里复制文件的脚本。感觉有点笨拙。）

**更新：**我通过编写手表代码的简化版本解决了这个问题。当某些事情发生变化时，它会触发重新编译到两个不同的输出目录，然后重命名并将文件移动到地方。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-08-18T13:42:50.617

我无法得到 Alireza Fattahi 的答案，因为它抛出了错误，所以我找到了另一个对我有用的例子

[http://h3r2on.com/2013/05/17/rename-css-on-compile.html](http://h3r2on.com/2013/05/17/rename-css-on-compile.html)

```
require "fileutils"

on_stylesheet_saved do |file|
  if File.exists?(file)
    filename = File.basename(file, File.extname(file))
    File.rename(file, css_dir + "/" + filename + ".min" + File.extname(file))
  end
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T18:05:01.613

不，它不能。我在关于 RTL 样式表的邮件列表中提出了同样的问题。但是，您可以使用不同的“config.rb”文件运行 compass compile。试试`compass compile -c debug.rb`。

**更新**： Compass 仍然不能，但 Gulp 可以使用 Sass 和 Compass 观察和生成多个目标 css 文件。见[https://github.com/Snugug/gulp-css-target/](https://github.com/Snugug/gulp-css-target/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-08T06:23:38.273

您可以将其添加到您的配置中。

请参阅[https://github.com/sbspk/Prepros/issues/38](https://github.com/sbspk/Prepros/issues/38)

```
require 'fileutils'

on_stylesheet_saved do |file|

  if file.match('.min') == nil

    require 'compass'

    Compass.add_configuration(
        {
            :project_path => File.dirname(File.dirname(file)),
            :sass_dir => File.basename(File.dirname(file)),
            :css_path => File.basename(File.dirname(file)),
            :output_style => :compressed
        },
        'alwaysmin' # A name for the configuration, can be anything you want
    )
    Compass.compiler.compile(File.dirname(file) + "/" + File.basename(file, '.css') + '.scss', File.dirname(file) + "/" + File.basename(file, '.css') + ".min.css")

  end

end 
```

# symfony - 作曲家“chmod（）：没有这样的文件或目录”与bin目录

> ID：12404552
> 
> 赞同：2
> 
> 时间：2012-09-13T10:48:30.543
> 
> 标签：symfony, composer-php

我正在尝试在 koding.com 上安装我的 Symfony2 应用程序

尝试通过 php composer.phar 更新安装我的供应商，我遇到了以下问题，安装了学说/orm：

```
Installing doctrine/orm (2.3.x-dev 4d9f24b)
Cloning 4d9f24b2eef3af3a3e76c773994c19bbb0706f88

[ErrorException]
chmod(): No such file or directory 
```

我尝试使用 -v 进行调试，发现以下行导致了此问题：

```
composer.phar/src/Composer/Installer/LibraryInstaller.php:217 
```

在那里我看到这个问题与 bin 目录有关。我已将（S2 默认）bin-dir 设置为“bin”。bin 目录也在我的项目中，但不知何故作曲家在尝试更改 chmod 时找不到它。我已经在几台 Windows 机器和 c9.io 上使用了这个设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-31T08:55:33.353

由于在 github 上的修复而解决了问题：[https ://github.com/composer/composer/issues/1270](https://github.com/composer/composer/issues/1270)

# bash - 如何 FTP 我在 TXT 中列出的许多文件？

> ID：12404555
> 
> 赞同：0
> 
> 时间：2012-09-13T10:48:42.743
> 
> 标签：bash, upload, ftp

我有一个 TXT 文件中的文件列表，我需要上传到我的 FTP。是否有任何 Windows Bat 文件或 Linux shell 脚本可以处理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:56:30.993

cat ftp_filelist | xargs --max-lines=1 ncftpput -u user -p pass ftp_host /remote/path

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:56:43.250

您可以使用 wput 命令。

语法有点像这样 wput -i [name of the file.txt] 浏览这个链接 [http://wput.sourceforge.net/wput.1.html](http://wput.sourceforge.net/wput.1.html)

它适用于linux。它会将文本文件中给出的所有URL一一上传到您的ftp服务器上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T10:53:22.160

您可能想查看 Jason Faulkners 的批处理脚本，他在[此处](http://www.howtogeek.com/50359/upload-files-to-an-ftp-site-via-a-batch-script/)撰写了该脚本。

# iphone - iOS 6.0 中的界面方向

> ID：12404556
> 
> 赞同：25
> 
> 时间：2012-09-13T10:48:43.737
> 
> 标签：iphone, ios, xcode, ipad, ios6

如何在 iOS 6.0 中使用以下方法来支持界面定向：

```
shouldAutorotate

supportedInterfaceOrientations

preferredInterfaceOrientationForPresentation 
```

由于“shouldAutorotateToInterfaceOrientation”在 iOS 6.0 中已弃用。

请提供代码片段以支持您的答案。

谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-19T12:07:17.447

iOS 5 中不推荐使用的方法：

```
// Override to allow orientations other than the default portrait orientation.
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

iOS 6 中的替换和上述已弃用的 iOS 5 方法的等效项：

```
- (BOOL) shouldAutorotate
{
    return YES;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscapeRight;
} 
```

希望这可以帮助。

* * *

**[编辑#1：添加了我的 UIViewController，它在 iPhone 6.0 模拟器上的 XCode 4.5 中以纵向模式成功启动]**

```
#import "FirstViewController.h"

@interface FirstViewController ()

@end

@implementation FirstViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];

    if (self)
    {
        // Custom initialization
    }

    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

-(BOOL)shouldAutorotate
{
    return NO;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationMaskPortrait;
} 
```

**[#edit 2：来自支持 iOS 5 和 iOS 6 的仅限横向应用程序的示例代码]**

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

    return (interfaceOrientation == UIInterfaceOrientationLandscapeRight) || (interfaceOrientation == UIInterfaceOrientationLandscapeLeft);
}

- (BOOL)shouldAutorotate {

    return YES;
}

- (NSUInteger)supportedInterfaceOrientations {

    return UIInterfaceOrientationMaskLandscape;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {

    return UIInterfaceOrientationLandscapeLeft;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-13T23:54:42.717

顺便说一句，您的 Xcode 项目设置现在优先。确保在项目设置中正确设置“支持的界面方向”数组。这对我来说是个问题。删除了不需要的，我的应用程序就像我用 Xcode 4.4.1 编译时一样工作

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-04T09:17:57.067

我的应用程序有一个自定义 UINavigationController 子类的实例，它显示了几个视图控制器，全部都是纵向的，除非在播放视频时，在这种情况下，我想另外允许两个横向方向。

根据@uerceg 的回答，这是我的代码。

首先，我在 Xcode -> Target -> Summary 中启用了 Portrait、Landscape Left 和 Landscape right。

在 UINavigationController 子类的实现中，我`#import`编辑 了`<MediaPlayer/MediaPlayer.h>`.

然后我实现了这些方法：

```
// Autorotation (iOS <= 5.x)

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if ([self modalViewController] && [[self modalViewController] isKindOfClass:[MPMoviePlayerController class]]) {

        // Playing Video: Anything but 'Portrait (Upside down)' is OK
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    }
    else{
        // NOT Playing Video: Only 'Portrait' is OK
        return (interfaceOrientation == UIInterfaceOrientationPortrait);
    }
}

// Autorotation (iOS >= 6.0)

- (BOOL) shouldAutorotate
{
    return YES;
}

-(NSUInteger)supportedInterfaceOrientations
{
    NSUInteger orientations = UIInterfaceOrientationMaskPortrait;

    if ([self modalViewController] && [[self modalViewController] isKindOfClass:[MPMoviePlayerController class]]) {

        // Playing Video, additionally allow both landscape orientations:

        orientations |= UIInterfaceOrientationMaskLandscapeLeft;
        orientations |= UIInterfaceOrientationMaskLandscapeRight;

    }

    return orientations;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-09T01:46:16.763

NicolasMiari 的代码对我有用。有点不同的旋转我有一个呈现 UINavigationControllers 的 UITabBarController，我正在使用 StoryBoards。UITabBarController 的子类实现完全一样，请耐心等待 Story Boards 中 Tab Bar Controller 的 Class 选择。即使在构建之后也不能立即使用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-13T13:32:28.380

[https://devforums.apple.com/thread/165384?tstart=0](https://devforums.apple.com/thread/165384?tstart=0)

[https://devforums.apple.com/thread/166544?tstart=0](https://devforums.apple.com/thread/166544?tstart=0)

上述线程中有许多示例和建议与支持 iOS6 上的界面方向更改有关，这两个线程与游戏中心视图问题有关，但应该足以让您入门。

您还应该查看 UIKit 下的 iOS6 发行说明，不幸的是，由于我是新手，因此无法直接给您链接。

由于保密协议，避免在此处发布代码

希望有帮助

# sql-server - 在记录不匹配的地方加入

> ID：12404561
> 
> 赞同：1
> 
> 时间：2012-09-13T10:49:23.450
> 
> 标签：sql-server, tsql

我需要对两个表进行连接，我需要表 A 中的所有内容，并且只需要表 B 中的内容，其中每行的“REF”尚未出现在表 A 的结果中。

关键事实：表 B 包含 ID/姓名的完整数量，但所有其他信息均为空白。它基本上只是一个包含所有员工姓名和 ID 的表格，但它是一个完整的列表。表 A 包含有限数量的结果，但所有其他列中都有数据。

我需要的是使用表 B 作为完整的参考，而不仅仅是查看表 A 中存在的内容，所以基本上：

> “向我展示表 A 中的所有内容，并添加在表 B 中找到的额外人员的详细信息，而他们在表 A 中尚不存在，为我提供完整的结果集”

```
select
ID,
Name,
StartDate,
EndDate,
State,
Status,
Comment,
IsComment
from
tableA

select
ID,
Name,
StartDate,
EndDate,
State,
Status,
Comment,
IsComment
from
tableB 
```

表A内容：

```
ID       Name     START_DATE       END_DATE      STATE    Status     Comment    Is_Comment
6760    chris       2012-09-03      2012-09-09   4       Applied                   0
6524     dave     2012-09-03        2012-09-09    4        Applied                 0
4268     james    2012-09-03        2012-09-09    4        Applied    Friday-Off   1
7851     rob      2012-09-03        2012-09-09    4       Applied                  0 
```

表 B 内容

```
 ID        Name     START_DATE       END_DATE      STATE    Status     Comment    Is_Comment
    6760    Chris   
    6524    dave    
    4268    james   
    7851    rob      
    4521    ryan
    5698   julie
    4596    rory
    1111     mary
    5621     owain
    9999     jacob 
```

加入后我想看到的：

```
 ID       Name     START_DATE       END_DATE      STATE    Status     Comment    Is_Comment

    6760    chris       2012-09-03      2012-09-09   4       Applied                   0
    6524     dave     2012-09-03        2012-09-09    4        Applied                 0
    4268     james    2012-09-03        2012-09-09    4        Applied    Friday-Off   1
    7851     rob      2012-09-03        2012-09-09    4       Applied                  0   
   4521    ryan
   5698    julie
   4596    rory
  1111     mary
  5621     owain
  9999     jacob 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T10:54:48.540

试试这个：

```
select
tableB.ID,
tableB.Name,
tableA.StartDate,
tableA.EndDate,
tableA.State,
tableA.Status,
tableA.Comment,
tableA.IsComment
from
tableB
LEFT JOIN tableA on tableB.ID = tableA.ID 
```

因为每个`ID`and`Name`都会**从 tableB**中列出，而其他每一列都从 tableA 中列出。如果表之间没有连接，则其他列从 TableA 获得 NULL -*因为 LEFT JOIN* - 如果有连接，那么您也从 TableA 获得填充值。

这是一个[SQL fiddle](http://www.sqlfiddle.com/#!3/14036/2)，这个简单的解决方案是如何工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T11:03:50.473

请使用此 SQL：

```
declare @tableA table 
(
ID int,
Name nvarchar(250),
Age int
)

declare @tableB table 
(
ID int,
Name nvarchar(250),
Age int
)

Insert @tableA values (1,'a',10);
Insert @tableA values (2,'b',20);

Insert @tableB values (1,'a',null);
Insert @tableB values (2,'b',null);
Insert @tableB values (3,'c',null);
Insert @tableB values (4,'d',null);

select  tblResult.*,T1.Age from 
(
select ID,Name from @tableA
union
select ID,Name from @tableB) as tblResult 
left join @tableA as T1 on tblResult.ID =T1.ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T10:51:53.053

使用左连接

```
SELECT [columnsListYouNeed]
FROM  TableB 
LEFT JOIN TableA ON TableA.ID = TableB.ID 
```

# sql-server - SQL 服务器端口

> ID：12404563
> 
> 赞同：0
> 
> 时间：2012-09-13T10:49:26.177
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, port, sql-server-2012

我的 PC 上安装了多个 SQL Server 实例（实际上是一个 2005、一个 2008 和一个 2012）。都在跑。我意识到所有这些都配置为在端口 1433 上运行（SQL Server 配置管理器 -> SQL Server 网络配置 -> 数据库引擎协议 -> TCP/IP）。

这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T06:37:06.440

那是不可能的。您可以阅读错误日志以查找为每个服务器分配的端口号。在命令提示符下执行 netstat 以列出连接。这还将显示每个连接的端口号。

# asp.net - Asp.Net 本地化 SQL 内容/如何定义类

> ID：12404565
> 
> 赞同：0
> 
> 时间：2012-09-13T10:49:44.660
> 
> 标签：asp.net, sql, asp.net-mvc, localization

我已经对这个主题进行了很多研究，现在我正在寻求一些建议:)

我正在开发一个多语言的 Intranet。我不是在谈论翻译 UI（使用资源等），而是在翻译内容。

我有几个基于这种格式的表：

```
Product
-------------
IdProduct | DateCreation

ProductT
-------------
IdProduct | IdLanguage | ShortName

Question
-------------
IdQuestion | DateCreation

QuestionT
-------------
IdQuestion| IdLanguage | ShortName | Description

Language
-------------
IdLanguage | Culture 
```

**我现在的问题是：**

如何为此模型编写 C# 类。我正在使用带有存储库模式和存储过程（没有像 EF 等 ORM 等）的 Asp.Net MVC，因为我们不能（不是我的决定）

例如对于问题对象，我将不得不在页面中显示正确翻译的问题列表。如果未找到问题的所选语言版本，则显示英文翻译。

那么我怎样才能写下我的类来满足这个需求，并且可以被我的存储库、控制器和视图使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:29:32.587

您需要创建自定义 [ResourceProviderFactory](http://msdn.microsoft.com/en-us/library/system.web.compilation.resourceproviderfactory.aspx)。例如看[ASP.NET 2.0 Custom SQL Server ResourceProvider](http://www.codeproject.com/Articles/14190/ASP-NET-2-0-Custom-SQL-Server-ResourceProvider)。我使用带有 PK 的常量字符串来访问翻译。

# java - 优先队列\java

> ID：12404566
> 
> 赞同：0
> 
> 时间：2012-09-13T10:49:54.453
> 
> 标签：java, arrays, collections, priority-queue

想不出比将整个集合复制到另一个集合并使用 poll 方法更好的方法来打印 toString 与 PQ，自然有序。

还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:55:40.383

如果您需要 PriorityQueue 完全排序后的顺序，则需要将其复制到 TreeSet 之类的排序集合

例如

```
System.out.println(new TreeSet(pq)); // prints elements naturally sorted. 
```

注意：这将丢弃重复项，而 PriorityQueue 不会。

* * *

即使排序是 O(n * log n) 并且打印是 O(n) 这还不是全部。在内存中排序比使用任何 IO 都要快得多，这意味着您需要一个非常大的队列才能使排序更加重要。

```
public static void main(String... args) {
    PriorityQueue<Double> pq = new PriorityQueue<Double>();
    for (int i = 0; i < 10*1000 * 1000; i++)
        pq.add(Math.random());
    long start1 = System.nanoTime();
    Set<Double> set = new TreeSet<Double>(pq);
    long time1 = System.nanoTime() - start1;

    long start2 = System.nanoTime();
    for (Double d : set) {
        System.out.println(d);
    }
    long time2 = System.nanoTime() - start2;
    System.out.printf("It took %.3f seconds to sort, and %.3f seconds to print %,d doubles%n", time1 / 1e9, time2 / 1e9, pq.size());
} 
```

最后打印

```
It took 28.359 seconds to sort, and 94.844 seconds to print 10,000,000 doubles 
```

如果我使用数组并对其进行排序

```
Double[] doubles = pq.toArray(new Double[pq.size()]);
Arrays.sort(doubles);

It took 8.377 seconds to sort .... 
```

简而言之，在您拥有足够长的队列以使排序成为最重要之前，您可能会耗尽内存或超过 String 的最大长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:56:30.463

您需要`toString()`在任何集合中添加的对象中覆盖方法，然后`toString`方法工作正常

```
 PriorityQueue<String> priorityQueue = new PriorityQueue<String>();
    priorityQueue.add("one");
    priorityQueue.add("two");
    priorityQueue.add("three");
    System.out.println(priorityQueue);//Prints [one, two, three] 
```

# android - 在android中获取实时流数据很热门

> ID：12404568
> 
> 赞同：0
> 
> 时间：2012-09-13T10:50:22.993
> 
> 标签：android, streaming, live

我正在尝试制作一个可以获取直播相机视频的应用程序。我可以通过使用 1AVStreaming 程序从我的笔记本电脑上的 ip（例如 ip:176.33.226.53:8070）流式传输我的网络摄像头，但我无法在我的代码中访问流式视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:56:50.487

媒体播放器可以直接使用 url 本身。

寻找类似的东西

```
 Uri myUri = Uri.parse("http://your/video/file/path");

    MediaPlayer player = new MediaPlayer();
    player.setDataSource(context, myUri);
    player.prepare(); 
```

使用 MediaPlayer.OnPreparedListener 显示控件或启动视频它们是可用的各种示例。只是谷歌它

# jquery - jQuery Ajax - 如果选中多个复选框

> ID：12404570
> 
> 赞同：1
> 
> 时间：2012-09-13T10:50:31.370
> 
> 标签：jquery, ajax, checkbox

我正在寻找一个在单击几个复选框时执行操作的脚本。我发现以下脚本仅适用于一个复选框：

```
<input type="checkbox" name="foo" value="bar" class="checkIt"/>Name <br/>

<script src="http://code.jquery.com/jquery-1.8.1.min.js"></script>
<script type="text/javascript">
    $('.checkIt').bind('click', function() {
        if($(this).is(":checked")) {
          alert('Everything checked')
        } else {
            alert('I think you have missed some boxes!');
        }
    });
</script> 
```

但现在我想要更多的复选框，我不知道如何管理它。所以当点击 10 个复选框时，就会发生一些事情！如果你能帮助我，那就太好了。我的其他问题是，如果所有框都被选中，我想要而不是 js 警报，在特定位置显示图像。这可能吗 ？多谢！！

* * *

编辑：伟大的家伙！好的，抱歉，之前那个人的代码很好用：

```
 <input type="checkbox" name="foo" value="bar" class="checkIt"/>Name <br/>
    <input type="checkbox" name="foo" value="bar" class="checkIt"/>Name <br/>
        <input type="checkbox" name="foo" value="bar" class="checkIt"/>Name <br/>
            <input type="checkbox" name="foo" value="bar" class="checkIt"/>Name <br/>

<script src="http://code.jquery.com/jquery-1.8.1.min.js"></script>
<script type="text/javascript">
$('.checkIt').bind('click', function() {

    var $boxes = $('.checkIt');
    var boxesLength = $boxes.length;
    var checkedCount = $boxes.filter(':checked').length;
    if( boxesLength == checkedCount) {
       alert("hello");
    }
});

</script> 
```

不，我搜索出现的图像，而不是警报！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:21:49.217

在这里查看我的**[演示](http://jsfiddle.net/STGef/1/)**

```
 $(".checkIt").change(function(){ 
    if ($('.checkIt:checked').length == $('.checkIt').length) {
       $("#imgloc").show();
    } else {
        $("#imgloc").hide();
    }
});​ 
```

更新以在未选中复选框时隐藏图像，更新[**演示**](http://jsfiddle.net/STGef/3/)

# php - 以字节为单位搜索千字节

> ID：12404573
> 
> 赞同：0
> 
> 时间：2012-09-13T10:50:46.313
> 
> 标签：php

我有一个列名=recording_size 的表。在本专栏中，我以字节为单位存储大小，但在 Web 上，我以 KB 为单位显示大小。

```
 public static function getKbFromBytes($string){
         if($string){
            return ($string/1024);
          }
       } 
```

现在我在 Web 中有一个过滤功能。因此，当我以 KB 显示大小时，我肯定会以 KB 而不是字节为单位进行用户搜索输入，尽管在 DB 中我以字节为单位。为此，我以 KB 为单位输入，然后将其再次转换为以下字节：

```
 public static function getBytesFromKb($string){
        if($string){
         return ($string * 1024);
       }
    } 
```

例子：

```
size in Bytes = 127232 
```

当我应用我的函数时它 = 124.25 KB 现在当用户写完全像 124.25 然后搜索工作，但我希望该用户不写完全相同。用户也可以写 124 而不是 124.54，当用户写 124 时，我的搜索不起作用——这意味着它不显示任何记录。我还从转换后的字节中添加并减去 50，但它不起作用。

```
 $sql = $sql->where('r.recording_size BETWEEN "'.(Engine::getBytesFromKb($opt['sn']) - 50) .'" AND "'.(Engine::getBytesFromKb($opt['sn']) + 50) .'"'); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:01:06.170

无论如何，搜索大小应该是一个范围而不是一个相等。至少，默认值应该是范围，除非您的应用程序的主要焦点是确切的大小。对于 SQL：

```
$kb = round($opt['sn']);
$sql = $sql->where('r.recording_size BETWEEN '.($kb * 1024).' AND '.(($kb + 1) * 1024)); 
```

顺便说一句，您应该省略引号 ( `"`)。即使对于字符串，它们也是无效/非标准的。而你正在比较`int`的。

另一件需要注意的是 KiB 与 KB。

# windows-server-2008-r2 - 无法通过 RDP 连接到 Windows 2008 R2 Server

> ID：12404574
> 
> 赞同：0
> 
> 时间：2012-09-13T10:50:48.863
> 
> 标签：windows-server-2008-r2, terminal-services

我刚刚安装了带有 RDS 的 Windows 2008 Standard R2 服务器。每当我尝试从 Windows 2003 服务器通过 RDP 连接到服务器时，都会收到以下错误。

![在此处输入图像描述](../Images/00fa4a2cbbc983ebe34fa436b7c6476a.png)

但是，我可以从 Windows 7 桌面连接并使用 Linux RDP 客户端。

任何人都知道我为什么会收到此错误以及如何解决此问题？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T10:58:26.287

这可能是一个服务器故障问题，但我的猜测是服务器具有以下设置：

![环境](../Images/e8f7904810a52c6eadf24563d42b70f2.png)

也许您的 Linux RDP 客户端不支持此功能？

如果没有，请检查您的防火墙，它需要如下所示：

![防火墙](../Images/d27147b6e4a7716416597cdb315e8db8.png)

# dynamics-crm - 在 CRM Dynamics 中创建一个棘手的获取 XML

> ID：12404576
> 
> 赞同：0
> 
> 时间：2012-09-13T10:51:14.740
> 
> 标签：dynamics-crm, fetchxml

我想进行高级搜索，将来自两个不同实体的字段组合在一起，这些实体彼此之间存在多对多关系。在 SQL 中它非常简单，但在 Dynamics 中我被卡住了。

我想得到一个一般性的答案，但如果它有帮助，这里是细节。任务是创建数据库中所有联系人的列表（列“名称”和“电子邮件”）**，但**结合第三列，即相关联系人所属的营销列表的名称。当然，同一个人**可能会**被多次列出，但唯一性不是必需的（此外，每一行都会有一个相当于 PK 的联系人姓名和营销列表的组合）。

那可行吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:25:46.300

首先，这是您的查询：

```
<fetch mapping='logical'>
    <entity name='listmember'>
        <link-entity name='list' from='listid' to='listid'>
            <attribute name='listname'/>
        </link-entity>
        <link-entity name='contact' from='contactid' to='entityid'>
            <attribute name='fullname'/>
            <attribute name='emailaddress1'/>
        </link-entity>
    </entity>
</fetch> 
```

示例结果：

```
<resultset morerecords='0' paging-cookie='<cookie page="1"><listmemberid last="{E1B03485-0000-0000-0000-00155D107003}" first="{A74C877A-0000-0000-0000-00155D107003}" /></cookie>'>
    <result>
        <listmemberid>{A74C877A-0000-0000-0000-00155D107003}</listmemberid>
        <listid.listname>List 1</listid.listname>
        <entityid.fullname>Amy Pickle</entityid.fullname>
        <entityid.emailaddress1>apickle@domain.com</entityid.emailaddress1>
    </result>
    <result>
        <listmemberid>{A94C877A-0000-0000-0000-00155D107003}</listmemberid>
        <listid.listname>List 2</listid.listname>
        <entityid.fullname>Andrew Colley</entityid.fullname>
        <entityid.emailaddress1>colley@domain.com</entityid.emailaddress1>
    </result>
</resultset> 
```

不知道我能用一般的术语来描述这一点，但是：

*   您正在寻找列表的成员，因此`listmember`必须是您返回的根实体
*   对于包含要显示的属性的实体的每个关系，您需要定义一个`link-entity`（在这种情况下，一个用于`list`获取列表名称，另一个`contact`用于获取联系人的详细信息
*   您只想显示某些`attribute`s，因此它们每个都需要在您的`link-entity`
*   您没有指定任何过滤，因此将返回所有**联系人列表的所有成员资格**

我从不用手做这些。以前我使用了 James Downey 的 FetchXML Builder，但我相信它不再可用 - [Stunnware](http://stunnware.com)做了一个类似的工具。

# security - 会话固定与 cookie 中的会话

> ID：12404577
> 
> 赞同：1
> 
> 时间：2012-09-13T10:51:15.667
> 
> 标签：security, session, web-applications

StackOverflow 上有很多关于会话固定的问题和答案，但是，我仍然对一件事感到困惑。人们经常建议将会话存储在 cookie 中不足以克服会话固定问题，您应该在登录后轮换会话 ID。我可以想象，如果你只使用 session id 来识别用户，你可能仍然容易受到攻击。但是，我想问一个具体的案例。

假设您使用签名的 cookie 来存储整个会话。登录时，您将标识用户的 id 放入 cookie 中。注销后，您删除 id。您不会更改会话 ID，但是当您更改会话本身并对其进行签名时，我看不到任何利用这种设计的攻击场景。会话固定是否仍然是一个问题，因此在这种情况下是否仍然需要会话 ID 轮换？如果是，您能否提供可以使用的攻击？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:11:12.373

会话固定的基础是攻击者可以让受害者使用攻击者可以访问的会话。这通常是通过诱使受害者使用攻击者已知并且在身份验证后不会更改的某个会话 ID 来完成的。

现在，您所描述的听起来不像是会话标识符，而是用户身份验证数据的简单客户端数据存储。

但是，如果您使 cookie 数据依赖于再次依赖于经过身份验证的用户的数据，该用户又由服务器签名，那么它肯定会在身份验证后发生变化，并且不会被攻击者知道。那么该方案的安全性取决于它的实际实现。

# php - 如何在 ZF2 控制器中获取 baseUrl？

> ID：12404578
> 
> 赞同：16
> 
> 时间：2012-09-13T10:51:26.930
> 
> 标签：php, zend-framework2

在我的 zf2 控制器中，我想检索应用程序基本 URL（例如`http://domain.com`）。

我尝试了以下调用，但它返回一个空字符串。

```
$this->request->getBasePath(); 
```

然后我怎样才能`http://domain.com`在我的控制器中获取 URL 的一部分？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-09T18:45:33.493

我知道这不是最漂亮的方法，但是，嘿，它有效：

```
public function indexAction()
{
    $uri = $this->getRequest()->getUri();
    $scheme = $uri->getScheme();
    $host = $uri->getHost();
    $base = sprintf('%s://%s', $scheme, $host);

    // $base would be http://domain.com
} 
```

或者，如果您不介意缩短您可以在两行中完成的所有内容：

```
public function indexAction()
{
    $uri = $this->getRequest()->getUri();
    $base = sprintf('%s://%s', $uri->getScheme(), $uri->getHost());
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-13T12:35:43.697

我不确定是否有本地方式，但您可以使用`Uri`来自`Request`. 您可以将此代码段作为解决方法，直到找到更好的解决方案：

```
$basePath = $this->getRequest()->getBasePath();
$uri = new \Zend\Uri\Uri($this->getRequest()->getUri());
$uri->setPath($basePath);
$uri->setQuery(array());
$uri->setFragment('');
$baseUrl = $uri->getScheme() . '://' . $uri->getHost() . '/' . $uri->getPath(); 
```

这适用于控制器上下文。请注意，在第 2 行中，克隆了请求中的 Uri 实例，以便不直接修改请求的 uri 实例（以避免副作用）。

我对这个解决方案不满意，但至少它是一个。

// 编辑：忘记添加路径，已修复！

# ruby-on-rails - Rails：发出发布请求后获取 JSON 对象

> ID：12404585
> 
> 赞同：0
> 
> 时间：2012-09-13T10:51:49.643
> 
> 标签：ruby-on-rails, json, get

我是一名初学者 Rails 程序员，尽管这个问题可能太简单了，但我很想知道这是否可行，如果可行，我该如何实现？

我在**索引**中的问题如何向链接发出获取请求并将其 JSON 响应分配给我稍后将使用的对象。我脑海中的语法（不正确）类似于；

```
people=Make_A_Get_Request("http://people.com") //It will return in JSON
@peopleName=people['name'] 
```

我知道这不是真的，但是有没有像我可以在 Rails 中应用的任何方法一样，像上面那样向链接发出 get 请求并将其 JSON 响应分配给我的 rails 函数中的对象

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:09:37.977

试试下面的东西

```
def index
  uri = URI('http://people.com/path/to/request')
  response = Net::HTTP.get(uri)
  data = JSON.parse(response.body)
  #then you can play like data["name"]
  rescue Exception => e
   logger.info "Unable to do something due to #{e.message}"
end 
```

# objective-c - 是否可以覆盖属性的方法？

> ID：12404588
> 
> 赞同：0
> 
> 时间：2012-09-13T10:51:51.960
> 
> 标签：objective-c

当 MyClass 的字符串值改变时，我需要添加一些代码。所以我试图覆盖 MyClass 的字符串属性方法。但我不知道..所以我喜欢跟随。这是正确的吗？

如何覆盖属性的方法？

```
@interface MyClass{
     NSString *string;
}

@property(retain, nonatomic) NSString *string;
@end

@implementation MyClass

- (void)setString:(NSString*)newString{
    // want to add some codes.

    [self setString:newString];  <= Is this correct?
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:55:41.007

```
- (void)setString:(NSString*)newString{
    // want to add some codes.

    string = newString;  //This is the setter method!
    // You will need to consider memory management etc. 
} 
```

你可能更关心的是：

```
- (void)setString:(NSString*)newString{
    // want to add some codes.

    [super setString:newString];  
} 
```

`[self setString:newString]`在这个地方将是一个无限的递归循环。`[super setString:newString]`应该调用 superlass 的二传手。但是，我自己从来没有这样做过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T12:44:39.883

您要做的不是覆盖（您的代码片段中不涉及任何子类）。

您的代码中的内容只是声明`@interface`和定义`@implementation`。它与 C 中的声明/定义具有相同的含义和实用性，您将声明放在`.h`文件中，将定义放在`.c`文件中。

假设您在谈论如何合成，那么您的代码几乎是正确的。你只是错过了 getter`- (NSString *) string;`或者你是只读的。

至于如何正确完成作业，您应该使用`=`

```
- (void)setString:(NSString*)newString{
    // want to add some codes.

    string = newString;  // Correct way of doing it
} 
```

有两种合成属性的方法，一种是手动定义 setter 和 getter，另一种是使用语法糖`@synthesize`。

为了更好地理解，请考虑`@property`和`@synthesize`都是语法糖。（只是`@property`用保留、强等关键字添加了一些语义）。

更好的是阅读您可以找到的文档。有许多易于找到的网页，您可以在其中了解更多详细信息。

# android - 软输入键盘与android上的多行编辑文本重叠

> ID：12404589
> 
> 赞同：7
> 
> 时间：2012-09-13T10:51:52.087
> 
> 标签：android

我在滚动视图中遇到多行编辑文本问题

问题是我在滚动视图中添加了一个多行编辑文本视图，这是动态添加的。

我已将 windowSoftInputMode 设置为“adjustPan”

当我选择文本区域（多行编辑文本）时，软键盘会覆盖它。

请看下面：-

![软键盘重叠的多行编辑文本](../Images/2b99cf2fb1e8eaa3a896af8aa4474b06.png)

任何想法我如何改变它显示整个多行编辑文本谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T10:57:53.240

尝试使用adjustresize 而不是adjustpan。

```
android:windowSoftInputMode="adjustResize" 
```

# c# - 将其显示到“Table1”表中

> ID：12404592
> 
> 赞同：12
> 
> 时间：2012-09-13T10:51:57.970
> 
> 标签：c#, linq, c#-4.0, linq-to-sql, asp.net-mvc-4

以下是上面提到的方法：

```
public IList<tst> testUsers()
{
    IList<tst> testUsers = _test.GetAll().ToList();
    return test(test);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T11:51:54.037

要显示具有位置的用户，我认为您需要一个名为 AdsnapshotUsers 的类

```
public class AdsnapshotUsers
{
// three fields UserId, UserLogonName, Location

} 
```

现在创建一个返回的方法`IList<AdsnapshotUsers>`

```
 public IList<AdsnapshotUsers> GetAdsnapshotUsers()
{
List<User> Users =  GetAcitveUsers().ToList();
List<ADSnapshot> adSnapshotUsers = _adSnapshotRepository.GetAll().ToList();

     return (from u in Users  
         join ad in adSnapshotUsers on u.UserLogonName equals ad.UserLogonName 
         select new AdsnapshotUsers { 
             UserId= u.UserId, UserLogonName = u.UserLogonName, Location = ad.Location
         }
     ).ToList<AdsnapshotUsers>();
} 
```

左外连接以显示用户表中的所有值，即使在 adsnapshot 表中不存在用户登录名（位置值空白）

```
 (from u in Users 
  join ad in adSnapshotUsers on u.UserLogonName equals ad.UserLogonName into aduserselect
  from ad1 in aduserselect.DefaultIfEmpty() 
  select new AdsnapshotUsers { 
      UserId= u.UserId, UserLogonName = u.UserLogonName, Location = ad1.Location
  }
 ).ToList<AdsnapshotUsers>(); 
```

此处将选择用户表中的所有记录，如果用户登录名存在，则位置名称值设置为 ADSnapshot 表值，否则不存在，则设置默认空值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T11:39:19.487

在 LINQ 中连接两个 IEnumerable 的最简单方法是使用 Join()：

```
 var joined = from u in GetActiveUsers()
                join ad in _adSnapshotRepository.GetAll()
                    on u.UserLogonName equals ad.UserLogonName
                select new { User = u, Location = ad.Location } 
```

当然，joined 现在是匿名类型的 IEnumerable。如果您在网格视图或需要平面对象的东西中显示此信息，您可能希望使用每个表中所需的属性创建自己的类，然后选择它。

另外两点需要注意：

(1) 您似乎总是提前调用 ToList() 从 IQueryable 转换为 IEnumerable。通过推迟 ToList() 直到您完成所有连接和过滤，您可以让大部分查询发生在 SQL 中（而不是在内存中）。

(2) 通常最好在您的实体上设置关联属性并使用这些属性，而不是加入：

```
 IQueryable<User> users = ...
 var combinedInfo = users.Select(u => new { User = u, Location = u.ADSnapshot.Location })
    .ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T05:15:43.797

如果您在这两个表之间存在关系 (1:1)，那么您只需使用一个查询就可以非常轻松地获取记录。即使第二个表中不存在记录。

我正在使用上面定义的类定义来存储数据。

```
_userRepository.GetAll().Select(u=>new AdsnapshotUsers  {
         UserId= u.UserId, 
         UserLogonName = u.UserLogonName, 
         Location = u.ADSnapshot.Location
 }).ToList(); 
```

# django - Django-celery 任务和 django 事务

> ID：12404593
> 
> 赞同：2
> 
> 时间：2012-09-13T10:51:59.237
> 
> 标签：django, celery, postgresql-9.1, django-celery

我有一个关于交易和芹菜任务的问题。所以对我来说，当然，如果你有一个事务和一个 celery 任务访问同一个表/记录，我们就会有一个竞争条件，这对我来说并不神秘。

但是，请考虑以下代码：

```
def f(self):
   # function of module that inherits from models.Model
   self.field_a = datetime.now()

   self.save()
   transaction.commit_unless_managed()

   # depending on the configuration of this module
   # this might return None or a datetime object.
   eta = self.get_task_eta()

   if eta:
       celery_task_do_something.apply_async(args=(self.pk, self.__class__),
                                            eta=eta)
   else:
       celery_task_do_something.delay(self.pk, self.__class__) 
```

这是芹菜任务：

```
def celery_task_do_something(pk, cls):

    o = cls.objects.get(pk=pk)

    if o.field_a:
        # perform something
        return True
    return False 
```

如您所见，在创建我们调用的任务之前`transaction.commit_unless_managed`，它应该提交，因为 django 事务当前不受管理。

但是，在运行 celery 任务时，该字段`field_a`未设置。

**我的问题**：

由于我们在创建任务之前进行了提交，是否还有可能存在竞争条件？

**附加信息**

*   我们正在使用 Postgres 9.1 版

*   每个事务都以 READ COMMITTED 隔离级别运行

*   在具有引擎的不同数据库上`dowant.lib.db.backends.postgresql_psycopg2_debugger` `field_a`已经设置并且任务按预期工作。使用引擎`dowant.lib.db.backends.postgresql_psycopg2_hstore_ready`会出现所描述的问题（不确定它是否与引擎有关）。

*   芹菜版本是2.2

*   我尝试了不同的数据库。仍然是相同的行为，除非引擎发生变化。所以这就是我提到这个的原因。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T16:36:02.040

尝试添加`self.__class__.objects.select_for_update().get(pk=self.pk)`之前`save`，看看会发生什么。

它应该阻止对该行的所有读取，直到提交完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-28T00:32:23.857

这已经很晚了，但自从 django 1.9

```
transaction.on_commit(lambda: enqueue_atask())) 
```

# c - 如何将函数作为参数传递？

> ID：12404595
> 
> 赞同：2
> 
> 时间：2012-09-13T10:52:06.320
> 
> 标签：c, function-pointers

怎么可能给一个函数（B）一个函数（A）作为参数？

这样我就可以在函数 B 中使用函数 A。

就像以下示例中的变量 B 一样：

```
foo(int B) { ... } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T10:54:50.550

通过使用*函数指针*。例如，查看`qsort()`标准库函数。

例子：

```
#include <stdlib.h>

int op_add(int a, int b)
{
  return a + b;
}

int operate(int a, int b, int (*op)(int, int))
{
  return op(a, b);
}

int main(void)
{
  printf("12 + 4 is %d\n", operate(12, 4, op_add));

  return EXIT_SUCCESS;
} 
```

将打印`12 + 4 is 16`。

该操作作为指向函数的指针给出，该函数从函数内部`operate()`调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T10:56:01.730

假设您有一个要调用的函数：

```
void foo() { ... } 
```

您想从以下位置调用它`bar`：

```
void bar(void (*fun)())
{
    /* Call the function */
    fun();
} 
```

然后`bar`可以这样调用：

```
bar(foo); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T10:58:52.847

在另一个函数的参数列表中写函数指针类型看起来有点奇怪，尤其是指针比较复杂的时候，所以推荐使用typedef。

*例子*

```
#include <stdio.h>

typedef int func(int a, int b);

int add(int a, int b) { return a + b; }

int operate(int a, int b, func op)
{
    return op(a, b);
}

int main()
{
    printf("%d\n", operate(3, 4, add));
    return 0;
} 
```

# ruby-on-rails - 精炼厂cms引擎i18n路线错误

> ID：12404598
> 
> 赞同：0
> 
> 时间：2012-09-13T10:52:23.170
> 
> 标签：ruby-on-rails, ruby, refinerycms

需要有多种语言。

配置 i18n.rb：

```
Refinery::I18n.configure do |config|
  config.enabled = true
  config.default_locale = :en
  config.current_locale = :en
  config.default_frontend_locale = :en
  config.frontend_locales = [:en, :ru]
  config.locales = {:en=>"English", :ru=>"Russian"}
end 
```

在炼油厂生成引擎：

`rails generate refinery:engine product title:string description:text image:image --i18n title description`

`rails generate refinery:products`

我收到以下错误：`No route matches {:locale=>:en, :controller=>"refinery/products/products", :action=>"show", :id=>"1"}`当我尝试打开引擎的任何页面时

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:31:59.563

在我向我的 CMS 添加自定义引擎后，我遇到了同样的问题；我的应用程序布局文件中的“语言环境选择器”导致您描述的错误：

```
-# Haml:
%ul.locales
  - locales.each do |locale|
    %li= link_to Refinery::I18n.locales[locale], url_for(:locale => locale), :title => Refinery::I18n.locales[locale], :class => "flags-#{locale}" 
```

通过`url_for`改成`refinery.url_for`这个解决了问题：

```
-# Haml:
%ul.locales
  - locales.each do |locale|
    %li= link_to Refinery::I18n.locales[locale], refinery.url_for(:locale => locale), :title => Refinery::I18n.locales[locale], :class => "flags-#{locale}" 
```

无法解释发生了什么，但也许这会解决你的问题。

老实说，所有学分都应该归于[这个答案](https://stackoverflow.com/questions/12120050/refinerycms-cant-call-my-own-controller-route-actions):)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:29:51.010

你跑了吗：

```
rake db:migrate
rake db:seed 
```

你做了之后`rails generate refinery:products`？

# javascript - 突出显示/取消突出显示列中的一行

> ID：12404600
> 
> 赞同：0
> 
> 时间：2012-09-13T10:52:26.697
> 
> 标签：javascript, jquery, html, css, asp.net-mvc

我现在有一个非常基本的表：

![在此处输入图像描述](../Images/49de47c9ff5944e5540b2a13eff6d47f.png)

我需要能够只突出显示每一列中的一行，并取消选择之前选择的任何内容..

我知道我需要一个 CSS 类，例如

```
 .hightlighted {
 background: #f00;
 color: #fff;
 } 
```

视图中的 HTML 也很基本：

```
<tbody>
<tr>
<td> </td>
<td>Differdange</td>
<td> </td>
</tr>       
    <tr>
<td> </td>
<td>Dippach</td>
<td> </td>
    </tr>
<tr>
<td> </td>
<td>Dudelange</td>
<td> </td>
</tr>
<tr>
<td> </td>
<td>Echternach</td>
<td></td>
</tr>
<tr>
<td> </td>
<td>Erpelscheid</td>
<td> </td>
</tr>
<tr>
<td> </td>
<td>Esch-sur-Alzette</td>
<td> </td>
</tr>
<tr>
<td> </td>
<td>Esch-sur-Sûre</td>
<td> </td>
</tr>
    <tr>
<td> </td>
<td>Ettelbruck</td>
<td> </td>
</tr>
    <tr>
<td> </td>
<td>Feulen</td>
<td> </td>
</tr>
</tbody 
```

但是我不知道如果我需要在用户完成表格时从行中“抓取”选定的数据，是否适合在 CSS 中突出显示/取消突出显示行？

谁能建议我应该使用什么（JQuery、Javascript、CSS）来突出显示列中的一行，以便我以后可以获取数据？

**编辑**

现在我已经对突出显示进行了排序，我遇到的唯一问题是区分列，而不是这个（我得到 atm）

![在此处输入图像描述](../Images/50b94e6022024aad3a29957197607840.png)

我希望每列都能够突出显示它自己独特的行（例如，可以突出显示 Differdange，以及在 Localities 上突出显示 dddd）

任何方式编辑

```
$("tr").click(function() {
$("tr").removeClass("highlighted");
$(this).addClass("highlighted");
}); 
```

代码做到这一点？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T11:09:04.120

您可以使用`.removeClass()`和`.addClass()`jQuery 方法来实现这一点。这是一个小演示：[little link](http://jsfiddle.net/glee/PBQLu/)。该代码非常不言自明，但这里是 JavaScript 部分的注释版本：

```
var chosen = []; //an array to save the chosen row for each column
$("td").click(function() { //when a td is clicked
    var idx = $(this).index() + 1; //get column of current cell
    $("td:nth-child(" + idx + ")").removeClass("highlighted"); //unhighlight all cells in column
    $(this).addClass("highlighted"); //highlight this one
    chosen[idx] = $(this).parent("tr").index(); //and save it as chosen in its column
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T11:07:54.560

................................ ***[演示](http://jsfiddle.net/3YYyN/7/)***

嗨，现在您可以像这样执行此 jquery

**CSS**

```
 .hightlighted{
 background: #f00;
 color: #fff;
 } 
```

**jQuery**

```
$("tr").click(function(){

    $("tr").removeClass('hightlighted')
         $(this).addClass('hightlighted');

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T11:09:15.537

您能否更准确地说明何时以及如何进行选择？我猜您希望用户单击一行，然后突出显示。在这种情况下，您希望在 css 中创建一个突出显示类，将其添加到用户单击的行中，然后您可以获取行 cia 其类：

```
tr.highlighted td {
    background: #f0;
    color: #fff;
} 
```

在javascript中：

```
// catch click event
$('tr').click(function (e) {
    // remove prvious selection
    $('tr.highlighted').removeClass('highlighted');
    // make this row selected
    $(e.currentTarget).addClass('highlighted');
});

// get current selection
function getSelected () {
    return $('tr.highlighted');
} 
```

# silverlight - 是否可以在 Web 浏览器控件顶部呈现 Silverlight 元素（在 OOB 模式下）

> ID：12404604
> 
> 赞同：0
> 
> 时间：2012-09-13T10:52:41.510
> 
> 标签：silverlight, webbrowser-control, silverlight-oob

我希望能够使用其他 Silverlight 元素和各种过渡来隐藏和显示 Web 浏览器控件。

似乎任何 Web 浏览器控件总是最后呈现在页面上。有没有办法让其他元素在 Web 浏览器上呈现？

## 这是一个显示问题的最小 XAML 示例：

```
<UserControl
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    x:Class="BrowserSilverlightApplication.MainPage"
    Width="640" Height="480">
    <Grid x:Name="LayoutRoot" Background="White">
        <WebBrowser x:Name="webBrowser" Margin="16" Loaded="WebBrowser_Loaded"/>
        <Rectangle Fill="#447171DE" Margin="8" Stroke="Black" IsHitTestVisible="False" StrokeThickness="0">
            <Rectangle.Effect>
                <BlurEffect Radius="18"/>
            </Rectangle.Effect>
        </Rectangle>
    </Grid>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T08:21:48.450

随着 Silverlight 4.0 的发布，引入了 WebBrowser 控件。但是，它仅设计用于“Out Of Browser”应用程序。但是，随着 Silverlight 5 的发布，该控件也可以在“浏览器内”受信任的应用程序中使用。

自 Silverlight 中引入 WebBrowser 控件以来，许多开发人员一直在使用它在应用程序中显示 HTML 内容。但是，主要的限制是“空域”问题。

在应用程序窗口中，窗口中的每个像素仅属于一个 HWND，它构成了该 HWND 的空域。HWND 只能在属于它的那些像素上渲染。

在典型的 Silverlight OOB 应用程序中，只有一个 Silverlight-HWND。因此，Silverlight 应用程序中的整个像素都属于这个 HWND，并且构成了它的空域。

但是，在我们的场景中，当我们在 Silverlight OOB 应用程序中引入 WebBrowser 控件时，Airspace 由 WebBrowser 控件的 HWND 共享。这就是众所周知的空域问题。

WebBrowser 控件所在的像素将属于 WebBrowser-HWND。因此，Silverlight 将无法在属于其他 HWND 的像素上渲染任何内容。

这个问题是因为；Silverlight 中可用的 WebBrowser 控件是“System.Windows.Controls.WebBrowser”控件的包装。其他 Silverlight 控件不会为自己创建新窗口；相反，它将在单个 HWND 下创建。WebBrowser 控件不是真正的 Silverlight 控件，而是 Windows HTML 控件的包装器。这些本机控件将创建自己的 HWND。

因此，WebBrowser 控件始终与应用程序中的其他控件重叠。例如，当使用具有固定标题和滚动功能的页面时，或者当 WebBrowser 控件放置在菜单控件下时。可能还有其他情况。

通过使用“WebBrowserBrush”，我们可以克服这个问题。

WebBrowserBrush 是与 WebBrowser 控件一起引入的，它们旨在协同工作以显示丰富的 HTML 内容。

WebBrowserBrush 是一种使用 HTML 内容绘制区域的 Brush 对象。此 HTML 内容由 WebBrowser 控件提供。就像其他画笔类型一样，您可以使用 WebBrowserBrush 填充矩形、路径的几何内容等等。

那么，这把刷子将如何帮助我们解决这个问题呢？

要解决此问题，您可以隐藏 WebBrowser 并使用 WebBrowserBrush 使用 WebBrowser 中的 HTML 内容绘制区域。WebBrowserBrush 将在与其他控件相同的图层中绘制 HTML 内容，并允许其他控件显示在其上方。我们可以在需要时显示 WebBrowser 控件。我们唯一需要考虑的是找到一个合适的事件来处理这个逻辑。

在下面的示例应用程序中，我希望我的组合框列表在打开时呈现在 WebBrowser 上方。我使用 ComboBox_DropDownChanged 事件来处理逻辑。当列表打开时，我隐藏 WebBrowser 控件并使用 WebBrowserBrush 绘制该区域。然后，当列表关闭时，我将控件带回。

```
> <UserControl x:Class="SilverlightApplication1_WebBrowser.MainPage"    
> xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"    
> xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"    
> xmlns:d="http://schemas.microsoft.com/expression/blend/2008"    
> xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006">
> <Grid x:Name="LayoutRoot" Background="White"
> HorizontalAlignment="Stretch" VerticalAlignment="Stretch">        
> <Canvas HorizontalAlignment="Stretch" VerticalAlignment="Stretch">    
> <Grid HorizontalAlignment="Stretch"  VerticalAlignment="Stretch">     
> <Grid.RowDefinitions>                     <RowDefinition Height="50"
> />                     <RowDefinition Height="50" />                  
> <RowDefinition Height="Auto" />                 </Grid.RowDefinitions>
> <Grid.ColumnDefinitions>                     <ColumnDefinition
> Width="*"/>                     <ColumnDefinition Width="50"/>        
> </Grid.ColumnDefinitions>                                  <ComboBox
> Canvas.ZIndex="10" Grid.Row="0" x:Name="cbTestList"                   
> DropDownOpened="cbTestList_DropDownOpened"
> DropDownClosed="cbTestList_DropDownClosed" >                    
> <ComboBox.Items>                         <ComboBoxItem Content="--
> Select --" IsSelected="True"/>                         <ComboBoxItem
> Content="Text1"/>                         <ComboBoxItem
> Content="Text2"/>                         <ComboBoxItem
> Content="Text3"/>                         <ComboBoxItem
> Content="Text4"/>                         <ComboBoxItem
> Content="Text5"/>                         <ComboBoxItem
> Content="Text6"/>                         <ComboBoxItem
> Content="Text7"/>                         <ComboBoxItem
> Content="Text8"/>                         <ComboBoxItem
> Content="Text9"/>                         <ComboBoxItem
> Content="Text10"/>                         <ComboBoxItem
> Content="Text11"/>                         <ComboBoxItem
> Content="Text12"/>                         <ComboBoxItem
> Content="Text13"/>                         <ComboBoxItem
> Content="Text14"/>                         <ComboBoxItem
> Content="Text15"/>                     </ComboBox.Items>              
> </ComboBox>                                                           
> <WebBrowser x:Name="wb" Height="500" Width="800" Grid.Column="0"
> Grid.ColumnSpan="2" Grid.Row="2"                             
> Canvas.ZIndex="0" HorizontalAlignment="Stretch"                       
> VerticalAlignment="Stretch" />                                 
> <TextBox x:Name="txtUrl" Margin="10" Grid.Row="1" Grid.Column="0"     
> Canvas.ZIndex="10"/>                   <Button Grid.Column="1"
> Grid.Row="1" Margin="10" Canvas.ZIndex="10" Content="Go"              
> Name="btnLoadContent" Click="btnLoadContent_Click" />                 
> <Rectangle Grid.Column="0" Height="500" Width="800"
> Grid.ColumnSpan="2" Grid.Row="2"                             
> HorizontalAlignment="Stretch"                             
> VerticalAlignment="Stretch">                     <Rectangle.Fill>     
> <WebBrowserBrush SourceName="wb" x:Name="WBB1"/>                    
> </Rectangle.Fill>                 </Rectangle>             </Grid>    
> </Canvas>     </Grid> </UserControl> 
```

尽管我们能够使用 WebBrowserBrush 和 WebBrowser 控件来克服这个问题，但我们仍然需要考虑一些限制。

1.用户无法与WebBrowserBrush交互。

2.WebBrowser 控件中的更改不会自动反映，除非重新绘制。

这是一个简单的解决问题的方法，如果设计得当，考虑到我们的限制，它会起作用。

# django - Django 模型和数据库同步

> ID：12404606
> 
> 赞同：0
> 
> 时间：2012-09-13T10:52:47.927
> 
> 标签：django

我有一个理论问题，如何在添加或删除属性时将模型更改与数据库同步？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T10:54:36.810

你是说数据迁移？

你需要[南方](http://south.aeracode.org/)

> 用于 Django 项目的南方智能模式和数据迁移。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:59:45.003

实际上，有[很多方法可以迁移数据库模式](http://blog.yourlabs.org/post/20833599582/django-schema-migrations-nashvegas-vs-south-vs)。

恕我直言，纳什维加斯是一个不错的选择。

# php - PHP日期不返回任何东西

> ID：12404613
> 
> 赞同：-1
> 
> 时间：2012-09-13T10:53:02.380
> 
> 标签：php

我有一个变量，我正在尝试为它分配一个格式化的日期......就像 now() 但格式化了，所以我正在尝试这个：

```
$mydate = date("F j, Y, g:i a"); 
```

我的问题是 $mydate 似乎是空的。我需要它来返回 Now() 日期时间。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:55:55.587

对我来说似乎工作得很好？

```
<?php 
    $mydate = date("F j, Y, g:i a");
    echo $mydate;
?> 
```

输出：

> 2012 年 9 月 13 日晚上 9:55

你如何测试它是否为空？如果您不将时间戳作为第二个参数提供给它，它将采用默认值`now()`并将其提供给它 - 但您知道这已经毫无疑问了:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T10:57:07.827

工作正常:-D

```
 <?php
      $mydate = date("F j, Y, g:i a");
      echo $mydate;
  ?> 
```

输出：

> > 2012 年 9 月 13 日上午 10:55

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-13T10:55:04.240

试试这个不带逗号

```
$mydate = date("F j Y, g:i a"); 
```

如果我打印这个变量，我有这个：

> 2012 年 9 月 13 日下午 12:57

你想要什么？

# java - 剖析 Java EE 应用程序 - 寻找什么以及进行哪些更改？

> ID：12404617
> 
> 赞同：2
> 
> 时间：2012-09-13T10:53:12.407
> 
> 标签：java, refactoring, profiling, yourkit

我对分析应用程序以提高性能有点陌生。我已选择 YourKit 作为我的分析器。毫无疑问，YourKit 提供了非常有趣的统计数据。我遇到困难的地方是如何处理这些统计数据。

例如，考虑一个对 JAXB POJO 进行操作的方法。该方法遍历 POJO 以访问深深嵌套在 XML 中的标记/元素。这需要 4 层 for 循环才能到达元素/标签，如下所示：

```
 List<Bundle> bundles = null;
   List<Item> items = null;
   for(Info info : data) { 
      bundles = info.getBundles();
      for(Bundle bundle : bundles) {
         items = bundle.getItems();
         //.. more loops like this till we get to the required element
       }          
    } 
```

YourKit 告诉我，上面的代码是一个“热点”，每次调用包含此代码的方法都会收集 80 个对象的垃圾。上面的代码只是一个例子，并不是我卡住的唯一部分。大多数时候，我不知道如何处理分析器提供的信息。我可以做些什么来减少上述代码中临时对象的数量？是否有任何明确的原则可以提高应用程序的性能？分析应用程序时要查找哪些统计信息以及每种统计信息有什么含义？

编辑：分析应用程序的主要目标是增加吞吐量和响应时间。当前吞吐量仅为所需吞吐量的 10%！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:18:10.773

专注于与您的绩效目标相关的统计数据。您对最小响应时间感兴趣，因此请查看每个方法对响应时间的贡献程度，并关注那些贡献很大的方法（对于单线程处理，这只是方法调用期间经过的时间，对该方法的所有调用求和）。我不确定 YourKit 将什么定义为热点（查看文档），但它可能是累积经过时间最长的方法，所以热点是一件好事。相反，对象分配对响应时间没有直接影响，并且在您的情况下是无关紧要的（除非您已经确定垃圾收集器贡献了很大比例的 cpu 时间，而它通常不会）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T15:20:47.583

我完全同意给出的答案。

我想补充一点，考虑到您的具体示例，您实际上可以通过使用[xpath api](http://www.ibm.com/developerworks/library/x-javaxpathapi/index.html)访问 XML 中的特定位置来进行改进。

In situations where you don't need to actually iterate the entire DOM, this should be your first choice since it is declarative and hence more expressive and less error prone.

It would often give you superior performance as well (For very complex queries it may not be the case, but you seem to have a simple scenario).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T11:20:15.330

改进循环的一种方法是更改​​您的架构并从本质上展平模型，当然这取决于您是否可以更改架构。这样生成的 Java 将不需要 4 层循环。当然，在一天结束时，您需要问自己代码真的有问题吗 - 80 个对象正在被 GC 处理，所以？您的应用程序运行缓慢吗？您是否遇到内存问题？记住过早的优化是万恶之源！

分析和优化是一头复杂的野兽，取决于可能的事情（Java 版本、32 位和 64 位操作系统等）。此外，优化可能并不总是需要更改代码，例如，您可以通过更改 JVM 上的 GC 策略来解决问题 - 例如，在您的代码创建许多需要 GC 的小对象的情况下，有更有效的 GC 策略频繁地。如果您有详细信息，可能会更容易为您提供帮助，但是您的问题似乎太宽泛了。事实上，有很多关于主题的书籍可能值得一读。

# python - Python为MAC地址获取正常的十六进制格式

> ID：12404622
> 
> 赞同：2
> 
> 时间：2012-09-13T10:53:18.613
> 
> 标签：python, macos, format, hex, mac-address

我想要从 get_node() 获得的 MAC 地址的正常格式。

我得到的格式是 0x0L0xdL0x60L0x76L0x31L0xd6L，我希望删除 0x 并将 L 项转换为真正的十六进制数。它应该是 00-0D-60-76-31-D6 。

我怎么能意识到这一点？

```
def getNetworkData (self):
    myHostname, myIP, myMAC =  AU.getHostname()

    touple1 = (myMAC & 0xFF0000000000) >> 40
    touple2 = (myMAC & 0x00FF00000000) >> 32
    touple3 = (myMAC & 0x0000FF000000) >> 24
    touple4 = (myMAC & 0x000000FF0000) >> 16
    touple5 = (myMAC & 0x00000000FF00) >> 8
    touple6 = (myMAC & 0x0000000000FF) >> 0

    readableMACadress = hex(touple1) + hex(touple2) + hex(touple3) + hex(touple4) + hex(touple5) + hex(touple6) 

    print readableMACadress

    return myHostname, myIP, readableMACadress 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T11:03:48.663

采用

```
readableMACaddress = '%02X-%02X-%02X-%02X-%02X-%02X' % (touple1, touple2, touple3, touple4, touple5, touple6) 
```

更简洁地说，您可以通过使用消除临时`touple`变量

```
readableMACaddress = '-'.join('%02X' % ((myMAC >> 8*i) & 0xff) for i in reversed(xrange(6))) 
```

# .net - 在 Infragistics XamDataCards 中单击鼠标右键选择一张卡片

> ID：12404623
> 
> 赞同：1
> 
> 时间：2012-09-13T10:53:19.277
> 
> 标签：.net, wpf, infragistics

如何在 Infragistics XamDataCards WPF 控件中单击鼠标右键选择卡片？XamDataCards.ActiveDataItem 属性也应该改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:54:23.593

我已经有了解决方案：

```
/// <summary>
/// selects XamDataCards'es card on right button mouse down even
/// </summary>
public class XamDataCardsSelectCardOnRightMouseClickBehavior : Behavior<XamDataCards>
{
    protected override void OnAttached()
    {
        AssociatedObject.PreviewMouseRightButtonDown += AssociatedObjectPreviewMouseRightButtonDown;
    }

    /// <summary>
    /// select a card on right-click so that a context menu can be displayed
    /// </summary>
    /// <param name="sender">not used</param>
    /// <param name="e">contians mouse position</param>
    private void AssociatedObjectPreviewMouseRightButtonDown(object sender, System.Windows.Input.MouseButtonEventArgs e)
    {
        VisualTreeHelper.HitTest(this.AssociatedObject, t => HitTestFilterBehavior.Continue, HitTestResultFunc, new PointHitTestParameters(e.GetPosition((UIElement)sender)));
    }

    /// <summary>
    /// WPF invokes this method to report hit test intersections to the user.
    /// If a card was hit, it is set as active (or selected) card.
    /// </summary>
    /// <param name="result">Contains the visual object that was hit.</param>
    /// <returns>Always returns Continue.</returns>
    public HitTestResultBehavior HitTestResultFunc(HitTestResult result)
    {
        DependencyObject dobj = result.VisualHit;
        if (VisualTreeHelper.GetParent(dobj).GetType() == typeof(Infragistics.Windows.DataPresenter.DataRecordPresenter))
        {
            DataRecordPresenter rp = (DataRecordPresenter) VisualTreeHelper.GetParent(dobj);
            this.AssociatedObject.ActiveDataItem = rp.DataRecord.DataItem;
        }
        return HitTestResultBehavior.Continue;
    }
} 
```

然后只需将其附加到您的 XamDataCards 控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:28:36.110

如果右键单击卡的标题，此解决方案还将激活卡：

```
class XamDataCardsActivateOnRightMouseClickBehavior : Behavior<XamDataCards>
{
    protected override void OnAttached()
    {
        AssociatedObject.PreviewMouseRightButtonDown += AssociatedObjectPreviewMouseRightButtonDown;
    }

    private void AssociatedObjectPreviewMouseRightButtonDown(object sender, System.Windows.Input.MouseButtonEventArgs e)
    {
        CardViewCard card = Infragistics.Windows.Utilities.GetAncestorFromType(e.OriginalSource as DependencyObject, typeof(CardViewCard), false) as CardViewCard;
        if (card != null)
        {
            DataRecord record = card.DataContext as DataRecord;
            if (record != null)
            {
                record.DataPresenter.ActiveRecord = record;
            }
        }
    }
} 
```

# windows-phone-7 - 没有在 url 处侦听可以接受消息的端点

> ID：12404628
> 
> 赞同：0
> 
> 时间：2012-09-13T10:53:37.823
> 
> 标签：windows-phone-7

当我尝试运行与 Linq to sql 数据库一起使用并存储在独立存储中的 wp7 应用程序时，它会引发错误：

```
There was no endpoint listening at 
http://192.168.0.110:2502/ApplicationSessionService/ApplicationSessionService.svc 
that could accept the message.      
This is often caused by an incorrect address or SOAP action. 
See InnerException, if present, for more details. 
```

我没有在 IIS 上运行它。我试图在 Google 上找到解决方案，但没有提供解决方案。

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:41:35.157

检查您的项目中是否有 [服务参考](http://msdn.microsoft.com/en-us/library/bb628652)。

此错误与独立存储等无关。

# wpf - 在 WPF 中重新定义 ContentControl.Content

> ID：12404629
> 
> 赞同：0
> 
> 时间：2012-09-13T10:53:41.570
> 
> 标签：wpf, xaml

我正在尝试在 WPF 中创建一个对话框类。此类继承`Window`并提供一些默认按钮和设置。

实现基本上是这样的：

```
namespace Commons {
  public class Dialog : Window {
    public new UIElement Content {
      get { return this.m_mainContent.Child; }
      set { this.m_mainContent.Child = value; }
    }

    // The dialog's content goes into this element.
    private readonly Decorator m_mainContent = new Decorator();
    // Some other controls beside "m_mainContent".
    private readonly StackPanel m_buttonPanel = new StackPanel();

    public Dialog() {
      DockPanel content = new DockPanel();

      DockPanel.SetDock(this.m_buttonPanel, Dock.Bottom);
      content.Children.Add(this.m_buttonPanel);

      content.Children.Add(this.m_mainContent);

      base.Content = content;
    }

    public void AddButton(Button button) {
      ...
    }
  }
} 
```

如您所见，我重新定义了`Content`属性。

现在我希望能够像这样在 XAML 中使用这个对话框类：

```
<my:Dialog x:Class="MyDialogTest.TestDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:my="clr-namespace:Commons;assembly=Commons"
        Title="Outline" Height="800" Width="800">
  <!-- Dialog contents here -->
</my:Dialog> 
```

但是，这将`Window.Content`在设置对话框的内容时使用，而不是`Dialog.Content`. 我该如何进行这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:14:35.930

您可能需要将“您的”类中的属性指示为“内容属性”，以便将对话框的 XAML“内容”描述的子元素放入其中，而不是放入基本窗口的“内容”属性中.

```
[ContentProperty("Content")]
public class Dialog : Window { 
```

如果这不起作用，请尝试更改名称.....所以试试这个：

```
[ContentProperty("DialogContent")]
public class Dialog : Window {

public new UIElement DialogContent {
      get { return this.m_mainContent.Child; }
      set { this.m_mainContent.Child = value; }
    } 
```

# html - 将下拉列表中的值居中

> ID：12404633
> 
> 赞同：1
> 
> 时间：2012-09-13T10:53:51.600
> 
> 标签：html

我在 html 中有以下用于下拉列表的代码，并且我试图将下拉列表包含的值居中。我想必须使用“中心”或 align="center" 但是无论我把它们放在哪里，它都不会居中。谁能指出标签的去向？

```
<form id="form1" name="form1" method="post" align="center" action="section_search_results.php">
      <p>Select The <b>Section</b> You Wish To Search Below...      </p>
      <p><center>
        <label for="section"></label>
        <label for="section2"></label>
        <select name="section" id="section2">
<option value="Functional">Functional</option>
<option value="Technical">Technical</option>
<option value="Commercial">Commercial</option>
<option value="Implementation">Implementation</option>
<option value="Innovation">Innovation</option></center>
        </select> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:57:27.727

> 我想必须使用“中心”或 align="center"

没有。CSS 2 于 1998 年发布，并且已经过时。（从技术上讲，CSS 1 已经淘汰了它们，但 CSS 2 是在浏览器支持变得不错的时候出现的）。

将 text-align 属性应用于选项元素。

```
option { 
    text-align: center;
} 
```

请注意，由于不同浏览器实现选择元素渲染的方式，这并不享有通用浏览器的普遍支持量。

如果您需要，W3C会[提供 CSS 教程。](http://www.w3.org/wiki/Web_Standards_Curriculum#CSS)

# mysql - mysql从2个数据库同步两个表

> ID：12404634
> 
> 赞同：6
> 
> 时间：2012-09-13T10:53:52.167
> 
> 标签：mysql

我有一个疑问。我在两个不同的服务器上有两个表。这两个表具有相同的结构。一台服务器上的主表每天都会更新，所以我想要一个 cron 作业或 php 脚本 cron 来更新另一台服务器上的第二个从表。我看过很多脚本，但没有一个能解决我的要求。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T11:34:15.983

我不敢相信您没有找到合适的脚本来执行此操作。根据服务器到服务器的带宽和连接性以及表数据大小，您可以：

*   直接转移整个表：

    ```
    mysqldump [options] sourcedatabase tablename \
      | mysql [options] --host remoteserver --user username ... 
    ```

*   使用 MySQL 压缩传输表

    ```
    # same as above, mysql has the "-C" flag 
    ```

*   使用 SSH 加密和压缩传输；mysql是远程执行的

    ```
    mysqldump [options] sourcedatabase tablename \
      | ssh -C user@remoteserver 'mysql [options]' 
    ```

*   使用中间 SQL 文件和 rsync 传输以仅传输修改

    ```
    mysqldump [options] sourcedb tbl > dump.sql
    rsync [-z] dump.sql user@remoteserver:/path/to/remote/dump.sql
    ssh user@remoteserver "mysql [options] < /path/to/remote/dump.sql" 
    ```

以上都是简单的表覆盖，远程数据丢失并被主副本替换。mysqldump-plus-rsync-plus-ssh 的运行时间与修改大致成正比，这意味着如果您有一个 10 GB 的 SQL 转储并添加十几个 INSERTS，则传输阶段最多需要几秒钟来同步两个 SQL 文件。

为了优化插入阶段，要么进行完整的 MySQL 复制，要么需要一种方法来识别表上的操作，以便在同步时手动复制它们。这可能需要更改表结构，例如添加“last-synced-on”和“needs-deleting”列，甚至引入辅助表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T11:35:26.830

您可以使用一种简单的解决方案 - [dbForge Studio for MySQL](http://www.devart.com/dbforge/mysql/studio/)中的[数据同步工具](http://www.devart.com/dbforge/mysql/studio/database-synchronization.html)。

1.  创建将比较和同步两个不同 MySQL 服务器上的两个表的数据比较项目。
2.  使用创建的数据比较项目文档（*.dcomp 文件）在命令行模式下运行应用程序。

# junit4 - @BeforeClass 和 Spring @TestExecutionListener beforeTestClass() 有什么区别

> ID：12404636
> 
> 赞同：9
> 
> 时间：2012-09-13T10:53:56.390
> 
> 标签：junit4, spring-test

使用 JUnit @BeforeClass 和 Spring @TestExecutionListener beforeTestClass(TestContext testContext) “hook”有什么区别？如果有区别，在什么情况下使用哪一个？

Maven 依赖项：
spring-core:3.0.6.RELEASE
spring-context:3.0.6.RELEASE
spring-test:3.0.6.RELEASE
spring-data-commons-core:1.2.0.M1
spring-data-mongodb:1.0 .0.M4
mongo-java-driver:2.7.3
junit:4.9
cglib:2.2

## 使用 JUnit @BeforeClass 注解：

```
import org.junit.BeforeClass;
import org.junit.Test;
import org.junit.Assert;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.AbstractJUnit4SpringContextTests;

@ContextConfiguration(locations = { "classpath:test-config.xml" })
public class TestNothing extends AbstractJUnit4SpringContextTests {

    @Autowired
    PersonRepository repo;

    @BeforeClass
    public static void runBefore() {
        System.out.println("@BeforeClass: set up.");
    }

    @Test
    public void testInit() {
        Assert.assertTrue(repo.findAll().size() == 0 );
    }
}

=> @BeforeClass: set up.
=> Process finished with exit code 0 
```

## 使用弹簧钩：

(1) 覆盖 beforeTestClass(TextContext testContext):

```
import org.springframework.test.context.TestContext;
import org.springframework.test.context.support.AbstractTestExecutionListener;

public class BeforeClassHook extends AbstractTestExecutionListener {

    public BeforeClassHook() { }

    @Override
    public void beforeTestClass(TestContext testContext) {
        System.out.println("BeforeClassHook.beforeTestClass(): set up.");
    }
} 
```

(2) 使用@TestExecutionListeners 注解：

```
import org.springframework.test.context.TestExecutionListeners;  
// other imports are the same    

@ContextConfiguration(locations = { "classpath:test-config.xml" })
@TestExecutionListeners(BeforeClassHook.class)
public class TestNothing extends AbstractJUnit4SpringContextTests {

    @Autowired
    PersonRepository repo;

    @Test
    public void testInit() {
        Assert.assertTrue(repo.findAll().size() == 0 );
    }
}

=> BeforeClassHook.beforeTestClass(): set up.
=> Process finished with exit code 0 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-04T16:44:31.893

`TestExecutionListeners` are a way to externalize reusable code that *instruments* your tests.

As such, if you implement a `TestExecutionListener` you can reuse it across test class hierarchies and potentially across projects, depending on your needs.

On the flip side, a `@BeforeClass` method can naturally only be used within a single test class hierarchy.

Note, however, that JUnit also supports [Rules](https://github.com/junit-team/junit/wiki/Rules): if you implement `org.junit.rules.TestRule` you can declare it as a `@ClassRule` to achieve the same thing... with the added benefit that a JUnit Rule can be reused just like a Spring `TestExecutionListener`.

So it really depends on your use case. If you only need to use the "before class" functionality in a single test class or a single test class hierarchy, then you'd be better off going the simple route of just implementing a `@BeforeClass` method. However, if you foresee that you will need the "before class" functionality in different test class hierarchies or across projects, you should consider implementing a custom `TestExecutionListener` or JUnit Rule.

The benefit of a Spring `TestExecutionListener` over a JUnit Rule is that a `TestExecutionListener` has access to the `TestContext` and therefore access to the Spring `ApplicationContext` which a JUnit Rule would not have access to. Furthermore, a `TestExecutionListener` can be [automatically discovered](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/testing.html#testcontext-tel-config-automatic-discovery) and [ordered](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/testing.html#testcontext-tel-config-ordering).

*Related Resources*:

*   [SPR-8854](https://jira.spring.io/browse/SPR-8854)

Regards,

Sam (author of the Spring TestContext Framework)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-16T23:35:39.763

@BeforeClass 的第一个解决方案没有加载应用程序上下文。我确实扩展了 AbstractJUnit4SpringContextTests 并定义了 @ContextConfiguration。我认为listner 是在@beforeclass 方法之前加载上下文的唯一方法。甚至更好地扩展 SpringJUnit4ClassRunner 类，如此处[所述](http://java.dzone.com/articles/enhancing-spring-test)

# c++ - 使用 MinGW 和 GCC 4.7.0 的 boost 1.49/1.50/1.51 ASIO 中的转换错误

> ID：12404637
> 
> 赞同：-1
> 
> 时间：2012-09-13T10:53:56.817
> 
> 标签：c++, boost, boost-asio, mingw32, gcc4.7

当简单地包含头文件时，我从 boost::asio 中得到一些奇怪的错误`asio.hpp`，然后包含其他头文件，直到`win_static_mutex.ipp`它在其中生成转换错误。

我将 MinGW 与带有 -std=gnu++11 编译器标志的 GCC 4.7 一起使用（请参阅[此处](https://svn.boost.org/trac/boost/ticket/5791)为什么是 gnu++11 而不是 c++11）。该错误发生在 boost 1.49、1.50 和 1.51（当前）中。

完整的**错误**如下：

```
In file included from boost1.49/boost/asio/detail/win_static_mutex.hpp:71:0,
                 from boost1.49/boost/asio/detail/static_mutex.hpp:23,
                 from boost1.49/boost/asio/detail/impl/signal_set_service.ipp:24,
                 from boost1.49/boost/asio/detail/signal_set_service.hpp:210,
                 from boost/asio/signal_set_service.hpp:19,
                 from boost/asio/basic_signal_set.hpp:24,
                 from boost/asio.hpp:26,
                 from MyCode\Client.cpp:3:
boost1.49/boost/asio/detail/impl/win_static_mutex.ipp: In member function 'int boost::asio::detail::win_static_mutex::do_init()':
boost1.49/boost/asio/detail/impl/win_static_mutex.ipp:51:63: error: invalid conversion from 'const wchar_t*' to 'size_t {aka unsigned int}' [-fpermissive]
boost1.49/boost/asio/detail/impl/win_static_mutex.ipp:51:63: error: invalid conversion from 'unsigned int' to 'const wchar_t*' [-fpermissive]
boost1.49/boost/asio/detail/impl/win_static_mutex.ipp:53:10: warning: declaration of 'mutex' shadows a global declaration [-Wshadow] 
```

**正如我在开头所说的，我在代码**中唯一要做的就是包含`asio.hpp`标题：

```
#include <boost/asio.hpp> 
```

**boost** 文件中的第43-53行`win_static_mutex.ipp`是（我已经标记了第51行）：

```
 using namespace std; // For sprintf.
  wchar_t mutex_name[128];
#if BOOST_WORKAROUND(BOOST_MSVC, >= 1400) && !defined(UNDER_CE)
  swprintf_s(mutex_name, 128,
#else // BOOST_WORKAROUND(BOOST_MSVC, >= 1400) && !defined(UNDER_CE)
  swprintf(mutex_name,
#endif // BOOST_WORKAROUND(BOOST_MSVC, >= 1400) && !defined(UNDER_CE)
      L"asio-58CCDC44-6264-4842-90C2-F3C545CB8AA7-%u-%p",
      static_cast<unsigned int>(::GetCurrentProcessId()), this); // line 51

  HANDLE mutex = ::CreateMutexW(0, TRUE, mutex_name); 
```

现在是否有一些我必须定义的定义或任何其他编译器标志，或者是否需要直接在 boost 中更改某些内容，或者是否需要更改 MinGW 的某些内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:54:20.457

一个丑陋的“解决方案”是设置编译器标志`-fpermissive`。目前我只看到这个“解决方案”，需要等到 boost 再次赶上 GCC 4.7.0 ......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:00:59.540

这似乎是Boost中的一个错误。您可以尝试将 Boost 更新到更高版本（1.51 可用）并希望它在那里得到修复，否则您应该将其报告为错误。

# edi - vda 格式规范

> ID：12404642
> 
> 赞同：0
> 
> 时间：2012-09-13T10:54:08.890
> 
> 标签：edi

我是学生，我必须制作包括 EDI 转换器（当然是我的）的项目。老实说，我必须使用 ODETTE 格式和 VDA。有人知道我在哪里可以找到这种格式的任何规范吗？

任何帮助都会很棒！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T17:56:45.967

ODETTE 是 edifact。请参阅[http://www.unece.org/trade/untdid/welcome.html](http://www.unece.org/trade/untdid/welcome.html) 所有联合国 edifact 消息都在那里。他们有版本（如 D 96A 等）；所以你必须注意你使用的消息的版本。

VDA 用于德国汽车。这是他们的网站：[http://www.vda.de/de/index.html](http://www.vda.de/de/index.html) 看看例如[http://www.vda.de/de/publikationen/publikationen_downloads/index.html?aid=1](http://www.vda.de/de/publikationen/publikationen_downloads/index.html?aid=1) 他们有超过一种格式：edifact、csv、固定长度记录。

是的，您可以构建自己的翻译器。看看 Bots 开源 edi 翻译器 (http://bots.sourceforge.net)，你可能会有一些想法;-))

# jsf-2 - 使用 Primefaces 扩展的 Dynaform 遇到问题 - jSF

> ID：12404643
> 
> 赞同：2
> 
> 时间：2012-09-13T10:54:14.323
> 
> 标签：jsf-2, primefaces, primefaces-extensions

[集成primefaces-extensions dynaform](http://fractalsoft.net/primeext-showcase-mojarra/sections/dynaform/basicUsage.jsf)时出现以下错误

```
java.lang.NullPointerException
        at org.primefaces.extensions.component.dynaform.DynaFormRenderer.preRenderLabel(DynaFormRenderer.java:280)
 at org.primefaces.extensions.component.dynaform.DynaFormRenderer.encodeMarkup(DynaFormRenderer.java:99)
        at org.primefaces.extensions.component.dynaform.DynaFormRenderer.encodeEnd(DynaFormRenderer.java:78)
        at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:878) 
```

我的类路径中包含以下库，如此[处所述](http://code.google.com/p/primefaces-extensions/wiki/GettingStarted)

> primefaces-3.3.1.jar
> 
> primefaces-extensions-0.5.1.jar
> 
> commons-lang.jar

Xhtml 看起来像

```
<ui:composition template="WEB-INF/templates/base.xhtml"
 xmlns="http://www.w3.org/1999/xhtml"
 xmlns:f="http://java.sun.com/jsf/core"
 xmlns:h="http://java.sun.com/jsf/html"
 xmlns:ui="http://java.sun.com/jsf/facelets"
 xmlns:p="http://primefaces.org/ui"
 xmlns:pe="http://primefaces.org/ui/extensions">

 <ui:define name="content">
  <pe:dynaForm id="dynaForm" >
  </pe:dynaForm>
 </ui:define>
</ui:composition> 
```

**更新**：

更新一些代码后出现以下错误：

```
javax.servlet.ServletException: Cannot find component with identifier "_mainForm_dynaFormGroup" referenced from "j_idt7:dynaForm:j_idt14". 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T13:00:45.913

> 更新一些代码后出现以下错误：
> 
> ```
> javax.servlet.ServletException: Cannot find component with identifier "_mainForm_dynaFormGroup" referenced from "j_idt7:dynaForm:j_idt14". 
> ```
> 
> 我错过了什么？

正如消息所述，您正在引用具有 id 的元素`_mainForm_dynaFormGroup`。找不到此元素。此问题的常见原因是该元素位于表单或其他容器中，该容器以容器的 id 作为元素 id 的前缀。

例如有这个 JSF：

```
<h:form id="form">
    <div id="div" ...
</h:form> 
```

将生成此 HTML：

```
<form id="form">
    <div id="form:div" ...
</form> 
```

当引用另一个容器中的元素时，您需要使用 a`:`作为前缀从根开始引用。

```
<h:form id="buttonForm">
    <p:button id="button" ...
</h:form>
<h:form>
    <p:button update=":buttonForm:button" ...
</h:form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T22:05:17.077

您必须将以下内容添加到您的 web.xml 中才能使用`_`而不是默认`:`的小部件匹配：

```
 <context-param>
      <param-name>javax.faces.SEPARATOR_CHAR</param-name>
      <param-value>_</param-value>
  </context-param> 
```

您还必须确保您正在查找的小部件位于给定的表单名称中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T06:19:36.593

这是一个直截了当的答案，初学者可能会觉得很容易。根据您的例外情况`"javax.servlet.ServletException: Cannot find component with identifier "_mainForm_dynaFormGroup" referenced from "j_idt7:dynaForm:j_idt14""` ，您是`_mainForm_dynaFormGroup`从 dynaForm 引用的，而不是`dynaFormGroup`因为您`dynaform`不在任何容器内。

这里还有一个例子`Cannot find component with identifier "_mainForm_dynaFormGroup" referenced from "A4759:projectTab:dynaForm:j_idt581".`这里我指`_mainForm_dynaFormGroup`的是`_projectTab_dynaForm`insted of `_mainForm_dynaForm`it has to be `_projectTab_dynaFormGroup`。@siebz0r 上面已经很好地解释了这背后的原因。

# asp.net-mvc-3 - 您是否应该加入实体并将它们合并为 POCO？

> ID：12404645
> 
> 赞同：1
> 
> 时间：2012-09-13T10:54:17.813
> 
> 标签：asp.net-mvc-3

有时我必须显示两个实体之间的关系。问题是，您是否应该在一个查询中检索所有数据（使用连接语句）？

例如，我有实体*User*和*Picture*。图片由一个用户创建。如果我想显示图片名称列表，以及谁上传了某张图片。

**两种方法：**

1）使用实体框架关系，其中图片是一个实体，它有一个用户属性（创建它的用户）。用户也是一个实体。

```
foreach(var picture : context.Pictures.all){
  picture.name
  picture.user.name
} 
```

* * *

2）将图片和用户组合成一个POCO对象并将其返回给控制器。控制器：

```
foreach(var pictureUser : dal.GetPictureUsers){
  pictureUser.PictureName
  pictureUser.UserName
}

GetPictureUsers()
{
  PictureUser pictureUserPoc = new PictureUsersql.Include("Picture").include("User").Select(sa=> new PictureUser {
                                                                              PictureName = sa.PictureName, 
                                                                              UserName = sa.UserName});
} 
```

建议使用后者以提高性能。就我个人而言，我会以前一种方式编写它，因为您没有在数据访问层的视图逻辑（打印图片和用户关系）中结合您想要的内容。

我希望我已经清楚地说明了这个问题。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T13:06:24.883

```
@foreach (var profile in Model)
{
  @Html.DisplayFor(model=>profile.PictureName);
  @Html.DisplayFor(model=>profile.User.Name);
} 
```

模型代表图片；如果您强烈键入视图，则可以使用它。

# asp.net - 将网格传递给用于导出到 excel 的函数

> ID：12404648
> 
> 赞同：1
> 
> 时间：2012-09-13T10:54:35.000
> 
> 标签：asp.net, grid

我有一个用于将数据导出到excel的方法。直到现在我一直在将表格传递给该方法。但是现在我希望传递网格数据，这样我就不必为不同的实例调用程序来获得不同的结果过滤的数据集。有办法吗？

```
 public void ExportToExcel(DataSet ds)
    {
        if (ds.Tables[0].Rows.Count > 0)
        {

            string filename = ds.Tables[1].Rows[0]["filename"].ToString() + ".xls";
            System.IO.StringWriter tw = new System.IO.StringWriter();
            System.Web.UI.HtmlTextWriter hw = new System.Web.UI.HtmlTextWriter(tw);
            DataGrid dgGrid = new DataGrid();
            dgGrid.DataSource = ds.Tables[0];
            dgGrid.DataBind();
            //Get the HTML for the control.
            dgGrid.RenderControl(hw);
            //Write the HTML back to the browser.
            //Response.ContentType = application/vnd.ms-excel;
            Response.Clear();
            Response.ClearHeaders();
            Response.Charset = "";
            Response.AddHeader("content-disposition", String.Concat("attachment;filename=", filename));
            Response.AddHeader("Cache-Control", "max-age=0");
            Response.ContentType = "application/vnd.xls";
            // this.EnableViewState = false;
            Response.Write(tw.ToString());
            Response.End();
        }
    } 
```

这是我用来导出到 excel 的方法。

# java - 断言对象是特定类型

> ID：12404650
> 
> 赞同：226
> 
> 时间：2012-09-13T10:54:37.143
> 
> 标签：java, unit-testing, junit

在 JUnit 中是否可以断言一个对象是一个类的实例？由于各种原因，我在测试中有一个要检查其类型的对象。它是 Object1 的类型还是 Object2 的类型？

目前我有：

```
assertTrue(myObject instanceof Object1);
assertTrue(myObject instanceof Object2); 
```

这行得通，但我想知道是否有一种更具表现力的方式来做到这一点。

例如：

```
assertObjectIsClass(myObject, Object1); 
```

我可以这样做：

```
assertEquals(myObject.class, Object1.getClass()); 
```

是否有特定的断言方法可以让我以更优雅、更流畅的方式测试对象的类型？

* * *

## 回答 #1

> 赞同：284
> 
> 时间：2012-09-13T11:03:47.137

您可以使用`assertThat`JUnit 附带的方法和 Matchers。

看看[这个链接](http://tutorials.jenkov.com/java-unit-testing/matchers.html)，它描述了一点关于 JUnit 匹配器的信息。

例子：

```
public class BaseClass {
}

public class SubClass extends BaseClass {
} 
```

测试：

```
import org.junit.Test;

import static org.hamcrest.CoreMatchers.instanceOf;
import static org.junit.Assert.assertThat;

/**
 * @author maba, 2012-09-13
 */
public class InstanceOfTest {

    @Test
    public void testInstanceOf() {
        SubClass subClass = new SubClass();
        assertThat(subClass, instanceOf(BaseClass.class));
    }
} 
```

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2017-12-19T15:46:36.120

由于`assertThat`现在已弃用旧答案，因此我发布了正确的解决方案：

`assertTrue(objectUnderTest instanceof TargetObject);`

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2018-01-10T16:11:34.197

## JUnit 5 的解决方案

文档说：

> 但是，JUnit Jupiter 的[`org.junit.jupiter.Assertions`](http://junit.org/junit5/docs/current/api/org/junit/jupiter/api/Assertions.html)类没有提供[`assertThat()`](http://junit.org/junit4/javadoc/latest/org/junit/Assert.html#assertThat(T,%20org.hamcrest.Matcher))像 JUnit 4 的[`org.junit.Assert`](http://junit.org/junit4/javadoc/latest/org/junit/Assert.html)类中那样接受 Hamcrest的方法[`Matcher`](http://junit.org/junit4/javadoc/latest/org/hamcrest/Matcher.html)。相反，鼓励开发人员使用第三方断言库提供的对匹配器的内置支持。

[Hamcrest](http://hamcrest.org/JavaHamcrest/)示例：

```
import static org.hamcrest.CoreMatchers.instanceOf;
import static org.hamcrest.MatcherAssert.assertThat;

import org.junit.jupiter.api.Test;

class HamcrestAssertionDemo {

    @Test
    void assertWithHamcrestMatcher() {
        SubClass subClass = new SubClass();
        assertThat(subClass, instanceOf(BaseClass.class));
    }

} 
```

[AssertJ](https://joel-costigliola.github.io/assertj/)的示例：

```
import static org.assertj.core.api.Assertions.assertThat;

import org.junit.jupiter.api.Test;

class AssertJDemo {

    @Test
    void assertWithAssertJ() {
        SubClass subClass = new SubClass();
        assertThat(subClass).isInstanceOf(BaseClass.class);
    }

} 
```

请注意，这假设您要测试类似于`instanceof`（接受子类）的行为。如果您想要完全相等的类型，我认为没有比像您在问题中提到的那样断言两个类相等更好的方法了。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2020-03-27T13:47:51.727

## Kotlin 的 JUnit 5 解决方案！

[Hamcrest](http://hamcrest.org/JavaHamcrest/)示例：

```
import org.hamcrest.CoreMatchers
import org.hamcrest.MatcherAssert
import org.junit.jupiter.api.Test

class HamcrestAssertionDemo {

    @Test
    fun assertWithHamcrestMatcher() {
        val subClass = SubClass()
        MatcherAssert.assertThat(subClass, CoreMatchers.instanceOf<Any>(BaseClass::class.java))
    }

} 
```

[AssertJ](https://joel-costigliola.github.io/assertj/)的示例：

```
import org.assertj.core.api.Assertions.assertThat
import org.junit.jupiter.api.Test

class AssertJDemo {

    @Test
    fun assertWithAssertJ() {
        val subClass = SubClass()
        assertThat(subClass).isInstanceOf(BaseClass::class.java)
    }

} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-09-12T15:50:01.863

# Kotlin 的 JUnit 解决方案

什么对我有用：

```
assert(obj is ClassName) 
```

例如

```
assert(obj is User) 
```

注意：断言来自`AssertionsJVM.kt`文件

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2022-01-21T23:53:26.390

# JUnit 5.8 的实验解决方案

在 Junit 5.8 中，添加了**实验** [`assertInstanceOf()`](https://junit.org/junit5/docs/current/api/org.junit.jupiter.api/org/junit/jupiter/api/Assertions.html#assertInstanceOf(java.lang.Class,java.lang.Object))方法，因此您不再需要 Hamcrest 或 AssertJ。解决方案现在很简单：

```
import static org.junit.jupiter.api.Assertions.assertInstanceOf;

import org.junit.Test;

public class InstanceOfTest {

    @Test
    public void testInstanceOf() {
        SubClass subClass = new SubClass();
        assertInstanceOf(BaseClass.class, subClass);
    }
} 
```

# java - 整数 ArrayList 上的 TextUtils.join

> ID：12404651
> 
> 赞同：3
> 
> 时间：2012-09-13T10:54:42.723
> 
> 标签：java, android, arraylist

我有 3 个布尔值指示是否应将 int 添加到列表中，然后我想`TextUtils.join()`在此列表中使用。

我应该如何进行？

```
ArrayList<Integer> types = new ArrayList<Integer>();

if (m_bWithA) {
   types.add(this.TYPE_A); //TYPE_A is an int
}
if (m_bWithB) {
   types.add(this.TYPE_B); 
}
if (m_bWithC) {
   types.add(this.TYPE_C); 
}

TextUtils.join("|", types); 
```

但它说我们只能使用`TextUtils.join()`on `Object[]`。

我应该使用另一个函数还是不同类型的对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T10:58:01.947

利用`TextUtils.join(types.toArray())`

# jquery - jQuery 不区分大小写包含选择器 - 1.8.1

> ID：12404653
> 
> 赞同：5
> 
> 时间：2012-09-13T10:54:46.533
> 
> 标签：jquery, jquery-selectors, contains

我在执行此操作时遇到了麻烦。从其他问题我有以下片段：

```
jQuery.expr[":"].Contains = jQuery.expr.createPseudo(function(arg) {
    return function( elem ) {
        return jQuery(elem).text().toUpperCase().indexOf(arg.toUpperCase()) >= 0;
    };
}); 
```

但我得到了错误：`TypeError: jQuery.expr.createPseudo is not a function`

有任何想法吗？另外，这个片段应该放在哪里？文件准备好了吗？

谢谢，

戴夫

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T11:04:58.447

不要使用`createPseudo`：

```
jQuery.expr[":"].Contains = function(obj,index,meta) {
    return jQuery(obj).text().toUpperCase().indexOf(meta[3].toUpperCase()) >= 0;
}; 
```

从[这里](http://jquery-howto.blogspot.com/2009/06/jquery-custom-selectors-with-parameters.html)。
你把它放在哪里并不重要——你只是定义一个函数，而不是访问 DOM——所以它不必*在*里面`document.ready`。只需确保在定义此过滤器之前加载 jQuery 并在使用它之前定义它。希望这可以帮助！

# php - 在 Wordpress 中使用具有不同子域的相同 cookie

> ID：12404659
> 
> 赞同：0
> 
> 时间：2012-09-13T10:54:51.603
> 
> 标签：php, wordpress, session, cookies

我的主域 (http://www.domain.com) 在 Wordpress 下，我创建了链接类别的子域：

*   [http://one.domain.com](http://one.domain.com) => [http://www.domain.com/category/one](http://www.domain.com/category/one)
*   [http://two.domain.com](http://two.domain.com) => [http://www.domain.com/category/two](http://www.domain.com/category/two)
*   ...

它工作得很好，除了 cookie 的持久性......我不能使用诸如**get_currentuserinfo()**之类的函数或诸如**$user_ID**之类的全局变量。

我试过了，但没有用：

```
define('COOKIEPATH', '/');
define('COOKIE_DOMAIN', '.domain.com'); 
```

请问您有什么想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:04:48.510

wordpress.org 网站提到了不同的 cookiepath 常量，即

```
define('COOKIEPATH', preg_replace('|https?://[^/]+|i', '', get_option('home') . '/' ) );
define('SITECOOKIEPATH', preg_replace('|https?://[^/]+|i', '', get_option('siteurl') . '/' ) );
define('ADMIN_COOKIE_PATH', SITECOOKIEPATH . 'wp-admin' );
define('PLUGINS_COOKIE_PATH', preg_replace('|https?://[^/]+|i', '', WP_PLUGIN_URL)  ); 
```

你已经试过了吗？（当然，您必须设置相应的路径；））

来源：[这里](http://codex.wordpress.org/Editing_wp-config.php#Additional_Defined_Constants)

# bash - bash 中 noop [:] 的用例是什么？

> ID：12404661
> 
> 赞同：155
> 
> 时间：2012-09-13T10:55:05.277
> 
> 标签：bash, shell, noop

我在 bash (:) 中搜索了 noop，但找不到任何好的信息。该运算符的确切目的或用例是什么？

我尝试了以下操作，它对我来说是这样的：

```
[mandy@root]$ a=11
[mandy@root]$ b=20
[mandy@root]$ c=30
[mandy@root]$ echo $a; : echo $b ; echo $c
10
30 
```

请让我知道，该运算符的任何实时用例或强制使用它的任何地方。

* * *

## 回答 #1

> 赞同：219
> 
> 时间：2012-09-13T11:51:13.273

更多是出于历史原因。内置冒号`:`完全等同于`true`. 当返回值很重要时使用它是传统`true`的，例如在无限循环中：

```
while true; do
  echo 'Going on forever'
done 
```

`:`当 shell 语法需要命令但您无事可做时使用它是传统的。

```
while keep_waiting; do
  : # busy-wait
done 
```

内置的`:`日期可以追溯到[Thompson shell](http://en.wikipedia.org/wiki/Thompson_shell)，它[出现](http://man.cat-v.org/unix-6th/1/sh)在[Unix v6](http://en.wikipedia.org/wiki/Version_6_Unix)中。`:`是 Thompson shell`goto`语句的标签指示符。标签可以是任何文本，因此可以`:`兼作评论指示符（如果没有`goto comment`，则`: comment`实际上是评论）。[Bourne shell](http://en.wikipedia.org/wiki/Bourne_shell)没有但`goto`保留`:`.

一个常见的习惯用法`:`是[`: ${var=VALUE}`](https://unix.stackexchange.com/questions/25425/what-does-param-value-mean)，如果未设置则设置`var`为 ，`VALUE`如果已设置则不执行任何操作`var`。这种结构仅以变量替换的形式存在，并且这种变量替换需要以某种方式成为命令的一部分：无操作命令很好地服务。

另请参阅[内置冒号的用途是什么？](https://unix.stackexchange.com/questions/31673/what-purpose-does-the-colon-builtin-serve).

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2017-02-15T11:09:40.900

当我注释掉所有代码时，我将它用于 if 语句。例如你有一个测试：

```
if [ "$foo" != "1" ]
then
    echo Success
fi 
```

但是您想暂时注释掉其中包含的所有内容：

```
if [ "$foo" != "1" ]
then
    #echo Success
fi 
```

这会导致 bash 给出语法错误：

> ```
> line 4: syntax error near unexpected token `fi'
> line 4: `fi' 
> ```

Bash 不能有空块（WTF）。所以你添加一个无操作：

```
if [ "$foo" != "1" ]
then
    #echo Success
    :
fi 
```

或者您可以使用 no-op 注释掉以下行：

```
if [ "$foo" != "1" ]
then
    : echo Success
fi 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-07-12T15:04:31.633

如果您使用`set- e`then`|| :`是一种在发生故障时*不*退出脚本的好方法（它显式使其通过）。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-05-11T18:33:57.943

您将使用`:`提供一个成功但不执行任何操作的命令。在本例中，“详细”命令默认关闭，将其设置为`:`. 'v' 选项将其打开。

```
#!/bin/sh
# example
verbosity=:                         
while getopts v OPT ; do          
   case $OPT in                  
       v)        
           verbosity=/bin/realpath 
       ;;
       *)
           exit "Cancelled"
       ;;             
   esac                          
done                              

# `$verbosity` always succeeds by default, but does nothing.                              
for i in * ; do                   
  echo $i $($verbosity $i)         
done                              

$ example
   file

$ example -v
   file /home/me/file 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-07-05T21:26:53.437

# 忽略`alias`参数

有时您希望有一个不带任何参数的别名。您可以使用`:`：

```
> alias alert_with_args='echo hello there'

> alias alert='echo hello there;:'

> alert_with_args blabla
hello there blabla

> alert blabla
hello there 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-11-11T16:58:18.403

一种用途是作为多行注释，或将部分代码与此处的文件结合使用以进行测试以注释掉部分代码。

```
: << 'EOF'

This part of the script is a commented out

EOF 
```

不要忘记使用引号，`EOF`这样里面的任何代码都不会被评估，比如`$(foo)`. 也可能值得使用直观的终止符名称，如`NOTES`,`SCRATCHPAD`或`TODO`。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-10-28T19:50:32.157

我的两个。

## 嵌入 POD 评论

一个非常时髦的应用`:`是[在 bash 脚本中嵌入 POD 注释](http://bahut.alma.ch/2007/08/embedding-documentation-in-shell-script_16.html)，这样可以快速生成手册页。当然，最终会用 Perl 重写整个脚本 ;-)

## 运行时函数绑定

这是一种在运行时绑定函数的代码模式。Fi，只有在设置了某个标志时才具有调试功能：

```
#!/bin/bash
# noop-demo.sh 
shopt -s expand_aliases

dbg=${DBG:-''}

function _log_dbg {
    echo >&2 "[DBG] $@"
}

log_dbg_hook=':'

[ "$dbg" ] && log_dbg_hook='_log_dbg'

alias log_dbg=$log_dbg_hook

echo "Testing noop alias..."
log_dbg 'foo' 'bar' 
```

你得到：

```
$ ./noop-demo.sh 
Testing noop alias...
$ DBG=1 ./noop-demo.sh 
Testing noop alias...
[DBG] foo bar 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-11-05T14:18:52.450

有时无操作子句可以使您的代码更具可读性。

这可能是一个意见问题，但这里有一个例子。假设您创建了一个通过两条 unix 路径工作的函数。它计算从一条路径到另一条路径所需的“更改路径”。您对函数进行了限制，即路径都必须以“/”开头，或者两者都不能。

```
function chgpath() {
    # toC, fromC are the first characters of the argument paths.
    if [[ "$toC" == / && "$fromC" == / ]] || [[ "$toC" != / && "$fromC" != / ]]
    then
        true      # continue with function
    else
        return 1  # Skip function.
    fi 
```

一些开发人员会想要删除 no-op 但这意味着否定条件：

```
function chgpath() {
    # toC, fromC are the first characters of the argument paths.
    if [[ "$toC" != / || "$fromC" == / ]] && [[ "$toC" == / || "$fromC" != / ]]
    then
        return 1  # Skip function.
    fi 
```

现在 - 在我看来 - 从 if 子句中并不清楚您想要跳过执行该功能的条件。为了消除无操作并清楚地做到这一点，您需要将 if 子句移出函数：

```
 if [[ "$toC" == / && "$fromC" == / ]] || [[ "$toC" != / && "$fromC" != / ]]
    then
        cdPath=$(chgPath pathA pathB)   # (we moved the conditional outside) 
```

这看起来更好，但很多时候我们不能这样做；我们希望在函数内部完成检查。

那么这种情况多久发生一次呢？不经常。也许一年一次或两次。它经常发生，你应该意识到它。当我认为它提高了我的代码的可读性（不管是什么语言）时，我不会回避使用它。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-06-21T23:11:58.860

假设您有一个命令要链接到另一个命令的成功：

```
cmd="some command..."
$cmd
[ $? -eq 0 ] && some-other-command 
```

但是现在您想有条件地执行命令，并且您想显示将要执行的命令（空运行）：

```
cmd="some command..."
[ ! -z "$DEBUG" ] && echo $cmd
[ -z "$NOEXEC" ] && $cmd
[ $? -eq 0 ] && {
    cmd="some-other-command"
    [ ! -z "$DEBUG" ] && echo $cmd
    [ -z "$NOEXEC" ] && $cmd
} 
```

所以如果你设置了 DEBUG 和 NOEXEC，第二个命令永远不会出现。这是因为第一个命令从不执行（因为 NOEXEC 不为空），但对该事实的评估使您返回 1，这意味着从属命令从不执行（但您希望它执行，因为它是空运行）。所以要解决这个问题，您可以使用 noop 重置堆栈中留下的退出值：

```
[ -z "$NOEXEC" ] && $cmd || : 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-08-06T16:05:03.230

[与这个答案](https://stackoverflow.com/a/47240483/4615179)有点相关，我发现这个无操作很方便破解[多语言](https://en.wikipedia.org/wiki/Polyglot_(computing))脚本。例如，下面是 bash 和 vimscript 的有效注释：

```
":" #    this is a comment
":" #    in bash, ‘:’ is a no-op and ‘#’ starts a comment line
":" #    in vimscript, ‘"’ starts a comment line 
```

当然，我们可能也使用`true`过，但是`:`作为一个标点符号而不是一个不相关的英语单词，它清楚地表明它是一个语法标记。

* * *

至于*为什么*有人会写一个多语言脚本这样棘手的事情（除了它很酷）：它证明在我们通常会用几种不同的语言编写多个脚本文件的情况下很有帮助，其中 file`X`指的是 file `Y`。

在这种情况下，将两个脚本组合在一个单一的多语言文件中可以避免任何`X`确定路径的工作`Y`（它只是`"$0"`）。更重要的是，它使移动或分发程序更加方便。

*   **一个常见的例子。**shebangs 有一个众所周知的长期存在的问题：大多数系统（包括 Linux 和 Cygwin）只允许将*一个*参数传递给解释器。以下shebang：

    ```
    #!/usr/bin/env interpreter --load-libA --load-libB 
    ```

    将触发以下命令：

    ```
    /usr/bin/env "interpreter --load-libA --load-libB" "/path/to/script" 
    ```

    而不是预期的：

    ```
    /usr/bin/env interpreter --load-libA --load-libB "/path/to/script" 
    ```

    因此，您最终会编写一个包装脚本，例如：

    ```
    #!/usr/bin/env sh
    /usr/bin/env interpreter --load-libA --load-libB "/path/to/script" 
    ```

    这就是多语种进入舞台的地方。

*   **一个更具体的例子。**我曾经写过一个 bash 脚本，其中包括调用 Vim。我需要给 Vim 额外的设置，这可以通过选项`--cmd "arbitrary vimscript command here"`. 但是，该设置非常重要，因此将其内联在字符串中会很糟糕（如果可能的话）。因此，更好的解决方案是将其扩展写入*某个*配置文件中，然后让 Vim 使用`-S "/path/to/file"`. 因此，我最终得到了一个多语言 bash/vimscript 文件。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-07-01T00:05:41.573

我还在它的脚本中使用了定义默认变量。

```
 : ${VARIABLE1:=my_default_value}
: ${VARIABLE2:=other_default_value}
call-my-script ${VARIABLE1} ${VARIABLE2} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-09-18T09:25:32.990

我有时在 Docker 文件上使用它来保持 RUN 命令对齐，如下所示：

```
RUN : \
    && somecommand1 \
    && somecommand2 \
    && somecommand3 
```

对我来说，它读起来比：

```
RUN somecommand1 \
    && somecommand2 \
    && somecommand3 
```

但这只是一个偏好问题，当然

# android - 在Android中使用DOM解析器解析xml文件时出现子附加问题

> ID：12404663
> 
> 赞同：2
> 
> 时间：2012-09-13T10:55:20.183
> 
> 标签：android, xml, parsing, dom, docx

我正在尝试解析 android 中定义的 docx 文件，以将它们放在文本字段、图像视图和表格布局中。但我被困在孩子的抚养上。

文本文件以已知样式定义并分隔，该样式定义了主题的标题。但是所有主题都没有定义样式，我试图通过计算两个标题之间的内容并附加到正确的对象上来获得它们，

这是我的代码，但元素附加在同一个对象上

这是目标代码 + geters 和 seters

```
public class ObjectForPassingElements {

    Element name;
    Element content;

    int position;
    int order;
    int parrent;
    int id;
}

public List<ObjectForPassingElements> getElementByStyle(Document d,NodeList paragpraphList,String startTag,String tagname,String atribute,String atributeValue)
{

        Element paragraphElement;

        Element empty = d.createElement(startTag);
        Element elementWithTagName;
        List<ObjectForPassingElements> objListWithOutContent = new ArrayList<ObjectForPassingElements>();
        int start=0;
        int end = 0;
        int order = 0;

            for(int i=0;i<paragpraphList.getLength();i++)
            {

                paragraphElement = (Element) paragpraphList.item(i);
                //m.compareDocumentPosition(other);
                NodeList titleStyle = paragraphElement.getElementsByTagName(tagname);
                ObjectForPassingElements elementWithstyle = new ObjectForPassingElements();
                for(int j=0;j<titleStyle.getLength();j++)
                {
                    elementWithTagName = (Element) titleStyle.item(j);

                    if(elementWithTagName.getAttribute(atribute).equals(atributeValue))
                    {

                        elementWithstyle.setContent(empty);
                        elementWithstyle.setName((Element) paragpraphList.item(i));
                        elementWithstyle.setPosition(i);
                        elementWithstyle.setOrder(order);
                        objListWithOutContent.add(elementWithstyle);
                        order++;
                        //
                    }
                }
            }

            Element n;
            Node childBlankNode1 = d.createTextNode("\n\n");

        for(int i =0;i<paragpraphList.getLength();i++)
        {
            Log.d("in","inlist size"+objListWithOutContent.size()+"");
            for(int k=0;k<objListWithOutContent.size();k++)
            {
                start = objListWithOutContent.get(k).getPosition();

                if(k!=objListWithOutContent.size()-1)
                    end=objListWithOutContent.get(k+1).getPosition();
                else
                    end=paragpraphList.getLength()-1;

                if(i>=start&&i<end)
                {
                    n =(Element) paragpraphList.item(i);
                    objListWithOutContent.get(k).getContent().appendChild(n);
                }
            }
        }
        //

        for(ObjectForPassingElements obj : objListWithOutContent)
        {
            Log.d("fin",obj.getPosition()+" --- ///name "+obj.getName().getTextContent()+" name/// ---- ///content"+obj.getContent().getTextContent()+"///content  ");
        }

        return objListWithOutContent;
    } 
```

这是 xml 文档表单 docx 文档的关闭示例

```
 <w:p>
<w:pStyle w:val="Protocols"/></w:pPr><w:r w:rsidRPr="00E37EC1"><w:t>HEADER 1</w:t></w:r>
</w:p>
<w:p><w:t>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam id eros id nulla ultrices condimentum. Phasellus blandit pellentesque arcu, et placerat diam posuere id. Nunc feugiat, dui at pretium ultricies, enim mi placerat nibh, at bibendum urna massa id ipsum</w:t></w:p>
<w:p><w:t>Fusce dignissim feugiat sapien, a consectetur diam vestibulum quis. Pellentesque aliquam scelerisque erat, at auctor sem commodo sit amet. Cras eget enim sapien,</w:t></w:p>
<w:p><w:t>Aliquam elit leo, pretium ac suscipit rhoncus, eleifend vitae sem. Curabitur mattis euismod quam, vitae convallis elit sodales non.</w:t></w:p>
<w:p><w:t>Curabitur vel risus vitae lacus feugiat gravida in sed lorem. Proin fringilla vehicula nulla a consectetur. In hac habitasse platea dictumst. Proin viverra </w:t></w:p>
<w:p><w:t>Curabitur elementum condimentum enim tempus pharetra. Sed non nisl lectus. Aliquam vitae mi in diam vehicula aliquam a vitae tortor.</w:t></w:p>

<w:p>
<w:pStyle w:val="Protocols"/></w:pPr><w:r w:rsidRPr="00E37EC1"><w:t>HEADER 2</w:t></w:r>
</w:p>
<w:p><w:t>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. </w:t></w:p>
<w:p><w:t>Cras aliquam viverra lorem, eget aliquet ipsum malesuada ut</w:t></w:p>
<w:p><w:t>Etiam non est turpis, quis posuere mi. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. In quis lectus sapien, nec ultricies arcu.</w:t></w:p>
<w:p><w:t>tent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Aliquam et tellus at libero dignissim lobortis ut vitae nisl. Mauris sol</w:t></w:p>
<w:p><w:t>etur in, molestie non dolor. Etiam in quam purus.</w:t></w:p> 
```

以下是如何使用所需参数调用此函数

```
 public void stripXmlTags(File f) {

    Document d;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();

    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        FileInputStream is = new FileInputStream(f);

        d=db.parse(is);

        NodeList paragrph = d.getElementsByTagName("w:p");

        List<ObjectForPassingElements> protocolsList = new ArrayList<ObjectForPassingElements>();

        protocolsList = getElementByStyle(d,paragrph,"w:p","w:pStyle","w:val","Protocols"); 
```

……

# html - 减少 HTML 文件大小 - 不仅仅是最小化？

> ID：12404667
> 
> 赞同：2
> 
> 时间：2012-09-13T10:55:36.173
> 
> 标签：html, compression, size

我一直在查看显示文件大小`Firebug`的选项卡。`Net`

许多高流量网站的 url 初始 GET 大小似乎都非常小。

例如，`GET www.hostmonster.com`进来 3.9KB。（向那些被这个例子冒犯的人道歉。）

但是，如果我将 hostmonster HTML 源代码放入编辑器，它可以节省 12KB。如果我通过在线压缩器运行它，它只会减少到 11KB。

3.9KB 是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:02:59.563

使用 Gzipping。查看[最新的 CSS Tricks 截屏视频](http://css-tricks.com/video-screencasts/114-lets-do-simple-stuff-to-make-our-websites-faster/)，它将带您了解许多加快网站速度的技术，并将描述如何设置 Gzipping，比我在这里做得更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T11:04:28.087

GZip 或 Deflate 压缩。

最常见的是通过 Content-Encoding 标头（尽管我们实际上都将它用作传输编码，但对此的支持很差）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T11:13:01.163

您可以使用 GZip 或 Deflate 比较，因为您需要在 Apache 中为 Deflate`deflate_module`和 Gzip获取模块`mod_gzip`

我会推荐mod Gzip

学习[如何安装 mod_gzip](http://schroepl.net/projekte/mod_gzip/install.htm)

mod_gzip 的实时示例如下

> ![在此处输入图像描述](../Images/063aa314d41c79827456d4ec2a834bf8.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T11:13:02.197

它被压缩了，你可以在转账金额下面看到实际大小：

![在此处输入图像描述](../Images/2e4ebb236d8a1bb8b5de45482db1f3ca.png)

# android - 在调用 AsyncTask::execute 之后，AsyncTask 的 doInBackground 开始执行太晚了

> ID：12404668
> 
> 赞同：13
> 
> 时间：2012-09-13T10:55:36.733
> 
> 标签：android, android-asynctask

我写了一个 AsyncTask 并且大多数时候在调用它的构造函数和调用它的 doInBackground 之间没有延迟（0 ms 延迟）。但是，每当在后台进行联系人同步时，我的 AsyncTasks 的构造函数和 doInBackground 之间经常会出现 1-3 秒的延迟。在我的情况下，这种延迟是不可接受的。我知道 AsyncTask 是一个后台线程，可以通过使用 Thread 并将其优先级设置得更高来解决这个问题。但我想知道的是，我怎么知道是什么导致我的 AsyncTask 的 doInBackground 被调用？我使用了 adb shell top -m 10 ，当这个问题发生时，进程使用似乎很正常。

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-13T12:02:12.423

我也长期面临这个问题，但现在已经解决了。使用下面的代码

```
new AsyncTaskName().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR); 
```

而是代码

```
new AsyncTaskName().execute(); 
```

它将解决延迟运行 doInbackground 的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T11:06:38.913

我们一般不关心 jvm 的任务调度。事实上，我们也不必费心。

如果需要在您的应用程序中尽快完成某些操作，请在构造函数本身中执行或使用 Asynctask 的 onPre（请记住它在 UI 线程上执行）。

但我同意在 Android AsyncTask 中的 doInBackgroud 调用中有一些可疑之处，我自己亲眼目睹了在 onPre 之后没有调用 doInbackground。你也可以谷歌这个。很多人都面临过。我开始使用传统线程。

我在核心使用传统线程编写了自己的 Asynctask，并模仿 onPre 和 onPost 我使用了 Handler。您也可以选择该选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T11:07:18.773

区分创建和执行任务很重要。（正如您所注意到的，An`ASyncTask`有一个单独的方法和一个构造函数。）`execute()`

创建线程可能非常昂贵，因此您可能会发现提前创建任务，然后仅在正确的时间执行它会产生更好的结果。

如果后台操作可能会经常重复，您可能还会发现`IntentService`在后台线程中一次处理请求的 an 更合适。

# iphone - 如何从iphone中的经度和纬度获取地址，城市名称

> ID：12404669
> 
> 赞同：-1
> 
> 时间：2012-09-13T10:55:36.677
> 
> 标签：iphone, latitude-longitude, street-address

如何从经度/纬度值中获取位置详细信息？有没有人可以帮助我解决这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:03:55.427

您可以使用 CLGeocoder 从纬度和经度中获取详细信息。

查看[CLGeoCoder 类参考](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLGeocoder_class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:00:57.513

您应该查看可用于多种语言的 MaxMind GeoIP API： [这里](http://www.maxmind.com/app/c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T11:01:09.290

看看 google maps apis 反向地理编码功能。

[https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding](https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding)

你会提出这样的请求：

```
http://maps.googleapis.com/maps/api/geocode/json?latlng=40.714224,-73.961452&sensor=true 
```

并接收一个 json 编码的对象，其中包含对地址的猜测（当然包括城市）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T11:11:23.930

这称为“反向地理编码”，请参阅[http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKReverseGeocoder_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKReverseGeocoder_Class/Reference/Reference.html)

# c - 与 while(1) 并行运行时中断计时器卡住

> ID：12404674
> 
> 赞同：0
> 
> 时间：2012-09-13T10:55:47.553
> 
> 标签：c, cross-compiling, interrupt, interrupt-handling, atmel

第一个代码：

```
//------------------------------------------------------------------------------
/// Interrupt handlers for TC interrupts. Toggles the state of LEDs
//------------------------------------------------------------------------------
char token = 0;
void TC0_IrqHandler(void) {
    volatile unsigned int dummy;
    dummy = AT91C_BASE_TC0->TC_SR;  
    if(token == 1) {
        PIO_Clear(&leds[0]);
        PIO_Set(&leds[1]);
        token = 0;
        }
    else {
        PIO_Set(&leds[0]);
        PIO_Clear(&leds[1]);
        token = 1;
        }
    }
//------------------------------------------------------------------------------
/// Configure Timer Counter 0 to generate an interrupt every 250ms.
//------------------------------------------------------------------------------
void ConfigureTc(void) {
    unsigned int div;
    unsigned int tcclks;
    AT91C_BASE_PMC->PMC_PCER = 1 << AT91C_ID_TC0;       // Enable peripheral clock
    TC_FindMckDivisor(1, BOARD_MCK, &div, &tcclks);     // Configure TC for a 4Hz frequency and trigger on RC compare
    TC_Configure(AT91C_BASE_TC0, tcclks | AT91C_TC_CPCTRG);
    AT91C_BASE_TC0->TC_RC = (BOARD_MCK / div) / 1;      // timerFreq / desiredFreq
    IRQ_ConfigureIT(AT91C_ID_TC0, 0, TC0_IrqHandler);   // Configure and enable interrupt on RC compare
    AT91C_BASE_TC0->TC_IER = AT91C_TC_CPCS;
    IRQ_EnableIT(AT91C_ID_TC0);
    printf(" -- timer has started \n\r");
    TC_Start(AT91C_BASE_TC0);
    } 
```

它只是中断计时器，它是事件（处理程序）但是当我运行一些

```
while(1) {
  // action 
```

在`ConfigureTc()`循环和中断定时器都冻结之后......为什么会这样？我应该添加另一个计时器并避免`while(1)`吗？

```
while(1) {
  printf("hello");
  } 
```

-- 这会打破（冻结）循环（是的，如果我不使用计时器，它会正常工作）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:17:32.353

我将在这里冒险给出一个实际的答案。IME，在 99% 的情况下，我的板子“熄灭”，对任何输入都没有响应，也没有来自低优先级“闪烁”线程的“心跳”LED 闪烁，CPU 已经飞到预取或数据中止处理程序。这些处理程序是通过中断进入的，并且大多数库定义的默认处理程序不会重新启用中断，因此会填充整个系统。通常，它们只是无限循环，并且在禁用中断的情况下，这就是故事的结局：(

我已经更改了我的默认处理程序以向 UART 输出合适的“严重错误”消息（通过轮询它 - 操作系统/中断是一堆东西！）。

# ruby-on-rails - 在 Rails 项目中安装 lincache19 时出错

> ID：12404678
> 
> 赞同：0
> 
> 时间：2012-09-13T10:56:18.833
> 
> 标签：ruby-on-rails, ruby, linecache

我正在为我的项目使用 ruby​​ 1.8.7 和 rails 3.0.12。当我运行“捆绑安装”时，出现以下错误。

```
Gem::InstallError: linecache19 requires Ruby version >= 1.9.2.
An error occurred while installing linecache19 (0.5.12), and Bundler cannot continue. 
```

我不想更改我的 ruby​​ 版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:59:54.107

您可以尝试使用调试器 gem 而不是 ruby​​-debug。查看您的 gemfile 并替换`gem "ruby-debug"`为`gem "debugger"`. 从记忆中我就是这样做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:35:57.237

替换`gem 'ruby-debug19'`为`gem 'ruby-debug'`对我有用。

# c# - 无法通过 jquery Ajax 调用 asmx Web 服务

> ID：12404679
> 
> 赞同：0
> 
> 时间：2012-09-13T10:56:22.837
> 
> 标签：c#, jquery, asp.net

我在一个端口 localhost:5739 中运行 asmx 服务，并尝试从其他端口或纯 html + jquery 调用该服务出项目

但我无法访问网络服务

我的网络服务是

```
 [WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public string HelloWorld(string text) {
    return "Hello World" + text;
} 
```

我调用网络服务的代码是

```
 $.ajax(
            {
                type: "POST",
                url: "http://localhost:5739/asmxservices/testservice.asmx/HelloWorld",
                data: '{ "text": "Kartheek"}',                    
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: OnSuccess,
                error: OnError

            });

            function OnSuccess(data, status) {
                alert(data.d);

            };
            function OnError(msg) {
                alert('error = ' + msg.d);
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:18:19.697

您的方法需要是静态的，如下所示：

```
[WebMethod] 
[ScriptMethod(ResponseFormat = ResponseFormat.Json)] 
public static string HelloWorld(string text) { 
    return "Hello World" + text; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:15:08.093

看来您的麻烦是由文件放置引起的。调用您的服务的 JS 代码应与您的服务位于同一主机上。只需将 html 文件放在项目根文件夹中，然后在调试时尝试从目录列表中运行它。作为示例：我使用路径测试服务调用文件

`http://localhost:51169/2.html`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-13T18:53:26.700

以下步骤解决了我的问题，希望对某些人有所帮助，

1.  要允许使用 ASP.NET AJAX 从脚本调用此 Web 服务，请在 asmx 服务类上方包含以下行，例如

[System.Web.Script.Services.ScriptService] 公共类 GetData : System.Web.Services.WebService {

2.  在 web.config 中的 system.web 下添加协议，如果无法查看配置请点击链接，

[https://pastebin.com/CbhjsXZj](https://pastebin.com/CbhjsXZj)

```
<system.web>
<webServices>
  <protocols>
    <add name="HttpGet"/>
    <add name="HttpPost"/>
  </protocols>
</webServices> 
```

# facebook-graph-api - FQL - 计算每个朋友的标记照片

> ID：12404696
> 
> 赞同：1
> 
> 时间：2012-09-13T10:57:18.083
> 
> 标签：facebook-graph-api, facebook-javascript-sdk, facebook-fql

我需要计算两年前您与朋友分享的标记照片的数量。

目前我正在调用图表

```
/me/photos?fields=id,tags,created_time&limit=2000&since=1284374555 
```

这会检索我过去两年的所有照片......然后我遍历所有照片标签，并使用计数器计算每个朋友的标签数量。

这很慢...

我想知道是否可以使用单个 FQL 查询来执行此操作，并返回所有朋友的单个数组，每个朋友具有以下三个属性：

```
 name = Joe Bloggs //Friend name
    id = 7643785634 //Friend id
    tag_count = 45 //Tags you share with each other 
```

我知道这将是一个相当复杂的查询。因此，非常感谢任何帮助。

# iphone - iPhone 5 + iOS6 如何决定应用程序是否必须在信箱模式下运行

> ID：12404699
> 
> 赞同：14
> 
> 时间：2012-09-13T10:57:33.117
> 
> 标签：iphone, ios6

iOS6 如何决定应用程序是否必须在 iPhone 5 上以信箱/兼容模式运行？这是构建设置参数（如“目标设备系列”）吗？还是所有基于最新 SDK 构建的应用程序都必须支持 iPhone 5 屏幕尺寸？或者应用程序将以信箱模式运行，是否没有 1136x640 Default.png 启动画面？或者还有什么？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-13T11:10:32.700

如果没有 1136x640 Default.png 启动画面，应用程序将以信箱模式运行。

图像必须命名为 Default-568h@2x.png（如果您的启动画面是 Info.plist 中的 Default.png）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-21T11:15:29.613

您还需要添加 IOS8 特定的启动画面。在我的情况下，我有 1136x640 Default.png 启动画面，但您需要选择启动屏幕并选择方向，如下所示

![在此处输入图像描述](../Images/0ef89ecf1fa41148d1ce9c31051bf843.png)

这对我有用。希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-11T15:37:24.777

我没有尝试添加启动画面（特别是因为当时我没有任何图像），而是去了

> 目标常规设置 -> 应用程序图标和启动图像 -> 启动图像源

并创建了一个新目录。没有添加任何图像，只需运行应用程序，黑条就消失了。

希望这对任何人都有帮助。

# linux - WebSVN 权限问题

> ID：12404706
> 
> 赞同：1
> 
> 时间：2012-09-13T10:57:55.897
> 
> 标签：linux, svn, apache, websvn

这是我得到的错误：

E180001: 无法连接到 URL 'file:///svn/repositories/ncs_svn' 的存储库
\nE180001: 无法打开到 URL 的 ra_local 会话
\nE180001: 无法打开存储库 'file:///svn/repositories/ ncs_svn'
\nE000013: 无法打开文件'/svn/repositories/ncs_svn/format': 权限被拒绝

我可以从命令行以 root 身份运行此命令，它可以工作。

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:00:57.920

正如您的问题中所写，您无权访问`/svn/repositories/ncs_svn/format`. 尝试为用户设置权限。

# c++ - 无法从 C++ DLL 导出函数

> ID：12404709
> 
> 赞同：1
> 
> 时间：2012-09-13T10:57:59.430
> 
> 标签：c++, visual-studio-2008, dll, mfc

我需要使用 Visual Studio 2008 创建一个 C++ MFC DLL。为此，我在 Visual Studio 中创建了一个 DLL MFC Win32 控制台项目，并创建了一个创建对象并使用其方法将字符串打印到屏幕的函数。有点像这样：

```
__declspec(dllexport) void Foo(void); 
```

在哪里：

```
 void Foo(void){
    print* obj = new print;
    obj->testPrint();
    return;
}

void print::testPrint(void){
    printf("Bar\n");
    return;
} 
```

它编译成功并生成 DLL，但是当我尝试使用它时，我总是得到：“错误 LNK2019：未解析的外部符号“void __cdecl Foo(void)”

我尝试使用 Dependency Walker，但它没有在 DLL 中显示任何功能。难道我做错了什么？我已经搜索了很多，但仍然没有从可能发生的事情中得出任何结论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T20:03:36.293

听起来您可能没有在任何 cpp 文件中包含指定导出的头文件。请记住，cpp 文件是唯一实际编译的文件。因此，请确保`__declspec(dllexport) void Foo(void);`在至少一个 cpp 文件中包含标题。还要确保您的项目链接器->输入设置没有指定“模块定义文件”（def）文件。

不要费心去尝试链接到 DLL，直到依赖walker 显示某些东西已经被实际导出了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T12:18:22.213

Windows 默认为 cdecl，因此您需要明确说明它是在调用者中导出的 declspec - 或者将其从 DLL 中导出为 cdecl。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T15:47:45.993

您还需要从 CPP 文件中显式**导出**符号：

```
__declspec(dllexport)
void Foo(void)
{ 
    print* obj = new print; 
    obj->testPrint(); 
    return; 
} 
```

标头中的规范仅适用于客户端 (EXE)，并提示来自服务器 (DLL) 的链接器。

# asp.net - 当我从 asp:button 中删除“禁用”属性时，它会启用但不会回发？

> ID：12404710
> 
> 赞同：1
> 
> 时间：2012-09-13T10:57:59.527
> 
> 标签：asp.net

当我使用 jquery 从 asp:button 删除禁用属性时，它变为启用此按钮执行部分回发，即使 OnClientClick 事件未触发并且服务器端也对按钮的 ClientID 的引用是完美的提前谢谢

# java - Java 关闭挂钩未运行

> ID：12404712
> 
> 赞同：4
> 
> 时间：2012-09-13T10:58:02.537
> 
> 标签：java, multithreading

我是 Java/线程的新手，我继承了类似以下代码的内容。这是一个命令行程序，main() 只启动 5-6 个不同类型的线程并以 ^C 退出。我想添加一个关闭挂钩以正确关闭所有线程并按以下方式对其进行调整。

我在所有线程中添加了一个 Shutdown 钩子和一个 stopThread() 方法（如 MyWorker 类中的那个）

问题是当我按下 ^CI 时，看不到来自 Thread 的 run 方法的结束消息。这是在后台完成的还是我的方法有问题。另外，我应该遵循更好的模式吗？

谢谢

```
 public class Main {
     public static MyWorker worker1 = new MyWorker();
     // .. various other threads here

     public static void startThreads() {
         worker1.start();
         // .. start other threads
     }

     public static void stopThreads() {
         worker1.stopThread();
         // .. stop other threads
     }

     public static void main(String[] args)
             throws Exception {

         startThreads();

         // TODO this needs more work (later)

         Runtime.getRuntime().addShutdownHook(new Thread() {
             @Override
             public void run() {
                 try {
                     stopThreads();
                 } catch (Exception exp) {

                 }
             }
         });
     } }

 public class MyWorker extends Thread {
     private volatile boolean stop = false;

     public void stopThread() {
         stop = true;
     }

     public void run() {
         while (!stop) {
             // Do stuff here
         }
         // Print exit message with logger
     } 
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-01-04T07:38:08.640

**在某些情况下可能不会执行 Shutdown Hooks！**

首先要记住的是，不能保证关闭挂钩始终运行。如果 JVM 由于某些内部错误而崩溃，那么它可能会崩溃而没有机会执行一条指令。

此外，如果操作系统发出*SIGKILL* ( [http://en.wikipedia.org/wiki/SIGKILL](http://en.wikipedia.org/wiki/SIGKILL) ) 信号（`kill -9`在 Unix/Linux 中）或 TerminateProcess (Windows)，则应用程序需要立即终止，甚至无需等待任何清理活动。除了上述之外，还可以通过调用`Runime.halt()`方法来终止JVM而不让shutdown hooks运行。

Shutdown hooks are called when the application terminates normally (when all threads finish, or when `System.exit(0)` is called). Also, when the JVM is shutting down due to external causes such as user requesting a termination (`Ctrl`+`C`), a *SIGTERM* being issued by O/S (normal kill command, without -9), or when the operating system is shutting down.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-13T11:00:34.830

当您调用 System.exit() 或通过信号终止时，它会停止所有现有线程并启动所有关闭挂钩。即当你钩子开始时，你所有的线程都可能已经死了。

与其尝试干净地停止线程，不如确保干净地关闭资源。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-13T11:31:31.367

我想您可以将代码转移到[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#shutdown%28%29)

```
private final ExecutorService pool;
pool = Executors.newFixedThreadPool(poolSize);
pool.execute(Instance of Runnable);
pool.shutdown(); 
```

[ExecutorService.shutdown](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#shutdown%28%29)

> 启动有序关闭，其中执行先前提交的任务，但不会接受新任务。如果已经关闭，调用没有额外的效果。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-13T11:00:42.880

尝试将您的线程作为守护线程。

添加构造函数

```
public MyWorker(boolean isDaemon) {
this.setDaemon(true);
} 
```

或在调用 start 之前设置为守护进程。

```
worker1.setDaemon(true);
worker1.start(); 
```

当您按下 Ctrl C 并退出时，线程将停止。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T11:26:48.840

这里发生的是您调用该`stopThread()`方法，但您不等待线程在终止之前实际完成。

如果您`join()`在停止 JVM 之前在所有线程上调用 a，您可能会看到您的“*停止日志*”。

```
public static void stopThreads() {
     worker1.stopThread();
     // .. stop other threads

    for(Thread t: workers) {
       t.join();
    }
 } 
```

# jquery - 调整元素大小和动画 scrolltop/scrollleft 上的弹跳错误

> ID：12404716
> 
> 赞同：1
> 
> 时间：2012-09-13T10:58:30.130
> 
> 标签：jquery, resize, jquery-animate, scrolltop

我开发了插件 ascensor.js (http://kirkas.ch/ascensor/) 在完全重写它之后（whitout scrollto 插件）我在调整大小功能上遇到了一些错误。

当你这样做时，会有一些反弹效果（chrome），你可以看到其他楼层的一小部分，我知道每个浏览器都有不同的调整大小效果，但我想知道是否有办法修复它。

调整大小效果：Chrome/Safari/Firefox：小反弹并查看其他楼层 Opera：直到点击向上才调整大小效果

这里是完整的插件： http: [//kirkas.ch/ascensor/js/jquery.ascensor.js](http://kirkas.ch/ascensor/js/jquery.ascensor.js)

这里是关于调整大小功能的部分：

```
function resizeFloor(){
    var WW=$(window).width();
    var WH=$(window).height()

    if(params.Direction=='y'){$(node).stop().animate({scrollTop:(floor-1)*WH},1);}
    if(params.Direction=='x'){$(node).stop().animate({scrollLeft:(floor-1)*WW},1);}
    if(params.Direction=='chocolate'){
        var target = AscensorMap[StageOn-1].split('|');
        $(node).stop().animate({
        scrollLeft:(target[1]-1)*WW,
        scrollTop:(target[0]-1)*WH
        },1);
    }

    $(node).height(WH).width(WW).children(params.ChildType).each(function(){
        $(this).height(WH).width(WW);
    });

    if(params.Direction=='x'){
        $(node).children().css('position','absolute');
        $(node).children().each(function(index){$(this).css('left',index*WW);})
    }

    if(params.Direction=='chocolate'){
        $(node).children(params.ChildType).each(function(index){
            var CoordName = AscensorMap[index].split('|');
            $(this).css({'position':'absolute', 'left':(CoordName[1]-1)*WW, 'top':(CoordName[0]-1)*WH});
        });
    }
} 
```

此外，我在 JS 开发方面还是个新手，所以如果您对系统的语法或批评有任何建议，我完全开放。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:24:24.207

我自己找完了，而不是

```
$(node).stop().animate({
    scrollLeft:(target[1]-1)*WW,
    scrollTop:(target[0]-1)*WH
},1); 
```

我应该使用

```
$(node).stop().scrollTop((target[0]-1)*WH).scrollLeft((target[1]-1)*WW); 
```

# php - 选择多个具有相同名称的复选框

> ID：12404719
> 
> 赞同：0
> 
> 时间：2012-09-13T10:58:34.953
> 
> 标签：php, javascript, jquery, checkbox

例如，我有 5 个复选框，它们都具有相同的名称。我选中复选框，提交然后删除我选中的复选框。在这里，我没有任何问题，问题是检查数字1、3、5等

如何从例如 5 个复选框中检查我想要的所有复选框

例如 ：

```
Check 1 - checked
Check 2 - unchecked
Check 3 - checked
Check 4 - unchecked
Check 5 - checked 
```

感谢和问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T11:01:03.160

如果你**真的**不能给他们不同的名字或 id 并且你想检查他们：

```
$('input[name="thename"]').prop('checked', true); 
```

如果要检查第一个、第三个和第五个复选框，可以这样做：

```
$('input[name="thename"]').filter(':eq(0), :eq(2), :eq(4)').prop('checked', true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T10:59:52.780

使用 id 单独识别它们：

```
<input type='checkbox' name='name' id='cb_1'/>
<input type='checkbox' name='name' id='cb_2'/>
<input type='checkbox' name='name' id='cb_3'/>
<input type='checkbox' name='name' id='cb_4'/>
<input type='checkbox' name='name' id='cb_5'/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T11:19:07.060

如果您想删除您选中的复选框，那么如果您使用 jQuery，这可能会有所帮助

```
1 <input type='checkbox' name='my_name' /><br>
2 <input type='checkbox' name='my_name' /><br>
3 <input type='checkbox' name='my_name' /><br>
4 <input type='checkbox' name='my_name' /><br>
5 <input type='checkbox' name='my_name' /><br>
    <script type="text/javascript">​
        // Event handler activates when value of input with specified name is changed
        $("input[name=my_name]").on("change", function(event) {
            // checks if checkbox was checked, if so - deletes it
            if (true === $(this).prop('checked')) $(this).remove();
        });​
    </script> 
```

[http://jsfiddle.net/56nBw/1/](http://jsfiddle.net/56nBw/1/)

# drupal-7 - 如何根据drupal 7中的语言更改日期格式

> ID：12404720
> 
> 赞同：1
> 
> 时间：2012-09-13T10:58:39.290
> 
> 标签：drupal-7

我正在尝试根据 drupal 7 中的所选语言更改数据格式。我使用 2 种语言英语和阿拉伯语，我想更改阿拉伯语站点的日期。我正在使用 drupal 的 format_date 函数，但它不起作用。

代码：

```
global $language;

format_date($offer->created,'custom','d M Y',NULL,$language->language); 
```

谢谢大家。

# php - VHost & htaccess - 500 内部服务器错误

> ID：12404721
> 
> 赞同：0
> 
> 时间：2012-09-13T10:58:39.823
> 
> 标签：php, linux, apache, .htaccess, codeigniter

我使用**ISPConfig 3**来管理我的域/子域。

我添加`parim.kristian.ee`了将重定向到的子域`web/parim/`（*注意：**web/**是我的文档根目录*）。

ISPConfig 生成这样的重定向到 apache 配置：

```
RewriteEngine on
RewriteCond %{HTTP_HOST}   ^parim.kristian.ee [NC]
RewriteRule   ^/(.*)$ /parim/$1  [L] 
```

现在，如果我尝试获取静态资源，例如[http://parim.kristian.ee/images/1x1.gif](http://parim.kristian.ee/images/1x1.gif)，它可以正常工作，但是当重定向到 codeigniter 时，它就不起作用了。

Htaccess`web/parim/`看起来像这样：

```
<IfModule mod_rewrite.c>
    RewriteEngine on

    Options -Indexes

    #Handle CodeIgniter request
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ ./index.php?/$1 [L] 
</IfModule>
<IfModule !mod_rewrite.c>
    ErrorDocument 404 ./index.php
</IfModule> 
```

**注意：通过**[http://kristian.ee/parim/](http://kristian.ee/parim/)访问同一文件夹有效！

我在htaccess s * ck，所以任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:19:13.223

```
# To remove index.php from URL

RewriteEngine On
RewriteBase /parim
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php/$1 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

或简单删除 RewriteBase /parim

# iphone - NSArray 充满了 NSDictionaries。如何找到对象的索引？

> ID：12404722
> 
> 赞同：9
> 
> 时间：2012-09-13T10:58:39.587
> 
> 标签：iphone, objective-c, ios, xcode, nsarray

我有一个`array`里面装满`NSDictionaries`. 我想找到`index`一本字典，但我对这本字典的了解只是一个`value`for 键`@"name".` 我该怎么做？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-13T11:11:54.010

`theArray`查找值为`@"name"`的第一个字典的索引`theValue`：

```
NSUInteger index = [theArray indexOfObjectPassingTest:
        ^BOOL(NSDictionary *dict, NSUInteger idx, BOOL *stop)
        {
            return [[dict objectForKey:@"name"] isEqual:theValue];
        }
]; 
```

`index``NSNotFound`如果没有找到匹配的对象，将是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-25T07:31:09.300

```
 NSArray *temp = [allList valueForKey:@"Name"];
 NSInteger indexValue = [temp indexOfObject:YourText];
 NSString *name = [[allList objectAtIndex:indexValue] valueForKey:@"Name"] 
```

# wxpython - 初始化 ExpressionTextCtrl

> ID：12404726
> 
> 赞同：0
> 
> 时间：2012-09-13T10:58:56.433
> 
> 标签：wxpython

我有一个给定的代码：

```
import wx

from application.gui.ctrls.panelCalibration.PanelGridCalibration import PanelGridCalibration
from lib.common.dataStructures.Value import ExpressionValue

class PanelValueCalibration(PanelGridCalibration):
    def __init__(self, parent, defaultValues, changeableSize=False):
        PanelGridCalibration.__init__(self, parent, defaultValues, False)
        self.grid.SetRowLabelSize(0)
        self.grid.SetColLabelSize(0)
        self.grid.SetDimension(1, 1)
        self.grid.Unbind(wx.grid.EVT_GRID_CELL_RIGHT_CLICK)
        wx.CallAfter(self.ExpandCell)

        self.DisableWriteByVariable()

    def ExpandCell(self):
        self.grid.SetColSize(0, self.grid.GetClientSize().x - 20)

    def SetDefaultValues(self, defaultValue):
        pass
        #self.grid.GetTable().SetDefaultValue(0, 0, defaultValue)

    def SetValues(self, value):
        self.grid.GetTable().SetValue(0, 0, value.GetValue())

    def OnGridDimensionChanged(self, oldDimension, newDimension):
        pass

    def GetValues(self):
        return ExpressionValue(self.grid.GetCellValue(0, 0))

    def CheckInput(self):
        if self.GetValues().GetValue() == None:
            self.ShowErrorDialog(_(u"Kein Wert zum Schreiben angegeben!"))
            return False
        return True 
```

如您所见，`PanelValueCalibration`继承自`PanelGridCalibration`. 但是，我想修改`PanelValueCalibration`为使用 a`TextCtrl`而不是 a `GridCtrl`。我看到有一个`ExpressionTextCtrl`类，但我不知道如何将它导入到我的`PanelValueCalibration`类中。

编辑：我已经插入：

```
from application.gui.ctrls.ExpressionCtrls import ExpressionTextCtrl 
```

但不知道如何`init`正确定义：

```
class PanelValueCalibration(ExpressionTextCtrl):
    def __init__(self, parent, defaultValues, changeableSize=False):
        ExpressionTextCtrl.__init__(self, parent, defaultValues, False) 
```

# c# - 使用 orderby 对 int 数组进行排序

> ID：12404735
> 
> 赞同：25
> 
> 时间：2012-09-13T10:59:27.593
> 
> 标签：c#

我想按升序对我的 int 数组进行排序。

首先我复制我的数组：

```
int[] copyArray = myArray.ToArray(); 
```

然后我想按升序对它进行排序，如下所示：

```
 int[] sortedCopy = from element in copyArray 
                    orderby element ascending select element; 
```

但我收到一个错误，“选定”被高亮显示，错误是：“无法将类型'system.linq.iorderedenumerable'隐式转换为'int []'”

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-09-13T11:00:48.337

您需要`ToArray()`在最后调用才能将有序序列实际转换为数组。LINQ 使用*惰性求值*，这意味着在您调用或其他类似方法之前`ToArray()`，`ToList()`不会执行中间处理（在本例中为排序）。

这样做已经制作了元素的副本，因此您实际上不需要先创建自己的副本。

例子：

```
int[] sortedCopy = (from element in myArray orderby element ascending select element)
                   .ToArray(); 
```

最好用表达式语法来写：

```
int[] sortedCopy = myArray.OrderBy(i => i).ToArray(); 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-09-13T11:10:55.913

注意：如果您不需要副本（即更改是可以接受的`myArray`），那么更简单和更有效的方法就是：

```
Array.Sort(myArray); 
```

这会对数组进行就地排序，利用它是一个尽可能高效的数组这一事实。

对于更复杂的场景（例如，对象数组的成员排序），您可以执行以下操作：

```
Array.Sort(entityArray, (x,y) => string.Compare(x.Name, y.Name)); 
```

这是道德等价的：

```
var sortedCopy = entityArray.OrderBy(x => x.Name).ToArray(); 
```

但同样：就地进行排序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T11:10:48.783

我们不知道您接下来要做什么，但也许您不需要数组。如果它进入另一个 linq 语句或 foreach，那么只需保持原样，最简单的是使用`var`.

```
var sortedCopy = myArray.OrderBy(i => i);

foreach(var item in sortedCopy)
{
   //print out for example
} 
```

这允许 linq 尽可能地懒惰。如果您总是强制转换`ToArray`，`ToList`那么它别无选择，只能在那时和那里进行评估，并为结果分配内存。

# javascript - 使用图像数组列表的 simplegallary.js 显示适合桌面屏幕的图像

> ID：12404737
> 
> 赞同：0
> 
> 时间：2012-09-13T10:59:31.147
> 
> 标签：javascript, jquery, html, css

在这里我的javascript函数我想显示图像数组中的图像应该显示适合桌面屏幕大小并告诉我在哪里更正代码并请告诉我是否有任何其他解决方案适用于该组件

```
 var mygallery=new simpleGallery({
            wrapperid: "slideshow", //ID of main gallery container,
            dimensions: [960, 430], //width/height of gallery in pixels. Should reflect dimensions of the images exactly
            imagearray: [
                        ["http://www.sifasusa.com/Atimo_s/news/slide-show16.jpg", "", ""],
                ["http://www.sifasusa.com/Atimo_s/news/slide-show15.jpg", "", ""],
                        ["http://www.sifasusa.com/Atimo_s/news/slide-show14.jpg", "", ""],
                        ["http://www.sifasusa.com/Atimo_s/news/slide-show01.jpg", "", ""],  
                ["http://www.sifasusa.com/Atimo_s/news/slide-show02.jpg", "", ""],
                ["http://www.sifasusa.com/Atimo_s/news/slide-show12.jpg", "", ""],
                ["http://www.sifasusa.com/Atimo_s/news/slide-show03.jpg", "", ""],
                ["http://www.sifasusa.com/Atimo_s/news/slide-show04.jpg", "", ""],
                ["http://www.sifasusa.com/Atimo_s/news/slide-show05.jpg", "", ""],
                ["http://www.sifasusa.com/Atimo_s/news/slide-show08.jpg", "", ""],
                ["http://www.sifasusa.com/Atimo_s/news/slide-show13.jpg", "", ""],
                ["http://www.sifasusa.com/Atimo_s/news/slide-show09.jpg", "", ""],
                ["http://www.sifasusa.com/Atimo_s/news/slide-show10.jpg", "", ""],
                ["http://www.sifasusa.com/Atimo_s/news/slide-show11.jpg", "", ""]
                ],
            autoplay: [true, 2500, 8], //[auto_play_boolean, delay_btw_slide_millisec, cycles_before_stopping_int]
            persist: false, //remember last viewed slide and recall within same session?
            fadeduration: 500, //transition duration (milliseconds)
            oninit:function(){ //event that fires when gallery has initialized/ ready to run
                //Keyword "this": references current gallery instance (ie: try this.navigate("play/pause"))
            },
            onslide:function(curslide, i){ //event that fires after each slide is shown
                //Keyword "this": references current gallery instance
                //curslide: returns DOM reference to current slide's DIV (ie: try alert(curslide.innerHTML)
                //i: integer reflecting current image within collection being shown (0=1st image, 1=2nd etc)
            }
                });

html code
<body>
<div id="slideshow">
    <img src="http://www.sifasusa.com/Atimo_s/news/slide-show01.jpg">
</div>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-07T14:58:18.683

确定屏幕大小的真正简单的Javascript。

您可以调用以下各种函数来获取有关屏幕大小的信息：

```
screen.width
screen.height
screen.availWidth
screen.availHeight
screen.colorDepth
screen.pixelDepth 
```

所以对你来说，你需要做的就是`dimensions`改变

```
dimensions: [screen.height, screen.width] 
```

现在您的图像应该以这些尺寸显示。

# android - StringUtils 类在 Android 中不起作用

> ID：12404745
> 
> 赞同：7
> 
> 时间：2012-09-13T10:59:56.260
> 
> 标签：android, string-utils

我在 Android 代码中使用 StringUtils 类。但是产生了异常，即找不到类。但是我已经为那个类使用了 jar 文件。请帮我！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-12T11:19:18.287

尽量不要使用外部库。始终寻找 Android 替代品。

对于这种特定情况，您可以使用：[`android.text.TextUtils`](http://developer.android.com/reference/android/text/TextUtils.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:05:29.470

我的问题用下面的代码解决了，我们不需要使用 StringUtils jar 来添加我们的项目。

我创建自己的类，即用 StringUtils 替换“RanjitString”。

```
public class RanjitString {
public static String substringBetween(String str, String open, String close) {
    if (str == null || open == null || close == null) {
        return null;
    }
    int start = str.indexOf(open);
    if (start != -1) {
        int end = str.indexOf(close, start + open.length());
        if (end != -1) {
            return str.substring(start + open.length(), end);
        }
    }
    return null;
}
} 
```

并直接访问静态方法substringBetween：

```
String myxml="This is my xml with different tags";
String successResult = RanjitString.substringBetween(myxml,
                "<tag>", "</tag>"); 
```

这段代码对我有用...

# java - Java程序可以通过代理服务器建立JDBC连接吗

> ID：12404747
> 
> 赞同：8
> 
> 时间：2012-09-13T11:00:03.317
> 
> 标签：java, jdbc, proxy

我想通过代理服务器与位于我的网络外部的 Oracle DB 服务器通信。我可以通过带有代理设置的浏览器访问托管在同一台机器上的 Web 应用程序。一个简单的Java程序可以通过代理服务器建立JDBC连接吗？

**提供一个例子会更好**

问候。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T11:03:54.003

如果代理只是一个 HTTP 代理，那么没有。但如果代理传输 TCP/IP 流量，则可以。

如何做到这一点，请查看[如何设置 JVM 使用的代理](https://stackoverflow.com/questions/120797/how-do-i-set-the-proxy-to-be-used-by-the-jvm)或[http://docs.oracle.com/javase/6/docs/technotes/guides/net/proxies.html](http://docs.oracle.com/javase/6/docs/technotes/guides/net/proxies.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-10T18:52:36.673

Oracle JDBC（以及任何其他 JDBC 连接）不是基于 HTTP 的协议，因此代理必须在 TCP 层完成。

出于这个原因，你不能使用例如 Squid Proxy（它只在 HTTP 层做代理），但是还有很多其他的代理服务可以在 TCP 层工作：

*   nginx代理
*   代理服务器

在前者有一个很好的分步指南如何使用 NGINX [https://kwjrnl.wordpress.com/2015/07/27/tcp-proxy-with-nginx-for-jdbc-connection/](https://kwjrnl.wordpress.com/2015/07/27/tcp-proxy-with-nginx-for-jdbc-connection/)

# multithreading - 更改 Indy10 TCP ServerExecute 线程优先级以获得更快的执行速度？

> ID：12404749
> 
> 赞同：0
> 
> 时间：2012-09-13T11:00:11.133
> 
> 标签：multithreading, delphi, indy, lazarus

通常在使用 Delphi/Lazarus 线程时，可以更改线程的优先级，以便它可以更快地执行。

也就是说，是否可以对 Indy10 TCP Server 组件做同样的事情？如果是这样，怎么做？这样做是否可取？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T21:14:39.637

`TIdTCPServer`使用普通的 Delphi/Lazarus 线程。

如果您在 Windows 上运行，则可以调用 Win32 API`GetCurrentThread()`和`SetThreadPriority()`函数。`TThread`或者，您可以使用 Indy 的`SetThreadPriority()`（Indy 9 及更早版本）或`IndySetThreadPriority()`（Indy 10）功能设置对象的优先级。

如果您使用的是现代 Delphi 版本，则可以使用该`TThread.CurrentThread`属性来获取`TExternalThread`表示调用线程的对象。 `TExternalThread`是`TThread`后代，因此可以传递给`IndySetThreadPriority()`，或者您可以直接设置`TThread.Priority`属性。

如果你想直接访问 Indy 自己的`TThread`对象，可以这样做，这取决于你使用的是哪个版本的 Indy：

如果您使用的是 Indy 9 和更早版本，则服务器事件会提供一个`TIdPeerThread`对象指针。`TIdPeerThread`是`TThread`后代。很简单。

另一方面，如果您使用的是 Indy 10，它会竭尽全力隐藏/抽象您的线程。服务器事件现在提供一个`TIdContext`对象指针，而`TIdContext`不是线程本身。但一切都没有丢失。如果该`TIdTCPServer.Scheduler`属性指向一个`TIdSchedulerOfThread`派生组件（如果您不提供 a 则在内部`TIdTCPServer`使用），那么您可以将该属性类型转换为一个对象指针，然后访问该属性，它是一个对象指针。 是后代。`TIdSchedulerOfThreadDefault``Scheduler``TIdContext.Yarn``TIdYarnOfThread``TIdYarnOfthread.Thread``TIdThreadWithTask``TIdThreadWithTask``TThread`

# jquery - Android（4.1）浏览器中flexslider覆盖的下拉菜单

> ID：12404752
> 
> 赞同：0
> 
> 时间：2012-09-12T14:32:39.800
> 
> 标签：jquery, css

我为我的网站设置了一个响应式 WordPress，并且由于某种原因在 Android 上设置了一个响应式 WordPress，当我向下钻取它被 flexslider 覆盖的菜单时。它没有在 iOS Safari 或 Chrome 浏览器中执行此操作。在 css 媒体查询为较小的分辨率启动之前，它也不会发生在桌面上。任何线索可能是什么原因造成的？我的 Z 索引设置正确。如果您需要我的任何代码，请告诉我，这是网站：

[http://wp.oursaviorschurch.com](http://wp.oursaviorschurch.com)

编辑：我发现这仅在 4.1 Jelly Bean 上。我测试了一个运行 ICS 的设备，它运行良好。还在我的果冻豆设备上的第三方浏览器上尝试过它，它工作正常……这很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T20:51:20.110

我以前遇到过非常相似的东西，这都是因为可见幻灯片（在 woo-slider 中）的位置属性是使用相对设置的，将其更改为绝对，滑块仍然可以工作，但是 DOM 中更高的任何元素如果 z-index 和你的一样正确，那么使用绝对定位的现在可以出现在前面。

1.  修改第`flexslider.css`48 行的文件，将`'.slides'`容器设置为匹配子幻灯片的高度`350px`。

2.  修改`jquery-flexslider-min.js`文件替换：

    ```
    slider.slides.css({
        "width": "100%", 
        "float": "left", 
        "marginRight": "-100%", 
        "position": "relative"
    }); 
    ```

    和：

    ```
    slider.slides.css({
        "width": "100%", 
        "float": "left", 
        "marginRight": "-100%", 
        "position": "absolute"
    }); 
    ```

由于我没有 Android 设备，因此在提交答案之前无法对其进行测试。这仅通过通过 Chrome 检查器修改您的标记进行了测试，但它应该在当前使用的所有其他主要桌面和移动浏览器中工作相同。如果没有，请告诉我。

# django - Django外键难度

> ID：12404755
> 
> 赞同：0
> 
> 时间：2012-09-13T11:00:29.380
> 
> 标签：django, foreign-keys

我在 Django 中编写了以下模型，并想为在第一个类下面声明的类定义一个外键。Eclipse 显示错误。怎么做 ？

```
class address_type(models.Model):
 address_type_desc = models.CharField(max_length=100)

class customer_address(models.Model):
 address_type_code = models.ForeignKey(address_type, related_name='type_of_address') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:02:14.720

您实际上没有错误，但您可以使用引号：

```
class AddressType(models.Model):
 address_type_desc = models.CharField(max_length=100)

class CustomerAddress(models.Model):
 address_type_code = models.ForeignKey('AddressType', related_name='type_of_address') 
```

我还编辑了您的类名以符合 Python 中的规范。你应该阅读[pep-8](http://www.python.org/dev/peps/pep-0008/)，Python 的官方风格指南。

# c++ - 段错误的最小 C/C++ 程序？

> ID：12404759
> 
> 赞同：1
> 
> 时间：2012-09-13T11:00:45.017
> 
> 标签：c++, c, linux, segmentation-fault

我正在尝试设置我的服务器处理核心转储的方式。为了测试它，我需要一个总是段错误的程序。

是否有一个总是段错误的简单示例程序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T11:02:00.867

`main() { *(int *)0xdeadbeef = 37; }`应该这样做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T11:02:13.173

试试这个：

```
long* ptr = 0x0; //-- you can also use other random values and likely you will segfault
printf("%f", *ptr); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-25T08:52:41.330

`main;`

是可移植的，并且 5chars 中的段错误。
这是一个变量声明 -`int`类型是隐含的（从 B 语言复制的功能）并且`0`是默认值。执行时，它会尝试执行一个数字（数字不可执行），并导致`SIGSEGV`.

资料来源：[https ://codegolf.stackexchange.com/questions/4399/shortest-code-that-raises-a-sigsegv](https://codegolf.stackexchange.com/questions/4399/shortest-code-that-raises-a-sigsegv)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-13T11:03:40.833

你可以试试：

```
main() {
char *p = NULL;
char c = *p;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-13T11:04:29.350

这应该死：

```
int main() {
    char *die;
    printf("%d",(int *)die * 200);
    return 0;
} 
```

编辑：

```
int main() {
    char *die;
    int killer = 200;
    while(1) {
       printf("%d",(int *)die * killer);
       killer = killer * killer;
    }
    return 0;
} 
```

# appfabric - Appfabric 缓存 - 序列化

> ID：12404761
> 
> 赞同：4
> 
> 时间：2012-09-13T11:00:48.777
> 
> 标签：appfabric, appfabric-cache

我找不到这个简单问题的答案。AppFabric 缓存中使用了哪种序列化程序？谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T11:04:22.627

它是 NetDataContractSerializer。在[这里找到](http://msdn.microsoft.com/en-us/library/gg186017%28v=azure.10%29.aspx)

# iphone - 是否可以使用以前的 SDK (iOS5) 为 iPhone 5 屏幕尺寸构建应用程序？

> ID：12404762
> 
> 赞同：3
> 
> 时间：2012-09-13T11:00:49.323
> 
> 标签：iphone, ios6

最新的SDK（Xcode 4.5）不支持armv6，我现在需要支持，所以不想升级Xcode。我可以支持 iPhone 5 的屏幕尺寸并在 iPhone 5 上从以前的 Xcode (4.3.2) 制作一个非信箱模式的应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T13:42:03.833

[编辑] Brad Larson 的评论，改变一切：Apple 现在明确拒绝使用 iOS 5.x SDK 和 iPhone 5 默认图像提交的应用程序，并说“您的应用程序包含一个带有尺寸修饰符的启动图像，该修饰符仅适用于应用程序使用 iOS 6.0 SDK 或更高版本构建。”

您可以通过在资源中添加 640x1136 Default-568h@2x.png 来构建与 iPhone 5 屏幕尺寸兼容的应用程序（如果 Info.plist 中定义的初始屏幕是 Default.png）。低于 4.5 的 Xcode 将允许您在 iOS6 设备上进行测试，这对于 Apple 来说是新的，当 iOS5 到来时，所有以前版本的 Xcode 都与 iOS5 不兼容（无法在 iOS5 设备上测试）。所以，是的，您可以从 Xcode 4.4 或 4.3 为 iOS6 和 iPhone5 屏幕尺寸进行开发。

# wcf - 如何删除 ServiceHost 持有的大对象堆上的 Byte[]

> ID：12404775
> 
> 赞同：2
> 
> 时间：2012-09-13T11:01:22.657
> 
> 标签：wcf, http, memory, servicehost, large-object-heap

我有一个 WCF 服务，它使用 HTTP 协议。当一个特别大的查询到达系统时，它会创建一个大的 Byte[]，它通过缓冲区引导到 HttpChannelListener 并最终到达服务主机本身。即使在 WCF 事务完成后，它仍然存在。这反过来会导致大型对象堆碎片，最终导致应用程序抛出 OOM 异常。

这是 Byte[] 的路径：ServiceHost.channelDispatchers.items._items[0].listener.innerChannelListener.typedListener.bufferManager.innerBufferManager.bufferPools[13].pool.globalPool.items._array[0]

系统对事务使用缓冲的 WCF 通信以确保其可靠。

我能做些什么来防止这些大对象留在内存中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T17:32:10.990

您需要调整 WCF 配置的`MaxBufferPoolSize`and`MaxBufferSize`属性。您可能需要对适合您的应用程序性质的最佳值进行试验，这取决于您的消息大小、并发请求数等。

您也可以设置`MaxBufferPoolSize`为 0 以禁止缓冲池。它仍然缓冲，但缓冲区没有池化。确定这是否真的是您想要的，因为缓冲池确实具有减少内存分配的优势。

[这是对这些设置的实际含义](http://social.msdn.microsoft.com/Forums/en/wcf/thread/d6e234d3-942f-4e9d-8470-32618d3f3212/)以及[实际需要它的原因](http://kennyw.com/work/indigo/51)的一些解释。

# java - OSGIfied jar 会像普通 jar 一样工作吗？

> ID：12404780
> 
> 赞同：2
> 
> 时间：2012-09-13T11:01:47.667
> 
> 标签：java, jar, osgi, manifest

我正在评估修改一组通用 Java 库的 MANIFEST.MF 文件的可能性，以使它们成为有效的 OSGI 包（通过添加所需的标头）。

然而，这对我来说意味着什么……这些 .jar 会像非 OSGIfied 的那些在非 OSGI 环境中那样无缝地工作吗？

这些 jar 被部署在一系列应用服务器中，从 IBM 的 WebSphere 到 JBoss 或 Tomcat。此 OSGIfication 是否会触发这些应用程序服务器对这些 .jar 的默认行为的非自愿更改？

是的，这些是具有外部依赖项的 jars（在可能不是 OSGIfied 的开源项目上），它们也可以作为其他项目的依赖项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T11:10:30.753

它将产生零影响。OSGi 特性仅在 OSGi 特定清单条目中捕获；它们对普通的 JVM 类加载器没有任何意义。事实上，许多开源 JAR 已经被 OSGi 化了一段时间，如果你不使用它，你不需要知道它有。想到的一个是Javolution

# regex - 正则表达式以小写字母开头，以小写字母或数字结尾，中间是小写字母、数字和下划线

> ID：12404781
> 
> 赞同：2
> 
> 时间：2012-09-13T11:01:55.607
> 
> 标签：regex

这是我的表达：`^[a-z][a-z0-9_]+[a-z0-9]$`

现在它什么都不匹配。我如何使它匹配`ems_agencies`但不匹配`ems_agencies_`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T11:18:54.643

如果它“不匹配任何东西”，那么您可能使用了错误的正则表达式方言。是 ERE的`+`一个元素，在 BRE 中不起作用。例如，如果您将其与`grep`命令一起使用，那么您需要将其作为`egrep`或使用该`-E`选项来运行。

```
$ printf 'ems_agencies\nems_agencies_\n' | egrep '^[a-z][a-z0-9_]+[a-z0-9]$'
ems_agencies
$ printf 'ems_agencies\nems_agencies_\n' |  grep '^[a-z][a-z0-9_]+[a-z0-9]$'
$ 
```

如果您告诉我们您使用此正则表达式的环境，它可能有助于缩小答案范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T23:09:18.880

在某些情况下，可以将 ERE 转换为 BRE。例如`[a-z0-9]+`，你可以写而不是写`[a-z0-9][a-z0-9]*`。这将以牺牲可读性为代价在所有正则表达式实现中普遍适用。

```
printf "ems_agencies\nems_agencies_\n" | grep '^[a-z][a-z0-9_][a-z0-9_]*[a-z0-9]$'
ems_agencies 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-13T11:10:28.533

你的表达效果很好。见这里：[http ://regex101.com/r/gM1zM2](http://regex101.com/r/gM1zM2)

供将来参考：`[0-9]`与 相同`\d`且`[a-z0-9_]`等于`\w`。请记住，虽然这`\w`是*不区分大小写的*

# objective-c - 有什么方法可以检索 Twitter 用户的电子邮件 ID（Objective-c）？

> ID：12404784
> 
> 赞同：0
> 
> 时间：2012-09-13T11:02:04.407
> 
> 标签：objective-c, email, twitter

[https://dev.twitter.com/docs/faq#6718](https://dev.twitter.com/docs/faq#6718)

如果 twitter 没有提供任何 API，那么foursquare 是如何检索它们的呢？

*   Foursquare 可以列出用户在 Twitter 上注册的foursquare-friends。
*   它还提供API，显示用户的“foursquare 好友列表”以及用户的“twitter 关注者列表”中经常出现的用户的好友。

在上述两种情况下，只能通过电子邮件进行比较。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:12:07.650

您无法从 Twitter 收到电子邮件。当然，除非要求对方提供。

FourSquare 不需要访问电子邮件。匹配基于 Twitter 名称，而不是电子邮件。

在你说的评论中

> 我的朋友在 Twitter 和 Foursquare 都注册了。她的个人资料中唯一常见的字段是电子邮件 ID。没有其他字段匹配。她在我上面提到的第二个名单中。

但你承认

> 在她注册 FourSquare 后，进入她的个人资料，点击好友 -> 添加好友 -> 选择 Twitter。她被要求登录 Twitter，因此她做到了

这意味着现在 FourSquare 可以访问她的 Twitter 以及您的 Twitter。Foursquare 知道她的 Twitter id 和您的 Twitter id，并且可以访问 Twitter（使用 Twitter API）以查看谁在关注谁。换句话说，当你说

> 她的个人资料中唯一常见的字段是电子邮件 ID。没有其他字段匹配。

你错了。一旦她将她的 FourSquare 个人资料与她的 Twitter 连接起来，所有可通过 Twitter API 访问的数据实际上（至少可能）是她 Foursquare 个人资料的一部分。

但她需要明确连接这两个个人资料（当她选择使用 Twitter 将朋友添加到她的 Foursquare 个人资料时，她就这样做了）。

# asp.net-mvc - MVC、强类型视图和实体框架困境

> ID：12404791
> 
> 赞同：2
> 
> 时间：2012-09-13T11:02:33.680
> 
> 标签：asp.net-mvc, entity-framework, linq-to-entities

我已经阅读了很多关于 MVC 架构中视图中的逻辑的问答，并且在大多数情况下，我同意业务逻辑不应该存在于视图中。然而话虽如此，当我将微软的 MVC 框架与实体框架结合使用时，我不断质疑我的方法，因为单个实体可以轻松访问外键关系，这最终导致我在一个内联执行 Linq to Entities 查询看法。

例如：

如果我有以下两个实体：

产品（[PK]ProductId、标题、金额）

图片（[PK]ImageId、[FK]ProductId、ImageTitle、DisplayOrder）

假设我有一个强类型的产品视图，并且我想显示主图像（最低显示顺序），那么我可以在视图中执行以下操作：

```
@{
     Image image = (from l in Model.Image
                    orderby l.DisplayOrder
                    select l).FirstOrDefault();
} 
```

这是一个用于演示目的的简单示例，但这肯定会开始扭曲与 MVC 架构相关的规则，但另一方面，在 Controller 中执行此操作，然后（天堂禁止）将其插入 ViewBag 或 ViewData 肯定只是像犯罪一样多，并且管理多个不同的相关课程变得痛苦。

我曾经为复杂的模型创建自定义类，但它既耗时又丑陋，而且我不再认为实体框架可以快速轻松地将视图定义为主要模型（在本例中为产品）和然后使用 Linq 查询轻松检索产品的所有外围组件。

我很想知道其他人如何处理这种情况。

编辑：

我也经常做这样的事情：

```
@foreach(Image i in Model.Image.OrderBy(e => e.DisplayOrder).ToList())
{
   <img ... />
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:04:57.650

我将采用“模型的自定义类”的方式，我同意它既费时又平凡，因此创建了[http://automapper.codeplex.com/](http://automapper.codeplex.com/)之类的工具来陪伴您完成这项任务。

总的来说，我和你有类似的感受。阅读一些内容说最好让您的域模型与您的存储无关，然后为您的视图模型提供与域模型不同的类，然后看到库实际上似乎“促进”了简单的方法（域类上的数据注释似乎比 EF fluent interface 等更简单）。

至少我们有我猜的选择！

**模型绑定**还有一个问题是，当您想要 POST 回模型数据并将其存储在数据库中时，您需要小心并确保 MVC 模型绑定器正确绑定所有字段。否则你可能会丢失一些数据。使用视图的自定义模型，它可能会更简单。

**验证** MVC 为您提供了一种使用属性进行验证的方法，当您使用视图模型时，您可以使用此类注释自由地污染它，因为它是特定于视图的（并且验证也应该是特定于视图/控制器操作的）。当您使用 EF 类时，您将使用不相关（并且可能冲突）的逻辑污染这些类。

# c++ - 如何重新初始化 Google 测试框架

> ID：12404797
> 
> 赞同：0
> 
> 时间：2012-09-13T11:03:02.740
> 
> 标签：c++, visual-studio-2010, googletest

继续上[一个问题](https://stackoverflow.com/questions/12401618/insert-an-element-to-a-vector-at-run-time-c-throwing-runtime-error)。

该要求适用于 Google 测试。一旦我谷歌测试轨道测试案例`"Rasmi"`。它应该重新运行，`Hi`然后它将运行`Rasmi`。说清楚：-

```
vect.push_back("Hello"); 
vect.push_back("Hi"); 
vect.push_back("Rasmi"); 
for(vect<string>::iterator it = vect.begin(); it != vect.end(); ++it) 
{  
if(*it == "Rasmi") // If it encounters "Rasmi"     
{ 
//it--;    
int index = it - vect.begin ();       
vect.insert(vect.begin()+2, "Hi");  
it = vect.begin () + index;    
}    
cout << *it; 
} 
```

在这种情况下，当它重新运行测试用例时，`Hi`它只是复制并粘贴先前执行的测试用例。这就是测试用例`Rasmi`失败的原因。但是，如果所有运行都没有任何条件，例如

```
Hello->Hi->Rasmi... The execution becomes successful. 
```

请帮助我如何重新初始化 GoogleTest。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:09:22.077

如果您使用的是单例，那么之前的测试可能会留下一些东西（我们目前工作的地方有这个问题）。

每个测试如何在退出之前清理它对全局对象所做的任何更改？

# jquery - 如何防止“画布”内的单点触摸 - IOS应用程序

> ID：12404801
> 
> 赞同：2
> 
> 时间：2012-09-13T11:03:17.123
> 
> 标签：jquery, ios, canvas, touch

我需要防止在画布内进行单次触摸。但是对于 IOS 应用程序，双/多点触控应该没有问题

请找到我的触摸事件的 JS 代码

```
 onTouchStart: function(e, win, eventInfo) {
    if(!this.config.panning) return;
    if(this.config.panning == 'avoid nodes' && (this.dom? this.isLabel(e, win) : eventInfo.getNode())) return;
    this.pressed = true;
    this.pos = eventInfo.getPos();
    var canvas = this.canvas,
        ox = canvas.translateOffsetX,
        oy = canvas.translateOffsetY,
        sx = canvas.scaleOffsetX,
        sy = canvas.scaleOffsetY;
    this.pos.x *= sx;
    this.pos.x += ox;
    this.pos.y *= sy;
    this.pos.y += oy;
  },

  onTouchMove: function(e, win, eventInfo) {
    if(!this.config.panning) return;
    if(!this.pressed) return;
    if(this.config.panning == 'avoid nodes' && (this.dom? this.isLabel(e, win) : eventInfo.getNode())) return;
    var thispos = this.pos, 
        currentPos = eventInfo.getPos(),
        canvas = this.canvas,
        ox = canvas.translateOffsetX,
        oy = canvas.translateOffsetY,
        sx = canvas.scaleOffsetX,
        sy = canvas.scaleOffsetY;
    currentPos.x *= sx;
    currentPos.y *= sy;
    currentPos.x += ox;
    currentPos.y += oy;
    var x = currentPos.x - thispos.x,
        y = currentPos.y - thispos.y;
    this.pos = currentPos;
    this.canvas.translate(x * 1/sx, y * 1/sy);
  },

  onTouchEnd: function(e, win, eventInfo) {
    if(!this.config.panning) return;
    this.pressed = false;
  },
  onTouchCancel: function(e, win, eventInfo) {
        if(!this.config.panning) return;
        this.pressed = false;
      } 
```

从上面的代码中，单点触控和多点触控都已执行，但我只想在我的画布内为 IOS 应用程序执行单点触控。请指教！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:10:03.917

根据苹果文档[Safari Web Connect Guide Handling Touches](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html)，您可以从事件中找到触摸次数：

```
 event.touches.length 
```

或者，在您的情况下，在您的示例代码的功能中：

```
 e.touches.length 
```

如果结果为 1，则您有一个单点触摸事件，您可以简单地忽略它。如果它不是 1，则您有一个多点触控事件，您可以对其进行处理或将其传递给默认处理。

# sql-server-2008 - 如何从 MS Access VBA 中调用 SQL Server 存储过程

> ID：12404805
> 
> 赞同：2
> 
> 时间：2012-09-13T11:03:28.500
> 
> 标签：sql-server-2008, ms-access, stored-procedures, ms-access-2010

我有一个带有参数但不返回任何内容的存储过程。如何从 MS Access 中调用它？

编辑 - 在 Remou 的帮助下，我已经开始工作了：

```
Set cnn = New adodb.Connection
cnn.ConnectionString = 
   "driver=SQL Server;server=SERVER\SERVER;database=a_db;Trusted_Connection=Yes"

cnn.Open cnn.ConnectionString

Set cmd = New adodb.Command
cmd.ActiveConnection = cnn
cmd.CommandType = adCmdStoredProc
cmd.CommandText = "stprMoveDataSet"

Set param = cmd.CreateParameter
                ("DataSetID", adInteger, adParamInput, 6, stDataSet)
cmd.Parameters.Append param
Set param = cmd.CreateParameter
                ("Destination", adChar, adParamInput, 2, stDestination)
cmd.Parameters.Append param

rs.CursorType = adOpenStatic
rs.CursorLocation = adUseClient
rs.LockType = adLockOptimistic
rs.Open cmd 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T12:29:17.530

这是一个可能会有所帮助的大纲。稍后我可能会回来提供更多详细信息。它并不特定于您的情况，但它可能会让您继续前进:)

```
Public dbconn As ADODb.Connection
Dim cmd As New ADODb.command
Dim rs As New ADODb.Recordset
Dim param As New ADODb.Parameter

Set dbconn = New ADODb.Connection
dbconn.ConnectionString = GetServerCon

dbconn.Open dbconn.ConnectionString

Set cmd = New ADODb.command
cmd.ActiveConnection = dbconn
cmd.CommandType = adCmdStoredProc
cmd.CommandText = "insert_user"

Set param = cmd.CreateParameter(_
   "username", adVarChar, adParamInput, 50, Environ("UserDomain") & "dddddddd\" _
   & Environ("Username"))
cmd.Parameters.Append param

rs.CursorType = adOpenStatic
rs.CursorLocation = adUseClient
rs.LockType = adLockOptimistic
rs.Open cmd 
```

# audio - Tumblr 音频和视频 + 无限滚动

> ID：12404807
> 
> 赞同：1
> 
> 时间：2012-09-13T11:03:34.443
> 
> 标签：audio, video, scroll, tumblr, infinite

我经历了一堆已经问过/回答过的问题，但它仍然对我不起作用。这就是我到目前为止所拥有的。

static.tumblr.com/epkyugq/C0ym8qnir/jquery-1.7.1.min.js

masonry.desandro.com/jquery.masonry.min.js

masonry.desandro.com/js/jquery.infinitescroll.min.js

static.tumblr.com/epkyugq/4fmmajupw/decker.js

我不确定我做错了什么，或者它是否正确并且需要添加一些东西，但如果有人能向我展示如何做的分步教程，我将非常感激。我是一个视觉型的人，所以我需要查看所有的编码。感谢您花时间阅读本文并感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:14:05.797

您的修复发生在无限滚动脚本之外。您应该将其更改为包含它，如下所示：

```
// other stuff up here
}, function( newElements ) {

    var $newElems = $(newElements).css({
        opacity: 0
    });

    $newElems.imagesLoaded(function () {
        $newElems.animate({
            opacity: 1
        });
        $container.masonry('appended', $newElems, true);
    });

    /* repair video players*/
    $newElems.find('.video').each(function(){
        var audioID = $(this).attr("id");
        var $videoPost = $(this);
        $.ajax({
            url: '/api/read/json?id=' + audioID,
            dataType: 'jsonp',
            timeout: 10000,
            success: function(data){
                $videoPost.html(data.posts[0]["video-player"]);
            }
        });
    });

    /* repair audio players*/
    $newElems.find('.player').each(function(){
        var audioID = $(this).attr("id");
        var $audioPost = $(this);
        $.ajax({
            url: '/api/read/json?id=' + audioID,
            dataType: 'jsonp',
            timeout: 10000,
            success: function(data){
               $audioPost.html(data.posts[0]["audio-player"]);
            }
        });
    });
}); 
```

我正在使用`$newElems.find()`，因为我们只想加载页面上的新帖子。如果您这样做`$('.video')`，您将浏览*所有*帖子，包括已经加载的帖子。

# php - Php、Spl、ArrayObject、ArrayObject::STD_PROP_LIST

> ID：12404808
> 
> 赞同：1
> 
> 时间：2012-09-13T11:03:35.117
> 
> 标签：php, spl, arrayobject

我试图理解**[ArrayObject::STD_PROP_LIST](http://php.net/manual/en/class.arrayobject.php)** const，正如它在手册中定义的那样：

**当作为列表（var_dump、foreach 等）访问时，对象的属性具有它们的正常功能。**

我写了这段代码：

```
$array = array(5,7,9,3,6,5,4);
$arrayObj = new ArrayObject($array);
var_dump($arrayObj);
$arrayObj2 = new ArrayObject($arrayObj->getArrayCopy(), ArrayObject::STD_PROP_LIST);
var_dump($arrayObj2); 
```

在第一个 var_dump 我们可以看到数组元素，但在第二个 var_dump 你看不到它们，我还测试了 foreach 和 foreach 循环对 arrayObj 对象和 arrayObj2 对象都有效。

如果有人可以向我解释什么是正常功能以及为什么没有显示第二个 var_dump 元素，谢谢大家，祝您有美好的一天。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:34:44.300

确定您使用的是任何 <= PHP 版本 5.3.8 .. 还检测到一个错误，您将获得以下信息

```
 object(ArrayObject)#1 (7) { [0]=> int(5) [1]=> int(7) [2]=> int(9) [3]=> int(3) [4]=> int(6) [5]=> int(5) [6]=> int(4) } 
    object(ArrayObject)#2 (0) { } 
```

如果您在 PHP 5.3.10 上运行，您将获得以下信息

```
 object(ArrayObject)#1 (1) { ["storage":"ArrayObject":private]=> array(7) { [0]=> int(5) [1]=> int(7) [2]=> int(9) [3]=> int(3) [4]=> int(6) [5]=> int(5) [6]=> int(4) } } 
    object(ArrayObject)#2 (1) { ["storage":"ArrayObject":private]=> array(7) { [0]=> int(5) [1]=> int(7) [2]=> int(9) [3]=> int(3) [4]=> int(6) [5]=> int(5) [6]=> int(4) } } 
```

我认为你应该升级你的 PHP 版本

# .net - 如何将数据从 Excel 导入 SQL Server 2008

> ID：12404809
> 
> 赞同：0
> 
> 时间：2012-09-13T11:03:37.357
> 
> 标签：.net, vb.net, sql-server-2008, excel, stored-procedures

我实际上想使用从我的 VB.NET 应用程序调用的 T-SQL 存储过程将数据从 Excel 文件导入现有数据库（我使用 SQL Server 2008 和 VB.net）。

那么是否有可能仅通过编码（不使用任何其他工具 SSIS 或 SS 导入和导出向导）来做到这一点，如果是的话，有人可以给我一个简单的代码示例。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:54:16.090

尝试 ADO.NET

[如何使用 ADO.NET 通过 Visual Basic .NET 检索和修改 Excel 工作簿中的记录](http://support.microsoft.com/kb/316934)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T10:31:07.827

如果要将数据导入现有的数据库和表，可以使用 sqlBulkCopy。看到[这个 sqlBulkCopy](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)

如果你需要在复制数据之前在数据库sql中创建表，你可以使用查询创建表，创建表的示例函数，你可以[看这里](http://darrylagostinelli.com/2011/06/27/create-a-sql-table-from-a-datatable-in-c-net/)

对于文件 Excel 的连接字符串，您可以在[ConnectionString中找到](http://www.connectionstrings.com/)

对不起，如果我的英语不好..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T11:09:15.683

您可以将您的 excel 文件保存为 CSV，然后使用批量插入将其导入 Sql Server。请参阅[此 StackOverflow 问题](https://stackoverflow.com/questions/924733/use-bcp-to-import-csv-file-to-sql-2005-or-2008)。

# google-fusion-tables - 需要创建一个具有位置搜索和切换单独融合表覆盖的工具

> ID：12404812
> 
> 赞同：1
> 
> 时间：2012-09-13T11:03:42.223
> 
> 标签：google-fusion-tables

我有三个单独的 Fusion Tables，每一个都包含不同政治区（国会、州议会和州参议院）的形状文件。我要做的是创建一个工具，非常类似于 Derek Eder 的演示 (http://derekeder.com/searchable_map_template/demo/index.html)，它允许用户找到那里的地址，然后可以选择其中一个叠加层（使用单选按钮而不是 Derek 示例中的复选框）以查看它们所在的区域。

从之前提出的各种问题以及我在网上查看的其他示例中，我不一定会看到一些让我相信代码示例正在获取多个表数据，而只是从一个表中解析特定数据的东西大桌子。

我想我只是在寻找关于从哪里开始的指导。我描述的工具可以很容易地与三个单独的表格组合在一起，还是需要将这些表格组合在一起？此外，我需要保留地址搜索显示的位置标记和相同的坐标，在各个图层之间切换时保留缩放级别。在我看来，我可以想象后一点对于单个表来说并不困难，但是我担心在单独的表之间切换时保持该视图到位。

任何人都可以提供的任何和所有帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:10:47.067

我有碎片：

*   用于对表格进行空间搜索的地理编码地址的标记 [示例 1](http://www.geocodezip.com/webknows_net_schoolboundarynewC.html) [示例 2](http://www.geocodezip.com/v3_FusionTables_geocoder_PointInPolygon.html)

*   通过查询 FusionTable 缩放到多边形（使用两个表）[示例](http://www.geocodezip.com/geoxml3_test/www_advocacy_ucla_edu_Assembly_MapC.html)

除非我在您的帖子中遗漏了您的要求有什么奇怪的地方，否则应该很容易做到。

# .htaccess - 使 .htm 隐藏

> ID：12404814
> 
> 赞同：-2
> 
> 时间：2012-09-13T11:03:48.423
> 
> 标签：.htaccess

需要使用 .htaccess将网站[http://www.example.com/testimonials.htm](http://www.example.com/testimonials.htm) 改为[http://www.example.com/testimonials 。](http://www.example.com/testimonials)

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:25:03.133

试试这个

```
<IfModule mod_rewrite.c>
  RewriteEngine on

  RewriteCond %{REQUEST_URI} !.*\.
  RewriteRule ^(.*) /$1.htm [L,QSA]
</IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T12:08:20.277

试试这个 ：

```
RewriteEngine on

RewriteBase /

RewriteRule (.*)/$ $1 [L,QSA]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !\.htm$
RewriteRule ^(.*)$ $1.html [L,QSA] 
```

# c# - 使用 SqlDependency 类在 C# 中使用 EntityFramework 填充 ICollectionView

> ID：12404816
> 
> 赞同：0
> 
> 时间：2012-09-13T11:03:47.980
> 
> 标签：c#, .net, wpf, sqldependency, icollectionview

我想在将新产品添加到数据库时刷新具有某些产品的 ICollectionView 对象。

如何在 C# 中实现这一点，我正在使用 DAL 的 EntityFramework。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:47:06.267

我发现“Harry von Borstel”的[以下帖子非常有帮助](http://www.codeproject.com/Articles/233770/AutoRefresh-Entity-Framework-data-using-SQL-Server)

# php - 如何为用户发布 Facebook 应用程序

> ID：12404819
> 
> 赞同：0
> 
> 时间：2012-09-13T11:03:53.190
> 
> 标签：php, facebook

我第一次在 php 中开发了一个 facebook 应用程序。它工作正常。这个应用程序只为我的帐户运行，我不明白如何为我的朋友或用户发布这个应用程序。我去隐私设置->应用程序设置并在“代表你的帖子”上设置“所有人”，但它不起作用。请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:45:23.937

我认为您尚未在服务器上安装 ssl。Facebook 需要 https 来申请。如果你把你的网址贴在这里会更好。

# php - TypeError: $(".slide-out-div").tabSlideOut 不是函数

> ID：12404821
> 
> 赞同：1
> 
> 时间：2012-09-13T11:03:55.520
> 
> 标签：php, javascript, jquery

我基本上是在尝试遵循[http://www.building58.com/examples/tabSlideOut.html](http://www.building58.com/examples/tabSlideOut.html)教程，但我遇到了那个错误，问题是什么？

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js" type="text/javascript"></script>

<script src="http://tab-slide-out.googlecode.com/files/jquery.tabSlideOut.v1.3.js"></script> 
```

> ```
> <style type="text/css" media="screen">  
>     .slide-out-div {
>      padding: 20px;
>      width: 250px;
>      background: #f2f2f2;
>      border: #29216d 2px solid;
>      }
>      </style> 
> ```

```
 <script>
         $(function(){
             $('.slide-out-div').tabSlideOut({
                 tabHandle: '.handle',                              //class of the element that will be your tab
                 pathToTabImage: 'images/contact_tab.gif',          //path to the image for the tab (optionaly can be set using css)
                 imageHeight: '122px',                               //height of tab image
                 imageWidth: '40px',                               //width of tab image    
                 tabLocation: 'left',                               //side of screen where tab lives, top, right, bottom, or left
                 speed: 300,                                        //speed of animation
                 action: 'click',                                   //options: 'click' or 'hover', action to trigger animation
                 topPos: '200px',                                   //position from the top
                 fixedPosition: false                               //options: true makes it stick(fixed position) on scroll
             });
         });

         </script>
        <div class="slide-out-div">
        <a class="handle" href="http://link-for-non-js-users.html">Content</a>
        <h3>Contact me</h3>
        <p>Thanks for checking out my jQuery plugin, I hope you find this useful.
        </p>
        <p>This can be a form to submit feedback, or contact info</p>
    </div> 
```

> [04:54:57.945] TypeError: $(".slide-out-div").tabSlideOut 不是函数@

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T11:14:25.553

如果您的浏览器中有调试器，大多数现代浏览器都会按 F12 进行检查，然后您可以查看所有脚本是否正确加载，并且`typeof`您可以使用该函数检查 tabSlideOut 是什么（未定义或函数）。

我想你是从这里复制粘贴的：[http](http://www.building58.com/examples/tabSlideOut.html) ://www.building58.com/examples/tabSlideOut.html 。您能否仔细检查您是否正确复制了所有内容，包括 css？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:07:04.497

尝试使用

```
jQuery(function() {

}); 
```

而不是 $

# image - 是否有向移动设备和 HIDPI/视网膜设备提供图像的良好做法？

> ID：12404822
> 
> 赞同：2
> 
> 时间：2012-09-12T14:23:53.417
> 
> 标签：image, wordpress, retina-display, image-size

我正计划创建一个博客，我正在考虑如何在不过多影响移动设备加载时间的情况下以最佳质量提供图像。

我的内容栏是 aprox。768 个显示点宽，我使用视网膜 Macbook 发布屏幕截图，因此图像的宽度至少为 1500 像素。其他 Retina/HIDPI 用户应该看到最适合他们的版本。

对于这种情况，是否有推荐的最佳实践？我说的只是内容图像（`<img />`）；没有 CSS 背景。一个真正的 WordPress 解决方案，它根据上传的员工图像提供图像会很棒。

我过去使用过[自适应图像](http://adaptive-images.com/)，但它不区分 HIDPI 和普通客户端。[其他解决方案](https://wordpress.stackexchange.com/a/56903/18760)适用于视网膜，但不适用于不同的屏幕尺寸。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T15:02:26.093

不，没有好的方法可以做到这一点。这不是 WordPress 的错，而是整个网络的状态。基本上，网络上的 HiDPI 目前是一个大黑客，网络尚未正确适应它。

基本上，没有什么好的方法可以在 HTML 中指定多个分辨率图像，以便浏览器可以用来确定要显示的正确图像。CSS 有效，但前提是您使用图像作为背景。如果您正在处理 IMG，那么您必须依靠 Javascript 来完成这项工作，这取决于您的方法有各种缺点。

将来，当浏览器开始采用指定多分辨率图像的方法时，这将不是什么大问题。

编辑：这值得更多解释。

使用 JS 执行此操作的基本问题是它依赖于图像替换技术。JS 代码通过它拥有的任何逻辑在页面上找到 IMG，然后将它们替换为来自其他文件的更高分辨率版本。无论使用什么方法来做到这一点，它都有两个主要缺点：

*   首先，初始图像以低分辨率加载，然后在替换图像时再次以高分辨率加载。这意味着额外的带宽使用，并且考虑到大多数 HiDPI 设备目前都是移动设备，在这些设备上浪费这种带宽没有多大意义。

*   其次，图像一般先以低分辨率显示，然后用高分辨率图像代替。这意味着在 HiDPI 屏幕上显示模糊图像有一两秒钟，然后在替换发生时它“弹出”成为焦点。这是一个非常糟糕的效果。

存在其他方法，您可以首先简单地提供正确的图像，但它们也有缺点。

*   用户代理的服务器端浏览器检测首先是一种非常糟糕的做事方式，最好避免仅仅因为野外有太多不同的代理，维护它们的列表几乎是不可能的。但是，如果你想经历它的痛苦，这种方法是可行的。

*   或者，可以让浏览器中的 Javascript 检测浏览器的设备像素比并将其设置在 Cookie 中以返回到服务器。然后，服务器可以使用此 cookie 来提供正确分辨率的图像。这可行，但不可靠，因为许多移动用户代理未能正确设置和返回 cookie，即使在那些设置和返回 cookie 的情况下，高分辨率图像也只会在第二次访问页面时显示。第一印象是低分辨率的，一般来说并不好。

正如你所看到的：它只是一路黑下来。直到浏览器能够被告知特定 IMG 存在多个版本及其参数，然后允许自己选择，那么这些是唯一的方法。但是，如果实现了建议的 HTML5“srcset”或 PICTURE 标签之类的东西，那么我们将有更好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T17:47:53.387

在考虑了一段时间之后，我必须提供两种方法来解决（部分）这个问题（部分）。仍然：仔细阅读@Otto的答案。它有很多深入的细节是有原因的。

# Javascript检测

[我写了一个关于“如何为附件添加默认图像”](https://wordpress.stackexchange.com/questions/64763/the-post-thumbnail-fallback-using-hooks/64817#64817)的答案。您可以更改过滤器回调以始终添加简单的 png/gif（仅具有背景颜色）而不是普通图像或缩略图。这将帮助您提供一个极小的图像（可能低于 1kB - smushIt 用于救援），用户代理/浏览器将在第一次加载时缓存该图像，然后简单地插入彼此调用图像。

然后，简单地显示像素密度......

```
var dpr = 1;
if ( window.devicePixelRatio !== undefined )
    dpr = window.devicePixelRatio;

if ( dpr > 1 ) {
    // High pixel density pixel displays
} 
```

…当 DOM 完全加载时交换图像。

# CSS 路由

为不同的像素密度显示添加样式表并不难：

```
// For default/low density pixel displays only: 
wp_enqueue_style(
     'low_density_styles'
    ,trailingslashit( get_stylesheet_directory_uri() ).'low_density.css'
    ,array()
    ,filemtime( locate_template( 'low_density.css' ) )
    ,'screen'
);

// For high density pixel displays only: 
$media  = 'only screen and (min--moz-device-pixel-ratio: 2), ';
$media .= 'only screen and (-o-min-device-pixel-ratio: 2/1), ';
$media .= 'only screen and (-webkit-min-device-pixel-ratio: 2), ';
$media .= 'only screen and (min-device-pixel-ratio: 2)';
wp_enqueue_style(
     'high_density_styles'
    ,trailingslashit( get_stylesheet_directory_uri() ).'high_density.css'
    ,array()
    ,filemtime( locate_template( 'high_density.css' ) )
    ,$media
); 
```

现在您可以简单地在高/低密度图像之间切换 - 用于您的默认图像（标题、徽标等）。这不适用于帖子类型的附件（再次：请参阅@Otto 答案）。

# ios5 - 如何使用 Twitter api 发推文

> ID：12404826
> 
> 赞同：0
> 
> 时间：2012-09-13T11:03:58.773
> 
> 标签：ios5, mgtwitterengine

我有关于使用 twitter api 的问题。如何在我的应用程序中使用 twitter 应用程序？因为我已经用过[这个](http://mobile.tutsplus.com/tutorials/iphone/twitter-api-iphone/)那个[。](http://www.icodeblog.com/2010/09/16/dealing-with-the-twitter-oauth-apocalypse/)使用这些链接，我可以验证我的 Twitter 应用程序并获得令牌访问权限，但不能发布推文。它给出类似**OAuthTwitterDemo[26757:bf03] Request B4EA76F7-18A2-41EB-940B-7DD138E9389D failed with error: Error Domain=HTTP Code=401 "The operation could not be completed. (HTTP error 401.)" 之类的消息**

我正在使用 MGTwitterEngine SDK。所以告诉我解决我的问题。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:46:36.653

问题在应用程序中是优先考虑的。当您在 twitter 上创建应用程序时，您授予读写权限之类的权限，则不会出现此错误。

# c# - ASP.NET C# EF - 选择完整对象后如何受益？

> ID：12404829
> 
> 赞同：1
> 
> 时间：2012-09-13T11:04:09.043
> 
> 标签：c#, asp.net, entity-framework-4

我一直在使用 Entity Framework 开发 ASP.NET C#，有些人在某些关键点上帮助了我很多。

还有一点我不能完全理解。当我们从 EF 检索数据时，我们不应该使用对象及其子对象（外键关系表数据）吗？

这是我的数据库设计（也显示在我之前回答的问题中） ![在此处输入图像描述](../Images/5aa9e4b8d137eb731cbf29044ef2f2ac.png)

在我的代码中，我简单地得到如下的成员实体：

```
//In some aspx.cs file
var Mem = new MemberManager().GetById(2);

//In MemberManager class
public Member GetById(long id)
        {
            using(var Context = new NoxonEntities())
            {
                return Context.Member.First(c => c.Id == id);
            }
        } 
```

当我这样做时：

```
var Mem = new MemberManager().GetById(2);
var Lang = Mem.Language;
//I get 
//Error: 'Mem.Language' threw an exception of type 'System.ObjectDisposedException' 
```

为了摆脱这个异常，我需要这样做：

```
public Member GetById(long id)
        {
            using(var Context = new NoxonEntities())
            {
                var Result = Context.Member.First(c => c.Id == id);
                //Getting the Language Entity
                Result.Language = Context.Language.First(c => c.Id == Result.LanguageId);

                return Result;
            }
        } 
```

我是否必须运行 SELECT 才能拥有**完整**的实体？如果有**另一个**与语言表相关的表，比如说*功能*表。我应该这样做：

```
public Member GetById(long id)
            {
                using(var Context = new NoxonEntities())
                {
                    var Result = Context.Member.First(c => c.Id == id);
                    //Getting the Language Entity
                    Result.Language = Context.Language.First(c => c.Id == Result.LanguageId);
                    Result.Language.Feature = Context.Language.Feature.First(c => c.Id == Result.FeatureId);
                    return Result;
                }
            } 
```

这可能会持续很长时间，我很确定（至少我真的希望）我错了，但是如果我们在选择**之后**不能使用对象及其子对象，那么拥有 EF 的目的是什么？我们可以只使用`using(var Context = new NoxonEntities())`块中的子对象吗？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T11:15:18.327

将上下文视为数据库连接。当您在`using`语句中创建上下文并在`using`. 该块之后的所有内容都`using`无法再访问数据库连接。你在这里得到一个例外......

```
var Lang = Mem.Language; 
```

...因为*延迟加载*尝试`Language`从数据库加载导航属性，但与数据库的连接已被释放。当与数据库的连接仍然可用时，您只能*在块内使用这种延迟加载。*`using`

您可以通过使用*预先加载*来简化示例中导航属性的加载`Include`：

```
public Member GetById(long id)
{
    using(var Context = new NoxonEntities())
    {
        return Context.Member.Include("Language").First(c => c.Id == id);
    }
} 
```

或者对于两个导航属性都使用：

```
return Context.Member.Include("Language.Feature").First(c => c.Id == id); 
```

它将在一个数据库查询中加载成员*、语言和功能。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T11:17:55.857

您的问题是由于延迟加载造成的。发生的事情是 EF 没有加载您的相关实体`Language`，因为它不确定它是否需要数据。然后，您正在处理上下文，因此当您尝试访问`Language`导航属性时，它无法进行跳转。

您在这里有几个选择。你可以预先加载，这里有一篇关于预先加载的很棒的[博客文章](http://msdn.microsoft.com/en-US/data/jj574232)，语言实体：

```
var Result = Context.Member.Include("Language").First(c => c.Id == id); 
```

或者，您需要在整个请求期间保持上下文处于活动状态。这是一篇[关于为每个请求保持上下文活跃的好方法的好帖子](http://www.blog.cyberkinetx.com/2011/05/15/entity-framework-context-per-request/)。

我确实记得你是另一个帖子 - 我相信你正在分离你的实体并将其存储在其他地方，然后重新附加。如果这与该功能有关，那么在将语言对象重新附加到上下文**后**访问它也将解决您的问题。

# c++ - cvHaarDetectObjects 是如何工作的？

> ID：12404830
> 
> 赞同：0
> 
> 时间：2012-09-13T11:04:10.457
> 
> 标签：c++, opencv, face-detection

我正在尝试了解 cvHaarDetectObjects 是如何工作的……我无法想象它是如何工作的……积分图像是如何计算并找到一张脸的……

我们在面部区域放置一个矩形......我们如何找到这个区域？

```
if (faces)
{
    for(int i = 0; i < faces->total; ++i)
    {
        CvPoint point1, point2;
        CvRect* rectangle = (CvRect*)cvGetSeqElem(faces, i);
        point1.x = rectangle->x;
        point2.x = (rectangle->x + rectangle->width);
        point1.y = rectangle->y;
        point2.y = (rectangle->y + rectangle->height);
        cvRectangle(frame, point1, point2, CV_RGB(255,0,0));... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:46:04.360

阅读此 wiki 页面， [http ://en.wikipedia.org/wiki/Viola%E2%80%93Jones_object_detection_framework](http://en.wikipedia.org/wiki/Viola%E2%80%93Jones_object_detection_framework)

有一个著名的算法叫做 Viola Jones 方法： [http ://research.microsoft.com/en-us/um/people/viola/Pubs/Detect/violaJones_CVPR2001.pdf](http://research.microsoft.com/en-us/um/people/viola/Pubs/Detect/violaJones_CVPR2001.pdf)

希望它能帮助您了解这是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T08:22:08.357

在 OpenCV 库中，一个矩形由两个角组成，所以

```
point1.x = rectangle->x;
point2.x = (rectangle->x + rectangle->width);
point1.y = rectangle->y;
point2.y = (rectangle->y + rectangle->height); 
```

从

```
CvRect* rectangle = (CvRect*)cvGetSeqElem(faces, i); 
```

获取检测面部的位置，它使用那些 x 和 y 坐标，用它们组成两个所需的品脱（上面的代码），然后用点作为参数绘制矩形：

```
cvRectangle(frame, point1, point2, CV_RGB(255,0,0)); 
```

# c# - 是否可以使用 DotNetOpenAuth 和 LinkedIn Developer Toolkit 请求用户的完整个人资料？

> ID：12404831
> 
> 赞同：1
> 
> 时间：2012-09-13T11:04:10.647
> 
> 标签：c#, asp.net, linkedin, dotnetopenauth

使用 DotNetOpenAuth 请求访问令牌时，它仅对基本用户配置文件进行身份验证。

在`Authorization.BeginAuthorize();`

有没有办法要求用户对他们的完整个人资料进行身份验证，也许是通过在令牌管理器中指定一些东西？

我知道在向 LinkedIn API 发布 POST 时，您添加了范围参数，但是有没有办法使用 DotNetOpenAuth 和 LinkedIn Developer Toolkit 来做到这一点？

`https://api.linkedin.com/uas/oauth/requestToken?scope=r_fullprofile`

我还可以看到，在 LinkedIn Developer Toolkit 中有很多 ProfileField 枚举用于完整的个人资料，所以我假设可以通过这种方式访问​​它们。例如

`ProfileField.Industry`

`ProfileField.ThreeCurrentPositions`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T18:02:04.613

我也在寻找一种方法来做到这一点。您需要扩展 LinkedIn Developer Toolkit。

[下载源](https://github.com/deeja/LinkedInDeveloperToolkit)

将以下函数重载添加到`WebOAuthAuthorization.cs`

```
public void BeginAuthorize(Uri callback, IDictionary<string, string> requestParameters)
{
    this.Consumer.Channel.Send(this.Consumer.PrepareRequestUserAuthorization(callback, requestParameters, null));
} 
```

编译它并在您的项目中添加对它的引用（如果您正在使用它，请删除 NuGet 包）。然后您就可以从您的代码中调用它，如下所示：

```
WebOAuthAuthentication webAuth = new WebOAuthAuthentication(LinkedInTokenManager, null);
Uri callback = new Uri("http://your.callback.uri");
Dictionary<string, string> requestParameters = new Dictionary<string, string>();
requestParameters.Add("scope", "r_fullprofile r_network");
webAuth.BeginAuthorize(callback, requestParameters); 
```

至于您的第二个问题，配置文件字段 ENUM 用于传递给`GetCurrentUser`方法（可能还有其他方法）以指定要返回的字段，例如

```
LinkedInService li = new LinkedInService(webAuth);
List<ProfileField> fields = new List<ProfileField>();
fields.Add(ProfileField.ThreeCurrentPositions);
fields.Add(ProfileField.Industry);
Person person = li.GetCurrentUser(ProfileType.Standard, fields); 
```

然后可以在`Person`对象上访问这些字段（您未指定的字段为空）。

# r - 在 RExcel VBA 中包装很长的函数？

> ID：12404834
> 
> 赞同：1
> 
> 时间：2012-09-13T11:04:23.483
> 
> 标签：r, vba, rexcel

当你想通过 RExcel 在 VBA 中使用 R 函数时，你必须使用

```
RInterface.RRun "..." 
```

然后，如果您想定义自己的 R 函数，您可以简单地

```
RInterface.RRun "y <- function(x) { ... }" 
```

如果`y`由多个命令行组成，您可以使用 分隔每一行`;`，就像您在 R 环境中所做的那样。

但是...如果您的`y`函数非常长怎么办？

一个 20 ~ 30 行的 R 函数在 VBA 中很难这样写；并且 VBA 句子的长度是有限制的。

那么：我该如何包装？

这是一个相当长的 R 函数的例子：你能告诉我如何使用 RExcel 输入 VBA 吗？

```
bestIV <- function(dT, IVTS.t, Spot, r) {
  b <- r
  xout <- seq(0, max(T), dT)
  sfm <- matrix(NA, nrow = length(K), ncol = length(xout))
  for(i in 1:length(K)) {
    sfm[i,] <- approx(x = T, y = IVTS.t[i,], xout = xout, rule = 2)$y
  }
  sfm[,1] <- sfm[,1] + sfm[,2] - sfm[,3]
  rownames(sfm) <- K
  colnames(sfm) <- xout
  Option <- matrix(NA, nrow = length(K), ncol = length(xout))
  for(i in 1:length(K)) {
    for(j in 1:length(xout)) {
      TypeFlag <- ifelse(K[i] < Spot, 'p', 'c')
      Option[i,j] <- GBSOption(TypeFlag = TypeFlag, S = Spot, X = K[i], 
                               Time = xout[j] / 365, r = r, b = b, 
                               sigma = sfm[i,j] / 100)@price
    }
  }
  rownames(Option) <- K
  colnames(Option) <- xout
  dP <- (cbind(0, -t(apply(X = Option, MARGIN = 1, FUN = diff))) / Option)[,-(1:2)]
  dV <- dP / dT
  min.V <- which(dV == min(dV), arr.ind = TRUE, useNames = TRUE)
  Strike <- as.numeric(dimnames(min.V)[1])
  Maturity <- as.numeric(unlist(dimnames(dV)[2]))[min.V[2]]
  Days <- dT
  Mat <- c(dV[which(dV == min(dV))], Strike, Maturity, Days)
  names(Mat) <- c('Value', 'Strike', 'Maturity', 'Days')
  return(Mat)
} 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T21:50:11.363

将您的 R 代码放入您的电子表格（在一系列单元格中）并改用此函数：

> **RInterface.RunRCodeFromRange 范围**
> 
> 在工作表上执行范围内的命令（允许使用为与 R 交互执行而准备的命令在宏代码中运行）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:41:27.010

您将字符串作为参数传递给 VBA 函数。因此，您的问题简化为“如何在 VBA 中连接字符串”。

答案是使用连接运算符`&`，如下所示：

```
"a" & "b" 
```

假设你有一个 R 函数：

```
y <- function(x, a, b){
  return(x)
} 
```

然后您可以在 VBA 中执行此操作：

```
RInterface.RRun "y <- function(x, a, b) {" &
  "return(x)" &
  "}" 
```

# jquery - JQuery 不会在 IE 中进行回发

> ID：12404835
> 
> 赞同：0
> 
> 时间：2012-09-13T11:04:27.563
> 
> 标签：jquery, asp.net, postback

我正在使用以下 JQuery 函数进行回发：

```
$("#btnSubmit").click(); 
```

btnSubmit 是一个 ASP.NET 服务器端按钮，它定义了一个点击功能，在 Firefox 和 chrome 中执行回发，我的服务器端代码被执行，但在 IE 中没有任何反应，出了什么问题？

```
<script src="jquery-1.4.min.js" type="text/javascript"></script>

   <script type="text/javascript" >

       function uploadTimer() {
           var t = setTimeout("uploadTimer()", 100);
           var value = $("#FileUpload1").val();
           if (value != '') {
               $("#btnSubmit").click();
           }
       } 
```

……

```
 <script language="javascript" type="text/javascript">
    function OpenFileUpload() {
        $("#FileUpload1").click();
        uploadTimer();
    }
</script>
<asp:FileUpload ID="FileUpload1" runat="server" ClientIDMode="Static" style="display:none;" />
<asp:Button ID="btnSubmit" ClientIDMode="Static" runat="server" Text="Submit" OnClick="UploadFileToServer" style="display:none;" />
        <a href="javascript:void(0)" title="upload file" style="color:Black;" onclick="OpenFileUpload()">upload file</a> <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" Visible="false"/> 
```

# ruby-on-rails - 在参数中发布目标接收放置数据 2 次

> ID：12404838
> 
> 赞同：0
> 
> 时间：2012-09-13T11:04:32.330
> 
> 标签：ruby-on-rails, ruby, post, httparty

我正在开发一个帖子到 Ruby on Rails 中的回调 url 并为此使用 Httparty 库，我在 url 上完美地收到了帖子，但似乎 rails 将推送到 url 的数据 2 次转换为参数。这是我用来调用的代码：

```
@result = HTTParty.post("http://localhost:3000/mailchimp/callback/", 
          :body => { 
            :data => {
              :title => 'This is the screen name'}
          }.to_json,
          :headers => { 'Content-Type' => 'application/json' } ) 
```

在接收应用程序的日志中，我得到了这个：

```
Parameters: {"mailchimp"=>{"controller"=>"mailchimp", "action"=>"callback", "data"=>{"title"=>"This is the screen name"}}, "data"=>{"title"=>"This is the screen name"}} 
```

您直接看到我有 2 倍的数据参数，一次在控制器哈希中，一次在普通参数哈希中。这是怎么来的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:06:40.373

这是由 ParamsWrapper 模块引起的[https://github.com/rails/rails/blob/master/actionpack/lib/action_controller/metal/params_wrapper.rb](https://github.com/rails/rails/blob/master/actionpack/lib/action_controller/metal/params_wrapper.rb)

默认情况下，这是由初始化程序在您的 Rails 应用程序中启用的`config/wrap_parameters.rb`

# facebook - 抄写员在稳定的节俭上犯错误

> ID：12404841
> 
> 赞同：2
> 
> 时间：2012-09-13T11:04:45.897
> 
> 标签：facebook, thrift, facebook-scribe

我首先提出了一个配置命令：

我懂了：

```
milind@ubuntu:~/scribe$ ./configure CPPFLAGS="-DHAVE_INTTYPES_H -DHAVE_NETINET_IN_H -    DBOOST_FILESYSTEM_VERSION=2 -DHAVE_NETDB_H=1 -fpermissive"

checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /bin/mkdir -p
checking for gawk... no
checking for mawk... mawk
checking whether make sets $(MAKE)... yes
checking for style of include used by make... GNU    
checking for gcc... gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking dependency style of gcc... gcc3
checking dependency style of gcc... (cached) gcc3
checking for g++... g++
checking whether we are using the GNU C++ compiler... yes
checking whether g++ accepts -g... yes
checking dependency style of g++... gcc3
checking dependency style of g++... (cached) gcc3
checking for ranlib... ranlib
checking for bash... /bin/sh
checking for perl... /usr/bin/perl
checking for python... /usr/bin/python
checking for ar... /usr/bin/ar
checking for ant... no
checking Checking EXTERNAL_PATH set to... /home/milind/scribe
checking whether to enable optimized build... yes
checking whether to enable static mode... yes
checking whether to enable FACEBOOK... no
checking whether to enable USE_SCRIBE_HDFS... no
checking Checking thrift_home set to... /usr/local
checking Checking fb303_home set to... /usr/local
checking Checking smc_home set to... /home/milind/scribe/services/trunk/src
checking Checking fb_home set to... /home/milind/scribe/libfacebook
checking Checking hadoop_home set to... /usr/local
checking for boostlib >= 1.36... yes
checking build system type... i686-pc-linux-gnu
checking whether the Boost::System library is available... yes
checking for exit in -lboost_system-mt... yes
checking whether the Boost::Filesystem library is available... yes
checking for exit in -lboost_filesystem-mt... yes
configure: creating ./config.status
config.status: creating Makefile
config.status: creating src/Makefile
config.status: creating lib/py/Makefile
config.status: executing depfiles commands
EXTERNAL_PATH /home/milind/scribe 
```

现在，当我运行 make 命令时，输出显示：

```
milind@ubuntu:~/scribe$ make
make  all-recursive
make[1]: Entering directory `/home/milind/scribe'
Making all in .
make[2]: Entering directory `/home/milind/scribe'
make[2]: Nothing to be done for `all-am'.
make[2]: Leaving directory `/home/milind/scribe'
Making all in src
make[2]: Entering directory `/home/milind/scribe/src'
make  all-am
make[3]: Entering directory `/home/milind/scribe/src'
g++ -DPACKAGE_NAME=\"scribe\" -DPACKAGE_TARNAME=\"scribe\" -DPACKAGE_VERSION=\"1.5.0\" -DPACKAGE_STRING=\"scribe\ 1.5.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"scribe\" -DVERSION=\"1.5.0\" -DHAVE_BOOST=/\*\*/ -DHAVE_BOOST_SYSTEM=/\*\*/ -DHAVE_BOOST_FILESYSTEM=/\*\*/ -I.  -I.. -I/usr/local/include -I/usr/local/include/thrift -I/usr/local/include/thrift -I/usr/local/include/thrift/fb303 -I/usr/local/include -I/usr/include   -DHAVE_INTTYPES_H -DHAVE_NETINET_IN_H -DBOOST_FILESYSTEM_VERSION=2 -DHAVE_NETDB_H=1 -fpermissive  -Wall -O3 -MT store.o -MD -MP -MF .deps/store.Tpo -c -o store.o store.cpp
In file included from store.cpp:27:
scribe_server.h:45: error: conflicting return type specified for ‘virtual     scribe::thrift::ResultCode scribeHandler::Log(const std::vector<scribe::thrift::LogEntry, std::allocator<scribe::thrift::LogEntry> >&)’
../src/gen-cpp/scribe.h:19: error:   overriding ‘virtual    scribe::thrift::ResultCode::type scribe::thrift::scribeIf::Log(const std::vector<scribe::thrift::LogEntry, std::allocator<scribe::thrift::LogEntry> >&)’
store.cpp: In member function ‘bool   FileStore::writeMessages(boost::shared_ptr<std::vector<boost::shared_ptr<scribe::thrift::LogEntry>, std::allocator<boost::shared_ptr<scribe::thrift::LogEntry> > > >, boost::shared_ptr<FileInterface>)’:
store.cpp:786: warning: format ‘%lu’ expects type ‘long unsigned int’, but argument 5 has type ‘size_t’
store.cpp: In member function ‘virtual bool  FileStore::readOldest(boost::shared_ptr<std::vector<boost::shared_ptr<scribe::thrift::LogEntry>, std::allocator<boost::shared_ptr<scribe::thrift::LogEntry> > > >, tm*)’:
store.cpp:916: warning: format ‘%lu’ expects type ‘long unsigned int’, but argument 5 has type ‘size_t’
store.cpp: In member function ‘virtual bool ThriftFileStore::openInternal(bool, tm*)’:
store.cpp:1109: warning: ignoring return value of ‘int symlink(const char*, const char*)’, declared with attribute warn_unused_result
store.cpp: In member function ‘virtual void BufferStore::periodicCheck()’:
store.cpp:1411: warning: format ‘%lu’ expects type ‘long unsigned int’, but argument 5 has type ‘size_t’
make[3]: *** [store.o] Error 1
make[3]: Leaving directory `/home/milind/scribe/src'
make[2]: *** [all] Error 2
make[2]: Leaving directory `/home/milind/scribe/src'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/home/milind/scribe'
make: *** [all] Error 2 
```

我安装了所有依赖包，如 libevent-dev、boost 并且它们位于默认路径中。即使在明确指定了各个路径之后，它也不起作用。我在某处读到这可能发生在旧版本的 thrift 上，但我使用的是最新的稳定版本。

有人可以帮忙吗？

# c# - 知道哪个 UDP 客户端是哪个

> ID：12404847
> 
> 赞同：0
> 
> 时间：2012-09-13T11:05:29.047
> 
> 标签：c#, udp

是否可以在不保持套接字打开的情况下识别早期的 UDP 客户端？我想将一个整数 ID 链接到每个唯一的客户端，但我不想让任何其他线程保持打开状态。

//接收（服务器）

```
private static Int32 port = 11000;
private static UdpClient udpClient = new UdpClient(port);

public static void receive_threaded()
{
    Thread t = new Thread(() =>
    {
        while (true)
        {
            IPEndPoint remoteIPEndPoint = new IPEndPoint(IPAddress.Any, port);
            byte[] content = udpClient.Receive(ref remoteIPEndPoint);

            if (content.Length > 0)
            {
                string message = Encoding.UTF8.GetString(content);
                if (action_message_receive != null) action_message_receive(String.Format("Recv({0}): {1}", remoteIPEndPoint.Port, message));
                parseMessage(message);
            }
        }
    });
    t.Start();
} 
```

//发送（客户端）

```
private static void send_message(string ip, string message)
{
    byte[] packetData = System.Text.UTF8Encoding.UTF8.GetBytes(message);

    int port = 11000;

    IPEndPoint ep = new IPEndPoint(IPAddress.Parse(ip), port);
    Socket client = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
    client.SendTo(packetData, ep);

    if (action_message_send != null) action_message_send("Send: " + message);
} 
```

客户端可以从服务器请求（临时）用户ID，服务器会将其添加到它的数据库中，并在完成时通知客户端。但是，我不能让客户端在发出请求时发送它自己的用户 ID，因为任何内存更改应用程序都意味着“黑客”可以访问其他用户的东西。

由于套接字不会保持打开状态，因此每次客户端向服务器发送某些内容时*IPEndPoint.Port 都会*发生变化，因此我无法对其进行跟踪。我可以通过在用户 ID 请求上创建用户名/传递并在此后涉及用户 ID 的每个请求上发送这些来完成它，但这很愚蠢。

那么有没有办法在不为每个客户端打开线程的情况下做到这一点？我可能在这里做一些非常奇怪的事情，因为 UDP 应该是单向街道，但我是来这里学习的，所以我只需要问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:07:29.987

您将需要引入某种由服务器选择并发送给客户端的唯一标识符，以使其“表现并发送回用于识别目的”。一个随机长整数就足够了。

UDP has neither connections nor identification/authentication mechanisms. If you want those, use TCP (but those can be bruteforced also...)

# wpf - 当前数据网格项和多重绑定

> ID：12404850
> 
> 赞同：-1
> 
> 时间：2012-09-13T11:05:41.813
> 
> 标签：wpf, xaml, data-binding, datagrid

我有一个 DataGrid，我想在其中根据 ItemSource 的值更改一行的背景，所以我需要传递当前项目，但我不知道如何。

我正在这样做：

```
<DataGrid.RowStyle>
    <Style TargetType="DataGridRow">
        <Setter Property="Background">
            <Setter.Value>
                <MultiBinding Converter="{StaticResource myDataGridBackgroundMultiValueConverter}">
                    <MultiBinding.Bindings>
                        <Binding ElementName="ucPrincipal" Path="DataContext.MyProperty01FromDataContext"/>
                        <Binding ElementName="ucPrincipal" Path="DataContext.MyProperty02FromDataContext"/>
                        <Binding ElementName="ucPrincipal" Path="DataContext.MyProperty03FromDataContext"/>
                        <Binding ElementName="dgdMyGrid" Path="CurrentItem"/>
                    </MultiBinding.Bindings>
                </MultiBinding>
            </Setter.Value>                        
        </Setter>
    </Style>
</DataGrid.RowStyle> 
```

DataGrid在. `ItemsSource`_ 我需要将带有行信息的 MyDataClass 传递给转换器。`MyDataClass``ViewModel`

CurrentItem 不起作用，因为我总是收到 null。

其他参数一切正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:39:51.910

`DataGrid`没有`CurrentItem`属性，只有`CollectionViews`，DataGrid 有一个`SelectedItem`. 因此，您也应该看到一个[绑定错误](http://blogs.msdn.com/b/wpfsldesigner/archive/2010/06/30/debugging-data-bindings-in-a-wpf-or-silverlight-application.aspx)。

如果当前项是指样式化行所属的数据项，它将是`DataContext`当前行的数据项，可以通过`<Binding />`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T14:54:52.140

好吧，最后，我找到了将行的 dataContext 传递给转换器的方法。我执行以下操作：

```
 <DataGrid.RowStyle>
                <Style TargetType="DataGridRow">
                    <Setter Property="Visibility" Value="{Binding ChangeTracker.State, Converter={StaticResource visibilidadFilaBorradaConverter}}"/>
                    <Setter Property="Background">
                        <Setter.Value>
                            <MultiBinding Converter="{StaticResource ucTareasMatenimientoDataGridBackgroundMultiValueConverter}">
                                <MultiBinding.Bindings>
                                    <Binding ElementName="ucPrincipal" Path="DataContext.Property01"/>
                                    <Binding Path="DataContext" RelativeSource="{RelativeSource Mode=Self}" />
                                    <Binding ElementName="ucPrincipal" Path="DataContext.Property02"/>
                                    <Binding ElementName="ucPrincipal" Path="DataContext.Property03"/>
                                    <Binding ElementName="ucPrincipal" Path="DataContext.Property04"/>                                    
                                </MultiBinding.Bindings>
                            </MultiBinding>
                        </Setter.Value>                        
                    </Setter>
                </Style>
            </DataGrid.RowStyle> 
```

在多值转换器的第二个参数中，我使用了 RelativeSource，以便能够传递行的 datContext。这样，我可以将其信息与控件的主体 dataContext 的其他属性进行比较。

# web-services - 用于在单个操作中接受不同消息的服务的 WSDL

> ID：12404851
> 
> 赞同：1
> 
> 时间：2012-09-13T11:05:43.813
> 
> 标签：web-services, xsd, wsdl

我想要一个接受不同类型输入的文档\文字网络服务`soap:body`。喜欢

```
<soap:body>
   <A xmlns="http://tempuri/A">
   </A>
</soap:body> 
```

也

```
<soap:body>
   <B xmlns="http://tempuri/B">
   </B>
</soap:body> 
```

在同一`wsdl:operation`。

我尝试在 WSDL 内的内联模式块中描述和元素，但对于文档\文字样式，我需要为部件指定一个元素`wsdl:message`。但我不想将请求（`<A>`或`<B>`）包装到另一个容器元素中。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:22:10.607

不，这是不可能的。让它工作的唯一方法是将这些`A`和`B`元素与其他元素包装在一起，例如`C`. 然后，您需要在消息中指定该`C`元素。`WSDL`

为什么这不可能，因为您有两个不同的元素指向两个不同的命名空间，并且消息只允许来自一个命名空间的一个元素。

# c# - 将项目添加到 ObservableCollection 时出现 NullReferenceException

> ID：12404854
> 
> 赞同：1
> 
> 时间：2012-09-13T11:05:49.220
> 
> 标签：c#, wpf, windows-phone-7.1, observablecollection

我正在尝试将对象添加到 ObservableCollection。正如这个网站上的几个问题所述，我什至尝试在添加项目之前实例化集合。但是，我仍然收到错误消息。这是我的观察集：

```
//Datacontext for local database
private WordDataContext wordsDB;

//Observable collection for binding
private ObservableCollection<WordItem> _wordItems = new ObservableCollection<WordItem>();
public ObservableCollection<WordItem> WordItems
{
    get
    {
        return _wordItems;
    }
    set
    {
        if (_wordItems != value)
        {
            _wordItems = value;
            NotifyPropertyChanged("WordItems");
        }
    }
} 
```

我已经覆盖了 onNavigatedTo

```
 protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
        // Define the query to gather all of the idea items.
        var wordItemsInDB = from WordItem word in wordsDB.WordItems
                            select word;

        // Execute the query and place the results into a collection.
        WordItems = new ObservableCollection<WordItem>(wordItemsInDB);

        // Call the base method.
        base.OnNavigatedTo(e);
    } 
```

这是添加新项目的按钮

```
 private void newIdeaAddButton_Click(object sender, RoutedEventArgs e)
    {
        //// Create a new idea item based on the text box.
        //WordItem newIdea = new WordItem { WordName = "TestTest" };
        //Debug.WriteLine("I'm here!");
        //// Add a idea item to the observable collection.
        //WordItems.Add(newIdea);

        //// Add a idea item to the local database.
        //wordsDB.WordItems.InsertOnSubmit(newIdea);
        WordItem newword = new WordItem { WordName = "Bingo" };
        if (WordItems == null)
        {
            Debug.WriteLine("I'm null!");
            WordItems = new ObservableCollection<WordItem>();
        }

        WordItems.Add(newword);
        wordsDB.WordItems.InsertOnSubmit(newword);
        Debug.WriteLine("Did something!");
    } 
```

这是 XAML

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <!--<ListBox Margin="14,0,-12,0" FontSize="{StaticResource PhoneFontSizeExtraLarge}" FontFamily="{StaticResource PhoneFontFamilySemiLight}">
            <ListBoxItem Content="About" Tap="GoToAbout"/>
        </ListBox>-->
        <telerikData:RadJumpList x:Name="TestList" IsStickyHeaderEnabled="True" Margin="14,0,-12,0" ItemsSource="{Binding WordItems}">
            <telerikData:RadJumpList.ItemTemplate>
                <DataTemplate>                                                    
                    <StackPanel Orientation="Horizontal" Height="74">                                    
                        <Rectangle x:Name="Bully" Width="20" Fill="Gray" Height="62" VerticalAlignment="Top" HorizontalAlignment="Left" />
                        <TextBlock Style="{StaticResource PhoneTextExtraLargeStyle}" Text="{Binding WordItem}" VerticalAlignment="Top"/>
                    </StackPanel>                        
                </DataTemplate>
            </telerikData:RadJumpList.ItemTemplate>

            <telerikData:RadJumpList.StickyHeaderTemplate>                    
                <DataTemplate>
                    <Border HorizontalAlignment="Stretch" Background="{StaticResource PhoneBackgroundBrush}" Height="74">
                        <Border Background="{StaticResource PhoneAccentBrush}" VerticalAlignment="Top" HorizontalAlignment="Left" Width="62" Height="62">
                            <TextBlock Text="{Binding}" FontFamily="{StaticResource PhoneFontFamilySemiLight}" FontSize="{StaticResource PhoneFontSizeExtraLarge}" Padding="7,0,0,0" VerticalAlignment="Bottom" Foreground="White" />
                        </Border>
                    </Border>
                </DataTemplate>
            </telerikData:RadJumpList.StickyHeaderTemplate>

            <telerikData:RadJumpList.GroupHeaderTemplate>
                <DataTemplate>
                    <Border HorizontalAlignment="Stretch" Background="{StaticResource PhoneBackgroundBrush}" Height="74">
                        <Border Background="{StaticResource PhoneAccentBrush}" VerticalAlignment="Top" HorizontalAlignment="Left" Width="62" Height="62">
                            <TextBlock Text="{Binding}" FontFamily="{StaticResource PhoneFontFamilySemiLight}" FontSize="{StaticResource PhoneFontSizeExtraLarge}" Padding="7,0,0,0" VerticalAlignment="Bottom" Foreground="White" />
                        </Border>
                    </Border>
                </DataTemplate>
            </telerikData:RadJumpList.GroupHeaderTemplate>

            <telerikData:RadJumpList.GroupPickerItemsPanel>
                <ItemsPanelTemplate>
                    <toolkit:WrapPanel HorizontalAlignment="Center" ItemHeight="111" ItemWidth="111"/>
                </ItemsPanelTemplate>
            </telerikData:RadJumpList.GroupPickerItemsPanel>

            <telerikData:RadJumpList.GroupPickerItemTemplate>
                <DataTemplate>
                    <Border Background="{StaticResource PhoneAccentBrush}" Width="99" Height="99" VerticalAlignment="Top" HorizontalAlignment="Left">
                        <TextBlock Text="{Binding}" Style="{StaticResource PhoneTextExtraLargeStyle}" VerticalAlignment="Bottom" Foreground="White" />
                    </Border>
                </DataTemplate>
            </telerikData:RadJumpList.GroupPickerItemTemplate>
        </telerikData:RadJumpList>
        <Button x:Name="newIdeaAddButton" Click="newIdeaAddButton_Click" Content="Button" Height="72" HorizontalAlignment="Left" Margin="10,10,0,0" VerticalAlignment="Top" Width="160" />
    </Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T09:47:18.340

好的，我终于得到了解决方案！这个问题本身就有点晦涩难懂。问题是，早些时候，我将 RadJumplist 绑定到 a`List<strings>`并且相应地定义了 GroupDescriptor

```
GenericGroupDescriptor<string, string> testgroup = new GenericGroupDescriptor<string, string>(listitem => listitem.Substring(0, 1).ToLower()); 
```

但是，有问题的场景大约是`ObservableCollection<WordItem>`. 一旦将项目添加到集合中，就会通知 RadJumpList 有关这些更改，并且 GroupDescriptor 在该上下文中被证明是无效的。这以某种方式提高了`NullReferenceException`. 将错误与原因联系起来有点不直观。

因此，简单的解决方案是按如下方式更改描述符

```
GenericGroupDescriptor<WordItem, string> gengd = new GenericGroupDescriptor<WordItem, string>();
        gengd.KeySelector = (WordItem item) =>
            {
                char keyhead = item.WordName[0];
                return keyhead.ToString().ToLower();
            }; 
```

这件事没有很好的记录！

# c# - 如何复制 Windows 7 计算器文本框

> ID：12404859
> 
> 赞同：0
> 
> 时间：2012-09-13T11:05:55.717
> 
> 标签：c#, winforms, calculator

我想知道如何复制 Windows 7 中使用的文本框，即当您按下一个符号时，它会在文本框的上部添加数字。我尝试在文本框中添加一个标签，但它仍然没有复制相同的效果。谁能给我一个提示，告诉我我可以尝试达到相同的结果。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:12:56.800

使用两个文本框并将事件应用于数学运算符按钮。（如果你喜欢的话，下面还有一个图形）

我认为没有可以“添加”的控件，您也可以使用用户控件模板创建自己的控件。

# html - 一个网页可以有多个 rel="alternate" 标签吗？

> ID：12404865
> 
> 赞同：5
> 
> 时间：2012-09-13T11:06:29.957
> 
> 标签：html, seo, canonical-link

在我的网站中，我使用`rel="alternate"`RSS 如下

```
<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://www.mydomain.com/rss" /> 
```

现在我想`rel="alternate"`为移动网站添加另一个标签

```
<link rel="alternate" media="handheld" href="http://m.mydomain.com" /> 
```

在一个页面中使用多个标签是否有任何问题`rel="alternate"`或对 SEO 没有任何影响？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T23:28:06.110

没问题，恰恰相反，它甚至受到鼓励。

例如链接到一个页面的多个翻译；[请参阅HTML 4.01](http://www.w3.org/TR/html401/struct/links.html#h-12.3.3)中的示例：链接和搜索引擎。或链接到几个不同的提要；[请参阅HTML5`alternate`](http://www.w3.org/TR/html5/links.html#rel-alternate)中的示例：链接类型“ [”](http://www.w3.org/TR/html5/links.html#rel-alternate)。或者链接到几个不同的（= 替代）样式表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T11:15:36.737

根据此页面，使用多个实例似乎没有任何问题：

[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=189077](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=189077)

# jquery - 使用 jQuery click 更改 OG:IMAGE 的值

> ID：12404868
> 
> 赞同：6
> 
> 时间：2012-09-13T11:06:50.490
> 
> 标签：jquery, image, facebook-opengraph

我只是用一个 HTML 页面构建了一个图像组合，其中所有图片都是动态加载的。到目前为止，一切都很好，除了 facebook META OG:IMAGE。

由于页面只加载一次，我可以分配一次 OG:IMAGE URL...但我真的希望每张图片都有自己的 OG:IMAGE，因为这是一个相册。

通过单击 --li class="open-pic"-- 标签加载图片。每次单击 --li class="open-pic"-- 标签时，我都想更改 OG:IMAGE 值。

可能吗？我发现了这样的东西：

```
$('meta[name=og\\:image]').attr('content', newImageUrl); 
```

但是，我不知道如何将其链接到 li.open-pic onclick 事件。谢谢！

G。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-13T11:44:44.043

> 由于页面只加载一次，我可以分配一次 OG:IMAGE URL...但我真的希望每张图片都有自己的 OG:IMAGE，因为这是一个相册。

在客户端更改 OG 元标签并没有实际用途——因为 Facebook 会通过它的抓取工具读取这些标签，这意味着它们将对您的 URL 进行 HTTP 请求并查看 HTML 代码中的内容；并且刮板不执行任何 JavaScript。

解决方案：为每张照片提供一个单独的 URL，并提供其自己的元信息——并让您的点赞按钮/分享功能/任何 FB 功能指向每张照片的该 URL。

（你如何处理*客户端的*事情并不重要——你仍然可以在一个页面中显示所有照片，通过 AJAX 加载新内容，无论你喜欢什么——但你*需要*单独的 URL 来为你的照片识别为单独的打开图形对象。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T11:10:32.203

```
$('li.open-pic').click(function(){
 $('meta[name=og\\:image]').attr('content', newImageUrl);
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-06T23:47:12.413

是结肠。尝试像这样使用单引号和双引号：

```
var imgSrc = $(this).find('img').attr('src'); // image stored as variable
$('meta[property="og:image"]').attr('content', imgSrc); // assigns meta property 
```

# nhibernate - nhibernate 延迟加载使用隐式事务

> ID：12404872
> 
> 赞同：4
> 
> 时间：2012-09-13T11:07:15.740
> 
> 标签：nhibernate, transactions, lazy-loading

这似乎是一个很常见的问题：我加载了一个 NHibernate 对象，该对象具有一个延迟加载的集合。稍后，我访问该集合以做某事。我仍然打开 nhibernate 会话（因为它是按视图或其他方式管理的），所以它确实有效，但事务已关闭，所以在 NHprof 中我得到“不鼓励使用隐式事务”。

我理解这条消息，并且由于我使用的是工作单元实现，我可以通过创建一个新事务并将对延迟加载集合的调用包装在其中来修复它。

我的问题是这感觉不对……我有一个很棒的 NHibernate 框架，它给了我很好的延迟加载，但是如果不将每个属性访问都包装在事务中，我就无法使用它。

我在谷歌上搜索了很多，阅读了大量的博客文章、关于 SO 的问题等，但似乎找不到完整的解决方案。

这是我考虑过的：

1.  关闭延迟加载。我认为这很愚蠢，就像开满了跑车，然后只在生态模式下驾驶它。急切地加载所有内容会损害性能，如果我只有 id 而不是引用，那么为什么还要打扰 Nhibernate？
2.  让交易保持更长时间。事务不应该长期存在，只要视图打开就保持打开状态只会自找麻烦。
3.  将每个延迟加载属性访问包装在事务中。有效，但臃肿且容易出错。（即，如果我忘记包装访问器，那么它仍然可以正常工作。只有使用 NHProf 会告诉我问题）
4.  加载初始对象时，始终加载我可能需要的属性的所有数据。同样，这很容易出错，无论是加载您不需要的数据（因为稍后访问它的调用已在某些时候被删除）或不加载您所做的数据

那么有没有更好的方法呢？任何帮助/想法表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:07:55.110

当我第一次在 NHProf 中遇到这个警告时，我也有同样的感受。在 Web 应用程序中，我认为最流行的方式是在整个请求期间打开事务（和工作单元）。对于桌面应用程序来说，管理事务（以及会话）可能会很痛苦。您可以使用自动事务管理框架（例如 Castle）并使用属性声明应该在事务中运行的服务方法。使用这种方法，您可以根据您的要求将多个操作包装到单个事务中。此外，我使用的是按视图打开会话的方法，每个视图打开一个会话并进行手动事务管理（在这种情况下，我只是忽略了有关隐式事务的分析器警告）。至于你的考虑：我强烈不推荐2）和3）。1) 和 4) 是要考虑的要点。

# c# - 自动完成框不清除键盘笔划

> ID：12404874
> 
> 赞同：1
> 
> 时间：2012-09-13T11:07:18.710
> 
> 标签：c#, wpf, data-binding, wpf-controls, wpftoolkit

在我的一个应用程序中，我正在使用 wpf 工具包中的 WPF 自动完成框。我正在通过 MVVM 模式实现它。绑定工作正常，但我在尝试清除自动完成框的内容时遇到了一个小问题。将视图模型中的绑定属性设置为空，仅部分清除文本（通过键盘输入的所有文本都不会清除 - 即，如果我在获取所有城市时输入 CH 并选择芝加哥并将绑定属性设置为空，则 CH没有被清除，其余的 ICAGO 是。）

XAML 如下所示：

```
 <my:AutoCompleteBox Grid.Row="0"
                                Grid.Column="1" 
                                HorizontalAlignment="Left" 
                                Margin="0,6,0,0" 
                                Name="acTown" 
                                SelectedItem="{Binding NewTown, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                ValueMemberBinding="{Binding Converter={StaticResource TownConverter}}"        
                                Populating="Populating"
                                VerticalAlignment="Top" 
                                Height="Auto" 
            </my:AutoCompleteBox> 
```

视图模型中清除框的方法是：

```
 public void ClearTown()
    {

    NewTown = null;

    OnPropertyChanged("NewTown");
} 
```

我无法弄清楚代码有什么问题，或者这只是自动完成框中的一个错误？

经过广泛的研究，我发现了这篇文章：[How do you clear the Silverlight AutoCompleteBox SearchText using MVVM](http://go4answers.webhost4life.com/Example/clear-silverlight-autocompletebox-212381.aspx)，但它没有提供解决方案。AutoCompleteBox 上似乎有一个 SearchText 属性，它是只读的，不能有一个设置器

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T20:10:02.640

终于明白了。如果有人感兴趣，解决方案是简单地更改`NewTown = null`为`NewTown = new NewTown()`ClearTown 函数。

# syntax - 这种范围的使用有什么问题？

> ID：12404875
> 
> 赞同：2
> 
> 时间：2012-09-13T11:07:18.863
> 
> 标签：syntax, go

我尝试使用此函数获取目录列表：

```
package main;
import ("fmt"; "os"; "io/ioutil")

func main() {
    dir, _ := ioutil.ReadDir("..")
    var f os.FileInfo
    for f = range dir {
        fmt.Println(f.Name())
    }
} 
```

根据[ReadDir 的文档](http://golang.org/pkg/io/ioutil/#ReadDir)，它应该`[]os.FileInfo`作为第一个返回参数返回。但是，当我尝试编译它时，我得到了

```
cannot assign type int to f (type os.FileInfo) in range: int does not implement os.FileInfo (missing IsDir method) 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-13T11:12:03.753

这应该有效：

```
for _, f = range dir {
        fmt.Println(f.Name())
    } 
```

您忽略索引并仅分配 dir 条目。

如果你不想，你不必声明 var。这也可以：

```
func main() {
    dir, _ := ioutil.ReadDir("..")
    for _, f := range dir {
        fmt.Println(f.Name())
    }
} 
```

注意 ' `:=`' 之后的 ' `_, f`'，而不是你的 ' `f =`'。

问题不在于返回的内容`ReadDir()`，而是来自`range`返回（索引，值）的表达式。
来自 Go 规范“ [For Statements](http://golang.org/ref/spec#For_statements) ”：

```
Range expression                          1st value          2nd value (if 2nd variable is present)

array or slice  a  [n]E, *[n]E, or []E    index    i  int    a[i]       E 
```

# openlayers - 使用带有图例的 openlayers.layer.wms.post 对地理服务器 wms 进行动态样式和过滤

> ID：12404880
> 
> 赞同：2
> 
> 时间：2012-09-13T11:07:44.260
> 
> 标签：openlayers, extjs3, geoserver, wms

我已经在地图中定义了一个 WMS.Post 层，如此处所建议[的](http://underdark.wordpress.com/2010/06/10/dynamic-styling-and-filtering-of-a-geoserver-wms-using-openlayers-layer-wms-post/)用于动态样式设计，因为我有一个参数过滤器，该过滤器依赖于我要求的 WMS 层的特性。问题是我需要在 LegendPanel GeoExt 对象中设置一个图例。我看到，当图例面板向 geoserver 请求图例时，使用 GET 方法调用服务，而当给定的 sld 样式太长时，调用失败。如何强制面板使用 POST 方法？

这就是我的 legendPanel 的定义方式：

```
var legendPanel = new GeoExt.LegendPanel({
    title: "Legenda",
    bodyStyle: "padding:5px",
    labelCls: "mylabel",
    split: true,
    map: map,
    region: "center",
    autoScroll: true
}); 
```

感谢您的任何帮助

M。

# php - 如何在文本框中输入中文

> ID：12404881
> 
> 赞同：0
> 
> 时间：2012-09-13T11:07:44.980
> 
> 标签：php, html

如何在文本框中输入中文。

我尝试将表单中的接受字符集设置为，`accept-charset="Big5"`但它仍然显示英文字符。

我有这个

```
<form accept-charset="Big5" encoding="Big5" method="post">
 <input type="text" name="test">
 <input type="submit" name="submit">
</form> 
```

我的问题是为什么它在打字时仍然显示英文字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:09:09.837

您需要将**输入法**更改为中文输入法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:08:50.743

估计是带中文键盘的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T14:57:52.920

在文本框中输入中文就像在其他地方输入一样。它的工具取决于系统，基本上不是编程问题。例如，在许多系统中，您可以启用一种输入模式，您可以用拼音输入文本，然后在对应的中文字符中进行选择。

该`charset`参数与此无关。它指定表单数据传输中使用的字符编码。通常在网页上使用 UTF-8 比 Big5 更好。

# html - 适用于 Android 的 Html5 Websockets

> ID：12404884
> 
> 赞同：0
> 
> 时间：2012-09-13T11:07:50.920
> 
> 标签：html

我想构建一个 html5 多人赌场游戏，但似乎 Android 不支持 Web 套接字，请大家给我建议任何替代方案.. 提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:19:41.447

您可以[在 caniuse.com](http://caniuse.com/websockets)上了解哪些设备支持 Web Sockets 。这说明你是对的：到目前为止，android 上没有 websockets 支持。另一种方法是使用 ajax 重复获取一个小的 JSON。执行此操作的方法包括[jQuery.getJSON()](http://api.jquery.com/jQuery.getJSON/)、[jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)和[jQuery 的 jsonp 插件](https://github.com/jaubourg/jquery-jsonp)。

# django - django 模型选择满足条件的用户并取交集

> ID：12404886
> 
> 赞同：0
> 
> 时间：2012-09-13T11:07:54.967
> 
> 标签：django, django-models

我有以下两个数据库模型：

```
class UserProfile(models.Model):
    description = models.TextField()

class Channel(models.Model):
    subscribed = models.ManyToManyField(UserProfile, 
                                        related_name="subscribed") 
```

给定一个频道，我想在一列中显示订阅该频道的用户，在另一列中显示*未订阅*该频道的用户。获取订阅频道的用户没有问题。如何选择未订阅频道的用户以及发送未订阅用户的用户资料对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:09:04.417

只需使用`exclude`而不是`filter`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:09:52.907

```
c = Channel.objects.get(pk=1)
subscribed = c.subscribed_set.all()
not_subscribed = UserProfile.objects.exclude(pk__in=[s.pk for s in subscribed]) 
```

# java - 如何从 dom 解析器解析空标签以使用 php webservice

> ID：12404889
> 
> 赞同：0
> 
> 时间：2012-09-13T11:08:06.680
> 
> 标签：java, android, xml, xml-parsing

在我的 xml 中可以有空标签，如`</title>`.

问题是当我解析 xml 时，当我到达 xml 中的这一行时，我得到了空指针异常。

我应该如何在我的解析文件中检查这样的标签？

```
ArrayList<String>textcomment = new ArrayList<String>();         
for(int i = 0;i<nl.getLength();i++) 
{   
    Element e = (Element)nl.item(i);
    // crash on this string find first time a value and second time find </no_of_comments> 
    String noOfcomment = e.getElementsByTagName("no_of_comments").item(0).getFirstChild ().getNodeValue(); 
    aryNoOfcomment.add(i, noOfcomment);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:09:42.733

解析你可以使用这个...

```
FileInputStream fi = new FileInputStream(dir); 
builder = DocumentBuilderFactory.newInstance().newDocumentBuilder(); 
doc =  builder.parse(fi);

NodeList nlorgid = doc.getElementsByTagName("Organization");
String orgidfromxml = ((Element)nlorgid.item(0)).getAttribute("id");
System.out.println(" organization id from xml is "+orgidfromxml); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:17:52.537

有什么问题？

是这条线？

```
String noOfcomment = e.getElementsByTagName ("no_of_comments"). item (0). getFirstChild (). getNodeValue (); 
```

您将所有内容都放在同一行中，因此您不会检查其中一个是否为空。

您可以分开然后检查结果是否为空，如下所示：

```
List<String> yourList = new ArrayList<String>();
NodeList nl = e.getElementsByTagName ("no_of_comments");
if(nl != null){
    for(int i = 0;i<nl.getLength();i++) 
    {   
        Node n = nl.item(i).getFirstChild();
        if(n!=null){
             String value = n.getNodeValue();
             yourList.add(value);
        }
    }
} 
```

# asp.net - 跳转链接在 asp.net iframe 中不起作用

> ID：12404891
> 
> 赞同：0
> 
> 时间：2012-09-13T11:08:14.450
> 
> 标签：asp.net, html, iframe

我在 asp.net 页面中使用 iframe。页面名称是 Home.aspx，iframe id 名称是 frame1。我的框架有一些带有更多标题的html设计。我想使用快速链接搜索标题。但它在 HTML 页面中工作正常，而不是在 asp.net 页面中。请帮我这样做..

我的代码在这里..

```
 <tr>
       <td>
          &nbsp; 1\. <a href="#Employment Application"target="_parent">Employment Application</a>
       </td>
        <td>
          &nbsp; 2\. <a href="#Transfer and Reassignment">Transfer and Reassignment</a>
         </td>
         <td>
            &nbsp; 3\. <a href="#Non-Discrimination">Non-Discrimination</a>
         </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T17:23:27.153

正如比利护城河所说，问题很可能是您`href`在链接属性中使用了空格。这是不允许的，因此您应该更改您`href`的 s**和它们引用的元素的 ID，**以不包含空格：

```
<tr>
    <td>
        &nbsp; 1\. <a href="#EmploymentApplication"target="_parent">Employment Application</a>
    </td>
    <td>
        &nbsp; 2\. <a href="#TransferAndReassignment">Transfer and Reassignment</a>
    </td>
    <td>
        &nbsp; 3\. <a href="#Non-Discrimination">Non-Discrimination</a>
     </td>
</tr> 
```

# node.js - console.log 使用 Node.js 的 GET 请求

> ID：12404896
> 
> 赞同：0
> 
> 时间：2012-09-13T11:08:41.463
> 
> 标签：node.js, express

我正在为我的节点应用程序使用 Express 框架。我对它很陌生，所以我想我会创建一个事实上的“待办事项”应用程序来了解它。我正在尝试做的是记录为调试目的而发出的请求。所以当我去：

```
app.get('/todos/:id', function (req, res) {
    var result = db.load(req.params.id);
    result ? res.send(result) : res.send(404);
}); 
```

我想 a) 查看`result`等于和 b) 记录我的`db.load`方法中发生的情况：

```
exports.load = function (id) {
    todos.findOne({ id: id }, function (err, todo) {
        if (!err) {
            return todo;
        }
    });
} 
```

我正在使用该`mongolian`库来访问我的 MongoDB 数据。我遵循了史蒂夫桑德森的一个例子：[https ://github.com/SteveSanderson/nodejs-webmatrix-video-tutorials](https://github.com/SteveSanderson/nodejs-webmatrix-video-tutorials)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:52:15.603

```
app.get('/todos/:id', function (req, res) {
    db.load(req.params.id, function(err, result) {
        // also handle err
        result ? res.send(result) : res.send(404);
    });
});

exports.load = function (id, callback) {
    todos.findOne({ id: id }, callback);
} 
```

# php - 什么可能导致 php.ini 忽略 error_reporting 指令？

> ID：12404898
> 
> 赞同：3
> 
> 时间：2012-09-13T11:08:46.377
> 
> 标签：php, error-reporting

所以当我在 php.ini 中设置这个指令时

> error_reporting = E_ALL & ~E_DEPRECATED

即使在 apache 重新加载或重新启动后，我仍然会收到这些错误。

> Thu Sep 13 10:51:10 2012] [error] [client 173.59.22.4] PHP Deprecated: Assigning the return value of new by reference is deprecated in

等等等等等等

有任何想法吗？我不知道为什么 php.ini 不会听这个指令不列出弃用。

PHP 5.3.3 (cli)（构建时间：2012 年 7 月 3 日 16:53:21）版权所有 (c) 1997-2010 The PHP Group Zend Engine v2.3.0，版权所有 (c) 1998-2010 Zend Technologies

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-10T10:47:40.130

这花了我很长时间来调试。旧版本的 phprunner 生成的代码由于“不推荐使用的函数 mysql_connect 而崩溃。但是无论我对 error_reporting 做了什么

```
error_reporting(E_ALL & ~E_DEPRECATED); // was being ignored 
```

这是因为代码使用了自己的错误处理函数“错误处理程序”

```
set_error_handler("my_error_handler"); // override error_reporting() 
```

我所要做的就是将以下行添加到函数 my_error_handler()

```
if ($errno==8192) return 0;   // ignore Deprecated 
```

我浪费了很多时间摆弄我的 php.ini，但这与它无关！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T11:10:58.643

error_reporting 可能在您的脚本中的某处被调用。

您可以在错误发生之前使用它来重置它：

```
error_reporting(E_ALL & ~E_DEPRECATED); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-20T02:41:13.670

我的解决方案与 zzapper 相同 - phprunner 的文件名是`phpfunctions.php`这样的：

```
if ($errno==8192) return 0;   // ignore Deprecated 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T11:10:43.550

有[几个地方](http://www.php.net/manual/en/configuration.changes.modes.php)可以更改此设置的值，包括非常常见的`ini_set`功能`error_reporting`。有人正在从其中一个人那里改变它。

# bash - 创建安装程序文件，linux

> ID：12404900
> 
> 赞同：3
> 
> 时间：2012-09-13T11:08:49.390
> 
> 标签：bash, installation

我目前有一个安装 bash 脚本（INSTALL）和一堆程序本身的文件。我想将文件和脚本打包在一个文件中，也许是 tar (?) 并使其可执行，以便在调用时 INSTALL 将运行。

关于我该怎么做的任何想法？如果有的话，常用的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T11:11:49.187

您可以使用[`shar`存档](http://en.wikipedia.org/wiki/Shar)。shar 档案是自包含的可执行 shell 脚本，可自行解包，您可以在脚本解包后执行任何您想要的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T12:00:46.807

在 Linux 世界中，人们期望程序以包的形式出现。最常见的软件包格式是[rpm](http://en.wikipedia.org/wiki/RPM_Package_Manager)（Red Hat、CentOS、Fedora、SuSE 等使用）和[deb](http://en.wikipedia.org/wiki/Deb_%28file_format%29)（Debian、Ubuntu 等使用）。您通常需要为这些发行版的不同版本制作单独的软件包版本（链接到不同的库）。

与 Windows 世界（pre-Market）相比，您有更多的工作要做，因为程序员或分销商需要做大部分跟踪程序依赖关系的工作。最终用户体验更简单：所有软件包安装和后续维护（包括跟踪新版本、升级、卸载等）都通过一个工具（Debian/Ubuntu 上的 APT、Red Hat/Fedora 上的 Yum 等）完成。作为程序员，您可以获得标准工具的好处来构建包，跟踪依赖项（无需打包库：构建工具将添加必要的依赖项）。许多发行版提供了安装软件包的标准渠道，例如 Ubuntu 的[PPA](https://launchpad.net/ubuntu/+ppas)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T11:12:04.393

您可以将其打包为`rpm`.
Rpm 包允许您在解包过程之前和之后使用脚本。

# iphone - kCLLocationAccuracyThreeKilometers 是否使用 GPS 或蜂窝塔？

> ID：12404913
> 
> 赞同：0
> 
> 时间：2012-09-13T11:09:15.597
> 
> 标签：iphone, ios, xcode, gps

请告诉我，如果我使用 kCLLocationAccuracyThreeKilometers 而不是 kCLLocationAccuracyBest。那么我的 iPhone 会使用 GPS 还是手机信号塔？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:41:34.880

它将混合使用内置的 GPS 接收器、蜂窝塔数据和 WiFi 数据来收集最佳位置估计。不能保证它只会使用 WiFi，也没有你可以设置的标志，所以它只使用 WiFi。如果蜂窝数据不可用（例如在远程位置），它将回退到 WiFi 和 GPS 接收器。

使用`kCLLocationAccuracyThreeKilometers`可能会更频繁地依赖 WiFi，但没有 100% 的确定性。但是，它确实使用较少的功率，因此如果它足以满足您的需求，那么您最好使用该标志。

# javascript - 如何将 HTML id 分配给元素以及如何将 JavaScript 应用于它们？

> ID：12404914
> 
> 赞同：0
> 
> 时间：2012-09-13T11:09:17.883
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我开发了一个项目，但现在我想将 JavaScript 应用到项目中。以登录表单为例。我必须将 HTML id 分配给文本字段，但如何？以及如何访问 js 文件中的文本字段？

```
 <% @page_title = 'Staff Area Login' -%>

    <%= form_for(:stuff, :url => {:action => 'send_login'}) do -%>

    <p>Username:  <%= text_field_tag('username', params[:username]) %></p>

    <p>Password: <%= password_field_tag('password') %></p>

    <%= submit_tag("Log in") %>

    <% end -%> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T11:13:14.657

您可以使用 :html 哈希。

```
<%= text_field_tag('username', params[:username], :html => {:id => "username_field"}) %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:14:29.280

您的表单会自动获取 id，就`new_staff`好像您的表单正在作为新表单运行一样，并且会自动获取 id，就`edit_staff`好像您的表单正在作为编辑表单运行一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T11:15:08.130

nt 一个红宝石人 iam，但就我而言，当你创建一个`text-field`这样的人时。ids 已经分配了看看[这里](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-text_field_tag)如果你想通过 id
访问一个特定的然后只需使用OR后者使用 jquery`text-field`
`document.getElementById('ID');``$('#ID')`

# android - 将 Background Drawable 设置为 LinearLayout 会导致 OutOfMemoryError

> ID：12404917
> 
> 赞同：2
> 
> 时间：2012-09-13T11:09:23.693
> 
> 标签：android, drawable

我正在尝试通过拉伸图像以覆盖整个区域而不扭曲其比例来将可绘制图像设置为 LinearLayout 的背景（这意味着图像的某些侧面可能超出屏幕，这对我来说很好）。

```
@Override
 public void onWindowFocusChanged(boolean hasFocus) {
  // TODO Auto-generated method stub
  super.onWindowFocusChanged(hasFocus);

    LinearLayout mainLL = (LinearLayout) findViewById(R.id.main_ll);

    Integer lWidth = mainLL.getWidth();
    Integer lHeight = mainLL.getHeight();

    // Read your drawable from somewhere
    Drawable dr = getResources().getDrawable(R.drawable.cash_bg);
    Bitmap bitmap = ((BitmapDrawable) dr).getBitmap();
    // Scale it the LinearLayout's size
    Drawable d = new BitmapDrawable(Bitmap.createScaledBitmap(bitmap, lWidth, lHeight, true));

    mainLL.setBackgroundDrawable(d);
 } 
```

我在`onWindowFocusChanged`而不是得到布局的宽度和高度`onCreate`，因为我听说否则它们将返回 0（因为布局没有在构造函数中完全呈现）。图像不是那么大，所以我不知道为什么会出现这种内存不足的问题。它是 800x945px JPG，大小为 113kb。

这是错误日志：

```
09-13 11:00:00.067: E/AndroidRuntime(2010): FATAL EXCEPTION: main
09-13 11:00:00.067: E/AndroidRuntime(2010): java.lang.OutOfMemoryError
09-13 11:00:00.067: E/AndroidRuntime(2010):     at android.graphics.Bitmap.nativeCreate(Native Method)
09-13 11:00:00.067: E/AndroidRuntime(2010):     at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
09-13 11:00:00.067: E/AndroidRuntime(2010):     at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
09-13 11:00:00.067: E/AndroidRuntime(2010):     at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
09-13 11:00:00.067: E/AndroidRuntime(2010):     at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:524)
09-13 11:00:00.067: E/AndroidRuntime(2010):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:499)
09-13 11:00:00.067: E/AndroidRuntime(2010):     at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
09-13 11:00:00.067: E/AndroidRuntime(2010):     at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:773)
09-13 11:00:00.067: E/AndroidRuntime(2010):     at android.content.res.Resources.loadDrawable(Resources.java:1937)
09-13 11:00:00.067: E/AndroidRuntime(2010):     at android.content.res.Resources.getDrawable(Resources.java:664)
09-13 11:00:00.067: E/AndroidRuntime(2010):     at com.myapp.something.FVCalculator.onWindowFocusChanged(FVCalculator.java:66)
09-13 11:00:00.067: E/AndroidRuntime(2010):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onWindowFocusChanged(PhoneWindow.java:2346)
09-13 11:00:00.067: E/AndroidRuntime(2010):     at android.view.View.dispatchWindowFocusChanged(View.java:5676)
09-13 11:00:00.067: E/AndroidRuntime(2010):     at android.view.ViewGroup.dispatchWindowFocusChanged(ViewGroup.java:853)
09-13 11:00:00.067: E/AndroidRuntime(2010):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2530)
09-13 11:00:00.067: E/AndroidRuntime(2010):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-13 11:00:00.067: E/AndroidRuntime(2010):     at android.os.Looper.loop(Looper.java:137)
09-13 11:00:00.067: E/AndroidRuntime(2010):     at android.app.ActivityThread.main(ActivityThread.java:4340)
09-13 11:00:00.067: E/AndroidRuntime(2010):     at java.lang.reflect.Method.invokeNative(Native Method)
09-13 11:00:00.067: E/AndroidRuntime(2010):     at java.lang.reflect.Method.invoke(Method.java:511)
09-13 11:00:00.067: E/AndroidRuntime(2010):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-13 11:00:00.067: E/AndroidRuntime(2010):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-13 11:00:00.067: E/AndroidRuntime(2010):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:54:03.403

似乎在 XML 中设置 LinearLayout 的背景不受此内存不足问题的影响（可能图像以不同的方式加载）。

无论如何，在我的情况下，使用这个解决了它在布局文件中解决了它：

```
android:background="@drawable/cash_bg" 
```

我不知道它会如何居中（以及它是否会覆盖整个容器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T11:39:21.967

我做了一个应用程序在加载许多大图像时也遇到了同样的问题。我发现这对我很有帮助 -

[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

据我所知，一些减少位图消耗的内存的方法 -

1.  Bitmap.Config - 默认使用 32bit 显示位图，您可以设置为 24 或 16bit
2.  Bitmap.recycle() - 如果你有很多，释放前一个，然后加载新的
3.  减小位图的宽度和高度

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T11:16:58.813

使用 Bitmap.recycle()。因为每次重建时焦点都会发生变化并且不会释放位图内存。

# java - 我在尝试从服务器获取响应时收到 EOFException

> ID：12404921
> 
> 赞同：0
> 
> 时间：2012-09-13T11:09:43.260
> 
> 标签：java, android

我使用 PrintWriter out 对象。我写数据 out.println(some data) 并用 out.close 关闭它

```
URL url = new URL(myurl);
URLConnection connection = null;
PrintWriter out = null; BufferedReader br = null; connection = url.openConnection(); connection.setDoOutput(true);
out = new PrintWriter(new OutputStreamWriter(connection.getOutputStream()),true);
while(iterations) { 
    //print data on writer 
    out.println(object);
 } 
 //closig print writer
 out.flush(); 
 out.close(); 
 //Response from server
 br = new BufferedReader(new InputStreamReader(connection.getInputStream())); // Get Exception in //this line EOF Exception
 String temp;
 while(temp = br.readLine() !=null) { 
     //do something 
 }
 br.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:55:54.483

```
URL url = new URL(myurl);
 URLConnection connection = null;
 PrintWriter out = null; BufferedReader br = null; connection = url.openConnection(); connection.setDoOutput(true);
 out = new PrintWriter(new OutputStreamWriter(connection.getOutputStream()),true);
 while(iterations)
     { 
//print data on writer 
out.println(object);
 } 
//closig print writer
 out.flush(); 

//Response from server
 br = new BufferedReader(new InputStreamReader(connection.getInputStream())); // Get Exception in //this line EOF Exception
 String temp;
 while(temp = br.readLine() !=null)
{ //do something }
 out.close(); 
```

看看代码，你只需要在最后放 out.close 而不是 br.close。

# linux - Ubuntu 上的只读文件

> ID：12404922
> 
> 赞同：1
> 
> 时间：2012-09-13T11:09:51.050
> 
> 标签：linux, ubuntu

尝试删除文件时，我在[https://help.ubuntu.com/community/DeletingFiles](https://help.ubuntu.com/community/DeletingFiles)的 ubuntu 页面上获得了 rm 命令。在这个页面上，我得到了术语**只读**文件。我试图谷歌**只读文件 linux**，但找不到任何关于此的定义。你能告诉我只读是什么意思吗？这是否意味着所有所有者，组和其他人都只有读取权限？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T11:14:29.173

> > 这是否意味着所有所有者，组和其他人都只有读取权限？

他们可能有不同的权限。但是您（当前用户）只有读取权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T11:15:09.657

Linux 有用户、组和其他三种权限。

1.  **r** : 读取权限
2.  **w** : 写权限
3.  **x** : 执行权限

如果文件是只读的，则意味着您（用户）没有**w**权限，因此您无法删除该文件。

采用：

`chmod +w FILE`

添加该权限。只有当您是文件的所有者时，您才能更改文件权限。

否则，您可以使用 删除文件`sudo`，获得超级用户权限。

`sudo rm FILE`

它会提示您输入密码，并且仅当您在`/etc/sudoers/`文件中时才有效（如果您是唯一的用户，您可能会在该文件中，因为您使用的是 Ubuntu）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T11:11:43.260

只读文件是您无权更改其内容的文件。要查看有关您的权限使用的详细信息`ls -l`；如果要更改权限，请使用`chmod`. 另请参阅[此示例](http://linux.101hacks.com/unix/chmod/)以更好地理解。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-09-13T11:13:33.850

`chmod`使用 sudu更改权限或尝试使用：

`sudo rm file.xxx`

# c# - asp:Panel runat="server" 在 C# .cs 代码页中不可用

> ID：12404924
> 
> 赞同：2
> 
> 时间：2012-09-13T11:09:54.117
> 
> 标签：c#, asp.net, visual-studio, sitecore

**我的 ascx 页面：**

```
<%@ Control Language="c#"  Inherits="FSB.Layouts.Short_Home_Loan_Application" CodeBehind="Short Home Loan Application.ascx.cs" %>    
<div class="form">
<form action="" method="post" rel="shortForm">
    <div class="section">        
         <asp:panel id="shortForm_wrapper" runat="server">
            this is the first panel
         </asp:panel>
         <asp:Panel runat="server" ID="thankYouWrapper" >this is the second panel</asp:Panel>
    </div>     
</form>
</div>

<sc:sublayout runat="server" path="~/layouts/FSB/Document Checklist Lightbox.ascx" id="checklist" /> 
```

**我的 CS 页面：**

```
using System;
using Sitecore.Data.Items;
using Sitecore.Links;
using Sitecore.Data.Fields;
using Sitecore.Web.UI.WebControls;
using System.Net;
using FSB.Helpers;
using System.Configuration;
using System.Text;
using System.Web;
using System.Web.SessionState;

namespace FSB.Layouts {

    public partial class Short_Home_Loan_Application : System.Web.UI.UserControl {    

        protected void Page_Load(object sender, EventArgs e) {
            thankYouWrapper // not accessible here
        }
    }
} 
```

**注意：**这是一个 CMS 项目并使用 Sitecore。我实际上不知道它是什么，这可能会有所帮助。我对 C# 完全陌生，并且被扔进了一堆 C# 网站。

**提前致谢**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T18:24:02.420

我假设您有一个 Web 应用程序项目而不是一个网站项目。因此，在解决方案资源管理器中，导航到您的`*.ascx`文件，展开它以查看 C# 代码隐藏，您还将看到一个`*.ascx.designer.cs`文件。删除那个“设计器”文件。接下来，右键单击您的`*.ascx`文件并选择**转换为 Web 应用程序**，这将重新生成设计器文件。现在尝试通过 C# 访问控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:46:19.520

使用“CodeFile”而不是“CodeBehind”

```
<%@ Control Language="C#" Inherits="FSB.Layouts.Short_Home_Loan_Application" CodeFile="Short Home Loan Application.ascx.cs" %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T13:19:22.923

您可以调整这些元素：

1 代码文件

```
CodeFile="Short_Home_Loan_Application.ascx.cs" %> //AddCodeFile, and set the same name 
```

2 鲁纳特

添加`runat="server"`到您的表单

`Div`3 并用容器替换你的面板

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T11:31:29.467

在您的 ascx 页眉中，修改您的 Inherits 指令以在您的代码后面包含命名空间前缀。

**修订**

我已将您**发布**的原始标记放入测试 Web 应用程序中，并使用 VS2010 使用代码隐藏中可用的正确引用进行干净编译。

该控件是否有可能最初是在不同的名称下、在不同的命名空间中创作的，或者从不同的项目中复制并粘贴到该项目的 shell 源文件中？您遇到的问题似乎与 ASP.NET 在后台生成的中间文件的缺失直接相关，这些文件用于为可在控件源代码隐藏中引用的基于标记的实体建立受保护的声明。如果由于某种原因，VS2010 无法检测到需要重新生成这些中间文件，则标记和源将变得不同步并以类似于您所遇到的方式失败。我显然不能保证这是您的特定问题的原因，但我至少会认为这是一个强烈的嫌疑人。

我会恭敬地建议您通过解决方案资源管理器中的“添加新项目->”选项在 VS2010 中创建一个*全新的控件，并将该控件**中的标记*添加到 ascx 文件（而不是指令行）中，然后查看如果该新控件的代码隐藏可以引用服务器端元素。

祝你好运。

# c# - 如何使用 WCF 服务和 javascript 表单发布上传 .doc 文件

> ID：12404926
> 
> 赞同：1
> 
> 时间：2012-09-13T11:09:55.947
> 
> 标签：c#, javascript, jquery, wcf

我试图从 jQuery 表单帖子上传文件。我使用了以下 html 和 jQuery 代码：

```
<form id="file_upload_form" method="post" enctype="multipart/form-data" action="">
     <input type="file" name="uploadcv" id="uploadcv" size="30" />
</form> 
```

Javascript：

```
var url = ServiceLocation + "/UploadFile";   //ServiceLocation = my service location

$("#file_upload_form").attr("action", url);

$("#file_upload_form").submit(); 
```

在 WCF 部分中，我使用了以下服务方法

```
public string UploadFile(Stream  inputStream)
{
        const int bufferSize = 8 * 1024 * 2;
        byte[] buffer = new byte[bufferSize];
        int bytesRead = inputStream.Read(buffer, 0, bufferSize);
        Stream outputStream = null;
        string newFileName = @"D:\AllTxtFiles.doc";
        outputStream = new FileInfo(newFileName).OpenWrite();

        while (bytesRead > 0)
        {
            outputStream.Write(buffer, 0, bufferSize);
            bytesRead = inputStream.Read(buffer, 0, bufferSize);
        }
        inputStream.Close();
        outputStream.Close();

} 
```

当我尝试上传`.txt`文件时，这有效。但是，我需要上传`.doc`具有不同表格和格式的文件。

当我试图这样做时，`AllTxtFiles.doc`包含一些难以理解的文本。

我尝试并搜索了一整天，但失败了（可能是因为我是 WCF 的新手）。谁能帮我做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-12T22:13:55.840

表单不能发布到流参数，只能发布到流本身：

```
function upload() {
  var request = new XMLHttpRequest();
  request.open('POST', 'wcf/WCFUploader.svc/Upload/');
  request.send(filePicker.files[0]);
} 
```

所有详细信息都可以在这里找到：

[http://www.codeproject.com/Tips/757991/File-Upload-using-WCF-REST-API-and-JavaScript](http://www.codeproject.com/Tips/757991/File-Upload-using-WCF-REST-API-and-JavaScript)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-13T11:43:49.333

以下是有用的链接：

[使用jquery将文件上传到wcf](https://stackoverflow.com/questions/6781633/file-upload-to-wcf-using-jquery)

[使用 HTML5 和/或 jQuery 将文件上传到 WCF 服务](https://stackoverflow.com/questions/8684000/uploading-a-file-to-wcf-service-using-html5-and-or-jquery)

[http://www.codeproject.com/Articles/327420/WCF-REST-Service-with-JSON](http://www.codeproject.com/Articles/327420/WCF-REST-Service-with-JSON)

[http://www.codeproject.com/Articles/166763/WCF-Streaming-Upload-Download-Files-Over-HTTP](http://www.codeproject.com/Articles/166763/WCF-Streaming-Upload-Download-Files-Over-HTTP)

# c# - 如何将 Silverlight 元素的内容设置为视图？

> ID：12404931
> 
> 赞同：0
> 
> 时间：2012-09-13T11:10:15.347
> 
> 标签：c#, .net, silverlight, xaml, telerik

由于出现问题，我正在更新我编写的一些 xaml，而不是使用后面的代码。

`Pane`指的是 Telerik`RadPane`对象。我需要在语义上做的是：

```
pane.Content = PaneView.xaml; 
```

PaneView 是一个包含多个元素和信息的 xaml 文件。这行不通。

我在以前的 xaml 文件中按如下方式工作，因此可以这样做；虽然我不知道怎么做。任何人都可以帮忙吗？

```
<UserControl x:vws="MyProject.ViewFolder.Views">
...

        <telerik:RadPane Header="PaneView" CanUserClose="False" CanFloat="False"
                                     telerik:RadDocking.SerializationTag="PaneView">
                        <vws:PaneView />
        </telerik:RadPane> 
```

我需要什么包装器将我的 xaml 文件放入以强制它工作？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:58:34.030

如果您的 RadPane 控件（XAML）被定义为`x:Class="SomeNameSpaceHere.PaneView"`您可以通过以下方式非常简单地设置内容：

```
pane.Content = new PaneView(); 
```

您可以使用简单的 UserControl 作为容器：

```
<UserControl x:Class="SomeNameSpaceHere.PaneView">
  ...
</UserControl> 
```

# java - 使用自定义类加载器配置 org.apache.log4j.ConsoleAppender

> ID：12404934
> 
> 赞同：10
> 
> 时间：2012-09-13T11:10:30.610
> 
> 标签：java, log4j, classloader, javassist

我有一个 java 类，它在启动时创建一个基于 javassist 类加载器的自定义类加载器，然后运行真正的程序类。我收到以下错误：

```
log4j:ERROR A "org.apache.log4j.ConsoleAppender" object is not assignable to a        
"org.apache.log4j.Appender" variable.
log4j:ERROR The class "org.apache.log4j.Appender" was loaded by 
log4j:ERROR [javassist.Loader@6f97b10a] whereas object of type 
log4j:ERROR "org.apache.log4j.ConsoleAppender" was loaded by 
[java.net.URLClassLoader@5b414a8d].
log4j:ERROR Could not instantiate appender named "stdout". 
```

问题与一个对象是由原始类加载器创建的，而另一个是由自定义类加载器创建的这一事实有关。
有没有办法解决这个错误？

提前致谢，
阿夫纳

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-26T10:15:56.427

请尝试设置-Dlog4j.ignoreTCL=true，希望对您有所帮助。[关于 log4j](https://stackoverflow.com/questions/11719218/classloading-issue-with-osgi)的一个类似问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-07T13:51:58.303

在 maven tomcat 插件配置中添加**log4j.ignoreTCL** 如下图

```
<plugin>
   <groupId>org.apache.tomcat.maven</groupId>
   <artifactId>tomcat7-maven-plugin</artifactId>
   <version>2.1</version>
   <configuration>
      <port>${local.server.port}</port>
      <update>true</update>
      <systemProperties>
         <log4j.configurationFile>${user.dir}\conf\log4j2.xml</log4j.configurationFile>
         <log4j.ignoreTCL>true</log4j.ignoreTCL>
         <java.util.logging.manager>org.apache.logging.log4j.jul.LogManager</java.util.logging.manager>
      </systemProperties>
      <contextReloadable>true</contextReloadable>
   </configuration>
</plugin> 
```

# android - 打算用手指画画吗？

> ID：12404937
> 
> 赞同：0
> 
> 时间：2012-09-13T11:10:36.207
> 
> 标签：android, android-intent

许多 Android 应用程序允许用户在屏幕上绘图。

我的应用程序是一个丰富的内容编辑器，我想允许用户插入图像：

*   来自画廊（已经存在的图像）
*   使用相机应用程序
*   使用绘图应用程序←我的问题是关于这个的

绘图应用程序是否有“标准”意图？
或者至少是大多数绘图应用程序实现的意图？

我检查了：

*   [IMAGE_CAPTURE](http://www.openintents.org/en/node/135)：启动相机，我认为不同的目的。还是通常由绘图应用程序制造商来解释？
*   [GET_CONTENT](http://www.openintents.org/en/node/69)：非常广泛，但如果我找不到更好的，我会使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:13:34.430

查看[OpenIntents 意图数据库](http://www.openintents.org/en/intentstable)并没有找到任何意图，我会说：不，还没有公开共享的绘图意图。

# ios - 添加 armv7s 编译器指令

> ID：12404938
> 
> 赞同：1
> 
> 时间：2012-09-13T11:10:42.840
> 
> 标签：ios, xcode, compilation, iphone-5

在将我的应用程序编译为 armv7s 时，我想省略一些代码。

我知道在编译到 armv7 时，`_ARM_ARCH_7`定义了标志，因此我可以执行以下操作：

```
#ifdef _ARM_ARCH_7
// armv 7 code
#else
// ...
#endif 
```

armv7s 的标志是什么？是`_ARM_ARCH_7S`吗？

# javascript - 上面写代码 使用 Javascript 标记

> ID：12404961
> 
> 赞同：1
> 
> 时间：2012-09-13T11:12:11.273
> 
> 标签：javascript, html

我在网站上放了一个 javascript，我还需要在页面标签上方添加一个打开的图形标签。有没有办法使用 document.write 或任何其他 javascript 方法添加代码，而不是要求用户自己添加代码，这对于没有 html 知识的人来说并不容易。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:16:08.543

这是在 ID 元素之前添加段落的示例代码`someID`：

```
 var writeinTo = document.getElementsByID('someID');
   var para = document.createElement('p');
   writeinTo.parentNode.insertBefore(para, writeinTo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:14:08.627

看看`insertBefore`。如果你使用 jQuery，你可以这样做：

```
$('<meta name="foo" content="bar">').insertBefore('head'); 
```

更新了示例，因为我认为 OP 意味着`<header>`元素，而不是`<head>`.

# javascript - jQuery：使用不同的超时值循环循环

> ID：12404962
> 
> 赞同：1
> 
> 时间：2012-09-13T11:12:15.323
> 
> 标签：javascript, jquery, loops, settimeout

我正在尝试遍历几个不同的值。这个想法是，如果用户单击一个按钮，循环应该开始运行，一旦它运行它应该显示一段代码（在示例中是一些基本文本）。我试图显示一种包含不同信息的对话框，持续时间取决于时间值（毫秒），所以第一个以 3 秒开始，之后第二个应该可见 8 秒，之后最后一个应该运行 2 秒。

我必须进行更改，以便每个循环的时间都不同。下面的示例有一个终止开关，以便我可以终止循环。我希望有人能解决这个问题，我已经尝试了很多小时。

//插件选项

```
 step:[
      {
          time: 3000,
          name: 'mike',
          age: 30
      },
      {
          time: 8000,
          name: 'john',
          age: 37
      },
      {
          time: 2000,
          name: 'jessica',
          age: 25
      }
  ] 
```

// 循环

```
 var timeouts = [];

$('.click').click(function(){
  $.each(options.step, function(i, value){

      var time = value.time;                                                        
      timeouts.push(setTimeout(function(){

          $('#target ul').append('<li>'+value.name+'-'+value.age+'</li>')

      },time));

  });

 }); 
```

// 复位按钮

```
 $('.stop').click(function(){
      $.each(timeouts, function (_, id) {
          clearTimeout(id);
      });
      timeouts = [];
  }); 
```

**编辑：问题是它在循环中需要一个额外的值（0）（第一个值应该是 0），因为第一个 setTimeout 在 3 秒后运行，这意味着其余的将使用那里邻居的值。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T11:20:39.353

您的脚本设置了 3 次超时：在 3 秒内显示迈克，在 8 秒内显示约翰，在 2 秒内显示杰西卡 - 所以杰西卡是第一个。如果您希望它们一次发生一个，则需要累积这些时间：

```
var timeouts = [],
    accum = 0;
$.each(options.step, function(i, value){
    accum += value.time;                                                        
    timeouts.push(setTimeout(function(){
        $('#target ul').append('<li>'+value.name+'-'+value.age+'</li>')
    }, accum));
    // move the addition here if you want them to start immediately
}); 
```

（[在 jsfiddle.net 上的演示](http://jsfiddle.net/WJrWF/1/)，立即开始）

另一种方法是一旦发生一次超时就开始下一次超时，这将允许更容易停止&开始：

```
var cur = 0,
    $ul = $('#target ul'),
    tid;
function next() {
    if (cur >= options.step.length) return; // and call a final callback?
    var value = options.step[cur];
    $ul.append('<li>'+value.name+'-'+value.age+'</li>');
    cur++;
    tid = setTimeout(next, value.time);
}
function stop() {
    clearTimeout(tid);
} 
```

（[在 jsfiddle.net 上的演示](http://jsfiddle.net/WJrWF/)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:51:57.780

这将遍历所有值，并且 setTimeout 将调用函数 wrt 到数据中的时间。“停止”变量应该是一个全局变量，它将充当您的终止开关

```
var stop=0;

$('.stop').click(function(){
     stop=1;
  });
function responseFunction(value)
{
    if(!stop)
   alert(value.name+" "+value.age);
   else return;
}
 $.each(step, function(i, value){
    setTimeout(function(){
                        responseFunction(value);
                        },value.time);
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T11:35:47.140

我只想提供一种代码更少的替代方法。您只需要使用一个名为[jquery-timing](http://creativecouple.github.com/jquery-timing/)的插件。它使 jQuery 中的计时事情变得更容易。

```
$('#target ul').repeat().wait(function(i) {
   this.append('<li>'+options.step[i].name+'-'+options.step[i].age+'</li>');
   return options.step[i].time;
}).until(options.step.length);

function stop() {
   $('#target ul').unwait();
} 
```

* * *

由于我是干净代码的大朋友，这里再次完全相同。但是这次使用命名函数而不是匿名函数：

```
$('#target ul').repeat(addCodeStep).wait(stepTimeout).until(options.step.length);

function addCodeStep(i) {
   this.append('<li>'+options.step[i].name+'-'+options.step[i].age+'</li>');
}

function stepTimeout(i) {
   return options.step[i].time;
}

function stop() {
   $('#target ul').unwait();
} 
```

# java - java.lang.NoSuchMethodException 与构造函数 newInstance

> ID：12404963
> 
> 赞同：4
> 
> 时间：2012-09-13T11:12:19.337
> 
> 标签：java, web, front-controller

我目前正在使用 Java 开发一些 Web 开发项目，我已经实现了一个前端控制器，其工作是根据路径实例化新的控制器。

所以当用户运行 ?q=user/login ex. 前端控制器应该初始化 UserController，我正在尝试使用这段代码。

```
 String q = request.getParameter("q");

    try {
        String[] page = q.split("/");
        // Make first char upper, to match class name conventions.
        page[0] = (page[0].substring(0, 1).toUpperCase() + page[0].substring(1).toLowerCase()).trim();

      Class contDes = Class.forName("dk.elvar.rocks." + page[0]+ "Controller");
      Constructor co = contDes.getConstructor();
      co.newInstance(request, response, page); 
```

这导致一个

```
java.lang.NoSuchMethodException: dk.elvar.rocks.UserController.<init>()
at java.lang.Class.getConstructor0(Class.java:2706)
at java.lang.Class.getConstructor(Class.java:1657)
at dk.elvar.rocks.FrontController.doGet(FrontController.java:35) 
```

我试图在谷歌上查找它，并且在加载对象中声明构造函数、使类公开的错误已经存在。

用户控制器：

```
public class UserController extends HttpServlet  {

private final String USERNAME = "Martin";
private final String PASSWORD = "David";

    private static final long serialVersionUID = 1L;
HttpServletRequest request;  
HttpServletResponse response;

public UserController(HttpServletRequest request, HttpServletResponse response, String[] action)  {
    this.request = request;
    this.response = response;

    if(action[1].equalsIgnoreCase("login")) {
        this.renderLoginAction();
    }
    if(action[1].equalsIgnoreCase("val-login")) {
        this.validateLoginAction();
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-13T11:13:39.120

您可能会收到此异常，因为该类没有默认构造函数。您可以通过将参数传递给方法来获取带有参数的构造函数`getConstructor`：

```
Constructor co = contDes.getConstructor(
                HttpServletRequest.class, 
                HttpServletResponse.class, 
                String[].class);
co.newInstance(request, response, page); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T11:28:31.197

通常不建议使用其他默认构造函数，因为 web.xml 或 struts-config.xml 使用反射来实例化 servlet。

如果你想获取你的类的实例而不是默认构造函数，

```
Class userController = Class.forName("<packages.>UserController");
Constructor userControllerConstructor = userController.class.getConstructor(HttpServletRequest.class, HttpServletResponse.class, String[].class);
UserController userControllerObj = (UserController)constructor.newInstance(request,response, action); 
```

# jquery - jQuery：悬停滑动面板

> ID：12404966
> 
> 赞同：0
> 
> 时间：2012-09-13T11:12:31.047
> 
> 标签：jquery

当您将鼠标悬停在我网站上的特定图像上时，我正在寻找一种方法来制作滑出面板，类似于 Google 搜索所做的。

我还需要这个面板来显示另一个网站页面。我确信可以使用`iframe`PHP 的 cURL 来完成。

这是一个类似于我正在寻找的示例： http: [//srobbin.com/jquery-plugins/pageslide/](http://srobbin.com/jquery-plugins/pageslide/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:24:24.193

很简单，不需要插件：

HTML

```
<img id="imgHover" src="img/photo.png"/>
<div id="panel">
    <iframe src="http://www.website.com"></iframe>
</div> 
```

查询

```
$("#panel").hide();
$("#imgHover").hover(
    function(){
        $("#panel").slideDown();
    },
    function(){
        $("div").slideUp();
    }   
) 
```

工作示例：

[http://jsfiddle.net/kirkas/SULhT/](http://jsfiddle.net/kirkas/SULhT/)

更新

[http://jsfiddle.net/kirkas/aFXNC/](http://jsfiddle.net/kirkas/aFXNC/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T11:28:39.837

它与您提到的非常相似，但是您看过马赛克吗？

[http://buildinternet.com/project/mosaic/1.0/](http://buildinternet.com/project/mosaic/1.0/)

# function - 函数在 PowerShell 中返回布尔值

> ID：12404968
> 
> 赞同：3
> 
> 时间：2012-09-13T11:12:34.570
> 
> 标签：function, powershell, boolean, return-value

我使用 PS Remoting，Powershell 2.0。

我需要调用返回布尔值（$true 或 $false）的函数。

我的功能：

```
Function TryDisableClientForCredSSP()
{
    try 
    {
        WriteTrace "[TryDisableClientForCredSSP]. Disable-WSManCredSSP -Role Client "
        $script=Convert-StringToScriptBlock("Disable-WSManCredSSP -Role Client ")
        Caller($script)

        WriteTrace "[TryDisableClientForCredSSP]. winrm get winrm/config/client/auth [($env:COMPUTERNAME)]"
        $script=Convert-StringToScriptBlock("winrm get winrm/config/client/auth")
        Caller($script);

        return $true;
    }
    catch 
    {
        Write-Verbose "[TryDisableClientForCredSSP] Error "
        Write-Verbose $_
        Write-Host $_.Exception.Message`r`n
        return $false;
    }   
} 
```

注意：WriteTrace 函数只做 Write-Host。

我用这个：

```
 $ok = TryDisableClientForCredSSP;
    WriteTrace   "[TryDisableClientForCredSSP]. $ok"
    if ($ok -eq $true)
    {
        WriteTrace "[TryDisableClientForCredSSP]. OK true"
    }
    else
    {
        WriteTrace "[TryDisableClientForCredSSP]. KO false"
    } 
```

我得到这个输出：

```
[TryDisableClientForCredSSP]. Auth     Basic = true     Digest = true     Kerberos = true     Negotiate = true     Certificate = true     CredSSP = false  True
[TryDisableClientForCredSSP]. OK true 
```

我希望这一行输出“[TryDisableClientForCredSSP].True”

```
 WriteTrace   "[TryDisableClientForCredSSP]. $ok" 
```

有什么建议么 ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T13:46:12.683

函数将每个命令吐出的任何内容返回到输出流。尝试像这样消除该输出：

```
 [void]WriteTrace "[TryDisableClientForCredSSP]. Disable-WSManCredSSP -Role Client "
    $script=Convert-StringToScriptBlock("Disable-WSManCredSSP -Role Client ")
    [void]Caller($script)

    [void]WriteTrace "[TryDisableClientForCredSSP]. winrm get winrm/config/client/auth [($env:COMPUTERNAME)]"
    $script=Convert-StringToScriptBlock("winrm get winrm/config/client/auth")
    [void]Caller($script);

    return $true; 
```

# php - 如何在php中将数组分组为一个数组？

> ID：12404972
> 
> 赞同：0
> 
> 时间：2012-09-13T11:12:52.027
> 
> 标签：php

我想转换/形成以下数组作为示例：

```
Array ( [product_category] => for-women ) Array ( [brand] => 7-diamonds ) Array ( [size] => 12 ) Array ( [color] => 882536 ) 
```

合并到一个数组中，将每个数组对合并并将它们完全放在一起：

```
Array ( [product_category] => for-women [brand] => 7-diamonds [size] => 12 [color] => 882536 ) 
```

我尝试了array_merge，但它没有用。我的代码中输出的数组来自 $_SESSION，它返回一个数组（一对 key=> 值），如下所示：

```
foreach($_SESSION as $k => $v) {
    if (strstr($k, 'saved_query_') == true) {
        $saved = array_merge($v);
    }
} 
```

所以我通过遍历有查询的会话来获取每个数组，结果是数组对，我想组合找到的所有对（不知道在这种情况下如何使用 array_merge）。

我尝试了 array_combine 和 array_merge，它们看起来不像我需要的函数，基于 php 手册：

**array_combine — 通过使用一个数组作为键和另一个作为其值来创建一个数组**

我不想这样做，我只想在一个数组中复制/移动小数组，而不更改任何配对/键/值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:15:56.640

使用**[array_merge_recursive()](http://www.php.net/manual/en/function.array-merge-recursive.php)**：

`$result = array_merge_recursive($ar1, $ar2 [, array $...]);`

示例：[http ://codepad.viper-7.com/Yr0LTb](http://codepad.viper-7.com/Yr0LTb)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T11:17:42.083

您可以尝试使用[array_merge](http://php.net/manual/en/function.array-merge.php)

```
$array0 = Array ( "product_category" => "for-women" );
$array1 = Array ( "brand" => "7-diamonds" ) ;
$array2 = Array ( "size" => "12" ) ;
$array3 = Array ( "color" => "882536" );

$array = array_merge($array0,$array1,$array2,$array3);

print_r($array); 
```

输出

```
Array ( [product_category] => for-women [brand] => 7-diamonds [size] => 12 [color] => 882536 ) 
```

[看演示](http://codepad.viper-7.com/8U4WWW)

*** - - - 更新 - - - ***

如果您正在浏览会话

```
$_SESSION = Array();
$_SESSION[0] = Array("product_category" => "for-women");
$_SESSION[1] = Array("brand" => "7-diamonds");
$_SESSION[2] = Array("size" => "12");
$_SESSION[3] = Array("color" => "882536");

$final = array();
foreach ( $_SESSION as $key => $value ) {
    $final = array_merge($final, $value);
}

print_r($final); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T11:13:43.377

改为使用`array_merge`。

```
$ret = array_merge($arr1, $arr2, $arr3); 
```

使用您的代码，您应该执行以下操作：

```
$saved = array_merge($saved, $v); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T11:16:04.927

你应该看看 PHP 中的 array_merge() 函数：http: [//php.net/manual/en/function.array-merge.php](http://php.net/manual/en/function.array-merge.php)

简单使用如下：

```
$array1 = Array ( [product_category] => for-women );
$array2 = Array ( [brand] => 7-diamonds );
$array3 = Array ( [size] => 12 );
$array4 = Array ( [color] => 882536 );

$combined = array_merge($array1, $array2, $array3, $array4); 
```

# php - 从 5.2.x 到 5.3.14 的 PHP 更新导致了区域设置问题

> ID：12404986
> 
> 赞同：0
> 
> 时间：2012-09-13T11:13:40.293
> 
> 标签：php, pear

我们的服务器最近完成了更新（PHP 从 5.2.x 更新到 5.3.14）由于此更新，我们无法使用由 __autoload() 运行的自定义 Locale 类 据我了解，这是由现有的 Locale 类引起的“梨”中的一些地方

有没有办法让我在不将我的类名从 Locale 更改为其他名称的情况下解决这个冲突问题（基本上是一些如何强制 PEAR 语言环境不加载或仅针对 Locale 请求忽略它）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:27:43.347

由于`Locale`现在是原生 PHP 类，因此您无法直接覆盖它，这就是您的代码不再有效的原因。

解决方案：

1.  重建您的 PHP 副本，使其不包含 Locale 模块。可能不是一个好主意，而且绝对不利于兼容性，但如果你很绝望，可以考虑。

2.  重命名您的班级。有一些重构工具可以使这类事情变得相当容易。

3.  使用 PHP 5.3 的命名空间功能为您的 Locale 类提供与内置 Locale 类不同的命名空间。将命名空间子句添加到类文件的顶部，并将`use`命名空间添加到要引用 Locale 类而不是内置类的任何位置。

2 和 3 之间的选择取决于您。我建议 2，因为您的类在功能上可能与 PHP 不相似，因此您需要远离它。但是，如果您想保留当前的类名，命名空间解决方案也是一种选择。

# hibernate - 比较日期休眠条件查询

> ID：12404988
> 
> 赞同：0
> 
> 时间：2012-09-13T11:13:45.847
> 
> 标签：hibernate, date, criteria, equality

我有跟随 ceode 到“创意”类的所有领域。有些字段是日期。

```
Criteria creativeCriteria = getSession().createCriteria(PcmCreative.class);
    for(Entry<String,Object> mapEntry : propValMap.entrySet()){
        if(mapEntry.getValue() == null){
            creativeCriteria.add(Restrictions.isNull(mapEntry.getKey()));
            //creativeCriteria.add(Restrictions.disjunction().add(Restrictions.isNull(mapEntry.getKey())).add(Restrictions.eq(mapEntry.getKey(),mapEntry.getValue())));
        }else{
            creativeCriteria.add(Restrictions.eq(mapEntry.getKey(),mapEntry.getValue()));
        }
    }
    creativeCriteria.createAlias("campaign", "c").add(Restrictions.eq("c.campaignNumber", campaignNumber));
    creativeCriteria.setProjection(Projections.rowCount());
    return (Integer)creativeCriteria.uniqueResult(); 
```

我使用以下代码格式化我的日期：

```
 String strDate = DateUtils.convertDateToString((Date)     fieldValue,CmtConstants.CMTDATE_MYSQL_COMPARISION_FORMAT);
//fieldValue = DateUtils.convertStringToDate(strDate,CmtConstants.CMTDATE_MYSQL_COMPARISION_FORMAT); 
```

其中 CMTDATE_MYSQL_COMPARISION_FORMAT 是 'yyyy-mm-dd'。

但比较失败。作为 DateUtils.convertStringToDate 返回的日期，它在内部使用 SimpleDateFormat.parse 方法，它也包含 GMT 字符串，我认为它在休眠中失败了 critrai 相等性。任何解决方案如何删除 GMT 字符串并获取仅包含日期和时间部分的日期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:48:17.280

在添加日期格式之前，您需要编写实用程序来转换日期格式，标准如下。

```
 private java.sql.Date getSQLDate(Object dateObj) {

    SimpleDateFormat sdf = null;
    try {

        sdf = new SimpleDateFormat("yyyy-mm-dd");
        java.util.Date utilDate = sdf.parse((String) dateObj);
        if (utilDate == null) {
            return null;
        } else {
            return new java.sql.Date(utilDate.getTime());
        }

    } catch (ParseException parseEx) {
       }

} 
```

# sql - 重组索引和碎片整理级别

> ID：12404991
> 
> 赞同：0
> 
> 时间：2012-09-13T11:14:05.460
> 
> 标签：sql, sql-server, sql-server-2008, indexing, reorganize

我在[这里](http://realworlddba.wordpress.com/2008/02/04/index-rebuild-versus-reorganize-whats-the-difference/)找到了这个问题，但还没有答案：

如果索引碎片严重（超过 50%），是否会`alter index reorganize`降低碎片级别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:09:39.960

是的，它会——但只是在一定程度上。索引重组只会围绕索引的叶级页面进行洗牌，并会尝试压缩这些页面 - 但它不会完全重建索​​引结构。所以它可以消除一些碎片——但只能在有限的范围内。

这就是为什么根据经验，对于大于约 30% 的碎片（或者您可能想要选择不同的阈值，例如 25%，具体取决于您的情况），您应该**重建**索引 - 而不仅仅是重新索引。Rebuild 还会更新对良好查询计划至关重要的统计信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T12:26:15.940

它是否会取决于碎片的性质。

Reorganize 不会分配新页面，因此无法删除由于非连续范围而发生的碎片。它通过交换页面来工作。即，它确定属于叶级的第一个物理页面和叶级的第一个逻辑页面，如果它们不同，则交换内容。

如果我尝试以下操作，我会看到重组将碎片从 99.9% 降至 0.9%

```
CREATE TABLE T( [ID] [int] IDENTITY NOT NULL,
                 [Filler] [char](8000) NULL,
                 PRIMARY KEY CLUSTERED ([ID] DESC))

GO

INSERT INTO T DEFAULT VALUES
GO 1000

SELECT object_name(object_id) AS name, 
       page_count, 
       avg_fragmentation_in_percent, 
       fragment_count, 
       avg_fragment_size_in_pages 
FROM 
sys.dm_db_index_physical_stats(db_id(), object_id('T'), 1, NULL, 'DETAILED') 
WHERE  index_level = 0 

SET STATISTICS IO ON;
ALTER INDEX ALL ON T
REORGANIZE ; 

SELECT object_name(object_id) AS name, 
       page_count, 
       avg_fragmentation_in_percent, 
       fragment_count, 
       avg_fragment_size_in_pages 
FROM 
sys.dm_db_index_physical_stats(db_id(), object_id('T'), 1, NULL, 'DETAILED') 
WHERE  index_level = 0 
```

# c++ - 从 CIN 声明动态二维数组

> ID：12404993
> 
> 赞同：0
> 
> 时间：2012-09-13T11:14:07.647
> 
> 标签：c++, arrays

我正在寻找更改我在这里找到的游戏 TOH 的[代码](http://www.cpp-home.com/forum/viewtopic.php?f=11&t=4251)

我想让它询问有多少磁盘...然后如果输入 3。然后我会将代码中所有数组的 [8] 更改为 [3]。还是有更好的方法？

我正在研究并发现[这一点](http://www.cplusplus.com/doc/tutorial/dynamic/)，但它在二维数组中不起作用。

我如何在这里使用向量..将行 [8] 更改为用户输入..

```
struct World{

   int t[3][8];
   int cursor;
   int chosen;

}; 
```

我的 int main 是在哪里询问“多少行......”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:48:32.570

改用 a [`std::vector<std::vector<int>>`](http://en.cppreference.com/w/cpp/container/vector)。这会自动处理动态分配。

例如：

```
#include <iostream>
#include <vector>

int main()
{
    //
    // *** Validation of input omitted: you must do this. ***
    //
    size_t rows;
    std::cout << "Enter number of rows: ";
    std::cin >> rows;

    std::cout << "Enter number of columns: ";
    size_t columns;
    std::cin >> columns;

    std::vector<std::vector<int> > ints(rows, std::vector<int>(columns));

    for (size_t ri = 0; ri < rows; ri++)
    {
        for (size_t ci = 0; ci < columns; ci++)
        {
            std::cout << "Enter value for [" << ri << ", " << ci << "]: ";
            std::cin >> ints[ri][ci];
        }
    }

    for (size_t ri = 0; ri < ints.size(); ri++)
    {
        for (size_t ci = 0, size = ints[ri].size(); ci < size; ci++)
        {
            std::cout << "["
                      << ri
                      << ", "
                      << ci
                      << "]="
                      << ints[ri][ci]
                      << "\n";
        }
    }

    return 0;
} 
```

# android - 如何在不保存在收件箱的情况下阅读和删除短信

> ID：12404994
> 
> 赞同：-2
> 
> 时间：2012-09-13T11:14:07.453
> 
> 标签：android, sms

我想从特定号码读取短信然后删除而不将其保存在收件箱中。下面是我读取短信的代码，但此代码将短信保存在收件箱中。阅读后如何从特定号码中删除短信？

```
public class SmsReceiver extends BroadcastReceiver 
{
public static  String SMSstr;
public void onReceive(Context context, Intent intent) 
{
    //---get the SMS message passed in---
    Bundle bundle = intent.getExtras();        
    SmsMessage[] msgs = null;
    String str = "";  

    if (bundle != null)
    {
        //---retrieve the SMS message received---
        Object[] pdus = (Object[]) bundle.get("pdus");
        msgs = new SmsMessage[pdus.length];            
        for (int i=0; i<msgs.length; i++){
            msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                

            String phNum = msgs[i].getOriginatingAddress();  

            str += msgs[i].getMessageBody().toString();
            if ("15555215556".equals(phNum))
            {
                // delete code goes here

                Intent l = new Intent(context,AgAppMenu.class);
                l.putExtra("msg",str);
                l.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                context.startActivity(l);
                Toast.makeText(context, "SucessFull Login", Toast.LENGTH_SHORT).show();
            }
        }

         <receiver android:name=".SmsReceiver" android:enabled="true"> 
     <!--       <intent-filter >-->
            <intent-filter android:priority="1000"> 
            <action android:name=
                "android.provider.Telephony.SMS_RECEIVED" /> 
       </intent-filter> 
    </receiver> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T11:16:20.733

如果您想删除消息，只需`abortBroadcast()`在检查所需来源后调用！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T11:25:06.377

试试下面的代码，

```
String specificPhoneNumber = "9898989898";

String addr = msg[i].getOriginatingAddress().trim();  // to get the SMS Number

if ( addr.trim().equals ( specificPhoneNumber.trim() )
{
      // delete SMS
      Cursor c = getContentResolver().query(SMS_INBOX, null, null, null, null);
      String pid = c.getString(1);
      String uri = "content://sms/conversations/" + pid; 
      getContentResolver().delete(Uri.parse(uri), null, null);
} 
```

# forms - playframework 2.0 在表单外使用表单数据

> ID：12404995
> 
> 赞同：1
> 
> 时间：2012-09-13T11:14:08.950
> 
> 标签：forms, input, get, playframework-2.0

我有一个表格。我使用的输入字段之一是链接，另一个是描述。

```
@inputText(dealForm("link"), '_label -> "Web Link")
@inputText(dealForm("desc"), '_label -> "Description") 
```

一切都适用于表格。

现在我想按表格行拆分页面，所以左侧包含表单。我想在表单中的值链接指向的右侧（在 iframe 中）显示网页。我不确定如何访问“链接”的表单数据以在 iframe 中使用。

我尝试了以下

```
 1) iframe width="800"  height="600" src="request.dealForm.get("link")"

 2) iframe width="800"  height="600" src="dealForm.get("link")" 
```

我收到以下错误

> For request 'GET /deals/request.dealForm.get(' [Cannot parse parameter id as Long: For input string: "request.dealForm.get("]

我是新手玩框架，这里的任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:12:50.757

在 Play 看来，这两个都应该有效：

```
src='dealForm("link").value'
src='dealForm.field("link").value' 
```

此外，您可能可以使用 JavaScript（即 jQuery）通过 AJAX 将其他页面加载到某些页面，而无需在字段`DIV`更改后重新加载整个页面。`link`