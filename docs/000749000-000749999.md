# StackOverflow 问答 000749000-000749999

# python - Django：如何使用存储的模型实例作为表单选择？

> ID：749000
> 
> 赞同：9
> 
> 时间：2009-04-14T19:24:39.440
> 
> 标签：python, django, django-forms

我有一个模型，它本质上只是一个字符串（django.db.models.CharField）。将仅存储该模型的几个实例。我如何将这些值用作表单中的选择？

为了说明，该模型可以是`BlogTopic`。我想为用户提供选择一个或多个主题来订阅的能力。

我开始写类似的东西：

```
from mysite.blog.models import BlogTopic

choices = [(topic.id, topic.name) for topic in BlogTopic.objects.all()]

class SubscribeForm(forms.Form):
    topics = forms.ChoiceField(choices=choices) 
```

但我不确定什么时候`choices`会被定义。我假设仅在第一次导入模块时（即启动 Django 时）。显然这不是一个很好的方法。

这似乎是一个常见的要求，但我似乎找不到任何例子。我怀疑我可能在这里遗漏了一些明显的东西。无论如何，提前感谢您的回答。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-04-14T19:28:43.580

```
topics = forms.ModelMultipleChoiceField(queryset=BlogTopic.objects.all()) 
```

# c# - 查找未使用的枚举成员

> ID：749004
> 
> 赞同：2
> 
> 时间：2009-04-14T19:25:01.733
> 
> 标签：c#, enums

确定未使用枚举的哪些成员的最快方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-14T19:28:25.483

将枚举成员一一注释掉，看看你的代码是否可以编译。如果编译中断，则使用该成员。尽管此方法仅捕获枚举的编译时使用。它们可以在运行时使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-14T19:26:50.933

在枚举的每个成员上使用查找引用是我能想到的最快方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-14T19:43:21.673

如果您使用[ReSharper](http://www.jetbrains.com/resharper/)，请单击枚举进行检查，按 Alt+F7（如果您使用 VS 快捷方式，请按 Shift+F12），它会为您提供整个解决方案中使用的每个位置的列表。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-14T20:28:31.517

为了安全起见，您可以用 标记您的成员`ObsoleteAttribute`。如果使用给定的成员，则添加`[Obsolete(true)]`将使构建失败。

This can obviously be used not only for enums but for nearly anything in .NET.

Resharper is your tool of choice if you need to delete the members from a solution and you're not worried about another uses in different solutions.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-14T19:26:34.333

Ctrl-F 并在整个命名空间/项目中搜索该枚举成员

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-14T19:28:04.860

评论/取消评论成员。如果编译器没有抛出错误，则不使用枚举成员。

更新：正如评论中提到的，这当然只适用于解决方案/活动构建配置中包含的项目。*Find References*和*Ctrl+F*方法也是如此。

否则，也可以选择进行文件搜索，例如使用 grep。但是，此选项仅允许进行基于字符串的搜索，并且不解析任何类型。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-14T19:29:52.063

如果您使用的是 VS2005/8 Ctrl-Shift-F，请在文件中搜索。这将为您提供一个文件列表，您可以双击这些文件以转到行。

如果你不使用 VS，那么你可以使用 WinGrep，它会做同样的事情（没有双击功能）

# c# - 创建循环以在回调函数运行时暂停脚本

> ID：749007
> 
> 赞同：1
> 
> 时间：2009-04-14T19:26:29.250
> 
> 标签：c#, .net, event-handling

我目前正在使用第三方组件来处理 .NET 中的 telnet 连接。我希望它是同步的，我将命令发送到接收 Telnet 服务器，然后我将响应作为文本或字节数组返回。唯一的问题是该组件未设置为执行此操作。该组件允许我向服务器发送命令，但响应是通过函数句柄返回的。所以本质上，我需要一种方法来在处理程序处理它时暂停应用程序。这是我计划如何解决该问题的示例：

```
 static void Main(string[] args)
    {
        Telnet telCon = new Telnet();
        telCon.OnDataIn += new Telnet.OnDataInHandler(HandleDataIn);
        telCon.Connect(remoteHostStr);

        while (true) ;
    }

    public static void HandleDataIn(object sender, TelnetDataInEventArgs e)
    {
        string responseStr = e.Text;

        if (responseStr.Contains("Username:"))
        {
            ((Telnet)sender).Send(System.Text.ASCIIEncoding.ASCII.GetBytes(username));
        }
        else if (responseStr.Contains("Password:"))
        {
            ((Telnet)sender).Send(System.Text.ASCIIEncoding.ASCII.GetBytes(password));
        }
    } 
```

上面的解决方案将不起作用，因为`while`它将始终运行，但我可能会构建一个使用某种全局变量来跟踪循环是否仍需要运行的未来版本。然而，我所学到的关于编程的一切都表明这是非常肮脏的。谁能想到解决我的困境的另一种方法？

谢谢，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-15T02:32:10.207

这是一个使用 ManualResetEvent 暂停执行（并延迟程序结束）直到您的事件处理程序说它完成的示例。

```
static ManualResetEvent finishGate;

static void Main(string[] args)
{
    finishGate = new ManualResetEvent(false); // initial state unsignaled

    Telnet telCon = new Telnet();
    telCon.OnDataIn += new Telnet.OnDataInHandler(HandleDataIn);
    telCon.Connect(remoteHostStr);

    finishGate.WaitOne(); // waits until the gate is signaled
}

public static void HandleDataIn(object sender, TelnetDataInEventArgs e)
{
    // handle event

    if (processingComplete)
        finishGate.Set(); // signals the gate
} 
```

ManualResetEvent 的 WaitOne() 方法还包括接受时间跨度或毫秒数的覆盖。它返回 bool - 如果发出信号则返回 true，如果超时则返回 false。如果你把它放在一个循环中，你可以让你的主线程每 30 秒唤醒一次并执行一些内务处理任务，但是当门发出信号时仍然会有即时响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T19:48:17.573

你的while循环：

```
while(true) ; 
```

将 CPU 使用率提高到 100%（嗯，多核机器上 1 个核心的 100%）并将其永久保留在那里。

这将使其他进程的 CPU 资源匮乏，并且可能会阻止 Telnet 组件工作*，*因为您绕过了消息泵。

有更好的方法，但是如果没有更多关于你在做什么的信息，就很难给你建议。

首先，您想要一个 WindowsForms/WPF/Console 应用程序吗？

[*请*使用评论来回答，而不是答案。]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T19:53:54.317

通常，当您*确实*需要等待时，请使用[WaitHandle](http://msdn.microsoft.com/en-us/library/system.threading.waithandle.aspx)。在这种情况下，[ManualResetEvent](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx)可能就是您需要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-14T19:56:51.907

更好的方法是将 Telnet 处理派生到另一个线程。这样你就可以让主线程等待 telnet 处理完成。

在[这里](http://www.albahari.com/threading/#_Introduction)查看一些关于线程的非常好的教程。

# .net - 以管理员权限运行安装项目（内置于 .NET）

> ID：749011
> 
> 赞同：0
> 
> 时间：2009-04-14T19:27:03.537
> 
> 标签：.net, installation, admin, privileges

我已经在 Visual Studio 2008 中创建了安装项目。如何以管理员权限运行此安装程序 - 我已尝试右键单击，以管理员身份运行。Vista 不会提示我输入密码。我错过了什么吗？

PK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T19:42:33.187

当您右键单击并选择“以管理员身份运行”时，您会得到任何类型的弹出对话框吗？另外，您的设置应用程序是否实际运行？

如果您收到“Windows 需要您的许可才能继续”对话框，并且没有密码输入框，那么您已经以管理员身份登录，并且系统只会提示您为应用程序授予高完整性。如果您想被提示输入密码，您需要使用标准用户帐户登录。

如果您根本没有弹出对话框，那么我的猜测是发生了以下情况之一：

*   您已完全关闭用户帐户控制 (UAC) 检查控制面板中的“用户帐户”下。
*   您从标准用户帐户运行，并且 UAC 配置为“无提示：失败并且如果需要管理员权限则不要启动程序”。显然，这仅在您的应用程序无法启动时才相关。

有关 UAC 的更多信息，请[点击此处](http://en.wikipedia.org/wiki/User_Account_Control)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T19:41:07.653

第一个问题：是否启用了 UAC？

如果您想确保使用提升的令牌运行安装程序，您始终可以打开提升的命令提示符并从那里运行安装程序。要获得提升的命令提示符，请单击，`Start`然后键入`cmd`.`Ctrl+Shift+Enter`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T19:59:38.780

安装程序是否编译 MSI、exe 或两者？如果安装程序在编译后只是一个 MSI 文件，则 MSI 安装程序应该在它实际开始安装应用程序之前要求您提升权限（通常在“准备安装”页面上）。

# teamcity - 您在 teamcity 中的哪里设置电子邮件设置？

> ID：749014
> 
> 赞同：16
> 
> 时间：2009-04-14T19:27:46.873
> 
> 标签：teamcity

我是 teamcity 的新手，所以请多多包涵

我设置了一个电子邮件通知程序，以在构建失败时通知我，但 TeamCity 报告以下错误：

> 无法通过 SMTP 服务器邮件发送电子邮件通知，原因是错误：未知 SMTP 主机：邮件；嵌套异常是：java.net.UnknownHostException：邮件

对于我的生活，我找不到在哪里配置邮件服务器设置。我什至不希望它使用 SMTP 服务器，但我在任何地方都看不到任何选项。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-04-14T19:31:09.270

```
Option                 Description 
------                 ----------
SMTP host              Specify the SMTP host name.
SMTP port              Specify the SMTP port number.
Send messages from     Specify the email address, from which notification messages will be sent to the user.
SMTP login             Specify the SMTP login name, if any.
SMTP password          Specify the SMTP password.
Use TLS (SSL)          Select this option to secure your SMTP connection with TLS.
                       (This feature is only available in TeamCity 3.1+)
Test connection        Click this button to establish a connection with the specified SMTP host.
Save                   Click this button to save changes and close the page. 
```

来源： http: [//www.jetbrains.net/confluence/display/TCD3/Email+and+Jabber+Notifier+Settings](http://www.jetbrains.net/confluence/display/TCD3/Email+and+Jabber+Notifier+Settings)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-05T16:18:43.737

您可以在管理 - 服务器配置 - 电子邮件通知程序下配置您的电子邮件设置。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-05T09:45:41.663

Sumeru 的回答 ( [https://stackoverflow.com/a/825701/86627](https://stackoverflow.com/a/825701/86627) ) 描述了您需要设置的邮件帐户，以便 TeamCity 能够发送电子邮件通知。实际通知是基于每个用户发送的。每个用户都可以定义他们希望接收的通知。在 teamCity Professional 7x 中，您可以在以下位置执行此操作：用户名/我的设置和工具/观看的构建和通知/电子邮件通知程序

# .net - 调试 ASP.NET MVC 框架

> ID：749023
> 
> 赞同：1
> 
> 时间：2009-04-14T19:30:02.267
> 
> 标签：.net, asp.net-mvc, visual-studio-2008, debugging

在 Visual Studio 2008 中调试我自己的 ASP.NET MVC 应用程序时，我必须做什么才能进入 ASP.NET MVC 框架功能？我目前已经通过[MSI 安装程序](http://www.microsoft.com/downloads/details.aspx?FamilyID=53289097-73ce-43bf-b6a6-35e00103cb4b&displaylang=en#filelist)安装了框架。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T19:32:43.023

您可以从 Codeplex 下载[源代码](http://www.codeplex.com/aspnet)，并将解压到的文件夹添加到 Visual Studio 的搜索路径中。（我认为在工具->选项->调试器中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T19:38:13.277

asp.net mvc 现已发布 - 一旦您安装了 vs2008 模板（这是安装的一部分）[http://www.microsoft.com/downloads/details.aspx?FamilyID=53289097-73ce-43bf-b6a6-35e00103cb4b&displaylang=恩](http://www.microsoft.com/downloads/details.aspx?FamilyID=53289097-73ce-43bf-b6a6-35e00103cb4b&displaylang=en)你不应该做任何事情来调试。确保您有对 System.web.mvc 和路由 dll 的引用。还要检查 web 配置文件的调试属性，并检查（如果在 IIS 下运行）然后 IIS 已启用调试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T19:59:10.217

感谢您的建议，但由于调试器由于某种未知原因仍然跳过了 MVC 代码，我只是下载了 MVC 源，将其作为项目添加到我的解决方案中并从那里引用它。现在我可以完美调试框架了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-07-15T11:37:41.253

我关注了这篇博文：Steve Sanders 的**[使用 ASP.NET MVC 源代码调试您的应用程序](http://blog.codeville.net/2009/02/03/using-the-aspnet-mvc-source-code-to-debug-your-app/)**。

它按预期/想要的方式工作。

# sql - 在 SQL Server 2005 中处理此约束的最佳方法是什么？

> ID：749025
> 
> 赞同：-1
> 
> 时间：2009-04-14T19:30:14.200
> 
> 标签：sql, sql-server, sql-server-2005, triggers, constraints

我有基于 SMS 的调查应用程序，它包含一个调查域和一个答案。

我收到了详细 DDL 的请求，所以.... 数据库看起来像[这样](https://imgur.com/7QFE.jpg)

**SurveyAnswer.Answer 在该 SurveyDomain 的所有活动**调查中必须是唯一的。在 SQL 术语中，这应该总是返回 0..1 行：

```
select * from survey s, surveyanswer sa
where s.surveyid = sa.surveyid and
      s.active = 1 and
      s.surveydomainid = @surveydomainid
      sa.answer = @answer 
```

我计划在应用程序级别处理此约束，但也希望强制执行一些数据库完整性。做这个的最好方式是什么？扳机？可能在约束中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T19:37:28.270

当您覆盖 2 个表时，AFAIK 只有两种方法来执行此操作。

1.  按照您的建议触发。
2.  跨 3 列具有唯一约束的索引视图。

就可靠性而言，我会选择索引视图，但唯一的缺点是第三方很难理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T19:50:52.153

可以添加在 UDF 中实现的约束，如下所示：

```
alter table MyTable add constraint complexConstraint
check (dbo.complexConstraintFct()=0) 
```

其中 complexConstraintFct 将是一个包含对其他表的查询的函数。然而，这种方法存在一些问题，因为检查约束被设计为一次在单行上评估，但更新一次可能会影响不止一行。

所以，底线是：**坚持使用触发器**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T19:40:09.777

假设您正在使用存储过程来执行 DML 操作，您可以向 SP 添加一个保护子句，该子句将答案添加到调查中以检查是否存在等效答案。然后，您可以抛出异常或返回状态代码以指示无法添加答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-14T19:52:00.543

您不能在行级别执行此操作（例如 CHECK 约束），因此您必须拥有可以查看所有行的东西

触发器可以发送“不错的”消息，但它们在 DML 语句之后运行。您可以很好地控制处理。

索引视图会阻止 DML 语句，但会给出技术错误消息。这是一个额外的对象*和索引*来维护。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-04-14T20:13:50.913

我认为您的意思是，对于任何活跃的问题，元组 (surveyDomain、surveyQuestion、surveyAnswer) 必须是唯一的？

或者换句话说，如果调查处于活动状态，survey:surveyanswer 是 1:1，即使survey:surveyanswer 设置为 1:many。

如果是这样，答案是改变你的表结构。在调查中添加一个可为空的 activeAnswerId 列将有效地使关系为 1:1；您现有的约束唯一 SurveyId（或唯一 SurveyId、SurvetDomainId）将足以强制执行唯一性。

确实，除非我有误解，否则我很惊讶 Survey 有一个 Question 栏。我希望 Survey:Question 是 1:many（一项调查有很多问题）或者甚至 many:many，如果一个问题可以出现在多个调查中。

更一般地说，我怀疑弄清楚如何强制执行约束很困难并且需要触发器或用户定义的函数等“英雄”的原因，是模式无法准确建模您的问题域的症状。

OP评论：

> 不，你错过了它。调查：答案是 1:n。“问题”是调查问题 - 元组将是 (SurveyDomain.SurveyDomainId, Survey.Answer)

你的意思是，对于每个域，最多只有一个答案？同样，查看您的架构，它充其量只是误导。一个调查域有很多调查（每个调查都有一个问题列），一个调查有很多答案？（[架构](https://imgur.com/7QFE.jpg)）

但是如果设置了调查的活动位，应该只有一个答案吗？

调查是问题的误称吗？

目前还不清楚您要建模的内容。

同样，如果很难添加约束，则表明您的模型不起作用。

# xcode - 如何为 xcode 添加全局包含路径

> ID：749027
> 
> 赞同：18
> 
> 时间：2009-04-14T19:30:58.987
> 
> 标签：xcode, macos, include

我想在使用 Xcode 时将 ~/include 添加到*所有*`CPLUS_INCLUDE_PATH`项目的包含路径中，例如在 Linux 中设置环境变量。（有关 Linux 的相关问题，请参见[此处](https://stackoverflow.com/questions/558803/how-to-add-a-default-include-path-for-gcc-in-linux)。）

这在 Xcode 中可能吗？我尝试设置上述环境变量，但它似乎不起作用。（如果可能的话，我还想设置相关的路径，比如 LIBRARY_PATH 和 LD_LIBRARY_PATH。）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-04-15T02:13:47.757

根据[Apple 的文档](http://developer.apple.com/documentation/developertools/Conceptual/XcodeBuildSystem/300-Build_Settings/bs_build_settings.html#//apple_ref/doc/uid/TP40002691-SW5)，您可以使用[环境变量](http://developer.apple.com/qa/qa2001/qa1067.html)为任何构建设置提供默认值。

在这种情况下，您需要设置`HEADER_SEARCH_PATHS`. 由于某种原因，我不明白，这不起作用。它适用于其他构建设置（例如 OTHER_CFLAGS），但不适用于`HEADER_SEARCH_PATHS`. 您可以通过在构建设置窗口中打开研究助手（左下角的预订按钮）来查看任何设置的变量名称。

一个有效的 var 是`USER_HEADER_SEARCH_PATHS`，这就像您想要的一样，但仅适用于双引号中的路径（而不是尖括号中的路径。）

所以

```
#include "bar.h" 
```

会工作，但是

```
#include <bar.h> 
```

不会。

从上面关于环境变量的文章中引用的构建设置 plist 最终应该看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>USER_HEADER_SEARCH_PATHS</key>
    <string>~/test</string>
</dict>
</plist> 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-13T22:43:44.820

对于任何试图实现这一目标的*幸运宝贝*，或者在这个*后山狮世界中对**全局环境变量的**任何其他*破解`~/.MacOSX/environment.plist`，请查看[EnvPane - 用于环境变量的 OS X 首选项窗格](https://github.com/mralexgray/EnvPane)

 **> EnvPane 是 Mac OS X 10.8 (Mountain Lion) 的首选项窗格，可让您在图形和终端会话中为所有程序设置环境变量。它不仅恢复了对 Mountain Lion 中 ~/.MacOSX/environment.plist 的支持，它还立即发布您对环境的更改，而无需注销并重新登录。即使通过手动编辑 ~/ .MacOSX/environment.plist，而不仅仅是通过首选项窗格进行的更改。

![在此处输入图像描述](https://i.stack.imgur.com/tSljh.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T19:52:59.060

将`HEADER_SEARCH_PATHS`构建设置添加到您的 Xcode 项目中。此设置采用空格分隔的路径列表，如果路径以双星 ( `**`) 结尾，它将递归搜索子目录。因此，要回答您的示例，请设置`HEADER_SEARCH_PATHS`为：

```
~/include 
```

如果您有许多要包含的路径，您可以将其设置为：

```
~/include ~/my_other_includes/** /usr/local/special_frameworks/** 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-03-12T14:30:55.703

只需在“组和文件选项卡”中选择一个 .c 或 .m 文件，然后通过 RMB 选择“获取信息”，然后在“构建”下，您可以添加额外的编译器标志，如 -I 以获得额外的包含搜索路径。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2009-04-15T17:27:57.793

构建设置不是环境变量，环境变量也不是构建设置。设置环境变量不会影响 Xcode 构建。

`USER_HEADER_SEARCH_PATHS`是一个构建设置，将路径列表放入其中将实现您想要的。如果您在目标的检查器中设置该值，它将仅对该目标生效（并且仅对您指定的构建配置生效）。如果您在项目检查器中设置它，它将在项目中的所有目标中生效，除非目标用自己的设置覆盖它。

对于特定于您的机器的路径，您可能应该在 Xcode Preferences 中定义一个 Source Tree，例如`LOCAL_INCLUDE = ~/include`. 然后`USER_HEADER_SEARCH_PATHS = $(LOCAL_INCLUDE)`在项目中定义。这样，其他人可以打开您的项目并通过将其源树设置为他们机器上本地包含的特定位置来构建它，而无需更改项目文件。

# c# - Keep a http connection alive in C#?

> ID：749030
> 
> 赞同：10
> 
> 时间：2009-04-14T19:31:11.763
> 
> 标签：c#, http, httpwebrequest

How do i keep a connection alive in C#? I'm not doing it right. Am i suppose to create an HttpWebRequest obj and use it to go to any URLs i need? i dont see a way to visit a url other then the HttpWebRequest.Create static method.

How do i create a connection, keep it alive, browse multiple pages/media on the page and support proxys? (i hear proxy are easy and support is almost standard?) -edit- good answers. How do i request a 2nd url?

```
{
HttpWebRequest WebRequestObject = (HttpWebRequest)HttpWebRequest.Create("http://google.com");
WebRequestObject.KeepAlive = true;
//do stuff
WebRequestObject.Something("http://www.google.com/intl/en_ALL/images/logo.gif");
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-04-14T19:34:28.637

Have you tried the [HttpWebRequest.KeepAlive](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.keepalive.aspx) property? It sets the appropriate Keep-Alive HTTP header and does persist the connections. (Of course this must also be supported and enabled by the remote web server).

The [HttpWebRequest.KeepAlive](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.keepalive.aspx) documentation on MSDN states that it is set to **true** by default for HTTP1.1 connections, so I suspect the server you're trying to contact does not allow connection persistence.

Proxy is used automatically and its settings are taken from your system (read Internet Explorer) settings. It is also possible to override the proxy settings via [HttpWebRequest.Proxy](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.proxy.aspx) property or by tweaking the application configuration file (see [http://msdn.microsoft.com/en-us/library/kd3cf2ex.aspx](http://msdn.microsoft.com/en-us/library/kd3cf2ex.aspx)).

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-14T19:34:29.167

Set [HttpWebRequest.KeepAlive](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.keepalive.aspx) property True .NET will take care of the rest. It's just database connection pool. **Works transparently.**

You can create new connection freely .NET will figure it out that you are connecting an already connected server and will use it. Also depends on your `Net.ServicePointManager.DefaultConnectionLimit` number it will establish new connections (*if you do multhithreading*).

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-14T19:33:57.810

You can set the [HttpWebRequest.KeepAlive](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.keepalive.aspx) property to true.

For the Proxies, there is a property also: [HttpWebRequest.Proxy](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.proxy.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-11T18:29:02.800

当 HttpWebRequest.KeepAlive = true 不足以使其保持活力时，我遇到了类似的问题。只有在我设置 request.UnsafeAuthenticatedConnectionSharing = true 和 ServicePointManager.MaxServicePointIdleTime = 100000;//避免 0 或低值后连接才保持

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-14T22:00:18.870

如果您使用的是 Http 1.1，则不应使用 Keep-Alive，因为连接是隐式 Keep-Alive。

可以设置该`HttpWebRequest.KeepAlive`属性，但如果您发送 Http 1.1 请求，除非您将其设置为 Close，否则它实际上不会设置标头。

这是另一个包含更多信息的问题： [HTTP/1.1 请求是否默认隐式保持活动？](https://stackoverflow.com/questions/7927566/is-an-http-1-1-request-implicitly-keep-alive-by-default)

# perl - 如何使用 Perl SOAP 获取 JIRA 中的自定义字段列表？

> ID：749038
> 
> 赞同：3
> 
> 时间：2009-04-14T19:34:06.873
> 
> 标签：perl, soap, jira

我很好奇是否有人知道如何获取您在 JIRA 中创建的所有自定义字段的列表？如果是这样，你是怎么做到的？

我一直在尝试使用在[JIRA SOAP 服务文档](http://docs.atlassian.com/software/jira/docs/api/rpc-jira-plugin/latest/index.html?com/atlassian/jira/rpc/soap/JiraSoapService.html "JIRA SOAP 服务文档")中找到的 Perl SOAP 例程，但我不知道如何实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2011-03-31T00:55:01.580

**注意：**您需要管理员才能访问自定义字段

```
my $soap = SOAP::Lite->proxy("http://jira_url/rpc/soap/jirasoapservice-v2?wsdl") or die $!;
my $login = $soap->login($user,$passwd)->result();
my $cfresult = $soap->getCustomFields($login);
my $cfarray = $cfresult->result;
my %cfhash;

foreach $cfld (@{$cfarray}) {
    $cfhash{$cfld->{'name'}} = $cfld->{'id'}; 
} 
```

# sql - 有没有针对 n 列检查规则的好方法？

> ID：749044
> 
> 赞同：1
> 
> 时间：2009-04-14T19:35:08.340
> 
> 标签：sql, rule-engine

假设您有一个表 RULES，其中包含 3 列 A、B 和 C。当数据进入系统时，我想知道 RULES 表的任何行是否与我的数据匹配，条件是 RULES 表中的相应列是否为空，所有数据匹配。显而易见的 SQL 是：

```
SELECT * FROM RULES
WHERE (A = :a OR A IS NULL)
  AND (B = :b OR B IS NULL)
  AND (C = :c OR C IS NULL) 
```

所以如果我有规则：

```
规则ABC
1 50 空 空
2 51 xyz 空
3 51 空 123
4 空 xyz 456

```

(50, xyz, 456) 的输入将匹配规则 1 和 4。

**问题：**有没有更好的方法来做到这一点？只有 3 个字段，这没问题。但实际的表将有 15 列，我担心 SQL 的扩展性如何。

**推测：**我想出的另一种 SQL 语句涉及向表中添加一个额外的列，并计算有多少字段不为空。（因此在示例中，规则 1-4 的此列值分别为 1、2、2 和 2。）使用此“col_count”列，选择可以是：

```
SELECT * FROM RULES
WHERE (CASE WHEN A = :a THEN 1 ELSE 0 END)
    + (CASE WHEN B = :b THEN 1 ELSE 0 END)
    + (CASE WHEN C = :c THEN 1 ELSE 0 END)
    = COL_COUNT 
```

不幸的是，我没有足够的样本数据来找到我们这些方法中的哪一种表现更好。在我开始创建随机规则之前，我想我会在这里询问是否有更好的方法。

**注意：**数据挖掘技术和列约束在这里是不可行的。数据进入系统时必须进行检查，因此可以立即将其标记为通过/失败。而且，用户控制规则的添加或删除，因此我无法将规则转换为列约束或其他数据定义语句。

最后一件事，最后我需要一个数据未能通过的所有规则的列表。解决方案不能在第一次失败时中止。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T19:55:00.133

您提供的第一个查询是完美的。我真的怀疑添加您所说的列会给您带来更快的速度，因为无论如何都会检查每个条目的 NOT NULL 属性，因为每次与 NULL 的比较都会产生错误。所以我猜想这`x=y`会扩展到`x IS NOT NULL AND x=y`内部。也许其他人可以澄清这一点。

我能想到的所有其他优化都涉及预先计算或缓存。您可以创建匹配某些规则的 [临时] 表或添加更多包含匹配规则的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T19:54:01.290

是否有太多行/规则？如果不是这种情况（这是主观的，但说少于 10,000），您可以为所有列创建索引。

这将显着提高速度，索引不会占用太多空间。

如果您不打算制作一个庞大的规则表，那么我敢打赌，只要您索引所有列，您的方法就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T19:57:42.467

为什么不按值对规则表进行索引？那么你就可以

```
SELECT myvalue FROM RULES_A 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-14T20:29:25.680

听起来你真正拥有的是规则和规则集。以这种方式对其进行建模不仅会使这种特定的编码更加简单，而且当您决定需要 16 列时，还会使模型可扩展。

例如：

```
CREATE TABLE Rules (
    rule_id         INT         NOT NULL,
    rule_category   CHAR(1)     NOT NULL, -- This is like your column idea
    rule_int_value  INT         NULL,
    rule_str_value  VARCHAR(20) NULL,
    CONSTRAINT PK_Rules PRIMARY KEY CLUSTERED (rule_id),
    CONSTRAINT CK_Rules_one_value CHECK (rule_int_value IS NULL OR rule_str_value IS NULL)
)

CREATE TABLE Rule_Sets (
    rule_set_id INT NOT NULL,
    rule_id     INT NOT NULL,
    CONSTRAINT PK_Rule_Sets PRIMARY KEY CLUSTERED (rule_set_id, rule_id)
) 
```

一些符合您给定规则的数据：

```
INSERT INTO Rules (rule_id, rule_category, rule_int_value, rule_str_value)
VALUES (1, 'A', 50, NULL)
INSERT INTO Rules (rule_id, rule_category, rule_int_value, rule_str_value)
VALUES (2, 'A', 51, NULL)
INSERT INTO Rules (rule_id, rule_category, rule_int_value, rule_str_value)
VALUES (3, 'B', NULL, 'xyz')
INSERT INTO Rules (rule_id, rule_category, rule_int_value, rule_str_value)
VALUES (4, 'C', 123, NULL)
INSERT INTO Rules (rule_id, rule_category, rule_int_value, rule_str_value)
VALUES (5, 'C', 456, NULL)

INSERT INTO Rule_Sets (rule_set_id, rule_id) VALUES (1, 1)
INSERT INTO Rule_Sets (rule_set_id, rule_id) VALUES (2, 2)
INSERT INTO Rule_Sets (rule_set_id, rule_id) VALUES (2, 3)
INSERT INTO Rule_Sets (rule_set_id, rule_id) VALUES (3, 2)
INSERT INTO Rule_Sets (rule_set_id, rule_id) VALUES (3, 4)
INSERT INTO Rule_Sets (rule_set_id, rule_id) VALUES (4, 3)
INSERT INTO Rule_Sets (rule_set_id, rule_id) VALUES (4, 5) 
```

确认您期望的相同答案的测试脚本：

```
DECLARE
    @a  INT,
    @b  VARCHAR(20),
    @c  INT

SET @a = 50
SET @b = 'xyz'
SET @c = 456

SELECT DISTINCT
    rule_set_id AS failed_rule_set_id
FROM
    Rule_Sets RS
WHERE
    NOT EXISTS (SELECT * FROM Rules R WHERE R.rule_id = RS.rule_id AND @a = R.rule_int_value) AND
    NOT EXISTS (SELECT * FROM Rules R WHERE R.rule_id = RS.rule_id AND @b = R.rule_str_value) AND
    NOT EXISTS (SELECT * FROM Rules R WHERE R.rule_id = RS.rule_id AND @c = R.rule_int_value) 
```

如果您可以以基于集合的形式而不是作为单个参数来呈现输入数据，那么最终的 SQL 语句可以更加动态，并且在您添加其他列时不必增长。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-14T20:59:49.273

```
SELECT * FROM RULES
 WHERE (A = :a OR A IS NULL)
   AND (B = :b OR B IS NULL)
   AND (C = :c OR C IS NULL); 
```

根据您的 RBDMS，这可能会或可能不会更有效，尽管效率不高：

```
SELECT * FROM RULES
 WHERE coalesce(A, :a) = :a
   AND coalesce(B, :b) = :b 
   AND coalesce(C, :c) = :c ; 
```

在 MySQL 中（您的 RBDMS 可能会以不同的方式执行此操作） ，如果存在适用的索引，则此查询允许`index`扫描而不是扫描。`ref_or_null`如果索引涵盖所有列，则允许使用整个索引（实际上，如果索引涵盖所有列，则索引*就是*表）。

使用您的查询，`ref_or_null`完成访问而不是`index`访问，并且仅使用多列索引中的第一列。使用`ref_or_null`，MySQL 必须在索引中搜索匹配项，然后再次搜索空值。所以我们使用了两次索引，但从不使用整个索引。

但是使用合并，您需要对每个列值执行合并函数的开销。哪个更快可能取决于您有多少规则、每行中有多少列以及使用的索引（如果有）。

它是否更具可读性是一个见仁见智的问题。

# python - Passing a multi-line string as an argument to a script in Windows

> ID：749049
> 
> 赞同：8
> 
> 时间：2009-04-14T19:37:10.410
> 
> 标签：python, windows, string, dos, batch-file

I have a simple python script like so:

```
import sys

lines = sys.argv[1]

for line in lines.splitlines():
    print line 
```

I want to call it from the command line (or a .bat file) but the first argument may (and probably will) be a string with multiple lines in it. How does one do this?

Of course, this works:

```
import sys

lines = """This is a string
It has multiple lines
there are three total"""

for line in lines.splitlines():
    print line 
```

But I need to be able to process an argument line-by-line.

EDIT: This is probably more of a Windows command-line problem than a Python problem.

EDIT 2: Thanks for all of the good suggestions. It doesn't look like it's possible. I can't use another shell because I'm actually trying to invoke the script from another program which seems to use the Windows command-line behind the scenes.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2010-05-08T18:26:32.480

我知道这个线程已经很老了，但是我在尝试解决类似问题时遇到了它，其他人也可能如此，所以让我向您展示我是如何解决它的。

这至少在 Windows XP Pro 上有效，Zack 的代码在一个名为
“C:\Scratch\test.py”的文件中：

```
C:\Scratch>test.py "This is a string"^
More?
More? "It has multiple lines"^
More?
More? "There are three total"
This is a string
It has multiple lines
There are three total

C:\Scratch> 
```

这比上面 Romulo 的解决方案更具可读性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T19:44:13.980

Just enclose the argument in quotes:

```
$ python args.py "This is a string
> It has multiple lines
> there are three total"
This is a string
It has multiple lines
there are three total 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T20:47:10.803

以下可能有效：

```
C:\> python something.py "This is a string^
More?
More? It has multiple lines^
More?
More? There are three total" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-16T17:47:40.777

这是唯一对我有用的东西：

```
C:\> python a.py This" "is" "a" "string^
More?
More? It" "has" "multiple" "lines^
More?
More? There" "are" "three" "total 
```

对我来说， [Johannes 的解决方案](https://stackoverflow.com/questions/749049/passing-a-multi-line-string-as-an-argument-to-a-script-in-windows/749323#749323)在第一行的末尾调用了 python 解释器，所以我没有机会传递额外的行。

但是你说你是从另一个进程调用 python 脚本，而不是从命令行。那你为什么不使用[dbr' 解决方案](https://stackoverflow.com/questions/749049/passing-a-multi-line-string-as-an-argument-to-a-script-in-windows/749319#749319)呢？这对我来说是一个 Ruby 脚本：

```
puts `python a.py "This is a string\nIt has multiple lines\nThere are three total"` 
```

你用什么语言编写调用python脚本的程序？您遇到的问题是*参数传递*，而不是 windows shell，不是 Python ......

最后，正如[mattkemp](https://stackoverflow.com/questions/749049/passing-a-multi-line-string-as-an-argument-to-a-script-in-windows/749329#749329)所说，我还建议您使用标准输入来读取您的多行参数，避免使用命令行魔法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-14T20:46:04.580

不确定 Windows 命令行，但以下是否可行？

```
> python myscript.py "This is a string\nIt has multiple lines\there are three total" 
```

..或者..

```
> python myscript.py "This is a string\
It has [...]\
there are [...]" 
```

如果没有，我建议安装 Cygwin 并使用健全的外壳！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-14T20:49:39.300

您是否尝试过将多行文本设置为变量，然后将其扩展传递到您的脚本中。例如：

```
set Text="This is a string
It has multiple lines
there are three total"
python args.py %Text% 
```

或者，您可以从标准输入中读取，而不是读取参数。

```
import sys

for line in iter(sys.stdin.readline, ''):
    print line 
```

在 Linux 上，您可以将多行文本通过管道传输到 args.py 的标准输入。

$ <产生文本的命令> | 蟒蛇args.py

# c# - 如果在 ListBox 中选择了 X 项以上，则恢复为先前的选择

> ID：749057
> 
> 赞同：2
> 
> 时间：2009-04-14T19:40:29.217
> 
> 标签：c#, listbox, multi-select

我有一个文本框，我想将所选项目的数量限制为 MaxSelection。期望的行为是一旦选择了 MaxSelection 项目，任何进一步的选择都将被忽略。（因此这个问题不同于“[在 vb.net 的列表框中限制选择](https://stackoverflow.com/questions/541883/limit-selections-in-a-listbox-in-vb-net)”）。

我有一个用于尝试完成此操作的列表框的 SelectedIndexChanged 事件的事件处理程序。如果用户使用 Ctrl 键单击选择第 (MaxSelection+1) 项，则选择恢复为先前的选择。

问题是当用户选择一个项目，然后按住 Shift 键单击列表下方的项目，即 MaxSelection+1 项目在列表下方。在这种情况下，会引发多个 SelectedIndexChanged 事件：一个用于 Shift-click 事件，该事件选择被 Shift-clicked 的项目，一个用于选择原始选择和 Shift-clicked 选择之间的所有项目。这些事件中的第一个允许用户选择按住 Shift 键单击的项目（这在技术上是正确的），然后第二个事件将选择恢复为第一个事件之后的选择（这将是最初选择的项目和 Shift -单击的项目）。所需要的是代码会将选择恢复为第一个事件之前的选择（这只是最初选择的项目）。

有没有办法在 Shift 单击之前保留选择？

谢谢，罗伯

这是 SelectedIndexChanged 事件处理程序：

```
 void ChildSelectionChanged(object sender, EventArgs e)
    {
        ListBox listBox = sender as ListBox;

        //If the number of selected items is greater than the number the user is allowed to select
        if ((this.MaxSelection != null) && (listBox.SelectedItems.Count > this.MaxSelection))
        {
            //Prevent this method from running while reverting the selection
            listBox.SelectedIndexChanged -= ChildSelectionChanged;

            //Revert the selection to the previous selection
            try
            {
                for (int index = 0; index < listBox.Items.Count; index++)
                {
                    if (listBox.SelectedIndices.Contains(index) && !this.previousSelection.Contains(index))
                    {
                        listBox.SetSelected(index, false);
                    }
                }
            }
            finally
            {
                //Re-enable this method as an event handler for the selection change event
                listBox.SelectedIndexChanged += ChildSelectionChanged;
            }
        }
        else
        {
            //Store the current selection
            this.previousSelection.Clear();
            foreach (int selectedIndex in listBox.SelectedIndices)
            {
                this.previousSelection.Add(selectedIndex);
            }

            //Let any interested code know the selection has changed.
            //(We do not do this in the case where the selection would put
            //the selected count above max since we revert the selection;
            //there is no net effect in that case.)
            RaiseSelectionChangedEvent();
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T19:45:01.530

一些第 3 方组件具有可取消的事件，例如 BeforeSelectedIndexChanged。

但是在使用MS默认组件时，我认为你的方法基本上就是你所需要的。您还可以将选择存储在已知在更改之前触发的其他事件（例如 MouseDown 或 KeyDown）中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-15T18:23:38.440

感谢 Lucero 的洞察力，即我可以将代码存储在另一个事件中，我能够使用 MouseUp 创建一个解决方案。正如对 Lucero 问题的评论中所述，MouseDown 在 SelectedValueChange 事件之后触发，因此我必须改用 MouseUp。这是代码：

```
 /// <summary>
    /// Handle the ListBox's SelectedValueChanged event, revert the selection if there are too many selected
    /// </summary>
    /// <param name="sender">the sending object</param>
    /// <param name="e">the event args</param>
    void ChildSelectionChanged(object sender, EventArgs e)
    {
        ListBox listBox = sender as ListBox;

        //If the number of selected items is greater than the number the user is allowed to select
        if ((this.MaxSelection != null) && (listBox.SelectedItems.Count > this.MaxSelection))
        {
            //Prevent this method from running while reverting the selection
            listBox.SelectedIndexChanged -= ChildSelectionChanged;

            //Revert the selection to the previously stored selection
            try
            {
                for (int index = 0; index < listBox.Items.Count; index++)
                {
                    if (listBox.SelectedIndices.Contains(index) && !this.previousSelection.Contains(index))
                    {
                        listBox.SetSelected(index, false);
                    }
                }
            }
            catch (ArgumentOutOfRangeException ex)
            {
            }
            catch (InvalidOperationException ex)
            {
            }
            finally
            {
                //Re-enable this method as an event handler for the selection change event
                listBox.SelectedIndexChanged += ChildSelectionChanged;
            }
        }
        else
        {
            RaiseSelectionChangedEvent();
        }
    }

    /// <summary>
    /// Handle the ListBox's MouseUp event, store the selection state.
    /// </summary>
    /// <param name="sender">the sending object</param>
    /// <param name="e">the event args</param>
    /// <remarks>This method saves the state of selection of the list box into a class member.
    /// This is used by the SelectedValueChanged handler such that when the user selects more 
    /// items than they are allowed to, it will revert the selection to the state saved here 
    /// in this MouseUp handler, which is the state of the selection at the end of the previous
    /// mouse click.  
    /// We have to use the MouseUp event since:
    /// a) the SelectedValueChanged event is called multiple times when a Shift-click is made;
    /// the first time it fires the item that was Shift-clicked is selected, the next time it
    /// fires, the rest of the items intended by the Shift-click are selected.  Thus using the
    /// SelectedValueChanged handler to store the selection state would fail in the following
    /// scenario:
    ///   i)   the user is allowed to select 2 items max
    ///   ii)  the user clicks Line1
    ///   iii) the SelectedValueChanged fires, the max has not been exceeded, selection stored
    ///        let's call it Selection_A which contains Line1
    ///   iii) the user Shift-clicks and item 2 lines down from the first selection called Line3
    ///   iv)  the SelectedValueChanged fires, the selection shows that only Line1 and Line3 are
    ///        selected, hence the max has not been exceeded, selection stored let's call it 
    ///        Selection_B which contains Line1, Line3
    ///   v)   the SelectedValueChanged fires again, this time Line1, Line2, and Line3 are selected,
    ///        hence the max has been exceeded so we revert to the previously stored selection
    ///        which is Selection_B, what we wanted was to revert to Selection_A
    /// b) the MouseDown event fires after the first SelectedValueChanged event, hence saving the 
    /// state in MouseDown also stores the state at the wrong time.</remarks>
    private void valuesListBox_MouseUp(object sender, MouseEventArgs e)
    {
        if (this.MaxSelection == null)
        {
            return;
        }

        ListBox listBox = sender as ListBox;

        //Store the current selection
        this.previousSelection.Clear();
        foreach (int selectedIndex in listBox.SelectedIndices)
        {
            this.previousSelection.Add(selectedIndex);
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-03T11:18:49.330

我认为这是简单的方法，在示例中限制为 6 项。

```
string[] lbitems;
private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    ListBox listBox = (ListBox)sender;
    if (listBox.SelectedItems.Count == 7)
    {
        for (int i = 0; i < listBox.SelectedItems.Count; i++)
        {
            bool trovato = false;
            for (int j = 0; j < lbitems.Length; j++)
            {
                if (listBox.SelectedItems[i] == lbitems[j])
                {
                    trovato = true;
                    break;
                }
            }

            if (trovato == false)
            {
                listBox.SelectedItems.Remove(listBox.SelectedItems[i]);
                break;
            }
        }
    }
    else
    {
        lbitems = new string[listBox.SelectedItems.Count];
        listBox.SelectedItems.CopyTo(lbitems, 0);
    }
} 
```

# c++ - 在 C++ 中，如何获取指向向量的指针？

> ID：749061
> 
> 赞同：3
> 
> 时间：2009-04-14T19:42:11.707
> 
> 标签：c++, pointers, vector

我正在编写一些 C++ 代码来操作一堆大小不断变化并因此不断重新分配的向量。

我想在这些向量中获得一个“指针”，即使在重新分配向量之后仍然有效。更具体地说，我只想让这些“指针”记住它们指向的向量以及它们指向的索引。当我使用标准 (*ptr) 语法取消引用它们时，我只想让它们进行明显的查找。

显然，实际指针在重新分配后将无效，我的理解是迭代器在重新分配后也无效。还要注意，我不在乎元素是否插入到我的对象之前，所以这些“指针”真的不需要记住任何东西，只需要一个向量和一个索引。

现在，我可以很容易地自己编写这样一个类。有人（Boost？STL？）已经为我做过了吗？

**编辑**：答案没有解决我的问题。 *我问这个功能是否是任何标准库。* 我将回答视为“否”？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-04-14T19:50:02.517

尝试 std::pair<vector*, int>，因为向量的位置和元素的索引都不会改变。
或者，作为一个班级：

```
template<class T> class VectorElementPointer
{
  vector<T>& vectorref;
  typename vector<T>::size_type index;
public:
  VectorElementPointer(vector<T>& vref, typename vector<T>::size_type index):vectorref(vref),index(index){}
  T& operator*() const {return vectorref[index];}
  T* operator->() const {return &vectorref[index];}
}; 
```

这是我想到的最简单的解决方案，因为 STL 和 Boost 都不包含任何更容易做到的东西。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-14T19:49:22.173

[一篇关于持久迭代器的文章](http://www.ddj.com/cpp/184403596)，包含[实现](http://www.ddj.com/showArticle.jhtml?documentID=cuj9901getov&pgno=2)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-14T20:23:52.323

总结一些想法。这是试图模仿迭代器但与向量相反的极简包装器。

```
void print(const std::string& i)
{
    std::cout << "<" << i << "> ";
}
int main()
{
    typedef std::vector<std::string> Vector;

    Vector v;
    v.push_back("H");
    v.push_back("E");
    v.push_back("W");
    StrongIterator<Vector> it0(v, 0);
    StrongIterator<Vector> it3(v, v.end());

    std::for_each(it0.it(), it3.it(), print);
    std::cout << std::endl;

    v.push_back("O");
    std::for_each(it0.it(), it3.it(), print);

    std::cout << *it0;
    std::cout << it0->c_str();

    return 0;
} 
```

和迭代器本身。

```
template <typename TVector>
class StrongIterator
{
public:
    typedef typename TVector::iterator iterator;
    typedef typename TVector::size_type size_type;
    typedef typename TVector::value_type value_type;
    StrongIterator(TVector& vector,
                   size_type index):
        vector_(vector),
        index_(index)
    {}
    StrongIterator(TVector& vector,
                   iterator it):
        vector_(vector),
        index_(std::distance(vector.begin(), it))
    {}
    iterator it()
    {
        iterator it = vector_.begin();
        std::advance(it, index_);
        return it;
    }
    value_type& operator*()
    {
        return vector_[index_];
    }
    value_type* operator->()
    {
        return &vector_[index_];
    }
private:
    TVector& vector_;
    size_type index_;
}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-14T19:47:03.613

不幸的是，一旦您修改了向量，将不再保证“指向”向量元素的迭代器是有效的。我所知道的唯一 STL 结构即使在结构发生变化时也能保持迭代器有效是 list<>。如果您只想对结构进行顺序迭代，则可以使用 std::list<> 否则我不知道任何其他可以帮助您的库；这并不意味着没有。

这是关于 std::list 的一些明确文档：[http ://www.cplusplus.com/reference/stl/list/](http://www.cplusplus.com/reference/stl/list/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-14T21:34:40.610

使用[boost::iterator_facade](http://www.boost.org/doc/libs/1_38_0/libs/iterator/doc/iterator_facade.html)：

```
// Warning: Untested, not even compiled
template<class VectorT>
class VectorIndex : 
    public boost::iterator_facade<VectorIndex, typename VectorT::reference, boost::random_access_traversal_tag>
{
public:
    VectorIndex(VectorT& Vec, typename VectorT::size_type Index)
    : m_Vec(Vec), m_Index(Index)
    {
    }

private:
    friend class boost::iterator_core_access;

    void increment()
    {
        ++m_Index;
    }

    void decrement()
    {
        --m_Index;
    } 

    void advance(difference_type N)
    {
        m_Index += N;
    }

    difference_type distance_to(const VectorIndex& Other)
    {
        assert(&this->m_Vec == &Other.m_Vec);
        return Other.m_Index = this->m_Index; 
    }

    bool equal(const VectorIndex& Other)const
    {
        return (this->m_Vec == Other.m_Vec)
            && (this->m_Index == Other.m_Index);
    }

    VectorT::reference dereference() const 
    {
        return m_Vec[m_Index];
    }

    VectorT m_Vec;
    VectorT::size_type m_Index;
}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-14T19:47:40.633

除非您编写自己的向量和智能指针版本，否则指针在重新分配后不会有效。如果您有自己的实现，智能向量可以向您的智能指针发送通知。

但是我认为整个场景是一个糟糕的设计，你可能最好重新设计你的场景，这样你就没有这样的要求。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-14T20:13:38.637

根据您的使用模式，**std::deque**可能会满足您的要求。仅当您插入或删除不在开头或结尾的项目时，指向双端队列的指针才会失效 - 换句话说 push_front() 和 push_back() 不会使指向双端队列的指针失效，但其他更改会。你得到了与向量基本相同的接口，但当然底层存储是不连续的。

# c - Impact of int array's size on type equivalence

> ID：749068
> 
> 赞同：2
> 
> 时间：2009-04-14T19:43:28.163
> 
> 标签：c, type-equivalence

I'm reading about Type Equivalence in my Programming Languages class and I've come across a situation in C I'm unsure about.

It describes C's "Type Equivalence" as:

> C uses a form of type equivalence that falls between name and structural equivalence, and which can be loosely described as "name equivalence for structs and unions, structural equivalence for everything else."

So what if I have two arrays of different size, but the same base type:

```
typedef int A1[10];  
typedef int A2[20]; 
```

Since all I need is structural equivalence, could these two be considered structurally equivalent? In C, is the size of the index set part of an array type or no?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-14T19:45:20.327

No they are not.

You can try `sizeof(A1)` and `sizeof(A2)` and see that they are different.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T19:45:49.577

No they are not the same type.

In C you won't get an error, but in C++ if you try you will get an error something like:

> error C2440: 'initializing' : cannot convert from 'int (*)[1024]' to 'int (*)[512]'

Here is some sample code

```
int x[1024];
int y[512];
/*Create a pointer int[1024] type*/
int (*px)[1024] = &x;
/*Create a pointer int[512] type*/
int (*py)[512] = &y;

int (*py2)[512] = &x; /*<---compiling error in C++ but allowed in C even know it's wrong*/ 
```

Even know that last line is allowed in C, the 2 types are considered distinct. Also an array is not the same as a pointer to an array, but as you can see the type declarations are different.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-15T00:10:05.573

在源代码中，在某些情况下，不同类型的变量在给定表达式中是兼容的，编译器将调用足够的魔法来完成正确/预期的事情，例如将数组作为参数传递给期望指针的函数。但是，这并不意味着它们的内存布局是兼容的。请参阅 [C 中的指针与数组](https://stackoverflow.com/questions/660752/pointer-vs-array-in-c-non-trivial-difference)问题，这是我错过的重要差异。

我不太确定你的书所说的“结构等价”是什么意思，但想知道这是否可能指的是默认的整数提升（但似乎也包括数组？）。但无论如何，整数提升是一个非常重要的问题，你应该花时间去理解。下面的 printf 应按照这些规则执行：

```
unsigned int i = 0;
if (i < -1) {
        printf("This line is printed!\n");
} 
```

[C 标准 (ISO/IEC 9899:1990)](http://en.wikipedia.org/wiki/C_(programming_language)#ANSI_C_and_ISO_C)包含一个标题为“常用算术转换”的部分，用于定义行为。该标准不是免费提供的（相反，它的售价相当昂贵，因为 ISO 标准按每页定价……），但如果您搜索该术语，您应该能够找到一些有用的信息或报价。一些标准草案是免费提供的，但是由于您不知道最终标准发生了什么变化，因此会威胁到那些非常不信任的人。

# python - Python中的部分列表解包

> ID：749070
> 
> 赞同：44
> 
> 时间：2009-04-14T19:44:54.617
> 
> 标签：python

在 Python 中，赋值运算符可以将列表或元组解包为变量，如下所示：

```
l = (1, 2)
a, b = l # Here goes auto unpack 
```

但是我需要在左侧指定与右侧列表中的项目计数完全相同的名称数量。但有时我不知道右侧列表的大小，例如，如果我使用 split()。

例子：

```
a, b = "length=25".split("=") # This will result in a="length" and b=25 
```

但是下面的代码会导致错误：

```
a, b = "DEFAULT_LENGTH".split("=") # Error, list has only one item 
```

是否可以以某种方式解压缩上面示例中的列表，以便我可以得到 a = "DEFAULT_LENGTH" 和 b 等于`None`或不设置？一个简单的方法看起来有点长：

```
a = b = None
if "=" in string :
  a, b = string.split("=")
else :
  a = string 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2009-04-14T20:54:55.557

除非您使用的是 Python 3，否则这可能对您没有用处。但是，为了完整起见，值得注意的是，此处引入的[扩展元组解包](http://www.python.org/dev/peps/pep-3132/)允许您执行以下操作：

```
>>> a, *b = "length=25".split("=")
>>> a,b
("length", ['25'])
>>> a, *b = "DEFAULT_LENGTH".split("=")
>>> a,b
("DEFAULT_LENGTH", []) 
```

即元组解包现在的工作方式类似于它在参数解包中的工作方式，因此您可以用 表示“其余项目” `*`，并将它们作为（可能为空的）列表。

但是，分区可能是您正在做的事情的最佳解决方案。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2009-04-14T19:51:25.647

```
# this will result in a="length" and b="25"
a, b = "length=25".partition("=")[::2]

# this will result in a="DEFAULT_LENGTH" and b=""
a, b = "DEFAULT_LENGTH".partition("=")[::2] 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-04-14T19:49:59.053

这比您的解决方案略好，但仍然不是很优雅；如果有更好的方法来做到这一点，我不会感到惊讶。

```
a, b = (string.split("=") + [None])[:2] 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-04-14T20:21:43.423

最好的方法是使用[分区字符串方法](http://docs.python.org/library/stdtypes.html?highlight=partition#str.partition)：

> 在第一次出现 sep 时拆分字符串，并返回一个 3 元组，其中包含分隔符之前的部分、分隔符本身和分隔符之后的部分。如果未找到分隔符，则返回一个包含字符串本身的 3 元组，后跟两个空字符串。
> 
> 2.5 版中的新功能。

```
>>> inputstr = "length=25"
>>> inputstr.partition("=")
('length', '=', '25')
>>> name, _, value = inputstr.partition("=")
>>> print name, value
length 25 
```

它也适用于不包含的字符串`=`：

```
>>> inputstr = "DEFAULT_VALUE"
>>> inputstr.partition("=")
('DEFAULT_VALUE', '', '') 
```

如果由于某种原因您使用的是 2.5 之前的 Python 版本，您可以使用列表切片来做同样的事情，但稍微不那么整洁：

```
>>> x = "DEFAULT_LENGTH"

>>> a = x.split("=")[0]
>>> b = "=".join(x.split("=")[1:])

>>> print (a, b)
('DEFAULT_LENGTH', '') 
```

..以及何时`x = "length=25"`：

```
('length', '25') 
```

轻松转换为函数或 lambda：

```
>>> part = lambda x: (x.split("=")[0], "=".join(x.split("=")[1:]))
>>> part("length=25")
('length', '25')
>>> part('DEFAULT_LENGTH')
('DEFAULT_LENGTH', '') 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-04-14T19:52:19.327

您可以编写一个辅助函数来执行此操作。

```
>>> def pack(values, size):
...     if len(values) >= size:
...         return values[:size]
...     return values + [None] * (size - len(values))
...
>>> a, b = pack('a:b:c'.split(':'), 2)
>>> a, b
('a', 'b')
>>> a, b = pack('a'.split(':'), 2)
>>> a, b
('a', None) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-14T21:21:05.603

> 但有时我不知道右侧列表的大小，例如如果我使用 split()。

是的，当我遇到限制> 1的情况（所以我不能使用分区）时，我通常会为：

```
def paddedsplit(s, find, limit):
    parts= s.split(find, limit)
    return parts+[parts[0][:0]]*(limit+1-len(parts))

username, password, hash= paddedsplit(credentials, ':', 2) 
```

（`parts[0][:0]`是否有一个空的 'str' 或 'unicode'，匹配分裂产生的任何一个。如果你愿意，你可以使用 None。）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-14T19:55:38.727

不要使用此代码，它只是一个玩笑，但它可以满足您的要求：

```
a = b = None
try: a, b = [a for a in 'DEFAULT_LENGTH'.split('=')]
except: pass 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-15T00:29:26.087

已经提出了许多其他的解决方案，但我不得不说对我来说最直接的仍然是

```
a, b = string.split("=") if "=" in string else (string, None) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-15T04:56:05.230

作为替代方案，也许使用正则表达式？

```
>>> import re
>>> unpack_re = re.compile("(\w*)(?:=(\w*))?")

>>> x = "DEFAULT_LENGTH"
>>> unpack_re.match(x).groups()
('DEFAULT_LENGTH', None)

>>> y = "length=107"
>>> unpack_re.match(y).groups()
('length', '107') 
```

如果您确保 re.match() 始终成功，则 .groups() 将始终返回正确数量的元素以解压缩到您的元组中，因此您可以安全地做

```
a,b = unpack_re.match(x).groups() 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-12-04T20:25:48.397

我不建议使用它，但只是为了好玩，这里有一些代码实际上可以满足您的需求。当您调用 时`unpack(<sequence>)`，该`unpack`函数使用该`inspect`模块查找调用该函数的实际源代码行，然后使用该`ast`模块解析该行并计算被解包的变量数。

注意事项：

*   对于多重赋值（例如`(a,b) = c = unpack([1,2,3])`），它只使用赋值中的第一项
*   如果找不到源代码（例如，因为您是从 repl 调用它），它将无法工作
*   如果赋值语句跨越多行，它将不起作用

代码：

```
import inspect, ast
from itertools import islice, chain, cycle

def iter_n(iterator, n, default=None):
    return islice(chain(iterator, cycle([default])), n)

def unpack(sequence, default=None):
    stack = inspect.stack()
    try:
        frame = stack[1][0]
        source = inspect.getsource(inspect.getmodule(frame)).splitlines()
        line = source[frame.f_lineno-1].strip()
        try:
            tree = ast.parse(line, 'whatever', 'exec')
        except SyntaxError:
            return tuple(sequence)
        exp = tree.body[0]
        if not isinstance(exp, ast.Assign):
            return tuple(sequence)
        exp = exp.targets[0]
        if not isinstance(exp, ast.Tuple):
            return tuple(sequence)
        n_items = len(exp.elts)
        return tuple(iter_n(sequence, n_items, default))
    finally:
        del stack

# Examples
if __name__ == '__main__':
    # Extra items are discarded
    x, y = unpack([1,2,3,4,5])
    assert (x,y) == (1,2)
    # Missing items become None
    x, y, z = unpack([9])
    assert (x, y, z) == (9, None, None)
    # Or the default you provide
    x, y, z = unpack([1], 'foo')
    assert (x, y, z) == (1, 'foo', 'foo')
    # unpack() is equivalent to tuple() if it's not part of an assignment
    assert unpack('abc') == ('a', 'b', 'c')
    # Or if it's part of an assignment that isn't sequence-unpacking
    x = unpack([1,2,3])
    assert x == (1,2,3)
    # Add a comma to force tuple assignment:
    x, = unpack([1,2,3])
    assert x == 1
    # unpack only uses the first assignment target
    # So in this case, unpack('foobar') returns tuple('foo')
    (x, y, z) = t = unpack('foobar')
    assert (x, y, z) == t == ('f', 'o', 'o')
    # But in this case, it returns tuple('foobar')
    try:
        t = (x, y, z) = unpack('foobar')
    except ValueError as e:
        assert str(e) == 'too many values to unpack'
    else:
        raise Exception("That should have failed.")
    # Also, it won't work if the call spans multiple lines, because it only
    # inspects the actual line where the call happens:
    try:
        (x, y, z) = unpack([
            1, 2, 3, 4])
    except ValueError as e:
        assert str(e) == 'too many values to unpack'
    else:
        raise Exception("That should have failed.") 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2009-04-14T19:48:51.457

你试过这个吗？

```
values = aString.split("=")
if len(values) == 1:
   a = values[0]
else:
   a, b = values 
```

# ms-word - Word 邮件合并字段

> ID：749074
> 
> 赞同：4
> 
> 时间：2009-04-14T19:45:38.983
> 
> 标签：ms-word, mailmerge

我以前没有使用过邮件合并字段，我发现的所有内容都需要您选择数据源才能插入合并字段。我要做的就是将字段放在 word 文档上，而不是将其合并，直到它被代码使用。我本质上是在创建文档模板。这是如何在word中完成的？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-04-14T20:00:57.263

正如 Noah 所说，设置一个包含可用字段的虚拟数据源可能是最简单的，特别是如果您以前没有使用过 Mail Merge。

但是，可以手动创建 Word 字段。按`Alt+I`，然后`F`（在英语单词上）打开“*插入字段”*对话框（对于 Word XP/2003，您将在“*插入*”菜单中找到相同的内容，对于 Word 2007，该对话框可从“*快速部件”下功能区的“**插入*”选项卡中找到）。在此对话框中，您可以选择邮件合并字段并指定所有相关选项，例如类型为 的字段。*`MergeField`*

 *如果您知道域代码（和相关选项），您也可以通过按`Ctrl+F9`后跟域代码直接插入域（请注意，您可以使用 切换域代码的显示`Alt+F9`）。在创建模板时，这是一种非常方便（尽管是高级）的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T19:51:52.543

我会关注这篇 Microsoft[文章](http://office.microsoft.com/en-us/help/HA010349201033.aspx)。如果您没有可用的数据源，我只需使用您将拥有的字段创建一个虚拟 Excel/Access/数据源。Word 更喜欢知道哪些字段可用，并且您可以在构建模板文档后更改源。

# tinymce - 在电子邮件中，图像（img）源（src）标签被重写为相对链接。怎么修？

> ID：749076
> 
> 赞同：2
> 
> 时间：2009-04-14T19:45:53.353
> 
> 标签：tinymce, href, image, src, html-email

我正在发送基于 html 的电子邮件，并且每次发送图像 src 标签和一些锚 href 标签都被修改为相对 url。

**更新 2：**这发生在电子邮件正文生成和发送到它到达我的收件箱之间。

**更新：**我在 LAMPP 服务器上使用 Postfix。此外，我正在使用 Zend_Mail 发送电子邮件。

例如，我有一个链接：

```
src="http://www.furnituretrainingcompany.com/images/email/highpoint_2009_04/header.jpg" 
```

它被重写为：

```
src="../../../../images/email/highpoint_2009_04/header.jpg" 
```

什么会导致这种情况发生，如何纠正？

电子邮件标题：

```
Return-Path: <root@example.com>
X-Original-To: gabe@example.com
Delivered-To: gabe@example.com
Received: by mail.example.com (Postfix, from userid 0)
     id 6BF012252; Tue, 14 Apr 2009 12:15:20 -0600 (MDT)
To: Gabriel <gabe@example.com>
Subject: Free Map to Sales Success
From: Somebody <info@example.com>
Date: Tue, 14 Apr 2009 12:15:20 -0600
Content-Type: text/html; charset="utf-8"
Content-Transfer-Encoding: multipart/related
Content-Disposition: inline
Message-Id: <20090414181520.6BF012252@mail.example.com> 
```

要发送的原始内容：

```
<table align="center" border="0" cellpadding="0" cellspacing="0" width="600">
  <tbody>
    <tr>
      <td valign="top">
        <a href="http://www.furnituretrainingcompany.com">
            <img moz-do-not-send="true" alt="The Furniture Training Company - Know More. Sell More." src="http://www.furnituretrainingcompany.com/images/email/highpoint_2009_04/header.jpg" border="0" height="123" width="600">
        </a>
      </td>
    </tr>
  </tbody>
</table>
<table align="center" border="0" cellpadding="0" cellspacing="0"
 width="600">
  <tbody>
    <tr>
      <td valign="top"><img alt="Visit us at High Point to receive your free training poster" src="http://www.furnituretrainingcompany.com/images/email/highpoint_2009_04/hero.jpg" moz-do-not-send="true" height="150" width="600"><br>
      </td>
    </tr>
  </tbody>

</table>
<table align="center" border="0" cellpadding="0" cellspacing="0"
 width="600">
  <tbody>
    <tr>
      <td bgcolor="#ffffff" valign="top"><img alt="" src="http://www.furnituretrainingcompany.com/images/email/highpoint_2009_04/spacer_content_left.jpg" moz-do-not-send="true" height="30" width="30"><br>
      </td>
      <td bgcolor="#ffffff" valign="top"><font originaltag="yes" style="font-size: 9px; font-family: Verdana,Arial,Helvetica,sans-serif;" color="#000000" face="Verdana, Arial, Helvetica, sans-serif" size="1"><big><big><big><big><small><big><b>See you at Market</b></big><br>
      </small></big></big></big></big></font>
      <font originaltag="yes" style="font-size: 9px; font-family: Verdana,Arial,Helvetica,sans-serif;" color="#000000" face="Verdana, Arial, Helvetica, sans-serif" size="1"><big><big><big><big><small><br>
      </small></big></big></big></big></font><small><font
 face="Helvetica, Arial, sans-serif">Visit our space to get your free
Map to Sales Success poster! This unique 24 X 36 color poster is your
guide to developing high volume salespeople with larger tickets. Find
us in the new NHFA Retailer Resource Center located in the Plaza. <br>
      <br>
Don&#8217;t miss Mark Lacy&#8217;s entertaining seminar "Help Wanted! My Sales
Associates Can&#8217;t Sell Water to a Thirsty Camel." He&#8217;ll reveal powerful
secrets for turning sales associates into furniture experts that will
sell. See him Saturday, April 25th at 11:30 AM in the seminar room of
the
new NHFA Retail Resource Center in the Plaza. <br>
      <br>
Stop by our space to learn how our ingenious internet-delivered
training courses are easy to use, guaranteed to work, and cheaper than
the daily donuts. Over 95% report increased sales. <br>
      <br>
Plan to see us at High Point. </font></small> 
<font originaltag="yes" style="font-size: 9px; font-family: Verdana,Arial,Helvetica,sans-serif;" color="#000000" face="Verdana, Arial, Helvetica, sans-serif" size="1"><big><big><big><big><small><small><br>
      <br>
      <br>
      <br>
      </small></small></big></big></big></big></font><small><font
 originaltag="yes"
 style="font-size: 9px; font-family: Verdana,Arial,Helvetica,sans-serif;"
 color="#000000" face="Verdana, Arial, Helvetica, sans-serif" size="1"><big><big><big><small>
      </small></big></big></big></font></small>
<a href="http://www.furnituretrainingcompany.com/map"><img alt="Find out more" src="http://www.furnituretrainingcompany.com/images/email/highpoint_2009_04/image_content_left.jpg" moz-do-not-send="true" border="0" height="67" width="326"></a><br>
      <br>
      </td>
      <td bgcolor="#ffffff" valign="top">
        <img alt="" src="http://www.furnituretrainingcompany.com/images/email/highpoint_2009_04/spacer_content_middle.jpg" moz-do-not-send="true" height="28" width="28"><br>
      </td>
      <td bgcolor="#ffffff" valign="top"><img alt="Roadmap to Sales Success poster" src="http://www.furnituretrainingcompany.com/images/email/highpoint_2009_04/image_content_right.jpg" moz-do-not-send="true" height="267" width="186"><br>
      <font face="Helvetica, Arial, sans-serif"><small><font originaltag="yes" style="font-size: 9px; font-family: Verdana,Arial,Helvetica,sans-serif;" color="#000000" size="1"><big><big><big><small><b>Road
Map to Sales Success<br>
      </b><br>
      </small></big></big></big></font>This beautiful poster is yours
free for simply stopping by and visiting with us at High Point. <span
 class="moz-txt-slash">Our space is located inside the </span>new NHFA
Retailer Resource Center in the Plaza Suites, 222 South Main St, 1st
Floor. We will be at market from Sat April 25th until Thur
April 30th. </small></font><br>
      </td>
      <td bgcolor="#ffffff" valign="top"><img alt="" src="http://www.furnituretrainingcompany.com/images/email/highpoint_2009_04/spacer_content_right.jpg"
 moz-do-not-send="true" height="30" width="30"><br>
      <br>
      </td>
    </tr>
  </tbody>

</table>
<table align="center" border="0" cellpadding="0" cellspacing="0"
 width="600">
  <tbody>
    <tr>
      <td bgcolor="#ffffff" valign="top"><img alt="" src="http://www.furnituretrainingcompany.com/images/email/highpoint_2009_04/disclaimer_divider.jpg"
 moz-do-not-send="true" height="25" width="600"><br>
      </td>
    </tr>
  </tbody>
</table>
<table align="center" border="0" cellpadding="0" cellspacing="0"
 width="600">
  <tbody>
    <tr>
      <td bgcolor="#ffffff" valign="top"><img alt="" src="http://www.furnituretrainingcompany.com/images/email/highpoint_2009_04/spacer_disclaimer_left.jpg"
 moz-do-not-send="true"></td>
      <td bgcolor="#ffffff" valign="top"><img alt="" src="http://www.furnituretrainingcompany.com/images/email/highpoint_2009_04/spacer_disclaimer_middle.jpg"
 moz-do-not-send="true"><br>
      <font originaltag="yes"
 style="font-size: 9px; font-family: Verdana,Arial,Helvetica,sans-serif;"
 color="#666666" face="Verdana, Arial, Helvetica, sans-serif" size="1"><big><big><big><big><small><small><small>If
you are not attending the High Point market in April but
would still like to receive a free Road Map to Sales Success poster
visit us on the web at <u><a moz-do-not-send="true"
 class="moz-txt-link-abbreviated"
 href="http://www.furnituretrainingcompany.com">www.furnituretrainingcompany.com</a></u>,
or to
speak with a Furniture Training Company representative, call toll free
(866) 755-5996\. We do not offer free shipping outside of the U.S. and
Canada. Retailers outside of the U.S. and Canada may call for more
information. Limit one free Road Map to Sales Success per company.
Other copies of the poster may be purchased on our web site.<br>
      <br>
      </small></small></small></big></big></big></big></font> <font
 color="#666666"><small><font originaltag="yes"
 style="font-size: 9px; font-family: Verdana,Arial,Helvetica,sans-serif;"
 face="Verdana, Arial, Helvetica, sans-serif" size="1"><big><big><big><small><small>We
hope you found this message to be useful. However, if you'd
rather not receive future emails of this sort from The Furniture
Training Company, please <a moz-do-not-send="true"
 href="http://www.furnituretraining.com/contact">click here to
unsubscribe</a>.<br>
      <br>
      </small></small></big></big></big></font></small><small><font
 originaltag="yes"
 style="font-size: 9px; font-family: Verdana,Arial,Helvetica,sans-serif;"
 face="Verdana, Arial, Helvetica, sans-serif" size="1"><big><big><big><small><small>&copy;Copyright
2009 The Furniture Training Company.<br>
1770 North Research Park
Way, <br>
North Logan, UT 84341\. <br>
All Rights Reserved.</small></small></big></big></big></font></small></font><br>
      </td>
      <td bgcolor="#ffffff" valign="top"><img alt=""
 src="http://www.furnituretrainingcompany.com/images/email/highpoint_2009_04/spacer_disclaimer_right.jpg"
 moz-do-not-send="true"></td>
    </tr>
  </tbody>

</table>
<table align="center" border="0" cellpadding="0" cellspacing="0"
 width="600">
  <tbody>
    <tr>
      <td bgcolor="#ffffff" valign="top"><img alt=""
 src="http://www.furnituretrainingcompany.com/images/email/highpoint_2009_04/footer.jpg"
 moz-do-not-send="true"> </td>
    </tr>
  </tbody>
</table>
<br>
<br> 
```

发送的内容：

```
<table border=3D"0" cellspacing=3D"0" cellpadding=3D"0" width=3D"600" al=
ign=3D"center">=0D=0A<tbody>=0D=0A<tr>=0D=0A<td valign=3D"top"><a href=
=3D"http://www.furnituretrainingcompany.com"> <img src=3D"http://www.fur=
nituretrainingcompany.com/images/email/highpoint_2009_04/header.jpg" bor=
der=3D"0" alt=3D"The Furniture Training Company - Know More. Sell More."=
 width=3D"600" height=3D"123" /> </a></td>=0D=0A</tr>=0D=0A</tbody>=0D=
=0A</table>=0D=0A<table border=3D"0" cellspacing=3D"0" cellpadding=3D"0"=
 width=3D"600" align=3D"center">=0D=0A<tbody>=0D=0A<tr>=0D=0A<td valign=
=3D"top"><img src=3D"http://www.furnituretrainingcompany.com/images/emai=
l/highpoint_2009_04/hero.jpg" alt=3D"Visit us at High Point to receive y=
our free training poster" width=3D"600" height=3D"150" /><br /></td>=0D=
=0A</tr>=0D=0A</tbody>=0D=0A</table>=0D=0A<table border=3D"0" cellspacin=
g=3D"0" cellpadding=3D"0" width=3D"600" align=3D"center">=0D=0A<tbody>=
=0D=0A<tr>=0D=0A<td valign=3D"top" bgcolor=3D"#ffffff"><img src=3D"http:=
//www.furnituretrainingcompany.com/images/email/highpoint_2009_04/spacer=
_content_left.jpg" alt=3D"" width=3D"30" height=3D"30" /><br /></td>=0D=
=0A<td valign=3D"top" bgcolor=3D"#ffffff"><span style=3D"font-size: xx-s=
mall; font-family: Verdana,Arial,Helvetica,sans-serif; color: #000000;">=

<big><big><big><big><small><big><strong>See you at Market</strong></big>=
<br /> </small></big></big></big></big></span> <span style=3D"font-size:=
 xx-small; font-family: Verdana,Arial,Helvetica,sans-serif; color: #0000=
00;"><big><big><big><big><small><br /> </small></big></big></big></big><=
/span><small><span style=3D"font-family: Helvetica,Arial,sans-serif;">Vi=
sit our space to get your free Map to Sales Success poster! This unique=
 24 X 36 color poster is your guide to developing high volume salespeopl=
e with larger tickets. Find us in the new NHFA Retailer Resource Center=
 located in the Plaza. <br /> <br /> Don&rsquo;t miss Mark Lacy&rsquo;s=
 entertaining seminar "Help Wanted! My Sales Associates Can&rsquo;t Sell=
 Water to a Thirsty Camel." He&rsquo;ll reveal powerful secrets for turn=
ing sales associates into furniture experts that will sell. See him Satu=
rday, April 25th at 11:30 AM in the seminar room of the new NHFA Retail=
 Resource Center in the Plaza. <br /> <br /> Stop by our space to learn=
 how our ingenious internet-delivered training courses are easy to use,=
 guaranteed to work, and cheaper than the daily donuts. Over 95% report=
 increased sales. <br /> <br /> Plan to see us at High Point. </span></s=
mall> <span style=3D"font-size: xx-small; font-family: Verdana,Arial,Hel=
vetica,sans-serif; color: #000000;"><big><big><big><big><small><small><b=
r /> <br /> <br /> <br /> </small></small></big></big></big></big></span=
><small><span style=3D"font-size: xx-small; font-family: Verdana,Arial,H=
elvetica,sans-serif; color: #000000;"><big><big><big><small> </small></b=
ig></big></big></span></small> <a href=3D"http://www.furnituretrainingco=
mpany.com/map"><img src=3D"http://www.furnituretrainingcompany.com/image=
s/email/highpoint_2009_04/image_content_left.jpg" border=3D"0" alt=3D"Fi=
nd out more" width=3D"326" height=3D"67" /></a><br /> <br /></td>=0D=0A<=
td valign=3D"top" bgcolor=3D"#ffffff"><img src=3D"http://www.furnituretr=
ainingcompany.com/images/email/highpoint_2009_04/spacer_content_middle.j=
pg" alt=3D"" width=3D"28" height=3D"28" /><br /></td>=0D=0A<td valign=3D=
"top" bgcolor=3D"#ffffff"><img src=3D"http://www.furnituretrainingcompan=
y.com/images/email/highpoint_2009_04/image_content_right.jpg" alt=3D"Roa=
dmap to Sales Success poster" width=3D"186" height=3D"267" /><br /> <spa=
n style=3D"font-family: Helvetica,Arial,sans-serif;"><small><span style=
=3D"font-size: xx-small; color: #000000;"><big><big><big><small><strong>=
Road Map to Sales Success<br /> </strong><br /> </small></big></big></bi=
g></span>This beautiful poster is yours free for simply stopping by and=
 visiting with us at High Point. <span class=3D"moz-txt-slash">Our space=
 is located inside the </span>new NHFA Retailer Resource Center in the P=
laza Suites, 222 South Main St, 1st Floor. We will be at market from Sat=
 April 25th until Thur April 30th. </small></span><br /></td>=0D=0A<td v=
align=3D"top" bgcolor=3D"#ffffff"><img src=3D"http://www.furnituretraini=
ngcompany.com/images/email/highpoint_2009_04/spacer_content_right.jpg" a=
lt=3D"" width=3D"30" height=3D"30" /><br /> <br /></td>=0D=0A</tr>=0D=0A=

</tbody>=0D=0A</table>=0D=0A<table border=3D"0" cellspacing=3D"0" cellpa=
dding=3D"0" width=3D"600" align=3D"center">=0D=0A<tbody>=0D=0A<tr>=0D=0A=
<td valign=3D"top" bgcolor=3D"#ffffff"><img src=3D"http://www.furnituret=
rainingcompany.com/images/email/highpoint_2009_04/disclaimer_divider.jpg=
" alt=3D"" width=3D"600" height=3D"25" /><br /></td>=0D=0A</tr>=0D=0A</t=
body>=0D=0A</table>=0D=0A<table border=3D"0" cellspacing=3D"0" cellpaddi=
ng=3D"0" width=3D"600" align=3D"center">=0D=0A<tbody>=0D=0A<tr>=0D=0A<td=
 valign=3D"top" bgcolor=3D"#ffffff"><img src=3D"http://www.furnituretrai=
ningcompany.com/images/email/highpoint_2009_04/spacer_disclaimer_left.jp=
g" alt=3D"" /></td>=0D=0A<td valign=3D"top" bgcolor=3D"#ffffff"><img src=
=3D"http://www.furnituretrainingcompany.com/images/email/highpoint_2009_=
04/spacer_disclaimer_middle.jpg" alt=3D"" /><br /> <span style=3D"font-s=
ize: xx-small; font-family: Verdana,Arial,Helvetica,sans-serif; color: #=
666666;"><big><big><big><big><small><small><small>If you are not attendi=
ng the High Point market in April but would still like to receive a free=
 Road Map to Sales Success poster visit us on the web at <span style=3D"=
text-decoration: underline;"><a class=3D"moz-txt-link-abbreviated" href=
=3D"http://www.furnituretrainingcompany.com">www.furnituretrainingcompan=
y.com</a></span>, or to speak with a Furniture Training Company represen=
tative, call toll free (866) 755-5996\. We do not offer free shipping out=
side of the U.S. and Canada. Retailers outside of the U.S. and Canada ma=
y call for more information. Limit one free Road Map to Sales Success pe=
r company. Other copies of the poster may be purchased on our web site.<=
br /> <br /> </small></small></small></big></big></big></big></span> <sp=
an style=3D"color: #666666;"><small><span style=3D"font-size: xx-small;=
 font-family: Verdana,Arial,Helvetica,sans-serif;"><big><big><big><small=
><small>We hope you found this message to be useful. However, if you'd r=
ather not receive future emails of this sort from The Furniture Training=
 Company, please <a href=3D"http://www.furnituretraining.com/contact">cl=
ick here to unsubscribe</a>.<br /> <br /> </small></small></big></big></=
big></span></small><small><span style=3D"font-size: xx-small; font-famil=
y: Verdana,Arial,Helvetica,sans-serif;"><big><big><big><small><small>&co=
py;Copyright 2009 The Furniture Training Company.<br /> 1770 North Resea=
rch Park Way, <br /> North Logan, UT 84341\. <br /> All Rights Reserved.<=
/small></small></big></big></big></span></small></span><br /></td>=0D=0A=

<td valign=3D"top" bgcolor=3D"#ffffff"><img src=3D"http://www.furnituret=
rainingcompany.com/images/email/highpoint_2009_04/spacer_disclaimer_righ=
t.jpg" alt=3D"" /></td>=0D=0A</tr>=0D=0A</tbody>=0D=0A</table>=0D=0A<tab=
le border=3D"0" cellspacing=3D"0" cellpadding=3D"0" width=3D"600" align=
=3D"center">=0D=0A<tbody>=0D=0A<tr>=0D=0A<td valign=3D"top" bgcolor=3D"#=
ffffff"><img src=3D"http://www.furnituretrainingcompany.com/images/email=
/highpoint_2009_04/footer.jpg" alt=3D"" /></td>=0D=0A</tr>=0D=0A</tbody>=
=0D=0A</table>=0D=0A<p><br /></p><br><hr><a href=3D'http://localhost/ftc=
/app/unsubscribe.php?action=3DoptOut&pid=3D6121&cid=3D19&email=3Dmarkl@f=
urnituretrainingcompany.com'>Click to Unsubscribe</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-19T12:58:07.233

事实证明，即使当我将内容复制并粘贴到应用程序中时，必要的 DOCTYPE、html 和 body 标签已经到位，TinyMCE 正在剥离这些标签。这就解释了为什么输出只显示了 body 标签内的内容。

通过确保 DOCTYPE、html 和 body 标签实际上都在适当的位置，我能够解决 url 重写问题。

我通过添加整页插件来修复 TinyMCE，这样它就不会再从输入中删除这些标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-02-08T09:16:01.407

有一个配置选项“convert_urls”可以设置为 false 以防止 URL 也被转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-01T09:12:40.750

由于@Noah 将预期内容作为电子邮件发送。他们对 TinyMCE 没有问题。通常图像会被邮件主机阻止。就我而言，我将 html 内容（带图像）发送到 gmail 帐户。Google 会屏蔽邮件中的图片。Google 在每封电子邮件中显示以下内容

> 不显示图像。在下方显示图像 - 始终显示来自 xxxx@xxxx.com 的图像

只需单击适当的链接即可显示图像。

谢谢你，阿什什

# javascript - jQuery 地图与每个

> ID：749084
> 
> 赞同：239
> 
> 时间：2009-04-14T19:48:03.970
> 
> 标签：javascript, jquery

在 jQuery 中，`map`and`each`函数似乎做同样的事情。两者之间有什么实际区别吗？您什么时候会选择使用其中一种而不是另一种？

* * *

## 回答 #1

> 赞同：276
> 
> 时间：2009-04-14T19:55:09.007

该[`each`](http://docs.jquery.com/Utilities/jQuery.each)方法是一个不可变的迭代器，因为该[`map`](http://docs.jquery.com/Utilities/jQuery.map)方法可以用作迭代器，但实际上是为了操作提供的数组并返回一个新数组。

另一个需要注意的重要事情是`each`函数返回原始数组，而`map`函数返回一个新数组。如果过度使用 map 函数的返回值，可能会浪费大量内存。

例如：

```
var items = [1,2,3,4];

$.each(items, function() {
  alert('this is ' + this);
});

var newItems = $.map(items, function(i) {
  return i + 1;
});
// newItems is [2,3,4,5] 
```

您还可以使用 map 函数从数组中删除项目。例如：

```
var items = [0,1,2,3,4,5,6,7,8,9];

var itemsLessThanEqualFive = $.map(items, function(i) {
  // removes all items > 5
  if (i > 5) 
    return null;
  return i;
});
// itemsLessThanEqualFive = [0,1,2,3,4,5] 
```

您还会注意到`this`没有映射到`map`函数中。您必须在回调中提供第一个参数（例如我们`i`上面使用的）。具有讽刺意味的是，每个方法中使用的回调参数与 map 函数中的回调参数相反，所以要小心。

```
map(arr, function(elem, index) {});
// versus 
each(arr, function(index, elem) {}); 
```

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2009-04-14T20:41:56.103

**1：回调函数的参数反转。**

[`.each()`](http://api.jquery.com/each/)'s, [`$.each()`](http://api.jquery.com/jquery.each/)'s, [`.map()`](http://api.jquery.com/map/)'s 回调函数先取索引，再取元素

```
function (index, element) 
```

[`$.map()`](http://api.jquery.com/jquery.map/)的回调具有相同的参数，但相反

```
function (element, index) 
```

**2: [`.each()`](http://api.jquery.com/each/), [`$.each()`](http://api.jquery.com/jquery.each/), 和[`.map()`](http://api.jquery.com/map/)做一些特别的事情`this`**

`each()``this`以指向当前元素的方式调用函数。在大多数情况下，您甚至不需要回调函数中的两个参数。

```
function shout() { alert(this + '!') }

result = $.each(['lions', 'tigers', 'bears'], shout)

// result == ['lions', 'tigers', 'bears'] 
```

对于变量指的是全局窗口对象[`$.map()`](http://api.jquery.com/jquery.map/)。`this`

**3：`map()`对回调的返回值做一些特别的事情**

`map()`对每个元素调用该函数，并将结果存储在一个新数组中，然后返回该数组。您通常只需要在回调函数中使用第一个参数。

```
function shout(el) { return el + '!' }

result = $.map(['lions', 'tigers', 'bears'], shout)

// result == ['lions!', 'tigers!', 'bears!'] 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2009-04-14T20:04:48.673

该`each`函数遍历一个数组，每个元素调用一次提供的函数，并设置`this`为活动元素。这：

```
function countdown() {
    alert(this + "..");
}

$([5, 4, 3, 2, 1]).each(countdown); 
```

会提醒`5..`然后`4..`然后`3..`然后`2..``1..`

另一方面，Map 接受一个数组，并返回一个新数组，其中每个元素都由函数更改。这：

```
function squared() {
    return this * this;
}

var s = $([5, 4, 3, 2, 1]).map(squared); 
```

将导致 s 成为`[25, 16, 9, 4, 1]`。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2013-06-28T02:40:58.237

**我是这样理解的**：

```
function fun1() {
    return this + 1;
}
function fun2(el) {
    return el + 1;
}

var item = [5,4,3,2,1];

var newitem1 = $.each(item, fun1);
var newitem2 = $.map(item, fun2);

console.log(newitem1); // [5, 4, 3, 2, 1] 
console.log(newitem2); // [6, 5, 4, 3, 2] 
```

**因此，“ *each* ”函数返回原始数组，而“ *map* ”函数返回一个新数组**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-14T19:55:03.110

当您在数组上工作时，Jquery.map 更有意义，因为它在数组上表现得非常好。

Jquery.each 最适合在遍历选择器项时使用。这体现在 map 函数不使用选择器。

```
$(selector).each(...)

$.map(arr....) 
```

如您所见，map 不适合与选择器一起使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-22T06:44:21.250

```
var intArray = [1, 2, 3, 4, 5];
//lets use each function
$.each(intArray, function(index, element) {
  if (element === 3) {
    return false;
  }
  console.log(element); // prints only 1,2\. Breaks the loop as soon as it encountered number 3
});

//lets use map function
$.map(intArray, function(element, index) {
  if (element === 3) {
    return false;
  }
  console.log(element); // prints only 1,2,4,5\. skip the number 3.
}); 
```

# sql-server - 在多个数据库上运行相同的复制脚本

> ID：749088
> 
> 赞同：0
> 
> 时间：2009-04-14T19:49:00.210
> 
> 标签：sql-server, tsql, replication

我们有几个 SQL Server 2000 数据库（我知道，我们需要升级），它们具有相同的结构，并将它们设置为复制到另一台服务器。问题是每当我必须更改结构时（这通常在所有数据库上都很容易做到，尤其是使用 Red Gate 的工具），我必须停止复制，更改结构，然后再次设置复制。为每个数据库设置复制的步骤只需要几分钟，但它是重复的，让我发疯。我让 IDE 创建复制过程的脚本，然后将前一个数据库的名称替换为下一个数据库的名称并运行该脚本。仍然很烦人，但比单击 IDE 并忘记选项要快。

我已经尝试过使用“SP_MSFOREEACHDB”之类的方法，但这看起来不太有希望。

我的猜测是我应该只使用从 IDE 生成的 TSQL 并将其用作构建新 TSQL 脚本的起点，让它将数据库的名称作为参数传递。然后当数据库结构发生变化时，我需要在 TSQL 复制脚本中解决这个问题并在那里进行更改。这是其他人的问题吗？2005 年或 2008 年是否有更好的“SP_MSFOREACHDB”，这样我就不必维护一些疯狂的脚本，只需让 IDE 生成一个脚本，然后我可以轻松地在多个数据库上使用这些更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-15T02:14:00.547

您是否使用 SQL Server 复制？如果是这样，您为什么不对发布数据库进行更改并让它将架构更改推送给其订阅者？我们偶尔会在 SQL 2005 上执行此操作，并且大部分情况下它运行良好；我没有任何在 2000 台服务器上进行复制的经验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T19:56:09.957

如果您可以使用 SQL Server Management Studio，那么[SSMS 工具包](http://www.ssmstoolspack.com/)有一个小部件，允许在不同的数据库上运行相同的脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T19:59:27.080

[SQLCMD](http://www.sqlbook.com/SQL-Server/SQLCMD-command-line-utility-13.aspx)工具可以连接到 SQL Server 2000 并启用命令行交互。使用参数化查询和一组固定的 .bat 文件（每个服务器一个）可能是您现在所做的一个很好的选择。

# ssl - 运行 HTTPS 网站时可以使用 CDN 吗？

> ID：749089
> 
> 赞同：29
> 
> 时间：2009-04-14T19:49:20.940
> 
> 标签：ssl, https, accessibility, cdn

我有一个网站，只有通过简单的 HTTP 协议提供的主页。所有其他页面只能通过基于 SSL 的 HTTP (https://) 访问。

我正在使用 CDN 作为主页，对此非常满意。

但对我来说，由于安全警告，尤其是在 IE 中，似乎不可能将 CDN 用于 https 页面。通过简单的 HTTP 协议可以访问我在 CDN 上托管的文件。

我该怎么办？如何解决这个问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-04-14T19:59:31.213

您需要获得一个支持通过 HTTPS 提供文件的 CDN，然后将该 CDN 用于 SSL 请求。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2011-02-23T16:14:41.633

如果他们的盒子支持 HTTPS，您可以这样做。你不能做的是使用你自己域的子域来对 cdn 网络进行 cname。因为 SSL 不能以这种方式工作。

所以[https://cdn.tld/mydomain/path/to/file](https://cdn.tld/mydomain/path/to/file)作为一种机制确实有效（因为浏览器将正确验证 cdn.tld ssl 证书）

但[https://cdn.mydomain.tld/path/to/file](https://cdn.mydomain.tld/path/to/file)不会。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-14T20:01:04.220

两个选项，但一般来说，我会将所有不需要 SSL 的页面重定向到它们的非 SSL 等效页面，并且只在必要时使用 SSL。

1.  为您的 CDN 主机获取 SSL 证书。每年只需 30 美元，但您需要考虑到这需要更多配置，并且取决于流量，这也更昂贵，因为服务器需要更多资源用于 SSL 连接。

2.  对于相关页面，将 CSS/images/js 文件“本地”存储在您自己的 SSL 主机上，并在需要 SSL 时使用它们。当然，您会降低 CDN 的速度等，但这是一种权衡。我们之所以选择这个，是因为我们的注册是 SSL，用户在我们网站上花费的 99.9999% 的时间是在非 SSL 链接上。

# colors - Do all developers consider monitor quality (colors, not resolution) to be irrelevant?

> ID：749091
> 
> 赞同：4
> 
> 时间：2009-04-14T19:49:24.670
> 
> 标签：colors, development-environment

I especially hear it from those advocates of "business" notebooks manufactured by IBM/Lenovo, HP, Dell (maybe) that "business users do not need quality screens". They stick in the worst possible LCDs out there (even if with a high resolution) and dare to sell that crap. You can't even distinguish hue variations like light-yellow vs. light-grey.

I really miss it - do all of you agree color reproduction of a developer display is irrelevant, be it even a grayscale display it will do?

I understand most of developers work with text but... at times there is some design work to be done which is not doable on cheap LCDs.

And besides - wouldn't you enjoy fresh saturated colors even in a development environment? Bright cheerful icons on menus? Isn't it better to sit in a sunny office with green trees and flowers out of the window than in a garage with dark colors and weak artificial lighting?

P.S. Inspired by the topic about keyboards: [Keyboard for programmers](https://stackoverflow.com/questions/687/keyboard-for-programmers)

The question about displays and developers really interests me since a very long time.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-14T19:54:41.863

尽管我不需要*高质量*的屏幕，但我很欣赏这种差异，就像 esnoeijs 所说的那样，我需要批评一些图形设计工作，质量监视器会有所作为。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-14T20:00:50.023

我认为，“开发人员”过于宽泛，无法给出准确的答案。

*   如果您是阅读文本发射文本的程序的代码工匠，而无需使某些颜色看起来不错，那么是的，那么您真的可以使用单色屏幕。你需要黑色作为背景，白色作为前景和一些反转来突出匹配的大括号。在这种特殊情况下，我认为高分辨率远比颜色重要，因为通常它是关于查看更多代码（尤其是关于当前代码及其周围的更多内容，如文档、测试、快速解释器循环、一些研究论文，你可以命名它）。

*   如果你是一个刚刚学习一门语言的开发人员，如果你有一个带有语法高亮的编辑器，那么颜色是一个巨大的、巨大的可用性飞跃。我不想错过以亮粉色显示关键字、以亮青色显示字符串和类似内容的功能（全部在黑色背景上）

*   如果您是前端设计师，那么情况就完全不同了。如果您是前端设计师，您将需要具有良好色彩显示能力的高质量显示器。您不需要最好的，但您的显示器至少应该能够显示您的普通用户将使用的颜色，因此您不会使用绿色，因为您想要蓝色并且您的用户看到黄色（或其他废话）。

*   如果您使用需要使用颜色来对信息进行编码的工具，颜色是至关重要的，因为您可能无法看到附加信息。

*   ...

所以，我认为，大多数程序员不需要一些可笑的彩色显示能力，尽管在大多数情况下，一个好的纯色显示是有帮助的，因为他们需要在一些前端工作或者因为他们想学习一些语言。

HTH，特萨

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-14T20:16:22.123

I once spent half a day trying to add zebra striping to a table in my company's webapp that already had it because both my screen and QA's screen were unable to display the different colors of the zebra stripes (they rendered as the same color). Likewise, I once had my boss ask me to change the color of part of an icon, and to me it made the icon look like a uniform blue, but on his much better monitor, you could clearly see both shades of blue and it looked really nice... it was hard to make that edit without being able to see what I was doing.

I guess the developers in my company end up doing some design work in addition to real dev. I do spend most of my time in the shell though, so aside from the constant flickering that gives me headaches (yes, it's an LCD), a low-qual monitor is OK.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-14T19:55:56.387

质量更好的彩色显示器可以在很多方面派上用场。想到的第一种方法是，如果您使用的代码开发工具能够突出显示关键字，例如 Zend。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-14T19:52:36.767

我是一名开发人员，但在 webdev 领域，我已经掌握了足够多的设计材料来批评它，所以我主要尝试获得具有良好色彩范围的三星屏幕。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-14T19:53:54.503

使用好的显示器，您可以根据自己的喜好进行调整。
就个人而言，我在 (afaik) 2000 年购买了 700 美元的富士通西门子显示器，以及 2005 年购买的 340 美元的明基显示器，我更喜欢在第一台显示器上编码，因为我不必提高亮度（减少头痛）并且仍然可以看到我想看到的所有内容（亚像素提示的 6 点字体，语法突出显示的细微变化等）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-14T19:55:41.800

至少有一位[作者不同意](http://www.robgalbraith.com/bins/multi_page.asp?cid=7-9320-9876)。他对四款笔记本的色彩准确度进行了排名：

1.  联想 ThinkPad W700
2.  IBM/联想 ThinkPad T60
3.  戴尔灵越迷你 9
4.  Apple 2008 年末 MacBook Pro 15 英寸

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-14T19:57:12.590

我对我拥有的实际显示器不那么挑剔，更挑剔的是我有两台完全相同型号的显示器并使用相同的视频连接器。

作为一名 Web 开发人员，颜色不匹配可能会令人沮丧，因为您的一台显示器是 VGA，另一台是 DVI。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-14T19:58:51.933

可能整天在发票上工作的“商业用户”不需要很好的显示器，但任何从事外观很重要的事情的人，从软件开发人员到需要制作 Powerpoint 演示文稿的商业用户，都需要。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-04-14T20:02:59.427

如果您是像我这样的铁杆终端+vim 用户，那么它们的颜色质量和保真度几乎无关紧要，除了蓝色的质量（我在某些情况下使用，例如目录名称）往往太暗而无法在我的黑色背景。没有什么是不能通过一些修补来解决的，但我习惯了蓝色。

也就是说，关于macbook unibody上的新屏幕，我实际上有几件事要说。光滑的表面是一个真正的痛苦。很烦人。而且色彩保真度很低。我花了一个晚上试图理解为什么在从浅绿色到白色的渐变中我有一条粉红色的条纹。原来粉红色是macbook屏幕的神器。另一个屏幕没有显示该问题。从好的方面来说，LED 背光非常强大且美观，使色彩非常鲜艳。

这就是说，如果您使用像 eclipse 这样的颜色密集的东西（它也通过不同的颜色深浅进行大量交流），当然对于 Web 前端开发来说，颜色保真度是基础。如果你只需要一个终端和一个 vim 运行，我认为颜色保真度不会有真正的区别，只要你有一个舒适的低反射设置和良好的对比度。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-04-15T02:02:21.230

（注意：自从我购买显示器以来已经有几年了。这可能已经过时了）

我觉得有趣的是，除了说更鲜艳的颜色之外，还没有人真正定义“质量”。通常，液晶面板属于以下两种轨道之一：

*   良好的色彩/图像再现（S-IPS 面板和类似面板）

*   良好的响应时间（TN 面板）

我认为 SIPS 和类似面板是开发的必需品，原因有一个：视角。当您从屏幕角度改变时，图像不会改变颜色或做其他奇怪的事情。对合作非常重要。

在这个规模的高端是设计用于执行颜色校准的显示器。大多数开发人员不需要这么花哨的东西。

TN 面板非常适合游戏、电影和其他具有快动作的东西。它们针对像素响应时间进行了优化，这通常是这些面板吹捧的主要功能。许多更便宜的面板将属于这种类型。

在监视器中，我寻找四件事：

1.  面板类型（S-IPS 或类似）
2.  亮度（不超过300cd/m2）
3.  点间距（对于好的文本，使用小点间距：0.27 太大）
4.  良好的对比度/漏光/等（黑色如何黑色，以及如何均匀）

虽然我喜欢 S-IPS 面板，但我必须承认，任何能满足上述 2-4 标准的 LCD 显示器都是不错的选择，即使它是更便宜的 TN 面板。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-04-14T21:24:58.560

这取决于你在做什么。

如果您正在处理图像，是的，一个好的“质量”显示器很重要..但同样（或更多）重要的是正确设置和校准它。

如果您正在进行网页设计，那么拥有一台像样的显示器很重要，但前提是它的设置正确（对比度/亮度/色彩平衡）。

如果您只是“编写代码”，那么拥有像您的眼睛一样的显示器很重要，颜色复制并不重要。单色显示器可能会拉伸它，语法高亮很好，但即使是 vim 和它的 16 色也“足够”

质量这个词也有点“取决于”。CRT 的颜色复制比 TFT 好得多，但我不推荐它们（我总是发现阅读它们上的文字很困难，而且它们很难找到，笨重且一般现已弃用）。

对于网页设计，几乎任何显示器都可以，只要它不是 10 年前的 CRT 和损坏的红色阴极管。同样，只要*设置正确*，大多数显示器都能够显示颜色“够好了”

对于“编写代码”，我认为尺寸/分辨率/屏幕数量比颜色复制更重要，正如[对这些问题中的任何一个的大多数答案所示](https://stackoverflow.com/search?q=multiple+monitors)

# ios - 如何在 UITableView 上方显示加载标签？

> ID：749092
> 
> 赞同：3
> 
> 时间：2009-04-14T19:49:38.397
> 
> 标签：ios, objective-c, iphone, xcode, cocoa-touch

我有一个 UITableView，其中填充了我通过 Internet 下载的数据。在下载数据时，我想在我的 TableView 上方显示一个加载标签，以向用户表明某些事情正在实际发生并且应用程序没有问题。做这个的最好方式是什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T20:14:24.377

我认为最好的方法是在应用程序的主视图中添加一个子视图。两天前，马特·加拉格尔 (Matt Gallagher) 有一个关于这方面的教程。他向您展示了如何[显示加载视图](http://cocoawithlove.com/2009/04/showing-message-over-iphone-keyboard.html)，它还包括您可以下载的示例代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-15T14:23:11.527

最好的方法是在 UIView 中的 UITableView 顶部添加标签和 UIActivityIndi​​cator。在 viewDidLoad 中，将 UILabel 的 hidden 属性设置为 NO 并开始为指示器设置动画。

调用方法在另一个线程中下载数据。

```
[NSThread detachNewThreadSelector...] 
```

下载完成后，在主线程上调用一个方法，该方法将设置 UILabel hidden = YES，停止指示器动画并重新加载表格。

```
[self performSelectorOnMainThread...] 
```

希望有帮助。

# string - 强制在固定宽度的 Gridview 单元格中断开字符串

> ID：749100
> 
> 赞同：0
> 
> 时间：2009-04-14T19:50:53.417
> 
> 标签：string, gridview, layout, break, fixed

我在具有固定宽度单元格的 ASP.Net 页面上有一个 Gridview 控件。来自数据库的数据有时会以连续的字符串形式出现。当字符串中有破折号时，它将中断，以免破坏布局的宽度。如果没有破折号（具体来说，我正在处理下划线），则字符串不会中断并强制单元格变宽，从而打乱页面的布局。有没有办法告诉单元格保持其宽度并断开字符串？就目前而言，我无法直接访问该字段的数据，因为 GridView 将其数据源绑定到来自数据库的数据集对象。感谢您的任何反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-14T20:03:49.237

如果您处理[RowDataBound 事件](http://msdn.microsoft.com/en-us/library/aa479342.aspx)，您将能够“手动”中断字符串。否则它只会基于“HTML 规则”而中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T20:23:15.133

首先要注意的是，这与 ASP.NET 没有太大关系，而是纯粹的 HTML（和 CSS）问题。

一种可能的解决方案是使用 css 属性 table-layout: fixed 并为所有列设置一些固定宽度值。这种方法的缺点是表格的总宽度是固定的，因此它不会随窗口大小而缩放。

另一种可能的方法是使用将长字符串切割到最大长度的实用函数在列中显示较短的字符串。

# c# - 无论如何检测线程方法是否已完成

> ID：749123
> 
> 赞同：0
> 
> 时间：2009-04-14T19:56:03.343
> 
> 标签：c#, multithreading, blocking

我有一个队列，它基本上是albahari.com线程手册中的生产者/消费者队列，它从队列中取出一个队列项，这是一个从队列中取出的动作执行块，然后调用一个方法来执行动作列表在队列项目中。

我可以通过加入一个空动作块来轻松杀死队列，并通过使用 thread.sleep() 执行旋转/等待来阻塞主线程，直到队列计数变为零，并且所有线程都通过 while !=null 循环，从而完成，但执行最后一个动作列表的方法可能仍在执行最后一个线程。

问题是，他们是否无论如何要检测该方法是否仍有线程执行它，例如使用信号量或带有互锁的计数器在方法开始时向上计数信号量并在结束时将其计数。所以如果它达到零，我知道它没有线程。

这是在接口上实现一个destroy方法，在调用dispose之前将其关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T19:59:33.913

使用具有已完成事件的 Backgroundworker

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T20:02:00.490

如果你像这样开始一个线程：

```
System.Threading.Thread mythread = new System.Threading.Thread();
mythread.Start(); 
```

您可以检查：

```
mythread.IsAlive() 
```

随时确定其状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-04T17:33:38.323

在方法上使用 PostSharp 属性。

# jquery - DOM Navigation with JQuery in ASP.Net

> ID：749126
> 
> 赞同：2
> 
> 时间：2009-04-14T19:56:38.600
> 
> 标签：jquery, dom, navigation

I've written the JQuery below, and have had to search for items in the DOM using multiple calls to .parent() because the ClientIDs rendered in ASP.Net are built up dynamically in the html. I'm aware that this will cause problems each time we change the markup code, and would like to see if anyone knows of a better way to do this in ASP.Net.

```
<script language="jquery" src="js/jquery-1.3.2-vsdoc2.js" type="text/javascript">
</script>
<script src="js/jquery.color.js" type="text/javascript">
</script>
script language="javascript" type="text/javascript">
    $(document).ready(function() {

    //Get the cost of the base item, then add the cost of the selected compoents as 
    //they get selected.    
    $(".AspNet-CheckBoxList > ul > li > input").click(function() {

        var itemCost = 0;

        $(this).find("fieldset:div:span");

        itemCost =  GetItemCost($(this).parent().parent().parent().parent()
        .parent().parent().parent().children().find("span").text());
        var Component = $(this).next("label").text();

        if ($(this).attr("checked") == true) {
            itemCost = (itemCost + GetItemCost(Component)).toFixed(2);               
        }
        else {
            itemCost = (itemCost - GetItemCost(Component)).toFixed(2);
        }

        $(this).parent().parent().parent().parent().parent()
        .parent().parent().children().find("span").text("$" + itemCost);
        $(this).parent().parent().parent().parent().parent()
        .parent().parent().children().find("span").animate( 
        { backgroundColor: "#FFFF66" }, 300)
         .animate({ backgroundColor: 'white' }, 750);
      });

   });

function GetItemCost(text) {
    var start = 0;
    start = text.lastIndexOf("$");

    var itemCost = text.substring(start + 1);       

    var pattern = /,/g;
    itemCost = itemCost.replace(pattern, "");       

    return Number(itemCost);
}
</script> 
```

Here is some of the html copied from the source of the rendered page

```
<fieldset id="ctl00_ContentPlaceHolder1_ctl00_FieldSet" class="parent">
<legend>
</legend>
<a id="ctl00_ContentPlaceHolder1_ctl00_ImgLink" class="imgcontainer">
</a>
<div>
<input id="ctl00_ContentPlaceHolder1_ctl00_RemoveCartItem" type="image" 
    alt="Remove Item" src="img/buttons/remove_4c.gif" 
    name="ctl00$ContentPlaceHolder1$ctl00$RemoveCartItem"/>
<span id="ctl00_ContentPlaceHolder1_ctl00_TotalItemCost">$315.96</span>
</div>
<ol id="ctl00_ContentPlaceHolder1_ctl00_InputList">
<li class="pt">
<label id="ctl00_ContentPlaceHolder1_ctl00_ProjectLabel"   
for="ctl00_ContentPlaceHolder1_ctl00_ProjectValue">Project</label>
<input id="ctl00_ContentPlaceHolder1_ctl00_ProjectValue" type="text"  
name="ctl00$ContentPlaceHolder1$ctl00$ProjectValue"/>
</li>
<li class="pt">
<label id="ctl00_ContentPlaceHolder1_ctl00_TaskLabel"    
for="ctl00_ContentPlaceHolder1_ctl00_TaskValue">Task</label>
<input id="ctl00_ContentPlaceHolder1_ctl00_TaskValue" type="text"  
name="ctl00$ContentPlaceHolder1$ctl00$TaskValue"/>
</li>
<li id="ctl00_ContentPlaceHolder1_ctl00_ComponentsLI">
<span>Specify</span>
<fieldset id="ctl00_ContentPlaceHolder1_ctl00_ComponentsFieldSet"  
class="fieldsetlist">
<legend>Software Components</legend>
<div id="ctl00_ContentPlaceHolder1_ctl00_SoftwareComponentsCheckList" class="AspNet- 
CheckBoxList">
<ul class="AspNet-CheckBoxList-RepeatDirection-Vertical">
<li class="AspNet-CheckBoxList-Item">
<input id="ctl00_ContentPlaceHolder1_ctl00_SoftwareComponentsCheckList_0"  
type="checkbox" value="2305"     
name="ctl00$ContentPlaceHolder1$ctl00$SoftwareComponentsCheckList$0"/>
<label for="ctl00_ContentPlaceHolder1_ctl00_SoftwareComponentsCheckList_0">Another  
Cool Component $1,000.00</label>
</li>
<li class="AspNet-CheckBoxList-Item">
<input id="ctl00_ContentPlaceHolder1_ctl00_SoftwareComponentsCheckList_1"  
type="checkbox" value="2306"   
name="ctl00$ContentPlaceHolder1$ctl00$SoftwareComponentsCheckList$1"/>
<label for="ctl00_ContentPlaceHolder1_ctl00_SoftwareComponentsCheckList_1">Software   
Assurance $274.89</label>
</li>
</ul>
</div>
</fieldset>
</li>
</ol>
</fieldset> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-14T20:02:08.990

This might help you: To get the ID of an ASP .NET control in JavaScript, use sever tags like this right in your JavaScript code:

```
$("#<%=lblMyAspNetLabel.ClientID %>").text("test"); 
```

Where lblMyAspNetLabel is the ID of an asp:Label control on your aspx page.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T20:04:08.113

You can use the [attribute ends with selector](http://docs.jquery.com/Selectors/attributeEndsWith#attributevalue):

```
$("tag[id$='ServerSideId']") 
```

Where ServerSideId is the id used on server side.

For example to select:

```
<li id="ctl00_ContentPlaceHolder1_ctl00_ComponentsLI"> 
```

Use:

```
$("li[id$='ComponentsLI']") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T20:04:20.717

I know that ASP.NET makes it difficult to know what the ID of a given tag will be, but it usually is possible to add a CSS class to any given control. Perhaps you could use a unique class for the controls you want to find with jQuery and then use $(".yourCssClass") to get the DOM nodes.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-14T20:06:10.277

My sugguestion is to use css class as identifier for the controls you want jQuery to select. e.g.

```
<a id="ctl00_ContentPlaceHolder1_ctl00_ImgLink" class="imgcontainer">
</a> 
```

will become

```
<a id="ctl00_ContentPlaceHolder1_ctl00_ImgLink" class="imgcontainer ImgLink">
</a> 
```

Then use **$(".ImgLink")** to select the hyperlink

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-14T21:13:33.187

I wrote a [custom selector](http://gist.github.com/88436) for jQuery for ASP.Net UniqueID's:

```
//case-insensitive selector for ASP.Net ID's
//usage: $(':aspnetid(id)')

jQuery.extend(
    jQuery.expr[":"],
    {
        aspnetid: function(a, i, m) {
            return (new RegExp(m[3] + '$', 'i')).test(jQuery(a).attr('id'));
        }
    }
); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-23T15:42:38.900

Really easy way to target a .Net element in jQuery

```
$("[id$='txb_myTextbox']") 
```

where txb_myTextbox is the user given Id for a control.

# c++ - 用 boost::variant 元素填充的 std::set 不能按后代排序？

> ID：749129
> 
> 赞同：1
> 
> 时间：2009-04-14T19:57:25.213
> 
> 标签：c++, boost

```
typedef boost::variant<long long,double,string> possibleTypes ;

set<possibleTypes,less<possibleTypes> > ascSet ;
set<possibleTypes,greater<possibleTypes> > descSet ; 
```

当我尝试编译时，我在一些库头文件中遇到了一堆错误。
但是，如果我删除第三行（带有 的那一行`descSet`），代码编译得很好。

有什么问题？boost::variant 对象不能按后代顺序排序吗？

**编辑：**
我正在使用 Visual Studio 2005 和 Boost 1.38.0 以及以下命令行：

```
cl /EHsc /I"C:\boost_1_38_0" test.cpp 
```

**Edit2** 正如 Doug T 所建议的那样，如果我定义这个：

```
bool operator>(const possibleTypes& a, const possibleTypes& b){
   return b < a ;
} 
```

然后以下代码无法编译：

```
possibleTypes pt1="a", pt2="b" ;
greater<possibleTypes> func ;   
cout << func(pt1,pt2) << endl ; 
```

但是，这段代码编译得很好：

```
possibleTypes pt1="a", pt2="b" ;
cout << (pt1 > pt2) << endl ; 
```

谁能帮我理解为什么？

我尝试使用 VC++ 2005 和 GCC 3.4.6

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-14T20:04:13.527

似乎为 boost::variant 定义了 < 运算符，但没有为 > 运算符定义。因此，也许 std::less<> 有效，但 std::greater<> 无效

看[这里](http://www.boost.org/doc/libs/1_38_0/doc/html/boost/variant.html)

我会尝试定义一个免费的 > 运算符。

```
bool operator > (boost::variant<...> lhs, boost::variant<..> rhs)
{
    return (rhs < lhs) // thanks Chris Jester Young
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T20:30:51.060

您需要有更大的运算符可用。如果*possibleTypes*没有提供，您可以像 Doug 建议的那样定义一个免费的，或者尝试使用[Boost 运算符](http://www.boost.org/doc/libs/1_38_0/libs/utility/operators.htm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T21:41:36.413

正如建议的那样，如果我定义这个：

```
bool operator>(const possibleTypes& a, const possibleTypes& b){
   return b < a ;
} 
```

然后以下代码无法编译：

```
possibleTypes pt1="a", pt2="b" ;
greater<possibleTypes> func ;   
cout << func(pt1,pt2) << endl ; 
```

但是，这段代码编译得很好：

```
possibleTypes pt1="a", pt2="b" ;
cout << (pt1 > pt2) << endl ; 
```

谁能帮我理解为什么？

我尝试使用 VC++ 2005 和 GCC 3.4.6

# multithreading - 如何检测挂起的线程？

> ID：749150
> 
> 赞同：0
> 
> 时间：2009-04-14T20:02:29.897
> 
> 标签：multithreading

是否可以检测到挂起的线程？该线程不是任何线程池的一部分，它只是一个系统线程。由于线程被挂起，它可能不会处理任何事件。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-14T20:07:54.563

理论上是[不可能](http://en.wikipedia.org/wiki/Halting_Problem)的。如果您在 Windows 上并且怀疑线程可能已死锁，我想您可以使用 GetThreadContext 几次并检查它是否始终相同，但我不知道它有多可靠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T20:08:38.447

理论上不是，但在实践中它可能是可能的，具体取决于您的工作量。例如，如果它应该响应事件，您可以发布一个线程消息（在 Windows 中）并查看它是否响应。您可以设置一个事件或标志，使其执行某些操作 - 然后您必须等待“合理”的时间才能查看它是否已响应。然后出现的问题是，您将如何处理“挂起”线程，即使它确实挂起并且不只是需要很长时间才能响应。线程通常不能安全地被杀死，并且您通常不能中断任意线程。记录一条大意的消息是足够安全的，但谁会在乎呢？最好的办法可能是记下它并找出导致它挂起的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T20:10:37.473

根据工作负载和完成的处理类型以及其他细节，可能会检测到挂起的线程。在某些情况下，现代虚拟机可以检测到两个线程挂起等待另一个释放锁的锁死锁。（但不要依赖这个，因为它并不总是可能的，只是有时。）

我们需要更多信息才能对您的问题给出具体答案。

# iphone - NSDocumentDirectory 对于给定的应用程序是唯一的吗？

> ID：749153
> 
> 赞同：3
> 
> 时间：2009-04-14T20:03:57.833
> 
> 标签：iphone, cocoa

我想在我的 iPhone 应用程序中保存一些用户特定的数据。我正在查看 SQLite 示例，它正在使用类似于以下内容的内容：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains( NSDocumentDirectory, NSUserDomainMask ,YES );
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *writableDBPath = [documentsDirectory stringByAppendingPathComponent:dbName]; 
```

我想知道的是，“writableDBPath”对我的应用程序来说是唯一的吗？我的“dbName”是否存在与另一个应用程序使用的同名文件冲突的风险？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-14T20:15:07.853

在 iPhone 上，它们是独一无二的，因为已经完成了应用程序沙盒。但是，在普通的 Mac 上，NSDocumentDirectory 仅对用户是唯一的，如果您不使文件以某种方式唯一或创建特定于应用程序的子目录，则可能会出现名称冲突，因此请注意如果你曾经从 iPhone 转到 Mac。

# html - 作为语义标记的一部分

> ID：749160
> 
> 赞同：2
> 
> 时间：2009-04-14T20:05:58.797
> 
> 标签：html, semantics, specifications, markup

我开发的其中一个网站有很多相互关联的信息；我们有公司，我们为这些公司提供产品。公司页面链接到列出该公司产品的页面，反之亦然。

从[HTML 规范](http://www.w3.org/TR/html401/struct/text.html#edef-CITE)：

> CITE：包含对其他来源的引用或引用。

这是否意味着我可以（语义上）将 a`<cite>`用于公司链接？公司页面上的产品怎么样？

如果没有，有人能告诉我这可能是什么“正确”的语义标签吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-14T20:13:51.023

如果您只是链接到其他页面，那么在语义上您应该只使用`<a href=...>`. 如果您引用一小段信息，例如您问题中 HTML 规范中的信息，并提供指向原始来源的链接，您可以使用`<cite>`. 将其视为一本书或研究论文中的引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T20:14:34.563

我不确定 cite 是否旨在标记链接 - 您可能正在使用链接的 rel 属性查看类似于更专业（较少人际交往）XFN 的东西。

引用更多地用于标记文章或其他创作作品的标题。

XFN 专门用于标记您（或您的公司）与您链接的个人或公司之间的关系。我不确定的是公司链接的 xfn 值（如果有的话）。

[http://reference.sitepoint.com/html/xfn](http://reference.sitepoint.com/html/xfn)

您可能会考虑将在哪些细节上使用这些信息？语义标记虽然是一个崇高的方向，但在查看（由人类）或解析（由程序）资源时尚未充分利用。

# python - 如何生成 gettext 复数形式表达式的示例？在 Python 中？

> ID：749170
> 
> 赞同：1
> 
> 时间：2009-04-14T20:11:06.240
> 
> 标签：python, internationalization, gettext

给定一个 gettext Plural-Forms 行，每个`n`. 我希望我的网站翻译人员的 Web 界面具有此功能，以便他们知道将哪种复数形式放在哪里。例如，给定：

`"Plural-Forms: nplurals=3; plural=n%10==1 && n%100!=11 ? 0 : n%10>=2 && n%"` `"10<=4 && (n%100<10 || n%100>=20) ? 1 : 2;\n"`

...我希望第一个文本字段标记为“1, 21..”，然后是“2, 3, 4...”，然后是“5, 6...”（不确定这是否完全正确，但你明白了。）

现在我能想到的最好的办法是以某种方式解析表达式，然后将 x 从 0 迭代到 100 并查看它产生的 n。这不能保证有效（如果某些语言的最低 x 超过 100 怎么办？）但它可能已经足够好了。有更好的想法或现有的 Python 代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-16T00:01:35.523

既然来晚了，我就咬一口。

以下解决方案是hacky，并且依赖于将复数形式转换为可以评估的python代码（基本上将 x ? y : z 语句转换为python x 和 y 或 z 等效项，并将 &&/|| 更改为和/或)

我不确定你的复数形式规则是否是一个人为的例子，我不明白你的第一个文本字段是什么意思，但我相信你会通过我的示例解决方案得到我要去的地方：

```
# -*- Mode: Python -*-
# vi:si:et:sw=4:sts=4:ts=4

p = "Plural-Forms: nplurals=3; plural=n%10==1 && n%100!=11 ? 0 : n%10>=2 && n%10<=4 && (n%100<10 || n%100>=20) ? 1 : 2;\n"

# extract rule
import re
matcher = re.compile('plural=(.*);')
match = matcher.search(p)
rule = match.expand("\\1")

# convert rule to python syntax
oldrule = None
while oldrule != rule:
    oldrule = rule
    rule = re.sub('(.*)\?(.*):(.*)', r'(\1) and (\2) or (\3)', oldrule)

rule = re.sub('&&', 'and', rule)
rule = re.sub('\|\|', 'or', rule)

for n in range(40):
    code = "n = %d" % n
    print n, eval(rule) 
```

# c# - 如何将 winforms 对话框附加到现有的工具栏/菜单栏（编译的 C++ 应用程序）？

> ID：749171
> 
> 赞同：0
> 
> 时间：2009-04-14T20:12:24.553
> 
> 标签：c#, .net, c++, winforms, winapi

要在 Microsoft 写字板工具栏/菜单栏上附加一个 winforms 对话框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2011-03-16T13:26:59.450

Microsoft Windows 公共控件 (COMCTL32.OCX) 提供的工具栏控件可由用户自定义...

[http://support.microsoft.com/kb/q174087/](http://support.microsoft.com/kb/q174087/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-03-16T13:31:01.850

首先，您需要将程序集加载到目标进程中。

然后您需要使用 Win32 API 函数来创建具有唯一子 ID[的新菜单项。](http://msdn.microsoft.com/en-us/library/ff468865.aspx)

最后，您需要[子类化窗口过程](http://msdn.microsoft.com/en-us/library/system.windows.forms.nativewindow.assignhandle.aspx)并处理`WM_COMMAND`消息，这些消息是在选择本机菜单项时由 Windows 生成的。请务必`WM_COMMAND`通过调用将所有其他消息（包括与您的菜单项不匹配的消息）处理到原始窗口过程`base.WndProc`。

当然，这不适用于 Windows 7 写字板，因为它没有菜单或工具栏，它使用新的“功能区”控件。不过，[功能区 API](http://msdn.microsoft.com/en-us/library/dd316910.aspx)可能会为您提供一种添加新项目的方法。

# concurrency - 谁能推荐一个并发的实时图表/流程图协作工具？

> ID：749172
> 
> 赞同：2
> 
> 时间：2009-04-14T20:12:25.533
> 
> 标签：concurrency, uml, class-diagram, diagramming

我希望与其他人一起快速构建一个相当大的类流程图，它可能是也可能不是严格的 UML。任何人都可以为此类任务推荐一种联网的并发协作工具吗？价格不是问题，但目标系统必须是 Windows。

过去肯定有人做过类似的事情。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-20T23:52:42.347

[DabbleBoard](http://dabbleboard.com/)有一个在线图表工具，可以做你想做的事。它应该可以在 Windows 上运行，尽管它是基于 Web 的并且相当低级。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-04-28T12:33:26.893

我不知道你到底需要多并发，但[Google Docs](https://docs.google.com)刚刚引入了一种“绘图”文档类型，它基本上是一个基于模板的系统，如 visio。它包括流程图元素，当然可以共享。

# regex - 如何在vim的每一行末尾添加一个额外的字符

> ID：749173
> 
> 赞同：1
> 
> 时间：2009-04-14T20:12:30.620
> 
> 标签：regex, vim

我有以下用例，我的文件内容如下所示

```
a
b
c 
```

我想要一个正则表达式来做到这一点

```
a|
b|
c| 
```

你能推荐一个vim中的正则表达式吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-04-14T20:15:40.910

在vim中输入以下内容

```
:%s/$/|/ 
```

这意味着用`$`字符串替换由 表示的行尾`|`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T20:14:46.543

这将用于基本的脚本目的

```
 sed 's/$/|/' filename 
```

对于 vim

```
:%s/$/|/g 
```

g 代表全局，但不需要

# amazon-s3 - 在 S3 到 EC2 之间复制数据的最快/最佳方式？

> ID：749178
> 
> 赞同：22
> 
> 时间：2009-04-14T20:13:36.360
> 
> 标签：amazon-s3, amazon-ec2

我有相当大量的数据（~30G，分成~100个文件）我想在 S3 和 EC2 之间传输：当我启动 EC2 实例时，我想将数据从 S3 复制到 EC2 本地磁盘尽快，当我完成处理后，我想将结果复制回 S3。

我正在寻找一种可以来回快速/并行复制数据的工具。我有几个脚本被黑了，包括一个做得不错的脚本，所以我不是在寻找指向基本库的指针；我正在寻找快速可靠的东西。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2011-09-25T09:51:14.860

不幸的是，亚当的建议不会奏效，因为他对 EBS 的理解是错误的（尽管我希望他是对的，并且经常认为自己应该那样工作）......因为 EBS 与 S3 无关，但它只会给你独立但可连接到实例的 EC2 实例的“外部驱动器”。您仍然需要在 S3 和 EC2 之间进行复制，即使两者之间没有数据传输成本。

你没有提到你的实例的操作系统，所以我不能提供量身定制的信息。我使用的一个流行的命令行工具是[http://s3tools.org/s3cmd](http://s3tools.org/s3cmd) ...它基于 Python，因此，根据其网站上的信息，它应该可以在 Win 和 Linux 上运行，尽管我使用它所有Linux 上的时间。您可以轻松地编写一个快速脚本，该脚本使用其内置的“同步”命令，其工作方式类似于 rsync，并在每次处理完数据时触发它。您还可以使用递归 put 和 get 命令仅在需要时获取和放置数据。

像 Cloudberry Pro 这样的图形工具也有一些适用于 Windows 的命令行选项，您可以设置计划命令。[http://s3tools.org/s3cmd](http://s3tools.org/s3cmd)可能是最简单的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-27T05:51:39.660

到目前为止，AWS 命令​​行工具中有一个同步命令，应该可以解决问题：http: [//docs.aws.amazon.com/cli/latest/reference/s3/sync.html](http://docs.aws.amazon.com/cli/latest/reference/s3/sync.html)

启动时：aws s3 sync s3://mybucket /mylocalfolder

关机前：aws s3 sync /mylocalfolder s3://mybucket

当然，细节总是很有趣，例如。它是如何并行的（你能不能让它更并行，并且更快地控制整个设置的虚拟性质）

顺便说一句，希望你还在做这个……或者有人在做。;)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-14T20:19:14.677

我认为使用弹性块存储而不是 S3 来存储文件可能会更好。EBS 类似于 S3 上的“驱动器”，可以安装到您的 EC2 实例中，而无需每次都复制数据，从而允许您在 EC2 实例之间持久保存数据，而无需每次都向 S3 写入或读取。

[http://aws.amazon.com/ebs/](http://aws.amazon.com/ebs/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-13T13:03:55.673

将**s3cmd**包安装为

```
yum install s3cmd 
```

或者

```
sudo apt-get install s3cmd 
```

取决于您的操作系统

然后用这个复制数据

```
s3cmd get s3://tecadmin/file.txt 
```

ls 也可以列出文件。

有关更多详细信息，请参阅[此](http://tecadmin.net/install-s3cmd-manage-amazon-s3-buckets/#)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-12T14:40:00.877

对我来说最好的形式是：

```
wget http://s3.amazonaws.com/my_bucket/my_folder/my_file.ext 
```

从`PuTTy`

# c - C 结构中的默认值

> ID：749180
> 
> 赞同：93
> 
> 时间：2009-04-14T20:13:47.077
> 
> 标签：c, initialization

我有一个这样的数据结构：

```
struct foo {
    int id;
    int route;
    int backup_route;
    int current_route;
} 
```

以及一个名为 update() 的函数，用于请求其中的更改。

```
update(42, dont_care, dont_care, new_route); 
```

这真的很长，如果我在结构中添加一些东西，我必须在每次调用 update(...) 时添加一个“dont_care”。

我正在考虑将它传递给一个结构，但事先用'dont_care'填充结构比在函数调用中拼写出来更乏味。我可以在某处创建默认值不关心的结构，并在我将其声明为局部变量后设置我关心的字段吗？

```
struct foo bar = { .id = 42, .current_route = new_route };
update(&bar); 
```

将我希望表达的信息传递给更新功能的最优雅的方式是什么？

我希望其他所有内容都默认为-1（'dont care'的密码）

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2009-04-14T23:15:50.553

虽然宏和/或函数（如前所述）将起作用（并且可能具有其他积极影响（即调试挂钩）），但它们比需要的更复杂。最简单且可能最优雅的解决方案是只定义一个用于变量初始化的常量：

```
const struct foo FOO_DONT_CARE = { // or maybe FOO_DEFAULT or something
    dont_care, dont_care, dont_care, dont_care
};
...
struct foo bar = FOO_DONT_CARE;
bar.id = 42;
bar.current_route = new_route;
update(&bar); 
```

这段代码几乎没有理解间接的精神开销，而且很清楚`bar`你明确设置了哪些字段，而（安全地）忽略了那些你没有设置的字段。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-04-14T20:38:08.937

您可以将您的秘密特殊值更改为 0，并利用 C 的默认结构成员语义

```
struct foo bar = { .id = 42, .current_route = new_route };
update(&bar); 
```

然后将 0 作为初始化器中未指定的 bar 的成员传递。

或者您可以创建一个宏来为您执行默认初始化：

```
#define FOO_INIT(...) { .id = -1, .current_route = -1, .quux = -1, ## __VA_ARGS__ }

struct foo bar = FOO_INIT( .id = 42, .current_route = new_route );
update(&bar); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-04-14T20:22:08.163

`<stdarg.h>`允许您定义可变参数函数（接受不定数量的参数，例如`printf()`）。我会定义一个函数，它接受任意数量的参数对，一个指定要更新的属性，另一个指定值。使用一个`enum`或一个字符串来指定属性的名称。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-14T21:10:48.593

也许考虑使用预处理器宏定义：

```
#define UPDATE_ID(instance, id)  ({ (instance)->id= (id); })
#define UPDATE_ROUTE(instance, route)  ({ (instance)->route = (route); })
#define UPDATE_BACKUP_ROUTE(instance, route)  ({ (instance)->backup_route = (route); })
#define UPDATE_CURRENT_ROUTE(instance, route)  ({ (instance)->current_route = (route); }) 
```

如果您的 (struct foo) 实例是全局的，那么您当然不需要该参数。但我假设你可能有不止一个实例。使用 ({ ... }) 块是适用于 GCC 的 GNU 主义；这是将线条作为一个块保持在一起的一种很好（安全）的方式。如果您以后需要向宏添加更多内容，例如范围验证检查，则不必担心破坏 if/else 语句等内容。

根据您指出的要求，这就是我要做的。像这样的情况是我开始大量使用 python 的原因之一；处理默认参数等变得比使用 C 更简单。（我猜那是一个 python 插件，抱歉 ;-)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-04-14T20:21:17.353

怎么样：

```
struct foo bar;
update(init_id(42, init_dont_care(&bar))); 
```

和：

```
struct foo* init_dont_care(struct foo* bar) {
  bar->id = dont_care;
  bar->route = dont_care;
  bar->backup_route = dont_care;
  bar->current_route = dont_care;
  return bar;
} 
```

和：

```
struct foo* init_id(int id, struct foo* bar) {
  bar->id = id;
  return bar;
} 
```

相应地：

```
struct foo* init_route(int route, struct foo* bar);
struct foo* init_backup_route(int backup_route, struct foo* bar);
struct foo* init_current_route(int current_route, struct foo* bar); 
```

在 C++ 中，类似的模式有一个我现在不记得的名字。

**编辑**：它被称为[命名参数成语](http://www.parashift.com/c++-faq-lite/named-parameter-idiom.html)。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-04-14T20:25:39.420

gobject 使用的一种模式是可变参数函数，以及每个属性的枚举值。界面看起来像：

```
update (ID, 1,
        BACKUP_ROUTE, 4,
        -1); /* -1 terminates the parameter list */ 
```

编写 varargs 函数很容易——参见[http://www.eskimo.com/~scs/cclass/int/sx11b.html](http://www.eskimo.com/~scs/cclass/int/sx11b.html)。只需匹配键 -> 值对并设置适当的结构属性。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-04-15T01:12:16.670

因为看起来你只需要这个结构来实现这个`update()`功能，所以根本不要使用这个结构，它只会混淆你在那个结构背后的意图。您也许应该重新考虑为什么要更改和更新这些字段，并为这些“小”更改定义单独的函数或宏。

例如

```
 #define set_current_route(id, route) update(id, dont_care, dont_care, route)
#define set_route(id, route) update(id, dont_care, route, dont_care)
#define set_backup_route(id, route) update(id, route, dont_care, dont_care) 
```

或者更好地为每个变更案例编写一个函数。正如您已经注意到的那样，您不会同时更改每个属性，因此一次只能更改一个属性。这不仅提高了可读性，还帮助您处理不同的情况，例如，您不必检查所有“dont_care”，因为您知道只有当前路线被更改。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-04-14T20:38:15.003

我对结构很生疏，所以我可能在这里遗漏了一些关键字。但为什么不从初始化默认值的全局结构开始，将其复制到局部变量，然后修改它呢？

一个初始化器，如：

```
void init_struct( structType * s )
{
   memcopy(s,&defaultValues,sizeof(structType));
} 
```

然后当你想使用它时：

```
structType foo;
init_struct( &foo ); // get defaults
foo.fieldICareAbout = 1; // modify fields
update( &foo ); // pass to function 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-04-12T13:43:26.550

您可以使用[X-Macro解决问题](https://stackoverflow.com/questions/6635851/real-world-use-of-x-macros)

您可以将结构定义更改为：

```
#define LIST_OF_foo_MEMBERS \
    X(int,id) \
    X(int,route) \
    X(int,backup_route) \
    X(int,current_route)

#define X(type,name) type name;
struct foo {
    LIST_OF_foo_MEMBERS 
};
#undef X 
```

然后您将能够轻松定义一个灵活的函数，将所有字段设置为`dont_care`.

```
#define X(type,name) in->name = dont_care;    
void setFooToDontCare(struct foo* in) {
    LIST_OF_foo_MEMBERS 
}
#undef X 
```

按照[此处](https://stackoverflow.com/questions/43373393/why-is-this-nested-macro-replacement-failing)的讨论，也可以通过这种方式定义默认值：

```
#define X(name) dont_care,
const struct foo foo_DONT_CARE = { LIST_OF_STRUCT_MEMBERS_foo };
#undef X 
```

翻译成：

```
const struct foo foo_DONT_CARE = {dont_care, dont_care, dont_care, dont_care,}; 
```

并在[hlovdal answer](https://stackoverflow.com/a/749690/2436175)中使用它，**其优点是此处维护更容易，即更改 struct 成员的数量将自动更新`foo_DONT_CARE`**。请注意，[最后一个“虚假”逗号是可以接受的](https://stackoverflow.com/a/792767/2436175)。

当我不得不解决[这个问题](https://stackoverflow.com/questions/43346927/initializing-all-members-of-the-same-basic-data-type-of-a-struct-to-one-give)时，我第一次了解了 X-Macros 的概念。

将新字段添加到结构中非常灵活。如果您有不同的数据类型，您可以`dont_care`根据数据类型定义不同的值：从[这里](https://stackoverflow.com/a/43352124/2436175)，您可以从第二个示例中用于打印值的函数中获取灵感。

如果您对 all`int`结构没问题，那么您可以省略数据类型`LIST_OF_foo_MEMBERS`，只需将结构定义的 X 函数更改为`#define X(name) int name;`

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-04-14T20:22:32.327

最优雅的方法是直接更新结构字段，而不必使用该`update()`函数 - 但也许有充分的理由使用它，而问题中没有遇到。

```
struct foo* bar = get_foo_ptr();
foo_ref.id = 42;
foo_ref.current_route = new_route; 
```

或者，您可以像 Pukku 建议的那样，为结构的每个字段创建单独的访问函数。

否则，我能想到的最佳解决方案是将结构字段中的“0”值视为“不更新”标志 - 因此您只需创建一个函数来返回一个归零的结构，然后使用它来更新。

```
struct foo empty_foo(void)
{
    struct foo bar;
    bzero(&bar, sizeof (struct bar));
    return bar;    
}

struct foo bar = empty_foo();
bar.id=42;
bar.current_route = new_route;
update(&bar); 
```

但是，如果 0 是结构中字段的有效值，这可能不太可行。

# asp.net - Asp.Net binding specific fields of sql query to Listview

> ID：749197
> 
> 赞同：0
> 
> 时间：2009-04-14T20:17:50.357
> 
> 标签：asp.net, sql, listview, bind

I have a listview that has a few different controls. I need to bind specific fields of a query to certain parts of a control. The table contains a friendid and a firstname. I want to put the friendid at the end of a URL. I want to put the firstname in the text of a label. There will be multiple friends returned on the query. The listview should show all in a separate row. Here is what I have, which is obviously not right.

```
<asp:ListView ID="lvFriends" runat="server">
    <LayoutTemplate>
    <ul ID="itemPlaceholderContainer" runat="server" style="">
        <li ID="itemPlaceholder" runat="server" />
    </ul>
</LayoutTemplate>
    <ItemTemplate>
        <li>
            <div style="float:left;">
                <a id="A1" href='<%# ResolveUrl(String.Format("~/UserPages/FriendsPages/FriendsProfile.aspx?friend={0}", Container.DataItem)) %>' runat="server"><asp:Image ID="ImageButton1" ImageUrl='<%# ResolveUrl(String.Format("~/UserPages/FriendsPages/FriendsThumbImage.aspx?friend={0}", Container.DataItem)) %>' runat="server" /></a>
        </div>

            <div style="margin-left:300px;">
        <ul>
            <li><asp:Label ID="FirstNameLabel" runat="server" Text='<%# Eval("FriendFN") %>' /></li>
        </ul>
    </div>
        </li>
    <div style="clear:both;"></div>
    </ItemTemplate>
<ItemSeparatorTemplate><br /></ItemSeparatorTemplate>
</asp:ListView> 
```

CODE BEHIND:

```
string strCon = System.Web.Configuration.WebConfigurationManager.ConnectionStrings["SocialSiteConnectionString"].ConnectionString;
using (SqlConnection conn = new SqlConnection(strCon))
{
    using (SqlCommand cmd = conn.CreateCommand())
    {
        conn.Open();
        cmd.CommandText = "SELECT * from [Friends] WHERE [UserId] = @UserId";
        cmd.Parameters.AddWithValue("@UserId", User.Identity.Name);

        DataTable dtFriends = new DataTable();
        dtFriends.Columns.Add("FriendId");
        dtFriends.Columns.Add("FriendFN");

        SqlDataReader nwReader = cmd.ExecuteReader();
        while (nwReader.Read())
        {
            string RdFriendId = nwReader["FriendId"].ToString().ToLower();
            string RdFriendFN = nwReader["FriendFirstName"].ToString().ToLower();

            dtFriends.Rows.Add(new object[] {RdFriendId, RdFriendFN});
        }
        nwReader.Close();
        Session.Add("FriendsTable", dtFriends);

        conn.Close();
        lvFriends.DataSource = dtFriends;
        lvFriends.DataBind();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-15T02:23:43.910

I would look into using a repeater control instead.

# asp.net - JQuery selector for inline style property

> ID：749198
> 
> 赞同：2
> 
> 时间：2009-04-14T20:17:50.733
> 
> 标签：asp.net, jquery

I would like to use a jquery to select the following span:

```
<span id="RequiredFieldValidator1" class="validationerror" style="color: Red; display: none;">*</span> 
```

But not select the following span which differs from the original in that the style attribute has a display property whose value is inline instead of none.

```
<span id="RequiredFieldValidator2" class="validationerror" style="color: Red; display: inline;">*</span> 
```

I am aware inline styles are evil but an asp.net web forms validator control is generating it and doing a lot of good as well as evil.

Can this be done using jquery selectors? I'm new to jquery.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-14T20:22:30.660

```
$("span[style*=inline]") 
```

will select all span elements with the style attribute which has the value "inline" in it somewhere.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-14T20:22:28.600

Try something like this:

```
$('.validationerror:hidden') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-08-25T01:00:13.050

我这样做是为了向验证错误控件的父级添加\删除错误样式，以突出显示导致错误的控件和验证消息。

```
$('input').change(function() {
  $(".validationError[style*=hidden]").parent().removeClass("error");
  $(".validationError[style*=visible]").parent().addClass("error");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-14T20:32:33.363

这里也是选择服务器端控件的建议

```
document.getElementById("<%=txtFirstName.ClientID %>"); 
```

或者

```
$("#'<%=txtFirstName.ClientID %>'"); 
```

或者

```
$("[id$='_txtFirstName']"); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-04-14T20:22:52.640

embed the styles inside the classes and you have 2 class the use JQuery selector

```
$(".<ClassName>") 
```

# data-structures - 我什么时候想使用堆？

> ID：749199
> 
> 赞同：110
> 
> 时间：2009-04-14T20:18:16.457
> 
> 标签：data-structures, heap

除了优先级队列的明显答案之外，堆什么时候对我的编程冒险有用？

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2009-04-14T20:22:41.343

每当您需要快速访问最大（或最小）项目时使用它，因为该项目将始终是数组中的第一个元素或树的根。

但是，数组的其余部分保持部分未排序。因此，即时访问只能访问最大（最小）的项目。插入速度很快，因此它是处理传入事件或数据的好方法，并且始终可以访问最早/最大的。

对优先级队列、调度程序（需要最早的项目）等很有用......

堆是一棵树，其中父节点的值大于其任何后代节点的值。

如果您将堆视为按深度以线性顺序存储的二叉树，首先是根节点（然后是该节点的子节点，然后是这些节点的子节点）；那么索引 N 处的节点的子节点位于 2N+1 和 2N+2 处。此属性允许按索引快速访问。而且由于堆是通过交换节点来操作的，这允许就地排序。

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2017-01-19T17:45:37.897

**堆是旨在允许快速访问 min 或 max 的结构**。

但你为什么要这样？您可以检查**add**上的每个条目，看看它是最小的还是最大的。这样你总是在恒定时间内拥有最小或最大的`O(1)`。

答案是因为**堆可以让你拉出最小的或最大的并快速知道下一个最小的或最大的**。这就是为什么它被称为优先队列。

## 现实世界的例子（虽然不是很公平的世界）：

假设您有一家医院，根据患者的年龄来就诊。无论他/她什么时候排队，最年长的总是先参加。

你不能只跟踪最老的，因为如果你把他/她拉出来，你不知道下一个最老的。为了解决这个医院问题，你实现了一个**最大堆**。根据定义，这个堆是部分有序的。这意味着您无法按年龄对患者进行排序，但您知道最老的始终排在最前面，因此您可以在恒定时间内拉出患者`O(1)`并在 log time 中重新平衡堆`O(log N)`。

## 更复杂的例子：

假设您有一个整数序列，并且您想要跟踪`median`. 中位数是有序数组中间的数字。

例子：

```
[1, 2, 5, 7, 23, 27, 31] 
```

在上述情况下，`7`是中位数，因为包含较小数字的数组与包含较大数字的数组`[1, 2, 5]`大小相同`[23, 27, 31]`。通常，如果数组有奇数个元素，则中位数是中间 2 个元素的算术平均值，例如`(5 + 7)/2`.

现在，您如何跟踪中位数？**通过有 2 个堆**，一个包含小于当前中位数的数字的最小堆和一个包含大于当前中位数的数字的最大堆。现在，如果这些堆总是平衡的，则 2 个堆将包含相同数量的元素，或者一个堆将比另一个堆多 1 个元素，最多。

向序列中添加新元素时，如果数字小于当前中位数，则将其添加到最小堆中，否则将其添加到最大堆中。现在，如果堆不平衡（一个堆的元素多于另一个），则从最大堆中**拉出一个元素并****添加**到最小堆中。现在他们平衡了。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2009-04-14T20:27:57.823

堆的特点是它是一种保持数据半序的结构；因此，在维持完整秩序的成本和通过随机混沌搜索的成本之间是一个很好的权衡。该特性用于许多算法，例如选择、排序或分类。

堆的另一个有用特性是它可以从数组就地创建！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-14T20:23:31.967

也适用于选择算法（找到最小值或最大值）

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-04-14T20:33:22.597

任何时候对临时列表进行排序时，都应该考虑堆。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-05T05:52:43.853

当您想分别访问最小和最大元素时，可以使用 minHeap 或 maxHeap。

# c# - 如何在我的 app.config 文件中配置基类库？

> ID：749203
> 
> 赞同：0
> 
> 时间：2009-04-14T20:20:37.277
> 
> 标签：c#, web-config, app-config

我发现了一些与 app.config/web.config 相关的信息片段，它们暗示了直接通过 app.config 对 BCL 组件进行几乎无代码的配置。但是，鉴于 app.config 中的智能感知建议的标签数量，这表明存在大量可能性，我找不到*任何*有用的信息。

是否有任何文档支持此特定配置文件区域？我可以找到大量关于存储/检索配置信息的信息和少量关于编写我熟悉的自定义配置部分的信息，但我找不到任何关于以这种方式配置 BCL 组件的信息。有人有这方面的参考资料吗？

我遇到的一个例子如下：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.diagnostics>
    <trace autoflush="true" indentsize="2">
      <listeners>
        <add name="Console"
             type="System.Diagnostics.ConsoleTraceListener, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
              traceOutputOptions="Timestamp" />
      </listeners>
    </trace>
    <switches>
      <add name="Logging.Program.Listener" value="Error" />
    </switches>
  </system.diagnostics>
</configuration> 
```

可以使用与此类似的方式使用代码：

```
class Program
{
  private static TextWriterTraceListener tw = new TextWriterTraceListener();
  private static TraceSwitch ts = new TraceSwitch("Logging.Program.Listener", "Default Logging Level", "Off");

  static void Main(string[] args)
  {
    Trace.Listeners.Add(tw);

    try
    {
        throw (new EntryPointNotFoundException());
    }
    catch (EntryPointNotFoundException ex)
    {
        string TraceMessage = "Trace {0}: {1}";
        Trace.WriteLineIf(ts.TraceError, String.Format(TraceMessage, TraceLevel.Error, "Error Level Message"));
        Trace.WriteLineIf(ts.TraceWarning, String.Format(TraceMessage, TraceLevel.Warning, "Warning Level Message"));
        Trace.WriteLineIf(ts.TraceInfo, String.Format(TraceMessage, TraceLevel.Info, "Info Level Message"));
        Trace.WriteLineIf(ts.TraceVerbose, String.Format(TraceMessage, TraceLevel.Verbose, "Verbose Level Message"));
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T22:10:35.203

一种有用的资源是机器级配置文件。实际文件是基本文件，但旁边有“.comments”文件，提供了可以实现的相当详细的示例。例如，看看

> C:\Windows\Microsoft.NET\Framework\v2.0.50727\CONFIG\machine.config.comments

这将使您对可以实现的目标有所了解。任何你看到集合元素的地方，比如`<traceSwitches>`and`<traceListeners>`元素，其中包含的单个`<add>`元素可能会根据你添加的内容而有所不同（即，这些`<add>`元素的特定属性将根据你添加到集合中的确切内容而有所不同）。为此，您需要查阅特定领域的文档，但`<traceSwitches>`在 MSDN 中搜索该元素应该是一个不错的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T20:29:20.750

它们都可以通过这种方式进行配置。这就是为什么你没有找到任何东西。

好吧，也许不是全部，但肯定是大多数。如果你想知道，使用 Reflector 查找 System.configuration.ConfigurationSection 等的所有派生类。

# visual-studio - Visual Studio 中的 LINQ To SQL 类图

> ID：749207
> 
> 赞同：2
> 
> 时间：2009-04-14T20:21:35.607
> 
> 标签：visual-studio, linq-to-sql, class, diagram

有没有办法在不使用打印屏幕的情况下复制 VS2008 中的 LINQ To SQL ORM 生成的类图（是的，我知道这很可悲）？

例如，当我在 Visual Studio 中创建数据库项目时，我可以复制数据库图表，然后以任何图像格式将它们保存在 Paint.NET 中。任何想法或建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-14T20:29:23.903

使用 Acrobat 打印为 PDF 适合我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T20:29:33.887

我不认为这是可能的。

[Cropper](http://www.codeplex.com/cropper)是 PrintScreen 的绝佳替代品

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T20:31:47.860

我不认为你可以通过 Visual Studio 做到这一点。然而，快速的网络搜索显示存在一种名为[Entity Developer Express](http://www.bestsoftware4download.com/software/t-free-entity-developer-express-download-kmhriozh.html)的产品，它似乎提供了这种功能。它也是免费的。

# asp.net - How do I Display Code Samples On Web Pages With Nice Syntax Styling Like Stack Overflow Does?

> ID：749209
> 
> 赞同：11
> 
> 时间：2009-04-14T20:21:49.083
> 
> 标签：asp.net, javascript, html, css

I would like to be able to pull some code samples out of a database and/or have the text embedded into the website and then have the sample formatted in a code like fashion on the screen. While the text alone on the screen is great, the format will make it more user friendly. How is this done?

**I want this:**

 public string MyString = "The Sample Text";

* * *

**To look like:**

```
public string MyString = "The Sample Text"; 
```

* * *

**EDIT WITH ANSWER**
I took [Gortok's](https://stackoverflow.com/questions/749209/display-code-samples-on-web-like-stackoverflow/749229#749229) suggestion and looked into [Prettify.js](http://code.google.com/p/google-code-prettify/) and its doing just what I had hoped. Here is how this is implemented.

```
<head runat="server">
    <script src="Scripts/prettify.js" type="text/javascript"></script>
    <script src="Scripts/jquery-1.3.2.js" type="text/javascript"></script>
    <link href="Scripts/prettify.css" rel="stylesheet" type="text/css"></link>
</head>
<body>
    <code class="prettyprint"> 
        public String HelloString = "New String"; 
    </code>  
    <script language="javascript"> 
        $().ready(function() { 
            prettyPrint(); 
        }); 
    </script> 
</body> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-04-14T20:25:06.987

Stack Overflow uses [prettify.js](http://code.google.com/p/google-code-prettify/) from Google.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-14T20:23:54.430

I use SyntaxHighlighter by Alex Gorbatchev

[http://alexgorbatchev.com/wiki/SyntaxHighlighter](http://alexgorbatchev.com/wiki/SyntaxHighlighter)

It's used on Yahoo Developer Network

[http://developer.yahoo.com/yui/animation/](http://developer.yahoo.com/yui/animation/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-14T20:28:02.173

would this help:

[http://code.google.com/p/syntaxhighlighter/](http://code.google.com/p/syntaxhighlighter/)

# .net - Sharing tables/models across LINQ database model

> ID：749216
> 
> 赞同：0
> 
> 时间：2009-04-14T20:22:51.640
> 
> 标签：.net, asp.net-mvc

I am not sure of the exact terminologies involved so please bear with me.

I have an ASP.NET MVC website - my first go at using this - and I decided to spread the Database Model (dbml file in other words) across 2 logical mappings. I thought they were logical until I decided to include my "Tags" table in both of the dbml files. This now makes the generate code duplicate a "Tags" class and therefore will not permit me to compile.

The obvious way round this is to get rid of my logical split across the 2 models and just whack all the tables and their relationships into a giant dbml file. This is what I will do if I cannot find a simple solution.

Does anyone have a solution to this probably common issue? Is it a simple case of inheriting one model from another making the various model/entities available everywhere?

Thanks in advance, mo

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-17T08:59:35.717

我想，从技术上讲，您可以为它们创建 2 个不同的 dbml 并从代码中删除重复项，但是每次更改模型时都必须这样做。会有点毛骨悚然。

# visual-studio-2008 - BIDS DTS_E_PRODUCTLEVELTOLOW

> ID：749222
> 
> 赞同：1
> 
> 时间：2009-04-14T20:23:47.630
> 
> 标签：visual-studio-2008, visual-studio-2005, ssis, bids

Group, I have Visual Studio (VS) 2005 and 2008 installed on my local machine. I am creating SSIS packages using BI Studio and the package will build and run fine on my local machine. However, as soon as I move it to the server I get the error: Error SSIS Error Code DTS_E_PRODUCTLEVELTOLOW. The product level insufficient for component...

It is basically a simple SQL query that dumps data to an Excel file (even a dump to a .csv will not work).

I narrowed it down to be an integration issue when using VS 2008 because if my co-worker re-creates the package, moves it to the server and runs the package he doesn't get an error. He only has VS 2005 installed.

Is anyone else out there having the same issue, and if yes do you know of any work arounds? I am not seeing any clear cut solutions out on Google. Otherwise I am just going to uninstall VS 2008\. Talk about a headache...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-19T04:55:07.350

该问题不太可能与 VS 2008 有关。可能您没有安装完整的 SSIS。

请参阅 [http://blogs.msdn.com/michen/archive/2006/11/11/ssis-product-level-is-insufficient.aspx的详细信息](http://blogs.msdn.com/michen/archive/2006/11/11/ssis-product-level-is-insufficient.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-10-12T17:59:41.033

我也有同样的麻烦。我注意到服务器启动并运行了 SSIS 服务，但是远程打开管理控制台并连接到我的远程服务器并且 SSIS 服务没有出现。我试过用其他机器，它出现了服务。我想我有一个安全问题。

我建议也这样做。

问候，

# asp.net-ajax - Ajax表单提交重载页面

> ID：749226
> 
> 赞同：1
> 
> 时间：2009-04-14T20:24:05.100
> 
> 标签：asp.net-ajax

你好有调用我的aspx的js脚本

**JS**

```
new Ajax.Updater('display', '/myForm.aspx?lat=' + lat + '&lng=' + lng + '&zoom=' + zoom, { method: 'get' }); 
```

myForm.aspx 正确加载表单。但是，当我提交表单时，它会加载一个新页面。如何停止页面重新加载？

**myForm.aspx**

```
<form id="form1" runat="server" >
    <asp:ScriptManager ID="ScriptManager1" runat="server"  EnablePageMethods="true" >
</asp:ScriptManager>    
    <uc1:FlagForm ID="FlagForm1" runat="server" />    
    </form> 
```

**FlagForm.ascx**

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
<ContentTemplate>
<table>
<tr>
<td>Name:</td>
<td><asp:TextBox ID="TextBoxName" runat="server"></asp:TextBox></td>
</tr>
<tr>
<td>Email:</td>
<td><asp:TextBox ID="TextBoxEmail" runat="server"></asp:TextBox></td>
</tr>
<tr>
<td>Comments:</td>
<td><asp:TextBox ID="TextBoxComment" runat="server"></asp:TextBox></td>
</tr>
<tr>
<td>Marketing Opt in:</td>
<td><asp:CheckBox ID="CheckBoxOptIn" runat="server" /></td>
</tr>
<tr>
<td>Data Protection:</td>
<td><asp:CheckBox ID="CheckBoxDataProtection" runat="server" /></td>
</tr>
</table>
<asp:HiddenField ID="HiddenFieldLng" runat="server" />
<asp:HiddenField ID="HiddenFieldLat" runat="server" />
<asp:HiddenField ID="HiddenFieldZoom" runat="server" />
<asp:Button ID="ButtonSend" runat="server" Text="Send" onclick="ButtonSend_Click" />
 <asp:Label ID="LabelResults" runat="server" Text="Label"></asp:Label>
</ContentTemplate>

</asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T20:27:59.070

你需要取消事件——我认为在prototype.js中它是Event.stop()，但你必须看看把它放在哪里

# xml - 使用 XML 数据源进行报告——我应该使用什么工具/语言？

> ID：749227
> 
> 赞同：1
> 
> 时间：2009-04-14T20:24:31.573
> 
> 标签：xml, reporting

我有一堆 XML 数据，我想将它们用作一些基于 Web 的报告的数据源。我现在正在使用 Reporting Services，但我不太喜欢他们的报表设计器。我想定制更多的东西，能够生成图形和图表并使它们成为半交互式的（允许排序、工具提示等）。

哪些工具/库可用于执行此类操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T21:40:32.547

您可以查看 Telerik 的服务或 Crystal Reports

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-15T15:11:35.110

我们的[Data Dynamics Reports 产品](http://www.datadynamics.com/Products/DDRPT/)为从 XML 数据构建报告提供了完善的支持。例如，由于我们使用 XPath 表达式来选择要绑定报表中的字段的节点，因此您可以绑定到 XML 中具有复杂关系的数据。[我们文档中的这个演练将](http://www.datadynamics.com/Help/ddReports/ddrwlkXMLData.html)引导您完成将数据绑定到 XML 的过程。

[这里](http://www.datadynamics.com/Products/DDRPT/Default.aspx#screencasts)有更多关于该产品的区域截屏视频。我们还有[这个截屏视频](http://www.datadynamics.com/Products/DDRPT/ScreencastViewer.aspx?ID=DSXML)，展示了一些关于使用 XML 数据以及如何让最终用户使用我们的最终用户设计器控件从 XML 数据创建报告的内容。这个展示了如何将最终用户设计器控件嵌入到您的应用程序中，并且最终用户可以在完全不了解或理解 XML 的情况下设计报表。

我希望这会有所帮助，如果您有任何问题，请告诉我！

# c# - Request a 2nd url with the same HttpWebRequest obj

> ID：749231
> 
> 赞同：3
> 
> 时间：2009-04-14T20:25:41.727
> 
> 标签：c#, .net, httpwebrequest

I want to do something like this

```
{
    HttpWebRequest WebRequestObject = (HttpWebRequest)HttpWebRequest.Create("http://google.com");
    WebRequestObject.KeepAlive = true;
    //do stuff
    WebRequestObject.Something("http://www.google.com/intl/en_ALL/images/logo.gif");
    //more here
} 
```

How do i keep the connection alive and go to multiple urls using that same alive connection?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-14T20:34:14.407

您只需使用另一个`HttpWebRequest`对象，并假设您在这两种情况下都设置`KeepAlive`为`true`.NET Framework 中的内部 HTTP 连接管理器应该为您处理事情。有关此属性的更多信息，请参阅[MSDN 文档。](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.keepalive.aspx)`KeepAlive`

# c# - How do I format a Decimal to a programatically controlled number of decimals in c#?

> ID：749232
> 
> 赞同：7
> 
> 时间：2009-04-14T20:26:57.123
> 
> 标签：c#, string, formatting

How can I format a number to a fixed number of decimal places (keep trailing zeroes) where the number of places is specified by a variable?

e.g.

```
int x = 3;
Console.WriteLine(Math.Round(1.2345M, x)); // 1.234 (good)
Console.WriteLine(Math.Round(1M, x));      // 1   (would like 1.000)
Console.WriteLine(Math.Round(1.2M, x));    // 1.2 (would like 1.200) 
```

Note that since I want to control the number of places programatically, this string.Format won't work (surely I ought not generate the format string):

```
Console.WriteLine(
    string.Format("{0:0.000}", 1.2M));    // 1.200 (good) 
```

Should I just include Microsoft.VisualBasic and use [FormatNumber](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.strings.formatnumber(VS.80).aspx)?

I'm hopefully missing something obvious here.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-14T20:30:09.877

Try

```
decimal x = 32.0040M;
string value = x.ToString("N" + 3 /* decimal places */); // 32.004
string value = x.ToString("N" + 2 /* decimal places */); // 32.00
// etc. 
```

Hope this works for you. See

[http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

for more information. If you find the appending a little hacky try:

```
public static string ToRoundedString(this decimal d, int decimalPlaces) {
    return d.ToString("N" + decimalPlaces);
} 
```

Then you can just call

```
decimal x = 32.0123M;
string value = x.ToRoundedString(3);  // 32.012; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-14T20:35:57.100

试试这个来动态创建你自己的格式字符串，而不必使用多个步骤。

```
Console.WriteLine(string.Format(string.Format("{{0:0.{0}}}", new string('0', iPlaces)), dValue)) 
```

在步骤

```
//Set the value to be shown
decimal dValue = 1.7733222345678M;

//Create number of decimal places
int iPlaces = 6;

//Create a custom format using the correct number of decimal places
string sFormat = string.Format("{{0:0.{0}}}", new string('0', iPlaces));

//Set the resultant string
string sResult = string.Format(sFormat, dValue); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-14T20:30:15.710

请参阅以下链接以获取格式字符串帮助： http:
[//msdn.microsoft.com/en-us/library/0c899ak8.aspx](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)
[http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

你要这个：

```
Console.WriteLine(Math.Round(1.2345M, x).ToString("F" + x.ToString())); 
```

此外，如果需要，.ToString 调用将为您四舍五入，因此您可以跳过`Math.Round`调用并执行以下操作：

```
Console.WriteLine(1.2345M.ToString("F" + x.ToString())); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-14T20:32:23.257

这样的事情应该处理它：

```
int x = 3;
string format = "0:0.";
foreach (var i=0; i<x; i++)
    format += "0";
Console.WriteLine(string.Format("{" + format + "}", 1.2M)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-14T20:50:45.007

这样做的方法：

```
private static string FormatDecimal(int places, decimal target)
        {
            string format = "{0:0." + string.Empty.PadLeft(places, '0') + "}";
            return string.Format(format, target); 
        } 
```

# c# - AForge 和 OpenCV 的区别

> ID：749241
> 
> 赞同：52
> 
> 时间：2009-04-14T20:28:56.447
> 
> 标签：c#, image-processing, opencv, aforge

我只是在学习计算机视觉和 C#。似乎两个著名的图像处理库是[OpenCV](http://opencv.willowgarage.com/wiki/)和[AForge](http://code.google.com/p/aforge/)。两者有哪些不同之处？

我正在用 C# 制作一个基本的图像编辑器，并且在研究时我遇到了这两个方面的文章。但我真的不知道为什么我会选择其中一个。我想最终改进应用程序以包含更高级的功能。

谢谢。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2011-01-23T17:12:40.710

好吧，为什么不同时使用两者；）？

我正在同时使用（字面意思是在 C# 中......大声笑）EMGUCV.NET（这是一个 OpenCV C# 包装器）和 AFORGE.NET：

AFORGE.NET 加上它的“图像处理实验室”对于过滤选项（边缘检测、阈值等）和简化查看功能非常有意义。

OpenCV 提供了所有其他功能，例如 SIFT/SURF 和其他更复杂的图像处理程序。

这就是您使用 .NET 的原因：只需将您需要的所有组件放在一个应用程序中即可 :)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-04-25T13:41:55.290

我现在在学校的一个项目中使用 OpenCV，我浏览了 AForge 的文档，它们的功能似乎有所不同。AForge 有很多过滤器，可能非常适合不同的变换和图像处理。但在其他方面似乎还欠缺不少。我找不到任何令人失望的矩阵运算，因为它在计算机视觉中非常有用。我们目前的项目（从图像序列重建 3D 点云），据我从文档中看到的，仅使用 AForge 是不可能的。

将 AForge 与一个好的线性代数库结合起来，你可能会得到一些非常有用的东西。

至于 OpenCV，它具有丰富的功能集，但编程有点棘手。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-01-07T04:35:57.377

如果您想像您所说的那样使用越来越多的高级功能来改进您的应用程序，我会选择 OpenCV - 但是，您成功的一部分取决于 C# 端口正在积极更新这一事实，这应该不多考虑到三个端口的麻烦。我认为[EmguCV](http://www.emgu.com/wiki/)在更新方面似乎是目前最好的之一，但是当我查看它时，缺少文档（但您可能可以通过一些 C++ 知识将 C++ 代码翻译成 C#）。AForge 对我来说似乎更容易，这就是我现在正在使用的。OpenCV 还支持您可以使用的 haarcascade.xml 文件，其中包括人脸检测。

所以最后一点：两者都适合你，OpenCV 得到更广泛的使用/支持（尽管大多数用户群是 C++），AForge 更容易。这一切都取决于你想做什么。

# asp.net - Html.Encode 不返回任何内容

> ID：749248
> 
> 赞同：2
> 
> 时间：2009-04-14T20:30:47.533
> 
> 标签：asp.net, asp.net-mvc

我无法让它工作，我想显示一个简单的艺术家姓名列表，但总是得到空链接。

```
foreach (Artist artist in Model)
{%>
    <a href="gotosomewhere"><% Html.Encode(artist.Name); %></a>
<%} 
```

我已经对其进行了调试，并且我确定 Model 包含艺术家列表。

谢谢，彼得

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-04-14T20:34:34.513

将其更改为：

```
<%= Html.Encode( artist.Name ) %> 
```

请注意“等于”和缺少结束分号。这是用于将字符串值输出到响应的格式。另一种格式只是在页面上下文中执行代码，但不会自动写入响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-15T16:52:15.460

实际上，`<% some code %>`ASP.NET 中的语法非常简单地转换为“执行此代码”。

ASP.NET 中的`<%= some code %>`语法转换为`Response.Write(some code)`.

基于此，很清楚为什么`<% Html.Encode(...); %>`什么都不返回。它正在对您的文本进行编码，但没有人将其写入响应！使用`<%= Html.Encode(...) %>`ASP.NET 编译器将其转换为`Response.Write(Html.Encode(...))`，这显然会将编码文本写入响应。

# delphi - 是否可以在 Delphi 和 FreePascal 中声明一个数组的 const 而不让元素成为常量？

> ID：749258
> 
> 赞同：2
> 
> 时间：2009-04-14T20:33:41.490
> 
> 标签：delphi, arrays, constants, freepascal

很久以前，我记得我可以在 Turbo Pascal 7 中做到这一点。

也许我错了，这是我需要澄清的事情，但是可以将字符串数组声明为常量吗？

如果不是什么是选项/解决方法。

我现在拥有的是：

```
type
  TStates = (sOne, sTwo, sThree);
var
  TArrayOfString: array [sOne..sThree] of string = 
     ('State one', 'State two', 'State three'); 
```

但想用 const 替换那个 var。

谢谢

**编辑 1**：添加了更多代码来澄清我的问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-14T21:20:21.487

只需将**var**替换为**const**是完全合法的：

```
const
  TArrayOfString: array [1..3] of string =
     ('String one', 'String two', 'String three'); 
```

我很好奇为什么您的标识符名称以**T**开头。您是否尝试定义这样的类型：

```
type
  TArrayOfString = array [1..3] of string;
const
  MyArrayOfString: TArrayOfString =
     ('String one', 'String two', 'String three'); 
```

您不能将可变长度数组 (AFAIK) 作为 const，也不能将其设为未定义类型。

这是使用 Delphi 2009。使用 FreePascal 的 YMMV。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-14T20:51:39.777

在过去的 pascal/delphi 中，当您写道：

```
const 
  A : Integer = 5; 
```

您没有定义一个常量，而是一个初始化的变量。

您可以毫无问题地定义：

```
const
  A : array [1..2] of string = ('a', 'b'); 
```

但是字符串也必须是常量。他们需要在编译时知道。

这同样适用于：

```
var
  A : array [1..2] of string = ('a', 'b'); 
```

所以你不能写：

```
var
  B : string = 'hi';
  A : array [1..2] of string = (B, 'b'); 
```

因为 B 是一个 var。但是你可以写：

```
const
  B = 'hi'; // Even a typed constant does not work.

var
  A : array [1..2] of string = (B, 'b'); 
```

请注意，提供了选项：“可分配的类型常量”（默认为 false）来创建可以分配的旧时类型的常量。它只是为了向后兼容，因为你真的希望你的常量保持不变。

# c# - Linq-to-SQL 表合并

> ID：749261
> 
> 赞同：1
> 
> 时间：2009-04-14T20:34:09.523
> 
> 标签：c#, linq-to-sql

假设我有三个表：

用户

```
身份证 | 姓名
===========
 1 | 用户A
------------
 2 | 用户B
------------

```

环境

```
身份证 | 姓名 | 默认
==========================
 1 | 设置A | A默认
-------------------------
 2 | 设置B | B默认
-------------------------

```

和

用户设置

```
用户名 | 设置ID | 价值
=================================
 1 | 1 | 爱丽丝
--------------------------------
 1 | 2 | 鲍勃
--------------------------------
 2 | 1 | A覆盖
--------------------------------

```

当我创建我的 dbml 文件时，它会根据数据库中设置的外键适当地将用户链接到`UserSetting`和链接`UserSetting`到。`Setting`

我想知道的是，如果用户没有以一种有意义的方式专门覆盖该值，是否有可能从表中合并`UserSetting`回来`Setting`。

具体来说，我正在寻找以下伪代码：

```
var user = MyDataContext.Users.SingleOrDefault(u => u.ID == 2);

foreach(var setting in user.UserSettings)
{
  Console.Writeline(setting.ID + "|" + setting.Value);
} 
```

要输出这样的东西：

```
1 | A覆盖
 2 | B默认

```

如果不进行修改，user.UserSettings 将仅包含已明确覆盖的值，因此它只会返回：

```
1 | A覆盖

```

有任何想法吗？或者有更多代表的人可以帮我改一下，因为它可能并不完全清楚？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-15T07:51:47.803

我喜欢让 Linq-to-SQL 相当笨拙，并向我的部分类添加任何花哨的要求，以下是我使用的解决方案。

我在我的 User 类中添加了以下帮助程序（基于 Jose 的回答，但已修复，因此可以正常工作）：

```
public IEnumerable<SettingValue> GetSettingsWithDefaults( IEnumerable<Setting> settings )
{
    return from s in settings
           join us in this.UserSettings
             on s.ID equals us.SettingID into userSettings
           from us in userSettings.DefaultIfEmpty()
           select new SettingValue
                  {
                      Setting = s,
                      Value = ( us == null ) ? s.Default : us.Value,
                      IsDefault = ( us == null )
                  };
} 
```

这需要一个新的类：

```
public class SettingValue
{
    public Setting Setting { get; set; }
    public string Value { get; set; }
    public bool IsDefault { get; set; }
} 
```

然后我可以执行以下操作：

```
foreach( var userSetting in user.GetSettingsWithDefaults( settings ) )
{
    Debug.WriteLine( string.Format( "Name:{0}, Value:{1}, IsDefault:{2}", 
        userSetting.Setting.Name,
        userSetting.Value,
        userSetting.IsDefault 
    ) );
} 
```

这给了我以下输出

```
Name:SettingA, Value:OverrideA, IsDefault:False
Name:SettingB, Value:DefaultB, IsDefault:True 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-04-14T20:39:06.140

您可以创建一个视图，将 UserSetting 和 Setting 连接起来，表示每个用户的所有设置。然后在您的 DBML 文件中使用视图来补充（或代替）UserSettings 关联（而不是工作，除非您希望能够添加新设置，在这种情况下，您可能希望 UserSettings 关联也存在）。

我手边没有 SQL 服务器，但视图可能看起来像这样：

```
SELECT
    User.ID AS UserID,
    Setting.ID AS SettingID,
    COALESCE(UserSetting.Value, Setting.Default) AS Value,
    CASE WHEN UserSetting.UserID IS NOT NULL THEN CAST(0 AS BIT)
        ELSE CAST(1 AS BIT) END AS IsDefault
FROM User
    CROSS JOIN Setting
    LEFT JOIN UserSetting ON Setting.ID = UserSetting.SettingID
        AND UserSetting.UserID = User.ID 
```

# math - 用六角地图瓷砖覆盖地球

> ID：749264
> 
> 赞同：70
> 
> 时间：2009-04-14T20:34:55.467
> 
> 标签：math, coordinates, tesselation, hexagonal-tiles

许多策略游戏使用六边形图块。主要优点之一是任何瓦片的中心与其所有相邻瓦片的距离相同。

我想知道是否有人对将六边形瓷砖系统与传统地理系统（经度/纬度）结合起来有任何想法。我认为用六边形瓷砖覆盖地球并能够将地理坐标映射到瓷砖会很有趣。

以前有没有人看到过任何接近这个的东西？

**更新**

我正在寻找一种方法来细分球体的表面，以便每个部分都具有相同的表面积。理想情况下，相邻细分的中心是等距的。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-05T03:42:51.630

看看[vraid/earthgen](https://github.com/vraid/earthgen-old)；它使用六边形（加上一些五边形）并包含源代码（请参阅[planet/grid/create_grid.cpp](https://github.com/vraid/earthgen-old/blob/master/source/planet/grid/create_grid.cpp)）。

截至 2018 年，基于球拍的[新版本可用。](https://github.com/vraid/earthgen)

![vraid/earthgen 图像](https://i.stack.imgur.com/ikrqg.gif)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2009-04-17T06:13:05.523

好吧，很多人都指出你不能用六边形瓷砖来平铺球体——也许你想知道为什么。

欧拉说（并且有很多有趣和不同的证明，甚至是一整本书），给定一个球体在 x Polygons 中，总共 y 边和 z 顶点（例如，一个立方体有 6 个多边形，有 12 个边和8个顶点）公式

> x - y + z = 2

总是成立（注意减号）。

（顺便说一句：这是一个拓扑陈述，所以立方体和球体 - 或者，准确地说，只有它们的边界 - 这里真的是一样的）

如果你只想使用六边形来平铺球体，你最终会得到 x 个六边形，有 6*x 个边。但是，每对六边形共享一条边。因此，我们只想计算其中的 3*x 和 6*x 顶点，但同样，它们中的每一个都由 3 个六边形共享，因此最终得到 2*x 边。

现在，使用公式：

> x - 3*x + 2*x = 2

你最终得到了错误的陈述`0 = 2`- 所以你真的不能只使用六边形。

这就是为什么经典足球看起来如此 - 当然现代足球更花哨，但基本事实仍然存在。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2009-04-14T20:43:51.513

用规则的瓷砖覆盖球体是不可能的（除了长而薄的“橙色切片”。因此，在给定某些约束或要求的情况下，像素化地图的最佳方法实际上是一个非常困难的研究问题。

一种经常使用的平铺（在天体物理学中）是 HEALPIX 像素化：http: [//healpix.sourceforge.net/](http://healpix.sourceforge.net/)

这种像素化满足等面积要求；然而，不可能使一切都等距。

另一个像素化是“GLESP”，它具有一些不同的属性（并且没有像软件包那样完善）：[http ://www.glesp.nbi.dk/](http://www.glesp.nbi.dk/)

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2009-04-14T20:42:28.740

想到的第一个网站是[Amit 的游戏编程信息](http://www-cs-students.stanford.edu/~amitp/gameprog.html#hex)及其六边形网格上的链接集合。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2009-04-14T20:47:42.017

你不能用相等的六边形覆盖球体，但你可以用测地线覆盖它，它主要是六边形，在二十面体的顶点有 12 个五边形，六边形稍微扭曲以使其凸出成一个球体。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2009-04-14T20:40:08.307

六边形瓷砖对于应用于地理空间用途的规则几何来说太复杂了。使用三角形查看[HTM](http://research.microsoft.com/apps/pubs/default.aspx?id=64531)以获取类似的东西，或者查看其他来源的“分层三角形网格”的谷歌。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2010-03-13T00:39:44.153

阅读 Kevin Sahr、Denis White 和 A. Jon Kimerling 的“测地线离散全球网格系统”

你可以在[这里](http://webpages.sou.edu/~sahrk/dgg/pubs/gdggs03.pdf)找到它...

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2016-07-12T22:08:22.810

我刚刚构建了一个名为[dggridR](https://github.com/r-barnes/dggridR/)的 R 包，它将地球表面划分为大小相等的六边形，用于分箱空间分析。

Carsten 在他的回答中使这听起来不可能，但实际上并非如此。通过引入 12 个五边形，所有其余的六边形都可以毫无问题地组合在一起。由于您可能有数以百万计的单元格用于高分辨率网格，因此大多数时候您可以忘记那些五边形。

转换的数学很复杂。你可以在...里找到它们：

*   Crider, John E. “Fuller's Map Projection and Inverse 的精确方程。” 制图：国际地理信息和地理可视化杂志 43.1 (2008)：67–72。网络。

*   Snyder, John P. “多面体地球的等面积地图投影”。制图：国际地理信息和地理可视化杂志 29.1 (1992)：10-21。网络。

在后台 dggridR 依赖于 Kevin Sahr 的[DGGRID](http://discreteglobalgrids.org/software/)软件。

您可能还会发现以下参考资料很有用：

*   格雷戈里，马修 J. 等人。“离散全球网格系统上单元间度量的比较。” 计算机、环境和城市系统 32.3 (2008): 188–203。交叉参考。网络。
*   Kimerling，乔恩 A. 等人。“比较全球网格的几何特性。” 制图和地理信息科学 26.4 (1999): 271–288。打印。
*   Sahr, K. “用于地理空间计算的六角离散全球网格系统”。Archiwum Fotogrametrii，Kartografii i Teledetekcji Vol。22 (2011): 363–376。打印。
*   萨尔，凯文。“二十面体孔径 3 六边形离散全球网格上的位置编码。” 计算机、环境和城市系统 32.3 (2008): 174–187。交叉参考。网络。
*   Sahr、Kevin、Denis White 和 A. Jon Kimerling。“测地线离散全球网格系统。” 制图和地理信息科学 30.2 (2003): 121–134。打印。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2009-04-14T22:03:36.437

将球体分成由平坦表面制成的相等部分是一个棘手的问题。因此，您最终会得到[测地线形状](http://en.wikipedia.org/wiki/Geodesic_dome#Chord_factors)，它们*不是*由可以反过来由相同大小的三角形组成的形状组成的。将所有六边形和五边形分解成三角形，最终得到的三角形具有不同的内角，从而导致对称性丧失。

我能给你的一个安慰是，所有的形状都有有限数量的三角形可以分类，这意味着对于一个小测地线，可以重复使用 5 或 6 个三角形来描述*所有*的六边形和五边形测地线所需的。虽然距离每个三角形/形状的“中心”不相等，但您至少可以将每个三角形的处理划分为一个离散的情况，从而在代码中提供潜在的解决方法。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2010-03-13T00:59:18.707

旧的旅行者角色扮演游戏用于将行星表面绘制为二十面体（切开打印在书中）。这在角六角形处产生了很大的变形（它们必须变成五边形）。在搜索 GURPS Traveller 时，您可能会找到一些此类材料。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2014-05-05T01:15:47.180

只有少数柏拉图多面体使用单一类型的多边形来近似球体。著名的[二十面体](http://en.wikipedia.org/wiki/Icosahedron)和[十二面体](http://en.wikipedia.org/wiki/Dodecahedron)。如果你愿意有一点失真和一些重叠点，你可以获得公平的结果，让游戏变得有趣。试试[THIS LINK](http://forums.civfanatics.com/showthread.php?t=356334)，它设法使所有图块的面积几乎相等，而全球圆的图块距离也相当一致。

然而，这些都不是很容易映射到古老的地理圆柱经度/纬度投影系统上。

一种解决方案是将蜂窝图案叠加到[EQUIRECTANGULAR](http://en.wikipedia.org/wiki/Equirectangular_projection)投影图上，并在您接近像这样的两极时允许大量[失真](http://fc09.deviantart.net/fs70/i/2012/309/e/0/the_world_as_a_hex_grid_by_goodyob-d5k33xj.jpg)。

祝你的研究好运！:)

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-05-10T01:40:22.317

[如果您的约束是在将球体分成几块时保持相等的面积，那么HEAlpix](http://healpix.sourceforge.net/)是正确的（有趣的是，在两极和赤道地区覆盖天空中的投影区域相同）。您基本上每次都按照环形或嵌套方案将球体分成 4 份来满足分层等面积约束。在天空中“部署” FT 函数（（等纬度属性）也非常方便，例如研究普朗克或 WMAP 任务中 CMB 模式的温度。

它也在许多编程语言中实现。

此外，我应该提到另一个（虽然面积不相等），称为“四树立方体”的 Q3C，另一种具有其他优势（锥搜索和 x 匹配）的天空分区方案

*   [https://github.com/segasai/q3c](https://github.com/segasai/q3c)

原纸：

http://adsabs.harvard.edu/abs/2006ASPC..351..735K

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-10-15T23:31:36.773

老问题，但是：

其他回答是正确的，因为不可能仅使用六边形来平铺球体。

然而，一个简单的（ish）黑客是：

创建六边形的二维“表”：

[![在此处输入图像描述](https://i.stack.imgur.com/a264L.gif)](https://i.stack.imgur.com/a264L.gif)

并将它们在 3D 空间中从原点偏移 1。然后，对所有顶点进行归一化。

这将为您提供具有良好球面曲线的“凸出”版本的板材。问题在于，这仅在纸张覆盖球体的*一部分时才有效。*

一种解决方案类似于用于创建无限网格地板的解决方案。随着球体旋转，当您移动半个单元格时，将球体沿相关方向旋转一次单元格。（对于六边形，数字并不是真正的半个单元格，而是与六边形图块的尺寸相关联。）这在 3D 中有点棘手，但可行。

不久前我在 2D 中有一个类似的问题，这可能会有所帮助。

[https://gamedev.stackexchange.com/questions/70092/infinite-treadmilling-hexagonal-grid/70341#70341](https://gamedev.stackexchange.com/questions/70092/infinite-treadmilling-hexagonal-grid/70341#70341)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-02-24T09:08:30.303

有一篇[论文](https://arxiv.org/pdf/1612.03467.pdf)处理了等面积平铺的情况（赤道周围几乎是方形的平铺），并且相对容易预先计算相邻的平铺以及一组特定坐标落在哪个平铺上。它与虽然要求顶点之间的距离相等。

在此复制摘要：

> 提出了一种将球面划分为等面积单元的新方法。该方法基于将一个球体划分为几个近乎恒定跨度的纬度带，并将每个带进一步划分为等面积的单元。它的构造简单，并且与其他球面的等纬度等面积镶嵌方法相比，在纬度带之间提供了更均匀的纬度步长。

（我已经使用它的想法试图从一长串位置中找到最近的地理位置邻居）。

# c# - 在展开/折叠时禁用 TreeView 节点上的回发

> ID：749265
> 
> 赞同：3
> 
> 时间：2009-04-14T20:35:16.213
> 
> 标签：c#, asp.net, ajax, treeview

如何？

我试过`AutoPostback=false`了，但点击节点仍然会发回页面。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2010-07-06T09:44:30.910

前进的道路......

每个节点的自动选择动作是 SelectExpand，这个枚举的“选择”部分被解释为“我已经选择了一些东西，需要回发”。要仅“扩展”节点而不导致回发：

TreeView1.Nodes(0).SelectAction = TreeNodeSelectAction.Expand

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T23:30:38.787

[EnableClientScript](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.treeview.enableclientscript.aspx)的默认设置为true，因此默认情况下，节点的展开和折叠应该发生在客户端。请注意该属性的注释（强调我的）：

> 使用 EnableClientScript 属性指定 TreeView 控件是否在兼容的浏览器上呈现客户端脚本以处理展开和折叠事件。当此属性设置为 true 时，兼容的浏览器会执行代码以展开和折叠客户端上的节点。**必须提前知道树节点数据，客户端脚本才能工作**。每次展开或折叠节点时，使用客户端脚本可防止回发到服务器。

检查事项：

1.  您确实拥有可用于树视图数据源的节点数据，而无需回发
2.  您尚未将 EnableClientScript 设置为 false
3.  您没有使用覆盖此行为的控制适配器
4.  您不会以某种方式将服务器混淆为认为您是[低级浏览器](http://slingfive.com/pages/code/browserCaps/requestBrowser_info.aspx)（我认为该页面在 .NET 1.1 上运行，因此可能与您的服务器不同 - 它将我的 IE 版本与超重的 UserAgent 字符串视为“ Downlevel”，因为检查在 128 个字符后中断，并且失败）

如果您无法获得所有可用数据，则应确保正确设置[PopulateOnDemand](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.treenode.populateondemand.aspx)、[PopulateNodesFromClient](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.treeview.populatenodesfromclient.aspx)和[TreeNodePopulate](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.treeview.treenodepopulate.aspx)。

* * *

**对评论的回应**

是的，你没有理由不能做你试图用树视图控件做的事情——事实上，它应该为你做大部分事情——除非你没有预先提供整个树，在这种情况下您需要提供将通过 PopulateNodesFromClient 和 TreeNodePopulate 填充节点的方法，假设浏览器被正确识别（那些先前的链接有带和不带回发的示例）。

jQuery Tree View 插件可能会更灵活（我没有使用过它们，所以我不知道 - 我使用过我们正在讨论的 TreeView 控件，但是因为我只有一个小插件，所以“免费”获得了这些功能树，并且预先提供了所有数据），但需要更多的工作来设置：

1.  如果你还没有使用它，你需要引入 jQuery 框架
2.  编写一个 Web 服务，它可以调用它来获取初始数据以及后续节点。
3.  可能会担心 JavaScript 支持有限或不支持的浏览器会发生什么。

3 对你来说可能是也可能不是 - 在我们所做的一切中，我们都尝试使用 JavaScript 来增强功能，而不是提供功能 - 因为 jQuery 库是所有客户端，如果浏览器不支持 JavaScript，你的 jQuery TreeView 控件不会出现，您可能会丢失一个关键的导航元素，而像 ASP.NET TreeView 控件这样的服务器控件会注意到不支持 JavaScript，并通过回退到基于服务器的方式为您解决这个问题（即回发）版本的控件。

您还应该记住，jQuery 不是微软的东西（尽管他们现在*支持*它），并且已经存在了很长一段时间，并且作为客户端产品，它独立于服务器技术工作 - MS 给了我们一个数字ASP.NET 框架中的“服务器”控件，如果我们愿意，我们*可以*使用，这样做可以使我们的生活更轻松（无论如何通常在短期内），但我们不必 - 一个典型的例子是最近发布的 ASP.NET MVC 框架，这是一种使用 .NET 堆栈在 IIS 上构建 Web 应用程序的不同方式 - 但通常没有服务器控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-04-14T23:38:43.170

asp.net 树视图不支持此功能，

尝试[使用树视图](http://www.obout.com/t2/index.aspx)：

它确实加载节点而不重新加载整个树。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-01T10:53:10.623

在css文件中添加以下代码。然后选择名为 NodeStyle-> CssClass=disabled 的 TreeView 属性

`a.disabled { pointer-events: none; cursor: default; }`

# javascript - 对象转储 JavaScript

> ID：749266
> 
> 赞同：103
> 
> 时间：2009-04-14T20:35:17.570
> 
> 标签：javascript

是否有第 3 方插件/应用程序或某种方式在 JavaScript 对象的脚本调试器中执行对象映射转储？

情况是这样的……我有一个方法被调用了两次，每次都不同。我不确定有什么不同，但有些不同。因此，如果我可以将 window（或至少 window.document）的所有属性转储到文本编辑器中，我可以将两个调用之间的状态与一个简单的文件 diff 进行比较。想法？

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2011-01-05T19:24:43.133

```
console.log("my object: %o", myObj) 
```

否则，您最终会得到一个字符串表示，有时会显示：

```
[object Object] 
```

或一些这样的。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2009-04-14T20:36:28.410

[萤火虫](http://getfirebug.com/)+`console.log(myObjectInstance)`

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2010-06-10T04:04:15.283

```
function mydump(arr,level) {
    var dumped_text = "";
    if(!level) level = 0;

    var level_padding = "";
    for(var j=0;j<level+1;j++) level_padding += "    ";

    if(typeof(arr) == 'object') {  
        for(var item in arr) {
            var value = arr[item];

            if(typeof(value) == 'object') { 
                dumped_text += level_padding + "'" + item + "' ...\n";
                dumped_text += mydump(value,level+1);
            } else {
                dumped_text += level_padding + "'" + item + "' => \"" + value + "\"\n";
            }
        }
    } else { 
        dumped_text = "===>"+arr+"<===("+typeof(arr)+")";
    }
    return dumped_text;
} 
```

* * *

## 回答 #4

> 赞同：43
> 
> 时间：2013-06-18T10:43:22.563

如果您使用的是 Chrome、Firefox 或 IE10 + 为什么不扩展控制台并使用

```
(function() {
    console.dump = function(object) {
        if (window.JSON && window.JSON.stringify)
            console.log(JSON.stringify(object));
        else
            console.log(object);
    };
})(); 
```

一个简洁的跨浏览器解决方案。

* * *

## 回答 #5

> 赞同：29
> 
> 时间：2012-05-23T14:54:23.767

只需使用：

```
console.dir(object); 
```

你会得到一个很好的可点击对象表示。适用于 Chrome 和 Firefox

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2018-03-26T14:26:28.400

为了更好的可读性，您可以将对象转换为 json 字符串，如下所示：

```
console.log(obj, JSON.stringify(obj)); 
```

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify)

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2010-07-03T11:05:40.747

对于铬/铬

```
console.log(myObj) 
```

或者它是等价的

```
console.debug(myObj) 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2017-11-27T06:17:09.573

Using`console.log(object)`会将您的对象扔到 Javascript 控制台，但这并不总是您想要的。Using`JSON.stringify(object)`将返回大部分内容以存储在变量中，例如将其发送到 textarea 输入并将内容提交回服务器。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-11-09T13:58:28.700

在 Chrome 中，单击 3 个点，然后单击更多工具，然后单击开发人员。在控制台上，键入 console.dir(yourObject)。[单击此链接以查看示例图像](https://i.stack.imgur.com/o9XZd.png)

# asp.net - 如何找出我的 Windows 域上托管 LDAP 的服务器？

> ID：749268
> 
> 赞同：36
> 
> 时间：2009-04-14T20:36:09.393
> 
> 标签：asp.net, active-directory, ldap

我正在尝试开发一个应用程序（C#）来查询 LDAP 服务器。我不知道要查询的实际服务器 - 有没有办法使用标准 Windows 工具或 .net 中的东西来查找？

我还听说过，只要我的查询字符串中有 dc=domain,dc=com，并不总是需要服务器名称 (ldap://server/)，但到目前为止我已经能够以这种方式使用它。

有小费吗？

谢谢

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2009-04-15T08:40:01.167

AD 在其 DNS 服务器中注册服务位置 (SRV) 资源记录，您可以查询这些记录以获取您域中负责的 LDAP 服务器的端口和主机名。

只需在命令行上试试这个：

```
C:\> nslookup 
> set types=all
> _ldap._tcp.<<your.AD.domain>>
_ldap._tcp.<<your.AD.domain>>  SRV service location:
      priority       = 0
      weight         = 100
      port           = 389
      svr hostname   = <<ldap.hostname>>.<<your.AD.domain>> 
```

（前提是您的名称服务器是 AD 名称服务器，这应该是 AD 正常运行的情况）

有关详细信息，请参阅[Active Directory SRV 记录](http://www.petri.co.il/active_directory_srv_records.htm)和[Windows 2000 DNS 白皮书](http://download.microsoft.com/download/f/2/f/f2fc9f59-d90a-4dbc-8382-793c88b0b0d2/w2kdns.doc)。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-04-14T20:45:32.710

如果您使用 AD，则可以使用[无服务器绑定](http://msdn.microsoft.com/en-us/library/ms677945(VS.85).aspx)来定位默认域的域控制器，然后使用 LDAP://rootDSE 获取有关目录服务器的信息，如链接文章中所述。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-04-14T21:00:54.997

如果您所在的机器是 AD 域的一部分，它应该将其名称服务器设置为 AD 名称服务器（或者希望使用最终解析您的 AD 域的 DNS 服务器路径）。使用您的 dc=domain,dc=com 示例，如果您在 AD 名称服务器中查找 domain.com，它将返回每个 AD 控制器的 IP 列表。我公司的示例（域名已更改，但这是一个真实的示例）：

```
    mokey 0 /home/jj33 > nslookup example.ad
    服务器：172.16.2.10
    地址：172.16.2.10#53

    非权威答案：
    名称：example.ad
    地址：172.16.6.2
    名称：example.ad
    地址：172.16.141.160
    名称：example.ad
    地址：172.16.7.9
    名称：example.ad
    地址：172.19.1.14
    名称：example.ad
    地址：172.19.1.3
    名称：example.ad
    地址：172.19.1.11
    名称：example.ad
    地址：172.16.3.2

```

注意我实际上是从非 AD 机器进行查询，但我们的 unix 名称服务器知道将我们的 AD 域 (example.ad) 的查询发送到 AD DNS 服务器。

我确信有一种超级流畅的 Windows 方法可以做到这一点，但是当我需要从非 Windows 服务器中查找 LDAP 服务器时，我喜欢使用 DNS 方法。

# c# - 使用正则表达式 (ATL >> NET) 解析 C# 子字符串？

> ID：749274
> 
> 赞同：1
> 
> 时间：2009-04-14T20:37:53.960
> 
> 标签：c#, regex, atl

我需要使用什么 C# 和 .NET 正则表达式模式从这个 url 中获取“bar”？

> ```
> http://www.foo.com/bar/123/abc 
> ```

在 ATL 正则表达式中，模式应该是

> ```
> http://www\.foo\.com/{[a-z]+}/123/abc 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-14T20:40:00.273

很简单：#http://www\.foo\.com/([az]+)/123/abc#

使用括号代替括号。

您将需要在正则表达式的前面和结尾使用一个字符才能使其工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T20:42:12.110

几乎一样的东西

```
 http://www\.foo\.com/([a-z]+)/123/abc 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-14T20:42:25.383

这几乎可以工作 - 只是一个微小的修改 - 将括号更改为括号。

```
http://www\.foo\.com/([az]+)/123/abc
```

但我认为这个正则表达式没有多大用处，因为它几乎包含了整个字符串。独立于其余部分匹配第一个路径元素不是更好吗？

```
^http://[^/]*/([^/]*).*$
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-15T09:39:26.127

这是一个将 url 分解为组件部分的解决方案；协议、站点和部分。不需要协议组，因此您可以给出表达式“www.foo.com/bar/123/abc”。部件组可以包含多个子组，代表站点下的文件夹和文件。

```
^(?<protocol>.+://)?(?<site>[^/]+)/(?:(?<part>[^/]+)/?)*$ 
```

您将使用如下表达式来获取 'foo'

```
string s = Regex.Match(@"http://www.foo.com/bar/123/abc", @"^(?<protocol>.+://)?(?<site>[^/]+)/(?:(?<part>[^/]+)/?)*$").Groups["part"].Captures[0].Value; 
```

表达式结果的细分如下

协议：http://
站点：www.foo.com
部分[0]：栏
部分[1]：123
部分[2]：abc

# cocoa - NSTableView 中的动画单元格重新排序

> ID：749275
> 
> 赞同：2
> 
> 时间：2009-04-14T20:38:05.100
> 
> 标签：cocoa, macos

是否有很好的技术或示例代码演示如何实现动画单元格重新排序？我有一个自定义单元格类，并且定期重新排序工作正常，但我想尽可能多地对其进行动画处理（最好是在 safari 中的选项卡重新排序，除了在 tableview 中）。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-15T14:32:19.510

在 WWDC 04 上有一个“Cocoa Tips and Tricks”会议，Apple 演示了该行为，但我无法在网上找到它。

[这篇 2004 年的 cocoa-dev 帖子](http://www.cocoabuilder.com/archive/message/cocoa/2004/1/13/98815)暗示 Dan Wood（来自 Karelia）已经在一篇 MacTech 文章（[Dan 网站上的](http://gigliwood.com/tabletester/)代码）中实现了这种效果。

# iphone - UIScrollView 覆盖

> ID：749281
> 
> 赞同：0
> 
> 时间：2009-04-14T20:38:44.927
> 
> 标签：iphone, cocoa-touch

我决定在我的应用程序中使用 UIScrollView，因为我必须滚动出现在屏幕上的元素。

当我在 Interface Builder 中查看我的滚动视图时，它看起来非常完美。但是当我运行我的应用程序时，我会从滚动视图中获取项目，从而掩盖视图中的项目。我怎样才能让它按照我需要的方式工作？为什么 UIScrollView 会掩盖它不应该掩盖的项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-07-30T04:23:37.867

尝试在视图的子类中设置 UIScrollView 大小。如果我正确理解了您的问题，那么下面的代码片段应该可以工作。

```
CGSize winSize = {500.0f, 179.0f};
yourScrollView.contentSize = winSize; 
```

# c# - sql和结构/类

> ID：749293
> 
> 赞同：0
> 
> 时间：2009-04-14T20:40:20.320
> 
> 标签：c#, sql

有没有办法我可以创建一个结构或类，用数据填充它并将它转储/从我的数据库中读取？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-14T20:44:33.210

这听起来您或多或少需要基本介绍如何从 C# 连接和操作数据库。上面的海报说要研究 LINQ to SQL，但您也可以研究更基本的 ADO.NET 底层框架，这将使您了解它的基本工作原理。

[此外，您可以在此处](http://www.codebeach.com/index.asp?tabID=2&categoryID=15&subcategoryID=3)使用此站点获取许多不同的 C# 数据库教程。

**编辑**：来自[C# Station](http://www.csharp-station.com/Tutorials/AdoDotNet/Lesson01.aspx)、[CodeProject](http://www.codeproject.com/KB/database/DatabaseAcessWithAdoNet1.aspx)和[Codersource的更多信息](http://www.codersource.net/csharp_adonet_tutorial_ed.html)

**编辑 2**：如果您对上面提到的 Linq to SQL 之类的东西感兴趣，这里有一些来自[C# Corner](http://www.c-sharpcorner.com/UploadFile/scottlysle/L2SinCS06022008035847AM/L2SinCS.aspx)和[C-Sharp Online 的教程](http://en.csharp-online.net/Introducing_LINQ%E2%80%94Using_LINQ_to_SQL)

**编辑 3**：其他人也会建议诸如 ADO.NET 实体框架之类的东西。对于仍然需要掌握使用数据库的基础知识的初学者，我不一定建议这样做。这是来自[MSDN 概述的一些信息](http://msdn.microsoft.com/en-us/library/aa697427(VS.80).aspx)

**简单示例**（这是直接从上面给出的 C# Station 链接中提取的）

> 清单 1\. 使用 SqlConnection

```
using System;
using System.Data;
using System.Data.SqlClient;

/// <summary>
/// Demonstrates how to work with SqlConnection objects
/// </summary>
class SqlConnectionDemo
{
    static void Main()
    {
        // 1\. Instantiate the connection
        SqlConnection conn = new SqlConnection(
            "Data Source=(local);Initial Catalog=Northwind;
             Integrated Security=SSPI");

        SqlDataReader rdr = null;

        try
        {
            // 2\. Open the connection
            conn.Open();

            // 3\. Pass the connection to a command object
            SqlCommand cmd = 
                new SqlCommand("select * from Customers", conn);

            //
            // 4\. Use the connection
            //

            // get query results
            rdr = cmd.ExecuteReader();

            // print the CustomerID of each record
            while (rdr.Read())
            {
                Console.WriteLine(rdr[0]);
            }
        }
        finally
        {
            // close the reader
            if (rdr != null)
            {
                rdr.Close();
            }

            // 5\. Close the connection
            if (conn != null)
            {
                conn.Close();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-14T20:42:25.323

是的，C# 提供了许多连接数据库的方法。

如果您有 C# 3.0，请查看 Linq To SQL，这应该可以满足您的需求。

**编辑**：想一想，是否有任何（半现代）编程语言*没有*该功能？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T20:44:10.403

[有](http://msdn.microsoft.com/en-us/library/h43ks021(vs.71).aspx) [很多](http://msdn.microsoft.com/en-us/library/aa697427(VS.80).aspx) [方法](http://subsonicproject.com/)，取决于你的需要[。](http://www.hibernate.org/343.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-14T20:58:05.347

如果您只是想要一个简单的 ORM，请查看基于 NHibernate 的[Activerecord](http://www.castleproject.org/activerecord/index.html) 还有来自[www.devexpress.com](http://www.devexpress.com/)的 XPO 另一种方法是 DB4O (DB for Objects) [www.db40.com](http://www.db4o.com/)

# diff - 我可以在将文件保存到 Vim 之前查看更改吗？

> ID：749297
> 
> 赞同：153
> 
> 时间：2009-04-14T20:41:16.667
> 
> 标签：diff, vim, preview

我使用 Vim。我打开一个文件。我编辑它，我想在保存之前查看我编辑的内容。

我怎样才能在 Vim 中做到这一点？

* * *

## 回答 #1

> 赞同：181
> 
> 时间：2009-04-14T20:45:58.573

```
:w !diff % - 
```

* * *

## 回答 #2

> 赞同：120
> 
> 时间：2014-03-12T18:27:48.067

因为有人问关于命令的解释

```
:w !diff % - 
```

这是我尝试写一个更详细的答案：

我假设您正在使用`cat`并`echo`安装了一个系统（例如几乎所有 GNU/Linux、Mac OS、BSD 和其他类 UNIX 系统）。

上述命令的工作原理如下：

1.  在 vim 中保存文件的语法是：

    ```
    :w <filename> 
    ```

2.  在 vim 中执行 shell 命令的语法是：

    ```
    :!<command> 
    ```

3.  vim发出的shell环境里面`%`恰好指向当前文件名。您可以通过执行以下操作来验证这一点：

    ```
    :!echo % 
    ```

    这应该输出文件名（或错误，如果 vim 运行时没有文件名）。

    使用 cat 我们还可以输出文件的内容：

    ```
    :!cat % 
    ```

    这应该返回上次保存状态的文件内容，如果从未保存过，则返回错误。

4.  程序 diff 能够从标准输入（stdin）读取。它的手册页说明了以下内容：

    > [...] 如果 FILE 是“-”，则读取标准输入。[...]

5.  执行不带文件名而是在其后面的 shell 命令的 save 命令会导致 vim 将文件内容写入 shell 的标准输入，而不是将其保存在物理文件中。您可以通过执行来验证这一点

    ```
    :w !cat 
    ```

    这应该总是打印文件的当前内容（这将被写入文件）。

把它放在一起（或tl；dr）：文件被“保存”到stdin，diff以文件名和stdin作为输入运行。

知道这一点也可以将文件与 vimdiff 做这样的事情进行比较——这只是一个你不想这样做的想法：

```
:w !cat > /tmp/tempFile && vimdiff /tmp/tempFile % && rm /tmp/tempFile 
```

（然后打开 readonly 并使用关闭 vimdiff `:qall`）

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2009-04-14T20:46:31.427

[http://vim.wikia.com/wiki/Diff_current_buffer_and_the_original_file](http://vim.wikia.com/wiki/Diff_current_buffer_and_the_original_file)

> 这是一个函数和命令，用于查看当前编辑的文件与其在文件系统中的未修改版本之间的差异。只需将它放在您的 vimrc 或插件目录中，打开一个文件，进行一些修改而不保存它们，然后执行`:DiffSaved`.
> 
> ```
> function! s:DiffWithSaved()
>   let filetype=&ft
>   diffthis
>   vnew | r # | normal! 1Gdd
>   diffthis
>   exe "setlocal bt=nofile bh=wipe nobl noswf ro ft=" . filetype
> endfunction
> com! DiffSaved call s:DiffWithSaved() 
> ```
> 
> 要退出差异视图，您可以使用该`:diffoff`命令。
> 
> 下面是一个类似的功能，适用于模仿`'cvs diff'`命令...

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2009-04-14T21:24:21.040

我一直很喜欢[diffchanges](http://www.vim.org/scripts/script.php?script_id=2158) - 很好，很简单，很有效。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2009-09-05T22:15:40.533

来自 vimrc_example.vim：

```
" Convenient command to see the difference between the current buffer and the
" file it was loaded from, thus the changes you made.
if !exists(":DiffOrig")
  command DiffOrig vert new | set bt=nofile | r # | 0d_ | diffthis
          \ | wincmd p | diffthis
endif 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-11-05T18:55:24.113

git 支持以下命令

`:w !git diff --no-index -- % -`

通过将以下内容添加到 ~/.vimrc 将其映射到命令

`command GitDiff execute "w !git diff --no-index -- % -"`

现在执行`:GitDiff`变成了一个方便的小命令，可以在每次保存之前快速显示差异。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-04-14T20:54:25.200

获取以下内容并使用 :DIFF 命令

```
function! s:diff()
    let tmpa = tempname()
    let tmpb = tempname()
    earlier 100h
    exec 'w '.tmpa
    later 100h
    exec 'w '.tmpb
    update
    exec 'tabnew '.tmpa
    diffthis
    vert split
    exec 'edit '.tmpb
    diffthis
endfunction
command! -nargs=0 DIFF call <SID>diff() 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2010-01-19T18:24:37.357

不完全是你要找的，但[SCMDiff.vim](http://www.vim.org/scripts/script.php?script_id=2201)真的很酷。一个按键，它会在源代码控制 repo 中突出显示您当前的文件与头部修订。它适用于许多 SCMS。我将它与 perforce 一起使用。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-12-18T00:56:23.333

有一个插件，基于不同的答案在这里：[https ://github.com/gangleri/vim-diffsaved](https://github.com/gangleri/vim-diffsaved)

它提供了`:w !diff % -`方法和更多涉及的方法`diffthis`。

除了那个[undotree 还](https://github.com/mbbill/undotree)允许这样做，但还有更多（不同撤消检查点之间的差异）。类似于[Gundo](http://sjl.bitbucket.org/gundo.vim/)。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2010-09-23T01:27:03.057

我可以推荐[histwin](http://www.vim.org/scripts/script.php?script_id=2932)插件。

*虽然它与文件的当前保存*版本没有差异（就像其他答案一样），但它可以**vimdiff 更改，因为您开始 edting**，甚至可以按顺序**重播**您的更改。如果您中间保存，差异就会显示出来。

此外，它显示*所有撤消历史分支*的列表，并允许您在它们之间切换或区分。

PS：虽然插件不会在每次文件更改后自动跟踪编辑历史记录中的时刻，但您可以明确地“标记”保存文件的时刻，以便以后可以根据需要使用它进行 vimdiff。也许这可以自动化？

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-03-12T19:01:49.030

如果你想像 vimdiff 那样使用 vim 进行比较，你可以这样做：

编辑您的 .vimrc 并添加：

```
nmap <F8> :w !vim -M -R - -c ":vnew % \| windo diffthis"<CR><CR> 
```

从那里您将看到您的更改，并且可以`qall`通过在命令模式下按 F8 在 vi​​mdiff 中使用 like 退出差异视图。用您喜欢的任何键替换 F8。

编辑：添加 -M 以禁止任何修改，因为它不保存。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-02-24T07:05:11.680

您可以使用以下命令使 vim 创建最后一个备份和原始备份：

```
:set backup
:set patchmode=.orig 
```

此后，您可以拆分打开它们：

```
:vsp %:p~ or :vsp %:.orig 
```

从那里做：

```
:vimdiff in each buffer 
```

如果你不喜欢吃剩菜但想要 vimdiff，你也可以这样做：

```
ggVGy    # copy the whole buffer
:vnew    # open a split
CTRL-W w # switch to it
shift-P  # paste at start 
```

然后在每次拆分时执行 :diffthis

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-05-14T20:23:28.483

您刚刚编辑的更改 [**缓冲区**]，即与上次保存的版本（在**工作**目录中）不同的更改，这些可能与上次索引版本（**Git**）不同。我映射了两个：

```
" Find diff inbetween currrent buffer and ... A{last index version} vs B{last saved version in working directory}
"  - A{last index version}: the file as you last commited it
    " git diff to vimdiff against the index version of the file:
    nnoremap <leader>gd <Esc>:Gvdiff<CR><Esc>:echo "currentBuffer vs lastIndexVersion (last commited)"<CR>
"  - B{last saved version in working directory}: the file you last :w,
"   not neccesary commited it (not commited for sure if it is in NO git project)
    " https://vim.fandom.com/wiki/Diff_current_buffer_and_the_original_file
    nnoremap <leader>gd2 <Esc>:DiffSaved<CR><Esc>:echo "currentBuffer vs lastSaved (not neccesary equal to last commited)"<CR>
    function! s:DiffWithSaved()
        let filetype=&ft
        diffthis
        vnew | r # | normal! 1Gdd
        diffthis
        exe "setlocal bt=nofile bh=wipe nobl noswf ro ft=" . filetype
    endfunction
    com! DiffSaved call s:DiffWithSaved() 
```

vimdiff 与 Gdiff 的示例。

*   vimdiff： [![:vimdiff](https://i.stack.imgur.com/HCBbT.png)](https://i.stack.imgur.com/HCBbT.png)
*   Gdiff： [![Gdiff](https://i.stack.imgur.com/kTFU6.png)](https://i.stack.imgur.com/kTFU6.png) 提交更改时，您只看到 Gdiff，可能或可能与 vimdiff 具有相同更改的内容： [![提交更改时，您只会看到 Gdiff，哪些可能或可能不会与 vimdiff 具有相同的更改](https://i.stack.imgur.com/FQntq.png)](https://i.stack.imgur.com/FQntq.png)

此外，要在其他路径中轻松`vimdiff`同音文件：

```
 " vimdiff homonym file 
   nnoremap <leader>dh  <Esc>:vsplit %:p:h/../__/%:t <bar> :windo diffthis<Left><Left><Left><Left><Left><Left><Left><Left><Left><Left><Left><Left><Left><Left><Left><Left><Left><Left><Left><Left><Left><Left><Left><Left>
        "E.g."$ vim /path01/proj02_pg064/processorder.php
        ":vsplit %:p:h/../proj01_pg05/%:t | :windo diffthis 
```

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2017-01-25T12:55:31.907

按照上面的建议，我使用我非常喜欢的 git diff：

```
:w !git diff  % - 
```

# user-interface - RIA 与 RCP

> ID：749309
> 
> 赞同：6
> 
> 时间：2009-04-14T20:43:58.983
> 
> 标签：user-interface, eclipse-rcp, ria, rcp

我在一个项目中，我们尝试为旧应用程序构建 GUI 替代品。在我们真正实现功能之前，我们已经开始使用 Eclipse RCP（富客户端平台）和 GWT（Google 小部件工具包，一种富 Internet 应用程序）进行原型设计。您对 RIA 和 RCP GUI 有何经验？什么时候使用 RIA 有意义？在什么情况下富客户端更适合？随着RIA目前的可能性，划线变得越来越困难..您有什么经验吗？

* * *

编辑：你所有的答案都很有趣。我愿意接受所有这些，因为它们有助于回答我的问题，我承认这是一个非常开放的问题。所以我对他们每个人都投了赞成票。希望赏金将在你们之间分享。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-20T07:03:52.477

没有任何关于您的应用程序要求的详细信息，这对于回答这个问题非常关键。

使用 GWT 的最大优势是相对于 RCP 之类的易于部署。对于用户来说，没有什么比将他们的 Web 浏览器指向一个 URL 更容易的了，而对于运营团队来说，没有什么比将代码推送到服务器、弹跳它并调用它更容易的了。

就功能而言，GWT 的不足之处在于更丰富的数据可视化：图表、树/节点、网络图等。这些东西可以通过 GWT 和服务器上的一些帮助实现，但 DHTML 的局限性开始即使使用像 GWT 这样功能强大的工具包，也能展示出来。另一方面，RCP 为您提供了 Java 2D 的全部功能，可以可视化您想要的任何内容。这些特性对您来说可能不是必需的，但它们也是使应用程序真正有趣的特性，而不仅仅是一堆乱七八糟的选项卡、树和数据网格控件。

几年来我一直在使用 Adob​​e Flex 进行开发，发现它非常强大，具有与 GWT 之类的部署优势或多或少相同的优势，但提供与 RCP 相同的功能。您可能也想检查一下。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-21T11:57:48.033

尽管 GWT 走了很长一段路，但它并没有提供与适当的应用程序相同的灵活性和可访问性。

即使 GWT 应用程序几乎可以完成实际应用程序可以做的所有事情，但许多因素表明 RCP 将是最好的工具。

*   重复工作
*   大量输入
*   长时间的会议
*   重复的任务
*   用于编辑或演示的自定义小部件。
*   具有不同数据的多个窗口。
*   常用操作的快捷键
*   快速响应。
*   一个真正的菜单栏，coolbars。
*   在任务栏中很容易找到的适当窗口。
*   很少使用的操作的上下文菜单
*   有限（或已知的）用户数量。
*   广泛或复杂的动画或实时更新。

如果您认为您的应用程序需要一个带有多个视图和编辑器的工作台，那么您可以选择。

RCP 和工作台不是那么容易使用，但是如果应用程序可以从具有多个开放视图/编辑器等的更“免费”和开放的工作模型中受益，那么您可以免费获得很多。

如果应用程序是用于更多偶尔的任务，那么 GWT 真的很好。

*GWT 非常好，*但它仍然是一个 Web 应用程序，有时很糟糕。我不想在一个 Web 应用程序中完成我的所有工作，因为我可能会不小心按下一个键并丢失我所有的工作和会话。（我的键盘甚至在箭头键旁边还有一个似乎无法禁用的键）。它足够强大，几乎可以完成您在 RCP 中可以做的任何事情，但它仍然在 Web 浏览器中运行，这可能会令人恼火。

请记住，您可以使用 java Webstart 来部署 RCP 应用程序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-14T21:00:38.070

根据我的经验，RIA GUI 往往足够强大，可以将大部分信息传达给用户。可能有一些例外，但我现在想不出一个好的。RIA 的优点是任何人都可以通过 Web 浏览器访问，而无需安装胖客户端 (RCP)。除非您有一些无法通过网络技术完成的特殊复杂显示，否则我建议您采用 RIA 路线。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-18T06:18:52.257

我们为 Eclipse 开发了一个（试点项目）插件，然后将其转换为独立的 RCP 应用程序（我们不想将它作为插件发布，因为我们不希望 Eclipse 作为 pre-req，所以我们必须添加一些支持代码，使其比简单地迁移到 RCP*和*使用 jQuery 的 RIA 应用程序稍微复杂一些。

尽管 RCP 阵营尽了最大的努力，但 RIA 版本的开发时间几乎相同（尽管它是从头开始的），并且执行起来看起来更顺畅。

关键是 RIA 版本不需要安装，因为我们所有的客户端都已经拥有应用程序服务器，并且更新集中在服务器上，而不是每个客户端。

RCP 版本的功能早已落后。就我们而言，Eclipse 作为开发环境很好（对于 Java，我们没有使用其他语言的经验），但是他们将 IDE 与 GUI 分开（使 RCP 成为可能）的努力并不*完全*完成的。

另一方面，jQuery 似乎是为这类东西定制的（可能是因为它是为这类东西定制的）。应用程序的开发和运行都非常好。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-20T13:34:32.630

丰富的互联网应用程序是制作像传统桌面软件一样强大的软件的好方法。RIA 的一个常见问题是许多开发人员倾向于将业务逻辑放在客户端代码中。客户端代码中的业务逻辑和状态非常不安全，因为可以在运行时操作客户端代码。此外，它是一个白盒系统，允许黑客检查代码并发现弱点，例如仅在客户端代码中完成的输入验证或操纵状态。不要被混淆所迷惑，因为它只会减慢黑客的速度，但不会阻止他。Billy Hoffman 写了一本关于 AJAX 安全性的好书（称为*ta-daa*，“Ajax 安全性”），我向每个 RIA 开发人员推荐这本书。

这并不意味着 RIA 在定义上很糟糕，如果您知道自己在做什么，您可以编写安全的 RIA（客户端代码中没有业务逻辑，没有状态，输入验证 [也] 在服务器端完成等）。有几个框架可以实现这种更安全的服务器驱动 RIA，一个是[IT Mill 工具包](http://www.itmill.com)（基于 GWT），据我所知，[ICEFaces](http://www.icefaces.org)也应该是一个。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-21T01:49:13.597

我工作的一个组织选择了 RCP，因为他们的用户需要在线和离线使用该应用程序（当他们在路上时等）。我知道现在使用 google grears 可以做到这一点，但是对于大型组织来说，gears 还不够主流，无法将其作为旗舰产品的基础。但是，如果您的用户不需要离线，您将真正省去在您的 rcp 应用程序和服务器之间同步用户数据/产品更新等的麻烦，在这种情况下，RIA 将是要走的路。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-23T09:26:10.127

还可以部署具有 RIA 的一些好处的 RCP。正在为我们的客户研究的一种解决方案（仅供其公司内的员工使用）是使用通过 Java servlet 启动的 Java 应用程序。

确定的一些好处包括：

*   它很容易升级，很像 RIA（只需重新部署它的 JAR 文件，下次浏览到带有小程序的页面时就会选择它）
*   它的外观、感觉、行为和执行都像本机应用程序，很像 RCP（感谢 SWT）

确定的一些损害包括：

*   用户的计算机必须安装 Java 插件。
*   应用程序必须以与用户插件兼容的 Java 版本开发（尽管客户端可能需要在员工计算机上安装最低版本）。RetroWeaver 工具可以提供帮助，尽管我对它没有太多经验。
*   用户必须保持网络浏览器打开，否则应用程序将被终止。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-18T10:41:44.497

这个应用程序的性质是什么。它应该完全在客户端计算机上运行吗？它是否需要访问本地存储的数据？您是否只是在引擎仍然是遗留代码的情况下为现有应用程序替换 GUI？

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-18T11:35:56.973

我的另一半正在开发一个软件设备，她利用 AJAX 作为配置设备的一种方式。用于配置的功能集很丰富，并且与 RIA 非常吻合。同样，非常不鼓励在 Web 浏览器上本地安装软件。

# c# - HttpWebRequest 一个代理一个不代理

> ID：749311
> 
> 赞同：5
> 
> 时间：2009-04-14T20:44:10.903
> 
> 标签：c#, httpwebrequest

我如何代理我的连接？我想要 3 个不会通过代理的默认 HttpWebRequest objs，而另外 3 个会通过代理。我做 WebRequestObject.Proxy = myProxy; 在我想使用代理的对象上，对我没有的 3 个 objs 什么都不做？对象也将以未知的顺序初始化，所以我可能有 2 个不是，2 个被代理，第 3 个不是，最后一个是。它只是简单地写.Proxy = myProxy吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-14T21:04:16.317

对于需要代理的请求，是的，这可以正常工作：

```
request.Proxy = myProxy; 
```

对于希望绕过代理的请求，请使用：

```
request.Proxy = System.Net.GlobalProxySelection.GetEmptyWebProxy; 
```

如果你想使用 IE 的默认代理（或者如果你在 app/web.config 中设置了默认代理），只需不要设置代理，或者将其设置为 null：

```
request.Proxy = null; 
```

更多关于[可能的 HttpWebRequest.Proxy 值在这里](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.proxy.aspx)和[GetEmptyWebProxy 在这里](http://msdn.microsoft.com/en-us/library/system.net.globalproxyselection.getemptywebproxy.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-07-17T02:14:36.277

System.Net.GlobalProxySelection.GetEmptyWebProxy 现在已弃用。

我最终遇到了这种情况

```
 private static void SetProxy(HttpWebRequest request)
    {
        if (AppConstants.UseProxyCredentials)
        {
            //request.Proxy = available in System.Net configuration settings
            request.Proxy.Credentials = Credentials.GetProxyCredentials();
        }
        else
        {
            request.Proxy = null;
            //request.Proxy.Credentials = n/a
        }
    } 
```

使用 web.config 中的代理详细信息：

```
<system.net>
  <defaultProxy>
    <proxy
      autoDetect="False"
      bypassonlocal="True"
      scriptLocation="http://www.proxyscript..."
      proxyaddress="http://proxyurl..." />
  </defaultProxy>
</system.net>
<system.web> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-14T20:48:16.183

是的，您将为要代理的请求中的每个属性创建一个新的代理对象，并将其留空以供您完成。对于您未设置的那些，它们将在您的 app.config 中使用 system.net 配置中的默认代理值。

# javascript - 我想要一个切换 div elemenet，将底层内容与 z-index 重叠。我怎样才能做到这一点？

> ID：749314
> 
> 赞同：0
> 
> 时间：2009-04-14T20:44:47.533
> 
> 标签：javascript, css, toggle, z-index

我在一个框中有一个简短的介绍文本，如果用户想进一步阅读，他可以切换一个隐藏的 div 元素来显示其余内容。在这个介绍框下，我有一些其他元素，我总是想保持在那个位置。我希望切换的文本“显示在”固定内容的上方，并且我不希望它在切换的 div 打开时向下推。我尝试了各种 z-index 值、绝对和相对定位，但无济于事。有没有一个干净的基于 CSS 的解决方案？请帮忙！这是我正在尝试做的演示：

```
> <!DOCTYPE html PUBLIC "-//W3C//DTD
> XHTML 1.0 Transitional//EN"
> "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
> <html
> xmlns="http://www.w3.org/1999/xhtml"
> xml:lang="en"> <head>     <style
> type="text/css">      .container{width:
> 400px;
>                   height: 500px;
>                   border: 1px dashed #999; 
>                   }       div.container{padding:0; margin:0}                  #morecontent{
>               z-index: 100    
>               }       #morecontent,.introcontent{background: #DFFAFF;}                div#fixedcontent{background:
> #FFDFDF;
>                       z-index: -1;
>                       position: absolute; 
>                       width: 400px
>                       }           </style> <title>Toggle overlap - test</title> </head> <body>
>   <div class="container">         <div id="">
>       <script type="text/javascript">
>                               function toggle(obj){
>                               var el=document.getElementById('morecontent');
>                                   if (el.style.display !='none'){
>                                           el.style.display='none';
>                                       }
>                                       else {el.style.display='';
>                                               }
>                               }
>                                   </script>
>               <p class="introcontent">Lorem ipsum dolor sit amet, consectetur
> adipiscing elit. Aenean in pede congue
> ipsum sollicitudin pellentesque. Nunc
> t tortor dolor, sagittis nec, placerat
> vel, commodo sed, nunc. Vivamus
> bibendum molestie orci. Duis nec leo
> at libero fermentum molestie. Nam eu
> risus.<br /> 
>               There's more if you press toggle...
>               
>                                           </p>
>                       <a href="JavaScript: toggle(this)">Toggle</a>                   
>                   <div id="morecontent" style="display:none;">
>                       <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean in
> pede congue ipsum sollicitudin
> pellentesque. Nunc t  tortor dolor,
> sagittis nec, placerat vel, commodo
> sed, nunc. Vivamus bibendum molestie
> orci. Duis nec leo at libero fermentum
> molestie. Nam eu risus.
>                                           </p><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.
> Aenean in pede congue ipsum
> sollicitudin pellentesque. Nunc
> t tortor dolor, sagittis nec, placerat
> vel, commodo sed, nunc. Vivamus
> bibendum molestie orci. Duis nec leo
> at libero fermentum molestie. Nam eu
> risus.
>                                           </p>
>                       </div>
>                       
>                       <div id="fixedcontent">
>                       <p>This should stay 'under' the toggled content!</p>
>                           <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean in
> pede congue ipsum sollicitudin
> pellentesque. Nunc t  tortor dolor,
> sagittis nec, placerat vel, commodo
> sed, nunc. Vivamus bibendum molestie
> orci. Duis nec leo at libero fermentum
> molestie. Nam eu risus.
>                                           </p><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.
> Aenean in pede congue ipsum
> sollicitudin pellentesque. Nunc
> t tortor dolor, sagittis nec, placerat
> vel, commodo sed, nunc. Vivamus
> bibendum molestie orci. Duis nec leo
> at libero fermentum molestie. Nam eu
> risus.
>                                           </p>
>                           </div>              </div>          </div>      </body> </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-09T16:12:43.803

我没有看到移动 z-index 比通过更改 div 上的*显示*属性隐藏和显示内容更好/更有效。您是否出于某种原因始终想要页面上的所有内容？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T21:00:46.010

我过去做过的事情：

将您的内容分成两个跨度。显示一个跨度，另一个隐藏。当用户想要查看其余内容时，将其他跨度与其余文本一起显示。

我使用 JQuery toggle() 命令使它更容易做到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T21:07:19.367

我猜你只用 IE 进行测试。火狐没有这个问题。

这是 IE 中的一个已知错误，z-index 错误

[z-index 是强制一个元素位于另一个元素之上的唯一方法，如果不是还有其他方法吗？](https://stackoverflow.com/questions/687849/is-z-index-the-only-way-to-force-an-element-to-be-positioned-over-top-of-another/687861#687861)

有一个使用 javascript [http://mahzeh.org/?p=23的“通用”解决方案](http://mahzeh.org/?p=23)

但最好的方法是重新排列元素，使您的可扩展元素位于下方框上方的位置。尝试将它插入到您要在 HTML 中覆盖的框之后，然后使用绝对定位在其上方直观地定位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-09T16:07:00.447

尝试：

```
#container { position: relative; }
#more { position: absolute; display: none; background-color: White;}

<div id="container">
    Lorum <a href="#">click for more</a>
    <div id="more">
       Lorum
    </div>
    <div id="under">
        Underneath text
    </div>
</div> 
```

事件“ `click for more`”设置`#more`为`display: block;`

在这种情况下，z-index 隐含在`#more`文档`#under`树中，因此具有更高的 z-index

# php - PHP：顺序输出的最佳方法？

> ID：749322
> 
> 赞同：1
> 
> 时间：2009-04-14T20:46:55.187
> 
> 标签：php, javascript, ajax

为 PHP 安装程序脚本设置顺序输出的最佳方法是什么？假设我有一个页面，并希望在 PHP 脚本提供的 DIV 中显示增量输出。

所以`page.html`可能包含这个：

```
<div id="output">
    <!-- Script Output Here -->
</div> 
```

install.php 可能看起来像这样（出于测试目的）：

```
<?php
// Turn off Output Buffering
ob_end_flush();

// Begin Test Output (5 second intervals)
echo 'Testing incremental output...' . "\n";
sleep(5);
echo 'Step 1...' . "\n";
sleep(5);
echo 'Step 2...' . "\n";
sleep(5);
echo 'Complete!' . "\n"; 
```

我在想 AJAX 可能是最好的方法，但我不确定如何处理。如果我通过 JavaScript 加载“install.php”，则在脚本完成执行之前我不会取回所有内容（对吗？） - 使整个目标变得毫无意义。我以前见过这样做，但找不到具体的例子来说明它是如何完成的。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T20:50:05.710

我怀疑 Ajax 会做你想做的事——相反，你可能不得不更频繁地调用 ajax 获取。

`flush()`要在生成信息后立即将其刷新，您需要在输出信息后使用常规的 's。

我还在相关的 .htaccess 文件中添加了一行，以避免由于 GZipping 输出（apache2）而导致的任何缓冲。

```
SetEnvIf Request_URI "/url/dont/buffer/me.php" gzip=0 
```

在相关的 PHP 文件中：

```
ini_set('output_buffering', false);
ini_set('implicit_flush', 'true'); 
```

以及对 flush() 的适当调用。这几乎涵盖了所有基础。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2009-04-15T05:52:45.750

我会将所有内容输出到文本文件并通过 AJAX 更新 DIV，只需调用 .txt 文件

# javascript - 通过 Javascript 运行 HTML

> ID：749326
> 
> 赞同：0
> 
> 时间：2009-04-14T20:47:52.097
> 
> 标签：javascript, html

我正在尝试通过我创建的 javascript 搜索来运行网站的主体。它工作正常，除了单词之间没有空格；以及这个 xcase 中的事实 html 图像没有出现/显示。有什么解决办法吗？

因此我需要帮助来显示图像。然后让文本显示在带有空格的浏览器上。

这都可以在 srctxt 变量中找到。这就是我认为问题所在。

请注意，我只有相当基本的 Javascript 知识。

```
<body>
    <script type = "text/javascript">
        var keyword;
        var srctxt;
        var srctxtarray;

        keyword = "archery";
        srctxt = "hellow blah blah blah archery <img src =\"megan_fox.jpg\">hello test archery";

        srctxtarray= srctxt.split(" ");
        for (var i=0;i<srctxtarray.length;i++){
            if(srctxtarray[i] != keyword){
                document.write(srctxtarray[i]);
            }
            else{
                document.write("<b class=\"red\">");
                document.write(srctxtarray[i] );
                document.write("</b>");
            }
        }
    </script>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T20:53:14.097

请编辑您的问题，并确保您清楚您的要求。您是否要显示图像？从 DOM 获取文本有问题吗？你如何从 DOM 中获取文本？

我可以立即看到的最大问题是您正在使用 document.write。您应该使用 innerHtml 来设置 DOM 文本和元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T20:58:57.590

您没有输出空格。当你 srctxt.split 时你去掉了空格，并且从不做任何事情来把它们放回去。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T20:59:38.183

您正在围绕“”（空格）拆分字符串，但您没有将空格写回。

在*document.write(srctxtarray[i] )*之后，您需要添加

```
 document.write(" "); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-14T20:59:38.277

问题是您正在删除空格（使用拆分）并且在写单词时没有将它们放回去。图像未显示，因为 和 之间的空格`img`已`src`被删除，并且标签看起来像`<imgsrc`。

要放置空格，请使用：

```
document.write(srctxtarray[i] + " "); // will add spaces 
```

但我强烈建议您使用 Nick Berardi 的建议

# c# - 将所有列值传递给多重绑定

> ID：749334
> 
> 赞同：0
> 
> 时间：2009-04-14T20:52:14.130
> 
> 标签：c#, wpf, data-binding, multibinding

我有一个配置为 GridView 的 ListView。它是数据绑定到 DataTable 并显示几列 int。我想以粗体显示每列中的最大值。

为此，我在每个单元格的 FontWeight 上都有一个 MultiBinding。将单元格值传递给 MultiBinding 转换器很容易。但是如何将该列中的所有项目传递给转换器？或者有没有办法将整个数据绑定 DataTable 传递给转换器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-14T21:30:19.530

一种方法是在视图本身中将 DataTable 公开为属性。然后将您的转换器绑定到 DataTable 并将 ConverterParameter 设置为列的名称。

```
... FontWeight="{Binding Converter={StaticResource MaxValueConverter}, ElementName=MyControl, Path=MyDataTable, ConverterParameter='ColumnName'}"/> 
```

不幸的是，你不能这样做..

```
... FontWeight="{Binding Converter={StaticResource MaxValueConverter}, Path={Binding}}"/> 
```

..但它会使绑定到 DataContext 更容易。

# java - JTable 是否有任何替代品，免费且更好？

> ID：749335
> 
> 赞同：8
> 
> 时间：2009-04-14T20:53:05.827
> 
> 标签：java, swing, jtable

寻找 JTable 的免费且更好的替代品。找到不少不错的，但不是免费的。

首先，我希望能够对角选择单元格（除了水平和垂直）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-14T20:59:23.207

[JXTable](http://swinglabs.org/docs/components/JXTable/tutorial.jsp)（来自[SwingLabs](http://swinglabs.org/index.jsp)）有几个不错的功能（[列控制](http://swinglabs.org/docs/components/JXTable/tutorial.jsp?step=2#ColumnControl)、[切换列可见性](http://swinglabs.org/docs/components/JXTable/tutorial.jsp?step=2#ColumnSelection)、[突出显示行](http://swinglabs.org/docs/components/JXTable/tutorial.jsp?step=3#RowHighlighting)、[排序行](http://swinglabs.org/docs/components/JXTable/tutorial.jsp?step=4#RowSorting)、[过滤行](http://swinglabs.org/docs/components/JXTable/tutorial.jsp?step=4#RowSorting)、[水平滚动控制](http://swinglabs.org/docs/components/JXTable/tutorial.jsp?step=2#HorizontalScrolling)和[调整列大小](http://swinglabs.org/docs/components/JXTable/tutorial.jsp?step=2#ResizingColumns)），而且它是免费的。

但是当你不说你在寻找什么功能时，很难肯定地说你会喜欢它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-08-10T14:09:21.183

查看 QuickTable：http: [//quicktable.org/](http://quicktable.org/)

# performance - 单个大型 SVN 项目的最佳实践

> ID：749337
> 
> 赞同：10
> 
> 时间：2009-04-14T20:53:37.293
> 
> 标签：performance, svn, version-control, culture

我在 svn 中继承了一个项目：超过 300 000 个文件中的 30Gb。那里有大量的二进制文件，大部分位于图像文件夹中。更新整个项目之类的操作可能会非常缓慢。

该团队已经制定了一个流程，只在他们正在处理的特定文件夹上运行更新/切换，并最终检查损坏的代码，因为“它可以在我的计算机上运行”。任何人的工作副本都可能包含过期代码、切换代码和遗忘-从未提交的代码。此外，发生最少的分支。

我个人的解决方案是每天早上 5 点的小型 bash 签出/构建脚本，但并不是每个人都有命令行勇气甚至复制我的解决方案，而是宁愿舒适地使用 tortoise svn 和破碎的过程。

有没有人尝试过调整这么大的存储库并可以提供建议？是否有任何我可以实施的最佳实践来处理大型存储库，我可以让每个人都轻松进入？

PS 外部似乎不是一个好主意，并且[保持大型存储库响应的 SVN 优化在](https://stackoverflow.com/questions/275147/svn-optimizations-to-keep-large-repositories-responsive)这里不适用，因为我正在处理一个项目

PPS 目前也在调查： http: [//www.ibm.com/developerworks/java/library/j-svnbins.html](http://www.ibm.com/developerworks/java/library/j-svnbins.html)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-14T21:28:29.610

首先，在客户端和服务器上升级到 SVN 1.6。最新的[发行](http://svn.collab.net/repos/svn/trunk/CHANGES)说明提到了大文件的加速 (r36389)。

其次，如果您必须在工作副本中包含整个项目，那么这可能不太适合您，而是使用[稀疏目录](http://blogs.open.collab.net/svn/2009/03/sparse-directories-now-with-exclusion.html)。我们为我们的大型 repo 执行此操作，客户端所做的第一件事是仅签出顶级目录，然后为了获取更多数据，使用 repo 浏览器转到所需的目录并在其上“更新到此修订版”。它在 TortoiseSVN 上运行良好。1.6 还具有“减少深度”选项来删除您不再需要处理的目录。

如果这不适合您，您仍然可以对工作副本的某些部分进行更新。您拥有的文件越多，更新就越慢（在 Windows 上，NTFS 似乎对用于更新的锁定策略特别差[。Bert Huijben 注意到了这一点](http://svn.haxx.se/dev/archive-2009-02/0202.shtml)并提出了一个修复 - 1.7 版本的 TBA，但您可以重建您的当前代码与他的“快速修复”。

另一种方法是更改​​您的文件系统，如果您可以重新格式化，您可以尝试[ext2 IFS 驱动程序](http://www.fs-driver.org/index.html)，但我相信您会对此保持谨慎！

最后一个选项 - 关闭 .svn firectories 的病毒扫描程序，以及服务器上的存储库。如果您在服务器上运行 Apache，请确保您在短时间内保持存活（以防止发生重新身份验证）。还要关闭工作副本目录和卷影副本的索引。（最后一个没有多大帮助，但你可能会看到我所做的更好的改进，在服务器上关闭 AV 将我的 SVN 响应提高了 10 倍）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-14T21:16:34.990

我们有两个存储库，一个用于我们的代码（经常更改），另一个用于我们的二进制数据（非常大，不经常更改）。有时这很痛苦，但在处理代码时值得更快的速度。

我们还有一个我们称之为“每日更新”的 Ruby 脚本，它已检查到我们的存储库中，我们每天一大早就通过 Windows 计划任务在所有开发 PC 上启动它。它将两个结帐更新到最新版本，然后在本地构建所有内容，因此我们一到早上就准备好了。

有一些问题我们还没有解决——例如，当我们的自动化测试运行时，他们检查代码和检查数据之间存在延迟，所以当我们提交对两个存储库的更改时，CI服务器有时会获取旧代码和新数据，导致测试失败。

当我们提交对数据存储库的更改时，我们通常只是告诉其他所有人他们需要更新（我们都坐在同一个房间里）。否则，我们通常不会手动更新数据；我们只是让每日更新脚本保持新鲜。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-14T21:02:47.597

为了处理笨重的大小，我会考虑将二进制数据拆分到另一个分支（甚至完全将其删除以存储在其他地方），与代码分开。这至少应该加快速度，尤其是在数据不经常更改的情况下。

我理解人们需要为他们的工具、数据和库提供一个中心位置，但是只有一个转储就不能很好地工作。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-14T22:19:26.650

我会保持简短：

*   升级到最新版本 (1.6.x)。1.5.x 也有速度优化。
*   确保每个人都使用相同版本的 TortoiseSVN，它是根据服务器的确切版本构建的。我们遇到了很多问题，人们一时兴起就更新，然后遇到奇怪的问题。
*   外部在同一 repo 上的服务器、存储库和文件夹之间工作。因此，您*可以*将二进制文件完全移动到另一个存储库/服务器，并使用外部链接到它们。
*   重组文件夹，以便您可以稀疏地签出项目并仍然能够高效地工作。基本上每个人都只检查顶部文件夹+子文件夹，然后选择性地“更新到修订”他们需要完全检查的文件夹。
*   创建导出、构建然后提交（或提示提交）的脚本。我有这样的脚本供我使用。在提交之前，我运行脚本并导出我的 wc 然后构建。注意：这将复制完整的 wc！因此，这对于数据大小较小（呃）的稀疏签出很有用。
*   考虑将二进制文件从存储库中移出（我不推荐这样做，但它可能是再次提高生产力的最明智的解决方案）。
*   请记住，导出不会创建 wc，这意味着与结帐相比，您可以节省 50% 的磁盘空间。因此，如果您重组以便可以导出二进制文件和不经常更新的项目而不是结帐，它将鼓励更多人“获得完整的东西”而不是试图浏览其中的一些内容。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-14T21:07:59.380

我曾是类似情况的 SCM 经理。我们有一个包含超过 200K 文件（主要是代码）的项目，其中存在一些相同的问题。我们的解决方案是将存储库拆分为两个版本。一个版本是开发版本，另一个是生产版本。我们使用所有代码的最新和最知名的工作副本为开发版本播种。开发人员从那里开始并进行更改、签入/签出等。一旦他们觉得事情稳定了，管理员（在我们的例子中是构建经理）合并代码并进行测试构建以验证一切正常。如果一切都过去了，那就太好了。如果不这样做，构建管理员将追捕开发人员并严厉惩罚他们。一开始我们遇到了一些相同的问题，例如“它在我的电脑上工作”等，

在特定点，开发代码（所有工作代码！！！！！！）被合并回生产运行并发布给客户。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-14T21:21:31.657

是否可以将项目分解为可以通过某种插件系统连接的较小项目？

# python - 在字符串列表中搜索另一个列表中的任何子字符串

> ID：749342
> 
> 赞同：19
> 
> 时间：2009-04-14T20:56:08.300
> 
> 标签：python

给定这 3 个数据列表和一个关键字列表：

```
good_data1 = ['hello, world', 'hey, world']
good_data2 = ['hey, man', 'whats up']
bad_data = ['hi, earth', 'sup, planet']
keywords = ['world', 'he'] 
```

我正在尝试编写一个简单的函数来检查是否有任何关键字作为数据列表中任何单词的子字符串存在。它应该为`good_data`列表返回 True ，为`bad_data`.

我知道如何以似乎效率低下的方式做到这一点：

```
def checkData(data):
  for s in data:
    for k in keywords:
      if k in s:
        return True
  return False 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-04-14T21:05:58.993

你在寻找

```
any( k in s for k in keywords ) 
```

它更紧凑，但可能效率较低。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-04-14T21:23:41.807

在您的示例中，项目很少，这并不重要。但是，如果您有数千个项目的列表，这可能会有所帮助。

由于您不关心列表中的哪个元素包含关键字，因此您可以一次扫描整个列表（作为一个字符串）而不是一次扫描一项。为此，您需要一个您知道不会出现在关键字中的连接字符，以避免误报。我在这个例子中使用了换行符。

```
def check_data(data):
    s = "\n".join(data);
    for k in keywords:
        if k in s:
            return True

    return False 
```

在我完全不科学的测试中，我的版本在大约 30 秒内检查了 5000 个项目的列表 100000 次。我在 3 分钟后停止了你的版本——厌倦了等待发布 =）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-14T21:40:37.087

如果您有很多关键字，您可能想尝试使用后缀树 [1]。插入三个数据列表中的所有单词，将每个单词来自哪个列表存储在其终止节点中。然后，您可以非常非常快地对每个关键字的树执行查询。

警告：后缀树实现起来非常复杂！

[1] [http://en.wikipedia.org/wiki/Suffix_tree](http://en.wikipedia.org/wiki/Suffix_tree)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-14T21:13:10.240

您可以通过将关键字列表构建为正则表达式来改善问题。

这可能允许它们被并行测试，但很大程度上取决于关键字是什么（例如，某些工作可能会被重复用于测试“hello”和“hell”，而不是从一开始就搜索每个短语的每个单词。

您可以通过执行以下操作来做到这一点：

```
import re
keyword_re = re.compile("|".join(map(re.escape, keywords))) 
```

然后：

```
>>> bool(keyword_re.search('hello, world'))
True
>>> bool(keyword_re.search('hi, earth'))
False 
```

（它实际上会在找到时返回一个匹配对象，如果没有找到则返回 None - 如果您需要知道哪个关键字匹配，这可能很有用）

但是，您获得多少（如果有的话）将取决于关键字。如果您只有一两个，请保持当前的方法。如果您有一个很大的列表，则可能值得进行分析和分析，看看哪个表现更好。

**[编辑]** 作为参考，以下是这些方法对您的示例的作用：

```
 good1   good2  good3   bad1   bad2
original     : 0.206   0.233  0.229   0.390   63.879
gnud (join)  : 0.257   0.347  4.600   0.281    6.706
regex        : 0.766   1.018  0.397   0.764  124.351
regex (join) : 0.345   0.337  3.305   0.481   48.666 
```

显然，对于这种情况，您的方法比正则表达式的方法执行得更好。是否总是如此，很大程度上取决于关键字的数量和复杂性，以及将要检查的输入数据。对于大量关键字、冗长的列表或很少匹配的短语，正则表达式可能效果更好，但*确实*可以获得时间信息，并且可能首先尝试更简单的优化（例如将最常见的词移到关键字列表的前面）。有时最简单的方法确实是最好的。

**[Edit2]在应用正则表达式之前，使用**[gnud 的解决方案](https://stackoverflow.com/questions/749342/search-a-list-of-strings-for-any-sub-string-from-another-list/749418#749418)和类似的方法更新了表格。我还添加了 2 个新测试：

```
good_data3 = good_data2 * 500  # 1000 items, the first of which matches.
bad_data2 = bad_data * 500     # 1000 items, none of which matches. 
```

这显示了各种优点和缺点。当立即找到匹配项时，加入的效果会更差（因为加入列表总是需要预先支付费用 - 这是线性搜索方法的最佳情况），但是对于不匹配的列表，它会执行更好的。 **当list.case**中有大量项目时会更好）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-14T21:07:32.983

我认为这是非常有效和清晰的，尽管您可以使用 map() 来避免许多嵌套。我同意 ross 关于更大列表的字典想法。

# php - Prototype 的 Ajax.Updater 实际上并未在 IE7 上更新

> ID：749347
> 
> 赞同：2
> 
> 时间：2009-04-14T20:58:27.110
> 
> 标签：php, ajax, caching, internet-explorer-7, prototypejs

我正在尝试使用[Ajax.Updater](http://www.prototypejs.org/api/ajax/updater)提交表单，并在我的页面中更新 div 元素的结果。

在 IE6、FF3、Chrome 和 Opera 中一切正常。但是，在 IE7 中它偶尔会起作用，但通常情况下，它似乎什么也没做。

这是javascript：

```
function testcaseHistoryUpdate(testcase, form) {
document.body.style.cursor = 'wait';
var param = Form.serialize(form);
new Ajax.Updater("content", "results/testcaseHistory/" + testcase, {
    onComplete: function(transport) {document.body.style.cursor = 'auto'}, 
    parameters: param,
    method: 'post'
    }
);
} 
```

我已经验证了使用`alert()`参数设置为我期望的调用。

我在很多地方都读过 IE7 积极缓存，这可能是根本原因，但是每次在我的 php 响应中添加以下内容后，它仍然无法正常工作。

```
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header("Cache-Control: no-store, no-cache, must-revalidate");
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache"); 
```

为了进一步尝试解决缓存问题，我尝试添加一个虚假参数，该参数只是填充了一个随机值，以便为每个调用提供不同的参数，但这没有帮助。

我也发现[了这个](https://stackoverflow.com/questions/676448/prototype-js-1-6-0-3-ajax-updater-not-working-in-ie7-or-ie8-help-please)，UTF-8 似乎导致 IE7 出现问题，但我的页面被明确标记：

```
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
```

与我测试导致此类问题的其他浏览器相比，有谁知道 IE7 可能有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-26T21:38:17.637

您似乎无法对 ie 中的表单标记内的 DOM id 元素进行更新。有没有人找到解决这个问题的方法？当我将它移到表单标记之外时，我的代码可以正常工作，并且当我只是注释掉表单标记并且不移动 DOM 元素时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-16T18:06:32.977

一个常见的问题似乎是[额外的逗号问题](https://stackoverflow.com/questions/723759/javscript-jquery-not-executing-in-ie-until-the-body-of-the-page-is-moused-over)。确保 IE 没有为您提供左下角的警报图标。过去我遇到了一些麻烦，因为 IE 没有验证我的 javascript，它不会按我的意愿运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-06T10:44:02.930

与 AJAX 问题无关，但在 IE 中，如果您尝试使用块级元素更新内联元素，则会引发错误。要测试这是否适用于您，请使用以下代码包装您的代码：

```
try {
// Your code
// something.update('...');
} catch(error) {
alert(error.descripton)
alert(error.number)
} 
```

如果您收到错误 -2146827687，请重新排列您的 html，以便使用块级元素更新块级元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-03T00:45:32.770

我有完全一样的问题！

经过大量的反复试验，我发现了发生了什么：

IE 执行 Ajax 调用，处理 PHP 文件，但在屏幕上不显示任何内容！

PHP 文件中的任何“回显”或“打印”都不会显示在 div (target='hidden-div) 上，onComplete “警报”也不会显示在屏幕上！

但是，所有 MySQL 调用都在工作，我添加了一些代码来添加和/或删除数据库上的一些 foobar 记录，它们都工作了！

这可能是 IE 缓存问题吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-03T00:51:03.833

对我来说，当然闻起来像是一个缓存问题。你是正确的，IE7（和 IE6）缓存非常积极，尤其是 AJAX 调用，并且经常错误地忽略缓存控制标头。

通常的解决方法是将“cachebuster”随机参数附加*到 URL*（而不是作为附加的 POST 变量）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-03-08T16:38:33.237

IE 在缓存方面是愚蠢的。我有一个小“帮助”页面，它没有完整的 html/body 等。所以我无法放入正常的反缓存内容。

URL var 的想法虽然有效。

```
 var cacheBuster = parseInt(Math.random() * 99999999); // cache buster
    new Ajax.Updater(elementId, '/Helpers/PendingChanges.aspx?Cache=' + cacheBuster); 
```

此外，在我添加关于 charset 的行之前，我在 IE8 中遇到了“未指定的错误”。

# python - 如何从文件中读取和处理二进制（base-2）逻辑表示

> ID：749359
> 
> 赞同：0
> 
> 时间：2009-04-14T21:02:33.590
> 
> 标签：python, shell, binary, awk, decimal

我有一个包含 800 行的文件，例如：

```
id       binary-coded-info
---------------------------
4657     001001101
4789     110111111
etc. 
```

其中每个 0 或 1 代表某些特征的存在。我想读取这个文件并对二进制编码信息执行几个按位逻辑操作（这些操作取决于用户输入和来自具有 3000 行的第二个文件的信息）。然后，这些重新计算的二进制编码信息应写入文件（带有尾随零，例如

```
4657     000110011
4789     110110000
etc. 
```

如果不编写自己的基本转换例程，我应该如何做到这一点？我对任何东西都开放，包括我不知道的语言，比如 python、perl 等。它应该可以在不编译的情况下工作。

到目前为止，我尝试按照自己的方式编写脚本、awk 和 sed。这将意味着（我认为）：批量读取为 base-2，转换为 base-10，根据用户输入和第二个文件进行按位运算，转换为 base-2，添加前导零并打印。使用 bc 的常用控制台提示似乎并不优雅，因为我在一个文件中有很多行。dc.sed 也是如此。并且 awk 似乎没有等同于将输入标记为二进制（如 "echo $((2#101010))" ），而且 printf 技巧不适用于二进制。那么，我将如何最优雅地做到这一点（或者，就此而言）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-14T21:10:10.340

为什么要转换它们并使用位操作？

在 Python 中，您可以将所有这些作为字符串执行。

```
for line in myFile:
    key, value = line.split()
    bits = list(value)
    # bits will be a list of 1-char strings ['1','0','1',...]
    # ... do stuff to bits ...
    print key, "".join( value ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T22:33:40.140

在 python 中，您可以使用 int 转换为二进制，指定基数 2。即：

```
>>> int('110111111',2)
447 
```

要转换回来，在 python2.6 或 3 中有一个`bin`函数，但在 python2.5 中没有，所以你需要自己实现它（或使用类似下面的东西）：

```
def bin(x, width):
    return ''.join(str((x>>i)&1) for i in xrange(width))[::-1]

>>> bin(447, 9)
110111111 
```

（宽度是要填充的位数 - 您的示例似乎使用 9 位数字。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T23:34:27.780

扩展布赖恩的回答：

```
# Get rid of the '----' line for simplicity
data_file = '''id       binary-coded-info
4657     001001101
4789     110111111
'''
import cStringIO
import csv, sys
data = [] # A list for the row dictionaries (we could just as easily have used the regular reader method)
# Read in the file using the csv module
# Each row will be a dictionary with keys corresponding to the first row
reader = csv.DictReader(cStringIO.StringIO(data_file), delimiter=' ', skipinitialspace = True)
try:
    for row in reader:
        data.append(row) # Add the row dictionary to the data list
except csv.Error, e:
    sys.exit('file %s, line %d: %s' % (filename, reader.line_num, e))
# Do something with the bits
first = int(data[0]['binary-coded-info'],2) # First bit string
assert(first & int('00001101',2) == int('1101',2)) # Bitwise AND
assert(first | int('00001101',2) == int('1001101',2)) # Bitwise OR
assert(first ^ int('00001101',2) == int('1000000',2)) # Bitwise XOR
assert(~first == int('110110010',2)) # Binary Ones Complement
assert(first << 2 == int('100110100',2)) # Binary Left Shift
assert(first >> 2 == int('000010011',2)) # Binary Right Shift 
```

有关更多信息，请参阅有关[表达式](http://docs.python.org/reference/expressions.html#binary-arithmetic-operations)的 python 文档，有关[csv 模块](http://docs.python.org/library/csv.html#module-csv)的更多信息，请参阅 csv 模块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-14T22:34:54.617

“简单”的 Perl 一个衬里（用你的标志替换 foo bar baz quux

```
perl -le '@f=qw/foo bar baz quux/;$_&&print($f[$i]),$i++for split//, shift' 1011 
```

这是一个可读的 Perl 版本：

```
#!/usr/bin/perl

use strict;
use warnings;

#flags that can be turned on and off, the first 
#flag is turned on/off by the left-most bit
my @flags = (
    "flag one",
    "flag two",
    "flag three",
    "flag four",
    "flag five",
    "flag six",
    "flag seven",
    "flag eight",
);

#turn the command line argument into individual
#ones and zeros
my @bits = split //, shift; 

#loop through the bits printing the flag that
#goes with the bit if it is 1
my $i = 0;
for my $bit (@bits) {
    if ($bit) {
        print "$flags[$i]\n";
    }
    $i++;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-14T21:05:30.197

在 C 中，如果您已经在 C 中执行此操作，则可以使用“strtol(str, NULL, 2)”进行转换。

像下面这样的东西会起作用：

```
FILE* f = fopen("myfile.txt", "r");
char line[1024];
while ((line = fgets(line, sizeof(line), f))
{
  char* p;
  long column1 = strtol(line, &p, 10);
  long column2 = strtol(p, &p, 2);
  ...
} 
```

您需要添加错误处理等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-19T13:36:10.110

遵循悠久的传统，这里有一个 awk 版本 :-)
最后检查 gawk 4.0.1
应该也适用于其他 awk。

```
{
      var = _int("00010101",2);
      print _bin( or( var ,  _int("00101001",2) ) , 8 ) 
      print _bin( and( var , _int("10110111",2) ) , 8 ) 
      print _bin( xor( var ,var ) , 8 );
}    

# convert var to d-ht base. Specify 16 for hex, 8 for oct, and such. Up to base 36, for fruther base, provide X. if d<=36, and wish to use custom X, provide 1 for i.
function _obase( v , d , X , i, this , r ){
  if(d<=9){r="";while(v){r=v%d""r;v=int(v/d)};return r;}
  if(d<=36&&!i){for(i=0;i<=9;i++)X[i]=""i;for(;i<d;i++)X[i]=sprintf("%c",55+i);}
  r="";while(v){r=X[v%d]""r;v=int(v/d)};return r;
}
function _pad(d, p, w, this ,r){
  r=""d;while(length(r)<w)r=p""r;return r;
}
function _bin( v , w , this ){
  return _pad(_obase(v,2),"0",w);
}
# convert string to var, using d as base. for base>36, specify X. if wish to use custom X, provide 1 to i
function _int( s , d , X , i , this , k , r ){
  r=0;k=length(s);if(d<=9){for(i=1;i<=k;i++){r*=d;r=r+int(substr(s,i,1));}return r;}
  if(d<=36&&!i){for(i=0;i<=9;i++)X[""i]=i;for(;i<d;i++)X[sprintf("%c",55+i)]=i;}
    for(i=1;i<=k;i++){r*=d;r=r+X[substr(s,i,1)];}eturn r;
} 
```

某些类型的 awk 可能缺少函数 and()、or()、xor()。如果是这样，请加载位操作库。网上有一些for awk。或者提供你自己的。

# c# - 将控件绑定到 LINQ 的重构方法

> ID：749360
> 
> 赞同：0
> 
> 时间：2009-04-14T21:02:35.320
> 
> 标签：c#, .net, winforms, linq, refactoring

我有一个函数可以将 LINQ 结果绑定到表单上的控件。下面的代码有效，但我无法克服我应该为复制/粘贴方面而受到打击的感觉。有人可以帮我做些什么来除臭吗？

谢谢你！

```
private void BindDataToForm()
    {
        // Bind data to form
        CaseNotesDataContext db = new CaseNotesDataContext();
        Table<CN_MaintItem> caseNotesItems = db.GetTable<CN_MaintItem>();

        // For each object
        var contactType = from cType in caseNotesItems
                          where cType.CategoryID == 2
                          select cType.ItemDescription;
        chkContactType.DataSource = contactType;

        var contactLocation = from cLocation in caseNotesItems
                          where cLocation.CategoryID == 3
                          select cLocation.ItemDescription;
        lkuContactLocation.Properties.DataSource = contactLocation;

        var contactMethod = from cMethod in caseNotesItems
                          where cMethod.CategoryID == 4
                          select cMethod.ItemDescription;
        lkuContactMethod.Properties.DataSource = contactMethod;

        var contactWith = from cWith in caseNotesItems
                          where cWith.CategoryID == 5
                          select cWith.ItemDescription;
        chkContactWith.DataSource = contactWith;

        var domains = from d in caseNotesItems
                          where d.CategoryID == 6
                          select d.ItemDescription;
        chkDomains.DataSource = domains;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-14T21:14:08.523

我不知道这是否真的可以解决任何问题，但请尝试：

```
public static class MyExtentsions {
    public IQueryable<string> GetItemDescriptions(this Table<CN_MaintItem> table, int cat)
    {
        return from x in table
               where x.CategoryID == cat
               select x.ItemDescription;
    }
} 
```

所以你可以像这样提取信息：

```
using (CaseNotesDataContext db = new CaseNotesDataContext()) {
    Table<CN_MaintItem> caseNotesItems = db.GetTable<CN_MaintItem>();

    chkContactType.DataSource = caseNotesItems.GetItemDescriptions(2);
    lkuContactLocation.Properties.DataSource = caseNotesItems.GetItemDescriptions(3);
    // etc... 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T21:23:18.813

诀窍是存储显式绑定控件所需的信息。您可以创建一个`IDictionary<Control, Int32>`来存储每个控件的类别 ID。然后只需遍历所有控件，在字典中查找 id，如果存在条目，最后将其绑定。您可以通过创建以委托作为值的字典来扩展此方法。这允许您对不同的控件执行不同的查询。此外，您还可以使用该`Control.Tag`属性来存储此信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T21:09:27.097

您可以通过执行以下操作“缩短”它：

```
IQueryable<string> GetDescriptions(int cat)
{
  return from x in caseNotesItems
         where x.CategoryID == cat
         select x.ItemDescription;

} 
```

进而：

```
chkDomains.DataSource = GetDescriptions(6);
... 
```

# javascript - 如何离线使用 Firefox 的 JavaScript 引擎？

> ID：749368
> 
> 赞同：1
> 
> 时间：2009-04-14T21:05:10.463
> 
> 标签：javascript, firefox, offline

我有可以在 Safari 和 Opera 中离线工作的 jQuery 代码，但在 Firefox 3.1 和 3.08 中都没有。

**如何在离线调试中使用 Firefox 的 JavaScript 引擎？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-14T21:13:07.370

Safari 和 Opera 都带有 JavaScript 调试器。对于 Firefox，选择的武器是安装[Firebug](http://getfirebug.com/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-14T21:13:26.463

您可以安装[SpiderMonkey](http://www.mozilla.org/js/spidermonkey/)并使用它。

或者您可以使用具有 JavaScript 调试器的[Firebug 。](http://getfirebug.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T21:07:57.273

如果您在使用 localhost 时没有运行 jQuery，您可能需要确保您的路径匹配。不同的浏览器在运行硬盘驱动器时处理相对路径的方式不同。我建议使用静态路径。此外，您可能还想查看 FireBug，这是一个允许您检查 JavaScript 的 FireFox 插件。

# php - 一个字符串中的分隔符

> ID：749370
> 
> 赞同：1
> 
> 时间：2009-04-14T21:05:30.227
> 
> 标签：php, regex, preg-match, delimiter

这是我用来创建 mysql 数据库的文件示例。分隔符是“，”，但在单个列的描述中存在“，”。

```
Header: City State Zip Description
Los Angeles, California , 98005, "welcome to california, were are living the dream","Please stay, a while." 
```

问题是“引号”中的描述包含一个分隔符，导致文件有额外的列。

有人告诉我，regex 或 preg_match 函数可以解决我的问题。谁能告诉我怎么做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-14T21:34:53.667

无需重新发明任何轮子，PHP 在[fgetcsv中已经拥有你所需要的](http://www.php.net/manual/en/function.fgetcsv.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T21:11:35.360

这是一个很好解决的问题，它是 CSV（或逗号分隔值）格式的标准。解析 CSV 的最简单方法是使用已经过测试且工作可靠的 CSV 库。CSV 解析器几乎适用于每种编程语言。有一些你没有想到的特殊情况，所以在大多数情况下使用现有的库是值得的。

此页面是 CSV 解析的好资源：

[http://www.creativyst.com/Doc/Articles/CSV/CSV01.htm](http://www.creativyst.com/Doc/Articles/CSV/CSV01.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T21:13:41.487

对于每个字段，您需要一个正则表达式，例如：

```
("(?:[^"]+|"")*"|[^,]+) 
```

那是两种选择。第一个匹配双引号，后跟零个或多个重复另一个替代的模式，这是一个非双引号字符串或一对双引号（如果双引号允许双引号出现在您的字符串中） . 第二种选择匹配一个没有双引号的字段，匹配一个非逗号字符串。然后，您可以将这些与逗号匹配结合起来。

# flash - Flash 源代码管理 - 最佳实践

> ID：749373
> 
> 赞同：4
> 
> 时间：2009-04-14T21:06:18.433
> 
> 标签：flash, svn, version-control

我现在正在处理一个 Flash 项目，我不得不强迫设计人员使用我们的源代码控制存储库 (SVN) 来帮助管理和跟踪该项目。让他完全接受源代码控制的好处是一场艰苦的战斗，但它正在发生。

除了我是唯一一个工作人员的项目之外，我之前不必对 Flash 项目使用源代码控制。我开始发现您需要围绕它实施一些额外的工作流程，这样您就不会遇到与二进制文件作斗争的噩梦。

由于我主要处理代码，因此我将所有 ActionScript 文件放入外部文件中，这样我就可以在设计人员处理包含所有图形的 FLA 文件时处理它们。这似乎工作正常，但是当我需要更改实例名称等时，我必须确保我能很好地沟通，这样我们就不会遇到任何问题。

我想知道其他人如何在源代码控制中处理 Flash，以及他们如何管理工作流程，以便开发人员和设计人员可以同时处理项目。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-15T02:28:48.920

你在那里几乎有解决方案。通信是版本控制系统中非常重要的一部分，对于二进制文件，您需要更加注意它。不幸的是，很多人只是认为软件是所有解决方案的最终目标，而团队沟通就消失了。

我犯了一个错误，将 SVN 传播给具有非常大的 Flash 代码库的客户。我不知道他们是否会让我再次进入那栋大楼。我失败的地方是我无法改变组织的文化，从而使从事项目的人之间有更多的交流，结果是关于谁与 .fla 冲突的争论更多。

也许采用每日 Scrum 会议（有人称之为站立会议）。每天早上有一个五分钟的会议，并说明你那天将要做什么以及你可能会接触哪些文件。如果有任何可能发生冲突，请务必在工作时全天进行沟通。这样就没有人不知道为什么 svn 说 fla 文件存在冲突。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-15T02:37:51.770

我同意分离你的动作脚本代码是最好的方法，但对于二进制资产，如果你遇到太多摩擦，你可能想要使用[锁定。](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-locking.html)

锁定还有一个好处是它对非开发人员更有意义，当然他们必须了解相关的风险，因此沟通一如既往地非常重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-18T14:11:13.930

这与其说是一个答案，不如说是一个跟进。我是一名开发使用大量 Flash 文件的网络应用程序的开发人员，我也将 AS 代码保存在单独的文件中（尽可能）。还有 PHP 文件和一些 javascript、库、图形等。

我真的只是在我的本地驱动器上创建了一个主干/分支系统，以避免破坏旧版本并允许我安全地试验功能等。然而，这很快就会变得忙碌。

有人建议我使用 GIT 进行源代码控制，并且可以看到这对于拥有更多开发人员的大型组织的好处，因为我是唯一的开发人员，所以真的只是想要一个好的解决方案来备份和跟踪我所做的更改。我以前从未使用过 GIT，而且它似乎有一个陡峭的学习曲线……所以我查看了 Adob​​e Version Cue，它的设置要简单得多。

有没有人有使用版本提示的经验？恢复到以前的版本容易吗？我对 SVN（我在开发人员团队中工作时使用过）的主要问题是它不适合 Flash，正如您所指出的那样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-04-05T11:00:10.140

再次跟进：在 CS5 中，Flash 终于支持保存为基于文本的格式了！

# asp.net - 向我的 Visual Studio 2008 项目添加数据库说我需要 sql server express？

> ID：749378
> 
> 赞同：1
> 
> 时间：2009-04-14T21:09:13.230
> 
> 标签：asp.net, sql-server, visual-studio-2008, sql-server-2005, sql-server-2005-express

当我尝试将新的 Sql Server 数据库文件添加到我的 Visual Studio 项目时，它告诉我需要安装 Sql Server 2005 Express，即使我已经安装了 Sql Server 2005 Developer？这是设计使然吗？如果是这样，微软为什么要这样做？如果它不是设计使然，解决它的解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-14T21:11:41.133

如果您要向项目中添加数据库，它将尝试添加一种 SQL Express 类型。如果您正在使用正在运行的实际 SQL Server 2005 实例，您想要连接到它，您不能只是将它添加到您的项目中。

您要做的是在 web.config 中添加一个连接字符串（它将包含基本连接信息，包括位置、数据库名称、身份验证属性等），然后您将能够在尝试时引用该连接字符串打开与数据库的连接。

**编辑**：您可以使用 W3 Schools 及其[ASP.NET 数据库教程](http://www.w3schools.com/ASPNET/aspnet_dbconnection.asp)获取更多信息。

**编辑2**：问题的作者在评论中提出了很好的后续行动，我想确保未来的观众可以看到这一点，而不必仔细阅读评论。

Xaisoft 提出的问题是*“只是出于好奇。如果您不想添加连接，但想要添加数据库怎么办？我们有选择吗？”*

**回答**：当您尝试添加数据库时，您正在尝试添加一个成熟的数据库，该数据库将保留在项目中，而不管它托管在哪里（假设主机可以运行 SQL Server Express 实例）。如果你想这样做，你需要安装 SQL Server Express。

连接到数据库将允许您在任何地方指向现有 SQL Server 2005 数据库的位置（只要您可以正确进行身份验证）。我还应该提到，无论您使用哪种方法，您仍然需要学习连接。

即使您的项目打包了一个 SQL Server Express DB，您仍然需要使用连接字符串来建立与该数据库的连接，以便您可以在其上使用查询等。

# java - Java 对象“不能被取消引用”

> ID：749394
> 
> 赞同：2
> 
> 时间：2009-04-14T21:15:25.557
> 
> 标签：java, htmlunit

我正在使用一个库 - HtmlUnit - 我刚刚从 2.4 版更新到 2.5 版。当我针对 2.5 编译代码时，我收到一个我不熟悉的奇怪对象“无法取消引用”错误消息。此外，我不明白为什么当我用两行代码编写代码时它会起作用，但当我作为 one-liner 编写代码时却失败了。

这是代码：

```
//this compiles fine
HtmlInput usernameInput = form.getInputByName("username");
usernameInput.setValueAttribute(userName);

//this fails to compile
form.getInputByName("password").setValueAttribute(passWord); 
```

这是我使用 ANT 和 Java 1.6 编译时收到的错误消息：

```
[javac] E:\workspaces\europa\PortalTestSuite\src\com\carefirst\portal\test\controller\EAITest.java:32: com.gargoylesoftware.htmlunit.html.HtmlInput cannot be dereferenced
[javac]         form.getInputByName("password").setValueAttribute(passWord);
[javac]                                    ^ 
```

com.gargoylesoftware.htmlunit.html.HtmlInput 不能被取消引用？我已经看到了 Autoboxing 的取消引用问题，但没有看到对象的问题。在这种情况下是什么意思？为什么代码以一种方式工作而不是另一种？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-10-21T07:53:33.477

事实上，这是另一个问题。

API 是`public final <I extends HtmlInput> I getInputByName(String name) throws ElementNotFoundException`.

`I`这意味着该方法返回( `I extends HtmlInput`)的一个实例。

当你写：

```
HtmlInput usernameInput = form.getInputByName("username"); 
```

-> 类 I 隐含地是一个 HtmlInput。

但是当你写：

```
form.getInputByName("password").setValueAttribute(passWord); 
```

-> 无法明确找到我的课程。

如果你想让它工作，你必须写：

```
form.<HtmlInput>getInputByName("password").setValueAttribute(passWord); 
```

-> 这迫使我成为一个 HtmlInput。

热诚地，杰罗姆。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-14T21:33:44.123

函数 form.getInputByName 被声明为 final，如[这里的 javadoc 中所示](http://htmlunit.sourceforge.net/apidocs/index.html)

对象 HtmlInput 是抽象的，因此在运行时它总是由扩展 HtmlInput 的对象实现。

由于最终方法的性质（它永远不会被覆盖，因此没有调用堆栈），错误的出现是因为编译器将其视为 htmlinput 而不是已实现的 htmlinput。（[ref](http://www.roseindia.net/javatutorials/final_methods.shtml)）（他认为不会有调用堆栈）将其分配给一个新的 htmlinput 对象正确地调用了调用堆栈，从而使代码再次可行。

这就是我认为这里发生的事情

虽然我不知何故找不到 2.5 版，但你能把我链接到哪里吗？

# version-control - 什么是源代码控制和配置管理最佳实践？

> ID：749397
> 
> 赞同：7
> 
> 时间：2009-04-14T21:17:59.247
> 
> 标签：version-control, configuration-management

我正在考虑一个列表，我可以将其推荐给其他开发人员，例如：

1.  一个构建脚本，例如*makefile*，将构建和测试整个项目
2.  构建系统所需的所有组件都需要源代码控制

有人有这样的清单吗？按优先顺序？

* * *

更新 - 添加了一些仅供参考的细节

有问题的系统由 C++ 和 makefile、Java 和导致 WAR 的 ant 以及 powerbuilder 和 C# gui 组件组成。所有代码都是强制的。

所以我正在寻找通用以及特定语言的最佳实践。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-14T21:26:52.580

对我来说，#1 规则是这样的：

主分支是神圣的——它必须始终是可构建的，能够通过 BVT，并且基本上是可用的。

任何允许进入导致构建或 BVT 中断的主分支的代码都会暴露过程中的错误。该过程应允许伙伴构建/测试单个分支系统，或要求子分支在合并到主分支或其他此类保护措施之前构建并通过 BVT。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-15T17:39:32.257

查看[软件配置管理中的高级最佳实践](http://www.perforce.com/perforce/bestpractices.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T21:27:42.577

这在很大程度上取决于您在什么环境中构建？

*   是 C/MakeFile 吗？
*   是 Java/JUnit/Ant 吗？
*   是 .NET/NUnit/NAnt 吗？
*   是 .NET/MSUnit/MSBuild 吗？
*   是鲁比吗……
*   是蟒蛇吗...
*   是PHP吗

这些中的每一个在方法和设置上都不同。因此，在您获得帮助之前，我们需要了解您的设置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-14T21:31:36.983

我的第一件物品：

*   经常更新，经常提交，

或者，正如 Jeff 所说：[**提前入住，经常入住**](http://www.codinghorror.com/blog/archives/001165.html)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-14T22:42:52.663

系统必须自己构建，自己测试，自己下载+构建依赖。我有一个 makefile 下载、构建和部署运行时环境，该环境已为我的主干版本“认证”。这个 makefile 也被提交到存储库中。

请记住提交另一个非常重要且最容易被忽视的事情（一共三个）：

*   创建数据库布局的 SQL 代码（在上面放一个版本！）。
*   调出数据库布局版本的 SQL 代码（升级）
*   降低数据库布局版本的 SQL 代码（降级）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-14T22:08:38.797

作为一名 SCM 经理，我可以在这个问题上给您的最佳答案是“这取决于”。您的列表和列表中项目的重要性顺序将取决于您的项目要求、您使用的语言和开发人员级别。

在您放在一起的任何列表中，您可能想要考虑对我很重要（或 #1）的一件事是，您的工具的主干或主分支受到非常严格的控制，只有极少数人有权导入或提交更改它。这将在发布时省去很多麻烦。

可以在您放在一起的任何列表中的项目是：

*   何时办理登机手续（每天、每周、更频繁、更少）
*   构建完成时（每天、每周等）
*   使用双存储库（工程与生产）
*   允许存储库中的二进制文件
*   允许存储库中的第三方软件
*   构建存储库所需的所有项目
*   当导入或提交到主干时
*   使用一个文件导出和构建
*   允许签入有/没有错误报告信息
*   执行签到评论标准

该列表可以继续，具体取决于您的具体要求，但我认为您对这里的内容有所了解。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-14T21:34:15.680

如果您通过了“乔尔测试”中的这些问题，那么您应该走在正确的道路上：

你使用源代码控制吗？
你做日常构建吗？
你有错误数据库吗？
在编写新代码之前你会修复错误吗？

我的 #1 是：您可以一步构建吗？

[乔尔测试](http://www.joelonsoftware.com/articles/fog0000000043.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-15T01:53:12.610

“获取最新”和“构建”的整个过程应该是顺畅、轻松、快速和可靠的。

如果不是，开发人员往往会跳过获取最新版本并继续处理他们过时的副本，这是您要避免的事情。

这或多或少是迈克尔所说的——但我想强调的是，除了分支是神圣和稳定的——整个过程应该快速而简单

有点像 Google 的理念，即下载\安装应该快速简单

# c# - 如何使用 Lambda 表达式替换字符串参数

> ID：749401
> 
> 赞同：2
> 
> 时间：2009-04-14T21:19:40.723
> 
> 标签：c#, linq

而不是调用：

```
var shows = _repository.ListShows("PublishDate"); 
```

要返回按发布日期排序的对象集合，我想使用如下语法：

```
var shows = _repository.ListShows(s => s.PublishDate); 
```

我需要写什么来利用 lambda 作为参数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-14T21:22:14.697

```
public IEnumerable<Show> ListShows(Func<Show, string> stringFromShow)
{

} 
```

在该方法中，使用

```
string str = stringFromShow(show); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T21:22:42.167

```
var shows = _repository.OrderBy(s=>s.PublishDate); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T21:32:39.867

您的存储库中的 ListShows 方法应如下所示：

```
public static IEnumerable<Show> ListShows(Comparison<Show> comparison)
{
    List<Show> shows = new List<Show>();
    ... code here ...
    shows.Sort(comparison);
    return shows;
} 
```

然后您可以使用 lambda 执行以下操作（它不像您的示例那么简单，但它有效）：

```
ListShows((first, second) => first.PublishDate.CompareTo(second.PublishDate)); 
```

# objective-c - UIViewControllers 和 UIViews...如何构建一个简单的应用程序

> ID：749402
> 
> 赞同：3
> 
> 时间：2009-04-14T21:19:43.283
> 
> 标签：objective-c, uiview, uiviewcontroller

我对需要多少个控制器以及何时可以将 UIViews 加载到同一个控制器中而不是为两个单独的 UIViews 使用两个控制器感到有些困惑。

这是我目前的情况。我有一个简单的应用程序，它在开始屏幕上接收信息，然后根据来自用户的信息（通过 UIPicker 和文本字段），它将翻转动画显示到一个新视图，该视图是以下两种选择之一：ViewA 或视图 B。

现在，我有一个根控制器 GenController.view 在启动后加载到 UIWindow 中。然后在GenController中，在ViewDidLoad方法中，我创建了另一个控制器GetInfoController的实例，并将Subview插入到self.view中，此时self就是GenController的原始实例。

getInfoController 接收信息，对用户条目执行一些逻辑，然后相应地加载 ViewAController 或 ViewBController 的实例。

ViewAController 和 ViewBController 非常相似，只是 UIView 看起来略有不同。用户与屏幕的交互将是相同的。

我觉得 1）GenController 和 GetInfoController 应该是一样的，但我不确定如何集成它们。我是否将 GetInfoController 直接加载到 UIWindow 中？那我需要在 ViewDidLoad 中做任何事情吗？2) 我应该有一个 viewXController 而不是一个用于 ViewA 和 ViewB 的吗？...如何根据 GetInfo 中的逻辑将不同的 UIView 加载到一个控制器中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-15T02:50:52.863

听起来你会想要使用`UINavigationController`. 它维护了几个`UIViewController`s，并且可以很容易地从一个切换到另一个。

一般来说，一个单一的`UIViewController`维护一个单一的`UIView`。（因此`UIViewController`类上的“视图”属性。）

在第一个`UIViewController`中，当您想切换到第二个`UIViewController`时，您可以执行以下操作：

```
[self.navigationController pushViewController:secondViewController animated:YES]; 
```

# c - 如何关闭来自 gcc 的错误浮点/长错误消息

> ID：749423
> 
> 赞同：2
> 
> 时间：2009-04-14T21:25:10.507
> 
> 标签：c, gcc, gcc-warning

我最近将我们的代码库从浮点数更改为长变量，发现编译器在我知道仍然错误的区域没有生成错误消息。这导致我将 -Wconversion 添加到编译器标志中。但是，哎呀，这会导致一些虚假的错误消息。在下面的代码段中，我得到了如上所述的错误。我该怎么做才能根据具体情况抑制此消息，或者哄 gcc 对此更聪明？-Wconversion 标志在我们的代码库中生成数千条警告。我将不得不检查它们吗？嗯。

```
#include <stdio.h>
void
takes_a_float  ( float some_num ) {
    printf("float Hello %f\n", some_num );
}
int
main (int argc, char **argv)  {
    float my_boat = 1.0f;
    takes_a_float (  my_boat );
    exit (0);
}

gcc -Wconversion foo.c
foo.c: In function `main':
foo.c:13: warning: passing arg 1 of `takes_a_float' as `float' rather than `double' due to prototype

 $ gcc -v
Reading specs from /usr/lib/gcc/x86_64-redhat-linux/3.4.6/specs
Configured with: ../configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr   /share/info --enable-shared --enable-threads=posix --disable-checking --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-java-awt=gtk --host=x86_64-redhat-linux
Thread model: posix
gcc version 3.4.6 20060404 (Red Hat 3.4.6-10) 
```

**编辑**

正如 John Millikin 所指出的，-Wconversion 标志正在“按设计”工作。（我原以为这是关于类型转换，但事实证明这是关于将真正旧的 C 风格程序转换为 ISO 标准 C。该死。阅读我的 gcc 版本的 gcc 警告文档页面并没有给我希望，但无论如何，我真正想要的是其他一些警告标志，以启用它将在以下代码中正确警告，而不是给出虚假警告。

```
#include <stdio.h>
#include <stdlib.h>

void
takes_a_long  ( long sad_story ) {
    printf("Long %lu\n", sad_story );
}

void
takes_a_float  ( float my_boat ) {
    printf("Float  %f\n", my_boat );
}

int
main (int argc, char **argv)  {

    float   my_boat     = 1.0f;
    long    sad_story   = 1.0L;

    // No warnings wanted
    takes_a_float (my_boat);
    takes_a_long (sad_story);

    // Warnings required
    takes_a_long  (my_boat);
    takes_a_float (sad_story);

    exit (0);
} 
```

**编辑 2**

真正的解决方案是升级我的编译器。出于复杂的原因，这不是公司愿意做的事情（叹气）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-14T21:44:17.950

从[手册页](http://gcc.gnu.org/onlinedocs/gcc-3.4.6/gcc/Warning-Options.html#index-Wconversion-248)（也在[http://lists.apple.com/archives/xcode-users/2008/Jul/msg00720.html](http://lists.apple.com/archives/xcode-users/2008/Jul/msg00720.html)）：

> **-W转换**
> 
> 如果原型导致的类型转换与没有原型时相同参数发生的类型转换不同，则发出警告。这包括定点到浮点的转换，反之亦然，以及改变定点参数的宽度或符号的转换，除非与默认提升相同。

因此，警告的执行与记录的完全相同。如果您想专门检查某些转换，您可以尝试打开`-Wconversion`一次运行，将其记录到文件中，然后搜索`long`->`float`转换。

* * *

此选项显然旨在用于将传统 C 移植到 ISO/ANSI C。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T21:38:33.067

只是从信息页面猜测，你试过`-Wno-traditional-conversion`吗？

编辑：我检查过，它有效，但遗憾的是，这仅适用于 gcc 4.3 和更新版本。从 gcc 4.1 手册页中，您观察到的行为似乎是`-Wconversion`旧版本中应该做的，并且它不会在正常`double -> float`转换时发出警告。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-14T23:15:21.977

我相信您最有可能寻找的标志是**`-Wall`**您可能希望与**`-std=XX`**XX 是 (c89|gnu89|c99|gnu99|...) 之一，和/或可能**`-pedantic`**更烦人的迂腐（或更多一个* lly保持取决于你的心情:)

顺便说一句，您忘记包含 stdlib.h （用于 exit() 原型。

* * *

```
#include <stdio.h>
#include <stdlib.h>

void takes_a_float ( float some_num ) {
    printf("float Hello %f\n", some_num );
}

int main (int argc, char **argv)  {
   float my_boat = 1.0;
   takes_a_float (  my_boat );
   exit( 0 );
} 
```

和我的控制台输出：

* * *

```
mctaylor@tigger:stackoverflow$ gcc -Wall -pedantic long_float.c -o long_float
mctaylor@tigger:stackoverflow$ gcc -v
Using built-in specs.
Target: i486-linux-gnu
...
gcc version 4.3.2 (Ubuntu 4.3.2-1ubuntu12) 
```

* * *

使用**-Wall -pedantic 会**强制您编写干净、明确的代码，并且可以帮助您发现许多潜在的愚蠢错误。祝你好运。

我想知道“缺少警告”消息是否可能是因为 C 类型提升规则。（参见 K&R The C Programming Language，第 2 版，第 2.7 节 -*类型转换*）。只是思考的食物。

我希望这有帮助。

**编辑以添加其他材料**（如下）：

另一种选择或方法是[夹板](http://www.splint.org/) （安全编程 Lint）或[Gimple Software](http://www.gimpel.com/)的 PC-lint / FlexLint，它们是标记*可疑和不可移植结构*的 C 源代码的静态分析的[lint实现。](http://en.wikipedia.org/wiki/Lint_programming_tool)

 ** * *

```
mctaylor@tigger:stackoverflow$ splint sad_story.c 
Splint 3.1.2 --- 07 May 2008

sad_story.c: (in function takes_a_long)
sad_story.c:5:26: Format argument 1 to printf (%lu) expects unsigned long int
                     gets long int: sad_story
  To ignore signs in type comparisons use +ignoresigns
   sad_story.c:5:20: Corresponding format code
sad_story.c: (in function main)
sad_story.c:21:18: Function takes_a_long expects arg 1 to be long int gets
                      float: my_boat
  To allow all numeric types to match, use +relaxtypes.
sad_story.c:22:19: Function takes_a_float expects arg 1 to be float gets long
                      int: sad_story
sad_story.c:12:15: Parameter argc not used
  A function parameter is not used in the body of the function. If the argument
  is needed for type compatibility or future plans, use /*@unused@*/ in the
  argument declaration. (Use -paramuse to inhibit warning)
sad_story.c:12:28: Parameter argv not used
sad_story.c:4:6: Function exported but not used outside sad_story: takes_a_long
  A declaration is exported, but not used outside this module. Declaration can
  use static qualifier. (Use -exportlocal to inhibit warning)
   sad_story.c:6:1: Definition of takes_a_long
sad_story.c:8:6: Function exported but not used outside sad_story:
                    takes_a_float
   sad_story.c:10:1: Definition of takes_a_float

Finished checking --- 7 code warnings 
```

* * *

您还可以在 Gimpel 的[在线测试](http://www.gimpel-online.com/OnlineTesting.html)中尝试使用 FlexLint 中的示例，该示例更清晰、更漂亮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-14T21:54:48.847

我没有收到此警告，我想这是因为我使用的是更新版本的 GCC (4.3.3)。

# java - 如何将泛型与类数组一起使用？

> ID：749425
> 
> 赞同：48
> 
> 时间：2009-04-14T21:25:49.383
> 
> 标签：java, generics

我想创建一个类数组，每个类代表我正在构建的系统中可用的类型。所有涉及的类都是公共超类的子类。所以我想做：

```
Class<? extends SuperClass>[] availableTypes = { SubClass1.class, SubClass2.class }; 
```

这给了我错误：

```
Cannot create a generic array of Class<? extends SuperClass>. 
```

如果我尝试在初始化右侧限定数组的创建，我会收到相同的消息：

```
Class<? extends SuperClass>[] availableTypes = Class<? extends SuperClass>[] { SubClass1.class, SubClass2.class }; 
```

如果我消除泛型资格，我可以编译代码：

```
Class[] availableTypes = { SubClass1.class, SubClass2.class }; 
```

但后来我得到了泛型警告：

类是原始类型。对泛型 Class 的引用应该被参数化。

我正在努力; 我正在努力！:) 另外，在这一点上，即使这没有引起警告，我也会丢失一部分我试图定义的接口。我不想只返回一个任意类的数组；我想返回一个类数组，它们都是特定超类的子类！

Eclipse 有一些非常强大的工具来确定使用哪些参数来修复泛型声明，但在这种情况下它会失败，因为它在处理 Class 时往往会发生这种情况。它提供的“推断通用类型参数”过程根本不会更改代码，只会留下警告。

我可以通过使用 Collection 来解决这个问题：

```
List<Class<? extends SuperClass>> availableTypes = new List<Class<? extends SuperClass>>(); 
```

但是用数组做这件事的正确方法是什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-04-14T21:33:25.467

这似乎有点失败主义，但这样的问题正是大多数人避免混合数组和泛型的原因。由于泛型的实现方式（[类型擦除](http://java.sun.com/docs/books/tutorial/java/generics/erasure.html)），数组和泛型永远不会很好地协同工作。

两种解决方法：

*   坚持使用集合（例如`ArrayList<Class<? extends SuperClass>>`），它和数组一样好用，也允许扩展。
*   在创建数组`@SuppressWarnings("unchecked")`的代码上添加注释以及证明其使用合理性的注释。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-04-14T21:35:45.180

使用此语法：

```
Class<? extends SuperClass>[] avail = new Class[] { SubClass1.class, ... }; 
```

它会给你一个“未经检查”的警告，这是正确的，因为你可能包含一个`Class`不在`SuperClass`数组中扩展的类型的对象。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-04-14T21:44:43.207

使用数组执行此操作的正确方法是使用 Collection。对不起！由于一系列复杂的原因，数组不能很好地与泛型配合使用。数组具有与通用对象不同的协方差模型，这最终会导致您遇到的问题。例如，对于数组，但不是（通常）对于泛型对象，您可以合法地这样做：

```
Object[] myArray = new String[5]; 
```

虽然你不能这样做：

```
LinkedList<Object> myCollection = new LinkedList<String>(); 
```

如果您想了解更多详细信息，可以从优秀的[Generics FAQ中查看](http://www.angelikalanger.com/GenericsFAQ/JavaGenericsFAQ.html)[Arrays In Java Generics页面](http://www.angelikalanger.com/Articles/Papers/JavaGenerics/ArraysInJavaGenerics.htm)

正如 simonn 所说，您也可以按原样使用您的数组，并使用`@SuppressWarnings("unchecked")`来使警告静音。这将起作用，但没有泛型可以为您提供的类型安全。如果您担心的是性能，只需使用 an`ArrayList`这样您就可以在数组周围使用薄包装器，但具有泛型提供的所有类型安全保证。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-14T21:46:53.827

> 但是用数组做这件事的正确方法是什么？

没有类型安全的方法可以做到这一点。**使用集合是正确的方法。**要了解原因，请想象一下是否允许这样做。你可能会遇到这样的情况：

```
// Illegal!
Object[] baskets = new FruitBasket<? extends Citrus>[10];

// This is okay.
baskets[0] = new FruitBasket<Lemon>();

// Danger! This should fail, but the type system will let it through.
baskets[0] = new FruitBasket<Potato>(); 
```

类型系统需要检测添加到数组中的篮子是类型`FruitBasket<? extends Citrus>`还是子类型。FruitBasket 不匹配，应使用`ArrayStoreException`. 但是什么也没有发生！

由于类型擦除，JVM 只能看到数组的运行时类型。在运行时，我们需要将数组类型与元素类型进行比较，以确保它们匹配。数组的运行时组件类型`FruitBasket[]`在类型擦除之后；同样，元素的运行时类型是`FruitBasket`. 不会检测到任何问题——这就是为什么这是危险的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-14T21:35:16.927

问题是创建泛型类型的数组是非法的。解决它的唯一方法是在创建数组时强制转换为泛型类型，但这不是一个很好的解决方案。（请注意，可以*使用*通用数组，而不是创建一个：请参阅[此问题](https://stackoverflow.com/questions/470198/java-generics-and-array-initialization)。）

无论如何，您几乎总是应该使用列表而不是数组，所以我认为您已经想出了最好的解决方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-01T00:57:00.987

类型不安全且带有未经检查的强制转换警告：

```
Class<? extends SuperClass>[] availableTypes =
    (Class<? extends SuperClass>[])
    (new Class[]{ SubClass1.class, SubClass2.class }); 
```

# .net - Interop.Excel.PivotTable 的好教程

> ID：749429
> 
> 赞同：3
> 
> 时间：2009-04-14T21:26:04.920
> 
> 标签：.net, excel

有谁知道是否有任何使用 Interop.Excel.PivotTable 构建数据透视表的好的在线教程？

这是我能找到的仅有的两个：

[http://blogs.msdn.com/andreww/archive/2008/07/25/creating-a-pivottable-programmatically.aspx](http://blogs.msdn.com/andreww/archive/2008/07/25/creating-a-pivottable-programmatically.aspx)

[http://www.dreamincode.net/code/snippet1217.htm](http://www.dreamincode.net/code/snippet1217.htm)

我正在寻找更复杂的例子？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-07-27T04:16:12.230

如果您要编写自己的 COM Excel 代码，则不会使用向导。只需记录数据透视表创建的宏，然后将生成的 VBA 翻译成您的语言（C#？）记录自己玩数据透视表的宏，您很快就会了解如何编写此代码。

一些警告的话：

*   数据透视表 API 有时会在版本之间发生变化，因此在一个安装中有效的内容可能在其他安装中无效。测试！
*   宏代码不能总是直接翻译。记录的宏不会显示隐含的操作顺序和只读问题。如果你卡住了，通常是因为你需要按照正确的顺序做事。这些问题很难解决。EG - 我相信一旦您将图表重新定位到单独的工作表，它们就是只读的，所以最后重新定位！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-06-16T03:42:07.967

您可以使用 interop.Excel 在 MSDN 中阅读

# asp.net - 使用批量插入自动填充sql表，然后导出到xml

> ID：749446
> 
> 赞同：0
> 
> 时间：2009-04-14T21:31:29.930
> 
> 标签：asp.net, sql, xml, automation

我目前正在做一个项目，其中涉及使用批量插入来用天气数据填充 sql 表。

`BULK INSERT TableWeather FROM 'C:\Program Files\EasyWeather\EasyWeather.dat' WITH (FIELDTERMINATOR = ',')`

这似乎工作正常，但我需要每十五分钟执行一次，并且实际上还覆盖了上次的数据，这样表的大小就不会失控。我一直在到处检查，但我对 sql 代码不太方便。我是否需要创建一个存储过程并将其自动化？

我还需要每隔十五分钟将新数据导出为 xml，这将被 swf 用于在 asp.net 网站上显示。

非常感谢任何建议，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-17T16:09:23.533

SQL Server 仍然有老旧的 bcp 实用程序和方便的（相对较新的）sqlcmd 实用程序。不确定它们是否适用于您的版本，但如果可以，我会推荐它。您只需将 bcp 和 sqlcmd 语句放在 Windows 批处理文件中并运行它们。

像这样的东西应该可以工作（你需要修改命令上的开关）......

```
sqlcmd.exe -SMyServer -dMyDatabase -b -Q "delete from TableWeather"
bcp.exe MyDatabase.dbo.TableWeather in C:\Program Files\EasyWeather\EasyWeather.dat -SMyServer -T 
```

有关bcp 和sqlcmd的更多信息，请参阅[此](http://msdn.microsoft.com/en-us/library/ms162773.aspx)[链接。](http://msdn.microsoft.com/en-us/library/aa174646.aspx)

这也可以帮助您处理 XML。使用 sqlcmd 执行存储过程，将数据格式化为 XML 并将其存储在表中，然后使用 bcp 将其导出（bcp 双向。）

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T21:47:30.157

你在使用 SQL Server 吗？如果是这样，您可以使用 SSIS 包来执行此操作。

SSIS 帮助 -->[链接文本](http://weblogs.sqlteam.com/mladenp/articles/10631.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T21:47:46.507

您可以设置 Sql 作业或 windows 调度作业以每 15 分钟运行一次。在进行批量插入之前添加截断语句。

# vb.net - 我应该如何最好地从 VB.net 查询我的数据集？

> ID：749448
> 
> 赞同：4
> 
> 时间：2009-04-14T21:31:44.487
> 
> 标签：vb.net, dataset

我有一个 VB.Net 数据集，其中包含来自多个表的数据。有没有人对如何从数据集中查询数据有什么好的建议。我想在数据集上运行类似 SQL 的查询，以提取适合某个“ `where`”语句的数据。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-14T21:33:41.487

使用`DataTable.Select()`方法。

这是来自官方[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.data.datatable.select.aspx)的一些信息。

正如在后面的文章中所说，Linq 是另一种可能性，可能会给你更多的多功能性，根据你自己的要求，你可能不需要。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-14T21:36:41.027

如果您使用的是 .NET 3.5，则可以使用[LINQ to DataSet](http://msdn.microsoft.com/en-us/library/bb386977.aspx)。

基本上，您使用[DataTableExtensions.AsEnumerable](http://msdn.microsoft.com/en-us/library/system.data.datatableextensions.asenumerable.aspx)（一种扩展方法）来访问行`IEnumerable<DataRow>`，然后您可以使用普通的 LINQ to Object 运算符。[`DataRowExtensions`](http://msdn.microsoft.com/en-us/library/system.data.datarowextensions.aspx)扩展使这更简单。

如果您使用的是强类型`DataSet`，则查询看起来会更好。

我更喜欢这个选项`DataTable.Select`——所有与转义、格式化字符串查询等有关的事情感觉就像一个真正的倒退。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-14T21:36:43.680

您应该尝试使用 Linq。

它将为您提供许多有关查询对象的功能。

尝试在此处获取更多信息：http: [//msdn.microsoft.com/en-us/netframework/aa904594.aspx](http://msdn.microsoft.com/en-us/netframework/aa904594.aspx)

或谷歌的 Linq to DataSets

# asp.net - 在 Asp.Net 应用程序中打印 CrystalReport 报表而不使用 PDF

> ID：749455
> 
> 赞同：3
> 
> 时间：2009-04-14T21:33:11.940
> 
> 标签：asp.net, crystal-reports, printing

我正在开发一个 Asp.Net 3.5 应用程序，我需要打印一些应用程序生成的报告。

我以前使用过 SSRS，但我在设计功能方面遇到了很多问题。因此，我们现在正在寻找 Crystal Reports 作为替代方案。

当我们开始使用 Crystal 时，我们遇到了一个新问题。当单击 Crystal Report 顶部栏中显示的“打印”按钮时，在网页上显示的报告中，它不会显示默认 SO 的打印对话框，而是显示自定义打印页面，然后将报告打印为 PDF。

我知道这个解决方案可能足以满足大多数关于在网络上打印报告的场景。但在我的具体情况下，我不能保证访问我的网络应用程序的客户端机器安装了 PDF 阅读器，比如 Acrobat Reader。而且我不能要求他们安装它才能使用我的应用程序。

因此，我正在寻找一种解决方案，使生成的报告的打印按钮显示默认 SO 的打印对话框，而不是将其打印到 PDF。

你能给我一些解决这个问题的建议吗？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-06-26T18:06:06.623

好的，我要在这里获得死灵法师徽章，所以如果您喜欢答案，请记得投票。我认为这个问题有资格获得该徽章。:)

以下是一些带有一些想法的链接：

[http://aspalliance.com/509](http://aspalliance.com/509)

这里他们说您可以使用服务器端 ReportDocument.PrintToPrinter，但他们说限制是必须指定打印机名称。他们建议您在页面上有一个下拉列表并使用 System.Drawing.Printing.PrinterSettings.InstalledPrinters 作为数据源，以便用户可以选择打印机。我还没有尝试过，但选项 2 似乎更像您正在寻找的。

他们还说您可以使用客户端的javascript window.Print 功能。在我看来，这似乎是一种更好的方法。

[http://www.c-sharpcorner.com/Forums/ShowMessages.aspx?ThreadID=49048](http://www.c-sharpcorner.com/Forums/ShowMessages.aspx?ThreadID=49048)

在此链接中，他们都推荐 PrintToPrinter，但我仍然认为客户端调用是您要寻找的。

# subsonic - 与亚音速的内连接

> ID：749459
> 
> 赞同：2
> 
> 时间：2009-04-14T21:33:58.600
> 
> 标签：subsonic, inner-join

我正在尝试显示与输入到文本框中的姓氏匹配的所有记录。这需要在“volID”列上进行 INNER JOIN，因为有 2 个表。

```
<asp:TextBox ID="lName" runat="server"></asp:TextBox>
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="true" Visible="true"></asp:GridView>
<asp:linkButton ID="btnSubmit" runat="server" onclick="btnSubmit_Click" /> 
```

后面的代码：

```
 protected void btnSubmit_Click(object sender, EventArgs e)
    {
            GridView1.DataSource = new Select("*")
            .From(PastAwardName.Schema)
            .InnerJoin(PastAwardName.VolIDColumn, PastAwardType.VolIDColumn)
            .Where(PastAwardName.Columns.LName).IsEqualTo(this.lName.Text)
            .ExecuteReader();

            GridView1.DataBind();
    } 
```

我试图从 Subsonics 网站上的示例中执行此操作，但无法使其正常工作。收到以下错误。

```
Server Error in '/' Application. 
________________________________________
The objects "dbo.pastAwardNames" and "dbo.pastAwardNames" in the FROM clause have the same exposed names. Use correlation names to distinguish them. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Data.SqlClient.SqlException: The objects "dbo.pastAwardNames" and "dbo.pastAwardNames" in the FROM clause have the same exposed names. Use correlation names to distinguish them.

Source Error: 

Line 30: 
Line 31: 
Line 32:         GridView1.DataSource = new Select("*")
Line 33:             .From(PastAwardName.Schema)
Line 34:             .InnerJoin(PastAwardName.VolIDColumn, PastAwardType.VolIDColumn) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2011-02-16T15:54:20.027

我有一个类似的问题，并通过搜索错误文本“在 FROM 子句中具有相同的公开名称”和 SubSonic 2.2 发现了这个页面。

无论如何，我想我会发布我的代码，它在 Subsonic 2.2 中完美运行并且看起来很干净..

希望有人觉得它有用，因为它让我挠了一阵子！

```
IDataReader reader = new SubSonic.Select(CityMapping.MasterCityColumn, CityMapping.ChildCityColumn, CityMappingTourType.TourTypeCodeColumn)
                .From<CityMapping>()
                .InnerJoin(CityMappingTourType.CityMappingIDColumn, CityMapping.IdColumn)
                .OrderAsc(CityMapping.Columns.MasterCity, CityMapping.Columns.ChildCity, CityMappingTourType.Columns.TourTypeCode)
                .ExecuteReader(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-15T17:07:29.417

我认为您的加入线需要颠倒。

```
.InnerJoin(PastAwardName.VolIDColumn, PastAwardType.VolIDColumn) 
```

应该

```
.InnerJoin(PastAwardType.VolIDColumn, PastAwardName.VolIDColumn) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-28T14:24:16.487

感谢您的回复。它现在使用以下代码工作：

```
private void BuildGridView1()
    {
        GridView1.DataSource = new Select(PastAwardName.Schema.TableName + ".*", PastAwardType.Schema.TableName + ".*")
              .From(PastAwardName.Schema)
              .InnerJoin(PastAwardType.Schema.TableName, PastAwardType.Columns.VolID, PastAwardName.Schema.TableName, PastAwardName.Columns.VolID)
              .Where(PastAwardName.Columns.LName).Like(this.txtSearchName.Text)
              .OrderAsc(PastAwardType.Columns.AwardYear)
              .ExecuteDataSet();
    }

    protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        BuildGridView1();
        GridView1.PageIndex = e.NewPageIndex;
        GridView1.DataBind();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-11T12:01:25.670

只是偶然发现了同样的问题。问题是我不能（或至少不知道如何）在没有像 Brett 提到的那样构建 selectpart 的情况下定义连接中第二个表的列

```
DB.Select(Table1.Schema.TableName + "." + Table1.Columns.Id,
          Table1.Schema.TableName + "." + Table1.Columns.Name,
          Table2.Schema.TableName + "." + Table2.Columns.Caption
         ).From<Table1>()
          .LeftOuterJoin(Table2.Table1_IdColumn, Table1.IdColumn); 
```

有效，但它会很好用

```
DB.Select(Table1.IdColumn, Table2.CaptionColumn)
  .From<Table2>()
  .LeftOuterJoin(Table2.Table1_IdColumn, Table1.IdColumn); 
```

反而

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-09-20T22:19:03.490

所以这个问题的解决方案相当烦人，但它确实有效。您的代码具有这样的 join 语句：

```
.From(PastAwardName.Schema)
.InnerJoin(PastAwardName.VolIDColumn, PastAwardType.VolIDColumn) 
```

如果您更改 InnerJoin 语句中的表顺序，以便您的 from 语句中的表是第二个而不是第一个，它将起作用。

```
.From(PastAwardName.Schema)
.InnerJoin(PastAwardType.VolIDColumn, PastAwardName.VolIDColumn) 
```

很讨厌的行为...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-14T21:45:04.393

查询似乎是正确的，不确定问题是什么。

你可以通过创建一个简单的集合来重写它，然后将它绑定到网格视图，看看你是否得到了同样的错误？

你检查过这个[链接吗？](http://subsonicproject.com/querying/select-queries/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-15T02:03:21.433

我认为我们在 2.2 中修复了这个问题——但我确实记得在 2.1 中也有修复。您是否尝试过使用需要四个参数的 InnerJoin 的重载？

听起来您正在使用 2.1 - 如果是这样，您可以尝试 2.2，因为我认为我们已经对此进行了修复。此外 - InnerJoin 有一些重载，您可以在其中明确告诉它要加入哪些表和列。

# debugging - 如何在 QtCreator 中使用 gdbmacros.cpp？

> ID：749467
> 
> 赞同：1
> 
> 时间：2009-04-14T21:35:54.413
> 
> 标签：debugging, qt, qt4, gdb

我正在尝试在 Linux 上的 QtCreator 中进行调试，并收到以下消息：

> 调试的二进制文件不包含很好地显示 Qt 数据类型所需的信息。
> 
> 您可能想尝试包含该文件
> 
> .../share/qtcreator/gdbmacros/gdbmacros.cpp
> 
> 直接进入你的项目。

将 ~/qtcreator/gdbmacros/gdbmacros.cpp 添加到我的项目文件中没有帮助。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-08-25T19:21:56.327

从“工具”菜单中选择“选项”。在树小部件（左窗格）中，您将找到 QT4 的条目。

右窗格将指示是否检测到 QT（在您的情况下很可能是）以及是否找到调试助手。

如果未找到调试帮助程序代码，您将可以选择“生成调试帮助程序”。单击该选项，您就完成了。

当您最终开始调试代码时，选择 Debug/Views/Debugger。在调试器窗格中使用鼠标右键单击并确保在上下文菜单中选中“使用调试助手”。

这仅在 QT 项目中对我有用，并且仅适用于特定类。例如，QString 显示得很好，但 std::string 不能（std::vector 确实有效）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-04-14T08:10:48.333

作为记录：该信息仅适用于 Qt Creator 1.3.x，并且从 2.0 开始无效，后者在 Linux 和 Window/MinGW 上使用 gdb 的集成 python 脚本。gdb/Mac 仍然使用已编译的调试助手，但加载它们是由 Creator 处理的，就像使用 cdb 来使用 Microsoft 编译器 Windows 编译的二进制文件一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-15T23:18:23.457

请检查 Build&Run -> Build Settings -> Link Debugging Helper 是否被选中，并且您至少有 Qt 4.4。

此外，如果您使用的是 1.0 版之前的候选版本，那么您应该更新到最新的发布版本。当前版本为 1.0，可[在此处](http://www.qtsoftware.com/downloads)获得。

# html - 为什么 ":active" 在 Gecko 框架内不能正常工作？

> ID：749469
> 
> 赞同：0
> 
> 时间：2009-04-14T21:36:11.217
> 
> 标签：html, css, firefox, pseudo-class, firefox-3

在我看来，Gecko 有一个涉及 ":active" 的错误。为了说明，将其放入名为 test.html 的文件中：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "hxxp://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" >

 <head>
  <style type="text/css">
   .clickable {
     border: solid black 1px;
     padding: 2px;
     cursor: pointer;
     -moz-user-select: none;
   }

   .clickable:active {
     background-color: gray;
   }
  </style>
 </head>

 <body>
   <span class="clickable">blah</span>
 </body>
</html> 
```

现在在 FF3 中打开它。跨度应该有点像一个按钮：如果你在它上面按下鼠标，背景会改变颜色。当你 mouseup 时，它会恢复正常。

请注意，即使您在跨度内按下鼠标，将鼠标移到浏览器窗口外，然后在那里释放它，这也有效：在鼠标按下的部分，背景是灰色的。释放后，跨度恢复正常。

到目前为止，一切都很好。但是尝试将其包装在一个框架中：

```
<html>
  <frameset cols="50%, 50%">
    <frame src="test.html" />
    <frame src="http://google.com" />
  </frameset>
</html> 
```

加载*那个*。现在，当您在跨度内按下鼠标时，将鼠标移到框架外的任何位置，然后鼠标向上，跨度将永远保持灰色——即，CSS 认为它永远是“:active”。

这似乎只发生在一个框架中，并且该问题不会出现在基于 KHTML 的浏览器中。

有人有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-14T22:57:51.503

您没有正确的文档类型来支持框架。这可能是问题所在。

# java - jgoodies 绑定 + 间接更改

> ID：749470
> 
> 赞同：2
> 
> 时间：2009-04-14T21:36:14.820
> 
> 标签：java, data-binding, jgoodies

我在试图理解在我的应用程序中使用 JGoodies 绑定的适当方法时大脑抽筋。

我有一个 Article 类，它是一个具有只读属性的 bean。`Article`是一个“普通”bean，并且不管理属性侦听器，因为属性永远不会改变。我有一个 Swing JPanel，我想用它来显示文章的某些属性。可以在不同时间查看不同的文章对象。

我正在寻找通过一个或多个对象执行以下操作的东西 (X)：

1.  X 包含当前查看的文章。我可以调用`X.setArticle()`并`X.getArticle()`更改为不同的文章。没有其他方法可以更改当前查看的文章，我必须通过 X 才能知道我正在更改它。
2.  当我设置我的 JPanel 时，我想使用 X 创建只读 JTextFields，这些字段绑定到当前查看文章的各种属性（标题、作者等）
3.  （从#1 和#2 开始）任何时候调用 X.setArticle()，文本字段的内容都会自动更新。

我尝试使用 BeanAdapter 从包含在 ValueHolder 中的 Article 中提取属性模型，并尝试使用 BasicComponentFactory.createTextField() 创建文本字段，这一切似乎都有效，*只是*我`com.jgoodies.binding.beans.PropertyUnboundException`抱怨我的 Article 类具有未绑定的属性。呸！我知道，我只是不知道如何找到正确的“管道”来处理它。每个`Article`都是不可修改的，但当前查看的文章可能指向不同的文章。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T22:34:24.617

我想到了。

我做这样的事情：

```
 // on setup:

 BeanAdapter<Article> adapter = new BeanAdapter<Article>((Article)null,
    false);
 // the "false" in the constructor means don't try to observe property
 // changes within the Article, but we still can observe changes
 // if the Article itself is replaced with a new one.

 JTextField tfAuthors = BasicComponentFactory.createTextField(
     adapter.getValueModel("authors"));
 JTextField tfTitle = BasicComponentFactory.createTextField(
     adapter.getValueModel("title")); 
```

稍后，当我更改 Article 对象时，我只是这样做：

```
 public void showArticle(Article article)
 {
     adapter.setBean(article);
 } 
```

屏幕上的所有内容都更新得非常好。

# asp.net - 为什么我不能在模块中的 HttpContext 中设置一个项目，然后将它返回到我的处理程序中？

> ID：749474
> 
> 赞同：1
> 
> 时间：2009-04-14T21:37:54.940
> 
> 标签：asp.net, httphandler, httpmodule

在一个 HttpModule 中，我将一个 Item 放在 Context 中，如下所示：

```
HttpContext.Current.Items.Add("MyKey", "Hello world!"); 
```

直接在此代码下（仍在模块内），我可以从集合中检索此字符串，因此我知道它已添加。

快进到我的实际处理程序（Web 表单——.aspx）。我试图取回这个项目：

```
string myString = HttpContext.Current.Items["MyKey"].ToString(); 
```

可悲的是，它是 NULL - 该项目不存在。

我旋转了集合，当它到达我的处理程序时，Items 集合有两个键：

*   会话
*   AspSessionIDManagerInitializeRequestCalled

在模块中设置 Item 后，我调用 RewritePath。不确定这是否与它有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-02-24T15:03:16.500

不太清楚您的代码流程，但尝试使用 HttpContext.Items 而不是 HttpContext.Current.Items 集合。查看此链接 - [http://odetocode.com/articles/111.aspx](http://odetocode.com/articles/111.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-09-18T16:09:48.553

我的问题是重定向潜入了那里。因此，我设置值的请求和读取值的请求实际上是*两个单独的请求*。它的速度如此之快，以至于我没有注意到，即使在调试时也是如此。

# ruby-on-rails - 使用 ActiveRecord 在 Rails 中测试具有多个数据库连接的模型

> ID：749477
> 
> 赞同：3
> 
> 时间：2009-04-14T21:39:50.613
> 
> 标签：ruby-on-rails, ruby, testing, activerecord, database-connection

在 Rails 中测试使用不同数据库连接的模型的最佳方法是什么。例如，我有一个只读模型 FooBar：

```
class FooBar < ActiveRecord::Base
  establish_connection configurations['foo_bars']
  # ...
end 
```

那里有什么好的约定、技巧或插件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-16T04:22:53.773

根据我的经验，一旦建立连接，您就可以像对待任何其他模型一样对待模型。由于您只是在使用将简化一些测试的数据，因为您不需要测试数据验证。

显然，因为 Rails 正在与来自两个不同模型的两个不同数据库进行通信，所以您将无法在数据库之间进行连接，因此那里也没有什么可以测试的。

那么，回答这个问题：测试使用第二个数据库的模型的最佳方法是什么？我想说，如果它是你唯一的数据库，你会用同样的方式测试它。

我发现在包装我的遗留数据库的模型中，我必须在代码中添加一些特殊的联系，使事情变得更加“Rails-y”，并使视图和控制器代码看起来像在那里`has_one`并`belongs_to`在那里键入代码。我确实有执行这些自定义方法的测试。

希望有帮助。

# javascript - 确定 HTML 元素是否在视口中的最有效方法？

> ID：749481
> 
> 赞同：1
> 
> 时间：2009-04-14T21:40:42.717
> 
> 标签：javascript, prototypejs

我目前正在使用原型，其中一些代码如下：

```
function in_viewport(foo) {
  var offset = foo.viewportOffset().top;
  var viewportHeight = document.viewport.getHeight();
  if (offset > (0 - foo.getHeight()) && offset < viewportHeight) {
    return true;
  } else {
    return false;
  }
} 
```

有没有更快/更容易/更高效/更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T22:55:19.823

使用 Dojo 等各种 JavaScript 库，您可以获得非常具体且跨浏览器兼容的代码，您可以使用这些代码来执行此操作。它仍然不会比你那里的漂亮得多。如果你从头开始，它会变得更加复杂，因为你有浏览器怪癖、浏览器版本怪癖、必须处理滚动等等。

# mysql - 如何构建调查数据？

> ID：749486
> 
> 赞同：2
> 
> 时间：2009-04-14T21:42:37.067
> 
> 标签：mysql, winforms, survey

注意：这不是[这个问题](https://stackoverflow.com/questions/534737/best-way-to-store-survey-data)

我的任务是构建一项调查，我们的客户服务人员可以使用该调查从客户那里获取有关我们服务等的信息。

我的问题是如何将问题/答案存储在存储问题的数据库中，如下所示：

*   布尔问题1
    *   if (false): 字符串 question2（通常是 question1 为假的原因）

这很容易，但是问题可以嵌套多个级别：

*   布尔问题1
    *   if (false) 布尔问题2
        *   if (true) 字符串问题3
        *   if (false) 字符串问题4

如果我不必将它存储在数据库中，我会将问题（实际上是整个调查）表示为一个组合，但我不知道如何存储这样的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-14T22:08:20.950

如果您的问题形成树而不是图，则[在 sql 中表示分层数据](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)有两种常用方法。

**邻接列表模型模型**需要重复的自连接来查找孩子（孩子的孩子......孩子的）。如果你有一个 ORM，比如 Hibernate，ORM 将负责做足够的自连接来带回一个问题及其子答案。如果没有 ORM 来执行此操作，您将不得不动态地将自联接添加到查询中，或者执行多个查询，针对前一个结果集中的每一行进行一个查询。

**嵌套集模型**，通常归因于 Joe Celko，允许您在一次选择中获得一整棵树。但这意味着添加和删除节点更加复杂，需要更新所有行。

在邻接列表中，您可以有一个这样的问题表`(id, question text, id_next_if_true, id_next_if_false)`。这与经典的邻接表不同，因为父节点不是持有 parent_id 的孩子，而是持有两个孩子的 id，或者为 null。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T21:53:05.497

我想我会做这样的事情：

```
Table: Questions
int id
string question

Table: Question Answer Map
int questionId
bool answer
int nextQuestion 
```

如果问题是多项选择，您可以使用 int、char 或 string 作为答案，而不是 bool。

# .net - 有没有办法找出在 .NET 中引用我的对象的内容？

> ID：749490
> 
> 赞同：0
> 
> 时间：2009-04-14T21:45:05.610
> 
> 标签：.net, garbage-collection

基本上，我有一个我认为应该被垃圾收集的对象，但事实并非如此。我很确定所有对它的引用都从我在代码中看到的内容中消失了，但由于某种原因，它并没有被破坏。

有什么方法可以找出是什么挟持了我的物品？在 Visual Studio 2005 中似乎没有办法做到这一点。也许是 WinDbg？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-14T21:56:55.907

是的，您可以使用 WinDbg + SOS 来跟踪您的托管堆。 [这个链接](http://blogs.msdn.com/ricom/archive/2004/12/10/279612.aspx)应该让你开始。

注意 - 您不必使用 VADump（步骤 1 到 3）来获取转储文件，Visual Studio 调试器为附加进程内置了此功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T21:48:52.527

[.net 2.0 的 CLR 探查器](http://www.microsoft.com/downloads/details.aspx?FamilyId=A362781C-3870-43BE-8926-862B40AA0CD0&displaylang=en)

如果您不是 2.0 版，请查看其他版本

不久前，这篇文章还帮助我完成了一个项目，请查看

[http://msdn.microsoft.com/en-us/library/ms404247.aspx](http://msdn.microsoft.com/en-us/library/ms404247.aspx)

# asp.net - 肥皂后故障

> ID：749491
> 
> 赞同：0
> 
> 时间：2009-04-14T21:45:32.923
> 
> 标签：asp.net, web-services, vb6

所以，我正在尝试使用肥皂与网络服务进行通信并得到错误。这个特定问题令人沮丧的是，它在我的本地 web 服务副本上运行良好（是的，我尝试关闭我的防火墙），并且在以前版本的 web 服务和客户端上运行良好。我怀疑我可以（尽管我必须查找如何执行此操作）向客户端发送的内容添加一个操作参数。但是，我很好奇为什么以前没有它也能工作。

**编辑澄清**：我*认为*相关代码在停止工作和工作时是相同的（因为我检查了程序的旧版本并且遇到了同样的问题并且相关代码是相同的......除非我错过了什么微妙的）。我*知道*本地副本和远程副本上的实际服务器程序是相同的，即使它只在本地工作。因此，我怀疑我可以更改某种奇怪的配置设置以使其正常工作。

错误消息：“soap:ClientUnable to handle request without a valid action parameter. 请提供有效的肥皂动作。”

VB客户端代码

```
'WEB_SERVICE_URL_CONST = http://site.com/foo.asmx
'domDoc.xml = <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><soap:Body><TestConnection xmlns="http://site.com"/></soap:Body></soap:Envelope>

Dim oXml As New XMLHTTPRequest
oXml.Open "POST", WEB_SERVICE_URL_CONST, False, "\"
oXml.setRequestHeader "Content-Type", "text/xml"
oXml.send domDoc.xml 
```

C# 服务器代码

```
[WebMethod]
        public int TestConnection()
        {
            return 1;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-14T21:55:11.187

你确定前两行在真实版本中没有被注释掉吗？示例代码似乎对 WEB_SERVICE_URL_CONST 和 domDoc.xml 没有任何价值，空的 Soap 请求确实不会指定任何操作？

编辑：我发现“以前版本的 web 服务和客户端可以正常工作”有点令人困惑。如果你真的改变了客户端和服务器，那么哪一部分没有改变？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-15T17:18:23.493

问题出在`xmlns="http://site.com"`代码上。当我在本地测试时，我`xmlns="http://localhost"`错误地使用了。事实上，这不应该在客户端或服务器上更改（在服务器中，这将是`WebService(Namespace =...)`），无论我在哪里测试......但如果它确实发生了变化，客户端和服务器需要匹配。

# c# - C#：如何配置 string[] 以接受整个字符串的输入，就像控制台的主入口点接受它分解的方式一样？

> ID：749501
> 
> 赞同：0
> 
> 时间：2009-04-14T21:51:43.987
> 
> 标签：c#, .net, winforms, console

### 完全重复：

> [在 C# 中将包含命令行参数的字符串拆分为 string[]](https://stackoverflow.com/questions/298830/split-string-containing-command-line-parameters-into-string-in-c)

* * *

C#：如何配置 string[] 以接受整个字符串的输入，就像控制台的主入口点接受它分解的方式一样？

当您执行用 c# 制作的控制台应用程序时，它的 main 方法接受输入到其中的任何其他参数，同时执行到它的 string[] args 参数分解为 args[] 中的数组。

如果你不使用控制台应用程序，你怎么能完成同样的事情呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-14T22:01:28.753

Windows 命令 API 处理将可执行文件名称之后的所有内容分解为一个数组，并将其传递给可执行文件。因此，从 .NET 的角度来看，运行时只接受来自调用者的已拆分字符串。

为了模仿参数字符串的拆分方式，您需要在引号外的空格上进行拆分。有几种方法可以做到这一点。[这里已经介绍了](https://stackoverflow.com/questions/298830/split-string-containing-command-line-parameters-into-string-in-c/298990#298990)一个非常好的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T21:56:08.953

我对[Mono.GetOptions](http://www.talios.com/command_line_processing_with_monogetoptions.htm)很幸运。我不得不将它从 Mono 项目中复制出来，并将其作为项目添加到我的解决方案中，但效果很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T21:58:31.490

我将对此采取不同的策略...您的意思是您想在 Windows 窗体应用程序中获取参数，就像在控制台应用程序中一样？

只需将您的 Main() 替换为

```
static void Main ( string[] args ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-14T22:17:01.383

你的意思是像[params](http://msdn.microsoft.com/en-us/library/w5zay9db(VS.71).aspx)？不同数量的方法参数的分解字符串？

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-04-14T21:53:10.910

字符串.拆分（）？

# ios - 如何将 .plist 文件中的数据结构读入 NSArray

> ID：749504
> 
> 赞同：49
> 
> 时间：2009-04-14T21:52:47.447
> 
> 标签：ios, objective-c, iphone, cocoa-touch, plist

我正在使用以下内容手动创建数据结构：

```
NSDictionary* league1 = [[NSDictionary alloc] initWithObjectsAndKeys: @"Barclays Premier League", @"name",
                 @"Premier League", @"shortname",
                 @"101", @"id", nil];
NSDictionary* league2 = [[NSDictionary alloc] initWithObjectsAndKeys: @"Coca-Cola Championship", @"name",
                 @"Championship", @"shortname",
                 @"102", @"id", nil];
NSDictionary* league3 = [[NSDictionary alloc] initWithObjectsAndKeys: @"Scottish Premier League", @"name",
                 @"SPL", @"shortname",
                 @"201", @"id", nil];
NSDictionary* league4 = [[NSDictionary alloc] initWithObjectsAndKeys: @"Champions League", @"name",
                 @"UCL", @"shortname",
                 @"501", @"id", nil];

contentArray = [[NSArray alloc] initWithObjects:

                [[NSDictionary alloc] initWithObjectsAndKeys: @"English", @"category", [[NSArray alloc] initWithObjects: league1, league2, nil], @"leagues", nil],
                [[NSDictionary alloc] initWithObjectsAndKeys: @"Scottish", @"category", [[NSArray alloc] initWithObjects: league3, nil], @"leagues", nil],
                [[NSDictionary alloc] initWithObjectsAndKeys: @"Tournaments", @"category", [[NSArray alloc] initWithObjects: league4, nil], @"leagues", nil],
                nil];

[league1 release];
[league2 release];
[league3 release];
[league4 release]; 
```

但是，我认为如果从文件中读取它会更好。所以我创建了具有以下结构的文件leagues.plist：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
    <array>
        <dict>
            <key>category</key>
            <string>English</string>
            <key>leagues</key>
            <array>
                <dict>
                    <key>name</key>
                    <string>Barclays Premier League</string>
                    <key>shortname</key>
                    <string>Premier League</string>
                    <key>id</key>
                    <string>101</string>
                </dict>
                <dict>
                    <key>name</key>
                    <string>Coca-Cola Championship</string>
                    <key>shortname</key>
                    <string>Championship</string>
                    <key>id</key>
                    <string>102</string>
                </dict>
            </array>
        </dict>
        <dict>
            <key>category</key>
            <string>Scottish</string>
            <key>leagues</key>
            <array>
                <dict>
                    <key>name</key>
                    <string>Scottish Premier League</string>
                    <key>shortname</key>
                    <string>SPL</string>
                    <key>id</key>
                    <string>201</string>
                </dict>
            </array>
        </dict>
        <dict>
            <key>category</key>
            <string>Tournaments</string>
            <key>leagues</key>
            <array>
                <dict>
                    <key>name</key>
                    <string>Champions League</string>
                    <key>shortname</key>
                    <string>UCL</string>
                    <key>id</key>
                    <string>501</string>
                </dict>
            </array>
        </dict>
    </array>
</plist> 
```

我如何读入这个文件。我尝试了各种方法，但没有任何效果。我什至不知道我是否在寻找文件的正确位置。作为参考，我正在尝试以下方法：

```
NSString* errorDesc = nil;
NSPropertyListFormat format;
NSString* plistPath = [[NSBundle mainBundle] pathForResource:@"league" ofType:@"plist"];
NSData* plistXML = [[NSFileManager defaultManager] contentsAtPath:plistPath];
contentArray = (NSArray*)[NSPropertyListSerialization
                                     propertyListFromData:plistXML
                                     mutabilityOption:NSPropertyListMutableContainersAndLeaves
                                     format:&format
                                     errorDescription:&errorDesc];

if (!contentArray) {
    NSLog(errorDesc);
    [errorDesc release];
} 
```

或者

```
NSString* plistPath = [[NSBundle mainBundle] pathForResource:@"league" ofType:@"plist"];
contentArray = [NSArray arrayWithContentsOfFile:plistPath]; 
```

或者

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);
NSString *documentsPath = [paths objectAtIndex:0];

NSString *fooPath = [documentsPath stringByAppendingPathComponent:@"leagues.plist"];
NSLog(fooPath);
contentArray = [NSArray arrayWithContentsOfFile:fooPath];
NSLog(@"%@",contentArray); 
```

这终于把我逼疯了。请帮忙！

非常感谢你

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2009-04-15T05:56:17.347

```
NSString* plistPath = [[NSBundle mainBundle] pathForResource:@"league" ofType:@"plist"];
contentDict = [NSDictionary dictionaryWithContentsOfFile:plistPath]; 
```

这个答案是正确的 - 你确定你的文件在应用程序中吗？您是否将它添加到您的项目中，并检查它是否被复制到您的应用程序包中？如果不是，则可能是文件未添加到您正在构建的目标中，这是一个容易犯的错误，尤其是在您有多个目标的情况下。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2011-06-07T12:45:22.777

`plist`如果位于项目的资源文件夹中，请使用此代码。

```
 NSString *sourcePath = [[NSBundle mainBundle] pathForResource:@"league"    ofType:@"plist"];
 contentArray = [NSArray arrayWithContentsOfFile:sourcePath]; 
```

如果在`plist`应用程序的文档目录中，请使用：

```
 NSArray *paths = 
NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *basePath = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;

NSString *plistName = @"league";
NSString *finalPath = [basePath stringByAppendingPathComponent: 
                       [NSString stringWithFormat: @"%@.plist", plistName]];

contentArray = [NSArray arrayWithContentsOfFile:finalPath]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-17T13:56:48.103

我遇到了这个问题，但它不起作用，因为我将 pList 中的结果放入应该是字典的数组中，即

```
NSString* plistPath = [[NSBundle mainBundle] pathForResource:@"VehicleDetailItems" ofType:@"plist"];
NSDictionary *dict = [[NSDictionary alloc] initWithContentsOfFile:plistPath]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-15T08:16:02.767

肯德尔是正确的。

根据我的经验，您需要将文件添加到 xcode 中的“资源”文件夹中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-17T08:50:31.963

为了完整起见，肯德尔和本特福德是完全正确的。但是，在我的示例中， contentArray 是一个属性，并且在方法结束时它超出了范围，因为**arrayWithContentsOfFile**创建了一个自动释放的对象。

为了使这项工作正常，我需要做 3 件事：

1.  将文件放在资源文件夹中

2.  正确命名文件（是leagues.plist 而不是league.plist）

3.  使用**[[NSArray alloc] initWithContentsOfFile:plistPath)] 读取文件；**

第三部分创建了一个分配的 NSArray，当你退出这个函数的范围时它不会释放......当然，这需要在 dealloc 函数中释放。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-08-28T06:08:38.157

只是补充。我遇到了同样的问题，建议的解决方案帮助我解决了问题，但是我不确定我是否真的使用了确切的解决方案。在我的情况下，问题是 .plist 文件被添加到不同的目标（之前添加了一个新目标）。因此解决方案是 .plist > Get Info > Targets，并确保将其添加到正确的目标，以便在安装时将其复制到设备。该死的，如果我能尽快发现这一点，我会节省很多时间。希望这也有帮助。问候！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-10T12:53:36.363

如果该文件未添加到资源文件夹中，而仅放置在您的文档目录中。你可以这样做

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *path = [documentsDirectory stringByAppendingPathComponent:@"file.plist"];
NSMutableArray *arrContentsplist = [[NSMutableArray alloc] initWithContentsOfFile:path]; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-14T10:16:29.047

此代码有效

```
NSString *plistPath = [[NSBundle mainBundle] pathForResource:@"plist-name" ofType:@"plist"];
NSDictionary *Dictionary= [[NSDictionary alloc]initWithContentsOfFile:plistPath];
NSLog(@" current version CFBundleVersion = %@",[Dictionary valueForKey:@"CFBundleVersion"]); 
```

# iphone - UITextView - 如何使它看起来像在 IB 中？

> ID：749507
> 
> 赞同：0
> 
> 时间：2009-04-14T21:54:35.353
> 
> 标签：iphone, cocoa-touch

我正在从我的代码中初始化一个文本视图，而不是从界面构建器中，它似乎只是一个白色矩形。我希望它具有与界面构建器中相同的圆形形状。我怎样才能做到这一点？

关于 UITextView 的相同问题。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-15T05:58:58.557

即使在 IB 中，文本视图也是矩形的。UITextField 具有圆角。为此，只需将 UITextField 的borderStyle 属性设置为 UITextBorderStyleRoundedRect

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T22:05:57.133

您可能会将 UITextView 与 UITextField 混淆。

UITextField 有一个可选的圆角矩形边框。UITextView 只是文本，没有边框。您必须将自己的边框带到聚会中并将其放在 UITextView 后面。

# java - java可以在solaris中调用脚本重启java吗？

> ID：749514
> 
> 赞同：0
> 
> 时间：2009-04-14T21:56:20.510
> 
> 标签：java, solaris

我们有一个运行 webapp 的 jboss 应用服务器。我们需要在 UI 的某处实现一个“重启”按钮，它会导致整个应用服务器重启。我们幼稚的实现是使用重启命令调用我们的 /etc/init.d 脚本。这将关闭我们的应用程序服务器，然后重新启动它。

但是，似乎当 java 进程关闭时，运行重新启动脚本的子进程也会死掉，然后才到达脚本中再次启动应用服务器的位置。

我们尝试了在调用脚本的地方添加“&”的变体，但这没有帮助。是否有一些地方可以触发脚本并在不终止脚本进程的情况下死亡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T22:00:09.737

尝试使用该`nohup`命令从您通过 Java 执行的脚本中运行某些内容。也就是说，如果您从 Java 执行的脚本当前运行以下命令：

```
/etc/init.d/myservice restart 
```

然后将其更改为：

```
nohup /etc/init.d/myservice restart 
```

此外，请确保您没有被 Java 进程截获的 stdin、stdout 或 stderr。这可能会导致问题。因此，也许试试这个（假设 bash 或 sh）：

```
nohup /etc/init.d/myservice restart >/dev/null 2>&1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-09-08T14:28:31.663

在重启脚本中设置您的信号处理程序以使用陷阱忽略您的信号：

```
trap "" 2 #  ignore SIGINT
trap "" 15 # ignore SIGTERM 
```

完成此操作后，您需要在需要时使用其他信号终止重启脚本，可能是 SIGKILL。

# c++ - 如何将图像从 URL 下载到本地目录？

> ID：749517
> 
> 赞同：10
> 
> 时间：2009-04-14T21:57:01.493
> 
> 标签：c++, http, download

我在 Win32 上使用没有 .NET 的 C++，如何通过 HTTP 从网站下载图像而无需重新发明轮子？是否有提供单一功能的 API 或库来执行此操作？

[http://mywebsite/file.imgext](http://mywebsite/file.imgext) --> C:\path\to\dir\file.imgext

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T17:14:27.457

WinInet API 比您想象的要容易

这是一个完整的win32控制台程序。可以使用 VS 2010 Express 构建并下载 windows SDK 以获取 WinInit。

* * *

```
// imaged.cpp : Defines the entry point for the console application.
//
// Copy file from internet onto local file
//      Uses Wininet API
//    program takes 1 mandatory command line argument - URL string
//    it downloads ito the current directory, or whatever is passed
//    as the second parameter to DownloadURLImage.
//    optional parameter, the name of the file (excluding path), by default it uses the
//    filename from the URL string.

#include "stdafx.h"
#include <iostream>
#include <windows.h> 
#include <WinInet.h>  // from SDK
#include "string.h"
//#include<TCHAR.H>
//#include "Tchar.h"
using namespace std ;

int convertURLtofname (TCHAR * szURL, TCHAR * szname )
// extract the filename from the URL 
{
    char aszfilename [100];
    HRESULT result;
    char achar[3], aszURL [100];
    size_t nchars, i, j;
    int fresult;

    fresult = 0;

    nchars= _tcslen(szURL);
    i= nchars -1;
    while ((i > 0) && (szURL[i] != '/') && (szURL[i] != '\\'))  {i--;}
    j= 0; i++;
    while (i < nchars) { szname [j++]= szURL[i++]; }
    szname[j]=_T('\0');

//  wcstombs ( aszfilename, szname, 100 );
//     cout << aszfilename << endl;
//----------------------------------------------
    return fresult ;
}

int determinepathfilename (TCHAR * szURL, TCHAR * szpath, TCHAR * szname, TCHAR * szpathfilename)
{  
// use path and filename when supplied.  If filename (e.g. funkypic.jpg) is not supplied, then the
// filename will be extracted from the last part of the URL
    int result ;
    result= 0;
    TCHAR szname_copy [100] ;

       if ((szname == NULL) || (szname[0] == '\0'))
            convertURLtofname (szURL, szname_copy);
       else
            _tcscpy (szname_copy, szname);

        if ((szpath == NULL) || (szpath[0] == '\0'))
                _tcscpy (szpathfilename, szname_copy);
        else
        {
            _tcscpy (szpathfilename, szpath);
            _tcscat (szpathfilename, szname_copy);
        }
    return result ;
}

bool GetFile (HINTERNET hOpen, // Handle from InternetOpen()
                    TCHAR *szURL,        // Full URL
                    TCHAR * szpath,
                    TCHAR * szname)   
{
    DWORD dwSize;
    TCHAR szHead[15];
    BYTE * szTemp[1024];
    HINTERNET  hConnect;
    FILE * pFile;
    TCHAR  szpathfilename [100] ;

    szHead[0] = '\0';

    if ( !(hConnect = InternetOpenUrl( hOpen, szURL, szHead, 15, INTERNET_FLAG_DONT_CACHE, 0)))
    {
        std::cout << "Error: InternetOpenUrl" << std::endl;
        return 0;
    }

    determinepathfilename (szURL, szpath, szname, szpathfilename);

    if  ( !(pFile = _tfopen (szpathfilename, _T("wb") ) ) )
    {
        std::cerr << "Error _tfopen" << std::endl;
        return false;
    }
    do
    {
        // Keep copying in 1024 bytes chunks, while file has any data left.
        // Note: bigger buffer will greatly improve performance.
        if (!InternetReadFile (hConnect, szTemp, 1024,  &dwSize) )
        {
            fclose (pFile);
            std::cerr << "Error InternetReadFile" << std::endl;
            return FALSE;
        }
        if (!dwSize)
            break;  // Condition of dwSize=0 indicate EOF. Stop.
        else
            fwrite(szTemp, sizeof (BYTE), dwSize , pFile);
    }   // do
    while (TRUE);
    fflush (pFile);
    fclose (pFile);

    return TRUE;
}

int DownloadURLImage (TCHAR * szURL, TCHAR * szpath, TCHAR * szname)
{   int result ;

    HINTERNET hInternet;

    result= 0;

    hInternet= InternetOpen (_T("imaged"),
                                INTERNET_OPEN_TYPE_DIRECT,  //__in  DWORD dwAccessType
                                NULL,                       //__in  LPCTSTR lpszProxyName,
                                NULL,                       //__in  LPCTSTR lpszProxyBypass,
                                NULL                        //_in   DWORD dwFlags
                            );

    GetFile (hInternet, szURL, szpath, szname) ; 
    InternetCloseHandle(hInternet);
    return result ;
}

int _tmain(int argc, _TCHAR* argv[])
{
    if (argc == 2)
    {
        DownloadURLImage (argv[1], NULL, NULL);
        //DownloadURLImage (argv[1], _T"C:/", NULL);
    }
    else if (argc == 3)
    {
        DownloadURLImage (argv[1], NULL, argv[2]);
        //DownloadURLImage (argv[1], _T"C:/", argv[2]);
    }
    else
    {
        cout << "Usage: imaged <image URL>" << endl ;
    }
    system("pause") ;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-14T22:09:42.040

你可以使用[cURLpp](http://curlpp.org/)

我还没有使用它，但是[example20](http://curlpp.org/index.php/examples/70-example-20)看起来可以解决你的问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-20T01:04:00.517

如果您想要一个简单的解决方案，请使用这个非常简单的衬里：

```
system("C:\\Path\\To\\Wget\\wget.exe http://pixelcaster.com/yosemite/webcams/ahwahnee2.jpg -O C:\\Users\\Me\\Desktop\\ahwahnee2.jpg"); 
```

使用 wget for windows

```
choco install wget 
```

见 Chocolatey.org

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-14T22:02:13.367

使用[Windows Http 服务 API](http://msdn.microsoft.com/en-us/library/aa384273(VS.85).aspx)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-14T22:14:20.047

您可以在 C++ 中使用[WinInet](http://msdn.microsoft.com/en-us/library/aa385331(VS.85).aspx)或[WinHTTP类。](http://msdn.microsoft.com/en-us/library/aa384273(VS.85).aspx)这些是本地 Win32 API，抽象了一些从 Internet 发送和接收文件的工作。

我已经成功地使用 WinInet 来做你想做的事情。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-14T22:08:48.343

如果启动一个新进程没问题，你可以看看[WGET](http://gnuwin32.sourceforge.net/packages/wget.htm)。（即使没有，资源也是可用的；您可以在那里查看它是如何实现的。）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-25T09:16:32.167

现在使用[POCO](http://sourceforge.net/projects/poco/)。:-)

# sharepoint - 设置 SharePoint+Silverlight 蓝图同事查看器 Web 部件

> ID：749519
> 
> 赞同：0
> 
> 时间：2009-04-14T21:57:14.800
> 
> 标签：sharepoint, silverlight-2.0, web-parts, blueprint

我正在尝试让 Silverlight 同事查看器 webpart 在我的测试服务器上工作。silverlight 播放器呈现查看器，但在尝试访问 WCF 服务时失败。下面的错误被 IE 8 捕获。

> 网页错误详情
> 
> 用户代理：Mozilla/4.0（兼容；MSIE 8.0；Windows NT 5.2；Trident/4.0；.NET CLR >1.1.4322；.NET CLR 2.0.50727；.NET CLR 3.0.04506.30；InfoPath.2；.NET CLR > 3.0.4506.2152；.NET CLR 3.5.30729) 时间戳：2009 年 4 月 14 日星期二 21:45:18 UTC
> 
> 消息：Silverlight 2 应用程序中的未处理错误操作期间发生异常，导致结果无效。检查 InnerException 以获取异常详细信息。在 System.ComponentModel.AsyncCompletedEventArgs.RaiseExceptionIfNecessary() 在 SL.XAML.ColleagueViewer.Proxies.GetUserProfileInfoCompletedEventArgs.get_Result() 在 SL.XAML.ColleagueViewer.Page.proxy_GetUserProfileInfoCompleted(Object sender, GetUserProfileInfoCompletedEventArgs e) 在 SL.XAML.ColleagueViewer.Proxies。 SocialNetworkingClient.OnGetUserProfileInfoCompleted（对象状态）行：1 字符：1 代码：0 URI： [http://mytestsite/_layouts/1033/init.js?rev=ck%2BHdHQ8ABQHif7kr%2Bj7iQ%3D%3D](http://mytestsite/_layouts/1033/init.js?rev=ck%2BHdHQ8ABQHif7kr%2Bj7iQ%3D%3D)

我已将 silverlight 的所有必要修改复制到我的 web.config 并在我的服务器上运行 install.bat 文件。

任何人都有任何想法。如果需要更多详细信息，请发表评论，我会尽力提供。

谢谢，乔什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-20T00:58:00.733

首先，确保在您的 silverlight 安装中一切都井井有条，除了修改 web.config 之外，还有更多的蓝图步骤，特别是：

安装 WSS SP1 和/或 MOSS SP1。下载并安装 silverlight SDK 并将适当的文件复制到您的 GAC。安装 .net 3.5 (system.web.extensions)，添加 MIME 类型等。

确保您已完成所有这些，请查看：[http ://www.u2u.info/Blogs/Patrick/Lists/Categories/Category.aspx?Name=Silverlight%20BluePrint](http://www.u2u.info/Blogs/Patrick/Lists/Categories/Category.aspx?Name=Silverlight%20BluePrint)

也就是说，我不认为这是安装 Silverlight 的问题。（至少从错误中），再次检查 webpart 的 install/reqs，它可能依赖于它无权访问/安装的服务。

# c# - 如何在 C# 中编写我自己的包装器？

> ID：749520
> 
> 赞同：5
> 
> 时间：2009-04-14T21:58:14.330
> 
> 标签：c#, c++, wrapper

在我的另一个问题中，我一直在努力寻找知道在哪里可以找到 C# 的免费开源 OCR 库的人。但是，似乎只有 C++ 库，显然 C++ 不是 C#。

其中一个回复建议用 C# 编写我自己的包装器。我几乎不知道该怎么做，在哪里学习，或者它实际上是什么 - 除了我相信它通过改变方法调用调用 dll 中的 C++ 方法，.. 这只是假设，确实。

请帮帮一个新手。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-14T22:03:54.940

您可以从这里开始：

[调用非托管代码。第 1 部分 - 简单的 DLLImport](http://www.csharphelp.com/2006/01/call-unmanaged-code-part-1-simple-dllimport/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-14T22:02:46.877

如果您的包装非常简单，则可以使用[P/Invoke](http://www.pinvoke.net)。如果您确实想要托管对象，您最简单的解决方案可能是在 C++/CLI（以前的托管 C++）中编写包装器，因为它为托管/非托管互操作提供了完整的功能集。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T22:12:12.487

这就是我如何做[Interop](http://stochfit.svn.sourceforge.net/viewvc/stochfit/trunk/StochFitMain/StochFit/StochFit/Core/InteropCalcs.cs?revision=116&view=markup)。它向您展示了如何处理简单的情况（BOOL 到 bool）以及一些更困难的情况（传递带有指向托管内存的指针的结构）。祝你好运。

# ruby-on-rails - 如果我使用 Rspec 和 Cucumber，我可以销毁我的 /test 文件夹吗？

> ID：749521
> 
> 赞同：4
> 
> 时间：2009-04-14T21:58:19.523
> 
> 标签：ruby-on-rails

这可能吗？或者我会错过什么吗？（固定装置，..？）

因为：当我将自动测试与 rspec 一起使用时，自动测试似乎不起作用？它加载，但没有其他反应，即使我更改文件..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-15T00:15:35.683

是的，您可以完全删除目录“测试”。如果您使用固定装置，您可以将它们放入规格/固定装置中。认为固定装置不是一个好主意恕我直言：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T23:00:12.497

是的 - 但你必须使用命令

```
autospec 
```

并不是

```
autotest 
```

如果你使用 RSpec。

# google-app-engine - Google Web Toolkit (GWT) + Google App Engine (GAE) + Detached Data Persistence

> ID：749522
> 
> 赞同：17
> 
> 时间：2009-04-14T21:58:20.070
> 
> 标签：google-app-engine, gwt, rpc, google-cloud-datastore, detach

我想使用 GWT 和 GAE 开发一个需要数据持久性的网络应用程序。据我了解，我唯一（或至少到目前为止最方便的）数据持久性选项是 GAE 的 Datastore，它使用 JDO 或 JPA 注释对象。我还希望能够使用 GWT 远程过程调用 (RPC) 在客户端-服务器之间来回发送我的对象，因此我的对象必须能够“分离”。但是，GWT RPC 序列化无法处理分离的 JDO/JPA 对象，而且它似乎不会在不久的将来出现。

我的问题：对此最简单和最直接的解决方案是什么？能够通过服务器端持久性共享相同的对象客户端/服务器将非常方便。

**编辑**

我应该澄清一下，我仍然希望将 GWT RPC 与 GAE 的数据存储区一起使用。我只是在寻找可以让所有这些技术协同工作的最佳解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-09T17:10:53.750

尝试使用[http://gilead.sourceforge.net/](http://gilead.sourceforge.net/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2010-03-07T18:57:28.813

我最近发现了[Objectify](http://code.google.com/p/objectify-appengine/)，它旨在替代 JDO。使用它的经验不多，但它比 JDO 更易于使用，似乎更轻量级，并且声称可以通过 GWT 解决对 DTO 的需求，尽管我还没有尝试过那个特定的功能。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-14T10:02:54.723

雷克伦威尔有一个[临时的破解](http://timepedia.blogspot.com/2009/04/google-appengine-and-gwt-now-marriage.html)。我已经尝试过了，它有效。

它迫使您使用 Transient 而不是 Detachable 实体，因为 GWT 无法序列化 DataNucleus 使用的隐藏 Object[]；这意味着您发送给客户端的对象无法插入回数据存储区，您必须检索实际的数据存储区对象，并将所有持久字段复制回其中。Ray 的方法使用反射来迭代方法，检索 getBean() 和 setBean() 方法，并将实体 setBean() 与瞬态 gwt 对象的 getBean() 一起应用。

您应该努力使用 JDO，JPA 目前只不过是一个包装类。要使用此 hack，您必须为每个持久字段同时拥有 getter 和 setter 方法，对每个“bean”字段使用 PROPER getBean 和 setBean 语法。好吧，几乎是正确的，因为它假设所有 getter 都以“get”开头，而默认布尔字段使用是“is”。

我已经解决了这个问题并在 Ray 的博客上发表了评论，但它正在等待批准，我不确定他是否会发布它。基本上，我在 org.datanucleus 包中实现了一个 @GetterPrefix(prefix=MethodPrefix.IS) 注释来增加他的工作。

如果没有发布，这是一个问题，请发送电子邮件至 x_AT_aiyx_DOT_info 回复：@GetterPrefix for JDO，我会将修复程序发送给您。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-14T23:01:36.157

前段时间我写了一篇文章[Using an ORM or plain SQL?](https://stackoverflow.com/questions/494816/using-an-orm-or-plain-sql/494853#494853)

> 这在去年我正在编写的一个 GWT 应用程序中出现。服务实现中从 EclipseLink 到表示对象的大量转换。如果我们使用的是 ibatis，那么使用 ibatis 创建适当的对象然后在堆栈中上下传递它们会简单得多。一些纯粹主义者可能会认为这是 Bad™。也许是这样（理论上），但我告诉你：它会导致更简单的代码、更简单的堆栈和更高的生产力。

这基本上符合你的观察。

但当然，这不是 Google App Engine 的选项，因此您几乎无法在客户端对象和 JPA 实体之间建立一个翻译层。

JPA 实体非常严格，因此无论如何它们并不适合在客户端之间来回发送。通常，您在执行此操作时需要来自多个实体的少量信息（因此最终会得到某种表示层值对象）。那是你前进的道路。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-07-22T12:37:04.623

[试试这个](http://www.resmarksystems.com/code/)。它是一个用于序列化 GAE 核心类型并将它们发送到 GWT 客户端的模块。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-01T21:39:31.127

您可以考虑使用 JSON。GWT 有必要的 API 来在客户端解析和生成 JSON 字符串。你会得到很多用于服务器端的 JSON API。我尝试使用 google-gson，这很好。它将您的 JSON 字符串转换为 POJO 模型，反之亦然。希望这可以帮助您为您的要求提供一个体面的解决方案

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2010-01-04T15:39:23.903

目前，我使用 DTO (DataTransferObject) 模式。不一定像干净和更多样板，但 GAE 目前仍需要相当数量的样板。;)

我有一个与 DTO 一对一映射的域对象（通常）。当客户端需要域信息时，DAO(DataAccessObject) 会生成域对象的 DTO 表示并通过网络发送。当 DTO 返回时，我将 DTO 交给 DAO，然后它会更新所有适当的域对象。

显然不如直接通过网络传递域对象那么干净，但是 GAE 的 JDO 实现和 GWT 的序列化过程的限制意味着这是我目前处理这个问题的最干净的方式。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2010-12-23T23:31:25.713

我相信谷歌对此的官方回答是 GWT 2.1 [RequestFactory](http://code.google.com/webtoolkit/doc/latest/DevGuideRequestFactory.html)。鉴于您使用的是 GWT 和 GAE，我建议您坚持使用 Google 官方框架……我有一个类似的基于 GWT / GAE 的应用程序，这就是我正在做的事情。

顺便说一句，设置 RequestFactory 有点让人头疼。当前的 Eclipse 插件不包括所有 jar，但我能够在 Stackoverflow 中找到我需要的帮助

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2010-05-03T22:49:19.427

我也一直在使用 Objectify，我非常喜欢它。您仍然需要使用 pre/postLoad 方法进行一些跳舞，以将例如 Text 转换为 String 并返回。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-14T22:29:13.397

由于 GWT 最终编译为 JavaScript，因此对于分离的持久性，它需要一些可用的服务之一。最著名的是 HTML5 商店和 Gears（都使用 SQLite！）。当然，两者都没有被广泛部署，所以你必须说服你的用户要么使用现代浏览器，要么安装一个鲜为人知的插件。如果用户不遵守，请确保降级为可用子集

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2010-01-14T20:10:21.120

直接使用[Datastore API](http://code.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/package-summary.html)加载/存储 POJO 域对象怎么样？

它应该与 DTO 方法相当，这意味着您必须手动处理所有字段（如果您不使用基于反射的自动化之类的技巧），同时它应该为您提供更大的灵活性和对所有 Datastore 功能的完全访问权限。

# objective-c - 访问在 Interface Builder 中创建的视图

> ID：749531
> 
> 赞同：3
> 
> 时间：2009-04-14T22:01:29.500
> 
> 标签：objective-c, uiview, uiviewcontroller

我创建了一个 ChildViewController 类，然后创建了一个使用该类的 nib。

然后我创建了一个 BaseView，其中包括一些按钮和一些我将以编程方式更改的文本。

然后我创建了另外两个视图（男孩和女孩），我希望能够将它们放在基础视图后面，以便背景颜色与 ImageView 中的一些图形不同。我将在 IB 中创建的视图命名为“男孩”和“女孩”...

但是当我回到调用 ChildViewController 的代码时，我不确定如何访问我创建的视图，因此我可以调用 insertSubView。我需要在代码中实例化它们吗？（也许在 ViewDidLoad 中？）笔尖在加载时会创建实例吗？

我对如何处理单个 ViewController 的多个视图感到困惑

编辑=================

@巴勃罗圣克鲁斯

您的回答假设我有两个笔尖和两个视图控制器（每个视图一个）。我想知道我是否可以使用一个笔尖和一个控制器，并加载 UIViews。创建另一个笔尖和控制器似乎很愚蠢，而所有想做的只是改变背景颜色和一些图形。我不能以编程方式将 UIViews 加载到 UIViewController 中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-07-23T12:14:17.677

您可以通过为其标记属性分配一个值以编程方式访问 UIView，该属性可以在检查器的第一个选项卡上的 IB 中设置（命令 1）

标签值默认为零，因此如果您想专门访问它，请将其设为非零且唯一。例如 100，我将在下面的示例代码中使用

设置标记后，您可以使用 UIViewController 中的以下代码访问视图，该代码是包含标记视图的 NIB 的 initWithNibName

```
UIView *aView = [self.view viewWithTag:100]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T22:33:21.313

在 Xcode 中的 App Controller 类中添加 IBOutlets，然后在 IB 中将它们从 Inspector 中的连接选项卡链接到对象。

然后，您将能够向对象发送方法调用。

Xcode 中的代码应如下所示：

```
@interface AppController : NSObject
{
   IBOutlet Girl girlIvarName1;
   IBOutlet Boy boyIvarName2;
}

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T22:10:48.060

您可以使用以下代码获取 IBuilder 视图的实例：

```
boyViewController = [[BoyViewController alloc] initWithNibName:@"BoyViewController" bundle:nil];
girlViewController = [[GirlViewController alloc] initWithNibName:@"GirlViewController" bundle:nil]; 
```

假设您的 NIB 文件名为 BoyViewController 和 GirlViewController。有了这些实例，您可以做任何您需要做的事情。IE，将它们添加到父视图（在父视图上带有 addSubView 消息）。

# java - 如何遍历 Java 类资源？

> ID：749533
> 
> 赞同：16
> 
> 时间：2009-04-14T22:02:27.347
> 
> 标签：java, resources, classpath

我知道我们可以这样做：

```
Class.class.getResourceAsStream("/com/youcompany/yourapp/module/someresource.conf") 
```

读取打包在我们的 jar 文件中的文件。

我用谷歌搜索了很多，我肯定没有使用正确的术语；我想做的是列出可用资源，如下所示：

```
Class.class.listResources("/com/yourcompany/yourapp") 
```

这应该返回包内的资源列表`com.yourcompany.yourapp.*`

那可能吗？关于如何做到这一点的任何想法，以防它不能像我展示的那样容易完成？

注意：我知道可以知道你的 jar 在哪里，然后打开它并检查它的内容以实现它。但是，我不能在我现在工作的环境中做到这一点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-14T22:34:40.653

对于 JAR 文件中的资源，类似这样的工作：

```
URL url = MyClass.class.getResource("MyClass.class");
String scheme = url.getProtocol();
if (!"jar".equals(scheme))
  throw new IllegalArgumentException("Unsupported scheme: " + scheme);
JarURLConnection con = (JarURLConnection) url.openConnection();
JarFile archive = con.getJarFile();
/* Search for the entries you care about. */
Enumeration<JarEntry> entries = archive.entries();
while (entries.hasMoreElements()) {
  JarEntry entry = entries.nextElement();
  if (entry.getName().startsWith("com/y/app/")) {
    ...
  }
} 
```

您可以对文件系统或许多其他存储库中“爆炸”的资源执行相同的操作，但这并不那么容易。对于要支持的每个 URL 方案，您都需要特定的代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-14T22:09:30.637

通常无法获得这样的资源列表。一些类加载器甚至可能*无法*支持这一点——想象一个类加载器可以从 Web 服务器获取单个文件，但 Web 服务器不必支持列出目录的内容。当然，对于 jar 文件，您可以显式加载 jar 文件的内容。

（顺便说一句，[这个问题](https://stackoverflow.com/questions/676097/java-resource-as-file)很相似。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-14T22:08:33.227

我一直在寻找一种使用类加载器列出 jar 文件内容的方法，但不幸的是，这似乎是不可能的。相反，您可以做的是将 jar 作为 zip 文件打开并以这种方式获取内容。您可以使用标准（[此处](http://www.java2s.com/Code/Java/File-Input-Output/ReadingtheContentsofaZIPFile.htm)）方法来读取 jar 文件的内容，然后使用类加载器来读取内容。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-10-05T11:00:43.320

列出类路径中所有资源的最健壮的机制目前[是将此模式与 ClassGraph 一起使用](https://github.com/classgraph/classgraph/wiki/Code-examples#finding-and-reading-resource-files)，因为它处理[最广泛的类路径规范机制](https://github.com/classgraph/classgraph/wiki/Classpath-Specification-Mechanisms)，包括新的 JPMS 模块系统。（我是 ClassGraph 的作者。）

```
List<String> resourceNames;
try (ScanResult scanResult = new ClassGraph()
            .whitelistPaths("com/yourcompany/yourapp")
            .scan()) {
    resourceNames = scanResult.getAllResources().getNames();
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-04-14T22:03:58.683

我通常使用

```
getClass().getClassLoader().getResourceAsStream(...) 
```

但我怀疑您是否可以在不事先知道它们的情况下列出类路径中的条目。

# c# - ICustomTypeDescriptor、TypeDescriptionProvider、TypeConverter 和 UITypeEditor

> ID：749542
> 
> 赞同：39
> 
> 时间：2009-04-14T22:05:03.190
> 
> 标签：c#, propertygrid, typeconverter, uitypeeditor, customtypedescriptor

我试图全面了解您如何使用 ICustomTypeDescriptor、TypeDescriptionProvider、TypeConverter 和 UITypeEditor 来更改 PropertyGrid 显示和与对象交互的方式。

有人可以告诉我这是否正确，或者我是否遗漏了任何主要概念或要点？我真的只是想了解您为什么以及何时使用每个课程。

**ICustomTypeDescriptor**

*   在类中实现此接口完全覆盖类的本机属性，并用 ICustomTypeDescriptor.GetProperties() 返回的 PropertyDescriptors 替换它们

**类型描述提供者**

*   用于扩展类的现有属性
*   TypeDescriptionProvider 通过 TypeDescriptionProvider 属性附加到类
*   TypeDescriptionProvider 的 GetTypeDescriptor() 方法返回要***附加***到该类型的现有属性的 ICustomTypeDescriptor。
*   PropertyGrid 将显示通过反射找到的类的属性，以及通过 TypeDescriptionProvider 添加到类的属性

**类型转换器**

*   在类型之间转换
*   就使用用于在属性网格中显示/编辑的复杂类型和原始类型之间转换的 PropetyGrid 而言。
*   TypeConverter 的 GetStandard values 方法也可用于在 propertygrid 中显示可能值的列表

**UITypeEditor**

*   定义用于操作复杂类型属性的自定义编辑器。
*   通过属性与属性相关联。

因此 ICustomTypeDescriptor 一个 TypeDescription 提供程序用于添加/更改/替换对象的整个属性。TypeConverter 和 UITypeEditor 应用于单个属性并控制这些特定属性的交互方式。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-04-15T06:02:55.100

调整：

*   `TypeDescriptionProvider`

    *   仍然*替换*元数据（不扩展）
    *   也可以添加`TypeDescriptor.AddProvider`
    *   可以按类型应用，也可以按实例应用，从而可以应用于列表而无需实现`ITypedList`
*   `TypeConverter`

    *   对于`PropertyGrid`，这也是用于获取元数据的机制；请注意，`ExpandableObjectConverter`只是委托给`TypeDescriptor.GetProperties`，但并非总是如此
    *   还负责通过更改重新创建不可变对象（例如结构）
*   `UITypeEditor`

    *   还负责画中的预览框`PropertyGrid`

额外的：

*   `IExtenderProvider`-*附加*属性；这可能是您感到困惑的地方`TypeDescriptionProvider`
*   `ITypedList`- 广义上的双胞胎`ICustomTypeDescriptor`，但对于列表；可以通过`TypeDescriptionProvider`在 any 上使用和非对象索引器来避免`IList`，即`public T this[int index] {get;}`
*   `IListSource`- 提供数据源和数据之间的间接性；例如，一个`DataTable`implements ，在请求时`IListSource`返回`DefaultView`

# linux - 在 Bash 脚本中通过管道传入/传出剪贴板

> ID：749544
> 
> 赞同：1163
> 
> 时间：2009-04-14T22:06:47.070
> 
> 标签：linux, bash, macos, clipboard

是否可以在 Bash 中与剪贴板进行管道传输？

无论是与设备手柄之间的管道还是使用辅助应用程序，我都找不到任何东西。

例如，如果`/dev/clip`是一个链接到剪贴板的设备，我们可以这样做：

```
cat /dev/clip        # Dump the contents of the clipboard
cat foo > /dev/clip  # Dump the contents of "foo" into the clipboard 
```

* * *

## 回答 #1

> 赞同：1033
> 
> 时间：2009-04-15T05:57:40.697

您可以处理大量的剪贴板。我希望您可能是想要将内容放入 X Windows 主剪贴板的 Linux 用户。通常，您想与之交谈的剪贴板有一个实用程序可以让您与之交谈。

在 X 的情况下，有`xclip`（和其他）。`xclip -selection c`将数据发送到与`Ctrl`+ `C`，`Ctrl`+`V` 在大多数应用程序中使用的剪贴板。

如果您使用的是 Mac OS X，则有`pbcopy`. 例如，`cat example.txt | pbcopy`

如果您处于 Linux 终端模式（无 X），请查看具有剪贴板的`gpm`屏幕[。](http://www.gnu.org/software/screen/)试试 Screen 命令`readreg`。

在 Windows 10+ 或 Cygwin 下，使用`/dev/clipboard`或`clip`.

* * *

## 回答 #2

> 赞同：334
> 
> 时间：2010-11-17T19:14:05.137

确保您正在使用`alias xclip="xclip -selection c"` ，否则您将无法使用`Ctrl`+粘贴`v`。

示例：运行后`echo -n test | xclip`，`Ctrl`+`v`将粘贴`test`

* * *

## 回答 #3

> 赞同：227
> 
> 时间：2014-12-13T08:32:04.487

# 安装

```
# You can install xclip using `apt-get`
apt-get install xclip

# or `pacman`
pacman -S xclip

# or `dnf`
dnf install xclip 
```

如果您无权访问`apt-get`nor `pacman`，或者`dnf`，源代码可在[sourceforge](http://sourceforge.net/projects/xclip/)上获得。

# 设置

## 重击

在`~/.bash_aliases`中，添加：

```
alias setclip="xclip -selection c"
alias getclip="xclip -selection c -o" 
```

*不要忘记使用`. ~/.bash_aliases`或通过重新启动配置文件来加载新配置。*

## 鱼

在`~/.config/fish/config.fish`中，添加：

```
abbr setclip "xclip -selection c"
abbr getclip "xclip -selection c -o" 
```

*不要忘记通过重新启动终端来重新启动您的鱼实例以应用更改。*

# 用法

您现在可以使用`setclip`and `getclip`，例如：

```
$ echo foo | setclip
$ getclip
foo 
```

* * *

## 回答 #4

> 赞同：167
> 
> 时间：2011-03-05T17:24:38.373

在 macOS 上，使用内置[`pbcopy`](https://developer.apple.com/legacy/library/documentation/Darwin/Reference/ManPages/man1/pbcopy.1.html)和[`pbpaste`](https://developer.apple.com/legacy/library/documentation/Darwin/Reference/ManPages/man1/pbpaste.1.html)命令。

例如，如果您运行

```
cat ~/.bashrc | pbcopy 
```

文件的内容`~/.bashrc`将可用于粘贴`Cmd`+`V`快捷方式。

要将当前剪贴板保存到文件，请将输出重定向[`pbpaste`](https://developer.apple.com/legacy/library/documentation/Darwin/Reference/ManPages/man1/pbpaste.1.html)到文件：

```
pbpaste > my_clipboard.txt 
```

* * *

## 回答 #5

> 赞同：61
> 
> 时间：2018-04-05T19:13:22.023

# 2018年答案

使用[剪贴板-cli](https://github.com/sindresorhus/clipboard-cli)。它适用于 macOS、Windows、Linux、OpenBSD、FreeBSD 和 Android，没有任何实际问题。

安装它：

```
npm install -g clipboard-cli 
```

然后你可以这样做：

```
echo foo | clipboard 
```

如果你愿意，你可以通过在你的, , 或`cb`中加入以下内容来作为别名：`.bashrc``.bash_profile``.zshrc`

```
alias cb=clipboard 
```

* * *

## 回答 #6

> 赞同：46
> 
> 时间：2015-08-18T15:14:34.877

**Debian/Ubuntu/Mint 上的**xsel****

 **```
# append to clipboard:
cat 'the file with content' | xsel -ab

# or type in the happy face :) and ...
echo 'the happy face :) and content' | xsel -ib

# show clipboard
xsel -ob

# Get more info:
man xsel 
```

安装

```
sudo apt-get install xsel 
```

* * *

## 回答 #7

> 赞同：43
> 
> 时间：2009-04-14T22:33:14.057

尝试

[`xclip`](http://packages.debian.org/lenny/xclip)

```
xclip - command line interface to X selections (clipboard) 
```

[男人](http://linux.die.net/man/1/xclip)

* * *

## 回答 #8

> 赞同：27
> 
> 时间：2018-03-28T14:17:41.917

在[Linux 的 Windows 子系统(WSL) 上，您可以使用](https://en.wikipedia.org/wiki/Windows_Subsystem_for_Linux)*clip.exe*复制到剪贴板：

```
cat file | clip.exe 
```

请记住使用`|`管道命令。而不是`>`命令，因为那是行不通的。

* * *

## 回答 #9

> 赞同：22
> 
> 时间：2017-12-11T06:20:05.967

安装 xcopy 实用程序，当您在终端中时，输入：

**复制**

```
Thing_you_want_to_copy | xclip -selection c 
```

**粘贴**

```
myvariable=$(xclip -selection clipboard -o) 
```

我注意到很多答案推荐*pbpaste*和*pbcopy*。如果您使用这些实用程序，但由于某种原因它们在您的存储库中不可用，您始终可以为 xcopy 命令创建一个别名并将它们称为 pbpaste 和 pbcopy。

```
alias pbcopy="xclip -selection c"
alias pbpaste="xclip -selection clipboard -o" 
```

那么它看起来像这样：

```
Thing_you_want_to_copy | pbcopy
myvariable=$(pbpaste) 
```

[一个答案位于一个名为 doug 的用户为我写的评论中。因为我发现它很有帮助，所以我决定在答案中重申。]

* * *

## 回答 #10

> 赞同：12
> 
> 时间：2013-10-04T15:39:22.333

这是一个现成的 Bash 脚本，用于读取可在多个平台上运行的剪贴板。

如果您添加功能（例如，更多平台），请在此处编辑脚本。

```
#!/bin/bash
# WF 2013-10-04
#
# Multi-platform clipboard read access
#
# Supports
#   Mac OS X
#   Git shell / Cygwin (Windows)
#   Linux (e.g., Ubuntu)

#
# Display an error
#
error() {
  echo "error: $1" 1>&2
  exit 1
}

#
# getClipboard
#
function getClipboard() {
 os=`uname`
      case $os in
        # Git Bash  (Windows)
        MINGW32_NT-6.1)
          cat /dev/clipboard;;
        # Mac OS X
        Darwin*)
          pbpaste;;
        # Linux
        Linux*)
          # Works only for the X clipboard - a check that X is running might be due
          xclip -o;;
        *)
          error "unsupported os $os";;
      esac
}

tmp=/tmp/clipboard$$
getClipboard >$tmp
cat $tmp
# Comment out for debugging
rm $tmp 
```

* * *

## 回答 #11

> 赞同：11
> 
> 时间：2011-05-31T13:33:27.990

在 Windows（使用 Cygwin）上尝试 `cat /dev/clipboard`或`echo "foo" > /dev/clipboard`如本文所述。

* * *

## 回答 #12

> 赞同：11
> 
> 时间：2014-08-22T18:46:04.360

仅适用于 Mac：

```
echo "Hello World" | pbcopy
pbpaste 
```

这些位于`/usr/bin/pbcopy`和`/usr/bin/pbpaste`。

* * *

## 回答 #13

> 赞同：10
> 
> 时间：2009-04-14T22:12:23.953

Linux 中有不同的剪贴板；X 服务器有一个，窗口管理器可能有另一个，等等。没有标准设备。

哦，是的，在 CLI 上，屏幕程序也有自己的剪贴板，[Emacs](http://en.wikipedia.org/wiki/Emacs)和[vi](http://en.wikipedia.org/wiki/Vi)等其他一些应用程序也有。

在 X 中，您可以使用[xclip](http://sourceforge.net/projects/xclip)。

您可以查看此线程以获取其他可能的答案： [http ://unix.derkeiler.com/Newsgroups/comp.unix.shell/2004-07/0919.html](http://unix.derkeiler.com/Newsgroups/comp.unix.shell/2004-07/0919.html)

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2015-05-06T04:57:25.233

这是一个简单的 Python 脚本，可以满足您的需要：

```
#!/usr/bin/python

import sys

# Clipboard storage
clipboard_file = '/tmp/clipboard.tmp'

if(sys.stdin.isatty()): # Should write clipboard contents out to stdout
    with open(clipboard_file, 'r') as c:
        sys.stdout.write(c.read())
elif(sys.stdout.isatty()): # Should save stdin to clipboard
    with open(clipboard_file, 'w') as c:
        c.write(sys.stdin.read()) 
```

将其保存为路径中某处的可执行文件（我将其保存到`/usr/local/bin/clip`. 您可以通过管道输入要保存到剪贴板的内容...

```
echo "Hello World" | clip 
```

您可以将剪贴板中的内容通过管道传输到其他程序...

```
clip | cowsay
 _____________
< Hello World >
 -------------
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     || 
```

单独运行它只会输出剪贴板中的内容。

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2013-06-21T05:46:14.647

在 Windows (Cygwin) 中复制并粘贴到剪贴板：

看：

```
$ clip.exe -?

CLIP
Description:
    Redirects output of command line tools to the Windows clipboard.
    This text output can then be pasted into other programs.
Parameter List:
/?                  Displays this help message.
Examples:
DIR | CLIP          Places a copy of the current directory
                        listing into the Windows clipboard.
CLIP < README.TXT   Places a copy of the text from readme.txt
                        on to the Windows clipboard. 
```

还存在 getclip（它可以用来代替`Shift`+ `Ins`！）和 putclip（echo oaeuoa | putclip.exe 将其放入剪辑）。

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2015-06-11T21:04:26.930

```
 xsel -b 
```

为 X Window 做这项工作，而且它大部分已经安装好了。看看[xsel](https://linux.die.net/man/1/xsel)的手册页是值得的。

* * *

## 回答 #17

> 赞同：5
> 
> 时间：2019-08-22T11:03:06.760

我找到了一个很好的参考：*[How to target multiple selections with xclip](https://unix.stackexchange.com/questions/69111/how-to-target-multiple-selections-with-xclip)*

就我而言，我想将内容粘贴到剪贴板上并查看粘贴的内容，因此我还使用了`tee`带有文件描述符的命令：

```
echo "just a test" | tee >(xclip -i -selection clipboard) 
```

`>()`是过程替换的一种形式。Bash 用括号内连接到程序标准输入的文件描述符的路径替换每个。

该`tee`命令派生您的命令，允许您“管道其内容”并在标准输出“stdout”上查看结果。

您还可以创建别名以在剪贴板上获取和写入，让您可以像在 Mac 上一样使用“pbcopy”和“pbpaste”。就我而言，当我使用[Z shell](https://en.wikipedia.org/wiki/Z_shell) ( `zsh`) 时，我的别名文件中有这个：

```
(( $+commands[xclip] )) && {
    alias pbpaste='xclip -i -selection clipboard -o'
    alias pbcopy='xclip -selection clipboard'
} 
```

in Z shell 测试您的`(( $+command[name] ))`系统上是否安装了命令“name”，然后将两个别名与`{}`. 是`&&`二进制*AND* ; 如果 a 然后 b，因此如果您有 xclip，则将设置别名。

```
echo "another test" | tee >(pbcopy) 
```

要获取剪贴板内容，只需键入：

```
pbpaste | "any-command-you-need-here" 
```

* * *

## 回答 #18

> 赞同：5
> 
> 时间：2020-01-30T10:15:57.490

pbcopy 内置在 OS X 中：

复制文件*.bash_profile*的内容：

```
cat ~/.bash_profile | pbcopy 
```

* * *

## 回答 #19

> 赞同：4
> 
> 时间：2017-05-11T04:00:18.777

有几种方法。已经提到的一些方法包括（我认为）[tmux](https://en.wikipedia.org/wiki/Tmux)、[Screen](https://en.wikipedia.org/wiki/GNU_Screen)、[Vim](https://en.wikipedia.org/wiki/Vim_%28text_editor%29)、[Emacs](https://en.wikipedia.org/wiki/Emacs)和 shell。我不知道 Emacs 或 Screen，所以我将介绍其他三个。

## 多路复用器

虽然不是 X 选择，但 tmux 具有可通过`prefix-[`(默认`prefix`为`Ctrl`+ ) 访问的复制模式。`B`用于此模式的缓冲区是 tmux 的独立和专有的，它开辟了很多可能性，并且在适当的情况下使其比 X 选择更通用。

要退出此模式，请点击`Q`; 导航，使用你的 Vim 或 Emacs 绑定（默认 = Vim），所以`hjkl`对于移动，`v/V/C-v`对于字符/行/块选择等。当你有你的选择时，点击`Enter`复制并退出模式。

要从此缓冲区粘贴，请使用`prefix-]`.

## 贝壳

默认情况下，任何安装`X11`似乎都带有两个程序：`xclip`and `xsel`（有点像它同时带有`startx`and `xinit`）。大多数其他答案都提到了`xclip`，我真的很喜欢`xsel`它的简洁性，所以我将介绍`xsel`。

从[xsel(1x)](https://linux.die.net/man/1/xsel)：

> ## 输入选项\
> 
> ### -a，--追加\
> 
> 将标准输入附加到选择中。暗示**-i**。
> 
> ### -f，--关注\
> 
> 随着标准输入的增长附加到选择。暗示**-i**。
> 
> ### -i，--输入\
> 
> 将标准输入读入选择。
> 
> ## 输出选项\
> 
> ### -o，--输出\
> 
> 将选择写入标准输出。
> 
> ## 行动选项\
> 
> ### -c，--清除\
> 
> 清除选择。覆盖所有输入选项。
> 
> ### -d，--删除\
> 
> 请求删除当前选择。这不仅清除了选择，而且还向选择所在的程序请求删除选择的内容。覆盖所有输入选项。
> 
> ## 选择选项\
> 
> ### -p，--主\
> 
> 对 PRIMARY 选择进行操作（默认）。
> 
> ### -s，--二级\
> 
> 对 SECONDARY 选择进行操作。
> 
> ### -b，--剪贴板\
> 
> 对剪贴板选择进行操作。

这就是您需要知道的全部内容。`p`（或没有） for `PRIMARY`, `s`for `SECONDARY`, `b`for `CLIPBOARD`, `o`for 输出。

示例：假设我想`foo`从 TTY 复制输出并将其粘贴到网页以获取错误报告。为此，理想的做法是复制到 TTY/X 会话/从 TTY/X 会话复制。所以问题变成*了如何从 TTY 访问剪贴板？*

对于这个例子，我们假设 X 会话是 on display `:1`。

```
$ foo -v
Error: not a real TTY
details:
blah blah @ 0x0000000040abeaf4
blah blah @ 0x0000000040abeaf8
blah blah @ 0x0000000040abeafc
blah blah @ 0x0000000040abeb00
...
$ foo -v | DISPLAY=:1 xsel -b # copies it into clipboard of display :1 
```

然后我可以像`Ctrl`往常`V`一样将它添加到表单中。

现在说支持站点上的某个人给了我一个运行命令来解决问题。它复杂而漫长。

```
$ DISPLAY=:1 xsel -bo
sudo foo --update --clear-cache --source-list="http://foo-software.com/repository/foo/debian/ubuntu/xenial/164914519191464/sources.txt"
$ $(DISPLAY=:1 xsel -bo)
Password for braden:
UPDATING %%%%%%%%%%%%%%%%%%%%%%% 100.00%
Clearing cache...
Fetching sources...
Reticulating splines...
Watering trees...
Climbing mountains...
Looking advanced...
Done.
$ foo
Thank you for your order. A pizza should arrive at your house in the next 20 minutes. Your total is $6.99 
```

*比萨订购*似乎是对命令行的有效使用。

...继续。

## 维姆

`+clipboard`如果使用(This is important! Check your )编译`vim --version`，Vim 应该可以访问 X`PRIMARY`和`CLIPBOARD`选择项。这两个选项可分别从`*`和`+`寄存器访问，并且可以像任何其他寄存器一样在您空闲时写入和读取。

例如：

```
:%y+    ; copy/yank (y) everything (%) into the CLIPBOARD selection (+)
"+p     ; select (") the CLIPBOARD selection (+) and paste/put it
ggVG"+y ; Alternative version of the first example 
```

但是，如果您的 Vim 副本不直接支持访问 X 选择，那也不是世界末日。您可以使用`xsel`上一节中描述的技术。

```
:r ! xsel -bo ; read  (r) from the stdout of (!) `xsel -bo`
:w ! xsel -b  ; write (w) to the stdin of    (!) `xsel -b` 
```

绑定几个键组合，你应该很好。

* * *

## 回答 #20

> 赞同：4
> 
> 时间：2020-10-21T13:19:06.933

我只是在我的[KDE](https://kde.org/)环境中搜索了相同的东西。

随意使用`clipcopy`和`clippaste`。

**KDE：**

```
> echo "TEST CLIP FROM TERMINAL" | clipcopy
> clippaste
TEST CLIP FROM TERMINAL 
```

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2020-01-28T22:43:58.633

在 Linux 中这有效：

```
cat filename | xclip 
```

* * *

## 回答 #22

> 赞同：3
> 
> 时间：2020-04-17T07:03:40.707

[Ruby oneliner](https://stackoverflow.com/a/47069038/630752)启发了我尝试使用 Python。

假设我们想要一个将剪贴板中的任何内容缩进四个空格的命令。它非常适合在 Stack Overflow 上共享片段。

```
$ pbpaste | python -c "import sys
 for line in sys.stdin:
   print(f'    {line}')" | pbcopy 
```

那不是错字。Python 需要换行符来执行*for*循环。我们希望一次更改行，以避免在内存中建立额外的数组。

如果您不介意构建额外的数组，请尝试：

```
$ pbpaste | python -c "import sys; print(''.join([f'    {l}' for l in sys.stdin]))" | pbcopy 
```

但老实说，awk 比 python 更好。我在我的`~/.bashrc`文件中定义了这个别名

```
alias indent="pbpaste | awk '{print \"    \"\$0}' | pbcopy" 
```

现在，当我运行时`indent`，剪贴板中的任何内容都会缩进。

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2014-06-08T14:38:16.903

我几年前写的一些 Windows 程序。它们允许您转储、推送、附加和打印剪贴板。它是这样工作的：

```
dumpclip | perl -pe "s/monkey/chimp/g;" | pushclip 
```

它包括源代码：[cmd_clip.zip](http://www.jeremyenglish.org/packs/cmd_clip.zip)

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2017-09-23T00:24:32.900

在这个线程中，有一个选项不需要安装任何`gclip`//第三方软件。`xclip``xsel`

Perl 脚本（因为通常总是安装 Perl）

```
use Win32::Clipboard;
print Win32::Clipboard::GetText(); 
```

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2017-11-02T06:37:06.973

在 macOS 中，使用`pbpaste`.

例如：

更新剪贴板

```
pbpaste  | ruby -ne ' puts "\|" + $_.split( )[1..4].join("\|") ' | pbcopy 
```

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2020-04-29T12:37:06.133

在[Wayland](https://en.wikipedia.org/wiki/Wayland_(display_server_protocol))上， xcopy 似乎不起作用。请改用[wl 剪贴板](https://github.com/bugaevc/wl-clipboard)。

例如，在[Fedora](https://en.wikipedia.org/wiki/Fedora_%28operating_system%29)上：

```
sudo dnf install wl-clipboard

tree | wl-copy

wl-paste > file 
```

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2020-11-25T03:14:00.377

一种从剪贴板粘贴到文件的方法，除了`echo`.

1.  在要粘贴的文本中转义单引号：替换所有出现的`'`with`'\''`并将结果复制到剪贴板。
2.  类型`echo -n '`
3.  按`Shift`+`Insert`
4.  类型`' > filename.txt`
5.  按`Enter`

基本上你正在这样做：

`echo -n 'copied "text" with '\''single quotes'\'' escaped' > filename.txt`

即使复制的文本有新行，它也可以工作。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2015-09-17T17:48:49.563

如果您像我一样在没有 root 权限的 Linux 服务器上运行并且没有任何[xclip](https://linux.die.net/man/1/xclip)或[GPM](https://en.wikipedia.org/wiki/GPM_(software))，您可以通过使用临时文件来解决此问题。例如：

```
$ echo "Hello, World!" > ~/clip
$ echo `cat ~/clip`
Hello, World! 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2016-08-29T11:33:04.330

还有[xclip-copyfile](http://manpages.ubuntu.com/manpages/wily/man1/xclip-copyfile.1.html)。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2016-10-07T12:29:36.977

昨天我发现自己有一个问题：*“如何在不同的用户会话之间共享剪贴板？”* . `Ctrl`当使用+ `Alt`+ `F7`- `Ctrl`+ `Alt`+在会话之间切换时`F8`，实际上，您无法粘贴复制的内容。

我提出了以下基于命名管道的*快速而肮脏的解决方案。*它肯定是非常裸露和原始的，但我发现它很实用：

```
user1@host:~$ mkfifo /tmp/sharedClip 
```

然后在发送终端

```
user1@host:~$ cat > /tmp/sharedClip 
```

最后，在接收终端：

```
user2@host:~$ cat /tmp/sharedClip 
```

现在，您在第一个终端中键入或粘贴任何内容，并且（在点击后`Return`），它将立即出现在接收终端中，您可以从那里再次复制和粘贴您喜欢的任何地方。

当然，这不仅仅是严格地从 user1 的剪贴板中获取内容以使其在 user2 的剪贴板中可用，而是需要额​​外的一对粘贴和复制点击。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2020-09-17T02:35:22.647

此函数将测试存在的剪贴板并使用它。

要验证复制粘贴到您的 shell，然后调用该函数`clippaste`：

```
clippaste () {
    if [[ $OSTYPE == darwin* ]]
    then
            pbpaste
    elif [[ $OSTYPE == cygwin* ]]
    then
            cat /dev/clipboard
    else
            if command -v xclip &> /dev/null
            then
                    xclip -out -selection clipboard
            elif command -v xsel
            then
                    xsel --clipboard --output
            else
                    print "clipcopy: Platform $OSTYPE not supported or xclip/xsel not installed" >&2
                    return 1
            fi
    fi
} 
```

# actionscript-3 - 如何从 actionscript 3 类中分派自定义事件并在文档根目录中监听它？

> ID：749546
> 
> 赞同：3
> 
> 时间：2009-04-14T22:07:12.763
> 
> 标签：actionscript-3, events, dispatcher

我构建了一个传递变量的自定义事件调度程序。我分派了该事件，然后尝试在我的文档根目录中侦听该事件，但我从未收到该事件。如何将事件冒泡到我的文档类？

```
addEventListener(CustomVarEvent.pinClicked, pinClickedHandler);

function pinClickedHandler(e:CustomVarEvent) {
        trace("main says " + e.arg[0] + " clicked");//access arguments array
    }

package zoomify.viewer
{
import com.maps.CustomVarEvent;
    protected function hotspotClickHandler(event:MouseEvent):void {
        var hotspotData:Hotspot = hotspotsMap[event.currentTarget] as Hotspot;
        trace(hotspotData._name + " was clicked");
        /*if(hotspotData) {
            navigateToURL(new URLRequest(hotspotData.url), hotspotData.urlTarget);
        }*/
        dispatchEvent(new CustomVarEvent("pinClicked",true,false,hotspotData._name));
    }
}
package com.maps
{
// Import class
import flash.events.Event;
// CustomVarEvent
public class CustomVarEvent extends Event {
    public static const pinClicked:String = "pinClicked";
    // Properties
    public var arg:*;
    // Constructor
    public function CustomVarEvent(type:String, ... a:*) {
        var bubbles:Boolean = true;
        var cancelable:Boolean = false;
        super(type, bubbles, cancelable);
        arg = a;

    }

    // Override clone
    override public function clone():Event{
        return new CustomVarEvent(type, arg);
    };
}

} 
```

正在调度的 pinClicked 事件嵌套在类深处的两层。我将 ZoomifyViewer 类的实例添加到舞台。ZoomifyViewer 将 ZoomGrid 实例添加到舞台，并且 ZoomGrid 调度事件。

当我将相同的事件侦听器和处理程序函数直接添加到我的 ZoomGrid 类（与分派事件相同的类）中时，侦听器和处理程序正常工作。但是，当侦听器和处理程序在父类中或在舞台上时，我没有得到任何响应。

调度员是否需要冒泡才能冒泡？

此外，根据我的 CustomVarEvent 中定义的常量 pinClicked，这两行在功能上是否相同？

```
 dispatchEvent(new CustomVarEvent(CustomVarEvent.pinClicked, hotspotData._name));

 dispatchEvent(new CustomVarEvent("pinClicked", hotspotData._name)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-15T17:46:38.823

**如果调度事件的对象是 DisplayObject** （或 DisplayObject 的祖先，例如 Sprite 或 MovieClip），则事件只能在显示列表中冒泡，以便它可以在显示列表中**并添加到显示中事件调度时的列表**。

您编写的代码根本没有将事件作为类的一部分分派的行，只是包中的一个函数，所以我不确定您打算将它冒泡到哪里。

一个快速的解决方法是让被点击的同一个对象触发事件，因为它被点击了，它显然是一个在舞台上的显示对象，这符合我们关于冒泡的两个规定。

```
 package zoomify.viewer
{
    import com.maps.CustomVarEvent;

    protected function hotspotClickHandler(event:MouseEvent):void
    {
        // BY THE WAY, event.currentTarget will return the actual object, so you
        // don't need whatever the hotspotsMap[] thing is, just cast event.currentTarget
        /*var hotspotData:Hotspot = hotspotsMap[event.currentTarget] as Hotspot;*/
        var hotspotData:Hotspot = event.currentTarget as Hotspot;

        // here we dispatch the event off of the target, since it is definitely
        // in the display list already, so therefore bubbling will work right
        event.target.dispatchEvent(new CustomVarEvent("pinClicked",true,false,hotspotData._name));
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-14T23:39:26.490

事件在显示列表中冒泡。我无法从您的代码示例中得知您从哪个对象分派事件，只能知道您在类上有一个方法可以这样做。该类的实例是否已添加到显示列表中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-15T00:12:30.277

仅当分派事件的对象在显示列表中时，冒泡才有效。这是舞台的任何孙子。

这确实是您的问题，但是如果您将调度类添加到显示列表中，我无法从代码片段中看到。

此外，看起来您制作的不是自定义 EventDispatcher，而是自定义事件。但我可能是错的（看不到你的所有代码）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-04-15T08:27:04.503

为了侦听您的自定义事件，您应该在文档类中对调度程序有一个有效的引用。

*yourDispatcher.addEventListener(CustomVarEvent.pinClicked, pinClickedHandler);*

其中**yourDispatcher**是调度自定义事件的类。

# iphone - UIView 的边界矩形可以大于框架矩形是否有意义？

> ID：749547
> 
> 赞同：1
> 
> 时间：2009-04-14T22:07:28.270
> 
> 标签：iphone

据我了解，边界矩形实际上始终与框架矩形大小相同，并且相对于框架矩形坐标系具有原点 (0, 0)。

如果由于某种原因边界矩形看起来比框架矩形小，则内容将被剪裁，而框架矩形使用的空间比需要的大。

但是，如果边界矩形比框架矩形大，会发生什么？

以绝对定位并具有填充和溢出：以css样式隐藏的html div容器的方式考虑框架矩形和边界矩形是否有效？

我看不出有什么理由让更大的边界矩形有意义。另一个问题来自于边界相对于框架矩形坐标系的定位。因此，即使两者具有相同的大小：如果边界矩形不是位于原点 (0, 0) 处，我们这里有很大的问题吗？发生什么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-15T00:38:55.597

我刚刚在你的另一篇文章中回答了这个问题：

[为什么 UIView 中有一个框架矩形和一个边界矩形？](https://stackoverflow.com/questions/749558/why-is-there-an-frame-rectangle-and-an-bounds-rectangle-in-an-uiview)

基本上，如果边界设置得足够大，您就可以在框架外绘制。想象一下，您正在绘制一个窗口。您需要框架是用于点击、点击和 UI 目的的确切窗口尺寸。但是，您需要绘制阴影。如果您的边界大于框架，您可以在框架之外绘制阴影（或任何其他外部边界）。

# silverlight - 您如何以编程方式在 Silverlight 中定位对象？

> ID：749549
> 
> 赞同：2
> 
> 时间：2009-04-14T22:08:21.183
> 
> 标签：silverlight, absolute-value

在 Flash 中，这个问题很容易回答，因为您可以设置对象的 X 和 Y 坐标：

```
newxpos = object._x;
newypos = object._y; 
```

你如何在 Silverlight 中做同样的事情？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-14T22:18:39.927

将对象放在画布元素内，然后使用：

```
Canvas.SetLeft(object, value);
Canvas.SetTop(object, value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-15T12:02:46.017

如果您想要固定位置，Canvas 可以工作。如果您想要以更动态的方式控制相对位置或位置，您需要考虑将控件放入**StackPanel**或**FlowPanel**或**WrapPanel**等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-15T20:06:51.733

Canvas.SetLeft（对象，值）；是一个很好的功能，但是如果您动态控制更改所有权，最好使用“yourcontrolname”.SetValue(Canvas.LeftProperty, value); 来定位控件本身。

# c# - 如何从没有 Web 服务器的文本框中读取数据，然后将其保存在 XML 文件中？

> ID：749553
> 
> 赞同：1
> 
> 时间：2009-04-14T22:08:51.947
> 
> 标签：c#, xml, dom, projects

我正在学习计算机科学，我们必须做一个必须与 XML 密切相关并且至少使用 XSD 和 XSLT 或 XQuery/XPath 的编程项目。因为我喜欢 C#，所以我想用这种语言来做，但如果有人有其他想法，我可以使用另一种。

我现在的想法是编写某种约会簿。我想这周的所有约会都显示为 HTML，您可以在 textarea 中为这一天输入每天的约会笔记。

现在我的问题是：如何接管在文本框中输入的数据？该应用程序是离线应用程序，因此我没有接收包含输入数据的 GET 请求的 Web 服务器。是否可以从内存中读取当前 HTML DOM 及其所有输入值，然后将其转换为 XML 格式以进行持久存储，以便以后从中读取？

还是这个想法完全愚蠢？

我还能如何将所有这些 XML 技术放在一个应用程序中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T22:28:39.840

为什么它必须是基于 Web 的？

您可以在 Windows 应用程序中使用这些技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T22:32:56.790

您可以使用 JavaScript。将数据转换为 XML 或 JSON 并将其输出到另一个元素，如 div 或 textarea。您需要做的是设置一个函数来完成所有这些并在提交时执行。

检查这个[例子](http://www.w3schools.com/jsref/jsref_onSubmit.asp)。另外为了加快速度，您可以使用像[jQuery](http://jquery.com/)这样的库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-15T18:50:10.280

如果要显示从 XSLT 生成 UI，网页方法是最简单的。

更令人印象深刻的是从 XSLT -> windows app (WPF) 生成的 XAML。

下载[Visual Web Developer（免费）](http://www.microsoft.com/express/vwd/#webInstall) 或 [Visual C#](http://www.microsoft.com/express/vcsharp/Default.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-15T11:36:25.347

在家和离线并不意味着您没有 Web 服务器。有数以万计的现成软件包提供嵌入式 HTTP 服务器，因此同一个应用程序可以在线和离线运行而无需任何修改。很方便。

（我知道你是我们的 C#，但为了展示一个例子，我使用[wsgiref.simple_server](http://docs.python.org/library/wsgiref.html)来达到这个目的。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-15T17:33:57.637

为什么不制作一个允许用户更新存储在 XML 文件中的约会的 Windows 应用程序。然后使用样式表在 Web 浏览器中显示约会。

# ios - 为什么 UIView 中有一个框架矩形和一个边界矩形？

> ID：749558
> 
> 赞同：43
> 
> 时间：2009-04-14T22:11:00.647
> 
> 标签：ios, iphone

好吧，虽然在黑夜里很晚，但我不明白为什么有两个不同的矩形：框架和边界。

就像我理解的那样，一个矩形就足以完成所有工作。相对于另一个坐标系定位视图本身，然后将其内容裁剪为指定大小。你还会用两个矩形做什么？以及它们如何相互作用？

有人有很好的解释吗？Apple 文档中的那个拿着水果的孩子不太好理解。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2009-04-15T00:35:33.920

这是备忘单：

*   `frame`是视图所在的**位置**（相对于超级视图）
*   `bounds`**是允许**视图绘制的位置（相对于自身）

更多说明：

如果您将视图定位在其父视图中，您几乎总是会更改框架原点。

如果您在 UIView 绘制的位置进行剪辑，您几乎总是会修改它的边界。

请注意，您可以拥有比框架更大的边界。也就是说，你可以画出你所在位置的“界限之外”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-14T22:43:09.900

Frame 在 superview 的坐标系中， bounds 在 vi​​ew 的坐标系中。从我的角度来看，两者兼而有之很方便。框架似乎是两者中更有用的，除非在某些情况下我不知道子视图在哪里可以具有与父视图完全不同的坐标系（例如像素缩放不同）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-02-17T17:46:47.023

我最近在边界方面遇到了麻烦，并做了一些实验。bounds 属性确实限制了 UIView 可以绘制的位置，但*不*限制其子视图。限制控件的另一件事是触摸事件调度。据我所知，视图不会接收超出其范围的触摸事件。此外，任何超出父视图边界的子视图也不会接收到触摸事件。在这些情况下，您必须非常小心地更新容器视图的边界，因为它的子视图的大小和位置发生了变化。一切都会画得很好（因为子视图不会被其父级的边界剪裁）但不会收到触摸。

（这确实应该是对之前帖子的回复，但由于我还不能回复，所以卡在这里......）

# asp.net-mvc - asp.net mvc：模型绑定比手动分配有什么优势？

> ID：749563
> 
> 赞同：2
> 
> 时间：2009-04-14T22:13:03.763
> 
> 标签：asp.net-mvc

除了要编写的代码更少之外，还有什么优势？它更安全吗？

```
public JsonResult Update (int id, string name)
{
 Person person = new Person{ 
      ID=id,
      Name=name
 }

 SavePerson(person);
 return Json(...);
} 
```

或者

```
public JsonResult Update (Person person)
{

SavePerson(person);
return Json(...);

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T22:17:22.053

当使用 (int id, string name) 方法时，这些值可能会出现在 URL 字符串中。反之则不会。因此，这可能被认为更安全。

除此之外，如果您更改 Person 类中可能的属性，则不必更新传入 (int id, string name) 方法的值。虽然，您可以通过使用 UpdateMethod(myPersonInstance) 来解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-15T14:51:43.830

在 URL 字符串中结束值的概念上，我不得不不同意 Nick。事实上，没有区别。试试看！查询字符串参数可以使用任一方法提供模型值。

另一个可能很重要的区别是，当将 ID 和名称作为参数传递时，它们是唯一可以更新的两个字段。将 Person 作为参数传递时，可能会更新其他字段。这可能是也可能不是您想要的。但是 UpdateModel 将接受您希望它更新的属性的白名单（并且类似地用于在参数中绑定 Person 实例），因此*只要您记得考虑包括白名单*，这里就没有真正的区别。

对我来说，您展示的两个选项之间的最大区别是谁在实例化 Person 实例。当您将 ID 和名称作为参数传递时，将始终是您的控制器代码实例化 Person。当您将 Person 作为参数传递时，它将始终是实例化 Person 的模型绑定器。如果您希望从存储库中具体化现有实例，而不是实例化一个新的 Person 实例，这可能很重要。

# graphics - COLLADA FX SID 分辨率

> ID：749576
> 
> 赞同：1
> 
> 时间：2009-04-14T22:18:34.500
> 
> 标签：graphics, 3d, collada

在 COLLADA 中解析 SID，尤其是 COLLADA FX SID 的规则不是很清楚。特别是关于 COLLADA FX SID，我如何知道从哪个元素开始搜索特定 SID？例如，考虑`<texture>`元素的“纹理”属性：

```
 <effect id="Scene_Material_fx">
     <profile_COMMON>
        <newparam sid="acorn_png_surface">
           <surface type="2D">
              <init_from>acorn_png_img</init_from>
           </surface>
        </newparam>
        <newparam sid="acorn_png_sampler">
           <sampler2D>
              <source>acorn_png_surface</source>
           </sampler2D>
        </newparam>
        <technique sid="default">
           <phong>
              ...
              <diffuse>
                 <texture texture="acorn_png_sampler" texcoord="diffuse_TEXCOORD"></texture>
              </diffuse>
              ...
        </phong>
        </technique>
     </profile_COMMON>
  </effect> 
```

`<texture>`如果我从 开始搜索，我可以找到引用的 SID `<profile_COMMON>`，这是包含引用的元素的曾曾祖父`<texture>`，但如果我从 开始搜索，我也可以找到它`<effect>`。那么，起始元素是如何确定的呢？它是否在规范中的某个地方定义？

`<texture>`规范是否限制了可以找到特定元素引用的 sid 与文档根的接近程度？在上面的示例中，它是否可能出现在 之外`<profile_COMMON>`，例如在`<effect>`其父对象内部？哪个是“最根”元素，我可以保证通过从该元素向下钻取找到引用的 sid？

**更新**：我也在[COLLADA 论坛上](https://collada.org/public_forum/viewtopic.php?f=3&t=1324)发布了这个问题，到目前为止没有任何回应。我已经决定，暂时，我将简单地假设由 a`<texture>`的“纹理”属性引用的 SID 将始终在`<profile_COMMON>`. 如果那是错误的，则意味着我的导入器可能会在有效输入上失败，但 COLLADA 社区本身对此没有提供任何反馈，所以我无能为力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T23:29:47.297

我能感觉到你的痛苦;-)。Collada 规格真的很难理解。

因为你可以在 <effect> 范围内声明参数（不仅在 <profile> ：第 7 章关于参数），你也应该看看那里。

但。从我的经验来看，出口商往往有本地参数（在 <profile> 下），所以你的方式也可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-26T13:11:53.860

这是一个老问题，但我相信答案是 SID 是父 ID 级别的“范围 ID”。因此，从技术上讲，您在元素下开始搜索，并且所有 sid 在该块下都是唯一的。

这一直是我的理解，无论如何...

# php - 试图理解 CakePHP 的 MeioUpload 行为的代码

> ID：749583
> 
> 赞同：0
> 
> 时间：2009-04-14T22:22:56.640
> 
> 标签：php, cakephp

我正在阅读 MeioUpload 的源代码，以确保我理解它在做什么，而且大部分代码都很容易理解。但是，我遇到了一段我似乎无法弄清楚的代码，所以我试图确定这是作者的错误还是我只是遗漏了一些东西。

本质上，这个函数传递一个默认图像的文件名，并将该文件名添加到保留字列表中（并为其生成一个替换字符串）。我在我无法弄清楚的代码行旁边放了一个箭头和问号（在注释中）：

```
/**
 * Include a pattern of reserved word based on a filename, 
 * and it's replacement.
 * @author Vinicius Mendes
 * @return null
 * @param $default String
 */
function _includeDefaultReplacement($default){
    $replacements = $this->replacements;
    list($newPattern, $ext) = $this->splitFilenameAndExt($default);
    if(!in_array($newPattern, $this->patterns)){
        $this->patterns[] = $newPattern;
        $newReplacement = $newPattern;
        if(isset($newReplacement[1])){ // <--- ???
            if($newReplacement[1] != '_'){
                $newReplacement[1] = '_';
            } else {
                $newReplacement[1] = 'a';
            }
        } elseif($newReplacement != '_') {
            $newReplacement = '_';
        } else {
            $newReplacement = 'a';
        }
        $this->replacements[] = $newReplacement;
    }
} 
```

据我了解， $newReplacement 应该始终是一个字符串，而不是一个数组。那是因为最终它从这个函数返回的数组的第一个元素中获取它的值：

```
function splitFilenameAndExt($filename){
    $parts = explode('.',$filename);
    $ext = $parts[count($parts)-1];
    unset($parts[count($parts)-1]);
    $filename = implode('.',$parts);
    return array($filename,$ext);
} 
```

所以 if() 语句对我来说毫无意义。它似乎试图捕捉一种永远不会发生的情况。还是我错了，那段代码确实有目的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T22:31:38.227

好吧，我无法解释它为什么这样做的实际原因，但是当您在这样的字符串值上使用特定索引时，您正在访问字符串的特定字符。也就是说，它正在检查文件名是否有第二个字符，然后将其替换为“_”或“a”。如果文件名只有一个字符长，它会将整个文件替换为“_”或“a”。

如果您愿意，我可以更详细地解释该功能的作用，但我对它要完成的工作一无所知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-15T00:41:58.210

Chad Birch 已经回答了我的问题（我最初的困惑是由于不理解**$var[n]**可用于查找字符串的第 n^个字符。），但以防万一其他人想知道，这里是对什么的解释这些功能试图完成：

[MeioUpload](http://www.meiocodigo.com/projects/meioupload/)是 CakePHP 的文件/图像上传行为。使用它，您可以将模型中的任何字段设置为上传字段，如下所示：

```
var $actsAs = array(
    'MeioUpload' => array(
        'picture' => array(
            'dir' => 'img{DS}{model}{DS}{field}',
            'create_directory' => true,
            'allowed_mime' => array('image/jpeg', 'image/pjpeg', 'image/png'),
            'allowed_ext' => array('.jpg', '.jpeg', '.png'),
            'thumbsizes' => array(
                'normal' => array('width'=>180, 'height'=>180),
                'small' => array('width'=>72, 'height'=>72)
            ),
            'default' => 'default.png'
        )
    )
); 
```

在上面的示例中，MeioUpload 会将名为“图片”的字段视为上传字段。这个模型恰好被命名为“ **product** ”，所以上传目录应该是“ **/img/product/picture/** ”。上述配置还指定应生成 2 个缩略图。因此，如果我要上传一个名为“ **foo.png** ”的图像，以下文件将保存在服务器上：

```
/img/product/picture/foo.png
/img/product/picture/thumb.foo.png *
/img/product/picture/thumb.small.foo.png

```

** - 标记为“正常”的拇指大小没有将其密钥附加到其文件名*

此外，默认图像也存储在同一目录中：

```
/img/product/picture/default.png
/img/product/picture/thumb.default.png
/img/product/picture/thumb.small.default.png

```

但由于我们不希望用户上传的图像、默认图像或自动生成的缩略图相互覆盖，因此作者创建了以下一对数组：

```
var $patterns = array(
    "thumb",
    "default"
);

var $replacements = array(
    "t_umb",
    "d_fault"
); 
```

用于在保存上传文件时防止文件名冲突：

```
$filename = str_replace($this->patterns,$this->replacements,$filename); 
```

**_includeDefaultReplacement()**用于在默认图像命名为其他名称时添加新的保留字。

# asp.net - ASP.Net 服务器控制复杂的“属性”

> ID：749584
> 
> 赞同：1
> 
> 时间：2009-04-14T22:24:22.050
> 
> 标签：asp.net, servercontrols

我要提前道歉，因为我对此的理解确实有限，所以如果我不能很好地解释这一点……对不起……

无论如何，我正在尝试创建一个具有复杂属性的 asp.net 服务器控件，可以使用智能感知进行设置。因此，作为一个示例，我将使用汽车，因此服务器控件可能被称为汽车，当我在 Web 表单上实际实现该控件时，我想设置复杂的分层属性，例如：

```
<Control:Car Color="Paint.Metalic.CandyRed" 
             Wheels="Forged.Aluminun.FiveSpoke.GunMetal" /> 
```

或者

```
<Control:Car Color="Paint.Matte.Yellow"
             Wheels="Forged.Steel.SevenSpoke.BareMetal" /> 
```

我尝试在服务器控件中创建公共属性，这些属性只是指向基类的类型/类，但智能感知没有提供任何东西。我可以使用直接的枚举，它会显示出来，但我不能以这种方式做任何分层的事情。我一直在寻找例子，但我似乎找不到任何东西。任何帮助将不胜感激！！！！

谢谢！

一个不同的例子怎么样，因为看起来项目之间的关系或它们的预期价值，虽然完全不重要，但似乎是一个问题。

让我们来看看大陆/国家/州/城市/等之间的关系......通过这个例子，如果我的自定义服务器控件被称为“位置”，那么我希望能够......

```
<Control:Location CurrentLocation="UnitedStates.Nebraska.Lincoln" /> 
```

或者

```
<Control:Location CurrentLocation="Europe.Italy.Napoli" /> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-14T23:00:49.903

您的问题比前两个答案建议的要严重：您不知道自己在做什么。

很抱歉听起来如此刺耳，但你在哪里见过像“Paint.Metalic.CandyRed”这样的东西，它是什么意思？还是“Forged.Aluminun.FiveSpoke.GunMetal”？你到底想表达什么意思？

首先，弄清楚你想要代表什么。然后，创建一个可以表示它的类。然后，将该类的属性添加到服务器控件。您可能必须添加 TypeConverter 或其他设计器支持，以便 ASP.NET 将您首选的文本表示形式转换为类的实例。否则，您将能够获得类似于字体属性的东西。

* * *

我将猜测其中一些值代表什么，并尝试向您展示如何在控件中处理它们。不过，我的猜测可能很遥远。

我将使用“Paint.Metalic.CandyRed”。我假设这适用于汽车定制领域，并且 Color 属性旨在代表整个汽车的表面处理。在那种情况下，“油漆”可能是`enum`指饰面的类型（尽管我不知道其他种类的饰面适用于汽车！）。当我还是个孩子的时候，我从建造模型汽车中知道，油漆可能是金属的、光泽的或平面的，所以这三个将是一个枚举的枚举值。“CandyRed”将是众多颜色中的一种。这会给出这样的结果：

```
public enum FinishType
{
    Paint,
    NotPaint // _I_ don't know!
}

public enum PaintFinish
{
    Metallic,
    Gloss,
    Flat
}

public enum CarColor
{
    CandyRed,
    SilverMist,
    DesertSandMica,
    MagneticGray,
    // etc.
}

public class CarFinish
{
    public FinishType FinishType {get;set;}
    public PaintFinish PaintFinish {get;set;}
    public CarColor CarColor {get;set;}
}

public class Car : WebControl
{
    public CarFinish Color {get;set;}
} 
```

这将允许这样的事情：

```
<Control:Car Color-FinishType="Paint"
             Color-PaintFinish="Metallic"
             Color-CarColor="CandyRed" .../> 
```

或这个：

```
<Control:Car ...>
    <Color FinishType="Paint" PaintFinish="Metallic" CarColor="CandyRed"/>
</Control:Car> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T22:29:14.893

这些项目需要是枚举，因为这是至少在我所看到的所有内容中都支持它的唯一方式。现在，你可以用几个枚举来完成你想要的。

```
namespace Paint
{
    public enum Metalic
    {
        CandyRed
    }

    public enum Matte
    {
        Yellow
    }
} 
```

当然，并不完美，但易于记录和理解！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T22:34:04.540

正如 Mitchel Sellers 所发布的，它们需要是 Enum 或 Constants/Statics。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Drawing;

namespace Paint
{
    public class Metallic
    {
        public static Color CandyRed
        {
            get { return Color.Red; }
        }

        public static Color CandyGreen
        {
            get { return Color.Green; }
        }
    }

    public class Matte
    {
        public static Color Red
        {
            get { return Color.Red; }
        }

        public static Color Green
        {
            get { return Color.Green; }
        }
    }
} 
```

# algorithm - 线性时间排序？

> ID：749585
> 
> 赞同：24
> 
> 时间：2009-04-14T22:25:08.070
> 
> 标签：algorithm, sorting, complexity-theory, time-complexity

给定范围 [0..n^3-1] 内的 n 个整数的输入集，提供线性时间排序算法。

这是我星期四测试的评论，我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-04-14T22:29:39.153

还要看看相关的排序：[鸽子排序](http://en.wikipedia.org/wiki/Pigeonhole_sort)或[计数排序](http://en.wikipedia.org/wiki/Counting_sort)，以及Pukku 提到的[基数排序。](http://en.wikipedia.org/wiki/Radix_sort)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2009-04-14T22:26:22.390

看看[基数排序](http://en.wikipedia.org/wiki/Radix_sort)。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-04-14T23:46:16.580

当人们说“排序算法”时，他们通常指的是“比较排序算法”，这是任何仅取决于能够询问“这个东西比那个更大还是更小”的算法。因此，如果您仅限于询问有关数据的这一问题，那么您将永远不会得到超过 n*log(n) （这是对数据集的 n 阶乘可能排序进行 log(n) 搜索的结果） .

如果您可以摆脱“比较排序”的约束并针对一段数据提出更复杂的问题，例如“此数据的基数为 10 基数是什么”，那么您可以提出任意数量的线性时间排序算法，他们只是占用更多的内存。

这是一个时空权衡。比较排序需要很少或不需要 ram，并在 N*log(n) 时间内运行。基数排序（例如）在 O(n) 时间和 O(log(radix)) 内存中运行。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-14T22:35:25.877

这真的很简单，如果 n=2 并且数字是唯一的：

*   构造一个位数组（2^31-1 位 => ~256MB）。将它们初始化为零。
*   读取输入，对于您看到的每个值，将数组中的相应位设置为 1。
*   扫描数组，对于每个位集，输出相应的值。

复杂度 => O(2n)

否则，使用基数排序：

复杂度 => O(kn)（希望如此）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-14T22:35:42.617

[维基百科](http://en.wikipedia.org/wiki/Sort_algorithms#List_of_sorting_algorithms)展示了许多不同的排序算法及其复杂性。你可能想检查一下

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-14T22:33:23.887

一组有限范围的数字可以由 RANGE 位的位图表示。在这种情况下，一个 500mb 的位图，所以对于除了巨大的列表之外的任何东西，你最好使用 Radix Sort。当你遇到数字 k 时，设置 bitmap[k] = 1。单次遍历列表，O(N)。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-11-14T17:37:01.827

将数字视为三位数字，其中每个数字的范围从 0 到 n-1。使用基数排序对这些数字进行排序。对于每个数字，都会调用计数排序，它占用 Theta(n+n) 时间，因此总运行时间对应于 Theta(n)。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2009-04-15T00:06:21.510

类似的算法是可能的：

```
M;// unsorted array
lngth; //number items of M
for(int i=0; i < lngth; i++)sorted[M[i]]; 
```

它是线性复杂度的唯一可能算法，但它的复杂度为 O(k*N) by ram（N - 数组元素，k - 元素的长度）

# c# - 使用 IIS 7.0 和 Vs2003 在 64 位 Vista 上进行 .Net 1.1 C# 开发

> ID：749595
> 
> 赞同：1
> 
> 时间：2009-04-14T22:30:01.537
> 
> 标签：c#, asp.net, iis-7, 64-bit, .net-1.1

这可以工作吗？- 设置它时遇到很多问题：

即使安装了 .net 1.1 并且 regiis -i 工作，也没有看到 HttpHandlers，工作进程崩溃。

确实需要这个来维护许多旧项目。

是否有特定的安装顺序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-14T22:34:39.687

我能够让我的 .NET 1.1 应用程序在 Vista 64 位的 IIS 7 中运行而没有任何问题。为了让一切正常运行，您必须在 IIS 中创建一个专用于 .NET 1.1 的特殊应用程序池。

如果要调试应用程序，还需要禁用数据执行保护。以下是执行此操作的说明：

[禁用数据执行保护 (DEP)](http://www.realtime-vista.com/administration/2007/04/disabling_data_execution_preve.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T22:35:09.000

Microsoft 不再支持 Vista 上的 Visual Studio 2003，无论是 32 位还是 64 位版本。请参阅[Visual Studio on Vista 常见问题解答](http://msdn.microsoft.com/en-us/vstudio/aa948854.aspx)和[已知问题](http://msdn.microsoft.com/en-us/vstudio/bb188244.aspx)列表。

这意味着即使一切看起来都正常，也可能会出现意想不到的问题。如果不能直接升级到 .NET 2.0（或更高版本），我会使用具有旧 VS 版本的开发 VM 来维护 .NET 1.1 项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T22:59:06.320

认真的人，如果这需要一些工作，但你可以做到，那么升级到.Net 2，你会省去很多麻烦，如果你不能那么就像约翰建议的那样至少升级到 1.1 SP1。

另外，如果我处于您的位置，我将使用 Vmware 在其上运行 xp 和 IIS 6，除此之外，我认为您将面临很多问题，祝您一切顺利

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-14T22:40:59.517

即使您不关心运行受支持的配置，您至少应该升级到 .NET 1.1 SP1。

# iphone - 自动化库构建

> ID：749597
> 
> 赞同：2
> 
> 时间：2009-04-14T22:32:30.753
> 
> 标签：iphone, xcode, build-process, build-automation

我没有任何调整 Xcode 构建脚本的经验。我创建了一个静态库。当为调试模拟器构建引用应用程序时，我必须确保该库还具有最近的调试模拟器构建，而不是说设备调试。有没有办法在引用项目中构建并让静态库自动构建相同的配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-15T15:38:57.790

也许这个帮助会对你有所帮助。

[http://www.mobileorchard.com/code-sharing-via-static-libraries-and-cross-project-references/](http://www.mobileorchard.com/code-sharing-via-static-libraries-and-cross-project-references/)

蒂埃里

# c# - 如何让我的 Windows 窗体执行并显示我的数据库查询？

> ID：749612
> 
> 赞同：2
> 
> 时间：2009-04-14T22:35:02.400
> 
> 标签：c#, combobox, listbox

我有 3 张桌子：

*   **标题：**

    *   TitleId (int 6, 主键)
    *   标题名称（varchar 50）
*   **作者**：

    *   AuthorId (int 6, 主键)
    *   作者姓名（varchar 50）
*   **AuthorsTitles** （这是标题和作者的连接表）

    *   TitleId (int 6)
    *   作者 ID（整数 6）

有一个“多对多”的关系：一个标题可能有很多作者，一个作者可能有很多标题。这就是我需要连接表的原因。

我想要的只是获得一个带有标题的**组合框的 Windows 窗体。**用户选择一个标题，所选标题的一个或多个作者将列在**ListBox**中。

我正在使用 Microsoft Visual C# Express Edition 2008 和 SQL Server Express Edition 2008。

# ruby-on-rails - 使用 Rails，如何使浏览器的缓存过期？

> ID：749613
> 
> 赞同：2
> 
> 时间：2009-04-14T22:35:08.373
> 
> 标签：ruby-on-rails, authentication, browser, caching

我的 Rails 应用程序和浏览器的缓存存在问题：当用户从站点的已验证部分注销时，他们仍然能够使用浏览器上的后退按钮查看已验证的页面。我不想允许这样做。

如何使缓存过期并强制重新加载。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-14T23:31:11.627

以下标题应该这样做。无论您要保护什么页面，都将它们添加到那里。

```
Expires: Sat, 26 Jul 1997 05:00:00 GMT
Last-Modified: "now"
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache 
```

显然，**现在**需要是动态的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T23:35:30.460

为了安全起见，您可能还想指定

```
<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
<META HTTP-EQUIV="EXPIRES" CONTENT="0">
<META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE"> 
```

在您的页面中。

# sql - MS SQL Server 的“介于”是否包括范围边界？

> ID：749615
> 
> 赞同：250
> 
> 时间：2009-04-14T22:35:20.107
> 
> 标签：sql, sql-server, between

比如可以

```
SELECT foo
FROM bar
WHERE foo BETWEEN 5 AND 10 
```

选择 5 和 10 还是将它们排除在范围之外？

* * *

## 回答 #1

> 赞同：274
> 
> 时间：2009-04-14T22:36:25.440

BETWEEN 运算符是包容性的。

来自在线书籍：

> 如果 test_expression 的值大于或等于 begin_expression 的值且小于或等于 end_expression 的值，则 BETWEEN 返回 TRUE。

**日期时间警告**

注意：使用 DateTimes 你必须小心；如果只给出了一个日期，则该值取自当天的午夜；为避免在结束日期内丢失时间，或在多个范围内重复捕获第二天午夜的数据，结束日期应为截止日期后一天午夜前 3 毫秒。3 毫秒，因为任何小于此值的值将向上舍入到第二天的午夜。

例如，要在 2016 年 6 月内获取所有值，您需要运行：

`where myDateTime between '20160601' and DATEADD(millisecond, -3, '20160701')`

IE

`where myDateTime between '20160601 00:00:00.000' and '20160630 23:59:59.997'`

## datetime2 和 datetimeoffset

从日期中减去 3 毫秒将使您容易受到 3 毫秒窗口中缺失行的影响。正确的解决方案也是最简单的一种：

```
where myDateTime >= '20160601' AND myDateTime < '20160701' 
```

* * *

## 回答 #2

> 赞同：264
> 
> 时间：2009-04-14T23:00:17.097

是的，但在日期之间使用时要小心。

```
BETWEEN '20090101' AND '20090131' 
```

真的被解释为 12am，或者

```
BETWEEN '20090101 00:00:00' AND '20090131 00:00:00' 
```

所以会错过 1 月 31 日当天发生的任何事情。在这种情况下，您将不得不使用：

```
myDate >= '20090101 00:00:00' AND myDate < '20090201 00:00:00'  --CORRECT! 
```

或者

```
BETWEEN '20090101 00:00:00' AND '20090131 23:59:59' --WRONG! (see update!) 
```

**更新**：完全有可能在一天的最后一秒内创建记录，日期时间最晚`20090101 23:59:59.997`！！

因此，`BETWEEN (firstday) AND (lastday 23:59:59)`不建议使用该方法。

请改用该`myDate >= (firstday) AND myDate < (Lastday+1)`方法。

关于这个问题的好[文章在这里](http://www.kebabshopblues.co.uk/2009/08/30/one-second-to-midnight-datetimes-in-sql-server-2005/)。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2010-07-30T19:45:02.690

来自 SQL Server 2008 的真实示例。

源数据：

```
ID    Start
1     2010-04-30 00:00:01.000
2     2010-04-02 00:00:00.000
3     2010-05-01 00:00:00.000
4     2010-07-31 00:00:00.000 
```

询问：

```
SELECT
    *
FROM
    tbl
WHERE
    Start BETWEEN '2010-04-01 00:00:00' AND '2010-05-01 00:00:00' 
```

结果：

```
ID    Start
1     2010-04-30 00:00:01.000
2     2010-04-02 00:00:00.000 
```

![替代文字](https://imgur.com/sTKRO.png)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2011-12-26T18:29:17.123

如果您遇到了这个问题，并且真的不想尝试在代码中添加一天，那么让数据库来做吧..

```
myDate >= '20090101 00:00:00' AND myDate < DATEADD(day,1,'20090101 00:00:00') 
```

如果您确实包含时间部分：确保它引用午夜。否则，您可以简单地省略时间：

```
myDate >= '20090101' AND myDate < DATEADD(day,1,'20090101') 
```

不用担心。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2009-04-14T22:40:44.990

> **[之间](https://docs.microsoft.com/en-us/sql/t-sql/language-elements/between-transact-sql)(Transact-SQL)**
> 
> 指定要测试的 ( *n* )（*包括*）范围。

```
test_expression [ NOT ] BETWEEN begin_expression AND end_expression 
```

> **论据**
> 
> ```
> test_expression 
> ```
> 
> 是在 begin_expression 和 end_expression 定义的范围内测试的表达式。test_expression 必须与 begin_expression 和 end_expression 的数据类型相同。
> 
> ```
> NOT 
> ```
> 
> 指定谓词的结果是否定的。
> 
> ```
> begin_expression 
> ```
> 
> 是任何有效的表达式。begin_expression 必须与 test_expression 和 end_expression 的数据类型相同。
> 
> ```
> end_expression 
> ```
> 
> 是任何有效的表达式。end_expression 必须与 test_expression 和 begin_expression 的数据类型相同。
> 
> ```
> AND 
> ```
> 
> 充当占位符，指示 test_expression 应在 begin_expression 和 end_expression 指示的范围内。
> 
> **评论**
> 
> 要指定独占范围，请使用大于 (>) 和小于运算符 (<)。如果 BETWEEN 或 NOT BETWEEN 谓词的任何输入为 NULL，则结果为 UNKNOWN。
> 
> **结果值**
> 
> 如果 test_expression 的值大于或等于 begin_expression 的值且小于或等于 end_expression 的值，则 BETWEEN 返回 TRUE。
> 
> 如果 test_expression 的值小于 begin_expression 的值或大于 end_expression 的值，NOT BETWEEN 返回 TRUE。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-01-30T02:57:35.940

如果列数据类型是日期时间，那么您可以执行以下操作以从日期时间中消除时间并仅在日期范围之间进行比较。

```
where cast(getdate() as date) between cast(loginTime as date) and cast(logoutTime as date) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-27T13:44:23.547

它确实包括边界。

```
declare @startDate date = cast('15-NOV-2016' as date) 
declare @endDate date = cast('30-NOV-2016' as date)
create table #test (c1 date)
insert into #test values(cast('15-NOV-2016' as date))
insert into #test values(cast('20-NOV-2016' as date))
insert into #test values(cast('30-NOV-2016' as date))
select * from #test where c1 between @startDate and @endDate
drop table #test
RESULT    c1
2016-11-15
2016-11-20
2016-11-30

declare @r1 int  = 10
declare @r2 int  = 15
create table #test1 (c1 int)
insert into #test1 values(10)
insert into #test1 values(15)
insert into #test1 values(11)
select * from #test1 where c1 between @r1 and @r2
drop table #test1
RESULT c1
10
11
15 
```

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2015-03-24T01:32:22.187

我一直用这个：

我的日期在 startDate 和 (endDate+1) 之间

# apache-flex - 破解 Flex 数据连接的工具

> ID：749618
> 
> 赞同：0
> 
> 时间：2009-04-14T22:35:34.740
> 
> 标签：apache-flex, flash, security

我正在构建一个测试计划以验证我们的 Flex/J2EE 应用程序的安全性。我相信我们在过度信任 Flex 应用程序方面存在一些问题，但我需要能够量化这些问题。

理想的方式是向我展示在应用程序之外进行数据服务调用的方式。是否有工具或说明可以说明如何执行此操作？在我们发布给我们的测试版客户之后，我真的不想发现这些东西。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-15T15:00:49.783

Charles 是一个优秀的 HTTP 调试代理，它可以解析 AMF 数据并将其显示为树。您还可以设置“断点”来拦截 HTTP 调用并修改请求或响应中的 AMF 数据。

[http://www.charlesproxy.com/](http://www.charlesproxy.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T22:39:55.180

Windows 上的 Fiddler 非常适合监控 http 连接。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-04-14T22:39:57.380

首先，提供 Flex 与 J2EE 服务器通信的端口，然后使用 Ethereal 或 Wireshark，您可以查看它是否使用加密通道 :-)

# sql - 如何获取存储过程的返回值

> ID：749622
> 
> 赞同：35
> 
> 时间：2009-04-14T22:39:36.727
> 
> 标签：sql, tsql, stored-procedures, ado.net

可能是一个容易回答的问题。我有这个程序：

```
CREATE PROCEDURE [dbo].[AccountExists]
    @UserName nvarchar(16)
AS
IF EXISTS (SELECT Id FROM Account WHERE UserName=@UserName)
SELECT 1
ELSE SELECT 0 
```

当我有调用此过程并执行此操作的 ADO.NET 代码时：

```
return Convert.ToBoolean(sproc.ExecuteScalar()); 
```

返回 true 或 false。

当我将存储过程更改为 RETURN 1 或 0 而不是 SELECT 时：

```
ALTER PROCEDURE [dbo].[AccountExists]
    @UserName nvarchar(16)
AS
IF EXISTS (SELECT Id FROM Account WHERE UserName=@UserName)
RETURN 1
ELSE RETURN 0 
```

sproc.ExecuteScalar() 返回 null。如果我尝试 sproc.ExecuteNonQuery() ，则会返回 -1。

**如何在 ADO.NET 中获得带有 RETURN 的存储过程的结果？**

我需要 AccountExists 来 RETURN 而不是 SELECT 所以我可以让另一个存储过程调用它：

```
--another procedure to insert or update account

DECLARE @exists bit

EXEC @exists = [dbo].[AccountExists] @UserName 

IF @exists=1
--update account
ELSE
 --insert acocunt 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2009-04-14T22:45:29.113

添加参数，使用`ParameterDirection.ReturnValue`. 执行后返回值将出现在参数中。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-04-25T14:54:40.903

此外，要从 ADO.NET 检索结果（或任何其他输出参数），您必须先循环遍历所有返回的结果集（或使用 NextResult 跳过它们）

这意味着，如果您有这样定义的过程：

```
CREATE PROC Test(@x INT OUT) AS
    SELECT * From TestTable
    SELECT @x = 1 
```

并尝试这样做：

```
SqlCommand cmd = connection.CreateCommand();
cmd.CommandType = CommandType.StoredProcedure;
cmd.CommandText = "Test"
cmd.Parameters.Add("@x", SqlDbType.Int).Direction = ParameterDirection.Output;
cmd.Parameters.Add("@retval", SqlDbType.Int).Direction = ParameterDirection.ReturnValue;

cmd.Execute();
int? x = cmd.Parameters["@x"].Value is DBNull ? null : (int?)cmd.Parameters["@x"].Value; 
```

那么 x 将包含 null。要使其工作，您必须执行以下过程：

```
using (var rdr = cmd.ExecuteReader()) {
    while (rdr.Read())
        MaybeDoSomething;
}
int? x = cmd.Parameters["@x"].Value is DBNull ? null : (int?)cmd.Parameters["@x"].Value; 
```

在后一种情况下，x 将按预期包含 1。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-14T22:50:08.760

ExecuteScalar 返回第一行的第一列。由于您不再选择并创建结果集，这就是它返回 null 的原因。仅供参考。约翰桑德斯有正确的答案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-21T19:45:03.220

我用我的设置尝试了其他解决方案，但它们不起作用，但我使用的是 VB6 和 ADO 6.x。我还想指出，proc 返回 0 表示成功。不要忘记也有一些功能没有这种约定。在 MSDN 上找到了这个，它确实对我有用：

```
Debug.Print "starting at ..." & TimeValue(Now)

Dim cn As New ADODB.Connection
Dim cmd As New ADODB.Command
'These are two possible connection strings. You could also have Integrated Security instead of these for SqS for security
'cn.ConnectionString = "Data Source=[yourserver];User ID=[youruser];Password=[yourpw];Initial Catalog=[yourdb];Provider=SQLNCLI10.1;Application Name=[yourapp]"
cn.ConnectionString = "Data Source=[yours];User ID=[youruser];Password=[yourpassword];Initial Catalog=[Yourdb];Provider=sqloledb;Application Name=[yourapp]"
cn.Open

cmd.ActiveConnection = cn
cmd.CommandText = "AccountExists"
cmd.CommandType = adCmdStoredProc
cmd.Parameters.Append cmd.CreateParameter(, adInteger, adParamReturnValue)
cmd.Parameters.Append cmd.CreateParameter("UserName",adVarChar, adParamInput, 16, UserNameInVB)

cmd.Execute
Debug.Print "Returnval: " & cmd.Parameters(0)
cn.Close

Set cmd = Nothing
Set cn = Nothing

Debug.Print "finished at ..." & TimeValue(Now) 
```

运行此（Debug.Print）时，结果将出现在即时窗口中

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-14T22:51:12.393

只是一些建议，但默认情况下，除非您指定其他内容，否则存储过程会返回 0。因此，通常使用 0 来表示成功，而使用非零值来指定返回错误条件。我会接受[约翰的建议](https://stackoverflow.com/questions/749622/t-sql-ado-net/749633#749633)，或者使用[`output parameter`](http://msdn.microsoft.com/en-us/library/59x02y99(VS.71).aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-31T07:57:47.167

有几种方法可以使用 VBA 取回值：

1.  记录集
2.  受影响的记录数（仅适用于插入/更新/删除，否则为 -1）
3.  输出参数
4.  返回值

我的代码演示了所有四个。这是一个返回值的存储过程：

```
Create PROCEDURE CheckExpedite
    @InputX  varchar(10),
    @InputY int,
    @HasExpedite int out
AS
BEGIN
    Select @HasExpedite = 9 from <Table>
    where Column2 = @InputX and Column3 = @InputY

    If @HasExpedite = 9
        Return 2
    Else
        Return 3
End 
```

这是我在 Excel VBA 中使用的子程序。您需要参考 Microsoft ActiveX Data Objects 2.8 Library。

```
Sub CheckValue()

    Dim InputX As String: InputX = "6000"
    Dim InputY As Integer: InputY = 2014

    'open connnection
    Dim ACon As New Connection
    ACon.Open ("Provider=SQLOLEDB;Data Source=<SqlServer>;" & _
        "Initial Catalog=<Table>;Integrated Security=SSPI")

    'set command
    Dim ACmd As New Command
    Set ACmd.ActiveConnection = ACon
    ACmd.CommandText = "CheckExpedite"
    ACmd.CommandType = adCmdStoredProc

    'Return value must be first parameter else you'll get error from too many parameters
    'Procedure or function "Name" has too many arguments specified.
    ACmd.Parameters.Append ACmd.CreateParameter("ReturnValue", adInteger, adParamReturnValue)
    ACmd.Parameters.Append ACmd.CreateParameter("InputX", adVarChar, adParamInput, 10, InputX)
    ACmd.Parameters.Append ACmd.CreateParameter("InputY", adInteger, adParamInput, 6, InputY)
    ACmd.Parameters.Append ACmd.CreateParameter("HasExpedite", adInteger, adParamOutput)

    Dim RS As Recordset
    Dim RecordsAffected As Long

    'execute query that returns value
    Call ACmd.Execute(RecordsAffected:=RecordsAffected, Options:=adExecuteNoRecords)

    'execute query that returns recordset
    'Set RS = ACmd.Execute(RecordsAffected:=RecordsAffected)

    'get records affected, return value and output parameter
    Debug.Print "Records affected: " & RecordsAffected
    Debug.Print "Return value: " & ACmd.Parameters("ReturnValue")
    Debug.Print "Output param: " & ACmd.Parameters("HasExpedite")

    'use record set here
    '...

    'close
    If Not RS Is Nothing Then RS.Close
    ACon.Close

End Sub 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-14T22:47:20.810

如果您打算像下面的示例那样使用它 AccountExists 可能会更好地作为一个函数。

否则，您仍然应该能够通过对结果进行选择从另一个存储过程调用它来获取存储过程的结果。

# python - Python：如何估计/计算数据结构的内存占用？

> ID：749625
> 
> 赞同：15
> 
> 时间：2009-04-14T22:40:05.943
> 
> 标签：python, memory-management, memory-size

估计对象内存占用的好方法是什么？

相反，测量足迹的好方法是什么？

例如，假设我有一个字典，其值是整数、浮点元组列表：

```
d['key'] = [ (1131, 3.11e18), (9813, 2.48e19), (4991, 9.11e18) ] 
```

我有 4G 的物理内存，想弄清楚在我溢出到交换之前我可以在内存中存储多少行（键：值）。这是在 linux/ubuntu 8.04 和 OS X 10.5.6 上。

另外，找出程序实际内存占用的最佳方法是什么？我如何最好地弄清楚它何时耗尽物理内存并溢出？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-14T22:53:08.783

[Guppy](http://guppy-pe.sourceforge.net/)有一个很好的内存分析器（Heapy）：

```
>>> from guppy import hpy
>>> hp = hpy()
>>> hp.setrelheap() # ignore all existing objects
>>> d = {}
>>> d['key'] = [ (1131, 3.11e18), (9813, 2.48e19), (4991, 9.11e18) ]
>>> hp.heap()
 Partition of a set of 24 objects. Total size = 1464 bytes.
 Index  Count   %     Size   % Cumulative  % Kind (class / dict of class)
     0      2   8      676  46       676  46 types.FrameType
     1      6  25      220  15       896  61 str
     2      6  25      184  13      1080  74 tuple
 ... 
```

Heapy 的文档有些不足，因此您可能需要深入研究网页或源代码，但它非常强大。还有一些可能相关的[文章。](http://www.pkgcore.org/trac/pkgcore/doc/dev-notes/heapy.rst)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-14T22:46:55.617

您可以使用内存分析器执行此操作，我知道其中有几个：

1.  [PySizer](http://pysizer.8325.org/) - 可能已经过时，正如主页现在建议的那样：

2.  [堆](http://guppy-pe.sourceforge.net/#Heapy)。

这可能是[这个](https://stackoverflow.com/questions/110259/python-memory-profiler)问题的重复。

# iphone - 使用来自 ObjectiveC/iPhone 的 TwitPic API

> ID：749630
> 
> 赞同：2
> 
> 时间：2009-04-14T22:43:59.273
> 
> 标签：iphone, objective-c, api, twitter

这里有一个类似的问题，我已经阅读过，我试图遵循那里给出的建议......我认为我已经完成了 95%，但剩下的 5%......你知道 ;-)

所以我正在尝试调用 twitPic API 来上传图像，并且我将图像包含在 UIImageView 中，我正在屏幕上显示它（我可以看到它，所以它肯定存在）。我形成 API 调用的代码如下所示：

```
 NSURL *url = [NSURL URLWithString:@"http://twitpic.com/api/upload"];
NSString *username = @"myUsername";
NSString *password = @"myPassword";
NSData *twitpicImage = UIImagePNGRepresentation(imageView.image);

// Now, set up the post data:
ASIFormDataRequest *request = [[[ASIFormDataRequest alloc] initWithURL:url] autorelease];

[request setPostValue:twitpicImage forKey:@"media"];
[request setPostValue:username forKey:@"username"];
[request setPostValue:password forKey:@"password"];

// Initiate the WebService request
[request start]; 
```

我收到一条错误消息，指出“找不到图像”。

我做错了什么很明显吗？有任何提示吗？我在 ObjectiveC 中只有一周的深度，所以这很可能是一个真正的新手错误。

在同一条轨道上-我不清楚如何在此处的代码中正确捕获成功或失败-我目前正在将“请求响应字符串”转储到不是最好的警报-我如何检查结果适当地？

我还看到了“NSLog”的使用——我怀疑它是一个调试/控制台日志记录工具——但我在 XCode 中的任何地方都看不到它的输出——它似乎没有显示在调试器中——任何有线索吗？！

抱歉，如果以上内容真的很愚蠢-我可以有点嘲笑-但我对我的iPhone冒险有点孤立-没有人可以反弹任何东西等等-所以我在这里发泄一下;-)

干杯，

杰米。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-15T07:30:02.800

您需要使用 setData 方法将图像数据复制到帖子中，如下所示：

```
[request setData:twitPicImage forKey:@"media"]; 
```

您正在进行同步调用，这将在您上传所有图像数据时停止您的应用程序 - 您可能希望切换到使用 NSOperationQueue 或允许您显示进度条的 ASINetworkQueue 子类。

您应该能够在 XCode 的调试器窗口中看到 NSLog 输出。确保您已切换到此（打开喷雾罐控制左上角）。您也可以启动控制台。

# iphone - 将密码存储在 NSString 中而不在内存中读取

> ID：749631
> 
> 赞同：8
> 
> 时间：2009-04-14T22:44:37.837
> 
> 标签：iphone, cocoa, security, nsstring, passwords

我需要将密码存储在`NSString`对象中；但是，我想要一些方法来混淆它们，所以它们不能直接从内存中读取。

这是一个 Mac OS X (10.5) 应用程序，但也适用于 iPhone 的解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-15T07:01:48.063

如果您使用钥匙串来存储密码，那么您可以处理不透明的钥匙串，而不是传递字符串`SecKeychainItemRefs`，只在需要的地方检索明文。这也是 Mac 用户期望他们的密码被处理的方式。不幸的是，不知道为什么你“需要将密码存储在`NSString`对象中”，我无法判断这是否真的 :-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-15T01:59:21.333

难道你不能在将它们放入 NSString 之前对它们进行 md5 吗？然后当你去测试时，md5输入字符串并将其与存储的内容进行比较？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-15T07:16:29.353

在 iPhone 上，沙盒将阻止任何人访问您的密码。在桌面上它不是那么容易。

您应该将密码存储为散列而不是明文。我相信这会在不影响功能的情况下为您提供所需的结果。您永远无法做的唯一想法是再次访问明文密码 - 如果您想分析它的强度或将其传递给另一个服务。但总的来说，哈希不会牺牲功能。

以下代码在 rawPassword 中获取密码，并将其 SHA-1 哈希存储在 passwordHash 中。

```
#import <CommonCrypto/CommonDigest.h>

const char* utf8PasswordRepresentation = [rawPassword UTF8String];
unsigned char * rawHash = malloc(CC_SHA1_DIGEST_LENGTH);

CC_SHA1(utf8PasswordRepresentation, strlen(utf8PasswordRepresentation), rawHash);

NSMutableString* passwordHash = [NSMutableString CC_SHA1_DIGEST_LENGTH*2];
for (int i = 0 ; i< CC_SHA1_DIGEST_LENGTH; i++)
    [passwordHash appendFormat:@"%02x" , rawHash[i]]; 
```

请注意，这里没有内存管理。

查看 wikipedia 条目以获取[密码散列的解释](http://en.wikipedia.org/wiki/Cryptographic_hash_function)。

intertubes周围有许多相同的代码版本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-11-23T23:14:06.770

我认为张贴者指的是在内存中混淆密码，所以你不能只从内存中读取 ivar 的内容。谷歌的 GData 库有一些有用的代码，用于异或密码，存储为实例变量中的 NSMutableData。

[GDataServiceBase.m 的源代码](http://code.google.com/p/gdata-objectivec-client/source/browse/trunk/Source/BaseClasses/GDataServiceBase.m#52 "来自 GDataServiceBase.m")

```
// XorPlainMutableData is a simple way to keep passwords held in heap objects
// from being visible as plain-text
static void XorPlainMutableData(NSMutableData *mutable) {

    // this helps avoid storing passwords on the heap in plaintext
    const unsigned char theXORValue = 0x95; // 0x95 = 0xb10010101

    unsigned char *dataPtr = [mutable mutableBytes];
    NSUInteger length = [mutable length];

    for (NSUInteger idx = 0; idx < length; idx++) {
        dataPtr[idx] ^= theXORValue;
    }
} 
```

您可以使用 XOR 保存/恢复密码（请参阅同一文件中的 #password 和 #setUserCredentialsWithUsername:password: 方法）。XOR 不是高科技加密，但足以阻止随意窥探。对于 GData 客户端，您可能在应用程序中拥有一个长期存在的服务/管理器对象，该对象保留对密码数据的引用，我认为这是一种合理的方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-08-11T16:01:55.733

可以在此处找到一组非常有用的代码，用于在钥匙串中存储和检索密码：

[http://log.scifihifi.com/post/55837387/simple-iphone-keychain-code](http://log.scifihifi.com/post/55837387/simple-iphone-keychain-code)

我用过，效果很好。

# c++ - Thoughtworks Cruise：单元测试？

> ID：749632
> 
> 赞同：2
> 
> 时间：2009-04-14T22:44:55.887
> 
> 标签：c++, unit-testing, continuous-integration, thoughtworks-go

我正在评估 Cruise（注意！不是 CruiseControl，而是 Cruise（商业））使用非托管 MSVC++ 2008 项目进行 CI。我使用 GoogleTest 框架进行单元测试。我知道 GTest 可以将其结果输出为 JUnit XML 或 XML 格式。我的问题是，Cruise 是否支持 JUnit/XML 格式？

Cruise 如何知道我的单元测试是否失败？

来自 Thoughtworks 的更多[信息](http://studios.thoughtworks.com/cruise-continuous-integration/1.2/help/concepts_in_cruise.html)：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-14T22:50:04.533

根据文档，是的，它确实支持 JUnit xml 格式。请参阅页面底部。倒数第二节称为“发布测试”

[http://studios.thoughtworks.com/cruise-continuous-integration/1.2/help/managing_artifacts_and_reports.html](http://studios.thoughtworks.com/cruise-continuous-integration/1.2/help/managing_artifacts_and_reports.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-12-07T12:15:06.490

当您的测试结果很大或很难看时，另一种选择是将结果转换为 html（例如通过 xslt），然后将 html 作为新选项卡包含在 Cruise 构建中。我们用 ncover 来做这件事，效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-20T06:56:39.093

[在http://community.thoughtworks.com/hives/df92e43957/summary](http://community.thoughtworks.com/hives/df92e43957/summary)上询问 Cruise 人员可能是值得的

# actionscript-3 - Actionscript 3.0：在严格模式下显示 object walker

> ID：749634
> 
> 赞同：1
> 
> 时间：2009-04-14T22:45:40.377
> 
> 标签：actionscript-3

这是一个显示对象漫游器的文档类。确保在测试课程时**关闭**严格模式（[howto here ）。](http://bayimg.com/image/caopcaabp.jpg)还要在舞台上放一些东西。当关闭严格模式时，对象步行器工作得很好。但是，我也想让它在严格模式下工作。我尝试更改有问题的部分和 addig (dispObj as DisplayObject)，但没有成功。

```
package {

    import flash.display.MovieClip;
    import flash.display.DisplayObject;
    import flash.display.DisplayObjectContainer;

    public class DisplayWalker extends MovieClip {

        public function DisplayWalker() {
            showChildren(stage, 0);
        }

        private function padIndent(indents:int):String {
            var indent:String = "";
            for (var i:uint = 0; i < indents; i++) {
                indent += "        ";
            }
            return indent;
        }

        private function showChildren(dispObj:DisplayObject, indentLevel:Number):void {
            for (var i:uint = 0; i < dispObj.numChildren; i++) {
                var obj:DisplayObject = dispObj.getChildAt(i);
                if (obj is DisplayObjectContainer) {
                    trace(padIndent(indentLevel), obj, obj.name);
                    showChildren(obj, indentLevel + 1);
                } else {
                    trace(padIndent(indentLevel), obj);
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-14T23:31:07.600

您的类将在严格模式下生成编译时错误，因为您正在尝试访问 numChildren 和 getChildAt 方法，这些方法在 DisplayObject 类上不可用，但首先在它的一个子类 DisplayObjectContainer 上可用。

它在非严格模式下工作的原因是，在运行时，您实际上是在传递 DisplayObjectContainer 的子类（Stage、Sprite 等）。

只需在 showChildren 方法中将 DisplayObject 替换为 DisplayObjectContainer 作为 dispObj 的类型。DisplayObjects 不能有子对象，并且始终是显示对象树中的叶子，这是您的 showChildren 方法必须考虑的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-15T00:07:21.413

Stiggler 是在正确的轨道上，但正确地没有看到您已经检查了 DisplayObjectContainers。

你只需要稍微修改你的代码。我没有测试代码，但无论如何你应该能够弄清楚;）

```
private function showChildren(dispObj:DisplayObject, indentLevel:Number):void
{
    var dOC:DisplayObjectContainer = dispObj as DisplayObjectContainer;

    if(dOC == null)
    {
        trace(padIndent(indentLevel),obj);
    }
    else
    {    
        trace(padIndent(indentLevel), obj, obj.name);

        var obj:DisplayObject = null;

        for (var i:uint = 0; i < dispObj.numChildren; i++)
        {
            obj = dOC.getChildAt(i);
            showChildren(obj, indentLevel + 1);
        }
    }
} 
```

# c# - 关闭 MS Office C# 控制台

> ID：749640
> 
> 赞同：0
> 
> 时间：2009-04-14T22:49:15.097
> 
> 标签：c#, interop, automation, ms-word, ms-office

我正在编写一个自动化测试来确定 rtf 文件是否被 MS Word 成功打开。到目前为止，我遍历给定目录中的所有 rtfs 并打开它们。稍后我将不得不捕获异常以生成报告（记录崩溃单词的文件名）。

我正在处理大量文件。我的应用程序当前正在为每个文件打开一个新的 Word 实例。谁能告诉我如何关闭Word？

```
public class LoadRTFDoc
{
    private object FileName;
    private object ReadOnly;
    private object isVisible;
    private object Missing;
    private ApplicationClass WordApp;
    private object Save;
    private object OrigFormat;
    private object RouteDoc;

    public LoadRTFDoc(object filename)
    {
        this.WordApp = new ApplicationClass();
        this.FileName = filename;
        ReadOnly = false;
        isVisible = true;
        Missing = System.Reflection.Missing.Value;
        Save = System.Reflection.Missing.Value;
        OrigFormat = System.Reflection.Missing.Value;
        RouteDoc = System.Reflection.Missing.Value;

    }

    public void OpenDocument()
    {
        WordApp.Visible = true;
        WordApp.Documents.Open(ref FileName, ref Missing, ref ReadOnly, ref Missing, ref Missing,
                                   ref Missing, ref Missing, ref Missing, ref Missing, ref Missing, ref Missing,
                                   ref isVisible, ref Missing, ref Missing, ref Missing, ref Missing);
        WordApp.Activate();
    }
    public void CloseDocument()
    {
        WordApp.Documents.Close(ref Save, ref OrigFormat, ref RouteDoc);
    }

} 
```

打开每个文档后，我正在执行 CloseDocument() 方法。有人对此有一些见解吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-14T23:11:56.553

```
WordApp.Quit() 
```

将退出应用程序。

但是，最安全的方法是获取进程的句柄并杀死 winword 进程。在 C# 中，以下代码将执行此操作：

```
foreach (Process p in Process.GetProcessesByName("winword"))
{
    if (!p.HasExited)
    {
        p.Kill();
    }
} 
```

原因是它会经常发生（我假设，特别是因为您正在测试不是由 Word 创建的文档）Word 将挂起一个打开的消息框，例如一个修复对话框。在这种情况下，终止进程是关闭应用程序的最简单方法。

我建议您首先尝试使用`Application.Quit`. 如果这不起作用，则表明您的输入文件有问题（很可能是因为修复对话框阻止了 Word）。您应该在日志中将此记录为错误，然后继续终止 winword 进程。

您可能面临的另一个问题是 Word 的文档恢复功能会在启动时阻止应用程序（因此在单击恢复对话框之前无法打开文档）。可以通过在启动 Word 之前删除 HKCU 和 HKLM 下的以下注册表项来禁用文档恢复（将 12.0 替换为 Word 2003 的 11.0 和 Word XP 的 10.0）：

```
Software\Microsoft\Office\12.0\Word\Resiliency 
```

不言而喻，杀死 Word 是一种相当粗鲁的方法，然而，它很简单，而且相当健壮。上面的代码只会为用户杀死任何 Word 实例。如果你只想杀死一个特定的实例，事情会变得更加困难。您必须检索特定 Word 实例的进程 ID。通常这可以通过搜索实例的窗口标题来完成，例如使用 WinAPI 函数，如`FindWindowByCaption`和`GetWindowThreadProcessId`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T23:11:28.227

`WordApp.Quit`其次是`ReleaseComObect`dance2die所说的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T22:59:53.213

使用[System.Runtime.InteropServices.ReleaseComObject](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.releasecomobject.aspx)
并将您的单词对象实例的引用传递给它`WordApp`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-15T17:06:35.613

你们都是对的。我的问题是我在循环中创建 ApplicationClass 的实例。哎呀。然后我在关闭每个文档后使用 Quit() 来终止 winword.exe 进程。

谢谢你们！

-缺口

# java - Java 中同步是如何工作的

> ID：749641
> 
> 赞同：17
> 
> 时间：2009-04-14T22:49:41.833
> 
> 标签：java, multithreading, deadlock

首先，[这是一个示例](http://java.sun.com/docs/books/tutorial/essential/concurrency/deadlock.html)：

```
public class Deadlock {
    static class Friend {
        private final String name;
        public Friend(String name) {
            this.name = name;
        }
        public String getName() {
            return this.name;
        }
        public synchronized void bow(Friend bower) {
            System.out.format("%s: %s has bowed to me!%n", 
                    this.name, bower.getName());
            bower.bowBack(this);
        }
        public synchronized void bowBack(Friend bower) {
            System.out.format("%s: %s has bowed back to me!%n",
                    this.name, bower.getName());
        }
    }

    public static void main(String[] args) {
        final Friend alphonse = new Friend("Alphonse");
        final Friend gaston = new Friend("Gaston");
        new Thread(new Runnable() {
            public void run() { alphonse.bow(gaston); }
        }).start();
        new Thread(new Runnable() {
            public void run() { gaston.bow(alphonse); }
        }).start();
    }
} 
```

我不明白阻塞是*如何*发生的。主函数启动两个线程，每个线程都开始自己的弓。

“同步”到底是什么块？为同一个对象运行相同的函数（正如我最初认为的那样）？同一类的所有对象都具有相同的功能？同一个对象的所有同步函数？同一类的所有对象的所有同步函数？

帮帮我。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-04-14T22:57:12.800

在 Java 中，每个都`Object`为线程提供了`synchronize`锁定或锁定它的能力。当一个方法被同步时，该方法使用它的对象实例作为锁。在您的示例中，方法`bow`和`bowBack`都是`synchronized`，并且两者都在同一个 class`Friend`中。这意味着任何执行这些方法的线程都将在一个`Friend`实例上同步作为它的锁。

导致死锁的一系列事件是：

1.  第一个线程开始调用`alphonse.bow(gaston)`，它`synchronized`在`alphonse` `Friend`对象上。这意味着线程必须从这个对象获取锁。
2.  第二个线程开始调用`gaston.bow(alphonse)`，它`synchronized`在`gaston` `Friend`对象上。这意味着线程必须从这个对象获取锁。
3.  现在开始的第一个线程调用`bowback`并等待锁定`gaston`被释放。
4.  现在启动的第二个线程调用`bowback`并等待`alphonse`释放锁。

要更详细地显示事件的顺序：

1.  `main()`开始在主 Therad 中执行（称为线程 #1），创建两个`Friend`实例。到目前为止，一切都很好。
2.  主线程使用代码启动它的第一个新线程（称为线程#2）`new Thread(new Runnable() { ...`。线程 #2 调用`alphonse.bow(gaston)`，它`synchronized`在`alphonse` `Friend`对象上。线程#2 因此获取`alphonse`对象的“锁”并进入`bow`方法。
3.  这里发生了一个时间片，原始线程有机会进行更多处理。
4.  主线程启动第二个新线程（称为线程#3），就像第一个线程一样。线程 #3 调用`gaston.bow(alphonse)`，在`gaston` `Friend`对象上同步。由于还没有人获得`gaston`对象实例的“锁”，线程#3成功地获得了这个锁并进入了`bow`方法。
5.  这里发生了一个时间片，线程#2 有机会进行更多处理。
6.  线程 #2现在调用`bower.bowBack(this);`. 这是调用的逻辑等价物。因此，此方法在实例上。此对象的锁已被获取并由另一个线程（线程#3）持有。因此，线程#2 必须等待锁定被释放。线程进入等待状态，允许线程#3 继续执行。`bower``gaston``gaston.bowBack(alphonse)``synchronized``gaston``gaston`
7.  线程#3 现在调用`bowback`，在本例中，它在逻辑上与调用相同`alphonse.bowBack(gaston)`。为此，它需要为`alphonse`实例获取锁，但该锁由 Thread #2 持有。该线程现在进入等待状态。

而且您现在处于两个线程都无法执行的位置。线程#2 和线程#3 都在等待释放锁。但是如果没有线程取得进展，就不能释放任何锁。但是如果不释放锁，两个线程都无法取得进展。

因此：死锁！

死锁通常取决于发生的特定事件序列，这可能会使调试变得困难，因为它们可能难以重现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T22:53:27.393

[同步有两个效果](http://java.sun.com/docs/books/tutorial/essential/concurrency/syncmeth.html)：

*   首先，同一对象上的同步方法的两次调用不可能交错。当一个线程正在为一个对象执行同步方法时，所有其他为同一对象调用同步方法的线程都会阻塞（暂停执行），直到第一个线程处理完该对象。
*   其次，当同步方法退出时，它会自动与任何后续对同一对象的同步方法调用建立起之前的关系。这保证了对象状态的更改对所有线程都是可见的。

所以简而言之，它会阻止对同一对象的同步方法的任何调用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-14T22:54:58.407

同一对象的所有同步函数。将方法标记为“已同步”与在方法的全部内容周围放置“已同步 (this) {”块非常相似。我不说“相同”的原因是因为我不知道编译器是否发出相同的字节码，但是 AFAIK 定义的运行时效果是相同的。

死锁是一种经典的锁反转。一个线程锁定 alphonse。然后（或同时在多核系统上）另一个线程锁定gaston。这部分要求线程的调度恰好在正确的点交错。

然后每个线程（以任何顺序或同时）尝试获取已由另一个线程持有的锁，因此每个线程都进入睡眠状态。在对方释放其锁之前，两者都不会唤醒，但在唤醒（或终止）之前，两者都不会释放其锁。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-14T23:03:55.730

同步方法与将所有这些方法代码封装到一个

```
synchronized(this) {
  /// code here ...
} 
```

堵塞。

对于给定的对象实例*o*，一次只有一个线程可以运行任何*synchronized(o)*块。其他所有尝试执行此操作的线程都会哭泣，直到运行该块的线程（具有*同步锁*）退出该块（放弃锁）。

在您的情况下，当 Alphonse 在线程 1 中开始鞠躬时发生死锁，从而进入同步块。然后线程 1 被系统换出，因此线程 2 可以启动，并让 Gaston 鞠躬。但是 Gaston 还不能退缩，因为它正在 Alphonse 上进行同步，并且 Thread 1 已经拥有那个锁。因此它将等待线程 1 离开该块。然后系统将换回线程 1，这将尝试让 Alphonse 回弓。除非它不能这样做，因为线程 2 在 Gaston 上具有同步锁。两个线程现在都卡住了，等待对方完成鞠躬后才能鞠躬……

# actionscript-3 - Actionscript 3.0：范围

> ID：749650
> 
> 赞同：7
> 
> 时间：2009-04-14T22:54:16.130
> 
> 标签：actionscript-3, scope

教程通常不涉及 Actionscript 中的范围。你能指点我一些文件和/或解释我应该知道什么。我想避免某些类引起的问题在某些地方不可见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-14T23:10:03.720

这些应该会有所帮助。

功能范围：

[http://livedocs.adobe.com/flex/3/html/help.html?content=03_Language_and_Syntax_21.html](http://livedocs.adobe.com/flex/3/html/help.html?content=03_Language_and_Syntax_21.html)

包装和命名空间：

[http://livedocs.adobe.com/flex/3/html/03_Language_and_Syntax_04.html#119303](http://livedocs.adobe.com/flex/3/html/03_Language_and_Syntax_04.html#119303)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T23:56:07.573

你有点含糊，但希望我能理解你；）

类的作用域通常很容易处理，它主要归结为包。包以简单的树形结构创建，在 ActionScript3 中，filestructre 必须遵循命名空间。这使它变得更加容易。

您可以从任何地方访问任何类，但如果它在另一个包中，您将需要“导入”该类。这是通过在需要使用它的类或接口的开头编写导入语句来完成的。像这样：

```
import flash.display.MovieClip; 
```

此规则有一个例外，可以使用 internal 关键字声明类，在这种情况下，该类将仅在该包中可用。这主要用于帮助类。

基本上你不应该担心课程不可用。

注意：您使用 package 关键字创建包。

# cryptoapi - 将私钥关联到 PFXExportCertStoreEx 的证书

> ID：749654
> 
> 赞同：3
> 
> 时间：2009-04-14T22:56:31.677
> 
> 标签：cryptoapi, pfx

我正在尝试将证书导出到 pfx 文件。这是我所做的（简化）：

```
h = CertOpenStore(CERT_STORE_PROV_MEMORY, 0, NULL, CERT_STORE_CREATE_NEW_FLAG, NULL); 
p = CertCreateCertificateContext(X509_ASN_ENCODING | PKCS_7_ASN_ENCODING,
                  CertBlob.pbData, CertBlob.cbData);
CertSetCertificateContextProperty(p, CERT_KEY_PROV_HANDLE_PROP_ID, 0, &hPrivKey);
CertAddCertificateContextToStore(h, p, CERT_STORE_ADD_ALWAYS, NULL);
PFXExportCertStoreEx(h, &SomeBlob, L"", NULL, EXPORT_PRIVATE_KEYS); 
```

PFX 创建，没有导出私钥。有人曾经将私钥导出到 pfx 吗？将私钥附加到证书以便导出的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-15T18:59:34.827

显然，`CertSetCertificateContextProperty(p, CERT_KEY_PROV_HANDLE_PROP_ID ...)`

不好。需要这样做：

```
CRYPT_KEY_PROV_INFO kpi;
ZeroMemory( & kpi, sizeof(kpi) );
kpi.pwszContainerName = "my-container-name";
kpi.dwProvType = PROV_RSA_FULL;
kpi.dwKeySpec = AT_KEYEXCHANGE;
kpi.dwFlags = CRYPT_MACHINE_KEYSET;
CertSetCertificateContextProperty( pCert, CERT_KEY_PROV_INFO_PROP_ID, 0, & kpi); 
```

提供者名称和其他废话与用于生成实际密钥的信息相匹配是至关重要的。不需要设置提供者句柄或任何类似的东西。它也必须在之前完成`CertAddCertificateContextToStore`。

这是我发现将私钥附加到证书的唯一方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-01T09:40:00.423

**为后人：**

问题与`CertAddCertificateContextToStore`通话有关。实际上，它不会将该 `CERT_KEY_PROV_HANDLE_PROP_ID`属性复制到下一个上下文。（这一事实在备注中注明）

**解决方案：**

用新上下文的句柄填充最后一个参数，并将属性从旧上下文复制到下一个。

# javascript - jQuery 在启动时无法只显示一个抽屉

> ID：749660
> 
> 赞同：0
> 
> 时间：2009-04-14T22:59:27.130
> 
> 标签：javascript, jquery, startup

我只想在启动时打开一个抽屉。此刻，所有抽屉都打开了。

**jQuery[代码](http://jqueryfordesigners.com/slide-out-and-drawer-effect/)**

```
$(document).ready(function () {
    // hide all ULs inside LI.drawer except the first one
    $('LI.drawer UL:not(:first)').hide();

    // apply the open class
    $('li.drawer:first ul').addClass('open');

    $('h2.drawer-handle').click(function () {
        // hide the currently visible drawer contents
        $('li.drawer ul:visible').hide();

        // remove the open class from the currently open drawer
        $('h2.open').removeClass('open');

        // show the associated drawer content to 'this' (this is the current H2 element)
        // since the drawer content is the next element after the clicked H2, we find
        // it and show it using this:
        $(this).next().show();

        // set a class indicating on the H2 that the drawer is open
        $(this).addClass('open');
    });
}); 
```

**正文中的 HTML**

```
<ul class="drawers">

   <li class="drawer">
      <h2 class="drawer-handle open">Contact</h2>
      <ul>
           <li>A</li>
           <li>B</li>
      </ul>
   </li>

   <li class="drawer">
      <h2 class="drawer-handle">papers</h2>
      <ul>
           <li>A</li>
           <li>B</li>
      </ul>
   </li>

</ul> 
```

**您如何在启动时显示一个抽屉并隐藏其余抽屉？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T23:08:29.107

你有正确的想法，只是你的 :first 子句的位置错误。

```
$('li.drawer:first ul').addClass('open'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-16T13:56:09.690

原始代码也可以。

我在服务器上的代码中有以下错误

```
$(document).ready(function () {
// hide all ULs inside LI.drawer except the first one $('LI.drawer UL:not(:first)').hide();

... 
```

我的代码的第一行在注释标记下。

# javascript - 在函数执行时显示 javascript 加载器图像

> ID：749666
> 
> 赞同：11
> 
> 时间：2009-04-14T23:01:23.100
> 
> 标签：javascript, jquery

我想点击一个按钮，显示一个加载器图像，执行一个耗时的功能，隐藏加载器图像。当我尝试这样做时，页面会冻结，直到整个事件运行，因此永远不会看到加载程序图像。

这是一个示例：

```
$('#btn').click(function() {
    $('#LoadingImage').show();
    <time consuming function>
    $('#LoadingImage').hide();
}); 
```

如何清晰地显示加载器图像、更新屏幕、运行功能、隐藏加载器图像？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-14T23:04:41.267

虽然你有什么*应该*工作，尝试这样做：

```
$('#btn').click(function() {
    $('#LoadingImage').show();
    setTimeout(function() {
        <time consuming function>
        $('#LoadingImage').hide();
    }, 0);
}); 
```

这将逃脱事件的调用堆栈。

如果这不起作用，请发布有关此神秘耗时功能的更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-15T00:24:55.163

由于各种原因，JS 必须在主线程上执行，这意味着只要 JS 正在执行，绘画就会被阻止——即使像 chrome 这样的多进程架构也无法在选项卡正在执行 JS 时重新绘制选项卡。

让绘画发生的唯一方法是拆分函数的执行，或者将函数移动到 html5 工作线程上——它们只适用于 Firefox 和 Safari 的 beta 版（或更一般地说，任何足够新的 webkit 版本）恰当的）

# reporting-services - 报告引擎界面

> ID：749669
> 
> 赞同：0
> 
> 时间：2009-04-14T23:02:57.590
> 
> 标签：reporting-services, interface, user-interface, reporting, report

报告引擎的两个接口是可能的：

1.  基于 sql 的用户
2.  面向普通非 sql 友好用户的基于非 sql 的界面

数据库非常大，所以我该如何考虑 2) 非基于 sql 的接口的选项

会怎么样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-15T07:31:58.600

如果您使用的是 SQL Server 2005 或更高版本，您可能需要考虑将[ReportBuilder](http://msdn.microsoft.com/en-us/library/ms155933.aspx)作为[Reporting Services](http://www.microsoft.com/sqlserver/2008/en/us/reporting.aspx)的一部分提供。

您只需要构建一个“业务友好”模式（称为“数据源视图”），然后在顶部自动构建一个[报表模型。](http://www.mssqltips.com/tip.asp?tip=1115)

用户只需使用报表生成器工具连接到报表模型，就可以创建自己的报表。

如果您已经拥有 SQL Server，那么额外的成本将是最低的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T23:33:10.840

您需要一种简单的方法来构建 SQL 查询。查看所有桌面数据库中的向导，但未分页的内容可能更直观，例如[http://ruleeditor.googlecode.com/svn/wiki/NSRuleEditor_Tiger.png](http://ruleeditor.googlecode.com/svn/wiki/NSRuleEditor_Tiger.png)（非附属）

# c# - 如何在 C# 中使用 shell 执行文件？

> ID：749680
> 
> 赞同：5
> 
> 时间：2009-04-14T23:09:33.533
> 
> 标签：c#, .net

我尝试像往常一样使用 Process 类，但这不起作用。我所做的只是尝试运行一个 Python 文件，就像有人双击它一样。

是否可以？

编辑：

示例代码：

```
string pythonScript = @"C:\callme.py";

string workDir = System.IO.Path.GetDirectoryName ( pythonScript );

Process proc = new Process ( );
proc.StartInfo.WorkingDirectory = workDir;
proc.StartInfo.UseShellExecute = true;
proc.StartInfo.FileName = pythonScript;
proc.StartInfo.Arguments = "1, 2, 3"; 
```

我没有收到任何错误，但脚本没有运行。当我手动运行脚本时，我看到了结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-14T23:25:58.020

这是我从 C# 执行 python 脚本的代码，带有重定向的标准输入和输出（我通过标准输入传递信息），从某处网络上的示例复制。如您所见，Python 位置是硬编码的，可以重构。

```
 private static string CallPython(string script, string pyArgs, string workingDirectory, string[] standardInput)
    {

        ProcessStartInfo startInfo;
        Process process;

        string ret = "";
        try
        {

            startInfo = new ProcessStartInfo(@"c:\python25\python.exe");
            startInfo.WorkingDirectory = workingDirectory;
            if (pyArgs.Length != 0)
                startInfo.Arguments = script + " " + pyArgs;
            else
                startInfo.Arguments = script;
            startInfo.UseShellExecute = false;
            startInfo.CreateNoWindow = true;
            startInfo.RedirectStandardOutput = true;
            startInfo.RedirectStandardError = true;
            startInfo.RedirectStandardInput = true;

            process = new Process();
            process.StartInfo = startInfo;

            process.Start();

            // write to standard input
            foreach (string si in standardInput)
            {
                process.StandardInput.WriteLine(si);
            }

            string s;
            while ((s = process.StandardError.ReadLine()) != null)
            {
                ret += s;
                throw new System.Exception(ret);
            }

            while ((s = process.StandardOutput.ReadLine()) != null)
            {
                ret += s;
            }

            return ret;

        }
        catch (System.Exception ex)
        {
            string problem = ex.Message;
            return problem;
        }

    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-14T23:12:30.187

[Process.Start](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.start.aspx)应该可以工作。如果没有，你会发布你的代码和你得到的错误吗？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-14T23:32:04.137

你最后忘记了 proc.Start() 。如果您调用 Start()，您拥有的代码应该可以工作。

# python - Django 密码以什么格式存储在数据库中？

> ID：749682
> 
> 赞同：33
> 
> 时间：2009-04-14T23:11:07.460
> 
> 标签：python, django

你知道 django 密码是如何存储的：

```
sha1$a1976$a36cc8cbf81742a8fb52e221aaeab48ed7f58ab4 
```

这就是“hashtype $salt $hash”。我的问题是，他们如何获得 $hash？是密码和盐组合然后散列还是完全是别的东西？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2009-04-14T23:25:06.943

与往常一样，使用源：

```
# root/django/trunk/django/contrib/auth/models.py
# snip
def get_hexdigest(algorithm, salt, raw_password):
    """
    Returns a string of the hexdigest of the given plaintext password and salt
    using the given algorithm ('md5', 'sha1' or 'crypt').
    """
    raw_password, salt = smart_str(raw_password), smart_str(salt)
    if algorithm == 'crypt':
        try:
            import crypt
        except ImportError:
            raise ValueError('"crypt" password algorithm not supported in this environment')
        return crypt.crypt(raw_password, salt)

    if algorithm == 'md5':
        return md5_constructor(salt + raw_password).hexdigest()
    elif algorithm == 'sha1':
        return sha_constructor(salt + raw_password).hexdigest()
    raise ValueError("Got unknown password algorithm type in password.") 
```

正如我们所见，密码摘要是通过使用选定的散列算法将盐与密码连接起来制成的。然后将算法名称、原始盐和密码哈希连接起来，用“$”分隔以形成摘要。

```
# Also from root/django/trunk/django/contrib/auth/models.py
def check_password(raw_password, enc_password):
    """
    Returns a boolean of whether the raw_password was correct. Handles
    encryption formats behind the scenes.
    """
    algo, salt, hsh = enc_password.split('$')
    return hsh == get_hexdigest(algo, salt, raw_password) 
```

要验证密码，django 只需验证相同的盐和相同的密码会产生相同的摘要。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2009-04-14T23:14:00.933

[根据文档](http://docs.djangoproject.com/en/dev/topics/auth/#passwords)：

> Hashtype 是 sha1（默认）、md5 或 crypt——用于执行密码单向散列的算法。Salt 是一个随机字符串，用于对原始密码进行加盐以创建散列。

根据代码[`set_password`](http://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.models.User.set_password)：

```
def set_password(self, raw_password):
    import random
    algo = 'sha1'
    salt = get_hexdigest(algo, str(random.random()), str(random.random()))[:5]
    hsh = get_hexdigest(algo, salt, raw_password)
    self.password = '%s$%s$%s' % (algo, salt, hsh) 
```

正如文档所描述的，散列是盐、算法和密码，散列。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-09-21T00:21:21.727

很长一段时间，直到 1.3 版，Django 确实遵循了不负责任的做法，即使用简单的 SHA1 单次迭代（盐太短）来存储密码信息。这种方法自 1979 年以来就已经[过时了](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.52.4704)。仍然以这种方式存储的任何密码都极易受到暴力攻击。有关原因，请参阅[有关密码散列的 Security Stackexchange](https://security.stackexchange.com/tags/passwords/info)

自 2012 年 1.4 版以来，Django 有一个默认的散列算法，它基于一个良好的标准密钥派生函数 PBKDF2，具有可配置的迭代次数，其默认值随着每个版本的发布而增加（1.7 版中为 20000）。它还提供 bcrypt 支持，并向后兼容早期版本，在用户登录时自动升级密码哈希。更多信息请参阅[Django 中的密码管理 | Django 文档](https://docs.djangoproject.com/en/dev/topics/auth/passwords/)

# excel - 实现 Excel 外部数据源

> ID：749687
> 
> 赞同：1
> 
> 时间：2009-04-14T23:14:46.703
> 
> 标签：excel

有没有办法实现与“导入外部数据”功能一起使用的自定义数据源？

假设我有 Excel 无法理解的文件格式的数据。我想为 Excel 实现一个加载项（或其他），允许它通过“外部数据”功能理解这种格式。显然，我可以将文件转换为 Excel 已经理解的文件，但为了用户友好，我宁愿没有这个额外的步骤。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-07T04:59:08.753

我最终创建了一个在 localhost 上运行 HTTP 服务器的服务，该服务提供制表符分隔的数据。开发起来非常简单，并且完美地满足了我的需求。它与外部数据功能集成，无需开发 ODBC 驱动程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-15T00:09:10.770

此处的加载项（或其他）将是 ODBC 驱动程序（或 OLEDB 驱动程序）。我想你不想写一个。

如果您想使用“导入外部数据”就是这种情况，但您当然可以创建一个加载项，该加载项将自行解析和加载文件。它将有它自己的菜单项，并且不会与导入外部数据相关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-02-10T09:40:09.323

你可以试试[XLloop](http://xlloop.sourceforge.net)。这使您可以在外部服务器上实现 excel 函数 (UDF)。

因此，您的电子表格可能包含一个名为 LoadWidgetData(widgettype, date) 的函数，该函数将调用您的服务器。

有许多语言（Java、Ruby、Python、PHP）的服务器实现。

顺便说一句，我从事该项目，所以如果您有任何问题，请告诉我。

# php - 是否可以使用 PHP 来备份 SQL 而无需依赖？如果不是，哪个是最好的？

> ID：749689
> 
> 赞同：0
> 
> 时间：2009-04-14T23:15:41.477
> 
> 标签：php, mysql, mysqldump

在生产服务器上发生巨大的 MySQL 错误之后（我的错，是的，我已经学会了），我现在正在考虑在执行关键操作之前创建 MySQL 数据库的转储（大约 15 个对数据库的查询，插入/更新/选择）。我知道 phpMyAdmin 可以将数据库“转储”到 SQL 查询，但我认为这可能是它的一个特性，而不是 MySQL 的一个特性？

那么，有没有办法使用 MySQL 来做到这一点，如果没有（我怀疑），将 db 转储到命令服务器上的文件的最佳方法是什么？最好作为准备好导入 SQL 格式的整个数据库的压缩包。

谢谢你！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-14T23:17:47.057

您正在寻找[mysqldump](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)功能，我相信：

```
mysqldump my_database > database.dump 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-14T23:25:23.637

MySQL 转储会这样做，您可以将其通过管道传输到 gzip，以便更好地存储：

```
mysqldump --opt -Q -h[server] -u[username] -p[password] [dbname] | gzip > [file].sql.gz 
```

并恢复您解压缩它并：

```
mysql -h[server] -u[username] -p[password] [dbname] < [file].sql 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T23:45:57.020

我已经使用了几年了，为什么要重新创建轮子:)

[http://worldcommunity.com/opensource](http://worldcommunity.com/opensource)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-14T23:47:08.967

另一个好方法是使用像[sqlyog](http://webyog.com/en/)这样的东西来自动备份。我在本地 Windows 机器上运行它，我必须备份所有远程服务器。

# c# - ORM - 使用 C# 保存/恢复数据库对象的默认值

> ID：749693
> 
> 赞同：0
> 
> 时间：2009-04-14T23:17:03.453
> 
> 标签：c#, database, entity-framework, orm, settings

为了帮助用户重复数据输入，我正在尝试实现一个系统，在添加新数据时可以记住许多以前的属性。

是否可以使用 Properties.Settings.Default.MySetting 功能或者有更好的方法来做这种事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-14T23:34:25.517

难道您不能只制作前一个对象的（深层）副本，并将其用作下一个对象，允许用户覆盖任何更改的字段吗？这样，这些字段将是用户最后输入的内容，每个用户个性化，并在他们更改这些字段时进行更新。

如果您有办法记住每个用户输入的最后一件事，那么您甚至可以在会话之间保留它。

OP评论：

> 不幸的是，当涉及到关系时，制作对象的深层副本会弄乱对象上下文。具有关系的新对象要么需要创建新的关系对象，要么需要从数据库中查询现有对象。

所以？如果该关系与另一个实体（数据库中的外键）相关，则它是一个使用关系，您只需保留它。如果它是一个属性，则复制它。

例如，假设您的表单是关于员工的数据输入，它有一个下拉列表，我不知道，employeeType 是“Exempt”（不加班）或“Non-exempt”（加班）。您从数据库中提取了employeeType 的值，并且您希望下一个输入的员工与最后一个输入的员工具有相同的值，以保存数据输入人员击键。因此，您的深层副本只会将复制的员工与相同的数据库员工类型相关联。

但对于属性数据（如名称），您需要制作一份副本。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-04-14T23:47:40.820

这取决于您要达到的目标。使用 MySetting 功能的好处是可以在下次关闭应用程序时保留“最新”属性。

我假设这是一个winforms应用程序，所以我可能会在某个地方的哈希表中保留每个支持对象的最后保存的缓存实例，然后当你创建一个新表单时，在哈希表中查找支持对象和将所需的属性绑定到表单的新实例。

然后，您可以根据需要将整个哈希表序列化并持久化到 MySettings 对象，以便用户每次访问应用程序时都可以使用它。

# ruby - Ruby 哈希初始化：这可能吗？

> ID：749695
> 
> 赞同：1
> 
> 时间：2009-04-14T23:18:18.287
> 
> 标签：ruby, hash

这段代码当然有效：

```
@x = { :all => { :x => 1, :y => 2 } } 
```

但这不会：

```
@x = { :abc, :all => { :x => 1, :y => 2 } } 
```

有什么办法可以在这里做我想做的事吗？即我希望哈希中的两个键分别引用相同的（a 的副本）值。但我只想指定一次值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-14T23:20:09.483

是的，这里：

```
@x = { :all => tmp = { :x => 1, :y => 2 }, :abc => tmp } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-10-20T09:44:09.973

以下情况如何：

```
@x = { :all => tmp = { :x => 1, :y => 2 }, :abc => tmp.reject {|k,v| false} } 
```

# java - 如何处理 URISyntaxException

> ID：749709
> 
> 赞同：50
> 
> 时间：2009-04-14T23:27:52.523
> 
> 标签：java, uri

我收到此错误消息：

```
java.net.URISyntaxException: Illegal character in query at index 31: http://finance.yahoo.com/q/h?s=^IXIC 
```

`My_Url = http://finance.yahoo.com/q/h?s=^IXIC`

当我将它复制到浏览器地址字段时，它显示了正确的页面，它是有效的`URL`，但我无法用这个解析它：`new URI(My_Url)`

我试过了：`My_Url=My_Url.replace("^","\\^")`，但是

1.  这不是我需要的网址
2.  它也不起作用

如何处理？

坦率

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2009-04-15T00:17:28.300

您需要对 URI 进行编码，以将非法字符替换为合法编码字符。如果您首先创建一个 URL（因此您不必自己进行解析），然后使用[五参数构造函数](http://docs.oracle.com/javase/6/docs/api/java/net/URI.html#URI%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)创建一个 URI ，那么构造函数将为您进行编码。

```
import java.net.*;

public class Test {
  public static void main(String[] args) {
    String myURL = "http://finance.yahoo.com/q/h?s=^IXIC";
    try {
      URL url = new URL(myURL);
      String nullFragment = null;
      URI uri = new URI(url.getProtocol(), url.getHost(), url.getPath(), url.getQuery(), nullFragment);
      System.out.println("URI " + uri.toString() + " is OK");
    } catch (MalformedURLException e) {
      System.out.println("URL " + myURL + " is a malformed URL");
    } catch (URISyntaxException e) {
      System.out.println("URI " + myURL + " is a malformed URL");
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2009-04-14T23:32:33.150

对字符使用`%`编码`^`，即。`http://finance.yahoo.com/q/h?s=%5EIXIC`

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-04-15T01:33:13.050

您必须对参数进行编码。

这样的事情会做：

```
import java.net.*;
import java.io.*;

public class EncodeParameter { 

    public static void main( String [] args ) throws URISyntaxException ,
                                         UnsupportedEncodingException   { 

        String myQuery = "^IXIC";

        URI uri = new URI( String.format( 
                           "http://finance.yahoo.com/q/h?s=%s", 
                           URLEncoder.encode( myQuery , "UTF8" ) ) );

        System.out.println( uri );

    }
} 
```

[http://java.sun.com/javase/6/docs/api/java/net/URLEncoder.html](http://java.sun.com/javase/6/docs/api/java/net/URLEncoder.html)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-04-13T14:33:00.830

您可以执行以下操作，而不是事先对 URL 进行编码

```
String link = "http://example.com";
URL url = null;
URI uri = null;

try {
   url = new URL(link);
} catch(MalformedURLException e) {
   e.printStackTrace();
}

try{
   uri = new URI(url.toString())
} catch(URISyntaxException e {
   try {
        uri = new URI(url.getProtocol(), url.getUserInfo(), url.getHost(),
                      url.getPort(), url.getPath(), url.getQuery(), 
                      url.getRef());
   } catch(URISyntaxException e1 {
        e1.printStackTrace();
   }
}
try {
   url = uri.toURL()
} catch(MalfomedURLException e) {
   e.printStackTrace();
}

String encodedLink = url.toString(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-02T00:06:21.040

通用解决方案需要将 URL 解析为符合 RFC 2396 的 URI（请注意，这是 URI 标准的旧版本，java.net.URI 使用该标准）。

我编写了一个 Java URL 解析库来实现这一点：[galimatias](https://github.com/smola/galimatias)。使用此库，您可以使用以下代码实现所需的行为：

```
String urlString = //...
URLParsingSettings settings = URLParsingSettings.create()
  .withStandard(URLParsingSettings.Standard.RFC_2396);
URL url = URL.parse(settings, urlString); 
```

请注意，galimatias 处于非常早期的阶段，一些功能是实验性的，但对于这个用例来说已经相当可靠了。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-11-20T08:41:10.147

空格在 URL 中编码为 %20，在表单提交数据中编码为 +（内容类型 application/x-www-form-urlencoded）。你需要前者。

使用番石榴：

```
dependencies {
     compile 'com.google.guava:guava:28.1-jre'
} 
```

您可以使用 UrlEscapers：

```
String encodedString = UrlEscapers.urlFragmentEscaper().escape(inputString); 
```

不要使用 String.replace，这只会对空间进行编码。改用图书馆。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-22T12:45:38.440

没有什么比
[http://server.ru:8080/template/get?type=mail&format=html&key=ecm_task_assignment&label](http://server.ru:8080/template/get?type=mail&format=html&key=ecm_task_assignment&label) =Согласовать с контрагентом&descr=Описание&objectid=2231 更好的
了：

```
public static boolean checkForExternal(String str) {
    int length = str.length();
    for (int i = 0; i < length; i++) {
        if (str.charAt(i) > 0x7F) {
            return true;
        }
    }
    return false;
}

private static final Pattern COLON = Pattern.compile("%3A", Pattern.LITERAL);
private static final Pattern SLASH = Pattern.compile("%2F", Pattern.LITERAL);
private static final Pattern QUEST_MARK = Pattern.compile("%3F", Pattern.LITERAL);
private static final Pattern EQUAL = Pattern.compile("%3D", Pattern.LITERAL);
private static final Pattern AMP = Pattern.compile("%26", Pattern.LITERAL);

public static String encodeUrl(String url) {
    if (checkForExternal(url)) {
        try {
            String value = URLEncoder.encode(url, "UTF-8");
            value = COLON.matcher(value).replaceAll(":");
            value = SLASH.matcher(value).replaceAll("/");
            value = QUEST_MARK.matcher(value).replaceAll("?");
            value = EQUAL.matcher(value).replaceAll("=");
            return AMP.matcher(value).replaceAll("&");
        } catch (UnsupportedEncodingException e) {
            throw LOGGER.getIllegalStateException(e);
        }
    } else {
        return url;
    }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-03-20T10:05:40.967

在检查用户实际访问的 URL 的测试中，我遇到了这个异常。

并且 URL 有时包含非法字符并因此错误而挂起。

所以我做了一个函数来只对 URL 字符串中的字符进行编码，就像这样。

```
String encodeIllegalChar(String uriStr,String enc)
  throws URISyntaxException,UnsupportedEncodingException {
  String _uriStr = uriStr;
  int retryCount = 17;
  while(true){
     try{
       new URI(_uriStr);
       break;
     }catch(URISyntaxException e){
       String reason = e.getReason();
       if(reason == null ||
         !(
          reason.contains("in path") ||
          reason.contains("in query") ||
          reason.contains("in fragment")
         )
       ){
         throw e;
       }
       if(0 > retryCount--){
         throw e;
       }
       String input = e.getInput();
       int idx = e.getIndex();
       String illChar = String.valueOf(input.charAt(idx));
       _uriStr = input.replace(illChar,URLEncoder.encode(illChar,enc));
     }
  }
  return _uriStr;
} 
```

测试：

```
String q =  "\\'|&`^\"<>)(}{][";
String url = "http://test.com/?q=" + q + "#" + q;
String eic = encodeIllegalChar(url,'UTF-8');
System.out.println(String.format("  original:%s",url));
System.out.println(String.format("   encoded:%s",eic));
System.out.println(String.format("   uri-obj:%s",new URI(eic)));
System.out.println(String.format("re-decoded:%s",URLDecoder.decode(eic))); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-10-11T15:53:40.607

如果您使用`RestangularV2`在 java 中发布到 spring 控制器，如果您使用`RestangularV2.one()`而不是`RestangularV2.all()`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-11-14T06:44:14.853

用 + 替换 URL 中的空格 如果 url 包含 dimension1=Incontinence Liners，则将其替换为 dimension1=Incontinence+Liners。

# python - 如何以编程方式获取 python.exe 位置？

> ID：749711
> 
> 赞同：208
> 
> 时间：2009-04-14T23:29:02.067
> 
> 标签：python

基本上我想获得python解释器的句柄，这样我就可以传递一个脚本文件来执行（来自外部应用程序）。

* * *

## 回答 #1

> 赞同：337
> 
> 时间：2009-04-14T23:46:57.093

这适用于 Linux 和 Windows：

**Python 3.x**

```
>>> import sys
>>> print(sys.executable)
C:\path\to\python.exe 
```

**Python 2.x**

```
>>> import sys
>>> print sys.executable
/usr/bin/python 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2011-11-18T18:14:25.283

如果在嵌入式 python 环境中工作，sys.executable 是不可靠的。我的建议是从

```
import os
os.__file__ 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-04-14T23:39:52.820

我认为这取决于您如何安装python。请注意，您可以在我的机器上安装多个 python。但是，如果您通过 python 2.2 或更高版本的 msi 安装，我相信它会创建一个像这样的注册表项：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\App Paths\Python.exe 
```

这在我的机器上给出了这个值：

```
C:\Python25\Python.exe 
```

您只需读取注册表项即可获取位置。

但是，您可以通过可以在任意位置拥有的类似 xcopy 的模型安装 python，并且您只需要知道它的安装位置。

# php - PHP中看起来像多态的东西真的是多态吗？

> ID：749712
> 
> 赞同：25
> 
> 时间：2009-04-14T23:30:09.723
> 
> 标签：php, oop, programming-languages, polymorphism

试图弄清楚 PHP 是否支持方法重载、继承和多态等特性，我发现：

*   它不支持方法重载
*   它确实支持继承

但我不确定多态性。我发现这个谷歌搜索互联网：

> 我应该注意到，在 PHP 中，多态性并不是它应该的样子。我的意思是它确实有效，但由于我们的数据类型很弱，所以它不正确。

那么它真的是多态性吗？

**编辑** 只是不能在`PHP supports polymorphism`. 我不愿意说：“PHP 不支持多态性”，而实际上它确实支持。或相反亦然。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-04-14T23:38:31.390

```
class Animal {
    var $name;
    function __construct($name) {
        $this->name = $name;
    }
}

class Dog extends Animal {
    function speak() {
        return "Woof, woof!";
    }
}

class Cat extends Animal {
    function speak() {
        return "Meow...";
    }
}

$animals = array(new Dog('Skip'), new Cat('Snowball'));

foreach($animals as $animal) {
    print $animal->name . " says: " . $animal->speak() . '<br>';
} 
```

你可以随心所欲地给它贴上标签，但这对我来说看起来像是多态性。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-04-15T04:26:47.873

尽管 PHP 不支持您在其他语言（例如 Java）中体验过的方法重载。但是您可以在 PHP 中进行方法重载，但定义方法不同。如果您想为给定的方法提供不同的功能，在 PHP 中使用不同的参数集，您可以执行以下操作：

```
class myClass {
    public function overloadedMethod() {
        // func_num_args() is a build-in function that returns an Integer.
        // the number of parameters passed to the method.
        if ( func_num_args() > 1 ) {
            $param1 = func_get_arg(0);
            $param2 = func_get_arg(1);
            $this->_overloadedMethodImplementation2($param1,$param2)
        } else {
            $param1 = func_get_arg(0);
            $this->_overloadedMethodImplementation1($param1)
        }
    }

    protected function _overloadedMethodImplementation1($param1) {
        // code 1
    }

    protected function _overloadedMethodImplementation2($param1,$param2) {
        // code 2
    }
} 
```

可能会有更干净的实现，但这只是一个示例。

PHP 支持继承和接口。所以你可以使用它们进行多态性。你可以有一个这样的界面：

```
// file: MyBackupInterface.php
interface MyBackupInterface {
    // saves the data on a reliable storage
    public function saveData();
    public function setData();
}

// file: myBackupAbstract.php
require_once 'MyBackupInterface.php';
class MyBackupAbstract implements MyBackupInterface {
     protected $_data;
     public function setData($data) {
         $this->_data= $data;
     }
     // there is no abstract modifier in PHP. so le'ts avoid this class to be used in other ways
     public function __construct() {
          throw new Exception('this class is abstract. you can not instantiate it');
     }
}

// file: BackupToDisk.php
require_once 'MyBackupAbstract.php';
class BackupToDisk extends MyBackupAbstract {
     protected $_savePath;

     // implement other methods ...

     public function saveData() {
           // file_put_contents() is a built-in function to save a string into a file.
           file_put_contents($this->_savePath, $this->_data);
     }
}

// file: BackupToWebService.php
require_once 'MyBackupAbstract.php';
class BackupToWebService extends MyBackupAbstract {
     protected $_webService;
     // implement other methods ...

     public function saveData() {
           // suppose sendData() is implemented in the class
           $this->sendData($this->_data);
     }
} 
```

现在在您的应用程序中，您可以像这样使用它：

```
// file: saveMyData.php
// some code to populate $myData
$backupSolutions = array( new BackupToDisk('/tmp/backup') , new BackupToWebService('webserviceURL') );
foreach ( $backupSolutions as $bs ) {
    $bs->setData($myData);
    $bs->saveData();
} 
```

你是对的，PHP 不是强类型语言，我们从未提到你的任何 $backupSolutions 将是“MyBackupAbstract”或“MyBackupInterface”，但这不会阻止我们具有多态性的性质，这是与使用不同的功能相同的方法。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-12-27T17:49:30.447

PHP 具有基于类的多态性，但缺乏实现基于参数的多态性的正式机制。

基于类的多态性意味着您可以根据基类进行思考，并且调用的方法取决于最终类。例如，如果您有一个包含各种类（如 Triangle 和 Circle）的对象的数组，并且这些类中的每一个都扩展了同一个类 Shape，那么您可以将您的数组视为仅仅是形状的集合。您可以遍历形状并调用每个形状的 getArea() 方法。多态性是调用 getArea() 方法取决于对象的类的现象。如果您的形状是三角形，则调用 Triangle::getArea()，如果是圆形，则调用 Circle::getArea()——即使您的代码不区分圆形和三角形，而是将每个对象视为只是一个形状。同一行代码会导致执行不同的代码块，

基于参数的多态性是一些强类型语言的特性，其中可以在一个类中定义多个同名方法，只要它们具有不同的参数；那么调用哪个方法取决于提供的参数。您可以通过手动考虑方法中的参数类型来模拟弱类型语言（如 PHP）中基于参数的多态性。这就是 jQuery 为了实现多态 API 而做的，尽管 JavaScript 缺乏基于参数的原生多态性。

因此，如果“支持多态”是指它为实现基于参数的多态提供了一种正式的机制，那么答案是否定的。对于任何更广泛的解释，答案是肯定的。按理说，基于类的多态现象出现在每一种面向对象语言中；对于执行隐式类型转换的语言来实现基于参数的多态性是没有意义的。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-04-14T23:39:56.550

`__call()`并且`__callStatic()`应该支持方法重载。有关这方面的更多信息，请参阅[手册](http://us.php.net/manual/en/language.oop5.overloading.php)。或者你到底在追求什么？

**更新：**我刚刚注意到其他回复。

对于重载方法的另一种方法，请考虑以下内容：

```
<?php
public function foo()
{
    $args = func_get_arg();
} 
```

当然不漂亮，但它让你几乎可以做任何你想做的事情。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-04-14T23:33:08.813

您仍然可以覆盖方法，只是不要重载它们。重载（在 C++ 中）是指对多个方法使用相同的方法名称，只是参数的数量和类型不同。这在 PHP 中会很困难，因为它是弱类型的。

覆盖是子类替换基类中的方法的地方。这确实是多态性的基础，您可以在 PHP 中做到这一点。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-04-15T01:35:00.300

有人称这[为鸭子打字](http://en.wikipedia.org/wiki/Duck_typing)。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-04-02T09:26:43.090

多态可以通过以下方法实现：

1.  `method overriding`- 正常漂亮如上

2.  `method overloading`

您可以通过魔术方法 __call() 来创建方法重载的错觉：

```
class Poly {
    function __call($method, $arguments) {
        if ($method == 'edit') {
            if (count($arguments) == 1) {

                return call_user_func_array(array($this,'edit1'), $arguments);
            } else if (count($arguments) == 2) {
                return call_user_func_array(array($this,'edit2'), $arguments);
            }
        }
    }
    function edit1($x) {
        echo "edit with (1) parameter";
    }

    function edit2($x, $y) {
        echo "edit with (2) parameter";
    }

}

$profile = new Poly();
$profile->edit(1);
$profile->edit(1,2); 
```

说明：

```
1) Here we are utilizing the power of __call() of listening calls of 
   non-available     methods and 
2) after knowing it who had called with their inputs diverting them to desired 
   method 
```

`In php`，我们实际上是`working under the hood`要给出想要的行为并给出感觉`of method overloading`

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-02-25T01:14:42.813

PHP 允许在其他语言中产生编译错误的多态代码。一个简单的例子说明了这一点。第一个产生预期编译错误的 C++ 代码：

```
class Base {};

class CommonDerivedBase {
   public:
    // The "= 0" makes the method and class abstract
    // virtual means polymorphic method
    virtual whoami() = 0;
};

class DerivedBase : public CommonDerivedBase {
   public:    
     void  whoami() { cout << "I am DerivedBase \n"; }
};

class Derived1 : public CommonDerivedBase {
  public:
    void  whoami() { cout << "I am Derived1\n"; }
};

class Derived2 : public CommonDerivedBase {
public:
 void whoami() { cout <<  "I am Derived2\n"; }
};

/* This will not compile */
void  test_error(Base& db)
{
   db.whoami();
} 
```

C++ 编译器将为该行发出此错误消息`db.whoami()`

```
error: no member named 'whoami' in 'Base' 
```

因为 Base 没有名为 whoami() 的方法。然而，类似的 PHP 代码直到运行时才发现此类错误。

```
class Base {}

abstract class DerivedCommonBase {
  abstract function whoami();
}

class Derived1 extends DerivedCommonBase {

 public function whoami() { echo "I am Derived1\n"; }
}

class Derived2 extends DerivedCommonBase {

 public function whoami() { echo "I am Derived2\n"; }
}

/* In PHP, test(Base $b) does not give a runtime error, as long as the object 
 * passed at run time derives from Base and implements whoami().
 */
function test(Base $b)
{
  $b->whoami(); 
}

$b = new Base();
$d1 = new Derived1();
$d2 = new Derived2();

$a = array();

$a[] = $d1;
$a[] = $d2;

foreach($a as $x) {

  echo  test($x);
}

test($d1);
test($d2);
test($b); //<-- A run time error will result. 
```

foreach 循环与输出一起工作

```
I am Derived1
I am Derived2 
```

直到您调用 test($b) 并传递 Base 的实例才会出现运行时错误。所以在**foreach**之后，输出将是

```
I am Derived1
I am Derived2
PHP Fatal error:  Call to undefined method Base::whoami() in
home/kurt/public_html/spl/observer/test.php on line 22 
```

关于使 PHP 更安全的唯一方法是添加运行时检查以测试 $b 是否是您想要的类的实例。

```
function test(Base $b)
{
  if ($b instanceof DerivedCommonBase) {
     $b->whoami(); 
  } 
} 
```

但是多态性的全部意义在于消除这种运行时检查。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-05-31T01:59:23.947

对于我在这里看到的，php 不支持多态性，也不支持重载方法。您可以破解自己的方式来实际接近这两个 oop 功能，但它们与它的最初目的相去甚远。这里的许多示例要么是扩展一个类，要么是创建一个 hack 来模拟多态性。

# ruby-on-rails - 在 Rails 中渲染后向下滚动页面

> ID：749718
> 
> 赞同：1
> 
> 时间：2009-04-14T23:32:06.180
> 
> 标签：ruby-on-rails, scroll, controller

渲染后有没有办法滚动或向下跳转页面？

具体来说，在我的控制器操作中，在某些情况下，我希望将用户发送到页面上的特定位置。如果它只是来自另一个页面的链接，我可能会使用 URI 片段标识符——“ [http://blorg.com/page#id](http://blorg.com/page#id) ”——但这需要根据某些条件动态生成。

也许我需要以某种方式使用 JavaScript (Prototype)，但我不知道一旦页面加载完成后如何调用该函数，尤其是从控制器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-14T23:59:39.327

在你看来，你真的应该做这种事情。在您的控制器中，您应该评估您的条件以确定您要显示的页面部分，然后将结果传递到视图中。然后，您可以在视图中使用此信息在页面底部添加一小段 javascript，执行如下操作。当然，如果用户关闭了 javascript，这对您没有帮助；）

控制器代码：

```
def index
  # evaluate the condition
  @section = (rand*10).to_i
end 
```

查看查看代码：

```
<div id="#section1">some stuff</div>
....
<div id="#section9">other stuff</div>

<% if @section>0 %>
<script type="text/javascript">
// <!--
document.location.hash="#section<%= @section %>";
// -->
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T17:53:01.780

如果您使用的是 jQuery，答案可能如下：

```
$("body").scrollTop($("#my-element").position().top; 
```

或者，如果您想要真正花哨（推荐），您可以像这样为滚动顶部设置动画：

```
$("body").animate({scrollTop: $("#my-element").position().top},1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-15T00:10:08.240

您可以通过在链接到页面的 url 中包含一个片段部分，让浏览器滚动到页面下方的某个位置。例如[http://example.com/index.html#section3](http://example.com/index.html#section3)会将页面滚动到具有“id”section3 的元素。您可以在链接、段落等上使用该 ID。浏览器将确保元素在渲染后可见。

# java - 有人用过“GWT Designer”吗？

> ID：749725
> 
> 赞同：5
> 
> 时间：2009-04-14T23:34:14.583
> 
> 标签：java, gwt, ide, wysiwyg, gwt-designer

在这里还没有看到任何关于它的信息，但它似乎解决了 GWT 的一个问题 - 您必须编写 Java 代码来生成 GUI。相反[，该软件](http://www.instantiations.com/gwtdesigner/)允许您使用拖放工具设计 GUI - 所见即所得的界面。

顺便说一句，我不是想卖产品。

我只想知道它是否像宣传的那样有效、有效、易于使用等？

有人有经验回答这些问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2010-11-19T15:55:46.280

GWT-Designer 现已免费提供，因为该产品已被 Google 收购。[http://googlewebtoolkit.blogspot.com/2010/09/google-relaunches-instantiations.html](http://googlewebtoolkit.blogspot.com/2010/09/google-relaunches-instantiations.html) 谷歌将改进已经相当不错的产品。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-15T04:10:11.360

我不认为缺少 GUI 编辑器是 GWT 的问题。考虑 HTML，有很多 WYSIWYG 编辑器（如 Dreamweaver），但大多数有经验的网页设计师不会用驳船杆来接触这些东西，他们是手动编码的。不是因为他们是受虐狂，而是因为他们想要控制源代码，他们想让它干净易读。编码是一门科学艺术品，最好留给人类；）

我很早就尝试过 GWT Designer，但我发现它相当糟糕（并且只能在 Windows 上工作，因为它有一些附带的 dll），但从那时起情况可能发生了巨大变化。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2011-02-25T01:24:52.010

我将 GWT Designer 用于我的 Capstone 项目。我确实从头开始，而且效果很好。我不是所见即所得软件的粉丝，所以我很惊喜。这是我在上面做的帖子的链接：

[http://benarchie.blogspot.com/2010/12/gwt-designer.html](http://benarchie.blogspot.com/2010/12/gwt-designer.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-05T18:32:28.713

GWT-Designer 一直在变得更好。再看一下，在我看来，它正在赶上诸如视觉工作室之类的东西。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-09-06T21:38:07.150

我最近尝试过 GWT Designer。看起来还是很可怜。如果您不想失去灵活性，我建议您使用[GWTLab](http://jimcampsw.x10hosting.com/Gwtlab.html#WELCOME)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2011-05-05T12:15:35.463

我个人喜欢 GWT Designer for Eclipse，它是免费的。

它是一种快速开发工具。不是非程序员的解决方案，但它将加速 Java 编码人员学习如何使用 GWT API 的能力。一旦您学习了该工具，它将减少编码时间。

我发现有必要经常在代码和 WYSIWYG 编辑器之间切换才能得到我想要的东西。两位编辑合作得很好。您仍然需要参考 Java Docs 以获得完整的理解。大多数 Java 文档中都有优秀的 Java 和 UiBinder 代码示例，可以进行剪切和粘贴。

在 UiBinder 中创建 GUI 绝对是要走的路，因为它简化了布局 GUI 元素的层次结构。API 缺少一些关于如何在 UiBinder 中处理代码的信息，但是在 GWT-Designer、Java Docs 和 Google 之间，您会找到答案。

内置的 Jetty Web 服务器还简化了在本地机器上的部署和测试。我能够进行小的代码更改并立即在 Web 浏览器中看到效果。

试试这些教程。

[http://code.google.com/eclipse/docs/gwt_uibinder.html](http://code.google.com/eclipse/docs/gwt_uibinder.html)

[http://code.google.com/webtoolkit/tools/gwtdesigner/tutorials/stockwatcher.html](http://code.google.com/webtoolkit/tools/gwtdesigner/tutorials/stockwatcher.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-08-19T21:27:15.223

我订阅了一年，但没有续订，对产品有点失望。

1) 设计者注入所有 Java 代码，将创建/属性设置/事件处理添加到您正在构建的模块中。此外，模块化应用程序非常困难。例如，与 Flex 相比，模块中的代码行数很容易增加一倍或三倍，从树上看森林并不容易。

2) 我几年前才构建的 Web 应用程序可能由于 Javascript 引擎的变化而**停止工作。**这是我没**想到**的，很可能是 GWT 的错。

3) GUI 设计者需要大量的 CPU 能力，构建阶段也是如此。

这个概念很好，但是，我承认，GWT 设计师是同类中唯一的。模块化困难的感觉很可能是我的懒惰。

**编辑**：在我写完上述评论后不久，Instantiations/Google 引入了 UiBinder 概念，这比原来的合并更有意义。现在专业多了。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2010-11-10T06:05:09.123

当时刚试了一下。我的大多数 ui.xml 文件都无法打开，因为它当前不支持 @UiField(provided=true)。

未使用此功能的 ui.xml 文件通常会因 UnableToCompleteException 之类的问题而崩溃。

也许如果你从零开始使用设计师，你可能会有更多的运气。

# c# - 无法将 XmlDocument 存储在数据类型为“xml”的表列中

> ID：749729
> 
> 赞同：0
> 
> 时间：2009-04-14T23:34:37.670
> 
> 标签：c#, sql-server, asp.net-mvc, xml, linq

我目前正在使用 Visual Studio 2008 Express 开发一个小型 Web 应用程序。我正在尝试使用客户端库从服务器检索 XML 文档，然后将文档保存到数据库列中（使用 Linq）。数据库列的数据类型指定为`xml`。不幸的是，我在最初的几次尝试中都没有成功。

假设我已经获得了对数据上下文对象的引用，以下是我正在尝试做的基础知识：

```
// using a client library, requestthe XML document from the server
XmlDocument oXmlDoc = oClient.GetDataAsXML();

InformationLog oLog = new InformationLog();
oLog.InfoXML = oXmlDoc.InnerXml; // this is where the problem occurs

dbContext.InformationLogs.InsertOnSubmit(oLog);
dbContext.SubmitChanges(); 
```

具体来说，我得到的错误是：

```
Cannot implicitly convert type 'System.Xml.XmlNode' to 'System.Xml.Linq.XElement' 
```

我是 ASP.NET MVC 和 Linq 的新手，所以我知道我遗漏了一些东西。除了答案之外，我还很好奇*为什么*在没有任何额外处理的情况下不能简单地保存 XML。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-15T01:26:46.060

您应该考虑使用 XDocument 而不是 XmlDocument，然后尝试将 XDocument 直接分配给您的 oLog.InfoXML 属性。

在不知道 oClient.GetDataAsXML() 的工作原理的情况下，您是否可以轻松地从该调用创建 XDocument，但如果您使用 XDocument 而不是 XmlDocument 工作，您的生活会更轻松。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-15T01:27:20.537

[这是一个很棒的帖子](http://blogs.msdn.com/ericwhite/archive/2008/12/22/convert-xelement-to-xmlnode-and-convert-xmlnode-to-xelement.aspx)。基本上，新的 XML 类型和旧的 XML 类型在那里发生冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-12-28T20:48:04.023

您还可以将您的项目从 .net 3.5 切换到 3.0，这将默认您回到`system.xml`. 但这会让你远离使用 LINQ。

# java - Java，确保字符串仅包含字母数字、空格和破折号

> ID：749742
> 
> 赞同：5
> 
> 时间：2009-04-14T23:39:03.527
> 
> 标签：java, string, parsing, contains

在 Java 中，我需要确保 String 只包含`alphanumeric`,`space`和`dash`字符。

我找到了类`org.apache.commons.lang.StringUtils`和几乎足够的方法`isAlphanumericSpace(String)`......但我还需要包括破折号。

做这个的最好方式是什么？我不想使用正则表达式。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-15T00:08:41.410

你可以使用：

```
StringUtils.isAlphanumericSpace(string.replace('-', ' ')); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-14T23:46:02.807

嗯......只需使用*String.chatAt* ( **int** ) 自己编程，这很容易......

使用位置索引遍历字符串中的所有**字符**，然后使用 ASCII 字符 0 到 9、a 到 z 和 A 到 Z 使用连续代码这一事实进行比较，因此您只需检查字符 x 是否以数字方式验证其中一个条件：

*   在“0”和“9”之间
*   在“a”和“z”之间
*   在'A和'Z'之间
*   空间 ' '
*   连字符“-”

这是一个基本的代码示例（使用 CharSequence，它可以让您传递一个字符串，也可以传递一个 StringBuilder 作为 arg）：

```
public boolean isValidChar(CharSequence seq) {
    int len = seq.length();
    for(int i=0;i<len;i++) {
        char c = seq.charAt(i);
        // Test for all positive cases
        if('0'<=c && c<='9') continue;
        if('a'<=c && c<='z') continue;
        if('A'<=c && c<='Z') continue;
        if(c==' ') continue;
        if(c=='-') continue;
        // ... insert more positive character tests here
        // If we get here, we had an invalid char, fail right away
        return false;
    }
    // All seen chars were valid, succeed
    return true;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-14T23:45:39.017

只需遍历字符串，使用 java.lang.Character 中的字符类方法来测试每个字符是否可以接受。这大概就是 StringUtils 方法所做的一切，而正则表达式只是驱动通用引擎做同样事情的一种方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-14T23:47:47.887

您有 2 个选项中的 1 个： 1\. 编写可以在字符串中的字符列表，然后遍历字符串检查以确保每个字符都在列表中。2\. 编写一个不能在字符串中的字符列表，然后循环检查字符串以确保每个字符不在列表中。

选择任何更快的选项来组成列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-28T00:34:33.367

绝对使用正则表达式。当有一个非常全面的系统来完成这项确切的任务时，编写自己的系统是没有意义的。如果您需要了解或复习正则表达式，请查看此网站，非常棒：[http ://regexr.com](http://regexr.com)

我会在这一点上挑战自己。

# java - Eclipse：列出所有类的方法和变量

> ID：749746
> 
> 赞同：9
> 
> 时间：2009-04-14T23:39:46.753
> 
> 标签：java, eclipse, documentation, javadoc

我开始使用一些其他人编写的 Java 代码。我必须理解、改变和测试它。作者现在不可用。该包有大约 50 个不同大小的文件（以及类）。如果我能看到/打印出方法（公共和私有）和公共变量的名称（就像它们在 Eclipse 的“大纲窗口”中可见），那就太好了。这真的有助于理解代码，因为我可以只看这个并理解每个类的一般用途。

除了生成 Javadoc 之外，我可以在 Eclipse 中执行此操作吗，因为 Javadoc 确实创建了太多细节？有 Eclipse 插件吗？或任何其他工具？

例子：

对于代表学生的 Class 文件，我可以得到：

```
String name
int[] marks
int year
int idNumber

Student()
printName()
printMarks()
setName(String name) 
```

...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-15T00:22:15.793

在**Package Explorer**中，右键单击有问题的包，选择**Open Type Hierarchy** (Shortcut F4) 可以很好地查看该包中对象的层次结构，在该视图中选择一个类将为您提供类的详细信息。不完全是您所要求的，但它有助于理解您正在更改的包。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-15T02:59:18.613

javap 也可能给你你想要的：

[http://java.sun.com/j2se/1.5.0/docs/tooldocs/windows/javap.html](http://java.sun.com/j2se/1.5.0/docs/tooldocs/windows/javap.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-14T23:45:55.863

我是 IntelliJ 用户，所以我无法使用 Eclipse 插件，但我想知道将它导入到[JUDE](http://jude.change-vision.com/jude-web/index.html)之类的 UML 工具中是否更有帮助。它将向您展示方法、属性和对象之间的关系。就个人而言，我认为图片值一千字，但这只是我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-06T10:53:58.653

Nathan Feger 的回答似乎是正确的。不久前我做了一个插件，试图分析成员变量/方法之间的关系，并可能带来另一种观点。 [变量使用插件](http://willcodejavaforfood.com/vu.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-06T10:54:27.433

您可以为代码创建一个 Javadoc 并查看显示公共类/方法的索引。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-06T10:56:49.690

通常从源代码生成 Javadoc 也可以帮助您浏览源代码并更好地理解。您可以通过“Project/Generate Javadoc”菜单执行此操作。

我对是否有一种工具可以完全满足您的需求有一些疑问。也许您可以通过编写自己的小工具来实现这一点，该工具递归地遍历代码文件并通过反射打印出这些信息。

其他可能帮助您理解源代码的工具是 Metrics 插件。[Eclipse有一个](http://www.google.com/search?source=ig&hl=en&rlz=&=&q=eclipse+metric+plugin&btnG=Google+Search&aq=f&oq=)。

# firefox - Firefox 3.0.3 中的 WMV 缩放

> ID：749749
> 
> 赞同：2
> 
> 时间：2009-04-14T23:39:54.693
> 
> 标签：firefox, scaling, firefox-3, wmv

我的`WMV`文件以原始分辨率播放并且没有缩放到 Windows 媒体框架的大小时遇到​​问题。
这是代码：

```
<p>
  <object height="420" width="585" type="application/x-oleobject"
          standby="Loading Microsoft Windows Media Player components..."
          codebase="http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1,52,701"
          classid="CLSID:22d6f312-b0f6-11d0-94ab-0080c74c7e95" id="mediaPlayer">
    <param value="mms://a1977.v167321.c16732.g.vm.akamaistream.net/7/1977/16732/0/sas-qp.onstreammedia.com/origin/2etrassociates/NSLC/Webinars/Sustaining_Successful_Civic_Engagement_Campus_and_Community_Based_Initiatives-20090409-1804.wmv" name="fileName" />
    <param value="1" name="animationatStart" />
    <param value="1" name="transparentatStart" />
    <param value="1" name="autoStart" />
    <param value="1" name="ShowControls" />
    <param value="0" name="ShowDisplay" />
    <param value="0" name="ShowStatusBar" />
    <param name="AutoSize" value="false" />
    <param value="0" name="loop" />
    <param value="100" name="Volume" />
    <embed height="420" width="585" scale="exactfit" loop="0"
           designtimesp="5311" autostart="1"
           src="mms://a1977.v167321.c16732.g.vm.akamaistream.net/7/1977/16732/0/sas-qp.onstreammedia.com/origin/2etrassociates/NSLC/Webinars/Sustaining_Successful_Civic_Engagement_Campus_and_Community_Based_Initiatives-20090409-1804.wmv"
           videoborder3d="0" showstatusbar="0" showdisplay="0" showtracker="1"
           showcontrols="1" bgcolor="darkblue" autosize="0" displaysize="4"
           name="mediaPlayer" id="mediaPlayer"
           pluginspage="http://microsoft.com/windows/mediaplayer/en/download/"
           type="application/x-mplayer2" volume="100">
    </embed>
  </object>
</p>
<p>
  <a href="/sites/default/files/download/webinars/Wagner_College-Staten_Island-New_York-Webinar.ppt">
    <strong>Download the Updated PowerPoint presentation for this webinar</strong>
  </a>. (755K ppt)
</p> 
```

[这是](http://servicelearning.org/webinars/Sustaining_Successful_Civic_Engagement-2009.php) **在 IE7 和 IE8 中运行良好的链接。**

# silverlight - Silverlight MVVM ListBoxItem IsSelected

> ID：749751
> 
> 赞同：4
> 
> 时间：2009-04-14T23:40:16.363
> 
> 标签：silverlight, mvvm, listbox

我有一组绑定到 ListBox 的 ViewModel。我正在尝试将每个的 IsSelected 属性绑定在一起。在 WPF 中，它通过设置样式来工作：

```
<Style TargetType="{x:Type ListBoxItem}">
    <Setter Property="IsSelected" Value="{Binding Path=IsSelected, Mode=TwoWay}" />
</Style> 
```

这在 Silverlight 中不起作用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-15T20:26:53.400

在 Silverlight 中，您无法创建“全局”样式，即修改某种类型的所有控件的样式。你的风格需要一个键，你的控件需要引用它。

此外，TargetType 只需要控件类型名称。Silverlight 不支持 x:Type 扩展。

ib。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-16T19:35:44.293

这是我的做法：

```
<ListBox.ItemTemplate>
    <DataTemplate>
...
<CheckBox VerticalAlignment="Top" HorizontalAlignment="Left"
          x:Name="CheckBox1" IsChecked="True" Grid.Row="0">
    <inf:BindingHelper.Binding>
        <inf:BindingProperties TargetProperty="Visibility" SourceProperty="IsSelected"
            Converter="{StaticResource VisibilityConverter}"
            RelativeSourceAncestorType="ListBoxItem" />
    </inf:BindingHelper.Binding>
</CheckBox>
...
    </DataTemplate>
</ListBox.ItemTemplate> 
```

您需要进行相对绑定，不幸的是，Silverlight 中不存在这种绑定... BindingHelper 是一个帮助类，它克服了这个限制（搜索“silverlight 中的相对绑定”来找到它）。

# jquery - jQuery + Safari 4 测试版

> ID：749753
> 
> 赞同：1
> 
> 时间：2009-04-14T23:41:30.150
> 
> 标签：jquery, safari

我有一个使用 jQuery 1.3.2 的（ASP.NET MVC）站点，我的 jQuery 函数拒绝在 Safari 4.0 beta [mac] 上调用。

如果我将用户代理更改为 Safari *3.2.1* Mac，我可以让他们调用。这对我来说似乎很奇怪，因为我找不到任何关于 jQuery 与 beta 有问题的信息，而且我不知道为什么用户代理会改变它。

任何人都知道如何让 jQuery 在 Safari 4 上运行而无需用户更改用户代理？

**更新**：我今天早上再次打开页面，一切正常，使用正确的 UA。我认为也许 JS 引擎出了问题，在 safari 重新启动后，一切都恢复了。

谢谢大家的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-15T11:21:57.907

就在一分钟前，我在 Safari 4.0 beta (mac) 上使用 JQuery 1.3.2 进行测试，然后我决定检查 stackoverflow :)

所以我不认为这是一个普遍的问题，你必须提供更多信息才能帮助你......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-14T23:55:45.763

有哪些 jQuery 函数？但我不认为这或 Safari 是问题所在。您确定 ASP 不会保留一些（脚本）内容，除非他们知道用户代理？

# c# - 使用 Linq 替换集合项

> ID：749755
> 
> 赞同：4
> 
> 时间：2009-04-14T23:42:04.297
> 
> 标签：c#, linq, linq-to-objects, .net-3.0

如何在以下特定场景中使用 Linq 查找和替换属性：

 `````
public interface IPropertyBag { }
public class PropertyBag : IPropertyBag
{
    public Property[] Properties { get; set; }

    public Property this[string name]
    {
        get { return Properties.Where((e) => e.Name == name).Single(); }
        //TODO: Just copying values... Find out how to find the index and replace the value 
        set { Properties.Where((e) => e.Name == name).Single().Value = value.Value; }
    }
} 
```` 

`感谢您提前提供帮助。`

 `* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-14T23:55:58.523

不要使用 LINQ，因为它不会改进代码，因为 LINQ 旨在查询集合而不是修改它们。我建议以下。

```
// Just realized that Array.IndexOf() is a static method unlike
// List.IndexOf() that is an instance method.
Int32 index = Array.IndexOf(this.Properties, name);

if (index != -1)
{
   this.Properties[index] = value;
}
else
{
   throw new ArgumentOutOfRangeException();
} 
```

[为什么 Array.Sort() 和 Array.IndexOf() 方法是静态的？](https://stackoverflow.com/questions/177259/why-are-array-sort-and-array-indexof-methods-static)

此外，我建议不要使用数组。考虑使用`IDictionary<String, Property>`. 这将代码简化为以下内容。

```
this.Properties[name] = value; 
```

请注意，这两种解决方案都不是线程安全的。

* * *

一个特别的 LINQ 解决方案 - 你看，你不应该使用它，因为整个数组将被一个新数组替换。

```
this.Properties = Enumerable.Union(
   this.Properties.Where(p => p.Name != name),
   Enumerable.Repeat(value, 1)).
   ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-15T00:23:32.717

[注意：这个答案是由于对问题的误解 - 请参阅对此答案的评论。显然，我有点密集:(]你的“属性”是一个类还是一个结构？

这个测试通过了我：

```
public class Property
{
    public string Name { get; set; }
    public string Value { get; set; }
}
public interface IPropertyBag { }
public class PropertyBag : IPropertyBag
{
    public Property[] Properties { get; set; }

    public Property this[string name]
    {
        get { return Properties.Where((e) => e.Name == name).Single(); }
        set { Properties.Where((e) => e.Name == name).Single().Value = value.Value; }
    }
}

[TestMethod]
public void TestMethod1()
{
    var pb = new PropertyBag() { Properties = new Property[] { new Property { Name = "X", Value = "Y" } } };
    Assert.AreEqual("Y", pb["X"].Value);
    pb["X"] = new Property { Name = "X", Value = "Z" };
    Assert.AreEqual("Z", pb["X"].Value);
} 
```

I have to wonder why the getter returns a 'Property' instead of whatever datatype .Value, but I'm still curious why you're seeing a different result than what I am.

# wcf - 在 WCF 中通过 net.pipe 运行多个服务

> ID：749756
> 
> 赞同：4
> 
> 时间：2009-04-14T23:43:28.553
> 
> 标签：wcf, wcf-binding

我正在构建一个需要 6 种不同服务的分布式应用程序。我必须使用 Visual Studio 2008 在我的 XP 笔记本电脑上演示该应用程序。

是否可以同时在 localhost 上运行多个服务，全部使用 net.pipe？

例如：

```
net.pipe://localhost/DirectoryService
net.pipe://localhost/MathService 
```

如果没有，是否有任何其他方法可以在不使用 IIS/webdev 服务器的情况下托管这些 WCF 服务？网络.tcp? 还有什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-15T01:14:29.117

是的，只要绑定地址是唯一的。您展示的两个示例将与 net.pipe 绑定一起正常工作。

请记住，net.pipe 绑定仅适用于本地计算机。如果您希望您的服务可以从远程机器访问，您需要使用不同的绑定，例如 net.tcp。也就是说，如果您的服务在 localhost 上运行，则**推荐**使用 net.pipe 绑定，因为它比其他绑定更有效。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-15T15:34:43.243

关于 net.pipe 地址，您应该知道的另一件事是您提供的是*URN*，而不是 URL。net.pipe 是一个内存实现，您指定的“地址”可以是任何东西。

```
net.pipe://IHateCats
net.pipe://NamedPipes/Are/Fast 
```

无论任何其他因素如何，这些都将起作用。它只是该命名管道的唯一标识符。网络堆栈不涉及这种形式的通信。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-14T23:58:05.087

您可以在没有 IIS 的情况下使用 HTTP 作为服务端点，看看[ServiceHost](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicehost.aspx)类。这就是我用于本地 WCF 测试的方法，并且效果很好。

# c++ - C++ 类序列化

> ID：749757
> 
> 赞同：2
> 
> 时间：2009-04-14T23:43:39.630
> 
> 标签：c++, serialization

我最近了解了 C++ 类的朋友关键字和序列化中的用途，现在我需要一些帮助才能让它工作。

我将我的类序列化为文件没有问题，它工作得很好，但是我很难尝试将这个文件读入向量容器。我确定我的代码中需要一个循环来逐行读取，但是由于该类具有不同的类型，我想我不能使用 std::getline() 并且也许这种方法不会使用 istream 方法我实施的？示例输出文件将是：

```
Person 1
2009
1

Person 2
2001
0 
```

我的代码：

```
class SalesPeople {
    friend ostream &operator<<(ostream &stream, SalesPeople salesppl);
    friend istream &operator>>(istream &stream, SalesPeople &salesppl);

    private:
        string fullname;
        int employeeID;
        int startYear;
        bool status;
};

ostream &operator<<(ostream &stream, SalesPeople salesppl)
{
    stream << salesppl.fullname << endl;
    stream << salesppl.startYear << endl;
    stream << salesppl.status << endl;
    stream << endl;
    return stream;
}

istream &operator>>(istream &stream, SalesPeople &salesppl)
{
    stream >> salesppl.fullname;
    stream >> salesppl.startYear;
    stream >> salesppl.status;
    // not sure how to read that empty extra line here ?
    return stream;
}

// need some help here trying to read the file into a vector<SalesPeople>
SalesPeople employee;
vector<SalesPeople> employees;

ifstream read("employees.dat", ios::in);
if (!read) {
   cerr << "Unable to open input file.\n";
   return 1;
}

// i am pretty sure i need a loop here and should go line by line 
// to read all the records, however the class has different
// types and im not sure how to use the istream method here.

read >> employee;
employees.push_back(employee); 
```

顺便说一句，我知道 Boost 库有一个很棒的序列化类，但是我现在正在尝试了解如何使用 STL 库进行序列化。非常感谢您能给我的任何帮助并让我走上正轨！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-15T00:22:03.220

看起来你几乎已经拥有了所有你需要的代码！我复制了您的代码并对其进行了一些更改并对其进行了编译，以从循环中的文件中读取 SalesPeople。我将在下面包含更改，但由于这是您的家庭作业，您可能只想在查看代码之前阅读并考虑以下提示。

*   为了循环阅读销售人员，我建议您查看此[常见问题解答](http://www.parashift.com/c++-faq-lite/input-output.html#faq-15.2)。它有一个几乎完全符合您需要的示例。 [我相信， FAQ 15.4](http://www.parashift.com/c++-faq-lite/input-output.html#faq-15.4)也会对您有所帮助。

*   关于从文件中读取时如何处理多余的空行的问题，请查看此 [链接](http://www.cplusplus.com/reference/iostream/manipulators/ws/)。您可以通过这种方式非常简单地提取空白。

*   正如 jfclavette 所建议的那样，我建议查看 [std::getline](http://www.cplusplus.com/reference/string/getline/)以读取 SalesPerson 的全名，因为您需要将该行上的所有内容都放在一个字符串中。

不过，我有一个问题要问您：员工 ID 呢？我注意到它在您的示例代码中被忽略了。这是故意的吗？

现在，如果您仍然需要帮助，您可以查看我编写的代码以使其正常工作：

```
istream &operator>>(istream &stream, SalesPeople &salesppl)
{
    //stream >> salesppl.fullname;
    getline(stream, salesppl.fullname);
    stream >> salesppl.startYear;
    stream >> salesppl.status;
    // not sure how to read that empty extra line here ?
    stream >> ws;
    return stream;
}

while(read >> employee)
{
    // cout << employee; // to verify the input, uncomment this line
    employees.push_back(employee);
} 
```

此外，正如 jfclavette 所建议的，添加一些输入验证可能不是一个坏主意（在读取流状态后检查流状态并验证它是否仍然良好）。[尽管出于FAQ 15.5](http://www.parashift.com/c++-faq-lite/input-output.html#faq-15.5)中所述的原因，我建议使用 while() 循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-15T00:07:16.187

不确定你的问题是什么。你到底不明白什么？您的名字由多个标记组成的事实？没有神奇的方法可以做到这一点，您可能想通过 getline() 获得名称。或者，您可能希望在序列化时指定令牌数并读取适当的令牌计数。即，您的文件可能看起来像。

2 人 1

我假设 Person 是名字和 1 在这里的姓氏。您也可以强制执行一个名字和一个姓氏的概念，然后分别阅读每一个。

您通常会循环 while (!ifstream.eof()) 并阅读。当然，您应该始终验证输入。

另外，为什么要在每条记录之间添加一个额外的 endl ？序列化的数据不需要很漂亮。:)

# django - 需要帮助选择双语网站的框架

> ID：749758
> 
> 赞同：5
> 
> 时间：2009-04-14T23:43:44.683
> 
> 标签：django, drupal, content-management-system, internationalization

首先，一些背景信息...我正在为一个需要英语和韩语翻译的非盈利性中等规模网站提出建议。功能集包括：用于正常内容的 CMS、博客、一些表单提交/处理（包括 CSV/PDF 导出）、职位发布板、相关企业和非营利组织目录（接受访客提交）和基本（可能是博客驱动的）新闻编辑室。

我有相当强大的开发背景，我使用 Drupal 完成了一些网站，使用 CodeIgniter 等框架构建了一些基本的自定义 CMS，并且我最近开始接触 Django。这些是我正在探索的主要选项，我会考虑为项目的不同部分使用不同的工具，但我主要感兴趣的是，是否有人在本地化/国际化方面有任何经验可以分享。我还没有建立一个支持多种语言的网站，所以在我因低估任务或做出错误假设而陷入困境之前，我想获得一些意见来帮助指导我的决策过程。

您对能够很好地为 CMS 处理本地化/国际化/翻译的框架（Drupal、Django、CodeIgniter）有什么建议吗？我知道他们都支持它，但我在这里寻找真实世界的经验（或给出解释的模块/插件建议）。

很抱歉这个冗长的问题，但我想尽可能清楚。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-15T11:27:24.807

“站点”翻译和内容翻译是有区别的。Django 开箱即用地处理网站翻译。然而，内容翻译需要做出一些决定（目前没有一种正确的方法）。这可能是有道理的，因为 Django 的本质是一个较低级别的框架（与 Drupal 之类的框架相比，后者旨在用作完整的 CMS）。

有一些用于 Django 的应用程序旨在添加此功能（以在模型级别配置的翻译形式）：

*   [Django-多语言](http://code.google.com/p/django-multilingual/)
*   [全美达](http://code.google.com/p/django-transmeta/)

另外，我发现这个[问题](https://stackoverflow.com/questions/366838/how-to-localize-content-of-a-django-application)是相关的。

不过，最重要的是，这仍在 Django 世界中进行探索，并且还没有为框架确定两种方法。此外，虽然我没有使用过它，但 Drupal 以[i18n 模块](http://drupal.org/project/i18n)的形式对此提供了模块支持。

当我得出结论时，我会更新更多结论。如果您对 Django 或 Drupal 中的内容翻译有任何要添加的内容，请随时添加您自己的答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-15T00:57:35.803

您可能已经知道[django 中的原生 i18n 支持](http://docs.djangoproject.com/en/dev/topics/i18n/)非常好。至于翻译，您可以尝试[django-rosetta](http://code.google.com/p/django-rosetta/)应用程序，该应用程序允许您将翻译权限授予部分用户，然后他们可以通过类似管理员的界面进行翻译。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T23:54:43.800

[Zend_Translate](http://framework.zend.com/manual/en/zend.translate.html)非常全面。如果你决定使用 PHP，我建议你看看它。它提供了多个接口（例如数组、CSV、Gettext 等）来管理您的翻译，这使得恕我直言，它在 PHP 方面是无与伦比的。

我不确定它与 Drupal 的配合如何，因为 Drupal 几乎不是一个框架，而更像是一个 CMS——或者可能是一个 CMS 框架。我很确定 Drupal 要么有一个内置的东西，要么有一个插件。

使用 CodeIgniter，您可以从头开始，并且 Zend_Translate 可以很好地使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-15T00:10:34.603

我喜欢 Drupal 而不是 Joomla。您还应该研究 DotNetNuke，它有很多开箱即用的东西可以满足您的需求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-09-08T09:41:19.547

结帐[django-blocks](http://code.google.com/p/django-blocks/)。拥有多语言菜单、平面页面，甚至还有一个简单的购物车！！

# silverlight - Silverlight Toolkit Treeview：获取所选项目的父级

> ID：749760
> 
> 赞同：2
> 
> 时间：2009-04-14T23:45:23.103
> 
> 标签：silverlight, xaml, silverlight-toolkit

我正在使用 Silverlight 工具包中的 TreeView 组件，并且正在尝试获取所选节点的父节点。TreeView 绑定到一系列对象，因此直接使用 TreeViewItem 似乎是不可能的。

```
<toolkit:TreeView SelectedItemChanged="DoStuff" DisplayMemberPath="Name" ItemsSource="{Binding MyCollection}">
    <toolkit:TreeView.ItemTemplate>
        <common:HierarchicalDataTemplate ItemsSource="{Binding MySubCollection}">
            <StackPanel>
                <TextBlock Text="{Binding Name}" />
            </StackPanel>
        </common:HierarchicalDataTemplate>
    </toolkit:TreeView.ItemTemplate>
</toolkit:TreeView> 
```

有没有办法获取在 DoStuff 事件中选择的项目的父项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-10-06T00:01:11.283

只要您下载了最新的 Silverlight 工具包，就可以轻松使用包含的 TreeViewExtensions。

1.  下载[Silverlight 工具包](http://www.codeplex.com/Silverlight)并安装。
2.  添加对 System.Windows.Controls.Toolkit 的引用（来自 Silverlight 工具包）
3.  使用 GetParentItem() 扩展方法，如下所示：

    ```
    private void DoStuff(object sender, RoutedPropertyChangedEventArgs<object> e)
    {
        if (e.NewValue != null)
        {
            var parent = ((TreeView)sender).GetParentItem(e.NewValue);
            //
            // Do stuff with parent, this snippet updates 
            // a TextBlock showing the name of the current parent
            if (parent != null)
            {
                 Status.Text = parent.ToString();
            }
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-15T15:24:14.737

为什么不让 MySubcollection 中的对象保留对其父级的引用？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T16:41:22.950

假设您的树的名称是“树”，这应该可以解决问题

```
((tree.SelectedItem as TreeViewItem).Parent as SomeObjectOfYours) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-09-02T11:02:10.887

[Justin Angel](http://silverlight.net/blogs/justinangel/archive/2009/05/19/silverlight-treeview-advanced-scenarios-treeviewextended.aspx)写了关于“高级” TreeView 使用的文章，其中包括通过绑定对象在树视图中查找任意元素。由于我对 Silverlight 比较陌生，我不确定是否有更好、更优雅的方法，但您可以使用他的一种方法来查找父级。

我想像这样使用调用：

```
TreeViewItem trvi = ContainerFromItem(tree, tree.SelectedItem);
MySubCollectionItem parentItem = ItemFromContainer(tree, trvi.Parent); // note the "Parent" here 
```

使用以下扩展方法可从某处获得：

```
public static TreeViewItem ContainerFromItem(this TreeView treeView, object item)
{
    TreeViewItem containerThatMightContainItem = (TreeViewItem)treeView.ItemContainerGenerator.ContainerFromItem(item);
    if (containerThatMightContainItem != null)
        return containerThatMightContainItem;
    else
        return ContainerFromItem(treeView.ItemContainerGenerator, treeView.Items, item);
}

private static TreeViewItem ContainerFromItem(ItemContainerGenerator parentItemContainerGenerator, ItemCollection itemCollection, object item)
{
    foreach (object curChildItem in itemCollection)
    {
        TreeViewItem parentContainer = (TreeViewItem)parentItemContainerGenerator.ContainerFromItem(curChildItem);
        if (parentContainer == null)
            return null;
        TreeViewItem containerThatMightContainItem = (TreeViewItem)parentContainer.ItemContainerGenerator.ContainerFromItem(item);
        if (containerThatMightContainItem != null)
            return containerThatMightContainItem;
        TreeViewItem recursionResult = ContainerFromItem(parentContainer.ItemContainerGenerator, parentContainer.Items, item);
        if (recursionResult != null)
            return recursionResult;
    }
    return null;
}

public static object ItemFromContainer(this TreeView treeView, TreeViewItem container)
{
    TreeViewItem itemThatMightBelongToContainer = (TreeViewItem)treeView.ItemContainerGenerator.ItemFromContainer(container);
    if (itemThatMightBelongToContainer != null)
        return itemThatMightBelongToContainer;
    else
        return ItemFromContainer(treeView.ItemContainerGenerator, treeView.Items, container);
}

private static object ItemFromContainer(ItemContainerGenerator parentItemContainerGenerator, ItemCollection itemCollection, TreeViewItem container)
{
    foreach (object curChildItem in itemCollection)
    {
        TreeViewItem parentContainer = (TreeViewItem)parentItemContainerGenerator.ContainerFromItem(curChildItem);
        if (parentContainer == null)
            return null;
        TreeViewItem itemThatMightBelongToContainer = (TreeViewItem)parentContainer.ItemContainerGenerator.ItemFromContainer(container);
        if (itemThatMightBelongToContainer != null)
            return itemThatMightBelongToContainer;
        TreeViewItem recursionResult = ItemFromContainer(parentContainer.ItemContainerGenerator, parentContainer.Items, container) as TreeViewItem;
        if (recursionResult != null)
            return recursionResult;
    }
    return null;
} 
```

# asp.net-mvc - 在 asp.net mvc 绑定中使用 Include 和 Exclude 或者创建一个新的子集对象？

> ID：749761
> 
> 赞同：2
> 
> 时间：2009-04-14T23:45:26.350
> 
> 标签：asp.net-mvc

创建一个仅包含用户将在网页上输入的属性的对象，将其用于控制​​器中的绑定，然后映射到完整的实体对象是否有意义？还是应该只使用实体对象，并使用 Include 和 Exclude 来限制输入绑定的内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-15T00:17:20.767

我开始喜欢使用接口来隔离在更新对象时应该包含哪些属性的想法。

例如：

要创建和更新人员对象：

```
interface ICreatePerson
{
  string Name { get; set; }
  string Sex { get; set; }
  int Age { get; set; }
}

interface IUpdatePerson 
{
  string Name { get; set; }
}

class Person : ICreatePerson, IUpdatePerson
{
  public int Id { get; }
  public string Name { get; set; }
  public string Sex { get; set; }
  public int Age { get; set; }
} 
```

然后，在绑定模型时，只需使用适当的接口作为类型，它只会更新名称属性。

这是一个示例控制器方法：

```
public ActionResult Edit(int id, FormCollection collection)
{
    // Get orig person from db
    var person = this.personService.Get(id);

    try
    {
        // Update person from web form
        UpdateModel<IUpdatePerson>(person);

        // Save person to db
        this.personService.Update(person);

        return RedirectToAction("Index");
    }
    catch
    {
        ModelState.AddModelErrors((person.GetRuleViolations());

        return View(person);
    }
} 
```

请参阅[这篇文章](http://www.codethinked.com/post/2009/01/08/ASPNET-MVC-Think-Before-You-Bind.aspx)（和评论）以获得对选项的非常好的讨论。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-15T14:45:34.173

我建议在大多数情况下使用单独的表示模型类型。除了绑定问题（这很重要，但还有其他方法可以解决这个问题），我认为使用表示模型类型是一个好主意还有其他原因：

*   演示模型允许“视图优先”开发。同时创建视图和表示模型。让您的用户代表向您提供有关视图的反馈。重复直到你们都满意为止。最后，解决将其映射回“真实”模型的问题。
*   演示模型消除了“真实”模型可能具有的依赖关系，从而可以更轻松地对控制器进行单元测试。
*   演示模型将具有与视图本身相同的“形状”。因此，您不必在视图中编写代码来处理导航到“详细对象”等。
*   某些模型*不能*用于操作结果。例如，包含循环的对象图不能序列化为 JSON。

# language-agnostic - 真实代码与支持代码的比率

> ID：749792
> 
> 赞同：4
> 
> 时间：2009-04-15T00:02:21.300
> 
> 标签：language-agnostic, coding-style

我发现只有大约 30% 的代码真正解决了问题，其余的则用于日志记录、测试、参数检查、异常、错误处理等。您是否在您的代码中发现了这一点，是否有一个 IDE/Editor 允许您隐藏不感兴趣的代码？

OTOH 是否有使支持代码更易于管理且尺寸更小的语言？

编辑 - 我想我们都知道业务逻辑和其他代码之间的区别。我并不是说日志记录等不重要。事情是，当我编码时，我要么实现业务逻辑，要么确保事情不会中断。对我来说这是两种不同的思维方式，其他人是否会这样开发，是否有支持这种开发方式的 IDE？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-15T00:35:28.710

支持代码与“真实代码”一样重要。您的产品质量取决于支持代码和其他任何东西。

考虑一辆汽车。就从 A 点到 B 点而言，只需要一辆推车：一个车架、一个座椅、一个发动机、几个轮胎。但现代汽车不仅仅是基础知识。使用电子发动机正时的高效发动机。自动变速器。斗式座椅。暖气和空调。齿条和小齿轮转向。动力刹车。防抱死刹车。安静、舒适的客舱不受天气影响。气囊。压皱区和其他先进的安全功能。等等等等。

即使在软件中，细节和执行也很重要。如果您发现您的“支持代码”看起来更像是杂牌和黑客，那么是时候重新考虑您的基本方法了。但最终，合身和完成决定了最终产品的质量，就像其他任何事情一样。

**编辑：**你应该问自己的问题：

**是您的“支持代码”**：

*   用胶带固定在杆子或金属和玻璃机舱框架上的雨伞管道？
*   一根绑在汽车前部的管子，还是一个集成在压皱区的能量吸收保险杠？
*   系在车架上的绳索上的抓钩或 4 轮防抱死动力制动器？
*   一副护目镜和一件厚外套还是挡风玻璃和加热系统？

这些问题的答案可能会影响您对“支持代码”的关心程度。

**编辑：**对 Dave Turvey 评论的回应：

我鼓励重新阅读原始问题，列出的“支持代码”示例之一是“错误处理”。考虑一下。想象一下，例如，汽车、微波炉，甚至操作系统。错误处理是否应该归为二等公民，因为它在某种抽象意义上提供“支持”功能？在汽车中，安全功能是车辆基本设计的一部分，并且构成了汽车价值的重要组成部分。微波炉的安全特性和“错误处理”（事实上，微波炉的嵌入式软件也是如此）也是其价值的重要组成部分。在适当的情况下，没有正确屏蔽的微波炉可以很好地烹饪食物，

每个工具（软件或其他）的隐含功能集包括以下列表：

*   **鲁棒性**
*   **可用性**
*   **表现**

任何人建造或使用过的所有东西都具有这些功能。不理解这一点将转化为未能很好地执行这些功能，这将导致低价值和低商业利益的低质量产品。没有“支持代码”之类的东西，只是对完整功能意味着什么的本质存在误解。仅在实验室条件下抽象地起作用的“特征”是实验，而不是产品的一部分。

纯粹的、原始的特性漂浮在肮脏、丑陋的支持代码的泥潭上的想法是软件开发的错误形象。相反，想想优雅的、高度集成的、结构精良、使用直观且功能强大的机器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-15T02:16:00.590

The supporting code is important, but you want not to be distracted by it when you don't want to. There are two technologies that can help.

*   A **language with first-class functions** will help you modularize your code so that logging, timing, and so on can be implemented once and then combined with many other modules. It will also help you write unit tests. Some good ways to learn the techniques are to read the paper [Why Functional Programming Matters](http://www.cs.chalmers.se/~rjmh/Papers/whyfp.html) and to learn about the [QuickCheck](http://www.cs.chalmers.se/~rjmh/QuickCheck/) tool. (No, I am not a shill for John Hughes, but he does do wonderful work.)

*   If you cannot use a programming language with powerful capabilities for modularization and reuse, or if you don't want to, Don Knuth's [**Literate Programming**](http://www.literateprogramming.com) technique will help you organize your code so that you can split up parts the way you want and pay attention only to what you want, when you want. The [Noweb](http://www.cs.tufts.edu/~nr/noweb/) literate-programming tool supports any language that can be written in ASCII, and also combinations of those languages.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-08T11:27:17.373

工作扩大以填满它的容器。这听起来确实像一个经济学问题。（即，优化你的输出——为用户提供的特性和为开发人员提供的特性）昂贵的输入（编写特性所花费的时间，编写管道代码所花费的时间。）

您必须包含用户可见的功能，否则您没有可行的产品或工作。一旦部分完成，您剩余的时间预算将分配给具有可见的努力回报和不可见的（但积极的！）努力回报的活动，如异常日志记录、内存管理等。

无论哪种语言使实现功能更便宜，都可能会增加您的功能/管道代码比率。同样，无论哪种语言使实现管道代码变得更便宜，都可能会增加管道代码的功能，因为您将腾出更多时间来编写功能。

像所有优化问题一样，您将有 2 个影响 - 支持代码大小的增加（因为您正在使用廉价的代码生成）和功能相关代码大小的增加（因为您还有更多时间写特征），所以最终的比率可能很难预测。

我并不讨厌 90% 的代码是数据访问管道，因为与 10% 的领域特定代码的手写相比，它都是可测试的、生成的代码并且非常便宜。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-15T00:11:05.943

如果我的 IDE 可以隐藏“不感兴趣的代码”，我肯定会关闭该功能。我敢打赌，您不会希望发生这种情况的：)

当然有一些语言可以最大限度地减少支持代码的数量，但我认为你不能从 Java 切换到让我们说 JavaScript，因为在 JavaScript 中你不必声明每个异常......我认为很有必要拥有您的支持代码在哪里。

哦，你可以让你的程序正式指定并经过数学证明，那么你就不需要过多支持你的代码;D

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-02T18:35:37.067

[面向方面的编程](http://en.wikipedia.org/wiki/Aspect-oriented_programming)部分解决了这个问题。它允许您将代码注入现有的源代码/字节码。这样，您可以使诸如日志记录之类的任务出现在其自己的模块中，而不是编织到业务逻辑中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-15T02:30:33.753

It's like you want to take a trip to the top of Pike's Peak. You can take the Winnebago, you can take your SUV, or a motorcycle, or ride up on your bike.

Some ways are a more or less expensive, faster, etc. Sometimes you end up taking along a lot of stuff the isn't there strictly for accomplishing vertical progress; it's nice to have a beer in the cooler. But it pays to remember that you're responsible for everything that goes with you to the top.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-15T00:35:05.013

您所指的真实代码通常称为“业务逻辑”。

在一个好的单元测试系统中，您的单元测试应该在它们自己的类中（可能还有它们自己的程序集），所以这不应该是一个问题。

其余的大部分是基于语言的。语言越高级，在某种程度上避免编写支持代码的能力就越好。此外，目标明确的开发系统可以帮助您避免编写大量代码（Visual Basic 的屏幕生成器、Ruby on Rails 等），但这些抽象可能会崩溃，并导致您编写与其他任何代码一样多的代码，如果您可以使用它来开发超出预期类型的​​应用程序的目标。（如果您计算素数，VB 和 Ruby 并没有太大帮助）

除了语言/平台之外，您还有重构——消除所有支持代码的艺术（以及业务逻辑中的冗余）以保持代码库的清洁和小型化。

在练习高级重构时，您可能最终会为自己编写工具。

有时，将数据从代码中抽象出来并放入某种结构化文件中可以消除大量支持代码并将其余部分移至“业务逻辑”，因为现在解析数据并设置它是程序执行的“业务”的一部分.

这是一个很好的权衡，因为这种类型的业务逻辑往往更具可读性并且更容易分解。这种抽象的另一个优点是你所有的“配置”现在都是在数据中完成的，这往往会成为别人的问题。

作为此类工具的一个示例：Rails 本身！它需要大量的 Web 开发样板，并将其从代码中提取出来，并放入由数据和简单代码驱动的库中（Ruby 模糊了代码和数据之间的界限——它们的数据文件实际上循环回到在 Ruby 代码中指定！ )

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-15T00:13:49.027

我不会试图让所有的例程都万无一失，只有那些暴露在外面的世界。

[http://en.wikipedia.org/wiki/Folding_editor](http://en.wikipedia.org/wiki/Folding_editor)

更高和更动态的语言通常不那么冗长。弱类型也节省了大量代码。当然也有取舍。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-15T00:26:50.697

我在 Visual Studio 中使用 #region 指令来折叠不是主要关注点的代码块，例如单元测试。使用 log4net 日志记录语句只有一行。我还没有找到任何减少参数检查代码的方法，尽管听起来 C# 4 有某种可以帮助的契约框架。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-15T00:50:02.077

我有一些同事曾经因为一个过期且漏洞百出的项目而被客户斥责，向客户吹嘘说他们编写的测试代码是操作代码的 5 倍。

客户不高兴，我所说的“不高兴”是指他们的皮肤变绿了，他们长到了正常大小的 5 倍，而且他们的衣服脱了。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-15T01:09:53.057

您可以在检查您的参数和事物的实用程序程序集中创建一个静态类。例如，在 Spring 框架中（这是我的想法），它有一个 Assert 类，它可以非常快速地确保字符串参数不为空或对象参数不为空。它清理了验证代码并减少了重复代码，这是一个双赢的局面。

# python - 在 Python 中漂亮地打印 XML

> ID：749796
> 
> 赞同：491
> 
> 时间：2009-04-15T00:05:41.433
> 
> 标签：python, xml, pretty-print

在 Python 中漂亮地打印 XML 的最佳方式是什么（或者是各种方式）？

* * *

## 回答 #1

> 赞同：426
> 
> 时间：2009-07-30T14:12:29.050

```
import xml.dom.minidom

dom = xml.dom.minidom.parse(xml_fname) # or xml.dom.minidom.parseString(xml_string)
pretty_xml_as_string = dom.toprettyxml() 
```

* * *

## 回答 #2

> 赞同：184
> 
> 时间：2009-04-15T00:21:19.413

lxml 是最新的、更新的，并且包含一个漂亮的打印功能

```
import lxml.etree as etree

x = etree.parse("filename")
print etree.tostring(x, pretty_print=True) 
```

查看 lxml 教程： http: [//lxml.de/tutorial.html](http://lxml.de/tutorial.html)

* * *

## 回答 #3

> 赞同：118
> 
> 时间：2011-01-04T01:57:31.667

另一种解决方案是借用[这个`indent`函数](http://effbot.org/zone/element-lib.htm#prettyprint)，用于自 2.5 以来内置于 Python 的 ElementTree 库。这就是它的样子：

```
from xml.etree import ElementTree

def indent(elem, level=0):
    i = "\n" + level*"  "
    j = "\n" + (level-1)*"  "
    if len(elem):
        if not elem.text or not elem.text.strip():
            elem.text = i + "  "
        if not elem.tail or not elem.tail.strip():
            elem.tail = i
        for subelem in elem:
            indent(subelem, level+1)
        if not elem.tail or not elem.tail.strip():
            elem.tail = j
    else:
        if level and (not elem.tail or not elem.tail.strip()):
            elem.tail = j
    return elem        

root = ElementTree.parse('/tmp/xmlfile').getroot()
indent(root)
ElementTree.dump(root) 
```

* * *

## 回答 #4

> 赞同：49
> 
> 时间：2010-07-29T22:18:57.243

这是我（hacky？）解决丑陋文本节点问题的解决方案。

```
uglyXml = doc.toprettyxml(indent='  ')

text_re = re.compile('>\n\s+([^<>\s].*?)\n\s+</', re.DOTALL)    
prettyXml = text_re.sub('>\g<1></', uglyXml)

print prettyXml 
```

上面的代码将产生：

```
<?xml version="1.0" ?>
<issues>
  <issue>
    <id>1</id>
    <title>Add Visual Studio 2005 and 2008 solution files</title>
    <details>We need Visual Studio 2005/2008 project files for Windows.</details>
  </issue>
</issues> 
```

而不是这个：

```
<?xml version="1.0" ?>
<issues>
  <issue>
    <id>
      1
    </id>
    <title>
      Add Visual Studio 2005 and 2008 solution files
    </title>
    <details>
      We need Visual Studio 2005/2008 project files for Windows.
    </details>
  </issue>
</issues> 
```

*免责声明：*可能存在一些限制。

* * *

## 回答 #5

> 赞同：41
> 
> 时间：2016-09-14T04:54:09.893

你有几个选择。

# ElementTree.indent()

*使用简单，输出漂亮。*

*但需要 Python 3.9+*

```
import xml.etree.ElementTree as ET

element = ET.XML("<html><body>text</body></html>")
ET.indent(element)
print(ET.tostring(element, encoding='unicode')) 
```

# 美丽汤`.prettify()`

*BeautifulSoup 可能是 Python <=3.9 最简单的解决方案。*

```
from bs4 import BeautifulSoup

bs = BeautifulSoup(open(xml_file), 'xml')
pretty_xml = bs.prettify()
print(pretty_xml) 
```

输出：

> ```
> <?xml version="1.0" encoding="utf-8"?>
> <issues>
>  <issue>
>   <id>
>    1
>   </id>
>   <title>
>    Add Visual Studio 2005 and 2008 solution files
>   </title>
>  </issue>
> </issues> 
> ```

这是我的答案。默认参数按原样工作。但是文本内容分散在不同的行上，就好像它们是嵌套元素一样。

# lxml

*更漂亮的输出，但有参数。*

```
from lxml import etree

x = etree.parse(FILE_NAME)
pretty_xml = etree.tostring(x, pretty_print=True, encoding=str) 
```

产生：

> ```
>  <issues>
>     <issue>
>       <id>1</id>
>       <title>Add Visual Studio 2005 and 2008 solution files</title>
>       <details>We need Visual Studio 2005/2008 project files for Windows.</details>
>     </issue>
>   </issues> 
> ```

这对我来说没有问题。

* * *

# xml

*没有外部依赖，但有后处理。*

```
import xml.dom.minidom as md

dom = md.parse(FILE_NAME)     
# To parse string instead use: dom = md.parseString(xml_string)
pretty_xml = dom.toprettyxml()
# remove the weird newline issue:
pretty_xml = os.linesep.join([s for s in pretty_xml.splitlines()
                              if s.strip()]) 
```

输出与上面相同，但代码更多。

* * *

## 回答 #6

> 赞同：23
> 
> 时间：2011-04-13T12:33:29.490

正如其他人指出的那样，lxml 内置了一个漂亮的打印机。

请注意，默认情况下它会将 CDATA 部分更改为普通文本，这可能会产生令人讨厌的结果。

这是一个 Python 函数，它保留输入文件并且只更改缩进（注意`strip_cdata=False`）。此外，它确保输出使用 UTF-8 作为编码而不是默认的 ASCII（注意`encoding='utf-8'`）：

```
from lxml import etree

def prettyPrintXml(xmlFilePathToPrettyPrint):
    assert xmlFilePathToPrettyPrint is not None
    parser = etree.XMLParser(resolve_entities=False, strip_cdata=False)
    document = etree.parse(xmlFilePathToPrettyPrint, parser)
    document.write(xmlFilePathToPrettyPrint, pretty_print=True, encoding='utf-8') 
```

示例用法：

```
prettyPrintXml('some_folder/some_file.xml') 
```

* * *

## 回答 #7

> 赞同：23
> 
> 时间：2020-08-12T09:26:14.843

从 Python 3.9 开始，ElementTree 具有`indent()`漂亮打印 XML 树的功能。

请参阅[https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.indent](https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.indent)。

示例用法：

```
import xml.etree.ElementTree as ET

element = ET.XML("<html><body>text</body></html>")
ET.indent(element)
print(ET.tostring(element, encoding='unicode')) 
```

好处是它不需要任何额外的库。有关更多信息，请查看[https://bugs.python.org/issue14465](https://bugs.python.org/issue14465)和[https://github.com/python/cpython/pull/15200](https://github.com/python/cpython/pull/15200)

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2012-04-12T23:40:33.900

如果你有`xmllint`，你可以生成一个子进程并使用它。`xmllint --format <file>`将其输入 XML 漂亮地打印到标准输出。

请注意，此方法使用 python 外部的程序，这使其有点像 hack。

```
def pretty_print_xml(xml):
    proc = subprocess.Popen(
        ['xmllint', '--format', '/dev/stdin'],
        stdin=subprocess.PIPE,
        stdout=subprocess.PIPE,
    )
    (output, error_output) = proc.communicate(xml);
    return output

print(pretty_print_xml(data)) 
```

* * *

## 回答 #9

> 赞同：11
> 
> 时间：2012-10-17T17:32:01.123

我试图编辑上面“ade”的答案，但在我最初匿名提供反馈后，Stack Overflow 不允许我编辑。这是用于漂亮打印 ElementTree 的函数的错误较少的版本。

```
def indent(elem, level=0, more_sibs=False):
    i = "\n"
    if level:
        i += (level-1) * '  '
    num_kids = len(elem)
    if num_kids:
        if not elem.text or not elem.text.strip():
            elem.text = i + "  "
            if level:
                elem.text += '  '
        count = 0
        for kid in elem:
            indent(kid, level+1, count < num_kids - 1)
            count += 1
        if not elem.tail or not elem.tail.strip():
            elem.tail = i
            if more_sibs:
                elem.tail += '  '
    else:
        if level and (not elem.tail or not elem.tail.strip()):
            elem.tail = i
            if more_sibs:
                elem.tail += '  ' 
```

* * *

## 回答 #10

> 赞同：9
> 
> 时间：2009-04-15T00:48:22.377

如果您使用的是 DOM 实现，则每个实现都有自己的内置漂亮打印形式：

```
# minidom
#
document.toprettyxml()

# 4DOM
#
xml.dom.ext.PrettyPrint(document, stream)

# pxdom (or other DOM Level 3 LS-compliant imp)
#
serializer.domConfig.setParameter('format-pretty-print', True)
serializer.writeToString(document) 
```

如果您正在使用没有自己的漂亮打印机的其他东西——或者那些漂亮的打印机不完全按照你想要的方式做——你可能必须编写或子类化你自己的序列化器。

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2009-04-15T13:46:01.617

我在 minidom 的漂亮打印上遇到了一些问题。每当我尝试使用给定编码之外的字符漂亮地打印文档时，我都会得到一个 UnicodeError，例如，如果我在文档中有一个 β 并且我尝试了`doc.toprettyxml(encoding='latin-1')`. 这是我的解决方法：

```
def toprettyxml(doc, encoding):
    """Return a pretty-printed XML document in a given encoding."""
    unistr = doc.toprettyxml().replace(u'<?xml version="1.0" ?>',
                          u'<?xml version="1.0" encoding="%s"?>' % encoding)
    return unistr.encode(encoding, 'xmlcharrefreplace') 
```

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2014-05-13T14:49:14.603

```
from yattag import indent

pretty_string = indent(ugly_string) 
```

它不会在文本节点内添加空格或换行符，除非您通过以下方式要求：

```
indent(mystring, indent_text = True) 
```

您可以指定缩进单元应该是什么以及换行符应该是什么样子。

```
pretty_xml_string = indent(
    ugly_xml_string,
    indentation = '    ',
    newline = '\r\n'
) 
```

该文档位于[http://www.yattag.org](http://www.yattag.org)主页上。

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2016-07-25T17:25:06.227

我编写了一个解决方案来遍历现有的 ElementTree 并使用 text/tail 来缩进它，就像人们通常期望的那样。

```
def prettify(element, indent='  '):
    queue = [(0, element)]  # (level, element)
    while queue:
        level, element = queue.pop(0)
        children = [(level + 1, child) for child in list(element)]
        if children:
            element.text = '\n' + indent * (level+1)  # for child open
        if queue:
            element.tail = '\n' + indent * queue[0][0]  # for sibling open
        else:
            element.tail = '\n' + indent * (level-1)  # for parent close
        queue[0:0] = children  # prepend so children come before siblings 
```

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2020-02-12T17:03:19.483

这是一个 Python3 解决方案，它摆脱了丑陋的换行问题（大量空白），并且它只使用标准库，与大多数其他实现不同。

```
import xml.etree.ElementTree as ET
import xml.dom.minidom
import os

def pretty_print_xml_given_root(root, output_xml):
    """
    Useful for when you are editing xml data on the fly
    """
    xml_string = xml.dom.minidom.parseString(ET.tostring(root)).toprettyxml()
    xml_string = os.linesep.join([s for s in xml_string.splitlines() if s.strip()]) # remove the weird newline issue
    with open(output_xml, "w") as file_out:
        file_out.write(xml_string)

def pretty_print_xml_given_file(input_xml, output_xml):
    """
    Useful for when you want to reformat an already existing xml file
    """
    tree = ET.parse(input_xml)
    root = tree.getroot()
    pretty_print_xml_given_root(root, output_xml) 
```

[我在这里](https://stackoverflow.com/a/39984422/7487335)找到了如何解决常见的换行问题。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2009-04-15T00:07:19.557

[Python 的 XML 漂亮打印](http://www.codeplex.com/xmlpp)看起来非常适合这项任务。（也有恰当的名字。）

另一种方法是使用具有[PrettyPrint 功能的](http://guillaume.segu.in/blog/home/119/python-tip-of-the-day-replace-pyxmls-prettyprint/)[pyXML](http://pyxml.sourceforge.net/topics/)。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2016-09-07T17:02:38.220

你可以使用流行的外部库[xmltodict](https://github.com/martinblech/xmltodict)，你会得到最好的结果`unparse`：`pretty=True`

```
xmltodict.unparse(
    xmltodict.parse(my_xml), full_document=False, pretty=True) 
```

`full_document=False`反对`<?xml version="1.0" encoding="UTF-8"?>`在顶部。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2017-01-04T01:50:28.117

看看[vkbeautify](https://github.com/vkiryukhin/vkbeautify-python)模块。

它是我非常流行的同名 javascript/nodejs 插件的 python 版本。它可以漂亮地打印/缩小 XML、JSON 和 CSS 文本。输入和输出可以是任意组合的字符串/文件。它非常紧凑，没有任何依赖。

**例子**：

```
import vkbeautify as vkb

vkb.xml(text)                       
vkb.xml(text, 'path/to/dest/file')  
vkb.xml('path/to/src/file')        
vkb.xml('path/to/src/file', 'path/to/dest/file') 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2019-09-29T20:49:25.363

你可以试试这个变化...

安装`BeautifulSoup`和后端`lxml`（解析器）库：

```
user$ pip3 install lxml bs4 
```

处理您的 XML 文档：

```
from bs4 import BeautifulSoup

with open('/path/to/file.xml', 'r') as doc: 
    for line in doc: 
        print(BeautifulSoup(line, 'lxml-xml').prettify()) 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2017-07-25T14:38:25.697

如果您不想重新解析，另一种方法是使用带有该函数的[xmlpp.py 库。](https://xmlpp.codeplex.com/)`get_pprint()`它在我的用例中运行良好且流畅，无需重新解析为 lxml ElementTree 对象。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2015-07-27T23:06:29.990

我遇到了这个问题并像这样解决了它：

```
def write_xml_file (self, file, xml_root_element, xml_declaration=False, pretty_print=False, encoding='unicode', indent='\t'):
    pretty_printed_xml = etree.tostring(xml_root_element, xml_declaration=xml_declaration, pretty_print=pretty_print, encoding=encoding)
    if pretty_print: pretty_printed_xml = pretty_printed_xml.replace('  ', indent)
    file.write(pretty_printed_xml) 
```

在我的代码中，这个方法是这样调用的：

```
try:
    with open(file_path, 'w') as file:
        file.write('<?xml version="1.0" encoding="utf-8" ?>')

        # create some xml content using etree ...

        xml_parser = XMLParser()
        xml_parser.write_xml_file(file, xml_root, xml_declaration=False, pretty_print=True, encoding='unicode', indent='\t')

except IOError:
    print("Error while writing in log file!") 
```

这只是因为 etree 默认情况下使用`two spaces`缩进，我发现它不太强调缩进，因此不漂亮。我找不到任何 etree 的设置或任何函数的参数来更改标准 etree 缩进。我喜欢使用 etree 是多么容易，但这真的让我很烦。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-09-01T06:48:53.660

**用于将整个 xml 文档转换为漂亮的 xml 文档**
（例如：假设您已提取 [解压缩] LibreOffice Writer .odt 或 .ods 文件，并且您希望将丑陋的“content.xml”文件转换为漂亮的*自动 git 版本控制*和*`git difftool`.odt/.ods 文件的 ing*，例如我在[这里](https://github.com/ElectricRCAircraftGuy/LibreBulletin)实现的）

```
import xml.dom.minidom

file = open("./content.xml", 'r')
xml_string = file.read()
file.close()

parsed_xml = xml.dom.minidom.parseString(xml_string)
pretty_xml_as_string = parsed_xml.toprettyxml()

file = open("./content_new.xml", 'w')
file.write(pretty_xml_as_string)
file.close() 
```

参考资料：
- 感谢[Ben Noland 在此页面上的回答，这](https://stackoverflow.com/a/1206856/4561887)让我大部分时间都到达了那里。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-08-12T09:24:45.103

```
from lxml import etree
import xml.dom.minidom as mmd

xml_root = etree.parse(xml_fiel_path, etree.XMLParser())

def print_xml(xml_root):
    plain_xml = etree.tostring(xml_root).decode('utf-8')
    urgly_xml = ''.join(plain_xml .split())
    good_xml = mmd.parseString(urgly_xml)
    print(good_xml.toprettyxml(indent='    ',)) 
```

它适用于带有中文的xml！

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2020-05-14T04:16:29.647

如果由于某种原因您无法使用其他用户提到的任何 Python 模块，我建议使用以下 Python 2.7 解决方案：

```
import subprocess

def makePretty(filepath):
  cmd = "xmllint --format " + filepath
  prettyXML = subprocess.check_output(cmd, shell = True)
  with open(filepath, "w") as outfile:
    outfile.write(prettyXML) 
```

据我所知，此解决方案将适用于`xmllint`安装了该软件包的基于 Unix 的系统。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2020-10-01T20:01:23.287

我在寻找**“如何漂亮地打印 html”时发现了这个问题**

使用此线程中的一些想法，我调整了 XML 解决方案以适用于 XML 或 HTML：

```
from xml.dom.minidom import parseString as string_to_dom

def prettify(string, html=True):
    dom = string_to_dom(string)
    ugly = dom.toprettyxml(indent="  ")
    split = list(filter(lambda x: len(x.strip()), ugly.split('\n')))
    if html:
        split = split[1:]
    pretty = '\n'.join(split)
    return pretty

def pretty_print(html):
    print(prettify(html)) 
```

使用时是这样的：

```
html = """\
<div class="foo" id="bar"><p>'IDK!'</p><br/><div class='baz'><div>
<span>Hi</span></div></div><p id='blarg'>Try for 2</p>
<div class='baz'>Oh No!</div></div>
"""

pretty_print(html) 
```

返回：

```
<div class="foo" id="bar">
  <p>'IDK!'</p>
  <br/>
  <div class="baz">
    <div>
      <span>Hi</span>
    </div>
  </div>
  <p id="blarg">Try for 2</p>
  <div class="baz">Oh No!</div>
</div> 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2020-10-08T21:01:26.833

使用`etree.indent`和`etree.tostring`

```
import lxml.etree as etree

root = etree.fromstring('<html><head></head><body><h1>Welcome</h1></body></html>')
etree.indent(root, space="  ")
xml_string = etree.tostring(root, pretty_print=True).decode()
print(xml_string) 
```

输出

```
<html>
  <head/>
  <body>
    <h1>Welcome</h1>
  </body>
</html> 
```

* * *

删除命名空间和前缀

```
import lxml.etree as etree

def dump_xml(element):
    for item in element.getiterator():
        item.tag = etree.QName(item).localname

    etree.cleanup_namespaces(element)
    etree.indent(element, space="  ")
    result = etree.tostring(element, pretty_print=True).decode()
    return result

root = etree.fromstring('<cs:document xmlns:cs="http://blabla.com"><name>hello world</name></cs:document>')
xml_string = dump_xml(root)
print(xml_string) 
```

输出

```
<document>
  <name>hello world</name>
</document> 
```

* * *

## 回答 #26

> 赞同：-1
> 
> 时间：2021-05-17T13:20:56.647

我找到了一种很好地打印 xml 文件的简单方法：

```
import xml.etree.ElementTree as ET

xmlTree = ET.parse('your XML file')
xmlRoot = xmlTree.getroot()
xmlDoc =  ET.tostring(xmlRoot, encoding="unicode")

print(xmlDoc) 
```

输出：

```
<root>
  <child>
    <subchild>.....</subchild>
  </child>
  <child>
    <subchild>.....</subchild>
  </child>
  ...
  ...
  ...
  <child>
    <subchild>.....</subchild>
  </child>
</root> 
```

* * *

## 回答 #27

> 赞同：-2
> 
> 时间：2013-07-12T11:01:36.767

我用几行代码解决了这个问题，打开文件，浏览它并添加缩进，然后再次保存。我正在处理小型 xml 文件，并且不想添加依赖项或为用户安装更多库。无论如何，这是我最终得到的：

```
 f = open(file_name,'r')
    xml = f.read()
    f.close()

    #Removing old indendations
    raw_xml = ''        
    for line in xml:
        raw_xml += line

    xml = raw_xml

    new_xml = ''
    indent = '    '
    deepness = 0

    for i in range((len(xml))):

        new_xml += xml[i]   
        if(i<len(xml)-3):

            simpleSplit = xml[i:(i+2)] == '><'
            advancSplit = xml[i:(i+3)] == '></'        
            end = xml[i:(i+2)] == '/>'    
            start = xml[i] == '<'

            if(advancSplit):
                deepness += -1
                new_xml += '\n' + indent*deepness
                simpleSplit = False
                deepness += -1
            if(simpleSplit):
                new_xml += '\n' + indent*deepness
            if(start):
                deepness += 1
            if(end):
                deepness += -1

    f = open(file_name,'w')
    f.write(new_xml)
    f.close() 
```

它对我有用，也许有人会使用它:)

# c# - 在 C# 中保存 RichTextFile 的最佳方法是什么？

> ID：749797
> 
> 赞同：0
> 
> 时间：2009-04-15T00:05:50.030
> 
> 标签：c#, richtextbox, richtext, notepad, wordpad

我正在尝试创建记事本/写字板克隆。我想以 .rtf 格式保存它，以便它可以被写字板读取。如何在 C# 中保存执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-15T00:09:16.637

假设您出于学习目的尝试自己执行此操作，您不想使用库为您执行此操作：

基本上，您需要编写一个程序，该程序在内存中保存带有 RTF 标记的字符串或类似 DOM 的数据树。使用[RTF 规范](http://msdn.microsoft.com/en-us/library/aa140277.aspx)，您应该编写一个正确标记并带有 .rtf 扩展名的平面（文本）文件。就像您正在编写 HTML 文件一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-15T00:08:15.577

如果我错了，请纠正我，但如果您使用的是 RichTextBox 控件，则可以使用 RichTextBox.SaveFile 方法来完成此操作。只是猜测，尽管您的意思是在不使用该控件的情况下进行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-15T00:09:08.850

RTF 规范[链接](http://www.informationweek.com/whitepaper/Windows-Microsoft/wp100287;jsessionid=G5QQV2HHI5ATQQSNDLRSKHSCJUNN2JVN?articleID=100287)

根据他们的 api 创建 xml 规范，您可以使您的应用程序与 wordpad、word 等兼容。

# php - 使用 PHP 运行 `mysqldump` 生成的空文件

> ID：749803
> 
> 赞同：14
> 
> 时间：2009-04-15T00:07:37.857
> 
> 标签：php, mysql

我不断收到运行生成的空文件

```
$command = 'mysqldump --opt -h localhost -u username -p \'password\' dbname > \'backup 2009-04-15 09-57-13.sql\'';

command($command); 
```

有谁知道这可能是什么原因造成的？我的密码中有奇怪的字符，但可以很好地连接到数据库。

我已经运行`exec($command, $return)`并输出了 $return 数组，它正在查找命令。我也运行过它，`mysqldump > file.sql`文件包含

```
Usage: mysqldump [OPTIONS] database [tables]
OR     mysqldump [OPTIONS] --databases [OPTIONS] DB1 [DB2 DB3...]
OR     mysqldump [OPTIONS] --all-databases [OPTIONS]
For more options, use mysqldump --help 
```

所以看起来该命令正在工作。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-04-15T00:15:49.320

**删除**`-p`和密码之间的空格。如果不起作用，请尝试从密码中删除引号

来自[MySQL 文档](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html#option_mysqldump_password)：

> 如果使用短选项形式 (-p)，则选项和密码之间**不能**有空格。

但是，可以留出空间`-h`和`-u`选项

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-15T00:15:42.080

我相信 -u 和实际用户名之间没有空格。

```
host: localhost user: peter password: pwd 
```

会成为：

```
-hlocalhost -upeter -ppwd 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-05-24T07:09:24.373

我就是这样做的 - 输出是最大 gzip 压缩：

```
<?php exec("/usr/bin/mysqldump --opt --host=MYSQLHOSTNAME --user=MYSQLUSER --password=PASSWORD DATABASENAME | gzip -v -9 >DATABASENAME.". date("Y-m-d_H-i-s") . ".sql.gz");?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-01-19T16:38:38.510

简而言之，请*确保*使用以下选项（全部）。
--user=USERNAME
--host=localhost
--password=****

下一个非选项短语应该是您的数据库名称。如果命令后跟另一个非选项短语，它将被视为表名。

```
$command="mysqldump --xml --host=localhost --user=USERNAME --password=***** DBNAME > XMLTABLE.xml";
system($command); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-10T14:43:09.213

```
$command = 'C:\xampp\mysql\bin\mysqldump --opt --user=root --host=localhost --password="password" my_db'.' > '.$backupdate.$sql_file_name; exec($command); 
```

我遇到了同样的问题，并通过引用密码来解决它。例如 --password="yourpassword"。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-23T16:20:50.313

我也有使用 mysqldump 的空文件。我在 Windows 10 下运行 WampServer PHP7。

```
system('mysqldump .... ') ; 
```

不工作。我必须添加完整路径（或添加环境变量）：

```
system('C:\wamp64\bin\mysql\mysql5.7.9\bin\mysqldump.exe ...') ; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-31T09:32:03.093

您必须指定mysqldump的**完整路径：**

```
// Linux:
$command = '/usr/bin/mysqldump --opt -h localhost -u username -p \'password\' dbname > \'backup 2009-04-15 09-57-13.sql\'';

// Windows:
$command = 'c:\mysql\bin\mysqldump --opt -h localhost -u username -p \'password\' dbname > \'backup 2009-04-15 09-57-13.sql\''; 
```

# asp.net-mvc - 在 MVC 中，Controller 有哪些限制？

> ID：749811
> 
> 赞同：2
> 
> 时间：2009-04-15T00:10:05.293
> 
> 标签：asp.net-mvc, model-view-controller

控制器应该对模型对象进行直接分配，还是只告诉模型需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-15T00:14:25.377

控制器有两个传统角色：

1.  处理来自 UI 的输入事件（注册的处理程序或回调）

2.  通知模型一个动作——这可能会也可能不会导致模型状态的变化

它不执行模型上的数据验证，也不对信息的呈现方式有任何发言权。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-15T00:36:40.250

这在很大程度上取决于您的应用范围。如果它相对快速和肮脏，那么过度设计是没有意义的，当然，您的控制器可以与您的模型对象对话。另一方面，如果出于某种原因需要更加“企业化”，与 MVC 结合使用的一个很好的模式就是所谓的“业务委托”。在这里，您可以在一个或多个模型对象上用一种或多种方法组合粗粒度方法；例如删除一个对象，然后返回一个没有该对象的刷新列表。该层有两个优点。一方面，它将控制器与用于模型对象的任何 ORM 系统分离。此外，该层最终必须建设性地处理可能发生的任何异常，而不是重新抛出它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-15T00:43:25.680

我不认为控制器应该处理模型对象。

我倾向于认为控制器实际上是 UI 层的一部分。我更喜欢在控制器和应用程序的其余部分之间注入一个服务层。Web 层接受 HTTP 请求，将请求对象中的参数解组为服务接口可以处理的对象，并编组响应以发回。事务、工作单元以及处理模型和持久性对象的所有工作都由服务完成。

这种方法更面向服务。它将服务与用户界面分开，为多个客户端可以重用相同的服务留下了可能性。它使编组对服务的请求的层“变薄”，因此很容易将 SOAP 服务切换为 REST、EJB 或 CORBA 或任何下一个新事物。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-15T00:19:03.600

模型服务不必知道控制器的存在，因此，控制器可以通过使用模型服务来完成视图所需的任何事情。

# algorithm - 如何知道大 O 何时是对数？

> ID：749819
> 
> 赞同：10
> 
> 时间：2009-04-15T00:13:57.357
> 
> 标签：algorithm, math, big-o, recurrence, logarithm

我的问题来自[“Big O 的简单英语解释”一文](https://stackoverflow.com/questions/487258/plain-english-explanation-of-big-o)。我不知道对数复杂度的确切含义。我知道我可以在时间和操作次数之间进行回归并计算 X 平方值，从而确定复杂度。但是，我想知道一种在纸上快速确定它的方法。

你如何确定对数复杂度？有一些好的基准吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-04-15T00:18:56.440

不严谨，但如果你有一个算法，基本上将每次迭代需要完成的工作分成一半，那么你就有对数复杂度。经典的例子是二分查找。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-04-15T00:28:06.590

不确定这是否是您的意思，但是...当您使用像平衡二叉树这样的分散数据结构时，通常会出现对数复杂性，其中包含根节点的 1 个节点、2 个子节点、4 个孙子节点、8 个曾孙等。基本上在每个级别上，节点的数量都会乘以某个因子（2），但迭代中仍然只涉及其中一个。或者作为另一个例子，一个循环，其中索引在每一步都加倍：

```
for (int i = 1; i < N; i *= 2) { ... } 
```

类似的事情是对数复杂度的特征。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-15T00:15:12.393

[主定理](http://en.wikipedia.org/wiki/Master_theorem)通常有效。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-15T12:20:10.763

这是另一种说法。

假设您的算法在问题大小的位数上是线性的。所以，也许你有一个新的算法来分解一个大数，你可以证明它在位数上是线性的。因此，使用您的算法计算 20 位数字所需的时间是 10 位数字的两倍。这将具有日志复杂性。（这对发明者来说是值得的。）

二分法具有相同的行为。将区间长度缩短 1024 = 2^10 大约需要 10 个二等分步骤，但只需 20 步即可将区间长度缩短 2^20 倍。

日志复杂性并不总是意味着算法在所有问题上都很快。O(log(n)) 前面的线性因子可能很大。所以你的算法在小问题上可能很糟糕，直到问题规模明显大到其他算法以指数（或多项式）死亡时才会变得有用。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-04-15T00:19:02.027

如果您只是想了解对数 Big Oh，请留意在每个重复步骤中您的数据何时减半。

这是因为如果您正在处理的数据是前一步的 1/2 大，则它是一个无限系列。

# asp.net - 显示来自 Flickr 的私人照片集幻灯片

> ID：749820
> 
> 赞同：1
> 
> 时间：2009-04-15T00:14:20.507
> 
> 标签：asp.net, html, embed, flickr

我有许多在 Flickr 上标记为私人的照片集。我有一个网站，我想将它们全部显示为 Flash Sideshow。

我目前正在使用 Flickr.NET 开源库，并且创建了一个 Web 应用程序来检索所有照片集的列表。我可以使用其他方法来显示照片，但我真的很喜欢 Flickr 的嵌入幻灯片功能。

因此我的问题是 - 我应该如何编码嵌入以显示私人照片集而不使我的照片公开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-10T00:17:47.683

你不能使用标准的 Flickr 嵌入来做到这一点：http: [//www.flickr.com/help/blogging/#2937](http://www.flickr.com/help/blogging/#2937)

此处列出的所有嵌入参数：http: [//paulstamatiou.com/2005/11/19/how-to-quickie-embedded-flickr-slideshows](http://paulstamatiou.com/2005/11/19/how-to-quickie-embedded-flickr-slideshows)

我认为您可以做到这一点的唯一方法是使用 Flickr.Net 库自己构建它。您需要使用 Flickr API 进行身份验证才能访问您的私人照片。

我从您的问题中假设包含私人照片的幻灯片必须在安全的私人网站上播放，否则您只会将照片公开？

# windows - 如何为在 Windows 中执行的程序计时？

> ID：749827
> 
> 赞同：-1
> 
> 时间：2009-04-15T00:16:36.337
> 
> 标签：windows, command-line-interface, timing

我希望能够执行此 Unix/Linux 命令的 Windows 等效项：

时间富`enter code here`

```
foo
x cpu time
y real time
z wallclock time 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-15T00:22:19.990

`timeit`来自[Windows Server 2003 Resource Kit](http://www.microsoft.com/downloads/details.aspx?FamilyID=9d467a69-57ff-4ae7-96ee-b18c4790cffd&DisplayLang=en)应该可以解决问题。

# dependency-injection - 结构图 2.0 文档

> ID：749830
> 
> 赞同：0
> 
> 时间：2009-04-15T00:18:18.937
> 
> 标签：dependency-injection, inversion-of-control, structuremap

我刚刚开始学习 DI/IOC 方法，并且喜欢我迄今为止从 Structuremap 中看到的内容。问题是我当前的项目仅限于 .NET 2.0，因此我无法使用 Structuremap 的新版本（2.5）。话虽如此，有人可以向我指出一些 v2.0 的文档吗？大多数文章和教程使用 v2.5，只有一小部分使用以前的版本。我能找到的那些本质上是非常基本的，我想看看 Structuremap 必须提供的所有功能。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-10-07T12:59:15.273

您最好的选择是从`Release_2.0`StructureMap 的 subversion 存储库的标签中下载 Docs 文件夹：

[http://structuremap.svn.sourceforge.net/viewvc/structuremap/tags/Release_2.0/Docs/](http://structuremap.svn.sourceforge.net/viewvc/structuremap/tags/Release_2.0/Docs/)

如果你没有安装 subversion，底部有一个下载 GNU tarball 的链接，你应该可以用 7zip 打开它。

# java - 关于 JInternalFrames 的问题

> ID：749831
> 
> 赞同：0
> 
> 时间：2009-04-15T00:18:22.980
> 
> 标签：java, swing, user-interface, jinternalframe, componentlistener

我有一个框架，一旦它被最小化，我想最小化与之相关的其他框架。如果框架不再最小化，我也想恢复其他框架。我该怎么做呢？

编辑：nvm，它有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-15T00:28:42.440

`JInternalFrame.addInternalListener`，然后在`internalFrameDeiconified`方法中捕获。

然后你可以调用`JInternalFrame.setMaximum(true)`任何其他被最小化的。

# c# - 如何在 Silverlight 的画布上动态放置控件？

> ID：749838
> 
> 赞同：5
> 
> 时间：2009-04-15T00:21:18.230
> 
> 标签：c#, silverlight, canvas

我正在尝试将我创建的控件放在我的`Canvas`. 这个想法是能够动态地动态添加它们。就像在按钮上单击或在`DispatchTimer`. 我有以下内容，但它不起作用：

```
 FirstCircleControl mc = new FirstCircleControl();
    Canvas.SetLeft(mc, 100);
    Canvas.SetTop(mc, 100); 
```

我没有看到任何控件出现...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-15T00:40:22.020

您需要将控件添加到第`Canvas`一个。

```
yourCanvas.Children.Add(mc) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-15T02:07:24.293

将控件放置在画布或网格中是一个两步过程。

1.  将控件添加到容器的子集合
2.  设置控件在容器内的位置

您已经完成了第二步，但缺少第一步。

**对于画布**

```
Button childButton = new Button();
LayoutCanvas.Children.Add(childButton);
Canvas.SetLeft(childButton, 120);
Canvas.SetTop(childButton, 120); 
```

**对于网格**

```
Button childButton = new Button();
LayoutGrid.Children.Add(childButton);
Grid.SetRow(childButton, 2);
Grid.SetColumn(childButton, 2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T12:39:52.877

另一种（在某些情况下更容易）的方法是从`UIElement`侧面：

```
 (controlItem as UIElement).SetValue(Canvas.TopProperty, topVal);
    (controlItem as UIElement).SetValue(Canvas.LeftProperty, left); 
```

# c# - 在控制台中运行 Windows 服务

> ID：749841
> 
> 赞同：3
> 
> 时间：2009-04-15T00:21:21.410
> 
> 标签：c#, .net

将 Windows 服务作为控制台运行的最佳方式是什么？

我目前的想法是传入一个“/exe”参数并完成windows服务的工作，然后调用Application.Run()。

我这样做的原因是为了更好地调试 Windows 服务并允许更轻松地分析代码。该服务基本上是托管 .NET 远程对象。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-15T00:31:13.417

我就是这样做的。为控制台应用程序和服务提供相同的 .exe。要作为控制台应用程序启动，它需要 -c 的命令行参数。

```
private static ManualResetEvent m_daemonUp = new ManualResetEvent(false);

[STAThread]
static void Main(string[] args)
{
    bool isConsole = false;

    if (args != null && args.Length == 1 && args[0].StartsWith("-c")) {
        isConsole = true;
        Console.WriteLine("Daemon starting");

        MyDaemon daemon = new MyDaemon();

        Thread daemonThread = new Thread(new ThreadStart(daemon.Start));
        daemonThread.Start();
        m_daemonUp.WaitOne();
    }
    else {
        System.ServiceProcess.ServiceBase[] ServicesToRun;
        ServicesToRun = new System.ServiceProcess.ServiceBase[] { new Service() };
        System.ServiceProcess.ServiceBase.Run(ServicesToRun);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-15T00:24:22.667

Code Project 站点有一篇很棒的[文章](http://www.codeproject.com/KB/dotnet/DebugWinServices.aspx)，展示了如何在 Visual Studio 调试器中运行 Windows 服务，无需控制台应用程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-15T00:24:36.083

或者

```
C:\> MyWindowsService.exe /?
MyWindowsService.exe /console
MyWindowsService.exe -console 
```

# c# - 面向 C# 程序员的 SQL Server

> ID：749852
> 
> 赞同：10
> 
> 时间：2009-04-15T00:24:38.207
> 
> 标签：c#, sql

我是一个非常优秀的 C# 程序员，需要学习 SQL Server。我学习 SQL Server/数据库开发的最佳方式是什么？

**注意：**当谈到 DB 和 SQL 时，我是个新手。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-04-15T01:18:28.327

SQL 是关于集合论，或者更准确地说，是关系代数。阅读一个简短的入门。并学会在集合中思考，而不是在程序中思考。

在实践方面，有四个基本操作，

*   选择，显示表数据的一些投影
*   删除，删除表行的某些子集，
*   插入，将行添加到表中，
*   更新，（可能）更改表中的数据

（子集是指任何子集，包括空集，不一定是真子集。）

在 DDL 中可以在任何地方编写列名（作为更新目标除外），我都可以编写使用列名、函数或常量的表达式。

`select 1, 2, 3 from table`将为表中的每一行返回结果集“1 2 3”。如果命名的列`create_date`是日期类型，并且函数`month`返回给定日期的月份数，`select month( create_date) from table`将显示每个 create_date 的月份数。

where 子句是一个谓词，它将选择、删除或更新的行限制为谓词为真的那些行。一个 where 原因可以由逻辑运算符`and` `or`和连接的任意数量的谓词组成`not`。就像 a 中的列列表一样`select`，我可以在`where`子句中使用列名、函数和常量。您认为从哪个结果集返回`select * from table where 1 = 1;`？

在查询中，表通过连接关联，其中某个数据或键通过运算符与另一个表中的数据或键相关联。关系运算符通常是相等的，但实际上可以是任何二元运算符甚至是函数。

正如我上面提到的，表格是通过键关联的；表中的一行可能与另一个表中的零、一或多行相关；这被称为关系的基数。关系可以是一对一、一对多、多对多。有表示每个关系的标准方法。在您查找执行此操作的标准方法之前，请考虑您将如何表示每种方法，每种方法的最低要求是什么。您会看到多对多关系实际上也可以建模一对多和一对一。问问自己为什么，鉴于此，所有关系都不是多对多的。

EF Codd 等人在关系数据库中率先提出了范式的概念。通常认为有五六种范式，但范式最重要的总结很简单：您的数据库模型的每个实体都应该由一行和一行表示，每个属性都应该取决于行的键，并且每一行都应该为一个实体或关系建模。**阅读范式入门，**并了解如果您的数据库未规范化，为什么会出现数据不一致。

在这一切中，试着理解为什么我喜欢说**“如果你对数据库撒谎，它就会对你撒谎”**。我指的不是糟糕的数据，而是糟糕的设计。例如，如果您将一对多关系建模为多对多，那么可以记录哪些“谎言”？如果您的表格未标准化，会发生什么“谎言”？

实际上，视图是给定名称并存储在数据库中的选择查询。如果我经常通过多对多关系将表连接`student`到表，也许我可以编写一个视图，从该连接中选择感兴趣的列，并使用该视图而不是总是重写连接。`major``student_major`

实用技巧：**首先，写一个视图**。无论你在做什么，如果你为你所做的每个计算或子计算编写一个视图，它会变得更简单和更清晰。编写一个封装每个连接的视图，编写一个封装每个转换的视图。几乎任何您想做的事情都可以在视图中完成。

将查询分解为视图的目的与函数式分解在过程代码中的作用相同：它使您可以专注于做好一件事，使其更易于测试，并允许您从更简单的操作中组合出更复杂的功能。[这是一个示例，我使用视图将表格转换为更容易让我应用连续转换以实现目标的表单。](https://stackoverflow.com/questions/702500/sql-query-to-collapse-duplicate-values-by-date-range/712309#712309)

**不要混淆数据。**每个表应该明确地建模一件事（一种实体）并且只建模一件事；每列应该表达该事物的一个且仅一个属性。不同种类的实体属于不同的表。

**元数据是你的朋友**。您的数据库平台将提供一些元数据；它没有提供你应该添加的内容。由于元数据是数据，所有建模数据的规则都适用。例如，您可以从系统表中获取数据库中所有对象的名称`sysobjects`；`syscolumns`包含所有列。要查找一个表中的所有列，您需要连接id 并添加一个`sysobjects`子句，将结果集限制为特定的表名：。`syscolumns``where``where sysobjects.name = 'mytable'`

**实验。**坐在数据库前问自己：“我如何用头发颜色、职业和住所来表示人？建模中隐含了哪些表格和关系？” 然后将其建模为表格。

然后问自己，“我怎样才能显示所有居住在亚特兰大的金发医生”，然后写出这样的查询。通过编写向您展示所有金发女郎、所有医生和所有居住在亚特兰大的人的视图，将其拼凑起来。

你会发现在问“我怎么能找到那个”时，你会暴露你的模型中的缺陷，你会发现你想要甚至需要改变你的模型的工作方式。进行更改，看看它们如何使您的查询更容易或更难编写。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-15T00:29:15.667

我喜欢[Joe Celko](http://www.amazon.com/exec/obidos/search-handle-url/ref=ntt_athr_dp_sr_1?%5Fencoding=UTF8&search-type=ss&index=books&field-author=Joe%20Celko)从新手到高级的书籍。我也认为[虚拟实验室](http://msdn.microsoft.com/en-us/aa740409.aspx)很棒。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-15T00:48:26.683

学习 SQL 语法的简单方法？

使用 Microsoft Access。使用 Northwind 示例数据库，在查询视图中打开 Access 并运行一些查询。

[创建一个简单的查询](http://databases.about.com/od/tutorials/l/aaquery1.htm "创建一个简单的查询")

从 SELECT * FROM 开始，逐步完成更复杂的示例。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-15T04:39:39.747

最好的资源之一是[http://www.sqlservercentral.com/](http://www.sqlservercentral.com/)大量文章

另一个很好的资源是[http://www.trainingspot.com/VideoLibrary/Default.aspx](http://www.trainingspot.com/VideoLibrary/Default.aspx)

这是我的 DBA 建议我阅读的用于学习 SQL 的书籍列表

1.  [Best Damn Exchange, SQL and IIS Book Period](https://rads.stackoverflow.com/amzn/click/com/1597492191)或[谷歌书籍](http://books.google.com/books?id=ANq91_j74DMC&printsec=frontcover&dq=Best+Damn+Exchange+Book+Period&ei=vWTlSaGvDYvUkwSOybiaBg#PPA5,M1)
2.  [入门SQL Server 2008 开发人员](https://rads.stackoverflow.com/amzn/click/com/1590599586)或[Google 书籍](http://books.google.com/books?id=N230N2GvzoYC&printsec=frontcover&dq=Beginning+SQL+Server+2008+Developers&ei=amTlSdP9JozOkAS9yLGqDQ)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-15T15:31:44.810

以下是我强烈建议您按顺序阅读的三本书。

[开始 SQL Server 2005 编程](https://rads.stackoverflow.com/amzn/click/com/0764584332)

[专业 SQL Server 2005 编程](https://rads.stackoverflow.com/amzn/click/com/0764584340)

[Transact SQL 大师指南](https://rads.stackoverflow.com/amzn/click/com/0201615762)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-15T00:27:00.477

[W3Schools](http://www.w3schools.com/sql/default.asp)有一个很好的教程，通过示例设置进行尝试。但除了安装一个速成版并使用演示数据库进行大量试验之外，我想说没有书能更好地教你。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-15T00:32:43.147

我想说你最好的选择是报名参加当地大学的 DB 课程。你通常可以找到夜校。您将从简单的数据库概念开始，例如什么是数据库，什么是表。

讲师通常会在课程进行到一半时给您一个项目作为家庭作业，您将在课程中为音像商店之类的东西设计和实现一个简单的数据库。您将与其他与您水平相同的学生进行互动，并有兴趣从新的 DB 专家的角度讨论技术细节。而且您将拥有一位经验丰富的讲师，您可以提出问题并获得及时的互动，他们不会像我们的互联网海报那样刻薄:)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-15T00:36:44.197

从马口中得到--> [http://www.asp.net/learn/videos/default.aspx?tabid=63#sql](http://www.asp.net/learn/videos/default.aspx?tabid=63#sql)

如今，大多数大学都有在线课程。尝试研究一些优秀的教授并学习基础知识。他们的任务也很有用。

在我的头顶，我可以想到麻省理工学院开放课件（OCW）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-15T00:37:35.867

这取决于您需要做什么。如果你只需要访问数据库，你应该看看各种访问策略——DataReader、DataSet、LINQ to SQL、Entity Framework、NHibernate——然后选择一个解决方案。

如果您需要开发数据库，​​请获取有关该主题的好书。熟悉理论知识 - 关系代数、键、参照完整性和规范化。然后看看 SQL，最后你可能会仔细看看 ACID 事务、锁定、并发控制、索引以及使数据库服务器工作的所有技术细节。

我建议阅读维基百科的文章——可能是 100 篇最重要的文章——以了解全局，然后在需要时了解详细信息。但是，如果您想获得一名优秀的数据库开发人员，这可能无法替代一本好书。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-15T01:14:36.667

我倾向于喜欢书籍，因为我可以在任何地方阅读它们，我可以按照自己的节奏进行，并且可以获得电子书副本（使用 apress 时）。我也碰巧以这种方式更有效地学习，因为我已经知道大多数概念，如数据库类型.. int、bool、guid 等......你也会知道这些。所以，基本上，我会推荐 apress 系列书籍 - 非常全面的 IMO。而且您通常可以在亚马逊上以非常便宜的价格找到它们……这是为您量身定制的：

[http://www.amazon.com/Beginning-SQL-Server-2008-Developers/dp/1590599586/ref=sr_1_1?ie=UTF8&s=books&qid=1239758026&sr=1-1](https://rads.stackoverflow.com/amzn/click/com/1590599586)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-15T01:21:12.343

当您注册 Microsoft Books Newsletters（来自 Microsoft Press）时，他们实际上会（免费）为您提供一本名为 Introducing SQL Server 2008 的电子书。

[http://csna01.libredigital.com/?urss1q2we6](http://csna01.libredigital.com/?urss1q2we6)

# nhibernate - 与 nhibernate 的双向关系模式

> ID：749861
> 
> 赞同：2
> 
> 时间：2009-04-15T00:28:31.550
> 
> 标签：nhibernate, fluent-nhibernate, domain-driven-design

在我的领域中，员工和部门具有一对多的双向关系；为了让子员工同步这一点，我有一个“内部”访问字段，用于该部门中的员工集合（NHibernate 的 Iesi），否则该字段将是只读公共的。像这样：

*部门类：*

```
protected internal ISet<Employee> _staff;  
public virtual ReadOnlyCollection<Employee> Staff {  
   get { return new List<Employee>(_staff).AsReadOnly(); }   
}  
public virtual void AddStaff(Employee emp) {
    emp.Department = this;  } 
} 
```

*员工等级：*

```
private Department _department;
public virtual Department Department {
   set {
       // check valid value, etc.
       value._staff.Add(this);
   }
} 
```

我在我的 (FNH) 映射 AsField(Prefix.Underscore) 中进行了访问，但由于我无法将 Department._staff 字段设为虚拟 NH 并不高兴。我想我可以使该字段成为虚拟属性并强制输入它，但这感觉就像我让域类过度意识到持久性。

我正在学习 NH 和 FNH，我知道我需要一个很好的关系映射入门，但我对这篇文章的主要问题是我的域类中的逻辑：
1) 这是一个好的 c# 编程模式，用于只读集双直关系？
2) 让 NHibernate 更有用的最好方法是什么？

感谢分享！
绿柱石

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-15T02:08:41.577

我使用这种模式实现了一对多的关系：

```
public class Department
{
    private IList<Employee> _staff = new List<Staff>();

    public virtual IEnumerable<Employee> Staff
    {
        get { return _staff; }
    }

    // Add and Remove have additional checks in them as needed

    public virtual void AddStaff(Employee staff)
    {
        staff.Department = this;
        _staff.Add(staff);
    }

    public virtual void RemoveStaff(Employee staff)
    {
        staff.Department = null;
        _staff.Remove(staff);
    }
} 
```

```
public class Employee
{
    public virtual Department Department { get; internal set; }
} 
```

在这种情况下，部门是关系的反面。

# c++ - C++ mutable 在这种情况下合适吗？

> ID：749865
> 
> 赞同：3
> 
> 时间：2009-04-15T00:29:47.727
> 
> 标签：c++, mutable

我想问一下这里使用 mutable 是否合适：

```
#include <iostream>

class Base
{
protected:
  int x;

public:
  virtual void NoMod() const
  {
    std::cout << x << std::endl;
  }
  void Draw() const
  {
    this->NoMod();  
  }
};

class Derive : public Base
{
private:
  mutable int y;

public:
  void NoMod() const
  {
    y = 5;
  }
};

int main()
{
  Derive derive;

  // Test virtual with derive
  derive.Draw();

  return 0;
} 
```

Base 类是第 3 方库。我正在扩展它以提供我自己的 NoMod()。库原始 NoMod() 被声明为 const。

我的 NoMod() 与 Base 的不同之处在于它需要修改自己的成员变量。

因此，为了让我自己的 NoMod() 编译并在调用 Draw() 时被调用，我必须

1) 将 Derive::NoMod() 实现为 const
2) 使我的 int y 可变。

这是我能做的最好的吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-15T00:41:26.137

很难说，因为你没有给出任何关于`y`指的是什么或如何使用它的上下文。

通常，`mutable`仅在更改可变变量不会更改对象的实际“值”时才适用。例如，当我为 C 风格的字符串编写包装器时，我需要使内部`mLength`变量可变，以便我可以缓存长度，即使请求它的对象是`const`对象。它没有*改变*长度或字符串，并且在类本身之外不可见，因此`mutable`可以。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-16T02:07:28.963

正如“头极客”所描述的，您的问题的答案取决于您的数据成员的使用方式。

我区分了一个类中的两种类型的数据成员。

我使用通用术语“属性”来指代作为对象的逻辑状态或“值”的数据成员。通常属性很少被声明为可变的。

我创造了原型主义“贡献”，它表示只是“工作内存/存储”的数据成员，并且与对象的状态有些脱节。贡献与对象的用户没有上下文相关性，它们存在于类中只是为了对对象的维护和有效操作做出贡献。贡献通常在类中声明为可变的，并且始终是私有的或受保护的。

例如，假设您的对象是一个链表，因此您有一个指向列表中第一项的指针。我认为这个指针是有贡献的，因为它不代表列表中的数据。即使列表已排序并且指针设置为列表中的新第一项，列表对象的用户也可能不太关心列表的维护方式。只有列表数据是否被修改以及列表是否排序与用户的观点相关。即使您有一个布尔数据成员“排序”来快速确定列表是否处于排序状态，这也将是一个贡献，因为它是列表结构本身赋予排序状态，使用“排序”变量成员只是为了有效地记住状态而不必扫描列表。

再举一个例子，如果你有一个搜索列表的 const 方法。假设您知道通常搜索将返回最近搜索过的项目，您将在类中保留指向此类项目的指针，以便您的方法可以在搜索整个列表之前首先检查最后找到的项目是否与搜索键匹配（如果该方法确实需要搜索列表并找到一个项目，则指针将被更新）。我认为这个指针是一个贡献，因为它只是为了帮助加快搜索速度。即使搜索更新了指针的贡献，该方法实际上是 const 的，因为容器中的项目数据都没有被修改。

因此，作为属性的数据成员通常不被声明为可变的，而有助于对象功能的数据成员通常是可变的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-15T00:34:38.133

我认为唯一`mutable`没问题的是引用计数之类的事情，这些事情并不是对象状态的一部分。

如果`y`是对象的*物理*状态的一部分，但不是*逻辑*状态，那么这是可以的，否则，不要这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-15T05:29:08.880

您可以想到“可变”的另一种情况是当您有一个具有“const”成员变量的类并且您需要实现赋值运算符（=）而不跳过“const”成员的赋值时。

此外，const_cast 应用于最初声明的“const”变量，并根据 C++ 标准*使用UB。*因此，如果方法的接口接受必须在内部修改的“const”，则将其传递给“可变”参数。

您可以从上述情况判断它的适当性，即只有它在语义上才有意义！不要使用它来使源代码可编译。

问候，

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-15T05:39:31.943

当类的成员没有真正定义对象的状态时，使用 mutable （例如，有助于提高性能的缓存值/对象）。

我用来做另一个不同的事情。在您的示例中，您只强制对 const 对象进行一次更改。您还可以使用 const_cast 运算符：

```
const_cast< Derive*>( this)->y = 10; 
```

当您使用 const_cast 运算符时，您可以通过简单地在代码中搜索运算符名称来轻松识别强制执行 const 到非 const 转换的位置。

但是，正如我所说，如果成员不是对象状态的一部分，但必须在几个常量方法中间接更改，则对该成员使用 mutable。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-15T09:17:28.690

我需要可变功能的唯一情况是：

*   派生数据的缓存版本。例如，如果您有一个 Rectangle 类，它有一个可能会被大量调用的 GetSurface() 成员函数，您可以添加一个可变的 m_surfaceCache 成员变量来保留派生数据。
*   临界区成员变量。这是因为我的 CriticalSection::Enter() 函数在概念上不是 const，但临界区成员变量不是类数据的真实部分，它更像是编译器指南。

但是，作为一般经验法则，我建议不要过于频繁地使用 mutable，因为它绕过了 C++ 美妙的 const 特性。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-16T05:26:04.867

如果如您所说，它是第三方库的一部分，您可能别无选择。C++ 本质上是一种实用的语言，可以让你做你需要做的事情，即使它可能并不总是“最佳实践”。

不过要注意的一件事是，第三方库正在记录 NoMod 不应通过添加该 const 说明符来修改对象。通过违反该合同，您会让自己面临可能的麻烦。如果库在某些情况下多次调用 NoMod，您的派生类能够更好地处理它，因为真正的 const 方法不会有问题。

我首先会寻找另一种解决问题的方法，但如果失败则声明它是可变的。

# c# - 无法修改表达式，因为它不是变量

> ID：749869
> 
> 赞同：6
> 
> 时间：2009-04-15T00:33:11.290
> 
> 标签：c#, winforms, user-controls

我正在尝试在 Windows 窗体上获取一个 UserControl（上面有一个网格）来调整大小。下面的代码是我在表单中的代码。我得到的行为是，当我把它变大时，它会调整大小。但它不会缩小。我做错了什么（或）我错过了什么？

```
private void AdjustGrid()
{
    ZoomControl.Location = new Point(5, 5);
    ZoomControl.Size = new Size(this.Width - 15, this.Height - 75);
}

void zoomform_Resize(object sender, EventArgs e)
{
    AdjustGrid();
} 
```

现在用户控件有以下代码：

```
//Resize the grid that the UserControl has on it
private void NameValuePropertyBag_Resize(object sender, EventArgs e)
{
    grdNameValueProperties.Location = new Point(4,4);
    grdNameValueProperties.Size = new Size(this.Width - 8, this.Height - 8);
} 
```

~~我试过了~~

 ~~```
grdNameValueProperties.Size.Width = this.Width - 8;
grdNameValueProperties.Size.Height = this.Height -8; 
```~~ 

~~它给了我“无法修改表达式，因为它不是变量”错误......我错过了什么？~~

附加信息：

我正在使用 SetParent() Windows 调用将 UserControl 移动/缩放到另一个窗体 (ZoomForm)。 ~~Anchor 似乎不适用于使用 SetParent() 移动的控件...更准确地说，它可能正在工作，但我有重绘问题。~~

我让 Anchor/Dock 对可以正常工作而不会出现重绘问题 [我删除了调整大小事件连接并将 Dock 调整为填充]

ZoomForm 最初没有控件。用户控件被动态添加到 ParentForm。

目前，我可以~~使用上面的代码~~使缩放形式更大，但不能更小。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-15T00:44:30.780

```
grdNameValueProperties.Size.Width = this.Width - 8;
grdNameValueProperties.Size.Height = this.Height -8; 
```

该代码给出了错误，因为 Size 是值类型，而不是引用类型。阅读此[http://www.yoda.arachsys.com/csharp/parameters.html](http://www.yoda.arachsys.com/csharp/parameters.html)可能有助于解释值类型和引用类型之间的区别。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-15T00:44:51.900

正如递归所评论的，您应该只使用 Anchor 属性。

发生错误是因为 Size 属性公开了一个结构而不是引用类型。Size 属性返回控件大小对象的副本。写入该副本的属性 Width 和 Hight 是没有意义的，因为它只是一个临时副本，没有任何地方的内存支持。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-15T00:41:58.023

您不能直接更改`Size.Width`UserControl 上的属性，因为该`Size`属性是一种值类型，因此更改其宽度基本上会覆盖整个`Size`属性。相反，WinForms 中的控件提供了它们自己的 Width 和 Height 属性，所以这段代码应该可以工作：

```
grdNameValueProperties.Width = this.Width - 8;
grdNameValueProperties.Height = this.Height - 8; 
```

话虽如此，我同意@recursive 的评论，即您可能应该只使用 UserControl 的`Anchor`属性来使其“自动”调整大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-15T01:11:40.933

*目前，我可以使用上面的代码使缩放形式更大，但不能更小。*

一些控件上有一个 MinSize（或类似的）属性。您是否有任何无法调整大小的设置？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-15T00:45:27.377

对于第一部分 -

首先，我建议在 UserControl 上使用 Anchor 属性，而不是尝试自己调整大小。它非常简单且非常可靠地处理窗口大小调整。

如果你想这样做，你可能应该考虑链接 this.ClientSize 而不是 this.Height 和 this.Width。您可能将控件设置得太大，这会使面板或您所坐的其他东西脱离锚定，这会导致各种问题。

第二部分是由于 gridNameValue Properties.Size.Width 是结构的成员。

当您调用 gridNameValueProperties.Size 时，您将返回一个 Size 结构，然后尝试在返回的结构（不是原始结构）上设置宽度。这就是为什么您需要一次性设置整个 Size 值类型的原因。创建一个新的 Size() 并将其设置为 gridNameValueProperties.Size 是使其工作的唯一方法。

# clojure - 如何在 Clojure 中解析二进制文件

> ID：749871
> 
> 赞同：9
> 
> 时间：2009-04-15T00:34:17.137
> 
> 标签：clojure, binaryfiles, binary-data

在 clojure 中解析二进制数据的最简洁方法是什么？我需要能够同样干净地读取/写入文件或套接字。

就像是：

```
  （读取数据源数据）
  => { :index 42 , :block-size 4 , 数据大小: 31415, :data (1 2 3 4 ...)}

```

和相反的数据放回。以某种方式定义一次结构并让读写函数使用相同的定义真的很棒。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2011-10-26T05:32:52.353

[Gloss](https://github.com/ztellman/gloss/wiki/Introduction) makes it easy to define binary formats at the byte level for both reading and writing.

```
(defcodec example-codec
  [:id       :uint32
   :msg-type (enum :byte {:a \A, :b \B})
   :status   (string :ascii :length 11)])

(def buffer (byte-array 16))

(.read (input-stream "filename.bin") buffer)
(decode example-codec buffer)

(encode example-codec {:id 42, :msg-type :a, :status "A-OKAY"}) 
```

The `bit-map` function allows bit level formats, but the number of bits defined must be divisible by 8 so the bytes still line up.

There's also [byte-spec](https://github.com/rosejn/byte-spec).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-15T19:52:25.357

既然 Clojure 可以使用原生 Java 函数，为什么不使用它们呢？沿着这些思路快速搜索一下：http: [//gnuvance.wordpress.com/2009/01/29/reading-binary-data-in-clojure/](http://gnuvince.wordpress.com/2009/01/29/reading-binary-data-in-clojure/)

# c++ - C++ 套接字 256 字节缓冲区

> ID：749873
> 
> 赞同：5
> 
> 时间：2009-04-15T00:34:48.930
> 
> 标签：c++, sockets, buffer

我正在尝试在 C++ 中使用一些套接字网络编程。我正在尝试发送文本“Hello World！” 使用 C++ send() 函数发送到服务器。起初，我将缓冲区的大小设置为 13，因为“Hello World！” 一共是 12 个字符（你必须使它比字符数多一个）。如果我发送大约 7 次，发送功能只会将字符发送到服务器。当它最终到达服务器时，它看起来像这样：

“你好世界！你好世界！你好世界！你好世界！你好世界！你好世界！你好世界！”

现在这是有趣的部分。“你好世界！” 如果我将缓冲区大小设置为 256 (char buffer[256];)，句子会立即发送。但是，当涉及到这样的服务器时，它会显示“Hello World！” 这两个词后面有一大堆空格。为什么会发生这种情况，如果可能，我该如何解决？请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-15T00:36:25.790

当您使用缓冲区调用`read`(or `receive`) 以从套接字读取时，将返回一个整数值，该值指定读取的字节数。您应该只从缓冲区中获取那么多。其余的无关紧要：

```
int count = read(...);
// buffer[0 .. count - 1] contains the appropriate data. 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-15T01:21:44.620

Nagle 算法通常默认开启。这会将几个小数据包合并为一个。关闭 Nagle 的算法将允许立即发送小数据包。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-15T00:36:33.480

在您准备好发送数据之前，存在缓冲区来存储数据。您的发送缓冲区大小为 256。在通过缓冲区传输 256 个字符之前，您的数据不会发送到另一端。当您知道您准备好发送时，您可以通过在缓冲区上调用刷新方法来解决此问题。

需要明确的是，您正在内部缓冲，然后当您调用 send() 并传递一些数据时，操作系统（或库）再次缓冲。

如果您更具体地了解您正在使用的库，并且可能包含代码片段，我们可能会找到正确的缓冲区刷新函数来发送您使用。

或者，如果您在 *nix 中，只需关闭 Nagle 的算法，这样操作系统就不会缓冲您的小数据包。或者，当您设置套接字时，请确保使用 TCP_NODELAY 选项

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-16T04:01:06.867

Socket 编程繁琐、容易出错且不可移植。开始使用[Boost](http://www.boost.org)或[ACE](http://www.cs.wustl.edu/~schmidt/ACE.html)之类的库，它们可以保护您免受低级 C API 的影响，并为您提供与平台无关的抽象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-15T02:40:35.477

Assuming this is a SOCK_STREAM socket, the important thing to be aware of is that the underlying TCP protocol does not maintain any segment boundaries. That is, when you call send() multiple times, all of the data you sent may very easily be returned by a single recv() call at the other end. Or, the data sent in one send() call may be returned in multiple recv()s at the other end, e.g. if some packets got delayed due to network congestion. This is fundamental to the design of TCP, and your application must be designed accordingly.

Also, as noted by Mehrdad, the recv() call returns the number of bytes that were read off the wire. Anything after that point in the buffer is garbage, and the data is not zero-terminated.

A SOCK_DGRAM socket uses UDP underneath, which is entirely packet-oriented, as opposed to stream-oriented like TCP. However, UDP does not guarantee reliability (the U stands for Unreliable), so you have to handle lost, duplicated, out-of-order etc. packets yourself. This is a lot harder than stream-oriented I/O.

# delphi - CreateProcess 和 WaitForSingleObject 在两个 PDF 文件中的第二个失败

> ID：749881
> 
> 赞同：1
> 
> 时间：2009-04-15T00:36:18.457
> 
> 标签：delphi, delphi-2007, createprocess

全部

我在 Delphi 2007 中使用 CreateProcess 和 WaitForSingleObject 打开文件并等待它们被关闭。我发现当我连续打开两个 PDF 文件时，第二个 WaitForSingleObject 立即返回。我还发现 jpg 和 tif 文件会发生这种情况，但 txt 文件不会发生这种情况。此外，第二个 PDF 的打开时间比单独打开的时间长 10 秒！它也发生在 Vista 和 XP 以及一系列计算机上。我是在错误地使用 CreateProcess 还是其他原因？

任何帮助，将不胜感激。

问候

鲍勃

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-15T19:18:06.560

发生的情况取决于注册以打开 PDF 或 JPG 文件的应用程序。如果您在 SDI 应用程序中打开文档，则每个*CreateProcess()*调用都会返回应用程序的进程句柄，您可以等待 - 这将在编辑文档的应用程序关闭时返回。

但是，如果应用程序仅限于单个实例，那么一旦新实例将数据传递给第一个实例（通常会在新框架中打开文档），每次进一步的调用都会返回，然后退出。我认为这就是您的情况，可能您正在使用 Acrobat Reader 打开 PDF 文件？

# android - 如何使用 Android 地图通过手势进行缩放（类似 iphone）

> ID：749887
> 
> 赞同：5
> 
> 时间：2009-04-15T00:37:06.960
> 
> 标签：android, api, map, zooming, gesture

您如何使用 Android API 像 iPhone 一样通过 2 个手指手势放大和缩小地图？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2010-01-04T21:47:43.097

您需要使用以下内容覆盖 MapActivity 的 OnTouchEvent()：

```
@Override
public boolean onTouchEvent(final MotionEvent event)
{
    if(event.getPointerCount() > 1)
    {
        int x1 = event.getX(0);
        int y1 = event.getY(0);
        int x2 = event.getX(1);
        int y2 = event.getY(1);

        // Get the distance and see how it compares to the previous
        // distance between these two pointers
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2009-04-15T01:02:14.200

Android 目前不正式支持多点触控。各种各样的人都做了一些工作（你的 'android multitouch' 谷歌和我的一样好），但在官方的 android 发行版或 API 中还没有。

一篇[相关的博客文章](http://phandroid.com/2009/04/15/company-suing-apple-shows-off-multi-touch-on-android/)刚刚出现在我的提要阅读器中，其中包含更多细节。

**更新：**从 Android [API Level 5](http://developer.android.com/guide/appendix/api-levels.html#level5)（又名 Android 2.0）开始，Android 确实有一个多点触控 API。当然，对它的支持是特定于浏览器的。

# emacs - 有没有做 Emacs 项目的好方法？

> ID：749888
> 
> 赞同：9
> 
> 时间：2009-04-15T00:37:32.107
> 
> 标签：emacs, project

我使用 emacs 进行一些编码和文本编辑。当我创建一个新的编码项目时，我只需创建一个新文件夹，并将源代码添加到其中。

问题是，对于多个文件夹，很难更改回顶部并运行 makefile。

有没有像eclipse或其他IDE这样的项目管理的好方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-15T04:50:46.177

我知道你的问题。如果您在与源代码相同的文件夹中有一个 Makefile，并且您在源缓冲区中，那么“编译”将正确构建。

但是，如果您的源代码位于不同的文件夹中，则 emacs 找不到 Makefile。

一种解决方案是通过将“默认目录”变量设置为每个源文件中的文件变量来指定 Makefile 的位置。

为此，您可以在文件顶部添加这样的一行（并重新加载它）。

```
// -*- mode: C++; default-directory: "c:/somewhere/yourmakefiledirectory/" -*- 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-15T17:58:57.437

下面是;; 我的 .emacs 文件的编译部分。我使用 CTRL+F7 进行 make，使用 F7 进行 make clean。它将在当前目录中搜索，然后在 .. 中搜索一个名为“Makefile”的文件以运行 make。

也不是 F8 将源窗口跳转到第一个错误，而 CTRL+F8 将您带到上一个错误。（顺便说一句，如果您认为这很棒，您应该看看我为 GDB 集成所做的工作）... :)

```
;; Compilation
(setq compilation-scroll-output 1) ;; automatically scroll the compilation windo
w
(setq compilation-window-height 10) ;; Set the compilation window height...
(setq compilation-finish-function ;; Auto-dismiss compilation buffer...
      (lambda (buf str)
        (if (string-match "exited abnormally" str)
            (message "compilation errors, press F6 to visit")
          ; no errors, make the compilation window go away after 2.5 sec
          (run-at-time 2.5 nil 'delete-windows-on buf)
          (message "No compilation errors!"))))

(require 'cl) ; If you don't have it already
(defun* get-closest-pathname (&optional (file "Makefile"))
  "This function walks up the current path until it finds Makefile and then retu
rns the path to it."
  (let ((root (expand-file-name "/")))
    (expand-file-name file
              (loop
            for d = default-directory then (expand-file-name ".." d)
            if (file-exists-p (expand-file-name file d))
            return d
            if (equal d root)
           return nil))))

(defun my-compile-func ()
  "This function does a compile."
  (interactive)
  (compile (format "make -C %s" (file-name-directory (get-closest-pathname)))))

(defun my-compile-clean-func ()
  "This function does a clean compile."
  (interactive)
  (compile (format "make -C %s clean" (file-name-directory (get-closest-pathname
)))))

(defun my-compile-package-func ()
  "This function builds an Endura package."
  (interactive)
  (compile (format "make -C %s package" (file-name-directory (get-closest-pathna
me)))))

(global-set-key [f7] 'my-compile-clean-func)
(global-set-key [C-f7] 'my-compile-func)
(global-set-key [S-f7] 'my-compile-package-func)
(global-set-key [f8] 'next-error)
(global-set-key [C-f8] 'previous-error) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2011-11-30T23:56:11.427

只需`M-x compile`从根目录一次。这将创建一个`*compilation*`缓冲区，该缓冲区将记住调用它的目录和参数。

然后当你想重新编译时，只需发出`M-x recompile`. 这适用于任何地方。它会恢复您的原始`*compilation*`缓冲区并使用存储在该缓冲区中的目录来查找您的 Makefile。

还有其他方法可以从项目的根目录之外进行编译，但我想我会指出这一点，因为它开箱即用，零自定义。许多其他响应使解决方案听起来比实际更复杂。

## 编译缓冲区提示

如果您`C-c C-f`在编译缓冲区中键入，它将启用`next-error-follow-minor-mode`，因此当您在编译缓冲区的错误中导航时，第二个窗口将在其原始源缓冲区中显示错误。

`M-n`并将`M-p`在编译缓冲区的错误之间移动。

如果您已经在源缓冲区中，并且想要在那里的错误之间导航，请键入`M-g n`或`M-g p`。

## 语法错误突出显示

键入`M-x flymake-mode`以在您键入时进行动态语法检查。它将以红色突出显示语法错误。用鼠标悬停将显示错误消息。

为了使 flymake 工作，您必须在 makefile 中添加检查语法规则。

C++ 示例：

```
check-syntax:
    g++ -o nul -S ${CXXFLAGS} ${CHK_SOURCES} 
```

此规则检查文件的语法，但不编译它，因此速度很快。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-15T00:58:18.077

我通常不再从 emacs 中编译，但为什么不能在缓冲区中运行 shell 只是为了运行 make。将该外壳保存在顶级目录中。

至于项目管理，您在寻找哪些功能？

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-15T05:37:40.980

我使用 CEDET 包中的 EDE——它可以维护不同类型的项目。我使用它与 CMake 一起使用自定义编译命令（您可以在[此处](http://github.com/alexott/emacs-configs/blob/2f703acf5d84c14146dfe9a3e6afc599ac671a04/rc/emacs-rc-cedet.el)找到它- 请参阅 MyCompile 函数）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-15T04:53:19.387

我最近开始使用[project-root](http://repo.or.cz/w/ShellArchive.git?a=blob_plain;hb=HEAD;f=project-root.el)来管理我的各种目录树。我现在已经将 F5 绑定到 (with-project-root (compile)) 并且默认目录自动设置为我在 .emacs 中指定的任何项目的根目录，基于我调用的任何缓冲区编译自。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-15T01:12:19.557

我不确定你在问什么，但你可能正在寻找[Speedbar](http://cedet.sourceforge.net/speedbar.shtml)。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2011-09-05T05:26:54.367

*   您可以使用桌面书签、Dired 书签或 Bookmark-List 书签来组织项目——请参阅[*Bookmark+*](http://www.emacswiki.org/emacs/BookmarkPlus)。

*   另请参阅：[*Icicles*](http://www.emacswiki.org/emacs/Icicles) [对项目的支持以](http://www.emacswiki.org/emacs/Icicles_-_Support_for_Projects)获取更多选项。

[书签](/questions/tagged/bookmarks "显示标记为“书签”的问题")[书签](/questions/tagged/bookmark "显示标记为“书签”的问题")

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-15T01:33:04.530

取决于语言。JDE 是一个很好的 Java 环境，Distel 是一个很好的 Erlang 环境。我相信其他平台也有很好的环境。但是，与在 Eclipse 之类的 IDE 中相比，您必须在 emacs 中进行更多的配置。不过，IMO，回报是值得的。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-15T16:58:28.597

在提示输入编译命令时输入以下内容如何：

“cd <root> ; 制作”

如果经常键入很麻烦，可以在“compile-command”变量中设置它——尽管在你键入一次后它会在会话中被记住。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-15T17:07:26.640

当我使用 Java 执行此操作时，我使用了 ANT，而 ANT 使用“-find”开关优雅地处理了这个问题。

实际上，它所做的是在当前目录中查找 build.xml 文件，直到找到它。非常方便，尤其是在 Java 项目中，因为它们强制执行目录结构。

对于 Make，我会创建一个类似的替换：

```
#!/bin/sh
# mymake -- my "hunt the makefile" make command
if [ -f Makefile ]
then
    exec make
else
    cur=`pwd`
    if [ $cur = "/" ]
    then
        echo "Can not find Makefile"
        exit 1
    fi
    newdir=`dirname $cur`
    cd $newdir
    exec mymake
fi 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-06-11T23:30:33.550

我会使用eproject；[http://github.com/jrockway/eproject](http://github.com/jrockway/eproject)

这是来自 SO 的一个例子：[在某个地方有一个好的 Emacs 项目管理吗？](https://stackoverflow.com/questions/978984/is-there-a-good-emacs-project-management-somewhere/979038#979038)

基本上，它统一了 CEDET、project-root 等的特性。您可以通过多种方式声明项目定义，并通过统一的 API 访问数据。它还带有一些不错的糖，包括 ibuffer 集成。（按项目过滤ibuffer，查看缓冲区名称旁边的项目名称等]

# asp.net - MSChart 和 ASP.NET MVC 部分视图

> ID：749890
> 
> 赞同：3
> 
> 时间：2009-04-15T00:38:06.940
> 
> 标签：asp.net, asp.net-mvc, mschart

我目前正在尝试将 MSChart 添加到 ASP.NET MVC RTM 中的部分视图中。我已经查看了以下博客[条目](http://code-inside.de/blog-in/2008/11/27/howto-use-the-new-aspnet-chart-controls-with-aspnet-mvc/)，目前正在调查选项 B。如果我将我的代码放在视图 (ASPX) 页面中并且它工作正常，但是当我将确切的代码复制到部分视图 (ASCX ) 我得到以下异常：“CS1502：'System.IO.TextWriter.Write(char)' 的最佳重载方法匹配有一些无效参数”。有没有其他人遇到过这个问题并解决了这个问题，或者他们知道为什么不能将此策略与 MSChart 和 MVC 一起使用？

我的代码正是链接文章中选项 B 中的内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-15T02:58:59.100

我不确定问题出在哪里，但导致该错误的最常见原因是您在“<%= %>”块中使用了语句而不是表达式。由于 "<%= %>" 块中的代码被放置在对 的调用中`System.IO.TextWriter.Write`，因此它必须是一个表达式。语句必须包含在“<% %>”块中，而不是“<%= %>”。

如果它在“常规”视图上运行，您引用的代码应该在局部视图上运行良好。确保调用`RenderPartial`位于“<% %>”块中，因为`RenderPartial`它实际上不返回任何内容，它直接在原地进行渲染。

# sql - 子类型化数据库表

> ID：749891
> 
> 赞同：5
> 
> 时间：2009-04-15T00:38:17.657
> 
> 标签：sql, ms-access, database-design, subtype

在设计数据库时，我听到很多关于子类型表的信息，并且我完全了解它们背​​后的理论。但是，我从未真正看到表子类型化的实际应用。如何创建表的子类型？我正在使用 MS Access，我正在寻找一种在 SQL 中以及通过 GUI (Access 2003) 执行此操作的方法。

干杯!

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-15T01:00:39.117

一个简单的例子是有一个带有主键的 Person 表和该表中的一些列。现在您可以创建另一个名为 Student 的表，该表具有 person 表（其超类型）的外键。现在学生表有一些超类型没有的列，如 GPA、Major 等。但名称、姓氏等将在父表中。您始终可以通过 Student 表中的外键访问 Person 表中的学生姓名。

无论如何，只要记住以下几点：

*   层次结构描述了超类型和子类型之间的关系
*   超类型有共同的属性
*   子类型具有唯一属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-02-25T16:14:15.767

我有一个类似的问题，我一直在研究。

在寻找可重复的模式时，我想确保我没有放弃参照完整性，这意味着我不会使用 (TABLE_NAME, PK_ID) 解决方案。

我最终决定：

基本类型表：客户

子类型表：PERSON、BUSINESS、GOVT_ENTITY

我在 CUSTOMER 中放置了可为空的 PRESSON_ID、BUSINESS_ID 和 GOVT_ENTITY_ID 字段，每个字段都有外键，并且只有一个不为空的检查约束。添加新的子类型很容易，只需要添加可为空的外键并修改检查约束即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-16T00:45:48.117

请记住，在设计绑定应用程序时，与 Access 应用程序一样，子类型在连接方面会带来沉重的成本。

例如，如果您有一个包含三个子类型表的超类型表，并且您需要同时在一个表单中显示所有三个（并且您不仅需要显示超类型日期），那么您最终会选择使用三个外连接和 Nz()，或者您需要三个互斥的 SELECT 语句（每个子类型一个）的 UNION ALL。这些都不可编辑。

我打算从我使用超级/子类型表的第一个主要应用程序中粘贴一些 SQL，但是看着它，SQL 非常复杂，只会让人们感到困惑。这并不是因为我的应用程序很复杂，而是因为问题的性质很复杂——向用户呈现完整的数据集，包括超类型和子类型，本质上是复杂的。我使用它的结论是，我最好只使用一个子类型表。

这并不是说它在某些情况下没有用，只是 Access 的绑定表单不一定可以轻松地将这些数据呈现给用户。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-15T00:49:37.460

表的子类型是 EER 图中的概念性事物。我还没有看到直接支持它的 RDBMS（不包括对象关系 DBMS）。它们通常在

1.  单个表中子类型的每个属性的一组可为空的列
2.  有一个用于基本类型属性的表和一些其他表，每个基本表最多一行将包含子类型属性

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-15T00:50:38.143

当使用 ORM 映射器生成精确建模域的类子类型层次结构时，表子类型的概念很有用。

子类型表将同时具有返回其父级的外键，这也是子类型表的主键。

# java - Eclipse JSP 预览

> ID：749894
> 
> 赞同：7
> 
> 时间：2009-04-15T00:39:32.070
> 
> 标签：java, eclipse, spring, jsp

是否有允许预览 JSP 文件的 Eclipse 插件或功能？理想情况下，这样的功能应该知道 Spring 标签。在 Eclipse 中编辑 JSP，然后构建和部署以查看结果是一件很痛苦的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-15T00:58:55.267

我还没有看到任何可以满足您要求的好插件。

作为替代方案，您可以将码头服务器的 jar 放入您的类路径（我使用 jetty-6.1.5.jar 和 jetty-util-6.1.5.jar）并编写如下所示的类。

```
package net.eduportal.jetty;

import javax.servlet.ServletContext;

import org.mortbay.jetty.Server;
import org.mortbay.jetty.security.UserRealm;
import org.mortbay.jetty.webapp.WebAppContext;

public class JettyRunner {
    public static final int PORT = 8080;
    public static final String BASE_URL = "http://localhost:" + PORT;

    private static final JettyRunner _instance = new JettyRunner();

    public static JettyRunner getInstance() {
        return _instance;
    }

    // ///////////////////////////////////////////////////////////////
    // Singleton
    // /////////////

    private Server server = null;
    private WebAppContext wac = null;

    private JettyRunner() {
    }

    public interface WebApplicationInitializer {

        public void init(WebAppContext wac);

    }

    public ServletContext getServletContext() {
        return wac.getServletContext();
    }

    public void start() throws Exception {
        if (server == null) {
            server = new Server(PORT);
            server.setStopAtShutdown(true);
            wac = new WebAppContext();
            wac.setContextPath("/test");
            wac.setResourceBase("war");
            wac.setClassLoader(this.getClass().getClassLoader());
            server.addHandler(wac);
            server.start();
        }
    }

    public void stop() throws Exception {
        if (server != null) {
            server.stop();
            server = null;
        }
    }

    public static void main(String argv[]) throws Exception {
        JettyRunner.getInstance().start();
    }

} 
```

上面的代码假设类路径中有一个名为“war”的文件夹，其中包含相同的 WEB-INF/* 文件夹。当您从 eclipse 运行代码时，服务器将启动，您可以通过访问位置 localhost:8080/test/* 查看 jsps

见[http://jetty.mortbay.org/jetty5/tut/Server.html](http://jetty.mortbay.org/jetty5/tut/Server.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-15T01:30:35.690

您根本不必重建即可看到结果。

最新的 Eclipse 企业版实际上对 JSP 进行了热代码替换。我将 Web 项目添加到 Tomcat（或 Glassfish 或 JBoss...），我在 JSP 中所做的任何更改都会在我刷新浏览器窗口后反映出来。显然，当我更改一个 Java 文件时，我需要重新启动 Tomcat，但最多只需要 2 秒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-17T05:23:42.943

[Oracle Workshop for WebLogic 10g R3](http://www.oracle.com/technology/products/workshop/index.html)为您提供了最接近所见即所得 JSP 编辑的东西。尽管它来自 Oracle/BEA，但它可以与许多应用服务器一起使用，而不仅仅是 WebLogic。它是我所知道的用于 JSP 的最佳工具，而且它是免费的。我不关心 Spring 标签，但可以对其进行自定义以提供标签的设计时表示。我不确定他们是否支持 Eclipse 3.4。

还有[JBoss Developer Studio](http://www.redhat.com/developer_studio/)，它有很好的 JSP 可视化工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-15T00:59:50.290

MyEclipse 提供了这个插件：

[http://www.myeclipseide.com/module-htmlpages-display-pid-11.html](http://www.myeclipseide.com/module-htmlpages-display-pid-11.html)

至于它是否会意识到 Spring 标签是另一回事......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-16T09:53:10.017

JBoss Tools ( [http://jboss.org/tools](http://jboss.org/tools) ) 有一个支持 JSP、HTML 甚至 JSF 的可视化页面编辑器。

如果不支持标签，您可以右键单击它并为其添加模板，或者您可以通过实现扩展点来扩展支持的标签。

扩展支持标签集的用户示例是[http://relation.to/Bloggers/HowToCreateAVisualDocBookEditorIn10Minutes](http://relation.to/Bloggers/HowToCreateAVisualDocBookEditorIn10Minutes)和[http://planetjbpm.wordpress.com/2009/02/25/xforms-editor-with-jboss-vpe-and-一些-jbpm/](http://planetjbpm.wordpress.com/2009/02/25/xforms-editor-with-jboss-vpe-and-some-jbpm/)

# javascript - jQuery执行？

> ID：749900
> 
> 赞同：0
> 
> 时间：2009-04-15T00:42:35.743
> 
> 标签：javascript, jquery, debugging, browser, jquery-plugins

我的 jQuery 脚本在为 div 位置设置动画时出现故障。当我在页面加载时单击链接时似乎会发生该错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-15T01:00:22.923

> 当我在页面加载时单击链接时似乎会发生该错误

这是因为您正在使用该`ready`功能，并且该功能会在**页面完成加载后立即执行。**

因此，如果您在页面仍在加载时单击某些内容，请记住该`ready`函数中的 JavaScript 尚未执行。

* * *

你不能总是重现它的原因很可能是因为页面将被第二次缓存，并且在页面完成加载之前你没有时间点击任何东西（因为它被缓存了），因此 js 代码会有单击时已经执行。

# jvm-languages - 是否有对 JVM 有很好的 lambda 支持的静态类型语言？

> ID：749910
> 
> 赞同：3
> 
> 时间：2009-04-15T00:46:52.457
> 
> 标签：jvm-languages

我很想写一些 Google App Engine 应用程序，但我是一名 ac# 开发人员，因此我喜欢静态类型和 Linq（或者至少扩展 + lambdas + 谓词，如果不是查询语法）。我可以在提供这些功能的 JVM 上使用一种语言吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-15T00:52:08.873

斯卡拉：[http ://www.scala-lang.org/](http://www.scala-lang.org/)

实际上，Groovy 也有可选的静态类型，所以我也会包含它，但是大多数静态类型，呃，类型似乎更喜欢 Scala。Groovy 可以在以下位置找到：http: [//groovy.codehaus.org/](http://groovy.codehaus.org/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-05-28T10:37:08.887

[http://code.google.com/p/stab-language/](http://code.google.com/p/stab-language/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-15T00:51:32.837

由于 Google App 引擎甚至不包括所有基本的 Java 类，而是一个子集，因此尝试使用 Clojure 之类的任何东西，这是一种编译为 Java 的函数式语言，风险很大。

您可能只想留在 Google 提供的沙箱中，即使您已经习惯了 .NET 3.5 和 C#3 会错过很多东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-15T06:53:43.183

我会研究 Scala，它是一种简洁的语言，它的快速类型和​​功能在 Google 应用程序引擎中的支持可能不是一件容易的事。查看 Google 团队关于 jvm 语言支持的这篇博文

[许多语言并在运行时绑定它们](http://googleappengine.blogspot.com/2009/04/many-languages-and-in-runtime-bind-them.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-19T18:35:55.267

[http://kotlin.jetbrains.org/](http://kotlin.jetbrains.org/)

易于学习，强大的库，并具有完整的 JVM 集成。是的，它的可读性是惊人的（与 Java、Scala、C# 相比）！

# memory-leaks - 如何在 Clojure 中泄漏内存？

> ID：749911
> 
> 赞同：4
> 
> 时间：2009-04-15T00:48:01.050
> 
> 标签：memory-leaks, clojure

对于周四在湾区 Clojure 聚会上的演讲，我正在编制一份在 Clojure 中泄漏内存的方法列表。

到目前为止，我有：

*   抓住无限序列的头部
*   通过在循环中调用 lambda 创建许多泛型类（这仍然是一个问题）
*   持有对未使用数据的引用
*   ...

还有什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-29T09:39:37.320

通过在大型集合上保留对 seq 的引用。例如：

```
(drop 999990 (vec (range 1000000))) 
```

返回包含对整个向量的引用的十个元素的序列！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-15T01:09:52.730

另一个明显的方法是使用任何会泄漏内存的 Java 库。（例如[Qt 占碑](http://www.mail-archive.com/qt-jambi-interest@trolltech.com/msg00592.html)）

关于 lambdas，请阅读[此处](http://groups.google.com/group/clojure/browse_thread/thread/2c66650b9057f760/11a09103da821264?lnk=gst&q=permgen#11a09103da821264)、[此处](http://groups.google.com/group/clojure/browse_thread/thread/67f9d2df248d3aa0/5b67be8c1cce16cd?lnk=gst&q=permgen#5b67be8c1cce16cd)和[此处](http://groups.google.com/group/clojure/browse_thread/thread/d99b1c3c06c1429f/1fc286078a717d26?lnk=gst&q=permgen)。我认为这在最新版本的 Clojure 中已修复。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-20T15:38:30.617

还有实习生电话。

请注意，您的示例并没有按照这个词的常识泄漏内存。您仍然可以访问这些对象（不确定类——我假设可以通过一些 API 重新找到它们），即它们没有丢失。对于某些东西，比如类和实习字符串，忘记数据是不可能的，所以效果是一样的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-25T04:39:49.787

Clojure 内存泄漏通常与 Java 内存泄漏非常相似。然而，集合是“持久的”这一事实意味着，如果您将某些内容添加到集合中并且没有意识到您保留了对旧版本集合的引用以及新值，则意味着内存被消耗以保留旧版本版本悬而未决。

# random - 将数字序列转换为外观随机的 ID？

> ID：749912
> 
> 赞同：6
> 
> 时间：2009-04-15T00:48:04.077
> 
> 标签：random

我正在开发一个需要生成唯一、非顺序 ID 的应用程序。我的限制之一是它们必须由 3 个数字后跟 2 个字母组成（只有大约 600k 个 ID）。鉴于我的 ID 池相对较小，我正在考虑简单地生成所有可能的 ID，将它们改组并将它们放入数据库中。因为，在内部，我将有一个简单的、连续的 ID 可供使用，因此很容易一次将它们拔出并确保我没有任何重复。

这感觉不是一个非常令人满意的解决方案。有没有人有比这种“彩票”方法更有趣的从有限池中生成唯一 ID 的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-15T01:01:49.380

使用有限群。基本上，取一个 32 位或 64 位整数，并找到一个与整数最大值互质的大数；调用这个数字 M。然后，对于所有整数 n，n * M 将产生一个具有很多数字的唯一数字。

这样做的好处是您不需要预先填充数据库或运行单独的选择查询——您可以在一个插入语句中完成所有这些操作，`n`只需让您成为一个自动增量，并有一个单独的默认为 n * M 的 ID 列。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-15T02:10:34.410

这可以通过很多不同的方式完成，具体取决于您尝试优化的内容（速度、内存使用情况等）。

ID 模式 = ddd c [1](http://en.wikipedia.org/wiki/Linear_feedback_shift_register) c[0]

**选项 1（本质上类似于散列，类似于 Zak 的）：**
1 生成一个介于 0 和可能性数（676k）之间的随机数。
2-将数字转换为组合

```
 ddd = random / (26^2)
    c[0] = random % (26)
    c[1] = (random / 26) % 26 
```

3- 查询数据库是否存在 ID 并递增，直到找到一个空闲的。

**选项 2（线性反馈移位寄存器，参见[wikipedia](http://en.wikipedia.org/wiki/Linear_feedback_shift_register)）：**
1- 随机数在 (0,676k) 范围内的种子。（见下文为什么不能用“0”播种）
2- 通过将以下内容应用于当前 ID 号来生成后续随机数

```
 num = (num >> 1) ^ (-(num & 1u) & 0x90000u);
```

3- 跳过大于范围的 ID（即 0xA50A0+）
4- 将数字转换为 ID 格式（如上）
*您需要保存生成的最后一个用于 ID 的数字，但您不需要查询数据库看看有没有用。由于 LFSR 的工作方式，此解决方案将枚举除 [000 AA] 之外的所有可能的 ID。

[编辑] 由于您的范围实际上比您需要的大，您可以通过在转换为 ID 之前减去 1 来返回 [000 AA] 并使您的有效范围为 (0,0xA50A0]

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-15T00:57:00.280

您可以生成符合该标准的随机 ID，执行数据库选择以查看它是否已经存在，然后将其插入数据库以注意它已被“使用”。对于该方案生命周期的前 25%（或大约 150k 个条目），生成新的随机 ID 应该相对较快。不过在那之后，它会花费越来越长的时间，您不妨预先填写表格以查找免费 ID。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-15T00:56:20.250

根据您对顺序的定义，您可以只选择字母上的某个起点，例如“aa”，然后循环遍历三个数字，因此它将是：001aa 002aa 003aa

一旦你到达 zz 然后增加数字部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-01-24T12:01:16.790

您可以使用模运算来生成 id。选择一个与 676,000 互质的数字作为种子。`id`是表的标准递增 id。那么下面的伪代码就是你所需要的：

```
uidNo = (id * seed) % 676000
digits = uidNo / 676
char1 = uidNo % 26
char2 = (uidNo / 26) % 26
uidCode = str(digits) + chr(char1+65) + chr(char2+65) 
```

如果用户有多个连续发布的 id，他们可以猜测算法和种子，并按顺序生成所有 id。这可能意味着该算法对于您的用例来说不够安全。

# python - 如何在 python 中更改 IP 地址时可视化它们？

> ID：749937
> 
> 赞同：1
> 
> 时间：2009-04-15T01:05:26.610
> 
> 标签：python, matplotlib, ip-address, visualization

我编写了一个小脚本，每次我打开一个新的终端窗口时都会收集我的外部 IP 地址，并将其以及当前时间附加到一个文本文件中。我正在寻找一种方法来可视化我的 IP 地址何时/多久更改一次。我在家庭和校园之间跳来跳去，可以使用脚本将它们分开，但最好将它们分开可视化。

我经常使用 matplotlib。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-15T01:48:54.710

[将您的 IP 绘制为xkcd 互联网地图](http://xkcd.com/195/)上的一个点（或一些放大的地图子集，以更好地显示不同但相邻的 IP）。

绘制与您拥有该 IP 的频率成正比的“堆叠”每个点，并为 IP 着色以使最近的点更亮，最近的点按比例变暗。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-15T01:30:42.447

“何时”是一维时间数据，通过时间线很好地显示出来。在更大的时间尺度上，您可能会丢失细节，但大多数“何时”的情节都会有这个缺陷。

对于“多久”，标准的时间与频率 2d（条形图）图，分为每天/每周/每月的桶，将是一种标准的方式。移动平均线也可能提供信息。

您可以结合时间线和条形图，放大时可见时间线，缩小时显示频率。

横轴上带有时间的条形图怎么样，其中每个条的宽度是您的计算机持有特定 IP 地址的时间长度，每个条的高度与宽度成反比？这也将给出何时与多久绘制一次的图。

您还可以将数据解释为[脉冲密度调制](http://en.wikipedia.org/wiki/Pulse-density_modulation)信号，就像您在 SuperAudio CD 上获得的一样。您可以绘制此图，甚至可以收听数据。由于 IP 更改事件没有明显的时间长度，因此脉冲长度将是一个可调参数。沿着类似的思路，您可以将数据视为方波（三角波、锯齿波等），其中每个 IP 更改事件都是电平转换。听起来像是一个有趣的[纯数据](http://puredata.info/)项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-15T01:15:15.930

matplotlib 用户指南中有一节关于在图表上绘制条形以表示范围。我自己从来没有这样做过，但它似乎适合你正在寻找的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-15T01:17:25.863

假设您指定了终端，我假设您使用的是 UNIX 变体系统。使用 -f 开关和命令行实用程序 tail 可以让您持续监控文件的结尾。您还可以使用 IBM 的[inotify](http://www.ibm.com/developerworks/linux/library/l-inotify.html)之类的东西，它可以监视文件更改或 dnotify（并将文件放在它自己的目录中），这通常是大多数发行版的标准配置（然后您可以调用 tail -n 1 来获取最后一行）。一旦行更改，您可以使用 Python 的 time.time() 获取自纪元以来的当前系统时间，并将其从上次更改的时间中减去，然后使用 matplotlib 绘制此差异。我假设您可以将时间分类为范围，以使自己更容易绘制图表。1 条表示小于 1 小时的更改间隔，另一个表示 1 - 5 小时之间的更改，依此类推。

如果您不想直接使用它，[这里](http://code.activestate.com/recipes/157035/)有一个 tail -f 的 Python 实现。在检测到文件更改后，您可以执行上述操作。

# inno-setup - 使用 pascal (innosetup) 获取文件的最后更新时间

> ID：749954
> 
> 赞同：1
> 
> 时间：2009-04-15T01:17:06.800
> 
> 标签：inno-setup, pascal

在 innosetup 脚本的卸载部分，我想添加一个检查以查看特定文件的最后更新日期时间是否发生在过去 10 分钟内。

有谁知道这个 innosetup 兼容的帕斯卡代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-06-30T19:42:44.983

您可以使用 Windows API 函数`GetFileAttributesEx`获取最后修改日期。把它放在你的 [CODE] 部分应该可以工作：

```
const
    GetFileExInfoStandard = $0;

type 
    FILETIME = record 
      LowDateTime:  DWORD; 
      HighDateTime: DWORD; 
    end; 

    WIN32_FILE_ATTRIBUTE_DATA = record 
      FileAttributes: DWORD; 
      CreationTime:   FILETIME; 
      LastAccessTime: FILETIME; 
      LastWriteTime:  FILETIME; 
      FileSizeHigh:   DWORD; 
      FileSizeLow:    DWORD; 
    end; 

    SYSTEMTIME = record 
      Year:         WORD; 
      Month:        WORD; 
      DayOfWeek:    WORD; 
      Day:          WORD; 
      Hour:         WORD; 
      Minute:       WORD; 
      Second:       WORD; 
      Milliseconds: WORD; 
    end; 

function GetFileAttributesEx (
    FileName:            string;  
    InfoLevelId:         DWORD; 
    var FileInformation: WIN32_FILE_ATTRIBUTE_DATA
    ): Boolean; 
external 'GetFileAttributesExA@kernel32.dll stdcall'; 

function FileTimeToSystemTime(
    FileTime:        FILETIME; 
    var SystemTime:  SYSTEMTIME
    ): Boolean; 
external 'FileTimeToSystemTime@kernel32.dll stdcall'; 
```

您可以通过修改安装程序项目的 InitializeWizard 函数来测试它，如下所示：

```
procedure InitializeWizard();
    var 
      FileInformation: WIN32_FILE_ATTRIBUTE_DATA; 
      SystemInfo: SYSTEMTIME;     
begin
    GetFileAttributesEx(
        'c:\ntldr', 
        GetFileExInfoStandard , 
        FileInformation); 

    FileTimeToSystemTime(
        FileInformation.LastWriteTime, 
        SystemInfo); 

    MsgBox(
        format(
            '%4.4d-%2.2d-%2.2d', 
            [SystemInfo.Year, SystemInfo.Month, SystemInfo.Day]),
        mbInformation, MB_OK);
end; 
```

在我的系统（XP SP3）上，消息框显示：`2008-08-04`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-27T14:56:44.983

目前，支持这一点的唯一方法是使用 DLL 并将其链接到您的卸载。

您必须编写具有所需功能的 DLL。

默认的 INNOSetup 安装包含示例，向您展示如何调用 DLL。之后它应该很简单。

只要你可以写一个DLL。

HTH，瑞恩。

# c# - 通过反射获取事件参数

> ID：749956
> 
> 赞同：2
> 
> 时间：2009-04-15T01:17:39.437
> 
> 标签：c#, vb.net, reflection

我不知道如何获取事件的参数类型。

例如，我只能看到使用 MethodInfo 来获取参数，但我有 EventInfo 或 FieldInfo。

我想要的是能够从中获得“布尔”：

```
Public Event EventName(ByVal sender As Object, ByVal value As Boolean) 
```

理论上我可以尝试类似 GetRaiseMethod() 的方法，但这不起作用（因为该方法根据[此链接](http://bytes.com/groups/net/398128-eventinfo-getraisemethod-always-returns-null)返回 null ），即使它这样做了，它也需要首先绑定方法，这意味着测试套件只是确认事件在初始化时具有特定类型的参数。

有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-15T01:38:30.430

`EventName`假设事件在类中声明`DeclaringClass`并且事件至少有 to 参数，您可以按如下方式获取第二个参数的类型。否则，您可能会收到异常。

```
Type secondEventHandlerParameterType = 
   typeof(DeclaringClass).
   GetEvent("EventName").
   EventHandlerType.
   GetMethod("Invoke").
   GetParameters()[1].
   ParameterType; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-08-03T13:47:20.940

我尝试使用 Daniel 解决方案，但`TypeInitializationException`在我的 PCL 中遇到了异常。

以下代码对我有用，看起来更清晰：

```
Type secondEventHandlerParameterType = 
   typeof(DeclaringClass).
   GetEvent("EventName").
   EventHandlerType.
   GenericTypeArguments.
   First(); 
```

# c# - 使用 C# 通过套接字发送和接收图像

> ID：749964
> 
> 赞同：14
> 
> 时间：2009-04-15T01:26:39.413
> 
> 标签：c#, sockets

我正在尝试在 C# 中设置两个程序。基本上，设置了一个简单的客户端服务器，我希望服务器在其中侦听来自客户端的图像。然后，在收到图像后，将其显示在 PictureBox 中。

我一直遇到以下错误：

> System.Drawing.dll 中出现“System.ArgumentException”类型的第一次机会异常

正在侦听此行的服务器代码上发生错误： Image bmp = Image.FromStream(ms); 有任何想法吗？

**监听的服务器代码：**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;
using System.Net;
using System.Net.Sockets;

namespace NetView
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            startListening();
        }

        private void startListening()
        {
            ////////////////////////////////////////////

            Console.WriteLine("Server is starting...");
            byte[] data = new byte[1024];
            IPEndPoint ipep = new IPEndPoint(IPAddress.Any, 9050);

            Socket newsock = new Socket(AddressFamily.InterNetwork,
                            SocketType.Stream, ProtocolType.Tcp);

            newsock.Bind(ipep);
            newsock.Listen(10);
            Console.WriteLine("Waiting for a client...");

            Socket client = newsock.Accept();
            IPEndPoint newclient = (IPEndPoint)client.RemoteEndPoint;
            Console.WriteLine("Connected with {0} at port {1}",
                            newclient.Address, newclient.Port);

            while (true)
            {
                data = ReceiveVarData(client);
                MemoryStream ms = new MemoryStream(data);
                try
                {
                    Image bmp = Image.FromStream(ms);
                    pictureBox1.Image = bmp;
                }
                catch (ArgumentException e)
                {
                    Console.WriteLine("something broke");
                }

                if (data.Length == 0)
                    newsock.Listen(10);
            }
            //Console.WriteLine("Disconnected from {0}", newclient.Address);
            client.Close();
            newsock.Close();
            /////////////////////////////////////////////

        }

        private static byte[] ReceiveVarData(Socket s)
        {
            int total = 0;
            int recv;
            byte[] datasize = new byte[4];

            recv = s.Receive(datasize, 0, 4, 0);
            int size = BitConverter.ToInt32(datasize, 0);
            int dataleft = size;
            byte[] data = new byte[size];

            while (total < size)
            {
                recv = s.Receive(data, total, dataleft, 0);
                if (recv == 0)
                {
                    break;
                }
                total += recv;
                dataleft -= recv;
            }
            return data;
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

    }
} 
```

**客户代码：**

```
using System;
using System.Net;
using System.Net.Sockets;
using System.Text;
using System.Drawing;
using System.IO;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            byte[] data = new byte[1024];
            int sent;
            IPEndPoint ipep = new IPEndPoint(IPAddress.Parse("127.0.0.1"), 9050);

            Socket server = new Socket(AddressFamily.InterNetwork,
                            SocketType.Stream, ProtocolType.Tcp);

            try
            {
                server.Connect(ipep);
            }
            catch (SocketException e)
            {
                Console.WriteLine("Unable to connect to server.");
                Console.WriteLine(e.ToString());
                Console.ReadLine();
            }

            Bitmap bmp = new Bitmap("c:\\eek256.jpg");

            MemoryStream ms = new MemoryStream();
            // Save to memory using the Jpeg format
            bmp.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg);

            // read to end
            byte[] bmpBytes = ms.GetBuffer();
            bmp.Dispose();
            ms.Close();

            sent = SendVarData(server, bmpBytes);

            Console.WriteLine("Disconnecting from server...");
            server.Shutdown(SocketShutdown.Both);
            server.Close();
            Console.ReadLine();
        }

        private static int SendVarData(Socket s, byte[] data)
        {
            int total = 0;
            int size = data.Length;
            int dataleft = size;
            int sent;

            byte[] datasize = new byte[4];
            datasize = BitConverter.GetBytes(size);
            sent = s.Send(datasize);

            while (total < size)
            {
                sent = s.Send(data, total, dataleft, SocketFlags.None);
                total += sent;
                dataleft -= sent;
            }
            return total;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-15T01:38:58.743

`ArgumentException`告诉您流中的图像格式无效。这可能是由于客户端应用程序在发送数据之前关闭了内存流造成的。

尝试替换`byte[] bmpBytes = ms.GetBuffer();`为

```
byte[] bmpBytes = ms.ToArray(); 
```

或在发送数据后关闭流。

请记住，由`.GetBuffer()`返回的字节数组返回底层数组，而不是它的副本（`.ToArray()`返回副本），只要父流有效。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-06-12T05:29:22.597

发送图像的更好方法是使用 BinaryFormatter。

例如，我自己的代码中的一些片段每秒发送一张图像......

发送：

```
 TcpClient client = new TcpClient();  
        try  
        {    
            client.Connect(address, port); 

            // Retrieve the network stream.  
            NetworkStream stream = client.GetStream();  
            MessageData data = new MessageData(imageToSend); 

            IFormatter formatter = new BinaryFormatter();

            while(true)
            {
                formatter.Serialize(stream, data);
                Thread.Sleep(1000);
                data.GetNewImage();
            }    
        } 
```

接收：

```
 TcpListener listener = new TcpListener(address, port);
        listener.Start();

        try
        { 
            using (TcpClient client = listener.AcceptTcpClient())
            {
                stream = client.GetStream();

                IFormatter formatter = new BinaryFormatter();
                while (true)
                {
                    MessageData data = (MessageData)formatter.Deserialize(stream);

                    if (ImageReceivedEvent != null) ImageReceivedEvent(data.Picture);
                }
            }
        } 
```

MessageData 类只保存图像并具有 [Serializable] 属性。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-04-15T04:12:25.583

如果您有权访问 JPG 文件本身（如示例中所示），则应发送文件字节而不使用 Image/Bitmap 类。通过读取 JPG 文件并将其重新编码为 JPG，您会降低图像质量并产生不必要的开销。如果您的内存空间有限，您可以使用它`File.ReadAllBytes()`来快速获取完整或分段读取/发送。`byte[]`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-15T01:43:15.567

使用 Arul 的代码来正确发送数据——你需要 .ToArray()，而不是 .GetBuffer()。然后，您需要在后台线程上运行服务器的“startListening”方法，否则您实际上什么也看不到（因为表单线程将忙于运行服务器代码。尝试：

```
var t = new Thread(startListening);
t.IsBackground = true;
t.start(); 
```

在您的 Form_Load 方法中，而不是在构造函数中直接调用 startListening。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-26T13:14:04.423

这是一个适合我的代码。用户使用按钮启动服务器，客户端通过打开计算机的文件对话框选择照片。最后发送图像，但要注意照片大小，因为 UDP 无法传输大量数据。

服务器：

```
 delegate void showMessageInThread(string message);
    UdpClient listener = null;
    IPEndPoint endpoint = null;
    Thread listenThread = null;

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }

    private void button1_Click(object sender, EventArgs e)
    {
        startServer();
    }
    private void startServer()
    {
        endpoint = new IPEndPoint(IPAddress.Any, 1234);
        listener = new UdpClient(endpoint);
        ShowMsg("Waiting for a client!");

        listenThread = new Thread(new ThreadStart(Listening));
        listenThread.Start();
    }
    private void Listening()
    {
        while (true)
        {
            //take the coming data
            byte[] comingDataFromClient = listener.Receive(ref endpoint);
            ImageConverter convertData = new ImageConverter();
            Image image =  (Image)convertData.ConvertFrom(comingDataFromClient);
            pictureBox1.Image = image;
        }
   private void ShowMsg(string msg)
   {
      this.richTextBox1.Text += msg + "\r\n";
   } 
```

客户：

```
 Socket server = null;
    MemoryStream ms;
    IPEndPoint endpoint = null;
    public Form1()
    {
        InitializeComponent();
    }
    private void Form1_Load(object sender, EventArgs e)
    {
        server = new Socket(AddressFamily.InterNetwork,
            SocketType.Dgram, ProtocolType.Udp);
        endpoint = new IPEndPoint(IPAddress.Parse("127.0.0.1"), 1234);
    }
    private void btn_browse_Click(object sender, EventArgs e)
    {
        openFileDialog1.ShowDialog();
        string path = openFileDialog1.FileName;
        pictureBox1.Image = Image.FromFile(path);
        textPath.Text = path;
    }
    private void btn_send_Click(object sender, EventArgs e)
    {
        try
        {                
            ms = new MemoryStream();
            Bitmap bmp = new Bitmap(this.openFileDialog1.FileName);
            bmp.Save(ms, ImageFormat.Jpeg);
            byte[] byteArray = ms.ToArray();

            server.Connect(endpoint);
            server.SendTo(byteArray, endpoint);

            }
        }
        catch (Exception ex)
        {

        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-24T03:18:59.830

```
data = ReceiveVarData(client);
MemoryStream ms = new MemoryStream(data);
Image bmp = Image.FromStream(ms);
pictureBox1.Image = bmp; 
```

该错误可能是由于在 MemoryStream 中接收到的损坏或不完整的 bmp 图像在增加套接字发送/接收缓冲区值后对我来说工作正常，将
发送方“Socket.SendBufferSize”和接收方“Socket.ReceiveBufferSize”调整为较大的值，例如 = 1024 * 2048 *10 这将有助于一次发送整个图像。或者另一种解决方案是在形成接收图像流的代码行之前检查接收到的数据大小（data.length）是否与发送的图像数据大小相同

# c# - 第一次学习Oracle

> ID：749968
> 
> 赞同：8
> 
> 时间：2009-04-15T01:29:29.517
> 
> 标签：c#, .net, sql-server, oracle

我是一位非常有经验的 MS Sql 开发人员，一些新的工作职位即将到来，我将每天与 Oracle 一起工作。

与我所学的所有技术一样，我想知道最好的地方和书籍，以便开始使用 Oracle 进行设计和开发，但使用纯 C#。

微软有什么资源可以加入甲骨文？我意识到有 oracle.com 和 asktom.oracle.com，以及关于 Oracle 的大量文档，我正在寻找更多的快速入门（设置服务器、获取一些示例数据以供使用等）。 .) 而不是深入 sql 与 oracle 技术的比较。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-15T01:45:41.037

[适用于 Visual Studio 的 Oracle 开发人员工具](http://www.oracle.com/technology/tech/dotnet/tools/index.html)

[白皮书：Oracle 开发人员工具中的 11g 新特性 (PDF)](http://www.oracle.com/technology/tech/dotnet/pdf/ODT11_whatsnew.pdf)

[带有 Windows 和 .NET 的 Oracle 数据库](http://www.oracle.com/technologies/microsoft/docs/idc-interop.pdf)

[Oracle 示例：使用 ODT 构建 ASP.NET Web 应用程序](http://www.oracle.com/technology/obe/hol08/dotnet/asp/asp_otn.htm)

[Oracle 示例：使用 ODT 构建 .NET 应用程序](http://www.oracle.com/technology/obe/hol08/dotnet/buildnet/buildnet_otn.htm)

[Oracle 示例：从 Visual Studio 调试 Oracle PL/SQL](http://www.oracle.com/technology/obe/hol08/dotnet/debugging/debugging_otn.htm)

[Oracle 示例：在 .NET 和 Visual Studio 中使用 Oracle 用户定义类型](http://www.oracle.com/technology/obe/hol08/dotnet/udt/udt_otn.htm)

[Oracle 杂志：使用 ODT 和 Oracle 用户定义类型构建应用程序](http://www.oracle.com/technology/oramag/oracle/08-may/o38net.html)

[ODT 常见问题解答：常见 OTN 论坛问题的解答](http://www.oracle.com/technology/tech/dotnet/col/odt_faq.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-15T08:14:25.800

尝试获取 Tom Kyte 的书籍[Expert one-on-one Oracle](https://rads.stackoverflow.com/amzn/click/com/1590595254)和[Effective Oracle by Design](https://rads.stackoverflow.com/amzn/click/com/0072230657)。它们是很好的中高级 Oracle 书籍，由熟悉产品的人编写。

此外，了解数据字典。如果您希望成为 Oracle 世界中的“工具专家”，那么数据字典就是您的朋友。它也比 SQL Server 中的要好得多。

最后，如果您要从 MS-Only 的世界迁移到 Oracle，请了解一些 unix 和 shell 脚本编程背景。在为 Oracle 系统编写自动化基础架构脚本时，您会发现这非常有用，尤其是当它们安装在 vanilla Unix 上时。任何数量的遗留 Oracle/Unix 工具包仍在生产中，Solaris、AIX 或 HP/UX 的普通安装往往比 Linux 更加简洁。在 Unix/Oracle 世界中，您不一定能够安装 Perl 或 Python。

当您确实可以访问 Perl 或 Python 时，也要了解这些。如果您喜欢 python，最好的 Oracle 数据库接口库是[cx_Oracle](http://cx-oracle.sourceforge.net/)。我不能真正保证任何特定的 Perl 基础设施，因为我从来没有机会将它用于这种类型的工作。 [CPAN](http://www.cpan.org)是 Perl 附加模块的规范资源。

如果（相对不太可能）您在 Oracle/Windows 环境中工作（Linux 上的 Oracle 更广泛地用于低端 Oracle 部署），可以从[Activestate](http://www.activestate.com)下载 Perl 和 Python 的良好 Windows 发行版。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-15T11:21:24.383

虽然我看到您想要快速介绍，但我认为值得一提的是 Tom Kyte 的 Oracle 文档路线图

[http://asktom.oracle.com/pls/asktom/z?p_url=ASKTOM%2Edownload_file%3Fp_file%3D4266102912305380863&p_cat=Oracle%20inside%20cover%200703.pdf](http://asktom.oracle.com/pls/asktom/z?p_url=ASKTOM%2Edownload_file%3Fp_file%3D4266102912305380863&p_cat=Oracle%20inside%20cover%200703.pdf)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-15T01:36:41.700

在此处查找[要使用的 Oracle 服务器副本。](https://stackoverflow.com/questions/718239/how-can-i-practice-my-sql-server-sybase-and-oracle-skills-on-a-linux-box)

看[这里比较使用 Oracle 扩展与 ANSI SQL 从表中获取相同的结果集。](https://stackoverflow.com/questions/702500/sql-query-to-collapse-duplicate-values-by-date-range/)虽然不全面，但我认为它提供了一些关于 Oracle 用户如何思考与 ANSI SQL 用户如何思考的见解。

# javascript - Javascript document.all 和 document.getSelection - Firefox 替代品

> ID：749970
> 
> 赞同：1
> 
> 时间：2009-04-15T01:30:25.020
> 
> 标签：javascript, cross-browser

下面的脚本将替换文本区域中的选定单词。但它只适用于IE。知道如何让它在 Firefox 上运行吗？（问题似乎出在 (document.all)？document.selection.createRange() : document.getSelection();）

```
<SCRIPT LANGUAGE="JavaScript">
    <!--//
    var seltext = null;
    var repltext = null;
    function replaceit() 
    {
        seltext = (document.all)? document.selection.createRange() : document.getSelection();
        var selit = (document.all)? document.selection.createRange().text : document.getSelection();
        if (selit.length>=1){
            if (seltext) {
                repltext= prompt('Please enter the word to replace:', ' '); 
                if ((repltext==' ')||(repltext==null)) repltext=seltext.text;
                seltext.text = repltext;
                window.focus()
            }
        }
    }
    //-->
</SCRIPT>
</HEAD>
<BODY>
    <form name="f">
        <textarea cols='40' rows='10' name='msg'></textarea>

        <input type="button" name="b" value="Replace" onClick="replaceit();">
    </form>
</BODY> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-15T01:39:34.750

document.all 位被用作测试它是否是 IE。document.getSelection() 的编写方式是 Firefox 和 IE 中的 document.selection.createRange() 使用的方式

见 [http://www.hscripts.com/tutorials/javascript/ternary.php](http://www.hscripts.com/tutorials/javascript/ternary.php)

所以问题不在于 document.all，而是 getSelection() 不起作用。不知道为什么这不是我最近使用的构造，但是按照这个尝试 window.getSelection() ：（如果这不能解决问题，请使用谷歌搜索） [http://www.webdeveloper.com/论坛/存档/index.php/t-138944.html](http://www.webdeveloper.com/forum/archive/index.php/t-138944.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-15T02:03:34.147

好的，所以`document.getSelection()`在 FF 中返回一个字符串。字符串::文本不存在。所以你不能这样设置。

您需要做什么的基本想法（它适用于两种浏览器）：

通过它获取文本区域`id`——你需要在文本区域上设置一个`id`属性。获取选择的开始和结束位置。然后取三个子字符串：0->start、start->end、end->string.length。用他们在提示中输入的任何内容替换中间的子字符串。将`text`textarea 的 设置为新形成的字符串。

具体如何由你决定，我只是给你一个过程的味道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-12-03T00:09:15.663

我的 O'Reilly 火烈鸟书正在工作，但我似乎记得阅读 document.getSelection() 特别不适用于 textarea 元素，仅适用于页面的“不可编辑”部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-06-18T11:24:02.210

Window.getSelection 是使 DOMSelection 对象在 Firefox 中可用的方法。也许这就是您正在寻找的。

# visual-studio - Visual Studio 2008：如何安装项目模板

> ID：749979
> 
> 赞同：13
> 
> 时间：2009-04-15T01:37:57.250
> 
> 标签：visual-studio, templates

我使用“导出模板”向导创建了一个项目模板。我打开了 XML 文件并做了一些小改动，然后重新压缩了包。然后我将项目模板签入源代码管理，以便团队中的每个人都可以根据需要访问它。

但是对于我的生活，当我转到*Add->New Item*时，我无法让模板显示在*My Templates*下。

 *我尝试将 zip 文件复制到每个可能的目录中：

*   *工具->项目和解决方案->常规*下列出的模板目录
**   这些目录的所有子文件夹（即 /Visual C#/、/Visual Web Developer/ 等）*

 *但什么也没有出现。以前有没有其他人设法将项目模板分发给他们的队友？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-04-15T02:04:33.927

为了显示 VS 项目模板，您需要确保在将包含 .vstemplate 和模板代码文件的 .zip 文件复制到 %ProgramFiles%\Microsoft Visual Studio 后运行“devenv.exe /installvstemplates” 9.0\Common7\IDE\ItemTemplates\<项目类型> 文件夹。

我发现将整个东西包装到一个发现 VS9 路径的 MSI 中很有用，将项目/项目模板复制到必要的文件夹，并调用一个自定义操作，该操作向 devenv.exe 传递“/installvstemplates” “ 转变。这样，您的同事只需安装该软件包即可启动并运行！

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-15T01:52:16.340

这是我在网上找到的两篇文章：

首先是关于如何创建项目模板的内容：

[http://msdn.microsoft.com/en-us/library/ms247113(VS.80).aspx](http://msdn.microsoft.com/en-us/library/ms247113(VS.80).aspx)

二是如何让VS定位到item模板。

[http://msdn.microsoft.com/en-us/library/y3kkate1(VS.80).aspx](http://msdn.microsoft.com/en-us/library/y3kkate1(VS.80).aspx)

**据我所知，您必须将自定义模板放置在：**

我的文档\Visual Studio 2005\Templates\ProjectTemplates\Language\

亚当·贝伦特

# regex - 我正在寻找一个应用程序/文本编辑器

> ID：749990
> 
> 赞同：4
> 
> 时间：2009-04-15T01:47:03.763
> 
> 标签：regex, replace, increment

可以最好地帮助我在遇到每个匹配项时系统地修改正则表达式搜索的“替换”字段。

例如，我有一个 xml 文件，它需要在文本中的常规点插入短语“id = $number”，基本上，每次正则表达式匹配（id = 1，id = 2 等）时，$number++ 直到结束的文件。

我知道我可以只写一个 bash/perl/python 脚本或类似的脚本，但我希望它至少对用户友好，这样我就可以教我的聪明（但技术上不太倾向）的员工如何使用它和进行自己的修改。正则表达式对他们来说不是问题。

到目前为止，我最接近的是 Notepad++ 的列编辑器和“增加 [number] by”函数，但是我必须编写一个单独的正则表达式来对齐所有内容，添加增量，然后再写一个将其放回原处。不幸的是，我需要在太多不同类型的文件上使用此功能并“替换”以使宏可行。

理想情况下，该程序也可用于 Windows 和 Linux（可接受 WINE，但首选原生），并具有“VI/VIM 输入”选项（如果它是文本编辑器），但这些是次要的。

当然，如果有 OSS 解决方案就更好了，如果它提供了我正在寻找的解决方案，我很乐意向开发人员捐赠 20-50 美元。

为篇幅道歉，非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-15T01:50:46.610

emacs（版本 22 及更高版本）可以满足您的需求。请参阅[Steve Yegge 的博客](http://steve-yegge.blogspot.com/2006/06/shiny-and-new-emacs-22.html)，了解有关它的非常有趣的内容。我认为这应该有效：

```
Mx 替换正则表达式
  替换正则表达式：*在此处插入模式正则表达式*
  将正则表达式替换为：id = \#

```

`\#`是一个特殊的元字符，它被迄今为止发生的替换总数替换，从 0 开始。如果您希望列表从 1 而不是 0 开始，请使用以下替换字符串：

```
id = \,(1+ \#)
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-15T01:51:47.887

JEdi​​t 或许可以帮助您： http: [//www.jedit.org/](http://www.jedit.org/)

您可以使用它进行各种正则表达式甚至基于 bean 结果的替换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-15T01:52:22.580

[UltraEdit32](http://www.ultraedit.com/)很棒，我相信它具有您需要的功能。有 30 天的免费下载，因此您可以确保。:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-15T02:17:47.433

我知道你想要一个在 Windows/Linux 上可用的应用程序，但在 Mac 上还有另一个解决方案：[TextWrangler](http://www.barebones.com/products/textwrangler/)，而且它是免费的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-15T01:52:11.427

看看[UltraEdit32](http://www.ultraedit.com/)。这很好。不是免费的，但可在 Windows、Linux 和 Mac 平台上使用。它具有基于正则表达式的搜索和替换。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-15T02:47:37.613

这个[脚本应该让你在](http://www.vim.org/scripts/script.php?script_id=1199)[Vim](http://www.vim.org)中做你想做的事。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-15T03:30:48.460

Vim 函数可以实现递增数字的技巧，而且编写起来并不难。例如，[Vim wiki](http://vim.wikia.com/wiki/VimTip971)说明了如何做到这一点。另请参阅`:h sub-replace-\=`。

```
function! Counter()
    let i = g:c
    let g:c = g:c + 1
    return i
endfunction

:let c=1|%s/<\w\+\zs/\=' id="' . Counter() . '"'/g 
```

在这一点上，我们可能已经把用户友好性远远抛在了后面，但是 Vim 的 Ruby 支持也可以轻松地完成这种事情：

```
:ruby c=0
:rubydo $_.gsub!(/<\w+/){|m| c += 1; m + ' id="' + c.to_s + '"'} 
```

或 Perl：

```
:perl $c=1
:perldo s/<\w+/$& . ' id="' . $c++ . '"'/eg 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-15T03:33:14.070

对我来说，这听起来像是 awk 的工作，而不是编辑的工作。

# java - Leopard 中的 JConsole 在哪里

> ID：749991
> 
> 赞同：9
> 
> 时间：2009-04-15T01:48:14.650
> 
> 标签：java, macos, osx-leopard, jconsole

有谁知道 JConsole 在 MacOSX (Leopard) 中的位置？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-15T02:01:27.800

爪哇6？`/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home/bin/jconsole`

爪哇5？`/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Home/bin/jconsole`

如果您想查找位于 Mac OS X 10.5 系统上的任何程序或文件，您可以转到终端并以 unix 方式进行操作：

任何一个：

```
locate jconsole 
```

或者：

```
find / -name jconsole 
```

我更喜欢第一个，因为它更快。它使用预建索引来执行搜索。**``******